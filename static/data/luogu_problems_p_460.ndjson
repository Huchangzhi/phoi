{"pid": "P10329", "type": "P", "difficulty": 3, "samples": [["3\n4\n2\n5", "30\n5\n55"], ["3\n4\n3\n5", "30\n14\n55"], ["3\n8\n1\n3", "204\n1\n14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "递推", "2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] Add", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$，初始时 $a_i=i$。对该序列进行 $n-1$ 次操作，其中第 $i$ 次操作为在 $[1,n-i]$ 中等概率选择一个整数 $j$，令 $a_j$ 变为 $a_j+2a_{n-i+1}$。\n\n求操作完毕后 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "inputFormat": "输入第一行一个正整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n接下来 $T$ 组数据，每组一行一个正整数 $n$ $(1\\leq n\\leq 10^9)$，表示序列的长度。", "outputFormat": "$T$ 行，每行一个整数表示 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] Add", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$，初始时 $a_i=i$。对该序列进行 $n-1$ 次操作，其中第 $i$ 次操作为在 $[1,n-i]$ 中等概率选择一个整数 $j$，令 $a_j$ 变为 $a_j+2a_{n-i+1}$。\n\n求操作完毕后 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "inputFormat": "输入第一行一个正整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n接下来 $T$ 组数据，每组一行一个正整数 $n$ $(1\\leq n\\leq 10^9)$，表示序列的长度。", "outputFormat": "$T$ 行，每行一个整数表示 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10330", "type": "P", "difficulty": 2, "samples": [["3\n3 1\n3 2\n2 0", "4\n1100\n1\n0\n2"], ["4\n2 1\n3 3\n4 0\n3 2", "7\n1110000\n2\n0\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "Special Judge", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 黑白珠串", "background": "", "description": "你是宽窄巷子里的一位手艺人。这天，顾客向你订购一条黑白珠串。黑白珠串形如一条链，其上排列着黑色和白色的珠子。顾客还向你提出了 $k$ 个条件，每个条件如下：\n\n- 给定 $x,y$，要求黑白珠串中存在至少一个子串，满足子串的长度为 $x$，且恰好包含 $y$ 个黑珠。\n\n这里，子串指黑白珠串中的一段连续的珠子。\n\n请你为顾客构造出符合以上所有条件的黑白珠串，且满足珠串的长度最小。为了保证你构造的珠串满足上述条件，你还要对于每个条件，给出一个满足条件的子串的位置。", "inputFormat": "第一行包含一个整数 $k$ $(1\\leq k\\leq 10^5)$，表示条件的数量。\n\n接下来 $k$ 行，其中第 $i$ 行包含两个整数 $x_i,y_i$ $(1\\leq x_i\\leq 10^6,0\\leq y_i\\leq x_i)$，表示条件的内容。", "outputFormat": "第一行一个整数 $l$，表示满足条件的黑白珠串的最小长度。\n\n第二行一个由 ```0``` 和 ```1``` 构成的字符串，满足该字符串长度为 $l$，表示你构造的黑白珠串。其中 ```0``` 代表白珠，```1``` 代表黑珠。\n\n接下来 $k$ 行，其中第 $i$ 行包含一个整数 $p_i$，表示满足第 $i$ 个条件的一个子串在珠串中的起始位置。这里令珠串的位置编号从 $0$ 开始。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 黑白珠串", "background": "", "description": "你是宽窄巷子里的一位手艺人。这天，顾客向你订购一条黑白珠串。黑白珠串形如一条链，其上排列着黑色和白色的珠子。顾客还向你提出了 $k$ 个条件，每个条件如下：\n\n- 给定 $x,y$，要求黑白珠串中存在至少一个子串，满足子串的长度为 $x$，且恰好包含 $y$ 个黑珠。\n\n这里，子串指黑白珠串中的一段连续的珠子。\n\n请你为顾客构造出符合以上所有条件的黑白珠串，且满足珠串的长度最小。为了保证你构造的珠串满足上述条件，你还要对于每个条件，给出一个满足条件的子串的位置。", "inputFormat": "第一行包含一个整数 $k$ $(1\\leq k\\leq 10^5)$，表示条件的数量。\n\n接下来 $k$ 行，其中第 $i$ 行包含两个整数 $x_i,y_i$ $(1\\leq x_i\\leq 10^6,0\\leq y_i\\leq x_i)$，表示条件的内容。", "outputFormat": "第一行一个整数 $l$，表示满足条件的黑白珠串的最小长度。\n\n第二行一个由 ```0``` 和 ```1``` 构成的字符串，满足该字符串长度为 $l$，表示你构造的黑白珠串。其中 ```0``` 代表白珠，```1``` 代表黑珠。\n\n接下来 $k$ 行，其中第 $i$ 行包含一个整数 $p_i$，表示满足第 $i$ 个条件的一个子串在珠串中的起始位置。这里令珠串的位置编号从 $0$ 开始。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10331", "type": "P", "difficulty": 5, "samples": [["2\n5\n11001\n5\n11000", "1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 消消乐", "background": "", "description": "bjh 有一个长度为 $n$ 的只由字符 ```0``` 和 ```1``` 构成的字符串 $s$。\n\nbjh 的每次操作可以选择一个长度**大于 1** 的极大的只包含一种字符的子串，将这一整个子串修改为与其中字符相反的一个字符（如 $11001$ 一次操作后可以改为 $0001$ 或 $1111$）。\n\nbjh 会一直操作下去，直到字符串无法再被操作，请帮他找到所有操作方案中最大操作次数和最小操作次数的差值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示字符串的长度。\n\n第二行输入一个字符串 $s$，表示初始的字符串。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示最大操作次数和最小操作次数的差值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 消消乐", "background": "", "description": "bjh 有一个长度为 $n$ 的只由字符 ```0``` 和 ```1``` 构成的字符串 $s$。\n\nbjh 的每次操作可以选择一个长度**大于 1** 的极大的只包含一种字符的子串，将这一整个子串修改为与其中字符相反的一个字符（如 $11001$ 一次操作后可以改为 $0001$ 或 $1111$）。\n\nbjh 会一直操作下去，直到字符串无法再被操作，请帮他找到所有操作方案中最大操作次数和最小操作次数的差值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示字符串的长度。\n\n第二行输入一个字符串 $s$，表示初始的字符串。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示最大操作次数和最小操作次数的差值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10332", "type": "P", "difficulty": 6, "samples": [["5\n5 4 3 2 1\n0.9 0.89 0.88 0.87 0.86\n1 1 2 2", "11.572522416"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 一站到底", "background": "", "description": "假设你是电子科技大学的学生李华，在 4202 年的某一期一站到底中，你作为选手参加了节目的录制。不同于 2000 多年前的规则，节目中不会进行选手两两对战并抢答或轮答题目的环节，每位选手的答题以单人赛的方式进行，具体规则如下：\n\n在选手的答题环节开始前，系统会从题库中抽取 $n$ 道题，每道题根据难度系数有 $a_i$ 的分值。主持人会在一开始公布所有的题目内容和分值，之后进入选手的答题环节。\n\n为了增加节目的趣味性，在答题环节中，选手并不能随意选择作答题目的顺序。具体的，除 $1$ 号题目外所有题目**有且仅有**一道前置题目，在选手正确作答出某道题的前置题目后才可以进行作答这道题。节目组保证编号为 $i$ 的题目的前置题目编号必然小于 $i$。\n\n此外，如果选手作答题目时提交了错误答案，那么其脚下的地板将立刻打开，选手掉落并结束作答，此前答对的所有题目的分值之和就是该选手的得分。如果选手答对了所有的题目，那么所有题目的分值之和就是该选手的得分。\n\n现在你已经看完了所有的题目，根据你的知识储备，你判断出了每道题你做对的概率 $p_i$。你需要在最短时间内制定出最优的做题策略去最大化你的期望得分，请输出这个得分，~~并以参加这次节目的过程为主题写一篇不少于 120 词的英语作文~~。", "inputFormat": "第一行一个正整数 $n$ $(2\\le n\\le 10^5)$，代表题目的数量。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^6)$，$a_i$ 代表编号为 $i$ 的题目的分值。\n\n接下来一行 $n$ 个实数 $p_1,p_2,\\ldots,p_n$ $(0<p_i<1)$，$p_i$ 代表你答对编号为 $i$ 的题目的概率。\n\n接下来一行 $n-1$ 个正整数 $t_1,t_2,\\ldots,t_{n-1}$ $(1\\leq t_i\\leq i)$，$t_i$ 代表编号为 $i+1$ 的题目的前置题目的编号。", "outputFormat": "输出一行一个实数，代表在最优做题策略下的期望得分。\n\n假设你的输出是 $a$，答案是 $b$，当且仅当 $\\frac{|a-b|}{\\max(1,b)}\\le 10^{-9}$ 时，你的答案会被认为是正确的。", "hint": "在样例中，分值越高的题目你也有越大的概率答对，显然按照 $1,2,3,4,5$ 的顺序去答题最优。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 一站到底", "background": "", "description": "假设你是电子科技大学的学生李华，在 4202 年的某一期一站到底中，你作为选手参加了节目的录制。不同于 2000 多年前的规则，节目中不会进行选手两两对战并抢答或轮答题目的环节，每位选手的答题以单人赛的方式进行，具体规则如下：\n\n在选手的答题环节开始前，系统会从题库中抽取 $n$ 道题，每道题根据难度系数有 $a_i$ 的分值。主持人会在一开始公布所有的题目内容和分值，之后进入选手的答题环节。\n\n为了增加节目的趣味性，在答题环节中，选手并不能随意选择作答题目的顺序。具体的，除 $1$ 号题目外所有题目**有且仅有**一道前置题目，在选手正确作答出某道题的前置题目后才可以进行作答这道题。节目组保证编号为 $i$ 的题目的前置题目编号必然小于 $i$。\n\n此外，如果选手作答题目时提交了错误答案，那么其脚下的地板将立刻打开，选手掉落并结束作答，此前答对的所有题目的分值之和就是该选手的得分。如果选手答对了所有的题目，那么所有题目的分值之和就是该选手的得分。\n\n现在你已经看完了所有的题目，根据你的知识储备，你判断出了每道题你做对的概率 $p_i$。你需要在最短时间内制定出最优的做题策略去最大化你的期望得分，请输出这个得分，~~并以参加这次节目的过程为主题写一篇不少于 120 词的英语作文~~。", "inputFormat": "第一行一个正整数 $n$ $(2\\le n\\le 10^5)$，代表题目的数量。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^6)$，$a_i$ 代表编号为 $i$ 的题目的分值。\n\n接下来一行 $n$ 个实数 $p_1,p_2,\\ldots,p_n$ $(0<p_i<1)$，$p_i$ 代表你答对编号为 $i$ 的题目的概率。\n\n接下来一行 $n-1$ 个正整数 $t_1,t_2,\\ldots,t_{n-1}$ $(1\\leq t_i\\leq i)$，$t_i$ 代表编号为 $i+1$ 的题目的前置题目的编号。", "outputFormat": "输出一行一个实数，代表在最优做题策略下的期望得分。\n\n假设你的输出是 $a$，答案是 $b$，当且仅当 $\\frac{|a-b|}{\\max(1,b)}\\le 10^{-9}$ 时，你的答案会被认为是正确的。", "hint": "在样例中，分值越高的题目你也有越大的概率答对，显然按照 $1,2,3,4,5$ 的顺序去答题最优。", "locale": "zh-CN"}}}
{"pid": "P10333", "type": "P", "difficulty": 6, "samples": [["4 2 3\n0 2 3 2\n3 0\n2 1 4\n4 0", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "斜率优化", "高校校赛"], "title": "[UESTCPC 2024] 打字", "background": "", "description": "给定一颗 $n$ 个节点的 trie 树，以 $1$ 号节点为根，其余每个节点到父亲的边上都有一个字符，且父亲相同的节点到父亲的边上的字符互不相同。从根到每个节点的路径都代表一个单词，这个单词由路径上的字符顺序拼接而成。在每个节点 $i$ 处有一个权值 $c_i$，表示该节点所代表的单词需要写出的次数。\n\n你有一个 cache，可以选择任意个单词放在 cache 里面。写单词时，每写一个字符需要花费 $a$ 的代价。当写出一个完整的单词时，就可以选择结束当前单词，转而拼写下一个单词。而 cache 会根据当前已经写出的字符，把 cache 中以这一部分字符为前缀且字典序最小的单词提示出来。此时你可以花费 $b$ 的代价直接写出这个单词，**并结束当前单词的拼写**，转而拼写下一个单词。注意一个字符串本身也看作它自己的前缀。\n\n求完成 trie 树上所有单词的拼写所需的最小代价。", "inputFormat": "第一行输入三个整数 $n,a,b$ $(1\\leq n\\leq 2\\times 10^5,0\\leq a,b\\leq 10^4)$，分别表示 trie 树的大小、写一个字符的代价和使用 cache 写出单词的代价。\n\n接下来 $n$ 行，其中第 $i$ 行首先输入两个整数 $c_i,k_i$ $(0\\leq c_i\\leq 10^4,0\\leq k_i<n)$，分别表示第 $i$ 个节点上的权值和第 $i$ 个节点的儿子节点的个数。接下来输入 $k_i$ 个整数 $son_{i,1},son_{i,2},\\ldots,son_{i,k_i}$，表示第 $i$ 个节点的儿子节点编号，按照第 $i$ 个节点到儿子节点的边上的字符之间的字典序从小到大依次给出。\n\n保证 $c_1=0$。", "outputFormat": "输出一行一个整数，表示完成 trie 树上所有单词的拼写所需的最小代价。", "hint": "**【样例解释】**\n\n假设每个节点的子节点按字典序从小到大按 $a,b,\\ldots$ 编码。最优方案为将 $aa$ 放在 cache 中，于是 $aa$ 可以花费 $3\\times 4$\n的代价利用提示打出来，$a$ 和 $b$\n都直接打出来。总代价为 $3\\times 4+2\\times 1\\times 2+2\\times 1\\times 3=22$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 打字", "background": "", "description": "给定一颗 $n$ 个节点的 trie 树，以 $1$ 号节点为根，其余每个节点到父亲的边上都有一个字符，且父亲相同的节点到父亲的边上的字符互不相同。从根到每个节点的路径都代表一个单词，这个单词由路径上的字符顺序拼接而成。在每个节点 $i$ 处有一个权值 $c_i$，表示该节点所代表的单词需要写出的次数。\n\n你有一个 cache，可以选择任意个单词放在 cache 里面。写单词时，每写一个字符需要花费 $a$ 的代价。当写出一个完整的单词时，就可以选择结束当前单词，转而拼写下一个单词。而 cache 会根据当前已经写出的字符，把 cache 中以这一部分字符为前缀且字典序最小的单词提示出来。此时你可以花费 $b$ 的代价直接写出这个单词，**并结束当前单词的拼写**，转而拼写下一个单词。注意一个字符串本身也看作它自己的前缀。\n\n求完成 trie 树上所有单词的拼写所需的最小代价。", "inputFormat": "第一行输入三个整数 $n,a,b$ $(1\\leq n\\leq 2\\times 10^5,0\\leq a,b\\leq 10^4)$，分别表示 trie 树的大小、写一个字符的代价和使用 cache 写出单词的代价。\n\n接下来 $n$ 行，其中第 $i$ 行首先输入两个整数 $c_i,k_i$ $(0\\leq c_i\\leq 10^4,0\\leq k_i<n)$，分别表示第 $i$ 个节点上的权值和第 $i$ 个节点的儿子节点的个数。接下来输入 $k_i$ 个整数 $son_{i,1},son_{i,2},\\ldots,son_{i,k_i}$，表示第 $i$ 个节点的儿子节点编号，按照第 $i$ 个节点到儿子节点的边上的字符之间的字典序从小到大依次给出。\n\n保证 $c_1=0$。", "outputFormat": "输出一行一个整数，表示完成 trie 树上所有单词的拼写所需的最小代价。", "hint": "**【样例解释】**\n\n假设每个节点的子节点按字典序从小到大按 $a,b,\\ldots$ 编码。最优方案为将 $aa$ 放在 cache 中，于是 $aa$ 可以花费 $3\\times 4$\n的代价利用提示打出来，$a$ 和 $b$\n都直接打出来。总代价为 $3\\times 4+2\\times 1\\times 2+2\\times 1\\times 3=22$。", "locale": "zh-CN"}}}
{"pid": "P10334", "type": "P", "difficulty": 4, "samples": [["5\n1 3 4 6 6\n3 8 2 7 4", "24"], ["5\n1 3 4 5 5\n3 8 2 7 4", "26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2024", "O2优化", "单调栈", "高校校赛"], "title": "[UESTCPC 2024] 饮料", "background": "", "description": "有一个果汁机，每分钟可以制作一杯任意体积的果汁。\n\n有 $n$ 个人排成一队。第 $i$ 个人将在第 $t_i$ 分钟走到果汁机前，并拿走当前已经制作的果汁中体积最大的一杯。第 $i$ 个人拿到体积大于等于 $a_i$ 的果汁就会满意。如果此时没有果汁，则第 $i$ 个人也会不满意。\n\n问是否能够让所有人满意。如果是，输出让所有人满意所需的果汁体积之和的最小值。", "inputFormat": "第一行一个整数 $n$ $(1\\leq n\\leq 2 \\times 10^5)$，表示队伍中人的数量。\n\n接下来一行 $n$ 个整数 $t_1,t_2,\\ldots,t_n$ $(1\\leq t_1\\leq t_2\\leq\\ldots\\leq t_n\\leq 10^9)$，其中 $t_i$ 表示第 $i$ 个人到果汁机前的时间。如果两个人的到达时间相同，则按题目给出的顺序从左到右决定先后。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，其中 $a_i$ 表示第 $i$ 个人对果汁的体积要求。\n", "outputFormat": "如果不能令所有人满意，输出 $-1$。\n\n否则输出一行一个整数，表示所需的最小体积和。", "hint": "样例一解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $-$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $2$ | $2$ |\n| $5$ | $4$ | $-$ |\n| $6$ | $7$ | $7,4$ |\n\n样例二解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $4$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $4$ | $4$ |\n| $5$ | $7$ | $7,4$ |\n| $6$ | $-$ | $-$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 饮料", "background": "", "description": "有一个果汁机，每分钟可以制作一杯任意体积的果汁。\n\n有 $n$ 个人排成一队。第 $i$ 个人将在第 $t_i$ 分钟走到果汁机前，并拿走当前已经制作的果汁中体积最大的一杯。第 $i$ 个人拿到体积大于等于 $a_i$ 的果汁就会满意。如果此时没有果汁，则第 $i$ 个人也会不满意。\n\n问是否能够让所有人满意。如果是，输出让所有人满意所需的果汁体积之和的最小值。", "inputFormat": "第一行一个整数 $n$ $(1\\leq n\\leq 2 \\times 10^5)$，表示队伍中人的数量。\n\n接下来一行 $n$ 个整数 $t_1,t_2,\\ldots,t_n$ $(1\\leq t_1\\leq t_2\\leq\\ldots\\leq t_n\\leq 10^9)$，其中 $t_i$ 表示第 $i$ 个人到果汁机前的时间。如果两个人的到达时间相同，则按题目给出的顺序从左到右决定先后。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，其中 $a_i$ 表示第 $i$ 个人对果汁的体积要求。\n", "outputFormat": "如果不能令所有人满意，输出 $-1$。\n\n否则输出一行一个整数，表示所需的最小体积和。", "hint": "样例一解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $-$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $2$ | $2$ |\n| $5$ | $4$ | $-$ |\n| $6$ | $7$ | $7,4$ |\n\n样例二解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $4$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $4$ | $4$ |\n| $5$ | $7$ | $7,4$ |\n| $6$ | $-$ | $-$ |", "locale": "zh-CN"}}}
{"pid": "P10335", "type": "P", "difficulty": 3, "samples": [["3\n3 \n3 6 4\n2 \n1 2\n3\n2 5 6", "NO\nYES\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 取数游戏", "background": "", "description": "有一个长度为 $n$ 的序列，第 $i$ 个数的权值为 $a_i$。两位选手 A 和 B 在做游戏，他们将对轮流对序列进行操作。每位选手每次有两种操作可以选择：\n\n- 删除序列中的任意两个的数 $a_i,a_j$ $(i \\neq j)$，并在序列中添加一个权值为 $a_i+a_j$ 的数。当序列中只有一个数时，不能执行该操作。\n- 取走序列中一个数，将序列中剩下的数的权值全部累加给对方，结束游戏。\n\n如果最后 A 得到的权值更多，则他胜利，否则 B 胜利。\n\nA 先进行操作，问他是否有必胜策略。**保证 $a_i$ 之和为奇数。**", "inputFormat": "本题包含多组数据。\n\n第一行输入一个整数 $T$ $(1\\leq T\\leq 10^5)$，表示数据组数。\n\n对于每组数据，输入格式如下。\n\n第一行一个整数 $n$ $(1\\leq n\\leq 5 \\times 10^5)$，表示序列的初始长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示初始的序列。\n\n数据保证 $\\sum n\\leq 10^6$ 且 $\\sum a_i$ 为奇数。", "outputFormat": "对于每组数据，如果 A 有必胜策略，输出 `YES`，否则输出 `NO`。", "hint": "样例一解释如下：\n\n- 如果 A 选择权值 $3$，则 B 能得到的权值为 $6+4=10$。\n- 如果 A 选择权值 $4$，则 B 能得到的权值为 $3+6=9$。\n- 如果 A 选择权值 $6$，则 B 能得到的权值为 $3+4=7$。\n- 如果 A 选择合并权值 $3,6$，序列变为 $9,4$。若 B 选择权值 $9$，则 A 能得到的权值为 $4$。\n- 如果 A 选择合并权值 $3,4$，序列变为 $7,6$。若 B 选择权值 $7$，则 A 能得到的权值为 $6$。\n- 如果 A 选择合并权值 $4,6$，序列变为 $10,3$。若 B 选择权值 $10$，则 A 能得到的权值为 $3$。\n\n在所有情况下 B 均能以最优策略取得更高的权值，故 A 无法胜利。\n\n样例二解释如下：\n\n如果 A 选择权值 $2$，则 B 能得到的权值为 $1$。\n\n因此 A 有必胜策略。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 取数游戏", "background": "", "description": "有一个长度为 $n$ 的序列，第 $i$ 个数的权值为 $a_i$。两位选手 A 和 B 在做游戏，他们将对轮流对序列进行操作。每位选手每次有两种操作可以选择：\n\n- 删除序列中的任意两个的数 $a_i,a_j$ $(i \\neq j)$，并在序列中添加一个权值为 $a_i+a_j$ 的数。当序列中只有一个数时，不能执行该操作。\n- 取走序列中一个数，将序列中剩下的数的权值全部累加给对方，结束游戏。\n\n如果最后 A 得到的权值更多，则他胜利，否则 B 胜利。\n\nA 先进行操作，问他是否有必胜策略。**保证 $a_i$ 之和为奇数。**", "inputFormat": "本题包含多组数据。\n\n第一行输入一个整数 $T$ $(1\\leq T\\leq 10^5)$，表示数据组数。\n\n对于每组数据，输入格式如下。\n\n第一行一个整数 $n$ $(1\\leq n\\leq 5 \\times 10^5)$，表示序列的初始长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示初始的序列。\n\n数据保证 $\\sum n\\leq 10^6$ 且 $\\sum a_i$ 为奇数。", "outputFormat": "对于每组数据，如果 A 有必胜策略，输出 `YES`，否则输出 `NO`。", "hint": "样例一解释如下：\n\n- 如果 A 选择权值 $3$，则 B 能得到的权值为 $6+4=10$。\n- 如果 A 选择权值 $4$，则 B 能得到的权值为 $3+6=9$。\n- 如果 A 选择权值 $6$，则 B 能得到的权值为 $3+4=7$。\n- 如果 A 选择合并权值 $3,6$，序列变为 $9,4$。若 B 选择权值 $9$，则 A 能得到的权值为 $4$。\n- 如果 A 选择合并权值 $3,4$，序列变为 $7,6$。若 B 选择权值 $7$，则 A 能得到的权值为 $6$。\n- 如果 A 选择合并权值 $4,6$，序列变为 $10,3$。若 B 选择权值 $10$，则 A 能得到的权值为 $3$。\n\n在所有情况下 B 均能以最优策略取得更高的权值，故 A 无法胜利。\n\n样例二解释如下：\n\n如果 A 选择权值 $2$，则 B 能得到的权值为 $1$。\n\n因此 A 有必胜策略。", "locale": "zh-CN"}}}
{"pid": "P10336", "type": "P", "difficulty": 5, "samples": [["2 2\n1 0\n0 1\n1 1\n0 0", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 2-聚类算法", "background": "", "description": "Alice 和 Bob 是两只 $k$ 维空间中的生物。在他们生活的空间中，分布着 $2n$ 个特征点，其中第 $i$ 个特征点的坐标为 $(x_{i,1},x_{i,2},\\ldots,x_{i,k})$。\n\n在这个空间中，两点之间的距离被定义为它们之间的曼哈顿距离（即点 $i$ 与点 $j$ 之间的距离 $\\text{dist}_{i,j}=\\sum_{p=1}^{k}|x_{i,p}-x_{j,p}|$）。\n\nAlice 和 Bob 需要收集这些特征点。他们轮流从这 $2n$ 个点中选走一个点，已经被选走的点不能被再次选走。Alice 先手。Alice 会将她选走的点放入集合 $S_1$，而 Bob 会将他选走的点放入集合 $S_2$。\n\n设一个集合的价值 $\\text{val}(S)$ 为其中两两点之间的距离之和。Alice 希望最大化 $\\text{val}(S_1)-\\text{val}(S_2)$，而 Bob 希望最小化 $\\text{val}(S_1)-\\text{val}(S_2)$。\n\n若 Alice 和 Bob 都采取最优策略，请你求出最终 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值会是多少？", "inputFormat": "第一行输入两个整数 $n,k$ $(1\\leq n,k\\leq 10^5,n\\times k\\leq 10^5)$，分别表示特征点的数量的一半和空间的维度数量。\n\n接下来 $2n$ 行，每行 $k$ 个整数 $x_{i,1},x_{i,2},\\ldots,x_{i,k}$ $(-10^8\\leq x_{i,j}\\leq 10^8)$，表示第 $i$ 个特征点的坐标。", "outputFormat": "输出一个整数，表示 Alice 和 Bob 都采取最优策略的情况下 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值。\n\n“两两点之间的距离之和”对于每一个无序对只计算一次。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 2-聚类算法", "background": "", "description": "Alice 和 Bob 是两只 $k$ 维空间中的生物。在他们生活的空间中，分布着 $2n$ 个特征点，其中第 $i$ 个特征点的坐标为 $(x_{i,1},x_{i,2},\\ldots,x_{i,k})$。\n\n在这个空间中，两点之间的距离被定义为它们之间的曼哈顿距离（即点 $i$ 与点 $j$ 之间的距离 $\\text{dist}_{i,j}=\\sum_{p=1}^{k}|x_{i,p}-x_{j,p}|$）。\n\nAlice 和 Bob 需要收集这些特征点。他们轮流从这 $2n$ 个点中选走一个点，已经被选走的点不能被再次选走。Alice 先手。Alice 会将她选走的点放入集合 $S_1$，而 Bob 会将他选走的点放入集合 $S_2$。\n\n设一个集合的价值 $\\text{val}(S)$ 为其中两两点之间的距离之和。Alice 希望最大化 $\\text{val}(S_1)-\\text{val}(S_2)$，而 Bob 希望最小化 $\\text{val}(S_1)-\\text{val}(S_2)$。\n\n若 Alice 和 Bob 都采取最优策略，请你求出最终 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值会是多少？", "inputFormat": "第一行输入两个整数 $n,k$ $(1\\leq n,k\\leq 10^5,n\\times k\\leq 10^5)$，分别表示特征点的数量的一半和空间的维度数量。\n\n接下来 $2n$ 行，每行 $k$ 个整数 $x_{i,1},x_{i,2},\\ldots,x_{i,k}$ $(-10^8\\leq x_{i,j}\\leq 10^8)$，表示第 $i$ 个特征点的坐标。", "outputFormat": "输出一个整数，表示 Alice 和 Bob 都采取最优策略的情况下 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值。\n\n“两两点之间的距离之和”对于每一个无序对只计算一次。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10337", "type": "P", "difficulty": 2, "samples": [["1\n3\n2 6 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 操作序列", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$。\n\n你需要选定一个整数 $k$ $(1\\leq k\\leq n)$，然后对序列进行任意次操作，每次操作可以选择序列中 $k$ 个不同的位置，使得这些位置的数乘上一个相同的非零整数，最终使得序列中所有的数相等。\n\n输出满足条件的 $k$ 的最大值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示序列的长度。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示给定的序列。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示满足条件的 $k$ 的最大值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 操作序列", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$。\n\n你需要选定一个整数 $k$ $(1\\leq k\\leq n)$，然后对序列进行任意次操作，每次操作可以选择序列中 $k$ 个不同的位置，使得这些位置的数乘上一个相同的非零整数，最终使得序列中所有的数相等。\n\n输出满足条件的 $k$ 的最大值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示序列的长度。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示给定的序列。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示满足条件的 $k$ 的最大值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10338", "type": "P", "difficulty": 6, "samples": [["3 6\n1 2\n2 2\n2 0\n1 1 1 1\n1 2 2 1\n2 1 3\n3 3 1 1\n1 3 3 3\n2 1 3\n", "833333340\n83333337\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 彩票", "background": "", "description": "华清大学内有一个彩票站点，站点内设有 $n$ 个彩箱。初始时每个彩箱内都放有若干奖券，奖券分为中奖券与空奖券两种，其中第 $i$ 个彩箱内有 $a_i$ 张中奖券、$b_i$ 张空奖券。同学们每次抽奖时，将会选择一个彩箱，然后从该彩箱剩余的奖券中等概率随机抽取一张，即剩余的每张奖券被抽中的概率均相等。注意：被抽出的奖券将不放回彩箱。\n\n现在有 $m$ 位同学在彩票站点排队，同学们将依次每人进行一次操作。具体地，对于第 $j$ 个操作的同学，他可能进行的操作有以下三种：\n\n1. 抽奖：从第 $l_j$ 个到第 $r_j$ 个彩箱，对它们中的每个都连续抽取 $c_j$ 次奖。若彩箱中剩余奖券数量不足 $c_j$，则将彩箱中所有奖券抽完为止。\n2. 询问：从第 $x_j$ 个到第 $y_j$ 个彩箱，求所有被抽出的中奖券的数量之和的期望值。\n3. 加奖：在第 $p_j$ 个彩箱中，添加 $u_j$ 张中奖券和 $v_j$ 张空奖券。\n\n现在请你回答同学们的每次询问。由题目性质知，期望值一定可以写成 $\\frac{p}{q}$ 形式的有理数，请你输出它对 $10^9+7$（一个质数）取模后的结果，即找出一个 $r$ $(0\\leq r < 10^9+7)$ 使得 $qr \\equiv p \\pmod{10^9+7}$。可以证明这样的 $r$ 是唯一的。", "inputFormat": "第一行两个正整数 $n,m$，分别表示彩箱数和同学人数。\n\n接下来 $n$ 行，每行描述一个彩箱。\n\n这 $n$ 行中的第 $i$ 行有两个整数 $a_i,b_i$，意义见题目描述。\n\n接下来 $m$ 行，每行描述一个同学的操作。\n\n这 $m$ 行中的第 $j$ 行的第一个整数 $op_j$ 表示操作类型。若 $op_j=1$，接下来输入三个整数 $l_j,r_j,c_j$；若 $op_j = 2$，接下来输入两个整数 $x_j,y_j$；若 $op_j=3$，接下来输入三个整数 $p_j,u_j,v_j$。具体变量意义见题目描述。\n\n同一行内整数均由一个空格分隔开。\n\n输入数据保证：\n\n$0 \\leq a_i,b_i,c_j \\leq 10^8$\n\n$0\\leq u_j,v_j \\leq 10^3$\n\n$1\\leq l_j\\leq r_j \\leq n$\n\n$1\\leq x_j\\leq y_j\\leq n$\n\n$1\\leq p_j\\leq n$\n\n$op_j \\in \\{1,2,3\\}$", "outputFormat": "对于每个 $op_j = 2$ 的询问，输出一行一个整数表示询问的答案。", "hint": "**【样例解释 1】**\n\n第一位同学操作后，第 1 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{3}$。\n\n第二位同学操作后，第 2 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{2}$。\n\n第三位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} = \\frac{5}{6}$，它对 $10^9+7$ 取模的结果为 $833333340$。\n\n第四位同学操作后，第 3 个彩箱中有 3 张中奖券、1 张空奖券。\n\n第五位同学操作后，第 3 个彩箱中被抽出的中奖券数量期望值为 $\\frac{9}{4}$。\n\n第六位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} + \\frac{9}{4} = \\frac{37}{12}$，它对 $10^9+7$ 取模的结果为 $83333337$。\n\n**【样例 2】**\n\n见题目附件中 `2.in/2.ans`。\n\n**【样例 3】**\n\n见题目附件中 `3.in/3.ans`。\n\n**【样例 4】**\n\n见题目附件中 `4.in/4.ans`。\n\n**【子任务】**\n\n| 子任务编号| 分值 | $n,m\\leq$ | 其他限制 |\n| :--: | :--: | :--: | :--: |\n| 1 | 23 | $1000$ | $0\\leq a_i,b_i \\leq 10$ 且 $op_j \\neq 3$|\n| 2 | 17 | $10^5$ | $op_j \\neq 3$ 且 $l_j = r_j$ |\n| 3 | 20 | $2 \\times 10^5$ | $l_j=r_j$ |\n| 4 | 20 | $2 \\times 10^5$ | $op_j \\neq 3$ |\n| 5 | 20 | $3 \\times 10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 彩票", "background": "", "description": "华清大学内有一个彩票站点，站点内设有 $n$ 个彩箱。初始时每个彩箱内都放有若干奖券，奖券分为中奖券与空奖券两种，其中第 $i$ 个彩箱内有 $a_i$ 张中奖券、$b_i$ 张空奖券。同学们每次抽奖时，将会选择一个彩箱，然后从该彩箱剩余的奖券中等概率随机抽取一张，即剩余的每张奖券被抽中的概率均相等。注意：被抽出的奖券将不放回彩箱。\n\n现在有 $m$ 位同学在彩票站点排队，同学们将依次每人进行一次操作。具体地，对于第 $j$ 个操作的同学，他可能进行的操作有以下三种：\n\n1. 抽奖：从第 $l_j$ 个到第 $r_j$ 个彩箱，对它们中的每个都连续抽取 $c_j$ 次奖。若彩箱中剩余奖券数量不足 $c_j$，则将彩箱中所有奖券抽完为止。\n2. 询问：从第 $x_j$ 个到第 $y_j$ 个彩箱，求所有被抽出的中奖券的数量之和的期望值。\n3. 加奖：在第 $p_j$ 个彩箱中，添加 $u_j$ 张中奖券和 $v_j$ 张空奖券。\n\n现在请你回答同学们的每次询问。由题目性质知，期望值一定可以写成 $\\frac{p}{q}$ 形式的有理数，请你输出它对 $10^9+7$（一个质数）取模后的结果，即找出一个 $r$ $(0\\leq r < 10^9+7)$ 使得 $qr \\equiv p \\pmod{10^9+7}$。可以证明这样的 $r$ 是唯一的。", "inputFormat": "第一行两个正整数 $n,m$，分别表示彩箱数和同学人数。\n\n接下来 $n$ 行，每行描述一个彩箱。\n\n这 $n$ 行中的第 $i$ 行有两个整数 $a_i,b_i$，意义见题目描述。\n\n接下来 $m$ 行，每行描述一个同学的操作。\n\n这 $m$ 行中的第 $j$ 行的第一个整数 $op_j$ 表示操作类型。若 $op_j=1$，接下来输入三个整数 $l_j,r_j,c_j$；若 $op_j = 2$，接下来输入两个整数 $x_j,y_j$；若 $op_j=3$，接下来输入三个整数 $p_j,u_j,v_j$。具体变量意义见题目描述。\n\n同一行内整数均由一个空格分隔开。\n\n输入数据保证：\n\n$0 \\leq a_i,b_i,c_j \\leq 10^8$\n\n$0\\leq u_j,v_j \\leq 10^3$\n\n$1\\leq l_j\\leq r_j \\leq n$\n\n$1\\leq x_j\\leq y_j\\leq n$\n\n$1\\leq p_j\\leq n$\n\n$op_j \\in \\{1,2,3\\}$", "outputFormat": "对于每个 $op_j = 2$ 的询问，输出一行一个整数表示询问的答案。", "hint": "**【样例解释 1】**\n\n第一位同学操作后，第 1 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{3}$。\n\n第二位同学操作后，第 2 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{2}$。\n\n第三位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} = \\frac{5}{6}$，它对 $10^9+7$ 取模的结果为 $833333340$。\n\n第四位同学操作后，第 3 个彩箱中有 3 张中奖券、1 张空奖券。\n\n第五位同学操作后，第 3 个彩箱中被抽出的中奖券数量期望值为 $\\frac{9}{4}$。\n\n第六位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} + \\frac{9}{4} = \\frac{37}{12}$，它对 $10^9+7$ 取模的结果为 $83333337$。\n\n**【样例 2】**\n\n见题目附件中 `2.in/2.ans`。\n\n**【样例 3】**\n\n见题目附件中 `3.in/3.ans`。\n\n**【样例 4】**\n\n见题目附件中 `4.in/4.ans`。\n\n**【子任务】**\n\n| 子任务编号| 分值 | $n,m\\leq$ | 其他限制 |\n| :--: | :--: | :--: | :--: |\n| 1 | 23 | $1000$ | $0\\leq a_i,b_i \\leq 10$ 且 $op_j \\neq 3$|\n| 2 | 17 | $10^5$ | $op_j \\neq 3$ 且 $l_j = r_j$ |\n| 3 | 20 | $2 \\times 10^5$ | $l_j=r_j$ |\n| 4 | 20 | $2 \\times 10^5$ | $op_j \\neq 3$ |\n| 5 | 20 | $3 \\times 10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P10339", "type": "P", "difficulty": 5, "samples": [["6 6 3\n0 1 1 1 1 1\n3 4 6\n1 2 2\n2 3 3\n2 4 4\n1 5 3\n5 4 4\n5 6 3\n", "2\n"], ["7 6 3\n0 1 1 1 1 1 1\n3 4 6\n1 2 1\n2 4 1\n2 5 1\n5 6 5\n1 3 2\n1 7 5\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 补给计划", "background": "T 国是一个小国，受百年一遇的寒流影响，现在一些城市受到了严重的影响，T 国政府打算从首都派出救援队对受灾城市进行救助，同时建立若干补给点对救援队提供支持。", "description": "T 国一共有 $N$ 个城市（城市编号从 $1$ 到 $N$），这些城市被 $M$ 条双向道路所连接，每条道路有各自的长度（均大于 $0$）。\n\n共有 $K$ 个城市受灾，T 国政府计划从首都（$1$ 号城市）向这 $K$ 个城市各派出一支救援队，同时为了更好地完成救助，T 国政府计划在一些城市建立补给点。\n\n然而由于受到地理与资金等因素的影响，并不是每个城市都能建立补给点（一个城市能否建立补给点与其是否是首都或受灾城市无关）。\n\n为了尽快完成救助，这 $K$ 支救援队都只会按照最短路径前往自己的目的城市，T 国政府希望在能够建立补给点的城市中建立尽量少的补给点，使得每只救援队至少有一条到其目的城市的最短路径会经过至少一个补给点。\n\n现在告诉你 T 国的城市与道路信息，你需要计算出 T 国政府至少需要建立多少个补给点。", "inputFormat": "输入的第一行包含三个整数 $N,M,K$，含义见题目描述，保证 $1 \\le N \\le 200, 0 \\le M \\le 10000, 1 \\le K \\le 20$。\n\n第二行有 $N$ 个整数，每个数为 $0$ 或者 $1$，依次表示对应的城市能否建立补给点（$1$ 表示可以建立补给点）。\n\n第三行有 $K$ 个正整数 $x_i$，表示受灾的城市编号，保证这 $K$ 个数各不相同且首都不会受灾，$1 \\le x_i \\le N$。\n\n接下来 $M$ 行，每行三个整数 $u,v,w$，表示城市 $u$ 和城市 $v$ 之间存在一条长度为 $w$ 的道路，$1 \\le u,v \\le N, 0 < w \\le 10^9$。\n\n输入保证一定存在至少一个方案满足题目描述的要求。", "outputFormat": "输出一个整数表示答案。", "hint": "**【样例解释 1】**\n\n该样例对应的图形如下，其中 $1$ 号点是首都，$3,4,6$ 号点是受灾城市：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64qspivj.png)\n\n该样例至少需要修建 $2$ 个补给点，可以分别建在 $2,5$ 或者 $2,6$ 。注意不能修建在 $3,5$ 号点，因为从首都到 $4$ 号点的最短路径只能是 $1 \\rightarrow 2 \\rightarrow 4$，不存在经过 $3,5$ 号点的最短路。\n\n**【子任务】**\n\n| 测试点  | $N$ | $M$ | $K$ | 特殊性质 |\n| :--:|:--:|:--:|:--:|:--:|\n| $1\\cdots 2$ | $1 \\le N \\le 200$ | $M=N-1$| $1 \\le K \\le 20$ | 输入是一棵树 |\n| $3\\cdots 6$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 4$ | 无 |\n| $7\\cdots 12$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 16$ | 无 |\n| $13\\cdots 20$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 20$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 补给计划", "background": "T 国是一个小国，受百年一遇的寒流影响，现在一些城市受到了严重的影响，T 国政府打算从首都派出救援队对受灾城市进行救助，同时建立若干补给点对救援队提供支持。", "description": "T 国一共有 $N$ 个城市（城市编号从 $1$ 到 $N$），这些城市被 $M$ 条双向道路所连接，每条道路有各自的长度（均大于 $0$）。\n\n共有 $K$ 个城市受灾，T 国政府计划从首都（$1$ 号城市）向这 $K$ 个城市各派出一支救援队，同时为了更好地完成救助，T 国政府计划在一些城市建立补给点。\n\n然而由于受到地理与资金等因素的影响，并不是每个城市都能建立补给点（一个城市能否建立补给点与其是否是首都或受灾城市无关）。\n\n为了尽快完成救助，这 $K$ 支救援队都只会按照最短路径前往自己的目的城市，T 国政府希望在能够建立补给点的城市中建立尽量少的补给点，使得每只救援队至少有一条到其目的城市的最短路径会经过至少一个补给点。\n\n现在告诉你 T 国的城市与道路信息，你需要计算出 T 国政府至少需要建立多少个补给点。", "inputFormat": "输入的第一行包含三个整数 $N,M,K$，含义见题目描述，保证 $1 \\le N \\le 200, 0 \\le M \\le 10000, 1 \\le K \\le 20$。\n\n第二行有 $N$ 个整数，每个数为 $0$ 或者 $1$，依次表示对应的城市能否建立补给点（$1$ 表示可以建立补给点）。\n\n第三行有 $K$ 个正整数 $x_i$，表示受灾的城市编号，保证这 $K$ 个数各不相同且首都不会受灾，$1 \\le x_i \\le N$。\n\n接下来 $M$ 行，每行三个整数 $u,v,w$，表示城市 $u$ 和城市 $v$ 之间存在一条长度为 $w$ 的道路，$1 \\le u,v \\le N, 0 < w \\le 10^9$。\n\n输入保证一定存在至少一个方案满足题目描述的要求。", "outputFormat": "输出一个整数表示答案。", "hint": "**【样例解释 1】**\n\n该样例对应的图形如下，其中 $1$ 号点是首都，$3,4,6$ 号点是受灾城市：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64qspivj.png)\n\n该样例至少需要修建 $2$ 个补给点，可以分别建在 $2,5$ 或者 $2,6$ 。注意不能修建在 $3,5$ 号点，因为从首都到 $4$ 号点的最短路径只能是 $1 \\rightarrow 2 \\rightarrow 4$，不存在经过 $3,5$ 号点的最短路。\n\n**【子任务】**\n\n| 测试点  | $N$ | $M$ | $K$ | 特殊性质 |\n| :--:|:--:|:--:|:--:|:--:|\n| $1\\cdots 2$ | $1 \\le N \\le 200$ | $M=N-1$| $1 \\le K \\le 20$ | 输入是一棵树 |\n| $3\\cdots 6$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 4$ | 无 |\n| $7\\cdots 12$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 16$ | 无 |\n| $13\\cdots 20$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 20$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P10341", "type": "P", "difficulty": 3, "samples": [["3 1 2\n1 3 6\n", "2"], ["3 1 3\n1 3 6\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 紧急决策", "background": null, "description": "在一片海岸上，有 $n$ 个灯塔，从 $1$ 到 $n$ 编号。这片海岸可以看作一条数轴，每个灯塔可以看作数轴上的一个点。第 $i$ 个灯塔在数轴上的位置为 $x_i$，每个位置上最多只能有一个灯塔。这 $n$ 个灯塔按照位置从前到后的顺序排列，即第 $x_i < x_{i+1}, 1 \\le i < n$。现在，刚好有 $n$ 名游客正在海岸外排队等候进入海岸，第 $i$ 名游客进入第 $i$ 座灯塔参观。\n\n出于安全考虑，每座有游客在上面的灯塔必须被*照亮*。但由于海岸上的供能限制，最多只能*点亮* $t$ 座灯塔。每个灯塔的照明范围为 $q$。当某个灯塔上的灯打开后，海岸上和它距离不超过 $q$ 位置都会被照亮（即集合 $\\{x \\mid \\lvert x-x_i \\rvert \\le q\\}$ 中的所有点都会被照亮）。\n\n现在你作为海岸的旅游局的管理者，需要决定让哪些游客进入海岸玩耍。做决策不是拍脑袋想出来的，必须满足几点要求：\n\n- 保证安全第一原则，即可以找到一种照明方案使得进入海岸的每个游客所在的灯塔都被照明；\n- 保证先来后到原则，排在队列前面的游客优先进入海岸。如果某个游客不能进入海岸，则排在他后面的游客都不能进入海岸；\n- 保证追求利润原则，卖出尽可能多的门票，即尽量让数量更多的游客进入海岸。\n\n精打细算的你一敲键盘，算出最后会有多少游客进入海岸。", "inputFormat": "第一行为三个整数 $n,t,q$，表示灯塔的数目以及最多点亮的灯塔的数目。\n\n第二行为 $n$ 个整数，第 $i$ 个数 $x_i$ 表示第 $i$ 座灯塔的坐标。", "outputFormat": "输出一行一个整数，表示最后进入海岸的游客数目。", "hint": "**【样例解释 1】**\n\n可让前两名游客进入海岸，并点亮第一座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【样例解释 2】**\n\n可让前三名游客进入海岸，并点亮第二座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $t \\le $ | $q \\le $ | 分值 |\n|:--:|:--:|:--:|:--:|:--:|\n| 1| $100$ | $100$ | $10^9$ | 20 |\n|2| $10^3$ | $10^3$ | $10^9$ | 20 |\n|3| $10^4$ | $10^4$ | $10^9$ | 20|\n|4| $10^5$ | $10^5$ | $10^9$ | 20 |\n|5| $7.5\\times10^6$ | $7.5\\times10^6$ | $10^9$ | 20 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 紧急决策", "background": null, "description": "在一片海岸上，有 $n$ 个灯塔，从 $1$ 到 $n$ 编号。这片海岸可以看作一条数轴，每个灯塔可以看作数轴上的一个点。第 $i$ 个灯塔在数轴上的位置为 $x_i$，每个位置上最多只能有一个灯塔。这 $n$ 个灯塔按照位置从前到后的顺序排列，即第 $x_i < x_{i+1}, 1 \\le i < n$。现在，刚好有 $n$ 名游客正在海岸外排队等候进入海岸，第 $i$ 名游客进入第 $i$ 座灯塔参观。\n\n出于安全考虑，每座有游客在上面的灯塔必须被*照亮*。但由于海岸上的供能限制，最多只能*点亮* $t$ 座灯塔。每个灯塔的照明范围为 $q$。当某个灯塔上的灯打开后，海岸上和它距离不超过 $q$ 位置都会被照亮（即集合 $\\{x \\mid \\lvert x-x_i \\rvert \\le q\\}$ 中的所有点都会被照亮）。\n\n现在你作为海岸的旅游局的管理者，需要决定让哪些游客进入海岸玩耍。做决策不是拍脑袋想出来的，必须满足几点要求：\n\n- 保证安全第一原则，即可以找到一种照明方案使得进入海岸的每个游客所在的灯塔都被照明；\n- 保证先来后到原则，排在队列前面的游客优先进入海岸。如果某个游客不能进入海岸，则排在他后面的游客都不能进入海岸；\n- 保证追求利润原则，卖出尽可能多的门票，即尽量让数量更多的游客进入海岸。\n\n精打细算的你一敲键盘，算出最后会有多少游客进入海岸。", "inputFormat": "第一行为三个整数 $n,t,q$，表示灯塔的数目以及最多点亮的灯塔的数目。\n\n第二行为 $n$ 个整数，第 $i$ 个数 $x_i$ 表示第 $i$ 座灯塔的坐标。", "outputFormat": "输出一行一个整数，表示最后进入海岸的游客数目。", "hint": "**【样例解释 1】**\n\n可让前两名游客进入海岸，并点亮第一座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【样例解释 2】**\n\n可让前三名游客进入海岸，并点亮第二座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $t \\le $ | $q \\le $ | 分值 |\n|:--:|:--:|:--:|:--:|:--:|\n| 1| $100$ | $100$ | $10^9$ | 20 |\n|2| $10^3$ | $10^3$ | $10^9$ | 20 |\n|3| $10^4$ | $10^4$ | $10^9$ | 20|\n|4| $10^5$ | $10^5$ | $10^9$ | 20 |\n|5| $7.5\\times10^6$ | $7.5\\times10^6$ | $10^9$ | 20 |", "locale": "zh-CN"}}}
{"pid": "P10342", "type": "P", "difficulty": 6, "samples": [["4\n12 23 23 45", "23"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 数列", "background": "", "description": "定义一个长度为 $k$ 的数列的价值为：$val = \\max \\limits_{1 \\le i \\le k}\\{i \\times f(i,k)\\}$。\n\n其中 $f(i,j)$ 表示区间 $[i,j]$ 范围内数值种类数。\n\n给出一个长度为 $n$ 的数列，计算所有连续子区间的价值总和。将一个连续子区间视为一个独立的数列，计算出的价值即为该连续子区间的价值。\n\n设 $m$ 为数列里出现的数值种类数。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个正整数，$a_1, a_2, \\dots, a_n$ 描述数列里每个位置上的数值。\n\n对于所有的输入数据，都满足 $1\\le n \\le 10^5$。", "outputFormat": "第一行输出一个整数表示答案对 $998\\ 244\\ 353$ 取模。", "hint": "**【样例解释 1】**\n\n所有长度为 $1$ 的区间对答案的贡献都是 $1$。\n\n所有长度为 $2$ 的区间对答案的贡献都是 $2$。\n\n$[1,3]$ 这个区间对答案贡献为 $3$。\n\n$[2,4]$ 这个区间对答案贡献为 $4$。\n\n$[1,4]$ 这个区间对答案贡献为 $6$。\n\n综上答案为 $ans = 4 \\times 1 + 2 \\times 3 + 3 + 4 + 6 = 23$。\n\n**【样例 2】**\n\n见题目附件 `2.in/ans`\n\n**【样例 3】**\n\n见题目附件 `3.in/ans`\n\n**【样例 4】**\n\n见题目附件 `4.in/ans`\n\n**【样例 5】**\n\n见题目附件 `5.in/ans`\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $m\\le$ | $a_i\\le$ | 约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $800$ | $800$ | $10^5$ | 无 | 13 |\n| 2 | $10^5$ | $10^5$ | $10^5$ | 不会出现相同的数值 | 15 |\n| 3 | $8\\times 10^4$ | $600$ | $10^5$ | $[1,m][m+1,2m]\\dots[\\lfloor\\frac{n}{m}\\rfloor\\times m + 1,n]$每个区间无重复数值 | 21 |\n| 4 | $10^5$ | $80$ | $10^5$ | 无 | 24 |\n| 5 | $8\\times 10^4$ | $600$ | $10^5$| 无 | 27 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 数列", "background": "", "description": "定义一个长度为 $k$ 的数列的价值为：$val = \\max \\limits_{1 \\le i \\le k}\\{i \\times f(i,k)\\}$。\n\n其中 $f(i,j)$ 表示区间 $[i,j]$ 范围内数值种类数。\n\n给出一个长度为 $n$ 的数列，计算所有连续子区间的价值总和。将一个连续子区间视为一个独立的数列，计算出的价值即为该连续子区间的价值。\n\n设 $m$ 为数列里出现的数值种类数。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个正整数，$a_1, a_2, \\dots, a_n$ 描述数列里每个位置上的数值。\n\n对于所有的输入数据，都满足 $1\\le n \\le 10^5$。", "outputFormat": "第一行输出一个整数表示答案对 $998\\ 244\\ 353$ 取模。", "hint": "**【样例解释 1】**\n\n所有长度为 $1$ 的区间对答案的贡献都是 $1$。\n\n所有长度为 $2$ 的区间对答案的贡献都是 $2$。\n\n$[1,3]$ 这个区间对答案贡献为 $3$。\n\n$[2,4]$ 这个区间对答案贡献为 $4$。\n\n$[1,4]$ 这个区间对答案贡献为 $6$。\n\n综上答案为 $ans = 4 \\times 1 + 2 \\times 3 + 3 + 4 + 6 = 23$。\n\n**【样例 2】**\n\n见题目附件 `2.in/ans`\n\n**【样例 3】**\n\n见题目附件 `3.in/ans`\n\n**【样例 4】**\n\n见题目附件 `4.in/ans`\n\n**【样例 5】**\n\n见题目附件 `5.in/ans`\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $m\\le$ | $a_i\\le$ | 约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $800$ | $800$ | $10^5$ | 无 | 13 |\n| 2 | $10^5$ | $10^5$ | $10^5$ | 不会出现相同的数值 | 15 |\n| 3 | $8\\times 10^4$ | $600$ | $10^5$ | $[1,m][m+1,2m]\\dots[\\lfloor\\frac{n}{m}\\rfloor\\times m + 1,n]$每个区间无重复数值 | 21 |\n| 4 | $10^5$ | $80$ | $10^5$ | 无 | 24 |\n| 5 | $8\\times 10^4$ | $600$ | $10^5$| 无 | 27 |", "locale": "zh-CN"}}}
{"pid": "P10343", "type": "P", "difficulty": 7, "samples": [["4 1\n0 0 0\n0 1 0\n1 0 0\n1 1 0\n", "0\n3\n3\n4"], ["3 1\n0 0 1\n0 3 1\n0 6 1\n", "0\n1\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 推恩令", "background": "西汉初年，汉高祖刘邦为了更好地将土地掌握在刘家的手里，大量分封刘姓诸侯王。但随着刘邦去世，诸侯王们越来越不受中央的控制。为了削弱诸侯国的势力，汉武帝刘彻采纳朝臣主父偃的建议，实行推恩令。推恩令要求诸侯王将自己的土地分封给自己的每个子弟，而不是传位给自己的长子。这样一来，土地面积大的王国将被划分为几个土地比较小的诸侯国，诸侯王们的势力也就得到了削弱。", "description": "让我们来考虑这么一个实际的例子：有一个诸侯王，他的诸侯国里有 $n$ 个城邦，其中，城邦 $s$ 是他的诸侯国的国都。我们可以用平面直角坐标系来描述他的领土，第 $i$ 个城邦可以被看作坐标系中以 $(x_i,y_i)$ 为中心，$r_i$ 为半径的一个圆。任意两个城邦之间不会有重叠的部分（相交），也不会相互接触（相切）。\n\n这个诸侯王有两个儿子，他想用一种简单的方式将他的国土分给他的两个儿子：在他的国土中修建一道分界渠。这道分界渠可以用坐标系中的一条直线来表示，它不能经过任意一个城邦（相交），也不能经过一个城邦的边界（相切）。这道分界渠可以将国土分为两个部分，国都 $s$ 所在的部分分给长子，另一部分分给次子。为了保证次子也可以选择一个城邦作为他的国都，分界渠两侧的国土都必须包含至少一个城邦。\n\n分界渠的修建方式可以有很多种，为了保证公平，诸侯王希望在所有本质不同的修建水渠的方式中随机地选择一种。如果两种修建分界渠的方式会把城邦分成相同的两个部分，那么这两种修建方式就被认为是本质相同的。\n\n诸侯王的次子打听到了国王的划分办法。为了提前挑选自己的国都，他想知道了解每一个城邦成为他的国都的可能性大小。他把这个任务交给了你，你需要帮助他计算：对于每一个城邦，有多少种本质不同的修建水渠的方式能使得他能选择这个城邦作为国都？", "inputFormat": "第一行两个整数 $n,s$，分别表示诸侯国内城邦的数量以及国都的编号。\n\n接下来 $n$ 行，每行三个整数 $x_i, y_i, r_i$，第$i$行表示第 $i$ 个城邦的中心和半径。", "outputFormat": "输出 $n$ 行，每行一个整数 $a_i$，第 $i$ 行的输出表示有 $a_i$ 种本质不同的修水渠方案能让次子选择第 $i$ 个城邦作为国都。", "hint": "**【样例 3】**\n\n见题目附件中 `3.in/ans`。\n\n**【子任务】**\n\n对于 $100\\%$ 的数据，满足 $1\\leq s\\leq n\\leq 1000$，$0\\leq |x_i|, |y_i|, r_i \\leq 10^4$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :--: | :--: | :--: |\n| 1 | 17 | $n\\leq 18$ |\n| 2 | 29 | $n\\leq 100$ |\n| 3 | 22 | $r_i=0$ |\n| 4 | 32 | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 推恩令", "background": "西汉初年，汉高祖刘邦为了更好地将土地掌握在刘家的手里，大量分封刘姓诸侯王。但随着刘邦去世，诸侯王们越来越不受中央的控制。为了削弱诸侯国的势力，汉武帝刘彻采纳朝臣主父偃的建议，实行推恩令。推恩令要求诸侯王将自己的土地分封给自己的每个子弟，而不是传位给自己的长子。这样一来，土地面积大的王国将被划分为几个土地比较小的诸侯国，诸侯王们的势力也就得到了削弱。", "description": "让我们来考虑这么一个实际的例子：有一个诸侯王，他的诸侯国里有 $n$ 个城邦，其中，城邦 $s$ 是他的诸侯国的国都。我们可以用平面直角坐标系来描述他的领土，第 $i$ 个城邦可以被看作坐标系中以 $(x_i,y_i)$ 为中心，$r_i$ 为半径的一个圆。任意两个城邦之间不会有重叠的部分（相交），也不会相互接触（相切）。\n\n这个诸侯王有两个儿子，他想用一种简单的方式将他的国土分给他的两个儿子：在他的国土中修建一道分界渠。这道分界渠可以用坐标系中的一条直线来表示，它不能经过任意一个城邦（相交），也不能经过一个城邦的边界（相切）。这道分界渠可以将国土分为两个部分，国都 $s$ 所在的部分分给长子，另一部分分给次子。为了保证次子也可以选择一个城邦作为他的国都，分界渠两侧的国土都必须包含至少一个城邦。\n\n分界渠的修建方式可以有很多种，为了保证公平，诸侯王希望在所有本质不同的修建水渠的方式中随机地选择一种。如果两种修建分界渠的方式会把城邦分成相同的两个部分，那么这两种修建方式就被认为是本质相同的。\n\n诸侯王的次子打听到了国王的划分办法。为了提前挑选自己的国都，他想知道了解每一个城邦成为他的国都的可能性大小。他把这个任务交给了你，你需要帮助他计算：对于每一个城邦，有多少种本质不同的修建水渠的方式能使得他能选择这个城邦作为国都？", "inputFormat": "第一行两个整数 $n,s$，分别表示诸侯国内城邦的数量以及国都的编号。\n\n接下来 $n$ 行，每行三个整数 $x_i, y_i, r_i$，第$i$行表示第 $i$ 个城邦的中心和半径。", "outputFormat": "输出 $n$ 行，每行一个整数 $a_i$，第 $i$ 行的输出表示有 $a_i$ 种本质不同的修水渠方案能让次子选择第 $i$ 个城邦作为国都。", "hint": "**【样例 3】**\n\n见题目附件中 `3.in/ans`。\n\n**【子任务】**\n\n对于 $100\\%$ 的数据，满足 $1\\leq s\\leq n\\leq 1000$，$0\\leq |x_i|, |y_i|, r_i \\leq 10^4$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :--: | :--: | :--: |\n| 1 | 17 | $n\\leq 18$ |\n| 2 | 29 | $n\\leq 100$ |\n| 3 | 22 | $r_i=0$ |\n| 4 | 32 | 无 |", "locale": "zh-CN"}}}
{"pid": "P10344", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] PCAP 文件解析与读写", "background": "说明：请从题目附件下载试题题面所提及的《学习手册》。自本题起的五题，为 THUSC 2019 第三试《网络流量分析与处理》的五小题。原试题共六小题，其中最后一题为反馈，不再收入。\n\n---\n\n芃芃是华清大学计算机系的一名学生，马上读大二上学期。由于他精通 OI，觉得这个学期的唯一一门专业课《数据结构》实在是太简单了。在学长杰哥的盛情推荐下，他提前选了大三的专业课《计算机网络原理》。然而，这门课程的大作业是自己动手实现一个软件路由器，这可难倒了没有工程经验的芃芃。为了不让杰哥失望，他决定在暑假里就提前完成这个任务。\n\n本题一共分为 6 个小题，难度递增。你将与芃芃一起学习网络的基本原理、网络设备的工作方式，并亲手实现一个个功能，最终完成一个简化版的路由器软件。麻雀虽小，五脏俱全，它将能对多种基本的网络协议进行处理，并担任起路由器最根本的使命——转发。\n\n在本题**所有的小题**中，我们都有以下的约定：\n\n* 你的计算机上有 16 个网络接口，编号从 1 到 16。\n* 你的计算机上默认的路由表为空，并且只能从 RIP 报文获得路由表的更新。\n* 每个接口对应**一个** IP 地址 `10.2.n.1/24`，其中 $n$ 代表接口编号，范围是 1 到 16。\n* 每个接口对应一个 MAC 地址 `98:01:29:00:00:xx`，其中 `xx` 是接口编号的 16 进制表示，范围是 $01_{16}$ 到 $10_{16}$。\n* 所有的流量片段，包括读取和写入的，都是以太网帧（包括帧头和帧尾的校验），包含完整的协议格式。\n* 除特殊说明外，输入的 PCAP 文件中的流量片段都是按照时间顺序排列的（时间戳单调递增），只需要进行依次处理即可。\n\n如果你不能理解上述的约定，请参见《学习手册》网络基础相关部分。", "description": "所有题目中，网络流量都将以 PCAP 文件格式保存，具体格式说明可参见《学习手册》。本题需要对 PCAP 文件进行基本的读写与解析。\n\n在本题中，你需要完成的任务是依次遍历输入文件中时间乱序的流量片段，在对它们进行一些操作后，组装为 PCAP 格式写入输出。关于文件的读写方式，可以参照《学习手册》。\n\n需要进行的操作为：只保留长度**不大于** $1000$ 的片段（只考虑完整的以太网帧长度，不包括 PCAP 格式的片段头），并按照时间升序排序这些片段（即首先比较秒，而后比较微秒），保证没有两个片段的时间是相同的。需要注意，你的输出文件需要是一个合法的 PCAP 文件。为了测试文件格式的合法性，你可以使用 Wireshark 等工具打开你的输出文件进行检查。\n\n与手册中指示的不同的是，本题中，你应该直接完整复制每个流量片段的头，包括时间戳字段。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ |\n|:--:|:--:|:--:|\n| 1 | $=10^2$ | $=5\\times 10^4$ |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n用 Wireshark 打开样例输入文件，应该可以看到，界面上部记录了这个 PCAP 文件中记录的所有以太网帧，界面中部显示的是当前这个以太网帧的解析，下部则是它的十六进制数据。对于这个软件的详细使用方法，除了部分题目给出的提示外，不会提供更多帮助，请选手自行熟悉并摸索。\n\n样例输入文件记录了两个以太网帧，都是从 `10.2.254.100` 发往 `10.2.12.82` 地址的 ARP 请求，它们区别在于 ARP 请求后多余的数据长度不同。由于第一个帧的长度不大于 1000 ，第二个帧的长度大于 1000，按照题目意思，只有第一个帧需要输出，排序后输出到了样例输出文件中，你可以同样地用 Wireshark 打开样例输出文件来验证这一点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] PCAP 文件解析与读写", "background": "说明：请从题目附件下载试题题面所提及的《学习手册》。自本题起的五题，为 THUSC 2019 第三试《网络流量分析与处理》的五小题。原试题共六小题，其中最后一题为反馈，不再收入。\n\n---\n\n芃芃是华清大学计算机系的一名学生，马上读大二上学期。由于他精通 OI，觉得这个学期的唯一一门专业课《数据结构》实在是太简单了。在学长杰哥的盛情推荐下，他提前选了大三的专业课《计算机网络原理》。然而，这门课程的大作业是自己动手实现一个软件路由器，这可难倒了没有工程经验的芃芃。为了不让杰哥失望，他决定在暑假里就提前完成这个任务。\n\n本题一共分为 6 个小题，难度递增。你将与芃芃一起学习网络的基本原理、网络设备的工作方式，并亲手实现一个个功能，最终完成一个简化版的路由器软件。麻雀虽小，五脏俱全，它将能对多种基本的网络协议进行处理，并担任起路由器最根本的使命——转发。\n\n在本题**所有的小题**中，我们都有以下的约定：\n\n* 你的计算机上有 16 个网络接口，编号从 1 到 16。\n* 你的计算机上默认的路由表为空，并且只能从 RIP 报文获得路由表的更新。\n* 每个接口对应**一个** IP 地址 `10.2.n.1/24`，其中 $n$ 代表接口编号，范围是 1 到 16。\n* 每个接口对应一个 MAC 地址 `98:01:29:00:00:xx`，其中 `xx` 是接口编号的 16 进制表示，范围是 $01_{16}$ 到 $10_{16}$。\n* 所有的流量片段，包括读取和写入的，都是以太网帧（包括帧头和帧尾的校验），包含完整的协议格式。\n* 除特殊说明外，输入的 PCAP 文件中的流量片段都是按照时间顺序排列的（时间戳单调递增），只需要进行依次处理即可。\n\n如果你不能理解上述的约定，请参见《学习手册》网络基础相关部分。", "description": "所有题目中，网络流量都将以 PCAP 文件格式保存，具体格式说明可参见《学习手册》。本题需要对 PCAP 文件进行基本的读写与解析。\n\n在本题中，你需要完成的任务是依次遍历输入文件中时间乱序的流量片段，在对它们进行一些操作后，组装为 PCAP 格式写入输出。关于文件的读写方式，可以参照《学习手册》。\n\n需要进行的操作为：只保留长度**不大于** $1000$ 的片段（只考虑完整的以太网帧长度，不包括 PCAP 格式的片段头），并按照时间升序排序这些片段（即首先比较秒，而后比较微秒），保证没有两个片段的时间是相同的。需要注意，你的输出文件需要是一个合法的 PCAP 文件。为了测试文件格式的合法性，你可以使用 Wireshark 等工具打开你的输出文件进行检查。\n\n与手册中指示的不同的是，本题中，你应该直接完整复制每个流量片段的头，包括时间戳字段。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ |\n|:--:|:--:|:--:|\n| 1 | $=10^2$ | $=5\\times 10^4$ |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n用 Wireshark 打开样例输入文件，应该可以看到，界面上部记录了这个 PCAP 文件中记录的所有以太网帧，界面中部显示的是当前这个以太网帧的解析，下部则是它的十六进制数据。对于这个软件的详细使用方法，除了部分题目给出的提示外，不会提供更多帮助，请选手自行熟悉并摸索。\n\n样例输入文件记录了两个以太网帧，都是从 `10.2.254.100` 发往 `10.2.12.82` 地址的 ARP 请求，它们区别在于 ARP 请求后多余的数据长度不同。由于第一个帧的长度不大于 1000 ，第二个帧的长度大于 1000，按照题目意思，只有第一个帧需要输出，排序后输出到了样例输出文件中，你可以同样地用 Wireshark 打开样例输出文件来验证这一点。", "locale": "zh-CN"}}}
{"pid": "P10345", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 常见网络校验和计算", "background": "芃芃发现，华清大学的玉兰学生公寓的网络质量似乎不是很好。由于网络线材质量的原因，也可能是有同学在进行一些奇怪的尝试，他总是会收到一些不太正常的内容。好在，网络协议的设计者们都考虑到了这一点，在协议中添加了校验和来检查一些明显的问题。作为鲁棒的路由器软件，必须只接收校验和检查通过的流量，而丢弃那些坏的。听说你已经能读到流量的内容了，下一步就是揪出这些不正常的流量。", "description": "你需要根据《学习手册》中的相关知识，对给定的流量片段进行校验。请注意，由于所有片段类型**都是以太网帧**，所以你总是需要计算 `CRC32`；而对于承载了 IP 分组的流量，你还需要对 IP 分组头的检验和进行检查。作为简化，我们不考虑除了以太网和 IP 以外的校验字段。只有当所有的校验都通过时，才认为该流量片段是正确的。", "inputFormat": "输入保证格式合法，并且每个流量片段都是以太网帧。其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。部分子任务的数据中保证 IP 分组头的校验是正确的，即只需要计算以太网帧的 `CRC32`。", "outputFormat": "输出由 $n$ 行文本构成，依次对应每一个片段的校验结果。如果是正确的，输出 `Yes`，否则输出 `No`。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | 仅需检查以太网帧 |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n和 `pcap` 题一样，你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n样例输入文件应该包含四个以太网帧，其中第一个以太网帧中 FCS 和 IP 的校验都是错误的，第二个以太网帧是 FCS 校验正确的 ARP 帧，第三个以太网帧仅 FCS 校验错误，第四个以太网帧仅 IP 校验错误。在页面中部点开当前帧的解析可以看到更多细节，包括是哪个校验错误和正确值等等，这可能对你有一定的帮助。\n\nWireshark 默认情况下可能不会检查 FCS 的正确性。对于这种情况，你可以在页面中部找到并右键点击 `Ethernet II` 所在的一行，在弹出的菜单中选择 `Protocol Preferences`，勾上选项中的 `Validate the Ethernet checksum if possible` 和 `Assume packets have FCS`，此时你应该可以在页面上部看到 FCS 错误的帧都被明显地标记出来。\n\n需要注意的是，Wireshark 还会计算并显示 UDP 的 Checksum 正确与否。在本题中，我们不考虑 UDP 的 Checksum，因此你可以忽略这些错误。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 常见网络校验和计算", "background": "芃芃发现，华清大学的玉兰学生公寓的网络质量似乎不是很好。由于网络线材质量的原因，也可能是有同学在进行一些奇怪的尝试，他总是会收到一些不太正常的内容。好在，网络协议的设计者们都考虑到了这一点，在协议中添加了校验和来检查一些明显的问题。作为鲁棒的路由器软件，必须只接收校验和检查通过的流量，而丢弃那些坏的。听说你已经能读到流量的内容了，下一步就是揪出这些不正常的流量。", "description": "你需要根据《学习手册》中的相关知识，对给定的流量片段进行校验。请注意，由于所有片段类型**都是以太网帧**，所以你总是需要计算 `CRC32`；而对于承载了 IP 分组的流量，你还需要对 IP 分组头的检验和进行检查。作为简化，我们不考虑除了以太网和 IP 以外的校验字段。只有当所有的校验都通过时，才认为该流量片段是正确的。", "inputFormat": "输入保证格式合法，并且每个流量片段都是以太网帧。其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。部分子任务的数据中保证 IP 分组头的校验是正确的，即只需要计算以太网帧的 `CRC32`。", "outputFormat": "输出由 $n$ 行文本构成，依次对应每一个片段的校验结果。如果是正确的，输出 `Yes`，否则输出 `No`。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | 仅需检查以太网帧 |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n和 `pcap` 题一样，你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n样例输入文件应该包含四个以太网帧，其中第一个以太网帧中 FCS 和 IP 的校验都是错误的，第二个以太网帧是 FCS 校验正确的 ARP 帧，第三个以太网帧仅 FCS 校验错误，第四个以太网帧仅 IP 校验错误。在页面中部点开当前帧的解析可以看到更多细节，包括是哪个校验错误和正确值等等，这可能对你有一定的帮助。\n\nWireshark 默认情况下可能不会检查 FCS 的正确性。对于这种情况，你可以在页面中部找到并右键点击 `Ethernet II` 所在的一行，在弹出的菜单中选择 `Protocol Preferences`，勾上选项中的 `Validate the Ethernet checksum if possible` 和 `Assume packets have FCS`，此时你应该可以在页面上部看到 FCS 错误的帧都被明显地标记出来。\n\n需要注意的是，Wireshark 还会计算并显示 UDP 的 Checksum 正确与否。在本题中，我们不考虑 UDP 的 Checksum，因此你可以忽略这些错误。", "locale": "zh-CN"}}}
{"pid": "P10346", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 数据链路层协议数据处理", "background": "路由器软件需要处理的最底层是数据链路层，这上面运行着一系列复杂的协议，比如各种神秘的滑动窗口协议。虽然芃芃对它们始终摸不着头脑，但他知道这一层最重要的协议就属 ARP 了。它起到了跨上下两层的桥梁作用，只有通过 ARP 查询，路由器才能知道究竟应该把 IP 分组发给哪一个邻居。你的路由器软件需要热情地回应每一个询问，才能正确地收到接下来的流量。", "description": "你需要根据《学习手册》中的相关知识，处理数据链路层的协议数据：在给定的流量片段中，有一些是对你的 ARP 询问（也就是说，询问的 IP（TPA 字段）是你拥有的，请在 pcap 题面中找到你拥有的 IP 地址和与其对应的 MAC 地址），请你正确地回复它们。数据保证 FCS 校验正确的 ARP 请求中发送端的 MAC 地址（SHA 字段）与以太网帧中的发送端 MAC 地址一致。注意，ARP 请求中以太网帧的目标地址可能与你拥有的 MAC 地址不同（如 `FF:FF:FF:FF:FF:FF` 广播地址），这种情况下依然需要回应 ARP 请求。你需要构造正确的 ARP 协议数据，以及外层的以太网帧格式（包括头部和校验和，并注意以太网帧的长度要求），并将这些以太网帧帧按照应答顺序按照《学习手册》的要求依次写入 PCAP 格式的输出文件中。\n\n在**下列所有题目（包括本题）**中，如果某个流量片段发生校验错误，则应当直接丢弃，片段的数据可能会出现不符合《学习手册》中的叙述的情况，所以不能有任何假设，不进行任何处理。", "inputFormat": "输入保证格式合法，其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。你需要回复 $n_1$ 个流量片段。", "outputFormat": "其将与答案文件进行**逐字节**对比。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $n_1=n$ |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例解释 1】**\n\n由于提供样例会大幅降低本题难度，故不提供样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 数据链路层协议数据处理", "background": "路由器软件需要处理的最底层是数据链路层，这上面运行着一系列复杂的协议，比如各种神秘的滑动窗口协议。虽然芃芃对它们始终摸不着头脑，但他知道这一层最重要的协议就属 ARP 了。它起到了跨上下两层的桥梁作用，只有通过 ARP 查询，路由器才能知道究竟应该把 IP 分组发给哪一个邻居。你的路由器软件需要热情地回应每一个询问，才能正确地收到接下来的流量。", "description": "你需要根据《学习手册》中的相关知识，处理数据链路层的协议数据：在给定的流量片段中，有一些是对你的 ARP 询问（也就是说，询问的 IP（TPA 字段）是你拥有的，请在 pcap 题面中找到你拥有的 IP 地址和与其对应的 MAC 地址），请你正确地回复它们。数据保证 FCS 校验正确的 ARP 请求中发送端的 MAC 地址（SHA 字段）与以太网帧中的发送端 MAC 地址一致。注意，ARP 请求中以太网帧的目标地址可能与你拥有的 MAC 地址不同（如 `FF:FF:FF:FF:FF:FF` 广播地址），这种情况下依然需要回应 ARP 请求。你需要构造正确的 ARP 协议数据，以及外层的以太网帧格式（包括头部和校验和，并注意以太网帧的长度要求），并将这些以太网帧帧按照应答顺序按照《学习手册》的要求依次写入 PCAP 格式的输出文件中。\n\n在**下列所有题目（包括本题）**中，如果某个流量片段发生校验错误，则应当直接丢弃，片段的数据可能会出现不符合《学习手册》中的叙述的情况，所以不能有任何假设，不进行任何处理。", "inputFormat": "输入保证格式合法，其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。你需要回复 $n_1$ 个流量片段。", "outputFormat": "其将与答案文件进行**逐字节**对比。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $n_1=n$ |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例解释 1】**\n\n由于提供样例会大幅降低本题难度，故不提供样例。", "locale": "zh-CN"}}}
{"pid": "P10347", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 网络层协议数据处理", "background": "百度对程序员来说最大的作用当然是测试网络的联通性，在处理完 ARP 包以后，芃芃兴奋地输入了 `ping baidu.com`，然而并没有得到任何结果。咨询过杰哥以后，芃芃懂得了 ping 工具的工作原理，原来它使用了 ICMP 协议，工作在比数据链路层更高的网络层。他还发现，网络中也存在许多给他发送的 ping 报文，看来的确有很多人在关心他。为了不让他们失望，你决定帮芃芃回复这些请求。", "description": "你需要根据《学习手册》中的相关知识，处理网络层的协议数据：在给定的流量片段中，有一些是对你的 ICMP Echo Request 报文（也就是说，请求的 IP 和 MAC 地址都是是你拥有的，并为 `pcap` 题面中的对应关系），请你正确地回复它们。你需要构造正确的 ICMP Echo Reply 报文，以及外层的 IP 分组头、以太网帧头尾，并将这些帧按照应答顺序依次写入输出文件中。本题中只对**源地址与目的地址在同一个子网中的 `ICMP Echo Request` 报文**进行响应，而不响应其他情况（例如源地址与目的地址不在同一个网络中、ARP 请求）。\n\n我们保证，所有 `ICMP Echo Request` 报文在数据链路层和网络层都是单播发送的（也就是说不用考虑广播地址等情况，广播地址的定义见《学习手册》），请注意正确填写回复报文在这两层的源、目标地址。如果接收到的报文中含有数据负载，则你回复的报文中也需要**原样携带**这些负载，但不要携带链路层帧中超过 IP 包尺寸后的多余数据（请忽略 Wireshark 对这部分数据的解析）。特别地，本题对输出数据中片段的时间戳有额外的要求，设 `ICMP Echo Request` 的时间戳为 $(\\sec_0, \\text{us}_0)$，那么你回应的 `ICMP Echo Response` 的时间戳 $(\\sec, \\text{us})$ 应该满足 $\\sec \\times 10^6 + \\text{us} = \\sec_0 \\times 10^6 + \\text{us}_0 + 1$ 并且 $0 \\le \\text{us} < 10^6$，数据保证 $\\text{us}_0 < 10^6, \\sec < 2^{32}$，不保证上述加法不会溢出 32 位无符号整数。注意 Wireshark 界面上部显示的时间是相对于第一个以太网帧的时间戳的偏差。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n本题的各子任务规模与上一题相同。\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例中输入数据是三个 `ICMP Echo Request` ，输出数据是三个对应的 `ICMP Echo Reply`。\n\n**【提示】**\n\n请不要忘记前三题题面中与本题相关的内容，并注意 FCS 和 IP 校验和的计算和以太网帧的长度要求。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 网络层协议数据处理", "background": "百度对程序员来说最大的作用当然是测试网络的联通性，在处理完 ARP 包以后，芃芃兴奋地输入了 `ping baidu.com`，然而并没有得到任何结果。咨询过杰哥以后，芃芃懂得了 ping 工具的工作原理，原来它使用了 ICMP 协议，工作在比数据链路层更高的网络层。他还发现，网络中也存在许多给他发送的 ping 报文，看来的确有很多人在关心他。为了不让他们失望，你决定帮芃芃回复这些请求。", "description": "你需要根据《学习手册》中的相关知识，处理网络层的协议数据：在给定的流量片段中，有一些是对你的 ICMP Echo Request 报文（也就是说，请求的 IP 和 MAC 地址都是是你拥有的，并为 `pcap` 题面中的对应关系），请你正确地回复它们。你需要构造正确的 ICMP Echo Reply 报文，以及外层的 IP 分组头、以太网帧头尾，并将这些帧按照应答顺序依次写入输出文件中。本题中只对**源地址与目的地址在同一个子网中的 `ICMP Echo Request` 报文**进行响应，而不响应其他情况（例如源地址与目的地址不在同一个网络中、ARP 请求）。\n\n我们保证，所有 `ICMP Echo Request` 报文在数据链路层和网络层都是单播发送的（也就是说不用考虑广播地址等情况，广播地址的定义见《学习手册》），请注意正确填写回复报文在这两层的源、目标地址。如果接收到的报文中含有数据负载，则你回复的报文中也需要**原样携带**这些负载，但不要携带链路层帧中超过 IP 包尺寸后的多余数据（请忽略 Wireshark 对这部分数据的解析）。特别地，本题对输出数据中片段的时间戳有额外的要求，设 `ICMP Echo Request` 的时间戳为 $(\\sec_0, \\text{us}_0)$，那么你回应的 `ICMP Echo Response` 的时间戳 $(\\sec, \\text{us})$ 应该满足 $\\sec \\times 10^6 + \\text{us} = \\sec_0 \\times 10^6 + \\text{us}_0 + 1$ 并且 $0 \\le \\text{us} < 10^6$，数据保证 $\\text{us}_0 < 10^6, \\sec < 2^{32}$，不保证上述加法不会溢出 32 位无符号整数。注意 Wireshark 界面上部显示的时间是相对于第一个以太网帧的时间戳的偏差。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n本题的各子任务规模与上一题相同。\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例中输入数据是三个 `ICMP Echo Request` ，输出数据是三个对应的 `ICMP Echo Reply`。\n\n**【提示】**\n\n请不要忘记前三题题面中与本题相关的内容，并注意 FCS 和 IP 校验和的计算和以太网帧的长度要求。", "locale": "zh-CN"}}}
{"pid": "P10348", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] RIP 路由协议实现", "background": "支持了链路层和网络层的协议以后，路由器立刻了收到无数的数据包。虽然芃芃被大量的数据淹没，不过镇定的他还是记起来教材上写的话：网络设备能够处理的报文有两种，分别是控制报文和数据报文。对于路由器来说，数据报文就是需要转发的内容；而控制报文则是用来管理它的转发流向（路由表）的。为了和其他真实的路由器进行交互，你需要实现简单的路由协议 RIP；而在建立了转发表之后，需要开始进行“抛热土豆”，正确地将其他主机的流量送到对应的下一台路由器。", "description": "你需要根据《学习手册》中的相关知识，处理下列两类报文：\n\n一类是 RIP 路由协议的控制报文，它被封装在 UDP 协议数据报中。你将只会收到 `RIP Response` 报文，且目标 IP 地址是 `224.0.0.9`，目标 MAC 地址为 `01:00:5E:00:00:09`，用于指示路由表的更新，你需要根据源 IP 地址来判断它与你拥有的哪一个 IP 在同一个子网中，从而得知路由表中对应的出端口编号。对于收到的每一条路由信息，你需要根据给定的规则（见《学习手册》）恰当维护自身的路由表，记录对于可达的每一个网络前缀的下一跳信息（包括 IP 和 MAC）。对于控制报文，总是无需进行回复。\n\n另一类是数据报文，它将被封装在 IP 分组中，你需要对**目标 IP 地址非本机所拥有**的分组进行转发。如果路由表中能够查询到目标 IP 地址对应的下一跳，则你应当构造一个合法的 IP 分组，填写正确的源、目标信息，并更新相关字段（如 TTL、校验和）；如果无法查询到路由信息，则你应当构造一个正确的 `ICMP Destination Network Unreachable` 报文返回给源主机；如果分组的 TTL 减小到 0，则你应当构造一个正确的 `ICMP Time Exceeded` 报文返回给源主机，这两种错误信息都需要按照《学习手册》的要求填入相应的负载，从接收者 MAC 地址中推断出源地址 IP ，并且以太网帧中（接收者的 MAC 地址，发送者的 MAC 地址）为输入数据中对应数据报文的（发送者的 MAC 地址，接收者的 MAC 地址）；如果同时出现无法查询到路由信息并且 TTL 减到 0 的情况，应当构造一个 `ICMP Destination Network Unreachable`。无论何种情况，对于一个目标 IP 地址不属于本机的数据报文，你实现的路由器**总会产生**一个发出的以太网帧。\n\n由于转发报文需要填写下一跳的 MAC 地址，而我们不提供主动的 ARP 查询接口；在本小题中，你需要并仅从 RIP 报文的**以太网帧头**中获得相应目的路由器的 MAC 地址，以**转发前最后一次获得到的为准** 。\n\n我们保证，在此问题给出的正常流量片段（也就是通过了校验的片段）中，包含且只包含上述两类报文；并且对于所有需要转发的包，你都能通过上述方法从 RIP 报文中获得对应目的路由器的 MAC 地址。和上题类似，Wireshark 会显示 UDP 校验值错误，忽略即可。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。根据输入，你需要构造的路由表的项目不超过 $k$ 条，需要查询路由表进行转发的报文占总报文的数量约为 $p_{query}\\%$。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $k$ | $p_{query}$ |\n| :--: | :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=1.5\\times 10^5$ | $=10$ | $=50\\%$ |\n| 2 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=50\\%$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=95\\%$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=50\\%$ |\n| 5 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=95\\%$ |\n| 6 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 7 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 8 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 9 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 10 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例输入有十个以太网帧，包括八个 RIP 包和两个需要转发的 IP 包。\n\n对于前四个 RIP Response，可以得到如下的路由表：\n\n收到第一个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n224.0.0.0/3 via 10.2.7.2 if 7 metric 15\n```\n\n收到第二个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n```\n\n收到第三个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n收到第四个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n接着是两个 UDP 包，对于 `77.147.142.166` 这个地址，在路由表中没有对应的项，于是回应了 `ICMP Destination unreachable` 。对于 `107.28.70.129` 地址，它在 `104.0.0.0/6` 范围中，于是 TTL 减一并且转发到 `10.2.7.2` ，它的 MAC 地址可以从第一个 `RIP Response` 得到。\n\n收到第五个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第六个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第七个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n```\n\n收到第八个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n90.32.0.0/15 via 10.2.5.2 if 5 metric 8\n```\n\n**【提示】**\n\n由于每个数据报文的转发都需要查询路由表，因此需要用高效的数据结构存储路由表中的关键信息，同时也要注意空间的使用效率。关于算法的高效实现，你可以参考《学习手册》附带的相关论文和资料。\n\n在转发 IP 分组时，分组头内很少的字段会被修改。因此 IP 校验值也未必需要重新计算，很多情况下可以只进行最小限度的改动。但如果你想进行任何形式的简化，务必保证你的操作与我们叙述的操作是**完全等价**的。直观的想法往往会遗漏一些边界情况，请一定注意。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] RIP 路由协议实现", "background": "支持了链路层和网络层的协议以后，路由器立刻了收到无数的数据包。虽然芃芃被大量的数据淹没，不过镇定的他还是记起来教材上写的话：网络设备能够处理的报文有两种，分别是控制报文和数据报文。对于路由器来说，数据报文就是需要转发的内容；而控制报文则是用来管理它的转发流向（路由表）的。为了和其他真实的路由器进行交互，你需要实现简单的路由协议 RIP；而在建立了转发表之后，需要开始进行“抛热土豆”，正确地将其他主机的流量送到对应的下一台路由器。", "description": "你需要根据《学习手册》中的相关知识，处理下列两类报文：\n\n一类是 RIP 路由协议的控制报文，它被封装在 UDP 协议数据报中。你将只会收到 `RIP Response` 报文，且目标 IP 地址是 `224.0.0.9`，目标 MAC 地址为 `01:00:5E:00:00:09`，用于指示路由表的更新，你需要根据源 IP 地址来判断它与你拥有的哪一个 IP 在同一个子网中，从而得知路由表中对应的出端口编号。对于收到的每一条路由信息，你需要根据给定的规则（见《学习手册》）恰当维护自身的路由表，记录对于可达的每一个网络前缀的下一跳信息（包括 IP 和 MAC）。对于控制报文，总是无需进行回复。\n\n另一类是数据报文，它将被封装在 IP 分组中，你需要对**目标 IP 地址非本机所拥有**的分组进行转发。如果路由表中能够查询到目标 IP 地址对应的下一跳，则你应当构造一个合法的 IP 分组，填写正确的源、目标信息，并更新相关字段（如 TTL、校验和）；如果无法查询到路由信息，则你应当构造一个正确的 `ICMP Destination Network Unreachable` 报文返回给源主机；如果分组的 TTL 减小到 0，则你应当构造一个正确的 `ICMP Time Exceeded` 报文返回给源主机，这两种错误信息都需要按照《学习手册》的要求填入相应的负载，从接收者 MAC 地址中推断出源地址 IP ，并且以太网帧中（接收者的 MAC 地址，发送者的 MAC 地址）为输入数据中对应数据报文的（发送者的 MAC 地址，接收者的 MAC 地址）；如果同时出现无法查询到路由信息并且 TTL 减到 0 的情况，应当构造一个 `ICMP Destination Network Unreachable`。无论何种情况，对于一个目标 IP 地址不属于本机的数据报文，你实现的路由器**总会产生**一个发出的以太网帧。\n\n由于转发报文需要填写下一跳的 MAC 地址，而我们不提供主动的 ARP 查询接口；在本小题中，你需要并仅从 RIP 报文的**以太网帧头**中获得相应目的路由器的 MAC 地址，以**转发前最后一次获得到的为准** 。\n\n我们保证，在此问题给出的正常流量片段（也就是通过了校验的片段）中，包含且只包含上述两类报文；并且对于所有需要转发的包，你都能通过上述方法从 RIP 报文中获得对应目的路由器的 MAC 地址。和上题类似，Wireshark 会显示 UDP 校验值错误，忽略即可。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。根据输入，你需要构造的路由表的项目不超过 $k$ 条，需要查询路由表进行转发的报文占总报文的数量约为 $p_{query}\\%$。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $k$ | $p_{query}$ |\n| :--: | :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=1.5\\times 10^5$ | $=10$ | $=50\\%$ |\n| 2 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=50\\%$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=95\\%$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=50\\%$ |\n| 5 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=95\\%$ |\n| 6 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 7 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 8 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 9 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 10 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例输入有十个以太网帧，包括八个 RIP 包和两个需要转发的 IP 包。\n\n对于前四个 RIP Response，可以得到如下的路由表：\n\n收到第一个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n224.0.0.0/3 via 10.2.7.2 if 7 metric 15\n```\n\n收到第二个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n```\n\n收到第三个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n收到第四个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n接着是两个 UDP 包，对于 `77.147.142.166` 这个地址，在路由表中没有对应的项，于是回应了 `ICMP Destination unreachable` 。对于 `107.28.70.129` 地址，它在 `104.0.0.0/6` 范围中，于是 TTL 减一并且转发到 `10.2.7.2` ，它的 MAC 地址可以从第一个 `RIP Response` 得到。\n\n收到第五个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第六个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第七个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n```\n\n收到第八个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n90.32.0.0/15 via 10.2.5.2 if 5 metric 8\n```\n\n**【提示】**\n\n由于每个数据报文的转发都需要查询路由表，因此需要用高效的数据结构存储路由表中的关键信息，同时也要注意空间的使用效率。关于算法的高效实现，你可以参考《学习手册》附带的相关论文和资料。\n\n在转发 IP 分组时，分组头内很少的字段会被修改。因此 IP 校验值也未必需要重新计算，很多情况下可以只进行最小限度的改动。但如果你想进行任何形式的简化，务必保证你的操作与我们叙述的操作是**完全等价**的。直观的想法往往会遗漏一些边界情况，请一定注意。", "locale": "zh-CN"}}}
{"pid": "P10349", "type": "P", "difficulty": 3, "samples": [["6\nLPPLPL\n", "0 1 3 3 2 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Mrówki", "background": null, "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda próbna [Mrówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mro/)**\n\n数轴上有 $n$ 只蚂蚁，第 $i$ 只位于点 $x=i$。每只蚂蚁面向右（数轴的正方向）或者向左（数轴正方向的反方向）。蚂蚁小到我们可以认为他们是独立的点。\n\n信号发出后，所有蚂蚁开始以相同的单位速度朝它们面向的方向前进。如果两只蚂蚁相撞（位于同一点），它们就会弹开，也就是说，它们都会改变行进方向，继续前进。可以证明，经过一定时间后，不会再发生碰撞。你能编写一个程序，计算出每只蚂蚁会与其他蚂蚁碰撞多少次吗？", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 3\\times 10^5)$，表示蚂蚁的数量。\n\n第二行包含一个长为 $n$ 的字符串，字符串仅包含 `L` 和 `P`。其中第 $i$ 个字符表示蚂蚁 $i$ 面向的方向，如果为 `L`，则初始面向左，如果为 `P`，则初始面向右。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 只蚂蚁与其他蚂蚁的碰撞次数。", "hint": "第一只蚂蚁一开始面向左，不会与其他蚂蚁碰撞。最后一只蚂蚁会在 $x=5.5$ 处与第五只蚂蚁相撞，然后开始向右行进，并且再也不会停下来。第三只蚂蚁在 $x=3.5$ 处与第四只蚂蚁碰撞后，开始向左行走。第二只蚂蚁会在 $x=3$ 处碰撞，然后向左转，之后一直走下去。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Mrówki", "background": null, "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda próbna [Mrówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mro/)**\n\n数轴上有 $n$ 只蚂蚁，第 $i$ 只位于点 $x=i$。每只蚂蚁面向右（数轴的正方向）或者向左（数轴正方向的反方向）。蚂蚁小到我们可以认为他们是独立的点。\n\n信号发出后，所有蚂蚁开始以相同的单位速度朝它们面向的方向前进。如果两只蚂蚁相撞（位于同一点），它们就会弹开，也就是说，它们都会改变行进方向，继续前进。可以证明，经过一定时间后，不会再发生碰撞。你能编写一个程序，计算出每只蚂蚁会与其他蚂蚁碰撞多少次吗？", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 3\\times 10^5)$，表示蚂蚁的数量。\n\n第二行包含一个长为 $n$ 的字符串，字符串仅包含 `L` 和 `P`。其中第 $i$ 个字符表示蚂蚁 $i$ 面向的方向，如果为 `L`，则初始面向左，如果为 `P`，则初始面向右。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 只蚂蚁与其他蚂蚁的碰撞次数。", "hint": "第一只蚂蚁一开始面向左，不会与其他蚂蚁碰撞。最后一只蚂蚁会在 $x=5.5$ 处与第五只蚂蚁相撞，然后开始向右行进，并且再也不会停下来。第三只蚂蚁在 $x=3.5$ 处与第四只蚂蚁碰撞后，开始向左行走。第二只蚂蚁会在 $x=3$ 处碰撞，然后向左转，之后一直走下去。", "locale": "zh-CN"}}}
