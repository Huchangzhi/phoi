{"pid": "P2764", "type": "P", "difficulty": 6, "samples": [["11 12\n1 2\n1 3\n1 4\n2 5\n3 6\n4 7\n5 8\n6 9\n7 10\n8 11\n9 11\n10 11", "1 4 7 10 11\n2 5 8\n3 6 9\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["网络流", "Special Judge", "O2优化", "二分图", "上下界网络流", "网络流与线性规划 24 题"], "title": "最小路径覆盖问题", "background": "", "description": "给定有向图 $G=(V,E)$ 。设 $P$ 是 $G$ 的一个简单路（顶点不相交）的集合。如果 $V$ 中每个顶点恰好在 $P$ 的一条路上，则称 $P$ 是 $G$ 的一个路径覆盖。$P$ 中路径可以从 $V$ 的任何一个定点开始，长度也是任意的，特别地，可以为 $0$。$G$ 的最小路径覆盖是 $G$ 所含路径条数最少的路径覆盖。设计一个有效算法求一个 DAG（有向无环图）$G$ 的最小路径覆盖。\n", "inputFormat": "第一行有两个正整数 $n$ 和 $m$。$n$ 是给定 DAG（有向无环图）$G$ 的顶点数，$m$ 是 $G$ 的边数。接下来的 $m$ 行，每行有两个正整数 $i$ 和 $j$ 表示一条有向边 $(i,j)$。", "outputFormat": "从第一行开始，每行输出一条路径。文件的最后一行是最少路径数。\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 150$，$1\\leq m\\leq 6000$。\n\n由 @FlierKing 提供 SPJ", "locale": "zh-CN", "translations": {"en": {"title": "Minimum Path Cover Problem", "background": "", "description": "Given a directed graph $G=(V,E)$. Let $P$ be a set of simple paths (vertex-disjoint) in $G$. If every vertex in $V$ appears in exactly one path in $P$, then $P$ is a path cover of $G$. Paths in $P$ can start at any vertex in $V$, and their lengths are arbitrary; in particular, the length can be $0$. The minimum path cover of $G$ is a path cover with the fewest number of paths. Design an efficient algorithm to find a minimum path cover of a DAG (directed acyclic graph) $G$.", "inputFormat": "The first line contains two positive integers $n$ and $m$. Here $n$ is the number of vertices of the given DAG (directed acyclic graph) $G$, and $m$ is the number of edges of $G$. The next $m$ lines each contain two positive integers $i$ and $j$, representing a directed edge $(i, j)$.", "outputFormat": "Starting from the first line, output one path per line. The last line of the file is the minimum number of paths.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq n \\leq 150$, $1 \\leq m \\leq 6000$.\n\nSPJ provided by @FlierKing.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小路径覆盖问题", "background": "", "description": "给定有向图 $G=(V,E)$ 。设 $P$ 是 $G$ 的一个简单路（顶点不相交）的集合。如果 $V$ 中每个顶点恰好在 $P$ 的一条路上，则称 $P$ 是 $G$ 的一个路径覆盖。$P$ 中路径可以从 $V$ 的任何一个定点开始，长度也是任意的，特别地，可以为 $0$。$G$ 的最小路径覆盖是 $G$ 所含路径条数最少的路径覆盖。设计一个有效算法求一个 DAG（有向无环图）$G$ 的最小路径覆盖。\n", "inputFormat": "第一行有两个正整数 $n$ 和 $m$。$n$ 是给定 DAG（有向无环图）$G$ 的顶点数，$m$ 是 $G$ 的边数。接下来的 $m$ 行，每行有两个正整数 $i$ 和 $j$ 表示一条有向边 $(i,j)$。", "outputFormat": "从第一行开始，每行输出一条路径。文件的最后一行是最少路径数。\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 150$，$1\\leq m\\leq 6000$。\n\n由 @FlierKing 提供 SPJ", "locale": "zh-CN"}}}
{"pid": "P2765", "type": "P", "difficulty": 5, "samples": [["4", "11\n1 8\n2 7 9\n3 6 10\n4 5 11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "网络流", "Special Judge", "网络流与线性规划 24 题"], "title": "魔术球问题", "background": "", "description": "假设有 $n$ 根柱子，现要按下述规则在这 $n$ 根柱子中依次放入编号为 $1$，$2$，$3$，...的球“\n\n1. 每次只能在某根柱子的最上面放球。\n\n2. 同一根柱子中，任何 $2$ 个相邻球的编号之和为完全平方数。\n\n试设计一个算法，计算出在 $n$ 根柱子上最多能放多少个球。例如，在 $4$ 根柱子上最多可放 $11$ 个球。\n\n对于给定的 $n$，计算在 $n$ 根柱子上最多能放多少个球。\n", "inputFormat": "只有一行一个整数 $n$，代表柱子数。", "outputFormat": "**本题存在 Special Judge**。\n\n请将 $n$ 根柱子上最多能放的球数以及相应的放置方案输出。\n\n输出的第一行是球数。\n\n接下来的 $n$ 行，每行若干个整数，代表一根柱子上的球的编号，数字间用单个空格隔开。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 55$。", "locale": "zh-CN", "translations": {"en": {"title": "Magic Ball Problem", "background": "", "description": "Assume there are $n$ rods. We insert balls labeled $1$, $2$, $3$, ... into these $n$ rods in order, following the rules below:\n\n1. Each time, you can only place a ball on the top of some rod.\n2. On the same rod, the sum of the labels of any $2$ adjacent balls is a perfect square.\n\nDesign an algorithm to compute the maximum number of balls that can be placed on $n$ rods. For example, with $4$ rods, at most $11$ balls can be placed.\n\nGiven $n$, compute the maximum number of balls that can be placed on $n$ rods.", "inputFormat": "There is only one line containing an integer $n$, representing the number of rods.", "outputFormat": "**This problem has a Special Judge.**\n\nPlease output the maximum number of balls that can be placed on $n$ rods, along with a corresponding placement scheme.\n\nThe first line is the number of balls.\n\nThe next $n$ lines each contain several integers, representing the labels of the balls on one rod, separated by a single space.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 55$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔术球问题", "background": "", "description": "假设有 $n$ 根柱子，现要按下述规则在这 $n$ 根柱子中依次放入编号为 $1$，$2$，$3$，...的球“\n\n1. 每次只能在某根柱子的最上面放球。\n\n2. 同一根柱子中，任何 $2$ 个相邻球的编号之和为完全平方数。\n\n试设计一个算法，计算出在 $n$ 根柱子上最多能放多少个球。例如，在 $4$ 根柱子上最多可放 $11$ 个球。\n\n对于给定的 $n$，计算在 $n$ 根柱子上最多能放多少个球。\n", "inputFormat": "只有一行一个整数 $n$，代表柱子数。", "outputFormat": "**本题存在 Special Judge**。\n\n请将 $n$ 根柱子上最多能放的球数以及相应的放置方案输出。\n\n输出的第一行是球数。\n\n接下来的 $n$ 行，每行若干个整数，代表一根柱子上的球的编号，数字间用单个空格隔开。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 55$。", "locale": "zh-CN"}}}
{"pid": "P2766", "type": "P", "difficulty": 6, "samples": [["4\n3 6 2 5", "2\n2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "网络流", "O2优化", "网络流与线性规划 24 题"], "title": "最长不下降子序列问题", "background": "", "description": "给定正整数序列 $x_1 \\ldots, x_n$。\n\n1. 计算其最长不下降子序列的长度 $s$。\n2. 如果每个元素只允许使用一次，计算从给定的序列中最多可取出多少个长度为 $s$ 的不下降子序列。\n3. 如果允许在取出的序列中多次使用 $x_1$ 和 $x_n$（其他元素仍然只允许使用一次），则从给定序列中最多可取出多少个**不同的**长度为 $s$ 的不下降子序列。\n\n令 $a_1, a_2, \\ldots, a_s$ 为构造 $S$ 时所使用的下标，$b_1, b_2, \\ldots, b_s$ 为构造 $T$ 时所使用的下标。且 $\\forall i \\in [1,s-1]$，都有 $a_i \\lt a_{i+1}$，$b_i \\lt b_{i+1}$。则 $S$ 和 $T$ **不同**，当且仅当 $\\exists i \\in [1,s]$，使得 $a_i \\neq b_i$。", "inputFormat": "第一行有一个正整数 $n$，表示给定序列的长度。接下来的若干行有 $n$ 个正整数$x_1, ..., x_n$。\n", "outputFormat": "- 第 1 行是最长不下降子序列的长度 $s$。\n- 第 2 行是可取出的长度为 $s$ 的不下降子序列个数。\n- 第 3 行是允许在取出的序列中多次使用 $x_1$ 和 $x_n$ 时可取出的长度为 $s$ 的**不同的**不下降子序列个数。\n", "hint": "$1 \\le n\\le 500$", "locale": "zh-CN", "translations": {"en": {"title": "Longest Non-decreasing Subsequence Problem", "background": "", "description": "Given a sequence of positive integers $x_1 \\ldots, x_n$.\n\n1. Compute the length $s$ of its longest non-decreasing subsequence.\n2. If each element is allowed to be used at most once, compute the maximum number of non-decreasing subsequences of length $s$ that can be extracted from the given sequence.\n3. If, in the extracted subsequences, $x_1$ and $x_n$ are allowed to be used multiple times (all other elements are still allowed to be used at most once), compute the maximum number of **different** non-decreasing subsequences of length $s$ that can be extracted from the given sequence.\n\nLet $a_1, a_2, \\ldots, a_s$ be the indices used to construct $S$, and $b_1, b_2, \\ldots, b_s$ be the indices used to construct $T$. For all $i \\in [1,s-1]$, we have $a_i \\lt a_{i+1}$ and $b_i \\lt b_{i+1}$. Then $S$ and $T$ are **different** if and only if there exists $i \\in [1,s]$ such that $a_i \\neq b_i$.", "inputFormat": "The first line contains a positive integer $n$, which is the length of the given sequence. The following lines contain $n$ positive integers $x_1, ..., x_n$.", "outputFormat": "- The first line is the length $s$ of the longest non-decreasing subsequence.\n- The second line is the maximum number of non-decreasing subsequences of length $s$ that can be extracted.\n- The third line is the maximum number of **different** non-decreasing subsequences of length $s$ that can be extracted when $x_1$ and $x_n$ are allowed to be used multiple times in the extracted subsequences.", "hint": "Constraints: $1 \\le n \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最长不下降子序列问题", "background": "", "description": "给定正整数序列 $x_1 \\ldots, x_n$。\n\n1. 计算其最长不下降子序列的长度 $s$。\n2. 如果每个元素只允许使用一次，计算从给定的序列中最多可取出多少个长度为 $s$ 的不下降子序列。\n3. 如果允许在取出的序列中多次使用 $x_1$ 和 $x_n$（其他元素仍然只允许使用一次），则从给定序列中最多可取出多少个**不同的**长度为 $s$ 的不下降子序列。\n\n令 $a_1, a_2, \\ldots, a_s$ 为构造 $S$ 时所使用的下标，$b_1, b_2, \\ldots, b_s$ 为构造 $T$ 时所使用的下标。且 $\\forall i \\in [1,s-1]$，都有 $a_i \\lt a_{i+1}$，$b_i \\lt b_{i+1}$。则 $S$ 和 $T$ **不同**，当且仅当 $\\exists i \\in [1,s]$，使得 $a_i \\neq b_i$。", "inputFormat": "第一行有一个正整数 $n$，表示给定序列的长度。接下来的若干行有 $n$ 个正整数$x_1, ..., x_n$。\n", "outputFormat": "- 第 1 行是最长不下降子序列的长度 $s$。\n- 第 2 行是可取出的长度为 $s$ 的不下降子序列个数。\n- 第 3 行是允许在取出的序列中多次使用 $x_1$ 和 $x_n$ 时可取出的长度为 $s$ 的**不同的**不下降子序列个数。\n", "hint": "$1 \\le n\\le 500$", "locale": "zh-CN"}}}
{"pid": "P2767", "type": "P", "difficulty": 6, "samples": [["2 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "图论", "树形数据结构", "洛谷原创"], "title": "树的数量", "background": "", "description": "求出包含 $n$ 个节点（无标号）的有根 $m$ 叉树的个数，对 $10\\,007$ 取模。\n\n两个有根树相同，当且仅当其根节点相同，且**从左到右**每一棵子树也相同。特别地，两个有根树均为空树，视为两个有根树相同。", "inputFormat": "输入两个整数 $n$，$m$。\n", "outputFormat": "输出包含 $n$ 个节点（无标号）的有根 $m$ 叉树的个数，对 $10\\,007$ 取模后的值。", "hint": "$n,m \\leq 127$", "locale": "zh-CN", "translations": {"en": {"title": "Number of Trees", "background": "", "description": "Compute the number of rooted $m$-ary trees (unlabeled) with $n$ nodes, modulo $10\\,007$.\n\nTwo rooted trees are identical if and only if their roots are identical and, from left to right, each subtree is also identical. In particular, if both rooted trees are empty, they are considered identical.", "inputFormat": "Input two integers $n$, $m$.", "outputFormat": "Output the number of rooted $m$-ary trees (unlabeled) with $n$ nodes, modulo $10\\,007$.", "hint": "Constraints: $n, m \\leq 127$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "树的数量", "background": "", "description": "求出包含 $n$ 个节点（无标号）的有根 $m$ 叉树的个数，对 $10\\,007$ 取模。\n\n两个有根树相同，当且仅当其根节点相同，且**从左到右**每一棵子树也相同。特别地，两个有根树均为空树，视为两个有根树相同。", "inputFormat": "输入两个整数 $n$，$m$。\n", "outputFormat": "输出包含 $n$ 个节点（无标号）的有根 $m$ 叉树的个数，对 $10\\,007$ 取模后的值。", "hint": "$n,m \\leq 127$", "locale": "zh-CN"}}}
{"pid": "P2768", "type": "P", "difficulty": 5, "samples": [["2\n2 1\n3 2", "2\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "洛谷原创", "矩阵加速", "组合数学", "容斥原理", "洛谷月赛"], "title": "珍珠项链", "background": "小 L 通过泥萌的帮助，成功解决了牛栏的修建问题。奶牛们觉得主人非常厉害，于是再也不敢偷懒，母牛们奋力挤奶，生娃。子子孙孙无穷匮也！小 L 于是成为了一代富豪！\n\n但是一直困扰小 L 的就是单身问题！小 L 经过长久的寻觅，小 L 终于找到了一个心仪的漂亮妹子。于是，小 L 打算在 520 那天给妹子一个惊喜！（虽然小 L 很节约，但是对妹子还是很阔绰的！）\n", "description": "小 L 决定用 $K$ 种珍珠为妹子做一串举世无双的珍珠垂饰。珍珠垂饰是由珍珠连接而成的，其长度可以认为就是珍珠垂饰上珍珠的个数。小 L 现在腰缠万贯，每种珍珠他都拥有 $N$ 颗。根据将珍珠垂饰打开后珍珠不同的排列顺序可以区别不同种类的项链。现在，小 L 好奇自己可以组成多少种长度为 $1$ 至 $N$ 的不同的珍珠垂饰？当然，为显富有，每串珍珠垂饰都要必须由 $K$ 种珍珠连成。 答案取模 $1234567891$。\n\n这一定难不倒聪明的你吧！如果你能帮小 $L$ 解决这个问题，也许他会把最后的资产分给你 $\\frac{1}{4}$  哦！\n", "inputFormat": "输入包含多组数据。第一行是一个整数 $T$，表示测试数据的个数。每组数据占一行，包含两个整数 $N$ 和 $K$，用一个空格隔开。\n", "outputFormat": "每组数据输出仅一行，包含一个整数，表示项链的种类数。\n", "hint": "对于 $40\\%$ 的数据，满足 $1\\leq N\\leq 10^5$,  $0\\leq K\\leq 30$。\n\n对于 $100\\%$ 的数据，满足 $T \\leq 10$，$1\\leq N\\leq 10^9$，$0\\leq K\\leq 30$。\n\n对于 $70\\%\\sim100\\%$ 的数据，时限 $10$ ms。\n", "locale": "zh-CN", "translations": {"en": {"title": "Pearl Necklace", "background": "With everyone’s help, Xiao L successfully solved the cowshed construction problem. The cows think their owner is amazing, so they no longer dare to slack off. The cows work hard to produce milk and have calves. Generations continue endlessly! Xiao L has thus become a wealthy man!\n\nHowever, what still troubles Xiao L is being single! After a long search, he finally found a lovely girl he likes. So, he plans to give her a surprise on 520! (Although Xiao L is frugal, he is still generous to the girl!)", "description": "Xiao L decides to make a unique pearl necklace using $K$ kinds of pearls. A pearl necklace is a sequence of pearls, and its length is the number of pearls in the sequence. Now he is very rich and owns $N$ pearls of each kind. Two necklaces are considered different if, when laid out straight, their pearls are in different linear orders. Xiao L wonders how many different necklaces of lengths from $1$ to $N$ he can make. To show wealth, each necklace must use all $K$ kinds of pearls. Output the answer modulo $1234567891$.\n\nThis should be easy for you! If you can help Xiao L solve this problem, he might give you $1/4$ of his assets!", "inputFormat": "The input contains multiple testdata. The first line is an integer $T$, which is the number of testdata. Each testdata occupies one line and contains two integers $N$ and $K$, separated by a space.", "outputFormat": "For each testdata, output exactly one line containing one integer, which is the number of kinds of necklaces.", "hint": "- 40%: $1 \\le N \\le 100000$, $0 \\le K \\le 30$.\n- 100%: $T \\le 10$, $1 \\le N \\le 10^9$, $0 \\le K \\le 30$.\n- 70\\%–100\\%: time limit $10$ ms.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "珍珠项链", "background": "小 L 通过泥萌的帮助，成功解决了牛栏的修建问题。奶牛们觉得主人非常厉害，于是再也不敢偷懒，母牛们奋力挤奶，生娃。子子孙孙无穷匮也！小 L 于是成为了一代富豪！\n\n但是一直困扰小 L 的就是单身问题！小 L 经过长久的寻觅，小 L 终于找到了一个心仪的漂亮妹子。于是，小 L 打算在 520 那天给妹子一个惊喜！（虽然小 L 很节约，但是对妹子还是很阔绰的！）\n", "description": "小 L 决定用 $K$ 种珍珠为妹子做一串举世无双的珍珠垂饰。珍珠垂饰是由珍珠连接而成的，其长度可以认为就是珍珠垂饰上珍珠的个数。小 L 现在腰缠万贯，每种珍珠他都拥有 $N$ 颗。根据将珍珠垂饰打开后珍珠不同的排列顺序可以区别不同种类的项链。现在，小 L 好奇自己可以组成多少种长度为 $1$ 至 $N$ 的不同的珍珠垂饰？当然，为显富有，每串珍珠垂饰都要必须由 $K$ 种珍珠连成。 答案取模 $1234567891$。\n\n这一定难不倒聪明的你吧！如果你能帮小 $L$ 解决这个问题，也许他会把最后的资产分给你 $\\frac{1}{4}$  哦！\n", "inputFormat": "输入包含多组数据。第一行是一个整数 $T$，表示测试数据的个数。每组数据占一行，包含两个整数 $N$ 和 $K$，用一个空格隔开。\n", "outputFormat": "每组数据输出仅一行，包含一个整数，表示项链的种类数。\n", "hint": "对于 $40\\%$ 的数据，满足 $1\\leq N\\leq 10^5$,  $0\\leq K\\leq 30$。\n\n对于 $100\\%$ 的数据，满足 $T \\leq 10$，$1\\leq N\\leq 10^9$，$0\\leq K\\leq 30$。\n\n对于 $70\\%\\sim100\\%$ 的数据，时限 $10$ ms。\n", "locale": "zh-CN"}}}
{"pid": "P2769", "type": "P", "difficulty": 4, "samples": [["3\n1 4 5\n2\n3 8\n", "6\n"], ["3\n3 1 10\n2\n8 3\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "猴子上树", "background": "", "description": "在猴村有一条笔直的山路，这条山路很窄，宽度忽略不计。有 $n$ 只猴子正站在山路上静静地观望今天来参加比赛的各位同学。用一个正整数 $X_i$ 表示第 $i$ 只猴子所站位置，任意两只猴子的所站位置互不相同。在这条山路的 $m$ 个位置上种着一些高大的树木，正整数 $Y_j$ 表示第 $j$ 棵树木所在的位置，任意两棵树的位置互不相同。\n\n正当猴子们聚精会神的欣赏各位高超编程技能 聚精会神的欣赏各位高超编程技能时，一只老虎大摇摆的走了过来。猴子们吓得直冒冷汗，第一反应就是找棵大树爬上去这样能避免被老虎咬死或者吃掉（不考虑老虎上树问题）。\n\n在位置 $a$ 的猴子跑到在位置 $b$ 的大树上，需要消耗能量为 $|a-b|$（即 $a-b$ 的绝对值）。为了尽可能有效利用这些大树避难，每棵上至少要一只猴子。\n请编程计算 $n$ 只猴子全部上树最少需要消耗多少能量？\n", "inputFormat": "输入共 4 行。\n\n第 1 行一个整数 $n$，表示猴子的数量。\n\n第 2 行 $n$ 个整数，第 $i$ 个整数 $X_i$ 表示第 $i$ 只猴子所在的位置。\n\n第 3 行一个整数 $m$，表示大树的数量。\n\n第 4 行 $m$ 个整数，第 $j$ 个整数表示第 $j$ 棵大树所在的位置。\n", "outputFormat": "输出一行，一个整数表示 $n$ 只猴子全部上树最少需要消耗的能量。\n", "hint": "$30%$ 的数据，$1\\le n \\le 500$，$1≤X_i,Y_i≤10^5$。\n\n$100%$ 的数据，$1≤n≤5000$，$1≤m≤n$，$1≤Xi,Yi≤10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Monkeys Climb Trees", "background": "", "description": "In Monkey Village, there is a straight mountain path that is very narrow, and its width can be ignored. There are $n$ monkeys standing on the path watching the students who came to compete today. Let a positive integer $X_i$ denote the position of the $i$-th monkey; no two monkeys stand at the same position. There are $m$ tall trees planted at positions along this path. Let a positive integer $Y_j$ denote the position of the $j$-th tree; no two trees occupy the same position.\n\nWhile the monkeys were intently admiring everyone's excellent programming skills, a tiger swaggered over. The monkeys broke into a cold sweat. Their first reaction was to find a tall tree to climb, which would help them avoid being bitten or eaten by the tiger (do not consider the tiger climbing trees).\n\nIf the monkey at position $a$ runs to the tree at position $b$, the energy cost is $|a - b|$. To make the most effective use of these trees for shelter, each tree must have at least one monkey. Please compute the minimum total energy required for all $n$ monkeys to climb onto trees.", "inputFormat": "The input consists of 4 lines.\n\n- Line 1: an integer $n$, the number of monkeys.\n- Line 2: $n$ integers; the $i$-th integer $X_i$ is the position of the $i$-th monkey.\n- Line 3: an integer $m$, the number of trees.\n- Line 4: $m$ integers; the $j$-th integer is the position $Y_j$ of the $j$-th tree.", "outputFormat": "Output one line with a single integer: the minimum total energy required for all $n$ monkeys to climb onto trees.", "hint": "For $30\\%$ of the testdata, $1 \\le n \\le 500$, $1 \\le X_i, Y_i \\le 10^5$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 5000$, $1 \\le m \\le n$, $1 \\le X_i, Y_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猴子上树", "background": "", "description": "在猴村有一条笔直的山路，这条山路很窄，宽度忽略不计。有 $n$ 只猴子正站在山路上静静地观望今天来参加比赛的各位同学。用一个正整数 $X_i$ 表示第 $i$ 只猴子所站位置，任意两只猴子的所站位置互不相同。在这条山路的 $m$ 个位置上种着一些高大的树木，正整数 $Y_j$ 表示第 $j$ 棵树木所在的位置，任意两棵树的位置互不相同。\n\n正当猴子们聚精会神的欣赏各位高超编程技能 聚精会神的欣赏各位高超编程技能时，一只老虎大摇摆的走了过来。猴子们吓得直冒冷汗，第一反应就是找棵大树爬上去这样能避免被老虎咬死或者吃掉（不考虑老虎上树问题）。\n\n在位置 $a$ 的猴子跑到在位置 $b$ 的大树上，需要消耗能量为 $|a-b|$（即 $a-b$ 的绝对值）。为了尽可能有效利用这些大树避难，每棵上至少要一只猴子。\n请编程计算 $n$ 只猴子全部上树最少需要消耗多少能量？\n", "inputFormat": "输入共 4 行。\n\n第 1 行一个整数 $n$，表示猴子的数量。\n\n第 2 行 $n$ 个整数，第 $i$ 个整数 $X_i$ 表示第 $i$ 只猴子所在的位置。\n\n第 3 行一个整数 $m$，表示大树的数量。\n\n第 4 行 $m$ 个整数，第 $j$ 个整数表示第 $j$ 棵大树所在的位置。\n", "outputFormat": "输出一行，一个整数表示 $n$ 只猴子全部上树最少需要消耗的能量。\n", "hint": "$30%$ 的数据，$1\\le n \\le 500$，$1≤X_i,Y_i≤10^5$。\n\n$100%$ 的数据，$1≤n≤5000$，$1≤m≤n$，$1≤Xi,Yi≤10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2770", "type": "P", "difficulty": 6, "samples": [["8 9\nVancouver\nYellowknife\nEdmonton\nCalgary\nWinnipeg\nToronto\nMontreal\nHalifax\nVancouver Edmonton\nVancouver Calgary\nCalgary Winnipeg\nWinnipeg Toronto\nToronto Halifax\nMontreal Halifax\nEdmonton Montreal\nEdmonton Yellowknife\nEdmonton Calgary", "7\nVancouver\nEdmonton\nMontreal\nHalifax\nToronto\nWinnipeg\nCalgary\nVancouver "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["网络流", "Special Judge", "O2优化", "网络流与线性规划 24 题"], "title": "航空路线问题", "background": "", "description": "给定一张航空图，图中顶点代表城市，边代表两城市间的直通航线，并且不存在任何两个城市在同一条经线上。现要求找出一条满足下述限制条件的且途经城市最多的旅行路线。\n\n1. 从最西端城市出发，单向从西向东途经若干城市到达最东端城市，然后再单向从东向西飞回起点（可途经若干城市）。\n\n2. 除起点城市外，任何城市只能访问一次。\n\n对于给定的航空图，试设计一个算法找出一条满足要求的最佳航空旅行路线。", "inputFormat": "输入的第一行是用空格隔开的两个整数，分别代表航空图的点数 $n$ 和边数 $v$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个字符串，第 $(i + 1)$ 行的字符串代表从西向东第 $i$ 座城市的名字 $s_i$。\n\n第 $(n + 2)$ 到第 $(n + v + 1)$ 行，每行两个字符串 $x, y$，代表城市 $x$ 和城市 $y$ 之间存在一条直通航线。", "outputFormat": "**本题存在 Special Judge**。\n\n请首先判断是否存在满足要求的路线，若存在，请给出一种旅行的方案。\n\n如果存在路线，输出格式为：\n\n- 请在第一行输出一个整数 $m$，代表途径最多的城市数。\n- 在第 $2$ 到第 $(m + 2)$ 行，每行一个字符串，第 $(i + 1)$ 行的字符串代表旅行路线第 $i$ 个经过的城市的名字。请注意第 $1$ 和第 $m$ 个城市必然是出发城市名。\n\n否则请输出一行一个字符串 ``No Solution!``。", "hint": "**数据规模与约定**\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n < 100$，$1 \\leq v \\leq \\frac{n \\times (n - 1)}{2}$，$s_i$ 的长度不超过 $15$，且仅可能包含大小写字母与数字，$x, y$ 一定是输入中给出的城市名，且不会有同一组 $x, y$ 被给出两次。\n", "locale": "zh-CN", "translations": {"en": {"title": "Air Route Problem", "background": "", "description": "Given an airline map in which vertices represent cities and edges represent direct routes between two cities, and no two cities lie on the same meridian. Find a travel route that satisfies the following constraints and visits the maximum number of cities.\n\n1. Start from the westernmost city, fly strictly from west to east through several cities to the easternmost city, then fly strictly from east to west back to the starting city (possibly via several cities).\n\n2. Except for the starting city, any city may be visited at most once.\n\nFor the given airline map, design an algorithm to find an optimal airline travel itinerary that meets the requirements.", "inputFormat": "The first line contains two integers separated by a space, the number of vertices $n$ and the number of edges $v$.\n\nLines $2$ to $n + 1$: each line contains a string. The $(i + 1)$-th line gives the name $s_i$ of the $i$-th city from west to east.\n\nLines $n + 2$ to $n + v + 1$: each line contains two strings $x, y$, indicating that there is a direct route between city $x$ and city $y$.", "outputFormat": "This problem uses Special Judge.\n\nFirst determine whether there exists a route that meets the requirements. If it exists, output one valid itinerary.\n\nIf a route exists, output:\n- On the first line, output an integer $m$, the maximum number of cities visited.\n- Then output $m$ lines, one string per line. The $i$-th line contains the name of the $i$-th city in the itinerary. Note that the $1$-st and the $m$-th cities are necessarily the starting city.\n\nOtherwise, output a single line containing the string ``No Solution!``.", "hint": "Constraints and Notes\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq n < 100$, $1 \\leq v \\leq \\frac{n \\times (n - 1)}{2}$, the length of $s_i$ does not exceed $15$ and contains only letters and digits, $x, y$ are city names given in the input, and no pair $x, y$ appears more than once.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "航空路线问题", "background": "", "description": "给定一张航空图，图中顶点代表城市，边代表两城市间的直通航线，并且不存在任何两个城市在同一条经线上。现要求找出一条满足下述限制条件的且途经城市最多的旅行路线。\n\n1. 从最西端城市出发，单向从西向东途经若干城市到达最东端城市，然后再单向从东向西飞回起点（可途经若干城市）。\n\n2. 除起点城市外，任何城市只能访问一次。\n\n对于给定的航空图，试设计一个算法找出一条满足要求的最佳航空旅行路线。", "inputFormat": "输入的第一行是用空格隔开的两个整数，分别代表航空图的点数 $n$ 和边数 $v$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个字符串，第 $(i + 1)$ 行的字符串代表从西向东第 $i$ 座城市的名字 $s_i$。\n\n第 $(n + 2)$ 到第 $(n + v + 1)$ 行，每行两个字符串 $x, y$，代表城市 $x$ 和城市 $y$ 之间存在一条直通航线。", "outputFormat": "**本题存在 Special Judge**。\n\n请首先判断是否存在满足要求的路线，若存在，请给出一种旅行的方案。\n\n如果存在路线，输出格式为：\n\n- 请在第一行输出一个整数 $m$，代表途径最多的城市数。\n- 在第 $2$ 到第 $(m + 2)$ 行，每行一个字符串，第 $(i + 1)$ 行的字符串代表旅行路线第 $i$ 个经过的城市的名字。请注意第 $1$ 和第 $m$ 个城市必然是出发城市名。\n\n否则请输出一行一个字符串 ``No Solution!``。", "hint": "**数据规模与约定**\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n < 100$，$1 \\leq v \\leq \\frac{n \\times (n - 1)}{2}$，$s_i$ 的长度不超过 $15$，且仅可能包含大小写字母与数字，$x, y$ 一定是输入中给出的城市名，且不会有同一组 $x, y$ 被给出两次。\n", "locale": "zh-CN"}}}
{"pid": "P2771", "type": "P", "difficulty": 3, "samples": [["14\nNNNESWWWSSEEEE", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "搜索", "2016", "USACO"], "title": "[USACO16JAN] Build Gates S", "background": "", "description": "FarmerJohn 打算在他农场的一部分，建设一个围栏。但是因为没有认真做事，建造完成后，围栏变成一个很奇怪的形状。\n\n具体来说，FJ 从 $(0,0)$ 出发，走了 $N$ 步，每步移动一单位（向东、向南、向西或向北）。\n\n他走过的每一步，都会留下一段单位长度的围栏。例如，如果他的第一步向北，他建造一单位从 $(0,0)$ 到 $(0,1)$ 的围栏。\n\nFJ 可能重复到达点多次，他也可能重复建造一段围栏多次。如果他的路径穿过一段已经建成的围栏，他的围栏也有可能会有交叉。\n\n不用说，FJ 看到完成的围栏时，一定很沮丧。特别的，他发现一些区域被围栏封闭起来，从而无法到达。FJ 想在围栏上，安装一些门来解决这个问题。\n\n门可以安装在任意一段单位长度（注：必须是之前走过的某一步）的围栏上，从而可以穿越这段围栏的两侧。\n\n请计算 FJ 最少需要安装多少个门，才能保证农场上任意区域到任意区域都可到达。", "inputFormat": "第一行一个整数 $N$。\n\n第二行包含一个长度为 $N$ 的字符串，描述 FJ 的路径。每个字符为 $\\tt N$（北），$\\tt E$（东），$\\tt S$（南），或 $\\tt W$（西）。", "outputFormat": "输出一个整数，表示为了保证农场所有区域的连通性，FJ 最少需要安装多少个门。", "hint": "注意，如果农场初始连通，答案就是 $0$。\n\n### 数据范围\n\n$1\\le n\\le 1000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO16JAN] Build Gates S", "background": "", "description": "Farmer John (FJ) plans to build a fence on part of his farm. Because he did not work carefully, after construction the fence ends up with a very strange shape.\n\nSpecifically, FJ starts at $(0, 0)$ and walks $N$ steps, each moving one unit (to the east, south, west, or north).\n\nFor each step he takes, he leaves behind a unit-length segment of fence. For example, if his first step is north, he builds a unit of fence from $(0, 0)$ to $(0, 1)$.\n\nFJ may visit the same point multiple times, and he may also build the same fence segment multiple times. If his path crosses a segment that has already been built, the fence may have intersections.\n\nNeedless to say, FJ is dismayed when he sees the finished fence. In particular, he finds that some regions are enclosed by the fence and therefore cannot be reached. FJ wants to install some gates on the fence to fix this problem.\n\nA gate can be installed on any unit-length fence segment (note: it must be one of the steps he previously took), allowing passage through that segment from one side of the fence to the other.\n\nCompute the minimum number of gates FJ needs to install to guarantee that any region on the farm is reachable from any other region.", "inputFormat": "The first line contains an integer $N$.\n\nThe second line contains a string of length $N$ describing FJ’s path. Each character is $\\tt N$ (north), $\\tt E$ (east), $\\tt S$ (south), or $\\tt W$ (west).", "outputFormat": "Output a single integer, the minimum number of gates needed to ensure that all regions of the farm are connected.", "hint": "Note that if the farm is initially connected, the answer is $0$.\nConstraints\n$1\\le n\\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Build Gates S", "background": "", "description": "FarmerJohn 打算在他农场的一部分，建设一个围栏。但是因为没有认真做事，建造完成后，围栏变成一个很奇怪的形状。\n\n具体来说，FJ 从 $(0,0)$ 出发，走了 $N$ 步，每步移动一单位（向东、向南、向西或向北）。\n\n他走过的每一步，都会留下一段单位长度的围栏。例如，如果他的第一步向北，他建造一单位从 $(0,0)$ 到 $(0,1)$ 的围栏。\n\nFJ 可能重复到达点多次，他也可能重复建造一段围栏多次。如果他的路径穿过一段已经建成的围栏，他的围栏也有可能会有交叉。\n\n不用说，FJ 看到完成的围栏时，一定很沮丧。特别的，他发现一些区域被围栏封闭起来，从而无法到达。FJ 想在围栏上，安装一些门来解决这个问题。\n\n门可以安装在任意一段单位长度（注：必须是之前走过的某一步）的围栏上，从而可以穿越这段围栏的两侧。\n\n请计算 FJ 最少需要安装多少个门，才能保证农场上任意区域到任意区域都可到达。", "inputFormat": "第一行一个整数 $N$。\n\n第二行包含一个长度为 $N$ 的字符串，描述 FJ 的路径。每个字符为 $\\tt N$（北），$\\tt E$（东），$\\tt S$（南），或 $\\tt W$（西）。", "outputFormat": "输出一个整数，表示为了保证农场所有区域的连通性，FJ 最少需要安装多少个门。", "hint": "注意，如果农场初始连通，答案就是 $0$。\n\n### 数据范围\n\n$1\\le n\\le 1000$。\n", "locale": "zh-CN"}}}
{"pid": "P2772", "type": "P", "difficulty": 3, "samples": [["5 \n1 2 2 2 3 1 2 3 1 4", "(1,4),(2,3),(3,1)"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心"], "title": "寻找平面上的极大点", "background": null, "description": "在一个平面上，如果有两个点 $(x,y),(a,b)$，如果说 $(x,y)$ 支配了 $(a,b)$，这是指 $x\\ge a,y\\ge b$。\n\n用图形来看就是 $(a,b)$ 坐落在以 $(x,y)$ 为右上角的一个无限的区域内。\n\n给定 $n$ 个点的集合，一定存在若干个点，它们不会被集合中的任何一点所支配，这些点叫做极大值点。\n\n编程找出所有的极大点，按照 $x$ 坐标由小到大，输出极大点的坐标。", "inputFormat": "输入包括两行，第一行是正整数 $n$ ，表示是点数，第二行包含 $n$ 个点的坐标，坐标值都是整数，输入数据中不存在坐标相同的点。", "outputFormat": "按 $x$ 轴坐标最小到大的顺序输出所有极大点。\n\n输出格式为:$(x1,y1),(x2,y2),\\cdots,(xk,yk)$\n\n注意：输出的每个点之间有 `,` 分隔，最后一个点之后没有 `,`，少输出和多输出都会被判错。", "hint": "对于 $50\\%$ 的数据：$1\\le n\\le100$；$0\\le x,y\\le10^5$；\n\n对于 $100\\%$ 的数据：$1\\le n\\le5\\times10^5$；$0\\le x,y\\le10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Finding Maximal Points on the Plane", "background": "", "description": "On a plane, for two points $(x,y)$ and $(a,b)$, we say that $(x,y)$ dominates $(a,b)$ if $x\\ge a$ and $y\\ge b$.\n\nGeometrically, this means that $(a,b)$ lies in the unbounded region whose upper-right corner is $(x,y)$.\n\nGiven a set of $n$ points, there exist some points that are not dominated by any other point in the set; these points are called maximal points.\n\nWrite a program to find all maximal points and output their coordinates in increasing order of the $x$-coordinate.", "inputFormat": "The input consists of two lines. The first line is a positive integer $n$, the number of points. The second line contains $n$ points’ coordinates. All coordinates are integers. No two points in the input share the same coordinates.", "outputFormat": "Output all maximal points in increasing order of the $x$-coordinate.\n\nThe output format is: $(x1,y1),(x2,y2),\\cdots,(xk,yk)$.\n\nNote: Each point is separated by `,`, and there is no `,` after the last point. Missing or extra output will be judged incorrect.", "hint": "For $50\\%$ of the testdata: $1\\le n\\le 100$; $0\\le x,y\\le 10^5$.\n\nFor $100\\%$ of the testdata: $1\\le n\\le 5\\times 10^5$; $0\\le x,y\\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "寻找平面上的极大点", "background": null, "description": "在一个平面上，如果有两个点 $(x,y),(a,b)$，如果说 $(x,y)$ 支配了 $(a,b)$，这是指 $x\\ge a,y\\ge b$。\n\n用图形来看就是 $(a,b)$ 坐落在以 $(x,y)$ 为右上角的一个无限的区域内。\n\n给定 $n$ 个点的集合，一定存在若干个点，它们不会被集合中的任何一点所支配，这些点叫做极大值点。\n\n编程找出所有的极大点，按照 $x$ 坐标由小到大，输出极大点的坐标。", "inputFormat": "输入包括两行，第一行是正整数 $n$ ，表示是点数，第二行包含 $n$ 个点的坐标，坐标值都是整数，输入数据中不存在坐标相同的点。", "outputFormat": "按 $x$ 轴坐标最小到大的顺序输出所有极大点。\n\n输出格式为:$(x1,y1),(x2,y2),\\cdots,(xk,yk)$\n\n注意：输出的每个点之间有 `,` 分隔，最后一个点之后没有 `,`，少输出和多输出都会被判错。", "hint": "对于 $50\\%$ 的数据：$1\\le n\\le100$；$0\\le x,y\\le10^5$；\n\n对于 $100\\%$ 的数据：$1\\le n\\le5\\times10^5$；$0\\le x,y\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P2773", "type": "P", "difficulty": 3, "samples": [["10 10 0 0\n3 5 1 1", "0\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "漂亮字串", "background": "", "description": "Caima认为O和X是最优美的两个字母，由O、X组成的串是最优美的串。在这些最优美的串中，如果任意只包含X的字串，长度不超过maxX，任意只包含O的子串，长度不超过maxO，且整个串最多有countO个O，countX个X。那么这个就是超级优美无敌串。现在Caima想知道最长的超级优美无敌串有多长，希望你告诉他。\n", "inputFormat": "输入包含多行，至文件结束为止；\n\n每行四个数，依次是CountO、CountX、maxO、maxX.\n\nCountO、CountX、maxO、maxX均大于等于0小于等于1000000\n", "outputFormat": "每组数据输出一行，一个数表示最长的超级优美无敌串的长度\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Beautiful String", "background": "", "description": "Caima believes that O and X are the two most beautiful letters, and a string composed of O and X is the most beautiful string. Among these strings, if any substring that consists only of X has length at most maxX, any substring that consists only of O has length at most maxO, and the entire string contains at most countO letters O and at most countX letters X, then it is a \"super beautiful unbeatable\" string. Now Caima wants to know the length of the longest such string. Please tell him.", "inputFormat": "The input contains multiple lines, until EOF.  \nEach line has four numbers, in order: countO, countX, maxO, maxX.  \nAll of countO, countX, maxO, maxX are integers in the range [0, 1000000].", "outputFormat": "For each dataset, output one line with a single number, which is the length of the longest \"super beautiful unbeatable\" string.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "漂亮字串", "background": "", "description": "Caima认为O和X是最优美的两个字母，由O、X组成的串是最优美的串。在这些最优美的串中，如果任意只包含X的字串，长度不超过maxX，任意只包含O的子串，长度不超过maxO，且整个串最多有countO个O，countX个X。那么这个就是超级优美无敌串。现在Caima想知道最长的超级优美无敌串有多长，希望你告诉他。\n", "inputFormat": "输入包含多行，至文件结束为止；\n\n每行四个数，依次是CountO、CountX、maxO、maxX.\n\nCountO、CountX、maxO、maxX均大于等于0小于等于1000000\n", "outputFormat": "每组数据输出一行，一个数表示最长的超级优美无敌串的长度\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2774", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 3\n3 2 3\n2 3 1 ", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["网络流", "O2优化", "深度优先搜索 DFS", "最小割", "网络流与线性规划 24 题"], "title": "方格取数问题", "background": "", "description": "有一个 $m$ 行 $n$ 列的方格图，每个方格中都有一个正整数。现要从方格中取数，使任意两个数所在方格没有公共边，且取出的数的总和最大，请求出最大的和。\n", "inputFormat": "第一行是两个用空格隔开的整数，分别代表方格图的行数 $m$ 和列数 $n$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行 $n$ 个整数，第 $(i + 1)$ 行的第 $j$ 个整数代表方格图第 $i$ 行第 $j$ 列的的方格中的数字 $a_{i, j}$。", "outputFormat": "输出一行一个整数，代表和最大是多少。", "hint": "**数据规模与约定**\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 100$，$1 \\leq a_{i, j} \\leq 10^5$。\n\n**提示**\n\n请注意输入的第一行先读入 $m$ 再读入 $n$。", "locale": "zh-CN", "translations": {"en": {"title": "Grid Number Picking Problem", "background": "", "description": "There is an $m$-row $n$-column grid, with a positive integer in each cell. You need to pick numbers from the grid so that no two chosen cells share a common edge, and the total sum of the chosen numbers is maximized. Please compute the maximum possible sum.", "inputFormat": "The first line contains two integers separated by a space, representing the number of rows $m$ and the number of columns $n$.\n\nFrom line $2$ to line $(m + 1)$, each line contains $n$ integers. The $j$-th integer on line $(i + 1)$ represents the number in the cell at row $i$, column $j$, namely $a_{i, j}$.", "outputFormat": "Output a single integer on one line, representing the maximum sum.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq n, m \\leq 100$, $1 \\leq a_{i, j} \\leq 10^5$.\n\nTip\n\nPlease note that in the first line, $m$ is read before $n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方格取数问题", "background": "", "description": "有一个 $m$ 行 $n$ 列的方格图，每个方格中都有一个正整数。现要从方格中取数，使任意两个数所在方格没有公共边，且取出的数的总和最大，请求出最大的和。\n", "inputFormat": "第一行是两个用空格隔开的整数，分别代表方格图的行数 $m$ 和列数 $n$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行 $n$ 个整数，第 $(i + 1)$ 行的第 $j$ 个整数代表方格图第 $i$ 行第 $j$ 列的的方格中的数字 $a_{i, j}$。", "outputFormat": "输出一行一个整数，代表和最大是多少。", "hint": "**数据规模与约定**\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 100$，$1 \\leq a_{i, j} \\leq 10^5$。\n\n**提示**\n\n请注意输入的第一行先读入 $m$ 再读入 $n$。", "locale": "zh-CN"}}}
{"pid": "P2775", "type": "P", "difficulty": 0, "samples": [["5 0 3\n1 1 2\n1 1 2\n1 3 0 1 3\n0 2 2 4\n1 1 3 ", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["O2优化", "启发式迭代加深搜索 IDA*", "网络流与线性规划 24 题"], "title": "机器人路径规划问题（疑似错题）", "background": "**通过套取数据而直接“打表”过题者，是作弊行为，发现即棕名。**\n\n本题**不保证**存在**可以通过满足本题数据范围的任意数据**做法。由于测试数据过水，可以通过此题的程序不一定完全正确（算法时间复杂度错误、或不保证正确性）。本题题目和数据仅供参考。本题不接受添加 hack 数据。\n\n本题为错题。**不建议尝试或提交本题。**[关于此类题目的详细内容](https://www.luogu.com.cn/paste/pf94n89x)", "description": "机器人 Rob 可在一个树状路径上自由移动。给定树状路径 $T$ 上的起点 $s$ 和终点 $t$，机器人 Rob 要从 $s$ 运动到 $t$。树状路径 $T$ 上有若干可移动的障碍物。由于路径狭窄，任何时刻在路径的任何位置不能同时容纳 $2$ 个物体。每一步可以将障碍物或机器人移到相邻的空顶点上。设计一个有效算法用最少移动次数使机器人从 $s$ 运动到 $t$。对于给定的树 $T$，以及障碍物在树 $T$ 中的分布情况。计算机器人从起点 $s$ 到终点 $t$ 的最少移动次数。", "inputFormat": "第 $1$ 行有 $3$ 个正整数 $n$，$s$ 和 $t$，分别表示树 $T$ 的顶点数，起点 $s$ 的编号和终点 $t$ 的编号。\n\n接下来的 $n$ 行分别对应于树 $T$ 中编号为 $0,1,\\cdots,n-1$ 的顶点。每行的第 $1$ 个整数 $h$ 表示顶点的初始状态，当 $h=1$ 时表示该顶点为空顶点，当 $h=0$ 时表示该顶点为满顶点，其中已有 $1$ 个障碍物。第 $2$ 个数 $k$ 表示有 $k$ 个顶点与该顶点相连。接下来的 $k$ 个数是与该顶点相连的顶点编号。", "outputFormat": "程序运行结束时，将计算出的机器人最少移动次数输出。如果无法将机器人从起点移动到终点，输出 `No solution!`。", "hint": "题目中出现的数字均小于 $1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Robot Path Planning Problem (Suspected Faulty Problem)", "background": "Directly passing a problem by siphoning testdata and “table-based” solutions (hardcoding lookup tables) is cheating; once discovered, you will be brown-named.\n\nThis problem does not guarantee that there exists a solution that works for arbitrary data within this problem’s constraints. Because the testdata are weak, a program that passes this problem may be incorrect (e.g., with wrong time complexity or without correctness guarantees). The problem statement and testdata are for reference only. This problem does not accept additional hack testdata.\n\nThis is a faulty problem. You are not recommended to attempt or submit to this problem. [More details about this type of problem](https://www.luogu.com.cn/paste/pf94n89x).", "description": "Robot Rob can move freely on a tree-shaped path. Given the start $s$ and the end $t$ on the tree $T$, Rob needs to move from $s$ to $t$. There are several movable obstacles on $T$. Because the path is narrow, no two objects can occupy the same position at the same time. In each step, you may move either an obstacle or the robot to an adjacent empty vertex. Design an efficient algorithm to minimize the number of moves needed to move the robot from $s$ to $t$. For the given tree $T$ and the distribution of obstacles in $T$, compute the minimal number of moves for the robot to go from $s$ to $t$.", "inputFormat": "The first line contains three positive integers $n$, $s$ and $t$, denoting the number of vertices of the tree $T$, the index of the start $s$, and the index of the end $t$, respectively.\n\nThe next $n$ lines correspond to the vertices of $T$ numbered $0,1,\\cdots,n-1$. In each line, the first integer $h$ indicates the initial state of the vertex: when $h = 1$, the vertex is empty; when $h = 0$, the vertex is occupied, containing exactly one obstacle. The second number $k$ indicates that there are $k$ vertices adjacent to this vertex. The following $k$ numbers are the indices of the adjacent vertices.", "outputFormat": "Output the minimal number of moves computed. If the robot cannot be moved from the start to the end, output `No solution!`.", "hint": "All numbers that appear in the problem are less than $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "机器人路径规划问题（疑似错题）", "background": "**通过套取数据而直接“打表”过题者，是作弊行为，发现即棕名。**\n\n本题**不保证**存在**可以通过满足本题数据范围的任意数据**做法。由于测试数据过水，可以通过此题的程序不一定完全正确（算法时间复杂度错误、或不保证正确性）。本题题目和数据仅供参考。本题不接受添加 hack 数据。\n\n本题为错题。**不建议尝试或提交本题。**[关于此类题目的详细内容](https://www.luogu.com.cn/paste/pf94n89x)", "description": "机器人 Rob 可在一个树状路径上自由移动。给定树状路径 $T$ 上的起点 $s$ 和终点 $t$，机器人 Rob 要从 $s$ 运动到 $t$。树状路径 $T$ 上有若干可移动的障碍物。由于路径狭窄，任何时刻在路径的任何位置不能同时容纳 $2$ 个物体。每一步可以将障碍物或机器人移到相邻的空顶点上。设计一个有效算法用最少移动次数使机器人从 $s$ 运动到 $t$。对于给定的树 $T$，以及障碍物在树 $T$ 中的分布情况。计算机器人从起点 $s$ 到终点 $t$ 的最少移动次数。", "inputFormat": "第 $1$ 行有 $3$ 个正整数 $n$，$s$ 和 $t$，分别表示树 $T$ 的顶点数，起点 $s$ 的编号和终点 $t$ 的编号。\n\n接下来的 $n$ 行分别对应于树 $T$ 中编号为 $0,1,\\cdots,n-1$ 的顶点。每行的第 $1$ 个整数 $h$ 表示顶点的初始状态，当 $h=1$ 时表示该顶点为空顶点，当 $h=0$ 时表示该顶点为满顶点，其中已有 $1$ 个障碍物。第 $2$ 个数 $k$ 表示有 $k$ 个顶点与该顶点相连。接下来的 $k$ 个数是与该顶点相连的顶点编号。", "outputFormat": "程序运行结束时，将计算出的机器人最少移动次数输出。如果无法将机器人从起点移动到终点，输出 `No solution!`。", "hint": "题目中出现的数字均小于 $1000$。", "locale": "zh-CN"}}}
{"pid": "P2776", "type": "P", "difficulty": 3, "samples": [["4 2\n0 0 1 1\n6\npush 2\npush 0\npush 3\npop\npop\npop", "2\n3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "山东"], "title": "[SDOI2007] 小组队列", "background": "嘛，这道非常简单的给大家提供信心的省选题洛谷居然没有！\n\n这么简单的题怎么可以没有！\n\n给大家提升士气是义不容辞的责任！\n\n所以我就来补一下啦..\n\n值得一提的是，标程是我自己做的..\n\n很渣，因为数据很水所以能 AC..\n\n大神勿喷..\n", "description": "有 $m$ 个小组， $n$ 个元素，每个元素属于且仅属于一个小组。\n\n\n支持以下操作：\n\n\n`push x`：使元素 `x` 进队，如果前边有 `x` 所属小组的元素，`x` 会排到自己小组最后一个元素的下一个位置，否则 `x` 排到整个队列最后的位置。\n\n`pop`：出队，弹出队头并输出出队元素，出队的方式和普通队列相同，即排在前边的元素先出队。\n", "inputFormat": "第一行有两个正整数 $n$, $m$，分别表示元素个数和小组个数，元素和小组均从 $0$ 开始编号。\n\n接下来一行 $n$ 个非负整数 $A_i$，表示元素 $i$ 所在的小组。\n\n接下来一行一个正整数 $T$ ，表示操作数。\n\n接下来 $T$ 行，每行为一个操作。\n", "outputFormat": "对于每个出队操作输出一行，为出队的元素。\n", "hint": "对于 $30\\%$ 的数据，$1≤n≤100$，$1≤m≤10$，$T≤50$。\n\n对于 $100\\%$ 的数据，$1≤n≤100000$，$1≤m≤300$，$T≤100000$，输入保证操作合法。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] Team Queue", "background": "Well, somehow this very simple NOI Qualifier problem to boost confidence isn’t on Luogu.\n\nHow could such a simple problem be missing.\n\nIt’s my responsibility to raise everyone’s morale.\n\nSo I’m adding it here.\n\nWorth mentioning, the reference solution is my own.\n\nIt’s quite weak, but since the testdata is easy, it can AC.\n\nExperts, please don’t roast me.", "description": "There are $m$ groups and $n$ elements. Each element belongs to exactly one group.\n\nSupport the following operations:\n\n`push x`: Enqueue element `x`. If there is already an element from `x`’s group ahead in the queue, `x` will be placed immediately after the last element of its own group currently in the queue; otherwise, `x` will be placed at the end of the whole queue.\n\n`pop`: Dequeue. Remove the front element of the queue and output it. This behaves like a normal queue, i.e., elements in front leave first.", "inputFormat": "The first line contains two positive integers $n$, $m$, representing the number of elements and the number of groups. Elements and groups are numbered starting from $0$.\n\nThe next line contains $n$ non-negative integers $A_i$, where $A_i$ is the group that element $i$ belongs to.\n\nThe next line contains a positive integer $T$, the number of operations.\n\nThe next $T$ lines each contain one operation.", "outputFormat": "For each dequeue operation, output the dequeued element on a separate line.", "hint": "For $30\\%$ of the testdata, $1 \\le n \\le 100$, $1 \\le m \\le 10$, $T \\le 50$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 100000$, $1 \\le m \\le 300$, $T \\le 100000$. The input guarantees that all operations are valid.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 小组队列", "background": "嘛，这道非常简单的给大家提供信心的省选题洛谷居然没有！\n\n这么简单的题怎么可以没有！\n\n给大家提升士气是义不容辞的责任！\n\n所以我就来补一下啦..\n\n值得一提的是，标程是我自己做的..\n\n很渣，因为数据很水所以能 AC..\n\n大神勿喷..\n", "description": "有 $m$ 个小组， $n$ 个元素，每个元素属于且仅属于一个小组。\n\n\n支持以下操作：\n\n\n`push x`：使元素 `x` 进队，如果前边有 `x` 所属小组的元素，`x` 会排到自己小组最后一个元素的下一个位置，否则 `x` 排到整个队列最后的位置。\n\n`pop`：出队，弹出队头并输出出队元素，出队的方式和普通队列相同，即排在前边的元素先出队。\n", "inputFormat": "第一行有两个正整数 $n$, $m$，分别表示元素个数和小组个数，元素和小组均从 $0$ 开始编号。\n\n接下来一行 $n$ 个非负整数 $A_i$，表示元素 $i$ 所在的小组。\n\n接下来一行一个正整数 $T$ ，表示操作数。\n\n接下来 $T$ 行，每行为一个操作。\n", "outputFormat": "对于每个出队操作输出一行，为出队的元素。\n", "hint": "对于 $30\\%$ 的数据，$1≤n≤100$，$1≤m≤10$，$T≤50$。\n\n对于 $100\\%$ 的数据，$1≤n≤100000$，$1≤m≤300$，$T≤100000$，输入保证操作合法。\n", "locale": "zh-CN"}}}
{"pid": "P2777", "type": "P", "difficulty": 2, "samples": [["3\n8\n10\n9", "3"], ["5\n15\n14\n15\n12\n14", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "贪心", "2016", "安徽", "排序"], "title": "[AHOI2016初中组] 自行车比赛", "background": "", "description": "小雪非常关注自行车比赛，尤其是环滨湖自行车赛。一年一度的环滨湖自行车赛，需要选手们连续比赛数日，最终按照累计得分决出冠军。今年一共有 $N$ 位参赛选手。每一天的比赛总会决出当日的排名，第一名的选手会获得 $N$ 点得分，第二名会获得 $N-1$ 点得分，第三名会获得 $N-2$ 点得分，依次类推，最后一名会获得 $1$ 点得分。保证没有选手会排名相同。\n\n\n在之前的数日较量中，$N$ 位选手已经分别累计了一些分数。现在即将开始的是最后一天的比赛。小雪希望知道有多少位选手还有可能获得最终的冠军，也就是说还有多少选手有可能通过最后一天的比赛获得累计总分第一名。\n", "inputFormat": "第一行输入一个整数 $N$，表示参赛选手总数，保证 $3\\le N\\le 3\\times 10^5$。\n\n\n之后 $N$ 行，其中第 $i$ 行输入一个整数 $B_i$ 表示第 $i$ 位选手已经获得的累计分数，满足 $0\\le B_i\\le 2\\times 10^6%$。\n", "outputFormat": "输出只有一行，只输出一个整数，表示有多少位选手有可能获得最终的冠军。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\% $ 的数据，$3\\le N\\le 600$。\n- 对于 $50\\%$  的数据，$3\\le N\\le 1\\times 10^4$。\n- 对于 $100\\%$ 的数据，$3\\le N\\le 3\\times 10^5$ 且 $0\\le B_i\\le 2\\times 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2016 Junior] Bicycle Race", "background": "", "description": "Xiaoxue is very interested in bicycle races, especially the Tour of Binhu Lake. The annual Tour of Binhu Lake requires riders to compete for several consecutive days, and the champion is decided by total accumulated points. This year there are $N$ contestants. Each day’s race produces a ranking: the first-place finisher earns $N$ points, the second-place finisher earns $N-1$ points, the third-place finisher earns $N-2$ points, and so on, with the last-place finisher earning $1$ point. It is guaranteed that no two contestants share the same rank on a given day.\n\nOver the previous days, the $N$ contestants have already accumulated some points. The final day is about to begin. Xiaoxue wants to know how many contestants still have a chance to become the overall champion — that is, how many contestants can possibly finish with the highest total after the last day’s race.", "inputFormat": "The first line contains an integer $N$, the total number of contestants, with $3\\le N\\le 3\\times 10^5$.\n\nThen follow $N$ lines. The $i$-th line contains an integer $B_i$, the accumulated points already earned by contestant $i$, with $0\\le B_i\\le 2\\times 10^6$.", "outputFormat": "Output a single line containing one integer: the number of contestants who can still become the final champion.", "hint": "### Constraints and Conventions\n\n- For $20\\%$ of the testdata, $3\\le N\\le 600$.\n- For $50\\%$ of the testdata, $3\\le N\\le 1\\times 10^4$.\n- For $100\\%$ of the testdata, $3\\le N\\le 3\\times 10^5$ and $0\\le B_i\\le 2\\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2016初中组] 自行车比赛", "background": "", "description": "小雪非常关注自行车比赛，尤其是环滨湖自行车赛。一年一度的环滨湖自行车赛，需要选手们连续比赛数日，最终按照累计得分决出冠军。今年一共有 $N$ 位参赛选手。每一天的比赛总会决出当日的排名，第一名的选手会获得 $N$ 点得分，第二名会获得 $N-1$ 点得分，第三名会获得 $N-2$ 点得分，依次类推，最后一名会获得 $1$ 点得分。保证没有选手会排名相同。\n\n\n在之前的数日较量中，$N$ 位选手已经分别累计了一些分数。现在即将开始的是最后一天的比赛。小雪希望知道有多少位选手还有可能获得最终的冠军，也就是说还有多少选手有可能通过最后一天的比赛获得累计总分第一名。\n", "inputFormat": "第一行输入一个整数 $N$，表示参赛选手总数，保证 $3\\le N\\le 3\\times 10^5$。\n\n\n之后 $N$ 行，其中第 $i$ 行输入一个整数 $B_i$ 表示第 $i$ 位选手已经获得的累计分数，满足 $0\\le B_i\\le 2\\times 10^6%$。\n", "outputFormat": "输出只有一行，只输出一个整数，表示有多少位选手有可能获得最终的冠军。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\% $ 的数据，$3\\le N\\le 600$。\n- 对于 $50\\%$  的数据，$3\\le N\\le 1\\times 10^4$。\n- 对于 $100\\%$ 的数据，$3\\le N\\le 3\\times 10^5$ 且 $0\\le B_i\\le 2\\times 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P2778", "type": "P", "difficulty": 3, "samples": [["3\n0 0 1\n3 0 1\n2 0 4\n1\n0 0 3 0", "2"], ["3\n0 0 1\n0 0 2\n4 0 1\n2\n0 0 4 0\n0 0 0 4", "3\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "安徽"], "title": "[AHOI2016初中组] 迷宫", "background": "", "description": "小雪和小可可被困在了一个无限大的迷宫中。\n\n已经知道这个迷宫有 $N$ 堵环状的墙，如果把整个迷宫看作是一个二维平面，那么每一堵墙都是平面上一个圆。**任意两个圆不相交，不重合，也不会相切，但有可能相互包含**。小雪和小可可分别被困在了 $2$ 个不同的位置，且保证他们的位置与这些圆不重合。\n\n他们只有破坏墙面才能穿过去。\n\n小雪希望知道，如果他们要相见，至少要破坏掉多少堵墙？他们可以在任何位置相见。", "inputFormat": "第一行有一个整数 $N$，表示有多少堵墙。\n\n之后 $N$ 行，每一行有 $3$ 个整数 $x, y, r$，表示有一堵环状的墙是以 $(x,y)$ 为圆心，$r$ 为半径的。\n\n再下一行有一个整数 $Q$，表示有多少组询问。\n\n之后 $Q$ 行，每一行有 $4$ 个整数 $a, b, c, d$，给出了一组询问，表示小雪所在的位置为 $(a,b)$，小可可所在的位置为 $(c,d)$。", "outputFormat": "输出 $Q$ 行，对应 $Q$ 次询问，每一行输出一个整数，表示最少需要破坏掉多少堵墙才能相见。", "hint": "对于 $20\\%$ 的数据，$0\\le N\\le 200$。\n\n对于 $40\\%$ 的数据，$0\\le N\\le 1000$。\n\n对于 $100\\%$ 的数据，$0\\le N, Q\\le 8000,-10^8\\le x,y,r, a, b, c, d\\le 10^8$。\n\n此外，还有额外的 $20\\%$ 的数据，满足 $0\\le N\\le 1000,0\\le Q\\le 1000$。\n\n大数据点时限 $\\rm 3\\ s$。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2016 Middle School Division] Maze", "background": "", "description": "Xiaoxue and Xiaokeke are trapped in an infinite maze.\n\nIt is known that this maze has $N$ ring-shaped walls. If we regard the entire maze as a 2D plane, then each wall is a circle on the plane. Any two circles do not intersect, do not coincide, and are not tangent, but they may contain each other. Xiaoxue and Xiaokeke are trapped at two different positions, and it is guaranteed that their positions do not lie on any of these circles.\n\nThey can pass through only by breaking the walls.\n\nXiaoxue wants to know the minimum number of walls they need to break in order to meet. They may meet at any location.", "inputFormat": "The first line contains an integer $N$, the number of walls.\n\nThe next $N$ lines each contain three integers $x, y, r$, indicating a ring-shaped wall that is a circle centered at $(x, y)$ with radius $r$.\n\nThe next line contains an integer $Q$, the number of queries.\n\nThe following $Q$ lines each contain four integers $a, b, c, d$, representing one query: Xiaoxue is at position $(a, b)$, and Xiaokeke is at position $(c, d)$.", "outputFormat": "Output $Q$ lines, one per query. For each query, output one integer: the minimum number of walls that must be broken for them to meet.", "hint": "For $20\\%$ of the testdata, $0\\le N\\le 200$.\n\nFor $40\\%$ of the testdata, $0\\le N\\le 1000$.\n\nFor $100\\%$ of the testdata, $0\\le N, Q\\le 8000,-10^8\\le x,y,r, a, b, c, d\\le 10^8$.\n\nIn addition, there is an extra $20\\%$ of the testdata with $0\\le N\\le 1000, 0\\le Q\\le 1000$.\n\nLarge testdata time limit: $\\rm 3\\ s$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2016初中组] 迷宫", "background": "", "description": "小雪和小可可被困在了一个无限大的迷宫中。\n\n已经知道这个迷宫有 $N$ 堵环状的墙，如果把整个迷宫看作是一个二维平面，那么每一堵墙都是平面上一个圆。**任意两个圆不相交，不重合，也不会相切，但有可能相互包含**。小雪和小可可分别被困在了 $2$ 个不同的位置，且保证他们的位置与这些圆不重合。\n\n他们只有破坏墙面才能穿过去。\n\n小雪希望知道，如果他们要相见，至少要破坏掉多少堵墙？他们可以在任何位置相见。", "inputFormat": "第一行有一个整数 $N$，表示有多少堵墙。\n\n之后 $N$ 行，每一行有 $3$ 个整数 $x, y, r$，表示有一堵环状的墙是以 $(x,y)$ 为圆心，$r$ 为半径的。\n\n再下一行有一个整数 $Q$，表示有多少组询问。\n\n之后 $Q$ 行，每一行有 $4$ 个整数 $a, b, c, d$，给出了一组询问，表示小雪所在的位置为 $(a,b)$，小可可所在的位置为 $(c,d)$。", "outputFormat": "输出 $Q$ 行，对应 $Q$ 次询问，每一行输出一个整数，表示最少需要破坏掉多少堵墙才能相见。", "hint": "对于 $20\\%$ 的数据，$0\\le N\\le 200$。\n\n对于 $40\\%$ 的数据，$0\\le N\\le 1000$。\n\n对于 $100\\%$ 的数据，$0\\le N, Q\\le 8000,-10^8\\le x,y,r, a, b, c, d\\le 10^8$。\n\n此外，还有额外的 $20\\%$ 的数据，满足 $0\\le N\\le 1000,0\\le Q\\le 1000$。\n\n大数据点时限 $\\rm 3\\ s$。", "locale": "zh-CN"}}}
{"pid": "P2779", "type": "P", "difficulty": 5, "samples": [["B?B?????", "6"], ["??BB????W???BB??????", "26"], ["????????B???????????W??B?????W????????????????????W????????W", "10058904"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "动态规划 DP", "2016", "线段树", "安徽"], "title": "[AHOI2016初中组] 黑白序列", "background": "小可可知道小雪喜欢什么样子的黑白序列。", "description": "首先，对于任何正整数 $n$，如果一个黑白序列是由连续 $n$ 个黑接上连续 $n$ 个白，那一定是小雪喜欢的黑白序列。\n\n其次，如果有两个黑白序列小雪都喜欢，那么把这两个序列接起来得到的新序列，小雪也一定喜欢。小雪不会喜欢更多别的黑白序列。\n\n例如，如果用字符 `B` 和 `W` 分别表示黑色，`W` 表示白色，那么 `BW`，`BBWW`，`BBBWWW` 以及 `BWBW`，`BWBBWW`，`BWBBWWBW` 都是小雪喜欢的黑白序列。而 `W`，`WW`，`WB`，`WBBW` 以及 `BBBWW` 都不是小雪喜欢的黑白序列。\n\n现在小可可准备了一个未完成的黑白序列，用 `B` 和 `W` 表示黑色和白色，用 `?` 表示尚未确定，他希望知道一共有多少种不同的方法，在决定了每一个 `?` 位置的颜色后可以得到一个小雪喜欢的黑白序列。\n\n两个方案若有至少一位不同才能算是不同的，不是 `?` 的位置是不允许修改的。\n\n答案对 $10^9 + 9$（一个素数）取模。\n\n\n\n\n\n", "inputFormat": "第一行输入一个长度大于零的字符串，由 `B`，`W` 和 `?` 组成。\n", "outputFormat": "输出一个整数，表示答案。", "hint": "#### 样例输入输出 1 解释\n有六种合法方案，依次得到的最终黑白序列为： \n\n- `BBBBWWWW`，\n- `BBBWWWBW`，\n- `BWBBBWWW`，\n- `BWBBWWBW`，\n- `BWBWBBWW`，\n- `BWBWBWBW`。\n\n#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，输入长度不超过 $22$。\n- 对于 $60\\%$ 的数据，输入长度不超过 $5000$。\n- 对于 $100\\%$ 的数据，输入长度不超过 $500000$，保证序列中只含 `W`，`B`，`?` 三种字符，其中 `?` 是英文字符。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2016 Middle School] Black-and-White Sequence", "background": "Xiao Keke knows what kind of black-and-white sequences Xiaoxue likes.", "description": "First, for any positive integer $n$, if a black-and-white sequence consists of $n$ consecutive blacks followed by $n$ consecutive whites, then Xiaoxue definitely likes it.\n\nSecond, if Xiaoxue likes two black-and-white sequences, then she also likes the new sequence obtained by concatenating these two sequences. Xiaoxue does not like any other black-and-white sequences.\n\nFor example, use characters `B` and `W` to denote black and white, respectively. Then `BW`, `BBWW`, `BBBWWW`, as well as `BWBW`, `BWBBWW`, `BWBBWWBW` are sequences that Xiaoxue likes. In contrast, `W`, `WW`, `WB`, `WBBW`, and `BBBWW` are not liked by Xiaoxue.\n\nNow Xiao Keke has prepared an incomplete black-and-white sequence, where `B` and `W` denote black and white, and `?` denotes undecided. He wants to know how many different ways there are to decide the color at every `?` so that the resulting sequence is liked by Xiaoxue.\n\nTwo assignments are considered different if they differ at least at one position. Positions that are not `?` are not allowed to be modified.\n\nOutput the answer modulo $10^9 + 9$ (a prime).", "inputFormat": "The first line contains a non-empty string consisting of `B`, `W`, and `?`.", "outputFormat": "Output a single integer, the answer.", "hint": "Explanation for Sample Input/Output 1:\nThere are six valid assignments, and the resulting sequences are:\n- `BBBBWWWW`,\n- `BBBWWWBW`,\n- `BWBBBWWW`,\n- `BWBBWWBW`,\n- `BWBWBBWW`,\n- `BWBWBWBW`.\n\nConstraints:\n- For 20% of the testdata, the input length does not exceed 22.\n- For 60% of the testdata, the input length does not exceed 5000.\n- For 100% of the testdata, the input length does not exceed 500000. The sequence contains only the three characters `W`, `B`, and `?`, where `?` is the ASCII question mark.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2016初中组] 黑白序列", "background": "小可可知道小雪喜欢什么样子的黑白序列。", "description": "首先，对于任何正整数 $n$，如果一个黑白序列是由连续 $n$ 个黑接上连续 $n$ 个白，那一定是小雪喜欢的黑白序列。\n\n其次，如果有两个黑白序列小雪都喜欢，那么把这两个序列接起来得到的新序列，小雪也一定喜欢。小雪不会喜欢更多别的黑白序列。\n\n例如，如果用字符 `B` 和 `W` 分别表示黑色，`W` 表示白色，那么 `BW`，`BBWW`，`BBBWWW` 以及 `BWBW`，`BWBBWW`，`BWBBWWBW` 都是小雪喜欢的黑白序列。而 `W`，`WW`，`WB`，`WBBW` 以及 `BBBWW` 都不是小雪喜欢的黑白序列。\n\n现在小可可准备了一个未完成的黑白序列，用 `B` 和 `W` 表示黑色和白色，用 `?` 表示尚未确定，他希望知道一共有多少种不同的方法，在决定了每一个 `?` 位置的颜色后可以得到一个小雪喜欢的黑白序列。\n\n两个方案若有至少一位不同才能算是不同的，不是 `?` 的位置是不允许修改的。\n\n答案对 $10^9 + 9$（一个素数）取模。\n\n\n\n\n\n", "inputFormat": "第一行输入一个长度大于零的字符串，由 `B`，`W` 和 `?` 组成。\n", "outputFormat": "输出一个整数，表示答案。", "hint": "#### 样例输入输出 1 解释\n有六种合法方案，依次得到的最终黑白序列为： \n\n- `BBBBWWWW`，\n- `BBBWWWBW`，\n- `BWBBBWWW`，\n- `BWBBWWBW`，\n- `BWBWBBWW`，\n- `BWBWBWBW`。\n\n#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，输入长度不超过 $22$。\n- 对于 $60\\%$ 的数据，输入长度不超过 $5000$。\n- 对于 $100\\%$ 的数据，输入长度不超过 $500000$，保证序列中只含 `W`，`B`，`?` 三种字符，其中 `?` 是英文字符。", "locale": "zh-CN"}}}
{"pid": "P2780", "type": "P", "difficulty": 4, "samples": [["4 2 58 100\n10 10 50 80", "15"], ["8 3 1300 1800\n2 0 1 9 1 4 0 5", "1782"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "安徽"], "title": "[AHOI2016初中组] 游戏", "background": "", "description": "小雪与小可可正在玩一种数字游戏。他们准备了 $n$ 张卡片，每一张卡片上都有一个整数。游戏开始后，小雪会先选择一个不小于 $a$ 且不大于 $b$ 的整数 $t$，并告诉小可可这个数字 $t$ 是多少。之后小可可会挑出恰好 $k$ 张卡片，并将这 $k$ 张卡片上的数字相加，得到的和数记为 $m$。\n\n小雪希望 $t$ 和 $m$ 差的绝对值尽可能大，而小可可却希望 $t$ 和 $m$ 差的绝对值尽可能小。在游戏开始前，他们二人都知道 $n$， $a$， $b$ 和 $k$ 是多少，也知道每一张卡片上的数字是多少。在小雪决定了 $t$ 的大小后，不能再修改，之后才由小可可挑选纸牌。\n\n小雪希望知道，在二人都尝试最优策略的情况下， $t$ 和 $m$ 差的绝对值最大可以有多大？", "inputFormat": "输入有两行。\n\n第一行有 4 个整数 $n$， $k$， $a$ 和 $b$，分别满足 $1 \\le k \\le n \\le 250$ 且 $0 \\le a \\le b \\le 75000$。\n\n第二行有 $n$ 个整数，依次为 $x_1$ 到 $x_n$，给出了每一张卡片上的数字。\n\n每一张卡片上的数字 $x_i$ 都满足 $0\\le x_i \\le 300$。", "outputFormat": "输出一行，只有一个整数，表示 $t$ 和 $m$ 差的绝对值最大可以有多大。", "hint": "对于 30% 的数据， $1\\le k\\le n\\le 20$ 且 $0\\le a\\le b\\le   6000$。\n\n对于 80% 的数据， $1\\le k\\le n\\le 65$ 且 $0\\le a\\le b\\le   19650$。\n\n对于 100% 的数据， $1\\le k\\le n\\le 250$ 且 $0\\le a\\le b\\le 75000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2016 Junior] Game", "background": "", "description": "Xiao Xue and Xiao Keke are playing a number game. They have prepared $n$ cards, each with an integer on it. At the beginning, Xiao Xue chooses an integer $t$ with $a \\le t \\le b$ and tells Xiao Keke the value of $t$. Then Xiao Keke selects exactly $k$ cards and sums their numbers; denote this sum by $m$.\n\nXiao Xue wants the absolute difference between $t$ and $m$ to be as large as possible, while Xiao Keke wants it to be as small as possible. Before the game starts, both of them know $n$, $a$, $b$, and $k$, and also the number on every card. After Xiao Xue decides $t$, it cannot be changed, and only then does Xiao Keke select the cards.\n\nXiao Xue wants to know, under optimal play by both of them, how large the absolute difference between $t$ and $m$ can be.", "inputFormat": "The input has two lines.\n\nThe first line contains 4 integers $n$, $k$, $a$, and $b$, satisfying $1 \\le k \\le n \\le 250$ and $0 \\le a \\le b \\le 75000$.\n\nThe second line contains $n$ integers, namely $x_1$ to $x_n$, which are the numbers on the cards.\n\nEach number $x_i$ satisfies $0 \\le x_i \\le 300$.", "outputFormat": "Output one line with a single integer, which is the maximum possible value of the absolute difference between $t$ and $m$.", "hint": "For 30% of the testdata, $1 \\le k \\le n \\le 20$ and $0 \\le a \\le b \\le 6000$.\n\nFor 80% of the testdata, $1 \\le k \\le n \\le 65$ and $0 \\le a \\le b \\le 19650$.\n\nFor 100% of the testdata, $1 \\le k \\le n \\le 250$ and $0 \\le a \\le b \\le 75000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2016初中组] 游戏", "background": "", "description": "小雪与小可可正在玩一种数字游戏。他们准备了 $n$ 张卡片，每一张卡片上都有一个整数。游戏开始后，小雪会先选择一个不小于 $a$ 且不大于 $b$ 的整数 $t$，并告诉小可可这个数字 $t$ 是多少。之后小可可会挑出恰好 $k$ 张卡片，并将这 $k$ 张卡片上的数字相加，得到的和数记为 $m$。\n\n小雪希望 $t$ 和 $m$ 差的绝对值尽可能大，而小可可却希望 $t$ 和 $m$ 差的绝对值尽可能小。在游戏开始前，他们二人都知道 $n$， $a$， $b$ 和 $k$ 是多少，也知道每一张卡片上的数字是多少。在小雪决定了 $t$ 的大小后，不能再修改，之后才由小可可挑选纸牌。\n\n小雪希望知道，在二人都尝试最优策略的情况下， $t$ 和 $m$ 差的绝对值最大可以有多大？", "inputFormat": "输入有两行。\n\n第一行有 4 个整数 $n$， $k$， $a$ 和 $b$，分别满足 $1 \\le k \\le n \\le 250$ 且 $0 \\le a \\le b \\le 75000$。\n\n第二行有 $n$ 个整数，依次为 $x_1$ 到 $x_n$，给出了每一张卡片上的数字。\n\n每一张卡片上的数字 $x_i$ 都满足 $0\\le x_i \\le 300$。", "outputFormat": "输出一行，只有一个整数，表示 $t$ 和 $m$ 差的绝对值最大可以有多大。", "hint": "对于 30% 的数据， $1\\le k\\le n\\le 20$ 且 $0\\le a\\le b\\le   6000$。\n\n对于 80% 的数据， $1\\le k\\le n\\le 65$ 且 $0\\le a\\le b\\le   19650$。\n\n对于 100% 的数据， $1\\le k\\le n\\le 250$ 且 $0\\le a\\le b\\le 75000$。\n", "locale": "zh-CN"}}}
{"pid": "P2781", "type": "P", "difficulty": 3, "samples": [["5 5\n2 1 2\n1 4 4 2\n1 2 4 7\n1 4 5 6\n2 3 4", "0\n22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "枚举"], "title": "传教", "background": "写完暑假作业后，bx2k 去找 pear 玩。pear 表示他要去汉中传教，于是 bx2k 准备跟着去围观。", "description": "pear 把即将接受传教的人排成一行，每个人从左到右的编号为 $1\\sim n$。每个人有一个信仰值，一开始所有人的信仰值为 $0$。接着pear会做以下两件事之一：\n\n1. pear 向连续的一段人群传教。具体来说，pear 会使第 $l$个人到第 $r$ 个人之间的所有人的信仰值增加 $k$。\n\n2. pear 想知道某一段人的信仰值之和来得知泉岭精神是否深入人心。具体来说，pear 会问 bx2k 第 $l$ 个人到第 $r$ 个人之间所有人的信仰值之和。\n\n身为一个泉岭精神的信徒，bx2k 自然会帮 pear 来算。但是 bx2k 太笨了，根本不会算。于是他想找你来帮忙。", "inputFormat": "第一行包含两个整数 $n,m$。分别表示接受传教的人数以及 pear 的操作数。\n\n接下来 $m$ 行，每行包含若干个整数。若第一个整数为 $1$，则代表 pear 在进行传教，这一行接下来会包含 $l,r,k$ 三个整数。否则第一个整数为 $2$，代表 pear 的一个询问，这一行接下来会包含 $l,r$ 两个整数。", "outputFormat": "输出若干行，每行包含 $1$ 个整数，表示 pear 询问的答案。行数为 pear 的询问数量。", "hint": "【样例说明】\n\n一开始所有人的信仰值都为 $0$，所以答案为 $0$。到第五个操作时，五个人的信仰值分别为 $0,7,7,15,6$。则答案为 $7+15=22$\n\n【数据范围与约定】\n\n|测试点|$n,m$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$\\le 10$|无|\n|$4 \\sim 5$|$\\le 10^3$|无|\n|$6 \\sim 8$|$\\le 10^9$|特殊性质 A|\n\n特殊性质 A：没有传教操作。\n\n对于所有测试点，$n \\le 10^9,m \\le 10^3,1 \\le l \\le r \\le n,k \\le10$", "locale": "zh-CN", "translations": {"en": {"title": "Preaching", "background": "After finishing his summer homework, bx2k went to play with pear. pear said he was going to Hanzhong to preach, so bx2k decided to tag along and watch.", "description": "pear lines up the people who are about to receive preaching in a row, numbered from left to right as $1 \\sim n$. Each person has a faith value, and initially all faith values are $0$. Then pear will perform one of the following two operations:\n\n1. pear preaches to a continuous segment of people. Specifically, pear will increase the faith value of every person from the $l$-th to the $r$-th person by $k$.\n\n2. pear wants to know the sum of faith values over a segment to see whether the \"Quanling spirit\" has taken root. Specifically, pear will ask bx2k for the sum of the faith values of all people from the $l$-th to the $r$-th person.\n\nAs a believer in the \"Quanling spirit,\" bx2k naturally wants to help pear calculate. However, bx2k is too clumsy to do the math, so he is asking you for help.", "inputFormat": "The first line contains two integers $n, m$, representing the number of people receiving preaching and the number of operations by pear, respectively.\n\nThe next $m$ lines each contain several integers. If the first integer is $1$, it means pear is preaching, and this line will then contain three integers $l, r, k$. Otherwise, if the first integer is $2$, it means pear is making a query, and this line will then contain two integers $l, r$.", "outputFormat": "Output several lines, each containing $1$ integer, representing the answer to pear’s query. The number of lines equals the number of queries.", "hint": "Sample explanation:\nInitially, everyone’s faith value is $0$, so the answer is $0$. By the time of the fifth operation, the five people’s faith values are $0, 7, 7, 15, 6$. Thus, the answer is $7 + 15 = 22$.\n\nConstraints:\n| Test point | $n, m$ | Special property |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $\\le 10$ | None |\n| $4 \\sim 5$ | $\\le 10^3$ | None |\n| $6 \\sim 8$ | $\\le 10^9$ | Special property A |\n\nSpecial property A: No preaching operations.\n\nFor all test points, $n \\le 10^9$, $m \\le 10^3$, $1 \\le l \\le n$, $1 \\le r \\le n$, $k \\le 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "传教", "background": "写完暑假作业后，bx2k 去找 pear 玩。pear 表示他要去汉中传教，于是 bx2k 准备跟着去围观。", "description": "pear 把即将接受传教的人排成一行，每个人从左到右的编号为 $1\\sim n$。每个人有一个信仰值，一开始所有人的信仰值为 $0$。接着pear会做以下两件事之一：\n\n1. pear 向连续的一段人群传教。具体来说，pear 会使第 $l$个人到第 $r$ 个人之间的所有人的信仰值增加 $k$。\n\n2. pear 想知道某一段人的信仰值之和来得知泉岭精神是否深入人心。具体来说，pear 会问 bx2k 第 $l$ 个人到第 $r$ 个人之间所有人的信仰值之和。\n\n身为一个泉岭精神的信徒，bx2k 自然会帮 pear 来算。但是 bx2k 太笨了，根本不会算。于是他想找你来帮忙。", "inputFormat": "第一行包含两个整数 $n,m$。分别表示接受传教的人数以及 pear 的操作数。\n\n接下来 $m$ 行，每行包含若干个整数。若第一个整数为 $1$，则代表 pear 在进行传教，这一行接下来会包含 $l,r,k$ 三个整数。否则第一个整数为 $2$，代表 pear 的一个询问，这一行接下来会包含 $l,r$ 两个整数。", "outputFormat": "输出若干行，每行包含 $1$ 个整数，表示 pear 询问的答案。行数为 pear 的询问数量。", "hint": "【样例说明】\n\n一开始所有人的信仰值都为 $0$，所以答案为 $0$。到第五个操作时，五个人的信仰值分别为 $0,7,7,15,6$。则答案为 $7+15=22$\n\n【数据范围与约定】\n\n|测试点|$n,m$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$\\le 10$|无|\n|$4 \\sim 5$|$\\le 10^3$|无|\n|$6 \\sim 8$|$\\le 10^9$|特殊性质 A|\n\n特殊性质 A：没有传教操作。\n\n对于所有测试点，$n \\le 10^9,m \\le 10^3,1 \\le l \\le r \\le n,k \\le10$", "locale": "zh-CN"}}}
{"pid": "P2782", "type": "P", "difficulty": 3, "samples": [["7\n22 4\n2 6\n10 3\n15 12\n9 8\n17 17\n4 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "二分", "排序"], "title": "友好城市", "background": "", "description": "有一条横贯东西的大河，河有笔直的南北两岸，岸上各有位置各不相同的 $N$ 个城市。北岸的每个城市有且仅有一个友好城市在南岸，而且不同城市的友好城市不相同。每对友好城市都向政府申请在河上开辟一条直线航道连接两个城市，但是由于河上雾太大，政府决定避免任意两条航道交叉，以避免事故。编程帮助政府做出一些批准和拒绝申请的决定，使得在保证任意两条航道不相交的情况下，被批准的申请尽量多。\n", "inputFormat": "第一行，一个整数 $N$，表示城市数。\n\n第二行到第 $N+1$ 行，每行两个整数，中间用一个空格隔开，分别表示南岸和北岸的一对友好城市的坐标。\n", "outputFormat": "仅一行，输出一个整数，表示政府所能批准的最多申请数。\n", "hint": "### 数据规模与约定\n\n- 对于 $50\\%$ 的数据，$1 \\leq N \\leq 5000$，$0 \\leq x _ i \\leq 10000$。\n- 对于 $100\\%$ 的数据，$1 \\leq N \\leq 2 \\times 10 ^ 5$，$0 \\leq x _ i \\leq 10 ^ 6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Friendly Cities", "background": "", "description": "There is an east-west river with straight north and south banks. On each bank, there are $N$ cities at distinct positions. Each city on the north bank has exactly one friendly city on the south bank, and different cities have different friendly cities. Each pair of friendly cities applies to build a straight shipping lane across the river connecting the two cities. However, due to heavy fog on the river, the government decides to avoid any two lanes crossing to prevent accidents. Write a program to approve and reject some applications so that, while ensuring no two lanes cross, the number of approved applications is maximized.", "inputFormat": "The first line contains an integer $N$, the number of cities.\nFrom the second line to the $(N+1)$-th line, each line contains two integers separated by a space, representing the coordinates of a pair of friendly cities on the south and north banks, respectively.", "outputFormat": "Output a single line with one integer, the maximum number of applications the government can approve.", "hint": "Constraints\n\n- For $50\\%$ of the testdata, $1 \\leq N \\leq 5000$, $0 \\leq x_i \\leq 10000$.\n- For $100\\%$ of the testdata, $1 \\leq N \\leq 2 \\times 10^5$, $0 \\leq x_i \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "友好城市", "background": "", "description": "有一条横贯东西的大河，河有笔直的南北两岸，岸上各有位置各不相同的 $N$ 个城市。北岸的每个城市有且仅有一个友好城市在南岸，而且不同城市的友好城市不相同。每对友好城市都向政府申请在河上开辟一条直线航道连接两个城市，但是由于河上雾太大，政府决定避免任意两条航道交叉，以避免事故。编程帮助政府做出一些批准和拒绝申请的决定，使得在保证任意两条航道不相交的情况下，被批准的申请尽量多。\n", "inputFormat": "第一行，一个整数 $N$，表示城市数。\n\n第二行到第 $N+1$ 行，每行两个整数，中间用一个空格隔开，分别表示南岸和北岸的一对友好城市的坐标。\n", "outputFormat": "仅一行，输出一个整数，表示政府所能批准的最多申请数。\n", "hint": "### 数据规模与约定\n\n- 对于 $50\\%$ 的数据，$1 \\leq N \\leq 5000$，$0 \\leq x _ i \\leq 10000$。\n- 对于 $100\\%$ 的数据，$1 \\leq N \\leq 2 \\times 10 ^ 5$，$0 \\leq x _ i \\leq 10 ^ 6$。\n", "locale": "zh-CN"}}}
{"pid": "P2783", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2\n2 3\n2\n1 2\n2 3\n", "10\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "Tarjan", "双连通分量", "最近公共祖先 LCA"], "title": "有机化学之神偶尔会做作弊", "background": "XS 中学化学竞赛组教练是一个酷爱炉石的人。\n\n有一天他一边搓炉石一边监考，而你作为一个信息竞赛的大神也来凑热闹。\n\n然而你的化竞基友却向你求助了。\n\n“第 1354 题怎么做？”<--手语  他问道。", "description": "你翻到那一题：给定一个烃，只含有单键（给初中生的一个理解性解释：就是一堆碳用横线连起来，横线都是单条的）。\n\n然后炎魔之王拉格纳罗斯用他的火焰净化了一切环（？？？）。所有的环状碳都变成了一个碳，如图所示。\n\n![环状碳变为一个碳](https://cdn.luogu.com.cn/upload/pic/2758.png)\n\n然后指定多组碳，求出它们之间总共有多少碳，如图所示（和上图没有关系）。\n\n![求出有多少碳](https://cdn.luogu.com.cn/upload/pic/2759.png)\n\n但是因为在考试，所以你只能把这个答案用手语告诉你的基友。你决定用二进制来表示最后的答案，如图所示（不要在意，和题目没有什么没关系）。\n\n![二进制手语](https://cdn.luogu.com.cn/upload/pic/2760.png)\n\n### 题意简述\n\n给你一个 $n$ 个点，$m$ 条边的无向图。把图中所有的环变为一个点，求变化后某两个点之间有多少个点。", "inputFormat": "第一行两个整数 $n$，$m$。表示有 $n$ 个点，$m$ 根键。\n\n接下来 $m$ 行每行两个整数 $u$，$v$ 表示 $u$ 号碳和 $v$ 号碳有一根键。\n\n接下来一个整数 $tot$ 表示询问次数。\n\n接下来 $tot$ 行每行两个整数，$a$，$b$ 表示询问的两个碳的编号。", "outputFormat": "共 $tot$ 行，每行一个二进制数，表示答案。", "hint": "两个碳不成环。\n\n## 数据范围及约定\n\n对于 $100\\%$ 的数据，$1<n\\le10 ^ 4$，$1<m\\le5\\times 10 ^ 4$。", "locale": "zh-CN", "translations": {"en": {"title": "The God of Organic Chemistry Occasionally Cheats", "background": "The coach of the XS Middle School chemistry contest team is a big fan of Hearthstone.\n\nOne day, he was invigilating while playing Hearthstone, and you, being a programming contest pro, also came to watch.\n\nHowever, your chemistry-contest buddy turned to you for help.\n\n\"How do I solve Problem 1354?\" — he asked in sign language.", "description": "You flip to that problem: given a hydrocarbon that contains only single bonds (an intuitive explanation for middle schoolers: a bunch of carbons connected by single lines, and every line is a single bond).\n\nThen Ragnaros the Firelord purified all cycles with his flames (???). Every cyclic carbon structure is contracted into a single carbon, as shown in the figure.\n\n![环状碳变为一个碳](https://cdn.luogu.com.cn/upload/pic/2758.png)\n\nNext, for multiple specified pairs of carbons, compute how many carbons are between them in total, as illustrated (this illustration is unrelated to the one above).\n\n![求出有多少碳](https://cdn.luogu.com.cn/upload/pic/2759.png)\n\nBut since this is during an exam, you can only tell your buddy the answer using sign language. You decide to represent the final answer in binary, as shown (don’t mind it; it’s not really related to the problem).\n\n![二进制手语](https://cdn.luogu.com.cn/upload/pic/2760.png)\n\nIn short: you are given an undirected graph with $n$ vertices and $m$ edges. Contract every cycle in the graph into a single vertex. After this transformation, for each query asking about two vertices, find how many vertices lie between them.", "inputFormat": "- The first line contains two integers $n$, $m$, meaning there are $n$ vertices and $m$ bonds.\n- The next $m$ lines each contain two integers $u$, $v$, indicating there is a bond between carbon $u$ and carbon $v$.\n- The next line contains an integer $tot$, the number of queries.\n- The next $tot$ lines each contain two integers $a$, $b$, denoting the indices of the two queried carbons.", "outputFormat": "Output $tot$ lines, each containing a binary number representing the answer.", "hint": "The two queried carbons do not lie on a cycle.\n\n# Constraints\n\nFor $100\\%$ of the testdata, $1 < n \\le 10^4$, $1 < m \\le 5 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "有机化学之神偶尔会做作弊", "background": "XS 中学化学竞赛组教练是一个酷爱炉石的人。\n\n有一天他一边搓炉石一边监考，而你作为一个信息竞赛的大神也来凑热闹。\n\n然而你的化竞基友却向你求助了。\n\n“第 1354 题怎么做？”<--手语  他问道。", "description": "你翻到那一题：给定一个烃，只含有单键（给初中生的一个理解性解释：就是一堆碳用横线连起来，横线都是单条的）。\n\n然后炎魔之王拉格纳罗斯用他的火焰净化了一切环（？？？）。所有的环状碳都变成了一个碳，如图所示。\n\n![环状碳变为一个碳](https://cdn.luogu.com.cn/upload/pic/2758.png)\n\n然后指定多组碳，求出它们之间总共有多少碳，如图所示（和上图没有关系）。\n\n![求出有多少碳](https://cdn.luogu.com.cn/upload/pic/2759.png)\n\n但是因为在考试，所以你只能把这个答案用手语告诉你的基友。你决定用二进制来表示最后的答案，如图所示（不要在意，和题目没有什么没关系）。\n\n![二进制手语](https://cdn.luogu.com.cn/upload/pic/2760.png)\n\n### 题意简述\n\n给你一个 $n$ 个点，$m$ 条边的无向图。把图中所有的环变为一个点，求变化后某两个点之间有多少个点。", "inputFormat": "第一行两个整数 $n$，$m$。表示有 $n$ 个点，$m$ 根键。\n\n接下来 $m$ 行每行两个整数 $u$，$v$ 表示 $u$ 号碳和 $v$ 号碳有一根键。\n\n接下来一个整数 $tot$ 表示询问次数。\n\n接下来 $tot$ 行每行两个整数，$a$，$b$ 表示询问的两个碳的编号。", "outputFormat": "共 $tot$ 行，每行一个二进制数，表示答案。", "hint": "两个碳不成环。\n\n## 数据范围及约定\n\n对于 $100\\%$ 的数据，$1<n\\le10 ^ 4$，$1<m\\le5\\times 10 ^ 4$。", "locale": "zh-CN"}}}
