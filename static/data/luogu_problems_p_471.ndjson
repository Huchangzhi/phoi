{"pid": "P10552", "type": "P", "difficulty": 0, "samples": [], "limits": {"time": [1000], "memory": [1048576]}, "tags": ["2024", "THUPC"], "title": "[THUPC 2024 决赛] 警钟长鸣", "background": "", "description": "一年两度的 THUPC 又到来了，小 Z 也掏出了他的传统艺能——压轴的整活签到题。对于往年来说，签到题总是能被选手们在刚开场便迅速通过，而这次，小 Z 决定整点不一样的——”如果我把签到题刻意搞得很谜语人，让选手刚开场抓耳挠腮哪怕一小会，岂不是很爽？“\n\n说干就干，小 Z 精心设计了一套花里胡哨的障眼大法，望着最终的成品题目，小 Z 内心充满了得意。他甚至都开始想象起来，开场不久后选手们望着这道题毫无头绪，现场鸦雀无声，排行榜上一片沉寂的样子……\n\n带着这种丰收的喜悦，小 Z 来到了比赛当日的赛场上。然而，随着开考声音的响起，赛场上却呈现出此起彼伏的窃窃私语声，小 Z 走上前去，只听得大家讨论的语气和情绪决不是正常讨论题目应当有的，许多人甚至忍不住笑出了声。\n\n“奇怪，难道我的题目出了什么问题？”小 Z 疑惑地打开排行榜，只见此题的通过人数正在飞速上升，比以往的签到题还要快得多！“不，这不可能！”小 Z 双手颤抖地点开题目，在各个页面之间来回切换。突然，映入眼帘的内容使他瞬间呆住了。\n\n是的你没猜错，小 Z 在这道题的命题环节中出现了严重的失误，使得选手可以轻而易举地通过此题！小 Z 从发现自己命题失误的震惊中稍稍缓和了过来，决定立即着手修复失误。然而，冷静思考后的小 Z 突然意识到了一个五雷轰顶的事实：他已经犯下了无法弥补的错误！\n\n坦率而言，题目出现失误在比赛中并不罕见。大部分常见失误，如涉及到题面、评测数据、评测配置等环节，都可以通过赛时及时的修复来弥补，将损失降低至最小化。然而，小 Z 的失误恰恰是戳中了最致命的要害：选手已经获取到了本不应当获取到的、足以使他们轻松通过此题的信息，此时一切晚矣，一切努力都无法掩盖小 Z 已经捅了大篓子的事实。\n\n“啊~”小 Z 感到一阵天旋地转，几近昏厥。\n\n后续发生的一切，怎么处理的这一套烂摊子，在小 Z 的记忆中已变得模糊不清。时至今日，这一段传奇故事的细节早已散佚。而小 Z 在这过后沉寂了很久，终于决定痛定思痛，将这段往事进行艺术加工后向世人讲述，以示警钟长鸣。", "inputFormat": "无输入。", "outputFormat": "输出本题应当输出的内容。请注意，本题的输出是唯一且确定性的。", "hint": "因为本题是直接输出答案，输出样例可以直接通过此题，所以并未在题面里渲染样例。\n\n请工作人员在赛前仔细检查，不要把样例错发给选手。\n\n\n**来源与致谢**\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）决赛。感谢 THUSAA 的提供的题目。\n\n数据、题面、标程、题解等请参阅 THUPC 官方仓库 <https://thusaac.com/public>", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 决赛] 警钟长鸣", "background": "", "description": "一年两度的 THUPC 又到来了，小 Z 也掏出了他的传统艺能——压轴的整活签到题。对于往年来说，签到题总是能被选手们在刚开场便迅速通过，而这次，小 Z 决定整点不一样的——”如果我把签到题刻意搞得很谜语人，让选手刚开场抓耳挠腮哪怕一小会，岂不是很爽？“\n\n说干就干，小 Z 精心设计了一套花里胡哨的障眼大法，望着最终的成品题目，小 Z 内心充满了得意。他甚至都开始想象起来，开场不久后选手们望着这道题毫无头绪，现场鸦雀无声，排行榜上一片沉寂的样子……\n\n带着这种丰收的喜悦，小 Z 来到了比赛当日的赛场上。然而，随着开考声音的响起，赛场上却呈现出此起彼伏的窃窃私语声，小 Z 走上前去，只听得大家讨论的语气和情绪决不是正常讨论题目应当有的，许多人甚至忍不住笑出了声。\n\n“奇怪，难道我的题目出了什么问题？”小 Z 疑惑地打开排行榜，只见此题的通过人数正在飞速上升，比以往的签到题还要快得多！“不，这不可能！”小 Z 双手颤抖地点开题目，在各个页面之间来回切换。突然，映入眼帘的内容使他瞬间呆住了。\n\n是的你没猜错，小 Z 在这道题的命题环节中出现了严重的失误，使得选手可以轻而易举地通过此题！小 Z 从发现自己命题失误的震惊中稍稍缓和了过来，决定立即着手修复失误。然而，冷静思考后的小 Z 突然意识到了一个五雷轰顶的事实：他已经犯下了无法弥补的错误！\n\n坦率而言，题目出现失误在比赛中并不罕见。大部分常见失误，如涉及到题面、评测数据、评测配置等环节，都可以通过赛时及时的修复来弥补，将损失降低至最小化。然而，小 Z 的失误恰恰是戳中了最致命的要害：选手已经获取到了本不应当获取到的、足以使他们轻松通过此题的信息，此时一切晚矣，一切努力都无法掩盖小 Z 已经捅了大篓子的事实。\n\n“啊~”小 Z 感到一阵天旋地转，几近昏厥。\n\n后续发生的一切，怎么处理的这一套烂摊子，在小 Z 的记忆中已变得模糊不清。时至今日，这一段传奇故事的细节早已散佚。而小 Z 在这过后沉寂了很久，终于决定痛定思痛，将这段往事进行艺术加工后向世人讲述，以示警钟长鸣。", "inputFormat": "无输入。", "outputFormat": "输出本题应当输出的内容。请注意，本题的输出是唯一且确定性的。", "hint": "因为本题是直接输出答案，输出样例可以直接通过此题，所以并未在题面里渲染样例。\n\n请工作人员在赛前仔细检查，不要把样例错发给选手。\n\n\n**来源与致谢**\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）决赛。感谢 THUSAA 的提供的题目。\n\n数据、题面、标程、题解等请参阅 THUPC 官方仓库 <https://thusaac.com/public>", "locale": "zh-CN"}}}
{"pid": "P10553", "type": "P", "difficulty": 5, "samples": [["2\n\n3\n\n3\n\n3", "\n? 1 2\n\n? 2 3\n\n? 1 3\n\n! 3 3 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Guess The Tree", "background": "", "description": "There is a full binary tree with $n$ levels(so it has exactly $2^n-1$ nodes). Each node has an integer ID from $1$ to $2^n-1$, and the $2^n-1$ IDs form an arrangement from $1$ to $2^n-1$, but you don't know.\n\nYou need to find the IDs of the $2^n-1$ nodes using at most $4800$ queries.", "inputFormat": "The first line contains one integer $n(1\\leq n\\leq 10)$, the levels of the full binary tree.\n\nTo ask a query, you need to pick two nodes with IDs $u,v(1\\leq u,v\\leq 2^n-1)$, and print the line of the following form:\n\n> \"? u v\"\n\nAfter that, you will receive:\n\n> \"t\"\n\nThe lowest common ancestor's ID of $u$ and $v$.\n\nYou can ask at most $4800$ queries.\n\nIf you have found the structure of the tree, print a line of the following form:\n\n\"! $f_1\\ f_2\\ f_3\\ f_4$ ... $f_{2^n-1}$\"\n\n$f_i$ means the i-th node's father's ID. If it has no father, then $f_i=-1$.\n\nAfter printing a query or the answer for a test case, do not forget to output the end of line and flush the output. Otherwise, you will get the verdict 'Idleness Limit Exceeded'. To do this, use:\n\n`fflush(stdout)` or `cout.flush()` in C++;\n\n`System.out.flush()` in Java;\n\n`stdout.flush()` in Python.\n\nThe interactor in this task is not adaptive.", "outputFormat": "", "hint": "In this case, the tree's root is $3$, it's two sons are $1$ and $2$.\n\nFor any query \"? a b\",if $a\\neq b$, the jury will return answer $3$.\n\nSo we found the tree's root is $3$ .", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Guess The Tree", "background": "", "description": "There is a full binary tree with $n$ levels(so it has exactly $2^n-1$ nodes). Each node has an integer ID from $1$ to $2^n-1$, and the $2^n-1$ IDs form an arrangement from $1$ to $2^n-1$, but you don't know.\n\nYou need to find the IDs of the $2^n-1$ nodes using at most $4800$ queries.", "inputFormat": "The first line contains one integer $n(1\\leq n\\leq 10)$, the levels of the full binary tree.\n\nTo ask a query, you need to pick two nodes with IDs $u,v(1\\leq u,v\\leq 2^n-1)$, and print the line of the following form:\n\n> \"? u v\"\n\nAfter that, you will receive:\n\n> \"t\"\n\nThe lowest common ancestor's ID of $u$ and $v$.\n\nYou can ask at most $4800$ queries.\n\nIf you have found the structure of the tree, print a line of the following form:\n\n\"! $f_1\\ f_2\\ f_3\\ f_4$ ... $f_{2^n-1}$\"\n\n$f_i$ means the i-th node's father's ID. If it has no father, then $f_i=-1$.\n\nAfter printing a query or the answer for a test case, do not forget to output the end of line and flush the output. Otherwise, you will get the verdict 'Idleness Limit Exceeded'. To do this, use:\n\n`fflush(stdout)` or `cout.flush()` in C++;\n\n`System.out.flush()` in Java;\n\n`stdout.flush()` in Python.\n\nThe interactor in this task is not adaptive.", "outputFormat": "", "hint": "In this case, the tree's root is $3$, it's two sons are $1$ and $2$.\n\nFor any query \"? a b\",if $a\\neq b$, the jury will return answer $3$.\n\nSo we found the tree's root is $3$ .", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Guess The Tree", "background": "", "description": "有一个满二叉树，具有 $n$ 层（因此它恰好有 $2^n-1$ 个节点）。每个节点都有一个从 $1$ 到 $2^n-1$ 的整数 ID，这 $2^n-1$ 个 ID 形成一个从 $1$ 到 $2^n-1$ 的排列，但你并不知道具体的排列。\n\n你需要通过最多 $4800$ 次查询找到这 $2^n-1$ 个节点的 ID。", "inputFormat": "第一行包含一个整数 $n(1\\leq n\\leq 10)$，表示满二叉树的层数。\n\n为了进行一次查询，你需要选择两个节点，其 ID 为 $u,v(1\\leq u,v\\leq 2^n-1)$，并输出如下格式的一行：\n\n> \"? u v\"\n\n之后，你将收到：\n\n> \"t\"\n\n即 $u$ 和 $v$ 的最近公共祖先的 ID。\n\n你最多可以进行 $4800$ 次查询。\n\n如果你已经找到了树的结构，输出如下格式的一行：\n\n\"! $f_1\\ f_2\\ f_3\\ f_4$ ... $f_{2^n-1}$\"\n\n其中 $f_i$ 表示第 $i$ 个节点的父节点的 ID。如果没有父节点，则 $f_i=-1$。\n\n在打印查询或测试用例的答案后，不要忘记输出行尾并刷新输出。否则，你将得到「Idleness Limit Exceeded」的判定。为此，请使用：\n\n`fflush(stdout)` 或 `cout.flush()` 在 C++ 中；\n\n`System.out.flush()` 在 Java 中；\n\n`stdout.flush()` 在 Python 中。\n\n此任务中的交互器不是自适应的。", "outputFormat": "", "hint": "在这个例子中，树的根是 $3$，它的两个儿子是 $1$ 和 $2$。\n\n对于任何查询 \"? a b\"，如果 $a\neq b$，评测系统将返回答案 $3$。\n\n因此我们找到了树的根是 $3$。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10554", "type": "P", "difficulty": 5, "samples": [["2 0\n0 1\n1 0", "2\n0 2\n2 0"], ["3 1\n1 0 0\n0 1 0\n0 0 1", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Turn Off The Lights", "background": "", "description": "Kitty has $n^2$ lights, which form an $n\\times n$ matrix.\n\nOne day, Kitty found that some of these lights were on, and some were off. Kitty wants to turn them all off.\n\nTo achieve her goal, Kitty can perform three types of operations:\n\n- (1) Choose a row, reverse the state of this row. It means if a light of this row is on, after this operation, it is now off. If a light of this row is off, after this operation, it is now on.\n\n- (2) Choose a column, reverse the state of this column. It means if a light of this column is on, after this operation, it is now off. If a light of this column is off, after this operation, it is now on.\n\n- (3) Choose exactly one light, reverse the state of this light. **This operation can only be performed not more than $k$ times.**\n\nFor the current state, help Kitty achieve her goal within $3n$ operations.", "inputFormat": "The first line contains two integers $n(1\\leq n\\leq 1000),k(0\\leq k < n)$, indicating as described above.\n\nThen $n$ lines follow, each line has exactly $n$ numbers, $0$ represents that the light is turned off at this time, while $1$ represents the opposite.\n\nThe $y$-th number of the $(x+1)$-th line in input means the light at coordinate $(x,y)$.", "outputFormat": "If Kitty can not achieve her goal,print $-1$ in a single line.\n\nOtherwise, print $M(0\\leq M\\leq 3n)$ in the first line, indicating the number of operations she needs to perform.\n\nThe next $M$ lines, each line contains $2$ integers $x,y$, separated by white space.\n\nIf $1\\leq x\\leq n,1\\leq y\\leq n$, it means Kitty will reverse the light at coordinate $(x,y)$.\n\nIf $x=0,1\\leq y\\leq n$, it means Kitty will reverse all lights at coordinates $(z,y)1\\leq z\\leq n$.\n\nIf $1\\leq x\\leq n,y=0$, it means Kitty will reverse all lights at coordinates $(x,z)1\\leq z\\leq n$.\n\nIf there are multiple answers, print any of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Turn Off The Lights", "background": "", "description": "Kitty has $n^2$ lights, which form an $n\\times n$ matrix.\n\nOne day, Kitty found that some of these lights were on, and some were off. Kitty wants to turn them all off.\n\nTo achieve her goal, Kitty can perform three types of operations:\n\n- (1) Choose a row, reverse the state of this row. It means if a light of this row is on, after this operation, it is now off. If a light of this row is off, after this operation, it is now on.\n\n- (2) Choose a column, reverse the state of this column. It means if a light of this column is on, after this operation, it is now off. If a light of this column is off, after this operation, it is now on.\n\n- (3) Choose exactly one light, reverse the state of this light. **This operation can only be performed not more than $k$ times.**\n\nFor the current state, help Kitty achieve her goal within $3n$ operations.", "inputFormat": "The first line contains two integers $n(1\\leq n\\leq 1000),k(0\\leq k < n)$, indicating as described above.\n\nThen $n$ lines follow, each line has exactly $n$ numbers, $0$ represents that the light is turned off at this time, while $1$ represents the opposite.\n\nThe $y$-th number of the $(x+1)$-th line in input means the light at coordinate $(x,y)$.", "outputFormat": "If Kitty can not achieve her goal,print $-1$ in a single line.\n\nOtherwise, print $M(0\\leq M\\leq 3n)$ in the first line, indicating the number of operations she needs to perform.\n\nThe next $M$ lines, each line contains $2$ integers $x,y$, separated by white space.\n\nIf $1\\leq x\\leq n,1\\leq y\\leq n$, it means Kitty will reverse the light at coordinate $(x,y)$.\n\nIf $x=0,1\\leq y\\leq n$, it means Kitty will reverse all lights at coordinates $(z,y)1\\leq z\\leq n$.\n\nIf $1\\leq x\\leq n,y=0$, it means Kitty will reverse all lights at coordinates $(x,z)1\\leq z\\leq n$.\n\nIf there are multiple answers, print any of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Turn Off The Lights", "background": "", "description": "Kitty 有 $n^2$ 个灯泡，这些灯泡组成了一个 $n\\times n$ 的矩阵。\n\n有一天，Kitty 发现这些灯泡中有些是亮的，有些是灭的。Kitty 想要把它们全部关闭。\n\n为了实现她的目标，Kitty 可以执行三种类型的操作：\n\n- (1) 选择一行，反转这一行的状态。这意味着如果这一行的灯泡是亮的，经过此操作后，它将变为灭的。如果这一行的灯泡是灭的，经过此操作后，它将变为亮的。\n\n- (2) 选择一列，反转这一列的状态。这意味着如果这一列的灯泡是亮的，经过此操作后，它将变为灭的。如果这一列的灯泡是灭的，经过此操作后，它将变为亮的。\n\n- (3) 选择一个灯泡，反转这个灯泡的状态。**这种操作最多只能执行 $k$ 次。**\n\n对于当前状态，帮助 Kitty 在 $3n$ 次操作内实现她的目标。", "inputFormat": "第一行包含两个整数 $n(1\\leq n\\leq 1000),k(0\\leq k < n)$，如上所述。\n\n接下来有 $n$ 行，每行有正好 $n$ 个数字，$0$ 表示此时灯泡是灭的，而 $1$ 表示相反。\n\n输入中第 $(x+1)$ 行的第 $y$ 个数字表示坐标 $(x,y)$ 处的灯泡。", "outputFormat": "如果 Kitty 无法实现她的目标，输出 $-1$ 在一行中。\n\n否则，第一行输出 $M(0\\leq M\\leq 3n)$，表示她需要执行的操作次数。\n\n接下来的 $M$ 行中，每行包含 $2$ 个整数 $x,y$，用空格分隔。\n\n如果 $1\\leq x\\leq n,1\\leq y\\leq n$，表示 Kitty 将反转坐标 $(x,y)$ 处的灯泡。\n\n如果 $x=0,1\\leq y\\leq n$，表示 Kitty 将反转所有坐标为 $(z,y)1\\leq z\\leq n$ 的灯泡。\n\n如果 $1\\leq x\\leq n,y=0$，表示 Kitty 将反转所有坐标为 $(x,z)1\\leq z\\leq n$ 的灯泡。\n\n如果有多个答案，输出其中任意一个。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10555", "type": "P", "difficulty": 5, "samples": [["6\n1 1 1 1 1 1\n1 2\n1 3\n1 4\n2 5\n2 6", "4 4 0 0 0 0"], ["4\n1 2 3 4\n1 2\n1 3\n1 4", "12 0 0 0"], ["7\n1 2 3 4 5 6 7\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7", "5 12 16 0 0 0 0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Fix the Tree", "background": "", "description": "You are given a tree consisting of $n$ vertices. Each vertex $i$ of this tree has a value $w_i$ assigned to it.\n\nNow the vertex $u$ will be broken. Once it's broken, vertex $u$ and all edges with one end at vertex $u$ will be removed from the tree.\n\nTo make the tree connected, you can do the following operation any number of times(possibly zero) in any order:\n\n- First choose two vertices $u$ and $v$ from the tree;\n- Then pay $w_u+w_v$ coins, and add an edge between vertices $u$ and $v$;\n- At last, replace $w_u+1$ with $w_u$, replace $w_v+1$ with $w_v$.\n\nYour task is to calculate the minimum number of coins to be paid.\n\nBut you don't know which vertex $u$ is, so you need to find the answer for each $1\\le u\\le n$. Please answer all the queries independently.", "inputFormat": "The first line contains a single integer $n(2\\le n\\le 10^6)$ --- the number of vertices in this tree.\n\nThe next line contains $n$ numbers, the $i$ -th number is $w_i(1\\le w_i\\le n)$.\n\nThe next $n-1$ lines contain a description of the tree's edges. The $i$ -th of these lines contains two integers $u_i$ and $v_i(1\\le u_i,v_i\\le n) $ --- the numbers of vertices connected by the $i$ -th edge.\n\nIt is guaranteed that the given edges form a tree.", "outputFormat": "Print $n$ integers, the $i$ -th integer is the answer when $u=i$.", "hint": "给定一个有 $n$ 个点组成的树，每个点有一个权值 $w_i$。  \n点 $u$ 和相邻的边被删除。  \n你可以进行以下操作任意次数（可以为 $0$）,让树重新成为连通图：\n1. 选择两个点 $u$、$v$；\n2. 花费 $w_u + w_v$ 的代价连接一条边 $(u,v)$；\n3. $w_u \\leftarrow w_u+1,w_v \\leftarrow w_v+1$。\n\n对于每个 $u$ 计算最小代价。", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Fix the Tree", "background": "", "description": "You are given a tree consisting of $n$ vertices. Each vertex $i$ of this tree has a value $w_i$ assigned to it.\n\nNow the vertex $u$ will be broken. Once it's broken, vertex $u$ and all edges with one end at vertex $u$ will be removed from the tree.\n\nTo make the tree connected, you can do the following operation any number of times(possibly zero) in any order:\n\n- First choose two vertices $u$ and $v$ from the tree;\n- Then pay $w_u+w_v$ coins, and add an edge between vertices $u$ and $v$;\n- At last, replace $w_u+1$ with $w_u$, replace $w_v+1$ with $w_v$.\n\nYour task is to calculate the minimum number of coins to be paid.\n\nBut you don't know which vertex $u$ is, so you need to find the answer for each $1\\le u\\le n$. Please answer all the queries independently.", "inputFormat": "The first line contains a single integer $n(2\\le n\\le 10^6)$ --- the number of vertices in this tree.\n\nThe next line contains $n$ numbers, the $i$ -th number is $w_i(1\\le w_i\\le n)$.\n\nThe next $n-1$ lines contain a description of the tree's edges. The $i$ -th of these lines contains two integers $u_i$ and $v_i(1\\le u_i,v_i\\le n) $ --- the numbers of vertices connected by the $i$ -th edge.\n\nIt is guaranteed that the given edges form a tree.", "outputFormat": "Print $n$ integers, the $i$ -th integer is the answer when $u=i$.", "hint": "给定一个有 $n$ 个点组成的树，每个点有一个权值 $w_i$。  \n点 $u$ 和相邻的边被删除。  \n你可以进行以下操作任意次数（可以为 $0$）,让树重新成为连通图：\n1. 选择两个点 $u$、$v$；\n2. 花费 $w_u + w_v$ 的代价连接一条边 $(u,v)$；\n3. $w_u \\leftarrow w_u+1,w_v \\leftarrow w_v+1$。\n\n对于每个 $u$ 计算最小代价。", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Fix the Tree", "background": "", "description": "给定一棵由 $n$ 个顶点组成的树。树中每个顶点 $i$ 都有一个值 $w_i$。\n\n现在顶点 $u$ 将被破坏。一旦被破坏，顶点 $u$ 和所有以 $u$ 为一端的边将从树中移除。\n\n为了使树重新连通，你可以执行以下操作任意次（可能为零次），顺序不限：\n\n- 首先从树中选择两个顶点 $u$ 和 $v$；\n- 然后支付 $w_u + w_v$ 个硬币，并在顶点 $u$ 和 $v$ 之间添加一条边；\n- 最后，将 $w_u + 1$ 替换为 $w_u$，将 $w_v + 1$ 替换为 $w_v$。\n\n你的任务是计算需要支付的最小硬币数。\n\n但你不知道哪个顶点是 $u$，所以你需要为每个 $1 \\le u \\le n$ 找到答案。请独立回答所有查询。", "inputFormat": "第一行包含一个整数 $n(2 \\le n \\le 10^6)$ —— 这棵树的顶点数。\n\n接下来的一行包含 $n$ 个数，第 $i$ 个数是 $w_i(1 \\le w_i \\le n)$。\n\n接下来的 $n-1$ 行包含树的边的描述。这些行中的第 $i$ 行包含两个整数 $u_i$ 和 $v_i(1 \\le u_i, v_i \\le n)$ —— 由第 $i$ 条边连接的顶点的编号。\n\n保证给定的边构成一棵树。", "outputFormat": "输出 $n$ 个整数，第 $i$ 个整数是当 $u=i$ 时的答案。", "hint": "给定一个有 $n$ 个点组成的树，每个点有一个权值 $w_i$。\n点 $u$ 和相邻的边被删除。\n你可以进行以下操作任意次数（可以为 $0$），让树重新成为连通图：\n1. 选择两个点 $u$、$v$；\n2. 花费 $w_u + w_v$ 的代价连接一条边 $(u,v)$；\n3. $w_u \\leftarrow w_u+1, w_v \\leftarrow w_v+1$。\n\n对于每个 $u$ 计算最小代价。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10556", "type": "P", "difficulty": 4, "samples": [["5\n1 4 3 2 5\n1 1 1 1 1", "2"], ["5\n1 4 3 2 5\n1 9 1 1 1", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "枚举", "ICPC", "调和级数", "西安"], "title": "[ICPC 2024 Xi'an I] Make Them Straight", "background": "", "description": "There is a sequence $a$ of non-negative integers of length $n$, the $i$-th element of it is $a_i(1\\leq i\\leq n)$.\n\nA sequence is defined as 'good' if and only if there exists a non negative integer $k(0\\leq k\\leq 10^6)$ that satisfies the following condition:\n\n$a_{i}=a_{1}+(i-1)k$ for all $1\\leq i\\leq n$.\n\nTo make this sequence 'good', for each $i(1\\leq i\\leq n)$, you can do nothing, or pay $b_i$ coin to replace $a_i$ with any non-negative integer.\n\nThe question is, what is the minimum cost to make this sequence 'good'.", "inputFormat": "The first line contains an integer $n(1\\leq n\\leq 2\\times 10^5)$, described in the statement.\n\nThe second line contains $n$ integers $a_1,...,a_n(0\\leq a_i\\leq 10^6)$.\n\nThe third line contains $n$ integers $b_1,...,b_n(0\\leq b_i\\leq 10^6)$.", "outputFormat": "One integer, the answer.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Make Them Straight", "background": "", "description": "There is a sequence $a$ of non-negative integers of length $n$, the $i$-th element of it is $a_i(1\\leq i\\leq n)$.\n\nA sequence is defined as 'good' if and only if there exists a non negative integer $k(0\\leq k\\leq 10^6)$ that satisfies the following condition:\n\n$a_{i}=a_{1}+(i-1)k$ for all $1\\leq i\\leq n$.\n\nTo make this sequence 'good', for each $i(1\\leq i\\leq n)$, you can do nothing, or pay $b_i$ coin to replace $a_i$ with any non-negative integer.\n\nThe question is, what is the minimum cost to make this sequence 'good'.", "inputFormat": "The first line contains an integer $n(1\\leq n\\leq 2\\times 10^5)$, described in the statement.\n\nThe second line contains $n$ integers $a_1,...,a_n(0\\leq a_i\\leq 10^6)$.\n\nThe third line contains $n$ integers $b_1,...,b_n(0\\leq b_i\\leq 10^6)$.", "outputFormat": "One integer, the answer.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Make Them Straight", "background": "", "description": "有一个长度为 $n$ 的非负整数序列 $a$，其中第 $i$ 个元素为 $a_i(1\\leq i\\leq n)$。\n\n如果存在一个非负整数 $k(0\\leq k\\leq 10^6)$ 满足以下条件，则该序列被定义为「好」序列：\n\n对于所有 $1\\leq i\\leq n$，都有 $a_{i}=a_{1}+(i-1)k$。\n\n为了使这个序列成为「好」序列，对于每个 $i(1\\leq i\\leq n)$，你可以选择不做任何操作，或者支付 $b_i$ 个硬币将 $a_i$ 替换为任意非负整数。\n\n问题是，使这个序列成为「好」序列的最小代价是多少。", "inputFormat": "第一行包含一个整数 $n(1\\leq n\\leq 2\\times 10^5)$，如题述。\n\n第二行包含 $n$ 个整数 $a_1,...,a_n(0\\leq a_i\\leq 10^6)$。\n\n第三行包含 $n$ 个整数 $b_1,...,b_n(0\\leq b_i\\leq 10^6)$。", "outputFormat": "一个整数，表示答案。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10557", "type": "P", "difficulty": 5, "samples": [["1\n1 1 1\n -1 2 1\n0 -3 2\n0.1 0.6 0.3", "0.748252"], ["8\n1 3 -2\n0 0 2\n-2 2 1\n0.1 0.3 0.6\n0 0 1\n0.5 0.2 0.3\n0 0 1\n1 0 0\n0 0 1 \n0.33 0.33 0.34\n0.16 0.16 0.68", "0.111111"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Dumb Robot", "background": "", "description": "You have a dumb robot, and you are going to let it play games with $n$ robots.\n\nThere is a matrix $A$ with three rows and three columns in the game. We call the number of row $i$ and column $j$ of this matrix $A_{i,j}$. The game goes like this:\n\nTwo players each choose an integer from $[1,3]$ at the same time. We call the number your robot chooses $i$, and the number the other robot chooses $j$.\nThe score is $A_{i,j}$.\nIn game $i$, your robot will play this game with the $i$ -th robot. The $i$ -th robot has a probability of choosing $1$ as $p_{i,1}$, a probability of choosing $2$ as $p_{i,2}$, and a probability of choosing $3$ as $p_{i,3}$.\n\nYour goal is to make the expected value of the score not negative in each game. But your robot is very dumb, so it will choose $1$ with probability $q_1$, $2$ with probability $q_2$, and $3$ with probability $q_3$, and you don't know the value of $q_1,q_2,q_3$.\n\nWe all know that $q_1+q_2+q_3=1$. If $q_1,q_2,q_3$ are chosen uniformly at random from a set of all possible cases, please calculate the probability that you will reach your goal.", "inputFormat": "The first line contains one integer $n$($1\\le n\\le10^4$).\n\nEach of the next $3$ lines contains $3$ integers, the $j$ -th integer in the $i$ -th of these lines is $A_{i,j}$($-20\\le A_{i,j}\\le20$).\n\nEach of the next $n$ lines contains $3$ real numbers, the $j$ -th number in the $i$ -th of these lines is $p_{i,j}$. It is guaranteed that $p_{i,1}+p_{i,2}+p_{i,3}=1$ and $0\\le p_{i,j}$.", "outputFormat": "Output the answer to the problem. It is guaranteed that the answer will never be $0$.\n\nYour answer is considered correct if its absolute or relative error does not exceed $10^{-2}$. Formally, let your answer be $a$, and the jury's answer be $b$. Your answer is accepted if and only if $\\frac{|a-b|}{max(1,|b|)} \\leq 10^{-2}$.\n\n", "hint": "In example $1$, for example, $(q_1=1,q_2=0,q_3=0)$ is ok. In this case, Your robot will always choose $1$, so no matter what number will robot $1$ choose, the score will always be $1$, which is enough to reach your goal.", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Dumb Robot", "background": "", "description": "You have a dumb robot, and you are going to let it play games with $n$ robots.\n\nThere is a matrix $A$ with three rows and three columns in the game. We call the number of row $i$ and column $j$ of this matrix $A_{i,j}$. The game goes like this:\n\nTwo players each choose an integer from $[1,3]$ at the same time. We call the number your robot chooses $i$, and the number the other robot chooses $j$.\nThe score is $A_{i,j}$.\nIn game $i$, your robot will play this game with the $i$ -th robot. The $i$ -th robot has a probability of choosing $1$ as $p_{i,1}$, a probability of choosing $2$ as $p_{i,2}$, and a probability of choosing $3$ as $p_{i,3}$.\n\nYour goal is to make the expected value of the score not negative in each game. But your robot is very dumb, so it will choose $1$ with probability $q_1$, $2$ with probability $q_2$, and $3$ with probability $q_3$, and you don't know the value of $q_1,q_2,q_3$.\n\nWe all know that $q_1+q_2+q_3=1$. If $q_1,q_2,q_3$ are chosen uniformly at random from a set of all possible cases, please calculate the probability that you will reach your goal.", "inputFormat": "The first line contains one integer $n$($1\\le n\\le10^4$).\n\nEach of the next $3$ lines contains $3$ integers, the $j$ -th integer in the $i$ -th of these lines is $A_{i,j}$($-20\\le A_{i,j}\\le20$).\n\nEach of the next $n$ lines contains $3$ real numbers, the $j$ -th number in the $i$ -th of these lines is $p_{i,j}$. It is guaranteed that $p_{i,1}+p_{i,2}+p_{i,3}=1$ and $0\\le p_{i,j}$.", "outputFormat": "Output the answer to the problem. It is guaranteed that the answer will never be $0$.\n\nYour answer is considered correct if its absolute or relative error does not exceed $10^{-2}$. Formally, let your answer be $a$, and the jury's answer be $b$. Your answer is accepted if and only if $\\frac{|a-b|}{max(1,|b|)} \\leq 10^{-2}$.\n\n", "hint": "In example $1$, for example, $(q_1=1,q_2=0,q_3=0)$ is ok. In this case, Your robot will always choose $1$, so no matter what number will robot $1$ choose, the score will always be $1$, which is enough to reach your goal.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Dumb Robot", "background": "", "description": "你有一个笨机器人，你打算让它与 $n$ 个机器人玩游戏。\n\n在游戏中有一个 $3 \\times 3$ 的矩阵 $A$。我们称矩阵中第 $i$ 行第 $j$ 列的数为 $A_{i,j}$。游戏规则如下：\n\n两个玩家同时从 $[1,3]$ 中各选择一个整数。我们称你的机器人选择的数为 $i$，另一个机器人选择的数为 $j$。\n得分为 $A_{i,j}$。\n在第 $i$ 局游戏中，你的机器人将与第 $i$ 个机器人进行游戏。第 $i$ 个机器人选择 $1$ 的概率为 $p_{i,1}$，选择 $2$ 的概率为 $p_{i,2}$，选择 $3$ 的概率为 $p_{i,3}$。\n\n你的目标是在每局游戏中使得得分的期望值不为负。但你的机器人非常笨，所以它选择 $1$ 的概率为 $q_1$，选择 $2$ 的概率为 $q_2$，选择 $3$ 的概率为 $q_3$，而你不知道 $q_1,q_2,q_3$ 的值。\n\n我们都知道 $q_1+q_2+q_3=1$。如果 $q_1,q_2,q_3$ 是从所有可能的情况下均匀随机选择的，请计算你达到目标的概率。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 10^4$）。\n\n接下来的 $3$ 行每行包含 $3$ 个整数，这些行中的第 $i$ 行的第 $j$ 个整数为 $A_{i,j}$（$-20 \\le A_{i,j} \\le 20$）。\n\n接下来的 $n$ 行每行包含 $3$ 个实数，这些行中的第 $i$ 行的第 $j$ 个数为 $p_{i,j}$。保证 $p_{i,1}+p_{i,2}+p_{i,3}=1$ 且 $0 \\le p_{i,j}$。", "outputFormat": "输出问题的答案。保证答案永远不会是 $0$。\n\n如果你的答案的绝对误差或相对误差不超过 $10^{-2}$，则认为你的答案是正确的。形式上，设你的答案为 $a$，评测系统的答案为 $b$。当且仅当 $\\frac{|a-b|}{\\max(1,|b|)} \\leq 10^{-2}$ 时，你的答案被接受。\n\n", "hint": "在例子 $1$ 中，例如，$(q_1=1,q_2=0,q_3=0)$ 是可以的。在这种情况下，你的机器人将始终选择 $1$，所以无论机器人 $1$ 选择什么数字，得分总是 $1$，这足以达到你的目标。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10558", "type": "P", "difficulty": 4, "samples": [["1 0\n3", "1"], ["2 0\n2 1", "11"], ["2 0\n2 2", "00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] XOR Game", "background": "# statement updated:\n$z$ is the number of numbers whose values are $0$.", "description": "Alice and Bob are playing a game against each other.\n\nIn front of them are a multiset $\\{a_i\\}$ of non-negative integers and a single integer $x$. Each number in $a$ is $0$ or $2^i(0\\le i<k)$ before the game.\n\nThis game will be a turn-based game, and Alice will go first. In one person's turn, he or she will choose an integer from $a$. Let this number be $p$. Then this person will choose whether or not to make $x\\gets x\\oplus p$, then remove $p$ from $a$. Here, operation $\\oplus$ means bitwise xor.\n\nAlice wants to make $x$ as big as possible, and Bob wants to make $x$ as small as possible.\n\nYou are a bystander who wants to know the final value of $x$. However, the size of $a$ is a huge number. Formally, there are $b_i$ numbers whose values are $2^i$ in $a$ for all $0\\le i<k$, and $z$ numbers whose values are $0$. But you still want to challenge this impossible problem.\n\nIf Alice and Bob are smart enough, please output the final value of $x$.", "inputFormat": "The first line contains two integers $k,z(1\\le k\\le10^5,0\\le z\\le 10^9)$.\n\nThe next line contains $k$ integers, the $i$ -th integer is $b_{i-1}(0\\le b_{i-1}\\le10^9)$.", "outputFormat": "Output the answer in binary format. Note that you should output exactly $k$ digit from high to low even though this number has leading $0$s.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] XOR Game", "background": "# statement updated:\n$z$ is the number of numbers whose values are $0$.", "description": "Alice and Bob are playing a game against each other.\n\nIn front of them are a multiset $\\{a_i\\}$ of non-negative integers and a single integer $x$. Each number in $a$ is $0$ or $2^i(0\\le i<k)$ before the game.\n\nThis game will be a turn-based game, and Alice will go first. In one person's turn, he or she will choose an integer from $a$. Let this number be $p$. Then this person will choose whether or not to make $x\\gets x\\oplus p$, then remove $p$ from $a$. Here, operation $\\oplus$ means bitwise xor.\n\nAlice wants to make $x$ as big as possible, and Bob wants to make $x$ as small as possible.\n\nYou are a bystander who wants to know the final value of $x$. However, the size of $a$ is a huge number. Formally, there are $b_i$ numbers whose values are $2^i$ in $a$ for all $0\\le i<k$, and $z$ numbers whose values are $0$. But you still want to challenge this impossible problem.\n\nIf Alice and Bob are smart enough, please output the final value of $x$.", "inputFormat": "The first line contains two integers $k,z(1\\le k\\le10^5,0\\le z\\le 10^9)$.\n\nThe next line contains $k$ integers, the $i$ -th integer is $b_{i-1}(0\\le b_{i-1}\\le10^9)$.", "outputFormat": "Output the answer in binary format. Note that you should output exactly $k$ digit from high to low even though this number has leading $0$s.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] XOR Game", "background": "", "description": "Alice 和 Bob 正在进行一场游戏。\n\n在他们面前有一个多重集 $\\{a_i\\}$，其中包含非负整数，还有一个整数 $x$。在游戏开始前，$a$ 中的每个数字都是 $0$ 或 $2^i(0\\le i<k)$。\n\n这是一场回合制游戏，Alice 先开始。在一个人的回合中，他或她将从 $a$ 中选择一个整数。设这个数为 $p$。然后这个人可以选择是否执行 $x\\gets x\\oplus p$，接着从 $a$ 中移除 $p$。这里，操作 $\\oplus$ 表示按位异或。\n\nAlice 想让 $x$ 尽可能大，而 Bob 想让 $x$ 尽可能小。\n\n你是一个旁观者，想知道最终的 $x$ 值。然而，$a$ 的大小是一个巨大的数字。形式上，对于所有 $0\\le i<k$，有 $b_i$ 个数在 $a$ 中的值为 $2^i$，并且有 $z$ 个数的值为 $0$。但你仍然想挑战这个不可能的问题。\n\n如果 Alice 和 Bob 足够聪明，请输出最终的 $x$ 值。", "inputFormat": "第一行包含两个整数 $k,z(1\\le k\\le10^5,0\\le z\\le 10^9)$。\n\n下一行包含 $k$ 个整数，第 $i$ 个整数是 $b_{i-1}(0\\le b_{i-1}\\le10^9)$。", "outputFormat": "以二进制格式输出答案。注意，即使这个数字有前导 $0$，你也应该从高位到低位输出恰好 $k$ 位。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10559", "type": "P", "difficulty": 6, "samples": [["4 6 10\n2 4\n2 3\n4 3\n3 1\n4 1\n2 1\n0\n7\n1\n6\n2 4\n2 2\n1 3 3\n2 1\n1 1 9\n2 4\n2 2\n1 3 6\n2 4\n2 2", "8\n7\n17\n20\n19\n26\n25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] The Last Cumulonimbus Cloud", "background": "", "description": "Every April, the city is always shrouded under cumulonimbus clouds.\n\nThis city is connected by $n$ buildings and $m$ two-way streets. In order to facilitate people's travel, any two buildings can directly or indirectly reach each other through the streets. At the same time, no street connects the same building, and there is at most one street that connects each pair of buildings.\n\nThe pace of life in this city is very slow because the city layout is not very bulky.\n\nSpecifically,if we consider this city as an undirected graph $G$ ,it is guaranteed that for any non empty subgraph in this graph,there is at least one building inside it that connects up to 10 streets within the subgraph.\n\nThe rain is not stopping, and the number of cumulonimbus clouds is constantly increasing. At the beginning, there are $a_i$ cumulonimbus clouds above the $i$ -th building, but in the following $q$ days, one of the following two events will occur every day:\n\n- $\\text{1 x v}$ $v$ cumulonimbus clouds have been added over the $x$ -th building.\n- $\\text{2 x}$ you need to report how many cumulonimbus clouds are in total over all buildings directly connected to building $x$.", "inputFormat": "The first line contains three integers $n,m,q(1\\le n\\le 3\\times 10^5,1\\leq m\\leq 3\\times 10^6, 1\\leq q\\leq 2\\times 10^6)$.\n\nEach of the next $m$ lines contains two integers $x,y(1\\leq x,y\\leq n,x\\neq y)$, which represents a street connecting the $x$ -th and $y$ -th buildings.\n\nEach of the next $n$ lines contains an integer $a_i(0\\leq a_i\\leq 100)$.\n\nEach of the next $q$ lines contains two or three integers, if the first integer is $1$, it represents a first type of event, and the next two integers represent $x,v(0\\leq v\\leq 100)$. If the first integer is $2$, it represents a second type of event, the next integer represents $x$.", "outputFormat": "Several rows, each representing a query result for a second type of event.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] The Last Cumulonimbus Cloud", "background": "", "description": "Every April, the city is always shrouded under cumulonimbus clouds.\n\nThis city is connected by $n$ buildings and $m$ two-way streets. In order to facilitate people's travel, any two buildings can directly or indirectly reach each other through the streets. At the same time, no street connects the same building, and there is at most one street that connects each pair of buildings.\n\nThe pace of life in this city is very slow because the city layout is not very bulky.\n\nSpecifically,if we consider this city as an undirected graph $G$ ,it is guaranteed that for any non empty subgraph in this graph,there is at least one building inside it that connects up to 10 streets within the subgraph.\n\nThe rain is not stopping, and the number of cumulonimbus clouds is constantly increasing. At the beginning, there are $a_i$ cumulonimbus clouds above the $i$ -th building, but in the following $q$ days, one of the following two events will occur every day:\n\n- $\\text{1 x v}$ $v$ cumulonimbus clouds have been added over the $x$ -th building.\n- $\\text{2 x}$ you need to report how many cumulonimbus clouds are in total over all buildings directly connected to building $x$.", "inputFormat": "The first line contains three integers $n,m,q(1\\le n\\le 3\\times 10^5,1\\leq m\\leq 3\\times 10^6, 1\\leq q\\leq 2\\times 10^6)$.\n\nEach of the next $m$ lines contains two integers $x,y(1\\leq x,y\\leq n,x\\neq y)$, which represents a street connecting the $x$ -th and $y$ -th buildings.\n\nEach of the next $n$ lines contains an integer $a_i(0\\leq a_i\\leq 100)$.\n\nEach of the next $q$ lines contains two or three integers, if the first integer is $1$, it represents a first type of event, and the next two integers represent $x,v(0\\leq v\\leq 100)$. If the first integer is $2$, it represents a second type of event, the next integer represents $x$.", "outputFormat": "Several rows, each representing a query result for a second type of event.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] The Last Cumulonimbus Cloud", "background": null, "description": "每年四月，这座城市总是被积雨云笼罩。\n\n这座城市由 $n$ 座建筑和 $m$ 条双向街道连接。为了方便人们出行，任何两座建筑都可以通过街道直接或间接到达。同时，没有街道连接同一座建筑，并且每对建筑之间最多有一条街道连接。\n\n由于城市布局不太庞大，这座城市的生活节奏非常缓慢。\n\n具体来说，如果我们将这座城市视为无向图 $G$，则保证在该图的任何非空子图中，至少有一座建筑在子图内连接了最多 10 条街道。\n\n雨不停地下，积雨云的数量不断增加。起初，第 $i$ 座建筑上方有 $a_i$ 个积雨云，但在接下来的 $q$ 天中，每天会发生以下两种事件之一：\n\n- $\\text{1 x v}$ 表示在第 $x$ 座建筑上方增加了 $v$ 个积雨云。\n- $\\text{2 x}$ 表示需要报告直接连接到建筑 $x$ 的所有建筑上方的积雨云总数。", "inputFormat": "第一行包含三个整数 $n,m,q(1\\le n\\le 3\\times 10^5,1\\leq m\\leq 3\\times 10^6, 1\\leq q\\leq 2\\times 10^6)$。\n\n接下来的 $m$ 行中的每一行包含两个整数 $x,y(1\\leq x,y\\leq n,x \\neq y)$，表示连接第 $x$ 座和第 $y$ 座建筑的街道。\n\n接下来的 $n$ 行中的每一行包含一个整数 $a_i(0\\leq a_i\\leq 100)$。\n\n接下来的 $q$ 行中的每一行包含两个或三个整数，如果第一个整数是 $1$，则表示第一种类型的事件，接下来的两个整数表示 $x,v(0\\leq v\\leq 100)$。如果第一个整数是 $2$，则表示第二种类型的事件，接下来的整数表示 $x$。", "outputFormat": "多行，每行表示第二种类型事件的查询结果。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10560", "type": "P", "difficulty": 6, "samples": [["5\n3 1 5 4 2\n1 2\n2 3\n3 4\n4 5\n", "3 1 5 4 2"], ["9\n9 2 6 3 5 7 1 4 8\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n4 8\n4 9\n", "9 2 1 3 6 4 8 5 7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Holes and Balls", "background": "", "description": "You are given $n$ balls, the $i$ -th ball's value is $p_i$. It's guaranteed that $p_1,p_2,\\dots,p_n$ is a permutation of $1,2,3\\dots,n$.\n    \n    \n    \nThere is also a rooted tree of $n$ vertices, each of the vertices is a hole, and each hole can only hold one ball.\n    \n    \n    \nThe tree's root is the first vertex.\n    \n    \n    \nNow you need to fill the holes with the balls.\n    \nYou need to throw each ball in order of $1$ to $n$ in the following steps:\n\n1. Throw the ball into vertex $1$.\n2. Let the vertex where the ball is be $p$.\n3. If the $p$ -th vertex has already been filled with other balls, you need to choose a vertex $x$ and throw the ball into the $x$ -th vertex, then return to step $2$. You need to guarantee that the $x$ -th vertex is the $p$ -th vertex's son and at least one vertex in the subtree of the $x$ -th vertex is not filled.\n4. Otherwise, the ball will fill the $p$ -th vertex.\n\nAfter throwing all the balls, let $a_i$ express the value of the ball in the $i$ -th vertex.\n    \n    \n    \nYou need to find the minimum lexicographical order of $\\{a_n\\}$.\n    \n    \n    \nWe define $dep_i$ as the number of vertices on the path from the $i$ -th vertex to the tree's root(the first vertex).\n    \n    \n    \nSpecially, for any two vertices $x<y$, it's guaranteed that $dep_x\\le dep_y$.\n", "inputFormat": "    \nThe first line contains a single integer $n(1\\le n\\le 5\\times 10^5)$ - the number of vertices in this tree.\n    \n    \n    \nThe next line contains $n$ numbers, the $i$ -th number is $p_i(1\\le p_i\\le n)$. It's guaranteed that $p_1,p_2,\\dots,p_n$ is a permutation of $1,2,3\\dots,n$.\n    \n    \n    \nThe next $n-1$ lines contain a description of the tree's edges. The $i$ -th of these lines contains two integers $u_i$ and $v_i(1\\le u_i,v_i\\le n) $ - the numbers of vertices connected by the $i$ -th edge.\n    \n    \n    \nIt is guaranteed that the given edges form a tree.\n    \n    \n    \nAnd for any vertices $x<y$, it's guaranteed that $dep_x\\le dep_y$.", "outputFormat": "\nOutput $n$ integers, the minimum lexicographical order of $\\{a_n\\}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Holes and Balls", "background": "", "description": "You are given $n$ balls, the $i$ -th ball's value is $p_i$. It's guaranteed that $p_1,p_2,\\dots,p_n$ is a permutation of $1,2,3\\dots,n$.\n    \n    \n    \nThere is also a rooted tree of $n$ vertices, each of the vertices is a hole, and each hole can only hold one ball.\n    \n    \n    \nThe tree's root is the first vertex.\n    \n    \n    \nNow you need to fill the holes with the balls.\n    \nYou need to throw each ball in order of $1$ to $n$ in the following steps:\n\n1. Throw the ball into vertex $1$.\n2. Let the vertex where the ball is be $p$.\n3. If the $p$ -th vertex has already been filled with other balls, you need to choose a vertex $x$ and throw the ball into the $x$ -th vertex, then return to step $2$. You need to guarantee that the $x$ -th vertex is the $p$ -th vertex's son and at least one vertex in the subtree of the $x$ -th vertex is not filled.\n4. Otherwise, the ball will fill the $p$ -th vertex.\n\nAfter throwing all the balls, let $a_i$ express the value of the ball in the $i$ -th vertex.\n    \n    \n    \nYou need to find the minimum lexicographical order of $\\{a_n\\}$.\n    \n    \n    \nWe define $dep_i$ as the number of vertices on the path from the $i$ -th vertex to the tree's root(the first vertex).\n    \n    \n    \nSpecially, for any two vertices $x<y$, it's guaranteed that $dep_x\\le dep_y$.\n", "inputFormat": "    \nThe first line contains a single integer $n(1\\le n\\le 5\\times 10^5)$ - the number of vertices in this tree.\n    \n    \n    \nThe next line contains $n$ numbers, the $i$ -th number is $p_i(1\\le p_i\\le n)$. It's guaranteed that $p_1,p_2,\\dots,p_n$ is a permutation of $1,2,3\\dots,n$.\n    \n    \n    \nThe next $n-1$ lines contain a description of the tree's edges. The $i$ -th of these lines contains two integers $u_i$ and $v_i(1\\le u_i,v_i\\le n) $ - the numbers of vertices connected by the $i$ -th edge.\n    \n    \n    \nIt is guaranteed that the given edges form a tree.\n    \n    \n    \nAnd for any vertices $x<y$, it's guaranteed that $dep_x\\le dep_y$.", "outputFormat": "\nOutput $n$ integers, the minimum lexicographical order of $\\{a_n\\}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Holes and Balls", "background": "", "description": "给定 $n$ 个球，第 $i$ 个球的值为 $p_i$。保证 $p_1,p_2,\\dots,p_n$ 是 $1,2,3\\dots,n$ 的一个排列。\n\n有一棵有根树，包含 $n$ 个顶点，每个顶点是一个洞，每个洞只能容纳一个球。\n\n树的根是第一个顶点。\n\n现在你需要用这些球填满洞。\n\n你需要按 $1$ 到 $n$ 的顺序依次投掷每个球，步骤如下：\n\n1. 将球投到顶点 $1$。\n2. 设球所在的顶点为 $p$。\n3. 如果第 $p$ 个顶点已经被其他球填满，你需要选择一个顶点 $x$，将球投到第 $x$ 个顶点，然后返回步骤 $2$。你需要保证第 $x$ 个顶点是第 $p$ 个顶点的子节点，并且第 $x$ 个顶点的子树中至少有一个顶点未被填满。\n4. 否则，球将填满第 $p$ 个顶点。\n\n投完所有球后，用 $a_i$ 表示第 $i$ 个顶点中球的值。\n\n你需要找到 $\\{a_n\\}$ 的最小字典序。\n\n我们定义 $dep_i$ 为从第 $i$ 个顶点到树根（第一个顶点）的路径上的顶点数。\n\n特别地，对于任意两个顶点 $x<y$，保证 $dep_x\\le dep_y$。\n", "inputFormat": "第一行包含一个整数 $n(1\\le n\\le 5\\times 10^5)$，表示这棵树的顶点数。\n\n接下来一行包含 $n$ 个数字，第 $i$ 个数字是 $p_i(1\\le p_i\\le n)$。保证 $p_1,p_2,\\dots,p_n$ 是 $1,2,3\\dots,n$ 的一个排列。\n\n接下来的 $n-1$ 行描述了树的边。第 $i$ 行包含两个整数 $u_i$ 和 $v_i(1\\le u_i,v_i\\le n)$，表示第 $i$ 条边连接的顶点编号。\n\n保证给定的边构成一棵树。\n\n并且对于任意顶点 $x<y$，保证 $dep_x\\le dep_y$。", "outputFormat": "输出 $n$ 个整数，表示 $\\{a_n\\}$ 的最小字典序。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10561", "type": "P", "difficulty": 4, "samples": [["4 4 3\n1 2\n3 4\n1 4", "10"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "ICPC", "状压 DP", "西安"], "title": "[ICPC 2024 Xi'an I] Smart Quality Inspector", "background": "", "description": "    \nElla has a factory. One day, her factory is facing a product quality inspection.\n    \n    \n    \nHer factory has $N$ production lines. Among the $N$ production lines, $N-K$ of them are qualified, and the other $K$ lines are unqualified. The fine of the $i$ -th$(1\\leq i\\leq K)$ unqualified line is $i$ Yuan.\n    \n    \n    \nThere are $M$ quality inspectors here. For the $j$ -th$(1\\leq j\\leq M)$ quality inspector, he will inspect from the $l_i$ -th line to the $r_i$ -th line and find the unqualified production line with the largest fine among them, then impose this fine on Ella.\n    \n    \n    \nElla does not want to receive so many fines, so she decides to renumber the $N$ production lines to receive the least amount of fines. Please help her.\n    \n    \n    \nIn simple terms:\n    \n    \n    \nYou have a sequence $A$ of length $N$, $A=[1,2,3,...,K,0,0,0,...,0]$. Here $N,K$ are given.\n    \n    \n    \nThere are $M$ pairs of integers, each pair consists of two numbers $l_i,r_i$.\n    \n    \n    \nYou need to rearrange sequence $A$ to minimize the following:\n    \n    \n    \n$$\\sum_{i=1}^M \\max_{j=l_i}^{r_i} (A_{j})$$", "inputFormat": "\n    \nThe first line contains three integers $N,K,M(1\\leq K\\leq N\\leq 20,1\\leq M\\leq 10^5)$, described in the statement.\n    \n    \n    \nThen $M$ lines, the $i$ -th line of them contains two integers $l_i,r_i(1\\leq l_i\\leq r_i\\leq N)$.\n    ", "outputFormat": "\n    \nAn integer indicates the answer.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Smart Quality Inspector", "background": "", "description": "    \nElla has a factory. One day, her factory is facing a product quality inspection.\n    \n    \n    \nHer factory has $N$ production lines. Among the $N$ production lines, $N-K$ of them are qualified, and the other $K$ lines are unqualified. The fine of the $i$ -th$(1\\leq i\\leq K)$ unqualified line is $i$ Yuan.\n    \n    \n    \nThere are $M$ quality inspectors here. For the $j$ -th$(1\\leq j\\leq M)$ quality inspector, he will inspect from the $l_i$ -th line to the $r_i$ -th line and find the unqualified production line with the largest fine among them, then impose this fine on Ella.\n    \n    \n    \nElla does not want to receive so many fines, so she decides to renumber the $N$ production lines to receive the least amount of fines. Please help her.\n    \n    \n    \nIn simple terms:\n    \n    \n    \nYou have a sequence $A$ of length $N$, $A=[1,2,3,...,K,0,0,0,...,0]$. Here $N,K$ are given.\n    \n    \n    \nThere are $M$ pairs of integers, each pair consists of two numbers $l_i,r_i$.\n    \n    \n    \nYou need to rearrange sequence $A$ to minimize the following:\n    \n    \n    \n$$\\sum_{i=1}^M \\max_{j=l_i}^{r_i} (A_{j})$$", "inputFormat": "\n    \nThe first line contains three integers $N,K,M(1\\leq K\\leq N\\leq 20,1\\leq M\\leq 10^5)$, described in the statement.\n    \n    \n    \nThen $M$ lines, the $i$ -th line of them contains two integers $l_i,r_i(1\\leq l_i\\leq r_i\\leq N)$.\n    ", "outputFormat": "\n    \nAn integer indicates the answer.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Smart Quality Inspector", "background": "", "description": "Ella 有一家工厂。一天，她的工厂面临产品质量检查。  她的工厂有 $N$ 条生产线。在这 $N$ 条生产线中，有 $N-K$ 条是合格的，另外 $K$ 条是不合格的。第 $i$ 条（$1\\leq i\\leq K$）不合格生产线的罚款为 $i$ 元。  这里有 $M$ 名质量检查员。对于第 $j$ 名（$1\\leq j\\leq M$）质量检查员，他将检查从第 $l_i$ 条到第 $r_i$ 条的生产线，并在其中找到罚款最高的不合格生产线，然后将此罚款施加给 Ella。  Ella 不想收到太多罚款，所以她决定重新编号这 $N$ 条生产线以使收到的罚款最少。请帮助她。  简单来说：  你有一个长度为 $N$ 的序列 $A$，$A=[1,2,3,...,K,0,0,0,...,0]$。这里 $N,K$ 已知。  有 $M$ 对整数，每对由两个数字 $l_i,r_i$ 组成。  你需要重新排列序列 $A$ 以最小化以下值：  $$\\sum_{i=1}^M \\max_{j=l_i}^{r_i} (A_{j})$$", "inputFormat": "第一行包含三个整数 $N,K,M(1\\leq K\\leq N\\leq 20,1\\leq M\\leq 10^5)$，如题所述。  接下来 $M$ 行，每行包含两个整数 $l_i,r_i(1\\leq l_i\\leq r_i\\leq N)$。", "outputFormat": "一个整数，表示答案。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10562", "type": "P", "difficulty": 3, "samples": [["6 8", "24"], ["5 5\n", "15"], ["1 999999", "500000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Triangle", "background": "", "description": "There are three points $A(a, 0)$, $B(0, b)$, $C(0, 0)$ in the plane rectangular coordinate system. Define the size of triangle $ABC$ as the number of squares that belong to it.\n    \n    \n    \nFor integers $x,y$, one square is defined by four points $(x, y)$, $(x + 1, y)$, $(x, y + 1)$, $(x + 1, y + 1)$. We consider a square to belong to a triangle if half or more of it is inside the triangle.\n    \n    \n    \nFor example, when $a = 8, b = 6$, the size of triangle $ABC$ will be $24$. The image below shows which squares are counted in the triangle.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3fnqi74y.png)", "inputFormat": "\n    \nThe first and only line contains two integers $a\\ (1\\le a\\le 10^6)$ and $b\\ (1\\le b\\le 10^6)$.", "outputFormat": "\nPrint an integer: the size of triangle $ABC$.\n    ", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Triangle", "background": "", "description": "There are three points $A(a, 0)$, $B(0, b)$, $C(0, 0)$ in the plane rectangular coordinate system. Define the size of triangle $ABC$ as the number of squares that belong to it.\n    \n    \n    \nFor integers $x,y$, one square is defined by four points $(x, y)$, $(x + 1, y)$, $(x, y + 1)$, $(x + 1, y + 1)$. We consider a square to belong to a triangle if half or more of it is inside the triangle.\n    \n    \n    \nFor example, when $a = 8, b = 6$, the size of triangle $ABC$ will be $24$. The image below shows which squares are counted in the triangle.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3fnqi74y.png)", "inputFormat": "\n    \nThe first and only line contains two integers $a\\ (1\\le a\\le 10^6)$ and $b\\ (1\\le b\\le 10^6)$.", "outputFormat": "\nPrint an integer: the size of triangle $ABC$.\n    ", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Triangle", "background": "", "description": "在平面直角坐标系中有三个点 $A(a, 0)$、$B(0, b)$、$C(0, 0)$。定义三角形 $ABC$ 的大小为属于它的正方形的数量。\n\n对于整数 $x, y$，一个正方形由四个点 $(x, y)$、$(x + 1, y)$、$(x, y + 1)$、$(x + 1, y + 1)$ 定义。如果一个正方形有一半或更多的部分在三角形内，我们认为它属于三角形。\n\n例如，当 $a = 8, b = 6$ 时，三角形 $ABC$ 的大小为 $24$。下图显示了哪些正方形被计入三角形中。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3fnqi74y.png)", "inputFormat": "第一行包含两个整数 $a\\ (1\\le a\\le 10^6)$ 和 $b\\ (1\\le b\\le 10^6)$。", "outputFormat": "输出一个整数：三角形 $ABC$ 的大小。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10563", "type": "P", "difficulty": 7, "samples": [["10\n1 1\n1 2\n2 2\n4 4\n3 3\n5 5\n1 8\n20 20\n100 100\n500 500", "0\n1\n10\n241456\n964\n200419152\n448\n985051144\n370696900\n357517517"]], "limits": {"time": [3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Yet Another Maximum Matching Counting Problem", "background": "", "description": "There is a two-dimensional plane.\n    \n    \n    \nYou have a set of points $\\{(x_i,y_i)\\}$ that satisfies $1\\le x_i\\le n, 1\\le y_i\\le m$ (Both $x_i$ and $y_i$ are integers), and there are no two points with the same coordinates.\n    \n    \n    \nIf two points have the same horizontal or vertical coordinates, we will connect an edge between these two points. This forms a graph.\n    \n    \n    \nYou need to find the sum of the maximum number of matches in the graphs formed by all possible $2^{nm}-1$ non empty sets, and output the result modulo $998244353$.\n    \n    \n    \nHere, the maximum number of matches in a graph is defined as: selecting the most edges so that there are no common vertices between any two edges.", "inputFormat": "\nThere are multiple testcases in this problem.\n    \n    \n    \nThe first line contains an integer $T(1\\le T\\le 100)$, which represents the number of testcases.\n    \n    \n    \nEach of the testcases contains two integers $n,m(1\\leq n,m\\leq 500)$.", "outputFormat": " \nFor each of the testcases, print an integer representing the result modulo $998244353$.\n    ", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Yet Another Maximum Matching Counting Problem", "background": "", "description": "There is a two-dimensional plane.\n    \n    \n    \nYou have a set of points $\\{(x_i,y_i)\\}$ that satisfies $1\\le x_i\\le n, 1\\le y_i\\le m$ (Both $x_i$ and $y_i$ are integers), and there are no two points with the same coordinates.\n    \n    \n    \nIf two points have the same horizontal or vertical coordinates, we will connect an edge between these two points. This forms a graph.\n    \n    \n    \nYou need to find the sum of the maximum number of matches in the graphs formed by all possible $2^{nm}-1$ non empty sets, and output the result modulo $998244353$.\n    \n    \n    \nHere, the maximum number of matches in a graph is defined as: selecting the most edges so that there are no common vertices between any two edges.", "inputFormat": "\nThere are multiple testcases in this problem.\n    \n    \n    \nThe first line contains an integer $T(1\\le T\\le 100)$, which represents the number of testcases.\n    \n    \n    \nEach of the testcases contains two integers $n,m(1\\leq n,m\\leq 500)$.", "outputFormat": " \nFor each of the testcases, print an integer representing the result modulo $998244353$.\n    ", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Yet Another Maximum Matching Counting Problem", "background": "", "description": "在一个二维平面上，\n\n你有一组点 $\\{(x_i,y_i)\\}$，满足 $1\\le x_i\\le n, 1\\le y_i\\le m$（$x_i$ 和 $y_i$ 都是整数），并且没有两个点具有相同的坐标。\n\n如果两个点具有相同的水平或垂直坐标，我们将在这两个点之间连接一条边。这将形成一个图。\n\n你需要找到由所有可能的 $2^{nm}-1$ 个非空集合形成的图中的最大匹配数之和，并输出结果对 $998244353$ 取模。\n\n在这里，图中的最大匹配数定义为：选择最多的边，使得任何两条边之间没有公共顶点。", "inputFormat": "\n这个问题有多个测试用例。\n\n第一行包含一个整数 $T(1\\le T\\le 100)$，表示测试用例的数量。\n\n每个测试用例包含两个整数 $n,m(1\\leq n,m\\leq 500)$。", "outputFormat": "\n对于每个测试用例，输出一个整数，表示结果对 $998244353$ 取模。\n", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10564", "type": "P", "difficulty": 4, "samples": [["4\n1 aaa 1\n2 aa\n1 ab 2\n2 bb", "1\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Rubbish Sorting", "background": "", "description": "\nBob has many pieces of rubbish. One day, he wants to sort them.\n    \n    \n    \nFor every piece of rubbish, its type is expressed as a positive integer.\n    \n    \n    \nHe has $q$ operations. For each operation, it is one of the following two operations.\n\n- `1 s x` He tells you that the piece of rubbish named $s$ has a type of $x$.\n- `2 s` He wants to ask you the type of rubbish $s$.\n\n\n    \nBut his memories are not always accurate.\n    \n    \n    \nFor each operation $2$, $s$ may not have appeared in the previous operation $1$s.\n    \n    \n    \nWe define the similarity of two strings $s_1$ and $s_2$ as $\\sum_{i=1}^{\\min\\{|s_1|,|s_2|\\}} [s_{1,i}=s_{2,i}]$.\n    \n    \n    \nHere all the strings' indexes start at $1$.\n    \n    \n    \nFor a string $s$, its type is the type of string which has the maximum similarity to $s$ among all the strings that have appeared in the previous operations $1$s. Note that if there are multiple strings that all have the maximum similarity to $s$, the type of $s$ is the minimum type of these strings' type.\n    \n    \n    \nNow, he wants you to solve this problem.\n    ", "inputFormat": "\nThe first line contains an integer $q(1\\le q\\le 3\\times 10^5)$, which is the number of operations.\n    \n    \n    \nNext $q$ lines contain operations, one per line. They correspond to the description given in the statement.\n    \n    \n    \nIt is guaranteed that for every operation $2$ there is at least one operation $1$ before it.\n    \n    \n    \nBut some pieces of rubbish will have more than one type, you can consider it as the minimum type you have read.\n    \n    \n    \nThe rubbish's names only consist of lowercase Latin letters.\n    \n    \n    \n$1 \\le |s| \\le 5, 1 \\le x \\le 10^9$", "outputFormat": "\n    \nFor every operation $2$, you should print an integer in a single line that is the rubbish $s$'s type.\n    ", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Rubbish Sorting", "background": "", "description": "\nBob has many pieces of rubbish. One day, he wants to sort them.\n    \n    \n    \nFor every piece of rubbish, its type is expressed as a positive integer.\n    \n    \n    \nHe has $q$ operations. For each operation, it is one of the following two operations.\n\n- `1 s x` He tells you that the piece of rubbish named $s$ has a type of $x$.\n- `2 s` He wants to ask you the type of rubbish $s$.\n\n\n    \nBut his memories are not always accurate.\n    \n    \n    \nFor each operation $2$, $s$ may not have appeared in the previous operation $1$s.\n    \n    \n    \nWe define the similarity of two strings $s_1$ and $s_2$ as $\\sum_{i=1}^{\\min\\{|s_1|,|s_2|\\}} [s_{1,i}=s_{2,i}]$.\n    \n    \n    \nHere all the strings' indexes start at $1$.\n    \n    \n    \nFor a string $s$, its type is the type of string which has the maximum similarity to $s$ among all the strings that have appeared in the previous operations $1$s. Note that if there are multiple strings that all have the maximum similarity to $s$, the type of $s$ is the minimum type of these strings' type.\n    \n    \n    \nNow, he wants you to solve this problem.\n    ", "inputFormat": "\nThe first line contains an integer $q(1\\le q\\le 3\\times 10^5)$, which is the number of operations.\n    \n    \n    \nNext $q$ lines contain operations, one per line. They correspond to the description given in the statement.\n    \n    \n    \nIt is guaranteed that for every operation $2$ there is at least one operation $1$ before it.\n    \n    \n    \nBut some pieces of rubbish will have more than one type, you can consider it as the minimum type you have read.\n    \n    \n    \nThe rubbish's names only consist of lowercase Latin letters.\n    \n    \n    \n$1 \\le |s| \\le 5, 1 \\le x \\le 10^9$", "outputFormat": "\n    \nFor every operation $2$, you should print an integer in a single line that is the rubbish $s$'s type.\n    ", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Rubbish Sorting", "background": null, "description": "Bob 有很多垃圾。有一天，他想要对它们进行分类。\n\n对于每一件垃圾，其类型用一个正整数表示。\n\n他有 $q$ 个操作。对于每个操作，可能是以下两种操作之一。\n\n- `1 s x` 他告诉你，名为 $s$ 的垃圾类型为 $x$。\n- `2 s` 他想询问你垃圾 $s$ 的类型。\n\n但他的记忆并不总是准确的。\n\n对于每个操作 $2$，$s$ 可能没有在之前的操作 $1$ 中出现过。\n\n我们定义两个字符串 $s_1$ 和 $s_2$ 的相似度为 $\\sum_{i=1}^{\\min\\{|s_1|,|s_2|\\}} [s_{1,i}=s_{2,i}]$。\n\n这里所有字符串的索引从 $1$ 开始。\n\n对于一个字符串 $s$，其类型是与 $s$ 相似度最大的字符串的类型，在所有之前操作 $1$ 中出现过的字符串中。如果有多个字符串与 $s$ 的相似度都最大，那么 $s$ 的类型是这些字符串类型中的最小值。\n\n现在，他希望你解决这个问题。", "inputFormat": "第一行包含一个整数 $q(1\\le q\\le 3\\times 10^5)$，表示操作的数量。\n\n接下来的 $q$ 行包含操作，每行一个。它们对应于题目中给出的描述。\n\n保证对于每个操作 $2$，在它之前至少有一个操作 $1$。\n\n但有些垃圾会有多种类型，你可以将其视为你读到的最小类型。\n\n垃圾的名称仅由小写拉丁字母组成。\n\n$1 \\le |s| \\le 5, 1 \\le x \\le 10^9$。", "outputFormat": "对于每个操作 $2$，你应该在单独的一行中输出一个整数，即垃圾 $s$ 的类型。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10565", "type": "P", "difficulty": 2, "samples": [["2\n1 1\n3 2", "YES\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "ICPC", "西安"], "title": "[ICPC 2024 Xi'an I] Chained Lights", "background": "", "description": "\nYou have $n$ lights in a row. Initially, they are all off.\n    \n    \n    \nYou are going to press these $n$ lights one by one. When you press light $i$, light $i$ will switch its state, which means it will turn on if it's off and turn off if it's on, and then for every $j$ satisfied $i|j,i< j\\le n$, press light $j$ once.\n    \n    \n    \nFor example, if $n=4$, when you press light $1$, light $1$ will turn on, and then you will press light $2,3,4$. Since you pressed light $2$, light $2$ will turn on and you will press light $4$, which will cause light 4 to turn on. After all the operations, lights $1,2,3$ will be turned on and light $4$ is still off.\n    \n    \n    \nYou will press these $n$ lights and do the operations as mentioned above one by one. After all the operations, you want to know whether light $k$ is on or off.\n    \n    \n    \nYou can also use the following code to understand the meaning of the problem:\n\n```cpp\nvoid press(int x)\n{\n    light[x]^=1;\n    for (int y=x+x;y<=n;y+=x) press(y);\n}\nfor (int i=1;i<=n;i++) press(i);\n```", "inputFormat": "\nThere are multiple testcases.\n    \n    \n    \nThe first line contains an integer $T(1\\le T\\le10^5)$, which represents the number of testcases.\n    \n    \n    \nEach of the testcases contains two integers $n,k(1\\le k\\le n\\le10^6)$ in a single line.", "outputFormat": "    \n    \nFor each testcase, if light $k$ is turned on in the end, output $\\text{YES}$, otherwise output $\\text{NO}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Xi'an I] Chained Lights", "background": "", "description": "\nYou have $n$ lights in a row. Initially, they are all off.\n    \n    \n    \nYou are going to press these $n$ lights one by one. When you press light $i$, light $i$ will switch its state, which means it will turn on if it's off and turn off if it's on, and then for every $j$ satisfied $i|j,i< j\\le n$, press light $j$ once.\n    \n    \n    \nFor example, if $n=4$, when you press light $1$, light $1$ will turn on, and then you will press light $2,3,4$. Since you pressed light $2$, light $2$ will turn on and you will press light $4$, which will cause light 4 to turn on. After all the operations, lights $1,2,3$ will be turned on and light $4$ is still off.\n    \n    \n    \nYou will press these $n$ lights and do the operations as mentioned above one by one. After all the operations, you want to know whether light $k$ is on or off.\n    \n    \n    \nYou can also use the following code to understand the meaning of the problem:\n\n```cpp\nvoid press(int x)\n{\n    light[x]^=1;\n    for (int y=x+x;y<=n;y+=x) press(y);\n}\nfor (int i=1;i<=n;i++) press(i);\n```", "inputFormat": "\nThere are multiple testcases.\n    \n    \n    \nThe first line contains an integer $T(1\\le T\\le10^5)$, which represents the number of testcases.\n    \n    \n    \nEach of the testcases contains two integers $n,k(1\\le k\\le n\\le10^6)$ in a single line.", "outputFormat": "    \n    \nFor each testcase, if light $k$ is turned on in the end, output $\\text{YES}$, otherwise output $\\text{NO}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Xi'an I] Chained Lights", "background": null, "description": "你有 $n$ 盏灯排成一行。最初，它们都是关闭的。  你将逐个按下这 $n$ 盏灯。当你按下灯 $i$ 时，灯 $i$ 将切换其状态，这意味着如果它是关闭的，它将打开；如果它是打开的，它将关闭。然后对于每个满足 $i|j, i < j \\le n$ 的 $j$，按下灯 $j$ 一次。  例如，如果 $n=4$，当你按下灯 $1$ 时，灯 $1$ 将打开，然后你将按下灯 $2,3,4$。由于你按下了灯 $2$，灯 $2$ 将打开，你将按下灯 $4$，这将导致灯 $4$ 打开。经过所有操作后，灯 $1,2,3$ 将打开，而灯 $4$ 仍然关闭。  你将逐个按下这 $n$ 盏灯并进行上述操作。经过所有操作后，你想知道灯 $k$ 是开着还是关着的。  你也可以使用以下代码来理解问题的含义： \n```cpp \nvoid press(int x) {\n    light[x]^=1;\n    for (int y=x+x; y<=n; y+=x) press(y);\n}\nfor (int i=1; i<=n; i++) press(i);\n```", "inputFormat": "有多个测试用例。  第一行包含一个整数 $T(1 \\le T \\le 10^5)$，表示测试用例的数量。  每个测试用例包含两个整数 $n, k(1 \\le k \\le n \\le 10^6)$，在一行中。", "outputFormat": "对于每个测试用例，如果灯 $k$ 最终是打开的，输出 `YES`，否则输出 `NO`。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10566", "type": "P", "difficulty": 1, "samples": [["AA0aa", "31"], ["3kyOu", "89"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「Daily OI Round 4」Analysis", "background": "", "description": "小 C 的信息技术老师给小 C 布置了一项作业，作业内容如下：\n\n> 有一个字符串，包含大小写字母和数字。你可以把任意一个字符变成另外一个字符，设变化之前字符的 ASCII 码为 $a$，变化之后字符的 ASCII 码为 $b$，则这次变化消耗 $|a-b|$ 的时间。你需要把整个字符串变成只包含大写字母的字符串。\n\n小 C 还有语文数学英语等很多其他重要作业要做，为了节省时间，你需要计算小 C 最少需要多久才能令字符串只包含大写字母。", "inputFormat": "一行一个字符串 $s$ 表示老师给的字符串。", "outputFormat": "一行一个非负整数 $t$，表示令字符串只包含大写字母最少花费多少时间。", "hint": "#### 【样例解释】\n\n对于第一组样例，最好的办法是变成 $\\texttt{AAAZZ}$，这样的话消耗就为 $0+0+|48-65|+|97-90|+|97-90|=31$，容易证明不存在更优的解法。\n\n其中 $48$ 是字符 $\\texttt{0}$ 的 ASCII 码，$65$ 是字符 $\\texttt{A}$ 的 ASCII 码，$90$ 是字符 $\\texttt{Z}$ 的 ASCII 码，$97$ 是字符 $\\texttt{a}$ 的 ASCII 码。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n设 $len$ 为字符串 $s$ 的长度。\n\n| $\\text{Subtask}$ | 分值 | $len \\le$ |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $10$ | $3$ |\n| $1$ | $30$ | $10$ |\n| $2$ | $60$ | $10^5$ |\n\n对于全部数据，保证：$1 \\le len \\le 10^5$，且 $s$ 中只包含大小写字母和数字。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 4」Analysis", "background": "", "description": "小 C 的信息技术老师给小 C 布置了一项作业，作业内容如下：\n\n> 有一个字符串，包含大小写字母和数字。你可以把任意一个字符变成另外一个字符，设变化之前字符的 ASCII 码为 $a$，变化之后字符的 ASCII 码为 $b$，则这次变化消耗 $|a-b|$ 的时间。你需要把整个字符串变成只包含大写字母的字符串。\n\n小 C 还有语文数学英语等很多其他重要作业要做，为了节省时间，你需要计算小 C 最少需要多久才能令字符串只包含大写字母。", "inputFormat": "一行一个字符串 $s$ 表示老师给的字符串。", "outputFormat": "一行一个非负整数 $t$，表示令字符串只包含大写字母最少花费多少时间。", "hint": "#### 【样例解释】\n\n对于第一组样例，最好的办法是变成 $\\texttt{AAAZZ}$，这样的话消耗就为 $0+0+|48-65|+|97-90|+|97-90|=31$，容易证明不存在更优的解法。\n\n其中 $48$ 是字符 $\\texttt{0}$ 的 ASCII 码，$65$ 是字符 $\\texttt{A}$ 的 ASCII 码，$90$ 是字符 $\\texttt{Z}$ 的 ASCII 码，$97$ 是字符 $\\texttt{a}$ 的 ASCII 码。\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n设 $len$ 为字符串 $s$ 的长度。\n\n| $\\text{Subtask}$ | 分值 | $len \\le$ |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $10$ | $3$ |\n| $1$ | $30$ | $10$ |\n| $2$ | $60$ | $10^5$ |\n\n对于全部数据，保证：$1 \\le len \\le 10^5$，且 $s$ 中只包含大小写字母和数字。", "locale": "zh-CN"}}}
{"pid": "P10567", "type": "P", "difficulty": 2, "samples": [["2", "Yes"], ["755689", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「Daily OI Round 4」Square", "background": "", "description": "小 A 给了你一个边长为 $n$ 的正方形网格，你需要把 $1 \\sim n \\times n$ 这些编号填入这个网格里面，满足每一行的编号加起来都是奇数，每一列的编号加起来都是偶数。\n\n在填之前，你想知道是否有任何一种解法满足上述条件，如果可以，输出 `Yes`；否则，输出 `No`。", "inputFormat": "一行一个正整数 $n$，表示正方形网格的边长。", "outputFormat": "一行一个字符串，`Yes` 或 `No`。", "hint": "#### 【样例解释】\n\n对于第一组样例，设 $A$ 表示正方形网格，则有 $A_{1,1}=1,A_{1,2}=2,A_{2,1}=3,A_{2,2}=4$ 的解法。\n\n对于第二组样例，可以证明无解。\n\n#### 【数据范围】\n  \n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n \\le$|\n| :-----------: | :-------------:|:-----------: |\n|$0$|$10$|$10$|\n|$1$|$20$|$10^6$|\n|$2$|$70$|$10^{18}$|\n\n对于全部数据，保证：$1 \\le n \\le 10^{18}$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 4」Square", "background": "", "description": "小 A 给了你一个边长为 $n$ 的正方形网格，你需要把 $1 \\sim n \\times n$ 这些编号填入这个网格里面，满足每一行的编号加起来都是奇数，每一列的编号加起来都是偶数。\n\n在填之前，你想知道是否有任何一种解法满足上述条件，如果可以，输出 `Yes`；否则，输出 `No`。", "inputFormat": "一行一个正整数 $n$，表示正方形网格的边长。", "outputFormat": "一行一个字符串，`Yes` 或 `No`。", "hint": "#### 【样例解释】\n\n对于第一组样例，设 $A$ 表示正方形网格，则有 $A_{1,1}=1,A_{1,2}=2,A_{2,1}=3,A_{2,2}=4$ 的解法。\n\n对于第二组样例，可以证明无解。\n\n#### 【数据范围】\n  \n**本题开启捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n \\le$|\n| :-----------: | :-------------:|:-----------: |\n|$0$|$10$|$10$|\n|$1$|$20$|$10^6$|\n|$2$|$70$|$10^{18}$|\n\n对于全部数据，保证：$1 \\le n \\le 10^{18}$。\n\n", "locale": "zh-CN"}}}
{"pid": "P10569", "type": "P", "difficulty": 4, "samples": [["3\n5\n2 3 1 4 5\n6 \n6 6 6 6 6 6\n6\n1 1 4 5 1 4", "7\n6\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Daily OI Round 4」Snow", "background": "", "description": "下雪了，小 Y 堆了 $n$ 个雪柱排成一排，调皮的小 X 打算推倒这 $n$ 个雪柱，他想在最少的时间内推倒所有雪柱，于是他请你来为他出谋划策。\n\n小 Y 堆的每个雪柱高 $a_i$ 单位，推倒一个雪柱的时间为该雪柱的高度。小 X 只能从这一排雪柱的两端推雪柱 \\*，次数不限，小 X 移动的时间可以忽略不计。这样就可以使一个雪柱倒向其他雪柱，从而击倒另一个雪柱（击倒的时间忽略不计），然后发生连锁反应，更加节省时间 \\*\\*。\n\n设初始的势能为当前手动推倒的雪柱 $k$ 的高度 $p=a_k$，则此轮连锁反应中第 $i$ 个雪柱倒向第 $j$ 个雪柱时：\n\n- 若 $p\\ge a_j$，则使第 $j$ 个雪柱也被击倒，并令 $p \\gets a_j$。\n- 若 $p< a_j$，则第 $j$ 个雪柱的高度减少（不被击倒），终止整个连锁反应，令 $a_j \\gets a_j-p$。\n\n请你求出推倒所有雪柱的最短时间。\n\n\\*：每一次要么从左边推最左边的雪柱，要么从右边推最右边的雪柱。\n\n\\*\\*：雪柱的倒塌方向取决于推雪柱的方向，如果从左边推，雪柱就会向右依次倒塌（第 $i$ 个雪柱倒塌向第 $i+1$ 个雪柱），反之同理。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n \n第一行一个整数 $n$，表示雪柱的数量。\n\n第二行 $n$ 个整数，分别表示每个雪柱的高度。", "outputFormat": "对于每组数据：输出一行一个整数，表示推倒所有雪柱的最短时间。", "hint": "#### 【样例解释】\n\n- **对于第一组数据：**\n\n> 第一次从左边推，耗费 $2$ 点时间，使得 $5$ 个雪柱 的高度分别变为：$0,1,1,4,5$。 \n>\n> 第二次从右边推，耗费 $5$ 点时间，使得所有雪柱都被击倒。 \n>\n> 共耗费 $7$ 点时间。\n\n- **对于第二组数据：**\n\n> 从左边或者右边都可以一次性推完，共耗费 $6$ 点时间。\n\n- **对于第三组数据：**\n\n> 第一次从右边推，耗费 $4$ 点时间，使得 $6$ 个雪柱的高度分别变为：$1,1,4,4,0,0$。  \n>\n> 第二次从右边推，耗费 $4$ 点时间，使得所有雪柱都被击倒。\n>\n> 共耗费 $8$ 点时间。\n\n#### 【数据范围】\n  \n**本题采用捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n \\le$|\n| :-----------: | :-------------:|:-----------: |\n|$0$|$10$|$20$|\n|$1$|$15$|$100$|\n|$2$|$25$|$1000$|\n|$3$|$50$|$10^5$|\n\n对于全部数据，保证：$1 \\le T \\le 10$，$1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 4」Snow", "background": "", "description": "下雪了，小 Y 堆了 $n$ 个雪柱排成一排，调皮的小 X 打算推倒这 $n$ 个雪柱，他想在最少的时间内推倒所有雪柱，于是他请你来为他出谋划策。\n\n小 Y 堆的每个雪柱高 $a_i$ 单位，推倒一个雪柱的时间为该雪柱的高度。小 X 只能从这一排雪柱的两端推雪柱 \\*，次数不限，小 X 移动的时间可以忽略不计。这样就可以使一个雪柱倒向其他雪柱，从而击倒另一个雪柱（击倒的时间忽略不计），然后发生连锁反应，更加节省时间 \\*\\*。\n\n设初始的势能为当前手动推倒的雪柱 $k$ 的高度 $p=a_k$，则此轮连锁反应中第 $i$ 个雪柱倒向第 $j$ 个雪柱时：\n\n- 若 $p\\ge a_j$，则使第 $j$ 个雪柱也被击倒，并令 $p \\gets a_j$。\n- 若 $p< a_j$，则第 $j$ 个雪柱的高度减少（不被击倒），终止整个连锁反应，令 $a_j \\gets a_j-p$。\n\n请你求出推倒所有雪柱的最短时间。\n\n\\*：每一次要么从左边推最左边的雪柱，要么从右边推最右边的雪柱。\n\n\\*\\*：雪柱的倒塌方向取决于推雪柱的方向，如果从左边推，雪柱就会向右依次倒塌（第 $i$ 个雪柱倒塌向第 $i+1$ 个雪柱），反之同理。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n \n第一行一个整数 $n$，表示雪柱的数量。\n\n第二行 $n$ 个整数，分别表示每个雪柱的高度。", "outputFormat": "对于每组数据：输出一行一个整数，表示推倒所有雪柱的最短时间。", "hint": "#### 【样例解释】\n\n- **对于第一组数据：**\n\n> 第一次从左边推，耗费 $2$ 点时间，使得 $5$ 个雪柱 的高度分别变为：$0,1,1,4,5$。 \n>\n> 第二次从右边推，耗费 $5$ 点时间，使得所有雪柱都被击倒。 \n>\n> 共耗费 $7$ 点时间。\n\n- **对于第二组数据：**\n\n> 从左边或者右边都可以一次性推完，共耗费 $6$ 点时间。\n\n- **对于第三组数据：**\n\n> 第一次从右边推，耗费 $4$ 点时间，使得 $6$ 个雪柱的高度分别变为：$1,1,4,4,0,0$。  \n>\n> 第二次从右边推，耗费 $4$ 点时间，使得所有雪柱都被击倒。\n>\n> 共耗费 $8$ 点时间。\n\n#### 【数据范围】\n  \n**本题采用捆绑测试。**\n\n|$\\text{Subtask}$|分值|$n \\le$|\n| :-----------: | :-------------:|:-----------: |\n|$0$|$10$|$20$|\n|$1$|$15$|$100$|\n|$2$|$25$|$1000$|\n|$3$|$50$|$10^5$|\n\n对于全部数据，保证：$1 \\le T \\le 10$，$1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10570", "type": "P", "difficulty": 2, "samples": [["3\n2 3 4\n4 8 5\n5 2 8\n", "10\n15\n28\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[JRKSJ R8] 网球", "background": "~~垒球是橙色的~~ 网球是绿色的。~~网球是上升的，网球是下落的~~。\n\n> And you never meet the people, you never shake their hands, you never hear their story or tell yours.  \n> But somehow in the act of making something with a great deal of care and love, something's transmitted there.", "description": "你有两个啮合在一起的齿轮，你希望齿轮 A 每转 $a$ 圈齿轮 B 都能转恰好 $b$ 圈。\n\n由于精细度要求，每个齿轮都必须有**不少于** $c$ 个齿，求齿轮 A 和齿轮 B 的总齿数和的最小值。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 描述数据组数。对于每组数据：\n\n- 仅一行，三个整数 $a, b, c$。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "### 样例解释\n\n- 对于第一组数据，最优方案为齿轮 A 有 $6$ 个齿，齿轮 B 有 $4$ 个齿，答案为 $4 + 6 = 10$；\n- 对于第二组数据，最优方案为齿轮 A 有 $10$ 个齿，齿轮 B 有 $5$ 个齿，答案为 $10 + 5 = 15$；\n- 对于第三组数据，最优方案为齿轮 A 有 $8$ 个齿，齿轮 B 有 $20$ 个齿，答案为 $8 + 20 = 28$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n令 $v = \\max(a, b, c)$。\n\n- Subtask 0（13 pts）：$v \\leq 20$；\n- Subtask 1（13 pts）：$v \\leq 5000$；\n- Subtask 2（20 pts）：$v \\leq 10^6$；\n- Subtask 3（54 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 8\\times 10^3$，$1 \\leq a, b, c \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R8] 网球", "background": "~~垒球是橙色的~~ 网球是绿色的。~~网球是上升的，网球是下落的~~。\n\n> And you never meet the people, you never shake their hands, you never hear their story or tell yours.  \n> But somehow in the act of making something with a great deal of care and love, something's transmitted there.", "description": "你有两个啮合在一起的齿轮，你希望齿轮 A 每转 $a$ 圈齿轮 B 都能转恰好 $b$ 圈。\n\n由于精细度要求，每个齿轮都必须有**不少于** $c$ 个齿，求齿轮 A 和齿轮 B 的总齿数和的最小值。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 描述数据组数。对于每组数据：\n\n- 仅一行，三个整数 $a, b, c$。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "### 样例解释\n\n- 对于第一组数据，最优方案为齿轮 A 有 $6$ 个齿，齿轮 B 有 $4$ 个齿，答案为 $4 + 6 = 10$；\n- 对于第二组数据，最优方案为齿轮 A 有 $10$ 个齿，齿轮 B 有 $5$ 个齿，答案为 $10 + 5 = 15$；\n- 对于第三组数据，最优方案为齿轮 A 有 $8$ 个齿，齿轮 B 有 $20$ 个齿，答案为 $8 + 20 = 28$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n令 $v = \\max(a, b, c)$。\n\n- Subtask 0（13 pts）：$v \\leq 20$；\n- Subtask 1（13 pts）：$v \\leq 5000$；\n- Subtask 2（20 pts）：$v \\leq 10^6$；\n- Subtask 3（54 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 8\\times 10^3$，$1 \\leq a, b, c \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10571", "type": "P", "difficulty": 3, "samples": [["2468", "3"], ["164", "2"], ["65535", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "[JRKSJ R8] 三七二十一", "background": "", "description": "给你一个由 $1\\sim 9$ 的数字组成的数字串 $s$。定义一个数字串 $s$ 表示的数为将其看作十进制数得到的数。形式化地说，长为 $n$ 的数字串 $s$ 表示的数是 $\\sum_{i=1}^n  10^{n-i}s_i$。\n\n你可以对这个数字串执行若干次操作，每次操作中你可以选定一个位置 $1\\le p\\le n$ 并将 $s_p$ 修改为任意 $1\\sim 9$ 中的数字。你需要使该数字串**不存在**任何一个非空子串满足这个子串表示的数字是 $2^k(k\\in \\N)$ 即 $2$ 的任意**非负整数**次幂，请你求出最少的操作次数。", "inputFormat": "一行一个数字串 $s$。", "outputFormat": "一行一个整数表示答案。", "hint": "### 样例解释\n\n对于样例 $1$，满足表示的数是 $2$ 的非负整数次幂的 $s$ 的非空子串有 $2,4,8$，将 $s$ 修改为 $5963$ 是最优解之一。\n\n对于样例 $2$，满足表示的数是 $2$ 的非负整数次幂的 $s$ 的非空子串有 $1,4,16,64$，将 $s$ 修改为 $666$ 是最优解之一。\n\n\n### 数据规模与约定\n**本题采用捆绑测试。**\n\n令 $n=|s|$。\n\n| $\\text{Subtask}$ | $n\\le $ | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $4$ | $10$ |\n| $2$ | $8$ | $10$ |\n| $3$ | $17$ | $20$ |\n| $4$ | $10^3$ | $20$ |\n| $5$ | $10^6$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$s$ 由 $1\\sim 9$ 的数字组成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R8] 三七二十一", "background": "", "description": "给你一个由 $1\\sim 9$ 的数字组成的数字串 $s$。定义一个数字串 $s$ 表示的数为将其看作十进制数得到的数。形式化地说，长为 $n$ 的数字串 $s$ 表示的数是 $\\sum_{i=1}^n  10^{n-i}s_i$。\n\n你可以对这个数字串执行若干次操作，每次操作中你可以选定一个位置 $1\\le p\\le n$ 并将 $s_p$ 修改为任意 $1\\sim 9$ 中的数字。你需要使该数字串**不存在**任何一个非空子串满足这个子串表示的数字是 $2^k(k\\in \\N)$ 即 $2$ 的任意**非负整数**次幂，请你求出最少的操作次数。", "inputFormat": "一行一个数字串 $s$。", "outputFormat": "一行一个整数表示答案。", "hint": "### 样例解释\n\n对于样例 $1$，满足表示的数是 $2$ 的非负整数次幂的 $s$ 的非空子串有 $2,4,8$，将 $s$ 修改为 $5963$ 是最优解之一。\n\n对于样例 $2$，满足表示的数是 $2$ 的非负整数次幂的 $s$ 的非空子串有 $1,4,16,64$，将 $s$ 修改为 $666$ 是最优解之一。\n\n\n### 数据规模与约定\n**本题采用捆绑测试。**\n\n令 $n=|s|$。\n\n| $\\text{Subtask}$ | $n\\le $ | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $4$ | $10$ |\n| $2$ | $8$ | $10$ |\n| $3$ | $17$ | $20$ |\n| $4$ | $10^3$ | $20$ |\n| $5$ | $10^6$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$s$ 由 $1\\sim 9$ 的数字组成。", "locale": "zh-CN"}}}
{"pid": "P10572", "type": "P", "difficulty": 5, "samples": [["5 6 5\n((())\n1 2\n1 3\n2 3\n3 4\n4 5\n2 4\n\n1 2\n3 4\n1 4\n1 5\n2 5\n", "01111"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷原创", "O2优化", "二分图", "洛谷月赛"], "title": "[JRKSJ R8] +1-1", "background": "", "description": "给你 $n$ 个点 $m$ 条边的无向图，每个结点上有一个字符 `(` 或者 `)`。\n\n有 $q$ 次查询，每次查询给出 $x,y$，你需要判断是否存在一条从 $x$ 到 $y$ 的路径（不需要保证是简单路径）满足将路径上的点上的字符顺次写下来得到的字符串是合法括号串。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行一个只包含 `(` 和 `)` 的长度为 $n$ 的字符串表示结点 $1\\dots n$ 上的字符。\n\n下面 $m$ 行，每行两个整数 $u,v$ 表示图上的一条边。\n\n下面 $q$ 行，每行两个整数 $x,y$。", "outputFormat": "一个长度为 $q$ 的 01 串，第 $i$ 个字符表示第 $i$ 次询问的答案，1 表示存在这样的路径，0 表示不存在这样的路径。", "hint": "合法括号串的定义：\n\n* 空字符串是合法括号串\n* 若 $A,B$ 是合法括号串，则 $AB$ 是合法括号串\n* 若 $A$ 是合法括号串，则 $(A)$ 是合法括号串\n* 除此之外的其他字符串均不是合法括号串\n\n如 `()`、`(()())` 是合法括号串，`(()`、`())(` 不是合法括号串。\n\n### 样例解释\n\n**为了方便观察，输入的边和询问之间有一个换行。但数据中并不存在这个换行。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2lp3c7m.png)\n\n其中 $1,2,3$ 号点的字符是 `(`，$4,5$ 号点的字符是 `)`。\n\n$1\\to 2$：显然，合法括号串不可能以 `(` 结尾。\\\n$3\\to 4$：路径 $3\\to 4$ 表示的字符串是 `()`。\\\n$1\\to 4$：路径 $1\\to 3\\to 2\\to 4\\to 5\\to 4$ 表示的字符串是 `((()))`。\\\n$1\\to 5$：路径 $1\\to 2\\to 4\\to 5$ 表示的字符串是 `(())`。\\\n$2\\to 5$：路径 $2\\to 3\\to 4\\to 5$ 表示的字符串是 `(())`。\n\n### 数据规模与约定\n\n本题采用捆绑测试。\n\n- Subtask 1（20 pts）：$n,q\\leq 500$，$m \\leq 800$；\n- Subtask 2（30 pts）：图是森林；\n- Subtask 3（20 pts）：$q\\le 10$；\n- Subtask 4（30 pts）：无特殊限制。\n\n对于所有数据，满足 $1\\le n,q\\le 5\\times 10^5$，$0\\le m\\le \\min(\\frac{n\\times(n-1)}{2},5\\times 10^5)$，$1\\le u,v,x,y\\le n$，保证给出的图无重边、无自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R8] +1-1", "background": "", "description": "给你 $n$ 个点 $m$ 条边的无向图，每个结点上有一个字符 `(` 或者 `)`。\n\n有 $q$ 次查询，每次查询给出 $x,y$，你需要判断是否存在一条从 $x$ 到 $y$ 的路径（不需要保证是简单路径）满足将路径上的点上的字符顺次写下来得到的字符串是合法括号串。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行一个只包含 `(` 和 `)` 的长度为 $n$ 的字符串表示结点 $1\\dots n$ 上的字符。\n\n下面 $m$ 行，每行两个整数 $u,v$ 表示图上的一条边。\n\n下面 $q$ 行，每行两个整数 $x,y$。", "outputFormat": "一个长度为 $q$ 的 01 串，第 $i$ 个字符表示第 $i$ 次询问的答案，1 表示存在这样的路径，0 表示不存在这样的路径。", "hint": "合法括号串的定义：\n\n* 空字符串是合法括号串\n* 若 $A,B$ 是合法括号串，则 $AB$ 是合法括号串\n* 若 $A$ 是合法括号串，则 $(A)$ 是合法括号串\n* 除此之外的其他字符串均不是合法括号串\n\n如 `()`、`(()())` 是合法括号串，`(()`、`())(` 不是合法括号串。\n\n### 样例解释\n\n**为了方便观察，输入的边和询问之间有一个换行。但数据中并不存在这个换行。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2lp3c7m.png)\n\n其中 $1,2,3$ 号点的字符是 `(`，$4,5$ 号点的字符是 `)`。\n\n$1\\to 2$：显然，合法括号串不可能以 `(` 结尾。\\\n$3\\to 4$：路径 $3\\to 4$ 表示的字符串是 `()`。\\\n$1\\to 4$：路径 $1\\to 3\\to 2\\to 4\\to 5\\to 4$ 表示的字符串是 `((()))`。\\\n$1\\to 5$：路径 $1\\to 2\\to 4\\to 5$ 表示的字符串是 `(())`。\\\n$2\\to 5$：路径 $2\\to 3\\to 4\\to 5$ 表示的字符串是 `(())`。\n\n### 数据规模与约定\n\n本题采用捆绑测试。\n\n- Subtask 1（20 pts）：$n,q\\leq 500$，$m \\leq 800$；\n- Subtask 2（30 pts）：图是森林；\n- Subtask 3（20 pts）：$q\\le 10$；\n- Subtask 4（30 pts）：无特殊限制。\n\n对于所有数据，满足 $1\\le n,q\\le 5\\times 10^5$，$0\\le m\\le \\min(\\frac{n\\times(n-1)}{2},5\\times 10^5)$，$1\\le u,v,x,y\\le n$，保证给出的图无重边、无自环。", "locale": "zh-CN"}}}
