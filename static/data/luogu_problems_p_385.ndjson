{"pid": "P8808", "type": "P", "difficulty": 3, "samples": [["5\n1 2 2 4 8", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "枚举", "蓝桥杯国赛"], "title": "[蓝桥杯 2022 国 C] 斐波那契数组", "background": "", "description": "如果数组 $A = (a_0,a_1,\\cdots,a_{n − 1})$ 满足以下条件，就说它是一个斐波那契数组：\n\n1. $n>2$。\n2. $a_0=a_1$。\n3. 对于所有的 $i\\ge2$ 都有 $a_i=a_{i-1}+a_{i-2}$。\n\n现在，给出一个数组 $A$，你可以执行任意次修改，每次修改将数组中的某个位置的元素修改为一个大于 $0$ 的整数。请问最少修改几个元素之后，数组 $A$ 会变成一个斐波那契数组。", "inputFormat": "输入的第一行包含一个整数 $n$，表示数组 $A$ 中的元素个数。\n\n第二行包含 $n$ 个整数 $a_0,a_1,\\cdots,a_{n−1}$，相邻两个整数之间用一个空格分隔。", "outputFormat": "  输出一行包含一个整数表示最少需要修改数组 $A$ 中的几个元素之后，数组 $A$ 可以变为一个斐波那契数组。", "hint": "**【样例说明】**\n\n将原数组修改为 $(1,1,2,3,5)$，最少修改三个元素变成了一个斐波那契数组。\n\n**【评测用例规模与约定】**\n\n对于所有评测用例， $3 ≤ n ≤ 10^5$，$1 ≤ a_i ≤ 10^6$。\n\n蓝桥杯 2022 国赛 C 组 E 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 国 C] 斐波那契数组", "background": "", "description": "如果数组 $A = (a_0,a_1,\\cdots,a_{n − 1})$ 满足以下条件，就说它是一个斐波那契数组：\n\n1. $n>2$。\n2. $a_0=a_1$。\n3. 对于所有的 $i\\ge2$ 都有 $a_i=a_{i-1}+a_{i-2}$。\n\n现在，给出一个数组 $A$，你可以执行任意次修改，每次修改将数组中的某个位置的元素修改为一个大于 $0$ 的整数。请问最少修改几个元素之后，数组 $A$ 会变成一个斐波那契数组。", "inputFormat": "输入的第一行包含一个整数 $n$，表示数组 $A$ 中的元素个数。\n\n第二行包含 $n$ 个整数 $a_0,a_1,\\cdots,a_{n−1}$，相邻两个整数之间用一个空格分隔。", "outputFormat": "  输出一行包含一个整数表示最少需要修改数组 $A$ 中的几个元素之后，数组 $A$ 可以变为一个斐波那契数组。", "hint": "**【样例说明】**\n\n将原数组修改为 $(1,1,2,3,5)$，最少修改三个元素变成了一个斐波那契数组。\n\n**【评测用例规模与约定】**\n\n对于所有评测用例， $3 ≤ n ≤ 10^5$，$1 ≤ a_i ≤ 10^6$。\n\n蓝桥杯 2022 国赛 C 组 E 题。", "locale": "zh-CN"}}}
{"pid": "P8809", "type": "P", "difficulty": 3, "samples": [["5 3\n1 3 6 4 10", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "枚举", "蓝桥杯国赛"], "title": "[蓝桥杯 2022 国 C] 近似 GCD", "background": "", "description": " 小蓝有一个长度为 $n$ 的数组 $A = (a_1,a_2,\\cdots,a_n)$，数组的子数组被定义为从原数组中选出连续的一个或多个元素组成的数组。数组的最大公约数指的是数组中所有元素的最大公约数。如果最多更改数组中的一个元素之后，数组的最大公约数为 $g$，那么称 $g$ 为这个数组的近似 GCD。一个数组的近似 GCD 可能有多种取值。\n\n具体的，判断 $g$ 是否为一个子数组的近似 GCD 如下：\n\n1. 如果这个子数组的最大公约数就是 $g$，那么说明 $g$ 是其近似 GCD。\n2. 在修改这个子数组中的一个元素之后（可以改成想要的任何值），子数组的最大公约数为 $g$，那么说明 $g$ 是这个子数组的近似 GCD。\n\n小蓝想知道，数组 $A$ 有多少个长度大于等于 $2$ 的子数组满足近似 GCD 的值为 $g$。", "inputFormat": "输入的第一行包含两个整数 $n,g$，用一个空格分隔，分别表示数组 $A$ 的长度和 $g$ 的值。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，相邻两个整数之间用一个空格分隔。", "outputFormat": "  输出一行包含一个整数表示数组 $A$ 有多少个长度大于等于 $2$ 的子数组的近似 GCD 的值为 $g$。", "hint": "**【样例说明】**\n\n满足条件的子数组有 $5$ 个 ：\n\n$[1,3]$：将 $1$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n   \n$[1,3,6]$：将 $1$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n\n$[3,6]$：这个子数组的最大公约数就是 $3$，满足条件。\n\n$[3,6,4]$：将 $4$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n\n$[6,4]$：将 $4$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n\n【评测用例规模与约定】\n\n对于 $20\\%$ 的评测用例，$2\\le n\\le100$；\n  \n对于 $40\\%$ 的评测用例，$2\\le n\\le1000$；\n\n对于所有评测用例，$2\\le n\\le10^5$，$1\\le g,a_i \\le10^9$。\n\n蓝桥杯 2022 国赛 C 组 F 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 国 C] 近似 GCD", "background": "", "description": " 小蓝有一个长度为 $n$ 的数组 $A = (a_1,a_2,\\cdots,a_n)$，数组的子数组被定义为从原数组中选出连续的一个或多个元素组成的数组。数组的最大公约数指的是数组中所有元素的最大公约数。如果最多更改数组中的一个元素之后，数组的最大公约数为 $g$，那么称 $g$ 为这个数组的近似 GCD。一个数组的近似 GCD 可能有多种取值。\n\n具体的，判断 $g$ 是否为一个子数组的近似 GCD 如下：\n\n1. 如果这个子数组的最大公约数就是 $g$，那么说明 $g$ 是其近似 GCD。\n2. 在修改这个子数组中的一个元素之后（可以改成想要的任何值），子数组的最大公约数为 $g$，那么说明 $g$ 是这个子数组的近似 GCD。\n\n小蓝想知道，数组 $A$ 有多少个长度大于等于 $2$ 的子数组满足近似 GCD 的值为 $g$。", "inputFormat": "输入的第一行包含两个整数 $n,g$，用一个空格分隔，分别表示数组 $A$ 的长度和 $g$ 的值。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，相邻两个整数之间用一个空格分隔。", "outputFormat": "  输出一行包含一个整数表示数组 $A$ 有多少个长度大于等于 $2$ 的子数组的近似 GCD 的值为 $g$。", "hint": "**【样例说明】**\n\n满足条件的子数组有 $5$ 个 ：\n\n$[1,3]$：将 $1$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n   \n$[1,3,6]$：将 $1$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n\n$[3,6]$：这个子数组的最大公约数就是 $3$，满足条件。\n\n$[3,6,4]$：将 $4$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n\n$[6,4]$：将 $4$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。\n\n【评测用例规模与约定】\n\n对于 $20\\%$ 的评测用例，$2\\le n\\le100$；\n  \n对于 $40\\%$ 的评测用例，$2\\le n\\le1000$；\n\n对于所有评测用例，$2\\le n\\le10^5$，$1\\le g,a_i \\le10^9$。\n\n蓝桥杯 2022 国赛 C 组 F 题。", "locale": "zh-CN"}}}
{"pid": "P8810", "type": "P", "difficulty": 4, "samples": [["5\n8 6 1 8 8", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2022", "蓝桥杯国赛"], "title": "[蓝桥杯 2022 国 C] 数组个数", "background": "", "description": "  小蓝有一个长度为 $n$ 的数组 $B = (b_0,b_1,\\cdots,b_{n−1})$，数组 $B$ 是由另一个长度为 $n$ 的环形数组 $A = (a_0,a_1,\\cdots,a_{n−1})$ 经过一次相邻最大化操作得到的，其中 $a_i$ 与 $a_{i+1}$ 相邻，$a_0$ 与 $a_{n−1}$ 相邻。\n\n形式化描述为：\n\n$$\nb_i=\n\\begin{cases}\n\\max\\{a_{n-1},a_0,a_1\\}& i=0\\\\\n\\max\\{a_{i-1},a_i,a_{i+1}\\}& 0<i<n-1\\\\\n\\max\\{a_{n-2},a_{n-1},a_0\\}& i=n-1\\\\\n\\end{cases}\n$$\n\n小蓝想知道，可能有多少个满足条件的数组 $A$，经过一次相邻最大化操作后能得到数组 $B$，注意 $A$ 中的每个元素都要求为非负整数。", "inputFormat": "输入的第一行包含一个整数 $n$，表示数组长度。\n\n第二行包含 $n$ 个整数 $b_0,b_1,\\cdots,b_{n−1}$，相邻两个整数之间用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案，答案可能很大，请输出答案除以 $1000000007$（即 $10^9+7$）后的余数。", "hint": "**【样例说明】**\n\n可能的 $A$ 数组有 $7$ 个 ：$(6,0,0,1,8)$、$(6,0,1,0,8)$、$(6,0,1,1,8)$、$(6,1,0,0,8)$、$(6,1,0,1,8)$、$(6,1,1,0,8)$、$(6,1,1,1,8)$。\n\n【评测用例规模与约定】\n\n对于 $30\\%$ 的评测用例，$3≤n≤10$；\n\n对于 $60\\%$ 的评测用例，$3≤n≤100$；\n\n对于所有评测用例，$3 ≤ n ≤ 1000$，$0 ≤ b_i ≤ 10$。\n\n蓝桥杯 2022 国赛 C 组 G 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 国 C] 数组个数", "background": "", "description": "  小蓝有一个长度为 $n$ 的数组 $B = (b_0,b_1,\\cdots,b_{n−1})$，数组 $B$ 是由另一个长度为 $n$ 的环形数组 $A = (a_0,a_1,\\cdots,a_{n−1})$ 经过一次相邻最大化操作得到的，其中 $a_i$ 与 $a_{i+1}$ 相邻，$a_0$ 与 $a_{n−1}$ 相邻。\n\n形式化描述为：\n\n$$\nb_i=\n\\begin{cases}\n\\max\\{a_{n-1},a_0,a_1\\}& i=0\\\\\n\\max\\{a_{i-1},a_i,a_{i+1}\\}& 0<i<n-1\\\\\n\\max\\{a_{n-2},a_{n-1},a_0\\}& i=n-1\\\\\n\\end{cases}\n$$\n\n小蓝想知道，可能有多少个满足条件的数组 $A$，经过一次相邻最大化操作后能得到数组 $B$，注意 $A$ 中的每个元素都要求为非负整数。", "inputFormat": "输入的第一行包含一个整数 $n$，表示数组长度。\n\n第二行包含 $n$ 个整数 $b_0,b_1,\\cdots,b_{n−1}$，相邻两个整数之间用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案，答案可能很大，请输出答案除以 $1000000007$（即 $10^9+7$）后的余数。", "hint": "**【样例说明】**\n\n可能的 $A$ 数组有 $7$ 个 ：$(6,0,0,1,8)$、$(6,0,1,0,8)$、$(6,0,1,1,8)$、$(6,1,0,0,8)$、$(6,1,0,1,8)$、$(6,1,1,0,8)$、$(6,1,1,1,8)$。\n\n【评测用例规模与约定】\n\n对于 $30\\%$ 的评测用例，$3≤n≤10$；\n\n对于 $60\\%$ 的评测用例，$3≤n≤100$；\n\n对于所有评测用例，$3 ≤ n ≤ 1000$，$0 ≤ b_i ≤ 10$。\n\n蓝桥杯 2022 国赛 C 组 G 题。", "locale": "zh-CN"}}}
{"pid": "P8811", "type": "P", "difficulty": 3, "samples": [["3", "447948"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "高精度", "2022", "蓝桥杯国赛"], "title": "[蓝桥杯 2022 国 C] 六六大顺", "background": "", "description": "六六大顺，本指农历六月初六。多用于祝福中年人士家庭幸福，工作顺利，事业有成，身体健康。源自《左传》“君义，臣行，父慈，子孝，兄爱，弟敬，此数者累谓六顺也。”\n\n$6$ 在我国自古以来是一个吉祥的数字，定义数列 $A = (a_1,a_2,\\cdots,a_i,\\cdots)$，其中 $a_1 = 6, a_2 = 66, \\cdots, a_i = 10\\cdot a_{i−1}+6$。\n\n定义一个数列 $B = (b_1,b_2,\\cdots,b_i,\\cdots)$，其中 $b_1 = 6 \\times 6, b_2 = 66\\times66, \\cdots, b_i = a_i \\times a_i$。\n\n现在小蓝想知道数列 $B$ 的前 $n$ 项的和是多少，你能帮帮小蓝吗？", "inputFormat": "输入一行包含一个正整数 $n$。", "outputFormat": "输出一行包含一个整数表示数列 $B$ 前 $n$ 项的和。", "hint": "**【样例说明】**\n\n$b_1 = 6×6 = 36,b_2 = 66×66 = 4356,b_3 = 666×666 = 443556$，所以前三项的和为 $36 + 4356 + 443556 = 447948$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1≤n≤100$；\n\n对于 $50\\%$ 的评测用例，$1≤n≤10^5$；\n\n对于所有评测用例，$1\\le n\\le 10^7$。\n\n蓝桥杯 2022 国赛 C 组 H 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 国 C] 六六大顺", "background": "", "description": "六六大顺，本指农历六月初六。多用于祝福中年人士家庭幸福，工作顺利，事业有成，身体健康。源自《左传》“君义，臣行，父慈，子孝，兄爱，弟敬，此数者累谓六顺也。”\n\n$6$ 在我国自古以来是一个吉祥的数字，定义数列 $A = (a_1,a_2,\\cdots,a_i,\\cdots)$，其中 $a_1 = 6, a_2 = 66, \\cdots, a_i = 10\\cdot a_{i−1}+6$。\n\n定义一个数列 $B = (b_1,b_2,\\cdots,b_i,\\cdots)$，其中 $b_1 = 6 \\times 6, b_2 = 66\\times66, \\cdots, b_i = a_i \\times a_i$。\n\n现在小蓝想知道数列 $B$ 的前 $n$ 项的和是多少，你能帮帮小蓝吗？", "inputFormat": "输入一行包含一个正整数 $n$。", "outputFormat": "输出一行包含一个整数表示数列 $B$ 前 $n$ 项的和。", "hint": "**【样例说明】**\n\n$b_1 = 6×6 = 36,b_2 = 66×66 = 4356,b_3 = 666×666 = 443556$，所以前三项的和为 $36 + 4356 + 443556 = 447948$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1≤n≤100$；\n\n对于 $50\\%$ 的评测用例，$1≤n≤10^5$；\n\n对于所有评测用例，$1\\le n\\le 10^7$。\n\n蓝桥杯 2022 国赛 C 组 H 题。", "locale": "zh-CN"}}}
{"pid": "P8812", "type": "P", "difficulty": 4, "samples": [["2 2\n1 2 89 1\n1 97\n3 4 77 1\n2 15", "101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "枚举", "差分", "蓝桥杯国赛"], "title": "[蓝桥杯 2022 国 C] 打折", "background": "", "description": "小蓝打算采购 $n$ 种物品，每种物品各需要 $1$ 个。\n\n小蓝所住的位置附近一共有 $m$ 个店铺，每个店铺都出售着各种各样的物品。\n\n第 $i$ 家店铺会在第 $s_i$ 天至第 $t_i$ 天打折，折扣率为 $p_i$，对于原件为 $b$ 的物品，折后价格为 $\\lfloor\\frac {b\\cdot p_j}{100}\\rfloor$。其它时间需按原价购买。\n\n小蓝很忙，他只能选择一天的时间去采购这些物品。请问，他最少需要花多少钱才能买到需要的所有物品。\n\n题目保证小蓝一定能买到需要的所有物品。", "inputFormat": "输入的第一行包含两个整数 $n,m$，用一个空格分隔，分别表示物品的个数和店铺的个数。\n\n\n接下来依次包含每个店铺的描述。每个店铺由若干行组成，其中第一行包含四个整数 $s_i,t_i, p_i,c_i$，相邻两个整数之间用一个空格分隔，分别表示商店优惠的起始和结束时间、折扣率以及商店内的商品总数。之后接 $c_i$ 行，每行包含两个整数 $a_j,b_j$，用一个空格分隔，分别表示该商店的第 $j$ 个商品的类型和价格。商品的类型由 $1$ 至 $n$ 编号。", "outputFormat": "输出一行包含一个整数表示小蓝需要花费的最少的钱数。", "hint": "对于 $40\\%$ 的评测用例，$n,m≤500，s_i ≤t_i ≤100，\\sum c_i ≤2000$；\n\n对于 $70\\%$ 的评测用例，$n,m≤5000，\\sum c_i ≤20000$；\n\n对于所有评测用例，$1 ≤ n,m ≤ 10^5，1 ≤ c_i ≤ n，\\sum c_i ≤ 4\\times10^5，1 ≤ s_i ≤t_i ≤10^9，1 < p_i < 100，1≤a_j ≤n，1≤b_j ≤10^9$。\n\n蓝桥杯 2022 国赛 C 组 I 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 国 C] 打折", "background": "", "description": "小蓝打算采购 $n$ 种物品，每种物品各需要 $1$ 个。\n\n小蓝所住的位置附近一共有 $m$ 个店铺，每个店铺都出售着各种各样的物品。\n\n第 $i$ 家店铺会在第 $s_i$ 天至第 $t_i$ 天打折，折扣率为 $p_i$，对于原件为 $b$ 的物品，折后价格为 $\\lfloor\\frac {b\\cdot p_j}{100}\\rfloor$。其它时间需按原价购买。\n\n小蓝很忙，他只能选择一天的时间去采购这些物品。请问，他最少需要花多少钱才能买到需要的所有物品。\n\n题目保证小蓝一定能买到需要的所有物品。", "inputFormat": "输入的第一行包含两个整数 $n,m$，用一个空格分隔，分别表示物品的个数和店铺的个数。\n\n\n接下来依次包含每个店铺的描述。每个店铺由若干行组成，其中第一行包含四个整数 $s_i,t_i, p_i,c_i$，相邻两个整数之间用一个空格分隔，分别表示商店优惠的起始和结束时间、折扣率以及商店内的商品总数。之后接 $c_i$ 行，每行包含两个整数 $a_j,b_j$，用一个空格分隔，分别表示该商店的第 $j$ 个商品的类型和价格。商品的类型由 $1$ 至 $n$ 编号。", "outputFormat": "输出一行包含一个整数表示小蓝需要花费的最少的钱数。", "hint": "对于 $40\\%$ 的评测用例，$n,m≤500，s_i ≤t_i ≤100，\\sum c_i ≤2000$；\n\n对于 $70\\%$ 的评测用例，$n,m≤5000，\\sum c_i ≤20000$；\n\n对于所有评测用例，$1 ≤ n,m ≤ 10^5，1 ≤ c_i ≤ n，\\sum c_i ≤ 4\\times10^5，1 ≤ s_i ≤t_i ≤10^9，1 < p_i < 100，1≤a_j ≤n，1≤b_j ≤10^9$。\n\n蓝桥杯 2022 国赛 C 组 I 题。", "locale": "zh-CN"}}}
{"pid": "P8813", "type": "P", "difficulty": 1, "samples": [["10 9\n", "1000000000\n"], ["23333 66666\n", "-1\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2022", "O2优化", "﻿基础算法", "CSP-J 入门级"], "title": "[CSP-J 2022] 乘方", "background": "为模拟赛时得分情况，本题时限降低 50%。", "description": "小文同学刚刚接触了信息学竞赛，有一天她遇到了这样一个题：给定正整数 $a$ 和 $b$，求 $a^b$ 的值是多少。\n\n$a^b$ 即 $b$ 个 $a$ 相乘的值，例如 $2^3$ 即为 $3$ 个 $2$ 相乘，结果为 $2 \\times 2 \\times 2 = 8$。\n\n“简单！”小文心想，同时很快就写出了一份程序，可是测试时却出现了错误。\n\n小文很快意识到，她的程序里的变量都是 `int` 类型的。在大多数机器上，`int` 类型能表示的最大数为 $2^{31} - 1$，因此只要计算结果超过这个数，她的程序就会出现错误。\n\n由于小文刚刚学会编程，她担心使用 `int` 计算会出现问题。因此她希望你在 $a^b$ 的值超过 ${10}^9$ 时，输出一个 `-1` 进行警示，否则就输出正确的 $a^b$ 的值。\n\n然而小文还是不知道怎么实现这份程序，因此她想请你帮忙。", "inputFormat": "输入共一行，两个正整数 $a, b$。", "outputFormat": "输出共一行，如果 $a^b$ 的值不超过 ${10}^9$，则输出 $a^b$ 的值，否则输出 `-1`。", "hint": "对于 $10 \\%$ 的数据，保证 $b = 1$。  \n对于 $30 \\%$ 的数据，保证 $b \\le 2$。  \n对于 $60 \\%$ 的数据，保证 $b \\le 30$，$a^b \\le {10}^{18}$。  \n对于 $100 \\%$ 的数据，保证 $1 \\le a, b \\le {10}^9$。\n\n$\\text{upd 2022.11.14/2025.04.02}$：各新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2022] 乘方", "background": "为模拟赛时得分情况，本题时限降低 50%。", "description": "小文同学刚刚接触了信息学竞赛，有一天她遇到了这样一个题：给定正整数 $a$ 和 $b$，求 $a^b$ 的值是多少。\n\n$a^b$ 即 $b$ 个 $a$ 相乘的值，例如 $2^3$ 即为 $3$ 个 $2$ 相乘，结果为 $2 \\times 2 \\times 2 = 8$。\n\n“简单！”小文心想，同时很快就写出了一份程序，可是测试时却出现了错误。\n\n小文很快意识到，她的程序里的变量都是 `int` 类型的。在大多数机器上，`int` 类型能表示的最大数为 $2^{31} - 1$，因此只要计算结果超过这个数，她的程序就会出现错误。\n\n由于小文刚刚学会编程，她担心使用 `int` 计算会出现问题。因此她希望你在 $a^b$ 的值超过 ${10}^9$ 时，输出一个 `-1` 进行警示，否则就输出正确的 $a^b$ 的值。\n\n然而小文还是不知道怎么实现这份程序，因此她想请你帮忙。", "inputFormat": "输入共一行，两个正整数 $a, b$。", "outputFormat": "输出共一行，如果 $a^b$ 的值不超过 ${10}^9$，则输出 $a^b$ 的值，否则输出 `-1`。", "hint": "对于 $10 \\%$ 的数据，保证 $b = 1$。  \n对于 $30 \\%$ 的数据，保证 $b \\le 2$。  \n对于 $60 \\%$ 的数据，保证 $b \\le 30$，$a^b \\le {10}^{18}$。  \n对于 $100 \\%$ 的数据，保证 $1 \\le a, b \\le {10}^9$。\n\n$\\text{upd 2022.11.14/2025.04.02}$：各新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN"}}}
{"pid": "P8814", "type": "P", "difficulty": 2, "samples": [["10\n770 77 5\n633 1 211\n545 1 499\n683 3 227\n858 3 257\n723 37 13\n572 26 11\n867 17 17\n829 3 263\n528 4 109\n", "2 385\nNO\nNO\nNO\n11 78\n3 241\n2 286\nNO\nNO\n6 88\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "2022", "O2优化", "CSP-J 入门级"], "title": "[CSP-J 2022] 解密", "background": "", "description": "给定一个正整数 $k$，有 $k$ 次询问，每次给定三个正整数 $n_i, e_i, d_i$，求两个正整数 $p_i, q_i$，使 $n_i = p_i \\times q_i$、$e_i \\times d_i = (p_i - 1)(q_i - 1) + 1$。\n", "inputFormat": "第一行一个正整数 $k$，表示有 $k$ 次询问。\n\n接下来 $k$ 行，第 $i$ 行三个正整数 $n_i, d_i, e_i$。", "outputFormat": "输出 $k$ 行，每行两个正整数 $p_i, q_i$ 表示答案。\n\n为使输出统一，你应当保证 $p_i \\leq q_i$。\n\n如果无解，请输出 `NO`。", "hint": "**【样例 \\#2】**\n\n见附件中的 `decode/decode2.in` 与 `decode/decode2.ans`。\n\n**【样例 \\#3】**\n\n见附件中的 `decode/decode3.in` 与 `decode/decode3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `decode/decode4.in` 与 `decode/decode4.ans`。\n\n**【数据范围】**\n\n以下记 $m = n - e \\times d + 2$。\n\n保证对于 $100\\%$ 的数据，$1 \\leq k \\leq {10}^5$，对于任意的 $1 \\leq i \\leq k$，$1 \\leq n_i \\leq {10}^{18}$，$1 \\leq e_i \\times d_i \\leq {10}^{18}$\n，$1 \\leq m \\leq {10}^9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $k \\leq$ | $n \\leq$ | $m \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10^3$ | $10^3$ | 保证有解 |\n| $2$ | $10^3$ | $10^3$ | $10^3$ | 无 |\n| $3$ | $10^3$ | $10^9$ | $6\\times 10^4$ | 保证有解 |\n| $4$ | $10^3$ | $10^9$ | $6\\times 10^4$ | 无 |\n| $5$ | $10^3$ | $10^9$ | $10^9$ | 保证有解 |\n| $6$ | $10^3$ | $10^9$ | $10^9$ | 无 |\n| $7$ | $10^5$ | $10^{18}$ | $10^9$ | 保证若有解则 $p=q$ |\n| $8$ | $10^5$ | $10^{18}$ | $10^9$ | 保证有解 |\n| $9$ | $10^5$ | $10^{18}$ | $10^9$ | 无 |\n| $10$ | $10^5$ | $10^{18}$ | $10^9$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2022] 解密", "background": "", "description": "给定一个正整数 $k$，有 $k$ 次询问，每次给定三个正整数 $n_i, e_i, d_i$，求两个正整数 $p_i, q_i$，使 $n_i = p_i \\times q_i$、$e_i \\times d_i = (p_i - 1)(q_i - 1) + 1$。\n", "inputFormat": "第一行一个正整数 $k$，表示有 $k$ 次询问。\n\n接下来 $k$ 行，第 $i$ 行三个正整数 $n_i, d_i, e_i$。", "outputFormat": "输出 $k$ 行，每行两个正整数 $p_i, q_i$ 表示答案。\n\n为使输出统一，你应当保证 $p_i \\leq q_i$。\n\n如果无解，请输出 `NO`。", "hint": "**【样例 \\#2】**\n\n见附件中的 `decode/decode2.in` 与 `decode/decode2.ans`。\n\n**【样例 \\#3】**\n\n见附件中的 `decode/decode3.in` 与 `decode/decode3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `decode/decode4.in` 与 `decode/decode4.ans`。\n\n**【数据范围】**\n\n以下记 $m = n - e \\times d + 2$。\n\n保证对于 $100\\%$ 的数据，$1 \\leq k \\leq {10}^5$，对于任意的 $1 \\leq i \\leq k$，$1 \\leq n_i \\leq {10}^{18}$，$1 \\leq e_i \\times d_i \\leq {10}^{18}$\n，$1 \\leq m \\leq {10}^9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $k \\leq$ | $n \\leq$ | $m \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10^3$ | $10^3$ | 保证有解 |\n| $2$ | $10^3$ | $10^3$ | $10^3$ | 无 |\n| $3$ | $10^3$ | $10^9$ | $6\\times 10^4$ | 保证有解 |\n| $4$ | $10^3$ | $10^9$ | $6\\times 10^4$ | 无 |\n| $5$ | $10^3$ | $10^9$ | $10^9$ | 保证有解 |\n| $6$ | $10^3$ | $10^9$ | $10^9$ | 无 |\n| $7$ | $10^5$ | $10^{18}$ | $10^9$ | 保证若有解则 $p=q$ |\n| $8$ | $10^5$ | $10^{18}$ | $10^9$ | 保证有解 |\n| $9$ | $10^5$ | $10^{18}$ | $10^9$ | 无 |\n| $10$ | $10^5$ | $10^{18}$ | $10^9$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P8815", "type": "P", "difficulty": 4, "samples": [["0&(1|0)|(1|1|1&0)\n", "1\n1 2\n"], ["(0|1&0|1|1|(1|1))&(0&1&(1|0)|0|1|0)&0\n", "0\n2 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "栈", "CSP-J 入门级"], "title": "[CSP-J 2022] 逻辑表达式", "background": null, "description": "逻辑表达式是计算机科学中的重要概念和工具，包含逻辑值、逻辑运算、逻辑运算优先级等内容。\n\n在一个逻辑表达式中，元素的值只有两种可能：$0$（表示假）和 $1$（表示真）。元素之间有多种可能的逻辑运算，本题中只需考虑如下两种：“与”（符号为 `&`）和“或”（符号为 `|`）。其运算规则如下：\n\n$0 \\mathbin{\\&} 0 = 0 \\mathbin{\\&} 1 = 1 \\mathbin{\\&} 0 = 0$，$1 \\mathbin{\\&} 1 = 1$；  \n$0 \\mathbin{|} 0 = 0$，$0 \\mathbin{|} 1 = 1 \\mathbin{|} 0 = 1 \\mathbin{|} 1 = 1$。\n\n在一个逻辑表达式中还可能有括号。规定在运算时，括号内的部分先运算；两种运算并列时，`&` 运算优先于 `|` 运算；同种运算并列时，从左向右运算。\n\n比如，表达式 `0|1&0` 的运算顺序等同于 `0|(1&0)`；表达式 `0&1&0|1` 的运算顺序等同于 `((0&1)&0)|1`。\n\n此外，在 C++ 等语言的有些编译器中，对逻辑表达式的计算会采用一种“短路”的策略：在形如 `a&b` 的逻辑表达式中，会先计算 `a` 部分的值，如果 $a = 0$，那么整个逻辑表达式的值就一定为 $0$，故无需再计算 `b` 部分的值；同理，在形如 `a|b` 的逻辑表达式中，会先计算 `a` 部分的值，如果 $a = 1$，那么整个逻辑表达式的值就一定为 $1$，无需再计算 `b` 部分的值。\n\n现在给你一个逻辑表达式，你需要计算出它的值，并且统计出在计算过程中，两种类型的“短路”各出现了多少次。需要注意的是，如果某处“短路”包含在更外层被“短路”的部分内则不被统计，如表达式 `1|(0&1)` 中，尽管 `0&1` 是一处“短路”，但由于外层的 `1|(0&1)` 本身就是一处“短路”，无需再计算 `0&1` 部分的值，因此不应当把这里的 `0&1` 计入一处“短路”。", "inputFormat": "输入共一行，一个非空字符串 $s$ 表示待计算的逻辑表达式。", "outputFormat": "输出共两行，第一行输出一个字符 `0` 或 `1`，表示这个逻辑表达式的值；第二行输出两个非负整数，分别表示计算上述逻辑表达式的过程中，形如 `a&b` 和 `a|b` 的“短路”各出现了多少次。", "hint": "**【样例解释 \\#1】**\n\n该逻辑表达式的计算过程如下，每一行的注释表示上一行计算的过程：\n\n```plain\n0&(1|0)|(1|1|1&0)\n=(0&(1|0))|((1|1)|(1&0)) //用括号标明计算顺序\n=0|((1|1)|(1&0))   //先计算最左侧的 &，是一次形如 a&b 的“短路”\n=0|(1|(1&0))       //再计算中间的 |，是一次形如 a|b 的“短路”\n=0|1               //再计算中间的 |，是一次形如 a|b 的“短路”\n=1\n```\n\n**【样例 \\#3】**\n\n见附件中的 `expr/expr3.in` 与 `expr/expr3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `expr/expr4.in` 与 `expr/expr4.ans`。\n\n**【数据范围】**\n\n设 $\\lvert s \\rvert$ 为字符串 $s$ 的长度。\n\n对于所有数据，$1 \\le \\lvert s \\rvert \\le {10}^6$。保证 $s$ 中仅含有字符 `0`、`1`、`&`、`|`、`(`、`)` 且是一个符合规范的逻辑表达式。保证输入字符串的开头、中间和结尾均无额外的空格。保证 $s$ 中没有重复的括号嵌套（即没有形如 `((a))` 形式的子串，其中 `a` 是符合规范的逻辑表达式）。\n\n| 测试点编号 | $\\lvert s \\rvert \\le$ | 特殊条件 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $3$ | 无 |\n| $3 \\sim 4$ | $5$ | 无 |\n| $5$ | $2000$ | 1 |\n| $6$ | $2000$ | 2 |\n| $7$ | $2000$ | 3 |\n| $8 \\sim 10$ | $2000$ | 无 |\n| $11 \\sim 12$ | ${10}^6$ | 1 |\n| $13 \\sim 14$ | ${10}^6$ | 2 |\n| $15 \\sim 17$ | ${10}^6$ | 3 |\n| $18 \\sim 20$ | ${10}^6$ | 无 |\n\n其中：  \n特殊性质 1 为：保证 $s$ 中没有字符 `&`。  \n特殊性质 2 为：保证 $s$ 中没有字符 `|`。  \n特殊性质 3 为：保证 $s$ 中没有字符 `(` 和 `)`。\n\n**【提示】**\n\n以下给出一个“符合规范的逻辑表达式”的形式化定义：\n\n- 字符串 `0` 和 `1` 是符合规范的；\n- 如果字符串 `s` 是符合规范的，且 `s` 不是形如 `(t)` 的字符串（其中 `t` 是符合规范的），那么字符串 `(s)` 也是符合规范的；\n- 如果字符串 `a` 和 `b` 均是符合规范的，那么字符串 `a&b`、`a|b` 均是符合规范的；\n- 所有符合规范的逻辑表达式均可由以上方法生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2022] 逻辑表达式", "background": null, "description": "逻辑表达式是计算机科学中的重要概念和工具，包含逻辑值、逻辑运算、逻辑运算优先级等内容。\n\n在一个逻辑表达式中，元素的值只有两种可能：$0$（表示假）和 $1$（表示真）。元素之间有多种可能的逻辑运算，本题中只需考虑如下两种：“与”（符号为 `&`）和“或”（符号为 `|`）。其运算规则如下：\n\n$0 \\mathbin{\\&} 0 = 0 \\mathbin{\\&} 1 = 1 \\mathbin{\\&} 0 = 0$，$1 \\mathbin{\\&} 1 = 1$；  \n$0 \\mathbin{|} 0 = 0$，$0 \\mathbin{|} 1 = 1 \\mathbin{|} 0 = 1 \\mathbin{|} 1 = 1$。\n\n在一个逻辑表达式中还可能有括号。规定在运算时，括号内的部分先运算；两种运算并列时，`&` 运算优先于 `|` 运算；同种运算并列时，从左向右运算。\n\n比如，表达式 `0|1&0` 的运算顺序等同于 `0|(1&0)`；表达式 `0&1&0|1` 的运算顺序等同于 `((0&1)&0)|1`。\n\n此外，在 C++ 等语言的有些编译器中，对逻辑表达式的计算会采用一种“短路”的策略：在形如 `a&b` 的逻辑表达式中，会先计算 `a` 部分的值，如果 $a = 0$，那么整个逻辑表达式的值就一定为 $0$，故无需再计算 `b` 部分的值；同理，在形如 `a|b` 的逻辑表达式中，会先计算 `a` 部分的值，如果 $a = 1$，那么整个逻辑表达式的值就一定为 $1$，无需再计算 `b` 部分的值。\n\n现在给你一个逻辑表达式，你需要计算出它的值，并且统计出在计算过程中，两种类型的“短路”各出现了多少次。需要注意的是，如果某处“短路”包含在更外层被“短路”的部分内则不被统计，如表达式 `1|(0&1)` 中，尽管 `0&1` 是一处“短路”，但由于外层的 `1|(0&1)` 本身就是一处“短路”，无需再计算 `0&1` 部分的值，因此不应当把这里的 `0&1` 计入一处“短路”。", "inputFormat": "输入共一行，一个非空字符串 $s$ 表示待计算的逻辑表达式。", "outputFormat": "输出共两行，第一行输出一个字符 `0` 或 `1`，表示这个逻辑表达式的值；第二行输出两个非负整数，分别表示计算上述逻辑表达式的过程中，形如 `a&b` 和 `a|b` 的“短路”各出现了多少次。", "hint": "**【样例解释 \\#1】**\n\n该逻辑表达式的计算过程如下，每一行的注释表示上一行计算的过程：\n\n```plain\n0&(1|0)|(1|1|1&0)\n=(0&(1|0))|((1|1)|(1&0)) //用括号标明计算顺序\n=0|((1|1)|(1&0))   //先计算最左侧的 &，是一次形如 a&b 的“短路”\n=0|(1|(1&0))       //再计算中间的 |，是一次形如 a|b 的“短路”\n=0|1               //再计算中间的 |，是一次形如 a|b 的“短路”\n=1\n```\n\n**【样例 \\#3】**\n\n见附件中的 `expr/expr3.in` 与 `expr/expr3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `expr/expr4.in` 与 `expr/expr4.ans`。\n\n**【数据范围】**\n\n设 $\\lvert s \\rvert$ 为字符串 $s$ 的长度。\n\n对于所有数据，$1 \\le \\lvert s \\rvert \\le {10}^6$。保证 $s$ 中仅含有字符 `0`、`1`、`&`、`|`、`(`、`)` 且是一个符合规范的逻辑表达式。保证输入字符串的开头、中间和结尾均无额外的空格。保证 $s$ 中没有重复的括号嵌套（即没有形如 `((a))` 形式的子串，其中 `a` 是符合规范的逻辑表达式）。\n\n| 测试点编号 | $\\lvert s \\rvert \\le$ | 特殊条件 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $3$ | 无 |\n| $3 \\sim 4$ | $5$ | 无 |\n| $5$ | $2000$ | 1 |\n| $6$ | $2000$ | 2 |\n| $7$ | $2000$ | 3 |\n| $8 \\sim 10$ | $2000$ | 无 |\n| $11 \\sim 12$ | ${10}^6$ | 1 |\n| $13 \\sim 14$ | ${10}^6$ | 2 |\n| $15 \\sim 17$ | ${10}^6$ | 3 |\n| $18 \\sim 20$ | ${10}^6$ | 无 |\n\n其中：  \n特殊性质 1 为：保证 $s$ 中没有字符 `&`。  \n特殊性质 2 为：保证 $s$ 中没有字符 `|`。  \n特殊性质 3 为：保证 $s$ 中没有字符 `(` 和 `)`。\n\n**【提示】**\n\n以下给出一个“符合规范的逻辑表达式”的形式化定义：\n\n- 字符串 `0` 和 `1` 是符合规范的；\n- 如果字符串 `s` 是符合规范的，且 `s` 不是形如 `(t)` 的字符串（其中 `t` 是符合规范的），那么字符串 `(s)` 也是符合规范的；\n- 如果字符串 `a` 和 `b` 均是符合规范的，那么字符串 `a&b`、`a|b` 均是符合规范的；\n- 所有符合规范的逻辑表达式均可由以上方法生成。", "locale": "zh-CN"}}}
{"pid": "P8816", "type": "P", "difficulty": 3, "samples": [["8 2\n3 1\n3 2\n3 3\n3 6\n1 2\n2 2\n5 5\n5 3", "8"], ["4 100\n10 10\n15 25\n20 20\n30 30", "103"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "O2优化", "CSP-J 入门级"], "title": "[CSP-J 2022] 上升点列", "background": "", "description": "在一个二维平面内，给定 $n$ 个整数点 $(x_i, y_i)$，此外你还可以自由添加 $k$ 个整数点。\n\n你在自由添加 $k$ 个点后，还需要从 $n + k$ 个点中选出若干个整数点并组成一个序列，使得序列中任意相邻两点间的欧几里得距离恰好为 $1$ 而且横坐标、纵坐标值均单调不减，即 $x_{i+1} - x_i = 1, y_{i+1} = y_i$ 或 $y_{i+1} - y_i = 1, x_{i+1} = x_i$。请给出满足条件的序列的最大长度。", "inputFormat": "第一行两个正整数 $n, k$ 分别表示给定的整点个数、可自由添加的整点个数。\n\n接下来 $n$ 行，第 $i$ 行两个正整数 $x_i, y_i$ 表示给定的第 $i$ 个点的横纵坐标。\n", "outputFormat": "输出一个整数表示满足要求的序列的最大长度。", "hint": "**【样例 \\#3】**\n\n见附件中的 `point/point3.in` 与 `point/point3.ans`。\n\n第三个样例满足 $k = 0$。\n\n**【样例 \\#4】**\n\n见附件中的 `point/point4.in` 与 `point/point4.ans`。\n\n**【数据范围】**\n\n保证对于所有数据满足：$1 \\leq n \\leq 500$，$0 \\leq k \\leq 100$。对于所有给定的整点，其横纵坐标 $1 \\leq x_i, y_i \\leq {10}^9$，且保证所有给定的点互不重合。对于自由添加的整点，其横纵坐标不受限制。\n\n| 测试点编号 | $n \\leq$ | $k \\leq$ | $x_i,y_i \\leq$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1 \\sim 2$ | $10$ | $0$ | $10$ |\n| $3 \\sim 4$ | $10$ | $100$ | $100$ |\n| $5 \\sim 7$ | $500$ | $0$ | $100$ |\n| $8 \\sim 10$ | $500$ | $0$ | ${10}^9$ |\n| $11 \\sim 15$ | $500$ | $100$  | $100$ |\n| $16 \\sim 20$ | $500$ | $100$ | ${10}^9$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2022] 上升点列", "background": "", "description": "在一个二维平面内，给定 $n$ 个整数点 $(x_i, y_i)$，此外你还可以自由添加 $k$ 个整数点。\n\n你在自由添加 $k$ 个点后，还需要从 $n + k$ 个点中选出若干个整数点并组成一个序列，使得序列中任意相邻两点间的欧几里得距离恰好为 $1$ 而且横坐标、纵坐标值均单调不减，即 $x_{i+1} - x_i = 1, y_{i+1} = y_i$ 或 $y_{i+1} - y_i = 1, x_{i+1} = x_i$。请给出满足条件的序列的最大长度。", "inputFormat": "第一行两个正整数 $n, k$ 分别表示给定的整点个数、可自由添加的整点个数。\n\n接下来 $n$ 行，第 $i$ 行两个正整数 $x_i, y_i$ 表示给定的第 $i$ 个点的横纵坐标。\n", "outputFormat": "输出一个整数表示满足要求的序列的最大长度。", "hint": "**【样例 \\#3】**\n\n见附件中的 `point/point3.in` 与 `point/point3.ans`。\n\n第三个样例满足 $k = 0$。\n\n**【样例 \\#4】**\n\n见附件中的 `point/point4.in` 与 `point/point4.ans`。\n\n**【数据范围】**\n\n保证对于所有数据满足：$1 \\leq n \\leq 500$，$0 \\leq k \\leq 100$。对于所有给定的整点，其横纵坐标 $1 \\leq x_i, y_i \\leq {10}^9$，且保证所有给定的点互不重合。对于自由添加的整点，其横纵坐标不受限制。\n\n| 测试点编号 | $n \\leq$ | $k \\leq$ | $x_i,y_i \\leq$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1 \\sim 2$ | $10$ | $0$ | $10$ |\n| $3 \\sim 4$ | $10$ | $100$ | $100$ |\n| $5 \\sim 7$ | $500$ | $0$ | $100$ |\n| $8 \\sim 10$ | $500$ | $0$ | ${10}^9$ |\n| $11 \\sim 15$ | $500$ | $100$  | $100$ |\n| $16 \\sim 20$ | $500$ | $100$ | ${10}^9$ |\n", "locale": "zh-CN"}}}
{"pid": "P8817", "type": "P", "difficulty": 5, "samples": [["8 8 1\n9 7 1 8 2 3 6\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 1\n", "27\n"], ["7 9 0\n1 1 1 2 3 4\n1 2\n2 3\n3 4\n1 5\n1 6\n1 7\n5 4\n6 4\n7 4\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "广度优先搜索 BFS", "CSP-S 提高级", "折半搜索 meet in the middle"], "title": "[CSP-S 2022] 假期计划", "background": null, "description": "小熊的地图上有 $n$ 个点，其中编号为 $1$ 的是它的家、编号为 $2, 3, \\ldots, n$ 的都是景点。部分点对之间有双向直达的公交线路。如果点 $x$ 与 $z_1$、$z_1$ 与 $z_2$、……、$z_{k - 1}$ 与 $z_k$、$z_k$ 与 $y$ 之间均有直达的线路，那么我们称 $x$ 与 $y$ 之间的行程可转车 $k$ 次通达；特别地，如果点 $x$ 与 $y$ 之间有直达的线路，则称可转车 $0$ 次通达。\n\n很快就要放假了，小熊计划从家出发去 $4$ 个**不同**的景点游玩，完成 $5$ 段行程后回家：家 $\\to$ 景点 A $\\to$ 景点 B $\\to$ 景点 C $\\to$ 景点 D $\\to$ 家且每段行程最多转车 $k$ 次。转车时经过的点没有任何限制，既可以是家、也可以是景点，还可以重复经过相同的点。例如，在景点 A $\\to$ 景点 B 的这段行程中，转车时经过的点可以是家、也可以是景点 C，还可以是景点 D $\\to$ 家这段行程转车时经过的点。\n\n假设每个景点都有一个分数，请帮小熊规划一个行程，使得小熊访问的四个**不同**景点的分数之和最大。", "inputFormat": "第一行包含三个整数 $n, m, k$，分别表示地图上点的个数、双向直达的点对数量、每段行程最多的转车次数。\n\n第二行包含 $n - 1$ 个正整数，分别表示编号为 $2, 3, \\ldots, n$ 的景点的分数。\n\n接下来 $m$ 行，每行包含两个正整数 $x, y$，表示点 $x$ 和 $y$ 之间有道路直接相连，保证 $1 \\le x, y \\le n$，且没有重边，自环。", "outputFormat": "输出一个正整数，表示小熊经过的 $4$ 个不同景点的分数之和的最大值。", "hint": "**【样例解释 \\#1】**\n\n当计划的行程为 $1 \\to 2 \\to 3 \\to 5 \\to 7 \\to 1$ 时，$4$ 个景点的分数之和为 $9 + 7 + 8 + 3 = 27$，可以证明其为最大值。\n\n行程 $1 \\to 3 \\to 5 \\to 7 \\to 8 \\to 1$ 的景点分数之和为 $24$、行程 $1 \\to 3 \\to 2 \\to 8 \\to 7 \\to 1$ 的景点分数之和为 $25$。它们都符合要求，但分数之和不是最大的。\n\n行程 $1 \\to 2 \\to 3 \\to 5 \\to 8 \\to 1$ 的景点分数之和为 $30$，但其中 $5 \\to 8$ 至少需要转车 $2$ 次，因此不符合最多转车 $k = 1$ 次的要求。\n\n行程 $1 \\to 2 \\to 3 \\to 2 \\to 3 \\to 1$ 的景点分数之和为 $32$，但游玩的并非 $4$ 个不同的景点，因此也不符合要求。\n\n**【样例 \\#3】**\n\n见附件中的 `holiday/holiday3.in` 与 `holiday/holiday3.ans`。\n\n**【数据范围】**\n\n对于所有数据，保证 $5 \\le n \\le 2500$，$1 \\le m \\le 10000$，$0 \\le k \\le 100$，所有景点的分数 $1 \\le s_i \\le {10}^{18}$。保证至少存在一组符合要求的行程。\n\n| 测试点编号 | $n \\le$ | $m \\le$ | $k \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $20$ | $0$ |\n| $4 \\sim 5$ | $10$ | $20$ | $5$ |\n| $6 \\sim 8$ | $20$ | $50$ | $100$ |\n| $9 \\sim 11$ | $300$ | $1000$ | $0$ |\n| $12 \\sim 14$ | $300$ | $1000$ | $100$ |\n| $15 \\sim 17$ | $2500$ | $10000$ | $0$ |\n| $18 \\sim 20$ | $2500$ | $10000$ | $100$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2022] 假期计划", "background": null, "description": "小熊的地图上有 $n$ 个点，其中编号为 $1$ 的是它的家、编号为 $2, 3, \\ldots, n$ 的都是景点。部分点对之间有双向直达的公交线路。如果点 $x$ 与 $z_1$、$z_1$ 与 $z_2$、……、$z_{k - 1}$ 与 $z_k$、$z_k$ 与 $y$ 之间均有直达的线路，那么我们称 $x$ 与 $y$ 之间的行程可转车 $k$ 次通达；特别地，如果点 $x$ 与 $y$ 之间有直达的线路，则称可转车 $0$ 次通达。\n\n很快就要放假了，小熊计划从家出发去 $4$ 个**不同**的景点游玩，完成 $5$ 段行程后回家：家 $\\to$ 景点 A $\\to$ 景点 B $\\to$ 景点 C $\\to$ 景点 D $\\to$ 家且每段行程最多转车 $k$ 次。转车时经过的点没有任何限制，既可以是家、也可以是景点，还可以重复经过相同的点。例如，在景点 A $\\to$ 景点 B 的这段行程中，转车时经过的点可以是家、也可以是景点 C，还可以是景点 D $\\to$ 家这段行程转车时经过的点。\n\n假设每个景点都有一个分数，请帮小熊规划一个行程，使得小熊访问的四个**不同**景点的分数之和最大。", "inputFormat": "第一行包含三个整数 $n, m, k$，分别表示地图上点的个数、双向直达的点对数量、每段行程最多的转车次数。\n\n第二行包含 $n - 1$ 个正整数，分别表示编号为 $2, 3, \\ldots, n$ 的景点的分数。\n\n接下来 $m$ 行，每行包含两个正整数 $x, y$，表示点 $x$ 和 $y$ 之间有道路直接相连，保证 $1 \\le x, y \\le n$，且没有重边，自环。", "outputFormat": "输出一个正整数，表示小熊经过的 $4$ 个不同景点的分数之和的最大值。", "hint": "**【样例解释 \\#1】**\n\n当计划的行程为 $1 \\to 2 \\to 3 \\to 5 \\to 7 \\to 1$ 时，$4$ 个景点的分数之和为 $9 + 7 + 8 + 3 = 27$，可以证明其为最大值。\n\n行程 $1 \\to 3 \\to 5 \\to 7 \\to 8 \\to 1$ 的景点分数之和为 $24$、行程 $1 \\to 3 \\to 2 \\to 8 \\to 7 \\to 1$ 的景点分数之和为 $25$。它们都符合要求，但分数之和不是最大的。\n\n行程 $1 \\to 2 \\to 3 \\to 5 \\to 8 \\to 1$ 的景点分数之和为 $30$，但其中 $5 \\to 8$ 至少需要转车 $2$ 次，因此不符合最多转车 $k = 1$ 次的要求。\n\n行程 $1 \\to 2 \\to 3 \\to 2 \\to 3 \\to 1$ 的景点分数之和为 $32$，但游玩的并非 $4$ 个不同的景点，因此也不符合要求。\n\n**【样例 \\#3】**\n\n见附件中的 `holiday/holiday3.in` 与 `holiday/holiday3.ans`。\n\n**【数据范围】**\n\n对于所有数据，保证 $5 \\le n \\le 2500$，$1 \\le m \\le 10000$，$0 \\le k \\le 100$，所有景点的分数 $1 \\le s_i \\le {10}^{18}$。保证至少存在一组符合要求的行程。\n\n| 测试点编号 | $n \\le$ | $m \\le$ | $k \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $20$ | $0$ |\n| $4 \\sim 5$ | $10$ | $20$ | $5$ |\n| $6 \\sim 8$ | $20$ | $50$ | $100$ |\n| $9 \\sim 11$ | $300$ | $1000$ | $0$ |\n| $12 \\sim 14$ | $300$ | $1000$ | $100$ |\n| $15 \\sim 17$ | $2500$ | $10000$ | $0$ |\n| $18 \\sim 20$ | $2500$ | $10000$ | $100$ |", "locale": "zh-CN"}}}
{"pid": "P8818", "type": "P", "difficulty": 4, "samples": [["3 2 2\n0 1 -2\n-3 4\n1 3 1 2\n2 3 2 2\n", "0\n4\n"], ["6 4 5\n3 -1 -2 1 2 0\n1 2 -1 -3\n1 6 1 4\n1 5 1 4\n1 4 1 2\n2 6 3 4\n2 5 2 3\n", "0\n-2\n3\n2\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "2022", "O2优化", "ST 表", "CSP-S 提高级"], "title": "[CSP-S 2022] 策略游戏", "background": "", "description": "小 L 和小 Q 在玩一个策略游戏。\n\n有一个长度为 $n$ 的数组 $A$ 和一个长度为 $m$ 的数组 $B$，在此基础上定义一个大小为 $n \\times m$ 的矩阵 $C$，满足 $C_{i j} = A_i \\times B_j$。所有下标均从 $1$ 开始。\n\n游戏一共会进行 $q$ 轮，在每一轮游戏中，会事先给出 $4$ 个参数 $l_1, r_1, l_2, r_2$，满足 $1 \\le l_1 \\le r_1 \\le n$、$1 \\le l_2 \\le r_2 \\le m$。\n\n游戏中，小 L 先选择一个 $l_1 \\sim r_1$ 之间的下标 $x$，然后小 Q 选择一个 $l_2 \\sim r_2$ 之间的下标 $y$。定义这一轮游戏中二人的得分是 $C_{x y}$。\n\n小 L 的目标是使得这个得分尽可能大，小 Q 的目标是使得这个得分尽可能小。同时两人都是足够聪明的玩家，每次都会采用最优的策略。\n\n请问：按照二人的最优策略，每轮游戏的得分分别是多少？", "inputFormat": "第一行输入三个正整数 $n, m, q$，分别表示数组 $A$，数组 $B$ 的长度和游戏轮数。\n\n第二行：$n$ 个整数，表示 $A_i$，分别表示数组 $A$ 的元素。\n\n第三行：$m$ 个整数，表示 $B_i$，分别表示数组 $B$ 的元素。\n\n接下来 $q$ 行，每行四个正整数，表示这一次游戏的 $l_1, r_1, l_2, r_2$。", "outputFormat": "输出共 $q$ 行，每行一个整数，分别表示每一轮游戏中，小 L 和小 Q 在最优策略下的得分。", "hint": "**【样例解释 \\#1】**\n\n这组数据中，矩阵 $C$ 如下：\n\n$$ \\begin{bmatrix} 0 & 0 \\\\ -3 & 4 \\\\ 6 & -8 \\end{bmatrix} $$\n\n在第一轮游戏中，无论小 L 选取的是 $x = 2$ 还是 $x = 3$，小 Q 都有办法选择某个 $y$ 使得最终的得分为负数。因此小 L 选择 $x = 1$ 是最优的，因为这样得分一定为 $0$。\n\n而在第二轮游戏中，由于小 L 可以选 $x = 2$，小 Q 只能选 $y = 2$，如此得分为 $4$。\n\n**【样例 \\#3】**\n\n见附件中的 `game/game3.in` 与 `game/game3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `game/game4.in` 与 `game/game4.ans`。\n\n**【数据范围】**\n\n对于所有数据，$1 \\le n, m, q \\le {10}^5$，$-{10}^9 \\le A_i, B_i \\le {10}^9$。对于每轮游戏而言，$1 \\le l_1 \\le r_1 \\le n$，$1 \\le l_2 \\le r_2 \\le m$。\n\n| 测试点编号 | $n, m, q \\le$ | 特殊条件 |\n|:-:|:-:|:-:|\n| $1$ | $200$ | 1, 2 |\n| $2$ | $200$ | 1 |\n| $3$ | $200$ | 2 |\n| $4 \\sim 5$ | $200$ | 无 |\n| $6$ | $1000$ | 1, 2 |\n| $7 \\sim 8$ | $1000$ | 1 |\n| $9 \\sim 10$ | $1000$ | 2 |\n| $11 \\sim 12$ | $1000$ | 无 |\n| $13$ | ${10}^5$ | 1, 2 |\n| $14 \\sim 15$ | ${10}^5$ | 1 |\n| $16 \\sim 17$ | ${10}^5$ | 2 |\n| $18 \\sim 20$ | ${10}^5$ | 无 |\n\n其中，特殊性质 1 为：保证 $A_i, B_i > 0$。  \n特殊性质 2 为：保证对于每轮游戏而言，要么 $l_1 = r_1$，要么 $l_2 = r_2$。", "locale": "zh-CN", "translations": {"en": {"title": "[CSP-S 2022] Strategy Game", "background": "", "description": "Xiao L and Xiao Q are playing a strategy game.\n\nGiven an array $A$ of length $n$ and an array $B$ of length $m$, define an $n \\times m$ matrix $C$ such that $C_{i j} = A_i \\times B_j$. All indices start from $1$.\n\nThe game has $q$ rounds. In each round, $4$ parameters $l_1, r_1, l_2, r_2$ are given in advance, satisfying $1 \\le l_1 \\le r_1 \\le n$ and $1 \\le l_2 \\le r_2 \\le m$.\n\nIn the game, Xiao L first chooses an index $x$ between $l_1 \\sim r_1$, and then Xiao Q chooses an index $y$ between $l_2 \\sim r_2$. The score of this round is defined as $C_{x y}$.\n\nXiao L’s goal is to make this score as large as possible, while Xiao Q’s goal is to make it as small as possible. Both players are sufficiently smart and always use optimal strategies.\n\nQuestion: Under both players’ optimal strategies, what is the score in each round?", "inputFormat": "The first line contains three positive integers $n$, $m$, $q$, representing the lengths of array $A$, array $B$, and the number of game rounds.\n\nThe second line contains $n$ integers $A_i$, the elements of array $A$.\n\nThe third line contains $m$ integers $B_i$, the elements of array $B$.\n\nThen follow $q$ lines. Each line contains four positive integers, representing $l_1, r_1, l_2, r_2$ for this round.", "outputFormat": "Output $q$ lines. Each line contains one integer, representing the score in that round under the players’ optimal strategies.", "hint": "**Sample Explanation #1**\n\nIn this dataset, the matrix $C$ is as follows:\n\n$$ \\begin{bmatrix} 0 & 0 \\\\ -3 & 4 \\\\ 6 & -8 \\end{bmatrix} $$\n\nIn the first round, no matter whether Xiao L chooses $x = 2$ or $x = 3$, Xiao Q can choose some $y$ to make the final score negative. Therefore, choosing $x = 1$ is optimal for Xiao L, because then the score is guaranteed to be $0$.\n\nIn the second round, since Xiao L can choose $x = 2$, Xiao Q can only choose $y = 2$, so the score is $4$.\n\n**Sample #3**\n\nSee the attachments `game/game3.in` and `game/game3.ans`.\n\n**Sample #4**\n\nSee the attachments `game/game4.in` and `game/game4.ans`.\n\n**Constraints**\n\nFor all testdata, $1 \\le n, m, q \\le {10}^5$, $-{10}^9 \\le A_i, B_i \\le {10}^9$. For each round, $1 \\le l_1 \\le r_1 \\le n$, $1 \\le l_2 \\le r_2 \\le m$.\n\n| Test point ID | $n, m, q \\le$ | Special condition |\n|:-:|:-:|:-:|\n| $1$ | $200$ | 1, 2 |\n| $2$ | $200$ | 1 |\n| $3$ | $200$ | 2 |\n| $4 \\sim 5$ | $200$ | None |\n| $6$ | $1000$ | 1, 2 |\n| $7 \\sim 8$ | $1000$ | 1 |\n| $9 \\sim 10$ | $1000$ | 2 |\n| $11 \\sim 12$ | $1000$ | None |\n| $13$ | ${10}^5$ | 1, 2 |\n| $14 \\sim 15$ | ${10}^5$ | 1 |\n| $16 \\sim 17$ | ${10}^5$ | 2 |\n| $18 \\sim 20$ | ${10}^5$ | None |\n\nHere, special property 1: guarantee $A_i, B_i > 0$.  \nSpecial property 2: guarantee that for each round, either $l_1 = r_1$ or $l_2 = r_2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CSP-S 2022] 策略游戏", "background": "", "description": "小 L 和小 Q 在玩一个策略游戏。\n\n有一个长度为 $n$ 的数组 $A$ 和一个长度为 $m$ 的数组 $B$，在此基础上定义一个大小为 $n \\times m$ 的矩阵 $C$，满足 $C_{i j} = A_i \\times B_j$。所有下标均从 $1$ 开始。\n\n游戏一共会进行 $q$ 轮，在每一轮游戏中，会事先给出 $4$ 个参数 $l_1, r_1, l_2, r_2$，满足 $1 \\le l_1 \\le r_1 \\le n$、$1 \\le l_2 \\le r_2 \\le m$。\n\n游戏中，小 L 先选择一个 $l_1 \\sim r_1$ 之间的下标 $x$，然后小 Q 选择一个 $l_2 \\sim r_2$ 之间的下标 $y$。定义这一轮游戏中二人的得分是 $C_{x y}$。\n\n小 L 的目标是使得这个得分尽可能大，小 Q 的目标是使得这个得分尽可能小。同时两人都是足够聪明的玩家，每次都会采用最优的策略。\n\n请问：按照二人的最优策略，每轮游戏的得分分别是多少？", "inputFormat": "第一行输入三个正整数 $n, m, q$，分别表示数组 $A$，数组 $B$ 的长度和游戏轮数。\n\n第二行：$n$ 个整数，表示 $A_i$，分别表示数组 $A$ 的元素。\n\n第三行：$m$ 个整数，表示 $B_i$，分别表示数组 $B$ 的元素。\n\n接下来 $q$ 行，每行四个正整数，表示这一次游戏的 $l_1, r_1, l_2, r_2$。", "outputFormat": "输出共 $q$ 行，每行一个整数，分别表示每一轮游戏中，小 L 和小 Q 在最优策略下的得分。", "hint": "**【样例解释 \\#1】**\n\n这组数据中，矩阵 $C$ 如下：\n\n$$ \\begin{bmatrix} 0 & 0 \\\\ -3 & 4 \\\\ 6 & -8 \\end{bmatrix} $$\n\n在第一轮游戏中，无论小 L 选取的是 $x = 2$ 还是 $x = 3$，小 Q 都有办法选择某个 $y$ 使得最终的得分为负数。因此小 L 选择 $x = 1$ 是最优的，因为这样得分一定为 $0$。\n\n而在第二轮游戏中，由于小 L 可以选 $x = 2$，小 Q 只能选 $y = 2$，如此得分为 $4$。\n\n**【样例 \\#3】**\n\n见附件中的 `game/game3.in` 与 `game/game3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `game/game4.in` 与 `game/game4.ans`。\n\n**【数据范围】**\n\n对于所有数据，$1 \\le n, m, q \\le {10}^5$，$-{10}^9 \\le A_i, B_i \\le {10}^9$。对于每轮游戏而言，$1 \\le l_1 \\le r_1 \\le n$，$1 \\le l_2 \\le r_2 \\le m$。\n\n| 测试点编号 | $n, m, q \\le$ | 特殊条件 |\n|:-:|:-:|:-:|\n| $1$ | $200$ | 1, 2 |\n| $2$ | $200$ | 1 |\n| $3$ | $200$ | 2 |\n| $4 \\sim 5$ | $200$ | 无 |\n| $6$ | $1000$ | 1, 2 |\n| $7 \\sim 8$ | $1000$ | 1 |\n| $9 \\sim 10$ | $1000$ | 2 |\n| $11 \\sim 12$ | $1000$ | 无 |\n| $13$ | ${10}^5$ | 1, 2 |\n| $14 \\sim 15$ | ${10}^5$ | 1 |\n| $16 \\sim 17$ | ${10}^5$ | 2 |\n| $18 \\sim 20$ | ${10}^5$ | 无 |\n\n其中，特殊性质 1 为：保证 $A_i, B_i > 0$。  \n特殊性质 2 为：保证对于每轮游戏而言，要么 $l_1 = r_1$，要么 $l_2 = r_2$。", "locale": "zh-CN"}}}
{"pid": "P8819", "type": "P", "difficulty": 6, "samples": [["3 6\n2 3\n2 1\n1 2\n1 3\n3 1\n3 2\n11\n1 3 2\n1 2 3\n1 1 3\n1 1 2\n3 1 3\n3 3 2\n2 3\n1 3 1\n3 1 3\n4 2\n1 3 2\n", "NO\nNO\nYES\nNO\nYES\nNO\nNO\nNO\nYES\nNO\nNO\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2022", "O2优化", "哈希 hashing", "基环树", "CSP-S 提高级"], "title": "[CSP-S 2022] 星战", "background": "", "description": "在这一轮的星际战争中，我方在宇宙中建立了 $n$ 个据点，以 $m$ 个单向虫洞连接。我们把终点为据点 $u$ 的所有虫洞归为据点 $u$ 的虫洞。\n\n战火纷飞之中这些虫洞很难长久存在，敌人的打击随时可能到来。这些打击中的有效打击可以分为两类：\n\n1. 敌人会摧毁某个虫洞，这会使它连接的两个据点无法再通过这个虫洞直接到达，但这样的打击无法摧毁它连接的两个据点。\n2. 敌人会摧毁某个据点，由于虫洞的主要技术集中在出口处，这会导致该据点的所有还未被摧毁的虫洞被一同摧毁。而从这个据点出发的虫洞则**不会摧毁**。\n\n注意：摧毁只会导致虫洞不可用，而不会消除它的存在。\n\n为了抗击敌人并维护各部队和各据点之间的联系，我方发展出了两种特种部队负责修复虫洞：\n\n- A 型特种部队则可以将某个特定的虫洞修复。\n- B 型特种部队可以将某据点的所有损坏的虫洞修复。\n\n考虑到敌人打击的特点，我方并未在据点上储备过多的战略物资。因此只要这个据点的某一条虫洞被修复，处于可用状态，那么这个据点也是可用的。\n\n我方掌握了一种苛刻的空间特性，利用这一特性我方战舰可以沿着虫洞瞬移到敌方阵营，实现精确打击。\n\n为了把握发动反攻的最佳时机，指挥部必须关注战场上的所有变化，为了寻找一个能够进行反攻的时刻。总指挥认为：\n\n- 如果从我方的任何据点出发，在选择了合适的路线的前提下，可以进行无限次的虫洞穿梭（可以多次经过同一据点或同一虫洞），那么这个据点就可以**实现反击**。\n- 为了使虫洞穿梭的过程连续，尽量减少战舰在据点切换虫洞时的质能损耗，当且仅当**只有一个从该据点出发的虫洞可用**时，这个据点可以**实现连续穿梭**。\n- 如果我方所有据点都可以**实现反击**，也都可以**实现连续穿梭**，那么这个时刻就是一个绝佳的**反攻**时刻。\n\n总司令为你下达命令，要求你根据战场上实时反馈的信息，迅速告诉他当前的时刻是否能够进行一次**反攻**。", "inputFormat": "输入的第一行包含两个正整数 $n,m$。\n\n接下来 $m$ 行每行两个数 $u,v$，表示一个从据点 $u$ 出发到据点 $v$ 的虫洞。保证 $u \\ne v$，保证不会有两条相同的虫洞。初始时所有的虫洞和据点都是完好的。\n\n接下来一行一个正整数 $q$ 表示询问个数。\n\n接下来 $q$ 行每行表示一次询问或操作。首先读入一个正整数 $t$ 表示指令类型：\n\n- 若 $t = 1$，接下来两个整数 $u, v$ 表示敌人摧毁了从据点 $u$ 出发到据点 $v$ 的虫洞。保证该虫洞存在且未被摧毁。\n- 若 $t = 2$，接下来一个整数 $u$ 表示敌人摧毁了据点 $u$。如果该据点的虫洞已全部被摧毁，那么这次袭击不会有任何效果。\n- 若 $t = 3$，接下来两个整数 $u, v$ 表示我方修复了从据点 $u$ 出发到据点 $v$ 的虫洞。保证该虫洞存在且被摧毁。\n- 若 $t = 4$，接下来一个整数 $u$ 表示我方修复了据点 $u$。如果该据点没有被摧毁的虫洞，那么这次修复不会有任何效果。\n\n在每次指令执行之后，你需要判断能否进行一次反攻。如果能则输出 `YES` 否则输出 `NO`。", "outputFormat": "输出一共 $q$ 行。对于每个指令，输出这个指令执行后能否进行反攻。", "hint": "**【样例解释 \\#1】**\n\n虫洞状态可以参考下面的图片, 图中的边表示存在且未被摧毁的虫洞：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/giqzyc7r.png)\n\n**【样例 \\#2】**\n\n见附件中的 `galaxy/galaxy2.in` 与 `galaxy/galaxy2.ans`。\n\n**【样例 \\#3】**\n\n见附件中的 `galaxy/galaxy3.in` 与 `galaxy/galaxy3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `galaxy/galaxy4.in` 与 `galaxy/galaxy4.ans`。\n\n**【数据范围】**\n\n对于所有数据保证：$1 \\le n \\le 5 \\times {10}^5$，$1 \\le m \\le 5 \\times {10}^5$，$1 \\le q \\le 5 \\times {10}^5$。\n\n| 测试点 | $n \\le$ | $m \\le$ | $q \\le$ | 特殊限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1 \\sim 3$ | $10$ | $20$ | $50$ | 无 |\n| $4 \\sim 8$ | ${10}^3$ | ${10}^4$ | ${10}^3$ | 无 |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 保证没有 $t = 2$ 和 $t = 4$ 的情况 |\n| $11 \\sim 12$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 保证没有 $t = 4$ 的情况 |\n| $13 \\sim 16$ | ${10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 无 |\n| $17 \\sim 20$ | $5 \\times {10}^5$ | $5\\times 10^5$ | $5 \\times {10}^5$ | 无 |", "locale": "zh-CN", "translations": {"en": {"title": "[CSP-S 2022] Galaxy", "background": "", "description": "In this round of interstellar war, we have established $n$ bases in the universe, connected by $m$ directed wormholes. We group all wormholes whose destination is base $u$ as base $u$’s wormholes.\n\nAmid fierce warfare, these wormholes are unlikely to last long, and enemy strikes may come at any time. The effective strikes can be divided into two types:\n\n1. The enemy destroys a wormhole. This makes it impossible to directly travel between its two connected bases via this wormhole, but such a strike cannot destroy the two bases it connects.\n2. The enemy destroys a base. Since the key technology of a wormhole is concentrated at its exit, this causes all wormholes of that base that have not yet been destroyed to be destroyed together. Wormholes departing from this base, however, will **not be destroyed**.\n\nNote: Destruction only makes wormholes unusable and does not erase their existence.\n\nTo resist the enemy and maintain links between units and bases, we developed two special forces to repair wormholes:\n\n- Type A special forces can repair a specific wormhole.\n- Type B special forces can repair all damaged wormholes of a single base.\n\nGiven the nature of enemy strikes, we do not stockpile too many strategic supplies at bases. Therefore, as long as any one wormhole of a base is repaired and usable, that base is considered usable.\n\nWe have mastered a stringent spatial property that allows our warships to instantaneously jump along wormholes into enemy territory for precise strikes.\n\nTo seize the best timing for a counteroffensive, the command must track all changes on the battlefield. The commander believes:\n\n- If, starting from any of our bases, by choosing an appropriate route, one can shuttle through wormholes infinitely many times (the same base or wormhole may be visited multiple times), then this base can “launch a counterattack”.\n- To keep the shuttling process continuous and minimize mass–energy loss when switching wormholes at a base, a base can achieve “continuous traversal” if and only if exactly one wormhole departing from that base is usable.\n- If all our bases can both “launch a counterattack” and achieve “continuous traversal”, then this moment is an excellent “counteroffensive” moment.\n\nYou are ordered to promptly report, based on real-time battlefield information, whether a “counteroffensive” can be carried out at the current moment.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThe next $m$ lines each contain two integers $u, v$, representing a directed wormhole from base $u$ to base $v$. It is guaranteed that $u \\ne v$, and there are no duplicate wormholes. Initially, all wormholes and bases are intact.\n\nThe next line contains a positive integer $q$ denoting the number of queries.\n\nThe following $q$ lines each describe a query or operation. First read an integer $t$ indicating the instruction type:\n\n- If $t = 1$, the next two integers $u, v$ indicate the enemy destroyed the wormhole from base $u$ to base $v$. It is guaranteed that this wormhole exists and has not been destroyed.\n- If $t = 2$, the next integer $u$ indicates the enemy destroyed base $u$. If all wormholes of this base have already been destroyed, then this strike has no effect.\n- If $t = 3$, the next two integers $u, v$ indicate we repaired the wormhole from base $u$ to base $v$. It is guaranteed that this wormhole exists and has been destroyed.\n- If $t = 4$, the next integer $u$ indicates we repaired base $u$. If this base has no destroyed wormholes, then this repair has no effect.\n\nAfter each instruction is executed, determine whether a counteroffensive can be carried out. Output `YES` if it can, otherwise output `NO`.", "outputFormat": "Output exactly $q$ lines. For each instruction, output whether a counteroffensive can be carried out after the instruction is executed.", "hint": "【Sample Explanation #1】\n\nYou can refer to the following image for the wormhole status. In the figure, an edge denotes a wormhole that exists and has not been destroyed:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/giqzyc7r.png)\n\n【Sample #2】\n\nSee `galaxy/galaxy2.in` and `galaxy/galaxy2.ans` in the attachment.\n\n【Sample #3】\n\nSee `galaxy/galaxy3.in` and `galaxy/galaxy3.ans` in the attachment.\n\n【Sample #4】\n\nSee `galaxy/galaxy4.in` and `galaxy/galaxy4.ans` in the attachment.\n\n# Constraints\n\nFor all testdata, it is guaranteed that $1 \\le n \\le 5 \\times {10}^5$, $1 \\le m \\le 5 \\times {10}^5$, $1 \\le q \\le 5 \\times {10}^5$.\n\n| Test point | $n \\le$ | $m \\le$ | $q \\le$ | Special constraints |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1 \\sim 3$ | $10$ | $20$ | $50$ | None |\n| $4 \\sim 8$ | ${10}^3$ | ${10}^4$ | ${10}^3$ | None |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | It is guaranteed that there are no cases with $t = 2$ or $t = 4$. |\n| $11 \\sim 12$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | It is guaranteed that there are no cases with $t = 4$. |\n| $13 \\sim 16$ | ${10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | None |\n| $17 \\sim 20$ | $5\\times 10^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | None |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CSP-S 2022] 星战", "background": "", "description": "在这一轮的星际战争中，我方在宇宙中建立了 $n$ 个据点，以 $m$ 个单向虫洞连接。我们把终点为据点 $u$ 的所有虫洞归为据点 $u$ 的虫洞。\n\n战火纷飞之中这些虫洞很难长久存在，敌人的打击随时可能到来。这些打击中的有效打击可以分为两类：\n\n1. 敌人会摧毁某个虫洞，这会使它连接的两个据点无法再通过这个虫洞直接到达，但这样的打击无法摧毁它连接的两个据点。\n2. 敌人会摧毁某个据点，由于虫洞的主要技术集中在出口处，这会导致该据点的所有还未被摧毁的虫洞被一同摧毁。而从这个据点出发的虫洞则**不会摧毁**。\n\n注意：摧毁只会导致虫洞不可用，而不会消除它的存在。\n\n为了抗击敌人并维护各部队和各据点之间的联系，我方发展出了两种特种部队负责修复虫洞：\n\n- A 型特种部队则可以将某个特定的虫洞修复。\n- B 型特种部队可以将某据点的所有损坏的虫洞修复。\n\n考虑到敌人打击的特点，我方并未在据点上储备过多的战略物资。因此只要这个据点的某一条虫洞被修复，处于可用状态，那么这个据点也是可用的。\n\n我方掌握了一种苛刻的空间特性，利用这一特性我方战舰可以沿着虫洞瞬移到敌方阵营，实现精确打击。\n\n为了把握发动反攻的最佳时机，指挥部必须关注战场上的所有变化，为了寻找一个能够进行反攻的时刻。总指挥认为：\n\n- 如果从我方的任何据点出发，在选择了合适的路线的前提下，可以进行无限次的虫洞穿梭（可以多次经过同一据点或同一虫洞），那么这个据点就可以**实现反击**。\n- 为了使虫洞穿梭的过程连续，尽量减少战舰在据点切换虫洞时的质能损耗，当且仅当**只有一个从该据点出发的虫洞可用**时，这个据点可以**实现连续穿梭**。\n- 如果我方所有据点都可以**实现反击**，也都可以**实现连续穿梭**，那么这个时刻就是一个绝佳的**反攻**时刻。\n\n总司令为你下达命令，要求你根据战场上实时反馈的信息，迅速告诉他当前的时刻是否能够进行一次**反攻**。", "inputFormat": "输入的第一行包含两个正整数 $n,m$。\n\n接下来 $m$ 行每行两个数 $u,v$，表示一个从据点 $u$ 出发到据点 $v$ 的虫洞。保证 $u \\ne v$，保证不会有两条相同的虫洞。初始时所有的虫洞和据点都是完好的。\n\n接下来一行一个正整数 $q$ 表示询问个数。\n\n接下来 $q$ 行每行表示一次询问或操作。首先读入一个正整数 $t$ 表示指令类型：\n\n- 若 $t = 1$，接下来两个整数 $u, v$ 表示敌人摧毁了从据点 $u$ 出发到据点 $v$ 的虫洞。保证该虫洞存在且未被摧毁。\n- 若 $t = 2$，接下来一个整数 $u$ 表示敌人摧毁了据点 $u$。如果该据点的虫洞已全部被摧毁，那么这次袭击不会有任何效果。\n- 若 $t = 3$，接下来两个整数 $u, v$ 表示我方修复了从据点 $u$ 出发到据点 $v$ 的虫洞。保证该虫洞存在且被摧毁。\n- 若 $t = 4$，接下来一个整数 $u$ 表示我方修复了据点 $u$。如果该据点没有被摧毁的虫洞，那么这次修复不会有任何效果。\n\n在每次指令执行之后，你需要判断能否进行一次反攻。如果能则输出 `YES` 否则输出 `NO`。", "outputFormat": "输出一共 $q$ 行。对于每个指令，输出这个指令执行后能否进行反攻。", "hint": "**【样例解释 \\#1】**\n\n虫洞状态可以参考下面的图片, 图中的边表示存在且未被摧毁的虫洞：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/giqzyc7r.png)\n\n**【样例 \\#2】**\n\n见附件中的 `galaxy/galaxy2.in` 与 `galaxy/galaxy2.ans`。\n\n**【样例 \\#3】**\n\n见附件中的 `galaxy/galaxy3.in` 与 `galaxy/galaxy3.ans`。\n\n**【样例 \\#4】**\n\n见附件中的 `galaxy/galaxy4.in` 与 `galaxy/galaxy4.ans`。\n\n**【数据范围】**\n\n对于所有数据保证：$1 \\le n \\le 5 \\times {10}^5$，$1 \\le m \\le 5 \\times {10}^5$，$1 \\le q \\le 5 \\times {10}^5$。\n\n| 测试点 | $n \\le$ | $m \\le$ | $q \\le$ | 特殊限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1 \\sim 3$ | $10$ | $20$ | $50$ | 无 |\n| $4 \\sim 8$ | ${10}^3$ | ${10}^4$ | ${10}^3$ | 无 |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 保证没有 $t = 2$ 和 $t = 4$ 的情况 |\n| $11 \\sim 12$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 保证没有 $t = 4$ 的情况 |\n| $13 \\sim 16$ | ${10}^5$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 无 |\n| $17 \\sim 20$ | $5 \\times {10}^5$ | $5\\times 10^5$ | $5 \\times {10}^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8820", "type": "P", "difficulty": 6, "samples": [["7 3 3\n1 2 3 4 5 6 7\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n4 7\n5 6\n1 2\n", "12\n12\n3\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2022", "O2优化", "树链剖分", "矩阵乘法", "CSP-S 提高级", "动态 DP"], "title": "[CSP-S 2022] 数据传输", "background": "**请勿滥用本题评测，违者可能处以封号处罚。**", "description": "小 C 正在设计计算机网络中的路由系统。\n\n测试用的网络总共有 $n$ 台主机，依次编号为 $1 \\sim n$。这 $n$ 台主机之间由 $n - 1$ 根网线连接，第 $i$ 条网线连接两个主机 $a_i$ 和 $b_i$。保证任意两台主机可以通过有限根网线直接或者间接地相连。受制于信息发送的功率，主机 $a$ 能够直接将信息传输给主机 $b$ 当且仅当两个主机在可以通过不超过 $k$ 根网线直接或者间接的相连。\n\n在计算机网络中，数据的传输往往需要通过若干次转发。假定小 C 需要将数据从主机 $a$ 传输到主机 $b$（$a \\neq b$），则其会选择出若干台用于传输的主机 $c_1 = a, c_2, \\ldots, c_{m - 1}, c_m = b$，并按照如下规则转发：对于所有的 $1 \\le i < m$，主机 $c_i$ 将信息直接发送给 $c_{i + 1}$。\n\n每台主机处理信息都需要一定的时间，第 $i$ 台主机处理信息需要 $v_i$ 单位的时间。数据在网络中的传输非常迅速，因此传输的时间可以忽略不计。据此，上述传输过程花费的时间为 $\\sum_{i = 1}^{m} v_{c_i}$。\n\n现在总共有 $q$ 次数据发送请求，第 $i$ 次请求会从主机 $s_i$ 发送数据到主机 $t_i$。小 C 想要知道，对于每一次请求至少需要花费多少单位时间才能完成传输。", "inputFormat": "输入的第一行包含三个正整数 $n, Q, k$，分别表示网络主机个数，请求个数，传输参数。数据保证 $1 \\le n \\le 2 \\times {10}^5$，$1 \\le Q \\le 2 \\times {10}^5$，$1 \\le k \\le 3$。\n\n输入的第二行包含 $n$ 个正整数，第 $i$ 个正整数表示 $v_i$，保证 $1 \\le v_i \\le {10}^9$。\n\n接下来 $n - 1$ 行，第 $i$ 行包含两个正整数 $a_i, b_i$，表示一条连接主机 $a_i, b_i$ 的网线。保证 $1 \\le a_i, b_i \\le n$。\n\n接下来 $Q$ 行，第 $i$ 行包含两个正整数 $s_i, t_i$，表示一次从主机 $s_i$ 发送数据到主机 $t_i$ 的请求。保证 $1 \\le s_i, t_i \\le n$，$s_i \\ne t_i$。", "outputFormat": "$Q$ 行，每行一个正整数，表示第 $i$ 次请求在传输的时候至少需要花费多少单位的时间。", "hint": "**【样例解释 \\#1】**\n\n对于第一组请求，由于主机 $4, 7$ 之间需要至少 $4$ 根网线才能连接，因此数据无法在两台主机之间直接传输，其至少需要一次转发；我们让其在主机 $1$ 进行一次转发，不难发现主机 $1$ 和主机 $4, 7$ 之间都只需要两根网线即可连接，且主机 $1$ 的数据处理时间仅为 $1$，为所有主机中最小，因此最少传输的时间为 $4 + 1 + 7 = 12$。\n\n对于第三组请求，由于主机 $1, 2$ 之间只需要 $1$ 根网线就能连接，因此数据直接传输就是最优解，最少传输的时间为 $1 + 2 = 3$。\n\n**【样例 \\#2】**\n\n见附件中的 `transmit/transmit2.in` 与 `transmit/transmit2.ans`。\n\n该样例满足测试点 $2$ 的限制。\n\n**【样例 \\#3】**\n\n见附件中的 `transmit/transmit3.in` 与 `transmit/transmit3.ans`。\n\n该样例满足测试点 $3$ 的限制。\n\n**【样例 \\#4】**\n\n见附件中的 `transmit/transmit4.in` 与 `transmit/transmit4.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n**【数据范围】**\n\n对于所有的测试数据，满足 $1 \\le n \\le 2 \\times {10}^5$，$1 \\le Q \\le 2 \\times {10}^5$，$1 \\le k \\le 3$，$1 \\le a_i, b_i \\le n$，$1 \\le s_i, t_i \\le n$，$s_i \\ne t_i$。\n\n| 测试点 | $n \\le$ | $Q \\le$ | $k =$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $10$ | $10$ | $2$ | 是 |\n| $2$ | $10$ | $10$ | $3$ | 是 |\n| $3$ | $200$ | $200$ | $2$ | 是 |\n| $4 \\sim 5$ | $200$ | $200$ | $3$ | 是 |\n| $6 \\sim 7$ | $2000$ | $2000$ | $1$ | 否 |\n| $8 \\sim 9$ | $2000$ | $2000$ | $2$ | 否 |\n| $10 \\sim 11$ | $2000$ | $2000$ | $3$ | 否 |\n| $12 \\sim 13$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $1$ | 否 |\n| $14$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $2$ | 是 |\n| $15 \\sim 16$ | ${10}^5$ | ${10}^5$ | $2$ | 是 |\n| $17 \\sim 19$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $2$ | 否 |\n| $20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $3$ | 是 |\n| $21 \\sim 22$ | ${10}^5$ | ${10}^5$ | $3$ | 是 |\n| $23 \\sim 25$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $3$ | 否 |\n\n特殊性质：保证 $a_i = i + 1$，而 $b_i$ 则从 $1, 2, \\ldots, i$ 中等概率选取。", "locale": "zh-CN", "translations": {"en": {"title": "[CSP-S 2022] Data Transmission", "background": "Please do not abuse the judging of this problem, otherwise your account may be banned.", "description": "Xiao C is designing a routing system for a computer network.\n\nThe test network has $n$ hosts, numbered $1 \\sim n$. These $n$ hosts are connected by $n - 1$ network cables; the $i$-th cable connects hosts $a_i$ and $b_i$. It is guaranteed that any two hosts are connected directly or indirectly through a finite number of cables. Due to transmission power limits, host $a$ can directly send information to host $b$ if and only if the two hosts are connected directly or indirectly by a path that uses at most $k$ cables.\n\nIn a computer network, data transmission often requires several forwards. Suppose Xiao C needs to send data from host $a$ to host $b$ ($a \\ne b$). He will choose several hosts for transmission $c_1 = a, c_2, \\ldots, c_{m - 1}, c_m = b$, and forward as follows: for all $1 \\le i < m$, host $c_i$ directly sends information to $c_{i + 1}$.\n\nEach host needs some time to process information. The $i$-th host needs $v_i$ units of time. Data transmission in the network is very fast, so the transmission time can be ignored. Therefore, the total time cost of the above process is $\\sum_{i = 1}^{m} v_{c_i}$.\n\nThere are $Q$ data sending requests in total. In the $i$-th request, data is sent from host $s_i$ to host $t_i$. Xiao C wants to know, for each request, the minimum number of time units needed to complete the transmission.", "inputFormat": "The first line contains three positive integers $n, Q, k$, denoting the number of hosts, the number of requests, and the transmission parameter, respectively. It is guaranteed that $1 \\le n \\le 2 \\times {10}^5$, $1 \\le Q \\le 2 \\times {10}^5$, $1 \\le k \\le 3$.\n\nThe second line contains $n$ positive integers; the $i$-th integer is $v_i$, and it is guaranteed that $1 \\le v_i \\le {10}^9$.\n\nThe next $n - 1$ lines; the $i$-th line contains two positive integers $a_i, b_i$, indicating a network cable connecting hosts $a_i$ and $b_i$. It is guaranteed that $1 \\le a_i, b_i \\le n$.\n\nThe next $Q$ lines; the $i$-th line contains two positive integers $s_i, t_i$, indicating a request to send data from host $s_i$ to host $t_i$. It is guaranteed that $1 \\le s_i, t_i \\le n$ and $s_i \\ne t_i$.", "outputFormat": "Output $Q$ lines. Each line contains one positive integer, the minimum number of time units needed to complete the $i$-th request.", "hint": "【Sample Explanation #1】\n\nFor the first request, since hosts $4$ and $7$ require at least $4$ cables to connect, data cannot be transmitted directly between the two hosts, so at least one forward is required. Let it be forwarded once at host $1$. It is easy to see that both host $4$ and host $7$ are within two cables from host $1$, and host $1$ has a processing time of only $1$, the minimum among all hosts. Therefore, the minimum transmission time is $4 + 1 + 7 = 12$.\n\nFor the third request, since hosts $1$ and $2$ are connected by only $1$ cable, direct transmission is optimal, and the minimum transmission time is $1 + 2 = 3$.\n\n【Sample #2】\n\nSee the attachments `transmit/transmit2.in` and `transmit/transmit2.ans`.\n\nThis sample satisfies the limits of test point $2$.\n\n【Sample #3】\n\nSee the attachments `transmit/transmit3.in` and `transmit/transmit3.ans`.\n\nThis sample satisfies the limits of test point $3$.\n\n【Sample #4】\n\nSee the attachments `transmit/transmit4.in` and `transmit/transmit4.ans`.\n\nThis sample satisfies the limits of test point $20$.\n\n**Constraints**\n\nFor all testdata, it is guaranteed that $1 \\le n \\le 2 \\times {10}^5$, $1 \\le Q \\le 2 \\times {10}^5$, $1 \\le k \\le 3$, $1 \\le a_i, b_i \\le n$, $1 \\le s_i, t_i \\le n$, and $s_i \\ne t_i$.\n\n| Test point | $n \\le$ | $Q \\le$ | $k =$ | Special property |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $10$ | $10$ | $2$ | Yes |\n| $2$ | $10$ | $10$ | $3$ | Yes |\n| $3$ | $200$ | $200$ | $2$ | Yes |\n| $4 \\sim 5$ | $200$ | $200$ | $3$ | Yes |\n| $6 \\sim 7$ | $2000$ | $2000$ | $1$ | No |\n| $8 \\sim 9$ | $2000$ | $2000$ | $2$ | No |\n| $10 \\sim 11$ | $2000$ | $2000$ | $3$ | No |\n| $12 \\sim 13$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $1$ | No |\n| $14$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $2$ | Yes |\n| $15 \\sim 16$ | ${10}^5$ | ${10}^5$ | $2$ | Yes |\n| $17 \\sim 19$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $2$ | No |\n| $20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $3$ | Yes |\n| $21 \\sim 22$ | ${10}^5$ | ${10}^5$ | $3$ | Yes |\n| $23 \\sim 25$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $3$ | No |\n\nSpecial property: it is guaranteed that $a_i = i + 1$, and $b_i$ is chosen uniformly at random from $1, 2, \\ldots, i$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CSP-S 2022] 数据传输", "background": "**请勿滥用本题评测，违者可能处以封号处罚。**", "description": "小 C 正在设计计算机网络中的路由系统。\n\n测试用的网络总共有 $n$ 台主机，依次编号为 $1 \\sim n$。这 $n$ 台主机之间由 $n - 1$ 根网线连接，第 $i$ 条网线连接两个主机 $a_i$ 和 $b_i$。保证任意两台主机可以通过有限根网线直接或者间接地相连。受制于信息发送的功率，主机 $a$ 能够直接将信息传输给主机 $b$ 当且仅当两个主机在可以通过不超过 $k$ 根网线直接或者间接的相连。\n\n在计算机网络中，数据的传输往往需要通过若干次转发。假定小 C 需要将数据从主机 $a$ 传输到主机 $b$（$a \\neq b$），则其会选择出若干台用于传输的主机 $c_1 = a, c_2, \\ldots, c_{m - 1}, c_m = b$，并按照如下规则转发：对于所有的 $1 \\le i < m$，主机 $c_i$ 将信息直接发送给 $c_{i + 1}$。\n\n每台主机处理信息都需要一定的时间，第 $i$ 台主机处理信息需要 $v_i$ 单位的时间。数据在网络中的传输非常迅速，因此传输的时间可以忽略不计。据此，上述传输过程花费的时间为 $\\sum_{i = 1}^{m} v_{c_i}$。\n\n现在总共有 $q$ 次数据发送请求，第 $i$ 次请求会从主机 $s_i$ 发送数据到主机 $t_i$。小 C 想要知道，对于每一次请求至少需要花费多少单位时间才能完成传输。", "inputFormat": "输入的第一行包含三个正整数 $n, Q, k$，分别表示网络主机个数，请求个数，传输参数。数据保证 $1 \\le n \\le 2 \\times {10}^5$，$1 \\le Q \\le 2 \\times {10}^5$，$1 \\le k \\le 3$。\n\n输入的第二行包含 $n$ 个正整数，第 $i$ 个正整数表示 $v_i$，保证 $1 \\le v_i \\le {10}^9$。\n\n接下来 $n - 1$ 行，第 $i$ 行包含两个正整数 $a_i, b_i$，表示一条连接主机 $a_i, b_i$ 的网线。保证 $1 \\le a_i, b_i \\le n$。\n\n接下来 $Q$ 行，第 $i$ 行包含两个正整数 $s_i, t_i$，表示一次从主机 $s_i$ 发送数据到主机 $t_i$ 的请求。保证 $1 \\le s_i, t_i \\le n$，$s_i \\ne t_i$。", "outputFormat": "$Q$ 行，每行一个正整数，表示第 $i$ 次请求在传输的时候至少需要花费多少单位的时间。", "hint": "**【样例解释 \\#1】**\n\n对于第一组请求，由于主机 $4, 7$ 之间需要至少 $4$ 根网线才能连接，因此数据无法在两台主机之间直接传输，其至少需要一次转发；我们让其在主机 $1$ 进行一次转发，不难发现主机 $1$ 和主机 $4, 7$ 之间都只需要两根网线即可连接，且主机 $1$ 的数据处理时间仅为 $1$，为所有主机中最小，因此最少传输的时间为 $4 + 1 + 7 = 12$。\n\n对于第三组请求，由于主机 $1, 2$ 之间只需要 $1$ 根网线就能连接，因此数据直接传输就是最优解，最少传输的时间为 $1 + 2 = 3$。\n\n**【样例 \\#2】**\n\n见附件中的 `transmit/transmit2.in` 与 `transmit/transmit2.ans`。\n\n该样例满足测试点 $2$ 的限制。\n\n**【样例 \\#3】**\n\n见附件中的 `transmit/transmit3.in` 与 `transmit/transmit3.ans`。\n\n该样例满足测试点 $3$ 的限制。\n\n**【样例 \\#4】**\n\n见附件中的 `transmit/transmit4.in` 与 `transmit/transmit4.ans`。\n\n该样例满足测试点 $20$ 的限制。\n\n**【数据范围】**\n\n对于所有的测试数据，满足 $1 \\le n \\le 2 \\times {10}^5$，$1 \\le Q \\le 2 \\times {10}^5$，$1 \\le k \\le 3$，$1 \\le a_i, b_i \\le n$，$1 \\le s_i, t_i \\le n$，$s_i \\ne t_i$。\n\n| 测试点 | $n \\le$ | $Q \\le$ | $k =$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $10$ | $10$ | $2$ | 是 |\n| $2$ | $10$ | $10$ | $3$ | 是 |\n| $3$ | $200$ | $200$ | $2$ | 是 |\n| $4 \\sim 5$ | $200$ | $200$ | $3$ | 是 |\n| $6 \\sim 7$ | $2000$ | $2000$ | $1$ | 否 |\n| $8 \\sim 9$ | $2000$ | $2000$ | $2$ | 否 |\n| $10 \\sim 11$ | $2000$ | $2000$ | $3$ | 否 |\n| $12 \\sim 13$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $1$ | 否 |\n| $14$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $2$ | 是 |\n| $15 \\sim 16$ | ${10}^5$ | ${10}^5$ | $2$ | 是 |\n| $17 \\sim 19$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $2$ | 否 |\n| $20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $3$ | 是 |\n| $21 \\sim 22$ | ${10}^5$ | ${10}^5$ | $3$ | 是 |\n| $23 \\sim 25$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | $3$ | 否 |\n\n特殊性质：保证 $a_i = i + 1$，而 $b_i$ 则从 $1, 2, \\ldots, i$ 中等概率选取。", "locale": "zh-CN"}}}
{"pid": "P8821", "type": "P", "difficulty": 6, "samples": [["-1\n3 3\n1 2\n2 3\n1 2\n2 3\n1 3", "32"], ["-1\n4 6\n1 2\n1 3\n1 4\n1 2\n1 3\n1 4\n2 3\n2 4\n3 4", "120"], ["-1\n7 7\n1 2\n1 3\n2 4\n4 5\n5 6\n5 7\n5 7\n3 1\n4 7\n7 1\n2 6\n3 6\n3 5", "330"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["集训队互测", "2022", "O2优化"], "title": "[集训队互测 2022] 树链剖分", "background": "请注意：**本题不是树链剖分模板题**。", "description": "给定一棵 $n$ 个节点的树 $T$ 以及树上的 $m$ 条 **不同的** 路径 $I_i = (u_i, v_i)(u_i\\neq v_i)$。具体地，$I_i$ 表示树上 $u_i$ 和 $v_i$ 之间的简单路径上所有点形成的点集。\n\n考虑 $T$ 上某条路径 $I = (u, v)$，定义 $f(I) = \\sum\\limits_{i = 1} ^ m\\sum\\limits_{j = 1} ^ m [I_i\\cup I = I_j\\cup I]$。\n\n对于 $T$ 上所有不同路径 $I$，求 $f(I)$ 之和，并将答案对 $998244353$ 取模。也就是说，你需要求 $\\left(\\sum\\limits_{u = 1} ^ n\\sum\\limits_{v = u} ^ n f((u, v))\\right) \\bmod 998244353$。", "inputFormat": "第一行一个整数 $S$，表示子任务编号。样例的子任务编号为 $-1$。\n\n第二行两个整数 $n, m$，分别表示树的大小和路径条数。\n\n接下来 $n - 1$ 行，每行两个整数 $x_i, y_i$ 表示 $T$ 上的一条边。\n\n接下来 $m$ 行，每行两个整数 $u_i, v_i$ 表示第 $i$ 条路径 $I_i$。\n\n**保证给定路径两两不同**。", "outputFormat": "输出一行一个整数表示答案。", "hint": "本题采用捆绑测试，共 $25$ 个子任务，分别编号为 $0\\sim 24$。**注意评测子任务编号为实际子任务编号 $+1$**。\n\n子任务编号模 $5$ 的余数将子任务按数据大小划分。\n\n- 若子任务编号模 $5$ 余 $0$，则 $n, m\\leq 100$，记为 A1。\n- 若子任务编号模 $5$ 余 $1$，则 $n, m\\leq 500$，记为 B1。依赖于 A1。\n- 若子任务编号模 $5$ 余 $2$，则 $n, m\\leq 1557$，记为 C1。依赖于 B1。\n- 若子任务编号模 $5$ 余 $3$，则 $n, m\\leq 85500$，记为 D1。依赖于 C1。\n- 若子任务编号模 $5$ 余 $4$，则 $n, m\\leq 2\\times 10 ^ 5$，记为 E1。依赖于 D1。\n\n子任务编号除以 $5$ 的商将子任务按特殊限制划分。\n\n- 若子任务编号除以 $5$ 商 $0$，则 $T$ 是一条链，记为 A2。\n- 若子任务编号除以 $5$ 商 $1$，则 $T$ 是一个菊花，记为 B2。\n- 若子任务编号除以 $5$ 商 $2$，则所有路径端点互不相同，记为 C2。\n- 若子任务编号除以 $5$ 商 $3$，则所有路径以同一点为一端，记为 D2。\n- 若子任务编号除以 $5$ 商 $4$，则无特殊限制，记为 E2。依赖于 A2，B2，C2，D2。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 2\\times 10 ^ 5$，$1\\leq m\\leq \\min(\\frac {n(n - 1)} 2, 2\\times 10 ^ 5)$，$1\\leq u_i, v_i, x_i, y_i\\leq n$，且所有 $(x_i, y_i)$ 形成一棵树，所有 $I_i = (u_i, v_i)$ 互不相同，$u_i\\neq v_i$。\n\n各子任务分值如下表所示。\n\n| **得分** | **A1** | **B1** | **C1** | **D1** | **E1** | **总和** |\n| :------: | :----: | :----: | :----: | :----: | :----: | :------: |\n|  **A2**  |  $1$   |  $2$   |  $3$   |  $7$   |  $7$   |   $20$   |\n|  **B2**  |  $1$   |  $2$   |  $3$   |  $4$   |  $4$   |   $14$   |\n|  **C2**  |  $1$   |  $2$   |  $5$   |  $7$   |  $7$   |   $22$   |\n|  **D2**  |  $1$   |  $3$   |  $5$   |  $4$   |  $5$   |   $18$   |\n|  **E2**  |  $2$   |  $3$   |  $3$   |  $9$   |  $9$   |   $26$   |\n| **总和** |  $6$   |  $12$  |  $19$  |  $31$  |  $32$  |  $100$   |\n\n**注：洛谷评测无子任务依赖**。\n\n来源：2022 年集训队互测 Round 4。\n\n出题人：Alex_Wei。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2022] 树链剖分", "background": "请注意：**本题不是树链剖分模板题**。", "description": "给定一棵 $n$ 个节点的树 $T$ 以及树上的 $m$ 条 **不同的** 路径 $I_i = (u_i, v_i)(u_i\\neq v_i)$。具体地，$I_i$ 表示树上 $u_i$ 和 $v_i$ 之间的简单路径上所有点形成的点集。\n\n考虑 $T$ 上某条路径 $I = (u, v)$，定义 $f(I) = \\sum\\limits_{i = 1} ^ m\\sum\\limits_{j = 1} ^ m [I_i\\cup I = I_j\\cup I]$。\n\n对于 $T$ 上所有不同路径 $I$，求 $f(I)$ 之和，并将答案对 $998244353$ 取模。也就是说，你需要求 $\\left(\\sum\\limits_{u = 1} ^ n\\sum\\limits_{v = u} ^ n f((u, v))\\right) \\bmod 998244353$。", "inputFormat": "第一行一个整数 $S$，表示子任务编号。样例的子任务编号为 $-1$。\n\n第二行两个整数 $n, m$，分别表示树的大小和路径条数。\n\n接下来 $n - 1$ 行，每行两个整数 $x_i, y_i$ 表示 $T$ 上的一条边。\n\n接下来 $m$ 行，每行两个整数 $u_i, v_i$ 表示第 $i$ 条路径 $I_i$。\n\n**保证给定路径两两不同**。", "outputFormat": "输出一行一个整数表示答案。", "hint": "本题采用捆绑测试，共 $25$ 个子任务，分别编号为 $0\\sim 24$。**注意评测子任务编号为实际子任务编号 $+1$**。\n\n子任务编号模 $5$ 的余数将子任务按数据大小划分。\n\n- 若子任务编号模 $5$ 余 $0$，则 $n, m\\leq 100$，记为 A1。\n- 若子任务编号模 $5$ 余 $1$，则 $n, m\\leq 500$，记为 B1。依赖于 A1。\n- 若子任务编号模 $5$ 余 $2$，则 $n, m\\leq 1557$，记为 C1。依赖于 B1。\n- 若子任务编号模 $5$ 余 $3$，则 $n, m\\leq 85500$，记为 D1。依赖于 C1。\n- 若子任务编号模 $5$ 余 $4$，则 $n, m\\leq 2\\times 10 ^ 5$，记为 E1。依赖于 D1。\n\n子任务编号除以 $5$ 的商将子任务按特殊限制划分。\n\n- 若子任务编号除以 $5$ 商 $0$，则 $T$ 是一条链，记为 A2。\n- 若子任务编号除以 $5$ 商 $1$，则 $T$ 是一个菊花，记为 B2。\n- 若子任务编号除以 $5$ 商 $2$，则所有路径端点互不相同，记为 C2。\n- 若子任务编号除以 $5$ 商 $3$，则所有路径以同一点为一端，记为 D2。\n- 若子任务编号除以 $5$ 商 $4$，则无特殊限制，记为 E2。依赖于 A2，B2，C2，D2。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 2\\times 10 ^ 5$，$1\\leq m\\leq \\min(\\frac {n(n - 1)} 2, 2\\times 10 ^ 5)$，$1\\leq u_i, v_i, x_i, y_i\\leq n$，且所有 $(x_i, y_i)$ 形成一棵树，所有 $I_i = (u_i, v_i)$ 互不相同，$u_i\\neq v_i$。\n\n各子任务分值如下表所示。\n\n| **得分** | **A1** | **B1** | **C1** | **D1** | **E1** | **总和** |\n| :------: | :----: | :----: | :----: | :----: | :----: | :------: |\n|  **A2**  |  $1$   |  $2$   |  $3$   |  $7$   |  $7$   |   $20$   |\n|  **B2**  |  $1$   |  $2$   |  $3$   |  $4$   |  $4$   |   $14$   |\n|  **C2**  |  $1$   |  $2$   |  $5$   |  $7$   |  $7$   |   $22$   |\n|  **D2**  |  $1$   |  $3$   |  $5$   |  $4$   |  $5$   |   $18$   |\n|  **E2**  |  $2$   |  $3$   |  $3$   |  $9$   |  $9$   |   $26$   |\n| **总和** |  $6$   |  $12$  |  $19$  |  $31$  |  $32$  |  $100$   |\n\n**注：洛谷评测无子任务依赖**。\n\n来源：2022 年集训队互测 Round 4。\n\n出题人：Alex_Wei。", "locale": "zh-CN"}}}
{"pid": "P8822", "type": "P", "difficulty": 1, "samples": [["5 1 1 1", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "数学", "传智杯"], "title": "[传智杯 #3 初赛] 课程报名", "background": "", "description": "传智播客推出了一款课程，并进行了一次促销活动。具体来说就是，课程的初始定价为 $v$ 元；每报名 $m$ 个学员，课程的定价就要提升 $a$ 元。由于课程能够容纳的学生有限，因此报名到 $n$ 人的时候就停止报名。\n\n现在老师想知道，当课程停止报名时，一共可以获得多少学费呢？", "inputFormat": "一行四个使用空格隔开的整数，分别为 $n,v,m,a$。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例解释\n每卖出 $1$ 个课程，价格就会提高 $1$ 元，所以总共获得 $1+2+3+4+5=15$ 元。\n\n### 数据规模与约定\n对于 $50\\%$ 的数据，满足 $1 \\leq n,m,v,a\\leq 10$；\n\n对于额外 $20\\%$ 的数据，满足 $a=0$；\n\n对于 $100\\%$ 的数据，满足 $0 \\leq n,m,v,a \\leq 1000$。\n\n然而，由于本次比赛是 ACM 赛制，因此您必须通过 $100\\%$ 的数据才能够获得本题的得分，后题同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #3 初赛] 课程报名", "background": "", "description": "传智播客推出了一款课程，并进行了一次促销活动。具体来说就是，课程的初始定价为 $v$ 元；每报名 $m$ 个学员，课程的定价就要提升 $a$ 元。由于课程能够容纳的学生有限，因此报名到 $n$ 人的时候就停止报名。\n\n现在老师想知道，当课程停止报名时，一共可以获得多少学费呢？", "inputFormat": "一行四个使用空格隔开的整数，分别为 $n,v,m,a$。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例解释\n每卖出 $1$ 个课程，价格就会提高 $1$ 元，所以总共获得 $1+2+3+4+5=15$ 元。\n\n### 数据规模与约定\n对于 $50\\%$ 的数据，满足 $1 \\leq n,m,v,a\\leq 10$；\n\n对于额外 $20\\%$ 的数据，满足 $a=0$；\n\n对于 $100\\%$ 的数据，满足 $0 \\leq n,m,v,a \\leq 1000$。\n\n然而，由于本次比赛是 ACM 赛制，因此您必须通过 $100\\%$ 的数据才能够获得本题的得分，后题同。", "locale": "zh-CN"}}}
{"pid": "P8823", "type": "P", "difficulty": 1, "samples": [["99\n", "4.0"], ["88", "3.8"], ["12", "0.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "传智杯"], "title": "[传智杯 #3 初赛] 期末考试成绩", "background": "", "description": "传智专修学院的 Java 程序设计课程的评价体系是这样的：\n\n首先，所有学生会有一个卷面得分，这个得分一定是一个 $[0,100]$ 之间的整数。\n\n如果卷面得分在 $90$ 分及以上，那么他的 GPA（加权平均成绩） 就是满分 $4.0$。\n\n如果卷面得分在 $60 \\sim 89$ 之间，那么他每比 $90$ 分少 $1$ 分，那么他的分数就会在 $4.0$ 的基础上减少 $0.1$。\n\n如果卷面得分不到 $60$ 分，那么善良的老师会给他照顾。具体来说，如果他的分数为 $x$ ，那么老师会把他的分数调整为 $\\sqrt{x}\\times 10$（向下取整） ，再计算他的 GPA。\n\n如果经过调整该学生的得分依旧没满 $60$ ，那么他就挂科了，GPA 就是 $0$ 分。\n\n现在给你一个人的期末卷面得分，请你输出他的最终 GPA", "inputFormat": "一行一个整数 $x$，表示该人的期末得分。", "outputFormat": "一个小数点后只有一位的浮点数，表示该同学获得的GPA。\n\n请注意，如果有 $.0$ 请保留。", "hint": "对于 $20\\%$ 的数据，满足 $90 \\leq x \\leq 100$；  \n对于额外 $30\\%$ 的数据，满足 $60 \\leq x \\leq 100$；  \n对于 $100\\%$ 的数据，满足 $0 \\leq x \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #3 初赛] 期末考试成绩", "background": "", "description": "传智专修学院的 Java 程序设计课程的评价体系是这样的：\n\n首先，所有学生会有一个卷面得分，这个得分一定是一个 $[0,100]$ 之间的整数。\n\n如果卷面得分在 $90$ 分及以上，那么他的 GPA（加权平均成绩） 就是满分 $4.0$。\n\n如果卷面得分在 $60 \\sim 89$ 之间，那么他每比 $90$ 分少 $1$ 分，那么他的分数就会在 $4.0$ 的基础上减少 $0.1$。\n\n如果卷面得分不到 $60$ 分，那么善良的老师会给他照顾。具体来说，如果他的分数为 $x$ ，那么老师会把他的分数调整为 $\\sqrt{x}\\times 10$（向下取整） ，再计算他的 GPA。\n\n如果经过调整该学生的得分依旧没满 $60$ ，那么他就挂科了，GPA 就是 $0$ 分。\n\n现在给你一个人的期末卷面得分，请你输出他的最终 GPA", "inputFormat": "一行一个整数 $x$，表示该人的期末得分。", "outputFormat": "一个小数点后只有一位的浮点数，表示该同学获得的GPA。\n\n请注意，如果有 $.0$ 请保留。", "hint": "对于 $20\\%$ 的数据，满足 $90 \\leq x \\leq 100$；  \n对于额外 $30\\%$ 的数据，满足 $60 \\leq x \\leq 100$；  \n对于 $100\\%$ 的数据，满足 $0 \\leq x \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P8824", "type": "P", "difficulty": 3, "samples": [["6\ntouch yyh\ntouch yyhtql\nrename yyh yyhnb\ntouch qwq\nrename qwq qaq\nls", "yyhnb\nyyhtql\nqaq"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "传智杯"], "title": "[传智杯 #3 初赛] 终端", "background": "", "description": "有一天您厌烦了电脑上又丑又没用的终端，打算自己实现一个 Terminal。\n\n具体来说，它需要支持如下命令:\n\n1. `touch filename`：如果名为 `filename` 的文件不存在，就创建一个这样的文件，如果已经存在同名文件的话则不进行任何操作。\n\n2. `rm name`：删除名为 `name` 的文件。如果不存在这样的文件，就不进行任何操作。\n\n3. `ls`：按**创建时间为顺序**，显示当前已经存在的未被删除的所有文件。\n4. `rename xxx yyy`：将名为`xxx`的文件名字改为 `yyy` 。如果不存在这样的文件，或者已经存在文件名为 `yyy` 的文件，则不做任何操作。\n\n这里所有涉及的文件名都仅由大写或者小写的英文字母构成，且文件名区分大小写。", "inputFormat": "第一行一个整数 $n$ ，表示总共要执行的操作数。\n\n接下来 $n$ 行，每行一个字符串，表示一条命令。", "outputFormat": "对于每个 `ls` 命令，请输出若干行，每行一个字符串，表示一个文件，如果当前并没有任何文件，则什么都不输出。\n\n请注意本题时限为 3s，输入输出规模较大，请注意常数因素对耗时的影响，我们不会给使用 Java 和 Python 的选手增加额外的运行时间。", "hint": "对于 $20\\%$ 的数据，只存在 $1,3$ 操作 \n\n对于另外 $20\\%$ 的数据，只存在 $1,2,3$ 操作\n\n对于另外 $20\\%$ 的数据，只存在 $1,3,4$ 操作\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 1000$\n\n保证所有命令的长度不超过 $2000$ 个字符。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #3 初赛] 终端", "background": "", "description": "有一天您厌烦了电脑上又丑又没用的终端，打算自己实现一个 Terminal。\n\n具体来说，它需要支持如下命令:\n\n1. `touch filename`：如果名为 `filename` 的文件不存在，就创建一个这样的文件，如果已经存在同名文件的话则不进行任何操作。\n\n2. `rm name`：删除名为 `name` 的文件。如果不存在这样的文件，就不进行任何操作。\n\n3. `ls`：按**创建时间为顺序**，显示当前已经存在的未被删除的所有文件。\n4. `rename xxx yyy`：将名为`xxx`的文件名字改为 `yyy` 。如果不存在这样的文件，或者已经存在文件名为 `yyy` 的文件，则不做任何操作。\n\n这里所有涉及的文件名都仅由大写或者小写的英文字母构成，且文件名区分大小写。", "inputFormat": "第一行一个整数 $n$ ，表示总共要执行的操作数。\n\n接下来 $n$ 行，每行一个字符串，表示一条命令。", "outputFormat": "对于每个 `ls` 命令，请输出若干行，每行一个字符串，表示一个文件，如果当前并没有任何文件，则什么都不输出。\n\n请注意本题时限为 3s，输入输出规模较大，请注意常数因素对耗时的影响，我们不会给使用 Java 和 Python 的选手增加额外的运行时间。", "hint": "对于 $20\\%$ 的数据，只存在 $1,3$ 操作 \n\n对于另外 $20\\%$ 的数据，只存在 $1,2,3$ 操作\n\n对于另外 $20\\%$ 的数据，只存在 $1,3,4$ 操作\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 1000$\n\n保证所有命令的长度不超过 $2000$ 个字符。", "locale": "zh-CN"}}}
{"pid": "P8825", "type": "P", "difficulty": 2, "samples": [["2 11", "6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "传智杯"], "title": "[传智杯 #3 初赛] 运气", "background": "YYH Land(Yoauld,Youthful & Happy Land) 是位于炽蓝仙野的一片神奇的国度，那里的人们过着无拘无束的的快乐生活。", "description": "哈兰·斯威提是 YYH Land 远近闻名的注铅骰子爱好者。有一天他碰到了这么一个问题：\n\n你有一枚 $6$ 个面的骰子，分别写了 $1,2,3,4,5,6$ ，每一面朝上的概率是均等的。\n\n现在哈兰想知道，如果他投掷 $n$ 次，并且将结果按顺序写在纸上成为一个数。（比如说如果哈兰扔了 $3$ 次，分别是 $3,2,5$ ，那么他最后得到的数就是 $325$）他现在想知道这个数是 $k$ 的倍数的可能情况有多少种，其中 $k$ 是一个特定的数。\n\n由于这个方案数可能会很大，所以请你输出结果对 $10^9+7$ 取模的结果。", "inputFormat": "一行两个整数 $n,k$ ，意义如题所示。", "outputFormat": "一行一个整数，表示答案。", "hint": "**样例解释**\n\n在投掷两次骰子总共 $36$ 种可能中，只有 $(\"11\",\"22\",\"33\",\"44\",\"55\",\"66\") $ 是符合条件的。所以答案是 $6$。\n\n**数据规模与约定**\n\n对于 $40\\%$ 的数据，满足 $n$ 分别为 $1,2,3,4$；  \n对于另外 $30\\%$ 的数据，满足 $ 1 \\leq k \\leq 3$；  \n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 10, 1 \\leq k\\leq 1000$；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #3 初赛] 运气", "background": "YYH Land(Yoauld,Youthful & Happy Land) 是位于炽蓝仙野的一片神奇的国度，那里的人们过着无拘无束的的快乐生活。", "description": "哈兰·斯威提是 YYH Land 远近闻名的注铅骰子爱好者。有一天他碰到了这么一个问题：\n\n你有一枚 $6$ 个面的骰子，分别写了 $1,2,3,4,5,6$ ，每一面朝上的概率是均等的。\n\n现在哈兰想知道，如果他投掷 $n$ 次，并且将结果按顺序写在纸上成为一个数。（比如说如果哈兰扔了 $3$ 次，分别是 $3,2,5$ ，那么他最后得到的数就是 $325$）他现在想知道这个数是 $k$ 的倍数的可能情况有多少种，其中 $k$ 是一个特定的数。\n\n由于这个方案数可能会很大，所以请你输出结果对 $10^9+7$ 取模的结果。", "inputFormat": "一行两个整数 $n,k$ ，意义如题所示。", "outputFormat": "一行一个整数，表示答案。", "hint": "**样例解释**\n\n在投掷两次骰子总共 $36$ 种可能中，只有 $(\"11\",\"22\",\"33\",\"44\",\"55\",\"66\") $ 是符合条件的。所以答案是 $6$。\n\n**数据规模与约定**\n\n对于 $40\\%$ 的数据，满足 $n$ 分别为 $1,2,3,4$；  \n对于另外 $30\\%$ 的数据，满足 $ 1 \\leq k \\leq 3$；  \n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 10, 1 \\leq k\\leq 1000$；", "locale": "zh-CN"}}}
{"pid": "P8826", "type": "P", "difficulty": 3, "samples": [["4\n5 10\n1 2 3 4", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["位运算", "传智杯"], "title": "[传智杯 #3 初赛] 游戏（征集数据）", "background": "", "description": "清蒸鱼是一个从未被击败的炽蓝仙野游戏者。有一天他遇到了这么一个游戏：\n\n给定一个长度为 $n$ 的数组 $a$。同时定义 $count(x)$ 为 $x$ 在二进制下的 $1$ 的个数。\n\n现在清蒸鱼每次可以进行如下两种操作：\n\n- 选择两个数 $a_i, a_j$，并且必须满足 $count(a_i \\operatorname{xor} a_j)=1$，将它们中的任意一个从数组中消去，代价为 $C_1$。\n\n- 选择两个数 $a_i, a_j$，并且必须满足 $count(a_i \\operatorname{xor} a_j) > 1$，将它们中的任意一个从数组中消去，代价为 $C_2$。\n\n现在你想知道，最少付出多少的代价，能让这个数组被消到只剩一个数。", "inputFormat": "第一行一个整数 $n$，表示数组大小。  \n第二行两个整数 $C_1, C_2$，意义如题所示。  \n第三行共 $n$ 个整数，描述了数组 $a$。", "outputFormat": "一行一个整数，表示最小代价。", "hint": "对于 $20\\%$ 的数据，满足 $n = 10$；  \n对于另外 $20\\%$ 的数据，满足 $a$ 中的元素为一个 $[1, n]$ 的排列；  \n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq {10}^4$，$1\\le C_1, C_2, a \\le {10}^9$，$a$ 中的元素互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #3 初赛] 游戏（征集数据）", "background": "", "description": "清蒸鱼是一个从未被击败的炽蓝仙野游戏者。有一天他遇到了这么一个游戏：\n\n给定一个长度为 $n$ 的数组 $a$。同时定义 $count(x)$ 为 $x$ 在二进制下的 $1$ 的个数。\n\n现在清蒸鱼每次可以进行如下两种操作：\n\n- 选择两个数 $a_i, a_j$，并且必须满足 $count(a_i \\operatorname{xor} a_j)=1$，将它们中的任意一个从数组中消去，代价为 $C_1$。\n\n- 选择两个数 $a_i, a_j$，并且必须满足 $count(a_i \\operatorname{xor} a_j) > 1$，将它们中的任意一个从数组中消去，代价为 $C_2$。\n\n现在你想知道，最少付出多少的代价，能让这个数组被消到只剩一个数。", "inputFormat": "第一行一个整数 $n$，表示数组大小。  \n第二行两个整数 $C_1, C_2$，意义如题所示。  \n第三行共 $n$ 个整数，描述了数组 $a$。", "outputFormat": "一行一个整数，表示最小代价。", "hint": "对于 $20\\%$ 的数据，满足 $n = 10$；  \n对于另外 $20\\%$ 的数据，满足 $a$ 中的元素为一个 $[1, n]$ 的排列；  \n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq {10}^4$，$1\\le C_1, C_2, a \\le {10}^9$，$a$ 中的元素互不相同。", "locale": "zh-CN"}}}
{"pid": "P8827", "type": "P", "difficulty": 4, "samples": [["2 3\n1 1\n1 2\n2 2 4\n1 1\n3 2", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "传智杯"], "title": "[传智杯 #3 初赛] 森林", "background": "YYH Land（Yoauld, Youthful & Happy Land）是位于炽蓝仙野的一片神奇的国度，那里的人们过着无拘无束的的快乐生活。", "description": "清蒸鱼是一个尽职尽责的 YYH Land 护林者。他负责每天维护 YYH Land 的森林。在最开始的时候，YYH Land 只有一棵具有 $n$ 个节点的树，每个节点有一个灵力值 $v$。\n\n由于 YYH Land 是一片神奇的国度，YYH Land 的树也有一些神奇的能力，具体来说它满足如下操作：\n\n- `1 e`  \n编号为 $e$ 的边突然消失，使得它所在的那棵树变成了两棵树。\n\n- `2 u val`  \n编号为 $u$ 的节点的灵力值变成了 $val$。\n\n- `3 u`  \n清蒸鱼进行了一次查询，查询 $u$ 所在的那棵树的灵力值之和。\n\n现在你需要帮助清蒸鱼，来模拟上述事件，以了解森林的变迁。", "inputFormat": "第一行为 $n, m$，如上所述。  \n第二行有 $n$ 个数，为 $n$ 个结点的初始权值，在 $10^3$ 以内。  \n下面 $n-1$ 行，每行一组 $u, v$，表示一条边。（保证初始为一棵树）  \n下面 $m$ 行有 $m$ 个操作：  \n先读入一个$opt$，表示操作类型。  \n$opt=1$ 时，读入 $e$，表示删掉读入的第 $e$ 条边。（保证第 $e$ 条边存在）  \n$opt=2$ 时，读入 $u,val$，表示把结点 $u$ 的权值改成 $val$（$val \\le 1000$）。  \n$opt=3$ 时，读入 $u$，表示查询 $u$ 所在的那棵树的结点权值和。", "outputFormat": "对于每个查询操作，输出一行一个数表示答案。", "hint": "对于 $30\\%$ 的数据，满足 $1 \\leq n,m \\leq 10$；  \n对于 $50\\%$ 的数据，满足 $1 \\leq n,m \\leq 1000$；  \n对于另外 $20\\%$ 的数据，满足只有 $2,3$ 操作；  \n对于 $100\\%$ 的数据，满足 $1 \\leq n,m \\leq {10}^5$，$1 \\leq v,val \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #3 初赛] 森林", "background": "YYH Land（Yoauld, Youthful & Happy Land）是位于炽蓝仙野的一片神奇的国度，那里的人们过着无拘无束的的快乐生活。", "description": "清蒸鱼是一个尽职尽责的 YYH Land 护林者。他负责每天维护 YYH Land 的森林。在最开始的时候，YYH Land 只有一棵具有 $n$ 个节点的树，每个节点有一个灵力值 $v$。\n\n由于 YYH Land 是一片神奇的国度，YYH Land 的树也有一些神奇的能力，具体来说它满足如下操作：\n\n- `1 e`  \n编号为 $e$ 的边突然消失，使得它所在的那棵树变成了两棵树。\n\n- `2 u val`  \n编号为 $u$ 的节点的灵力值变成了 $val$。\n\n- `3 u`  \n清蒸鱼进行了一次查询，查询 $u$ 所在的那棵树的灵力值之和。\n\n现在你需要帮助清蒸鱼，来模拟上述事件，以了解森林的变迁。", "inputFormat": "第一行为 $n, m$，如上所述。  \n第二行有 $n$ 个数，为 $n$ 个结点的初始权值，在 $10^3$ 以内。  \n下面 $n-1$ 行，每行一组 $u, v$，表示一条边。（保证初始为一棵树）  \n下面 $m$ 行有 $m$ 个操作：  \n先读入一个$opt$，表示操作类型。  \n$opt=1$ 时，读入 $e$，表示删掉读入的第 $e$ 条边。（保证第 $e$ 条边存在）  \n$opt=2$ 时，读入 $u,val$，表示把结点 $u$ 的权值改成 $val$（$val \\le 1000$）。  \n$opt=3$ 时，读入 $u$，表示查询 $u$ 所在的那棵树的结点权值和。", "outputFormat": "对于每个查询操作，输出一行一个数表示答案。", "hint": "对于 $30\\%$ 的数据，满足 $1 \\leq n,m \\leq 10$；  \n对于 $50\\%$ 的数据，满足 $1 \\leq n,m \\leq 1000$；  \n对于另外 $20\\%$ 的数据，满足只有 $2,3$ 操作；  \n对于 $100\\%$ 的数据，满足 $1 \\leq n,m \\leq {10}^5$，$1 \\leq v,val \\leq 1000$。", "locale": "zh-CN"}}}
