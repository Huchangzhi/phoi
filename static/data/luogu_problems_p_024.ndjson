{"pid": "P1481", "type": "P", "difficulty": 2, "samples": [["5\ni\nint\ninteger\nintern\ninternet\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形 DP", "哈希 hashing", "字典树 Trie", "差分"], "title": "魔族密码", "background": "风之子刚走进他的考场，就……\n\n花花：当当当当~~偶是魅力女皇——花花！！^^（华丽出场，礼炮，鲜花）\n\n风之子：我呕……（杀死人的眼神）快说题目！否则……-\\_-###", "description": "\n\n花花：……咦~~好冷~~我们现在要解决的是魔族的密码问题（自我陶醉：搞不好魔族里面还会有人用密码给我和菜虫写情书咧，哦活活，当然是给我的比较多拉\\*^\\_^\\*）。\n\n魔族现在使用一种新型的密码系统。每一个密码都是一个给定的仅包含小写字母的英文单词表，每个单词至少包含 $1$ 个字母，至多 $75$ 个字母。如果在一个由一个词或多个词组成的表中，除了最后一个以外，每个单词都被其后的一个单词所包含，即前一个单词是后一个单词的前缀，则称词表为一个词链。例如下面单词组成了一个词链：\n\n- $\\verb!i!$；\n- $\\verb!int!$；\n- $\\verb!integer!$。\n\n但下面的单词不组成词链：\n\n- $\\verb!integer!$；\n- $\\verb!intern!$。\n\n现在你要做的就是在一个给定的单词表中取出一些词，组成最长的词链，就是包含单词数最多的词链。将它的单词数统计出来，就得到密码了。\n\n风之子：密码就是最长词链所包括的单词数阿……\n", "inputFormat": "这些文件的格式是，第一行为单词表中的单词数 $N$（$1 \\le N \\le 2000$），下面每一行有一个单词，按字典顺序排列，中间也没有重复的单词。", "outputFormat": "输出共一行，一个整数，表示密码。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Demon Password", "background": "As soon as Feng Zhi Zi stepped into his exam room, ...\n\nHuahua: Ta-da~~ I am the Queen of Charm — Huahua!! ^^ (grand entrance, confetti, flowers)\n\nFeng Zhi Zi: Ugh... (a killer stare) State the problem! Or else... -_-###", "description": "Huahua: ... Eh~~ such a chill~~ We are going to solve the demons’ password problem (self-indulgent: maybe some demons will even use ciphers to write love letters to me and Caichong; oh ho ho, of course I’ll get more of them ^_^).\n\nThe demon clan now uses a new kind of password system. Each password is a given list of English words containing only lowercase letters, and each word has at least $1$ letter and at most $75$ letters. If, in a list consisting of one or more words, every word except the last is contained by the next word, that is, the previous word is a prefix of the next word, then the list is called a “word chain.” For example, the following words form a word chain:\n- `i`.\n- `int`.\n- `integer`.\n\nBut the following words do not form a word chain:\n- `integer`.\n- `intern`.\n\nYour task is to pick some words from the given list to form the longest word chain, i.e., the chain that contains the most words. Count its number of words; that number is the password.\n\nFeng Zhi Zi: So the password is the number of words in the longest word chain...", "inputFormat": "The first line contains the number of words $N$ ($1 \\le N \\le 2000$). Each of the next $N$ lines contains one word, in lexicographic order, with no duplicates.", "outputFormat": "Output a single line with one integer, the password.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔族密码", "background": "风之子刚走进他的考场，就……\n\n花花：当当当当~~偶是魅力女皇——花花！！^^（华丽出场，礼炮，鲜花）\n\n风之子：我呕……（杀死人的眼神）快说题目！否则……-\\_-###", "description": "\n\n花花：……咦~~好冷~~我们现在要解决的是魔族的密码问题（自我陶醉：搞不好魔族里面还会有人用密码给我和菜虫写情书咧，哦活活，当然是给我的比较多拉\\*^\\_^\\*）。\n\n魔族现在使用一种新型的密码系统。每一个密码都是一个给定的仅包含小写字母的英文单词表，每个单词至少包含 $1$ 个字母，至多 $75$ 个字母。如果在一个由一个词或多个词组成的表中，除了最后一个以外，每个单词都被其后的一个单词所包含，即前一个单词是后一个单词的前缀，则称词表为一个词链。例如下面单词组成了一个词链：\n\n- $\\verb!i!$；\n- $\\verb!int!$；\n- $\\verb!integer!$。\n\n但下面的单词不组成词链：\n\n- $\\verb!integer!$；\n- $\\verb!intern!$。\n\n现在你要做的就是在一个给定的单词表中取出一些词，组成最长的词链，就是包含单词数最多的词链。将它的单词数统计出来，就得到密码了。\n\n风之子：密码就是最长词链所包括的单词数阿……\n", "inputFormat": "这些文件的格式是，第一行为单词表中的单词数 $N$（$1 \\le N \\le 2000$），下面每一行有一个单词，按字典顺序排列，中间也没有重复的单词。", "outputFormat": "输出共一行，一个整数，表示密码。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1482", "type": "P", "difficulty": 1, "samples": [["4/5\n5/4", "1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "洛谷原创"], "title": "Cantor表（升级版）", "background": "", "description": "现代数学的著名证明之一是 Georg Cantor 证明了有理数是可枚举的。他是用下面这一张表来证明这一命题的：\n\n$$\\begin{matrix}\n1/1 & 1/2 & 1/3 & 1/4 & 1/5 & \\cdots \\cr\n2/1 & 2/2 & 2/3 & 2/4 &  \\cdots \\cr\n3/1 & 3/2 & 3/3 &  \\cdots \\cr\n4/1 & 4/2 &  \\cdots \\cr\n5/1 &  \\cdots \\cr\n\\end{matrix}\n$$\n\n这次与 NOIp1999 第一题不同的是：这次需输入两个分数（不一定是最简分数），算出这两个分数的积（注意需要约分至最简分数），输出积在原表的第几列第几行（若积形如 $a$（即结果为整数）或者 $1/a$，则看作表内的 $a/1$ 或 $1/a$ 结算）。\n", "inputFormat": "共两行。每行输入一个分数（不一定是最简分数）。\n", "outputFormat": "两个整数，表示输入的两个分数的积在表中的第几列第几行。\n", "hint": "### 数据范围\n\n对于全部数据，两个分数的分母和分子均小于 $10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Cantor Table (Upgraded Version)", "background": "", "description": "One of the famous results in modern mathematics is Georg Cantor’s proof that the rational numbers are countable. He used the following table to demonstrate this fact:\n\n$$\\begin{matrix}\n1/1 & 1/2 & 1/3 & 1/4 & 1/5 & \\cdots \\cr\n2/1 & 2/2 & 2/3 & 2/4 &  \\cdots \\cr\n3/1 & 3/2 & 3/3 &  \\cdots \\cr\n4/1 & 4/2 &  \\cdots \\cr\n5/1 &  \\cdots \\cr\n\\end{matrix}\n$$\n\nThis time, unlike NOIp 1999 Problem 1, you need to input two fractions (not necessarily in lowest terms), compute their product (make sure to reduce it to lowest terms), and output which column and which row the product falls into in the original table (if the product is of the form $a$ (i.e., an integer) or $1/a$, treat it as $a/1$ or $1/a$ in the table).", "inputFormat": "Two lines. Each line contains a fraction (not necessarily in lowest terms).", "outputFormat": "Two integers, indicating in which column and which row the product of the two input fractions appears in the table.", "hint": "### Constraints\n\nFor all testdata, the numerators and denominators of the two fractions are less than $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Cantor表（升级版）", "background": "", "description": "现代数学的著名证明之一是 Georg Cantor 证明了有理数是可枚举的。他是用下面这一张表来证明这一命题的：\n\n$$\\begin{matrix}\n1/1 & 1/2 & 1/3 & 1/4 & 1/5 & \\cdots \\cr\n2/1 & 2/2 & 2/3 & 2/4 &  \\cdots \\cr\n3/1 & 3/2 & 3/3 &  \\cdots \\cr\n4/1 & 4/2 &  \\cdots \\cr\n5/1 &  \\cdots \\cr\n\\end{matrix}\n$$\n\n这次与 NOIp1999 第一题不同的是：这次需输入两个分数（不一定是最简分数），算出这两个分数的积（注意需要约分至最简分数），输出积在原表的第几列第几行（若积形如 $a$（即结果为整数）或者 $1/a$，则看作表内的 $a/1$ 或 $1/a$ 结算）。\n", "inputFormat": "共两行。每行输入一个分数（不一定是最简分数）。\n", "outputFormat": "两个整数，表示输入的两个分数的积在表中的第几列第几行。\n", "hint": "### 数据范围\n\n对于全部数据，两个分数的分母和分子均小于 $10^4$。", "locale": "zh-CN"}}}
{"pid": "P1483", "type": "P", "difficulty": 4, "samples": [["5 4\n6 9 9 8 1 \n2 4\n1 2 5\n1 3 1\n2 4\n", "8\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "序列变换", "background": null, "description": "给定一个由 $n$ 个整数构成的序列 $a_1, a_2, \\ldots , a_n$，你需要对它进行如下操作：\n\n1. 输入格式 `1 x y`，表示把所有 $a_{k x}$（$k$ 为正整数，$k x \\le n$）都加上 $y$。\n2. 输入格式 `2 j`，表示输出 $a_j$。\n\n**特别的，对于操作 $2$ 当 $j=0$ 时输出 $0$。**", "inputFormat": "第一行，两个数 $n, m$，表示有 $n$ 个数，$m$ 条操作。  \n第二行，$n$ 个数 $a_1, a_2, \\ldots , a_n$。  \n接下来 $m$ 行，为 $m$ 条操作。", "outputFormat": "输出若干行，每行对应一次操作 $2$。", "hint": "对于 $40 \\%$ 的数据，$n \\le 100$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le m \\le {10}^5$，$|a_i| \\le {10}^6$，$|y| \\le {10}^6$，$1 \\le x\\le n$，$0\\le j \\le n$，操作 $2$ 不超过 ${10}^4$ 条。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence Transformation", "background": "", "description": "Given a sequence of $n$ integers $a_1, a_2, \\ldots , a_n$, you need to perform the following operations:\n\n1. Input format `1 x y`, which means add $y$ to all $a_{k x}$ (where $k$ is a positive integer and $k x \\le n$).\n2. Input format `2 j`, which means output $a_j$.\n\nSpecifically, for operation 2, when $j = 0$, output $0$.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ numbers and $m$ operations.  \nThe second line contains $n$ integers $a_1, a_2, \\ldots , a_n$.  \nThen follow $m$ lines, each describing one of the $m$ operations.", "outputFormat": "Output several lines, each corresponding to one operation 2.", "hint": "For $40 \\%$ of the testdata, $n \\le 100$.  \nFor $100 \\%$ of the testdata, $1 \\le n \\le {10}^6$, $1 \\le m \\le {10}^5$, $|a_i| \\le {10}^6$, $|y| \\le {10}^6$, $1 \\le x\\le n$, $0\\le j \\le n$, and the number of operation 2 is at most ${10}^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列变换", "background": null, "description": "给定一个由 $n$ 个整数构成的序列 $a_1, a_2, \\ldots , a_n$，你需要对它进行如下操作：\n\n1. 输入格式 `1 x y`，表示把所有 $a_{k x}$（$k$ 为正整数，$k x \\le n$）都加上 $y$。\n2. 输入格式 `2 j`，表示输出 $a_j$。\n\n**特别的，对于操作 $2$ 当 $j=0$ 时输出 $0$。**", "inputFormat": "第一行，两个数 $n, m$，表示有 $n$ 个数，$m$ 条操作。  \n第二行，$n$ 个数 $a_1, a_2, \\ldots , a_n$。  \n接下来 $m$ 行，为 $m$ 条操作。", "outputFormat": "输出若干行，每行对应一次操作 $2$。", "hint": "对于 $40 \\%$ 的数据，$n \\le 100$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le m \\le {10}^5$，$|a_i| \\le {10}^6$，$|y| \\le {10}^6$，$1 \\le x\\le n$，$0\\le j \\le n$，操作 $2$ 不超过 ${10}^4$ 条。", "locale": "zh-CN"}}}
{"pid": "P1484", "type": "P", "difficulty": 5, "samples": [["6 3 \r\n100 1 -1 100 1 -1\r\n", "200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "堆", "凸完全单调性（wqs 二分）", "链表", "反悔贪心"], "title": "种树", "background": "", "description": "cyrcyr 今天在种树，他在一条直线上挖了 $n$ 个坑。这 $n$ 个坑都可以种树，但为了保证每一棵树都有充足的养料，cyrcyr 不会在相邻的两个坑中种树。而且由于 cyrcyr 的树种不够，他至多会种 $k$ 棵树。假设 cyrcyr 有某种神能力，能预知自己在某个坑种树的获利会是多少（可能为负），请你帮助他计算出他的最大获利。\n", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个整数，第 $i$ 个数表示在直线上从左往右数第 $i$ 个坑种树的获利。\n", "outputFormat": "输出一个数，表示 cyrcyr 种树的最大获利。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 20$。\n\n对于 $50\\%$ 的数据，$n\\leq 6000$。\n\n对于 $100\\%$ 的数据，$1 \\le n\\leq 300000$，$1 \\le k\\leq \\dfrac{n}{2}$，在一个地方种树获利的绝对值在 $10^6$ 以内。\n", "locale": "zh-CN", "translations": {"en": {"title": "Planting Trees", "background": "", "description": "cyrcyr is planting trees today. He dug $n$ pits on a straight line. Each of these $n$ pits can be used to plant a tree, but to ensure every tree has sufficient nutrients, cyrcyr will not plant trees in two adjacent pits. Also, because cyrcyr does not have enough saplings, he will plant at most $k$ trees. Assuming cyrcyr has a special ability to foresee the profit from planting a tree in any pit (which may be negative), please help him compute his maximum total profit.", "inputFormat": "The first line contains two positive integers $n, k$.\n\nThe second line contains $n$ integers. The $i$-th number denotes the profit from planting a tree in the $i$-th pit from left to right on the line.", "outputFormat": "Output a single number, the maximum profit that cyrcyr can obtain.", "hint": "For $20\\%$ of the testdata, $n \\leq 20$.\n\nFor $50\\%$ of the testdata, $n \\leq 6000$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 300000$, $1 \\le k \\le \\dfrac{n}{2}$, and the absolute value of the profit at any single position is at most $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "种树", "background": "", "description": "cyrcyr 今天在种树，他在一条直线上挖了 $n$ 个坑。这 $n$ 个坑都可以种树，但为了保证每一棵树都有充足的养料，cyrcyr 不会在相邻的两个坑中种树。而且由于 cyrcyr 的树种不够，他至多会种 $k$ 棵树。假设 cyrcyr 有某种神能力，能预知自己在某个坑种树的获利会是多少（可能为负），请你帮助他计算出他的最大获利。\n", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个整数，第 $i$ 个数表示在直线上从左往右数第 $i$ 个坑种树的获利。\n", "outputFormat": "输出一个数，表示 cyrcyr 种树的最大获利。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 20$。\n\n对于 $50\\%$ 的数据，$n\\leq 6000$。\n\n对于 $100\\%$ 的数据，$1 \\le n\\leq 300000$，$1 \\le k\\leq \\dfrac{n}{2}$，在一个地方种树获利的绝对值在 $10^6$ 以内。\n", "locale": "zh-CN"}}}
{"pid": "P1485", "type": "P", "difficulty": 4, "samples": [["3 1\n1 4 5\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线性数据结构", "二分"], "title": "火枪打怪", "background": null, "description": "LXL 进入到了一片丛林，结果他发现有 $n$ 只怪物排成一排站在他面前。LXL 有一杆火枪能对付这些怪物。他知道从左至右数第 $i$ 只怪物的血量是 $m_i$。现在 LXL 可以将一些子弹射向某个怪物。LXL 可以控制他所发射的子弹数量及子弹的威力值。当某个子弹射到第 $i$ 个怪物，如果这个子弹的威力值为 $p$，除了这个怪物会掉 $p$ 点血以外，它左边的第 $j$ 个怪物 $(j<i)$，也会遭到 $\\max(0, p - (i - j)^2)$ 的溅射伤害（好神奇的子弹）。当某只怪物的血量小于 $0$ 时，它就死了，但它的尸体还在，即怪物的位置永远不会改变。LXL 希望只用 $k$ 发子弹，请你求出一个最小的正整数 $p$，使 LXL 用 $k$ 发子弹且每发子弹的威力值为 $p$ 就可以消灭所有怪物。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数，第 $i$ 个正整数表示从左至右数第 $i$ 只怪物的血量 $m_i$。", "outputFormat": "一个正整数，表示子弹的最小威力值 $p$。", "hint": "对于 $30\\%$ 的数据，$n\\leq 300$。\n\n对于 $100\\%$ 的数据，$n\\leq 5\\times 10^5$，$k\\leq 5\\times 10^5$，$1\\leq m_i\\leq 10^{10}$。", "locale": "zh-CN", "translations": {"en": {"title": "Musket vs Monsters", "background": "", "description": "LXL enters a jungle and finds $n$ monsters standing in a line in front of him. LXL has a musket to deal with these monsters. He knows that the health of the $i$-th monster from left to right is $m_i$. Now LXL can shoot some bullets at certain monsters. LXL can control both the number of bullets he fires and the power of each bullet. When a bullet hits the $i$-th monster with power $p$, besides that monster losing $p$ health, the monster at position $j$ to its left (where $j < i$) also takes splash damage of $\\max(0, p - (i - j)^2)$ (what a magical bullet). When a monster’s health becomes less than $0$, it dies, but its body remains, i.e., the positions of the monsters never change. LXL wants to use exactly $k$ bullets. Please find the smallest positive integer $p$ such that LXL can eliminate all monsters by firing $k$ bullets, each with power $p$.", "inputFormat": "The first line contains two positive integers $n, k$.\n\nThe second line contains $n$ positive integers, where the $i$-th integer denotes the health $m_i$ of the $i$-th monster from left to right.", "outputFormat": "Output a single integer, the minimal bullet power $p$.", "hint": "For $30\\%$ of the testdata, $n \\leq 300$.\n\nFor $100\\%$ of the testdata, $n \\leq 5 \\times 10^5$, $k \\leq 5 \\times 10^5$, $1 \\leq m_i \\leq 10^{10}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "火枪打怪", "background": null, "description": "LXL 进入到了一片丛林，结果他发现有 $n$ 只怪物排成一排站在他面前。LXL 有一杆火枪能对付这些怪物。他知道从左至右数第 $i$ 只怪物的血量是 $m_i$。现在 LXL 可以将一些子弹射向某个怪物。LXL 可以控制他所发射的子弹数量及子弹的威力值。当某个子弹射到第 $i$ 个怪物，如果这个子弹的威力值为 $p$，除了这个怪物会掉 $p$ 点血以外，它左边的第 $j$ 个怪物 $(j<i)$，也会遭到 $\\max(0, p - (i - j)^2)$ 的溅射伤害（好神奇的子弹）。当某只怪物的血量小于 $0$ 时，它就死了，但它的尸体还在，即怪物的位置永远不会改变。LXL 希望只用 $k$ 发子弹，请你求出一个最小的正整数 $p$，使 LXL 用 $k$ 发子弹且每发子弹的威力值为 $p$ 就可以消灭所有怪物。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数，第 $i$ 个正整数表示从左至右数第 $i$ 只怪物的血量 $m_i$。", "outputFormat": "一个正整数，表示子弹的最小威力值 $p$。", "hint": "对于 $30\\%$ 的数据，$n\\leq 300$。\n\n对于 $100\\%$ 的数据，$n\\leq 5\\times 10^5$，$k\\leq 5\\times 10^5$，$1\\leq m_i\\leq 10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P1486", "type": "P", "difficulty": 5, "samples": [["9 10\nI 60\nI 70\nS 50\nF 2\nI 30\nS 15\nA 5\nF 1\nF 2\n", "10\n20\n-1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2004", "线段树", "二分", "平衡树", "树状数组", "NOI"], "title": "[NOI2004] 郁闷的出纳员", "background": "", "description": "OIER 公司是一家大型专业化软件公司，有着数以万计的员工。作为一名出纳员，我的任务之一便是统计每位员工的工资。这本来是一份不错的工作，但是令人郁闷的是，我们的老板反复无常，经常调整员工的工资。如果他心情好，就可能把每位员工的工资加上一个相同的量。反之，如果心情不好，就可能把当前在公司的所有员工的工资扣除一个相同的量。我真不知道除了调工资他还做什么其它事情。\n\n工资的频繁调整很让员工反感，尤其是集体扣除工资的时候，一旦某位员工发现自己的工资已经低于了合同规定的工资下界，他就会立刻气愤地离开公司，并且再也不会回来了。每位员工的工资下界都是统一规定的。每当一个人离开公司，我就要从电脑中把他的工资档案删去，同样，每当公司招聘了一位新员工，我就得为他新建一个工资档案。\n\n老板经常到我这边来询问工资情况，他并不问具体某位员工的工资情况，而是问现在工资第 $k$ 多的员工拿多少工资。每当这时，我就不得不对数万个员工进行一次漫长的排序，然后告诉他答案。\n\n好了，现在你已经对我的工作了解不少了。正如你猜的那样，我想请你编一个工资统计程序。怎么样，不是很困难吧？\n\n如果某个员工的初始工资低于最低工资标准，那么将不计入最后的答案内。", "inputFormat": "第一行有两个整数 $n$ 和 $\\min$。$n$ 表示下面有多少条命令，$\\min$ 表示工资下界。\n\n接下来的 $n$ 行，每行一个字符 $x$ 和一个整数 $k$，表示一条命令。命令可以是以下四种之一：\n\n- `I k`  新建一个工资档案，初始工资为 $k$。如果某员工的初始工资低于工资下界，他将立刻离开公司。\n- `A k`   把每位员工的工资加上 $k$。\n- `S k`   把每位员工的工资扣除 $k$。\n- `F k`    查询第 $k$ 多的工资。\n\n在初始时，可以认为公司里一个员工也没有。", "outputFormat": "对于每条 `F` 命令，你的程序要输出一行，仅包含一个整数，为当前工资第  $k$ 多的员工所拿的工资数，如果 $k$ 大于目前员工的数目，则输出 $-1$。\n\n输出的最后一行包含一个整数，为离开公司的员工的总数。\n\n请注意，初始工资低于工资下界的员工不算做离开公司的员工。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证：\n\n- `I` 命令的条数不超过 $10^5$；\n- `A` 和 `S` 命令的总条数不超过 $100$；\n- `F` 命令的条数不超过 $10^5$；\n- 每次工资调整的调整量不超过 $10^3$；\n- 新员工的工资不超过 $10^5$。\n- $0 \\leq n \\leq 3 \\times 10^5$，$0 \\leq \\text{min} \\leq 10^9$，输入的所有数字均在 $32$ 位带符号整形范围内。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2004] Depressed Cashier", "background": "", "description": "OIER is a large specialized software company with tens of thousands of employees. As a cashier, one of my tasks is to record every employee’s salary. It used to be a decent job, but what is depressing is that our boss is capricious and frequently adjusts employees’ salaries. If he is in a good mood, he may add the same amount to every employee’s salary. Conversely, if he is in a bad mood, he may deduct the same amount from the salaries of all employees currently in the company. I really do not know what else he does besides adjusting salaries.\n\nFrequent salary adjustments make employees unhappy, especially during collective deductions. Once an employee finds that his salary has fallen below the contractually agreed lower bound, he will immediately leave the company and never return. The lower bound is uniformly defined for all employees. Whenever someone leaves, I must delete his salary record from the computer. Similarly, whenever the company hires a new employee, I must create a new salary record for them.\n\nThe boss often asks me about the salary status. He does not ask about the salary of any specific employee, but instead asks for the salary of the $k$-th highest employee at the moment. Every time he does that, I have to sort tens of thousands of employees and then tell him the answer.\n\nAlright, now you know a lot about my job. As you guessed, I want you to write a salary statistics program. How about it, not too hard, right?\n\nIf an employee’s initial salary is below the minimum wage threshold, they are not included in the final tally.\n\n# Description\n\nInput\n\nThe first line contains two integers $n$ and $\\min$. Here, $n$ is the number of commands that follow, and $\\min$ is the lower bound of the salary.\n\nEach of the next $n$ lines contains a character $x$ and an integer $k$, representing one command. The command can be one of the following four types:\n- `I k`  Create a new salary record with initial salary $k$. If the initial salary is below the lower bound, the employee leaves immediately.\n- `A k`  Add $k$ to every employee’s salary.\n- `S k`  Subtract $k$ from every employee’s salary.\n- `F k`  Query the $k$-th highest salary.\n\nInitially, the company has no employees.", "inputFormat": "The first line contains two integers $n$ and $\\min$.\n\nEach of the following $n$ lines contains a character $x$ and an integer $k$, representing one command of the following four types:\n- `I k`  Insert a new employee with initial salary $k$. If $k < \\min$, the employee leaves immediately.\n- `A k`  Add $k$ to all current employees’ salaries.\n- `S k`  Subtract $k$ from all current employees’ salaries. Any employee whose salary falls below $\\min$ leaves immediately and is removed from the records.\n- `F k`  Query the $k$-th highest salary among current employees.\n\nInitially, there are no employees in the company.", "outputFormat": "For each `F` command, output one line containing a single integer: the current $k$-th highest salary. If $k$ is greater than the number of current employees, output $-1$.\n\nThe last line outputs a single integer: the total number of employees who have left the company.\n\nPlease note that employees whose initial salary is below the lower bound do not count as having left.", "hint": "Constraints\n\n- The number of `I` commands does not exceed $10^5$.\n- The total number of `A` and `S` commands does not exceed $100$.\n- The number of `F` commands does not exceed $10^5$.\n- The adjustment amount for each salary update does not exceed $10^3$.\n- A new employee’s salary does not exceed $10^5$.\n- $0 \\leq n \\leq 3 \\times 10^5$, $0 \\leq \\min \\leq 10^9$, and all input numbers are within the 32-bit signed integer range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2004] 郁闷的出纳员", "background": "", "description": "OIER 公司是一家大型专业化软件公司，有着数以万计的员工。作为一名出纳员，我的任务之一便是统计每位员工的工资。这本来是一份不错的工作，但是令人郁闷的是，我们的老板反复无常，经常调整员工的工资。如果他心情好，就可能把每位员工的工资加上一个相同的量。反之，如果心情不好，就可能把当前在公司的所有员工的工资扣除一个相同的量。我真不知道除了调工资他还做什么其它事情。\n\n工资的频繁调整很让员工反感，尤其是集体扣除工资的时候，一旦某位员工发现自己的工资已经低于了合同规定的工资下界，他就会立刻气愤地离开公司，并且再也不会回来了。每位员工的工资下界都是统一规定的。每当一个人离开公司，我就要从电脑中把他的工资档案删去，同样，每当公司招聘了一位新员工，我就得为他新建一个工资档案。\n\n老板经常到我这边来询问工资情况，他并不问具体某位员工的工资情况，而是问现在工资第 $k$ 多的员工拿多少工资。每当这时，我就不得不对数万个员工进行一次漫长的排序，然后告诉他答案。\n\n好了，现在你已经对我的工作了解不少了。正如你猜的那样，我想请你编一个工资统计程序。怎么样，不是很困难吧？\n\n如果某个员工的初始工资低于最低工资标准，那么将不计入最后的答案内。", "inputFormat": "第一行有两个整数 $n$ 和 $\\min$。$n$ 表示下面有多少条命令，$\\min$ 表示工资下界。\n\n接下来的 $n$ 行，每行一个字符 $x$ 和一个整数 $k$，表示一条命令。命令可以是以下四种之一：\n\n- `I k`  新建一个工资档案，初始工资为 $k$。如果某员工的初始工资低于工资下界，他将立刻离开公司。\n- `A k`   把每位员工的工资加上 $k$。\n- `S k`   把每位员工的工资扣除 $k$。\n- `F k`    查询第 $k$ 多的工资。\n\n在初始时，可以认为公司里一个员工也没有。", "outputFormat": "对于每条 `F` 命令，你的程序要输出一行，仅包含一个整数，为当前工资第  $k$ 多的员工所拿的工资数，如果 $k$ 大于目前员工的数目，则输出 $-1$。\n\n输出的最后一行包含一个整数，为离开公司的员工的总数。\n\n请注意，初始工资低于工资下界的员工不算做离开公司的员工。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证：\n\n- `I` 命令的条数不超过 $10^5$；\n- `A` 和 `S` 命令的总条数不超过 $100$；\n- `F` 命令的条数不超过 $10^5$；\n- 每次工资调整的调整量不超过 $10^3$；\n- 新员工的工资不超过 $10^5$。\n- $0 \\leq n \\leq 3 \\times 10^5$，$0 \\leq \\text{min} \\leq 10^9$，输入的所有数字均在 $32$ 位带符号整形范围内。", "locale": "zh-CN"}}}
{"pid": "P1487", "type": "P", "difficulty": 5, "samples": [["53 23\r\n0.543 1.213 9768.134\r\n", "0.543"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学"], "title": "失落的成绩单", "background": "谁都知道，录成绩是件麻烦事，可 MC 却把成绩单丢了……\n", "description": "这一天老师要查第 $m$ 个同学的成绩，为了不挨批，MC努力回想，想起成绩单上的一个规律：\n\n若把成绩看作是一个实数数列，则 $A_i=\\dfrac{(A_{i-1})-(A_{i+1})}{2}+d$，（就是每一项为其前后两项之差除以 $2$ 再加 $d$）。此时，我告诉了 MC 一共 $n$ 项的数列首项 $A_1$ 和末项 $A_n$，以及 $d$。剩下的靠你了！\n", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行三个实数，依次是 $d,A_1,A_n$。", "outputFormat": "输出一个实数 $A_m$，保留 $3$ 位小数。\n", "hint": "$1\\le n\\le 60$，$0\\le m\\le n$，$|d|,|A_1|,|A_n|<10^4$", "locale": "zh-CN", "translations": {"en": {"title": "The Lost Report Card", "background": "Everyone knows recording grades is a hassle, but MC lost the report card....", "description": "On this day, the teacher wants to check the $m$-th student's grade. To avoid getting scolded, MC tries hard to recall and remembers a pattern on the report card:\n\nIf the grades are viewed as a real-valued sequence, then $A_i=\\dfrac{(A_{i-1})-(A_{i+1})}{2}+d$ (that is, each term equals the difference between its previous and next terms divided by $2$, then plus $d$). At this point, I told MC the first term $A_1$ and the last term $A_n$ of an $n$-term sequence, as well as $d$. The rest is up to you!", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains three real numbers, in order: $d, A_1, A_n$.", "outputFormat": "Output a real number $A_m$, rounded to $3$ decimal places.", "hint": "Constraints: $1 \\le n \\le 60$, $0 \\le m \\le n$, $|d|, |A_1|, |A_n| < 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "失落的成绩单", "background": "谁都知道，录成绩是件麻烦事，可 MC 却把成绩单丢了……\n", "description": "这一天老师要查第 $m$ 个同学的成绩，为了不挨批，MC努力回想，想起成绩单上的一个规律：\n\n若把成绩看作是一个实数数列，则 $A_i=\\dfrac{(A_{i-1})-(A_{i+1})}{2}+d$，（就是每一项为其前后两项之差除以 $2$ 再加 $d$）。此时，我告诉了 MC 一共 $n$ 项的数列首项 $A_1$ 和末项 $A_n$，以及 $d$。剩下的靠你了！\n", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行三个实数，依次是 $d,A_1,A_n$。", "outputFormat": "输出一个实数 $A_m$，保留 $3$ 位小数。\n", "hint": "$1\\le n\\le 60$，$0\\le m\\le n$，$|d|,|A_1|,|A_n|<10^4$", "locale": "zh-CN"}}}
{"pid": "P1488", "type": "P", "difficulty": 3, "samples": [["6\n0 1 2\n2 4 3\n4 2 0\n0 5 4\n", "JMcat Win\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["博弈论"], "title": "肥猫的游戏", "background": null, "description": "野猫与胖子，合起来简称肥猫，是一个班的同学，他们也都是数学高手，所以经常在一起讨论数学问题也就不足为奇了。\n\n一次，野猫遇到了一道有趣的几何游戏题目，便拿给胖子看。游戏要求在一个有 $n$ 个顶点凸多边形上进行，这个凸多边形的 $n-3$ 条对角线将多边形分成 $n-2$ 个三角形，这 $n-3$ 条对角线在多边形的顶点相交。三角形中的一个被染成黑色，其余是白色。\n\n双方轮流进行游戏，当轮到一方时，他必须沿着画好的对角线，从多边形上切下一个三角形。切下黑色三角形的一方获胜。胖子一看觉得确实很有趣，不如就一起玩玩吧。假设游戏由野猫先开始，那么野猫是否有必胜的策略呢？请写一个程序帮助野猫算一算。", "inputFormat": "第一行为一个整数 $n$，表示多边形的顶点数，多边形的顶点由 $0$ 至 $n-1$ 顺时针标号。\n\n接着的 $n-2$ 行描述组成多边形的三角形。第 $i+1$ 行 $(1 \\leq i \\leq n-2)$ 有三个空格分隔的非负整数 $a$、$b$、$c$，它们是第 $i$ 个三角形的顶点编号。第一个给出的三角形是黑色的。", "outputFormat": "只有一行，倘若野猫有必胜策略，输出 `JMcat Win`；否则，输出 `PZ Win`（注意大小写和空格）。", "hint": "$4 \\leq n \\leq 5 \\times 10^4$。\n\n如果连接一个多边形中任意两点的线段都完全包含于这个多边形，则称这个多边形为凸多边形。", "locale": "zh-CN", "translations": {"en": {"title": "The Fat Cat's Game", "background": "", "description": "JMcat and PZ are classmates, and both are math whizzes, so it is no surprise that they often discuss math problems together.\n\nOne day, JMcat found an interesting geometric game and showed it to PZ. The game is played on a convex polygon with $n$ vertices. Its $n-3$ diagonals divide the polygon into $n-2$ triangles, and these $n-3$ diagonals intersect at the polygon’s vertices. One of the triangles is colored black, and the others are white.\n\nThe two players take turns. On your turn, you must cut off one triangle from the polygon along the drawn diagonals. The player who cuts off the black triangle wins. Assume JMcat moves first. Does JMcat have a winning strategy? Please write a program to help JMcat find out.", "inputFormat": "The first line contains an integer $n$, the number of vertices of the polygon. The vertices are labeled from $0$ to $n-1$ in clockwise order.\n\nEach of the next $n-2$ lines describes one of the triangles forming the polygon. Line $i+1$ $(1 \\leq i \\leq n-2)$ contains three space-separated nonnegative integers $a$, $b$, and $c$, which are the vertex labels of the $i$-th triangle. The first triangle given is black.", "outputFormat": "Output a single line. If JMcat has a winning strategy, print `JMcat Win`; otherwise, print `PZ Win` (note the case and the space).", "hint": "Constraints: $4 \\leq n \\leq 5 \\times 10^4$.\n\nA polygon is called convex if every line segment connecting any two points of the polygon lies entirely within the polygon.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "肥猫的游戏", "background": null, "description": "野猫与胖子，合起来简称肥猫，是一个班的同学，他们也都是数学高手，所以经常在一起讨论数学问题也就不足为奇了。\n\n一次，野猫遇到了一道有趣的几何游戏题目，便拿给胖子看。游戏要求在一个有 $n$ 个顶点凸多边形上进行，这个凸多边形的 $n-3$ 条对角线将多边形分成 $n-2$ 个三角形，这 $n-3$ 条对角线在多边形的顶点相交。三角形中的一个被染成黑色，其余是白色。\n\n双方轮流进行游戏，当轮到一方时，他必须沿着画好的对角线，从多边形上切下一个三角形。切下黑色三角形的一方获胜。胖子一看觉得确实很有趣，不如就一起玩玩吧。假设游戏由野猫先开始，那么野猫是否有必胜的策略呢？请写一个程序帮助野猫算一算。", "inputFormat": "第一行为一个整数 $n$，表示多边形的顶点数，多边形的顶点由 $0$ 至 $n-1$ 顺时针标号。\n\n接着的 $n-2$ 行描述组成多边形的三角形。第 $i+1$ 行 $(1 \\leq i \\leq n-2)$ 有三个空格分隔的非负整数 $a$、$b$、$c$，它们是第 $i$ 个三角形的顶点编号。第一个给出的三角形是黑色的。", "outputFormat": "只有一行，倘若野猫有必胜策略，输出 `JMcat Win`；否则，输出 `PZ Win`（注意大小写和空格）。", "hint": "$4 \\leq n \\leq 5 \\times 10^4$。\n\n如果连接一个多边形中任意两点的线段都完全包含于这个多边形，则称这个多边形为凸多边形。", "locale": "zh-CN"}}}
{"pid": "P1489", "type": "P", "difficulty": 4, "samples": [["3\n35\n20\n32\n", "35 52"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP"], "title": "猫狗大战", "background": "", "description": "新一年度的猫狗大战通过 SC（星际争霸）这款经典的游戏来较量，野猫和飞狗这对冤家为此已经准备好久了，为了使战争更有难度和戏剧性，双方约定只能选择 Terran（人族）并且只能造机枪兵。\n\n比赛开始了，很快，野猫已经攒足几队机枪兵，试探性的发动进攻；然而，飞狗的机枪兵个数也已经不少了。野猫和飞狗的兵在飞狗的家门口相遇了，于是，便有一场腥风血雨和阵阵惨叫声。由于是在飞狗的家门口，飞狗的兵补给会很快，野猫看敌不过，决定撤退。这时飞狗的兵力也不足够多，所以没追出来。\n\n由于不允许造医生，机枪兵没办法补血。受伤的兵只好忍了。\n\n现在，野猫又攒足了足够的兵力，决定发起第二次进攻。为了使这次进攻给狗狗造成更大的打击，野猫决定把现有的兵分成两部分，从两路进攻。由于有些兵在第一次战斗中受伤了，为了使两部分的兵实力平均些，分的规则是这样的：\n\n1. 两部分兵的个数最多只能差一个；\n2. 每部分兵的血值总和必须要尽可能接近。\n\n现在请你编写一个程序，给定野猫现在有的兵的个数以及每个兵的血格值，求出野猫按上述规则分成两部分后每部分兵的血值总和。", "inputFormat": "第一行为一个整数 $n\\ (1 \\le n \\le 200)$，表示野猫现在有的机枪兵的个数。以下的 $n$ 行每行一个整数，表示每个机枪兵的血格 $(1 \\le a_i \\le 40)$。", "outputFormat": "一行，为两个整数，表示分成两部分后每部分兵的血值总和。要求输出的第一部分兵的血量总和不大于第二部分兵的血量总和。", "hint": "TO 狗狗：这道题的数据范围我已经尽量按星际的游戏规则来了，如果你再固执于由于机枪兵的攻击力一定使不能达到某些血格值或者游戏中一定要造农民不能使机枪兵的人数达到 $200$ 的话，我只能决定将那场猫狗大战的录像公开于世人了！！！\n", "locale": "zh-CN", "translations": {"en": {"title": "Cat–Dog Showdown", "background": "", "description": "In the new season of the Cat–Dog showdown, the competition is decided through the classic game SC (StarCraft). The archrivals Wildcat and Flying Dog have prepared for a long time. To make the war more challenging and dramatic, they agreed that both sides can only choose Terran and build only Marines.\n\nThe match begins. Soon, Wildcat gathers several squads of Marines and launches a probing attack; however, Flying Dog also has quite a few Marines. The forces meet at Flying Dog’s doorstep, and a bloody battle ensues with anguished screams. Since the fight is at Flying Dog’s home base, his reinforcements arrive quickly. Seeing the disadvantage, Wildcat retreats. At that moment, Flying Dog’s forces are not numerous enough to pursue.\n\nBecause Medics are not allowed, Marines cannot heal. The wounded just have to endure.\n\nNow, Wildcat has once again amassed enough forces and decides to launch a second offensive. To deal a heavier blow this time, Wildcat decides to split the current army into two parts to attack from two routes. Since some Marines were wounded in the first battle, the splitting rule aims to balance the two groups as follows:\n\n1. The numbers of Marines in the two parts may differ by at most one.\n2. The total HP of each part must be as close as possible.\n\nPlease write a program that, given the number of Marines Wildcat currently has and the HP of each Marine, computes the total HP of each part after splitting according to the rules above.", "inputFormat": "The first line contains an integer $n\\ (1 \\le n \\le 200)$, the number of Marines Wildcat currently has. Each of the following $n$ lines contains one integer, the HP of a Marine $(1 \\le a_i \\le 40)$.", "outputFormat": "Output one line with two integers: the total HP of each part after splitting. The total HP of the first part must not exceed that of the second part.", "hint": "To Flying Dog: I have tried to set the Constraints of this problem in line with StarCraft’s rules. If you still insist that a Marine’s attack values make certain HP totals unreachable, or that the game must build SCVs so the number of Marines cannot reach $200$, then I will have no choice but to make the replay of that Cat–Dog showdown public to the world!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猫狗大战", "background": "", "description": "新一年度的猫狗大战通过 SC（星际争霸）这款经典的游戏来较量，野猫和飞狗这对冤家为此已经准备好久了，为了使战争更有难度和戏剧性，双方约定只能选择 Terran（人族）并且只能造机枪兵。\n\n比赛开始了，很快，野猫已经攒足几队机枪兵，试探性的发动进攻；然而，飞狗的机枪兵个数也已经不少了。野猫和飞狗的兵在飞狗的家门口相遇了，于是，便有一场腥风血雨和阵阵惨叫声。由于是在飞狗的家门口，飞狗的兵补给会很快，野猫看敌不过，决定撤退。这时飞狗的兵力也不足够多，所以没追出来。\n\n由于不允许造医生，机枪兵没办法补血。受伤的兵只好忍了。\n\n现在，野猫又攒足了足够的兵力，决定发起第二次进攻。为了使这次进攻给狗狗造成更大的打击，野猫决定把现有的兵分成两部分，从两路进攻。由于有些兵在第一次战斗中受伤了，为了使两部分的兵实力平均些，分的规则是这样的：\n\n1. 两部分兵的个数最多只能差一个；\n2. 每部分兵的血值总和必须要尽可能接近。\n\n现在请你编写一个程序，给定野猫现在有的兵的个数以及每个兵的血格值，求出野猫按上述规则分成两部分后每部分兵的血值总和。", "inputFormat": "第一行为一个整数 $n\\ (1 \\le n \\le 200)$，表示野猫现在有的机枪兵的个数。以下的 $n$ 行每行一个整数，表示每个机枪兵的血格 $(1 \\le a_i \\le 40)$。", "outputFormat": "一行，为两个整数，表示分成两部分后每部分兵的血值总和。要求输出的第一部分兵的血量总和不大于第二部分兵的血量总和。", "hint": "TO 狗狗：这道题的数据范围我已经尽量按星际的游戏规则来了，如果你再固执于由于机枪兵的攻击力一定使不能达到某些血格值或者游戏中一定要造农民不能使机枪兵的人数达到 $200$ 的话，我只能决定将那场猫狗大战的录像公开于世人了！！！\n", "locale": "zh-CN"}}}
{"pid": "P1490", "type": "P", "difficulty": 5, "samples": [["6\r\n", "3 2\r\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索"], "title": "买蛋糕", "background": "", "description": "野猫过生日，大家当然会送礼物了（咳咳，没送礼物的同志注意了哈！！），由于不知道送什么好，又考虑到实用性等其他问题，大家决定合伙给野猫买一个生日蛋糕。大家不知道最后要买的蛋糕的准确价格，而只会给蛋糕估价，即要买一个不超过多少钱的蛋糕。众 OIer 借此发挥：能否用最少的钱币数去凑成估价范围内的所有价值，使得不管蛋糕价值多少，都不用找钱……\n\n现在问题由此引出：对于一个给定的 $n$，能否用最少的不等的正整数去组成 $n$ 以内（包括 $n$）的所有的正整数呢？如果能，最少需要多少个正整数，用最少个数又有多少不同的组成方法呢？\n", "inputFormat": "只有一行包含一个整数 $n\\ (1\\le n\\le 1000)$。\n\n ", "outputFormat": "一行两个数，第一个数是最少需要多少个数，第二个数是用最少个数的组成方案个数。两个答案用空格分隔。\n", "hint": "最少用三个数，有两种方法，分别是：$1,2,3$ 和 $1,2,4$。\n\n- 对于 $1,2,3$ 有 $1,2,3$，$1+3$，$2+3$，$1+2+3$；\n- 对于 $1,2,4$ 有 $1$，$2$，$1+2$，$4$，$1+4$，$2+4$。\n\n \n ", "locale": "zh-CN", "translations": {"en": {"title": "Buying a Cake", "background": "", "description": "It’s Wildcat’s birthday, and of course everyone is bringing gifts (ahem, those who didn’t, take note!). Not knowing what to buy and considering practicality, everyone decides to chip in to buy Wildcat a birthday cake. They don’t know the exact price of the cake, but they can set a price estimate, i.e., they will buy a cake that does not exceed a certain amount. The OIers then pose a challenge: can we use the fewest number of coins to make all values within the estimate range, so that no matter the cake’s price, no change is needed?\n\nThis leads to the following problem: for a given $n$, can we use the fewest distinct positive integers to form all positive integers up to and including $n$? If yes, what is the minimal number of positive integers required, and with that minimal number, how many different ways are there?", "inputFormat": "A single line containing an integer $n\\ (1\\le n\\le 1000)$.", "outputFormat": "One line with two numbers: the first is the minimal required count, and the second is the number of compositions using that minimal count. The two answers are separated by a space.", "hint": "Using three numbers is minimal; there are two methods: $1,2,3$ and $1,2,4$.\n\n- For $1,2,3$ there are $1,2,3$，$1+3$，$2+3$，$1+2+3$.\n- For $1,2,4$ there are $1$，$2$，$1+2$，$4$，$1+4$，$2+4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "买蛋糕", "background": "", "description": "野猫过生日，大家当然会送礼物了（咳咳，没送礼物的同志注意了哈！！），由于不知道送什么好，又考虑到实用性等其他问题，大家决定合伙给野猫买一个生日蛋糕。大家不知道最后要买的蛋糕的准确价格，而只会给蛋糕估价，即要买一个不超过多少钱的蛋糕。众 OIer 借此发挥：能否用最少的钱币数去凑成估价范围内的所有价值，使得不管蛋糕价值多少，都不用找钱……\n\n现在问题由此引出：对于一个给定的 $n$，能否用最少的不等的正整数去组成 $n$ 以内（包括 $n$）的所有的正整数呢？如果能，最少需要多少个正整数，用最少个数又有多少不同的组成方法呢？\n", "inputFormat": "只有一行包含一个整数 $n\\ (1\\le n\\le 1000)$。\n\n ", "outputFormat": "一行两个数，第一个数是最少需要多少个数，第二个数是用最少个数的组成方案个数。两个答案用空格分隔。\n", "hint": "最少用三个数，有两种方法，分别是：$1,2,3$ 和 $1,2,4$。\n\n- 对于 $1,2,3$ 有 $1,2,3$，$1+3$，$2+3$，$1+2+3$；\n- 对于 $1,2,4$ 有 $1$，$2$，$1+2$，$4$，$1+4$，$2+4$。\n\n \n ", "locale": "zh-CN"}}}
{"pid": "P1491", "type": "P", "difficulty": 5, "samples": [["3 3\r\n0 0\r\n1 1\r\n0 2\r\n1 2\r\n1 3\r\n2 3\r\n", "2.83"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "优先队列", "最短路"], "title": "集合位置", "background": null, "description": "每次有大的活动，大家都要在一起“聚一聚”，不管是去好乐迪，还是避风塘，或者汤姆熊，大家都要玩的痛快。还记得心语和花儿在跳舞机上的激情与释放，还记得草草的投篮技艺是如此的高超，还记得狗狗的枪法永远是 S ……还有不能忘了，胖子的歌声永远是让我们惊叫的！！\n\n今天是野猫的生日，所以想到这些也正常，只是因为是上学日，没法一起去玩了。但回忆一下那时的甜蜜总是一种幸福嘛。。。\n\n但是每次集合的时候都会出现问题！野猫是公认的“路盲”，野猫自己心里也很清楚，每次都提前出门，但还是经常迟到，这点让大家很是无奈。后来，野猫在每次出门前，都会向花儿咨询一下路径，根据已知的路径中，总算能按时到了。\n\n现在提出这样的一个问题：给出 $n$ 个点的坐标，其中第一个为野猫的出发位置，最后一个为大家的集合位置，并给出哪些位置点是相连的。野猫从出发点到达集合点，总会挑一条最近的路走，如果野猫没找到最近的路，他就会走第二近的路。请帮野猫求一下这条第二最短路径长度。\n\n特别地，选取的第二短路径**不会重复经过同一个点**，即使可能重复走过同一个点多次路程会更短。", "inputFormat": "第一行是两个整数 $n(1 \\le n \\le 200)$ 和 $m(1 \\le m\\le 10000)$，表示一共有 $n$ 个点和 $m$ 条路，以下 $n$ 行每行两个数 $x_i$，$y_i$，$(-500 \\le x_i,y_i \\le 500),$ 代表第 $i$ 个点的坐标，再往下的 $m$ 行每行两个整数 $p_j$，$q_j,(1 \\le p_j,q_j \\le n)$，表示两个点之间有一条路，数据没有重边，**可能有自环**。", "outputFormat": "只有一行包含一个数，为第二最短路线的距离（保留两位小数），如果存在多条第一短路径，则答案就是第一最短路径的长度；如果不存在第二最短路径，输出 `-1`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Meeting Location", "background": "", "description": "Every time there is a big hangout, everyone gets together no matter if it is at Haoledi, Bifengtang, or Tangmuxiong, and we all have a blast. We still remember Xinyu and Hua'er’s passion and release on the dance machine, remember how amazing Caocao’s basketball shooting was, remember how Gougou’s aim was always S... and we must not forget that Pangzi’s singing always made us scream in surprise!\n\nToday is Wildcat’s birthday, so it’s normal to think of all this. It’s just a school day, so we can’t go out together. But recalling those sweet times is still a kind of happiness.\n\nHowever, every time we meet up, there is a problem! Wildcat is a recognized “road-blind” person. Wildcat knows this well, always leaving early, yet still often arriving late, which leaves everyone helpless. Later, before each trip, Wildcat would consult Hua'er about the route. Based on known routes, he could finally arrive on time.\n\nNow here is the problem: given the coordinates of $n$ points, where the first one is Wildcat’s starting position and the last one is the group’s meeting position, and given which positions are connected. From the start to the meeting point, Wildcat will always choose a shortest route. If Wildcat does not find the shortest route, he will take the second-shortest route. Please help Wildcat find the length of this second-shortest path.\n\nIn particular, the chosen second-shortest path will not visit the same vertex more than once, even if allowing repeated visits to the same vertex could make it shorter.", "inputFormat": "The first line contains two integers $n$ ($1 \\le n \\le 200$) and $m$ ($1 \\le m \\le 10000$), indicating there are $n$ points and $m$ roads in total. The next $n$ lines each contain two numbers $x_i$, $y_i$ ($-500 \\le x_i, y_i \\le 500$), representing the coordinates of the $i$-th point. The following $m$ lines each contain two integers $p_j$, $q_j$ ($1 \\le p_j, q_j \\le n$), indicating that there is a road between these two points. There are no multiple edges in the testdata; self-loops may exist.", "outputFormat": "Output a single line containing one number: the distance of the second-shortest route (keep two decimal places). If there are multiple shortest paths, then the answer is the shortest-path length. If no second-shortest path exists, output `-1`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "集合位置", "background": null, "description": "每次有大的活动，大家都要在一起“聚一聚”，不管是去好乐迪，还是避风塘，或者汤姆熊，大家都要玩的痛快。还记得心语和花儿在跳舞机上的激情与释放，还记得草草的投篮技艺是如此的高超，还记得狗狗的枪法永远是 S ……还有不能忘了，胖子的歌声永远是让我们惊叫的！！\n\n今天是野猫的生日，所以想到这些也正常，只是因为是上学日，没法一起去玩了。但回忆一下那时的甜蜜总是一种幸福嘛。。。\n\n但是每次集合的时候都会出现问题！野猫是公认的“路盲”，野猫自己心里也很清楚，每次都提前出门，但还是经常迟到，这点让大家很是无奈。后来，野猫在每次出门前，都会向花儿咨询一下路径，根据已知的路径中，总算能按时到了。\n\n现在提出这样的一个问题：给出 $n$ 个点的坐标，其中第一个为野猫的出发位置，最后一个为大家的集合位置，并给出哪些位置点是相连的。野猫从出发点到达集合点，总会挑一条最近的路走，如果野猫没找到最近的路，他就会走第二近的路。请帮野猫求一下这条第二最短路径长度。\n\n特别地，选取的第二短路径**不会重复经过同一个点**，即使可能重复走过同一个点多次路程会更短。", "inputFormat": "第一行是两个整数 $n(1 \\le n \\le 200)$ 和 $m(1 \\le m\\le 10000)$，表示一共有 $n$ 个点和 $m$ 条路，以下 $n$ 行每行两个数 $x_i$，$y_i$，$(-500 \\le x_i,y_i \\le 500),$ 代表第 $i$ 个点的坐标，再往下的 $m$ 行每行两个整数 $p_j$，$q_j,(1 \\le p_j,q_j \\le n)$，表示两个点之间有一条路，数据没有重边，**可能有自环**。", "outputFormat": "只有一行包含一个数，为第二最短路线的距离（保留两位小数），如果存在多条第一短路径，则答案就是第一最短路径的长度；如果不存在第二最短路径，输出 `-1`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1492", "type": "P", "difficulty": 5, "samples": [["7 4\r\n", "0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000000\r\n0000000330\r\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "猩猩散步", "background": "", "description": "猩猩，骆驼，还有泡泡经常喜欢在饭后到操场上散步，由于猩猩的走路姿势最突出最显眼，理所应当的成为他们中的主角，所以我的题目就说猩猩散步了。（骆驼和泡泡别有意见哈，和猩猩争啥……）\n\n当然，话说回来，猩猩在 OI 上的能力也是不容低估的，你看，散步时还会想一道与此相关的问题，这是道经典的不能再经典的问题了。\n\n在一个 $m×n$ 的矩阵上，猩猩在左下角的顶点出现了，他只能沿着路径向上或者向右走，他的目标是“蠕动”到右上角的顶点，问他有多少路径可以选择。嗯，这个、这个、这个似乎地球人都知道怎么做，但是请注意，我有个条件没给呢！$m$ 和 $n$ 现在的最大范围是 $5\\times 10^4$，这可怎么办？仔细想想吧。\n", "inputFormat": "只有一行，包含两个整数 $m$ 和 $n$，其上限均为 $5\\times 10^4$。\n", "outputFormat": "由于最后的答案数目过大，所以只检查后 $100$ 位，输出时每行十个数字，没空格间隔，共十行，如果答案位数没超过 $100$ 位，则需要在空位上补 $0$。\n\n ", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Xingxing's Stroll", "background": "", "description": "Xingxing, Luotuo, and Paopao often like to take a stroll on the playground after dinner. Because Xingxing's walking posture is the most eye-catching, he naturally becomes the protagonist among them, so my problem is about Xingxing's stroll. (Luotuo and Paopao, please don’t mind—no need to compete with Xingxing.)\n\nBy the way, Xingxing’s ability in OI is not to be underestimated. Even during a walk, he thinks about a related problem—this one is as classic as it gets.\n\nOn an $m\\times n$ grid, Xingxing appears at the lower-left corner vertex. He can only move along the grid lines either up or right. His goal is to “wriggle” to the upper-right corner vertex. How many paths can he choose? Well, it seems like every Earthling knows how to do this, but note that I haven’t given one condition yet! The current maximum ranges of $m$ and $n$ are $5\\times 10^4$. What should we do? Think carefully.", "inputFormat": "One line containing two integers $m$ and $n$, each with an upper bound of $5\\times 10^4$.", "outputFormat": "Since the final answer can be very large, only the last 100 digits are checked. Output exactly 10 digits per line with no spaces, for a total of 10 lines. If the answer has no more than 100 digits, pad the remaining positions with leading zeros.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猩猩散步", "background": "", "description": "猩猩，骆驼，还有泡泡经常喜欢在饭后到操场上散步，由于猩猩的走路姿势最突出最显眼，理所应当的成为他们中的主角，所以我的题目就说猩猩散步了。（骆驼和泡泡别有意见哈，和猩猩争啥……）\n\n当然，话说回来，猩猩在 OI 上的能力也是不容低估的，你看，散步时还会想一道与此相关的问题，这是道经典的不能再经典的问题了。\n\n在一个 $m×n$ 的矩阵上，猩猩在左下角的顶点出现了，他只能沿着路径向上或者向右走，他的目标是“蠕动”到右上角的顶点，问他有多少路径可以选择。嗯，这个、这个、这个似乎地球人都知道怎么做，但是请注意，我有个条件没给呢！$m$ 和 $n$ 现在的最大范围是 $5\\times 10^4$，这可怎么办？仔细想想吧。\n", "inputFormat": "只有一行，包含两个整数 $m$ 和 $n$，其上限均为 $5\\times 10^4$。\n", "outputFormat": "由于最后的答案数目过大，所以只检查后 $100$ 位，输出时每行十个数字，没空格间隔，共十行，如果答案位数没超过 $100$ 位，则需要在空位上补 $0$。\n\n ", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1493", "type": "P", "difficulty": 5, "samples": [["3\r\n2 3 6\r\n3 2\r\n1 1\r\n2 1\r\n", "2\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "分梨子", "background": null, "description": "Finley 家的院子里有棵梨树，最近收获了许多梨子。于是，Finley 决定挑出一些梨子，分给幼稚园的宝宝们。可是梨子大小味道都不太一样，一定要尽量挑选那些差不多的梨子分给孩子们，那些分到小梨子的宝宝才不会哭闹。\n\n每个梨子都具有两个属性值，$A_i$ 和 $B_i$，分别表示梨子的大小和甜度情况。假设在选出的梨子中，两个属性的最小值分别是 $A_0$ 和 $B_0$。只要对于所有被选出的梨子 $i$，都满足 $C_1 \\times (A_i-A_0)+C_2 \\times (B_i-B_0) \\le C_3$（其中，$C_1,C_2$ 和 $C_3$ 都是已知的常数），就可以认为这些梨子是相差不多的，可以用来分给小朋友们。\n\n那么，作为幼稚园园长的你，能算出最多可以挑选出多少个梨子吗？", "inputFormat": "第一行一个整数 $N$（$1 \\le N \\le 2000$），表示梨子的总个数。\n\n第二行三个正整数，依次为 $C_1,C_2$ 和 $C_3$（$C_1,C_2 \\le 2000$，$C_3 \\le 10^9$）。\n\n接下来的 $N$ 行，每行两个整数。第 $i$ 行的两个整数依次为 $A_i$ 和 $B_i$。", "outputFormat": "只有一个整数，表示最多可以选出的梨子个数。", "hint": "### 样例说明\n\n可以选择 $1,3$ 两个梨子或者 $2,3$ 两个梨子。", "locale": "zh-CN", "translations": {"en": {"title": "Sharing Pears", "background": "", "description": "There is a pear tree in Finley's yard, and it has recently produced many pears. Finley decides to pick some pears to distribute to the kindergarten children. However, the pears vary in size and taste, so it is important to choose pears that are as similar as possible to give to the kids, so that those who get smaller pears will not cry.\n\nEach pear has two attributes, $A_i$ and $B_i$, representing the pear's size and sweetness, respectively. Suppose among the selected pears, the minimum values of the two attributes are $A_0$ and $B_0$. As long as for every selected pear $i$, the inequality $C_1 \\times (A_i-A_0)+C_2 \\times (B_i-B_0) \\le C_3$ holds (where $C_1,C_2$ and $C_3$ are known constants), then these pears are considered similar enough and can be given to the children.\n\nAs the kindergarten principal, can you compute the maximum number of pears that can be selected?", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 2000$), the total number of pears.\n\nThe second line contains three positive integers, $C_1,C_2$ and $C_3$ ($C_1,C_2 \\le 2000$, $C_3 \\le 10^9$).\n\nThe next $N$ lines each contain two integers. On the $i$-th line, the two integers are $A_i$ and $B_i$.", "outputFormat": "Output a single integer, the maximum number of pears that can be selected.", "hint": "Sample explanation: You can choose pears $1,3$ or $2,3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分梨子", "background": null, "description": "Finley 家的院子里有棵梨树，最近收获了许多梨子。于是，Finley 决定挑出一些梨子，分给幼稚园的宝宝们。可是梨子大小味道都不太一样，一定要尽量挑选那些差不多的梨子分给孩子们，那些分到小梨子的宝宝才不会哭闹。\n\n每个梨子都具有两个属性值，$A_i$ 和 $B_i$，分别表示梨子的大小和甜度情况。假设在选出的梨子中，两个属性的最小值分别是 $A_0$ 和 $B_0$。只要对于所有被选出的梨子 $i$，都满足 $C_1 \\times (A_i-A_0)+C_2 \\times (B_i-B_0) \\le C_3$（其中，$C_1,C_2$ 和 $C_3$ 都是已知的常数），就可以认为这些梨子是相差不多的，可以用来分给小朋友们。\n\n那么，作为幼稚园园长的你，能算出最多可以挑选出多少个梨子吗？", "inputFormat": "第一行一个整数 $N$（$1 \\le N \\le 2000$），表示梨子的总个数。\n\n第二行三个正整数，依次为 $C_1,C_2$ 和 $C_3$（$C_1,C_2 \\le 2000$，$C_3 \\le 10^9$）。\n\n接下来的 $N$ 行，每行两个整数。第 $i$ 行的两个整数依次为 $A_i$ 和 $B_i$。", "outputFormat": "只有一个整数，表示最多可以选出的梨子个数。", "hint": "### 样例说明\n\n可以选择 $1,3$ 两个梨子或者 $2,3$ 两个梨子。", "locale": "zh-CN"}}}
{"pid": "P1494", "type": "P", "difficulty": 5, "samples": [["6 4\n1 2 3 3 3 2\n2 6\n1 3\n3 5\n1 6", "2/5\n0/1\n1/1\n4/15"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "集训队互测", "O2优化", "离线处理"], "title": "[国家集训队] 小 Z 的袜子", "background": "", "description": "upd on 2020.6.10 ：更新了时限。\n\n作为一个生活散漫的人，小 Z 每天早上都要耗费很久从一堆五颜六色的袜子中找出一双来穿。终于有一天，小 Z 再也无法忍受这恼人的找袜子过程，于是他决定听天由命……\n\n具体来说，小 Z 把这 $N$ 只袜子从 $1$ 到 $N$ 编号，然后从编号 $L$ 到 $R$ 的袜子中随机选出两只来穿。尽管小 Z 并不在意两只袜子是不是完整的一双，他却很在意袜子的颜色，毕竟穿两只不同色的袜子会很尴尬。\n\n你的任务便是告诉小 Z，他有多大的概率抽到两只颜色相同的袜子。当然，小 Z 希望这个概率尽量高，所以他可能会询问多个 $(L,R)$ 以方便自己选择。\n\n**然而数据中有 $L=R$ 的情况，请特判这种情况，输出`0/1`。**\n", "inputFormat": "输入文件第一行包含两个正整数 $N$ 和 $M$。$N$ 为袜子的数量，$M$ 为小 Z 所提的询问的数量。接下来一行包含 $N$ 个正整数 $C_i$，其中 $C_i$ 表示第 $i$ 只袜子的颜色，相同的颜色用相同的数字表示。再接下来 $M$ 行，每行两个正整数 $L, R$ 表示一个询问。\n", "outputFormat": "包含 $M$ 行，对于每个询问在一行中输出分数 $A/B$ 表示从该询问的区间 $[L,R]$ 中随机抽出两只袜子颜色相同的概率。若该概率为 $0$ 则输出 `0/1`，否则输出的 $A/B$ 必须为最简分数。（详见样例）\n", "hint": "$30\\%$ 的数据中，$N,M\\leq 5000$；\n\n$60\\%$ 的数据中，$N,M \\leq 25000$；\n\n$100\\%$ 的数据中，$N,M \\leq 50000$，$1 \\leq L \\leq R \\leq N$，$C_i \\leq N$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Xiao Z's Socks", "background": "", "description": "Updated on 2020.6.10: time limit updated.\n\nAs a somewhat careless person, Xiao Z spends a long time every morning trying to find a pair of socks from a pile of colorful ones. One day, he could no longer stand this annoying process and decided to leave it to fate.\n\nSpecifically, Xiao Z numbers his $N$ socks from $1$ to $N$, then randomly selects two socks to wear from those numbered $L$ to $R$. Although Xiao Z does not care whether the two socks form a true pair, he does care about their colors, since wearing two socks of different colors would be embarrassing.\n\nYour task is to tell Xiao Z the probability that he draws two socks of the same color. Of course, Xiao Z wants this probability to be as high as possible, so he may ask multiple queries $(L, R)$ to help him choose.\n\nHowever, there are cases with $L = R$ in the testdata. Please handle this case specially and output `0/1`.", "inputFormat": "The first line contains two positive integers $N$ and $M$. $N$ is the number of socks, and $M$ is the number of queries Xiao Z asks. The next line contains $N$ positive integers $C_i$, where $C_i$ denotes the color of the $i$-th sock; the same color is represented by the same integer. Then follow $M$ lines, each containing two positive integers $L, R$ representing a query.", "outputFormat": "Output $M$ lines. For each query, output a fraction $A/B$ on a single line representing the probability that two randomly chosen socks from the interval $[L, R]$ have the same color. If this probability is $0$, output `0/1`. Otherwise, $A/B$ must be in lowest terms (see the sample).", "hint": "In $30\\%$ of the testdata, $N, M \\leq 5000$.\n\nIn $60\\%$ of the testdata, $N, M \\leq 25000$.\n\nIn $100\\%$ of the testdata, $N, M \\leq 50000$, $1 \\leq L \\leq R \\leq N$, $C_i \\leq N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 小 Z 的袜子", "background": "", "description": "upd on 2020.6.10 ：更新了时限。\n\n作为一个生活散漫的人，小 Z 每天早上都要耗费很久从一堆五颜六色的袜子中找出一双来穿。终于有一天，小 Z 再也无法忍受这恼人的找袜子过程，于是他决定听天由命……\n\n具体来说，小 Z 把这 $N$ 只袜子从 $1$ 到 $N$ 编号，然后从编号 $L$ 到 $R$ 的袜子中随机选出两只来穿。尽管小 Z 并不在意两只袜子是不是完整的一双，他却很在意袜子的颜色，毕竟穿两只不同色的袜子会很尴尬。\n\n你的任务便是告诉小 Z，他有多大的概率抽到两只颜色相同的袜子。当然，小 Z 希望这个概率尽量高，所以他可能会询问多个 $(L,R)$ 以方便自己选择。\n\n**然而数据中有 $L=R$ 的情况，请特判这种情况，输出`0/1`。**\n", "inputFormat": "输入文件第一行包含两个正整数 $N$ 和 $M$。$N$ 为袜子的数量，$M$ 为小 Z 所提的询问的数量。接下来一行包含 $N$ 个正整数 $C_i$，其中 $C_i$ 表示第 $i$ 只袜子的颜色，相同的颜色用相同的数字表示。再接下来 $M$ 行，每行两个正整数 $L, R$ 表示一个询问。\n", "outputFormat": "包含 $M$ 行，对于每个询问在一行中输出分数 $A/B$ 表示从该询问的区间 $[L,R]$ 中随机抽出两只袜子颜色相同的概率。若该概率为 $0$ 则输出 `0/1`，否则输出的 $A/B$ 必须为最简分数。（详见样例）\n", "hint": "$30\\%$ 的数据中，$N,M\\leq 5000$；\n\n$60\\%$ 的数据中，$N,M \\leq 25000$；\n\n$100\\%$ 的数据中，$N,M \\leq 50000$，$1 \\leq L \\leq R \\leq N$，$C_i \\leq N$。\n", "locale": "zh-CN"}}}
{"pid": "P1495", "type": "P", "difficulty": 5, "samples": [["3\n3 1\n5 1\n7 2", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "中国剩余定理 CRT", "模板题"], "title": "【模板】中国剩余定理（CRT）/ 曹冲养猪", "background": "", "description": "自从曹冲搞定了大象以后，曹操就开始捉摸让儿子干些事业，于是派他到中原养猪场养猪，可是曹冲满不高兴，于是在工作中马马虎虎，有一次曹操想知道母猪的数量，于是曹冲想狠狠耍曹操一把。举个例子，假如有 $16$ 头母猪，如果建了 $3$ 个猪圈，剩下 $1$ 头猪就没有地方安家了。如果建造了 $5$ 个猪圈，但是仍然有 $1$ 头猪没有地方去，然后如果建造了 $7$ 个猪圈，还有 $2$ 头没有地方去。你作为曹总的私人秘书理所当然要将准确的猪数报给曹总，你该怎么办？", "inputFormat": "第一行包含一个整数 $n$ —— 建立猪圈的次数，接下来 $n$ 行，每行两个整数 $a_i, b_i$，表示建立了 $a_i$ 个猪圈，有 $b_i$ 头猪没有去处。你可以假定 $a_1 \\sim a_n$ 互质。", "outputFormat": "输出包含一个自然数，即为曹冲至少养母猪的数目。\n", "hint": "$1 \\leq n\\le10$，$0 \\leq b_i\\lt a_i\\le100000$，$1 \\leq \\prod a_i \\leq 10^{18}$", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Chinese Remainder Theorem (CRT) / Cao Chong Raises Pigs", "background": "", "description": "After Cao Chong solved the elephant problem, Cao Cao wanted his son to take on some real work, so he sent him to manage a pig farm in the Central Plains. Cao Chong was unhappy and worked carelessly. One day, Cao Cao wanted to know the number of sows, so Cao Chong decided to play a trick on him. For example, suppose there are $16$ sows. If $3$ pens are built, then $1$ sow has nowhere to go. If $5$ pens are built, there is still $1$ sow with no place to go. If $7$ pens are built, there are $2$ sows left without a place. As Cao Cao’s personal secretary, you must report the exact number of sows. What should you do?", "inputFormat": "The first line contains an integer $n$ — the number of times pens are built. The next $n$ lines each contain two integers $a_i, b_i$, meaning that when $a_i$ pens are built, there are $b_i$ sows without a place to go. You may assume $a_1 \\sim a_n$ are pairwise coprime.", "outputFormat": "Output a single positive integer: the minimum possible number of sows that Cao Chong raises.", "hint": "$1 \\leq n\\le10$，$0 \\leq b_i\\lt a_i\\le100000$，$1 \\leq \\prod a_i \\leq 10^{18}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】中国剩余定理（CRT）/ 曹冲养猪", "background": "", "description": "自从曹冲搞定了大象以后，曹操就开始捉摸让儿子干些事业，于是派他到中原养猪场养猪，可是曹冲满不高兴，于是在工作中马马虎虎，有一次曹操想知道母猪的数量，于是曹冲想狠狠耍曹操一把。举个例子，假如有 $16$ 头母猪，如果建了 $3$ 个猪圈，剩下 $1$ 头猪就没有地方安家了。如果建造了 $5$ 个猪圈，但是仍然有 $1$ 头猪没有地方去，然后如果建造了 $7$ 个猪圈，还有 $2$ 头没有地方去。你作为曹总的私人秘书理所当然要将准确的猪数报给曹总，你该怎么办？", "inputFormat": "第一行包含一个整数 $n$ —— 建立猪圈的次数，接下来 $n$ 行，每行两个整数 $a_i, b_i$，表示建立了 $a_i$ 个猪圈，有 $b_i$ 头猪没有去处。你可以假定 $a_1 \\sim a_n$ 互质。", "outputFormat": "输出包含一个自然数，即为曹冲至少养母猪的数目。\n", "hint": "$1 \\leq n\\le10$，$0 \\leq b_i\\lt a_i\\le100000$，$1 \\leq \\prod a_i \\leq 10^{18}$", "locale": "zh-CN"}}}
{"pid": "P1496", "type": "P", "difficulty": 2, "samples": [["3\n-1 1\n5 11\n2 9", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "离散化", "O2优化"], "title": "火烧赤壁", "background": "曹操平定北方以后，公元 208 年，率领大军南下，进攻刘表。他的人马还没有到荆州，刘表已经病死。他的儿子刘琮听到曹军声势浩大，吓破了胆，先派人求降了。\n\n孙权任命周瑜为都督，拨给他三万水军，叫他同刘备协力抵抗曹操。\n\n隆冬的十一月，天气突然回暖，刮起了东南风。\n\n没想到东吴船队离开北岸大约二里距离，前面十条大船突然同时起火。火借风势，风助火威。十条火船，好比十条火龙一样，闯进曹军水寨。那里的船舰，都挤在一起，又躲不开，很快地都烧起来。一眨眼工夫，已经烧成一片火海。\n\n曹操气急败坏的把你找来，要你钻入火海把连环线上着火的船只的长度统计出来！", "description": "给定每个起火部分的起点和终点，请你求出燃烧位置的长度之和。", "inputFormat": "第一行一个整数，表示起火的信息条数 $n$。  \n接下来 $n$ 行，每行两个整数 $a, b$，表示一个着火位置的起点和终点（**注意：左闭右开**）。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 2 \\times 10^4$，$-2^{31} \\leq a <  b \\lt 2^{31}$，且答案小于 $2^{31}$。\n\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Burning of Red Cliffs", "background": "After pacifying the north, in AD 208, Cao Cao led a massive army south to attack Liu Biao. Before his forces reached Jingzhou, Liu Biao had already died of illness. His son Liu Cong, terrified by the might of Cao Cao’s army, sent envoys to surrender first.\n\nSun Quan appointed Zhou Yu as the commander-in-chief, assigned him 30,000 marines, and ordered him to join forces with Liu Bei to resist Cao Cao.\n\nIn the eleventh month of deep winter, the weather suddenly turned warm and a southeast wind began to blow.\n\nUnexpectedly, when the fleet of Eastern Wu was about two li away from the north bank, the front ten large ships suddenly caught fire at the same time. The fire rode the wind, and the wind fed the fire. The ten fire ships, like ten fire dragons, charged into Cao Cao’s naval camp. The ships there were all crowded together and had no way to evade, and they quickly caught fire. In the blink of an eye, the whole place was a sea of flames.\n\nCao Cao, in a panic, summoned you and ordered you to plunge into the sea of fire to compute the total length of the ships on the chained line that are on fire.", "description": "Given the start and end of each burning segment, please compute the total length of the burning positions.", "inputFormat": "The first line contains an integer $n$, indicating the number of fire reports.  \nThen follow $n$ lines; each line contains two integers $a, b$, denoting the start and end of a burning segment (Note: left-closed, right-open).", "outputFormat": "Output a single line with one integer representing the answer.", "hint": "Constraints\n\nFor all test points, it is guaranteed that $1 \\leq n \\leq 2 \\times 10^4$, $-2^{31} \\leq a < b \\lt 2^{31}$, and the answer is less than $2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "火烧赤壁", "background": "曹操平定北方以后，公元 208 年，率领大军南下，进攻刘表。他的人马还没有到荆州，刘表已经病死。他的儿子刘琮听到曹军声势浩大，吓破了胆，先派人求降了。\n\n孙权任命周瑜为都督，拨给他三万水军，叫他同刘备协力抵抗曹操。\n\n隆冬的十一月，天气突然回暖，刮起了东南风。\n\n没想到东吴船队离开北岸大约二里距离，前面十条大船突然同时起火。火借风势，风助火威。十条火船，好比十条火龙一样，闯进曹军水寨。那里的船舰，都挤在一起，又躲不开，很快地都烧起来。一眨眼工夫，已经烧成一片火海。\n\n曹操气急败坏的把你找来，要你钻入火海把连环线上着火的船只的长度统计出来！", "description": "给定每个起火部分的起点和终点，请你求出燃烧位置的长度之和。", "inputFormat": "第一行一个整数，表示起火的信息条数 $n$。  \n接下来 $n$ 行，每行两个整数 $a, b$，表示一个着火位置的起点和终点（**注意：左闭右开**）。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 2 \\times 10^4$，$-2^{31} \\leq a <  b \\lt 2^{31}$，且答案小于 $2^{31}$。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P1497", "type": "P", "difficulty": 2, "samples": [["4 4 1\n4\n", "24\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "木牛流马", "background": "孔明造出了木牛流马。\n\n> 木牛者，方腹曲头，一脚四足，头入领中，舌著于腹。载多而行少，宜可大用，不可小使；特行者数十里，群行者二十里也。曲者为牛头，双者为牛脚，横者为牛领，转者为牛足，覆者为牛背，方者为牛腹，垂者为牛舌，曲者为牛肋，刻者为牛齿，立者为牛角，细者为牛鞅，摄者为牛秋轴。牛仰双辕，人行六尺，牛行四步。载一岁粮，日行二十里，而人不大劳。流马尺寸之数，肋长三尺五寸，广三寸，厚二寸二分，左右同。前轴孔分墨去头四寸，径中二寸。前脚孔分墨二寸，去前轴孔四寸五分，广一寸。前杠孔去前脚孔分墨二寸七分，孔长二寸，广一寸。后轴孔去前杠分墨一尺五分，大小与前同。后脚孔分墨去后轴孔三寸五分，大小与前同。后杠孔去后脚孔分墨二寸七分，后载克去后杠孔分墨四寸五分。前杠长一尺八寸，广二寸，厚一寸五分。后杠与等版方囊二枚，厚八分，长二尺七寸，高一尺六寸五分，广一尺六寸，每枚受米二斛三斗。从上杠孔去肋下七寸，前后同。上杠孔去下杠孔分墨一尺三寸，孔长一寸五分，广七分，八孔同。前后四脚，广二寸，厚一寸五分。形制如象，靬长四寸，径面四寸三分。孔径中三脚杠，长二尺一寸，广一寸五分，厚一寸四分，同杠耳。（《三国志·亮集载作木牛流马法》）\n\n可是在现实中它有个缺陷，就是两个不能在同一行或同一列！", "description": "孔明兴高采烈的叫庞统来参观，孔明存心想难一难庞统，他把 $k$ 个木牛流马放在一个大的 $n \\times n$ 的格子地板上，并且给他们都染上色，想让庞统帮着算算有多少种不同的合理布局情况？", "inputFormat": "第一行: $n, k, h$（$n \\le 20$，$h$ 为有多少种颜色）。\n\n接下来 $h$ 行为每种颜色多少个。", "outputFormat": "合理布局情况总数。", "hint": "不需要高精度，并且孔明规定在格子地板上不能翻转，也就是说如果两种布局在翻转后是一样的仍算两种。", "locale": "zh-CN", "translations": {"en": {"title": "Wooden Ox and Flowing Horse", "background": "Kongming created the Wooden Ox and Flowing Horse.\n\n> The “wooden ox” has a square belly and a curved head, one leg with four feet; the head goes into the collar, and the tongue is attached to the belly. When heavily loaded it travels less, suitable for large-scale use, not for small errands; a single unit travels several tens of li, while a group travels twenty li. Curved pieces make the ox’s head, paired pieces the ox’s legs, crosswise pieces the ox’s collar, turning pieces the ox’s feet, covering pieces the ox’s back, square pieces the ox’s belly, hanging pieces the ox’s tongue, curved pieces the ox’s ribs, carved pieces the ox’s teeth, upright pieces the ox’s horns, thin pieces the ox’s yoke, and “she” pieces the ox’s autumn axle. When the ox is facing up with double shafts: when a person walks six chi, the ox walks four steps. Carrying one year’s grain, it travels twenty li per day, and the person is not greatly fatigued. As for the dimensions of the “flowing horse”: rib length 3 chi 5 cun, width 3 cun, thickness 2 cun 2 fen, the same on left and right. The front axle hole “fenmo” is 4 cun from the head, with a diameter of 2 cun. The front leg hole “fenmo” is 2 cun, 4 cun 5 fen from the front axle hole, width 1 cun. The front bar hole is 2 cun 7 fen from the front leg hole, hole length 2 cun, width 1 cun. The rear axle hole is 1 chi 5 fen from the front bar “fenmo”, same size as the front. The rear leg hole is 3 cun 5 fen from the rear axle hole “fenmo”, same size as the front. The rear bar hole is 2 cun 7 fen from the rear leg hole “fenmo”; the rear load clamp is 4 cun 5 fen from the rear bar hole “fenmo”. The front bar length is 1 chi 8 cun, width 2 cun, thickness 1 cun 5 fen. The rear bar and equal boards, two square bags, thickness 8 fen, length 2 chi 7 cun, height 1 chi 6 cun 5 fen, width 1 chi 6 cun; each holds 2 hu 3 dou of rice. From the upper bar hole to the underside of the rib is 7 cun, the same front and rear. The upper bar hole is 1 chi 3 cun from the lower bar hole “fenmo”, hole length 1 cun 5 fen, width 7 fen; all eight holes are the same. The four legs, front and rear, are 2 cun wide and 1 cun 5 fen thick. The shape is like an elephant; the shoe length is 4 cun, diameter 4 cun 3 fen. The hole diameter is for the central three-legged bar; its length is 2 chi 1 cun, width 1 cun 5 fen, thickness 1 cun 4 fen, and the bar ears are the same. (Records of the Three Kingdoms, “Zhuge Liang Collection: Method for Making the Wooden Ox and Flowing Horse”).\n\nHowever, in practice it has a flaw: no two can be in the same row or the same column!", "description": "Kongming excitedly invited Pang Tong to visit. Intending to challenge him, Kongming placed $k$ Wooden Ox and Flowing Horse pieces on a large $n \\times n$ tiled grid and painted them in colors. He asked Pang Tong to count how many different valid layout configurations there are.", "inputFormat": "First line: $n, k, h$ ($n \\le 20$, $h$ is the number of colors).\n\nThe next $h$ lines give the quantity of each color.", "outputFormat": "The total number of valid layouts.", "hint": "No big integer is needed. Moreover, Kongming stipulates that the grid cannot be flipped; that is, if two layouts become the same after a flip, they are still counted as two.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "木牛流马", "background": "孔明造出了木牛流马。\n\n> 木牛者，方腹曲头，一脚四足，头入领中，舌著于腹。载多而行少，宜可大用，不可小使；特行者数十里，群行者二十里也。曲者为牛头，双者为牛脚，横者为牛领，转者为牛足，覆者为牛背，方者为牛腹，垂者为牛舌，曲者为牛肋，刻者为牛齿，立者为牛角，细者为牛鞅，摄者为牛秋轴。牛仰双辕，人行六尺，牛行四步。载一岁粮，日行二十里，而人不大劳。流马尺寸之数，肋长三尺五寸，广三寸，厚二寸二分，左右同。前轴孔分墨去头四寸，径中二寸。前脚孔分墨二寸，去前轴孔四寸五分，广一寸。前杠孔去前脚孔分墨二寸七分，孔长二寸，广一寸。后轴孔去前杠分墨一尺五分，大小与前同。后脚孔分墨去后轴孔三寸五分，大小与前同。后杠孔去后脚孔分墨二寸七分，后载克去后杠孔分墨四寸五分。前杠长一尺八寸，广二寸，厚一寸五分。后杠与等版方囊二枚，厚八分，长二尺七寸，高一尺六寸五分，广一尺六寸，每枚受米二斛三斗。从上杠孔去肋下七寸，前后同。上杠孔去下杠孔分墨一尺三寸，孔长一寸五分，广七分，八孔同。前后四脚，广二寸，厚一寸五分。形制如象，靬长四寸，径面四寸三分。孔径中三脚杠，长二尺一寸，广一寸五分，厚一寸四分，同杠耳。（《三国志·亮集载作木牛流马法》）\n\n可是在现实中它有个缺陷，就是两个不能在同一行或同一列！", "description": "孔明兴高采烈的叫庞统来参观，孔明存心想难一难庞统，他把 $k$ 个木牛流马放在一个大的 $n \\times n$ 的格子地板上，并且给他们都染上色，想让庞统帮着算算有多少种不同的合理布局情况？", "inputFormat": "第一行: $n, k, h$（$n \\le 20$，$h$ 为有多少种颜色）。\n\n接下来 $h$ 行为每种颜色多少个。", "outputFormat": "合理布局情况总数。", "hint": "不需要高精度，并且孔明规定在格子地板上不能翻转，也就是说如果两种布局在翻转后是一样的仍算两种。", "locale": "zh-CN"}}}
{"pid": "P1498", "type": "P", "difficulty": 3, "samples": [["2", "   /\\\n  /__\\\n /\\  /\\\n/__\\/__\\\n"], ["3", "       /\\\n      /__\\\n     /\\  /\\\n    /__\\/__\\\n   /\\      /\\\n  /__\\    /__\\\n /\\  /\\  /\\  /\\\n/__\\/__\\/__\\/__\\"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "递归", "湖南", "分治", "深度优先搜索 DFS"], "title": "南蛮图腾", "background": "自从到了南蛮之地，孔明不仅把孟获收拾的服服帖帖，而且还发现了不少少数民族的智慧，他发现少数民族的图腾往往有着一种分形的效果，在得到了酋长的传授后，孔明掌握了不少绘图技术，但唯独不会画他们的图腾，于是他找上了你的爷爷的爷爷的爷爷的爷爷……帮忙，作为一个好孙子的孙子的孙子的孙子……你能做到吗？", "description": "给定一个正整数 $n$，参考输出样例，输出图形。", "inputFormat": "每个数据输入一个正整数 $n$，表示图腾的大小（此大小非彼大小）。", "outputFormat": "这个大小的图腾。", "hint": "数据保证，$1 \\leq n \\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Nanman Totem", "background": "Since arriving in the land of the Nanman, Kongming not only subdued Meng Huo, but also discovered much wisdom among the ethnic minorities. He noticed that their totems often exhibit a fractal effect. After learning from the chieftain, he mastered many drawing techniques, but still could not draw their totem. So he sought help from your grandpa’s grandpa’s grandpa’s grandpa… As the grandchild’s grandchild’s grandchild’s grandchild…, can you do it?", "description": "Given a positive integer $n$, refer to the sample output and print the pattern.", "inputFormat": "Each test contains a single positive integer $n$, representing the totem’s size.", "outputFormat": "Output the totem of size $n$.", "hint": "Constraints: $1 \\leq n \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "南蛮图腾", "background": "自从到了南蛮之地，孔明不仅把孟获收拾的服服帖帖，而且还发现了不少少数民族的智慧，他发现少数民族的图腾往往有着一种分形的效果，在得到了酋长的传授后，孔明掌握了不少绘图技术，但唯独不会画他们的图腾，于是他找上了你的爷爷的爷爷的爷爷的爷爷……帮忙，作为一个好孙子的孙子的孙子的孙子……你能做到吗？", "description": "给定一个正整数 $n$，参考输出样例，输出图形。", "inputFormat": "每个数据输入一个正整数 $n$，表示图腾的大小（此大小非彼大小）。", "outputFormat": "这个大小的图腾。", "hint": "数据保证，$1 \\leq n \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P1499", "type": "P", "difficulty": 4, "samples": [["3 2\n1 060000 301\n2 060300 600\n", "0\n061301\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2000", "枚举", "CTSC/CTS"], "title": "[CTSC2000] 公路巡逻", "background": null, "description": "在一条没有分岔的高速公路上有 $n$ 个关口，相邻两个关口之间的距离都是 $10\\rm km$ 。所有车辆在这条高速公路上的最低速度为 $60\\rm km/h$ ，最高速度为 $120\\rm km/h$，并且只能在关口处改变速度。\n\n巡逻的方式是在某个时刻 $T_{i}$ 从第 $n_{i}$ 个关口派出一辆巡逻车匀速驶抵第 $n_{i}+1$ 个关口，路上耗费的时间为 $t_{i}$ 秒。\n\n两辆车相遇是指它们之间发生超车或者两车同时到达某关口（同时出发不算相遇）。\n\n巡逻部门想知道一辆于 $6$ 点整从第 $1$ 个关口出发去第 $n$ 个关口的车（称为目标车）最少会与多少辆巡逻车相遇，请编程计算之。假设所有车辆到达关口的时刻都是整秒。", "inputFormat": "输入文件第一行为两个整数，分别为关口数 $n$ 和巡逻车数 $m$ 。\n\n接下来的 $m$ 行每一行为一辆巡逻车的信息（按出发位置递增排序），格式为 $n_{i}$，$T_{i}$，$t_{i}$，分别表示第 $i$ 辆巡逻车的出发位置、出发时刻和路上耗费的时间，其中 $n_{i}$ 和 $T_{i}$ 为整数， $T_{i}$ 形如 `HHMMSS`，表示时、分、秒，采用 $24$ 小时制，不足两位的数用前置 $0$ 补齐。", "outputFormat": "输出文件第一行为目标车与巡逻车相遇次数。\n\n第二行为目标车与巡逻车相遇次数最少时最早到达第 $n$ 个关口的时刻（格式同输入中的 $T_{i}$ ）。", "hint": "$1 < n < 50$，$1 < m < 300$，$1 \\leq  n_{i} < n$，$300 \\leq t_i \\leq 600$，所有的 $T_i$ 不早于 $05:00$，不晚于 $23:00$。\n\nCTSC2000 第一试", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2000] Highway Patrol", "background": "", "description": "On a straight highway with no forks, there are $n$ checkpoints, and the distance between any two adjacent checkpoints is $10\\rm km$ . All vehicles on this highway have a minimum speed of $60\\rm km/h$ and a maximum speed of $120\\rm km/h$, and they may change speed only at checkpoints.\n\nPatrolling is performed as follows: at some time $T_{i}$, a patrol car is dispatched from checkpoint $n_{i}$, travels at a constant speed to checkpoint $n_{i}+1$, and spends $t_{i}$ seconds on the road.\n\nTwo cars are considered to have met if one overtakes the other or if both arrive at the same checkpoint at the same time (departing at the same time does not count as a meeting).\n\nThe patrol department wants to know the minimum number of patrol cars that a car (the “target car”) departing from checkpoint $1$ at exactly $6$ o’clock to checkpoint $n$ will meet. Please write a program to compute this. Assume that all vehicles arrive at checkpoints at integer seconds.", "inputFormat": "The first line of the input file contains two integers, the number of checkpoints $n$ and the number of patrol cars $m$.\n\nEach of the next $m$ lines describes one patrol car (sorted by increasing starting position). The format is $n_{i}$, $T_{i}$, $t_{i}$, representing the $i$-th patrol car’s starting position, departure time, and time spent on the road, respectively. Here $n_{i}$ and $T_{i}$ are integers. $T_{i}$ has the form `HHMMSS`, representing hour, minute, and second in 24-hour time; numbers with fewer than two digits are padded with a leading 0.", "outputFormat": "The first line of the output file is the number of meetings between the target car and the patrol cars.\n\nThe second line is the earliest arrival time at checkpoint $n$ when the number of meetings is minimized (format is the same as $T_{i}$ in the input).", "hint": "Constraints: $1 < n < 50$，$1 < m < 300$，$1 \\leq n_{i} < n$，$300 \\leq t_i \\leq 600$，all $T_i$ are no earlier than 05:00 and no later than 23:00.\n\nCTSC 2000 First Session.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2000] 公路巡逻", "background": null, "description": "在一条没有分岔的高速公路上有 $n$ 个关口，相邻两个关口之间的距离都是 $10\\rm km$ 。所有车辆在这条高速公路上的最低速度为 $60\\rm km/h$ ，最高速度为 $120\\rm km/h$，并且只能在关口处改变速度。\n\n巡逻的方式是在某个时刻 $T_{i}$ 从第 $n_{i}$ 个关口派出一辆巡逻车匀速驶抵第 $n_{i}+1$ 个关口，路上耗费的时间为 $t_{i}$ 秒。\n\n两辆车相遇是指它们之间发生超车或者两车同时到达某关口（同时出发不算相遇）。\n\n巡逻部门想知道一辆于 $6$ 点整从第 $1$ 个关口出发去第 $n$ 个关口的车（称为目标车）最少会与多少辆巡逻车相遇，请编程计算之。假设所有车辆到达关口的时刻都是整秒。", "inputFormat": "输入文件第一行为两个整数，分别为关口数 $n$ 和巡逻车数 $m$ 。\n\n接下来的 $m$ 行每一行为一辆巡逻车的信息（按出发位置递增排序），格式为 $n_{i}$，$T_{i}$，$t_{i}$，分别表示第 $i$ 辆巡逻车的出发位置、出发时刻和路上耗费的时间，其中 $n_{i}$ 和 $T_{i}$ 为整数， $T_{i}$ 形如 `HHMMSS`，表示时、分、秒，采用 $24$ 小时制，不足两位的数用前置 $0$ 补齐。", "outputFormat": "输出文件第一行为目标车与巡逻车相遇次数。\n\n第二行为目标车与巡逻车相遇次数最少时最早到达第 $n$ 个关口的时刻（格式同输入中的 $T_{i}$ ）。", "hint": "$1 < n < 50$，$1 < m < 300$，$1 \\leq  n_{i} < n$，$300 \\leq t_i \\leq 600$，所有的 $T_i$ 不早于 $05:00$，不晚于 $23:00$。\n\nCTSC2000 第一试", "locale": "zh-CN"}}}
{"pid": "P1500", "type": "P", "difficulty": 6, "samples": [["2\n3\n0 0 Adam\n1 1 Jack\n0 2 George\n1 0 Victoria\n0 1 Susan\n1 2 Cathy\nAdam Cathy 100\nSusan George 20\nGeorge Cathy 40\nJack Susan 5\nCathy Jack 30\nVictoria Jack 20\nAdam Victoria 15\nEnd\n", "65"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2000", "CTSC/CTS"], "title": "[CTSC2000] 丘比特的烦恼", "background": "随着社会的不断发展，人与人之间的感情越来越功利化。最近，爱神丘比特发现，爱情也已不再是完全纯洁的了。这使得丘比特很是苦恼，他越来越难找到合适的男女，并向他们射去丘比特之箭。于是丘比特千里迢迢远赴中国，找到了掌管东方人爱情的神——月下老人，向他求教。\n\n月下老人告诉丘比特，纯洁的爱情并不是不存在，而是他没有找到。在东方，人们讲究的是缘分。月下老人只要做一男一女两个泥人，在他们之间连上一条红线，那么它们所代表的人就会相爱——无论他们身处何地。而丘比特的爱情之箭只能射中两个距离相当近的人，选择的范围自然就小了很多，不能找到真正的有缘人。", "description": "情人节（Valentine's day）的午夜零时，丘比特开始了自己的工作。他选择了一组数目相等的男女，感应到他们互相之间的缘分大小，并依此射出了神箭，使他们产生爱意。他希望能选择最好的方法，使被他选择的每一个人被射中一次，且每一对被射中的人之间的缘分的和最大。\n\n当然，无论丘比特怎么改造自己的弓箭，总还是存在缺陷的。首先，弓箭的射程尽管增大了，但毕竟还是有限的，不能像月下老人那样，做到“千里姻缘一线牵”。其次，无论怎么改造，箭的轨迹终归只能是一条直线，也就是说，如果两个人之间的连线段上有别人，那么莫不可向他们射出丘比特之箭，否则，按月下老人的话，就是“乱点鸳鸯谱”了。\n\n作为一个凡人，你的任务是运用先进的计算机为丘比特找到最佳的方案。", "inputFormat": "输入第一行为正整数 $k$，表示丘比特之箭的射程。\n\n第二行为正整数 $n$。\n\n随后有 $2 \\times n$ 行，表示丘比特选中的人的信息，其中前 $n$ 行为男子，后 $n$ 行为女子。\n\n每个人的信息由两部分组成：他的姓名和他的位置。姓名是长度小于 $20$ 且仅包含字母的字符串，忽略大小写的区别，位置是由一对整数表示的坐标，它们之间用空格分隔。格式为 ```x y Name```。\n\n输入文件剩下的部分描述了这些人的缘分。每一行的格式为 ```Name1 Name2 p```。\n\n`Name1` 和 `Name2` 为有缘人的姓名，$p$ 是他们之间的缘分值（$p$ 为小于等于 $255$ 的正整数）。\n\n以一个 ```End``` 作为文件结束标志。\n\n每两个人之间的缘分至多只被描述一次。如果没有被描述，则说明他们缘分值为 $1$。", "outputFormat": "输出仅一个正整数，表示每一对被射中的人之间的缘分的总和。这个和应当是最大的。", "hint": "$1\\le n\\le 30$。\n\nCTSC2000 第二试", "locale": "zh-CN", "translations": {"en": {"title": "[CTT 2000] Cupid's Trouble", "background": "As society develops, relationships between people are becoming increasingly utilitarian. Recently, Cupid, the god of love, found that love is no longer entirely pure. This troubled him greatly: it became harder for him to find suitable couples to shoot with his arrows. So Cupid traveled all the way to China to consult Yue Lao (Yuelao), the deity who governs love among Eastern people.\n\nYue Lao told Cupid that pure love does exist; he just had not found it. In the East, people value “fate.” As long as Yue Lao makes a clay man and a clay woman and connects them with a red thread, the people they represent will fall in love—no matter where they are. Cupid’s arrows, however, can only hit two people who are relatively close to each other, which greatly limits his choices and keeps him from finding truly destined couples.", "description": "At midnight on Valentine’s Day, Cupid begins his work. He selects an equal number of men and women, senses the “affinity” between every pair of them, and shoots his divine arrows accordingly to make them fall in love. He wants to choose the best plan so that every selected person is shot exactly once, and the sum of the affinities of all chosen pairs is maximized.\n\nHowever, Cupid’s bow and arrows have limitations. First, the shooting range, though enlarged, is still finite: unlike Yue Lao’s “red thread,” the arrow cannot connect lovers from any distance. Second, regardless of any modifications, an arrow always flies along a straight line. That is, if there is any other person lying on the line segment connecting a man and a woman, Cupid must not shoot that pair—otherwise, as Yue Lao would say, he would be “randomly matching couples.”\n\nYour task is to use a computer to help Cupid find the optimal plan: match the $n$ men to the $n$ women one-to-one to maximize the total affinity, subject to:\n- The Euclidean distance between the man and the woman in each chosen pair is at most $k$.\n- No other person lies on the line segment between the two in each chosen pair.", "inputFormat": "The first line contains a positive integer $k$, the shooting range of Cupid’s arrow.\n\nThe second line contains a positive integer $n$.\n\nThen follow $2 \\times n$ lines describing the selected people: the first $n$ lines are men, the last $n$ lines are women.\n\nEach person’s information has two parts: their name and their position. The name is a case-insensitive string of letters with length less than $20$. The position is a pair of integers representing coordinates, separated by a space. The format is:\n```x y Name```\n\nThe remaining part of the input describes affinities. Each line has the format:\n```Name1 Name2 p```\n\nHere, `Name1` and `Name2` are the names of two people who are “destined,” and $p$ is their affinity value (a positive integer with $p \\le 255$).\n\nThe input ends with:\n```End```\n\nFor any pair of people, the affinity is described at most once. If it is not described, their affinity is $1$.", "outputFormat": "Output a single positive integer: the maximum possible sum of affinities over all valid one-to-one matchings. Each selected person must be matched exactly once.", "hint": "$1 \\le n \\le 30$.\n\nCTSC 2000, Round 2.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2000] 丘比特的烦恼", "background": "随着社会的不断发展，人与人之间的感情越来越功利化。最近，爱神丘比特发现，爱情也已不再是完全纯洁的了。这使得丘比特很是苦恼，他越来越难找到合适的男女，并向他们射去丘比特之箭。于是丘比特千里迢迢远赴中国，找到了掌管东方人爱情的神——月下老人，向他求教。\n\n月下老人告诉丘比特，纯洁的爱情并不是不存在，而是他没有找到。在东方，人们讲究的是缘分。月下老人只要做一男一女两个泥人，在他们之间连上一条红线，那么它们所代表的人就会相爱——无论他们身处何地。而丘比特的爱情之箭只能射中两个距离相当近的人，选择的范围自然就小了很多，不能找到真正的有缘人。", "description": "情人节（Valentine's day）的午夜零时，丘比特开始了自己的工作。他选择了一组数目相等的男女，感应到他们互相之间的缘分大小，并依此射出了神箭，使他们产生爱意。他希望能选择最好的方法，使被他选择的每一个人被射中一次，且每一对被射中的人之间的缘分的和最大。\n\n当然，无论丘比特怎么改造自己的弓箭，总还是存在缺陷的。首先，弓箭的射程尽管增大了，但毕竟还是有限的，不能像月下老人那样，做到“千里姻缘一线牵”。其次，无论怎么改造，箭的轨迹终归只能是一条直线，也就是说，如果两个人之间的连线段上有别人，那么莫不可向他们射出丘比特之箭，否则，按月下老人的话，就是“乱点鸳鸯谱”了。\n\n作为一个凡人，你的任务是运用先进的计算机为丘比特找到最佳的方案。", "inputFormat": "输入第一行为正整数 $k$，表示丘比特之箭的射程。\n\n第二行为正整数 $n$。\n\n随后有 $2 \\times n$ 行，表示丘比特选中的人的信息，其中前 $n$ 行为男子，后 $n$ 行为女子。\n\n每个人的信息由两部分组成：他的姓名和他的位置。姓名是长度小于 $20$ 且仅包含字母的字符串，忽略大小写的区别，位置是由一对整数表示的坐标，它们之间用空格分隔。格式为 ```x y Name```。\n\n输入文件剩下的部分描述了这些人的缘分。每一行的格式为 ```Name1 Name2 p```。\n\n`Name1` 和 `Name2` 为有缘人的姓名，$p$ 是他们之间的缘分值（$p$ 为小于等于 $255$ 的正整数）。\n\n以一个 ```End``` 作为文件结束标志。\n\n每两个人之间的缘分至多只被描述一次。如果没有被描述，则说明他们缘分值为 $1$。", "outputFormat": "输出仅一个正整数，表示每一对被射中的人之间的缘分的总和。这个和应当是最大的。", "hint": "$1\\le n\\le 30$。\n\nCTSC2000 第二试", "locale": "zh-CN"}}}
