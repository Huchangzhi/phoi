{"pid": "P12711", "type": "P", "difficulty": 2, "samples": [["3\n2 3 3 60\n2 2 1 18\n2 2 1 4", "54\n18\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2021", "KOI（韩国）"], "title": "[KOI 2021 Round 1] 棒球赛季", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "KOI 棒球联赛有 $N$ 个地区联赛，每个地区联赛有 $M$ 支队伍，因此整个联赛由 $N \\times M$ 支队伍构成。\n\n在一个赛季中，每支队伍不仅需要与同一地区联赛的其他队伍进行比赛，还需要与其他地区联赛的队伍进行比赛。与同一地区联赛队伍之间的每队比赛次数记作 $A$，对所有地区联赛都相同。也就是说，某支队伍 $X$ 会与同一地区联赛中的每支其他队伍 $Y$（$X \\ne Y$）各进行 $A$ 场比赛。  \n此外，与其他地区联赛队伍之间的每队比赛次数记作 $B$，也对所有队伍都相同。也就是说，队伍 $X$ 会与所有来自其他地区联赛的队伍 $Z$（$X \\ne Z$）各进行 $B$ 场比赛。  \n但 $A$ 与 $B$ 之间需满足关系：$A = k \\times B$，其中 $k$ 是大于等于 1 的整数。\n\n受全球性流行病影响，今年的 KOI 棒球联赛决定缩短赛季，只要总比赛场数不超过 $D$，并尽可能接近 $D$ 即可。因此，需要重新决定 $A$ 与 $B$ 的值，但仍需满足 $A = k \\times B$，且 $k$ 不变。此外，每支队伍与其他任何一支队伍至少要有一场比赛，也就是说需满足 $A \\geq 1$ 且 $B \\geq 1$。\n\n例如，当 $N = 2$，$M = 3$，$k = 3$，最大比赛场数限制 $D = 60$ 时，若设 $A = 6$，$B = 2$，则与其他地区队伍的总比赛场数为 18，与同一地区队伍的总比赛场数为 36，整个联赛的比赛总场数为 54，这就是不超过 $D$ 且最接近 $D$ 的方案。\n\n现在，给定地区联赛数量 $N$，每个地区联赛的队伍数量 $M$，乘积因子 $k$（满足 $A = k \\times B$），以及最大比赛数限制 $D$，请编写程序计算出不超过 $D$ 的最大联赛总比赛场数。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例数量。  \n接下来的 $T$ 行中，每行包含四个整数 $N$、$M$、$k$、$D$，中间用空格隔开。", "outputFormat": "输出共 $T$ 行，每行一个整数，对应每个测试用例的联赛最大总比赛场数。如果不存在满足条件的方案，则输出 $-1$。", "hint": "**约束条件**\n\n- 所有给定数据均为整数\n- 每组输入数据中，测试用例数量在 1 到 1000 之间\n- $2 \\leq N, M \\leq 100$\n- $1 \\leq k \\leq 100$\n- $1 \\leq D \\leq 10^9$\n\n**子任务**\n\n1.（5 分）$N = 2$  \n2.（5 分）$M = 2$  \n3.（5 分）$k = 1$  \n4.（85 分）无附加约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 1] 棒球赛季", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "KOI 棒球联赛有 $N$ 个地区联赛，每个地区联赛有 $M$ 支队伍，因此整个联赛由 $N \\times M$ 支队伍构成。\n\n在一个赛季中，每支队伍不仅需要与同一地区联赛的其他队伍进行比赛，还需要与其他地区联赛的队伍进行比赛。与同一地区联赛队伍之间的每队比赛次数记作 $A$，对所有地区联赛都相同。也就是说，某支队伍 $X$ 会与同一地区联赛中的每支其他队伍 $Y$（$X \\ne Y$）各进行 $A$ 场比赛。  \n此外，与其他地区联赛队伍之间的每队比赛次数记作 $B$，也对所有队伍都相同。也就是说，队伍 $X$ 会与所有来自其他地区联赛的队伍 $Z$（$X \\ne Z$）各进行 $B$ 场比赛。  \n但 $A$ 与 $B$ 之间需满足关系：$A = k \\times B$，其中 $k$ 是大于等于 1 的整数。\n\n受全球性流行病影响，今年的 KOI 棒球联赛决定缩短赛季，只要总比赛场数不超过 $D$，并尽可能接近 $D$ 即可。因此，需要重新决定 $A$ 与 $B$ 的值，但仍需满足 $A = k \\times B$，且 $k$ 不变。此外，每支队伍与其他任何一支队伍至少要有一场比赛，也就是说需满足 $A \\geq 1$ 且 $B \\geq 1$。\n\n例如，当 $N = 2$，$M = 3$，$k = 3$，最大比赛场数限制 $D = 60$ 时，若设 $A = 6$，$B = 2$，则与其他地区队伍的总比赛场数为 18，与同一地区队伍的总比赛场数为 36，整个联赛的比赛总场数为 54，这就是不超过 $D$ 且最接近 $D$ 的方案。\n\n现在，给定地区联赛数量 $N$，每个地区联赛的队伍数量 $M$，乘积因子 $k$（满足 $A = k \\times B$），以及最大比赛数限制 $D$，请编写程序计算出不超过 $D$ 的最大联赛总比赛场数。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例数量。  \n接下来的 $T$ 行中，每行包含四个整数 $N$、$M$、$k$、$D$，中间用空格隔开。", "outputFormat": "输出共 $T$ 行，每行一个整数，对应每个测试用例的联赛最大总比赛场数。如果不存在满足条件的方案，则输出 $-1$。", "hint": "**约束条件**\n\n- 所有给定数据均为整数\n- 每组输入数据中，测试用例数量在 1 到 1000 之间\n- $2 \\leq N, M \\leq 100$\n- $1 \\leq k \\leq 100$\n- $1 \\leq D \\leq 10^9$\n\n**子任务**\n\n1.（5 分）$N = 2$  \n2.（5 分）$M = 2$  \n3.（5 分）$k = 1$  \n4.（85 分）无附加约束条件", "locale": "zh-CN"}}}
{"pid": "P12712", "type": "P", "difficulty": 3, "samples": [["4 3\n1 1 1 1\nA 1\nA 1\nA 2\nA 2", "A 2\nA 1\nA 2"], ["8 6\n1 2 3 4\nA 2\nA 5\nB 7\nB 2\nC 5\nC 9\nD 1\nD 3", "A 2\nB 7\nC 5\nA 5\nC 9\nD 3"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "KOI（韩国）"], "title": "[KOI 2021 Round 1] 超矩形", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "我们可以考虑 1 维空间中的线段、2 维空间中的矩形、3 维空间中的长方体：\n\n- 线段的大小可以用变量 $A$ 表示，其长度为 $A$；\n- 矩形的大小可以用两个变量 $A$ 和 $B$ 表示，其面积为 $A \\cdot B$；\n- 长方体的大小可以用三个变量 $A$、$B$、$C$ 表示，其体积为 $A \\cdot B \\cdot C$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/77q0lj3j.png)\n\n在四维空间中，可以定义一个由四个变量 $A$、$B$、$C$、$D$ 表示大小的“超矩形”。其“体积”为 $A \\cdot B \\cdot C \\cdot D$。\n\n起初，变量 $A$、$B$、$C$、$D$ 的值分别为 $A_0$、$B_0$、$C_0$、$D_0$。\n\n你有 $N$ 张“卡牌”，每张卡牌上写有一个字母 $T_i$（在 $A$、$B$、$C$、$D$ 中取一个）和一个正整数 $U_i$，表示该卡牌会使对应变量的值增加 $U_i$。每张卡牌最多只能使用一次，用完即消失。\n\n你希望通过**恰好选用 $K$ 张卡牌**（选出的卡牌可以按任意顺序使用），来最大化超矩形的体积。请编写程序，输出一组选牌及使用顺序，使体积最大化。\n\n若存在多种方式达到最大体积，任选其中一种方案输出即可。", "inputFormat": "第一行输入两个整数 $N$ 和 $K$，中间以空格隔开。  \n第二行输入初始变量值 $A_0$、$B_0$、$C_0$、$D_0$，中间以空格隔开。  \n接下来的 $N$ 行中，第 $i$ 行输入第 $i$ 张卡牌的内容，即 $T_i$ 和 $U_i$，中间以空格隔开。\n", "outputFormat": "输出 $K$ 行，依次表示选中的卡牌及其使用顺序，按与输入格式相同的方式给出。\n", "hint": "**约束条件**\n\n- 所有给定数值均为整数\n- $1 \\leq K \\leq N \\leq 200\\,000$\n- $1 \\leq A_0, B_0, C_0, D_0 \\leq 1\\,000\\,000$\n- 对所有 $1 \\leq i \\leq N$，$T_i \\in \\{A, B, C, D\\}$\n- 对所有 $1 \\leq i \\leq N$，$1 \\leq U_i \\leq 1\\,000\\,000$\n\n**子任务**\n\n1. （8 分）$N \\leq 10$，$A_0, B_0, C_0, D_0 \\leq 10$，且所有 $U_i \\leq 10$  \n2. （6 分）$B_0 = C_0 = D_0 = 1$，所有 $T_i = A$  \n3. （15 分）$N \\leq 300$，$A_0, B_0, C_0, D_0 \\leq 100$，所有 $U_i \\leq 100$  \n4. （21 分）所有 $U_i = 1$  \n5. （20 分）$D_0 = 1$，所有 $T_i \\in \\{A, B, C\\}$，所有 $U_i \\leq 10$  \n6. （30 分）无附加约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 1] 超矩形", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "我们可以考虑 1 维空间中的线段、2 维空间中的矩形、3 维空间中的长方体：\n\n- 线段的大小可以用变量 $A$ 表示，其长度为 $A$；\n- 矩形的大小可以用两个变量 $A$ 和 $B$ 表示，其面积为 $A \\cdot B$；\n- 长方体的大小可以用三个变量 $A$、$B$、$C$ 表示，其体积为 $A \\cdot B \\cdot C$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/77q0lj3j.png)\n\n在四维空间中，可以定义一个由四个变量 $A$、$B$、$C$、$D$ 表示大小的“超矩形”。其“体积”为 $A \\cdot B \\cdot C \\cdot D$。\n\n起初，变量 $A$、$B$、$C$、$D$ 的值分别为 $A_0$、$B_0$、$C_0$、$D_0$。\n\n你有 $N$ 张“卡牌”，每张卡牌上写有一个字母 $T_i$（在 $A$、$B$、$C$、$D$ 中取一个）和一个正整数 $U_i$，表示该卡牌会使对应变量的值增加 $U_i$。每张卡牌最多只能使用一次，用完即消失。\n\n你希望通过**恰好选用 $K$ 张卡牌**（选出的卡牌可以按任意顺序使用），来最大化超矩形的体积。请编写程序，输出一组选牌及使用顺序，使体积最大化。\n\n若存在多种方式达到最大体积，任选其中一种方案输出即可。", "inputFormat": "第一行输入两个整数 $N$ 和 $K$，中间以空格隔开。  \n第二行输入初始变量值 $A_0$、$B_0$、$C_0$、$D_0$，中间以空格隔开。  \n接下来的 $N$ 行中，第 $i$ 行输入第 $i$ 张卡牌的内容，即 $T_i$ 和 $U_i$，中间以空格隔开。\n", "outputFormat": "输出 $K$ 行，依次表示选中的卡牌及其使用顺序，按与输入格式相同的方式给出。\n", "hint": "**约束条件**\n\n- 所有给定数值均为整数\n- $1 \\leq K \\leq N \\leq 200\\,000$\n- $1 \\leq A_0, B_0, C_0, D_0 \\leq 1\\,000\\,000$\n- 对所有 $1 \\leq i \\leq N$，$T_i \\in \\{A, B, C, D\\}$\n- 对所有 $1 \\leq i \\leq N$，$1 \\leq U_i \\leq 1\\,000\\,000$\n\n**子任务**\n\n1. （8 分）$N \\leq 10$，$A_0, B_0, C_0, D_0 \\leq 10$，且所有 $U_i \\leq 10$  \n2. （6 分）$B_0 = C_0 = D_0 = 1$，所有 $T_i = A$  \n3. （15 分）$N \\leq 300$，$A_0, B_0, C_0, D_0 \\leq 100$，所有 $U_i \\leq 100$  \n4. （21 分）所有 $U_i = 1$  \n5. （20 分）$D_0 = 1$，所有 $T_i \\in \\{A, B, C\\}$，所有 $U_i \\leq 10$  \n6. （30 分）无附加约束条件", "locale": "zh-CN"}}}
{"pid": "P12713", "type": "P", "difficulty": 4, "samples": [["2\nababca\ncbabba\nbaa\naaabbbccc\ncaacbbc\nccc", "1\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "KOI（韩国）"], "title": "[KOI 2021 Round 1] 公共子序列扩展", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "对一个序列来说，删除其中的若干个元素（可能为 0 个）后所得到的新序列被称为它的“子序列”。例如，字符串 `aab` 是 $X =$ `ababca` 的子序列，但不是 $Y =$ `cbabba` 的子序列。\n\n若两个序列中都包含某个子序列 $W$，则 $W$ 称为这两个序列的“公共子序列”。例如，在上述的 $X$ 和 $Y$ 中，`baa` 是它们的公共子序列，但 `aab` 不是。\n\n现在，给定两个字符串 $X$ 和 $Y$，以及它们的一个公共子序列 $W$，我们想判断 $W$ 是否**可以扩展**。定义如下：\n\n- 若可以在 $W$ 的某个位置插入一个字符，使其仍然为 $X$ 和 $Y$ 的公共子序列，则称 $W$ 是“可扩展”的；\n- 否则，称其为“不可扩展”的。\n\n例如，若 $W =$ `baa`，可以扩展为 `baba`，所以 $W$ 是可扩展的。但若 $W =$ `ca`，则无法再扩展。\n\n请编写程序判断给定的 $W$ 是否可扩展。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例数量。  \n接下来的 $3 \\times T$ 行中，每 3 行描述一个测试用例，依次为：  \n第 1 行：字符串 $X$  \n第 2 行：字符串 $Y$  \n第 3 行：字符串 $W$", "outputFormat": "对每个测试用例，输出一行：若 $W$ 可扩展，输出 `1`；否则输出 `0`。\n", "hint": "**约束条件**\n\n- 每组输入中包含 1 到 100 个测试用例\n- 所有测试用例中，$|X|$ 的总长度不超过 200\\,000，$|Y|$ 的总长度也不超过 200\\,000\n- $W$ 是 $X$ 和 $Y$ 的公共子序列\n- 所有序列仅包含小写英文字母\n\n**子任务**\n\n1.（14 分）$|W| = 1$  \n2.（17 分）$|X|$ 和 $|Y|$ 的总长度均不超过 300  \n3.（25 分）$|X|$ 和 $|Y|$ 的总长度均不超过 20\\,000  \n4.（44 分）无附加约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 1] 公共子序列扩展", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "对一个序列来说，删除其中的若干个元素（可能为 0 个）后所得到的新序列被称为它的“子序列”。例如，字符串 `aab` 是 $X =$ `ababca` 的子序列，但不是 $Y =$ `cbabba` 的子序列。\n\n若两个序列中都包含某个子序列 $W$，则 $W$ 称为这两个序列的“公共子序列”。例如，在上述的 $X$ 和 $Y$ 中，`baa` 是它们的公共子序列，但 `aab` 不是。\n\n现在，给定两个字符串 $X$ 和 $Y$，以及它们的一个公共子序列 $W$，我们想判断 $W$ 是否**可以扩展**。定义如下：\n\n- 若可以在 $W$ 的某个位置插入一个字符，使其仍然为 $X$ 和 $Y$ 的公共子序列，则称 $W$ 是“可扩展”的；\n- 否则，称其为“不可扩展”的。\n\n例如，若 $W =$ `baa`，可以扩展为 `baba`，所以 $W$ 是可扩展的。但若 $W =$ `ca`，则无法再扩展。\n\n请编写程序判断给定的 $W$ 是否可扩展。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例数量。  \n接下来的 $3 \\times T$ 行中，每 3 行描述一个测试用例，依次为：  \n第 1 行：字符串 $X$  \n第 2 行：字符串 $Y$  \n第 3 行：字符串 $W$", "outputFormat": "对每个测试用例，输出一行：若 $W$ 可扩展，输出 `1`；否则输出 `0`。\n", "hint": "**约束条件**\n\n- 每组输入中包含 1 到 100 个测试用例\n- 所有测试用例中，$|X|$ 的总长度不超过 200\\,000，$|Y|$ 的总长度也不超过 200\\,000\n- $W$ 是 $X$ 和 $Y$ 的公共子序列\n- 所有序列仅包含小写英文字母\n\n**子任务**\n\n1.（14 分）$|W| = 1$  \n2.（17 分）$|X|$ 和 $|Y|$ 的总长度均不超过 300  \n3.（25 分）$|X|$ 和 $|Y|$ 的总长度均不超过 20\\,000  \n4.（44 分）无附加约束条件", "locale": "zh-CN"}}}
{"pid": "P12714", "type": "P", "difficulty": 1, "samples": [["3\ntakahashi\naoki\nsnuke", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "O2优化", "枚举"], "title": "[Algo Beat Contest 002 A] A to Z", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n| $\\text{A - A to Z}$ | $100$ |  [LostKeyToReach](https://www.luogu.com.cn/user/764666)    |  [LostKeyToReach](https://www.luogu.com.cn/user/764666)    | [LostKeyToReach](https://www.luogu.com.cn/user/764666)     |    [zhoumurui](https://www.luogu.com.cn/user/305928)      |  [Link](https://www.luogu.com.cn/article/1gh0j55t) by  [zhoumurui](https://www.luogu.com.cn/user/305928)   |\n\n\n71 for ever", "description": "你有 $n$ 个字符串，请求出满足字符串里**所有字符互不相同**的字符串数量。\n\n**字符串中只含有小写字母。**", "inputFormat": "第一行输入一个整数 $n$。\n\n接下来 $n$ 行每行输入一个字符串。", "outputFormat": "输出一行，表示满足条件的字符串数量。", "hint": "**【数据范围】**\n\n- $1 \\le n \\le 100$。\n- 每个字符串的长度不超过 $100$。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 A] A to Z", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n| $\\text{A - A to Z}$ | $100$ |  [LostKeyToReach](https://www.luogu.com.cn/user/764666)    |  [LostKeyToReach](https://www.luogu.com.cn/user/764666)    | [LostKeyToReach](https://www.luogu.com.cn/user/764666)     |    [zhoumurui](https://www.luogu.com.cn/user/305928)      |  [Link](https://www.luogu.com.cn/article/1gh0j55t) by  [zhoumurui](https://www.luogu.com.cn/user/305928)   |\n\n\n71 for ever", "description": "你有 $n$ 个字符串，请求出满足字符串里**所有字符互不相同**的字符串数量。\n\n**字符串中只含有小写字母。**", "inputFormat": "第一行输入一个整数 $n$。\n\n接下来 $n$ 行每行输入一个字符串。", "outputFormat": "输出一行，表示满足条件的字符串数量。", "hint": "**【数据范围】**\n\n- $1 \\le n \\le 100$。\n- 每个字符串的长度不超过 $100$。 ", "locale": "zh-CN"}}}
{"pid": "P12715", "type": "P", "difficulty": 2, "samples": [["4 7\n2 1 4 3\n2 1\n1 1\n3 3\n2 1\n1 1\n1 4\n3 4\n", "2\n4\n1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化"], "title": "[Algo Beat Contest 002 B] Bicycle Competition", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|   $\\text{B - Bicycle Competition}$    | $200$ |   [AFO_orchardist](https://www.luogu.com.cn/user/347582)   |  [zhoumurui](https://www.luogu.com.cn/user/305928)    |  [zhoumurui](https://www.luogu.com.cn/user/305928)    |   [DHeasy](https://www.luogu.com.cn/user/528325)   | [Link](https://www.luogu.com.cn/article/bm2d69jz) by [zhoumurui](https://www.luogu.com.cn/user/305928) |\n\n南极洲企鹅语学校的自行车大赛要开始了！", "description": "比赛共有 $N$ 位企鹅参与，每位选手当前的排名为 $A_i$。比赛中有 $Q$ 个事件发生：\n\n`1 x`：编号为 $x$ 的选手超过了前面一位选手。如果该选手此时已经是第一名，则忽略该操作。\n\n`2 x`：询问排名为 $x$ 的选手编号。\n\n`3 x`：询问编号为 $x$ 的选手排名。", "inputFormat": "第一行输入两个整数 $N,Q$，表示选手数和事件数。\n\n第二行输入 $N$ 个整数，第 $i$ 个整数表示 $A_i$，表示最开始第 $i$ 名选手的排名。\n\n然后有 $Q$ 行，每行输入两个整数 $op,x$，如题面描述。", "outputFormat": "对于 $op=2$ 或 $3$ 的询问，每行输出一个整数，表示答案。", "hint": "**【数据范围】**\n\n- $1\\le N,Q\\le 2 \\times 10^5$。\n- $A_i$ 是 $1$ 到 $N$ 的一个排列。\n- 对于每个操作，$op\\in\\{1,2,3\\},1\\le x \\le N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 B] Bicycle Competition", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|   $\\text{B - Bicycle Competition}$    | $200$ |   [AFO_orchardist](https://www.luogu.com.cn/user/347582)   |  [zhoumurui](https://www.luogu.com.cn/user/305928)    |  [zhoumurui](https://www.luogu.com.cn/user/305928)    |   [DHeasy](https://www.luogu.com.cn/user/528325)   | [Link](https://www.luogu.com.cn/article/bm2d69jz) by [zhoumurui](https://www.luogu.com.cn/user/305928) |\n\n南极洲企鹅语学校的自行车大赛要开始了！", "description": "比赛共有 $N$ 位企鹅参与，每位选手当前的排名为 $A_i$。比赛中有 $Q$ 个事件发生：\n\n`1 x`：编号为 $x$ 的选手超过了前面一位选手。如果该选手此时已经是第一名，则忽略该操作。\n\n`2 x`：询问排名为 $x$ 的选手编号。\n\n`3 x`：询问编号为 $x$ 的选手排名。", "inputFormat": "第一行输入两个整数 $N,Q$，表示选手数和事件数。\n\n第二行输入 $N$ 个整数，第 $i$ 个整数表示 $A_i$，表示最开始第 $i$ 名选手的排名。\n\n然后有 $Q$ 行，每行输入两个整数 $op,x$，如题面描述。", "outputFormat": "对于 $op=2$ 或 $3$ 的询问，每行输出一个整数，表示答案。", "hint": "**【数据范围】**\n\n- $1\\le N,Q\\le 2 \\times 10^5$。\n- $A_i$ 是 $1$ 到 $N$ 的一个排列。\n- 对于每个操作，$op\\in\\{1,2,3\\},1\\le x \\le N$。", "locale": "zh-CN"}}}
{"pid": "P12716", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 4 5", "1\n1\n1\n3\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "前缀和", "差分"], "title": "[Algo Beat Contest 002 C] Counting Square Numbers", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|     $\\text{C - Counting Square Numbers}$      | $300$ | [wenqinghua1001](https://www.luogu.com.cn/user/976198) | [wenqinghua1001](https://www.luogu.com.cn/user/976198) | [joe_zxq](https://www.luogu.com.cn/user/623577) | [joe_zxq](https://www.luogu.com.cn/user/623577) |     [Link](https://www.luogu.com.cn/article/75je5m51) by [joe_zxq](https://www.luogu.com.cn/user/623577)     |", "description": "wtr1 和 wqh 是一对好朋友。\n\nwqh 给了 wtr1 一个长度为 $n$ 的数组 $A$。对于 $i=1,2,\\dots,n$，需要 wtr1 给出包含了位置 $i$ 且区间和为完全平方数的子数组个数。由于最近 wtr1 很忙，请聪明的你帮帮他吧！\n\n若一个数是一个整数的平方，则称这个数是**完全平方数**。\n\n原数组中某段下标连续的元素按原顺序构成的数组称为**子数组**。", "inputFormat": "第一行输入一个正整数 $n$，表示数组 $A$ 的长度。\n\n第二行输入 $n$ 个整数 $A_1,\\dots,A_n$，表示 $A$ 中的元素。", "outputFormat": "输出 $n$ 行，每行包含一个非负整数，表示符合条件的区间数。", "hint": "**【样例解释 #1】**\n\n包含位置 $2$ 的区间和为完全平方数是 $2+3+4=9$，只有 $1$ 个。\n\n包含位置 $4$ 的区间和为完全平方数是 $2+3+4=9$，$4+5=9$ 以及 $4$ 本身，共 $3$ 个。\n\n**【数据范围】**\n\n- $1 \\le n \\le 5 \\times 10^3$。\n- $0 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 C] Counting Square Numbers", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|     $\\text{C - Counting Square Numbers}$      | $300$ | [wenqinghua1001](https://www.luogu.com.cn/user/976198) | [wenqinghua1001](https://www.luogu.com.cn/user/976198) | [joe_zxq](https://www.luogu.com.cn/user/623577) | [joe_zxq](https://www.luogu.com.cn/user/623577) |     [Link](https://www.luogu.com.cn/article/75je5m51) by [joe_zxq](https://www.luogu.com.cn/user/623577)     |", "description": "wtr1 和 wqh 是一对好朋友。\n\nwqh 给了 wtr1 一个长度为 $n$ 的数组 $A$。对于 $i=1,2,\\dots,n$，需要 wtr1 给出包含了位置 $i$ 且区间和为完全平方数的子数组个数。由于最近 wtr1 很忙，请聪明的你帮帮他吧！\n\n若一个数是一个整数的平方，则称这个数是**完全平方数**。\n\n原数组中某段下标连续的元素按原顺序构成的数组称为**子数组**。", "inputFormat": "第一行输入一个正整数 $n$，表示数组 $A$ 的长度。\n\n第二行输入 $n$ 个整数 $A_1,\\dots,A_n$，表示 $A$ 中的元素。", "outputFormat": "输出 $n$ 行，每行包含一个非负整数，表示符合条件的区间数。", "hint": "**【样例解释 #1】**\n\n包含位置 $2$ 的区间和为完全平方数是 $2+3+4=9$，只有 $1$ 个。\n\n包含位置 $4$ 的区间和为完全平方数是 $2+3+4=9$，$4+5=9$ 以及 $4$ 本身，共 $3$ 个。\n\n**【数据范围】**\n\n- $1 \\le n \\le 5 \\times 10^3$。\n- $0 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12717", "type": "P", "difficulty": 3, "samples": [["2", "2.06679179"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "Special Judge", "O2优化"], "title": "[Algo Beat Contest 002 D] Distance of Trip", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|    $\\text{D - Distance of Trip}$     | $400$ | [zhoumurui](https://www.luogu.com.cn/user/305928) | [zhoumurui](https://www.luogu.com.cn/user/305928) | [joe_zxq](https://www.luogu.com.cn/user/623577) | [joe_zxq](https://www.luogu.com.cn/user/623577) |     [Link](https://www.luogu.com.cn/article/2ezk7trk) by [zhoumurui](https://www.luogu.com.cn/user/305928)   |\n\n\n[![image.png](https://pic1.imgdb.cn/item/67a9f552d0e0a243d4fdff9c.png)](https://pic1.imgdb.cn/item/67a9f552d0e0a243d4fdff9c.png)\n", "description": "在和小伙伴们一起玩耍了几天后，Cirno 开始觉得没日没夜地玩冻青蛙的游戏对她而言已经有些无聊了。她悄无声息地离开了雾之湖，她要出去走走。\n\n第二天早上，Cirno 发现自己身处于草木繁茂的森林中，她不知道她是怎么走到这个地方来的，但好在她还随身携带了指南针。她决定一直往一个方向走，这样一定能够离开森林。\n\n接下来的 $T$ 秒，每一秒 Cirno 会从以下 $3$ 个选项中**等概率随机**选择一项：\n\n- 向东移动 $1$ 米。\n- 向南移动 $1$ 米。\n- 先向东移动 $1$ 米，然后向南移动 $1$ 米。\n\n现在告诉你 $T$，请你计算 Cirno 在 $T$ 秒内的位移大小的期望值。\n\n> Cirno 一段时间内的位移大小定义为这段时间结束前 Cirno 的位置和结束后 Cirno 的位置的直线距离。", "inputFormat": "输入一行一个整数 $T$，表示 Cirno 移动的时间。", "outputFormat": "输出一行一个实数，表示 $T$ 秒内移动的距离的期望值。\n\n本题使用 SPJ，你的代码获得一个测试点的分数当且仅当你的代码对于该测试点的输入数据输出的答案与该测试点的输出数据的差不大于 $10^{-6}$。", "hint": "**【样例解释 #1】**\n\n有以下 $9$ 种可能：\n\n- Cirno 在第一秒向东移动了 $1$ 米，在第二秒向东移动了 $1$ 米。Cirno 移动的距离是 $2$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米，在第二秒向南移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt2$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米，在第二秒向东移动了 $1$ 米又向南移动 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向南移动了 $1$ 米，在第二秒向东移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt2$ 米。\n- Cirno 在第一秒向南移动了 $1$ 米，在第二秒向南移动了 $1$ 米。Cirno 移动的距离是 $2$ 米。\n- Cirno 在第一秒向南移动了 $1$ 米，在第二秒向东移动了 $1$ 米又向南移动 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米又向南移动 $1$ 米，在第二秒向东移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米又向南移动 $1$ 米，在第二秒向南移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米又向南移动 $1$ 米，在第二秒向东移动了 $1$ 米又向南移动 $1$ 米。Cirno 移动的距离是 $2\\sqrt2$ 米。\n\n以上 $9$ 种可能发生的概率均为 $1/9$，因此 Cirno 移动的距离的期望值为 $\\displaystyle \\frac{1}{9} \\times (2+\\sqrt2+\\sqrt5+\\sqrt2+2+\\sqrt5+\\sqrt5+\\sqrt5+2\\sqrt2) =  \\frac{4+4\\sqrt2+4\\sqrt5}{9}$，约等于 $2.06679179$。\n\n**【数据范围】**\n\n- $1 \\le T \\le 200$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 D] Distance of Trip", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|    $\\text{D - Distance of Trip}$     | $400$ | [zhoumurui](https://www.luogu.com.cn/user/305928) | [zhoumurui](https://www.luogu.com.cn/user/305928) | [joe_zxq](https://www.luogu.com.cn/user/623577) | [joe_zxq](https://www.luogu.com.cn/user/623577) |     [Link](https://www.luogu.com.cn/article/2ezk7trk) by [zhoumurui](https://www.luogu.com.cn/user/305928)   |\n\n\n[![image.png](https://pic1.imgdb.cn/item/67a9f552d0e0a243d4fdff9c.png)](https://pic1.imgdb.cn/item/67a9f552d0e0a243d4fdff9c.png)\n", "description": "在和小伙伴们一起玩耍了几天后，Cirno 开始觉得没日没夜地玩冻青蛙的游戏对她而言已经有些无聊了。她悄无声息地离开了雾之湖，她要出去走走。\n\n第二天早上，Cirno 发现自己身处于草木繁茂的森林中，她不知道她是怎么走到这个地方来的，但好在她还随身携带了指南针。她决定一直往一个方向走，这样一定能够离开森林。\n\n接下来的 $T$ 秒，每一秒 Cirno 会从以下 $3$ 个选项中**等概率随机**选择一项：\n\n- 向东移动 $1$ 米。\n- 向南移动 $1$ 米。\n- 先向东移动 $1$ 米，然后向南移动 $1$ 米。\n\n现在告诉你 $T$，请你计算 Cirno 在 $T$ 秒内的位移大小的期望值。\n\n> Cirno 一段时间内的位移大小定义为这段时间结束前 Cirno 的位置和结束后 Cirno 的位置的直线距离。", "inputFormat": "输入一行一个整数 $T$，表示 Cirno 移动的时间。", "outputFormat": "输出一行一个实数，表示 $T$ 秒内移动的距离的期望值。\n\n本题使用 SPJ，你的代码获得一个测试点的分数当且仅当你的代码对于该测试点的输入数据输出的答案与该测试点的输出数据的差不大于 $10^{-6}$。", "hint": "**【样例解释 #1】**\n\n有以下 $9$ 种可能：\n\n- Cirno 在第一秒向东移动了 $1$ 米，在第二秒向东移动了 $1$ 米。Cirno 移动的距离是 $2$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米，在第二秒向南移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt2$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米，在第二秒向东移动了 $1$ 米又向南移动 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向南移动了 $1$ 米，在第二秒向东移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt2$ 米。\n- Cirno 在第一秒向南移动了 $1$ 米，在第二秒向南移动了 $1$ 米。Cirno 移动的距离是 $2$ 米。\n- Cirno 在第一秒向南移动了 $1$ 米，在第二秒向东移动了 $1$ 米又向南移动 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米又向南移动 $1$ 米，在第二秒向东移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米又向南移动 $1$ 米，在第二秒向南移动了 $1$ 米。Cirno 移动的距离是 $\\sqrt5$ 米。\n- Cirno 在第一秒向东移动了 $1$ 米又向南移动 $1$ 米，在第二秒向东移动了 $1$ 米又向南移动 $1$ 米。Cirno 移动的距离是 $2\\sqrt2$ 米。\n\n以上 $9$ 种可能发生的概率均为 $1/9$，因此 Cirno 移动的距离的期望值为 $\\displaystyle \\frac{1}{9} \\times (2+\\sqrt2+\\sqrt5+\\sqrt2+2+\\sqrt5+\\sqrt5+\\sqrt5+2\\sqrt2) =  \\frac{4+4\\sqrt2+4\\sqrt5}{9}$，约等于 $2.06679179$。\n\n**【数据范围】**\n\n- $1 \\le T \\le 200$。\n\n", "locale": "zh-CN"}}}
{"pid": "P12718", "type": "P", "difficulty": 5, "samples": [["4 4 2 2\n3\n1 2 3\n3\n4 5 6\n2\n7 8\n2\n9 10", "42"], ["4 4 2 -2\n4\n-1 2 -3 4\n3\n-5 6 -7\n2\n-8 9\n1\n100", "115"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "[Algo Beat Contest 002 E] Excellent Game", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n| $\\text{E - Excellent Game}$  | $500$ | [AFO_orchardist](https://www.luogu.com.cn/user/347582) | [AFO_orchardist](https://www.luogu.com.cn/user/347582) | [AFO_orchardist](https://www.luogu.com.cn/user/347582) | [LostKeyToReach](https://www.luogu.com.cn/user/764666)     |     [Link](https://www.luogu.com.cn/article/b8m53vtc) by [AFO_orchardist](https://www.luogu.com.cn/user/347582)       |\n\n戴戴刘传。", "description": "小 E 在玩一个极妙的数组游戏。游戏中共有 $N$ 个数组，每个数组长度为 $L_i$，元素分别为 $\\{A_{i,1},A_{i,2},A_{i,3},\\dots,A_{i,L_i}\\}$。\n\n游戏共有 $Q$ 轮，每轮需**恰好**进行一次操作。定义一次操作为，将某一个数组中的所有数增加 $K$。这里，$K$ 可能是负数。\n\n小 E 想在游戏结束后，所有数组合起来 $\\sum_{i=1}^n L_i$ 个元素中前 $M$ 大的元素之和尽可能大。小 E 不会玩这个游戏，所以让聪明的你来帮他求出这个最大值。\n\n**前 $M$ 大的数**表示将这些数从大到小排序后的前 $M$ 位。 ", "inputFormat": "第一行输入四个整数 $N,M,Q,K$，含义见题目描述。\n\n接下来，对于满足 $1 \\le i \\le N$ 的每一个 $i$，第 $2i$ 行输入一个整数 $L_i$，第 $2i+1$ 行输入 $L_i$ 个整数，描述第 $i$ 个数组。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n以下是一种可行的最优策略：\n\n第一次操作在第 $3$ 个数组上，第二次操作在第 $4$ 个数组上，这样最大的 $4$ 个数之和为 $12+11+10+9=42$。  \n\n可以证明，没有比此更优的策略，使得答案大于 $42$。\n\n\n**【数据范围】**\n\n- $1 \\le N,Q \\le 2 \\times 10^5$。\n- $1 \\le M \\le \\sum_{i=1}^n L_i \\le 2 \\times 10^5$。\n- $-10^7 \\le K \\le 10^7$。\n- $-10^{12} \\le A_{i,j} \\le  10^{12}$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 E] Excellent Game", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n| $\\text{E - Excellent Game}$  | $500$ | [AFO_orchardist](https://www.luogu.com.cn/user/347582) | [AFO_orchardist](https://www.luogu.com.cn/user/347582) | [AFO_orchardist](https://www.luogu.com.cn/user/347582) | [LostKeyToReach](https://www.luogu.com.cn/user/764666)     |     [Link](https://www.luogu.com.cn/article/b8m53vtc) by [AFO_orchardist](https://www.luogu.com.cn/user/347582)       |\n\n戴戴刘传。", "description": "小 E 在玩一个极妙的数组游戏。游戏中共有 $N$ 个数组，每个数组长度为 $L_i$，元素分别为 $\\{A_{i,1},A_{i,2},A_{i,3},\\dots,A_{i,L_i}\\}$。\n\n游戏共有 $Q$ 轮，每轮需**恰好**进行一次操作。定义一次操作为，将某一个数组中的所有数增加 $K$。这里，$K$ 可能是负数。\n\n小 E 想在游戏结束后，所有数组合起来 $\\sum_{i=1}^n L_i$ 个元素中前 $M$ 大的元素之和尽可能大。小 E 不会玩这个游戏，所以让聪明的你来帮他求出这个最大值。\n\n**前 $M$ 大的数**表示将这些数从大到小排序后的前 $M$ 位。 ", "inputFormat": "第一行输入四个整数 $N,M,Q,K$，含义见题目描述。\n\n接下来，对于满足 $1 \\le i \\le N$ 的每一个 $i$，第 $2i$ 行输入一个整数 $L_i$，第 $2i+1$ 行输入 $L_i$ 个整数，描述第 $i$ 个数组。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n以下是一种可行的最优策略：\n\n第一次操作在第 $3$ 个数组上，第二次操作在第 $4$ 个数组上，这样最大的 $4$ 个数之和为 $12+11+10+9=42$。  \n\n可以证明，没有比此更优的策略，使得答案大于 $42$。\n\n\n**【数据范围】**\n\n- $1 \\le N,Q \\le 2 \\times 10^5$。\n- $1 \\le M \\le \\sum_{i=1}^n L_i \\le 2 \\times 10^5$。\n- $-10^7 \\le K \\le 10^7$。\n- $-10^{12} \\le A_{i,j} \\le  10^{12}$。\n\n", "locale": "zh-CN"}}}
{"pid": "P12719", "type": "P", "difficulty": 5, "samples": [["3 2 4 20\n1 2 3\n2 3 1\n1 3 2", "1"], ["10 11 1256 42668\n572 678 14\n517 17 20\n886 680 24\n237 944 12\n870 321 2\n598 273 13\n824 228 20\n73 824 6\n910 891 10\n953 502 9", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化"], "title": "[Algo Beat Contest 002 F] Famous Basketball Games", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|  $\\text{F - Famous Basketball Games}$  | $550$ | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [LostKeyToReach](https://www.luogu.com.cn/user/764666)  | [Link](https://www.luogu.com.cn/article/k8hp1mrf) by [篮网总冠军](https://www.luogu.com.cn/user/547238)\n\n\n小 A 可喜欢打街球了......\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q00do8x8.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n\nP.S. 本题出题人是妥妥的篮网球迷！", "description": "小 A 收到了 $n$ 场路人王比赛主办方的邀请，他将会**从家出发**去打比赛。打第 $i$ 场比赛需要 $a_i$ 分钟，在第 $s$ 分钟到达第 $i$ 场比赛场地需要等待 $c_i \\times s +b_i$ 分钟才能打比赛。**到达后必须立刻开始等待，等待结束后必须立刻开始比赛**。从小 A 的家中到任何一场比赛的场地和从任何一场比赛的场地到另外一场比赛的场地时间相同，都是 $x$ 分钟。\n\n小 A 因为打比赛会消耗大量的体力，所以带上了**一份**饭。除非他不出去比赛，否则他必须选择**任意一场自己要打的比赛**并在**这场比赛结束后立即吃饭**，吃饭需要 $d$ 分钟。\n\n小 A 的妈妈希望小 A 在出门后的 $T+0.01$ 分钟前**回到家**。问小 A 最多能参加几场比赛？\n\n**注意：无论是吃饭，等待，比赛或行走都必须连续进行，不能分成两段。同时只能进行一项行为，比如不能在行走时吃饭。**\n\n**显然，同一场比赛不能打多次。**", "inputFormat": "第一行输入四个整数 $n,x,d,T$，含义见题目描述。\n\n然后有 $n$ 行，每行输入三个整数  $a_i,b_i,c_i$，含义见题目描述。\n", "outputFormat": "输出一行一个整数，代表最多能打的比赛的个数。", "hint": "**【样例解释 #1】**\n\n对于第一组样例，你可以先出发去第 $2$ 场比赛，在比赛后吃饭，然后回家，总时间为 $15$ 分钟，且不能再打别的比赛。\n\n**【数据范围】**\n\n- $1 \\le n \\le 2 \\times 10^5$。\n- $1 \\le a_i,b_i,T \\le 10^9$，$0 \\le x,d,c_i \\le 10^9$。\n\n### 请仔细阅读本题题面。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 F] Famous Basketball Games", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|  $\\text{F - Famous Basketball Games}$  | $550$ | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [LostKeyToReach](https://www.luogu.com.cn/user/764666)  | [Link](https://www.luogu.com.cn/article/k8hp1mrf) by [篮网总冠军](https://www.luogu.com.cn/user/547238)\n\n\n小 A 可喜欢打街球了......\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q00do8x8.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n\nP.S. 本题出题人是妥妥的篮网球迷！", "description": "小 A 收到了 $n$ 场路人王比赛主办方的邀请，他将会**从家出发**去打比赛。打第 $i$ 场比赛需要 $a_i$ 分钟，在第 $s$ 分钟到达第 $i$ 场比赛场地需要等待 $c_i \\times s +b_i$ 分钟才能打比赛。**到达后必须立刻开始等待，等待结束后必须立刻开始比赛**。从小 A 的家中到任何一场比赛的场地和从任何一场比赛的场地到另外一场比赛的场地时间相同，都是 $x$ 分钟。\n\n小 A 因为打比赛会消耗大量的体力，所以带上了**一份**饭。除非他不出去比赛，否则他必须选择**任意一场自己要打的比赛**并在**这场比赛结束后立即吃饭**，吃饭需要 $d$ 分钟。\n\n小 A 的妈妈希望小 A 在出门后的 $T+0.01$ 分钟前**回到家**。问小 A 最多能参加几场比赛？\n\n**注意：无论是吃饭，等待，比赛或行走都必须连续进行，不能分成两段。同时只能进行一项行为，比如不能在行走时吃饭。**\n\n**显然，同一场比赛不能打多次。**", "inputFormat": "第一行输入四个整数 $n,x,d,T$，含义见题目描述。\n\n然后有 $n$ 行，每行输入三个整数  $a_i,b_i,c_i$，含义见题目描述。\n", "outputFormat": "输出一行一个整数，代表最多能打的比赛的个数。", "hint": "**【样例解释 #1】**\n\n对于第一组样例，你可以先出发去第 $2$ 场比赛，在比赛后吃饭，然后回家，总时间为 $15$ 分钟，且不能再打别的比赛。\n\n**【数据范围】**\n\n- $1 \\le n \\le 2 \\times 10^5$。\n- $1 \\le a_i,b_i,T \\le 10^9$，$0 \\le x,d,c_i \\le 10^9$。\n\n### 请仔细阅读本题题面。", "locale": "zh-CN"}}}
{"pid": "P12720", "type": "P", "difficulty": 5, "samples": [["5 4\n0 1 1 0 1\n1 4\n2 3\n1 5\n2 4", "11\n9\n15\n9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "分块"], "title": "[Algo Beat Contest 002 G] Game Time", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|  $\\text{G - Game Time}$  | $600$ | [DHeasy](https://www.luogu.com.cn/user/528325) | [DHeasy](https://www.luogu.com.cn/user/528325) | [DHeasy](https://www.luogu.com.cn/user/528325) | [zhoumurui](https://www.luogu.com.cn/user/305928) | [Link](https://www.luogu.com.cn/article/36j9d1sb) by [DHeasy](https://www.luogu.com.cn/user/528325)|", "description": "小 D 和小 H 有一个长度为 $n$ 的数列 $\\{a_1,a_2,\\cdots a_n\\}$（$a_i\\in\\{0,1\\}$），他们想用一个子数组 $\\{a_l,a_{l+1},\\cdots a_r\\}$ 进行游戏。\n\n对于一个在子数组 $\\{a_l,a_{l+1},\\cdots a_r\\}$ 上进行的游戏，过程如下：小 D 先手，两人会依次对所有 $i$ 满足 $l\\le i\\le r$，决定是否保留 $a_i$。**例如小 D 决定是否保留 $a_l$，小 H 决定是否保留 $a_{l+1}$，小 D 决定是否保留 $a_{l+2}$，以此类推**。最后，两人计算所有保留下来的 $a_i$ 的和，如果为偶数，则小 D 赢，如果为奇数，则小 H 赢。\n\n现在小 D 和小 H 对于数列 $\\{a_1,a_2,\\cdots a_n\\}$ 所有子数组 $\\{a_l,a_{l+1},\\cdots a_r\\}$ （$1\\le l\\le r\\le n$）进行游戏，小 D 有个问题，如果两人足够聪明，自己能赢多少次。\n\n为了不让这个游戏变得枯燥，两人会对这个数列进行 $m$ 次区间反转。具体的，如果对区间 $[l,r]$ 进行反转操作，则对于所有满足 $l\\le i\\le r$ 的 $i$，如果 $a_i=1$，则将 $a_i$ 改为 $0$，否则如果 $a_i=0$，则将 $a_i$ 改为 $1$。\n\n请你在每次修改后回答小 D 的问题。", "inputFormat": "第一行输入两个正整数 $n,m$ 表示数列长度和修改次数。\n\n第二行输入 $n$ 个只包含 $0,1$ 的整数表示 $a_1,a_2,\\cdots a_n$。\n\n接下来 $m$ 行，每行输入两个整数 $l,r$，表示对区间 $[l,r]$ 做一次反转操作。", "outputFormat": "输出共 $m$ 行，对每次修改后单独输出一行一个整数表示小 D 问题的答案。", "hint": "**【数据范围】**\n\n- $1\\le n,m\\le 2\\times 10^5$。\n- $1\\le l\\le r\\le n$。\n- $a_i\\in\\{0,1\\}$（$1\\le i\\le n$）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Algo Beat Contest 002 G] Game Time", "background": "| Problem | Score | Idea | Std | Data | Check | Solution |\n| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |\n|  $\\text{G - Game Time}$  | $600$ | [DHeasy](https://www.luogu.com.cn/user/528325) | [DHeasy](https://www.luogu.com.cn/user/528325) | [DHeasy](https://www.luogu.com.cn/user/528325) | [zhoumurui](https://www.luogu.com.cn/user/305928) | [Link](https://www.luogu.com.cn/article/36j9d1sb) by [DHeasy](https://www.luogu.com.cn/user/528325)|", "description": "小 D 和小 H 有一个长度为 $n$ 的数列 $\\{a_1,a_2,\\cdots a_n\\}$（$a_i\\in\\{0,1\\}$），他们想用一个子数组 $\\{a_l,a_{l+1},\\cdots a_r\\}$ 进行游戏。\n\n对于一个在子数组 $\\{a_l,a_{l+1},\\cdots a_r\\}$ 上进行的游戏，过程如下：小 D 先手，两人会依次对所有 $i$ 满足 $l\\le i\\le r$，决定是否保留 $a_i$。**例如小 D 决定是否保留 $a_l$，小 H 决定是否保留 $a_{l+1}$，小 D 决定是否保留 $a_{l+2}$，以此类推**。最后，两人计算所有保留下来的 $a_i$ 的和，如果为偶数，则小 D 赢，如果为奇数，则小 H 赢。\n\n现在小 D 和小 H 对于数列 $\\{a_1,a_2,\\cdots a_n\\}$ 所有子数组 $\\{a_l,a_{l+1},\\cdots a_r\\}$ （$1\\le l\\le r\\le n$）进行游戏，小 D 有个问题，如果两人足够聪明，自己能赢多少次。\n\n为了不让这个游戏变得枯燥，两人会对这个数列进行 $m$ 次区间反转。具体的，如果对区间 $[l,r]$ 进行反转操作，则对于所有满足 $l\\le i\\le r$ 的 $i$，如果 $a_i=1$，则将 $a_i$ 改为 $0$，否则如果 $a_i=0$，则将 $a_i$ 改为 $1$。\n\n请你在每次修改后回答小 D 的问题。", "inputFormat": "第一行输入两个正整数 $n,m$ 表示数列长度和修改次数。\n\n第二行输入 $n$ 个只包含 $0,1$ 的整数表示 $a_1,a_2,\\cdots a_n$。\n\n接下来 $m$ 行，每行输入两个整数 $l,r$，表示对区间 $[l,r]$ 做一次反转操作。", "outputFormat": "输出共 $m$ 行，对每次修改后单独输出一行一个整数表示小 D 问题的答案。", "hint": "**【数据范围】**\n\n- $1\\le n,m\\le 2\\times 10^5$。\n- $1\\le l\\le r\\le n$。\n- $a_i\\in\\{0,1\\}$（$1\\le i\\le n$）。", "locale": "zh-CN"}}}
{"pid": "P12721", "type": "P", "difficulty": 2, "samples": [["4 3\n3 3\n2 2\n1 1", "4"], ["5 3\n4 3\n2 3\n3 2", "9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 矩形面积", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定一张边长均为 $N$ 的大纸张。坐标 $(X, Y)$ 表示从纸张的最左上角 $(0, 0)$ 出发，竖直方向移动 $X$、水平方向移动 $Y$ 后到达的点。因此，纸张的最右下角坐标为 $(N, N)$。\n\n现在给出 $C$ 个点。这些点的坐标都是正整数，并依次从 1 到 $C$ 编号。多个点可能具有相同的坐标。\n\n对于编号顺序的每个点，依次进行以下操作。设当前纸张的竖直长度为 $A$，水平方向长度为 $B$，而本次处理的点坐标为 $(X, Y)$。最开始时，$A$ 和 $B$ 均等于 $N$。\n\n- 如果点位于纸张的边界或外部，即 $X \\geq A$ 或 $Y \\geq B$，那么该点将被忽略。\n- 如果点在纸张内部，则需要在通过该点的一条横向直线和一条纵向直线之间选择一条来切割纸张。横向切割时保留上方部分，丢弃下方部分；纵向切割时保留左侧部分，丢弃右侧部分。在这两种情况下，选择保留下来的矩形面积较大的方式。如果两种方式得到的剩余矩形面积相同，则选择横向切割。\n\n请考虑以下示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zc1semef.png)\n\n假设有一张竖直长度为 4、水平长度为 8 的纸张，考虑点 $(3, 6)$。图中的每个小格子面积为 1。在这种情况下，若以该点为基准进行纵向切割，则剩下竖直长度为 4、水平方向为 6 的纸张；若以该点为基准进行横向切割，则剩下竖直长度为 3、水平方向为 8 的纸张。两种纸张的面积均为 $24$，因此根据条件应选择横向切割。于是，该例中剩下的纸张为竖直长度为 3、水平方向为 8。\n\n请计算依次对所有 $C$ 个点从第 1 个到第 $C$ 个执行上述操作后，最终剩下的纸张的面积。", "inputFormat": "第一行包含两个整数 $N$ 和 $C$，中间以一个空格分隔。接下来的 $C$ 行中，每行包含两个整数 $X$ 和 $Y$，表示一个点的坐标，按顺序给出，整数之间用一个空格分隔。", "outputFormat": "输出仅一行，表示最终剩下的纸张的面积。", "hint": "**约束条件**\n\n- $1 \\leq N \\leq 10^4$\n- $1 \\leq C \\leq 10^4$\n- 所有给出的点 $(X, Y)$ 都满足 $1 \\leq X, Y \\leq N$\n\n**子任务**\n\n1. （5 分）数据为示例之一。\n2. （15 分）$C = 1$\n3. （20 分）对于每个点，若不被忽略，则保证横向切割后保留下来的上方部分面积不小于纵向切割后保留下来的左侧部分面积。\n4. （60 分）无额外约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 矩形面积", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定一张边长均为 $N$ 的大纸张。坐标 $(X, Y)$ 表示从纸张的最左上角 $(0, 0)$ 出发，竖直方向移动 $X$、水平方向移动 $Y$ 后到达的点。因此，纸张的最右下角坐标为 $(N, N)$。\n\n现在给出 $C$ 个点。这些点的坐标都是正整数，并依次从 1 到 $C$ 编号。多个点可能具有相同的坐标。\n\n对于编号顺序的每个点，依次进行以下操作。设当前纸张的竖直长度为 $A$，水平方向长度为 $B$，而本次处理的点坐标为 $(X, Y)$。最开始时，$A$ 和 $B$ 均等于 $N$。\n\n- 如果点位于纸张的边界或外部，即 $X \\geq A$ 或 $Y \\geq B$，那么该点将被忽略。\n- 如果点在纸张内部，则需要在通过该点的一条横向直线和一条纵向直线之间选择一条来切割纸张。横向切割时保留上方部分，丢弃下方部分；纵向切割时保留左侧部分，丢弃右侧部分。在这两种情况下，选择保留下来的矩形面积较大的方式。如果两种方式得到的剩余矩形面积相同，则选择横向切割。\n\n请考虑以下示例。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zc1semef.png)\n\n假设有一张竖直长度为 4、水平长度为 8 的纸张，考虑点 $(3, 6)$。图中的每个小格子面积为 1。在这种情况下，若以该点为基准进行纵向切割，则剩下竖直长度为 4、水平方向为 6 的纸张；若以该点为基准进行横向切割，则剩下竖直长度为 3、水平方向为 8 的纸张。两种纸张的面积均为 $24$，因此根据条件应选择横向切割。于是，该例中剩下的纸张为竖直长度为 3、水平方向为 8。\n\n请计算依次对所有 $C$ 个点从第 1 个到第 $C$ 个执行上述操作后，最终剩下的纸张的面积。", "inputFormat": "第一行包含两个整数 $N$ 和 $C$，中间以一个空格分隔。接下来的 $C$ 行中，每行包含两个整数 $X$ 和 $Y$，表示一个点的坐标，按顺序给出，整数之间用一个空格分隔。", "outputFormat": "输出仅一行，表示最终剩下的纸张的面积。", "hint": "**约束条件**\n\n- $1 \\leq N \\leq 10^4$\n- $1 \\leq C \\leq 10^4$\n- 所有给出的点 $(X, Y)$ 都满足 $1 \\leq X, Y \\leq N$\n\n**子任务**\n\n1. （5 分）数据为示例之一。\n2. （15 分）$C = 1$\n3. （20 分）对于每个点，若不被忽略，则保证横向切割后保留下来的上方部分面积不小于纵向切割后保留下来的左侧部分面积。\n4. （60 分）无额外约束条件。", "locale": "zh-CN"}}}
{"pid": "P12722", "type": "P", "difficulty": 3, "samples": [["3 4\n1234\n2341\n3412", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 计算机器人", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "在一个由 $M$ 行（横向）和 $N$ 列（纵向）组成的网格中，每一个格子里都有一个机器人。\n\n每一行从上到下依次编号为 1 到 $M$，每一列从左到右依次编号为 1 到 $N$。通过这些编号，我们可以使用坐标 $(行\\ 编号,\\ 列\\ 编号)$ 来表示网格中的格子位置。\n\n每个机器人都有一个或多个输入值、一个存储值和一个输出值。\n\n机器人的运作方式如下：从最左边一列的机器人开始，按列编号顺序依次运作。处于同一列中的机器人会同时运行。\n\n机器人的行为如下（表达式 $|A|$ 表示整数 $A$ 的绝对值，即当 $A \\geq 0$ 时 $|A| = A$，当 $A < 0$ 时 $|A| = -A$）：\n\n- 最左边一列的机器人，其输入值仅为一个 $0$。\n- 坐标为 $(i, j)$ 的机器人的输入值，是所有满足 $|i - a| \\leq j - b$ 且 $b < j$ 的坐标 $(a, b)$ 的机器人们的输出值。\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/dzkat7m1.png)\n- 每个机器人将其所有输入值中的最大值，作为自己的存储值。\n- 每个机器人将自己的存储值加上自己的权重 $D_{i,j}$，并将所得值作为其输出值。\n\n请编写一个程序，读取机器人的权重信息，计算所有机器人的存储值中的最大值（即最大存储值）。", "inputFormat": "第一行包含两个整数 $M$ 和 $N$，中间用一个空格分隔。\n\n接下来的 $M$ 行，每行包含一个长度为 $N$ 的字符串，表示对应行的每个机器人的权重。每个字符为一个数字，表示该格子中机器人的权重 $D_{i,j}$。\n", "outputFormat": "输出一行，即所有机器人存储值中的最大值。\n", "hint": "**约束条件**\n\n- $1 \\leq M \\leq 2000$\n- $1 \\leq N \\leq 2000$\n- 对于所有满足 $1 \\leq i \\leq M$ 且 $1 \\leq j \\leq N$ 的 $(i,j)$，都有 $1 \\leq D_{i,j} \\leq 9$\n\n**子任务**\n\n1. （3 分）$N = 1$\n2. （8 分）$N = 2$\n3. （9 分）$M = 1$\n4. （21 分）$M \\leq 100$ 且 $N \\leq 100$\n5. （59 分）无额外约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 计算机器人", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "在一个由 $M$ 行（横向）和 $N$ 列（纵向）组成的网格中，每一个格子里都有一个机器人。\n\n每一行从上到下依次编号为 1 到 $M$，每一列从左到右依次编号为 1 到 $N$。通过这些编号，我们可以使用坐标 $(行\\ 编号,\\ 列\\ 编号)$ 来表示网格中的格子位置。\n\n每个机器人都有一个或多个输入值、一个存储值和一个输出值。\n\n机器人的运作方式如下：从最左边一列的机器人开始，按列编号顺序依次运作。处于同一列中的机器人会同时运行。\n\n机器人的行为如下（表达式 $|A|$ 表示整数 $A$ 的绝对值，即当 $A \\geq 0$ 时 $|A| = A$，当 $A < 0$ 时 $|A| = -A$）：\n\n- 最左边一列的机器人，其输入值仅为一个 $0$。\n- 坐标为 $(i, j)$ 的机器人的输入值，是所有满足 $|i - a| \\leq j - b$ 且 $b < j$ 的坐标 $(a, b)$ 的机器人们的输出值。\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/dzkat7m1.png)\n- 每个机器人将其所有输入值中的最大值，作为自己的存储值。\n- 每个机器人将自己的存储值加上自己的权重 $D_{i,j}$，并将所得值作为其输出值。\n\n请编写一个程序，读取机器人的权重信息，计算所有机器人的存储值中的最大值（即最大存储值）。", "inputFormat": "第一行包含两个整数 $M$ 和 $N$，中间用一个空格分隔。\n\n接下来的 $M$ 行，每行包含一个长度为 $N$ 的字符串，表示对应行的每个机器人的权重。每个字符为一个数字，表示该格子中机器人的权重 $D_{i,j}$。\n", "outputFormat": "输出一行，即所有机器人存储值中的最大值。\n", "hint": "**约束条件**\n\n- $1 \\leq M \\leq 2000$\n- $1 \\leq N \\leq 2000$\n- 对于所有满足 $1 \\leq i \\leq M$ 且 $1 \\leq j \\leq N$ 的 $(i,j)$，都有 $1 \\leq D_{i,j} \\leq 9$\n\n**子任务**\n\n1. （3 分）$N = 1$\n2. （8 分）$N = 2$\n3. （9 分）$M = 1$\n4. （21 分）$M \\leq 100$ 且 $N \\leq 100$\n5. （59 分）无额外约束条件", "locale": "zh-CN"}}}
{"pid": "P12723", "type": "P", "difficulty": 3, "samples": [["1\n(())\n()()", "="], ["1\n()()()\n(()())", "<"], ["2\n((()))\n()(())\n(((())))\n()()()()()", ">\n>"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 括号值比较", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "使用左括号 `(` 和右括号 `)` 构成的字符串中，所谓“正确括号序列”定义如下：\n\n- 仅包含一对括号的字符串 `()` 是一个正确的括号序列。\n- 若 $X$ 是一个正确的括号序列，则用括号将 $X$ 包起来形成的 $(X)$ 也是一个正确的括号序列。\n- 若 $X$ 和 $Y$ 都是正确的括号序列，则将它们连接而成的 $XY$ 也是一个正确的括号序列。\n- 所有正确的括号序列都只能通过以上三条规则构造出来。\n\n例如，`((()(())))` 和 `(())()()` 是正确的括号序列，而 `(()` 或 `)((()()` 都不是正确的括号序列。\n\n对于一个正确的括号序列 $X$，我们定义其括号值 $f[X]$，具体如下：\n\n- $f[()] = 1$；\n- 若 $X$ 是一个正确的括号序列，则 $f[(X)] = 2 \\times f[X]$；\n- 若 $X$ 和 $Y$ 是正确的括号序列，则 $f[XY] = f[X] + f[Y]$。\n\n我们来看几个例子：\n\n- $f[()] = 1$；\n- $f[(())] = 2 \\times f[()] = 2 \\times 1 = 2$；\n- $f[()()] = f[()] + f[()] = 1 + 1 = 2$；\n- $f[()()()] = f[()] + f[()()] = 1 + 2 = 3$；\n- $f[(()())] = 2 \\times f[()()] = 2 \\times 2 = 4$；\n- $f[((()))] = 2 \\times f[(())] = 2 \\times 2 = 4$；\n- $f[()(())] = f[()] + f[(())] = 1 + 2 = 3$；\n- $f[(()())()(())] = f[(()())] + f[()(())] = 4 + 3 = 7$。\n\n你的任务是读取两个正确的括号序列 $A$ 和 $B$，比较它们的括号值 $f[A]$ 与 $f[B]$。\n\n也就是说，判断 $f[A] = f[B]$、$f[A] < f[B]$ 还是 $f[A] > f[B]$。\n\n一个输入中会包含 $T$ 个测试用例。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的个数。\n\n接下来的 $T$ 个测试用例中，每个测试用例如下两行组成：\n\n- 第一行为括号序列 $A$；\n- 第二行为括号序列 $B$。", "outputFormat": "对于每个测试用例，输出一行结果：\n\n- 若 $f[A] = f[B]$，输出等号 `=`；\n- 若 $f[A] < f[B]$，输出小于号 `<`；\n- 若 $f[A] > f[B]$，输出大于号 `>`。", "hint": "**样例 1 说明**\n\n$f[A] = f[(())] = 2$，$f[B] = f[()()] = 2$，因此 $f[A] = f[B]$。\n\n**样例 2 说明**\n\n$f[A] = f[()()()] = 3$，$f[B] = f[(()())] = 4$，因此 $f[A] < f[B]$。\n\n**样例 3 说明**\n\n- 第一个测试用例中，$f[A] = f[((()))] = 4$，$f[B] = f[()(())] = 3$，因此 $f[A] > f[B]$。\n- 第二个测试用例中，$f[A] = f[(((())))] = 8$，$f[B] = f[()()()()()] = 5$，因此 $f[A] > f[B]$。\n\n**约束条件**\n\n- $1 \\leq T \\leq 10$\n- $A$ 和 $B$ 都是正确的括号序列。\n- 一个输入中所有测试用例中 $A$ 的总长度之和不超过 $3\\times10^6$。\n- 一个输入中所有测试用例中 $B$ 的总长度之和不超过 $3\\times10^6$。\n\n**子任务**\n\n1. （$3$ 分）$A$ 和 $B$ 的长度都不超过 $6$。\n2. （$23$ 分）$A$ 和 $B$ 的长度都不超过 $50$。\n3. （$13$ 分）\n   - 括号数量相等，且所有右括号都出现在所有左括号之后的括号序列，称为“简单括号序列”。\n     - 例如 `()`、`(())`、`((()))`、`(((((())))))` 都是简单括号序列。\n   - $A$ 和 $B$ 都是由长度各不相同的多个简单括号序列拼接而成的。\n     - 比如 `()(())`、`(((())))()((()))` 是符合的例子。\n     - `(())()(())` 也是由简单括号序列拼接而成，但因为包含了两段长度相同的简单括号序列 `(())`，因此在此子任务中不会出现这种情况。\n4. （$61$ 分）无额外约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 括号值比较", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "使用左括号 `(` 和右括号 `)` 构成的字符串中，所谓“正确括号序列”定义如下：\n\n- 仅包含一对括号的字符串 `()` 是一个正确的括号序列。\n- 若 $X$ 是一个正确的括号序列，则用括号将 $X$ 包起来形成的 $(X)$ 也是一个正确的括号序列。\n- 若 $X$ 和 $Y$ 都是正确的括号序列，则将它们连接而成的 $XY$ 也是一个正确的括号序列。\n- 所有正确的括号序列都只能通过以上三条规则构造出来。\n\n例如，`((()(())))` 和 `(())()()` 是正确的括号序列，而 `(()` 或 `)((()()` 都不是正确的括号序列。\n\n对于一个正确的括号序列 $X$，我们定义其括号值 $f[X]$，具体如下：\n\n- $f[()] = 1$；\n- 若 $X$ 是一个正确的括号序列，则 $f[(X)] = 2 \\times f[X]$；\n- 若 $X$ 和 $Y$ 是正确的括号序列，则 $f[XY] = f[X] + f[Y]$。\n\n我们来看几个例子：\n\n- $f[()] = 1$；\n- $f[(())] = 2 \\times f[()] = 2 \\times 1 = 2$；\n- $f[()()] = f[()] + f[()] = 1 + 1 = 2$；\n- $f[()()()] = f[()] + f[()()] = 1 + 2 = 3$；\n- $f[(()())] = 2 \\times f[()()] = 2 \\times 2 = 4$；\n- $f[((()))] = 2 \\times f[(())] = 2 \\times 2 = 4$；\n- $f[()(())] = f[()] + f[(())] = 1 + 2 = 3$；\n- $f[(()())()(())] = f[(()())] + f[()(())] = 4 + 3 = 7$。\n\n你的任务是读取两个正确的括号序列 $A$ 和 $B$，比较它们的括号值 $f[A]$ 与 $f[B]$。\n\n也就是说，判断 $f[A] = f[B]$、$f[A] < f[B]$ 还是 $f[A] > f[B]$。\n\n一个输入中会包含 $T$ 个测试用例。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的个数。\n\n接下来的 $T$ 个测试用例中，每个测试用例如下两行组成：\n\n- 第一行为括号序列 $A$；\n- 第二行为括号序列 $B$。", "outputFormat": "对于每个测试用例，输出一行结果：\n\n- 若 $f[A] = f[B]$，输出等号 `=`；\n- 若 $f[A] < f[B]$，输出小于号 `<`；\n- 若 $f[A] > f[B]$，输出大于号 `>`。", "hint": "**样例 1 说明**\n\n$f[A] = f[(())] = 2$，$f[B] = f[()()] = 2$，因此 $f[A] = f[B]$。\n\n**样例 2 说明**\n\n$f[A] = f[()()()] = 3$，$f[B] = f[(()())] = 4$，因此 $f[A] < f[B]$。\n\n**样例 3 说明**\n\n- 第一个测试用例中，$f[A] = f[((()))] = 4$，$f[B] = f[()(())] = 3$，因此 $f[A] > f[B]$。\n- 第二个测试用例中，$f[A] = f[(((())))] = 8$，$f[B] = f[()()()()()] = 5$，因此 $f[A] > f[B]$。\n\n**约束条件**\n\n- $1 \\leq T \\leq 10$\n- $A$ 和 $B$ 都是正确的括号序列。\n- 一个输入中所有测试用例中 $A$ 的总长度之和不超过 $3\\times10^6$。\n- 一个输入中所有测试用例中 $B$ 的总长度之和不超过 $3\\times10^6$。\n\n**子任务**\n\n1. （$3$ 分）$A$ 和 $B$ 的长度都不超过 $6$。\n2. （$23$ 分）$A$ 和 $B$ 的长度都不超过 $50$。\n3. （$13$ 分）\n   - 括号数量相等，且所有右括号都出现在所有左括号之后的括号序列，称为“简单括号序列”。\n     - 例如 `()`、`(())`、`((()))`、`(((((())))))` 都是简单括号序列。\n   - $A$ 和 $B$ 都是由长度各不相同的多个简单括号序列拼接而成的。\n     - 比如 `()(())`、`(((())))()((()))` 是符合的例子。\n     - `(())()(())` 也是由简单括号序列拼接而成，但因为包含了两段长度相同的简单括号序列 `(())`，因此在此子任务中不会出现这种情况。\n4. （$61$ 分）无额外约束条件。", "locale": "zh-CN"}}}
{"pid": "P12724", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2 5\n2 3 4\n3 1 3", "Yes\n2 3 1"], ["5 4\n1 3 5\n2 3 -4\n4 2 -12\n5 3 3", "Yes\n2 -7 3 -5 0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 图的平衡", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定一个包含 $N$ 个顶点和 $M$ 条边的无向简单连通图。图中的顶点编号为 $1$ 到 $N$ 的互不相同的自然数，边的编号为 $1$ 到 $M$ 的互不相同的自然数。\n\n第 $j$ 条边（$1 \\leq j \\leq M$）连接编号为 $a_j$ 和 $b_j$ 的两个顶点，边的权值为整数 $c_j$。\n\n你需要为每个顶点分配一个整数权值。设第 $i$ 个顶点（$1 \\leq i \\leq N$）的权值为 $x_i$。\n\n对所有顶点所分配权值的总代价定义为这些权值的绝对值之和，即：\n\n$$\n|x_1| + |x_2| + \\cdots + |x_N| = \\sum_{i=1}^{N} |x_i|\n$$\n\n如果要使图保持平衡，则每一条边连接的两个顶点的权值之和必须等于该边的权值。也就是说，对于所有 $j$（$1 \\leq j \\leq M$），应满足：\n\n$$\nx_{a_j} + x_{b_j} = c_j\n$$\n\n例如，考虑下图中的一个图，它包含 5 个顶点和 4 条边。在图中，圆圈内的数字表示顶点编号，边上的数字表示边的权值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u3eglcg.png)\n\n如果按照下图所示，为各顶点分配权值为 $[2, -7, 3, -5, 0]$，则每一条边连接的两个顶点的权值之和均等于对应边的权值。图中每个圆圈中的数字即为该顶点的权值\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mmlya65n.png)\n\n该分配方式的总代价为：\n\n$$\n|2| + |-7| + |3| + |-5| + |0| = 2 + 7 + 3 + 5 + 0 = 17\n$$\n\n这是最小可能总代价。\n\n例如，若将各顶点权值设为 $[6, -3, -1, -9, 4]$，尽管此时图仍满足平衡条件，但总代价变为：\n\n$$\n|6| + |-3| + |-1| + |-9| + |4| = 6 + 3 + 1 + 9 + 4 = 23\n$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ne03wzok.png)\n\n这显然不是最优方案。\n\n你的任务是编写一个程序，判断是否存在某种分配方式使图保持平衡，若存在，请输出总代价最小的一种分配方式之一。\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，用一个空格分隔。\n\n接下来 $M$ 行，每行包含三个整数 $a_j$、$b_j$、$c_j$，表示一条边的连接情况和其权值。各整数之间用空格分隔。\n", "outputFormat": "若存在一种方式为图中每个顶点分配整数权值，使得图保持平衡，则输出：\n\n- 第一行输出 `Yes`（不区分大小写）\n- 第二行输出 $N$ 个整数 $x_1, x_2, \\ldots, x_N$，用空格分隔，表示每个顶点的权值。若有多种满足条件的最小总代价方案，可任选其一输出。\n\n若不存在任何一种满足条件的分配方式，则输出：\n\n- 一行输出 `No`（不区分大小写）", "hint": "**约束条件**\n\n- 所有给定数值均为整数。\n- $2 \\leq N \\leq 100\\,000$\n- $1 \\leq M \\leq 200\\,000$\n- 对所有 $j$（$1 \\leq j \\leq M$），满足：\n  - $1 \\leq a_j, b_j \\leq N$\n  - $a_j \\ne b_j$（不存在连接同一顶点的边）\n  - $-1\\,000\\,000 \\leq c_j \\leq 1\\,000\\,000$\n- 对所有 $j < k$（$1 \\leq j < k \\leq M$），满足 $\\{a_j, b_j\\} \\ne \\{a_k, b_k\\}$（任意两个顶点对之间至多存在一条边）\n- 图是连通的，即任意两个顶点之间都存在路径相连。\n\n**子任务**\n\n1. （6 分）$N = 3$ 且 $M = 3$，三条边分别连接顶点 1-2、2-3、3-1  \n2. （10 分）$N \\leq 1\\,000$ 且 $M = N - 1$，第 $j$ 条边连接顶点 $j$ 和 $j + 1$  \n3. （11 分）$M = N - 1$ 且第 $j$ 条边连接顶点 $j$ 和 $j + 1$  \n4. （12 分）$M = N - 1$  \n5. （13 分）$M = N$ 且每个顶点连接恰好两条不同的边  \n6. （29 分）$N \\leq 1\\,000$  \n7. （19 分）无额外约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 图的平衡", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定一个包含 $N$ 个顶点和 $M$ 条边的无向简单连通图。图中的顶点编号为 $1$ 到 $N$ 的互不相同的自然数，边的编号为 $1$ 到 $M$ 的互不相同的自然数。\n\n第 $j$ 条边（$1 \\leq j \\leq M$）连接编号为 $a_j$ 和 $b_j$ 的两个顶点，边的权值为整数 $c_j$。\n\n你需要为每个顶点分配一个整数权值。设第 $i$ 个顶点（$1 \\leq i \\leq N$）的权值为 $x_i$。\n\n对所有顶点所分配权值的总代价定义为这些权值的绝对值之和，即：\n\n$$\n|x_1| + |x_2| + \\cdots + |x_N| = \\sum_{i=1}^{N} |x_i|\n$$\n\n如果要使图保持平衡，则每一条边连接的两个顶点的权值之和必须等于该边的权值。也就是说，对于所有 $j$（$1 \\leq j \\leq M$），应满足：\n\n$$\nx_{a_j} + x_{b_j} = c_j\n$$\n\n例如，考虑下图中的一个图，它包含 5 个顶点和 4 条边。在图中，圆圈内的数字表示顶点编号，边上的数字表示边的权值。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u3eglcg.png)\n\n如果按照下图所示，为各顶点分配权值为 $[2, -7, 3, -5, 0]$，则每一条边连接的两个顶点的权值之和均等于对应边的权值。图中每个圆圈中的数字即为该顶点的权值\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mmlya65n.png)\n\n该分配方式的总代价为：\n\n$$\n|2| + |-7| + |3| + |-5| + |0| = 2 + 7 + 3 + 5 + 0 = 17\n$$\n\n这是最小可能总代价。\n\n例如，若将各顶点权值设为 $[6, -3, -1, -9, 4]$，尽管此时图仍满足平衡条件，但总代价变为：\n\n$$\n|6| + |-3| + |-1| + |-9| + |4| = 6 + 3 + 1 + 9 + 4 = 23\n$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ne03wzok.png)\n\n这显然不是最优方案。\n\n你的任务是编写一个程序，判断是否存在某种分配方式使图保持平衡，若存在，请输出总代价最小的一种分配方式之一。\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，用一个空格分隔。\n\n接下来 $M$ 行，每行包含三个整数 $a_j$、$b_j$、$c_j$，表示一条边的连接情况和其权值。各整数之间用空格分隔。\n", "outputFormat": "若存在一种方式为图中每个顶点分配整数权值，使得图保持平衡，则输出：\n\n- 第一行输出 `Yes`（不区分大小写）\n- 第二行输出 $N$ 个整数 $x_1, x_2, \\ldots, x_N$，用空格分隔，表示每个顶点的权值。若有多种满足条件的最小总代价方案，可任选其一输出。\n\n若不存在任何一种满足条件的分配方式，则输出：\n\n- 一行输出 `No`（不区分大小写）", "hint": "**约束条件**\n\n- 所有给定数值均为整数。\n- $2 \\leq N \\leq 100\\,000$\n- $1 \\leq M \\leq 200\\,000$\n- 对所有 $j$（$1 \\leq j \\leq M$），满足：\n  - $1 \\leq a_j, b_j \\leq N$\n  - $a_j \\ne b_j$（不存在连接同一顶点的边）\n  - $-1\\,000\\,000 \\leq c_j \\leq 1\\,000\\,000$\n- 对所有 $j < k$（$1 \\leq j < k \\leq M$），满足 $\\{a_j, b_j\\} \\ne \\{a_k, b_k\\}$（任意两个顶点对之间至多存在一条边）\n- 图是连通的，即任意两个顶点之间都存在路径相连。\n\n**子任务**\n\n1. （6 分）$N = 3$ 且 $M = 3$，三条边分别连接顶点 1-2、2-3、3-1  \n2. （10 分）$N \\leq 1\\,000$ 且 $M = N - 1$，第 $j$ 条边连接顶点 $j$ 和 $j + 1$  \n3. （11 分）$M = N - 1$ 且第 $j$ 条边连接顶点 $j$ 和 $j + 1$  \n4. （12 分）$M = N - 1$  \n5. （13 分）$M = N$ 且每个顶点连接恰好两条不同的边  \n6. （29 分）$N \\leq 1\\,000$  \n7. （19 分）无额外约束条件。", "locale": "zh-CN"}}}
{"pid": "P12725", "type": "P", "difficulty": 3, "samples": [["3 1\n2 1\n1 3\n3 6\n4", "13"], ["4 5\n3 -4\n1 -10\n2 11\n4 6\n6\n-5\n1\n-12\n14", "56\n84\n66\n144\n116"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["二分", "2021", "前缀和", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 累计距离", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "KOI 国是一个由 $N$ 个村庄构成的国家，这些村庄分布在数轴上。其中第 $i$ 个村庄（$1 \\leq i \\leq N$）位于位置 $x_i$，并有 $a_i$ 名居民。不会有两个不同村庄位于相同的位置。\n\nKOI 国计划召开一场所有国民都要参加的大会。为此，所有人需要前往会议举办地点，所有人前往该地点所需的移动距离之和称为“累计距离”，我们用 $f(x)$ 表示当会议举办地点为 $x$ 时的累计距离。\n\n住在第 $i$ 个村庄的人前往位置为 $x$ 的会议地点时，需要移动的距离为 $|x_i - x|$。由于第 $i$ 个村庄有 $a_i$ 名居民，因此该村居民所需的总移动距离为 $a_i \\times |x_i - x|$。\n\n将所有村庄的该值加总，即可得到在位置 $x$ 举办会议时的累计距离：\n\n$$\nf(x) = \\sum_{i=1}^{N} a_i \\times |x_i - x|\n$$\n\n例如，若村庄的位置为 $x_1 = 1$、$x_2 = 3$、$x_3 = 6$，各村庄的居民数分别为 $a_1 = 2$、$a_2 = 1$、$a_3 = 3$，当会议地点为 $x = 4$ 时，累计距离为：\n\n$$\nf(4) = 2 \\times |1 - 4| + 1 \\times |3 - 4| + 3 \\times |6 - 4| = 13\n$$\n\nKOI 国已经准备了 $Q$ 个会议地点候选位置。第 $j$ 个候选位置（$1 \\leq j \\leq Q$）为 $q_j$。多个候选位置之间不会重复，但候选位置可能与某个村庄位置相同。\n\n请编写程序，计算每一个候选会议地点 $q_j$ 的累计距离 $f(q_j)$。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$，用一个空格隔开。\n\n接下来的 $N$ 行，每行包含两个整数 $a_i$ 和 $x_i$，表示每个村庄的居民人数及其位置。\n\n接下来的 $Q$ 行，每行一个整数 $q_j$，表示一个候选会议地点的位置。", "outputFormat": "输出 $Q$ 行。第 $j$ 行输出会议地点为 $q_j$ 时的累计距离 $f(q_j)$。\n", "hint": "**约束条件**\n\n- $1 \\leq N \\leq 200\\,000$\n- 对于所有 $i$（$1 \\leq i \\leq N$），$1 \\leq a_i \\leq 1\\,000$\n- 对于所有 $i$，$-10^9 \\leq x_i \\leq 10^9$\n- $1 \\leq Q \\leq 200\\,000$\n- 对于所有 $j$，$-10^9 \\leq q_j \\leq 10^9$\n- 对任意 $1 \\leq i_1 < i_2 \\leq N$，$x_{i_1} \\ne x_{i_2}$（村庄位置各不相同）\n- 对任意 $1 \\leq j_1 < j_2 \\leq Q$，$q_{j_1} \\ne q_{j_2}$（候选位置各不相同）\n- 所有给定数值均为整数\n\n**子任务**\n\n1. （9 分）$N,Q \\leq 5\\,000$\n2. （21 分）对所有 $i$，满足 $1 \\leq x_i \\leq 200\\,000$，且对所有 $j$，满足 $1 \\leq q_j \\leq 200\\,000$\n3. （25 分）对所有 $i$，$a_i = 1$\n4. （45 分）无额外约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 累计距离", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "KOI 国是一个由 $N$ 个村庄构成的国家，这些村庄分布在数轴上。其中第 $i$ 个村庄（$1 \\leq i \\leq N$）位于位置 $x_i$，并有 $a_i$ 名居民。不会有两个不同村庄位于相同的位置。\n\nKOI 国计划召开一场所有国民都要参加的大会。为此，所有人需要前往会议举办地点，所有人前往该地点所需的移动距离之和称为“累计距离”，我们用 $f(x)$ 表示当会议举办地点为 $x$ 时的累计距离。\n\n住在第 $i$ 个村庄的人前往位置为 $x$ 的会议地点时，需要移动的距离为 $|x_i - x|$。由于第 $i$ 个村庄有 $a_i$ 名居民，因此该村居民所需的总移动距离为 $a_i \\times |x_i - x|$。\n\n将所有村庄的该值加总，即可得到在位置 $x$ 举办会议时的累计距离：\n\n$$\nf(x) = \\sum_{i=1}^{N} a_i \\times |x_i - x|\n$$\n\n例如，若村庄的位置为 $x_1 = 1$、$x_2 = 3$、$x_3 = 6$，各村庄的居民数分别为 $a_1 = 2$、$a_2 = 1$、$a_3 = 3$，当会议地点为 $x = 4$ 时，累计距离为：\n\n$$\nf(4) = 2 \\times |1 - 4| + 1 \\times |3 - 4| + 3 \\times |6 - 4| = 13\n$$\n\nKOI 国已经准备了 $Q$ 个会议地点候选位置。第 $j$ 个候选位置（$1 \\leq j \\leq Q$）为 $q_j$。多个候选位置之间不会重复，但候选位置可能与某个村庄位置相同。\n\n请编写程序，计算每一个候选会议地点 $q_j$ 的累计距离 $f(q_j)$。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$，用一个空格隔开。\n\n接下来的 $N$ 行，每行包含两个整数 $a_i$ 和 $x_i$，表示每个村庄的居民人数及其位置。\n\n接下来的 $Q$ 行，每行一个整数 $q_j$，表示一个候选会议地点的位置。", "outputFormat": "输出 $Q$ 行。第 $j$ 行输出会议地点为 $q_j$ 时的累计距离 $f(q_j)$。\n", "hint": "**约束条件**\n\n- $1 \\leq N \\leq 200\\,000$\n- 对于所有 $i$（$1 \\leq i \\leq N$），$1 \\leq a_i \\leq 1\\,000$\n- 对于所有 $i$，$-10^9 \\leq x_i \\leq 10^9$\n- $1 \\leq Q \\leq 200\\,000$\n- 对于所有 $j$，$-10^9 \\leq q_j \\leq 10^9$\n- 对任意 $1 \\leq i_1 < i_2 \\leq N$，$x_{i_1} \\ne x_{i_2}$（村庄位置各不相同）\n- 对任意 $1 \\leq j_1 < j_2 \\leq Q$，$q_{j_1} \\ne q_{j_2}$（候选位置各不相同）\n- 所有给定数值均为整数\n\n**子任务**\n\n1. （9 分）$N,Q \\leq 5\\,000$\n2. （21 分）对所有 $i$，满足 $1 \\leq x_i \\leq 200\\,000$，且对所有 $j$，满足 $1 \\leq q_j \\leq 200\\,000$\n3. （25 分）对所有 $i$，$a_i = 1$\n4. （45 分）无额外约束条件", "locale": "zh-CN"}}}
{"pid": "P12726", "type": "P", "difficulty": 6, "samples": [["13 3\n1 15 0\n2 14 2\n2 8 0", "7\n13\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 连续的 1", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "使用正整数 $N$ 构造的字符串 $S_N$ 定义如下。这里的 $\\lfloor N/2 \\rfloor$ 表示 $N$ 除以 2 的向下取整值。\n\n1. 当 $N = 1$ 时：$S_N = 1$（即由一个字符 `'1'` 组成的字符串）。\n2. 当 $N \\geq 2$ 且 $N$ 是偶数时：$S_N = S_{\\lfloor N/2 \\rfloor} 0 S_{\\lfloor N/2 \\rfloor}$（即用一个字符 `'0'` 夹在两个 $S_{\\lfloor N/2 \\rfloor}$ 之间）。\n3. 当 $N \\geq 2$ 且 $N$ 是奇数时：$S_N = S_{\\lfloor N/2 \\rfloor} 1 S_{\\lfloor N/2 \\rfloor}$（即用一个字符 `'1'` 夹在两个 $S_{\\lfloor N/2 \\rfloor}$ 之间）。\n\n根据上述定义，我们可以如下计算 $S_{13}$：\n\n- 由于 $N = 13$ 是奇数，适用第 3 条规则，因此 $S_{13} = S_6 1 S_6$。\n- 又由于 $S_6$ 是偶数，适用第 2 条规则，因此 $S_6 = S_3 0 S_3$，所以 $S_{13} = S_3 0 S_3 1 S_3 0 S_3$。\n- 而 $S_3$ 是奇数，进一步展开得到 $S_3 = S_1 1 S_1$，而 $S_1 = 1$，所以 $S_3 = 1 1 1$。\n\n因此，$S_{13} = 111011111110111$。\n\n给定正整数 $N$，你需要编写程序处理 $Q$ 个查询。\n\n第 $q$ 个查询（$1 \\leq q \\leq Q$）给出三个整数 $(i_q, j_q, k_q)$，要求回答：在 $S_N[i_q..j_q]$ 区间中，最多包含 $k_q$ 个 `'0'` 的最长子字符串的长度是多少？\n\n例如：\n\n- 查询 $(1, 15, 0)$ 询问的是整个 $S_{13}$ 中只包含 `'1'` 的最长子串，其长度为 7。\n- 查询 $(2, 14, 2)$ 涉及子串 $S_{13}[2..14] = 1101111111011$，其中恰好有两个 `'0'`，因此整个子串就是答案，长度为 13。\n\n部分字符串的定义如下：\n\n- 给定一个长度为 $l$ 的字符串 $s$ 和两个满足 $1 \\leq i \\leq j \\leq l$ 的整数 $i$ 和 $j$，$s[i..j]$ 表示从第 $i$ 个字符开始到第 $j$ 个字符为止的所有字符所组成的字符串。\n- 例如：若 $s = 0100101$，则 $s[3..5] = 001$，$s[4..7] = 0101$，而 $1010$ 不是其子串。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$，用一个空格隔开。\n\n接下来的 $Q$ 行，每行三个整数 $i_q$、$j_q$、$k_q$，表示第 $q$ 个查询。", "outputFormat": "对每个查询，输出一行，仅包含一个整数，即最长子字符串的长度。\n", "hint": "**约束条件**\n\n- $1 \\leq N \\leq 10^{18}$\n- $1 \\leq Q \\leq 10\\,000$\n- 所有查询中 $k_q$ 的总和不超过 $10\\,000$，即 $\\sum_{q=1}^{Q} k_q \\leq 10\\,000$\n- 对所有 $q$ 满足 $1 \\leq i_q \\leq j_q \\leq |S_N|$（其中 $|S_N|$ 是字符串 $S_N$ 的长度）\n\n**子任务**\n\n1. （5 分）$N = 2^t$，其中 $t$ 为非负整数，即 $N$ 是 $1, 2, 4, 8, \\ldots$ 等 2 的幂\n2. （11 分）$N \\leq 1\\,000$\n3. （17 分）所有查询中子串长度之和不超过 $100\\,000$，即 $\\sum_{q=1}^{Q}(j_q - i_q + 1) \\leq 100\\,000$\n4. （25 分）所有查询中 $k_q = 0$\n5. （42 分）无额外约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 连续的 1", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "使用正整数 $N$ 构造的字符串 $S_N$ 定义如下。这里的 $\\lfloor N/2 \\rfloor$ 表示 $N$ 除以 2 的向下取整值。\n\n1. 当 $N = 1$ 时：$S_N = 1$（即由一个字符 `'1'` 组成的字符串）。\n2. 当 $N \\geq 2$ 且 $N$ 是偶数时：$S_N = S_{\\lfloor N/2 \\rfloor} 0 S_{\\lfloor N/2 \\rfloor}$（即用一个字符 `'0'` 夹在两个 $S_{\\lfloor N/2 \\rfloor}$ 之间）。\n3. 当 $N \\geq 2$ 且 $N$ 是奇数时：$S_N = S_{\\lfloor N/2 \\rfloor} 1 S_{\\lfloor N/2 \\rfloor}$（即用一个字符 `'1'` 夹在两个 $S_{\\lfloor N/2 \\rfloor}$ 之间）。\n\n根据上述定义，我们可以如下计算 $S_{13}$：\n\n- 由于 $N = 13$ 是奇数，适用第 3 条规则，因此 $S_{13} = S_6 1 S_6$。\n- 又由于 $S_6$ 是偶数，适用第 2 条规则，因此 $S_6 = S_3 0 S_3$，所以 $S_{13} = S_3 0 S_3 1 S_3 0 S_3$。\n- 而 $S_3$ 是奇数，进一步展开得到 $S_3 = S_1 1 S_1$，而 $S_1 = 1$，所以 $S_3 = 1 1 1$。\n\n因此，$S_{13} = 111011111110111$。\n\n给定正整数 $N$，你需要编写程序处理 $Q$ 个查询。\n\n第 $q$ 个查询（$1 \\leq q \\leq Q$）给出三个整数 $(i_q, j_q, k_q)$，要求回答：在 $S_N[i_q..j_q]$ 区间中，最多包含 $k_q$ 个 `'0'` 的最长子字符串的长度是多少？\n\n例如：\n\n- 查询 $(1, 15, 0)$ 询问的是整个 $S_{13}$ 中只包含 `'1'` 的最长子串，其长度为 7。\n- 查询 $(2, 14, 2)$ 涉及子串 $S_{13}[2..14] = 1101111111011$，其中恰好有两个 `'0'`，因此整个子串就是答案，长度为 13。\n\n部分字符串的定义如下：\n\n- 给定一个长度为 $l$ 的字符串 $s$ 和两个满足 $1 \\leq i \\leq j \\leq l$ 的整数 $i$ 和 $j$，$s[i..j]$ 表示从第 $i$ 个字符开始到第 $j$ 个字符为止的所有字符所组成的字符串。\n- 例如：若 $s = 0100101$，则 $s[3..5] = 001$，$s[4..7] = 0101$，而 $1010$ 不是其子串。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$，用一个空格隔开。\n\n接下来的 $Q$ 行，每行三个整数 $i_q$、$j_q$、$k_q$，表示第 $q$ 个查询。", "outputFormat": "对每个查询，输出一行，仅包含一个整数，即最长子字符串的长度。\n", "hint": "**约束条件**\n\n- $1 \\leq N \\leq 10^{18}$\n- $1 \\leq Q \\leq 10\\,000$\n- 所有查询中 $k_q$ 的总和不超过 $10\\,000$，即 $\\sum_{q=1}^{Q} k_q \\leq 10\\,000$\n- 对所有 $q$ 满足 $1 \\leq i_q \\leq j_q \\leq |S_N|$（其中 $|S_N|$ 是字符串 $S_N$ 的长度）\n\n**子任务**\n\n1. （5 分）$N = 2^t$，其中 $t$ 为非负整数，即 $N$ 是 $1, 2, 4, 8, \\ldots$ 等 2 的幂\n2. （11 分）$N \\leq 1\\,000$\n3. （17 分）所有查询中子串长度之和不超过 $100\\,000$，即 $\\sum_{q=1}^{Q}(j_q - i_q + 1) \\leq 100\\,000$\n4. （25 分）所有查询中 $k_q = 0$\n5. （42 分）无额外约束条件", "locale": "zh-CN"}}}
{"pid": "P12727", "type": "P", "difficulty": 6, "samples": [["3\n()((())) (()((())))() 3\n))(()(((( )())))))( 1\n())) )))))(()) 4", "()\n()\n-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "后缀数组 SA", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 公共括号子串字典序", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定两个只由左括号 `(` 与右括号 `)` 构成的字符串 $A$ 和 $B$，以及一个自然数 $K$。\n\n我们定义集合 $S(A, B)$ 表示：所有既是字符串 $A$ 的子串、又是字符串 $B$ 的子串，并且是一个**合法括号序列**的不同字符串所组成的集合。\n\n你的任务是判断 $S(A, B)$ 的大小是否不少于 $K$。如果不小于，则输出 $S(A, B)$ 中**按字典序排列后的第 $K$ 个字符串**；否则，输出 $-1$。\n\n你需要在一个输入数据中处理 $T$ 个测试用例。\n\n### 合法括号序列的定义\n\n一个合法括号序列定义如下：\n\n- 单个括号对构成的字符串 `()` 是合法括号序列。\n- 若 $X$ 是合法括号序列，则 $(X)$ 也是合法括号序列。\n- 若 $X$ 和 $Y$ 都是合法括号序列，则将它们连接而成的 $XY$ 也是合法括号序列。\n- 所有合法括号序列都只能通过上述三条规则构造。\n\n例如：`((()(())))` 和 `(())()()` 是合法括号序列，而 `(()` 和 `)((()()` 都不是。\n\n### 子串的定义\n\n给定长度为 $l$ 的字符串 $s$ 和两个整数 $i, j$，其中 $1 \\leq i \\leq j \\leq l$，则 $s[i..j]$ 表示从 $s$ 的第 $i$ 个字符到第 $j$ 个字符组成的子字符串。\n\n例如若 $s = \\texttt{()(()()}$，则 $s[1..5] = \\texttt{(()(}$，$s[1..7] = \\texttt{()(()()}$，因此 `(()(` 和 `()(()()` 都是 $s$ 的子串。但 `)()(` 不是该字符串的子串。\n\n### 字典序的定义\n\n给定两个字符串 $s_1[1..l_1]$ 和 $s_2[1..l_2]$，我们说 $s_1$ 在字典序上早于 $s_2$，当且仅当满足以下任一条件：\n\n- $s_1$ 是 $s_2$ 的前缀，且 $l_1 < l_2$\n- 存在最小的 $i$ 满足 $s_1[i] \\ne s_2[i]$ 且 $s_1[i] < s_2[i]$\n\n在本题中，左括号 `'('` 比右括号 `')'` 更小，即 `'(' < ')'`。这与 C++、Java 和 Python 中的字符串比较方式一致。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的个数。\n\n接下来的 $T$ 行中，每行描述一个测试用例，包含字符串 $A$、字符串 $B$ 和整数 $K$，它们之间用一个空格隔开。\n", "outputFormat": "对于每个测试用例，按输入顺序依次输出一行：\n\n- 若 $|S(A, B)| < K$，输出 $-1$\n- 否则，输出 $S(A, B)$ 中字典序第 $K$ 小的字符串", "hint": "**约束条件**\n\n设 $\\sum |A|$ 表示一个输入数据中所有测试用例的字符串 $A$ 的总长度之和，$\\sum |B|$ 类似。\n\n- $1 \\leq T \\leq 500\\,000$\n- 每个字符串 $A$ 和 $B$ 均由 `'('` 和 `')'` 组成，且长度均不少于 1\n- $1 \\leq K \\leq 10^{18}$\n- $\\sum |A| \\leq 500\\,000$\n- $\\sum |B| \\leq 500\\,000$\n\n**子任务**\n\n1. （4 分）$\\sum |A| \\leq 100$，$\\sum |B| \\leq 100$\n2. （11 分）$\\sum |A| \\leq 1\\,000$，$\\sum |B| \\leq 1\\,000$\n3. （16 分）$\\sum |A| \\leq 10\\,000$，$\\sum |B| \\leq 10\\,000$，且 $A = B$，$K = 1$\n4. （25 分）$\\sum |A| \\leq 10\\,000$，$\\sum |B| \\leq 10\\,000$\n5. （10 分）$A = B$，$K = 1$\n6. （12 分）$A = B$\n7. （9 分）$K = 1$\n8. （13 分）无额外约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 公共括号子串字典序", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定两个只由左括号 `(` 与右括号 `)` 构成的字符串 $A$ 和 $B$，以及一个自然数 $K$。\n\n我们定义集合 $S(A, B)$ 表示：所有既是字符串 $A$ 的子串、又是字符串 $B$ 的子串，并且是一个**合法括号序列**的不同字符串所组成的集合。\n\n你的任务是判断 $S(A, B)$ 的大小是否不少于 $K$。如果不小于，则输出 $S(A, B)$ 中**按字典序排列后的第 $K$ 个字符串**；否则，输出 $-1$。\n\n你需要在一个输入数据中处理 $T$ 个测试用例。\n\n### 合法括号序列的定义\n\n一个合法括号序列定义如下：\n\n- 单个括号对构成的字符串 `()` 是合法括号序列。\n- 若 $X$ 是合法括号序列，则 $(X)$ 也是合法括号序列。\n- 若 $X$ 和 $Y$ 都是合法括号序列，则将它们连接而成的 $XY$ 也是合法括号序列。\n- 所有合法括号序列都只能通过上述三条规则构造。\n\n例如：`((()(())))` 和 `(())()()` 是合法括号序列，而 `(()` 和 `)((()()` 都不是。\n\n### 子串的定义\n\n给定长度为 $l$ 的字符串 $s$ 和两个整数 $i, j$，其中 $1 \\leq i \\leq j \\leq l$，则 $s[i..j]$ 表示从 $s$ 的第 $i$ 个字符到第 $j$ 个字符组成的子字符串。\n\n例如若 $s = \\texttt{()(()()}$，则 $s[1..5] = \\texttt{(()(}$，$s[1..7] = \\texttt{()(()()}$，因此 `(()(` 和 `()(()()` 都是 $s$ 的子串。但 `)()(` 不是该字符串的子串。\n\n### 字典序的定义\n\n给定两个字符串 $s_1[1..l_1]$ 和 $s_2[1..l_2]$，我们说 $s_1$ 在字典序上早于 $s_2$，当且仅当满足以下任一条件：\n\n- $s_1$ 是 $s_2$ 的前缀，且 $l_1 < l_2$\n- 存在最小的 $i$ 满足 $s_1[i] \\ne s_2[i]$ 且 $s_1[i] < s_2[i]$\n\n在本题中，左括号 `'('` 比右括号 `')'` 更小，即 `'(' < ')'`。这与 C++、Java 和 Python 中的字符串比较方式一致。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的个数。\n\n接下来的 $T$ 行中，每行描述一个测试用例，包含字符串 $A$、字符串 $B$ 和整数 $K$，它们之间用一个空格隔开。\n", "outputFormat": "对于每个测试用例，按输入顺序依次输出一行：\n\n- 若 $|S(A, B)| < K$，输出 $-1$\n- 否则，输出 $S(A, B)$ 中字典序第 $K$ 小的字符串", "hint": "**约束条件**\n\n设 $\\sum |A|$ 表示一个输入数据中所有测试用例的字符串 $A$ 的总长度之和，$\\sum |B|$ 类似。\n\n- $1 \\leq T \\leq 500\\,000$\n- 每个字符串 $A$ 和 $B$ 均由 `'('` 和 `')'` 组成，且长度均不少于 1\n- $1 \\leq K \\leq 10^{18}$\n- $\\sum |A| \\leq 500\\,000$\n- $\\sum |B| \\leq 500\\,000$\n\n**子任务**\n\n1. （4 分）$\\sum |A| \\leq 100$，$\\sum |B| \\leq 100$\n2. （11 分）$\\sum |A| \\leq 1\\,000$，$\\sum |B| \\leq 1\\,000$\n3. （16 分）$\\sum |A| \\leq 10\\,000$，$\\sum |B| \\leq 10\\,000$，且 $A = B$，$K = 1$\n4. （25 分）$\\sum |A| \\leq 10\\,000$，$\\sum |B| \\leq 10\\,000$\n5. （10 分）$A = B$，$K = 1$\n6. （12 分）$A = B$\n7. （9 分）$K = 1$\n8. （13 分）无额外约束条件", "locale": "zh-CN"}}}
{"pid": "P12728", "type": "P", "difficulty": 4, "samples": [["3\n3 4\n10 5\n7 12", "9\n25\n40"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "前缀和", "KOI（韩国）", "线性 DP"], "title": "[KOI 2021 Round 2] 直升机着陆场", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "为了让直升机能够降落在建筑物屋顶上，需要构建直升机着陆场。直升机着陆场必须满足以下所有条件：\n\n- 直升机着陆场由 $k$ 个（$k \\geq 1$）同心圆组成。\n- 构成直升机着陆场的每个圆的半径为 $1, 2, \\dots, k$（是 $1$ 到 $k$ 之间的互不相同的自然数）。\n- 每个圆的圆周必须用某一种颜色的油漆涂上。\n\n直升机着陆场的“大小”指的是同心圆中最大圆的半径，根据上面的定义可以得出这等同于圆的个数 $k$。\n\n如果两个直升机着陆场不同，意味着它们的大小不同，或者虽然大小相同，但圆周所用的颜色组合不同。\n\n为了涂上半径为 $r$ 的圆的圆周，需要恰好 $r$ 桶该颜色的油漆。\n\n例如，假设你有 3 桶红色油漆和 4 桶蓝色油漆，在这种情况下可以制作的不同的直升机着陆场如下图所示，共有 9 种不同的组合。图中的 X 表示同心圆的中心。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j1t5z8ij.png)\n\n其中，若想绘制图中所示大小为 3 的某种着陆场，需要红色油漆 $4 = 1 + 3$ 桶和蓝色油漆 2 桶。但由于红色油漆只有 3 桶，因此这种着陆场无法制作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/td83f0wc.png)\n\n你现在拥有 $a$ 桶红色油漆和 $b$ 桶蓝色油漆。请你编写一个程序，计算仅使用这些油漆能够制作的不同的直升机着陆场的种类数，结果对 $10^9 + 7$ 取模。\n\n一个输入包含 $T$ 个测试用例。你需要依次解决这 $T$ 个测试用例。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例的数量。\n\n接下来 $T$ 行，每行包含两个整数 $a$ 和 $b$，中间用一个空格隔开，分别表示红色油漆和蓝色油漆的桶数。\n", "outputFormat": "对于每个测试用例，输出一行，仅包含一个整数，表示使用给定数量的红色和蓝色油漆能够构造的不同的直升机着陆场数量，对 $10^9 + 7$ 取模。\n", "hint": "**约束条件**\n\n- 所有给定的数值均为整数。\n- $1 \\leq T \\leq 10\\,000$\n- $1 \\leq a, b \\leq 50\\,000$\n\n**子任务**\n\n1. （3 分）$T = 1$, 且 $a, b \\leq 6$\n2. （17 分）$T = 1$, 且 $a, b \\leq 100$\n3. （21 分）$T = 1$, 且 $a, b \\leq 1\\,000$\n4. （23 分）$T = 1$, 且 $a, b \\leq 5\\,000$\n5. （26 分）$T = 1$\n6. （10 分）无额外约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 直升机着陆场", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "为了让直升机能够降落在建筑物屋顶上，需要构建直升机着陆场。直升机着陆场必须满足以下所有条件：\n\n- 直升机着陆场由 $k$ 个（$k \\geq 1$）同心圆组成。\n- 构成直升机着陆场的每个圆的半径为 $1, 2, \\dots, k$（是 $1$ 到 $k$ 之间的互不相同的自然数）。\n- 每个圆的圆周必须用某一种颜色的油漆涂上。\n\n直升机着陆场的“大小”指的是同心圆中最大圆的半径，根据上面的定义可以得出这等同于圆的个数 $k$。\n\n如果两个直升机着陆场不同，意味着它们的大小不同，或者虽然大小相同，但圆周所用的颜色组合不同。\n\n为了涂上半径为 $r$ 的圆的圆周，需要恰好 $r$ 桶该颜色的油漆。\n\n例如，假设你有 3 桶红色油漆和 4 桶蓝色油漆，在这种情况下可以制作的不同的直升机着陆场如下图所示，共有 9 种不同的组合。图中的 X 表示同心圆的中心。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j1t5z8ij.png)\n\n其中，若想绘制图中所示大小为 3 的某种着陆场，需要红色油漆 $4 = 1 + 3$ 桶和蓝色油漆 2 桶。但由于红色油漆只有 3 桶，因此这种着陆场无法制作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/td83f0wc.png)\n\n你现在拥有 $a$ 桶红色油漆和 $b$ 桶蓝色油漆。请你编写一个程序，计算仅使用这些油漆能够制作的不同的直升机着陆场的种类数，结果对 $10^9 + 7$ 取模。\n\n一个输入包含 $T$ 个测试用例。你需要依次解决这 $T$ 个测试用例。", "inputFormat": "第一行输入一个整数 $T$，表示测试用例的数量。\n\n接下来 $T$ 行，每行包含两个整数 $a$ 和 $b$，中间用一个空格隔开，分别表示红色油漆和蓝色油漆的桶数。\n", "outputFormat": "对于每个测试用例，输出一行，仅包含一个整数，表示使用给定数量的红色和蓝色油漆能够构造的不同的直升机着陆场数量，对 $10^9 + 7$ 取模。\n", "hint": "**约束条件**\n\n- 所有给定的数值均为整数。\n- $1 \\leq T \\leq 10\\,000$\n- $1 \\leq a, b \\leq 50\\,000$\n\n**子任务**\n\n1. （3 分）$T = 1$, 且 $a, b \\leq 6$\n2. （17 分）$T = 1$, 且 $a, b \\leq 100$\n3. （21 分）$T = 1$, 且 $a, b \\leq 1\\,000$\n4. （23 分）$T = 1$, 且 $a, b \\leq 5\\,000$\n5. （26 分）$T = 1$\n6. （10 分）无额外约束条件", "locale": "zh-CN"}}}
{"pid": "P12729", "type": "P", "difficulty": 6, "samples": [["3\n()((())) (()((())))()\n))(()(((( )())))))(\n())) )))))(())", "8\n2\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "后缀数组 SA", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 最长公共括号子串", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定两个仅由左括号 `(` 和右括号 `)` 组成的字符串 $A$ 和 $B$。\n\n我们定义 $S(A, B)$ 为以下所有字符串的集合：\n\n- 是 $A$ 的子串；\n- 是 $B$ 的子串；\n- 并且是一个**合法括号序列**；\n- 集合中元素互不相同。\n\n请你判断 $S(A, B)$ 是否为空集。如果不是，请计算出 $S(A, B)$ 中最长字符串的长度。\n\n你需要解决一个输入中给出的 $T$ 个测试用例。\n\n### 合法括号序列的定义\n\n合法括号序列的定义如下：\n\n- 单独的一对括号 `()` 是合法括号序列；\n- 若 $X$ 是合法括号序列，则用括号将其包围后的 $(X)$ 也是合法括号序列；\n- 若 $X$ 和 $Y$ 都是合法括号序列，则其连接后的 $XY$ 也是合法括号序列；\n- 所有合法括号序列都只能通过以上三种规则构造。\n\n例如：`((()(())))` 和 `(())()()` 是合法括号序列，而 `(()` 和 `)((()()` 都不是合法括号序列。\n\n### 子串的定义\n\n给定一个长度为 $l$ 的字符串 $s$，以及满足 $1 \\leq i \\leq j \\leq l$ 的两个整数 $i$ 和 $j$，则 $s[i..j]$ 表示从第 $i$ 个字符开始到第 $j$ 个字符为止的连续子串。\n\n例如若 $s = \\texttt{()(()()}$，则 $s[3..5] = \\texttt{(()}$，$s[4..7] = \\texttt{()()}$，因此 `(()` 和 `()()` 都是该字符串的子串。但 `)()(` 不是其子串。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例数量。\n\n接下来 $T$ 行，每行由两个字符串 $A$ 和 $B$ 组成，中间以一个空格隔开，表示一个测试用例。\n", "outputFormat": "对于每个测试用例，按顺序输出一行：\n\n- 若 $S(A, B)$ 是空集，输出 $0$\n- 否则，输出 $S(A, B)$ 中最长字符串的长度", "hint": "**约束条件**\n\n设 $\\sum |A|$ 表示输入中所有测试用例的字符串 $A$ 的总长度之和，$\\sum |B|$ 定义相同。\n\n- $1 \\leq T \\leq 500\\,000$\n- 每个字符串 $A$ 和 $B$ 均由 `'('` 和 `')'` 构成，长度均不少于 1\n- $\\sum |A| \\leq 500\\,000$\n- $\\sum |B| \\leq 500\\,000$\n\n**子任务**\n\n1. （5 分）$\\sum |A| \\leq 100$，$\\sum |B| \\leq 100$\n2. （13 分）$\\sum |A| \\leq 1\\,000$，$\\sum |B| \\leq 1\\,000$\n3. （23 分）$\\sum |A| \\leq 10\\,000$，$\\sum |B| \\leq 10\\,000$\n4. （17 分）所有测试用例中均满足 $A = B$\n5. （42 分）无额外约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 最长公共括号子串", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "给定两个仅由左括号 `(` 和右括号 `)` 组成的字符串 $A$ 和 $B$。\n\n我们定义 $S(A, B)$ 为以下所有字符串的集合：\n\n- 是 $A$ 的子串；\n- 是 $B$ 的子串；\n- 并且是一个**合法括号序列**；\n- 集合中元素互不相同。\n\n请你判断 $S(A, B)$ 是否为空集。如果不是，请计算出 $S(A, B)$ 中最长字符串的长度。\n\n你需要解决一个输入中给出的 $T$ 个测试用例。\n\n### 合法括号序列的定义\n\n合法括号序列的定义如下：\n\n- 单独的一对括号 `()` 是合法括号序列；\n- 若 $X$ 是合法括号序列，则用括号将其包围后的 $(X)$ 也是合法括号序列；\n- 若 $X$ 和 $Y$ 都是合法括号序列，则其连接后的 $XY$ 也是合法括号序列；\n- 所有合法括号序列都只能通过以上三种规则构造。\n\n例如：`((()(())))` 和 `(())()()` 是合法括号序列，而 `(()` 和 `)((()()` 都不是合法括号序列。\n\n### 子串的定义\n\n给定一个长度为 $l$ 的字符串 $s$，以及满足 $1 \\leq i \\leq j \\leq l$ 的两个整数 $i$ 和 $j$，则 $s[i..j]$ 表示从第 $i$ 个字符开始到第 $j$ 个字符为止的连续子串。\n\n例如若 $s = \\texttt{()(()()}$，则 $s[3..5] = \\texttt{(()}$，$s[4..7] = \\texttt{()()}$，因此 `(()` 和 `()()` 都是该字符串的子串。但 `)()(` 不是其子串。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例数量。\n\n接下来 $T$ 行，每行由两个字符串 $A$ 和 $B$ 组成，中间以一个空格隔开，表示一个测试用例。\n", "outputFormat": "对于每个测试用例，按顺序输出一行：\n\n- 若 $S(A, B)$ 是空集，输出 $0$\n- 否则，输出 $S(A, B)$ 中最长字符串的长度", "hint": "**约束条件**\n\n设 $\\sum |A|$ 表示输入中所有测试用例的字符串 $A$ 的总长度之和，$\\sum |B|$ 定义相同。\n\n- $1 \\leq T \\leq 500\\,000$\n- 每个字符串 $A$ 和 $B$ 均由 `'('` 和 `')'` 构成，长度均不少于 1\n- $\\sum |A| \\leq 500\\,000$\n- $\\sum |B| \\leq 500\\,000$\n\n**子任务**\n\n1. （5 分）$\\sum |A| \\leq 100$，$\\sum |B| \\leq 100$\n2. （13 分）$\\sum |A| \\leq 1\\,000$，$\\sum |B| \\leq 1\\,000$\n3. （23 分）$\\sum |A| \\leq 10\\,000$，$\\sum |B| \\leq 10\\,000$\n4. （17 分）所有测试用例中均满足 $A = B$\n5. （42 分）无额外约束条件", "locale": "zh-CN"}}}
{"pid": "P12730", "type": "P", "difficulty": 6, "samples": [["8 5\n1 2\n2 3\n3 4\n4 5\n5 6\n4 7\n4 8\n3 2 40\n6 0 5\n8 0 5\n2 1 16\n5 1 32", "53"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "倍增", "点分治", "2021", "KOI（韩国）"], "title": "[KOI 2021 Round 2] 美食推荐", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "KOI 国有 $N$ 个城市。每个城市编号从 1 到 $N$。\n\nKOI 国的结构很特别，把城市看作图的顶点、道路看作无向边，则这个国家的结构可以表示为一个包含 $N$ 个顶点的**树**。树是一个无环的连通图。\n\nKOI 国共有 $M$ 家美食餐厅，每家餐厅编号从 1 到 $M$。某些城市可能没有餐厅，也可能有两个以上的餐厅，请特别注意这一点。\n\n第 $i$ 家餐厅（$1 \\leq i \\leq M$）位于城市 $c_i$，配送范围为距离不超过 $d_i$ 的城市，且其客户偏好度为 $g_i$。\n\n第 $i$ 家餐厅可以向从城市 $c_i$ 出发，经过至多 $d_i$ 条道路所能到达的所有城市配送。即，第 $i$ 家餐厅的配送范围为：\n\n$$\nR_i = \\{ j \\mid d(c_i, j) \\leq d_i \\}\n$$\n\n其中，$d(a, b)$ 表示从城市 $a$ 到城市 $b$ 之间的最短路径长度（即需要经过的最少道路数）。\n\n你是一名外卖推荐平台的运营者。为了避免服务重叠，你希望从 $M$ 家餐厅中选出一个子集 $S$，满足以下条件：\n\n- 对于任意城市 $p$，它不能同时被 $S$ 中的两个或多个餐厅包含在其配送范围内。也就是说，对于 $S$ 中任意不同的两家餐厅 $i$ 和 $j$，都有 $R_i \\cap R_j = \\emptyset$。\n\n请从所有满足上述条件的子集 $S$ 中，选出客户偏好度总和最大的一个，并输出该最大值。\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，中间用一个空格分隔。\n\n接下来的 $N-1$ 行中，每行包含两个整数 $a$ 和 $b$，表示城市 $a$ 和城市 $b$ 之间有一条道路相连。\n\n接下来的 $M$ 行中，每行包含三个整数 $c_i$、$d_i$ 和 $g_i$，表示第 $i$ 家餐厅所在城市、配送距离上限与客户偏好度。\n", "outputFormat": "输出一个整数，表示满足条件的餐厅集合中客户偏好度之和的最大值。\n", "hint": "**约束条件**\n\n- 所有输入数据均为整数。\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i$（$1 \\leq i \\leq M$），满足 $0 \\leq d_i \\leq N - 1$，$1 \\leq g_i \\leq 10^9$\n\n**子任务**\n\n1. （9 分）对于 $1 \\leq i \\leq N - 1$，城市 $i$ 与城市 $i+1$ 之间有一条道路相连。\n2. （11 分）$N, M \\leq 20$\n3. （17 分）$N, M \\leq 2\\,000$\n4. （10 分）$N \\leq 2\\,000$\n5. （8 分）对于 $2 \\leq i \\leq N$，城市 $\\lfloor i/2 \\rfloor$ 与城市 $i$ 之间有一条道路相连。\n6. （12 分）图中度数大于等于 3 的顶点最多只有一个。\n7. （33 分）无额外约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KOI 2021 Round 2] 美食推荐", "background": "试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。\n\n按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。", "description": "KOI 国有 $N$ 个城市。每个城市编号从 1 到 $N$。\n\nKOI 国的结构很特别，把城市看作图的顶点、道路看作无向边，则这个国家的结构可以表示为一个包含 $N$ 个顶点的**树**。树是一个无环的连通图。\n\nKOI 国共有 $M$ 家美食餐厅，每家餐厅编号从 1 到 $M$。某些城市可能没有餐厅，也可能有两个以上的餐厅，请特别注意这一点。\n\n第 $i$ 家餐厅（$1 \\leq i \\leq M$）位于城市 $c_i$，配送范围为距离不超过 $d_i$ 的城市，且其客户偏好度为 $g_i$。\n\n第 $i$ 家餐厅可以向从城市 $c_i$ 出发，经过至多 $d_i$ 条道路所能到达的所有城市配送。即，第 $i$ 家餐厅的配送范围为：\n\n$$\nR_i = \\{ j \\mid d(c_i, j) \\leq d_i \\}\n$$\n\n其中，$d(a, b)$ 表示从城市 $a$ 到城市 $b$ 之间的最短路径长度（即需要经过的最少道路数）。\n\n你是一名外卖推荐平台的运营者。为了避免服务重叠，你希望从 $M$ 家餐厅中选出一个子集 $S$，满足以下条件：\n\n- 对于任意城市 $p$，它不能同时被 $S$ 中的两个或多个餐厅包含在其配送范围内。也就是说，对于 $S$ 中任意不同的两家餐厅 $i$ 和 $j$，都有 $R_i \\cap R_j = \\emptyset$。\n\n请从所有满足上述条件的子集 $S$ 中，选出客户偏好度总和最大的一个，并输出该最大值。\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，中间用一个空格分隔。\n\n接下来的 $N-1$ 行中，每行包含两个整数 $a$ 和 $b$，表示城市 $a$ 和城市 $b$ 之间有一条道路相连。\n\n接下来的 $M$ 行中，每行包含三个整数 $c_i$、$d_i$ 和 $g_i$，表示第 $i$ 家餐厅所在城市、配送距离上限与客户偏好度。\n", "outputFormat": "输出一个整数，表示满足条件的餐厅集合中客户偏好度之和的最大值。\n", "hint": "**约束条件**\n\n- 所有输入数据均为整数。\n- $1 \\leq N \\leq 10^5$\n- $1 \\leq M \\leq 10^5$\n- 对于所有 $i$（$1 \\leq i \\leq M$），满足 $0 \\leq d_i \\leq N - 1$，$1 \\leq g_i \\leq 10^9$\n\n**子任务**\n\n1. （9 分）对于 $1 \\leq i \\leq N - 1$，城市 $i$ 与城市 $i+1$ 之间有一条道路相连。\n2. （11 分）$N, M \\leq 20$\n3. （17 分）$N, M \\leq 2\\,000$\n4. （10 分）$N \\leq 2\\,000$\n5. （8 分）对于 $2 \\leq i \\leq N$，城市 $\\lfloor i/2 \\rfloor$ 与城市 $i$ 之间有一条道路相连。\n6. （12 分）图中度数大于等于 3 的顶点最多只有一个。\n7. （33 分）无额外约束条件。", "locale": "zh-CN"}}}
