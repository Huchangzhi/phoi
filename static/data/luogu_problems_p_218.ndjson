{"pid": "P5409", "type": "P", "difficulty": 7, "samples": [["3 2\n", "0 0 1 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["Stirling 数"], "title": "第一类斯特林数·列", "background": "模板题，无背景。\n\n**验题人提示：程序运行时间受评测压力影响较大，评测高峰可能会被卡常。**", "description": "第一类斯特林数 $\\begin{bmatrix}n\\\\ m\\end{bmatrix}$ 表示将 $n$ 个**不同**元素构成 $m$ 个圆排列的数目。\n\n给定 $n,k$，对于所有的整数 $i\\in[0,n]$，你要求出 $\\begin{bmatrix}i\\\\ k\\end{bmatrix}$。\n\n由于答案会非常大，所以你的输出需要对 $167772161$（$2^{25}\\times 5+1$，是一个质数）取模。", "inputFormat": "一行两个正整数 $n,k$，意义见题目描述。", "outputFormat": "共一行 $n+1$ 个非负整数。\n\n你需要按顺序输出 $\\begin{bmatrix}0\\\\ k\\end{bmatrix},\\begin{bmatrix}1\\\\ k\\end{bmatrix},\\begin{bmatrix}2\\\\ k\\end{bmatrix},\\dots,\\begin{bmatrix}n\\\\ k\\end{bmatrix}$ 的值。", "hint": "对于 $20\\%$ 的数据，$n\\leqslant 1000$。\n\n对于 $100\\%$ 的数据，$1\\leqslant k,n< 131072$。", "locale": "zh-CN", "translations": {"en": {"title": "Stirling Numbers of the First Kind · Sequence", "background": "This is a template problem, with no background.\n\n**Checker’s note: The program running time is greatly affected by judging load, and it may get time-limited during peak judging periods.**", "description": "The Stirling number of the first kind $\\begin{bmatrix}n\\\\ m\\end{bmatrix}$ represents the number of ways to arrange $n$ **distinct** elements into $m$ circular permutations.\n\nGiven $n, k$, for every integer $i \\in [0, n]$, you need to compute $\\begin{bmatrix}i\\\\ k\\end{bmatrix}$.\n\nSince the answer can be very large, you need to output the result modulo $167772161$ ($2^{25}\\times 5+1$, which is a prime).", "inputFormat": "One line with two positive integers $n, k$, as described in the statement.", "outputFormat": "One line with $n+1$ non-negative integers.\n\nOutput, in order, the values of $\\begin{bmatrix}0\\\\ k\\end{bmatrix}, \\begin{bmatrix}1\\\\ k\\end{bmatrix}, \\begin{bmatrix}2\\\\ k\\end{bmatrix}, \\dots, \\begin{bmatrix}n\\\\ k\\end{bmatrix}$.", "hint": "For $20\\%$ of the testdata, $n \\leqslant 1000$.\n\nFor $100\\%$ of the testdata, $1 \\leqslant k, n < 131072$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "第一类斯特林数·列", "background": "模板题，无背景。\n\n**验题人提示：程序运行时间受评测压力影响较大，评测高峰可能会被卡常。**", "description": "第一类斯特林数 $\\begin{bmatrix}n\\\\ m\\end{bmatrix}$ 表示将 $n$ 个**不同**元素构成 $m$ 个圆排列的数目。\n\n给定 $n,k$，对于所有的整数 $i\\in[0,n]$，你要求出 $\\begin{bmatrix}i\\\\ k\\end{bmatrix}$。\n\n由于答案会非常大，所以你的输出需要对 $167772161$（$2^{25}\\times 5+1$，是一个质数）取模。", "inputFormat": "一行两个正整数 $n,k$，意义见题目描述。", "outputFormat": "共一行 $n+1$ 个非负整数。\n\n你需要按顺序输出 $\\begin{bmatrix}0\\\\ k\\end{bmatrix},\\begin{bmatrix}1\\\\ k\\end{bmatrix},\\begin{bmatrix}2\\\\ k\\end{bmatrix},\\dots,\\begin{bmatrix}n\\\\ k\\end{bmatrix}$ 的值。", "hint": "对于 $20\\%$ 的数据，$n\\leqslant 1000$。\n\n对于 $100\\%$ 的数据，$1\\leqslant k,n< 131072$。", "locale": "zh-CN"}}}
{"pid": "P5410", "type": "P", "difficulty": 5, "samples": [["aaaabaa\naaaaa", "6\n21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "Z 函数", "模板题"], "title": "【模板】扩展 KMP / exKMP（Z 函数）", "background": "", "description": "给定两个字符串 $a,b$，你要求出两个数组：\n\n- $b$ 的 $z$ 函数数组 $z$，即 $b$ 与 $b$ 的每一个后缀的 LCP 长度。\n- $b$ 与 $a$ 的每一个后缀的 LCP 长度数组 $p$。\n\n对于一个长度为 $n$ 的数组 $a$，设其权值为 $\\operatorname{xor}_{i=1}^n i \\times (a_i + 1)$。", "inputFormat": "两行两个字符串 $a,b$。", "outputFormat": "第一行一个整数，表示 $z$ 的权值。\n\n第二行一个整数，表示 $p$ 的权值。", "hint": "**样例解释：**\n\n$z = \\{5\\ 4\\ 3\\ 2\\ 1\\}$，$p = \\{4\\ 3\\ 2\\ 1\\ 0\\ 2\\ 1\\}$。\n\n---\n\n**数据范围：**\n\n对于第一个测试点，$|a|,|b| \\le 2 \\times 10^3$。\n\n对于第二个测试点，$|a|,|b| \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le |a|,|b| \\le 2 \\times 10^7$，所有字符均为小写字母。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Extended KMP / exKMP (Z Function).", "background": "", "description": "Given two strings $a, b$, you need to find two arrays:\n\n- The $z$ function array $z$ of $b$, that is, the LCP length between $b$ and each suffix of $b$.\n- The LCP length array $p$ between $b$ and each suffix of $a$.\n\nFor an array $a$ of length $n$, define its weight as $\\operatorname{xor}_{i=1}^n i \\times (a_i + 1)$.", "inputFormat": "Two lines, containing two strings $a, b$.", "outputFormat": "The first line contains one integer, the weight of $z$.\n\nThe second line contains one integer, the weight of $p$.", "hint": "**Sample explanation:**\n\n$z = \\{5\\ 4\\ 3\\ 2\\ 1\\}$, $p = \\{4\\ 3\\ 2\\ 1\\ 0\\ 2\\ 1\\}$.\n\n---\n\n**Constraints:**\n\nFor the first test point, $|a|, |b| \\le 2 \\times 10^3$.\n\nFor the second test point, $|a|, |b| \\le 2 \\times 10^5$.\n\nFor $100\\%$ of the data, $1 \\le |a|, |b| \\le 2 \\times 10^7$, and all characters are lowercase letters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】扩展 KMP / exKMP（Z 函数）", "background": "", "description": "给定两个字符串 $a,b$，你要求出两个数组：\n\n- $b$ 的 $z$ 函数数组 $z$，即 $b$ 与 $b$ 的每一个后缀的 LCP 长度。\n- $b$ 与 $a$ 的每一个后缀的 LCP 长度数组 $p$。\n\n对于一个长度为 $n$ 的数组 $a$，设其权值为 $\\operatorname{xor}_{i=1}^n i \\times (a_i + 1)$。", "inputFormat": "两行两个字符串 $a,b$。", "outputFormat": "第一行一个整数，表示 $z$ 的权值。\n\n第二行一个整数，表示 $p$ 的权值。", "hint": "**样例解释：**\n\n$z = \\{5\\ 4\\ 3\\ 2\\ 1\\}$，$p = \\{4\\ 3\\ 2\\ 1\\ 0\\ 2\\ 1\\}$。\n\n---\n\n**数据范围：**\n\n对于第一个测试点，$|a|,|b| \\le 2 \\times 10^3$。\n\n对于第二个测试点，$|a|,|b| \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le |a|,|b| \\le 2 \\times 10^7$，所有字符均为小写字母。", "locale": "zh-CN"}}}
{"pid": "P5411", "type": "P", "difficulty": 7, "samples": [["6 2\n1 2\n2 3\n1 4\n4 5\n4 6\n6\n1\n2\n3\n4\n5\n6", "9\n4\n4\n9\n9\n9"], ["10 2\n1 2\n1 3\n2 4\n4 5\n4 6\n2 7\n2 8\n7 9\n7 10\n10\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10", "16\n16\n4\n16\n9\n9\n16\n16\n9\n9"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "各省省选", "陕西"], "title": "[SNOI2019] 网络", "background": "", "description": "有 $n$ 个数据中心，编号为 $1,2,\\cdots,n$。它们被 $n-1$ 条光缆连通，形成一棵树。\n\n每条光缆传输数据时有 $1$ 单位时间的延迟，两个数据中心之间的延迟为连接它们的光缆的延迟之和。\n\n现在要在这 $n$ 个数据中心中选若干个作为通讯站，要求任意两个通讯站之间的延迟不超过 $d$。设选出的通讯站为 ${w_1,w_2,……,w_k}$，则通讯总延迟为这 $k$ 个通讯站两两之间的延迟之和。\n\n现在有 $q$ 次询问，每次选定一个数据中心 $u$，你需要求出：如果 $u$ 是一个通讯站，最大可能的通讯总延迟是多少。", "inputFormat": "第一行两个自然数 $n,d$ ，分别表示数据中心的个数和两个通讯站之间最大允许的延迟。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$ 表示 $u$ 和 $v$ 之间有一条光缆。\n\n接下来一行一个正整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行一个正整数 $u$ 表示询问中选定的通讯站。", "outputFormat": "输出共 $q$ 行，每行一个整数表示该次询问的答案。", "hint": "对于所有数据，$1 \\leq n \\leq 5\\times10^5$，$0 \\leq d<n$，$0 \\leq q \\leq 10$。\n\n对于10%的数据，$n \\leq 15$；\n\n对于另外10%的数据，$d=n-1$；\n\n对于另外15%的数据，$n \\leq 300$；\n\n对于另外15%的数据，$n \\leq 5000$；\n\n对于另外20%的数据，$n \\leq 10^5$；\n\n对于余下30%的数据，无特殊限制。", "locale": "zh-CN", "translations": {"en": {"title": "[SNOI2019] Network", "background": "", "description": "There are $n$ data centers, numbered $1,2,\\cdots,n$. They are connected by $n-1$ optical cables, forming a tree.\n\nEach optical cable has a delay of $1$ unit time when transmitting data. The delay between two data centers is the sum of the delays of the optical cables along the path connecting them.\n\nNow you need to choose some of these $n$ data centers as communication stations, such that the delay between any two communication stations does not exceed $d$. Let the selected communication stations be ${w_1,w_2,……,w_k}$. Then the total communication delay is the sum of delays between every pair of these $k$ communication stations.\n\nThere are $q$ queries. In each query, a data center $u$ is specified. You need to find: if $u$ must be a communication station, what is the maximum possible total communication delay.", "inputFormat": "The first line contains two natural numbers $n,d$, representing the number of data centers and the maximum allowed delay between any two communication stations.\n\nThe next $n-1$ lines each contain two positive integers $u,v$, indicating that there is an optical cable between $u$ and $v$.\n\nThe next line contains a positive integer $q$, representing the number of queries.\n\nThe next $q$ lines each contain one positive integer $u$, representing the communication station specified in the query.", "outputFormat": "Output $q$ lines in total. Each line contains one integer, representing the answer to that query.", "hint": "For all data, $1 \\leq n \\leq 5\\times10^5$, $0 \\leq d<n$, $0 \\leq q \\leq 10$.\n\nFor $10\\%$ of the data, $n \\leq 15$.\n\nFor another $10\\%$ of the data, $d=n-1$.\n\nFor another $15\\%$ of the data, $n \\leq 300$.\n\nFor another $15\\%$ of the data, $n \\leq 5000$.\n\nFor another $20\\%$ of the data, $n \\leq 10^5$.\n\nFor the remaining $30\\%$ of the data, there are no special constraints.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SNOI2019] 网络", "background": "", "description": "有 $n$ 个数据中心，编号为 $1,2,\\cdots,n$。它们被 $n-1$ 条光缆连通，形成一棵树。\n\n每条光缆传输数据时有 $1$ 单位时间的延迟，两个数据中心之间的延迟为连接它们的光缆的延迟之和。\n\n现在要在这 $n$ 个数据中心中选若干个作为通讯站，要求任意两个通讯站之间的延迟不超过 $d$。设选出的通讯站为 ${w_1,w_2,……,w_k}$，则通讯总延迟为这 $k$ 个通讯站两两之间的延迟之和。\n\n现在有 $q$ 次询问，每次选定一个数据中心 $u$，你需要求出：如果 $u$ 是一个通讯站，最大可能的通讯总延迟是多少。", "inputFormat": "第一行两个自然数 $n,d$ ，分别表示数据中心的个数和两个通讯站之间最大允许的延迟。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$ 表示 $u$ 和 $v$ 之间有一条光缆。\n\n接下来一行一个正整数 $q$ 表示询问次数。\n\n接下来 $q$ 行每行一个正整数 $u$ 表示询问中选定的通讯站。", "outputFormat": "输出共 $q$ 行，每行一个整数表示该次询问的答案。", "hint": "对于所有数据，$1 \\leq n \\leq 5\\times10^5$，$0 \\leq d<n$，$0 \\leq q \\leq 10$。\n\n对于10%的数据，$n \\leq 15$；\n\n对于另外10%的数据，$d=n-1$；\n\n对于另外15%的数据，$n \\leq 300$；\n\n对于另外15%的数据，$n \\leq 5000$；\n\n对于另外20%的数据，$n \\leq 10^5$；\n\n对于余下30%的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P5412", "type": "P", "difficulty": 2, "samples": [["1\n5\n1 0 1 0 1\n120.2 130.3 140.4 150.5 160.6\n", "130.3 150.5\n120.2 140.4 160.6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["模拟", "2019", "各省省选", "排序", "云南"], "title": "[YNOI2019] 排队", "background": "", "description": "小明所在的班级要举办一场课外活动，在活动开始之前老师告诉小明：“需要把男女生分成两队，并且每一队都要按照身高从矮到高进行排序”。但是由于小明的马虎，没有把老师的安排转达给同学，导致全班同学已经排成了一列。活动马上要开始了，小明的老师对此很困扰，你能帮帮她吗？\n", "inputFormat": "每个输入文件包含多组数据。\n\n输入文件的第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据包含 $3$ 行；\n\n第一行包含一个整数 $n$，代表班级的总人数，其中 $(0 < n \\leq 2\\times 10^{3})$；\n\n第二行包含 $n$ 个整数，它们之间用一个空格隔开，代表已经排成的一列中每一位同学的性别。每一位整数只取 $0$ 或 $1$（$0$ 表示女生，$1$ 表示男生）；\n\n第三行包含 $n$ 个浮点数，它们之间用一个空格隔开，与第二行中的数据一一对应，代表已经排成的一列中每一位同学的身高 $h(100 \\leq h \\leq 200)$。", "outputFormat": "输出文件包含 $2T$ 行，分别对应 $T$ 组数据的答案，每组答案的格式如下：\n\n每组答案包含 $2$ 行；\n\n第一行按照从小到大的顺序输出所有女生的身高；\n\n第二行按照从小到大的顺序输出所有男生的身高。\n\n注意在输出身高时，请按照原来的身高保留对应的小数点位数。", "hint": "对于 $60\\%$ 的数据：$0 < n \\leq 10^{2}$，$100 \\leq h \\leq 200$。\n\n对于 $80\\%$ 的数据：$0 < n \\leq 10^{3}$ ，$100 \\leq h \\leq 200$。\n\n对于 $100\\%$ 的数据：$0 < n \\leq 2\\times 10^{3}$，$100 \\leq h \\leq 200$，$T\\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "[YNOI2019] Queueing", "background": "", "description": "Xiaoming’s class is going to hold an extracurricular activity. Before the activity starts, the teacher tells Xiaoming: “You need to split the girls and boys into two teams, and each team must be sorted by height from short to tall.” However, because Xiaoming was careless and did not pass the arrangement to his classmates, the whole class has already lined up in a single row. The activity is about to start, and Xiaoming’s teacher is troubled by this. Can you help her?", "inputFormat": "Each input file contains multiple test cases.\n\nThe first line of the input contains a positive integer $T$, which denotes the number of test cases in this input file.\n\nThen follow $T$ test cases. The format of each test case is as follows:\n\nEach test case consists of $3$ lines.\n\nThe first line contains an integer $n$, representing the total number of students in the class, where $(0 < n \\leq 2\\times 10^{3})$.\n\nThe second line contains $n$ integers separated by single spaces, representing the gender of each student in the already formed row. Each integer is either $0$ or $1$ ($0$ means girl, $1$ means boy).\n\nThe third line contains $n$ floating-point numbers separated by single spaces, corresponding one-to-one with the second line, representing each student’s height $h(100 \\leq h \\leq 200)$ in the already formed row.", "outputFormat": "The output file contains $2T$ lines, corresponding to the answers for the $T$ test cases. The format of each test case’s output is as follows:\n\nEach test case’s output consists of $2$ lines.\n\nThe first line outputs the heights of all girls in increasing order.\n\nThe second line outputs the heights of all boys in increasing order.\n\nNote that when outputting heights, please keep the same number of digits after the decimal point as in the original height.", "hint": "For $60\\%$ of the testdata: $0 < n \\leq 10^{2}$, $100 \\leq h \\leq 200$.\n\nFor $80\\%$ of the testdata: $0 < n \\leq 10^{3}$, $100 \\leq h \\leq 200$.\n\nFor $100\\%$ of the testdata: $0 < n \\leq 2\\times 10^{3}$, $100 \\leq h \\leq 200$, $T\\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YNOI2019] 排队", "background": "", "description": "小明所在的班级要举办一场课外活动，在活动开始之前老师告诉小明：“需要把男女生分成两队，并且每一队都要按照身高从矮到高进行排序”。但是由于小明的马虎，没有把老师的安排转达给同学，导致全班同学已经排成了一列。活动马上要开始了，小明的老师对此很困扰，你能帮帮她吗？\n", "inputFormat": "每个输入文件包含多组数据。\n\n输入文件的第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据包含 $3$ 行；\n\n第一行包含一个整数 $n$，代表班级的总人数，其中 $(0 < n \\leq 2\\times 10^{3})$；\n\n第二行包含 $n$ 个整数，它们之间用一个空格隔开，代表已经排成的一列中每一位同学的性别。每一位整数只取 $0$ 或 $1$（$0$ 表示女生，$1$ 表示男生）；\n\n第三行包含 $n$ 个浮点数，它们之间用一个空格隔开，与第二行中的数据一一对应，代表已经排成的一列中每一位同学的身高 $h(100 \\leq h \\leq 200)$。", "outputFormat": "输出文件包含 $2T$ 行，分别对应 $T$ 组数据的答案，每组答案的格式如下：\n\n每组答案包含 $2$ 行；\n\n第一行按照从小到大的顺序输出所有女生的身高；\n\n第二行按照从小到大的顺序输出所有男生的身高。\n\n注意在输出身高时，请按照原来的身高保留对应的小数点位数。", "hint": "对于 $60\\%$ 的数据：$0 < n \\leq 10^{2}$，$100 \\leq h \\leq 200$。\n\n对于 $80\\%$ 的数据：$0 < n \\leq 10^{3}$ ，$100 \\leq h \\leq 200$。\n\n对于 $100\\%$ 的数据：$0 < n \\leq 2\\times 10^{3}$，$100 \\leq h \\leq 200$，$T\\le 5$。", "locale": "zh-CN"}}}
{"pid": "P5413", "type": "P", "difficulty": 3, "samples": [["1\n2\n5 3 1\n1 1 1\n", "4.6904157598"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2019", "各省省选", "Special Judge", "云南"], "title": "[YNOI2019] 骑单车", "background": null, "description": "小明每天早晨上课都需要骑着单车经过 $n$ 段路，第i段路的长度为 $w_i (m)$，限速为 $s_i (m/s)$（在路上骑行的速度不能超过限速），加速度的绝对值最大为 $a_i (m/s^{2})$（可以加速也可以减速）。初始速度为 $0(m/s)$，你的任务是计算小明通过这 $n$ 段路的最短时间。", "inputFormat": "**本题包含多组数据。**\n\n第一行，包含一个正整数 $T$，代表所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据包含 $n+1$ 行；\n\n第一行包含一个正整数 $n$，代表共有 $n$ 段路；\n\n接下来的 $n$ 行，每一行包含三个正整数 $w_i,s_i,a_i$，分别代表第 $i$ 段路的长度、限速和最大加速度的绝对值。", "outputFormat": "输出包含 $T$ 行，分别对应 $T$ 组数据的答案，即小明通过 $n$ 条道路所需要的最短时间（只要你的答案和标准答案的绝对误差在 $10^{-5}$ 以内就算通过）。", "hint": "对于 $60\\%$ 的数据：$0 < n \\le60$；\n\n对于 $80\\%$ 的数据：$0 < n \\le 80$；\n\n对于 $100\\%$ 的数据：$0 < n \\le10^{2}$，$w_i,s_i,a_i ≤ 10$。", "locale": "zh-CN", "translations": {"en": {"title": "[YNOI2019] Cycling", "background": "", "description": "Xiaoming needs to ride a bicycle through $n$ road segments every morning to get to class. The length of the $i$-th segment is $w_i (m)$, and the speed limit is $s_i (m/s)$ (the riding speed on the road cannot exceed the speed limit). The maximum absolute value of acceleration is $a_i (m/s^{2})$ (he can either speed up or slow down). The initial speed is $0 (m/s)$. Your task is to compute the minimum time for Xiaoming to pass these $n$ segments.", "inputFormat": "**This problem contains multiple test cases.**\n\nThe first line contains a positive integer $T$, representing the number of test cases.\n\nThen follow $T$ test cases, each in the following format:\n\nEach test case contains $n+1$ lines.\n\nThe first line contains a positive integer $n$, representing that there are $n$ road segments.\n\nThe next $n$ lines each contain three positive integers $w_i, s_i, a_i$, representing the length, the speed limit, and the maximum absolute acceleration of the $i$-th segment, respectively.", "outputFormat": "Output $T$ lines, corresponding to the answers for the $T$ test cases. That is, the minimum time Xiaoming needs to pass the $n$ road segments (your answer is accepted as long as the absolute error from the standard answer is within $10^{-5}$).", "hint": "For $60\\%$ of the testdata: $0 < n \\le 60$.\n\nFor $80\\%$ of the testdata: $0 < n \\le 80$.\n\nFor $100\\%$ of the testdata: $0 < n \\le 10^{2}, w_i, s_i, a_i \\le 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YNOI2019] 骑单车", "background": null, "description": "小明每天早晨上课都需要骑着单车经过 $n$ 段路，第i段路的长度为 $w_i (m)$，限速为 $s_i (m/s)$（在路上骑行的速度不能超过限速），加速度的绝对值最大为 $a_i (m/s^{2})$（可以加速也可以减速）。初始速度为 $0(m/s)$，你的任务是计算小明通过这 $n$ 段路的最短时间。", "inputFormat": "**本题包含多组数据。**\n\n第一行，包含一个正整数 $T$，代表所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据包含 $n+1$ 行；\n\n第一行包含一个正整数 $n$，代表共有 $n$ 段路；\n\n接下来的 $n$ 行，每一行包含三个正整数 $w_i,s_i,a_i$，分别代表第 $i$ 段路的长度、限速和最大加速度的绝对值。", "outputFormat": "输出包含 $T$ 行，分别对应 $T$ 组数据的答案，即小明通过 $n$ 条道路所需要的最短时间（只要你的答案和标准答案的绝对误差在 $10^{-5}$ 以内就算通过）。", "hint": "对于 $60\\%$ 的数据：$0 < n \\le60$；\n\n对于 $80\\%$ 的数据：$0 < n \\le 80$；\n\n对于 $100\\%$ 的数据：$0 < n \\le10^{2}$，$w_i,s_i,a_i ≤ 10$。", "locale": "zh-CN"}}}
{"pid": "P5414", "type": "P", "difficulty": 3, "samples": [["1\n4\n7 1 2 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2019", "各省省选", "云南"], "title": "[YNOI2019] 排序", "background": null, "description": "对于一个数列 $\\{7, 1, 2, 3\\}$ 进行排序，我们可以把 $7$ 从头移动到尾。但是这个操作的成本是 $7$，并不是最佳的。最佳的排序方式是将连续的 $1,2,3$ 移动到 $7$ 的前面。这样的话，总的操作成本就是 $1+2+3=6$，比之前的成本 $7$ 要小。\n\n你的任务是，对于一个给定的数列，输出对这个数列进行排序的最小成本。", "inputFormat": "每个输入文件包含多组数据。\n\n输入文件的第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据包含 $2$ 行；\n\n第一行包含一个正整数 $n$，代表数列中元素的个数，其中 $0 < n \\leq 10^2$；\n\n第二行包含 $n$ 个整数，两个数之间以一个空格隔开，代表数列中的元素 $k_i$，其中$1 \\leq k_i \\leq 10^{7}$。", "outputFormat": "输出文件包含 $T$ 行，分别对应 $T$ 组数据的答案，即对数列进行排序的最小成本。", "hint": "对于 $60\\%$ 的数据：$0 < n \\leq 60$，$1 \\leq k_i \\leq 10^{7}$\n\n对于 $80\\%$ 的数据：$0 < n \\leq 80$，$1 \\leq k_i \\leq 10^{7}$\n\n对于 $100\\%$ 的数据：$0 < n \\leq 10^2$，$1 \\leq k_i \\leq 10^{7}$，$0 < T \\leq 10$", "locale": "zh-CN", "translations": {"en": {"title": "[YNOI2019] Sorting", "background": "", "description": "To sort a sequence $\\{7, 1, 2, 3\\}$, we can move $7$ from the beginning to the end. However, the cost of this operation is $7$, which is not optimal. The optimal way is to move the consecutive segment $1,2,3$ to the front of $7$. In this case, the total cost is $1+2+3=6$, which is smaller than the previous cost $7$.\n\nYour task is: for a given sequence, output the minimum cost to sort this sequence.", "inputFormat": "Each input file contains multiple test cases.\n\nThe first line contains a positive integer $T$, which represents the number of test cases in the input file.\n\nThen follow $T$ test cases, each in the following format:\n\nEach test case contains $2$ lines.\n\nThe first line contains a positive integer $n$, which represents the number of elements in the sequence, where $0 < n \\leq 10^2$.\n\nThe second line contains $n$ integers separated by a single space, representing the elements $k_i$ of the sequence, where $1 \\leq k_i \\leq 10^{7}$.", "outputFormat": "The output file contains $T$ lines, each corresponding to the answer for one test case, i.e., the minimum cost to sort the sequence.", "hint": "Constraints:\n\nFor $60\\%$ of the testdata: $0 < n \\leq 60$, $1 \\leq k_i \\leq 10^{7}$.\n\nFor $80\\%$ of the testdata: $0 < n \\leq 80$, $1 \\leq k_i \\leq 10^{7}$.\n\nFor $100\\%$ of the testdata: $0 < n \\leq 10^2$, $1 \\leq k_i \\leq 10^{7}$, $0 < T \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YNOI2019] 排序", "background": null, "description": "对于一个数列 $\\{7, 1, 2, 3\\}$ 进行排序，我们可以把 $7$ 从头移动到尾。但是这个操作的成本是 $7$，并不是最佳的。最佳的排序方式是将连续的 $1,2,3$ 移动到 $7$ 的前面。这样的话，总的操作成本就是 $1+2+3=6$，比之前的成本 $7$ 要小。\n\n你的任务是，对于一个给定的数列，输出对这个数列进行排序的最小成本。", "inputFormat": "每个输入文件包含多组数据。\n\n输入文件的第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据包含 $2$ 行；\n\n第一行包含一个正整数 $n$，代表数列中元素的个数，其中 $0 < n \\leq 10^2$；\n\n第二行包含 $n$ 个整数，两个数之间以一个空格隔开，代表数列中的元素 $k_i$，其中$1 \\leq k_i \\leq 10^{7}$。", "outputFormat": "输出文件包含 $T$ 行，分别对应 $T$ 组数据的答案，即对数列进行排序的最小成本。", "hint": "对于 $60\\%$ 的数据：$0 < n \\leq 60$，$1 \\leq k_i \\leq 10^{7}$\n\n对于 $80\\%$ 的数据：$0 < n \\leq 80$，$1 \\leq k_i \\leq 10^{7}$\n\n对于 $100\\%$ 的数据：$0 < n \\leq 10^2$，$1 \\leq k_i \\leq 10^{7}$，$0 < T \\leq 10$", "locale": "zh-CN"}}}
{"pid": "P5415", "type": "P", "difficulty": 6, "samples": [["3\n4 1 1\n5 1 5\n5 2 1\n", "0.250000\n0.000000\n0.217626"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "2019", "各省省选", "云南", "概率论", "高斯消元"], "title": "[YNOI2019] 游戏", "background": null, "description": "在经历了漫长的烧脑之旅后，相信同学们的思维已经充分地活跃起来了。最后，让我们玩一个游戏来结束这次充满乐趣和挑战的冒险之旅！\n\n有 $n$ 个人在玩游戏，游戏规则如下：\n\n在游戏开始之前，将这 $n$ 个人按照 $1\\sim n$ 的顺序唯一编号。游戏开始后，每一轮只允许 $4$ 个人进入游戏，其他人按照各自的编号组成等待队列，等待参加游戏。\n\n游戏中每个人赢得比赛的机会是同等的，游戏举办多轮，每一轮的获胜者可以继续参加下一轮的比赛，输家将根据本轮比赛开始之前的顺序排在等待队列的末尾（如果本轮的输家中有人赢得了上一轮比赛，那么他将在等待队列中排在本轮所有输家的前面）。\n\n例如，在某一轮比赛开始之前小明排在小红和小刚前面，如果在该轮比赛中小明、小红和小刚都没有赢，那么小明、小红和小刚将退出比赛排在等待队列的末尾，但是小明将会继续按照比赛开始之前的顺序排在小红和小刚前面。存在的特殊情况是，如果小刚在这轮比赛之前赢得了上一轮比赛，那么小刚将在等待序列中排在小明和小红的前面。\n\n比赛中，如果有人连续赢了 $m$ 次，那么他就是这个游戏最后的赢家。你的任务是，预测第 $k$ 个人成为最终赢家的可能。", "inputFormat": "**输入包含多组数据。**\n\n第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据仅一行，包含三个整数 $n,m,k$。", "outputFormat": "输出包含 $T$ 行，分别对应 $T$ 组数据的答案，即第 $k$ 个人成为最终赢家的可能（结果保留 $6$ 位小数）。", "hint": "#### 数据规模与约定\n- 对于 $30\\%$ 的数据：保证 $ n \\le 5$，$m \\le 5$。\n- 对于 $60\\%$ 的数据：保证 $n \\le 8$，$m \\le 8$。\n- 对于 $100\\%$ 的数据：保证 $4 \\le n \\le 10$，$0 < m \\le 10$，$1\\le k \\le n$，除样例外 $T=1$。", "locale": "zh-CN", "translations": {"en": {"title": "[YNOI2019] Game", "background": "", "description": "After a long brain-burning journey, your minds should now be fully active. Finally, let us play a game to end this adventure full of fun and challenges.\n\nThere are $n$ people playing a game. The rules are as follows.\n\nBefore the game starts, the $n$ people are uniquely numbered from $1$ to $n$. After the game starts, in each round only $4$ people are allowed to play, and all others form a waiting queue in the order of their numbers, waiting to join the game.\n\nIn the game, everyone has an equal chance to win. The game is held over multiple rounds. In each round, the winner may continue to participate in the next round, while the losers will be placed at the end of the waiting queue according to their order before the start of this round (if any of the losers in this round won the previous round, then that person will be placed in the waiting queue in front of all losers of this round).\n\nFor example, before a certain round starts, Xiaoming is ahead of Xiaohong and Xiaogang. If in that round Xiaoming, Xiaohong, and Xiaogang all do not win, then they will leave the game and be placed at the end of the waiting queue, and Xiaoming will still be ahead of Xiaohong and Xiaogang according to their order before the round starts. A special case is that if Xiaogang won the previous round before this round, then Xiaogang will be placed ahead of Xiaoming and Xiaohong in the waiting queue.\n\nDuring the game, if someone wins consecutively for $m$ times, then they are the final winner of the game. Your task is to predict the probability that person $k$ becomes the final winner.", "inputFormat": "**The input contains multiple test cases.**\n\nThe first line contains a positive integer $T$, representing the number of test cases in the input file.\n\nNext come $T$ test cases, each in the following format.\n\nEach test case consists of one line containing three integers $n, m, k$.", "outputFormat": "Output $T$ lines, corresponding to the answers for the $T$ test cases, i.e. the probability that person $k$ becomes the final winner (rounded to $6$ decimal places).", "hint": "#### Constraints\n- For $30\\%$ of the testdata: $n \\le 5$, $m \\le 5$.\n- For $60\\%$ of the testdata: $n \\le 8$, $m \\le 8$.\n- For $100\\%$ of the testdata: $4 \\le n \\le 10$, $0 < m \\le 10$, $1 \\le k \\le n$, and except for the samples, $T = 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YNOI2019] 游戏", "background": null, "description": "在经历了漫长的烧脑之旅后，相信同学们的思维已经充分地活跃起来了。最后，让我们玩一个游戏来结束这次充满乐趣和挑战的冒险之旅！\n\n有 $n$ 个人在玩游戏，游戏规则如下：\n\n在游戏开始之前，将这 $n$ 个人按照 $1\\sim n$ 的顺序唯一编号。游戏开始后，每一轮只允许 $4$ 个人进入游戏，其他人按照各自的编号组成等待队列，等待参加游戏。\n\n游戏中每个人赢得比赛的机会是同等的，游戏举办多轮，每一轮的获胜者可以继续参加下一轮的比赛，输家将根据本轮比赛开始之前的顺序排在等待队列的末尾（如果本轮的输家中有人赢得了上一轮比赛，那么他将在等待队列中排在本轮所有输家的前面）。\n\n例如，在某一轮比赛开始之前小明排在小红和小刚前面，如果在该轮比赛中小明、小红和小刚都没有赢，那么小明、小红和小刚将退出比赛排在等待队列的末尾，但是小明将会继续按照比赛开始之前的顺序排在小红和小刚前面。存在的特殊情况是，如果小刚在这轮比赛之前赢得了上一轮比赛，那么小刚将在等待序列中排在小明和小红的前面。\n\n比赛中，如果有人连续赢了 $m$ 次，那么他就是这个游戏最后的赢家。你的任务是，预测第 $k$ 个人成为最终赢家的可能。", "inputFormat": "**输入包含多组数据。**\n\n第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。\n\n接下来是 $T$ 组数据，每组数据的格式如下：\n\n每组数据仅一行，包含三个整数 $n,m,k$。", "outputFormat": "输出包含 $T$ 行，分别对应 $T$ 组数据的答案，即第 $k$ 个人成为最终赢家的可能（结果保留 $6$ 位小数）。", "hint": "#### 数据规模与约定\n- 对于 $30\\%$ 的数据：保证 $ n \\le 5$，$m \\le 5$。\n- 对于 $60\\%$ 的数据：保证 $n \\le 8$，$m \\le 8$。\n- 对于 $100\\%$ 的数据：保证 $4 \\le n \\le 10$，$0 < m \\le 10$，$1\\le k \\le n$，除样例外 $T=1$。", "locale": "zh-CN"}}}
{"pid": "P5416", "type": "P", "difficulty": 7, "samples": [["4 4 2\n0 0 1 8 2 3 7\n0 1 2 10 1 6 2\n1 1 1\n1 4\n2 8\n2 6\n3 8", "18\n6\n11\n66"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "O2优化", "CTSC/CTS"], "title": "[CTSC2016] 时空旅行", "background": "", "description": "2045年，人类的技术突飞猛进，已经找到了进行时空旅行的方法。小 R 得到了一台时空旅行仪，他想用它调查不同时空中人类的发展状况。\n\n根据平行时空理论，宇宙中存在着很多独立的时空，每个时空在下一个时间点还会分化出若干个不同的时空。宇宙是一个三维空间，人类使用空间直角坐标系来描述空间中的一个位置，三维坐标分别是 $x,y,z$。\n\n我们假设在初始的时空（编号为 $0$）中，人类存在于地球上（地球的坐标为 $(0,0,0)$），其他的时空都是从一个现有的时空发展而来的。一个时空发生一个时间之后会发展成为另外一个时空（原来的时空不发生任何变化）。会影响小 R 的时间包括两类：\n\n1. 人类殖民了一个新的星球，该星球的状态变成“已被殖民”。\n2. 人类放弃了一个已被殖民的星球，该星球的状态变成“未被殖民”。\n\n每次进行时空旅行时，小 R 会先选定一个时空。在这个时空中，人类已经殖民了一些星球。小 R 只要到达该时空中任意一个已被殖民的星球，就能调查人类的发展状况。\n\n小 R 的时空旅行仪出现了一些问题，调整 $x$ 坐标的按钮坏掉了，因此到达点的 $x$ 坐标被固定了（每次旅行的 $x$ 坐标值可能不同）。与此同时，他仍能任意调整到达点的 $y$ 坐标和 $z$ 坐标。\n\n这个问题大大增大了小 R 的花费：因为时空旅行没有花费，但在太空中航行却需要花钱；同时，在不同星球进行调查也可能会产生不同的费用。\n\n假设小 R 将时空旅行的终点设为 $A$，他要进行调查的星球为 $B$：如果 $A$ 与 $B$ 的欧几里得距离为 $d$，那么他太空航行的花费就是 $d^2$；又如果星球 $B$上进行调查的费用为 $c$，那么小 R 此次调查的总花费就是 $d^2+c$。\n\n现在给定小 R 每次旅行到达的时空以及时空旅行仪上固定的 $x$ 坐标值，请你计算出小 R 每次旅行完成调查的最小总花费。", "inputFormat": "输入的第一行包含三个非负整数 $n,m,c_0$，$n$ 表示平行时空数量，这些平行时空的编号为 $0$ 到 $n-1$ 的整数，初始时空的编号为 $0$。$m$ 表示小 R 进行的时空旅行的次数，$c_0$ 表示在地球进行调查的花费。保证 $0< n,m \\leq 5 \\times 10^5, 0 \\leq c_0 \\leq 10^{12}$。\n\n接下来 $n-1$ 行，依次描述平行时空 $1$ 到 $n-1$，其中第 $i$ 行分两种情况：\n\n1. $0 \\ \\mathrm{fr} \\ \\mathrm{id} \\ x \\ y \\ z \\ c$：表示编号为 $i$ 的平行时空由编号为 $\\mathrm{fr}$ 的时空发展而来，人类殖民了一个编号为 $\\mathrm{id}$ 的星球，该星球的坐标为 $(x,y,z)$，在该星球进行调查的花费为 $c$。数据保证给出星球的编号不重复，且 $0< \\mathrm{id} < n$；保证 $|x|,|y|,|z| \\leq 10^6, 0 \\leq c \\leq 10^{12}$。\n2. $1 \\ \\mathrm{fr} \\ \\mathrm{id} $：表示编号为 $i$ 的平行时空由编号为 $\\mathrm{fr}$ 的时空发展而来，人类放弃了编号为 $\\mathrm{id}$ 的星球。数据保证该星球在编号为 $\\mathrm{fr}$ 的时空中处于被殖民的状态；保证 $\\mathrm{id} > 0$，即地球一定不会被放弃。\n\n上述两种情况中，各参数均为正数，相邻整数之间均用一个空格隔开；均保证 $0 \\leq \\mathrm{fr} < i$。保证不会出现上述两种之外的情况。\n\n接下来 $m$ 行，每行表示小 R 进行的一次时空旅行。每行包括两个正数 $s$ 和 $x_0$，表示小 R 到编号为 $s$ 的平行时空进行了一次时空旅行，时空旅行仪上的 $x$ 坐标被固定为了 $x_0$。保证 $0\\le s\\lt n$，$|x_0|\\le 10^6$。", "outputFormat": "输出 $m$ 行，分别表示每次旅行完成调查的最小总花费。", "hint": "对于前 $5\\%$ 的数据，$n,~m~\\leq~100$\n\n另有 $35\\%$ 的数据，$n,~m~\\leq~10^5$，其中有 $15\\%$ 的数据，人类不会放弃星球，另有 $10\\%$ 的数据，每次旅行的 $x$ 相同。\n\n对于剩下的数据，$n,~m~\\leq~5~\\times~10^5$，其中有 $10\\%$ 的数据，每次旅行的 $x$ 相同，$35\\%$ 的数据，时空 $i$ 由时空 $i - 1$ 发展而来。在这 $35\\%$ 的数据中有 $15\\%$ 的数据，人类不会放弃星球。\n\n由于文件压缩包过大无法上传，对于每一个子任务有且仅有一个测试点，为对应分值。", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2016] Time-Space Travel", "background": "", "description": "In 2045, human technology advanced rapidly, and people have found a way to travel through time and space. Little R obtained a time-space travel device and wants to use it to investigate the development of humans in different time-spaces.\n\nAccording to the parallel time-space theory, there are many independent time-spaces in the universe. Each time-space will further split into several different time-spaces at the next time point. The universe is a three-dimensional space, and humans use a 3D Cartesian coordinate system to describe a position in space, with coordinates $x, y, z$.\n\nAssume that in the initial time-space (numbered $0$), humans live on Earth (Earth’s coordinates are $(0,0,0)$), and all other time-spaces are developed from an existing time-space. After one time step, a time-space will develop into another time-space (the original time-space does not change). Events that affect Little R are of two types:\n\n1. Humans colonize a new planet, and the planet’s state becomes “colonized”.\n2. Humans abandon a colonized planet, and the planet’s state becomes “not colonized”.\n\nEach time Little R performs time-space travel, he first chooses a time-space. In this time-space, humans have already colonized some planets. As long as Little R reaches any colonized planet in that time-space, he can investigate the development of humans.\n\nHowever, Little R’s device has some problems: the button for adjusting the $x$ coordinate is broken, so the $x$ coordinate of the destination point is fixed (the fixed $x$ value may differ for each trip). At the same time, he can still freely adjust the $y$ and $z$ coordinates of the destination.\n\nThis greatly increases Little R’s cost: time-space travel itself is free, but traveling in space costs money; also, investigating on different planets may incur different fees.\n\nSuppose Little R sets the endpoint of the time-space travel to $A$, and the planet he investigates is $B$. If the Euclidean distance between $A$ and $B$ is $d$, then the cost of space travel is $d^2$. If the investigation fee on planet $B$ is $c$, then the total cost of this investigation is $d^2 + c$.\n\nNow you are given the time-space Little R arrives at for each trip and the fixed $x$ coordinate value on the device. Please compute the minimum total cost for Little R to complete the investigation for each trip.", "inputFormat": "The first line contains three non-negative integers $n, m, c_0$. $n$ is the number of parallel time-spaces, numbered from $0$ to $n-1$, and the initial time-space is numbered $0$. $m$ is the number of time-space trips Little R makes. $c_0$ is the investigation fee on Earth. It is guaranteed that $0 < n, m \\leq 5 \\times 10^5$, and $0 \\leq c_0 \\leq 10^{12}$.\n\nThe next $n-1$ lines describe parallel time-spaces $1$ to $n-1$ in order. For time-space $i$, the $i$-th line is one of the following two cases:\n\n1. $0 \\ \\mathrm{fr} \\ \\mathrm{id} \\ x \\ y \\ z \\ c$: time-space $i$ develops from time-space $\\mathrm{fr}$, and humans colonize a planet with number $\\mathrm{id}$. The planet’s coordinates are $(x, y, z)$, and the investigation fee on this planet is $c$. The testdata guarantees that the given planet numbers are all distinct, and $0 < \\mathrm{id} < n$. Also, $|x|, |y|, |z| \\leq 10^6$, and $0 \\leq c \\leq 10^{12}$.\n2. $1 \\ \\mathrm{fr} \\ \\mathrm{id}$: time-space $i$ develops from time-space $\\mathrm{fr}$, and humans abandon the planet with number $\\mathrm{id}$. The testdata guarantees that this planet is colonized in time-space $\\mathrm{fr}$. Also, $\\mathrm{id} > 0$, meaning Earth will never be abandoned.\n\nIn both cases above, all parameters are positive integers, and adjacent integers are separated by one space. It is also guaranteed that $0 \\leq \\mathrm{fr} < i$. No other cases will appear.\n\nThe next $m$ lines each describe one time-space trip by Little R. Each line contains two positive integers $s$ and $x_0$, meaning that Little R travels to parallel time-space $s$, and the device fixes the $x$ coordinate to $x_0$. It is guaranteed that $0 \\leq s < n$ and $|x_0| \\leq 10^6$.", "outputFormat": "Output $m$ lines. The $i$-th line should be the minimum total cost to complete the investigation for the $i$-th trip.", "hint": "For the first $5\\%$ of the testdata, $n, m \\leq 100$.\n\nThere is another $35\\%$ of the testdata with $n, m \\leq 10^5$. Among them, for $15\\%$ of the testdata, humans never abandon planets, and for another $10\\%$ of the testdata, the $x$ value is the same for every trip.\n\nFor the remaining testdata, $n, m \\leq 5 \\times 10^5$. Among them, for $10\\%$ of the testdata, the $x$ value is the same for every trip, and for $35\\%$ of the testdata, time-space $i$ develops from time-space $i - 1$. In this $35\\%$, there is $15\\%$ of the testdata where humans never abandon planets.\n\nBecause the compressed file is too large to upload, for each subtask there is one and only one test point, corresponding to its score.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2016] 时空旅行", "background": "", "description": "2045年，人类的技术突飞猛进，已经找到了进行时空旅行的方法。小 R 得到了一台时空旅行仪，他想用它调查不同时空中人类的发展状况。\n\n根据平行时空理论，宇宙中存在着很多独立的时空，每个时空在下一个时间点还会分化出若干个不同的时空。宇宙是一个三维空间，人类使用空间直角坐标系来描述空间中的一个位置，三维坐标分别是 $x,y,z$。\n\n我们假设在初始的时空（编号为 $0$）中，人类存在于地球上（地球的坐标为 $(0,0,0)$），其他的时空都是从一个现有的时空发展而来的。一个时空发生一个时间之后会发展成为另外一个时空（原来的时空不发生任何变化）。会影响小 R 的时间包括两类：\n\n1. 人类殖民了一个新的星球，该星球的状态变成“已被殖民”。\n2. 人类放弃了一个已被殖民的星球，该星球的状态变成“未被殖民”。\n\n每次进行时空旅行时，小 R 会先选定一个时空。在这个时空中，人类已经殖民了一些星球。小 R 只要到达该时空中任意一个已被殖民的星球，就能调查人类的发展状况。\n\n小 R 的时空旅行仪出现了一些问题，调整 $x$ 坐标的按钮坏掉了，因此到达点的 $x$ 坐标被固定了（每次旅行的 $x$ 坐标值可能不同）。与此同时，他仍能任意调整到达点的 $y$ 坐标和 $z$ 坐标。\n\n这个问题大大增大了小 R 的花费：因为时空旅行没有花费，但在太空中航行却需要花钱；同时，在不同星球进行调查也可能会产生不同的费用。\n\n假设小 R 将时空旅行的终点设为 $A$，他要进行调查的星球为 $B$：如果 $A$ 与 $B$ 的欧几里得距离为 $d$，那么他太空航行的花费就是 $d^2$；又如果星球 $B$上进行调查的费用为 $c$，那么小 R 此次调查的总花费就是 $d^2+c$。\n\n现在给定小 R 每次旅行到达的时空以及时空旅行仪上固定的 $x$ 坐标值，请你计算出小 R 每次旅行完成调查的最小总花费。", "inputFormat": "输入的第一行包含三个非负整数 $n,m,c_0$，$n$ 表示平行时空数量，这些平行时空的编号为 $0$ 到 $n-1$ 的整数，初始时空的编号为 $0$。$m$ 表示小 R 进行的时空旅行的次数，$c_0$ 表示在地球进行调查的花费。保证 $0< n,m \\leq 5 \\times 10^5, 0 \\leq c_0 \\leq 10^{12}$。\n\n接下来 $n-1$ 行，依次描述平行时空 $1$ 到 $n-1$，其中第 $i$ 行分两种情况：\n\n1. $0 \\ \\mathrm{fr} \\ \\mathrm{id} \\ x \\ y \\ z \\ c$：表示编号为 $i$ 的平行时空由编号为 $\\mathrm{fr}$ 的时空发展而来，人类殖民了一个编号为 $\\mathrm{id}$ 的星球，该星球的坐标为 $(x,y,z)$，在该星球进行调查的花费为 $c$。数据保证给出星球的编号不重复，且 $0< \\mathrm{id} < n$；保证 $|x|,|y|,|z| \\leq 10^6, 0 \\leq c \\leq 10^{12}$。\n2. $1 \\ \\mathrm{fr} \\ \\mathrm{id} $：表示编号为 $i$ 的平行时空由编号为 $\\mathrm{fr}$ 的时空发展而来，人类放弃了编号为 $\\mathrm{id}$ 的星球。数据保证该星球在编号为 $\\mathrm{fr}$ 的时空中处于被殖民的状态；保证 $\\mathrm{id} > 0$，即地球一定不会被放弃。\n\n上述两种情况中，各参数均为正数，相邻整数之间均用一个空格隔开；均保证 $0 \\leq \\mathrm{fr} < i$。保证不会出现上述两种之外的情况。\n\n接下来 $m$ 行，每行表示小 R 进行的一次时空旅行。每行包括两个正数 $s$ 和 $x_0$，表示小 R 到编号为 $s$ 的平行时空进行了一次时空旅行，时空旅行仪上的 $x$ 坐标被固定为了 $x_0$。保证 $0\\le s\\lt n$，$|x_0|\\le 10^6$。", "outputFormat": "输出 $m$ 行，分别表示每次旅行完成调查的最小总花费。", "hint": "对于前 $5\\%$ 的数据，$n,~m~\\leq~100$\n\n另有 $35\\%$ 的数据，$n,~m~\\leq~10^5$，其中有 $15\\%$ 的数据，人类不会放弃星球，另有 $10\\%$ 的数据，每次旅行的 $x$ 相同。\n\n对于剩下的数据，$n,~m~\\leq~5~\\times~10^5$，其中有 $10\\%$ 的数据，每次旅行的 $x$ 相同，$35\\%$ 的数据，时空 $i$ 由时空 $i - 1$ 发展而来。在这 $35\\%$ 的数据中有 $15\\%$ 的数据，人类不会放弃星球。\n\n由于文件压缩包过大无法上传，对于每一个子任务有且仅有一个测试点，为对应分值。", "locale": "zh-CN"}}}
{"pid": "P5417", "type": "P", "difficulty": 7, "samples": [["3 2\n2 2", "5"], ["10 5\n2 3 4 3 2\n", "1003811"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "O2优化", "CTSC/CTS"], "title": "[CTSC2016] 萨菲克斯·阿瑞", "background": "", "description": "小 P 来到了 NOIP2044 的赛场上，他发现第二题的题目是这样的：给你一个长度为 $n$ 的字符串，该字符串由至多 $m$ 种不同的字符组成，其中第 $i$ 种字符的出现次数不超过 $c_i$，问你这个字符串的后缀数组是什么。\n\n聪明的小 P 想到了一个新的问题希望你来帮忙解答：在题目给定的限制下，能有多少种不同的答案。也就是所有由 $m$ 种字符组成，其中第 $i$ 种字符出现次数不超过 $c_i$，且长度为 $n$ 的字符串，共有多少种不同的后缀数组。\n\n由于答案很大，你只用输出答案对 $10^9+7$ 取模后的数。\n\n对于一个字符串 $s=s_1s_2...s_n$，记 $\\mathrm{suf}(i)$ 表示 $i$ 这个位置到末尾的子串。后缀数组为一个 $1$ 到 $n$ 的排列 $p_1,p_2,...,p_n$，满足 $\\mathrm{suf}(p_1) <  \\mathrm{suf}(p_2) <  \\dots  <  \\mathrm{suf}(p_n)$。对于两个字符串 $s$ 和 $t$，令 $i$ 为第一个使得 $s_i \\neq t_i$ 的位置，那么我们 $s_i$ 和 $t_i$ 中小的对应的字符串更小，如果 $i$ 不存在，那么长度小的字符串更小。\n\n对于字符串之间的大小关系，我们规定第 $1$ 个字符最小，第 $2$ 个字符次小，以此类推。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示字符串的长度为 $n$，共有 $m$ 种字符。\n\n接下来一行，包含 $m$ 个非负整数 $c_1,c_2,...,c_m$，表示每种字符最多的出现次数。保证 $0 \\leq c_1,c_2,...,c_m \\leq n,c_1+c_2+...+c_m \\geq n$。", "outputFormat": "输出共一行，包含一个正数，表示答案。", "hint": "### 样例一解释\n\n我们记 $a$ 为第一种字符，$b$ 为第二种字符，那么共有 $aab,aba,abb,baa,bab,bba$ 这六种可能的字符串。它们的后缀数组为\n\n$$(1,2,3),(3,1,2),(1,3,2),(3,2,1),(2,3,1),(3,2,1)$$\n\n所以共有 $5$ 种不同的结果。\n\n### 数据范围\n\n对于前 $5\\%$ 的测试点，$n, m \\leq 6$\n\n另有 $10\\%$ 的测试点，$n, m \\leq 10$\n\n另有 $20\\%$ 的测试点，$n, m \\leq 500$，其中有 $5\\%$ 的测试点 $m = 2$，$5\\%$ 的测试点 $m = 3$，$10\\%$ 的测试点 $c_1 = c_2 = \\cdots = c_m = n$\n\n另有 $15\\%$ 的测试点，$n,m\\leq 50$\n\n另有 $20\\%$ 的测试点，$n, m \\leq 200$\n\n另有 $30\\%$ 的测试点，$n, m \\leq 500$", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2016] Suffix Array", "background": "", "description": "Xiao P came to the contest site of NOIP2044. He found that the second problem was like this: given a string of length $n$, formed by at most $m$ different characters, where the number of occurrences of the $i$-th character is at most $c_i$, ask what the suffix array of this string is.\n\nClever Xiao P thought of a new problem and hopes you can help solve it: under the constraints given in the problem, how many different answers can there be. That is, among all strings of length $n$ formed by $m$ characters, where the number of occurrences of the $i$-th character is at most $c_i$, how many different suffix arrays are there in total.\n\nSince the answer is very large, you only need to output the answer modulo $10^9+7$.\n\nFor a string $s=s_1s_2...s_n$, let $\\mathrm{suf}(i)$ denote the substring from position $i$ to the end. The suffix array is a permutation $p_1,p_2,...,p_n$ of $1$ to $n$, satisfying $\\mathrm{suf}(p_1) < \\mathrm{suf}(p_2) < \\dots < \\mathrm{suf}(p_n)$. For two strings $s$ and $t$, let $i$ be the first position such that $s_i \\neq t_i$. Then the string with the smaller one among $s_i$ and $t_i$ is smaller. If such $i$ does not exist, then the shorter string is smaller.\n\nFor the ordering between characters, we define that the $1$-st character is the smallest, the $2$-nd character is the next smallest, and so on.", "inputFormat": "The first line contains two positive integers $n,m$, meaning the length of the string is $n$, and there are $m$ kinds of characters.\n\nThe next line contains $m$ non-negative integers $c_1,c_2,...,c_m$, meaning the maximum number of occurrences of each character. It is guaranteed that $0 \\leq c_1,c_2,...,c_m \\leq n$ and $c_1+c_2+...+c_m \\geq n$.", "outputFormat": "Output one line containing a positive integer, representing the answer.", "hint": "### Explanation of Sample 1\n\nLet $a$ be the first kind of character and $b$ be the second kind of character. Then there are $6$ possible strings: $aab,aba,abb,baa,bab,bba$. Their suffix arrays are\n\n$$(1,2,3),(3,1,2),(1,3,2),(3,2,1),(2,3,1),(3,2,1)$$\n\nSo there are $5$ different results.\n\n### Constraints\n\nFor the first $5\\%$ of the test points, $n, m \\leq 6$.\n\nAnother $10\\%$ of the test points: $n, m \\leq 10$.\n\nAnother $20\\%$ of the test points: $n, m \\leq 500$. Among them, for $5\\%$ of the test points $m = 2$, for $5\\%$ of the test points $m = 3$, and for $10\\%$ of the test points $c_1 = c_2 = \\cdots = c_m = n$.\n\nAnother $15\\%$ of the test points: $n,m \\leq 50$.\n\nAnother $20\\%$ of the test points: $n, m \\leq 200$.\n\nAnother $30\\%$ of the test points: $n, m \\leq 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2016] 萨菲克斯·阿瑞", "background": "", "description": "小 P 来到了 NOIP2044 的赛场上，他发现第二题的题目是这样的：给你一个长度为 $n$ 的字符串，该字符串由至多 $m$ 种不同的字符组成，其中第 $i$ 种字符的出现次数不超过 $c_i$，问你这个字符串的后缀数组是什么。\n\n聪明的小 P 想到了一个新的问题希望你来帮忙解答：在题目给定的限制下，能有多少种不同的答案。也就是所有由 $m$ 种字符组成，其中第 $i$ 种字符出现次数不超过 $c_i$，且长度为 $n$ 的字符串，共有多少种不同的后缀数组。\n\n由于答案很大，你只用输出答案对 $10^9+7$ 取模后的数。\n\n对于一个字符串 $s=s_1s_2...s_n$，记 $\\mathrm{suf}(i)$ 表示 $i$ 这个位置到末尾的子串。后缀数组为一个 $1$ 到 $n$ 的排列 $p_1,p_2,...,p_n$，满足 $\\mathrm{suf}(p_1) <  \\mathrm{suf}(p_2) <  \\dots  <  \\mathrm{suf}(p_n)$。对于两个字符串 $s$ 和 $t$，令 $i$ 为第一个使得 $s_i \\neq t_i$ 的位置，那么我们 $s_i$ 和 $t_i$ 中小的对应的字符串更小，如果 $i$ 不存在，那么长度小的字符串更小。\n\n对于字符串之间的大小关系，我们规定第 $1$ 个字符最小，第 $2$ 个字符次小，以此类推。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示字符串的长度为 $n$，共有 $m$ 种字符。\n\n接下来一行，包含 $m$ 个非负整数 $c_1,c_2,...,c_m$，表示每种字符最多的出现次数。保证 $0 \\leq c_1,c_2,...,c_m \\leq n,c_1+c_2+...+c_m \\geq n$。", "outputFormat": "输出共一行，包含一个正数，表示答案。", "hint": "### 样例一解释\n\n我们记 $a$ 为第一种字符，$b$ 为第二种字符，那么共有 $aab,aba,abb,baa,bab,bba$ 这六种可能的字符串。它们的后缀数组为\n\n$$(1,2,3),(3,1,2),(1,3,2),(3,2,1),(2,3,1),(3,2,1)$$\n\n所以共有 $5$ 种不同的结果。\n\n### 数据范围\n\n对于前 $5\\%$ 的测试点，$n, m \\leq 6$\n\n另有 $10\\%$ 的测试点，$n, m \\leq 10$\n\n另有 $20\\%$ 的测试点，$n, m \\leq 500$，其中有 $5\\%$ 的测试点 $m = 2$，$5\\%$ 的测试点 $m = 3$，$10\\%$ 的测试点 $c_1 = c_2 = \\cdots = c_m = n$\n\n另有 $15\\%$ 的测试点，$n,m\\leq 50$\n\n另有 $20\\%$ 的测试点，$n, m \\leq 200$\n\n另有 $30\\%$ 的测试点，$n, m \\leq 500$", "locale": "zh-CN"}}}
{"pid": "P5418", "type": "P", "difficulty": 0, "samples": [["3 4 2 10\n1 1 2\n1 2 2\n1 3 1\n2 3 3\n1 3 5\n1 3 3\n", "2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "提交答案", "O2优化", "CTSC/CTS"], "title": "[CTSC2016] NOIP十合一（数据疑似有误）", "background": "这是一道 **提交答案题**。", "description": "在 NOIP2044 的赛场上，小 D 遇到了这样一道题：\n\n给出一个 $n$ 个点的图，其中有 $m$ 条带边权的有向边，有 $q$ 个询问，每个询问形如从 $u$ 号点走到 $v$ 号点，长度为 $w$ 的道路数量有多少？你只需要输出答案对 $P$ 取模的结果即可。\n\n小 D 思考了良久也不会做这道题，悻悻离场后，他从官网上取得了这道题的数据，共有 $10$ 组数据。小 D 怎么也想做出来这道题，于是他开始寻求你的帮助，将 $10$ 组数据的输入给了你。聪明的你一定可以帮小 D 计算出每组数据的输出的！", "inputFormat": "输入文件 noip1.in~noip10.in 已经在下载文件中。\n\n每个输入文件的第一行包括 $4$ 个正整数 $n,m,q,P$，表示图中点数、边数、询问数目以及模数。点的编号为从 $1$ 到 $n$ 的整数。\n\n接下来 $m$ 行每行描述 $m$ 条带权有向边，其中第 $i$ 行包含 $3$ 个整数 $a_i,b_i,c_i$，表示第 $i$ 条边的起点为 $a_i$，终点为 $b_i$，权值为 $c_i$。\n\n接下来 $q$ 行描述询问，其中第 $k$ 行包含 $3$ 个整数 $u_k,v_k,w_k$，表示第 $k$ 个询问需要输出从 $u_k$ 号店走到 $v_k$ 号点，长度为 $w_k$ 的道路数量对 $P$ 取模的结果。", "outputFormat": "输出文件为 noip1.out~noip10.out，分别对应相应的输入文件。\n\n每个输出文件中不超过 $q$ 行，每行包含一个小于 $P$ 的非负整数，表示该测试点前 $q$ 个询问的答案。", "hint": "### 样例一解释：\n\n对于第一组询问，一共有两条从 $1$ 号点到 $3$ 号点、长度为 $5$ 的路径。假定边的编号从 $1$ 到 $4$，则这两条路径经过的边为：\n\n第 $1$ 条：$2 \\rightarrow 4$\n\n第 $2$ 条：$1 \\rightarrow 1 \\rightarrow 3$。\n\n### 有关其他样例\n\n在测试数据下载中提供了每个测试点对应的sampleout，分别对应每个测试点第一个询问的正确输出\n\n### 输入数据下载\n\n[下载链接](https://share.weiyun.com/5sk5wqh)\n\n### 评分办法\n\n暂无spj，按照 **传统题** 评分办法进行评测，只有你的答案与标准输出 **完全相同** 才能得到测试点的分数\n\n### 提示\n\n本题可能用到的知识：\n\n**特征多项式**：对于 $n \\times n$ 的矩阵 $A$，定义以 $\\lambda$ 为变量的 $n$ 次多项式 $f(\\lambda)=\\det(\\lambda I-A)$，其中 $I$ 是 $n$ 阶单位矩阵，$\\det$ 是行列式。称 $f(\\lambda)$ 为 $A$ 的特征多项式。\n\n**Cayley-Hamilton 定理**：对于方阵 $A$ 的特征多项式 $f(\\lambda)$，一定有 $f(A)=0$。即将矩阵本身作为变量带入特征多项式，结果为零矩阵。", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2016] NOIP Ten-in-One (The testdata seems to be incorrect)", "background": "This is an output-only problem.", "description": "At the contest site of NOIP2044, Little D encountered the following problem:\n\nYou are given a graph with $n$ vertices, $m$ directed edges with weights, and $q$ queries. Each query asks: how many paths are there from vertex $u$ to vertex $v$ with total length $w$? You only need to output the answer modulo $P$.\n\nLittle D thought for a long time but still could not solve it. After leaving in disappointment, he obtained the testdata for this problem from the official website. There are $10$ test cases in total. Little D really wants to solve this problem, so he asks for your help and gives you the input of these $10$ test cases. You, being smart, can surely help Little D compute the output for each test case.", "inputFormat": "The input files noip1.in~noip10.in are already included in the download package.\n\nThe first line of each input file contains $4$ positive integers $n,m,q,P$, representing the number of vertices, the number of edges, the number of queries, and the modulus. The vertices are numbered as integers from $1$ to $n$.\n\nThe next $m$ lines describe the weighted directed edges. In the $i$-th line there are $3$ integers $a_i,b_i,c_i$, meaning the $i$-th edge starts at $a_i$, ends at $b_i$, and has weight $c_i$.\n\nThe next $q$ lines describe the queries. In the $k$-th line there are $3$ integers $u_k,v_k,w_k$, meaning the $k$-th query asks for the number of paths from vertex $u_k$ to vertex $v_k$ with total length $w_k$, modulo $P$.", "outputFormat": "The output files are noip1.out~noip10.out, corresponding to the respective input files.\n\nEach output file contains at most $q$ lines. Each line contains a non-negative integer less than $P$, representing the answers to the first $q$ queries of that test case.", "hint": "### Explanation for Sample 1:\n\nFor the first query, there are exactly two paths from vertex $1$ to vertex $3$ with length $5$. Assume the edges are numbered from $1$ to $4$. Then the edges passed by these two paths are:\n\nPath $1$: $2 \\rightarrow 4$\n\nPath $2$: $1 \\rightarrow 1 \\rightarrow 3$.\n\n### About the other samples\n\nThe download package provides sampleout for each test case, which corresponds to the correct output for the first query of each test case.\n\n### Input data download\n\n[Download link](https://share.weiyun.com/5sk5wqh)\n\n### Scoring\n\nThere is no special judge. The judging follows the **traditional problem** scoring method. You get points for a test case only if your output is **exactly the same** as the standard output.\n\n### Notes\n\nThis problem may use the following knowledge:\n\n**Characteristic polynomial**: For an $n \\times n$ matrix $A$, define an $n$-th degree polynomial in $\\lambda$ as $f(\\lambda)=\\det(\\lambda I-A)$, where $I$ is the $n \\times n$ identity matrix and $\\det$ is the determinant. We call $f(\\lambda)$ the characteristic polynomial of $A$.\n\n**Cayley-Hamilton theorem**: For the characteristic polynomial $f(\\lambda)$ of a square matrix $A$, we always have $f(A)=0$. That is, if we substitute the matrix itself into the characteristic polynomial, the result is the zero matrix.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2016] NOIP十合一（数据疑似有误）", "background": "这是一道 **提交答案题**。", "description": "在 NOIP2044 的赛场上，小 D 遇到了这样一道题：\n\n给出一个 $n$ 个点的图，其中有 $m$ 条带边权的有向边，有 $q$ 个询问，每个询问形如从 $u$ 号点走到 $v$ 号点，长度为 $w$ 的道路数量有多少？你只需要输出答案对 $P$ 取模的结果即可。\n\n小 D 思考了良久也不会做这道题，悻悻离场后，他从官网上取得了这道题的数据，共有 $10$ 组数据。小 D 怎么也想做出来这道题，于是他开始寻求你的帮助，将 $10$ 组数据的输入给了你。聪明的你一定可以帮小 D 计算出每组数据的输出的！", "inputFormat": "输入文件 noip1.in~noip10.in 已经在下载文件中。\n\n每个输入文件的第一行包括 $4$ 个正整数 $n,m,q,P$，表示图中点数、边数、询问数目以及模数。点的编号为从 $1$ 到 $n$ 的整数。\n\n接下来 $m$ 行每行描述 $m$ 条带权有向边，其中第 $i$ 行包含 $3$ 个整数 $a_i,b_i,c_i$，表示第 $i$ 条边的起点为 $a_i$，终点为 $b_i$，权值为 $c_i$。\n\n接下来 $q$ 行描述询问，其中第 $k$ 行包含 $3$ 个整数 $u_k,v_k,w_k$，表示第 $k$ 个询问需要输出从 $u_k$ 号店走到 $v_k$ 号点，长度为 $w_k$ 的道路数量对 $P$ 取模的结果。", "outputFormat": "输出文件为 noip1.out~noip10.out，分别对应相应的输入文件。\n\n每个输出文件中不超过 $q$ 行，每行包含一个小于 $P$ 的非负整数，表示该测试点前 $q$ 个询问的答案。", "hint": "### 样例一解释：\n\n对于第一组询问，一共有两条从 $1$ 号点到 $3$ 号点、长度为 $5$ 的路径。假定边的编号从 $1$ 到 $4$，则这两条路径经过的边为：\n\n第 $1$ 条：$2 \\rightarrow 4$\n\n第 $2$ 条：$1 \\rightarrow 1 \\rightarrow 3$。\n\n### 有关其他样例\n\n在测试数据下载中提供了每个测试点对应的sampleout，分别对应每个测试点第一个询问的正确输出\n\n### 输入数据下载\n\n[下载链接](https://share.weiyun.com/5sk5wqh)\n\n### 评分办法\n\n暂无spj，按照 **传统题** 评分办法进行评测，只有你的答案与标准输出 **完全相同** 才能得到测试点的分数\n\n### 提示\n\n本题可能用到的知识：\n\n**特征多项式**：对于 $n \\times n$ 的矩阵 $A$，定义以 $\\lambda$ 为变量的 $n$ 次多项式 $f(\\lambda)=\\det(\\lambda I-A)$，其中 $I$ 是 $n$ 阶单位矩阵，$\\det$ 是行列式。称 $f(\\lambda)$ 为 $A$ 的特征多项式。\n\n**Cayley-Hamilton 定理**：对于方阵 $A$ 的特征多项式 $f(\\lambda)$，一定有 $f(A)=0$。即将矩阵本身作为变量带入特征多项式，结果为零矩阵。", "locale": "zh-CN"}}}
{"pid": "P5419", "type": "P", "difficulty": 6, "samples": [["4", "4 6 2\n3 1\n5\n"], ["6\n", "12 8 15 3 5\n6 7 1 13\n10 14 11\n4 2\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "Special Judge", "CTSC/CTS"], "title": "[CTSC2016] 单调上升序列", "background": "", "description": "对于一个带权无向图，我们可以考察它的单调上升路径。\n\n一条路径被称为单调上升的，如果沿着它走时的权值是单调递增的。\n\n注意，路径由多条首尾相连的边组成，且可经过同一顶点多次。路径的长度为它包含的边数。\n\n举例来说：下图中 $v_2 \\rightarrow v_4 \\rightarrow v_1 \\rightarrow v_2$ 是一条单调上升路径，因为每条边的权值为 $1,2,4$。这条路径的长度为 $3$。更进一步的，你可以验证下图中所有的单调上升路径的长度都不超过 $3$。\n\n![例子](https://cdn.luogu.com.cn/upload/pic/59263.png)\n\n下面的结论指出在某些图中总会存在一个比较长的单调上升路径：\n\n结论：假设带权无向图 $G$ 有 $100$ 个节点 $1000$ 条边，且所有权值各不相同。那么，$G$ 中一定存在一个单调上升路径，它的长度大于等于 $20$。\n\n证明：假设每个节点上有一个探险家。我们按权值从小到大枚举所有的边，每次将该边连接的节点中的探险家的位置进行对调。可以知道，每个探险家都走的是一条单调上升路径。另外，由于共有 $100$ 个探险家，而探险家一共走了 $2000$ 步，所以有人走了 $20$ 步。证毕。\n\n现在，我们的问题是：\n\n给定一个完全图 $G$，它的顶点个数为一个偶数 $N$。\n\n你的任务是给每条边选一个不同的权值，要使得最长的单调上升路径最短。", "inputFormat": "输入仅一行一个正偶数 $N$。", "outputFormat": "输出整数 $1$ 到 $\\frac{N(N-1)}{2}$ 的一个排列，相邻的数之间用一个空格或换行隔开。\n\n第一个数代表你给边 $(1,2)$ 选的权值；第二个数是给 $(1,3)$ 的权值，……，第 $N$ 个数是给 $(1,N)$ 的权值；然后是 $(2,3)$ 的权值，$(2,4)$ 的权值，……，$(2,N)$ 的权值；然后是 $(3,4)$ 到 $(3,N)$ 的权值；以此类推；最后是 $(N-1,N)$ 的权值。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，满足 $N \\leq 20$;\n- 对于 $50\\%$ 的数据，满足 $N \\leq 100$;\n- 对于 $100\\%$ 的数据，满足 $2 \\leq N \\leq 500$。\n\n#### 说明\n除不同的测试点有不同特点外，每个测试点你也可能获得部分分。如果你的程序能正确结束并按输出格式输出，我们将用下列方式评分：\n\n假设你的图中最长单调上升路径的长度为 $A$，正确答案为 $B$。  \n- 如果 $A=B$，你的得分为 $10$ 分；\n- 如果 $B < A < 2B$，你的得分为 $3$ 分；\n- 如果 $A \\geq 2B$，你的得分为 $0$ 分。", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2016] Monotonically Increasing Sequence", "background": "", "description": "For a weighted undirected graph, we can study its monotonically increasing paths.\n\nA path is called monotonically increasing if, when you traverse it, the edge weights are monotonically increasing.\n\nNote that a path consists of multiple edges connected end to end, and it may pass through the same vertex multiple times. The length of a path is the number of edges it contains.\n\nFor example, in the figure below, $v_2 \\rightarrow v_4 \\rightarrow v_1 \\rightarrow v_2$ is a monotonically increasing path, because the weights of its edges are $1,2,4$. The length of this path is $3$. Furthermore, you can verify that in the figure below, the length of every monotonically increasing path is at most $3$.\n\n![Example](https://cdn.luogu.com.cn/upload/pic/59263.png)\n\nThe following statement shows that in some graphs, there will always be a relatively long monotonically increasing path:\n\nStatement: Suppose a weighted undirected graph $G$ has $100$ vertices and $1000$ edges, and all edge weights are pairwise distinct. Then there must exist a monotonically increasing path in $G$ whose length is at least $20$.\n\nProof: Suppose there is an explorer on each vertex. We enumerate all edges in increasing order of weight, and each time we swap the positions of the explorers on the two endpoints of the current edge. It can be seen that each explorer walks along a monotonically increasing path. Also, since there are $100$ explorers and the explorers walk a total of $2000$ steps, someone must have walked $20$ steps. QED.\n\nNow, our problem is:\n\nYou are given a complete graph $G$ whose number of vertices is an even number $N$.\n\nYour task is to assign a distinct weight to each edge so that the length of the longest monotonically increasing path is as small as possible.", "inputFormat": "The input contains only one line with a positive even integer $N$.", "outputFormat": "Output a permutation of the integers $1$ to $\\frac{N(N-1)}{2}$, with adjacent numbers separated by a single space or a newline.\n\nThe first number represents the weight you assign to edge $(1,2)$; the second number is the weight for $(1,3)$; $\\ldots$; the $N$-th number is the weight for $(1,N)$. Then come the weights for $(2,3)$, $(2,4)$, $\\ldots$, $(2,N)$. Then the weights for $(3,4)$ to $(3,N)$, and so on. Finally, output the weight for $(N-1,N)$.", "hint": "#### Constraints and Notes\n\n- For $20\\%$ of the testdata, $N \\leq 20$.\n- For $50\\%$ of the testdata, $N \\leq 100$.\n- For $100\\%$ of the testdata, $2 \\leq N \\leq 500$.\n\n#### Notes\n\nBesides different subtasks having different characteristics, you may also receive partial credit on each test. If your program can terminate correctly and output in the required format, we will score it as follows:\n\nSuppose the length of the longest monotonically increasing path in your graph is $A$, and the correct answer is $B$.  \n- If $A=B$, your score is $10$ points.\n- If $B < A < 2B$, your score is $3$ points.\n- If $A \\geq 2B$, your score is $0$ points.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2016] 单调上升序列", "background": "", "description": "对于一个带权无向图，我们可以考察它的单调上升路径。\n\n一条路径被称为单调上升的，如果沿着它走时的权值是单调递增的。\n\n注意，路径由多条首尾相连的边组成，且可经过同一顶点多次。路径的长度为它包含的边数。\n\n举例来说：下图中 $v_2 \\rightarrow v_4 \\rightarrow v_1 \\rightarrow v_2$ 是一条单调上升路径，因为每条边的权值为 $1,2,4$。这条路径的长度为 $3$。更进一步的，你可以验证下图中所有的单调上升路径的长度都不超过 $3$。\n\n![例子](https://cdn.luogu.com.cn/upload/pic/59263.png)\n\n下面的结论指出在某些图中总会存在一个比较长的单调上升路径：\n\n结论：假设带权无向图 $G$ 有 $100$ 个节点 $1000$ 条边，且所有权值各不相同。那么，$G$ 中一定存在一个单调上升路径，它的长度大于等于 $20$。\n\n证明：假设每个节点上有一个探险家。我们按权值从小到大枚举所有的边，每次将该边连接的节点中的探险家的位置进行对调。可以知道，每个探险家都走的是一条单调上升路径。另外，由于共有 $100$ 个探险家，而探险家一共走了 $2000$ 步，所以有人走了 $20$ 步。证毕。\n\n现在，我们的问题是：\n\n给定一个完全图 $G$，它的顶点个数为一个偶数 $N$。\n\n你的任务是给每条边选一个不同的权值，要使得最长的单调上升路径最短。", "inputFormat": "输入仅一行一个正偶数 $N$。", "outputFormat": "输出整数 $1$ 到 $\\frac{N(N-1)}{2}$ 的一个排列，相邻的数之间用一个空格或换行隔开。\n\n第一个数代表你给边 $(1,2)$ 选的权值；第二个数是给 $(1,3)$ 的权值，……，第 $N$ 个数是给 $(1,N)$ 的权值；然后是 $(2,3)$ 的权值，$(2,4)$ 的权值，……，$(2,N)$ 的权值；然后是 $(3,4)$ 到 $(3,N)$ 的权值；以此类推；最后是 $(N-1,N)$ 的权值。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，满足 $N \\leq 20$;\n- 对于 $50\\%$ 的数据，满足 $N \\leq 100$;\n- 对于 $100\\%$ 的数据，满足 $2 \\leq N \\leq 500$。\n\n#### 说明\n除不同的测试点有不同特点外，每个测试点你也可能获得部分分。如果你的程序能正确结束并按输出格式输出，我们将用下列方式评分：\n\n假设你的图中最长单调上升路径的长度为 $A$，正确答案为 $B$。  \n- 如果 $A=B$，你的得分为 $10$ 分；\n- 如果 $B < A < 2B$，你的得分为 $3$ 分；\n- 如果 $A \\geq 2B$，你的得分为 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P5420", "type": "P", "difficulty": 7, "samples": [["3 10\na", "aaj"], ["3 10\nxy", "yzz"], ["1 100\na", "-1"], ["25 1000000000000000\nu", "uuuuuvxzuxvwwyzzuyzvxuvxw"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "O2优化", "CTSC/CTS"], "title": "[CTSC2016] 香山的树", "background": "", "description": "众所周知，香山的红叶非常著名。然而，CTSC 举行的时间是在 5 月，而红叶的季节是秋天，所以这个季节是看不到红叶的，于是我们在 CTSC 比赛中就只能讨论香山的树了。\n\ns-quark 很喜欢这些树，他计划在每棵树上贴一个各不相同的标签。每个标签为条形，可以在树干上绕成一圈。为了区分每一棵树，s-quark 在每个标签上印了一个由小写英文字母组成的字符串。由于树干周长的限制，标签的长度也是有限的，因此这个字符串至多只能由N个字母组成。\n\n但是，由于标签是在树干上围成一圈的，所以当标签在树上贴好以后，就不再能找到标签的起始位置了。所以，如果两棵树上的标签循环同构，例如分别为 \" abc \" 和 \" cab \" ，那么这两棵树就不再能通过标签区分了。针对这个问题，s-quark 想了一个巧妙的办法。对于一个已经在树上贴好的标签，s-quark 规定它的起始位置必须是能够使得字符串的字典序最小的起始位，即如果看到的字符串是 \" aba \"，那么就可以推断出从正确的起始位置开始看到的字符串应为 \" aab \"。\n\n另外，对于有些标签，例如 \" abab \"，尽管符合字典序最小的规则，但是这样的起始位置不唯一，s-quark 认为这种情况也是不理想的。所以，这样的标签 s-quark 也会避免使用。s-quark 已经把所有的树都编好了顺序，准备在第一棵树上贴标签 \" a \"，之后按照字典序给每棵树贴上不同的标签。\n\n以 $n=3$ 为例，s-quark将依次使用这些标签来标记这些树木： $a ,~aab ,~  aac , ~\\dots~, ~ aaz ,  ~ab , ~ abb , ~\\dots~, ~ abz , ~ ac , \\dots~$\n\ns-quark 知道，香山上的树总共有 $K$ 棵。他想知道他将在最后一棵树上贴的标签是什么。但是，这个问题显然太简单了。现在，s-quark 要问你，如果他在第一棵树上贴的标签是字符串 $S$，那么他将在最后一棵树上贴的标签是什么呢？", "inputFormat": "输入的第一行两个正整数 $N$ 和 $K$，分别为字符串的长度和树的总数。\n\n第二行一个由小写英文字母组成的字符串 $S$，表示在第一棵树上所贴的标签。$S$ 的长度不超过 $N$，并且保证是一个合法的标签。", "outputFormat": "输出仅一行，输出一个字符串 $T$，表示 s-quark 将在最后一棵树上贴的标签，或输出 $-1$，表示剩余的合法标签数量不足以贴完所有的树。", "hint": "对于前 $10\\%$ 的数据，$n = 8,~K~\\leq~10^4,~S = \"a\"$\n\n另有 $10\\%$ 的数据， $n = 9,~K~\\leq~10^6$\n\n对于剩下 $70\\%$ 的数据：\n\n有 $30\\%$ 的数据， $n$ 分别为 $8,~9~10$，均匀分布在这 $30\\%$ 的数据中\n\n另有 $20\\%$ 的数据，$n~\\leq~30$\n\n对于 $100\\%$ 的数据，$n~\\leq~50,~K~\\leq~10^{15}$\n", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2016] Trees of Xiangshan", "background": "", "description": "As everyone knows, Xiangshan is famous for its red leaves. However, CTSC is held in May, while the season for red leaves is autumn, so you cannot see red leaves at this time. Therefore, in the CTSC contest we can only talk about the trees of Xiangshan.\n\ns-quark likes these trees very much, and he plans to put a distinct label on each tree. Each label is a strip that can be wrapped around the trunk into a circle. To tell every tree apart, s-quark prints on each label a string made of lowercase English letters. Due to the limit of the trunk circumference, the label length is also limited, so the string can contain at most $N$ letters.\n\nHowever, since the label is wrapped into a circle around the trunk, after the label is attached, you can no longer find the starting position of the label. So, if the labels on two trees are cyclically isomorphic, for example \"abc\" and \"cab\", then these two trees can no longer be distinguished by their labels. To solve this, s-quark came up with a clever method. For a label that has already been attached to a tree, s-quark requires that its starting position must be the one that makes the string lexicographically smallest. That is, if the string you see is \"aba\", then you can infer that the string starting from the correct position should be \"aab\".\n\nIn addition, for some labels such as \"abab\", although they satisfy the lexicographically smallest rule, such a starting position is not unique, and s-quark thinks this is also undesirable. Therefore, s-quark will also avoid using such labels. s-quark has already ordered all the trees and plans to put the label \"a\" on the first tree, and then attach different labels to each tree in lexicographical order.\n\nTake $n = 3$ as an example, s-quark will use the following labels in order to mark these trees: $a ,~aab ,~  aac , ~\\dots~, ~ aaz ,  ~ab , ~ abb , ~\\dots~, ~ abz , ~ ac , \\dots~$.\n\ns-quark knows that there are $K$ trees in Xiangshan in total. He wants to know what label he will put on the last tree. But this problem is obviously too simple. Now, s-quark asks you: if the label on the first tree is the string $S$, then what label will he put on the last tree?", "inputFormat": "The first line contains two positive integers $N$ and $K$, which are the maximum string length and the total number of trees.\n\nThe second line contains a string $S$ consisting of lowercase English letters, representing the label attached to the first tree. The length of $S$ does not exceed $N$, and it is guaranteed to be a valid label.", "outputFormat": "Output only one line. Output a string $T$, representing the label that s-quark will attach to the last tree, or output $-1$ to indicate that the number of remaining valid labels is not enough to label all trees.", "hint": "For the first $10\\%$ of the testdata, $n = 8,~K~\\leq~10^4,~S = \"a\"$.\n\nAnother $10\\%$ of the testdata has $n = 9,~K~\\leq~10^6$.\n\nFor the remaining $70\\%$ of the testdata:\n\n$30\\%$ of the testdata has $n$ equal to $8,~9~10$, uniformly distributed within this $30\\%$ of the testdata.\n\nAnother $20\\%$ of the testdata has $n~\\leq~30$.\n\nFor $100\\%$ of the testdata, $n~\\leq~50,~K~\\leq~10^{15}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2016] 香山的树", "background": "", "description": "众所周知，香山的红叶非常著名。然而，CTSC 举行的时间是在 5 月，而红叶的季节是秋天，所以这个季节是看不到红叶的，于是我们在 CTSC 比赛中就只能讨论香山的树了。\n\ns-quark 很喜欢这些树，他计划在每棵树上贴一个各不相同的标签。每个标签为条形，可以在树干上绕成一圈。为了区分每一棵树，s-quark 在每个标签上印了一个由小写英文字母组成的字符串。由于树干周长的限制，标签的长度也是有限的，因此这个字符串至多只能由N个字母组成。\n\n但是，由于标签是在树干上围成一圈的，所以当标签在树上贴好以后，就不再能找到标签的起始位置了。所以，如果两棵树上的标签循环同构，例如分别为 \" abc \" 和 \" cab \" ，那么这两棵树就不再能通过标签区分了。针对这个问题，s-quark 想了一个巧妙的办法。对于一个已经在树上贴好的标签，s-quark 规定它的起始位置必须是能够使得字符串的字典序最小的起始位，即如果看到的字符串是 \" aba \"，那么就可以推断出从正确的起始位置开始看到的字符串应为 \" aab \"。\n\n另外，对于有些标签，例如 \" abab \"，尽管符合字典序最小的规则，但是这样的起始位置不唯一，s-quark 认为这种情况也是不理想的。所以，这样的标签 s-quark 也会避免使用。s-quark 已经把所有的树都编好了顺序，准备在第一棵树上贴标签 \" a \"，之后按照字典序给每棵树贴上不同的标签。\n\n以 $n=3$ 为例，s-quark将依次使用这些标签来标记这些树木： $a ,~aab ,~  aac , ~\\dots~, ~ aaz ,  ~ab , ~ abb , ~\\dots~, ~ abz , ~ ac , \\dots~$\n\ns-quark 知道，香山上的树总共有 $K$ 棵。他想知道他将在最后一棵树上贴的标签是什么。但是，这个问题显然太简单了。现在，s-quark 要问你，如果他在第一棵树上贴的标签是字符串 $S$，那么他将在最后一棵树上贴的标签是什么呢？", "inputFormat": "输入的第一行两个正整数 $N$ 和 $K$，分别为字符串的长度和树的总数。\n\n第二行一个由小写英文字母组成的字符串 $S$，表示在第一棵树上所贴的标签。$S$ 的长度不超过 $N$，并且保证是一个合法的标签。", "outputFormat": "输出仅一行，输出一个字符串 $T$，表示 s-quark 将在最后一棵树上贴的标签，或输出 $-1$，表示剩余的合法标签数量不足以贴完所有的树。", "hint": "对于前 $10\\%$ 的数据，$n = 8,~K~\\leq~10^4,~S = \"a\"$\n\n另有 $10\\%$ 的数据， $n = 9,~K~\\leq~10^6$\n\n对于剩下 $70\\%$ 的数据：\n\n有 $30\\%$ 的数据， $n$ 分别为 $8,~9~10$，均匀分布在这 $30\\%$ 的数据中\n\n另有 $20\\%$ 的数据，$n~\\leq~30$\n\n对于 $100\\%$ 的数据，$n~\\leq~50,~K~\\leq~10^{15}$\n", "locale": "zh-CN"}}}
{"pid": "P5421", "type": "P", "difficulty": 0, "samples": [["4 4 2 1 4\n1 3 3\n1 2\n1 2 5\n0\n2 3 -2\n1 1 \n3 4 1\n0", "2 1 4\n3 2 3 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "提交答案", "Special Judge", "O2优化", "CTSC/CTS"], "title": "[CTSC2016] 科学考察队", "background": "这是一道 **提交答案题**", "description": "今年正是五四青年节。在这样的大好日子里，青年探险家牛牛带着他的科学考察队去考察一片原始森林。\n\n在考察开始前，牛牛获得了这片原始森林的地图。这片森林里有 $n$ 个集结点，编号为 $1$ 到 $n$ 的整数。在这些集结点之间，存在 $m$ 条路径，编号为 $1$ 到 $m$ 的整数。每条路径以一个集合点为起点，一个集结点为终点。\n\n为了提高科学考察的效率，牛牛将他带领的考察队分为了 $p$ 个小队，每个小队都能够独立地完成一些工作。他们约定从编号为 $S$ 的集结点出发，最终在编号为 $T$ 的集结点汇合。在考察的过程中，会遇到重重困难，比如科考队员可以从悬崖的顶端缓缓下降到悬崖底部，却不能从悬崖底部直接攀爬到悬崖顶上，因此输入的路径都是单向的。\n\n当一个小队沿着一条路径前进后，这个小队将会记录路径上的各种信息和数据。然而有的路径需要考察队自行开辟，开辟一条路径需要耗费一定的材料，将产生一些费用。由于装备数量有限，牛牛给各小队分配的装备也可能会不同，因此，有些条件困难的路径上，有些小队会因为装备不足而无法通过。但是，牛牛通过合理地分配装备，确保了每一支小队都能顺利到达编号为 $T$ 的集结点。\n\n在他们都到达 $T$ 点汇合后，牛牛将会汇总所有的信息与数据，这些信息与数据的总价值即为这次科学考察行动的总收益。其中，如果有多支小队通过了同一条路径，由于他们记录到的关于这条路径的数据是重复的，因此价值只会计算一次。而开辟路径所花费的费用即为这次科学考察的总支出，同样，即使有多支考察队经过同一条需要开辟的路径，这条路径也只需要开辟一次。\n\n现在，牛牛希望为他的 $p$ 个小队设计出合理的行动路径，使得总收益减去总支出的值最大。", "inputFormat": "输入文件 expedition1.in~expedition10.in 已在试题目录下。\n\n对于每组输入数据：\n\n第一行 $5$ 个整数，依次为 $n,m,p,S,T$，意义如题所述。\n\n接下来 $2m$ 行，每两行描述一条路径。\n\n每条路径的第一行三个整数 $u,v,w$，表示这条路径起点为 $u$，终点为 $v$。若 $w~<~0$，则表示这条路径上的数据价值为 $w$，且不需要开辟。若 $w \\leq 0$，则表示这条路径上数据价值为 $0$，且开辟的花费为 $-w$。\n\n每条路径的第二行第一个整数 $k$，表示不能通过这条路径的小队数量。接下来 $k$ 个互不相同的整数，表示这 $k$ 个小队的编号。", "outputFormat": "输入文件 expedition1.out~expedition10.out 已在试题目录下。\n\n对于每组输入数据，你需要依次输出 $p$ 行。第 $i$ 行表示第 $i$ 个小队的行动顺序。\n\n每行第一个数 $k$，表示这个小队总共走过了多少条路径。接下来 $k$ 个数，表示这个小队从 $S$ 前往 $T$ 的过程中依次走过的路径编号。", "hint": "### 样例一解释\n\n地图上有 $4$ 个集结点与 $4$ 条路径，其中第 $1$ 支小队能通过的路径有 $1、2、4$，第二支小队能通过的路径有 $2、3、4$。最终 $1$ 小队依次通过 $1、4$ 路径，$2$ 小队依次通过 $2、3、4$ 路径。获取的总收益为 $3+5+1=9$。总支出为 $2$。总收入减总支出的值为 $9-2=7$。\n\n### 评分方法\n\n每个测试点单独评分。每个测试点你还可能获得部分分。\n\n对于每个测试点，我们设置了 $10$ 个评分参数 $a_1,a_2,a_3,…,a_9,a_{10}$。如果选手的输出不合法，则得零分。否则，在你的方案中，若考察总收益为 $w_{user}$，且存在一个最大的 $i$, 使得 $w_{user}~\\geq~a_{i}$，则你获得 $i$ 分。\n\n所有评分参数文件 expedition1.ans~expedition10.ans 已在试题目录下。\n每个评分参数文件共 $10$ 行。其中第 $i$ 行一个非负整数，表示 $a_i$。\n\n### 输入数据下载\n\n[下载链接](https://share.weiyun.com/52vCCzr)", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2016] Scientific Expedition Team", "background": "This is an **output-only problem**.", "description": "This year happens to be Youth Day on May 4th. On such a great day, the young explorer Niuniu leads his scientific expedition team to explore a primeval forest.\n\nBefore the expedition starts, Niuniu obtains a map of the forest. There are $n$ gathering points in the forest, numbered from $1$ to $n$. Between these gathering points, there are $m$ paths, numbered from $1$ to $m$. Each path starts at one gathering point and ends at another gathering point.\n\nTo improve the expedition efficiency, Niuniu divides his team into $p$ squads, and each squad can independently complete some tasks. They agree to start from the gathering point numbered $S$ and finally meet at the gathering point numbered $T$. During the expedition, they will face many difficulties. For example, team members can slowly descend from the top of a cliff to the bottom, but cannot climb directly from the bottom to the top. Therefore, all paths in the input are one-way.\n\nWhen a squad moves along a path, it records various information and testdata on that path. However, some paths need to be opened up by the expedition team themselves. Opening a path consumes certain materials and produces some cost. Due to limited equipment, the equipment assigned to each squad may be different, so on some difficult paths, some squads may be unable to pass because they lack enough equipment. However, by allocating equipment reasonably, Niuniu ensures that every squad can successfully reach the gathering point numbered $T$.\n\nAfter all squads arrive at point $T$ and meet, Niuniu will aggregate all information and testdata. The total value of this information and testdata is the total revenue of this scientific expedition. If multiple squads pass through the same path, since the data they record about this path is duplicated, its value is counted only once. The cost spent on opening paths is the total expenditure of this expedition. Similarly, even if multiple squads pass through the same path that needs to be opened, this path only needs to be opened once.\n\nNow, Niuniu hopes to design reasonable action routes for his $p$ squads so that the value of total revenue minus total expenditure is maximized.", "inputFormat": "The input files expedition1.in~expedition10.in are provided in the problem directory.\n\nFor each input dataset:\n\nThe first line contains $5$ integers $n, m, p, S, T$, with meanings as described above.\n\nThe next $2m$ lines describe the paths, with every two lines describing one path.\n\nOn the first line of each path, there are three integers $u, v, w$, indicating that the path starts at $u$ and ends at $v$. If $w < 0$, it means the data value on this path is $w$, and it does not need to be opened. If $w \\leq 0$, it means the data value on this path is $0$, and the cost to open it is $-w$.\n\nOn the second line of each path, the first integer is $k$, indicating the number of squads that cannot pass this path. Then follow $k$ distinct integers, indicating the indices of these $k$ squads.", "outputFormat": "The output files expedition1.out~expedition10.out are provided in the problem directory.\n\nFor each input dataset, you need to output $p$ lines in order. The $i$-th line describes the action sequence of squad $i$.\n\nThe first number on each line is $k$, indicating how many paths this squad has traveled in total. Then follow $k$ numbers, indicating the indices of the paths this squad travels through in order when going from $S$ to $T$.", "hint": "### Explanation for Sample 1\n\nThere are $4$ gathering points and $4$ paths on the map. The paths that squad $1$ can pass are $1, 2, 4$, and the paths that squad $2$ can pass are $2, 3, 4$. In the end, squad $1$ passes paths $1, 4$ in order, and squad $2$ passes paths $2, 3, 4$ in order. The total revenue obtained is $3 + 5 + 1 = 9$. The total expenditure is $2$. The value of total revenue minus total expenditure is $9 - 2 = 7$.\n\n### Scoring\n\nEach test point is scored independently. For each test point, you may also receive partial credit.\n\nFor each test point, we provide $10$ scoring parameters $a_1, a_2, a_3, \\dots, a_9, a_{10}$. If your output is invalid, you get $0$ points. Otherwise, in your solution, if the expedition’s total revenue is $w_{user}$, and there exists a largest $i$ such that $w_{user} \\geq a_{i}$, then you get $i$ points.\n\nAll scoring parameter files expedition1.ans~expedition10.ans are provided in the problem directory. Each scoring parameter file has $10$ lines. On the $i$-th line there is a non-negative integer indicating $a_i$.\n\n### Input Data Download\n\n[Download link](https://share.weiyun.com/52vCCzr)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2016] 科学考察队", "background": "这是一道 **提交答案题**", "description": "今年正是五四青年节。在这样的大好日子里，青年探险家牛牛带着他的科学考察队去考察一片原始森林。\n\n在考察开始前，牛牛获得了这片原始森林的地图。这片森林里有 $n$ 个集结点，编号为 $1$ 到 $n$ 的整数。在这些集结点之间，存在 $m$ 条路径，编号为 $1$ 到 $m$ 的整数。每条路径以一个集合点为起点，一个集结点为终点。\n\n为了提高科学考察的效率，牛牛将他带领的考察队分为了 $p$ 个小队，每个小队都能够独立地完成一些工作。他们约定从编号为 $S$ 的集结点出发，最终在编号为 $T$ 的集结点汇合。在考察的过程中，会遇到重重困难，比如科考队员可以从悬崖的顶端缓缓下降到悬崖底部，却不能从悬崖底部直接攀爬到悬崖顶上，因此输入的路径都是单向的。\n\n当一个小队沿着一条路径前进后，这个小队将会记录路径上的各种信息和数据。然而有的路径需要考察队自行开辟，开辟一条路径需要耗费一定的材料，将产生一些费用。由于装备数量有限，牛牛给各小队分配的装备也可能会不同，因此，有些条件困难的路径上，有些小队会因为装备不足而无法通过。但是，牛牛通过合理地分配装备，确保了每一支小队都能顺利到达编号为 $T$ 的集结点。\n\n在他们都到达 $T$ 点汇合后，牛牛将会汇总所有的信息与数据，这些信息与数据的总价值即为这次科学考察行动的总收益。其中，如果有多支小队通过了同一条路径，由于他们记录到的关于这条路径的数据是重复的，因此价值只会计算一次。而开辟路径所花费的费用即为这次科学考察的总支出，同样，即使有多支考察队经过同一条需要开辟的路径，这条路径也只需要开辟一次。\n\n现在，牛牛希望为他的 $p$ 个小队设计出合理的行动路径，使得总收益减去总支出的值最大。", "inputFormat": "输入文件 expedition1.in~expedition10.in 已在试题目录下。\n\n对于每组输入数据：\n\n第一行 $5$ 个整数，依次为 $n,m,p,S,T$，意义如题所述。\n\n接下来 $2m$ 行，每两行描述一条路径。\n\n每条路径的第一行三个整数 $u,v,w$，表示这条路径起点为 $u$，终点为 $v$。若 $w~<~0$，则表示这条路径上的数据价值为 $w$，且不需要开辟。若 $w \\leq 0$，则表示这条路径上数据价值为 $0$，且开辟的花费为 $-w$。\n\n每条路径的第二行第一个整数 $k$，表示不能通过这条路径的小队数量。接下来 $k$ 个互不相同的整数，表示这 $k$ 个小队的编号。", "outputFormat": "输入文件 expedition1.out~expedition10.out 已在试题目录下。\n\n对于每组输入数据，你需要依次输出 $p$ 行。第 $i$ 行表示第 $i$ 个小队的行动顺序。\n\n每行第一个数 $k$，表示这个小队总共走过了多少条路径。接下来 $k$ 个数，表示这个小队从 $S$ 前往 $T$ 的过程中依次走过的路径编号。", "hint": "### 样例一解释\n\n地图上有 $4$ 个集结点与 $4$ 条路径，其中第 $1$ 支小队能通过的路径有 $1、2、4$，第二支小队能通过的路径有 $2、3、4$。最终 $1$ 小队依次通过 $1、4$ 路径，$2$ 小队依次通过 $2、3、4$ 路径。获取的总收益为 $3+5+1=9$。总支出为 $2$。总收入减总支出的值为 $9-2=7$。\n\n### 评分方法\n\n每个测试点单独评分。每个测试点你还可能获得部分分。\n\n对于每个测试点，我们设置了 $10$ 个评分参数 $a_1,a_2,a_3,…,a_9,a_{10}$。如果选手的输出不合法，则得零分。否则，在你的方案中，若考察总收益为 $w_{user}$，且存在一个最大的 $i$, 使得 $w_{user}~\\geq~a_{i}$，则你获得 $i$ 分。\n\n所有评分参数文件 expedition1.ans~expedition10.ans 已在试题目录下。\n每个评分参数文件共 $10$ 行。其中第 $i$ 行一个非负整数，表示 $a_i$。\n\n### 输入数据下载\n\n[下载链接](https://share.weiyun.com/52vCCzr)", "locale": "zh-CN"}}}
{"pid": "P5422", "type": "P", "difficulty": 7, "samples": [["4 3\n1 1\n5 6\n7 8\n1 1\n1 1 1\n2 3 4\n1 1 1", "10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "轮廓线 DP"], "title": "[USACO19OPEN] Compound Escape P", "background": "", "description": "Bessie和她的朋友们被抓走并关在了远离农场的一个秘密房屋，现在该是Bessie站出来策划脱逃的时候了！这一房屋包含 $ NK $ 个排列成 $ N \\times K $ 矩形方阵的囚室，水平和垂直方向相邻的囚室之间有门互通。每个囚室中有一头奶牛。\n\nBessie黑进了系统，可以解锁任意一部分的门，但是每个门均有其代价。为了使奶牛们能够脱逃，Bessie必须打开足够多的门使得所有的奶牛可以聚集在一个房间内（这样她们就能拥有足够的力量挖地洞通向外面！）。Bessie想要使得总的解锁花费最小。\n\n但是这次行动异常关键，Bessie不能满足于仅仅一个脱逃方案：她还需要后备方案。帮助她计算最小代价脱逃方案的数量；如果某一扇门在一个方案中被解锁了而在另一个方案中没有，那么这两个方案就被认为是不同的。\n\n由于这个数字可能非常大，只需输出该数对 $ 10^9+7 $ 取模后的结果。", "inputFormat": "输入的第一行包含两个空格分隔的整数 $ N $ 和 $ K $ （ $ 2 \\leq N \\leq 30000 ,2 \\leq K \\leq 6 $ ）。\n\n以下 $ N $ 行每行包含 $ K-1 $ 个空格分隔的整数，为解锁一条水平边上的每扇门需要花费的代价。\n\n以下 $ K $ 行每行包含 $ N-1 $ 个空格分隔的整数，为解锁一条垂直边上的每扇门需要花费的代价。\n\n所有的花费均在 $ 1 $ 到 $ 10^9 $ 之间。", "outputFormat": "一个整数：最小花费的逃脱方案的数量，对 $ 10^9+7 $ 取模。", "hint": "这个测试样例描述了一个4x3的方阵，\n\n```\n     1     1\n  +-----+-----+\n  |     |     |\n1 |     |2    | 1\n  |  5  |  6  |\n  +-----+-----+\n  |     |     |\n1 |     |3    | 1\n  |  7  |  8  |\n  +-----+-----+\n  |     |     |\n1 |     |4    | 1\n  |     |     |\n  +-----+-----+\n     1    1\n```\n\n所有的最小代价脱逃方案都会使用代价为2的门，代价为3的门，以及某九个代价为1的门。由于有十种方式选择不被使用的代价为1的门，所以答案为10。\n\n### 子任务\n\n对于20%的测试数据，保证 $ N \\leq 500 $ ，所有的代价均在 $ 1 $ 到 $ 5 $ 之间。\n\n对于另外20%的测试数据，保证 $ N \\leq 5000 $ 。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] Compound Escape P", "background": "", "description": "Bessie and her friends have been captured and locked in a secret house far away from the farm, and now it is time for Bessie to step up and plan an escape. This house contains $ NK $ prison cells arranged in an $ N \\times K $ rectangular grid. There are doors connecting every pair of horizontally and vertically adjacent cells. Each cell contains one cow.\n\nBessie has hacked into the system and can unlock any subset of the doors, but each door has a cost. To allow the cows to escape, Bessie must open enough doors so that all cows can gather in a single room (so they will have enough strength to dig a tunnel to the outside). Bessie wants to minimize the total unlocking cost.\n\nHowever, this mission is extremely important, so Bessie cannot be satisfied with only one escape plan: she also needs backup plans. Help her compute the number of minimum-cost escape plans. If a door is unlocked in one plan but not unlocked in another, then the two plans are considered different.\n\nSince this number can be very large, output it modulo $ 10^9+7 $.", "inputFormat": "The first line contains two space-separated integers $ N $ and $ K $ ( $ 2 \\leq N \\leq 30000 $, $ 2 \\leq K \\leq 6 $ ).\n\nThe next $ N $ lines each contain $ K-1 $ space-separated integers, giving the cost to unlock each door on a horizontal edge.\n\nThe next $ K $ lines each contain $ N-1 $ space-separated integers, giving the cost to unlock each door on a vertical edge.\n\nAll costs are between $ 1 $ and $ 10^9 $.", "outputFormat": "One integer: the number of minimum-cost escape plans, modulo $ 10^9+7 $.", "hint": "This sample describes a $ 4 \\times 3 $ grid.\n\n```\n     1     1\n  +-----+-----+\n  |     |     |\n1 |     |2    | 1\n  |  5  |  6  |\n  +-----+-----+\n  |     |     |\n1 |     |3    | 1\n  |  7  |  8  |\n  +-----+-----+\n  |     |     |\n1 |     |4    | 1\n  |     |     |\n  +-----+-----+\n     1    1\n```\n\nAll minimum-cost escape plans will use the door with cost $ 2 $, the door with cost $ 3 $, and nine doors with cost $ 1 $. Since there are $ 10 $ ways to choose which cost $ 1 $ door is not used, the answer is $ 10 $.\n\n### Subtasks\n\nFor $ 20\\% $ of the testdata, it is guaranteed that $ N \\leq 500 $, and all costs are between $ 1 $ and $ 5 $.\n\nFor another $ 20\\% $ of the testdata, it is guaranteed that $ N \\leq 5000 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] Compound Escape P", "background": "", "description": "Bessie和她的朋友们被抓走并关在了远离农场的一个秘密房屋，现在该是Bessie站出来策划脱逃的时候了！这一房屋包含 $ NK $ 个排列成 $ N \\times K $ 矩形方阵的囚室，水平和垂直方向相邻的囚室之间有门互通。每个囚室中有一头奶牛。\n\nBessie黑进了系统，可以解锁任意一部分的门，但是每个门均有其代价。为了使奶牛们能够脱逃，Bessie必须打开足够多的门使得所有的奶牛可以聚集在一个房间内（这样她们就能拥有足够的力量挖地洞通向外面！）。Bessie想要使得总的解锁花费最小。\n\n但是这次行动异常关键，Bessie不能满足于仅仅一个脱逃方案：她还需要后备方案。帮助她计算最小代价脱逃方案的数量；如果某一扇门在一个方案中被解锁了而在另一个方案中没有，那么这两个方案就被认为是不同的。\n\n由于这个数字可能非常大，只需输出该数对 $ 10^9+7 $ 取模后的结果。", "inputFormat": "输入的第一行包含两个空格分隔的整数 $ N $ 和 $ K $ （ $ 2 \\leq N \\leq 30000 ,2 \\leq K \\leq 6 $ ）。\n\n以下 $ N $ 行每行包含 $ K-1 $ 个空格分隔的整数，为解锁一条水平边上的每扇门需要花费的代价。\n\n以下 $ K $ 行每行包含 $ N-1 $ 个空格分隔的整数，为解锁一条垂直边上的每扇门需要花费的代价。\n\n所有的花费均在 $ 1 $ 到 $ 10^9 $ 之间。", "outputFormat": "一个整数：最小花费的逃脱方案的数量，对 $ 10^9+7 $ 取模。", "hint": "这个测试样例描述了一个4x3的方阵，\n\n```\n     1     1\n  +-----+-----+\n  |     |     |\n1 |     |2    | 1\n  |  5  |  6  |\n  +-----+-----+\n  |     |     |\n1 |     |3    | 1\n  |  7  |  8  |\n  +-----+-----+\n  |     |     |\n1 |     |4    | 1\n  |     |     |\n  +-----+-----+\n     1    1\n```\n\n所有的最小代价脱逃方案都会使用代价为2的门，代价为3的门，以及某九个代价为1的门。由于有十种方式选择不被使用的代价为1的门，所以答案为10。\n\n### 子任务\n\n对于20%的测试数据，保证 $ N \\leq 500 $ ，所有的代价均在 $ 1 $ 到 $ 5 $ 之间。\n\n对于另外20%的测试数据，保证 $ N \\leq 5000 $ 。", "locale": "zh-CN"}}}
{"pid": "P5423", "type": "P", "difficulty": 7, "samples": [["3\n1 10 2\n20 100 30\n3 11 50", "30"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "并查集", "平面图欧拉公式"], "title": "[USACO19OPEN] Valleys P", "background": "", "description": "Bessie 喜欢观光，而今天她正在寻找景色优美的山谷。\n\n她感兴趣的是一个 $ N \\times N $ 的方阵，其中每个格子都有一个高度。所有在此正方形方阵之外的格子的高度可以被看作是无限大。\n\n山谷指的是一块连续、不含洞的一块区域，并且每个相邻的包围该区域的格子都高于这块区域中的所有格子。\n\n更形式化地说：\n\n* 一组格子被称作是“沿边相邻的”，如果可以从其中任意一个格子出发，经过一些沿上、下、左、右方向的移动，到达其中所有其他格子。\n* 一组格子被称作是“沿点相邻的”，如果可以从其中任意一个格子出发，经过一些沿上、下、左、右、对角线方向的移动，到达其中所有其他格子。\n* 一个“区域”指的是一组非空并且沿边相邻的格子。\n* 一个区域被称作是“有洞的”，如果这个区域的补集（包括在 $ N \\times N $ 方阵之外的无限高格子）不是沿点相邻的。\n* 区域的“边界”指的是所有与该区域内的某个格子正交相邻（上、下、左、右），但本身不在该区域内的格子。\n* 一个“山谷”指的是某个非有洞区域，满足区域内的任意格子的高度低于该区域边界上任意格子的高度。\n\nBessie 的目标是求出所有山谷的大小之和。\n\n### 一些例子\n\n这是一个区域：\n\n```\noo.\nooo\n..o\n```\n\n这不是一个区域（中间的格子和右下角的格子不沿边相邻）：\n\n```\noo.\noo.\n..o\n```\n\n这是一个非有洞区域：\n\n```\nooo\no..\no..\n```\n\n这是一个有洞的区域（“甜甜圈”中间的格子与区域外的格子不沿点相邻）：\n\n```\nooo\no.o\nooo\n```\n\n这是另一个非有洞区域（中间的格子与右下角的格子沿点相邻）：\n\n```\nooo\no.o\noo.\n```", "inputFormat": "输入的第一行包含 $ N $ ，其中 $ 1 \\leq N \\leq 750 $ 。\n\n以下 $ N $ 行每行包含 $ N $ 个整数，为方阵每个格子的高度。所有高度 $ h $ 满足 $ 1 \\leq h \\leq 10^6 $ 。所有高度均为不同的整数。", "outputFormat": "输出一个整数，为所有山谷的大小之和。", "hint": "在这个例子中，有三个大小为1的山谷：\n\n```\no.o\n...\no..\n```\n\n一个大小为2的山谷：\n\n```\n...\n...\noo.\n```\n\n一个大小为3的山谷：\n\n```\nooo\n...\n...\n```\n\n一个大小为6的山谷：\n\n```\nooo\no..\noo.\n```\n\n一个大小为7的山谷：\n\n```\nooo\no.o\noo.\n```\n\n以及一个大小为9的山谷：\n\n```\nooo\nooo\nooo\n```\n\n所以，答案为1 + 1 + 1 + 2 + 3 + 6 + 7 + 9 = 30。\n\n### 子任务\n\n对于至少19%的测试数据， $ N \\leq 100 $ 。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] Valleys P", "background": "", "description": "Bessie likes sightseeing, and today she is looking for valleys with beautiful scenery.\n\nShe is interested in an $N \\times N$ square grid, where each cell has a height. The heights of all cells outside this square grid can be considered to be infinitely large.\n\nA valley is a connected, hole-free region such that every neighboring cell surrounding this region is higher than all cells in the region.\n\nMore formally:\n\n* A set of cells is called “edge-connected” if, starting from any one of the cells, it is possible to reach all other cells in the set by moving some number of steps in the up, down, left, and right directions.\n* A set of cells is called “corner-connected” if, starting from any one of the cells, it is possible to reach all other cells in the set by moving some number of steps in the up, down, left, right, and diagonal directions.\n* A “region” is a non-empty set of edge-connected cells.\n* A region is called “with holes” if the complement of this region (including the infinitely high cells outside the $N \\times N$ grid) is not corner-connected.\n* The “boundary” of a region is the set of all cells that are orthogonally adjacent (up, down, left, right) to some cell in the region, but are not themselves in the region.\n* A “valley” is a region without holes such that the height of every cell in the region is lower than the height of every cell on the region’s boundary.\n\nBessie’s goal is to compute the sum of the sizes of all valleys.\n\n### Some examples\n\nThis is a region:\n\n```\noo.\nooo\n..o\n```\n\nThis is not a region (the middle cell and the bottom-right cell are not edge-connected):\n\n```\noo.\noo.\n..o\n```\n\nThis is a hole-free region:\n\n```\nooo\no..\no..\n```\n\nThis is a region with holes (the cell in the middle of the “donut” is not corner-connected to the outside of the region):\n\n```\nooo\no.o\nooo\n```\n\nThis is another hole-free region (the cell in the middle is corner-connected to the bottom-right cell):\n\n```\nooo\no.o\noo.\n```", "inputFormat": "The first line contains $N$, where $1 \\leq N \\leq 750$.\n\nThe next $N$ lines each contain $N$ integers, the heights of the cells in the grid. All heights $h$ satisfy $1 \\leq h \\leq 10^6$. All heights are distinct integers.", "outputFormat": "Output one integer: the sum of the sizes of all valleys.", "hint": "In this example, there are three valleys of size $1$:\n\n```\no.o\n...\no..\n```\n\nOne valley of size $2$:\n\n```\n...\n...\noo.\n```\n\nOne valley of size $3$:\n\n```\nooo\n...\n...\n```\n\nOne valley of size $6$:\n\n```\nooo\no..\noo.\n```\n\nOne valley of size $7$:\n\n```\nooo\no.o\noo.\n```\n\nAnd one valley of size $9$:\n\n```\nooo\nooo\nooo\n```\n\nSo the answer is $1 + 1 + 1 + 2 + 3 + 6 + 7 + 9 = 30$.\n\n### Subtasks\n\nFor at least $19\\%$ of the testdata, $N \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] Valleys P", "background": "", "description": "Bessie 喜欢观光，而今天她正在寻找景色优美的山谷。\n\n她感兴趣的是一个 $ N \\times N $ 的方阵，其中每个格子都有一个高度。所有在此正方形方阵之外的格子的高度可以被看作是无限大。\n\n山谷指的是一块连续、不含洞的一块区域，并且每个相邻的包围该区域的格子都高于这块区域中的所有格子。\n\n更形式化地说：\n\n* 一组格子被称作是“沿边相邻的”，如果可以从其中任意一个格子出发，经过一些沿上、下、左、右方向的移动，到达其中所有其他格子。\n* 一组格子被称作是“沿点相邻的”，如果可以从其中任意一个格子出发，经过一些沿上、下、左、右、对角线方向的移动，到达其中所有其他格子。\n* 一个“区域”指的是一组非空并且沿边相邻的格子。\n* 一个区域被称作是“有洞的”，如果这个区域的补集（包括在 $ N \\times N $ 方阵之外的无限高格子）不是沿点相邻的。\n* 区域的“边界”指的是所有与该区域内的某个格子正交相邻（上、下、左、右），但本身不在该区域内的格子。\n* 一个“山谷”指的是某个非有洞区域，满足区域内的任意格子的高度低于该区域边界上任意格子的高度。\n\nBessie 的目标是求出所有山谷的大小之和。\n\n### 一些例子\n\n这是一个区域：\n\n```\noo.\nooo\n..o\n```\n\n这不是一个区域（中间的格子和右下角的格子不沿边相邻）：\n\n```\noo.\noo.\n..o\n```\n\n这是一个非有洞区域：\n\n```\nooo\no..\no..\n```\n\n这是一个有洞的区域（“甜甜圈”中间的格子与区域外的格子不沿点相邻）：\n\n```\nooo\no.o\nooo\n```\n\n这是另一个非有洞区域（中间的格子与右下角的格子沿点相邻）：\n\n```\nooo\no.o\noo.\n```", "inputFormat": "输入的第一行包含 $ N $ ，其中 $ 1 \\leq N \\leq 750 $ 。\n\n以下 $ N $ 行每行包含 $ N $ 个整数，为方阵每个格子的高度。所有高度 $ h $ 满足 $ 1 \\leq h \\leq 10^6 $ 。所有高度均为不同的整数。", "outputFormat": "输出一个整数，为所有山谷的大小之和。", "hint": "在这个例子中，有三个大小为1的山谷：\n\n```\no.o\n...\no..\n```\n\n一个大小为2的山谷：\n\n```\n...\n...\noo.\n```\n\n一个大小为3的山谷：\n\n```\nooo\n...\n...\n```\n\n一个大小为6的山谷：\n\n```\nooo\no..\noo.\n```\n\n一个大小为7的山谷：\n\n```\nooo\no.o\noo.\n```\n\n以及一个大小为9的山谷：\n\n```\nooo\nooo\nooo\n```\n\n所以，答案为1 + 1 + 1 + 2 + 3 + 6 + 7 + 9 = 30。\n\n### 子任务\n\n对于至少19%的测试数据， $ N \\leq 100 $ 。", "locale": "zh-CN"}}}
{"pid": "P5424", "type": "P", "difficulty": 4, "samples": [["6 2\n7 9 8 2 3 2", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2019", "USACO"], "title": "[USACO19OPEN] Snakes G", "background": "", "description": "传说，数千年前圣帕特里克消灭了哞尔兰所有的蛇。然而，蛇们现在卷土重来了！圣帕特里克节是在每年的 3 月 17 日，所以 Bessie 要用彻底清除哞尔兰所有的蛇来纪念圣帕特里克。\n\nBessie装备了一个捕网，用来捕捉 $ N $ 组排成一行的蛇（ $ 1 \\leq N \\leq 400 $ ）。Bessie 必须按照这些组在这一行中出现的顺序捕捉每一组的所有蛇。每当 Bessie 抓完一组蛇之后，她就会将蛇放在笼子里，然后带着空的捕网开始捕捉下一组。\n\n一个大小为 $ s $ 的捕网意味着 Bessie 可以抓住任意包含 $ g $ 条的一组蛇，其中 $ g \\leq s $ 。然而，每当 Bessie 用大小为 $ s $ 的捕网抓住了一组 $ g $ 条蛇，就意味着浪费了 $ s-g $ 的空间。Bessie 可以任意设定捕网的初始大小，并且她可以改变 $ K $ 次捕网大小（ $ 1 \\leq K<N $ ）。\n\n请告诉 Bessie 她捕捉完所有组的蛇之后可以达到的总浪费空间的最小值。", "inputFormat": "输入的第一行包含 $ N $ 和 $ K $ 。\n\n第二行包含 $ N $ 个整数 $ a_1, \\ldots ,a_N $ ，其中 $ a_i $ （ $ 0 \\leq a_i \\leq 10^6 $ ）为第 $ i $ 组蛇的数量。", "outputFormat": "输出一个整数，为 Bessie 抓住所有蛇的总浪费空间的最小值。", "hint": "Bessie 可以设置她的捕网开始时大小为 $7$。当她抓完第一组蛇之后，她将她的捕网的大小调整为 $9$，保持这个大小直到抓完第 $3$ 组蛇，再将捕网大小调整为 $3$。总浪费空间为 $ (7-7)+(9-9)+(9-8)+(3-2)+(3-3)+(3-2)=3 $ 。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] Snakes G", "background": "", "description": "Legend says that thousands of years ago, Saint Patrick got rid of all the snakes in MooLand. However, the snakes have now returned! Saint Patrick’s Day is on March 17 every year, so Bessie wants to celebrate it by completely clearing MooLand of all snakes.\n\nBessie is equipped with a net to catch $N$ groups of snakes lined up in a row ($1 \\leq N \\leq 400$). Bessie must catch all the snakes in each group in the order the groups appear in the line. Each time Bessie finishes catching one group of snakes, she puts them into cages, and then starts catching the next group with an empty net.\n\nA net of size $s$ means that Bessie can catch any group containing $g$ snakes, where $g \\leq s$. However, whenever Bessie uses a net of size $s$ to catch a group of $g$ snakes, it wastes $s - g$ space. Bessie may choose the initial size of her net freely, and she may change the net size $K$ times ($1 \\leq K < N$).\n\nPlease tell Bessie the minimum possible total wasted space after she catches all groups of snakes.", "inputFormat": "The first line of input contains $N$ and $K$.\n\nThe second line contains $N$ integers $a_1, \\ldots, a_N$, where $a_i$ ($0 \\leq a_i \\leq 10^6$) is the number of snakes in the $i$-th group.", "outputFormat": "Output one integer: the minimum total wasted space for Bessie to catch all the snakes.", "hint": "Bessie can set her net to have an initial size of $7$. After she catches the first group of snakes, she changes her net size to $9$, keeps this size until she catches the $3$-rd group, and then changes the net size to $3$. The total wasted space is $(7-7)+(9-9)+(9-8)+(3-2)+(3-3)+(3-2)=3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] Snakes G", "background": "", "description": "传说，数千年前圣帕特里克消灭了哞尔兰所有的蛇。然而，蛇们现在卷土重来了！圣帕特里克节是在每年的 3 月 17 日，所以 Bessie 要用彻底清除哞尔兰所有的蛇来纪念圣帕特里克。\n\nBessie装备了一个捕网，用来捕捉 $ N $ 组排成一行的蛇（ $ 1 \\leq N \\leq 400 $ ）。Bessie 必须按照这些组在这一行中出现的顺序捕捉每一组的所有蛇。每当 Bessie 抓完一组蛇之后，她就会将蛇放在笼子里，然后带着空的捕网开始捕捉下一组。\n\n一个大小为 $ s $ 的捕网意味着 Bessie 可以抓住任意包含 $ g $ 条的一组蛇，其中 $ g \\leq s $ 。然而，每当 Bessie 用大小为 $ s $ 的捕网抓住了一组 $ g $ 条蛇，就意味着浪费了 $ s-g $ 的空间。Bessie 可以任意设定捕网的初始大小，并且她可以改变 $ K $ 次捕网大小（ $ 1 \\leq K<N $ ）。\n\n请告诉 Bessie 她捕捉完所有组的蛇之后可以达到的总浪费空间的最小值。", "inputFormat": "输入的第一行包含 $ N $ 和 $ K $ 。\n\n第二行包含 $ N $ 个整数 $ a_1, \\ldots ,a_N $ ，其中 $ a_i $ （ $ 0 \\leq a_i \\leq 10^6 $ ）为第 $ i $ 组蛇的数量。", "outputFormat": "输出一个整数，为 Bessie 抓住所有蛇的总浪费空间的最小值。", "hint": "Bessie 可以设置她的捕网开始时大小为 $7$。当她抓完第一组蛇之后，她将她的捕网的大小调整为 $9$，保持这个大小直到抓完第 $3$ 组蛇，再将捕网大小调整为 $3$。总浪费空间为 $ (7-7)+(9-9)+(9-8)+(3-2)+(3-3)+(3-2)=3 $ 。", "locale": "zh-CN"}}}
{"pid": "P5425", "type": "P", "difficulty": 4, "samples": [["3 2", "2019201769"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2019", "USACO", "生成树"], "title": "[USACO19OPEN] I Would Walk 500 Miles G", "background": "", "description": "Farmer John 想要将他的编号为 $ 1 \\ldots N $ 的 $ N $ 头奶牛（ $ N \\leq 7500 $ ）分为非空的 $ K $ 组（ $ 2 \\leq K \\leq N $ ），使得任意两头来自不同组的奶牛都需要走一定的距离才能相遇。奶牛 $ x $ 和奶牛 $ y $ （其中 $ 1 \\leq x<y \\leq N $ ）愿意为了见面走 $ (2019201913x+2019201949y) \\mod 2019201997 $ 英里。\n\n给定一个将 $ N $ 头奶牛分为 $ K $ 个非空小组的分组方案，令 $ M $ 为任意两头来自不同组的奶牛愿意为了见面行走的英里数的最小值。为了测试奶牛们相互之间的忠诚度，Farmer John 想要将 $ N $ 头奶牛以最佳的方式分为 $ K $ 组，使得 $ M $ 尽可能大。 ", "inputFormat": "输入仅有一行，包含 $ N $ 和 $ K $ ，用空格分隔。", "outputFormat": "输出最优的 $ M $ 。", "hint": "在这个例子中，奶牛 $1$ 和奶牛 $2$ 愿意为了见面走 $2019201817$ 英里。奶牛 $2$ 和奶牛 $3$ 愿意走 $2019201685$ 英里。奶牛 $1$ 和奶牛 $3$ 愿意走 $2019201769$ 英里。所以，将奶牛 $1$ 单独分为一组，奶牛 $2$ 和奶牛 $3$ 分为一组，$M = \\min(2019201817, 2019201769) = 2019201769$（这是我们在这个问题中能够达到的最佳结果）。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] I Would Walk 500 Miles G", "background": "", "description": "Farmer John wants to divide his $N$ cows numbered $1 \\ldots N$ ($N \\leq 7500$) into $K$ non-empty groups ($2 \\leq K \\leq N$), such that any two cows from different groups must walk some distance to meet each other. Cows $x$ and $y$ (where $1 \\leq x<y \\leq N$) are willing to walk $(2019201913x+2019201949y) \\mod 2019201997$ miles in order to meet.\n\nGiven a grouping plan that divides the $N$ cows into $K$ non-empty groups, let $M$ be the minimum number of miles that any two cows from different groups are willing to walk to meet. To test the cows' loyalty to each other, Farmer John wants to divide the $N$ cows into $K$ groups in the best possible way so that $M$ is as large as possible.", "inputFormat": "The input consists of a single line containing $N$ and $K$, separated by a space.", "outputFormat": "Output the optimal value of $M$.", "hint": "In this example, cow $1$ and cow $2$ are willing to walk $2019201817$ miles to meet. Cow $2$ and cow $3$ are willing to walk $2019201685$ miles. Cow $1$ and cow $3$ are willing to walk $2019201769$ miles. Therefore, if cow $1$ is put alone in one group, and cows $2$ and $3$ are put into another group, then $M = \\min(2019201817, 2019201769) = 2019201769$ (this is the best result we can achieve in this problem).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] I Would Walk 500 Miles G", "background": "", "description": "Farmer John 想要将他的编号为 $ 1 \\ldots N $ 的 $ N $ 头奶牛（ $ N \\leq 7500 $ ）分为非空的 $ K $ 组（ $ 2 \\leq K \\leq N $ ），使得任意两头来自不同组的奶牛都需要走一定的距离才能相遇。奶牛 $ x $ 和奶牛 $ y $ （其中 $ 1 \\leq x<y \\leq N $ ）愿意为了见面走 $ (2019201913x+2019201949y) \\mod 2019201997 $ 英里。\n\n给定一个将 $ N $ 头奶牛分为 $ K $ 个非空小组的分组方案，令 $ M $ 为任意两头来自不同组的奶牛愿意为了见面行走的英里数的最小值。为了测试奶牛们相互之间的忠诚度，Farmer John 想要将 $ N $ 头奶牛以最佳的方式分为 $ K $ 组，使得 $ M $ 尽可能大。 ", "inputFormat": "输入仅有一行，包含 $ N $ 和 $ K $ ，用空格分隔。", "outputFormat": "输出最优的 $ M $ 。", "hint": "在这个例子中，奶牛 $1$ 和奶牛 $2$ 愿意为了见面走 $2019201817$ 英里。奶牛 $2$ 和奶牛 $3$ 愿意走 $2019201685$ 英里。奶牛 $1$ 和奶牛 $3$ 愿意走 $2019201769$ 英里。所以，将奶牛 $1$ 单独分为一组，奶牛 $2$ 和奶牛 $3$ 分为一组，$M = \\min(2019201817, 2019201769) = 2019201769$（这是我们在这个问题中能够达到的最佳结果）。", "locale": "zh-CN"}}}
{"pid": "P5426", "type": "P", "difficulty": 5, "samples": [["5\n0 0 0 1 0 1 0 0 0 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2019", "USACO", "枚举"], "title": "[USACO19OPEN] Balancing Inversions G", "background": "", "description": "Bessie 和 Elsie 在一个长为 $2N$ 的布尔数组 $A$ 上玩游戏（$1 \\leq N \\leq 10^5$）。Bessie 的分数为 $A$ 的前一半的逆序对数量，Elsie 的分数为 $A$ 的后一半的逆序对数量。逆序对指的是满足 $A[i] = 1$ 以及 $A[j] = 0$ 的一对元素，其中 $i < j$。例如，一段 $0$ 之后接着一段 $1$ 的数组没有逆序对，一段 $X$ 个 $1$ 之后接着一段 $Y$ 个 $0$ 的数组有 $XY$ 个逆序对。\n\nFarmer John 偶然看见了这一棋盘，他好奇于可以使得游戏看起来成为平局所需要交换相邻元素的最小次数。请帮助 Farmer John 求出这个问题的答案。\n", "inputFormat": "输入的第一行包含 $N$，第二行包含 $2N$ 个为 $0$ 或 $1$ 的整数。", "outputFormat": "输出使得游戏成为平局最少需要的移动次数。", "hint": "在这个例子中，初始时前一半有 $1$ 个逆序对，后一半有 $3$ 个逆序对。交换了第 $5$ 和第 $6$ 个数之后，两个子数组均有 $0$ 个逆序对。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] Balancing Inversions G", "background": "", "description": "Bessie and Elsie are playing a game on a boolean array $A$ of length $2N$ ($1 \\leq N \\leq 10^5$). Bessie's score is the number of inversions in the first half of $A$, and Elsie's score is the number of inversions in the second half of $A$. An inversion is a pair of elements satisfying $A[i] = 1$ and $A[j] = 0$, where $i < j$. For example, an array with a block of $0$'s followed by a block of $1$'s has no inversions, while an array with $X$ $1$'s followed by $Y$ $0$'s has $XY$ inversions.\n\nFarmer John happens to see this board, and he wonders what the minimum number of adjacent swaps is to make the game appear tied. Please help Farmer John compute the answer.", "inputFormat": "The first line contains $N$. The second line contains $2N$ integers, each being $0$ or $1$.", "outputFormat": "Output the minimum number of moves needed to make the game tied.", "hint": "In this example, initially the first half has $1$ inversion and the second half has $3$ inversions. After swapping the $5$-th and the $6$-th numbers, both subarrays have $0$ inversions.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] Balancing Inversions G", "background": "", "description": "Bessie 和 Elsie 在一个长为 $2N$ 的布尔数组 $A$ 上玩游戏（$1 \\leq N \\leq 10^5$）。Bessie 的分数为 $A$ 的前一半的逆序对数量，Elsie 的分数为 $A$ 的后一半的逆序对数量。逆序对指的是满足 $A[i] = 1$ 以及 $A[j] = 0$ 的一对元素，其中 $i < j$。例如，一段 $0$ 之后接着一段 $1$ 的数组没有逆序对，一段 $X$ 个 $1$ 之后接着一段 $Y$ 个 $0$ 的数组有 $XY$ 个逆序对。\n\nFarmer John 偶然看见了这一棋盘，他好奇于可以使得游戏看起来成为平局所需要交换相邻元素的最小次数。请帮助 Farmer John 求出这个问题的答案。\n", "inputFormat": "输入的第一行包含 $N$，第二行包含 $2N$ 个为 $0$ 或 $1$ 的整数。", "outputFormat": "输出使得游戏成为平局最少需要的移动次数。", "hint": "在这个例子中，初始时前一半有 $1$ 个逆序对，后一半有 $3$ 个逆序对。交换了第 $5$ 和第 $6$ 个数之后，两个子数组均有 $0$ 个逆序对。", "locale": "zh-CN"}}}
{"pid": "P5427", "type": "P", "difficulty": 4, "samples": [["3\nRLR\nRRL\nLLR", "1 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2019", "USACO", "Ad-hoc"], "title": "[USACO19OPEN] Left Out S", "background": "", "description": "Farmer John 正在尝试给他的牛群拍照。根据以往的经验，他知道这一工作往往结果不怎么样。\n\n这一次，Farmer John 购买了一台昂贵的无人机，想要拍一张航拍照。为了使照片尽可能好看，他想让他的奶牛们在拍照时都朝向同一个方向。奶牛们现在在一块有围栏的草地上排列成 $N \\times N$（$2 \\leq N \\leq 1000$）的方阵，例如：\n\n```\nRLR\nRRL\nLLR\n```\n\n这里，字符 `R` 表示一头朝右的奶牛，字符 `L` 表示一头朝左的奶牛。由于奶牛们都挤在一起，Farmer John 没办法走到某一头奶牛面前让她调转方向。他能做的只有对着某一行或某一列的奶牛喊叫让她们调转方向，使得被叫到的这一行或列内的所有 `L` 变为 `R`，`R` 变为 `L`。Farmer John 可以对任意多的行或列发号施令，也可以对同一行或列多次发令。\n\n就如同 Farmer John 想象的，他发现他不可能让他的奶牛们都朝向同一个方向。他最多能做的是让所有奶牛中除了一头之外都朝向相同的方向。请找出这样的一头奶牛。\n", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行描述了奶牛方阵的第 $1 \\ldots N$ 行，每行包含一个长度为 $N$ 的字符串。", "outputFormat": "输出一头奶牛的行列坐标，满足这头奶牛被调转方向的话，Farmer John 就可以使他的所有奶牛都朝向同一个方向。如果不存在这样的奶牛，输出 `-1`。如果存在多头这样的奶牛，输出其中行坐标最小的，如果多头这样的奶牛具有相同的行坐标，输出其中列坐标最小的。", "hint": "在这个例子中，位于第 $1$ 行第 $1$ 列（左上角）的奶牛是那头令人讨厌的奶牛，因为 Farmer John 可以喊叫第 $2$ 行和第 $3$ 列来让所有奶牛都面向左侧，只有这一头奶牛面向右侧。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] Left Out S", "background": "", "description": "Farmer John is trying to take a photo of his cows. Based on past experience, he knows that this often does not turn out very well.\n\nThis time, Farmer John bought an expensive drone and wants to take an aerial photo. To make the photo look as good as possible, he wants all of his cows to face the same direction when the photo is taken. The cows are currently arranged on a fenced pasture in an $N \\times N$ ($2 \\leq N \\leq 1000$) square grid, for example:\n\n```\nRLR\nRRL\nLLR\n```\n\nHere, the character `R` represents a cow facing right, and `L` represents a cow facing left. Since the cows are packed closely together, Farmer John cannot walk up to a single cow and make her turn around. The only thing he can do is shout at an entire row or an entire column of cows to make them turn around, which flips all `L` to `R` and all `R` to `L` in that row or column. Farmer John may issue commands to any number of rows or columns, and may even issue commands multiple times to the same row or column.\n\nJust as Farmer John expected, he finds that it is impossible to make all cows face the same direction. The best he can do is to make all cows except one face the same direction. Please find such a cow.", "inputFormat": "The first line contains $N$. The next $N$ lines describe rows $1 \\ldots N$ of the cow grid, each containing a string of length $N$.", "outputFormat": "Output the row and column coordinates of a cow such that, if that cow were flipped, Farmer John could make all of his cows face the same direction. If no such cow exists, output `-1`. If there are multiple such cows, output the one with the smallest row index; if multiple have the same row index, output the one with the smallest column index.", "hint": "In this example, the cow at row $1$, column $1$ (the top-left corner) is the annoying cow, because Farmer John can shout at row $2$ and column $3$ to make all cows face left, with only this cow facing right.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] Left Out S", "background": "", "description": "Farmer John 正在尝试给他的牛群拍照。根据以往的经验，他知道这一工作往往结果不怎么样。\n\n这一次，Farmer John 购买了一台昂贵的无人机，想要拍一张航拍照。为了使照片尽可能好看，他想让他的奶牛们在拍照时都朝向同一个方向。奶牛们现在在一块有围栏的草地上排列成 $N \\times N$（$2 \\leq N \\leq 1000$）的方阵，例如：\n\n```\nRLR\nRRL\nLLR\n```\n\n这里，字符 `R` 表示一头朝右的奶牛，字符 `L` 表示一头朝左的奶牛。由于奶牛们都挤在一起，Farmer John 没办法走到某一头奶牛面前让她调转方向。他能做的只有对着某一行或某一列的奶牛喊叫让她们调转方向，使得被叫到的这一行或列内的所有 `L` 变为 `R`，`R` 变为 `L`。Farmer John 可以对任意多的行或列发号施令，也可以对同一行或列多次发令。\n\n就如同 Farmer John 想象的，他发现他不可能让他的奶牛们都朝向同一个方向。他最多能做的是让所有奶牛中除了一头之外都朝向相同的方向。请找出这样的一头奶牛。\n", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行描述了奶牛方阵的第 $1 \\ldots N$ 行，每行包含一个长度为 $N$ 的字符串。", "outputFormat": "输出一头奶牛的行列坐标，满足这头奶牛被调转方向的话，Farmer John 就可以使他的所有奶牛都朝向同一个方向。如果不存在这样的奶牛，输出 `-1`。如果存在多头这样的奶牛，输出其中行坐标最小的，如果多头这样的奶牛具有相同的行坐标，输出其中列坐标最小的。", "hint": "在这个例子中，位于第 $1$ 行第 $1$ 列（左上角）的奶牛是那头令人讨厌的奶牛，因为 Farmer John 可以喊叫第 $2$ 行和第 $3$ 列来让所有奶牛都面向左侧，只有这一头奶牛面向右侧。", "locale": "zh-CN"}}}
{"pid": "P5428", "type": "P", "difficulty": 5, "samples": [["4\n2 1 6 1\n4 0 1 5\n5 6 5 5\n2 7 1 3", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["计算几何", "2019", "二分", "USACO", "叉积"], "title": "[USACO19OPEN] Cow Steeplechase II S", "background": "", "description": "在过去，Farmer John曾经构思了许多新式奶牛运动项目的点子，其中就包括奶牛障碍赛，是奶牛们在赛道上跑越障碍栏架的竞速项目。他之前对推广这项运动做出的努力结果喜忧参半，所以他希望在他的农场上建造一个更大的奶牛障碍赛的场地，试着让这项运动更加普及。\n\nFarmer John为新场地精心设计了 $ N $ 个障碍栏架，编号为 $ 1 \\ldots \n N $ （ $ 2 \\leq N \\leq 10^5 $ ），每一个栏架都可以用这一场地的二维地图中的一条线段来表示。这些线段本应两两不相交，包括端点位置。\n\n不幸的是，Farmer John在绘制场地地图的时候不够仔细，现在发现线段之间出现了交点。然而，他同时注意到只要移除一条线段，这张地图就可以恢复到预期没有相交线段的状态（包括端点位置）。\n\n请求出Farmer John为了恢复没有线段相交这一属性所需要从他的计划中删去的一条线段。如果有多条线段移除后均可满足条件，请输出在输入中出现最早的线段的序号。", "inputFormat": "输入的第一行包含 $ N $ 。余下 $ N $ 行每行用四个整数 $ x_1,y_1,x_2,y_2 $ 表示一条线段，均为至多 $ 10^9 $ 的非负整数。这条线段的端点为 $ (x_1,y_1) $ 和 $ (x_2,y_2) $ 。所有线段的端点各不相同。", "outputFormat": "输出在输入中出现最早的移除之后可以使得余下线段各不相交的线段序号。", "hint": "注意：由于线段端点坐标数值的大小，在这个问题中你可能需要考虑整数类型溢出的情况。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO19OPEN] Cow Steeplechase II S", "background": "", "description": "In the past, Farmer John has come up with many ideas for new cow sports, including cow steeplechase, a racing event where cows run along a track and jump over hurdles. His previous efforts to promote this sport had mixed results, so he wants to build a larger cow steeplechase venue on his farm to try to make the sport more popular.\n\nFarmer John carefully designed $N$ hurdles for the new venue, numbered $1 \\ldots N$ ($2 \\leq N \\leq 10^5$). Each hurdle can be represented as a line segment on the 2D map of the venue. These segments were supposed to be pairwise non-intersecting, including at endpoints.\n\nUnfortunately, Farmer John was not careful enough when drawing the map and now finds that there are intersections between segments. However, he also notices that as long as he removes one segment, the map can be restored to the intended state where no segments intersect (including at endpoints).\n\nPlease find one segment that Farmer John needs to delete from his plan to restore the property that no segments intersect. If removing multiple segments can satisfy the condition, output the index of the segment that appears earliest in the input.", "inputFormat": "The first line contains $N$. The next $N$ lines each contain four integers $x_1, y_1, x_2, y_2$, all non-negative integers of value at most $10^9$, describing a segment. The endpoints of the segment are $(x_1, y_1)$ and $(x_2, y_2)$. All segment endpoints are distinct.", "outputFormat": "Output the index of the earliest segment in the input such that after removing it, all remaining segments are pairwise non-intersecting.", "hint": "Note: Because the endpoint coordinates can be very large, you may need to consider integer overflow in this problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO19OPEN] Cow Steeplechase II S", "background": "", "description": "在过去，Farmer John曾经构思了许多新式奶牛运动项目的点子，其中就包括奶牛障碍赛，是奶牛们在赛道上跑越障碍栏架的竞速项目。他之前对推广这项运动做出的努力结果喜忧参半，所以他希望在他的农场上建造一个更大的奶牛障碍赛的场地，试着让这项运动更加普及。\n\nFarmer John为新场地精心设计了 $ N $ 个障碍栏架，编号为 $ 1 \\ldots \n N $ （ $ 2 \\leq N \\leq 10^5 $ ），每一个栏架都可以用这一场地的二维地图中的一条线段来表示。这些线段本应两两不相交，包括端点位置。\n\n不幸的是，Farmer John在绘制场地地图的时候不够仔细，现在发现线段之间出现了交点。然而，他同时注意到只要移除一条线段，这张地图就可以恢复到预期没有相交线段的状态（包括端点位置）。\n\n请求出Farmer John为了恢复没有线段相交这一属性所需要从他的计划中删去的一条线段。如果有多条线段移除后均可满足条件，请输出在输入中出现最早的线段的序号。", "inputFormat": "输入的第一行包含 $ N $ 。余下 $ N $ 行每行用四个整数 $ x_1,y_1,x_2,y_2 $ 表示一条线段，均为至多 $ 10^9 $ 的非负整数。这条线段的端点为 $ (x_1,y_1) $ 和 $ (x_2,y_2) $ 。所有线段的端点各不相同。", "outputFormat": "输出在输入中出现最早的移除之后可以使得余下线段各不相交的线段序号。", "hint": "注意：由于线段端点坐标数值的大小，在这个问题中你可能需要考虑整数类型溢出的情况。", "locale": "zh-CN"}}}
