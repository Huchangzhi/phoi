{"pid": "P8152", "type": "P", "difficulty": 1, "samples": [["2 2", "7"], ["5 3", "73"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「PMOI-5」破译", "background": "2077 年，穿越的 Lanuxhem 为与 2021 年的 Silver187 联系，发明了一种图形转数字的密码。", "description": "lhm 现在有一个边长为 $1$ 的正方形，现在要进行 $k$ 次分割，每次分割需要把位于图形中右下角的矩形继续分割成 $n \\times n$ 的矩形。分割完成后所有矩形的个数即为破译后的答案。lhm 需要聪明的你帮助他解决这个问题。\n\n注：由于题面形容比较困难，请移步至样例解释便于理解题意。", "inputFormat": "输入数据共一行。      \n一行两个整数 $n,k$，含义如题目所示。", "outputFormat": "输出格式共一行。  \n一行一个整数，表示最终答案。   \n由于答案可能过大，请把答案取模 $998244353$ 后输出。", "hint": "### 样例解释\n\n对于样例 #1，进行 $2$ 次分割，每次将右下角矩形分割为 $2\\times 2$ 的矩形。\n\n第一次分割，由于只有一个矩形，所以右下角矩形即为此矩形。分割前后如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdlnmb52.png)\n\n变为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cyemqw87.png)\n\n接下来进行第二次分割，将右下角矩形进行分割，分割为如下图形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9n3c3te2.png)\n\n此图形包含 $7$ 个矩形，因此答案为 $7$。\n\n### 数据规模与约定\n\n对于 $10\\%$ 的数据，$k=1$。          \n对于另 $20\\%$ 的数据，$1 \\leq n,k \\leq 10$。   \n对于 $100\\%$ 的数据，$1 \\leq n,k \\leq 10^9$。\n\n---\n\n$2022.7.10$：新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」破译", "background": "2077 年，穿越的 Lanuxhem 为与 2021 年的 Silver187 联系，发明了一种图形转数字的密码。", "description": "lhm 现在有一个边长为 $1$ 的正方形，现在要进行 $k$ 次分割，每次分割需要把位于图形中右下角的矩形继续分割成 $n \\times n$ 的矩形。分割完成后所有矩形的个数即为破译后的答案。lhm 需要聪明的你帮助他解决这个问题。\n\n注：由于题面形容比较困难，请移步至样例解释便于理解题意。", "inputFormat": "输入数据共一行。      \n一行两个整数 $n,k$，含义如题目所示。", "outputFormat": "输出格式共一行。  \n一行一个整数，表示最终答案。   \n由于答案可能过大，请把答案取模 $998244353$ 后输出。", "hint": "### 样例解释\n\n对于样例 #1，进行 $2$ 次分割，每次将右下角矩形分割为 $2\\times 2$ 的矩形。\n\n第一次分割，由于只有一个矩形，所以右下角矩形即为此矩形。分割前后如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdlnmb52.png)\n\n变为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cyemqw87.png)\n\n接下来进行第二次分割，将右下角矩形进行分割，分割为如下图形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9n3c3te2.png)\n\n此图形包含 $7$ 个矩形，因此答案为 $7$。\n\n### 数据规模与约定\n\n对于 $10\\%$ 的数据，$k=1$。          \n对于另 $20\\%$ 的数据，$1 \\leq n,k \\leq 10$。   \n对于 $100\\%$ 的数据，$1 \\leq n,k \\leq 10^9$。\n\n---\n\n$2022.7.10$：新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN"}}}
{"pid": "P8153", "type": "P", "difficulty": 4, "samples": [["1\n1100", "4"], ["5\n10010\n10000\n01110\n111111\n000000", "48 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "2022"], "title": "「PMOI-5」送分题/Yet Another Easy Strings Merging", "background": "**本题征集假做法和 hack 数据，如果您用假做法 AC 了，欢迎私信出题人提供 hack。**\n\n> 信息可能有冗余。\n\n——command_block 《考前小贴士》\n\ndjy 在看 P8001，看错题了，很自闭，然后就有了这个题。", "description": "给定 $n$ 个 01 串，每次你可以从某个串开头移除一个字符并把**剩下的字符串**加入一个新串 $S$ 的末尾。最大化 $S$ 中相邻两个字符相同的对数。\n\n例如你有 `1010 111` 两个串，如果你移除第一个串的第一个字符，则 `010` 被加入到 $S$ 中。\n\n**串可以重复使用。**", "inputFormat": "第一行一个正整数 $n$ 表示串的个数。\n\n接下来 $n$ 行，每行一个 01 字符串。", "outputFormat": "一行一个整数表示答案。\n\n", "hint": "【样例解释】\n\n依次取走第一个字符，$S$ 的变化过程为 `100->10000->100000`，答案为 $4$。\n\n【数据范围】\n\n记 $|s|$ 为字符串 $s$ 的长度，$s_i$ 为第 $i$ 个字符串  。    \n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$n,\\sum|s_i|\\le 11$；\n- Subtask 2（30 pts）：$n,\\sum|s_i|\\le 10^3$；\n- Subtask 3（30 pts）：$n,\\sum|s_i|\\le 10^5$；\n- Subtask 4（10 pts）：无特殊限制。   \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$n\\le \\sum |s_i|\\le 10^6$，$\\forall i\\in [1,n]$，$|s_i|\\ge 1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」送分题/Yet Another Easy Strings Merging", "background": "**本题征集假做法和 hack 数据，如果您用假做法 AC 了，欢迎私信出题人提供 hack。**\n\n> 信息可能有冗余。\n\n——command_block 《考前小贴士》\n\ndjy 在看 P8001，看错题了，很自闭，然后就有了这个题。", "description": "给定 $n$ 个 01 串，每次你可以从某个串开头移除一个字符并把**剩下的字符串**加入一个新串 $S$ 的末尾。最大化 $S$ 中相邻两个字符相同的对数。\n\n例如你有 `1010 111` 两个串，如果你移除第一个串的第一个字符，则 `010` 被加入到 $S$ 中。\n\n**串可以重复使用。**", "inputFormat": "第一行一个正整数 $n$ 表示串的个数。\n\n接下来 $n$ 行，每行一个 01 字符串。", "outputFormat": "一行一个整数表示答案。\n\n", "hint": "【样例解释】\n\n依次取走第一个字符，$S$ 的变化过程为 `100->10000->100000`，答案为 $4$。\n\n【数据范围】\n\n记 $|s|$ 为字符串 $s$ 的长度，$s_i$ 为第 $i$ 个字符串  。    \n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$n,\\sum|s_i|\\le 11$；\n- Subtask 2（30 pts）：$n,\\sum|s_i|\\le 10^3$；\n- Subtask 3（30 pts）：$n,\\sum|s_i|\\le 10^5$；\n- Subtask 4（10 pts）：无特殊限制。   \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$n\\le \\sum |s_i|\\le 10^6$，$\\forall i\\in [1,n]$，$|s_i|\\ge 1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8154", "type": "P", "difficulty": 5, "samples": [["1", "NO"], ["7", "YES\n2 4\n2 6\n4 6\n5 4\n6 4\n6 2\n4 2\n0 6\n2 8\n6 6\n8 2\n6 0\n3 0\n2 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["计算几何", "Special Judge", "枚举", "构造"], "title": "「PMOI-5」棋盘", "background": "", "description": "给定一个无限大的棋盘（可以看做平面直角坐标系）和黑白子各 $n$ 颗，要求将黑白子不重叠地摆在棋盘的整点上，使得**恰好**存在 $n$ 条直线使得：\n\n- 其穿过且**仅**穿过黑白子**共** 4 颗。\n\n- 其按顺序穿过黑，白，白，黑子。\n\n给出任意一种方案即可。", "inputFormat": "输入数据仅一行，为题目中所述的 $n$。", "outputFormat": "如果无法构造出方案，则输出 `NO`。\n\n否则输出 $2n+1$ 行：第一行输出 `YES`。第 $2\\sim n+1$ 行每行两个整数，为白子坐标 $x_i,y_i$。第 $n+2\\sim 2n+1$ 行每行两个整数，为黑子坐标 $x_j,y_j$。\n\n你需要保证 $-5\\times 10^5\\le x_i,y_i,x_j,y_j\\le 5\\times 10^5$。", "hint": "【样例解释】\n\n样例 2 解释：（输出按顺序为点 $A\\sim N$（点 $A\\sim G$ 为白子，点 $H\\sim N$ 为黑子），直线如图所示）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zyo823p8.png)\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n\\equiv 0 \\pmod{7}$；\n- Subtask 2（20 pts）：$40\\le n\\le 400$；\n- Subtask 3（30 pts）：$1\\le n\\le 9$；\n- Subtask 4（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^3$。\n\n[SPJ地址](https://www.luogu.com.cn/paste/eamtmrw5)\n\n使用方法：编译为 `checker.exe` 后命令行同一目录下输入 ```checker.exe chessboard.in chessboard.out chessboard.ans```\n\n需要搭配 `testlib.h` 一起使用，[testlib下载地址](https://github.com/MikeMirzayanov/testlib)。\n\n如果发现 SPJ 出锅了请找出题人。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」棋盘", "background": "", "description": "给定一个无限大的棋盘（可以看做平面直角坐标系）和黑白子各 $n$ 颗，要求将黑白子不重叠地摆在棋盘的整点上，使得**恰好**存在 $n$ 条直线使得：\n\n- 其穿过且**仅**穿过黑白子**共** 4 颗。\n\n- 其按顺序穿过黑，白，白，黑子。\n\n给出任意一种方案即可。", "inputFormat": "输入数据仅一行，为题目中所述的 $n$。", "outputFormat": "如果无法构造出方案，则输出 `NO`。\n\n否则输出 $2n+1$ 行：第一行输出 `YES`。第 $2\\sim n+1$ 行每行两个整数，为白子坐标 $x_i,y_i$。第 $n+2\\sim 2n+1$ 行每行两个整数，为黑子坐标 $x_j,y_j$。\n\n你需要保证 $-5\\times 10^5\\le x_i,y_i,x_j,y_j\\le 5\\times 10^5$。", "hint": "【样例解释】\n\n样例 2 解释：（输出按顺序为点 $A\\sim N$（点 $A\\sim G$ 为白子，点 $H\\sim N$ 为黑子），直线如图所示）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zyo823p8.png)\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n\\equiv 0 \\pmod{7}$；\n- Subtask 2（20 pts）：$40\\le n\\le 400$；\n- Subtask 3（30 pts）：$1\\le n\\le 9$；\n- Subtask 4（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^3$。\n\n[SPJ地址](https://www.luogu.com.cn/paste/eamtmrw5)\n\n使用方法：编译为 `checker.exe` 后命令行同一目录下输入 ```checker.exe chessboard.in chessboard.out chessboard.ans```\n\n需要搭配 `testlib.h` 一起使用，[testlib下载地址](https://github.com/MikeMirzayanov/testlib)。\n\n如果发现 SPJ 出锅了请找出题人。", "locale": "zh-CN"}}}
{"pid": "P8155", "type": "P", "difficulty": 5, "samples": [["5 5\n5 4 3 2 1", "4"], ["10 6154\n1 3 6 4 2 5 7 8 1 2\n", "263"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化"], "title": "「PMOI-5」公约数变换", "background": "", "description": "给出一个常数 $m$ 和长度为 $n$ 的序列 $a$。\n\n定义一次「公约数变换」为：   \n先令 $b_i\\leftarrow a_i+\\gcd(m,a_1,...,a_i)$，最后令 $a_i\\leftarrow b_i$。（注意是先把每个 $b_i$ 都算出来再一一赋值，而不是边算边赋值）\n\n请问最少做几次「公约数变换」使得 $\\forall i \\in[1,n]$，$m|a_i$。\n\n**可以证明一定有解。**", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示序列长度和给出的常数。   \n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "【样例解释 1】  \n\n第一次「公约数变换」后的序列为 $10,5,4,3,2$。    \n第二次「公约数变换」后的序列为 $15,10,5,4,3$。   \n第三次「公约数变换」后的序列为 $20,15,10,5,4$。   \n第四次「公约数变换」后的序列为 $25,20,15,10,5$。   \n可以得出答案为 $4$。\n\n【数据范围】   \n**本题采用捆绑测试。**\n\n- Subtask1（5pts）：$m=1$；\n- Subtask2（10pts）：$m=2$；\n- Subtask3（10pts）：$n=1$ 且 $m\\le 500$；\n- Subtask4（15pts）：$n=1$；\n- Subtask5（10pts）：$n\\le 5000$；\n- Subtask6（20pts）：$n\\le 5\\times 10^4$；\n- Subtask7（10pts）：$m,a_i\\le 10^{9}$；\n- Subtask8（20pts）：无特殊限制；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{5}$，$1\\le m\\le 10^{14}$，$1\\le a_i\\le 10^{18}$。保证答案在 `long long` 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」公约数变换", "background": "", "description": "给出一个常数 $m$ 和长度为 $n$ 的序列 $a$。\n\n定义一次「公约数变换」为：   \n先令 $b_i\\leftarrow a_i+\\gcd(m,a_1,...,a_i)$，最后令 $a_i\\leftarrow b_i$。（注意是先把每个 $b_i$ 都算出来再一一赋值，而不是边算边赋值）\n\n请问最少做几次「公约数变换」使得 $\\forall i \\in[1,n]$，$m|a_i$。\n\n**可以证明一定有解。**", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示序列长度和给出的常数。   \n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "【样例解释 1】  \n\n第一次「公约数变换」后的序列为 $10,5,4,3,2$。    \n第二次「公约数变换」后的序列为 $15,10,5,4,3$。   \n第三次「公约数变换」后的序列为 $20,15,10,5,4$。   \n第四次「公约数变换」后的序列为 $25,20,15,10,5$。   \n可以得出答案为 $4$。\n\n【数据范围】   \n**本题采用捆绑测试。**\n\n- Subtask1（5pts）：$m=1$；\n- Subtask2（10pts）：$m=2$；\n- Subtask3（10pts）：$n=1$ 且 $m\\le 500$；\n- Subtask4（15pts）：$n=1$；\n- Subtask5（10pts）：$n\\le 5000$；\n- Subtask6（20pts）：$n\\le 5\\times 10^4$；\n- Subtask7（10pts）：$m,a_i\\le 10^{9}$；\n- Subtask8（20pts）：无特殊限制；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{5}$，$1\\le m\\le 10^{14}$，$1\\le a_i\\le 10^{18}$。保证答案在 `long long` 范围内。", "locale": "zh-CN"}}}
{"pid": "P8156", "type": "P", "difficulty": 6, "samples": [["1\n5 17\n8 10 12 8 45\n16 17 18 18 14\n3 2\n4 3\n6 3\n7 2\n8 2\n10 2\n11 2\n12 4\n13 2\n14 3\n18 3\n19 2\n21 9\n22 9\n23 9\n24 9\n25 9", "OK\n1 1 2 3 1 3 2 2 1 2 2 4 2 3 1 1 1 3 2 1 9 9 9 9 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "「PMOI-5」奇怪的方程", "background": "", "description": "给出一个 $n$，现在有 $n\\times n$ 个未知数 $a_{1},a_{2},\\cdots,a_{n\\times n}$。\n\n给出 $2\\times n$ 个方程，方程共有两种，每种分别有 $n$ 个。\n\n第一种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{(i-1)\\times n+j}=A_i$。   \n第二种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{i+(j-1)\\times n}=B_i$。\n\n可这太简单了，给出 $m$ 个限制，你需要保证 $a_{p_i}=q_i$。\n\n请求出任意一组合法的解。无解输出 `No Solution`，否则先输出 `OK`，接着给出解，其中 $\\forall i\\in[1,n^2]$，$a_i \\in[-2^{63},2^{63})$ 且是个整数。", "inputFormat": "**本题多组数据。**\n\n第一行一个整数 $T$，表示数据组数。  \n对于每组数据：  \n第一行两个整数 $n$ 和 $m$。   \n第二行 $n$ 个整数，第 $i$ 个整数表示 $A_i$。     \n第三行 $n$ 个整数，第 $i$ 个整数表示 $B_i$。   \n接下来 $m$ 行，每行两个整数，表示 $p_i,q_i$。", "outputFormat": "对于每组数据：      \n第一行一个字符串，表示是否有解。   \n如果有解，接下来一行 $n\\times n$ 个整数，第 $i$ 个整数表示 $a_i$。", "hint": "**本题采用捆绑测试。**\n\n- Subtask1（1pts）：$n=1$；\n- Subtask2（4pts）：$n\\le3$；\n- Subtask3（10pts）：$n\\le 10$；\n- Subtask4（15pts）：$n\\le 100$；\n- Subtask5（20pts）：$m\\le n-1$；\n- Subtask6（10pts）：$m=0$；\n- Subtask7（20pts）：$T\\le 10$，$n\\le 500$；\n- Subtask8（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n \\le 2000$，$1\\le \\sum n^2\\le 4\\times 10^6$，$-5\\times 10^{12}\\le A_i,B_i\\le 5\\times 10^{12}$，$0\\le m\\le n^2$，$1\\le p_i\\le n^2$，$-10^9\\le q_i\\le 10^9$。保证 $p_i$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」奇怪的方程", "background": "", "description": "给出一个 $n$，现在有 $n\\times n$ 个未知数 $a_{1},a_{2},\\cdots,a_{n\\times n}$。\n\n给出 $2\\times n$ 个方程，方程共有两种，每种分别有 $n$ 个。\n\n第一种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{(i-1)\\times n+j}=A_i$。   \n第二种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{i+(j-1)\\times n}=B_i$。\n\n可这太简单了，给出 $m$ 个限制，你需要保证 $a_{p_i}=q_i$。\n\n请求出任意一组合法的解。无解输出 `No Solution`，否则先输出 `OK`，接着给出解，其中 $\\forall i\\in[1,n^2]$，$a_i \\in[-2^{63},2^{63})$ 且是个整数。", "inputFormat": "**本题多组数据。**\n\n第一行一个整数 $T$，表示数据组数。  \n对于每组数据：  \n第一行两个整数 $n$ 和 $m$。   \n第二行 $n$ 个整数，第 $i$ 个整数表示 $A_i$。     \n第三行 $n$ 个整数，第 $i$ 个整数表示 $B_i$。   \n接下来 $m$ 行，每行两个整数，表示 $p_i,q_i$。", "outputFormat": "对于每组数据：      \n第一行一个字符串，表示是否有解。   \n如果有解，接下来一行 $n\\times n$ 个整数，第 $i$ 个整数表示 $a_i$。", "hint": "**本题采用捆绑测试。**\n\n- Subtask1（1pts）：$n=1$；\n- Subtask2（4pts）：$n\\le3$；\n- Subtask3（10pts）：$n\\le 10$；\n- Subtask4（15pts）：$n\\le 100$；\n- Subtask5（20pts）：$m\\le n-1$；\n- Subtask6（10pts）：$m=0$；\n- Subtask7（20pts）：$T\\le 10$，$n\\le 500$；\n- Subtask8（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n \\le 2000$，$1\\le \\sum n^2\\le 4\\times 10^6$，$-5\\times 10^{12}\\le A_i,B_i\\le 5\\times 10^{12}$，$0\\le m\\le n^2$，$1\\le p_i\\le n^2$，$-10^9\\le q_i\\le 10^9$。保证 $p_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P8157", "type": "P", "difficulty": 6, "samples": [["5 2\n2 3 1 3 2\n2\n6", "5\n4"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「PMOI-5」肥宅快乐水", "background": "lhm 喝肥宅快乐水的时候想到了这个 idea，于是就叫它肥宅快乐水。\n\n~~此题为弱化版，强化版敬请期待 Ynoi。~~\n\n特别感谢：验题人 双管荧光灯 吊打了此题的 std！", "description": "lhm 的手中有 $n$ 个宽度为 $1$ 的矩形水平排列组成的多边形，其中第 $i$ 个矩形的高度为 $a_i$。现在他会进行 $k$ 次操作，每次使一个宽度为 $1$ 的矩形高度减 $1$，求他每次操作后的最大子矩形面积（显然，子矩形必须是连续的一块）。\n\n**注意任何情况高度都大于等于 $0$。**\n\n由于 lhm 太菜了，所以想要请聪明的你来帮他解决。", "inputFormat": "输入数据共 $k+2$ 行。   \n第一行两个整数 $n,k$，含义如题所示。    \n第二行 $n$ 个整数 $a_i$，第 $i$ 个整数表示第 $i$ 个矩形的高度。    \n接下来 $k$ 行，每行一个整数 $\\operatorname{id}'$，操作编号 $\\operatorname{id}=\\operatorname{id}'\\bigoplus \\operatorname{lastans}$。其中 $\\operatorname{lastans}$ 为上一次询问的答案，最开始 $\\operatorname{lastans}=0$。", "outputFormat": "输出数据共 $k$ 行。   \n每行一个整数，表示每次询问所求答案。", "hint": "**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | $n, k$ |\n| :-----------: | :---:| :-----------: |\n| 1 | 10 | $\\leq 500$ |\n| 2 | 10 | $\\leq 5000$ |\n| 3 | 40 | $\\leq 10^5$ |\n| 4 | 40 | $\\leq 5\\times10^5$ |\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le 5\\times 10^5$，$1\\leq a_i\\leq 10^9$。保证 $\\operatorname{id}'$ 在 `long long` 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」肥宅快乐水", "background": "lhm 喝肥宅快乐水的时候想到了这个 idea，于是就叫它肥宅快乐水。\n\n~~此题为弱化版，强化版敬请期待 Ynoi。~~\n\n特别感谢：验题人 双管荧光灯 吊打了此题的 std！", "description": "lhm 的手中有 $n$ 个宽度为 $1$ 的矩形水平排列组成的多边形，其中第 $i$ 个矩形的高度为 $a_i$。现在他会进行 $k$ 次操作，每次使一个宽度为 $1$ 的矩形高度减 $1$，求他每次操作后的最大子矩形面积（显然，子矩形必须是连续的一块）。\n\n**注意任何情况高度都大于等于 $0$。**\n\n由于 lhm 太菜了，所以想要请聪明的你来帮他解决。", "inputFormat": "输入数据共 $k+2$ 行。   \n第一行两个整数 $n,k$，含义如题所示。    \n第二行 $n$ 个整数 $a_i$，第 $i$ 个整数表示第 $i$ 个矩形的高度。    \n接下来 $k$ 行，每行一个整数 $\\operatorname{id}'$，操作编号 $\\operatorname{id}=\\operatorname{id}'\\bigoplus \\operatorname{lastans}$。其中 $\\operatorname{lastans}$ 为上一次询问的答案，最开始 $\\operatorname{lastans}=0$。", "outputFormat": "输出数据共 $k$ 行。   \n每行一个整数，表示每次询问所求答案。", "hint": "**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | $n, k$ |\n| :-----------: | :---:| :-----------: |\n| 1 | 10 | $\\leq 500$ |\n| 2 | 10 | $\\leq 5000$ |\n| 3 | 40 | $\\leq 10^5$ |\n| 4 | 40 | $\\leq 5\\times10^5$ |\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le 5\\times 10^5$，$1\\leq a_i\\leq 10^9$。保证 $\\operatorname{id}'$ 在 `long long` 范围内。", "locale": "zh-CN"}}}
{"pid": "P8158", "type": "P", "difficulty": 6, "samples": [["2 2", "1 0"], ["5 15", "815216641 0"], ["114 514", "636199406 569855248"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "快速傅里叶变换 FFT"], "title": "「PMOI-5」分力", "background": "", "description": "平面直角坐标系上有一个半径为 $1$、圆心在 $(0,0)$ 的圆。\n\n这个圆上等距标记了 $n$ 个红点，存在一个点落在 $x$ 正半轴上。\n\nNaCly\\_Fish 也站在 $(0,0)$ 上，等概率随机对着一个红点，用 $1 \\text N$ 的力去推。\n\n设她的推力在 $x$ 和 $y$ 轴上的分力分别为 $F_x$、$F_y$，她想知道这两个随机变量的 $k$ 阶中心矩分别是多少。\n\n对于随机变量 $x$，其 $k$ 阶中心矩定义为 $E((x-E(x))^k)$，$E(x)$ 为 $x$ 的期望值。\n\n可以证明答案**一定是有理数**，所以将答案要对 $998244353$ 取模。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行两个整数，分别表示 $F_x$ 和 $F_y$ 的 $k$ 阶中心矩的值。", "hint": "【样例一解释】  \n二阶中心矩就是方差。由于只能朝着 $x$ 的正负方向推，$F_y$ 总是零，方差也就是零；$F_x$ 可以是 $\\pm 1$，概率相等，方差就是 $1$。 \n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$2\\le n,k \\le 20$；  \n- Subtask 2（14 pts）：$2\\le n \\le 100$；  \n- Subtask 3（19 pts）：$2\\le n \\le 10^3$；  \n- Subtask 4（23 pts）：$2\\le k \\le 10^7$；     \n- Subtask 5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3 \\times 10^4$，$2\\le k \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」分力", "background": "", "description": "平面直角坐标系上有一个半径为 $1$、圆心在 $(0,0)$ 的圆。\n\n这个圆上等距标记了 $n$ 个红点，存在一个点落在 $x$ 正半轴上。\n\nNaCly\\_Fish 也站在 $(0,0)$ 上，等概率随机对着一个红点，用 $1 \\text N$ 的力去推。\n\n设她的推力在 $x$ 和 $y$ 轴上的分力分别为 $F_x$、$F_y$，她想知道这两个随机变量的 $k$ 阶中心矩分别是多少。\n\n对于随机变量 $x$，其 $k$ 阶中心矩定义为 $E((x-E(x))^k)$，$E(x)$ 为 $x$ 的期望值。\n\n可以证明答案**一定是有理数**，所以将答案要对 $998244353$ 取模。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行两个整数，分别表示 $F_x$ 和 $F_y$ 的 $k$ 阶中心矩的值。", "hint": "【样例一解释】  \n二阶中心矩就是方差。由于只能朝着 $x$ 的正负方向推，$F_y$ 总是零，方差也就是零；$F_x$ 可以是 $\\pm 1$，概率相等，方差就是 $1$。 \n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$2\\le n,k \\le 20$；  \n- Subtask 2（14 pts）：$2\\le n \\le 100$；  \n- Subtask 3（19 pts）：$2\\le n \\le 10^3$；  \n- Subtask 4（23 pts）：$2\\le k \\le 10^7$；     \n- Subtask 5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3 \\times 10^4$，$2\\le k \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8159", "type": "P", "difficulty": 7, "samples": [["2 3 5 2\n1 3 2 2\n2 3 1 1", "13"], ["3 89 1000000 4\n2 222 19 2\n4 66666 1 9\n5 114514 8 10\n", "299126098"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「PMOI-5」一道防不住 AK 的水题", "background": "本题加强版在[这](https://www.luogu.com.cn/problem/U203487)。", "description": "有 $m$ 个盒子和 $n$ 个操作，盒子编号为 $0\\dots m-1$。第 $i$ 个操作一共会进行 $r_i-l_i+1$ 轮，第 $j$ 轮会在编号为 $(k(j-1+l_i)+b_i)\\bmod m$ 的盒子里放 $a_i$ 个球（$j$ 从 $1$ 开始枚举）。\n\n在所有操作完成后，你需要选出 $p$ 个不同的且编号不相邻的盒子，定义一次选择的价值为 $p$ 个盒子里面球个数的乘积。求所有选择方案的价值和模 $10^9+7$。", "inputFormat": "第一行四个整数 $n,k,m,p$，表示操作个数，两种关于操作参数和选出的盒子个数。  \n接下来 $n$ 行，第 $i$ 行四个非负整数 $l_i,r_i,b_i,a_i$ 表示一次操作的参数。", "outputFormat": "一个整数表示价值和对 $10^9+7$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（10pts）：$m\\le 10^6$;\n- Subtask 2（5pts）：$p=1$;\n- Subtask 3（30pts）：$n\\le 10$，$m\\le 10^9$;\n- Subtask 4（30pts）：保证 $k$ 和 $m$ 互质;\n- Subtask 5（25pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 7000$，$1\\le m\\le 10^{18}$，$1\\le p\\le 4$，$0\\le b_i< m$，$0<k<m$，$0\\le l_i\\le r_i< m$，$0\\le a_i<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」一道防不住 AK 的水题", "background": "本题加强版在[这](https://www.luogu.com.cn/problem/U203487)。", "description": "有 $m$ 个盒子和 $n$ 个操作，盒子编号为 $0\\dots m-1$。第 $i$ 个操作一共会进行 $r_i-l_i+1$ 轮，第 $j$ 轮会在编号为 $(k(j-1+l_i)+b_i)\\bmod m$ 的盒子里放 $a_i$ 个球（$j$ 从 $1$ 开始枚举）。\n\n在所有操作完成后，你需要选出 $p$ 个不同的且编号不相邻的盒子，定义一次选择的价值为 $p$ 个盒子里面球个数的乘积。求所有选择方案的价值和模 $10^9+7$。", "inputFormat": "第一行四个整数 $n,k,m,p$，表示操作个数，两种关于操作参数和选出的盒子个数。  \n接下来 $n$ 行，第 $i$ 行四个非负整数 $l_i,r_i,b_i,a_i$ 表示一次操作的参数。", "outputFormat": "一个整数表示价值和对 $10^9+7$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（10pts）：$m\\le 10^6$;\n- Subtask 2（5pts）：$p=1$;\n- Subtask 3（30pts）：$n\\le 10$，$m\\le 10^9$;\n- Subtask 4（30pts）：保证 $k$ 和 $m$ 互质;\n- Subtask 5（25pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 7000$，$1\\le m\\le 10^{18}$，$1\\le p\\le 4$，$0\\le b_i< m$，$0<k<m$，$0\\le l_i\\le r_i< m$，$0\\le a_i<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P8160", "type": "P", "difficulty": 2, "samples": [["4\n14\n9\n8\n12\n6\n2\n3\n5\n7\n11\n13\n", "7\n9\n1\n1\n1\n3\n"], ["13\n1\n4\n1\n4\n2\n1\n3\n5\n6\n2\n3\n7\n3\n8\n2\n10\n11\n13\n15\n17\n18\n20\n", "1\n1\n1\n1\n5\n3\n1\n3\n"], ["16\n536870912\n402653184\n536870912\n536870912\n134217728\n536870912\n671088640\n536870912\n536870912\n536870912\n939524096\n805306368\n536870912\n956301312\n536870912\n536870912\n5\n2500000000\n3355443201\n4294967296\n5111111111\n6190792704\n", "5\n1\n7\n57\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888]}, "tags": ["二分", "2022", "O2优化", "前缀和", "JOI（日本）"], "title": "[JOI 2022 Final] 星际蛋糕 / Intercastellar", "background": "在 30XX 年，由于科学家和工程师的不断努力，不同星球之间的互动变得非常活跃。比太郎是一只河狸，他现在是一项交流项目的大使。他的任务是向不同星球的居民介绍地球上的食物。他将在下午 1 点出发去 JOI 星球。\n\n现在，比太郎正计划向 JOI 星球的居民介绍 castella。castella 已经被切成了若干段。castella 是一种由面粉、鸡蛋、糖和淀粉糖浆制成的烘烤海绵蛋糕。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/krpqlhl4.png)", "description": "castella 的形状是一个在水平方向上很长的长方体。它被切成了 $N$ 段，其中从左往右的第 $i$ 段的长度为整数 $A_i$。\n\n几分钟前，我们得知 JOI 星球的居民不喜欢偶数。为了解决此问题，你需要不断执行下列操作，直到不存在长度为偶数的段。\n\n1. 在长度为偶数的段中，你选择最靠右的一段。\n2. 你将选中的这一段切成两个长度相等的段。也就是说，假设选中的这一段的长度是 $k$，你将其切成长度为 $\\displaystyle \\frac{k}{2}$ 的两段。你不改变其他段的位置。\n\n为了确认操作是否被正确地执行了，比太郎让你回答 $Q$ 个询问。第 $j$ 个询问如下：\n\n- 当所有操作执行完毕后，从左往右的第 $X_j$ 段的长度为多少？\n\n给定 castella 的信息与询问，请写一个程序回答所有询问。", "inputFormat": "第一行，一个正整数 $N$。\n\n接下来 $N$ 行，第 $i$ 行一个正整数 $A_i$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $j$ 行一个正整数 $X_j$。", "outputFormat": "输出 $Q$ 行，第 $j$ 行一个数，表示第 $j$ 个询问的答案。", "hint": "**【样例解释 \\#1】**\n\n一开始，castella 从左到右的段的长度分别为 $14, 9, 8, 12$。\n\n当所有操作执行完毕后，castella 被切成了 $15$ 段。从左到右的段的长度分别为 $7, 7, 9, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3, 3, 3$。\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N, Q \\le 2 \\times {10}^5$，$1 \\le A_i \\le {10}^9$，$1 \\le X_j \\le {10}^{15}$，$X_j \\le X_{j + 1}$，保证当所有操作执行完毕后，castella 被切成了至少 $X_Q$ 段。\n\n- 子任务 $1$（$25$ 分）：$A_i \\le 8$。\n- 子任务 $2$（$35$ 分）：$N, Q \\le 1000$。\n- 子任务 $3$（$40$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T1「[インターカステラー](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1.pdf) / [Intercastellar](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 星际蛋糕 / Intercastellar", "background": "在 30XX 年，由于科学家和工程师的不断努力，不同星球之间的互动变得非常活跃。比太郎是一只河狸，他现在是一项交流项目的大使。他的任务是向不同星球的居民介绍地球上的食物。他将在下午 1 点出发去 JOI 星球。\n\n现在，比太郎正计划向 JOI 星球的居民介绍 castella。castella 已经被切成了若干段。castella 是一种由面粉、鸡蛋、糖和淀粉糖浆制成的烘烤海绵蛋糕。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/krpqlhl4.png)", "description": "castella 的形状是一个在水平方向上很长的长方体。它被切成了 $N$ 段，其中从左往右的第 $i$ 段的长度为整数 $A_i$。\n\n几分钟前，我们得知 JOI 星球的居民不喜欢偶数。为了解决此问题，你需要不断执行下列操作，直到不存在长度为偶数的段。\n\n1. 在长度为偶数的段中，你选择最靠右的一段。\n2. 你将选中的这一段切成两个长度相等的段。也就是说，假设选中的这一段的长度是 $k$，你将其切成长度为 $\\displaystyle \\frac{k}{2}$ 的两段。你不改变其他段的位置。\n\n为了确认操作是否被正确地执行了，比太郎让你回答 $Q$ 个询问。第 $j$ 个询问如下：\n\n- 当所有操作执行完毕后，从左往右的第 $X_j$ 段的长度为多少？\n\n给定 castella 的信息与询问，请写一个程序回答所有询问。", "inputFormat": "第一行，一个正整数 $N$。\n\n接下来 $N$ 行，第 $i$ 行一个正整数 $A_i$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $j$ 行一个正整数 $X_j$。", "outputFormat": "输出 $Q$ 行，第 $j$ 行一个数，表示第 $j$ 个询问的答案。", "hint": "**【样例解释 \\#1】**\n\n一开始，castella 从左到右的段的长度分别为 $14, 9, 8, 12$。\n\n当所有操作执行完毕后，castella 被切成了 $15$ 段。从左到右的段的长度分别为 $7, 7, 9, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3, 3, 3$。\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N, Q \\le 2 \\times {10}^5$，$1 \\le A_i \\le {10}^9$，$1 \\le X_j \\le {10}^{15}$，$X_j \\le X_{j + 1}$，保证当所有操作执行完毕后，castella 被切成了至少 $X_Q$ 段。\n\n- 子任务 $1$（$25$ 分）：$A_i \\le 8$。\n- 子任务 $2$（$35$ 分）：$N, Q \\le 1000$。\n- 子任务 $3$（$40$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T1「[インターカステラー](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1.pdf) / [Intercastellar](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8161", "type": "P", "difficulty": 3, "samples": [["3 3\n19 4 5\n2 6 2\n", "18\n"], ["2 1\n9 7\n2 6\n", "7\n"], ["5 60000\n630510219 369411957 874325200 990002527 567203997\n438920902 634940661 593780254 315929832 420627496\n", "41397427274960\n"], ["4 25\n1 2 3 4\n1 2 3 4\n", "48\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888]}, "tags": ["贪心", "二分", "2022", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 自学 / Self Study", "background": "", "description": "在 JOI 高中高一的第三个学期的 $M$ 个星期的时间内，有 $N$ 门课，编号为 $1 \\sim N$。每个星期有 $N$ 个课时，第 $i$ 个课时上课程 $i$ 的一节课。\n\n比太郎是一位高一学生。对于 $N \\times M$ 个课时中的每一个，他会选择如下行动中的一个：\n\n- 行动 1：比太郎去上课。如果他去上了课程 $i$ 的一节课，那么他对课程 $i$ 的理解程度会增加 $A_i$。\n- 行动 2：比太郎不去上课。他转而选择任意一门课，并且自学选中的那门课。如果他选中了课程 $i$ 进行了时长为一课时的自学，那么他对课程 $i$ 的理解程度会增加 $B_i$。\n\n一开始，对每门课的理解程度都为 $0$。由于比太郎想要在课后练习算法竞赛，他在非上课时间内不会学习。当第三个学期的所有课时结束后，期末考就会举行。\n\n比太郎不想挂科。所以他想要最大化在期末考时对每门课的理解程度的最小值。\n\n给定学期的长度，课程的数量，以及对理解程度的提升数值，请写一个程序计算在期末考时对每门课的理解程度的最小值的最大可能值。", "inputFormat": "第一行，两个正整数 $N, M$。\n\n第二行，$N$ 个正整数 $A_1, A_2, \\ldots, A_N$。\n\n第三行，$N$ 个正整数 $B_1, B_2, \\ldots, B_N$。", "outputFormat": "输出一行，一个数，表示在期末考时对每门课的理解程度的最小值的最大可能值。", "hint": "**【样例解释 \\#1】**\n\n举个例子，如果比太郎按如下方式学习，则他对课程 $1, 2, 3$ 的理解程度将分别为 $19, 18, 19$。\n\n- 第一周课程 $1$ 的课：自学课程 $2$；\n- 第一周课程 $2$ 的课：自学课程 $2$；\n- 第一周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第二周课程 $1$ 的课：去上课程 $1$ 的课；\n- 第二周课程 $2$ 的课：自学课程 $3$；\n- 第二周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第三周课程 $1$ 的课：自学课程 $3$；\n- 第三周课程 $2$ 的课：自学课程 $2$；\n- 第三周课程 $3$ 的课：去上课程 $3$ 的课。\n\n由于对每门课的最小的理解程度不能大于等于 $19$，输出 $18$。\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 3, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N \\le 3 \\times {10}^5$，$1 \\le M \\le {10}^9$，$1 \\le A_i, B_i \\le {10}^9$。\n\n- 子任务 $1$（$10$ 分）：$M = 1$。\n- 子任务 $2$（$25$ 分）：$N \\cdot M \\le 3 \\times {10}^5$，$A_i = B_i$。\n- 子任务 $3$（$27$ 分）：$N \\cdot M \\le 3 \\times {10}^5$。\n- 子任务 $4$（$29$ 分）：$A_i = B_i$。\n- 子任务 $5$（$9$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T2「[自習](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2.pdf) / [Self Study](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 自学 / Self Study", "background": "", "description": "在 JOI 高中高一的第三个学期的 $M$ 个星期的时间内，有 $N$ 门课，编号为 $1 \\sim N$。每个星期有 $N$ 个课时，第 $i$ 个课时上课程 $i$ 的一节课。\n\n比太郎是一位高一学生。对于 $N \\times M$ 个课时中的每一个，他会选择如下行动中的一个：\n\n- 行动 1：比太郎去上课。如果他去上了课程 $i$ 的一节课，那么他对课程 $i$ 的理解程度会增加 $A_i$。\n- 行动 2：比太郎不去上课。他转而选择任意一门课，并且自学选中的那门课。如果他选中了课程 $i$ 进行了时长为一课时的自学，那么他对课程 $i$ 的理解程度会增加 $B_i$。\n\n一开始，对每门课的理解程度都为 $0$。由于比太郎想要在课后练习算法竞赛，他在非上课时间内不会学习。当第三个学期的所有课时结束后，期末考就会举行。\n\n比太郎不想挂科。所以他想要最大化在期末考时对每门课的理解程度的最小值。\n\n给定学期的长度，课程的数量，以及对理解程度的提升数值，请写一个程序计算在期末考时对每门课的理解程度的最小值的最大可能值。", "inputFormat": "第一行，两个正整数 $N, M$。\n\n第二行，$N$ 个正整数 $A_1, A_2, \\ldots, A_N$。\n\n第三行，$N$ 个正整数 $B_1, B_2, \\ldots, B_N$。", "outputFormat": "输出一行，一个数，表示在期末考时对每门课的理解程度的最小值的最大可能值。", "hint": "**【样例解释 \\#1】**\n\n举个例子，如果比太郎按如下方式学习，则他对课程 $1, 2, 3$ 的理解程度将分别为 $19, 18, 19$。\n\n- 第一周课程 $1$ 的课：自学课程 $2$；\n- 第一周课程 $2$ 的课：自学课程 $2$；\n- 第一周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第二周课程 $1$ 的课：去上课程 $1$ 的课；\n- 第二周课程 $2$ 的课：自学课程 $3$；\n- 第二周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第三周课程 $1$ 的课：自学课程 $3$；\n- 第三周课程 $2$ 的课：自学课程 $2$；\n- 第三周课程 $3$ 的课：去上课程 $3$ 的课。\n\n由于对每门课的最小的理解程度不能大于等于 $19$，输出 $18$。\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 3, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N \\le 3 \\times {10}^5$，$1 \\le M \\le {10}^9$，$1 \\le A_i, B_i \\le {10}^9$。\n\n- 子任务 $1$（$10$ 分）：$M = 1$。\n- 子任务 $2$（$25$ 分）：$N \\cdot M \\le 3 \\times {10}^5$，$A_i = B_i$。\n- 子任务 $3$（$27$ 分）：$N \\cdot M \\le 3 \\times {10}^5$。\n- 子任务 $4$（$29$ 分）：$A_i = B_i$。\n- 子任务 $5$（$9$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T2「[自習](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2.pdf) / [Self Study](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8162", "type": "P", "difficulty": 5, "samples": [["3\n3\n1 5\n2 3\n4 5\n", "5.500000000000000\n"], ["7\n4\n4 -1\n11 -1\n6 -1\n12 -1\n36 -1\n11 -1\n20 -1\n", "32.000000000000000\n"], ["5\n3\n4 -1\n5 -1\n6 -1\n7 7\n8 8\n", "11.500000000000000\n"], ["7\n5\n28 36\n11 57\n20 35\n19 27\n31 33\n25 56\n38 51\n", "62.166666666666664\n"], ["20\n14\n106 277\n175 217\n170 227\n164 245\n118 254\n139 261\n142 270\n185 200\n162 241\n153 239\n128 264\n103 299\n147 248\n158 236\n160 232\n183 205\n194 197\n135 260\n153 234\n128 260\n", "644.203571428571422\n"]], "limits": {"time": [1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "2022", "Special Judge", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 让我们赢得选举 / Let's Win the Election", "background": "", "description": "JOI 共和国有 $N$ 个州，编号为 $1 \\sim N$。在 2022 年，JOI 共和国将举行总统大选。选举将在每个州分别举行。每个州的获胜者将赢得该州的一张选票。\n\nRie 将竞选总统，她正计划赢得选举。她决定以发表演讲的方式来提高自己的可靠程度。在她发表演讲后，下列事件可能会发生。\n\n- 如果在第 $i$ 个州的总演讲时间达到了 $A_i$ 小时，她将赢得该州的一张选票。\n- 如果在第 $i$ 个州的总演讲时间达到了 $B_i$ 小时，她将获得一名来自该州的协作者。\n- 有可能 Rie 在第 $i$ 个州无法获得协作者。此种情况下，$B_i = -1$，否则保证 $B_i > A_i$。\n\n来自第 $i$ 个州的协作者可以在第 $i$ 个州外发表演讲。多个人可以同时在同一个州发表演讲。举个例子，如果两个人在某个州同时发表了 $x$ 小时的演讲，则该州的总演讲时间将增加 $2 x$ 小时。演讲的时间不必是整数个小时。我们可以忽略在两州之间的交通耗时。\n\n大选日快到了，Rie 想要尽快得到 $K$ 张选票。\n\n给定州的数量和每个州的信息，写一个程序计算得到 $K$ 张选票的最小耗时（以小时为单位）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，一个正整数 $K$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $A_i, B_i$。", "outputFormat": "输出一行，一个数，表示得到 $K$ 张选票的最小耗时（以小时为单位）。\n\n如果你的输出与正确答案的差值的绝对值不超过 $0.01$ 则你的提交将被判断为正确。你的输出应使用如下格式：\n\n- 一个整数（例：`123`，`0`，`-2022`）。\n- 一个依次包含一个整数，一个句点，和一个仅包含 $0 \\sim 9$ 的数位的字符串的序列。其不应当包含分隔符。对小数点后的数位长度无限制（例：`123.4`，`-123.00`，`0.00288`）。\n\n输出不应使用指数表示法。举个例子，`1.23456e+05` 和 `1.23456e5` 不被允许。", "hint": "**【样例解释 \\#1】**\n\n按照如下方案进行演讲，Rie 将在 $5.5$ 小时内赢得每个州的选票。\n\n- 在第 $2$ 个州演讲 $2$ 个小时，赢得一张选票。\n- 在第 $2$ 个州再演讲 $1$ 个小时，获得一个协作者。\n- 在第 $3$ 个州与协作者一起演讲 $2$ 个小时，赢得一张选票。\n- 在第 $1$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $3, 4, 5, 6, 7$ 的性质。\n\n**【样例解释 \\#2】**\n\n按照如下方案进行演讲，Rie 将在 $32$ 小时内赢得 $4$ 张选票。\n\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。\n- 在第 $2$ 个州演讲 $11$ 个小时，赢得一张选票。\n- 在第 $3$ 个州演讲 $6$ 个小时，赢得一张选票。\n- 在第 $6$ 个州演讲 $11$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $1, 2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#3】**\n\n按照如下方案进行演讲，Rie 将在 $11.5$ 小时内赢得 $3$ 张选票。\n\n- 在第 $4$ 个州演讲 $7$ 个小时，赢得一张选票，并获得一个协作者。\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。与此同时，协作者在第 $2$ 个州演讲 $4$ 个小时。\n- 在第 $2$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#5】**\n\n这个样例满足子任务 $4, 5, 7$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le K \\le N \\le 500$，$1 \\le A_i \\le 1000$，$A_i \\le B_i \\le 1000$ 或 $B_i = -1$。\n\n- 子任务 $1$（$5$ 分）：$B_i = -1$。\n- 子任务 $2$（$5$ 分）：$B_i = -1$ 或 $B_i = A_i$。\n- 子任务 $3$（$11$ 分）：$N \\le 7$。\n- 子任务 $4$（$12$ 分）：$N \\le 20$。\n- 子任务 $5$（$33$ 分）：$N \\le 100$。\n- 子任务 $6$（$11$ 分）：$K = N$。\n- 子任务 $7$（$23$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T3「[選挙で勝とう](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3.pdf) / [Let's Win the Election](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 让我们赢得选举 / Let's Win the Election", "background": "", "description": "JOI 共和国有 $N$ 个州，编号为 $1 \\sim N$。在 2022 年，JOI 共和国将举行总统大选。选举将在每个州分别举行。每个州的获胜者将赢得该州的一张选票。\n\nRie 将竞选总统，她正计划赢得选举。她决定以发表演讲的方式来提高自己的可靠程度。在她发表演讲后，下列事件可能会发生。\n\n- 如果在第 $i$ 个州的总演讲时间达到了 $A_i$ 小时，她将赢得该州的一张选票。\n- 如果在第 $i$ 个州的总演讲时间达到了 $B_i$ 小时，她将获得一名来自该州的协作者。\n- 有可能 Rie 在第 $i$ 个州无法获得协作者。此种情况下，$B_i = -1$，否则保证 $B_i > A_i$。\n\n来自第 $i$ 个州的协作者可以在第 $i$ 个州外发表演讲。多个人可以同时在同一个州发表演讲。举个例子，如果两个人在某个州同时发表了 $x$ 小时的演讲，则该州的总演讲时间将增加 $2 x$ 小时。演讲的时间不必是整数个小时。我们可以忽略在两州之间的交通耗时。\n\n大选日快到了，Rie 想要尽快得到 $K$ 张选票。\n\n给定州的数量和每个州的信息，写一个程序计算得到 $K$ 张选票的最小耗时（以小时为单位）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，一个正整数 $K$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $A_i, B_i$。", "outputFormat": "输出一行，一个数，表示得到 $K$ 张选票的最小耗时（以小时为单位）。\n\n如果你的输出与正确答案的差值的绝对值不超过 $0.01$ 则你的提交将被判断为正确。你的输出应使用如下格式：\n\n- 一个整数（例：`123`，`0`，`-2022`）。\n- 一个依次包含一个整数，一个句点，和一个仅包含 $0 \\sim 9$ 的数位的字符串的序列。其不应当包含分隔符。对小数点后的数位长度无限制（例：`123.4`，`-123.00`，`0.00288`）。\n\n输出不应使用指数表示法。举个例子，`1.23456e+05` 和 `1.23456e5` 不被允许。", "hint": "**【样例解释 \\#1】**\n\n按照如下方案进行演讲，Rie 将在 $5.5$ 小时内赢得每个州的选票。\n\n- 在第 $2$ 个州演讲 $2$ 个小时，赢得一张选票。\n- 在第 $2$ 个州再演讲 $1$ 个小时，获得一个协作者。\n- 在第 $3$ 个州与协作者一起演讲 $2$ 个小时，赢得一张选票。\n- 在第 $1$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $3, 4, 5, 6, 7$ 的性质。\n\n**【样例解释 \\#2】**\n\n按照如下方案进行演讲，Rie 将在 $32$ 小时内赢得 $4$ 张选票。\n\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。\n- 在第 $2$ 个州演讲 $11$ 个小时，赢得一张选票。\n- 在第 $3$ 个州演讲 $6$ 个小时，赢得一张选票。\n- 在第 $6$ 个州演讲 $11$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $1, 2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#3】**\n\n按照如下方案进行演讲，Rie 将在 $11.5$ 小时内赢得 $3$ 张选票。\n\n- 在第 $4$ 个州演讲 $7$ 个小时，赢得一张选票，并获得一个协作者。\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。与此同时，协作者在第 $2$ 个州演讲 $4$ 个小时。\n- 在第 $2$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#5】**\n\n这个样例满足子任务 $4, 5, 7$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le K \\le N \\le 500$，$1 \\le A_i \\le 1000$，$A_i \\le B_i \\le 1000$ 或 $B_i = -1$。\n\n- 子任务 $1$（$5$ 分）：$B_i = -1$。\n- 子任务 $2$（$5$ 分）：$B_i = -1$ 或 $B_i = A_i$。\n- 子任务 $3$（$11$ 分）：$N \\le 7$。\n- 子任务 $4$（$12$ 分）：$N \\le 20$。\n- 子任务 $5$（$33$ 分）：$N \\le 100$。\n- 子任务 $6$（$11$ 分）：$K = N$。\n- 子任务 $7$（$23$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T3「[選挙で勝とう](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3.pdf) / [Let's Win the Election](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8163", "type": "P", "difficulty": 6, "samples": [["5 2\n2\n5 1\n3 5\n3\n5 3\n3 2\n2 1\n", "1\n2\n-1\n"], ["6 3\n2\n1 6\n5 1\n4\n5 1\n6 3\n3 6\n2 1\n", "1\n-1\n1\n2\n"], ["6 5\n4\n3 1\n2 4\n5 3\n4 6\n5\n1 5\n3 2\n2 6\n6 3\n5 4\n", "-1\n1\n2\n-1\n1\n"], ["12 1\n5\n1 7\n10 12\n3 5\n8 10\n5 9\n7\n2 11\n5 8\n3 12\n4 6\n1 9\n9 10\n1 4\n", "-1\n1\n4\n-1\n2\n-1\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888]}, "tags": ["倍增", "2022", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 铁路旅行 2 / Railway Trip 2", "background": null, "description": "IOI 铁路公司在一条铁轨上运营线路。铁轨为一条直线，该铁轨上有 $N$ 个车站，编号为 $1 \\sim N$。车站 $i$ 与车站 $i + 1$ 之间由一条铁轨直接连接。\n\nIOI 铁路公司正在运营 $M$ 条线路，编号为 $1 \\sim M$。线路 $j$ 的起点为 $A_j$，终点为 $B_j$，列车在每一站均会停靠，即如果 $A_j < B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j + 1, \\ldots, B_j$ 停靠。如果 $A_j > B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j - 1, \\ldots, B_j$ 停靠。\n\nJOI 君是一个旅行者。他有 $Q$ 个旅行计划。在第 $k$ 个旅行计划中他计划从车站 $S_k$ 通过乘坐列车前往车站 $T_k$。\n\n然而，JOI 君因长途跋涉而疲惫不堪。他希望他乘坐的列车均有空座以便休息。因此 JOI 君只会在线路起点起的 $K$ 站范围内（含起点）上车。换句话说，对于线路 $j$，如果 $A_j < B_j$，那么他只会在车站 $A_j, A_j + 1, \\ldots, \\min \\{ A_j + K - 1, B_j - 1 \\}$ 乘上线路 $j$ 的列车。如果 $A_j > B_j$，那么他只会在车站 $A_j, A_j - 1, \\ldots, \\max \\{ A_j - K + 1, B_j + 1 \\}$ 乘上线路 $j$ 的列车。\n\n在这些条件下，JOI 君希望尽量减少乘坐火车的次数。\n\n给出 IOI 铁路公司的线路信息和 JOI 君的计划，写一个程序计算对于 JOI 君的每一个计划，他所需的最小乘车次数。", "inputFormat": "第一行，两个正整数 $N, K$。\n\n第二行，一个正整数 $M$。\n\n接下来 $M$ 行，第 $j$ 行两个正整数 $A_j, B_j$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $k$ 行两个正整数 $S_k, T_k$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行一个数，表示对于 JOI 君的第 $k$ 个计划，他实现该计划所需的最小乘车次数。如果无论如何无法实现第 $k$ 个计划，则输出 `-1`。", "hint": "**【样例解释 \\#1】**\n\n对于第一个计划，JOI 君要从车站 $5$ 前往车站 $3$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $5$ 乘上 $1$ 号线的列车，并在车站 $3$ 下车。JOI 君总共乘坐了一次列车。由于不可能花费比 $1$ 更少的乘车次数实现该计划，在第一行输出 $1$。\n\n对于第二个计划，JOI 君要从车站 $3$ 前往车站 $2$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $3$ 乘上 $2$ 号线的列车，并在车站 $4$ 下车；然后在车站 $4$ 乘上 $1$ 号线的列车，并在车站 $2$ 下车。JOI 君总共乘坐了两次列车。由于不可能花费比 $2$ 更少的乘车次数实现该计划，在第二行输出 $2$。\n\n对于第一个计划，JOI 君要从车站 $2$ 前往车站 $1$。由于无论如何无法实现该计划，在第三行输出 `-1`。\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $1, 2, 4, 6$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $1, 2, 5, 6$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$2 \\le N \\le {10}^5$，$1 \\le K \\le N - 1$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le Q \\le 5 \\times {10}^4$，$1 \\le A_j, B_j, S_k, T_k \\le N$，$A_j \\ne B_j$，$S_k \\ne T_k$，$(A_j, B_j) \\ne (A_k, B_k)$（$j \\ne k$），$(S_k, T_k) \\ne (S_l, T_l)$（$k \\ne l$）。\n\n- 子任务 $1$（$8$ 分）：$N, M, Q \\le 300$。\n- 子任务 $2$（$8$ 分）：$N, M, Q \\le 2000$。\n- 子任务 $3$（$11$ 分）：$Q = 1$。\n- 子任务 $4$（$25$ 分）：$K = N - 1$。\n- 子任务 $5$（$35$ 分）：$A_j < B_j$，$S_k < T_k$。\n- 子任务 $6$（$13$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T4「[鉄道旅行 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4.pdf) / [Railway Trip 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 铁路旅行 2 / Railway Trip 2", "background": null, "description": "IOI 铁路公司在一条铁轨上运营线路。铁轨为一条直线，该铁轨上有 $N$ 个车站，编号为 $1 \\sim N$。车站 $i$ 与车站 $i + 1$ 之间由一条铁轨直接连接。\n\nIOI 铁路公司正在运营 $M$ 条线路，编号为 $1 \\sim M$。线路 $j$ 的起点为 $A_j$，终点为 $B_j$，列车在每一站均会停靠，即如果 $A_j < B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j + 1, \\ldots, B_j$ 停靠。如果 $A_j > B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j - 1, \\ldots, B_j$ 停靠。\n\nJOI 君是一个旅行者。他有 $Q$ 个旅行计划。在第 $k$ 个旅行计划中他计划从车站 $S_k$ 通过乘坐列车前往车站 $T_k$。\n\n然而，JOI 君因长途跋涉而疲惫不堪。他希望他乘坐的列车均有空座以便休息。因此 JOI 君只会在线路起点起的 $K$ 站范围内（含起点）上车。换句话说，对于线路 $j$，如果 $A_j < B_j$，那么他只会在车站 $A_j, A_j + 1, \\ldots, \\min \\{ A_j + K - 1, B_j - 1 \\}$ 乘上线路 $j$ 的列车。如果 $A_j > B_j$，那么他只会在车站 $A_j, A_j - 1, \\ldots, \\max \\{ A_j - K + 1, B_j + 1 \\}$ 乘上线路 $j$ 的列车。\n\n在这些条件下，JOI 君希望尽量减少乘坐火车的次数。\n\n给出 IOI 铁路公司的线路信息和 JOI 君的计划，写一个程序计算对于 JOI 君的每一个计划，他所需的最小乘车次数。", "inputFormat": "第一行，两个正整数 $N, K$。\n\n第二行，一个正整数 $M$。\n\n接下来 $M$ 行，第 $j$ 行两个正整数 $A_j, B_j$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $k$ 行两个正整数 $S_k, T_k$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行一个数，表示对于 JOI 君的第 $k$ 个计划，他实现该计划所需的最小乘车次数。如果无论如何无法实现第 $k$ 个计划，则输出 `-1`。", "hint": "**【样例解释 \\#1】**\n\n对于第一个计划，JOI 君要从车站 $5$ 前往车站 $3$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $5$ 乘上 $1$ 号线的列车，并在车站 $3$ 下车。JOI 君总共乘坐了一次列车。由于不可能花费比 $1$ 更少的乘车次数实现该计划，在第一行输出 $1$。\n\n对于第二个计划，JOI 君要从车站 $3$ 前往车站 $2$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $3$ 乘上 $2$ 号线的列车，并在车站 $4$ 下车；然后在车站 $4$ 乘上 $1$ 号线的列车，并在车站 $2$ 下车。JOI 君总共乘坐了两次列车。由于不可能花费比 $2$ 更少的乘车次数实现该计划，在第二行输出 $2$。\n\n对于第一个计划，JOI 君要从车站 $2$ 前往车站 $1$。由于无论如何无法实现该计划，在第三行输出 `-1`。\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $1, 2, 4, 6$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $1, 2, 5, 6$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$2 \\le N \\le {10}^5$，$1 \\le K \\le N - 1$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le Q \\le 5 \\times {10}^4$，$1 \\le A_j, B_j, S_k, T_k \\le N$，$A_j \\ne B_j$，$S_k \\ne T_k$，$(A_j, B_j) \\ne (A_k, B_k)$（$j \\ne k$），$(S_k, T_k) \\ne (S_l, T_l)$（$k \\ne l$）。\n\n- 子任务 $1$（$8$ 分）：$N, M, Q \\le 300$。\n- 子任务 $2$（$8$ 分）：$N, M, Q \\le 2000$。\n- 子任务 $3$（$11$ 分）：$Q = 1$。\n- 子任务 $4$（$25$ 分）：$K = N - 1$。\n- 子任务 $5$（$35$ 分）：$A_j < B_j$，$S_k < T_k$。\n- 子任务 $6$（$13$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T4「[鉄道旅行 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4.pdf) / [Railway Trip 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8164", "type": "P", "difficulty": 7, "samples": [["1 5\n2 4 7 1 5\n", "10\n"], ["3 2\n18 10\n19 12\n17 13\n", "15\n"], ["3 5\n83 47 36 38 40\n13 10 26 68 67\n15 19 20 70 90\n", "65\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 沙堡 2 / Sandcastle 2", "background": "", "description": "JOI 君在沙滩上玩耍。他建造了一座沙堡。这座由 JOI 君建造的沙堡位于沙滩上的一个矩形区域内。这个矩形区域有 $H$ 行 $W$ 列。位于从上往下的第 $i$ 行、从左往右的第 $j$ 列的格子的高度为 $A_{i, j}$。**注意所有 $\\boldsymbol{A_{i, j}}$ 的值互不相同。**\n\n在沙堡上，JOI 君执行了下列动作。\n\n1. 首先，JOI 君选择一个格子，他从该格子开始移动。\n2. 然后，他从当前格子出发朝上下左右四个方向之一移动到相邻的格子上。他必须移动到低于当前格子的格子上。他可以重复此动作零次或更多次。\n\n最终，如果我们从上往下看，他经过的格子将形成一个矩形。\n\n给定每个格子的高度信息 $A_{i, j}$，写一个程序计算所有可能的由 JOI 君经过的格子组成的矩形的数量。", "inputFormat": "第一行，两个正整数 $H, W$。\n\n接下来 $H$ 行，第 $i$ 行 $W$ 个正整数 $A_{i, 1}, A_{i, 2}, \\ldots, A_{i, W}$。", "outputFormat": "输出一行，一个数，表示所有可能的由 JOI 君经过的格子组成的矩形的数量。", "hint": "**【样例解释 \\#1】**\n\n由于有 $10$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ctry6t23.png)\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#2】**\n\n由于有 $15$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $15$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2zaim5fy.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n举个例子，如下矩形可以由 JOI 君经过的格子组成。由于总共有 $65$ 个可能的矩形，输出 $65$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q6y9c6d5.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le H, W, H \\cdot W \\le 5 \\times {10}^4$，$1 \\le A_{i, j} \\le {10}^7$，$A_{i_1, j_1} \\ne A_{i_2, j_2}$（$(i_1, j_1) \\ne (i_2, j_2)$）。\n\n- 子任务 $1$（$9$ 分）：$H = 1$。\n- 子任务 $2$（$10$ 分）：$H \\cdot W \\le 100$。\n- 子任务 $3$（$5$ 分）：$H \\cdot W \\le 1500$。\n- 子任务 $4$（$56$ 分）：$H \\cdot W \\le 7000$。\n- 子任务 $5$（$20$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T5「[砂の城 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5.pdf) / [Sandcastle 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 沙堡 2 / Sandcastle 2", "background": "", "description": "JOI 君在沙滩上玩耍。他建造了一座沙堡。这座由 JOI 君建造的沙堡位于沙滩上的一个矩形区域内。这个矩形区域有 $H$ 行 $W$ 列。位于从上往下的第 $i$ 行、从左往右的第 $j$ 列的格子的高度为 $A_{i, j}$。**注意所有 $\\boldsymbol{A_{i, j}}$ 的值互不相同。**\n\n在沙堡上，JOI 君执行了下列动作。\n\n1. 首先，JOI 君选择一个格子，他从该格子开始移动。\n2. 然后，他从当前格子出发朝上下左右四个方向之一移动到相邻的格子上。他必须移动到低于当前格子的格子上。他可以重复此动作零次或更多次。\n\n最终，如果我们从上往下看，他经过的格子将形成一个矩形。\n\n给定每个格子的高度信息 $A_{i, j}$，写一个程序计算所有可能的由 JOI 君经过的格子组成的矩形的数量。", "inputFormat": "第一行，两个正整数 $H, W$。\n\n接下来 $H$ 行，第 $i$ 行 $W$ 个正整数 $A_{i, 1}, A_{i, 2}, \\ldots, A_{i, W}$。", "outputFormat": "输出一行，一个数，表示所有可能的由 JOI 君经过的格子组成的矩形的数量。", "hint": "**【样例解释 \\#1】**\n\n由于有 $10$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ctry6t23.png)\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#2】**\n\n由于有 $15$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $15$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2zaim5fy.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n举个例子，如下矩形可以由 JOI 君经过的格子组成。由于总共有 $65$ 个可能的矩形，输出 $65$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q6y9c6d5.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le H, W, H \\cdot W \\le 5 \\times {10}^4$，$1 \\le A_{i, j} \\le {10}^7$，$A_{i_1, j_1} \\ne A_{i_2, j_2}$（$(i_1, j_1) \\ne (i_2, j_2)$）。\n\n- 子任务 $1$（$9$ 分）：$H = 1$。\n- 子任务 $2$（$10$ 分）：$H \\cdot W \\le 100$。\n- 子任务 $3$（$5$ 分）：$H \\cdot W \\le 1500$。\n- 子任务 $4$（$56$ 分）：$H \\cdot W \\le 7000$。\n- 子任务 $5$（$20$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T5「[砂の城 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5.pdf) / [Sandcastle 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8165", "type": "P", "difficulty": 4, "samples": [["8 3\n7 2 5 1 9 3 4 6\n3\n2 2 7 4\n1 2 5 8\n2 2 7 3", "52\n50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] AddK", "background": "", "description": "给定一个包含 $N$ 个整数 $A_1,\\dots,A_N$ 的数组 $A$ 和一个整数 $K$。你需要进行 $Q$ 次操作，包括下列两种类型：\n\n- $1$ $i_1$ $i_2$ $\\dots$ $i_K$：将 $A_{i_1},A_{i_2},\\dots,A_{i_{K-1}},A_{i_K}$ 的值依次替换为 $A_{i_2},A_{i_3},\\dots,A_{i_K},A_{i_1}$ 的值。其中，$i_1,\\dots,i_k$ 互不相同。\n- $2$ $l$ $r$ $m$：输出 $[l,r]$ 区间内所有长度为 $m$ 的连续子序列的元素和。", "inputFormat": "第一行两个整数 $N,K$。\n\n第二行 $N$ 个整数，表示数组 $A$ 的 $N$ 个整数。\n\n第三行一个整数 $Q$，表示操作次数。\n\n接下来 $Q$ 行，每行若干个整数，表示一次操作。", "outputFormat": "输出包含若干行整数，即为所有操作 $2$ 的结果。", "hint": "#### 样例解释\n\n第一次询问需要求出 $\\{2,5,1,9,3,4\\}$ 中所有长度为 $4$ 的连续子序列的元素和。这些子序列包括 $\\{2,5,1,9\\},\\{5,1,9,3\\},\\{1,9,3,4\\}$。因此答案为 $52$。\n\n第二次询问需要将 $A_2,A_5,A_8$ 依次替换为 $A_5,A_8,A_2$ 的值。替换后数组变为 $\\{7,9,5,1,6,3,4,2\\}$。\n\n第三次询问需要求出 $\\{9,5,1,6,3,4\\}$ 中所有长度为 $3$ 的连续子序列的元素和。这些子序列包括 $\\{9,5,1\\},\\{5,1,6\\},\\{1,6,3\\},\\{6,3,4\\}$。因此答案为 $50$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（36 pts）：$1 \\le N,Q \\le 10^4$ 且 $K=1$。\n- Subtask 2（56 pts）：$10001 \\le N,Q \\le 10^5$ 且 $K=1$。\n- Subtask 3（8 pts）：$1 \\le N,Q \\le 10^5$ 且 $2 \\le K \\le 10$。\n\n对于 $100\\%$ 的数据，$0 \\le A_i \\le 10^6$，$1 \\le l \\le r \\le N$，$1 \\le m \\le r-l+1$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 A AddK。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] AddK", "background": "", "description": "给定一个包含 $N$ 个整数 $A_1,\\dots,A_N$ 的数组 $A$ 和一个整数 $K$。你需要进行 $Q$ 次操作，包括下列两种类型：\n\n- $1$ $i_1$ $i_2$ $\\dots$ $i_K$：将 $A_{i_1},A_{i_2},\\dots,A_{i_{K-1}},A_{i_K}$ 的值依次替换为 $A_{i_2},A_{i_3},\\dots,A_{i_K},A_{i_1}$ 的值。其中，$i_1,\\dots,i_k$ 互不相同。\n- $2$ $l$ $r$ $m$：输出 $[l,r]$ 区间内所有长度为 $m$ 的连续子序列的元素和。", "inputFormat": "第一行两个整数 $N,K$。\n\n第二行 $N$ 个整数，表示数组 $A$ 的 $N$ 个整数。\n\n第三行一个整数 $Q$，表示操作次数。\n\n接下来 $Q$ 行，每行若干个整数，表示一次操作。", "outputFormat": "输出包含若干行整数，即为所有操作 $2$ 的结果。", "hint": "#### 样例解释\n\n第一次询问需要求出 $\\{2,5,1,9,3,4\\}$ 中所有长度为 $4$ 的连续子序列的元素和。这些子序列包括 $\\{2,5,1,9\\},\\{5,1,9,3\\},\\{1,9,3,4\\}$。因此答案为 $52$。\n\n第二次询问需要将 $A_2,A_5,A_8$ 依次替换为 $A_5,A_8,A_2$ 的值。替换后数组变为 $\\{7,9,5,1,6,3,4,2\\}$。\n\n第三次询问需要求出 $\\{9,5,1,6,3,4\\}$ 中所有长度为 $3$ 的连续子序列的元素和。这些子序列包括 $\\{9,5,1\\},\\{5,1,6\\},\\{1,6,3\\},\\{6,3,4\\}$。因此答案为 $50$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（36 pts）：$1 \\le N,Q \\le 10^4$ 且 $K=1$。\n- Subtask 2（56 pts）：$10001 \\le N,Q \\le 10^5$ 且 $K=1$。\n- Subtask 3（8 pts）：$1 \\le N,Q \\le 10^5$ 且 $2 \\le K \\le 10$。\n\n对于 $100\\%$ 的数据，$0 \\le A_i \\le 10^6$，$1 \\le l \\le r \\le N$，$1 \\le m \\le r-l+1$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 A AddK。", "locale": "zh-CN"}}}
{"pid": "P8166", "type": "P", "difficulty": 5, "samples": [["2\n7\n7 3 5 1 3 3 5\n6\n1 2 3 5 8 3", "2 4 6\n2 3 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] Kpart", "background": null, "description": "当一个只包含正整数的数组 $A$ 的所有长度为 $K$ 的连续子序列都能够被分成元素和相等的两部分时，数组 $A$ 就被称为 $K$ 数组。例如，$\\{1,2,1,3\\}$ 是一个 $3$ 数组，因为 $\\{1,2,1\\}$ 可被分为 $\\{1,1\\}$ 和 $\\{2\\}$ 且和均为 $2$，而 $\\{2,1,3\\}$ 可被分为 $\\{1,2\\}$ 和 $\\{3\\}$ 且和均为 $3$。但该数组不是 $2$ 数组，因为 $\\{1,2\\}$ 不能分成元素和相等的两个部分。\n\n给定 $T$ 个只包含正整数的数组，分别求每个数组为 $K$ 数组时所有 $K$ 的取值。", "inputFormat": "第一行一个整数 $T$。\n\n接下来将描述 $T$ 个数组。其中第一行包含整数 $N$，第二行 $N$ 个整数，表示数组的元素。", "outputFormat": "输出 $T$ 行，每行先输出符合要求的 $K$ 的个数，然后从小到大输出所有符合要求的 $K$ 的值。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le N \\le 30$。\n- Subtask 2（20 pts）：$31 \\le N \\le 120$。\n- Subtask 3（70 pts）：$121 \\le N \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 20$，每个数组的元素和均不超过 $10^5$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 B Kpart。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] Kpart", "background": null, "description": "当一个只包含正整数的数组 $A$ 的所有长度为 $K$ 的连续子序列都能够被分成元素和相等的两部分时，数组 $A$ 就被称为 $K$ 数组。例如，$\\{1,2,1,3\\}$ 是一个 $3$ 数组，因为 $\\{1,2,1\\}$ 可被分为 $\\{1,1\\}$ 和 $\\{2\\}$ 且和均为 $2$，而 $\\{2,1,3\\}$ 可被分为 $\\{1,2\\}$ 和 $\\{3\\}$ 且和均为 $3$。但该数组不是 $2$ 数组，因为 $\\{1,2\\}$ 不能分成元素和相等的两个部分。\n\n给定 $T$ 个只包含正整数的数组，分别求每个数组为 $K$ 数组时所有 $K$ 的取值。", "inputFormat": "第一行一个整数 $T$。\n\n接下来将描述 $T$ 个数组。其中第一行包含整数 $N$，第二行 $N$ 个整数，表示数组的元素。", "outputFormat": "输出 $T$ 行，每行先输出符合要求的 $K$ 的个数，然后从小到大输出所有符合要求的 $K$ 的值。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le N \\le 30$。\n- Subtask 2（20 pts）：$31 \\le N \\le 120$。\n- Subtask 3（70 pts）：$121 \\le N \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 20$，每个数组的元素和均不超过 $10^5$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 B Kpart。", "locale": "zh-CN"}}}
{"pid": "P8167", "type": "P", "difficulty": 6, "samples": [["3 3", "5 4 6\n1 0 2\n9 8 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2021] XCopy", "background": "", "description": "给定正整数 $N,M$。\n\n请构造一个 $N \\times M$ 的只包含非负整数的矩阵，使得每个元素互不相同且相邻（上下左右）元素在二进制下只有一位不同，同时保证矩阵的最大元素最小。", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "一个 $N \\times M$ 的只包含非负整数的矩阵。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n本题采用部分分计分，分数取决于输出答案和正确答案的大小。其中「答案」指的是矩阵中的最大元素。\n\n设 $S$ 为该测试点的总分，$O$ 为正确答案。那么当 $G$ 为输出答案时，得分为：\n\n$$S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0)$$\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果，即 $\\lfloor S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0) \\rfloor$。例如，当 $S=7,G=15,O=10$ 时，按上式得分约为 $4.14$ ，但在洛谷上得分为 $4$。\n\n如果输出矩阵不满足要求（即元素互不相同且相邻元素在二进制下只有一位不同），那么该测试点计 $0$ 分。\n\n注意，由于 Special Judge 对于格式要求较高，请在输出答案时**不要在每行末尾添加多余空格**，否则对应测试点会被计为 $0$ 分。另外，请不要输出超出 $[0,2^{63})$ 范围（long long）的整数，否则会被判为格式错误，计 $0$ 分。\n\n#### 样例解释\n\n样例矩阵如下：\n\n|$0101_2=5_{10}$|$0100_2=4_{10}$|$0110_2=6_{10}$|\n| :----------: | :----------: | :----------: |\n|$0001_2=1_{10}$|$0000_2=0_{10}$|$0010_2=2_{10}$|\n|$1001_2=9_{10}$|$1000_2=8_{10}$|$1010_2=10_{10}$|\n\n通过观察不难发现，每两个相邻元素在二进制下都只有一位不同。这种做法的答案为 $10$（即最大元素），是所有做法中最小的。当然，其它的最大元素为 $10$ 的矩阵也是符合题意的（例如将输入矩阵进行翻转操作等）。\n\n一种可以获得部分分的做法是：\n\n|$0110_2$|$0111_2$|$0101_2$|\n| :----------: | :----------: | :----------: |\n|$1110_2$|$1111_2$|$1101_2$|\n|$1010_2$|$1011_2$|$1001_2$|\n\n该矩阵的最大元素为 $15$。根据评分规则，这种做法在下取整前可以获得对应测试点 $\\max(1-\\sqrt{\\dfrac{\\frac{15}{10}-1}{3}},0)=1-\\dfrac{\\sqrt{6}}{6} \\approx 59\\%$ 的分数。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$N=1$。\n- Subtask 2（9 pts）：$N,M$ 是 $2$ 的整数幂。\n- Subtask 3（14 pts）：$N$ 是 $2$ 的整数幂。\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2000$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 C XCopy。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/cbrnaqp0) 进行 hack。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] XCopy", "background": "", "description": "给定正整数 $N,M$。\n\n请构造一个 $N \\times M$ 的只包含非负整数的矩阵，使得每个元素互不相同且相邻（上下左右）元素在二进制下只有一位不同，同时保证矩阵的最大元素最小。", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "一个 $N \\times M$ 的只包含非负整数的矩阵。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n本题采用部分分计分，分数取决于输出答案和正确答案的大小。其中「答案」指的是矩阵中的最大元素。\n\n设 $S$ 为该测试点的总分，$O$ 为正确答案。那么当 $G$ 为输出答案时，得分为：\n\n$$S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0)$$\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果，即 $\\lfloor S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0) \\rfloor$。例如，当 $S=7,G=15,O=10$ 时，按上式得分约为 $4.14$ ，但在洛谷上得分为 $4$。\n\n如果输出矩阵不满足要求（即元素互不相同且相邻元素在二进制下只有一位不同），那么该测试点计 $0$ 分。\n\n注意，由于 Special Judge 对于格式要求较高，请在输出答案时**不要在每行末尾添加多余空格**，否则对应测试点会被计为 $0$ 分。另外，请不要输出超出 $[0,2^{63})$ 范围（long long）的整数，否则会被判为格式错误，计 $0$ 分。\n\n#### 样例解释\n\n样例矩阵如下：\n\n|$0101_2=5_{10}$|$0100_2=4_{10}$|$0110_2=6_{10}$|\n| :----------: | :----------: | :----------: |\n|$0001_2=1_{10}$|$0000_2=0_{10}$|$0010_2=2_{10}$|\n|$1001_2=9_{10}$|$1000_2=8_{10}$|$1010_2=10_{10}$|\n\n通过观察不难发现，每两个相邻元素在二进制下都只有一位不同。这种做法的答案为 $10$（即最大元素），是所有做法中最小的。当然，其它的最大元素为 $10$ 的矩阵也是符合题意的（例如将输入矩阵进行翻转操作等）。\n\n一种可以获得部分分的做法是：\n\n|$0110_2$|$0111_2$|$0101_2$|\n| :----------: | :----------: | :----------: |\n|$1110_2$|$1111_2$|$1101_2$|\n|$1010_2$|$1011_2$|$1001_2$|\n\n该矩阵的最大元素为 $15$。根据评分规则，这种做法在下取整前可以获得对应测试点 $\\max(1-\\sqrt{\\dfrac{\\frac{15}{10}-1}{3}},0)=1-\\dfrac{\\sqrt{6}}{6} \\approx 59\\%$ 的分数。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$N=1$。\n- Subtask 2（9 pts）：$N,M$ 是 $2$ 的整数幂。\n- Subtask 3（14 pts）：$N$ 是 $2$ 的整数幂。\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2000$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 C XCopy。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/cbrnaqp0) 进行 hack。", "locale": "zh-CN"}}}
{"pid": "P8168", "type": "P", "difficulty": 4, "samples": [["4\n3\n111\n7\n1111111\n3\n000\n7\n0000000", "1 2 3\n1 2 3 4 5 6 7\n3 2 1\n7 6 5 4 3 2 1"], ["2\n3\n010\n7\n0010110", "3 2 1\n7 3 1 5 2 4 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2021] BinSearch", "background": "", "description": "```cpp\nbool binary_search(int n, int p[], int target){\n    int left = 1, right = n;\n    while(left < right){\n        int mid = (left + right) / 2;\n        if(p[mid] == target)\n            return true;\n        else if(p[mid] < target)\n            left = mid + 1;\n        else\n            right = mid - 1;\n    }\n    if(p[left] == target) return true;\n    else return false;\n}\n```\n\n众所周知，当上述函数在传入一个单调不递减的数组 $\\texttt p$ 且 $\\texttt{target}$ 在数组 $\\texttt p$ 中出现过，那么会返回 $\\texttt{true}$。然而，当 $\\texttt p$ 不存在单调性时则不然。\n\n给定正整数 $n$ 和一个数组 $b_1,\\dots,b_n \\in \\{\\texttt{true},\\texttt{false}\\}$。数据保证存在一个正整数 $k$，使得 $n=2^k-1$。\n\n规定 $S(p)$ 为 $i \\in \\{1,\\dots,n\\}$ 时 $\\texttt{binary\\_search(n, p, i)}$ 返回值不为 $b_i$ 的个数。你的任务是求一个 $\\{1,\\dots,n\\}$ 的排列 $p$，使得 $S(p)$ 尽可能小（具体请见评分规则）。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n每组数据的第一行包含一个正整数 $n$。第二行包含一个长度为 $n$ 的字符串（只含有字符 `0` 和 `1` 且无空格）。其中当第 $i$ 个字符为 `1` 时，则 $b_i=\\texttt{true}$，否则 $b_i=\\texttt{false}$。", "outputFormat": "输出 $T$ 行，每行输出求得的排列 $p$。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n- 当一个子任务中的所有排列 $p$ 均满足 $S(p) \\le 1$ 时，得分为该子任务总分的 $100\\%$。\n- 否则当一个子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为该子任务总分的 $50\\%$。\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果。例如，当该子任务的总分为 $3$ 且该子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为 $1$ 而不是 $1.5$。\n\n#### 样例 1 解释\n\n前两组数据满足 $S(p)=0$。\n\n第三组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 2)}=\\texttt{true} \\neq b_2$。\n\n第四组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 4)}=\\texttt{true} \\neq b_4$。\n\n#### 样例 2 解释\n\n两组数据均满足 $S(p)=0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（3 pts）：$b_i=\\texttt{true}$。\n- Subtask 2（4 pts）：$b_i=\\texttt{false}$。\n- Subtask 3（16 pts）：$1 \\le n \\le 7$。\n- Subtask 4（25 pts）：$1 \\le n \\le 15$。\n- Subtask 5（22 pts）：$n=2^{16}-1$ 且 $b_i$ 数据随机。\n- Subtask 6（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 7000$，$1 \\le \\sum n \\le 10^5$，$\\forall n \\in \\{n|n=2^k-1,k \\in \\N^*\\}$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 A BinSearch。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/5fdi0fvc) 进行 hack。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] BinSearch", "background": "", "description": "```cpp\nbool binary_search(int n, int p[], int target){\n    int left = 1, right = n;\n    while(left < right){\n        int mid = (left + right) / 2;\n        if(p[mid] == target)\n            return true;\n        else if(p[mid] < target)\n            left = mid + 1;\n        else\n            right = mid - 1;\n    }\n    if(p[left] == target) return true;\n    else return false;\n}\n```\n\n众所周知，当上述函数在传入一个单调不递减的数组 $\\texttt p$ 且 $\\texttt{target}$ 在数组 $\\texttt p$ 中出现过，那么会返回 $\\texttt{true}$。然而，当 $\\texttt p$ 不存在单调性时则不然。\n\n给定正整数 $n$ 和一个数组 $b_1,\\dots,b_n \\in \\{\\texttt{true},\\texttt{false}\\}$。数据保证存在一个正整数 $k$，使得 $n=2^k-1$。\n\n规定 $S(p)$ 为 $i \\in \\{1,\\dots,n\\}$ 时 $\\texttt{binary\\_search(n, p, i)}$ 返回值不为 $b_i$ 的个数。你的任务是求一个 $\\{1,\\dots,n\\}$ 的排列 $p$，使得 $S(p)$ 尽可能小（具体请见评分规则）。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n每组数据的第一行包含一个正整数 $n$。第二行包含一个长度为 $n$ 的字符串（只含有字符 `0` 和 `1` 且无空格）。其中当第 $i$ 个字符为 `1` 时，则 $b_i=\\texttt{true}$，否则 $b_i=\\texttt{false}$。", "outputFormat": "输出 $T$ 行，每行输出求得的排列 $p$。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n- 当一个子任务中的所有排列 $p$ 均满足 $S(p) \\le 1$ 时，得分为该子任务总分的 $100\\%$。\n- 否则当一个子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为该子任务总分的 $50\\%$。\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果。例如，当该子任务的总分为 $3$ 且该子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为 $1$ 而不是 $1.5$。\n\n#### 样例 1 解释\n\n前两组数据满足 $S(p)=0$。\n\n第三组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 2)}=\\texttt{true} \\neq b_2$。\n\n第四组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 4)}=\\texttt{true} \\neq b_4$。\n\n#### 样例 2 解释\n\n两组数据均满足 $S(p)=0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（3 pts）：$b_i=\\texttt{true}$。\n- Subtask 2（4 pts）：$b_i=\\texttt{false}$。\n- Subtask 3（16 pts）：$1 \\le n \\le 7$。\n- Subtask 4（25 pts）：$1 \\le n \\le 15$。\n- Subtask 5（22 pts）：$n=2^{16}-1$ 且 $b_i$ 数据随机。\n- Subtask 6（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 7000$，$1 \\le \\sum n \\le 10^5$，$\\forall n \\in \\{n|n=2^k-1,k \\in \\N^*\\}$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 A BinSearch。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/5fdi0fvc) 进行 hack。", "locale": "zh-CN"}}}
{"pid": "P8169", "type": "P", "difficulty": 6, "samples": [["3 7\n#######\n#Soooo#\n#######", "4"], ["3 8\n########\n#SoXooS#\n########", "1"], ["7 18\n##################\n#................#\n#.o...SX.......o.#\n#.o...X..X.....o.#\n#.o.....XS.....o.#\n#................#\n##################", "0"], ["7 18\n##################\n#....#...........#\n#.o...SX.......o.#\n#.o...X..X.....o.#\n#.o.....XS.....o.#\n#.........#......#\n##################", "6"], ["7 18\n##################\n#......X..S....oo#\n##################\n#..o..S.X......o.#\n##########X#######\n#o.....S...X.....#\n##################", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] Dungeons", "background": null, "description": "你需要在一个 $N \\times M$ 的地图进行游戏。地图的每个位置包括下列类型：\n\n- $\\texttt .$：空地。\n- $\\texttt \\#$：墙壁。\n- $\\texttt o$：金币。\n- $\\texttt X$：炸弹。\n- $\\texttt S$：起始位置。\n\n每张地图包含一个或多个 $\\texttt S$。当游戏开始时，你的起点将会被选定为任意一个 $\\texttt S$。由于地图视野较暗，因此你只能看到以自身为中心的 $3 \\times 3$ 正方形内的位置。同时，$\\texttt X$ 和 $\\texttt S$ 在视野中会被视为是空地（$\\texttt .$）。注意，你不可以进入墙壁（$\\texttt \\#$）。\n\n你每一步可以向上下左右四个方向进行移动。当你进入 $\\texttt o$ 格时，你会获得 $1$ 枚金币，同时该格的 $\\texttt o$ 消失。当你进入 $\\texttt X$ 格时，你失去所有金币且游戏结束。\n\n在游戏开始前，你已经获得了完整的地图（尽管你不知道你会以哪个 $\\texttt S$ 作为起点）。如果你以最优策略进行游戏，求最坏情况下能够保证获得的金币数量。", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来的 $N$ 行用来描述地图。数据保证地图外围（即第一行、最后一行、第一列、最后一列）都是 `#` 字符。", "outputFormat": "一个整数，表示最坏情况下能够保证获得的金币数量。", "hint": "#### 样例 1 解释\n\n由于 $\\texttt S$ 只有一个，因此起点固定，可以获得所有金币。\n\n#### 样例 2 解释\n\n分别以左侧和右侧 $\\texttt S$ 为起点时的初始视野（$\\texttt @$ 为起点）：\n\n$$\\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#} \\\\ \\texttt{\\#@o\\,\\,\\,\\,\\,\\,\\,\\,o@\\#} \\\\ \\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#}$$\n\n以左侧的 $\\texttt S$ 为起点时可获得 $1$ 枚金币，以右侧的为起点时可获得 $2$ 枚。因此在最坏情况下最多可获得 $\\min(1,2)=1$ 枚金币。\n\n#### 样例 3 解释\n\n无论起点是哪一个 $\\texttt S$，初始视野均为：\n\n$$\\texttt{...} \\\\ \\texttt{.@.} \\\\ \\texttt{...}$$\n\n由于不知道当前位置具体在地图上是哪里，因此最坏情况是踏入起点旁边的 $\\texttt X$（视野中为 $\\texttt .$）。这种情况下不能获得任何金币，答案为 $0$。\n\n#### 样例 4 解释\n\n分别以左上和右下的 $\\texttt S$ 为起点时的初始视野：\n\n$$\\texttt{\\#..\\,\\,\\,\\,\\,\\,\\,\\,...} \\\\ \\texttt{.@.\\,\\,\\,\\,\\,\\,\\,\\,.@.} \\\\ \\texttt{...\\,\\,\\,\\,\\,\\,\\,\\,..\\#}$$\n\n由于初始视野不同，因此可以通过 $\\texttt \\#$ 位置的不同判断在地图上的具体位置。因此可以获得所有金币，答案为 $6$。\n\n#### 样例 5 解释\n\n不妨先向左走 $2$ 步。如果能够看到 $\\texttt o$，那么可以判断出位于第四行，同时捡起左侧的金币。\n\n否则仍无法判断位于第二行还是第六行。因此可以在向左 $2$ 步的基础上往右 $4$ 步（即走到起点右侧 $2$ 步的位置）。如果视野右上是 $\\texttt .$（在地图中为 $\\texttt X$），那么可以判断位于第六行。这时可以安全地一直向左获得第二列的金币。如果视野不是 $\\texttt .$，那么只需一直向右即可获得第十六列和第十七列的金币。\n\n按这种方案得到的答案是最优的，为 $\\min\\{1,1,2\\}=1$。\n\n不难发现，如果直接向右，那么可能直接进入 $\\texttt X$——这种方案得到的答案为 $0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n设地图中 $\\texttt S$ 的数量为 $S$。\n\n- Subtask 1（3 pts）：$S=1$，不存在 $\\texttt X$ 且只有地图外围有 $\\texttt \\#$。\n- Subtask 2（7 pts）：$N=3$。\n- Subtask 3（12 pts）：$S=1$。\n- Subtask 4（23 pts）：$S=2$。\n- Subtask 5（41 pts）：$1 \\le N,M \\le 250$，$1 \\le S \\le 12$。\n- Subtask 6（14 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 400$，$1 \\le S \\le 60$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 B Dungeons。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] Dungeons", "background": null, "description": "你需要在一个 $N \\times M$ 的地图进行游戏。地图的每个位置包括下列类型：\n\n- $\\texttt .$：空地。\n- $\\texttt \\#$：墙壁。\n- $\\texttt o$：金币。\n- $\\texttt X$：炸弹。\n- $\\texttt S$：起始位置。\n\n每张地图包含一个或多个 $\\texttt S$。当游戏开始时，你的起点将会被选定为任意一个 $\\texttt S$。由于地图视野较暗，因此你只能看到以自身为中心的 $3 \\times 3$ 正方形内的位置。同时，$\\texttt X$ 和 $\\texttt S$ 在视野中会被视为是空地（$\\texttt .$）。注意，你不可以进入墙壁（$\\texttt \\#$）。\n\n你每一步可以向上下左右四个方向进行移动。当你进入 $\\texttt o$ 格时，你会获得 $1$ 枚金币，同时该格的 $\\texttt o$ 消失。当你进入 $\\texttt X$ 格时，你失去所有金币且游戏结束。\n\n在游戏开始前，你已经获得了完整的地图（尽管你不知道你会以哪个 $\\texttt S$ 作为起点）。如果你以最优策略进行游戏，求最坏情况下能够保证获得的金币数量。", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来的 $N$ 行用来描述地图。数据保证地图外围（即第一行、最后一行、第一列、最后一列）都是 `#` 字符。", "outputFormat": "一个整数，表示最坏情况下能够保证获得的金币数量。", "hint": "#### 样例 1 解释\n\n由于 $\\texttt S$ 只有一个，因此起点固定，可以获得所有金币。\n\n#### 样例 2 解释\n\n分别以左侧和右侧 $\\texttt S$ 为起点时的初始视野（$\\texttt @$ 为起点）：\n\n$$\\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#} \\\\ \\texttt{\\#@o\\,\\,\\,\\,\\,\\,\\,\\,o@\\#} \\\\ \\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#}$$\n\n以左侧的 $\\texttt S$ 为起点时可获得 $1$ 枚金币，以右侧的为起点时可获得 $2$ 枚。因此在最坏情况下最多可获得 $\\min(1,2)=1$ 枚金币。\n\n#### 样例 3 解释\n\n无论起点是哪一个 $\\texttt S$，初始视野均为：\n\n$$\\texttt{...} \\\\ \\texttt{.@.} \\\\ \\texttt{...}$$\n\n由于不知道当前位置具体在地图上是哪里，因此最坏情况是踏入起点旁边的 $\\texttt X$（视野中为 $\\texttt .$）。这种情况下不能获得任何金币，答案为 $0$。\n\n#### 样例 4 解释\n\n分别以左上和右下的 $\\texttt S$ 为起点时的初始视野：\n\n$$\\texttt{\\#..\\,\\,\\,\\,\\,\\,\\,\\,...} \\\\ \\texttt{.@.\\,\\,\\,\\,\\,\\,\\,\\,.@.} \\\\ \\texttt{...\\,\\,\\,\\,\\,\\,\\,\\,..\\#}$$\n\n由于初始视野不同，因此可以通过 $\\texttt \\#$ 位置的不同判断在地图上的具体位置。因此可以获得所有金币，答案为 $6$。\n\n#### 样例 5 解释\n\n不妨先向左走 $2$ 步。如果能够看到 $\\texttt o$，那么可以判断出位于第四行，同时捡起左侧的金币。\n\n否则仍无法判断位于第二行还是第六行。因此可以在向左 $2$ 步的基础上往右 $4$ 步（即走到起点右侧 $2$ 步的位置）。如果视野右上是 $\\texttt .$（在地图中为 $\\texttt X$），那么可以判断位于第六行。这时可以安全地一直向左获得第二列的金币。如果视野不是 $\\texttt .$，那么只需一直向右即可获得第十六列和第十七列的金币。\n\n按这种方案得到的答案是最优的，为 $\\min\\{1,1,2\\}=1$。\n\n不难发现，如果直接向右，那么可能直接进入 $\\texttt X$——这种方案得到的答案为 $0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n设地图中 $\\texttt S$ 的数量为 $S$。\n\n- Subtask 1（3 pts）：$S=1$，不存在 $\\texttt X$ 且只有地图外围有 $\\texttt \\#$。\n- Subtask 2（7 pts）：$N=3$。\n- Subtask 3（12 pts）：$S=1$。\n- Subtask 4（23 pts）：$S=2$。\n- Subtask 5（41 pts）：$1 \\le N,M \\le 250$，$1 \\le S \\le 12$。\n- Subtask 6（14 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 400$，$1 \\le S \\le 60$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 B Dungeons。", "locale": "zh-CN"}}}
{"pid": "P8170", "type": "P", "difficulty": 5, "samples": [["4 3 4 3\n2 5\n3 2\n0 4\n2 8", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] Waterfront", "background": "", "description": "现有 $N$ 丛初始高度为 $\\textit{height}_i$ 的灌木。每丛灌木每天都会生长 $\\textit{dailyGrowth}_i$ 的高度。\n\n每天在**灌木生长完毕后**，园丁将对灌木剪枝 $k$ 次。每次可以将任意一丛高度不小于 $x$ 的灌木剪短 $x$ 个单位。\n\n求 $M$ 天后最高的一丛灌木的高度的最小值。", "inputFormat": "第一行四个正整数 $N,M,k,x$。\n\n接下来的 $N$ 行，每行两个非负整数 $\\textit{height}_i,\\textit{dailyGrowth}_i$。", "outputFormat": "一个非负整数，表示 $M$ 天后最高的一丛灌木的高度的最小值。", "hint": "#### 样例解释\n\n|天数|灌木编号|高度变化量|\n| :----------: | :----------: | :----------: |\n|$1$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$2 \\overset{+5}{\\to} 7 \\overset{-3}{\\to} 4 \\\\ 3 \\overset{+2}{\\to} 5 \\\\ 0 \\overset{+4}{\\to} 4 \\\\ 2 \\overset{+8}{\\to} 10 \\overset{-3}{\\to} 7 \\overset{-3}{\\to} 4 \\overset{-3}{\\to} 1$|\n|$2$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$4 \\overset{+5}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3 \\\\ 5 \\overset{+2}{\\to} 7 \\\\ 4 \\overset{+4}{\\to} 8 \\\\ 1 \\overset{+8}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3$|\n|$3$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$3 \\overset{+5}{\\to} 8 \\\\ 7 \\overset{+2}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 8 \\overset{+4}{\\to} 12 \\overset{-3}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 3 \\overset{+8}{\\to} 11 \\overset{-3}{\\to} 8$|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 100$，$M=k=x=1$，$\\textit{height}_i \\ge 1$，$\\textit{dailyGrowth}_i=0$。\n- Subtask 2（22 pts）：$1 \\le N,M \\le 500$。\n- Subtask 3（43 pts）：$1 \\le N,M \\le 5000$。\n- Subtask 4（27 pts）：$1 \\le N,M \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 1000$，$1 \\le x \\le 10^4$，$0 \\le \\textit{height}_i,\\textit{dailyGrowth}_i \\le 10^4$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 C Waterfront。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] Waterfront", "background": "", "description": "现有 $N$ 丛初始高度为 $\\textit{height}_i$ 的灌木。每丛灌木每天都会生长 $\\textit{dailyGrowth}_i$ 的高度。\n\n每天在**灌木生长完毕后**，园丁将对灌木剪枝 $k$ 次。每次可以将任意一丛高度不小于 $x$ 的灌木剪短 $x$ 个单位。\n\n求 $M$ 天后最高的一丛灌木的高度的最小值。", "inputFormat": "第一行四个正整数 $N,M,k,x$。\n\n接下来的 $N$ 行，每行两个非负整数 $\\textit{height}_i,\\textit{dailyGrowth}_i$。", "outputFormat": "一个非负整数，表示 $M$ 天后最高的一丛灌木的高度的最小值。", "hint": "#### 样例解释\n\n|天数|灌木编号|高度变化量|\n| :----------: | :----------: | :----------: |\n|$1$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$2 \\overset{+5}{\\to} 7 \\overset{-3}{\\to} 4 \\\\ 3 \\overset{+2}{\\to} 5 \\\\ 0 \\overset{+4}{\\to} 4 \\\\ 2 \\overset{+8}{\\to} 10 \\overset{-3}{\\to} 7 \\overset{-3}{\\to} 4 \\overset{-3}{\\to} 1$|\n|$2$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$4 \\overset{+5}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3 \\\\ 5 \\overset{+2}{\\to} 7 \\\\ 4 \\overset{+4}{\\to} 8 \\\\ 1 \\overset{+8}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3$|\n|$3$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$3 \\overset{+5}{\\to} 8 \\\\ 7 \\overset{+2}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 8 \\overset{+4}{\\to} 12 \\overset{-3}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 3 \\overset{+8}{\\to} 11 \\overset{-3}{\\to} 8$|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 100$，$M=k=x=1$，$\\textit{height}_i \\ge 1$，$\\textit{dailyGrowth}_i=0$。\n- Subtask 2（22 pts）：$1 \\le N,M \\le 500$。\n- Subtask 3（43 pts）：$1 \\le N,M \\le 5000$。\n- Subtask 4（27 pts）：$1 \\le N,M \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 1000$，$1 \\le x \\le 10^4$，$0 \\le \\textit{height}_i,\\textit{dailyGrowth}_i \\le 10^4$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 C Waterfront。", "locale": "zh-CN"}}}
{"pid": "P8171", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 3\n1 3", "10"], ["4 2\n1 1 1 1\n1 2\n2 4", "3\n6"], ["5 3\n1 2 1 3 2\n2 5\n1 3\n3 4", "16\n8\n4"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "莫队", "2021", "排序", "CEOI（中欧）"], "title": "[CEOI 2021] Diversity", "background": "译自 CEOI2021 Day1 T1. [Diversity](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。  \n", "description": "定义一个序列的 _多样性_ 为其不同的元素个数，一个序列的 _总多样性_ 为其所有子区间的 _多样性_ 的和。\n\n例如，序列 $(1,1,2)$ 的 _多样性_ 为 $2$ ，因为其有两种元素；它的 _总多样性_ 为序列 $(1),(1),(2),(1,1),(1,2),(1,1,2)$ 的 _多样性_ 之和，即 $1+1+1+1+2+2=8$。\n\n给出长为 $N$ 的序列 $\\{a _i\\}$ 与 $Q$ 个**互相独立**的询问，每个询问给出 $[l,r]$。求将原序列 $[l,r]$ 内的数重排可以得到的该区间最小的 _总多样性_。", "inputFormat": "输入第一行包含两个整数 $N$ 和 $Q$，表示序列长度和询问数量。\n\n第二行 $N$ 个整数，表示序列 $\\{a_i\\}$。\n\n接下来 $Q$ 行，每行两个整数 $l_i,r_i$，表示第 $i$ 次询问的区间。", "outputFormat": "输出应包含 $Q$ 行整数，第 $i$ 行的整数表示第 $i$ 个询问的答案。", "hint": "#### 样例解释\n\n对于第一组样例，无论怎样重排，询问区间的 _总多样性_ 总是 $10$。\n\n对于第二组样例，序列所有元素都为 $1$，故无需重排。区间 $[1,2]$ 的 _总多样性_ 为 $3$，区间 $[2,4]$ 的 _总多样性_ 为 $6$。\n\n对于第三组样例，第一个询问可将序列重排为 $(1,2,2,3)$，它的 _总多样性_ 为 $1+1+1+1+2+1+2+2+2+3=16$；第二个询问可将序列重排为 $(1,1,2)$，它的 _总多样性_ 为 $1+1+1+1+2+2=8$；第三个询问可将序列重排为 $(1,3)$，它的 _总多样性_ 为 $1+1+2=4$。\n\n#### 子任务\n\n所有测试点均满足 $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$。\n\n各子任务的约束条件如下：\n| 子任务编号 | 分值 |                             约束                             |\n| :--------: | :--: | :----------------------------------------------------------: |\n|    $1$     | $4$  | $1\\leq N\\leq 11$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $2$     | $10$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 11$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $3$     | $8$  | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 23$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $4$     | $16$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 1000$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $5$     | $26$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $6$     | $36$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] Diversity", "background": "译自 CEOI2021 Day1 T1. [Diversity](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。  \n", "description": "定义一个序列的 _多样性_ 为其不同的元素个数，一个序列的 _总多样性_ 为其所有子区间的 _多样性_ 的和。\n\n例如，序列 $(1,1,2)$ 的 _多样性_ 为 $2$ ，因为其有两种元素；它的 _总多样性_ 为序列 $(1),(1),(2),(1,1),(1,2),(1,1,2)$ 的 _多样性_ 之和，即 $1+1+1+1+2+2=8$。\n\n给出长为 $N$ 的序列 $\\{a _i\\}$ 与 $Q$ 个**互相独立**的询问，每个询问给出 $[l,r]$。求将原序列 $[l,r]$ 内的数重排可以得到的该区间最小的 _总多样性_。", "inputFormat": "输入第一行包含两个整数 $N$ 和 $Q$，表示序列长度和询问数量。\n\n第二行 $N$ 个整数，表示序列 $\\{a_i\\}$。\n\n接下来 $Q$ 行，每行两个整数 $l_i,r_i$，表示第 $i$ 次询问的区间。", "outputFormat": "输出应包含 $Q$ 行整数，第 $i$ 行的整数表示第 $i$ 个询问的答案。", "hint": "#### 样例解释\n\n对于第一组样例，无论怎样重排，询问区间的 _总多样性_ 总是 $10$。\n\n对于第二组样例，序列所有元素都为 $1$，故无需重排。区间 $[1,2]$ 的 _总多样性_ 为 $3$，区间 $[2,4]$ 的 _总多样性_ 为 $6$。\n\n对于第三组样例，第一个询问可将序列重排为 $(1,2,2,3)$，它的 _总多样性_ 为 $1+1+1+1+2+1+2+2+2+3=16$；第二个询问可将序列重排为 $(1,1,2)$，它的 _总多样性_ 为 $1+1+1+1+2+2=8$；第三个询问可将序列重排为 $(1,3)$，它的 _总多样性_ 为 $1+1+2=4$。\n\n#### 子任务\n\n所有测试点均满足 $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$。\n\n各子任务的约束条件如下：\n| 子任务编号 | 分值 |                             约束                             |\n| :--------: | :--: | :----------------------------------------------------------: |\n|    $1$     | $4$  | $1\\leq N\\leq 11$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $2$     | $10$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 11$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $3$     | $8$  | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 23$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $4$     | $16$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 1000$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $5$     | $26$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $6$     | $36$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$ |", "locale": "zh-CN"}}}
