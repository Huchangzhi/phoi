{"pid": "P1964", "type": "P", "difficulty": 2, "samples": [["20 3\r\n63 1 64 yinshifen\r\n1 10 1 men\r\n1 1 64 yinshifen", "64"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "【mc生存】卖东西", "background": "服务器好好玩。", "description": "lcy0x1 去服务器的系统商店买东西。\n\n一个人的背包有 $21$ 格。\n\n一开始他的背包里有 $m$ 件不同的物品（**不能卖**）。\n\n他要买 $n$ 种物品，第 $i$ 件物品的名字为 $st_i$，有 $a_i$ 件，单件价值为 $b_i$，一格可以放 $c_i$ 件。\n\n相同的物品可以放同一格（只要没放满）。\n\n问：他一次最多能买多少钱的物品。", "inputFormat": "第一行两个整数 $m,n$。\n\n下面 $n$ 行，第 $i+1$ 行三个整数 $a_i,b_i,c_i$ 与一个字符串 $st_i$。", "outputFormat": "买入物品的最高价值总和 $s$。", "hint": "数据保证：\n\n- $0\\leq m\\leq 21$；\n- $0\\leq n\\leq 100$；\n- $0\\leq a_i\\leq 1344$；\n- $0\\leq b_i\\leq 10^4$；\n- $0<c_i\\leq 64$；\n- $0<|st_i|<100$；\n- $0\\leq s\\leq 10^6$。\n\n**注：数据强大，搜索 $0$ 分，请使用多重背包。**", "locale": "zh-CN", "translations": {"en": {"title": "【MC Survival】Selling Items", "background": "The server is fun.", "description": "lcy0x1 goes to the server’s system shop to sell items.\n\nA player’s backpack has $21$ slots.\n\nInitially, his backpack contains $m$ different item types (cannot be sold), which occupy $m$ slots.\n\nHe wants to sell $n$ types of items. For the $i$-th type with name $st_i$, there are $a_i$ items, each worth $b_i$, and up to $c_i$ items can be stacked in one slot.\n\nIdentical items can be put in the same slot as long as it is not full.\n\nQuestion: In one run, what is the maximum amount of money he can sell?", "inputFormat": "The first line contains two integers $m, n$.\n\nEach of the next $n$ lines contains three integers $a_i, b_i, c_i$ and a string $st_i$.", "outputFormat": "The maximum amount of money $s$.", "hint": "Constraints:\n\n- $0\\leq m\\leq 21$；\n- $0\\leq n\\leq 100$；\n- $0\\leq a_i\\leq 1344$；\n- $0\\leq b_i\\leq 10^4$；\n- $0<c_i\\leq 64$；\n- $0<|st_i|<100$；\n- $0\\leq s\\leq 10^6$。\n\nNote: The testdata is strong. Brute-force search scores $0$. Please use the bounded knapsack.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【mc生存】卖东西", "background": "服务器好好玩。", "description": "lcy0x1 去服务器的系统商店买东西。\n\n一个人的背包有 $21$ 格。\n\n一开始他的背包里有 $m$ 件不同的物品（**不能卖**）。\n\n他要买 $n$ 种物品，第 $i$ 件物品的名字为 $st_i$，有 $a_i$ 件，单件价值为 $b_i$，一格可以放 $c_i$ 件。\n\n相同的物品可以放同一格（只要没放满）。\n\n问：他一次最多能买多少钱的物品。", "inputFormat": "第一行两个整数 $m,n$。\n\n下面 $n$ 行，第 $i+1$ 行三个整数 $a_i,b_i,c_i$ 与一个字符串 $st_i$。", "outputFormat": "买入物品的最高价值总和 $s$。", "hint": "数据保证：\n\n- $0\\leq m\\leq 21$；\n- $0\\leq n\\leq 100$；\n- $0\\leq a_i\\leq 1344$；\n- $0\\leq b_i\\leq 10^4$；\n- $0<c_i\\leq 64$；\n- $0<|st_i|<100$；\n- $0\\leq s\\leq 10^6$。\n\n**注：数据强大，搜索 $0$ 分，请使用多重背包。**", "locale": "zh-CN"}}}
{"pid": "P1965", "type": "P", "difficulty": 2, "samples": [["10 3 4 5\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "2013", "NOIP 提高组"], "title": "[NOIP 2013 提高组] 转圈游戏", "background": "NOIP2013 提高组 D1T1", "description": "$n$ 个小伙伴（编号从 $0$ 到 $n-1$）围坐一圈玩游戏。按照顺时针方向给 $n$ 个位置编号，从 $0$ 到 $n-1$。最初，第 $0$ 号小伙伴在第 $0$ 号位置，第 $1$ 号小伙伴在第 $1$ 号位置，……，依此类推。游戏规则如下：每一轮第 $0$ 号位置上的小伙伴顺时针走到第 $m$ 号位置，第 $1$ 号位置小伙伴走到第 $m+1$ 号位置，……，依此类推，第 $n - m$ 号位置上的小伙伴走到第 $0$ 号位置，第 $n - m+1$ 号位置上的小伙伴走到第 $1$ 号位置，……，第 $n-1$ 号位置上的小伙伴顺时针走到第 $m-1$ 号位置。\n\n现在，一共进行了 ${10}^k$ 轮，请问 $x$ 号小伙伴最后走到了第几号位置。", "inputFormat": "共一行，包含四个整数 $n, m, k, x$，每两个整数之间用一个空格隔开。\n", "outputFormat": "一个整数，表示 ${10}^k$ 轮后 $x$ 号小伙伴所在的位置编号。", "hint": "对于 $30\\%$ 的数据，$0 < k < 7$；\n\n对于 $80\\%$ 的数据，$0 < k < {10}^7$；\n\n对于 $100\\%$ 的数据，$1 < n < {10}^6$，$0 < m < n$，$0 \\le x \\le n$，$0 < k < {10}^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Senior] Circle Game", "background": "NOIP 2013 Senior D1T1.", "description": "$n$ friends (numbered from $0$ to $n-1$) sit in a circle to play a game. The $n$ positions are numbered clockwise from $0$ to $n-1$. Initially, friend $0$ is at position $0$, friend $1$ is at position $1$, and so on. The rules are as follows: in each round, the friend at position $0$ moves clockwise to position $m$, the friend at position $1$ moves to position $m+1$, and so on; the friend at position $n-m$ moves to position $0$, the friend at position $n-m+1$ moves to position $1$, ... , and the friend at position $n-1$ moves clockwise to position $m-1$.\n\nNow, after a total of ${10}^k$ rounds, determine which position friend $x$ ends up at.", "inputFormat": "One line containing four integers $n, m, k, x$, with a single space separating each pair of integers.", "outputFormat": "One integer, the position index where friend $x$ is located after ${10}^k$ rounds.", "hint": "For $30\\%$ of the testdata, $0 < k < 7$.\n\nFor $80\\%$ of the testdata, $0 < k < {10}^7$.\n\nFor $100\\%$ of the testdata, $1 < n < {10}^6$, $0 < m < n$, $0 \\le x \\le n$, $0 < k < {10}^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 提高组] 转圈游戏", "background": "NOIP2013 提高组 D1T1", "description": "$n$ 个小伙伴（编号从 $0$ 到 $n-1$）围坐一圈玩游戏。按照顺时针方向给 $n$ 个位置编号，从 $0$ 到 $n-1$。最初，第 $0$ 号小伙伴在第 $0$ 号位置，第 $1$ 号小伙伴在第 $1$ 号位置，……，依此类推。游戏规则如下：每一轮第 $0$ 号位置上的小伙伴顺时针走到第 $m$ 号位置，第 $1$ 号位置小伙伴走到第 $m+1$ 号位置，……，依此类推，第 $n - m$ 号位置上的小伙伴走到第 $0$ 号位置，第 $n - m+1$ 号位置上的小伙伴走到第 $1$ 号位置，……，第 $n-1$ 号位置上的小伙伴顺时针走到第 $m-1$ 号位置。\n\n现在，一共进行了 ${10}^k$ 轮，请问 $x$ 号小伙伴最后走到了第几号位置。", "inputFormat": "共一行，包含四个整数 $n, m, k, x$，每两个整数之间用一个空格隔开。\n", "outputFormat": "一个整数，表示 ${10}^k$ 轮后 $x$ 号小伙伴所在的位置编号。", "hint": "对于 $30\\%$ 的数据，$0 < k < 7$；\n\n对于 $80\\%$ 的数据，$0 < k < {10}^7$；\n\n对于 $100\\%$ 的数据，$1 < n < {10}^6$，$0 < m < n$，$0 \\le x \\le n$，$0 < k < {10}^9$。", "locale": "zh-CN"}}}
{"pid": "P1966", "type": "P", "difficulty": 5, "samples": [["4\n2 3 1 4\n3 2 1 4\n", "1"], ["4\n1 3 4 2\n1 7 2 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "树状数组", "NOIP 提高组", "排序"], "title": "[NOIP 2013 提高组] 火柴排队", "background": "NOIP2013 提高组 D1T2", "description": "涵涵有两盒火柴，每盒装有 $n$ 根火柴，每根火柴都有一个高度。 现在将每盒中的火柴各自排成一列， 同一列火柴的高度互不相同， 两列火柴之间的距离定义为：$ \\sum (a_i-b_i)^2$。\n\n其中 $a_i$ 表示第一列火柴中第 $i$ 个火柴的高度，$b_i$ 表示第二列火柴中第  $i$ 个火柴的高度。\n\n每列火柴中相邻两根火柴的位置都可以交换，请你通过交换使得两列火柴之间的距离最小。请问得到这个最小的距离，最少需要交换多少次？如果这个数字太大，请输出这个最小交换次数对 $10^8-3$ 取模的结果。\n", "inputFormat": "共三行，第一行包含一个整数 $n$，表示每盒中火柴的数目。\n\n第二行有 $n$ 个整数，每两个整数之间用一个空格隔开，表示第一列火柴的高度。\n\n第三行有 $n$ 个整数，每两个整数之间用一个空格隔开，表示第二列火柴的高度。\n", "outputFormat": "一个整数，表示最少交换次数对 $10^8-3$ 取模的结果。\n", "hint": "**输入输出样例说明一**\n\n最小距离是 $ 0$，最少需要交换 $1$ 次，比如：交换第 $1 $ 列的前 $ 2$ 根火柴或者交换第 $2$ 列的前 $2 $ 根火柴。\n\n**输入输出样例说明二**\n\n最小距离是 $10$，最少需要交换 $2$ 次，比如：交换第 $1$ 列的中间 $2$ 根火柴的位置，再交换第 $2$ 列中后 $2$ 根火柴的位置。\n\n**数据范围**\n\n对于 $10\\%$ 的数据， $1 \\leq n \\leq 10$；\n\n对于 $30\\%$ 的数据，$1 \\leq n \\leq 100$；\n\n对于 $60\\%$ 的数据，$1 \\leq n \\leq 10^3$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq a_i,b_i < 2^{31}$ 且对于任意 $1\\le i<j\\le n$，$a_i\\neq a_j$，$b_i\\neq b_j$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Senior] Matchsticks Lineup", "background": "NOIP 2013 Senior D1T2.", "description": "Hanhan has two boxes of matches, each containing $n$ matches. Every match has a height. Now arrange the matches from each box into a column. Within the same column, all heights are distinct. Define the distance between the two columns as $ \\sum (a_i-b_i)^2$.\n\nHere $a_i$ is the height of the $i$-th match in the first column, and $b_i$ is the height of the $i$-th match in the second column.\n\nYou may swap adjacent matches within each column. Please minimize the distance between the two columns by swapping. What is the minimum number of swaps needed to achieve this minimum distance? If this number is too large, output the result of this minimum number of swaps modulo $10^8-3$.", "inputFormat": "There are three lines in total. The first line contains an integer $n$, the number of matches in each box.\n\nThe second line contains $n$ integers separated by single spaces, representing the heights of the matches in the first column.\n\nThe third line contains $n$ integers separated by single spaces, representing the heights of the matches in the second column.", "outputFormat": "Output a single integer: the minimum number of swaps modulo $10^8-3$.", "hint": "Explanation for Sample 1:\n\nThe minimum distance is $ 0$; the minimum number of swaps is $1$. For example, swap the first $ 2$ matches in column $1$, or swap the first $2 $ matches in column $2$.\n\nExplanation for Sample 2:\n\nThe minimum distance is $10$; the minimum number of swaps is $2$. For example, swap the middle $2$ matches in column $1$, and then swap the last $2$ matches in column $2$.\n\nConstraints\n\n- For $10\\%$ of the testdata, $1 \\leq n \\leq 10$.\n- For $30\\%$ of the testdata, $1 \\leq n \\leq 100$.\n- For $60\\%$ of the testdata, $1 \\leq n \\leq 10^3$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $0 \\leq a_i,b_i < 2^{31}$, and for any $1 \\le i < j \\le n$, $a_i \\neq a_j$, $b_i \\neq b_j$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 提高组] 火柴排队", "background": "NOIP2013 提高组 D1T2", "description": "涵涵有两盒火柴，每盒装有 $n$ 根火柴，每根火柴都有一个高度。 现在将每盒中的火柴各自排成一列， 同一列火柴的高度互不相同， 两列火柴之间的距离定义为：$ \\sum (a_i-b_i)^2$。\n\n其中 $a_i$ 表示第一列火柴中第 $i$ 个火柴的高度，$b_i$ 表示第二列火柴中第  $i$ 个火柴的高度。\n\n每列火柴中相邻两根火柴的位置都可以交换，请你通过交换使得两列火柴之间的距离最小。请问得到这个最小的距离，最少需要交换多少次？如果这个数字太大，请输出这个最小交换次数对 $10^8-3$ 取模的结果。\n", "inputFormat": "共三行，第一行包含一个整数 $n$，表示每盒中火柴的数目。\n\n第二行有 $n$ 个整数，每两个整数之间用一个空格隔开，表示第一列火柴的高度。\n\n第三行有 $n$ 个整数，每两个整数之间用一个空格隔开，表示第二列火柴的高度。\n", "outputFormat": "一个整数，表示最少交换次数对 $10^8-3$ 取模的结果。\n", "hint": "**输入输出样例说明一**\n\n最小距离是 $ 0$，最少需要交换 $1$ 次，比如：交换第 $1 $ 列的前 $ 2$ 根火柴或者交换第 $2$ 列的前 $2 $ 根火柴。\n\n**输入输出样例说明二**\n\n最小距离是 $10$，最少需要交换 $2$ 次，比如：交换第 $1$ 列的中间 $2$ 根火柴的位置，再交换第 $2$ 列中后 $2$ 根火柴的位置。\n\n**数据范围**\n\n对于 $10\\%$ 的数据， $1 \\leq n \\leq 10$；\n\n对于 $30\\%$ 的数据，$1 \\leq n \\leq 100$；\n\n对于 $60\\%$ 的数据，$1 \\leq n \\leq 10^3$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq a_i,b_i < 2^{31}$ 且对于任意 $1\\le i<j\\le n$，$a_i\\neq a_j$，$b_i\\neq b_j$。", "locale": "zh-CN"}}}
{"pid": "P1967", "type": "P", "difficulty": 5, "samples": [["4 3\n1 2 4\n2 3 3\n3 1 1\n3\n1 3\n1 4\n1 3", "3\n-1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "贪心", "2013", "倍增", "并查集", "Kruskal 重构树", "NOIP 提高组", "生成树", "最近公共祖先 LCA"], "title": "[NOIP 2013 提高组] 货车运输", "background": "NOIP2013 提高组 D1T3", "description": "A 国有 $n$ 座城市，编号从 $1$ 到 $n$，城市之间有 $m$ 条双向道路。每一条道路对车辆都有重量限制，简称限重。\n\n现在有 $q$ 辆货车在运输货物，司机们想知道每辆车在不超过车辆限重的情况下，最多能运多重的货物。", "inputFormat": "第一行有两个用一个空格隔开的整数 $n,m$，表示 A 国有 $n$ 座城市和 $m$ 条道路。  \n\n接下来 $m$ 行每行三个整数 $x, y, z$，每两个整数之间用一个空格隔开，表示从 $x$ 号城市到 $y$ 号城市有一条限重为 $z$ 的道路。    \n注意：$x \\neq y$，两座城市之间可能有多条道路。\n\n接下来一行有一个整数 $q$，表示有 $q$ 辆货车需要运货。\n\n接下来 $q$ 行，每行两个整数 $x,y$，之间用一个空格隔开，表示一辆货车需要从 $x$ 城市运输货物到 $y$ 城市，保证 $x \\neq y$。", "outputFormat": "共有 $q$ 行，每行一个整数，表示对于每一辆货车，它的最大载重是多少。  \n如果货车不能到达目的地，输出 $-1$。", "hint": "对于 $30\\%$ 的数据，$1 \\le n < 1000$，$1 \\le m < 10,000$，$1\\le q< 1000$；\n\n对于 $60\\%$ 的数据，$1 \\le n < 1000$，$1 \\le m < 5\\times 10^4$，$1 \\le q< 1000$；\n\n对于 $100\\%$ 的数据，$1 \\le n < 10^4$，$1 \\le m < 5\\times 10^4$，$1 \\le q< 3\\times 10^4 $，$0 \\le z \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Senior] Truck Transportation", "background": "NOIP 2013 Senior D1T3.", "description": "Country A has $n$ cities, numbered from $1$ to $n$, and there are $m$ bidirectional roads between the cities. Each road has a weight limit for vehicles, referred to as the load limit.\n\nThere are $q$ trucks transporting goods. The drivers want to know, without exceeding any road's weight limit, the maximum weight each truck can carry.", "inputFormat": "The first line contains two integers $n,m$ separated by a single space, indicating that Country A has $n$ cities and $m$ roads.\n\nEach of the next $m$ lines contains three integers $x, y, z$, separated by single spaces, indicating there is a road from city $x$ to city $y$ with weight limit $z$.  \nNote: $x \\neq y$, and there may be multiple roads between two cities.\n\nThe next line contains an integer $q$, meaning there are $q$ trucks that need to transport goods.\n\nThen follow $q$ lines, each containing two integers $x,y$ separated by a space, indicating a truck needs to transport goods from city $x$ to city $y$, with $x \\neq y$ guaranteed.", "outputFormat": "Output $q$ lines, each with an integer, indicating the maximum load for each truck.  \nIf a truck cannot reach the destination, output $-1$.", "hint": "For $30\\%$ of the testdata, $1 \\le n < 1000$, $1 \\le m < 10,000$, $1\\le q< 1000$.\n\nFor $60\\%$ of the testdata, $1 \\le n < 1000$, $1 \\le m < 5\\times 10^4$, $1 \\le q< 1000$.\n\nFor $100\\%$ of the testdata, $1 \\le n < 10^4$, $1 \\le m < 5\\times 10^4$, $1 \\le q< 3\\times 10^4 $, $0 \\le z \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 提高组] 货车运输", "background": "NOIP2013 提高组 D1T3", "description": "A 国有 $n$ 座城市，编号从 $1$ 到 $n$，城市之间有 $m$ 条双向道路。每一条道路对车辆都有重量限制，简称限重。\n\n现在有 $q$ 辆货车在运输货物，司机们想知道每辆车在不超过车辆限重的情况下，最多能运多重的货物。", "inputFormat": "第一行有两个用一个空格隔开的整数 $n,m$，表示 A 国有 $n$ 座城市和 $m$ 条道路。  \n\n接下来 $m$ 行每行三个整数 $x, y, z$，每两个整数之间用一个空格隔开，表示从 $x$ 号城市到 $y$ 号城市有一条限重为 $z$ 的道路。    \n注意：$x \\neq y$，两座城市之间可能有多条道路。\n\n接下来一行有一个整数 $q$，表示有 $q$ 辆货车需要运货。\n\n接下来 $q$ 行，每行两个整数 $x,y$，之间用一个空格隔开，表示一辆货车需要从 $x$ 城市运输货物到 $y$ 城市，保证 $x \\neq y$。", "outputFormat": "共有 $q$ 行，每行一个整数，表示对于每一辆货车，它的最大载重是多少。  \n如果货车不能到达目的地，输出 $-1$。", "hint": "对于 $30\\%$ 的数据，$1 \\le n < 1000$，$1 \\le m < 10,000$，$1\\le q< 1000$；\n\n对于 $60\\%$ 的数据，$1 \\le n < 1000$，$1 \\le m < 5\\times 10^4$，$1 \\le q< 1000$；\n\n对于 $100\\%$ 的数据，$1 \\le n < 10^4$，$1 \\le m < 5\\times 10^4$，$1 \\le q< 3\\times 10^4 $，$0 \\le z \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1968", "type": "P", "difficulty": 2, "samples": [["5\n400\n300\n500\n300\n250", "266.67"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "Special Judge"], "title": "美元汇率", "background": "此处省略 `MAX_INT+1` 个数。", "description": "在以后的若干天里戴维将学习美元与德国马克的汇率。编写程序帮助戴维何时应买或卖马克或美元，使他从 $100$ 美元开始，最后能获得最高可能的价值。\n", "inputFormat": "输入文件的第一行是一个自然数 $N$，$1≤N≤100$，表示戴维学习汇率的天数。\n\n接下来的 $N$ 行中每行是一个自然数 $A$，$1≤A≤1000$。第 $i+1$ 行的 $A$ 表示预先知道的第 $i+1$ 天的平均汇率，在这一天中，戴维既能用 $100$ 美元买 $A$ 马克也能用 $A$ 马克购买 $100$ 美元。\n", "outputFormat": "输出文件的第一行也是唯一的一行应输出要求的钱数（单位为美元，保留两位小数）。\n\n注意：考虑到实数算术运算中进位的误差，结果在正确结果 $0.05$ 美元范围内的被认为是正确的，戴维必须在最后一天结束之前将他的钱都换成美元。\n", "hint": "**样例解释**\n\n```cpp\nDay 1 ... changing 100.0000 美元= 400.0000 马克\nDay 2 ... changing 400.0000 马克= 133.3333 美元\nDay 3 ... changing 133.3333 美元= 666.6666 马克\nDay 5 ... changing 666.6666 马克= 266.6666 美元\n```\n\nupdate on 2017/08/18：\n\n1. 样例正确答案为 $266.67$\n\n2. 已经把测试点 $1$ 改成样例。\n\n3. SPJ 原先误差是 $0.01$，按照题目要求，重新改为 $0.05$。", "locale": "zh-CN", "translations": {"en": {"title": "USD Exchange Rate", "background": "", "description": "In the coming days, David will study the exchange rate between the US dollar and the Deutsche Mark. Write a program to help David decide when he should buy or sell marks or dollars so that, starting from $100$ dollars, he can end up with the highest possible value.", "inputFormat": "The first line of the input file contains a natural number $N$, $1 \\le N \\le 100$, which is the number of days David studies the exchange rate.\n\nEach of the next $N$ lines contains a natural number $A$, $1 \\le A \\le 1000$. The $A$ on line $i+1$ gives the known average exchange rate for day $i+1$: on that day, David can use $100$ dollars to buy $A$ marks, and he can also use $A$ marks to buy $100$ dollars.", "outputFormat": "Output a single line with the required amount of money (in dollars), rounded to two decimal places.\n\nNote: Considering rounding errors in real-number arithmetic, any result within $0.05$ dollars of the correct answer is accepted. David must convert all his money back to dollars before the end of the last day.", "hint": "**Sample explanation**\n\n```cpp\nDay 1 ... changing 100.0000 USD= 400.0000 Mark\nDay 2 ... changing 400.0000 Mark= 133.3333 USD\nDay 3 ... changing 133.3333 USD= 666.6666 Mark\nDay 5 ... changing 666.6666 Mark= 266.6666 USD\n```\n\nUpdated on 2017/08/18:\n\n1. The correct answer to the sample is $266.67$.\n2. Test point $1$ has been replaced by the sample.\n3. The SPJ's tolerance used to be $0.01$; according to the statement, it has been changed to $0.05$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "美元汇率", "background": "此处省略 `MAX_INT+1` 个数。", "description": "在以后的若干天里戴维将学习美元与德国马克的汇率。编写程序帮助戴维何时应买或卖马克或美元，使他从 $100$ 美元开始，最后能获得最高可能的价值。\n", "inputFormat": "输入文件的第一行是一个自然数 $N$，$1≤N≤100$，表示戴维学习汇率的天数。\n\n接下来的 $N$ 行中每行是一个自然数 $A$，$1≤A≤1000$。第 $i+1$ 行的 $A$ 表示预先知道的第 $i+1$ 天的平均汇率，在这一天中，戴维既能用 $100$ 美元买 $A$ 马克也能用 $A$ 马克购买 $100$ 美元。\n", "outputFormat": "输出文件的第一行也是唯一的一行应输出要求的钱数（单位为美元，保留两位小数）。\n\n注意：考虑到实数算术运算中进位的误差，结果在正确结果 $0.05$ 美元范围内的被认为是正确的，戴维必须在最后一天结束之前将他的钱都换成美元。\n", "hint": "**样例解释**\n\n```cpp\nDay 1 ... changing 100.0000 美元= 400.0000 马克\nDay 2 ... changing 400.0000 马克= 133.3333 美元\nDay 3 ... changing 133.3333 美元= 666.6666 马克\nDay 5 ... changing 666.6666 马克= 266.6666 美元\n```\n\nupdate on 2017/08/18：\n\n1. 样例正确答案为 $266.67$\n\n2. 已经把测试点 $1$ 改成样例。\n\n3. SPJ 原先误差是 $0.01$，按照题目要求，重新改为 $0.05$。", "locale": "zh-CN"}}}
{"pid": "P1969", "type": "P", "difficulty": 3, "samples": [["5\n2 3 4 1 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "2013", "递归", "NOIP 提高组"], "title": "[NOIP 2013 提高组] 积木大赛", "background": "NOIP2013 提高组 D2T1", "description": "春春幼儿园举办了一年一度的“积木大赛”。今年比赛的内容是搭建一座宽度为 $n$ 的大厦，大厦可以看成由 $n$ 块宽度为 $1$ 的积木组成，第 $i$ 块积木的最终高度需要是 $h_i$。\n\n在搭建开始之前，没有任何积木（可以看成 $n$ 块高度为 $0$ 的积木）。接下来每次操作，小朋友们可以选择一段连续区间 $[l, r]$，然后将第 $L$ 块到第 $R$ 块之间（含第 $L$ 块和第 $R$ 块）所有积木的高度分别增加 $1$。\n\n小 M 是个聪明的小朋友，她很快想出了建造大厦的最佳策略，使得建造所需的操作次数最少。但她不是一个勤于动手的孩子，所以想请你帮忙实现这个策略，并求出最少的操作次数。\n", "inputFormat": "包含两行，第一行包含一个整数 $n$，表示大厦的宽度。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数为 $h_i$。\n", "outputFormat": "建造所需的最少操作数。\n", "hint": "**样例解释**\n\n其中一种可行的最佳方案，依次选择：$[1,5]$，$ [1,3]$，$[2,3]$，$[3,3]$，$ [5,5]$。\n\n**数据范围**\n\n- 对于 $30\\%$ 的数据，有 $1 \\leq n \\leq 10$；\n- 对于 $70\\%$ 的数据，有 $1 \\leq n \\leq 1000$；\n- 对于 $100\\%$ 的数据，有 $1 \\leq n \\leq 100000$，$0 \\leq h_i \\leq 10000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Senior] Building Blocks Contest", "background": "NOIP 2013 Senior D2T1.", "description": "Chun-Chun Kindergarten is holding its annual \"Building Blocks Contest.\" This year, the task is to construct a building of width $n$, which can be regarded as composed of $n$ blocks each of width $1$. The final height of the $i$-th block should be $h_i$.\n\nBefore construction starts, there are no blocks (equivalently, there are $n$ blocks of height $0$). In each operation, the children may choose a continuous interval $[L, R]$, and then increase by $1$ the height of every block from the $L$-th to the $R$-th (inclusive).\n\nXiao M is a clever child and quickly figured out an optimal strategy that minimizes the number of operations. However, she is not keen on doing it herself, so she asks you to implement this strategy and compute the minimum number of operations.", "inputFormat": "There are two lines. The first line contains an integer $n$, the width of the building.  \nThe second line contains $n$ integers, where the $i$-th integer is $h_i$.", "outputFormat": "Output the minimum number of operations required to complete the construction.", "hint": "Sample explanation:  \nOne optimal sequence is to choose: $[1, 5]$, $[1, 3]$, $[2, 3]$, $[3, 3]$, $[5, 5]$.\n\nConstraints:\n- For $30\\%$ of the testdata, $1 \\leq n \\leq 10$.\n- For $70\\%$ of the testdata, $1 \\leq n \\leq 1000$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 100000$, $0 \\leq h_i \\leq 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 提高组] 积木大赛", "background": "NOIP2013 提高组 D2T1", "description": "春春幼儿园举办了一年一度的“积木大赛”。今年比赛的内容是搭建一座宽度为 $n$ 的大厦，大厦可以看成由 $n$ 块宽度为 $1$ 的积木组成，第 $i$ 块积木的最终高度需要是 $h_i$。\n\n在搭建开始之前，没有任何积木（可以看成 $n$ 块高度为 $0$ 的积木）。接下来每次操作，小朋友们可以选择一段连续区间 $[l, r]$，然后将第 $L$ 块到第 $R$ 块之间（含第 $L$ 块和第 $R$ 块）所有积木的高度分别增加 $1$。\n\n小 M 是个聪明的小朋友，她很快想出了建造大厦的最佳策略，使得建造所需的操作次数最少。但她不是一个勤于动手的孩子，所以想请你帮忙实现这个策略，并求出最少的操作次数。\n", "inputFormat": "包含两行，第一行包含一个整数 $n$，表示大厦的宽度。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数为 $h_i$。\n", "outputFormat": "建造所需的最少操作数。\n", "hint": "**样例解释**\n\n其中一种可行的最佳方案，依次选择：$[1,5]$，$ [1,3]$，$[2,3]$，$[3,3]$，$ [5,5]$。\n\n**数据范围**\n\n- 对于 $30\\%$ 的数据，有 $1 \\leq n \\leq 10$；\n- 对于 $70\\%$ 的数据，有 $1 \\leq n \\leq 1000$；\n- 对于 $100\\%$ 的数据，有 $1 \\leq n \\leq 100000$，$0 \\leq h_i \\leq 10000$。\n", "locale": "zh-CN"}}}
{"pid": "P1970", "type": "P", "difficulty": 3, "samples": [["5\n5 3 2 1 2\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2013", "NOIP 提高组"], "title": "[NOIP 2013 提高组] 花匠", "background": "NOIP2013 提高组 D2T2", "description": "花匠栋栋种了一排花，每株花都有自己的高度。花儿越长越大，也越来越挤。栋栋决定把这排中的一部分花移走，将剩下的留在原地，使得剩下的花能有空间长大，同时，栋栋希望剩下的花排列得比较别致。\n\n具体而言，栋栋的花的高度可以看成一列整数 $h_1,h_2,\\ldots,h_n$。设当一部分花被移走后，剩下的花的高度依次为 $g_1,g_2,\\ldots,g_m$，则栋栋希望下面两个条件中至少有一个满足：\n\n条件 A：对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} > g_{2 i - 1}$，同时对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} > g_{2 i + 1}$；  \n条件 B：对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} < g_{2 i - 1}$，同时对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} < g_{2 i + 1}$。\n\n注意上面两个条件在 $m = 1$ 时同时满足，当 $m > 1 $ 时最多有一个能满足。\n\n请问，栋栋最多能将多少株花留在原地。\n", "inputFormat": "第一行包含一个整数 $n$，表示开始时花的株数。\n\n第二行包含 $n$ 个整数，依次为 $h_1,h_2,\\ldots,h_n$，表示每株花的高度。\n", "outputFormat": "输出一行，包含一个整数，表示最多能留在原地的花的株数。", "hint": "**输入输出样例说明**\n\n有多种方法可以正好保留 $3$ 株花，例如，留下第 $1$、$4$、$5$ 株，高度分别为 $5$、$1$、$2$，满足条件 B。\n\n**数据范围**\n\n对于 $20\\%$的数据，$n \\le 10$；\n\n对于 $30\\%$的数据，$n \\le 25$；\n\n对于 $70\\%$的数据，$n \\le 1000$，$0 \\le h_i \\le 1000$；\n\n对于 $100\\%$的数据，$1 \\le n \\le {10}^5$，$0 \\le h_i \\le {10}^6$，所有的 $h_i$ 随机生成，所有随机数服从某区间内的均匀分布。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Senior] Florist", "background": "NOIP 2013 Senior D2T2.", "description": "Dongdong the florist planted a row of flowers, each with its own height. As the flowers grow taller, the row becomes crowded. Dongdong decides to remove some of the flowers and leave the rest in place so that the remaining flowers have room to grow. At the same time, he hopes the remaining flowers form a stylish pattern.\n\nSpecifically, the heights of Dongdong’s flowers can be seen as a sequence of integers $h_1,h_2,\\ldots,h_n$. Suppose that after removing some flowers, the heights of the remaining flowers in order are $g_1,g_2,\\ldots,g_m$. Dongdong wants at least one of the following two conditions to hold:\n\nCondition A: For all $1 \\le i \\le \\frac{m}{2}$, $g_{2 i} > g_{2 i - 1}$, and for all $1 \\le i \\le \\frac{m}{2}$, $g_{2 i} > g_{2 i + 1}$;  \nCondition B: For all $1 \\le i \\le \\frac{m}{2}$, $g_{2 i} < g_{2 i - 1}$, and for all $1 \\le i \\le \\frac{m}{2}$, $g_{2 i} < g_{2 i + 1}$.\n\nNote that when $m = 1$, both conditions are satisfied; when $m > 1$, at most one of them can be satisfied.\n\nWhat is the maximum number of flowers that Dongdong can leave in place?", "inputFormat": "The first line contains an integer $n$, the number of flowers initially.\n\nThe second line contains $n$ integers $h_1,h_2,\\ldots,h_n$, the heights of the flowers.", "outputFormat": "Output a single line containing an integer, the maximum number of flowers that can be left in place.", "hint": "Explanation of the sample input and output:\n\nThere are multiple ways to keep exactly $3$ flowers. For example, keep the $1$st, $4$th, and $5$th flowers, with heights $5$, $1$, $2$, which satisfies Condition B.\n\nConstraints\n\n对于 $20\\%$ 的数据，$n \\le 10$；  \n对于 $30\\%$ 的数据，$n \\le 25$；  \n对于 $70\\%$ 的数据，$n \\le 1000$，$0 \\le h_i \\le 1000$；  \n对于 $100\\%$ 的数据，$1 \\le n \\le {10}^5$，$0 \\le h_i \\le {10}^6$，所有的 $h_i$ 随机生成，所有随机数服从某区间内的均匀分布。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 提高组] 花匠", "background": "NOIP2013 提高组 D2T2", "description": "花匠栋栋种了一排花，每株花都有自己的高度。花儿越长越大，也越来越挤。栋栋决定把这排中的一部分花移走，将剩下的留在原地，使得剩下的花能有空间长大，同时，栋栋希望剩下的花排列得比较别致。\n\n具体而言，栋栋的花的高度可以看成一列整数 $h_1,h_2,\\ldots,h_n$。设当一部分花被移走后，剩下的花的高度依次为 $g_1,g_2,\\ldots,g_m$，则栋栋希望下面两个条件中至少有一个满足：\n\n条件 A：对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} > g_{2 i - 1}$，同时对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} > g_{2 i + 1}$；  \n条件 B：对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} < g_{2 i - 1}$，同时对于所有的 $1 \\le i \\le \\frac{m}{2}$，有 $g_{2 i} < g_{2 i + 1}$。\n\n注意上面两个条件在 $m = 1$ 时同时满足，当 $m > 1 $ 时最多有一个能满足。\n\n请问，栋栋最多能将多少株花留在原地。\n", "inputFormat": "第一行包含一个整数 $n$，表示开始时花的株数。\n\n第二行包含 $n$ 个整数，依次为 $h_1,h_2,\\ldots,h_n$，表示每株花的高度。\n", "outputFormat": "输出一行，包含一个整数，表示最多能留在原地的花的株数。", "hint": "**输入输出样例说明**\n\n有多种方法可以正好保留 $3$ 株花，例如，留下第 $1$、$4$、$5$ 株，高度分别为 $5$、$1$、$2$，满足条件 B。\n\n**数据范围**\n\n对于 $20\\%$的数据，$n \\le 10$；\n\n对于 $30\\%$的数据，$n \\le 25$；\n\n对于 $70\\%$的数据，$n \\le 1000$，$0 \\le h_i \\le 1000$；\n\n对于 $100\\%$的数据，$1 \\le n \\le {10}^5$，$0 \\le h_i \\le {10}^6$，所有的 $h_i$ 随机生成，所有随机数服从某区间内的均匀分布。\n", "locale": "zh-CN"}}}
{"pid": "P1971", "type": "P", "difficulty": 7, "samples": [["1 6 \nXO.OXO \n1 \n1 2 \n1 1 ", "1\n1"], ["3 3 \nXOX \nO.O \nXOX \n4 \n2 3 \n1 3 \n1 2 \n1 1 \n2 1 \n3 1 \n3 2 \n3 3 ", "0"], ["4 4 \nOOXX \nOXXO \nOO.O \nXXXO \n2 \n3 2 \n2 2 \n1 2 \n1 3 ", "2\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "NOI", "深度优先搜索 DFS", "二分图"], "title": "[NOI2011] 兔兔与蛋蛋游戏", "background": "", "description": "这些天，兔兔和蛋蛋喜欢上了一种新的棋类游戏。\n\n这个游戏是在一个 $n$ 行 $m$ 列的棋盘上进行的。游戏开始之前，棋盘上有一个格子是空的，其它的格子中都放置了一枚棋子，棋子或者是黑色，或者是白色。\n\n每一局游戏总是兔兔先操作，之后双方轮流操作，具体操作为：\n\n* 兔兔每次操作时，选择一枚与空格相邻的白色棋子，将它移进空格。\n* 蛋蛋每次操作时，选择一枚与空格相邻的黑色棋子，将它移进空格。\n\n第一个不能按照规则操作的人输掉游戏。为了描述方便，下面将操作“将第x行第y列中的棋子移进空格中”记为 $M(x,y)$。\n\n例如下面是三个游戏的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6wfmhuf2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j7vox6n7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/er1t5wpb.png)\n\n最近兔兔总是输掉游戏，而且蛋蛋格外嚣张，于是兔兔想请她的好朋友——你——来帮助她。她带来了一局输给蛋蛋的游戏的实录，请你指出这一局游戏中所有她“犯错误”的地方。\n\n注意：\n\n* 两个格子相邻当且仅当它们有一条公共边。\n* 兔兔的操作是“犯错误”的，当且仅当，在这次操作前兔兔有必胜策略，而这次操作后蛋蛋有必胜策略。\n", "inputFormat": "输入的第一行包含两个正整数 $n,m$。\n\n接下来 $n$ 行描述初始棋盘。其中第 $i$ 行包含 $m$ 个字符，每个字符都是大写英文字母 `X`、大写英文字母 `O` 或点号 `.` 之一，分别表示对应的棋盘格中有黑色棋子、有白色棋子和没有棋子。其中点号 `.` 恰好出现一次。\n\n接下来一行包含一个整数 $k$（$1\\leq k\\leq 1000$） ，表示兔兔和蛋蛋各进行了 $k$ 次操作。\n\n接下来 $2k$ 行描述一局游戏的过程。其中第 $2i - 1$ 行是兔兔的第 $i$ 次操作（编号为 $i$ 的操作） ，第 $2i$ 行是蛋蛋的第 $i$ 次操作。每个操作使用两个整数 $x,y$ 来描述，表示将第 $x$ 行第 $y$ 列中的棋子移进空格中。\n\n输入保证整个棋盘中只有一个格子没有棋子， 游戏过程中兔兔和蛋蛋的每个操作都是合法的，且最后蛋蛋获胜。\n", "outputFormat": "输出文件的第一行包含一个整数 $r$，表示兔兔犯错误的总次数。\n\n接下来 $r$ 行按递增的顺序给出兔兔“犯错误”的操作编号。其中第 $i$ 行包含一个整数 $a_i$ 表示兔兔第 $i$ 个犯错误的操作是他在游戏中的第 $a_i$ 次操作。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 40$，$1 \\leq m\\leq 40$，$1\\leq k\\leq 1000$。\n\n\n::cute-table{tuack}\n\n|测试点编号|$n$|$m$|\n|:-:|:-:|:-:|\n|$1,2$|$n=1$|$1\\leq m\\leq 20$|\n|$3$|$n=3$|$m=4$|\n|$4,5$|$n=4$|$m=4$|\n|$6,7$|$n=4$|$m=5$|\n|$8$|$n=3$|$m=7$|\n|$9\\sim 14$|$n=2$|$1\\leq m\\leq 40$|\n|$15,16$|$1\\leq n\\leq 16$|$1\\leq m\\leq 16$|\n|$17\\sim 20$|$1\\leq n\\leq 40$|$1\\leq m\\leq 40$|\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2011] Tutu and Dandan's Game", "background": "", "description": "These days, Tutu and Dandan have taken a liking to a new board game.\n\nThe game is played on an $n$-by-$m$ board. Before the game starts, exactly one cell on the board is empty, and every other cell contains a piece that is either black or white.\n\nIn each game, Tutu always moves first, and then the two players alternate. The moves are defined as follows:\n- On Tutu’s turn, she chooses a white piece adjacent to the empty cell and moves it into the empty cell.\n- On Dandan’s turn, he chooses a black piece adjacent to the empty cell and moves it into the empty cell.\n\nThe first player who cannot move according to the rules loses the game. For convenience, the operation “move the piece in row $x$, column $y$ into the empty cell” is denoted by $M(x,y)$.\n\nFor example, here are three sample games.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6wfmhuf2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j7vox6n7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/er1t5wpb.png)\n\nRecently Tutu keeps losing, and Dandan is especially smug about it, so Tutu asks her good friend—you—for help. She brings you the full move log of a game she lost to Dandan. Please point out every move where she “made a mistake” in that game.\n\nNote:\n- Two cells are adjacent if and only if they share a common side.\n- Tutu’s move is a “mistake” if and only if, before the move Tutu had a winning strategy, and after the move Dandan has a winning strategy.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThe next $n$ lines describe the initial board. The $i$-th of these lines contains $m$ characters. Each character is one of the uppercase letters `X`, `O`, or the dot `.`. They denote a black piece, a white piece, and an empty cell, respectively. The dot `.` appears exactly once.\n\nThe next line contains an integer $k$ ($1 \\leq k \\leq 1000$), indicating that Tutu and Dandan each made $k$ moves.\n\nThe next $2k$ lines describe the game. The $(2i - 1)$-th line is Tutu’s $i$-th move (the move with index $i$), and the $2i$-th line is Dandan’s $i$-th move. Each move is described by two integers $x, y$, meaning the piece at row $x$, column $y$ is moved into the empty cell.\n\nThe input guarantees that there is exactly one empty cell on the board; every move made by Tutu and Dandan is legal; and Dandan wins in the end.", "outputFormat": "The first line contains an integer $r$, the total number of mistakes made by Tutu.\n\nThen output $r$ lines in increasing order, giving the indices of Tutu’s “mistaken” moves. The $i$-th of these lines contains an integer $a_i$, meaning that Tutu’s $i$-th mistake is her $a_i$-th move in the game.", "hint": "For $100\\%$ of the testdata, $1 \\leq n \\leq 40$, $1 \\leq m \\leq 40$, $1 \\leq k \\leq 1000$.\n\n::cute-table{tuack}\n\n| Test point ID | $n$ | $m$ |\n|:-:|:-:|:-:|\n| $1,2$ | $n=1$ | $1\\leq m\\leq 20$ |\n| $3$ | $n=3$ | $m=4$ |\n| $4,5$ | $n=4$ | $m=4$ |\n| $6,7$ | $n=4$ | $m=5$ |\n| $8$ | $n=3$ | $m=7$ |\n| $9\\sim 14$ | $n=2$ | $1\\leq m\\leq 40$ |\n| $15,16$ | $1\\leq n\\leq 16$ | $1\\leq m\\leq 16$ |\n| $17\\sim 20$ | $1\\leq n\\leq 40$ | $1\\leq m\\leq 40$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2011] 兔兔与蛋蛋游戏", "background": "", "description": "这些天，兔兔和蛋蛋喜欢上了一种新的棋类游戏。\n\n这个游戏是在一个 $n$ 行 $m$ 列的棋盘上进行的。游戏开始之前，棋盘上有一个格子是空的，其它的格子中都放置了一枚棋子，棋子或者是黑色，或者是白色。\n\n每一局游戏总是兔兔先操作，之后双方轮流操作，具体操作为：\n\n* 兔兔每次操作时，选择一枚与空格相邻的白色棋子，将它移进空格。\n* 蛋蛋每次操作时，选择一枚与空格相邻的黑色棋子，将它移进空格。\n\n第一个不能按照规则操作的人输掉游戏。为了描述方便，下面将操作“将第x行第y列中的棋子移进空格中”记为 $M(x,y)$。\n\n例如下面是三个游戏的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6wfmhuf2.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j7vox6n7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/er1t5wpb.png)\n\n最近兔兔总是输掉游戏，而且蛋蛋格外嚣张，于是兔兔想请她的好朋友——你——来帮助她。她带来了一局输给蛋蛋的游戏的实录，请你指出这一局游戏中所有她“犯错误”的地方。\n\n注意：\n\n* 两个格子相邻当且仅当它们有一条公共边。\n* 兔兔的操作是“犯错误”的，当且仅当，在这次操作前兔兔有必胜策略，而这次操作后蛋蛋有必胜策略。\n", "inputFormat": "输入的第一行包含两个正整数 $n,m$。\n\n接下来 $n$ 行描述初始棋盘。其中第 $i$ 行包含 $m$ 个字符，每个字符都是大写英文字母 `X`、大写英文字母 `O` 或点号 `.` 之一，分别表示对应的棋盘格中有黑色棋子、有白色棋子和没有棋子。其中点号 `.` 恰好出现一次。\n\n接下来一行包含一个整数 $k$（$1\\leq k\\leq 1000$） ，表示兔兔和蛋蛋各进行了 $k$ 次操作。\n\n接下来 $2k$ 行描述一局游戏的过程。其中第 $2i - 1$ 行是兔兔的第 $i$ 次操作（编号为 $i$ 的操作） ，第 $2i$ 行是蛋蛋的第 $i$ 次操作。每个操作使用两个整数 $x,y$ 来描述，表示将第 $x$ 行第 $y$ 列中的棋子移进空格中。\n\n输入保证整个棋盘中只有一个格子没有棋子， 游戏过程中兔兔和蛋蛋的每个操作都是合法的，且最后蛋蛋获胜。\n", "outputFormat": "输出文件的第一行包含一个整数 $r$，表示兔兔犯错误的总次数。\n\n接下来 $r$ 行按递增的顺序给出兔兔“犯错误”的操作编号。其中第 $i$ 行包含一个整数 $a_i$ 表示兔兔第 $i$ 个犯错误的操作是他在游戏中的第 $a_i$ 次操作。\n\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 40$，$1 \\leq m\\leq 40$，$1\\leq k\\leq 1000$。\n\n\n::cute-table{tuack}\n\n|测试点编号|$n$|$m$|\n|:-:|:-:|:-:|\n|$1,2$|$n=1$|$1\\leq m\\leq 20$|\n|$3$|$n=3$|$m=4$|\n|$4,5$|$n=4$|$m=4$|\n|$6,7$|$n=4$|$m=5$|\n|$8$|$n=3$|$m=7$|\n|$9\\sim 14$|$n=2$|$1\\leq m\\leq 40$|\n|$15,16$|$1\\leq n\\leq 16$|$1\\leq m\\leq 16$|\n|$17\\sim 20$|$1\\leq n\\leq 40$|$1\\leq m\\leq 40$|\n", "locale": "zh-CN"}}}
{"pid": "P1972", "type": "P", "difficulty": 5, "samples": [["6\n1 2 3 4 3 5\n3\n1 2\n3 5\n2 6\n", "2\n2\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2009", "各省省选", "树状数组", "山东", "O2优化", "可持久化线段树", "前缀和", "离线处理"], "title": "[SDOI2009] HH 的项链", "background": null, "description": "HH 有一串由各种漂亮的贝壳组成的项链。HH 相信不同的贝壳会带来好运，所以每次散步完后，他都会随意取出一段贝壳，思考它们所表达的含义。HH 不断地收集新的贝壳，因此，他的项链变得越来越长。  \n\n有一天，他突然提出了一个问题：某一段贝壳中，包含了多少种不同的贝壳？这个问题很难回答……因为项链实在是太长了。于是，他只好求助睿智的你，来解决这个问题。", "inputFormat": "第一行一个正整数 $n$，表示项链长度。   \n第二行 $n$ 个正整数 $a_i$，表示项链中第 $i$ 个贝壳的种类。\n\n第三行一个整数 $m$，表示 HH 询问的个数。   \n接下来 $m$ 行，每行两个整数 $l,r$，表示询问的区间。", "outputFormat": "输出 $m$ 行，每行一个整数，依次表示询问对应的答案。", "hint": "【数据范围】  \n\n对于 $20\\%$ 的数据，$1\\le n,m\\leq 5000$；   \n对于 $40\\%$ 的数据，$1\\le n,m\\leq 10^5$；   \n对于 $60\\%$ 的数据，$1\\le n,m\\leq 5\\times 10^5$；  \n对于 $100\\%$ 的数据，$1\\le n,m,a_i \\leq 10^6$，$1\\le l \\le r \\le n$。\n\n本题可能需要较快的读入方式，最大数据点读入数据约 20MB。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] HH's Necklace", "background": "", "description": "HH has a necklace made of various beautiful shells. HH believes different shells bring good luck, so after each walk, he randomly picks a segment of shells and thinks about the meaning they convey. HH keeps collecting new shells, so his necklace becomes longer and longer.  \n\nOne day, he suddenly asked: in a given segment of shells, how many different types of shells are there? This is hard to answer because the necklace is very long. So he turns to you for help to solve this problem.", "inputFormat": "One line with a positive integer $n$, the length of the necklace.  \nThe second line contains $n$ positive integers $a_i$, where $a_i$ denotes the type of the $i$-th shell in the necklace.  \nThe third line contains an integer $m$, the number of queries by HH.  \nThen $m$ lines follow, each containing two integers $l, r$, denoting the query interval.", "outputFormat": "Output $m$ lines, each with a single integer, in order, representing the answer to the corresponding query.", "hint": "Constraints  \nFor $20\\%$ of the testdata, $1 \\le n, m \\leq 5000$.  \nFor $40\\%$ of the testdata, $1 \\le n, m \\leq 10^5$.  \nFor $60\\%$ of the testdata, $1 \\le n, m \\leq 5\\times 10^5$.  \nFor $100\\%$ of the testdata, $1 \\le n, m, a_i \\leq 10^6$, $1 \\le l \\le r \\le n$.  \nThis problem may require fast input. For the largest testdata, the input size is about 20 MB.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] HH 的项链", "background": null, "description": "HH 有一串由各种漂亮的贝壳组成的项链。HH 相信不同的贝壳会带来好运，所以每次散步完后，他都会随意取出一段贝壳，思考它们所表达的含义。HH 不断地收集新的贝壳，因此，他的项链变得越来越长。  \n\n有一天，他突然提出了一个问题：某一段贝壳中，包含了多少种不同的贝壳？这个问题很难回答……因为项链实在是太长了。于是，他只好求助睿智的你，来解决这个问题。", "inputFormat": "第一行一个正整数 $n$，表示项链长度。   \n第二行 $n$ 个正整数 $a_i$，表示项链中第 $i$ 个贝壳的种类。\n\n第三行一个整数 $m$，表示 HH 询问的个数。   \n接下来 $m$ 行，每行两个整数 $l,r$，表示询问的区间。", "outputFormat": "输出 $m$ 行，每行一个整数，依次表示询问对应的答案。", "hint": "【数据范围】  \n\n对于 $20\\%$ 的数据，$1\\le n,m\\leq 5000$；   \n对于 $40\\%$ 的数据，$1\\le n,m\\leq 10^5$；   \n对于 $60\\%$ 的数据，$1\\le n,m\\leq 5\\times 10^5$；  \n对于 $100\\%$ 的数据，$1\\le n,m,a_i \\leq 10^6$，$1\\le l \\le r \\le n$。\n\n本题可能需要较快的读入方式，最大数据点读入数据约 20MB。", "locale": "zh-CN"}}}
{"pid": "P1973", "type": "P", "difficulty": 6, "samples": [["5 \n8 2 \n1 5 \n5 3 \n3 2 \n5 3 ", "2 \n2 \n1 \n2 \n2 \n2 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2011", "NOI", "Special Judge", "双指针 two-pointer"], "title": "[NOI2011] NOI 嘉年华", "background": "", "description": "NOI2011 在吉林大学开始啦！为了迎接来自全国各地最优秀的信息学选手，吉林大学决定举办两场盛大的 NOI 嘉年华活动，分在两个不同的地点举办。每个嘉年华可能包含很多个活动，而每个活动只能在一个嘉年华中举办。\n\n现在嘉年华活动的组织者小安一共收到了 $n$ 个活动的举办申请，其中第 $i$ 个活动的起始时间为 $S_i$，活动的持续时间为 $T_i$。这些活动都可以安排到任意一个嘉年华的会场，也可以不安排。\n\n小安通过广泛的调查发现，如果某个时刻，两个嘉年华会场同时有活动在进行（不包括活动的开始瞬间和结束瞬间），那么有的选手就会纠结于到底去哪个会场，从而变得不开心。所以，为了避免这样不开心的事情发生，小安要求不能有两个活动在两个会场同时进行（同一会场内的活动可以任意进行）。\n\n另外，可以想象，如果某一个嘉年华会场的活动太少，那么这个嘉年华的吸引力就会不足，容易导致场面冷清。所以小安希望通过合理的安排，使得活动相对较少的嘉年华的活动数量最大。\n\n此外，有一些活动非常有意义，小安希望能举办，他希望知道，如果第 $i$ 个活动必须举办（可以安排在两场嘉年华中的任何一个），活动相对较少的嘉年华的活动数量的最大值。\n", "inputFormat": "输入的第一行包含一个整数 $n$，表示申请的活动个数。\n\n接下来 $n$ 行描述所有活动，其中第 $i$ 行包含两个整数 $S_i,T_i$，表示第 $i$ 个活动从时刻 $S_i$ 开始，持续 $T_i$ 的时间。\n", "outputFormat": "输出的第一行包含一个整数，表示在没有任何限制的情况下，活动较少的嘉年华的活动数的最大值。\n\n接下来 $n$ 行每行一个整数，其中第 $i$ 行的整数表示在必须选择第 $i$ 个活动的前提下，活动较少的嘉年华的活动数的最大值。\n", "hint": "### 样例解释\n\n在没有任何限制的情况下，最优安排可以在一个嘉年华安排活动 $1, 4$，而在另一个嘉年华安排活动 $3, 5$，活动 $2$ 不安排。\n\n对于 $10\\%$ 的数据，$1\\leq n\\leq 10$。\n\n对于 $30\\%$ 的数据，$1\\leq n\\leq 40$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 200$，$0\\leq S_i\\leq 10^9$，$1\\leq T_i\\leq 10^9$。\n\n如果输出格式不正确（比如输出不足 $n+1$ 行），得 $0$ 分；\n\n如果输出文件第一行不正确，而且后 $n$ 行至少有一行不正确，得 $0$ 分；\n\n如果输出文件第一行正确，但后 $n$ 行至少有一行不正确，得 $4$ 分；\n\n如果输出文件第一行不正确，但后 $n$ 行均正确，得 $6$ 分；\n\n如果输出文件中的 $n+1$ 行均正确，得 $10$ 分。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2011] NOI Carnival", "background": "", "description": "NOI 2011 has started at Jilin University! To welcome the best informatics contestants from across the country, Jilin University plans to hold two grand NOI Carnival events at two different locations. Each carnival may contain many activities, and each activity can be held in only one carnival.\n\nThe organizer, Xiao An, has received $n$ applications for activities. The $i$-th activity starts at time $S_i$ and lasts for $T_i$ time. These activities can be scheduled in either carnival, or not scheduled at all.\n\nThrough extensive surveys, Xiao An found that if, at some moment, the two carnivals have activities running simultaneously (not counting the exact start and end instants), some contestants will hesitate about which carnival to go to and become unhappy. Therefore, to avoid this, Xiao An requires that there must not be two activities running at the same time in the two different carnivals (activities within the same carnival may overlap arbitrarily).\n\nIn addition, if one carnival has too few activities, its appeal will be insufficient and the scene may become dull. So Xiao An wants to arrange the schedule to maximize the number of activities in the less-populated carnival.\n\nFurthermore, some activities are very meaningful and Xiao An hopes to hold them. He wants to know, if the $i$-th activity must be held (it can be scheduled in either of the two carnivals), what is the maximum number of activities in the less-populated carnival.", "inputFormat": "The first line contains an integer $n$, the number of activity applications.\n\nThe next $n$ lines describe all activities. The $i$-th line contains two integers $S_i, T_i$, meaning the $i$-th activity starts at time $S_i$ and lasts for $T_i$ time.", "outputFormat": "The first line contains an integer, the maximum number of activities in the less-populated carnival when there are no additional constraints.\n\nThen output $n$ lines, one integer per line. The integer on the $i$-th line is the maximum number of activities in the less-populated carnival under the condition that the $i$-th activity must be chosen.", "hint": "### Sample Explanation\n\nWithout any additional constraints, an optimal arrangement is to schedule activities $1, 4$ in one carnival and activities $3, 5$ in the other carnival, leaving activity $2$ unscheduled.\n\nFor 10% of the testdata, $1 \\leq n \\leq 10$.\n\nFor 30% of the testdata, $1 \\leq n \\leq 40$.\n\nFor 100% of the testdata, $1 \\leq n \\leq 200$, $0 \\leq S_i \\leq 10^9$, $1 \\leq T_i \\leq 10^9$.\n\nIf the output format is incorrect (for example, fewer than $n+1$ lines), the score is $0$.\nIf the first line of the output file is incorrect, and at least one of the last $n$ lines is also incorrect, the score is $0$.\nIf the first line of the output file is correct, but at least one of the last $n$ lines is incorrect, the score is $4$.\nIf the first line of the output file is incorrect, but all of the last $n$ lines are correct, the score is $6$.\nIf all $n+1$ lines in the output file are correct, the score is $10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2011] NOI 嘉年华", "background": "", "description": "NOI2011 在吉林大学开始啦！为了迎接来自全国各地最优秀的信息学选手，吉林大学决定举办两场盛大的 NOI 嘉年华活动，分在两个不同的地点举办。每个嘉年华可能包含很多个活动，而每个活动只能在一个嘉年华中举办。\n\n现在嘉年华活动的组织者小安一共收到了 $n$ 个活动的举办申请，其中第 $i$ 个活动的起始时间为 $S_i$，活动的持续时间为 $T_i$。这些活动都可以安排到任意一个嘉年华的会场，也可以不安排。\n\n小安通过广泛的调查发现，如果某个时刻，两个嘉年华会场同时有活动在进行（不包括活动的开始瞬间和结束瞬间），那么有的选手就会纠结于到底去哪个会场，从而变得不开心。所以，为了避免这样不开心的事情发生，小安要求不能有两个活动在两个会场同时进行（同一会场内的活动可以任意进行）。\n\n另外，可以想象，如果某一个嘉年华会场的活动太少，那么这个嘉年华的吸引力就会不足，容易导致场面冷清。所以小安希望通过合理的安排，使得活动相对较少的嘉年华的活动数量最大。\n\n此外，有一些活动非常有意义，小安希望能举办，他希望知道，如果第 $i$ 个活动必须举办（可以安排在两场嘉年华中的任何一个），活动相对较少的嘉年华的活动数量的最大值。\n", "inputFormat": "输入的第一行包含一个整数 $n$，表示申请的活动个数。\n\n接下来 $n$ 行描述所有活动，其中第 $i$ 行包含两个整数 $S_i,T_i$，表示第 $i$ 个活动从时刻 $S_i$ 开始，持续 $T_i$ 的时间。\n", "outputFormat": "输出的第一行包含一个整数，表示在没有任何限制的情况下，活动较少的嘉年华的活动数的最大值。\n\n接下来 $n$ 行每行一个整数，其中第 $i$ 行的整数表示在必须选择第 $i$ 个活动的前提下，活动较少的嘉年华的活动数的最大值。\n", "hint": "### 样例解释\n\n在没有任何限制的情况下，最优安排可以在一个嘉年华安排活动 $1, 4$，而在另一个嘉年华安排活动 $3, 5$，活动 $2$ 不安排。\n\n对于 $10\\%$ 的数据，$1\\leq n\\leq 10$。\n\n对于 $30\\%$ 的数据，$1\\leq n\\leq 40$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 200$，$0\\leq S_i\\leq 10^9$，$1\\leq T_i\\leq 10^9$。\n\n如果输出格式不正确（比如输出不足 $n+1$ 行），得 $0$ 分；\n\n如果输出文件第一行不正确，而且后 $n$ 行至少有一行不正确，得 $0$ 分；\n\n如果输出文件第一行正确，但后 $n$ 行至少有一行不正确，得 $4$ 分；\n\n如果输出文件第一行不正确，但后 $n$ 行均正确，得 $6$ 分；\n\n如果输出文件中的 $n+1$ 行均正确，得 $10$ 分。\n", "locale": "zh-CN"}}}
{"pid": "P1974", "type": "P", "difficulty": 4, "samples": [["3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "高精度"], "title": "基因聚合", "background": "德国科学家总是对非洲野猴的抵抗力感到惊奇，因为他们发现在没有医疗条件的情况下，非洲野猴总是比其他所有野生动物少生病。最近的研究有了新发现，科学家 Dr.Smith 从非洲野猴身上发现了一种罕见的抗体，他猜测可能正是该罕见的抗体在帮助非洲野猴抵抗外来病毒的侵害。\n\n\nDr.Smith 就立刻展开了对该抗体的研究。在初始的观察中 Dr.Smith 发现该抗体没什么特别，而且非常简单，因为抗体的每组基因只有一对基元（Dr.Smith 把一组基因看成由若干对基元组成）。但是当 Dr.Smith 把病毒植入抗体所在的培养液后，奇迹出现了！那些简单的基因组通过不断地聚合（每个基因组两两合并生成新的基因组），最终所有的基因组合并成了一个非常庞大的基因组，而正是这庞大的基因组，因为聚合了所有原始基因组的优点，这庞大的基因组才可以慢慢地、逐个地去吃掉那些植入培养液的病毒。\n\n\n下面是 Dr.Smith 在高倍显微镜下看到的抗体基因组基元聚合的大致过程：\n\n![](https://cdn.luogu.com.cn/upload/pic/974.png)\n\nDr.Smith 通过进一步观察和研究发现，抗体基因在聚合过程中似乎总是按照某个方法在进行，该方法能保证最终产生的基因组的基元对数量最多（每个基元对的存在能产生 $1$ 单位的生物能量），而在每次两个基因组聚合后所得到的新基因组的总的基元对由下面两部分相加组成：\n\n\n1. 每两个基因组一发生聚合，就产生一个额外的、未知的基元对。\n2. 当两个基因组聚合时，每个基因组中的每对基元都会与另一个基因组中的每对基元两两聚合产生一个新的基元对。\n\n\nDr.Smith 还发现，抗体在每个时刻总是只有两个基因组会发生聚合，也就是说，每两个基因组的聚合都是依次进行的，而不是同时进行的。\n\n\n虽然观察到聚合原理，但 Dr.Smith 即使在知道一开始基因组个数的前提下，还是无法统计最终聚合产生的那个庞大的基因组所具有的总能量有多大。现在他想请你编程来统计一下。", "description": "给定 $n$ 张写有数字 $1$ 的卡片和一台机器。\n\n你需要进行以下操作 $n-1$ 次：将两张卡片放进机器并得到一张写有数字 $xy+1$ 的卡片，其中 $x,y$ 是放进去的两张卡片上所写的数字。\n\n请问：进行 $n-1$ 次操作后，剩下的那张卡片上的数字最大会是多少？", "inputFormat": "一行一个正整数 $n\\ (1 \\le n \\le 10^4)$。", "outputFormat": "一行一个正整数表示答案。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Gene Aggregation", "background": "German scientists have always been amazed by the resistance of African wild monkeys, because they found that without medical conditions, African wild monkeys get sick less often than all other wild animals. Recent studies have made new discoveries: Dr. Smith found a rare antibody in African wild monkeys and suspects that it is this rare antibody that helps them resist invading viruses.\n\nDr. Smith immediately started studying this antibody. In the initial observations, Dr. Smith found nothing special and thought it very simple, because each gene group of the antibody contains only one pair of \"primitives\" (Dr. Smith considers a gene group to consist of several pairs of primitives). But when Dr. Smith implanted the virus into the culture medium containing the antibody, a miracle happened! Those simple genomes kept aggregating (each time two genomes merged into a new genome), and eventually all genomes merged into a very large genome. It is precisely this large genome, having aggregated the advantages of all original genomes, that can slowly and individually consume the viruses implanted in the culture medium.\n\nBelow is the approximate process of primitive aggregation in antibody genomes observed by Dr. Smith under a high-power microscope:\n\n![](https://cdn.luogu.com.cn/upload/pic/974.png)\n\nThrough further observation and research, Dr. Smith found that the antibody genes seem to always follow a certain method during aggregation, which ensures that the final genome has the maximum number of primitive pairs (each primitive pair produces $1$ unit of bioenergy). After each merge of two genomes, the total number of primitive pairs in the new genome is the sum of the following two parts:\n\n1. Every time two genomes merge, an additional, unknown primitive pair is produced.\n2. When two genomes merge, each primitive pair in one genome merges with each primitive pair in the other genome to produce a new primitive pair.\n\nDr. Smith also found that at any moment only two genomes merge, that is, the merges happen sequentially, not simultaneously.\n\nAlthough he observed the aggregation principle, even with the initial number of genomes known, Dr. Smith still could not compute the total energy of the final large genome produced by aggregation. Now he asks you to write a program to compute it.", "description": "You are given $n$ cards, each with the number $1$, and a machine.\n\nYou will perform the following operation $n-1$ times: put two cards into the machine and obtain a new card with the number $xy+1$, where $x, y$ are the numbers on the two cards you put in.\n\nQuestion: After performing $n-1$ operations, what is the maximum possible number on the remaining card?", "inputFormat": "One line containing a single positive integer $n$ ($1 \\le n \\le 10^4$).", "outputFormat": "One line containing a single positive integer representing the answer.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "基因聚合", "background": "德国科学家总是对非洲野猴的抵抗力感到惊奇，因为他们发现在没有医疗条件的情况下，非洲野猴总是比其他所有野生动物少生病。最近的研究有了新发现，科学家 Dr.Smith 从非洲野猴身上发现了一种罕见的抗体，他猜测可能正是该罕见的抗体在帮助非洲野猴抵抗外来病毒的侵害。\n\n\nDr.Smith 就立刻展开了对该抗体的研究。在初始的观察中 Dr.Smith 发现该抗体没什么特别，而且非常简单，因为抗体的每组基因只有一对基元（Dr.Smith 把一组基因看成由若干对基元组成）。但是当 Dr.Smith 把病毒植入抗体所在的培养液后，奇迹出现了！那些简单的基因组通过不断地聚合（每个基因组两两合并生成新的基因组），最终所有的基因组合并成了一个非常庞大的基因组，而正是这庞大的基因组，因为聚合了所有原始基因组的优点，这庞大的基因组才可以慢慢地、逐个地去吃掉那些植入培养液的病毒。\n\n\n下面是 Dr.Smith 在高倍显微镜下看到的抗体基因组基元聚合的大致过程：\n\n![](https://cdn.luogu.com.cn/upload/pic/974.png)\n\nDr.Smith 通过进一步观察和研究发现，抗体基因在聚合过程中似乎总是按照某个方法在进行，该方法能保证最终产生的基因组的基元对数量最多（每个基元对的存在能产生 $1$ 单位的生物能量），而在每次两个基因组聚合后所得到的新基因组的总的基元对由下面两部分相加组成：\n\n\n1. 每两个基因组一发生聚合，就产生一个额外的、未知的基元对。\n2. 当两个基因组聚合时，每个基因组中的每对基元都会与另一个基因组中的每对基元两两聚合产生一个新的基元对。\n\n\nDr.Smith 还发现，抗体在每个时刻总是只有两个基因组会发生聚合，也就是说，每两个基因组的聚合都是依次进行的，而不是同时进行的。\n\n\n虽然观察到聚合原理，但 Dr.Smith 即使在知道一开始基因组个数的前提下，还是无法统计最终聚合产生的那个庞大的基因组所具有的总能量有多大。现在他想请你编程来统计一下。", "description": "给定 $n$ 张写有数字 $1$ 的卡片和一台机器。\n\n你需要进行以下操作 $n-1$ 次：将两张卡片放进机器并得到一张写有数字 $xy+1$ 的卡片，其中 $x,y$ 是放进去的两张卡片上所写的数字。\n\n请问：进行 $n-1$ 次操作后，剩下的那张卡片上的数字最大会是多少？", "inputFormat": "一行一个正整数 $n\\ (1 \\le n \\le 10^4)$。", "outputFormat": "一行一个正整数表示答案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1975", "type": "P", "difficulty": 3, "samples": [["3\n130 150 140\n2\n2 3\n1 3", "1\n0\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["集训队互测", "树套树", "分块"], "title": "[国家集训队] 排队", "background": "加强版：<https://www.luogu.com.cn/problem/P12685>", "description": "排排坐，吃果果，生果甜嗦嗦，大家笑呵呵。你一个，我一个，大的分给你，小的留给我，吃完果果唱支歌，大家乐和和。\n\n红星幼儿园的小朋友们排起了长长地队伍，准备吃果果。不过因为小朋友们的身高有所区别，排成的队伍高低错乱，极不美观。设第 $i$ 个小朋友的身高为 $h_i$。\n\n幼儿园阿姨每次会选出两个小朋友，交换他们的位置，请你帮忙计算出每次交换后，序列的逆序对数。为方便幼儿园阿姨统计，在未进行任何交换操作时，你也应该输出该序列的逆序对数。", "inputFormat": "第一行为一个正整数 $n$，表示小朋友的数量；\n\n第二行包含 $n$ 个由空格分隔的正整数 $h_1,h_2,\\dots,h_n$，依次表示初始队列中小朋友的身高；\n\n第三行为一个正整数 $m$，表示交换操作的次数；\n\n以下m行每行包含两个正整数 $a_i,b_i$，表示交换位置 $a_i$ 和 $b_i$ 的小朋友。", "outputFormat": "输出文件共 $m+1$ 行，第 $i$ 行一个正整数表示交换操作 $i$ 结束后，序列的逆序对数。", "hint": "【样例说明】  \n未进行任何操作时，$(2,3)$ 为逆序对；  \n操作一结束后，序列为 $130 \\ 140 \\ 150$，不存在逆序对；  \n操作二结束后，序列为 $150 \\ 140 \\ 130$，$(1,2),(1,3),(2,3)$ 共 $3$ 个逆序对。\n\n【数据范围】  \n对于 $10\\%$ 的数据，$n,m \\le 15$；  \n对于 $25\\%$ 的数据，$n,m \\le 200$；    \n另有 $25\\%$ 的数据，$h_i$ 各不相同；  \n另有 $15\\%$ 的数据，$110 \\le h_i \\le 160$；  \n以上两类数据交集为空。\n\n对于 $100\\%$ 的数据，$1 \\le m \\le 2\\times 10^3$，$1 \\le n \\le 2 \\times 10^4$，$1 \\le h_i \\le 10^9$，$a_i \\ne b_i$，$1 \\le a_i,b_i \\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Queueing", "background": "Enhanced version: <https://www.luogu.com.cn/problem/P12685>.", "description": "Sit in a row and eat fruit; the fruit is sweet and tasty, everyone smiles happily. One for you, one for me; the big one goes to you, the small one stays with me. After we finish eating, we sing a song, and everyone is cheerful.\n\nThe children of Red Star Kindergarten line up in a long queue to eat fruit. However, because their heights differ, the queue looks uneven and not very neat. Let the height of the $i$-th child be $h_i$.\n\nEach time, the teacher selects two children and swaps their positions. Please help compute the number of inversions in the sequence after each swap. For the teacher’s convenience, you should also output the inversion count of the sequence before any swaps are performed.\n\n# Description", "inputFormat": "- The first line contains a positive integer $n$, the number of children.\n- The second line contains $n$ space-separated positive integers $h_1, h_2, \\dots, h_n$, representing the heights in the initial queue.\n- The third line contains a positive integer $m$, the number of swap operations.\n- The following $m$ lines each contain two positive integers $a_i, b_i$, indicating that the children at positions $a_i$ and $b_i$ are swapped.", "outputFormat": "Output $m+1$ lines.\n- Line 1: the number of inversions in the sequence before any swap.\n- For $i = 1, 2, \\dots, m$, line $i+1$: the number of inversions in the sequence after performing swap $i$.", "hint": "[Sample explanation]  \nBefore any operation, $(2,3)$ is an inversion.  \nAfter operation 1, the sequence is $130 \\ 140 \\ 150$, and there are no inversions.  \nAfter operation 2, the sequence is $150 \\ 140 \\ 130$, and $(1,2)$, $(1,3)$, $(2,3)$ are inversions, totaling $3$.\n\n[Constraints]  \nFor $10\\%$ of the testdata, $n, m \\le 15$.  \nFor $25\\%$ of the testdata, $n, m \\le 200$.  \nAdditionally, for $25\\%$ of the testdata, all $h_i$ are distinct.  \nAdditionally, for $15\\%$ of the testdata, $110 \\le h_i \\le 160$.  \nThese two types of testdata are disjoint.\n\nFor $100\\%$ of the testdata, $1 \\le m \\le 2 \\times 10^3$, $1 \\le n \\le 2 \\times 10^4$, $1 \\le h_i \\le 10^9$, $a_i \\ne b_i$, and $1 \\le a_i, b_i \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 排队", "background": "加强版：<https://www.luogu.com.cn/problem/P12685>", "description": "排排坐，吃果果，生果甜嗦嗦，大家笑呵呵。你一个，我一个，大的分给你，小的留给我，吃完果果唱支歌，大家乐和和。\n\n红星幼儿园的小朋友们排起了长长地队伍，准备吃果果。不过因为小朋友们的身高有所区别，排成的队伍高低错乱，极不美观。设第 $i$ 个小朋友的身高为 $h_i$。\n\n幼儿园阿姨每次会选出两个小朋友，交换他们的位置，请你帮忙计算出每次交换后，序列的逆序对数。为方便幼儿园阿姨统计，在未进行任何交换操作时，你也应该输出该序列的逆序对数。", "inputFormat": "第一行为一个正整数 $n$，表示小朋友的数量；\n\n第二行包含 $n$ 个由空格分隔的正整数 $h_1,h_2,\\dots,h_n$，依次表示初始队列中小朋友的身高；\n\n第三行为一个正整数 $m$，表示交换操作的次数；\n\n以下m行每行包含两个正整数 $a_i,b_i$，表示交换位置 $a_i$ 和 $b_i$ 的小朋友。", "outputFormat": "输出文件共 $m+1$ 行，第 $i$ 行一个正整数表示交换操作 $i$ 结束后，序列的逆序对数。", "hint": "【样例说明】  \n未进行任何操作时，$(2,3)$ 为逆序对；  \n操作一结束后，序列为 $130 \\ 140 \\ 150$，不存在逆序对；  \n操作二结束后，序列为 $150 \\ 140 \\ 130$，$(1,2),(1,3),(2,3)$ 共 $3$ 个逆序对。\n\n【数据范围】  \n对于 $10\\%$ 的数据，$n,m \\le 15$；  \n对于 $25\\%$ 的数据，$n,m \\le 200$；    \n另有 $25\\%$ 的数据，$h_i$ 各不相同；  \n另有 $15\\%$ 的数据，$110 \\le h_i \\le 160$；  \n以上两类数据交集为空。\n\n对于 $100\\%$ 的数据，$1 \\le m \\le 2\\times 10^3$，$1 \\le n \\le 2 \\times 10^4$，$1 \\le h_i \\le 10^9$，$a_i \\ne b_i$，$1 \\le a_i,b_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P1976", "type": "P", "difficulty": 3, "samples": [["24", "4057031"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创", "Catalan 数"], "title": "鸡蛋饼", "background": "Czyzoiers 都想知道小 x 为什么对鸡蛋饼情有独钟。经过一番逼问，小 x 道出了实情：因为他喜欢圆。", "description": "最近小 x 又发现了一个关于圆的有趣的问题：在圆上有 $2N$ 个不同的点，小 x 想用 $N$ 条线段把这些点连接起来（每个点只能连一条线段），使所有的线段都不相交，他想知道这样的连接方案有多少种？\n\n答案对 $10^8+7$ 取模。", "inputFormat": "一行一个正整数 $N\\ (1 \\le N \\le 2999)$。", "outputFormat": "一行一个整数表示答案。\n\n答案对 $10^8+7$ 取模。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Egg Pancake", "background": "Czyzoiers all want to know why Xiao x is so fond of egg pancakes. After some questioning, Xiao x revealed the truth: because he likes circles.", "description": "Recently, Xiao x discovered another interesting problem about circles: there are $2N$ distinct points on a circle. Xiao x wants to connect these points with $N$ line segments (each point can be connected by exactly one segment), such that all segments do not intersect. He wants to know how many such connection schemes there are.\n\nThe answer is taken modulo $10^8+7$.", "inputFormat": "A single line containing a positive integer $N$ ($1 \\le N \\le 2999$).", "outputFormat": "A single line containing an integer representing the answer.\n\nThe answer is taken modulo $10^8+7$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "鸡蛋饼", "background": "Czyzoiers 都想知道小 x 为什么对鸡蛋饼情有独钟。经过一番逼问，小 x 道出了实情：因为他喜欢圆。", "description": "最近小 x 又发现了一个关于圆的有趣的问题：在圆上有 $2N$ 个不同的点，小 x 想用 $N$ 条线段把这些点连接起来（每个点只能连一条线段），使所有的线段都不相交，他想知道这样的连接方案有多少种？\n\n答案对 $10^8+7$ 取模。", "inputFormat": "一行一个正整数 $N\\ (1 \\le N \\le 2999)$。", "outputFormat": "一行一个整数表示答案。\n\n答案对 $10^8+7$ 取模。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1977", "type": "P", "difficulty": 3, "samples": [["2 2 10 5\r\n1 1\r\n2 2\r\n", "14\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "动态规划 DP", "贪心", "洛谷原创"], "title": "出租车拼车", "background": "话说小 x 有一次去参加比赛，虽然学校离比赛地点不太远，但小 x 还是想坐出租车去。大学城的出租车总是比较另类，有“拼车”一说，也就是说，你一个人坐车去，还是一堆人一起，总共需要支付的钱是一样的（每辆出租上除司机外最多坐下 $4$ 个人）。刚好那天同校的一群 OIer 在校门口扎堆了，大家果断决定拼车去赛场。\n\n问题来了，一辆又一辆的出租车经过，但里面要么坐满了乘客，要么只剩下一两个座位，众 OIer 都觉得坐上去太亏了，小 x 也是这么想的。", "description": "假设 $N$ 位 OIer 准备拼车，此时为 $0$ 时刻，从校门到目的地需要支付给出租车师傅 $D$ 元（按车次算，不管里面坐了多少 OIer），假如 $S$ 分钟后恰能赶上比赛，那么 $S$ 分钟后经过校门口的出租车自然可以忽略不计了。现在给出在这 $S$ 分钟当中经过校门的所有的 $K$ 辆出租车先后到达校门口的时间 $T_i$  及里面剩余的座位 $Z_i$\n，OIer 可以选择上车几个人（不能超过），当然，也可以选择上 $0$ 个人，那就是不坐这辆车。\n\n俗话说，时间就是金钱，这里小 x 把每个 OIer 在校门等待出租车的分钟数 等同于花了相同多的钱（例如小 x 等待了 $20$ 分钟，那相当于他额外花了 $20$ 元钱）。\n\n在保证所有 OIer 都能在比赛开始前到达比赛地点的情况下，聪明的你能计算出他们最少需要花多少元钱么？", "inputFormat": "每组数据以四个整数 $N, K, D, S$ 开始，具体含义参见题目描述。\n\n接着 $K$ 行，表示第 $i$ 辆出租车在第 $T_i$ 分钟到达校门，其空余的座位数为 $Z_i$。\n\n时间按照先后顺序。", "outputFormat": "对于每组测试数据，输出占一行，如果他们所有人能在比赛前到达比赛地点，\n\n则输出一个整数，代表他们最少需要花的钱（单位：元），否则请输出 `impossible`。", "hint": "对于 $100\\%$ 的数据，满足 $N,K,D,S \\le 100$，$1 \\le Z_i \\le 4$，$1 \\le T_i \\le T_{i+1} \\le S$。", "locale": "zh-CN", "translations": {"en": {"title": "Taxi Carpooling", "background": "Once, little x went to a contest. Although the school was not far from the venue, little x still wanted to take a taxi. Taxis in the university town are a bit quirky: they do “carpooling.” That is, whether you ride alone or as a group, the total fare is the same per taxi ride (each taxi can seat at most $4$ passengers excluding the driver). Coincidentally, a group of OIers from the same school were gathered at the school gate that day, and everyone decisively decided to carpool to the venue.\n\nHere comes the problem: taxis kept passing by, but they were either full or had only one or two seats left. The OIers felt that getting on those would be a bad deal, and little x thought so too.", "description": "Suppose $N$ OIers plan to carpool. Time $0$ is the current moment. The fare from the school gate to the destination is $D$ yuan, charged per taxi ride regardless of how many OIers are inside. Assume the contest starts exactly at $S$ minutes, so any taxi that passes the gate after $S$ minutes can be ignored. You are given the arrival times $T_i$ and remaining seats $Z_i$ of all $K$ taxis that pass the gate within these $S$ minutes. For each taxi, the OIers may choose to let up to $Z_i$ people board (possibly $0$), or skip this taxi entirely.\n\nTime is money: each OIer’s waiting time in minutes at the gate is counted as spending the same amount of money. For example, if little x waits $20$ minutes, that means he spends an extra $20$ yuan.\n\nUnder the requirement that all OIers can reach the venue before the contest starts, compute the minimum total amount of money they need to spend.", "inputFormat": "Each test case starts with four integers $N$, $K$, $D$, $S$, as described above.\n\nThen follow $K$ lines. The $i$-th line gives that the $i$-th taxi arrives at minute $T_i$, and its number of remaining seats is $Z_i$.\n\nTimes are given in chronological order.", "outputFormat": "For each test case, output one line. If all of them can reach the venue before the contest starts, output a single integer representing the minimum amount of money (in yuan). Otherwise, output `impossible`.", "hint": "Constraints: For $100\\%$ of the testdata, $N, K, D, S \\le 100$, $1 \\le Z_i \\le 4$, $1 \\le T_i \\le T_{i+1} \\le S$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "出租车拼车", "background": "话说小 x 有一次去参加比赛，虽然学校离比赛地点不太远，但小 x 还是想坐出租车去。大学城的出租车总是比较另类，有“拼车”一说，也就是说，你一个人坐车去，还是一堆人一起，总共需要支付的钱是一样的（每辆出租上除司机外最多坐下 $4$ 个人）。刚好那天同校的一群 OIer 在校门口扎堆了，大家果断决定拼车去赛场。\n\n问题来了，一辆又一辆的出租车经过，但里面要么坐满了乘客，要么只剩下一两个座位，众 OIer 都觉得坐上去太亏了，小 x 也是这么想的。", "description": "假设 $N$ 位 OIer 准备拼车，此时为 $0$ 时刻，从校门到目的地需要支付给出租车师傅 $D$ 元（按车次算，不管里面坐了多少 OIer），假如 $S$ 分钟后恰能赶上比赛，那么 $S$ 分钟后经过校门口的出租车自然可以忽略不计了。现在给出在这 $S$ 分钟当中经过校门的所有的 $K$ 辆出租车先后到达校门口的时间 $T_i$  及里面剩余的座位 $Z_i$\n，OIer 可以选择上车几个人（不能超过），当然，也可以选择上 $0$ 个人，那就是不坐这辆车。\n\n俗话说，时间就是金钱，这里小 x 把每个 OIer 在校门等待出租车的分钟数 等同于花了相同多的钱（例如小 x 等待了 $20$ 分钟，那相当于他额外花了 $20$ 元钱）。\n\n在保证所有 OIer 都能在比赛开始前到达比赛地点的情况下，聪明的你能计算出他们最少需要花多少元钱么？", "inputFormat": "每组数据以四个整数 $N, K, D, S$ 开始，具体含义参见题目描述。\n\n接着 $K$ 行，表示第 $i$ 辆出租车在第 $T_i$ 分钟到达校门，其空余的座位数为 $Z_i$。\n\n时间按照先后顺序。", "outputFormat": "对于每组测试数据，输出占一行，如果他们所有人能在比赛前到达比赛地点，\n\n则输出一个整数，代表他们最少需要花的钱（单位：元），否则请输出 `impossible`。", "hint": "对于 $100\\%$ 的数据，满足 $N,K,D,S \\le 100$，$1 \\le Z_i \\le 4$，$1 \\le T_i \\le T_{i+1} \\le S$。", "locale": "zh-CN"}}}
{"pid": "P1978", "type": "P", "difficulty": 4, "samples": [["6 2\t\n2 3 6 5 4 10\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "集合", "background": "", "description": "集合是数学中的一个概念，用通俗的话来讲就是：一大堆数在一起就构成了集合。\n\n集合有如下的特性：\n\n- 无序性：任一个集合中，每个元素的地位都是相同的，元素之间是无序的。\n\n- 互异性：一个集合中，任何两个元素都认为是不相同的，即每个元素只能出现一次。\n\n- 确定性：给定一个集合，任给一个元素，该元素或者属于或者不属于该集合，二者必居其一，不允许有模棱两可的情况出现。\n\n例如 $A = \\{ 1, 2, 3 \\}$ 就是一个集合。我们可以知道，$1$ 属于 $A$，即 $1 \\in A$；$4$ 不属于 $A$，即 $4 \\notin A$。一个集合的大小，就是其中元素的个数。\n\n\n现在定义一个特殊的 $k$-集合，要求满足：\n\n- 集合的所有特性\n- 对任意一个该集合内的元素 $x$，不存在一个数 $y$，使得 $y = k x$ 并且 $y$ 属于该集合。即集合中的任意一个数，它乘以 $k$ 之后的数都不在这个集合内。\n\n给你一个由 $n$ 个不同的数组成的集合，请你从这个集合中找出一个最大的 $k$-集合。\n", "inputFormat": "第一行：两个整数：$n$ 和 $k$。\n\n第二行：$n$ 个整数：$a_i$ 表示给定的集合。\n", "outputFormat": "第一行：一个整数：$\\mathit{ans}$ 表示最大的 $k$-集合的大小。\n", "hint": "提示：在样例所给集合中，找出的最大的 $2$-集合为 $\\{ 4, 5, 6 \\}$\n\n- 对于 $30 \\%$ 的数据：$n, k \\le 100$。\n- 对于 $40 \\%$ 的数据：$\\lvert a_i \\rvert \\le 2^{31} - 1$。\n- 对于 $70 \\%$ 的数据：$n, k \\le 5000$。\n- 对于 $100 \\%$ 的数据：$2 \\le n, k \\le {10}^5$，$1 \\le \\lvert a_i \\rvert \\le 2^{63} - 1$。", "locale": "zh-CN", "translations": {"en": {"title": "Set", "background": "", "description": "A set is a concept in mathematics. In plain words, a set is a bunch of numbers grouped together.\n\nA set has the following properties:\n- Unorderedness: within any set, every element has the same status, and the elements are unordered.\n- Distinctness: in a set, any two elements are considered different; that is, each element can appear at most once.\n- Definiteness: for a given set and any given element, the element either belongs to the set or does not; there is no ambiguity.\n\nFor example, $A = \\{ 1, 2, 3 \\}$ is a set. We can see that $1$ belongs to $A$, i.e., $1 \\in A$; $4$ does not belong to $A$, i.e., $4 \\notin A$. The size of a set is the number of its elements.\n\nNow we define a special $k$-set, which must satisfy:\n- All the properties of sets.\n- For any element $x$ in the set, there does not exist a number $y$ such that $y = k x$ and $y$ also belongs to the set. In other words, for any number in the set, the number obtained by multiplying it by $k$ is not in the set.\n\nYou are given a set consisting of $n$ distinct integers. Please find a largest $k$-set contained in this set.", "inputFormat": "The first line: two integers, $n$ and $k$.\n\nThe second line: $n$ integers, $a_i$ are the elements of the given set.", "outputFormat": "The first line: one integer, $\\mathit{ans}$, the size of a largest $k$-set.", "hint": "Hint: In the set given in the sample, a largest $2$-set is $\\{ 4, 5, 6 \\}$.\n\n- For $30 \\%$ of the testdata: $n, k \\le 100$.\n- For $40 \\%$ of the testdata: $a_i \\le 2^{31} - 1$.\n- For $70 \\%$ of the testdata: $n, k \\le 5000$.\n- For $100 \\%$ of the testdata: $2 \\le n, k \\le {10}^5$, $1 \\le a_i \\le 2^{63} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "集合", "background": "", "description": "集合是数学中的一个概念，用通俗的话来讲就是：一大堆数在一起就构成了集合。\n\n集合有如下的特性：\n\n- 无序性：任一个集合中，每个元素的地位都是相同的，元素之间是无序的。\n\n- 互异性：一个集合中，任何两个元素都认为是不相同的，即每个元素只能出现一次。\n\n- 确定性：给定一个集合，任给一个元素，该元素或者属于或者不属于该集合，二者必居其一，不允许有模棱两可的情况出现。\n\n例如 $A = \\{ 1, 2, 3 \\}$ 就是一个集合。我们可以知道，$1$ 属于 $A$，即 $1 \\in A$；$4$ 不属于 $A$，即 $4 \\notin A$。一个集合的大小，就是其中元素的个数。\n\n\n现在定义一个特殊的 $k$-集合，要求满足：\n\n- 集合的所有特性\n- 对任意一个该集合内的元素 $x$，不存在一个数 $y$，使得 $y = k x$ 并且 $y$ 属于该集合。即集合中的任意一个数，它乘以 $k$ 之后的数都不在这个集合内。\n\n给你一个由 $n$ 个不同的数组成的集合，请你从这个集合中找出一个最大的 $k$-集合。\n", "inputFormat": "第一行：两个整数：$n$ 和 $k$。\n\n第二行：$n$ 个整数：$a_i$ 表示给定的集合。\n", "outputFormat": "第一行：一个整数：$\\mathit{ans}$ 表示最大的 $k$-集合的大小。\n", "hint": "提示：在样例所给集合中，找出的最大的 $2$-集合为 $\\{ 4, 5, 6 \\}$\n\n- 对于 $30 \\%$ 的数据：$n, k \\le 100$。\n- 对于 $40 \\%$ 的数据：$\\lvert a_i \\rvert \\le 2^{31} - 1$。\n- 对于 $70 \\%$ 的数据：$n, k \\le 5000$。\n- 对于 $100 \\%$ 的数据：$2 \\le n, k \\le {10}^5$，$1 \\le \\lvert a_i \\rvert \\le 2^{63} - 1$。", "locale": "zh-CN"}}}
{"pid": "P1979", "type": "P", "difficulty": 6, "samples": [["3 4 2\n0 1 1 1\n0 1 1 0\n0 1 0 0\n3 2 1 2 2 2\n1 2 2 2 3 2", "2\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "2013", "NOIP 提高组", "广度优先搜索 BFS", "最短路"], "title": "[NOIP 2013 提高组] 华容道", "background": "NOIP2013 提高组 D2T3", "description": "`小 B` 最近迷上了华容道，可是他总是要花很长的时间才能完成一次。于是，他想到用编程来完成华容道：给定一种局面， 华容道是否根本就无法完成，如果能完成， 最少需要多少时间。\n\n`小 B` 玩的华容道与经典的华容道游戏略有不同，游戏规则是这样的：\n\n1.   在一个 $n \\times m$ 棋盘上有 $ n \\times m$ 个格子，其中有且只有一个格子是空白的，其余 $ n \\times m-1$ 个格子上每个格子上有一个棋子，每个棋子的大小都是 $1 \\times 1$ 的；\n2.  有些棋子是固定的，有些棋子则是可以移动的；\n3.  任何与空白的格子相邻（有公共的边）的格子上的棋子都可以移动到空白格子上。   \n\n游戏的目的是把某个指定位置可以活动的棋子移动到目标位置。\n\n给定一个棋盘，游戏可以玩 $q$ 次，当然，每次棋盘上固定的格子是不会变的， 但是棋盘上空白的格子的初始位置、 指定的可移动的棋子的初始位置和目标位置却可能不同。第 $i$ 次玩的时候， 空白的格子在第 $EX_i$ 行第 $EY_i$ 列，指定的可移动棋子的初始位置为第 $SX_i$ 行第 $SY_i$列，目标位置为第 $TX_i$ 行第 $TY_i$ 列。\n\n假设 `小 B` 每秒钟能进行一次移动棋子的操作，而其他操作的时间都可以忽略不计。请你告诉 `小 B` 每一次游戏所需要的最少时间，或者告诉他不可能完成游戏。\n", "inputFormat": "第一行有 $3$个整数，每两个整数之间用一个空格隔开，依次表示 $ n,m,q$；\n\n接下来的 $n$ 行描述一个 $ n \\times m$ 的棋盘，每行有 $ m $ 个整数，每两个整数之间用一个空格隔开，每个整数描述棋盘上一个格子的状态，$0$ 表示该格子上的棋子是固定的，$1$ 表示该格子上的棋子可以移动或者该格子是空白的。  \n\n接下来的 $q$ 行，每行包含 $6$ 个整数依次是 $EX_i,EY_i,SX_i,SY_i,TX_i,TY_i$，每两个整数之间用一个空格隔开，表示每次游戏空白格子的位置，指定棋子的初始位置和目标位置。\n", "outputFormat": "共 $ q$ 行，每行包含 $1$ 个整数，表示每次游戏所需要的最少时间，如果某次游戏无法完成目标则输出 $−1$。\n", "hint": "**输入输出样例说明**\n\n棋盘上划叉的格子是固定的，红色格子是目标位置，圆圈表示棋子，其中绿色圆圈表示目标棋子。\n\n1.   第一次游戏，空白格子的初始位置是 $(3,2)$（图中空白所示），游戏的目标是将初始位置在 $(1, 2)$ 上的棋子（图中绿色圆圈所代表的棋子）移动到目标位置 $(2, 2)$（图中红色的格子）上。\n\n移动过程如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0q385tw.png)\n\n2.  第二次游戏，空白格子的初始位置是 $(1, 2)$（图中空白所示），游戏的目标是将初始位置在 $(2, 2)$ 上的棋子（图中绿色圆圈所示）移动到目标位置  $(3, 2)$ 上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aq9apos0.png)\n\n要将指定块移入目标位置，必须先将空白块移入目标位置，空白块要移动到目标位置，必然是从位置 $(2,2)$ 上与当前图中目标位置上的棋子交换位置，之后能与空白块交换位置的只有当前图中目标位置上的那个棋子，因此目标棋子永远无法走到它的目标位置， 游戏无法完成。\n\n**数据范围**\n\n对于 $ 30\\%$ 的数据，$1 ≤ n, m ≤ 10,q = 1$；\n\n对于 $60\\%$ 的数据，$1 ≤ n, m ≤ 30,q ≤ 10$；\n\n对于 $100\\%$ 的数据，$1 ≤ n, m ≤ 30,q ≤ 500$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Senior] Huarong Dao", "background": "NOIP 2013 Senior D2T3.", "description": "`小 B` recently got hooked on the Huarong Dao sliding puzzle, but it always takes him a long time to finish one game. So he thought of writing a program to solve it: given a board position, determine whether the puzzle is impossible to finish, and if it can be finished, what is the minimum time required.\n\nThe Huarong Dao that `小 B` plays is slightly different from the classic one. The rules are:\n\n1. On an $ n \\times m $ board there are $ n \\times m $ cells. Exactly one cell is empty, and each of the remaining $ n \\times m - 1 $ cells has one piece on it. Every piece is of size $ 1 \\times 1 $.\n2. Some pieces are fixed, while others are movable.\n3. Any piece on a cell adjacent to the empty cell (sharing a side) can move into the empty cell.\n\nThe goal is to move a specified movable piece from its start position to a target position.\n\nGiven a board, the game can be played $ q $ times. The fixed cells on the board never change, but the initial position of the empty cell, the specified movable piece’s start position, and its target position may differ each time. In the $ i $-th play, the empty cell is at row $ EX_i $, column $ EY_i $, the specified movable piece starts at row $ SX_i $, column $ SY_i $, and its target is row $ TX_i $, column $ TY_i $.\n\nAssume `小 B` can perform one piece-move per second, and all other operations take negligible time. For each game, tell `小 B` the minimum time required, or tell him that the game cannot be completed.", "inputFormat": "The first line contains $ 3 $ integers, separated by a single space, which are $ n, m, q $.\n\nThe next $ n $ lines describe an $ n \\times m $ board. Each line contains $ m $ integers separated by single spaces. Each integer describes the state of a cell: $ 0 $ means the piece on that cell is fixed, and $ 1 $ means the piece on that cell is movable or the cell is empty.\n\nThe next $ q $ lines each contain $ 6 $ integers $ EX_i, EY_i, SX_i, SY_i, TX_i, TY_i $, separated by single spaces, giving the empty cell’s position, the specified piece’s start position, and its target position for each game.", "outputFormat": "Output $ q $ lines. Each line contains $ 1 $ integer, the minimum time required for that game, or $ -1 $ if the target cannot be achieved.", "hint": "Explanation of the sample I/O:\n\nCells with an X are fixed, the red cell is the target position, and circles denote pieces; the green circle is the target piece.\n\n1. In the first game, the empty cell starts at $ (3, 2) $ (as shown), and the goal is to move the piece initially at $ (1, 2) $ (the green circle) to the target position $ (2, 2) $ (the red cell).\n\n   The moves are as follows:\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/n0q385tw.png)\n\n2. In the second game, the empty cell starts at $ (1, 2) $ (as shown), and the goal is to move the piece initially at $ (2, 2) $ (the green circle) to the target position $ (3, 2) $.\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/aq9apos0.png)\n\nTo move the target piece into the target cell, the empty cell must first enter the target cell. For the empty cell to enter the target cell, it must swap with the piece currently on $ (2, 2) $. After that, the only piece that can swap with the empty cell is that same piece on the target cell, so the target piece can never reach its target. The game is impossible.\n\nConstraints\n\n- For $ 30\\% $ of the testdata, $ 1 \\le n, m \\le 10, q = 1 $.\n- For $ 60\\% $ of the testdata, $ 1 \\le n, m \\le 30, q \\le 10 $.\n- For $ 100\\% $ of the testdata, $ 1 \\le n, m \\le 30, q \\le 500 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 提高组] 华容道", "background": "NOIP2013 提高组 D2T3", "description": "`小 B` 最近迷上了华容道，可是他总是要花很长的时间才能完成一次。于是，他想到用编程来完成华容道：给定一种局面， 华容道是否根本就无法完成，如果能完成， 最少需要多少时间。\n\n`小 B` 玩的华容道与经典的华容道游戏略有不同，游戏规则是这样的：\n\n1.   在一个 $n \\times m$ 棋盘上有 $ n \\times m$ 个格子，其中有且只有一个格子是空白的，其余 $ n \\times m-1$ 个格子上每个格子上有一个棋子，每个棋子的大小都是 $1 \\times 1$ 的；\n2.  有些棋子是固定的，有些棋子则是可以移动的；\n3.  任何与空白的格子相邻（有公共的边）的格子上的棋子都可以移动到空白格子上。   \n\n游戏的目的是把某个指定位置可以活动的棋子移动到目标位置。\n\n给定一个棋盘，游戏可以玩 $q$ 次，当然，每次棋盘上固定的格子是不会变的， 但是棋盘上空白的格子的初始位置、 指定的可移动的棋子的初始位置和目标位置却可能不同。第 $i$ 次玩的时候， 空白的格子在第 $EX_i$ 行第 $EY_i$ 列，指定的可移动棋子的初始位置为第 $SX_i$ 行第 $SY_i$列，目标位置为第 $TX_i$ 行第 $TY_i$ 列。\n\n假设 `小 B` 每秒钟能进行一次移动棋子的操作，而其他操作的时间都可以忽略不计。请你告诉 `小 B` 每一次游戏所需要的最少时间，或者告诉他不可能完成游戏。\n", "inputFormat": "第一行有 $3$个整数，每两个整数之间用一个空格隔开，依次表示 $ n,m,q$；\n\n接下来的 $n$ 行描述一个 $ n \\times m$ 的棋盘，每行有 $ m $ 个整数，每两个整数之间用一个空格隔开，每个整数描述棋盘上一个格子的状态，$0$ 表示该格子上的棋子是固定的，$1$ 表示该格子上的棋子可以移动或者该格子是空白的。  \n\n接下来的 $q$ 行，每行包含 $6$ 个整数依次是 $EX_i,EY_i,SX_i,SY_i,TX_i,TY_i$，每两个整数之间用一个空格隔开，表示每次游戏空白格子的位置，指定棋子的初始位置和目标位置。\n", "outputFormat": "共 $ q$ 行，每行包含 $1$ 个整数，表示每次游戏所需要的最少时间，如果某次游戏无法完成目标则输出 $−1$。\n", "hint": "**输入输出样例说明**\n\n棋盘上划叉的格子是固定的，红色格子是目标位置，圆圈表示棋子，其中绿色圆圈表示目标棋子。\n\n1.   第一次游戏，空白格子的初始位置是 $(3,2)$（图中空白所示），游戏的目标是将初始位置在 $(1, 2)$ 上的棋子（图中绿色圆圈所代表的棋子）移动到目标位置 $(2, 2)$（图中红色的格子）上。\n\n移动过程如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0q385tw.png)\n\n2.  第二次游戏，空白格子的初始位置是 $(1, 2)$（图中空白所示），游戏的目标是将初始位置在 $(2, 2)$ 上的棋子（图中绿色圆圈所示）移动到目标位置  $(3, 2)$ 上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aq9apos0.png)\n\n要将指定块移入目标位置，必须先将空白块移入目标位置，空白块要移动到目标位置，必然是从位置 $(2,2)$ 上与当前图中目标位置上的棋子交换位置，之后能与空白块交换位置的只有当前图中目标位置上的那个棋子，因此目标棋子永远无法走到它的目标位置， 游戏无法完成。\n\n**数据范围**\n\n对于 $ 30\\%$ 的数据，$1 ≤ n, m ≤ 10,q = 1$；\n\n对于 $60\\%$ 的数据，$1 ≤ n, m ≤ 30,q ≤ 10$；\n\n对于 $100\\%$ 的数据，$1 ≤ n, m ≤ 30,q ≤ 500$。\n", "locale": "zh-CN"}}}
{"pid": "P1980", "type": "P", "difficulty": 1, "samples": [["11 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2013", "NOIP 普及组"], "title": "[NOIP 2013 普及组] 计数问题", "background": "NOIP2013 普及组 T1", "description": "试计算在区间 $1$ 到 $n$ 的所有整数中，数字 $x$（$0\\le x\\le9$）共出现了多少次？例如，在 $1$ 到 $11$ 中，即在 $1,2,3,4,5,6,7,8,9,10,11$ 中，数字 $1$ 出现了 $4$ 次。", "inputFormat": "$2$ 个整数 $n,x$，之间用一个空格隔开。", "outputFormat": "$1$ 个整数，表示 $x$ 出现的次数。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le x \\le 9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Junior] Counting Problem", "background": "NOIP 2013 Junior T1.", "description": "Compute how many times the digit $x$ ($0 \\le x \\le 9$) appears among all integers from $1$ to $n$. For example, among $1$ to $11$, i.e., in $1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11$, the digit $1$ appears $4$ times.", "inputFormat": "Two integers $n$ and $x$, separated by a single space.", "outputFormat": "One integer, representing the number of times $x$ appears.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 10^6$, $0 \\le x \\le 9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 普及组] 计数问题", "background": "NOIP2013 普及组 T1", "description": "试计算在区间 $1$ 到 $n$ 的所有整数中，数字 $x$（$0\\le x\\le9$）共出现了多少次？例如，在 $1$ 到 $11$ 中，即在 $1,2,3,4,5,6,7,8,9,10,11$ 中，数字 $1$ 出现了 $4$ 次。", "inputFormat": "$2$ 个整数 $n,x$，之间用一个空格隔开。", "outputFormat": "$1$ 个整数，表示 $x$ 出现的次数。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le x \\le 9$。\n", "locale": "zh-CN"}}}
{"pid": "P1981", "type": "P", "difficulty": 2, "samples": [["1+1*3+4\n", "8"], ["1+1234567890*1", "7891"], ["1+1000000003*1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2013", "NOIP 普及组", "栈"], "title": "[NOIP 2013 普及组] 表达式求值", "background": "NOIP2013 普及组 T2", "description": "给定一个只包含加法和乘法的算术表达式，请你编程计算表达式的值。\n", "inputFormat": "一行，为需要你计算的表达式，表达式中只包含数字、加法运算符 `+` 和乘法运算符 `*`，且没有括号，所有参与运算的数字均为 $0$ 到   $2^{31}-1$ 之间的整数。  \n\n输入数据保证这一行只有 `0123456789+*` 这 $12$ 种字符。\n", "outputFormat": "一个整数，表示这个表达式的值。  \n\n注意：当答案长度多于 $4$ 位时，请只输出最后 $ 4$ 位，前导 $ 0$ 不输出。\n", "hint": "对于 $30\\%$ 的数据，$0≤$ 表达式中加法运算符和乘法运算符的总数 $≤100$。\n\n对于 $80\\%$ 的数据，$0≤$ 表达式中加法运算符和乘法运算符的总数 $≤1000$。\n\n对于 $100\\%$ 的数据，$0≤$ 表达式中加法运算符和乘法运算符的总数 $≤100000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Junior] Expression Evaluation", "background": "NOIP 2013 Junior T2.", "description": "Given an arithmetic expression that contains only addition and multiplication, compute the value of the expression.", "inputFormat": "One line: the expression to evaluate. The expression contains only digits, the addition operator `+`, and the multiplication operator `*`, with no parentheses. Every number that appears is an integer from $0$ to $2^{31}-1$.\n\nThe input guarantees that this line contains only these $12$ characters: `0123456789+*`.", "outputFormat": "Output a single integer: the value of the expression.\n\nNote: If the answer has more than $4$ digits, output only the last $4$ digits, and do not output leading $0$s.", "hint": "For $30\\%$ of the testdata, the total number of addition and multiplication operators in the expression is between $0$ and $100$ inclusive.\n\nFor $80\\%$ of the testdata, the total number of addition and multiplication operators in the expression is between $0$ and $1000$ inclusive.\n\nFor $100\\%$ of the testdata, the total number of addition and multiplication operators in the expression is between $0$ and $100000$ inclusive.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 普及组] 表达式求值", "background": "NOIP2013 普及组 T2", "description": "给定一个只包含加法和乘法的算术表达式，请你编程计算表达式的值。\n", "inputFormat": "一行，为需要你计算的表达式，表达式中只包含数字、加法运算符 `+` 和乘法运算符 `*`，且没有括号，所有参与运算的数字均为 $0$ 到   $2^{31}-1$ 之间的整数。  \n\n输入数据保证这一行只有 `0123456789+*` 这 $12$ 种字符。\n", "outputFormat": "一个整数，表示这个表达式的值。  \n\n注意：当答案长度多于 $4$ 位时，请只输出最后 $ 4$ 位，前导 $ 0$ 不输出。\n", "hint": "对于 $30\\%$ 的数据，$0≤$ 表达式中加法运算符和乘法运算符的总数 $≤100$。\n\n对于 $80\\%$ 的数据，$0≤$ 表达式中加法运算符和乘法运算符的总数 $≤1000$。\n\n对于 $100\\%$ 的数据，$0≤$ 表达式中加法运算符和乘法运算符的总数 $≤100000$。\n", "locale": "zh-CN"}}}
{"pid": "P1982", "type": "P", "difficulty": 4, "samples": [["5 997\n1 2 3 4 5\n", "21\n"], ["5 7\n-1 -1 -1 -1 -1\n", "-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "高精度", "递推", "2013", "NOIP 普及组"], "title": "[NOIP 2013 普及组] 小朋友的数字", "background": "NOIP2013 普及组 T3", "description": "有 $n$ 个小朋友排成一列。每个小朋友手上都有一个数字，这个数字可正可负。规定每个小朋友的特征值等于排在他前面（包括他本人）的小朋友中连续若干个（最少有一个）小朋友手上的数字之和的最大值。\n\n作为这些小朋友的老师，你需要给每个小朋友一个分数，分数是这样规定的：第一个小朋友的分数是他的特征值，其它小朋友的分数为排在他前面的所有小朋友中（不包括他本人），小朋友分数加上其特征值的最大值。\n\n请计算所有小朋友分数的最大值，输出时保持最大值的符号，将其绝对值对 $p$ 取模后输出。\n", "inputFormat": "第一行包含两个正整数 $n,p$，之间用一个空格隔开。\n\n第二行包含 $n$ 个数，每两个整数之间用一个空格隔开，表示每个小朋友手上的数字。\n", "outputFormat": "一个整数，表示最大分数对 $p$ 取模的结果。\n", "hint": "**样例解释 1**\n\n小朋友的特征值分别为 $1,3,6,10,15$，分数分别为 $ 1,2,5,11,21$，最大值 $21$ 对 $997$ 的模是 $21$。\n\n**样例解释 2**\n\n小朋友的特征值分别为 $-1,-1,-1,-1,-1$，分数分别为$-1,-2,-2,-2,-2$，最大值 $-1$ 对 $7$ 的模为 $-1$，输出 $-1$。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le p \\le 1000$，所有数字的绝对值不超过 $1000$；\n\n对于 $100\\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le p \\le {10}^9$，其他数字的绝对值均不超过 ${10}^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Junior] Children's Numbers", "background": "NOIP 2013 Junior T3.", "description": "There are $n$ children standing in a line. Each child holds a number, which can be positive or negative. The characteristic value of a child is defined as the maximum possible sum of a contiguous block of one or more children among those standing in front of him (including himself).\n\nAs their teacher, you need to assign each child a score as follows: the first child's score equals his characteristic value. For any other child, his score equals the maximum, over all children standing before him (excluding himself), of the previous child's score plus his own characteristic value.\n\nPlease compute the maximum score among all children. When outputting, keep the sign of this maximum score, take its absolute value modulo $p$, and output the result with the sign kept.", "inputFormat": "The first line contains two positive integers $n, p$, separated by a space.\n\nThe second line contains $n$ integers, separated by spaces, representing the number held by each child.", "outputFormat": "Output a single integer, which is the maximum score modulo $p$, with its sign preserved.", "hint": "Sample Explanation 1\n\nThe characteristic values of the children are $1, 3, 6, 10, 15$, and the scores are $1, 2, 5, 11, 21$. The maximum value is $21$, and $21 \\bmod 997$ is $21$.\n\nSample Explanation 2\n\nThe characteristic values of the children are $-1, -1, -1, -1, -1$, and the scores are $-1, -2, -2, -2, -2$. The maximum value is $-1$, and $-1 \\bmod 7$ is $-1$, so output $-1$.\n\nConstraints\n\nFor $50\\%$ of the testdata, $1 \\le n \\le 1000$, $1 \\le p \\le 1000$, and the absolute value of every number does not exceed $1000$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le {10}^6$, $1 \\le p \\le {10}^9$, and the absolute value of every other number does not exceed ${10}^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 普及组] 小朋友的数字", "background": "NOIP2013 普及组 T3", "description": "有 $n$ 个小朋友排成一列。每个小朋友手上都有一个数字，这个数字可正可负。规定每个小朋友的特征值等于排在他前面（包括他本人）的小朋友中连续若干个（最少有一个）小朋友手上的数字之和的最大值。\n\n作为这些小朋友的老师，你需要给每个小朋友一个分数，分数是这样规定的：第一个小朋友的分数是他的特征值，其它小朋友的分数为排在他前面的所有小朋友中（不包括他本人），小朋友分数加上其特征值的最大值。\n\n请计算所有小朋友分数的最大值，输出时保持最大值的符号，将其绝对值对 $p$ 取模后输出。\n", "inputFormat": "第一行包含两个正整数 $n,p$，之间用一个空格隔开。\n\n第二行包含 $n$ 个数，每两个整数之间用一个空格隔开，表示每个小朋友手上的数字。\n", "outputFormat": "一个整数，表示最大分数对 $p$ 取模的结果。\n", "hint": "**样例解释 1**\n\n小朋友的特征值分别为 $1,3,6,10,15$，分数分别为 $ 1,2,5,11,21$，最大值 $21$ 对 $997$ 的模是 $21$。\n\n**样例解释 2**\n\n小朋友的特征值分别为 $-1,-1,-1,-1,-1$，分数分别为$-1,-2,-2,-2,-2$，最大值 $-1$ 对 $7$ 的模为 $-1$，输出 $-1$。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le p \\le 1000$，所有数字的绝对值不超过 $1000$；\n\n对于 $100\\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le p \\le {10}^9$，其他数字的绝对值均不超过 ${10}^9$。", "locale": "zh-CN"}}}
{"pid": "P1983", "type": "P", "difficulty": 4, "samples": [["9 2 \n4 1 3 5 6 \n3 3 5 6 ", "2"], ["9 3 \n4 1 3 5 6 \n3 3 5 6 \n3 1 5 9 ", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "贪心", "2013", "NOIP 普及组", "O2优化", "排序", "图论建模", "拓扑排序"], "title": "[NOIP 2013 普及组] 车站分级", "background": "NOIP2013 普及组 T4", "description": "一条单向的铁路线上，依次有编号为 $1, 2, …, n$ 的 $n $ 个火车站。每个火车站都有一个级别，最低为 $1$ 级。现有若干趟车次在这条线路上行驶，每一趟都满足如下要求：如果这趟车次停靠了火车站 $x$，则始发站、终点站之间所有级别大于等于火车站 $x$ 的都必须停靠。  \n注意：起始站和终点站自然也算作事先已知需要停靠的站点。\n\n例如，下表是 $ 5 $ 趟车次的运行情况。其中，前 $ 4$ 趟车次均满足要求，而第 $5$ 趟车次由于停靠了 $3$ 号火车站（$2$ 级）却未停靠途经的 $6$ 号火车站（亦为 $2$ 级）而不满足要求。\n\n\n\n ![](https://cdn.luogu.com.cn/upload/pic/1238.png) \n\n现有 $m$ 趟车次的运行情况（全部满足要求），试推算这 $ n$ 个火车站至少分为几个不同的级别。\n", "inputFormat": "第一行包含 $2$ 个正整数 $n, m$，用一个空格隔开。\n\n第 $i + 1$ 行 $(1 ≤ i ≤ m)$ 中，首先是一个正整数 $s_i\\ (2 ≤ s_i ≤ n)$，表示第 $ i$ 趟车次有 $s_i$ 个停靠站；接下来有 $ s_i$ 个正整数，表示所有停靠站的编号，从小到大排列。每两个数之间用一个空格隔开。输入保证所有的车次都满足要求。\n", "outputFormat": "一个正整数，即 $n$ 个火车站最少划分的级别数。\n", "hint": "对于 $ 20\\%$ 的数据，$1 ≤ n, m ≤ 10$；\n\n对于 $50\\%$ 的数据，$1 ≤ n, m ≤ 100$；\n\n对于 $100\\%$ 的数据，$1 ≤ n, m ≤ 1000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2013 Junior] Station Classification", "background": "NOIP 2013 Junior T4.", "description": "Along a one-way railway line, there are $n$ stations numbered $1, 2, \\dots, n$ in order. Each station has a level, with the minimum level being $1$. There are several train services operating on this line, and each service satisfies the following rule: if the service stops at station $x$, then among the stations between its origin and terminal station, every station whose level is greater than or equal to the level of station $x$ must also be a stop.  \nNote: The origin and terminal stations are, of course, also counted as known stops.\n\nFor example, the table below shows the operation of $5$ services. Among them, the first $4$ services satisfy the rule, while the $5$-th service does not, because it stops at station $3$ (level $2$) but skips station $6$ (also level $2$) along the route.\n\n![](https://cdn.luogu.com.cn/upload/pic/1238.png)\n\nGiven the operation of $m$ services (all of which satisfy the rule), determine the minimum number of distinct levels needed for these $n$ stations.", "inputFormat": "The first line contains $2$ positive integers $n, m$, separated by a space.\n\nOn line $i + 1$ for $1 \\le i \\le m$, first there is a positive integer $s_i$ ($2 \\le s_i \\le n$), indicating that the $i$-th service has $s_i$ stops; then follow $s_i$ positive integers, the indices of all stops, in increasing order. Each pair of numbers is separated by a single space. The input guarantees that all services satisfy the rule.", "outputFormat": "Output a single integer, the minimum number of levels into which the $n$ stations can be partitioned.", "hint": "For $20\\%$ of the testdata, $1 \\le n, m \\le 10$.\n\nFor $50\\%$ of the testdata, $1 \\le n, m \\le 100$.\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2013 普及组] 车站分级", "background": "NOIP2013 普及组 T4", "description": "一条单向的铁路线上，依次有编号为 $1, 2, …, n$ 的 $n $ 个火车站。每个火车站都有一个级别，最低为 $1$ 级。现有若干趟车次在这条线路上行驶，每一趟都满足如下要求：如果这趟车次停靠了火车站 $x$，则始发站、终点站之间所有级别大于等于火车站 $x$ 的都必须停靠。  \n注意：起始站和终点站自然也算作事先已知需要停靠的站点。\n\n例如，下表是 $ 5 $ 趟车次的运行情况。其中，前 $ 4$ 趟车次均满足要求，而第 $5$ 趟车次由于停靠了 $3$ 号火车站（$2$ 级）却未停靠途经的 $6$ 号火车站（亦为 $2$ 级）而不满足要求。\n\n\n\n ![](https://cdn.luogu.com.cn/upload/pic/1238.png) \n\n现有 $m$ 趟车次的运行情况（全部满足要求），试推算这 $ n$ 个火车站至少分为几个不同的级别。\n", "inputFormat": "第一行包含 $2$ 个正整数 $n, m$，用一个空格隔开。\n\n第 $i + 1$ 行 $(1 ≤ i ≤ m)$ 中，首先是一个正整数 $s_i\\ (2 ≤ s_i ≤ n)$，表示第 $ i$ 趟车次有 $s_i$ 个停靠站；接下来有 $ s_i$ 个正整数，表示所有停靠站的编号，从小到大排列。每两个数之间用一个空格隔开。输入保证所有的车次都满足要求。\n", "outputFormat": "一个正整数，即 $n$ 个火车站最少划分的级别数。\n", "hint": "对于 $ 20\\%$ 的数据，$1 ≤ n, m ≤ 10$；\n\n对于 $50\\%$ 的数据，$1 ≤ n, m ≤ 100$；\n\n对于 $100\\%$ 的数据，$1 ≤ n, m ≤ 1000$。\n", "locale": "zh-CN"}}}
