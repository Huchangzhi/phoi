{"pid": "P5892", "type": "P", "difficulty": 6, "samples": [["5 2 7\n10 2 20 30 1\n", "60\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2014", "IOI", "决策单调性"], "title": "[IOI 2014] holiday 假期", "background": null, "description": "健佳正在制定下个假期去台湾的游玩计划。在这个假期，健佳将会在城市之间奔波，并且参观这些城市的景点。\n\n在台湾共有 $n$ 个城市，它们全部位于一条高速公路上。这些城市连续地编号为 $0$ 到 $n-1$。\n\n对于城市 $i$（$0 < i < n-1$）而言，与其相邻的城市是 $i-1$ 和 $i+1$。但是对于城市 $0$，唯一与其相邻的是城市 $1$。而对于城市 $n-1$，唯一与其相邻的是城市 $n-2$。\n\n每个城市都有若干景点。健佳有 $d$ 天假期并且打算要参观尽量多的景点。健佳已经选择了假期开始要到访的第一个城市。在假期的每一天，健佳可以选择去一个相邻的城市，或者参观所在城市的所有景点，但是不能同时进行。即使健佳在同一个城市停留多次，他也不会去重复参观该城市的景点。请帮助健佳策划这个假期，以便能让他参观尽可能多的景点。", "inputFormat": "- 第 $1$ 行：有三个非负整数，$n$ 代表城市数目，$\\text{start}$ 代表起点城市编号，$d$ 代表假期天数。\n- 第 $2$ 行：$n$ 个非负整数 $a_0,a_1,\\cdots, a_{n-1}$，对于 $0 \\le i \\le n-1$，$a_i$ 代表城市 $i$ 的景点数目。", "outputFormat": "- 共一行，最多参观的景点数目。", "hint": "**子任务**\n\n在所有的子任务中，有 $0 \\le d \\le 2n+\\lfloor\\frac n2\\rfloor$。而且，每个城市中的景点数都是非负整数。\n\n| 子任务 | 分值 | $n$ | 各城市景点数的最大值 | 起点城市 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $2 \\le n \\le 20$ | $10^9$ | 无限制 |\n| $2$ | $23$ | $2 \\le n \\le 10^5$ | $100$ | 城市 $0$ |\n| $3$ | $17$ | $2 \\le n \\le 3 \\times 10 ^3$ | $10^9$ |无限制  |\n| $4$ | $53$ | $2 \\le n \\le 10^5$ | $10^9$ | 无限制 |", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2014] holiday Vacation.", "background": "", "description": "Jianjia is planning a trip to Taiwan for the next vacation. During this vacation, Jianjia will travel between cities and visit attractions in those cities.\n\nThere are $n$ cities in Taiwan, all located along a single highway. The cities are numbered consecutively from $0$ to $n-1$.\n\nFor city $i$ ($0 < i < n-1$), its neighboring cities are $i-1$ and $i+1$. For city $0$, the only neighboring city is $1$. For city $n-1$, the only neighboring city is $n-2$.\n\nEach city has some attractions. Jianjia has $d$ days of vacation and wants to visit as many attractions as possible. He has already chosen the first city to visit at the start of the vacation. On each day of the vacation, Jianjia can either move to a neighboring city, or visit all attractions in the current city, but not both. Even if Jianjia stays in the same city multiple times, he will not visit the attractions of that city again. Please help Jianjia plan this vacation so that he can visit as many attractions as possible.", "inputFormat": "- Line $1$: Three non-negative integers, where $n$ is the number of cities, $\\text{start}$ is the index of the starting city, and $d$ is the number of vacation days.\n- Line $2$: $n$ non-negative integers $a_0,a_1,\\cdots, a_{n-1}$. For $0 \\le i \\le n-1$, $a_i$ is the number of attractions in city $i$.", "outputFormat": "- One line: the maximum number of attractions that can be visited.", "hint": "**Subtasks**\n\nIn all subtasks, $0 \\le d \\le 2n+\\lfloor\\frac n2\\rfloor$. Also, the number of attractions in each city is a non-negative integer.\n\n| Subtask | Score | $n$ | Maximum attractions in each city | Starting city |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $2 \\le n \\le 20$ | $10^9$ | No restriction |\n| $2$ | $23$ | $2 \\le n \\le 10^5$ | $100$ | City $0$ |\n| $3$ | $17$ | $2 \\le n \\le 3 \\times 10 ^3$ | $10^9$ | No restriction |\n| $4$ | $53$ | $2 \\le n \\le 10^5$ | $10^9$ | No restriction |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2014] holiday 假期", "background": null, "description": "健佳正在制定下个假期去台湾的游玩计划。在这个假期，健佳将会在城市之间奔波，并且参观这些城市的景点。\n\n在台湾共有 $n$ 个城市，它们全部位于一条高速公路上。这些城市连续地编号为 $0$ 到 $n-1$。\n\n对于城市 $i$（$0 < i < n-1$）而言，与其相邻的城市是 $i-1$ 和 $i+1$。但是对于城市 $0$，唯一与其相邻的是城市 $1$。而对于城市 $n-1$，唯一与其相邻的是城市 $n-2$。\n\n每个城市都有若干景点。健佳有 $d$ 天假期并且打算要参观尽量多的景点。健佳已经选择了假期开始要到访的第一个城市。在假期的每一天，健佳可以选择去一个相邻的城市，或者参观所在城市的所有景点，但是不能同时进行。即使健佳在同一个城市停留多次，他也不会去重复参观该城市的景点。请帮助健佳策划这个假期，以便能让他参观尽可能多的景点。", "inputFormat": "- 第 $1$ 行：有三个非负整数，$n$ 代表城市数目，$\\text{start}$ 代表起点城市编号，$d$ 代表假期天数。\n- 第 $2$ 行：$n$ 个非负整数 $a_0,a_1,\\cdots, a_{n-1}$，对于 $0 \\le i \\le n-1$，$a_i$ 代表城市 $i$ 的景点数目。", "outputFormat": "- 共一行，最多参观的景点数目。", "hint": "**子任务**\n\n在所有的子任务中，有 $0 \\le d \\le 2n+\\lfloor\\frac n2\\rfloor$。而且，每个城市中的景点数都是非负整数。\n\n| 子任务 | 分值 | $n$ | 各城市景点数的最大值 | 起点城市 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $2 \\le n \\le 20$ | $10^9$ | 无限制 |\n| $2$ | $23$ | $2 \\le n \\le 10^5$ | $100$ | 城市 $0$ |\n| $3$ | $17$ | $2 \\le n \\le 3 \\times 10 ^3$ | $10^9$ |无限制  |\n| $4$ | $53$ | $2 \\le n \\le 10^5$ | $10^9$ | 无限制 |", "locale": "zh-CN"}}}
{"pid": "P5893", "type": "P", "difficulty": 6, "samples": [["1 1 64\n2 0 0 0 0\n2 0 0 0 0\n2 0 0 0 0\n1 0 0 5352072091165800\n2 0 0 0 0\n1 0 0 15571253006461152\n1 0 0 36204425277916896\n1 0 0 80686018200191040\n1 0 0 720602986354563312\n2 0 0 0 0\n1 0 0 90705271009665312\n2 0 0 0 0\n1 0 0 583803309300971760\n1 0 0 3317329660750560\n2 0 0 0 0\n2 0 0 0 0\n2 0 0 0 0\n1 0 0 84776821924066272\n1 0 0 581927323100969664\n1 0 0 93139161501610224\n1 0 0 28340661117472704\n1 0 0 74529074218959360\n2 0 0 0 0\n1 0 0 462419028676725120\n1 0 0 4416867915235776\n1 0 0 840475934823549024\n1 0 0 8247617084266560\n1 0 0 117571055091706944\n1 0 0 839204903894797440\n1 0 0 820805176764813240\n1 0 0 82688722861897152\n1 0 0 136422472061715840\n1 0 0 555837014267982720\n1 0 0 935087613488388360\n1 0 0 17770822018565616\n1 0 0 10726679222715456\n1 0 0 621229604181863040\n1 0 0 12477973789689408\n2 0 0 0 0\n1 0 0 227153207069268480\n1 0 0 262037449583477568\n1 0 0 562837835495871936\n1 0 0 131875056326325312\n1 0 0 922430858108760\n1 0 0 763487168205041280\n2 0 0 0 0\n2 0 0 0 0\n1 0 0 551850903114166656\n1 0 0 243713152409807808\n1 0 0 306811355534716032\n1 0 0 115604757169181280\n2 0 0 0 0\n1 0 0 29254579698314880\n1 0 0 35080064244441216\n1 0 0 97819409912384160\n1 0 0 34259332503876480\n2 0 0 0 0\n2 0 0 0 0\n1 0 0 159548730492191040\n1 0 0 11555364984947784\n2 0 0 0 0\n1 0 0 3373083100427040\n2 0 0 0 0\n2 0 0 0 0\n", "0\n0\n0\n5352072091165800\n720602986354563312\n90705271009665312\n3317329660750560\n3317329660750560\n3317329660750560\n74529074218959360\n12477973789689408\n763487168205041280\n763487168205041280\n115604757169181280\n34259332503876480\n34259332503876480\n11555364984947784\n3373083100427040\n3373083100427040\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520, 235520]}, "tags": ["2013", "IOI", "O2优化"], "title": "[IOI 2013] game 游戏", "background": "警告：**滥用本题评测将被封号**。", "description": "Bazza 和 Shazza 正在玩游戏。游戏在一个 $R$ 行 $C$ 列的网格上进行。其中， $R$ 行编号为 $0,\\cdots, R - 1 $， $C$ 列编号为 $0,\\cdots, C - 1 $。我们用 $(P, Q)$ 表示位于 $P$ 行 $Q$ 列的单元格。每个单元格包含一个非负整数，游戏开始时所有单元格内的整数均为零。\n\n游戏如下进行：任意时刻，Bazza 可以做如下动作之一：\n- 修改一个单元格 $(p, q)$ 内包含的整数值；\n- 要求 Shazza 计算一个给定子矩阵中所有单元格内数字的最大公约数（GCD），子矩阵的两个对角分别为 $(p, q)$ 和 $(u, v)$ （子矩阵包含给定的两个对角点）。\n\nBazza 会做 $N_U + N_Q$ 次动作(其中，修改单元格内数据 $N_U$ 次，询问 GCD $N_Q$ 次) 。\n\n你的任务是对 Bazza 提出的问题给出正确答案。", "inputFormat": "- 第1行: $R$ 表示网格行数，$C$ 表示网格列数，$N$ 表示操作总数。\n- 接下来的 $N$ 行: 每行表示一个动作，以动作发生的先后顺序给出。\n\n表示每个动作的一行的格式如下：\n- `update(P,Q,K)` 表示为： `1 P Q K`\n- `calculate(P,Q,U,V)` 表示为： `2 P Q U V`\n\n", "outputFormat": "共 $N_Q$ 行，对于每次询问，输出答案。\n\n**说明**\n\n`update(P,Q,K)`\n\n- 当Bazza改变单元格中的整数时调用此函数，即把第 $P$ 行第 $Q$ 列的数改为 $K$。\n- $P$: 单元格的行号（$0 \\le P \\le R - 1$ ）。\n- $Q$: 单元格的列号（$0 \\le Q \\le C - 1$ ）。\n- $K$: 这个单元格中新的整数（ $0 \\le K \\le 10^{18}$）。这个新整数可能与原来的整数相同。\n\n`calculate(P,Q,U,V)`\n\n- 该函数计算以 $(P, Q)$ 和 $(U, V)$ 为对角点的子矩阵中所有整数的最大公约数。这个范围是包含单元格 $(P, Q)$ 和 $(U, V)$ 的。\n\n- 如果这个子矩阵中的所有整数都是 $0$，那么该函数返回 $0$。\n\n- $P$: 子矩阵左上角单元格的行号（ $0 \\le P \\le R - 1$ ）。\n- $Q$: 子矩阵左上角单元格的列号 （$ 0 \\le Q \\le C - 1$ ）。\n- $U$: 子矩阵右下角单元格的行号（ $P \\le U \\le R - 1$ ）。\n- $V$: 子矩阵右下角单元格的列号（ $Q \\le V \\le C - 1$ ）。", "hint": "**子任务**\n\n| 子任务 | 分数 | $R$ | $C$ | $N_U$ | $N_Q$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $2$ | $27$ | $\\le 10$ | $\\le 10^5$ | $\\le 10^4$ | $\\le 2.5\\times 10^5$ |\n| $3$ | $26$ | $\\le 2 \\times 10^3$ | $\\le 2 \\times 10^3$ | $\\le 10^4$ | $\\le 2.5 \\times 10^5$ |\n| $4$ | $17$ | $\\le 10^9$ | $\\le 10^9$ | $\\le 10^4$ | $\\le 2.5 \\times 10^5$ |\n| $5$ | $20$ | $\\le 10^9$ | $\\le 10^9$ | $\\le 2.2 \\times 10^4$ | $\\le 2.5 \\times 10^5$ |\n\n**限制**\n\n对于 $100\\%$ 的数据，$1 \\le R,C \\le 10^9$，$0 \\le K \\le 10^{18}$，$K$ 表示 Bazza 放到单元格中的数字。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2013] game", "background": "Warning: **Abusing the judge for this problem will result in your account being banned**.", "description": "Bazza and Shazza are playing a game. The game is played on a grid with $R$ rows and $C$ columns. The $R$ rows are numbered $0,\\cdots, R - 1$, and the $C$ columns are numbered $0,\\cdots, C - 1$. We use $(P, Q)$ to denote the cell located in row $P$ and column $Q$. Each cell contains a non-negative integer, and at the start of the game, all integers in all cells are zero.\n\nThe game proceeds as follows: at any time, Bazza can perform one of the following actions:\n- Modify the integer value contained in a cell $(p, q)$.\n- Ask Shazza to compute the greatest common divisor (GCD) of all numbers in a given submatrix, whose two opposite corners are $(p, q)$ and $(u, v)$ (the submatrix includes these two corner cells).\n\nBazza will perform a total of $N_U + N_Q$ actions (including $N_U$ cell updates and $N_Q$ GCD queries).\n\nYour task is to output the correct answer for each question asked by Bazza.", "inputFormat": "- Line 1: $R$ is the number of rows in the grid, $C$ is the number of columns in the grid, and $N$ is the total number of operations.\n- The next $N$ lines: each line describes an action, given in the order they occur.\n\nThe format of each action line is:\n- `update(P,Q,K)` is given as: `1 P Q K`.\n- `calculate(P,Q,U,V)` is given as: `2 P Q U V`.", "outputFormat": "There are $N_Q$ lines. For each query, output the answer.\n\n**Notes**\n\n`update(P,Q,K)`\n\n- This function is called when Bazza changes the integer in a cell, i.e. set the number in row $P$, column $Q$ to $K$.\n- $P$: the row index of the cell ($0 \\le P \\le R - 1$).\n- $Q$: the column index of the cell ($0 \\le Q \\le C - 1$).\n- $K$: the new integer in this cell ($0 \\le K \\le 10^{18}$). This new integer may be the same as the previous one.\n\n`calculate(P,Q,U,V)`\n\n- This function computes the GCD of all integers in the submatrix with corners $(P, Q)$ and $(U, V)$. This range includes the cells $(P, Q)$ and $(U, V)$.\n\n- If all integers in this submatrix are $0$, then this function returns $0$.\n\n- $P$: the row index of the top-left cell of the submatrix ($0 \\le P \\le R - 1$).\n- $Q$: the column index of the top-left cell of the submatrix ($0 \\le Q \\le C - 1$).\n- $U$: the row index of the bottom-right cell of the submatrix ($P \\le U \\le R - 1$).\n- $V$: the column index of the bottom-right cell of the submatrix ($Q \\le V \\le C - 1$).", "hint": "**Subtasks**\n\n| Subtask | Score | $R$ | $C$ | $N_U$ | $N_Q$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $2$ | $27$ | $\\le 10$ | $\\le 10^5$ | $\\le 10^4$ | $\\le 2.5\\times 10^5$ |\n| $3$ | $26$ | $\\le 2 \\times 10^3$ | $\\le 2 \\times 10^3$ | $\\le 10^4$ | $\\le 2.5 \\times 10^5$ |\n| $4$ | $17$ | $\\le 10^9$ | $\\le 10^9$ | $\\le 10^4$ | $\\le 2.5 \\times 10^5$ |\n| $5$ | $20$ | $\\le 10^9$ | $\\le 10^9$ | $\\le 2.2 \\times 10^4$ | $\\le 2.5 \\times 10^5$ |\n\n**Constraints**\n\nFor $100\\%$ of the testdata, $1 \\le R,C \\le 10^9$, $0 \\le K \\le 10^{18}$, where $K$ is the number Bazza puts into a cell.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2013] game 游戏", "background": "警告：**滥用本题评测将被封号**。", "description": "Bazza 和 Shazza 正在玩游戏。游戏在一个 $R$ 行 $C$ 列的网格上进行。其中， $R$ 行编号为 $0,\\cdots, R - 1 $， $C$ 列编号为 $0,\\cdots, C - 1 $。我们用 $(P, Q)$ 表示位于 $P$ 行 $Q$ 列的单元格。每个单元格包含一个非负整数，游戏开始时所有单元格内的整数均为零。\n\n游戏如下进行：任意时刻，Bazza 可以做如下动作之一：\n- 修改一个单元格 $(p, q)$ 内包含的整数值；\n- 要求 Shazza 计算一个给定子矩阵中所有单元格内数字的最大公约数（GCD），子矩阵的两个对角分别为 $(p, q)$ 和 $(u, v)$ （子矩阵包含给定的两个对角点）。\n\nBazza 会做 $N_U + N_Q$ 次动作(其中，修改单元格内数据 $N_U$ 次，询问 GCD $N_Q$ 次) 。\n\n你的任务是对 Bazza 提出的问题给出正确答案。", "inputFormat": "- 第1行: $R$ 表示网格行数，$C$ 表示网格列数，$N$ 表示操作总数。\n- 接下来的 $N$ 行: 每行表示一个动作，以动作发生的先后顺序给出。\n\n表示每个动作的一行的格式如下：\n- `update(P,Q,K)` 表示为： `1 P Q K`\n- `calculate(P,Q,U,V)` 表示为： `2 P Q U V`\n\n", "outputFormat": "共 $N_Q$ 行，对于每次询问，输出答案。\n\n**说明**\n\n`update(P,Q,K)`\n\n- 当Bazza改变单元格中的整数时调用此函数，即把第 $P$ 行第 $Q$ 列的数改为 $K$。\n- $P$: 单元格的行号（$0 \\le P \\le R - 1$ ）。\n- $Q$: 单元格的列号（$0 \\le Q \\le C - 1$ ）。\n- $K$: 这个单元格中新的整数（ $0 \\le K \\le 10^{18}$）。这个新整数可能与原来的整数相同。\n\n`calculate(P,Q,U,V)`\n\n- 该函数计算以 $(P, Q)$ 和 $(U, V)$ 为对角点的子矩阵中所有整数的最大公约数。这个范围是包含单元格 $(P, Q)$ 和 $(U, V)$ 的。\n\n- 如果这个子矩阵中的所有整数都是 $0$，那么该函数返回 $0$。\n\n- $P$: 子矩阵左上角单元格的行号（ $0 \\le P \\le R - 1$ ）。\n- $Q$: 子矩阵左上角单元格的列号 （$ 0 \\le Q \\le C - 1$ ）。\n- $U$: 子矩阵右下角单元格的行号（ $P \\le U \\le R - 1$ ）。\n- $V$: 子矩阵右下角单元格的列号（ $Q \\le V \\le C - 1$ ）。", "hint": "**子任务**\n\n| 子任务 | 分数 | $R$ | $C$ | $N_U$ | $N_Q$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $2$ | $27$ | $\\le 10$ | $\\le 10^5$ | $\\le 10^4$ | $\\le 2.5\\times 10^5$ |\n| $3$ | $26$ | $\\le 2 \\times 10^3$ | $\\le 2 \\times 10^3$ | $\\le 10^4$ | $\\le 2.5 \\times 10^5$ |\n| $4$ | $17$ | $\\le 10^9$ | $\\le 10^9$ | $\\le 10^4$ | $\\le 2.5 \\times 10^5$ |\n| $5$ | $20$ | $\\le 10^9$ | $\\le 10^9$ | $\\le 2.2 \\times 10^4$ | $\\le 2.5 \\times 10^5$ |\n\n**限制**\n\n对于 $100\\%$ 的数据，$1 \\le R,C \\le 10^9$，$0 \\le K \\le 10^{18}$，$K$ 表示 Bazza 放到单元格中的数字。", "locale": "zh-CN"}}}
{"pid": "P5894", "type": "P", "difficulty": 5, "samples": [["3 2 10\n6 2 9\n4 7\n4 6\n8 5\n2 3\n7 9\n1 8\n5 1\n3 3\n8 7\n7 6\n10 5\n\n", "3"], ["2 1 3\n2 5\n2\n3 1\n5 3\n2 2\n", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2013", "二分", "IOI", "O2优化", "优先队列"], "title": "[IOI 2013] robots 机器人", "background": "", "description": "Marita 的弟弟把玩具扔在客厅地板上，乱七八糟。庆幸的是，Marita 设计了一种特殊的机器人可以收拾玩具。 不过，她需要确定哪个机器人去拣起哪个玩具。\n\n一共有 $T$ 个玩具,整数 $W[i]$ 表示这个玩具的重量，整数 $S[i]$ 表示这个玩具的体积。机器人有两种，分别是：弱机器人和小机器人。\n\n- 有 $A$ 个弱机器人。每个弱机器人有一个重量限制 $X[i] $，它只能拿起重量严格小于 $X[i]$ 的玩具，与玩具的体积大小没关系。\n- 有 $B$ 个小机器人。每个小机器人有一个体积限制 $Y[i] $，它只能拿起体积严格小于 $Y[i]$ 的玩具，与玩具的重量大小没有关系。\n\nMarita 的每个机器人用 $1$ 分钟将一个玩具拿走放好。不同的机器人可以同时拿走并放好不同的玩具。\n\n你的任务是确定 Marita 的机器人是否可以将所有的玩具都收拾好，如果是，那么最少用多少时间可以收拾好。\n", "inputFormat": "- 第1行: $A$ 表示弱机器人的数目，$B$ 表示小机器人的数目，$T$ 表示玩具的数目；\n- 第2行: 长度为 $A$ 的数组 $X[0],\\cdots,X[A­-1]$，对于 $0 \\le i \\le A-1$，$X[i]$ 表示第 $i$ 个弱机器人的重量限制；\n- 第3行: 长度为 $B$ 的数组 $Y[0],\\cdots,Y[B-­1]$，对于 $1 \\le i \\le B-1$，$Y[i]$ 表示第 $i$ 个小机器人的体积限制；\n- 接下来 $T$ 行: $W[i]$，$S[i]$，对于 $1 \\le i \\le T$，$W[i]$ 代表第 $i$ 个玩具的重量，$S[i]$ 代表第 $i$ 个玩具的体积。\n\n- 如果 $A = 0$ 或者 $B = 0$ ，那么相应的行（第 $2$ 行或者第 $3$ 行）为空。\n", "outputFormat": "- 共 $1$ 行，输出机器人收拾好所有玩具所需要的最短时间，如果无法收拾好所有玩具，输出 `­-1`。", "hint": "对于 $100\\%$ 的数据，$1 \\le T \\le 10^6$，$0 \\le A,B \\le 5 \\times 10^4$ 且 $1 \\le A+B$，$1 \\le X[i],Y[i],W[i],S[i] \\le 2 \\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2013] robots Robots", "background": "", "description": "Marita’s younger brother has thrown toys all over the living room floor, making a big mess. Luckily, Marita has designed special robots that can put the toys away. However, she needs to decide which robot should pick up which toy.\n\nThere are $T$ toys. Integer $W[i]$ represents the weight of the $i$-th toy, and integer $S[i]$ represents the volume of the $i$-th toy. There are two kinds of robots: weak robots and small robots.\n\n- There are $A$ weak robots. Each weak robot has a weight limit $X[i]$. It can only pick up toys with weight strictly less than $X[i]$, regardless of the toy’s volume.\n- There are $B$ small robots. Each small robot has a volume limit $Y[i]$. It can only pick up toys with volume strictly less than $Y[i]$, regardless of the toy’s weight.\n\nEach of Marita’s robots takes $1$ minute to carry one toy away and put it in place. Different robots can carry away and put away different toys at the same time.\n\nYour task is to determine whether Marita’s robots can put away all the toys. If yes, find the minimum time needed.", "inputFormat": "- Line 1: $A$ is the number of weak robots, $B$ is the number of small robots, and $T$ is the number of toys.\n- Line 2: An array of length $A$, $X[0],\\cdots,X[A-1]$. For $0 \\le i \\le A-1$, $X[i]$ is the weight limit of the $i$-th weak robot.\n- Line 3: An array of length $B$, $Y[0],\\cdots,Y[B-1]$. For $0 \\le i \\le B-1$, $Y[i]$ is the volume limit of the $i$-th small robot.\n- The next $T$ lines: $W[i]$, $S[i]$. For $1 \\le i \\le T$, $W[i]$ is the weight of the $i$-th toy, and $S[i]$ is the volume of the $i$-th toy.\n\n- If $A = 0$ or $B = 0$, then the corresponding line (line 2 or line 3) is empty.", "outputFormat": "- One line. Output the minimum time needed for the robots to put away all toys. If it is impossible to put away all toys, output `-1`.", "hint": "For $100\\%$ of the testdata, $1 \\le T \\le 10^6$, $0 \\le A,B \\le 5 \\times 10^4$, and $1 \\le A+B$, $1 \\le X[i],Y[i],W[i],S[i] \\le 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2013] robots 机器人", "background": "", "description": "Marita 的弟弟把玩具扔在客厅地板上，乱七八糟。庆幸的是，Marita 设计了一种特殊的机器人可以收拾玩具。 不过，她需要确定哪个机器人去拣起哪个玩具。\n\n一共有 $T$ 个玩具,整数 $W[i]$ 表示这个玩具的重量，整数 $S[i]$ 表示这个玩具的体积。机器人有两种，分别是：弱机器人和小机器人。\n\n- 有 $A$ 个弱机器人。每个弱机器人有一个重量限制 $X[i] $，它只能拿起重量严格小于 $X[i]$ 的玩具，与玩具的体积大小没关系。\n- 有 $B$ 个小机器人。每个小机器人有一个体积限制 $Y[i] $，它只能拿起体积严格小于 $Y[i]$ 的玩具，与玩具的重量大小没有关系。\n\nMarita 的每个机器人用 $1$ 分钟将一个玩具拿走放好。不同的机器人可以同时拿走并放好不同的玩具。\n\n你的任务是确定 Marita 的机器人是否可以将所有的玩具都收拾好，如果是，那么最少用多少时间可以收拾好。\n", "inputFormat": "- 第1行: $A$ 表示弱机器人的数目，$B$ 表示小机器人的数目，$T$ 表示玩具的数目；\n- 第2行: 长度为 $A$ 的数组 $X[0],\\cdots,X[A­-1]$，对于 $0 \\le i \\le A-1$，$X[i]$ 表示第 $i$ 个弱机器人的重量限制；\n- 第3行: 长度为 $B$ 的数组 $Y[0],\\cdots,Y[B-­1]$，对于 $1 \\le i \\le B-1$，$Y[i]$ 表示第 $i$ 个小机器人的体积限制；\n- 接下来 $T$ 行: $W[i]$，$S[i]$，对于 $1 \\le i \\le T$，$W[i]$ 代表第 $i$ 个玩具的重量，$S[i]$ 代表第 $i$ 个玩具的体积。\n\n- 如果 $A = 0$ 或者 $B = 0$ ，那么相应的行（第 $2$ 行或者第 $3$ 行）为空。\n", "outputFormat": "- 共 $1$ 行，输出机器人收拾好所有玩具所需要的最短时间，如果无法收拾好所有玩具，输出 `­-1`。", "hint": "对于 $100\\%$ 的数据，$1 \\le T \\le 10^6$，$0 \\le A,B \\le 5 \\times 10^4$ 且 $1 \\le A+B$，$1 \\le X[i],Y[i],W[i],S[i] \\le 2 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P5895", "type": "P", "difficulty": 4, "samples": [["12 8 2\n0 8 4\n8 2 2\n2 7 4\n5 11 3\n5 1 7\n1 3 1\n1 9 5\n10 6 3\n", "18\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["贪心", "2013", "IOI", "树的直径"], "title": "[IOI 2013] dreaming 梦想", "background": "", "description": "天地之初，IOI 尚在遥远的梦想之中。\n\nSerpent(水蛇) 生活的地方有 $N$ 个水坑，编号为 $0，\\cdots，N - 1$，有 $M$ 条双向小路连接\n这些水坑。每两个水坑之间至多有一条路径（路径包含一条或多条小路）相互连接，有些水坑之间根本无法互通(即 $M ≤ N-1$ )。Serpent 走过每条小路需要一个固定的天数，不同的小路需要的天数可能不同。\n\nSerpent 的朋友袋鼠希望新修 $N - M - 1$ 条小路，让Serpent 可以在任何两个水坑间游走。袋鼠可以在任意两个水坑之间修路，Serpent 通过每条新路的时间都是 $L$ 天。\n\n袋鼠希望找到一种修路方式使得修路之后 Serpent 在每两个水坑之间游走的最长时间最短。\n\n**举例说明**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3ahroenu.png)\n\n\n上图中有 $12$ 个水坑 $8$ 条小路 ($N = 12 , M = 8$)。假如 $L = 2$，即 Serpent 通过任何一条新路都需要 $2$ 天。那么，袋鼠可以修建 $3$ 条新路：\n- 水坑 $1$ 和水坑 $2$ 之间；\n- 水坑 $1$ 和水坑 $6$ 之间；\n- 水坑 $4$ 和水坑 $10$ 之间。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/udp17aas.png)\n\n上图显示了修路后的最终状态。从水坑 $0$ 走到水坑 $11$ 的时间最长，需要 $18$ 天。这是最佳结果，无论袋鼠如何选择修路方式，总会存在一些水坑对，Serpent 需要 $18$ 天或者更长时间从其中一个走到另一个。", "inputFormat": "- 第 $1$ 行: $N$ 表示水坑的数目，$M$ 表示原本存在的小路的数目，$L$ 表示 Serpent 通过新修的路径的时间。\n- 第 $2,\\cdots, M + 1$ 行: $A[i]$，$B[i]$，$T[i]$。$A$，$B$，$T$ 分别为三个包含 $M$ 个元素的数组，分别表示每条小路的两个端点和通过这条小路的时间。例如，第 $i$ 条小路连接水坑 $A[i-1]$ 和水坑 $B[i-1]$，通过这条小路的时间是 $T[i-1]$ 天。\n\n\n例如：题目中的例子应该表示为以下格式\n\n```\n12 8 2\n0 8 4\n8 2 2\n2 7 4\n5 11 3\n5 1 7\n1 3 1\n1 9 5\n10 6 3\n```", "outputFormat": "如上所述，表示游走于两个距离最远的水坑之间所需的时间", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le M \\le N-1$，$0 \\le A[i],B[i] \\le N-1$，$1 \\le T[i] \\le 10^4$，$1 \\le L \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2013] dreaming Dreams", "background": "", "description": "At the beginning of the world, IOI was still a distant dream.\n\nThere are $N$ ponds where Serpent (the water snake) lives, numbered $0, \\cdots, N - 1$, and there are $M$ undirected paths connecting these ponds. Between any two ponds, there is at most one route (a route consists of one or more paths) connecting them, and some ponds cannot reach each other at all (that is, $M \\le N - 1$). It takes Serpent a fixed number of days to walk along each path, and different paths may take different numbers of days.\n\nSerpent's friend Kangaroo wants to build $N - M - 1$ new paths so that Serpent can travel between any two ponds. Kangaroo may build a path between any two ponds, and the time for Serpent to travel along each new path is always $L$ days.\n\nKangaroo wants to find a way to build the paths such that, after building them, the maximum travel time between any two ponds is as small as possible.\n\n**Example**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3ahroenu.png)\n\nIn the figure above, there are $12$ ponds and $8$ paths ($N = 12, M = 8$). Suppose $L = 2$, meaning Serpent needs $2$ days to travel along any new path. Then Kangaroo can build $3$ new paths:\n- between pond $1$ and pond $2$;\n- between pond $1$ and pond $6$;\n- between pond $4$ and pond $10$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/udp17aas.png)\n\nThe figure above shows the final state after building the paths. The longest travel time is from pond $0$ to pond $11$, which takes $18$ days. This is the best possible result: no matter how Kangaroo chooses to build the paths, there will always be some pair of ponds for which Serpent needs at least $18$ days to travel from one to the other.", "inputFormat": "- Line $1$: $N$ is the number of ponds, $M$ is the number of existing paths, and $L$ is the time for Serpent to travel along a newly built path.\n- Lines $2, \\cdots, M + 1$: $A[i]$, $B[i]$, $T[i]$. $A$, $B$, and $T$ are three arrays of length $M$, representing the two endpoints of each path and the time to travel along it. For example, the $i$-th path connects pond $A[i-1]$ and pond $B[i-1]$, and it takes $T[i-1]$ days to travel along this path.\n\nFor example, the sample in the statement should be written in the following format:\n\n```\n12 8 2\n0 8 4\n8 2 2\n2 7 4\n5 11 3\n5 1 7\n1 3 1\n1 9 5\n10 6 3\n```", "outputFormat": "As described above, output the time required to travel between the two farthest ponds (i.e., the maximum travel time between any two ponds).", "hint": "Constraints for $100\\%$ of the data: $1 \\le N \\le 10^5$, $0 \\le M \\le N-1$, $0 \\le A[i],B[i] \\le N-1$, $1 \\le T[i] \\le 10^4$, $1 \\le L \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2013] dreaming 梦想", "background": "", "description": "天地之初，IOI 尚在遥远的梦想之中。\n\nSerpent(水蛇) 生活的地方有 $N$ 个水坑，编号为 $0，\\cdots，N - 1$，有 $M$ 条双向小路连接\n这些水坑。每两个水坑之间至多有一条路径（路径包含一条或多条小路）相互连接，有些水坑之间根本无法互通(即 $M ≤ N-1$ )。Serpent 走过每条小路需要一个固定的天数，不同的小路需要的天数可能不同。\n\nSerpent 的朋友袋鼠希望新修 $N - M - 1$ 条小路，让Serpent 可以在任何两个水坑间游走。袋鼠可以在任意两个水坑之间修路，Serpent 通过每条新路的时间都是 $L$ 天。\n\n袋鼠希望找到一种修路方式使得修路之后 Serpent 在每两个水坑之间游走的最长时间最短。\n\n**举例说明**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3ahroenu.png)\n\n\n上图中有 $12$ 个水坑 $8$ 条小路 ($N = 12 , M = 8$)。假如 $L = 2$，即 Serpent 通过任何一条新路都需要 $2$ 天。那么，袋鼠可以修建 $3$ 条新路：\n- 水坑 $1$ 和水坑 $2$ 之间；\n- 水坑 $1$ 和水坑 $6$ 之间；\n- 水坑 $4$ 和水坑 $10$ 之间。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/udp17aas.png)\n\n上图显示了修路后的最终状态。从水坑 $0$ 走到水坑 $11$ 的时间最长，需要 $18$ 天。这是最佳结果，无论袋鼠如何选择修路方式，总会存在一些水坑对，Serpent 需要 $18$ 天或者更长时间从其中一个走到另一个。", "inputFormat": "- 第 $1$ 行: $N$ 表示水坑的数目，$M$ 表示原本存在的小路的数目，$L$ 表示 Serpent 通过新修的路径的时间。\n- 第 $2,\\cdots, M + 1$ 行: $A[i]$，$B[i]$，$T[i]$。$A$，$B$，$T$ 分别为三个包含 $M$ 个元素的数组，分别表示每条小路的两个端点和通过这条小路的时间。例如，第 $i$ 条小路连接水坑 $A[i-1]$ 和水坑 $B[i-1]$，通过这条小路的时间是 $T[i-1]$ 天。\n\n\n例如：题目中的例子应该表示为以下格式\n\n```\n12 8 2\n0 8 4\n8 2 2\n2 7 4\n5 11 3\n5 1 7\n1 3 1\n1 9 5\n10 6 3\n```", "outputFormat": "如上所述，表示游走于两个距离最远的水坑之间所需的时间", "hint": "对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le M \\le N-1$，$0 \\le A[i],B[i] \\le N-1$，$1 \\le T[i] \\le 10^4$，$1 \\le L \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P5896", "type": "P", "difficulty": 7, "samples": [["5 7 2\n0 3\n4 4\n4 6\n4 5\n4 6\n", "25\n"], ["2 6 2\n1 4\n4 1\n", "16\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2016", "IOI", "Special Judge", "斜率优化", "凸完全单调性（wqs 二分）"], "title": "[IOI 2016] aliens", "background": "", "description": "我们的卫星刚刚通过观测一个遥远的星球发现了外星文明。我们也已经获得了该星球的一个正方形区域的低分辨率照片。这个照片上有许多智能生命的迹象。专家们也已经确定了照片上的 $n$ 个兴趣点。这些兴趣点被编号为 $0$ 到 $n−1$。现在我们希望拍摄一些能包含全部 $n$ 个兴趣点的高分辨率照片。\n\n卫星已将低分辨率照片的区域划分成由 $m \\times m$ 个单位正方形的小方格组成的网络。网格的行和列被连续地编号为 $0$ 到 $m−1$（从上到下和从左到右）。我们用坐标 $(s,t)$ 来表示第 $s$ 行与第 $t$ 列上的小方格。第 $i$ 个兴趣点位于小方格 $(r_i,c_i)$ 上，每个小方格子上可以包含任意多个兴趣点。\n\n卫星在一个固定的轨道上运行，而它刚好也直接经过这个网格的主对角线的上方。主对角线就是指在网络中连接左上角和右下角的那条线段。卫星能够在任意的区域上拍摄高分辨率的照片，但必须满足以下条件：\n\n- 拍摄的区域必须是正方形。\n- 这个正方形的两个对角（注：变通理解为主对角线）全部包含在网格的主对角线中。\n- 网格中的每个小方格或者完全在拍摄范围内，或者完全在拍摄范围外。\n卫星最多只能拍摄 $k$ 张高分辨率照片。\n\n一旦卫星拍摄完成，它将把每个拍摄区域的高分辨率照片传送到地面基站（无论这些区域是否包含兴趣点）。尽管一个小方格可能会被多次拍摄，但每个被拍摄到的小方格上的数据只会被传送一次。\n\n因此，我们必须选择最多 $k$ 个正方形区域进行拍摄，而且要保证：\n\n- 每个包含至少一个兴趣点的小方格必须被至少拍摄到一次\n- 被拍摄到至少一次的小方格数目必须是最小的。\n\n你的任务就是去找出被拍摄到的小方格有可能的最小值。", "inputFormat": "- 第 $1$ 行：整数 $n$ 代表兴趣点的数目，$m$ 代表网格中的行数（也是列数） 和 $k$ 代表卫星能够拍摄高分辨率照片的最大次数；\n- 第 $2+i$ （$0 \\le i \\le n−1$） 行：整数 $r_i$ 和 $c_i$。$r$ 和 $c$ 为两个长度为 $n$ 的数组，描述网格中包含兴趣点的那些小方格的坐标。对于 $0\\le i\\le n−1$，第 $i$ 个兴趣点位于坐标为 $(r_i,c_i)$ 的小方格。", "outputFormat": "- 共一行，被至少拍摄一次的小方格的总数的最小值（这些照片必须覆盖所有兴趣点）。", "hint": "**子任务**\n\n在全部子任务中， $1\\le k\\le n$。\n\n| 子任务 | 分数 | $n\\le$ | $m\\le$ | 其他限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | $5$ | $100$ |  $k=n$|\n| $2$ | $12$ | $500$ | $10^3$ | $r_i=c_i$ |\n|  $3$| $9$ | $500$ | $10^3$ | 无 |\n|$4$  |$16$  | $4 \\times 10^3$ | $10^6$ | 无 |\n| $5$ | $19$ | $5\\times 10^4$ | $10^6$ | $k \\le 100$ |\n| $6$ |  $40$| $10^5$ | $10^6$ | 无 |\n", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2016] aliens", "background": "", "description": "Our satellite has just discovered an alien civilization by observing a distant planet. We have also obtained a low-resolution photo of a square area on that planet. The photo shows many signs of intelligent life. Experts have identified $n$ points of interest in the photo. These points are numbered from $0$ to $n-1$. Now we want to take some high-resolution photos that include all $n$ points of interest.\n\nThe satellite has divided the area in the low-resolution photo into a grid made of $m \\times m$ unit squares. The rows and columns of the grid are consecutively numbered from $0$ to $m-1$ (from top to bottom and from left to right). We use coordinates $(s,t)$ to denote the cell in row $s$ and column $t$. The $i$-th point of interest is located in cell $(r_i,c_i)$. Each cell may contain any number of points of interest.\n\nThe satellite moves along a fixed orbit, and it happens to pass directly above the main diagonal of this grid. The main diagonal is the line segment connecting the top-left corner and the bottom-right corner of the grid. The satellite can take a high-resolution photo of any area, but it must satisfy the following conditions:\n\n- The photographed area must be a square.\n- Both diagonals of this square (note: you may understand this as the main diagonal) must lie on the main diagonal of the grid.\n- Each cell in the grid must be either completely inside the photographed area or completely outside it.\n\nThe satellite can take at most $k$ high-resolution photos.\n\nAfter photographing, the satellite will transmit the high-resolution data for every photographed area to the ground station (whether or not the area contains points of interest). Although a cell may be photographed multiple times, the data for each photographed cell will be transmitted only once.\n\nTherefore, we must choose at most $k$ square areas to photograph, and ensure that:\n\n- Every cell that contains at least one point of interest is photographed at least once.\n- The number of cells photographed at least once is minimized.\n\nYour task is to find the minimum possible number of cells that are photographed at least once.", "inputFormat": "- Line $1$: integers $n$ (the number of points of interest), $m$ (the number of rows in the grid, also the number of columns), and $k$ (the maximum number of high-resolution photos the satellite can take).\n- Line $2+i$ ($0 \\le i \\le n-1$): integers $r_i$ and $c_i$. $r$ and $c$ are two arrays of length $n$ describing the coordinates of the cells that contain points of interest. For $0 \\le i \\le n-1$, the $i$-th point of interest is located in the cell with coordinates $(r_i,c_i)$.", "outputFormat": "- One line: the minimum total number of cells that are photographed at least once (the photos must cover all points of interest).", "hint": "**Subtasks**\n\nIn all subtasks, $1 \\le k \\le n$.\n\n| Subtask | Score | $n \\le$ | $m \\le$ | Other constraints |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | $5$ | $100$ | $k=n$ |\n| $2$ | $12$ | $500$ | $10^3$ | $r_i=c_i$ |\n| $3$ | $9$ | $500$ | $10^3$ | None |\n| $4$ | $16$ | $4 \\times 10^3$ | $10^6$ | None |\n| $5$ | $19$ | $5 \\times 10^4$ | $10^6$ | $k \\le 100$ |\n| $6$ | $40$ | $10^5$ | $10^6$ | None |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2016] aliens", "background": "", "description": "我们的卫星刚刚通过观测一个遥远的星球发现了外星文明。我们也已经获得了该星球的一个正方形区域的低分辨率照片。这个照片上有许多智能生命的迹象。专家们也已经确定了照片上的 $n$ 个兴趣点。这些兴趣点被编号为 $0$ 到 $n−1$。现在我们希望拍摄一些能包含全部 $n$ 个兴趣点的高分辨率照片。\n\n卫星已将低分辨率照片的区域划分成由 $m \\times m$ 个单位正方形的小方格组成的网络。网格的行和列被连续地编号为 $0$ 到 $m−1$（从上到下和从左到右）。我们用坐标 $(s,t)$ 来表示第 $s$ 行与第 $t$ 列上的小方格。第 $i$ 个兴趣点位于小方格 $(r_i,c_i)$ 上，每个小方格子上可以包含任意多个兴趣点。\n\n卫星在一个固定的轨道上运行，而它刚好也直接经过这个网格的主对角线的上方。主对角线就是指在网络中连接左上角和右下角的那条线段。卫星能够在任意的区域上拍摄高分辨率的照片，但必须满足以下条件：\n\n- 拍摄的区域必须是正方形。\n- 这个正方形的两个对角（注：变通理解为主对角线）全部包含在网格的主对角线中。\n- 网格中的每个小方格或者完全在拍摄范围内，或者完全在拍摄范围外。\n卫星最多只能拍摄 $k$ 张高分辨率照片。\n\n一旦卫星拍摄完成，它将把每个拍摄区域的高分辨率照片传送到地面基站（无论这些区域是否包含兴趣点）。尽管一个小方格可能会被多次拍摄，但每个被拍摄到的小方格上的数据只会被传送一次。\n\n因此，我们必须选择最多 $k$ 个正方形区域进行拍摄，而且要保证：\n\n- 每个包含至少一个兴趣点的小方格必须被至少拍摄到一次\n- 被拍摄到至少一次的小方格数目必须是最小的。\n\n你的任务就是去找出被拍摄到的小方格有可能的最小值。", "inputFormat": "- 第 $1$ 行：整数 $n$ 代表兴趣点的数目，$m$ 代表网格中的行数（也是列数） 和 $k$ 代表卫星能够拍摄高分辨率照片的最大次数；\n- 第 $2+i$ （$0 \\le i \\le n−1$） 行：整数 $r_i$ 和 $c_i$。$r$ 和 $c$ 为两个长度为 $n$ 的数组，描述网格中包含兴趣点的那些小方格的坐标。对于 $0\\le i\\le n−1$，第 $i$ 个兴趣点位于坐标为 $(r_i,c_i)$ 的小方格。", "outputFormat": "- 共一行，被至少拍摄一次的小方格的总数的最小值（这些照片必须覆盖所有兴趣点）。", "hint": "**子任务**\n\n在全部子任务中， $1\\le k\\le n$。\n\n| 子任务 | 分数 | $n\\le$ | $m\\le$ | 其他限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | $5$ | $100$ |  $k=n$|\n| $2$ | $12$ | $500$ | $10^3$ | $r_i=c_i$ |\n|  $3$| $9$ | $500$ | $10^3$ | 无 |\n|$4$  |$16$  | $4 \\times 10^3$ | $10^6$ | 无 |\n| $5$ | $19$ | $5\\times 10^4$ | $10^6$ | $k \\le 100$ |\n| $6$ |  $40$| $10^5$ | $10^6$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P5897", "type": "P", "difficulty": 7, "samples": [["3 4\n0 2 5\n7 1 1\n0 4 0\n0 0 0 2\n0 3 4 7\n5\n3 2 1\n3 3 3\n2 0 0 5\n1 1 1 6\n3 2 1\n", "2\n7\n5\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2013", "IOI", "O2优化"], "title": "[IOI 2013] wombats", "background": "", "description": "布里斯班被变异的袋熊占领，你必须带领大家去安全的地方。\n\n布里斯班的道路像一个大网格，有 $R$ 条东西向的横向道路，从北向南依次编号为 $0,\\cdots, (R - 1) $，有 $C$ 条南北向的纵向道路，从西向同东依次编号为 $0,\\cdots, (C- 1)$ ，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xyvkmhhp.png)\n\n袋熊从北方入侵，人们逃向南方。人们可以在横向道路上双方向移动，但是在纵向道路上只能往南面安全的地方走。\n\n横向道路 $P$ 和纵向道路 $Q$ 的交点表示为 $(P, Q)$ 。相邻 $2$ 个交点之间的道路线段上\n有一些袋熊，且数目是随时间变化的。 你的任务是引导每个人从最北边（在横向道路 $0$ 上）的指定交点逃到最南端（在横向道路 $R - 1$ 上）的指定交点，路上经过\n的袋熊最少。\n\n首先会告诉你网格的规模以及每条道路线段上的袋熊的数量。然后给你一系列 $E$ 事件，每个事件是下列两者之一：\n- 变化，表示有些道路线段上的袋熊数量发生变化；\n- 逃离, 表示有些人已到达横向道路 $0$ 上指定交点，你必须给他们指出一条路，通往横向道路 $R - 1$ 上指定交点且路上遇到的袋熊最少。\n\n**举例**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zn27laze.png)\n\n上图所示的初始地图中有 $3$ 条横向道路 （$ R = 3$ ）和 $4$ 条纵向道路（$ C = 4$ ），每\n条道路线段上的袋熊数目如线段上的标记所示。考虑下列事件：\n- 一个人到达交点 $A = (0, 2)$ ,希望逃到交点 $B = (2, 1)$ 。如图上虚线所示，他最少需要经过 $2$ 只袋熊。\n- 又一个人到达交点 $X = (0, 3)$ ，希望逃到交点 $Y = (2, 3)$ 。如图上虚线所示，他最少需要经过 $7$ 只袋熊。\n- 发生 $2$ 个变化事件：纵向道路 $0$ 上最上面那条道路线段上的袋熊数目变为 $5 $，横向道路 $1$ 上中间那条道路线段上的袋熊数目变为 $6 $，见下图中圈出来的两个数字。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/agnx5ol9.png)\n\n- 第3个人到达交点 $A = (0, 2)$ ，希望逃到交点 $B = (2, 1)$ ，现在他最少需要经过 $5$ 只袋熊，如图中虚线所示。", "inputFormat": "- 第 $1$ 行： $R$ 表示横向道路的数目，$C$ 表示纵向道路的数目。\n- 第 $2$ 行： $H[0][0],\\cdots,H[0][C-2]$。\n- $\\cdots$\n- 第 $(R + 1)$ 行： $H[R-1][0],\\cdots,H[R-1][C-2]$。\n- 第 $(R + 2)$ 行： $V[0][0],\\cdots,V[0][C-1]$。\n- $H$: 二维数组 $R × (C - 1)$ ，其中 $H[P][Q]$ 表示交点 $(P, Q)$ 和交点 $(P, Q +1)$ 之间的横向道路线段上的袋熊数目。\n- $\\cdots$\n- 第 $(2R)$ 行： $V[R-2][0],\\cdots,V[R-2][C-1]$。\n- $V$: 二维数组 $(R - 1) × C$ ，其中 $V[P][Q]$ 表示交点 $(P, Q)$ 和交点 $(P + 1,Q)$ 之间的纵向道路线段上的袋熊数目。\n- 下一行: $E$。\n- 下 $E$ 行：每行一个事件，按照事件发生的顺序给出。\n\n如果 $C = 1$ ，表示横向道路上每条道路线段上的袋熊数目的若干空行(第 $2$ 到 $R +1$ 行)将会被省略。\n\n表示每个事件的那一行格式如下：\n\n- `1 P Q W` 表示 将交点 $(P, Q)$ 和交点 $(P, Q + 1)$ 之间的横向道路线段上的袋熊数目改为 $W$。\n- `2 P Q W` 表示 将交点 $(P, Q)$ 和交点 $(P + 1, Q)$ 之间的纵向道路线段上的袋熊数目改为 $W$。\n- `3 V1 V2` 表示 计算一个人从交点 $(0, V1)$ 逃到交点 $(R-1, V2)$ 最少需要经过多少只袋熊。\n\n例如：题目中的例子应该表示为以下格式\n\n```\n3 4\n0 2 5\n7 1 1\n0 4 0\n0 0 0 2\n0 3 4 7\n5\n3 2 1\n3 3 3\n2 0 0 5\n1 1 1 6\n3 2 1\n\n```", "outputFormat": "对于每一次询问，给出最少经过袋熊数。", "hint": "对于 $100\\%$ 的数据，$2 \\le R \\le 5 \\times 10^3$，$1 \\le C \\le 200$，最多 $500$ 个变化，最多 $2 \\times 10^5$ 次询问，任意时刻一条道路上最多 $10^3$ 只袋熊。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2013] wombats", "background": "", "description": "Brisbane has been occupied by mutated wombats, and you must lead everyone to a safe place.\n\nThe roads in Brisbane form a large grid. There are $R$ horizontal roads running west to east, numbered from north to south as $0,\\cdots,(R - 1)$. There are $C$ vertical roads running south to north, numbered from west to east as $0,\\cdots,(C - 1)$, as shown in the figure below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xyvkmhhp.png)\n\nWombats invade from the north, and people escape to the south. People can move in both directions along horizontal roads, but along vertical roads they can only move south toward safety.\n\nThe intersection of horizontal road $P$ and vertical road $Q$ is denoted as $(P, Q)$. On each road segment between two adjacent intersections, there are some wombats, and the number changes over time. Your task is to guide each person from a specified intersection on the northernmost road (horizontal road $0$) to a specified intersection on the southernmost road (horizontal road $R - 1$), while encountering as few wombats as possible along the way.\n\nYou are first given the grid size and the number of wombats on each road segment. Then you are given a sequence of $E$ events, each of which is one of the following:\n- an update, meaning the number of wombats on some road segments changes;\n- an escape query, meaning some people have arrived at a specified intersection on horizontal road $0$, and you must tell them a path to a specified intersection on horizontal road $R - 1$ that minimizes the number of wombats encountered.\n\n**Example**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zn27laze.png)\n\nIn the initial map shown above, there are $3$ horizontal roads ($R = 3$) and $4$ vertical roads ($C = 4$). The number of wombats on each road segment is marked on the segment. Consider the following events:\n- A person arrives at intersection $A = (0, 2)$ and wants to escape to intersection $B = (2, 1)$. As shown by the dashed path, they need to pass at least $2$ wombats.\n- Another person arrives at intersection $X = (0, 3)$ and wants to escape to intersection $Y = (2, 3)$. As shown by the dashed path, they need to pass at least $7$ wombats.\n- Two update events occur: the number of wombats on the topmost vertical segment of vertical road $0$ becomes $5$, and the number of wombats on the middle horizontal segment of horizontal road $1$ becomes $6$, as circled in the figure below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/agnx5ol9.png)\n\n- A third person arrives at intersection $A = (0, 2)$ and wants to escape to intersection $B = (2, 1)$. Now they need to pass at least $5$ wombats, as shown by the dashed path in the figure.", "inputFormat": "- Line $1$: $R$ is the number of horizontal roads, and $C$ is the number of vertical roads.\n- Line $2$: $H[0][0],\\cdots,H[0][C-2]$.\n- $\\cdots$\n- Line $(R + 1)$: $H[R-1][0],\\cdots,H[R-1][C-2]$.\n- Line $(R + 2)$: $V[0][0],\\cdots,V[0][C-1]$.\n- $H$: a 2D array of size $R \\times (C - 1)$, where $H[P][Q]$ is the number of wombats on the horizontal road segment between intersection $(P, Q)$ and intersection $(P, Q + 1)$.\n- $\\cdots$\n- Line $(2R)$: $V[R-2][0],\\cdots,V[R-2][C-1]$.\n- $V$: a 2D array of size $(R - 1) \\times C$, where $V[P][Q]$ is the number of wombats on the vertical road segment between intersection $(P, Q)$ and intersection $(P + 1, Q)$.\n- Next line: $E$.\n- The next $E$ lines: one event per line, given in the order they occur.\n\nIf $C = 1$, then the empty lines for the number of wombats on horizontal road segments (lines $2$ to $R + 1$) will be omitted.\n\nThe format of each event line is as follows:\n\n- `1 P Q W` means setting the number of wombats on the horizontal road segment between intersection $(P, Q)$ and intersection $(P, Q + 1)$ to $W$.\n- `2 P Q W` means setting the number of wombats on the vertical road segment between intersection $(P, Q)$ and intersection $(P + 1, Q)$ to $W$.\n- `3 V1 V2` means computing the minimum number of wombats a person must pass when escaping from intersection $(0, V1)$ to intersection $(R-1, V2)$.\n\nFor example, the example in the statement should be written in the following format:\n\n```\n3 4\n0 2 5\n7 1 1\n0 4 0\n0 0 0 2\n0 3 4 7\n5\n3 2 1\n3 3 3\n2 0 0 5\n1 1 1 6\n3 2 1\n\n```", "outputFormat": "For each query, output the minimum number of wombats that must be passed.", "hint": "Constraints: for $100\\%$ of the data, $2 \\le R \\le 5 \\times 10^3$, $1 \\le C \\le 200$, there are at most $500$ updates, at most $2 \\times 10^5$ queries, and at any time there are at most $10^3$ wombats on any road segment.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2013] wombats", "background": "", "description": "布里斯班被变异的袋熊占领，你必须带领大家去安全的地方。\n\n布里斯班的道路像一个大网格，有 $R$ 条东西向的横向道路，从北向南依次编号为 $0,\\cdots, (R - 1) $，有 $C$ 条南北向的纵向道路，从西向同东依次编号为 $0,\\cdots, (C- 1)$ ，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xyvkmhhp.png)\n\n袋熊从北方入侵，人们逃向南方。人们可以在横向道路上双方向移动，但是在纵向道路上只能往南面安全的地方走。\n\n横向道路 $P$ 和纵向道路 $Q$ 的交点表示为 $(P, Q)$ 。相邻 $2$ 个交点之间的道路线段上\n有一些袋熊，且数目是随时间变化的。 你的任务是引导每个人从最北边（在横向道路 $0$ 上）的指定交点逃到最南端（在横向道路 $R - 1$ 上）的指定交点，路上经过\n的袋熊最少。\n\n首先会告诉你网格的规模以及每条道路线段上的袋熊的数量。然后给你一系列 $E$ 事件，每个事件是下列两者之一：\n- 变化，表示有些道路线段上的袋熊数量发生变化；\n- 逃离, 表示有些人已到达横向道路 $0$ 上指定交点，你必须给他们指出一条路，通往横向道路 $R - 1$ 上指定交点且路上遇到的袋熊最少。\n\n**举例**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zn27laze.png)\n\n上图所示的初始地图中有 $3$ 条横向道路 （$ R = 3$ ）和 $4$ 条纵向道路（$ C = 4$ ），每\n条道路线段上的袋熊数目如线段上的标记所示。考虑下列事件：\n- 一个人到达交点 $A = (0, 2)$ ,希望逃到交点 $B = (2, 1)$ 。如图上虚线所示，他最少需要经过 $2$ 只袋熊。\n- 又一个人到达交点 $X = (0, 3)$ ，希望逃到交点 $Y = (2, 3)$ 。如图上虚线所示，他最少需要经过 $7$ 只袋熊。\n- 发生 $2$ 个变化事件：纵向道路 $0$ 上最上面那条道路线段上的袋熊数目变为 $5 $，横向道路 $1$ 上中间那条道路线段上的袋熊数目变为 $6 $，见下图中圈出来的两个数字。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/agnx5ol9.png)\n\n- 第3个人到达交点 $A = (0, 2)$ ，希望逃到交点 $B = (2, 1)$ ，现在他最少需要经过 $5$ 只袋熊，如图中虚线所示。", "inputFormat": "- 第 $1$ 行： $R$ 表示横向道路的数目，$C$ 表示纵向道路的数目。\n- 第 $2$ 行： $H[0][0],\\cdots,H[0][C-2]$。\n- $\\cdots$\n- 第 $(R + 1)$ 行： $H[R-1][0],\\cdots,H[R-1][C-2]$。\n- 第 $(R + 2)$ 行： $V[0][0],\\cdots,V[0][C-1]$。\n- $H$: 二维数组 $R × (C - 1)$ ，其中 $H[P][Q]$ 表示交点 $(P, Q)$ 和交点 $(P, Q +1)$ 之间的横向道路线段上的袋熊数目。\n- $\\cdots$\n- 第 $(2R)$ 行： $V[R-2][0],\\cdots,V[R-2][C-1]$。\n- $V$: 二维数组 $(R - 1) × C$ ，其中 $V[P][Q]$ 表示交点 $(P, Q)$ 和交点 $(P + 1,Q)$ 之间的纵向道路线段上的袋熊数目。\n- 下一行: $E$。\n- 下 $E$ 行：每行一个事件，按照事件发生的顺序给出。\n\n如果 $C = 1$ ，表示横向道路上每条道路线段上的袋熊数目的若干空行(第 $2$ 到 $R +1$ 行)将会被省略。\n\n表示每个事件的那一行格式如下：\n\n- `1 P Q W` 表示 将交点 $(P, Q)$ 和交点 $(P, Q + 1)$ 之间的横向道路线段上的袋熊数目改为 $W$。\n- `2 P Q W` 表示 将交点 $(P, Q)$ 和交点 $(P + 1, Q)$ 之间的纵向道路线段上的袋熊数目改为 $W$。\n- `3 V1 V2` 表示 计算一个人从交点 $(0, V1)$ 逃到交点 $(R-1, V2)$ 最少需要经过多少只袋熊。\n\n例如：题目中的例子应该表示为以下格式\n\n```\n3 4\n0 2 5\n7 1 1\n0 4 0\n0 0 0 2\n0 3 4 7\n5\n3 2 1\n3 3 3\n2 0 0 5\n1 1 1 6\n3 2 1\n\n```", "outputFormat": "对于每一次询问，给出最少经过袋熊数。", "hint": "对于 $100\\%$ 的数据，$2 \\le R \\le 5 \\times 10^3$，$1 \\le C \\le 200$，最多 $500$ 个变化，最多 $2 \\times 10^5$ 次询问，任意时刻一条道路上最多 $10^3$ 只袋熊。", "locale": "zh-CN"}}}
{"pid": "P5900", "type": "P", "difficulty": 7, "samples": [["7", "11"], ["27", "751065460"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化", "Pólya 定理", "组合数学", "生成函数", "快速傅里叶变换 FFT"], "title": "无标号无根树计数", "background": "考虑到你谷还没有这类题，于是就放了这么个水题。 \n", "description": "求 $n$ 个点的无标号无根树数量，答案对 $998244353$ 取模。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【数据范围】   \n对于 $30\\%$ 的数据，$1\\le n \\le 1000$；   \n对于 $100\\%$ 的数据，$1\\le n \\le 2\\times 10^5$。  \n\n虽然 $\\Theta(n \\log^2 n)$ 也能过，但是没什么意义，建议写一下 $\\Theta(n \\log n)$ 的做法。", "locale": "zh-CN", "translations": {"en": {"title": "Counting Unlabeled Unrooted Trees", "background": "Considering that Luogu does not have this type of problem yet, here is a simple easy problem.", "description": "Find the number of unlabeled unrooted trees with $n$ nodes. Output the answer modulo $998244353$.", "inputFormat": "Input one line with a positive integer $n$.", "outputFormat": "Output one line with one integer, representing the answer.", "hint": "Constraints  \nFor $30\\%$ of the testdata, $1\\le n \\le 1000$;  \nFor $100\\%$ of the testdata, $1\\le n \\le 2\\times 10^5$.  \n\nAlthough $\\Theta(n \\log^2 n)$ can also pass, it is not very meaningful. It is recommended to implement a $\\Theta(n \\log n)$ solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无标号无根树计数", "background": "考虑到你谷还没有这类题，于是就放了这么个水题。 \n", "description": "求 $n$ 个点的无标号无根树数量，答案对 $998244353$ 取模。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【数据范围】   \n对于 $30\\%$ 的数据，$1\\le n \\le 1000$；   \n对于 $100\\%$ 的数据，$1\\le n \\le 2\\times 10^5$。  \n\n虽然 $\\Theta(n \\log^2 n)$ 也能过，但是没什么意义，建议写一下 $\\Theta(n \\log n)$ 的做法。", "locale": "zh-CN"}}}
{"pid": "P5901", "type": "P", "difficulty": 6, "samples": [["6 3 4\n1\n1 2\n1 3\n2 3\n2 3\n5 1\n1 2\n\n1 3\n\n2 3\n\n3 1", "\n\n\n\n\n\n\n\n1 [刷新缓冲区]\n\n3 [刷新缓冲区]\n\n2 [刷新缓冲区]\n\n1 [刷新缓冲区]\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "IOI", "交互题", "Special Judge", "O2优化", "根号分治"], "title": "[IOI 2009] Regions", "background": "### 滥用本题评测将被封号\n\nIOI2009 D2T3\n\n原题时间限制 8s，为节约评测资源，时间限制改为 4s。", "description": "联合国区域发展委员会（The United Nations Regional Development Agency, UNRDA）有一个良好的组织结构。它任用了 $N$ 名委员，每名委员都属于几个地区中的一个。委员们按照其资历被编号为 $1$ 到 $N$ ，$1$ 号委员是主席，资历最高。委员所属地区被编号为 $1$ 到 $R$。除了主席之外所有委员都有一个直接导师。任何直接导师的资历都比他所指导的委员的资历要高。\n\n我们称委员 $A$ 是委员 $B$ 的导师当且仅当 $A$ 是 $B$ 的直接导师或者 $A$ 是 $B$ 的直接导师的导师。显然，主席是所有其他委员的导师，没有任何两名委员互为导师。\n\n现在，为了调查大量对 UNRDA 偏向某些地区的不平衡的组织结构的指控，UNRDA 想要建立一个计算机系统：在给定委员之间的直接导师关系的情况下，该系统可以回答下述形式的问题：给定两个地区 $r_1$ 和 $r_2$，要求系统回答委员会中有多少对委员 $e_1$ 和 $e_2$，满足 $e_1$ 属于 $r_1$，而 $e_2$ 属于 $r_2$，并且 $e_1$ 是 $e_2$ 的导师。每次询问都有两个参数 $r_1$ 和 $r_2$，结果是一个整数：满足上述条件的 $(e_1, e_2)$ 二元组的数量。\n\n**任务**：编写一个程序，给定每个委员的地区和直接导师，**在线** 回答上述询问。\n\n**强制在线将以交互的格式进行**。", "inputFormat": "第一行包含三个整数 $N, R, Q$，分别由一个空格隔开，分别表示雇员人数，区域数和查询数。\n\n接下来 $N$ 行按照资历的顺序给出了 $N$ 个委员的描述信息。其中第 $k$ 行描述了编号为 $k$ 的委员。第一行（描述主席的一行）包含一个整数：主席所属的地区 $H_1$。其余的 $N - 1$ 行，每行包含两个整数，以一个空格隔开分别表示委员 $k$ 的直接导师 $S_k$ 和委员 $k$ 所属的地区 $H_k$。\n\n### 交互格式\n\n在读入所有输入数据之后，你的程序必须依次从标准输入中读入询问，并将询问结果输出至标准输出。必须依次回答 $Q$ 个询问，每次回答一个。**在读入下一个询问之前，你必须先回答当前询问**。\n\n每个询问是标准输入的一行，用两个不同整数 $r_1, r_2$ 表示。", "outputFormat": "对查询的回答是标准输出的一行，包含一个整数，表示在 UNRDA 中有多少对委员 $e_1$ 和 $e_2$ 满足下述条件：$e_1$ 属于地区 $r_1$，$e_2$ 属于地区 $r_2$，并且 $e_1$ 是 $e_2$ 的导师。\n\n**注意**：输入数据保证给出的任意询问的正确答案小于 $10 ^ 9$。\n\n**特别注意**：为了正确地和交互库交互，你的程序必须 **在回答每次询问后刷新标准输出缓冲区**。你同样需要避免意外地在读入标准输入时堵住了输入流，这有可能在你使用 `scanf(\"%d\\n\", ...)` 的语句时发生。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。", "hint": "### 数据范围与约定\n\n- 对于 $30\\%$ 的数据，$N\\leq 500$。\n- 对于 $55\\%$ 的数据，没有地区包含超过 $500$ 个委员。\n- 同时满足上述两个条件的数据有 $15\\%$，至少满足上述一个条件的数据有 $70\\%$。\n- 对于 $100\\%$ 的数据，$1 \\le N, Q \\le 2 \\times 10^5$，$1 \\le H_k, r_1, r_2 \\le R \\le 2.5 \\times 10^4$，$1 \\le S_k < k$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2009] Regions", "background": "### Abuse of this problem’s judging will result in account suspension.\n\nIOI 2009 D2T3.\n\nThe original time limit was 8 s. To save judging resources, the time limit has been changed to 4 s.", "description": "The United Nations Regional Development Agency (UNRDA) has a well-organized structure. It employs $N$ commissioners, and each commissioner belongs to one of several regions. The commissioners are numbered from $1$ to $N$ according to seniority, where commissioner $1$ is the chairperson and has the highest seniority. The regions are numbered from $1$ to $R$. Every commissioner except the chairperson has a direct mentor. Any direct mentor has higher seniority than the commissioner they mentor.\n\nWe say that commissioner $A$ is a mentor of commissioner $B$ if and only if $A$ is the direct mentor of $B$, or $A$ is a mentor of the direct mentor of $B$. Clearly, the chairperson is a mentor of every other commissioner, and no two commissioners are mentors of each other.\n\nNow, to investigate many accusations that UNRDA is biased toward certain regions due to an unbalanced organizational structure, UNRDA wants to build a computer system: given the direct mentor relationships between commissioners, the system can answer queries of the following form. Given two regions $r_1$ and $r_2$, the system should answer how many pairs of commissioners $e_1$ and $e_2$ satisfy: $e_1$ belongs to $r_1$, $e_2$ belongs to $r_2$, and $e_1$ is a mentor of $e_2$. Each query has two parameters $r_1$ and $r_2$, and the result is an integer: the number of ordered pairs $(e_1, e_2)$ satisfying the conditions above.\n\n**Task**: Write a program that, given each commissioner’s region and direct mentor, answers the queries above **online**.\n\n**Forced online will be conducted in an interactive format**.", "inputFormat": "The first line contains three integers $N, R, Q$, separated by a single space, representing the number of employees, the number of regions, and the number of queries.\n\nThe next $N$ lines give the description of the $N$ commissioners in order of seniority. Line $k$ describes commissioner number $k$. The first line (the one describing the chairperson) contains one integer: the region $H_1$ to which the chairperson belongs. Each of the remaining $N - 1$ lines contains two integers separated by a single space, representing the direct mentor $S_k$ of commissioner $k$ and the region $H_k$ to which commissioner $k$ belongs.\n\n### Interactive Format\n\nAfter reading all input data, your program must then read the queries one by one from standard input, and output the answers to standard output. You must answer exactly $Q$ queries, one at a time. **Before reading the next query, you must answer the current query first**.\n\nEach query is one line from standard input, containing two distinct integers $r_1, r_2$.", "outputFormat": "For each query, output one line to standard output containing one integer: the number of pairs of commissioners $e_1$ and $e_2$ in UNRDA that satisfy the following conditions: $e_1$ belongs to region $r_1$, $e_2$ belongs to region $r_2$, and $e_1$ is a mentor of $e_2$.\n\n**Note**: The input guarantees that the correct answer for any query is less than $10 ^ 9$.\n\n**Special note**: To interact correctly with the interactive library, your program must **flush the standard output buffer after answering each query**. You also need to avoid accidentally blocking when reading from standard input, which may happen if you use a statement like `scanf(\"%d\\n\", ...)`.\n\nYou may use the following statements to flush the buffer:\n\n- For C/C++: `fflush(stdout)`;\n- For C++: `std::cout << std::flush`;\n- For Java: `System.out.flush()`;\n- For Python: `stdout.flush()`;\n- For Pascal: `flush(output)`;\n- For other languages, please refer to the documentation of the corresponding language.\n\nIn particular, for C++, when outputting a newline, if you use `std::endl` instead of `'\\n'`, the buffer can also be flushed automatically.", "hint": "### Constraints and Notes\n\n- For $30\\%$ of the testdata, $N \\leq 500$.\n- For $55\\%$ of the testdata, no region contains more than $500$ commissioners.\n- $15\\%$ of the testdata satisfies both conditions above, and $70\\%$ of the testdata satisfies at least one of the conditions above.\n- For $100\\%$ of the testdata, $1 \\le N, Q \\le 2 \\times 10^5$, $1 \\le H_k, r_1, r_2 \\le R \\le 2.5 \\times 10^4$, $1 \\le S_k < k$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2009] Regions", "background": "### 滥用本题评测将被封号\n\nIOI2009 D2T3\n\n原题时间限制 8s，为节约评测资源，时间限制改为 4s。", "description": "联合国区域发展委员会（The United Nations Regional Development Agency, UNRDA）有一个良好的组织结构。它任用了 $N$ 名委员，每名委员都属于几个地区中的一个。委员们按照其资历被编号为 $1$ 到 $N$ ，$1$ 号委员是主席，资历最高。委员所属地区被编号为 $1$ 到 $R$。除了主席之外所有委员都有一个直接导师。任何直接导师的资历都比他所指导的委员的资历要高。\n\n我们称委员 $A$ 是委员 $B$ 的导师当且仅当 $A$ 是 $B$ 的直接导师或者 $A$ 是 $B$ 的直接导师的导师。显然，主席是所有其他委员的导师，没有任何两名委员互为导师。\n\n现在，为了调查大量对 UNRDA 偏向某些地区的不平衡的组织结构的指控，UNRDA 想要建立一个计算机系统：在给定委员之间的直接导师关系的情况下，该系统可以回答下述形式的问题：给定两个地区 $r_1$ 和 $r_2$，要求系统回答委员会中有多少对委员 $e_1$ 和 $e_2$，满足 $e_1$ 属于 $r_1$，而 $e_2$ 属于 $r_2$，并且 $e_1$ 是 $e_2$ 的导师。每次询问都有两个参数 $r_1$ 和 $r_2$，结果是一个整数：满足上述条件的 $(e_1, e_2)$ 二元组的数量。\n\n**任务**：编写一个程序，给定每个委员的地区和直接导师，**在线** 回答上述询问。\n\n**强制在线将以交互的格式进行**。", "inputFormat": "第一行包含三个整数 $N, R, Q$，分别由一个空格隔开，分别表示雇员人数，区域数和查询数。\n\n接下来 $N$ 行按照资历的顺序给出了 $N$ 个委员的描述信息。其中第 $k$ 行描述了编号为 $k$ 的委员。第一行（描述主席的一行）包含一个整数：主席所属的地区 $H_1$。其余的 $N - 1$ 行，每行包含两个整数，以一个空格隔开分别表示委员 $k$ 的直接导师 $S_k$ 和委员 $k$ 所属的地区 $H_k$。\n\n### 交互格式\n\n在读入所有输入数据之后，你的程序必须依次从标准输入中读入询问，并将询问结果输出至标准输出。必须依次回答 $Q$ 个询问，每次回答一个。**在读入下一个询问之前，你必须先回答当前询问**。\n\n每个询问是标准输入的一行，用两个不同整数 $r_1, r_2$ 表示。", "outputFormat": "对查询的回答是标准输出的一行，包含一个整数，表示在 UNRDA 中有多少对委员 $e_1$ 和 $e_2$ 满足下述条件：$e_1$ 属于地区 $r_1$，$e_2$ 属于地区 $r_2$，并且 $e_1$ 是 $e_2$ 的导师。\n\n**注意**：输入数据保证给出的任意询问的正确答案小于 $10 ^ 9$。\n\n**特别注意**：为了正确地和交互库交互，你的程序必须 **在回答每次询问后刷新标准输出缓冲区**。你同样需要避免意外地在读入标准输入时堵住了输入流，这有可能在你使用 `scanf(\"%d\\n\", ...)` 的语句时发生。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。", "hint": "### 数据范围与约定\n\n- 对于 $30\\%$ 的数据，$N\\leq 500$。\n- 对于 $55\\%$ 的数据，没有地区包含超过 $500$ 个委员。\n- 同时满足上述两个条件的数据有 $15\\%$，至少满足上述一个条件的数据有 $70\\%$。\n- 对于 $100\\%$ 的数据，$1 \\le N, Q \\le 2 \\times 10^5$，$1 \\le H_k, r_1, r_2 \\le R \\le 2.5 \\times 10^4$，$1 \\le S_k < k$。", "locale": "zh-CN"}}}
{"pid": "P5902", "type": "P", "difficulty": 6, "samples": [["4 5 3 100\n2 80 100\n20 125 130\n10 75 150\n5 120 110\n", "50\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "IOI", "O2优化"], "title": "[IOI 2009] Salesman", "background": "IOI2009 D2T4", "description": "旅行商已经发现，最佳的陆上旅行计划是一个难以解决的计算问题，所以他将他的生意转移到多瑙河的线性世界。他有一条很快的船，可以在很短的时间内把他从沿河的任何地方送到任何地方，但不幸的是，这条船耗油量很大。旅行商向上游（靠近河流源头的方向）移动每一米的成本为 $U$ 美元，向下游（远离河流源头的方向）移动每一米的成本为 $D$ 美元。\n\n沿河有 $N$ 个展销会，旅行商想参加。每场展销会只举行一天。对于每个展销会 $X$，旅行商知道它的日期 $T_X$（他买船后的天数为第 $0$ 天），集市的位置 $L_X$ 和他在这场集市上能获得的盈利 $M_X$。位置表示集市到河流源头的距离，以米为单位。他必须在位置为 $S$ 的家 **开始和结束** 他的旅程。\n\n帮助旅行商选择参加哪些展销会（如果有的话）以及按什么顺序，这样他可以在旅行结束时最大化他的利润。旅行商的总利润是指他在参加集市时获得的美元减去他在河上下游旅行所花费的美元的总和。\n\n请记住，如果展销会 $A$ 的举办时间早于展销会 $B$，则旅行商只能按此顺序去展销会（即，他不能先去展销会 $B$，然后再去展销会 $A$）。但是，如果两个集市在同一天举行，旅行商可以按任何顺序参观。旅行商一天去多少个集市是没有限制的，但他不能在同一个集市盈利两次。他可以经过他已经参观过的集市而一无所获。\n\n**任务**：编写一个程序，给定所有展销会的日期，位置和旅行商的盈利额，以及旅行商的家的位置和他移动的代价，求出他在旅行结束时的最大利润。", "inputFormat": "第一行包含四个整数 $N, U, D, S$，分别由一个空格隔开，分别表示展销会数，向上游（$U$）或下游（$D$）移动的单位代价，以及旅行商的家的位置。\n\n接下来的 $N$ 行描述了 $N$ 个展销会。其中第 $k$ 行描述了第 $k$ 个展销会的信息，包含三个整数，分别由一个空格隔开，分别表示展销会日期 $T_k$，它的位置 $L_k$，以及旅行商在该次展销会能获得的的盈利 $M_k$。", "outputFormat": "一行一个整数表示旅行商在旅行结束时的最大利润。", "hint": "### 样例解释\n\n在一个最优方案中，旅行商参加了编号为 $1$ 和 $3$ 的展销会（位置分别为 $80$ 和 $75$）。事件序列以及对应的利润如下：\n\n- 旅行商从家出发，向上游移动 $20$ 米，花费 $100$ 美元。目前利润：$-100$。\n- 旅行商参加展销会 $1$ 并赚取 $100$ 美元。目前利润：$0$。\n- 旅行商向上游移动 $5$ 米，花费 $25$ 美元。目前利润 $-25$。\n- 旅行商参加展销会 $3$ 并赚取 $150$ 美元。目前利润：$125$。\n- 旅行商向下游移动 $25$ 米，回到自己的家，花费 $75$ 美元。最终利润：$50$。\n\n### 数据范围与约定\n\n- 对于 $60\\%$ 的数据，没有两个展销会在同一天举行。\n- 对于 $40\\%$ 的数据，输入的所有数不超过 $5000$。\n- 同时满足上述两个条件的数据有 $15\\%$，至少满足上述一个条件的数据有 $85\\%$。\n- 对于 $100\\%$ 的数据，$1 \\le N, T_k \\le 5\\times 10^5$，$1 \\le D \\le U \\le 10$，$1 \\le S, L_k \\le 5 \\times 10^5 +1$，$1 \\le M_k \\le 4000$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2009] Salesman", "background": "IOI 2009 D2T4.", "description": "The traveling salesman has found that the best overland travel plan is a hard computational problem to solve, so he moved his business to the linear world of the Danube River. He has a very fast boat that can take him from anywhere along the river to anywhere else in a short time, but unfortunately, this boat consumes a lot of fuel. The cost for the salesman to move upstream (toward the river source) by every meter is $U$ dollars, and the cost to move downstream (away from the river source) by every meter is $D$ dollars.\n\nThere are $N$ fairs along the river that the salesman wants to attend. Each fair lasts only one day. For each fair $X$, the salesman knows its day $T_X$ (day $0$ is the day he bought the boat), the fair location $L_X$, and the profit $M_X$ he can earn at this fair. The location is the distance from the river source, in meters. He must **start and end** his trip at his home, located at position $S$.\n\nHelp the salesman choose which fairs to attend (if any) and in what order, so that he can maximize his profit when the trip ends. The salesman’s total profit is the sum of dollars earned from attended fairs minus the dollars spent traveling upstream and downstream.\n\nNote that if fair $A$ is held earlier than fair $B$, then the salesman can only visit them in this order (i.e., he cannot visit fair $B$ first and then fair $A$). However, if two fairs are held on the same day, he may visit them in any order. There is no limit on how many fairs he can visit in one day, but he cannot earn profit from the same fair twice. He may pass through fairs he has already visited without earning anything.\n\n**Task**: Write a program that, given the day, location, and profit of each fair, as well as the location of the salesman’s home and his movement costs, computes the maximum profit he can have at the end of his trip.", "inputFormat": "The first line contains four integers $N, U, D, S$, separated by single spaces, representing the number of fairs, the per-meter cost of moving upstream ($U$) or downstream ($D$), and the position of the salesman’s home.\n\nThe next $N$ lines describe the $N$ fairs. The $k$-th line contains three integers, separated by single spaces, representing the fair day $T_k$, its location $L_k$, and the profit $M_k$ the salesman can earn at this fair.", "outputFormat": "Output one integer: the maximum profit the salesman can have at the end of the trip.", "hint": "### Sample Explanation\n\nIn one optimal plan, the salesman attends fairs $1$ and $3$ (at positions $80$ and $75$, respectively). The sequence of events and the corresponding profit are as follows:\n\n- The salesman leaves home and moves upstream by $20$ meters, costing $100$ dollars. Current profit: $-100$.\n- The salesman attends fair $1$ and earns $100$ dollars. Current profit: $0$.\n- The salesman moves upstream by $5$ meters, costing $25$ dollars. Current profit: $-25$.\n- The salesman attends fair $3$ and earns $150$ dollars. Current profit: $125$.\n- The salesman moves downstream by $25$ meters to return home, costing $75$ dollars. Final profit: $50$.\n\n### Constraints\n\n- For $60\\%$ of the testdata, no two fairs are held on the same day.\n- For $40\\%$ of the testdata, all input numbers are at most $5000$.\n- $15\\%$ of the testdata satisfies both conditions above, and $85\\%$ satisfies at least one of them.\n- For $100\\%$ of the testdata, $1 \\le N, T_k \\le 5\\times 10^5$, $1 \\le D \\le U \\le 10$, $1 \\le S, L_k \\le 5 \\times 10^5 +1$, $1 \\le M_k \\le 4000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2009] Salesman", "background": "IOI2009 D2T4", "description": "旅行商已经发现，最佳的陆上旅行计划是一个难以解决的计算问题，所以他将他的生意转移到多瑙河的线性世界。他有一条很快的船，可以在很短的时间内把他从沿河的任何地方送到任何地方，但不幸的是，这条船耗油量很大。旅行商向上游（靠近河流源头的方向）移动每一米的成本为 $U$ 美元，向下游（远离河流源头的方向）移动每一米的成本为 $D$ 美元。\n\n沿河有 $N$ 个展销会，旅行商想参加。每场展销会只举行一天。对于每个展销会 $X$，旅行商知道它的日期 $T_X$（他买船后的天数为第 $0$ 天），集市的位置 $L_X$ 和他在这场集市上能获得的盈利 $M_X$。位置表示集市到河流源头的距离，以米为单位。他必须在位置为 $S$ 的家 **开始和结束** 他的旅程。\n\n帮助旅行商选择参加哪些展销会（如果有的话）以及按什么顺序，这样他可以在旅行结束时最大化他的利润。旅行商的总利润是指他在参加集市时获得的美元减去他在河上下游旅行所花费的美元的总和。\n\n请记住，如果展销会 $A$ 的举办时间早于展销会 $B$，则旅行商只能按此顺序去展销会（即，他不能先去展销会 $B$，然后再去展销会 $A$）。但是，如果两个集市在同一天举行，旅行商可以按任何顺序参观。旅行商一天去多少个集市是没有限制的，但他不能在同一个集市盈利两次。他可以经过他已经参观过的集市而一无所获。\n\n**任务**：编写一个程序，给定所有展销会的日期，位置和旅行商的盈利额，以及旅行商的家的位置和他移动的代价，求出他在旅行结束时的最大利润。", "inputFormat": "第一行包含四个整数 $N, U, D, S$，分别由一个空格隔开，分别表示展销会数，向上游（$U$）或下游（$D$）移动的单位代价，以及旅行商的家的位置。\n\n接下来的 $N$ 行描述了 $N$ 个展销会。其中第 $k$ 行描述了第 $k$ 个展销会的信息，包含三个整数，分别由一个空格隔开，分别表示展销会日期 $T_k$，它的位置 $L_k$，以及旅行商在该次展销会能获得的的盈利 $M_k$。", "outputFormat": "一行一个整数表示旅行商在旅行结束时的最大利润。", "hint": "### 样例解释\n\n在一个最优方案中，旅行商参加了编号为 $1$ 和 $3$ 的展销会（位置分别为 $80$ 和 $75$）。事件序列以及对应的利润如下：\n\n- 旅行商从家出发，向上游移动 $20$ 米，花费 $100$ 美元。目前利润：$-100$。\n- 旅行商参加展销会 $1$ 并赚取 $100$ 美元。目前利润：$0$。\n- 旅行商向上游移动 $5$ 米，花费 $25$ 美元。目前利润 $-25$。\n- 旅行商参加展销会 $3$ 并赚取 $150$ 美元。目前利润：$125$。\n- 旅行商向下游移动 $25$ 米，回到自己的家，花费 $75$ 美元。最终利润：$50$。\n\n### 数据范围与约定\n\n- 对于 $60\\%$ 的数据，没有两个展销会在同一天举行。\n- 对于 $40\\%$ 的数据，输入的所有数不超过 $5000$。\n- 同时满足上述两个条件的数据有 $15\\%$，至少满足上述一个条件的数据有 $85\\%$。\n- 对于 $100\\%$ 的数据，$1 \\le N, T_k \\le 5\\times 10^5$，$1 \\le D \\le U \\le 10$，$1 \\le S, L_k \\le 5 \\times 10^5 +1$，$1 \\le M_k \\le 4000$。", "locale": "zh-CN"}}}
{"pid": "P5903", "type": "P", "difficulty": 5, "samples": [["6 3 7\n5 5 2 2 0 3\n", "1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "树链剖分", "模板题"], "title": "【模板】树上 K 级祖先", "background": "**本题仅作为长链剖分求树上 $k$ 级祖先评测用，不保证卡掉了其他复杂度不正确的做法。**", "description": "给定一棵 $n$ 个点的有根树。\n\n有 $q$ 次询问，第 $i$ 次询问给定 $x_i, k_i$，要求点 $x_i$ 的 $k_i$ 级祖先，答案为 $ans_i$。特别地，$ans_0 = 0$。\n\n\n\n本题中的询问将在程序内生成。\n\n给定一个随机种子 $s$ 和一个随机函数 $\\operatorname{get}(x)$：\n\n```cpp\n#define ui unsigned int\nui s;\n\ninline ui get(ui x) {\n\tx ^= x << 13;\n\tx ^= x >> 17;\n\tx ^= x << 5;\n\treturn s = x; \n}\n```\n\n你需要按顺序依次生成询问。\n\n设 $d_i$ 为点 $i$ 的深度，其中根的深度为 $1$。\n\n对于第 $i$ 次询问，$x_i = ((\\operatorname{get}(s) \\operatorname{xor} ans_{i-1}) \\bmod n) + 1$，$k_i = (\\operatorname{get}(s) \\operatorname{xor} ans_{i-1}) \\bmod d_{x_i}$。", "inputFormat": "第一行三个整数 $n, q, s$。\n\n第二行 $n$ 个整数 $f_{1\\dots n}$，其中 $f_i$ 表示 $i$ 的父亲。特别地，若 $f_i = 0$，则 $i$ 为根。", "outputFormat": "一行一个整数，表示 $\\operatorname{xor}_{i=1}^q i \\times ans_i$。", "hint": "【样例说明】\n\n$x_1 = 4$，$k_1 = 1$，$ans_1 = 2$；  \n$x_2 = 6$，$k_2 = 3$，$ans_2 = 5$；  \n$x_3 = 3$，$k_3 = 0$，$ans_3 = 3$；  \n故输出 $1$。\n\n---\n\n对于 $20\\%$ 的数据，$n,q \\le 10^3$。\n\n对于 $50\\%$ 的数据，$n,q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 5 \\times 10^5$，$1 \\le q \\le 5 \\times 10^6$，$1 \\le s < 2^{32}$。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] $K$-th Ancestor on a Tree", "background": "**This problem is only for judging solutions that use long chain decomposition to find the $k$-th ancestor on a tree, and it does not guarantee that other methods with incorrect complexity will be rejected.**", "description": "Given a rooted tree with $n$ nodes.\n\nThere are $q$ queries. In the $i$-th query, $x_i$ and $k_i$ are given. You need to find the $k_i$-th ancestor of node $x_i$, and denote the answer as $ans_i$. In particular, $ans_0 = 0$.\n\nThe queries in this problem are generated within the program.\n\nA random seed $s$ and a random function $\\operatorname{get}(x)$ are given:\n\n```cpp\n#define ui unsigned int\nui s;\n\ninline ui get(ui x) {\n\tx ^= x << 13;\n\tx ^= x >> 17;\n\tx ^= x << 5;\n\treturn s = x; \n}\n```\n\nYou need to generate the queries in order.\n\nLet $d_i$ be the depth of node $i$, where the root has depth $1$.\n\nFor the $i$-th query, $x_i = ((\\operatorname{get}(s) \\operatorname{xor} ans_{i-1}) \\bmod n) + 1$, and $k_i = (\\operatorname{get}(s) \\operatorname{xor} ans_{i-1}) \\bmod d_{x_i}$.", "inputFormat": "The first line contains three integers $n, q, s$.\n\nThe second line contains $n$ integers $f_{1\\dots n}$, where $f_i$ is the parent of $i$. In particular, if $f_i = 0$, then $i$ is the root.", "outputFormat": "Output one integer per line, representing $\\operatorname{xor}_{i=1}^q i \\times ans_i$.", "hint": "[Sample Explanation]\n\n$x_1 = 4$, $k_1 = 1$, $ans_1 = 2$.  \n$x_2 = 6$, $k_2 = 3$, $ans_2 = 5$.  \n$x_3 = 3$, $k_3 = 0$, $ans_3 = 3$.  \nTherefore, the output is $1$.\n\n---\n\nFor $20\\%$ of the testdata, $n, q \\le 10^3$.\n\nFor $50\\%$ of the testdata, $n, q \\le 10^5$.\n\nFor $100\\%$ of the testdata, $2 \\le n \\le 5 \\times 10^5$, $1 \\le q \\le 5 \\times 10^6$, $1 \\le s < 2^{32}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】树上 K 级祖先", "background": "**本题仅作为长链剖分求树上 $k$ 级祖先评测用，不保证卡掉了其他复杂度不正确的做法。**", "description": "给定一棵 $n$ 个点的有根树。\n\n有 $q$ 次询问，第 $i$ 次询问给定 $x_i, k_i$，要求点 $x_i$ 的 $k_i$ 级祖先，答案为 $ans_i$。特别地，$ans_0 = 0$。\n\n\n\n本题中的询问将在程序内生成。\n\n给定一个随机种子 $s$ 和一个随机函数 $\\operatorname{get}(x)$：\n\n```cpp\n#define ui unsigned int\nui s;\n\ninline ui get(ui x) {\n\tx ^= x << 13;\n\tx ^= x >> 17;\n\tx ^= x << 5;\n\treturn s = x; \n}\n```\n\n你需要按顺序依次生成询问。\n\n设 $d_i$ 为点 $i$ 的深度，其中根的深度为 $1$。\n\n对于第 $i$ 次询问，$x_i = ((\\operatorname{get}(s) \\operatorname{xor} ans_{i-1}) \\bmod n) + 1$，$k_i = (\\operatorname{get}(s) \\operatorname{xor} ans_{i-1}) \\bmod d_{x_i}$。", "inputFormat": "第一行三个整数 $n, q, s$。\n\n第二行 $n$ 个整数 $f_{1\\dots n}$，其中 $f_i$ 表示 $i$ 的父亲。特别地，若 $f_i = 0$，则 $i$ 为根。", "outputFormat": "一行一个整数，表示 $\\operatorname{xor}_{i=1}^q i \\times ans_i$。", "hint": "【样例说明】\n\n$x_1 = 4$，$k_1 = 1$，$ans_1 = 2$；  \n$x_2 = 6$，$k_2 = 3$，$ans_2 = 5$；  \n$x_3 = 3$，$k_3 = 0$，$ans_3 = 3$；  \n故输出 $1$。\n\n---\n\n对于 $20\\%$ 的数据，$n,q \\le 10^3$。\n\n对于 $50\\%$ 的数据，$n,q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 5 \\times 10^5$，$1 \\le q \\le 5 \\times 10^6$，$1 \\le s < 2^{32}$。", "locale": "zh-CN"}}}
{"pid": "P5904", "type": "P", "difficulty": 6, "samples": [["7\n1 2\n5 7\n2 5\n2 3\n5 6\n4 5\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2014", "POI（波兰）", "O2优化", "树形 DP", "树链剖分", "前缀和"], "title": "[POI 2014] HOT-Hotels 加强版", "background": "同 [[POI2014]HOT-Hotels](https://www.luogu.com.cn/problem/P3565)，数据范围加大到 $1 \\le n \\le 10^5$。\n\n来源于 BZOJ4543。", "description": "给出一棵有 $n$ 个点的树，求有多少组点 $(i,j,k)$ 满足 $i,j,k$ 两两之间的距离都相等。  \n\n$(i,j,k)$ 与 $(i,k,j)$ 算作同一组。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $a,b$，表示在 $a,b$ 之间有一条边。", "outputFormat": "一行一个整数，表示所有合法的点的组数。", "hint": "对于 $100\\%$ 的数据， $1\\le n\\le10^5, 1\\le a\\le b\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2014] HOT-Hotels Enhanced Version", "background": "Same as [[POI2014]HOT-Hotels](https://www.luogu.com.cn/problem/P3565), but the Constraints are increased to $1 \\le n \\le 10^5$.\n\nSource: BZOJ4543.", "description": "Given a tree with $n$ nodes, find how many triples of nodes $(i,j,k)$ satisfy that the distances between every pair among $i,j,k$ are all equal.\n\n$(i,j,k)$ and $(i,k,j)$ are considered the same triple.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n-1$ lines each contain two integers $a,b$, meaning there is an edge between $a$ and $b$.", "outputFormat": "Output one integer in one line, representing the number of all valid triples of nodes.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 10^5, 1 \\le a \\le b \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2014] HOT-Hotels 加强版", "background": "同 [[POI2014]HOT-Hotels](https://www.luogu.com.cn/problem/P3565)，数据范围加大到 $1 \\le n \\le 10^5$。\n\n来源于 BZOJ4543。", "description": "给出一棵有 $n$ 个点的树，求有多少组点 $(i,j,k)$ 满足 $i,j,k$ 两两之间的距离都相等。  \n\n$(i,j,k)$ 与 $(i,k,j)$ 算作同一组。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $a,b$，表示在 $a,b$ 之间有一条边。", "outputFormat": "一行一个整数，表示所有合法的点的组数。", "hint": "对于 $100\\%$ 的数据， $1\\le n\\le10^5, 1\\le a\\le b\\le n$。", "locale": "zh-CN"}}}
{"pid": "P5905", "type": "P", "difficulty": 4, "samples": [["5 7\n1 2 4\n1 4 10\n2 3 7\n4 5 3\n4 2 -2\n3 4 -3\n5 3 4", "128\n1000000072\n999999978\n1000000026\n1000000014\n"], ["5 5\n1 2 4\n3 4 9\n3 4 -3\n4 5 3\n5 3 -2", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "O2优化", "最短路", "模板题"], "title": "【模板】全源最短路（Johnson）", "background": "", "description": "给定一个包含 $n$ 个结点和 $m$ 条带权边的有向图，求所有点对间的最短路径长度，一条路径的长度定义为这条路径上所有边的权值和。\n\n注意：\n\n1. 边权**可能**为负，且图中**可能**存在重边和自环；\n\n2. 部分数据卡 $n$ 轮 SPFA 算法。\n\n", "inputFormat": "第 $1$ 行：$2$ 个整数 $n,m$，表示给定有向图的结点数量和有向边数量。\n\n接下来 $m$ 行：每行 $3$ 个整数 $u,v,w$，表示有一条权值为 $w$ 的有向边从编号为 $u$ 的结点连向编号为 $v$ 的结点。", "outputFormat": "若图中存在负环，输出仅一行 $-1$。\n\n若图中不存在负环：\n\n输出 $n$ 行：令 $dis_{i,j}$ 为从 $i$ 到 $j$ 的最短路，在第 $i$ 行输出 $\\sum\\limits_{j=1}^n j\\times dis_{i,j}$，注意这个结果可能超过 int 存储范围。\n\n如果不存在从 $i$ 到 $j$ 的路径，则 $dis_{i,j}=10^9$；如果 $i=j$，则 $dis_{i,j}=0$。", "hint": "【样例解释】\n\n左图为样例 $1$ 给出的有向图，最短路构成的答案矩阵为：\n\n```\n0 4 11 8 11 \n1000000000 0 7 4 7 \n1000000000 -5 0 -3 0 \n1000000000 -2 5 0 3 \n1000000000 -1 4 1 0 \n```\n\n右图为样例 $2$ 给出的有向图，红色标注的边构成了负环，注意给出的图不一定连通。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7lb35u4u.png)\n\n【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^3,\\ \\ 1\\leq m\\leq 6\\times 10^3,\\ \\ 1\\leq u,v\\leq n,\\ \\ -3\\times 10^5\\leq w\\leq 3\\times 10^5$。\n\n对于 $20\\%$ 的数据，$1\\leq n\\leq 100$，不存在负环（可用于验证 Floyd 正确性）\n\n对于另外 $20\\%$ 的数据，$w\\ge 0$（可用于验证 Dijkstra 正确性）\n\nupd. 添加一组 Hack 数据：针对 SPFA 的 SLF 优化", "locale": "zh-CN", "translations": {"en": {"title": "[Template] All-Pairs Shortest Paths (Johnson).", "background": "", "description": "Given a directed graph with $n$ nodes and $m$ weighted edges, find the shortest path length between every pair of nodes. The length of a path is defined as the sum of the weights of all edges on the path.\n\nNote:\n\n1. Edge weights **may** be negative, and the graph **may** contain multiple edges and self-loops.\n2. Some testdata is designed to make running SPFA for $n$ rounds fail.", "inputFormat": "Line $1$: Two integers $n, m$, representing the number of nodes and the number of directed edges in the given graph.\n\nNext $m$ lines: Each line contains three integers $u, v, w$, meaning there is a directed edge of weight $w$ from node $u$ to node $v$.", "outputFormat": "If the graph contains a negative cycle, output only one line: $-1$.\n\nIf the graph does not contain a negative cycle:\n\nOutput $n$ lines. Let $dis_{i,j}$ be the shortest path from $i$ to $j$. On line $i$, output $\\sum\\limits_{j=1}^n j\\times dis_{i,j}$. Note that this value may exceed the range of `int`.\n\nIf there is no path from $i$ to $j$, then $dis_{i,j}=10^9$; if $i=j$, then $dis_{i,j}=0$.", "hint": "[Sample Explanation]\n\nThe left figure shows the directed graph given in sample $1$. The answer matrix formed by the shortest paths is:\n\n```\n0 4 11 8 11 \n1000000000 0 7 4 7 \n1000000000 -5 0 -3 0 \n1000000000 -2 5 0 3 \n1000000000 -1 4 1 0 \n```\n\nThe right figure shows the directed graph given in sample $2$. The edges marked in red form a negative cycle. Note that the given graph may be disconnected.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7lb35u4u.png)\n\n[Constraints]\n\nFor $100\\%$ of the data, $1\\leq n\\leq 3\\times 10^3,\\ \\ 1\\leq m\\leq 6\\times 10^3,\\ \\ 1\\leq u,v\\leq n,\\ \\ -3\\times 10^5\\leq w\\leq 3\\times 10^5$.\n\nFor $20\\%$ of the data, $1\\leq n\\leq 100$, and there is no negative cycle (can be used to verify Floyd correctness).\n\nFor another $20\\%$ of the data, $w\\ge 0$ (can be used to verify Dijkstra correctness).\n\nupd. Added a set of hack testdata: targeting the SLF optimization of SPFA.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】全源最短路（Johnson）", "background": "", "description": "给定一个包含 $n$ 个结点和 $m$ 条带权边的有向图，求所有点对间的最短路径长度，一条路径的长度定义为这条路径上所有边的权值和。\n\n注意：\n\n1. 边权**可能**为负，且图中**可能**存在重边和自环；\n\n2. 部分数据卡 $n$ 轮 SPFA 算法。\n\n", "inputFormat": "第 $1$ 行：$2$ 个整数 $n,m$，表示给定有向图的结点数量和有向边数量。\n\n接下来 $m$ 行：每行 $3$ 个整数 $u,v,w$，表示有一条权值为 $w$ 的有向边从编号为 $u$ 的结点连向编号为 $v$ 的结点。", "outputFormat": "若图中存在负环，输出仅一行 $-1$。\n\n若图中不存在负环：\n\n输出 $n$ 行：令 $dis_{i,j}$ 为从 $i$ 到 $j$ 的最短路，在第 $i$ 行输出 $\\sum\\limits_{j=1}^n j\\times dis_{i,j}$，注意这个结果可能超过 int 存储范围。\n\n如果不存在从 $i$ 到 $j$ 的路径，则 $dis_{i,j}=10^9$；如果 $i=j$，则 $dis_{i,j}=0$。", "hint": "【样例解释】\n\n左图为样例 $1$ 给出的有向图，最短路构成的答案矩阵为：\n\n```\n0 4 11 8 11 \n1000000000 0 7 4 7 \n1000000000 -5 0 -3 0 \n1000000000 -2 5 0 3 \n1000000000 -1 4 1 0 \n```\n\n右图为样例 $2$ 给出的有向图，红色标注的边构成了负环，注意给出的图不一定连通。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7lb35u4u.png)\n\n【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^3,\\ \\ 1\\leq m\\leq 6\\times 10^3,\\ \\ 1\\leq u,v\\leq n,\\ \\ -3\\times 10^5\\leq w\\leq 3\\times 10^5$。\n\n对于 $20\\%$ 的数据，$1\\leq n\\leq 100$，不存在负环（可用于验证 Floyd 正确性）\n\n对于另外 $20\\%$ 的数据，$w\\ge 0$（可用于验证 Dijkstra 正确性）\n\nupd. 添加一组 Hack 数据：针对 SPFA 的 SLF 优化", "locale": "zh-CN"}}}
{"pid": "P5906", "type": "P", "difficulty": 6, "samples": [["8\n1 6 2 2 3 3 1 6\n5\n1 4\n2 5\n2 8\n5 6\n1 7", "1\n1\n6\n1\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "O2优化", "模板题"], "title": "【模板】回滚莫队&不删除莫队", "background": "这是一道模板题。", "description": "给定一个序列，多次询问一段区间 $[l,r]$，求区间中**相同的数的最远间隔距离**。\n\n序列中两个元素的**间隔距离**指的是**两个元素下标差的绝对值**。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数，描述这个序列。\n\n第三行一个整数 $m$，表示询问个数。\n\n之后 $m$ 行，每行两个整数 $l,r$ 表示询问区间。", "outputFormat": "共 $m$ 行，每行一个整数表示答案。如果区间内不存在两个数相同，则输出 $0$。", "hint": "记 $a_i$ 表示序列元素。\n\n对于 $40\\%$ 的数据，满足 $1\\leq a_i \\leq 400$，$1\\leq n,m\\leq 60000$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,m\\leq 2\\cdot 10^5$，$1\\leq a_i\\leq 2\\cdot 10^9$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Rollback Mo's Algorithm & Mo's Algorithm Without Deletions", "background": "This is a template problem.", "description": "Given a sequence, you will be asked multiple queries on an interval $[l,r]$. For each query, find the **maximum distance between two equal numbers** within the interval.\n\nThe **distance** between two elements in the sequence means the **absolute difference of their indices**.", "inputFormat": "The first line contains an integer $n$, which is the length of the sequence.\n\nThe second line contains $n$ integers describing the sequence.\n\nThe third line contains an integer $m$, which is the number of queries.\n\nThen follow $m$ lines, each containing two integers $l, r$, representing the query interval.", "outputFormat": "Output $m$ lines. Each line contains one integer, the answer. If there are no two equal numbers in the interval, output $0$.", "hint": "Let $a_i$ denote the elements of the sequence.\n\nFor $40\\%$ of the testdata, $1\\leq a_i \\leq 400$, $1\\leq n,m\\leq 60000$.\n\nFor $100\\%$ of the testdata, $1\\leq n,m\\leq 2\\cdot 10^5$, $1\\leq a_i\\leq 2\\cdot 10^9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】回滚莫队&不删除莫队", "background": "这是一道模板题。", "description": "给定一个序列，多次询问一段区间 $[l,r]$，求区间中**相同的数的最远间隔距离**。\n\n序列中两个元素的**间隔距离**指的是**两个元素下标差的绝对值**。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数，描述这个序列。\n\n第三行一个整数 $m$，表示询问个数。\n\n之后 $m$ 行，每行两个整数 $l,r$ 表示询问区间。", "outputFormat": "共 $m$ 行，每行一个整数表示答案。如果区间内不存在两个数相同，则输出 $0$。", "hint": "记 $a_i$ 表示序列元素。\n\n对于 $40\\%$ 的数据，满足 $1\\leq a_i \\leq 400$，$1\\leq n,m\\leq 60000$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,m\\leq 2\\cdot 10^5$，$1\\leq a_i\\leq 2\\cdot 10^9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P5907", "type": "P", "difficulty": 7, "samples": [["6 4 3", "1030980"], ["233333333 114514 1919810", "3191086"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [454656, 454656, 454656, 454656, 454656, 454656, 454656, 454656, 454656, 454656]}, "tags": ["数学", "O2优化"], "title": "数列求和加强版 / SPOJ MOON4", "background": "[原题链接](https://www.luogu.com.cn/problem/P4948)", "description": "给定 $n,a,k$，求：\n\n$$\\sum_{i=1}^n i^k a^i$$\n答案对 $998244353$ 取模。", "inputFormat": "输入一行三个正整数 $n,a,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【数据范围】    \n对于 $20\\%$ 的数据，$1\\le n,k \\le 10^5$。  \n对于 $100\\%$ 的数据，$1\\le k \\le 10^7$，$1\\le n,a \\le 998244352$。", "locale": "zh-CN", "translations": {"en": {"title": "Enhanced Sequence Sum / SPOJ MOON4", "background": "[Original link](https://www.luogu.com.cn/problem/P4948)", "description": "Given $n$, $a$, and $k$, compute:\n\n$$\\sum_{i=1}^n i^k a^i$$\n\nOutput the answer modulo $998244353$.", "inputFormat": "Input one line with three positive integers $n$, $a$, and $k$.", "outputFormat": "Output one line with one integer representing the answer.", "hint": "Constraints  \nFor $20\\%$ of the testdata, $1\\le n,k \\le 10^5$.  \nFor $100\\%$ of the testdata, $1\\le k \\le 10^7$, $1\\le n,a \\le 998244352$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列求和加强版 / SPOJ MOON4", "background": "[原题链接](https://www.luogu.com.cn/problem/P4948)", "description": "给定 $n,a,k$，求：\n\n$$\\sum_{i=1}^n i^k a^i$$\n答案对 $998244353$ 取模。", "inputFormat": "输入一行三个正整数 $n,a,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【数据范围】    \n对于 $20\\%$ 的数据，$1\\le n,k \\le 10^5$。  \n对于 $100\\%$ 的数据，$1\\le k \\le 10^7$，$1\\le n,a \\le 998244352$。", "locale": "zh-CN"}}}
{"pid": "P5908", "type": "P", "difficulty": 2, "samples": [["5 1\n1 2\n1 3\n2 4\n3 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "广度优先搜索 BFS", "树的遍历"], "title": "猫猫和企鹅", "background": null, "description": "王国里有 $n$ 个居住区，它们之间有 $n-1$ 条道路相连，并且保证从每个居住区出发都可以到达任何一个居住区，并且每条道路的长度都为 $1$。\n\n除 $1$ 号居住区外，每个居住区住着一个小企鹅，有一天一只猫猫从 $1$ 号居住区出发，想要去拜访一些小企鹅。可是猫猫非常的懒，它只愿意去距离它不大于 $d$ 的小企鹅们。\n\n猫猫非常的懒，因此希望你告诉他，他可以拜访多少只小企鹅。", "inputFormat": "第一行两个整数 $n, d$，意义如题所述。\n\n第二行开始，共 $n - 1$ 行，每行两个整数 $u, v$，表示居民区 $u$ 和 $v$ 之间存在道路。", "outputFormat": "一行一个整数，表示猫猫可以拜访多少只小企鹅。", "hint": "对于 $100\\%$ 的数据，满足 $1 \\le n ,d \\le 10^5$，保证所有居民区从 $1$ 开始标号。", "locale": "zh-CN", "translations": {"en": {"title": "Cats and Penguins", "background": "", "description": "There are $n$ residential areas in the kingdom. They are connected by $n - 1$ roads, and it is guaranteed that from any residential area you can reach any other one. The length of each road is $1$.\n\nIn every residential area except area $1$, there lives a little penguin. One day, a cat starts from residential area $1$ and wants to visit some penguins. However, the cat is very lazy and is only willing to visit penguins whose distance from it is at most $d$.\n\nPlease tell the cat how many penguins it can visit.", "inputFormat": "The first line contains two integers $n, d$, with the meanings as described above.\n\nStarting from the second line, there are $n - 1$ lines. Each line contains two integers $u, v$, indicating that there is a road between residential areas $u$ and $v$.", "outputFormat": "Output one integer in a single line, indicating how many penguins the cat can visit.", "hint": "For $100\\%$ of the testdata, $1 \\le n, d \\le 10^5$. It is guaranteed that all residential areas are numbered starting from $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猫猫和企鹅", "background": null, "description": "王国里有 $n$ 个居住区，它们之间有 $n-1$ 条道路相连，并且保证从每个居住区出发都可以到达任何一个居住区，并且每条道路的长度都为 $1$。\n\n除 $1$ 号居住区外，每个居住区住着一个小企鹅，有一天一只猫猫从 $1$ 号居住区出发，想要去拜访一些小企鹅。可是猫猫非常的懒，它只愿意去距离它不大于 $d$ 的小企鹅们。\n\n猫猫非常的懒，因此希望你告诉他，他可以拜访多少只小企鹅。", "inputFormat": "第一行两个整数 $n, d$，意义如题所述。\n\n第二行开始，共 $n - 1$ 行，每行两个整数 $u, v$，表示居民区 $u$ 和 $v$ 之间存在道路。", "outputFormat": "一行一个整数，表示猫猫可以拜访多少只小企鹅。", "hint": "对于 $100\\%$ 的数据，满足 $1 \\le n ,d \\le 10^5$，保证所有居民区从 $1$ 开始标号。", "locale": "zh-CN"}}}
{"pid": "P5909", "type": "P", "difficulty": 5, "samples": [["4\n3 5\n5 1\n3 2\n4 6", "3\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "CTSC/CTS"], "title": "[CTSC2007] 挂缀pendant", "background": "", "description": "“珠缀花蕊，人间几多酸泪”……\n\n挂缀在很早就被人们作为一种装饰品，垂坠的风韵，华丽摇曳的摆动，展现出一种与众不同的优雅与高贵。而我们的主人公小 Q，正想买一条漂亮的挂缀放在寝室里作为装饰。\n\n挂坠的构成，是由若干粒缀珠相互连接而成。每一个缀珠由三部分组成：分别是珠子、珠子上方的连接环与珠子下方的挂钩。我们可以简单的认为从上往下数的第 $i$ 个缀珠是将它的连接环套在其上方（也就是第 $i-1$ 个）缀珠的挂钩\n之上（第 $1$ 个除外）。小 Q 想买一根足够长的挂缀，这样显得更有韵味。\n\n然而商店的老板告诉小 Q，挂缀是不可能做到任意长的，因为每一个珠子都受到重力作用，对其上方的挂钩有一定的拉力，而挂钩的承受能力是有限的。老板还告诉小 Q，他一共拥有 $N$ 个珠缀（假设每一个珠缀都很漂亮，小 Q 都很喜欢），每个珠缀都有其各自的重量与承受能力。**一个挂缀是稳定的，当且仅当对于其上的每一个珠缀，它下方所有珠缀的重量和（不包含自身）不超过其挂钩的承受能力。**\n\n小 Q 希望她的挂缀尽量长，你能帮她计算出最长可能的稳定挂缀么？当然，如果有多个可选方案，小 Q 希望总重量最小的。", "inputFormat": "第一行包含一个正整数 $N$，表示商店拥有的珠缀数目。\n\n接下来 $N$ 行，每行两个整数 $C_i$，$W_i$，分别表示第 $i$ 个珠缀的承受能力与重量。 ", "outputFormat": "共两行。\n\n第一行包含一个整数 $L$，表示可以找到的最长稳定挂缀长度。\n\n第二行包含一个整数 $W$，表示可以找到的长度为 $L$ 的稳定挂缀中的最小重量和。", "hint": "对于 $30\\%$ 的数据，$N\\le 10^4$；\n\n对于 $100\\%$ 的数据，$N\\le 2 \\times 10^5$，$W_i,C_i  \\le 2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2007] Pendant", "background": "", "description": "“Beads decorate the flower core; how many sour tears in this world”……\n\nPendants have long been used as decorations. Their hanging charm and gorgeous swinging movement show a unique elegance and nobility. Our main character, Xiao Q, wants to buy a beautiful pendant to decorate the dormitory.\n\nA pendant is made by connecting several beads. Each bead has three parts: the bead itself, a connecting ring above it, and a hook below it. We can simply think that the $i$-th bead from top to bottom is made by putting its connecting ring onto the hook of the bead above it (that is, the $(i-1)$-th bead), except for the first one. Xiao Q wants to buy a pendant that is long enough, so it looks more charming.\n\nHowever, the shop owner tells Xiao Q that a pendant cannot be arbitrarily long, because each bead is affected by gravity and thus applies a certain pulling force to the hook above it, and the hook has limited capacity. The owner also tells Xiao Q that he has a total of $N$ beads (assume every bead is very beautiful and Xiao Q likes all of them), and each bead has its own weight and load capacity. **A pendant is stable if and only if, for every bead on it, the total weight of all beads below it (excluding itself) does not exceed the capacity of its hook.**\n\nXiao Q wants the pendant to be as long as possible. Please help compute the maximum possible length of a stable pendant. Of course, if there are multiple choices, Xiao Q wants the one with the minimum total weight.", "inputFormat": "The first line contains a positive integer $N$, representing the number of beads in the shop.\n\nThe next $N$ lines each contain two integers $C_i$, $W_i$, representing the capacity and weight of the $i$-th bead, respectively.", "outputFormat": "There are two lines in total.\n\nThe first line contains an integer $L$, representing the maximum length of a stable pendant that can be found.\n\nThe second line contains an integer $W$, representing the minimum total weight among all stable pendants of length $L$.", "hint": "For $30\\%$ of the testdata, $N \\le 10^4$.\n\nFor $100\\%$ of the testdata, $N \\le 2 \\times 10^5$, $W_i, C_i \\le 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2007] 挂缀pendant", "background": "", "description": "“珠缀花蕊，人间几多酸泪”……\n\n挂缀在很早就被人们作为一种装饰品，垂坠的风韵，华丽摇曳的摆动，展现出一种与众不同的优雅与高贵。而我们的主人公小 Q，正想买一条漂亮的挂缀放在寝室里作为装饰。\n\n挂坠的构成，是由若干粒缀珠相互连接而成。每一个缀珠由三部分组成：分别是珠子、珠子上方的连接环与珠子下方的挂钩。我们可以简单的认为从上往下数的第 $i$ 个缀珠是将它的连接环套在其上方（也就是第 $i-1$ 个）缀珠的挂钩\n之上（第 $1$ 个除外）。小 Q 想买一根足够长的挂缀，这样显得更有韵味。\n\n然而商店的老板告诉小 Q，挂缀是不可能做到任意长的，因为每一个珠子都受到重力作用，对其上方的挂钩有一定的拉力，而挂钩的承受能力是有限的。老板还告诉小 Q，他一共拥有 $N$ 个珠缀（假设每一个珠缀都很漂亮，小 Q 都很喜欢），每个珠缀都有其各自的重量与承受能力。**一个挂缀是稳定的，当且仅当对于其上的每一个珠缀，它下方所有珠缀的重量和（不包含自身）不超过其挂钩的承受能力。**\n\n小 Q 希望她的挂缀尽量长，你能帮她计算出最长可能的稳定挂缀么？当然，如果有多个可选方案，小 Q 希望总重量最小的。", "inputFormat": "第一行包含一个正整数 $N$，表示商店拥有的珠缀数目。\n\n接下来 $N$ 行，每行两个整数 $C_i$，$W_i$，分别表示第 $i$ 个珠缀的承受能力与重量。 ", "outputFormat": "共两行。\n\n第一行包含一个整数 $L$，表示可以找到的最长稳定挂缀长度。\n\n第二行包含一个整数 $W$，表示可以找到的长度为 $L$ 的稳定挂缀中的最小重量和。", "hint": "对于 $30\\%$ 的数据，$N\\le 10^4$；\n\n对于 $100\\%$ 的数据，$N\\le 2 \\times 10^5$，$W_i,C_i  \\le 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P5910", "type": "P", "difficulty": 0, "samples": [["1\n7 3 4\n1 6 4 6\n7 0 3 3\n2 5 1 5\n", "0 1 0 1\n1 0 1 0\n0 1 0 1\n"], ["2\n7 3 4\n1 6 4 6\n7 0 3 3\n2 5 1 5\n", "0 1 0 1\n1 0 1 0\n0 1 0 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2007", "Special Judge", "CTSC/CTS"], "title": "[CTSC2007] 矩阵Matrix 【征集 SPJ】", "background": "", "description": "给定一个整数 $D$，$n$ 行 $m$ 列的实数矩阵 $A$，其第 $i$ 行第 $j$ 列的元素是 $a_{ij}$，且 $0 \\le a_{ij} \\le D$（$1 \\le i \\le n$，$1 \\le j \\le m$）。希望你能由此提供一个 $n$ 行 $m$ 列的 $01$ 矩阵 $B$，第 $i$ 行 第 $j$ 列的元素是 $b_{ij}$（$1 \\le i \\le n$，$1 \\le j \\le m$），$b_{ij}$ 非 $0$ 即 $1$。\n\n对于给定的 $A$ 矩阵和你提供的 $B$ 矩阵，可以求出\n\n$$p_1=\\max \\begin{cases}\\max\\limits_{ 1 \\le j \\le m} \\{ |\\sum_{i=1}^n (b_{ij}-\\frac{a_{ij}}{D})|\\}\\\\\\max\\limits_{1 \\le i \\le n} \\{ |\\sum_{j=1}^m (b_{ij}-\\frac{a_{ij}}{D})|\\}\\end{cases}$$\n\n$$p_2=\\max_{1 \\le i \\le n,1 \\le j \\le m} \\{|b_{i,j}+b_{i-1,j}+b_{i,j-1}+b_{i-1,j-1}-\\frac{a_{i,j}+a_{i-1,j}+a_{i,j-1}+a_{i-1,j-1}}{D}|\\}$$\n\n在不同的测试例子中，我们希望提供的 $B$ 矩阵能使 $p_1$ 或 $p_2$ 尽量小。", "inputFormat": "第一行有一个整数 $c$，有两种取值：$c=1$ 表示我们的最小化目标是 $p_1$，$c=2$ 则表示希望 $p_2$ 尽量小。\n\n第二行有3个整数 $D$，$n$，$m$，相邻的两个数字间用一个空格隔开，$D$ 的含义如上文所述，$n$ 和 $m$ 分别表示 $A$ 矩阵的行数和列数。\n\n以下有 $n$ 行，每行 $m$ 个实数，描述 $A$ 矩阵。其中第 $i$ 行第 $j$ 列的实数表示 $a_{ij}$，相邻的数字用一个空格隔开。", "outputFormat": "仅包含一个 $n$ 行 $m$ 列的 $01$ 矩阵 $B$，表示你求出的使 $p_c$ 尽量小的答案。其中第 $i$ 行第 $j$ 列的数字表示 $b_{ij}$。相邻的整数之间用一个空格隔开。", "hint": "对于 $40\\%$ 的数据，$c=1$；\n\n对于 $60\\%$ 的数据，$c=2$；\n\n对于 $100\\%$ 的数据，$2 \\le n ,m \\le 700$，$1 \\le D \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2007] Matrix Matrix [Seeking SPJ].", "background": "", "description": "Given an integer $D$ and a real matrix $A$ with $n$ rows and $m$ columns, the element in row $i$ and column $j$ is $a_{ij}$, and $0 \\le a_{ij} \\le D$ ($1 \\le i \\le n$, $1 \\le j \\le m$). You are asked to provide an $n \\times m$ $01$ matrix $B$, whose element in row $i$ and column $j$ is $b_{ij}$ ($1 \\le i \\le n$, $1 \\le j \\le m$), where $b_{ij}$ is either $0$ or $1$.\n\nFor the given matrix $A$ and your matrix $B$, we can compute:\n\n$$p_1=\\max \\begin{cases}\\max\\limits_{ 1 \\le j \\le m} \\{ |\\sum_{i=1}^n (b_{ij}-\\frac{a_{ij}}{D})|\\}\\\\\\max\\limits_{1 \\le i \\le n} \\{ |\\sum_{j=1}^m (b_{ij}-\\frac{a_{ij}}{D})|\\}\\end{cases}$$\n\n$$p_2=\\max_{1 \\le i \\le n,1 \\le j \\le m} \\{|b_{i,j}+b_{i-1,j}+b_{i,j-1}+b_{i-1,j-1}-\\frac{a_{i,j}+a_{i-1,j}+a_{i,j-1}+a_{i-1,j-1}}{D}|\\}$$\n\nFor different test cases, we hope that the matrix $B$ you provide can make $p_1$ or $p_2$ as small as possible.", "inputFormat": "The first line contains an integer $c$, which has two possible values: $c=1$ means our minimization target is $p_1$, and $c=2$ means we want $p_2$ to be as small as possible.\n\nThe second line contains three integers $D$, $n$, and $m$, separated by a single space. The meaning of $D$ is as described above, and $n$ and $m$ are the number of rows and columns of matrix $A$, respectively.\n\nThen follow $n$ lines, each containing $m$ real numbers describing matrix $A$. The real number in row $i$ and column $j$ is $a_{ij}$, and adjacent numbers are separated by a single space.", "outputFormat": "Output only an $n \\times m$ $01$ matrix $B$, representing the answer you found that makes $p_c$ as small as possible. The number in row $i$ and column $j$ is $b_{ij}$. Adjacent integers are separated by a single space.", "hint": "For $40\\%$ of the testdata, $c=1$.\n\nFor $60\\%$ of the testdata, $c=2$.\n\nFor $100\\%$ of the testdata, Constraints: $2 \\le n ,m \\le 700$, $1 \\le D \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2007] 矩阵Matrix 【征集 SPJ】", "background": "", "description": "给定一个整数 $D$，$n$ 行 $m$ 列的实数矩阵 $A$，其第 $i$ 行第 $j$ 列的元素是 $a_{ij}$，且 $0 \\le a_{ij} \\le D$（$1 \\le i \\le n$，$1 \\le j \\le m$）。希望你能由此提供一个 $n$ 行 $m$ 列的 $01$ 矩阵 $B$，第 $i$ 行 第 $j$ 列的元素是 $b_{ij}$（$1 \\le i \\le n$，$1 \\le j \\le m$），$b_{ij}$ 非 $0$ 即 $1$。\n\n对于给定的 $A$ 矩阵和你提供的 $B$ 矩阵，可以求出\n\n$$p_1=\\max \\begin{cases}\\max\\limits_{ 1 \\le j \\le m} \\{ |\\sum_{i=1}^n (b_{ij}-\\frac{a_{ij}}{D})|\\}\\\\\\max\\limits_{1 \\le i \\le n} \\{ |\\sum_{j=1}^m (b_{ij}-\\frac{a_{ij}}{D})|\\}\\end{cases}$$\n\n$$p_2=\\max_{1 \\le i \\le n,1 \\le j \\le m} \\{|b_{i,j}+b_{i-1,j}+b_{i,j-1}+b_{i-1,j-1}-\\frac{a_{i,j}+a_{i-1,j}+a_{i,j-1}+a_{i-1,j-1}}{D}|\\}$$\n\n在不同的测试例子中，我们希望提供的 $B$ 矩阵能使 $p_1$ 或 $p_2$ 尽量小。", "inputFormat": "第一行有一个整数 $c$，有两种取值：$c=1$ 表示我们的最小化目标是 $p_1$，$c=2$ 则表示希望 $p_2$ 尽量小。\n\n第二行有3个整数 $D$，$n$，$m$，相邻的两个数字间用一个空格隔开，$D$ 的含义如上文所述，$n$ 和 $m$ 分别表示 $A$ 矩阵的行数和列数。\n\n以下有 $n$ 行，每行 $m$ 个实数，描述 $A$ 矩阵。其中第 $i$ 行第 $j$ 列的实数表示 $a_{ij}$，相邻的数字用一个空格隔开。", "outputFormat": "仅包含一个 $n$ 行 $m$ 列的 $01$ 矩阵 $B$，表示你求出的使 $p_c$ 尽量小的答案。其中第 $i$ 行第 $j$ 列的数字表示 $b_{ij}$。相邻的整数之间用一个空格隔开。", "hint": "对于 $40\\%$ 的数据，$c=1$；\n\n对于 $60\\%$ 的数据，$c=2$；\n\n对于 $100\\%$ 的数据，$2 \\le n ,m \\le 700$，$1 \\le D \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P5911", "type": "P", "difficulty": 4, "samples": [["100 3\n24 60\n10 40\n18 50", "42"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2004", "POI（波兰）", "深度优先搜索 DFS", "剪枝", "状压 DP"], "title": "[POI 2004] PRZ", "background": "一只队伍在爬山时碰到了雪崩，他们在逃跑时遇到了一座桥，他们要尽快的过桥。", "description": "桥已经很旧了，所以它不能承受太重的东西。任何时候队伍在桥上的人都不能超过一定的限制。所以这支队伍过桥时只能分批过，当一组全部过去时，下一组才能接着过。队伍里每个人过桥都需要特定的时间，当一批队员过桥时时间应该算走得最慢的那一个，每个人也有特定的重量，我们想知道如何分批过桥能使总时间最少。", "inputFormat": "第一行两个数：$W$ 表示桥能承受的最大重量和 $n$ 表示队员总数。\n\n接下来 $n$ 行：每行两个数：$t$ 表示该队员过桥所需时间和 $w$ 表示该队员的重量。", "outputFormat": "输出一个数表示最少的过桥时间。", "hint": "对于 $100\\%$ 的数据，$100\\le W \\le400$，$1\\le n\\le 16$，$1\\le t\\le50$，$10\\le w\\le100$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2004] PRZ", "background": "A team encountered an avalanche while climbing. While escaping, they came across a bridge and need to cross it as quickly as possible.", "description": "The bridge is very old, so it cannot hold things that are too heavy. At any moment, the total weight of the people on the bridge cannot exceed a fixed limit. Therefore, the team can only cross the bridge in several batches. Only after one batch has completely crossed can the next batch start crossing.\n\nEach person needs a specific amount of time to cross the bridge. For one batch, the time taken should be counted as the slowest person's time in that batch. Each person also has a specific weight. You need to determine how to split the team into batches so that the total time is minimized.", "inputFormat": "The first line contains two integers: $W$ (the maximum weight the bridge can bear) and $n$ (the total number of team members).\n\nThe next $n$ lines each contain two integers: $t$ (the time needed for this member to cross) and $w$ (this member's weight).", "outputFormat": "Output one integer, the minimum total time needed to cross the bridge.", "hint": "For $100\\%$ of the testdata, $100 \\le W \\le 400$, $1 \\le n \\le 16$, $1 \\le t \\le 50$, $10 \\le w \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2004] PRZ", "background": "一只队伍在爬山时碰到了雪崩，他们在逃跑时遇到了一座桥，他们要尽快的过桥。", "description": "桥已经很旧了，所以它不能承受太重的东西。任何时候队伍在桥上的人都不能超过一定的限制。所以这支队伍过桥时只能分批过，当一组全部过去时，下一组才能接着过。队伍里每个人过桥都需要特定的时间，当一批队员过桥时时间应该算走得最慢的那一个，每个人也有特定的重量，我们想知道如何分批过桥能使总时间最少。", "inputFormat": "第一行两个数：$W$ 表示桥能承受的最大重量和 $n$ 表示队员总数。\n\n接下来 $n$ 行：每行两个数：$t$ 表示该队员过桥所需时间和 $w$ 表示该队员的重量。", "outputFormat": "输出一个数表示最少的过桥时间。", "hint": "对于 $100\\%$ 的数据，$100\\le W \\le400$，$1\\le n\\le 16$，$1\\le t\\le50$，$10\\le w\\le100$。", "locale": "zh-CN"}}}
{"pid": "P5912", "type": "P", "difficulty": 7, "samples": [["5\n1 2\n2 3\n4 3\n5 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] JAS", "background": "在 Byteotia 有一个洞穴。", "description": " 它包含 $n$ 个洞室和一些隧道连接他们。\n\n每个洞室之间只有一条唯一的路径连接他们。Hansel 在其中一个洞室藏了宝藏，但是它不会说出它在哪。Gretel 知道，当她询问一个洞室是否有宝藏时，如果她猜对了 Hansel 会告诉她，如果猜错了他会告诉她哪个方向会有宝藏。 给出洞穴的信息，那么无论 Hansel 把宝藏藏在了哪，求出最少要询问多少次才能找到宝藏。", "inputFormat": "输入一个数 $n$，表示洞室总数。\n\n接下来 $n-1$ 行描述 $n-1$ 条边。", "outputFormat": "输出一个数表示最少询问次数。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le50000$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2004] JAS", "background": "There is a cave in Byteotia.", "description": "It contains $n$ chambers and some tunnels connecting them.\n\nBetween any two chambers, there is exactly one unique path connecting them. Hansel hid a treasure in one of the chambers, but he will not say where it is. Gretel knows that when she asks whether a certain chamber contains the treasure, if she guesses correctly Hansel will tell her so; if she guesses wrong, he will tell her in which direction the treasure lies. Given the information about the cave, no matter where Hansel hides the treasure, find the minimum number of questions needed to guarantee finding the treasure.", "inputFormat": "The input contains an integer $n$, representing the total number of chambers.\n\nThe next $n-1$ lines describe $n-1$ edges.", "outputFormat": "Output one integer representing the minimum number of questions.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 50000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2004] JAS", "background": "在 Byteotia 有一个洞穴。", "description": " 它包含 $n$ 个洞室和一些隧道连接他们。\n\n每个洞室之间只有一条唯一的路径连接他们。Hansel 在其中一个洞室藏了宝藏，但是它不会说出它在哪。Gretel 知道，当她询问一个洞室是否有宝藏时，如果她猜对了 Hansel 会告诉她，如果猜错了他会告诉她哪个方向会有宝藏。 给出洞穴的信息，那么无论 Hansel 把宝藏藏在了哪，求出最少要询问多少次才能找到宝藏。", "inputFormat": "输入一个数 $n$，表示洞室总数。\n\n接下来 $n-1$ 行描述 $n-1$ 条边。", "outputFormat": "输出一个数表示最少询问次数。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le50000$。", "locale": "zh-CN"}}}
{"pid": "P5913", "type": "P", "difficulty": 6, "samples": [["3\n3 2\n1 2\n2 3\n4 3\n1 2\n2 3\n3 4\n3 3\n1 2\n2 3\n3 1", "TAK\nNIE\nTAK\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] KAG", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/8x4n4ya8.png)", "inputFormat": "第一行一个整数 $k$ 表示 $k$ 组数据。\n\n接下来描述每个数据开头两个数 $n$ 和 $m$，接下来 $m$ 行每行两个数表示一条边。", "outputFormat": "输出共 $k$ 行，每行输出一个判定，如果该图为 c-algae 输出 `TAK`，否则输出 `NIE`。", "hint": "对于 $100\\%$ 的数据，$1\\le k\\le10$，$1\\le n\\le10^4$，$0\\le m\\le10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2004] KAG", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/8x4n4ya8.png)", "inputFormat": "The first line contains an integer $k$, indicating there are $k$ test cases.\n\nFor each test case, it starts with two integers $n$ and $m$. Then follow $m$ lines, each containing two integers describing an edge.", "outputFormat": "Output a total of $k$ lines. For each line, output one decision: if the graph is c-algae, output `TAK`; otherwise, output `NIE`.", "hint": "For $100\\%$ of the testdata, $1\\le k\\le10$, $1\\le n\\le10^4$, $0\\le m\\le10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2004] KAG", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/8x4n4ya8.png)", "inputFormat": "第一行一个整数 $k$ 表示 $k$ 组数据。\n\n接下来描述每个数据开头两个数 $n$ 和 $m$，接下来 $m$ 行每行两个数表示一条边。", "outputFormat": "输出共 $k$ 行，每行输出一个判定，如果该图为 c-algae 输出 `TAK`，否则输出 `NIE`。", "hint": "对于 $100\\%$ 的数据，$1\\le k\\le10$，$1\\le n\\le10^4$，$0\\le m\\le10^5$。", "locale": "zh-CN"}}}
