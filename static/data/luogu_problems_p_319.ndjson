{"pid": "P7460", "type": "P", "difficulty": 0, "samples": [["5\n0 1\n1 2\n2 3\n3 4\n0 0\n9 9\n2 3\n3 2\n7 8", "0 3\n3 1\n1 4\n4 2"], ["3\n1 2\n0 2\n0 0\n1 1\n2 3", "0 1\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] Trees Gump", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Trees Gump](https://contest.felk.cvut.cz/18cerc/solved/gump.pdf)**\n\n在 Jumbarian 雨林中，大树的战略地位十分重要。Jumbarian 军队的首领选择了互相距离较近的 $N$ 棵树，并决定这 $N$ 棵树上每棵都要建一个树屋，并安排一支军队。人和材料在树与树之间的运输要依靠双向连接的索道。出于安全因素考虑，从卫星上看任意两条索道之间都没有交叉。\n\n现在已经选出了 $N$ 支军队，并且已经列出了两支军队为一对的清单。在同一对的两支军队应当在同一条索道的两端操控这条索道。军队对数比军队数少一，这就表明这一区域的连通性是有保证的。即，在分配军队后，每一支军队都可以只经过列表中出现的索道到达任意地方。\n\n剩余的工作就是如何在树顶安装索道，才能使得可以按上面的规则安排军队。", "inputFormat": "第一行包含一个整数 $N$，表示树顶数和军队数。树顶和军队都用 $0…N-1$ 编号；\n\n接下来 $N-1$ 行，每行两个整数，表示这两支军队应在同一条索道两端；\n\n接下来 $N$ 行给出每个树顶的坐标，第 $i+1$ 行包含两个数 $X_i,Y_i$，表示第 $i$ 棵树的坐标。任意三棵树不会在同一条直线上。", "outputFormat": "输出 $N-1$ 行，表示安装索道的方案，每行输出两个数 $x,y$，表示 $x,y$ 两棵树之间建一条索道。\n\n如果有多组解满足题目要求，可以输出任意一组。", "hint": "$1≤N≤10^3,0≤X_i,Y_i≤10^9$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] Trees Gump", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Trees Gump](https://contest.felk.cvut.cz/18cerc/solved/gump.pdf)**\n\n在 Jumbarian 雨林中，大树的战略地位十分重要。Jumbarian 军队的首领选择了互相距离较近的 $N$ 棵树，并决定这 $N$ 棵树上每棵都要建一个树屋，并安排一支军队。人和材料在树与树之间的运输要依靠双向连接的索道。出于安全因素考虑，从卫星上看任意两条索道之间都没有交叉。\n\n现在已经选出了 $N$ 支军队，并且已经列出了两支军队为一对的清单。在同一对的两支军队应当在同一条索道的两端操控这条索道。军队对数比军队数少一，这就表明这一区域的连通性是有保证的。即，在分配军队后，每一支军队都可以只经过列表中出现的索道到达任意地方。\n\n剩余的工作就是如何在树顶安装索道，才能使得可以按上面的规则安排军队。", "inputFormat": "第一行包含一个整数 $N$，表示树顶数和军队数。树顶和军队都用 $0…N-1$ 编号；\n\n接下来 $N-1$ 行，每行两个整数，表示这两支军队应在同一条索道两端；\n\n接下来 $N$ 行给出每个树顶的坐标，第 $i+1$ 行包含两个数 $X_i,Y_i$，表示第 $i$ 棵树的坐标。任意三棵树不会在同一条直线上。", "outputFormat": "输出 $N-1$ 行，表示安装索道的方案，每行输出两个数 $x,y$，表示 $x,y$ 两棵树之间建一条索道。\n\n如果有多组解满足题目要求，可以输出任意一组。", "hint": "$1≤N≤10^3,0≤X_i,Y_i≤10^9$", "locale": "zh-CN"}}}
{"pid": "P7461", "type": "P", "difficulty": 0, "samples": [["6\n8 2\n6 8\n4 9\n3 5\n3 0\n1 5", "4 1 4"], ["6\n1 1\n6 1\n1 6\n6 6\n3 2\n4 5", "4 2 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] Incredible Hull", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Incredible Hull](https://contest.felk.cvut.cz/18cerc/solved/hull.pdf)**\n\n在一个皇家赌场中，有一个放有很多老虎机的大房间。赌场老板感觉这个房间结构太简单，这样的话赌徒就有很大机会在没输掉那么多钱之前就离开房间。房间结构需要是固定的，因此老板设计了一个复杂的老虎机摆放和过道设计方式，这样的话人们就更容易在里面迷路了。\n\n房间的形状大致是椭圆形的。如果房间是空的，从房间内部的任何点看，整个房间都可以被看到。房间中的 $N$ 台老虎机每台都可以看做一个点，并且每台都有一个特殊的利润值，每两台老虎机利润值互不相同。老板想要这些老虎机通过过道按下面的方式连通。\n\n已经至少有三台老虎机被建在房间的墙里了，所有这些建在墙里的老虎机必须用直的过道直接相连，以形成一个围绕整个屋子并且闭合的周长路径。房间里剩下的老虎机都在这个闭合的周长路径内部。\n\n这个房间要被直过道分成更小的区域，每个区域都被它自己的周长路径包围。分割古城分成以下两步。\n\n- 第一步操作如下。如果在周长路径上有至少四台老虎机，就要选出两台老虎机作为枢纽。第一台是在周长路径上收益最多的那台老虎机；第二台也在周长路径上，并且距离第一台枢纽老虎机最远。两台老虎机之间的距离用周长路径描述，它等于从一台老虎机到另一台老虎机所经过的过道条数。如果有两台最远的老虎机，那么第二台枢纽老虎机为收益最大的老虎机。周长路径内部的区域被一条连接着这两台枢纽老虎机的过道分成两部分。这两个新形成的小区域的周长路径是包围着这片区域的原周长路径和这条新过道。这个过程重复进行，直到不能新建出新的区域为止；\n- 当前一个过程结束后，第二个分割过程开始。这个过程操作如下。对于任意内部没有过道的区域 $A$，考虑在那个区域内部的所有老虎机。如果有，就在收益最多的那台老虎机与所有在 $A$ 的周长路径 $P_A$ 上的老虎机之间建一条过道。这就将这个区域分割成了一些小区域。每个新区域的周长路径包含 $P_A$ 中的一条过道和两条新建的过道。这个过程重复进行，直到不能新建出新的区域为止。\n赌场老板想要估计他的设计的利润能力。为了计算，他定义了一个所谓的高收益配置。这个配置是一个最大的老虎机的集合，属于集合的任意两台老虎机都被一条过道直接相连。\n\n这个老板对三个盈利参数十分感兴趣。第一个盈利参数是一个高收益配置的大小，第二个参数是这个设计里高收益配置的个数，第三个参数是至少属于一个高收益配置的老虎机个数。", "inputFormat": "第一行包含一个整数 $N$ ，表示老虎机数目。\n\n接下来 $N$ 行，每行两个整数 $X,Y$，表示一台老虎机在房间里的位置。所有老虎机按利润值递减的顺序给出，没有任何三台老虎机共线。", "outputFormat": "输出三个盈利参数。", "hint": "$3≤N≤10^5,0≤X,Y≤10^9$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] Incredible Hull", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Incredible Hull](https://contest.felk.cvut.cz/18cerc/solved/hull.pdf)**\n\n在一个皇家赌场中，有一个放有很多老虎机的大房间。赌场老板感觉这个房间结构太简单，这样的话赌徒就有很大机会在没输掉那么多钱之前就离开房间。房间结构需要是固定的，因此老板设计了一个复杂的老虎机摆放和过道设计方式，这样的话人们就更容易在里面迷路了。\n\n房间的形状大致是椭圆形的。如果房间是空的，从房间内部的任何点看，整个房间都可以被看到。房间中的 $N$ 台老虎机每台都可以看做一个点，并且每台都有一个特殊的利润值，每两台老虎机利润值互不相同。老板想要这些老虎机通过过道按下面的方式连通。\n\n已经至少有三台老虎机被建在房间的墙里了，所有这些建在墙里的老虎机必须用直的过道直接相连，以形成一个围绕整个屋子并且闭合的周长路径。房间里剩下的老虎机都在这个闭合的周长路径内部。\n\n这个房间要被直过道分成更小的区域，每个区域都被它自己的周长路径包围。分割古城分成以下两步。\n\n- 第一步操作如下。如果在周长路径上有至少四台老虎机，就要选出两台老虎机作为枢纽。第一台是在周长路径上收益最多的那台老虎机；第二台也在周长路径上，并且距离第一台枢纽老虎机最远。两台老虎机之间的距离用周长路径描述，它等于从一台老虎机到另一台老虎机所经过的过道条数。如果有两台最远的老虎机，那么第二台枢纽老虎机为收益最大的老虎机。周长路径内部的区域被一条连接着这两台枢纽老虎机的过道分成两部分。这两个新形成的小区域的周长路径是包围着这片区域的原周长路径和这条新过道。这个过程重复进行，直到不能新建出新的区域为止；\n- 当前一个过程结束后，第二个分割过程开始。这个过程操作如下。对于任意内部没有过道的区域 $A$，考虑在那个区域内部的所有老虎机。如果有，就在收益最多的那台老虎机与所有在 $A$ 的周长路径 $P_A$ 上的老虎机之间建一条过道。这就将这个区域分割成了一些小区域。每个新区域的周长路径包含 $P_A$ 中的一条过道和两条新建的过道。这个过程重复进行，直到不能新建出新的区域为止。\n赌场老板想要估计他的设计的利润能力。为了计算，他定义了一个所谓的高收益配置。这个配置是一个最大的老虎机的集合，属于集合的任意两台老虎机都被一条过道直接相连。\n\n这个老板对三个盈利参数十分感兴趣。第一个盈利参数是一个高收益配置的大小，第二个参数是这个设计里高收益配置的个数，第三个参数是至少属于一个高收益配置的老虎机个数。", "inputFormat": "第一行包含一个整数 $N$ ，表示老虎机数目。\n\n接下来 $N$ 行，每行两个整数 $X,Y$，表示一台老虎机在房间里的位置。所有老虎机按利润值递减的顺序给出，没有任何三台老虎机共线。", "outputFormat": "输出三个盈利参数。", "hint": "$3≤N≤10^5,0≤X,Y≤10^9$", "locale": "zh-CN"}}}
{"pid": "P7462", "type": "P", "difficulty": 5, "samples": [["6\n0 4 4 6 6\n0 6 6 7 8\n0 1 3 3 3\n1 1 7 6 1\n1 5 4 6 8\n1 4 5 1 3", "0\n1\n0"], ["3\n0 1 1 1 1\n0 1 2 1 2\n1 1 1 1 2", "1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "并查集", "广度优先搜索 BFS", "ICPC", "CERC"], "title": "[CERC2018] Shooter Island", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Shooter Island](https://contest.felk.cvut.cz/18cerc/solved/island.pdf)**\n\n你最近被提拔成上尉，现在你正带着你的士兵在暴风雪中执行一项特别任务。战场有点特别，因为它位于北极圈内的一个巨型冰盖上。你需要和总部协调行动。总部有很多高端的计算机协助你获得战场的最新状态。AI 接口将战场建模为一个网格。每个单元格被它所处行列号唯一确定。由单元格组成的大一些的矩形用对角线顶点的单元格对表示。最初，所有单元格被冰覆盖。\n\n你可以从计算机端接收到两种信息：\n\n1. 关于打击的信息（$t=0$）：你的敌人打击了被单元格 $[x_1,y_1]$ 和 $[x_2,y_2]$ 描述的矩形区域，然后这个矩形区域就被冰冷的北冰洋海水淹没了；\n1. 来自你士兵的询问（$t=1$）：他们问是否可以乘船从 $[x_1,y_1]$ 航行到 $[x_2,y_2]$。这条船可以用一个半径为 $0.31416$ 的圆表示。注意船体全部必须一直浮在水上，并且它不能离开战场区域。\n\n你的士兵需要你的帮助！你能可靠地引导他们完成任务吗？", "inputFormat": "输入第一行包含一个整数 $L$，表示接下来的行数。\n\n接下来 $L$ 行，每行五个整数 $t,x_1,y_1,x_2,y_2$，$t$是信息的类型，$[x_1,y_1]，[x_2,y_2]$表示各自的单元格。", "outputFormat": "对于每个查询，如果可以从 $[x_1,y_1]$ 乘船到达 $[x_2,y_2]$，则输出 $1$，否则输出 $0$。", "hint": "样例输入 1 如下图所示：\n\n![#1](https://cdn.luogu.com.cn/upload/image_hosting/bdhw5j2p.png)\n\n$1 \\leq L \\leq 2 \\times 10^5,t \\in \\{0, 1\\}, 1 \\leq x_1, x_2 \\leq 50, 1 \\leq y_1, y_2 \\leq 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] Shooter Island", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Shooter Island](https://contest.felk.cvut.cz/18cerc/solved/island.pdf)**\n\n你最近被提拔成上尉，现在你正带着你的士兵在暴风雪中执行一项特别任务。战场有点特别，因为它位于北极圈内的一个巨型冰盖上。你需要和总部协调行动。总部有很多高端的计算机协助你获得战场的最新状态。AI 接口将战场建模为一个网格。每个单元格被它所处行列号唯一确定。由单元格组成的大一些的矩形用对角线顶点的单元格对表示。最初，所有单元格被冰覆盖。\n\n你可以从计算机端接收到两种信息：\n\n1. 关于打击的信息（$t=0$）：你的敌人打击了被单元格 $[x_1,y_1]$ 和 $[x_2,y_2]$ 描述的矩形区域，然后这个矩形区域就被冰冷的北冰洋海水淹没了；\n1. 来自你士兵的询问（$t=1$）：他们问是否可以乘船从 $[x_1,y_1]$ 航行到 $[x_2,y_2]$。这条船可以用一个半径为 $0.31416$ 的圆表示。注意船体全部必须一直浮在水上，并且它不能离开战场区域。\n\n你的士兵需要你的帮助！你能可靠地引导他们完成任务吗？", "inputFormat": "输入第一行包含一个整数 $L$，表示接下来的行数。\n\n接下来 $L$ 行，每行五个整数 $t,x_1,y_1,x_2,y_2$，$t$是信息的类型，$[x_1,y_1]，[x_2,y_2]$表示各自的单元格。", "outputFormat": "对于每个查询，如果可以从 $[x_1,y_1]$ 乘船到达 $[x_2,y_2]$，则输出 $1$，否则输出 $0$。", "hint": "样例输入 1 如下图所示：\n\n![#1](https://cdn.luogu.com.cn/upload/image_hosting/bdhw5j2p.png)\n\n$1 \\leq L \\leq 2 \\times 10^5,t \\in \\{0, 1\\}, 1 \\leq x_1, x_2 \\leq 50, 1 \\leq y_1, y_2 \\leq 10^5$", "locale": "zh-CN"}}}
{"pid": "P7463", "type": "P", "difficulty": 6, "samples": [["3 3\n3 1 K\n2\n1 1\n1 3", "3"], ["3 3\n3 1 Q\n2\n1 1\n1 3", "2"], ["5 5\n4 4 R\n4\n1 2\n2 1\n2 5\n5 1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] The Lord of the Kings", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [The Lord of the Kings](https://contest.felk.cvut.cz/18cerc/solved/king.pdf)**\n\n在多年与海外国家的战争后，我们的国家终于成功去除了大多数反动势力和敌人。如此光辉的胜利应该被长时间记住并庆祝。因此，我们的国王宣布将胜利日这一天定为一个公共节日，并且要举行胜利游行。在游行中，军队会跟着国王从他的宫殿出发，访问国家里的每个城市。\n\n国王和他的随从将一种环保的电动直升机作为交通工具。这种直升机有一个缺点，就是它的航程较短。国王让你和你的顾问在一些农场和所有城市中修建停机坪，使得从他的宫殿出发，经过一些停机坪后都可以到达任何城市。然而，建停机坪和基础设施都很费钱。所以要最小化最小化停机坪的修建数量。\n\n此外，由于直升机特殊的设计，国王和他的士兵需要以特殊的方式移动，这就会影响停机坪的数量和位置。\n\n给你一张这个国家的矩形网格地图，其中包含代表村庄，城市和宫殿的网格。同时，也给你了直升机的移动方式——与国际象棋中「车（Rook）」、「后（Queen）」、「象（Bishop）」、「马（Knight）」或「王（King）」之一的移动方式一样（每种棋子的详细移动方式见「数据范围与提示」）。你的任务是求出最少需要在多少农场或城市修停机坪才能够满足国王的需求。国王的宫殿中已经修建了停机坪，因此不需要修一个新的了。", "inputFormat": "第一行包含两个整数 $N,M$，表示我们的国家有 $N$ 行 $M$ 列；\n\n第二行两个整数 $X,Y$，表示国王宫殿的位置，接着一个字符，表示移动方式（R——车，Q——后，B——象，N——马，K——王）；\n\n第三行包含一个整数 $T$，表示国家里的城市数；\n\n接下来 $T$ 行，每行包含两个整数 $W,Z$，表示一个城市的位置。所有城市都在不同的网格中，没有城市和宫殿位于同一格。所有既不代表城市也不代表宫殿的格子都是农场。", "outputFormat": "输出一行一个整数，表示至少要修建多少停机坪。如果不可能使得国王和他的士兵能够到达每一个城市，输出 $-1$。", "hint": "$1 ≤ N, M ≤ 15,1 ≤ T ≤ 10, 1 ≤ X ,W ≤ N,1≤Y, Z≤M$\n\n下图为直升机的运输方式（同国际象棋对应棋子的行棋规则）：\n![#1](https://cdn.luogu.com.cn/upload/image_hosting/ip5cnfsa.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] The Lord of the Kings", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [The Lord of the Kings](https://contest.felk.cvut.cz/18cerc/solved/king.pdf)**\n\n在多年与海外国家的战争后，我们的国家终于成功去除了大多数反动势力和敌人。如此光辉的胜利应该被长时间记住并庆祝。因此，我们的国王宣布将胜利日这一天定为一个公共节日，并且要举行胜利游行。在游行中，军队会跟着国王从他的宫殿出发，访问国家里的每个城市。\n\n国王和他的随从将一种环保的电动直升机作为交通工具。这种直升机有一个缺点，就是它的航程较短。国王让你和你的顾问在一些农场和所有城市中修建停机坪，使得从他的宫殿出发，经过一些停机坪后都可以到达任何城市。然而，建停机坪和基础设施都很费钱。所以要最小化最小化停机坪的修建数量。\n\n此外，由于直升机特殊的设计，国王和他的士兵需要以特殊的方式移动，这就会影响停机坪的数量和位置。\n\n给你一张这个国家的矩形网格地图，其中包含代表村庄，城市和宫殿的网格。同时，也给你了直升机的移动方式——与国际象棋中「车（Rook）」、「后（Queen）」、「象（Bishop）」、「马（Knight）」或「王（King）」之一的移动方式一样（每种棋子的详细移动方式见「数据范围与提示」）。你的任务是求出最少需要在多少农场或城市修停机坪才能够满足国王的需求。国王的宫殿中已经修建了停机坪，因此不需要修一个新的了。", "inputFormat": "第一行包含两个整数 $N,M$，表示我们的国家有 $N$ 行 $M$ 列；\n\n第二行两个整数 $X,Y$，表示国王宫殿的位置，接着一个字符，表示移动方式（R——车，Q——后，B——象，N——马，K——王）；\n\n第三行包含一个整数 $T$，表示国家里的城市数；\n\n接下来 $T$ 行，每行包含两个整数 $W,Z$，表示一个城市的位置。所有城市都在不同的网格中，没有城市和宫殿位于同一格。所有既不代表城市也不代表宫殿的格子都是农场。", "outputFormat": "输出一行一个整数，表示至少要修建多少停机坪。如果不可能使得国王和他的士兵能够到达每一个城市，输出 $-1$。", "hint": "$1 ≤ N, M ≤ 15,1 ≤ T ≤ 10, 1 ≤ X ,W ≤ N,1≤Y, Z≤M$\n\n下图为直升机的运输方式（同国际象棋对应棋子的行棋规则）：\n![#1](https://cdn.luogu.com.cn/upload/image_hosting/ip5cnfsa.png)", "locale": "zh-CN"}}}
{"pid": "P7464", "type": "P", "difficulty": 3, "samples": [["5\n5\n6\n10\n30\n666", "0\n1\n3\n26\n2406"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] The Silence of the Lamps", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [The Silence of the Lamps](https://contest.felk.cvut.cz/18cerc/solved/lamps.pdf)**\n\n在开始之前，如果之前没有见过台灯，那么现在我们把它看做一个用玻璃做的长方体（一个矩形表面的箱子），里面都是煤气。灯的所有边长度都是整数。\n\n曾经，我们的一位讲师曾因破坏路灯而被判刑。他肯定疯了，因为他认为一些路灯向他高声尖叫。\n\n在他的想法里，他遵从一个奇怪的行为模式。他只会认出并且破坏表面不是正方形，并且体积不超过一个给定数值的路灯。后来，在与医生 Clarice 的一次会谈中，他说他非常害怕大型物体和形状过于规则的物体。\n\n你的任务是数出所有满足讲师条件的可能长方体。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行一个整数 $N$，表示最大可识别的路灯体积。", "outputFormat": "对于每组数据，输出会被破坏的不同路灯个数。", "hint": "$1≤T≤10^5$，$1≤N≤10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] The Silence of the Lamps", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [The Silence of the Lamps](https://contest.felk.cvut.cz/18cerc/solved/lamps.pdf)**\n\n在开始之前，如果之前没有见过台灯，那么现在我们把它看做一个用玻璃做的长方体（一个矩形表面的箱子），里面都是煤气。灯的所有边长度都是整数。\n\n曾经，我们的一位讲师曾因破坏路灯而被判刑。他肯定疯了，因为他认为一些路灯向他高声尖叫。\n\n在他的想法里，他遵从一个奇怪的行为模式。他只会认出并且破坏表面不是正方形，并且体积不超过一个给定数值的路灯。后来，在与医生 Clarice 的一次会谈中，他说他非常害怕大型物体和形状过于规则的物体。\n\n你的任务是数出所有满足讲师条件的可能长方体。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行一个整数 $N$，表示最大可识别的路灯体积。", "outputFormat": "对于每组数据，输出会被破坏的不同路灯个数。", "hint": "$1≤T≤10^5$，$1≤N≤10^6$。", "locale": "zh-CN"}}}
{"pid": "P7465", "type": "P", "difficulty": 4, "samples": [["2 2\nAA\nAd", "1"], ["5 5\n#####\n####.\n###..\n##...\n#....", "60"], ["5 4\nhwwr\neahe\nlroy\nlswo\noaau", "0"], ["5 6\n#girls\n##areb\n#.#est\n#..#!!\n#####!", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] Matrice", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Matrice](https://contest.felk.cvut.cz/18cerc/solved/matrice.pdf)**\n\n特工 Sue Thomas 和她的儿子正在网格中寻找 trinity。trinity 是一个新词，正如词素 tri 所示，指的是由网格中单元格组成的三角形。\n\n每个 trinity 是一个正方形的单元格区域去除某对角线上方或下方的部分（一个等腰直角三角形，两腰分别与网格两边分别平行）。对角线可以是主对角线（东南-西北方向），也可以是副对角线（西南-东北方向）。一个合法的 trinity 至少包含三个单元格，并且所有单元格中字符都相同。", "inputFormat": "输入的第一行是两个整数 $N,M$，分别表示这个网格的行数和列数。\n\n接下来 $N$ 行每行一个长为 $M$ 的字符串，表示这个网格。", "outputFormat": "输出网格中所有不同合法的 trinity 个数。", "hint": "$1≤N,m≤10^3$，保证输入中出现的字符 ASCII 码在 $33$ 到 $126$ 之间。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] Matrice", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Matrice](https://contest.felk.cvut.cz/18cerc/solved/matrice.pdf)**\n\n特工 Sue Thomas 和她的儿子正在网格中寻找 trinity。trinity 是一个新词，正如词素 tri 所示，指的是由网格中单元格组成的三角形。\n\n每个 trinity 是一个正方形的单元格区域去除某对角线上方或下方的部分（一个等腰直角三角形，两腰分别与网格两边分别平行）。对角线可以是主对角线（东南-西北方向），也可以是副对角线（西南-东北方向）。一个合法的 trinity 至少包含三个单元格，并且所有单元格中字符都相同。", "inputFormat": "输入的第一行是两个整数 $N,M$，分别表示这个网格的行数和列数。\n\n接下来 $N$ 行每行一个长为 $M$ 的字符串，表示这个网格。", "outputFormat": "输出网格中所有不同合法的 trinity 个数。", "hint": "$1≤N,m≤10^3$，保证输入中出现的字符 ASCII 码在 $33$ 到 $126$ 之间。", "locale": "zh-CN"}}}
{"pid": "P7466", "type": "P", "difficulty": 0, "samples": [["2\n2 3 4 2\n2 2 3 3\n1 4 3 4", "1"], ["3\n2 3 5 2\n1 3 1 1\n2 4 4 2\n5 4 6 5", "1"], ["1\n0 0 4 0\n0 4 4 4", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] Mirrority Report", "background": null, "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Mirrority Report](https://contest.felk.cvut.cz/18cerc/solved/report.pdf)**\n\n在物理课上，每个学生都要完成一个半期作业。你选择做一个实验，探究一种稀有的不稳定粒子的性质，这种粒子名为红色粒子。一个红色粒子永远沿直线传播，直到它被镜子反射。\n\n我们的实验可以看做一些单次反射镜组，这些反射镜可以看成二维平面上能够无限延伸的直线。一面单次反射镜只会在粒子第一次到达时将其反射，并且无论从什么方向入射都可以反射，但在此之后，粒子就只会穿过镜子了。\n\n在反射时，遵循反射定律。如果粒子到达了两面反射镜的交点，这个粒子就会崩解，否则会进行反射。\n\n镜子的摆放方式是你的实验老师设定的，你的任务是求出从一个点出发，有多少种出发的方向会让这个粒子到达一个特定的点。", "inputFormat": "第一行一个整数包含一个非负整数 $N$，表示镜子的个数；\n\n第二行包含四个整数 $S_x,S_y,E_x,E_y$，表示粒子从 $(S_x,S_y)$ 出发，终点是 $(E_x,E_y)$；\n\n接下来 $N$ 行，每行四个整数 $A_x,A_y,B_x,B_y$，表示第 $i$ 面镜子上的两点。\n\n所有输入的坐标值均在 $[-100,100]$ 之间。 起点和终点不同。从起点或终点到任何镜子的距离均不为零。\n\n保证输入中不存在任何一组合法方案使得：粒子在任何可以反射该粒子的反射镜上的入射点到两面镜子的交点间的距离小于 $10^{-4}$。", "outputFormat": "输出一行一个整数，表示从 $(S_x,S_y)$ 出发，有多少种出发的方向会让这个粒子到达 $(E_x,E_y)$。", "hint": "样例 1 如下图：\n\n![#1](https://cdn.luogu.com.cn/upload/image_hosting/kgu6l9nt.png)\n\n样例 2 如下图：\n\n![#2](https://cdn.luogu.com.cn/upload/image_hosting/wxrwuay9.png)\n\n样例 3 如下图：\n\n![#3](https://cdn.luogu.com.cn/upload/image_hosting/bir6zsvn.png)\n\n$0≤N≤8$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] Mirrority Report", "background": null, "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Mirrority Report](https://contest.felk.cvut.cz/18cerc/solved/report.pdf)**\n\n在物理课上，每个学生都要完成一个半期作业。你选择做一个实验，探究一种稀有的不稳定粒子的性质，这种粒子名为红色粒子。一个红色粒子永远沿直线传播，直到它被镜子反射。\n\n我们的实验可以看做一些单次反射镜组，这些反射镜可以看成二维平面上能够无限延伸的直线。一面单次反射镜只会在粒子第一次到达时将其反射，并且无论从什么方向入射都可以反射，但在此之后，粒子就只会穿过镜子了。\n\n在反射时，遵循反射定律。如果粒子到达了两面反射镜的交点，这个粒子就会崩解，否则会进行反射。\n\n镜子的摆放方式是你的实验老师设定的，你的任务是求出从一个点出发，有多少种出发的方向会让这个粒子到达一个特定的点。", "inputFormat": "第一行一个整数包含一个非负整数 $N$，表示镜子的个数；\n\n第二行包含四个整数 $S_x,S_y,E_x,E_y$，表示粒子从 $(S_x,S_y)$ 出发，终点是 $(E_x,E_y)$；\n\n接下来 $N$ 行，每行四个整数 $A_x,A_y,B_x,B_y$，表示第 $i$ 面镜子上的两点。\n\n所有输入的坐标值均在 $[-100,100]$ 之间。 起点和终点不同。从起点或终点到任何镜子的距离均不为零。\n\n保证输入中不存在任何一组合法方案使得：粒子在任何可以反射该粒子的反射镜上的入射点到两面镜子的交点间的距离小于 $10^{-4}$。", "outputFormat": "输出一行一个整数，表示从 $(S_x,S_y)$ 出发，有多少种出发的方向会让这个粒子到达 $(E_x,E_y)$。", "hint": "样例 1 如下图：\n\n![#1](https://cdn.luogu.com.cn/upload/image_hosting/kgu6l9nt.png)\n\n样例 2 如下图：\n\n![#2](https://cdn.luogu.com.cn/upload/image_hosting/wxrwuay9.png)\n\n样例 3 如下图：\n\n![#3](https://cdn.luogu.com.cn/upload/image_hosting/bir6zsvn.png)\n\n$0≤N≤8$", "locale": "zh-CN"}}}
{"pid": "P7467", "type": "P", "difficulty": 5, "samples": [["2 3 4\n2 3", "Petyr"], ["7 8 9\n1 2 3 4 5 6 7", "Varys"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "ICPC", "CERC"], "title": "[CERC2018] Game of Stones", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Game of Stones](https://contest.felk.cvut.cz/18cerc/solved/stones.pdf)**\n\nPetyr 和 Varys 两个人在玩游戏。游戏中选手从 $N$ 堆石子中轮流取走一些石子。在自己的回合中，Petyr 可以从任意一堆中取走最多 $A$ 个石子，Varys 可以从任意一堆中取走最多 $B$ 个石子。每一轮选手至少要取走一个石子。取走最后一个石子的一方获胜。\n\n游戏已经开始，并且现在 Petyr 要取石子。你的任务是判断在双方均采用最优策略的情况下 Petyr 是否能赢。", "inputFormat": "输入的第一行包含三个整数 $N,A,B$，表示有 $N$ 堆石子和两人的限制。\n\n第二行 $N$ 个数 $X_1,X_2,…,X_N$，表示当前所有堆中石子个数。", "outputFormat": "输出获胜者的名字。", "hint": "$1≤N,A,B,≤10^5,1≤X_i≤10^6$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CERC2018] Game of Stones", "background": "", "description": "**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [Game of Stones](https://contest.felk.cvut.cz/18cerc/solved/stones.pdf)**\n\nPetyr 和 Varys 两个人在玩游戏。游戏中选手从 $N$ 堆石子中轮流取走一些石子。在自己的回合中，Petyr 可以从任意一堆中取走最多 $A$ 个石子，Varys 可以从任意一堆中取走最多 $B$ 个石子。每一轮选手至少要取走一个石子。取走最后一个石子的一方获胜。\n\n游戏已经开始，并且现在 Petyr 要取石子。你的任务是判断在双方均采用最优策略的情况下 Petyr 是否能赢。", "inputFormat": "输入的第一行包含三个整数 $N,A,B$，表示有 $N$ 堆石子和两人的限制。\n\n第二行 $N$ 个数 $X_1,X_2,…,X_N$，表示当前所有堆中石子个数。", "outputFormat": "输出获胜者的名字。", "hint": "$1≤N,A,B,≤10^5,1≤X_i≤10^6$", "locale": "zh-CN"}}}
{"pid": "P7468", "type": "P", "difficulty": 7, "samples": [["1000\n3\n3 2 1", "110\n"], ["11111100101\n4\n2 0 2 1", "143901603\n"], ["1001011001101001\n16\n1 0 0 1 0 1 1 0 0 1 1 0 1 0 0 1", "184740992\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOI Online"], "title": "[NOI Online 2021 提高组] 愤怒的小 N", "background": "", "description": "极度愤怒的小 N 通关了一款游戏来泄愤。\n\n这款游戏共有 $n$ 关，分别为第 $0$ 关、第 $1$ 关、第 $2$ 关、$\\cdots$、第 $n-1$ 关。这些关卡中有一些是普通关卡，另一些则是奖励关卡。\n\n这款游戏中普通关卡与奖励关卡的分布比较特殊。如果用字符 $\\texttt{a}$ 表示普通关卡，用字符 $\\texttt{b}$ 表示奖励关卡，那么第 $0$ 关、第 $1$ 关、第 $2$ 关、$\\cdots$、第 $n-1$ 关依次排列形成的字符串是一个无穷字符串 $s$ 的前缀，且 $s$ 可以按照如下方式构造：\n\n1. 初始时 $s$ 为包含单个字符 $\\texttt{a}$ 的字符串。\n\n2. 将 $s$ 的每个字符 $\\texttt{a}$ 替换成字符 $\\texttt{b}$，每个字符 $\\texttt{b}$ 替换成字符 $\\texttt{a}$ 得到字符串 $t$，然后将 $t$ 拼接到 $s$ 后。\n3. 不断执行2. 得到的字符串就是最终的 $s$。\n\n可以发现 $s=\\texttt{abbabaabbaababba}\\cdots$，所以这款游戏的第 $0$ 关是普通关卡，第 $1$ 关\n是奖励关卡，第 $2$ 关是奖励关卡，第 $3$ 关是普通关卡，以此类推。\n\n通过游戏的第 $i$ 关可以得到 $f(i)$ 分，其中 $f(x)=a_0+a_1x+a_2x^2+\\cdots+a_{k-1}x^{k-1}$ \n是一个固定的 $k-1$ 次多项式。\n\n小 N 通关时一气之下通过了所有奖励关卡而忽略了所有普通关卡，然后就把游戏卸载了。现在回想起来，他想要知道他在卸载游戏前的总得分对 $10^9+7$ 取模后的结果。", "inputFormat": "第一行一个正整数 $n$，表示游戏的关卡数目。为方便，$n$ 以二进制表示给出。\n\n第二行一个正整数 $k$，表示多项式的次数加一。\n\n第三行 $k$ 个非负整数，分别为 $a_0,a_1,a_2,\\cdots,a_{k-1}$，表示多项式的各项系数。", "outputFormat": "一行一个非负整数，表示小 N 卸载游戏前的总得分对 $10^9 + 7$ 取模后的结果。", "hint": "对于所有测试点：$0\\le \\log_2n<5\\times 10^5$，$1\\le k\\le 500$，$0\\le a_i < 10^9 + 7$，$a_{k-1}\\ne 0。$\n\n| 测试点编号 | $\\log_2n\\le$ | $k\\le$ |\n|:-:|:-:|:-:|\n| $1\\sim2$ | $10$ |$500$ |\n| $3\\sim4$ | $20$ | $500$ |\n| $5\\sim8$ | $100$ | $500$ |\n| $9\\sim10$ | $500$ | $500$ |\n| $11\\sim12$ | $5\\times 10^5$ | $1$ |\n| $13\\sim16$ | $5\\times 10^5$ | $100$ |\n| $17\\sim20$ | $5\\times 10^5$ | $500$ |\n\n感谢 [s_r_f](https://www.luogu.com.cn/user/52518) 提供数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2021 提高组] 愤怒的小 N", "background": "", "description": "极度愤怒的小 N 通关了一款游戏来泄愤。\n\n这款游戏共有 $n$ 关，分别为第 $0$ 关、第 $1$ 关、第 $2$ 关、$\\cdots$、第 $n-1$ 关。这些关卡中有一些是普通关卡，另一些则是奖励关卡。\n\n这款游戏中普通关卡与奖励关卡的分布比较特殊。如果用字符 $\\texttt{a}$ 表示普通关卡，用字符 $\\texttt{b}$ 表示奖励关卡，那么第 $0$ 关、第 $1$ 关、第 $2$ 关、$\\cdots$、第 $n-1$ 关依次排列形成的字符串是一个无穷字符串 $s$ 的前缀，且 $s$ 可以按照如下方式构造：\n\n1. 初始时 $s$ 为包含单个字符 $\\texttt{a}$ 的字符串。\n\n2. 将 $s$ 的每个字符 $\\texttt{a}$ 替换成字符 $\\texttt{b}$，每个字符 $\\texttt{b}$ 替换成字符 $\\texttt{a}$ 得到字符串 $t$，然后将 $t$ 拼接到 $s$ 后。\n3. 不断执行2. 得到的字符串就是最终的 $s$。\n\n可以发现 $s=\\texttt{abbabaabbaababba}\\cdots$，所以这款游戏的第 $0$ 关是普通关卡，第 $1$ 关\n是奖励关卡，第 $2$ 关是奖励关卡，第 $3$ 关是普通关卡，以此类推。\n\n通过游戏的第 $i$ 关可以得到 $f(i)$ 分，其中 $f(x)=a_0+a_1x+a_2x^2+\\cdots+a_{k-1}x^{k-1}$ \n是一个固定的 $k-1$ 次多项式。\n\n小 N 通关时一气之下通过了所有奖励关卡而忽略了所有普通关卡，然后就把游戏卸载了。现在回想起来，他想要知道他在卸载游戏前的总得分对 $10^9+7$ 取模后的结果。", "inputFormat": "第一行一个正整数 $n$，表示游戏的关卡数目。为方便，$n$ 以二进制表示给出。\n\n第二行一个正整数 $k$，表示多项式的次数加一。\n\n第三行 $k$ 个非负整数，分别为 $a_0,a_1,a_2,\\cdots,a_{k-1}$，表示多项式的各项系数。", "outputFormat": "一行一个非负整数，表示小 N 卸载游戏前的总得分对 $10^9 + 7$ 取模后的结果。", "hint": "对于所有测试点：$0\\le \\log_2n<5\\times 10^5$，$1\\le k\\le 500$，$0\\le a_i < 10^9 + 7$，$a_{k-1}\\ne 0。$\n\n| 测试点编号 | $\\log_2n\\le$ | $k\\le$ |\n|:-:|:-:|:-:|\n| $1\\sim2$ | $10$ |$500$ |\n| $3\\sim4$ | $20$ | $500$ |\n| $5\\sim8$ | $100$ | $500$ |\n| $9\\sim10$ | $500$ | $500$ |\n| $11\\sim12$ | $5\\times 10^5$ | $1$ |\n| $13\\sim16$ | $5\\times 10^5$ | $100$ |\n| $17\\sim20$ | $5\\times 10^5$ | $500$ |\n\n感谢 [s_r_f](https://www.luogu.com.cn/user/52518) 提供数据。", "locale": "zh-CN"}}}
{"pid": "P7469", "type": "P", "difficulty": 4, "samples": [["5\nbcabc\nbbcca", "9"], ["20\negebejbhcfabgegjgiig\nedfbhhighajibcgfecef", "34"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "2021", "哈希 hashing", "NOI Online"], "title": "[NOI Online 2021 提高组] 积木小赛", "background": "", "description": "Alice 和 Bob 最近热衷于玩一个游戏——积木小赛。\n\nAlice 和 Bob 初始时各有 $n$ 块积木从左至右排成一排，每块积木都被标上了一个英文小写字母。\n\nAlice 可以从自己的积木中丢掉任意多块（也可以不丢）；Bob 可以从自己的积木中丢掉最左边的一段连续的积木和最右边的一段连续的积木（也可以有一边不丢或者两边都不丢）。两人都不能丢掉自己所有的积木。然后 Alice 和 Bob 会分别将自己剩下的积木按原来的顺序重新排成一排。\n\nAlice 和 Bob 都忙着去玩游戏了，于是想请你帮他们算一下，有多少种不同的情况下他们最后剩下的两排积木是相同的。\n\n两排积木相同，当且仅当这两排积木块数相同且每一个位置上的字母都对应相同。\n\n两种情况不同，当且仅当 Alice（或者 Bob）剩下的积木在两种情况中不同。", "inputFormat": "第一行一个正整数 $n$，表示积木的块数。\n\n第二行一个长度为 $n$ 的小写字母串 $s$，表示 Alice 初始的那一排积木，其中第 $i$ 个字母 $s_i$ 表示第 $i$ 块积木上的字母。\n\n第三行一个长度为 $n$ 的小写字母串 $t$，表示 Bob 初始的那一排积木，其中第 $i$ 个字母 $t_i$ 表示第 $i$ 块积木上的字母。", "outputFormat": "一行一个非负整数表示答案。", "hint": "对于所有测试点：$1\\le n \\le 3000$，$s$ 与 $t$ 中只包含英文小写字母。\n\n测试点 $1$ 满足：$n\\le3000$，$s$ 与 $t$ 中只包含同一种字母。\n\n测试点 $2,3,4$ 满足：$n\\le100$。\n\n测试点 $5,6,7$ 满足：$n\\le500$。\n\n测试点 $8,9,10$ 满足：$n\\le3000$。\n\n感谢 [w33z8kqrqk8zzzx33](https://www.luogu.com.cn/user/220037) 提供测试数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2021 提高组] 积木小赛", "background": "", "description": "Alice 和 Bob 最近热衷于玩一个游戏——积木小赛。\n\nAlice 和 Bob 初始时各有 $n$ 块积木从左至右排成一排，每块积木都被标上了一个英文小写字母。\n\nAlice 可以从自己的积木中丢掉任意多块（也可以不丢）；Bob 可以从自己的积木中丢掉最左边的一段连续的积木和最右边的一段连续的积木（也可以有一边不丢或者两边都不丢）。两人都不能丢掉自己所有的积木。然后 Alice 和 Bob 会分别将自己剩下的积木按原来的顺序重新排成一排。\n\nAlice 和 Bob 都忙着去玩游戏了，于是想请你帮他们算一下，有多少种不同的情况下他们最后剩下的两排积木是相同的。\n\n两排积木相同，当且仅当这两排积木块数相同且每一个位置上的字母都对应相同。\n\n两种情况不同，当且仅当 Alice（或者 Bob）剩下的积木在两种情况中不同。", "inputFormat": "第一行一个正整数 $n$，表示积木的块数。\n\n第二行一个长度为 $n$ 的小写字母串 $s$，表示 Alice 初始的那一排积木，其中第 $i$ 个字母 $s_i$ 表示第 $i$ 块积木上的字母。\n\n第三行一个长度为 $n$ 的小写字母串 $t$，表示 Bob 初始的那一排积木，其中第 $i$ 个字母 $t_i$ 表示第 $i$ 块积木上的字母。", "outputFormat": "一行一个非负整数表示答案。", "hint": "对于所有测试点：$1\\le n \\le 3000$，$s$ 与 $t$ 中只包含英文小写字母。\n\n测试点 $1$ 满足：$n\\le3000$，$s$ 与 $t$ 中只包含同一种字母。\n\n测试点 $2,3,4$ 满足：$n\\le100$。\n\n测试点 $5,6,7$ 满足：$n\\le500$。\n\n测试点 $8,9,10$ 满足：$n\\le3000$。\n\n感谢 [w33z8kqrqk8zzzx33](https://www.luogu.com.cn/user/220037) 提供测试数据。", "locale": "zh-CN"}}}
{"pid": "P7470", "type": "P", "difficulty": 7, "samples": [["4 2\n1 1\n4 2\n5 1\n2 7\n1 4 6 5\n2 4 3 3", "2\n1"], ["20 10\n215 144\n2 110\n174 132\n214 142\n116 108\n155 192\n236 208\n216 214\n99 220\n236 118\n190 81\n230 131\n10 238\n189 198\n183 13\n45 193\n14 234\n208 192\n126 19\n49 38\n7 14 251 184\n2 18 89 76\n11 15 49 196\n8 11 83 139\n10 15 119 239\n9 16 148 120\n11 17 225 34\n15 16 3 46\n14 15 86 227\n7 18 252 103", "7\n2\n2\n2\n1\n3\n1\n1\n0\n7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOI Online"], "title": "[NOI Online 2021 提高组] 岛屿探险", "background": "", "description": "凇睦是一个喜欢探险的女孩子，这天她到一片海域上来探险了。\n\n在这片海域上一共有 $n$ 座岛屿排成一排，标号为 $1,2,3, \\ldots ,n$。每座岛屿有两个权值，分别为劳累度 $a_i$ 和有趣度 $b_i$。\n\n对于一座劳累度为 $a$，有趣度为 $b$ 的小岛，如果这个小岛满足 $(a\\oplus c) \\leq \\min(b,d)$，凇睦到这座岛探险就会感到开心，其中 $c$ 表示凇睦到岛上去之前就有的劳累度（称作初始劳累度），同理 $d$ 代表凇睦的初始有趣度。$\\oplus$ 表示二进制异或（即二进制表示下不进位的加法）。\n\n为了玩的更尽兴，凇睦会向你询问 $q$ 次，每次给出一个区间 $[l_i,r_i]$ 和两个数 $c_i,d_i$，你需要告诉凇睦若她的初始劳累度为 $c_i$，初始有趣度为 $d_i$，则有多少个标号在 $[l_i,r_i]$ 这个区间内的岛屿能使凇睦探险时感到开心。", "inputFormat": "第一行两个正整数 $n,q$ 分别表示岛屿的数量和询问的数量。\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$ 分别表示第 $i$ 座岛屿的劳累度和有趣度。\n\n接下来 $q$ 行，每行四个正整数 $l_i,r_i,c_i,d_i$ 分别表示区间左端点，区间右端点，初始劳累度与初始有趣度。", "outputFormat": "输出一共 $q$ 行，每行一个整数对应一个询问的答案。\n", "hint": "测试点 $1,2$ 满足 $1\\leq n,q\\leq 5000$。\n\n测试点 $3,4$ 满足 $1\\leq n,q\\leq 10^4$。\n\n测试点 $5,6,7$ 满足 $1\\leq n,q\\leq 10^5$ 且 $\\max\\{d_i\\}\\leq \\min\\{b_i\\}$。\n\n测试点 $8,9,10,11$ 满足 $1\\leq n,q\\leq 10^5$ 且 $\\min\\{d_i\\}\\geq \\max\\{b_i\\}$。\n\n测试点 $12,13$ 满足 $1\\leq n,q\\leq 10^5$ 且 $l_i=1,r_i=n$。\n\n测试点 $14,15,16$ 满足 $1\\leq n,q\\leq 7\\times 10^4$。\n\n测试点 $17,18,19,20$ 满足 $1\\leq n,q\\leq 10^5$。\n\n所有数据满足 $1\\leq n,q\\leq 10^5$， $1\\leq a_i,b_i,c_i,d_i\\leq 2^{24}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2021 提高组] 岛屿探险", "background": "", "description": "凇睦是一个喜欢探险的女孩子，这天她到一片海域上来探险了。\n\n在这片海域上一共有 $n$ 座岛屿排成一排，标号为 $1,2,3, \\ldots ,n$。每座岛屿有两个权值，分别为劳累度 $a_i$ 和有趣度 $b_i$。\n\n对于一座劳累度为 $a$，有趣度为 $b$ 的小岛，如果这个小岛满足 $(a\\oplus c) \\leq \\min(b,d)$，凇睦到这座岛探险就会感到开心，其中 $c$ 表示凇睦到岛上去之前就有的劳累度（称作初始劳累度），同理 $d$ 代表凇睦的初始有趣度。$\\oplus$ 表示二进制异或（即二进制表示下不进位的加法）。\n\n为了玩的更尽兴，凇睦会向你询问 $q$ 次，每次给出一个区间 $[l_i,r_i]$ 和两个数 $c_i,d_i$，你需要告诉凇睦若她的初始劳累度为 $c_i$，初始有趣度为 $d_i$，则有多少个标号在 $[l_i,r_i]$ 这个区间内的岛屿能使凇睦探险时感到开心。", "inputFormat": "第一行两个正整数 $n,q$ 分别表示岛屿的数量和询问的数量。\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$ 分别表示第 $i$ 座岛屿的劳累度和有趣度。\n\n接下来 $q$ 行，每行四个正整数 $l_i,r_i,c_i,d_i$ 分别表示区间左端点，区间右端点，初始劳累度与初始有趣度。", "outputFormat": "输出一共 $q$ 行，每行一个整数对应一个询问的答案。\n", "hint": "测试点 $1,2$ 满足 $1\\leq n,q\\leq 5000$。\n\n测试点 $3,4$ 满足 $1\\leq n,q\\leq 10^4$。\n\n测试点 $5,6,7$ 满足 $1\\leq n,q\\leq 10^5$ 且 $\\max\\{d_i\\}\\leq \\min\\{b_i\\}$。\n\n测试点 $8,9,10,11$ 满足 $1\\leq n,q\\leq 10^5$ 且 $\\min\\{d_i\\}\\geq \\max\\{b_i\\}$。\n\n测试点 $12,13$ 满足 $1\\leq n,q\\leq 10^5$ 且 $l_i=1,r_i=n$。\n\n测试点 $14,15,16$ 满足 $1\\leq n,q\\leq 7\\times 10^4$。\n\n测试点 $17,18,19,20$ 满足 $1\\leq n,q\\leq 10^5$。\n\n所有数据满足 $1\\leq n,q\\leq 10^5$， $1\\leq a_i,b_i,c_i,d_i\\leq 2^{24}-1$。", "locale": "zh-CN"}}}
{"pid": "P7471", "type": "P", "difficulty": 3, "samples": [["6\n0 0 8\n0 5 3\n9 9 0\n6 2 4\n1 7 4\n5 8 5", "0\n2\n1\n2\n3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOI Online", "分类讨论"], "title": "[NOI Online 2021 入门组] 切蛋糕", "background": "", "description": "Alice、Bob 和 Cindy 三个好朋友得到了一个圆形蛋糕，他们打算分享这个蛋糕。\n\n三个人的需求量分别为 $a,b,c$，现在请你帮他们切蛋糕，规则如下：\n\n1. 每次切蛋糕可以选择蛋糕的任意一条直径，并沿这条直径切一刀（注意切完后不会立刻将蛋糕分成两部分）。\n\n2. 设你一共切了 $n$ 刀，那么你将得到 $2n$ 个扇形的蛋糕（特别地，切了 $0$ 刀被认为是有一个扇形，即整个圆形蛋糕），将这些蛋糕分配给 Alice，Bob 和 Cindy，要求每个扇形蛋糕只能完整地分给一个人。\n\n3. 三人分到的蛋糕面积比需要为 $a:b:c$（不保证是最简比例，且如果 $a:b:c$ 中某个数为 $0$，表示那个人不吃蛋糕）。\n\n为了完成这个任务，你至少需要切几刀？", "inputFormat": "本题单个测试点包含多组数据。\n\n第一行包含一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行包含三个整数 $a,b,c$，表示三人的需求量。", "outputFormat": "输出 $T$ 行，第 $i$ 行的输出表示第 $i$ 组数据中你至少需要切蛋糕的次数。", "hint": "### 样例 $1$ 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/i3pai9va.png)\n\n### 数据范围与提示\n$30\\%$ 的数据满足：$a=b=0$。\n\n$60\\%$ 的数据满足：$a=0$。\n\n$100\\%$ 的数据满足：$1\\le T\\le 10^4，0\\le a,b,c\\le 10^8$，保证 $a+b+c>0$。\n\n数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2021 入门组] 切蛋糕", "background": "", "description": "Alice、Bob 和 Cindy 三个好朋友得到了一个圆形蛋糕，他们打算分享这个蛋糕。\n\n三个人的需求量分别为 $a,b,c$，现在请你帮他们切蛋糕，规则如下：\n\n1. 每次切蛋糕可以选择蛋糕的任意一条直径，并沿这条直径切一刀（注意切完后不会立刻将蛋糕分成两部分）。\n\n2. 设你一共切了 $n$ 刀，那么你将得到 $2n$ 个扇形的蛋糕（特别地，切了 $0$ 刀被认为是有一个扇形，即整个圆形蛋糕），将这些蛋糕分配给 Alice，Bob 和 Cindy，要求每个扇形蛋糕只能完整地分给一个人。\n\n3. 三人分到的蛋糕面积比需要为 $a:b:c$（不保证是最简比例，且如果 $a:b:c$ 中某个数为 $0$，表示那个人不吃蛋糕）。\n\n为了完成这个任务，你至少需要切几刀？", "inputFormat": "本题单个测试点包含多组数据。\n\n第一行包含一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行包含三个整数 $a,b,c$，表示三人的需求量。", "outputFormat": "输出 $T$ 行，第 $i$ 行的输出表示第 $i$ 组数据中你至少需要切蛋糕的次数。", "hint": "### 样例 $1$ 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/i3pai9va.png)\n\n### 数据范围与提示\n$30\\%$ 的数据满足：$a=b=0$。\n\n$60\\%$ 的数据满足：$a=0$。\n\n$100\\%$ 的数据满足：$1\\le T\\le 10^4，0\\le a,b,c\\le 10^8$，保证 $a+b+c>0$。\n\n数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 提供。", "locale": "zh-CN"}}}
{"pid": "P7472", "type": "P", "difficulty": 3, "samples": [["4\n20 1 19 2\n3 18 4 17\n16 5 15 6\n7 14 8 13", "132"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "枚举", "NOI Online"], "title": "[NOI Online 2021 入门组] 吃豆人", "background": "", "description": "有一个 $n$ 行 $n$ 列的正方形点阵，左上角点坐标为 $(1, 1)$，右下角点坐标为 $(n, n)$。\n\n点阵中每个整点上都有数量不一的豆子，坐标为 $(i, j)$ 的点上有 $a_{i,j}$ 个豆子。\n\n你可以放置吃豆人，可以将点阵中任意的整点作为吃豆人的初始位置，再给定左上、左下、右上、右下之一作为吃豆人的初始方向。\n\n吃豆人会不断沿初始方向行进，吃光遇到的所有豆子，直到碰到点阵的边界，此时：\n\n1. 如果吃豆人处于正方形点阵四个角之一的位置，那么就会停止行动；\n\n2. 否则，吃豆人的行进路线将以这条边界为镜面发生反射，下图展示了一个路径某两次发生反射的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6tji95nq.png)\n\n现在，你需要放置两个吃豆人，求两个吃豆人最多共能吃到多少个豆子？注意同一个豆子只能被吃一次。\n", "inputFormat": "第一行包含一个整数 $n$，表示点阵大小。\n\n接下来 $n$ 行，每行包含 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数表示 $a_{i,j}$。\n", "outputFormat": "输出一行一个整数，表示两个吃豆人最多共能吃到的豆子数量。", "hint": "### 样例 1 解释\n\n在 $(1, 1)$ 和 $(1, 3)$ 位置放置吃豆人，初始方向分别为右下和左下，即可吃到位于\n$(1, 1)$，$(1, 3)$，$(2, 2)$，$(2, 4)$，$(3, 1)$，$(3, 3)$，$(4, 2)$，$(4, 4)$ 位置上的豆子，总个数为 $132$，\n达到最大，路径分别如下图绿线和红线所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1axaad1b.png)\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n\\leq 3$。\n\n对于 $60\\%$ 的数据：$n\\leq 100$。\n\n对于 $100\\%$ 的数据：$2\\leq n\\leq 1000$，$0\\leq a_{i,j}\\leq 1000$。\n\n数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 和 [Karry5307](https://www.luogu.com.cn/user/60990) 共同提供。\n\n感谢 [Silence_water](https://www.luogu.com.cn/user/338630) 提供一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2021 入门组] 吃豆人", "background": "", "description": "有一个 $n$ 行 $n$ 列的正方形点阵，左上角点坐标为 $(1, 1)$，右下角点坐标为 $(n, n)$。\n\n点阵中每个整点上都有数量不一的豆子，坐标为 $(i, j)$ 的点上有 $a_{i,j}$ 个豆子。\n\n你可以放置吃豆人，可以将点阵中任意的整点作为吃豆人的初始位置，再给定左上、左下、右上、右下之一作为吃豆人的初始方向。\n\n吃豆人会不断沿初始方向行进，吃光遇到的所有豆子，直到碰到点阵的边界，此时：\n\n1. 如果吃豆人处于正方形点阵四个角之一的位置，那么就会停止行动；\n\n2. 否则，吃豆人的行进路线将以这条边界为镜面发生反射，下图展示了一个路径某两次发生反射的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6tji95nq.png)\n\n现在，你需要放置两个吃豆人，求两个吃豆人最多共能吃到多少个豆子？注意同一个豆子只能被吃一次。\n", "inputFormat": "第一行包含一个整数 $n$，表示点阵大小。\n\n接下来 $n$ 行，每行包含 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数表示 $a_{i,j}$。\n", "outputFormat": "输出一行一个整数，表示两个吃豆人最多共能吃到的豆子数量。", "hint": "### 样例 1 解释\n\n在 $(1, 1)$ 和 $(1, 3)$ 位置放置吃豆人，初始方向分别为右下和左下，即可吃到位于\n$(1, 1)$，$(1, 3)$，$(2, 2)$，$(2, 4)$，$(3, 1)$，$(3, 3)$，$(4, 2)$，$(4, 4)$ 位置上的豆子，总个数为 $132$，\n达到最大，路径分别如下图绿线和红线所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1axaad1b.png)\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n\\leq 3$。\n\n对于 $60\\%$ 的数据：$n\\leq 100$。\n\n对于 $100\\%$ 的数据：$2\\leq n\\leq 1000$，$0\\leq a_{i,j}\\leq 1000$。\n\n数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 和 [Karry5307](https://www.luogu.com.cn/user/60990) 共同提供。\n\n感谢 [Silence_water](https://www.luogu.com.cn/user/338630) 提供一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P7473", "type": "P", "difficulty": 5, "samples": [["4 4 3\n2 2\n2 4\n3 2\n4 4\n1 3 4 3\n2 1 2 1\n1 2 3 4", "1\n0\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2021", "最短路", "NOI Online"], "title": "[NOI Online 2021 入门组] 重力球", "background": null, "description": "“重力球”游戏在一块 $n\\times n$ 的正方形区域中进行，记从上往下第 $i$ 行，从左往右第 $j$ 列的位置为 $(i,j)$。\n\n正方形区域中存在 $m$ 个障碍，第 $i$ 个障碍占据位置 $(x_i,y_i)$，此外，正方形区域的边界外都是障碍。\n\n现在有两个小球，位置分别是 $(a,b)$ 和 $(c,d)$，在游戏中你可以进行如下操作：\n\n- 指定上、下、左、右中的一个方向，将重力方向“切换”为这个方向。此时两个小球会同时向这个方向移动，直到碰到障碍。\n\n你要用最少的操作次数使得两个小球到达同一个位置。\n\n现有 $q$ 局游戏，每局游戏中只有小球的初始位置不同，而障碍位置是不变的，你需要对每局游戏都求出最小操作次数，或报告无解。", "inputFormat": "第一行包含三个整数 $n,m,q$，分别表示矩形区域大小，障碍个数和游戏局数。\n\n接下来 $m$ 行，每行包含两个整数 $x_i,y_i$，表示位置 $(x_i,y_i)$ 上有一个障碍。数据保证所有障碍所处的位置互不相同。\n\n接下来 $q$ 行，每行四个整数 $a,b,c,d$，表示一局游戏中两个小球的初始位置，保证初始位置不存在障碍。", "outputFormat": "输出共 $q$ 行，第 $i$ 行输出一个整数表示第 $i$ 局游戏需要的最小操作次数，如果无解则输出 `-1`。", "hint": "### 样例 $1$ 解释\n\n该样例中障碍分布如图中红叉所示。\n\n第一组询问中只需将重力改向上（或改向下）即可使两球同时到达。\n\n第二组询问中两球已经在同一位置故不需操作。\n\n第三组询问中改变 $3$ 次重力的方向，依次改为向左、向下、向左，小球移动路线分别如图中粉色、橙色、棕色线所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7nngrov0.png)\n### 数据范围与提示\n对于 $20\\%$ 的数据：$n,m\\le 2$。\n\n对于 $50\\%$ 的数据：$n,m\\le30$。\n\n对于另外 $30\\%$ 的数据：$q=1$。\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le250，1\\le q\\le10^5，1\\le x_i,y_i,a,b,c,d\\le n$。\n\n数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 提供。\n\n数据参考了 小喵喵不喜欢计算几何 2020 ICPC 区域赛（南京）A 题的构造方案，在此表示感谢。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2021 入门组] 重力球", "background": null, "description": "“重力球”游戏在一块 $n\\times n$ 的正方形区域中进行，记从上往下第 $i$ 行，从左往右第 $j$ 列的位置为 $(i,j)$。\n\n正方形区域中存在 $m$ 个障碍，第 $i$ 个障碍占据位置 $(x_i,y_i)$，此外，正方形区域的边界外都是障碍。\n\n现在有两个小球，位置分别是 $(a,b)$ 和 $(c,d)$，在游戏中你可以进行如下操作：\n\n- 指定上、下、左、右中的一个方向，将重力方向“切换”为这个方向。此时两个小球会同时向这个方向移动，直到碰到障碍。\n\n你要用最少的操作次数使得两个小球到达同一个位置。\n\n现有 $q$ 局游戏，每局游戏中只有小球的初始位置不同，而障碍位置是不变的，你需要对每局游戏都求出最小操作次数，或报告无解。", "inputFormat": "第一行包含三个整数 $n,m,q$，分别表示矩形区域大小，障碍个数和游戏局数。\n\n接下来 $m$ 行，每行包含两个整数 $x_i,y_i$，表示位置 $(x_i,y_i)$ 上有一个障碍。数据保证所有障碍所处的位置互不相同。\n\n接下来 $q$ 行，每行四个整数 $a,b,c,d$，表示一局游戏中两个小球的初始位置，保证初始位置不存在障碍。", "outputFormat": "输出共 $q$ 行，第 $i$ 行输出一个整数表示第 $i$ 局游戏需要的最小操作次数，如果无解则输出 `-1`。", "hint": "### 样例 $1$ 解释\n\n该样例中障碍分布如图中红叉所示。\n\n第一组询问中只需将重力改向上（或改向下）即可使两球同时到达。\n\n第二组询问中两球已经在同一位置故不需操作。\n\n第三组询问中改变 $3$ 次重力的方向，依次改为向左、向下、向左，小球移动路线分别如图中粉色、橙色、棕色线所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7nngrov0.png)\n### 数据范围与提示\n对于 $20\\%$ 的数据：$n,m\\le 2$。\n\n对于 $50\\%$ 的数据：$n,m\\le30$。\n\n对于另外 $30\\%$ 的数据：$q=1$。\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le250，1\\le q\\le10^5，1\\le x_i,y_i,a,b,c,d\\le n$。\n\n数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 提供。\n\n数据参考了 小喵喵不喜欢计算几何 2020 ICPC 区域赛（南京）A 题的构造方案，在此表示感谢。", "locale": "zh-CN"}}}
{"pid": "P7474", "type": "P", "difficulty": 4, "samples": [["2", "4\n1"], ["7", "166374067\n539688692"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "Special Judge", "动态规划优化", "连通块", "期望"], "title": "「C.E.L.U-02」学术精神", "background": "", "description": "提供 **一句话题意** 阅读。\n\n某地有 $n$ 个小朋友，每个小朋友都有一个**独特的**  idea，其中第 $i$ 个小朋友的 idea 的 **编号** 为 $i$。老师让这个每一个小朋友在一组编号分别为 $1\\sim n$ 的卡片中随机抽一个，**抽完后把卡片放回去**，这个小朋友会和编号为卡片上数字的小朋友**交换** idea（交换指**两人**把**所有**自己知道的 idea 告诉对方）。因为自己和自己交换 idea 在他们眼中也许是一件很傻的事情，所以如果**卡片上的编号与自己的相同**，他将再抽一次（此时他已经把卡片放回去了），**直到编号不是自己**的为止。\n\n不久，每个小朋友都抽完了一遍，每个小朋友将把收集到的**所有** idea 出成一场比赛，因为有 idea 的交换，有很多比赛之间都是**有联系**的。\n\n如果两场比赛中存在 idea **相同**的题目，我们认为这两场比赛是有联系的。「联系」具有**传递性**：**如果比赛 $\\mathbf A$、$\\mathbf B$ 有联系，比赛 $\\mathbf B$、$\\mathbf C$ 有联系，则比赛 $\\mathbf A$、$\\mathbf C$ 也有联系**。为了避免理解错误，在这举一个例子：\n\n若仅有四场比赛：比赛一出现了 idea $1$、$2$；比赛二出现 idea $2$、$5$ ；比赛三出现 idea $3$、$5$、$8$，比赛四出现 idea $4$、$7$。则比赛一、二之间有**直接联系**。比赛一、三之间虽然没有公共 idea，但它们之间是**有联系**的。比赛四与其他所有比赛没有联系。  \n\n而所有有联系的比赛都将属于同一个比赛集，没有联系的比赛处在不同的比赛集。\n\n上例中比赛一、二、三属于一个比赛集，比赛四属于另一个。\n\n求所有人**抽球卡片的次数和**的期望 $E_0$ 和比赛集的个数 $s$ 的期望 $E_1$。\n\n---\n\n**一句话题意：**\n\n对于每个点 $i$ 随机与 $[1,n]$ 中的一点连无向边，若连向自己，则保留该边并再次连边，一直重复至连到别的点上为止，求边数与连通块个数期望。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "第一行输出一个数 $E_0$ ，第二行输出一个数 $E_1$ ，可以证明它们都是**有理数**。\n\n为了避免精度误差，您只需要输出它们对质数 $998244353$ 取模的结果即可，如果您不会分数取模，您可以查找关于费马小定理与乘法逆元的相关资料。\n\n如果输出格式错误或两问答案均错误，该测试点得 $0$ 分；\n\n如果仅答对第一问，该测试点得 $3$ 分；\n\n如果仅答对第二问，该测试点得 $7$ 分；\n\n如果两问均正确，该测试点得 $10$ 分。\n\n**请务必输出两个整数。**", "hint": "---\n\n### 样例解释  \n\n**样例解释一**\n\n- 每个小朋友摸卡片次数为 $1$ 的概率为 $\\dfrac{1}{2}$，摸卡片次数为 $2$ 的概率为 $\\dfrac{1}{4}$，摸卡片次数为 $i$ 的期望次数为 $\\dfrac{1}{2^i}$，期望摸卡片次数为 $2$，总摸卡片次数为 $4$。\n\n- $1$ 号小朋友一定会和 $2$ 号小朋友交换 idea，所以他们出的比赛之间一定是属于同一个比赛集。$E_1=1$。\n\n**样例解释二**\n\n- 第一问取模前的答案为 $\\dfrac{49}{6}$。\n\n- 第二问取模前的答案为 $\\dfrac{2245}{1944}$。\n\n---\n\n### 数据范围\n\n| 测试点编号 | $n$ | 测试点编号 | $n$ | \n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 3$ | $5$ | $\\leq 1000$ |\n| $2$ | $\\leq 5$ | $6$ | $\\leq 2000$ | \n| $3$ | $\\leq 9$ | $7\\sim8$ | $\\leq 5000$ | \n| $4$ | $\\leq 12$ | $9\\sim 10$ | $\\leq10^4$ | \n\n对于 $100\\%$ 的数据，有 $2\\leq n\\leq10^4$。\n\n---\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-02」学术精神", "background": "", "description": "提供 **一句话题意** 阅读。\n\n某地有 $n$ 个小朋友，每个小朋友都有一个**独特的**  idea，其中第 $i$ 个小朋友的 idea 的 **编号** 为 $i$。老师让这个每一个小朋友在一组编号分别为 $1\\sim n$ 的卡片中随机抽一个，**抽完后把卡片放回去**，这个小朋友会和编号为卡片上数字的小朋友**交换** idea（交换指**两人**把**所有**自己知道的 idea 告诉对方）。因为自己和自己交换 idea 在他们眼中也许是一件很傻的事情，所以如果**卡片上的编号与自己的相同**，他将再抽一次（此时他已经把卡片放回去了），**直到编号不是自己**的为止。\n\n不久，每个小朋友都抽完了一遍，每个小朋友将把收集到的**所有** idea 出成一场比赛，因为有 idea 的交换，有很多比赛之间都是**有联系**的。\n\n如果两场比赛中存在 idea **相同**的题目，我们认为这两场比赛是有联系的。「联系」具有**传递性**：**如果比赛 $\\mathbf A$、$\\mathbf B$ 有联系，比赛 $\\mathbf B$、$\\mathbf C$ 有联系，则比赛 $\\mathbf A$、$\\mathbf C$ 也有联系**。为了避免理解错误，在这举一个例子：\n\n若仅有四场比赛：比赛一出现了 idea $1$、$2$；比赛二出现 idea $2$、$5$ ；比赛三出现 idea $3$、$5$、$8$，比赛四出现 idea $4$、$7$。则比赛一、二之间有**直接联系**。比赛一、三之间虽然没有公共 idea，但它们之间是**有联系**的。比赛四与其他所有比赛没有联系。  \n\n而所有有联系的比赛都将属于同一个比赛集，没有联系的比赛处在不同的比赛集。\n\n上例中比赛一、二、三属于一个比赛集，比赛四属于另一个。\n\n求所有人**抽球卡片的次数和**的期望 $E_0$ 和比赛集的个数 $s$ 的期望 $E_1$。\n\n---\n\n**一句话题意：**\n\n对于每个点 $i$ 随机与 $[1,n]$ 中的一点连无向边，若连向自己，则保留该边并再次连边，一直重复至连到别的点上为止，求边数与连通块个数期望。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "第一行输出一个数 $E_0$ ，第二行输出一个数 $E_1$ ，可以证明它们都是**有理数**。\n\n为了避免精度误差，您只需要输出它们对质数 $998244353$ 取模的结果即可，如果您不会分数取模，您可以查找关于费马小定理与乘法逆元的相关资料。\n\n如果输出格式错误或两问答案均错误，该测试点得 $0$ 分；\n\n如果仅答对第一问，该测试点得 $3$ 分；\n\n如果仅答对第二问，该测试点得 $7$ 分；\n\n如果两问均正确，该测试点得 $10$ 分。\n\n**请务必输出两个整数。**", "hint": "---\n\n### 样例解释  \n\n**样例解释一**\n\n- 每个小朋友摸卡片次数为 $1$ 的概率为 $\\dfrac{1}{2}$，摸卡片次数为 $2$ 的概率为 $\\dfrac{1}{4}$，摸卡片次数为 $i$ 的期望次数为 $\\dfrac{1}{2^i}$，期望摸卡片次数为 $2$，总摸卡片次数为 $4$。\n\n- $1$ 号小朋友一定会和 $2$ 号小朋友交换 idea，所以他们出的比赛之间一定是属于同一个比赛集。$E_1=1$。\n\n**样例解释二**\n\n- 第一问取模前的答案为 $\\dfrac{49}{6}$。\n\n- 第二问取模前的答案为 $\\dfrac{2245}{1944}$。\n\n---\n\n### 数据范围\n\n| 测试点编号 | $n$ | 测试点编号 | $n$ | \n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 3$ | $5$ | $\\leq 1000$ |\n| $2$ | $\\leq 5$ | $6$ | $\\leq 2000$ | \n| $3$ | $\\leq 9$ | $7\\sim8$ | $\\leq 5000$ | \n| $4$ | $\\leq 12$ | $9\\sim 10$ | $\\leq10^4$ | \n\n对于 $100\\%$ 的数据，有 $2\\leq n\\leq10^4$。\n\n---\n", "locale": "zh-CN"}}}
{"pid": "P7475", "type": "P", "difficulty": 6, "samples": [["3\nfan\nfantasy\nfather\n6\nfat 1\nfa 1\nfan 1\nfan 1\nfa 1\nfant 1", "father\nfather\nfan\nfan\nfan\nfantasy"], ["5\nuva\nusaco\nusa\nusssu\nkonjac\n11\nu 2\nu 2\nkkk 1\nuv 2\nus 3\nu 4\nu 1\nu 2\nk 1\nu 3\nusa 1", "usaco\nusa\n404Error\nuva\nusssu\nuva\nuva\nusa\nkonjac\nusaco\nusa"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216]}, "tags": ["平衡树", "O2优化", "树套树", "字典树 Trie"], "title": "「C.E.L.U-02」简易输入法", "background": "YQH 有一个伟大的梦想，他想成为全世界最强的男人。为了实现这一个目标，他准备从一个简易的输入法入手开始征程。", "description": "这个简易输入法原先有一个词典 $\\text{U}$，用户输入时，输入法从用户处读入一个字符串 $s$ ，以及一个整数 $x$ 对于这个字符串有以下几种情形：  \n设$s_i \\in \\text{U} $ 且 $s$ 为 $s_i$ 的前缀的个数为 $a$。  \n\n当 $a\\ge x$ 时，请输出按照以输出次数从大到小为第一关键字，以字典序为第二关键字排序后的第 $x$ 个 $s_i$，并将其输出次数加 $1$。    \n\n当 $x>a>0$ 时，请输出按照以输出次数从大到小为第一关键字，以字典序为第二关键字排序后的最后一个 $s_i$，并将其输出次数加 $1$。  \n\n当 $a=0$ 时，输出 `404Error`。  ", "inputFormat": "第$1$行输入一个整数 $n$，代表 $\\text{U}$ 中原有 $n$ 个单词，每个原始存在的单词一开始输入次数都是 $0$。  \n\n第 $2$ 至 $n+1$ 行，每行输入一个字符串 $str$，代表一个词典中原来出现的单词。  \n\n第 $n+2$ 行输入一个整数 $m$，代表用户进行了 $m$ 次操作。  \n\n第 $n+3$ 至 $n+m+2$ 行，输入一个字符串 $s$ 和一个整数 $x$ ，含义在题目描述中已经说了。 ", "outputFormat": "对于每一个用户的 $1$ 操作，输出一个字符串。", "hint": "### 样例解释 \n\n**样例解释一**\n\n`fat` 为前缀只有 $1$ 个，故输出 `father`，并将其输出次数加 $1$。  \n`fa` 为前缀中输出次数最多是 `father`，故输出它，并将其输出次数加 $1$。  \n`fan` 为前缀中输出次数都是 $0$，但 `fan` 字典序最小，故输出它，并将其输出次数加 $1$。  \n`fan` 为前缀 `fan` 输出次数最多，故输出 `fan`，并将其输出次数加 $1$。  \n`fa` 为前缀中输出次数最多是 `fan`，故输出它，并将其输出次数加 $1$。  \n`fant` 为前缀只有一个单词 `fantasy`，故输出它，并将其输出次数加 $1$。\n\n ### 数据范围\n\n| 数据编号 | $n$ | $m$ | $x$ | $\\sum str$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 2$ | $\\le100$ | $\\le100$ | $=1$ | $\\le10^3$ |\n| $3\\sim 4$ | $\\le100$ | $\\le100$ | $\\diagdown$ | $10^3$ |\n| $5\\sim 8$ | $\\le5\\times10^4$ | $\\le10^5$ | $=1$ | $\\le5\\times10^5$ |\n| $9\\sim 14$ | $\\le10^4$ | $\\le10^5$ | $\\diagdown$ | $\\le10^5$ |\n| $15\\sim 20$ | $\\le5\\times10^4$ | $\\le10^5$ | $\\diagdown$ | $\\le5\\times10^5$ |\n\n对于$100\\%$的数据，$|s|,|str|\\le10,1\\leq x\\le10^4$，所有字母都是小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-02」简易输入法", "background": "YQH 有一个伟大的梦想，他想成为全世界最强的男人。为了实现这一个目标，他准备从一个简易的输入法入手开始征程。", "description": "这个简易输入法原先有一个词典 $\\text{U}$，用户输入时，输入法从用户处读入一个字符串 $s$ ，以及一个整数 $x$ 对于这个字符串有以下几种情形：  \n设$s_i \\in \\text{U} $ 且 $s$ 为 $s_i$ 的前缀的个数为 $a$。  \n\n当 $a\\ge x$ 时，请输出按照以输出次数从大到小为第一关键字，以字典序为第二关键字排序后的第 $x$ 个 $s_i$，并将其输出次数加 $1$。    \n\n当 $x>a>0$ 时，请输出按照以输出次数从大到小为第一关键字，以字典序为第二关键字排序后的最后一个 $s_i$，并将其输出次数加 $1$。  \n\n当 $a=0$ 时，输出 `404Error`。  ", "inputFormat": "第$1$行输入一个整数 $n$，代表 $\\text{U}$ 中原有 $n$ 个单词，每个原始存在的单词一开始输入次数都是 $0$。  \n\n第 $2$ 至 $n+1$ 行，每行输入一个字符串 $str$，代表一个词典中原来出现的单词。  \n\n第 $n+2$ 行输入一个整数 $m$，代表用户进行了 $m$ 次操作。  \n\n第 $n+3$ 至 $n+m+2$ 行，输入一个字符串 $s$ 和一个整数 $x$ ，含义在题目描述中已经说了。 ", "outputFormat": "对于每一个用户的 $1$ 操作，输出一个字符串。", "hint": "### 样例解释 \n\n**样例解释一**\n\n`fat` 为前缀只有 $1$ 个，故输出 `father`，并将其输出次数加 $1$。  \n`fa` 为前缀中输出次数最多是 `father`，故输出它，并将其输出次数加 $1$。  \n`fan` 为前缀中输出次数都是 $0$，但 `fan` 字典序最小，故输出它，并将其输出次数加 $1$。  \n`fan` 为前缀 `fan` 输出次数最多，故输出 `fan`，并将其输出次数加 $1$。  \n`fa` 为前缀中输出次数最多是 `fan`，故输出它，并将其输出次数加 $1$。  \n`fant` 为前缀只有一个单词 `fantasy`，故输出它，并将其输出次数加 $1$。\n\n ### 数据范围\n\n| 数据编号 | $n$ | $m$ | $x$ | $\\sum str$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 2$ | $\\le100$ | $\\le100$ | $=1$ | $\\le10^3$ |\n| $3\\sim 4$ | $\\le100$ | $\\le100$ | $\\diagdown$ | $10^3$ |\n| $5\\sim 8$ | $\\le5\\times10^4$ | $\\le10^5$ | $=1$ | $\\le5\\times10^5$ |\n| $9\\sim 14$ | $\\le10^4$ | $\\le10^5$ | $\\diagdown$ | $\\le10^5$ |\n| $15\\sim 20$ | $\\le5\\times10^4$ | $\\le10^5$ | $\\diagdown$ | $\\le5\\times10^5$ |\n\n对于$100\\%$的数据，$|s|,|str|\\le10,1\\leq x\\le10^4$，所有字母都是小写字母。", "locale": "zh-CN"}}}
{"pid": "P7476", "type": "P", "difficulty": 6, "samples": [["5 4\n1 1 3 2\n1 2 4 3\n2 3 3\n3 1 3", "3"], ["6 6\n1 1 6 2\n1 3 3 2\n1 3 4 3\n2 3 4\n3 3 3\n3 4 4", "2\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "堆", "O2优化", "均摊分析"], "title": "「C.E.L.U-02」苦涩", "background": "回想起自己的过往的人生，YQH 觉得心中充满了苦涩。如果人生能再来一次，我一定会少做一些傻事，少真香几次，然后大胆地去追寻自己的爱。可惜没有这样一个机会了。  ", "description": "在 YQH 的梦中，他看到自己过去的记忆正在不断浮现在自己脑中。这些记忆带给他的是满满的苦涩。他想要强行忘记一些来减轻自己的苦涩。  \nYQH 的脑中可以被分成 $n$ 个片区，每个片区相当于一个存放记忆的可重集，初始为空。他将进行 $m$ 次这三种操作：  \n操作 1：区间 $l\\sim r$ 的片区中都浮现了一个苦涩值为 $k$ 的记忆。    \n操作 2：YQH 开始清理 $l\\sim r$ 片区的记忆。如果一个片区 $k\\in[l,r]$ 且 $k$ 中苦涩值最大的记忆与 $l\\sim r$ 片区中苦涩值最大的记忆相等，则将这个苦涩值最大的记忆忘记。如果在同一个片区有多个相同的苦涩值最大的记忆，则只忘记一个。如果这些片区内没有记忆，则无视。  \n操作 3：YQH 想知道，$l\\sim r$ 片区中苦涩值最大的记忆的苦涩值是多少，如果不存在，输出`-1`。  ", "inputFormat": "第一行两个数，$n,m$。  \n接下来 $m$ 行，第一个数代表操作种类 $op$，对于操作 1，有三个数 $l,r,k$，对于操作 2 或 3，有两个数 $l,r$。", "outputFormat": "对于每个操作 3 输出一行，代表答案。", "hint": "### 样例解释 \n\n**样例解释一**\n\n下面为各操作之后 YQH 的大脑的状态：  \n第一次操作：$\\{2\\},\\{2\\},\\{2\\},\\varnothing,\\varnothing$  \n第二次操作：$\\{2\\},\\{2,3\\},\\{2,3\\},\\{3\\},\\varnothing$    \n第三次操作：$\\{2\\},\\{2,3\\},\\{2\\},\\{3\\},\\varnothing$    \n第四次操作询问 区间 $1\\sim 3$ 的最大值，所以答案是 $3$。\n\n**样例解释二**\n\n下面为各操作之后 YQH 的大脑的状态：  \n第一次操作：$\\{2\\},\\{2\\},\\{2\\},\\{2\\},\\{2\\},\\{2\\}$  \n第二次操作：$\\{2\\},\\{2\\},\\{2,2\\},\\{2\\},\\{2\\},\\{2\\}$  \n第三次操作：$\\{2\\},\\{2\\},\\{2,2,3\\},\\{2,3\\},\\{2\\},\\{2\\}$   \n第四次操作：$\\{2\\},\\{2\\},\\{2,2\\},\\{2\\},\\{2\\},\\{2\\}$  \n第五次操作询问 $3$ 的最大值，所以答案是 $2$。  \n第六次操作询问 $4$ 的最大值，所以答案是 $2$。  \n\n### 数据范围  \n|Subtask|n|m|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1(10pts)$|$\\leq10^3$|$\\le10^3$|$\\diagdown$|\n|$2(20pts)$|$\\leq5\\times10^4$|$\\leq5\\times10^4$|没有操作 2|\n|$3(10pts)$|$\\leq5\\times10^4$|$\\leq5\\times10^4$|操作 2 中 $l=r$|\n|$4(20pts)$|$\\leq5\\times10^4$|$\\leq5\\times10^4$|$\\diagdown$|\n|$5(20pts)$|$\\leq2\\times10^5$|$\\leq2\\times10^5$|操作 2 中 $l=r$|\n|$6(20pts)$|$\\leq2\\times10^5$|$\\leq2\\times10^5$|$\\diagdown$|  \n\n对于 $100\\%$ 的数据，$n,m\\le2\\times10^5,k\\le10^9$  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-02」苦涩", "background": "回想起自己的过往的人生，YQH 觉得心中充满了苦涩。如果人生能再来一次，我一定会少做一些傻事，少真香几次，然后大胆地去追寻自己的爱。可惜没有这样一个机会了。  ", "description": "在 YQH 的梦中，他看到自己过去的记忆正在不断浮现在自己脑中。这些记忆带给他的是满满的苦涩。他想要强行忘记一些来减轻自己的苦涩。  \nYQH 的脑中可以被分成 $n$ 个片区，每个片区相当于一个存放记忆的可重集，初始为空。他将进行 $m$ 次这三种操作：  \n操作 1：区间 $l\\sim r$ 的片区中都浮现了一个苦涩值为 $k$ 的记忆。    \n操作 2：YQH 开始清理 $l\\sim r$ 片区的记忆。如果一个片区 $k\\in[l,r]$ 且 $k$ 中苦涩值最大的记忆与 $l\\sim r$ 片区中苦涩值最大的记忆相等，则将这个苦涩值最大的记忆忘记。如果在同一个片区有多个相同的苦涩值最大的记忆，则只忘记一个。如果这些片区内没有记忆，则无视。  \n操作 3：YQH 想知道，$l\\sim r$ 片区中苦涩值最大的记忆的苦涩值是多少，如果不存在，输出`-1`。  ", "inputFormat": "第一行两个数，$n,m$。  \n接下来 $m$ 行，第一个数代表操作种类 $op$，对于操作 1，有三个数 $l,r,k$，对于操作 2 或 3，有两个数 $l,r$。", "outputFormat": "对于每个操作 3 输出一行，代表答案。", "hint": "### 样例解释 \n\n**样例解释一**\n\n下面为各操作之后 YQH 的大脑的状态：  \n第一次操作：$\\{2\\},\\{2\\},\\{2\\},\\varnothing,\\varnothing$  \n第二次操作：$\\{2\\},\\{2,3\\},\\{2,3\\},\\{3\\},\\varnothing$    \n第三次操作：$\\{2\\},\\{2,3\\},\\{2\\},\\{3\\},\\varnothing$    \n第四次操作询问 区间 $1\\sim 3$ 的最大值，所以答案是 $3$。\n\n**样例解释二**\n\n下面为各操作之后 YQH 的大脑的状态：  \n第一次操作：$\\{2\\},\\{2\\},\\{2\\},\\{2\\},\\{2\\},\\{2\\}$  \n第二次操作：$\\{2\\},\\{2\\},\\{2,2\\},\\{2\\},\\{2\\},\\{2\\}$  \n第三次操作：$\\{2\\},\\{2\\},\\{2,2,3\\},\\{2,3\\},\\{2\\},\\{2\\}$   \n第四次操作：$\\{2\\},\\{2\\},\\{2,2\\},\\{2\\},\\{2\\},\\{2\\}$  \n第五次操作询问 $3$ 的最大值，所以答案是 $2$。  \n第六次操作询问 $4$ 的最大值，所以答案是 $2$。  \n\n### 数据范围  \n|Subtask|n|m|特殊性质|\n|:---:|:---:|:---:|:---:|\n|$1(10pts)$|$\\leq10^3$|$\\le10^3$|$\\diagdown$|\n|$2(20pts)$|$\\leq5\\times10^4$|$\\leq5\\times10^4$|没有操作 2|\n|$3(10pts)$|$\\leq5\\times10^4$|$\\leq5\\times10^4$|操作 2 中 $l=r$|\n|$4(20pts)$|$\\leq5\\times10^4$|$\\leq5\\times10^4$|$\\diagdown$|\n|$5(20pts)$|$\\leq2\\times10^5$|$\\leq2\\times10^5$|操作 2 中 $l=r$|\n|$6(20pts)$|$\\leq2\\times10^5$|$\\leq2\\times10^5$|$\\diagdown$|  \n\n对于 $100\\%$ 的数据，$n,m\\le2\\times10^5,k\\le10^9$  ", "locale": "zh-CN"}}}
{"pid": "P7477", "type": "P", "difficulty": 6, "samples": [["6 0\n6 2 8 5 7 3", "2"], ["10 3\n1 3 4 3 8 2 3 4 5 6\n2 3\n6 7\n1 9\n", "5"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "图论建模", "2-SAT", "可持久化线段树"], "title": "「C.E.L.U-02」划分可重集", "background": "", "description": "给你一个长度为 $n$ 的数列 $v$，请你将其划分成两个可重集 $a$ 和 $b$。你将从左至右开始划分，每个数必须至少被划分进一个可重集中。  \n一个数 $v_i$ 可以被划分进 $a$ 当且仅当 $j<i \\ and\\ v_j\\le v_i-k$ 的 $v_j$ 都没有被划分进当前的 $a$。一个数 $v_i$ 可以被划分进 $b$ 当且仅当 $j<i\\ and\\ v_j\\ge v_i+k$ 的 $v_j$ 都没有被划分进当前的 $b$。  \n同时给出了 $m$ 组关系，每组关系代表 $u$ 和 $v$ 不能划分进同一个可重集里。求能使划分成功的最小的 $k$。如果不存在合法划分，请输出 `-1`。", "inputFormat": "第一行两个数 $n,m$，意义在题目描述中。 \t   \n接下来一行共 $n$ 个数，代表 $v$。   \n下面 $m$ 行每行两个数，表示一组关系。", "outputFormat": "仅一个数，答案。", "hint": "### 样例解释\n\n**样例解释一**\n\n以下是一组合法的划分：  \n|6|2|8|5|7|3|\n|:---:|:---:|:---:|:---:|:---:|:---:|\n|a|b|b|a|b|a|\n\n**样例解释二**\n\n以下是一组合法的划分：  \n|1|3|4|3|8|2|3|4|5|6|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|b|b|a|b|a|b|a|a|a|b|\n\n### 数据范围 \n|数据编号|$n$|$m$|\n|:---:|:---:|:---:|\n|$1\\sim2$|$\\le10^3$|$0$|\n|$3\\sim4$|$\\le10^3$|$\\le10^3$|\n|$5\\sim6$|$\\le2\\times10^4$|$0$|\n|$7\\sim10$|$\\le2\\times10^4$|$\\le2\\times10^4$|\n\n对于 $100\\%$ 的数据，$n,m\\le2\\times10^4,v_i\\le10^9$，保证 $u<v\\le n$，没有一对相同的 $u,v$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-02」划分可重集", "background": "", "description": "给你一个长度为 $n$ 的数列 $v$，请你将其划分成两个可重集 $a$ 和 $b$。你将从左至右开始划分，每个数必须至少被划分进一个可重集中。  \n一个数 $v_i$ 可以被划分进 $a$ 当且仅当 $j<i \\ and\\ v_j\\le v_i-k$ 的 $v_j$ 都没有被划分进当前的 $a$。一个数 $v_i$ 可以被划分进 $b$ 当且仅当 $j<i\\ and\\ v_j\\ge v_i+k$ 的 $v_j$ 都没有被划分进当前的 $b$。  \n同时给出了 $m$ 组关系，每组关系代表 $u$ 和 $v$ 不能划分进同一个可重集里。求能使划分成功的最小的 $k$。如果不存在合法划分，请输出 `-1`。", "inputFormat": "第一行两个数 $n,m$，意义在题目描述中。 \t   \n接下来一行共 $n$ 个数，代表 $v$。   \n下面 $m$ 行每行两个数，表示一组关系。", "outputFormat": "仅一个数，答案。", "hint": "### 样例解释\n\n**样例解释一**\n\n以下是一组合法的划分：  \n|6|2|8|5|7|3|\n|:---:|:---:|:---:|:---:|:---:|:---:|\n|a|b|b|a|b|a|\n\n**样例解释二**\n\n以下是一组合法的划分：  \n|1|3|4|3|8|2|3|4|5|6|\n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|b|b|a|b|a|b|a|a|a|b|\n\n### 数据范围 \n|数据编号|$n$|$m$|\n|:---:|:---:|:---:|\n|$1\\sim2$|$\\le10^3$|$0$|\n|$3\\sim4$|$\\le10^3$|$\\le10^3$|\n|$5\\sim6$|$\\le2\\times10^4$|$0$|\n|$7\\sim10$|$\\le2\\times10^4$|$\\le2\\times10^4$|\n\n对于 $100\\%$ 的数据，$n,m\\le2\\times10^4,v_i\\le10^9$，保证 $u<v\\le n$，没有一对相同的 $u,v$。", "locale": "zh-CN"}}}
{"pid": "P7478", "type": "P", "difficulty": 2, "samples": [["3\nacb", "1 3"], ["6\nzyxwvu", "-1"], ["14\naabbccddccbbaa", "6 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "StickSuger", "background": "YSGHYYDS", "description": "YSGH 给你一个长度为 $n$ 的字符串 $S$。设 $S_x$ 表示字符串 $S$ 的第 $x$ 个字符。你可以选择一个二元组 $(i,j)$，然后交换 $S_i$ 和 $S_j$。二元组 $(i,j)$ 是合法的当且仅当 $1\\leq i<j\\leq n$ 并且交换后的字符串的字典序比原串大。\n\n对于两个字符 $c_0,c_1$，称 $c_0>c_1$ 当且仅当 $c_0$ 的 ASCII 码大于 $c_1$ 的 ASCII 码。\n\n对于两个长度为 $n$ 的字符串 $S,T$，$S$ 的字典序大于 $T$ 当且仅当存在一个 $i\\in [0,n-1]$ 使得 $\\forall j\\in[1,i],S_j=T_j$， 并且 $S_{i+1}>T_{i+1}$。\n\n如果存在多种合法方案，输出最大的二元组。\n\n对于两个二元组 $(i_1,j_1)$，$(i_2,j_2)$，称  $(i_1,j_1)$ 小于 $(i_2,j_2)$ 当且仅当 $i_1<i_2\\lor(i_1=i_2\\land j_1<j_2)$。\n\n如果不存在合法方案，则输出 `-1`。 \n\n保证 $S$ 只包含小写英文字母。", "inputFormat": "第一行，一个正整数 $n$，表示字符串 $S$ 的长度。\n\n第二行，一个字符串 $S$。", "outputFormat": "如果无解，输出 `-1`。\n\n否则一行输出两个整数 $i,j$ 表示最大的合法二元组 $(i,j)$。", "hint": "**【样例解释 #1】**\n\n如果选择二元组 $(2,3)$，交换 $S_2$ 和 $S_3$ 后的字符串为 `abc`，字典序比 `acb` 小，所以不合法。\n\n如果选择二元组 $(1,3)$，交换 $S_1$ 和 $S_3$ 后的字符串为 `bca`，字典序比 `acb` 大，是合法的。\n\n虽然 $(1,2)$ 也是合法的，但是没有 $(1,3)$ 大。所以答案是 $(1,3)$。 \n\n**【样例解释 #2】**\n\n容易看出任何一个二元组都不合法。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$S$ 只包含小写英文字母。\n\n- Subtask 1（4 points）：$S$ 只包含一种字符。\n- Subtask 2（10 points）：$n\\leq 100$。\n- Subtask 3（16 points）：$n\\leq 500$。\n- Subtask 4（25 points）：$n\\leq 5000$。\n- Subtask 5（18 points）：$n\\leq 10^5$。\n- Subtask 6（27 points）：$n\\leq 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "StickSuger", "background": "YSGHYYDS", "description": "YSGH 给你一个长度为 $n$ 的字符串 $S$。设 $S_x$ 表示字符串 $S$ 的第 $x$ 个字符。你可以选择一个二元组 $(i,j)$，然后交换 $S_i$ 和 $S_j$。二元组 $(i,j)$ 是合法的当且仅当 $1\\leq i<j\\leq n$ 并且交换后的字符串的字典序比原串大。\n\n对于两个字符 $c_0,c_1$，称 $c_0>c_1$ 当且仅当 $c_0$ 的 ASCII 码大于 $c_1$ 的 ASCII 码。\n\n对于两个长度为 $n$ 的字符串 $S,T$，$S$ 的字典序大于 $T$ 当且仅当存在一个 $i\\in [0,n-1]$ 使得 $\\forall j\\in[1,i],S_j=T_j$， 并且 $S_{i+1}>T_{i+1}$。\n\n如果存在多种合法方案，输出最大的二元组。\n\n对于两个二元组 $(i_1,j_1)$，$(i_2,j_2)$，称  $(i_1,j_1)$ 小于 $(i_2,j_2)$ 当且仅当 $i_1<i_2\\lor(i_1=i_2\\land j_1<j_2)$。\n\n如果不存在合法方案，则输出 `-1`。 \n\n保证 $S$ 只包含小写英文字母。", "inputFormat": "第一行，一个正整数 $n$，表示字符串 $S$ 的长度。\n\n第二行，一个字符串 $S$。", "outputFormat": "如果无解，输出 `-1`。\n\n否则一行输出两个整数 $i,j$ 表示最大的合法二元组 $(i,j)$。", "hint": "**【样例解释 #1】**\n\n如果选择二元组 $(2,3)$，交换 $S_2$ 和 $S_3$ 后的字符串为 `abc`，字典序比 `acb` 小，所以不合法。\n\n如果选择二元组 $(1,3)$，交换 $S_1$ 和 $S_3$ 后的字符串为 `bca`，字典序比 `acb` 大，是合法的。\n\n虽然 $(1,2)$ 也是合法的，但是没有 $(1,3)$ 大。所以答案是 $(1,3)$。 \n\n**【样例解释 #2】**\n\n容易看出任何一个二元组都不合法。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$S$ 只包含小写英文字母。\n\n- Subtask 1（4 points）：$S$ 只包含一种字符。\n- Subtask 2（10 points）：$n\\leq 100$。\n- Subtask 3（16 points）：$n\\leq 500$。\n- Subtask 4（25 points）：$n\\leq 5000$。\n- Subtask 5（18 points）：$n\\leq 10^5$。\n- Subtask 6（27 points）：$n\\leq 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P7479", "type": "P", "difficulty": 4, "samples": [["3\n3 5\n.*.*.\n.***.\n.....\n2 5\n.*.*.\n.***.\n6 5\n.*...\n.***.\n**.**\n*...*\n**.**\n*****", "NO\nYES\nNO"], ["1\n1 3\n.*.\n", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "至曾是英雄的您", "background": "YSGHYYDS", "description": "YSGH 有一个 $n\\times m$ 的围棋棋盘，初始时，每个位置要么是空的，要么有一个黑棋棋子。**保证黑棋是连通的。**\n\n在围棋中，一个棋子的「气」是与它相邻的所有**空**位置构成的集合。\n\n设棋盘上第 $i$ 行第 $j$ 个位置为 $(i,j)$。\n\n两个分别在 $(i_1,j_1)$ 和 $(i_2,j_2)$ 的**同色**棋子如果满足 $|i_1-i_2|+|j_1-j_2|=1$，就认为是相邻的，也就是在同一个连通块里。\n\n一个连通块的「气」是这个连通块中所有棋子的「气」的并集。\n\n白方走一步棋是合法的，当且仅当走完这手棋之后这个棋子所在连通块的「气」大于等于 $1$ 或者黑棋连通块的「气」等于 $0$。\n\n比如下图，绿色的位置都是黑棋连通块的「气」。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wzrjvpox.png)\n\n「活棋」的定义：无论对方连续走多少手棋，在每步棋都是合法的情况下，该连通块的「气」都大于等于 $1$。\n\n请你判断这个黑棋连通块是否是「活棋」。\n\n如果是，输出 `YES`，否则输出 `NO`。\n\n**本题有多测。**", "inputFormat": "第一行，一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行，两个正整数 $n, m$，表示棋盘的大小为 $n \\times m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串。第 $i$ 行第 $j$ 个字符表示棋盘上位置为 $(i, j)$ 的地方是否有棋子。`.` 表示空格，`*` 表示黑棋子。", "outputFormat": "如果黑棋是「活棋」，输出 `YES`，否则输出 `NO`。", "hint": "**【样例解释 #1】**\n\n第 1 组数据：\n\n白棋依次走 $(1,1),(2,1),(3,2),(3,3),(3,4),(1,5),(2,5),(1,3)$ 即可使得黑棋连通块的「气」变成 $0$ 了。\n\n不妨用 `@` 表示白棋，那么最终局面就是：\n\n```plain\n@*@*@\n@***@\n.@@@.\n```\n\n第 2 组数据：\n\n比方说白棋先走 $(1,1)$ 那么白棋之后就再也走不到 $(1,3)$ 和 $(2,1)$ 了，导致黑棋的「气」永远大于等于 $1$，所以黑棋是「活棋」。\n\n第 3 组数据：\n\n最终使得黑棋连通块的「气」等于 $0$ 的局面：\n\n```plain\n@*@@.\n@***@\n**@**\n*@.@*\n**@**\n*****\n```\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le n, m \\le 2 \\times {10}^3$，$1 \\le T \\le {10}^5$。输入的初始棋盘的每个位置要么是 `.`，要么是 `*`，并且至少有一个 `.`，至少有一个 `*`。**保证黑棋是连通的。** 保证每个测试点的 $n \\times m$ 之和都小于等于 $4 \\times {10}^6$。\n\n- Subtask 1（9 points）：$n = 1$。\n- Subtask 2（10 points）：$n = 2$，$m = 3$。\n- Subtask 3（16 points）：保证 `.` 的个数不超过 $7$，$n, m \\le 10$，$T \\le 50$。\n- Subtask 4（24 points）：保证 `.` 的个数不超过 $14$，$n, m \\le 10$，$T \\le 50$。\n- Subtask 5（15 points）：$n, m \\ge 3$，输入局面的边界上都是 `.`。即 $\\forall (i, j)$，如果 $i = 1 \\lor i = n \\lor j = 1 \\lor j = m$，则 $(i, j)$ 一定是空地。 \n- Subtask 6（26 points）：无特殊限制。 \n\n---\n---\n---\n\nP.S. Froggy 和 uyom 都是（很久没下棋的）业余四段哥，欢迎找我们然后把我们虐一顿。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "至曾是英雄的您", "background": "YSGHYYDS", "description": "YSGH 有一个 $n\\times m$ 的围棋棋盘，初始时，每个位置要么是空的，要么有一个黑棋棋子。**保证黑棋是连通的。**\n\n在围棋中，一个棋子的「气」是与它相邻的所有**空**位置构成的集合。\n\n设棋盘上第 $i$ 行第 $j$ 个位置为 $(i,j)$。\n\n两个分别在 $(i_1,j_1)$ 和 $(i_2,j_2)$ 的**同色**棋子如果满足 $|i_1-i_2|+|j_1-j_2|=1$，就认为是相邻的，也就是在同一个连通块里。\n\n一个连通块的「气」是这个连通块中所有棋子的「气」的并集。\n\n白方走一步棋是合法的，当且仅当走完这手棋之后这个棋子所在连通块的「气」大于等于 $1$ 或者黑棋连通块的「气」等于 $0$。\n\n比如下图，绿色的位置都是黑棋连通块的「气」。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wzrjvpox.png)\n\n「活棋」的定义：无论对方连续走多少手棋，在每步棋都是合法的情况下，该连通块的「气」都大于等于 $1$。\n\n请你判断这个黑棋连通块是否是「活棋」。\n\n如果是，输出 `YES`，否则输出 `NO`。\n\n**本题有多测。**", "inputFormat": "第一行，一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行，两个正整数 $n, m$，表示棋盘的大小为 $n \\times m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串。第 $i$ 行第 $j$ 个字符表示棋盘上位置为 $(i, j)$ 的地方是否有棋子。`.` 表示空格，`*` 表示黑棋子。", "outputFormat": "如果黑棋是「活棋」，输出 `YES`，否则输出 `NO`。", "hint": "**【样例解释 #1】**\n\n第 1 组数据：\n\n白棋依次走 $(1,1),(2,1),(3,2),(3,3),(3,4),(1,5),(2,5),(1,3)$ 即可使得黑棋连通块的「气」变成 $0$ 了。\n\n不妨用 `@` 表示白棋，那么最终局面就是：\n\n```plain\n@*@*@\n@***@\n.@@@.\n```\n\n第 2 组数据：\n\n比方说白棋先走 $(1,1)$ 那么白棋之后就再也走不到 $(1,3)$ 和 $(2,1)$ 了，导致黑棋的「气」永远大于等于 $1$，所以黑棋是「活棋」。\n\n第 3 组数据：\n\n最终使得黑棋连通块的「气」等于 $0$ 的局面：\n\n```plain\n@*@@.\n@***@\n**@**\n*@.@*\n**@**\n*****\n```\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le n, m \\le 2 \\times {10}^3$，$1 \\le T \\le {10}^5$。输入的初始棋盘的每个位置要么是 `.`，要么是 `*`，并且至少有一个 `.`，至少有一个 `*`。**保证黑棋是连通的。** 保证每个测试点的 $n \\times m$ 之和都小于等于 $4 \\times {10}^6$。\n\n- Subtask 1（9 points）：$n = 1$。\n- Subtask 2（10 points）：$n = 2$，$m = 3$。\n- Subtask 3（16 points）：保证 `.` 的个数不超过 $7$，$n, m \\le 10$，$T \\le 50$。\n- Subtask 4（24 points）：保证 `.` 的个数不超过 $14$，$n, m \\le 10$，$T \\le 50$。\n- Subtask 5（15 points）：$n, m \\ge 3$，输入局面的边界上都是 `.`。即 $\\forall (i, j)$，如果 $i = 1 \\lor i = n \\lor j = 1 \\lor j = m$，则 $(i, j)$ 一定是空地。 \n- Subtask 6（26 points）：无特殊限制。 \n\n---\n---\n---\n\nP.S. Froggy 和 uyom 都是（很久没下棋的）业余四段哥，欢迎找我们然后把我们虐一顿。", "locale": "zh-CN"}}}
