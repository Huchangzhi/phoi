{"pid": "P2784", "type": "P", "difficulty": 3, "samples": [["3 3 1 3\n1 3 0.8\n1 2 0.9\n2 3 0.9\n", "0.8100"], ["3 3 2 1\n1 3 0.8\n1 2 0.9\n2 3 0.9\n", "orz"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "洛谷原创", "队列"], "title": "化学1（chem1）- 化学合成", "background": "蒟蒻 HansBug 在化学考场上，挠了无数次的头，可脑子里还是一片空白。", "description": "眼下出现在蒟蒻 HansBug 面前的是一个化学合成题，据他所知，一般答案如下面这样的格式：\n\n![](https://cdn.luogu.com.cn/upload/pic/2223.png) （接下一行）\n\n![](https://cdn.luogu.com.cn/upload/pic/2221.png) \n\n简单解释下：每种化合物可以通过一步反应生成另一个化合物（将这称作一步反应，设为 $A\\rightarrow B$），现在假设每个 $A\\rightarrow B$ 中，理论上 $1$ 个单位的 $A$ 都仅可以生成 $1$ 个单位的 $B$。然而实际实验表明，并不存在绝对完全的化学转化，设转化率为 $C$（即 $1$ 个单位 $A$ 实际可以生成 $C$ 个单位的 $B$，$0<C<1$）。\n\n现在蒟蒻 HansBug 的知识体系中有 $N$ 个这样 $A\\rightarrow B$ 的转化。然而题目中蒟蒻 HansBug 要由 $1$ 个单位的化合物 $S$ 生成化合物 $T$，可是他脑细胞和 RP 已经消耗殆尽，所以找到最终产量最高的合成路线的艰巨任务就交给你啦！", "inputFormat": "第一行为四个整数：$N,M,S,T$，分别表示总共出现的化合物个数、HansBug 所知道的反应个数、起始的化合物序号、终末的化合物序号（$1\\le S,T\\le N$）。\n\n第 $2 \\sim M+1$ 行每行为两个整数和一个实数：$A_i,B_i,C_i$，分别表示第 $i$ 个反应为由 $1$ 个单位的 $A_i$ 化合物生成 $C_i$ 单位的 $B_i$ 化合物。", "outputFormat": "一行，包含一个实数，为最佳路线下最终的产量（四舍五入保留 $4$ 位小数），如果没有可行路线的话，输出 `orz`。", "hint": "样例 1 和样例 2 中，两条合成路线分别为 $1\\rightarrow3$、$1\\rightarrow2$、$2\\rightarrow3$，产率分别为 $0.8$、$0.9$、$0.9$。\n\n在样例 1 中，有两种可行的路线 $1\\rightarrow3$ 和 $1\\rightarrow2\\rightarrow3$ ，最终产量分别为 $0.8$、$0.9\\times0.9=0.81$，故第二条路线更优，产量为 $0.8100$。\n\n样例 2 中，$2$ 只能生成 $3$，$3$ 无法生成别的化合物，故无法生成，蒟蒻 HansBug 只好选择 `orz`。\n\n**【数据范围】**\n\n![](https://cdn.luogu.com.cn/upload/pic/2220.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "Chemistry 1 (chem1) - Chemical Synthesis", "background": "The juruo HansBug scratched his head countless times in the chemistry exam, yet his mind was still blank.", "description": "In front of the juruo HansBug is a chemical synthesis problem. As far as he knows, answers are usually written in the following format:\n\n![](https://cdn.luogu.com.cn/upload/pic/2223.png) (continued on the next line)\n\n![](https://cdn.luogu.com.cn/upload/pic/2221.png)\n\nA brief explanation: each compound can produce another compound through a one-step reaction (call this a one-step reaction, denoted as $A \\rightarrow B$). Now assume that in each $A \\rightarrow B$, theoretically $1$ unit of $A$ can only produce $1$ unit of $B$. However, actual experiments show that perfectly complete chemical conversion does not exist. Let the conversion rate be $C$ (i.e., $1$ unit of $A$ actually produces $C$ units of $B$, where $0 < C < 1$).\n\nIn the juruo HansBug’s knowledge base there are $N$ such $A \\rightarrow B$ conversions. In this problem, HansBug needs to produce compound $T$ starting from $1$ unit of compound $S$. But his brain cells and RP are exhausted, so the arduous task of finding the synthesis route with the highest final yield is handed over to you!", "inputFormat": "The first line contains four integers: $N, M, S, T$, representing the total number of distinct compounds, the number of reactions known to HansBug, the index of the starting compound, and the index of the target compound, respectively ($1 \\le S, T \\le N$).\n\nLines $2$ to $M+1$ each contain two integers and one real number: $A_i, B_i, C_i$, indicating that the $i$-th reaction converts $1$ unit of compound $A_i$ into $C_i$ units of compound $B_i$.", "outputFormat": "Output one line containing a real number: the final yield along the optimal route (rounded to $4$ decimal places). If there is no feasible route, output `orz`.", "hint": "In Sample $1$ and Sample $2$, the two synthesis routes are $1 \\rightarrow 3$, $1 \\rightarrow 2$, $2 \\rightarrow 3$, with yields $0.8$, $0.9$, $0.9$, respectively.\n\nIn Sample $1$, there are two feasible routes, $1 \\rightarrow 3$ and $1 \\rightarrow 2 \\rightarrow 3$. Their final yields are $0.8$ and $0.9 \\times 0.9 = 0.81$, respectively, so the second route is better, with a yield of $0.8100$.\n\nIn Sample $2$, $2$ can only produce $3$, and $3$ cannot produce any other compound, so synthesis is impossible, and the juruo HansBug has to output `orz`.\n\nConstraints\n\n![](https://cdn.luogu.com.cn/upload/pic/2220.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "化学1（chem1）- 化学合成", "background": "蒟蒻 HansBug 在化学考场上，挠了无数次的头，可脑子里还是一片空白。", "description": "眼下出现在蒟蒻 HansBug 面前的是一个化学合成题，据他所知，一般答案如下面这样的格式：\n\n![](https://cdn.luogu.com.cn/upload/pic/2223.png) （接下一行）\n\n![](https://cdn.luogu.com.cn/upload/pic/2221.png) \n\n简单解释下：每种化合物可以通过一步反应生成另一个化合物（将这称作一步反应，设为 $A\\rightarrow B$），现在假设每个 $A\\rightarrow B$ 中，理论上 $1$ 个单位的 $A$ 都仅可以生成 $1$ 个单位的 $B$。然而实际实验表明，并不存在绝对完全的化学转化，设转化率为 $C$（即 $1$ 个单位 $A$ 实际可以生成 $C$ 个单位的 $B$，$0<C<1$）。\n\n现在蒟蒻 HansBug 的知识体系中有 $N$ 个这样 $A\\rightarrow B$ 的转化。然而题目中蒟蒻 HansBug 要由 $1$ 个单位的化合物 $S$ 生成化合物 $T$，可是他脑细胞和 RP 已经消耗殆尽，所以找到最终产量最高的合成路线的艰巨任务就交给你啦！", "inputFormat": "第一行为四个整数：$N,M,S,T$，分别表示总共出现的化合物个数、HansBug 所知道的反应个数、起始的化合物序号、终末的化合物序号（$1\\le S,T\\le N$）。\n\n第 $2 \\sim M+1$ 行每行为两个整数和一个实数：$A_i,B_i,C_i$，分别表示第 $i$ 个反应为由 $1$ 个单位的 $A_i$ 化合物生成 $C_i$ 单位的 $B_i$ 化合物。", "outputFormat": "一行，包含一个实数，为最佳路线下最终的产量（四舍五入保留 $4$ 位小数），如果没有可行路线的话，输出 `orz`。", "hint": "样例 1 和样例 2 中，两条合成路线分别为 $1\\rightarrow3$、$1\\rightarrow2$、$2\\rightarrow3$，产率分别为 $0.8$、$0.9$、$0.9$。\n\n在样例 1 中，有两种可行的路线 $1\\rightarrow3$ 和 $1\\rightarrow2\\rightarrow3$ ，最终产量分别为 $0.8$、$0.9\\times0.9=0.81$，故第二条路线更优，产量为 $0.8100$。\n\n样例 2 中，$2$ 只能生成 $3$，$3$ 无法生成别的化合物，故无法生成，蒟蒻 HansBug 只好选择 `orz`。\n\n**【数据范围】**\n\n![](https://cdn.luogu.com.cn/upload/pic/2220.png)\n", "locale": "zh-CN"}}}
{"pid": "P2785", "type": "P", "difficulty": 4, "samples": [["3 1\n0 0\n1 0\n0 2\n", "1.0000"], ["4 1\n1 1\n1 -1\n-1 -1\n-1 1\n", "4.0000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "计算几何", "洛谷原创"], "title": "物理1（phsic1）- 磁通量", "background": "蒟蒻 HansBug 在物理考场上，挠了无数次的头，可脑子里还是一片空白。", "description": "眼下出现在 HansBug 蒟蒻面前的是一个奇怪的磁场，形状为多边形，可以描述为 $N$ 个点构成的序列，这些点即依次为该磁场的各个顶点。于是现在蒟蒻 HansBug 想要知道该磁场的磁通量为多少。可是他脑细胞和 RP 已经消耗殆尽，所以这个高端的任务就交给你们啦。", "inputFormat": "第一行为一个整数 $N$ 和一个实数 $B$，$B$ 为磁感应强度。\n\n第 $2\\sim N+1$ 行，每行包含两个实数，表示该点的横纵坐标。", "outputFormat": "一行，包含一个实数，即为磁通量（输出四舍五入保留四位小数）。", "hint": "磁通量 $=$ 磁感应强度 $\\times$ 磁场区域面积。\n\n![](https://cdn.luogu.com.cn/upload/pic/2219.png)\n\n$0\\lt B\\le 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Physics 1 (phsic1) - Magnetic Flux", "background": "The newbie HansBug scratched his head countless times in the physics exam, yet his mind was still blank.", "description": "In front of the newbie HansBug is a peculiar magnetic field region in the shape of a polygon, described by a sequence of $N$ points, which are the vertices of the region in order. Now HansBug wants to know the magnetic flux of this region. However, his brain cells and luck have been depleted, so this high-end task is left to you.", "inputFormat": "The first line contains an integer $N$ and a real number $B$, where $B$ is the magnetic flux density.\n\nLines $2\\sim N+1$ each contain two real numbers, representing the $x$ and $y$ coordinates of a point.", "outputFormat": "Output one line containing a real number: the magnetic flux (rounded to 4 decimal places).", "hint": "Magnetic flux $=$ magnetic flux density $\\times$ area of the magnetic field region.\n\n![](https://cdn.luogu.com.cn/upload/pic/2219.png)\n\n$0\\lt B\\le 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "物理1（phsic1）- 磁通量", "background": "蒟蒻 HansBug 在物理考场上，挠了无数次的头，可脑子里还是一片空白。", "description": "眼下出现在 HansBug 蒟蒻面前的是一个奇怪的磁场，形状为多边形，可以描述为 $N$ 个点构成的序列，这些点即依次为该磁场的各个顶点。于是现在蒟蒻 HansBug 想要知道该磁场的磁通量为多少。可是他脑细胞和 RP 已经消耗殆尽，所以这个高端的任务就交给你们啦。", "inputFormat": "第一行为一个整数 $N$ 和一个实数 $B$，$B$ 为磁感应强度。\n\n第 $2\\sim N+1$ 行，每行包含两个实数，表示该点的横纵坐标。", "outputFormat": "一行，包含一个实数，即为磁通量（输出四舍五入保留四位小数）。", "hint": "磁通量 $=$ 磁感应强度 $\\times$ 磁场区域面积。\n\n![](https://cdn.luogu.com.cn/upload/pic/2219.png)\n\n$0\\lt B\\le 10$。", "locale": "zh-CN"}}}
{"pid": "P2786", "type": "P", "difficulty": 3, "samples": [["5 99\nhansbug 1\nkkksc03 2\nyyy 3\nabsi2011 4\nlzn 100\nhansbug is a juruo!but absi2011 not.!?!\none day absi2011 laughed at yyy and hansbug.\nthen kkksc03 and lzn blamed him for that.\n", "16"], ["5 99\nyyyy 1\nkkksc03 2\nyyy 3\nabsi2011 4\nlzn 100\nyyyy is a juruo!but absi2011 not.!?!\none day absi2011 laughed at yyy and yyyy.\nthen kkksc03 and lzn blamed him for that.\n", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "树形数据结构", "平衡树", "洛谷原创", "哈希 hashing", "STL"], "title": "英语1（eng1）- 英语作文", "background": "蒟蒻 HansBug 在英语考场上，挠了无数次的头，可脑子里还是一片空白。", "description": "眼下出现在 HansBug 蒟蒻面前的是一篇英语作文，然而智商捉急的 HansBug 已经草草写完了，此时他发现离考试结束还有 $40$ 分钟，于是他打算估计一下这篇共有 $M$ 个单词的英语作文的含金量如何。众所周知的是，在中高考英语作文中使用高级词汇可以有效提高文章的含金量，从而获得更好的分数。已知蒟蒻 HansBug 知道 $N$ 个高级词汇，该词汇为 $A_i$（词汇长度为 $L_i$，包含数字、大小写字母），该高级词汇的含金量为 $B_i$，则该高级词汇每出现一次便可增加 $B_i$ 的含金量。可是他脑细胞和 RP 已经消耗殆尽，所以这个伟大的任务就交给你啦！", "inputFormat": "第一行包含两个正整数 $N$ 和 $P$，$N$ 表示 HansBug 共知道的高级词汇个数，$P$ 为模数。\n\n接下来 $N$ 行，每行包含一个单词 $A_i$（长度为 $L_i$）和一个整数 $B_i$，其中 $B_i(0<B_i\\le 10^5)$ 表示该单词的含金量。\n\n接下来直到输入结束的若干行为一篇英语作文，其中包含共计 $M$ 个单词，以及若干的分隔符（分隔符包含且仅包含 `,`、`.`、`!`、`?`）。", "outputFormat": "一行，包含一个整数，为该文章的总含金量对 $P$ 的模。", "hint": "样例 $1$ 中，共计出现了 $2$ 次 `hansbug`、$2$ 次 `absi2011`、$1$ 次 `yyy`、$1$ 次 `kkksc03`、$1$ 次 `lzn`，所以总含金量为 $1\\times2+2\\times4+3\\times1+4\\times1+100\\times1=115$，对 $99$ 取模就是 $16$。\n\n样例 $2$ 中，和样例 $1$ 基本一样，值得注意的是整体的 `yyyy` 不可以被认为是 `yyy` 出现 $2$ 次，请注意这是一篇英语作文，一切以单词为最小单位。\n\n此题目中大小写敏感。\n\n数据范围（设所有单词的最大长度为 $\\rm{Lmax}$）：\n\n| 测试点编号 | $N$ | $M$ | $\\rm{Lmax}$ |\n|:-:|:-:|:-:|:-:|\n| $1\\sim 3$ | $\\le 10$ | $\\le 100$ | $\\le 4$ |\n| $4\\sim 5$ | $\\le 10^5$ | $\\le 3\\times 10^4$ | ^ |\n| $6\\sim 7$ | $\\le 5\\times 10^4$ | $\\le 10^4$ | $\\le 50$ |\n| $8\\sim 10$ | $\\le 10^5$ | $\\le 3\\times 10^4$ | ^ |\n\n对于所有数据，$1\\le N\\le 10^5$，$1\\le M\\le 3\\times 10^4$，$1\\le P\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "English 1 (eng1) - English Essay", "background": "\"Juruo\" HansBug scratched his head countless times in the English exam room, but his mind was still blank.", "description": "In front of \"juruo\" HansBug is an English essay. However, with his anxious IQ, HansBug has already scribbled a draft. He then notices there are still $40$ minutes left before the exam ends, so he decides to estimate the \"value\" (also called \"gold content\") of this English essay, which contains $M$ words in total. As we all know, using advanced vocabulary in English essays for entrance exams can effectively raise the essay’s \"gold content\", thus earning a better score. It is known that \"juruo\" HansBug knows $N$ advanced words, denoted as $A_i$ (each word has length $L_i$ and consists of digits and letters in both uppercase and lowercase). The \"gold content\" value of this advanced word is $B_i$, meaning every occurrence of this word increases the total value by $B_i$. But his brain cells and RP (\"luck\") are already exhausted, so this great task is left to you!", "inputFormat": "- The first line contains two positive integers $N$ and $P$, where $N$ is the number of advanced words HansBug knows, and $P$ is the modulus.\n- The next $N$ lines each contain a word $A_i$ (of length $L_i$) and an integer $B_i$, where $B_i$ satisfies $0 < B_i \\le 10^5$, representing the value of that word.\n- The following lines until the end of input form an English essay, which contains $M$ words in total, along with some separators (the separators include and only include `,`, `.`, `!`, `?`).", "outputFormat": "Output one line containing a single integer: the total value of the essay modulo $P$.", "hint": "In sample $1$, there are $2$ occurrences of `hansbug`, $2$ of `absi2011`, $1$ of `yyy`, $1$ of `kkksc03`, and $1$ of `lzn`, so the total value is $1 \\times 2 + 2 \\times 4 + 3 \\times 1 + 4 \\times 1 + 100 \\times 1 = 115$, and $115 \\bmod 99 = 16$.\n\nIn sample $2$, it is basically the same as sample $1$. Note that the whole `yyyy` cannot be considered as `yyy` appearing $2$ times. Please note this is an English essay; treat the word as the smallest unit.\n\nThis problem is case-sensitive.\n\nConstraints (let the maximum length of all words be $\\rm{Lmax}$):\n\n| Test point ID | $N$ | $M$ | $\\rm{Lmax}$ |\n|:-:|:-:|:-:|:-:|\n| $1\\sim 3$ | $\\le 10$ | $\\le 100$ | $\\le 4$ |\n| $4\\sim 5$ | $\\le 10^5$ | $\\le 3 \\times 10^4$ | ^ |\n| $6\\sim 7$ | $\\le 5 \\times 10^4$ | $\\le 10^4$ | $\\le 50$ |\n| $8\\sim 10$ | $\\le 10^5$ | $\\le 3 \\times 10^4$ | ^ |\n\nFor all testdata, $1 \\le N \\le 10^5$, $1 \\le M \\le 3 \\times 10^4$, $1 \\le P \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "英语1（eng1）- 英语作文", "background": "蒟蒻 HansBug 在英语考场上，挠了无数次的头，可脑子里还是一片空白。", "description": "眼下出现在 HansBug 蒟蒻面前的是一篇英语作文，然而智商捉急的 HansBug 已经草草写完了，此时他发现离考试结束还有 $40$ 分钟，于是他打算估计一下这篇共有 $M$ 个单词的英语作文的含金量如何。众所周知的是，在中高考英语作文中使用高级词汇可以有效提高文章的含金量，从而获得更好的分数。已知蒟蒻 HansBug 知道 $N$ 个高级词汇，该词汇为 $A_i$（词汇长度为 $L_i$，包含数字、大小写字母），该高级词汇的含金量为 $B_i$，则该高级词汇每出现一次便可增加 $B_i$ 的含金量。可是他脑细胞和 RP 已经消耗殆尽，所以这个伟大的任务就交给你啦！", "inputFormat": "第一行包含两个正整数 $N$ 和 $P$，$N$ 表示 HansBug 共知道的高级词汇个数，$P$ 为模数。\n\n接下来 $N$ 行，每行包含一个单词 $A_i$（长度为 $L_i$）和一个整数 $B_i$，其中 $B_i(0<B_i\\le 10^5)$ 表示该单词的含金量。\n\n接下来直到输入结束的若干行为一篇英语作文，其中包含共计 $M$ 个单词，以及若干的分隔符（分隔符包含且仅包含 `,`、`.`、`!`、`?`）。", "outputFormat": "一行，包含一个整数，为该文章的总含金量对 $P$ 的模。", "hint": "样例 $1$ 中，共计出现了 $2$ 次 `hansbug`、$2$ 次 `absi2011`、$1$ 次 `yyy`、$1$ 次 `kkksc03`、$1$ 次 `lzn`，所以总含金量为 $1\\times2+2\\times4+3\\times1+4\\times1+100\\times1=115$，对 $99$ 取模就是 $16$。\n\n样例 $2$ 中，和样例 $1$ 基本一样，值得注意的是整体的 `yyyy` 不可以被认为是 `yyy` 出现 $2$ 次，请注意这是一篇英语作文，一切以单词为最小单位。\n\n此题目中大小写敏感。\n\n数据范围（设所有单词的最大长度为 $\\rm{Lmax}$）：\n\n| 测试点编号 | $N$ | $M$ | $\\rm{Lmax}$ |\n|:-:|:-:|:-:|:-:|\n| $1\\sim 3$ | $\\le 10$ | $\\le 100$ | $\\le 4$ |\n| $4\\sim 5$ | $\\le 10^5$ | $\\le 3\\times 10^4$ | ^ |\n| $6\\sim 7$ | $\\le 5\\times 10^4$ | $\\le 10^4$ | $\\le 50$ |\n| $8\\sim 10$ | $\\le 10^5$ | $\\le 3\\times 10^4$ | ^ |\n\n对于所有数据，$1\\le N\\le 10^5$，$1\\le M\\le 3\\times 10^4$，$1\\le P\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2787", "type": "P", "difficulty": 5, "samples": [["10 5\nABCDABCDCD\n1 1 3 A\n3 1 5\n1 1 3 A\n2 1 2 B\n1 2 3 B\n", "1\n2\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "线段树", "洛谷原创", "枚举"], "title": "语文1（chin1）- 理理思维", "background": "蒟蒻 HansBug 在语文考场上，挠了无数次的头，可脑子里还是一片空白。\n", "description": "考试开始了，可是蒟蒻 HansBug 脑中还是一片空白。哦不！准确的说是乱七八糟的。现在首要任务就是帮蒟蒻 HansBug 理理思维。假设 HansBug 的思维是一长串字符串（字符串中包含且仅包含 $26$ 个字母），现在的你，有一张神奇的药方，上面依次包含了三种操作：\n\n1、 获取第 $x$ 到第 $y$ 个字符中字母 $k$ 出现了多少次\n\n2、将第 $x$ 到第 $y$ 个字符全部赋值为字母 $k$\n\n3、将第 $x$ 到第 $y$ 个字符按照 $\\text{a} \\sim \\text{z}$ 的顺序排序\n\n\n你欣喜若狂之时，可是他脑细胞和 RP 已经因为之前过度紧张消耗殆尽，眼看试卷最后还有一篇八百字的作文呢，所以这个关键的任务就交给你啦！\n", "inputFormat": "第一行包含两个整数 $n,m$，分别表示 HansBug 的思维所包含的字母个数和药方上操作个数。\n第二行包含一个长度为 $n$ 的字符串，表示 HansBug 的思维。\n\n接下来 $m$ 行，每行表示一个操作，格式如下：\n\n- `1 x y k` 表示将第 $x$ 到第 $y$ 个字符中 $k$ 出现的次数输出\n\n- `2 x y k` 表示将第 $x$ 到第 $y$ 个字符全部替换为 $k$\n\n- `3 x y` 表示将第 $x$ 到第 $y$ 个字符按照 $\\text{a} \\sim \\text{z}$ 的顺序排序\n", "outputFormat": "输出为若干行，每行包含一个整数，依次为所有操作 $1$ 所得的结果。\n", "hint": "样例说明：\n\n ![](https://cdn.luogu.com.cn/upload/pic/2231.png) \n\n数据规模：\n\n ![](https://cdn.luogu.com.cn/upload/pic/2232.png) \n\n### 此题目中大小写不敏感。\n\n### 新加了三组 hack 数据，不在上面的表格中，但保证 $1\\le n,m \\le 50000$。", "locale": "zh-CN", "translations": {"en": {"title": "Chinese 1 (chin1) - Organize the Thoughts", "background": "Rookie HansBug scratched his head countless times in the Chinese exam, but his mind was still completely blank.", "description": "The exam has started, but HansBug's mind is still blank. Oh no! To be precise, it is a total mess. Your primary task now is to help HansBug organize his thoughts. Assume HansBug's thoughts form a long string (containing only the $26$ letters). Now you have a magic prescription that contains three operations in order:\n\n1. Get how many times letter $k$ appears from the $x$-th to the $y$-th character.\n2. Set all characters from the $x$-th to the $y$-th to letter $k$.\n3. Sort the characters from the $x$-th to the $y$-th in $\\text{a} \\sim \\text{z}$ order.\n\nJust when you are overjoyed, his brain cells and RP have already been exhausted by previous nervousness, and there is still an $800$-word essay at the end of the paper. So this crucial task is up to you!", "inputFormat": "The first line contains two integers $n, m$, denoting the number of letters in HansBug's thoughts and the number of operations on the prescription, respectively.\nThe second line contains a string of length $n$, representing HansBug's thoughts.\n\nThen follow $m$ lines, each describing an operation in the following format (positions are $1$-based and inclusive):\n\n- `1 x y k` means to output how many times $k$ appears from the $x$-th to the $y$-th character.\n- `2 x y k` means to replace all characters from the $x$-th to the $y$-th with $k$.\n- `3 x y` means to sort the characters from the $x$-th to the $y$-th in $\\text{a} \\sim \\text{z}$ order.", "outputFormat": "Output several lines, each containing an integer, which are the results of all type `1` operations in order.", "hint": "Sample explanation:\n\n ![](https://cdn.luogu.com.cn/upload/pic/2231.png) \n\nConstraints:\n\n ![](https://cdn.luogu.com.cn/upload/pic/2232.png) \n\nThis problem is case-insensitive.\n\nThree additional hack testdata groups have been added, which are not in the table above, but it is guaranteed that $1 \\le n, m \\le 50000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "语文1（chin1）- 理理思维", "background": "蒟蒻 HansBug 在语文考场上，挠了无数次的头，可脑子里还是一片空白。\n", "description": "考试开始了，可是蒟蒻 HansBug 脑中还是一片空白。哦不！准确的说是乱七八糟的。现在首要任务就是帮蒟蒻 HansBug 理理思维。假设 HansBug 的思维是一长串字符串（字符串中包含且仅包含 $26$ 个字母），现在的你，有一张神奇的药方，上面依次包含了三种操作：\n\n1、 获取第 $x$ 到第 $y$ 个字符中字母 $k$ 出现了多少次\n\n2、将第 $x$ 到第 $y$ 个字符全部赋值为字母 $k$\n\n3、将第 $x$ 到第 $y$ 个字符按照 $\\text{a} \\sim \\text{z}$ 的顺序排序\n\n\n你欣喜若狂之时，可是他脑细胞和 RP 已经因为之前过度紧张消耗殆尽，眼看试卷最后还有一篇八百字的作文呢，所以这个关键的任务就交给你啦！\n", "inputFormat": "第一行包含两个整数 $n,m$，分别表示 HansBug 的思维所包含的字母个数和药方上操作个数。\n第二行包含一个长度为 $n$ 的字符串，表示 HansBug 的思维。\n\n接下来 $m$ 行，每行表示一个操作，格式如下：\n\n- `1 x y k` 表示将第 $x$ 到第 $y$ 个字符中 $k$ 出现的次数输出\n\n- `2 x y k` 表示将第 $x$ 到第 $y$ 个字符全部替换为 $k$\n\n- `3 x y` 表示将第 $x$ 到第 $y$ 个字符按照 $\\text{a} \\sim \\text{z}$ 的顺序排序\n", "outputFormat": "输出为若干行，每行包含一个整数，依次为所有操作 $1$ 所得的结果。\n", "hint": "样例说明：\n\n ![](https://cdn.luogu.com.cn/upload/pic/2231.png) \n\n数据规模：\n\n ![](https://cdn.luogu.com.cn/upload/pic/2232.png) \n\n### 此题目中大小写不敏感。\n\n### 新加了三组 hack 数据，不在上面的表格中，但保证 $1\\le n,m \\le 50000$。", "locale": "zh-CN"}}}
{"pid": "P2788", "type": "P", "difficulty": 1, "samples": [["1+2-3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "数学1（math1）- 加减算式", "background": "蒟蒻HansBug 在数学考场上，挠了无数次的头，可脑子里还是一片空白。\n", "description": "好不容易啊，HansBug 终于熬到了做到数学最后一题的时刻了，眼前是一堆杂乱的加减算式。显然成功就在眼前了。可是他脑细胞和RP已经消耗殆尽，所以这个重要的任务就交给你们啦。\n", "inputFormat": "一行，包含一个字符串形式的加减法多项式（每一项数字范围为$0\\sim 32767$）。\n", "outputFormat": "一个整数，为计算所得的结果（保证计算结果不会超过长整型范围）。\n", "hint": "数据保证字符串长度不超过 $60000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Math 1 (math1) - Addition and Subtraction Expressions", "background": "Noob HansBug scratched his head countless times in the math exam, but his mind was still blank.", "description": "At long last, HansBug has made it to the final math problem: a jumble of addition and subtraction expressions. Success seems within reach. However, his brain cells and RP (luck) are completely drained, so this important task is now up to you.", "inputFormat": "One line containing an addition/subtraction expression given as a string (the number in each term is in the range $0 \\sim 32767$).", "outputFormat": "A single integer, which is the computed result (guaranteed that the result will not exceed the range of a long integer).", "hint": "The testdata guarantees that the string length does not exceed $60000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数学1（math1）- 加减算式", "background": "蒟蒻HansBug 在数学考场上，挠了无数次的头，可脑子里还是一片空白。\n", "description": "好不容易啊，HansBug 终于熬到了做到数学最后一题的时刻了，眼前是一堆杂乱的加减算式。显然成功就在眼前了。可是他脑细胞和RP已经消耗殆尽，所以这个重要的任务就交给你们啦。\n", "inputFormat": "一行，包含一个字符串形式的加减法多项式（每一项数字范围为$0\\sim 32767$）。\n", "outputFormat": "一个整数，为计算所得的结果（保证计算结果不会超过长整型范围）。\n", "hint": "数据保证字符串长度不超过 $60000$。\n", "locale": "zh-CN"}}}
{"pid": "P2789", "type": "P", "difficulty": 4, "samples": [["4", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "递归"], "title": "直线交点数", "background": "", "description": "假设平面上有 $N$ 条直线，且无三线共点，那么这些直线有多少种可能的交点数？", "inputFormat": "一行，一个整数 $N$，代表有 $N$ 条直线。", "outputFormat": "一行，一个整数，表示方案总数。", "hint": "对于所有数据，满足 $1 \\le N \\le 25$。", "locale": "zh-CN", "translations": {"en": {"title": "Number of Intersection Points of Lines", "background": "", "description": "Assume there are $N$ lines in the plane, and no three lines are concurrent. How many distinct possible numbers of intersection points can these lines have?", "inputFormat": "One line with an integer $N$, the number of lines.", "outputFormat": "One line with an integer, the total number of possible values.", "hint": "For all testdata, $1 \\le N \\le 25$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "直线交点数", "background": "", "description": "假设平面上有 $N$ 条直线，且无三线共点，那么这些直线有多少种可能的交点数？", "inputFormat": "一行，一个整数 $N$，代表有 $N$ 条直线。", "outputFormat": "一行，一个整数，表示方案总数。", "hint": "对于所有数据，满足 $1 \\le N \\le 25$。", "locale": "zh-CN"}}}
{"pid": "P2790", "type": "P", "difficulty": 2, "samples": [["10\nmove 9 onto 1\nmove 8 over 1\nmove 7 over 1\nmove 6 over 1\npile 8 over 6\npile 8 over 5\nmove 2 over 1\nmove 4 over 9\nquit", "0: 0\n1: 1 9 2 4\n2:\n3: 3\n4:\n5: 5 8 7 6\n6:\n7:\n8:\n9:"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "ccj与zrz之积木问题", "background": "ccj和zrz无聊到了玩起了搭积木...(本题选自uva101，翻译来自《算法竞赛入门经典2》)\n", "description": "从左到右有 $n$ 个木块，编号从 $0$ 到 $n-1$，要求模拟以下 $4$ 种操作（下面的 $a$ 和 $b$ 都是木块编号，归位表示比如 $1$ 号木块归到 $1$ 号位去）。\n\n- $\\texttt{move }a\\texttt{ onto }b$：把 $a$ 和 $b$ 上方的木块全部归位，然后把 $a$ 摞在 $b$ 上面；\n- $\\texttt{move }a\\texttt{ over }b$：把 $a$ 上方的全部归位，然后把 $a$ 放在 $b$ 所在木块堆的顶部；\n- $\\texttt{pile }a\\texttt{ onto }b$：把 $b$ 上方的木块全部归位，然后把 $a$ 及上面的木块整体摞在 $b$ 上面；\n- $\\texttt{pile }a\\texttt{ over }b$：把 $a$ 及上面的木块整体摞在 $b$ 所在木块堆的顶部；\n- 遇到 $\\texttt{quit}$ 停止。$a$ 和 $b$ 在同一堆的指令时非法指令，应当忽略。\n\n最后输出每个位置的木块列表，按照从底部到顶部的顺序排列。", "inputFormat": "第一行一个整数 $n$。\n\n接下来若干行：每行一个指令（语法不会错），遇到 $\\texttt{quit}$ 停止。", "outputFormat": "输出共 $n$ 行，第 $i$ 行输出一个 $i$ 和冒号，然后一个空格，输出，它位置上的所有积木。", "hint": "### 数据范围及约定\n\n对于全部数据，$0<n<25$。", "locale": "zh-CN", "translations": {"en": {"title": "ccj and zrz's Blocks Problem", "background": "ccj and zrz were so bored that they started playing with building blocks... (This problem is from UVA 101, translation from \"算法竞赛入门经典 2\".)", "description": "From left to right there are $n$ blocks, numbered from $0$ to $n-1$. Simulate the following 4 operations (here $a$ and $b$ are block numbers; “return to initial position” means, for example, block $1$ goes back to position $1$):\n\n- $\\texttt{move }a\\texttt{ onto }b$: Return all blocks above $a$ and above $b$ to their initial positions, then place $a$ on top of $b$.\n- $\\texttt{move }a\\texttt{ over }b$: Return all blocks above $a$ to their initial positions, then place $a$ on the top of the stack containing $b$.\n- $\\texttt{pile }a\\texttt{ onto }b$: Return all blocks above $b$ to their initial positions, then move $a$ together with all blocks above it as a whole onto $b$.\n- $\\texttt{pile }a\\texttt{ over }b$: Move $a$ together with all blocks above it as a whole onto the top of the stack containing $b$.\n- Stop when encountering $\\texttt{quit}$. If $a$ and $b$ are in the same stack, the instruction is illegal and should be ignored.\n\nFinally, output the list of blocks at each position, in order from bottom to top.", "inputFormat": "The first line contains an integer $n$.\n\nThen follow several lines, each containing one instruction (the syntax will be correct). Stop when encountering $\\texttt{quit}$.", "outputFormat": "Output exactly $n$ lines. On the $i$-th line, output $i$ followed by a colon, then a space, then all the blocks at position $i$, listed from bottom to top.", "hint": "### Constraints and Notes\n\nFor all testdata, $0<n<25$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "ccj与zrz之积木问题", "background": "ccj和zrz无聊到了玩起了搭积木...(本题选自uva101，翻译来自《算法竞赛入门经典2》)\n", "description": "从左到右有 $n$ 个木块，编号从 $0$ 到 $n-1$，要求模拟以下 $4$ 种操作（下面的 $a$ 和 $b$ 都是木块编号，归位表示比如 $1$ 号木块归到 $1$ 号位去）。\n\n- $\\texttt{move }a\\texttt{ onto }b$：把 $a$ 和 $b$ 上方的木块全部归位，然后把 $a$ 摞在 $b$ 上面；\n- $\\texttt{move }a\\texttt{ over }b$：把 $a$ 上方的全部归位，然后把 $a$ 放在 $b$ 所在木块堆的顶部；\n- $\\texttt{pile }a\\texttt{ onto }b$：把 $b$ 上方的木块全部归位，然后把 $a$ 及上面的木块整体摞在 $b$ 上面；\n- $\\texttt{pile }a\\texttt{ over }b$：把 $a$ 及上面的木块整体摞在 $b$ 所在木块堆的顶部；\n- 遇到 $\\texttt{quit}$ 停止。$a$ 和 $b$ 在同一堆的指令时非法指令，应当忽略。\n\n最后输出每个位置的木块列表，按照从底部到顶部的顺序排列。", "inputFormat": "第一行一个整数 $n$。\n\n接下来若干行：每行一个指令（语法不会错），遇到 $\\texttt{quit}$ 停止。", "outputFormat": "输出共 $n$ 行，第 $i$ 行输出一个 $i$ 和冒号，然后一个空格，输出，它位置上的所有积木。", "hint": "### 数据范围及约定\n\n对于全部数据，$0<n<25$。", "locale": "zh-CN"}}}
{"pid": "P2791", "type": "P", "difficulty": 7, "samples": [["3 2 1 3\n3 2 2", "332748121"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2019", "O2优化", "组合数学", "快速数论变换 NTT"], "title": "幼儿园篮球题", "background": "众所周知，全民制作幼儿园园龄两年半的蔡徐坤同学喜欢唱、跳、rap 和篮球。而作为欧文的老师，他的篮球技术自然比 ikun 们要强得多。", "description": "全民制作幼儿园的蔡徐坤专属篮球场上总共有 $N$ 个蔡徐坤专属篮球，而其中有 $M$ 个是没气的。鉴于蔡徐坤的高超技术，他投**没气的球一定能进**，而投**有气的球一定不能**。\n\n蔡徐坤举办了 $S$ 场巡回篮球表演，第 $i$ 场表演 ikun 们会指定投球个数 $k_i$ ，ikun 们会从 $N$ 个蔡徐坤专属篮球中准备 $n_i$ 个球放在场地上，其中恰好有 $m_i$ 个是没气的。蔡徐坤会在这 $n_i$ 个蔡徐坤专属篮球中**随机**选出 $k_i$ 个投篮。如果投进了 $x$ 个，则这次表演的**失败度**为 $x^L$。ikun 们想知道这 $S$ 场表演的**期望失败度**对 $998244353$ 取模的结果。篮球表演之间**相互独立**。", "inputFormat": "第一行，四个正整数，$N,M,S,L$，表示蔡徐坤专属篮球总个数，没气的篮球总个数，蔡徐坤巡回篮球表演场数，以及失败度参数。\n\n接下来的第 $i+1$ 行，每行三个正整数 $n_i,m_i,k_i$，表示第 $i$ 场表演蔡徐坤专属篮球个数、没气的篮球个数和 ikun 们指定的投球个数。", "outputFormat": "输出共 $S$ 行，第 $i$ 行为一个正整数，表示第 $i$ 场表演的期望失败度对 $998244353$ 取模的结果。", "hint": "对于样例，我们作出如下解释：设失败度为 $X$，蔡徐坤有 $\\frac{1}{3}$ 的概率投进 $2$ 个，有 $\\frac{2}{3}$ 的概率投进 $1$ 个，期望失败度为 $E(x)=\\frac{2^3}{3}+\\frac{1^3*2}{3}=\\frac{10}{3}$，$\\frac{10}{3}\\equiv 332748121\\pmod{998244353}$。\n\n子任务 1 ($15\\%$)：$1\\leq L\\leq2$。\n\n子任务 2 ($10\\%$)：$1\\leq N\\leq10^5$。\n\n子任务 3 ($75\\%$)：无特殊限制。\n\n对于全部数据，$1\\leq S\\leq200$，$1\\leq L\\leq2\\times 10^5$，$1\\leq M\\leq N\\leq2\\times 10^7$。并且对于 $1\\leq i\\leq S$，有 $1\\leq m_i,k_i\\leq n_i\\leq N$，$1\\leq m_i\\leq M$。", "locale": "zh-CN", "translations": {"en": {"title": "Kindergarten Basketball Problem.", "background": "As everyone knows, Cai Xukun, who “debuted” from the national talent show and has been in kindergarten for two and a half years, likes singing, dancing, rap, and basketball. As Irving’s teacher, his basketball skills are naturally much better than those of the “ikun” fans.", "description": "On Cai Xukun’s exclusive basketball court in the “national talent show kindergarten”, there are a total of $N$ exclusive basketballs, among which $M$ are deflated. Due to Cai Xukun’s superb skills, when he shoots a **deflated ball, it must go in**, and when he shoots an **inflated ball, it must not go in**.\n\nCai Xukun holds $S$ touring basketball performances. In the $i$-th performance, the ikun fans specify the number of shots $k_i$. They will prepare $n_i$ balls from the $N$ exclusive basketballs and place them on the court, among which exactly $m_i$ are deflated. Cai Xukun will **randomly** choose $k_i$ balls from these $n_i$ exclusive basketballs to shoot. If he makes $x$ shots, then the **failure score** of this performance is $x^L$. The ikun fans want to know, for these $S$ performances, the result of the **expected failure score** modulo $998244353$. The basketball performances are **independent** of each other.", "inputFormat": "The first line contains four positive integers $N, M, S, L$, representing the total number of Cai Xukun’s exclusive basketballs, the total number of deflated basketballs, the number of touring basketball performances, and the failure score parameter.\n\nEach of the next $S$ lines contains three positive integers $n_i, m_i, k_i$, representing, for the $i$-th performance, the number of exclusive basketballs used, the number of deflated basketballs among them, and the number of shots specified by the ikun fans.", "outputFormat": "Output $S$ lines in total. The $i$-th line contains a positive integer, representing the expected failure score of the $i$-th performance modulo $998244353$.", "hint": "For the sample, we explain as follows. Let the failure score be $X$. Cai Xukun has probability $\\frac{1}{3}$ to make $2$ shots, and probability $\\frac{2}{3}$ to make $1$ shot. The expected failure score is $E(x)=\\frac{2^3}{3}+\\frac{1^3*2}{3}=\\frac{10}{3}$, and $\\frac{10}{3}\\equiv 332748121\\pmod{998244353}$.\n\nSubtask 1 ($15\\%$): $1\\leq L\\leq2$.\n\nSubtask 2 ($10\\%$): $1\\leq N\\leq10^5$.\n\nSubtask 3 ($75\\%$): No special constraints.\n\nFor all testdata, $1\\leq S\\leq200$, $1\\leq L\\leq2\\times 10^5$, $1\\leq M\\leq N\\leq2\\times 10^7$. Also, for $1\\leq i\\leq S$, we have $1\\leq m_i,k_i\\leq n_i\\leq N$, $1\\leq m_i\\leq M$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "幼儿园篮球题", "background": "众所周知，全民制作幼儿园园龄两年半的蔡徐坤同学喜欢唱、跳、rap 和篮球。而作为欧文的老师，他的篮球技术自然比 ikun 们要强得多。", "description": "全民制作幼儿园的蔡徐坤专属篮球场上总共有 $N$ 个蔡徐坤专属篮球，而其中有 $M$ 个是没气的。鉴于蔡徐坤的高超技术，他投**没气的球一定能进**，而投**有气的球一定不能**。\n\n蔡徐坤举办了 $S$ 场巡回篮球表演，第 $i$ 场表演 ikun 们会指定投球个数 $k_i$ ，ikun 们会从 $N$ 个蔡徐坤专属篮球中准备 $n_i$ 个球放在场地上，其中恰好有 $m_i$ 个是没气的。蔡徐坤会在这 $n_i$ 个蔡徐坤专属篮球中**随机**选出 $k_i$ 个投篮。如果投进了 $x$ 个，则这次表演的**失败度**为 $x^L$。ikun 们想知道这 $S$ 场表演的**期望失败度**对 $998244353$ 取模的结果。篮球表演之间**相互独立**。", "inputFormat": "第一行，四个正整数，$N,M,S,L$，表示蔡徐坤专属篮球总个数，没气的篮球总个数，蔡徐坤巡回篮球表演场数，以及失败度参数。\n\n接下来的第 $i+1$ 行，每行三个正整数 $n_i,m_i,k_i$，表示第 $i$ 场表演蔡徐坤专属篮球个数、没气的篮球个数和 ikun 们指定的投球个数。", "outputFormat": "输出共 $S$ 行，第 $i$ 行为一个正整数，表示第 $i$ 场表演的期望失败度对 $998244353$ 取模的结果。", "hint": "对于样例，我们作出如下解释：设失败度为 $X$，蔡徐坤有 $\\frac{1}{3}$ 的概率投进 $2$ 个，有 $\\frac{2}{3}$ 的概率投进 $1$ 个，期望失败度为 $E(x)=\\frac{2^3}{3}+\\frac{1^3*2}{3}=\\frac{10}{3}$，$\\frac{10}{3}\\equiv 332748121\\pmod{998244353}$。\n\n子任务 1 ($15\\%$)：$1\\leq L\\leq2$。\n\n子任务 2 ($10\\%$)：$1\\leq N\\leq10^5$。\n\n子任务 3 ($75\\%$)：无特殊限制。\n\n对于全部数据，$1\\leq S\\leq200$，$1\\leq L\\leq2\\times 10^5$，$1\\leq M\\leq N\\leq2\\times 10^7$。并且对于 $1\\leq i\\leq S$，有 $1\\leq m_i,k_i\\leq n_i\\leq N$，$1\\leq m_i\\leq M$。", "locale": "zh-CN"}}}
{"pid": "P2792", "type": "P", "difficulty": 6, "samples": [["4\n10.00 1\n1.80 1\n3.00 0\n2.50 2\n2\n1 4 2.00\n4 2 1.50", "15.50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2008", "各省省选", "江苏", "生成树"], "title": "[JSOI2008] 小店购物", "background": "JSOI集训队的队员发现，在他们经常活动的集训地，有一个小店因为其丰富的经营优惠方案深受附近居民的青睐，生意红火。\n", "description": "小店的优惠方案十分简单有趣：\n\n一次消费过程中，如您在本店购买了精制油的话，您购买香皂时就可以享受 $2.00$ 元 / 块的优惠价；如果您在本店购买了香皂的话，您购买可乐时就可以享受 $1.50$ 元 / 听的优惠价……诸如此类的优惠方案可概括为：如果您在本店购买了商品 $A$ 的话，您就可以以 $P$ 元 / 件的优惠价格购买商品 $B$（购买的数量不限）。\n\n有趣的是，你需要购买同样一些商品，由于不同的买卖顺序，老板可能会叫你付不同数量的钱。比如你需要一块香皂（原价 $2.50$ 元）、一瓶精制油（原价 $10.00$ 元）、一听可乐（原价 $1.80$ 元），如果你按照可乐、精制油、香皂这样的顺序购买的话，老板会问你要 $13.80$ 元；而如果你按照精制油、香皂、可乐这样的顺序购买的话，您只需付 $13.50$ 元。\n\n该处居民发现 JSOI 集训队的队员均擅长电脑程序设计，于是他们请集训队的队员编写一个程序：在告诉你该小店商品的原价，所有优惠方案及所需的商品后，计算至少需要花多少钱（不允许购买任何不必要的商品，即使这样做可能使花的钱更少）。", "inputFormat": "输入文件第一行为一个整数 $n\\ (1 \\le n \\le 50)$，表示小店的商品总数。\n\n接下来是 $n$ 行，其中第 $i+1$ 行由一个实数 $c_i\\ (0<c_i \\le 1000)$ 和一个整数 $m_i\\ (0 \\le m_i \\le 100)$ 组成，其间由一个空格分隔，分别表示第 $i$ 种商品的原价和所需数量。第 $n+2$ 行又是一个整数 $k\\ (1 \\le k \\le 500)$，表示小店的优惠方案总数。\n\n接着 $k$ 行，每行有二个整数 $A,B(1 \\le A,B \\le n)$ 和一个实数 $P(0 \\le P<1000)$，表示一种优惠方案，即如果您购买了商品 $A$，您就可以以 $P$ 元 / 件的优惠价格购买商品 $B$，$P$ 小于商品 $B$ 的原价。所有优惠方案的 $(A,B)$ 都是不同的。为了方便老板不收分币，所以所有价格都不出现单位分。", "outputFormat": "输出只有一个实数，表示最少需要花多少钱。输出实数须保留两位小数。\n", "hint": "数据范围见输入格式\n", "locale": "zh-CN", "translations": {"en": {"title": "[JSOI2008] Small Shop Shopping", "background": "The members of the JSOI training team discovered that at their regular training site, there is a small shop that is very popular among nearby residents due to its rich variety of promotional deals, and business is booming.", "description": "The shop’s promotions are simple and fun:\n\nDuring a single shopping session, if you buy refined oil at this shop, then when you buy soap you can enjoy a discounted price of $2.00$ yuan per bar; if you buy soap, then when you buy cola you can enjoy a discounted price of $1.50$ yuan per can; and so on. In summary: if you buy item $A$, then you may buy item $B$ at a discounted price of $P$ yuan per unit (with no limit on the quantity).\n\nInterestingly, you need to buy some fixed items, and because different purchase orders may lead the shopkeeper to charge you different totals. For example, you need one bar of soap (original price $2.50$ yuan), one bottle of refined oil (original price $10.00$ yuan), and one can of cola (original price $1.80$ yuan). If you purchase in the order cola → refined oil → soap, the shopkeeper will charge you $13.80$ yuan; but if you purchase in the order refined oil → soap → cola, you only need to pay $13.50$ yuan.\n\nThe local residents know that JSOI team members are good at programming, so they ask you to write a program: given the original prices of all items in the shop, all promotion rules, and the items you need, compute the minimum amount of money you must spend (you are not allowed to buy any unnecessary items, even if doing so could reduce the total cost).", "inputFormat": "The first line contains an integer $n\\ (1 \\le n \\le 50)$, the total number of item types in the shop.\n\nThe next $n$ lines follow. The $(i+1)$-th line contains a real number $c_i\\ (0 < c_i \\le 1000)$ and an integer $m_i\\ (0 \\le m_i \\le 100)$ separated by a space, denoting the original price of item $i$ and the required quantity. The $(n+2)$-th line contains an integer $k\\ (1 \\le k \\le 500)$, the total number of promotion rules.\n\nThen $k$ lines follow. Each line contains two integers $A, B\\ (1 \\le A, B \\le n)$ and a real number $P\\ (0 \\le P < 1000)$, describing one promotion: if you buy item $A$, then you may buy item $B$ at a discounted price of $P$ yuan per unit. Here $P$ is less than the original price of item $B$. All pairs $(A, B)$ in the promotions are distinct. For convenience, the shopkeeper does not use one-cent units, so all prices are multiples of $0.10$ yuan.", "outputFormat": "Output a single real number: the minimum total cost. Print the number with exactly two decimal places.", "hint": "Constraints can be found in the Input Format.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JSOI2008] 小店购物", "background": "JSOI集训队的队员发现，在他们经常活动的集训地，有一个小店因为其丰富的经营优惠方案深受附近居民的青睐，生意红火。\n", "description": "小店的优惠方案十分简单有趣：\n\n一次消费过程中，如您在本店购买了精制油的话，您购买香皂时就可以享受 $2.00$ 元 / 块的优惠价；如果您在本店购买了香皂的话，您购买可乐时就可以享受 $1.50$ 元 / 听的优惠价……诸如此类的优惠方案可概括为：如果您在本店购买了商品 $A$ 的话，您就可以以 $P$ 元 / 件的优惠价格购买商品 $B$（购买的数量不限）。\n\n有趣的是，你需要购买同样一些商品，由于不同的买卖顺序，老板可能会叫你付不同数量的钱。比如你需要一块香皂（原价 $2.50$ 元）、一瓶精制油（原价 $10.00$ 元）、一听可乐（原价 $1.80$ 元），如果你按照可乐、精制油、香皂这样的顺序购买的话，老板会问你要 $13.80$ 元；而如果你按照精制油、香皂、可乐这样的顺序购买的话，您只需付 $13.50$ 元。\n\n该处居民发现 JSOI 集训队的队员均擅长电脑程序设计，于是他们请集训队的队员编写一个程序：在告诉你该小店商品的原价，所有优惠方案及所需的商品后，计算至少需要花多少钱（不允许购买任何不必要的商品，即使这样做可能使花的钱更少）。", "inputFormat": "输入文件第一行为一个整数 $n\\ (1 \\le n \\le 50)$，表示小店的商品总数。\n\n接下来是 $n$ 行，其中第 $i+1$ 行由一个实数 $c_i\\ (0<c_i \\le 1000)$ 和一个整数 $m_i\\ (0 \\le m_i \\le 100)$ 组成，其间由一个空格分隔，分别表示第 $i$ 种商品的原价和所需数量。第 $n+2$ 行又是一个整数 $k\\ (1 \\le k \\le 500)$，表示小店的优惠方案总数。\n\n接着 $k$ 行，每行有二个整数 $A,B(1 \\le A,B \\le n)$ 和一个实数 $P(0 \\le P<1000)$，表示一种优惠方案，即如果您购买了商品 $A$，您就可以以 $P$ 元 / 件的优惠价格购买商品 $B$，$P$ 小于商品 $B$ 的原价。所有优惠方案的 $(A,B)$ 都是不同的。为了方便老板不收分币，所以所有价格都不出现单位分。", "outputFormat": "输出只有一个实数，表示最少需要花多少钱。输出实数须保留两位小数。\n", "hint": "数据范围见输入格式\n", "locale": "zh-CN"}}}
{"pid": "P2793", "type": "P", "difficulty": 3, "samples": [["1 5 3\n5", "2"], ["5 6 3\n5 4 3 2 1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟"], "title": "Facer的工厂", "background": "", "description": "Facer 是一个工厂里的兼职工人，这回他碰到了一个问题。\n\n有 $N$ 根钢管，每根长度是 $a_i$。\n\n有一个钢管加工器，每秒钟可以加工 $k$ 长度的钢管。\n\nFacer 需要按顺序加工这些钢管。\n\n不过呢，机器的最大等待长度是 $h$，即等待加工（已经塞入机器却还没有加工的钢管）的钢管长度不能超过 $h$（保证 $a_i \\le h$）。\n\nFacer 只能在整数秒的时候塞入钢管。\n\n求 Facer 处理完这些钢管最少要多久呢？", "inputFormat": "第一行 $N,H,K$，代表钢管条数，最大等待长度和每秒处理速度。\n\n接下来 $N$ 行，每行一个数，代表钢管的长度。\n\n钢管需要按顺序处理。", "outputFormat": "最短时间\n", "hint": "样例 1 解释：只有 $1$ 根钢管，加工时间为 $\\lceil 5/3\\rceil= 2$。\n\n样例 2 解释：\n\n第一秒塞入 $5$，等待长度 $5$，机器处理了 $3$，等待长度 $2$。\n\n第二秒塞入 $4$，等待长度 $6$，机器处理了 $3$，等待长度 $3$。\n\n第三秒塞入 $3$，等待长度 $6$，机器处理了 $3$，等待长度 $3$。\n\n第四秒塞入了 $1,2$，等待长度 $6$，机器处理了 $3$，等待长度 $3$。\n\n第五秒无塞入，等待长度 $3$，机器处理了 $3$，处理完毕。\n\n$N \\le 100000$，$h,a_i \\le 10^9$。\n\n本题 by zhouyonglong\n", "locale": "zh-CN", "translations": {"en": {"title": "Facer's Factory", "background": "", "description": "Facer is a part-time worker in a factory, and this time he encounters a problem.\n\nThere are $N$ steel pipes, with the $i$-th pipe having length $a_i$.\n\nThere is a pipe processor that can process $K$ units of pipe length per second.\n\nFacer needs to process these pipes in order.\n\nThe machine has a maximum waiting length $H$, meaning the total length of pipes waiting to be processed (already fed into the machine but not yet processed) cannot exceed $H$ (guaranteed that $a_i \\le H$).\n\nFacer can only feed pipes into the machine at integer seconds.\n\nWhat is the minimum time for Facer to finish processing all the pipes?", "inputFormat": "The first line contains $N, H, K$, representing the number of pipes, the maximum waiting length, and the processing speed per second.\n\nThe next $N$ lines each contain one number, the length of a pipe.\n\nThe pipes must be processed in order.", "outputFormat": "The minimum time.", "hint": "Sample 1 explanation: There is only $1$ pipe, and the processing time is $\\lceil 5/3 \\rceil = 2$.\n\nSample 2 explanation:\n- At the first second, feed $5$, waiting length is $5$. The machine processes $3$, waiting length becomes $2$.\n- At the second second, feed $4$, waiting length is $6$. The machine processes $3$, waiting length becomes $3$.\n- At the third second, feed $3$, waiting length is $6$. The machine processes $3$, waiting length becomes $3$.\n- At the fourth second, feed $1, 2$, waiting length is $6$. The machine processes $3$, waiting length becomes $3$.\n- At the fifth second, feed nothing, waiting length is $3$. The machine processes $3$, and all pipes are finished.\n\nConstraints: $N \\le 100000$, $H, a_i \\le 10^9$.\n\nProblem by zhouyonglong.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Facer的工厂", "background": "", "description": "Facer 是一个工厂里的兼职工人，这回他碰到了一个问题。\n\n有 $N$ 根钢管，每根长度是 $a_i$。\n\n有一个钢管加工器，每秒钟可以加工 $k$ 长度的钢管。\n\nFacer 需要按顺序加工这些钢管。\n\n不过呢，机器的最大等待长度是 $h$，即等待加工（已经塞入机器却还没有加工的钢管）的钢管长度不能超过 $h$（保证 $a_i \\le h$）。\n\nFacer 只能在整数秒的时候塞入钢管。\n\n求 Facer 处理完这些钢管最少要多久呢？", "inputFormat": "第一行 $N,H,K$，代表钢管条数，最大等待长度和每秒处理速度。\n\n接下来 $N$ 行，每行一个数，代表钢管的长度。\n\n钢管需要按顺序处理。", "outputFormat": "最短时间\n", "hint": "样例 1 解释：只有 $1$ 根钢管，加工时间为 $\\lceil 5/3\\rceil= 2$。\n\n样例 2 解释：\n\n第一秒塞入 $5$，等待长度 $5$，机器处理了 $3$，等待长度 $2$。\n\n第二秒塞入 $4$，等待长度 $6$，机器处理了 $3$，等待长度 $3$。\n\n第三秒塞入 $3$，等待长度 $6$，机器处理了 $3$，等待长度 $3$。\n\n第四秒塞入了 $1,2$，等待长度 $6$，机器处理了 $3$，等待长度 $3$。\n\n第五秒无塞入，等待长度 $3$，机器处理了 $3$，处理完毕。\n\n$N \\le 100000$，$h,a_i \\le 10^9$。\n\n本题 by zhouyonglong\n", "locale": "zh-CN"}}}
{"pid": "P2794", "type": "P", "difficulty": 6, "samples": [["3 3\n1 7\n2 -1\n6 6\n1 1 5\n2 4 5\n2 3 0", "3\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创"], "title": "Facer和教官", "background": "Facer和教官关系很好，被教官任命为副教官。", "description": "Facer 要训练一个 $N$ 个人的队伍。\n\n每个人有一个智力值 $a_i$ 和一个体力值 $b_i$。\n\nFacer 希望两个人组队，组队的两个人要尽量相似。\n\n具体来说，编号为 $i$ 和 $j$ 的人的相似度为 $| a_i - a_j + b_j - b_i | + | a_i - a_j |$。相似度越小，表示越相似。\n\n现在队伍里有 $N$ 个人，但是 Facer 想要进行 $M$ 次操作。有以下两种操作：\n\n- 在队伍里加入一个人。\n- 给出一个**不在队伍里**的人的数据，输出他和队伍里所有人的相似度中最低的相似度。注意，操作结束后，**不要将这个人加入队伍，也不要将找到的人移出队伍**。", "inputFormat": "第一行，两个整数 $N,M$。\n\n接下来 $N$ 行，第 $i$ 行两个数 $a_i,b_i$，表示队伍中第 $i$ 个人的智力值 $a_i$，体力值 $b_i$。\n\n接下来 $M$ 行，每行一个操作。\n\n- `1 a b`：表示队伍中新加入了一个人，智力为 $a$，体力为 $b$。\n- `2 a b`：表示有一个不在队伍里的人的智力为 $a$，体力为 $b$，输出队伍里和这个人最相似的人与这个人的相似度。", "outputFormat": "对于每个操作 `2`，输出一行，表示队伍里和这个人最相似的人与这个人的相似度。", "hint": "对于 $40\\%$ 的数据，$1 \\le N,M \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le {10}^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Facer and the Instructor", "background": "Facer has a good relationship with the instructor and is appointed as the deputy instructor.", "description": "Facer needs to train a team of $N$ people.\n\nEach person has an intelligence value $a_i$ and a stamina value $b_i$.\n\nFacer wants to form teams of two, and the two people in a team should be as similar as possible.\n\nSpecifically, the similarity between person $i$ and person $j$ is $| a_i - a_j + b_j - b_i | + | a_i - a_j |$. The smaller the similarity, the more similar they are.\n\nThere are currently $N$ people in the team, but Facer wants to perform $M$ operations. There are two types of operations:\n\n- Add a person to the team.\n- Given the data of a person who is not in the team, output the minimum similarity between this person and all people in the team. Note that after the operation, do not add this person to the team, and do not remove any person found from the team.", "inputFormat": "The first line contains two integers $N, M$.\n\nThe next $N$ lines each contain two numbers $a_i, b_i$, representing the intelligence and stamina of the $i$-th person in the team.\n\nThe next $M$ lines each describe one operation:\n\n- `1 a b`: A new person with intelligence $a$ and stamina $b$ is added to the team.\n- `2 a b`: There is a person not in the team with intelligence $a$ and stamina $b$. Output the minimum similarity between this person and all people in the team.", "outputFormat": "For each operation `2`, output one line containing the minimum similarity between this person and the most similar person in the team.", "hint": "For $40\\%$ of the testdata, $1 \\le N, M \\le 1000$.\n\nFor $100\\%$ of the testdata, $1 \\le N, M \\le {10}^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Facer和教官", "background": "Facer和教官关系很好，被教官任命为副教官。", "description": "Facer 要训练一个 $N$ 个人的队伍。\n\n每个人有一个智力值 $a_i$ 和一个体力值 $b_i$。\n\nFacer 希望两个人组队，组队的两个人要尽量相似。\n\n具体来说，编号为 $i$ 和 $j$ 的人的相似度为 $| a_i - a_j + b_j - b_i | + | a_i - a_j |$。相似度越小，表示越相似。\n\n现在队伍里有 $N$ 个人，但是 Facer 想要进行 $M$ 次操作。有以下两种操作：\n\n- 在队伍里加入一个人。\n- 给出一个**不在队伍里**的人的数据，输出他和队伍里所有人的相似度中最低的相似度。注意，操作结束后，**不要将这个人加入队伍，也不要将找到的人移出队伍**。", "inputFormat": "第一行，两个整数 $N,M$。\n\n接下来 $N$ 行，第 $i$ 行两个数 $a_i,b_i$，表示队伍中第 $i$ 个人的智力值 $a_i$，体力值 $b_i$。\n\n接下来 $M$ 行，每行一个操作。\n\n- `1 a b`：表示队伍中新加入了一个人，智力为 $a$，体力为 $b$。\n- `2 a b`：表示有一个不在队伍里的人的智力为 $a$，体力为 $b$，输出队伍里和这个人最相似的人与这个人的相似度。", "outputFormat": "对于每个操作 `2`，输出一行，表示队伍里和这个人最相似的人与这个人的相似度。", "hint": "对于 $40\\%$ 的数据，$1 \\le N,M \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le {10}^5$。", "locale": "zh-CN"}}}
{"pid": "P2795", "type": "P", "difficulty": 5, "samples": [["3 3 3\ns1 v1 s1\ns3 s19 v2\nv3 s-1 v-1\n", "2"], ["5 10 3\ns81 s47 s3 s0 s82 s31 s89 v0 s97 v-1\ns14 s94 v1 v-1 v1 s106 v1 v0 v-1 v0\ns93 s105 v-1 s219 v0 v0 v-1 v1 s225 v1\nv0 s160 v1 v1 s348 s120 s240 s392 s280 s172\ns305 s455 s140 v-1 s455 v0 v-1 v0 v1 s410\n", "430"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索"], "title": "Facer爱游泳", "background": "Facer 是一个爱游泳的孩子。", "description": "一天他来到了一个 $n \\times m$ 的游泳池中，其中第一行是水面，第 $n$ 行是游泳池底。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ggncnjpk.png)\n\nFacer 想要从 $(1,1)$ 游到 $(1,m)$。他初始速度为 $0$ m/s。\n\nFacer 可以按照以下方式游泳：假设当前 Facer 位于 $(x,y)$，速度为 $v$，那么它可以游到 $(x+v,y+1)$，如果 $x+v>n$，那么就会游到 $(n,y+1)$。\n\n到了每一个格子，Facer 可以选择将自己的速度 $+1$，$-1$ 或者不变，也就是说每次 Facer 有三种选择：\n\n- 游到 $(x+v-1,y+1)$，速度变为 $v-1$。\n- 游到 $(x+v,y+1)$，速度变为 $v$。\n- 游到 $(x+v+1,y+1)$，速度变为 $v+1$。\n\n游泳池的每个格子上会放有以下两种物品中的一种：\n\n- 变速器，每个变速器有一个属性 $w$，到了这个格子速度会变为 $v+w$（当然原来的 $+1$，$-1$，不变照样存在）。\n- 金币盒，每个金币盒中有一定数量的钱 $a$，到了这个位置你可以得到 $a$ 个金币。\n\n除此之外，有以下两点需要注意的：\n\n1. 当 Facer 到达水面，即位于 $(1,x)$ 时，Facer的速度会变成 $0$（当然他仍然可以选择将速度 $+1$，$-1$ 或不变）。\n2. Facer 不能在水下待太长时间，相邻两次到水面换气的时间不能超过 $k$ 秒。\n\n求 Facer 能够得到最大金币的数量。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行到第 $n+1$ 行，每行 $m$ 个字符串，表示每个格子物品的情况：\n\n- 首字母为 ```v```，后面接一个整数 $w$，表示该格子中有一个变速器，属性为 $w$。\n- 首字母为 ```s```，后面接一个整数 $a$，表示该格子中有一个金币盒，钱数为 $a$。", "outputFormat": "一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$1 \\leq n,m \\leq 5$。\n- 对于 $40\\%$ 的数据，$1 \\leq n,m \\leq 100$。\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 100$，$1 \\leq m \\leq 1000$，$1 \\leq k \\leq 10$，$-20 \\leq w \\leq 20$，$-1000 \\leq a \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Facer Loves Swimming", "background": "Facer is a child who loves swimming.", "description": "One day he came to an $n \\times m$ swimming pool, where the first row is the water surface and the $n$-th row is the bottom of the pool.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ggncnjpk.png)\n\nFacer wants to swim from $(1, 1)$ to $(1, m)$. His initial speed is $0$ m/s.\n\nFacer can swim as follows: suppose Facer is currently at $(x, y)$ with speed $v$, then he can swim to $(x+v, y+1)$. If $x+v > n$, he will instead swim to $(n, y+1)$.\n\nUpon reaching each cell, Facer can choose to change his speed by $+1$, $-1$, or keep it unchanged. That is, each time Facer has three choices:\n- Swim to $(x+v-1, y+1)$ and the speed becomes $v-1$.\n- Swim to $(x+v, y+1)$ and the speed becomes $v$.\n- Swim to $(x+v+1, y+1)$ and the speed becomes $v+1$.\n\nEach cell in the swimming pool contains exactly one of the following two items:\n- Accelerator: each accelerator has an attribute $w$. Upon reaching this cell, the speed becomes $v+w$ (of course, the original options of $+1$, $-1$, or unchanged still apply).\n- Coin box: each coin box contains an amount $a$. Upon reaching this cell, you obtain $a$ coins.\n\nIn addition, note the following:\n1. When Facer reaches the surface, i.e., is at $(1, x)$, Facer’s speed becomes $0$ (he can still choose to change his speed by $+1$, $-1$, or keep it unchanged).\n2. Facer cannot stay underwater for too long. The time between two consecutive surfacings cannot exceed $k$ seconds.\n\nFind the maximum number of coins Facer can obtain.", "inputFormat": "The first line contains three integers $n, m, k$.\n\nFrom the second line to line $n+1$, each line contains $m$ strings describing the item in each cell:\n- If the first character is ```v``` followed by an integer $w$, then the cell contains an accelerator with attribute $w$.\n- If the first character is ```s``` followed by an integer $a$, then the cell contains a coin box with amount $a$.", "outputFormat": "Output a single integer, the answer.", "hint": "Constraints\n\n- For $10\\%$ of the testdata, $1 \\leq n, m \\leq 5$.\n- For $40\\%$ of the testdata, $1 \\leq n, m \\leq 100$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 100$, $1 \\leq m \\leq 1000$, $1 \\leq k \\leq 10$, $-20 \\leq w \\leq 20$, $-1000 \\leq a \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Facer爱游泳", "background": "Facer 是一个爱游泳的孩子。", "description": "一天他来到了一个 $n \\times m$ 的游泳池中，其中第一行是水面，第 $n$ 行是游泳池底。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ggncnjpk.png)\n\nFacer 想要从 $(1,1)$ 游到 $(1,m)$。他初始速度为 $0$ m/s。\n\nFacer 可以按照以下方式游泳：假设当前 Facer 位于 $(x,y)$，速度为 $v$，那么它可以游到 $(x+v,y+1)$，如果 $x+v>n$，那么就会游到 $(n,y+1)$。\n\n到了每一个格子，Facer 可以选择将自己的速度 $+1$，$-1$ 或者不变，也就是说每次 Facer 有三种选择：\n\n- 游到 $(x+v-1,y+1)$，速度变为 $v-1$。\n- 游到 $(x+v,y+1)$，速度变为 $v$。\n- 游到 $(x+v+1,y+1)$，速度变为 $v+1$。\n\n游泳池的每个格子上会放有以下两种物品中的一种：\n\n- 变速器，每个变速器有一个属性 $w$，到了这个格子速度会变为 $v+w$（当然原来的 $+1$，$-1$，不变照样存在）。\n- 金币盒，每个金币盒中有一定数量的钱 $a$，到了这个位置你可以得到 $a$ 个金币。\n\n除此之外，有以下两点需要注意的：\n\n1. 当 Facer 到达水面，即位于 $(1,x)$ 时，Facer的速度会变成 $0$（当然他仍然可以选择将速度 $+1$，$-1$ 或不变）。\n2. Facer 不能在水下待太长时间，相邻两次到水面换气的时间不能超过 $k$ 秒。\n\n求 Facer 能够得到最大金币的数量。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行到第 $n+1$ 行，每行 $m$ 个字符串，表示每个格子物品的情况：\n\n- 首字母为 ```v```，后面接一个整数 $w$，表示该格子中有一个变速器，属性为 $w$。\n- 首字母为 ```s```，后面接一个整数 $a$，表示该格子中有一个金币盒，钱数为 $a$。", "outputFormat": "一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$1 \\leq n,m \\leq 5$。\n- 对于 $40\\%$ 的数据，$1 \\leq n,m \\leq 100$。\n- 对于 $100\\%$ 的数据，$1 \\leq n \\leq 100$，$1 \\leq m \\leq 1000$，$1 \\leq k \\leq 10$，$-20 \\leq w \\leq 20$，$-1000 \\leq a \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2796", "type": "P", "difficulty": 3, "samples": [["3\n1 2\n2 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创"], "title": "Facer的程序", "background": "", "description": "Facer 是一个萌萌哒的码农。他写了 $N$ 个程序。程序和程序之间有巧妙的联系，即任意两个程序恰好由一条联系链连在一起。\n\n具体来说，对于程序 $a,b$，存在且仅存在一个序列 $a,x_1,x_2,\\dots ,x_n,b$，使得 $a,x_1$ 有联系, $x_1,x_2$ 有联系，依此类推，$x_n,b$ 有联系。符合这样的一组程序称为程序块。\n\n现在已知一个程序块的程序之间的联系，询问它有多少个子程序块。即取出一个程序子集 $S$，使得 $S$ 也满足上述条件。\n", "inputFormat": "\n第一行输入一个正整数 $N$。\n\n接下来 $N-1$ 行，每行两个数，代表有联系的两个程序。", "outputFormat": "\n输出有多少个子程序块，对 $10^9+7$ 取模。", "hint": "### 样例解释：\n\n子集 $\\{1\\},\\{2\\},\\{3\\},\\{1,2\\},\\{2,3\\},\\{1,2,3\\}$ 满足上述条件。\n\n### 数据范围\n\n对于 $10\\%$ 的数据 $1\\le N\\le20$。\n\n对于 $40\\%$ 的数据 $1\\le N\\le 500$。\n\n对于 $100\\%$ 的数据 $1\\le N\\le10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Facer's Programs", "background": "", "description": "Facer is a cute coder. He wrote $N$ programs. The programs are cleverly related: any two programs are connected by exactly one chain.\n\nSpecifically, for programs $a, b$, there exists and only exists one sequence $a,x_1,x_2,\\dots ,x_n,b$ such that $a,x_1$ are directly connected, $x_1,x_2$ are directly connected, and so on, $x_n,b$ are directly connected. A set of programs that satisfies this is called a program block.\n\nNow, given the connections within one program block, determine how many sub-blocks it has. That is, choose a subset $S$ of programs such that $S$ also satisfies the condition above.", "inputFormat": "The first line contains a positive integer $N$.\n\nThe next $N-1$ lines each contain two integers, representing two programs that are directly connected.", "outputFormat": "Output the number of sub-blocks, modulo $10^9+7$.", "hint": "### Sample Explanation:\n\nThe subsets $\\{1\\},\\{2\\},\\{3\\},\\{1,2\\},\\{2,3\\},\\{1,2,3\\}$ satisfy the condition above.\n\n### Constraints\n\nFor $10\\%$ of the testdata, $1\\le N\\le20$.\n\nFor $40\\%$ of the testdata, $1\\le N\\le 500$.\n\nFor $100\\%$ of the testdata, $1\\le N\\le10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Facer的程序", "background": "", "description": "Facer 是一个萌萌哒的码农。他写了 $N$ 个程序。程序和程序之间有巧妙的联系，即任意两个程序恰好由一条联系链连在一起。\n\n具体来说，对于程序 $a,b$，存在且仅存在一个序列 $a,x_1,x_2,\\dots ,x_n,b$，使得 $a,x_1$ 有联系, $x_1,x_2$ 有联系，依此类推，$x_n,b$ 有联系。符合这样的一组程序称为程序块。\n\n现在已知一个程序块的程序之间的联系，询问它有多少个子程序块。即取出一个程序子集 $S$，使得 $S$ 也满足上述条件。\n", "inputFormat": "\n第一行输入一个正整数 $N$。\n\n接下来 $N-1$ 行，每行两个数，代表有联系的两个程序。", "outputFormat": "\n输出有多少个子程序块，对 $10^9+7$ 取模。", "hint": "### 样例解释：\n\n子集 $\\{1\\},\\{2\\},\\{3\\},\\{1,2\\},\\{2,3\\},\\{1,2,3\\}$ 满足上述条件。\n\n### 数据范围\n\n对于 $10\\%$ 的数据 $1\\le N\\le20$。\n\n对于 $40\\%$ 的数据 $1\\le N\\le 500$。\n\n对于 $100\\%$ 的数据 $1\\le N\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P2797", "type": "P", "difficulty": 5, "samples": [["4\n1 2 3 4", "0.33"], ["4\n1 2 3 9", "2.00"], ["2\n1 2", "0.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "Facer的魔法", "background": "Facer 误闯入禁地，学会了魔法。", "description": "Facer 闯入禁地之后，遇到了对手。\n\n具体来说，Facer 魔法是一串数字。\n\n但是 Facer 能力有限，这串数字只能从给定的 $n$ 个数中选择，能产生的魔法值为选择出的这些数字的平均数。\n\n他的对手不会像 Facer 这样的强大的魔法，但是他会克制招数，即从 Facer 选出的数字中找出中位数，便是他的魔法值。\n\n求 Facer 最多能克制对方多少点魔法。\n\n一句话题意：给你 $n$ 个数，你可以选若干个数，使得平均数减中位数最大。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个数如题。", "outputFormat": "Facer 能克制对方多少魔法值，精确到两位小数。", "hint": "- 对于 $20\\%$ 的数据，$n \\leq 100$；\n- 对于 $50\\%$ 的数据，$n \\leq 2000$；\n- 对于 $100\\%$ 的数据，$n \\leq 10^5$，$0 \\leq x_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Facer's Magic", "background": "Facer accidentally trespassed into a forbidden land and learned magic.", "description": "After entering the forbidden land, Facer meets an opponent.\n\nMore specifically, Facer's magic is a sequence of numbers.\n\nHowever, Facer's ability is limited: this sequence can only be chosen from the given $n$ numbers, and the magic value produced equals the average of the chosen numbers.\n\nHis opponent does not wield magic as powerful as Facer's, but he can counter: he takes the median of the numbers Facer chose; that is his magic value.\n\nFind the maximum amount by which Facer can counter the opponent's magic.\n\nIn one sentence: given $n$ numbers, you may choose any non-empty subset so that (average − median) is maximized.\n\nDefinition of median: for a multiset of size $k$, sort the chosen numbers in non-decreasing order. If $k$ is odd, the median is the middle element; if $k$ is even, the median is the average of the two middle elements.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ numbers as described.", "outputFormat": "Output the maximum value of (average − median) that Facer can achieve, to two decimal places.", "hint": "Constraints:\n- For $20\\%$ of the testdata, $n \\leq 100$.\n- For $50\\%$ of the testdata, $n \\leq 2000$.\n- For $100\\%$ of the testdata, $n \\leq 10^5$, $0 \\leq x_i \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Facer的魔法", "background": "Facer 误闯入禁地，学会了魔法。", "description": "Facer 闯入禁地之后，遇到了对手。\n\n具体来说，Facer 魔法是一串数字。\n\n但是 Facer 能力有限，这串数字只能从给定的 $n$ 个数中选择，能产生的魔法值为选择出的这些数字的平均数。\n\n他的对手不会像 Facer 这样的强大的魔法，但是他会克制招数，即从 Facer 选出的数字中找出中位数，便是他的魔法值。\n\n求 Facer 最多能克制对方多少点魔法。\n\n一句话题意：给你 $n$ 个数，你可以选若干个数，使得平均数减中位数最大。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个数如题。", "outputFormat": "Facer 能克制对方多少魔法值，精确到两位小数。", "hint": "- 对于 $20\\%$ 的数据，$n \\leq 100$；\n- 对于 $50\\%$ 的数据，$n \\leq 2000$；\n- 对于 $100\\%$ 的数据，$n \\leq 10^5$，$0 \\leq x_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2798", "type": "P", "difficulty": 5, "samples": [["4 2 5 \n1 2 6 5 \n1 3 3 1 \n2 3 9 4 \n2 4 6 1 \n3 4 4 2 \n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["树形数据结构", "二分"], "title": "爆弹虐场", "background": null, "description": "某年某月某日，Kiana 结识了一名爆弹虐场的少年。\n\nKiana 仗着自己多学了几年 OI，所以还可以勉勉强强给这位少年讲一些自己擅长的题。具体来说，Kiana 先给这位少年灌输了 $n$ 个毫不相干的知识点，然后再通过自己的[数据删除]技术把这些知识点强行联系在一起。\n\n由于这位少年有着爆弹虐场的实力，所以对于每个 Kiana 准备强行构造的联系，他都能够自己想出来，不过会花费更多的时间。具体来说，Kiana 一共有 $m$ 个联系，每个联系可以把两个不相干的知识点连在一起，如果由 Kiana 直接来讲第 $i$ 个联系，需要花费 $t_i$ 的时间，而如果由少年自己想出来，则需要花费 $T_i$ 的时间。\n\n为了偷懒，Kiana 只需要自己讲的或少年想出来的联系能刚好把知识点全部直接或间接串在一起就可以了。但为了保证教学质量，Kiana 觉得至少有 $k$ 个联系需要少年自己想出来。由于 Kiana 耐心有限，她希望无论是自己讲或是少年自己想，构造的联系中花费时间最长的一个用时最短。\n\n现在 Kiana 想知道，满足这些条件的情况下，构造的联系中耗时最长的一个的最短用时是多少。由于她不会算，所以希望由你告诉她。", "inputFormat": "输入文件包括 $m+1$ 行。\n\n第一行包含三个正整数 $n$，$k$ 和 $m$，分别表示知识点的数量，Kiana 希望少年自己想出来的联系的数量和联系的总数量。\n\n接下来 $m$ 行，每行包含四个正整数 $a$，$b$，$T_i$ 和 $t_i$，表示在知识点 $a$ 和 $b$ 之间可以构造出一个联系，这个联系由少年自己想出来需要花费 $T_i$ 的时间，而 Kiana 直接讲出来需要花费 $t_i$ 的时间。", "outputFormat": "输出文件包括一行。\n\n第一行包含一个正整数，表示构造的联系中耗时最长的一个的最短用时。", "hint": "对于 $30\\%$ 的数据，$1\\le n\\le 10,n-1\\le m\\le 15$，\n\n对于 $60\\%$ 的数据，$1\\le n\\le 500,n-1\\le m\\le 1000$，\n\n对于 $100\\%$ 的数据，$1\\le k<n\\le10000,n-1\\le m\\le20000$，\n\n$1\\le t_i<T_i\\le10^6$。\n\n数据保证一定存在可行解。", "locale": "zh-CN", "translations": {"en": {"title": "Explosive Mayhem Arena", "background": "", "description": "On a certain day, Kiana met a boy who dominates the Explosive Mayhem Arena.\n\nBecause Kiana has studied OI for a few more years, she can barely explain to this boy some problems she is good at. Specifically, Kiana first poured $n$ unrelated knowledge points into him, and then used her [Data Deletion] technique to forcibly connect these knowledge points.\n\nSince the boy is very strong, for each link Kiana plans to construct, he can figure it out by himself, but it will take more time. Specifically, Kiana has $m$ links. Each link can connect two unrelated knowledge points. If Kiana directly explains the $i$-th link, it takes $t_i$ time; if the boy figures it out himself, it takes $T_i$ time.\n\nTo be lazy, Kiana only needs the links she explains or the boy figures out to make all knowledge points directly or indirectly connected. But to ensure teaching quality, Kiana thinks at least $k$ links should be figured out by the boy himself. Since Kiana’s patience is limited, she wants the longest time among all constructed links, regardless of who does them, to be as small as possible.\n\nNow Kiana wants to know, under these conditions, what is the minimal possible value of the maximum time among the constructed links. Since she cannot compute it, she asks you to tell her.", "inputFormat": "The input contains $m+1$ lines.\n\nThe first line contains three positive integers $n$, $k$, and $m$, representing the number of knowledge points, the number of links Kiana wants the boy to figure out himself, and the total number of links, respectively.\n\nThen $m$ lines follow. Each line contains four positive integers $a$, $b$, $T_i$, and $t_i$, meaning a link can be constructed between knowledge points $a$ and $b$. If the boy figures out this link himself, it takes $T_i$ time; if Kiana explains it directly, it takes $t_i$ time.", "outputFormat": "The output contains one line.\n\nPrint a single positive integer, the minimal possible value of the maximum time among all constructed links.", "hint": "For $30\\%$ of the testdata, $1 \\le n \\le 10$, $n-1 \\le m \\le 15$.\n\nFor $60\\%$ of the testdata, $1 \\le n \\le 500$, $n-1 \\le m \\le 1000$.\n\nFor $100\\%$ of the testdata, $1 \\le k < n \\le 10000$, $n-1 \\le m \\le 20000$.\n\n$1 \\le t_i < T_i \\le 10^6$.\n\nThe testdata guarantees that a feasible solution exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爆弹虐场", "background": null, "description": "某年某月某日，Kiana 结识了一名爆弹虐场的少年。\n\nKiana 仗着自己多学了几年 OI，所以还可以勉勉强强给这位少年讲一些自己擅长的题。具体来说，Kiana 先给这位少年灌输了 $n$ 个毫不相干的知识点，然后再通过自己的[数据删除]技术把这些知识点强行联系在一起。\n\n由于这位少年有着爆弹虐场的实力，所以对于每个 Kiana 准备强行构造的联系，他都能够自己想出来，不过会花费更多的时间。具体来说，Kiana 一共有 $m$ 个联系，每个联系可以把两个不相干的知识点连在一起，如果由 Kiana 直接来讲第 $i$ 个联系，需要花费 $t_i$ 的时间，而如果由少年自己想出来，则需要花费 $T_i$ 的时间。\n\n为了偷懒，Kiana 只需要自己讲的或少年想出来的联系能刚好把知识点全部直接或间接串在一起就可以了。但为了保证教学质量，Kiana 觉得至少有 $k$ 个联系需要少年自己想出来。由于 Kiana 耐心有限，她希望无论是自己讲或是少年自己想，构造的联系中花费时间最长的一个用时最短。\n\n现在 Kiana 想知道，满足这些条件的情况下，构造的联系中耗时最长的一个的最短用时是多少。由于她不会算，所以希望由你告诉她。", "inputFormat": "输入文件包括 $m+1$ 行。\n\n第一行包含三个正整数 $n$，$k$ 和 $m$，分别表示知识点的数量，Kiana 希望少年自己想出来的联系的数量和联系的总数量。\n\n接下来 $m$ 行，每行包含四个正整数 $a$，$b$，$T_i$ 和 $t_i$，表示在知识点 $a$ 和 $b$ 之间可以构造出一个联系，这个联系由少年自己想出来需要花费 $T_i$ 的时间，而 Kiana 直接讲出来需要花费 $t_i$ 的时间。", "outputFormat": "输出文件包括一行。\n\n第一行包含一个正整数，表示构造的联系中耗时最长的一个的最短用时。", "hint": "对于 $30\\%$ 的数据，$1\\le n\\le 10,n-1\\le m\\le 15$，\n\n对于 $60\\%$ 的数据，$1\\le n\\le 500,n-1\\le m\\le 1000$，\n\n对于 $100\\%$ 的数据，$1\\le k<n\\le10000,n-1\\le m\\le20000$，\n\n$1\\le t_i<T_i\\le10^6$。\n\n数据保证一定存在可行解。", "locale": "zh-CN"}}}
{"pid": "P2799", "type": "P", "difficulty": 2, "samples": [["ABBAABBA", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "搜索", "递归"], "title": "国王的魔镜", "background": "", "description": "国王有一个魔镜，可以把任何接触镜面的东西变成原来的两倍——只是，因为是镜子嘛，增加的那部分是反的。比如一条项链，我们用AB来表示，不同的字母表示不同颜色的珍珠。如果把B端接触镜面的话，魔镜会把这条项链变为ABBA。如果再用一端接触的话，则会变成ABBAABBA（假定国王只用项链的某一端接触魔镜）。给定最终的项链，请编写程序输出国王没使用魔镜之前，最初的项链可能的最小长度。\n", "inputFormat": "只有一个字符串，由大写英文字母组成（字母数<=100000），表示最终的项链。\n", "outputFormat": "只有一个整数，表示国王没使用魔镜前，最初的项链可能的最小长度。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "The King's Magic Mirror", "background": "", "description": "The king has a magic mirror that doubles anything touching its surface—only, because it is a mirror, the added part is reversed. For example, consider a necklace represented by AB, where different letters denote different colors of pearls. If the end B touches the mirror, the mirror turns the necklace into ABBA. If an end touches it again, it becomes ABBAABBA (assume the king always touches the mirror with one end of the necklace). Given the final necklace, write a program to output the minimal possible length of the original necklace before the mirror was used.", "inputFormat": "A single string consisting of uppercase English letters (length $ \\le 100000 $), representing the final necklace.", "outputFormat": "A single integer, representing the minimal possible length of the original necklace before the king used the mirror.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "国王的魔镜", "background": "", "description": "国王有一个魔镜，可以把任何接触镜面的东西变成原来的两倍——只是，因为是镜子嘛，增加的那部分是反的。比如一条项链，我们用AB来表示，不同的字母表示不同颜色的珍珠。如果把B端接触镜面的话，魔镜会把这条项链变为ABBA。如果再用一端接触的话，则会变成ABBAABBA（假定国王只用项链的某一端接触魔镜）。给定最终的项链，请编写程序输出国王没使用魔镜之前，最初的项链可能的最小长度。\n", "inputFormat": "只有一个字符串，由大写英文字母组成（字母数<=100000），表示最终的项链。\n", "outputFormat": "只有一个整数，表示国王没使用魔镜前，最初的项链可能的最小长度。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2800", "type": "P", "difficulty": 2, "samples": [["5\n3 5 1 8 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "又上锁妖塔", "background": null, "description": "小 A 在玩《剑仙》，他遇到了一个锁妖塔，想从外面爬上去。\n\n锁妖塔共有 $n$ 层，第 $i$ 层的高度为 $h_i$。小 A 初始时在地面上，他爬上第 $i$ 层需要花费的时间等于该层高度 $h_i$。小 A 会用仙术，每用一次可以让他向上跳一层或两层，该过程不花费时间。但是每次跳跃后小 A 都将用完力气，必须再爬过至少一层休息才可以继续使用仙术跳跃。\n\n现在小 A 想让你帮他算出爬上塔顶（第 $n$ 层）的最短时间。", "inputFormat": "第一行一个整数 $n$ 表示锁妖塔的层数。\n\n第二行 $n$ 个整数 $h_i$ 表示从下往上第 $i$ 层的高度。", "outputFormat": "一行一个整数 $t$，表示最短时间。", "hint": "对于所有的数据，保证 $1\\le n\\le 10 ^ 6,1\\le h_i \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Climbing the Demon-Sealing Tower Again", "background": "", "description": "Little A is playing \"Sword Immortal\" (Jianxian). He encounters a Demon-Sealing Tower and wants to climb it from the outside.\n\nThe tower has $n$ floors; the height of floor $i$ is $h_i$. Little A starts on the ground. Climbing floor $i$ (that is, moving from floor $i-1$ to floor $i$) takes time equal to that floor’s height $h_i$. Little A can use \"immortal arts\" (xiān shù). Each time he uses it, he can jump up by one or two floors, and this process takes no time. However, after each jump, Little A will be exhausted and must climb at least one floor to rest before he can use the immortal arts to jump again.\n\nNow Little A wants you to compute the minimal time to reach the top (floor $n$).", "inputFormat": "The first line contains an integer $n$ representing the number of floors in the Demon-Sealing Tower.\n\nThe second line contains $n$ integers $h_i$ representing the height of the $i$-th floor from bottom to top.", "outputFormat": "Output a single integer $t$, representing the minimal time.", "hint": "For all testdata, it is guaranteed that $1 \\le n \\le 10^6$, $1 \\le h_i \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "又上锁妖塔", "background": null, "description": "小 A 在玩《剑仙》，他遇到了一个锁妖塔，想从外面爬上去。\n\n锁妖塔共有 $n$ 层，第 $i$ 层的高度为 $h_i$。小 A 初始时在地面上，他爬上第 $i$ 层需要花费的时间等于该层高度 $h_i$。小 A 会用仙术，每用一次可以让他向上跳一层或两层，该过程不花费时间。但是每次跳跃后小 A 都将用完力气，必须再爬过至少一层休息才可以继续使用仙术跳跃。\n\n现在小 A 想让你帮他算出爬上塔顶（第 $n$ 层）的最短时间。", "inputFormat": "第一行一个整数 $n$ 表示锁妖塔的层数。\n\n第二行 $n$ 个整数 $h_i$ 表示从下往上第 $i$ 层的高度。", "outputFormat": "一行一个整数 $t$，表示最短时间。", "hint": "对于所有的数据，保证 $1\\le n\\le 10 ^ 6,1\\le h_i \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2801", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 3 4 5\nA 1 5 4\nM 3 5 1\nA 1 5 4", "2\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "排序", "分块"], "title": "教主的魔法", "background": "", "description": "教主最近学会了一种神奇的魔法，能够使人长高。于是他准备演示给 XMYZ 信息组每个英雄看。于是 $N$ 个英雄们又一次聚集在了一起，这次他们排成了一列，被编号为 $1, 2, \\ldots, N$。\n\n\n每个人的身高一开始都是不超过 $1000$ 的正整数。教主的魔法每次可以把闭区间 $[L, R]$（$1≤L≤R≤N$）内的英雄的身高全部加上一个整数 $W$。（虽然 $L=R$ 时并不符合区间的书写规范，但我们可以认为是单独增加第 $L(R)$ 个英雄的身高）\n\n\nCYZ、光哥和 ZJQ 等人不信教主的邪，于是他们有时候会问 WD 闭区间 $[L, R]$ 内有多少英雄身高大于等于 $C$，以验证教主的魔法是否真的有效。\n\n\nWD 巨懒，于是他把这个回答的任务交给了你。\n", "inputFormat": "第 $1$ 行为两个整数 $N, Q$。$Q$ 为问题数与教主的施法数总和。\n\n第 $2$ 行有 $N$ 个正整数，第 $i$ 个数代表第 $i$ 个英雄的身高。\n\n\n第 $3$ 到第 $Q+2$ 行每行有一个操作：\n\n\n1. 若第一个字母为 `M`，则紧接着有三个数字 $L, R, W$。表示对闭区间 $[L, R]$ 内所有英雄的身高加上 $W$。\n\n2. 若第一个字母为 `A`，则紧接着有三个数字 $L, R, C$。询问闭区间 $[L, R]$ 内有多少英雄的身高大于等于 $C$。\n", "outputFormat": "对每个 `A` 询问输出一行，仅含一个整数，表示闭区间 $[L, R]$ 内身高大于等于 $C$ 的英雄数。\n", "hint": "【输入输出样例说明】\n\n原先 $5$ 个英雄身高为 $1, 2, 3, 4, 5$，此时 $[1, 5]$ 间有 $2$ 个英雄的身高大于等于 $4$。教主施法后变为 $1, 2, 4, 5, 6$，此时 $[1, 5]$ 间有 $3$ 个英雄的身高大于等于 $4$。\n\n【数据范围】\n\n对于 $30\\%$ 的数据，$N≤1000$，$Q≤1000$。\n\n对于 $100\\%$ 的数据，$N≤10^6$，$Q≤3000$，$1≤W≤1000$，$1≤C≤10^9$。\n\n---\n\n$\\text{upd 2022.8.18}$：新增加一组 Hack 数据。  \n$\\text{upd 2023.8.16}$：新增加一组 [Hack 数据](https://www.luogu.com.cn/discuss/661585)。", "locale": "zh-CN", "translations": {"en": {"title": "{{The Leader's Magic}}", "background": "{{}}", "description": "{{The leader has recently learned a magical spell that can make people taller. He plans to demonstrate it to every hero in the XMYZ Information Group. Thus, $N$ heroes gather once again, lining up in a row and being numbered $1, 2, \\ldots, N$.\n\nEach person’s height is initially a positive integer not exceeding $1000$. Each time the leader casts the spell, he can add an integer $W$ to the heights of all heroes in the closed interval $[L, R]$ ($1≤L≤R≤N$). (Although $L=R$ is not standard interval notation, we can regard it as increasing only the height of the $L$-th hero.)\n\nCYZ, Guang Ge, and ZJQ do not believe in the leader’s magic, so they sometimes ask WD how many heroes in the closed interval $[L, R]$ have height greater than or equal to $C$, to verify whether the magic really works.\n\nWD is extremely lazy, so he hands this task over to you.}}", "inputFormat": "{{The first line contains two integers $N, Q$. $Q$ is the total number of queries and spells.\n\nThe second line contains $N$ positive integers; the $i$-th number is the height of the $i$-th hero.\n\nLines $3$ through $Q+2$ each contain one operation:\n\n1. If the first letter is `M`, then three numbers $L, R, W$ follow. Add $W$ to the heights of all heroes in the closed interval $[L, R]$.\n\n2. If the first letter is `A`, then three numbers $L, R, C$ follow. Query how many heroes in the closed interval $[L, R]$ have height greater than or equal to $C$.}}", "outputFormat": "{{For each `A` query, output one line containing a single integer: the number of heroes with height greater than or equal to $C$ in $[L, R]$.}}", "hint": "{{Sample explanation:\n\nOriginally, the $5$ heroes’ heights are $1, 2, 3, 4, 5$, so there are $2$ heroes in $[1, 5]$ whose heights are at least $4$. After the leader casts the spell, the heights become $1, 2, 4, 5, 6$, so there are $3$ heroes in $[1, 5]$ whose heights are at least $4$.\n\nConstraints:\n\n- For $30\\%$ of the testdata, $N≤1000$, $Q≤1000$.\n- For $100\\%$ of the testdata, $N≤10^6$, $Q≤3000$, $1≤W≤1000$, $1≤C≤10^9$.\n\n---\n\n$\\text{upd 2022.8.18}$: A new set of Hack testdata has been added.\n$\\text{upd 2023.8.16}$: A new set of [Hack testdata](https://www.luogu.com.cn/discuss/661585) has been added.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "教主的魔法", "background": "", "description": "教主最近学会了一种神奇的魔法，能够使人长高。于是他准备演示给 XMYZ 信息组每个英雄看。于是 $N$ 个英雄们又一次聚集在了一起，这次他们排成了一列，被编号为 $1, 2, \\ldots, N$。\n\n\n每个人的身高一开始都是不超过 $1000$ 的正整数。教主的魔法每次可以把闭区间 $[L, R]$（$1≤L≤R≤N$）内的英雄的身高全部加上一个整数 $W$。（虽然 $L=R$ 时并不符合区间的书写规范，但我们可以认为是单独增加第 $L(R)$ 个英雄的身高）\n\n\nCYZ、光哥和 ZJQ 等人不信教主的邪，于是他们有时候会问 WD 闭区间 $[L, R]$ 内有多少英雄身高大于等于 $C$，以验证教主的魔法是否真的有效。\n\n\nWD 巨懒，于是他把这个回答的任务交给了你。\n", "inputFormat": "第 $1$ 行为两个整数 $N, Q$。$Q$ 为问题数与教主的施法数总和。\n\n第 $2$ 行有 $N$ 个正整数，第 $i$ 个数代表第 $i$ 个英雄的身高。\n\n\n第 $3$ 到第 $Q+2$ 行每行有一个操作：\n\n\n1. 若第一个字母为 `M`，则紧接着有三个数字 $L, R, W$。表示对闭区间 $[L, R]$ 内所有英雄的身高加上 $W$。\n\n2. 若第一个字母为 `A`，则紧接着有三个数字 $L, R, C$。询问闭区间 $[L, R]$ 内有多少英雄的身高大于等于 $C$。\n", "outputFormat": "对每个 `A` 询问输出一行，仅含一个整数，表示闭区间 $[L, R]$ 内身高大于等于 $C$ 的英雄数。\n", "hint": "【输入输出样例说明】\n\n原先 $5$ 个英雄身高为 $1, 2, 3, 4, 5$，此时 $[1, 5]$ 间有 $2$ 个英雄的身高大于等于 $4$。教主施法后变为 $1, 2, 4, 5, 6$，此时 $[1, 5]$ 间有 $3$ 个英雄的身高大于等于 $4$。\n\n【数据范围】\n\n对于 $30\\%$ 的数据，$N≤1000$，$Q≤1000$。\n\n对于 $100\\%$ 的数据，$N≤10^6$，$Q≤3000$，$1≤W≤1000$，$1≤C≤10^9$。\n\n---\n\n$\\text{upd 2022.8.18}$：新增加一组 Hack 数据。  \n$\\text{upd 2023.8.16}$：新增加一组 [Hack 数据](https://www.luogu.com.cn/discuss/661585)。", "locale": "zh-CN"}}}
{"pid": "P2802", "type": "P", "difficulty": 2, "samples": [["3 3\n2 1 1\n1 1 0\n1 1 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "广度优先搜索 BFS"], "title": "回家", "background": "", "description": "[](https://paste.ubuntu.com/p/DSg5bzrrjs/)\n\n小 H 在一个划分成了 $n \\times m$ 个方格的长方形封锁线上。 每次他能向上下左右四个方向移动一格（当然小 H 不可以静止不动）， 但不能离开封锁线，否则就被打死了。 刚开始时他有满血 $6$ 点，每移动一格他要消耗 $1$ 点血量。一旦小 H 的血量降到 $0$， 他将死去。 他可以沿路通过拾取鼠标（什么鬼。。。）来补满血量。只要他走到有鼠标的格子，他不需要任何时间即可拾取。格子上的鼠标可以瞬间补满，所以每次经过这个格子都有鼠标。就算到了某个有鼠标的格子才死去， 他也不能通过拾取鼠标补满 HP。 即使在家门口死去， 他也不能算完成任务回到家中。\n\n地图上有五种格子：\n\n`0`：障碍物。\n\n`1`：空地， 小 H 可以自由行走。\n\n`2`：小 H 出发点， 也是一片空地。\n\n`3`：小 H 的家。\n\n`4`：有鼠标在上面的空地。\n\n小 H 能否安全回家？如果能， 最短需要多长时间呢？\n", "inputFormat": "第一行两个整数 $n,m$， 表示地图的大小为 $n \\times m$。\n\n下面 $n$ 行， 每行 $m$ 个数字来描述地图。", "outputFormat": "一行， 若小 H 不能回家， 输出 `-1`，否则输出他回家所需最短时间。", "hint": "对于所有数据，$1 \\le n,m \\le 9$。\n\n2021.9.2 增添一组 hack 数据 by @囧仙", "locale": "zh-CN", "translations": {"en": {"title": "Go Home", "background": "", "description": "[](https://paste.ubuntu.com/p/DSg5bzrrjs/)\n\nXiao H is on a rectangular cordon divided into $n \\times m$ cells. Each move, he can move one cell in one of the four directions: up, down, left, or right (he cannot stay still). He cannot leave the cordon; otherwise, he will be killed. He starts with full HP of 6 points, and each step costs 1 point of HP. Once his HP drops to 0, he dies. He can pick up a mouse (what the heck...) along the way to refill his HP to full. As long as he steps onto a cell with a mouse, he can pick it up instantly without spending any time. The mouse on a cell refills instantly, so each time he passes that cell, there is a mouse. Even if he dies upon arriving at a cell with a mouse, he cannot refill his HP by picking it up. Even if he dies at his doorstep, it does not count as having returned home.\n\nThere are five types of cells on the map:\n\n`0`: Obstacle.\n\n`1`: Empty cell; Xiao H can walk freely.\n\n`2`: Xiao H’s starting point; also an empty cell.\n\n`3`: Xiao H’s home.\n\n`4`: An empty cell with a mouse on it.\n\nCan Xiao H return home safely? If yes, what is the shortest time needed?", "inputFormat": "The first line contains two integers $n, m$, indicating that the map size is $n \\times m$.\n\nThe next $n$ lines each contain $m$ numbers describing the map.", "outputFormat": "Output one line: if Xiao H cannot return home, output `-1`; otherwise, output the shortest time he needs to return home.", "hint": "For all testdata, $1 \\le n, m \\le 9$.\n\n2021.9.2 Added a set of hack testdata by @囧仙.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "回家", "background": "", "description": "[](https://paste.ubuntu.com/p/DSg5bzrrjs/)\n\n小 H 在一个划分成了 $n \\times m$ 个方格的长方形封锁线上。 每次他能向上下左右四个方向移动一格（当然小 H 不可以静止不动）， 但不能离开封锁线，否则就被打死了。 刚开始时他有满血 $6$ 点，每移动一格他要消耗 $1$ 点血量。一旦小 H 的血量降到 $0$， 他将死去。 他可以沿路通过拾取鼠标（什么鬼。。。）来补满血量。只要他走到有鼠标的格子，他不需要任何时间即可拾取。格子上的鼠标可以瞬间补满，所以每次经过这个格子都有鼠标。就算到了某个有鼠标的格子才死去， 他也不能通过拾取鼠标补满 HP。 即使在家门口死去， 他也不能算完成任务回到家中。\n\n地图上有五种格子：\n\n`0`：障碍物。\n\n`1`：空地， 小 H 可以自由行走。\n\n`2`：小 H 出发点， 也是一片空地。\n\n`3`：小 H 的家。\n\n`4`：有鼠标在上面的空地。\n\n小 H 能否安全回家？如果能， 最短需要多长时间呢？\n", "inputFormat": "第一行两个整数 $n,m$， 表示地图的大小为 $n \\times m$。\n\n下面 $n$ 行， 每行 $m$ 个数字来描述地图。", "outputFormat": "一行， 若小 H 不能回家， 输出 `-1`，否则输出他回家所需最短时间。", "hint": "对于所有数据，$1 \\le n,m \\le 9$。\n\n2021.9.2 增添一组 hack 数据 by @囧仙", "locale": "zh-CN"}}}
{"pid": "P2803", "type": "P", "difficulty": 3, "samples": [["3 2\n24 18 31\n10 8", "144"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "学校选址 II", "background": "", "description": "在一条大路一旁有许多栋楼，每栋楼里有许多小学生（哈哈哈一波小学生来袭！）。但是这条路上没有小学！！！！所以唯恐世界不乱的牛A打算在路上（汽车什么的都不敢来这个小学生云集的地方咯，所以不用担心安全问题）任选几点（可以和楼重合，当然也可以不重合）建立小学，且使所有小学生上学走的路程之和最短。牛A发现修建一所小学根本无法满足他唯恐世界不乱的（变态）心理，所以他准备建立K所小学。\n", "inputFormat": "第一行2个整数，表示楼数n，学校数k（1<=n,k<=100）\n\n第二行n个整数，表示每栋楼的学生数（0＜每栋楼学生数≤100 )\n\n第三行n-1个数，分别表示楼i到楼i+1之间距离（1≤距离≤100，1≤i≤n-1）\n", "outputFormat": "即学生走的距离和的最小值\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "School Location II", "background": "", "description": "Along one side of a straight road there are many buildings, each with some primary school students. However, there is no primary school on this road. Therefore, the ever-mischievous \"Niu A\" plans to choose points on the road to build primary schools (they may coincide with building locations or not), so that the total walking distance of all students is minimized. Since building just one school cannot satisfy his desire for chaos, he decides to build K schools.", "inputFormat": "- The first line contains two integers $n$ and $k$, the number of buildings and the number of schools ($1 \\le n, k \\le 100$).\n- The second line contains $n$ integers, the number of students in each building (each count is between $1$ and $100$ inclusive).\n- The third line contains $n - 1$ integers, where the $i$-th number is the distance between building $i$ and building $i + 1$ ($1 \\le i \\le n - 1$, each distance is between $1$ and $100$ inclusive).", "outputFormat": "Output the minimal total walking distance of all students.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "学校选址 II", "background": "", "description": "在一条大路一旁有许多栋楼，每栋楼里有许多小学生（哈哈哈一波小学生来袭！）。但是这条路上没有小学！！！！所以唯恐世界不乱的牛A打算在路上（汽车什么的都不敢来这个小学生云集的地方咯，所以不用担心安全问题）任选几点（可以和楼重合，当然也可以不重合）建立小学，且使所有小学生上学走的路程之和最短。牛A发现修建一所小学根本无法满足他唯恐世界不乱的（变态）心理，所以他准备建立K所小学。\n", "inputFormat": "第一行2个整数，表示楼数n，学校数k（1<=n,k<=100）\n\n第二行n个整数，表示每栋楼的学生数（0＜每栋楼学生数≤100 )\n\n第三行n-1个数，分别表示楼i到楼i+1之间距离（1≤距离≤100，1≤i≤n-1）\n", "outputFormat": "即学生走的距离和的最小值\n", "hint": "", "locale": "zh-CN"}}}
