{"pid": "P12407", "type": "P", "difficulty": 5, "samples": [["3 1 2 3 1025032617\n1 2 3", "730965 742898 1038257"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "洛谷原创", "O2优化", "图论建模", "最短路", "洛谷比赛"], "title": "「CZOI-R3」数字变换", "background": "", "description": "你有一个长度为 $n$ 的序列 $x$ 和一个数 $a=p$。\n\n序列 $x$ 的第 $i$ 个数具有一个花费序列 $w_{i,1},w_{i,2},\\dots,w_{i,k}$。\n\n你可以将 $a$ 变换成 $i$（$1\\le i\\le n$，$a$ 可以等于 $i$），**当前**是你的第 $j$ 次操作，则花费为 $w_{i,j} + 2\\times(L-(x_a \\mathbin{\\&} x_i))$，其中 $\\mathbin{\\&}$ 是按位与，即 C++ 中的 `&`。\n\n$L$ 是序列 $x$ 中所有数的最大值，即 $\\max\\limits_{1\\le i\\le n}x_i$。\n\n你需要对所有 $1\\le i\\le n$ 求出**在第 $k$ 步操作结束时**将 $a$ 变成 $i$ 的**最小**花费。询问之间互相独立，每次询问不会影响其他次询问的答案。", "inputFormat": "由于直接输入数据量过大，请使用以下方式读入数据：\n\n第一行输入 $5$ 个整数 $n,p,k,c,seed$，其中 $c,seed$ 的意义在下文给出。\n\n第二行输入 $c$ 个整数 $y_0,y_1,\\dots,y_{c-1}$，其中 $y_i$ 的意义在下文给出。\n\n读入后使用以下函数获得输入：\n\n```cpp\nint c, y[65536]; unsigned long long seed;\nint get_rand(int mod)\n{\n    seed ^= seed << 14;\n    seed ^= seed >> 7;\n    seed ^= seed << 19;\n    seed ^= seed << 23;\n    return seed % mod;\n}\nvoid get_input()\n{\n    for (int i = 1; i <= n; i++) x[i] = y[get_rand(c)];\n    for (int i = 1; i <= n; i++) for (int j = 1; j <= k; j++) w[i][j] = get_rand(1000000);\n}\n```\n\n你需要调用的是 `get_input` 函数。\n\n**注意：此输入方式仅为减小输入量，标准解法并不依赖此输入方式。**", "outputFormat": "共一行输出 $n$ 个正整数，第 $i$ 个表示将 $a$ 变成 $i$ 的最小花费。", "hint": "**【样例解释】**\n\n$x = \\{3, 1, 3\\},w_1 = \\{834731, 259456\\},w_2 = \\{471501, 271389\\} ,w_3 = \\{902700, 566748\\},a=1,L=3$。\n\n将 $a$ 变为 $2$ 的最优操作是第一次 $a\\to 2$ 花费 $w_{2,1} + 2\\times(3-3\\& 1)= 471505$，第二次 $a\\to 2$ 花费 $w_{2,2} + 2\\times(3-1\\& 1)= 271393$，总花费为 $742898$。\n\n**【数据范围】**\n\n- Subtask #1（$15\\text{ pts}$）：$k = 1$，$x_i < 2^{12}$。\n- Subtask #2（$25\\text{ pts}$）：$c\\le 10^3$（最多只有 $10^3$ 种不同的 $x_i$），$x_i < 2^{12}$。\n- Subtask #3（$25\\text{ pts}$）：$\\max\\{\\text{popcount}(x_i)\\} \\le 5$。其中 $\\text{popcount}(x_i)$ 表示 $x_i$ 在二进制下 $1$ 的个数。\n- Subtask #4（$35\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le k \\le 10$，$0\\le x_i<2^{16}$，$1 \\le  p \\le n$，$0\\le w_{i,j}<10^6$。$1\\le seed \\le 2\\times 10^9$，$1\\le c \\le 2^{16}$，$0 \\le y_i < 2^{16}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CZOI-R3」数字变换", "background": "", "description": "你有一个长度为 $n$ 的序列 $x$ 和一个数 $a=p$。\n\n序列 $x$ 的第 $i$ 个数具有一个花费序列 $w_{i,1},w_{i,2},\\dots,w_{i,k}$。\n\n你可以将 $a$ 变换成 $i$（$1\\le i\\le n$，$a$ 可以等于 $i$），**当前**是你的第 $j$ 次操作，则花费为 $w_{i,j} + 2\\times(L-(x_a \\mathbin{\\&} x_i))$，其中 $\\mathbin{\\&}$ 是按位与，即 C++ 中的 `&`。\n\n$L$ 是序列 $x$ 中所有数的最大值，即 $\\max\\limits_{1\\le i\\le n}x_i$。\n\n你需要对所有 $1\\le i\\le n$ 求出**在第 $k$ 步操作结束时**将 $a$ 变成 $i$ 的**最小**花费。询问之间互相独立，每次询问不会影响其他次询问的答案。", "inputFormat": "由于直接输入数据量过大，请使用以下方式读入数据：\n\n第一行输入 $5$ 个整数 $n,p,k,c,seed$，其中 $c,seed$ 的意义在下文给出。\n\n第二行输入 $c$ 个整数 $y_0,y_1,\\dots,y_{c-1}$，其中 $y_i$ 的意义在下文给出。\n\n读入后使用以下函数获得输入：\n\n```cpp\nint c, y[65536]; unsigned long long seed;\nint get_rand(int mod)\n{\n    seed ^= seed << 14;\n    seed ^= seed >> 7;\n    seed ^= seed << 19;\n    seed ^= seed << 23;\n    return seed % mod;\n}\nvoid get_input()\n{\n    for (int i = 1; i <= n; i++) x[i] = y[get_rand(c)];\n    for (int i = 1; i <= n; i++) for (int j = 1; j <= k; j++) w[i][j] = get_rand(1000000);\n}\n```\n\n你需要调用的是 `get_input` 函数。\n\n**注意：此输入方式仅为减小输入量，标准解法并不依赖此输入方式。**", "outputFormat": "共一行输出 $n$ 个正整数，第 $i$ 个表示将 $a$ 变成 $i$ 的最小花费。", "hint": "**【样例解释】**\n\n$x = \\{3, 1, 3\\},w_1 = \\{834731, 259456\\},w_2 = \\{471501, 271389\\} ,w_3 = \\{902700, 566748\\},a=1,L=3$。\n\n将 $a$ 变为 $2$ 的最优操作是第一次 $a\\to 2$ 花费 $w_{2,1} + 2\\times(3-3\\& 1)= 471505$，第二次 $a\\to 2$ 花费 $w_{2,2} + 2\\times(3-1\\& 1)= 271393$，总花费为 $742898$。\n\n**【数据范围】**\n\n- Subtask #1（$15\\text{ pts}$）：$k = 1$，$x_i < 2^{12}$。\n- Subtask #2（$25\\text{ pts}$）：$c\\le 10^3$（最多只有 $10^3$ 种不同的 $x_i$），$x_i < 2^{12}$。\n- Subtask #3（$25\\text{ pts}$）：$\\max\\{\\text{popcount}(x_i)\\} \\le 5$。其中 $\\text{popcount}(x_i)$ 表示 $x_i$ 在二进制下 $1$ 的个数。\n- Subtask #4（$35\\text{ pts}$）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le k \\le 10$，$0\\le x_i<2^{16}$，$1 \\le  p \\le n$，$0\\le w_{i,j}<10^6$。$1\\le seed \\le 2\\times 10^9$，$1\\le c \\le 2^{16}$，$0 \\le y_i < 2^{16}$。", "locale": "zh-CN"}}}
{"pid": "P12408", "type": "P", "difficulty": 2, "samples": [["2", "-1"], ["4", "4 10 6 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "最大公约数 gcd"], "title": "始终", "background": "### 本题有 SPJ。\n\n> 以我为始，以我为终。", "description": "给定一个 $n(n\\ge2)$，要求构造一个序列 $\\{a_1,a_2,a_3,\\cdots,a_n\\}$ 满足：\n\n- 长度为 $n$；\n\n- $1\\le a_i\\le 10^6$；\n\n- $i\\in[1,n),a_i\\not=a_{i+1}$；\n\n- $\\displaystyle\\operatorname{lcm}^n_{i=1}a_i=\\displaystyle\\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$；\n- $\\displaystyle\\operatorname{lcm}^n_{i=1}a_i\\le10^6$。\n\n若无解则输出 ```-1```。\n\n$\\displaystyle\\operatorname{lcm}^n_{i=1}a_i$ 是指数列 $\\{a_1,a_2,a_3,\\cdots,a_n\\}$ 的最小公倍数。", "inputFormat": "共一行。\n\n第一行给定一个正整数 $n$，含义见题面。", "outputFormat": "共一行。\n\n若无解，则第一行输出 ```-1```。\n\n否则，第一行输出 $n$ 个数，表示构造的序列。", "hint": "数据范围：\n\n| Subtask | $n$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $=2$ | $5$ |\n| $1$ | $\\le3$ | $10$ |\n| $2$ | $\\le10$ | $10$ |\n| $3$ | $\\le10^6$ | $75$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "始终", "background": "### 本题有 SPJ。\n\n> 以我为始，以我为终。", "description": "给定一个 $n(n\\ge2)$，要求构造一个序列 $\\{a_1,a_2,a_3,\\cdots,a_n\\}$ 满足：\n\n- 长度为 $n$；\n\n- $1\\le a_i\\le 10^6$；\n\n- $i\\in[1,n),a_i\\not=a_{i+1}$；\n\n- $\\displaystyle\\operatorname{lcm}^n_{i=1}a_i=\\displaystyle\\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$；\n- $\\displaystyle\\operatorname{lcm}^n_{i=1}a_i\\le10^6$。\n\n若无解则输出 ```-1```。\n\n$\\displaystyle\\operatorname{lcm}^n_{i=1}a_i$ 是指数列 $\\{a_1,a_2,a_3,\\cdots,a_n\\}$ 的最小公倍数。", "inputFormat": "共一行。\n\n第一行给定一个正整数 $n$，含义见题面。", "outputFormat": "共一行。\n\n若无解，则第一行输出 ```-1```。\n\n否则，第一行输出 $n$ 个数，表示构造的序列。", "hint": "数据范围：\n\n| Subtask | $n$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $=2$ | $5$ |\n| $1$ | $\\le3$ | $10$ |\n| $2$ | $\\le10$ | $10$ |\n| $3$ | $\\le10^6$ | $75$ |\n", "locale": "zh-CN"}}}
{"pid": "P12409", "type": "P", "difficulty": 4, "samples": [["6 4\n2 4 6 12 9 11\n6 4 0 0 1 0 \n5 5 0 0 1 0\n0 8 0 0 1 0\n0 8 0 0 2 0", "1\n1\n1\n0"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["模拟", "数学", "O2优化"], "title": "嗦面", "background": "> 他们曾如此骄傲地……", "description": "给你 $n$ 根面条，长度为 $\\{l_1,l_2,l_3,\\cdots,l_n\\}$，你可以进行若干次以下操作：\n\n* 选取一根长度为偶数的面条，把它平均切成两根面条。\n\n有 $m$ 次询问（**每次询问独立**）：\n\n* ```a b c d e f```：请判断能否切完面条后让面条长度的**乘积**等于 $R=2^a\\times3^b\\times5^c\\times7^d\\times11^e\\times13^f$；若能则输出 ```1```，否则输出 ```0```。", "inputFormat": "共 $2+m$ 行。\n\n第一行 $2$ 个正整数，分别为 $n$ 和 $m$，含义见题面。\n\n第二行 $n$ 个正整数，分别为 $l_1,l_2,l_3,\\cdots,l_n$，含义见题面。\n\n第 $3\\sim 2+m$ 行每行 $6$ 个**非负**整数，分别为 $a,b,c,d,e,f$，含义见题面。", "outputFormat": "共 $m$ 行。\n\n第 $1\\sim m$ 行，每行输出 ```1``` 或 ```0```，含义见题面。", "hint": "数据：\n\n$R=2^a\\times3^b\\times5^c\\times7^d\\times11^e\\times13^f$\n| Subtask | $n$ | $l_i$ | $a,b,c,d,e,f$ | $R$ | pts  |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le10$ | $1\\le l_i\\le13$ | $\\le80$ | $\\le10^6$ | $10$ |\n| $1$ | $\\le10$ | $1\\le l_i\\le13$ | $\\le10$ | 无特殊限制 | $10$ |\n| $2$ | $\\le80$  | $1\\le l_i\\le13$ | $\\le80$ | 无特殊限制 | $20$ |\n| $3$ | $\\le10^5$  | $1\\le l_i\\le13$ | $\\le4\\times10^5$ | 无特殊限制 | $60$ |\n\n对于所有数据，$1\\le n\\le 10^5$，$1\\le l_i\\le 13$，$1\\le m\\le10^5$，$0\\le a,b,c,d,e,f\\le4\\times10^5$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "嗦面", "background": "> 他们曾如此骄傲地……", "description": "给你 $n$ 根面条，长度为 $\\{l_1,l_2,l_3,\\cdots,l_n\\}$，你可以进行若干次以下操作：\n\n* 选取一根长度为偶数的面条，把它平均切成两根面条。\n\n有 $m$ 次询问（**每次询问独立**）：\n\n* ```a b c d e f```：请判断能否切完面条后让面条长度的**乘积**等于 $R=2^a\\times3^b\\times5^c\\times7^d\\times11^e\\times13^f$；若能则输出 ```1```，否则输出 ```0```。", "inputFormat": "共 $2+m$ 行。\n\n第一行 $2$ 个正整数，分别为 $n$ 和 $m$，含义见题面。\n\n第二行 $n$ 个正整数，分别为 $l_1,l_2,l_3,\\cdots,l_n$，含义见题面。\n\n第 $3\\sim 2+m$ 行每行 $6$ 个**非负**整数，分别为 $a,b,c,d,e,f$，含义见题面。", "outputFormat": "共 $m$ 行。\n\n第 $1\\sim m$ 行，每行输出 ```1``` 或 ```0```，含义见题面。", "hint": "数据：\n\n$R=2^a\\times3^b\\times5^c\\times7^d\\times11^e\\times13^f$\n| Subtask | $n$ | $l_i$ | $a,b,c,d,e,f$ | $R$ | pts  |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le10$ | $1\\le l_i\\le13$ | $\\le80$ | $\\le10^6$ | $10$ |\n| $1$ | $\\le10$ | $1\\le l_i\\le13$ | $\\le10$ | 无特殊限制 | $10$ |\n| $2$ | $\\le80$  | $1\\le l_i\\le13$ | $\\le80$ | 无特殊限制 | $20$ |\n| $3$ | $\\le10^5$  | $1\\le l_i\\le13$ | $\\le4\\times10^5$ | 无特殊限制 | $60$ |\n\n对于所有数据，$1\\le n\\le 10^5$，$1\\le l_i\\le 13$，$1\\le m\\le10^5$，$0\\le a,b,c,d,e,f\\le4\\times10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P12410", "type": "P", "difficulty": 6, "samples": [["6 3\n1 6 4 5 1 3\n3 5 7 8 7 1\n1 6 4 7 3 2\n3 6 3 7 4 2 ", "NO\nYES\nNO"], ["10 2\n23 38 32 19 3 11 7 15 30 43\n2 8 2 21 4 3\n1 10 1 43 8 7", "YES\nNO"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400]}, "tags": ["O2优化", "分块", "根号分治"], "title": "「知りたくなかった、失うのなら」", "background": "$$\\mathsf{自分に腹が立った}\\\\\\scriptsize\\mathsf{我对自己感到愤怒}$$\n\n$$\\mathsf{今更後悔したって遅いのに}\\\\\\scriptsize\\mathsf{然而事到如今已追悔莫及}$$\n\n$$\\mathsf{したって遅いのに}\\\\\\scriptsize\\mathsf{追悔莫及}$$", "description": "给你一个 $n$ 个整数的序列 $c$，有 $m$ 次查询：\n\n* ```l r x y a b```：判断 $c_l,c_{l+1},\\cdots,c_{r}$ 是否满足值域在 $[x,y]$ 的所有 $ka+b$ 的形式的数均出现至少一次。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行是 $n$ 个整数，表示序列 $c$。\n\n最后是 $m$ 行的整数 $l,r,x,y,a,b$。", "outputFormat": "每行输出 ```YES``` 或 ```NO```。", "hint": "对于所有测试数据，保证：$1\\le n,m,c_i,x,y,a\\le5\\times10^5$，$1\\le l\\le r\\le n$，$x\\le y$，$0\\le b<a$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m,y\\le500$ | $10$ |\n| $1$ | $a\\ge10^3$ | $15$ |\n| $2$ | $n,m\\le5\\times10^4$ | $25$ |\n| $3$ | 无 | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「知りたくなかった、失うのなら」", "background": "$$\\mathsf{自分に腹が立った}\\\\\\scriptsize\\mathsf{我对自己感到愤怒}$$\n\n$$\\mathsf{今更後悔したって遅いのに}\\\\\\scriptsize\\mathsf{然而事到如今已追悔莫及}$$\n\n$$\\mathsf{したって遅いのに}\\\\\\scriptsize\\mathsf{追悔莫及}$$", "description": "给你一个 $n$ 个整数的序列 $c$，有 $m$ 次查询：\n\n* ```l r x y a b```：判断 $c_l,c_{l+1},\\cdots,c_{r}$ 是否满足值域在 $[x,y]$ 的所有 $ka+b$ 的形式的数均出现至少一次。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行是 $n$ 个整数，表示序列 $c$。\n\n最后是 $m$ 行的整数 $l,r,x,y,a,b$。", "outputFormat": "每行输出 ```YES``` 或 ```NO```。", "hint": "对于所有测试数据，保证：$1\\le n,m,c_i,x,y,a\\le5\\times10^5$，$1\\le l\\le r\\le n$，$x\\le y$，$0\\le b<a$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m,y\\le500$ | $10$ |\n| $1$ | $a\\ge10^3$ | $15$ |\n| $2$ | $n,m\\le5\\times10^4$ | $25$ |\n| $3$ | 无 | $50$ |", "locale": "zh-CN"}}}
{"pid": "P12411", "type": "P", "difficulty": 6, "samples": [["11 9\n3 1 4 8 8 2 6 4 7 5 1\n1 2\n1 3\n1 4\n4 9\n9 10\n9 11\n3 5\n3 6\n5 8\n5 7\n3 1\n4 1\n5 2\n11 4\n10 3\n8 2\n6 1\n7 1\n7 2", "2\n2\n5\n8\n6\n7\n3\n6\n7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化"], "title": "抱月", "background": "", "description": "记 $P(u,v)$ 表示树上从节点 $u$ 到节点 $v$ 依次经过的点组成的序列，包括 $u$ 和 $v$。\n\n记 $dep_u$ 表示在以 $1$ 为树根时，节点 $u$ 的深度（根节点深度为 $0$）。\n\n记 $\\operatorname{LCA}(u,v)$ 为树上节点 $u$ 和 $v$ 在以 $1$ 为树根时的最近公共祖先。\n\n抱月有一棵树，树根为 $1$，一共有 $n$ 个节点。其中第 $i$ 个节点的颜色是 $c_i$。她发现，对于一个节点 $x$ 和整数 $k$，如果将 $P(x,1)$ 中所有满足：$dep_y\\equiv dep_x \\pmod{k}$ 的 $y$ 都拿出来，这些 $y$ 是有意义的。\n\n所以，你需要解决这样一个问题。给定 $m$ 次询问，每次两个整数 $x,k$，求**删掉** $P(x,1)$ 中所有满足 $dep_y\\equiv dep_x \\pmod{k}$ 的 $y$ 后，满足 $dep_z \\le dep_x$ 的 $z$ 中不同 $c_z$ 的数量。**每次询问独立**，也就是说这次删的点在下一次询问会恢复。\n\n如果不理解，请看样例解释。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $c_i$。\n\n接下来 $n-1$ 行，每行两个整数 $u~v$，表示 $u~v$ 之间有连边。\n\n接下来 $m$ 行，每行两个整数 $x_i~k_i$，表示询问。", "outputFormat": "共 $m$ 行，每行一个整数，表示答案。", "hint": "对于所有测试数据，保证 $1 \\le n,m,k_i \\le 10^5$，$1 \\le u,v,x_i \\le n$，$0 \\le c_i \\le 10^5$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m \\le 10^3$ | $10$ |\n| $1$ | $c_i$ 相同 | $4$ |\n| $2$ | $k_i > \\max\\limits_{j=1}^{n} dep_j$ | $16$ |\n| $3$ | $n,m \\le 5\\times 10^4$ | $30$ |\n| $4$ |无 | $40$ |\n\n**样例解释**\n\n对于第 $1$ 个询问，满足条件的 $y$ 为：$1,3$。删掉之后，满足条件的 $z$ 为：$2,4$。其中 $c_1=2,c_4=8$，所以答案为 $2$。\n\n对于第 $3$ 个询问，满足条件的 $y$ 为：$1,5$。删掉之后，满足条件的 $z$ 为：$2,3,4,6,9$。其中 $c_2=1,c_3=4,c_4=8,c_6=2,c_9=7$，所以答案为 $5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "抱月", "background": "", "description": "记 $P(u,v)$ 表示树上从节点 $u$ 到节点 $v$ 依次经过的点组成的序列，包括 $u$ 和 $v$。\n\n记 $dep_u$ 表示在以 $1$ 为树根时，节点 $u$ 的深度（根节点深度为 $0$）。\n\n记 $\\operatorname{LCA}(u,v)$ 为树上节点 $u$ 和 $v$ 在以 $1$ 为树根时的最近公共祖先。\n\n抱月有一棵树，树根为 $1$，一共有 $n$ 个节点。其中第 $i$ 个节点的颜色是 $c_i$。她发现，对于一个节点 $x$ 和整数 $k$，如果将 $P(x,1)$ 中所有满足：$dep_y\\equiv dep_x \\pmod{k}$ 的 $y$ 都拿出来，这些 $y$ 是有意义的。\n\n所以，你需要解决这样一个问题。给定 $m$ 次询问，每次两个整数 $x,k$，求**删掉** $P(x,1)$ 中所有满足 $dep_y\\equiv dep_x \\pmod{k}$ 的 $y$ 后，满足 $dep_z \\le dep_x$ 的 $z$ 中不同 $c_z$ 的数量。**每次询问独立**，也就是说这次删的点在下一次询问会恢复。\n\n如果不理解，请看样例解释。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $c_i$。\n\n接下来 $n-1$ 行，每行两个整数 $u~v$，表示 $u~v$ 之间有连边。\n\n接下来 $m$ 行，每行两个整数 $x_i~k_i$，表示询问。", "outputFormat": "共 $m$ 行，每行一个整数，表示答案。", "hint": "对于所有测试数据，保证 $1 \\le n,m,k_i \\le 10^5$，$1 \\le u,v,x_i \\le n$，$0 \\le c_i \\le 10^5$。\n\n| Subtask | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $n,m \\le 10^3$ | $10$ |\n| $1$ | $c_i$ 相同 | $4$ |\n| $2$ | $k_i > \\max\\limits_{j=1}^{n} dep_j$ | $16$ |\n| $3$ | $n,m \\le 5\\times 10^4$ | $30$ |\n| $4$ |无 | $40$ |\n\n**样例解释**\n\n对于第 $1$ 个询问，满足条件的 $y$ 为：$1,3$。删掉之后，满足条件的 $z$ 为：$2,4$。其中 $c_1=2,c_4=8$，所以答案为 $2$。\n\n对于第 $3$ 个询问，满足条件的 $y$ 为：$1,5$。删掉之后，满足条件的 $z$ 为：$2,3,4,6,9$。其中 $c_2=1,c_3=4,c_4=8,c_6=2,c_9=7$，所以答案为 $5$。", "locale": "zh-CN"}}}
{"pid": "P12412", "type": "P", "difficulty": 2, "samples": [["2 3\n3 2", "2"], ["3 4\n3 3 3", "1"], ["6 5\n1 1 4 5 1 4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「YLLOI-R1-T1」等你下课", "background": "You can switch the language of problem description. Problem background are songs.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96tdfgkh.png)\n\n![等你下课](bilibili:BV1g54y1N7nu)", "description": "OI 集训了，但是同学们还想上文化课。\n\n一共有 $k$ 节文化课，小 Y 有 $n$ 个好朋友，他的第 $i$ 个好朋友计划选择 $m_i$ 节课。由于小 Y 觉得他太强了，所以没有选择任何一节。\n\n小 Y 好朋友们知道，当他们全都在上同一节课时，机房就只剩下小 Y 一人，此时小 Y 会感到孤独。因此好朋友们希望调整他们的选课方案，使得小 Y 的孤独时间尽可能短。请计算在最优安排下，小 Y 会感到孤独的课程数量的最小值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n第二行 $n$ 个正整数 $m_i$。", "outputFormat": "一个整数，表示在最优安排下，小 Y 会感到孤独的课程数量的最小值。", "hint": "#### 【样例解释#1】\n\n第一个好朋友选择了 $m_1=k$ 节课，因此他必须每节课都去上，没有调整选课方案的可能。\n\n因此第二个好朋友一旦选择了一节课，这节课就会被所有好朋友选择，小 Y 也会在这节课时孤独。因此小 Y 会感到孤独的课程数量为 $m_2=2$ 节。\n\n#### 【样例解释#2】\n\n以下展示一种可能的情况：\n\n|  | 第 $1$ 节课 | 第 $2$ 节课 | 第 $3$ 节课 | 第 $4$ 节课 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 第 $1$ 个好朋友 | ✓ | ✓ | ✓ |  |\n| 第 $2$ 个好朋友 |  | ✓ | ✓ | ✓ |\n| 第 $3$ 个好朋友 | ✓ | ✓ |  | ✓ |\n\n显然小 Y 只有在第 $2$ 节课时会孤独。\n\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n,k\\le10$。\n- Subtask 2（20 pts）：$m_1=0$。\n- Subtask 3（30 pts）：$n,k\\le1000$。\n- Subtask 4（30 pts）：无特殊限制。\n\n对于全部数据，保证 $1\\le n\\le 10^6$，$1\\le k\\le 10^9$，$0\\le m_i\\le k$。", "locale": "zh-CN", "translations": {"en": {"title": "「YLLOI-R1-T1」Waiting for you", "background": "![等你下课](bilibili:BV1g54y1N7nu)", "description": "The OI training camp is coming, but Little Y's classmates still want to attend school.\n\nThere are $k$ available classes. Little Y has $n$ good friends, and the $i$-th friend plans to attend $m_i$ of these classes. Since Little Y considers himself too strong, he doesn't attend any classes.\n\nIf all of Little Y's friends attend the same class, he will be alone in the computer room during that class and feel lonely. His friends want to rearrange their class selections to minimize the number of such lonely classes.\n\nDetermine the minimum number of lonely classes for Little Y, after optimally rearranging his friends' class choices.", "inputFormat": "The first line contains two integers, $n$ and $k$.\n\nThe second line contains $n$ integers, the $i$-th is $m_i$.", "outputFormat": "Output a single integer — the minimum number of classes during which Little Y will be alone.", "hint": "### Explanation\n\n**Sample 1:**  \nFriend 1 has to attend all $k = 3$ classes, so every class he attends is fixed. If friend 2 attends any class, that class will be attended by both friends, and thus Little Y will be alone during all those classes. So the minimum number of lonely classes is $m_2 = 2$.\n\n**Sample 2:**  \nOne possible valid arrangement:\n\n|         | Class 1 | Class 2 | Class 3 | Class 4 |\n|:---------:|:---------:|:---------:|:---------:|:---------:|\n| Friend 1 | ✓       | ✓       | ✓       |         |\n| Friend 2 |         | ✓       | ✓       | ✓       |\n| Friend 3 | ✓       | ✓       |         | ✓       |\n\nOnly Class 2 is attended by all three friends, so Little Y is lonely in just that one class.\n\n\n### Constraints\n**This problem uses subtask scoring.**\n- Subtask 1 (20 pts): $n, k \\leq 10$.\n- Subtask 2 (20 pts): $m_1 = 0$.\n- Subtask 3 (30 pts): $n, k \\leq 1000$.\n- Subtask 4 (30 pts): No additional constraints.\n\nFor all data:\n\n- $1 \\leq n \\leq 10^6$  .\n- $1 \\leq k \\leq 10^9$.\n- $0 \\leq m_i \\leq k$.\n\n", "locale": "en"}, "zh-CN": {"title": "「YLLOI-R1-T1」等你下课", "background": "You can switch the language of problem description. Problem background are songs.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96tdfgkh.png)\n\n![等你下课](bilibili:BV1g54y1N7nu)", "description": "OI 集训了，但是同学们还想上文化课。\n\n一共有 $k$ 节文化课，小 Y 有 $n$ 个好朋友，他的第 $i$ 个好朋友计划选择 $m_i$ 节课。由于小 Y 觉得他太强了，所以没有选择任何一节。\n\n小 Y 好朋友们知道，当他们全都在上同一节课时，机房就只剩下小 Y 一人，此时小 Y 会感到孤独。因此好朋友们希望调整他们的选课方案，使得小 Y 的孤独时间尽可能短。请计算在最优安排下，小 Y 会感到孤独的课程数量的最小值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n第二行 $n$ 个正整数 $m_i$。", "outputFormat": "一个整数，表示在最优安排下，小 Y 会感到孤独的课程数量的最小值。", "hint": "#### 【样例解释#1】\n\n第一个好朋友选择了 $m_1=k$ 节课，因此他必须每节课都去上，没有调整选课方案的可能。\n\n因此第二个好朋友一旦选择了一节课，这节课就会被所有好朋友选择，小 Y 也会在这节课时孤独。因此小 Y 会感到孤独的课程数量为 $m_2=2$ 节。\n\n#### 【样例解释#2】\n\n以下展示一种可能的情况：\n\n|  | 第 $1$ 节课 | 第 $2$ 节课 | 第 $3$ 节课 | 第 $4$ 节课 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 第 $1$ 个好朋友 | ✓ | ✓ | ✓ |  |\n| 第 $2$ 个好朋友 |  | ✓ | ✓ | ✓ |\n| 第 $3$ 个好朋友 | ✓ | ✓ |  | ✓ |\n\n显然小 Y 只有在第 $2$ 节课时会孤独。\n\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n,k\\le10$。\n- Subtask 2（20 pts）：$m_1=0$。\n- Subtask 3（30 pts）：$n,k\\le1000$。\n- Subtask 4（30 pts）：无特殊限制。\n\n对于全部数据，保证 $1\\le n\\le 10^6$，$1\\le k\\le 10^9$，$0\\le m_i\\le k$。", "locale": "zh-CN"}}}
{"pid": "P12413", "type": "P", "difficulty": 3, "samples": [["4 3\n3 4 5 5", "9"], ["4 3\n4 4 3 3", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "二分", "三分", "洛谷原创", "O2优化", "排序", "洛谷月赛"], "title": "「YLLOI-R1-T2」圣诞星", "background": "![圣诞星](bilibili:BV14Q4y137d1)", "description": "小 Y 在商店里一共要买 $n$ 个商品，第 $i$ 个要买的商品价格为 $a_i$ 元。\n\n在买这些商品前，小 Y 可以买任意多张优惠券，对于每一张优惠券，其价格为 $w$ 元。每有一张优惠券，在买任何商品时可以优惠 $1$ 元，但任何一个商品最低只能优惠到 $0$ 元。（优惠券不算商品）\n\n在付钱过程中，每付完一个商品的钱，小 Y 还能再获得一张优惠券。\n\n现在小 Y 想知道，最少需要多少钱才可以买完自己要买的商品。\n\n注：所有的优惠券都是永久性的。", "inputFormat": "第一行两个整数 $n,w$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "一个整数，表示小 Y 买完所有自己要买的商品所需的最少钱数。", "hint": "#### 【样例解释#1】\n\n下面展示一种最优方案。\n\n先购买 $3$ 张优惠券，花费 $3\\times 3=9$ 元。\n\n接下来使用 $0$ 元购买第 $1$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $2$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $3$ 个要买的商品（$5$ 张优惠券优惠了 $5$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $4$ 个要买的商品（$6$ 张优惠券优惠了 $5$ 元，因为任何一个商品最低只能优惠到 $0$ 元），并再获得一张优惠券。\n\n因此一共花费 $9+0+0+0+0=9$ 元。\n\n#### 【样例解释#2】\n\n下面展示一种最优方案。\n\n先购买 $1$ 张优惠券，花费 $1\\times 3=3$ 元。\n\n接下来使用 $2$ 元购买第 $4$ 个要买的商品（$1$ 张优惠券优惠了 $1$ 元），并再获得一张优惠券。\n\n接下来使用 $1$ 元购买第 $3$ 个要买的商品（$2$ 张优惠券优惠了 $2$ 元），并再获得一张优惠券。\n\n接下来使用 $1$ 元购买第 $2$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $1$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。\n\n因此一共花费 $3+2+1+1+0=7$ 元。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$\\forall a_i=i$。\n- Subtask 2（10 pts）：$w=1$。\n- Subtask 3（20 pts）：$n,a_i,w\\le 10$。\n- Subtask 4（30 pts）：$n,a_i,w\\le 1000$。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于全部数据，保证：$1\\le n\\le 10^5$，$1\\le a_i,w\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "「YLLOI-R1-T2」Christmas Star", "background": "![圣诞星](bilibili:BV14Q4y137d1)", "description": "Little Y needs to buy $n$ items in a store, and the price of the $i$-th item is $a_i$ yuan.\n\nBefore buying these items, Little Y can buy as many coupons as he wants. Each coupon costs $w$ yuan. Each coupon gives a $1$ yuan discount on any item, but any item can be discounted to a minimum of $0$ yuan. (Coupons are not considered items)\n\nAfter paying for each item, Little Y will also receive one more coupon.\n\nNow Little Y wants to know the minimum amount of money needed to buy all the items.\n\nNote: All coupons are permanent.", "inputFormat": "The first line contains two integers $n$ and $w$.\n\nThe second line contains $n$ integers $a_i$.", "outputFormat": "Output a single integer — the minimum amount of money Little Y needs to spend to buy all the items.", "hint": "### Explanation\n\n**Sample 1:**\n\nHere is an optimal solution.\n\nFirst, purchase $3$ discount coupons, costing $3 \\times 3 = 9$ yuan.\n\nThen, use $0$ yuan to buy the first product ($3$ discount coupons reduced the price by $3$ yuan), and receive one more coupon.\n\nNext, use $0$ yuan to buy the second product ($4$ discount coupons reduced the price by $4$ yuan), and receive one more coupon.\n\nNext, use $0$ yuan to buy the third product ($5$ discount coupons reduced the price by $5$ yuan), and receive one more coupon.\n\nFinally, use $0$ yuan to buy the fourth product ($6$ discount coupons reduced the price by $5$ yuan, because the minimum discount for any product is $0$ yuan), and receive one more coupon.\n\nTherefore, the total cost is $9 + 0 + 0 + 0 + 0 = 9$ yuan.\n\n**Sample 2:**\n\nHere is an optimal solution.\n\nFirst, purchase $1$ discount coupon, costing $1 \\times 3 = 3$ yuan.\n\nThen, use $2$ yuan to buy the fourth product ($1$ discount coupon reduced the price by $1$ yuan), and receive one more coupon.\n\nNext, use $1$ yuan to buy the third product ($2$ discount coupons reduced the price by $2$ yuan), and receive one more coupon.\n\nNext, use $1$ yuan to buy the second product ($3$ discount coupons reduced the price by $3$ yuan), and receive one more coupon.\n\nFinally, use $0$ yuan to buy the first product ($4$ discount coupons reduced the price by $4$ yuan), and receive one more coupon.\n\nTherefore, the total cost is $3 + 2 + 1 + 1 + 0 = 7$ yuan.\n\n### Constraints\n\n**This problem uses subtask scoring.**\n\n- Subtask 1 (10 pts): $\\forall a_i = i$.\n- Subtask 2 (10 pts): $w = 1$.\n- Subtask 3 (20 pts): $n, a_i, w \\leq 10$.\n- Subtask 4 (30 pts): $n, a_i, w \\leq 1000$.\n- Subtask 5 (30 pts): No additional constraints.\n\nFor all data:\n\n- $1 \\leq n \\leq 10^5$.\n- $1 \\leq a_i, w \\leq 10^9$.", "locale": "en"}, "zh-CN": {"title": "「YLLOI-R1-T2」圣诞星", "background": "![圣诞星](bilibili:BV14Q4y137d1)", "description": "小 Y 在商店里一共要买 $n$ 个商品，第 $i$ 个要买的商品价格为 $a_i$ 元。\n\n在买这些商品前，小 Y 可以买任意多张优惠券，对于每一张优惠券，其价格为 $w$ 元。每有一张优惠券，在买任何商品时可以优惠 $1$ 元，但任何一个商品最低只能优惠到 $0$ 元。（优惠券不算商品）\n\n在付钱过程中，每付完一个商品的钱，小 Y 还能再获得一张优惠券。\n\n现在小 Y 想知道，最少需要多少钱才可以买完自己要买的商品。\n\n注：所有的优惠券都是永久性的。", "inputFormat": "第一行两个整数 $n,w$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "一个整数，表示小 Y 买完所有自己要买的商品所需的最少钱数。", "hint": "#### 【样例解释#1】\n\n下面展示一种最优方案。\n\n先购买 $3$ 张优惠券，花费 $3\\times 3=9$ 元。\n\n接下来使用 $0$ 元购买第 $1$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $2$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $3$ 个要买的商品（$5$ 张优惠券优惠了 $5$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $4$ 个要买的商品（$6$ 张优惠券优惠了 $5$ 元，因为任何一个商品最低只能优惠到 $0$ 元），并再获得一张优惠券。\n\n因此一共花费 $9+0+0+0+0=9$ 元。\n\n#### 【样例解释#2】\n\n下面展示一种最优方案。\n\n先购买 $1$ 张优惠券，花费 $1\\times 3=3$ 元。\n\n接下来使用 $2$ 元购买第 $4$ 个要买的商品（$1$ 张优惠券优惠了 $1$ 元），并再获得一张优惠券。\n\n接下来使用 $1$ 元购买第 $3$ 个要买的商品（$2$ 张优惠券优惠了 $2$ 元），并再获得一张优惠券。\n\n接下来使用 $1$ 元购买第 $2$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。\n\n接下来使用 $0$ 元购买第 $1$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。\n\n因此一共花费 $3+2+1+1+0=7$ 元。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$\\forall a_i=i$。\n- Subtask 2（10 pts）：$w=1$。\n- Subtask 3（20 pts）：$n,a_i,w\\le 10$。\n- Subtask 4（30 pts）：$n,a_i,w\\le 1000$。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于全部数据，保证：$1\\le n\\le 10^5$，$1\\le a_i,w\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P12414", "type": "P", "difficulty": 4, "samples": [["1\n3 2\n2 2\n3 3\n1 1", "No"], ["1\n3 2\n2 1\n3 3\n2 2", "Yes"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「YLLOI-R1-T3」一路向北", "background": "![一路向北](bilibili:BV1qg411H7qR)", "description": "给定 $n$ 个队列，每个队列中有 $m$ 个正整数，这些数均小于等于 $n$，第 $i$ 个队列的第 $j$ 个元素为 $a_{i,j}$，$a_{i,1}$ 为队首，$a_{i,m}$ 为队尾。\n\n现在你的手中拿着一个数字 $0$，你要选择一个队列将 $0$ 放到其队尾，并把其队首拿到手中。\n\n接下来你将重复进行一个操作直到再次把 $0$ 拿回手中：\n\n- 设你手中的数字为 $p$，将其放到第 $p$ 个队列的队尾，并把第 $p$ 个队列的队首拿到手中。\n\n现在小 Y 想知道，在无限的时间中，你是否可以不再拿回 $0$？如果可以，则输出 `Yes`，否则输出 `No`。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个正整数，第 $i$ 行第 $j$ 个数表示 $a_{i,j}$。", "outputFormat": "对于每组数据，输出一行：\n\n在无限的时间中，若你可以不再拿回 $0$，则输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释#1】\n\n以下模拟一开始将 $0$ 放到第 $1$ 个队列的情况。\n\n```\n//手中数字：\n0\n//队列数字：（左边第一个为队首，右边第一个为队尾）\n2 2\n3 3\n1 1\n```\n\n```\n//手中数字：\n2\n//队列数字：\n2 0\n3 3\n1 1\n```\n\n```\n//手中数字：\n3\n//队列数字：\n2 0\n3 2\n1 1\n```\n\n```\n//手中数字：\n1\n//队列数字：\n2 0\n3 2\n1 3\n```\n\n```\n//手中数字：\n2\n//队列数字：\n0 1\n3 2\n1 3\n```\n\n```\n//手中数字：\n3\n//队列数字：\n0 1\n2 2\n1 3\n```\n\n```\n//手中数字：\n1\n//队列数字：\n0 1\n2 2\n3 3\n```\n\n```\n//手中数字：\n0\n//队列数字：\n1 1\n2 2\n3 3\n```\n#### 【样例解释#2】\n\n通过模拟可以发现当且仅当一开始把 $0$ 放到第 $1$ 个队列时，才可以不再拿回 $0$。因为在经过了若干轮后第 $2$ 个队列会被 $2$ 填满，并且手中的数字也是 $2$，所以将在第 $2$ 个队列一直循环。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n\\le2$。\n- Subtask 2（10 pts）：$\\forall a_{i,j}=i$。\n- Subtask 3（20 pts）：$n\\times m \\le 1000$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于全部数据，保证 $1\\le T\\le 10$，$1\\le n\\times m\\le 10^5$，$1\\le a_{i,j}\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "「YLLOI-R1-T3」Northward along the way", "background": "![一路向北](bilibili:BV1qg411H7qR)", "description": "Given $n$ queues, each containing $m$ positive integers, all of which are less than or equal to $n$, the $i$-th queue's $j$-th element is $a_{i,j}$, where $a_{i,1}$ is the head of the queue and $a_{i,m}$ is the tail of the queue.\n\nNow, you hold the number $0$. You need to select one queue, place $0$ at its tail, and take the head of the queue into your hand.\n\nNext, you will repeat the operation until you take $0$ back into your hand:\n\n- Let the number in your hand be $p$. Place it at the tail of the $p$-th queue and take the head of the $p$-th queue into your hand.\n\nNow, Little Y wants to know if, over an infinite amount of time, you can avoid taking back $0$. If you can, output `Yes`, otherwise, output `No`.\n", "inputFormat": "There are multiple test cases for this problem.\n\nThe first line contains an integer $T$, representing the number of test cases.\n\nFor each test case:\n- The first line contains two integers $n$ and $m$.\n- The next $n$ lines, each containing $m$ integers, represent the $i$-th queue's elements $a_{i,j}$.", "outputFormat": "For each test case, output one line containing `Yes` if you can avoid taking back $0$, otherwise output `No`.", "hint": "### Explanation \n\n**Sample 1:**\n\nBelow is a simulation where $0$ is initially placed into the first queue.\n\n```php\n// Number in hand:\n0\n// Queue contents (leftmost is the head, rightmost is the tail):\n2 2\n3 3\n1 1\n```\n\n```\n// Number in hand:\n2\n// Queue contents:\n2 0\n3 3\n1 1\n```\n\n```\n// Number in hand:\n3\n// Queue contents:\n2 0\n3 2\n1 1\n```\n\n```\n// Number in hand:\n1\n// Queue contents:\n2 0\n3 2\n1 3\n```\n\n```\n// Number in hand:\n2\n// Queue contents:\n0 1\n3 2\n1 3\n```\n\n```\n// Number in hand:\n3\n// Queue contents:\n0 1\n2 2\n1 3\n```\n\n```\n// Number in hand:\n1\n// Queue contents:\n0 1\n2 2\n3 3\n```\n\n```\n// Number in hand:\n0\n// Queue contents:\n1 1\n2 2\n3 3\n```\n\n**Sample 2:**\n\nBy simulation, we can see that only when $0$ is initially placed into the first queue can it never be picked up again.  \nThis is because after several rounds, the second queue will be filled with the number $2$, and the number in hand will also be $2$, so the process will loop indefinitely within the second queue.\n\n### Constraints\n\n**This problem uses subtask scoring.**\n\n- Subtask 1 (20 points): $n \\leq 2$.\n- Subtask 2 (10 points): $\\forall a_{i,j} = i$.\n- Subtask 3 (20 points): $n \\times m \\leq 1000$.\n- Subtask 4 (50 points): No special restrictions.\n\nFor all data:\n\n- $1 \\leq T \\leq 10$.\n- $1 \\leq n \\times m \\leq 10^5$.\n- $1 \\leq a_{i,j} \\leq n$.\n", "locale": "en"}, "zh-CN": {"title": "「YLLOI-R1-T3」一路向北", "background": "![一路向北](bilibili:BV1qg411H7qR)", "description": "给定 $n$ 个队列，每个队列中有 $m$ 个正整数，这些数均小于等于 $n$，第 $i$ 个队列的第 $j$ 个元素为 $a_{i,j}$，$a_{i,1}$ 为队首，$a_{i,m}$ 为队尾。\n\n现在你的手中拿着一个数字 $0$，你要选择一个队列将 $0$ 放到其队尾，并把其队首拿到手中。\n\n接下来你将重复进行一个操作直到再次把 $0$ 拿回手中：\n\n- 设你手中的数字为 $p$，将其放到第 $p$ 个队列的队尾，并把第 $p$ 个队列的队首拿到手中。\n\n现在小 Y 想知道，在无限的时间中，你是否可以不再拿回 $0$？如果可以，则输出 `Yes`，否则输出 `No`。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个正整数，第 $i$ 行第 $j$ 个数表示 $a_{i,j}$。", "outputFormat": "对于每组数据，输出一行：\n\n在无限的时间中，若你可以不再拿回 $0$，则输出 `Yes`，否则输出 `No`。", "hint": "#### 【样例解释#1】\n\n以下模拟一开始将 $0$ 放到第 $1$ 个队列的情况。\n\n```\n//手中数字：\n0\n//队列数字：（左边第一个为队首，右边第一个为队尾）\n2 2\n3 3\n1 1\n```\n\n```\n//手中数字：\n2\n//队列数字：\n2 0\n3 3\n1 1\n```\n\n```\n//手中数字：\n3\n//队列数字：\n2 0\n3 2\n1 1\n```\n\n```\n//手中数字：\n1\n//队列数字：\n2 0\n3 2\n1 3\n```\n\n```\n//手中数字：\n2\n//队列数字：\n0 1\n3 2\n1 3\n```\n\n```\n//手中数字：\n3\n//队列数字：\n0 1\n2 2\n1 3\n```\n\n```\n//手中数字：\n1\n//队列数字：\n0 1\n2 2\n3 3\n```\n\n```\n//手中数字：\n0\n//队列数字：\n1 1\n2 2\n3 3\n```\n#### 【样例解释#2】\n\n通过模拟可以发现当且仅当一开始把 $0$ 放到第 $1$ 个队列时，才可以不再拿回 $0$。因为在经过了若干轮后第 $2$ 个队列会被 $2$ 填满，并且手中的数字也是 $2$，所以将在第 $2$ 个队列一直循环。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n\\le2$。\n- Subtask 2（10 pts）：$\\forall a_{i,j}=i$。\n- Subtask 3（20 pts）：$n\\times m \\le 1000$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于全部数据，保证 $1\\le T\\le 10$，$1\\le n\\times m\\le 10^5$，$1\\le a_{i,j}\\le n$。", "locale": "zh-CN"}}}
{"pid": "P12415", "type": "P", "difficulty": 4, "samples": [["2 2", "10"], ["3 2", "86"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "组合数学", "洛谷月赛"], "title": "「YLLOI-R1-T4」枫", "background": "![枫](bilibili:BV1ZP411T7CB)", "description": "有一个 $n$ 行 $m$ 列的网格，你要在该网格上制造一棵树，要求：\n\n- 该树的每个节点对应一个格子。\n- 每个格子最多对应一个节点。\n- 该树任意节点对应格子所处行数小于其任意儿子节点对应格子所处行数。（行数从上往下严格递增）\n\n节点没有编号，即所有节点是相同的。\n\n定义两棵树相同需满足的所有条件：\n\n- 总节点数相同。\n- 对应节点都位于同一格子。形式化地，设两棵树所有节点对应格子的集合分别为 $S_1,S_2$，则 $S_1=S_2$。\n- 对应节点所有父子关系均相同。形式化地，使用 $x$ 表示一个格子，则 $\\forall x\\in S_1,S_2$，设其对应节点的儿子节点对应格子的集合分别为 $S_1{'},S_2{'}$，则 $S_1{'}=S_2{'}$。\n\n问一共能制造出多少种不同的树，答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行一个数表示答案。", "hint": "#### 【样例解释#1】\n\n下图为所有不同的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/84kk9yiu.png)\n\n#### 【样例解释#2】\n\n- 共有 $6$ 种不同的 $1$ 个节点的树。\n- 共有 $12$ 种不同的 $2$ 个节点的树。\n- 共有 $22$ 种不同的 $3$ 个节点的树。\n- 共有 $28$ 种不同的 $4$ 个节点的树。\n- 共有 $18$ 种不同的 $5$ 个节点的树。\n- 共有 $0$ 种不同的 $6$ 个节点的树。\n\n因此共有 $6+12+22+28+18+0=86$ 种不同的树。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n=2$。\n- Subtask 2（10 pts）：$m=1$。\n- Subtask 3（10 pts）：$n,m \\le 3$。\n- Subtask 4（20 pts）：$n,m \\le 20$。\n- Subtask 5（20 pts）：$n,m \\le 50$。\n- Subtask 6（30 pts）：无特殊限制。\n\n对于全部数据，保证：$1\\le n,m\\le80$。", "locale": "zh-CN", "translations": {"en": {"title": "「YLLOI-R1-T4」 Maple", "background": "![枫](bilibili:BV1ZP411T7CB)", "description": "There is a grid with $n$ rows and $m$ columns. You need to construct a tree on this grid such that:\n\n- Each node of the tree corresponds to a cell in the grid.\n- Each cell can correspond to at most one node.\n- For any node in the tree, the row of its corresponding cell is strictly less than the row of any of its children. (Rows are numbered from top to bottom.)\n\nThe nodes are unlabelled; all nodes are identical.\n\nTwo trees are considered identical if they satisfy all the following conditions:\n\n- They contain the same number of nodes.\n- The set of grid cells corresponding to the nodes are the same. Formally, if the set of cells used in the two trees are $S_1$ and $S_2$, then $S_1 = S_2$.\n- The parent–child relationships are exactly the same. Formally, for every cell $x\\in S_1,S_2$, let $S_1'$ and $S_2'$ be the sets of cells corresponding to the children of $x$ in the two trees,then $S_1'=S_2'$.\n\n\nDetermine how many distinct trees can be constructed. Output the answer modulo $10^9 + 7$.", "inputFormat": "A single line containing two positive integers $n$ and $m$.", "outputFormat": "A single integer — the number of distinct trees modulo $10^9 + 7$.", "hint": "### Explanation\n\n**Sample 1:**\n\nThe figure below shows all distinct trees:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/84kk9yiu.png)\n\n**Sample 2:**\n\n- There are $6$ distinct trees with $1$ node.\n- There are $12$ distinct trees with $2$ nodes.\n- There are $22$ distinct trees with $3$ nodes.\n- There are $28$ distinct trees with $4$ nodes.\n- There are $18$ distinct trees with $5$ nodes.\n- There are $0$ distinct trees with $6$ nodes.\n\nSo in total, there are $6 + 12 + 22 + 28 + 18 + 0 = 86$ distinct trees.\n\n### Constraints\n\n**This problem uses subtask scoring.**\n\n- Subtask 1 (10 pts): $n = 2$.\n- Subtask 2 (10 pts): $m = 1$.\n- Subtask 3 (10 pts): $n, m \\le 3$.\n- Subtask 4 (20 pts): $n, m \\le 20$.\n- Subtask 5 (20 pts): $n, m \\le 50$.\n- Subtask 6 (30 pts): No additional constraints.\n\nFor all data: $1 \\le n, m \\le 80$.", "locale": "en"}, "zh-CN": {"title": "「YLLOI-R1-T4」枫", "background": "![枫](bilibili:BV1ZP411T7CB)", "description": "有一个 $n$ 行 $m$ 列的网格，你要在该网格上制造一棵树，要求：\n\n- 该树的每个节点对应一个格子。\n- 每个格子最多对应一个节点。\n- 该树任意节点对应格子所处行数小于其任意儿子节点对应格子所处行数。（行数从上往下严格递增）\n\n节点没有编号，即所有节点是相同的。\n\n定义两棵树相同需满足的所有条件：\n\n- 总节点数相同。\n- 对应节点都位于同一格子。形式化地，设两棵树所有节点对应格子的集合分别为 $S_1,S_2$，则 $S_1=S_2$。\n- 对应节点所有父子关系均相同。形式化地，使用 $x$ 表示一个格子，则 $\\forall x\\in S_1,S_2$，设其对应节点的儿子节点对应格子的集合分别为 $S_1{'},S_2{'}$，则 $S_1{'}=S_2{'}$。\n\n问一共能制造出多少种不同的树，答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行一个数表示答案。", "hint": "#### 【样例解释#1】\n\n下图为所有不同的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/84kk9yiu.png)\n\n#### 【样例解释#2】\n\n- 共有 $6$ 种不同的 $1$ 个节点的树。\n- 共有 $12$ 种不同的 $2$ 个节点的树。\n- 共有 $22$ 种不同的 $3$ 个节点的树。\n- 共有 $28$ 种不同的 $4$ 个节点的树。\n- 共有 $18$ 种不同的 $5$ 个节点的树。\n- 共有 $0$ 种不同的 $6$ 个节点的树。\n\n因此共有 $6+12+22+28+18+0=86$ 种不同的树。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n=2$。\n- Subtask 2（10 pts）：$m=1$。\n- Subtask 3（10 pts）：$n,m \\le 3$。\n- Subtask 4（20 pts）：$n,m \\le 20$。\n- Subtask 5（20 pts）：$n,m \\le 50$。\n- Subtask 6（30 pts）：无特殊限制。\n\n对于全部数据，保证：$1\\le n,m\\le80$。", "locale": "zh-CN"}}}
{"pid": "P12416", "type": "P", "difficulty": 6, "samples": [["1 6\n7", "42"], ["2 6\n9 7", "180"], ["3 3\n9 5 7", "61"], ["6 6\n250863180 814744283 795773454 638846422 603293402 952439325", "162287374"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "多项式", "组合数学", "生成函数", "根号分治"], "title": "多项式高手", "background": "", "description": "已知非负整数数列 $b_1,b_2,\\cdots,b_n$ 的值，另有非负整数数列 $a$ 满足 $a_1+a_2+\\cdots+a_n = m$，$a_1\\le a_2\\le\\cdots\\le a_n$。请求出对于所有满足条件的数列 $a$，$a_1b_1+a_2b_2+\\cdots+a_nb_n$ 的和。由于答案可能很大，你只需要输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "第一行两个正整数 $n, m$。\n\n第二行 $n$ 个整数 $b_1,b_2,\\cdots,b_n$。", "outputFormat": "输出一行，表示所有 $a_1 b_1 + a_2 b_2 + \\cdots + a_n b_n$ 的和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n**【样例 1 解释】**\n\n当且仅当 $a_1=6$ 时满足条件，所以答案为 $a_1\\times b_1=6\\times7=42$。\n\n**【样例 2 解释】**\n\n共有 $4$ 种可能的数列 $a$：\n\n- $a_1=0$，$a_2=6$ 时式子的值为 $0\\times9+6\\times7=42$；\n- $a_1=1$，$a_2=5$ 时式子的值为 $1\\times9+5 \\times7=44$；\n- $a_1=2$，$a_2=4$ 时式子的值为 $2\\times9+4\\times7=46$；\n- $a_1=3$，$a_2=3$ 时式子的值为 $3\\times9+3\\times7= 48$。\n\n故答案为 $42+44+46+48=180$。\n\n**【样例 3 解释】**\n\n共有 $3$ 种可能的数列 $a$：\n\n- $a_1=0$，$a_2=0$，$a_3=3$ 时式子的值为 $0\\times9+0\\times5+3\\times7=21$；\n- $a_1=0$，$a_2=1$，$a_3=2$ 时式子的值为 $0\\times9+1\\times5+2\\times7=19$；\n- $a_1=1$，$a_2=1$，$a_3=1$ 时式子的值为 $1\\times9+1\\times5+1\\times7=21$。\n\n故答案为 $21+19+21=61$。\n\n### 大样例\n\n**【样例 5】**\n\n见选手目录下的 `mtt/mtt5.in` 与 `mtt/mtt5.out`。\n\n这个样例满足测试点 $3$ 的约束条件。\n\n**【样例 6】**\n\n见选手目录下的 `mtt/mtt6.in` 与 `mtt/mtt6.out`。\n\n这个样例满足测试点 $6$ 的约束条件。\n\n**【样例 7】**\n\n见选手目录下的 `mtt/mtt7.in` 与 `mtt/mtt7.out`。\n\n这个样例满足测试点 $8$ 的约束条件。\n\n**【样例 8】**\n\n见选手目录下的 `mtt/mtt8.in` 与 `mtt/mtt8.out`。\n\n这个样例满足测试点 $9$ 的约束条件。\n\n### 数据范围\n\n空间限制 $512\\text{MB}$。保证时空限制均为 $\\text{std}$ 的 $2$ 倍以上。\n\n对于所有数据，$1\\le n\\le10^5;~1\\le m\\le110,000;~n\\le m\\le n+10^4;~0\\le b_i<10^9+7$。\n\n| 测试点 | $n=$ | $m=$ | 时间限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $6$ | $1\\text s$ |\n| $2$ | $6$ | $6$ | $1\\text s$ |\n| $3$ | $50$ | $99$ | $1\\text s$ |\n| $4$ | $100$ | $199$ | $1\\text s$ |\n| $5$ | $500$ | $999$ | $1\\text s$ |\n| $6$ | $5000$ | $5000$ | $1\\text s$ |\n| $7$ | $5000$ | $9999$ | $1\\text s$ |\n| $8$ | $10^5$ | $10^5$ | $3\\text s$ |\n| $9$ | $10^5$ | $100100$ | $3\\text s$ |\n| $10$ | $10^5$ | $110000$ | $0.6\\text s$ |\n\n### 出题人员\n\nIdea：不知名用户，Solution：Konata28 & 不知名用户，Code：Konata28 & Milmon & 不知名用户，Data：不知名用户，Check：Milmon & Konata28。\n\n本题来源于 2024.10.22 CSP-S 模拟赛。因为原版题目模数是 $998244353$，所以原版英文名为 ntt。数据点范围配置和时空限制相对原版题目略有改动。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "多项式高手", "background": "", "description": "已知非负整数数列 $b_1,b_2,\\cdots,b_n$ 的值，另有非负整数数列 $a$ 满足 $a_1+a_2+\\cdots+a_n = m$，$a_1\\le a_2\\le\\cdots\\le a_n$。请求出对于所有满足条件的数列 $a$，$a_1b_1+a_2b_2+\\cdots+a_nb_n$ 的和。由于答案可能很大，你只需要输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "第一行两个正整数 $n, m$。\n\n第二行 $n$ 个整数 $b_1,b_2,\\cdots,b_n$。", "outputFormat": "输出一行，表示所有 $a_1 b_1 + a_2 b_2 + \\cdots + a_n b_n$ 的和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n**【样例 1 解释】**\n\n当且仅当 $a_1=6$ 时满足条件，所以答案为 $a_1\\times b_1=6\\times7=42$。\n\n**【样例 2 解释】**\n\n共有 $4$ 种可能的数列 $a$：\n\n- $a_1=0$，$a_2=6$ 时式子的值为 $0\\times9+6\\times7=42$；\n- $a_1=1$，$a_2=5$ 时式子的值为 $1\\times9+5 \\times7=44$；\n- $a_1=2$，$a_2=4$ 时式子的值为 $2\\times9+4\\times7=46$；\n- $a_1=3$，$a_2=3$ 时式子的值为 $3\\times9+3\\times7= 48$。\n\n故答案为 $42+44+46+48=180$。\n\n**【样例 3 解释】**\n\n共有 $3$ 种可能的数列 $a$：\n\n- $a_1=0$，$a_2=0$，$a_3=3$ 时式子的值为 $0\\times9+0\\times5+3\\times7=21$；\n- $a_1=0$，$a_2=1$，$a_3=2$ 时式子的值为 $0\\times9+1\\times5+2\\times7=19$；\n- $a_1=1$，$a_2=1$，$a_3=1$ 时式子的值为 $1\\times9+1\\times5+1\\times7=21$。\n\n故答案为 $21+19+21=61$。\n\n### 大样例\n\n**【样例 5】**\n\n见选手目录下的 `mtt/mtt5.in` 与 `mtt/mtt5.out`。\n\n这个样例满足测试点 $3$ 的约束条件。\n\n**【样例 6】**\n\n见选手目录下的 `mtt/mtt6.in` 与 `mtt/mtt6.out`。\n\n这个样例满足测试点 $6$ 的约束条件。\n\n**【样例 7】**\n\n见选手目录下的 `mtt/mtt7.in` 与 `mtt/mtt7.out`。\n\n这个样例满足测试点 $8$ 的约束条件。\n\n**【样例 8】**\n\n见选手目录下的 `mtt/mtt8.in` 与 `mtt/mtt8.out`。\n\n这个样例满足测试点 $9$ 的约束条件。\n\n### 数据范围\n\n空间限制 $512\\text{MB}$。保证时空限制均为 $\\text{std}$ 的 $2$ 倍以上。\n\n对于所有数据，$1\\le n\\le10^5;~1\\le m\\le110,000;~n\\le m\\le n+10^4;~0\\le b_i<10^9+7$。\n\n| 测试点 | $n=$ | $m=$ | 时间限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $6$ | $1\\text s$ |\n| $2$ | $6$ | $6$ | $1\\text s$ |\n| $3$ | $50$ | $99$ | $1\\text s$ |\n| $4$ | $100$ | $199$ | $1\\text s$ |\n| $5$ | $500$ | $999$ | $1\\text s$ |\n| $6$ | $5000$ | $5000$ | $1\\text s$ |\n| $7$ | $5000$ | $9999$ | $1\\text s$ |\n| $8$ | $10^5$ | $10^5$ | $3\\text s$ |\n| $9$ | $10^5$ | $100100$ | $3\\text s$ |\n| $10$ | $10^5$ | $110000$ | $0.6\\text s$ |\n\n### 出题人员\n\nIdea：不知名用户，Solution：Konata28 & 不知名用户，Code：Konata28 & Milmon & 不知名用户，Data：不知名用户，Check：Milmon & Konata28。\n\n本题来源于 2024.10.22 CSP-S 模拟赛。因为原版题目模数是 $998244353$，所以原版英文名为 ntt。数据点范围配置和时空限制相对原版题目略有改动。", "locale": "zh-CN"}}}
{"pid": "P12417", "type": "P", "difficulty": 7, "samples": [["3\n2\n3\n4", "1\n1\n1 2\n0\n1\n4\n1 2\n3 4\n1 3\n2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "构造"], "title": "基础构造练习题 1", "background": "2025.5.6：加强操作次数限制，并调整了部分分设计。\n\n2025.5.8：再次加强操作次数限制，并调整了部分分设计。之前的提交记录已经全部重测。\n", "description": "有一列实数，对于**每一次**操作，可以选择两个实数，把它们同时变为两数之积。\n\n例如，给定 $7, 4, 5$，对 $7$ 和 $5$ 进行一次操作，原数列变为 $35, 4, 35$。\n\n给定数列的长度 $n$，你的目标是找到一种操作方案，使得对于任意长度为 $n$ 的实数列，按照该操作方式操作之后，数列的每一项数值都相同。\n", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入数据组数 $T$。\n\n对于每组数据有一行，包含一个正整数 $n$，表示数列长度。\n", "outputFormat": "对于每组数据，先输出一个整数表示能否找到。若能输出 $1$，否则输出 $0$。\n\n若能找到，还需要输出一行 $m$ 表示操作次数（你需要保证 $0 \\leq m \\leq 5 \\times 10^5$），接下来 $m$ 行，每行包含两个整数，表示操作的两项在数列中的编号。\n", "hint": "Idea：Milmon，Solution：Milmon & _fewq，Code：Milmon & _fewq，Data：Milmon，Check：Konata28。\n\n对于所有测试数据，保证 $T = 20$，$2 \\leq n \\leq 2^{10}$。本题共包含 $3$ 个子任务：\n\n| 子任务编号 | 分值 | 测试点数目 |\n| :-: | :-: | :-: |\n| $1$ | $10$ | $1$ |\n| $2$ | $30$ | $1$ |\n| $3$ | $60$ | $3$ |\n\n对于子任务 1，选手只需要正确回答是否存在操作方案即可获得满分。\n\n对于子任务 2，对于每组测试数据分别计分：对于一组测试数据，只要选手正确回答是否存在操作方案，并且给出的操作方案均合法，就可以得到该测试点 $5 \\%$ 的分数。选手在该测试点得到的分数等于每组测试数据得分的总和。\n\n对于子任务 3：\n\n- 若存在一组测试数据，选手没有正确回答是否存在操作方案，或者给出的操作方案不合法，那么选手在该测试点不得分；\n- 否则，若对于所有存在操作方案的测试数据，选手都给出了操作次数不超过 $2n - 1$ 的方案，那么选手在该测试点得到全部分数；\n- 否则，设所有存在操作方案的测试数据中选手给出的最大操作次数为 $s$，定义函数：\n\n  $$\n  f(x) = \\frac{2 \\times 10^7}{(x + 4\\,000)^{0.7}}\n  $$\n\n  则选手在该测试点的得分为：\n\n  $$\n  \\frac{f(s) - f(500\\,000)}{f(2\\,047) - f(500\\,000)} \\times 55\n  $$\n\n  下表为在一些特殊的 $s$ 中选手在该测试点得到的分数：\n\n  | $s =$ | 选手得分 |\n  | :-: | :-: |\n  | $500\\,000$ | $0$ |\n  | $400\\,000$ | $0.436$ |\n  | $300\\,000$ | $1.106$ |\n  | $200\\,000$ | $2.302$ |\n  | $100\\,000$ | $5.258$ |\n  | $50\\,000$ | $9.836$ |\n  | $10\\,000$ | $29.402$ |\n  | $5\\,000$ | $41.003$ |\n  | $3\\,000$ | $49.391$ |\n  | $2\\,047$ | $55$ |\n\n提示：若能够完成正确性判断，但是无法完成构造的，也需要按照输出格式输出，例如你可以输出一个 $m = 0$ 的构造。类似地，输出时请判定 $0 \\leq m \\leq 5 \\times 10^5$ 是否成立，若评分时存在一组数据的 $m > 5 \\times 10^5$，则你无法得到任何分数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "基础构造练习题 1", "background": "2025.5.6：加强操作次数限制，并调整了部分分设计。\n\n2025.5.8：再次加强操作次数限制，并调整了部分分设计。之前的提交记录已经全部重测。\n", "description": "有一列实数，对于**每一次**操作，可以选择两个实数，把它们同时变为两数之积。\n\n例如，给定 $7, 4, 5$，对 $7$ 和 $5$ 进行一次操作，原数列变为 $35, 4, 35$。\n\n给定数列的长度 $n$，你的目标是找到一种操作方案，使得对于任意长度为 $n$ 的实数列，按照该操作方式操作之后，数列的每一项数值都相同。\n", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入数据组数 $T$。\n\n对于每组数据有一行，包含一个正整数 $n$，表示数列长度。\n", "outputFormat": "对于每组数据，先输出一个整数表示能否找到。若能输出 $1$，否则输出 $0$。\n\n若能找到，还需要输出一行 $m$ 表示操作次数（你需要保证 $0 \\leq m \\leq 5 \\times 10^5$），接下来 $m$ 行，每行包含两个整数，表示操作的两项在数列中的编号。\n", "hint": "Idea：Milmon，Solution：Milmon & _fewq，Code：Milmon & _fewq，Data：Milmon，Check：Konata28。\n\n对于所有测试数据，保证 $T = 20$，$2 \\leq n \\leq 2^{10}$。本题共包含 $3$ 个子任务：\n\n| 子任务编号 | 分值 | 测试点数目 |\n| :-: | :-: | :-: |\n| $1$ | $10$ | $1$ |\n| $2$ | $30$ | $1$ |\n| $3$ | $60$ | $3$ |\n\n对于子任务 1，选手只需要正确回答是否存在操作方案即可获得满分。\n\n对于子任务 2，对于每组测试数据分别计分：对于一组测试数据，只要选手正确回答是否存在操作方案，并且给出的操作方案均合法，就可以得到该测试点 $5 \\%$ 的分数。选手在该测试点得到的分数等于每组测试数据得分的总和。\n\n对于子任务 3：\n\n- 若存在一组测试数据，选手没有正确回答是否存在操作方案，或者给出的操作方案不合法，那么选手在该测试点不得分；\n- 否则，若对于所有存在操作方案的测试数据，选手都给出了操作次数不超过 $2n - 1$ 的方案，那么选手在该测试点得到全部分数；\n- 否则，设所有存在操作方案的测试数据中选手给出的最大操作次数为 $s$，定义函数：\n\n  $$\n  f(x) = \\frac{2 \\times 10^7}{(x + 4\\,000)^{0.7}}\n  $$\n\n  则选手在该测试点的得分为：\n\n  $$\n  \\frac{f(s) - f(500\\,000)}{f(2\\,047) - f(500\\,000)} \\times 55\n  $$\n\n  下表为在一些特殊的 $s$ 中选手在该测试点得到的分数：\n\n  | $s =$ | 选手得分 |\n  | :-: | :-: |\n  | $500\\,000$ | $0$ |\n  | $400\\,000$ | $0.436$ |\n  | $300\\,000$ | $1.106$ |\n  | $200\\,000$ | $2.302$ |\n  | $100\\,000$ | $5.258$ |\n  | $50\\,000$ | $9.836$ |\n  | $10\\,000$ | $29.402$ |\n  | $5\\,000$ | $41.003$ |\n  | $3\\,000$ | $49.391$ |\n  | $2\\,047$ | $55$ |\n\n提示：若能够完成正确性判断，但是无法完成构造的，也需要按照输出格式输出，例如你可以输出一个 $m = 0$ 的构造。类似地，输出时请判定 $0 \\leq m \\leq 5 \\times 10^5$ 是否成立，若评分时存在一组数据的 $m > 5 \\times 10^5$，则你无法得到任何分数。\n", "locale": "zh-CN"}}}
{"pid": "P12418", "type": "P", "difficulty": 1, "samples": [["3\n1 1\n1 2\n2 2", "1\n1\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X12-T1】「ALFR Round 5」地铁", "background": "原题链接：<https://oier.team/problems/X12A>。", "description": "为了方便市民出行，缓解地面上的道路拥堵问题，S 市决定在地底下建一些地铁。\n\n根据城市规划，S 市的地下网络将由 $n$ 条横向通道和 $m$ 条纵向通道构成。地铁站将设置在所有横向通道与纵向通道的交叉处，共 $n\\times m$ 处。\n\n地下网络的所有站点都需要被地铁线路覆盖，地铁线路之间可以有重叠部分。\n\n由于地铁拐弯处的建造成本、安全要求较高，因此，S 市要求**每一条地铁线路途径的所有站点，均在同一条横向通道或纵向通道内**。即，地铁线路不能拐弯。\n\n此外，地铁线路网必须是连通的。也就是说，无论从哪个地铁站出发乘坐地铁，经过若干次换乘（可以不换乘），都一定可以到达其它所有地铁站。\n\n例如，当 $n=5$，$m=7$ 时，下图就是一个符合 S 市要求的地铁交通网络图（灰线代表地下通道，深灰色的格子为地铁站，即道路交叉处）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/17m8efyt.png)\n\n因为盾构一条地铁线路的流程十分麻烦，S 市不想要建造太多的地铁线路。现在，你知道了 S 市的地下网络大小为 $n\\times m$，请你求出 S 市最少要建几条地铁线路。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个正整数 $n,m$。", "outputFormat": "对于每组数据，输出一行一个整数，表示 S 市最少需要建造的地铁线路数量。", "hint": "**【样例解释】**\n\n在第一组数据中，需要建造一条长度为 $0$，经过唯一一个站点的地铁线路。\n\n在第二组数据中，需要建造一条长度为 $1$，连接两个站点的地铁线路。\n\n在第三组数据中，一个合法的建造方案如下图。要覆盖所有深灰色的交叉路口，至少需要三条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jer0ioa6.png)\n\n**【数据范围】**\n\n对于 $15\\%$ 的数据，保证 $n=1$。\n\n对于另外 $15\\%$ 的数据，保证 $n,m\\le10$。\n\n对于另外 $15\\%$ 的数据，保证 $n=m$。\n\n对于另外 $15\\%$ 的数据，保证 $n\\le m$。\n\n对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n,m\\le3\\times10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T1】「ALFR Round 5」地铁", "background": "原题链接：<https://oier.team/problems/X12A>。", "description": "为了方便市民出行，缓解地面上的道路拥堵问题，S 市决定在地底下建一些地铁。\n\n根据城市规划，S 市的地下网络将由 $n$ 条横向通道和 $m$ 条纵向通道构成。地铁站将设置在所有横向通道与纵向通道的交叉处，共 $n\\times m$ 处。\n\n地下网络的所有站点都需要被地铁线路覆盖，地铁线路之间可以有重叠部分。\n\n由于地铁拐弯处的建造成本、安全要求较高，因此，S 市要求**每一条地铁线路途径的所有站点，均在同一条横向通道或纵向通道内**。即，地铁线路不能拐弯。\n\n此外，地铁线路网必须是连通的。也就是说，无论从哪个地铁站出发乘坐地铁，经过若干次换乘（可以不换乘），都一定可以到达其它所有地铁站。\n\n例如，当 $n=5$，$m=7$ 时，下图就是一个符合 S 市要求的地铁交通网络图（灰线代表地下通道，深灰色的格子为地铁站，即道路交叉处）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/17m8efyt.png)\n\n因为盾构一条地铁线路的流程十分麻烦，S 市不想要建造太多的地铁线路。现在，你知道了 S 市的地下网络大小为 $n\\times m$，请你求出 S 市最少要建几条地铁线路。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个正整数 $n,m$。", "outputFormat": "对于每组数据，输出一行一个整数，表示 S 市最少需要建造的地铁线路数量。", "hint": "**【样例解释】**\n\n在第一组数据中，需要建造一条长度为 $0$，经过唯一一个站点的地铁线路。\n\n在第二组数据中，需要建造一条长度为 $1$，连接两个站点的地铁线路。\n\n在第三组数据中，一个合法的建造方案如下图。要覆盖所有深灰色的交叉路口，至少需要三条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jer0ioa6.png)\n\n**【数据范围】**\n\n对于 $15\\%$ 的数据，保证 $n=1$。\n\n对于另外 $15\\%$ 的数据，保证 $n,m\\le10$。\n\n对于另外 $15\\%$ 的数据，保证 $n=m$。\n\n对于另外 $15\\%$ 的数据，保证 $n\\le m$。\n\n对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n,m\\le3\\times10^4$。", "locale": "zh-CN"}}}
{"pid": "P12419", "type": "P", "difficulty": 2, "samples": [["2\n110010000000 110110101100\n1 10", "3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X12-T2】「ALFR Round 5」Dream of Sky", "background": "原题链接：<https://oier.team/problems/X12B>。\n\n---\n\n> “一旦你尝试过天空的味道，你就会永远向上仰望”——列奥纳多 达芬奇", "description": "定义一个 01 串 $s$ 的权值为最小的 $k$ 使得 $s$ 能被分割成 $k$ 个子串，且每个子串的各个字符都相等。例如，`1011110000010000` 的权值为 $6$。\n\n现有一个二进制数 $n\\in[l,r]$，求 $n$ 转化为 01 字符串（不含前导零）后的权值最小是多少，即，求 $[l,r]$ 中权值最小的 $n$ 的权值。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个整数 $l,r$，以**二进制形式**给出。", "outputFormat": "对于每组数据，输出一行一个整数，表示 $[l,r]$ 中权值最小的二进制数 $n$ 的权值。", "hint": "**【样例解释】**\n\n在第一组测试数据中 $l=3200,r=3500$。可以选择 $n=3327$，其二进制表示为 `110011111111`，权值为 $3$。可以证明在 $[l,r]$ 的数没有更小的权值了。\n\n在第二组测试数据中 $l=1,r=2$。可以选择 $n=1$，其二进制表示为 `1`，权值为 $1$。显然这是最小可能的权值。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$l,r\\le2^{20}-1$。\n\n对于 $50\\%$ 的数据，$l,r\\le2^{5\\times10^3}-1$。\n\n对于另外 $30\\%$ 的数据，保证二进制数 $l$ 和 $r$ 的位数相同。\n\n对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le l\\le r\\le2^{5\\times10^5}-1$，且 $l,r$ 没有前导零。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T2】「ALFR Round 5」Dream of Sky", "background": "原题链接：<https://oier.team/problems/X12B>。\n\n---\n\n> “一旦你尝试过天空的味道，你就会永远向上仰望”——列奥纳多 达芬奇", "description": "定义一个 01 串 $s$ 的权值为最小的 $k$ 使得 $s$ 能被分割成 $k$ 个子串，且每个子串的各个字符都相等。例如，`1011110000010000` 的权值为 $6$。\n\n现有一个二进制数 $n\\in[l,r]$，求 $n$ 转化为 01 字符串（不含前导零）后的权值最小是多少，即，求 $[l,r]$ 中权值最小的 $n$ 的权值。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个整数 $l,r$，以**二进制形式**给出。", "outputFormat": "对于每组数据，输出一行一个整数，表示 $[l,r]$ 中权值最小的二进制数 $n$ 的权值。", "hint": "**【样例解释】**\n\n在第一组测试数据中 $l=3200,r=3500$。可以选择 $n=3327$，其二进制表示为 `110011111111`，权值为 $3$。可以证明在 $[l,r]$ 的数没有更小的权值了。\n\n在第二组测试数据中 $l=1,r=2$。可以选择 $n=1$，其二进制表示为 `1`，权值为 $1$。显然这是最小可能的权值。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$l,r\\le2^{20}-1$。\n\n对于 $50\\%$ 的数据，$l,r\\le2^{5\\times10^3}-1$。\n\n对于另外 $30\\%$ 的数据，保证二进制数 $l$ 和 $r$ 的位数相同。\n\n对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le l\\le r\\le2^{5\\times10^5}-1$，且 $l,r$ 没有前导零。", "locale": "zh-CN"}}}
{"pid": "P12420", "type": "P", "difficulty": 3, "samples": [["1\n1 2 0\n1", "3"], ["3\n7 354 480097\n1 794 0 19 45 45 1\n5 109588 312\n1 16 34 375 47\n1 333 0\n646640", "875\n109951\n646653"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛"], "title": "【MX-X12-T3】「ALFR Round 5」变换 (change)", "background": "原题链接：<https://oier.team/problems/X12C>。", "description": "本题有 $T$ 组测试数据。\n\n有一个长度为 $n$ 的非负整数序列 $a$ 和两个参数 $m,k$。\n\n你可以对序列 $a$ 进行任意次数的操作，对于每次操作，你都需要：\n\n- 选取一个非负整数 $x$ 使得 $x \\ \\& \\ m = x$，选取一个下标 $i \\in [1,n]$，将 $a_i \\gets a_i \\ | \\  x$，然后你需要将 $m \\gets m - x$ 或者花费 $k$ 的代价使得 $m$ 不变。\n\n记你花费的代价为 $s$，你需要求出 $(\\oplus_{i=1}^{n} a_i) - s$ 的最大值。 \n\n其中 $|$ 代表按位或运算，$\\&$ 表示按位与运算，$\\oplus$ 表示按位异或运算。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，三个非负整数 $n,m,k$。\n- 第二行，$n$ 个非负整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组数据，输出一行一个整数表示你的答案。", "hint": "**【样例解释 #1】**\n\n进行操作 $i = 1$，$x = 2$，然后将 $a_1 \\gets a_1 \\ | \\ 2$，然后选择花费 $k = 0$ 的代价将 $m$ 不变，在此之后 $m = 2$，容易发现之后的所有操作不会将答案变大，因此最大值为 $a_1 - s = 3 - 0 = 3$。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^6$，$1 \\le n,\\sum n \\le 10^6$，$0 \\le a_i,m,k \\le 10^9$。\n\n| 子任务编号 | $n \\le$ | $m \\le$ | $k \\le$ | $a_i \\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $10^9$ | $10^9$ | $10^9$ | 无 | $11$ |\n| $2$ | $10^6$ | $0$ | $10^9$ | $10^9$ | 无 | $7$ |\n| $3$ | $10^6$ | $10^9$ | $0$ | $10^9$ | 无 | $17$ |\n| $4$ | $10^6$ | $10^9$ | $10^9$ | $0$ | 无 | $12$ |\n| $5$ | $10$ | $10^6$ | $10^6$ | $10^6$ | $T = 1$ | $13$ |\n| $6$ | $10^3$ | $10^6$ | $10^6$ | $10^6$ | $T = 1$ | $17$ |\n| $7$ | $10^6$ | $10^9$ | $10^9$ | $10^9$ | 无 | $23$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T3】「ALFR Round 5」变换 (change)", "background": "原题链接：<https://oier.team/problems/X12C>。", "description": "本题有 $T$ 组测试数据。\n\n有一个长度为 $n$ 的非负整数序列 $a$ 和两个参数 $m,k$。\n\n你可以对序列 $a$ 进行任意次数的操作，对于每次操作，你都需要：\n\n- 选取一个非负整数 $x$ 使得 $x \\ \\& \\ m = x$，选取一个下标 $i \\in [1,n]$，将 $a_i \\gets a_i \\ | \\  x$，然后你需要将 $m \\gets m - x$ 或者花费 $k$ 的代价使得 $m$ 不变。\n\n记你花费的代价为 $s$，你需要求出 $(\\oplus_{i=1}^{n} a_i) - s$ 的最大值。 \n\n其中 $|$ 代表按位或运算，$\\&$ 表示按位与运算，$\\oplus$ 表示按位异或运算。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，三个非负整数 $n,m,k$。\n- 第二行，$n$ 个非负整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组数据，输出一行一个整数表示你的答案。", "hint": "**【样例解释 #1】**\n\n进行操作 $i = 1$，$x = 2$，然后将 $a_1 \\gets a_1 \\ | \\ 2$，然后选择花费 $k = 0$ 的代价将 $m$ 不变，在此之后 $m = 2$，容易发现之后的所有操作不会将答案变大，因此最大值为 $a_1 - s = 3 - 0 = 3$。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^6$，$1 \\le n,\\sum n \\le 10^6$，$0 \\le a_i,m,k \\le 10^9$。\n\n| 子任务编号 | $n \\le$ | $m \\le$ | $k \\le$ | $a_i \\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $10^9$ | $10^9$ | $10^9$ | 无 | $11$ |\n| $2$ | $10^6$ | $0$ | $10^9$ | $10^9$ | 无 | $7$ |\n| $3$ | $10^6$ | $10^9$ | $0$ | $10^9$ | 无 | $17$ |\n| $4$ | $10^6$ | $10^9$ | $10^9$ | $0$ | 无 | $12$ |\n| $5$ | $10$ | $10^6$ | $10^6$ | $10^6$ | $T = 1$ | $13$ |\n| $6$ | $10^3$ | $10^6$ | $10^6$ | $10^6$ | $T = 1$ | $17$ |\n| $7$ | $10^6$ | $10^9$ | $10^9$ | $10^9$ | 无 | $23$ |", "locale": "zh-CN"}}}
{"pid": "P12421", "type": "P", "difficulty": 5, "samples": [["1\n4 200\n1 2\n2 4\n2 3\n1\n1\n1\n", "? 2\n? 2\n! 2\n"], ["2\n5 200\n5 1\n4 2\n2 3\n2 1\n1\n2 1\n2 0\n1\n6 200\n6 1\n2 1\n4 2\n4 5\n3 2\n2 3\n2 1\n1\n1\n1", "? 2\n? 2\n? 1\n! 1\n? 6\n? 2\n? 4\n? 4\n! 4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["交互题", "Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X12-T4】「ALFR Round 5」游戏", "background": "原题链接：<https://oier.team/problems/X12D>。", "description": "**这是一道交互题。**\n\n有一棵 $n$ 个点的树，树的形态给定，树上有一个隐藏点 $s$，你每次可以给出一个点 $u$，交互库选择将 $s$ 向 $u$ 移动一步（若 $s=u$ 则无事发生），或者返回目前 $u$ 到 $s$ 的距离。交互库会告诉你他选择的操作，如果选择的是操作 $2$ 会告诉你距离。你需要在 $m$ 次询问内求出**目前** $s$ 的位置。\n\n每个测试点中有 $T$ 组测试数据。\n\n交互库不自适应，这意味着询问开始前 $s$ 的位置确定，与你的询问无关。\n\n**【交互方式】**\n\n首先输入一个正整数 $T$ 表示测试数据组数。\n\n接下来 $T$ 组数据，每组数据的第一行输入两个正整数 $n,m$ 分别表示树的点数和询问次数限制，接下来 $n-1$ 行每行两个数 $u,v$ 表示树上存在一条连接 $u,v$ 的边。\n\n接着你需要进行交互，询问格式为 `? u`，其中需要满足 $1 \\leq u \\leq n$，如果你本组数据的询问次数超过 $m$，交互库输出 `-1`，此时你需要立即结束程序否则之后交互库行为未定义。若询问次数未超过限制，交互库输出 `1` 或者 `2 d`，分别表示交互库选择将 $s$ 向 $u$ 移动一步或者告诉你 $s$ 到 $u$ 目前的距离为 $d$。当你确定 $s$ 目前的位置后，输出 `! u` 表示 $s$ 目前在编号为 $u$ 的节点上。如果你的回答是正确的，交互库输出 `1` 并进入下一组测试数据，否则交互库输出 `0`，你需要立即结束程序否则之后交互库行为未定义。\n\n**你需要在你的每次输出后刷新缓冲区。**\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n当你在单个测试点内总询问次数不超过 $\\sum m$ 次时，保证交互库占用时间不超过 $1.5$ s，占用空间不超过 $50$ MiB，也就是说你的程序至少可以使用 $1.5$ s 的时间和 $462$ MiB 的空间。", "inputFormat": "见【**交互方式**】。", "outputFormat": "见【**交互方式**】。", "hint": "**【样例解释 #1】**\n\n对于样例 $1$，初始有 $s=3$，询问两次点 $2$，第一次交互库返回 $1$，并将 $s$ 向点 $2$ 移动一步，$s=2$，第二次询问交互库返回 $1$，$s=2$，所以 $s$ 不发生变化。此时可以确定 $s=2$，回答 $s=2$ 后，交互库返回 $1$ 表示答案正确。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $T \\leq $ | $n \\leq $ | $m = $ | 特殊性质 | 分值 | 子任务依赖 |\n| :-: | :-: | :-: |:-: |:-: | :-: | :-: |\n| $1$ | $500$ | $10$ | $200$ | 无 |$5$ | 无 |\n| $2$ | $10$ | $1000$ | $3n$ | 无 | $13$ | $1$ |\n| $3$ | $10^4$ | $10^5$ | $n-1$ | A | $7$ | 无\n| $4$ | $10^4$ | $10^5$ | $n-1$ | B | $10$ | 无\n| $5$ | $10^4$ | $10^5$ | $3n$ | C | $14$ | 无 |\n| $6$ | $10^4$ | $10^5$ | $2n$ | 无 | $21$ | $1,2,5$ |\n| $7$ | $10^4$ | $10^5$ | $n-1$  | 无 |$30$ | $1,2,3,4,5,6$ |\n\n特殊性质 A：树上每个点度数不大于 $2$。\n\n特殊性质 B：树上只有至多一个点度数大于 $1$。\n\n特殊性质 C：树的生成方式为：对于每个 $2 \\leq i \\leq n$，等概率随机选取 $[1,i)$ 中的一个整数 $x$，将 $x$ 与 $i$ 连边。\n\n对于所有数据，$1 \\leq T \\leq 10^4$，$1 \\leq \\sum n \\leq 10^5$，$m\\geq n-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T4】「ALFR Round 5」游戏", "background": "原题链接：<https://oier.team/problems/X12D>。", "description": "**这是一道交互题。**\n\n有一棵 $n$ 个点的树，树的形态给定，树上有一个隐藏点 $s$，你每次可以给出一个点 $u$，交互库选择将 $s$ 向 $u$ 移动一步（若 $s=u$ 则无事发生），或者返回目前 $u$ 到 $s$ 的距离。交互库会告诉你他选择的操作，如果选择的是操作 $2$ 会告诉你距离。你需要在 $m$ 次询问内求出**目前** $s$ 的位置。\n\n每个测试点中有 $T$ 组测试数据。\n\n交互库不自适应，这意味着询问开始前 $s$ 的位置确定，与你的询问无关。\n\n**【交互方式】**\n\n首先输入一个正整数 $T$ 表示测试数据组数。\n\n接下来 $T$ 组数据，每组数据的第一行输入两个正整数 $n,m$ 分别表示树的点数和询问次数限制，接下来 $n-1$ 行每行两个数 $u,v$ 表示树上存在一条连接 $u,v$ 的边。\n\n接着你需要进行交互，询问格式为 `? u`，其中需要满足 $1 \\leq u \\leq n$，如果你本组数据的询问次数超过 $m$，交互库输出 `-1`，此时你需要立即结束程序否则之后交互库行为未定义。若询问次数未超过限制，交互库输出 `1` 或者 `2 d`，分别表示交互库选择将 $s$ 向 $u$ 移动一步或者告诉你 $s$ 到 $u$ 目前的距离为 $d$。当你确定 $s$ 目前的位置后，输出 `! u` 表示 $s$ 目前在编号为 $u$ 的节点上。如果你的回答是正确的，交互库输出 `1` 并进入下一组测试数据，否则交互库输出 `0`，你需要立即结束程序否则之后交互库行为未定义。\n\n**你需要在你的每次输出后刷新缓冲区。**\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n当你在单个测试点内总询问次数不超过 $\\sum m$ 次时，保证交互库占用时间不超过 $1.5$ s，占用空间不超过 $50$ MiB，也就是说你的程序至少可以使用 $1.5$ s 的时间和 $462$ MiB 的空间。", "inputFormat": "见【**交互方式**】。", "outputFormat": "见【**交互方式**】。", "hint": "**【样例解释 #1】**\n\n对于样例 $1$，初始有 $s=3$，询问两次点 $2$，第一次交互库返回 $1$，并将 $s$ 向点 $2$ 移动一步，$s=2$，第二次询问交互库返回 $1$，$s=2$，所以 $s$ 不发生变化。此时可以确定 $s=2$，回答 $s=2$ 后，交互库返回 $1$ 表示答案正确。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $T \\leq $ | $n \\leq $ | $m = $ | 特殊性质 | 分值 | 子任务依赖 |\n| :-: | :-: | :-: |:-: |:-: | :-: | :-: |\n| $1$ | $500$ | $10$ | $200$ | 无 |$5$ | 无 |\n| $2$ | $10$ | $1000$ | $3n$ | 无 | $13$ | $1$ |\n| $3$ | $10^4$ | $10^5$ | $n-1$ | A | $7$ | 无\n| $4$ | $10^4$ | $10^5$ | $n-1$ | B | $10$ | 无\n| $5$ | $10^4$ | $10^5$ | $3n$ | C | $14$ | 无 |\n| $6$ | $10^4$ | $10^5$ | $2n$ | 无 | $21$ | $1,2,5$ |\n| $7$ | $10^4$ | $10^5$ | $n-1$  | 无 |$30$ | $1,2,3,4,5,6$ |\n\n特殊性质 A：树上每个点度数不大于 $2$。\n\n特殊性质 B：树上只有至多一个点度数大于 $1$。\n\n特殊性质 C：树的生成方式为：对于每个 $2 \\leq i \\leq n$，等概率随机选取 $[1,i)$ 中的一个整数 $x$，将 $x$ 与 $i$ 连边。\n\n对于所有数据，$1 \\leq T \\leq 10^4$，$1 \\leq \\sum n \\leq 10^5$，$m\\geq n-1$。", "locale": "zh-CN"}}}
{"pid": "P12422", "type": "P", "difficulty": 5, "samples": [["2\nabcaabc 2\nabc\nab\nabaabab 3\nab\naa\naba\n", "Yes\nNo\nYes\nNo\nYes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X12-T5】「ALFR Round 5」Another string problem", "background": "原题链接：<https://oier.team/problems/X12E>。\n\n---\n\n决（け）して逃（に）げない怖（こわ）くはないから\n\n目（め）を开（あ）け弱（よわ）さをかき消（け）すんだ", "description": "我们定义 $S\\mid T$ 为：设 $k=\\lfloor |T|/|S| \\rfloor$，则 $k$ 个 $S$ 连起来在 $T$ 中以子序列出现过。例如 $S=\\textsf{ab},T=\\textsf{abcab}$，则 $S\\mid T$，$T$ 中出现的 $S$ 有 $\\underline{\\textsf{ab}}\\textsf c{\\underline{\\textsf{ab}}}$。\n\n对于 $t$ 组测试数据，给定一个 $S$ 和正整数 $q$，$q$ 次询问：\n\n- 给定 $T_i$，问是否 $T_i\\mid S$。如果 $T_i\\mid S$，输出 `Yes`，否则输出 `No`。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $t$，表示数据组数。对于每组数据：\n\n- 第一行，一个字符串 $S$ 和一个正整数 $q$。\n- 接下来 $q$ 行，每行一个字符串 $T_i$。\n\n保证 $S,T_i$ 均由小写英文字符（`a` 到 `z`）组成。", "outputFormat": "输出 $q$ 行，第 $i$ 行为第 $i$ 组测试数据的答案（`Yes` 或 `No`）。", "hint": "**【样例解释】**\n\n第一组测试数据中，$T=\\textsf{abc}$ 时可以在 $S$ 种寻找到 $\\textsf{abcabc}$ 作为子序列，具体的，$S$ 种出现的 $T$ 有 $\\underline{\\textsf{abc}}\\textsf a{\\underline{\\textsf{abc}}}$。而 $T=\\textsf{ab}$ 时 $\\textsf{ababab}$ 不是 $S$ 的子序列。\n\n第二组测试数据中，第一、三个询问分别有 $\\underline{\\textsf{ab}}\\textsf a{\\underline{\\textsf{abab}}}$、$\\underline{\\textsf{aba}} {\\underline{\\textsf{aba}}}\\textsf b$。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 2\\times 10^5$，$\\lvert S\\rvert,q,\\lvert T_i\\rvert\\ge 1$，$\\sum \\lvert S\\rvert\\le 2\\times 10^5$，$\\sum q\\le 2\\times 10^5$，$\\sum \\sum \\lvert T_i\\rvert\\le 4\\times 10^5$，并且 $|T_i|\\le |S|$。$S,T_i$ 均由小写英文字符（`a` 到 `z`）组成。\n\n| 子任务 | $\\sum \\lvert S\\rvert\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2\\times 10^5$ | $\\lvert S\\rvert\\le 10$ | $3$ |\n| $2$ | $3\\times 10^3$ | 无 | $17$ |\n| $3$ | $2\\times 10^5$ | 数据随机$^†$ | $2$ | \n| $4$ | $2\\times 10^5$ | $S$ 中不同字符最多 $1$ 种 | $8$ |\n| $5$ | $2\\times 10^5$ | $S$ 中不同字符最多 $2$ 种 | $15$ |\n| $6$ | $10^5$ | 无 | $20$ |\n| $7$ | $2\\times 10^5$ | 无 | $35$ |\n\n$†$：并非完全均匀随机字符，具体见【**子任务 3 数据随机方式**】。\n\n**【子任务 3 数据随机方式】**\n\n下面是造“数据随机”的部分分的代码（因为 `generator` 较长，这里是所有有关片段）：\n\n```cpp\nmt19937 rng((unsigned long long) new char);\n\nint rnd_l(int l,int r){\n\treturn rng()%(r-l+1)+l;\n}\n\nchar rnd(vector<int> v){ // 0~25 权重 \n\tint sum=0;\n\tfor (auto u : v) sum+=u;\n\tint r=rng()%(sum)+1,c=0;\n\tsum=0;\n\tfor (auto u : v){\n\t\tif (sum+u>=r) return c+'a';\n\t\tc++;\n\t\tsum+=u;\n\t}\n}\n\nvector<int> pl;\n\nvoid rnd_g(){\n\tstring s=rnd_s(pl,n);\n\tcout<<s<<\" \"<<q<<endl;\n\tstring t=rnd_s(pl,n);\n\tvector<int> ct=rnd_v(n,q);\n\tct.push_back(n);\n\tfor (int i=1,pr=0; i<=q; i++){\n\t\tcout<<t.substr(pr,ct[i-1]-pr)<<endl;\n\t\tpr=ct[i-1];\n\t}\n}\n\nvector<int> rnd_v(int fw,int ti){ // 不可重复的划分 \n\tvector<int> ct;\n\tct.push_back(0);\n\tfor (int i=1,cr=0; i<ti; i++){\n\t\tct.push_back(rnd_l(cr+1,fw-(ti-i)));\n\t\tcr=ct.back();\n\t}\n\treturn ct;\n}\n\nfor (int i=0; i<26; i++) pl.push_back(rnd_l(5,15));\n```\n\n需要注意的是，`rnd` 函数并非均匀随机，是按照随机生成的权重 `pl` 随机 $a\\sim z$ 的（即 $c$ 的概率为 $\\frac{pl_c}{\\sum pl_i}$）。`pl` 每一个数据点都会重新生成。\n\n这个代码中，$n=|S|,q$ 是数据范围内给定的数。随机的方式如下：\n\n- $q\\in [1,n]$，均匀随机。\n\n- 按照 `rnd` 函数随机生成一个 $S$ 字符串和 $T$ 字符串，长度均为 $n$。\n\n- 按照 `rnd_v` 函数随机一个 $T$ 的分割，一共 $q-1$ 个分割点，分成 $q$ 段，分别为 $T_1\\sim T_q$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T5】「ALFR Round 5」Another string problem", "background": "原题链接：<https://oier.team/problems/X12E>。\n\n---\n\n决（け）して逃（に）げない怖（こわ）くはないから\n\n目（め）を开（あ）け弱（よわ）さをかき消（け）すんだ", "description": "我们定义 $S\\mid T$ 为：设 $k=\\lfloor |T|/|S| \\rfloor$，则 $k$ 个 $S$ 连起来在 $T$ 中以子序列出现过。例如 $S=\\textsf{ab},T=\\textsf{abcab}$，则 $S\\mid T$，$T$ 中出现的 $S$ 有 $\\underline{\\textsf{ab}}\\textsf c{\\underline{\\textsf{ab}}}$。\n\n对于 $t$ 组测试数据，给定一个 $S$ 和正整数 $q$，$q$ 次询问：\n\n- 给定 $T_i$，问是否 $T_i\\mid S$。如果 $T_i\\mid S$，输出 `Yes`，否则输出 `No`。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $t$，表示数据组数。对于每组数据：\n\n- 第一行，一个字符串 $S$ 和一个正整数 $q$。\n- 接下来 $q$ 行，每行一个字符串 $T_i$。\n\n保证 $S,T_i$ 均由小写英文字符（`a` 到 `z`）组成。", "outputFormat": "输出 $q$ 行，第 $i$ 行为第 $i$ 组测试数据的答案（`Yes` 或 `No`）。", "hint": "**【样例解释】**\n\n第一组测试数据中，$T=\\textsf{abc}$ 时可以在 $S$ 种寻找到 $\\textsf{abcabc}$ 作为子序列，具体的，$S$ 种出现的 $T$ 有 $\\underline{\\textsf{abc}}\\textsf a{\\underline{\\textsf{abc}}}$。而 $T=\\textsf{ab}$ 时 $\\textsf{ababab}$ 不是 $S$ 的子序列。\n\n第二组测试数据中，第一、三个询问分别有 $\\underline{\\textsf{ab}}\\textsf a{\\underline{\\textsf{abab}}}$、$\\underline{\\textsf{aba}} {\\underline{\\textsf{aba}}}\\textsf b$。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 2\\times 10^5$，$\\lvert S\\rvert,q,\\lvert T_i\\rvert\\ge 1$，$\\sum \\lvert S\\rvert\\le 2\\times 10^5$，$\\sum q\\le 2\\times 10^5$，$\\sum \\sum \\lvert T_i\\rvert\\le 4\\times 10^5$，并且 $|T_i|\\le |S|$。$S,T_i$ 均由小写英文字符（`a` 到 `z`）组成。\n\n| 子任务 | $\\sum \\lvert S\\rvert\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2\\times 10^5$ | $\\lvert S\\rvert\\le 10$ | $3$ |\n| $2$ | $3\\times 10^3$ | 无 | $17$ |\n| $3$ | $2\\times 10^5$ | 数据随机$^†$ | $2$ | \n| $4$ | $2\\times 10^5$ | $S$ 中不同字符最多 $1$ 种 | $8$ |\n| $5$ | $2\\times 10^5$ | $S$ 中不同字符最多 $2$ 种 | $15$ |\n| $6$ | $10^5$ | 无 | $20$ |\n| $7$ | $2\\times 10^5$ | 无 | $35$ |\n\n$†$：并非完全均匀随机字符，具体见【**子任务 3 数据随机方式**】。\n\n**【子任务 3 数据随机方式】**\n\n下面是造“数据随机”的部分分的代码（因为 `generator` 较长，这里是所有有关片段）：\n\n```cpp\nmt19937 rng((unsigned long long) new char);\n\nint rnd_l(int l,int r){\n\treturn rng()%(r-l+1)+l;\n}\n\nchar rnd(vector<int> v){ // 0~25 权重 \n\tint sum=0;\n\tfor (auto u : v) sum+=u;\n\tint r=rng()%(sum)+1,c=0;\n\tsum=0;\n\tfor (auto u : v){\n\t\tif (sum+u>=r) return c+'a';\n\t\tc++;\n\t\tsum+=u;\n\t}\n}\n\nvector<int> pl;\n\nvoid rnd_g(){\n\tstring s=rnd_s(pl,n);\n\tcout<<s<<\" \"<<q<<endl;\n\tstring t=rnd_s(pl,n);\n\tvector<int> ct=rnd_v(n,q);\n\tct.push_back(n);\n\tfor (int i=1,pr=0; i<=q; i++){\n\t\tcout<<t.substr(pr,ct[i-1]-pr)<<endl;\n\t\tpr=ct[i-1];\n\t}\n}\n\nvector<int> rnd_v(int fw,int ti){ // 不可重复的划分 \n\tvector<int> ct;\n\tct.push_back(0);\n\tfor (int i=1,cr=0; i<ti; i++){\n\t\tct.push_back(rnd_l(cr+1,fw-(ti-i)));\n\t\tcr=ct.back();\n\t}\n\treturn ct;\n}\n\nfor (int i=0; i<26; i++) pl.push_back(rnd_l(5,15));\n```\n\n需要注意的是，`rnd` 函数并非均匀随机，是按照随机生成的权重 `pl` 随机 $a\\sim z$ 的（即 $c$ 的概率为 $\\frac{pl_c}{\\sum pl_i}$）。`pl` 每一个数据点都会重新生成。\n\n这个代码中，$n=|S|,q$ 是数据范围内给定的数。随机的方式如下：\n\n- $q\\in [1,n]$，均匀随机。\n\n- 按照 `rnd` 函数随机生成一个 $S$ 字符串和 $T$ 字符串，长度均为 $n$。\n\n- 按照 `rnd_v` 函数随机一个 $T$ 的分割，一共 $q-1$ 个分割点，分成 $q$ 段，分别为 $T_1\\sim T_q$。", "locale": "zh-CN"}}}
{"pid": "P12423", "type": "P", "difficulty": 6, "samples": [["3 4\n4 3 1\n1 3\n3 2\n2 1 2\n1 2 3\n1 1 3\n3 1 2\n", "3\n1\n4\n1\n"], ["7 3\n1 -9 1 -9 8 -1 0\n1 2\n2 3\n2 4\n4 5\n5 6\n6 7\n1 3 3\n1 2 7\n1 1 2", "1\n-19\nImpossible"], ["5 5\n6 1 4 -6 8\n2 4\n1 5\n3 4\n5 4\n5 2 3\n1 2 3\n5 3 3\n3 1 5\n2 5 5\n", "-6\n-6\n4\n-2\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X12-T6】「ALFR Round 5」Coloring Nodes", "background": "原题链接：<https://oier.team/problems/X12F>。", "description": "给定一棵 $n$ 个点的树，初始时所有结点为白色。\n\n你可以花费 $w_u$ 的代价将结点 $u$ 染黑。\n\n有 $q$ 次询问，每次询问形如 `u l r`。对于每次询问，你需要花费尽可能小的代价，将一些结点染黑，使得点 $u$ 到**叶结点** $v$ 的简单路径上存在黑色结点，**当且仅当** $l \\le v \\le r$，并输出最小代价。", "inputFormat": "第一行，两个整数 $n, q$，表示结点数量和询问个数。 \n\n第二行，$n$ 个整数 $w_1, w_2, \\ldots, w_n$，表示将每个结点染黑的代价。  \n\n接下来 $n-1$ 行，每行两个整数 $u, v$，表示一条树边。 \n\n接下来 $q$ 行，每行三个整数 $u, l, r$，表示一次询问。", "outputFormat": "对于每个询问，输出一行：\n\n若存在满足条件的染色方案，输出最小代价；否则输出 `Impossible`。", "hint": "**【样例解释 #1】**  \n\n该样例满足特殊性质 A。  \n\n对于第一次询问，染黑 $2$ 号点，最小代价为 $3$；  \n\n对于第二次询问，染黑 $3$ 号点，最小代价为 $1$；\n\n对于第三次询问，染黑 $1$ 号点，最小代价为 $4$；\n\n对于第四次询问，染黑 $3$ 号点，最小代价为 $1$。\n\n**【样例解释 #2】**  \n\n该样例满足特殊性质 B。\n\n对于第一次询问，染黑 $3$ 号点，最小代价为 $1$； \n\n对于第二次询问，染黑 $2,4,6,7$ 号点，最小代价为 $-19$；  \n\n对于第三次询问，可证明没有可行的染色方案。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\le n, q \\le 2 \\times 10^5$，$|w_u| \\le 10^9$，$1 \\le u, v \\le n$，$1 \\le l \\le r \\le n$。\n\n|子任务编号|$n \\le$|$q \\le$|特殊性质|分值|子任务依赖|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$20$|$20$|无|$5$|-|\n|$2$|$20$|$2 \\times 10^5$|无|$5$|$1$|\n|$3$|$8000$|$8000$|A|$5$|-|\n|$4$|$8000$|$8000$|无|$5$|$3$|\n|$5$|$8000$|$2 \\times 10^5$|A|$10$|$3$|\n|$6$|$8000$|$2 \\times 10^5$|无|$10$|$2, 4, 5$|\n|$7$|$2 \\times 10^5$|$2 \\times 10^5$|AB|$10$|-|\n|$8$|$2 \\times 10^5$|$2 \\times 10^5$|A|$15$|$5, 7$|\n|$9$|$2 \\times 10^5$|$2 \\times 10^5$|B|$15$|$7$|\n|$10$|$2 \\times 10^5$|$2 \\times 10^5$|无|$20$|$6, 8, 9$|\n\n特殊性质 A：$w_u \\ge 0$。  \n\n特殊性质 B：对于所有询问，$u=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T6】「ALFR Round 5」Coloring Nodes", "background": "原题链接：<https://oier.team/problems/X12F>。", "description": "给定一棵 $n$ 个点的树，初始时所有结点为白色。\n\n你可以花费 $w_u$ 的代价将结点 $u$ 染黑。\n\n有 $q$ 次询问，每次询问形如 `u l r`。对于每次询问，你需要花费尽可能小的代价，将一些结点染黑，使得点 $u$ 到**叶结点** $v$ 的简单路径上存在黑色结点，**当且仅当** $l \\le v \\le r$，并输出最小代价。", "inputFormat": "第一行，两个整数 $n, q$，表示结点数量和询问个数。 \n\n第二行，$n$ 个整数 $w_1, w_2, \\ldots, w_n$，表示将每个结点染黑的代价。  \n\n接下来 $n-1$ 行，每行两个整数 $u, v$，表示一条树边。 \n\n接下来 $q$ 行，每行三个整数 $u, l, r$，表示一次询问。", "outputFormat": "对于每个询问，输出一行：\n\n若存在满足条件的染色方案，输出最小代价；否则输出 `Impossible`。", "hint": "**【样例解释 #1】**  \n\n该样例满足特殊性质 A。  \n\n对于第一次询问，染黑 $2$ 号点，最小代价为 $3$；  \n\n对于第二次询问，染黑 $3$ 号点，最小代价为 $1$；\n\n对于第三次询问，染黑 $1$ 号点，最小代价为 $4$；\n\n对于第四次询问，染黑 $3$ 号点，最小代价为 $1$。\n\n**【样例解释 #2】**  \n\n该样例满足特殊性质 B。\n\n对于第一次询问，染黑 $3$ 号点，最小代价为 $1$； \n\n对于第二次询问，染黑 $2,4,6,7$ 号点，最小代价为 $-19$；  \n\n对于第三次询问，可证明没有可行的染色方案。\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\le n, q \\le 2 \\times 10^5$，$|w_u| \\le 10^9$，$1 \\le u, v \\le n$，$1 \\le l \\le r \\le n$。\n\n|子任务编号|$n \\le$|$q \\le$|特殊性质|分值|子任务依赖|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$20$|$20$|无|$5$|-|\n|$2$|$20$|$2 \\times 10^5$|无|$5$|$1$|\n|$3$|$8000$|$8000$|A|$5$|-|\n|$4$|$8000$|$8000$|无|$5$|$3$|\n|$5$|$8000$|$2 \\times 10^5$|A|$10$|$3$|\n|$6$|$8000$|$2 \\times 10^5$|无|$10$|$2, 4, 5$|\n|$7$|$2 \\times 10^5$|$2 \\times 10^5$|AB|$10$|-|\n|$8$|$2 \\times 10^5$|$2 \\times 10^5$|A|$15$|$5, 7$|\n|$9$|$2 \\times 10^5$|$2 \\times 10^5$|B|$15$|$7$|\n|$10$|$2 \\times 10^5$|$2 \\times 10^5$|无|$20$|$6, 8, 9$|\n\n特殊性质 A：$w_u \\ge 0$。  \n\n特殊性质 B：对于所有询问，$u=1$。", "locale": "zh-CN"}}}
{"pid": "P12424", "type": "P", "difficulty": 7, "samples": [["2\n5 7\n9 8", "4\n6"], ["7\n1 1\n4 5\n1 4\n3 3\n2 7\n114514430240 191981099899\n90102 240520", "1\n3\n1\n2\n2\n92804190717\n80103"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X12-T7】「ALFR Round 5」地铁（Easy Version）", "background": "原题链接：<https://oier.team/problems/X12G>。\n\n---\n\n**本题与 Hard Version 的区别在于数据范围和时间限制不同，且本题不需要输出构造方案。本题满分为 $50$ 分。**", "description": "为了方便市民出行，缓解地面上的道路拥堵问题，S 市决定在地底下建一些地铁。\n\n根据城市规划，S 市的地下网络将由 $n$ 条横向通道和 $m$ 条纵向通道构成。地铁站将设置在所有横向通道与纵向通道的交叉处，共 $n\\times m$ 处。\n\n地下网络的所有站点都需要被地铁线路覆盖，地铁线路之间可以有重叠部分。\n\n每一条地铁线路都不应「绕路」。如果一条地铁线路，在从其中一个起点站开到终点站的过程中，存在两段列车朝相反方向行驶的平行道路，则我们称这条地铁线路是「绕路」的。\n\n在下图所示的地下网络中，灰线代表地下通道（深灰色的格子为地铁站，即道路交叉处）。红、绿、蓝线所代表的地铁线路没有「绕路」，而黄、橙、紫线所代表的地铁线路「绕路」了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kyzwyen0.png)\n\n此外，地铁线路网必须是连通的。也就是说，无论从哪个地铁站出发乘坐地铁，经过若干次换乘（可以不换乘），都一定可以到达其它所有地铁站。\n\n因为盾构一条地铁线路的流程十分麻烦，S 市不想要建造太多的地铁线路。现在，你知道了 S 市的地下网络大小为 $n\\times m$，你想知道 S 市最少要建几条地铁线路。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个正整数 $n,m$。", "outputFormat": "对于每组数据，输出一行一个数，表示 S 市最少需要建造的地铁线路数量。", "hint": "**【样例解释 #1】**\n\n第一组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要四条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ed95ib4j.png?x-oss-process=image/resize,m_lfit,h_450,w_600)\n\n第二组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要六条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h9xxiqum.png?x-oss-process=image/resize,m_lfit,h_680,w_900)\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le T\\le10^6$，$1\\le n,m\\le10^{18}$。\n\n|子任务|分值|$T$|$n,m$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$T\\le10$|$n,m\\le10$|\n|$2$|$5$|$T\\le10$|$n=m\\le10^5$|\n|$3$|$5$|$T\\le10$|$n,m\\le10^5$|\n|$4$|$5$|$T\\le10^3$|$n,m\\le10^5$|\n|$5$|$10$|$T\\le10^3$|$n,m\\le10^8$|\n|$6$|$20$|$T\\le10^6$|$n,m\\le10^{18}$|\n\n**本题输入量较大，请使用较快的 I/O 方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T7】「ALFR Round 5」地铁（Easy Version）", "background": "原题链接：<https://oier.team/problems/X12G>。\n\n---\n\n**本题与 Hard Version 的区别在于数据范围和时间限制不同，且本题不需要输出构造方案。本题满分为 $50$ 分。**", "description": "为了方便市民出行，缓解地面上的道路拥堵问题，S 市决定在地底下建一些地铁。\n\n根据城市规划，S 市的地下网络将由 $n$ 条横向通道和 $m$ 条纵向通道构成。地铁站将设置在所有横向通道与纵向通道的交叉处，共 $n\\times m$ 处。\n\n地下网络的所有站点都需要被地铁线路覆盖，地铁线路之间可以有重叠部分。\n\n每一条地铁线路都不应「绕路」。如果一条地铁线路，在从其中一个起点站开到终点站的过程中，存在两段列车朝相反方向行驶的平行道路，则我们称这条地铁线路是「绕路」的。\n\n在下图所示的地下网络中，灰线代表地下通道（深灰色的格子为地铁站，即道路交叉处）。红、绿、蓝线所代表的地铁线路没有「绕路」，而黄、橙、紫线所代表的地铁线路「绕路」了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kyzwyen0.png)\n\n此外，地铁线路网必须是连通的。也就是说，无论从哪个地铁站出发乘坐地铁，经过若干次换乘（可以不换乘），都一定可以到达其它所有地铁站。\n\n因为盾构一条地铁线路的流程十分麻烦，S 市不想要建造太多的地铁线路。现在，你知道了 S 市的地下网络大小为 $n\\times m$，你想知道 S 市最少要建几条地铁线路。", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个正整数 $n,m$。", "outputFormat": "对于每组数据，输出一行一个数，表示 S 市最少需要建造的地铁线路数量。", "hint": "**【样例解释 #1】**\n\n第一组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要四条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ed95ib4j.png?x-oss-process=image/resize,m_lfit,h_450,w_600)\n\n第二组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要六条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h9xxiqum.png?x-oss-process=image/resize,m_lfit,h_680,w_900)\n\n**【数据范围】**\n\n**本题使用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le T\\le10^6$，$1\\le n,m\\le10^{18}$。\n\n|子任务|分值|$T$|$n,m$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$T\\le10$|$n,m\\le10$|\n|$2$|$5$|$T\\le10$|$n=m\\le10^5$|\n|$3$|$5$|$T\\le10$|$n,m\\le10^5$|\n|$4$|$5$|$T\\le10^3$|$n,m\\le10^5$|\n|$5$|$10$|$T\\le10^3$|$n,m\\le10^8$|\n|$6$|$20$|$T\\le10^6$|$n,m\\le10^{18}$|\n\n**本题输入量较大，请使用较快的 I/O 方式。**", "locale": "zh-CN"}}}
{"pid": "P12425", "type": "P", "difficulty": 7, "samples": [["2\n5 7\n9 8", "4\n1 1 10 RRRDDDDRRR\n5 7 10 UULLLLLLUU\n5 1 10 URUURRRURR\n1 7 10 DLDDLLLDLL\n6\n1 1 15 RRRDDRRRDDDDRDD\n1 1 14 DDRRDDRRRDDDRD\n5 1 11 RDDDRRRDRRR\n7 1 12 RRURUURRUURR\n9 1 15 RRRUURURRRUUUUU\n9 1 15 UUUUURUURRRURRR"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X12-T7+】「ALFR Round 5」地铁（Hard Version）", "background": "原题链接：<https://oier.team/problems/X12H>。\n\n---\n\n**本题与 Easy Version 的区别在于数据范围和时间限制不同，且本题需要输出构造方案。**", "description": "为了方便市民出行，缓解地面上的道路拥堵问题，S 市决定在地底下建一些地铁。\n\n根据城市规划，S 市的地下网络将由 $n$ 条横向通道和 $m$ 条纵向通道构成。地铁站将设置在所有横向通道与纵向通道的交叉处，共 $n\\times m$ 处。\n\n地下网络的所有站点都需要被地铁线路覆盖，地铁线路之间可以有重叠部分。\n\n每一条地铁线路都不应「绕路」。如果一条地铁线路，在从其中一个起点站开到终点站的过程中，存在两段列车朝相反方向行驶的平行道路，则我们称这条地铁线路是「绕路」的。\n\n在下图所示的地下网络中，灰线代表地下通道（深灰色的格子为地铁站，即道路交叉处）。红、绿、蓝线所代表的地铁线路没有「绕路」，而黄、橙、紫线所代表的地铁线路「绕路」了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kyzwyen0.png)\n\n此外，地铁线路网必须是连通的。也就是说，无论从哪个地铁站出发乘坐地铁，经过若干次换乘（可以不换乘），都一定可以到达其它所有地铁站。\n\n因为盾构一条地铁线路的流程十分麻烦，S 市不想要建造太多的地铁线路。现在，你知道了 S 市的地下网络大小为 $n\\times m$，请你求出 S 市最少要建几条地铁线路，并给出一个方案。如果你求出的数不是最少需要的地铁线路数量，也可以获得一部分分数。**具体评分标准请参照题目最后面。**", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个正整数 $n,m$。", "outputFormat": "按顺序输出每组数据的答案。对于每组数据：\n\n- 第一行输出一个整数 $ans$，表示 S 市最少需要建造的地铁线路数量。\n- 接下来输出 $ans$ 行，每一行输出三个正整数和一个非空字符串 $x,y,l,s$，表示一条地铁线路。其中，$x,y$ 表示地铁的一端位于第 $x$ 行第 $y$ 列，$l$ 表示 $s$ 的长度（即该地铁线路有 $l+1$ 个站点），$s$ 由 `U`，`D`，`L`，`R` 中的两个互相垂直的方向组成，表示这条地铁线路从起点（第 $x$ 行第 $y$ 列）开始到终点的过程中，每经过一个路口后要去往哪个方向。", "hint": "**【样例解释】**\n\n第一组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要四条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ed95ib4j.png?x-oss-process=image/resize,m_lfit,h_450,w_600)\n\n第二组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要六条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h9xxiqum.png?x-oss-process=image/resize,m_lfit,h_680,w_900)\n\n**【数据范围】**\n\n**具体评分标准请参照题目最后面。**\n\n对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n,m\\le10^3$，$nm>1$。\n\n|子任务|测试点个数|总分|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$10$|$n,m\\le10$|\n|$2$|$5$|$5$|$m\\ge n^2$|\n|$3$|$5$|$15$|$n=m$|\n|$4$|$6$|$30$|$n\\le10$|\n|$5$|$10$|$40$|无|\n\n其中 Subtask 5 保证第 $k(k\\in[1,10])$ 个测试点满足 $\\max(\\frac n m,\\frac m n)\\in[arr_{k-1},arr_{k})$，$arr$ 的值如下：\n\n| $x$ | $0$ | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ | $9$ | $10$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $arr_x$ | $1$ | $\\frac{11}{10}$ | $\\frac{6}{5}$ | $\\frac{4}{3}$ | $\\frac{3}{2}$ | $\\frac{5}{3}$ | $2$ | $3$ | $5$ | $10$ | $1000$ |\n\n**【评分标准】**\n\n**每个子任务得分为该子任务各个测试点得分向下取整之和。每个测试点得分为该测试点每组测试数据得分的平均值。**\n\n每组测试数据评分标准如下：\n\n- 如果程序未按格式要求输出或输出不符合题意，将获得 $0\\%$ 的分数。一个测试点中，只要有一个测试数据因此获得 $0\\%$ 的分数，则整个测试点都不会得分。\n  - 未按格式要求输出的例子：没有另外输出 $ans$ 行，$s$ 的长度不为 $l$ 等。\n  - 输出不符合题意的例子：有地铁线路「绕路」或超出 $n\\times m$ 的范围了，所有地铁线路并没有连通，有路口没有被任何线路经过等。\n- 否则，若程序在本测试数据输出了一个答案 $ans$ 并正确构造出了一个对应的方案，设 $X=\\min(n,m)+1$，$A$ 为该测试数据的正确答案，即最少需要的地铁线路数量，则将会获得 $\\lfloor-\\frac{100}{X-A}ans+\\frac{100X}{X-A}\\rfloor\\%$ 的分数。除去下取整，这是一个经过 $(A,100\\%)$ 和 $(X,0\\%)$ 的一次函数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X12-T7+】「ALFR Round 5」地铁（Hard Version）", "background": "原题链接：<https://oier.team/problems/X12H>。\n\n---\n\n**本题与 Easy Version 的区别在于数据范围和时间限制不同，且本题需要输出构造方案。**", "description": "为了方便市民出行，缓解地面上的道路拥堵问题，S 市决定在地底下建一些地铁。\n\n根据城市规划，S 市的地下网络将由 $n$ 条横向通道和 $m$ 条纵向通道构成。地铁站将设置在所有横向通道与纵向通道的交叉处，共 $n\\times m$ 处。\n\n地下网络的所有站点都需要被地铁线路覆盖，地铁线路之间可以有重叠部分。\n\n每一条地铁线路都不应「绕路」。如果一条地铁线路，在从其中一个起点站开到终点站的过程中，存在两段列车朝相反方向行驶的平行道路，则我们称这条地铁线路是「绕路」的。\n\n在下图所示的地下网络中，灰线代表地下通道（深灰色的格子为地铁站，即道路交叉处）。红、绿、蓝线所代表的地铁线路没有「绕路」，而黄、橙、紫线所代表的地铁线路「绕路」了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kyzwyen0.png)\n\n此外，地铁线路网必须是连通的。也就是说，无论从哪个地铁站出发乘坐地铁，经过若干次换乘（可以不换乘），都一定可以到达其它所有地铁站。\n\n因为盾构一条地铁线路的流程十分麻烦，S 市不想要建造太多的地铁线路。现在，你知道了 S 市的地下网络大小为 $n\\times m$，请你求出 S 市最少要建几条地铁线路，并给出一个方案。如果你求出的数不是最少需要的地铁线路数量，也可以获得一部分分数。**具体评分标准请参照题目最后面。**", "inputFormat": "本题有多组测试数据，第一行输入一个整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个正整数 $n,m$。", "outputFormat": "按顺序输出每组数据的答案。对于每组数据：\n\n- 第一行输出一个整数 $ans$，表示 S 市最少需要建造的地铁线路数量。\n- 接下来输出 $ans$ 行，每一行输出三个正整数和一个非空字符串 $x,y,l,s$，表示一条地铁线路。其中，$x,y$ 表示地铁的一端位于第 $x$ 行第 $y$ 列，$l$ 表示 $s$ 的长度（即该地铁线路有 $l+1$ 个站点），$s$ 由 `U`，`D`，`L`，`R` 中的两个互相垂直的方向组成，表示这条地铁线路从起点（第 $x$ 行第 $y$ 列）开始到终点的过程中，每经过一个路口后要去往哪个方向。", "hint": "**【样例解释】**\n\n第一组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要四条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ed95ib4j.png?x-oss-process=image/resize,m_lfit,h_450,w_600)\n\n第二组数据的构造方案如下图。要覆盖所有深灰色的交叉路口，至少需要六条地铁线路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h9xxiqum.png?x-oss-process=image/resize,m_lfit,h_680,w_900)\n\n**【数据范围】**\n\n**具体评分标准请参照题目最后面。**\n\n对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n,m\\le10^3$，$nm>1$。\n\n|子任务|测试点个数|总分|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$10$|$n,m\\le10$|\n|$2$|$5$|$5$|$m\\ge n^2$|\n|$3$|$5$|$15$|$n=m$|\n|$4$|$6$|$30$|$n\\le10$|\n|$5$|$10$|$40$|无|\n\n其中 Subtask 5 保证第 $k(k\\in[1,10])$ 个测试点满足 $\\max(\\frac n m,\\frac m n)\\in[arr_{k-1},arr_{k})$，$arr$ 的值如下：\n\n| $x$ | $0$ | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ | $9$ | $10$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $arr_x$ | $1$ | $\\frac{11}{10}$ | $\\frac{6}{5}$ | $\\frac{4}{3}$ | $\\frac{3}{2}$ | $\\frac{5}{3}$ | $2$ | $3$ | $5$ | $10$ | $1000$ |\n\n**【评分标准】**\n\n**每个子任务得分为该子任务各个测试点得分向下取整之和。每个测试点得分为该测试点每组测试数据得分的平均值。**\n\n每组测试数据评分标准如下：\n\n- 如果程序未按格式要求输出或输出不符合题意，将获得 $0\\%$ 的分数。一个测试点中，只要有一个测试数据因此获得 $0\\%$ 的分数，则整个测试点都不会得分。\n  - 未按格式要求输出的例子：没有另外输出 $ans$ 行，$s$ 的长度不为 $l$ 等。\n  - 输出不符合题意的例子：有地铁线路「绕路」或超出 $n\\times m$ 的范围了，所有地铁线路并没有连通，有路口没有被任何线路经过等。\n- 否则，若程序在本测试数据输出了一个答案 $ans$ 并正确构造出了一个对应的方案，设 $X=\\min(n,m)+1$，$A$ 为该测试数据的正确答案，即最少需要的地铁线路数量，则将会获得 $\\lfloor-\\frac{100}{X-A}ans+\\frac{100X}{X-A}\\rfloor\\%$ 的分数。除去下取整，这是一个经过 $(A,100\\%)$ 和 $(X,0\\%)$ 的一次函数。", "locale": "zh-CN"}}}
{"pid": "P12426", "type": "P", "difficulty": 6, "samples": [["6\n1 1 2 3 3 3\n1 1 2 2 2\n1 2 2 2\n1 1 2\n1 2\n1", "1 3 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2025", "BalticOI（波罗的海）", "Ad-hoc"], "title": "[BalticOI 2025] BOI acronym", "background": "", "description": "As you certainly know, BOI is an acronym for the name of the Baltic Olympiad in Informatics.\n\nThe organisers find the acronym BOI too easy to pronounce (it forms a single syllable in the English language, after all). Therefore they came up with a new acronym. In order to easily distinguish it from the other regional Olympiads (like CEOI), the new acronym still consists only of characters \"B\", \"O\" and \"I\". Additionally, \"B\" is strictly the most common character in the acronym. That is, there are strictly more occurrences of \"B\" than \"O\", and there are also strictly more occurrences of \"B\" than \"I\".\n\nFor example, acronyms \"OBOIIBBB\" and \"B\" are valid, but \"IBIIBB\", \"BOI\", \"O\" and \"BCB\" are not.\n\nTo make things more exciting, instead of publishing it in full they have only provided some hints. Namely, for each consecutive substring of the new acronym, they gave you the number of occurrences of the most common character in this substring. Note that this character is not necessarily \"B\", and also the most common character is not necessarily unique. Surprisingly, it can be proven that this information is actually enough to recover all the occurrences of \"B\". Can you find them?", "inputFormat": "The first line contains an integer $n$ ($1 \\leq n \\leq 2000$), denoting the length of the new acronym.\n\nThe following $n$ lines describe the hints. The $i$-th line contains $n-i+1$ integers $M_{i,i}, M_{i,i+1}, \\ldots, M_{i,n}$ ($1 \\leq M_{\\ell,r} \\leq n$), where $M_{\\ell,r}$ denotes the number of occurrences of the most common character in the substring that starts at the $\\ell$-th position and ends at the $r$-th position of the acronym. The positions are numbered from 1 to $n$.\n\nYou can assume that there exists at least one valid acronym that is consistent with the given hints.", "outputFormat": "Output one line with the positions of all occurrences of \"B\", in the increasing order, separated by single spaces. Each position must be an integer in the range from 1 to $n$.", "hint": "### Scoring\n\n| Subtask | Constraints | Points |\n| :---: | :---: | :---: |\n| 1 | $n \\leq 10$ | 11 |\n| 2 | The sought acronym contains only characters \"B\" and \"O\". | 12 |\n| 3 | The sought acronym has no two consecutive equal characters. | 10 |\n| 4 | $n \\leq 40$ | 11 |\n| 5 | $n \\leq 500$ | 19 |\n| 6 | No additional constraints. | 37 |", "locale": "en", "translations": {"en": {"title": "[BalticOI 2025] BOI acronym", "background": "", "description": "As you certainly know, BOI is an acronym for the name of the Baltic Olympiad in Informatics.\n\nThe organisers find the acronym BOI too easy to pronounce (it forms a single syllable in the English language, after all). Therefore they came up with a new acronym. In order to easily distinguish it from the other regional Olympiads (like CEOI), the new acronym still consists only of characters \"B\", \"O\" and \"I\". Additionally, \"B\" is strictly the most common character in the acronym. That is, there are strictly more occurrences of \"B\" than \"O\", and there are also strictly more occurrences of \"B\" than \"I\".\n\nFor example, acronyms \"OBOIIBBB\" and \"B\" are valid, but \"IBIIBB\", \"BOI\", \"O\" and \"BCB\" are not.\n\nTo make things more exciting, instead of publishing it in full they have only provided some hints. Namely, for each consecutive substring of the new acronym, they gave you the number of occurrences of the most common character in this substring. Note that this character is not necessarily \"B\", and also the most common character is not necessarily unique. Surprisingly, it can be proven that this information is actually enough to recover all the occurrences of \"B\". Can you find them?", "inputFormat": "The first line contains an integer $n$ ($1 \\leq n \\leq 2000$), denoting the length of the new acronym.\n\nThe following $n$ lines describe the hints. The $i$-th line contains $n-i+1$ integers $M_{i,i}, M_{i,i+1}, \\ldots, M_{i,n}$ ($1 \\leq M_{\\ell,r} \\leq n$), where $M_{\\ell,r}$ denotes the number of occurrences of the most common character in the substring that starts at the $\\ell$-th position and ends at the $r$-th position of the acronym. The positions are numbered from 1 to $n$.\n\nYou can assume that there exists at least one valid acronym that is consistent with the given hints.", "outputFormat": "Output one line with the positions of all occurrences of \"B\", in the increasing order, separated by single spaces. Each position must be an integer in the range from 1 to $n$.", "hint": "### Scoring\n\n| Subtask | Constraints | Points |\n| :---: | :---: | :---: |\n| 1 | $n \\leq 10$ | 11 |\n| 2 | The sought acronym contains only characters \"B\" and \"O\". | 12 |\n| 3 | The sought acronym has no two consecutive equal characters. | 10 |\n| 4 | $n \\leq 40$ | 11 |\n| 5 | $n \\leq 500$ | 19 |\n| 6 | No additional constraints. | 37 |", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2025] BOI acronym", "background": "", "description": "众所周知，BOI 是 Baltic Olympiad in Informatics（波罗的海信息学奥林匹克竞赛）名称的缩写。\n\n主办方认为缩写 BOI 太容易发音（毕竟它在英语中是一个单音节词）。因此，他们提出了一个新的缩写。为了与其他区域性奥林匹克竞赛（如 CEOI）轻松区分，新缩写仍然仅由字符 \"B\"、\"O\" 和 \"I\" 组成。此外，\"B\" 必须是缩写中严格最常见的字符。也就是说，\"B\" 的出现次数严格多于 \"O\"，同时也严格多于 \"I\"。\n\n例如，缩写 \"OBOIIBBB\" 和 \"B\" 是有效的，但 \"IBIIBB\"、\"BOI\"、\"O\" 和 \"BCB\" 不是。\n\n为了让事情更有趣，主办方没有直接公布完整的缩写，而是只提供了一些提示。具体来说，对于新缩写的每个连续子串，他们给出了该子串中最常见字符的出现次数。注意，这个字符不一定是 \"B\"，而且最常见字符也不一定是唯一的。令人惊讶的是，可以证明这些信息实际上足以还原所有 \"B\" 的出现位置。你能找到它们吗？", "inputFormat": "第一行包含一个整数 $n$（$1 \\leq n \\leq 2000$），表示新缩写的长度。\n\n接下来的 $n$ 行描述了提示。第 $i$ 行包含 $n-i+1$ 个整数 $M_{i,i}, M_{i,i+1}, \\ldots, M_{i,n}$（$1 \\leq M_{\\ell,r} \\leq n$），其中 $M_{\\ell,r}$ 表示从缩写的第 $\\ell$ 个位置开始到第 $r$ 个位置结束的子串中最常见字符的出现次数。位置编号从 1 到 $n$。\n\n你可以假设至少存在一个有效的缩写与给定的提示一致。", "outputFormat": "输出一行，包含所有 \"B\" 出现的位置，按递增顺序排列，用单个空格分隔。每个位置必须是 1 到 $n$ 范围内的整数。", "hint": "### 评分\n\n| 子任务 | 限制条件 | 分值 |\n| :---: | :---: | :---: |\n| 1 | $n \\leq 10$ | 11 |\n| 2 | 所求缩写仅包含字符 \"B\" 和 \"O\"。 | 12 |\n| 3 | 所求缩写中没有两个连续的相同字符。 | 10 |\n| 4 | $n \\leq 40$ | 11 |\n| 5 | $n \\leq 500$ | 19 |\n| 6 | 无额外限制。 | 37 |\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
