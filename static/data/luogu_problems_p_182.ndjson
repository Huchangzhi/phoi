{"pid": "P4679", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2\n2 3\n2 4\n1 5\n.#\n..\n#.\n.#\n..\nQ 5 3\nC 1 ##\nQ 4 5\n", "6\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2011", "线段树", "各省省选", "浙江", "树链剖分"], "title": "[ZJOI2011] 道馆之战", "background": "", "description": "口袋妖怪（又名神奇宝贝或宠物小精灵）红/蓝/绿宝石中的水系道馆需要经过三个冰地才能到达馆主的面前，冰地中的每一个冰块都只能经过一次。当一个冰地上的所有冰块都被经过之后，到下一个冰地的楼梯才会被打开。\n\n三个冰地分别如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4tq073ig.png)\n\n当走出第三个冰地之后，就可以与馆主进行道馆战了。馆主发现这个难度太小，导致经常有挑战者能通过，为了加大难度，将道馆分成了$n$个房间，任意两个房间之间均有且仅有一条路径相连，即这$n$个房间构成一个树状结构。每个房间分成了$A$和$B$两个区域，每一区域都是一个薄冰块或者障碍物。每次只能移动到相邻房间的同一类区域（即若你现在在这个房间的$A$区域，那么你只能移动到相邻房间的$A$区域）或这个房间的另一区域。现在挑战者从房间$u$出发，馆主在房间$v$，那么挑战者只能朝接近馆主所在房间的方向过去。一开始挑战者可以在房间$u$的任意一个冰块区域内。如果挑战者踩过的冰块数达到了最大值（即没有一种方案踩过的冰块数更多了），那么当挑战者走到最后一个冰块上时，他会被瞬间传送到馆主面前与馆主进行道馆战。自从馆主修改规则后已经经过了$m$天，每天要么是有一个挑战者来进行挑战，要么就是馆主将某个房间进行了修改。对于每个来的挑战者，你需要计算出他若要和馆主进行战斗需要经过的冰块数。", "inputFormat": "第一行包含两个正整数$n$和$m$。\n\n第$2$行到第$n$行，每行包含两个正整数$x$和$y$，表示一条连接房间$x$和房间$y$的边。房间编号为$1\\cdots n$。\n\n接下来$n$行，每行包含两个字符。第$n+k$行表示房间$k$的两个区域，第一个字符为$A$区域，第二个字符为$B$区域。其中“.”（ASCII码为46）表示是薄冰块，“#”（ASCII码为35）表示是障碍物。\n\n最后的$m$行，每行一个操作：\n\n$C$ $u$ $s$：将房间$u$里的两个区域修改为$s$。\n\n$Q$ $u$ $v$：询问挑战者在房间$u$，馆主在房间$v$时，挑战者能与馆主进行挑战需要踩的冰块数。如果房间$u$的两个区域都是障碍物，那么输出$0$。", "outputFormat": "包含若干行，每行一个整数。即对于输入中的每个询问，依次输出一个答案。", "hint": "测试点$1$~$6$：$n≤1000,m≤10000$\n\n测试点$7$~$15$：$n≤30000,m≤80000$\n\n测试点$16$~$20$：$n≤50000,m≤100000$", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2011] Gym Battle", "background": "", "description": "In Pokémon (also known as Pocket Monsters), in the Water-type Gym in Red/Blue/Green/Emerald, you need to pass through three ice floors to reach the Gym Leader. Each ice block on an ice floor can be stepped on at most once. Only after all ice blocks on the current ice floor have been stepped on will the stairs to the next ice floor open.\n\nThe three ice floors are as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4tq073ig.png)\n\nAfter leaving the third ice floor, you can battle the Gym Leader. The Gym Leader thinks this is too easy and many challengers can pass, so to increase the difficulty, the Gym is divided into $n$ rooms. Between any two rooms there is exactly one path, i.e. these $n$ rooms form a tree structure. Each room is divided into two areas, $A$ and $B$. Each area is either a thin ice block or an obstacle.\n\nEach move can only go to the same type of area in an adjacent room (that is, if you are currently in area $A$ of this room, then you can only move to area $A$ of an adjacent room), or to the other area of the same room.\n\nNow a challenger starts from room $u$, and the Gym Leader is in room $v$. Then the challenger can only move in the direction that gets closer to the room where the Gym Leader is. At the beginning, the challenger may start on either ice area in room $u$. If the number of ice blocks the challenger has stepped on reaches the maximum possible (i.e. there is no strategy that steps on more ice blocks), then when the challenger steps on the last ice block, he will be instantly teleported to the Gym Leader to start the battle.\n\nSince the Gym Leader changed the rules, $m$ days have passed. Each day, either a challenger comes to challenge, or the Gym Leader modifies a certain room. For each challenger, you need to compute how many ice blocks he needs to step on in order to battle the Gym Leader.", "inputFormat": "The first line contains two positive integers $n$ and $m$.\n\nLines $2$ to $n$ each contain two positive integers $x$ and $y$, indicating an edge connecting room $x$ and room $y$. Rooms are numbered $1\\cdots n$.\n\nNext follow $n$ lines, each containing two characters. Line $n+k$ describes the two areas of room $k$: the first character is area $A$ and the second character is area $B$. Here, “.” (ASCII code 46) means a thin ice block, and “#” (ASCII code 35) means an obstacle.\n\nFinally, the next $m$ lines each describe one operation:\n\n$C$ $u$ $s$: modify the two areas in room $u$ to $s$.\n\n$Q$ $u$ $v$: query the number of ice blocks the challenger needs to step on to battle the Gym Leader, when the challenger is in room $u$ and the Gym Leader is in room $v$. If both areas in room $u$ are obstacles, output $0$.", "outputFormat": "Output multiple lines, each containing one integer. That is, for each query in the input, output the answer in order.", "hint": "Constraints:\n\nTest points $1$~$6$: $n \\le 1000, m \\le 10000$.\n\nTest points $7$~$15$: $n \\le 30000, m \\le 80000$.\n\nTest points $16$~$20$: $n \\le 50000, m \\le 100000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2011] 道馆之战", "background": "", "description": "口袋妖怪（又名神奇宝贝或宠物小精灵）红/蓝/绿宝石中的水系道馆需要经过三个冰地才能到达馆主的面前，冰地中的每一个冰块都只能经过一次。当一个冰地上的所有冰块都被经过之后，到下一个冰地的楼梯才会被打开。\n\n三个冰地分别如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4tq073ig.png)\n\n当走出第三个冰地之后，就可以与馆主进行道馆战了。馆主发现这个难度太小，导致经常有挑战者能通过，为了加大难度，将道馆分成了$n$个房间，任意两个房间之间均有且仅有一条路径相连，即这$n$个房间构成一个树状结构。每个房间分成了$A$和$B$两个区域，每一区域都是一个薄冰块或者障碍物。每次只能移动到相邻房间的同一类区域（即若你现在在这个房间的$A$区域，那么你只能移动到相邻房间的$A$区域）或这个房间的另一区域。现在挑战者从房间$u$出发，馆主在房间$v$，那么挑战者只能朝接近馆主所在房间的方向过去。一开始挑战者可以在房间$u$的任意一个冰块区域内。如果挑战者踩过的冰块数达到了最大值（即没有一种方案踩过的冰块数更多了），那么当挑战者走到最后一个冰块上时，他会被瞬间传送到馆主面前与馆主进行道馆战。自从馆主修改规则后已经经过了$m$天，每天要么是有一个挑战者来进行挑战，要么就是馆主将某个房间进行了修改。对于每个来的挑战者，你需要计算出他若要和馆主进行战斗需要经过的冰块数。", "inputFormat": "第一行包含两个正整数$n$和$m$。\n\n第$2$行到第$n$行，每行包含两个正整数$x$和$y$，表示一条连接房间$x$和房间$y$的边。房间编号为$1\\cdots n$。\n\n接下来$n$行，每行包含两个字符。第$n+k$行表示房间$k$的两个区域，第一个字符为$A$区域，第二个字符为$B$区域。其中“.”（ASCII码为46）表示是薄冰块，“#”（ASCII码为35）表示是障碍物。\n\n最后的$m$行，每行一个操作：\n\n$C$ $u$ $s$：将房间$u$里的两个区域修改为$s$。\n\n$Q$ $u$ $v$：询问挑战者在房间$u$，馆主在房间$v$时，挑战者能与馆主进行挑战需要踩的冰块数。如果房间$u$的两个区域都是障碍物，那么输出$0$。", "outputFormat": "包含若干行，每行一个整数。即对于输入中的每个询问，依次输出一个答案。", "hint": "测试点$1$~$6$：$n≤1000,m≤10000$\n\n测试点$7$~$15$：$n≤30000,m≤80000$\n\n测试点$16$~$20$：$n≤50000,m≤100000$", "locale": "zh-CN"}}}
{"pid": "P4681", "type": "P", "difficulty": 6, "samples": [["1 3 233\n1 \n2 1 1\n1 1 1\n2 1 1\n", "1\n1\n"], ["4 3 5\n1 2 3 4 \n2 1 4\n1 2 4\n2 2 3\n", "10\n8\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2015", "线段树", "O2优化", "THUSC"], "title": "[THUSC 2015] 平方运算", "background": "", "description": "小 H 是一位勤奋的中学生，他的理想是进入自己心仪的大学学习计算机专业。为了实现这一目标。他从小就开始认真学习信息学竞赛的基础知识。\n\n今天，小 H 学习了平方运算。为了检验自己是否熟练掌握了平方运算，小 H 决定给自己出一道题。小 H 有一个长度为 $N$ 的序列 ${X_1,X_2,\\cdots,X_N}$。小 H 会时不时地取出 列中的一段连续区间 $[l,r]$，并将其中的每一个数改为原数值的平方对 $P$ 取模的结果，其中 $P$ 为某个给定的数。为了检验自己的运算是否正确，小 $H$ 还会时不时地想要知道序列中某一段连续区间 $[l,r]$ 内所有数的和是多少。\n\n但是，小 H 现在并没有标准答案。所以，他向你求助，希望你编写一个程序，帮他计算出每次想要知道的区间内的数的和。 ", "inputFormat": "输入第一行包含三个整数 $N,M,P$，$M$ 表示操作组数，$N,P$ 含义见题目描述；\n\n接下来一行，包含 $N$ 个正整数，为 $X_1,X_2,X_3,\\cdots,X_N$，$X_i<P$；\n\n接下来共 $M$ 行输入，每行格式形如 $1\\;l\\;r$ 或 $2\\;l\\;r$，$1$ 表示修改每个元素的值，$2$ 表示询问区间和。", "outputFormat": "对于每一个询问，输出答案。", "hint": "$1\\leq N,M\\leq 10^{5}$。\n\n$$\n\\begin{aligned}P\\in \\{233,2332,5,8192,23,45,37,4185,5850,2975,2542,\\\\2015,2003,2010,4593,4562, 1034,5831,9905,9977\\}\n\\end{aligned}\n$$", "locale": "zh-CN", "translations": {"en": {"title": "[THUSC 2015] Square Operation", "background": "", "description": "Xiao H is a hardworking middle school student. His dream is to enter his favorite university to study computer science. To achieve this goal, he has been seriously studying the basic knowledge of informatics competitions since childhood.\n\nToday, Xiao H learned the square operation. To check whether he has mastered it well, Xiao H decided to make himself a problem. Xiao H has a sequence of length $N$, ${X_1,X_2,\\cdots,X_N}$. From time to time, Xiao H takes a continuous interval $[l,r]$ from the sequence and changes each number in it to the result of squaring its original value modulo $P$, where $P$ is a given number. To verify whether his computation is correct, Xiao H also wants to know, from time to time, what the sum of all numbers in a continuous interval $[l,r]$ of the sequence is.\n\nHowever, Xiao H does not have the standard answers now. So, he asks you for help and hopes you can write a program to compute the sum of the numbers in the interval each time he asks.", "inputFormat": "The first line contains three integers $N,M,P$, where $M$ is the number of operations, and the meanings of $N$ and $P$ are as described in the statement.\n\nThe next line contains $N$ positive integers, $X_1,X_2,X_3,\\cdots,X_N$, where $X_i<P$.\n\nThen follow $M$ lines. Each line is in the format $1\\;l\\;r$ or $2\\;l\\;r$. $1$ means modifying the value of each element, and $2$ means querying the interval sum.", "outputFormat": "For each query, output the answer.", "hint": "$1\\leq N,M\\leq 10^{5}$。\n\n$$\n\\begin{aligned}P\\in \\{233,2332,5,8192,23,45,37,4185,5850,2975,2542,\\\\2015,2003,2010,4593,4562, 1034,5831,9905,9977\\}\n\\end{aligned}\n$$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[THUSC 2015] 平方运算", "background": "", "description": "小 H 是一位勤奋的中学生，他的理想是进入自己心仪的大学学习计算机专业。为了实现这一目标。他从小就开始认真学习信息学竞赛的基础知识。\n\n今天，小 H 学习了平方运算。为了检验自己是否熟练掌握了平方运算，小 H 决定给自己出一道题。小 H 有一个长度为 $N$ 的序列 ${X_1,X_2,\\cdots,X_N}$。小 H 会时不时地取出 列中的一段连续区间 $[l,r]$，并将其中的每一个数改为原数值的平方对 $P$ 取模的结果，其中 $P$ 为某个给定的数。为了检验自己的运算是否正确，小 $H$ 还会时不时地想要知道序列中某一段连续区间 $[l,r]$ 内所有数的和是多少。\n\n但是，小 H 现在并没有标准答案。所以，他向你求助，希望你编写一个程序，帮他计算出每次想要知道的区间内的数的和。 ", "inputFormat": "输入第一行包含三个整数 $N,M,P$，$M$ 表示操作组数，$N,P$ 含义见题目描述；\n\n接下来一行，包含 $N$ 个正整数，为 $X_1,X_2,X_3,\\cdots,X_N$，$X_i<P$；\n\n接下来共 $M$ 行输入，每行格式形如 $1\\;l\\;r$ 或 $2\\;l\\;r$，$1$ 表示修改每个元素的值，$2$ 表示询问区间和。", "outputFormat": "对于每一个询问，输出答案。", "hint": "$1\\leq N,M\\leq 10^{5}$。\n\n$$\n\\begin{aligned}P\\in \\{233,2332,5,8192,23,45,37,4185,5850,2975,2542,\\\\2015,2003,2010,4593,4562, 1034,5831,9905,9977\\}\n\\end{aligned}\n$$", "locale": "zh-CN"}}}
{"pid": "P4682", "type": "P", "difficulty": 6, "samples": [["0 0 10\n2 10\n0 -5 0 1\n5 0 1 0", "7.071"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "浙江"], "title": "[ZJOI2007] 粒子运动", "background": "", "description": "阿Q博士正在观察一个圆形器皿中的粒子运动。不妨建立一个平面直角坐标系，圆形器皿的圆心坐标为$(x_0, y_0)$，半径为$R$。器皿中有若干个粒子，假设第$i$个粒子在时刻$0$的位置为$(x_i, y_i)$，速度为$(v_{x_i},v_{y_i})$（注：这是一个速度向量，若没有发生碰撞，$t$时刻的位置应该是$(x_i + t * v_{x_i}, y_i + t * v_{y_i})$ ）。假设所有粒子的运动**互不干扰**；若某个粒子在某个时刻碰到了器皿壁，将发生完全弹性碰撞，即速度方向按照碰撞点的切线镜面反射，且速度大小不变（如图）。认为碰撞是瞬间完成的。\n\n![particle](https://cdn.luogu.com.cn/upload/pic/22046.png)\n\n尽管碰撞不会影响粒子的速率，但是粒子却会受到一定的伤害，所以若某一个粒子碰撞了$k$次器皿壁，那么在第$k$次碰撞时它便会消亡。\n\n出于研究的需要，阿Q博士希望知道从时刻$0$到所有粒子都消亡这段时间内，所有粒子之间的最近距离是什么。你能帮助他么？", "inputFormat": "输入文件particle.in第一行包含三个实数，分别为$x_0, y_0, R$，即圆形器皿的圆心坐标及半径。第二行包含两个正整数$N, k$，分别表示粒子的总数与消亡碰撞次数。接下来$N$行每行四个实数，分别为$x_i, y_i, v_{x_i} , v_{y_i}$，保证$(x_i, y_i)$都在圆内且$(v_{x_i}, v_{y_i})$非零。", "outputFormat": "输出文件particle.out仅包含一个实数，即所有粒子的历史最近距离，精确到小数点后三位。", "hint": "对于所有的数据，$2 \\leq N \\leq 100$。$1 \\leq k \\leq 100$。\n\n请注意实数精度问题。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2007] Particle Motion", "background": "", "description": "Dr. A-Q is observing the motion of particles in a circular container. Let us set up a 2D Cartesian coordinate system. The center of the circular container is at $(x_0, y_0)$, with radius $R$. There are several particles in the container. Suppose the position of the $i$-th particle at time $0$ is $(x_i, y_i)$, and its velocity is $(v_{x_i}, v_{y_i})$ (note: this is a velocity vector; if no collision happens, then at time $t$ its position should be $(x_i + t * v_{x_i}, y_i + t * v_{y_i})$). Assume that the motions of all particles **do not affect each other**. If a particle hits the container wall at some moment, a perfectly elastic collision occurs: the velocity direction is reflected like a mirror with respect to the tangent line at the collision point, and the speed remains unchanged (as shown in the figure). The collision is considered to be instantaneous.\n\n![particle](https://cdn.luogu.com.cn/upload/pic/22046.png)\n\nAlthough collisions do not affect a particle’s speed, the particle will take some damage. Therefore, if a particle has collided with the container wall $k$ times, then it will vanish at its $k$-th collision.\n\nFor research purposes, Dr. A-Q wants to know, from time $0$ until all particles have vanished, what the minimum distance ever achieved between any two particles is. Can you help him?", "inputFormat": "The first line of the input file particle.in contains three real numbers $x_0, y_0, R$, which are the center coordinates and radius of the circular container. The second line contains two positive integers $N, k$, representing the total number of particles and the number of collisions at which a particle vanishes. The next $N$ lines each contain four real numbers $x_i, y_i, v_{x_i}, v_{y_i}$, guaranteeing that $(x_i, y_i)$ are all inside the circle and $(v_{x_i}, v_{y_i})$ is non-zero.", "outputFormat": "The output file particle.out contains only one real number: the minimum distance ever achieved between any two particles over the whole history, accurate to three digits after the decimal point.", "hint": "For all testdata, $2 \\leq N \\leq 100$. $1 \\leq k \\leq 100$.\n\nPlease pay attention to floating-point precision issues.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2007] 粒子运动", "background": "", "description": "阿Q博士正在观察一个圆形器皿中的粒子运动。不妨建立一个平面直角坐标系，圆形器皿的圆心坐标为$(x_0, y_0)$，半径为$R$。器皿中有若干个粒子，假设第$i$个粒子在时刻$0$的位置为$(x_i, y_i)$，速度为$(v_{x_i},v_{y_i})$（注：这是一个速度向量，若没有发生碰撞，$t$时刻的位置应该是$(x_i + t * v_{x_i}, y_i + t * v_{y_i})$ ）。假设所有粒子的运动**互不干扰**；若某个粒子在某个时刻碰到了器皿壁，将发生完全弹性碰撞，即速度方向按照碰撞点的切线镜面反射，且速度大小不变（如图）。认为碰撞是瞬间完成的。\n\n![particle](https://cdn.luogu.com.cn/upload/pic/22046.png)\n\n尽管碰撞不会影响粒子的速率，但是粒子却会受到一定的伤害，所以若某一个粒子碰撞了$k$次器皿壁，那么在第$k$次碰撞时它便会消亡。\n\n出于研究的需要，阿Q博士希望知道从时刻$0$到所有粒子都消亡这段时间内，所有粒子之间的最近距离是什么。你能帮助他么？", "inputFormat": "输入文件particle.in第一行包含三个实数，分别为$x_0, y_0, R$，即圆形器皿的圆心坐标及半径。第二行包含两个正整数$N, k$，分别表示粒子的总数与消亡碰撞次数。接下来$N$行每行四个实数，分别为$x_i, y_i, v_{x_i} , v_{y_i}$，保证$(x_i, y_i)$都在圆内且$(v_{x_i}, v_{y_i})$非零。", "outputFormat": "输出文件particle.out仅包含一个实数，即所有粒子的历史最近距离，精确到小数点后三位。", "hint": "对于所有的数据，$2 \\leq N \\leq 100$。$1 \\leq k \\leq 100$。\n\n请注意实数精度问题。", "locale": "zh-CN"}}}
{"pid": "P4683", "type": "P", "difficulty": 5, "samples": [["3\nprint\nthe\npoem", "20\nt\nh\ne\nP\n-\n-\n-\np\no\ne\nm\nP\n-\n-\n-\nr\ni\nn\nt\nP"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["字符串", "2008", "IOI", "Special Judge", "深度优先搜索 DFS", "字典树 Trie"], "title": "[IOI 2008] Type Printer", "background": "", "description": "你需要利用一台可移动的打印机打印出 $n$ 个单词。这种可移动式打印机是一种老式打印机，它需要你将一些小的金属块（每个包含一个字母）放到打印机上以组成单词。然后将这些小金属块压在一张纸上以打印出这个词。这种打印机允许你进行下列操作： \n\n- 在打印机当前词的末端（尾部）添加一个字母； \n- 在打印机当前词的尾部删去一个字母（将打印机当前词的最后一个字母删去）。仅当打印机当前至少有一个字母时才允许进行该操作；\n- 将打印机上的当前词打印出来。 \n\n初始时打印机为空，或者说它不含任何带字母的金属块。打印结束时，允许有部分字母留在打印机内。同时也允许你按照任意的次序打印单词。\n\n由于每一个操作都需要一定时间，所以需要你尽可能减少所需操作的总数目（将操作的总数最小化）。\n\n你需要编写一个程序，给定所要打印的 $n$ 个单词，找出以任意次序打印所有单词所需操作的最小数目，并输出一种这样的操作序列。", "inputFormat": "- 第 $1$ 行包含一个整数 $n$, 表示你需要打印的单词数。 \t\n- 随后的 $n$ 行中，每一行都包含一个单词。每个词仅由小写字母组成，而且单词的长度为 $1$ 到 $20$ 个字母（包含 $1$ 和 $20$ 在内）。所有单词都不相同。", "outputFormat": "第一行包含一个整数 $m$，表示打印这 $n$ 个单词所需操作的最小数目。\n\n接下来的 $m$ 行，每行一个字符，表示你的操作序列，序列的描述方法如下：\n- 添加一个字母，用这个小写字母的自身来表示。\n- 删去一个字母，用 `-` 表示。\n- 打印单词，用 `P` 表示。", "hint": "对于 $40\\%$ 的数据，$n\\leq18$；\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq25000$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2008] Type Printer", "background": "", "description": "You need to use a movable printer to print $n$ words. This movable printer is an old-style printer: you have to place some small metal blocks (each containing one letter) onto the printer to form a word. Then you press these metal blocks onto a sheet of paper to print the word. The printer allows you to perform the following operations:\n\n- Add one letter to the end (tail) of the current word in the printer.\n- Delete one letter from the end of the current word (remove the last letter). This operation is allowed only when the current word has at least one letter.\n- Print the current word in the printer.\n\nInitially, the printer is empty, i.e., it contains no metal blocks with letters. After finishing all printing, it is allowed to leave some letters in the printer. You are also allowed to print the words in any order.\n\nSince each operation takes some time, you need to minimize the total number of operations.\n\nYou need to write a program that, given the $n$ words to be printed, finds the minimum number of operations needed to print all words in some order, and outputs one such sequence of operations.", "inputFormat": "- Line $1$ contains an integer $n$, the number of words you need to print.\n- The next $n$ lines each contain one word. Each word consists only of lowercase letters, and its length is from $1$ to $20$ letters (inclusive). All words are distinct.", "outputFormat": "The first line contains an integer $m$, the minimum number of operations required to print these $n$ words.\n\nThe next $m$ lines each contain one character, describing your operation sequence as follows:\n- To add a letter, output that lowercase letter itself.\n- To delete a letter, output `-`.\n- To print the current word, output `P`.", "hint": "For $40\\%$ of the testdata, $n \\leq 18$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 25000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2008] Type Printer", "background": "", "description": "你需要利用一台可移动的打印机打印出 $n$ 个单词。这种可移动式打印机是一种老式打印机，它需要你将一些小的金属块（每个包含一个字母）放到打印机上以组成单词。然后将这些小金属块压在一张纸上以打印出这个词。这种打印机允许你进行下列操作： \n\n- 在打印机当前词的末端（尾部）添加一个字母； \n- 在打印机当前词的尾部删去一个字母（将打印机当前词的最后一个字母删去）。仅当打印机当前至少有一个字母时才允许进行该操作；\n- 将打印机上的当前词打印出来。 \n\n初始时打印机为空，或者说它不含任何带字母的金属块。打印结束时，允许有部分字母留在打印机内。同时也允许你按照任意的次序打印单词。\n\n由于每一个操作都需要一定时间，所以需要你尽可能减少所需操作的总数目（将操作的总数最小化）。\n\n你需要编写一个程序，给定所要打印的 $n$ 个单词，找出以任意次序打印所有单词所需操作的最小数目，并输出一种这样的操作序列。", "inputFormat": "- 第 $1$ 行包含一个整数 $n$, 表示你需要打印的单词数。 \t\n- 随后的 $n$ 行中，每一行都包含一个单词。每个词仅由小写字母组成，而且单词的长度为 $1$ 到 $20$ 个字母（包含 $1$ 和 $20$ 在内）。所有单词都不相同。", "outputFormat": "第一行包含一个整数 $m$，表示打印这 $n$ 个单词所需操作的最小数目。\n\n接下来的 $m$ 行，每行一个字符，表示你的操作序列，序列的描述方法如下：\n- 添加一个字母，用这个小写字母的自身来表示。\n- 删去一个字母，用 `-` 表示。\n- 打印单词，用 `P` 表示。", "hint": "对于 $40\\%$ 的数据，$n\\leq18$；\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq25000$。", "locale": "zh-CN"}}}
{"pid": "P4684", "type": "P", "difficulty": 6, "samples": [["5\n3\n7\n2 2\n5 1\n8 3\n4 1\n2 3\n", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2008", "IOI"], "title": "[IOI 2008] Fish", "background": "", "description": "据Scheherazade说，在很远的沙漠中有一个湖。湖中起初有$F$条鱼。选择最值钱的$K$种宝石，对$F$条鱼的每一条只喂给它一块宝石。注意，因为$K$可能小于$F$，两条或更多的鱼可能会吞下同一种宝石。\n\n随着时间的流逝，有些鱼吃掉了别的鱼。一条鱼能够吃掉另一条鱼，当且仅当它的长度至少是被吃掉的鱼的两倍($A$ 能吃掉$B$ 当且仅当$L_A \\geq 2L_B$)。没有规则说明一条鱼何时会吃掉另一条鱼。有的鱼可能会一条接一条地吃掉几条小鱼，而有的鱼可能不吃别的鱼，即使它们有能力吃。当一条鱼吃掉一条小鱼时，它的身长并不改变，但是小鱼腹中的宝石会完好无损地进到大鱼腹中。\n\n据Scheherazade说，如果你能够找到那个湖，你会被准许捕捉一条鱼，并且得到鱼腹中的宝石。你很想试试运气，但是在出发前很想知道捉到一条鱼可能会有多少种不同的宝石组合。\n\n写一个程序，给定每条鱼的长度以及其最初吞食的宝石的种类，找出鱼腹中宝石不同组合的数量对给定整数$M$取模的值。组合由每种宝石的数量定义，与宝石的排列顺序无关。同一类宝石中任意两块是没有区别的。 ", "inputFormat": "你的程序需要从标准输入上读入下列数据：\n- 第一行是整数$F$, 即湖中最初鱼的数量。\n- 第二行是整数$K$, 即宝石的种类数。不同类型的宝石分别用从 $1$ 到 $K$的整数表示。 \n- 第三行是整数$M$。 \n- 以后 $F$ 行中的每一行用由一个空格分隔的两个整数描述一条鱼：按顺序分别是鱼的长度以及鱼腹中的宝石的类型。\n\n注意: 在所有的测试用例中，$K$ 种宝石中的每一种都会至少有一块。 ", "outputFormat": "你的程序需要在标准输出上输出一个介于$0$和$M-1$(包含)的整数，即宝石所有可能的不同组合数量模$M$，占一行。注意，在问题求解中，数值$M$除了简化计算外没有其他的作用。", "hint": "### 限制\n\n有总计70分的测试数据，其中$K$不超过$7,000$。在这些测试数据中，有总计25分的测试数据的$K$不超过$20$。\n\n对于所有的测试数据，$1 \\leq F \\leq 500,000$，$1 \\leq K \\leq F$，$2 \\leq M \\leq 30,000$，$1 \\leq L_X \\leq 1,000,000,000$。\n\n### 样例说明\n\n有 $11$ 种可能的组合，所以你需要输出$4$，也就是$11$ 模 $7$。这些可能的组合是: $[1] [1,2] [1,2,3] [1,2,3,3] [1,3] [1,3,3] [2] [2,3] [2,3,3] [3]$ 和 $[3,3]$。(对每一种组合, 我们列出其所包含的宝石。 例如，$[2,3,3]$ 包含一块$2$型宝石和两块$3$型宝石)\n\n这些组合可以由下述方式获得:\n\n$[1]$: 如果你在第二条鱼 (或第四条) 吃掉任何其它鱼之前捕捉到它。\n\n$[1,2]$: 如果第二条鱼吃掉第一条鱼, 它就会有一块 $1$ 型宝石(它在初始时刻吞下的) 和一块2型宝石 (从第一条鱼腹中得到的)。\n\n$[1,2,3]$: 一种可能的途径是: 第四条鱼吃掉第一条鱼，然后第三条鱼又吃掉它。如果你此时捉到了第三条鱼，那它腹中就有这三种宝石一样一块\n\n$[1,2,3,3]$: 第四条鱼吃掉第一条鱼，第三条鱼吃掉第四条鱼，第三条鱼吃掉第五条鱼，你捉到了第三条鱼。\n\n$[1,3]$: 第三条鱼吃掉第四条鱼，你捉到了第三条鱼。\n\n$[1,3,3]$: 第三条鱼吃掉第五条鱼，第三条鱼吃掉第四条鱼，你捉到了第三条鱼。\n\n$[2]$: 你捉到了第一条鱼。\n\n$[2,3]$: 第三条鱼吃掉第一条鱼，你捉到了第三条鱼\n\n$[2,3,3]$: 第三条鱼吃掉第一条鱼，第三条鱼吃掉第五条鱼，你捉到了第三条鱼。\n\n$[3]$: 你捉到了第三条鱼。\n\n$[3,3]$: 第三条鱼吃掉第五条鱼，你捉到了第三条鱼。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2008] Fish", "background": "", "description": "According to Scheherazade, there is a lake in a faraway desert. Initially, there are $F$ fish in the lake. Choose the most valuable $K$ types of gems, and for each of the $F$ fish, feed it exactly one gem. Note that since $K$ may be smaller than $F$, two or more fish may swallow the same type of gem.\n\nAs time goes by, some fish eat other fish. A fish can eat another fish if and only if its length is at least twice the length of the fish being eaten ($A$ can eat $B$ if and only if $L_A \\geq 2L_B$). There is no rule saying when a fish will eat another fish. Some fish may eat several smaller fish one after another, and some fish may eat none, even if they are able to. When a fish eats a smaller fish, its length does not change, but the gems inside the smaller fish remain intact and move into the bigger fish’s stomach.\n\nAccording to Scheherazade, if you can find that lake, you will be allowed to catch one fish and take the gems inside its stomach. You want to try your luck, but before setting out, you want to know how many different gem collections you might obtain by catching a fish.\n\nWrite a program that, given the length of each fish and the type of gem it initially swallowed, finds the number of different gem collections that can appear in a fish’s stomach, modulo a given integer $M$. A collection is defined by the count of each type of gem, and the order of gems does not matter. Any two gems of the same type are indistinguishable.", "inputFormat": "Your program should read the following data from standard input:\n- The first line contains an integer $F$, the initial number of fish in the lake.\n- The second line contains an integer $K$, the number of gem types. Different gem types are represented by integers from $1$ to $K$.\n- The third line contains an integer $M$.\n- Each of the next $F$ lines contains two integers separated by a space, describing a fish: its length and the type of gem in its stomach.\n\nNote: In all test cases, each of the $K$ gem types appears at least once.", "outputFormat": "Your program should output to standard output a single integer between $0$ and $M-1$ (inclusive), the number of all possible different gem collections modulo $M$, on one line. Note that in solving the problem, the value $M$ has no purpose other than simplifying computation.", "hint": "### Constraints\n\nThere are testdata worth 70 points in total where $K$ does not exceed $7,000$. Among these, there are testdata worth 25 points where $K$ does not exceed $20$.\n\nFor all testdata, $1 \\leq F \\leq 500,000$, $1 \\leq K \\leq F$, $2 \\leq M \\leq 30,000$, $1 \\leq L_X \\leq 1,000,000,000$.\n\n### Sample Explanation\n\nThere are $11$ possible collections, so you should output $4$, which is $11$ modulo $7$. These collections are: $[1] [1,2] [1,2,3] [1,2,3,3] [1,3] [1,3,3] [2] [2,3] [2,3,3] [3]$ and $[3,3]$. (For each collection, we list the gems it contains. For example, $[2,3,3]$ contains one type $2$ gem and two type $3$ gems.)\n\nThese collections can be obtained in the following ways:\n\n$[1]$: If you catch the second fish (or the fourth fish) before it eats any other fish.\n\n$[1,2]$: If the second fish eats the first fish, it will have one type $1$ gem (the one it swallowed initially) and one type $2$ gem (obtained from the first fish’s stomach).\n\n$[1,2,3]$: One possible way is: the fourth fish eats the first fish, then the third fish eats it. If you catch the third fish at this moment, it has one gem of each of these three types in its stomach.\n\n$[1,2,3,3]$: The fourth fish eats the first fish, the third fish eats the fourth fish, the third fish eats the fifth fish, and you catch the third fish.\n\n$[1,3]$: The third fish eats the fourth fish, and you catch the third fish.\n\n$[1,3,3]$: The third fish eats the fifth fish, the third fish eats the fourth fish, and you catch the third fish.\n\n$[2]$: You catch the first fish.\n\n$[2,3]$: The third fish eats the first fish, and you catch the third fish.\n\n$[2,3,3]$: The third fish eats the first fish, the third fish eats the fifth fish, and you catch the third fish.\n\n$[3]$: You catch the third fish.\n\n$[3,3]$: The third fish eats the fifth fish, and you catch the third fish.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2008] Fish", "background": "", "description": "据Scheherazade说，在很远的沙漠中有一个湖。湖中起初有$F$条鱼。选择最值钱的$K$种宝石，对$F$条鱼的每一条只喂给它一块宝石。注意，因为$K$可能小于$F$，两条或更多的鱼可能会吞下同一种宝石。\n\n随着时间的流逝，有些鱼吃掉了别的鱼。一条鱼能够吃掉另一条鱼，当且仅当它的长度至少是被吃掉的鱼的两倍($A$ 能吃掉$B$ 当且仅当$L_A \\geq 2L_B$)。没有规则说明一条鱼何时会吃掉另一条鱼。有的鱼可能会一条接一条地吃掉几条小鱼，而有的鱼可能不吃别的鱼，即使它们有能力吃。当一条鱼吃掉一条小鱼时，它的身长并不改变，但是小鱼腹中的宝石会完好无损地进到大鱼腹中。\n\n据Scheherazade说，如果你能够找到那个湖，你会被准许捕捉一条鱼，并且得到鱼腹中的宝石。你很想试试运气，但是在出发前很想知道捉到一条鱼可能会有多少种不同的宝石组合。\n\n写一个程序，给定每条鱼的长度以及其最初吞食的宝石的种类，找出鱼腹中宝石不同组合的数量对给定整数$M$取模的值。组合由每种宝石的数量定义，与宝石的排列顺序无关。同一类宝石中任意两块是没有区别的。 ", "inputFormat": "你的程序需要从标准输入上读入下列数据：\n- 第一行是整数$F$, 即湖中最初鱼的数量。\n- 第二行是整数$K$, 即宝石的种类数。不同类型的宝石分别用从 $1$ 到 $K$的整数表示。 \n- 第三行是整数$M$。 \n- 以后 $F$ 行中的每一行用由一个空格分隔的两个整数描述一条鱼：按顺序分别是鱼的长度以及鱼腹中的宝石的类型。\n\n注意: 在所有的测试用例中，$K$ 种宝石中的每一种都会至少有一块。 ", "outputFormat": "你的程序需要在标准输出上输出一个介于$0$和$M-1$(包含)的整数，即宝石所有可能的不同组合数量模$M$，占一行。注意，在问题求解中，数值$M$除了简化计算外没有其他的作用。", "hint": "### 限制\n\n有总计70分的测试数据，其中$K$不超过$7,000$。在这些测试数据中，有总计25分的测试数据的$K$不超过$20$。\n\n对于所有的测试数据，$1 \\leq F \\leq 500,000$，$1 \\leq K \\leq F$，$2 \\leq M \\leq 30,000$，$1 \\leq L_X \\leq 1,000,000,000$。\n\n### 样例说明\n\n有 $11$ 种可能的组合，所以你需要输出$4$，也就是$11$ 模 $7$。这些可能的组合是: $[1] [1,2] [1,2,3] [1,2,3,3] [1,3] [1,3,3] [2] [2,3] [2,3,3] [3]$ 和 $[3,3]$。(对每一种组合, 我们列出其所包含的宝石。 例如，$[2,3,3]$ 包含一块$2$型宝石和两块$3$型宝石)\n\n这些组合可以由下述方式获得:\n\n$[1]$: 如果你在第二条鱼 (或第四条) 吃掉任何其它鱼之前捕捉到它。\n\n$[1,2]$: 如果第二条鱼吃掉第一条鱼, 它就会有一块 $1$ 型宝石(它在初始时刻吞下的) 和一块2型宝石 (从第一条鱼腹中得到的)。\n\n$[1,2,3]$: 一种可能的途径是: 第四条鱼吃掉第一条鱼，然后第三条鱼又吃掉它。如果你此时捉到了第三条鱼，那它腹中就有这三种宝石一样一块\n\n$[1,2,3,3]$: 第四条鱼吃掉第一条鱼，第三条鱼吃掉第四条鱼，第三条鱼吃掉第五条鱼，你捉到了第三条鱼。\n\n$[1,3]$: 第三条鱼吃掉第四条鱼，你捉到了第三条鱼。\n\n$[1,3,3]$: 第三条鱼吃掉第五条鱼，第三条鱼吃掉第四条鱼，你捉到了第三条鱼。\n\n$[2]$: 你捉到了第一条鱼。\n\n$[2,3]$: 第三条鱼吃掉第一条鱼，你捉到了第三条鱼\n\n$[2,3,3]$: 第三条鱼吃掉第一条鱼，第三条鱼吃掉第五条鱼，你捉到了第三条鱼。\n\n$[3]$: 你捉到了第三条鱼。\n\n$[3,3]$: 第三条鱼吃掉第五条鱼，你捉到了第三条鱼。", "locale": "zh-CN"}}}
{"pid": "P4685", "type": "P", "difficulty": 6, "samples": [["5\n7\nPLPPL", "5"], ["12\n10000\nLPLLPLPPLPLL", "39"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2008", "IOI"], "title": "[IOI 2008] Linear Garden", "background": null, "description": "拉美西斯二世刚刚获胜归来。为了纪念这一胜利，他决定建造一座壮观的花园。这个花园里的植物排成一行，从他在卢克索的宫殿直达卡纳克神庙。所种植的植物只有莲花和纸莎草，因为它们分别代表上埃及和下埃及。\n\n这个花园中必须有$N$棵植物，并且必须保持平衡，即在花园中任取一段，其中莲花和纸莎草的棵数之差不能超过$2$。\n\n花园可以被表示为由字母 `L`（莲花）和 `P`（纸莎草）组成的字符串。例如，当 $N=5$ 时，有 $14$ 种可能的平衡花园，按照字母排序如下：`LLPLP`，`LLPPL`，`LPLLP`，`LPLPL`，`LPLPP`， `LPPLL`，`LPPLP`，`PLLPL`，`PLLPP`，`PLPLL`，`PLPLP`，`PLPPL`，`PPLLP` 和 `PPLPL`。\n\n给定长度的所有可能的平衡花园可按字母顺序排序，并从 $1$ 开始编号。例如，当 $N=5$ 时，第 $12$ 号花园是 `PLPPL`。 \n\n写一个程序，给定植物棵数 $N$ 和一个表示平衡花园的字符串，计算该花园的序号模 $M$ 的结果，其中 $M$ 是一个给定的整数。 注意，在问题求解中，数值 $M$ 除了简化计算外没有其他的作用。", "inputFormat": "第一行是整数 $N$，说明花园中植物的数量。第二行是整数 $M$。第三行是长度为 $N$ 的由字符 `L` 或 `P` 组成的字符串，表示一个平衡的花园。", "outputFormat": "你的程序需要向标准输出上输出一个介于 $0$ 和 $M-1$ 之间（含）的整数，占一行，表示该花园的序号模 $M$。", "hint": "有总分 40 分的测试点的 $N$ 不超过 $40$。\n\n对于所有测试点，$1\\le N\\le 1,000,000$，$7\\le M \\le 10,000,000$。 \n\n### 样例说明\n\n第一个样例中，实际的序号是 12。因此输出的是 12 模 7，即 5。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2008] Linear Garden", "background": "", "description": "Ramesses II has just returned victorious. To commemorate this victory, he decided to build a magnificent garden. The plants in this garden are arranged in a single line, stretching from his palace in Luxor all the way to the Karnak Temple. The only plants used are lotus and papyrus, because they represent Upper Egypt and Lower Egypt, respectively.\n\nThe garden must contain $N$ plants and must be balanced. That is, for any segment chosen within the garden, the difference between the number of lotus and the number of papyrus in that segment must not exceed $2$.\n\nThe garden can be represented as a string consisting of the letters `L` (lotus) and `P` (papyrus). For example, when $N=5$, there are $14$ possible balanced gardens. In lexicographical order, they are: `LLPLP`, `LLPPL`, `LPLLP`, `LPLPL`, `LPLPP`, `LPPLL`, `LPPLP`, `PLLPL`, `PLLPP`, `PLPLL`, `PLPLP`, `PLPPL`, `PPLLP`, and `PPLPL`.\n\nAll possible balanced gardens of a given length can be sorted in lexicographical order and numbered starting from $1$. For example, when $N=5$, garden number $12$ is `PLPPL`.\n\nWrite a program that, given the number of plants $N$ and a string representing a balanced garden, computes the garden’s index modulo $M$, where $M$ is a given integer. Note that in solving the problem, the value $M$ has no purpose other than simplifying the computation.", "inputFormat": "The first line contains an integer $N$, the number of plants in the garden. The second line contains an integer $M$. The third line contains a string of length $N$ consisting of characters `L` or `P`, representing a balanced garden.", "outputFormat": "Your program should output to standard output a single integer between $0$ and $M-1$ (inclusive), on one line, representing the garden’s index modulo $M$.", "hint": "There are test points worth 40 points where $N$ does not exceed $40$.\n\nFor all test points, $1\\le N\\le 1,000,000$ and $7\\le M \\le 10,000,000$.\n\n### Sample Explanation\n\nIn the first sample, the actual index is 12. Therefore, the output is $12$ modulo $7$, which is $5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2008] Linear Garden", "background": null, "description": "拉美西斯二世刚刚获胜归来。为了纪念这一胜利，他决定建造一座壮观的花园。这个花园里的植物排成一行，从他在卢克索的宫殿直达卡纳克神庙。所种植的植物只有莲花和纸莎草，因为它们分别代表上埃及和下埃及。\n\n这个花园中必须有$N$棵植物，并且必须保持平衡，即在花园中任取一段，其中莲花和纸莎草的棵数之差不能超过$2$。\n\n花园可以被表示为由字母 `L`（莲花）和 `P`（纸莎草）组成的字符串。例如，当 $N=5$ 时，有 $14$ 种可能的平衡花园，按照字母排序如下：`LLPLP`，`LLPPL`，`LPLLP`，`LPLPL`，`LPLPP`， `LPPLL`，`LPPLP`，`PLLPL`，`PLLPP`，`PLPLL`，`PLPLP`，`PLPPL`，`PPLLP` 和 `PPLPL`。\n\n给定长度的所有可能的平衡花园可按字母顺序排序，并从 $1$ 开始编号。例如，当 $N=5$ 时，第 $12$ 号花园是 `PLPPL`。 \n\n写一个程序，给定植物棵数 $N$ 和一个表示平衡花园的字符串，计算该花园的序号模 $M$ 的结果，其中 $M$ 是一个给定的整数。 注意，在问题求解中，数值 $M$ 除了简化计算外没有其他的作用。", "inputFormat": "第一行是整数 $N$，说明花园中植物的数量。第二行是整数 $M$。第三行是长度为 $N$ 的由字符 `L` 或 `P` 组成的字符串，表示一个平衡的花园。", "outputFormat": "你的程序需要向标准输出上输出一个介于 $0$ 和 $M-1$ 之间（含）的整数，占一行，表示该花园的序号模 $M$。", "hint": "有总分 40 分的测试点的 $N$ 不超过 $40$。\n\n对于所有测试点，$1\\le N\\le 1,000,000$，$7\\le M \\le 10,000,000$。 \n\n### 样例说明\n\n第一个样例中，实际的序号是 12。因此输出的是 12 模 7，即 5。", "locale": "zh-CN"}}}
{"pid": "P4686", "type": "P", "difficulty": 7, "samples": [["3\n1\n10 11\n1 4\n2 3", "6"], ["3\n3\n5 7\n6 10\n1999999 2000000", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2008", "IOI"], "title": "[IOI 2008] Teleporters", "background": "", "description": "你正在参加一项沿着直线路线自西向东横穿埃及的比赛。开始时你位于这条直线路线的最西端。根据比赛规则，你必须要沿着这条直线路线始终向东行进。\n\n在这条直线路线上有 $N$ 个传送器。每个传送器都有两个端点。每当你到达某个传送器的两个端点之一时，传送器都会立即将你传送到该传送器的另一个端点（注意，根据你所在的端点位置，传送器能够将你从当前位置向东或者向西传送）。当你被传送到另一个端点之后，你必须继续沿这条直线路线向东行进；你无法避开你前进路上的任何传送器端点。绝不会出现两个端点在同一位置的情形。所有端点都严格位于这条直线路线的起点和终点之间。\n\n每当你被传送一次，你就会获得 $1$ 分。比赛的目标就是获取尽可能多的分数。为使获得的分数最多，允许你在比赛开始前在这条路线上增设 $M$ 个新的传送器。使用这些新的传送器你也同样可以获得分数。\n\n你可以将这些新传送器的端点设在任何位置上（甚至是非整数坐标点也可以），只要这些坐标点并不出现在已经被另一个端点占用的位置上即可。换句话说，所有传送器的端点位置必须是唯一的。同样，新传送器的端点都必须严格位于这条直线路线的起点和终点之间。\n\n题目可以保证，不管你如何增设这些传送器，你一定可以到达比赛路线的终点。\n\n试编写一个程序，对于给定的 $N$ 个传送器的端点位置和你可以增设的新传送器的数目 $M$，计算你能获得的最高分数。", "inputFormat": "你的程序必须从标准输入中读入下列数据： \n- 第 $1$行包含一个整数 $N$，表示开始时在路线上的传送器数目；\n- 第 $2$行包含一个整数 $M$，表示你可以增设的新传送器的最大数目；\n- 随后的 $N$ 行每行描述一个传送器。第 $i$ 行描述第 $i$ 个传送器。每行有两个整数 $W_i$ 和 $E_i$，这两个整数分别描述从路线起点到该传送器的两个端点的距离。\n\n对于给定的这些传送器，没有任何两个端点在同一位置上。比赛路线的起点为位置 $0$，而终点则在位置 $2\\,000\\,001$ 上。 ", "outputFormat": "你的程序必须向标准输出写一行数据，这行数据只包含一个整数，表示你找到的能获得的最高分数。", "hint": "### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/pic/20908.png )\n\n上面左图表示一条初始有 $3$ 个传送器的比赛路线的情形。右图表示在增设一个端点分别为 $0.5$ 和 $1.5$ 的新传送器之后的同一比赛路线。\n\n在增设上图所示的新的传送器之后，你的比赛路途如下：\n- 你从位置 $0$ 出发，向东行进。\n- 你到达位于 $0.5$ 的传送器端点，并且被传送到另一端点 $1.5$（你获得 $1$ 分）。\n- 你继续向东行进，并且到达位于 $2$ 的传送器端点；你被传送到位于 $3$ 的另一端点（这时你共获得 $2$ 分）。\n- 你到达位于 $4$ 的传送器端点，并且被传送到位于 $1$ 的另一端点（这时你共获得 $3$ 分）。\n- 你到达位于 $1.5$ 的传送器端点，并且被传送到位于 $0.5$ 的另一端点（这时你共获得 $4$ 分）。\n- 你到达位于 $1$ 的传送器端点，并且被传送到位于 $4$ 的另一端点（这时你共获得 $5$ 分）。\n- 你到达位于 $10$ 的传送器端点，并且被传送到位于 $11$ 的另一端点（这时你共获得 $6$ 分）。\n- 你继续行进直到到达比赛的终点，以获得总分为 $6$ 分结束。\n\n### 数据范围\n\n- 对于 $30\\%$ 的数据，$N \\leq 500$ 并且 $M \\leq 500$。 \n- 对于所有数据，$1 \\leq N \\leq 1,000,000$，$1 \\leq M \\leq 1,000,000$，$1 \\leq W_X < E_X \\leq 2,000,000$。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2008] Teleporters", "background": "", "description": "You are taking part in a race that goes from west to east along a straight route across Egypt. At the start, you are at the westernmost end of this straight route. According to the rules, you must always move east along this straight route.\n\nThere are $N$ teleporters on this route. Each teleporter has two endpoints. Whenever you reach one of the two endpoints of a teleporter, it immediately teleports you to the other endpoint (note that depending on which endpoint you are at, the teleporter may send you eastward or westward). After being teleported to the other endpoint, you must continue moving east along the route; you cannot avoid any teleporter endpoints that lie on your path. It is guaranteed that no teleporter has both endpoints at the same position. All endpoints lie strictly between the start and the finish of the route.\n\nEach time you are teleported, you gain $1$ point. The goal of the race is to gain as many points as possible. To maximize your score, you are allowed to add up to $M$ new teleporters on this route before the race starts. You can also gain points by using these new teleporters.\n\nYou may place the endpoints of these new teleporters at any positions (even at non-integer coordinates), as long as those positions are not already occupied by another endpoint. In other words, all teleporter endpoint positions must be unique. Likewise, the endpoints of the new teleporters must also lie strictly between the start and the finish of the route.\n\nIt is guaranteed that no matter how you add these teleporters, you will always be able to reach the finish of the race route.\n\nWrite a program that, given the endpoints of the $N$ existing teleporters and the number $M$ of new teleporters you may add, computes the maximum score you can obtain.", "inputFormat": "Your program must read the following data from standard input:\n- Line $1$ contains an integer $N$, the number of teleporters initially on the route.\n- Line $2$ contains an integer $M$, the maximum number of new teleporters you may add.\n- The next $N$ lines each describe one teleporter. Line $i$ describes the $i$-th teleporter and contains two integers $W_i$ and $E_i$, which give the distances from the start of the route to the two endpoints of that teleporter.\n\nFor these teleporters, no two endpoints are at the same position. The start of the race route is at position $0$, and the finish is at position $2\\,000\\,001$.", "outputFormat": "Your program must write one line to standard output containing a single integer, the maximum score you can achieve.", "hint": "### Explanation for Sample 1\n\n![](https://cdn.luogu.com.cn/upload/pic/20908.png )\n\nThe left figure above shows a race route with $3$ teleporters initially. The right figure shows the same route after adding one new teleporter with endpoints at $0.5$ and $1.5$.\n\nAfter adding the new teleporter shown above, your journey is as follows:\n- You start at position $0$ and move east.\n- You reach the teleporter endpoint at $0.5$ and are teleported to the other endpoint at $1.5$ (you gain $1$ point).\n- You continue moving east and reach the teleporter endpoint at $2$; you are teleported to the other endpoint at $3$ (you now have $2$ points in total).\n- You reach the teleporter endpoint at $4$ and are teleported to the other endpoint at $1$ (you now have $3$ points in total).\n- You reach the teleporter endpoint at $1.5$ and are teleported to the other endpoint at $0.5$ (you now have $4$ points in total).\n- You reach the teleporter endpoint at $1$ and are teleported to the other endpoint at $4$ (you now have $5$ points in total).\n- You reach the teleporter endpoint at $10$ and are teleported to the other endpoint at $11$ (you now have $6$ points in total).\n- You continue until you reach the finish of the race, ending with a total score of $6$ points.\n\n### Constraints\n\n- For $30\\%$ of the testdata, $N \\leq 500$ and $M \\leq 500$.\n- For all testdata, $1 \\leq N \\leq 1,000,000$, $1 \\leq M \\leq 1,000,000$, $1 \\leq W_X < E_X \\leq 2,000,000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2008] Teleporters", "background": "", "description": "你正在参加一项沿着直线路线自西向东横穿埃及的比赛。开始时你位于这条直线路线的最西端。根据比赛规则，你必须要沿着这条直线路线始终向东行进。\n\n在这条直线路线上有 $N$ 个传送器。每个传送器都有两个端点。每当你到达某个传送器的两个端点之一时，传送器都会立即将你传送到该传送器的另一个端点（注意，根据你所在的端点位置，传送器能够将你从当前位置向东或者向西传送）。当你被传送到另一个端点之后，你必须继续沿这条直线路线向东行进；你无法避开你前进路上的任何传送器端点。绝不会出现两个端点在同一位置的情形。所有端点都严格位于这条直线路线的起点和终点之间。\n\n每当你被传送一次，你就会获得 $1$ 分。比赛的目标就是获取尽可能多的分数。为使获得的分数最多，允许你在比赛开始前在这条路线上增设 $M$ 个新的传送器。使用这些新的传送器你也同样可以获得分数。\n\n你可以将这些新传送器的端点设在任何位置上（甚至是非整数坐标点也可以），只要这些坐标点并不出现在已经被另一个端点占用的位置上即可。换句话说，所有传送器的端点位置必须是唯一的。同样，新传送器的端点都必须严格位于这条直线路线的起点和终点之间。\n\n题目可以保证，不管你如何增设这些传送器，你一定可以到达比赛路线的终点。\n\n试编写一个程序，对于给定的 $N$ 个传送器的端点位置和你可以增设的新传送器的数目 $M$，计算你能获得的最高分数。", "inputFormat": "你的程序必须从标准输入中读入下列数据： \n- 第 $1$行包含一个整数 $N$，表示开始时在路线上的传送器数目；\n- 第 $2$行包含一个整数 $M$，表示你可以增设的新传送器的最大数目；\n- 随后的 $N$ 行每行描述一个传送器。第 $i$ 行描述第 $i$ 个传送器。每行有两个整数 $W_i$ 和 $E_i$，这两个整数分别描述从路线起点到该传送器的两个端点的距离。\n\n对于给定的这些传送器，没有任何两个端点在同一位置上。比赛路线的起点为位置 $0$，而终点则在位置 $2\\,000\\,001$ 上。 ", "outputFormat": "你的程序必须向标准输出写一行数据，这行数据只包含一个整数，表示你找到的能获得的最高分数。", "hint": "### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/pic/20908.png )\n\n上面左图表示一条初始有 $3$ 个传送器的比赛路线的情形。右图表示在增设一个端点分别为 $0.5$ 和 $1.5$ 的新传送器之后的同一比赛路线。\n\n在增设上图所示的新的传送器之后，你的比赛路途如下：\n- 你从位置 $0$ 出发，向东行进。\n- 你到达位于 $0.5$ 的传送器端点，并且被传送到另一端点 $1.5$（你获得 $1$ 分）。\n- 你继续向东行进，并且到达位于 $2$ 的传送器端点；你被传送到位于 $3$ 的另一端点（这时你共获得 $2$ 分）。\n- 你到达位于 $4$ 的传送器端点，并且被传送到位于 $1$ 的另一端点（这时你共获得 $3$ 分）。\n- 你到达位于 $1.5$ 的传送器端点，并且被传送到位于 $0.5$ 的另一端点（这时你共获得 $4$ 分）。\n- 你到达位于 $1$ 的传送器端点，并且被传送到位于 $4$ 的另一端点（这时你共获得 $5$ 分）。\n- 你到达位于 $10$ 的传送器端点，并且被传送到位于 $11$ 的另一端点（这时你共获得 $6$ 分）。\n- 你继续行进直到到达比赛的终点，以获得总分为 $6$ 分结束。\n\n### 数据范围\n\n- 对于 $30\\%$ 的数据，$N \\leq 500$ 并且 $M \\leq 500$。 \n- 对于所有数据，$1 \\leq N \\leq 1,000,000$，$1 \\leq M \\leq 1,000,000$，$1 \\leq W_X < E_X \\leq 2,000,000$。", "locale": "zh-CN"}}}
{"pid": "P4687", "type": "P", "difficulty": 7, "samples": [["6 9\n42\n5\n4 1 6 3 12\n3 6 5 6 9\n1 3 3 8 24\n3 8 6 9 21\n5 1 6 2 20", "4"], ["13 5\n0\n8\n8 4 10 4 1\n4 3 4 4 1\n10 2 12 2 2\n8 2 8 4 3\n2 4 6 4 5\n10 3 10 4 8\n12 3 12 4 13\n2 2 4 2 21", "3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2008", "IOI"], "title": "[IOI 2008] Pyramid Base", "background": "", "description": "你要在自己财力许可的范围内寻找一个尽可能大的地方，以便兴建一个新的金字塔。为帮助你作出决定，为你提供了土地测绘图。为方便起见，该地块被划分为由$M\\times N$个小正方形构成的网格。金字塔的地基部份必须是正方形，而且各边要与这些方格平行。\n\n测绘图中标出了$P$个有可能重叠的障碍物，这些障碍物是上述网格上的长方形，其各边与方格平行。为了建造金字塔，任何塔基所占方格中的障碍物必须被移走。移除障碍物$i$需要付出成本$C_i$。当移除一个障碍物时，需要将障碍物整个地移除，即不能只移除障碍物的一部份。同时，移除一个障碍物对与其重叠的其他障碍物无任何影响。\n\n已知测绘图中$M$和$N$的大小，对$P$个障碍物的描述，移走每个障碍物的成本以及你的预算$B$。编写程序，找出在移走障碍物总成本不超过$B$的前提下金字塔地基的最大边长。 \n\n", "inputFormat": "你的程序需要从标准输入上读入以下数据： \n- 第一行包含两个以单个空格分隔的整数，分别表示$M$及$N$。 \n- 第二行包含整数$B$，是你可付出的最大成本（即你的预算）。 \n- 第三行包含整数$P$，是测绘图中标出的障碍物数量。 \n- 以下$P$行的每一行表示一个障碍物。其中第$i$ 行表示第$i$个障碍物。每一行包含$5$个以单个空格分隔的整数$X_{i1}, Y_{i1}, X_{i2}, Y_{i2}$和$C_i$，分别表示障碍物左下角小正方形的座标，右上角小正方形的座标，以及移除这个障碍物的成本。网格左下角的小正方形座标为$(1,1)$，而其右上角小正方形为$(M, N)$。 ", "outputFormat": "你的程序必须向标准输出写出一行，该行只含一个整数，即金字塔基可能的最大边长。如果无法建造任何金字塔，程序应输出0。 ", "hint": "### 样例说明\n\n样例1：\n\n![](https://cdn.luogu.com.cn/upload/pic/20909.png )\n\n样例2：\n\n![](https://cdn.luogu.com.cn/upload/pic/20910.png )\n\n### 数据范围\n\n程序用三组不相交的数据进行评测。以下限制适用于所有的测试数据： $1 \\leq M, N \\leq 1,000,000$ 网格的尺寸。 $1 \\leq Ci \\leq 7,000$ 移除障碍物i的成本。 对每个障碍物$i$均有 $1 \\leq X_{i1} \\leq X_{i2} \\leq M$ 并且 $1 \\leq Y_{i1} \\leq Y_{i2}\\leq N$。 \n\n第一组测试总分值35分： \n\n- $B = 0$ ——可以付出的最大成本。（不可移除任何障碍物）\n- $1\\leq P \\leq 1,000$ ——网格中障碍物的数目。\n\n第二组测试总分值35分：\n\n- $0 < B \\leq 2,000,000,000$ ——你的预算。\n\n- $1\\leq P \\leq 30,000$ ——网格中障碍物的数目。 \n\n第三组测试值30分：\n\n- $B = 0$ ——你的预算。（不可以移除任何障碍物）\n\n- $1\\leq P \\leq 400,000$ ——网格中障碍物的数目。 ", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2008] Pyramid Base", "background": "", "description": "You want to find the largest possible place you can afford to build a new pyramid. To help you decide, you are given a land survey map. For convenience, the area is divided into a grid of $M \\times N$ small squares. The base of the pyramid must be a square, and each side must be parallel to the grid lines.\n\nThe map marks $P$ obstacles that may overlap. These obstacles are rectangles on the grid, with sides parallel to the grid lines. To build the pyramid, any obstacle that occupies any square covered by the base must be removed. Removing obstacle $i$ costs $C_i$. When removing an obstacle, you must remove the entire obstacle; you cannot remove only part of it. Also, removing one obstacle does not affect any other obstacles that overlap with it.\n\nGiven $M$ and $N$, the description of the $P$ obstacles, the cost to remove each obstacle, and your budget $B$, write a program to find the maximum possible side length of the pyramid base such that the total cost of removed obstacles does not exceed $B$.", "inputFormat": "Your program should read the following data from standard input:\n- The first line contains two integers separated by a single space, representing $M$ and $N$.\n- The second line contains an integer $B$, the maximum cost you can pay (i.e., your budget).\n- The third line contains an integer $P$, the number of obstacles marked on the map.\n- The next $P$ lines each describe one obstacle. The $i$-th of these lines describes obstacle $i$. Each line contains $5$ integers separated by single spaces: $X_{i1}, Y_{i1}, X_{i2}, Y_{i2}$, and $C_i$, representing the coordinates of the lower-left small square of the obstacle, the coordinates of the upper-right small square of the obstacle, and the cost to remove this obstacle. The coordinate of the lower-left small square of the grid is $(1,1)$, and the upper-right small square is $(M, N)$.", "outputFormat": "Your program must write one line to standard output containing a single integer, the maximum possible side length of the pyramid base. If it is not possible to build any pyramid, output $0$.", "hint": "### Sample Explanation\n\nSample 1:\n\n![](https://cdn.luogu.com.cn/upload/pic/20909.png )\n\nSample 2:\n\n![](https://cdn.luogu.com.cn/upload/pic/20910.png )\n\n### Constraints\n\nThe program is evaluated using three non-overlapping groups of testdata. The following limits apply to all testdata: $1 \\leq M, N \\leq 1,000,000$, the size of the grid. $1 \\leq Ci \\leq 7,000$, the cost to remove obstacle $i$. For each obstacle $i$, $1 \\leq X_{i1} \\leq X_{i2} \\leq M$ and $1 \\leq Y_{i1} \\leq Y_{i2}\\leq N$.\n\nThe first group is worth 35 points:\n\n- $B = 0$, the maximum cost you can pay (no obstacles can be removed).\n- $1 \\leq P \\leq 1,000$, the number of obstacles in the grid.\n\nThe second group is worth 35 points:\n\n- $0 < B \\leq 2,000,000,000$, your budget.\n- $1 \\leq P \\leq 30,000$, the number of obstacles in the grid.\n\nThe third group is worth 30 points:\n\n- $B = 0$, your budget (no obstacles can be removed).\n- $1 \\leq P \\leq 400,000$, the number of obstacles in the grid.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2008] Pyramid Base", "background": "", "description": "你要在自己财力许可的范围内寻找一个尽可能大的地方，以便兴建一个新的金字塔。为帮助你作出决定，为你提供了土地测绘图。为方便起见，该地块被划分为由$M\\times N$个小正方形构成的网格。金字塔的地基部份必须是正方形，而且各边要与这些方格平行。\n\n测绘图中标出了$P$个有可能重叠的障碍物，这些障碍物是上述网格上的长方形，其各边与方格平行。为了建造金字塔，任何塔基所占方格中的障碍物必须被移走。移除障碍物$i$需要付出成本$C_i$。当移除一个障碍物时，需要将障碍物整个地移除，即不能只移除障碍物的一部份。同时，移除一个障碍物对与其重叠的其他障碍物无任何影响。\n\n已知测绘图中$M$和$N$的大小，对$P$个障碍物的描述，移走每个障碍物的成本以及你的预算$B$。编写程序，找出在移走障碍物总成本不超过$B$的前提下金字塔地基的最大边长。 \n\n", "inputFormat": "你的程序需要从标准输入上读入以下数据： \n- 第一行包含两个以单个空格分隔的整数，分别表示$M$及$N$。 \n- 第二行包含整数$B$，是你可付出的最大成本（即你的预算）。 \n- 第三行包含整数$P$，是测绘图中标出的障碍物数量。 \n- 以下$P$行的每一行表示一个障碍物。其中第$i$ 行表示第$i$个障碍物。每一行包含$5$个以单个空格分隔的整数$X_{i1}, Y_{i1}, X_{i2}, Y_{i2}$和$C_i$，分别表示障碍物左下角小正方形的座标，右上角小正方形的座标，以及移除这个障碍物的成本。网格左下角的小正方形座标为$(1,1)$，而其右上角小正方形为$(M, N)$。 ", "outputFormat": "你的程序必须向标准输出写出一行，该行只含一个整数，即金字塔基可能的最大边长。如果无法建造任何金字塔，程序应输出0。 ", "hint": "### 样例说明\n\n样例1：\n\n![](https://cdn.luogu.com.cn/upload/pic/20909.png )\n\n样例2：\n\n![](https://cdn.luogu.com.cn/upload/pic/20910.png )\n\n### 数据范围\n\n程序用三组不相交的数据进行评测。以下限制适用于所有的测试数据： $1 \\leq M, N \\leq 1,000,000$ 网格的尺寸。 $1 \\leq Ci \\leq 7,000$ 移除障碍物i的成本。 对每个障碍物$i$均有 $1 \\leq X_{i1} \\leq X_{i2} \\leq M$ 并且 $1 \\leq Y_{i1} \\leq Y_{i2}\\leq N$。 \n\n第一组测试总分值35分： \n\n- $B = 0$ ——可以付出的最大成本。（不可移除任何障碍物）\n- $1\\leq P \\leq 1,000$ ——网格中障碍物的数目。\n\n第二组测试总分值35分：\n\n- $0 < B \\leq 2,000,000,000$ ——你的预算。\n\n- $1\\leq P \\leq 30,000$ ——网格中障碍物的数目。 \n\n第三组测试值30分：\n\n- $B = 0$ ——你的预算。（不可以移除任何障碍物）\n\n- $1\\leq P \\leq 400,000$ ——网格中障碍物的数目。 ", "locale": "zh-CN"}}}
{"pid": "P4688", "type": "P", "difficulty": 6, "samples": [["5 2\n1 2 2 3 3\n1 2 2 3 3 4\n1 5 1 5 1 5", "3\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "莫队", "离散化", "O2优化", "Ynoi", "离线处理", "bitset"], "title": "[Ynoi Easy Round 2016] 掉进兔子洞", "background": "5.632\n\n我（或者是在读这篇文字的你）不属于这个世界\n\n这是世界的界限\n\n6.41\n\n世界的意义必定存在于世界之外\n\n世界中的一切事物如其所存在般而存在，如其所发生般而发生\n\n世界之中不存在价值\n\n——《逻辑哲学论》\n\n我们的情人，不过是随便借个名字，用幻想吹出来的肥皂泡\n\n把信拿去吧，你可以使假戏成真\n\n我本来是无病呻吟，漫无目的的吐露爱情---现在这些漂泊不定的鸟儿有地方栖息了，你可以从信里看出来\n\n拿去吧---由于不是出自真心，话就说得格外动听，拿去吧，就这么办吧...\n\n![](https://cdn.luogu.com.cn/upload/pic/21091.png)\n\n果然……好女人要有的是，烟、楼顶……还有轻飘飘的衣服呀……\n\n某一天，水上由岐看见天上掉下了个布制玩偶\n\n为了被天空接受而投掷出的她的布偶，不知在天空飞舞了多少次，已经遍体鳞伤\n\n“被天空接受”——那是为了寻找不知何时开始在这个城市流传的“回归天空之路”的行为\n\n![](https://cdn.luogu.com.cn/upload/pic/21102.png)\n\n为了被天空接受而被扔出去的木偶，在空中飞舞并最终坠落\n\n那是为了将其本身即为世界的少女送予天空的少女的行为\n\n![](https://cdn.luogu.com.cn/upload/pic/21093.png)\n\n横跨银河，被称作Vega与Altair，或是织女星与牛郎星的两颗星星，再加上北十字星之顶的天鹅座构成了夏之大三角\n\n它被称作譬如三位一体的神圣的图形\n\n只有神圣的图形在天空闪耀之时，世界才与天空相遇\n\n![](https://cdn.luogu.com.cn/upload/pic/21094.png)\n\n我想试一试，第一次，也是最后一次的恶作剧\n\n![](https://cdn.luogu.com.cn/upload/pic/21095.png)\n\n那是...什么？\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n怎么回事？\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n但是我看到了，是那个杀死了大家吗？\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n不，那个东西，什么都没有做，只是...\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n只是...怎么回事...\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n我确实听到了头盖骨破碎的声音\n\n但是那个，并非是外面的世界\n\n而是总自己的里面传来的\n\n![](https://cdn.luogu.com.cn/upload/pic/21096.png)\n\n水上同学...我偶尔会思考这种事情...\n\n世界的极限到底在哪里呢...\n\n世界的...世界的尽头的更尽头...\n\n要是能有那种地方...\n\n要是假如我能够站在那个地方的话...我还是能跟平时一样看着那个尽头的风景吗？我有这种想法....\n\n我理所当然的想着这种事...然后决定似乎是有些奇怪啊\n\n因为那里是世界的尽头哦\n\n是世界的极限哦\n\n如果我能够看到那个的话...世界的极限...是否就等同于我的极限呢？\n\n因为，从那里看到的世界...我所看见的...不就是我的世界吗？\n\n世界的极限...就会变成我的极限吧~\n\n世界就是我看到的摸到的，并且感受到的东西\n\n那样的话，世界到底是什么呢\n\n世界和我到底有什么不同呢...我有这种想法\n\n有吗？\n\n世界和我的差别\n\n是一样的\n\n但是，或许其他人也有相同的感觉...\n\n就连你，或许也认为世界就是你自己吧\n\n并且，我觉得那个大概是正确的...\n\n虽然我不太清楚...大概是你也站在世界的尽头，跟我一样在看着它吧\n\n所以，你也和世界一样\n\n但是啊，那样果然很奇怪啊...\n\n如果世界就是我的话...为什么我会看不到你看到的世界呢？\n\n明明我的世界里有你存在...却看不到你看到的世界\n\n我从来没有看到过你看到的世界\n\n那个，简直就像是两者不会交集的平行宇宙一样...\n\n即使有现象暗示着那个东西存在...却是绝对的无法触碰...\n\n我...看不到你所在的世界...\n\n但是...\n\n那个也是真的是真的吗？\n\n我真的没有看到过你的世界吗...\n\n既然所有的人都平等的拥有她们自己的世界的话\n\n那么为什么世界会变成一个呢？\n\n为什么那么多的世界会存在于这里呢？\n\n世界变成一个的理由\n\n...我偶尔会思考这种事情\n\n所以...我才能够喜欢上你\n\n", "description": "您正在打 galgame，然后突然发现您今天太颓了，于是想写个数据结构题练练手：\n\n一个长为 $n$ 的序列 $a$。\n\n有 $m$ 个询问，每次询问三个区间，把三个区间中同时出现的数一个一个删掉，问最后三个区间剩下的数的个数和，询问独立。\n\n注意这里删掉指的是一个一个删，不是把等于这个值的数直接删完，比如三个区间是  $[1,2,2,3,3,3,3]$，$[1,2,2,3,3,3,3]$ 与 $[1,1,2,3,3]$，就一起扔掉了 $1$ 个 $1$，$1$ 个 $2$，$2$ 个 $3$。", "inputFormat": "第一行两个整数表示 $n,m$。\n\n第二行 $n$ 个整数表示 $a_i$。\n\n之后 $m$ 行，每行 $6$ 个整数 $l_1,r_1,l_2,r_2,l_3,r_3$ 表示这三个区间。", "outputFormat": "对于每个询问，输出一个整数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n$1\\leq n , m \\leq 10^5$，$1 \\leq a_i\\leq 10^9$，$1\\leq l_1,r_1,l_2,r_2,l_3,r_3\\leq n$，$l_1\\leq r_1$，$l_2\\leq r_2$，$l_3\\leq r_3$。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2016] Falling into the Rabbit Hole", "background": "5.632\n\nI (or you who are reading this text) do not belong to this world.\n\nThis is the boundary of the world.\n\n6.41\n\nThe meaning of the world must lie outside the world.\n\nEverything in the world exists as it exists, and happens as it happens.\n\nThere is no value in the world.\n\n— *Tractatus Logico-Philosophicus*\n\nOur lover is just a soap bubble blown up by fantasy, borrowing a name at random.\n\nTake the letter. You can make the fake act come true.\n\nI was originally just complaining for no reason, spilling out love without any goal—now these drifting birds finally have a place to rest, and you can see it from the letter.\n\nTake it—since it is not from the heart, the words sound especially pleasant. Take it, let’s do it like this...\n\n![](https://cdn.luogu.com.cn/upload/pic/21091.png)\n\nAs expected... what a good woman needs is: cigarettes, the rooftop... and light, fluttering clothes...\n\nOne day, Mizukami Yuki saw a cloth doll falling from the sky onto the water.\n\nThat cloth doll, thrown in order to be “accepted by the sky”, must have flown around in the sky countless times, already covered in wounds.\n\n“Accepted by the sky”—that was an act to search for the “road to return to the sky” that had been spreading in this city since who knows when.\n\n![](https://cdn.luogu.com.cn/upload/pic/21102.png)\n\nA puppet that was thrown out to be accepted by the sky, dancing in the air and finally falling.\n\nThat was the act of a girl who tried to offer to the sky a girl who herself is the world.\n\n![](https://cdn.luogu.com.cn/upload/pic/21093.png)\n\nSpanning the Milky Way, the two stars called Vega and Altair, or Zhinü-xing and Niulang-xing, together with Deneb at the top of the Northern Cross, form the Summer Triangle.\n\nIt is called, for example, a sacred figure like the Trinity.\n\nOnly when the sacred figure shines in the sky does the world meet the sky.\n\n![](https://cdn.luogu.com.cn/upload/pic/21094.png)\n\nI want to try it—a prank for the first time, and also the last time.\n\n![](https://cdn.luogu.com.cn/upload/pic/21095.png)\n\nThat is... what?\n\nNothing happened, you know. It’s just that Mamiya-kun jumped down on his own initiative~\n\nWhat is going on?\n\nNothing happened, you know. It’s just that Mamiya-kun jumped down on his own initiative~\n\nBut I saw it. Was it that thing that killed everyone?\n\nNothing happened, you know. It’s just that Mamiya-kun jumped down on his own initiative~\n\nNo, that thing did nothing. It’s just...\n\nNothing happened, you know. It’s just that Mamiya-kun jumped down on his own initiative~\n\nJust... what is going on...\n\nNothing happened, you know. It’s just that Mamiya-kun jumped down on his own initiative~\n\nI definitely heard the sound of a skull shattering.\n\nBut that was not from the outside world.\n\nIt came from inside myself.\n\n![](https://cdn.luogu.com.cn/upload/pic/21096.png)\n\nMizukami... I sometimes think about things like this...\n\nWhere exactly is the limit of the world...\n\nBeyond the end of the world... even further beyond...\n\nIf there were such a place...\n\nIf I could stand at that place... could I still look at the scenery at the end, just like usual? I think about that....\n\nI naturally thought about it... and then decided that it seems a bit strange.\n\nBecause that is the end of the world.\n\nIt is the limit of the world.\n\nIf I can see that... then would the limit of the world... be equal to my limit?\n\nBecause the world seen from there... what I see... is my world, isn’t it?\n\nThe limit of the world... will become my limit~\n\nThe world is what I see, touch, and feel.\n\nIf so, what exactly is the world?\n\nWhat is the difference between the world and me... I think about that.\n\nIs there?\n\nThe difference between the world and me.\n\nIt is the same.\n\nBut perhaps other people also feel the same...\n\nEven you might also think that the world is yourself.\n\nAnd I think that is probably correct...\n\nAlthough I am not very sure... maybe you are also standing at the end of the world, looking at it like me.\n\nSo you are also the same as the world.\n\nBut... that is indeed strange...\n\nIf the world is me... why can’t I see the world that you see?\n\nEven though you exist in my world... I still can’t see the world that you see.\n\nI have never seen the world that you see.\n\nThat is almost like two parallel universes that never intersect...\n\nEven if there are phenomena suggesting that thing exists... it is absolutely untouchable...\n\nI... can’t see the world where you are...\n\nBut...\n\nIs that really true?\n\nHave I really never seen your world...\n\nIf everyone equally has their own world,\n\nthen why does the world become one?\n\nWhy do so many worlds exist here?\n\nThe reason why the world becomes one\n\n...I sometimes think about such things.\n\nSo... that is why I can come to like you.", "description": "You are playing a galgame, and suddenly realize you have been slacking off too much today, so you want to write a data structure problem to practice:\n\nThere is a sequence $a$ of length $n$.\n\nThere are $m$ queries. Each query gives three intervals. For numbers that appear in all three intervals, delete them one by one. Ask for the sum of the counts of remaining numbers in the three intervals at the end. Queries are independent.\n\nNote that “delete” means deleting one by one, not deleting all elements equal to that value at once. For example, if the three intervals are $[1,2,2,3,3,3,3]$, $[1,2,2,3,3,3,3]$, and $[1,1,2,3,3]$, then we throw away $1$ occurrence of $1$, $1$ occurrence of $2$, and $2$ occurrences of $3$ together.", "inputFormat": "The first line contains two integers $n,m$.\n\nThe second line contains $n$ integers denoting $a_i$.\n\nThen follow $m$ lines. Each line contains $6$ integers $l_1,r_1,l_2,r_2,l_3,r_3$ describing the three intervals.", "outputFormat": "For each query, output one integer denoting the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477\n\n$1\\leq n , m \\leq 10^5$, $1 \\leq a_i\\leq 10^9$, $1\\leq l_1,r_1,l_2,r_2,l_3,r_3\\leq n$, $l_1\\leq r_1$, $l_2\\leq r_2$, $l_3\\leq r_3$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2016] 掉进兔子洞", "background": "5.632\n\n我（或者是在读这篇文字的你）不属于这个世界\n\n这是世界的界限\n\n6.41\n\n世界的意义必定存在于世界之外\n\n世界中的一切事物如其所存在般而存在，如其所发生般而发生\n\n世界之中不存在价值\n\n——《逻辑哲学论》\n\n我们的情人，不过是随便借个名字，用幻想吹出来的肥皂泡\n\n把信拿去吧，你可以使假戏成真\n\n我本来是无病呻吟，漫无目的的吐露爱情---现在这些漂泊不定的鸟儿有地方栖息了，你可以从信里看出来\n\n拿去吧---由于不是出自真心，话就说得格外动听，拿去吧，就这么办吧...\n\n![](https://cdn.luogu.com.cn/upload/pic/21091.png)\n\n果然……好女人要有的是，烟、楼顶……还有轻飘飘的衣服呀……\n\n某一天，水上由岐看见天上掉下了个布制玩偶\n\n为了被天空接受而投掷出的她的布偶，不知在天空飞舞了多少次，已经遍体鳞伤\n\n“被天空接受”——那是为了寻找不知何时开始在这个城市流传的“回归天空之路”的行为\n\n![](https://cdn.luogu.com.cn/upload/pic/21102.png)\n\n为了被天空接受而被扔出去的木偶，在空中飞舞并最终坠落\n\n那是为了将其本身即为世界的少女送予天空的少女的行为\n\n![](https://cdn.luogu.com.cn/upload/pic/21093.png)\n\n横跨银河，被称作Vega与Altair，或是织女星与牛郎星的两颗星星，再加上北十字星之顶的天鹅座构成了夏之大三角\n\n它被称作譬如三位一体的神圣的图形\n\n只有神圣的图形在天空闪耀之时，世界才与天空相遇\n\n![](https://cdn.luogu.com.cn/upload/pic/21094.png)\n\n我想试一试，第一次，也是最后一次的恶作剧\n\n![](https://cdn.luogu.com.cn/upload/pic/21095.png)\n\n那是...什么？\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n怎么回事？\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n但是我看到了，是那个杀死了大家吗？\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n不，那个东西，什么都没有做，只是...\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n只是...怎么回事...\n\n什么事也没有哦，只是，间宫君他自己主动跳下去了而已哦~\n\n我确实听到了头盖骨破碎的声音\n\n但是那个，并非是外面的世界\n\n而是总自己的里面传来的\n\n![](https://cdn.luogu.com.cn/upload/pic/21096.png)\n\n水上同学...我偶尔会思考这种事情...\n\n世界的极限到底在哪里呢...\n\n世界的...世界的尽头的更尽头...\n\n要是能有那种地方...\n\n要是假如我能够站在那个地方的话...我还是能跟平时一样看着那个尽头的风景吗？我有这种想法....\n\n我理所当然的想着这种事...然后决定似乎是有些奇怪啊\n\n因为那里是世界的尽头哦\n\n是世界的极限哦\n\n如果我能够看到那个的话...世界的极限...是否就等同于我的极限呢？\n\n因为，从那里看到的世界...我所看见的...不就是我的世界吗？\n\n世界的极限...就会变成我的极限吧~\n\n世界就是我看到的摸到的，并且感受到的东西\n\n那样的话，世界到底是什么呢\n\n世界和我到底有什么不同呢...我有这种想法\n\n有吗？\n\n世界和我的差别\n\n是一样的\n\n但是，或许其他人也有相同的感觉...\n\n就连你，或许也认为世界就是你自己吧\n\n并且，我觉得那个大概是正确的...\n\n虽然我不太清楚...大概是你也站在世界的尽头，跟我一样在看着它吧\n\n所以，你也和世界一样\n\n但是啊，那样果然很奇怪啊...\n\n如果世界就是我的话...为什么我会看不到你看到的世界呢？\n\n明明我的世界里有你存在...却看不到你看到的世界\n\n我从来没有看到过你看到的世界\n\n那个，简直就像是两者不会交集的平行宇宙一样...\n\n即使有现象暗示着那个东西存在...却是绝对的无法触碰...\n\n我...看不到你所在的世界...\n\n但是...\n\n那个也是真的是真的吗？\n\n我真的没有看到过你的世界吗...\n\n既然所有的人都平等的拥有她们自己的世界的话\n\n那么为什么世界会变成一个呢？\n\n为什么那么多的世界会存在于这里呢？\n\n世界变成一个的理由\n\n...我偶尔会思考这种事情\n\n所以...我才能够喜欢上你\n\n", "description": "您正在打 galgame，然后突然发现您今天太颓了，于是想写个数据结构题练练手：\n\n一个长为 $n$ 的序列 $a$。\n\n有 $m$ 个询问，每次询问三个区间，把三个区间中同时出现的数一个一个删掉，问最后三个区间剩下的数的个数和，询问独立。\n\n注意这里删掉指的是一个一个删，不是把等于这个值的数直接删完，比如三个区间是  $[1,2,2,3,3,3,3]$，$[1,2,2,3,3,3,3]$ 与 $[1,1,2,3,3]$，就一起扔掉了 $1$ 个 $1$，$1$ 个 $2$，$2$ 个 $3$。", "inputFormat": "第一行两个整数表示 $n,m$。\n\n第二行 $n$ 个整数表示 $a_i$。\n\n之后 $m$ 行，每行 $6$ 个整数 $l_1,r_1,l_2,r_2,l_3,r_3$ 表示这三个区间。", "outputFormat": "对于每个询问，输出一个整数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n$1\\leq n , m \\leq 10^5$，$1 \\leq a_i\\leq 10^9$，$1\\leq l_1,r_1,l_2,r_2,l_3,r_3\\leq n$，$l_1\\leq r_1$，$l_2\\leq r_2$，$l_3\\leq r_3$。", "locale": "zh-CN"}}}
{"pid": "P4689", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 3 4 5\n1 2\n1 3\n3 4\n3 5\n2 4 5\n2 1 5\n2 3 5\n1 5\n2 4 5", "0\n1\n1\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "莫队", "离散化", "O2优化", "构造", "Ynoi"], "title": "[Ynoi Easy Round 2016] 这是我自己的发明", "background": "一切伟大的世界历史事件与人物，可以说都会出现两次\n\n第一次是作为悲剧出现\n\n第二次，则是作为笑剧出现\n\n——《路易.波拿巴的雾月十八日》\n\n感动、\n\n痛苦、\n\n以及快乐、\n\n都只是遥不可及的宝石\n\n即便如此，人们啊，\n\n获得幸福吧！\n\n![](https://cdn.luogu.com.cn/upload/pic/21098.png)\n\n世界将在7月20日终结\n\n世界回归天空的日子\n\n万物被天空侵染的日子\n\n回归天空的日子\n\n世界必须回归\n\n世界的极限\n\n世界的尽头\n\n世界的终结\n\n![](https://cdn.luogu.com.cn/upload/pic/21099.png)\n\n你看…那就是极限…最尽头的天空\n\n如今，已无应该之事了如今，已无忘却之物了\n\n不需要的话语\n\n![](https://cdn.luogu.com.cn/upload/pic/21100.png)\n\n告别了永不相交的平行，我被吸进了…\n\n垂直下落的世界\n\n![](https://cdn.luogu.com.cn/upload/pic/21101.png)\n\n虽哭亦喜\n\n虽悲亦喜\n\n各种感情混在一起...\n\n比起其他所有，想必还是高兴占多吧\n\n她高兴地抱着我\n\n紧紧地抱着\n\n再也不会松开了...\n\n想永远这样...\n\n她的思绪，以比语言更快的速度，传达给了我\n\n有些东西，比语言更快\n\n她的思绪，以比语言更快的速度，传达给了我\n\n有些东西，比语音更准确\n\n世界上无论多么短暂的瞬间，都有意义\n\n有意义\n\n块临近终结了\n\n最后的瞬间\n\n啊啊...\n\n远方的警笛声\n\n黑色的天空\n\n月正笑\n\n地正润潮\n\n星正舞\n\n风正凉\n\n在我怀中，温暖的，\n\n橘希实香\n\n![](https://cdn.luogu.com.cn/upload/pic/21103.png)\n\n她在我的怀中...静静地合上了双眼\n\n然后我也...\n\n静静地合上了双眼", "description": "您正在打 galgame，然后突然家长进来了，于是您假装在写数据结构题：\n\n给一个树，$n$ 个点，有点权，初始根是 1。\n\n$m$ 个操作，种类如下：\n\n`1 x` 将树根换为 $x$。\n\n`2 x y` 给出两个点 $x,y$，从 $x$ 的子树中选每一个点，$y$ 的子树中选每一个点，求点权相等的情况数。\n", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个数，表示每个点的点权 $a_i$。\n\n之后 $n-1$ 行 , 每行两个数 $x,y$ , 表示一条边。\n\n之后 $m$ 行，每行表示一个操作。", "outputFormat": "对于每个询问，输出一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n【数据范围】   \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1 \\le m \\le 5\\times 10^5$ , $1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2016] This Is My Own Invention", "background": "All great world-historical facts and characters, so to speak, occur twice.\n\nThe first time as tragedy.\n\nThe second time as farce.\n\n— *The Eighteenth Brumaire of Louis Bonaparte*\n\nMoved,\n\nIn pain,\n\nAnd in joy,\n\nAre all just faraway gems.\n\nEven so, people,\n\nObtain happiness!\n\n![](https://cdn.luogu.com.cn/upload/pic/21098.png)\n\nThe world will end on July 20.\n\nThe day the world returns to the sky.\n\nThe day everything is stained by the sky.\n\nThe day it returns to the sky.\n\nThe world must return.\n\nThe world’s limit.\n\nThe end of the world.\n\nThe end of the world.\n\n![](https://cdn.luogu.com.cn/upload/pic/21099.png)\n\nLook... that is the limit... the sky at the very end.\n\nNow, there is nothing that should be done. Now, there is nothing left to forget.\n\nWords are not needed.\n\n![](https://cdn.luogu.com.cn/upload/pic/21100.png)\n\nSaying goodbye to the parallel that never intersected, I was sucked into...\n\nA world of vertical falling.\n\n![](https://cdn.luogu.com.cn/upload/pic/21101.png)\n\nCrying yet joyful.\n\nSad yet joyful.\n\nAll kinds of feelings mixed together...\n\nCompared to everything else, happiness probably takes up more.\n\nShe hugged me happily.\n\nHeld me tightly.\n\nNever letting go again...\n\nI want it to be like this forever...\n\nHer thoughts reached me faster than words.\n\nSome things are faster than words.\n\nHer thoughts reached me faster than words.\n\nSome things are more accurate than speech.\n\nNo matter how brief a moment is in this world, it has meaning.\n\nMeaning.\n\nThe block is nearing its end.\n\nThe final moment.\n\nAh...\n\nA distant siren.\n\nA black sky.\n\nThe moon is smiling.\n\nThe ground is damp.\n\nThe stars are dancing.\n\nThe wind is cool.\n\nWarm in my arms,\n\nKishima Kikkou.\n\n![](https://cdn.luogu.com.cn/upload/pic/21103.png)\n\nIn my arms... she quietly closed her eyes.\n\nAnd then I also...\n\nQuietly closed my eyes.", "description": "You are playing a galgame, and then your parents suddenly come in, so you pretend you are solving a data structure problem.\n\nGiven a tree with $n$ nodes. Each node has a weight. The initial root is $1$.\n\nThere are $m$ operations of the following types:\n\n`1 x` Change the root of the tree to $x$.\n\n`2 x y` Given two nodes $x, y$, choose every node from the subtree of $x$ and every node from the subtree of $y$, and count the number of pairs whose node weights are equal.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $n$ integers, where the $i$-th integer is the node weight $a_i$.\n\nThe next $n-1$ lines each contain two integers $x, y$, indicating an edge.\n\nThe next $m$ lines each describe one operation.", "outputFormat": "For each query, output one integer representing the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477\n\nConstraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 5 \\times 10^5$, $1 \\le a_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2016] 这是我自己的发明", "background": "一切伟大的世界历史事件与人物，可以说都会出现两次\n\n第一次是作为悲剧出现\n\n第二次，则是作为笑剧出现\n\n——《路易.波拿巴的雾月十八日》\n\n感动、\n\n痛苦、\n\n以及快乐、\n\n都只是遥不可及的宝石\n\n即便如此，人们啊，\n\n获得幸福吧！\n\n![](https://cdn.luogu.com.cn/upload/pic/21098.png)\n\n世界将在7月20日终结\n\n世界回归天空的日子\n\n万物被天空侵染的日子\n\n回归天空的日子\n\n世界必须回归\n\n世界的极限\n\n世界的尽头\n\n世界的终结\n\n![](https://cdn.luogu.com.cn/upload/pic/21099.png)\n\n你看…那就是极限…最尽头的天空\n\n如今，已无应该之事了如今，已无忘却之物了\n\n不需要的话语\n\n![](https://cdn.luogu.com.cn/upload/pic/21100.png)\n\n告别了永不相交的平行，我被吸进了…\n\n垂直下落的世界\n\n![](https://cdn.luogu.com.cn/upload/pic/21101.png)\n\n虽哭亦喜\n\n虽悲亦喜\n\n各种感情混在一起...\n\n比起其他所有，想必还是高兴占多吧\n\n她高兴地抱着我\n\n紧紧地抱着\n\n再也不会松开了...\n\n想永远这样...\n\n她的思绪，以比语言更快的速度，传达给了我\n\n有些东西，比语言更快\n\n她的思绪，以比语言更快的速度，传达给了我\n\n有些东西，比语音更准确\n\n世界上无论多么短暂的瞬间，都有意义\n\n有意义\n\n块临近终结了\n\n最后的瞬间\n\n啊啊...\n\n远方的警笛声\n\n黑色的天空\n\n月正笑\n\n地正润潮\n\n星正舞\n\n风正凉\n\n在我怀中，温暖的，\n\n橘希实香\n\n![](https://cdn.luogu.com.cn/upload/pic/21103.png)\n\n她在我的怀中...静静地合上了双眼\n\n然后我也...\n\n静静地合上了双眼", "description": "您正在打 galgame，然后突然家长进来了，于是您假装在写数据结构题：\n\n给一个树，$n$ 个点，有点权，初始根是 1。\n\n$m$ 个操作，种类如下：\n\n`1 x` 将树根换为 $x$。\n\n`2 x y` 给出两个点 $x,y$，从 $x$ 的子树中选每一个点，$y$ 的子树中选每一个点，求点权相等的情况数。\n", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个数，表示每个点的点权 $a_i$。\n\n之后 $n-1$ 行 , 每行两个数 $x,y$ , 表示一条边。\n\n之后 $m$ 行，每行表示一个操作。", "outputFormat": "对于每个询问，输出一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n【数据范围】   \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1 \\le m \\le 5\\times 10^5$ , $1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P4690", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 3 4 5\n2 1 5\n1 2 3 4\n2 1 5\n2 3 3\n2 2 4", "5\n3\n1\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2016", "树状数组", "颜色段均摊（珂朵莉树 ODT）", "cdq 分治", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2016] 镜中的昆虫", "background": "镜子的世界里会有美丽的东西吗？\n\n镜子的世界里会有快乐的事情吗？\n\n镜子世界的我，像我一样摆着一副无聊的表情\n\n——出自《镜之国的爱丽丝》\n\n![](https://cdn.luogu.com.cn/upload/pic/21104.png)\n\n两个少女的战斗故事\n\n文学代表强烈的意志，化学是对抗物理世界的力量\n\n她们只有这两样对抗现实的武器\n\n![](https://cdn.luogu.com.cn/upload/pic/21105.png)\n\n啊，勒布雷！\n\n我今天要登上乳白色的月球了！\n\n不需要发明是机器，真是如此，我要一跃而出！\n\n没错朋友！那个月亮的世界！\n\n才是为我们创造的世界！\n\n不止一个我所爱的人，大概都被放逐到那里...然后在等着我...\n\n苏格拉底！伽利略！\n\n物质的基本要素的灵魂就是...\n\n这是...不，这有问题...哥白尼说过！\n\n没错朋友们，究竟为何，会中了魔障？\n\n究竟为何，会中了魔障，他到底去双桅战船上干什么呢？\n\n作为哲学家！\n\n物理学家！\n\n诗人！\n\n剑客！\n\n音乐家！\n\n空中旅行家！\n\n针尖对麦芒的辩士！\n\n他无所不能\n\n作为至高...但是...\n\n却又一事无成...\n\n...没错，你们这些家伙，想夺走我的一切！\n\n...来，夺走吧，夺走就是了...\n\n但是...无论你们再怎么叫嚷，在去往新世界的路上，我还是会带走一个！\n\n让我看看你坚强的心吧！\n\n没错，你帽子上的羽饰！\n\n象征你内心的勇气的纹章...毛子上的羽饰！\n\n对不起，我该走了，我不能让人久等！\n\n你们看...月亮来迎接我了！\n\nMon panache！\n\n![](https://cdn.luogu.com.cn/upload/pic/21106.png)\n\n我往空中踏出一步\n\n两人拼命地想要拉住我\n\n但是我往空中踏出一步\n\n没错\n\n我要为了崭新的世界，从天而降\n\n为了获得新的力量\n\n为了新的真实\n\n我踏出了这一步\n\n从手上，感到了两人的颤抖\n\n没关系...\n\n我在你们身边！\n\nSora！\n\n![](https://cdn.luogu.com.cn/upload/pic/21109.png)\n\n我完全投身于空中\n\n我的身体瞬间从空中向地面落去\n\n我紧紧地握住两人手腕，拉着两人\n\n看见两人的表情...\n\n她们边哭边笑...\n\n似乎很害怕...\n\n却又似很高兴的表情...\n\n啊...\n\n什么嘛，飞翔好舒服啊\n\n宛如变成了天使一般...\n\n好快的速度...\n\n好快的风...\n\n但是却听不见声音...\n\n世界在静静地回转\n\n已经，马上就要到地面了...\n\n空气力学的先驱者...\n\n我知道一切都在回转的天空，\n\n还有包容着我的大地\n\n还差一点，就抵达世界了...\n\n还差一点，就抵达地面了...\n\n接近着的影子\n\n地面映出我的身影\n", "description": "您正在欣赏 galgame 的 HS，然后游戏崩溃了，于是您只能做数据结构题了：\n\n维护一个长为 $n$ 的序列 $a_i$，有 $m$ 次操作。\n\n1. 将区间 $[l,r]$ 的值修改为 $x$。\n\n2. 询问区间 $[l,r]$ 出现了多少种不同的数，也就是说同一个数出现多次只算一个。\n", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示 $a_i$。\n\n后面 $m$ 行每行为 $1\\ l\\ r\\ x$ 或者 $2\\ l\\ r$ ，分别表示修改和询问。", "outputFormat": "对于每个询问，输出一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n$1\\leq n , m \\leq 10^5$，$1\\leq a_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2016] Insects in the Mirror", "background": "Are there beautiful things in the world inside a mirror?\n\nAre there happy things in the world inside a mirror?\n\nMe in the mirror world, wearing the same bored expression as I do.\n\n— From *Alice in the Mirror Country*\n\n![](https://cdn.luogu.com.cn/upload/pic/21104.png)\n\nA battle story of two girls.\n\nLiterature represents a strong will, and chemistry is the power to resist the physical world.\n\nThese are the only two weapons they have to fight reality.\n\n![](https://cdn.luogu.com.cn/upload/pic/21105.png)\n\nAh, Leblanc!\n\nToday I am going to climb onto the milky-white moon!\n\nThere is no need to invent a machine. Indeed, I will leap out in one jump!\n\nThat’s right, my friend! The world of that moon!\n\nThat is the world created for us!\n\nMore than one person I love was probably exiled there... and is waiting for me...\n\nSocrates! Galileo!\n\nThe soul of the basic elements of matter is...\n\nThis is... no, something is wrong... Copernicus said it before!\n\nThat’s right, my friends. Why on earth have I been bewitched?\n\nWhy on earth have I been bewitched? What on earth is he doing on a two-masted warship?\n\nAs a philosopher!\n\nA physicist!\n\nA poet!\n\nA swordsman!\n\nA musician!\n\nAn aerial traveler!\n\nA debater who argues needle to needle!\n\nHe can do anything.\n\nAs the supreme... but...\n\nyet he achieves nothing...\n\n...Yes, you guys want to take everything from me!\n\n...Come on, take it, just take it...\n\nBut... no matter how you shout, on the road to the new world, I will still take one thing with me!\n\nLet me see your strong heart!\n\nThat’s right, the plume on your hat!\n\nThe emblem of courage in your heart... the plume on your hat!\n\nSorry, I have to go. I can’t keep people waiting!\n\nLook... the moon has come to greet me!\n\nMon panache！\n\n![](https://cdn.luogu.com.cn/upload/pic/21106.png)\n\nI step into the air.\n\nThe two of them desperately try to pull me back.\n\nBut I step into the air.\n\nThat’s right.\n\nFor a brand-new world, I will fall from the sky.\n\nTo gain new power.\n\nFor a new truth.\n\nI take this step.\n\nFrom my hands, I feel the trembling of the two of them.\n\nIt’s okay...\n\nI am by your side!\n\nSora！\n\n![](https://cdn.luogu.com.cn/upload/pic/21109.png)\n\nI throw myself completely into the air.\n\nMy body instantly falls from the air toward the ground.\n\nI tightly grip their wrists and pull them along.\n\nSeeing their expressions...\n\nThey cry and laugh at the same time...\n\nThey seem very scared...\n\nyet also seem very happy...\n\nAh...\n\nWhat is this? Flying feels so comfortable.\n\nAs if I have become an angel...\n\nSuch fast speed...\n\nSuch fast wind...\n\nBut I can’t hear any sound...\n\nThe world is turning quietly.\n\nSoon, we are about to reach the ground...\n\nThe pioneer of aerodynamics...\n\nI know that everything is turning in the sky,\n\nand the earth that embraces me.\n\nJust a little more, and I will reach the world...\n\nJust a little more, and I will reach the ground...\n\nThe approaching shadow.\n\nThe ground reflects my silhouette.", "description": "You are enjoying HS in a galgame, but the game crashes, so you can only do a data structure problem:\n\nMaintain a sequence $a_i$ of length $n$, with $m$ operations.\n\n1. Modify the values in interval $[l,r]$ to $x$.\n\n2. Query how many different numbers appear in interval $[l,r]$. That is, if the same number appears multiple times, it is counted only once.", "inputFormat": "The first line contains two integers $n,m$.\n\nThe second line contains $n$ integers representing $a_i$.\n\nThe next $m$ lines are either $1\\ l\\ r\\ x$ or $2\\ l\\ r$, representing modification and query respectively.", "outputFormat": "For each query, output one number as the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477\n\nConstraints: $1\\leq n , m \\leq 10^5$，$1\\leq a_i\\leq 10^9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2016] 镜中的昆虫", "background": "镜子的世界里会有美丽的东西吗？\n\n镜子的世界里会有快乐的事情吗？\n\n镜子世界的我，像我一样摆着一副无聊的表情\n\n——出自《镜之国的爱丽丝》\n\n![](https://cdn.luogu.com.cn/upload/pic/21104.png)\n\n两个少女的战斗故事\n\n文学代表强烈的意志，化学是对抗物理世界的力量\n\n她们只有这两样对抗现实的武器\n\n![](https://cdn.luogu.com.cn/upload/pic/21105.png)\n\n啊，勒布雷！\n\n我今天要登上乳白色的月球了！\n\n不需要发明是机器，真是如此，我要一跃而出！\n\n没错朋友！那个月亮的世界！\n\n才是为我们创造的世界！\n\n不止一个我所爱的人，大概都被放逐到那里...然后在等着我...\n\n苏格拉底！伽利略！\n\n物质的基本要素的灵魂就是...\n\n这是...不，这有问题...哥白尼说过！\n\n没错朋友们，究竟为何，会中了魔障？\n\n究竟为何，会中了魔障，他到底去双桅战船上干什么呢？\n\n作为哲学家！\n\n物理学家！\n\n诗人！\n\n剑客！\n\n音乐家！\n\n空中旅行家！\n\n针尖对麦芒的辩士！\n\n他无所不能\n\n作为至高...但是...\n\n却又一事无成...\n\n...没错，你们这些家伙，想夺走我的一切！\n\n...来，夺走吧，夺走就是了...\n\n但是...无论你们再怎么叫嚷，在去往新世界的路上，我还是会带走一个！\n\n让我看看你坚强的心吧！\n\n没错，你帽子上的羽饰！\n\n象征你内心的勇气的纹章...毛子上的羽饰！\n\n对不起，我该走了，我不能让人久等！\n\n你们看...月亮来迎接我了！\n\nMon panache！\n\n![](https://cdn.luogu.com.cn/upload/pic/21106.png)\n\n我往空中踏出一步\n\n两人拼命地想要拉住我\n\n但是我往空中踏出一步\n\n没错\n\n我要为了崭新的世界，从天而降\n\n为了获得新的力量\n\n为了新的真实\n\n我踏出了这一步\n\n从手上，感到了两人的颤抖\n\n没关系...\n\n我在你们身边！\n\nSora！\n\n![](https://cdn.luogu.com.cn/upload/pic/21109.png)\n\n我完全投身于空中\n\n我的身体瞬间从空中向地面落去\n\n我紧紧地握住两人手腕，拉着两人\n\n看见两人的表情...\n\n她们边哭边笑...\n\n似乎很害怕...\n\n却又似很高兴的表情...\n\n啊...\n\n什么嘛，飞翔好舒服啊\n\n宛如变成了天使一般...\n\n好快的速度...\n\n好快的风...\n\n但是却听不见声音...\n\n世界在静静地回转\n\n已经，马上就要到地面了...\n\n空气力学的先驱者...\n\n我知道一切都在回转的天空，\n\n还有包容着我的大地\n\n还差一点，就抵达世界了...\n\n还差一点，就抵达地面了...\n\n接近着的影子\n\n地面映出我的身影\n", "description": "您正在欣赏 galgame 的 HS，然后游戏崩溃了，于是您只能做数据结构题了：\n\n维护一个长为 $n$ 的序列 $a_i$，有 $m$ 次操作。\n\n1. 将区间 $[l,r]$ 的值修改为 $x$。\n\n2. 询问区间 $[l,r]$ 出现了多少种不同的数，也就是说同一个数出现多次只算一个。\n", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示 $a_i$。\n\n后面 $m$ 行每行为 $1\\ l\\ r\\ x$ 或者 $2\\ l\\ r$ ，分别表示修改和询问。", "outputFormat": "对于每个询问，输出一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n$1\\leq n , m \\leq 10^5$，$1\\leq a_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P4692", "type": "P", "difficulty": 6, "samples": [["2 5\n6 6\n1 3 1 1 3 2 \n2 3 3 2 1 1 \n1 1 1\n1 1 2\n1 1 2\n1 1 1\n1 1 1", "1158\n1158\n1168\n1168\n1158\n1158"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "O2优化", "容斥原理", "Ynoi"], "title": "[Ynoi Easy Round 2016] 谁的梦", "background": "6.373 \n\n世界是独立于我的意志的。 \n\n6.374 \n\n就算我们所期望的全部的事情都发生了 \n\n这果然也只能说是命运的恩惠吧。 \n\n要问为什么，那是因为意志和世界之间 \n\n能够保证这件事的逻辑性的关联并不存在 \n\nLudwig Josef Johann Wittgenstein [逻辑哲学论] \n\n自从双胞胎的哥哥过世起，已经过了多久了呢… \n\n从那时起，我一直保存着那个布偶。 \n\n在那以后的我只是个影子…而这个布偶才是我… \n\n这样也并没有什么不好。 \n\n我觉得只要现在的我消失掉就行了… \n\n那两个人却救了这样的我。 \n\n一个是由歧姐… \n\n她又来到了我的身边… \n\n带着皆守哥…回到了我们的身边… \n\n水上由岐姐姐…温柔的姐姐 \n\n曾经非常喜欢皆守哥的人……\n\n![](https://cdn.luogu.com.cn/upload/pic/21195.png)\n\n回去的路上…\n\n平时不会经过的坡道…\n\n在登上那个坡道的途中…\n\n我看到了夜晚的太阳。\n\n明明就在附近，却一直不知道的巨大的向日葵。\n\n夜露使它的绒毛泛出了白光。\n\n碧蓝的月光和黄色的向日葵…\n\n就好像太阳和月亮的立场反过来一样…\n\n原本是那么耀眼的的太阳在地上，只能在其背后下发光的月亮在天上…\n\n黄色的向日葵被染成了碧蓝色。\n\n那副样子虽然很美丽…\n\n努力绽放的向日葵，看起来反而是柔弱的存在。\n\n在夜里向天空伸展的向日葵…\n\n我在车内一直追寻着它的身影…\n\n被夜晚的月光映照着的太阳。\n\n被染成碧蓝色的太阳…\n\n它的身影…我一直追寻着……\n\n![](https://cdn.luogu.com.cn/upload/pic/21196.png)\n\n被月光照亮的天台上…\n\n一个人影…\n\n明明只是一个人影…却好像…在和什么东西对峙着一样…\n\n皆守哥…\n\n月下的立像，一个人影。\n\n胸口在风中闪烁。\n\n放在胸前的手里的是…那时的小刀。\n\n和七年前同样的姿势。\n\n唯一不同的是，那里的人影只有一个。\n\n那把小刀，好像是被他自己刺入体内。\n\n![](https://cdn.luogu.com.cn/upload/pic/21197.png)\n\n是诅咒…\n\n这是理所当然的事…\n\n那并不是什么精神病…\n\n那是诅咒…\n\n下在幸存的我们身上的…诅咒…\n\n说不定，不仅仅是卓司哥…连由岐姐也在诅咒我们…\n\n所以变成这种结果…\n\n哥哥刺向了自己的胸口…\n\n破坏了我的半身…\n\n然后…还要把很多人送回到天空…\n\n回归天空的日子。\n\n交还灵魂的日子。\n\n那一天，卓司哥对我做的事情。\n\n杀了由岐姐的…那个行为…\n\n他想要再一次实行…\n\n这次…和很多人一起…\n\n![](https://cdn.luogu.com.cn/upload/pic/21198.png)\n\n不是…\n\n那是…我啊…\n\n是那个…坡道的事情啊…\n\n两个人一起看到向日葵的…那个坡道…\n\n…我说要爬上那个坡道…要去寻找爸爸的灵魂…\n\n我想，如果到了那个坡道的前方，就能取回爸爸的灵魂…爸爸就会复生的…\n\n如果越过向日葵之路…向着向日葵所朝向的天空延伸的…那个大大的坡道的话…\n大概，就会有爸爸的灵魂…\n\n爸爸的故乡的…大大的坡道…\n\n![](https://cdn.luogu.com.cn/upload/pic/21199.png)\n\n哥哥的身体浮在空中…\n\n我无言地跳了出去。\n\n啊啊…是这样啊…\n\n由岐姐也是这种心情啊…\n\n并没有什么道理可言…\n\n只是因为喜欢的人向着天空跳下去了…\n\n我想要抓住那个身体…\n\n我——", "description": "您正在打 galgame，突然断电了，于是您跑去物管处问，结果发现是由于一个光头踢了变压器一脚导致的，可能还要修很久，于是您决定想一个之前见过的数据结构题：\n\n定义一个序列的权值为不同数字的个数，例如 $[1,2,3,3]$  权值为 $3$。\n\n现在有 $n$ 个序列，我们在每个序列里面选一个连续非空子串，拼接起来，求所有选法得到的序列的权值之和。\n\n如果一个序列能通过多种方法被选择出来，那么计算多次。\n\n本题带修改操作，格式请参考输入格式。\n\n由于结果可能过大，请输出答案 $\\bmod 19260817$ 的结果。", "inputFormat": "第一行两个整数 $n,m$，表示有 $n$ 个序列，$m$ 次修改。\n\n第二行 $n$ 个整数，第 $i$ 个数是 $len_i$，表示第 $i$ 个序列的长度。\n\n之后 $n$ 行，每行 $len_i$ 个整数，表示第 $i$ 个序列。\n\n之后 $m$ 行，每行三个整数 $x,y,z$ 表示将第 $x$ 个序列的第 $y$ 个元素改为 $z$。", "outputFormat": "输出 $m + 1$ 行，每行一个整数，依次表示初始局面以及每次修改后的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477( partially uploaded )\n\n$1 \\leq n,m,len_i \\leq 10^5$，序列中的元素均为 $32$ 位整型数，$\\sum len_i \\leq 10^5$。\n\n共 $50$ 组数据。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2016] Whose Dream", "background": "6.373\n\nThe world is independent of my will.\n\n6.374\n\nEven if everything we hope for happens,\n\nin the end it can only be called a gift of fate.\n\nIf you ask why, it is because between will and the world,\n\nthe logical connection that can guarantee this does not exist.\n\nLudwig Josef Johann Wittgenstein [Tractatus Logico-Philosophicus]\n\nHow long has it been since my twin brother passed away…\n\nSince then, I have kept that stuffed doll.\n\nAfter that, I was only a shadow… and this stuffed doll was the real me…\n\nThat is not so bad either.\n\nI think it is enough if the current me disappears…\n\nBut those two people saved someone like me.\n\nOne of them was Yuki-nee…\n\nShe came back to my side again…\n\nBringing Minamori-nii… back to our side…\n\nMizukami Yuki-nee, a gentle older sister.\n\nSomeone who once liked Minamori-nii very much……\n\n![](https://cdn.luogu.com.cn/upload/pic/21195.png)\n\nOn the way back…\n\nA slope we usually would not pass…\n\nWhile climbing that slope…\n\nI saw the sun at night.\n\nA huge sunflower that was nearby, yet I never noticed it.\n\nThe night dew made its fuzz glow white.\n\nThe deep blue moonlight and the yellow sunflower…\n\nIt was as if the positions of the sun and the moon were reversed…\n\nThe sun, originally so dazzling, was on the ground, and the moon, which could only shine behind it, was in the sky…\n\nThe yellow sunflower was dyed deep blue.\n\nThat sight was very beautiful…\n\nBut the sunflower, blooming with all its might, instead looked like something fragile.\n\nThe sunflower stretching toward the sky at night…\n\nInside the car, I kept chasing its silhouette…\n\nThe sun illuminated by the moonlight at night.\n\nThe sun dyed deep blue…\n\nIts figure… I kept chasing it……\n\n![](https://cdn.luogu.com.cn/upload/pic/21196.png)\n\nOn the rooftop lit by moonlight…\n\nA shadow…\n\nClearly just a shadow… yet it seemed… to be confronting something…\n\nMinamori-nii…\n\nA statue under the moon, a shadow.\n\nHis chest flickered in the wind.\n\nIn the hand placed before his chest was… that small knife from back then.\n\nThe same posture as seven years ago.\n\nThe only difference was that there was only one shadow there.\n\nThat knife seemed to have been stabbed into his body by himself.\n\n![](https://cdn.luogu.com.cn/upload/pic/21197.png)\n\nIt is a curse…\n\nThis is only natural…\n\nIt is not some mental illness…\n\nIt is a curse…\n\nA curse placed on us survivors…\n\nPerhaps, not only Takushi-nii… but even Yuki-nee is cursing us…\n\nSo it ended up like this…\n\nMy brother stabbed his own chest…\n\nDestroyed my other half…\n\nAnd then… he will send many people back to the sky…\n\nThe day of returning to the sky.\n\nThe day of giving back the soul.\n\nWhat Takushi-nii did to me that day.\n\nThat act… of killing Yuki-nee…\n\nHe wants to do it once again…\n\nThis time… together with many people…\n\n![](https://cdn.luogu.com.cn/upload/pic/21198.png)\n\nNo…\n\nThat is… me…\n\nIt is that… slope…\n\nThat slope where two people saw the sunflower together…\n\n…I said I wanted to climb that slope… to look for Dad’s soul…\n\nI thought that if I reached beyond that slope, I could take back Dad’s soul… and Dad would come back to life…\n\nIf I crossed the sunflower road… and went toward that big slope that extends into the sky the sunflower faces…\nThen, probably, Dad’s soul would be there…\n\nThe big slope… of Dad’s hometown…\n\n![](https://cdn.luogu.com.cn/upload/pic/21199.png)\n\nMy brother’s body floated in the air…\n\nI jumped out without a word.\n\nAh… so that is how it is…\n\nYuki-nee felt like this too…\n\nThere is no reason to it…\n\nJust because the person I like jumped toward the sky…\n\nI wanted to grab that body…\n\nI—", "description": "You are playing a galgame when the power suddenly goes out. You run to the property management office to ask, and find out it was because a bald guy kicked the transformer, and it may take a long time to fix. So you decide to think about a data structure problem you saw before:\n\nDefine the weight of a sequence as the number of distinct numbers in it. For example, $[1,2,3,3]$ has weight $3$.\n\nNow there are $n$ sequences. For each sequence, we choose a non-empty contiguous substring, and concatenate them. Compute the sum of the weights of the resulting sequence over all choices.\n\nIf a sequence can be obtained in multiple ways, count it multiple times.\n\nThis problem includes modification operations; see the input format.\n\nSince the result may be too large, output the answer $\\bmod 19260817$.", "inputFormat": "The first line contains two integers $n,m$, meaning there are $n$ sequences and $m$ modifications.\n\nThe second line contains $n$ integers; the $i$-th number is $len_i$, meaning the length of the $i$-th sequence.\n\nThen follow $n$ lines; the $i$-th line contains $len_i$ integers, representing the $i$-th sequence.\n\nThen follow $m$ lines; each line contains three integers $x,y,z$, meaning change the $y$-th element of the $x$-th sequence to $z$.", "outputFormat": "Output $m + 1$ lines, each containing one integer, representing the answer for the initial state and after each modification, in order.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477 ( partially uploaded )\n\n$1 \\leq n,m,len_i \\leq 10^5$. The elements in the sequences are all $32$-bit integers, and $\\sum len_i \\leq 10^5$.\n\nThere are $50$ test cases.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2016] 谁的梦", "background": "6.373 \n\n世界是独立于我的意志的。 \n\n6.374 \n\n就算我们所期望的全部的事情都发生了 \n\n这果然也只能说是命运的恩惠吧。 \n\n要问为什么，那是因为意志和世界之间 \n\n能够保证这件事的逻辑性的关联并不存在 \n\nLudwig Josef Johann Wittgenstein [逻辑哲学论] \n\n自从双胞胎的哥哥过世起，已经过了多久了呢… \n\n从那时起，我一直保存着那个布偶。 \n\n在那以后的我只是个影子…而这个布偶才是我… \n\n这样也并没有什么不好。 \n\n我觉得只要现在的我消失掉就行了… \n\n那两个人却救了这样的我。 \n\n一个是由歧姐… \n\n她又来到了我的身边… \n\n带着皆守哥…回到了我们的身边… \n\n水上由岐姐姐…温柔的姐姐 \n\n曾经非常喜欢皆守哥的人……\n\n![](https://cdn.luogu.com.cn/upload/pic/21195.png)\n\n回去的路上…\n\n平时不会经过的坡道…\n\n在登上那个坡道的途中…\n\n我看到了夜晚的太阳。\n\n明明就在附近，却一直不知道的巨大的向日葵。\n\n夜露使它的绒毛泛出了白光。\n\n碧蓝的月光和黄色的向日葵…\n\n就好像太阳和月亮的立场反过来一样…\n\n原本是那么耀眼的的太阳在地上，只能在其背后下发光的月亮在天上…\n\n黄色的向日葵被染成了碧蓝色。\n\n那副样子虽然很美丽…\n\n努力绽放的向日葵，看起来反而是柔弱的存在。\n\n在夜里向天空伸展的向日葵…\n\n我在车内一直追寻着它的身影…\n\n被夜晚的月光映照着的太阳。\n\n被染成碧蓝色的太阳…\n\n它的身影…我一直追寻着……\n\n![](https://cdn.luogu.com.cn/upload/pic/21196.png)\n\n被月光照亮的天台上…\n\n一个人影…\n\n明明只是一个人影…却好像…在和什么东西对峙着一样…\n\n皆守哥…\n\n月下的立像，一个人影。\n\n胸口在风中闪烁。\n\n放在胸前的手里的是…那时的小刀。\n\n和七年前同样的姿势。\n\n唯一不同的是，那里的人影只有一个。\n\n那把小刀，好像是被他自己刺入体内。\n\n![](https://cdn.luogu.com.cn/upload/pic/21197.png)\n\n是诅咒…\n\n这是理所当然的事…\n\n那并不是什么精神病…\n\n那是诅咒…\n\n下在幸存的我们身上的…诅咒…\n\n说不定，不仅仅是卓司哥…连由岐姐也在诅咒我们…\n\n所以变成这种结果…\n\n哥哥刺向了自己的胸口…\n\n破坏了我的半身…\n\n然后…还要把很多人送回到天空…\n\n回归天空的日子。\n\n交还灵魂的日子。\n\n那一天，卓司哥对我做的事情。\n\n杀了由岐姐的…那个行为…\n\n他想要再一次实行…\n\n这次…和很多人一起…\n\n![](https://cdn.luogu.com.cn/upload/pic/21198.png)\n\n不是…\n\n那是…我啊…\n\n是那个…坡道的事情啊…\n\n两个人一起看到向日葵的…那个坡道…\n\n…我说要爬上那个坡道…要去寻找爸爸的灵魂…\n\n我想，如果到了那个坡道的前方，就能取回爸爸的灵魂…爸爸就会复生的…\n\n如果越过向日葵之路…向着向日葵所朝向的天空延伸的…那个大大的坡道的话…\n大概，就会有爸爸的灵魂…\n\n爸爸的故乡的…大大的坡道…\n\n![](https://cdn.luogu.com.cn/upload/pic/21199.png)\n\n哥哥的身体浮在空中…\n\n我无言地跳了出去。\n\n啊啊…是这样啊…\n\n由岐姐也是这种心情啊…\n\n并没有什么道理可言…\n\n只是因为喜欢的人向着天空跳下去了…\n\n我想要抓住那个身体…\n\n我——", "description": "您正在打 galgame，突然断电了，于是您跑去物管处问，结果发现是由于一个光头踢了变压器一脚导致的，可能还要修很久，于是您决定想一个之前见过的数据结构题：\n\n定义一个序列的权值为不同数字的个数，例如 $[1,2,3,3]$  权值为 $3$。\n\n现在有 $n$ 个序列，我们在每个序列里面选一个连续非空子串，拼接起来，求所有选法得到的序列的权值之和。\n\n如果一个序列能通过多种方法被选择出来，那么计算多次。\n\n本题带修改操作，格式请参考输入格式。\n\n由于结果可能过大，请输出答案 $\\bmod 19260817$ 的结果。", "inputFormat": "第一行两个整数 $n,m$，表示有 $n$ 个序列，$m$ 次修改。\n\n第二行 $n$ 个整数，第 $i$ 个数是 $len_i$，表示第 $i$ 个序列的长度。\n\n之后 $n$ 行，每行 $len_i$ 个整数，表示第 $i$ 个序列。\n\n之后 $m$ 行，每行三个整数 $x,y,z$ 表示将第 $x$ 个序列的第 $y$ 个元素改为 $z$。", "outputFormat": "输出 $m + 1$ 行，每行一个整数，依次表示初始局面以及每次修改后的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477( partially uploaded )\n\n$1 \\leq n,m,len_i \\leq 10^5$，序列中的元素均为 $32$ 位整型数，$\\sum len_i \\leq 10^5$。\n\n共 $50$ 组数据。", "locale": "zh-CN"}}}
{"pid": "P4693", "type": "P", "difficulty": 7, "samples": [["20 30\nF(1,2)\nF(1,3)\nF(1,7)\nF(1,9)\nF(9,5)\nF(3,8)\nF(3,20)\nF(3,6)\nF(8,15)\nF(8,19)\nF(20,14)\nF(20,12)\nF(6,13)\nF(6,18)\nF(13,4)\nF(12,11)\nF(12,17)\nF(17,10)\nF(17,16)\nE(3,9)\nE(8,6)\nA(12,0)\nD(4,6)\nE(2,7)\nB(3,12)\nD(4,6)\nC(8,0)\nD(13,5)\nD(1,7)\nE(12,14)", "36\n42\n56\n89\n95\n105\n90\n61"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2016] 炸脖龙 II", "background": "瞬间…\n\n真要说的话，比瞬间还要短暂。\n\n羽咲往悬崖的方向飞去。\n\n瘦小的羽咲，比想象中更轻易地飞侠了悬崖。\n\n我急忙跑向悬崖边。\n\n然而，飞奔而出之后，方向并不是那么容易改变。\n\n我失去了平衡，就这么摔倒在地。\n\n只能一直用目光追寻着羽咲的身影。\n\n飞出悬崖的羽咲。\n\n身体浮在半空中。\n\n在下一瞬间，便听任自由落体定律…径直坠下陡峭的悬崖\n\n![](https://cdn.luogu.com.cn/upload/pic/21200.png)\n\n细长的双眼…注视着我的眼睛。\n\n这是幻觉吗…还是现实…\n\n卓司的指尖捅破了头盖骨…\n\n这根本不可能的吧…人的手劲如何能够捏破头盖骨…\n\n这毫无疑问是幻觉…不可能存在于现实中…\n\n这种事，习武的我是最清楚不过的…\n\n这种根本不可能的事…\n\n尽管如此…\n\n我的意识仍朦胧起来…\n\n已经无法与这个世界保持联系了…\n\n“我…收下皆守哥哥的身体了哦…”\n\n![](https://cdn.luogu.com.cn/upload/pic/21201.png)\n\n司空见惯的风景。\n\n比之前看到的风景更让人眼熟。\n\n我所熟悉的风景…\n\n![](https://cdn.luogu.com.cn/upload/pic/21202.png)\n\n“我会把他带走的…所以你走吧…”\n\n“卓司…那个电波小子，就让我把他带走…”\n\n“所以你就前进吧…”\n\n“在无法登上的坡道的尽头”\n\n“你不能停滞不前，必须前去迎接小羽”\n\n“好啦，打起精神来…皆守”\n\n“在这里告别吧…”\n\n![](https://cdn.luogu.com.cn/upload/pic/21203.png)\n\n轻飘飘的感觉。\n\n瞬间，感觉到了周围空气的急速变冷。\n\n扬起的灰尘伴随月光的照耀，在空中废物。\n\n告别了永不相交的平行，我和羽咲被吸进了…\n\n垂直下落的世界。\n\n月光映照出羽咲身体的轮廓。\n\n地面没有影子。\n\n宛如高空飞翔一般…\n\n远方传来警笛声。\n\n在苍穹之下反复回想。\n\n我仰望无限的天空，笔直坠下。\n\n一刻也不远看丢，在我上方的羽咲…\n\n月在笑。\n\n神在笑。\n\n笑这滑稽的姿势。\n\n笑这喜剧般的悲剧。\n\n群星旋转。\n\n如舞如蹈。\n\n夜空上的神，正嘲弄着我们。\n\n就想把空瓶子扔在地上的天真的孩子一样…\n\n世界变得一片空虚。\n\n![](https://cdn.luogu.com.cn/upload/pic/21204.png)\n\n望不到尽头的坡道…\n\n遥远而模糊的坡道…\n\n宛如…我们就漫步在这样的世界中一般…\n\n就算在意坡道的前方也毫无用处。\n\n我们就在这坡道上快乐地走着。\n\n![](https://cdn.luogu.com.cn/upload/pic/21205.png)\n", "description": "您在打galgame，突然听说苏联解体了，于是您发现您永远看不到一个活着的苏联人了，很郁闷，于是开始写一道数据结构题：\n\n这是一道模(du)拟(liu)题。  \n\n你需要维护一棵包含 $n$ 个结点有根有序树（也就是说每个点的孩子是有“从左到右”的顺序的），初始根为 $1$，支持以下几个操作：  \n\n`A(x,y)`：对 $x$ 进行路径压缩，即将 $x$ 到根路径上除了根之外的点的父亲设为根，这些点在根的孩子中的顺序保持原先路径上从浅到深的顺序。\n\n`B(x,y)`：将根的孩子 $x,y$（$x$ 在 $y$ 左边）以及之间的点按顺序展开成一条路径，$x$ 仍与根相连，涉及到的点原先的孩子都移至路径右侧。\n\n`C(x,y)`：将树的根设为 $x$，此时原先在根到 $x$ 路径左侧的点仍在左侧且先相对顺序不变，右侧同理，$x$ 的孩子在 $x$ 成为根后在 $x$ 到原先的根的路径的右侧。\n\n`D(x,y)`：给 $x$ 到根的路径上每个点的点权同时加一个数，并在这之后求 $x$ 到根的路径上的点权和。\n\n`E(x,y)`：保证 $x$ 和 $y$ 父亲相同且 $x$ 在 $y$ 左侧，对在 $x$ 的父亲的孩子中，$x$ 到 $y$ 之间（含 $x,y$）的每个点的点权加上 $x+y$，并在这之后求这些点的点权和。\n\n`F(x,y)`：给 $x$ 添加一个孩子 $y$，在最右边，这个操作在其它所有操作之前进行，用于描述树的初始形态。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的结点数和操作次数。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对每个 `D` 或 `E` 操作，输出一行，表示答案对 $2^{32}$ 取模的结果。  ", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n$2\\leq n\\leq 10^5$，$n\\leq q\\leq 2\\times 10^5$，$0\\leq x,y \\leq n$。\n\n保证操作合法。\n\n为了对称，所有操作都有两个参数 $x,y$，但实际上 `A`，`C` 操作中不需用到 $y$，数据保证此时 $y=0$。  \n\n前 $n-1$ 个操作一定是 `F` 操作，保证 $n-1$ 次操作后得到一棵以 $1$ 为根的树，且以后不会再出现 `F` 操作。  \n\n注意到 `A`，`B`，`C`，`F` 操作都有关于孩子顺序的规定，可以参照样例解释进行直观的理解。  \n\n共 $10$ 组数据。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2016] Zhabolong II", "background": "In an instant…\n\nIf I really had to say, it was even shorter than an instant.\n\nUsaki flew toward the cliff.\n\nSmall and thin Usaki flew over the cliff more easily than I had imagined.\n\nI hurriedly ran to the edge of the cliff.\n\nHowever, after rushing out at full speed, it was not so easy to change direction.\n\nI lost my balance and fell to the ground.\n\nI could only keep chasing Usaki’s figure with my eyes.\n\nUsaki, who had flown out over the cliff.\n\nHer body floated in midair.\n\nIn the next moment, she gave herself to the law of free fall… and dropped straight down the steep cliff.\n\n![](https://cdn.luogu.com.cn/upload/pic/21200.png)\n\nThose narrow eyes… staring into my eyes.\n\nIs this an illusion… or reality…\n\nTakuji’s fingertips pierced through the skull…\n\nThis is impossible… how could a person’s hand strength crush a skull…\n\nThis is undoubtedly an illusion… it cannot exist in reality…\n\nAs someone who practices martial arts, I know this best…\n\nSomething that is fundamentally impossible…\n\nEven so…\n\nMy consciousness still began to blur…\n\nI could no longer keep in touch with this world…\n\n“I… have taken in big brother Minamori’s body…”\n\n![](https://cdn.luogu.com.cn/upload/pic/21201.png)\n\nA familiar scenery.\n\nEven more familiar than what I saw before.\n\nA scenery I know…\n\n![](https://cdn.luogu.com.cn/upload/pic/21202.png)\n\n“I will take him away… so you should go…”\n\n“Takuji… that ‘denpa kid’, I’ll take him away…”\n\n“So you go forward…”\n\n“At the end of the slope that cannot be climbed”\n\n“You cannot stop here, you must go to meet little Yuu”\n\n“Alright, cheer up… Minamori”\n\n“Let’s say goodbye here…”\n\n![](https://cdn.luogu.com.cn/upload/pic/21203.png)\n\nA light, floating feeling.\n\nIn an instant, I felt the air around rapidly turn cold.\n\nThe dust that was kicked up was lit by moonlight, drifting in the air.\n\nSaying farewell to the parallel lines that would never intersect, Usaki and I were pulled into…\n\nA world of vertical falling.\n\nThe moonlight outlined Usaki’s body.\n\nThere were no shadows on the ground.\n\nAs if flying high in the sky…\n\nIn the distance, the sound of sirens came.\n\nEchoing again and again beneath the blue sky.\n\nI looked up at the endless sky and fell straight down.\n\nNot letting her out of my sight even for a moment, Usaki above me…\n\nThe moon was laughing.\n\nGod was laughing.\n\nLaughing at this ridiculous posture.\n\nLaughing at this tragedy like a comedy.\n\nThe stars spun.\n\nDancing and swaying.\n\nThe god in the night sky was mocking us.\n\nLike an innocent child who wants to throw an empty bottle onto the ground…\n\nThe world became completely empty.\n\n![](https://cdn.luogu.com.cn/upload/pic/21204.png)\n\nA slope with no end in sight…\n\nA distant and blurry slope…\n\nAs if… we were strolling in such a world…\n\nEven if you care about what lies ahead of the slope, it is of no use.\n\nWe just walk happily on this slope.\n\n![](https://cdn.luogu.com.cn/upload/pic/21205.png)", "description": "You are playing a galgame, and suddenly you hear that the Soviet Union has collapsed. So you realize that you will never see a living Soviet person again. Feeling depressed, you start writing a data structure problem:\n\nThis is a simulation problem.\n\nYou need to maintain a rooted ordered tree with $n$ nodes (that is, the children of each node have a left-to-right order). Initially, the root is $1$. You need to support the following operations:\n\n`A(x,y)`: Perform path compression on $x$, i.e., for every node on the path from $x$ to the root except the root, set its parent to the root. The order of these nodes among the root’s children remains the same as their order on the original path from shallow to deep.\n\n`B(x,y)`: Take the root’s children $x,y$ ($x$ is to the left of $y$) and all nodes between them, and expand them in order into a single path. $x$ remains connected to the root. All children that these involved nodes originally had are moved to the right side of the path.\n\n`C(x,y)`: Set the root of the tree to be $x$. At this time, nodes that were on the left side of the original path from the old root to $x$ remain on the left and their relative order does not change; similarly for the right side. After $x$ becomes the root, the children of $x$ are placed on the right side of the path from $x$ to the original root.\n\n`D(x,y)`: Add a number to the weight of every node on the path from $x$ to the root, and then query the sum of weights on the path from $x$ to the root.\n\n`E(x,y)`: It is guaranteed that $x$ and $y$ have the same parent and that $x$ is to the left of $y$. For every node between $x$ and $y$ (including $x,y$) among the children of $x$’s parent, add $x+y$ to its weight, and then query the sum of weights of these nodes.\n\n`F(x,y)`: Add $y$ as a child of $x$, at the far right. This operation is performed before all other operations and is used to describe the initial shape of the tree.", "inputFormat": "The first line contains two integers $n,q$, representing the number of nodes in the tree and the number of operations.\n\nThe next $q$ lines each describe an operation.", "outputFormat": "For each `D` or `E` operation, output one line: the result modulo $2^{32}$.", "hint": "Idea: ccz181078, Solution: ccz181078, Code: ccz181078, Data: ccz181078\n\nConstraints: $2\\leq n\\leq 10^5$，$n\\leq q\\leq 2\\times 10^5$，$0\\leq x,y \\leq n$.\n\nAll operations are guaranteed to be valid.\n\nFor symmetry, all operations have two parameters $x,y$, but actually $y$ is not needed in operations `A` and `C`. The testdata guarantees that $y=0$ in these cases.\n\nThe first $n-1$ operations are all `F` operations, guaranteeing that after these $n-1$ operations you get a tree rooted at $1$, and no more `F` operations will appear afterwards.\n\nNote that operations `A`, `B`, `C`, and `F` all have rules about the order of children. You may refer to the sample explanation for an intuitive understanding.\n\nThere are $10$ test groups.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2016] 炸脖龙 II", "background": "瞬间…\n\n真要说的话，比瞬间还要短暂。\n\n羽咲往悬崖的方向飞去。\n\n瘦小的羽咲，比想象中更轻易地飞侠了悬崖。\n\n我急忙跑向悬崖边。\n\n然而，飞奔而出之后，方向并不是那么容易改变。\n\n我失去了平衡，就这么摔倒在地。\n\n只能一直用目光追寻着羽咲的身影。\n\n飞出悬崖的羽咲。\n\n身体浮在半空中。\n\n在下一瞬间，便听任自由落体定律…径直坠下陡峭的悬崖\n\n![](https://cdn.luogu.com.cn/upload/pic/21200.png)\n\n细长的双眼…注视着我的眼睛。\n\n这是幻觉吗…还是现实…\n\n卓司的指尖捅破了头盖骨…\n\n这根本不可能的吧…人的手劲如何能够捏破头盖骨…\n\n这毫无疑问是幻觉…不可能存在于现实中…\n\n这种事，习武的我是最清楚不过的…\n\n这种根本不可能的事…\n\n尽管如此…\n\n我的意识仍朦胧起来…\n\n已经无法与这个世界保持联系了…\n\n“我…收下皆守哥哥的身体了哦…”\n\n![](https://cdn.luogu.com.cn/upload/pic/21201.png)\n\n司空见惯的风景。\n\n比之前看到的风景更让人眼熟。\n\n我所熟悉的风景…\n\n![](https://cdn.luogu.com.cn/upload/pic/21202.png)\n\n“我会把他带走的…所以你走吧…”\n\n“卓司…那个电波小子，就让我把他带走…”\n\n“所以你就前进吧…”\n\n“在无法登上的坡道的尽头”\n\n“你不能停滞不前，必须前去迎接小羽”\n\n“好啦，打起精神来…皆守”\n\n“在这里告别吧…”\n\n![](https://cdn.luogu.com.cn/upload/pic/21203.png)\n\n轻飘飘的感觉。\n\n瞬间，感觉到了周围空气的急速变冷。\n\n扬起的灰尘伴随月光的照耀，在空中废物。\n\n告别了永不相交的平行，我和羽咲被吸进了…\n\n垂直下落的世界。\n\n月光映照出羽咲身体的轮廓。\n\n地面没有影子。\n\n宛如高空飞翔一般…\n\n远方传来警笛声。\n\n在苍穹之下反复回想。\n\n我仰望无限的天空，笔直坠下。\n\n一刻也不远看丢，在我上方的羽咲…\n\n月在笑。\n\n神在笑。\n\n笑这滑稽的姿势。\n\n笑这喜剧般的悲剧。\n\n群星旋转。\n\n如舞如蹈。\n\n夜空上的神，正嘲弄着我们。\n\n就想把空瓶子扔在地上的天真的孩子一样…\n\n世界变得一片空虚。\n\n![](https://cdn.luogu.com.cn/upload/pic/21204.png)\n\n望不到尽头的坡道…\n\n遥远而模糊的坡道…\n\n宛如…我们就漫步在这样的世界中一般…\n\n就算在意坡道的前方也毫无用处。\n\n我们就在这坡道上快乐地走着。\n\n![](https://cdn.luogu.com.cn/upload/pic/21205.png)\n", "description": "您在打galgame，突然听说苏联解体了，于是您发现您永远看不到一个活着的苏联人了，很郁闷，于是开始写一道数据结构题：\n\n这是一道模(du)拟(liu)题。  \n\n你需要维护一棵包含 $n$ 个结点有根有序树（也就是说每个点的孩子是有“从左到右”的顺序的），初始根为 $1$，支持以下几个操作：  \n\n`A(x,y)`：对 $x$ 进行路径压缩，即将 $x$ 到根路径上除了根之外的点的父亲设为根，这些点在根的孩子中的顺序保持原先路径上从浅到深的顺序。\n\n`B(x,y)`：将根的孩子 $x,y$（$x$ 在 $y$ 左边）以及之间的点按顺序展开成一条路径，$x$ 仍与根相连，涉及到的点原先的孩子都移至路径右侧。\n\n`C(x,y)`：将树的根设为 $x$，此时原先在根到 $x$ 路径左侧的点仍在左侧且先相对顺序不变，右侧同理，$x$ 的孩子在 $x$ 成为根后在 $x$ 到原先的根的路径的右侧。\n\n`D(x,y)`：给 $x$ 到根的路径上每个点的点权同时加一个数，并在这之后求 $x$ 到根的路径上的点权和。\n\n`E(x,y)`：保证 $x$ 和 $y$ 父亲相同且 $x$ 在 $y$ 左侧，对在 $x$ 的父亲的孩子中，$x$ 到 $y$ 之间（含 $x,y$）的每个点的点权加上 $x+y$，并在这之后求这些点的点权和。\n\n`F(x,y)`：给 $x$ 添加一个孩子 $y$，在最右边，这个操作在其它所有操作之前进行，用于描述树的初始形态。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的结点数和操作次数。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对每个 `D` 或 `E` 操作，输出一行，表示答案对 $2^{32}$ 取模的结果。  ", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n$2\\leq n\\leq 10^5$，$n\\leq q\\leq 2\\times 10^5$，$0\\leq x,y \\leq n$。\n\n保证操作合法。\n\n为了对称，所有操作都有两个参数 $x,y$，但实际上 `A`，`C` 操作中不需用到 $y$，数据保证此时 $y=0$。  \n\n前 $n-1$ 个操作一定是 `F` 操作，保证 $n-1$ 次操作后得到一棵以 $1$ 为根的树，且以后不会再出现 `F` 操作。  \n\n注意到 `A`，`B`，`C`，`F` 操作都有关于孩子顺序的规定，可以参照样例解释进行直观的理解。  \n\n共 $10$ 组数据。", "locale": "zh-CN"}}}
{"pid": "P4694", "type": "P", "difficulty": 6, "samples": [["8 4\n3 8 7 9 9 4 6 8\n2 5 9 4 3 8 9 1", "32"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2013", "O2优化", "凸完全单调性（wqs 二分）", "模拟费用流", "PA（波兰）"], "title": "[PA 2013] Raper", "background": "", "description": "你需要生产 $k$ 张光盘。每张光盘都要经过两道工序：先在 A 工厂进行挤压，再送到 B 工厂涂上反光层。\n\n你知道每天 A、B 工厂分别加工一张光盘的花费。你现在有 $n$ 天时间，每天可以先送一张光盘到 A 工厂（或者不送），然后再送一张已经在 A 工厂加工过的光盘到 B 工厂（或者不送），每家工厂一天只能对一张光盘进行操作，同一张光盘在一天内生产出来是允许的。我们假定将未加工的或半成品的光盘保存起来不需要费用。\n\n求生产出 $k$ 张光盘的最小花费。", "inputFormat": "第一行包含两个整数 $n, k$，表示有 $n$ 天，要生产 $k$ 张光盘。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天送到 A 工厂加工光盘的花费。\n\n第三行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天送到 B 工厂加工光盘的花费。", "outputFormat": "输出一行一个整数，表示最小花费。", "hint": "保证 $1 \\leqslant k \\leqslant n \\leqslant 5 \\times 10^5,$ $1 \\leqslant  a_i, b_i \\leqslant 10^9$。\n\n注：添加了 3 组 Hack 数据，如未通过将扣除 3 分。", "locale": "zh-CN", "translations": {"en": {"title": "[PA 2013] Raper", "background": "", "description": "You need to produce $k$ optical discs. Each disc must go through two steps: first it is pressed at factory A, and then it is sent to factory B to be coated with a reflective layer.\n\nYou know the daily cost for factories A and B to process one disc. You have $n$ days. Each day, you may first send one disc to factory A for processing (or send none), and then send one disc that has already been processed at factory A to factory B for processing (or send none). Each factory can process at most one disc per day. It is allowed for the same disc to be fully produced within a single day. We assume there is no cost to store unprocessed or half-finished discs.\n\nFind the minimum total cost to produce $k$ discs.", "inputFormat": "The first line contains two integers $n, k$, meaning there are $n$ days and you need to produce $k$ optical discs.\n\nThe second line contains $n$ integers. The $i$-th integer is the cost of sending a disc to factory A on day $i$.\n\nThe third line contains $n$ integers. The $i$-th integer is the cost of sending a disc to factory B on day $i$.", "outputFormat": "Output one integer on a single line, the minimum total cost.", "hint": "It is guaranteed that $1 \\leqslant k \\leqslant n \\leqslant 5 \\times 10^5,$ and $1 \\leqslant a_i, b_i \\leqslant 10^9$.\n\nNote: 3 sets of hack testdata were added. If you do not pass them, 3 points will be deducted.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[PA 2013] Raper", "background": "", "description": "你需要生产 $k$ 张光盘。每张光盘都要经过两道工序：先在 A 工厂进行挤压，再送到 B 工厂涂上反光层。\n\n你知道每天 A、B 工厂分别加工一张光盘的花费。你现在有 $n$ 天时间，每天可以先送一张光盘到 A 工厂（或者不送），然后再送一张已经在 A 工厂加工过的光盘到 B 工厂（或者不送），每家工厂一天只能对一张光盘进行操作，同一张光盘在一天内生产出来是允许的。我们假定将未加工的或半成品的光盘保存起来不需要费用。\n\n求生产出 $k$ 张光盘的最小花费。", "inputFormat": "第一行包含两个整数 $n, k$，表示有 $n$ 天，要生产 $k$ 张光盘。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天送到 A 工厂加工光盘的花费。\n\n第三行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天送到 B 工厂加工光盘的花费。", "outputFormat": "输出一行一个整数，表示最小花费。", "hint": "保证 $1 \\leqslant k \\leqslant n \\leqslant 5 \\times 10^5,$ $1 \\leqslant  a_i, b_i \\leqslant 10^9$。\n\n注：添加了 3 组 Hack 数据，如未通过将扣除 3 分。", "locale": "zh-CN"}}}
{"pid": "P4695", "type": "P", "difficulty": 6, "samples": [["4 4\n10 20 30 50\n1 2 5\n2 3 7\n2 4 57\n1 3 28\n1 1 25\n2 3 2 1\n2 2 4 13", "3 1 3 4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2017", "线段树", "点分治", "O2优化", "树链剖分", "动态树 LCT", "PA（波兰）"], "title": "[PA 2017] Banany", "background": "", "description": "Bajtazar 是一名商人，他每天会从自己所在的城市出发，到另一个城市去贩卖香蕉。每条道路都会有一定的过路费，而作为终点的城市能获得一定收益（注意：途经点没有收益）。而每过一天，就会有一条道路的费用发生变化，或者某个城市的收益发生变化。Bajtazar 想知道当他每一天醒来后，以哪个城市作为终点获得的利润最大，而次日他会从该城市继续出发。\n\n有 $n$ 个城市，由 $n - 1$ 条道路连接，且互相都能到达。第 $i$ 个城市有一个收益 $z_i$ ，每条边有一个费用 $w$ 。\n\n如果从 $s$ 到 $t$ 做生意，获得的利润是\n\n$$ z_t - \\sum_{e \\in \\mathrm{Path}(s, t)} w(e) $$\n\n一共有 $q$ 天。\n\n最初 Bajtazar 在 $1$ 号城市。他每天经历了费用的变动后会前往下一个城市。他会选择获得利润最大的，如有多个相同则选择编号最小的，但他不能呆在原来的城市不走。\n", "inputFormat": "第一行输入两个整数 $n$ ，$q$ 。\n\n第二行输入 $n$ 个整数表示受益 $z_1,z_2,…,z_n$ 。\n\n接下来 $n - 1$ 行输入边权与费用 $u\\ v\\ w$ 。\n\n接下来 $q$ 行，有两种输入。\n\n-    输入 $1\\ i\\ z_i$ 表示将原本 $i$ 城市的费用替换。\n+    输入 $2\\ u\\ v\\ w$ 表示将原本连接 $(u,v)$ 两城市的边上的费用替换。\n\n", "outputFormat": "对于每行变化，总共输出 $q$ 组答案。表示经历变化之后， Bajtazar 的下一个目标。", "hint": "$n,q \\le 10^5,1 \\le z_i \\le 10^{18}$​​, $1 \\le w \\le 10^{12}$", "locale": "zh-CN", "translations": {"en": {"title": "[PA 2017] Banany", "background": "", "description": "Bajtazar is a merchant. Every day, he leaves the city he is currently in and travels to another city to sell bananas. Each road has a toll fee, and the destination city provides some revenue (note that intermediate cities provide no revenue). Each day, the fee of one road changes, or the revenue of one city changes. Bajtazar wants to know, after he wakes up each day, which city he should choose as the destination to obtain the maximum profit, and on the next day he will depart from that city again.\n\nThere are $n$ cities, connected by $n - 1$ roads, and every city is reachable from every other city. City $i$ has revenue $z_i$, and each edge has a fee $w$.\n\nIf he does business from $s$ to $t$, the profit is\n\n$$ z_t - \\sum_{e \\in \\mathrm{Path}(s, t)} w(e) $$\n\nThere are $q$ days in total.\n\nInitially, Bajtazar is in city $1$. Each day, after the changes take place, he will go to the next city. He will choose the one that yields the maximum profit; if there are multiple, he chooses the one with the smallest index. However, he cannot stay in the same city and must leave.", "inputFormat": "The first line contains two integers $n$ and $q$.\n\nThe second line contains $n$ integers representing the revenues $z_1, z_2, \\dots, z_n$.\n\nThe next $n - 1$ lines each contain $u\\ v\\ w$, describing an edge and its fee.\n\nThe next $q$ lines are of two types.\n\n- Input $1\\ i\\ z_i$ means replacing the revenue of city $i$ with the new value.\n- Input $2\\ u\\ v\\ w$ means replacing the fee of the edge connecting cities $(u, v)$ with the new value.", "outputFormat": "For each change, output one line. In total, output $q$ answers, each indicating Bajtazar's next destination after the change.", "hint": "Constraints: $n, q \\le 10^5$, $1 \\le z_i \\le 10^{18}$, $1 \\le w \\le 10^{12}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[PA 2017] Banany", "background": "", "description": "Bajtazar 是一名商人，他每天会从自己所在的城市出发，到另一个城市去贩卖香蕉。每条道路都会有一定的过路费，而作为终点的城市能获得一定收益（注意：途经点没有收益）。而每过一天，就会有一条道路的费用发生变化，或者某个城市的收益发生变化。Bajtazar 想知道当他每一天醒来后，以哪个城市作为终点获得的利润最大，而次日他会从该城市继续出发。\n\n有 $n$ 个城市，由 $n - 1$ 条道路连接，且互相都能到达。第 $i$ 个城市有一个收益 $z_i$ ，每条边有一个费用 $w$ 。\n\n如果从 $s$ 到 $t$ 做生意，获得的利润是\n\n$$ z_t - \\sum_{e \\in \\mathrm{Path}(s, t)} w(e) $$\n\n一共有 $q$ 天。\n\n最初 Bajtazar 在 $1$ 号城市。他每天经历了费用的变动后会前往下一个城市。他会选择获得利润最大的，如有多个相同则选择编号最小的，但他不能呆在原来的城市不走。\n", "inputFormat": "第一行输入两个整数 $n$ ，$q$ 。\n\n第二行输入 $n$ 个整数表示受益 $z_1,z_2,…,z_n$ 。\n\n接下来 $n - 1$ 行输入边权与费用 $u\\ v\\ w$ 。\n\n接下来 $q$ 行，有两种输入。\n\n-    输入 $1\\ i\\ z_i$ 表示将原本 $i$ 城市的费用替换。\n+    输入 $2\\ u\\ v\\ w$ 表示将原本连接 $(u,v)$ 两城市的边上的费用替换。\n\n", "outputFormat": "对于每行变化，总共输出 $q$ 组答案。表示经历变化之后， Bajtazar 的下一个目标。", "hint": "$n,q \\le 10^5,1 \\le z_i \\le 10^{18}$​​, $1 \\le w \\le 10^{12}$", "locale": "zh-CN"}}}
{"pid": "P4696", "type": "P", "difficulty": 6, "samples": [["5 10\n2 1 5 3 4\n5 6 3 8 12 7 1 10 11 9", "2\n2 6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2011", "线段树", "离散化", "CEOI（中欧）", "哈希 hashing", "KMP 算法", "链表"], "title": "[CEOI 2011] Matching", "background": "", "description": "对于整数序列 $(a_1,a_2,\\cdots,a_n)$ 和 $1\\sim n$ 的排列 $(p_1,p_2,\\cdots,p_n)$，称 $(a_1,a_2,\\cdots,a_n)$ 符合 $(p_1,p_2,\\cdots,p_n)$，当且仅当：\n\n-    $\\{a\\}$ 中任意两个数字互不相同；\n\n-    将 $(a_1,a_2,\\cdots,a_n)$ 从小到大排序后，将会得到 $(a_{p_1},a_{p_2},\\cdots,a_{p_n})$。\n\n现在给出 $1\\sim n$ 的排列 $\\{p\\}$ 和序列 $h_1,h_2,\\cdots,h_m$​​，请你求出哪些 $\\{h\\}$ 的子串符合排列 $\\{p\\}$。\n", "inputFormat": "第一行两个空格隔开的正整数 $n,m$。\n\n第二行 $n$ 个空格隔开的正整数，表示排列 $p$。\n\n第三行 $m$ 个空格隔开的正整数，表示序列 $h$。", "outputFormat": "第一行一个整数 $k$，表示符合 $\\{p\\}$ 的子串个数。\n\n第二行 $k$ 个空格隔开的正整数，表示这些子串的起始位置（编号从 $1$ 开始）。请将这些位置按照从小到大的顺序输出。特别地，若 $k=0$，那么你也应当输出一个空行。", "hint": "对于 $100\\%$ 的数据，有 $2\\le n\\le m\\le 1\\ 000\\ 000;1\\le h_i\\le 10^9;1\\le p_i\\le n$，保证 $\\{h\\}$ 中的元素互不相同，且 $\\{p\\}$ 是一个排列。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2011] Matching", "background": "", "description": "For an integer sequence $(a_1,a_2,\\cdots,a_n)$ and a permutation $(p_1,p_2,\\cdots,p_n)$ of $1 \\sim n$, we say that $(a_1,a_2,\\cdots,a_n)$ matches $(p_1,p_2,\\cdots,p_n)$ if and only if:\n\n- Any two numbers in $\\{a\\}$ are different from each other.\n- After sorting $(a_1,a_2,\\cdots,a_n)$ in increasing order, we obtain $(a_{p_1},a_{p_2},\\cdots,a_{p_n})$.\n\nNow you are given a permutation $\\{p\\}$ of $1 \\sim n$ and a sequence $h_1,h_2,\\cdots,h_m$. Please determine which substrings of $\\{h\\}$ match the permutation $\\{p\\}$.", "inputFormat": "The first line contains two positive integers $n,m$ separated by spaces.\n\nThe second line contains $n$ positive integers separated by spaces, representing the permutation $p$.\n\nThe third line contains $m$ positive integers separated by spaces, representing the sequence $h$.", "outputFormat": "The first line contains an integer $k$, indicating the number of substrings that match $\\{p\\}$.\n\nThe second line contains $k$ positive integers separated by spaces, indicating the starting positions of these substrings (indexed from $1$). Output these positions in increasing order. In particular, if $k=0$, you should output an empty line as well.", "hint": "For $100\\%$ of the testdata, $2\\le n\\le m\\le 1\\ 000\\ 000;1\\le h_i\\le 10^9;1\\le p_i\\le n$. It is guaranteed that all elements in $\\{h\\}$ are pairwise distinct, and $\\{p\\}$ is a permutation.\n\n# Constraints\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2011] Matching", "background": "", "description": "对于整数序列 $(a_1,a_2,\\cdots,a_n)$ 和 $1\\sim n$ 的排列 $(p_1,p_2,\\cdots,p_n)$，称 $(a_1,a_2,\\cdots,a_n)$ 符合 $(p_1,p_2,\\cdots,p_n)$，当且仅当：\n\n-    $\\{a\\}$ 中任意两个数字互不相同；\n\n-    将 $(a_1,a_2,\\cdots,a_n)$ 从小到大排序后，将会得到 $(a_{p_1},a_{p_2},\\cdots,a_{p_n})$。\n\n现在给出 $1\\sim n$ 的排列 $\\{p\\}$ 和序列 $h_1,h_2,\\cdots,h_m$​​，请你求出哪些 $\\{h\\}$ 的子串符合排列 $\\{p\\}$。\n", "inputFormat": "第一行两个空格隔开的正整数 $n,m$。\n\n第二行 $n$ 个空格隔开的正整数，表示排列 $p$。\n\n第三行 $m$ 个空格隔开的正整数，表示序列 $h$。", "outputFormat": "第一行一个整数 $k$，表示符合 $\\{p\\}$ 的子串个数。\n\n第二行 $k$ 个空格隔开的正整数，表示这些子串的起始位置（编号从 $1$ 开始）。请将这些位置按照从小到大的顺序输出。特别地，若 $k=0$，那么你也应当输出一个空行。", "hint": "对于 $100\\%$ 的数据，有 $2\\le n\\le m\\le 1\\ 000\\ 000;1\\le h_i\\le 10^9;1\\le p_i\\le n$，保证 $\\{h\\}$ 中的元素互不相同，且 $\\{p\\}$ 是一个排列。", "locale": "zh-CN"}}}
{"pid": "P4697", "type": "P", "difficulty": 6, "samples": [["3\n0 9\n8 1\n13 7", "9.000\n1.000\n4.694"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["计算几何", "2011", "Special Judge", "CEOI（中欧）", "单调栈"], "title": "[CEOI 2011] Balloons", "background": "", "description": "有 $n$ 个气球，他们一开始都是空的。\n\n接下来，它们会按照从 $1$ 到 $n$ 的顺序依次充气，其中第 $i$ 个气球与地面在 $x_i$ 位置接触。\n\n当气球碰到碰到前面的某个气球，或者达到半径最大限制时，就会停止充气。其中第 $i$ 个气球的半径最大限制为 $r_i$。\n\n现在请你求出，每个气球最终半径是多少。", "inputFormat": "第一行一个正整数 $n$，表示气球个数。\n\n接下来 $n$ 行，每行两个空格隔开的整数 $x_i,r_i$。", "outputFormat": "输出 $n$ 行，每行一个浮点数，第 $i$ 行的浮点数表示最终第 $i$ 个气球的半径。\n\n你的答案会被判为正确，当且仅当与答案的绝对误差不超过 $10^{-3}$​​。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le n\\le 200\\ 000;0\\le x_i\\le 10^9;1\\le r_i\\le 10^9;x_1< x_2< \\cdots < x_n$。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2011] Balloons", "background": "", "description": "There are $n$ balloons, and they are all empty at the beginning.\n\nNext, they will be inflated one by one in order from $1$ to $n$. The $i$-th balloon touches the ground at position $x_i$.\n\nA balloon stops inflating when it touches some previous balloon, or when it reaches its maximum radius limit. The maximum radius limit of the $i$-th balloon is $r_i$.\n\nNow, please find the final radius of each balloon.", "inputFormat": "The first line contains a positive integer $n$, which represents the number of balloons.\n\nThe next $n$ lines each contain two integers $x_i, r_i$ separated by a space.", "outputFormat": "Output $n$ lines. Each line contains a floating-point number. The floating-point number on the $i$-th line represents the final radius of the $i$-th balloon.\n\nYour answer will be judged correct if and only if the absolute error from the correct answer does not exceed $10^{-3}$.", "hint": "For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 200\\,000$, $0 \\le x_i \\le 10^9$, $1 \\le r_i \\le 10^9$, and $x_1 < x_2 < \\cdots < x_n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2011] Balloons", "background": "", "description": "有 $n$ 个气球，他们一开始都是空的。\n\n接下来，它们会按照从 $1$ 到 $n$ 的顺序依次充气，其中第 $i$ 个气球与地面在 $x_i$ 位置接触。\n\n当气球碰到碰到前面的某个气球，或者达到半径最大限制时，就会停止充气。其中第 $i$ 个气球的半径最大限制为 $r_i$。\n\n现在请你求出，每个气球最终半径是多少。", "inputFormat": "第一行一个正整数 $n$，表示气球个数。\n\n接下来 $n$ 行，每行两个空格隔开的整数 $x_i,r_i$。", "outputFormat": "输出 $n$ 行，每行一个浮点数，第 $i$ 行的浮点数表示最终第 $i$ 个气球的半径。\n\n你的答案会被判为正确，当且仅当与答案的绝对误差不超过 $10^{-3}$​​。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le n\\le 200\\ 000;0\\le x_i\\le 10^9;1\\le r_i\\le 10^9;x_1< x_2< \\cdots < x_n$。", "locale": "zh-CN"}}}
{"pid": "P4698", "type": "P", "difficulty": 6, "samples": [["3 2 2\n150 2\n400 3\n100 2\n200 1\n700 3", "400"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2011", "CEOI（中欧）"], "title": "[CEOI 2011] Hotel", "background": "", "description": "你经营着一家旅馆，这家旅馆有 $n$ 个房间，每个房间有维护费用和容量。其中第 $i$ 个房间的维护费用为 $c_i$，容量为 $p_i$ 人。\n\n现在有 $m$ 个订单，每个订单有两个参数：$v_i,d_i$ ，其中 $v_i$ 表示这个订单支付的租金，$d_i$​​ 表示人数。\n\n你现在得要合理选择一些订单，并放弃其他订单，使得每个选择的订单被安排在同一间房间内，且人数不超过这个房间的容量限制。当然，两个不同的订单也不能被安排在同一间房间内。\n\n现在你想要知道，在最多选出 $o$ 个订单时的最大收益。一个方案的收益的定义为，选出的订单的租金和，减去选出的房间的维护费用和。", "inputFormat": "第一行三个空格隔开的整数 $n,m,o$ 。\n\n接下来 $n$ 行，每行两个空格隔开的整数 $c_i,p_i$。\n\n接下来 $m$ 行，每行两个空格隔开的整数 $v_i,d_i$。", "outputFormat": "一行一个整数表示最大收益。注意答案可能很大。", "hint": "**样例 $1$ 解释**\n\n可以将第一个订单安排至第三个房间，将第二个订单安排至第二个房间。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，有 $1\\le n,m\\le 500\\ 000;1\\le o\\le \\min(n,m);1\\le c_i,p_i,v_i,d_i\\le 10^9$，保证 $\\forall 1\\le i,j\\le n$，若 $p_i\\lt p_j$，则 $c_i\\le c_j$。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2011] Hotel", "background": "", "description": "You run a hotel with $n$ rooms. Each room has a maintenance cost and a capacity. For room $i$, the maintenance cost is $c_i$ and the capacity is $p_i$ people.\n\nThere are $m$ orders. Each order has two parameters: $v_i, d_i$, where $v_i$ is the rent paid by the order, and $d_i$ is the number of people.\n\nYou need to choose some orders and reject the others, so that each chosen order is assigned to exactly one room, and its number of people does not exceed the capacity of that room. Of course, two different orders cannot be assigned to the same room.\n\nYou want to know the maximum profit when you choose at most $o$ orders. The profit of a plan is defined as the sum of rents of the chosen orders minus the sum of maintenance costs of the chosen rooms.", "inputFormat": "The first line contains three integers $n, m, o$ separated by spaces.\n\nThe next $n$ lines each contain two integers $c_i, p_i$ separated by spaces.\n\nThe next $m$ lines each contain two integers $v_i, d_i$ separated by spaces.", "outputFormat": "Output one integer, the maximum profit. Note that the answer may be very large.", "hint": "**Explanation for Sample $1$.**\n\nYou can assign the first order to the third room, and the second order to the second room.\n\n**Constraints**\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 500\\ 000$, $1 \\le o \\le \\min(n, m)$, $1 \\le c_i, p_i, v_i, d_i \\le 10^9$. It is guaranteed that for all $1 \\le i, j \\le n$, if $p_i \\lt p_j$, then $c_i \\le c_j$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2011] Hotel", "background": "", "description": "你经营着一家旅馆，这家旅馆有 $n$ 个房间，每个房间有维护费用和容量。其中第 $i$ 个房间的维护费用为 $c_i$，容量为 $p_i$ 人。\n\n现在有 $m$ 个订单，每个订单有两个参数：$v_i,d_i$ ，其中 $v_i$ 表示这个订单支付的租金，$d_i$​​ 表示人数。\n\n你现在得要合理选择一些订单，并放弃其他订单，使得每个选择的订单被安排在同一间房间内，且人数不超过这个房间的容量限制。当然，两个不同的订单也不能被安排在同一间房间内。\n\n现在你想要知道，在最多选出 $o$ 个订单时的最大收益。一个方案的收益的定义为，选出的订单的租金和，减去选出的房间的维护费用和。", "inputFormat": "第一行三个空格隔开的整数 $n,m,o$ 。\n\n接下来 $n$ 行，每行两个空格隔开的整数 $c_i,p_i$。\n\n接下来 $m$ 行，每行两个空格隔开的整数 $v_i,d_i$。", "outputFormat": "一行一个整数表示最大收益。注意答案可能很大。", "hint": "**样例 $1$ 解释**\n\n可以将第一个订单安排至第三个房间，将第二个订单安排至第二个房间。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，有 $1\\le n,m\\le 500\\ 000;1\\le o\\le \\min(n,m);1\\le c_i,p_i,v_i,d_i\\le 10^9$，保证 $\\forall 1\\le i,j\\le n$，若 $p_i\\lt p_j$，则 $c_i\\le c_j$。", "locale": "zh-CN"}}}
{"pid": "P4699", "type": "P", "difficulty": 6, "samples": [["5\n2\n1\n2\n2\n3", "2\n2 4 2\n3 5 1 3"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2011", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2011] Teams", "background": "", "description": "有 $n$ 个小朋友要进行比赛，他们要被分为若干队伍。每一个小朋友都有一个要求，其中第 $i$ 个小朋友要求他所在的队伍最少要有 $a_i$ 个人（包括自己）。\n\n现在请你求出一种划分方案，在满足所有小朋友的要求的情况下，最大化队伍的数量。同时在此基础上，请你最小化人数最多的队伍的人数。", "inputFormat": "第一行一个数 $n$ 表示小朋友的个数。\n\n接下来 $n$ 行，每行一个数，其中第 $i$ 行的数字为 $a_i$​​ 。", "outputFormat": "第一行一个数 $t$ ，表示在你的方案中的队伍数量。\n\n接下来 $t$ 行，每行若干个空格隔开的数字，表示一只队伍。每一行首先输出一个数 $k_i$​​ 表示第 $i$ 只队伍的人数，接下来 $k_i$ 个数依次描述该队伍内的小朋友的编号（从 $1$ 开始）。\n\n若有多解（在满足题目要求的情况下），输出任意一个即可。", "hint": "对于 $100\\%$ 的数据，有 $1\\le n\\le 1\\ 000\\ 000;1\\le a_i\\le n$，输入保证有解。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2011] Teams", "background": "", "description": "There are $n$ children who want to take part in a competition, and they need to be divided into several teams. Each child has a requirement: the $i$-th child requires that the team they are in must have at least $a_i$ people (including themselves).\n\nNow you need to find a partition plan that, while satisfying all children’s requirements, maximizes the number of teams. Based on that, you should minimize the size of the largest team.", "inputFormat": "The first line contains an integer $n$, the number of children.\n\nThe next $n$ lines each contain one integer. The number on the $i$-th line is $a_i$.", "outputFormat": "The first line contains an integer $t$, the number of teams in your plan.\n\nThe next $t$ lines describe the teams, with several integers separated by spaces on each line. Each line first outputs an integer $k_i$, the size of the $i$-th team, followed by $k_i$ integers giving the indices of the children in that team (starting from $1$).\n\nIf there are multiple solutions (while satisfying the requirements), output any one of them.", "hint": "For $100\\%$ of the testdata, $1\\le n\\le 1\\ 000\\ 000;1\\le a_i\\le n$, and the input is guaranteed to have a solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2011] Teams", "background": "", "description": "有 $n$ 个小朋友要进行比赛，他们要被分为若干队伍。每一个小朋友都有一个要求，其中第 $i$ 个小朋友要求他所在的队伍最少要有 $a_i$ 个人（包括自己）。\n\n现在请你求出一种划分方案，在满足所有小朋友的要求的情况下，最大化队伍的数量。同时在此基础上，请你最小化人数最多的队伍的人数。", "inputFormat": "第一行一个数 $n$ 表示小朋友的个数。\n\n接下来 $n$ 行，每行一个数，其中第 $i$ 行的数字为 $a_i$​​ 。", "outputFormat": "第一行一个数 $t$ ，表示在你的方案中的队伍数量。\n\n接下来 $t$ 行，每行若干个空格隔开的数字，表示一只队伍。每一行首先输出一个数 $k_i$​​ 表示第 $i$ 只队伍的人数，接下来 $k_i$ 个数依次描述该队伍内的小朋友的编号（从 $1$ 开始）。\n\n若有多解（在满足题目要求的情况下），输出任意一个即可。", "hint": "对于 $100\\%$ 的数据，有 $1\\le n\\le 1\\ 000\\ 000;1\\le a_i\\le n$，输入保证有解。", "locale": "zh-CN"}}}
{"pid": "P4700", "type": "P", "difficulty": 6, "samples": [["5 3 1 3\n0 0\n0 1\n0 2\n1 0\n1 1\n1 4 1\n1 5 2\n3 5 2", "2\n0\n2"], ["12 13 7 9\n0 1\n0 3\n2 2\n5 2\n7 1\n7 4\n7 6\n7 7\n3 5\n0 5\n0 9\n3 9\n1 3 2\n3 2 1\n3 4 1\n4 5 1\n5 6 1\n9 3 1\n9 4 1\n9 7 1\n9 12 2\n10 9 1\n11 12 1\n12 8 1\n12 10 1", "4\n4\n0\n2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "CEOI（中欧）"], "title": "[CEOI 2011] Traffic", "background": null, "description": "在平面直角坐标系上有 $n$ 个点，其中第 $i$ 个点的坐标是 $(x_i,y_i)$ ，所有点在一个以 $(0,0)$ 和 $(A,B)$ 为相对顶点的矩形内。\n\n如果 $x_i=0$ ，那么我们称这个点在西侧。如果 $x_i=A$ ，那么我们称这个点在东侧。\n\n这些点之间有 $m$ 条边，每条边可能是有向边也可能是无向边，保证边在给定的 $n$ 个点以外的任何地方不相交。\n\n现在请你求出，对于每一个西侧的点，能够沿着边到达多少东侧的点。", "inputFormat": "第一行四个空格隔开的数 $n,m,A,B$ 。\n\n接下来 $n$ 行，每行两个空格隔开的数 $x_i,y_i$ 。\n\n接下来 $m$ 行，每行三个空格隔开的数 $c_i,d_i,k_i$​​ ，表示一条 $c_i$​​ 和 $d_i$ 之间的边。如果 $k_i=1$ ，那么表示这条边是有向边，方向为 $c_i$​​ 指向 $d_i$​​ ，否则这条边是无向边。", "outputFormat": "输出有若干行，每行一个数表示答案。请按照 $y$ 从大到小的顺序输出所有点对应的答案。", "hint": "**样例 $2$ 解释**\n\n![0](https://i.loli.net/2018/04/18/5ad725326df6f.png)\n\n**数据范围**\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 300\\ 000;0\\le m\\le 900\\ 000;1\\le A,B\\le 10^9;0\\le x_i\\le A;0\\le y_i\\le B;1\\le c_i,d_i\\le n;k_i\\in \\{1,2\\}$。保证西侧的点至少有一个，保证每一个无序对 $\\{c_i,d_i\\}$ 只会出现一次。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2011] Traffic", "background": "", "description": "There are $n$ points on the Cartesian plane. The coordinates of the $i$-th point are $(x_i,y_i)$. All points lie inside a rectangle with opposite vertices $(0,0)$ and $(A,B)$.\n\nIf $x_i=0$, we say this point is on the west side. If $x_i=A$, we say this point is on the east side.\n\nThere are $m$ edges among these points. Each edge may be directed or undirected. It is guaranteed that edges do not intersect anywhere except at the given $n$ points.\n\nNow, for each point on the west side, compute how many points on the east side can be reached by following the edges.", "inputFormat": "The first line contains four integers $n,m,A,B$, separated by spaces.\n\nThe next $n$ lines each contain two integers $x_i,y_i$, separated by spaces.\n\nThe next $m$ lines each contain three integers $c_i,d_i,k_i$, separated by spaces, describing an edge between $c_i$ and $d_i$. If $k_i=1$, the edge is directed from $c_i$ to $d_i$; otherwise, the edge is undirected.", "outputFormat": "Output several lines, each containing one integer, representing the answer. Output the answers for all west-side points in decreasing order of $y$.", "hint": "**Explanation for Sample $2$**\n\n![0](https://i.loli.net/2018/04/18/5ad725326df6f.png)\n\n**Constraints**\n\nFor $100\\%$ of the testdata: $1\\le n\\le 300\\ 000;0\\le m\\le 900\\ 000;1\\le A,B\\le 10^9;0\\le x_i\\le A;0\\le y_i\\le B;1\\le c_i,d_i\\le n;k_i\\in \\{1,2\\}$. It is guaranteed that there is at least one west-side point, and that each unordered pair $\\{c_i,d_i\\}$ appears at most once.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2011] Traffic", "background": null, "description": "在平面直角坐标系上有 $n$ 个点，其中第 $i$ 个点的坐标是 $(x_i,y_i)$ ，所有点在一个以 $(0,0)$ 和 $(A,B)$ 为相对顶点的矩形内。\n\n如果 $x_i=0$ ，那么我们称这个点在西侧。如果 $x_i=A$ ，那么我们称这个点在东侧。\n\n这些点之间有 $m$ 条边，每条边可能是有向边也可能是无向边，保证边在给定的 $n$ 个点以外的任何地方不相交。\n\n现在请你求出，对于每一个西侧的点，能够沿着边到达多少东侧的点。", "inputFormat": "第一行四个空格隔开的数 $n,m,A,B$ 。\n\n接下来 $n$ 行，每行两个空格隔开的数 $x_i,y_i$ 。\n\n接下来 $m$ 行，每行三个空格隔开的数 $c_i,d_i,k_i$​​ ，表示一条 $c_i$​​ 和 $d_i$ 之间的边。如果 $k_i=1$ ，那么表示这条边是有向边，方向为 $c_i$​​ 指向 $d_i$​​ ，否则这条边是无向边。", "outputFormat": "输出有若干行，每行一个数表示答案。请按照 $y$ 从大到小的顺序输出所有点对应的答案。", "hint": "**样例 $2$ 解释**\n\n![0](https://i.loli.net/2018/04/18/5ad725326df6f.png)\n\n**数据范围**\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 300\\ 000;0\\le m\\le 900\\ 000;1\\le A,B\\le 10^9;0\\le x_i\\le A;0\\le y_i\\le B;1\\le c_i,d_i\\le n;k_i\\in \\{1,2\\}$。保证西侧的点至少有一个，保证每一个无序对 $\\{c_i,d_i\\}$ 只会出现一次。", "locale": "zh-CN"}}}
