{"pid": "P2333", "type": "P", "difficulty": 6, "samples": [["3 1.60\n-1 -1\n1 -1\n0 1\n", "0.93"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "四川", "各省省选"], "title": "[SCOI2006] 一孔之见", "background": "", "description": "从一个圆孔里看一个凸多边形，为了让看到的面积至少为 $S$，孔的半径至少需要多大？  \n假设孔的圆心固定在 $(0,0)$，且 $(0, 0)$ 在多边形的内部（而不是外部或边界上）。\n", "inputFormat": "第一行包含一个整数 $n$ 和一个实数 $S$（精确到小数点后两位），表示凸多边形的顶点数和需要看到的面积。保证 $S$ 不超过凸多边形的面积。\n\n以下 $n$ 行每行包含两个实数 $x,y$（精确到小数点后 $6$ 位），表示各顶点的坐标。顶点按逆时针顺序或顺时针顺序给出。\n", "outputFormat": "包含一个实数 $r$，保留两位小数，表示孔的最小半径。\n", "hint": "【限制】\n\n对于 $50\\%$ 的数据：$3\\le n \\le 10$，输入凸多边形是正多边形，且中心在 $(0,0)$   \n对于 $100\\%$ 的数据：$3\\le n \\le 50$\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2006] A View Through a Hole", "background": "", "description": "Looking at a convex polygon through a circular hole, to make the visible area at least $S$, what is the minimal required radius of the hole?  \nAssume the hole's center is fixed at $(0,0)$, and $(0,0)$ lies strictly inside the polygon (not outside or on its boundary).", "inputFormat": "The first line contains an integer $n$ and a real number $S$ (with two decimal places), representing the number of vertices of the convex polygon and the area that must be visible. It is guaranteed that $S$ does not exceed the area of the convex polygon.\n\nEach of the following $n$ lines contains two real numbers $x, y$ (with six decimal places), representing the coordinates of each vertex. The vertices are given in either counterclockwise or clockwise order.", "outputFormat": "Output a real number $r$, with two decimal places, representing the minimal radius of the hole.", "hint": "Constraints:\n- For $50\\%$ of the testdata: $3 \\le n \\le 10$, the input convex polygon is regular, and its center is at $(0,0)$.\n- For $100\\%$ of the testdata: $3 \\le n \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2006] 一孔之见", "background": "", "description": "从一个圆孔里看一个凸多边形，为了让看到的面积至少为 $S$，孔的半径至少需要多大？  \n假设孔的圆心固定在 $(0,0)$，且 $(0, 0)$ 在多边形的内部（而不是外部或边界上）。\n", "inputFormat": "第一行包含一个整数 $n$ 和一个实数 $S$（精确到小数点后两位），表示凸多边形的顶点数和需要看到的面积。保证 $S$ 不超过凸多边形的面积。\n\n以下 $n$ 行每行包含两个实数 $x,y$（精确到小数点后 $6$ 位），表示各顶点的坐标。顶点按逆时针顺序或顺时针顺序给出。\n", "outputFormat": "包含一个实数 $r$，保留两位小数，表示孔的最小半径。\n", "hint": "【限制】\n\n对于 $50\\%$ 的数据：$3\\le n \\le 10$，输入凸多边形是正多边形，且中心在 $(0,0)$   \n对于 $100\\%$ 的数据：$3\\le n \\le 50$\n\n", "locale": "zh-CN"}}}
{"pid": "P2334", "type": "P", "difficulty": 5, "samples": [["4\n2 1 0\n2 0 1\n1 2\n7 0 1 1 1 1 1 1\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "四川", "各省省选", "O2优化"], "title": "[SCOI2006] 城堡", "background": "", "description": "为了救出心爱的公主 Julie，Billy 来到了恶魔的城堡。经过了三天三夜的浴血奋战，魔王殿已近在咫尺。\n\n这是一条狭长的通道，Billy 在位置 $0$，而魔王殿在位置 $n + 1$。在每个单位时间，Billy 可以往左或往右移动一个单位，或者原地不动。每个格子的上方都有石头周期性的往下砸，格子 $i$ 的周期为 $c_i$。\n\n对于格子 $i$ 上方的石头，可以用 $c_i$ 个整数来描述：$h_1, h_2, \\cdots, h_{c_i}$，表示在时间 $t = kc_i + x$（$1\\leq x\\leq c_i$）时处于该格子上将被砸掉 $h_x$ 格血。其中 $h_x = 0$ 表示该时刻没有石头砸下来。\n\n计算 Billy 最少损失多少格血后可以到达魔王殿。假设 Billy 是不会死的。注意从位置 $1$ 也是可以回到位置 $0$ 的，且在位置 $0$ 不损血。\n", "inputFormat": "第一行包括一个整数 $n$，表示通道的长度。\n\n以下 $n$ 行，依次表示格子 $1, 2, \\cdots, n$ 的情况。每行第一个整数为 $c_i$，表示石头下落周期，接下来有 $c_i$ 个整数，分别为 $h_1, h_2, \\cdots, h_{c_i}$。\n", "outputFormat": "包含一个整数 HP，表示血的最小损失。", "hint": "对于 $50\\%$ 的数据，$n\\leq 20$；\n\n对于 $100\\%$ 的数据满足：$0\\leq n\\leq 1000$，$1\\leq c_i\\leq 10$，$0\\leq h_x\\leq 100$。\n\n- 2023.4.12 添加一组 hack 数据，不计分。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2006] Castle", "background": "", "description": "To rescue his beloved princess Julie, Billy has arrived at the demon’s castle. After fighting for three days and nights, the Demon King’s hall is within reach.\n\nThis is a narrow corridor. Billy is at position $0$, and the Demon King’s hall is at position $n + 1$. At each unit of time, Billy may move one unit left, one unit right, or stay in place. Above each cell, stones periodically fall; the period of cell $i$ is $c_i$.\n\nFor the stones above cell $i$, we use $c_i$ integers $h_1, h_2, \\cdots, h_{c_i}$ to describe them: at time $t = k c_i + x$ ($1 \\le x \\le c_i$) for any integer $k \\ge 0$, being on that cell will cause a loss of $h_x$ HP. Here $h_x = 0$ means no stone falls at that moment.\n\nCompute the minimum total HP that Billy must lose to reach the Demon King’s hall. Assume Billy will not die. Note that from position $1$ you may move back to position $0$, and at position $0$ no HP is lost.", "inputFormat": "The first line contains an integer $n$, the length of the corridor.\n\nThe next $n$ lines describe cells $1, 2, \\cdots, n$. In each line, the first integer is $c_i$, the falling period, followed by $c_i$ integers $h_1, h_2, \\cdots, h_{c_i}$.", "outputFormat": "Output a single integer HP, the minimum total HP lost.", "hint": "- For $50\\%$ of the testdata, $n \\le 20$.\n- For $100\\%$ of the testdata: $0 \\le n \\le 1000$, $1 \\le c_i \\le 10$, $0 \\le h_x \\le 100$.\n- 2023-04-12: Added one hack testdata (not scored).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2006] 城堡", "background": "", "description": "为了救出心爱的公主 Julie，Billy 来到了恶魔的城堡。经过了三天三夜的浴血奋战，魔王殿已近在咫尺。\n\n这是一条狭长的通道，Billy 在位置 $0$，而魔王殿在位置 $n + 1$。在每个单位时间，Billy 可以往左或往右移动一个单位，或者原地不动。每个格子的上方都有石头周期性的往下砸，格子 $i$ 的周期为 $c_i$。\n\n对于格子 $i$ 上方的石头，可以用 $c_i$ 个整数来描述：$h_1, h_2, \\cdots, h_{c_i}$，表示在时间 $t = kc_i + x$（$1\\leq x\\leq c_i$）时处于该格子上将被砸掉 $h_x$ 格血。其中 $h_x = 0$ 表示该时刻没有石头砸下来。\n\n计算 Billy 最少损失多少格血后可以到达魔王殿。假设 Billy 是不会死的。注意从位置 $1$ 也是可以回到位置 $0$ 的，且在位置 $0$ 不损血。\n", "inputFormat": "第一行包括一个整数 $n$，表示通道的长度。\n\n以下 $n$ 行，依次表示格子 $1, 2, \\cdots, n$ 的情况。每行第一个整数为 $c_i$，表示石头下落周期，接下来有 $c_i$ 个整数，分别为 $h_1, h_2, \\cdots, h_{c_i}$。\n", "outputFormat": "包含一个整数 HP，表示血的最小损失。", "hint": "对于 $50\\%$ 的数据，$n\\leq 20$；\n\n对于 $100\\%$ 的数据满足：$0\\leq n\\leq 1000$，$1\\leq c_i\\leq 10$，$0\\leq h_x\\leq 100$。\n\n- 2023.4.12 添加一组 hack 数据，不计分。", "locale": "zh-CN"}}}
{"pid": "P2335", "type": "P", "difficulty": 3, "samples": [["3 4\n0 0 0 1\n0 0 1 1\n0 1 1 0", "3 2 1 0\n2 1 0 0\n1 0 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2005", "各省省选", "山东", "广度优先搜索 BFS"], "title": "[SDOI2005] 位图", "background": "", "description": "现在我们给出一个 $n\\ \\times m$ 的单色位图，且该图中至少含有一个白色的像素。我们用 $(i,j)$ 来代表第 $i$ 行第 $j$ 列的像素，并且定义两点 $p_1=(i_1,j_1)$ 和 $p_2=(i_2,j_2)$ 之间的距离为：\n\n$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|$$\n\n### 任务\n\n请写一个程序，读入该位图，并对于每个像素，计算出离该像素最近的白色像素与它的距离。把结果输出。", "inputFormat": "第一行包括两个用空格分开的整数 $n$ 和 $m$，$1 \\le n \\le 150$，$1 \\le m \\le 150$。\n\n以下的 $n$ 行每行包括一个长度为 $m$ 的整数为 $0$ 或 $1$，在第 $i+1$ 行的第 $j$ 个字符如果为 $1$，那么表示像素 $(i,j)$ 为白的，否则为黑的。", "outputFormat": "输出一个 $n\\ \\times m$ 的数表，其中的第 $i$ 行的第 $j$ 个数字为 $f(i,j)$ 表示像素 $(i,j)$ 到最近的白色像素的距离。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Bitmap", "background": "", "description": "You are given a monochrome bitmap of size $n\\ \\times m$, which contains at least one white pixel. We use $(i,j)$ to denote the pixel in the $i$-th row and $j$-th column, and define the distance between two points $p_1=(i_1,j_1)$ and $p_2=(i_2,j_2)$ as:\n\n$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|.$$\n\nYour task is to read the bitmap and, for each pixel, compute the distance to the nearest white pixel. Output the result.", "inputFormat": "The first line contains two space-separated integers $n$ and $m$, where $1 \\le n \\le 150$ and $1 \\le m \\le 150$.\n\nEach of the next $n$ lines contains a string of length $m$ consisting of characters '0' and '1'. In the $i$-th of these lines, if the $j$-th character is '1', then pixel $(i,j)$ is white; otherwise it is black.", "outputFormat": "Output an $n\\ \\times m$ table of numbers. In this table, the $j$-th number in the $i$-th row is $f(i,j)$, which denotes the distance from pixel $(i,j)$ to its nearest white pixel.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 位图", "background": "", "description": "现在我们给出一个 $n\\ \\times m$ 的单色位图，且该图中至少含有一个白色的像素。我们用 $(i,j)$ 来代表第 $i$ 行第 $j$ 列的像素，并且定义两点 $p_1=(i_1,j_1)$ 和 $p_2=(i_2,j_2)$ 之间的距离为：\n\n$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|$$\n\n### 任务\n\n请写一个程序，读入该位图，并对于每个像素，计算出离该像素最近的白色像素与它的距离。把结果输出。", "inputFormat": "第一行包括两个用空格分开的整数 $n$ 和 $m$，$1 \\le n \\le 150$，$1 \\le m \\le 150$。\n\n以下的 $n$ 行每行包括一个长度为 $m$ 的整数为 $0$ 或 $1$，在第 $i+1$ 行的第 $j$ 个字符如果为 $1$，那么表示像素 $(i,j)$ 为白的，否则为黑的。", "outputFormat": "输出一个 $n\\ \\times m$ 的数表，其中的第 $i$ 行的第 $j$ 个数字为 $f(i,j)$ 表示像素 $(i,j)$ 到最近的白色像素的距离。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2336", "type": "P", "difficulty": 6, "samples": [["2 3\n6 8 25 0 24 14 8 6 18 0 10 20 24 0\n7 14 17 8 7 0 17 0 5 8 25 0 24 0\n4 8 25 0 24\n4 7 0 17 0\n4 17 0 8 25\n", "2\n1\n0\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "四川", "莫队", "各省省选", "AC 自动机", "后缀数组 SA"], "title": "[SCOI2012] 喵星球上的点名", "background": "", "description": "a180285 幸运地被选做了地球到喵星球的留学生。他发现喵星人在上课前的点名现象非常有趣。\n\n假设课堂上有 $n$ 个喵星人，每个喵星人的名字由**姓**和**名**构成。喵星球上的老师会选择 $m$ 个串来点名，每次读出一个串的时候，如果这个串是一个喵星人的姓或名的**子串**，那么这个喵星人就必须答到。\n\n然而，由于喵星人的字码如此古怪，以至于不能用 ASCII 码来表示。为了方便描述，a180285 决定用数串来表示喵星人的名字。\n\n\n\n现在你能帮助 a180285 统计每次点名的时候有多少喵星人答到，以及 $m$ 次点名结束后每个喵星人答到多少次吗？\n", "inputFormat": "首先定义喵星球上的字符串给定方法：\n\n先给出一个正整数 $l$，表示字符串的长度，接下来 $l$ 个整数，第 $i$ 个整数 $a_i$ 表示字符串的第 $i$ 个字符。\n\n输入的第一行有两个整数，分别表示喵星人的个数 $n$ 个点名次数 $m$。  \n接下来 $n$ 行，每行两个喵星球上的字符串，按照定义的方法给出，依次表示第 $i$ 只喵的姓和名。  \n接下来 $m$ 行，每行一个喵星球上的字符串，表示一个老师点名的串。", "outputFormat": "对于每个老师点名的串，输出一行一个整数表示有多少只喵答到。  \n然后在最后一行输出 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个喵星人被点到的次数。\n", "hint": "#### 样例 1 解释\n\n事实上样例给出的数据如果翻译成地球上的语言可以这样来看\n\n```plain\n2 3\nizayoi sakuya\norihara izaya\nizay\nhara\nraiz\n```\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n, m \\le 10^3$，喵星人的名字总长不超过 $4\\times10^3$，点名串的总长不超过 $2\\times10^3$。\n- 对于$100\\%$ 的数据，保证 $1 \\leq n\\le 5 \\times 10^4$，$1 \\leq m \\le 10^5$，喵星人的名字总长和点名串的总长分别不超过 $10^5$，保证喵星人的字符串中作为字符存在的数不超过 $10^4$ 。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2012] Roll Call on Planet Meow", "background": "", "description": "a180285 was lucky to be selected as an exchange student from Earth to Planet Meow. He found the roll call before class very interesting.\n\nSuppose there are $n$ Meowians in class, and each Meowian’s name consists of a **surname** and a **given name**. The teacher on Planet Meow will choose $m$ strings for roll call. Each time a string is read, if this string is a substring of a Meowian’s surname or given name, then that Meowian must respond.\n\nHowever, the Meowians’ character encoding is so peculiar that it cannot be represented using ASCII. For convenience, a180285 decides to represent Meowian names as sequences of numbers.\n\nNow, can you help a180285 count how many Meowians respond to each roll call, and after all $m$ roll calls, how many times each Meowian has responded?", "inputFormat": "First, we define how strings on Planet Meow are given:\n\nYou are first given a positive integer $l$, the length of the string, followed by $l$ integers. The $i$-th integer $a_i$ denotes the $i$-th character of the string.\n\nThe first line contains two integers $n$ and $m$, the number of Meowians and the number of roll calls.  \nThe next $n$ lines each contain two Planet Meow strings given as above, representing the $i$-th Meowian’s surname and given name, respectively.  \nThe next $m$ lines each contain one Planet Meow string, representing a string read by the teacher for roll call.", "outputFormat": "For each string read by the teacher, output one line with a single integer indicating how many Meowians respond.  \nThen output, on the last line, $n$ space-separated integers; the $i$-th integer is the number of times the $i$-th Meowian has been called.", "hint": "#### Sample 1 Explanation\n\nIn fact, if the sample is translated into Earth language, it can be viewed as follows:\n\n```plain\n2 3\nizayoi sakuya\norihara izaya\nizay\nhara\nraiz\n```\n\n#### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n, m \\le 10^3$, the total length of Meowian names does not exceed $4 \\times 10^3$, and the total length of roll call strings does not exceed $2 \\times 10^3$.  \n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\le 5 \\times 10^4$, $1 \\leq m \\le 10^5$, the total length of Meowian names and the total length of roll call strings do not exceed $10^5$ respectively, and the numbers that appear as characters in Meowian strings are at most $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2012] 喵星球上的点名", "background": "", "description": "a180285 幸运地被选做了地球到喵星球的留学生。他发现喵星人在上课前的点名现象非常有趣。\n\n假设课堂上有 $n$ 个喵星人，每个喵星人的名字由**姓**和**名**构成。喵星球上的老师会选择 $m$ 个串来点名，每次读出一个串的时候，如果这个串是一个喵星人的姓或名的**子串**，那么这个喵星人就必须答到。\n\n然而，由于喵星人的字码如此古怪，以至于不能用 ASCII 码来表示。为了方便描述，a180285 决定用数串来表示喵星人的名字。\n\n\n\n现在你能帮助 a180285 统计每次点名的时候有多少喵星人答到，以及 $m$ 次点名结束后每个喵星人答到多少次吗？\n", "inputFormat": "首先定义喵星球上的字符串给定方法：\n\n先给出一个正整数 $l$，表示字符串的长度，接下来 $l$ 个整数，第 $i$ 个整数 $a_i$ 表示字符串的第 $i$ 个字符。\n\n输入的第一行有两个整数，分别表示喵星人的个数 $n$ 个点名次数 $m$。  \n接下来 $n$ 行，每行两个喵星球上的字符串，按照定义的方法给出，依次表示第 $i$ 只喵的姓和名。  \n接下来 $m$ 行，每行一个喵星球上的字符串，表示一个老师点名的串。", "outputFormat": "对于每个老师点名的串，输出一行一个整数表示有多少只喵答到。  \n然后在最后一行输出 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个喵星人被点到的次数。\n", "hint": "#### 样例 1 解释\n\n事实上样例给出的数据如果翻译成地球上的语言可以这样来看\n\n```plain\n2 3\nizayoi sakuya\norihara izaya\nizay\nhara\nraiz\n```\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n, m \\le 10^3$，喵星人的名字总长不超过 $4\\times10^3$，点名串的总长不超过 $2\\times10^3$。\n- 对于$100\\%$ 的数据，保证 $1 \\leq n\\le 5 \\times 10^4$，$1 \\leq m \\le 10^5$，喵星人的名字总长和点名串的总长分别不超过 $10^5$，保证喵星人的字符串中作为字符存在的数不超过 $10^4$ 。", "locale": "zh-CN"}}}
{"pid": "P2337", "type": "P", "difficulty": 7, "samples": [["3 3 1\nS.T\n...\n...", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "四川", "各省省选", "构造", "轮廓线 DP"], "title": "[SCOI2012] 喵星人的入侵", "background": "", "description": "\na180285 幸运地被选作了地球到喵星球的留学生，其实是作为特工去调查，喵星人是否有侵略地球的企图。喵星人果然打算入侵地球！从 a180285 口中得到确切消息之后，地球小组成员决定制定反侵略计划。\n\n喵星到地球的一段必经之路可以看作 $n\\times m$ 的格点，喵星人将会从地图上的 $S$ 位置出发，目的地是地球的入口 $T$。为了抵抗喵星人的入侵，地球防御小组打算在地图上的格点上放置一些炮塔（最多放置 $K$ 个），炮塔攻击周围的 $8$ 个方向（$8$ 个方向分别是：东、南、西、北、东北、西北、东南、西南）（如下图所示，中间格子的炮塔可以攻击周围的八个格子）。此外地球防御小组还可以在地图上放置无限多个障碍，使得喵星人无法从有障碍的格子经过。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l6ezyb3h.png)\n\n右图是 $3\\times 3$ 地图的一个示例，其中 $\\tt X$ 表示炮塔，$\\tt \\#$ 表示障碍，有炮塔或者障碍的格子，喵星人都无法经过。在这张地图中喵星人从 $S$ 走到 $T$ 受到的伤害如下：\n\n- 在 $S(1, 0)$ 处受到伤害为 $2$（炮塔 $(0,0)$ 和 $(2, 1)$ 能攻击到 $S$）；\n- 在空地 $(1,1)$ 处受到伤害为 $3$（同时被炮塔 $(0,0),(0,2)$ 和 $(2, 1)$ 攻击）；\n- 在 $T(1,2)$ 处受到伤害为 $2$（炮塔 $(0,2)$ 和 $(2, 1)$ 能攻击到 $T$）。\n\n于是受到的总伤害为 $2+3+2=7$。\n\n作为地球防御小组的成员，请你为喵星人布阵，使得喵星人受到的伤害最大。注意如果有多条从 $S$ 到 $T$ 的路径，喵星人会选择伤害最小的一条。", "inputFormat": "第一行为三个整数 $n,m,K$，分别表示地图的长和宽，以及最多能放置的炮塔数量。\n\n接下来的 $n$ 行，每行包含 $m$ 个字符，$\\tt \\#$ 表示地图上原有的障碍，$\\tt .$ 表示该处为空地，数据保证在原地图上存在 $S$ 到 $T$ 的路径。", "outputFormat": "输出在合理布阵下，喵星人采取最优策略后，会受到的最大伤害。\n\n注意必须保证在布阵结束后喵星人仍然可以沿一条或以上的路径从起点 $S$ 到达终点 $T$，否则他们组织更大规模的侵略。", "hint": "### 样例解释\n\n样例的一种最优布局方案如下：\n\n```plain\nS#T\n.X.\n...\n```\n\n### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le n,m\\leq 6$；\n- 对于 $100\\%$ 的数据，保证 $\\min(n,m)\\le 6$，$\\max(n,m)\\le 20$，$1\\le K\\le 15$ 且从 $S$ 到 $T$ 的路径必定存在。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2012] Invasion of the Meowians", "background": "", "description": "a180285 was luckily chosen as an exchange student from Earth to the Meow Planet—actually as an agent to investigate whether the Meowians intend to invade Earth. The Meowians do plan to invade Earth! After obtaining the exact information from a180285, the Earth task force decided to devise an anti-invasion plan.\n\nA mandatory route from the Meow Planet to Earth can be viewed as an $n\\times m$ grid. The Meowians will start from position $S$ on the map, and their destination is Earth’s entrance $T$. To resist the Meowian invasion, the Earth Defense Team plans to place some turrets on grid cells (at most $K$ turrets). A turret attacks in all $8$ directions (the $8$ directions are: east, south, west, north, northeast, northwest, southeast, southwest) (as shown in the figure below, a turret in the center cell can attack the eight surrounding cells). In addition, the Earth Defense Team can place an unlimited number of obstacles on the map so that the Meowians cannot pass through cells with obstacles.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l6ezyb3h.png)\n\nThe figure shows an example on a $3\\times 3$ map, where $\\tt X$ denotes a turret and $\\tt \\#$ denotes an obstacle. Cells containing a turret or an obstacle are impassable to the Meowians. On this map, the damage taken by the Meowians when moving from $S$ to $T$ is as follows:\n- At $S(1, 0)$, the damage is $2$ (the turrets at $(0,0)$ and $(2, 1)$ can attack $S$).\n- At the empty cell $(1,1)$, the damage is $3$ (simultaneously attacked by the turrets $(0,0)$, $(0,2)$, and $(2, 1)$).\n- At $T(1,2)$, the damage is $2$ (the turrets at $(0,2)$ and $(2, 1)$ can attack $T$).\n\nTherefore, the total damage is $2+3+2=7$.\n\nAs a member of the Earth Defense Team, please arrange the placement so that the Meowians take the maximum possible damage. Note that if there are multiple paths from $S$ to $T$, the Meowians will choose the one with the minimal damage.", "inputFormat": "The first line contains three integers $n,m,K$, denoting the number of rows and columns of the map, and the maximum number of turrets that can be placed.\n\nThe next $n$ lines each contain $m$ characters: $\\tt \\#$ denotes an existing obstacle on the map, $\\tt .$ denotes an empty cell, $\\tt S$ denotes the start, and $\\tt T$ denotes the destination. It is guaranteed that in the original map there exists a path from $S$ to $T$.", "outputFormat": "Output the maximum damage the Meowians will take under an optimal placement, assuming they take the optimal route.\n\nNote that after the placement, you must still ensure that the Meowians can reach the destination $T$ from the start $S$ along at least one path; otherwise, they will organize an even larger-scale invasion.", "hint": "Sample Explanation\n\nOne optimal layout for the sample is as follows:\n```plain\nS#T\n.X.\n...\n```\n\nConstraints\n\n- For $30\\%$ of the testdata, $1\\le n,m\\leq 6$.\n- For $100\\%$ of the testdata, $\\min(n,m)\\le 6$, $\\max(n,m)\\le 20$, $1\\le K\\le 15$, and a path from $S$ to $T$ always exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2012] 喵星人的入侵", "background": "", "description": "\na180285 幸运地被选作了地球到喵星球的留学生，其实是作为特工去调查，喵星人是否有侵略地球的企图。喵星人果然打算入侵地球！从 a180285 口中得到确切消息之后，地球小组成员决定制定反侵略计划。\n\n喵星到地球的一段必经之路可以看作 $n\\times m$ 的格点，喵星人将会从地图上的 $S$ 位置出发，目的地是地球的入口 $T$。为了抵抗喵星人的入侵，地球防御小组打算在地图上的格点上放置一些炮塔（最多放置 $K$ 个），炮塔攻击周围的 $8$ 个方向（$8$ 个方向分别是：东、南、西、北、东北、西北、东南、西南）（如下图所示，中间格子的炮塔可以攻击周围的八个格子）。此外地球防御小组还可以在地图上放置无限多个障碍，使得喵星人无法从有障碍的格子经过。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l6ezyb3h.png)\n\n右图是 $3\\times 3$ 地图的一个示例，其中 $\\tt X$ 表示炮塔，$\\tt \\#$ 表示障碍，有炮塔或者障碍的格子，喵星人都无法经过。在这张地图中喵星人从 $S$ 走到 $T$ 受到的伤害如下：\n\n- 在 $S(1, 0)$ 处受到伤害为 $2$（炮塔 $(0,0)$ 和 $(2, 1)$ 能攻击到 $S$）；\n- 在空地 $(1,1)$ 处受到伤害为 $3$（同时被炮塔 $(0,0),(0,2)$ 和 $(2, 1)$ 攻击）；\n- 在 $T(1,2)$ 处受到伤害为 $2$（炮塔 $(0,2)$ 和 $(2, 1)$ 能攻击到 $T$）。\n\n于是受到的总伤害为 $2+3+2=7$。\n\n作为地球防御小组的成员，请你为喵星人布阵，使得喵星人受到的伤害最大。注意如果有多条从 $S$ 到 $T$ 的路径，喵星人会选择伤害最小的一条。", "inputFormat": "第一行为三个整数 $n,m,K$，分别表示地图的长和宽，以及最多能放置的炮塔数量。\n\n接下来的 $n$ 行，每行包含 $m$ 个字符，$\\tt \\#$ 表示地图上原有的障碍，$\\tt .$ 表示该处为空地，数据保证在原地图上存在 $S$ 到 $T$ 的路径。", "outputFormat": "输出在合理布阵下，喵星人采取最优策略后，会受到的最大伤害。\n\n注意必须保证在布阵结束后喵星人仍然可以沿一条或以上的路径从起点 $S$ 到达终点 $T$，否则他们组织更大规模的侵略。", "hint": "### 样例解释\n\n样例的一种最优布局方案如下：\n\n```plain\nS#T\n.X.\n...\n```\n\n### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le n,m\\leq 6$；\n- 对于 $100\\%$ 的数据，保证 $\\min(n,m)\\le 6$，$\\max(n,m)\\le 20$，$1\\le K\\le 15$ 且从 $S$ 到 $T$ 的路径必定存在。\n", "locale": "zh-CN"}}}
{"pid": "P2338", "type": "P", "difficulty": 3, "samples": [["2\nT 30\nD 10", "2970"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "2014", "线性数据结构", "USACO"], "title": "[USACO14JAN] Bessie Slows Down S", "background": null, "description": "贝西正在参加一项滑雪比赛。她从起点出发的时候，速度恒定为每秒 $1$ 米。然而，随着比赛进程的增加，她会犯很多错误，每次失误都会使她的速度下降。当她第一次失误后，速度会下降到每秒 $\\dfrac{1}{2}$ 米，第二次失误后，速度会下降到每秒 $\\dfrac{1}{3}$ 米，第 $k$ 次失误后，速度会下降到每秒 $\\dfrac{1}{k+1}$ 米。\n\n约翰记录了贝西的所有失误，一共有 $N$ 个。有两种失误，一种发生在比赛开始后的某个时间点，另一种发生在赛道的某个位置上。有时，贝西可能在某个时间点到达某个位置，而恰好在这个时间点和位置上都有一次失误的记录，这两个记录要算作不同的失误，会对贝西的速度造成两次影响。比赛的终点距离起点有 $1000$ 米，请问贝西需要多少时间才能滑过终点？", "inputFormat": "第一行：单个整数 $N$，$1\\le N\\le10000$。\n\n第二行到第 $N+1$ 行：每行开头有一个大写字母，代表贝西的一个失误类型：\n\n- 如果是 `T`，接下来会有一个整数 $S$，表示在比赛开始后的第 $S$ 秒钟整发生了一次失误，$1\\le S\\le10^7$。\n- 如果是 `D`，接下来会有一个整数 $X$，表示在距离起点 $X$ 米处发生了一次失误，$1\\le X\\le1000$。", "outputFormat": "单个整数：表示贝西需要多少秒才能滑到终点，如果精确的时间不是整数，则用四舍五入的方法向最接近的整数取整。", "hint": "样例解释：\n\n前 $10$ 秒，贝西的速度是每秒 $1$ 米，她滑了 $10$ 米。然后她遭遇了第一次失误，在接下来的 $20$ 秒内，她又滑了 $10$ 米。之后她遭遇了第二次失误，还剩下 $980$ 米，所以她共计花去 $10+20+2940=2970$ 秒才完成比赛。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14JAN] Bessie Slows Down S", "background": null, "description": "Bessie the cow is competing in a cross-country skiing event at the winter Moolympic games. She starts out at a speed of 1 meter per second. However, as she becomes more tired over time, she begins to slow down. Each time Bessie slows down, her speed decreases: she moves at 1/2 meter per second after slowing down once, then 1/3 meter per second after slowing down twice, and so on.\n\nYou are told when and where Bessie slows down, in terms of a series of events. An event like this:\n\nT 17 means that Bessie slows down at a specific time -- here, 17 seconds into the race. An event like this:\n\nD 10 means that Bessie slows down at a specific distance from the start -- in this case, 10 meters.\n\nGiven a list of N such events (1 <= N <= 10,000), please compute the amount of time, in seconds, for Bessie to travel an entire kilometer. Round your answer to the nearest integer second (0.5 rounds up to 1).", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Bessie Slows Down S", "background": null, "description": "贝西正在参加一项滑雪比赛。她从起点出发的时候，速度恒定为每秒 $1$ 米。然而，随着比赛进程的增加，她会犯很多错误，每次失误都会使她的速度下降。当她第一次失误后，速度会下降到每秒 $\\dfrac{1}{2}$ 米，第二次失误后，速度会下降到每秒 $\\dfrac{1}{3}$ 米，第 $k$ 次失误后，速度会下降到每秒 $\\dfrac{1}{k+1}$ 米。\n\n约翰记录了贝西的所有失误，一共有 $N$ 个。有两种失误，一种发生在比赛开始后的某个时间点，另一种发生在赛道的某个位置上。有时，贝西可能在某个时间点到达某个位置，而恰好在这个时间点和位置上都有一次失误的记录，这两个记录要算作不同的失误，会对贝西的速度造成两次影响。比赛的终点距离起点有 $1000$ 米，请问贝西需要多少时间才能滑过终点？", "inputFormat": "第一行：单个整数 $N$，$1\\le N\\le10000$。\n\n第二行到第 $N+1$ 行：每行开头有一个大写字母，代表贝西的一个失误类型：\n\n- 如果是 `T`，接下来会有一个整数 $S$，表示在比赛开始后的第 $S$ 秒钟整发生了一次失误，$1\\le S\\le10^7$。\n- 如果是 `D`，接下来会有一个整数 $X$，表示在距离起点 $X$ 米处发生了一次失误，$1\\le X\\le1000$。", "outputFormat": "单个整数：表示贝西需要多少秒才能滑到终点，如果精确的时间不是整数，则用四舍五入的方法向最接近的整数取整。", "hint": "样例解释：\n\n前 $10$ 秒，贝西的速度是每秒 $1$ 米，她滑了 $10$ 米。然后她遭遇了第一次失误，在接下来的 $20$ 秒内，她又滑了 $10$ 米。之后她遭遇了第二次失误，还剩下 $980$ 米，所以她共计花去 $10+20+2940=2970$ 秒才完成比赛。", "locale": "zh-CN"}}}
{"pid": "P2339", "type": "P", "difficulty": 5, "samples": [["4 10 3\n8 9\n4 21\n3 16\n8 12\n", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2004", "线性数据结构", "USACO"], "title": "[USACO04OPEN] Turning in Homework G", "background": null, "description": "贝茜有 $ C $ 门科目的作业要上交，之后她要去坐巴士和奶牛同学回家。\n\n每门科目的老师所在的教室排列在一条长为 $ H $ 的走廊上，他们只在课后接收作业，交作业不需要时间。贝茜现在在位置 $0$，她会告诉你每个教室所在的位置，以及走廊出口的位置。她每走 $1$ 个单位的路程，就要用 $1$ 分钟。她希望你计算最快多久以后她能交完作业并到达出口。", "inputFormat": "第一行三个整数 $C$，$H$ 和 $B$（$1 \\le C \\le 1000,1 \\le H \\le 1000,0 \\le B \\le H$）。\n\n第二行到 $C+1$ 行中，第 $i+1$ 行有两个整数 $X_i$ 和 $T_i$（$0 \\le X_i \\le H,0 \\le T_i \\le 10^4$）。\n\n$B$ 表示走廊出口位置。\n\n$X_i$ 表示第  $i$ 份作业应该在  $X_i$ 这个位置交。\n\n$T_i$ 表示这个位置（教室）的这个科目老师（也就是收这份作业的老师）下课的时间。", "outputFormat": "一个整数，表示贝西交完作业后走到车站的最短时间。", "hint": "在样例中，走到坐标 $8$ 处，第 $9$ 分钟交一本作业，等到第 $12$ 分钟时，交另一本作业。再走到坐标 $4$ 处交作业，最后走到坐标 $3$ 处，交最后一本作业，此地就是车站所在位置，共用时 $22$ 分钟。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04OPEN] Turning in Homework G", "background": "", "description": "Bessie has $C$ assignments to turn in, after which she will take the bus home with her classmates.\n\nAll teachers’ classrooms are arranged along a corridor of length $H$. They accept assignments only after class, and turning them in takes no time. Bessie starts at position $0$. You are given each classroom’s position and the position of the corridor exit (bus stop). For every unit of distance she walks, she spends 1 minute. Compute the earliest time by which she can finish turning in all assignments and reach the exit.", "inputFormat": "The first line contains three integers $C$, $H$, and $B$ ($1 \\le C \\le 1000, 1 \\le H \\le 1000, 0 \\le B \\le H$).\n\nLines $2$ through $C+1$: on the $(i+1)$-th line, there are two integers $X_i$ and $T_i$ ($0 \\le X_i \\le H, 0 \\le T_i \\le 10^4$).\n\n$B$ denotes the position of the corridor exit.\n\n$X_i$ is the position where the $i$-th assignment must be turned in.\n\n$T_i$ is the dismissal time of the teacher for that subject (the one who accepts this assignment) at that position.", "outputFormat": "Output a single integer, the minimum time for Bessie to finish turning in all assignments and reach the exit.", "hint": "In the sample, she walks to coordinate 8, turns in one assignment at minute 9, waits until minute 12 to turn in another, then walks to coordinate 4 to turn in, and finally goes to coordinate 3 to turn in the last assignment, which is also the bus stop location, for a total of 22 minutes.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04OPEN] Turning in Homework G", "background": null, "description": "贝茜有 $ C $ 门科目的作业要上交，之后她要去坐巴士和奶牛同学回家。\n\n每门科目的老师所在的教室排列在一条长为 $ H $ 的走廊上，他们只在课后接收作业，交作业不需要时间。贝茜现在在位置 $0$，她会告诉你每个教室所在的位置，以及走廊出口的位置。她每走 $1$ 个单位的路程，就要用 $1$ 分钟。她希望你计算最快多久以后她能交完作业并到达出口。", "inputFormat": "第一行三个整数 $C$，$H$ 和 $B$（$1 \\le C \\le 1000,1 \\le H \\le 1000,0 \\le B \\le H$）。\n\n第二行到 $C+1$ 行中，第 $i+1$ 行有两个整数 $X_i$ 和 $T_i$（$0 \\le X_i \\le H,0 \\le T_i \\le 10^4$）。\n\n$B$ 表示走廊出口位置。\n\n$X_i$ 表示第  $i$ 份作业应该在  $X_i$ 这个位置交。\n\n$T_i$ 表示这个位置（教室）的这个科目老师（也就是收这份作业的老师）下课的时间。", "outputFormat": "一个整数，表示贝西交完作业后走到车站的最短时间。", "hint": "在样例中，走到坐标 $8$ 处，第 $9$ 分钟交一本作业，等到第 $12$ 分钟时，交另一本作业。再走到坐标 $4$ 处交作业，最后走到坐标 $3$ 处，交最后一本作业，此地就是车站所在位置，共用时 $22$ 分钟。", "locale": "zh-CN"}}}
{"pid": "P2340", "type": "P", "difficulty": 3, "samples": [["5\n-5 7\n8 -6\n6 -3\n2 1\n-8 -5", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2003", "USACO"], "title": "[USACO03FALL] Cow Exhibition G", "background": null, "description": "奶牛想证明它们是聪明而风趣的。为此，贝西筹备了一个奶牛博览会，她已经对 $N$ 头奶牛进行了面试，确定了每头奶牛的智商和情商。\n\n贝西有权选择让哪些奶牛参加展览。由于负的智商或情商会造成负面效果，所以贝西不希望出展奶牛的智商之和小于零，或情商之和小于零。满足这两个条件下，她希望出展奶牛的智商与情商之和越大越好，请帮助贝西求出这个最大值。", "inputFormat": "第一行：单个整数 $N$，$1 \\le N \\le 400$。\n\n第二行到第 $N+1$ 行：第 $i+1$ 行有两个整数：$S_i$ 和 $F_i$，表示第 $i$ 头奶牛的智商和情商，$-1000 \\le S_i,F_i \\le 1000$。", "outputFormat": "输出单个整数：表示情商与智商和的最大值。贝西可以不让任何奶牛参加展览，如果这样做是最好的，输出 $0$。", "hint": "选择第一头，第三头，第四头奶牛，智商和为 $−5+6+2 = 3$，情商和为 $7−3+1 = 5$。\n\n再加入第二号奶牛可使总和提升到 $10$，不过由于情商和变成负的了，所以是不允许的。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO03FALL] Cow Exhibition G", "background": "", "description": "The cows want to prove that they are smart and funny. To this end, Bessie is organizing a cow exhibition. She has interviewed $N$ cows and determined each cow’s smartness and fun.\n\nBessie may choose which cows to include. Because negative smartness or fun would have adverse effects, she does not want the total smartness to be negative, nor the total fun to be negative. Subject to both constraints, she wants to maximize the sum of smartness and fun over the selected cows. Help Bessie compute this maximum.", "inputFormat": "The first line contains a single integer $N$ ($1 \\le N \\le 400$).\n\nLines $2$ through $N+1$: the $(i+1)$-th line contains two integers $S_i$ and $F_i$, the smartness and fun of the $i$-th cow ($-1000 \\le S_i, F_i \\le 1000$).", "outputFormat": "Output a single integer: the maximum possible sum of smartness and fun. Bessie may choose no cows; if that is optimal, output $0$.", "hint": "Select cows $1$, $3$, and $4$: the smartness sum is $-5 + 6 + 2 = 3$, and the fun sum is $7 - 3 + 1 = 5$.\n\nAdding cow $2$ would raise the total to $10$, but the fun sum would become negative, which is not allowed.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO03FALL] Cow Exhibition G", "background": null, "description": "奶牛想证明它们是聪明而风趣的。为此，贝西筹备了一个奶牛博览会，她已经对 $N$ 头奶牛进行了面试，确定了每头奶牛的智商和情商。\n\n贝西有权选择让哪些奶牛参加展览。由于负的智商或情商会造成负面效果，所以贝西不希望出展奶牛的智商之和小于零，或情商之和小于零。满足这两个条件下，她希望出展奶牛的智商与情商之和越大越好，请帮助贝西求出这个最大值。", "inputFormat": "第一行：单个整数 $N$，$1 \\le N \\le 400$。\n\n第二行到第 $N+1$ 行：第 $i+1$ 行有两个整数：$S_i$ 和 $F_i$，表示第 $i$ 头奶牛的智商和情商，$-1000 \\le S_i,F_i \\le 1000$。", "outputFormat": "输出单个整数：表示情商与智商和的最大值。贝西可以不让任何奶牛参加展览，如果这样做是最好的，输出 $0$。", "hint": "选择第一头，第三头，第四头奶牛，智商和为 $−5+6+2 = 3$，情商和为 $7−3+1 = 5$。\n\n再加入第二号奶牛可使总和提升到 $10$，不过由于情商和变成负的了，所以是不允许的。", "locale": "zh-CN"}}}
{"pid": "P2341", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2\n2 1\n2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2003", "2006", "河南", "USACO", "各省省选", "强连通分量", "Tarjan", "栈"], "title": "[USACO03FALL / HAOI2006] 受欢迎的牛 G", "background": "本题测试数据已修复。", "description": "每头奶牛都梦想成为牛棚里的明星。被所有奶牛喜欢的奶牛就是一头明星奶牛。所有奶牛都是自恋狂，每头奶牛总是喜欢自己的。奶牛之间的“喜欢”是可以传递的——如果 $A$ 喜欢 $B$，$B$ 喜欢 $C$，那么 $A$ 也喜欢 $C$。牛栏里共有 $N$ 头奶牛，给定一些奶牛之间的爱慕关系，请你算出有多少头奶牛可以当明星。", "inputFormat": "第一行：两个用空格分开的整数：$N$ 和 $M$。\n\n接下来 $M$ 行：每行两个用空格分开的整数：$A$ 和 $B$，表示 $A$ 喜欢 $B$。", "outputFormat": "一行单独一个整数，表示明星奶牛的数量。", "hint": "只有 $3$ 号奶牛可以做明星。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$N\\le20$，$M\\le50$。\n\n对于 $30\\%$ 的数据，$N\\le10^3$，$M\\le2\\times 10^4$。\n\n对于 $70\\%$ 的数据，$N\\le5\\times 10^3$，$M\\le5\\times 10^4$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le10^4$，$1\\le M\\le5\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO03FALL / HAOI2006] Popular Cows G", "background": "The testdata for this problem has been fixed.", "description": "Every cow dreams of becoming the star of the barn. A cow that is liked by all cows is a star cow. All cows are self-obsessed; each cow always likes itself. The “likes” relation is transitive—if $A$ likes $B$, and $B$ likes $C$, then $A$ also likes $C$. There are $N$ cows in the barn. Given some admiration relationships between cows, please compute how many cows can be stars.", "inputFormat": "The first line contains two space-separated integers: $N$ and $M$.\nThe next $M$ lines: each line contains two space-separated integers: $A$ and $B$, meaning $A$ likes $B$.", "outputFormat": "Output a single integer on one line, the number of star cows.", "hint": "Only cow number $3$ can be a star.\n\nConstraints\n- For $10\\%$ of the testdata, $N \\le 20$, $M \\le 50$.\n- For $30\\%$ of the testdata, $N \\le 10^3$, $M \\le 2 \\times 10^4$.\n- For $70\\%$ of the testdata, $N \\le 5 \\times 10^3$, $M \\le 5 \\times 10^4$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 10^4$, $1 \\le M \\le 5 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO03FALL / HAOI2006] 受欢迎的牛 G", "background": "本题测试数据已修复。", "description": "每头奶牛都梦想成为牛棚里的明星。被所有奶牛喜欢的奶牛就是一头明星奶牛。所有奶牛都是自恋狂，每头奶牛总是喜欢自己的。奶牛之间的“喜欢”是可以传递的——如果 $A$ 喜欢 $B$，$B$ 喜欢 $C$，那么 $A$ 也喜欢 $C$。牛栏里共有 $N$ 头奶牛，给定一些奶牛之间的爱慕关系，请你算出有多少头奶牛可以当明星。", "inputFormat": "第一行：两个用空格分开的整数：$N$ 和 $M$。\n\n接下来 $M$ 行：每行两个用空格分开的整数：$A$ 和 $B$，表示 $A$ 喜欢 $B$。", "outputFormat": "一行单独一个整数，表示明星奶牛的数量。", "hint": "只有 $3$ 号奶牛可以做明星。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$N\\le20$，$M\\le50$。\n\n对于 $30\\%$ 的数据，$N\\le10^3$，$M\\le2\\times 10^4$。\n\n对于 $70\\%$ 的数据，$N\\le5\\times 10^3$，$M\\le5\\times 10^4$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le10^4$，$1\\le M\\le5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2343", "type": "P", "difficulty": 5, "samples": [["5 3\n1 3 2 5 6\n1 3\n2 4\n1 6\n", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "二分", "平衡树", "树状数组", "洛谷原创"], "title": "宝石管理系统", "background": null, "description": "GY 君购买了一批宝石放进了仓库。有一天 GY 君心血来潮，想要清点他的宝石，于是把 $m$ 个宝石都取出来放进了宝石管理系统。每个宝石 $i$ 都有一个珍贵值 $v_i$，他希望你能编写程序查找到从大到小第 $n$ 珍贵的宝石。但是现在问题来了，他非常不小心的留了一些宝石在仓库里面，有可能要往现有的系统中添加宝石。这些宝石的个数比较少。他表示非常抱歉，但是还是希望你的系统能起作用。", "inputFormat": "第一行两个整数 $m,q$，表示已经取出来的宝石个数以及接下来的查询或插入操作个数。\n\n第二行 $m$ 个整数，表示这 $m$ 个宝石的珍贵值。\n\n以下 $q$ 行，每行两个整数 $c,n$。\n\n若 $c=1$（即询问），则输出当前第 $n$ 珍贵的宝石。\n\n若 $c=2$（即插入），则往系统中插入珍贵值为 $n$ 的宝石。", "outputFormat": "对于每个 $c=1$（询问）,输出当前第 $n$ 珍贵的宝石的珍贵值 $v_i$。", "hint": "对于 $50\\%$ 的数据，没有 $c=2$ 的情况；\n\n对于 $100\\%$ 的数据，$m\\leq 100000$，$c=2$ 的情况不超过 $10000$ 次，$q\\leq 30000$，$0 \\leq v_i \\lt 2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "Gemstone Management System", "background": "", "description": "GY bought a batch of gemstones and put them in a warehouse. One day, GY decided to count them, so he took out $m$ gemstones and put them into a gemstone management system. Each gemstone $i$ has a value $v_i$. He hopes you can write a program to find the $n$-th most valuable gemstone in descending order. However, there is a problem: he carelessly left some gemstones in the warehouse, and he may add them to the current system. The number of such gemstones is small. He is sorry, but he still hopes your system will work.", "inputFormat": "The first line contains two integers $m, q$, the number of gemstones already taken out and the number of following queries or insertions.\n\nThe second line contains $m$ integers, the values of these $m$ gemstones.\n\nEach of the following $q$ lines contains two integers $c, n$.\n\nIf $c = 1$ (query), output the current $n$-th most valuable gemstone.\n\nIf $c = 2$ (insertion), insert a gemstone with value $n$ into the system.", "outputFormat": "For each case with $c = 1$ (query), output the value $v_i$ of the current $n$-th most valuable gemstone.", "hint": "- For $50\\%$ of the testdata, there is no case with $c = 2$.\n- For $100\\%$ of the testdata, $m \\leq 100000$, the number of cases with $c = 2$ does not exceed $10000$, $q \\leq 30000$, $0 \\leq v_i < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宝石管理系统", "background": null, "description": "GY 君购买了一批宝石放进了仓库。有一天 GY 君心血来潮，想要清点他的宝石，于是把 $m$ 个宝石都取出来放进了宝石管理系统。每个宝石 $i$ 都有一个珍贵值 $v_i$，他希望你能编写程序查找到从大到小第 $n$ 珍贵的宝石。但是现在问题来了，他非常不小心的留了一些宝石在仓库里面，有可能要往现有的系统中添加宝石。这些宝石的个数比较少。他表示非常抱歉，但是还是希望你的系统能起作用。", "inputFormat": "第一行两个整数 $m,q$，表示已经取出来的宝石个数以及接下来的查询或插入操作个数。\n\n第二行 $m$ 个整数，表示这 $m$ 个宝石的珍贵值。\n\n以下 $q$ 行，每行两个整数 $c,n$。\n\n若 $c=1$（即询问），则输出当前第 $n$ 珍贵的宝石。\n\n若 $c=2$（即插入），则往系统中插入珍贵值为 $n$ 的宝石。", "outputFormat": "对于每个 $c=1$（询问）,输出当前第 $n$ 珍贵的宝石的珍贵值 $v_i$。", "hint": "对于 $50\\%$ 的数据，没有 $c=2$ 的情况；\n\n对于 $100\\%$ 的数据，$m\\leq 100000$，$c=2$ 的情况不超过 $10000$ 次，$q\\leq 30000$，$0 \\leq v_i \\lt 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P2344", "type": "P", "difficulty": 5, "samples": [["4\n2\n3\n-3\n1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2011", "USACO", "树状数组", "离散化", "前缀和"], "title": "[USACO11FEB] Generic Cow Protests G", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一列，正在进行一场抗议活动。第 $i$ 头奶牛的理智度为 $a_i$（$-10^4 \\leq a_i \\leq 10^4$）。\n\nFJ 希望奶牛在抗议时保持理性，为此，他打算将所有的奶牛隔离成若干个小组，每个小组内的奶牛的理智度总和都要不小于零。\n\n由于奶牛是按直线排列的，所以一个小组内的奶牛位置必须是连续的。请帮助 FJ 计算一下，满足条件的分组方案有多少种。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 头奶牛的理智度 $a_i$。", "outputFormat": "输出满足条件的分组方案对 $10^9+9$ 取模的结果。", "hint": "所有合法分组方案如下：\n\n- $\\texttt{(2 3 -3 1)}$\n- $\\texttt{(2 3 -3) (1)}$\n- $\\texttt{(2) (3 -3 1)}$\n- $\\texttt{(2) (3 -3) (1)}$", "locale": "zh-CN", "translations": {"en": {"title": "[USACO11FEB] Generic Cow Protests G", "background": "", "description": "Farmer John's $N$ cows ($1 \\leq N \\leq 10^5$) stand in a line, holding a protest. The $i$-th cow has a sanity value $a_i$ ($-10^4 \\leq a_i \\leq 10^4$).\n\nFJ wants the protest to stay rational. He will partition all cows into several groups so that, in each group, the sum of sanity values is at least zero.\n\nBecause the cows stand on a line, cows in one group must occupy a contiguous segment. Please compute how many grouping schemes satisfy the condition.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain one integer; the $i$-th line gives $a_i$, the sanity value of the $i$-th cow.", "outputFormat": "Output the number of valid grouping schemes modulo $10^9 + 9$.", "hint": "For example, for the sequence $2, 3, -3, 1$, all valid grouping schemes are as follows:\n- $\\texttt{(2 3 -3 1)}$\n- $\\texttt{(2 3 -3) (1)}$\n- $\\texttt{(2) (3 -3 1)}$\n- $\\texttt{(2) (3 -3) (1)}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11FEB] Generic Cow Protests G", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一列，正在进行一场抗议活动。第 $i$ 头奶牛的理智度为 $a_i$（$-10^4 \\leq a_i \\leq 10^4$）。\n\nFJ 希望奶牛在抗议时保持理性，为此，他打算将所有的奶牛隔离成若干个小组，每个小组内的奶牛的理智度总和都要不小于零。\n\n由于奶牛是按直线排列的，所以一个小组内的奶牛位置必须是连续的。请帮助 FJ 计算一下，满足条件的分组方案有多少种。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 头奶牛的理智度 $a_i$。", "outputFormat": "输出满足条件的分组方案对 $10^9+9$ 取模的结果。", "hint": "所有合法分组方案如下：\n\n- $\\texttt{(2 3 -3 1)}$\n- $\\texttt{(2 3 -3) (1)}$\n- $\\texttt{(2) (3 -3 1)}$\n- $\\texttt{(2) (3 -3) (1)}$", "locale": "zh-CN"}}}
{"pid": "P2345", "type": "P", "difficulty": 3, "samples": [["4\n3 1\n2 5\n2 6\n4 3", "57"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2004", "USACO", "树状数组", "cdq 分治"], "title": "[USACO04OPEN] MooFest G", "background": "[P5094 [USACO04OPEN] MooFest G 加强版](https://www.luogu.com.cn/problem/P5094)\n", "description": "约翰的 $n$ 头奶牛每年都会参加“哞哞大会”。\n\n哞哞大会是奶牛界的盛事。集会上的活动很多，比如堆干草，跨栅栏，摸牛仔的屁股等等。\n\n它们参加活动时会聚在一起，第 $i$ 头奶牛的坐标为 $x_i$，没有两头奶牛的坐标是相同的。\n\n奶牛们的叫声很大，第 $i$ 头和第 $j$ 头奶牛交流，会发出\n$\\max\\{v_i,v_j\\}\\times |x_i − x_j |$ \n的音量，其中 $v_i$ 和 $v_j$ 分别是第 $i$ 头和第 $j$ 头奶牛的听力。\n\n假设每对奶牛之间同时都在说话，请计算所有奶牛产生的音量之和是多少。", "inputFormat": "第一行：单个整数 $n$，$1\\le n\\le2\\times 10^4$\n\n第二行到第 $n + 1$ 行：第 $i + 1$ 行有两个整数 $v_i$ 和 $x_i$（$1\\le v_i,x_i\\le2\\times 10^4$）。", "outputFormat": "单个整数：表示所有奶牛产生的音量之和", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04OPEN] MooFest G", "background": "[P5094 [USACO04OPEN] MooFest G Enhanced Edition](https://www.luogu.com.cn/problem/P5094)", "description": "John’s $n$ cows attend “MooFest” every year.\n\nMooFest is a grand event in the cow world. There are many activities at the gathering, such as stacking hay, jumping over fences, and patting cowboys on the butt.\n\nWhen they participate in activities, they gather together. The $i$-th cow is located at coordinate $x_i$, and no two cows share the same coordinate.\n\nThe cows are very loud. When the $i$-th and $j$-th cows communicate, they produce a volume of $\\max\\{v_i, v_j\\} \\times |x_i - x_j|$, where $v_i$ and $v_j$ are the hearing abilities of cows $i$ and $j$, respectively.\n\nAssume that every pair of cows is talking at the same time. Please compute the sum of the volume produced by all cows.", "inputFormat": "- The first line: a single integer $n$, $1 \\le n \\le 2 \\times 10^4$.\n- Lines $2$ to $n + 1$: the $(i + 1)$-th line contains two integers $v_i$ and $x_i$ ($1 \\le v_i, x_i \\le 2 \\times 10^4$).", "outputFormat": "A single integer: the total volume produced by all cows.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04OPEN] MooFest G", "background": "[P5094 [USACO04OPEN] MooFest G 加强版](https://www.luogu.com.cn/problem/P5094)\n", "description": "约翰的 $n$ 头奶牛每年都会参加“哞哞大会”。\n\n哞哞大会是奶牛界的盛事。集会上的活动很多，比如堆干草，跨栅栏，摸牛仔的屁股等等。\n\n它们参加活动时会聚在一起，第 $i$ 头奶牛的坐标为 $x_i$，没有两头奶牛的坐标是相同的。\n\n奶牛们的叫声很大，第 $i$ 头和第 $j$ 头奶牛交流，会发出\n$\\max\\{v_i,v_j\\}\\times |x_i − x_j |$ \n的音量，其中 $v_i$ 和 $v_j$ 分别是第 $i$ 头和第 $j$ 头奶牛的听力。\n\n假设每对奶牛之间同时都在说话，请计算所有奶牛产生的音量之和是多少。", "inputFormat": "第一行：单个整数 $n$，$1\\le n\\le2\\times 10^4$\n\n第二行到第 $n + 1$ 行：第 $i + 1$ 行有两个整数 $v_i$ 和 $x_i$（$1\\le v_i,x_i\\le2\\times 10^4$）。", "outputFormat": "单个整数：表示所有奶牛产生的音量之和", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2346", "type": "P", "difficulty": 4, "samples": [["BWBO\nWBWB\nBWBW\nWBWO", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "深度优先搜索 DFS", "启发式搜索", "迭代加深搜索", "启发式迭代加深搜索 IDA*"], "title": "四子连棋", "background": "本题输入数据中存在 `\\r\\n`，请使用 `cin` 或者 `scanf` 等方式输入。", "description": "在一个 $4\\times 4$ 的棋盘上摆放了 $14$ 颗棋子，其中有 $7$ 颗白色棋子，$7$ 颗黑色棋子，有两个空白地带，任何一颗黑白棋子都可以向上下左右四个方向移动到相邻的空格，这叫行棋一步，黑白双方交替走棋，任意一方可以先走，如果某个时刻使得任意一种颜色的棋子形成四个一线（包括斜线），这样的状态为目标棋局。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dagckxxz.png)", "inputFormat": "从文件中读入一个 $4\\times 4$ 的初始棋局，黑棋子用 `B` 表示，白棋子用 `W` 表示，空格地带用 `O` 表示。\n", "outputFormat": "用最少的步数移动到目标棋局的步数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Connect Four", "background": "The input testdata for this problem contains `\\r\\n`; please use `cin` or `scanf` for input.", "description": "On a $4\\times 4$ board there are $14$ pieces: $7$ white and $7$ black, with two empty cells. Any piece may move up, down, left, or right into an adjacent empty cell; this counts as one move. Black and white move alternately, and either side may move first. If at any time the pieces of either color form four in a line (including diagonals), that state is a target board position.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dagckxxz.png)", "inputFormat": "Read a $4\\times 4$ initial board from the file. Black pieces are denoted by `B`, white pieces by `W`, and empty cells by `O`.", "outputFormat": "Output the minimum number of moves required to reach a target board position.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "四子连棋", "background": "本题输入数据中存在 `\\r\\n`，请使用 `cin` 或者 `scanf` 等方式输入。", "description": "在一个 $4\\times 4$ 的棋盘上摆放了 $14$ 颗棋子，其中有 $7$ 颗白色棋子，$7$ 颗黑色棋子，有两个空白地带，任何一颗黑白棋子都可以向上下左右四个方向移动到相邻的空格，这叫行棋一步，黑白双方交替走棋，任意一方可以先走，如果某个时刻使得任意一种颜色的棋子形成四个一线（包括斜线），这样的状态为目标棋局。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dagckxxz.png)", "inputFormat": "从文件中读入一个 $4\\times 4$ 的初始棋局，黑棋子用 `B` 表示，白棋子用 `W` 表示，空格地带用 `O` 表示。\n", "outputFormat": "用最少的步数移动到目标棋局的步数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2347", "type": "P", "difficulty": 2, "samples": [["1 1 0 0 0 0", "Total=3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "NOIP 提高组", "枚举", "深度优先搜索 DFS", "1996", "bitset"], "title": "[NOIP 1996 提高组] 砝码称重", "background": "", "description": "设有 $1\\mathrm{g}$、$2\\mathrm{g}$、$3\\mathrm{g}$、$5\\mathrm{g}$、$10\\mathrm{g}$、$20\\mathrm{g}$ 的砝码各若干枚（其总重 $ \\le 1000$），可以表示成多少种重量？", "inputFormat": "输入方式：$a_1 , a_2  ,a_3 , a_4 , a_5 ,a_6$\n\n（表示 $1\\mathrm{g}$ 砝码有 $a_1$ 个，$2\\mathrm{g}$ 砝码有 $a_2$ 个，$\\dots$，$20\\mathrm{g}$ 砝码有 $a_6$ 个）\n", "outputFormat": "输出方式：`Total=N`\n\n（$N$ 表示用这些砝码能称出的不同重量的个数，但不包括一个砝码也不用的情况）\n", "hint": "**【题目来源】**\n\nNOIP 1996 提高组第四题", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1996 Senior] Weighing with Weights", "background": "", "description": "Given several weights of $1\\mathrm{g}$, $2\\mathrm{g}$, $3\\mathrm{g}$, $5\\mathrm{g}$, $10\\mathrm{g}$, and $20\\mathrm{g}$ (whose total weight is $\\le 1000$), how many distinct total weights can be measured?", "inputFormat": "Input: $a_1, a_2, a_3, a_4, a_5, a_6$.\n\n(This means there are $a_1$ weights of $1\\mathrm{g}$, $a_2$ weights of $2\\mathrm{g}$, $\\dots$, and $a_6$ weights of $20\\mathrm{g}$.)", "outputFormat": "Output: `Total=N`.\n\n($N$ is the number of distinct total weights that can be measured using these weights, excluding the case where no weight is used.)", "hint": "Source: NOIP 1996 Senior Problem 4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1996 提高组] 砝码称重", "background": "", "description": "设有 $1\\mathrm{g}$、$2\\mathrm{g}$、$3\\mathrm{g}$、$5\\mathrm{g}$、$10\\mathrm{g}$、$20\\mathrm{g}$ 的砝码各若干枚（其总重 $ \\le 1000$），可以表示成多少种重量？", "inputFormat": "输入方式：$a_1 , a_2  ,a_3 , a_4 , a_5 ,a_6$\n\n（表示 $1\\mathrm{g}$ 砝码有 $a_1$ 个，$2\\mathrm{g}$ 砝码有 $a_2$ 个，$\\dots$，$20\\mathrm{g}$ 砝码有 $a_6$ 个）\n", "outputFormat": "输出方式：`Total=N`\n\n（$N$ 表示用这些砝码能称出的不同重量的个数，但不包括一个砝码也不用的情况）\n", "hint": "**【题目来源】**\n\nNOIP 1996 提高组第四题", "locale": "zh-CN"}}}
{"pid": "P2348", "type": "P", "difficulty": 3, "samples": [["2 10 1 1\r\nC2 K\r\nH5 B\r\nDT K\r\nSA M\r\nHQ P\r\nD4 K\r\nC6 P\r\nH9 M\r\nST B\r\nSK C\r\n", "D4 K\r\nC6 P\r\nH9 M\r\nST B\r\n"], ["2 7 1 1\r\nC2 K\r\nH5 B\r\nDT K\r\nSA M\r\nHQ P\r\nSK C\r\nC6 P\r\n", "Error:cards not enough\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "三国杀I（洗牌&发牌）", "background": "", "description": "一场三国杀一共有 $n$ 个玩家，每人需要 $4$ 张牌。牌库共 $k$ 张牌，需洗牌后再发。每张牌有以下 $3$ 个属性：\n\n一、牌的类型:\n\n1. 基础：杀（$\\texttt{K}$）、闪（$\\texttt{M}$）、桃（$\\texttt{P}$）、酒（$\\texttt{W}$）。\n\n2. 非延时锦囊：决斗（$\\texttt{B}$）、万箭（$\\texttt{A}$）、南蛮（$\\texttt{S}$）、五谷（$\\texttt{C}$）、桃园（$\\texttt{G}$）、拆（$\\texttt{D}$）、顺（$\\texttt{U}$）、铁索（$\\texttt{T}$）、无懈（$\\texttt{N}$）、火攻（$\\texttt{F}$）、无中（$\\texttt{E}$）。\n\n3. 延时锦囊：兵（$\\texttt{I}$）、乐（$\\texttt{K}$）、闪电（$\\texttt{L}$）。\n\n4. 马（$\\texttt{+,-}$）\n\n5. 武器：连弩（$\\texttt{LN}$）、青釭（$\\texttt{QG}$）、古锭（$\\texttt{GD}$）、寒冰（$\\texttt{HB}$）、雌雄（$\\texttt{CX}$）、吴六（$\\texttt{WL}$）、青龙（$\\texttt{QL}$）、丈八（$\\texttt{ZB}$）、贯石（$\\texttt{GS}$）、方天（$\\texttt{FT}$）、羽扇（$\\texttt{YS}$）、麒麟（$\\texttt{LG}$）。\n\n6. 防具：仁王（$\\texttt{RW}$）、八阵（$\\texttt{BZ}$）、藤甲（$\\texttt{TJ}$）、狮子（$\\texttt{SZ}$）\n\n二、花色：只有可能是 $\\texttt{C,H,S,D}$ 中的一个。\n\n三、点数：只有可能是 $\\texttt{A,2,3,4,5,6,7,8,9,T,J,Q,K}$（T代表10，从小到大）中的一个。\n\n洗牌方式的介绍：一次洗牌过后，从上到下依次是：$\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1,1,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+2,2,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+3,3, ... ,k,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor$（可以有奇数张牌，最后一张牌直接忽略掉）。\n\n发牌方式的介绍：从第 $1$ 张牌开始，从上到下依次将第 $i$ 张牌给第 $[(i-1)\\mod n+1]$ 号玩家。\n\n已知一共洗了 $m$ 次牌，现在问你第 $p$ 位玩家发到的 $4$ 张牌有哪些。\n\n\n\n", "inputFormat": "输入一共 $k+1$ 行。\n\n第一行 $4$ 个正整数 $n,k,m,p$。  \n随后 $k$ 行，每行两个字符串，其中第一个字符串第一个字符表示花色，第二个字符表示点数，第二个字符串表示牌的类型。输出玩家拥有的牌的时候亦按照此格式输出。\n\n$n,k,m,p$ 的含义见题意所述。", "outputFormat": "输出共 $4$ 行，每行一个字符串，表示第 $p$ 位玩家拥有的 $4$ 张牌（输出应包括每张牌的**花色、点数和类型**，格式同输入）。\n\n如果牌数不够，输出 `Error:cards not enough`。", "hint": "\n对于 $100\\%$ 的数据，满足 $1\\leqslant p\\leqslant n\\leqslant 1000,1\\leqslant k\\leqslant 100000,1\\leqslant m\\leqslant 80$。", "locale": "zh-CN", "translations": {"en": {"title": "Sanguosha I (Shuffling & Dealing)", "background": "", "description": "A game of Sanguosha has $n$ players, and each player needs $4$ cards. The deck has $k$ cards, which must be shuffled before dealing. Each card has the following $3$ attributes:\n\n1. Card type:\n   1) Basic: Sha ($\\texttt{K}$), Shan ($\\texttt{M}$), Tao ($\\texttt{P}$), Jiu ($\\texttt{W}$).\n   2) Non-delayed tactic: Juedou ($\\texttt{B}$), Wanjian ($\\texttt{A}$), Nanman ($\\texttt{S}$), Wugu ($\\texttt{C}$), Taoyuan ($\\texttt{G}$), Chai ($\\texttt{D}$), Shun ($\\texttt{U}$), Tiesuo ($\\texttt{T}$), Wuxie ($\\texttt{N}$), Huogong ($\\texttt{F}$), Wuzhong ($\\texttt{E}$).\n   3) Delayed tactic: Bing ($\\texttt{I}$), Le ($\\texttt{K}$), Shandian ($\\texttt{L}$).\n   4) Mounts ($\\texttt{+,-}$).\n   5) Weapon: Liannu ($\\texttt{LN}$), Qinggang ($\\texttt{QG}$), Guding ($\\texttt{GD}$), Hanbing ($\\texttt{HB}$), Cixiong ($\\texttt{CX}$), Wuliu ($\\texttt{WL}$), Qinglong ($\\texttt{QL}$), Zhangba ($\\texttt{ZB}$), Guanshi ($\\texttt{GS}$), Fangtian ($\\texttt{FT}$), Yushan ($\\texttt{YS}$), Qilin ($\\texttt{LG}$).\n   6) Armor: Renwang ($\\texttt{RW}$), Bazhen ($\\texttt{BZ}$), Tengjia ($\\texttt{TJ}$), Shizi ($\\texttt{SZ}$).\n\n2. Suit: one of $\\texttt{C,H,S,D}$.\n\n3. Rank: one of $\\texttt{A,2,3,4,5,6,7,8,9,T,J,Q,K}$ (T stands for 10, in ascending order).\n\nShuffling method: After one shuffle, from top to bottom the order becomes\n$\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1, 1, \\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+2, 2, \\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+3, 3, \\ldots, k, \\left\\lfloor\\dfrac{k}{2}\\right\\rfloor$\n(if there is an odd number of cards, the last extra card is simply ignored).\n\nDealing method: Starting from the $1$-st card, from top to bottom give the $i$-th card to player $[(i-1)\\mod n+1]$.\n\nGiven that the deck is shuffled $m$ times in total, determine which $4$ cards are dealt to player $p$.", "inputFormat": "The input has $k+1$ lines.\n\nThe first line contains $4$ positive integers $n, k, m, p$.  \nThen follow $k$ lines, each with two strings. In the first string, the first character is the suit and the second character is the rank; the second string is the card type. When outputting the player’s cards, use the same format.\n\nThe meanings of $n, k, m, p$ are as described above.", "outputFormat": "Output $4$ lines, each with one string, representing the $4$ cards owned by player $p$ (each line must include the card’s suit, rank, and type, in the same format as the input).\n\nIf there are not enough cards, output `Error:cards not enough`.", "hint": "Constraints: For $100\\%$ of the testdata, $1\\leqslant p\\leqslant n\\leqslant 1000, 1\\leqslant k\\leqslant 100000, 1\\leqslant m\\leqslant 80$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三国杀I（洗牌&发牌）", "background": "", "description": "一场三国杀一共有 $n$ 个玩家，每人需要 $4$ 张牌。牌库共 $k$ 张牌，需洗牌后再发。每张牌有以下 $3$ 个属性：\n\n一、牌的类型:\n\n1. 基础：杀（$\\texttt{K}$）、闪（$\\texttt{M}$）、桃（$\\texttt{P}$）、酒（$\\texttt{W}$）。\n\n2. 非延时锦囊：决斗（$\\texttt{B}$）、万箭（$\\texttt{A}$）、南蛮（$\\texttt{S}$）、五谷（$\\texttt{C}$）、桃园（$\\texttt{G}$）、拆（$\\texttt{D}$）、顺（$\\texttt{U}$）、铁索（$\\texttt{T}$）、无懈（$\\texttt{N}$）、火攻（$\\texttt{F}$）、无中（$\\texttt{E}$）。\n\n3. 延时锦囊：兵（$\\texttt{I}$）、乐（$\\texttt{K}$）、闪电（$\\texttt{L}$）。\n\n4. 马（$\\texttt{+,-}$）\n\n5. 武器：连弩（$\\texttt{LN}$）、青釭（$\\texttt{QG}$）、古锭（$\\texttt{GD}$）、寒冰（$\\texttt{HB}$）、雌雄（$\\texttt{CX}$）、吴六（$\\texttt{WL}$）、青龙（$\\texttt{QL}$）、丈八（$\\texttt{ZB}$）、贯石（$\\texttt{GS}$）、方天（$\\texttt{FT}$）、羽扇（$\\texttt{YS}$）、麒麟（$\\texttt{LG}$）。\n\n6. 防具：仁王（$\\texttt{RW}$）、八阵（$\\texttt{BZ}$）、藤甲（$\\texttt{TJ}$）、狮子（$\\texttt{SZ}$）\n\n二、花色：只有可能是 $\\texttt{C,H,S,D}$ 中的一个。\n\n三、点数：只有可能是 $\\texttt{A,2,3,4,5,6,7,8,9,T,J,Q,K}$（T代表10，从小到大）中的一个。\n\n洗牌方式的介绍：一次洗牌过后，从上到下依次是：$\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1,1,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+2,2,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+3,3, ... ,k,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor$（可以有奇数张牌，最后一张牌直接忽略掉）。\n\n发牌方式的介绍：从第 $1$ 张牌开始，从上到下依次将第 $i$ 张牌给第 $[(i-1)\\mod n+1]$ 号玩家。\n\n已知一共洗了 $m$ 次牌，现在问你第 $p$ 位玩家发到的 $4$ 张牌有哪些。\n\n\n\n", "inputFormat": "输入一共 $k+1$ 行。\n\n第一行 $4$ 个正整数 $n,k,m,p$。  \n随后 $k$ 行，每行两个字符串，其中第一个字符串第一个字符表示花色，第二个字符表示点数，第二个字符串表示牌的类型。输出玩家拥有的牌的时候亦按照此格式输出。\n\n$n,k,m,p$ 的含义见题意所述。", "outputFormat": "输出共 $4$ 行，每行一个字符串，表示第 $p$ 位玩家拥有的 $4$ 张牌（输出应包括每张牌的**花色、点数和类型**，格式同输入）。\n\n如果牌数不够，输出 `Error:cards not enough`。", "hint": "\n对于 $100\\%$ 的数据，满足 $1\\leqslant p\\leqslant n\\leqslant 1000,1\\leqslant k\\leqslant 100000,1\\leqslant m\\leqslant 80$。", "locale": "zh-CN"}}}
{"pid": "P2349", "type": "P", "difficulty": 4, "samples": [["7 8\n1 2 10\n2 3 12\n3 4 20\n4 7 8\n1 7 34\n2 5 10\n5 6 12\n6 4 13", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "O2优化", "最短路"], "title": "金字塔", "background": null, "description": "有一盗墓者潜入一金字塔盗宝。当她（难道是 Lara Croft ?）打开一个宝箱的时候，突然冒出一阵烟（潘多拉的盒子？），她迅速意识到形势不妙，三十六计走为上计……由于她盗得了金字塔的地图，所以她希望能找出最佳逃跑路线。地图上标有 $N$ 个室，她现在就在 $1$ 室，金字塔的出口在 $N$ 室。她知道一个秘密：那阵烟会让她在直接连接某两个室之间的通道内的行走速度减半。她希望找出一条逃跑路线，使得在最坏的情况下所用的时间最少。", "inputFormat": "输入文件的第一行有两个正整数 $N$（$3 \\le N \\le 100$）和 $M$（$3 \\le M \\le 2000$）；下面有 $M$ 行，每行有三个数正整数 $U$ 、 $V$ 、 $W$，表示直接从 $U$ 室跑到 $V$ 室（$V$ 室跑到 $U$ 室）需要 $W$（$3 \\le W \\le 255$）秒。", "outputFormat": "输出所求的最少时间（单位为秒）。", "hint": "样例解释 Sample Explain：\n\n基本上有三种路线：\n\n（1）$1 \\to 2 \\to 3 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $12$ ＋ $20$ ＋ $8$ ＝ $50$，最坏的情况是“ $3 \\to 4$ ”那一段，要多花 $20$ 秒（因为行走速度减半），所以这条路选最坏需要 $70$ 秒；\n\n（2）$1 \\to 2 \\to 5 \\to 6 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $10$ ＋ $12$ ＋ $13$ ＋ $8$ ＝ $53$，最坏的情况是“ $6 \\to 4$ ”那一段，要多花 $13$ 秒，所以这条路选最坏需要 $66$ 秒；\n\n（3）$1 \\to 7$。\n\n总时间为：$34$ ＝ $34$，最坏的情况是“ $1 \\to 7$ ”那一段，要多花 $34$ 秒，所以这条路选最坏需要 $68$ 秒。", "locale": "zh-CN", "translations": {"en": {"title": "Pyramid", "background": "", "description": "A tomb raider sneaks into a pyramid to steal treasure. When she (could it be Lara Croft?) opens a treasure chest, a sudden puff of smoke appears (Pandora's box?). She quickly realizes the danger and decides to flee. Since she has the pyramid’s map, she hopes to find the best escape route. The map shows $N$ rooms. She is currently in room $1$, and the exit is in room $N$. She knows a secret: the smoke will halve her running speed in the corridor that directly connects some pair of rooms. She wants to find an escape route that minimizes the time used in the worst case.", "inputFormat": "The first line contains two positive integers $N$ ($3 \\le N \\le 100$) and $M$ ($3 \\le M \\le 2000$).  \nEach of the following $M$ lines contains three positive integers $U$, $V$, and $W$, indicating that running directly between room $U$ and room $V$ takes $W$ seconds ($3 \\le W \\le 255$).", "outputFormat": "Output the minimal possible time, in seconds.", "hint": "Sample Explanation:\n\nThere are essentially three routes:\n\n(1) $1 \\to 2 \\to 3 \\to 4 \\to 7$.  \nTotal time: $10 + 12 + 20 + 8 = 50$. In the worst case, the segment $3 \\to 4$ takes twice as long, costing an extra $20$ seconds, so this route takes $70$ seconds in the worst case.\n\n(2) $1 \\to 2 \\to 5 \\to 6 \\to 4 \\to 7$.  \nTotal time: $10 + 10 + 12 + 13 + 8 = 53$. In the worst case, the segment $6 \\to 4$ takes twice as long, costing an extra $13$ seconds, so this route takes $66$ seconds in the worst case.\n\n(3) $1 \\to 7$.  \nTotal time: $34 = 34$. In the worst case, the segment $1 \\to 7$ takes twice as long, costing an extra $34$ seconds, so this route takes $68$ seconds in the worst case.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "金字塔", "background": null, "description": "有一盗墓者潜入一金字塔盗宝。当她（难道是 Lara Croft ?）打开一个宝箱的时候，突然冒出一阵烟（潘多拉的盒子？），她迅速意识到形势不妙，三十六计走为上计……由于她盗得了金字塔的地图，所以她希望能找出最佳逃跑路线。地图上标有 $N$ 个室，她现在就在 $1$ 室，金字塔的出口在 $N$ 室。她知道一个秘密：那阵烟会让她在直接连接某两个室之间的通道内的行走速度减半。她希望找出一条逃跑路线，使得在最坏的情况下所用的时间最少。", "inputFormat": "输入文件的第一行有两个正整数 $N$（$3 \\le N \\le 100$）和 $M$（$3 \\le M \\le 2000$）；下面有 $M$ 行，每行有三个数正整数 $U$ 、 $V$ 、 $W$，表示直接从 $U$ 室跑到 $V$ 室（$V$ 室跑到 $U$ 室）需要 $W$（$3 \\le W \\le 255$）秒。", "outputFormat": "输出所求的最少时间（单位为秒）。", "hint": "样例解释 Sample Explain：\n\n基本上有三种路线：\n\n（1）$1 \\to 2 \\to 3 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $12$ ＋ $20$ ＋ $8$ ＝ $50$，最坏的情况是“ $3 \\to 4$ ”那一段，要多花 $20$ 秒（因为行走速度减半），所以这条路选最坏需要 $70$ 秒；\n\n（2）$1 \\to 2 \\to 5 \\to 6 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $10$ ＋ $12$ ＋ $13$ ＋ $8$ ＝ $53$，最坏的情况是“ $6 \\to 4$ ”那一段，要多花 $13$ 秒，所以这条路选最坏需要 $66$ 秒；\n\n（3）$1 \\to 7$。\n\n总时间为：$34$ ＝ $34$，最坏的情况是“ $1 \\to 7$ ”那一段，要多花 $34$ 秒，所以这条路选最坏需要 $68$ 秒。", "locale": "zh-CN"}}}
{"pid": "P2350", "type": "P", "difficulty": 6, "samples": [["1\n2\n2 2\n3 1\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "河南", "各省省选", "欧拉函数"], "title": "[HAOI2012] 外星人", "background": "", "description": "艾莉欧在她的被子上发现了一个数字 $N$，她觉得只要找出最小的 $x$ 使得，$\\varphi^x(N) = 1$。根据这个 $x$ 她就能找到曾经绑架她的外星人的线索了。当然，她是不会去算，请你帮助她算出最小的 $x$。\n\n$\\varphi^x(N)$ 表示嵌套 $x$ 次，不是幂。", "inputFormat": "第一行一个正整数 $\\mathrm{test}$，接下来 $\\mathrm{test}$ 组数据每组数据第一行一个正整数 $m$，接下来 $m$ 行每行两个正整数 $p_i, q_i$。\n\n其中 $\\displaystyle \\prod_{i = 1}^{m} p_i^{q_i}$ 为 $N$ 的标准分解形式，$\\prod$ 为连乘。", "outputFormat": "输出 $\\mathrm{test}$ 行，每行一个整数，表示答案。", "hint": "$\\varphi$ 为欧拉函数，$\\varphi(n)$ 即小于等于 $n$ 的数中与 $n$ 互质的数的个数。提示：$\\varphi(\\prod_{i=1}^mp_i^{q_i})=\\prod_{i=1}^m(p_i-1)\\times p_i^{q_i-1}$。\n\n#### 数据范围\n$30\\%$ 的数据，$N \\le 10^6$。\n\n$60\\%$ 的数据，$x \\le 100$。\n\n$100\\%$ 的数据，$\\mathrm{test} \\le 50$，$1 \\le p_i \\le {10}^5$，$1 \\le q_i \\le {10}^9$，$m \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Alien", "background": "", "description": "Elio found a number $N$ on her quilt. She wants to find the smallest $x$ such that $\\varphi^x(N) = 1$. Based on this $x$, she can find clues about the aliens who once abducted her. Of course, she will not do the computation herself; please help her compute the minimal $x$.\n\n$\\varphi^x(N)$ denotes iterating $\\varphi$ $x$ times, not an exponent.", "inputFormat": "The first line contains a positive integer $\\mathrm{test}$. Then for each of the $\\mathrm{test}$ test cases, the first line contains a positive integer $m$, followed by $m$ lines, each containing two positive integers $p_i, q_i$.\n\nHere $\\displaystyle \\prod_{i = 1}^{m} p_i^{q_i}$ is the standard factorization form of $N$, and $\\prod$ denotes a product.", "outputFormat": "Output $\\mathrm{test}$ lines, each containing one integer, the answer.", "hint": "$\\varphi$ is Euler's totient function. $\\varphi(n)$ is the number of integers not exceeding $n$ that are coprime to $n$. Hint: $\\varphi(\\prod_{i=1}^mp_i^{q_i})=\\prod_{i=1}^m(p_i-1)\\times p_i^{q_i-1}$.\n\nConstraints\n- For 30% of the testdata, $N \\le 10^6$.\n- For 60% of the testdata, $x \\le 100$.\n- For 100% of the testdata, $\\mathrm{test} \\le 50$, $1 \\le p_i \\le {10}^5$, $1 \\le q_i \\le {10}^9$, $m \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 外星人", "background": "", "description": "艾莉欧在她的被子上发现了一个数字 $N$，她觉得只要找出最小的 $x$ 使得，$\\varphi^x(N) = 1$。根据这个 $x$ 她就能找到曾经绑架她的外星人的线索了。当然，她是不会去算，请你帮助她算出最小的 $x$。\n\n$\\varphi^x(N)$ 表示嵌套 $x$ 次，不是幂。", "inputFormat": "第一行一个正整数 $\\mathrm{test}$，接下来 $\\mathrm{test}$ 组数据每组数据第一行一个正整数 $m$，接下来 $m$ 行每行两个正整数 $p_i, q_i$。\n\n其中 $\\displaystyle \\prod_{i = 1}^{m} p_i^{q_i}$ 为 $N$ 的标准分解形式，$\\prod$ 为连乘。", "outputFormat": "输出 $\\mathrm{test}$ 行，每行一个整数，表示答案。", "hint": "$\\varphi$ 为欧拉函数，$\\varphi(n)$ 即小于等于 $n$ 的数中与 $n$ 互质的数的个数。提示：$\\varphi(\\prod_{i=1}^mp_i^{q_i})=\\prod_{i=1}^m(p_i-1)\\times p_i^{q_i-1}$。\n\n#### 数据范围\n$30\\%$ 的数据，$N \\le 10^6$。\n\n$60\\%$ 的数据，$x \\le 100$。\n\n$100\\%$ 的数据，$\\mathrm{test} \\le 50$，$1 \\le p_i \\le {10}^5$，$1 \\le q_i \\le {10}^9$，$m \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P2351", "type": "P", "difficulty": 6, "samples": [["6\n1,2,3,4,5", "Case #1:\n1\n2\n3\n6\nCase #2:\n1\n2\n6\nCase #3:\n1\n3\n6\nCase #4:\n1\n3\n6\nCase #5:\n1\n3\n6\nCase #6:\n1\n2\n6\nCase #7:\n1\n2\n3\n6\nCase #8:\n1\n6\nCase #9:\n1\n2\n6\nCase #10:\n1\n3\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "各省省选", "山东", "Ad-hoc"], "title": "[SDOI2012] 吊灯", "background": "山东省省队选拔赛第二试（第一天）\n", "description": "Alice 家里有一盏很大的吊灯。所谓吊灯，就是由很多个灯泡组成。只有一个灯泡是挂在天花板上的，剩下的灯泡都是挂在其他的灯泡上的。也就是说，整个吊灯实际上类似于**一棵树**。其中编号为 $1$ 的灯泡是挂在天花板上的，剩下的灯泡都是挂在编号小于自己的灯泡上的。\n\n现在，Alice 想要办一场派对，她想改造一下这盏吊灯，将灯泡换成不同的颜色。她希望相同颜色的灯泡都是相连的，并且每一种颜色的灯泡个数都是相同的。\n\nAlice 希望你能告诉她，总共有哪些方案。\n\nAlice 是一个贪心的孩子，如果她发现方案不够多，或者太多了，就会很不高兴，于是她会尝试调整。对于编号为 $x$（$x\\neq 1$）的灯泡，如果原来是挂在编号为 $f_x$ 的灯泡上，那么 Alice 会把第 $x$ 个灯泡挂到第 $(f_x + 19940105)\\bmod (x-1) + 1$ 个灯泡上。\n\n由于九在古汉语中表示极大的数，于是，Alice 决定只调整 $9$ 次。对于原始状态和每一次调整过的状态，Alice 希望你依次告诉她每种状态下有哪些方案。\n", "inputFormat": "第一行一个整数 $n$，表示灯泡的数量。\n\n接下来一行，有 $n-1$ 个整数 $U_i$，第 $i$ 个数表示第 $i+1$ 个灯泡挂在了第 $U_i$ 个的下面。保证编号为 $1$ 的灯泡是挂在天花板上的。数字之间用逗号（西文标点）`,` 隔开且最后一个数字后面没有逗号。\n", "outputFormat": "对于 $10$ 种状态下的方案，需要按照顺序依次输出。\n\n对于每一种状态，需要先输出单独的一行，表示状态编号，如样例所示。\n\n之后若干行，每行 $1$ 个整数，表示划分方案中每种颜色的灯泡个数。\n\n按升序输出。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 3\\times 10^3$。\n\n对于 $40\\%$ 的数据，$n\\leq 5\\times 10^4$。\n\n对于 $50\\%$ 的数据，$n\\leq 10^5$。\n\n对于 $60\\%$ 的数据，$n\\leq 3\\times 10^5$。\n\n对于 $70\\%$ 的数据，$n\\leq 7\\times 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 1.2\\times 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Chandelier", "background": "Shandong Provincial Team Selection, Second Test (Day 1).", "description": "", "inputFormat": "", "outputFormat": "For the plans of the $10$ states, output them in order.\n\nFor each state, first output a separate line indicating the state index, as shown in the sample.\n\nThen output several lines, each containing $1$ integer, representing the number of bulbs per color in a valid partition.\n\nOutput in ascending order.", "hint": "For $20\\%$ of the testdata, $n \\leq 3 \\times 10^3$.\n\nFor $40\\%$ of the testdata, $n \\leq 5 \\times 10^4$.\n\nFor $50\\%$ of the testdata, $n \\leq 10^5$.\n\nFor $60\\%$ of the testdata, $n \\leq 3 \\times 10^5$.\n\nFor $70\\%$ of the testdata, $n \\leq 7 \\times 10^5$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 1.2 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 吊灯", "background": "山东省省队选拔赛第二试（第一天）\n", "description": "Alice 家里有一盏很大的吊灯。所谓吊灯，就是由很多个灯泡组成。只有一个灯泡是挂在天花板上的，剩下的灯泡都是挂在其他的灯泡上的。也就是说，整个吊灯实际上类似于**一棵树**。其中编号为 $1$ 的灯泡是挂在天花板上的，剩下的灯泡都是挂在编号小于自己的灯泡上的。\n\n现在，Alice 想要办一场派对，她想改造一下这盏吊灯，将灯泡换成不同的颜色。她希望相同颜色的灯泡都是相连的，并且每一种颜色的灯泡个数都是相同的。\n\nAlice 希望你能告诉她，总共有哪些方案。\n\nAlice 是一个贪心的孩子，如果她发现方案不够多，或者太多了，就会很不高兴，于是她会尝试调整。对于编号为 $x$（$x\\neq 1$）的灯泡，如果原来是挂在编号为 $f_x$ 的灯泡上，那么 Alice 会把第 $x$ 个灯泡挂到第 $(f_x + 19940105)\\bmod (x-1) + 1$ 个灯泡上。\n\n由于九在古汉语中表示极大的数，于是，Alice 决定只调整 $9$ 次。对于原始状态和每一次调整过的状态，Alice 希望你依次告诉她每种状态下有哪些方案。\n", "inputFormat": "第一行一个整数 $n$，表示灯泡的数量。\n\n接下来一行，有 $n-1$ 个整数 $U_i$，第 $i$ 个数表示第 $i+1$ 个灯泡挂在了第 $U_i$ 个的下面。保证编号为 $1$ 的灯泡是挂在天花板上的。数字之间用逗号（西文标点）`,` 隔开且最后一个数字后面没有逗号。\n", "outputFormat": "对于 $10$ 种状态下的方案，需要按照顺序依次输出。\n\n对于每一种状态，需要先输出单独的一行，表示状态编号，如样例所示。\n\n之后若干行，每行 $1$ 个整数，表示划分方案中每种颜色的灯泡个数。\n\n按升序输出。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 3\\times 10^3$。\n\n对于 $40\\%$ 的数据，$n\\leq 5\\times 10^4$。\n\n对于 $50\\%$ 的数据，$n\\leq 10^5$。\n\n对于 $60\\%$ 的数据，$n\\leq 3\\times 10^5$。\n\n对于 $70\\%$ 的数据，$n\\leq 7\\times 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 1.2\\times 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P2352", "type": "P", "difficulty": 4, "samples": [["4\n1 3\n2 4\n3 5\n4 7", "12\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "队爷的新书", "background": "", "description": "队爷即将出版新书，以记录他辉煌的虐题生涯。。。\n\n有 $n$ 家出版社对这本书表示了兴趣，并愿意给队爷支付 $p \\in [Min_{pay},Max_{pay}]$ 的报酬来得到这本书的出版权，每家出版社的 $Min_{pay}$ 和 $Max_{pay}$ 是不一样的。\n\n现在队爷希望你帮他找出一个报酬值 $p$，使得他获得的总报酬最多。（每一个 $Min_{pay} \\leq p \\leq Max_{pay}$ 的出版社都会付给队爷 $p$ 的报酬）。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行 $2$ 个整数 $Min_{payi}$ 和 $Max_{payi}$，为第 $i$ 家出版社愿支付的报酬范围。\n\n", "outputFormat": "只有一个整数 ans，为最大总报酬。\n", "hint": "【样例解释】\n\n当 $p = 4$ 时，有 $3$ 家出版社会给出报酬，此时最大。\n\n【数据规模与约定】\n\n对于 $20\\%$ 的数据，$1 \\leq Min_{pay},Max_{pay} \\leq 10000$；\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 1000,1 \\leq Min_{pay},Max_{pay} \\leq 10^6$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100000,1 \\leq Min_{pay},Max_{pay} \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Duiye's New Book", "background": "", "description": "Duiye is about to publish a new book to record his glorious problem-solving journey.\n\nThere are $n$ publishers interested in this book. Each is willing to pay a fee $p \\in [Min_{pay}, Max_{pay}]$ to obtain the publishing rights, where each publisher has its own $Min_{pay}$ and $Max_{pay}$.\n\nNow Duiye wants you to find a value $p$ that maximizes his total revenue. Every publisher with $Min_{pay} \\leq p \\leq Max_{pay}$ will pay $p$.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain two integers $Min_{payi}$ and $Max_{payi}$, which are the acceptable payment range of the $i$-th publisher.", "outputFormat": "Output a single integer ans, the maximum total payment.", "hint": "Sample Explanation:\n\nWhen $p = 4$, there are $3$ publishers who will pay, which is maximal.\n\nConstraints:\n\n- For $20\\%$ of the testdata, $1 \\leq Min_{pay}, Max_{pay} \\leq 10000$.\n- For $40\\%$ of the testdata, $1 \\leq n \\leq 1000, 1 \\leq Min_{pay}, Max_{pay} \\leq 10^6$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 100000, 1 \\leq Min_{pay}, Max_{pay} \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "队爷的新书", "background": "", "description": "队爷即将出版新书，以记录他辉煌的虐题生涯。。。\n\n有 $n$ 家出版社对这本书表示了兴趣，并愿意给队爷支付 $p \\in [Min_{pay},Max_{pay}]$ 的报酬来得到这本书的出版权，每家出版社的 $Min_{pay}$ 和 $Max_{pay}$ 是不一样的。\n\n现在队爷希望你帮他找出一个报酬值 $p$，使得他获得的总报酬最多。（每一个 $Min_{pay} \\leq p \\leq Max_{pay}$ 的出版社都会付给队爷 $p$ 的报酬）。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行 $2$ 个整数 $Min_{payi}$ 和 $Max_{payi}$，为第 $i$ 家出版社愿支付的报酬范围。\n\n", "outputFormat": "只有一个整数 ans，为最大总报酬。\n", "hint": "【样例解释】\n\n当 $p = 4$ 时，有 $3$ 家出版社会给出报酬，此时最大。\n\n【数据规模与约定】\n\n对于 $20\\%$ 的数据，$1 \\leq Min_{pay},Max_{pay} \\leq 10000$；\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 1000,1 \\leq Min_{pay},Max_{pay} \\leq 10^6$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100000,1 \\leq Min_{pay},Max_{pay} \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2353", "type": "P", "difficulty": 5, "samples": [["3 3\nabcabcbc\nabc\nbc\na\n1 3\n6 7\n1 8", "3\n0\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "哈希 hashing", "KMP 算法"], "title": "背单词", "background": "小明对英语一窍不通，令老师十分头疼。于是期末考试前夕，小明被逼着开始背单词……", "description": "老师给了小明一篇长度为 $N$ 的英语文章，然后让小明背 $M$ 个单词。为了确保小明不会在背单词时睡着，老师会向他提 $Q$ 个问题，每次老师随机选择一个区间 $[L,R]$，小明要回答在这段文字中他背过的单词总共出现过多少次。", "inputFormat": "第一行两个整数 $M,Q$ 如前所述。\n\n第二行为英语文章。\n\n接下来 $M$ 行每行一个需要背的单词。接下来Q行每行一个询问，包含两个整数 $L,R$（含端点），即给定的文字区间。", "outputFormat": "共 $Q$ 行，对每个询问输出一行表示答案。", "hint": "**【数据范围】**\n\n对于 $30\\%$ 的数据，$1 \\le N \\le 10^3$，$1 \\le Q \\le 10^3$。\n\n对于 $60\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^6$，$1 \\le M \\le 10$，$1 \\le Q \\le 10^6$，$1 \\le 每个单词的长度 \\le N$，$1 \\le L \\le R \\le N$。\n\n**【提示】**\n\n数据较大，请大家尽量采取高效率的读入输出方法。", "locale": "zh-CN", "translations": {"en": {"title": "Memorizing Words", "background": "Xiao Ming does not understand English at all, which gives his teacher a headache. So on the eve of the final exam, Xiao Ming is forced to start memorizing words.", "description": "The teacher gives Xiao Ming an English article of length $N$, and then asks him to memorize $M$ words. To make sure Xiao Ming does not fall asleep while memorizing, the teacher will ask $Q$ questions. Each time, the teacher randomly chooses an interval $[L,R]$, and Xiao Ming must answer how many times the words he has memorized occur in total within this segment of text.", "inputFormat": "The first line contains two integers $M,Q$ as described above.\nThe second line is the English article.\nThe next $M$ lines each contain one word to memorize. Then the next $Q$ lines each contain one query with two integers $L,R$ (inclusive), i.e., the given interval in the text.", "outputFormat": "Output $Q$ lines. For each query, output one line with the answer.", "hint": "Constraints\n\n- For 30% of the testdata, $1 \\le N \\le 10^3$, $1 \\le Q \\le 10^3$.\n- For 60% of the testdata, $1 \\le N \\le 10^5$, $1 \\le Q \\le 10^5$.\n- For 100% of the testdata, $1 \\le N \\le 10^6$, $1 \\le M \\le 10$, $1 \\le Q \\le 10^6$, the length of each word is between $1$ and $N$, and $1 \\le L \\le R \\le N$.\n\nHint\n\nThe testdata is large, so please use efficient input/output methods.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "背单词", "background": "小明对英语一窍不通，令老师十分头疼。于是期末考试前夕，小明被逼着开始背单词……", "description": "老师给了小明一篇长度为 $N$ 的英语文章，然后让小明背 $M$ 个单词。为了确保小明不会在背单词时睡着，老师会向他提 $Q$ 个问题，每次老师随机选择一个区间 $[L,R]$，小明要回答在这段文字中他背过的单词总共出现过多少次。", "inputFormat": "第一行两个整数 $M,Q$ 如前所述。\n\n第二行为英语文章。\n\n接下来 $M$ 行每行一个需要背的单词。接下来Q行每行一个询问，包含两个整数 $L,R$（含端点），即给定的文字区间。", "outputFormat": "共 $Q$ 行，对每个询问输出一行表示答案。", "hint": "**【数据范围】**\n\n对于 $30\\%$ 的数据，$1 \\le N \\le 10^3$，$1 \\le Q \\le 10^3$。\n\n对于 $60\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^6$，$1 \\le M \\le 10$，$1 \\le Q \\le 10^6$，$1 \\le 每个单词的长度 \\le N$，$1 \\le L \\le R \\le N$。\n\n**【提示】**\n\n数据较大，请大家尽量采取高效率的读入输出方法。", "locale": "zh-CN"}}}
