{"pid": "P1761", "type": "P", "difficulty": 5, "samples": [["4 \r\n3 5 1 4 \r\n3 \r\n2 1 2 \r\n0 ", "1 2 4 \r\n1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "正方形", "background": "", "description": "有 $n$ 个大小不一的正方形，现将它们依次以 $45$ 度斜放入第一象限，每个正方形都要与 $x$ 轴有一个交点，且不能与之前放入的正方形重叠。在此前提下，正方形与 $x$ 轴交点的坐标应尽可能小。问这样放置后，从上往下看，至少能部分被看见的正方形有哪些？", "inputFormat": "每个测试点包含多组测试数据。每个测试数据的第一行是一个整数 $n$，第二行是 $n$ 个正整数，表示每个正方形的边长。输入以一行单独的 $0$ 结束。", "outputFormat": "对于每个测试数据输出一行，增序输出至少可看到部分的正方形的编号，用空格隔开。\n", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/flwonnba.png)\n\n### 数据范围及约定\n\n- 对于 $50\\%$ 的数据，$n \\le 10$；\n- 对于 $100\\%$ 的数据，$n \\le 50$ 正方形的大小不超过 $30$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Square", "background": "", "description": "There are $n$ squares of different sizes. Place them one by one, each rotated by $45$ degrees, in the first quadrant. Each square must have exactly one intersection point with the $x$-axis and must not overlap any previously placed squares. Subject to these conditions, the coordinate of the square’s intersection with the $x$-axis should be as small as possible. After all placements, when viewed from above, which squares are at least partially visible?", "inputFormat": "The input contains multiple test cases. For each test case, the first line contains an integer $n$, and the second line contains $n$ positive integers representing the side lengths of the squares. The input ends with a line containing a single $0$.", "outputFormat": "For each test case, output one line containing the indices of the squares that are at least partially visible, in increasing order and separated by spaces.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/flwonnba.png)\n\n### Constraints\n\n- For $50\\%$ of the testdata, $n \\le 10$.\n- For $100\\%$ of the testdata, $n \\le 50$ and the sizes of the squares do not exceed $30$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "正方形", "background": "", "description": "有 $n$ 个大小不一的正方形，现将它们依次以 $45$ 度斜放入第一象限，每个正方形都要与 $x$ 轴有一个交点，且不能与之前放入的正方形重叠。在此前提下，正方形与 $x$ 轴交点的坐标应尽可能小。问这样放置后，从上往下看，至少能部分被看见的正方形有哪些？", "inputFormat": "每个测试点包含多组测试数据。每个测试数据的第一行是一个整数 $n$，第二行是 $n$ 个正整数，表示每个正方形的边长。输入以一行单独的 $0$ 结束。", "outputFormat": "对于每个测试数据输出一行，增序输出至少可看到部分的正方形的编号，用空格隔开。\n", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/flwonnba.png)\n\n### 数据范围及约定\n\n- 对于 $50\\%$ 的数据，$n \\le 10$；\n- 对于 $100\\%$ 的数据，$n \\le 50$ 正方形的大小不超过 $30$。\n", "locale": "zh-CN"}}}
{"pid": "P1762", "type": "P", "difficulty": 4, "samples": [["6\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递归"], "title": "偶数", "background": "", "description": "给定一个正整数 $n$，请输出杨辉三角形前 $n$ 行的偶数个数对 $1000003$ 取模后的结果。\n", "inputFormat": "一行一个正整数 $n$。\n", "outputFormat": "一行一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\le 4\\times 10^3$。\n\n对于 $70\\%$ 的数据，$n\\le 4\\times 10^9$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{15}$。\n\n杨辉三角形的前七行：\n\n```plain\n       1\n      1 1\n     1 2 1\n    1 3 3 1\n   1 4 6 4 1\n 1 5 10 10 5 1\n1 6 15 20 15 6 1\n```", "locale": "zh-CN", "translations": {"en": {"title": "Even Numbers", "background": "", "description": "Given a positive integer $n$, please output the number of even entries in the first $n$ rows of Pascal's triangle modulo $1000003$.", "inputFormat": "One line with a positive integer $n$.", "outputFormat": "One line with an integer denoting the answer.", "hint": "For $30\\%$ of the testdata, $n \\le 4 \\times 10^3$.\n\nFor $70\\%$ of the testdata, $n \\le 4 \\times 10^9$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^{15}$.\n\nThe first seven rows of Pascal's triangle:\n```plain\n       1\n      1 1\n     1 2 1\n    1 3 3 1\n   1 4 6 4 1\n 1 5 10 10 5 1\n1 6 15 20 15 6 1\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "偶数", "background": "", "description": "给定一个正整数 $n$，请输出杨辉三角形前 $n$ 行的偶数个数对 $1000003$ 取模后的结果。\n", "inputFormat": "一行一个正整数 $n$。\n", "outputFormat": "一行一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\le 4\\times 10^3$。\n\n对于 $70\\%$ 的数据，$n\\le 4\\times 10^9$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{15}$。\n\n杨辉三角形的前七行：\n\n```plain\n       1\n      1 1\n     1 2 1\n    1 3 3 1\n   1 4 6 4 1\n 1 5 10 10 5 1\n1 6 15 20 15 6 1\n```", "locale": "zh-CN"}}}
{"pid": "P1763", "type": "P", "difficulty": 6, "samples": [["19 45", "5 6 18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "数学", "1997", "Special Judge", "深度优先搜索 DFS", "剪枝", "迭代加深搜索"], "title": "埃及分数", "background": "", "description": "**来源：BIO 1997 Round 1 [Question 3](http://www.olympiad.org.uk/papers/1997/bio/bio97r1q3.html)**\n\n在古埃及，人们使用单位分数的和（形如 $\\dfrac{1}{a}$ 的，$a$ 是正整数）表示一切有理数。如：$\\dfrac{2}{3} = \\dfrac{1}{2} + \\dfrac{1}{6}$，但不允许 $\\dfrac{2}{3} = \\dfrac{1}{3} + \\dfrac{1}{3}$，因为加数中有相同的。对于一个分数 $\\dfrac{a}{b}$，表示方法有很多种，但是哪种最好呢？首先，加数少的比加数多的好，其次，加数个数相同的，最小的分数越大越好。如：\n$$\n\\begin{aligned}\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{12} + \\frac{1}{180}\\\\\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{15} + \\frac{1}{45}\\\\\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{18} + \\frac{1}{30}\\\\\n\\frac{19}{45} &= \\frac{1}{4} + \\frac{1}{6} + \\frac{1}{180}\\\\\n\\frac{19}{45} &= \\frac{1}{5} + \\frac{1}{6} + \\frac{1}{18}\\\\\n\\end{aligned}\n$$\n最好的是最后一种，因为 $\\dfrac{1}{18}$ 比 $\\dfrac{1}{180}, \\dfrac{1}{45}, \\dfrac{1}{30}$ 都大。  \n注意，可能有多个最优解。如：\n$$\n\\begin{aligned}\n\\frac{59}{211} &= \\frac{1}{4} + \\frac{1}{36} + \\frac{1}{633} + \\frac{1}{3798}\\\\\n\\frac{59}{211} &= \\frac{1}{6} + \\frac{1}{9} + \\frac{1}{633} + \\frac{1}{3798}\\\\\n\\end{aligned}\n$$\n由于方法一与方法二中，最小的分数相同，因此二者均是最优解。\n\n给出 $a,b$，编程计算最好的表达方式。保证最优解满足：最小的分数 $\\ge \\cfrac{1}{10^7}$。 \n", "inputFormat": "一行两个整数，分别为 $a$ 和 $b$ 的值。", "outputFormat": "输出若干个数，自小到大排列，依次是单位分数的分母。", "hint": "$1 \\lt a \\lt b \\lt 1000$", "locale": "zh-CN", "translations": {"en": {"title": "Egyptian Fractions", "background": "", "description": "Source: BIO 1997 Round 1 [Question 3](http://www.olympiad.org.uk/papers/1997/bio/bio97r1q3.html).\n\nIn ancient Egypt, people represented any rational number as a sum of unit fractions (fractions of the form $\\dfrac{1}{a}$, where $a$ is a positive integer). For example, $\\dfrac{2}{3} = \\dfrac{1}{2} + \\dfrac{1}{6}$, but $\\dfrac{2}{3} = \\dfrac{1}{3} + \\dfrac{1}{3}$ is not allowed because addends must be distinct. For a fraction $\\dfrac{a}{b}$ there are many representations, but which one is best? First, fewer terms are better than more terms. Second, among representations with the same number of terms, the larger the smallest unit fraction, the better. For example:\n$$\n\\begin{aligned}\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{12} + \\frac{1}{180}\\\\\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{15} + \\frac{1}{45}\\\\\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{18} + \\frac{1}{30}\\\\\n\\frac{19}{45} &= \\frac{1}{4} + \\frac{1}{6} + \\frac{1}{180}\\\\\n\\frac{19}{45} &= \\frac{1}{5} + \\frac{1}{6} + \\frac{1}{18}\\\\\n\\end{aligned}\n$$\nThe last one is the best because $\\dfrac{1}{18}$ is larger than $\\dfrac{1}{180}, \\dfrac{1}{45}, \\dfrac{1}{30}$.\n\nNote that there can be multiple optimal solutions. For example:\n$$\n\\begin{aligned}\n\\frac{59}{211} &= \\frac{1}{4} + \\frac{1}{36} + \\frac{1}{633} + \\frac{1}{3798}\\\\\n\\frac{59}{211} &= \\frac{1}{6} + \\frac{1}{9} + \\frac{1}{633} + \\frac{1}{3798}\\\\\n\\end{aligned}\n$$\nSince the smallest unit fraction is the same in method one and method two, both are optimal solutions.\n\nGiven $a, b$, write a program to compute the best representation. It is guaranteed that an optimal solution satisfies: the smallest unit fraction $\\ge \\cfrac{1}{10^7}$.", "inputFormat": "A single line with two integers, the values of $a$ and $b$.", "outputFormat": "Output several integers in increasing order, which are the denominators of the unit fractions, in order.", "hint": "$1 \\lt a \\lt b \\lt 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "埃及分数", "background": "", "description": "**来源：BIO 1997 Round 1 [Question 3](http://www.olympiad.org.uk/papers/1997/bio/bio97r1q3.html)**\n\n在古埃及，人们使用单位分数的和（形如 $\\dfrac{1}{a}$ 的，$a$ 是正整数）表示一切有理数。如：$\\dfrac{2}{3} = \\dfrac{1}{2} + \\dfrac{1}{6}$，但不允许 $\\dfrac{2}{3} = \\dfrac{1}{3} + \\dfrac{1}{3}$，因为加数中有相同的。对于一个分数 $\\dfrac{a}{b}$，表示方法有很多种，但是哪种最好呢？首先，加数少的比加数多的好，其次，加数个数相同的，最小的分数越大越好。如：\n$$\n\\begin{aligned}\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{12} + \\frac{1}{180}\\\\\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{15} + \\frac{1}{45}\\\\\n\\frac{19}{45} &= \\frac{1}{3} + \\frac{1}{18} + \\frac{1}{30}\\\\\n\\frac{19}{45} &= \\frac{1}{4} + \\frac{1}{6} + \\frac{1}{180}\\\\\n\\frac{19}{45} &= \\frac{1}{5} + \\frac{1}{6} + \\frac{1}{18}\\\\\n\\end{aligned}\n$$\n最好的是最后一种，因为 $\\dfrac{1}{18}$ 比 $\\dfrac{1}{180}, \\dfrac{1}{45}, \\dfrac{1}{30}$ 都大。  \n注意，可能有多个最优解。如：\n$$\n\\begin{aligned}\n\\frac{59}{211} &= \\frac{1}{4} + \\frac{1}{36} + \\frac{1}{633} + \\frac{1}{3798}\\\\\n\\frac{59}{211} &= \\frac{1}{6} + \\frac{1}{9} + \\frac{1}{633} + \\frac{1}{3798}\\\\\n\\end{aligned}\n$$\n由于方法一与方法二中，最小的分数相同，因此二者均是最优解。\n\n给出 $a,b$，编程计算最好的表达方式。保证最优解满足：最小的分数 $\\ge \\cfrac{1}{10^7}$。 \n", "inputFormat": "一行两个整数，分别为 $a$ 和 $b$ 的值。", "outputFormat": "输出若干个数，自小到大排列，依次是单位分数的分母。", "hint": "$1 \\lt a \\lt b \\lt 1000$", "locale": "zh-CN"}}}
{"pid": "P1764", "type": "P", "difficulty": 5, "samples": [["4\r\nbwwb\r\nbbwb\r\nbwwb\r\nbwww\r\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创"], "title": "翻转游戏 (加强版)", "background": "", "description": "kkke 在一个 $n\\ \\times n$ 的棋盘上进行一个翻转游戏。棋盘的每个格子上都放有一个棋子，每个棋子有 $2$ 个面，一面是黑色的，另一面是白色的。初始的时候，棋盘上的棋子有的黑色向上，有的白色向上。现在 kkke 想通过最少次数的翻转，使得棋盘上所有的棋子都是同一个颜色向上的（即全是黑色向上的，或全是白色向上的）。每次翻转的时候，kkke 可以选择任意一个棋子，将它翻转，同时，与它上下左右分别相邻的 $4$ 个棋子也必须同时翻转。", "inputFormat": "输入的第一行是一个整数 $n$，表示棋盘的大小是 $n\\times n$。\n\n接下来有 $n$ 行，每行包括 $n$ 个字母，表示初始的棋盘状态。如果字母是 $\\tt w$，则表示这个棋子当前是白色向上的，如果字母是 $\\tt b$，则表示这个棋子当前是黑色向上的。", "outputFormat": "输出为一行，如果无法翻转出目标状态，则输出`Impossible`，否则输出一个整数，表示 kkke 最少需要翻转的次数。\n", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 4$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 16$。", "locale": "zh-CN", "translations": {"en": {"title": "Flip Game (Enhanced Version)", "background": "", "description": "kkke is playing a flip game on an $n \\times n$ board. Each cell of the board contains a piece, and each piece has $2$ faces: one black and one white. Initially, some pieces face up black and others face up white. Now kkke wants to make all pieces face the same color (either all black up or all white up) with the minimum number of flips. Each time a flip is performed, kkke may choose any piece to flip; at the same time, the $4$ pieces that are respectively adjacent to it up, down, left, and right must also be flipped.", "inputFormat": "The first line contains an integer $n$, indicating the board size is $n \\times n$.\n\nThen follow $n$ lines, each containing $n$ letters, representing the initial state of the board. If a letter is $\\tt w$, the corresponding piece is currently white side up; if it is $\\tt b$, the piece is currently black side up.", "outputFormat": "Output one line. If it is impossible to reach the target state, output `Impossible`; otherwise, output a single integer, the minimum number of flips kkke needs.", "hint": "- Constraints\n  - For $30\\%$ of the testdata, $1 \\le n \\le 4$.\n  - For $100\\%$ of the testdata, $1 \\le n \\le 16$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "翻转游戏 (加强版)", "background": "", "description": "kkke 在一个 $n\\ \\times n$ 的棋盘上进行一个翻转游戏。棋盘的每个格子上都放有一个棋子，每个棋子有 $2$ 个面，一面是黑色的，另一面是白色的。初始的时候，棋盘上的棋子有的黑色向上，有的白色向上。现在 kkke 想通过最少次数的翻转，使得棋盘上所有的棋子都是同一个颜色向上的（即全是黑色向上的，或全是白色向上的）。每次翻转的时候，kkke 可以选择任意一个棋子，将它翻转，同时，与它上下左右分别相邻的 $4$ 个棋子也必须同时翻转。", "inputFormat": "输入的第一行是一个整数 $n$，表示棋盘的大小是 $n\\times n$。\n\n接下来有 $n$ 行，每行包括 $n$ 个字母，表示初始的棋盘状态。如果字母是 $\\tt w$，则表示这个棋子当前是白色向上的，如果字母是 $\\tt b$，则表示这个棋子当前是黑色向上的。", "outputFormat": "输出为一行，如果无法翻转出目标状态，则输出`Impossible`，否则输出一个整数，表示 kkke 最少需要翻转的次数。\n", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$1 \\le n \\le 4$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 16$。", "locale": "zh-CN"}}}
{"pid": "P1765", "type": "P", "difficulty": 1, "samples": [["i have a dream", "23"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "NOI 导刊", "枚举"], "title": "手机", "background": "", "description": "一般的手机的键盘是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yq2orii6.png)\n\n要按出英文字母就必须要按数字键多下。例如要按出 $\\tt x$ 就得按 $9$ 两下，第一下会出 $\\tt w$，而第二下会把 $\\tt w$ 变成 $\\tt x$。$0$ 键按一下会出一个空格。\n\n你的任务是读取若干句只包含英文小写字母和空格的句子，求出要在手机上打出这个句子至少需要按多少下键盘。\n", "inputFormat": "一行句子，只包含英文小写字母和空格，且不超过 200 个字符。\n", "outputFormat": "一行一个整数，表示按键盘的总次数。\n", "hint": "NOI 导刊 2010 普及（10）\n", "locale": "zh-CN", "translations": {"en": {"title": "Mobile Phone", "background": "", "description": "A typical mobile phone keypad looks like this:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yq2orii6.png)\n\nTo type an English letter, you need to press a number key multiple times. For example, to type $\\tt x$, you need to press $9$ twice: the first press outputs $\\tt w$, and the second turns $\\tt w$ into $\\tt x$. Pressing the $0$ key once outputs a space.\n\nYour task is to read a sentence that contains only lowercase English letters and spaces, and find the minimum number of key presses required to type this sentence on the phone.", "inputFormat": "One line containing a sentence that consists of lowercase English letters and spaces, with length at most 200 characters.", "outputFormat": "One line with one integer, the total number of key presses.", "hint": "NOI Bulletin 2010 Junior (10).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "手机", "background": "", "description": "一般的手机的键盘是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yq2orii6.png)\n\n要按出英文字母就必须要按数字键多下。例如要按出 $\\tt x$ 就得按 $9$ 两下，第一下会出 $\\tt w$，而第二下会把 $\\tt w$ 变成 $\\tt x$。$0$ 键按一下会出一个空格。\n\n你的任务是读取若干句只包含英文小写字母和空格的句子，求出要在手机上打出这个句子至少需要按多少下键盘。\n", "inputFormat": "一行句子，只包含英文小写字母和空格，且不超过 200 个字符。\n", "outputFormat": "一行一个整数，表示按键盘的总次数。\n", "hint": "NOI 导刊 2010 普及（10）\n", "locale": "zh-CN"}}}
{"pid": "P1766", "type": "P", "difficulty": 4, "samples": [["4 2\n1 4 3 2\n5 4 2 1\n-2 -1 0 -2\n-1 -3 4 -4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "枚举"], "title": "液体滴落", "background": "", "description": "在平面中有若干线段 $L_i$（**不一定互不相交**），组成一个又一个轨道，有一滴液体从上方滴落下来，如果碰到轨道就沿着轨道向下滚，从轨道较低的一端离开轨道，在轨道中不受任何影响，否则就垂直滴落，问最后液滴从什么位置落出整个系统。\n\n相信这个题目一定难不倒你。", "inputFormat": "第一行两个整数 $N$ 和 $S$，表示有 $N$ 条线段，液滴从横坐标为 $S$ 的地方落下。\n\n以下 $N$ 行，每行四个整数 $x_{i1}$，$y_{i1}$，$x_{i2}$，$y_{i2}$ 描述每条线段的端点位置。注意线段不包括两个端点，液体可以从一端点处滴下而不碰到斜面。", "outputFormat": "一行一个整数：表示最终液体落下的位置（横坐标）。", "hint": "对于 $50\\%$ 的数据，$1\\le n\\le100$，$|x|,|y|,|S| \\le500$；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$|x|,|y|,|S|≤10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gclp58tq.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "Liquid Droplet", "background": "", "description": "In the plane, there are several line segments $L_i$ (not necessarily pairwise disjoint) that form one track after another. A droplet of liquid falls from above. If it encounters a track, it slides downward along the track and leaves the track from its lower end; while on a track, it is not affected by anything else. Otherwise, it falls straight down vertically. Determine the position from which the droplet finally exits the entire system.\n\nI'm sure this problem won't stump you.", "inputFormat": "The first line contains two integers $N$ and $S$, indicating there are $N$ segments, and the droplet starts falling from the position with x-coordinate $S$.\n\nEach of the following $N$ lines contains four integers $x_{i1}$, $y_{i1}$, $x_{i2}$, $y_{i2}$ describing the endpoints of each segment. Note that each segment excludes its two endpoints; the liquid can pass through an endpoint without touching the segment.", "outputFormat": "Output a single integer on one line: the final x-coordinate where the droplet falls out.", "hint": "For $50\\%$ of the testdata, $1\\le N\\le 100$, $|x|,|y|,|S| \\le 500$.\n\nFor $100\\%$ of the testdata, $1\\le N\\le 10^5$, $|x|,|y|,|S| \\le 10^9$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gclp58tq.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "液体滴落", "background": "", "description": "在平面中有若干线段 $L_i$（**不一定互不相交**），组成一个又一个轨道，有一滴液体从上方滴落下来，如果碰到轨道就沿着轨道向下滚，从轨道较低的一端离开轨道，在轨道中不受任何影响，否则就垂直滴落，问最后液滴从什么位置落出整个系统。\n\n相信这个题目一定难不倒你。", "inputFormat": "第一行两个整数 $N$ 和 $S$，表示有 $N$ 条线段，液滴从横坐标为 $S$ 的地方落下。\n\n以下 $N$ 行，每行四个整数 $x_{i1}$，$y_{i1}$，$x_{i2}$，$y_{i2}$ 描述每条线段的端点位置。注意线段不包括两个端点，液体可以从一端点处滴下而不碰到斜面。", "outputFormat": "一行一个整数：表示最终液体落下的位置（横坐标）。", "hint": "对于 $50\\%$ 的数据，$1\\le n\\le100$，$|x|,|y|,|S| \\le500$；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$|x|,|y|,|S|≤10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gclp58tq.png)\n", "locale": "zh-CN"}}}
{"pid": "P1767", "type": "P", "difficulty": 2, "samples": [["4\n*zlw**pxh\nl*zlwk*hx*\nw*tyy**yyy\n        zzl\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "NOI 导刊"], "title": "家族", "background": "", "description": "在一个与世隔绝的岛屿上，有一个有趣的现象：同一个家族的人家总是相邻的（这里的相邻是指东南西北四个方向），不同的家族之间总会有河流或是山丘隔绝，但同一个家族的人不一定有相同姓氏。现在给你岛上的地图，求出岛上有多少个不同的家族。岛上的地图有 $n$ 行，每行有若干列，每个格子中要么是空格，表示大海，要么是 $\\text{``{\\tt *}''}$，表示河流或山丘，要么是小写字母，表示一户人家的姓氏。\n", "inputFormat": "第一行是个数字 $N$，表示下面信息的行数。接下来是 $N$ 行字符，每行由小写字母和 $\\texttt *$ 号组成，有些行的最前面也可能包含若干连续的空格，表示这些区域是大海，每一行最多不超过 $200$ 个字符。", "outputFormat": "一个数字，表示家族数。\n", "hint": "### 数据范围及约定\n\n- $10\\%$ 的数据，$n≤1$。\n- $30\\%$ 的数据，$n≤10$。\n- $100\\%$ 的数据，$n≤100$，每一行最多不超过 $200$ 个字符。\n\nNOI导刊 2010 普及（10）\n", "locale": "zh-CN", "translations": {"en": {"title": "Family", "background": "", "description": "On an isolated island, there is an interesting phenomenon: households from the same family are always adjacent (adjacent means the four cardinal directions), while different families are always separated by rivers or hills. However, people from the same family do not necessarily share the same surname. Given the island’s map, find how many different families there are on the island. The map has $n$ rows, each with several columns. Each cell is either a space, meaning sea; or $\\text{``{\\tt *}''}$, meaning a river or hill; or a lowercase letter, meaning a household’s surname.", "inputFormat": "The first line contains a number $N$, indicating the number of lines that follow. Then come $N$ lines of characters, each consisting of lowercase letters and the character $\\texttt *$. Some lines may also begin with several consecutive spaces, meaning those areas are sea. Each line has at most $200$ characters.", "outputFormat": "A single number, indicating the number of families.", "hint": "Constraints\n\n- For $10\\%$ of the testdata, $n \\le 1$.\n- For $30\\%$ of the testdata, $n \\le 10$.\n- For $100\\%$ of the testdata, $n \\le 100$, and each line has at most $200$ characters.\n\nNOI Guide 2010 Junior (10).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "家族", "background": "", "description": "在一个与世隔绝的岛屿上，有一个有趣的现象：同一个家族的人家总是相邻的（这里的相邻是指东南西北四个方向），不同的家族之间总会有河流或是山丘隔绝，但同一个家族的人不一定有相同姓氏。现在给你岛上的地图，求出岛上有多少个不同的家族。岛上的地图有 $n$ 行，每行有若干列，每个格子中要么是空格，表示大海，要么是 $\\text{``{\\tt *}''}$，表示河流或山丘，要么是小写字母，表示一户人家的姓氏。\n", "inputFormat": "第一行是个数字 $N$，表示下面信息的行数。接下来是 $N$ 行字符，每行由小写字母和 $\\texttt *$ 号组成，有些行的最前面也可能包含若干连续的空格，表示这些区域是大海，每一行最多不超过 $200$ 个字符。", "outputFormat": "一个数字，表示家族数。\n", "hint": "### 数据范围及约定\n\n- $10\\%$ 的数据，$n≤1$。\n- $30\\%$ 的数据，$n≤10$。\n- $100\\%$ 的数据，$n≤100$，每一行最多不超过 $200$ 个字符。\n\nNOI导刊 2010 普及（10）\n", "locale": "zh-CN"}}}
{"pid": "P1768", "type": "P", "difficulty": 5, "samples": [["5 6\r\n1 2 1 1\r\n4 1 6 2\r\n5 4 8 1\r\n2 3 2 2\r\n5 2 4 1\r\n3 5 6 4", "2.3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["图论", "二分", "负权环", "分数规划"], "title": "天路", "background": "“那是一条神奇的天路诶 ~~~，把第一个神犇送上天堂 ~~~ ”，XDM 先生唱着这首“亲切”的歌曲，一道猥琐题目的灵感在脑中出现了。\n\n和 C_SUNSHINE 大神商量后，这道猥琐的题目终于出现在本次试题上了，旨在难到一帮大脑不够灵活的 OIer 们（JOHNKRAM 真的不是说你……）。", "description": "言归正传，小 X 的梦中，他在西藏开了一家大型旅游公司，现在，他要为西藏的各个景点设计一组铁路线。但是，小 X 发现，来旅游的游客都很挑剔，他们乘火车在各个景点间游览，景点的趣味当然是不用说啦，关键是路上。试想，若是乘火车一圈转悠，却发现回到了游玩过的某个景点，花了一大堆钱却在路上看不到好的风景，那是有多么的恼火啊。\n\n所以，小 X 为所有的路径定义了两个值，$V_i$ 和 $P_i$，分别表示火车线路的风景趣味度和乘坐一次的价格。现在小 X 想知道，乘客从任意一个景点开始坐火车走过的一条回路上所有的 $V$ 之和与 $P$ 之和的比值的最大值。以便为顾客们推荐一条环绕旅游路线（路线不一定包含所有的景点，但是不可以存在重复的火车路线）。\n\n于是，小 X 梦醒之后找到了你……", "inputFormat": "第一行两个正整数 $N,M$，表示有 $N$ 个景点，$M$ 条火车路线，火车路线是单向的。\n\n以下 $M$ 行，每行 $4$ 个正整数，分别表示一条路线的起点，终点，$V$ 值和 $P$ 值。\n\n注意，两个顶点间可能有多条轨道，但一次只能走其中的一条。", "outputFormat": "一个实数，表示一条回路上最大的比值，保留 $1$ 位小数。\n\n若没有回路，输出 $-1$。", "hint": "对于 $30\\%$ 的数据，$1 \\le N \\le 100$，$1 \\le M \\le 20$；\n\n对于 $60\\%$ 的数据，$1 \\le N \\le 3{,}000$，$1 \\le M \\le 2{,}000$；\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 7{,}000$，$1 \\le M \\le 20{,}000$，$1 \\le V_i,P_i \\le 1{,}000$。\n\n保证答案在 $200$ 以内。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1ywdkfs.png)", "locale": "zh-CN", "translations": {"en": {"title": "Heavenly Road", "background": "\"That is a magical Sky Road, sending the first shen niu (pinyin) to heaven,\" Mr. XDM sang this \"friendly\" song, and a mischievous problem idea appeared in his mind.\n\nAfter discussing with the master C_SUNSHINE, this mischievous problem finally appeared in this exam, aiming to stump a bunch of OIers whose brains are not flexible enough (JOHNKRAM, this is really not about you...).", "description": "Back to the point. In Xiao X’s dream, he opened a large travel company in Tibet. Now he needs to design a set of railway lines connecting various scenic spots in Tibet. However, Xiao X found that tourists are very picky. They take trains to travel between scenic spots. The spots themselves are surely fun, but what really matters is the journey. Imagine taking a train around in a loop only to find yourself back at a spot you have already visited. You spend a lot of money and still cannot see good scenery along the way. That would be very frustrating.\n\nTherefore, Xiao X assigns two values to every route, $V_i$ and $P_i$, representing the scenery fun value of the train line and the price for one ride, respectively. Now Xiao X wants to know the maximum value of the ratio between the sum of $V$ and the sum of $P$ over any cycle that a passenger can take starting from any scenic spot. This is to recommend a circular tour route for customers (the route does not have to include all scenic spots, but no railway route may be repeated).\n\nThen, Xiao X woke up and came to you...", "inputFormat": "The first line contains two positive integers $N,M$, indicating there are $N$ scenic spots and $M$ railway routes. The railway routes are directed.\n\nEach of the following $M$ lines contains $4$ positive integers, representing the start point, end point, $V$ value, and $P$ value of a route.\n\nNote that there may be multiple tracks between two vertices, but you can take only one of them at a time.", "outputFormat": "Output a real number, the maximum ratio on a cycle, keeping $1$ decimal place.\n\nIf there is no cycle, output $-1$.", "hint": "For $30\\%$ of the testdata, $1 \\le N \\le 100$, $1 \\le M \\le 20$.\n\nFor $60\\%$ of the testdata, $1 \\le N \\le 3{,}000$, $1 \\le M \\le 2{,}000$.\n\nFor $100\\%$ of the testdata, $1 \\le N \\le 7{,}000$, $1 \\le M \\le 20{,}000$, $1 \\le V_i,P_i \\le 1{,}000$.\n\nThe answer is guaranteed to be within $200$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1ywdkfs.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "天路", "background": "“那是一条神奇的天路诶 ~~~，把第一个神犇送上天堂 ~~~ ”，XDM 先生唱着这首“亲切”的歌曲，一道猥琐题目的灵感在脑中出现了。\n\n和 C_SUNSHINE 大神商量后，这道猥琐的题目终于出现在本次试题上了，旨在难到一帮大脑不够灵活的 OIer 们（JOHNKRAM 真的不是说你……）。", "description": "言归正传，小 X 的梦中，他在西藏开了一家大型旅游公司，现在，他要为西藏的各个景点设计一组铁路线。但是，小 X 发现，来旅游的游客都很挑剔，他们乘火车在各个景点间游览，景点的趣味当然是不用说啦，关键是路上。试想，若是乘火车一圈转悠，却发现回到了游玩过的某个景点，花了一大堆钱却在路上看不到好的风景，那是有多么的恼火啊。\n\n所以，小 X 为所有的路径定义了两个值，$V_i$ 和 $P_i$，分别表示火车线路的风景趣味度和乘坐一次的价格。现在小 X 想知道，乘客从任意一个景点开始坐火车走过的一条回路上所有的 $V$ 之和与 $P$ 之和的比值的最大值。以便为顾客们推荐一条环绕旅游路线（路线不一定包含所有的景点，但是不可以存在重复的火车路线）。\n\n于是，小 X 梦醒之后找到了你……", "inputFormat": "第一行两个正整数 $N,M$，表示有 $N$ 个景点，$M$ 条火车路线，火车路线是单向的。\n\n以下 $M$ 行，每行 $4$ 个正整数，分别表示一条路线的起点，终点，$V$ 值和 $P$ 值。\n\n注意，两个顶点间可能有多条轨道，但一次只能走其中的一条。", "outputFormat": "一个实数，表示一条回路上最大的比值，保留 $1$ 位小数。\n\n若没有回路，输出 $-1$。", "hint": "对于 $30\\%$ 的数据，$1 \\le N \\le 100$，$1 \\le M \\le 20$；\n\n对于 $60\\%$ 的数据，$1 \\le N \\le 3{,}000$，$1 \\le M \\le 2{,}000$；\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 7{,}000$，$1 \\le M \\le 20{,}000$，$1 \\le V_i,P_i \\le 1{,}000$。\n\n保证答案在 $200$ 以内。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1ywdkfs.png)", "locale": "zh-CN"}}}
{"pid": "P1769", "type": "P", "difficulty": 5, "samples": [["2\n0 90 50 50\n10 0 10 10\n50 90 0 50\n50 90 50 0\n", " 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "递归", "NOI 导刊"], "title": "淘汰赛制", "background": "", "description": "淘汰赛制是一种极其残酷的比赛制度。$2^n$ 名选手分别标号 $1,2,3,\\cdots,2^n-1,2^n$，他们将要参加 $n$ 轮的激烈角逐。每一轮中，将所有参加该轮的选手按标号从小到大排序后，第 $1$ 位与第 $2$ 位比赛，第 $3$ 位与第 $4$ 位比赛，第 $5$ 位与第 $6$ 位比赛……只有每场比赛的胜者才有机会参加下一轮的比赛（不会有平局）。这样，每轮将淘汰一半的选手。$n$ 轮过后，只剩下一名选手，该选手即为最终的冠军。\n\n现在已知每位选手分别与其他选手比赛获胜的概率，请你预测一下谁夺冠的概率最大。", "inputFormat": "第一行是一个整数 $n(1 \\le n \\le 10)$，表示总轮数。接下来 $2^n$ 行，每行 $2^n$ 个整数，第 $i$ 行第 $j$ 个是 $p_{i,j}$。（$0 \\le p_{i_j} \\le 100$，$p_{i,i}=0$，$p_{i,j}+p_{j,i}=100$），表示第 $i$ 号选手与第 $j$ 号选手比赛获胜的概率。", "outputFormat": "输出只有一个整数 $c$，表示夺冠概率最大的选手编号（若有多位选手，输出编号最小者）。\n", "hint": "- $30\\%$ 的数据满足 $n \\le 3$；\n- $100\\%$ 的数据满足 $n \\le 10$。\n\n_NOI导刊 2010 提高（01）\n", "locale": "zh-CN", "translations": {"en": {"title": "Single-Elimination Tournament", "background": "", "description": "The single-elimination system is a very brutal competition format. There are $2^n$ players numbered $1, 2, 3, \\cdots, 2^n - 1, 2^n$, and they will compete for $n$ rounds. In each round, after sorting all players participating in that round by increasing index, the $1$-st plays the $2$-nd, the $3$-rd plays the $4$-th, the $5$-th plays the $6$-th, and so on. Only the winner of each match advances to the next round (there are no ties). Thus, each round eliminates half of the players. After $n$ rounds, exactly one player remains, who is the champion.\n\nNow you are given, for every pair of players, the probability that one beats the other. Please predict which player has the highest probability of winning the championship.", "inputFormat": "The first line contains an integer $n$ ($1 \\le n \\le 10$), the total number of rounds. Then follow $2^n$ lines, each containing $2^n$ integers; in line $i$, the $j$-th number is $p_{i,j}$. The constraints are $0 \\le p_{i,j} \\le 100$, $p_{i,i} = 0$, and $p_{i,j} + p_{j,i} = 100$. Here $p_{i,j}$ denotes the probability (in percent) that player $i$ defeats player $j$.", "outputFormat": "Output a single integer $c$, the index of the player whose probability of becoming the champion is the highest (if there are multiple such players, output the smallest index).", "hint": "- $30\\%$ of the testdata satisfies $n \\le 3$.\n- $100\\%$ of the testdata satisfies $n \\le 10$.\n\nSource: NOI Guide 2010 Senior (01).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "淘汰赛制", "background": "", "description": "淘汰赛制是一种极其残酷的比赛制度。$2^n$ 名选手分别标号 $1,2,3,\\cdots,2^n-1,2^n$，他们将要参加 $n$ 轮的激烈角逐。每一轮中，将所有参加该轮的选手按标号从小到大排序后，第 $1$ 位与第 $2$ 位比赛，第 $3$ 位与第 $4$ 位比赛，第 $5$ 位与第 $6$ 位比赛……只有每场比赛的胜者才有机会参加下一轮的比赛（不会有平局）。这样，每轮将淘汰一半的选手。$n$ 轮过后，只剩下一名选手，该选手即为最终的冠军。\n\n现在已知每位选手分别与其他选手比赛获胜的概率，请你预测一下谁夺冠的概率最大。", "inputFormat": "第一行是一个整数 $n(1 \\le n \\le 10)$，表示总轮数。接下来 $2^n$ 行，每行 $2^n$ 个整数，第 $i$ 行第 $j$ 个是 $p_{i,j}$。（$0 \\le p_{i_j} \\le 100$，$p_{i,i}=0$，$p_{i,j}+p_{j,i}=100$），表示第 $i$ 号选手与第 $j$ 号选手比赛获胜的概率。", "outputFormat": "输出只有一个整数 $c$，表示夺冠概率最大的选手编号（若有多位选手，输出编号最小者）。\n", "hint": "- $30\\%$ 的数据满足 $n \\le 3$；\n- $100\\%$ 的数据满足 $n \\le 10$。\n\n_NOI导刊 2010 提高（01）\n", "locale": "zh-CN"}}}
{"pid": "P1770", "type": "P", "difficulty": 4, "samples": [["Shang wang dou tmd bei ping ping an an he xie diao le.\nTian yao mie he xie, tui he xie bao ping an.  shang Wang sou suo jiu ping cha cha cha ,you       zhen       xiang!", "Tian yao mie <b>he xie</b>, tui <b>he xie</b> bao <b>ping an.  shang Wang</b> sou suo jiu ping cha cha cha ,you       zhen       xiang!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "洛谷原创", "洛谷比赛"], "title": "万能的OIH搜索", "background": "以下皆为真实的故事。\n\nOIH（Oi in hand <http://www.oiinhand.info/> ）是洛谷的官方战略合作伙伴。\n\n洛谷的题目搜索功能（请看看上面的搜索框）、在线 IDE 功能均使用 OIH 的服务。\n\nOIH 的搜索功能很强大，其庞大的数据库拥有 $8000+$ 道中外主流 OJ 的题目。只需要只言片语（题目名称、描述、甚至是测试数据）就可以很快的搜出这道题的出处（“改编题”的杀手）。\n\n以后，OIH 还将收录全网上的题解（数量是万级别的），只要通过题目名称，就可以搜到这个题目的题解。\n\nOIH 的目标是制作出一个适合 OIers 的 app。虽然 OIH 不是 OJ，但是 OIH 的辅助功能能够给 OIers 带来很大的便利。如果您有任何的 idea，请 @soha（oih 的作者）。", "description": "经过多次谈判，kkksc03 终于取得了 OIH 搜索的接口，现在向 OIH 服务器发送了一个查询请求，返回了一道题目。\n\n查询关键词是一句话，由汉字（我们用它的拼音代替）、空格（每个汉字之间都有空格）、半角标点组成。返回的题目也是这样的。kkksc03 希望将题目中的某些词语加粗。所谓词语，就是连续两个或以上汉字。比如说 `tao tao`,`zhai ping guo` 都是词语，而 `hao`,`ni,hao` 不是词语。如果一个在题目中出现的词语也在关键词中出现的词语，那么加粗。加粗的方法是在词语前加上 `<b>`，在词语后面加上一个 `</b>`。至于标点符号么加不加粗无所谓。kkksc03 希望添加标记（`<b>` `</b>`对）的数量尽可能少，而且每个标记之间的的字符数最少。", "inputFormat": "两行。第一行为一个字符串 $S_1$，关键词字符串。第二行 $S_2$，是 OIH 返回的题目字符串。\n", "outputFormat": "一行，处理的结果。", "hint": "每个汉字不超过 $7$ 个英文字符。\n\n关键字不超过 $100$ 个汉字。\n\n返回的题目不超过 $1000$ 个汉字。", "locale": "zh-CN", "translations": {"en": {"title": "The Universal OIH Search", "background": "The following are all true stories.\n\nOIH (Oi in hand <http://www.oiinhand.info/>) is Luogu’s official strategic partner.\n\nLuogu’s problem search feature (see the search box above) and its online IDE are both powered by OIH.\n\nOIH’s search is very powerful. Its large database contains $8000+$ problems from mainstream domestic and international OJs. With just a few words (problem title, description, or even testdata), it can quickly find the source of a problem (the killer of “modified problems”).\n\nIn the future, OIH will also index solution write-ups from across the web (on the order of ten thousand). With just the problem name, you will be able to find its solutions.\n\nOIH’s goal is to build an app suitable for OIers. Although OIH is not an OJ, its auxiliary features can bring great convenience to OIers. If you have any ideas, please @soha (the author of OIH).", "description": "After multiple negotiations, kkksc03 finally obtained access to the OIH search API, sent a query request to the OIH server, and received a problem in response.\n\nThe query keywords form a sentence composed of Chinese characters (we replace them with their pinyin), spaces (there is a space between every Chinese character), and half-width punctuation. The returned problem string has the same format. kkksc03 wants to bold certain words in the problem. A “word” means two or more consecutive Chinese characters. For example, `tao tao` and `zhai ping guo` are words, while `hao` and `ni,hao` are not. If a word that appears in the problem also appears as a word in the keywords, then bold it. To bold, add `<b>` before the word and `</b>` after the word. As for punctuation, including it in bold or not does not matter. kkksc03 wants to use as few tag pairs (`<b>` `</b>`) as possible, and, subject to that, minimize the number of characters enclosed by each pair of tags.", "inputFormat": "Two lines. The first line is a string $S_1$, the keyword string. The second line, $S_2$, is the problem string returned by OIH.", "outputFormat": "One line, the processed result.", "hint": "- Each Chinese character has at most $7$ English letters.\n- The keywords contain at most $100$ Chinese characters.\n- The returned problem contains at most $1000$ Chinese characters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "万能的OIH搜索", "background": "以下皆为真实的故事。\n\nOIH（Oi in hand <http://www.oiinhand.info/> ）是洛谷的官方战略合作伙伴。\n\n洛谷的题目搜索功能（请看看上面的搜索框）、在线 IDE 功能均使用 OIH 的服务。\n\nOIH 的搜索功能很强大，其庞大的数据库拥有 $8000+$ 道中外主流 OJ 的题目。只需要只言片语（题目名称、描述、甚至是测试数据）就可以很快的搜出这道题的出处（“改编题”的杀手）。\n\n以后，OIH 还将收录全网上的题解（数量是万级别的），只要通过题目名称，就可以搜到这个题目的题解。\n\nOIH 的目标是制作出一个适合 OIers 的 app。虽然 OIH 不是 OJ，但是 OIH 的辅助功能能够给 OIers 带来很大的便利。如果您有任何的 idea，请 @soha（oih 的作者）。", "description": "经过多次谈判，kkksc03 终于取得了 OIH 搜索的接口，现在向 OIH 服务器发送了一个查询请求，返回了一道题目。\n\n查询关键词是一句话，由汉字（我们用它的拼音代替）、空格（每个汉字之间都有空格）、半角标点组成。返回的题目也是这样的。kkksc03 希望将题目中的某些词语加粗。所谓词语，就是连续两个或以上汉字。比如说 `tao tao`,`zhai ping guo` 都是词语，而 `hao`,`ni,hao` 不是词语。如果一个在题目中出现的词语也在关键词中出现的词语，那么加粗。加粗的方法是在词语前加上 `<b>`，在词语后面加上一个 `</b>`。至于标点符号么加不加粗无所谓。kkksc03 希望添加标记（`<b>` `</b>`对）的数量尽可能少，而且每个标记之间的的字符数最少。", "inputFormat": "两行。第一行为一个字符串 $S_1$，关键词字符串。第二行 $S_2$，是 OIH 返回的题目字符串。\n", "outputFormat": "一行，处理的结果。", "hint": "每个汉字不超过 $7$ 个英文字符。\n\n关键字不超过 $100$ 个汉字。\n\n返回的题目不超过 $1000$ 个汉字。", "locale": "zh-CN"}}}
{"pid": "P1771", "type": "P", "difficulty": 5, "samples": [["3 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "高精度", "递归", "NOI 导刊"], "title": "方程的解", "background": "", "description": "佳佳碰到了一个难题，请你来帮忙解决。对于不定方程 $a_1+a_2+\\cdots +a_{k-1}+a_k=g(x)$，其中 $k\\ge 2$ 且 $k\\in \\mathbb{N}^*$，$x$ 是正整数，$g(x)=x^x \\bmod 1000$（即 $x^x$ 除以 $1000$ 的余数），$x,k$ 是给定的数。我们要求的是这个不定方程的正整数解组数。\n\n举例来说，当 $k=3,x=2$ 时，方程的解分别为：\n$$\\begin{cases} a_1=1\\\\ a_2=1\\\\ a_3=2 \\end{cases}$$\n$$\\begin{cases} a_1=1\\\\ a_2=2\\\\ a_3=1 \\end{cases}$$\n$$\\begin{cases} a_1=2\\\\ a_2=1\\\\ a_3=1 \\end{cases}$$", "inputFormat": "输入有且只有一行，为用空格隔开的两个正整数，依次为 $k,x$。", "outputFormat": "输出有且只有一行，为方程的正整数解组数。\n", "hint": "- 对于 $40\\%$ 的数据，$\\mathit{ans} \\le 10^{16}$；\n- 对于 $100\\%$ 的数据，$k \\le 100$，$x \\le 2^{31}-1$，$k \\le g(x)$。\n\nNOI导刊2010提高（01）\n", "locale": "zh-CN", "translations": {"en": {"title": "Solutions to the Equation", "background": "", "description": "Jiajia ran into a tough problem and asks you to help solve it. Consider the Diophantine equation $a_1 + a_2 + \\cdots + a_{k-1} + a_k = g(x)$, where $k \\ge 2$ and $k \\in \\mathbb{N}^*$, $x$ is a positive integer, and $g(x) = x^x \\bmod 1000$ (that is, the remainder of $x^x$ modulo $1000$). The numbers $x$ and $k$ are given. Your task is to find the number of solution tuples in positive integers to this equation.\n\nFor example, when $k = 3, x = 2$, the solutions are:\n$$\\begin{cases} a_1=1\\\\ a_2=1\\\\ a_3=2 \\end{cases}$$\n$$\\begin{cases} a_1=1\\\\ a_2=2\\\\ a_3=1 \\end{cases}$$\n$$\\begin{cases} a_1=2\\\\ a_2=1\\\\ a_3=1 \\end{cases}$$", "inputFormat": "The input contains exactly one line with two positive integers separated by a space, namely $k, x$.", "outputFormat": "Output exactly one line with the number of solution tuples in positive integers.", "hint": "- For 40% of the testdata, $\\mathit{ans} \\le 10^{16}$.\n- For 100% of the testdata, $k \\le 100$, $x \\le 2^{31}-1$, $k \\le g(x)$.\n\nNOI Journal 2010 Senior (01)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方程的解", "background": "", "description": "佳佳碰到了一个难题，请你来帮忙解决。对于不定方程 $a_1+a_2+\\cdots +a_{k-1}+a_k=g(x)$，其中 $k\\ge 2$ 且 $k\\in \\mathbb{N}^*$，$x$ 是正整数，$g(x)=x^x \\bmod 1000$（即 $x^x$ 除以 $1000$ 的余数），$x,k$ 是给定的数。我们要求的是这个不定方程的正整数解组数。\n\n举例来说，当 $k=3,x=2$ 时，方程的解分别为：\n$$\\begin{cases} a_1=1\\\\ a_2=1\\\\ a_3=2 \\end{cases}$$\n$$\\begin{cases} a_1=1\\\\ a_2=2\\\\ a_3=1 \\end{cases}$$\n$$\\begin{cases} a_1=2\\\\ a_2=1\\\\ a_3=1 \\end{cases}$$", "inputFormat": "输入有且只有一行，为用空格隔开的两个正整数，依次为 $k,x$。", "outputFormat": "输出有且只有一行，为方程的正整数解组数。\n", "hint": "- 对于 $40\\%$ 的数据，$\\mathit{ans} \\le 10^{16}$；\n- 对于 $100\\%$ 的数据，$k \\le 100$，$x \\le 2^{31}-1$，$k \\le g(x)$。\n\nNOI导刊2010提高（01）\n", "locale": "zh-CN"}}}
{"pid": "P1772", "type": "P", "difficulty": 5, "samples": [["5 5 10 8\n1 2 1\n1 3 3\n1 4 2\n2 3 2\n2 4 4\n3 4 1\n3 5 2\n4 5 2\n4\n2 2 3\n3 1 1\n3 3 3\n4 4 5\n", "32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "图论", "2006", "各省省选", "浙江", "NOI 导刊", "最短路"], "title": "[ZJOI2006] 物流运输", "background": "", "description": "物流公司要把一批货物从码头 A 运到码头 B。由于货物量比较大，需要 $n$ 天才能运完。货物运输过程中一般要转停好几个码头。  \n\n物流公司通常会设计一条固定的运输路线，以便对整个运输过程实施严格的管理和跟踪。由于各种因素的存在，有的时候某个码头会无法装卸货物。这时候就必须修改运输路线，让货物能够按时到达目的地。  \n\n但是修改路线是—件十分麻烦的事情，会带来额外的成本。因此物流公司希望能够订一个 $n$ 天的运输计划，使得总成本尽可能地小。\n", "inputFormat": "第一行是四个整数 $n,m,k,e$。$n$ 表示货物运输所需天数，$m$ 表示码头总数，$k$ 表示每次修改运输路线所需成本，$e$ 表示航线条数。  \n\n接下来 $e$ 行每行是一条航线描述，包括了三个整数，依次表示航线连接的两个码头编号以及航线长度。其中码头 A 编号为 $1$，码头 B 编号为 $m$。单位长度的运输费用为 $1$。航线是**双向**的。  \n\n再接下来一行是一个整数 $d$，后面的 $d$ 行每行是三个整数 $p,a,b$。表示编号为 $p$ 的码头在 $[a,b]$ 天之内无法装卸货物。同一个码头有可能在多个时间段内不可用。但任何时间都存在至少一条从码头 A 到码头 B 的运输路线。\n", "outputFormat": "包括了一个整数表示最小的总成本。  \n总成本为 $n$ 天运输路线长度之和 $+ k \\times$ 改变运输路线的次数。\n", "hint": "【数据范围】\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$1\\le m \\le 20$, $1 \\le k \\le 500$, $1 \\le e \\le 200$。\n\n【样例输入说明】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lcnync6.png)\n\n上图依次表示第 $1$ 至第 $5$ 天的情况，阴影表示不可用的码头。\n\n【样例输出说明】\n\n前三天走 $1 \\to 4 \\to 5$，后两天走 $1 \\to 3 \\to 5$，这样总成本为 $(2+2)\\times 3+(3+2)\\times 2+10=32$。\n\n\\_NOI导刊2010提高（01）\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2006] Logistics Transportation", "background": "", "description": "A logistics company needs to transport a batch of goods from port A to port B. Because the amount of goods is large, it will take $n$ days to finish. In general, the goods need to be transferred through several intermediate ports.\n\nThe company usually designs a fixed transportation route to enable strict management and tracking. Due to various factors, sometimes a port cannot load or unload cargo. In such cases, the route must be modified so that the goods can arrive on time.\n\nHowever, changing the route is troublesome and incurs extra cost. Therefore, the company wants to make a transportation plan for $n$ days that minimizes the total cost.\n\nOn each day, you must choose a valid route from port A to port B that does not pass through any port that is unavailable on that day. Each time the route differs from the previous day’s route, an additional cost of $k$ is incurred. The transportation fee per unit length is $1$. Ports are numbered from $1$ to $m$, where port A is $1$ and port B is $m$. All shipping routes are bidirectional. It is guaranteed that on every day there is at least one valid route from A to B.\n\nThe goal is to minimize the total cost, which equals the sum of the route lengths over $n$ days plus $k \\times$ the number of times the route is changed.", "inputFormat": "The first line contains four integers $n, m, k, e$, where $n$ is the number of days, $m$ is the number of ports, $k$ is the cost of changing the route, and $e$ is the number of shipping routes.\n\nEach of the next $e$ lines contains three integers $u, v, w$, meaning there is a bidirectional shipping route between ports $u$ and $v$ with length $w$. The transportation fee per unit length is $1$. Port A is numbered $1$, and port B is numbered $m$.\n\nThe next line contains an integer $d$. Each of the following $d$ lines contains three integers $p, a, b$, meaning port $p$ is unavailable during days $[a, b]$ (inclusive). The same port may be unavailable during multiple time intervals. For every day, there exists at least one route from port A to port B.", "outputFormat": "Output a single integer: the minimal total cost.\n\nThe total cost is the sum of route lengths over $n$ days $+\\, k \\times$ the number of times the route is changed.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 100$, $1 \\le m \\le 20$, $1 \\le k \\le 500$, $1 \\le e \\le 200$.\n\nSample Input Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lcnync6.png)\n\nThe figure shows the situations from day $1$ to day $5$; shaded ports are unavailable.\n\nSample Output Explanation\n\nUse route $1 \\to 4 \\to 5$ for the first three days, and route $1 \\to 3 \\to 5$ for the last two days. Then the total cost is $(2+2) \\times 3 + (3+2) \\times 2 + 10 = 32$.\n\nSource: NOI Guide 2010 Senior (01).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2006] 物流运输", "background": "", "description": "物流公司要把一批货物从码头 A 运到码头 B。由于货物量比较大，需要 $n$ 天才能运完。货物运输过程中一般要转停好几个码头。  \n\n物流公司通常会设计一条固定的运输路线，以便对整个运输过程实施严格的管理和跟踪。由于各种因素的存在，有的时候某个码头会无法装卸货物。这时候就必须修改运输路线，让货物能够按时到达目的地。  \n\n但是修改路线是—件十分麻烦的事情，会带来额外的成本。因此物流公司希望能够订一个 $n$ 天的运输计划，使得总成本尽可能地小。\n", "inputFormat": "第一行是四个整数 $n,m,k,e$。$n$ 表示货物运输所需天数，$m$ 表示码头总数，$k$ 表示每次修改运输路线所需成本，$e$ 表示航线条数。  \n\n接下来 $e$ 行每行是一条航线描述，包括了三个整数，依次表示航线连接的两个码头编号以及航线长度。其中码头 A 编号为 $1$，码头 B 编号为 $m$。单位长度的运输费用为 $1$。航线是**双向**的。  \n\n再接下来一行是一个整数 $d$，后面的 $d$ 行每行是三个整数 $p,a,b$。表示编号为 $p$ 的码头在 $[a,b]$ 天之内无法装卸货物。同一个码头有可能在多个时间段内不可用。但任何时间都存在至少一条从码头 A 到码头 B 的运输路线。\n", "outputFormat": "包括了一个整数表示最小的总成本。  \n总成本为 $n$ 天运输路线长度之和 $+ k \\times$ 改变运输路线的次数。\n", "hint": "【数据范围】\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$1\\le m \\le 20$, $1 \\le k \\le 500$, $1 \\le e \\le 200$。\n\n【样例输入说明】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lcnync6.png)\n\n上图依次表示第 $1$ 至第 $5$ 天的情况，阴影表示不可用的码头。\n\n【样例输出说明】\n\n前三天走 $1 \\to 4 \\to 5$，后两天走 $1 \\to 3 \\to 5$，这样总成本为 $(2+2)\\times 3+(3+2)\\times 2+10=32$。\n\n\\_NOI导刊2010提高（01）\n", "locale": "zh-CN"}}}
{"pid": "P1773", "type": "P", "difficulty": 4, "samples": [["4421\r\n22\r\n", "0 1 21 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "NOI 导刊", "枚举"], "title": "符文之语", "background": "传说中珠穆朗玛峰下有座古代人修建的神庙，神庙的地下室里有古代王室的遗产，但数千年来从未有人到达过……探险者小 FF 一直梦想成为世界上最富有的人和最杰出的探险家并被永载史册。在证明了这个洞确实存在后，小 FF 做好了充足准备，来到了神庙。", "description": "当小 FF 来到神庙时，神庙已经破败不堪了。但神庙的中央有一个光亮如新的石台。小 FF 走近石台，发现石台上有一个数串，而数串的上方刻着一串古老的符文之语。精通古符文之语的小 FF 不费吹灰之力就读懂了文章的意思，其大意是：\n\n对于石台上的一串数字，你可以在适当的位置加入乘号（设加了 $k$ 个，当然也可不加，即分成 $k+1$ 个部分），设这 $k+1$ 个部分的乘积（如果 $k=0$，则乘积即为原数串的值）对 $m$ 的余数（即 $\\bmod\\ m$）为 $x$；\n\n现求 $x$ 能达到的最小值及该情况下 $k$ 的最小值，以及 $x$ 能达到的最大值及该情况下的 $k$ 的最小值（可以存在 $x$ 的最小值与最大值相同的情况）。\n\n小 FF 还知道，如果他找到了正确的答案，那么就可以通往神庙的下层了。但这个问题似乎不太好解决，小 FF 就找到了你，并答应找到财宝以后和你二八分（当然你拿二……）。", "inputFormat": "第一行为数串，且数串中不存在 $0$；\n\n第二行为 $m$。", "outputFormat": "四个数，分别为 $x$ 的最小值和该情况下的 $k$，以及 $x$ 的最大值和该情况下的 $k$，相邻两个数之间用一个空格隔开。", "hint": "记 $L$ 表示字符串的长度。\n\n- 对于 $30\\%$ 的数据：$2 \\le L \\le 50$；\n- 对于 $100\\%$ 的数据：$2 \\le L \\le 1000$，$2 \\le m \\le 50$。\n\nNOI 导刊 $2010$ 提高（$02$）", "locale": "zh-CN", "translations": {"en": {"title": "Runeword", "background": "Legend has it that there is an ancient temple built by people of old beneath Mount Everest. In the temple’s basement lies the royal heritage, yet for thousands of years no one has ever reached it. The explorer Little FF dreams of becoming the richest person in the world and the most outstanding explorer, remembered forever. After proving that this cave does exist, Little FF made thorough preparations and arrived at the temple.", "description": "When Little FF arrived, the temple was already in ruins. But at the center stood a stone pedestal that was bright and spotless. Little FF approached and found a string of digits on the pedestal, with a line of ancient runic words carved above it. Being fluent in ancient runes, Little FF easily understood the text, which roughly says:\n\nGiven the string of digits on the pedestal, you may insert multiplication signs at suitable positions (suppose you insert $k$ of them; you may also insert none, i.e., split into $k+1$ parts). Let the product of these $k+1$ parts (if $k=0$, the product is just the value of the original string) modulo $m$ be $x$ (that is, $\\bmod\\ m$).\n\nFind the minimum possible $x$ and, among all ways achieving it, the smallest $k$; and find the maximum possible $x$ and, among all ways achieving it, the smallest $k$ (it is possible that the minimum and maximum $x$ are the same).\n\nLittle FF also knows that if he finds the correct answer, he can proceed to the lower level of the temple. But this problem seems hard, so he turns to you for help, and promises an eighty–twenty split of the treasure afterwards (you get twenty).", "inputFormat": "The first line contains the string of digits, which does not contain the digit $0$.\n\nThe second line contains $m$.", "outputFormat": "Output four numbers: the minimum value of $x$ and, in that case, the smallest $k$; then the maximum value of $x$ and, in that case, the smallest $k$. Separate adjacent numbers with a single space.", "hint": "Let $L$ be the length of the string.\n\n- For $30\\%$ of the testdata: $2 \\le L \\le 50$.\n- For $100\\%$ of the testdata: $2 \\le L \\le 1000$, $2 \\le m \\le 50$.\n\nNOI Guide 2010 Senior (02).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "符文之语", "background": "传说中珠穆朗玛峰下有座古代人修建的神庙，神庙的地下室里有古代王室的遗产，但数千年来从未有人到达过……探险者小 FF 一直梦想成为世界上最富有的人和最杰出的探险家并被永载史册。在证明了这个洞确实存在后，小 FF 做好了充足准备，来到了神庙。", "description": "当小 FF 来到神庙时，神庙已经破败不堪了。但神庙的中央有一个光亮如新的石台。小 FF 走近石台，发现石台上有一个数串，而数串的上方刻着一串古老的符文之语。精通古符文之语的小 FF 不费吹灰之力就读懂了文章的意思，其大意是：\n\n对于石台上的一串数字，你可以在适当的位置加入乘号（设加了 $k$ 个，当然也可不加，即分成 $k+1$ 个部分），设这 $k+1$ 个部分的乘积（如果 $k=0$，则乘积即为原数串的值）对 $m$ 的余数（即 $\\bmod\\ m$）为 $x$；\n\n现求 $x$ 能达到的最小值及该情况下 $k$ 的最小值，以及 $x$ 能达到的最大值及该情况下的 $k$ 的最小值（可以存在 $x$ 的最小值与最大值相同的情况）。\n\n小 FF 还知道，如果他找到了正确的答案，那么就可以通往神庙的下层了。但这个问题似乎不太好解决，小 FF 就找到了你，并答应找到财宝以后和你二八分（当然你拿二……）。", "inputFormat": "第一行为数串，且数串中不存在 $0$；\n\n第二行为 $m$。", "outputFormat": "四个数，分别为 $x$ 的最小值和该情况下的 $k$，以及 $x$ 的最大值和该情况下的 $k$，相邻两个数之间用一个空格隔开。", "hint": "记 $L$ 表示字符串的长度。\n\n- 对于 $30\\%$ 的数据：$2 \\le L \\le 50$；\n- 对于 $100\\%$ 的数据：$2 \\le L \\le 1000$，$2 \\le m \\le 50$。\n\nNOI 导刊 $2010$ 提高（$02$）", "locale": "zh-CN"}}}
{"pid": "P1774", "type": "P", "difficulty": 3, "samples": [["4\n2 8 0 3\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "树状数组", "递归", "离散化", "NOI 导刊", "排序"], "title": "最接近神的人", "background": "", "description": "破解了符文之语，小 FF 开启了通往地下的道路。当他走到最底层时，发现正前方有一扇巨石门，门上雕刻着一幅古代人进行某种活动的图案。而石门上方用古代文写着“神的殿堂”。小 FF 猜想里面应该就有王室的遗产了。但现在的问题是如何打开这扇门……。\n\n仔细研究后，他发现门上的图案大概是说：古代人认为只有智者才是最容易接近神明的。而最聪明的人往往通过一种仪式选拔出来。仪式大概是指，即将隐退的智者为他的候选人写下一串无序的数字，并让他们进行一种操作，即交换序列中相邻的两个元素。而用最少的交换次数使原序列变成不下降序列的人即是下一任智者。\n\n小 FF 发现门上同样有着 $n$ 个数字。于是他认为打开这扇门的秘诀就是找到让这个序列变成不下降序列所需要的最小次数。但小 FF 不会……只好又找到了你，并答应事成之后与你三七分……", "inputFormat": "第一行为一个整数 $n$，表示序列长度。\n\n第二行为 $n$ 个整数，表示序列中每个元素。", "outputFormat": "一个整数 $\\mathit{ans}$，即最少操作次数。\n", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据 $1≤n≤10^4$。\n- 对于 $100\\%$ 的数据 $1≤n≤5\\times 10^5$，$A_i\\in [-2^{31}, 2^{31})$。\n\n### 样例解释\n\n开始序列为 $[2,8,0,3]$，目标序列为 $[0, 2, 3, 8]$，可进行三次操作的目标序列：\n\n1. 交换 $(8,0)$，序列变成 $[2,0,8,3]$；\n2. 交换 $(2,0)$，序列变成 $[0,2,8,3]$；\n3. 交换 $(8,3)$，序列变成 $[0,2,3,8]$。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Person Closest to the Gods", "background": "# Description\n\nAfter deciphering the runic language, Little FF opened a path leading underground. At the very bottom, he found a massive stone gate ahead, carved with a scene of ancient people performing some kind of activity. Above the gate, in ancient script, were the words \"Hall of the Gods.\" Little FF guessed the royal legacy must be inside. But the problem now is how to open the gate.\n\nAfter careful study, he realized the carving roughly says: the ancients believed that only the wise could most easily approach the gods. The smartest one was often chosen through a ritual. The ritual was: the retiring sage wrote an unordered sequence of numbers for his candidates and let them perform an operation—swapping two adjacent elements in the sequence. Whoever could transform the original sequence into a nondecreasing sequence with the fewest swaps would become the next sage.\n\nLittle FF also found $n$ numbers on the gate. He thus believed the secret to opening it is to find the minimum number of swaps needed to make this sequence nondecreasing. But Little FF doesn't know how... so he came to you again, promising a 30–70 split after the job is done.", "description": "", "inputFormat": "", "outputFormat": "Output a single integer $\\mathit{ans}$, the minimum number of operations.", "hint": "### Constraints\n\n- For $30\\%$ of the testdata, $1 \\le n \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 5 \\times 10^5$, $A_i \\in [-2^{31}, 2^{31})$.\n\n### Sample Explanation\n\nThe initial sequence is $[2,8,0,3]$, and the target sequence is $[0, 2, 3, 8]$. One way to reach the target in three operations:\n\n1. Swap $(8,0)$, the sequence becomes $[2,0,8,3]$.\n2. Swap $(2,0)$, the sequence becomes $[0,2,8,3]$.\n3. Swap $(8,3)$, the sequence becomes $[0,2,3,8]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最接近神的人", "background": "", "description": "破解了符文之语，小 FF 开启了通往地下的道路。当他走到最底层时，发现正前方有一扇巨石门，门上雕刻着一幅古代人进行某种活动的图案。而石门上方用古代文写着“神的殿堂”。小 FF 猜想里面应该就有王室的遗产了。但现在的问题是如何打开这扇门……。\n\n仔细研究后，他发现门上的图案大概是说：古代人认为只有智者才是最容易接近神明的。而最聪明的人往往通过一种仪式选拔出来。仪式大概是指，即将隐退的智者为他的候选人写下一串无序的数字，并让他们进行一种操作，即交换序列中相邻的两个元素。而用最少的交换次数使原序列变成不下降序列的人即是下一任智者。\n\n小 FF 发现门上同样有着 $n$ 个数字。于是他认为打开这扇门的秘诀就是找到让这个序列变成不下降序列所需要的最小次数。但小 FF 不会……只好又找到了你，并答应事成之后与你三七分……", "inputFormat": "第一行为一个整数 $n$，表示序列长度。\n\n第二行为 $n$ 个整数，表示序列中每个元素。", "outputFormat": "一个整数 $\\mathit{ans}$，即最少操作次数。\n", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据 $1≤n≤10^4$。\n- 对于 $100\\%$ 的数据 $1≤n≤5\\times 10^5$，$A_i\\in [-2^{31}, 2^{31})$。\n\n### 样例解释\n\n开始序列为 $[2,8,0,3]$，目标序列为 $[0, 2, 3, 8]$，可进行三次操作的目标序列：\n\n1. 交换 $(8,0)$，序列变成 $[2,0,8,3]$；\n2. 交换 $(2,0)$，序列变成 $[0,2,8,3]$；\n3. 交换 $(8,3)$，序列变成 $[0,2,3,8]$。\n", "locale": "zh-CN"}}}
{"pid": "P1775", "type": "P", "difficulty": 3, "samples": [["4\n2 5 3 1", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "区间 DP"], "title": "石子合并（弱化版）", "background": "", "description": "设有 $N(N \\le 300)$ 堆石子排成一排，其编号为 $1,2,3,\\cdots,N$。每堆石子有一定的质量 $m_i\\ (m_i \\le 1000)$。现在要将这 $N$ 堆石子合并成为一堆。每次只能合并相邻的两堆，合并的代价为这两堆石子的质量之和，合并后与这两堆石子相邻的石子将和新堆相邻。合并时由于选择的顺序不同，合并的总代价也不相同。试找出一种合理的方法，使总的代价最小，并输出最小代价。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个整数 $m_i$。", "outputFormat": "输出文件仅一个整数，也就是最小代价。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Merging Stones (Weakened Version)", "background": "", "description": "There are $N(N \\le 300)$ piles of stones in a row, numbered $1, 2, 3, \\cdots, N$. Each pile has a mass $m_i\\ (m_i \\le 1000)$. The goal is to merge these $N$ piles into one pile. Each time, you may only merge two adjacent piles, and the cost of merging is the sum of the masses of these two piles. After merging, the piles that were adjacent to the two merged piles become adjacent to the new pile. Because different merging orders lead to different total costs, find a method that minimizes the total cost, and output the minimum cost.", "inputFormat": "The first line contains an integer $N$.\nThe second line contains $N$ integers $m_i$.", "outputFormat": "Output a single integer, the minimum cost.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "石子合并（弱化版）", "background": "", "description": "设有 $N(N \\le 300)$ 堆石子排成一排，其编号为 $1,2,3,\\cdots,N$。每堆石子有一定的质量 $m_i\\ (m_i \\le 1000)$。现在要将这 $N$ 堆石子合并成为一堆。每次只能合并相邻的两堆，合并的代价为这两堆石子的质量之和，合并后与这两堆石子相邻的石子将和新堆相邻。合并时由于选择的顺序不同，合并的总代价也不相同。试找出一种合理的方法，使总的代价最小，并输出最小代价。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个整数 $m_i$。", "outputFormat": "输出文件仅一个整数，也就是最小代价。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1776", "type": "P", "difficulty": 4, "samples": [["4 20\n3 9 3\n5 9 1\n9 4 2\n8 1 3", "47"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "单调队列", "NOI 导刊", "背包 DP", "进制"], "title": "宝物筛选", "background": null, "description": "终于，破解了千年的难题。小 FF 找到了王室的宝物室，里面堆满了无数价值连城的宝物。\n\n这下小 FF 可发财了，嘎嘎。但是这里的宝物实在是太多了，小 FF 的采集车似乎装不下那么多宝物。看来小 FF 只能含泪舍弃其中的一部分宝物了。\n\n小 FF 对洞穴里的宝物进行了整理，他发现每样宝物都有一件或者多件。他粗略估算了下每样宝物的价值，之后开始了宝物筛选工作：小 FF 有一个最大载重为 $W$ 的采集车，洞穴里总共有 $n$ 种宝物，每种宝物的价值为 $v_i$，重量为 $w_i$，每种宝物有 $m_i$ 件。小 FF 希望在采集车不超载的前提下，选择一些宝物装进采集车，使得它们的价值和最大。", "inputFormat": "第一行为两个整数 $n$ 和 $W$，分别表示宝物种数和采集车的最大载重。\n\n接下来 $n$ 行每行三个整数 $v_i,w_i,m_i$。", "outputFormat": "输出仅一个整数，表示在采集车不超载的情况下收集的宝物的最大价值。", "hint": "对于 $30\\%$ 的数据，$1 \\le m_i$，$\\sum m_i\\leq 10^4$，$0\\le W\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le m_i$，$\\sum m_i \\leq 10^5$，$0\\le W\\leq 4\\times 10^4$，$1\\leq n\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Treasure Selection", "background": "", "description": "At last, the millennium-old puzzle was solved. Xiao FF found the royal treasure vault, filled with countless priceless treasures.\n\nXiao FF is about to get rich. However, there are simply too many treasures, and his collection cart cannot hold them all. He has to give up some of them.\n\nXiao FF sorted the treasures in the cave and found that each type of treasure has one or more copies. He roughly estimated the value of each type and then began the selection: the collection cart has a maximum load of $W$. There are $n$ types of treasures in total. For each type, the value is $v_i$, the weight is $w_i$, and there are $m_i$ copies. Under the constraint that the cart does not exceed its load, Xiao FF wants to choose some treasures to put into the cart so that the total value is maximized.", "inputFormat": "The first line contains two integers $n$ and $W$, representing the number of types of treasures and the maximum load of the collection cart.\n\nThe next $n$ lines each contain three integers $v_i, w_i, m_i$.", "outputFormat": "Output a single integer, the maximum total value of treasures that can be collected without exceeding the cart’s load.", "hint": "For $30\\%$ of the testdata, $1 \\le m_i$，$\\sum m_i\\leq 10^4$，$0\\le W\\leq 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le m_i$，$\\sum m_i \\leq 10^5$，$0\\le W\\leq 4\\times 10^4$，$1\\leq n\\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宝物筛选", "background": null, "description": "终于，破解了千年的难题。小 FF 找到了王室的宝物室，里面堆满了无数价值连城的宝物。\n\n这下小 FF 可发财了，嘎嘎。但是这里的宝物实在是太多了，小 FF 的采集车似乎装不下那么多宝物。看来小 FF 只能含泪舍弃其中的一部分宝物了。\n\n小 FF 对洞穴里的宝物进行了整理，他发现每样宝物都有一件或者多件。他粗略估算了下每样宝物的价值，之后开始了宝物筛选工作：小 FF 有一个最大载重为 $W$ 的采集车，洞穴里总共有 $n$ 种宝物，每种宝物的价值为 $v_i$，重量为 $w_i$，每种宝物有 $m_i$ 件。小 FF 希望在采集车不超载的前提下，选择一些宝物装进采集车，使得它们的价值和最大。", "inputFormat": "第一行为两个整数 $n$ 和 $W$，分别表示宝物种数和采集车的最大载重。\n\n接下来 $n$ 行每行三个整数 $v_i,w_i,m_i$。", "outputFormat": "输出仅一个整数，表示在采集车不超载的情况下收集的宝物的最大价值。", "hint": "对于 $30\\%$ 的数据，$1 \\le m_i$，$\\sum m_i\\leq 10^4$，$0\\le W\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le m_i$，$\\sum m_i \\leq 10^5$，$0\\le W\\leq 4\\times 10^4$，$1\\leq n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1777", "type": "P", "difficulty": 6, "samples": [["5 2\n25 25 32 32 25\n5 1\n25 26 25 26 25\n0 0", "Case 1: 2\n\nCase 2: 3\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["NOI 导刊"], "title": "帮助", "background": "", "description": "Bubu 的书架乱成一团了！帮他一下吧！\n\n他的书架上一共有 $n$ 本书。我们定义混乱值是连续相同高度书本的段数。例如，如果书的高度是 $[30,30,31,31,32]$，那么混乱值为 $3$；$[30,32,32,31]$ 的混乱度也是 $3$，但 $[31,32,31,32,31]$ 的混乱度是 $5$，这实在是太乱了。\n\nBubu 想尽可能地减少混乱度，但他有点累了，所以他决定最多取出 $k$ 本书，再随意将它们放到书架上。你能帮助他吗？", "inputFormat": "每个输入文件包含最多 $20$ 组测试数据。\n\n每组测试数据开头为两个整数 $n,k\\ (1 \\le k \\le n \\le 100)$，表示总共有 $n$ 本书，最多可以进行 $k$ 次搬书操作。\n\n接下来一行有 $n$ 个整数，表示每本书的高度，从左到右。每本书的高度是 $25$ 到 $32$ 间的整数。\n\n最后一组数据后有一行 $n=k=0$，表示输入结束。", "outputFormat": "对于每一组数据，输出 $\\text{Case}$ 标号和最终最小的混乱度。在每组数据后输出一个空行。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Help", "background": "", "description": "Bubu’s bookshelf is a mess! Please help him.\n\nThere are $n$ books on his shelf. We define the messiness as the number of segments of consecutive books that have the same height. For example, if the heights are [30, 30, 31, 31, 32], then the messiness is 3; [30, 32, 32, 31] also has messiness 3, but [31, 32, 31, 32, 31] has messiness 5, which is really messy.\n\nBubu wants to reduce the messiness as much as possible, but he is a bit tired, so he decides to take out at most $k$ books and then place them back on the shelf arbitrarily. Can you help him?", "inputFormat": "Each input file contains at most 20 test cases.\n\nEach test case starts with two integers $n, k$ ($1 \\le k \\le n \\le 100$), where $n$ is the number of books and at most $k$ books can be moved.\n\nThe next line contains $n$ integers, the heights of the books from left to right. Each height is an integer between 25 and 32.\n\nA line with $n = k = 0$ follows the last test case, indicating the end of input.", "outputFormat": "For each test case, output the label $\\text{Case}$ and the minimal possible messiness. Print a blank line after each test case.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "帮助", "background": "", "description": "Bubu 的书架乱成一团了！帮他一下吧！\n\n他的书架上一共有 $n$ 本书。我们定义混乱值是连续相同高度书本的段数。例如，如果书的高度是 $[30,30,31,31,32]$，那么混乱值为 $3$；$[30,32,32,31]$ 的混乱度也是 $3$，但 $[31,32,31,32,31]$ 的混乱度是 $5$，这实在是太乱了。\n\nBubu 想尽可能地减少混乱度，但他有点累了，所以他决定最多取出 $k$ 本书，再随意将它们放到书架上。你能帮助他吗？", "inputFormat": "每个输入文件包含最多 $20$ 组测试数据。\n\n每组测试数据开头为两个整数 $n,k\\ (1 \\le k \\le n \\le 100)$，表示总共有 $n$ 本书，最多可以进行 $k$ 次搬书操作。\n\n接下来一行有 $n$ 个整数，表示每本书的高度，从左到右。每本书的高度是 $25$ 到 $32$ 间的整数。\n\n最后一组数据后有一行 $n=k=0$，表示输入结束。", "outputFormat": "对于每一组数据，输出 $\\text{Case}$ 标号和最终最小的混乱度。在每组数据后输出一个空行。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1778", "type": "P", "difficulty": 5, "samples": [["5 5 2\n#####\n#A#B#\n#   #\n#b#a#\n#####\n16 4 3\n################\n## ########## ##\n#    ABCcba    #\n################\n16 16 3\n################\n### ##    #   ##\n##  #  ##   # c#\n#  ## ########b#\n# ##  # #   #  #\n#  # ##   # # ##\n##  a#  # # #  #\n### ## #### ## #\n##   #   #  #  #\n#  ##### # ## ##\n####   #B# #   #\n##  C#   #   ###\n#  # # ####### #\n# ######  A##  #\n#        #     #\n################\n0 0 0", "7\n36\n77"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["NOI 导刊"], "title": "万圣节后的早晨", "background": null, "description": "要求你写一个程序，在一个地图中，找到最小步数将每个鬼移动到他们指定的位置。地图包含一些小方格。每格要么是墙（鬼不能进入），要么是走廊（鬼能进入）。\n\n每一步里，你可以同时移动任意数量的鬼。每个鬼要么待在原地不动，要么移动到相邻的格子里（相邻的格子有公共边），如果移动满足下列条件，则移动是可行的。\n\n1. 没有一个以上的鬼在同一个格子里；\n2. 没有一对鬼在一步里交换了位置。\n\n例如，假设鬼的位置是如右上图所示的，其中sharp(`#`)表示墙，空格表示走廊，`a`,`b`,`c`表示鬼：\n\n```plain\n####\n ab#\n#c##\n####\n```\n经过一步移动后，地图可以变成如下的样子：\n\n```plain\n####     ####     ####       ####\n ab#     a b#     acb#       ab #\n#c##     #c##     # ##       #c##   \n####     ####     ####       ####\n```", "inputFormat": "输入包括最多 $10$ 组数据，每组数据包含一幅地图。输入格式如下：\n\n$$\\begin{matrix}\nw & h & n \\\\\nc_{1,1} & c_{1,2} & \\cdots & c_{1,w} \\\\\nc_{2,1} & c_{2,2} & \\cdots & c_{2,w} \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\nc_{h,1} & c_{h,2} & \\cdots & c_{h,w} \\\\\n\\end{matrix}$$\n\n第一行的 $w，h$ 和 $n$ 表示地图的宽度和高度，$n$ 表示鬼的数目，他们满足 $4 \\le w \\le 16$，$4 \\le h \\le 16$，$1 \\le n \\le 3$。\n\n接下来 $h$ 行，每行 $w$ 个字符：\n\n- 一个 `#` 表示墙。\n- 一个小写字母表示鬼的初始位置（该位置也是走廊）。\n- 一个大写字母表示鬼的目标位置（该位置也是走廊）。\n- 一个空格表示空的走廊。\n\n在每幅地图里，前 $n$ 个小写字母和前 $n$ 个大写字母表示鬼的初始位置及鬼的目标位置。地图的最外层是墙壁，即地图的第一行和最后一行的所有字符都是`#`，每一行的第一个字符和最后一个字符也都是`#`。保证地图上的所有走廊都是连通的，同样所有墙壁也是连通的。地图上每个 $2 \\times 2$ 的区域都至少有一个格子为墙（`#`）。 我们需要将小写字母表示的鬼移动到对应的大写字母的位置里。\n\n最后一组数据后一行有三个 $0$。", "outputFormat": "对每组数据输出一行一个整数，表示最小的移动步数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "The Morning After Halloween", "background": "", "description": "You are asked to write a program that, on a map, finds the minimum number of steps to move each ghost to its designated position. The map consists of small cells. Each cell is either a wall (ghosts cannot enter) or a corridor (ghosts can enter).\n\nIn each step, you may move any number of ghosts simultaneously. Each ghost either stays put or moves to an adjacent cell (adjacent cells share an edge). A move is valid if it satisfies all of the following:\n\n1. No more than one ghost occupies the same cell.\n2. No pair of ghosts swaps positions in a single step.\n\nFor example, suppose the ghosts are placed as shown in the figure to the right. Here, `#` denotes a wall, a space denotes a corridor, and `a`, `b`, `c` denote ghosts:\n\n```plain\n####\n ab#\n#c##\n####\n```\nAfter one step, the map can become any of the following:\n\n```plain\n####     ####     ####       ####\n ab#     a b#     acb#       ab #\n#c##     #c##     # ##       #c##   \n####     ####     ####       ####\n```", "inputFormat": "The input contains at most $10$ test cases. Each test case describes one map in the following format:\n\n$$\\begin{matrix}\nw & h & n \\\\\nc_{1,1} & c_{1,2} & \\cdots & c_{1,w} \\\\\nc_{2,1} & c_{2,2} & \\cdots & c_{2,w} \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\nc_{h,1} & c_{h,2} & \\cdots & c_{h,w} \\\\\n\\end{matrix}$$\n\nThe first line contains $w, h$ and $n$, where $w$ and $h$ are the width and height of the map, and $n$ is the number of ghosts. They satisfy $4 \\le w \\le 16$, $4 \\le h \\le 16$, $1 \\le n \\le 3$.\n\nThe next $h$ lines each contain $w$ characters:\n- `#` denotes a wall.\n- A lowercase letter denotes a ghost’s initial position (which is also a corridor).\n- An uppercase letter denotes a ghost’s target position (which is also a corridor).\n- A space denotes an empty corridor.\n\nIn each map, the first $n$ lowercase letters and the first $n$ uppercase letters denote the ghosts’ initial positions and their target positions, respectively. The outer boundary of the map is walled: every character in the first and last rows is `#`, and the first and last character of every row is also `#`. All corridor cells are connected; likewise, all wall cells are connected. In every $2 \\times 2$ area on the map, at least one cell is a wall (`#`). We need to move each ghost denoted by a lowercase letter to the corresponding uppercase letter’s position.\n\nA line containing three zeros $0$ $0$ $0$ follows the last test case.", "outputFormat": "For each test case, output a single integer on one line: the minimum number of moves.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "万圣节后的早晨", "background": null, "description": "要求你写一个程序，在一个地图中，找到最小步数将每个鬼移动到他们指定的位置。地图包含一些小方格。每格要么是墙（鬼不能进入），要么是走廊（鬼能进入）。\n\n每一步里，你可以同时移动任意数量的鬼。每个鬼要么待在原地不动，要么移动到相邻的格子里（相邻的格子有公共边），如果移动满足下列条件，则移动是可行的。\n\n1. 没有一个以上的鬼在同一个格子里；\n2. 没有一对鬼在一步里交换了位置。\n\n例如，假设鬼的位置是如右上图所示的，其中sharp(`#`)表示墙，空格表示走廊，`a`,`b`,`c`表示鬼：\n\n```plain\n####\n ab#\n#c##\n####\n```\n经过一步移动后，地图可以变成如下的样子：\n\n```plain\n####     ####     ####       ####\n ab#     a b#     acb#       ab #\n#c##     #c##     # ##       #c##   \n####     ####     ####       ####\n```", "inputFormat": "输入包括最多 $10$ 组数据，每组数据包含一幅地图。输入格式如下：\n\n$$\\begin{matrix}\nw & h & n \\\\\nc_{1,1} & c_{1,2} & \\cdots & c_{1,w} \\\\\nc_{2,1} & c_{2,2} & \\cdots & c_{2,w} \\\\\n\\vdots & \\vdots & \\ddots & \\vdots \\\\\nc_{h,1} & c_{h,2} & \\cdots & c_{h,w} \\\\\n\\end{matrix}$$\n\n第一行的 $w，h$ 和 $n$ 表示地图的宽度和高度，$n$ 表示鬼的数目，他们满足 $4 \\le w \\le 16$，$4 \\le h \\le 16$，$1 \\le n \\le 3$。\n\n接下来 $h$ 行，每行 $w$ 个字符：\n\n- 一个 `#` 表示墙。\n- 一个小写字母表示鬼的初始位置（该位置也是走廊）。\n- 一个大写字母表示鬼的目标位置（该位置也是走廊）。\n- 一个空格表示空的走廊。\n\n在每幅地图里，前 $n$ 个小写字母和前 $n$ 个大写字母表示鬼的初始位置及鬼的目标位置。地图的最外层是墙壁，即地图的第一行和最后一行的所有字符都是`#`，每一行的第一个字符和最后一个字符也都是`#`。保证地图上的所有走廊都是连通的，同样所有墙壁也是连通的。地图上每个 $2 \\times 2$ 的区域都至少有一个格子为墙（`#`）。 我们需要将小写字母表示的鬼移动到对应的大写字母的位置里。\n\n最后一组数据后一行有三个 $0$。", "outputFormat": "对每组数据输出一行一个整数，表示最小的移动步数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1779", "type": "P", "difficulty": 5, "samples": [["3\n8000 15000 30000\n3\nFlare 45 Single 8000\nMeteor 62 All 6000\nUltimate 80 All 9999", "232"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["NOI 导刊"], "title": "魔鬼杀手", "background": "你生活在一个怪兽世界里。\n\n你需要用魔法反抗这些怪兽。", "description": "每个怪兽都有一定的生命值。\n\n你可以靠施魔法，减少怪兽的生命值。\n\n每个魔法都会有一定的伤害，表示用该魔法进行一次攻击能使得被攻击者的生命值减少的数量。\n\n一个怪兽被击败了当前仅当它的生命值小于等于 $0$。\n\n魔法是要消耗魔力的。\n\n因为你的魔力是有限的，你希望用最少的魔力击败所有的怪兽。\n\n写一个程序完成这个任务。", "inputFormat": "输入按如下的格式给出：\n\n > $N$    \n > $HP_1$    \n > $HP_2$    \n > $\\ldots$    \n > $HP_N$    \n > $M$    \n > $Name_1$  $MP_1$  $Target_1$  $Damage_1$  \n > $Name_2$  $MP_2$  $Target_2$  $Damage_2$  \n > $\\ldots$     \n > $Name_M$  $MP_M$  $Target_M$  $Damage_M$  \n\n$N$ 是怪兽的数量（$1\\le N\\le 100$）。\n\n$HP_{i}$ 表示第 $i$ 个怪兽的生命值（$1\\le HP_i\\le 10^5$）。\n\n$M$ 表示可用的魔法数量（$1\\le M\\le 100$）。\n\n$Name_j$ 是第 $j$ 种魔法的名字，最长会有 $30$ 个大写或小写字母。\n\n$MP_j$ 是这种魔法需要消耗的魔力（$0\\le MP_j<100$）。\n\n$Target_j$ 要么是 `Single`，要么是 `All`，表示该魔法只攻击单个怪兽（`Single`）或对全体怪兽同时有效（`All`）。\n\n$Damage_j$ 表示该魔法进行一次攻击能使得被攻击者的生命值减少的数量（$0\\le Damage_j<10^6$）。\n\n所有数字都是整数。\n\n最少有一种魔法的 $Damage$ 值是非零的。", "outputFormat": "输出一行，包含一个整数，表示最小需要消耗的魔力。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Demon Slayer", "background": "You live in a world of monsters.\nYou need to fight back against these monsters using magic.", "description": "Each monster has some HP.\nYou can cast spells to reduce a monster’s HP.\nEach spell has a certain damage, meaning one cast reduces the target’s HP by that amount.\nA monster is defeated if and only if its HP is less than or equal to $0$.\nCasting a spell consumes mana.\nBecause your mana is limited, you want to defeat all monsters using the minimum total mana.\nWrite a program to accomplish this task.", "inputFormat": "The input is given as follows:\n$N$\n$HP_1$\n$HP_2$\n$\\ldots$\n$HP_N$\n$M$\n$Name_1$ $MP_1$ $Target_1$ $Damage_1$\n$Name_2$ $MP_2$ $Target_2$ $Damage_2$\n$\\ldots$\n$Name_M$ $MP_M$ $Target_M$ $Damage_M$\n\n$N$ is the number of monsters ($1 \\le N \\le 100$).\n$HP_i$ is the HP of the $i$-th monster ($1 \\le HP_i \\le 10^5$).\n$M$ is the number of available spells ($1 \\le M \\le 100$).\n$Name_j$ is the name of the $j$-th spell, containing at most $30$ uppercase or lowercase letters.\n$MP_j$ is the mana cost of that spell ($0 \\le MP_j < 100$).\n$Target_j$ is either `Single` or `All`, meaning the spell either targets a single monster (`Single`) or affects all monsters simultaneously (`All`).\n$Damage_j$ is the amount by which one cast reduces each affected target’s HP ($0 \\le Damage_j < 10^6$).\nAll numbers are integers.\nAt least one spell has a nonzero $Damage$ value.", "outputFormat": "Output one line containing a single integer, the minimum total mana required.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔鬼杀手", "background": "你生活在一个怪兽世界里。\n\n你需要用魔法反抗这些怪兽。", "description": "每个怪兽都有一定的生命值。\n\n你可以靠施魔法，减少怪兽的生命值。\n\n每个魔法都会有一定的伤害，表示用该魔法进行一次攻击能使得被攻击者的生命值减少的数量。\n\n一个怪兽被击败了当前仅当它的生命值小于等于 $0$。\n\n魔法是要消耗魔力的。\n\n因为你的魔力是有限的，你希望用最少的魔力击败所有的怪兽。\n\n写一个程序完成这个任务。", "inputFormat": "输入按如下的格式给出：\n\n > $N$    \n > $HP_1$    \n > $HP_2$    \n > $\\ldots$    \n > $HP_N$    \n > $M$    \n > $Name_1$  $MP_1$  $Target_1$  $Damage_1$  \n > $Name_2$  $MP_2$  $Target_2$  $Damage_2$  \n > $\\ldots$     \n > $Name_M$  $MP_M$  $Target_M$  $Damage_M$  \n\n$N$ 是怪兽的数量（$1\\le N\\le 100$）。\n\n$HP_{i}$ 表示第 $i$ 个怪兽的生命值（$1\\le HP_i\\le 10^5$）。\n\n$M$ 表示可用的魔法数量（$1\\le M\\le 100$）。\n\n$Name_j$ 是第 $j$ 种魔法的名字，最长会有 $30$ 个大写或小写字母。\n\n$MP_j$ 是这种魔法需要消耗的魔力（$0\\le MP_j<100$）。\n\n$Target_j$ 要么是 `Single`，要么是 `All`，表示该魔法只攻击单个怪兽（`Single`）或对全体怪兽同时有效（`All`）。\n\n$Damage_j$ 表示该魔法进行一次攻击能使得被攻击者的生命值减少的数量（$0\\le Damage_j<10^6$）。\n\n所有数字都是整数。\n\n最少有一种魔法的 $Damage$ 值是非零的。", "outputFormat": "输出一行，包含一个整数，表示最小需要消耗的魔力。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1780", "type": "P", "difficulty": 5, "samples": [["3\nscarlet green blue yellow magenta cyan\nblue pink green magenta cyan lemon\npurple red blue yellow cyan green\n2\nred green blue yellow magenta cyan\ncyan green blue yellow magenta red\n2\nred green gray gray magenta cyan\ncyan green gray gray magenta red\n2\nred green blue yellow magenta cyan\nmagenta red blue yellow cyan green\n3\nred green blue yellow magenta cyan\ncyan green hlue yellow magenta red\nmagenta red blue yellow cyan green\n3\nblue green green green green blue\ngreen blue blue green green green\ngreen green green green green sea-green\n3\nred yellow red yellow red yellow\nred red yellow yellow red yellow\nred red red red red red\n4\nviolet violet salmon salmon salmon salmon\nviolet salmon salmon salmon salmon violet\nviolet violet salmon salmon violet violet\nviolet violet violet violet salmon salmon\n1\nred green hlue yellow magenta cyan\n4\nmagenta pink red scarlet vermilion wine-red\naquamarine blue cyan indigo sky-blue turciuoise-blue\nblond cream chrome-yellow lemon olive yellow\nchrome-green emerald-green green olive vilidian sky-blue\n0", "4\n2\n0\n0\n2\n3\n4\n4\n0\n16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["NOI 导刊"], "title": "染色的立方体", "background": "", "description": "小胖最近迷上了3D物体，尤其是立方体。他手里有很多个立方体，他想让所有的立方体全都长得一样，所以他决定给某些立方体的表面重涂颜色，使得所有的立方体完全相同。但是小胖是很懒的，他想知道最少涂多少次颜色，可以让所有立方体完全相同。\n", "inputFormat": "每个测试点包含至多 $200$ 组数据。\n\n每组数据第一行 $n\\ (1≤n≤4)$，表示立方体的数量，接下来 $n$ 行，每行 $6$ 个字符串 $\\mathit{color}_1,\\allowbreak\\mathit{color}_2,\\allowbreak\\mathit{color}_3,\\allowbreak\\mathit{color}_4,\\allowbreak\\mathit{color}_5,\\allowbreak\\mathit{color}_6$，表示立方体 $6$ 个面的颜色。\n\n其中，面的标号如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xlfu6oe0.png)\n\n两个立方体被视为相同，当且仅当它们可以在某种摆放方式下，每个面的颜色都对应相同。\n\n如下图所示的两个立方体是相同的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/equmi6mp.png)\n\n如下图所示的两个立方体是不同的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jqp05oyq.png)\n\n一种涂色的方案如下：\n \n![](https://cdn.luogu.com.cn/upload/image_hosting/mewvgalo.png)\n", "outputFormat": "每组数据，输出一行一个整数，表示最少的涂色数。（涂一个面算一次涂色）\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Painting the Cubes", "background": "", "description": "Xiaopang recently got into 3D objects, especially cubes. He has many cubes and wants them all to look the same, so he decides to repaint some faces of some cubes so that all the cubes become exactly identical. However, Xiaopang is lazy and wants to know the minimum number of repaint operations needed to make all cubes identical.\n\nTwo cubes are considered identical if and only if there exists some orientation such that the colors of the corresponding faces match.\n\nThe face indices are labeled as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xlfu6oe0.png)\n\nThe two cubes shown below are identical.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/equmi6mp.png)\n\nThe two cubes shown below are different.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jqp05oyq.png)\n\nAn example painting plan is shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mewvgalo.png)", "inputFormat": "Each test point contains at most $200$ test cases.\n\nFor each test case, the first line contains $n$ ($1 \\le n \\le 4$), the number of cubes. Then follow $n$ lines, each containing $6$ strings $\\mathit{color}_1,\\allowbreak\\mathit{color}_2,\\allowbreak\\mathit{color}_3,\\allowbreak\\mathit{color}_4,\\allowbreak\\mathit{color}_5,\\allowbreak\\mathit{color}_6$, representing the colors of the $6$ faces of a cube.", "outputFormat": "For each test case, output one integer on a single line, the minimum number of repaint operations required (painting one face counts as one repaint).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "染色的立方体", "background": "", "description": "小胖最近迷上了3D物体，尤其是立方体。他手里有很多个立方体，他想让所有的立方体全都长得一样，所以他决定给某些立方体的表面重涂颜色，使得所有的立方体完全相同。但是小胖是很懒的，他想知道最少涂多少次颜色，可以让所有立方体完全相同。\n", "inputFormat": "每个测试点包含至多 $200$ 组数据。\n\n每组数据第一行 $n\\ (1≤n≤4)$，表示立方体的数量，接下来 $n$ 行，每行 $6$ 个字符串 $\\mathit{color}_1,\\allowbreak\\mathit{color}_2,\\allowbreak\\mathit{color}_3,\\allowbreak\\mathit{color}_4,\\allowbreak\\mathit{color}_5,\\allowbreak\\mathit{color}_6$，表示立方体 $6$ 个面的颜色。\n\n其中，面的标号如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xlfu6oe0.png)\n\n两个立方体被视为相同，当且仅当它们可以在某种摆放方式下，每个面的颜色都对应相同。\n\n如下图所示的两个立方体是相同的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/equmi6mp.png)\n\n如下图所示的两个立方体是不同的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jqp05oyq.png)\n\n一种涂色的方案如下：\n \n![](https://cdn.luogu.com.cn/upload/image_hosting/mewvgalo.png)\n", "outputFormat": "每组数据，输出一行一个整数，表示最少的涂色数。（涂一个面算一次涂色）\n", "hint": "", "locale": "zh-CN"}}}
