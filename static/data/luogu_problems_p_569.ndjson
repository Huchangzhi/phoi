{"pid": "P12551", "type": "P", "difficulty": 7, "samples": [["4\n3 1\n5 5 13\n4 2\n2 3 5 7\n5 3\n3 3 5 5 13\n6 5\n2 2 2 3 3 3", "1\n3 13 5 5\n0\n2 2 7\n2 3 5\n1\n1 13\n2 3 3\n2 5 5\n4\n1 2\n1 2\n1 2\n1 3\n2 3 3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2025", "Special Judge", "分类讨论", "UOI（乌克兰）"], "title": "[UOI 2025] Simple Task", "background": "", "description": "We call a non-empty sequence of positive integers *strange* if the sum of its elements is a prime number.\n\nYou are given an array $a$ of length $n$, **consisting of prime numbers**. You are also given an integer $k$.\n\nSplit the array $a$ into $k$ **non-empty** subsequences$^1$ such that each element of the array $a$ belongs to exactly one of them, and the number of *strange* subsequences among the formed ones is minimized.\n\nIn this problem, each test contains several sets of input data. You need to solve the problem independently for each such set.\n\n**Note that there is no block \"without additional constraints\" in this problem.**", "inputFormat": "The first line contains one integer $T$ $(1\\le T\\le 10^5)$ --- the number of sets of input data. The description of the input data sets follows.\n\nIn the first line of each input data set, two integers $n$, $k$ $(1 \\le k \\le n \\le 10^5)$ are given --- the length of the array $a$ and the number of subsequences into which it needs to be split.\n\nIn the second line of each input data set, $n$ prime numbers $a_1, a_2, \\ldots, a_n$ $(2\\le a_i\\le 10^5, a_i\\le a_{i+1})$ are given --- the elements of the array $a$.\n\nIt is guaranteed that the sum of $n$ across all input data sets of one test does not exceed $10^5$.", "outputFormat": "For each set of input data, output the optimal partition in the following format:\n\n- In the first line, output one integer $m$ --- the number of *strange* subsequences among the formed ones;\n- In each of the next $k$ lines, output integers $s_i$ and $b_1, b_2, \\ldots, b_{s_i}$ $(1\\le s_i\\le n)$ --- the number of elements in the corresponding subsequence of the partition and the elements themselves.\n\nSubsequences and their elements may be output in any order.\n\nIf there are multiple correct answers, any of them is allowed.", "hint": "$^1$ A sequence $c$ is called a subsequence of an array $b$ if it is possible to remove a certain number of elements from the array $b$ (possibly zero) so that the sequence $c$ is formed.\n\n### Scoring\n\n- ($2$ points): $T \\leq 20$, $k=1$;\n- ($5$ points): $n \\leq 4$, $a_i \\leq 10^4$ for all $1\\le i\\le n$;\n- ($8$ points): $T \\leq 20$, $n \\leq 10$, $a_i \\leq 10^4$ for all $1\\le i\\le n$;\n- ($4$ points): $n$ --- even, $a_i > 2$ for all $1\\le i\\le n$;\n- ($18$ points): $n$ --- odd, $a_i > 2$ for all $1\\le i\\le n$;\n- ($10$ points): $2\\cdot k \\ge n + 1$;\n- ($29$ points): $n$ --- even;\n- ($24$ points): $n$ --- odd.", "locale": "en", "translations": {"en": {"title": "[UOI 2025] Simple Task", "background": "", "description": "We call a non-empty sequence of positive integers *strange* if the sum of its elements is a prime number.\n\nYou are given an array $a$ of length $n$, **consisting of prime numbers**. You are also given an integer $k$.\n\nSplit the array $a$ into $k$ **non-empty** subsequences$^1$ such that each element of the array $a$ belongs to exactly one of them, and the number of *strange* subsequences among the formed ones is minimized.\n\nIn this problem, each test contains several sets of input data. You need to solve the problem independently for each such set.\n\n**Note that there is no block \"without additional constraints\" in this problem.**", "inputFormat": "The first line contains one integer $T$ $(1\\le T\\le 10^5)$ --- the number of sets of input data. The description of the input data sets follows.\n\nIn the first line of each input data set, two integers $n$, $k$ $(1 \\le k \\le n \\le 10^5)$ are given --- the length of the array $a$ and the number of subsequences into which it needs to be split.\n\nIn the second line of each input data set, $n$ prime numbers $a_1, a_2, \\ldots, a_n$ $(2\\le a_i\\le 10^5, a_i\\le a_{i+1})$ are given --- the elements of the array $a$.\n\nIt is guaranteed that the sum of $n$ across all input data sets of one test does not exceed $10^5$.", "outputFormat": "For each set of input data, output the optimal partition in the following format:\n\n- In the first line, output one integer $m$ --- the number of *strange* subsequences among the formed ones;\n- In each of the next $k$ lines, output integers $s_i$ and $b_1, b_2, \\ldots, b_{s_i}$ $(1\\le s_i\\le n)$ --- the number of elements in the corresponding subsequence of the partition and the elements themselves.\n\nSubsequences and their elements may be output in any order.\n\nIf there are multiple correct answers, any of them is allowed.", "hint": "$^1$ A sequence $c$ is called a subsequence of an array $b$ if it is possible to remove a certain number of elements from the array $b$ (possibly zero) so that the sequence $c$ is formed.\n\n### Scoring\n\n- ($2$ points): $T \\leq 20$, $k=1$;\n- ($5$ points): $n \\leq 4$, $a_i \\leq 10^4$ for all $1\\le i\\le n$;\n- ($8$ points): $T \\leq 20$, $n \\leq 10$, $a_i \\leq 10^4$ for all $1\\le i\\le n$;\n- ($4$ points): $n$ --- even, $a_i > 2$ for all $1\\le i\\le n$;\n- ($18$ points): $n$ --- odd, $a_i > 2$ for all $1\\le i\\le n$;\n- ($10$ points): $2\\cdot k \\ge n + 1$;\n- ($29$ points): $n$ --- even;\n- ($24$ points): $n$ --- odd.", "locale": "en"}, "zh-CN": {"title": "[UOI 2025] Simple Task", "background": "", "description": "我们称一个非空的正整数序列为*奇异*序列，如果其元素之和是一个质数。\n\n给定一个长度为 $n$ 的数组 $a$，**其中的元素均为质数**。同时给定一个整数 $k$。\n\n请将数组 $a$ 分割成 $k$ 个**非空**子序列$^1$，使得：\n- 数组 $a$ 的每个元素恰好属于其中一个子序列；\n- 在这些子序列中，*奇异*序列的数量尽可能少。\n\n本题每个测试包含多组输入数据，你需要分别独立处理每组数据。\n\n**注意：本题没有\"无额外限制\"的评分 Subtask。**", "inputFormat": "第一行包含一个整数 $T$ $(1\\le T\\le 10^5)$ —— 输入数据的组数。接下来是各组数据的描述。\n\n每组数据的第一行包含两个整数 $n$, $k$ $(1 \\le k \\le n \\le 10^5)$ —— 数组 $a$ 的长度和需要分割成的子序列数量。\n\n每组数据的第二行包含 $n$ 个质数 $a_1, a_2, \\ldots, a_n$ $(2\\le a_i\\le 10^5, a_i\\le a_{i+1})$ —— 数组 $a$ 的元素。\n\n保证单个测试中所有数据的 $n$ 之和不超过 $10^5$。", "outputFormat": "对于每组数据，按照以下格式输出最优分割方案：\n- 第一行输出一个整数 $m$ —— 分割后得到的*奇异*序列数量；\n- 接下来的 $k$ 行，每行输出整数 $s_i$ 和 $b_1, b_2, \\ldots, b_{s_i}$ $(1\\le s_i\\le n)$ —— 对应子序列的元素个数及其元素。\n\n子序列及其元素的输出顺序可以任意。\n\n如果存在多个正确答案，输出任意一个即可。\n", "hint": "$^1$ 序列 $c$ 称为数组 $b$ 的子序列，如果可以通过从数组 $b$ 中删除若干元素（可能为零个）来得到序列 $c$。\n\n### 评分标准\n\n- （$2$ 分）：$T \\leq 20$，$k=1$；\n- （$5$ 分）：$n \\leq 4$，所有 $1\\le i\\le n$ 满足 $a_i \\leq 10^4$；\n- （$8$ 分）：$T \\leq 20$，$n \\leq 10$，所有 $1\\le i\\le n$ 满足 $a_i \\leq 10^4$；\n- （$4$ 分）：$n$ 为偶数，所有 $1\\le i\\le n$ 满足 $a_i > 2$；\n- （$18$ 分）：$n$ 为奇数，所有 $1\\le i\\le n$ 满足 $a_i > 2$；\n- （$10$ 分）：$2\\cdot k \\ge n + 1$；\n- （$29$ 分）：$n$ 为偶数；\n- （$24$ 分）：$n$ 为奇数。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12552", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "交互题", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2024] Points on a Line", "background": "", "description": "This is an interactive problem.\n\nThere are $n$ points on a number line with integer coordinates $x_1, x_2, \\ldots, x_n$. It is guaranteed that $1\\le x_i\\le n$ for $1\\le i\\le n$.\n\nA point $x_k$ is considered to be between points $x_i$ and $x_j$ if and only if it belongs to the segment constructed on points $x_i$ and $x_j$. Formally, point $x_k$ is between points $x_i$ and $x_j$ if and only if $x_i \\leq x_k \\leq x_j$ or $x_j \\leq x_k \\leq x_i$.\n\nYou need to find any two indices $i$ and $j$ such that all $n$ points are between points $x_i$ and $x_j$.\n\nYou can use the following query: select three indices ($i$, $j$, $k$) and find out if point $x_k$ is between points $x_i$ and $x_j$.\n\nYou are allowed to use no more than $22222$ queries.\n\nIt is guaranteed that the coordinates of the points are fixed before the interaction begins. In other words, the **interactor is not adaptive**.", "inputFormat": "The first line contains a single integer $n$ ($3 \\le n \\le 2 \\cdot 10^4$) --- the number of points.", "outputFormat": "To make a query, output \"$\\tt{?}$ $i$ $j$ $k$\" ($1 \\le i, j, k \\le n$), then output a newline character and perform the $\\tt{flush}$ operation.\n\nIn response to the query, the jury program will output a single integer $f$ ($f \\in \\{0,1\\}$). If $f = 1$, then point $x_k$ is between points $x_i$ and $x_j$; if $f = 0$, then point $x_k$ is not between them.\n\nIf the query is invalid (i.e., the maximum number of queries is exceeded or the query parameters are invalid), the jury program will output $\\texttt{-1}$ and terminate. In this case, terminate the program to receive the verdict $\\tt{Wrong Answer}$.\n\nWhen you are ready to provide an answer, output it in the format \"$\\tt{!}$ $i$ $j$\" ($1 \\leq i, j \\leq n$), where $i$ and $j$ are the sought indices of points. After that, terminate the program.\n\nThe $\\tt{flush}$ operation is performed as follows:\n\n- $\\texttt{fflush(stdout)}$ or $\\texttt{cout.flush()}$ in $\\tt{C++}$;\n- $\\texttt{System.out.flush()}$ in $\\tt{Java}$;\n- $\\texttt{flush(output)}$ in $\\tt{Pascal}$;\n- $\\texttt{sys.stdout.flush()}$ in $\\tt{Python}$.\n\nYou can see the templates given.", "hint": "|4||\n|:-:|:-:|\n||? 1 4 2|\n|1||\n||? 1 4 3|\n|1||\n||! 1 4|\n\nIn the example, the points have coordinates $x = [1, 2, 3, 4]$.\n\n### Scoring\n\n- ($17$ points): $n \\le 20$;\n- ($16$ points): $n \\le 100$;\n- ($30$ points): $n \\le 10000$;\n- ($23$ points): $n \\le 20000$, $x_i \\le 2$;\n- ($10$ points): $n \\le 12000$;\n- ($4$ points): without additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Points on a Line", "background": "", "description": "This is an interactive problem.\n\nThere are $n$ points on a number line with integer coordinates $x_1, x_2, \\ldots, x_n$. It is guaranteed that $1\\le x_i\\le n$ for $1\\le i\\le n$.\n\nA point $x_k$ is considered to be between points $x_i$ and $x_j$ if and only if it belongs to the segment constructed on points $x_i$ and $x_j$. Formally, point $x_k$ is between points $x_i$ and $x_j$ if and only if $x_i \\leq x_k \\leq x_j$ or $x_j \\leq x_k \\leq x_i$.\n\nYou need to find any two indices $i$ and $j$ such that all $n$ points are between points $x_i$ and $x_j$.\n\nYou can use the following query: select three indices ($i$, $j$, $k$) and find out if point $x_k$ is between points $x_i$ and $x_j$.\n\nYou are allowed to use no more than $22222$ queries.\n\nIt is guaranteed that the coordinates of the points are fixed before the interaction begins. In other words, the **interactor is not adaptive**.", "inputFormat": "The first line contains a single integer $n$ ($3 \\le n \\le 2 \\cdot 10^4$) --- the number of points.", "outputFormat": "To make a query, output \"$\\tt{?}$ $i$ $j$ $k$\" ($1 \\le i, j, k \\le n$), then output a newline character and perform the $\\tt{flush}$ operation.\n\nIn response to the query, the jury program will output a single integer $f$ ($f \\in \\{0,1\\}$). If $f = 1$, then point $x_k$ is between points $x_i$ and $x_j$; if $f = 0$, then point $x_k$ is not between them.\n\nIf the query is invalid (i.e., the maximum number of queries is exceeded or the query parameters are invalid), the jury program will output $\\texttt{-1}$ and terminate. In this case, terminate the program to receive the verdict $\\tt{Wrong Answer}$.\n\nWhen you are ready to provide an answer, output it in the format \"$\\tt{!}$ $i$ $j$\" ($1 \\leq i, j \\leq n$), where $i$ and $j$ are the sought indices of points. After that, terminate the program.\n\nThe $\\tt{flush}$ operation is performed as follows:\n\n- $\\texttt{fflush(stdout)}$ or $\\texttt{cout.flush()}$ in $\\tt{C++}$;\n- $\\texttt{System.out.flush()}$ in $\\tt{Java}$;\n- $\\texttt{flush(output)}$ in $\\tt{Pascal}$;\n- $\\texttt{sys.stdout.flush()}$ in $\\tt{Python}$.\n\nYou can see the templates given.", "hint": "|4||\n|:-:|:-:|\n||? 1 4 2|\n|1||\n||? 1 4 3|\n|1||\n||! 1 4|\n\nIn the example, the points have coordinates $x = [1, 2, 3, 4]$.\n\n### Scoring\n\n- ($17$ points): $n \\le 20$;\n- ($16$ points): $n \\le 100$;\n- ($30$ points): $n \\le 10000$;\n- ($23$ points): $n \\le 20000$, $x_i \\le 2$;\n- ($10$ points): $n \\le 12000$;\n- ($4$ points): without additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Points on a Line", "background": "", "description": "这是一道交互题。\n\n数轴上有 $n$ 个整数坐标的点 $x_1, x_2, \\ldots, x_n$。保证对于所有 $1\\le i\\le n$ 都有 $1\\le x_i\\le n$。\n\n当且仅当点 $x_k$ 位于由点 $x_i$ 和 $x_j$ 构成的线段上时，我们称点 $x_k$ 在点 $x_i$ 和 $x_j$ 之间。形式化地说，点 $x_k$ 在点 $x_i$ 和 $x_j$ 之间当且仅当 $x_i \\leq x_k \\leq x_j$ 或 $x_j \\leq x_k \\leq x_i$。\n\n你需要找到任意两个下标 $i$ 和 $j$，使得所有 $n$ 个点都位于点 $x_i$ 和 $x_j$ 之间。\n\n你可以使用以下查询：选择三个下标 ($i$, $j$, $k$) 并查询点 $x_k$ 是否在点 $x_i$ 和 $x_j$ 之间。\n\n你最多可以使用 $22222$ 次查询。\n\n保证点的坐标在交互开始前就已固定。换句话说，**交互器不是自适应的**。", "inputFormat": "第一行包含一个整数 $n$ ($3 \\le n \\le 2 \\cdot 10^4$) —— 点的数量。\n", "outputFormat": "要发起查询，请输出 \"$\\tt{?}$ $i$ $j$ $k$\" ($1 \\le i, j, k \\le n$)，然后输出换行符并执行 $\\tt{flush}$ 操作。\n\n作为查询的响应，评测程序将输出一个整数 $f$ ($f \\in \\{0,1\\}$)。如果 $f = 1$，表示点 $x_k$ 在点 $x_i$ 和 $x_j$ 之间；如果 $f = 0$，则表示不在。\n\n如果查询无效（即超过最大查询次数或查询参数无效），评测程序将输出 $\\texttt{-1}$ 并终止。此时，程序应立即终止，否则会被判为 $\\tt{Wrong Answer}$。\n\n当你准备好给出答案时，请以 \"$\\tt{!}$ $i$ $j$\" ($1 \\leq i, j \\leq n$) 的格式输出，其中 $i$ 和 $j$ 是所求点的下标。输出后终止程序。\n\n$\\tt{flush}$ 操作的具体实现方式如下：\n\n- C++：$\\texttt{fflush(stdout)}$ 或 $\\texttt{cout.flush()}$；\n- Java：$\\texttt{System.out.flush()}$；\n- Pascal：$\\texttt{flush(output)}$；\n- Python：$\\texttt{sys.stdout.flush()}$。\n\n可以参考给出的模板代码。", "hint": "|4||\n|:-:|:-:|\n||? 1 4 2|\n|1||\n||? 1 4 3|\n|1||\n||! 1 4|\n\n在示例中，点的坐标为 $x = [1, 2, 3, 4]$。\n\n### 评分标准\n\n- （$17$ 分）：$n \\le 20$；\n- （$16$ 分）：$n \\le 100$；\n- （$30$ 分）：$n \\le 10000$；\n- （$23$ 分）：$n \\le 20000$，$x_i \\le 2$；\n- （$10$ 分）：$n \\le 12000$；\n- （$4$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12553", "type": "P", "difficulty": 6, "samples": [["4\nabaaaaaaaaaa\nbaaaaaaaaaaa\naaaaaaaaaaaa\ncccccccccccc", "abac\n2 3 3 4"], ["3\naxaxaxaxa\nxxxxxxxxx\n?", "axx\n3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2024] Lady's Gift", "background": "", "description": "On her birthday, Lady received a gift --- a network. The network contains $n$ nodes, numbered with integers from $1$ to $n$. Each node is assigned a specific letter, denoted as $s_i$ for the node with number $i$.\n\nThere are one-way connections between some pairs of nodes. Each node has exactly one outgoing one-way connection. Let the connection for the node with number $i$ lead to the node with number $x_i$. Note that $x_i$ can be equal to $i$ --- in this case, it is considered that the connection from the node with number $i$ leads to the same node.\n\nLet $p_{i,0} = i$ and $p_{i,k} = p_{x_i,k-1}$. Thus, $p_{i,k}$ is the number of the node where a chip will end up if it is placed in the node with number $i$ and moved along the connection from the current node $k$ times.\n\nLady created a matrix $a$ of size $n\\times (3\\cdot n)$, where $a_{i,j} = s_{p_{i,j-1}}$. Thus, the $i$-th row of the matrix $a$ is a sequence of $3\\cdot n$ letters, where the first letter equals $s_i$, the second letter equals $s_{x_i}$, the third equals $s_{x_{x_i}}$, and so on.\n\nLady informed some rows of the matrix $a$ and asks you to construct any network that corresponds to the known rows of the matrix $a$.", "inputFormat": "The first line contains a single integer $n$ $(1 \\leq n \\leq 2\\cdot{10}^3)$ --- the number of nodes in the network.\n\nThe next $n$ lines describe the matrix $a$. Each of these lines contains $3\\cdot n$ lowercase Latin letters, representing the corresponding row of matrix $a$, or a single symbol $\\tt{?}$ if Lady did not inform the corresponding row.\n\nIt is guaranteed that there exists at least one network that satisfies the given conditions.", "outputFormat": "In the first line, output a string $s$ consisting of $n$ lowercase Latin letters --- the letters written on the nodes of the network.\n\nIn the second line, output $n$ integers $x_1, x_2, \\ldots, x_n$ $(1 \\leq x_i \\leq n)$ --- the numbers of the nodes to which the connections from the corresponding nodes lead.\n\nThe matrix corresponding to this network must be exactly equal to the matrix $a$ in all rows that Lady informed.\n\nIf there are multiple correct answers, you are allowed to output any of them.", "hint": "In the first example, $x_1 = 2$ and $x_2 = 3$, so $p_{1,0}=1, p_{1,1}=2, p_{1,2}=3$. Since $x_3=3$, all $p_{1,k}$ for $k\\geq3$ are also equal to $3$. Accordingly, the second letter of the first row equals $s_2$, and the third equals $s_3$.\n\nBelow are the images of networks from the examples. The numbers in the corners indicate the node numbers, the letters indicate the values written on the corresponding nodes, and the arrows indicate the one-way connections.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wmj4b1ho.png)\n\nNetwork from the first example\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cu6d4xto.png)\n\nNetwork from the second example\n\n### Scoring\n\nLet $q$ be the number of rows that Lady did not inform.\n\nWe call a network a set of pairs and unit nodes if the network can be divided into nodes, from which the connection leads to itself (i.e., $x_v = v$), and pairs of nodes $(a,b)$ such that $x_a=b$ and $x_b=a$.\n\nWe call a network a set of stars if the network can be divided into separate ``stars``, each of which consists of a main node $v$, from which the connection leads to itself (i.e., $x_v = v$), and a set of secondary nodes $y=\\{y_1, y_2, \\ldots, y_k\\}$ such that $x_{y_i}=v$ for $1 \\leq i \\leq k$. Note that the stars in the network may have different sizes and consist only of one main node.\n\nWe call a network a tree with the root at node $v$ if from node $v$ the connection leads to itself (i.e., $x_v = v$), and for each other node it is possible to reach node $v$ using the network connections (i.e., for each $1 \\leq i \\leq n$ there is such $k$ that $p_{i,k}=v$).\n\nWe call a network a cycle if starting from any node it is possible to reach any other node using the network connections (i.e., for all $1 \\leq i,j \\leq n$ there is such $k$ that $p_{i,k}=j$).\n\n- ($10$ points): $n \\leq 5$, $q = 0$;\n- ($6$ points): $n \\leq 300$, $q = 0$, $x_{x_i}=i$ for $1\\le i\\le n$ (the network is a set of pairs and unit nodes);\n- ($6$ points): $n \\leq 300$, $q = 0$, $x_{x_i}=x_i$ for $1\\le i\\le n$ (the network is a set of stars);\n- ($9$ points): $n \\leq 300$, $q = 0$, $x_1=1$ and $x_i<i$ for $2\\le i \\le n$ (the network is a tree with the root at node $1$);\n- ($9$ points): $n \\leq 300$, $q = 0$, for all $1 \\leq i,j \\leq n$ there is such $k$ that $p_{i,k}=j$ (the network is a cycle);\n- ($13$ points): $n \\leq 300$, $q = 0$;\n- ($25$ points): $n \\leq 300$;\n- ($10$ points): $n \\leq 2\\cdot{10}^3$, $q = 0$;\n- ($12$ points): without additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Lady's Gift", "background": "", "description": "On her birthday, Lady received a gift --- a network. The network contains $n$ nodes, numbered with integers from $1$ to $n$. Each node is assigned a specific letter, denoted as $s_i$ for the node with number $i$.\n\nThere are one-way connections between some pairs of nodes. Each node has exactly one outgoing one-way connection. Let the connection for the node with number $i$ lead to the node with number $x_i$. Note that $x_i$ can be equal to $i$ --- in this case, it is considered that the connection from the node with number $i$ leads to the same node.\n\nLet $p_{i,0} = i$ and $p_{i,k} = p_{x_i,k-1}$. Thus, $p_{i,k}$ is the number of the node where a chip will end up if it is placed in the node with number $i$ and moved along the connection from the current node $k$ times.\n\nLady created a matrix $a$ of size $n\\times (3\\cdot n)$, where $a_{i,j} = s_{p_{i,j-1}}$. Thus, the $i$-th row of the matrix $a$ is a sequence of $3\\cdot n$ letters, where the first letter equals $s_i$, the second letter equals $s_{x_i}$, the third equals $s_{x_{x_i}}$, and so on.\n\nLady informed some rows of the matrix $a$ and asks you to construct any network that corresponds to the known rows of the matrix $a$.", "inputFormat": "The first line contains a single integer $n$ $(1 \\leq n \\leq 2\\cdot{10}^3)$ --- the number of nodes in the network.\n\nThe next $n$ lines describe the matrix $a$. Each of these lines contains $3\\cdot n$ lowercase Latin letters, representing the corresponding row of matrix $a$, or a single symbol $\\tt{?}$ if Lady did not inform the corresponding row.\n\nIt is guaranteed that there exists at least one network that satisfies the given conditions.", "outputFormat": "In the first line, output a string $s$ consisting of $n$ lowercase Latin letters --- the letters written on the nodes of the network.\n\nIn the second line, output $n$ integers $x_1, x_2, \\ldots, x_n$ $(1 \\leq x_i \\leq n)$ --- the numbers of the nodes to which the connections from the corresponding nodes lead.\n\nThe matrix corresponding to this network must be exactly equal to the matrix $a$ in all rows that Lady informed.\n\nIf there are multiple correct answers, you are allowed to output any of them.", "hint": "In the first example, $x_1 = 2$ and $x_2 = 3$, so $p_{1,0}=1, p_{1,1}=2, p_{1,2}=3$. Since $x_3=3$, all $p_{1,k}$ for $k\\geq3$ are also equal to $3$. Accordingly, the second letter of the first row equals $s_2$, and the third equals $s_3$.\n\nBelow are the images of networks from the examples. The numbers in the corners indicate the node numbers, the letters indicate the values written on the corresponding nodes, and the arrows indicate the one-way connections.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wmj4b1ho.png)\n\nNetwork from the first example\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cu6d4xto.png)\n\nNetwork from the second example\n\n### Scoring\n\nLet $q$ be the number of rows that Lady did not inform.\n\nWe call a network a set of pairs and unit nodes if the network can be divided into nodes, from which the connection leads to itself (i.e., $x_v = v$), and pairs of nodes $(a,b)$ such that $x_a=b$ and $x_b=a$.\n\nWe call a network a set of stars if the network can be divided into separate ``stars``, each of which consists of a main node $v$, from which the connection leads to itself (i.e., $x_v = v$), and a set of secondary nodes $y=\\{y_1, y_2, \\ldots, y_k\\}$ such that $x_{y_i}=v$ for $1 \\leq i \\leq k$. Note that the stars in the network may have different sizes and consist only of one main node.\n\nWe call a network a tree with the root at node $v$ if from node $v$ the connection leads to itself (i.e., $x_v = v$), and for each other node it is possible to reach node $v$ using the network connections (i.e., for each $1 \\leq i \\leq n$ there is such $k$ that $p_{i,k}=v$).\n\nWe call a network a cycle if starting from any node it is possible to reach any other node using the network connections (i.e., for all $1 \\leq i,j \\leq n$ there is such $k$ that $p_{i,k}=j$).\n\n- ($10$ points): $n \\leq 5$, $q = 0$;\n- ($6$ points): $n \\leq 300$, $q = 0$, $x_{x_i}=i$ for $1\\le i\\le n$ (the network is a set of pairs and unit nodes);\n- ($6$ points): $n \\leq 300$, $q = 0$, $x_{x_i}=x_i$ for $1\\le i\\le n$ (the network is a set of stars);\n- ($9$ points): $n \\leq 300$, $q = 0$, $x_1=1$ and $x_i<i$ for $2\\le i \\le n$ (the network is a tree with the root at node $1$);\n- ($9$ points): $n \\leq 300$, $q = 0$, for all $1 \\leq i,j \\leq n$ there is such $k$ that $p_{i,k}=j$ (the network is a cycle);\n- ($13$ points): $n \\leq 300$, $q = 0$;\n- ($25$ points): $n \\leq 300$;\n- ($10$ points): $n \\leq 2\\cdot{10}^3$, $q = 0$;\n- ($12$ points): without additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Lady's Gift", "background": "", "description": "在生日那天，女士收到了一份礼物——一个网络。该网络包含 $n$ 个节点，编号为从 $1$ 到 $n$ 的整数。每个节点被分配了一个特定的字母，编号为 $i$ 的节点对应的字母记为 $s_i$。\n\n某些节点对之间存在单向连接。每个节点恰好有一个出向的单向连接。设编号为 $i$ 的节点的连接指向编号为 $x_i$ 的节点。注意 $x_i$ 可以等于 $i$ —— 在这种情况下，认为编号为 $i$ 的节点的连接指向它自身。\n\n定义 $p_{i,0} = i$ 且 $p_{i,k} = p_{x_i,k-1}$。因此，$p_{i,k}$ 表示如果将一枚棋子放在编号为 $i$ 的节点上，并沿着连接移动 $k$ 次后所在的节点编号。\n\n女士构造了一个大小为 $n \\times (3 \\cdot n)$ 的矩阵 $a$，其中 $a_{i,j} = s_{p_{i,j-1}}$。因此，矩阵 $a$ 的第 $i$ 行是一个长度为 $3 \\cdot n$ 的字母序列，其中第一个字母等于 $s_i$，第二个字母等于 $s_{x_i}$，第三个字母等于 $s_{x_{x_i}}$，依此类推。\n\n女士告知了矩阵 $a$ 的某些行，并要求你构造任意一个与已知行相符的网络。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 2 \\cdot 10^3)$ —— 网络中的节点数量。\n\n接下来的 $n$ 行描述矩阵 $a$。每行包含 $3 \\cdot n$ 个小写拉丁字母，表示矩阵 $a$ 的对应行；或者仅包含一个符号 ?，表示女士未告知该行。\n\n保证至少存在一个满足条件的网络。", "outputFormat": "在第一行，输出一个由 $n$ 个小写拉丁字母组成的字符串 $s$ —— 网络中节点上写的字母。\n\n在第二行，输出 $n$ 个整数 $x_1, x_2, \\ldots, x_n$ $(1 \\leq x_i \\leq n)$ —— 各节点的出向连接指向的节点编号。\n\n所构造的网络对应的矩阵必须与女士告知的矩阵 $a$ 在所有已知行上完全一致。\n\n如果存在多个正确答案，输出任意一个即可。", "hint": "在第一个例子中，$x_1 = 2$ 且 $x_2 = 3$，因此 $p_{1,0}=1$，$p_{1,1}=2$，$p_{1,2}=3$。由于 $x_3=3$，对于所有 $k \\geq 3$ 的 $p_{1,k}$ 也等于 $3$。相应地，第一行的第二个字母等于 $s_2$，第三个字母等于 $s_3$。\n\n下方是示例中的网络图示。角落的数字表示节点编号，字母表示对应节点上的字母，箭头表示单向连接。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wmj4b1ho.png)\n\n第一个示例的网络\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cu6d4xto.png)\n\n第二个示例的网络\n\n### 评分标准\n\n设 $q$ 为女士未告知的行数。\n\n我们称一个网络为\"成对节点和孤立节点的集合\"，如果该网络可以被划分为：1) 连接指向自身的节点（即 $x_v = v$）；2) 成对的节点 $(a,b)$ 满足 $x_a=b$ 且 $x_b=a$。\n\n我们称一个网络为\"星型结构集合\"，如果该网络可以被划分为若干个独立的\"星型结构\"，每个星型结构包含：1) 一个主节点 $v$（满足 $x_v = v$）；2) 一组从节点 $y=\\{y_1, y_2, \\ldots, y_k\\}$（满足 $x_{y_i}=v$ 对 $1 \\leq i \\leq k$ 成立）。注意网络中的星型结构可以有不同的尺寸，甚至可以仅包含一个主节点。\n\n我们称一个网络为\"以节点 $v$ 为根的树形结构\"，如果：1) 节点 $v$ 的连接指向自身（即 $x_v = v$）；2) 其他所有节点都能通过网络连接到达节点 $v$（即对每个 $1 \\leq i \\leq n$ 都存在 $k$ 使得 $p_{i,k}=v$）。\n\n我们称一个网络为\"环形结构\"，如果从任意节点出发都能通过网络连接到达其他所有节点（即对所有 $1 \\leq i,j \\leq n$ 都存在 $k$ 使得 $p_{i,k}=j$）。\n\n评分细则如下：\n- （10 分）：$n \\leq 5$，$q = 0$；\n- （6 分）：$n \\leq 300$，$q = 0$，且对所有 $1\\le i\\le n$ 有 $x_{x_i}=i$（网络是成对节点和孤立节点的集合）；\n- （6 分）：$n \\leq 300$，$q = 0$，且对所有 $1\\le i\\le n$ 有 $x_{x_i}=x_i$（网络是星型结构集合）；\n- （9 分）：$n \\leq 300$，$q = 0$，且 $x_1=1$，对所有 $2\\le i \\le n$ 有 $x_i<i$（网络是以节点 1 为根的树形结构）；\n- （9 分）：$n \\leq 300$，$q = 0$，且对所有 $1 \\leq i,j \\leq n$ 都存在 $k$ 使得 $p_{i,k}=j$（网络是环形结构）；\n- （13 分）：$n \\leq 300$，$q = 0$；\n- （25 分）：$n \\leq 300$；\n- （10 分）：$n \\leq 2\\cdot{10}^3$，$q = 0$；\n- （12 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12554", "type": "P", "difficulty": 6, "samples": [["6 4\n1 -3 4 2 -5 6\n1 1 6\n1 2 3\n1 2 5\n1 1 1", "5\n3\n3\n1"], ["5 6\n1 -2 3 -4 5\n1 1 4\n1 2 3\n2 3 -6\n1 2 4\n2 4 2\n1 1 5", "2\n2\n12\n7"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "UOI（乌克兰）"], "title": "[UOI 2024] Queries for Subarray Beauty", "background": "", "description": "Let's call the **weight** of an array of integers $b$ of length $m$ the absolute value of the sum of its elements, i.e., $|b_1+b_2+...+b_m|$.\n\nWe define the **beauty** of a partition of array $c$ into several subarrays as the minimum **weight** among the **weights** of the subarrays. Formally, the **beauty** of a partition of array $c$ into $k$ subarrays $[c_1,\\ldots,c_{p_1}],[c_{p_1+1},\\ldots,c_{p_2}],\\ldots,[c_{p_{k-1}+1},\\ldots,c_{p_k}]$, where $1 \\leq p_1 < p_2 < \\ldots < p_{k-1} < p_k = n$, is the value $\\min(|c_1+\\ldots+c_{p_1}|,|c_{p_1+1}+\\ldots+c_{p_2}|,\\ldots,|c_{p_{k-1}+1}+\\ldots+c_{p_k}|)$. For example, the partition of the array $[3,-6,4,5,-8]$ into subarrays $[3,-6],[4],[5,-8]$ has a **beauty** of $\\min(|3+(-6)|,|4|,|5+(-8)|)=\\min(3,4,3)=3$.\n\nWe define the **beauty** of an array $c$ as the maximum **beauty** among all possible partitions into subarrays.\n\nAn array of integers $a$ of length $n$ is given.\n\nYou need to perform $q$ queries. The queries can be of two types:\n\n- find the **beauty** of the subarray consisting of elements $[a_{l},a_{l+1},\\ldots,a_r]$, where ($l$, $r$) are the query parameters;\n- replace the element $a_x$ with $v$, where ($x$, $v$) are the query parameters.", "inputFormat": "The first line contains two integers $n$, $q$ ($1\\le n, q\\le 10^6$) --- the length of array $a$ and the number of queries, respectively.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9)$ --- the elements of array $a$.\n\nThe next $q$ lines contain three integers each. The first of the numbers, $type_i$ ($1 \\le type_i \\le 2$), denotes the type of the query. Queries of the first type are given in the format \"$\\texttt{1 l r}$\" ($1\\le l\\le r\\le n$), and queries of the second type are given in the format \"$\\texttt{2 x v}$\" ($1\\le x\\le n,$ $-10^9\\le v\\le 10^9$).", "outputFormat": "For each query of the first type, output a single integer --- the **beauty** of the corresponding subarray.", "hint": "In the first example, for the third query, the maximum beauty of the partition of the array $[-3,4,2,-5]$ is achieved when partitioned into subarrays $[-3],[4,2],[-5]$.\n\nIn the second example, for the first query, the maximum beauty of the partition of the array $[1,-2,3,-4]$ is achieved when partitioned into subarrays $[1,-2,3],[-4]$.\n\n### Scoring\n\n- ($4$ points): $type_i = 1$ for $1\\le i\\le q$; $a_i > 0$ for $1\\le i\\le n$;\n- ($14$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 1000$;\n- ($10$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 2 \\cdot 10^5$, for each query there exists an optimal division into no more than $2$ subarrays;\n- ($10$ points): $type_i = 1$ for $1\\le i\\le q$; $q \\le n \\le 2 \\cdot 10^5$, $l_i = 1$, $r_i = i$ for $1\\le i\\le q$;\n- ($11$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 2 \\cdot 10^5$, $-5 \\le \\sum\\limits_{j=1}^{i} a_j \\le 5$ for $1\\le i\\le n$;\n- ($18$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 2 \\cdot 10^5$;\n- ($9$ points): $type_i = 1$ for $1\\le i\\le q$;\n- ($16$ points): $n,q \\le 2 \\cdot 10^5$;\n- ($8$ points): without additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Queries for Subarray Beauty", "background": "", "description": "Let's call the **weight** of an array of integers $b$ of length $m$ the absolute value of the sum of its elements, i.e., $|b_1+b_2+...+b_m|$.\n\nWe define the **beauty** of a partition of array $c$ into several subarrays as the minimum **weight** among the **weights** of the subarrays. Formally, the **beauty** of a partition of array $c$ into $k$ subarrays $[c_1,\\ldots,c_{p_1}],[c_{p_1+1},\\ldots,c_{p_2}],\\ldots,[c_{p_{k-1}+1},\\ldots,c_{p_k}]$, where $1 \\leq p_1 < p_2 < \\ldots < p_{k-1} < p_k = n$, is the value $\\min(|c_1+\\ldots+c_{p_1}|,|c_{p_1+1}+\\ldots+c_{p_2}|,\\ldots,|c_{p_{k-1}+1}+\\ldots+c_{p_k}|)$. For example, the partition of the array $[3,-6,4,5,-8]$ into subarrays $[3,-6],[4],[5,-8]$ has a **beauty** of $\\min(|3+(-6)|,|4|,|5+(-8)|)=\\min(3,4,3)=3$.\n\nWe define the **beauty** of an array $c$ as the maximum **beauty** among all possible partitions into subarrays.\n\nAn array of integers $a$ of length $n$ is given.\n\nYou need to perform $q$ queries. The queries can be of two types:\n\n- find the **beauty** of the subarray consisting of elements $[a_{l},a_{l+1},\\ldots,a_r]$, where ($l$, $r$) are the query parameters;\n- replace the element $a_x$ with $v$, where ($x$, $v$) are the query parameters.", "inputFormat": "The first line contains two integers $n$, $q$ ($1\\le n, q\\le 10^6$) --- the length of array $a$ and the number of queries, respectively.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9)$ --- the elements of array $a$.\n\nThe next $q$ lines contain three integers each. The first of the numbers, $type_i$ ($1 \\le type_i \\le 2$), denotes the type of the query. Queries of the first type are given in the format \"$\\texttt{1 l r}$\" ($1\\le l\\le r\\le n$), and queries of the second type are given in the format \"$\\texttt{2 x v}$\" ($1\\le x\\le n,$ $-10^9\\le v\\le 10^9$).", "outputFormat": "For each query of the first type, output a single integer --- the **beauty** of the corresponding subarray.", "hint": "In the first example, for the third query, the maximum beauty of the partition of the array $[-3,4,2,-5]$ is achieved when partitioned into subarrays $[-3],[4,2],[-5]$.\n\nIn the second example, for the first query, the maximum beauty of the partition of the array $[1,-2,3,-4]$ is achieved when partitioned into subarrays $[1,-2,3],[-4]$.\n\n### Scoring\n\n- ($4$ points): $type_i = 1$ for $1\\le i\\le q$; $a_i > 0$ for $1\\le i\\le n$;\n- ($14$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 1000$;\n- ($10$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 2 \\cdot 10^5$, for each query there exists an optimal division into no more than $2$ subarrays;\n- ($10$ points): $type_i = 1$ for $1\\le i\\le q$; $q \\le n \\le 2 \\cdot 10^5$, $l_i = 1$, $r_i = i$ for $1\\le i\\le q$;\n- ($11$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 2 \\cdot 10^5$, $-5 \\le \\sum\\limits_{j=1}^{i} a_j \\le 5$ for $1\\le i\\le n$;\n- ($18$ points): $type_i = 1$ for $1\\le i\\le q$; $n,q \\le 2 \\cdot 10^5$;\n- ($9$ points): $type_i = 1$ for $1\\le i\\le q$;\n- ($16$ points): $n,q \\le 2 \\cdot 10^5$;\n- ($8$ points): without additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Queries for Subarray Beauty", "background": "", "description": "我们定义一个长度为 $m$ 的整数数组 $b$ 的**权值**为其元素和的绝对值，即 $|b_1+b_2+...+b_m|$。\n\n我们定义将数组 $c$ 划分为若干子数组的**优美值**为所有子数组**权值**中的最小值。形式化地说，将数组 $c$ 划分为 $k$ 个子数组 $[c_1,\\ldots,c_{p_1}],[c_{p_1+1},\\ldots,c_{p_2}],\\ldots,[c_{p_{k-1}+1},\\ldots,c_{p_k}]$（其中 $1 \\leq p_1 < p_2 < \\ldots < p_{k-1} < p_k = n$）的**优美值**为 $\\min(|c_1+\\ldots+c_{p_1}|,|c_{p_1+1}+\\ldots+c_{p_2}|,\\ldots,|c_{p_{k-1}+1}+\\ldots+c_{p_k}|)$。例如，将数组 $[3,-6,4,5,-8]$ 划分为子数组 $[3,-6],[4],[5,-8]$ 的**优美值**为 $\\min(|3+(-6)|,|4|,|5+(-8)|)=\\min(3,4,3)=3$。\n\n我们定义数组 $c$ 的**优美值**为所有可能子数组划分中的最大**优美值**。\n\n给定一个长度为 $n$ 的整数数组 $a$。\n\n你需要处理 $q$ 次查询。查询有两种类型：\n\n- 查询由元素 $[a_{l},a_{l+1},\\ldots,a_r]$ 组成的子数组的**优美值**，其中 $(l, r)$ 为查询参数；\n- 将元素 $a_x$ 替换为 $v$，其中 $(x, v)$ 为查询参数。", "inputFormat": "第一行包含两个整数 $n$, $q$ ($1\\le n, q\\le 10^6$) —— 分别表示数组 $a$ 的长度和查询次数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9$) —— 数组 $a$ 的元素。\n\n接下来的 $q$ 行每行包含三个整数。第一个数 $type_i$ ($1 \\le type_i \\le 2$) 表示查询类型。类型 1 的查询格式为 \"$\\texttt{1 l r}$\" ($1\\le l\\le r\\le n$)，类型 2 的查询格式为 \"$\\texttt{2 x v}$\" ($1\\le x\\le n,$ $-10^9\\le v\\le 10^9$)。\n", "outputFormat": "对于每个类型 1 的查询，输出一个整数 —— 对应子数组的**优美值**。", "hint": "在第一个示例中，对于第三个查询，数组 $[-3,4,2,-5]$ 的最大优美值划分方案为 $[-3],[4,2],[-5]$。\n\n在第二个示例中，对于第一个查询，数组 $[1,-2,3,-4]$ 的最大优美值划分方案为 $[1,-2,3],[-4]$。\n\n### 评分标准\n\n- （4 分）：所有查询 $type_i = 1$；且 $a_i > 0$ 对所有 $1\\le i\\le n$ 成立；\n- （14 分）：所有查询 $type_i = 1$；且 $n,q \\le 1000$；\n- （10 分）：所有查询 $type_i = 1$；且 $n,q \\le 2 \\cdot 10^5$，每个查询存在不超过 2 个子数组的最优划分；\n- （10 分）：所有查询 $type_i = 1$；且 $q \\le n \\le 2 \\cdot 10^5$，$l_i = 1$，$r_i = i$ 对所有 $1\\le i\\le q$ 成立；\n- （11 分）：所有查询 $type_i = 1$；且 $n,q \\le 2 \\cdot 10^5$，$-5 \\le \\sum\\limits_{j=1}^{i} a_j \\le 5$ 对所有 $1\\le i\\le n$ 成立；\n- （18 分）：所有查询 $type_i = 1$；且 $n,q \\le 2 \\cdot 10^5$；\n- （9 分）：所有查询 $type_i = 1$；\n- （16 分）：$n,q \\le 2 \\cdot 10^5$；\n- （8 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12555", "type": "P", "difficulty": 6, "samples": [["5 3\n0 2 1 3 4", "23 20 16 14 10"], ["3 2\n1 3 2", "4 3 3"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "UOI（乌克兰）"], "title": "[UOI 2024] AND Array", "background": "", "description": "An integer $b$ and an array of non-negative integers $a_1,a_2,\\ldots,a_n$ are given. All elements of the array $a$ are less than $2^b$.\n\nLet's define $f(s, p)$ ($1\\le s\\le n$, $0\\le p < b$) as the result of the following pseudocode:\n\n```\nres = 0\nx = power(2, p)\nfor i = s to n:\n    if ((x AND a[i]) == 0):\n        x = (x OR a[i])\n        res = res + i\nreturn res\n```\n\nHere, ``power(2, p)`` denotes $2^p$, ``AND`` denotes the bitwise $\\textit{AND}$ operation, and ``OR`` denotes the bitwise $\\textit{OR}$ operation.\n\nThe bitwise $\\textit{AND}$ of non-negative integers $a$ and $b$ is equal to a non-negative integer, in which the binary representation has a one at a certain position only if both binary representations of $a$ and $b$ have ones at that position. For example, $3_{10}$ AND $5_{10} = 0011_{2}$ AND $0101_{2} = 0001_{2} = 1_{10}$.\n\nThe bitwise $\\textit{OR}$ of non-negative integers $a$ and $b$ is equal to a non-negative integer, in which the binary representation has a zero at a certain position only if both binary representations of $a$ and $b$ have zeros at that position. For example, $3_{10}$ OR $5_{10} = 0011_{2}$ OR $0101_{2} = 0111_{2} = 7_{10}$.\n\nFor each $i$ from $1$ to $n$, find\n\n$$f(i,0) + f(i, 1) + \\ldots + f(i, b-1)$$", "inputFormat": "The first line contains two integers $n$ and $b$ ($1 \\leq n \\leq 10^5$, $1 \\leq b \\leq 20$) --- the length of array $a$ and the limit on the elements of the array, respectively.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($0 \\leq a_i < 2^b$) --- the elements of array $a$.", "outputFormat": "Output $n$ integers --- the required values.", "hint": "In the first example, $f(1,0)=1+2+5=8$, $f(1,1)=1+3+5=9$, $f(1,2)=1+2+3=6$, and the first of the required values is equal to $8+9+6 = 23$.\n\n### Scoring\n\n- ($10$ points): $n \\leq 2\\,000$;\n- ($10$ points): $a_i = 2^k$, where $k$ is an integer;\n- ($15$ points): $b \\leq 8$;\n- ($15$ points): $b \\leq 12$;\n- ($25$ points): $b \\leq 16$;\n- ($25$ points): without additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] AND Array", "background": "", "description": "An integer $b$ and an array of non-negative integers $a_1,a_2,\\ldots,a_n$ are given. All elements of the array $a$ are less than $2^b$.\n\nLet's define $f(s, p)$ ($1\\le s\\le n$, $0\\le p < b$) as the result of the following pseudocode:\n\n```\nres = 0\nx = power(2, p)\nfor i = s to n:\n    if ((x AND a[i]) == 0):\n        x = (x OR a[i])\n        res = res + i\nreturn res\n```\n\nHere, ``power(2, p)`` denotes $2^p$, ``AND`` denotes the bitwise $\\textit{AND}$ operation, and ``OR`` denotes the bitwise $\\textit{OR}$ operation.\n\nThe bitwise $\\textit{AND}$ of non-negative integers $a$ and $b$ is equal to a non-negative integer, in which the binary representation has a one at a certain position only if both binary representations of $a$ and $b$ have ones at that position. For example, $3_{10}$ AND $5_{10} = 0011_{2}$ AND $0101_{2} = 0001_{2} = 1_{10}$.\n\nThe bitwise $\\textit{OR}$ of non-negative integers $a$ and $b$ is equal to a non-negative integer, in which the binary representation has a zero at a certain position only if both binary representations of $a$ and $b$ have zeros at that position. For example, $3_{10}$ OR $5_{10} = 0011_{2}$ OR $0101_{2} = 0111_{2} = 7_{10}$.\n\nFor each $i$ from $1$ to $n$, find\n\n$$f(i,0) + f(i, 1) + \\ldots + f(i, b-1)$$", "inputFormat": "The first line contains two integers $n$ and $b$ ($1 \\leq n \\leq 10^5$, $1 \\leq b \\leq 20$) --- the length of array $a$ and the limit on the elements of the array, respectively.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($0 \\leq a_i < 2^b$) --- the elements of array $a$.", "outputFormat": "Output $n$ integers --- the required values.", "hint": "In the first example, $f(1,0)=1+2+5=8$, $f(1,1)=1+3+5=9$, $f(1,2)=1+2+3=6$, and the first of the required values is equal to $8+9+6 = 23$.\n\n### Scoring\n\n- ($10$ points): $n \\leq 2\\,000$;\n- ($10$ points): $a_i = 2^k$, where $k$ is an integer;\n- ($15$ points): $b \\leq 8$;\n- ($15$ points): $b \\leq 12$;\n- ($25$ points): $b \\leq 16$;\n- ($25$ points): without additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] AND Array", "background": "", "description": "给定一个整数 $b$ 和一个非负整数数组 $a_1,a_2,\\ldots,a_n$。数组 $a$ 的所有元素都小于 $2^b$。\n\n定义 $f(s, p)$ ($1\\le s\\le n$, $0\\le p < b$) 为以下伪代码的执行结果：\n\n```\nres = 0\nx = power(2, p)\nfor i = s to n:\n    if ((x AND a[i]) == 0):\n        x = (x OR a[i])\n        res = res + i\nreturn res\n```\n\n其中，``power(2, p)`` 表示 $2^p$，``AND`` 表示按位与运算，``OR`` 表示按位或运算。\n\n非负整数 $a$ 和 $b$ 的按位与运算结果是一个非负整数，其二进制表示中某一位为 1 当且仅当 $a$ 和 $b$ 的二进制表示在该位都为 1。例如，$3_{10}$ AND $5_{10} = 0011_{2}$ AND $0101_{2} = 0001_{2} = 1_{10}$。\n\n非负整数 $a$ 和 $b$ 的按位或运算结果是一个非负整数，其二进制表示中某一位为 0 当且仅当 $a$ 和 $b$ 的二进制表示在该位都为 0。例如，$3_{10}$ OR $5_{10} = 0011_{2}$ OR $0101_{2} = 0111_{2} = 7_{10}$。\n\n对于每个 $i$ 从 $1$ 到 $n$，计算\n\n$$f(i,0) + f(i, 1) + \\ldots + f(i, b-1)$$", "inputFormat": "第一行包含两个整数 $n$ 和 $b$ ($1 \\leq n \\leq 10^5$, $1 \\leq b \\leq 20$) —— 分别表示数组 $a$ 的长度和数组元素的限制。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($0 \\leq a_i < 2^b$) —— 数组 $a$ 的元素。\n", "outputFormat": "输出 $n$ 个整数 —— 要求的计算结果。\n", "hint": "在第一个示例中，$f(1,0)=1+2+5=8$，$f(1,1)=1+3+5=9$，$f(1,2)=1+2+3=6$，因此第一个要求的值为 $8+9+6 = 23$。\n\n### 评分标准\n\n- （10 分）：$n \\leq 2\\,000$；\n- （10 分）：$a_i = 2^k$，其中 $k$ 为整数；\n- （15 分）：$b \\leq 8$；\n- （15 分）：$b \\leq 12$；\n- （25 分）：$b \\leq 16$；\n- （25 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12556", "type": "P", "difficulty": 5, "samples": [["3 3\n3 4\nRRR\nRRR\nRRR", "RGR\nGRG\nRGR\n"], ["3 2\n2 3\nRG\nGG\nGR", "RG\nGR\nRG"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2024] Colorful Table", "background": "", "description": "You are given a table $a$ of size $n \\times m$, consisting of symbols $\\tt{R}$, $\\tt{G}$, $\\tt{B}$.\n\nAlso, given are integers $c$ ($2 \\leq c \\leq 3$) and $q$, where $c$ is the number of different symbols that can appear in the table. If $c$ equals $2$, only the symbols $\\tt{R}$ and $\\tt{G}$ are available; if $c$ equals $3$, the symbols $\\tt{R}$, $\\tt{G}$, $\\tt{B}$ are available.\n\nYou need to change the values of at most $q$ elements of the table so that there are no pairs of neighboring cells with the same value. Note that if $c=2$, using the symbol $\\tt{B}$ when changing the values of the table cells is prohibited.\n\nIt is guaranteed that under the given constraints, there is a way to change the values of at most $q$ elements of the table so that there are no pairs of neighboring cells with the same value.\n\n**Note that there are no additional constraints in the problem.**", "inputFormat": "The first line contains two integers $n$ and $m$ ($1 \\leq n, m \\leq 100$) --- the number of rows and columns of the table $a$ respectively.\n\nThe second line contains two integers $c$ ($2 \\leq c \\leq 3$) and $q$, representing the number of available symbols and the number of allowed changes in the table, respectively.\n\nThe next $n$ lines contain $m$ symbols each --- the elements of the table $a$. If $c=2$, then $a_{ij} \\in $ $\\{\\tt{R}, \\tt{G}\\}$. If $c=3$, then $a_{ij} \\in $ $\\{\\tt{R}, \\tt{G}, \\tt{B}\\}$.", "outputFormat": "Output $n$ lines of $m$ symbols each, describing the table after the changes.\n\nIf there are multiple correct answers, any of them is allowed.", "hint": "### Scoring\n\n- ($7$ points): $n = 1,\\ c = 3,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor $;\n- ($7$ points): $n = 1,\\ c = 2,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($3$ points): $c = 3,\\ q = n \\cdot m$;\n- ($7$ points): all rows of table $a$ are the same, $a[1][j] \\neq a[1][j+1]$ (for $1 \\leq j < m$), $c = 3$, $q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($7$ points): all rows of table $a$ are the same, $c = 3$, $q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($13$ points): $c = 3,\\ q = \\lfloor \\frac{2 \\cdot n \\cdot m}{3} \\rfloor $;\n- ($19$ points): $c = 3,\\ n \\leq 5,\\ m \\leq 100,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($17$ points): $c = 2,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($20$ points): $c = 3,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Colorful Table", "background": "", "description": "You are given a table $a$ of size $n \\times m$, consisting of symbols $\\tt{R}$, $\\tt{G}$, $\\tt{B}$.\n\nAlso, given are integers $c$ ($2 \\leq c \\leq 3$) and $q$, where $c$ is the number of different symbols that can appear in the table. If $c$ equals $2$, only the symbols $\\tt{R}$ and $\\tt{G}$ are available; if $c$ equals $3$, the symbols $\\tt{R}$, $\\tt{G}$, $\\tt{B}$ are available.\n\nYou need to change the values of at most $q$ elements of the table so that there are no pairs of neighboring cells with the same value. Note that if $c=2$, using the symbol $\\tt{B}$ when changing the values of the table cells is prohibited.\n\nIt is guaranteed that under the given constraints, there is a way to change the values of at most $q$ elements of the table so that there are no pairs of neighboring cells with the same value.\n\n**Note that there are no additional constraints in the problem.**", "inputFormat": "The first line contains two integers $n$ and $m$ ($1 \\leq n, m \\leq 100$) --- the number of rows and columns of the table $a$ respectively.\n\nThe second line contains two integers $c$ ($2 \\leq c \\leq 3$) and $q$, representing the number of available symbols and the number of allowed changes in the table, respectively.\n\nThe next $n$ lines contain $m$ symbols each --- the elements of the table $a$. If $c=2$, then $a_{ij} \\in $ $\\{\\tt{R}, \\tt{G}\\}$. If $c=3$, then $a_{ij} \\in $ $\\{\\tt{R}, \\tt{G}, \\tt{B}\\}$.", "outputFormat": "Output $n$ lines of $m$ symbols each, describing the table after the changes.\n\nIf there are multiple correct answers, any of them is allowed.", "hint": "### Scoring\n\n- ($7$ points): $n = 1,\\ c = 3,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor $;\n- ($7$ points): $n = 1,\\ c = 2,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($3$ points): $c = 3,\\ q = n \\cdot m$;\n- ($7$ points): all rows of table $a$ are the same, $a[1][j] \\neq a[1][j+1]$ (for $1 \\leq j < m$), $c = 3$, $q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($7$ points): all rows of table $a$ are the same, $c = 3$, $q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($13$ points): $c = 3,\\ q = \\lfloor \\frac{2 \\cdot n \\cdot m}{3} \\rfloor $;\n- ($19$ points): $c = 3,\\ n \\leq 5,\\ m \\leq 100,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($17$ points): $c = 2,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$;\n- ($20$ points): $c = 3,\\ q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Colorful Table", "background": "", "description": "给定一个大小为 $n \\times m$ 的表格 $a$，其中包含符号 $\\tt{R}$、$\\tt{G}$、$\\tt{B}$。\n\n同时给定整数 $c$（$2 \\leq c \\leq 3$）和 $q$，其中 $c$ 表示表格中可能出现的不同符号的数量。如果 $c$ 等于 $2$，则表格中仅允许出现符号 $\\tt{R}$ 和 $\\tt{G}$；如果 $c$ 等于 $3$，则允许出现符号 $\\tt{R}$、$\\tt{G}$、$\\tt{B}$。\n\n你需要修改表格中最多 $q$ 个元素的值，使得不存在相邻单元格的值相同。注意，如果 $c=2$，则禁止在修改表格单元格时使用符号 $\\tt{B}$。\n\n题目保证在给定的约束条件下，存在一种方法可以通过修改最多 $q$ 个元素的值，使得表格中不存在相邻单元格的值相同。\n\n**注意：题目的各个子任务中，不存在“没有额外的约束条件”这句表述。**", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$1 \\leq n, m \\leq 100$），分别表示表格 $a$ 的行数和列数。\n\n第二行包含两个整数 $c$（$2 \\leq c \\leq 3$）和 $q$，分别表示可用符号的数量和允许修改表格的次数。\n\n接下来的 $n$ 行，每行包含 $m$ 个符号，表示表格 $a$ 的元素。如果 $c=2$，则 $a_{ij} \\in \\{\\tt{R}, \\tt{G}\\}$；如果 $c=3$，则 $a_{ij} \\in \\{\\tt{R}, \\tt{G}, \\tt{B}\\}$。", "outputFormat": "输出 $n$ 行，每行包含 $m$ 个符号，表示修改后的表格。\n\n如果有多个正确答案，输出任意一个均可。", "hint": "### 评分标准\n\n- （$7$ 分）：$n = 1$，$c = 3$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$；\n- （$7$ 分）：$n = 1$，$c = 2$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$；\n- （$3$ 分）：$c = 3$，$q = n \\cdot m$；\n- （$7$ 分）：表格 $a$ 的所有行相同，$a[1][j] \\neq a[1][j+1]$（对于 $1 \\leq j < m$），$c = 3$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$；\n- （$7$ 分）：表格 $a$ 的所有行相同，$c = 3$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$；\n- （$13$ 分）：$c = 3$，$q = \\lfloor \\frac{2 \\cdot n \\cdot m}{3} \\rfloor$；\n- （$19$ 分）：$c = 3$，$n \\leq 5$，$m \\leq 100$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$；\n- （$17$ 分）：$c = 2$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$；\n- （$20$ 分）：$c = 3$，$q = \\lfloor \\frac{n \\cdot m}{2} \\rfloor$。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12557", "type": "P", "difficulty": 5, "samples": [["6 3\n6 3 5 4 2 1\n3 1 2", "4 1 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "UOI（乌克兰）"], "title": "[UOI 2024] Football", "background": "", "description": "There are $n$ players in a football team, numbered with integers from $1$ to $n$. The skill level of player with number $i$ is described by the integer $c_i$.\n\nThe players are arranged in a circle in such a way that the player with number $i$ has the player with number $i+1$ on their right side (for $1 \\le i < n$), and for the player with number $n$, the next player is the one with number $1$.\n\nLet's define the **strength** of a game combination, characterized by an array of integers $k=[k_0, k_1, k_2, \\ldots, k_{m-1}]$, as follows:\n\n- initially, the ball is with the player with number $1$;\n- the players pass the ball in turns indefinitely: when performing the pass with number $i$, the player who currently has control of the ball passes it to the player located $x$ positions to the right in the circle, where $x=k_{((i-1) \\mod m)}$;\n- the **strength** of the game combination is considered to be the minimum skill level among the skills of all players who had the ball at some point during the described process.\n\nAn array of integers $a_0,a_1,\\ldots,a_{q-1}$ is given. For each $i$ from $0$ to $(q-1)$, find the strength of the game combination characterized by the array $[a_0,a_1,\\ldots,a_i]$.", "inputFormat": "The first line contains two integers $n$ and $q$ $(1 \\leq n, q \\leq 3\\cdot{10}^5)$ --- the number of players and the length of the array $a$.\n\nThe second line contains $n$ integers $c_1, c_2, \\dots, c_n$ $(1 \\leq c_i \\leq n)$ --- the skill levels of the players.\n\nThe third line contains $q$ integers $a_0, a_1, \\dots, a_{q-1}$ $(1 \\leq a_i \\leq n-1)$ --- the elements of the array $a$.", "outputFormat": "Output $q$ integers --- the sought values of the strengths of game combinations.", "hint": "In the example of passing the ball for game combinations, it looks as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2jx24a71.png)\n\n$k=[3]$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7cv4s1y0.png)\n\n$k=[3,1]$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gzy920tn.png)\n\n$k=[3,1,2]$\n\n### Scoring\n\n- ($10$ points): $n, q \\leq 100$;\n- ($4$ points): all values of $a_i$ are the same;\n- ($11$ points): $n$ is a prime number;\n- ($12$ points): $n, q \\leq 1000$;\n- ($16$ points): $n, q \\leq 1.5\\cdot{10}^5$, $n = 2^k$ for some integer $k$;\n- ($25$ points): $n, q \\leq {10}^5$;\n- ($22$ points): without additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Football", "background": "", "description": "There are $n$ players in a football team, numbered with integers from $1$ to $n$. The skill level of player with number $i$ is described by the integer $c_i$.\n\nThe players are arranged in a circle in such a way that the player with number $i$ has the player with number $i+1$ on their right side (for $1 \\le i < n$), and for the player with number $n$, the next player is the one with number $1$.\n\nLet's define the **strength** of a game combination, characterized by an array of integers $k=[k_0, k_1, k_2, \\ldots, k_{m-1}]$, as follows:\n\n- initially, the ball is with the player with number $1$;\n- the players pass the ball in turns indefinitely: when performing the pass with number $i$, the player who currently has control of the ball passes it to the player located $x$ positions to the right in the circle, where $x=k_{((i-1) \\mod m)}$;\n- the **strength** of the game combination is considered to be the minimum skill level among the skills of all players who had the ball at some point during the described process.\n\nAn array of integers $a_0,a_1,\\ldots,a_{q-1}$ is given. For each $i$ from $0$ to $(q-1)$, find the strength of the game combination characterized by the array $[a_0,a_1,\\ldots,a_i]$.", "inputFormat": "The first line contains two integers $n$ and $q$ $(1 \\leq n, q \\leq 3\\cdot{10}^5)$ --- the number of players and the length of the array $a$.\n\nThe second line contains $n$ integers $c_1, c_2, \\dots, c_n$ $(1 \\leq c_i \\leq n)$ --- the skill levels of the players.\n\nThe third line contains $q$ integers $a_0, a_1, \\dots, a_{q-1}$ $(1 \\leq a_i \\leq n-1)$ --- the elements of the array $a$.", "outputFormat": "Output $q$ integers --- the sought values of the strengths of game combinations.", "hint": "In the example of passing the ball for game combinations, it looks as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2jx24a71.png)\n\n$k=[3]$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7cv4s1y0.png)\n\n$k=[3,1]$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gzy920tn.png)\n\n$k=[3,1,2]$\n\n### Scoring\n\n- ($10$ points): $n, q \\leq 100$;\n- ($4$ points): all values of $a_i$ are the same;\n- ($11$ points): $n$ is a prime number;\n- ($12$ points): $n, q \\leq 1000$;\n- ($16$ points): $n, q \\leq 1.5\\cdot{10}^5$, $n = 2^k$ for some integer $k$;\n- ($25$ points): $n, q \\leq {10}^5$;\n- ($22$ points): without additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Football", "background": "", "description": "一支足球队有 $n$ 名球员，编号为 $1$ 到 $n$ 的整数。编号为 $i$ 的球员的技能水平用整数 $c_i$ 描述。\n\n球员们围成一个圆圈排列，编号为 $i$ 的球员右侧是编号为 $i+1$ 的球员（对于 $1 \\le i < n$），而编号为 $n$ 的球员的下一个球员是编号为 $1$ 的球员。\n\n我们定义一个游戏组合的**强度**，该组合由一个整数数组 $k=[k_0, k_1, k_2, \\ldots, k_{m-1}]$ 描述，具体如下：\n\n- 初始时，球在编号为 $1$ 的球员手中；\n- 球员们无限轮流传球：在进行第 $i$ 次传球时，当前持球的球员会将球传给圆圈中右侧第 $x$ 个位置的球员，其中 $x=k_{((i-1) \\mod m)}$；\n- 游戏组合的**强度**定义为在上述过程中某个时刻持球的所有球员技能水平的最小值。\n\n给定一个整数数组 $a_0, a_1, \\ldots, a_{q-1}$。对于每个 $i$ 从 $0$ 到 $(q-1)$，求出由数组 $[a_0, a_1, \\ldots, a_i]$ 描述的游戏组合的强度。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$ $(1 \\leq n, q \\leq 3 \\cdot {10}^5)$ —— 球员数量和数组 $a$ 的长度。\n\n第二行包含 $n$ 个整数 $c_1, c_2, \\dots, c_n$ $(1 \\leq c_i \\leq n)$ —— 球员的技能水平。\n\n第三行包含 $q$ 个整数 $a_0, a_1, \\dots, a_{q-1}$ $(1 \\leq a_i \\leq n-1)$ —— 数组 $a$ 的元素。", "outputFormat": "输出 $q$ 个整数 —— 所求的游戏组合的强度值。", "hint": "在示例中，游戏组合的传球过程如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2jx24a71.png)\n\n$k=[3]$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7cv4s1y0.png)\n\n$k=[3,1]$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gzy920tn.png)\n\n$k=[3,1,2]$\n\n### 评分标准\n\n- （$10$ 分）：$n, q \\leq 100$；\n- （$4$ 分）：所有 $a_i$ 的值相同；\n- （$11$ 分）：$n$ 是一个质数；\n- （$12$ 分）：$n, q \\leq 1000$；\n- （$16$ 分）：$n, q \\leq 1.5 \\cdot {10}^5$，且 $n = 2^k$（其中 $k$ 为某个整数）；\n- （$25$ 分）：$n, q \\leq {10}^5$；\n- （$22$ 分）：无额外约束。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12558", "type": "P", "difficulty": 7, "samples": [["3\n3 4 6\n1 2 5\n3\n1 2\n2 3\n3 3", "2\n3\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "UOI（乌克兰）"], "title": "[UOI 2024] Heroes and Monsters", "background": "", "description": "There are $n$ heroes and $n$ monsters. The heroes and monsters are numbered with integers from $1$ to $n$. The strength of the $i$-th hero is equal to $a_i$, and the strength of the $i$-th monster is equal to $b_i$. It is guaranteed that all values $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ are **pairwise distinct**.\n\nThere will be a total of $n$ battles. In each battle, exactly one hero and exactly one monster will participate, with each hero and each monster participating in exactly one battle. Let the battle involve the hero with number $i$ and the monster with number $j$. If $a_i>b_j$, then the hero with number $i$ will be happy, otherwise, he will be sad.\n\nLet $ans_k$ be the number of different sets of heroes $S$ of size $k$, such that there is a distribution of battles where all heroes in $S$ will be happy and all other heroes will be sad.\n\nGiven $q$ queries of the form $l$, $r$. For each query, find $(\\sum\\limits_{i=l}^{r} ans_i) \\mod 998244353$.", "inputFormat": "The first line contains a single integer $n$ ($1 \\leq n \\leq 5 \\cdot 10^3$) --- the number of battles that will take place.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($1 \\leq a_i \\leq 2 \\cdot n$) --- the strengths of the heroes.\n\nThe third line contains $n$ integers $b_1, b_2, \\ldots, b_n$ $(1 \\leq b_i \\leq 2 \\cdot n)$ --- the strengths of the monsters.\n\nIt is guaranteed that all values $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ are pairwise distinct.\n\nThe fourth line contains a single integer $q$ $(1 \\leq q \\leq n+1)$ --- the number of queries.\n\nThe next $q$ lines contain two integers each, $l$ and $r$ $(0 \\leq l \\leq r \\leq n)$ --- the parameters of the corresponding query.\n\nIt is guaranteed that all values $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ are pairwise distinct.", "outputFormat": "For each query, output a single integer --- the required value $(\\sum\\limits_{i=l}^{r} ans_i) \\mod 998244353$.", "hint": "The image below shows the heroes and monsters of the first example. The heroes are at the top, and the monsters are at the bottom. The number inside the square represents the strength of the corresponding hero or monster.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dczgwwuu.png)\n\nIn the example, there are three possible sets of happy heroes: $\\{1,2,3\\}$, $\\{2,3\\}$, and $\\{1,3\\}$. Below are three possible distributions of battles in which the corresponding sets of heroes will be happy. Note that there may be multiple distributions of battles where the same set of heroes will be happy.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a6vkjiwl.png)\n\n### Scoring\n\n- ($3$ points): $a_i < b_j$ for $1 \\leq i,j \\leq n$;\n- ($9$ points): $q = 1$, $l = 1$, $r = 1$;\n- ($6$ points): $a_i = 2 \\cdot i - 1$, $b_i = 2 \\cdot i$ for $1 \\leq i \\leq n$;\n- ($16$ points): $n \\leq 500$, $q = 1$, $l = 0$, $r = n$;\n- ($14$ points): $q = 1$, $l = 0$, $r = n$;\n- ($15$ points): $q = 1$, $l=r$;\n- ($17$ points): $n \\leq 500$;\n- ($20$ points): without additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Heroes and Monsters", "background": "", "description": "There are $n$ heroes and $n$ monsters. The heroes and monsters are numbered with integers from $1$ to $n$. The strength of the $i$-th hero is equal to $a_i$, and the strength of the $i$-th monster is equal to $b_i$. It is guaranteed that all values $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ are **pairwise distinct**.\n\nThere will be a total of $n$ battles. In each battle, exactly one hero and exactly one monster will participate, with each hero and each monster participating in exactly one battle. Let the battle involve the hero with number $i$ and the monster with number $j$. If $a_i>b_j$, then the hero with number $i$ will be happy, otherwise, he will be sad.\n\nLet $ans_k$ be the number of different sets of heroes $S$ of size $k$, such that there is a distribution of battles where all heroes in $S$ will be happy and all other heroes will be sad.\n\nGiven $q$ queries of the form $l$, $r$. For each query, find $(\\sum\\limits_{i=l}^{r} ans_i) \\mod 998244353$.", "inputFormat": "The first line contains a single integer $n$ ($1 \\leq n \\leq 5 \\cdot 10^3$) --- the number of battles that will take place.\n\nThe second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($1 \\leq a_i \\leq 2 \\cdot n$) --- the strengths of the heroes.\n\nThe third line contains $n$ integers $b_1, b_2, \\ldots, b_n$ $(1 \\leq b_i \\leq 2 \\cdot n)$ --- the strengths of the monsters.\n\nIt is guaranteed that all values $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ are pairwise distinct.\n\nThe fourth line contains a single integer $q$ $(1 \\leq q \\leq n+1)$ --- the number of queries.\n\nThe next $q$ lines contain two integers each, $l$ and $r$ $(0 \\leq l \\leq r \\leq n)$ --- the parameters of the corresponding query.\n\nIt is guaranteed that all values $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ are pairwise distinct.", "outputFormat": "For each query, output a single integer --- the required value $(\\sum\\limits_{i=l}^{r} ans_i) \\mod 998244353$.", "hint": "The image below shows the heroes and monsters of the first example. The heroes are at the top, and the monsters are at the bottom. The number inside the square represents the strength of the corresponding hero or monster.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dczgwwuu.png)\n\nIn the example, there are three possible sets of happy heroes: $\\{1,2,3\\}$, $\\{2,3\\}$, and $\\{1,3\\}$. Below are three possible distributions of battles in which the corresponding sets of heroes will be happy. Note that there may be multiple distributions of battles where the same set of heroes will be happy.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a6vkjiwl.png)\n\n### Scoring\n\n- ($3$ points): $a_i < b_j$ for $1 \\leq i,j \\leq n$;\n- ($9$ points): $q = 1$, $l = 1$, $r = 1$;\n- ($6$ points): $a_i = 2 \\cdot i - 1$, $b_i = 2 \\cdot i$ for $1 \\leq i \\leq n$;\n- ($16$ points): $n \\leq 500$, $q = 1$, $l = 0$, $r = n$;\n- ($14$ points): $q = 1$, $l = 0$, $r = n$;\n- ($15$ points): $q = 1$, $l=r$;\n- ($17$ points): $n \\leq 500$;\n- ($20$ points): without additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Heroes and Monsters", "background": "", "description": "有 $n$ 个英雄和 $n$ 个怪物。英雄和怪物分别编号为 $1$ 到 $n$ 的整数。第 $i$ 个英雄的战斗力为 $a_i$，第 $i$ 个怪物的战斗力为 $b_i$。保证所有 $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ 的值都是**两两不同**的。\n\n将进行总共 $n$ 场战斗。每场战斗中恰好有一个英雄和一个怪物参与，且每个英雄和每个怪物都恰好参与一场战斗。假设某场战斗由编号为 $i$ 的英雄和编号为 $j$ 的怪物进行。如果 $a_i > b_j$，则编号为 $i$ 的英雄会感到高兴；否则，他会感到悲伤。\n\n定义 $ans_k$ 为大小为 $k$ 的不同英雄集合 $S$ 的数量，满足存在一种战斗分配方式使得集合 $S$ 中的所有英雄都高兴，而其他英雄都悲伤。\n\n给定 $q$ 个形如 $l$、$r$ 的查询。对于每个查询，计算 $(\\sum\\limits_{i=l}^{r} ans_i) \\mod 998244353$ 的值。", "inputFormat": "第一行包含一个整数 $n$（$1 \\leq n \\leq 5 \\cdot 10^3$）—— 将进行的战斗场数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$（$1 \\leq a_i \\leq 2 \\cdot n$）—— 英雄的战斗力。\n\n第三行包含 $n$ 个整数 $b_1, b_2, \\ldots, b_n$（$1 \\leq b_i \\leq 2 \\cdot n$）—— 怪物的战斗力。\n\n保证所有 $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ 的值都是两两不同的。\n\n第四行包含一个整数 $q$（$1 \\leq q \\leq n+1$）—— 查询的数量。\n\n接下来的 $q$ 行每行包含两个整数 $l$ 和 $r$（$0 \\leq l \\leq r \\leq n$）—— 对应查询的参数。\n\n保证所有 $a_1, a_2, \\ldots, a_n, b_1, b_2, \\ldots, b_n$ 的值都是两两不同的。", "outputFormat": "对于每个查询，输出一个整数 —— 所求的值 $(\\sum\\limits_{i=l}^{r} ans_i) \\mod 998244353$。\n", "hint": "下图展示了第一个样例中的英雄和怪物。英雄位于上方，怪物位于下方。方块中的数字表示对应英雄或怪物的战斗力。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dczgwwuu.png)\n\n在样例中，存在三个可能的高兴英雄集合：$\\{1,2,3\\}$、$\\{2,3\\}$ 和 $\\{1,3\\}$。以下是三种可能的战斗分配方式，使得对应的英雄集合高兴。注意，可能存在多种战斗分配方式使得同一个英雄集合高兴。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a6vkjiwl.png)\n\n### 评分标准\n\n- （$3$ 分）：对于所有 $1 \\leq i,j \\leq n$，满足 $a_i < b_j$；\n- （$9$ 分）：$q = 1$，$l = 1$，$r = 1$；\n- （$6$ 分）：对于所有 $1 \\leq i \\leq n$，满足 $a_i = 2 \\cdot i - 1$，$b_i = 2 \\cdot i$；\n- （$16$ 分）：$n \\leq 500$，$q = 1$，$l = 0$，$r = n$；\n- （$14$ 分）：$q = 1$，$l = 0$，$r = n$；\n- （$15$ 分）：$q = 1$，$l = r$；\n- （$17$ 分）：$n \\leq 500$；\n- （$20$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12559", "type": "P", "difficulty": 7, "samples": [["7 6 1\n5 4 3 5 7 7 7\n1 4\n4 7\n3 7\n1 7\n2 6\n1 1", "9\n11\n12\n14\n12\n6"], ["7 6 2\n5 4 3 5 7 7 7\n1 4\n4 7\n3 7\n1 7\n2 6\n1 1", "9\n11\n12\n14\n12\n6"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2024] Zeroing the segment", "background": "", "description": "**This is a problem with graders.**\n\nFor an array of positive integers $b$ of length $m$, we define $f(b)$ as follows:\n\n- Let initially a variable $x$ be equal to $0$;\n- For one **coin**, it is allowed to increase the value of $x$ by $1$;\n- For one **coin**, it is allowed to choose an element of the array $b_i$ ($1\\le i\\le m$) and replace it with $(b_i \\oplus x)$, where $\\oplus$ denotes the operation of  **bitwise exclusive OR**;\n- $f(b)$ equals the minimum number of coins needed to make all elements of the array $b$ simultaneously equal to zero.\n\nThe **bitwise exclusive OR** of non-negative integers $a$ and $b$ $(a \\oplus b)$ equals a non-negative integer, in which in the binary representation, there is a one at a certain position only if in the binary representations of $a$ and $b$ at this position there are different values. For example, $3_{10} \\oplus 5_{10} = 0011_{2} \\oplus 0101_{2} = 0110_{2} = 6_{10}$.\n\nAn array of positive integers $a$ of length $n$ and $q$ queries of the form $l$, $r$ are given. For each query, it is necessary to find $f([a_l,a_{l+1},\\ldots,a_r])$. \n\nYou need to implement the following functions:\n\n```\nvoid init(integer n, array of integers a)\n```\n\n- $n$ --- an integer representing the length of the array;\n- $a$ --- an array of integers of length $n$;\n- this function does not return anything.\n\n```\ninteger ask(integer l, integer r)\n```\n\n- $l$ --- an integer representing the left boundary of the query;\n- $r$ --- an integer representing the right boundary of the query;\n- this function returns an integer --- $f([a_l,a_{l+1},\\ldots,a_r])$.\n\n```\narray of integers askAll(integer q, array of integers l, array of integers r)\n```\n\n- $q$ --- an integer representing the number of queries;\n- $l$ --- an array of integers of length $q$; $l_i$ represents the left boundary of the $i$-th query;\n- $r$ --- an array of integers of length $q$; $r_i$ represents the right boundary of the $i$-th query;\n- this function returns an array of integers; the $i$-th number should be equal to the answer to the $i$-th query.", "inputFormat": "The first line contains three integers $n$, $q$, and $t$ ($1 \\leq n, q \\leq 2 \\cdot 10^5$; $1 \\leq t \\leq 2$) --- the number of numbers, the number of queries, and the format of the queries, respectively.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i < 2^{60}$) --- the elements of the array $a$.\n\nThe next $q$ lines contain two integers $l$ and $r$ ($1 \\leq l \\leq r \\leq n$) --- the parameters of the $i$-th query.\n\nThe function $\\tt{init}$ will be called exactly once.\n\nIf $t=1$, then the function $\\tt{askAll}$ with all queries will be called exactly once. If $t=2$, then the function $\\tt{ask}$ will be called exactly $q$ times.", "outputFormat": "The grader will output $q$ integers in separate lines --- the answers to the queries.", "hint": "### Scoring\n\n- ($3$ points): $t=1$, $a_i=a_1$ for $1\\le i\\le n$;\n- ($8$ points): $t=1$, $a_i \\neq a_j$ for $i \\neq j$;\n- ($3$ points): $t=1$, $2^m+n \\le a_i<2^{m+1}$ for some natural $m$;\n- ($9$ points): $t=1$, $a_i \\le a_{i+1}$ for $1 \\le i < n$;\n- ($10$ points): $t=1$, $n, q \\le 1000$;\n- ($11$ points): $t=1$, $l_i=1$ and $r_i=i$ for $1\\le i\\le q$.\n- ($10$ points): $t=1$, $n, q \\le 50000$;\n- ($25$ points): $t=1$;\n- ($9$ points): $t=2$, $n, q \\le 10^5$;\n- ($12$ points): $t=2$.", "locale": "en", "translations": {"en": {"title": "[UOI 2024] Zeroing the segment", "background": "", "description": "**This is a problem with graders.**\n\nFor an array of positive integers $b$ of length $m$, we define $f(b)$ as follows:\n\n- Let initially a variable $x$ be equal to $0$;\n- For one **coin**, it is allowed to increase the value of $x$ by $1$;\n- For one **coin**, it is allowed to choose an element of the array $b_i$ ($1\\le i\\le m$) and replace it with $(b_i \\oplus x)$, where $\\oplus$ denotes the operation of  **bitwise exclusive OR**;\n- $f(b)$ equals the minimum number of coins needed to make all elements of the array $b$ simultaneously equal to zero.\n\nThe **bitwise exclusive OR** of non-negative integers $a$ and $b$ $(a \\oplus b)$ equals a non-negative integer, in which in the binary representation, there is a one at a certain position only if in the binary representations of $a$ and $b$ at this position there are different values. For example, $3_{10} \\oplus 5_{10} = 0011_{2} \\oplus 0101_{2} = 0110_{2} = 6_{10}$.\n\nAn array of positive integers $a$ of length $n$ and $q$ queries of the form $l$, $r$ are given. For each query, it is necessary to find $f([a_l,a_{l+1},\\ldots,a_r])$. \n\nYou need to implement the following functions:\n\n```\nvoid init(integer n, array of integers a)\n```\n\n- $n$ --- an integer representing the length of the array;\n- $a$ --- an array of integers of length $n$;\n- this function does not return anything.\n\n```\ninteger ask(integer l, integer r)\n```\n\n- $l$ --- an integer representing the left boundary of the query;\n- $r$ --- an integer representing the right boundary of the query;\n- this function returns an integer --- $f([a_l,a_{l+1},\\ldots,a_r])$.\n\n```\narray of integers askAll(integer q, array of integers l, array of integers r)\n```\n\n- $q$ --- an integer representing the number of queries;\n- $l$ --- an array of integers of length $q$; $l_i$ represents the left boundary of the $i$-th query;\n- $r$ --- an array of integers of length $q$; $r_i$ represents the right boundary of the $i$-th query;\n- this function returns an array of integers; the $i$-th number should be equal to the answer to the $i$-th query.", "inputFormat": "The first line contains three integers $n$, $q$, and $t$ ($1 \\leq n, q \\leq 2 \\cdot 10^5$; $1 \\leq t \\leq 2$) --- the number of numbers, the number of queries, and the format of the queries, respectively.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i < 2^{60}$) --- the elements of the array $a$.\n\nThe next $q$ lines contain two integers $l$ and $r$ ($1 \\leq l \\leq r \\leq n$) --- the parameters of the $i$-th query.\n\nThe function $\\tt{init}$ will be called exactly once.\n\nIf $t=1$, then the function $\\tt{askAll}$ with all queries will be called exactly once. If $t=2$, then the function $\\tt{ask}$ will be called exactly $q$ times.", "outputFormat": "The grader will output $q$ integers in separate lines --- the answers to the queries.", "hint": "### Scoring\n\n- ($3$ points): $t=1$, $a_i=a_1$ for $1\\le i\\le n$;\n- ($8$ points): $t=1$, $a_i \\neq a_j$ for $i \\neq j$;\n- ($3$ points): $t=1$, $2^m+n \\le a_i<2^{m+1}$ for some natural $m$;\n- ($9$ points): $t=1$, $a_i \\le a_{i+1}$ for $1 \\le i < n$;\n- ($10$ points): $t=1$, $n, q \\le 1000$;\n- ($11$ points): $t=1$, $l_i=1$ and $r_i=i$ for $1\\le i\\le q$.\n- ($10$ points): $t=1$, $n, q \\le 50000$;\n- ($25$ points): $t=1$;\n- ($9$ points): $t=2$, $n, q \\le 10^5$;\n- ($12$ points): $t=2$.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024] Zeroing the segment", "background": "", "description": "**本题采用交互式评测方式，目前仅支持 C++ 语言提交。**\n\n对于一个长度为 $m$ 的正整数数组 $b$，我们定义 $f(b)$ 如下：\n\n- 初始时设变量 $x$ 为 $0$；\n- 每次可以花费 **1 枚硬币** 将 $x$ 的值增加 $1$；\n- 每次可以花费 **1 枚硬币** 选择数组中的元素 $b_i$（$1\\le i\\le m$）并将其替换为 $(b_i \\oplus x)$，其中 $\\oplus$ 表示 **按位异或** 运算；\n- $f(b)$ 表示将所有数组元素同时变为 $0$ 所需的最少硬币数。\n\n**按位异或** 运算（$\\oplus$）的定义：对于非负整数 $a$ 和 $b$，$a \\oplus b$ 的结果是一个非负整数，其二进制表示中某一位为 $1$ 当且仅当 $a$ 和 $b$ 在该位的值不同。例如 $3_{10} \\oplus 5_{10} = 0011_{2} \\oplus 0101_{2} = 0110_{2} = 6_{10}$。\n\n给定一个长度为 $n$ 的正整数数组 $a$ 和 $q$ 个形如 $l$、$r$ 的查询。对于每个查询，需要计算 $f([a_l,a_{l+1},\\ldots,a_r])$。\n\n你需要实现以下函数：\n\n```\nvoid init(integer n, array of integers a)\n```\n\n- $n$ —— 表示数组长度的整数；\n- $a$ —— 长度为 $n$ 的整数数组；\n- 该函数不返回任何值。\n\n```\ninteger ask(integer l, integer r)\n```\n\n- $l$ —— 表示查询左边界的整数；\n- $r$ —— 表示查询右边界的整数；\n- 该函数返回一个整数 —— $f([a_l,a_{l+1},\\ldots,a_r])$。\n\n```\narray of integers askAll(integer q, array of integers l, array of integers r)\n```\n\n- $q$ —— 表示查询数量的整数；\n- $l$ —— 长度为 $q$ 的整数数组；$l_i$ 表示第 $i$ 个查询的左边界；\n- $r$ —— 长度为 $q$ 的整数数组；$r_i$ 表示第 $i$ 个查询的右边界；\n- 该函数返回一个整数数组；第 $i$ 个数应为第 $i$ 个查询的答案。\n\n这三个函数在 C++ 语言中可以视作：\n\n```cpp\nvoid init(int n, const vector<long long> &a);\nlong long ask(int l, int r);\nvector<long long> askAll(int q, const vector<int> &l, const vector<int> &r);\n```", "inputFormat": "第一行包含三个整数 $n$、$q$ 和 $t$（$1 \\leq n, q \\leq 2 \\cdot 10^5$；$1 \\leq t \\leq 2$）—— 分别表示数字数量、查询数量和查询格式。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i < 2^{60}$）—— 数组 $a$ 的元素。\n\n接下来 $q$ 行每行包含两个整数 $l$ 和 $r$（$1 \\leq l \\leq r \\leq n$）—— 第 $i$ 个查询的参数。\n\n函数 $\\tt{init}$ 将被调用恰好一次。\n\n如果 $t=1$，则函数 $\\tt{askAll}$ 将被调用恰好一次来处理所有查询。如果 $t=2$，则函数 $\\tt{ask}$ 将被调用恰好 $q$ 次。", "outputFormat": "评测程序将输出 $q$ 个整数，每个查询的答案各占一行。\n", "hint": "### 评分标准\n\n- （$3$ 分）：$t=1$，且对所有 $1\\le i\\le n$ 有 $a_i=a_1$；\n- （$8$ 分）：$t=1$，且对所有 $i \\neq j$ 有 $a_i \\neq a_j$；\n- （$3$ 分）：$t=1$，且存在自然数 $m$ 使得对所有 $i$ 有 $2^m+n \\le a_i<2^{m+1}$；\n- （$9$ 分）：$t=1$，且对所有 $1 \\le i < n$ 有 $a_i \\le a_{i+1}$；\n- （$10$ 分）：$t=1$，且 $n, q \\le 1000$；\n- （$11$ 分）：$t=1$，且对所有 $1\\le i\\le q$ 有 $l_i=1$ 且 $r_i=i$；\n- （$10$ 分）：$t=1$，且 $n, q \\le 50000$；\n- （$25$ 分）：$t=1$；\n- （$9$ 分）：$t=2$，且 $n, q \\le 10^5$；\n- （$12$ 分）：$t=2$。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12560", "type": "P", "difficulty": 5, "samples": [["2\n01\n00", "YES\n0 0\n0 1\n1 1"], ["4\n0100\n1010\n0100\n0001", "NO"], ["4\n0010\n1001\n1010\n0010", "YES\n0 0\n0 1\n0 2\n0 3\n1 3\n2 3\n3 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "Special Judge", "UOI（乌克兰）"], "title": "[UTS 2024] Randomized Palindromes", "background": "", "description": "You are given a binary matrix $n \\times n$ consisting of zeroes and ones. Initially, you have an empty string $S$. You start in the position $(0;0)$ (left-up corner) and move right or down. You append each element you have passed to the string $S$ in the respective order.\n\nTell whether it is possible to achieve $S$ being a palindrome. If yes, print the way it should pass to achieve that.\n\nNote that each matrix is randomly generated.", "inputFormat": "The first line contains the only integer $n$ $(1 \\le n \\le 5\\,000)$ --- the size of a matrix.\n\nThe following $n$ lines contain the $n$ characters $a_{i,j}$ $(0 \\le a_{i,j} \\le 1)$ --- description of the matrix.\n\nThe input matrix for the problem is picked $\\textbf{randomly}$ across all possible valid matrices for the problem of size $n \\times n$.", "outputFormat": "Print $\\tt{NO}$ if there is no such palindrome. \n\nOtherwise, in the first line, print $\\tt{YES}$. In each of the following $2n-1$ lines, print two integers $x_i$ and $y_i$ ($0 \\leq x_i, y_i < n$) --- the coordinates of the $i$-th cell.", "hint": "- ($5$ points) $n \\le 10$;\n- ($9$ points) $n \\le 100$;\n- ($19$ points) $n \\le 500$;\n- ($27$ points) $n \\le 1\\,500$;\n- ($40$ points) no additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UTS 2024] Randomized Palindromes", "background": "", "description": "You are given a binary matrix $n \\times n$ consisting of zeroes and ones. Initially, you have an empty string $S$. You start in the position $(0;0)$ (left-up corner) and move right or down. You append each element you have passed to the string $S$ in the respective order.\n\nTell whether it is possible to achieve $S$ being a palindrome. If yes, print the way it should pass to achieve that.\n\nNote that each matrix is randomly generated.", "inputFormat": "The first line contains the only integer $n$ $(1 \\le n \\le 5\\,000)$ --- the size of a matrix.\n\nThe following $n$ lines contain the $n$ characters $a_{i,j}$ $(0 \\le a_{i,j} \\le 1)$ --- description of the matrix.\n\nThe input matrix for the problem is picked $\\textbf{randomly}$ across all possible valid matrices for the problem of size $n \\times n$.", "outputFormat": "Print $\\tt{NO}$ if there is no such palindrome. \n\nOtherwise, in the first line, print $\\tt{YES}$. In each of the following $2n-1$ lines, print two integers $x_i$ and $y_i$ ($0 \\leq x_i, y_i < n$) --- the coordinates of the $i$-th cell.", "hint": "- ($5$ points) $n \\le 10$;\n- ($9$ points) $n \\le 100$;\n- ($19$ points) $n \\le 500$;\n- ($27$ points) $n \\le 1\\,500$;\n- ($40$ points) no additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UTS 2024] Randomized Palindromes", "background": "", "description": "给定一个由 0 和 1 组成的 $n \\times n$ 二进制矩阵。初始时，你有一个空字符串 $S$。你从位置 $(0,0)$（左上角）出发，每次只能向右或向下移动。将经过的每个元素按顺序添加到字符串 $S$ 中。\n\n判断是否存在一条路径使得 $S$ 成为回文串。如果存在，输出这样的路径；否则输出不存在。\n\n注意每个矩阵都是随机生成的。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\le n \\le 5\\,000)$ —— 矩阵的大小。\n\n接下来的 $n$ 行，每行包含 $n$ 个字符 $a_{i,j}$ $(0 \\le a_{i,j} \\le 1)$ —— 描述矩阵的内容。\n\n输入矩阵是从所有可能的 $n \\times n$ 有效矩阵中随机选取的。", "outputFormat": "如果不存在这样的回文路径，输出一行 $\\tt{NO}$。\n\n否则，第一行输出 $\\tt{YES}$。接下来的 $2n-1$ 行，每行输出两个整数 $x_i$ 和 $y_i$ ($0 \\leq x_i, y_i < n$) —— 表示路径上第 $i$ 个单元格的坐标。\n", "hint": "- （$5$ 分）：$n \\le 10$；\n- （$9$ 分）：$n \\le 100$；\n- （$19$ 分）：$n \\le 500$；\n- （$27$ 分）：$n \\le 1\\,500$；\n- （$40$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12561", "type": "P", "difficulty": 5, "samples": [["4 4 2\n1 2 6 14\n12 3 13 5\n11 4 7 8\n10 16 9 15", "12 13 13 \n12 7 13 \n16 16 15 \n1 1 1 \n1 1 1 \n1 1 1 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "递推", "倍增", "单调队列", "2024", "UOI（乌克兰）"], "title": "[UTS 2024] Matrix", "background": "", "description": "You are given a matrix of size $n \\times m$ consisting of elements $a_{i,j}$. \n\nWe call a **triangle** on the matrix of size $k$ starting at point $(x;y)$ a set of points that can be reached from $(x;y)$ in no more than $k$ steps going either up or right. \n\nYou are asked to find for each $(x;y)$ $(k \\le x \\le n, 1 \\le y \\le m-k+1)$ the following values:\n\n- The maximal value in the triangle of size $k$ starting at point $(x;y)$;\n- The number of occurrences of the maximal value in that triangle.", "inputFormat": "The first line contains three integers $n$, $m$, and $k$ $(1 \\le n,m \\le 2\\,000, 1 \\le k \\le \\min(n,m))$ --- dimensions of the matrix and the size of the triangle.\n\nThe following $n$ lines contain $m$ integers $a_{i,j}$ $(0 \\le a_{i,j} \\le 10^6)$ --- description of the matrix.", "outputFormat": "Print two matrices of size $(n-k+1)\\times(m-k+1)$. \n\nThe first matrix in position $(i;j)$ should contain the maximal value of a triangle of size $k$ starting at $(i+k-1;j)$.\n\nThe second matrix in position $(i;j)$ should contain the number of occurrences of the maximal value in the triangle of size $k$ starting at $(i+k-1;j)$.", "hint": "- ($5$ points) $n,m \\le 20$;\n- ($10$ points) $n,m \\le 100$;\n- ($30$ points) $a_{i,j} \\le 1$;\n- ($35$ points) $n,m \\le 1\\,000$;\n- ($20$ points) no additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UTS 2024] Matrix", "background": "", "description": "You are given a matrix of size $n \\times m$ consisting of elements $a_{i,j}$. \n\nWe call a **triangle** on the matrix of size $k$ starting at point $(x;y)$ a set of points that can be reached from $(x;y)$ in no more than $k$ steps going either up or right. \n\nYou are asked to find for each $(x;y)$ $(k \\le x \\le n, 1 \\le y \\le m-k+1)$ the following values:\n\n- The maximal value in the triangle of size $k$ starting at point $(x;y)$;\n- The number of occurrences of the maximal value in that triangle.", "inputFormat": "The first line contains three integers $n$, $m$, and $k$ $(1 \\le n,m \\le 2\\,000, 1 \\le k \\le \\min(n,m))$ --- dimensions of the matrix and the size of the triangle.\n\nThe following $n$ lines contain $m$ integers $a_{i,j}$ $(0 \\le a_{i,j} \\le 10^6)$ --- description of the matrix.", "outputFormat": "Print two matrices of size $(n-k+1)\\times(m-k+1)$. \n\nThe first matrix in position $(i;j)$ should contain the maximal value of a triangle of size $k$ starting at $(i+k-1;j)$.\n\nThe second matrix in position $(i;j)$ should contain the number of occurrences of the maximal value in the triangle of size $k$ starting at $(i+k-1;j)$.", "hint": "- ($5$ points) $n,m \\le 20$;\n- ($10$ points) $n,m \\le 100$;\n- ($30$ points) $a_{i,j} \\le 1$;\n- ($35$ points) $n,m \\le 1\\,000$;\n- ($20$ points) no additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UTS 2024] Matrix", "background": null, "description": "给定一个大小为 $n \\times m$ 的矩阵，矩阵元素为 $a_{i,j}$。\n\n我们定义以点 $(x,y)$ 为起点、大小为 $k$ 的**三角形**为：从 $(x,y)$ 出发，通过向上或向右移动不超过 $k-1$ 步所能到达的所有点的集合。\n\n对于每个满足 $(k \\le x \\le n, 1 \\le y \\le m-k+1)$ 的点 $(x,y)$，需要求出以下两个值：\n- 以 $(x,y)$ 为起点的大小为 $k$ 的三角形中的最大值；\n- 该最大值在三角形中出现的次数。", "inputFormat": "第一行包含三个整数 $n$、$m$ 和 $k$ $(1 \\le n,m \\le 2\\,000, 1 \\le k \\le \\min(n,m))$ —— 分别表示矩阵的行数、列数和三角形的大小。\n\n接下来的 $n$ 行，每行包含 $m$ 个整数 $a_{i,j}$ $(0 \\le a_{i,j} \\le 10^6)$ —— 表示矩阵的元素。", "outputFormat": "输出两个大小为 $(n-k+1) \\times (m-k+1)$ 的矩阵。\n\n第一个矩阵的第 $(i,j)$ 个位置应包含以 $(i+k-1,j)$ 为起点的大小为 $k$ 的三角形中的最大值。\n\n第二个矩阵的第 $(i,j)$ 个位置应包含该最大值在对应三角形中出现的次数。", "hint": "- （$5$ 分）：$n,m \\le 20$；\n- （$10$ 分）：$n,m \\le 100$；\n- （$30$ 分）：$a_{i,j} \\le 1$；\n- （$35$ 分）：$n,m \\le 1\\,000$；\n- （$20$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12562", "type": "P", "difficulty": 6, "samples": [["7 11\n1 2\n2 3\n1 4\n2 5\n4 6\n4 7\n1 6\n1 3\n2 1 6\n2 1 2\n1 7\n2 5 4\n2 6 3\n1 6\n1 3\n1 5\n2 6 3", "2\n3\n5\n4\n6"], ["3 2\n1 2\n1 3\n1 3\n2 1 2", "3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2024", "树链剖分", "UOI（乌克兰）"], "title": "[UTS 2024] Two Trees", "background": "", "description": "You are given two equal undirected trees $G$ and $H$ consisting of $n$ vertices. Trees are equal if, for all pairs of vertices $(u;v)$, the edge between $G_u$ and $G_v$ exists if and only if the edge between $H_u$ and $H_v$ exists.  \n\nSome vertices can be connected to their version in another tree with an undirected edge. Especially, a leaf vertex $G_v$ can be connected to vertex $H_v$. Let us say that if leaf vertex $G_v$ is connected to $H_v$ directly, then vertex $v$ is **enabled**, and the vertex is **disabled** otherwise.\n\nInitially, all leaf vertices are **disabled**. You are asked to handle the following queries:\n\n- $1$ $v$ --- toggle the status of vertex $v$, if $v$ is **disabled** then change its status to **enabled** and vice versa otherwise;\n- $2$ $u$ $v$ --- print the length of the shortest path from vertex $G_u$ to vertex $H_v$.", "inputFormat": "The first line contains two integers $n$ and $q$ ($3 \\le n \\le 2 \\cdot 10^5$; $1 \\le q \\le 2 \\cdot 10^5$) --- number of vertices and queries, respectively.\n\nEach of the following $n-1$ lines contains two integers $u$, $v$ $(1 \\le u,v \\le n)$ --- description of trees, edges $(G_u;G_v)$ and $(H_u;H_v)$.\n\nEach of the following $q$ lines contains a description of queries. There are two possible query descriptions:\n\n- $1$ $v$ $(1 \\le v \\le n)$ --- toggle the status of vertex $v$;\n- $2$ $u$ $v$ $(1 \\le u,v \\le n)$ --- print the length of the shortest path from vertex $G_u$ to $H_v$.", "outputFormat": "For each query of the second type, print a single integer in a single line --- the length of the shortest path between given vertices. If there is no such path, print $\\texttt{-1}$.", "hint": "Let $k$ be the number of queries of the second type.\n\n- ($3$ points): $n \\le 16$, $q \\le 16$;\n- ($3$ points): $n \\le 16$, $q \\le 2 \\cdot 10^5$;\n- ($2$ points): $n \\le 2000$, $q \\le 2 \\cdot 10^5,k \\le 5$;\n- ($8$ points): $n \\le 2000$, $q \\le 2000$;\n- ($9$ points): $n \\le 2 \\cdot 10^5$, $q \\le 2 \\cdot 10^5, k \\le 5$;\n- ($30$ points): $n \\le 2 \\cdot 10^5$, $q \\le 2 \\cdot 10^5$, there is no query of first type after query of second type;\n- ($45$ points): no additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UTS 2024] Two Trees", "background": "", "description": "You are given two equal undirected trees $G$ and $H$ consisting of $n$ vertices. Trees are equal if, for all pairs of vertices $(u;v)$, the edge between $G_u$ and $G_v$ exists if and only if the edge between $H_u$ and $H_v$ exists.  \n\nSome vertices can be connected to their version in another tree with an undirected edge. Especially, a leaf vertex $G_v$ can be connected to vertex $H_v$. Let us say that if leaf vertex $G_v$ is connected to $H_v$ directly, then vertex $v$ is **enabled**, and the vertex is **disabled** otherwise.\n\nInitially, all leaf vertices are **disabled**. You are asked to handle the following queries:\n\n- $1$ $v$ --- toggle the status of vertex $v$, if $v$ is **disabled** then change its status to **enabled** and vice versa otherwise;\n- $2$ $u$ $v$ --- print the length of the shortest path from vertex $G_u$ to vertex $H_v$.", "inputFormat": "The first line contains two integers $n$ and $q$ ($3 \\le n \\le 2 \\cdot 10^5$; $1 \\le q \\le 2 \\cdot 10^5$) --- number of vertices and queries, respectively.\n\nEach of the following $n-1$ lines contains two integers $u$, $v$ $(1 \\le u,v \\le n)$ --- description of trees, edges $(G_u;G_v)$ and $(H_u;H_v)$.\n\nEach of the following $q$ lines contains a description of queries. There are two possible query descriptions:\n\n- $1$ $v$ $(1 \\le v \\le n)$ --- toggle the status of vertex $v$;\n- $2$ $u$ $v$ $(1 \\le u,v \\le n)$ --- print the length of the shortest path from vertex $G_u$ to $H_v$.", "outputFormat": "For each query of the second type, print a single integer in a single line --- the length of the shortest path between given vertices. If there is no such path, print $\\texttt{-1}$.", "hint": "Let $k$ be the number of queries of the second type.\n\n- ($3$ points): $n \\le 16$, $q \\le 16$;\n- ($3$ points): $n \\le 16$, $q \\le 2 \\cdot 10^5$;\n- ($2$ points): $n \\le 2000$, $q \\le 2 \\cdot 10^5,k \\le 5$;\n- ($8$ points): $n \\le 2000$, $q \\le 2000$;\n- ($9$ points): $n \\le 2 \\cdot 10^5$, $q \\le 2 \\cdot 10^5, k \\le 5$;\n- ($30$ points): $n \\le 2 \\cdot 10^5$, $q \\le 2 \\cdot 10^5$, there is no query of first type after query of second type;\n- ($45$ points): no additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UTS 2024] Two Trees", "background": "", "description": "给定两棵相同的无向树 $G$ 和 $H$，每棵树包含 $n$ 个顶点。两棵树被称为相同，当且仅当对于所有顶点对 $(u,v)$，$G$ 中存在边 $(G_u,G_v)$ 当且仅当 $H$ 中存在边 $(H_u,H_v)$。\n\n某些顶点可以通过无向边连接到另一棵树中的对应顶点。特别地，叶子顶点 $G_v$ 可以直接连接到顶点 $H_v$。如果叶子顶点 $G_v$ 直接连接到 $H_v$，则称顶点 $v$ 为**启用**状态，否则为**禁用**状态。\n\n初始时，所有叶子顶点均为**禁用**状态。需要处理以下两种查询：\n\n1. $1$ $v$ —— 切换顶点 $v$ 的状态（若当前为禁用则改为启用，反之亦然）；\n2. $2$ $u$ $v$ —— 输出从顶点 $G_u$ 到顶点 $H_v$ 的最短路径长度。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$ ($3 \\le n \\le 2 \\cdot 10^5$; $1 \\le q \\le 2 \\cdot 10^5$) —— 分别表示顶点数和查询数。\n\n接下来 $n-1$ 行，每行包含两个整数 $u$, $v$ $(1 \\le u,v \\le n)$ —— 描述树的边 $(G_u,G_v)$ 和 $(H_u,H_v)$。\n\n接下来 $q$ 行，每行描述一个查询。查询有两种形式：\n\n- $1$ $v$ $(1 \\le v \\le n)$ —— 切换顶点 $v$ 的状态；\n- $2$ $u$ $v$ $(1 \\le u,v \\le n)$ —— 查询从 $G_u$ 到 $H_v$ 的最短路径长度。\n", "outputFormat": "对于每个第二类查询，输出一个整数表示最短路径长度。若路径不存在，输出 $\\texttt{-1}$。\n", "hint": "设 $k$ 为第二类查询的数量。\n\n- （$3$ 分）：$n \\le 16$，$q \\le 16$；\n- （$3$ 分）：$n \\le 16$，$q \\le 2 \\cdot 10^5$；\n- （$2$ 分）：$n \\le 2000$，$q \\le 2 \\cdot 10^5$，$k \\le 5$；\n- （$8$ 分）：$n \\le 2000$，$q \\le 2000$；\n- （$9$ 分）：$n \\le 2 \\cdot 10^5$，$q \\le 2 \\cdot 10^5$，$k \\le 5$；\n- （$30$ 分）：$n \\le 2 \\cdot 10^5$，$q \\le 2 \\cdot 10^5$，且第二类查询后不会出现第一类查询；\n- （$45$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12563", "type": "P", "difficulty": 6, "samples": [["7\n4 7 9 7 4 1 2\n1 1 3 2 3 2\n1\n2 1", "11"], ["7\n6 6 5 1 6 6 4\n1 1 2 3 3 3\n3\n2 1\n1 1 1\n2 1", "7\n11"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "树状数组", "2024", "UOI（乌克兰）"], "title": "[UTS 2024] Remove Node", "background": "", "description": "You have a rooted tree with $n$ vertices, each assigned a value $a_x$. The root is node $1$. \n\nYou can perform operations where you merge two adjacent nodes $x$ and $y$ into a single node $z$, with the value of $z$ being equal to the minimum value between the two nodes. This operation changes edges connected to $x$ or $y$ to be connected to $z$. The cost of this operation is $|a_x - a_y|$. The total cost of multiple operations is the sum of individual operation costs.\n\nFor queries, you have two types:\n- $1\\ x\\ y$: This updates the value of node $x$ to $y$.\n- $2\\ x$: This asks for the minimum cost of operations to reduce the subtree rooted at $x$ to just one node.", "inputFormat": "The first line contains a single integer $n$ $(1 \\le n \\le 200\\,000)$, the number of vertices.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$, representing the assigned values of each node.\n\nThe third line contains $n-1$ integers $p_2, p_3, \\dots, p_n$ ($1 \\leq p_i \\leq n$), representing the parent of each node.\n\nThe fourth line contains one integer $q$ $(1 \\le q \\le 200\\,000)$, representing the total number of queries.\n\nThe following $q$ lines each contain a query:\n\nEither $1\\ x\\ y$ ($1 \\leq x \\leq n$, $1\\leq y \\leq 10^9$), or $2\\ x$ ($1\\leq x \\leq n$).", "outputFormat": "On each line of the input, you need to print the result of a query of type $2$, in the same order as the order from the input.", "hint": "- ($4$ points) $n \\le 1000, q=1$;\n- ($13$ points) $q=1$;\n- ($15$ points) the tree is a chain and there are only queries of the second type;\n- ($24$ points) there are only queries of the second type;\n- ($12$ points) $p_i=1$;\n- ($32$ points) no additional constraints.", "locale": "en", "translations": {"en": {"title": "[UTS 2024] Remove Node", "background": "", "description": "You have a rooted tree with $n$ vertices, each assigned a value $a_x$. The root is node $1$. \n\nYou can perform operations where you merge two adjacent nodes $x$ and $y$ into a single node $z$, with the value of $z$ being equal to the minimum value between the two nodes. This operation changes edges connected to $x$ or $y$ to be connected to $z$. The cost of this operation is $|a_x - a_y|$. The total cost of multiple operations is the sum of individual operation costs.\n\nFor queries, you have two types:\n- $1\\ x\\ y$: This updates the value of node $x$ to $y$.\n- $2\\ x$: This asks for the minimum cost of operations to reduce the subtree rooted at $x$ to just one node.", "inputFormat": "The first line contains a single integer $n$ $(1 \\le n \\le 200\\,000)$, the number of vertices.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$, representing the assigned values of each node.\n\nThe third line contains $n-1$ integers $p_2, p_3, \\dots, p_n$ ($1 \\leq p_i \\leq n$), representing the parent of each node.\n\nThe fourth line contains one integer $q$ $(1 \\le q \\le 200\\,000)$, representing the total number of queries.\n\nThe following $q$ lines each contain a query:\n\nEither $1\\ x\\ y$ ($1 \\leq x \\leq n$, $1\\leq y \\leq 10^9$), or $2\\ x$ ($1\\leq x \\leq n$).", "outputFormat": "On each line of the input, you need to print the result of a query of type $2$, in the same order as the order from the input.", "hint": "- ($4$ points) $n \\le 1000, q=1$;\n- ($13$ points) $q=1$;\n- ($15$ points) the tree is a chain and there are only queries of the second type;\n- ($24$ points) there are only queries of the second type;\n- ($12$ points) $p_i=1$;\n- ($32$ points) no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UTS 2024] Remove Node", "background": "", "description": "给定一棵包含 $n$ 个顶点的有根树，每个顶点 $x$ 被赋予一个权值 $a_x$。树的根节点为 $1$ 号节点。\n\n你可以执行以下操作：将两个相邻节点 $x$ 和 $y$ 合并为一个新节点 $z$，$z$ 的权值为这两个节点权值的最小值。该操作会将原本与 $x$ 或 $y$ 相连的边改为与 $z$ 相连。操作的成本为 $|a_x - a_y|$，多次操作的总成本为各次操作成本之和。\n\n你需要处理两种查询：\n1. $1\\ x\\ y$：将节点 $x$ 的权值更新为 $y$；\n2. $2\\ x$：询问将以 $x$ 为根的子树通过操作合并为单个节点的最小总成本。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\le n \\le 200\\,000)$，表示节点数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$，表示各节点的初始权值。\n\n第三行包含 $n-1$ 个整数 $p_2, p_3, \\dots, p_n$ ($1 \\leq p_i \\leq n$)，其中 $p_i$ 表示节点 $i$ 的父节点。\n\n第四行包含一个整数 $q$ $(1 \\le q \\le 200\\,000)$，表示查询总数。\n\n接下来 $q$ 行，每行一个查询：\n- $1\\ x\\ y$ ($1 \\leq x \\leq n$, $1\\leq y \\leq 10^9$)；\n- 或 $2\\ x$ ($1\\leq x \\leq n$)。", "outputFormat": "对于每个类型为 $2$ 的查询，按输入顺序输出一行，表示对应查询的结果。\n", "hint": "- （$4$ 分）：$n \\le 1000$，$q=1$；\n- （$13$ 分）：$q=1$；\n- （$15$ 分）：树为链状且仅包含第二类查询；\n- （$24$ 分）：仅包含第二类查询；\n- （$12$ 分）：$p_i=1$（所有非根节点的父节点均为根节点）；\n- （$32$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12564", "type": "P", "difficulty": 0, "samples": [["4\n3 2 5\n4 4 2\n1 4 4\n2 2 1", "6\n4\n6"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "UOI（乌克兰）"], "title": "[UTS 2024] Jobs", "background": "", "description": "You are given a set of $n$ points with integer coordinates. Each point has its own weight.\n\nWe can split the plane using a point of coordinates $(x, y)$ into four dials by drawing the vertical line in $x + 0.5$ and the horizontal line in $y + 0.5$. We define the weight of a dial to be the sum of the weights of all the points in that dial. Furthermore, the $\\underline{\\text{imbalance}}$ of such a split is the maximum difference between the weight of two of its dials.\n\nFor each integer $x$ such that $1 \\leq x < n$, find the minimum imbalance of a split that uses a point on the vertical line $x$.", "inputFormat": "The first line contains an integer $n$ ($1 \\leq n \\leq 2 \\cdot 10^5$).\n\nEach of the next $n$ lines contains three integers $x_i$, $y_i$, and $w_i$ ($1 \\leq x_i, y_i \\leq n$, $1 \\leq w_i \\leq 10^9$) --- the coordinates and weight of the $i$-th point.", "outputFormat": "The only line of the output should contain $n - 1$ integers, the required minimum imbalances.", "hint": "- ($7$ points): $1 \\leq n \\leq 200$;\n- ($17$ points): $1 \\leq n \\leq 5000$;\n- ($53$ points): $1 \\leq n \\leq 100\\,000$;\n- ($23$ points): no further restrictions.", "locale": "en", "translations": {"en": {"title": "[UTS 2024] Jobs", "background": "", "description": "You are given a set of $n$ points with integer coordinates. Each point has its own weight.\n\nWe can split the plane using a point of coordinates $(x, y)$ into four dials by drawing the vertical line in $x + 0.5$ and the horizontal line in $y + 0.5$. We define the weight of a dial to be the sum of the weights of all the points in that dial. Furthermore, the $\\underline{\\text{imbalance}}$ of such a split is the maximum difference between the weight of two of its dials.\n\nFor each integer $x$ such that $1 \\leq x < n$, find the minimum imbalance of a split that uses a point on the vertical line $x$.", "inputFormat": "The first line contains an integer $n$ ($1 \\leq n \\leq 2 \\cdot 10^5$).\n\nEach of the next $n$ lines contains three integers $x_i$, $y_i$, and $w_i$ ($1 \\leq x_i, y_i \\leq n$, $1 \\leq w_i \\leq 10^9$) --- the coordinates and weight of the $i$-th point.", "outputFormat": "The only line of the output should contain $n - 1$ integers, the required minimum imbalances.", "hint": "- ($7$ points): $1 \\leq n \\leq 200$;\n- ($17$ points): $1 \\leq n \\leq 5000$;\n- ($53$ points): $1 \\leq n \\leq 100\\,000$;\n- ($23$ points): no further restrictions.", "locale": "en"}, "zh-CN": {"title": "[UTS 2024] Jobs", "background": "", "description": "给定平面上 $n$ 个具有整数坐标的点的集合，每个点都有一个对应的权重。\n\n我们可以通过一个坐标为 $(x, y)$ 的点将平面划分为四个象限：在 $x + 0.5$ 处画一条垂直线，在 $y + 0.5$ 处画一条水平线。定义一个象限的权重为该象限内所有点的权重之和。进一步地，这种划分的**不平衡度**定义为四个象限权重中最大差值。\n\n对于每个满足 $1 \\leq x < n$ 的整数 $x$，求在垂直线 $x$ 上进行划分时可能的最小不平衡度。", "inputFormat": "第一行包含一个整数 $n$ ($1 \\leq n \\leq 2 \\cdot 10^5$)。\n\n接下来的 $n$ 行，每行包含三个整数 $x_i$, $y_i$ 和 $w_i$ ($1 \\leq x_i, y_i \\leq n$, $1 \\leq w_i \\leq 10^9$) —— 分别表示第 $i$ 个点的横坐标、纵坐标和权重。", "outputFormat": "输出仅一行，包含 $n - 1$ 个整数，依次表示每个 $x$ 对应的最小不平衡度。", "hint": "- （$7$ 分）：$1 \\leq n \\leq 200$；\n- （$17$ 分）：$1 \\leq n \\leq 5000$；\n- （$53$ 分）：$1 \\leq n \\leq 100\\,000$；\n- （$23$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12565", "type": "P", "difficulty": 0, "samples": [["8 13\n4\n0 3 8 9", "9310"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "UOI（乌克兰）"], "title": "[UTS 2024] Big", "background": "", "description": "You are given two integers, $a$ and $b$. You concatenate all the numbers in the range $[a, b]$ in an order that produces the largest possible number, $x$.\n\nYou are given $q$ queries of the form: $k$ --- what is the $k$-th digit of $x$?\n\nThe digits of $x$ are $0$-indexed, starting with the most significant one. \n\nIt is guaranteed that the length of $x$ will be at least $k + 1$.", "inputFormat": "The first line contains two integers $a$ and $b$ ($0 < a \\leq b \\leq 10^{17}$).\n\nThe second line contains one integer $q$ ($1 \\leq q \\leq 5 \\cdot 10^4$). \n\nThe third line contains $q$ integers $k_1, k_2, \\dots, k_q$ ($0 \\leq k_i \\leq 2 \\cdot 10^{18}$), representing the queries. It is guaranteed that all answers exist.", "outputFormat": "The only line of the output should contain a string of length $q$, where the $i$-th character will be the answer to the $i$-th query.", "hint": "- ($4$ points): $b - a \\leq 7$;\n- ($4$ points): $len(a) = len(b)$;\n- ($10$ points): $b - a \\leq 100000$\n- ($33$ points): $q \\leq 30$;\n- ($23$ points): $q \\leq 1\\,000$;\n- ($16$ points): $q \\leq 10\\,000$;\n- ($10$ points): no further restrictions.", "locale": "en", "translations": {"en": {"title": "[UTS 2024] Big", "background": "", "description": "You are given two integers, $a$ and $b$. You concatenate all the numbers in the range $[a, b]$ in an order that produces the largest possible number, $x$.\n\nYou are given $q$ queries of the form: $k$ --- what is the $k$-th digit of $x$?\n\nThe digits of $x$ are $0$-indexed, starting with the most significant one. \n\nIt is guaranteed that the length of $x$ will be at least $k + 1$.", "inputFormat": "The first line contains two integers $a$ and $b$ ($0 < a \\leq b \\leq 10^{17}$).\n\nThe second line contains one integer $q$ ($1 \\leq q \\leq 5 \\cdot 10^4$). \n\nThe third line contains $q$ integers $k_1, k_2, \\dots, k_q$ ($0 \\leq k_i \\leq 2 \\cdot 10^{18}$), representing the queries. It is guaranteed that all answers exist.", "outputFormat": "The only line of the output should contain a string of length $q$, where the $i$-th character will be the answer to the $i$-th query.", "hint": "- ($4$ points): $b - a \\leq 7$;\n- ($4$ points): $len(a) = len(b)$;\n- ($10$ points): $b - a \\leq 100000$\n- ($33$ points): $q \\leq 30$;\n- ($23$ points): $q \\leq 1\\,000$;\n- ($16$ points): $q \\leq 10\\,000$;\n- ($10$ points): no further restrictions.", "locale": "en"}, "zh-CN": {"title": "[UTS 2024] Big", "background": "", "description": "给定两个整数 $a$ 和 $b$。你需要将区间 $[a, b]$ 中的所有数字按照某种顺序拼接，形成一个尽可能大的数字 $x$。\n\n接下来有 $q$ 次查询，每次查询给出一个整数 $k$，询问数字 $x$ 的第 $k$ 位是什么。注意，$x$ 的位数从 0 开始编号，最高位为第 0 位。\n\n题目保证对于所有查询，$x$ 的长度至少为 $k + 1$。", "inputFormat": "第一行包含两个整数 $a$ 和 $b$ ($0 < a \\leq b \\leq 10^{17}$)。\n\n第二行包含一个整数 $q$ ($1 \\leq q \\leq 5 \\cdot 10^4$)，表示查询次数。\n\n第三行包含 $q$ 个整数 $k_1, k_2, \\dots, k_q$ ($0 \\leq k_i \\leq 2 \\cdot 10^{18}$)，表示每次查询的位置。题目保证所有查询的答案都存在。", "outputFormat": "输出一行，包含一个长度为 $q$ 的字符串，其中第 $i$ 个字符表示第 $i$ 次查询的答案。", "hint": "- （$4$ 分）：$b - a \\leq 7$；\n- （$4$ 分）：$a$ 和 $b$ 的位数相同；\n- （$10$ 分）：$b - a \\leq 100000$；\n- （$33$ 分）：$q \\leq 30$；\n- （$23$ 分）：$q \\leq 1\\,000$；\n- （$16$ 分）：$q \\leq 10\\,000$；\n- （$10$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12566", "type": "P", "difficulty": 4, "samples": [["5 5\n1 1\n1 2\n1 3\n1 4\n1 5", "Yes\n0 0 0 0 0"], ["6 4\n2 2 3\n1 6\n1 4\n2 1 5", "Yes\n1 -5 1 1"], ["7 2\n4 1 4 5 6\n3 1 2 6", "Yes\n0 1"], ["4 2\n2 2 3\n2 2 4", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2023] An Array and Several More Arrays", "background": "", "description": "There are $k$ arrays of integers $a_1, a_2, \\ldots, a_k$, where the array with index $i$ contains $l_i$ elements. Let $n = l_1 + l_2 + \\ldots + l_k$.\n\nYou need to find $k$ integers $d_1, d_2, \\ldots, d_k$ such that the numbers $(a_{i,j} + d_i)$ are pairwise distinct and satisfy $1 \\leq a_{i,j} + d_i \\leq n$.", "inputFormat": "The first line contains two integers $n$ and $k$ ($1 \\le n \\le 10^4$, $1 \\le k \\le 5$) -- the total number of elements in the arrays and the number of arrays, respectively.\n\nThe next $k$ lines contain the arrays. The $i$-th line contains an integer $l_i$ ($1\\le l_i\\le n$) and $l_i$ integers $a_{i,1},a_{i,2},\\ldots,a_{i,l_i}$ ($1 \\le a_{i,j} \\le n$) -- the length and elements of the $i$-th array, respectively.\n\nIt is guaranteed that $n = l_1 + l_2 + \\ldots + l_k$.", "outputFormat": "If the required values of $d$ do not exist, output a single line ``No``.\n\nOtherwise, output ``Yes`` on the first line.\n\nOn the second line, output $k$ integers $d_1,d_2,\\ldots,d_k$ -- the values that need to be added to the elements of the arrays to form a total of $n$ distinct integers from $1$ to $n$.\n\nIf there are multiple correct answers, any one of them may be output.", "hint": "In the first example, $d = [0,0,0,0,0]$ satisfies the condition, since after adding the corresponding values, the arrays $[1]$, $[2]$, $[3]$, $[4]$, $[5]$ are formed.\n\nIn the second example, $d = [1,-5,1,1]$ satisfies the condition, since after adding the corresponding values, the arrays $[3,4]$, $[1]$, $[5]$, $[2,6]$ are formed.\n\nIn the third example, $d = [0,1]$ satisfies the condition, since after adding the corresponding values, the arrays $[1,4,5,6]$ and $[2,3,7]$ are formed.\n\n### Scoring\n\n- ($8$ points): $k=1$;\n- ($9$ points): $a_{i,j}+1=a_{i,j+1}$ for $1 \\le i \\le k$, $1 \\le j < l_i$;\n- ($15$ points): $k \\le 2$;\n- ($21$ points): $k \\le 3$;\n- ($10$ points): $a_{i,j}+2=a_{i,j+1}$ for $1 \\le i \\le k$, $1 \\le j < l_i$;\n- ($10$ points): $(\\max_{j \\in [1;l_i]} a_{i,j}) - (\\min_{j \\in [1;l_i]} a_{i,j})=(n-k)$ for $1 \\le i \\le k$;\n- ($10$ points): $n \\le 30$;\n- ($17$ points): without additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2023] An Array and Several More Arrays", "background": "", "description": "There are $k$ arrays of integers $a_1, a_2, \\ldots, a_k$, where the array with index $i$ contains $l_i$ elements. Let $n = l_1 + l_2 + \\ldots + l_k$.\n\nYou need to find $k$ integers $d_1, d_2, \\ldots, d_k$ such that the numbers $(a_{i,j} + d_i)$ are pairwise distinct and satisfy $1 \\leq a_{i,j} + d_i \\leq n$.", "inputFormat": "The first line contains two integers $n$ and $k$ ($1 \\le n \\le 10^4$, $1 \\le k \\le 5$) -- the total number of elements in the arrays and the number of arrays, respectively.\n\nThe next $k$ lines contain the arrays. The $i$-th line contains an integer $l_i$ ($1\\le l_i\\le n$) and $l_i$ integers $a_{i,1},a_{i,2},\\ldots,a_{i,l_i}$ ($1 \\le a_{i,j} \\le n$) -- the length and elements of the $i$-th array, respectively.\n\nIt is guaranteed that $n = l_1 + l_2 + \\ldots + l_k$.", "outputFormat": "If the required values of $d$ do not exist, output a single line ``No``.\n\nOtherwise, output ``Yes`` on the first line.\n\nOn the second line, output $k$ integers $d_1,d_2,\\ldots,d_k$ -- the values that need to be added to the elements of the arrays to form a total of $n$ distinct integers from $1$ to $n$.\n\nIf there are multiple correct answers, any one of them may be output.", "hint": "In the first example, $d = [0,0,0,0,0]$ satisfies the condition, since after adding the corresponding values, the arrays $[1]$, $[2]$, $[3]$, $[4]$, $[5]$ are formed.\n\nIn the second example, $d = [1,-5,1,1]$ satisfies the condition, since after adding the corresponding values, the arrays $[3,4]$, $[1]$, $[5]$, $[2,6]$ are formed.\n\nIn the third example, $d = [0,1]$ satisfies the condition, since after adding the corresponding values, the arrays $[1,4,5,6]$ and $[2,3,7]$ are formed.\n\n### Scoring\n\n- ($8$ points): $k=1$;\n- ($9$ points): $a_{i,j}+1=a_{i,j+1}$ for $1 \\le i \\le k$, $1 \\le j < l_i$;\n- ($15$ points): $k \\le 2$;\n- ($21$ points): $k \\le 3$;\n- ($10$ points): $a_{i,j}+2=a_{i,j+1}$ for $1 \\le i \\le k$, $1 \\le j < l_i$;\n- ($10$ points): $(\\max_{j \\in [1;l_i]} a_{i,j}) - (\\min_{j \\in [1;l_i]} a_{i,j})=(n-k)$ for $1 \\le i \\le k$;\n- ($10$ points): $n \\le 30$;\n- ($17$ points): without additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023] An Array and Several More Arrays", "background": "", "description": "有 $k$ 个整数数组 $a_1, a_2, \\ldots, a_k$，其中第 $i$ 个数组包含 $l_i$ 个元素。设 $n = l_1 + l_2 + \\ldots + l_k$。\n\n你需要找到 $k$ 个整数 $d_1, d_2, \\ldots, d_k$，使得所有 $(a_{i,j} + d_i)$ 两两不同且满足 $1 \\leq a_{i,j} + d_i \\leq n$。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$（$1 \\le n \\le 10^4$，$1 \\le k \\le 5$）——分别表示所有数组的元素总数和数组的数量。\n\n接下来的 $k$ 行描述这些数组。第 $i$ 行包含一个整数 $l_i$（$1 \\le l_i \\le n$）和 $l_i$ 个整数 $a_{i,1}, a_{i,2}, \\ldots, a_{i,l_i}$（$1 \\le a_{i,j} \\le n$）——分别表示第 $i$ 个数组的长度和元素。\n\n保证 $n = l_1 + l_2 + \\ldots + l_k$。", "outputFormat": "如果不存在满足条件的 $d$，输出一行 ``No``。\n\n否则，第一行输出 ``Yes``。\n\n第二行输出 $k$ 个整数 $d_1, d_2, \\ldots, d_k$——这些值需要加到对应数组的元素上，以形成 $1$ 到 $n$ 之间的 $n$ 个不同的整数。\n\n如果有多个正确答案，输出任意一个即可。\n", "hint": "在第一个样例中，$d = [0,0,0,0,0]$ 满足条件，因为加上对应值后，数组变为 $[1]$、$[2]$、$[3]$、$[4]$、$[5]$。\n\n在第二个样例中，$d = [1,-5,1,1]$ 满足条件，因为加上对应值后，数组变为 $[3,4]$、$[1]$、$[5]$、$[2,6]$。\n\n在第三个样例中，$d = [0,1]$ 满足条件，因为加上对应值后，数组变为 $[1,4,5,6]$ 和 $[2,3,7]$。\n\n### 评分标准\n\n- （$8$ 分）：$k=1$；\n- （$9$ 分）：对于 $1 \\le i \\le k$ 且 $1 \\le j < l_i$，满足 $a_{i,j}+1=a_{i,j+1}$；\n- （$15$ 分）：$k \\le 2$；\n- （$21$ 分）：$k \\le 3$；\n- （$10$ 分）：对于 $1 \\le i \\le k$ 且 $1 \\le j < l_i$，满足 $a_{i,j}+2=a_{i,j+1}$；\n- （$10$ 分）：对于 $1 \\le i \\le k$，满足 $(\\max_{j \\in [1;l_i]} a_{i,j}) - (\\min_{j \\in [1;l_i]} a_{i,j})=(n-k)$；\n- （$10$ 分）：$n \\le 30$；\n- （$17$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12567", "type": "P", "difficulty": 0, "samples": [["4 1 0\n\n0\n\n0\n\n2", "\n? 1 1 1 2\n\n? 1 1 2 4\n\n? 1 1 3 4\n\n! 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "交互题", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2023] An Array of Coins and Weighing Requests", "background": "", "description": "**This is an interactive problem.**\n\nThere are $n$ coins arranged in a row and numbered from $1$ to $n$ from left to right.\n\nExactly $k$ ($k<n$) of these coins are fake, and the other $(n-k)$ coins are real. The fake coins are lighter than the real ones. All real coins have the same weight, while fake coins may have different weights. It is also known that the fake coins are $\\textbf{consecutive}$, that is, they have indexes $p, p+1, \\dots, (p+k-1)$.\n\nYou need to find the number of the leftmost fake coin. You can use weighing, which is similar to weighing on a two-pan balance scale: select two sets of non-intersecting coins and find out which set weighs more, or that the sets weigh the same.\n\n### Interactive Protocol\n\nThe first line contains three integers $n$, $k$, $g$ ($1 \\le k < n \\le 10^4$, $0 \\le g \\le 6$) - the total number of coins, the number of fake coins, and the test block number, respectively.\n\nTo perform the weighing request, output \"$\\texttt{?}$ $s_1$ $s_2$ $a_1$ $a_2$ $\\dots$ $a_{s_1}$ $b_1$ $b_2$ $\\dots$ $b_{s_2}$\", where $s_1$ and $s_2$ denote the sizes of the sets being weighed, and the arrays $a$ and $b$ denote the numbers of the coins belonging to the first and second sets, respectively.\n\nIn response to the request, the jury program will output a single integer $x$ ($x \\in \\{0,1,2\\}$). If $x = 1$, then the first set is heavier than the second; if $x = 2$, then the second set is heavier than the first; if $x = 0$, then the sets have the same weight.\n\nIf the request is invalid (i.e., the maximum number of requests has been exceeded or the request parameters are invalid), the jury program will output $\\texttt{-1}$ and terminate. In this case, terminate your program to receive the verdict $\\texttt{Wrong Answer}$.\n\nBe sure to call the $\\texttt{flush}$ method after outputting each line. You can use:\n- $\\texttt{fflush(stdout)}$, $\\texttt{cout <{}< endl}$, or $\\texttt{cout.flush()}$ in $\\texttt{C++}$;\n- $\\texttt{System.out.flush()}$ in $\\texttt{Java}$;\n- $\\texttt{flush(output)}$ in $\\texttt{Pascal}$;\n- $\\texttt{sys.stdout.flush()}$ in $\\texttt{Python}$;\n- consult the documentation for other programming languages.\n  \nTo give the answer, output a single line in the format \"$\\texttt{!}$ $p$\", where $p$ ($1 \\leq p \\leq n$) is the number of the leftmost fake coin.", "inputFormat": "See Interactive Protocol.", "outputFormat": "See Interactive Protocol.", "hint": "Let's define $q$ as the maximum number of weighing queries you can make in the tests of a certain block.\n\n- ($5$ points): $n \\le 16$, $q=16$;\n- ($9$ points): $k=1$, $q=16$;\n- ($7$ points): $k=1$, $q=11$;\n- ($16$ points): $k \\le 16$, $q=11$;\n- ($9$ points): all fake coins have the same weight, $q=11$;\n- (up to $54$ points): $q=300$. Let the maximum number of weighings used be $c$. If $c \\le 9$, you will get $54$ points, otherwise you will get $ \\lfloor 54 \\cdot \\max(-0.0004 \\cdot c + 0.3134, 0.018 + \\frac{9.0773}{c}) \\rfloor $ points.\n\nHere is the $\\tt{C++}$ code that computes the number of points for the last block of tests depending on the number of weighings used:\n\n```cpp\n((c <= 9) ? 54 : int(54 * (max((-0.0004 * c + 0.3134), (0.018 + 9.0773 / c)))))\n```\n\n### Scoring table\n\n$$\\begin{array}{|c|c|c|c|c|c|} \n\\hline\nc \\leq 17 & \\text{Points} & 18 \\leq c \\leq 27 & \\text{Points} & 28 \\leq c \\leq 300 & \\text{Points} \\\\\n\\hline\n\\leq 9 & 54 & 18 & 28 & 28 & 18 \\\\ \n10 & 49 & 19 & 26 & 29-30 & 17 \\\\ \n11 & 45 & 20 & 25 & 31-42 & 16 \\\\ \n12 & 41 & 21 & 24 & 43-89 & 15 \\\\ \n13 & 38 & 22 & 23 & 90-135 & 14 \\\\ \n14 & 35 & 23 & 22 & 136-181 & 13 \\\\ \n15 & 33 & 24 & 21 & 182-227 & 12 \\\\ \n16 & 31 & 25 & 20 & 228-274 & 11 \\\\ \n17 & 29 & 26-27 & 19 & 275-300 & 10 \\\\ \n\\hline\n\\end{array}$$", "locale": "en", "translations": {"en": {"title": "[UOI 2023] An Array of Coins and Weighing Requests", "background": "", "description": "**This is an interactive problem.**\n\nThere are $n$ coins arranged in a row and numbered from $1$ to $n$ from left to right.\n\nExactly $k$ ($k<n$) of these coins are fake, and the other $(n-k)$ coins are real. The fake coins are lighter than the real ones. All real coins have the same weight, while fake coins may have different weights. It is also known that the fake coins are $\\textbf{consecutive}$, that is, they have indexes $p, p+1, \\dots, (p+k-1)$.\n\nYou need to find the number of the leftmost fake coin. You can use weighing, which is similar to weighing on a two-pan balance scale: select two sets of non-intersecting coins and find out which set weighs more, or that the sets weigh the same.\n\n### Interactive Protocol\n\nThe first line contains three integers $n$, $k$, $g$ ($1 \\le k < n \\le 10^4$, $0 \\le g \\le 6$) - the total number of coins, the number of fake coins, and the test block number, respectively.\n\nTo perform the weighing request, output \"$\\texttt{?}$ $s_1$ $s_2$ $a_1$ $a_2$ $\\dots$ $a_{s_1}$ $b_1$ $b_2$ $\\dots$ $b_{s_2}$\", where $s_1$ and $s_2$ denote the sizes of the sets being weighed, and the arrays $a$ and $b$ denote the numbers of the coins belonging to the first and second sets, respectively.\n\nIn response to the request, the jury program will output a single integer $x$ ($x \\in \\{0,1,2\\}$). If $x = 1$, then the first set is heavier than the second; if $x = 2$, then the second set is heavier than the first; if $x = 0$, then the sets have the same weight.\n\nIf the request is invalid (i.e., the maximum number of requests has been exceeded or the request parameters are invalid), the jury program will output $\\texttt{-1}$ and terminate. In this case, terminate your program to receive the verdict $\\texttt{Wrong Answer}$.\n\nBe sure to call the $\\texttt{flush}$ method after outputting each line. You can use:\n- $\\texttt{fflush(stdout)}$, $\\texttt{cout <{}< endl}$, or $\\texttt{cout.flush()}$ in $\\texttt{C++}$;\n- $\\texttt{System.out.flush()}$ in $\\texttt{Java}$;\n- $\\texttt{flush(output)}$ in $\\texttt{Pascal}$;\n- $\\texttt{sys.stdout.flush()}$ in $\\texttt{Python}$;\n- consult the documentation for other programming languages.\n  \nTo give the answer, output a single line in the format \"$\\texttt{!}$ $p$\", where $p$ ($1 \\leq p \\leq n$) is the number of the leftmost fake coin.", "inputFormat": "See Interactive Protocol.", "outputFormat": "See Interactive Protocol.", "hint": "Let's define $q$ as the maximum number of weighing queries you can make in the tests of a certain block.\n\n- ($5$ points): $n \\le 16$, $q=16$;\n- ($9$ points): $k=1$, $q=16$;\n- ($7$ points): $k=1$, $q=11$;\n- ($16$ points): $k \\le 16$, $q=11$;\n- ($9$ points): all fake coins have the same weight, $q=11$;\n- (up to $54$ points): $q=300$. Let the maximum number of weighings used be $c$. If $c \\le 9$, you will get $54$ points, otherwise you will get $ \\lfloor 54 \\cdot \\max(-0.0004 \\cdot c + 0.3134, 0.018 + \\frac{9.0773}{c}) \\rfloor $ points.\n\nHere is the $\\tt{C++}$ code that computes the number of points for the last block of tests depending on the number of weighings used:\n\n```cpp\n((c <= 9) ? 54 : int(54 * (max((-0.0004 * c + 0.3134), (0.018 + 9.0773 / c)))))\n```\n\n### Scoring table\n\n$$\\begin{array}{|c|c|c|c|c|c|} \n\\hline\nc \\leq 17 & \\text{Points} & 18 \\leq c \\leq 27 & \\text{Points} & 28 \\leq c \\leq 300 & \\text{Points} \\\\\n\\hline\n\\leq 9 & 54 & 18 & 28 & 28 & 18 \\\\ \n10 & 49 & 19 & 26 & 29-30 & 17 \\\\ \n11 & 45 & 20 & 25 & 31-42 & 16 \\\\ \n12 & 41 & 21 & 24 & 43-89 & 15 \\\\ \n13 & 38 & 22 & 23 & 90-135 & 14 \\\\ \n14 & 35 & 23 & 22 & 136-181 & 13 \\\\ \n15 & 33 & 24 & 21 & 182-227 & 12 \\\\ \n16 & 31 & 25 & 20 & 228-274 & 11 \\\\ \n17 & 29 & 26-27 & 19 & 275-300 & 10 \\\\ \n\\hline\n\\end{array}$$", "locale": "en"}, "zh-CN": {"title": "[UOI 2023] An Array of Coins and Weighing Requests", "background": "", "description": "**这是一道交互题。**\n\n有 $n$ 枚硬币排成一行，从左到右编号为 $1$ 到 $n$。\n\n其中恰好有 $k$ 枚（$k<n$）是假币，其余 $(n-k)$ 枚是真币。假币比真币轻，且所有真币重量相同，而假币的重量可能不同。已知假币是**连续的**，即它们的编号为 $p, p+1, \\dots, (p+k-1)$。\n\n你需要找出最左侧假币的编号。可以通过称重操作来获取信息：选择两个不相交的硬币集合，比较它们的重量，判断哪个集合更重或两者重量相同。\n\n### 交互协议\n\n第一行包含三个整数 $n$、$k$、$g$（$1 \\le k < n \\le 10^4$，$0 \\le g \\le 6$）——分别表示硬币总数、假币数量和测试块编号。\n\n要执行称重请求，输出 \"$\\texttt{?}$ $s_1$ $s_2$ $a_1$ $a_2$ $\\dots$ $a_{s_1}$ $b_1$ $b_2$ $\\dots$ $b_{s_2}$\"，其中 $s_1$ 和 $s_2$ 表示待称重集合的大小，数组 $a$ 和 $b$ 分别表示属于第一个和第二个集合的硬币编号。\n\n作为响应，评测程序会输出一个整数 $x$（$x \\in \\{0,1,2\\}$）。如果 $x = 1$，表示第一个集合比第二个重；如果 $x = 2$，表示第二个集合比第一个重；如果 $x = 0$，表示两者重量相同。\n\n如果请求无效（例如超过最大请求次数或参数非法），评测程序会输出 $\\texttt{-1}$ 并终止程序。此时，你的程序应终止运行，否则会收到 $\\texttt{Wrong Answer}$ 的判定。\n\n每次输出后务必调用 $\\texttt{flush}$ 方法。可以使用以下方式：\n- C++：$\\texttt{fflush(stdout)}$、$\\texttt{cout << endl}$ 或 $\\texttt{cout.flush()}$；\n- Java：$\\texttt{System.out.flush()}$；\n- Pascal：$\\texttt{flush(output)}$；\n- Python：$\\texttt{sys.stdout.flush()}$；\n- 其他编程语言请查阅相关文档。\n\n提交答案时，输出一行 \"$\\texttt{!}$ $p$\"，其中 $p$（$1 \\leq p \\leq n$）是最左侧假币的编号。", "inputFormat": "见交互协议。", "outputFormat": "见交互协议。", "hint": "定义 $q$ 为某个测试块中允许的最大称重查询次数。\n\n- （$5$ 分）：$n \\le 16$，$q=16$；\n- （$9$ 分）：$k=1$，$q=16$；\n- （$7$ 分）：$k=1$，$q=11$；\n- （$16$ 分）：$k \\le 16$，$q=11$；\n- （$9$ 分）：所有假币重量相同，$q=11$；\n- （最多 $54$ 分）：$q=300$。设实际使用的称重次数为 $c$，若 $c \\le 9$，得 $54$ 分；否则得 $ \\lfloor 54 \\cdot \\max(-0.0004 \\cdot c + 0.3134, 0.018 + \\frac{9.0773}{c}) \\rfloor $ 分。\n\n以下是计算最后一个测试块得分的 C++ 代码（基于称重次数 $c$）：\n\n```cpp\n((c <= 9) ? 54 : int(54 * (max((-0.0004 * c + 0.3134), (0.018 + 9.0773 / c)))))\n```\n\n### 评分表\n\n$$\\begin{array}{|c|c|c|c|c|c|} \n\\hline\nc \\leq 17 & \\text{得分} & 18 \\leq c \\leq 27 & \\text{得分} & 28 \\leq c \\leq 300 & \\text{得分} \\\\\n\\hline\n\\leq 9 & 54 & 18 & 28 & 28 & 18 \\\\ \n10 & 49 & 19 & 26 & 29-30 & 17 \\\\ \n11 & 45 & 20 & 25 & 31-42 & 16 \\\\ \n12 & 41 & 21 & 24 & 43-89 & 15 \\\\ \n13 & 38 & 22 & 23 & 90-135 & 14 \\\\ \n14 & 35 & 23 & 22 & 136-181 & 13 \\\\ \n15 & 33 & 24 & 21 & 182-227 & 12 \\\\ \n16 & 31 & 25 & 20 & 228-274 & 11 \\\\ \n17 & 29 & 26-27 & 19 & 275-300 & 10 \\\\ \n\\hline\n\\end{array}$$", "locale": "zh-CN"}}}
{"pid": "P12568", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3", "0"], ["5\n2 3 2 3 2", "2"], ["9\n2 3 1 1 3 2 1 3 3", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["倍增", "2023", "UOI（乌克兰）"], "title": "[UOI 2023] An Array and Range Additions", "background": "", "description": "Given an array of integers $a$ of length $n$.\n\nYou can modify the array using the **addition operation**. To apply the **addition operation**, you need to perform three sequential actions:\n\n- Choose any integer $x$.\n- Choose any subarray $[l;r]$ of the array.\n- Add $x$ to each element of the chosen subarray (perform the assignment operation $a_i \\leftarrow (a_i+x)$ for $l \\le i\\le r$).\n\nFind the minimum number of **addition operations** required to make all elements of the array $a$ pairwise distinct.", "inputFormat": "The first line contains a single integer $n$ ($1 \\le n \\le 2 \\cdot 10^5$) --- the length of the array.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($1 \\le a_i \\le 10^9$) --- the elements of the array.", "outputFormat": "Output a single integer --- the minimum number of **addition operations** required to make all elements of the array $a$ pairwise distinct.", "hint": "In the first example, all elements of the array $a$ are pairwise distinct.\n\nIn the second example, after applying two \\textit{addition operations} with parameters $x=-3$, $l=1$, $r=2$ and $x=-1$, $l=1$, $r=3$, the array $a$ becomes equal to $[-2,-1,1,3,2]$.\n\nIn the third example, after applying two \\textit{addition operations} with parameters $x=-3$, $l=4$, $r=8$ and $x=-10$, $l=7$, $r=9$, the array $a$ becomes equal to $[2,3,1,-2,0,-1,-12,-10,-7]$.\n\n### Scoring\n\n- ($9$ points): all elements of the array $a$ are equal to $1$.\n- ($15$ points): $1 \\le a_i \\le 2$ for $1 \\le i \\le n$; $a_i \\le a_{i+1}$ for $1 \\le i < n$.\n- ($14$ points): $n \\le 8$.\n- ($17$ points): $a_1 = a_n$.\n- ($12$ points): $n \\le 2000$.\n- ($12$ points): $1 \\le a_i \\le 100$ for $1\\le i\\le n$.\n- ($21$ points): no additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2023] An Array and Range Additions", "background": "", "description": "Given an array of integers $a$ of length $n$.\n\nYou can modify the array using the **addition operation**. To apply the **addition operation**, you need to perform three sequential actions:\n\n- Choose any integer $x$.\n- Choose any subarray $[l;r]$ of the array.\n- Add $x$ to each element of the chosen subarray (perform the assignment operation $a_i \\leftarrow (a_i+x)$ for $l \\le i\\le r$).\n\nFind the minimum number of **addition operations** required to make all elements of the array $a$ pairwise distinct.", "inputFormat": "The first line contains a single integer $n$ ($1 \\le n \\le 2 \\cdot 10^5$) --- the length of the array.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($1 \\le a_i \\le 10^9$) --- the elements of the array.", "outputFormat": "Output a single integer --- the minimum number of **addition operations** required to make all elements of the array $a$ pairwise distinct.", "hint": "In the first example, all elements of the array $a$ are pairwise distinct.\n\nIn the second example, after applying two \\textit{addition operations} with parameters $x=-3$, $l=1$, $r=2$ and $x=-1$, $l=1$, $r=3$, the array $a$ becomes equal to $[-2,-1,1,3,2]$.\n\nIn the third example, after applying two \\textit{addition operations} with parameters $x=-3$, $l=4$, $r=8$ and $x=-10$, $l=7$, $r=9$, the array $a$ becomes equal to $[2,3,1,-2,0,-1,-12,-10,-7]$.\n\n### Scoring\n\n- ($9$ points): all elements of the array $a$ are equal to $1$.\n- ($15$ points): $1 \\le a_i \\le 2$ for $1 \\le i \\le n$; $a_i \\le a_{i+1}$ for $1 \\le i < n$.\n- ($14$ points): $n \\le 8$.\n- ($17$ points): $a_1 = a_n$.\n- ($12$ points): $n \\le 2000$.\n- ($12$ points): $1 \\le a_i \\le 100$ for $1\\le i\\le n$.\n- ($21$ points): no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023] An Array and Range Additions", "background": "", "description": "给定一个长度为 $n$ 的整数数组 $a$。\n\n你可以通过**加法操作**来修改数组。要执行**加法操作**，你需要依次完成以下三个步骤：\n\n- 选择任意整数 $x$。\n- 选择数组中的任意子数组 $[l;r]$。\n- 将 $x$ 加到所选子数组的每个元素上（即对 $l \\le i \\le r$ 执行赋值操作 $a_i \\leftarrow (a_i + x)$）。\n\n找到使数组 $a$ 中所有元素两两不同的最小**加法操作**次数。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 2 \\cdot 10^5$）——数组的长度。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$（$1 \\le a_i \\le 10^9$）——数组的元素。", "outputFormat": "输出一个整数——使数组 $a$ 中所有元素两两不同的最小**加法操作**次数。", "hint": "在第一个样例中，数组 $a$ 的所有元素已经是两两不同的。\n\n在第二个样例中，应用两次**加法操作**，参数分别为 $x=-3$、$l=1$、$r=2$ 和 $x=-1$、$l=1$、$r=3$ 后，数组 $a$ 变为 $[-2, -1, 1, 3, 2]$。\n\n在第三个样例中，应用两次**加法操作**，参数分别为 $x=-3$、$l=4$、$r=8$ 和 $x=-10$、$l=7$、$r=9$ 后，数组 $a$ 变为 $[2, 3, 1, -2, 0, -1, -12, -10, -7]$。\n\n### 评分标准\n\n- （$9$ 分）：数组 $a$ 的所有元素均为 $1$。\n- （$15$ 分）：对于 $1 \\le i \\le n$，$1 \\le a_i \\le 2$；对于 $1 \\le i < n$，$a_i \\le a_{i+1}$。\n- （$14$ 分）：$n \\le 8$。\n- （$17$ 分）：$a_1 = a_n$。\n- （$12$ 分）：$n \\le 2000$。\n- （$12$ 分）：对于 $1 \\le i \\le n$，$1 \\le a_i \\le 100$。\n- （$21$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12569", "type": "P", "difficulty": 7, "samples": [["7 0\n0 0 1 -1 -1 -1 1", "2\n3 1 3\n2 1 7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2023", "Special Judge", "凸包", "分类讨论", "李超线段树", "UOI（乌克兰）"], "title": "[UOI 2023] An Array and Partial Sums", "background": "", "description": "A prefix sum array of an integer array $a$ of length $n$ is an array $b$ of length $n$ such that $b_i = a_1+a_2+\\ldots+a_i$.\n\nA suffix sum array of an integer array $a$ of length $n$ is an array $b$ of length $n$ such that $b_i = a_n+a_{n-1}+\\ldots+a_i$.\n\nWe call the **normalization** of an integer array $a$ of length $n$ performing the assignment $a_i \\leftarrow \\max(\\min(a_i, 10^{18}),-10^{18})$ for $1 \\le i \\le n$.\n\nAn integer array $a$ of length $n$ is given.\n\nWe are allowed to perform operations of three types:\n\n- replace each element of array $a$ with its opposite (perform the assignment $a_i \\leftarrow (-a_i)$ for $1 \\le i \\le n$);\n- select any subsegment of the array $a$ and replace it with the array of its prefix sums, then **normalize** array $a$;\n- select any subsegment of the array $a$ and replace it with the array of its suffix sums, then **normalize** array $a$.\n\nFind the shortest sequence of operations required to make all elements of array $a$ non-negative.\n\nNote that for some blocks of tests, it is allowed to find a sequence of operations that is not the shortest possible.", "inputFormat": "The first line contains two integers $n$ and $g$ ($1 \\le n \\le 2 \\cdot 10^5$, $0 \\le g \\le 8$) --- the length of the array and the test group number, respectively.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($-1 \\le a_i \\le 1$) --- the elements of the array.", "outputFormat": "In the first line, print a single integer $m$~--- the minimum number of operations required to make all elements of the array $a$ non-negative.\n\nIn the next $m$ lines, output the descriptions of the operations. Output the descriptions of operations of the first type in the format \"$\\texttt{1}$\". Output the descriptions of operations of the second and third types in the formats \"$\\texttt{2 l r}$\" and \"$\\texttt{3 l r}$\", respectively, where $l$ and $r$ ($1 \\le l \\le r \\le n$) denote the left and right boundaries of the subarray of the corresponding operation.\n\nIf there are multiple correct answers, any of them may be printed.", "hint": "In the first example, the array $a$ changes twice:\n- after performing the third type of operation with parameters $l=1$, $r=3$, the array $a$ becomes equal to $[1,1,1,-1,-1,-1,1]$;\n- after performing the second type of operation with parameters $l=1$, $r=7$, the array $a$ becomes equal to $[1,2,3,2,1,0,1]$.\n\n### Scoring\n\nLet the minimum number of operations required to make all elements of the array $a$ non-negative for a certain test be $m_{ans}$, and your solution uses $m_{user}$ operations.\n\n- ($14$ points): $m_{ans} \\le 1$;\n- ($17$ points): your solution will be considered correct if $m_{user} \\le 100$. It can be proved that there always exists a sequence of no more than $100$ operations under the given constraints;\n- ($18$ points): your solution will be considered correct if $m_{user} \\le m_{ans} + 3$;\n- ($7$ points): your solution will be considered correct if $m_{user} \\le m_{ans} + 1$;\n- ($7$ points): $n \\le 3000$; it is guaranteed that **all** shortest sequences of operations contain **only** operations of the second type;\n- ($19$ points): it is guaranteed that **all** shortest sequences of operations contain **only** operations of the second type;\n- ($17$ points): $n \\le 3000$;\n- ($1$ point): no additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2023] An Array and Partial Sums", "background": "", "description": "A prefix sum array of an integer array $a$ of length $n$ is an array $b$ of length $n$ such that $b_i = a_1+a_2+\\ldots+a_i$.\n\nA suffix sum array of an integer array $a$ of length $n$ is an array $b$ of length $n$ such that $b_i = a_n+a_{n-1}+\\ldots+a_i$.\n\nWe call the **normalization** of an integer array $a$ of length $n$ performing the assignment $a_i \\leftarrow \\max(\\min(a_i, 10^{18}),-10^{18})$ for $1 \\le i \\le n$.\n\nAn integer array $a$ of length $n$ is given.\n\nWe are allowed to perform operations of three types:\n\n- replace each element of array $a$ with its opposite (perform the assignment $a_i \\leftarrow (-a_i)$ for $1 \\le i \\le n$);\n- select any subsegment of the array $a$ and replace it with the array of its prefix sums, then **normalize** array $a$;\n- select any subsegment of the array $a$ and replace it with the array of its suffix sums, then **normalize** array $a$.\n\nFind the shortest sequence of operations required to make all elements of array $a$ non-negative.\n\nNote that for some blocks of tests, it is allowed to find a sequence of operations that is not the shortest possible.", "inputFormat": "The first line contains two integers $n$ and $g$ ($1 \\le n \\le 2 \\cdot 10^5$, $0 \\le g \\le 8$) --- the length of the array and the test group number, respectively.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($-1 \\le a_i \\le 1$) --- the elements of the array.", "outputFormat": "In the first line, print a single integer $m$~--- the minimum number of operations required to make all elements of the array $a$ non-negative.\n\nIn the next $m$ lines, output the descriptions of the operations. Output the descriptions of operations of the first type in the format \"$\\texttt{1}$\". Output the descriptions of operations of the second and third types in the formats \"$\\texttt{2 l r}$\" and \"$\\texttt{3 l r}$\", respectively, where $l$ and $r$ ($1 \\le l \\le r \\le n$) denote the left and right boundaries of the subarray of the corresponding operation.\n\nIf there are multiple correct answers, any of them may be printed.", "hint": "In the first example, the array $a$ changes twice:\n- after performing the third type of operation with parameters $l=1$, $r=3$, the array $a$ becomes equal to $[1,1,1,-1,-1,-1,1]$;\n- after performing the second type of operation with parameters $l=1$, $r=7$, the array $a$ becomes equal to $[1,2,3,2,1,0,1]$.\n\n### Scoring\n\nLet the minimum number of operations required to make all elements of the array $a$ non-negative for a certain test be $m_{ans}$, and your solution uses $m_{user}$ operations.\n\n- ($14$ points): $m_{ans} \\le 1$;\n- ($17$ points): your solution will be considered correct if $m_{user} \\le 100$. It can be proved that there always exists a sequence of no more than $100$ operations under the given constraints;\n- ($18$ points): your solution will be considered correct if $m_{user} \\le m_{ans} + 3$;\n- ($7$ points): your solution will be considered correct if $m_{user} \\le m_{ans} + 1$;\n- ($7$ points): $n \\le 3000$; it is guaranteed that **all** shortest sequences of operations contain **only** operations of the second type;\n- ($19$ points): it is guaranteed that **all** shortest sequences of operations contain **only** operations of the second type;\n- ($17$ points): $n \\le 3000$;\n- ($1$ point): no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023] An Array and Partial Sums", "background": "", "description": "对于一个长度为 $n$ 的整数数组 $a$，其**前缀和数组** $b$ 定义为长度为 $n$ 的数组，其中 $b_i = a_1 + a_2 + \\ldots + a_i$。\n\n对于一个长度为 $n$ 的整数数组 $a$，其**后缀和数组** $b$ 定义为长度为 $n$ 的数组，其中 $b_i = a_n + a_{n-1} + \\ldots + a_i$。\n\n我们定义整数数组 $a$ 的**标准化**操作为：对于 $1 \\le i \\le n$，执行赋值 $a_i \\leftarrow \\max(\\min(a_i, 10^{18}), -10^{18})$。\n\n给定一个长度为 $n$ 的整数数组 $a$。\n\n允许执行以下三种类型的操作：\n\n1. 将数组 $a$ 的每个元素取相反数（即对 $1 \\le i \\le n$ 执行赋值 $a_i \\leftarrow (-a_i)$）；\n2. 选择数组 $a$ 的任意子段，并用其前缀和数组替换该子段，然后对数组 $a$ 进行**标准化**；\n3. 选择数组 $a$ 的任意子段，并用其后缀和数组替换该子段，然后对数组 $a$ 进行**标准化**。\n\n找到使数组 $a$ 的所有元素变为非负数的最短操作序列。\n\n注意：对于某些测试用例组，允许输出的操作序列不一定是最短的。", "inputFormat": "第一行包含两个整数 $n$ 和 $g$（$1 \\le n \\le 2 \\cdot 10^5$，$0 \\le g \\le 8$）——分别表示数组的长度和测试用例组编号。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$（$-1 \\le a_i \\le 1$）——数组的元素。\n", "outputFormat": "第一行输出一个整数 $m$ —— 使数组 $a$ 的所有元素变为非负数所需的最小操作次数。\n\n接下来的 $m$ 行，每行输出一个操作的描述：\n- 对于类型 1 的操作，输出格式为 `1`；\n- 对于类型 2 的操作，输出格式为 `2 l r`，其中 $l$ 和 $r$（$1 \\le l \\le r \\le n$）表示操作子段的左右边界；\n- 对于类型 3 的操作，输出格式为 `3 l r`，其中 $l$ 和 $r$ 的定义同上。\n\n如果存在多个正确答案，输出任意一个均可。", "hint": "在第一个样例中，数组 $a$ 的变化如下：\n1. 执行类型 3 的操作，参数为 $l=1$、$r=3$ 后，数组变为 $[1, 1, 1, -1, -1, -1, 1]$；\n2. 执行类型 2 的操作，参数为 $l=1$、$r=7$ 后，数组变为 $[1, 2, 3, 2, 1, 0, 1]$。\n\n### 评分标准\n\n设某测试用例的最短操作次数为 $m_{ans}$，你的解使用的操作次数为 $m_{user}$。\n\n- （$14$ 分）：$m_{ans} \\le 1$；\n- （$17$ 分）：若 $m_{user} \\le 100$ 则视为正确。可以证明在给定约束下总存在不超过 $100$ 次操作的解；\n- （$18$ 分）：若 $m_{user} \\le m_{ans} + 3$ 则视为正确；\n- （$7$ 分）：若 $m_{user} \\le m_{ans} + 1$ 则视为正确；\n- （$7$ 分）：$n \\le 3000$，且保证**所有**最短操作序列**仅包含**类型 2 的操作；\n- （$19$ 分）：保证**所有**最短操作序列**仅包含**类型 2 的操作；\n- （$17$ 分）：$n \\le 3000$；\n- （$1$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P12570", "type": "P", "difficulty": 5, "samples": [["4\n1 1 1 1", "Yes"], ["6\n1 2 3 3 2 1", "Yes"], ["6\n1 2 1 3 2 3", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["平衡树", "2023", "可持久化线段树", "前缀和", "STL", "UOI（乌克兰）"], "title": "[UOI 2023] An Array and Medians of Subarrays", "background": "", "description": "Let's call the median of an array of length $(2 \\cdot k + 1)$ the number that appears in position $(k + 1)$ after sorting its elements in non-decreasing order. For example, the medians of the arrays $[1]$, $[4,2,5]$, and $[6,5,1,2,3]$ are $1$, $4$, and $3$, respectively.\n\nYou are given an array of integers $a$ of **even** length $n$.\n\nDetermine whether it is possible to split $a$ into several subarrays of **odd** length such that all the medians of these subarrays are pairwise equal.\n\nFormally, you need to determine whether there exists a sequence of integers $i_1, i_2, \\ldots, i_k$ such that the following conditions are satisfied:\n\n- $1 = i_1 < i_2 < \\ldots < i_k = (n + 1)$;\n- $(i_2 - i_1) \\bmod 2 = (i_3 - i_2) \\bmod 2 = \\ldots = (i_k - i_{k - 1}) \\bmod 2 = 1$;\n- $f(a[i_1..(i_2-1)]) = f(a[i_2..(i_3-1)]) = \\ldots = f(a[i_{k - 1}..(i_k - 1)])$, where $a[l..r]$ denotes the subarray consisting of elements $a_l, a_{l + 1}, \\ldots, a_r$, and $f(a)$ denotes the median of the array $a$.", "inputFormat": "The first line contains a single even integer $n$ ($2 \\le n \\le 2 \\cdot 10^5$) --- the length of the array.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($1\\le a_i\\le 10^9)$ --- the elements of the array.\n\nIt is guaranteed that $n$ is even.", "outputFormat": "Output $\\tt{Yes}$ if it is possible to divide $a$ into several subarrays of odd length in such a way that all medians of these subarrays are pairwise equal, and $\\tt{No}$ otherwise.", "hint": "In the first example, the array $[1,1,1,1]$ can be divided into the arrays $[1]$ and $[1,1,1]$ with medians equal to $1$.\n\nIn the second example, the array $[1,2,3,3,2,1]$ can be divided into the arrays $[1,2,3]$ and $[3,2,1]$ with medians equal to $2$.\n\nIn the third example, the array $[1,2,1,3,2,3]$ cannot be divided into several arrays of odd length with the same median values.\n\n### Scoring\n\n- ($3$ points): $n=2$;\n- ($14$ points): $1 \\le a_i \\le 2$ for $1\\le i\\le n$;\n- ($12$ points): $a_i \\le a_{i+1}$ for $1\\le i < n$;\n- ($16$ points): $1 \\le a_i \\le 3$ for $1 \\le i \\le n$; each value occurs in $a$ no more than $n \\over 2$ times;\n- ($17$ points): $n \\le 100$;\n- ($18$ points): $n \\le 2000$;\n- ($20$ points): no additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2023] An Array and Medians of Subarrays", "background": "", "description": "Let's call the median of an array of length $(2 \\cdot k + 1)$ the number that appears in position $(k + 1)$ after sorting its elements in non-decreasing order. For example, the medians of the arrays $[1]$, $[4,2,5]$, and $[6,5,1,2,3]$ are $1$, $4$, and $3$, respectively.\n\nYou are given an array of integers $a$ of **even** length $n$.\n\nDetermine whether it is possible to split $a$ into several subarrays of **odd** length such that all the medians of these subarrays are pairwise equal.\n\nFormally, you need to determine whether there exists a sequence of integers $i_1, i_2, \\ldots, i_k$ such that the following conditions are satisfied:\n\n- $1 = i_1 < i_2 < \\ldots < i_k = (n + 1)$;\n- $(i_2 - i_1) \\bmod 2 = (i_3 - i_2) \\bmod 2 = \\ldots = (i_k - i_{k - 1}) \\bmod 2 = 1$;\n- $f(a[i_1..(i_2-1)]) = f(a[i_2..(i_3-1)]) = \\ldots = f(a[i_{k - 1}..(i_k - 1)])$, where $a[l..r]$ denotes the subarray consisting of elements $a_l, a_{l + 1}, \\ldots, a_r$, and $f(a)$ denotes the median of the array $a$.", "inputFormat": "The first line contains a single even integer $n$ ($2 \\le n \\le 2 \\cdot 10^5$) --- the length of the array.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$ ($1\\le a_i\\le 10^9)$ --- the elements of the array.\n\nIt is guaranteed that $n$ is even.", "outputFormat": "Output $\\tt{Yes}$ if it is possible to divide $a$ into several subarrays of odd length in such a way that all medians of these subarrays are pairwise equal, and $\\tt{No}$ otherwise.", "hint": "In the first example, the array $[1,1,1,1]$ can be divided into the arrays $[1]$ and $[1,1,1]$ with medians equal to $1$.\n\nIn the second example, the array $[1,2,3,3,2,1]$ can be divided into the arrays $[1,2,3]$ and $[3,2,1]$ with medians equal to $2$.\n\nIn the third example, the array $[1,2,1,3,2,3]$ cannot be divided into several arrays of odd length with the same median values.\n\n### Scoring\n\n- ($3$ points): $n=2$;\n- ($14$ points): $1 \\le a_i \\le 2$ for $1\\le i\\le n$;\n- ($12$ points): $a_i \\le a_{i+1}$ for $1\\le i < n$;\n- ($16$ points): $1 \\le a_i \\le 3$ for $1 \\le i \\le n$; each value occurs in $a$ no more than $n \\over 2$ times;\n- ($17$ points): $n \\le 100$;\n- ($18$ points): $n \\le 2000$;\n- ($20$ points): no additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023] An Array and Medians of Subarrays", "background": "", "description": "对于一个长度为 $(2 \\cdot k + 1)$ 的数组，我们将其元素按非递减顺序排序后，第 $(k + 1)$ 位的数字称为该数组的**中位数**。例如，数组 $[1]$、$[4,2,5]$ 和 $[6,5,1,2,3]$ 的中位数分别是 $1$、$4$ 和 $3$。\n\n给定一个长度为**偶数** $n$ 的整数数组 $a$。\n\n判断是否可以将 $a$ 分割成若干个长度为**奇数**的子数组，使得所有这些子数组的中位数都相等。\n\n形式化地说，你需要判断是否存在一个整数序列 $i_1, i_2, \\ldots, i_k$，满足以下条件：\n\n- $1 = i_1 < i_2 < \\ldots < i_k = (n + 1)$；\n- $(i_2 - i_1) \\bmod 2 = (i_3 - i_2) \\bmod 2 = \\ldots = (i_k - i_{k - 1}) \\bmod 2 = 1$；\n- $f(a[i_1..(i_2-1)]) = f(a[i_2..(i_3-1)]) = \\ldots = f(a[i_{k - 1}..(i_k - 1)])$，其中 $a[l..r]$ 表示由元素 $a_l, a_{l + 1}, \\ldots, a_r$ 组成的子数组，$f(a)$ 表示数组 $a$ 的中位数。", "inputFormat": "第一行包含一个偶数 $n$（$2 \\le n \\le 2 \\cdot 10^5$）——数组的长度。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$（$1 \\le a_i \\le 10^9$）——数组的元素。\n\n保证 $n$ 是偶数。", "outputFormat": "如果可以将 $a$ 分割成若干个长度为奇数的子数组，且这些子数组的中位数都相等，则输出 `Yes`，否则输出 `No`。\n", "hint": "在第一个样例中，数组 $[1,1,1,1]$ 可以分割为 $[1]$ 和 $[1,1,1]$，它们的中位数均为 $1$。\n\n在第二个样例中，数组 $[1,2,3,3,2,1]$ 可以分割为 $[1,2,3]$ 和 $[3,2,1]$，它们的中位数均为 $2$。\n\n在第三个样例中，数组 $[1,2,1,3,2,3]$ 无法被分割为若干个长度为奇数的子数组，且这些子数组的中位数相等。\n\n### 评分标准\n\n- （$3$ 分）：$n=2$；\n- （$14$ 分）：对于 $1 \\le i \\le n$，$1 \\le a_i \\le 2$；\n- （$12$ 分）：对于 $1 \\le i < n$，$a_i \\le a_{i+1}$；\n- （$16$ 分）：对于 $1 \\le i \\le n$，$1 \\le a_i \\le 3$，且每个值在 $a$ 中出现的次数不超过 $\\frac{n}{2}$；\n- （$17$ 分）：$n \\le 100$；\n- （$18$ 分）：$n \\le 2000$；\n- （$20$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
