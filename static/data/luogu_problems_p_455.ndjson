{"pid": "P10227", "type": "P", "difficulty": 5, "samples": [["2\n1\n2 1\n", "500000006\n2\n"], ["3\n1 1\n8 8 8\n", "14\n14\n14"], ["11\n1 1 1 2 3 4 1 2 6 2\n1 1000 5 3 18 200 8 9 0 2 2\n", "968750272\n610352580\n450521029\n536458466\n199219275\n662760680\n190972315\n90277951\n824219264\n941840425\n532552597\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Slučajna Cesta", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T5「[Slučajna Cesta](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vito 住在一个有 $n$ 个公园的城市，这些公园编号为 $1$ 到 $n$。这些公园被 $n-1$ 条道路相连，满足任意两公园之间都存在一条路径。每个公园均有一个美丽值，第 $i$ 个公园的美丽值为 $v_i$。\n\n昨晚 Vito 决定在城市中走走，在他游览完一个公园后，他会等概率随机选择一条路，并游览这条路通往的公园。但在出发前，他透过摩天大楼的窗户看到，每条路上都有一条蓝蛇或红蛇。蓝蛇会攻击所有从编号较小的公园前往编号较大的公园的人，红蛇会攻击所有从编号较大的公园前往编号较小的公园的人。由于 Vito 不想被蛇攻击，他决定改变计划，在随机选择道路时只考虑不会被蛇攻击的道路。因为他喜欢长距离行走，所以在至少有一条路他可以安全通过之前，他不会停下脚步。\n\n当 Vito 下楼时，他完全忘记了哪条路上有红蛇或蓝蛇，于是他想知道：「如果每条路上有蓝蛇或红蛇的概率相同，那么我从第 $i$ 个公园开始的路线的美感的期望是多少？」\n\n一条路线的美感是在这条路线上经过的公园的美丽值的和。路线美感的期望定义为对于所有可能的路线，路线的美感乘以 Vito 按这条路线走的概率的乘积之和。", "inputFormat": "第一行一个整数 $n\\ (2\\le n\\le 10^6)$，表示公园数量。\n\n第二行有 $n-1$ 个整数 $p_i\\ (1\\le p_i<i)$，表示第 $i+1$ 个公园和第 $p_i$ 个公园之间有一条道路。\n\n第三行 $n$ 个整数 $v_i\\ (0\\le v_i\\le 10^6)$，表示第 $i$ 个公园的美丽值。", "outputFormat": "第 $i$ 行输出 Vito 从第 $i$ 个公园开始的路线的美感的期望。如果这个值为 $\\frac{a}{b}$（$a,b$ 为整数），则输出 $ab^{-1} \\pmod{10^9+7}$，其中 $b^{-1}$ 是 $b$ 在模 $10^9+7$ 意义下的逆元。", "hint": "### 样例解释 1\n\n从第一个公园开始的路线的美感的期望是 $2.5\\pmod{10^9+7}=\\frac{5}{2}\\pmod{10^9+7}=5\\cdot 2^{-1}\\pmod{10^9+7}=5\\cdot 500000004\\pmod{10^9+7}=500000006\\pmod{10^9+7}$，从第二个公园开始的路线的美感的期望是 $2$。\n\n### 样例解释 2\n\n两条蛇都是红蛇的概率是 $\\frac{1}{4}$，这种情况下如果 Vito 从第一个公园出发，他会随机选择走哪条路。\n\n### 子任务\n\n| 子任务编号 |              附加限制              | 分值 |\n| :--------: | :--------------------------------: | :--: |\n|    $1$     |             $n\\le 10$              | $9$  |\n|    $2$     |           $n\\le 1\\ 000$            | $27$ |\n|    $3$     | 序列 $p_i$ 中没有值出现超过 $2$ 次 | $27$ |\n|    $4$     |             无附加限制             | $37$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Slučajna Cesta", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T5「[Slučajna Cesta](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vito 住在一个有 $n$ 个公园的城市，这些公园编号为 $1$ 到 $n$。这些公园被 $n-1$ 条道路相连，满足任意两公园之间都存在一条路径。每个公园均有一个美丽值，第 $i$ 个公园的美丽值为 $v_i$。\n\n昨晚 Vito 决定在城市中走走，在他游览完一个公园后，他会等概率随机选择一条路，并游览这条路通往的公园。但在出发前，他透过摩天大楼的窗户看到，每条路上都有一条蓝蛇或红蛇。蓝蛇会攻击所有从编号较小的公园前往编号较大的公园的人，红蛇会攻击所有从编号较大的公园前往编号较小的公园的人。由于 Vito 不想被蛇攻击，他决定改变计划，在随机选择道路时只考虑不会被蛇攻击的道路。因为他喜欢长距离行走，所以在至少有一条路他可以安全通过之前，他不会停下脚步。\n\n当 Vito 下楼时，他完全忘记了哪条路上有红蛇或蓝蛇，于是他想知道：「如果每条路上有蓝蛇或红蛇的概率相同，那么我从第 $i$ 个公园开始的路线的美感的期望是多少？」\n\n一条路线的美感是在这条路线上经过的公园的美丽值的和。路线美感的期望定义为对于所有可能的路线，路线的美感乘以 Vito 按这条路线走的概率的乘积之和。", "inputFormat": "第一行一个整数 $n\\ (2\\le n\\le 10^6)$，表示公园数量。\n\n第二行有 $n-1$ 个整数 $p_i\\ (1\\le p_i<i)$，表示第 $i+1$ 个公园和第 $p_i$ 个公园之间有一条道路。\n\n第三行 $n$ 个整数 $v_i\\ (0\\le v_i\\le 10^6)$，表示第 $i$ 个公园的美丽值。", "outputFormat": "第 $i$ 行输出 Vito 从第 $i$ 个公园开始的路线的美感的期望。如果这个值为 $\\frac{a}{b}$（$a,b$ 为整数），则输出 $ab^{-1} \\pmod{10^9+7}$，其中 $b^{-1}$ 是 $b$ 在模 $10^9+7$ 意义下的逆元。", "hint": "### 样例解释 1\n\n从第一个公园开始的路线的美感的期望是 $2.5\\pmod{10^9+7}=\\frac{5}{2}\\pmod{10^9+7}=5\\cdot 2^{-1}\\pmod{10^9+7}=5\\cdot 500000004\\pmod{10^9+7}=500000006\\pmod{10^9+7}$，从第二个公园开始的路线的美感的期望是 $2$。\n\n### 样例解释 2\n\n两条蛇都是红蛇的概率是 $\\frac{1}{4}$，这种情况下如果 Vito 从第一个公园出发，他会随机选择走哪条路。\n\n### 子任务\n\n| 子任务编号 |              附加限制              | 分值 |\n| :--------: | :--------------------------------: | :--: |\n|    $1$     |             $n\\le 10$              | $9$  |\n|    $2$     |           $n\\le 1\\ 000$            | $27$ |\n|    $3$     | 序列 $p_i$ 中没有值出现超过 $2$ 次 | $27$ |\n|    $4$     |             无附加限制             | $37$ |", "locale": "zh-CN"}}}
{"pid": "P10228", "type": "P", "difficulty": 2, "samples": [["3\nbabylasagna\n10 11 12 13 14\n15 16 17 18 19\n20 21 22 23 24\n25 26 27 28 29\n30 31 32 33 34\nnataliebalmix\n10 20 30 40 50\n11 21 31 41 51\n12 22 32 42 52\n13 23 33 43 53\n14 24 34 44 54\nlettri\n89 88 87 86 10\n85 84 83 11 82\n81 80 12 79 78\n77 13 76 75 74\n14 73 72 71 70\n6\n10 11 12 13 14 15", "3\nbabylasagna\nnataliebalmix\nlettri"], ["1\nhoni\n1 2 3 4 5\n6 7 8 9 10\n11 12 13 14 15\n16 17 18 19 20\n21 22 23 24 25\n4\n1 2 49 50", "0"], ["4\nrim\n15 23 14 26 34\n12 11 13 16 17\n90 67 45 24 18\n85 82 77 66 22\n62 71 32 35 7\ntim\n61 89 25 63 12\n29 30 31 32 33\n11 17 42 24 18\n88 82 77 66 22\n44 71 54 35 7\ndagi\n15 23 14 26 34\n12 11 13 16 17\n90 67 45 24 18\n85 82 77 66 22\n62 71 36 35 7\ndim\n15 23 14 26 34\n12 11 13 16 17\n90 67 45 24 18\n85 82 77 66 22\n42 51 32 33 7\n7\n15 11 66 7 42 30 61", "1\ntim"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Bingo", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T1「[Bingo](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "现在是游玩 Bingo 的时间！\n\n想要玩 Bingo 游戏，你需要一名游戏主持人和一个装有 90 个球的滚轮。滚轮中的球被编号为 $1\\sim 90$，每个数字编号写在恰好一个球上。\n\n在游戏开始前，主持人向 $n$ 名玩家每人发放一块 $5\\times 5$ 的格板，每格包含一个 $1$ 到 $90$ 范围内的整数。一块格板上的数字互不相同，每名玩家的格板互不相同。\n\n所有的玩家都拿到格板后，游戏开始。\n\n主持人开始从滚轮中取出球。取出编号为 $x_i$ 的球后，主持人向所有玩家宣布编号，并将球放到一边。所有玩家会检查自己的格板，如果格板上有取出的球的编号，他们会将这个数从格板上划去。\n\n当一名玩家划去了行、列、主对角线或从对角线上全部的 5 个数字，这名玩家将喊出 `Bingo!`。此时，游戏结束，这名玩家赢得游戏。\n\n为了让游戏更加有趣，主持人决定引入一条额外规则。在任何人被允许喊出 `Bingo!` 前，主持人将先取出 $m$ 个球。（即使玩家已经划去了连续的 5 个数，也必须等到 $m$ 个球取出后才能喊出 `Bingo!`）\n\n但是，当主持人取出第 $m$ 个球的瞬间，场上发生了一阵骚动！所有的玩家都喊出了 `Bingo!`。\n\n主持人不知道该相信谁。为了解决这个状况，他向你寻求帮助。请计算出 $m$ 个球被取出后，有多少玩家可以喊出 `Bingo!`。", "inputFormat": "输入的第一行为一个整数 $n$（$1 \\le n \\le 50$），表示玩家的数目。\n\n接下来 $n\\times 6$ 行：\n\n- 第一行包含一个长度不超过 $20$ 的字符串，仅由英文小写字母组成，表示玩家的姓名。没有两个玩家姓名相同。\n- 接下来 $5$ 行，每行包含 $5$ 个 $1\\sim90$ 的整数，描述了这名玩家的格板。每块格板上数字不同。\n\n接下来一行包含一个整数 $m$（$1 \\le m \\le 90$），表示主持人将取出的球的数目。\n\n接下来一行包含 $m$ 个 $1\\sim 90$ 范围内的整数，表示主持人从滚轮中取出的球的编号。每个数字最多出现一次。", "outputFormat": "第一行输出一个整数 $k$，表示可以喊出 `Bingo!` 的玩家数目。\n\n接下来 $k$ 行，输出他们的名字。按照输入的顺序输出。", "hint": "### 样例解释 1\n\n`babylasagna` 在第一行实现了 `Bingo!`。\n\n`nataliebalmix` 在第一列实现了 `Bingo!`。\n\n`lettri` 在左下角到右上角的从对角线实现了 `Bingo!`。\n\n### 样例解释 2\n\n只取出了 4 个球，没有人能划去 5 个数。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 12 | 只有一个玩家，也就是说，$n=1$ |\n| 2 | 22 | 最多只有一个玩家喊出 `Bingo!` |\n| 3 | 16 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Bingo", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T1「[Bingo](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "现在是游玩 Bingo 的时间！\n\n想要玩 Bingo 游戏，你需要一名游戏主持人和一个装有 90 个球的滚轮。滚轮中的球被编号为 $1\\sim 90$，每个数字编号写在恰好一个球上。\n\n在游戏开始前，主持人向 $n$ 名玩家每人发放一块 $5\\times 5$ 的格板，每格包含一个 $1$ 到 $90$ 范围内的整数。一块格板上的数字互不相同，每名玩家的格板互不相同。\n\n所有的玩家都拿到格板后，游戏开始。\n\n主持人开始从滚轮中取出球。取出编号为 $x_i$ 的球后，主持人向所有玩家宣布编号，并将球放到一边。所有玩家会检查自己的格板，如果格板上有取出的球的编号，他们会将这个数从格板上划去。\n\n当一名玩家划去了行、列、主对角线或从对角线上全部的 5 个数字，这名玩家将喊出 `Bingo!`。此时，游戏结束，这名玩家赢得游戏。\n\n为了让游戏更加有趣，主持人决定引入一条额外规则。在任何人被允许喊出 `Bingo!` 前，主持人将先取出 $m$ 个球。（即使玩家已经划去了连续的 5 个数，也必须等到 $m$ 个球取出后才能喊出 `Bingo!`）\n\n但是，当主持人取出第 $m$ 个球的瞬间，场上发生了一阵骚动！所有的玩家都喊出了 `Bingo!`。\n\n主持人不知道该相信谁。为了解决这个状况，他向你寻求帮助。请计算出 $m$ 个球被取出后，有多少玩家可以喊出 `Bingo!`。", "inputFormat": "输入的第一行为一个整数 $n$（$1 \\le n \\le 50$），表示玩家的数目。\n\n接下来 $n\\times 6$ 行：\n\n- 第一行包含一个长度不超过 $20$ 的字符串，仅由英文小写字母组成，表示玩家的姓名。没有两个玩家姓名相同。\n- 接下来 $5$ 行，每行包含 $5$ 个 $1\\sim90$ 的整数，描述了这名玩家的格板。每块格板上数字不同。\n\n接下来一行包含一个整数 $m$（$1 \\le m \\le 90$），表示主持人将取出的球的数目。\n\n接下来一行包含 $m$ 个 $1\\sim 90$ 范围内的整数，表示主持人从滚轮中取出的球的编号。每个数字最多出现一次。", "outputFormat": "第一行输出一个整数 $k$，表示可以喊出 `Bingo!` 的玩家数目。\n\n接下来 $k$ 行，输出他们的名字。按照输入的顺序输出。", "hint": "### 样例解释 1\n\n`babylasagna` 在第一行实现了 `Bingo!`。\n\n`nataliebalmix` 在第一列实现了 `Bingo!`。\n\n`lettri` 在左下角到右上角的从对角线实现了 `Bingo!`。\n\n### 样例解释 2\n\n只取出了 4 个球，没有人能划去 5 个数。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 12 | 只有一个玩家，也就是说，$n=1$ |\n| 2 | 22 | 最多只有一个玩家喊出 `Bingo!` |\n| 3 | 16 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10229", "type": "P", "difficulty": 2, "samples": [["3 5 2 1\n2 2 4", "6"], ["2 10 3 1\n3 3", "6"], ["4 10 3 2\n3 4 5 6", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "前缀和", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Knjige", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T2「[Knjige](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Marko 正在 Interliber 图书集市，他一共购买了 $n$ 本书，第 $i$ 本书的吸引力为 $k_i$。Marko 按照吸引力从左到右单调不减的方式，将所有的书放在了书架上。\n\nMarko 将要花费 $t$ 分钟阅读这些书，对于每一本书，他可以花费 $a$ 分钟完整阅读以获得灵感值，也可以花费 $b$ 分钟，只通过封面了解内容。\n\n他将从最左侧的书籍开始阅读，当他读完当前的书后（完整阅读或通过目录了解内容），他开始阅读紧靠右侧的下一本书。Marko 获得的灵感值与他完整阅读的书的吸引力之和相等。问 $t$ 分钟后，Marko 的灵感值最大是多少？\n\n注意：如果 Marko 开始阅读一本书，但是没有在第 $t$ 分钟结束前读完，这本书将不会对 Marko 的灵感值产生贡献。", "inputFormat": "输入的第一行包含四个整数 $n,t,a,b$（$1 \\le n \\le 2\\cdot 10^5$，$1 \\le t \\le 10^9$，$1\\le b < a \\le 10^9$），分别表示书的数目，Marko 阅读的时间，完整阅读和阅读封面所需要的时间。\n\n输入的第二行包含 $n$ 个整数 $k_i$（$1 \\le k_i \\le 10^9$，$k_i \\le k_{i+1}$），表示书的吸引力。", "outputFormat": "输出一行一个整数，表示 $t$ 分钟后 Marko 灵感最大值。", "hint": "### 样例解释 1\n\n例如，Marko 完整阅读第 $1,3$ 本书，阅读第 $2$ 本书的封面，可以达到灵感最大值。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 7 | 对于 $i=1,\\ldots,n-1$，$k_i=k_{i+1}$ |\n| 2 | 27 | $n \\le 1000$ |\n| 3 | 36 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Knjige", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T2「[Knjige](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Marko 正在 Interliber 图书集市，他一共购买了 $n$ 本书，第 $i$ 本书的吸引力为 $k_i$。Marko 按照吸引力从左到右单调不减的方式，将所有的书放在了书架上。\n\nMarko 将要花费 $t$ 分钟阅读这些书，对于每一本书，他可以花费 $a$ 分钟完整阅读以获得灵感值，也可以花费 $b$ 分钟，只通过封面了解内容。\n\n他将从最左侧的书籍开始阅读，当他读完当前的书后（完整阅读或通过目录了解内容），他开始阅读紧靠右侧的下一本书。Marko 获得的灵感值与他完整阅读的书的吸引力之和相等。问 $t$ 分钟后，Marko 的灵感值最大是多少？\n\n注意：如果 Marko 开始阅读一本书，但是没有在第 $t$ 分钟结束前读完，这本书将不会对 Marko 的灵感值产生贡献。", "inputFormat": "输入的第一行包含四个整数 $n,t,a,b$（$1 \\le n \\le 2\\cdot 10^5$，$1 \\le t \\le 10^9$，$1\\le b < a \\le 10^9$），分别表示书的数目，Marko 阅读的时间，完整阅读和阅读封面所需要的时间。\n\n输入的第二行包含 $n$ 个整数 $k_i$（$1 \\le k_i \\le 10^9$，$k_i \\le k_{i+1}$），表示书的吸引力。", "outputFormat": "输出一行一个整数，表示 $t$ 分钟后 Marko 灵感最大值。", "hint": "### 样例解释 1\n\n例如，Marko 完整阅读第 $1,3$ 本书，阅读第 $2$ 本书的封面，可以达到灵感最大值。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 7 | 对于 $i=1,\\ldots,n-1$，$k_i=k_{i+1}$ |\n| 2 | 27 | $n \\le 1000$ |\n| 3 | 36 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10230", "type": "P", "difficulty": 6, "samples": [["4 3\n1 3\n2 1\n1 1 3 2 4\n2 1\n", "0 1\n1 1\n"], ["5 4\n1 3\n3 5\n2 1\n2 2\n1 1 3 2 5\n2 2\n", "1 1\n2 1\n1 1\n"], ["9 3\n1 5\n1 7\n2 4\n2 5\n5 7\n7 9\n2 1\n1 2 5 1 4\n2 1\n", "4 12\n3 6\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "2023", "图论建模", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Lepeze", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T3「[Lepeze](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "小 Fran 收到了一个礼物——一个正多边形木制框架。由于多边形有 $n$ 个顶点，他还收到了 $\\frac{n(n-3)}{2}$ 根与每条对角线相匹配的木棍。多边形的顶点按逆时针顺序标记为 $1$ 到 $n$。一开始，弗兰将 $n-3$ 根木棍放在框架内，以使每根木棍接触框架的两个不相邻顶点，并且没有两根木棍相交。换句话说，他做了一个三角剖分。由于这对他来说不够有趣，他决定进行特定的操作来改变这种放置方法，该操作由两个步骤组成：\n\n1. 移除一根木棍。\n2. 添加一根新的木棍，使得我们得到一个新的三角剖分。\n\n我们用一个由无序对组成的有序对 $((a, b),(c, d))$ 来描述这个操作，表示小 Fran 移除了接触顶点 $a$ 和 $b$ 的木棍，并添加了接触顶点 $c$ 和 $d$ 的木棍。\n\n弗兰喜欢扇子，所以在进行这些操作时，他有时会问自己：「将这个三角剖分转换为以顶点 $x$ 为『扇形』三角剖分需要多少次操作，并且有多少种方式可以实现？」\n\n由于他忙于操作和娱乐，他请求你的帮助！\n\n以顶点 $x$ 为中心的「扇形」三角剖分是一种三角剖分，其中所有的对角线都有一个共同的端点，即顶点 $x$。\n\n设所需操作的数量为 $m$。设 $f_1,f_2,\\ldots ,f_m$ 是一个操作序列，满足按这一顺序操作可以实现满足条件的三角剖分。设 $s_1,s_2,\\ldots ,s_m$ 是另一种这样的序列。如果存在一个下标 $i$ 使得 $f_i\\neq s_i$，则两个序列是不同的。\n\n由于这样的序列数量可能非常大，小 Fran 只关心它对 $10^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n$ 和 $q\\ (4\\le n\\le 2\\cdot 10^5,1\\le q\\le 2\\cdot 10^5)$，表示顶点数和事件数。\n\n接下来 $n-3$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i,y_i\\le n)$，表示第 $i$ 根木棍接触的两个顶点。\n\n接下来 $q$ 行，每行描述一个事件。第一个整数为 $t_i\\ (1\\le t_i\\le 2)$，表示事件类别。\n\n如果 $t_i=1$，则接下来还有四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,b_i,c_i,d_i\\le n)$，表示一次 $((a_i,b_i),(c_i,d_i))$ 操作。保证给出的操作可以实现。\n\n如果 $t_i=2$，则接下来一个整数 $x_i\\ (1\\le x_i\\le n)$，表示小 Fran 对与目前顶点 $x_i$​ 处的「扇形」三角剖分的数据感兴趣。", "outputFormat": "对于每个类型为 $2$ 的事件，按照它们在输入中的顺序，输出两个整数：所需的最小操作数和使用最小操作数达到目标三角剖分的方式数量。", "hint": "### 样例解释 1\n\n起始三角剖分已经是以顶点 $1$ 为中心的「扇形」三角剖分，所以小 Fran 不需要进行任何操作，有一种方式可以实现。在执行给定的操作后，将其恢复到先前状态只有一种方式，即进行操作 $((2, 4),(1, 3))$。\n\n### 样例解释 2\n\n第一个询问对应的唯一操作序列：$((3,5),(1,4))$。\n\n第二个询问对应的唯一操作序列：$((1,3),(2,5)),((3,5),(2,4))$。\n\n第三个询问对应的唯一操作序列：$((3,5),(2,4))$。\n\n### 子任务\n\n| 子任务编号 |                           附加限制                           | 分值 |\n| :--------: | :----------------------------------------------------------: | :--: |\n|    $1$     |                     $n\\le 9,q\\le 1\\ 000$                     | $12$ |\n|    $2$     | 对于所有 $i=1,\\ldots,n-3$，满足 $x_i=1,y_i=i+2$，且没有 $t_i=1$ 的事件 | $16$ |\n|    $3$     |                            $q=1$                             | $30$ |\n|    $4$     |                       $n,q\\le 1\\ 000$                        | $12$ |\n|    $5$     |                          无附加限制                          | $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Lepeze", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T3「[Lepeze](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "小 Fran 收到了一个礼物——一个正多边形木制框架。由于多边形有 $n$ 个顶点，他还收到了 $\\frac{n(n-3)}{2}$ 根与每条对角线相匹配的木棍。多边形的顶点按逆时针顺序标记为 $1$ 到 $n$。一开始，弗兰将 $n-3$ 根木棍放在框架内，以使每根木棍接触框架的两个不相邻顶点，并且没有两根木棍相交。换句话说，他做了一个三角剖分。由于这对他来说不够有趣，他决定进行特定的操作来改变这种放置方法，该操作由两个步骤组成：\n\n1. 移除一根木棍。\n2. 添加一根新的木棍，使得我们得到一个新的三角剖分。\n\n我们用一个由无序对组成的有序对 $((a, b),(c, d))$ 来描述这个操作，表示小 Fran 移除了接触顶点 $a$ 和 $b$ 的木棍，并添加了接触顶点 $c$ 和 $d$ 的木棍。\n\n弗兰喜欢扇子，所以在进行这些操作时，他有时会问自己：「将这个三角剖分转换为以顶点 $x$ 为『扇形』三角剖分需要多少次操作，并且有多少种方式可以实现？」\n\n由于他忙于操作和娱乐，他请求你的帮助！\n\n以顶点 $x$ 为中心的「扇形」三角剖分是一种三角剖分，其中所有的对角线都有一个共同的端点，即顶点 $x$。\n\n设所需操作的数量为 $m$。设 $f_1,f_2,\\ldots ,f_m$ 是一个操作序列，满足按这一顺序操作可以实现满足条件的三角剖分。设 $s_1,s_2,\\ldots ,s_m$ 是另一种这样的序列。如果存在一个下标 $i$ 使得 $f_i\\neq s_i$，则两个序列是不同的。\n\n由于这样的序列数量可能非常大，小 Fran 只关心它对 $10^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n$ 和 $q\\ (4\\le n\\le 2\\cdot 10^5,1\\le q\\le 2\\cdot 10^5)$，表示顶点数和事件数。\n\n接下来 $n-3$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i,y_i\\le n)$，表示第 $i$ 根木棍接触的两个顶点。\n\n接下来 $q$ 行，每行描述一个事件。第一个整数为 $t_i\\ (1\\le t_i\\le 2)$，表示事件类别。\n\n如果 $t_i=1$，则接下来还有四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,b_i,c_i,d_i\\le n)$，表示一次 $((a_i,b_i),(c_i,d_i))$ 操作。保证给出的操作可以实现。\n\n如果 $t_i=2$，则接下来一个整数 $x_i\\ (1\\le x_i\\le n)$，表示小 Fran 对与目前顶点 $x_i$​ 处的「扇形」三角剖分的数据感兴趣。", "outputFormat": "对于每个类型为 $2$ 的事件，按照它们在输入中的顺序，输出两个整数：所需的最小操作数和使用最小操作数达到目标三角剖分的方式数量。", "hint": "### 样例解释 1\n\n起始三角剖分已经是以顶点 $1$ 为中心的「扇形」三角剖分，所以小 Fran 不需要进行任何操作，有一种方式可以实现。在执行给定的操作后，将其恢复到先前状态只有一种方式，即进行操作 $((2, 4),(1, 3))$。\n\n### 样例解释 2\n\n第一个询问对应的唯一操作序列：$((3,5),(1,4))$。\n\n第二个询问对应的唯一操作序列：$((1,3),(2,5)),((3,5),(2,4))$。\n\n第三个询问对应的唯一操作序列：$((3,5),(2,4))$。\n\n### 子任务\n\n| 子任务编号 |                           附加限制                           | 分值 |\n| :--------: | :----------------------------------------------------------: | :--: |\n|    $1$     |                     $n\\le 9,q\\le 1\\ 000$                     | $12$ |\n|    $2$     | 对于所有 $i=1,\\ldots,n-3$，满足 $x_i=1,y_i=i+2$，且没有 $t_i=1$ 的事件 | $16$ |\n|    $3$     |                            $q=1$                             | $30$ |\n|    $4$     |                       $n,q\\le 1\\ 000$                        | $12$ |\n|    $5$     |                          无附加限制                          | $40$ |", "locale": "zh-CN"}}}
{"pid": "P10231", "type": "P", "difficulty": 6, "samples": [["7 6\n1 2\n1 3\n3 4\n3 5\n3 6\n5 7\n2 -1 -1 -1 -1 -1 3\n", "2\n4 6\n"], ["6 6\n1 2\n2 3\n3 4\n4 5\n5 6\n6 1\n2 -1 -1 1 -1 -1\n", "2\n3 5\n"], ["4 3\n1 2\n2 3\n3 4\n1 -1 -1 1\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广度优先搜索 BFS", "COCI（克罗地亚）", "bitset"], "title": "[COCI 2023/2024 #4] Putovanje", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T4「[Putovanje](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Malnar 先生终于迎来了他的年假。他决定要去的国家可以表示为 $n$ 个城市和 $m$ 条双向连接它们的道路。每条道路的长度相同，并且可以通过这些道路从任何一个城市到达另一个城市。从城市 $a$ 到城市 $b$ 的路径被定义为一系列道路，满足从城市 $a$ 开始，按照该序列依次遍历道路，最终到达城市 $b$。路径的长度定义为该路径上的道路数量。\n\nMalnar 先生像以往一样预订了其中一个城市最贵的酒店，然后开始规划他的旅程。为了方便规划，他记录了从酒店到每个城市的最短路径长度。\n\n由于对他期待已久的假期感到兴奋，Malnar 先生完全忘记了酒店位于哪个城市。他当然不想错过这次旅行，所以他请你确定酒店可能位于哪些城市。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n\\le 5\\cdot 10^4,n-1\\le m\\le 10^5)$，分别表示城市和道路的数量。\n\n接下来 $m$ 行，每行两个整数 $u_i,v_i\\ (1\\le u_i,v_i\\le n,u_i\\neq v_i)$，表示城市 $u_i$ 和 $v_i$ 之间有一条道路。任意两城市之间最多只有一条道路。\n\n最后一行有 $n$ 个整数，第 $i$ 个整数 $d_i\\ (-1\\le d_i<n)$ 表示从城市 $i$ 到酒店所在城市的路径长度，如果 Malnar 先生没有记录这个值，则为 $-1$。", "outputFormat": "第一行输出酒店可能位于多少个城市。\n\n第二行输出酒店可能位于的城市编号，**按升序输出**。", "hint": "### 样例解释 1\n\n从城市 $4$ 到城市 $1$ 的路径长度为 $2$，到城市 $7$ 的路径长度为 $3$。因此，城市 $4$ 满足两个条件，酒店可以位于那里。\n\n同样的情况也适用于城市 $6$。\n\n### 子任务\n\n| 子任务编号 |                     附加限制                     | 分值 |\n| :--------: | :----------------------------------------------: | :--: |\n|    $1$     | $m+1=n\\le 5\\ 000$，对于所有 $i$ 满足 $u_i+1=v_i$ | $10$  |\n|    $2$     |           对于所有 $i>1$ 满足 $d_i=-1$           | $20$ |\n|    $3$     |                 $n,m\\le 5\\ 000$                  | $35$ |\n|    $4$     |                    无附加限制                    | $45$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Putovanje", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T4「[Putovanje](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Malnar 先生终于迎来了他的年假。他决定要去的国家可以表示为 $n$ 个城市和 $m$ 条双向连接它们的道路。每条道路的长度相同，并且可以通过这些道路从任何一个城市到达另一个城市。从城市 $a$ 到城市 $b$ 的路径被定义为一系列道路，满足从城市 $a$ 开始，按照该序列依次遍历道路，最终到达城市 $b$。路径的长度定义为该路径上的道路数量。\n\nMalnar 先生像以往一样预订了其中一个城市最贵的酒店，然后开始规划他的旅程。为了方便规划，他记录了从酒店到每个城市的最短路径长度。\n\n由于对他期待已久的假期感到兴奋，Malnar 先生完全忘记了酒店位于哪个城市。他当然不想错过这次旅行，所以他请你确定酒店可能位于哪些城市。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n\\le 5\\cdot 10^4,n-1\\le m\\le 10^5)$，分别表示城市和道路的数量。\n\n接下来 $m$ 行，每行两个整数 $u_i,v_i\\ (1\\le u_i,v_i\\le n,u_i\\neq v_i)$，表示城市 $u_i$ 和 $v_i$ 之间有一条道路。任意两城市之间最多只有一条道路。\n\n最后一行有 $n$ 个整数，第 $i$ 个整数 $d_i\\ (-1\\le d_i<n)$ 表示从城市 $i$ 到酒店所在城市的路径长度，如果 Malnar 先生没有记录这个值，则为 $-1$。", "outputFormat": "第一行输出酒店可能位于多少个城市。\n\n第二行输出酒店可能位于的城市编号，**按升序输出**。", "hint": "### 样例解释 1\n\n从城市 $4$ 到城市 $1$ 的路径长度为 $2$，到城市 $7$ 的路径长度为 $3$。因此，城市 $4$ 满足两个条件，酒店可以位于那里。\n\n同样的情况也适用于城市 $6$。\n\n### 子任务\n\n| 子任务编号 |                     附加限制                     | 分值 |\n| :--------: | :----------------------------------------------: | :--: |\n|    $1$     | $m+1=n\\le 5\\ 000$，对于所有 $i$ 满足 $u_i+1=v_i$ | $10$  |\n|    $2$     |           对于所有 $i>1$ 满足 $d_i=-1$           | $20$ |\n|    $3$     |                 $n,m\\le 5\\ 000$                  | $35$ |\n|    $4$     |                    无附加限制                    | $45$ |\n", "locale": "zh-CN"}}}
{"pid": "P10232", "type": "P", "difficulty": 5, "samples": [["2 2 2\n1 1 L\n2 2 R\n5\n1 1 2 2\n2 1 1 2\n1 1 1 2\n2 1 1 1\n2 2 2 1\n", "-1\n1\n0\n0\n0\n"], ["3 3 4\n1 1 L\n1 3 L\n2 1 L\n3 3 L\n7\n1 1 3 3\n3 3 2 1\n3 1 2 2\n2 3 1 2\n2 3 3 1\n1 2 3 2\n3 3 2 2\n", "1\n2\n1\n1\n1\n0\n3\n"], ["4 4 8\n1 1 R\n1 3 L\n2 2 R\n2 4 L\n3 1 L\n3 3 L\n4 2 L\n4 4 L\n7\n1 2 1 4\n2 2 3 4\n4 4 3 2\n4 1 4 4\n4 2 3 1\n1 2 2 3\n2 4 2 3\n", "2\n1\n1\n0\n-1\n5\n0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2023", "最短路", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Roboti", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T5「[Roboti](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Kile 是一个桌游爱好者，他最近发现了一个叫做 Robots 的游戏。这个游戏由一个 $n$ 行 $m$ 列的网格和一个机器人组成。位置 $(1, 1)$ 是棋盘的左上角，位置 $(n, m)$ 是右下角。\n\n开始时，机器人位于某个位置 $(x, y)$（第 $x$ 行，第 $y$ 列），玩家可以将其朝上下左右之一的方向进行移动。根据选择的方向，它将沿着该方向移动，直到到达目标格或网格中的特殊格。如果在任何时候机器人想要离开棋盘，它将翻折到另一侧。例如，如果它位于位置 $(n, 3)$ 并希望向下移动，它将到达位置 $(1, 3)$。\n\n棋盘上有三种类型的位置：\n\n- 空格：机器人朝相同的方向继续移动；\n- 左转格：当机器人进入此格时，它会左转 $90$ 度并继续移动；\n- 右转格：当机器人进入此格时，它会右转 $90$ 度并继续移动。\n\n网格中大部分位置都是空格，只有 $k$ 个位置是左转或右转格。\n\n游戏由 $q$ 轮组成。在第 $i$ 轮中，机器人将被放置在位置 $(a_i, b_i)$。目标是使用最少的转弯次数到达位置 $(c_i, d_i)$，或判定这是不可能的。\n\n在多次玩这个游戏后，Kile 意识到它比起初看起来要更具挑战性。这就是为什么他现在需要你的帮助。帮助他确定每一轮游戏所需的最小转弯次数！\n\n**注意**：如果机器人路径的起点或终点位于左转或右转格上，则该格不起作用。", "inputFormat": "第一行包含三个整数 $n,m,k\\ (1\\le n,m\\le 10^6,0\\le k\\le 10^5)$，分别表示行数，列数和网格中非空格的个数。\n\n接下来 $k$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i\\le n,1\\le y_i\\le m)$ 和一个字符 $s_i\\ (s_i\\in \\{\\texttt{L},\\texttt{R}\\})$，分别表示第 $i$ 个特殊格的位置和类别。如果 $s_i$ 是 `L`，则表示这是一个左转格。如果是 `R`，则表示这是一个右转格。\n\n接下来一行一个整数 $q\\ (1\\le q\\le 3\\cdot 10^5)$，表示游戏轮数。\n\n接下来 $q$ 行，每行四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,c_i\\le n,1\\le b_i,d_i\\le m)$，分别表示起始和目标位置。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 轮所需的最小转弯次数，如果无法到达目标，则输出 $-1$。", "hint": "### 样例解释 2\n\n第一轮：从 $(1, 1)$ 开始。如果初始机器人向左移动，它将在下一步到达 $(1, 3)$，因为它想要离开棋盘，所以会从另一侧进入。位置 $(1, 3)$ 是一个左转格，所以机器人将朝下方向移动。再经过两步，它将到达目标位置 $(3, 3)$​。\n\n第二轮：从 $(3, 3)$ 开始。如果初始机器人向上移动，它将在两步后到达 $(1, 3)$，在那里由于左转格而向左转。再经过两步，它将到达位置 $(1, 1)$，这也是一个左转格，所以它将向下移动。在下一步中，它将到达目标位置 $(2, 1)$。\n\n### 子任务\n\n| 子任务编号 |       附加限制       | 分值 |\n| :--------: | :------------------: | :--: |\n|    $1$     |        $k=0$         | $10$  |\n|    $2$     | $n,m\\le 300,q\\le 10$ | $13$ |\n|    $3$     |     $n,m\\le 300$     | $49$ |\n|    $4$     |      无附加限制      | $38$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Roboti", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T5「[Roboti](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Kile 是一个桌游爱好者，他最近发现了一个叫做 Robots 的游戏。这个游戏由一个 $n$ 行 $m$ 列的网格和一个机器人组成。位置 $(1, 1)$ 是棋盘的左上角，位置 $(n, m)$ 是右下角。\n\n开始时，机器人位于某个位置 $(x, y)$（第 $x$ 行，第 $y$ 列），玩家可以将其朝上下左右之一的方向进行移动。根据选择的方向，它将沿着该方向移动，直到到达目标格或网格中的特殊格。如果在任何时候机器人想要离开棋盘，它将翻折到另一侧。例如，如果它位于位置 $(n, 3)$ 并希望向下移动，它将到达位置 $(1, 3)$。\n\n棋盘上有三种类型的位置：\n\n- 空格：机器人朝相同的方向继续移动；\n- 左转格：当机器人进入此格时，它会左转 $90$ 度并继续移动；\n- 右转格：当机器人进入此格时，它会右转 $90$ 度并继续移动。\n\n网格中大部分位置都是空格，只有 $k$ 个位置是左转或右转格。\n\n游戏由 $q$ 轮组成。在第 $i$ 轮中，机器人将被放置在位置 $(a_i, b_i)$。目标是使用最少的转弯次数到达位置 $(c_i, d_i)$，或判定这是不可能的。\n\n在多次玩这个游戏后，Kile 意识到它比起初看起来要更具挑战性。这就是为什么他现在需要你的帮助。帮助他确定每一轮游戏所需的最小转弯次数！\n\n**注意**：如果机器人路径的起点或终点位于左转或右转格上，则该格不起作用。", "inputFormat": "第一行包含三个整数 $n,m,k\\ (1\\le n,m\\le 10^6,0\\le k\\le 10^5)$，分别表示行数，列数和网格中非空格的个数。\n\n接下来 $k$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i\\le n,1\\le y_i\\le m)$ 和一个字符 $s_i\\ (s_i\\in \\{\\texttt{L},\\texttt{R}\\})$，分别表示第 $i$ 个特殊格的位置和类别。如果 $s_i$ 是 `L`，则表示这是一个左转格。如果是 `R`，则表示这是一个右转格。\n\n接下来一行一个整数 $q\\ (1\\le q\\le 3\\cdot 10^5)$，表示游戏轮数。\n\n接下来 $q$ 行，每行四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,c_i\\le n,1\\le b_i,d_i\\le m)$，分别表示起始和目标位置。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 轮所需的最小转弯次数，如果无法到达目标，则输出 $-1$。", "hint": "### 样例解释 2\n\n第一轮：从 $(1, 1)$ 开始。如果初始机器人向左移动，它将在下一步到达 $(1, 3)$，因为它想要离开棋盘，所以会从另一侧进入。位置 $(1, 3)$ 是一个左转格，所以机器人将朝下方向移动。再经过两步，它将到达目标位置 $(3, 3)$​。\n\n第二轮：从 $(3, 3)$ 开始。如果初始机器人向上移动，它将在两步后到达 $(1, 3)$，在那里由于左转格而向左转。再经过两步，它将到达位置 $(1, 1)$，这也是一个左转格，所以它将向下移动。在下一步中，它将到达目标位置 $(2, 1)$。\n\n### 子任务\n\n| 子任务编号 |       附加限制       | 分值 |\n| :--------: | :------------------: | :--: |\n|    $1$     |        $k=0$         | $10$  |\n|    $2$     | $n,m\\le 300,q\\le 10$ | $13$ |\n|    $3$     |     $n,m\\le 300$     | $49$ |\n|    $4$     |      无附加限制      | $38$ |", "locale": "zh-CN"}}}
{"pid": "P10233", "type": "P", "difficulty": 2, "samples": [["2\nPpGgm\n2\n1 5\n4 5\nPPppGGgm\n5\n1 2\n3 4\n5 6\n7 7\n8 8", "6\n0\n6\n4\n2\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "前缀和", "差分", "洛谷月赛"], "title": "[yLCPC2024] A. dx 分计算", "background": "你说的对，但舞萌 DX 是一款由 SEGA 开发，华立科技代理，形似洗衣机的街机音乐游戏。\n\n只要看准时机拍到所有的音符就好啦！", "description": "在舞萌 DX 中，每个音符根据完成击打的时刻，会得到如下五种判定：\n\n- `Critical Perfect`：简记为 `P`，可得 $3$ 分 dx 分。\n- `Perfect`：简记为 `p`，可得 $2$ 分 dx 分。\n- `Great`：简记为 `G`，可得 $1$ 分 dx 分。\n- `Good`：简记为 `g`，不能得到 dx 分。\n- `Miss`：简记为 `m`，不能得到 dx 分。\n\n扶苏游玩了一局舞萌 DX，她将她各个音符的判定情况按顺序使用上面的简记规则记为了一个字符串 $s$。规定这个字符串最左边的字符表示第一个音符的判定结果，最右边的字符表示第 $|s|$ 个音符的判定结果，这里 $|s|$ 表示字符串 $|s|$ 的长度，也即整首歌的音符数。\n\n现在，扶苏有 $q$ 次询问，每次询问会给出两个整数 $l, r$，对每个询问你需要回答：这首歌的第 $l$ 个音符到第 $r$ 个音符（包含第 $l$ 个和第 $r$ 个）的判定结果共能得到多少 dx 分数？\n\n乐曲一段区间内的音符得到的 dx 分数是这些音符分别能得到的 dx 分数之和。", "inputFormat": "**本题单个测试点内有多组测试数据**，输入的第一行是一个正整数，表示数据组数 $T$。对每组测试数据：\n\n第一行是一个字符串 $s$（$1 \\leq |s| \\leq 10^7$），表示一首歌各个音符的判定结果。保证 $s$ 中只含字符 `P`，`p`，`G`，`g`，`m`。  \n第二行有一个整数 $q$（$1 \\leq q \\leq 10^4$），表示询问的数量。  \n接下来 $q$ 行，每行两个整数 $l, r$（$1 \\leq l \\leq r \\leq |s|$），表示一组询问。\n\n数据保证单个测试点内 $s$ 的长度之和不超过 $10^7$，$q$ 之和不超过 $10^4$。", "outputFormat": "对每组测试数据，按询问的顺序依次给出每个询问的答案。每个询问输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] A. dx 分计算", "background": "你说的对，但舞萌 DX 是一款由 SEGA 开发，华立科技代理，形似洗衣机的街机音乐游戏。\n\n只要看准时机拍到所有的音符就好啦！", "description": "在舞萌 DX 中，每个音符根据完成击打的时刻，会得到如下五种判定：\n\n- `Critical Perfect`：简记为 `P`，可得 $3$ 分 dx 分。\n- `Perfect`：简记为 `p`，可得 $2$ 分 dx 分。\n- `Great`：简记为 `G`，可得 $1$ 分 dx 分。\n- `Good`：简记为 `g`，不能得到 dx 分。\n- `Miss`：简记为 `m`，不能得到 dx 分。\n\n扶苏游玩了一局舞萌 DX，她将她各个音符的判定情况按顺序使用上面的简记规则记为了一个字符串 $s$。规定这个字符串最左边的字符表示第一个音符的判定结果，最右边的字符表示第 $|s|$ 个音符的判定结果，这里 $|s|$ 表示字符串 $|s|$ 的长度，也即整首歌的音符数。\n\n现在，扶苏有 $q$ 次询问，每次询问会给出两个整数 $l, r$，对每个询问你需要回答：这首歌的第 $l$ 个音符到第 $r$ 个音符（包含第 $l$ 个和第 $r$ 个）的判定结果共能得到多少 dx 分数？\n\n乐曲一段区间内的音符得到的 dx 分数是这些音符分别能得到的 dx 分数之和。", "inputFormat": "**本题单个测试点内有多组测试数据**，输入的第一行是一个正整数，表示数据组数 $T$。对每组测试数据：\n\n第一行是一个字符串 $s$（$1 \\leq |s| \\leq 10^7$），表示一首歌各个音符的判定结果。保证 $s$ 中只含字符 `P`，`p`，`G`，`g`，`m`。  \n第二行有一个整数 $q$（$1 \\leq q \\leq 10^4$），表示询问的数量。  \n接下来 $q$ 行，每行两个整数 $l, r$（$1 \\leq l \\leq r \\leq |s|$），表示一组询问。\n\n数据保证单个测试点内 $s$ 的长度之和不超过 $10^7$，$q$ 之和不超过 $10^4$。", "outputFormat": "对每组测试数据，按询问的顺序依次给出每个询问的答案。每个询问输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10234", "type": "P", "difficulty": 3, "samples": [["2\n2 2\n01\n11\n2 2\n01\n10", "-1\n2\nRD"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "广度优先搜索 BFS", "洛谷月赛"], "title": "[yLCPC2024] B. 找机厅", "background": "扶苏正在出发去打 mai！\n\n但是商场内部实在太复杂了，她在里面迷路了。已经在地铁站迷路过一次的扶苏看着商场的地图实在是不懂怎么走，你能帮帮她吗？", "description": "给定一个 $n$ 行 $m$ 列的 $01$ 矩阵，记矩阵第 $i$ 行第 $j$ 列的格子是 $(i, j)$（$1 \\leq i \\leq n$，$1 \\leq j \\leq m$）。\n\n你要从矩阵的左上角出发到达右下角。行走规则如下：\n\n- 如果你在格子 $(i, j)$，你下一步只能走到：$(i - 1, j)$、$(i + 1, j)$、$(i, j - 1)$、$(i, j + 1)$ 四个格子的其中之一。\n- 任意时刻你不能走出这个矩阵，即你的位置 $(i, j)$ 必须时刻满足 $1 \\leq i \\leq n$，$1 \\leq j \\leq m$。\n- 如果你想从一个格子走到另一个格子，除了满足上述的要求外，还必须保证：这两个格子对应的数字不同。即：写着 $0$ 的格子只能走到写着 $1$ 的格子，反之亦然。\n\n你每走一步就需要花费一个单位的时间。你需要用最短的时间从 $(1, 1)$ 到达 $(n, m)$。除了给出最短时间外，你还必须给出一种可行的最短用时的行走方法。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n, m$（$1 \\leq n, m \\leq 2 \\times 10^3$），表示矩阵的行数和列数。  \n接下来 $n$ 行，每行一个长度为 $m$ 的仅含字符 `0` `1` 的字符串，表示这个矩阵。\n\n数据保证每组数据内的 $n$ 之和、$m$ 之和均不超过 $2 \\times 10^3$。", "outputFormat": "对每组数据，输出一行或两行：\n\n如果从 $(1, 1)$ 无法到达 $(n, m)$，输出一行一个 $-1$ 表示无解。\n\n否则按如下规则输出：\n\n- 第一行输出一个整数 $t$，表示从左上角走到右下角的最短用时。\n- 第二行输出一个长度为 $t$ 的仅含字符 `L` `R` `U` `D` 的字符串 $s$，表示你给出的行走方法：\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i - 1, j)$，则 $s_i = \\texttt{U}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i + 1, j)$，则 $s_i = \\texttt{D}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j-1)$，则 $s_i = \\texttt{L}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j + 1)$，则 $s_i = \\texttt{R}$。\n\n你第二行输出的字符串长度必须恰好为第一行给出的最短用时 $t$。如果有多种方案符合要求，你可以输出任意一种。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] B. 找机厅", "background": "扶苏正在出发去打 mai！\n\n但是商场内部实在太复杂了，她在里面迷路了。已经在地铁站迷路过一次的扶苏看着商场的地图实在是不懂怎么走，你能帮帮她吗？", "description": "给定一个 $n$ 行 $m$ 列的 $01$ 矩阵，记矩阵第 $i$ 行第 $j$ 列的格子是 $(i, j)$（$1 \\leq i \\leq n$，$1 \\leq j \\leq m$）。\n\n你要从矩阵的左上角出发到达右下角。行走规则如下：\n\n- 如果你在格子 $(i, j)$，你下一步只能走到：$(i - 1, j)$、$(i + 1, j)$、$(i, j - 1)$、$(i, j + 1)$ 四个格子的其中之一。\n- 任意时刻你不能走出这个矩阵，即你的位置 $(i, j)$ 必须时刻满足 $1 \\leq i \\leq n$，$1 \\leq j \\leq m$。\n- 如果你想从一个格子走到另一个格子，除了满足上述的要求外，还必须保证：这两个格子对应的数字不同。即：写着 $0$ 的格子只能走到写着 $1$ 的格子，反之亦然。\n\n你每走一步就需要花费一个单位的时间。你需要用最短的时间从 $(1, 1)$ 到达 $(n, m)$。除了给出最短时间外，你还必须给出一种可行的最短用时的行走方法。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n, m$（$1 \\leq n, m \\leq 2 \\times 10^3$），表示矩阵的行数和列数。  \n接下来 $n$ 行，每行一个长度为 $m$ 的仅含字符 `0` `1` 的字符串，表示这个矩阵。\n\n数据保证每组数据内的 $n$ 之和、$m$ 之和均不超过 $2 \\times 10^3$。", "outputFormat": "对每组数据，输出一行或两行：\n\n如果从 $(1, 1)$ 无法到达 $(n, m)$，输出一行一个 $-1$ 表示无解。\n\n否则按如下规则输出：\n\n- 第一行输出一个整数 $t$，表示从左上角走到右下角的最短用时。\n- 第二行输出一个长度为 $t$ 的仅含字符 `L` `R` `U` `D` 的字符串 $s$，表示你给出的行走方法：\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i - 1, j)$，则 $s_i = \\texttt{U}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i + 1, j)$，则 $s_i = \\texttt{D}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j-1)$，则 $s_i = \\texttt{L}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j + 1)$，则 $s_i = \\texttt{R}$。\n\n你第二行输出的字符串长度必须恰好为第一行给出的最短用时 $t$。如果有多种方案符合要求，你可以输出任意一种。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10235", "type": "P", "difficulty": 4, "samples": [["2\n5 2\n1 3 2 5 4\n8 2\n4 2 3 6 7 1 8 5", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "树状数组", "洛谷原创", "洛谷月赛"], "title": "[yLCPC2024] C. 舞萌基本练习", "background": "", "description": "扶苏在游玩舞萌 dx 的过程中，发现一首歌可以分成不超过 $k$ 段分别进行练习。\n\n具体来说，这首歌共有 $n$ 个音符，每个音符有一个难度值。第 $i$ 个音符的难度值为 $a_i$。扶苏觉得一段歌曲的音符的难度应该是尽可能变难的。因此对于音符序列的一个区间 $[l, r]$，她认为这段区间的『不优美度』是这段区间的**逆序对**数。\n\n一个区间 $[l, r]$ 的**逆序对数**被定义为满足 $l \\leq i < j \\leq r$ 且 $a_i > a_j$ 的数对 $(i, j)$ 个数。\n\n扶苏希望把这首歌划分成不超过 $k$ 个子段，满足每个音符都至少属于一个子段，使得不优美度最大的段的不优美度尽可能小。\n\n形式化的，你需要划分出 $t \\leq k$ 个区间 $[l_1, r_1], [l_2, r_2], \\dots [l_t, r_t]$，满足：\n\n- $l_1 = 1$，$r_t = n$。\n- 对 $1 \\leq i < t$，$r_i + 1= l_{i + 1}$。\n- 对 $1 \\leq i \\leq t$，$l_i \\leq r_i$。\n\n定义 $f(l, r)$ 表示区间 $[l, r]$ 的不优美度，最小化 $\\max\\limits_{i = 1}^t f(l_i, r_i)$", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,k$（$1 \\leq k \\leq n \\leq 10^5$），表示歌曲的音符数和最多的划分段数。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$-10^9 \\leq a_i \\leq 10^9$），表示每个音符的难度。\n\n数据保证单个测试点内的 $n$ 之和不超过 $10^5$。", "outputFormat": "对每组数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] C. 舞萌基本练习", "background": "", "description": "扶苏在游玩舞萌 dx 的过程中，发现一首歌可以分成不超过 $k$ 段分别进行练习。\n\n具体来说，这首歌共有 $n$ 个音符，每个音符有一个难度值。第 $i$ 个音符的难度值为 $a_i$。扶苏觉得一段歌曲的音符的难度应该是尽可能变难的。因此对于音符序列的一个区间 $[l, r]$，她认为这段区间的『不优美度』是这段区间的**逆序对**数。\n\n一个区间 $[l, r]$ 的**逆序对数**被定义为满足 $l \\leq i < j \\leq r$ 且 $a_i > a_j$ 的数对 $(i, j)$ 个数。\n\n扶苏希望把这首歌划分成不超过 $k$ 个子段，满足每个音符都至少属于一个子段，使得不优美度最大的段的不优美度尽可能小。\n\n形式化的，你需要划分出 $t \\leq k$ 个区间 $[l_1, r_1], [l_2, r_2], \\dots [l_t, r_t]$，满足：\n\n- $l_1 = 1$，$r_t = n$。\n- 对 $1 \\leq i < t$，$r_i + 1= l_{i + 1}$。\n- 对 $1 \\leq i \\leq t$，$l_i \\leq r_i$。\n\n定义 $f(l, r)$ 表示区间 $[l, r]$ 的不优美度，最小化 $\\max\\limits_{i = 1}^t f(l_i, r_i)$", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,k$（$1 \\leq k \\leq n \\leq 10^5$），表示歌曲的音符数和最多的划分段数。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$-10^9 \\leq a_i \\leq 10^9$），表示每个音符的难度。\n\n数据保证单个测试点内的 $n$ 之和不超过 $10^5$。", "outputFormat": "对每组数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10236", "type": "P", "difficulty": 4, "samples": [["2\n5\n5 3 1 4 2\n6\n6 5 1 4 2 3", "1168\n15655"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "区间 DP", "洛谷月赛"], "title": "[yLCPC2024] D. 排卡", "background": "经过千辛万苦，扶苏终于到达了机厅。但是她很快发现机厅排起了大 b 队 ~~（不是省选的 B 队）~~。\n\n舞萌玩家们在人多的时候经常采取排卡的方式决定谁下一个上机。因为人实在是太多了，他们在排卡的时候，便注意到了卡上的编号。\n\n他们向扶苏提了一个问题，你能解决吗？", "description": "扶苏有一个双端队列 $a$。这个队列与计算机科学中队列的概念类似，不同的是，这个队列既可以从队列头读取和弹出元素，也可以在队列尾部读取和弹出元素，因此被称为『双端队列』。\n\n这个队列中有 $n$ 个数。扶苏将通过 $n$ 次操作构造一个长度为 $n$ 的序列 $b$，第 $i$（$1 \\leq i \\leq n$）次操作会可以进行如下两个过程之一：\n\n1. 令 $b_i$ 为 $a$ 的队列头，并在 $a$ 的头部弹出一个元素。\n2. 令 $b_i$ 为 $a$ 的队列尾，并在 $a$ 的尾部弹出一个元素。\n\n我们定义一个数对 $(i, j)$ 的得分为：\n\n$$\\mathrm{score}(i,j) = i^j \\bmod 998244353$$\n\n即 $i$ 的 $j$ 次幂对 $998244353$ 取余数的结果。特别的，在本题中我们规定 $0^0 = 0$。\n\n现在，扶苏想用最优的策略构造 $b$ 序列，最大化如下式子的值：\n\n$$\\sum_{i = 1}^{n - 1} \\mathrm{score}(b_i, b_{i + 1})$$\n\n即 $b$ 所有相邻两项按原顺序计算的得分之和。\n\n注意，我们仅在计算一个数对的时候将得分对 $998,244,353$ 取模，在计算求和时不再将这个和取余。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数，表示数据组数 $T$。对每组数据：\n\n第一行是一个整数 $n$（$2 \\leq n \\leq 10^3$），表示序列的长度。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots a_n$（$0 \\leq a_i < 998,244,353$），按从头到尾的顺序表示队列 $a$ 里每个数字的值。\n\n数据保证单个测试点内 $n$ 的和不超过 $10^3$。", "outputFormat": "对每组测试数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] D. 排卡", "background": "经过千辛万苦，扶苏终于到达了机厅。但是她很快发现机厅排起了大 b 队 ~~（不是省选的 B 队）~~。\n\n舞萌玩家们在人多的时候经常采取排卡的方式决定谁下一个上机。因为人实在是太多了，他们在排卡的时候，便注意到了卡上的编号。\n\n他们向扶苏提了一个问题，你能解决吗？", "description": "扶苏有一个双端队列 $a$。这个队列与计算机科学中队列的概念类似，不同的是，这个队列既可以从队列头读取和弹出元素，也可以在队列尾部读取和弹出元素，因此被称为『双端队列』。\n\n这个队列中有 $n$ 个数。扶苏将通过 $n$ 次操作构造一个长度为 $n$ 的序列 $b$，第 $i$（$1 \\leq i \\leq n$）次操作会可以进行如下两个过程之一：\n\n1. 令 $b_i$ 为 $a$ 的队列头，并在 $a$ 的头部弹出一个元素。\n2. 令 $b_i$ 为 $a$ 的队列尾，并在 $a$ 的尾部弹出一个元素。\n\n我们定义一个数对 $(i, j)$ 的得分为：\n\n$$\\mathrm{score}(i,j) = i^j \\bmod 998244353$$\n\n即 $i$ 的 $j$ 次幂对 $998244353$ 取余数的结果。特别的，在本题中我们规定 $0^0 = 0$。\n\n现在，扶苏想用最优的策略构造 $b$ 序列，最大化如下式子的值：\n\n$$\\sum_{i = 1}^{n - 1} \\mathrm{score}(b_i, b_{i + 1})$$\n\n即 $b$ 所有相邻两项按原顺序计算的得分之和。\n\n注意，我们仅在计算一个数对的时候将得分对 $998,244,353$ 取模，在计算求和时不再将这个和取余。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数，表示数据组数 $T$。对每组数据：\n\n第一行是一个整数 $n$（$2 \\leq n \\leq 10^3$），表示序列的长度。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots a_n$（$0 \\leq a_i < 998,244,353$），按从头到尾的顺序表示队列 $a$ 里每个数字的值。\n\n数据保证单个测试点内 $n$ 的和不超过 $10^3$。", "outputFormat": "对每组测试数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10237", "type": "P", "difficulty": 4, "samples": [["1\n3 3\n1 1\n2 2 3\n3 4 5 6\n1 2\n1 3\n2 3", "2\n4\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "二分", "洛谷原创", "洛谷月赛"], "title": "[yLCPC2024] E. Latent Kindom", "background": "扶苏和 10circle 老师正在拼机游玩最新最热歌曲 Latent Kindom（LK）！\n\nLK 这首歌共有 $n$ 个难度的谱面，第 $i$ 个难度的谱面有 $l_i$ 个音符，分别是 $a_{i, 1}, a_{i, 2}, \\dots a_{i, l_i}$，构成了一个序列。\n\n扶苏想知道，如果她开难度为 $i$ 的谱面，10circle 老师开难度为 $j$ 的谱面，那么两个谱面的音符序列合并起来的中位数是多少。", "description": "给定 $n$ 个序列 $a_1, a_2, \\dots a_n$。你要回答 $q$ 次询问，每次询问会给出 $i, j$，你要求出序列 $a_i$ 和 $a_j$ 拼接后的中位数是多少。\n\n拼接两个序列 $x, y$ 指的是把 $y$ 序列中的数依次写在 $x$ 序列后面。如果得到的序列长度为 $t$，中位数指的是序列中第 $\\left\\lceil\\frac t 2 \\right\\rceil$ 小的数字。其中 $\\left\\lceil x \\right\\rceil$ 表示不小于 $x$ 的最小整数。\n\n需要注意的是，本题的询问是独立的。也就是说，虽然你要回答假设 $a_i$ 和 $a_j$ 拼接后的中位数，但是不会真的进行对数列拼接的操作。", "inputFormat": "**本题单个测试点内有多组测试数据**。输入的第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,q$（$2 \\leq n, q \\leq 10^6$），表示序列的个数和询问的次数。  \n接下来 $n$ 行，每行表示一个序列。第 $i$ 行首先有一个整数 $l_i$（$1 \\leq l_i \\leq 10^6$），表示序列 $a_i$ 的长度。接下来 $l_i$ 个整数，表示序列 $a_i$。保证序列里的数都是不大于 $10^{18}$ 的正整数。  \n接下来 $q$ 行，每行两个整数 $i,j$（$1 \\leq i,j \\leq n$，$i \\neq j$）表示一组询问。\n\n数据保证单个测试点内的 $n,q,l_i$ 之和均不超过 $10^6$。", "outputFormat": "对每组数据的每组询问，输出一行一个整数表示答案。", "hint": "#### 提示\n\n请注意大量的数据读入输出对程序效率造成的影响，使用合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] E. Latent Kindom", "background": "扶苏和 10circle 老师正在拼机游玩最新最热歌曲 Latent Kindom（LK）！\n\nLK 这首歌共有 $n$ 个难度的谱面，第 $i$ 个难度的谱面有 $l_i$ 个音符，分别是 $a_{i, 1}, a_{i, 2}, \\dots a_{i, l_i}$，构成了一个序列。\n\n扶苏想知道，如果她开难度为 $i$ 的谱面，10circle 老师开难度为 $j$ 的谱面，那么两个谱面的音符序列合并起来的中位数是多少。", "description": "给定 $n$ 个序列 $a_1, a_2, \\dots a_n$。你要回答 $q$ 次询问，每次询问会给出 $i, j$，你要求出序列 $a_i$ 和 $a_j$ 拼接后的中位数是多少。\n\n拼接两个序列 $x, y$ 指的是把 $y$ 序列中的数依次写在 $x$ 序列后面。如果得到的序列长度为 $t$，中位数指的是序列中第 $\\left\\lceil\\frac t 2 \\right\\rceil$ 小的数字。其中 $\\left\\lceil x \\right\\rceil$ 表示不小于 $x$ 的最小整数。\n\n需要注意的是，本题的询问是独立的。也就是说，虽然你要回答假设 $a_i$ 和 $a_j$ 拼接后的中位数，但是不会真的进行对数列拼接的操作。", "inputFormat": "**本题单个测试点内有多组测试数据**。输入的第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,q$（$2 \\leq n, q \\leq 10^6$），表示序列的个数和询问的次数。  \n接下来 $n$ 行，每行表示一个序列。第 $i$ 行首先有一个整数 $l_i$（$1 \\leq l_i \\leq 10^6$），表示序列 $a_i$ 的长度。接下来 $l_i$ 个整数，表示序列 $a_i$。保证序列里的数都是不大于 $10^{18}$ 的正整数。  \n接下来 $q$ 行，每行两个整数 $i,j$（$1 \\leq i,j \\leq n$，$i \\neq j$）表示一组询问。\n\n数据保证单个测试点内的 $n,q,l_i$ 之和均不超过 $10^6$。", "outputFormat": "对每组数据的每组询问，输出一行一个整数表示答案。", "hint": "#### 提示\n\n请注意大量的数据读入输出对程序效率造成的影响，使用合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN"}}}
{"pid": "P10238", "type": "P", "difficulty": 5, "samples": [["2\n4 2\n1 2 1\n2 3 2\n3 4 3\n2\n3\n12 2\n1 2 1\n2 3 1\n1 4 3\n2 5 4\n5 6 3\n5 7 2\n7 8 1\n8 9 1\n9 10 1\n7 11 5\n8 12 3\n4\n6", "3\n1\n10\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "最近公共祖先 LCA", "洛谷月赛", "离线处理"], "title": "[yLCPC2024] F. PANDORA PARADOXXX", "background": "扶苏所在的城市的机厅联合举办了 KING of PerforPandora！\n\n但是因为大雪封路，有些机厅不能到达。她想知道在能互相到达的机厅中距离最远为多少。", "description": "给定一棵 $n$ 个结点的树。一棵树被定义为一个有 $n$ 个点和 $n-1$ 条边的无向连通图。这棵树的边有边权。两点 $u,v$ 间的距离 $\\mathrm{dist}(u,v)$ 定义为从 $u$ 到 $v$ 的简单路径边权和。可以证明树上两点间的简单路径是唯一的。特别的，我们规定 $\\mathrm{dist}(u, u) = 0$。\n\n现在有 $q$ 次操作，每次会删除这棵树上的一条边。显然在做出至少一次操作后，这棵树会被分成若干个连通块。你需要在每次操作后都求出每个连通块内距离最远的两个点的距离的最大值。\n\n形式化的，每次操作后，你要求出\n\n$$\\max\\limits_{c \\in C}\\{\\max\\limits_{u, v \\in c} \\mathrm{dist}(u,v)\\}$$\n\n其中 $C$ 表示当前所有连通块构成的集合。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n输入第一行是两个整数 $n, q$（$1 \\leq q < n \\leq 10^5$），依次表示树的结点数和操作数。  \n接下来 $n - 1$ 行，每行三个整数 $u,v,w$（$1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$）表示树上有一条连接 $u$ 和 $v$ 的权值为 $w$ 的边。  \n接下来 $q$ 行，每行一个整数 $e_i$（$1 \\leq e_i < n$），表示这次操作删除了输入的第 $e_i$ 条边。数据保证每条边只会被删除一次。\n\n数据保证单个测试点内的 $n$ 之和不超过 $3 \\times 10^5$。", "outputFormat": "对每组数据，输出 $q$ 行，每行一个整数，依次表示每次操作后所求的答案。", "hint": "#### 提示\n\n请注意大量的数据读入和输出对程序效率造成的影响，选择合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] F. PANDORA PARADOXXX", "background": "扶苏所在的城市的机厅联合举办了 KING of PerforPandora！\n\n但是因为大雪封路，有些机厅不能到达。她想知道在能互相到达的机厅中距离最远为多少。", "description": "给定一棵 $n$ 个结点的树。一棵树被定义为一个有 $n$ 个点和 $n-1$ 条边的无向连通图。这棵树的边有边权。两点 $u,v$ 间的距离 $\\mathrm{dist}(u,v)$ 定义为从 $u$ 到 $v$ 的简单路径边权和。可以证明树上两点间的简单路径是唯一的。特别的，我们规定 $\\mathrm{dist}(u, u) = 0$。\n\n现在有 $q$ 次操作，每次会删除这棵树上的一条边。显然在做出至少一次操作后，这棵树会被分成若干个连通块。你需要在每次操作后都求出每个连通块内距离最远的两个点的距离的最大值。\n\n形式化的，每次操作后，你要求出\n\n$$\\max\\limits_{c \\in C}\\{\\max\\limits_{u, v \\in c} \\mathrm{dist}(u,v)\\}$$\n\n其中 $C$ 表示当前所有连通块构成的集合。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n输入第一行是两个整数 $n, q$（$1 \\leq q < n \\leq 10^5$），依次表示树的结点数和操作数。  \n接下来 $n - 1$ 行，每行三个整数 $u,v,w$（$1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$）表示树上有一条连接 $u$ 和 $v$ 的权值为 $w$ 的边。  \n接下来 $q$ 行，每行一个整数 $e_i$（$1 \\leq e_i < n$），表示这次操作删除了输入的第 $e_i$ 条边。数据保证每条边只会被删除一次。\n\n数据保证单个测试点内的 $n$ 之和不超过 $3 \\times 10^5$。", "outputFormat": "对每组数据，输出 $q$ 行，每行一个整数，依次表示每次操作后所求的答案。", "hint": "#### 提示\n\n请注意大量的数据读入和输出对程序效率造成的影响，选择合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN"}}}
{"pid": "P10239", "type": "P", "difficulty": 3, "samples": [["2", "4"], ["100", "1471"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "[yLCPC2024] G. 系ぎて", "background": "> 与其说不甘心吧，这谱面到底是什么东西…  \n> ——ReMiRiA  \n> 虽然获得了冠军非常开心，但是这个谱面到底是什么？真的会收录吗？？  \n> ——yoshiki", "description": "扶苏很喜欢拆分自然数。\n\n对给定的正整数 $n$，若 $n = i \\times j \\times k$，其中 $i,j,k$ 是正整数，则称三元组 $(i,j,k)$ 是 $n$ 的一组优秀的拆分。\n\n三元组 $(i,j,k)$ 是有序的。例如，对于 $2 = 1 \\times 1 \\times 2 = 1 \\times 2 \\times 1 = 2 \\times 1 \\times 1$，我们称 $(1,1,2)$、$(1,2,1)$、$(2,1,1)$ 是三组不同的优秀的拆分。\n\n现在，扶苏想问你，对于 $n = 1,2,3\\dots N$，$n$ 的所有的优秀的拆分之和是多少。\n\n形式化的，记 $f(n)$ 表示 $n$ 的优秀的拆分数量，你需要求出 $\\sum_{i = 1}^N f(i)$。", "inputFormat": "输入只有一行一个整数，表示 $N$（$1 \\leq N \\leq 10^{10}$）。", "outputFormat": "输出一行一个整数表示答案。因为答案可能过大，你只需要输出这个值除以 $2^{64}$ 的余数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] G. 系ぎて", "background": "> 与其说不甘心吧，这谱面到底是什么东西…  \n> ——ReMiRiA  \n> 虽然获得了冠军非常开心，但是这个谱面到底是什么？真的会收录吗？？  \n> ——yoshiki", "description": "扶苏很喜欢拆分自然数。\n\n对给定的正整数 $n$，若 $n = i \\times j \\times k$，其中 $i,j,k$ 是正整数，则称三元组 $(i,j,k)$ 是 $n$ 的一组优秀的拆分。\n\n三元组 $(i,j,k)$ 是有序的。例如，对于 $2 = 1 \\times 1 \\times 2 = 1 \\times 2 \\times 1 = 2 \\times 1 \\times 1$，我们称 $(1,1,2)$、$(1,2,1)$、$(2,1,1)$ 是三组不同的优秀的拆分。\n\n现在，扶苏想问你，对于 $n = 1,2,3\\dots N$，$n$ 的所有的优秀的拆分之和是多少。\n\n形式化的，记 $f(n)$ 表示 $n$ 的优秀的拆分数量，你需要求出 $\\sum_{i = 1}^N f(i)$。", "inputFormat": "输入只有一行一个整数，表示 $N$（$1 \\leq N \\leq 10^{10}$）。", "outputFormat": "输出一行一个整数表示答案。因为答案可能过大，你只需要输出这个值除以 $2^{64}$ 的余数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10240", "type": "P", "difficulty": 6, "samples": [["11 10\n3 1 3 8 4 3 2 1 2 1 1\n", "4\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"], ["见附件中的 3.in。", "见附件中的 3.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "THUSC"], "title": "[THUSC 2021] 搬东西", "background": "", "description": "有 $n$ 件物品，编号为 $1$ 到 $n$，编号为 $i$ 的物品重量记为 $a_i$，是一个正整数。\n\n只有一个可用的箱子，它最大可容纳的重量是一个正整数 $m$。物品被分批搬运，每批搬走其中一部分，直至所有物品都被搬走。每个批次被搬走的物品是当时剩下物品的一个子集，按如下策略选择：\n\n选择重量之和不超过 $m$ 且包含物品数量最多的方案，如果有多种数量最多的方案，则将被选择的物品编号从小到大排列成一个序列，选择使这个序列字典序最大的方案。\n\n请计算出依此策略会分成多少批次来搬运。", "inputFormat": "输入共有两行，第一行包含两个空格分隔的正整数 $n, m$，第二行包含 $n$ 个空格隔开的正整数，依次为 $n$ 个物品的重量 $a_i$。", "outputFormat": "输出一个正整数，表示完成搬运所需的批次数。", "hint": "**【样例解释 #1】**\n\n第一次最多可以搬运 $6$ 件物品，编号序列为 $6, 7, 8, 9, 10, 11$。\n\n第二次最多可以搬运 $3$ 件物品，这时有 $4$ 种数量最大的方案：\n\n+ 编号序列 $1, 2, 3$。\n+ 编号序列 $1, 2, 5$。\n+ 编号序列 $1, 3, 5$。\n+ 编号序列 $2, 3, 5$。\n\n选择字典序最大的 $2, 3, 5$。\n\n第三次最多可以搬运 $1$ 件物品，编号序列为 $4$。\n\n第四次最多可以搬运 $1$ 件物品，编号序列为 $1$。\n\n**【子任务】**\n\n|子任务|分值|$n$|$m$|\n|:----:|:----:|:----:|:----:|\n|$1$|$5$|$n \\leq 20$|$m \\leq 100$|\n|$2$|$25$|$n \\leq 500$|$m \\leq 10^9$|\n|$3$|$20$|$n \\leq 3000$|$m \\leq 10^9$|\n|$4$|$10$|$n \\leq 50000$|$m \\leq 10$|\n|$5$|$40$|$n \\leq 50000$|$m \\leq 10^9$|\n\n全部数据满足：\n\n+ $1 \\leq n \\leq 50000$，$1 \\leq m \\leq 10^9$；\n+ 所有物品的重量满足 $1 \\leq a_i \\leq m, \\ i=1 \\dots n$。\n\n**【提示】**\n\n对于两个等长且不相同的序列 $a$ 和 $b$，如果序列中的元素可以比较大小，那么 $a$ 与 $b$ 的字典序大小关系如下定义：从前向后找到第一个位置 $i$ 使 $a_i \\neq b_i$，若 $a_i < b_i$ 则 $a<b$，否则 $a_i>b_i$ 时 $a>b$。\n\n在本题中，$a$ 和 $b$ 是两个搬运方案中涉及的物品编号序列，元素之间的大小关系指的就是编号之间的整数比较。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2021] 搬东西", "background": "", "description": "有 $n$ 件物品，编号为 $1$ 到 $n$，编号为 $i$ 的物品重量记为 $a_i$，是一个正整数。\n\n只有一个可用的箱子，它最大可容纳的重量是一个正整数 $m$。物品被分批搬运，每批搬走其中一部分，直至所有物品都被搬走。每个批次被搬走的物品是当时剩下物品的一个子集，按如下策略选择：\n\n选择重量之和不超过 $m$ 且包含物品数量最多的方案，如果有多种数量最多的方案，则将被选择的物品编号从小到大排列成一个序列，选择使这个序列字典序最大的方案。\n\n请计算出依此策略会分成多少批次来搬运。", "inputFormat": "输入共有两行，第一行包含两个空格分隔的正整数 $n, m$，第二行包含 $n$ 个空格隔开的正整数，依次为 $n$ 个物品的重量 $a_i$。", "outputFormat": "输出一个正整数，表示完成搬运所需的批次数。", "hint": "**【样例解释 #1】**\n\n第一次最多可以搬运 $6$ 件物品，编号序列为 $6, 7, 8, 9, 10, 11$。\n\n第二次最多可以搬运 $3$ 件物品，这时有 $4$ 种数量最大的方案：\n\n+ 编号序列 $1, 2, 3$。\n+ 编号序列 $1, 2, 5$。\n+ 编号序列 $1, 3, 5$。\n+ 编号序列 $2, 3, 5$。\n\n选择字典序最大的 $2, 3, 5$。\n\n第三次最多可以搬运 $1$ 件物品，编号序列为 $4$。\n\n第四次最多可以搬运 $1$ 件物品，编号序列为 $1$。\n\n**【子任务】**\n\n|子任务|分值|$n$|$m$|\n|:----:|:----:|:----:|:----:|\n|$1$|$5$|$n \\leq 20$|$m \\leq 100$|\n|$2$|$25$|$n \\leq 500$|$m \\leq 10^9$|\n|$3$|$20$|$n \\leq 3000$|$m \\leq 10^9$|\n|$4$|$10$|$n \\leq 50000$|$m \\leq 10$|\n|$5$|$40$|$n \\leq 50000$|$m \\leq 10^9$|\n\n全部数据满足：\n\n+ $1 \\leq n \\leq 50000$，$1 \\leq m \\leq 10^9$；\n+ 所有物品的重量满足 $1 \\leq a_i \\leq m, \\ i=1 \\dots n$。\n\n**【提示】**\n\n对于两个等长且不相同的序列 $a$ 和 $b$，如果序列中的元素可以比较大小，那么 $a$ 与 $b$ 的字典序大小关系如下定义：从前向后找到第一个位置 $i$ 使 $a_i \\neq b_i$，若 $a_i < b_i$ 则 $a<b$，否则 $a_i>b_i$ 时 $a>b$。\n\n在本题中，$a$ 和 $b$ 是两个搬运方案中涉及的物品编号序列，元素之间的大小关系指的就是编号之间的整数比较。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN"}}}
{"pid": "P10241", "type": "P", "difficulty": 6, "samples": [["9\n2 4 1 6 7 3 5 1 2\n2 3\n6 1\n6 7\n1 2\n8 6\n4 2\n6 9\n4 5\n", "5\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["点分治", "树上启发式合并", "2021", "O2优化", "树链剖分", "线段树合并", "THUSC"], "title": "[THUSC 2021] 白兰地厅的西瓜", "background": "> 在地底的洞府中住着一个霍比特人。这不是那种让人恶心的洞，脏兮兮湿乎乎的，长满虫子，透着一股子泥腥味儿；也不是那种满是泥沙的洞，干巴巴光秃秃的，没地方好坐，也没好东西好吃。这是一个霍比特人的洞，而霍比特人的洞就意味着舒适。\n> \n> ——《霍比特人》开篇", "description": "白兰地厅是最大的霍比特洞之一，位于雄鹿山内部，是白兰地鹿家族的祖宅，数百年来白兰地鹿家族的霍比特人不断扩张白兰地厅的规模，直至其占满了整个山丘。白兰地鹿家族是弗罗多·巴金斯的母族，他十二岁那年，双亲在划船时不幸溺亡，弗罗多便被交由白兰地厅抚养。\n\n白兰地厅有 $n$ 个房间，房间之间以双向圆形通道相连。从任意一个房间出发都可以到达任意另一个房间，但为了避免人们迷失在交错纵横的通道里，白兰地厅经过了精心设计，以保证任意两个房间之间仅有一条路径可达。在炎炎的夏日，白兰地鹿家有贮藏甘甜可口的西瓜的习俗，但由于西瓜个头太大，白兰地鹿家会在每个房间里贮藏恰好一个西瓜。对一个西瓜而言最重要的是它的甜度，$i$ 号房间里的西瓜的甜度为 $a_i$。\n\n弗罗多算是客居于此，因而可以在白兰地厅自由走动，也可以在任意一个他想过夜的房间里过夜。弗罗多每天会从一个房间前往另一个房间，但他生性懒惰，总是会沿着最短的路径来走。经过每个房间时弗罗多都可以品尝那个房间里的西瓜，当然他也可以只是经过而选择忽略西瓜——这也包括了他出发和最终落脚的房间。\n\n弗罗多喜欢吃甜的西瓜，然而众所周知，味蕾感受到的甜度是相对甜度，也就是说，如果弗罗多先吃了一个甜度为 $x$ 的西瓜，紧接着又吃了一个甜度为 $y$ 的西瓜，当 $y > x$ 时，味蕾才会觉得后者是甜的，当 $y \\le x$ 时，弗罗多并不会感觉到后者的甜。所以，弗罗多给自己定了一个规矩：**除了每天的第一个西瓜外，他吃的每一个西瓜的甜度都要大于前一个**。\n\n一天清晨，弗罗多突然对白兰地厅里百无聊赖的生活心生倦意，或许只有西瓜才能让他解忧，他想吃很多个西瓜，并且不想违背他的规矩。弗罗多不禁陷入思考……他的一天里总是面临很多选择，从哪一个房间出发、最终抵达哪一个房间、在经过的房间中选择吃哪一些房间的西瓜、并忽略另一些房间里的西瓜……弗罗多想知道，在如此多的选择下，弗罗多的一天最多能吃到多少个西瓜呢？", "inputFormat": "第一行包含一个正整数 $n$，表示白兰地厅的房间数量。保证 $2 \\le n \\le 10^{5}$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个整数为 $a_i$，表示 $i$ 号房间里的西瓜的甜度。保证 $1 \\le a_i \\le 10^{9}$。\n\n接下来 $n - 1$ 行描述了白兰地厅的形态，第 $i$ 行为两个正整数 $u_i$ 和 $v_i$，表示 $u_i$ 号房间和 $v_i$ 号房间之间有一条双向通道。保证 $1 \\le u_i, v_i \\le n$。", "outputFormat": "输出共一行，包含一个正整数，即 **弗罗多一天里最多能吃到多少个西瓜**。", "hint": "**【样例解释 #1】**\n\n下图为本样例中的白兰地厅的示意图。黑色直线表示房间之间的通道；左侧墙壁上的数字为房间编号；西瓜内部的数字为其甜度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3i7dc9g.png)\n\n弗罗多一天最多能吃到 5 个西瓜，有三种选择可以让他吃到 5 个西瓜。\n\n选择一：\n\n - 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n - 经过 6 号房间，忽略房间里的西瓜；\n - 经过 1 号房间，并吃掉房间里的西瓜（甜度为 2）；\n - 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n - 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n - 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择二：\n\n + 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n + 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n + 经过 1 号房间，忽略房间里的西瓜；\n + 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n + 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n + 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择三：\n\n * 从 9 号房间出发，并吃掉房间里的西瓜（甜度为 2）；\n * 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n * 经过 1 号房间，忽略房间里的西瓜；\n * 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n * 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n * 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n \n **【子任务】**\n \n 本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n|子任务编号|$n \\le$|特殊性质|占分|\n|:----:|:----:|:----:|:----:|\n|$1$|$100$|无|$10$|\n|$2$|$1000$|无|$10$|\n|$3$|$5000$|$a_i \\le 4$|$10$|\n|$4$|$10 ^ 5$|$a_i \\le 2$|$10$|\n|$5$|$10 ^ 5$|树中仅有一个节点度数大于 $1$|$10$|\n|$6$|$10 ^ 5$|树中所有节点度数不超过 $2$|$10$|\n|$7$|$10 ^ 5$|无|$40$|\n\n对于所有测试点，保证 $1 \\le a_i \\le 10^{9}$，$2 \\le n \\le 10^{5}$。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2021] 白兰地厅的西瓜", "background": "> 在地底的洞府中住着一个霍比特人。这不是那种让人恶心的洞，脏兮兮湿乎乎的，长满虫子，透着一股子泥腥味儿；也不是那种满是泥沙的洞，干巴巴光秃秃的，没地方好坐，也没好东西好吃。这是一个霍比特人的洞，而霍比特人的洞就意味着舒适。\n> \n> ——《霍比特人》开篇", "description": "白兰地厅是最大的霍比特洞之一，位于雄鹿山内部，是白兰地鹿家族的祖宅，数百年来白兰地鹿家族的霍比特人不断扩张白兰地厅的规模，直至其占满了整个山丘。白兰地鹿家族是弗罗多·巴金斯的母族，他十二岁那年，双亲在划船时不幸溺亡，弗罗多便被交由白兰地厅抚养。\n\n白兰地厅有 $n$ 个房间，房间之间以双向圆形通道相连。从任意一个房间出发都可以到达任意另一个房间，但为了避免人们迷失在交错纵横的通道里，白兰地厅经过了精心设计，以保证任意两个房间之间仅有一条路径可达。在炎炎的夏日，白兰地鹿家有贮藏甘甜可口的西瓜的习俗，但由于西瓜个头太大，白兰地鹿家会在每个房间里贮藏恰好一个西瓜。对一个西瓜而言最重要的是它的甜度，$i$ 号房间里的西瓜的甜度为 $a_i$。\n\n弗罗多算是客居于此，因而可以在白兰地厅自由走动，也可以在任意一个他想过夜的房间里过夜。弗罗多每天会从一个房间前往另一个房间，但他生性懒惰，总是会沿着最短的路径来走。经过每个房间时弗罗多都可以品尝那个房间里的西瓜，当然他也可以只是经过而选择忽略西瓜——这也包括了他出发和最终落脚的房间。\n\n弗罗多喜欢吃甜的西瓜，然而众所周知，味蕾感受到的甜度是相对甜度，也就是说，如果弗罗多先吃了一个甜度为 $x$ 的西瓜，紧接着又吃了一个甜度为 $y$ 的西瓜，当 $y > x$ 时，味蕾才会觉得后者是甜的，当 $y \\le x$ 时，弗罗多并不会感觉到后者的甜。所以，弗罗多给自己定了一个规矩：**除了每天的第一个西瓜外，他吃的每一个西瓜的甜度都要大于前一个**。\n\n一天清晨，弗罗多突然对白兰地厅里百无聊赖的生活心生倦意，或许只有西瓜才能让他解忧，他想吃很多个西瓜，并且不想违背他的规矩。弗罗多不禁陷入思考……他的一天里总是面临很多选择，从哪一个房间出发、最终抵达哪一个房间、在经过的房间中选择吃哪一些房间的西瓜、并忽略另一些房间里的西瓜……弗罗多想知道，在如此多的选择下，弗罗多的一天最多能吃到多少个西瓜呢？", "inputFormat": "第一行包含一个正整数 $n$，表示白兰地厅的房间数量。保证 $2 \\le n \\le 10^{5}$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个整数为 $a_i$，表示 $i$ 号房间里的西瓜的甜度。保证 $1 \\le a_i \\le 10^{9}$。\n\n接下来 $n - 1$ 行描述了白兰地厅的形态，第 $i$ 行为两个正整数 $u_i$ 和 $v_i$，表示 $u_i$ 号房间和 $v_i$ 号房间之间有一条双向通道。保证 $1 \\le u_i, v_i \\le n$。", "outputFormat": "输出共一行，包含一个正整数，即 **弗罗多一天里最多能吃到多少个西瓜**。", "hint": "**【样例解释 #1】**\n\n下图为本样例中的白兰地厅的示意图。黑色直线表示房间之间的通道；左侧墙壁上的数字为房间编号；西瓜内部的数字为其甜度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3i7dc9g.png)\n\n弗罗多一天最多能吃到 5 个西瓜，有三种选择可以让他吃到 5 个西瓜。\n\n选择一：\n\n - 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n - 经过 6 号房间，忽略房间里的西瓜；\n - 经过 1 号房间，并吃掉房间里的西瓜（甜度为 2）；\n - 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n - 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n - 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择二：\n\n + 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n + 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n + 经过 1 号房间，忽略房间里的西瓜；\n + 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n + 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n + 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择三：\n\n * 从 9 号房间出发，并吃掉房间里的西瓜（甜度为 2）；\n * 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n * 经过 1 号房间，忽略房间里的西瓜；\n * 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n * 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n * 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n \n **【子任务】**\n \n 本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n|子任务编号|$n \\le$|特殊性质|占分|\n|:----:|:----:|:----:|:----:|\n|$1$|$100$|无|$10$|\n|$2$|$1000$|无|$10$|\n|$3$|$5000$|$a_i \\le 4$|$10$|\n|$4$|$10 ^ 5$|$a_i \\le 2$|$10$|\n|$5$|$10 ^ 5$|树中仅有一个节点度数大于 $1$|$10$|\n|$6$|$10 ^ 5$|树中所有节点度数不超过 $2$|$10$|\n|$7$|$10 ^ 5$|无|$40$|\n\n对于所有测试点，保证 $1 \\le a_i \\le 10^{9}$，$2 \\le n \\le 10^{5}$。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN"}}}
{"pid": "P10242", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 3\n2 -1 100\n100 10 -1\n", "113\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"], ["见附件中的 3.in。", "见附件中的 3.ans。"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "O2优化", "快速沃尔什变换 FWT", "THUSC", "状压 DP"], "title": "[THUSC 2021] Emiya 家明天的饭", "background": "由于本题的测试数据规模较大，本题只评测一部分测试数据，其余的测试数据可以在 [U412486](https://www.luogu.com.cn/problem/U412486) 中提交测试。", "description": "Emiya 是个擅长做菜的高中生，他会做 $m$ 道不同的菜品。某天，Yaz、Zid 和他们的 $n$ 个朋友们到他家做客，Emiya 需要做一些菜来招待他们。\n\nYaz 和 Zid 什么都吃，但他们的朋友们有些挑食。具体来说，我们用整数 $a_{i,j}\\geq -1$ 来表示第 $i$ 个朋友对第 $j$ 道菜品的态度：\n\n* 若 $a_{i,j}\\geq 0$，则第 $i$ 位朋友不讨厌这道菜品，如果饭桌上有这道菜，且没有其他让这位朋友讨厌的菜品，那么他会给 Emiya 留下 $a_{i,j}$ 元红包以表赞许和感谢。\n\n* 若 $a_{i,j} = -1$，则第 $i$ 为朋友讨厌这道菜品，如果饭桌上有这道菜，那么这位朋友会非常生气，并直接离席而去。这意味着他将不会因为任何菜品留下红包。\n\nEmiya 擅长做菜，却不擅长计算，请你帮助 Emiya 挑选若干道菜品，使得他收到的红包数额总和最大。方便起见，你只需要输出这个最大的总和即可。", "inputFormat": "第一行包含两个整数 $n,m$，意义见题目描述。\n\n第 $2$ 到第 $n+1$ 行，每行包含 $m$ 个整数：其中第 $i+1$ 行的第 $j$ 个整数为 $a_{i,j}$，意义见题目描述。\n\n保证 $n,m\\geq 1$，保证 $a_{i,j} \\geq -1$。", "outputFormat": "一行一个整数，表示红包金额的最大总和。", "hint": "**【样例解释 #1】**\n\n最优方案是制作第 $1$ 和第 $2$ 道菜。若如此做，虽然第 $2$ 位客人会生气地离席而去，但另两位客人留下的红包总金额是最大的。\n\n**【子任务】**\n\n本题设置 4 个子任务：\n\n* 第 1 个子任务（20 分）的特殊限制：$n\\leq 10, m\\leq 2000$；\n* 第 2 个子任务（20 分）的特殊限制：$n\\leq 14$；\n* 第 3 个子任务（20 分）的特殊限制：每位朋友不喜欢的菜品编号范围为一个区间，即对于每位客人 $i$，存在整数 $l,r$（$l\\leq r$），满足 $a_{i,j} = -1$ 当且仅当 $j\\in \\left[l,r\\right]$；\n* 第 4 个子任务（40 分）没有特殊限制。\n\n对于所有测试点，保证 $n\\leq 20$，$m\\leq 10^6$，$a_{i,j}\\leq 10^9$。\n\n**【提示】**\n\n一些测试点的输入规模较大，请注意程序的 IO 效率。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2021] Emiya 家明天的饭", "background": "由于本题的测试数据规模较大，本题只评测一部分测试数据，其余的测试数据可以在 [U412486](https://www.luogu.com.cn/problem/U412486) 中提交测试。", "description": "Emiya 是个擅长做菜的高中生，他会做 $m$ 道不同的菜品。某天，Yaz、Zid 和他们的 $n$ 个朋友们到他家做客，Emiya 需要做一些菜来招待他们。\n\nYaz 和 Zid 什么都吃，但他们的朋友们有些挑食。具体来说，我们用整数 $a_{i,j}\\geq -1$ 来表示第 $i$ 个朋友对第 $j$ 道菜品的态度：\n\n* 若 $a_{i,j}\\geq 0$，则第 $i$ 位朋友不讨厌这道菜品，如果饭桌上有这道菜，且没有其他让这位朋友讨厌的菜品，那么他会给 Emiya 留下 $a_{i,j}$ 元红包以表赞许和感谢。\n\n* 若 $a_{i,j} = -1$，则第 $i$ 为朋友讨厌这道菜品，如果饭桌上有这道菜，那么这位朋友会非常生气，并直接离席而去。这意味着他将不会因为任何菜品留下红包。\n\nEmiya 擅长做菜，却不擅长计算，请你帮助 Emiya 挑选若干道菜品，使得他收到的红包数额总和最大。方便起见，你只需要输出这个最大的总和即可。", "inputFormat": "第一行包含两个整数 $n,m$，意义见题目描述。\n\n第 $2$ 到第 $n+1$ 行，每行包含 $m$ 个整数：其中第 $i+1$ 行的第 $j$ 个整数为 $a_{i,j}$，意义见题目描述。\n\n保证 $n,m\\geq 1$，保证 $a_{i,j} \\geq -1$。", "outputFormat": "一行一个整数，表示红包金额的最大总和。", "hint": "**【样例解释 #1】**\n\n最优方案是制作第 $1$ 和第 $2$ 道菜。若如此做，虽然第 $2$ 位客人会生气地离席而去，但另两位客人留下的红包总金额是最大的。\n\n**【子任务】**\n\n本题设置 4 个子任务：\n\n* 第 1 个子任务（20 分）的特殊限制：$n\\leq 10, m\\leq 2000$；\n* 第 2 个子任务（20 分）的特殊限制：$n\\leq 14$；\n* 第 3 个子任务（20 分）的特殊限制：每位朋友不喜欢的菜品编号范围为一个区间，即对于每位客人 $i$，存在整数 $l,r$（$l\\leq r$），满足 $a_{i,j} = -1$ 当且仅当 $j\\in \\left[l,r\\right]$；\n* 第 4 个子任务（40 分）没有特殊限制。\n\n对于所有测试点，保证 $n\\leq 20$，$m\\leq 10^6$，$a_{i,j}\\leq 10^9$。\n\n**【提示】**\n\n一些测试点的输入规模较大，请注意程序的 IO 效率。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN"}}}
{"pid": "P10244", "type": "P", "difficulty": 1, "samples": [["8\nwestlake\nyummyqaq\nweabzzke\nazazazaq\n", "auazyqaq"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "洛谷原创", "洛谷月赛"], "title": "String Minimization", "background": "", "description": "你有四个长 $n$ 的字符串 $a,b,c,d$。你可以执行任意多次如下操作：\n\n- 选择一个 $i$，交换 $a_i,c_i$，然后交换 $b_i,d_i$。\n\n求在 $a$ 的字典序尽量小的前提下，$b$ 字典序最小是什么。\n\n---\n\n如果你不知道什么是字典序，看这里：\n\n对于两个字符串 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个字符相同且 $p_{k+1}$ 的 ASCII 码小于 $q_{k+1}$ 的 ASCII 码。\n\n例如：\n- $\\texttt{abc}<\\texttt{baa}$（当 $k=0$）\n- $\\texttt{bae}<\\texttt{bbb}$（当 $k=1$）", "inputFormat": "输入的第一行有一个正整数 $n$，表示字符串 $a,b,c,d$ 长度。\n\n之后四行，每行一个字符串，分别表示 $a,b,c,d$。", "outputFormat": "输出一行一个字符串，表示题目要求的字符串 $b$。", "hint": "【样例解释】\n\n选择 $i$ 为 $1,3,4$ 可以让 $a$ 取到最小的字典序 $\\texttt{weablake}$，此时字符串 $b$ 也得到满足题意最小的字典序 $\\texttt{auazyqaq}$。\n\n事实上如果 $i=1$ 时不操作 $a$ 的字典序也是最小的，但是此时字符串 $b$ 就是 $\\texttt{yuazyqaq}$，不够小。\n\n【数据范围】\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$15$||\n|$3$|$10^5$|$a_i>c_i$|\n|$4\\sim 5$|$10^5$|$a_i\\ne c_i$|\n|$6\\sim 7$|$10^5$|$b_i\\ge d_i$|\n|$8\\sim 10$|$10^5$||\n\n对于全体数据，保证 $1\\le n\\le 10^5$，字符串所有字符都是小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "String Minimization", "background": "", "description": "你有四个长 $n$ 的字符串 $a,b,c,d$。你可以执行任意多次如下操作：\n\n- 选择一个 $i$，交换 $a_i,c_i$，然后交换 $b_i,d_i$。\n\n求在 $a$ 的字典序尽量小的前提下，$b$ 字典序最小是什么。\n\n---\n\n如果你不知道什么是字典序，看这里：\n\n对于两个字符串 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个字符相同且 $p_{k+1}$ 的 ASCII 码小于 $q_{k+1}$ 的 ASCII 码。\n\n例如：\n- $\\texttt{abc}<\\texttt{baa}$（当 $k=0$）\n- $\\texttt{bae}<\\texttt{bbb}$（当 $k=1$）", "inputFormat": "输入的第一行有一个正整数 $n$，表示字符串 $a,b,c,d$ 长度。\n\n之后四行，每行一个字符串，分别表示 $a,b,c,d$。", "outputFormat": "输出一行一个字符串，表示题目要求的字符串 $b$。", "hint": "【样例解释】\n\n选择 $i$ 为 $1,3,4$ 可以让 $a$ 取到最小的字典序 $\\texttt{weablake}$，此时字符串 $b$ 也得到满足题意最小的字典序 $\\texttt{auazyqaq}$。\n\n事实上如果 $i=1$ 时不操作 $a$ 的字典序也是最小的，但是此时字符串 $b$ 就是 $\\texttt{yuazyqaq}$，不够小。\n\n【数据范围】\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$15$||\n|$3$|$10^5$|$a_i>c_i$|\n|$4\\sim 5$|$10^5$|$a_i\\ne c_i$|\n|$6\\sim 7$|$10^5$|$b_i\\ge d_i$|\n|$8\\sim 10$|$10^5$||\n\n对于全体数据，保证 $1\\le n\\le 10^5$，字符串所有字符都是小写字母。", "locale": "zh-CN"}}}
{"pid": "P10245", "type": "P", "difficulty": 2, "samples": [["3\n20 2 4 8\n3 5 3 5\n1 2 4 3\n", "no\nno\nyes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "Swimming Pool", "background": "**请注意，四边形 $ABCD$ 中，四个点必须*顺次*是 $A,B,C,D$**，不允许 $AB$ 是一条对角线之类的情况。", "description": "小 J 想要建一个四边形游泳池 $ABCD$。他希望有一组对边互相平行（方便搞一些家庭比赛），另外一组对边不平行（否则会显得太没有个性）。换言之，**他需要让这个游泳池是个梯形**。\n\n给出四个正整数 $p,q,r,s$，判断他能否造一个符合题意的游泳池，使得 $AB=p,BC=q,CD=r,DA=s$。\n", "inputFormat": "**本题有多组数据。** 输入的第一行有一个正整数 $T$ 表示数据组数。\n\n之后 $T$ 行，每行有用空格隔开的四个正整数 $p,q,r,s$。", "outputFormat": "对于每组数据输出 $T$ 行，其中若可以构成梯形则输出 `yes`，否则输出 `no`。", "hint": "【样例解释】\n\n第一组数据显然无法构成四边形。\n\n第二组数据只能构成平行四边形。\n\n第三组数据确实可以构成梯形。\n\n【数据范围】\n\n本题共 $6$ 个测试点，注意测试点不等分。\n\n|测试点编号|特殊性质|分值|\n|:-:|:-:|:-:|\n|$1$|可构成梯形当且仅当可构成四边形|$19$|\n|$2$|$p<r<s$ 且 $q<s$|$17$|\n|$3$|$p,q,r,s\\le 2$|$7$|\n|$4$|$p<r$ 且 $q<s$|$12$|\n|$5$|输入必能构成四边形|$18$|\n|$6$|无特殊性质|$27$|\n\n对于全体数据，保证 $1\\le T\\le 10^4$，$1\\le p,q,r,s\\le 5\\times 10^8$，输入皆为正整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Swimming Pool", "background": "**请注意，四边形 $ABCD$ 中，四个点必须*顺次*是 $A,B,C,D$**，不允许 $AB$ 是一条对角线之类的情况。", "description": "小 J 想要建一个四边形游泳池 $ABCD$。他希望有一组对边互相平行（方便搞一些家庭比赛），另外一组对边不平行（否则会显得太没有个性）。换言之，**他需要让这个游泳池是个梯形**。\n\n给出四个正整数 $p,q,r,s$，判断他能否造一个符合题意的游泳池，使得 $AB=p,BC=q,CD=r,DA=s$。\n", "inputFormat": "**本题有多组数据。** 输入的第一行有一个正整数 $T$ 表示数据组数。\n\n之后 $T$ 行，每行有用空格隔开的四个正整数 $p,q,r,s$。", "outputFormat": "对于每组数据输出 $T$ 行，其中若可以构成梯形则输出 `yes`，否则输出 `no`。", "hint": "【样例解释】\n\n第一组数据显然无法构成四边形。\n\n第二组数据只能构成平行四边形。\n\n第三组数据确实可以构成梯形。\n\n【数据范围】\n\n本题共 $6$ 个测试点，注意测试点不等分。\n\n|测试点编号|特殊性质|分值|\n|:-:|:-:|:-:|\n|$1$|可构成梯形当且仅当可构成四边形|$19$|\n|$2$|$p<r<s$ 且 $q<s$|$17$|\n|$3$|$p,q,r,s\\le 2$|$7$|\n|$4$|$p<r$ 且 $q<s$|$12$|\n|$5$|输入必能构成四边形|$18$|\n|$6$|无特殊性质|$27$|\n\n对于全体数据，保证 $1\\le T\\le 10^4$，$1\\le p,q,r,s\\le 5\\times 10^8$，输入皆为正整数。", "locale": "zh-CN"}}}
{"pid": "P10246", "type": "P", "difficulty": 3, "samples": [["2\n2 1\n11 12\n12 2\n31 29 31 30 31 30 31 31 30 31 30 31\n", "0\n7\n1 6\n1 28\n3 2\n5 12\n6 4\n10 24\n12 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "枚举", "洛谷月赛"], "title": "Exciting Days", "background": "网上流传一种说法，称 $10$ 月 $24$ 日是“程序员节”，因为 $1024$ 恰好是 $2^{10}$，而计算机和二进制有密切联系。\n\n如果某个不使用地球历法的外星文明，也不一定用传统的二进制计算机，会不会也有类似的传统呢？", "description": "某个星球的历法和地球虽然数值上和地球不同，但是其结构和地球人的历法大体相似。具体地，他们的一年有 $n$ 个月，其中第 $i$ 个月有 $a_i$ 天。\n\n定义 $m$ 月 $d$ 日的**特征值**为将 $m,d$ 的十进制写出（不含前导 $0$）后，直接拼接的结果。例如 $3$ 月 $7$ 日特征值是 $37$，$12$ 月 $20$ 日特征值是 $1220$。\n\n如果一个日期的特征值是 $k$ 的自然数次幂，则称这个日期是**广义程序员节**。你可以求出这个星球的所有广义程序员节吗？", "inputFormat": "**本题有多组测试数据。** 输入的第一行有一个正整数 $T$，表示测试数据组数。\n\n每组测试数据输入两行。第一行有两个正整数 $n,k$，含义和题目描述一致；第二行有 $n$ 个正整数 $a_1,\\ldots,a_n$ 表示每个月的天数。", "outputFormat": "对于每组测试数据，先输出一行一个自然数表示广义程序员节个数；再输出若干行，每行一对用空格隔开的正整数 $m,d$ 表示 $m$ 月 $d$ 日表示一个程序员节。\n\n在同一组测试数据中，输出的日期应按照一年当中的顺序输出。", "hint": "【样例解释】\n\n对于第一组数据，外星人的日历有两个月，第一个月有 $11$ 天，第二个月有 $12$ 天。现在要求特征值是 $1$ 的整数次幂，只能是 $1$，然而日期的特征值**至少是两位数**，因此不存在符合要求的日期。\n\n对于第二组数据，这是地球人闰年时的公历，不难发现输出的日期特征值确实都是 $2$ 的自然数次幂。\n\n【数据范围】\n\n本题共 $25$ 个测试点，每个 $4$ 分。数据范围中，$\\sum n$ 表示所有测试数据的 $n$ 之和，例如样例的 $\\sum n=14$。\n\n|测试点编号|$T\\le$|$\\sum n\\le$|$a_i\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$1$|$1000$|$1000$|$k=6$|\n|$2\\sim 3$|$1$|$1000$|$1000$||\n|$4\\sim 6$|$3$|$1000$|$1000$||\n|$7\\sim 11$|$3$|$10^4$|$10^4$||\n|$12\\sim 14$|$1$|$3\\times 10^5$|$10^9$||\n|$15\\sim 17$|$3$|$3\\times 10^5$|$10^9$||\n|$18\\sim 19$|$10^4$|$10^4$|$10^9$|$n=1$|\n|$20\\sim 21$|$10^4$|$9\\times 10^4$|$10^9$|$n\\le 9$|\n|$22\\sim 25$|$10^4$|$3\\times 10^5$|$10^9$||\n\n对于全部数据，保证 $1\\le T\\le 10^4$，$1\\le n\\le 3\\times 10^5$，$1\\le \\sum n\\le 3\\times 10^5$，$1\\le a_i,k\\le 10^9$，输入皆为整数。\n\n为避免卡常，题目保证单个测试点输出的日期不超过 $2\\times 10^4$ 个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Exciting Days", "background": "网上流传一种说法，称 $10$ 月 $24$ 日是“程序员节”，因为 $1024$ 恰好是 $2^{10}$，而计算机和二进制有密切联系。\n\n如果某个不使用地球历法的外星文明，也不一定用传统的二进制计算机，会不会也有类似的传统呢？", "description": "某个星球的历法和地球虽然数值上和地球不同，但是其结构和地球人的历法大体相似。具体地，他们的一年有 $n$ 个月，其中第 $i$ 个月有 $a_i$ 天。\n\n定义 $m$ 月 $d$ 日的**特征值**为将 $m,d$ 的十进制写出（不含前导 $0$）后，直接拼接的结果。例如 $3$ 月 $7$ 日特征值是 $37$，$12$ 月 $20$ 日特征值是 $1220$。\n\n如果一个日期的特征值是 $k$ 的自然数次幂，则称这个日期是**广义程序员节**。你可以求出这个星球的所有广义程序员节吗？", "inputFormat": "**本题有多组测试数据。** 输入的第一行有一个正整数 $T$，表示测试数据组数。\n\n每组测试数据输入两行。第一行有两个正整数 $n,k$，含义和题目描述一致；第二行有 $n$ 个正整数 $a_1,\\ldots,a_n$ 表示每个月的天数。", "outputFormat": "对于每组测试数据，先输出一行一个自然数表示广义程序员节个数；再输出若干行，每行一对用空格隔开的正整数 $m,d$ 表示 $m$ 月 $d$ 日表示一个程序员节。\n\n在同一组测试数据中，输出的日期应按照一年当中的顺序输出。", "hint": "【样例解释】\n\n对于第一组数据，外星人的日历有两个月，第一个月有 $11$ 天，第二个月有 $12$ 天。现在要求特征值是 $1$ 的整数次幂，只能是 $1$，然而日期的特征值**至少是两位数**，因此不存在符合要求的日期。\n\n对于第二组数据，这是地球人闰年时的公历，不难发现输出的日期特征值确实都是 $2$ 的自然数次幂。\n\n【数据范围】\n\n本题共 $25$ 个测试点，每个 $4$ 分。数据范围中，$\\sum n$ 表示所有测试数据的 $n$ 之和，例如样例的 $\\sum n=14$。\n\n|测试点编号|$T\\le$|$\\sum n\\le$|$a_i\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$1$|$1000$|$1000$|$k=6$|\n|$2\\sim 3$|$1$|$1000$|$1000$||\n|$4\\sim 6$|$3$|$1000$|$1000$||\n|$7\\sim 11$|$3$|$10^4$|$10^4$||\n|$12\\sim 14$|$1$|$3\\times 10^5$|$10^9$||\n|$15\\sim 17$|$3$|$3\\times 10^5$|$10^9$||\n|$18\\sim 19$|$10^4$|$10^4$|$10^9$|$n=1$|\n|$20\\sim 21$|$10^4$|$9\\times 10^4$|$10^9$|$n\\le 9$|\n|$22\\sim 25$|$10^4$|$3\\times 10^5$|$10^9$||\n\n对于全部数据，保证 $1\\le T\\le 10^4$，$1\\le n\\le 3\\times 10^5$，$1\\le \\sum n\\le 3\\times 10^5$，$1\\le a_i,k\\le 10^9$，输入皆为整数。\n\n为避免卡常，题目保证单个测试点输出的日期不超过 $2\\times 10^4$ 个。", "locale": "zh-CN"}}}
{"pid": "P10247", "type": "P", "difficulty": 4, "samples": [["6 5\n1 2\n2 3\n1 3\n2 5\n3 6\n", "5 0 4 5 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "Special Judge", "洛谷月赛"], "title": "Pairing Pairs", "background": "本题为赛时原始数据。如果想要测试 $O(n)$，可以参考[加强版](https://www.luogu.com.cn/problem/P10248)。", "description": "你有 $m$ 个数对 $(u_i,v_i)$（保证 $1\\le u_i<v_i\\le n$ 且 $m$ 个数对两两不同），对于每个 $i$ 找一个 $j$ 使得 $u_i,v_i,u_j,v_j$ 四个数两两不同，或报告不存在。", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示数对中数字的范围和数对的个数。\n\n之后 $m$ 行，其中的第 $i$ 行有两个正整数 $u_i,v_i$ 表示第 $i$ 个数对。", "outputFormat": "输出一行 $m$ 个自然数，其中第 $i$ 个数表示你对这个 $i$ 找到的 $j$。若对应的 $j$ 不存在则输出 $0$。\n\n若符合题意的 $j$ 有多个，任意输出一个都可以通过本题。", "hint": "【样例解释】\n\n答案不唯一，例如 $i=4$ 时：\n- $j$ 也可以是 $3$，因为 $2,5,1,3$ 四个数互不相同。所以输出 `5 0 4 3 1` 也可通过测试点。\n- 然而 $j$ 不可以是 $1$，因为 $2,5,1,2$ 中存在相同数字。\n\n【数据范围】\n\n**本题采用捆绑测试。** 具体地，你只有通过一个子任务内所有测试点，才能拿到该子任务的分数。\n\n|子任务编号|$n\\le$|$m\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$10^3$|$3\\times 10^3$||$19$|\n|$2$|$=10^3$|$=3\\times 10^5$||$16$|\n|$3$|$3\\times 10^5$|$=n-1$|$u_i=i,v_i=i+1$|$3$|\n|$4$|$3\\times 10^5$|$=n-1$|$v_i=i+1$|$22$|\n|$5$|$3\\times 10^5$|$3\\times 10^5$|数据随机|$11$|\n|$6$|$3\\times 10^5$|$3\\times 10^5$||$29$|\n\n子任务 $5$ 的具体生成过程：首先我**指定**一组 $n,m$，接下来执行 $m$ 次如下流程：\n- 在 $1\\sim n$ 内抽取 $x$，然后在 $1\\sim n-1$ 内抽取 $y$。\n- 若 $y\\ge x$ 则把 $y$ 增加 $1$，否则交换 $x,y$。\n- 判断数对 $(x,y)$ 是否出现过，若是，回到第一步。\n- 输出 $(x,y)$。\n\n对于全部数据，保证 $1\\le u_i<v_i\\le n\\le 3\\times 10^5$，$1\\le m\\le 3\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Pairing Pairs", "background": "本题为赛时原始数据。如果想要测试 $O(n)$，可以参考[加强版](https://www.luogu.com.cn/problem/P10248)。", "description": "你有 $m$ 个数对 $(u_i,v_i)$（保证 $1\\le u_i<v_i\\le n$ 且 $m$ 个数对两两不同），对于每个 $i$ 找一个 $j$ 使得 $u_i,v_i,u_j,v_j$ 四个数两两不同，或报告不存在。", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示数对中数字的范围和数对的个数。\n\n之后 $m$ 行，其中的第 $i$ 行有两个正整数 $u_i,v_i$ 表示第 $i$ 个数对。", "outputFormat": "输出一行 $m$ 个自然数，其中第 $i$ 个数表示你对这个 $i$ 找到的 $j$。若对应的 $j$ 不存在则输出 $0$。\n\n若符合题意的 $j$ 有多个，任意输出一个都可以通过本题。", "hint": "【样例解释】\n\n答案不唯一，例如 $i=4$ 时：\n- $j$ 也可以是 $3$，因为 $2,5,1,3$ 四个数互不相同。所以输出 `5 0 4 3 1` 也可通过测试点。\n- 然而 $j$ 不可以是 $1$，因为 $2,5,1,2$ 中存在相同数字。\n\n【数据范围】\n\n**本题采用捆绑测试。** 具体地，你只有通过一个子任务内所有测试点，才能拿到该子任务的分数。\n\n|子任务编号|$n\\le$|$m\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$10^3$|$3\\times 10^3$||$19$|\n|$2$|$=10^3$|$=3\\times 10^5$||$16$|\n|$3$|$3\\times 10^5$|$=n-1$|$u_i=i,v_i=i+1$|$3$|\n|$4$|$3\\times 10^5$|$=n-1$|$v_i=i+1$|$22$|\n|$5$|$3\\times 10^5$|$3\\times 10^5$|数据随机|$11$|\n|$6$|$3\\times 10^5$|$3\\times 10^5$||$29$|\n\n子任务 $5$ 的具体生成过程：首先我**指定**一组 $n,m$，接下来执行 $m$ 次如下流程：\n- 在 $1\\sim n$ 内抽取 $x$，然后在 $1\\sim n-1$ 内抽取 $y$。\n- 若 $y\\ge x$ 则把 $y$ 增加 $1$，否则交换 $x,y$。\n- 判断数对 $(x,y)$ 是否出现过，若是，回到第一步。\n- 输出 $(x,y)$。\n\n对于全部数据，保证 $1\\le u_i<v_i\\le n\\le 3\\times 10^5$，$1\\le m\\le 3\\times 10^5$。", "locale": "zh-CN"}}}
