{"pid": "P9880", "type": "P", "difficulty": 2, "samples": [["2\n8\n3 -1 4 1 -5 9 2 -6\n1\n0\n", "19\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Future Coder", "background": "", "description": "Prof. Pang builds his famous coding team recently. To pursue a gold medal in ICPC, hundreds of pupils join his team. Unfortunately, one of Prof. Pang's students believes that for any integers $a$ and $b$, $a\\times b\\ge a+b$. To disprove this proposition, Prof. Pang writes $n$ numbers $a_1,a_2,\\ldots, a_n$ on a paper and wants you to count how many pairs of numbers $(a_i, a_j)$ ($1\\le i < j\\le n$) satisfies $a_i\\times a_j<a_i+a_j$.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^6$) denoting the number of test cases.\n\nFor each test case, the first line contains a single integer $n$ ($1\\le n\\le 10^6$). The second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9$).\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, print one line containing the answer.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Future Coder", "background": "", "description": "Prof. Pang builds his famous coding team recently. To pursue a gold medal in ICPC, hundreds of pupils join his team. Unfortunately, one of Prof. Pang's students believes that for any integers $a$ and $b$, $a\\times b\\ge a+b$. To disprove this proposition, Prof. Pang writes $n$ numbers $a_1,a_2,\\ldots, a_n$ on a paper and wants you to count how many pairs of numbers $(a_i, a_j)$ ($1\\le i < j\\le n$) satisfies $a_i\\times a_j<a_i+a_j$.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^6$) denoting the number of test cases.\n\nFor each test case, the first line contains a single integer $n$ ($1\\le n\\le 10^6$). The second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9$).\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, print one line containing the answer.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Future Coder", "background": null, "description": "共 $T(1 \\leq T \\leq 10^6)$ 组数据，每组给出一个数 $n(1 \\leq n \\leq 10^6)$ 和 $n$ 个数 $a_1,a_2,...,a_n(-10^9 \\leq a_i \\leq 10^9)$，求有多少个二元组 $(a_i,a_j)$ 满足 $a_ia_j<a_i+a_j$。", "inputFormat": "第一行为一个数 $T$。\n\n接下来 $T$ 组数据，每组数据第一行为一个数 $n$，第二行为 $n$ 个数 $a_1,a_2,...,a_n$。", "outputFormat": "$T$ 行，为满足 $a_ia_j<a_i+a_j$ 的二元组 $(a_i,a_j)$ 的组数。\n\nTranslated from [FurippuWRY](https://www.luogu.com.cn/user/993779)。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P9881", "type": "P", "difficulty": 5, "samples": [["2\n5 4 5 8\n1 2\n1 3\n1 4\n4 5\n15 1 1 1 1\n5 4 10 5\n1 2\n1 3\n1 4\n4 5\n10 4 4 4 19\n", "2\n4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Elden Ring", "background": "", "description": "Prof. Pang is getting addicted to the game called Elden Ring, in which the world is a connected graph including $n$ vertices indexed from $1$ to $n$ and $m$ undirected edges. Players start at vertex $1$ and travel across the world to slay the god on vertex $n$.\n\nHowever, it's not that easy. For any vertex $i$ except vertex $1$, there is exactly one boss whose level is $l_i$, and the player starts the game with level $l_1$. For each day, the player can travel to any vertex $i$ from vertex $1$ and challenge the boss there. If the current level of the player is greater than the boss, the boss will be eliminated from the world (inactivated) and the level of the player will be increased by $A$. Notice that traveling through a vertex that has an active boss is forbidden. (In other words, Prof. Pang can travel from vertex $1$ to vertex $i$ if there is a path in the graph from vertex $1$ to vertex $i$ such that each vertex on this path, except for vertex $i$, has no active boss.) Meanwhile, at the beginning of each day, all the remaining bosses in the world will also be promoted by $B$ levels.\n\nTo finish a playthrough of the game, you need to slay the boss on vertex $n$ (Elden Beast). Given the information of the world, Prof. Pang is wondering how many days he needs at least to do so. \n\nThe Player can only challenge one boss each day.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases. \n\nFor each test case, the first line includes four integers $n, m, A, B~(2\\leq n\\leq 2\\times 10^5, 1 \\le m, A, B\\le 2\\times 10^5)$. In next $m$ lines, each line contains two integers $a_i, b_i~(1 \\le a_i, b_i \\le n)$, denoting the endpoints of the $i$-th undirected edge. The last line contains $n$ integers $l_i~(1 \\le l_i \\le 2 \\times 10^5)$, representing the initial levels of the player and bosses mentioned above.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$ and the sum of $m$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, output a single line containing an integer, indicating the minimum number of days Prof. Pang needs to finish the game. If it is impossible to do so, please output $-1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Elden Ring", "background": "", "description": "Prof. Pang is getting addicted to the game called Elden Ring, in which the world is a connected graph including $n$ vertices indexed from $1$ to $n$ and $m$ undirected edges. Players start at vertex $1$ and travel across the world to slay the god on vertex $n$.\n\nHowever, it's not that easy. For any vertex $i$ except vertex $1$, there is exactly one boss whose level is $l_i$, and the player starts the game with level $l_1$. For each day, the player can travel to any vertex $i$ from vertex $1$ and challenge the boss there. If the current level of the player is greater than the boss, the boss will be eliminated from the world (inactivated) and the level of the player will be increased by $A$. Notice that traveling through a vertex that has an active boss is forbidden. (In other words, Prof. Pang can travel from vertex $1$ to vertex $i$ if there is a path in the graph from vertex $1$ to vertex $i$ such that each vertex on this path, except for vertex $i$, has no active boss.) Meanwhile, at the beginning of each day, all the remaining bosses in the world will also be promoted by $B$ levels.\n\nTo finish a playthrough of the game, you need to slay the boss on vertex $n$ (Elden Beast). Given the information of the world, Prof. Pang is wondering how many days he needs at least to do so. \n\nThe Player can only challenge one boss each day.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases. \n\nFor each test case, the first line includes four integers $n, m, A, B~(2\\leq n\\leq 2\\times 10^5, 1 \\le m, A, B\\le 2\\times 10^5)$. In next $m$ lines, each line contains two integers $a_i, b_i~(1 \\le a_i, b_i \\le n)$, denoting the endpoints of the $i$-th undirected edge. The last line contains $n$ integers $l_i~(1 \\le l_i \\le 2 \\times 10^5)$, representing the initial levels of the player and bosses mentioned above.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$ and the sum of $m$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, output a single line containing an integer, indicating the minimum number of days Prof. Pang needs to finish the game. If it is impossible to do so, please output $-1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Elden Ring", "background": "", "description": "教授 Pang 正沉迷于一款名为《Elden Ring》的游戏，其中的世界是一个包含 $n$ 个顶点（从 $1$ 到 $n$ 编号）和 $m$ 条无向边的连通图。玩家从顶点 $1$ 开始，穿越世界去击败位于顶点 $n$ 的神。\n\n然而，这并不简单。对于除顶点 $1$ 以外的任何顶点 $i$，都有一个等级为 $l_i$ 的 Boss，玩家以等级 $l_1$ 开始游戏。每天，玩家可以从顶点 $1$ 前往任意顶点 $i$ 并挑战那里的 Boss。如果玩家当前的等级高于 Boss，Boss 将被消灭（失效），玩家的等级将增加 $A$。注意，经过一个有活跃 Boss 的顶点是被禁止的。（换句话说，教授 Pang 可以从顶点 $1$ 前往顶点 $i$，如果在图中存在一条从顶点 $1$ 到顶点 $i$ 的路径，使得该路径上的每个顶点（除了顶点 $i$）都没有活跃的 Boss。）同时，每天开始时，世界上所有剩余的 Boss 的等级都会增加 $B$。\n\n要完成游戏的通关，你需要击败位于顶点 $n$ 的 Boss（Elden Beast）。给定世界的信息，教授 Pang 想知道他至少需要多少天才能做到这一点。\n\n玩家每天只能挑战一个 Boss。", "inputFormat": "第一行包含一个整数 $T~(1 \\le T \\le 10^5)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含四个整数 $n, m, A, B~(2\\leq n\\leq 2\\times 10^5, 1 \\le m, A, B\\le 2\\times 10^5)$。接下来的 $m$ 行中，每行包含两个整数 $a_i, b_i~(1 \\le a_i, b_i \\le n)$，表示第 $i$ 条无向边的两个端点。最后一行包含 $n$ 个整数 $l_i~(1 \\le l_i \\le 2 \\times 10^5)$，表示玩家和上述 Boss 的初始等级。\n\n保证所有测试用例的 $n$ 之和不超过 $10^6$，$m$ 之和不超过 $10^6$。", "outputFormat": "对于每个测试用例，输出一行包含一个整数，表示教授 Pang 完成游戏所需的最少天数。如果无法完成，请输出 $-1$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9882", "type": "P", "difficulty": 7, "samples": [["3\n5\n1 1 2 2 2\n4\n1 5\n1 1\n3 5\n2 3\n5\n1 2 3 4 6\n3\n1 5\n2 4\n3 5\n3\n0 3 5\n1\n1 3\n", "1 4 3\n0 1 1\n0 2 1\n1 1 1\n5 4 4\n1 2 1\n3 6 2\n5 1 2\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Vision Test", "background": "", "description": "Prof. Pang has an extraordinary vision. He can see the pixels on a 4K monitor. To test Prof. Pang's vision, Prof. Shou will show Prof. Pang several pixels and let Prof. Pang guess a straight line that contains these pixels. Given $k$ pixels with coordinates $(i, y_i)$ ($0\\le i<k$), Prof. Pang must find nonnegative integers $a, b$ and $c$ (which represent the line $y=\\frac{ax+b}{c}$) such that $y_i=\\lfloor \\frac{ai+b}{c} \\rfloor$ for all $0\\le i<k$. \n\nProf. Shou will ask Prof. Pang multiple questions. They are given as follows: Prof. Shou has a fixed array $x_1,\\ldots, x_n$. For each question, Prof. Shou chooses a range in the array, $x_l,\\ldots, x_r$. Then he defines $y_i=x_{l+i}$ for $0\\le i\\le r - l$ and asks Prof. Pang to answer the question for the $r-l+1$ pixels $(0, y_0), \\ldots, (r-l, y_{r-l})$.\n\nPlease help Prof. Pang answer all the questions. For each question, output the answer with the **minimum** $(c, a, b)$ **in lexical order**.\n\nIt is guaranteed that the answer exists when Prof. Pang chooses the whole array $x_1, x_2, \\dots, x_n$. So the answer always exists when Prof. Pang chooses an interval of this array.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n$ ($1\\leq n\\leq 10^5$). The second line contains $n$ numbers $x_1, \\ldots , x_{n}$ ($0\\leq x_i\\leq 10^9$).\n\nThe next line contains an integer $q$ ($1\\le q\\le 10^5$) denoting the number of questions.\n\nEach of the following $q$ lines contains two integers $l, r$ ($1\\le l\\le r\\le n$). \n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^5$ and that the sum of $q$ over all test cases will not exceed $10^5$.", "outputFormat": "In the order of input, output one line with three integers $a, b, c$ denoting the answer for each question.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Vision Test", "background": "", "description": "Prof. Pang has an extraordinary vision. He can see the pixels on a 4K monitor. To test Prof. Pang's vision, Prof. Shou will show Prof. Pang several pixels and let Prof. Pang guess a straight line that contains these pixels. Given $k$ pixels with coordinates $(i, y_i)$ ($0\\le i<k$), Prof. Pang must find nonnegative integers $a, b$ and $c$ (which represent the line $y=\\frac{ax+b}{c}$) such that $y_i=\\lfloor \\frac{ai+b}{c} \\rfloor$ for all $0\\le i<k$. \n\nProf. Shou will ask Prof. Pang multiple questions. They are given as follows: Prof. Shou has a fixed array $x_1,\\ldots, x_n$. For each question, Prof. Shou chooses a range in the array, $x_l,\\ldots, x_r$. Then he defines $y_i=x_{l+i}$ for $0\\le i\\le r - l$ and asks Prof. Pang to answer the question for the $r-l+1$ pixels $(0, y_0), \\ldots, (r-l, y_{r-l})$.\n\nPlease help Prof. Pang answer all the questions. For each question, output the answer with the **minimum** $(c, a, b)$ **in lexical order**.\n\nIt is guaranteed that the answer exists when Prof. Pang chooses the whole array $x_1, x_2, \\dots, x_n$. So the answer always exists when Prof. Pang chooses an interval of this array.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n$ ($1\\leq n\\leq 10^5$). The second line contains $n$ numbers $x_1, \\ldots , x_{n}$ ($0\\leq x_i\\leq 10^9$).\n\nThe next line contains an integer $q$ ($1\\le q\\le 10^5$) denoting the number of questions.\n\nEach of the following $q$ lines contains two integers $l, r$ ($1\\le l\\le r\\le n$). \n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^5$ and that the sum of $q$ over all test cases will not exceed $10^5$.", "outputFormat": "In the order of input, output one line with three integers $a, b, c$ denoting the answer for each question.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Vision Test", "background": "", "description": "庞教授有着非凡的视力。他能看到 4K 显示器上的像素。为了测试庞教授的视力，寿教授将展示给庞教授几个像素，并让庞教授猜测一条包含这些像素的直线。给定 $k$ 个像素，其坐标为 $(i, y_i)$（$0 \\le i < k$），庞教授必须找到非负整数 $a, b$ 和 $c$（它们表示直线 $y = \\frac{ax+b}{c}$），使得 $y_i = \\lfloor \\frac{ai+b}{c} \\rfloor$ 对于所有 $0 \\le i < k$ 成立。\n\n寿教授将向庞教授提出多个问题。问题如下：寿教授有一个固定的数组 $x_1, \\ldots, x_n$。对于每个问题，寿教授选择数组中的一个范围 $x_l, \\ldots, x_r$。然后他定义 $y_i = x_{l+i}$ 对于 $0 \\le i \\le r - l$，并要求庞教授回答关于这些 $r-l+1$ 个像素 $(0, y_0), \\ldots, (r-l, y_{r-l})$ 的问题。\n\n请帮助庞教授回答所有问题。对于每个问题，输出 **按字典序最小** 的 $(c, a, b)$ **作为答案**。\n\n保证当庞教授选择整个数组 $x_1, x_2, \\dots, x_n$ 时，答案存在。因此，当庞教授选择该数组的一个区间时，答案总是存在的。", "inputFormat": "第一行包含一个整数 $T$（$1 \\le T \\le 10^5$），表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n$（$1 \\leq n \\leq 10^5$）。第二行包含 $n$ 个数字 $x_1, \\ldots, x_{n}$（$0 \\leq x_i \\leq 10^9$）。\n\n下一行包含一个整数 $q$（$1 \\le q \\le 10^5$），表示问题的数量。\n\n接下来的 $q$ 行中的每一行包含两个整数 $l, r$（$1 \\le l \\le r \\le n$）。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^5$，且所有测试用例中 $q$ 的总和不超过 $10^5$。", "outputFormat": "按输入顺序输出每个问题的答案，每行包含三个整数 $a, b, c$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9883", "type": "P", "difficulty": 4, "samples": [["3\n5\n10110\n5\n00000\n5\n11111\n", "3\n0\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Fenwick Tree", "background": "", "description": "Prof. Pang is giving a lecture on the Fenwick tree (also called binary indexed tree). \n\nIn a Fenwick tree, we have an array $c[1\\ldots n]$ of length $n$ which is initially all-zero ($c[i]=0$ for any $1\\le i\\le n$). Each time, Prof. Pang can call the following procedure for some position $pos$ ($1\\leq pos \\leq n$) and value $val$:\n\n```cpp\ndef update(pos, val):\n    while (pos <= n):\n        c[pos] += val\n        pos += pos & (-pos)\n```\n\nNote that `pos & (-pos)` equals to the maximum power of $2$ that divides `pos` for any positive integer `pos`. \n\nIn the procedure, $val$ can be **any real** number. After calling it some (zero or more) times, Prof. Pang forgets the exact values in the array $c$. He only remembers whether $c[i]$ is zero or not for each $i$ from $1$ to $n$. Prof. Pang wants to know what is the minimum possible number of times he called the procedure assuming his memory is accurate.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10 ^ 5)$. The next line contains a string of length $n$. The $i$-th character of the string is `1` if $c[i]$ is nonzero and `0` otherwise. \n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output the minimum possible number of times Prof. Pang called the procedure. It can be proven that the answer always exists.", "hint": "For the first example, Prof. Pang can call `update(1,1)`, `update(2,-1)`, `update(3,1)` in order.\n\nFor the third example, Prof. Pang can call `update(1,1)`, `update(3,1)`, `update(5,1)` in order.", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Fenwick Tree", "background": "", "description": "Prof. Pang is giving a lecture on the Fenwick tree (also called binary indexed tree). \n\nIn a Fenwick tree, we have an array $c[1\\ldots n]$ of length $n$ which is initially all-zero ($c[i]=0$ for any $1\\le i\\le n$). Each time, Prof. Pang can call the following procedure for some position $pos$ ($1\\leq pos \\leq n$) and value $val$:\n\n```cpp\ndef update(pos, val):\n    while (pos <= n):\n        c[pos] += val\n        pos += pos & (-pos)\n```\n\nNote that `pos & (-pos)` equals to the maximum power of $2$ that divides `pos` for any positive integer `pos`. \n\nIn the procedure, $val$ can be **any real** number. After calling it some (zero or more) times, Prof. Pang forgets the exact values in the array $c$. He only remembers whether $c[i]$ is zero or not for each $i$ from $1$ to $n$. Prof. Pang wants to know what is the minimum possible number of times he called the procedure assuming his memory is accurate.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10 ^ 5)$. The next line contains a string of length $n$. The $i$-th character of the string is `1` if $c[i]$ is nonzero and `0` otherwise. \n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output the minimum possible number of times Prof. Pang called the procedure. It can be proven that the answer always exists.", "hint": "For the first example, Prof. Pang can call `update(1,1)`, `update(2,-1)`, `update(3,1)` in order.\n\nFor the third example, Prof. Pang can call `update(1,1)`, `update(3,1)`, `update(5,1)` in order.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Fenwick Tree", "background": "", "description": "庞教授正在讲授关于 Fenwick 树（也称为二叉索引树）的课程。\n\n在 Fenwick 树中，我们有一个长度为 $n$ 的数组 $c[1\\ldots n]$，初始时全为零（对于任何 $1\\le i\\le n$，$c[i]=0$）。每次，庞教授可以对某个位置 $pos$（$1\\leq pos \\leq n$）和一个值 $val$ 调用以下过程：\n\n```cpp\ndef update(pos, val):\n    while (pos <= n):\n        c[pos] += val\n        pos += pos & (-pos)\n```\n\n注意，对于任何正整数 `pos`，`pos & (-pos)` 等于 `pos` 的最大 2 的幂。\n\n在这个过程中，$val$ 可以是**任意实数**。在调用了若干次（零次或多次）后，庞教授忘记了数组 $c$ 中的确切值。他只记得对于每个从 $1$ 到 $n$ 的 $i$，$c[i]$ 是否为零。庞教授想知道，在假设他的记忆是准确的情况下，他调用该过程的最小可能次数。", "inputFormat": "第一行包含一个整数 $T~(1 \\le T \\le 10^5)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n~(1 \\le n \\le 10 ^ 5)$。下一行包含一个长度为 $n$ 的字符串。如果 $c[i]$ 非零，则字符串的第 $i$ 个字符为 `1`，否则为 `0`。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例，输出庞教授调用该过程的最小可能次数。可以证明答案总是存在的。", "hint": "对于第一个例子，庞教授可以依次调用 `update(1,1)`，`update(2,-1)`，`update(3,1)`。\n\n对于第三个例子，庞教授可以依次调用 `update(1,1)`，`update(3,1)`，`update(5,1)`。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9884", "type": "P", "difficulty": 7, "samples": [["3\n2 4\n1 2\n3 10\n1 2 3\n5 1\n1 2 3 4 5\n", "6\n9\n4\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Prof. Pang and Ants", "background": "", "description": "Near Prof. Pang's big house, there is an ant group which has $m$ ants and lives underground in a cave with $n$ holes. They get out of the holes for food. So where is the food? It should be in Prof. Pang's big refrigerator. The ants want to steal the food from the big refrigerator.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afep0zz9.png)\n\nSpecifically, for an ant, it needs $1$ second to leave from the cave through any hole and $1$ second to enter the cave through any hole. Different holes have different locations. The distance between the $i$-th hole and the refrigerator is $a_i$. Thus, after leaving the cave through the $i$-th hole, an ant needs $a_i$ seconds to go to the refrigerator. After stealing some food from the refrigerator, an ant needs $a_i$ seconds to go back to the $i$-th hole. Stealing food costs no time for the ants since they are skillful enough.\n\nEach ant will leave the cave to steal something from the refrigerator and return to (enter) the cave after stealing. Each ant must leave the cave exactly once and then return to the cave. One ant can arbitrarily choose one hole to leave and also arbitrarily choose one hole to enter, where the two holes need not be the same. For any hole, during any second, there can be at most one ant leaving or entering the cave through it. There cannot be one ant leaving the cave and another ant entering the cave using the same hole during the same second. Because of this capacity constraint, some ants may need to wait before they leave the hole and/or before they return to the hole after stealing.\n\nSo you, Prof. Pang's good friend, need to calculate the minimum time cost for ants to achieve the goal and play a trick on Prof. Pang so that the ants can steal the food without being caught by Prof. Pang. The time cost is defined as the total length of time during which at least one ant is not in the cave. When an ant is entering or leaving the cave through some hole, it is not in the cave.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n,m$ ($1\\le n \\le 10^5, 1\\le m \\le 10^{14}$) denoting the number of the holes and the number of the ants respectively. The second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($1\\le a_i \\le 10^9$) denoting the time needed to get to the refrigerator from the $i$-th hole.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $5\\times 10^5$.", "outputFormat": "For each test case, print one line containing one integer denoting the minimum time cost in seconds.", "hint": "In the third test case, it takes the ant $2$ seconds to leave and enter the cave through the first hole. And it takes the ant $2$ seconds to move to the refrigerator and back to the hole.", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Prof. Pang and Ants", "background": "", "description": "Near Prof. Pang's big house, there is an ant group which has $m$ ants and lives underground in a cave with $n$ holes. They get out of the holes for food. So where is the food? It should be in Prof. Pang's big refrigerator. The ants want to steal the food from the big refrigerator.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afep0zz9.png)\n\nSpecifically, for an ant, it needs $1$ second to leave from the cave through any hole and $1$ second to enter the cave through any hole. Different holes have different locations. The distance between the $i$-th hole and the refrigerator is $a_i$. Thus, after leaving the cave through the $i$-th hole, an ant needs $a_i$ seconds to go to the refrigerator. After stealing some food from the refrigerator, an ant needs $a_i$ seconds to go back to the $i$-th hole. Stealing food costs no time for the ants since they are skillful enough.\n\nEach ant will leave the cave to steal something from the refrigerator and return to (enter) the cave after stealing. Each ant must leave the cave exactly once and then return to the cave. One ant can arbitrarily choose one hole to leave and also arbitrarily choose one hole to enter, where the two holes need not be the same. For any hole, during any second, there can be at most one ant leaving or entering the cave through it. There cannot be one ant leaving the cave and another ant entering the cave using the same hole during the same second. Because of this capacity constraint, some ants may need to wait before they leave the hole and/or before they return to the hole after stealing.\n\nSo you, Prof. Pang's good friend, need to calculate the minimum time cost for ants to achieve the goal and play a trick on Prof. Pang so that the ants can steal the food without being caught by Prof. Pang. The time cost is defined as the total length of time during which at least one ant is not in the cave. When an ant is entering or leaving the cave through some hole, it is not in the cave.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n,m$ ($1\\le n \\le 10^5, 1\\le m \\le 10^{14}$) denoting the number of the holes and the number of the ants respectively. The second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($1\\le a_i \\le 10^9$) denoting the time needed to get to the refrigerator from the $i$-th hole.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $5\\times 10^5$.", "outputFormat": "For each test case, print one line containing one integer denoting the minimum time cost in seconds.", "hint": "In the third test case, it takes the ant $2$ seconds to leave and enter the cave through the first hole. And it takes the ant $2$ seconds to move to the refrigerator and back to the hole.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Prof. Pang and Ants", "background": "", "description": "在庞教授的大房子边上，有一群包含 $m$ 只蚂蚁的蚁群，居住在有 $n$ 个洞口的洞穴里。 它们会外出寻找食物。食物在庞教授的大冰箱里，蚂蚁们试图从里面偷出食物来。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afep0zz9.png)\n\n特别的, 一只蚂蚁需要 $1$ 秒从任何洞口离开，并同样需要 $1$ 秒从任何洞口进入洞穴。不同的洞口有不同的位置，对一个洞口来说，它与冰箱的距离以 $a_i$ 表示，同样的，一只蚂蚁从冰箱偷出食物再到第 $i$ 个洞口的时间也是 $a_i$ 秒。由于蚂蚁们技术高超，从冰箱拿出食物不会消耗它们任何时间。\n\n每只蚂蚁都必须且只能从冰箱偷一次食物。蚂蚁可以任意选择一个洞口出发并进入任何一个洞口，**两个洞口可以不同**。一个洞口在 $1$ 秒内只能有一只蚂蚁进出。因为这个原因，有些蚂蚁在偷完食物后需要等待一段时间才能进入洞口。\n\n所以，你作为庞教授的好朋友， 需要计算出蚂蚁们偷出食物的最短时间。时间的定义为至少存在一只蚂蚁在洞穴外的时间总长，正在进出洞口的蚂蚁不被看作在洞穴里。", "inputFormat": "第一行包括一个整数 $T~(1 \\le T \\le 10^5)$ ，表示测试数据的总数。\n\n对每组测试数据：\n\n第一行包括两个整数 $n,m$  ($1\\le n \\le 10^5, 1\\le m \\le 10^{14}$) ，分别代表洞口的总数与蚂蚁的总数。 \n\n第二行包括 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ ($1\\le a_i \\le 10^9$)， 表示第$i$号洞口到冰箱的距离。\n\n数据保证所有数据中 $n$ 的总和不超过 $5\\times 10^5$.", "outputFormat": "对每组数据，输出一行一个整数代表蚂蚁所用最短时间的秒数。\n\n## 样例 #1\n\n### 样例输入 #1\n\n```\n3\n2 4\n1 2\n3 10\n1 2 3\n5 1\n1 2 3 4 5\n```\n\n### 样例输出 #1\n\n```\n6\n9\n4\n```", "hint": "在第三组测试数据中，蚂蚁需要 $2$ 秒通过第一个洞口进出洞穴，并需要 $2$ 秒前往冰箱并搬回食物。", "locale": "zh-CN"}}}
{"pid": "P9885", "type": "P", "difficulty": 7, "samples": [["4\n10\n100\n1000\n987654321123456789", "30\n2522\n244274\n235139898689017607381017686096176798"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Sequence and Sequence", "background": "", "description": "Consider the following two sequences $P$ and $Q$. We denote $P(i)$ as the $i$-th element in sequence $P$, and $Q(i)$ as the $i$-th element in sequence $Q$:\n\n- Sequence $P$ is a $\\textbf{sorted}$ sequence where for all $k \\in \\mathbb{Z^+}$, $k$ appears in sequence $P$ for $(k+1)$ times ($\\mathbb{Z^+}$ is the set of all positive integers). That is to say, $P = \\{1, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, \\dots \\}$\n- Sequence $Q$ can be derived from the following equations: \n$$\\begin{cases} Q(1) = 1 & \\\\ Q(i) = Q(i-1) + Q(P(i)) & \\text{if } i > 1 \\end{cases}$$ \nThat is to say, $Q = \\{1, 2, 4, 6, 8, 12, 16, 20, 24, 30, 36, 42, 48, 54, 62, \\dots \\}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ukq7qs74.png)\n\nGiven a positive integer $n$, please calculate the value of $Q(n)$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains an integer $n$ ($1 \\le n \\le 10^{40}$).", "outputFormat": "For each test case output one line containing one integer, indicating the value of $Q(n)$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Sequence and Sequence", "background": "", "description": "Consider the following two sequences $P$ and $Q$. We denote $P(i)$ as the $i$-th element in sequence $P$, and $Q(i)$ as the $i$-th element in sequence $Q$:\n\n- Sequence $P$ is a $\\textbf{sorted}$ sequence where for all $k \\in \\mathbb{Z^+}$, $k$ appears in sequence $P$ for $(k+1)$ times ($\\mathbb{Z^+}$ is the set of all positive integers). That is to say, $P = \\{1, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, \\dots \\}$\n- Sequence $Q$ can be derived from the following equations: \n$$\\begin{cases} Q(1) = 1 & \\\\ Q(i) = Q(i-1) + Q(P(i)) & \\text{if } i > 1 \\end{cases}$$ \nThat is to say, $Q = \\{1, 2, 4, 6, 8, 12, 16, 20, 24, 30, 36, 42, 48, 54, 62, \\dots \\}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ukq7qs74.png)\n\nGiven a positive integer $n$, please calculate the value of $Q(n)$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains an integer $n$ ($1 \\le n \\le 10^{40}$).", "outputFormat": "For each test case output one line containing one integer, indicating the value of $Q(n)$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Sequence and Sequence", "background": "", "description": "考虑下列两个序列 $P$ 和 $Q$。我们用 $P(i)$ 表示序列 $P$ 中的第  $i$ 个元素，用 $Q(i)$ 表示序列 $Q$ 中的第 $i$ 个元素：\n\n- 序列 $P$ 是一个**已排序的**序列，其中，对于所有 $k \\in \\mathbb{Z^+}$，$k$ 在序列 $P$ 中出现 $(k+1)$ 次（$\\mathbb{Z^+}$ 为正整数集）。也就是说，$P = \\{1, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, \\dots \\}$\n- 序列 $Q$ 可以由以下方程导出：\n$$\\begin{cases} Q(1) = 1 & \\\\ Q(i) = Q(i-1) + Q(P(i)) & \\text{if } i > 1 \\end{cases}$$   \n也就是说，$Q = \\{1, 2, 4, 6, 8, 12, 16, 20, 24, 30, 36, 42, 48, 54, 62, \\dots \\}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ukq7qs74.png)\n\n给定一个正整数 $n$，请计算 $Q(n)$ 的值。", "inputFormat": "本题的测试点包含多组测试数据。\n\n第一行输入包含一个整数 $T$ （$10^4$ 左右），表示测试数据的数量。对于每组测试数据：\n\n- 第一行（也是唯一一行）包含一个整数 $n$ （$1 \\le n \\le 10^{40}$）。", "outputFormat": "对于每组测试数据，输出一行，包含一个整数，表示 $Q(n)$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9886", "type": "P", "difficulty": 6, "samples": [["3\n7 5\n1 2 1 2 1 2 1\n1 2\n1 3\n2 4\n5 6\n5 7\n3 3\n1 2 3\n1 2\n1 3\n2 3\n2 3\n12345 54321\n1 2\n1 2\n1 1", "6 5 5 5 4\n1 1 1\n1 1 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "树上启发式合并", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Kawa Exam", "background": "", "description": "BaoBao is taking an online exam of the Kawa programming language, which consists of $n$ multiple choice questions. The exam is not easy, as for each question, BaoBao needs to select the one and only one correct answer from $10^5$ available choices! But don't worry, as an active committer of the famous \\textit{open-kdk}, BaoBao obviously knows all the correct answers.\n\nAlthough BaoBao is an expert in Kawa, the developers of the exam system are definitely not experts in software engineering. There are $m$ bugs in the exam system, and the $i$-th bug can be described as $(u_i, v_i)$, which means that BaoBao must select the same choice for question $u_i$ and $v_i$ (even if the choice he selects is incorrect!).\n\nTime is limited, and the exam must go on. The developers only have time to fix one bug. Now the developers are wondering, for all $1 \\le i \\le m$, what's the maximum possible number of questions BaoBao can correctly answer if they fix the $i$-th bug. Please write a program to solve this problem so that the developers can select a proper bug to fix.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $1 \\le m \\le 10^5$), indicating the number of questions and the number of bugs.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the correct answer for question $i$.\n\nFor the following $m$ lines, the $i$-th line has two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$), indicating the $i$-th bug.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $m$ over all test cases will exceed $10^6$.", "outputFormat": "For each test case output one line containing $m$ integers $c_1, c_2, \\dots, c_m$ separated by a space, where $c_i$ indicates the maximum possible number of questions BaoBao can correctly answer if the $i$-th bug is fixed.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "The following table explains the first sample test case.\n\n- The ``possible choices`` column indicates a possible set of choices to each question BaoBao can select, leading to a maximum possible number of correctly answered questions;\n- The ``correct`` column indicates the number of correctly answered questions using the set of choices provided in the ``possible choices`` column.\n\n$$\\begin{array}{|c|c|c|c|}\n\\hline\n\\textbf{Bug No.} & \\textbf{Possible Choices} & \\textbf{Correct} \\\\\n\\hline\n1 & (1, 2, 1, 2, 1, 1, 1) & 6 \\\\\n\\hline\n2 & (2, 2, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n3 & (1, 1, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n4 & (1, 1, 1, 1, 1, 2, 1) & 5 \\\\\n\\hline\n5 & (1, 1, 1, 1, 1, 1, 1) & 4 \\\\\n\\hline\n\\end{array}$$\n\nFor the second sample test case, no matter which bug is fixed, BaoBao has to select the same choice for all the three questions. As the correct answer for each question is different, BaoBao can only correctly answer 1 question.\n\nFor the third sample test case, note that even if the developers fix the first bug, the second bug is still taking effect and BaoBao still has to select the same choice for the two problems. It's the same if the second bug is fixed.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Kawa Exam", "background": "", "description": "BaoBao is taking an online exam of the Kawa programming language, which consists of $n$ multiple choice questions. The exam is not easy, as for each question, BaoBao needs to select the one and only one correct answer from $10^5$ available choices! But don't worry, as an active committer of the famous \\textit{open-kdk}, BaoBao obviously knows all the correct answers.\n\nAlthough BaoBao is an expert in Kawa, the developers of the exam system are definitely not experts in software engineering. There are $m$ bugs in the exam system, and the $i$-th bug can be described as $(u_i, v_i)$, which means that BaoBao must select the same choice for question $u_i$ and $v_i$ (even if the choice he selects is incorrect!).\n\nTime is limited, and the exam must go on. The developers only have time to fix one bug. Now the developers are wondering, for all $1 \\le i \\le m$, what's the maximum possible number of questions BaoBao can correctly answer if they fix the $i$-th bug. Please write a program to solve this problem so that the developers can select a proper bug to fix.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $1 \\le m \\le 10^5$), indicating the number of questions and the number of bugs.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the correct answer for question $i$.\n\nFor the following $m$ lines, the $i$-th line has two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$), indicating the $i$-th bug.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $m$ over all test cases will exceed $10^6$.", "outputFormat": "For each test case output one line containing $m$ integers $c_1, c_2, \\dots, c_m$ separated by a space, where $c_i$ indicates the maximum possible number of questions BaoBao can correctly answer if the $i$-th bug is fixed.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "The following table explains the first sample test case.\n\n- The ``possible choices`` column indicates a possible set of choices to each question BaoBao can select, leading to a maximum possible number of correctly answered questions;\n- The ``correct`` column indicates the number of correctly answered questions using the set of choices provided in the ``possible choices`` column.\n\n$$\\begin{array}{|c|c|c|c|}\n\\hline\n\\textbf{Bug No.} & \\textbf{Possible Choices} & \\textbf{Correct} \\\\\n\\hline\n1 & (1, 2, 1, 2, 1, 1, 1) & 6 \\\\\n\\hline\n2 & (2, 2, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n3 & (1, 1, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n4 & (1, 1, 1, 1, 1, 2, 1) & 5 \\\\\n\\hline\n5 & (1, 1, 1, 1, 1, 1, 1) & 4 \\\\\n\\hline\n\\end{array}$$\n\nFor the second sample test case, no matter which bug is fixed, BaoBao has to select the same choice for all the three questions. As the correct answer for each question is different, BaoBao can only correctly answer 1 question.\n\nFor the third sample test case, note that even if the developers fix the first bug, the second bug is still taking effect and BaoBao still has to select the same choice for the two problems. It's the same if the second bug is fixed.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Kawa Exam", "background": "", "description": "BaoBao 正在参加 Kawa 编程语言的在线考试，该考试由 $n$ 个多项选择题组成。考试并不容易，对于每一道题，BaoBao 都需要从 $10^5$ 个可用选项中选择唯一一个正确答案！但别担心，作为著名的 $\\text{open-kdk}$ 的积极参与者，BaoBao 显然知道所有正确的答案。\n\n虽然 BaoBao 是 Kawa 方面的专家，但考试系统的开发人员绝对不是软件工程方面的专家。考试系统中有 $m$ 个错误，第 $i$ 个错误可以描述为 $(u_i,v_i)$，这意味着 BaoBao 必须为第 $u_i$ 和 $v_i$ 个问题选择相同的选项（即使他选择的选项不正确！）。\n\n但是考试必须继续，这就意味着开发人员只有时间修复一个错误。现在，开发人员想知道，对于所有的 $1\\le i\\le m$，如果他们修复 $i$，BaoBao 可以正确回答的最大问题数量是多少。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$（$1\\le n\\le 10^5$，$1\\le m\\le 10^5$），表示问题数量和错误数量。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$1\\le a_i\\le 10^5$），其中 $a_i$ 表示问题 $i$ 的正确答案。\n\n对于以下 $m$ 行，第 $i$ 行有两个整数 $u_i$ 和 $v_i$（$1\\le u_i,v_i\\le n$），表示第 $i$ 个错误。\n\n保证所有测试用例的 $n$ 和 $m$ 的总和都不会超过 $10^6$。", "outputFormat": "对于每个测试用例的输出，一行包含由空格分隔的 $m$ 个整数 $c_1,c_2,\\dots,c_m$，其中 $c_i$ 表示如果修复了第 $i$ 个错误，BaoBao 可以正确回答的最大问题数。\n\n请不要在每行末尾输出多余的空格，否则您的答案可能会被认为是错误的！", "hint": "下表解释了第一个示例测试用例。\n\n- “可能的选择”列表示 BaoBao 可以选择的每个问题的一组可能的选择，从而导致正确回答的问题的最大可能数量；\n\n- “正确”列表示使用“可能的选择”列中提供的一组选择正确回答的问题的数量。\n\n$$\\begin{array}{|c|c|c|c|}\n\\hline\n\\textbf{Bug 编号} & \\textbf{可能的选择} & \\textbf{正确} \\\\\n\\hline\n1 & (1, 2, 1, 2, 1, 1, 1) & 6 \\\\\n\\hline\n2 & (2, 2, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n3 & (1, 1, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n4 & (1, 1, 1, 1, 1, 2, 1) & 5 \\\\\n\\hline\n5 & (1, 1, 1, 1, 1, 1, 1) & 4 \\\\\n\\hline\n\\end{array}$$\n\n对于第二个样本测试用例，无论哪个 bug 被修复，BaoBao 都必须为所有三个问题选择相同的选项。由于每个问题的正确答案不同，BaoBao 只能正确回答一个问题。\n\n对于第三个示例测试用例，请注意，即使开发人员修复了第一个错误，第二个错误仍然有效，BaoBao 仍然必须为这两个问题选择相同的选项。如果第二个错误被修复，情况也是一样的。", "locale": "zh-CN"}}}
{"pid": "P9887", "type": "P", "difficulty": 3, "samples": [["3\n1\n1\n0\n2\n00\n11\n5\n01010\n00111", "0\n2\n6"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Flippy Sequence", "background": "", "description": "DreamGrid has just found two binary sequences $s_1, s_2, \\dots, s_n$ and $t_1, t_2, \\dots, t_n$ ($s_i, t_i \\in \\{0, 1\\}$ for all $1 \\le i \\le n$) from his virtual machine! He would like to perform the operation described below exactly twice, so that $s_i = t_i$ holds for all $1 \\le i \\le n$ after the two operations.\n\nThe operation is: Select two integers $l$ and $r$ ($1 \\le l \\le r \\le n$), change $s_i$ to $(1 - s_i)$ for all $l \\le i \\le r$.\n\nDreamGrid would like to know the number of ways to do so.\n\nWe use the following rules to determine whether two ways are different:\n\n- Let $A = (a_1, a_2, a_3, a_4)$, where $1 \\le a_1 \\le a_2 \\le n, 1 \\le a_3 \\le a_4 \\le n$, be a valid operation pair denoting that DreamGrid selects integers $a_1$ and $a_2$ for the first operation and integers $a_3$ and $a_4$ for the second operation;\n- Let $B = (b_1, b_2, b_3, b_4)$, where $1 \\le b_1 \\le b_2 \\le n, 1 \\le b_3 \\le b_4 \\le n$, be another valid operation pair denoting that DreamGrid selects integers $b_1$ and $b_2$ for the first operation and integers $b_3$ and $b_4$ for the second operation.\n- $A$ and $B$ are considered different, if there exists an integer $k$ ($1 \\le k \\le 4$) such that $a_k \\ne b_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^6$), indicating the length of two binary sequences.\n\nThe second line contains a string $s_1s_2\\dots s_n$ ($s_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the first binary sequence.\n\nThe third line contains a string $t_1t_2\\dots t_n$ ($t_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the second binary sequence.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^7$.", "outputFormat": "For each test case, output an integer denoting the answer.", "hint": "For the second sample test case, there are two valid operation pairs: $(1, 1, 2, 2)$ and $(2, 2, 1, 1)$.\n\nFor the third sample test case, there are six valid operation pairs: $(2, 3, 5, 5)$, $(5, 5, 2, 3)$, $(2, 5, 4, 4)$, $(4, 4, 2, 5)$, $(2, 4, 4, 5)$ and $(4, 5, 2, 4)$.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Flippy Sequence", "background": "", "description": "DreamGrid has just found two binary sequences $s_1, s_2, \\dots, s_n$ and $t_1, t_2, \\dots, t_n$ ($s_i, t_i \\in \\{0, 1\\}$ for all $1 \\le i \\le n$) from his virtual machine! He would like to perform the operation described below exactly twice, so that $s_i = t_i$ holds for all $1 \\le i \\le n$ after the two operations.\n\nThe operation is: Select two integers $l$ and $r$ ($1 \\le l \\le r \\le n$), change $s_i$ to $(1 - s_i)$ for all $l \\le i \\le r$.\n\nDreamGrid would like to know the number of ways to do so.\n\nWe use the following rules to determine whether two ways are different:\n\n- Let $A = (a_1, a_2, a_3, a_4)$, where $1 \\le a_1 \\le a_2 \\le n, 1 \\le a_3 \\le a_4 \\le n$, be a valid operation pair denoting that DreamGrid selects integers $a_1$ and $a_2$ for the first operation and integers $a_3$ and $a_4$ for the second operation;\n- Let $B = (b_1, b_2, b_3, b_4)$, where $1 \\le b_1 \\le b_2 \\le n, 1 \\le b_3 \\le b_4 \\le n$, be another valid operation pair denoting that DreamGrid selects integers $b_1$ and $b_2$ for the first operation and integers $b_3$ and $b_4$ for the second operation.\n- $A$ and $B$ are considered different, if there exists an integer $k$ ($1 \\le k \\le 4$) such that $a_k \\ne b_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^6$), indicating the length of two binary sequences.\n\nThe second line contains a string $s_1s_2\\dots s_n$ ($s_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the first binary sequence.\n\nThe third line contains a string $t_1t_2\\dots t_n$ ($t_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the second binary sequence.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^7$.", "outputFormat": "For each test case, output an integer denoting the answer.", "hint": "For the second sample test case, there are two valid operation pairs: $(1, 1, 2, 2)$ and $(2, 2, 1, 1)$.\n\nFor the third sample test case, there are six valid operation pairs: $(2, 3, 5, 5)$, $(5, 5, 2, 3)$, $(2, 5, 4, 4)$, $(4, 4, 2, 5)$, $(2, 4, 4, 5)$ and $(4, 5, 2, 4)$.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Flippy Sequence", "background": null, "description": "DreamGrid 刚刚从他的虚拟机中找到了两个二进制序列 $s_1, s_2, \\dots, s_n$ 和 $t_1, t_2, \\dots, t_n$（对于所有 $1 \\le i \\le n$，$s_i, t_i \\in \\{0, 1\\}$）！他想要执行下面描述的操作恰好两次，使得在两次操作后，对于所有 $1 \\le i \\le n$，都有 $s_i = t_i$。 操作是：选择两个整数 $l$ 和 $r$（$1 \\le l \\le r \\le n$），将所有 $l \\le i \\le r$ 的 $s_i$ 变为 $(1 - s_i)$。 DreamGrid 想知道有多少种方法可以做到这一点。 我们使用以下规则来确定两种方法是否不同： - 设 $A = (a_1, a_2, a_3, a_4)$，其中 $1 \\le a_1 \\le a_2 \\le n, 1 \\le a_3 \\le a_4 \\le n$，表示 DreamGrid 为第一次操作选择整数 $a_1$ 和 $a_2$，为第二次操作选择整数 $a_3$ 和 $a_4$； - 设 $B = (b_1, b_2, b_3, b_4)$，其中 $1 \\le b_1 \\le b_2 \\le n, 1 \\le b_3 \\le b_4 \\le n$，表示 DreamGrid 为第一次操作选择整数 $b_1$ 和 $b_2$，为第二次操作选择整数 $b_3$ 和 $b_4$。 - 如果存在整数 $k$（$1 \\le k \\le 4$）使得 $a_k \\neq b_k$，则 $A$ 和 $B$ 被认为是不同的。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例： 第一行包含一个整数 $n$（$1 \\le n \\le 10^6$），表示两个二进制序列的长度。 第二行包含一个长度为 $n$ 的字符串 $s_1s_2\\dots s_n$（$s_i \\in \\{\\text{`0'}, \\text{`1'}\\}$），表示第一个二进制序列。 第三行包含一个长度为 $n$ 的字符串 $t_1t_2\\dots t_n$（$t_i \\in \\{\\text{`0'}, \\text{`1'}\\}$），表示第二个二进制序列。 保证所有测试用例中 $n$ 的总和不超过 $10^7$。", "outputFormat": "对于每个测试用例，输出一个整数表示答案。", "hint": "对于第二个样例测试用例，有两个有效的操作对：$(1, 1, 2, 2)$ 和 $(2, 2, 1, 1)$。 对于第三个样例测试用例，有六个有效的操作对：$(2, 3, 5, 5)$，$(5, 5, 2, 3)$，$(2, 5, 4, 4)$，$(4, 4, 2, 5)$，$(2, 4, 4, 5)$ 和 $(4, 5, 2, 4)$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9888", "type": "P", "difficulty": 4, "samples": [["4\n2 2\n8101215\n3 4\n100000001000\n2 2\n80101215\n3 4\n1000000010000", "23 45\n101 1000\nImpossible\nImpossible"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["模拟", "2018", "O2优化", "枚举", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Magic Multiplication", "background": "", "description": "BaoBao is now learning a new binary operation between two positive integers, represented by $\\otimes$, in his magic book. The book tells him that the result of such operation is calculated by concatenating all multiple results of each digit in the two integers.\n\nFormally speaking, let the first integer be $A = a_1a_2 \\dots a_n$, where $a_i$ indicates the $i$-th digit in $A$, and the second integer be $B = b_1b_2 \\dots b_m$, where $b_i$ indicates the $i$-th digit in $B$. We have \n\n$$A \\otimes B = \\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_ib_j = a_1b_1 + a_1b_2 + \\dots + a_1b_m + a_2b_1 + \\dots + a_nb_m$$ \n\nNote that the result of $a_ib_j$ is considered to be a $\\textbf{string}$ (without leading zeros if $a_ib_j > 0$, or contains exactly one `0` if $a_ib_j = 0$), NOT a normal integer. Also, the sum here means $\\textbf{string concatenation}$, NOT the normal addition operation.\n\nFor example, $23 \\otimes 45 = 8101215$. Because $8=2 \\times 4$, $10=2 \\times 5$, $12=3 \\times 4$ and $15=3 \\times 5$.\n\nBaoBao is very smart and soon knows how to do the inverse operation of $\\otimes$. Now he gives you the result of a $\\otimes$ operation and the numbers of digits in the two original integers. Please help him to restore the two original integers $A$ and $B$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two positive integers $n$ and $m$ ($1 \\le n, m \\le 2 \\times 10^5$), where $n$ indicates the length of $A$ and $m$ indicates the length of $B$. Here length of an integer means the length of the string when writing the number in decimal notation without leading zeros.\n\nThe second line contains only one positive integer $C$ without leading zeros, indicating the result of $A \\otimes B$. The length of $C$ is no more than $2 \\times 10^5$.\n\nIt's guaranteed that the sum of lengths of $C$ over all test cases will not exceed $2 \\times 10^6$.", "outputFormat": "For each test case output one line.\n\nIf there exist such $A$ and $B$ that $A \\otimes B = C$, output one line containing two integers $A$ and $B$ separated by one space. Note that $A$ and $B$ should be positive integers without leading zeros, the length of $A$ should be exactly $n$, and the length of $B$ should be exactly $m$.\n\nIf there are multiple valid answers, output the answer with the smallest $A$; If there are still more than one answer, output one of them with the smallest $B$.\n\nIf such $A$ and $B$ do not exist, print ``Impossible`` (without quotes) on a single line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Magic Multiplication", "background": "", "description": "BaoBao is now learning a new binary operation between two positive integers, represented by $\\otimes$, in his magic book. The book tells him that the result of such operation is calculated by concatenating all multiple results of each digit in the two integers.\n\nFormally speaking, let the first integer be $A = a_1a_2 \\dots a_n$, where $a_i$ indicates the $i$-th digit in $A$, and the second integer be $B = b_1b_2 \\dots b_m$, where $b_i$ indicates the $i$-th digit in $B$. We have \n\n$$A \\otimes B = \\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_ib_j = a_1b_1 + a_1b_2 + \\dots + a_1b_m + a_2b_1 + \\dots + a_nb_m$$ \n\nNote that the result of $a_ib_j$ is considered to be a $\\textbf{string}$ (without leading zeros if $a_ib_j > 0$, or contains exactly one `0` if $a_ib_j = 0$), NOT a normal integer. Also, the sum here means $\\textbf{string concatenation}$, NOT the normal addition operation.\n\nFor example, $23 \\otimes 45 = 8101215$. Because $8=2 \\times 4$, $10=2 \\times 5$, $12=3 \\times 4$ and $15=3 \\times 5$.\n\nBaoBao is very smart and soon knows how to do the inverse operation of $\\otimes$. Now he gives you the result of a $\\otimes$ operation and the numbers of digits in the two original integers. Please help him to restore the two original integers $A$ and $B$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two positive integers $n$ and $m$ ($1 \\le n, m \\le 2 \\times 10^5$), where $n$ indicates the length of $A$ and $m$ indicates the length of $B$. Here length of an integer means the length of the string when writing the number in decimal notation without leading zeros.\n\nThe second line contains only one positive integer $C$ without leading zeros, indicating the result of $A \\otimes B$. The length of $C$ is no more than $2 \\times 10^5$.\n\nIt's guaranteed that the sum of lengths of $C$ over all test cases will not exceed $2 \\times 10^6$.", "outputFormat": "For each test case output one line.\n\nIf there exist such $A$ and $B$ that $A \\otimes B = C$, output one line containing two integers $A$ and $B$ separated by one space. Note that $A$ and $B$ should be positive integers without leading zeros, the length of $A$ should be exactly $n$, and the length of $B$ should be exactly $m$.\n\nIf there are multiple valid answers, output the answer with the smallest $A$; If there are still more than one answer, output one of them with the smallest $B$.\n\nIf such $A$ and $B$ do not exist, print ``Impossible`` (without quotes) on a single line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Magic Multiplication", "background": null, "description": "BaoBao 现在正在他的魔法书中学习两个正整数之间的一种新的二元运算，用 $\\otimes$ 表示。这本书告诉他，这种运算的结果是通过将两个整数中每个数字的所有多个结果串联起来计算的。\n\n形式上讲，让第一个整数为 $A=a_1a_2\\dots a_n$，其中 $a_i$ 表示 $A$ 中的第 $i$ 位，第二个整数为 $B=b_1b_2\\dots b_m$，其中 $b_i$ 表示 $B$ 中的第一位。我们有\n\n$$A \\otimes B = \\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_ib_j = a_1b_1 + a_1b_2 + \\dots + a_1b_m + a_2b_1 + \\dots + a_nb_m$$\n\n请注意，$a_ib_j$ 的结果被认为是 $\\textbf{string}$（也就是直接算出结果然后把它当作字符串），而不是正常整数。此外，这里的 sum 表示 $\\textbf{string concatenation}$（也就是字符串拼接），而不是正常的加法运算。\n\n例如，$23\\otimes 45=8101215$。因为 $8=2\\times 4$，$10=2\\times 5$，$12=3\\times 4$ 和 $15=3\\times 5$。\n\nBaoBao 很聪明，很快就想出了 $\\otimes$ 的逆运算。现在，他给出了 $\\otimes$ 运算的结果以及两个原始整数中的位数。请帮助他恢复两个原始整数 $A$ 和 $B$。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个正整数 $n$ 和 $m$（$1\\le n,m\\le 2\\times 10^5$），其中 $n$ 表示 $A$ 的长度，$m$ 表示 $B$ 的长度。这里，整数的长度是指在不带前导零的十进制记数法中写入数字时字符串的长度。\n\n第二行只包含一个不带前导零的正整数 $C$，表示 $A\\otimes B$ 的结果。$C$ 的长度不超过 $2\\times 10^5$。\n\n保证所有测试用例的 $C$ 长度总和不会超过 $2\\times 10^6$。", "outputFormat": "对于每个测试用例输出一行。\n\n如果存在这样的 $A$ 和 $B$，$A\\otimes B=C$，则输出一行，其中包含由一个空格分隔的两个整数 $A$ 与 $B$。请注意，$A$ 和 $B$ 应该是不带前导零的正整数，$A$ 的长度应该正好是 $n$，$B$ 的长度应正好是 $m$。\n\n如果存在多个有效答案，则输出具有最小 $A$ 的答案；如果仍然有一个以上的答案，请输出其中一个最小的 $B$。\n\n如果不存在这样的 $A$ 和 $B$，请在单行上打印 ``Impossible``（不带引号）。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P9889", "type": "P", "difficulty": 4, "samples": [["2\n4 8\n3 2 6 6\n3 9\n10 10 1", "6\n4"]], "limits": {"time": [1000, 1000, 1000], "memory": [262144, 262144, 262144]}, "tags": ["贪心", "2018", "二分", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Plants vs. Zombies", "background": "", "description": "BaoBao and DreamGrid are playing the game $\\textit{Plants vs. Zombies}$. In the game, DreamGrid grows plants to defend his garden against BaoBao's zombies.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9tyl9ix3.png)\n\n$\\textit{Plants vs. Zombies(?)} \\\\\n\\textit{(Image from pixiv. ID: 21790160; Artist: socha)}$\n\nThere are $n$ plants in DreamGrid's garden arranged in a line. From west to east, the plants are numbered from 1 to $n$ and the $i$-th plant lies $i$ meters to the east of DreamGrid's house. The $i$-th plant has a defense value of $d_i$ and a growth speed of $a_i$. Initially, $d_i = 0$ for all $1 \\le i \\le n$. \n\nDreamGrid uses a robot to water the plants. The robot is in his house initially. In one step of watering, DreamGrid will choose a direction (east or west) and the robot moves exactly 1 meter along the direction. After moving, if the $i$-th plant is at the robot's position, the robot will water the plant and $a_i$ will be added to $d_i$. Because the water in the robot is limited, at most $m$ steps can be done.\n\nThe defense value of the garden is defined as $\\min\\{d_i | 1 \\le i \\le n\\}$. DreamGrid needs your help to maximize the garden's defense value and win the game.\n\n- Each time the robot MUST move before watering a plant;\n- It's OK for the robot to move more than $n$ meters to the east away from the house, or move back into the house, or even move to the west of the house.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($2 \\le n \\le 10^5$, $0 \\le m \\le 10^{12}$), indicating the number of plants and the maximum number of steps the robot can take.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the growth speed of the $i$-th plant.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line containing one integer, indicating the maximum defense value of the garden DreamGrid can get.", "hint": "In the explanation below, `E` indicates that the robot moves exactly 1 meter to the east from his current position, and `W` indicates that the robot moves exactly 1 meter to the west from his current position.\n\nFor the first test case, a candidate direction sequence is $\\{E, E, W, E, E, W, E, E\\}$, so that we have $d = \\{6,6,12,6\\}$ after the watering.\n\nFor the second test case, a candidate direction sequence is $\\{E, E, E, E, W, E, W, E, W\\}$, so that we have $d = \\{10, 10, 4\\}$ after the watering.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Plants vs. Zombies", "background": "", "description": "BaoBao and DreamGrid are playing the game $\\textit{Plants vs. Zombies}$. In the game, DreamGrid grows plants to defend his garden against BaoBao's zombies.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9tyl9ix3.png)\n\n$\\textit{Plants vs. Zombies(?)} \\\\\n\\textit{(Image from pixiv. ID: 21790160; Artist: socha)}$\n\nThere are $n$ plants in DreamGrid's garden arranged in a line. From west to east, the plants are numbered from 1 to $n$ and the $i$-th plant lies $i$ meters to the east of DreamGrid's house. The $i$-th plant has a defense value of $d_i$ and a growth speed of $a_i$. Initially, $d_i = 0$ for all $1 \\le i \\le n$. \n\nDreamGrid uses a robot to water the plants. The robot is in his house initially. In one step of watering, DreamGrid will choose a direction (east or west) and the robot moves exactly 1 meter along the direction. After moving, if the $i$-th plant is at the robot's position, the robot will water the plant and $a_i$ will be added to $d_i$. Because the water in the robot is limited, at most $m$ steps can be done.\n\nThe defense value of the garden is defined as $\\min\\{d_i | 1 \\le i \\le n\\}$. DreamGrid needs your help to maximize the garden's defense value and win the game.\n\n- Each time the robot MUST move before watering a plant;\n- It's OK for the robot to move more than $n$ meters to the east away from the house, or move back into the house, or even move to the west of the house.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($2 \\le n \\le 10^5$, $0 \\le m \\le 10^{12}$), indicating the number of plants and the maximum number of steps the robot can take.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the growth speed of the $i$-th plant.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line containing one integer, indicating the maximum defense value of the garden DreamGrid can get.", "hint": "In the explanation below, `E` indicates that the robot moves exactly 1 meter to the east from his current position, and `W` indicates that the robot moves exactly 1 meter to the west from his current position.\n\nFor the first test case, a candidate direction sequence is $\\{E, E, W, E, E, W, E, E\\}$, so that we have $d = \\{6,6,12,6\\}$ after the watering.\n\nFor the second test case, a candidate direction sequence is $\\{E, E, E, E, W, E, W, E, W\\}$, so that we have $d = \\{10, 10, 4\\}$ after the watering.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Plants vs. Zombies", "background": "", "description": "BaoBao 和 DreamGrid 正在玩游戏《植物大战僵尸》。在游戏中，DreamGrid 种植植物来保护他的花园免受 BaoBao 的僵尸攻击。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9tyl9ix3.png)\n\n《植物大战僵尸（？）》\n\n（图片来自 pixiv。ID: 21790160；艺术家：socha）\n\nDreamGrid 的花园里有 $n$ 株植物，按一条直线排列。从西到东，植物从 1 到 $n$ 编号，第 $i$ 株植物位于 DreamGrid 的房子东边 $i$ 米处。第 $i$ 株植物的防御值为 $d_i$，生长速度为 $a_i$。最初，所有 $1 \\le i \\le n$ 的 $d_i = 0$。\n\nDreamGrid 使用一个机器人来浇灌植物。机器人最初在他的房子里。在一次浇水步骤中，DreamGrid 会选择一个方向（东或西），机器人沿该方向正好移动 1 米。移动后，如果第 $i$ 株植物位于机器人的位置，机器人将浇灌植物，并将 $a_i$ 加到 $d_i$ 上。由于机器人的水是有限的，最多可以进行 $m$ 步。\n\n花园的防御值定义为 $\\min\\{d_i | 1 \\le i \\le n\\}$。DreamGrid 需要你的帮助来最大化花园的防御值并赢得比赛。\n\n- 每次机器人必须在浇灌植物之前移动；\n- 机器人可以移动超过 $n$ 米到房子东边，或者移回房子，甚至移动到房子西边。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$ ($2 \\le n \\le 10^5$, $0 \\le m \\le 10^{12}$)，表示植物的数量和机器人可以移动的最大步数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, ..., a_n$ ($1 \\le a_i \\le 10^5$)，其中 $a_i$ 表示第 $i$ 株植物的生长速度。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例输出一行，包含一个整数，表示 DreamGrid 可以获得的花园的最大防御值。", "hint": "在下面的解释中，`E` 表示机器人从当前位置向东移动 1 米，`W` 表示机器人从当前位置向西移动 1 米。\n\n对于第一个测试用例，一个候选方向序列是 $\\{E, E, W, E, E, W, E, E\\}$，这样我们有 $d = \\{6,6,12,6\\}$ 在浇水后。\n\n对于第二个测试用例，一个候选方向序列是 $\\{E, E, E, E, W, E, W, E, W\\}$，这样我们有 $d = \\{10, 10, 4\\}$ 在浇水后。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9890", "type": "P", "difficulty": 5, "samples": [["2\n3 1\n4 3", "Impossible\n2 1 4 3\n3 4 1 2\n4 3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144]}, "tags": ["2018", "O2优化", "构造", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Tournament", "background": "", "description": "DreamGrid, the king of Gridland, is making a knight tournament. There are $n$ knights, numbered from 1 to $n$, participating in the tournament. The rules of the tournament are listed as follows:\n\n- The tournament consists of $k$ rounds. Each round consists of several duels. Each duel happens between exactly two knights.\n- Each knight must participate in exactly one duel during each round.\n- For each pair of knights, there can be at most one duel between them during all the $k$ rounds.\n- Let $1 \\le i, j \\le k$, $i \\ne j$, and $1 \\le a, b, c, d \\le n$, $a, b, c, d$ be four distinct integers. If\n    - Knight $a$ fights against knight $b$ during round $i$, and\n    - Knight $c$ fights against knight $d$ during round $i$, and\n    - Knight $a$ fights against knight $c$ during round $j$,\n- then knight $b$ must fight against knight $d$ during round $j$.\n\nAs DreamGrid's general, you are asked to write a program to arrange all the duels in all the $k$ rounds, so that the resulting arrangement satisfies the rules above. ", "inputFormat": "There are multiple test cases. The first line of the input is an integer $T$, indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $k$ ($1 \\le n, k \\le 1000$), indicating the number of knights participating in the tournament and the number of rounds.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $k$ in all test cases will exceed $5000$.", "outputFormat": "For each test case:\n\n- If it's possible to make a valid arrangement, output $k$ lines. On the $i$-th line, output $n$ integers $c_{i, 1}, c_{i, 2}, \\dots, c_{i, n}$ separated by one space, indicating that in the $i$-th round, knight $j$ will fight against knight $c_{i, j}$ for all $1 \\le j \\le n$.   \nIf there are multiple valid answers, output the lexicographically smallest answer.   \nConsider two answers $A$ and $B$, let's denote $a_{i, j}$ as the $j$-th integer on the $i$-th line in answer $A$, and $b_{i, j}$ as the $j$-th integer on the $i$-th line in answer $B$. Answer $A$ is lexicographically smaller than answer $B$, if there exists two integers $p$ ($1 \\le p \\le k$) and $q$ ($1 \\le q \\le n$), such that\n    - for all $1 \\le i < p$ and $1 \\le j \\le n$, $a_{i, j} = b_{i, j}$, and\n    - for all $1 \\le j < q$, $a_{p, j} = b_{p, j}$, and finally $a_{p, q} < b_{p, q}$.\n-If it's impossible to make a valid arrangement, output ``Impossible`` (without quotes) in one line.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Tournament", "background": "", "description": "DreamGrid, the king of Gridland, is making a knight tournament. There are $n$ knights, numbered from 1 to $n$, participating in the tournament. The rules of the tournament are listed as follows:\n\n- The tournament consists of $k$ rounds. Each round consists of several duels. Each duel happens between exactly two knights.\n- Each knight must participate in exactly one duel during each round.\n- For each pair of knights, there can be at most one duel between them during all the $k$ rounds.\n- Let $1 \\le i, j \\le k$, $i \\ne j$, and $1 \\le a, b, c, d \\le n$, $a, b, c, d$ be four distinct integers. If\n    - Knight $a$ fights against knight $b$ during round $i$, and\n    - Knight $c$ fights against knight $d$ during round $i$, and\n    - Knight $a$ fights against knight $c$ during round $j$,\n- then knight $b$ must fight against knight $d$ during round $j$.\n\nAs DreamGrid's general, you are asked to write a program to arrange all the duels in all the $k$ rounds, so that the resulting arrangement satisfies the rules above. ", "inputFormat": "There are multiple test cases. The first line of the input is an integer $T$, indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $k$ ($1 \\le n, k \\le 1000$), indicating the number of knights participating in the tournament and the number of rounds.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $k$ in all test cases will exceed $5000$.", "outputFormat": "For each test case:\n\n- If it's possible to make a valid arrangement, output $k$ lines. On the $i$-th line, output $n$ integers $c_{i, 1}, c_{i, 2}, \\dots, c_{i, n}$ separated by one space, indicating that in the $i$-th round, knight $j$ will fight against knight $c_{i, j}$ for all $1 \\le j \\le n$.   \nIf there are multiple valid answers, output the lexicographically smallest answer.   \nConsider two answers $A$ and $B$, let's denote $a_{i, j}$ as the $j$-th integer on the $i$-th line in answer $A$, and $b_{i, j}$ as the $j$-th integer on the $i$-th line in answer $B$. Answer $A$ is lexicographically smaller than answer $B$, if there exists two integers $p$ ($1 \\le p \\le k$) and $q$ ($1 \\le q \\le n$), such that\n    - for all $1 \\le i < p$ and $1 \\le j \\le n$, $a_{i, j} = b_{i, j}$, and\n    - for all $1 \\le j < q$, $a_{p, j} = b_{p, j}$, and finally $a_{p, q} < b_{p, q}$.\n-If it's impossible to make a valid arrangement, output ``Impossible`` (without quotes) in one line.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Tournament", "background": null, "description": "DreamGrid，Gridland 的国王，正在举办一场骑士锦标赛。有 $n$ 名骑士，编号从 1 到 $n$，参加这次锦标赛。锦标赛的规则如下：\n\n- 锦标赛由 $k$ 轮组成。每一轮由若干场决斗组成。每场决斗恰好在两名骑士之间进行。\n- 每名骑士在每一轮中必须参加一场决斗。\n- 对于每对骑士，在所有 $k$ 轮中最多只能有一场决斗。\n- 设 $1 \\le i, j \\le k$，$i \\neq j$，且 $1 \\le a, b, c, d \\le n$，$a, b, c, d$ 是四个不同的整数。如果\n  - 骑士 $a$ 在第 $i$ 轮对战骑士 $b$，并且\n  - 骑士 $c$ 在第 $i$ 轮对战骑士 $d$，并且\n  - 骑士 $a$ 在第 $j$ 轮对战骑士 $c$，\n- 那么骑士 $b$ 必须在第 $j$ 轮对战骑士 $d$。\n\n作为 DreamGrid 的将军，你需要编写一个程序来安排所有 $k$ 轮中的所有决斗，以便结果安排满足上述规则。", "inputFormat": "有多个测试用例。输入的第一行是一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $k$ ($1 \\le n, k \\le 1000$)，表示参加锦标赛的骑士数量和轮数。\n\n保证所有测试用例中 $n$ 和 $k$ 的总和不超过 5000。", "outputFormat": "对于每个测试用例：\n\n- 如果可以进行有效的安排，输出 $k$ 行。在第 $i$ 行，输出 $n$ 个整数 $c_{i, 1}, c_{i, 2}, \\dots, c_{i, n}$，用空格分隔，表示在第 $i$ 轮中，骑士 $j$ 将与骑士 $c_{i, j}$ 对战，所有 $1 \\le j \\le n$。如果有多个有效答案，输出字典序最小的答案。考虑两个答案 $A$ 和 $B$，记 $a_{i, j}$ 为答案 $A$ 中第 $i$ 行的第 $j$ 个整数，$b_{i, j}$ 为答案 $B$ 中第 $i$ 行的第 $j$ 个整数。答案 $A$ 在字典序上小于答案 $B$，如果存在两个整数 $p$ ($1 \\le p \\le k$) 和 $q$ ($1 \\le q \\le n$)，使得\n  - 对于所有 $1 \\le i < p$ 和 $1 \\le j \\le n$，$a_{i, j} = b_{i, j}$，并且\n  - 对于所有 $1 \\le j < q$，$a_{p, j} = b_{p, j}$，最终 $a_{p, q} < b_{p, q}$。\n- 如果无法进行有效的安排，输出一行 “Impossible”（不带引号）。\n\n请不要在每行末尾输出多余的空格，否则你的答案可能会被视为不正确！", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9891", "type": "P", "difficulty": 6, "samples": [["3\n2 2\n2 0\n3 2\n2 1 0\n3 1\n2 1 0", "8\n3\n1"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2018", "O2优化", "容斥原理", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Repair the Artwork", "background": "", "description": "DreamGrid has a paper strip with $n$ grids in a line and he has drawn some beautiful patterns in some grids. Unfortunately, his naughty roommate BaoBao drew some other patterns in some other grids when he wasn't at home. Now DreamGrid has to erase BaoBao's patterns without destroying his own patterns.\n\nLet's number the grids from 1 to $n$ from left to right. Each grid either contains DreamGrid's pattern, or contains BaoBao's pattern, or is empty.\n\nEach time, DreamGrid can select two integers $l$ and $r$ (these two integers can be different each time) such that\n\n- $1 \\le l \\le r \\le n$, and\n- for all $l \\le i \\le r$, the $i$-th grid either contains BaoBao's pattern, or is empty,\n\nand change the $i$-th grid to an empty grid for all $l \\le i \\le r$.\n\nHow many ways can DreamGrid change all the grids containing BaoBao's pattern to empty grids by performing the above operation exactly $m$ times? As the answer may be large, please print the answer modulo $10^9 + 7$.\n\nLet $\\{(a_1, b_1), (a_2, b_2), \\dots (a_m, b_m)\\}$ be a valid erasing sequence ($1 \\le a_i \\le b_i \\le n$), where $(a_i, b_i)$ indicates that DreamGrid selects integers $a_i$ and $b_i$ in the $i$-th operation. Let $\\{(c_1, d_1), (c_2, d_2), \\dots, (c_m, d_m)\\}$ be another valid erasing sequence ($1 \\le c_i \\le d_i \\le n$), where $(c_i, d_i)$ indicates that DreamGrid selects integers $c_i$ and $d_i$ in the $i$-th operation. These two sequences are considered different, if there exists an integer $k$ ($1 \\le k \\le m$) such that $a_k \\ne c_k$ or $b_k \\ne d_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 1000$), indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 100$, $1 \\le m \\le 10^9$), indicating the number of grids and the number of times to perform the operation.\n\nThe second line contains $n$ integers $a_i$ ($a_i \\in \\{0, 1, 2\\}$).\n\n- If $a_i = 0$, the $i$-th grid is empty.\n- If $a_i = 1$, the $i$-th grid contains DreamGrid's pattern.\n- If $a_i = 2$, the $i$-th grid contains BaoBao's pattern.\n\nIt's guaranteed that at most 50 test cases have $n > 50$.", "outputFormat": "For each test case, output one line containing the number of ways modulo $10^9 + 7$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Repair the Artwork", "background": "", "description": "DreamGrid has a paper strip with $n$ grids in a line and he has drawn some beautiful patterns in some grids. Unfortunately, his naughty roommate BaoBao drew some other patterns in some other grids when he wasn't at home. Now DreamGrid has to erase BaoBao's patterns without destroying his own patterns.\n\nLet's number the grids from 1 to $n$ from left to right. Each grid either contains DreamGrid's pattern, or contains BaoBao's pattern, or is empty.\n\nEach time, DreamGrid can select two integers $l$ and $r$ (these two integers can be different each time) such that\n\n- $1 \\le l \\le r \\le n$, and\n- for all $l \\le i \\le r$, the $i$-th grid either contains BaoBao's pattern, or is empty,\n\nand change the $i$-th grid to an empty grid for all $l \\le i \\le r$.\n\nHow many ways can DreamGrid change all the grids containing BaoBao's pattern to empty grids by performing the above operation exactly $m$ times? As the answer may be large, please print the answer modulo $10^9 + 7$.\n\nLet $\\{(a_1, b_1), (a_2, b_2), \\dots (a_m, b_m)\\}$ be a valid erasing sequence ($1 \\le a_i \\le b_i \\le n$), where $(a_i, b_i)$ indicates that DreamGrid selects integers $a_i$ and $b_i$ in the $i$-th operation. Let $\\{(c_1, d_1), (c_2, d_2), \\dots, (c_m, d_m)\\}$ be another valid erasing sequence ($1 \\le c_i \\le d_i \\le n$), where $(c_i, d_i)$ indicates that DreamGrid selects integers $c_i$ and $d_i$ in the $i$-th operation. These two sequences are considered different, if there exists an integer $k$ ($1 \\le k \\le m$) such that $a_k \\ne c_k$ or $b_k \\ne d_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 1000$), indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 100$, $1 \\le m \\le 10^9$), indicating the number of grids and the number of times to perform the operation.\n\nThe second line contains $n$ integers $a_i$ ($a_i \\in \\{0, 1, 2\\}$).\n\n- If $a_i = 0$, the $i$-th grid is empty.\n- If $a_i = 1$, the $i$-th grid contains DreamGrid's pattern.\n- If $a_i = 2$, the $i$-th grid contains BaoBao's pattern.\n\nIt's guaranteed that at most 50 test cases have $n > 50$.", "outputFormat": "For each test case, output one line containing the number of ways modulo $10^9 + 7$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Repair the Artwork", "background": null, "description": "DreamGrid 有一条纸带，上面有 $n$ 个格子排成一行，他在一些格子上画了一些美丽的图案。不幸的是，他淘气的室友 BaoBao 在他不在家的时候在其他一些格子上画了一些其他图案。现在 DreamGrid 需要在不破坏自己图案的情况下擦除 BaoBao 的图案。\n\n我们将格子从左到右编号为 1 到 $n$。每个格子要么包含 DreamGrid 的图案，要么包含 BaoBao 的图案，要么是空的。\n\n每次，DreamGrid 可以选择两个整数 $l$ 和 $r$（每次选择可以不同），使得\n\n- $1 \\le l \\le r \\le n$，并且\n- 对于所有 $l \\le i \\le r$，第 $i$ 个格子要么包含 BaoBao 的图案，要么是空的，\n\n然后将所有 $l \\le i \\le r$ 的第 $i$ 个格子变为空格子。\n\nDreamGrid 有多少种方法可以通过执行上述操作恰好 $m$ 次将所有包含 BaoBao 图案的格子变为空格子？由于答案可能很大，请输出答案对 $10^9 + 7$ 取模的结果。\n\n设 $\\{(a_1, b_1), (a_2, b_2), \\dots (a_m, b_m)\\}$ 是一个有效的擦除序列（$1 \\le a_i \\le b_i \\le n$），其中 $(a_i, b_i)$ 表示 DreamGrid 在第 $i$ 次操作中选择整数 $a_i$ 和 $b_i$。设 $\\{(c_1, d_1), (c_2, d_2), \\dots, (c_m, d_m)\\}$ 是另一个有效的擦除序列（$1 \\le c_i \\le d_i \\le n$），其中 $(c_i, d_i)$ 表示 DreamGrid 在第 $i$ 次操作中选择整数 $c_i$ 和 $d_i$。如果存在一个整数 $k$（$1 \\le k \\le m$）使得 $a_k \\ne c_k$ 或 $b_k \\ne d_k$，则这两个序列被认为是不同的。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$（$1 \\le T \\le 1000$），表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$（$1 \\le n \\le 100$，$1 \\le m \\le 10^9$），表示格子的数量和操作的次数。\n\n第二行包含 $n$ 个整数 $a_i$（$a_i \\in \\{0, 1, 2\\}$）。\n\n- 如果 $a_i = 0$，第 $i$ 个格子是空的。\n- 如果 $a_i = 1$，第 $i$ 个格子包含 DreamGrid 的图案。\n- 如果 $a_i = 2$，第 $i$ 个格子包含 BaoBao 的图案。\n\n保证最多有 50 个测试用例满足 $n > 50$。", "outputFormat": "对于每个测试用例，输出一行，包含对 $10^9 + 7$ 取模的方式数量。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9892", "type": "P", "difficulty": 7, "samples": [["2\n2\n-2 0 2 0\n-3 3 3 3\n0 1\n-3 -2\n3 -2\n2\n-2 0 2 0\n-3 3 -1 3\n0 1\n-3 -2\n3 -2", "13.416407864999\n-1"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2018", "Special Judge", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Mirror", "background": "", "description": "There is a non-transparent obstacle and a single-sided mirror in an infinite two-dimensional plane. The obstacle can be represented as a triangle and the mirror can be represented as a $\\textbf{directional}$ line segment pointing from $(x_{m,1}, y_{m,1})$ to $(x_{m,2}, y_{m,2})$, with the right side being reflective.\n\nThere are $m$ stones at point $(x_1,y_1)$ and DreamGrid would like to move all the stones to point $(x_2,y_2)$. The following constraints must be satisfied:\n\n- DreamGrid can only carry one stone each time.\n- Once DreamGrid picks up a stone, he can only put it down at point $(x_2,y_2)$.\n- Let $L$ be the path DreamGrid walked, then for each point $p$ on $L$, DreamGrid should see all the stones directly or through the mirror.\n\nNote that:\n\n- If some part of the line vision is inside the obstacle (it's ok that the line vision passes a point or edge of the obstacle), it's considered, that DreamGrid cannot see the stone with this line of vision.\n- If one of the two endpoints of the mirror is on the line of vision, it's considered, that DreamGrid can see the stone both in the mirror and through the mirror.\n- The reflection process is governed by laws of physics --- the angle of incidence is equal to the angle of reflection. The incident ray is in the same half-plane as the reflected ray, relative to the mirror.\n- If the line of vision is parallel to the mirror, reflection doesn't take place, and the mirror isn't regarded as an obstacle.\n- DreamGrid cannot move into the obstacle but can move on the edges or the vertices of the obstacle.\n- DreamGrid cannot move through the mirror but can move on the mirror. Note that if DreamGrid is on the line segment of the mirror other than the two endpoints, he can only see the side he comes from, and cannot see through the mirror.\n\nDreamGrid would like to know the shortest distance to move all stones from $(x_1,y_1)$ to $(x_2, y_2)$.", "inputFormat": "There are multiple test cases. The first line of input is an integer $T$ (about 100), indicates the number of test cases. For each test case:\n\nThe first line contains one integer $m$ ($1 \\le m \\le 10^6$), indicating the number of stones.\n\nThe second line contains four integers $x_1$, $y_1$, $x_2$ and $y_2$, indicating the start point and the target point.\n\nThe third line contains four integers $x_{m,1}$, $y_{m,1}$, $x_{m,2}$ and $y_{m,2}$, indicating the coordinates of the mirror.\n\nEach of the next $3$ lines has two integers $x_i$ and $y_i$, indicating the coordinates of the vertices of the obstacle.\n\nAll the coordinates will not exceed $100$ in absolute value. Both the start point and target point are outside the obstacle and the mirror. The mirror and the obstacle have no points in common.\n\nIt is guaranteed that no three points are collinear.", "outputFormat": "For each test case, output a real number indicating the shortest distance, or output $-1$ if DreamGrid cannot move all the stones under the constraints.\n\nYour answer will be considered correct if and only if the absolute error or relative error of your answer is less than $10^{-6}$.", "hint": "We now welcome our special guest Mashiro, who heartily donates this problem to our problemset, to explain the sample test cases for us using her sketch book.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wsxbrf43.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d2bpz78p.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nfhakntz.png)\n\n$\\textit{(Image from pixiv. ID: 32084305)}$\n\nIn the figures above, we indicate the start point as point $A$ and the target point as point $B$. The mirror is indicated by the line segment pointing from $M1$ to $M2$, with the right side being reflective.\n\nFor the first sample test case, the optimal path is $A \\to C \\to B \\to C \\to A \\to C \\to B$.\n\nFor the second sample test case, as DreamGrid cannot see $A$ from $B$, it's impossible to move all the two stones from $A$ to $B$ while following the constraints in the problem description.\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Mirror", "background": "", "description": "There is a non-transparent obstacle and a single-sided mirror in an infinite two-dimensional plane. The obstacle can be represented as a triangle and the mirror can be represented as a $\\textbf{directional}$ line segment pointing from $(x_{m,1}, y_{m,1})$ to $(x_{m,2}, y_{m,2})$, with the right side being reflective.\n\nThere are $m$ stones at point $(x_1,y_1)$ and DreamGrid would like to move all the stones to point $(x_2,y_2)$. The following constraints must be satisfied:\n\n- DreamGrid can only carry one stone each time.\n- Once DreamGrid picks up a stone, he can only put it down at point $(x_2,y_2)$.\n- Let $L$ be the path DreamGrid walked, then for each point $p$ on $L$, DreamGrid should see all the stones directly or through the mirror.\n\nNote that:\n\n- If some part of the line vision is inside the obstacle (it's ok that the line vision passes a point or edge of the obstacle), it's considered, that DreamGrid cannot see the stone with this line of vision.\n- If one of the two endpoints of the mirror is on the line of vision, it's considered, that DreamGrid can see the stone both in the mirror and through the mirror.\n- The reflection process is governed by laws of physics --- the angle of incidence is equal to the angle of reflection. The incident ray is in the same half-plane as the reflected ray, relative to the mirror.\n- If the line of vision is parallel to the mirror, reflection doesn't take place, and the mirror isn't regarded as an obstacle.\n- DreamGrid cannot move into the obstacle but can move on the edges or the vertices of the obstacle.\n- DreamGrid cannot move through the mirror but can move on the mirror. Note that if DreamGrid is on the line segment of the mirror other than the two endpoints, he can only see the side he comes from, and cannot see through the mirror.\n\nDreamGrid would like to know the shortest distance to move all stones from $(x_1,y_1)$ to $(x_2, y_2)$.", "inputFormat": "There are multiple test cases. The first line of input is an integer $T$ (about 100), indicates the number of test cases. For each test case:\n\nThe first line contains one integer $m$ ($1 \\le m \\le 10^6$), indicating the number of stones.\n\nThe second line contains four integers $x_1$, $y_1$, $x_2$ and $y_2$, indicating the start point and the target point.\n\nThe third line contains four integers $x_{m,1}$, $y_{m,1}$, $x_{m,2}$ and $y_{m,2}$, indicating the coordinates of the mirror.\n\nEach of the next $3$ lines has two integers $x_i$ and $y_i$, indicating the coordinates of the vertices of the obstacle.\n\nAll the coordinates will not exceed $100$ in absolute value. Both the start point and target point are outside the obstacle and the mirror. The mirror and the obstacle have no points in common.\n\nIt is guaranteed that no three points are collinear.", "outputFormat": "For each test case, output a real number indicating the shortest distance, or output $-1$ if DreamGrid cannot move all the stones under the constraints.\n\nYour answer will be considered correct if and only if the absolute error or relative error of your answer is less than $10^{-6}$.", "hint": "We now welcome our special guest Mashiro, who heartily donates this problem to our problemset, to explain the sample test cases for us using her sketch book.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wsxbrf43.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d2bpz78p.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nfhakntz.png)\n\n$\\textit{(Image from pixiv. ID: 32084305)}$\n\nIn the figures above, we indicate the start point as point $A$ and the target point as point $B$. The mirror is indicated by the line segment pointing from $M1$ to $M2$, with the right side being reflective.\n\nFor the first sample test case, the optimal path is $A \\to C \\to B \\to C \\to A \\to C \\to B$.\n\nFor the second sample test case, as DreamGrid cannot see $A$ from $B$, it's impossible to move all the two stones from $A$ to $B$ while following the constraints in the problem description.\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Mirror", "background": "", "description": "在一个无限二维平面上包含一个不透明障碍物和一个单面镜子。障碍物被表示为一个三角形，而镜子被表示为一个从点 $(x_{m,1}, y_{m,1})$ 指向 $(x_{m,2}, y_{m,2})$ 的有方向的线段，线段的右侧是反射面。\n\n有 $m$ 个石头位于点 $(x_1,y_1)$，DreamGrid 希望将所有石头移动到点 $(x_2,y_2)$。需要满足以下条件：\n\nDreamGrid 每次只能携带一个石头。\n一旦 DreamGrid 拿起一个石头，他只能将其放置在点 $(x_2,y_2)$。\n\n设 $L$ 为 DreamGrid 走过的路径，对于路径上的每一个点 $p$，DreamGrid 必须能直接或通过镜子看到所有的石头。\n\n**注意：**\n\n如果视线的某部分在障碍物内（视线穿过障碍物的点或边界是允许的），则认为 DreamGrid 无法通过这条视线看到石头。\n\n如果镜子的一个端点在视线上，认为 DreamGrid 既可以在镜子中看到石头，也可以透过镜子看到石头。\n\n反射过程遵循物理规律：入射角等于反射角。入射光线和反射光线在镜子的同一侧。\n\n如果视线与镜子平行，则不发生反射，镜子不被视为障碍物。\nDreamGrid 不能移动进入障碍物，但可以在障碍物的边缘或顶点上移动。\n\nDreamGrid 不能穿过镜子移动，但可以在镜子上移动。注意，如果 DreamGrid 在镜子的线段上（不包括两个端点），他只能看到他来的那一侧，并且不能透过镜子看到。\nDreamGrid 想要知道移动所有石头从 $(x_1,y_1)$ 到 $(x_2, y_2)$ 的最短距离。", "inputFormat": "输入包括多个测试用例。第一行是一个整数 $T$（大约 100），表示测试用例的数量。对于每个测试用例：\n\n第一行包含一个整数 $m$（$1 \\le m \\le 10^6$），表示石头的数量。\n\n第二行包含四个整数 $x_1$, $y_1$, $x_2$ 和 $y_2$，表示起始点和目标点。\n\n第三行包含四个整数 $x_{m,1}$, $y_{m,1}$, $x_{m,2}$ 和 $y_{m,2}$，表示镜子的坐标。\n\n接下来的 $3$ 行，每行包含两个整数 $x_i$ 和 $y_i$，表示障碍物顶点的坐标。\n\n所有坐标的绝对值不超过 $100$。起始点和目标点都在障碍物和镜子之外。镜子和障碍物没有公共点。\n\n保证没有三个点是共线的。", "outputFormat": "输出对于每个测试用例，输出一个实数表示最短距离，如果 DreamGrid 无法在约束条件下移动所有石头，则输出 $-1$。\n\n如果你的答案的绝对误差或相对误差小于 $10^{-6}$，则认为你的答案是正确的。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9893", "type": "P", "difficulty": 6, "samples": [["3\n5\n-1 4 2 1 1\n4\n1 3 2 4\n1\n7", "1\n2\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "线段树", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Soldier Game", "background": "", "description": "DreamGrid and BaoBao are playing a game.  There are $n$ soldiers in the game, numbered from $1$ to $n$. The $i$-th soldier has a power value of $a_i$. DreamGrid and BaoBao are going to divide the soldiers into several teams according to the rules below:\n\n- A team must consist of 1 or 2 soldiers.\n- Every soldier must belong to exactly 1 team.\n- If a team consists of two soldiers (let's say they are the $i$-th and the $j$-th soldier), there must be $|i - j| = 1$.\n\nThe power value of a team is defined as the sum of the team members' power values. For the sake of fairness, they want to minimize the difference between the maximum team power value and the minimum team power value after the division. You are asked to find the minimum difference.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$), indicating the number of soldiers.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($-10^9 \\le a_i \\le 10^9$), where $a_i$ indicates the power value of the $i$-th soldier.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the minimum difference between the maximum team power value and the minimum team power value.\n", "hint": "We now explain the first sample test case. All possible divisions are listed below.\n\n| Division | Difference | Division | Difference |\n| :-: | :-: | :-: | :-:|\n|[-1], [4], [2], [1], [1] | 4 - (-1) = 5| [-1, 4], [2], [1], [1] | 3 - 1 = 2 |\n| [-1], [4], [2], [1, 1] | 4 - (-1) = 5 | [-1], [4, 2], [1, 1] | 6 - (-1) = 7 |\n| [-1], [4], [2, 1], [1] | 4 - (-1) = 5 |  [-1, 4], [2], [1, 1] | 3 - 2 = 1 |\n| [-1], [4, 2], [1], [1] | 6 - (-1) = 7 | [-1, 4], [2, 1], [1] | 3 - 1 = 2 |\n\n\nSo the answer is $\\min(5, 5, 5, 7, 2, 7, 1, 2) = 1$.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Soldier Game", "background": "", "description": "DreamGrid and BaoBao are playing a game.  There are $n$ soldiers in the game, numbered from $1$ to $n$. The $i$-th soldier has a power value of $a_i$. DreamGrid and BaoBao are going to divide the soldiers into several teams according to the rules below:\n\n- A team must consist of 1 or 2 soldiers.\n- Every soldier must belong to exactly 1 team.\n- If a team consists of two soldiers (let's say they are the $i$-th and the $j$-th soldier), there must be $|i - j| = 1$.\n\nThe power value of a team is defined as the sum of the team members' power values. For the sake of fairness, they want to minimize the difference between the maximum team power value and the minimum team power value after the division. You are asked to find the minimum difference.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$), indicating the number of soldiers.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($-10^9 \\le a_i \\le 10^9$), where $a_i$ indicates the power value of the $i$-th soldier.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the minimum difference between the maximum team power value and the minimum team power value.\n", "hint": "We now explain the first sample test case. All possible divisions are listed below.\n\n| Division | Difference | Division | Difference |\n| :-: | :-: | :-: | :-:|\n|[-1], [4], [2], [1], [1] | 4 - (-1) = 5| [-1, 4], [2], [1], [1] | 3 - 1 = 2 |\n| [-1], [4], [2], [1, 1] | 4 - (-1) = 5 | [-1], [4, 2], [1, 1] | 6 - (-1) = 7 |\n| [-1], [4], [2, 1], [1] | 4 - (-1) = 5 |  [-1, 4], [2], [1, 1] | 3 - 2 = 1 |\n| [-1], [4, 2], [1], [1] | 6 - (-1) = 7 | [-1, 4], [2, 1], [1] | 3 - 1 = 2 |\n\n\nSo the answer is $\\min(5, 5, 5, 7, 2, 7, 1, 2) = 1$.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Soldier Game", "background": "", "description": "DreamGrid 和 BaoBao 正在玩一个游戏。游戏中有 $n$ 名士兵，编号从 $1$ 到 $n$。第 $i$ 个士兵的战斗力为 $a_i$。DreamGrid 和 BaoBao 将根据以下规则把士兵分成若干个队伍：\n\n- 一个队伍必须由 1 或 2 名士兵组成。\n- 每个士兵必须属于且仅属于一个队伍。\n- 如果一个队伍由两名士兵组成（假设他们是第 $i$ 个和第 $j$ 个士兵），则必须满足 $|i - j| = 1$。\n\n一个队伍的战斗力定义为队伍成员的战斗力之和。为了公平起见，他们希望在分组后最大队伍战斗力与最小队伍战斗力之间的差值最小化。你需要找出这个最小的差值。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含一个整数 $n$ ($1 \\le n \\le 10^5$)，表示士兵的数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($-10^9 \\le a_i \\le 10^9$)，其中 $a_i$ 表示第 $i$ 个士兵的战斗力。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例输出一行，包含一个整数，表示最大队伍战斗力与最小队伍战斗力之间的最小差值。", "hint": "我们现在解释第一个样例测试用例。所有可能的分组如下所示。\n\n| 分组 | 差值 | 分组 | 差值 |\n| :-: | :-: | :-: | :-:|\n|[-1], [4], [2], [1], [1] | 4 - (-1) = 5| [-1, 4], [2], [1], [1] | 3 - 1 = 2 |\n| [-1], [4], [2], [1, 1] | 4 - (-1) = 5 | [-1], [4, 2], [1, 1] | 6 - (-1) = 7 |\n| [-1], [4], [2, 1], [1] | 4 - (-1) = 5 |  [-1, 4], [2], [1, 1] | 3 - 2 = 1 |\n| [-1], [4, 2], [1], [1] | 6 - (-1) = 7 | [-1, 4], [2, 1], [1] | 3 - 1 = 2 |\n\n所以答案是 $\\min(5, 5, 5, 7, 2, 7, 1, 2) = 1$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9894", "type": "P", "difficulty": 3, "samples": [["4\n4 2\n1 2 4 8\n4 0\n100 99 98 97\n2 2\n10000 10000\n5 3\n0 0 0 0 1", "6\n96\nRichman\nImpossible"]], "limits": {"time": [1000, 1000, 1000], "memory": [262144, 262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Books", "background": "", "description": "DreamGrid went to the bookshop yesterday. There are $n$ books in the bookshop in total. Because DreamGrid is very rich, he bought the books according to the strategy below:\n\n- Check the $n$ books from the 1st one to the $n$-th one **in order**.\n- For each book being checked now, if DreamGrid has enough money (not less than the book price), he'll buy the book and his money will be reduced by the price of the book.\n- In case that his money is less than the price of the book being checked now, he will skip that book.\n\n\nBaoBao is curious about how rich DreamGrid is. You are asked to tell him the maximum possible amount of money DreamGrid took before buying the books, which is a non-negative integer. All he knows are the prices of the $n$ books and the number of books DreamGrid bought in total,  indicated  by $m$. \n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $0 \\le m \\le n$), indicating the number of books in the bookshop and the number of books DreamGrid bought in total.\n\nThe second line contains $n$ non-negative integers $a_1, a_2, ... , a_n$ ($0 \\le a_i \\le 10^9$), where $a_i$ indicates the price of the $i$-th book checked by DreamGrid.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line.\n\nIf it's impossible to buy $m$ books for any initial number of money, output ``Impossible'' (without quotes).\n\nIf DreamGrid may take an infinite amount of money, output ``Richman'' (without quotes).\n\nIn other cases, output a non-negative integer, indicating the maximum number of money he may take.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Books", "background": "", "description": "DreamGrid went to the bookshop yesterday. There are $n$ books in the bookshop in total. Because DreamGrid is very rich, he bought the books according to the strategy below:\n\n- Check the $n$ books from the 1st one to the $n$-th one **in order**.\n- For each book being checked now, if DreamGrid has enough money (not less than the book price), he'll buy the book and his money will be reduced by the price of the book.\n- In case that his money is less than the price of the book being checked now, he will skip that book.\n\n\nBaoBao is curious about how rich DreamGrid is. You are asked to tell him the maximum possible amount of money DreamGrid took before buying the books, which is a non-negative integer. All he knows are the prices of the $n$ books and the number of books DreamGrid bought in total,  indicated  by $m$. \n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $0 \\le m \\le n$), indicating the number of books in the bookshop and the number of books DreamGrid bought in total.\n\nThe second line contains $n$ non-negative integers $a_1, a_2, ... , a_n$ ($0 \\le a_i \\le 10^9$), where $a_i$ indicates the price of the $i$-th book checked by DreamGrid.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line.\n\nIf it's impossible to buy $m$ books for any initial number of money, output ``Impossible'' (without quotes).\n\nIf DreamGrid may take an infinite amount of money, output ``Richman'' (without quotes).\n\nIn other cases, output a non-negative integer, indicating the maximum number of money he may take.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Books", "background": "", "description": "DreamGrid 昨天去了书店。书店里总共有 $n$ 本书。因为 DreamGrid 非常富有，他按照以下策略购买书籍：\n\n- 按顺序从第 1 本书到第 $n$ 本书检查这 $n$ 本书。\n- 对于当前检查的每本书，如果 DreamGrid 有足够的钱（不少于书的价格），他就会买下这本书，他的钱会减少书的价格。\n- 如果他的钱少于当前检查的书的价格，他将跳过这本书。\n\nBaoBao 对 DreamGrid 的财富感到好奇。你需要告诉他 DreamGrid 在买书前可能带的最大金额，这个金额是一个非负整数。他所知道的只有 $n$ 本书的价格和 DreamGrid 总共买了多少本书，用 $m$ 表示。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$ ($1 \\le n \\le 10^5$, $0 \\le m \\le n$)，表示书店中的书的数量和 DreamGrid 总共买的书的数量。\n\n第二行包含 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$ ($0 \\le a_i \\le 10^9$)，其中 $a_i$ 表示 DreamGrid 检查的第 $i$ 本书的价格。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例输出一行。\n\n如果对于任何初始金额都不可能买到 $m$ 本书，输出 “Impossible”（不带引号）。\n\n如果 DreamGrid 可能带无限多的钱，输出 “Richman”（不带引号）。\n\n在其他情况下，输出一个非负整数，表示他可能带的最大金额。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9895", "type": "P", "difficulty": 6, "samples": [["3\n3 2\n1 2\n2 1\n3 5\n3 3\n2 1\n2 5\n4 3\n2 3\n1 3\n4 3", "1 3\n0 3\n2 2"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Airdrop", "background": "", "description": "PUBG is a multiplayer online battle royale video game. In the game, up to one hundred players parachute onto an island and scavenge for weapons and equipment to kill others while avoiding getting killed themselves. Airdrop in this game is a key element, as airdrops often carry with them strong weapons or numerous supplies, helping players to survive.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qv9hzuoe.png)\ntextit{Airdrop in the game(?)\n\nConsider the battle field of the game to be a two-dimensional plane. An airdrop has just landed at point $(x_0, y_0)$ (both $x_0$ and $y_0$ are integers), and all the $n$ players on the battle field, where $(x_i, y_i)$ (both $x_i$ and $y_i$ are integers) indicates the initial position of the $i$-th player, start moving towards the airdrop with the following pattern:\n\n\n- If the position of a living player at the beginning of this time unit is not equal to $(x_0, y_0)$, he will begin his next move.\n- + Let's say he is currently at point $(x, y)$. For his next move, he will consider four points $(x, y - 1)$, $(x, y + 1)$, $(x - 1, y)$ and $(x + 1, y)$.\n- + He will select one of the four points whose Manhattan distance to the airdrop $(x_0, y_0)$ is the smallest to be the destination of his next move. Recall that the Manhattan distance between two points $(x_a, y_a)$ and $(x_b, y_b)$ is defined as $|x_a - x_b| + |y_a - y_b|$.\n- + If two or more points whose Manhattan distance to the airdrop is the same, he will use the following priority rule to break the tie: $(x, y - 1)$ has the highest priority to be selected, $(x, y + 1)$ has the second highest priority, $(x - 1, y)$ has the third highest priority, and $(x + 1, y)$ has the lowest priority.\n- + At the end of this time unit, he arrives at his destination.\n- If the position of a living player at the beginning of this time unit is equal to $(x_0, y_0)$, he will continue to fatten his backpack with the supplies in the airdrop and stays at $(x_0, y_0)$.\n\n\nBut the battle is tough and it's almost impossible for all the players to arrive at the airdrop safely. If two or more players meet at point $(x', y')$ other than $(x_0, y_0)$, where both $x'$ and $y'$ are integers, they will fight and kill each other and none of them survive.\n\nBaoBao is a big fan of the game and is interested in the number of players successfully arriving at the position of the airdrop, but he doesn't know the value of $x_0$. Given the value of $y_0$ and the initial position of each player, please help BaoBao calculate the minimum and maximum possible number of players successfully arriving at the position of the airdrop for all $x_0 \\in \\mathbb{Z}$, where $\\mathbb{Z}$ is the set of all integers (note that $x_0$ can be positive, zero or negative).\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $y_0$ ($1 \\le n \\le 10^5$, $1 \\le y_0 \\le 10^5$), indicating the number of players and the $y$ value of the airdrop.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \\le x_i, y_i \\le 10^5$), indicating the initial position of the $i$-th player.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$, and in each test case no two players share the same initial position.\n", "outputFormat": "For each test case output one line containing two integers $p_\\text{min}$ and $p_\\text{max}$ separated by one space. $p_\\text{min}$ indicates the minimum possible number of players successfully arriving at the position of the airdrop, while $p_\\text{max}$ indicates the maximum possible number.\n", "hint": "We now explain the first sample test case.\n\nTo obtain the answer of $p_\\text{min} = 1$, one should consider $x_0 = 3$. The following table shows the position of each player at the end of each time unit when $x_0 = 3$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itsnfe48.png)\n\nTo obtain the answer of $p_\\text{max} = 3$, one should consider $x_0 = 2$. The following table shows the position of each player at the end of each time unit when $x_0 = 2$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hvseoyfc.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Airdrop", "background": "", "description": "PUBG is a multiplayer online battle royale video game. In the game, up to one hundred players parachute onto an island and scavenge for weapons and equipment to kill others while avoiding getting killed themselves. Airdrop in this game is a key element, as airdrops often carry with them strong weapons or numerous supplies, helping players to survive.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qv9hzuoe.png)\ntextit{Airdrop in the game(?)\n\nConsider the battle field of the game to be a two-dimensional plane. An airdrop has just landed at point $(x_0, y_0)$ (both $x_0$ and $y_0$ are integers), and all the $n$ players on the battle field, where $(x_i, y_i)$ (both $x_i$ and $y_i$ are integers) indicates the initial position of the $i$-th player, start moving towards the airdrop with the following pattern:\n\n\n- If the position of a living player at the beginning of this time unit is not equal to $(x_0, y_0)$, he will begin his next move.\n- + Let's say he is currently at point $(x, y)$. For his next move, he will consider four points $(x, y - 1)$, $(x, y + 1)$, $(x - 1, y)$ and $(x + 1, y)$.\n- + He will select one of the four points whose Manhattan distance to the airdrop $(x_0, y_0)$ is the smallest to be the destination of his next move. Recall that the Manhattan distance between two points $(x_a, y_a)$ and $(x_b, y_b)$ is defined as $|x_a - x_b| + |y_a - y_b|$.\n- + If two or more points whose Manhattan distance to the airdrop is the same, he will use the following priority rule to break the tie: $(x, y - 1)$ has the highest priority to be selected, $(x, y + 1)$ has the second highest priority, $(x - 1, y)$ has the third highest priority, and $(x + 1, y)$ has the lowest priority.\n- + At the end of this time unit, he arrives at his destination.\n- If the position of a living player at the beginning of this time unit is equal to $(x_0, y_0)$, he will continue to fatten his backpack with the supplies in the airdrop and stays at $(x_0, y_0)$.\n\n\nBut the battle is tough and it's almost impossible for all the players to arrive at the airdrop safely. If two or more players meet at point $(x', y')$ other than $(x_0, y_0)$, where both $x'$ and $y'$ are integers, they will fight and kill each other and none of them survive.\n\nBaoBao is a big fan of the game and is interested in the number of players successfully arriving at the position of the airdrop, but he doesn't know the value of $x_0$. Given the value of $y_0$ and the initial position of each player, please help BaoBao calculate the minimum and maximum possible number of players successfully arriving at the position of the airdrop for all $x_0 \\in \\mathbb{Z}$, where $\\mathbb{Z}$ is the set of all integers (note that $x_0$ can be positive, zero or negative).\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $y_0$ ($1 \\le n \\le 10^5$, $1 \\le y_0 \\le 10^5$), indicating the number of players and the $y$ value of the airdrop.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \\le x_i, y_i \\le 10^5$), indicating the initial position of the $i$-th player.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$, and in each test case no two players share the same initial position.\n", "outputFormat": "For each test case output one line containing two integers $p_\\text{min}$ and $p_\\text{max}$ separated by one space. $p_\\text{min}$ indicates the minimum possible number of players successfully arriving at the position of the airdrop, while $p_\\text{max}$ indicates the maximum possible number.\n", "hint": "We now explain the first sample test case.\n\nTo obtain the answer of $p_\\text{min} = 1$, one should consider $x_0 = 3$. The following table shows the position of each player at the end of each time unit when $x_0 = 3$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itsnfe48.png)\n\nTo obtain the answer of $p_\\text{max} = 3$, one should consider $x_0 = 2$. The following table shows the position of each player at the end of each time unit when $x_0 = 2$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hvseoyfc.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Airdrop", "background": "", "description": "PUBG 是一款多人在线大逃杀视频游戏。在游戏中，最多一百名玩家跳伞到一个岛上，搜寻武器和装备以击杀其他玩家，同时避免自己被击杀。空投是游戏中的一个关键元素，因为空投通常携带强大的武器或大量补给，帮助玩家生存。\n\n考虑游戏的战场是一个二维平面。一个空投刚刚降落在点 $(x_0, y_0)$（$x_0$ 和 $y_0$ 都是整数），战场上的所有 $n$ 名玩家，其中 $(x_i, y_i)$（$x_i$ 和 $y_i$ 都是整数）表示第 $i$ 名玩家的初始位置，开始以以下模式向空投移动：\n\n- 如果一个活着的玩家在这个时间单位开始时的位置不等于 $(x_0, y_0)$，他将开始他的下一步移动。\n- + 假设他当前在点 $(x, y)$。对于他的下一步移动，他将考虑四个点 $(x, y - 1)$、$(x, y + 1)$、$(x - 1, y)$ 和 $(x + 1, y)$。\n- + 他将选择其中一个到空投 $(x_0, y_0)$ 的曼哈顿距离最小的点作为他下一步的目的地。回忆一下，两点 $(x_a, y_a)$ 和 $(x_b, y_b)$ 之间的曼哈顿距离定义为 $|x_a - x_b| + |y_a - y_b|$。\n- + 如果两个或更多点到空投的曼哈顿距离相同，他将使用以下优先级规则来打破平局：$(x, y - 1)$ 优先级最高，$(x, y + 1)$ 优先级第二，$(x - 1, y)$ 优先级第三，$(x + 1, y)$ 优先级最低。\n- + 在这个时间单位结束时，他到达他的目的地。\n- 如果一个活着的玩家在这个时间单位开始时的位置等于 $(x_0, y_0)$，他将继续用空投中的补给填满他的背包，并停留在 $(x_0, y_0)$。\n\n但战斗很激烈，几乎不可能所有玩家都安全到达空投。如果两个或更多玩家在点 $(x', y')$ 相遇，且 $(x', y')$ 不是 $(x_0, y_0)$，他们将互相搏斗并全部阵亡，没有人存活。\n\nBaoBao 是该游戏的忠实粉丝，对成功到达空投位置的玩家数量感兴趣，但他不知道 $x_0$ 的值。给定 $y_0$ 的值和每个玩家的初始位置，请帮助 BaoBao 计算对于所有 $x_0 \\in \\mathbb{Z}$（$\\mathbb{Z}$ 是所有整数的集合，注意 $x_0$ 可以是正数、零或负数），成功到达空投位置的玩家数量的最小值和最大值。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $y_0$（$1 \\le n \\le 10^5$，$1 \\le y_0 \\le 10^5$），表示玩家的数量和空投的 $y$ 值。\n\n接下来的 $n$ 行中，第 $i$ 行包含两个整数 $x_i$ 和 $y_i$（$1 \\le x_i, y_i \\le 10^5$），表示第 $i$ 名玩家的初始位置。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$，并且在每个测试用例中没有两个玩家共享相同的初始位置。", "outputFormat": "对于每个测试用例输出一行，包含两个整数 $p_\\text{min}$ 和 $p_\\text{max}$，用一个空格分隔。$p_\\text{min}$ 表示成功到达空投位置的玩家数量的最小可能值，而 $p_\\text{max}$ 表示最大可能值。", "hint": "我们现在解释第一个样例测试用例。\n\n为了得到 $p_\\text{min} = 1$ 的答案，应该考虑 $x_0 = 3$。下表显示了当 $x_0 = 3$ 时每个玩家在每个时间单位结束时的位置。\n\n为了得到 $p_\\text{max} = 3$ 的答案，应该考虑 $x_0 = 2$。下表显示了当 $x_0 = 2$ 时每个玩家在每个时间单位结束时的位置。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9896", "type": "P", "difficulty": 6, "samples": [["3\n4 2\n4 3\n5 3", "15\n12\n90"]], "limits": {"time": [2000, 2000], "memory": [524288, 524288]}, "tags": ["图论", "2018", "O2优化", "组合数学", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R]  Sub-cycle Graph", "background": "", "description": "Given an undirected simple graph with $n$ ($n \\ge 3$) vertices and $m$ edges where the vertices are numbered from 1 to $n$, we call it a ``sub-cycle`` graph if it's possible to add a non-negative number of edges to it and turn the graph into exactly one simple cycle of $n$ vertices.\n\nGiven two integers $n$ and $m$, your task is to calculate the number of different sub-cycle graphs with $n$ vertices and $m$ edges. As the answer may be quite large, please output the answer modulo $10^9+7$.\n\nRecall that\n\n- A simple graph is a graph with no self loops or multiple edges;\n- A simple cycle of $n$ ($n \\ge 3$) vertices is a connected undirected simple graph with $n$ vertices and $n$ edges, where the degree of each vertex equals to 2;\n- Two undirected simple graphs with $n$ vertices and $m$ edges are different, if they have different sets of edges;\n- Let $u < v$, we denote $(u, v)$ as an undirected edge connecting vertices $u$ and $v$. Two undirected edges $(u_1, v_1)$ and $(u_2, v_2)$ are different, if $u_1 \\ne u_2$ or $v_1 \\ne v_2$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $2 \\times 10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $m$ ($3 \\le n \\le 10^5$, $0 \\le m \\le \\frac{n(n-1)}{2}$), indicating the number of vertices and the number of edges in the graph.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $3 \\times 10^7$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the number of different sub-cycle graphs with $n$ vertices and $m$ edges modulo $10^9+7$.\n", "hint": "The 12 sub-cycle graphs of the second sample test case are illustrated below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/636hie1e.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R]  Sub-cycle Graph", "background": "", "description": "Given an undirected simple graph with $n$ ($n \\ge 3$) vertices and $m$ edges where the vertices are numbered from 1 to $n$, we call it a ``sub-cycle`` graph if it's possible to add a non-negative number of edges to it and turn the graph into exactly one simple cycle of $n$ vertices.\n\nGiven two integers $n$ and $m$, your task is to calculate the number of different sub-cycle graphs with $n$ vertices and $m$ edges. As the answer may be quite large, please output the answer modulo $10^9+7$.\n\nRecall that\n\n- A simple graph is a graph with no self loops or multiple edges;\n- A simple cycle of $n$ ($n \\ge 3$) vertices is a connected undirected simple graph with $n$ vertices and $n$ edges, where the degree of each vertex equals to 2;\n- Two undirected simple graphs with $n$ vertices and $m$ edges are different, if they have different sets of edges;\n- Let $u < v$, we denote $(u, v)$ as an undirected edge connecting vertices $u$ and $v$. Two undirected edges $(u_1, v_1)$ and $(u_2, v_2)$ are different, if $u_1 \\ne u_2$ or $v_1 \\ne v_2$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $2 \\times 10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $m$ ($3 \\le n \\le 10^5$, $0 \\le m \\le \\frac{n(n-1)}{2}$), indicating the number of vertices and the number of edges in the graph.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $3 \\times 10^7$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the number of different sub-cycle graphs with $n$ vertices and $m$ edges modulo $10^9+7$.\n", "hint": "The 12 sub-cycle graphs of the second sample test case are illustrated below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/636hie1e.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R]  Sub-cycle Graph", "background": "", "description": "对于一个有 $n(n\\ge3)$ 个点和 $m$ 条边的无向简单图，其中点的编号为 $1$ 到 $n$。如果加非负整数条边能使这个图是变为 $n$ 个点的简单环，我们称这个是一个 “半环” 图。\n\n给定两个整数 $n$ 和 $m$，你的任务是计算有多少个**不同的** $n$ 个点，$m$ 条边的 “半环” 图。考虑到答案会很大，请将答案模 $10^{9} + 7$ 的结果输出。\n\n定义\n\n- 一个简单图是指一个没有自环和重边的图；\n- $n$ 个点的 “简单环” 是指任意一个有 $n$ 个点和 $n$ 条边的无向简单连通图，其中所有点的度均为 $2$；\n- 如果两个有着 $n$ 个点和 $m$ 条边的无向简单图是不同的，那么它们具有着不同的边集；\n- 现在有两个点 $u$ 和 $v(u < v)$，记 $(u,v)$ 表示连接 $u,v$ 两点的无向边。两条无向边 $(u_1,v_1)$ 和 $(u_2,v_2)$ 如果是不同的，那么 $u_1\\ne u_2$ 或 $v_1\\ne v_2$。", "inputFormat": "此题有多组数据。\n\n第一行有一个整数 $T$（约为 $2\\times 10^{4}$），指测试用例的数量。对于每组数据：\n\n一组数据只有一行，两个整数 $n$ 和 $m$（$3 \\le n \\le 10^{5}$，$0\\le m \\le \\frac{n(n-1)}{2}$），表示图的点数和边数。\n\n$n$ 的总和不超过 $3\\times 10^{7}$。", "outputFormat": "对于每组数据，你只需要输出一行表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9897", "type": "P", "difficulty": 2, "samples": [["6\n123456789 1\n888888888 1\n888888888 2\n888888888 999999999\n98640 12345\n1000000000 0", "5\n18\n2\n0\n0\n1000000000"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Function and Function", "background": "", "description": "If we define $f(0) = 1, f(1) = 0, f(4) = 1, f(8) = 2, f(16) = 1, \\dots$, do you know what function $f$ means?\n\nActually, $f(x)$ calculates the total number of enclosed areas produced by each digit in $x$. The following table shows the number of enclosed areas produced by each digit:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdv14tzu.png)\n\nFor example, $f(1234) = 0 + 0 + 0 + 1 = 1$, and $f(5678) = 0 + 1 + 0 + 2 = 3$.\n\nWe now define a recursive function $g$ by the following equations: \n\n$$\\begin{cases} g^0(x) = x \\\\ g^k(x) = f(g^{k-1}(x)) & \\text{if } k \\ge 1 \\end{cases}$$\n\nFor example, $g^2(1234) = f(f(1234)) = f(1) = 0$, and $g^2(5678) = f(f(5678)) = f(3) = 0$.\n\nGiven two integers $x$ and $k$, please calculate the value of $g^k(x)$.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^5$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $x$ and $k$ ($0 \\le x, k \\le 10^9$). Positive integers are given without leading zeros, and zero is given with exactly one `0'.\n", "outputFormat": "For each test case output one line containing one integer, indicating the value of $g^k(x)$.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/fjjr5xin.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Function and Function", "background": "", "description": "If we define $f(0) = 1, f(1) = 0, f(4) = 1, f(8) = 2, f(16) = 1, \\dots$, do you know what function $f$ means?\n\nActually, $f(x)$ calculates the total number of enclosed areas produced by each digit in $x$. The following table shows the number of enclosed areas produced by each digit:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdv14tzu.png)\n\nFor example, $f(1234) = 0 + 0 + 0 + 1 = 1$, and $f(5678) = 0 + 1 + 0 + 2 = 3$.\n\nWe now define a recursive function $g$ by the following equations: \n\n$$\\begin{cases} g^0(x) = x \\\\ g^k(x) = f(g^{k-1}(x)) & \\text{if } k \\ge 1 \\end{cases}$$\n\nFor example, $g^2(1234) = f(f(1234)) = f(1) = 0$, and $g^2(5678) = f(f(5678)) = f(3) = 0$.\n\nGiven two integers $x$ and $k$, please calculate the value of $g^k(x)$.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^5$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $x$ and $k$ ($0 \\le x, k \\le 10^9$). Positive integers are given without leading zeros, and zero is given with exactly one `0'.\n", "outputFormat": "For each test case output one line containing one integer, indicating the value of $g^k(x)$.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/fjjr5xin.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Function and Function", "background": "", "description": "如果我们定义 $f(0) = 1$，$f(1) = 0$，$f(4) = 1$，$f(8) = 2$，$f(16) = 1$ …… 你知道函数 $f$ 意味着什么吗？\n\n其实，$f(x)$ 计算的是 $x$ 中每个数字所产生的封闭区域的总数。下表显示了每个数字产生的封闭区域数：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdv14tzu.png)\n\n例如，$f(1234) = 0 + 0 + 0 + 1 = 1$，$f(5678) = 0 + 1 + 0 + 2 = 3$。\n\n现在，我们用以下等式定义递归函数 $g$： \n\n$$\\begin{cases} g^0(x) = x \\\\ g^k(x) = f(g^{k-1}(x)) & \\text{if } k \\ge 1 \\end{cases}$$\n\n例如，$g^2(1234) = f(f(1234)) = f(1) = 0$，$g^2(5678) = f(f(5678)) = f(3) = 0$。\n\n给定两个整数 $x$ 和 $k$，请计算 $g^k(x)$ 的值。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$（大约 $10 ^ 5$），表示测试用例的数量。\n之后的每行包含两个整数 $x$ 和 $k$（$0 \\le x, k \\le 10^9$）。正整数不带前导零，零则正好是一个 \"0\"。", "outputFormat": "对每个测试用例输出一行，其中包含一个整数，表示 $g^k(x)$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9898", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "交互题", "Special Judge"], "title": "『PG2』猪棋", "background": "交互库绝顶聪明。", "description": "猪棋的规则：\n\n在一个 $1000\\times 1000$ 的棋盘上，两人分别执黑棋白棋轮流执子，每次可以在当前没有子的不同位置将两颗子分别放下（有序），如果一颗子放下时出现有 $(x,y),(x+1,y),(x,y+1),(x+1,y+1)$ 的四个位置棋子颜色均相同则执此颜色者获胜。\n\n你将扮演先手，在 $100$ 步内战胜交互库扮演的后手，保证有解。\n\n对于每轮，你可以选择两个坐标 $(x_1,y_1)$ 与 $(x_2,y_2)$ 落子，你首先需要保证 $1\\leq x_1,y_1,x_2,y_2\\leq 1000$，你其次需要保证没人曾在 $(x_1,y_1)$ 落子，如果此时你获胜了判定结束且你获胜，否则你还需保证没人曾经在 $(x_2,y_2)$ 落子,如果此时你获胜了判定结束且你获胜，否则交互库将返回一组 $x_1,y_1,x_2,y_2$ 表示他在 $(x_1,y_1),(x_2,y_2)$ 落子，保证 $(x_1,y_1)\\neq (x_2,y_2),1\\leq x_1,y_1,x_2,y_2\\leq 1000$，如果此时交互库获胜判定结束且你输了,否则判定棋盘上是否已经有 $400$ 颗子，如果是你获得平局，否则进入你的新一轮。\n", "inputFormat": "你每轮结束后从**标准输入**中输入四个整数，代表评测机返回的结果。", "outputFormat": "每轮开始时，你需要向**标准输出**输出四个 $[1,1000]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n\n", "hint": "共 $5$ 个测试点，在测试点中如果你获胜且每步都满足 $6\\leq x,y\\leq 994$ 你将获得 $100$ 分，否则获胜你将获得 $50$ 分，你输了将获得 $0$ 分，平局获得 $30$ 分，总分数取测试点最小值。\n\n本题输入输出参考 $0$ 分程序：\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint n;\nint x,y,xx,yy;\n\n\nsigned main()\n{\n    int i,j,k;\n    n=100;\n    while(n--)\n    {\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cin>>x>>y>>xx>>yy;\n    }\n    return 0;\n}\n```\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』猪棋", "background": "交互库绝顶聪明。", "description": "猪棋的规则：\n\n在一个 $1000\\times 1000$ 的棋盘上，两人分别执黑棋白棋轮流执子，每次可以在当前没有子的不同位置将两颗子分别放下（有序），如果一颗子放下时出现有 $(x,y),(x+1,y),(x,y+1),(x+1,y+1)$ 的四个位置棋子颜色均相同则执此颜色者获胜。\n\n你将扮演先手，在 $100$ 步内战胜交互库扮演的后手，保证有解。\n\n对于每轮，你可以选择两个坐标 $(x_1,y_1)$ 与 $(x_2,y_2)$ 落子，你首先需要保证 $1\\leq x_1,y_1,x_2,y_2\\leq 1000$，你其次需要保证没人曾在 $(x_1,y_1)$ 落子，如果此时你获胜了判定结束且你获胜，否则你还需保证没人曾经在 $(x_2,y_2)$ 落子,如果此时你获胜了判定结束且你获胜，否则交互库将返回一组 $x_1,y_1,x_2,y_2$ 表示他在 $(x_1,y_1),(x_2,y_2)$ 落子，保证 $(x_1,y_1)\\neq (x_2,y_2),1\\leq x_1,y_1,x_2,y_2\\leq 1000$，如果此时交互库获胜判定结束且你输了,否则判定棋盘上是否已经有 $400$ 颗子，如果是你获得平局，否则进入你的新一轮。\n", "inputFormat": "你每轮结束后从**标准输入**中输入四个整数，代表评测机返回的结果。", "outputFormat": "每轮开始时，你需要向**标准输出**输出四个 $[1,1000]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n\n", "hint": "共 $5$ 个测试点，在测试点中如果你获胜且每步都满足 $6\\leq x,y\\leq 994$ 你将获得 $100$ 分，否则获胜你将获得 $50$ 分，你输了将获得 $0$ 分，平局获得 $30$ 分，总分数取测试点最小值。\n\n本题输入输出参考 $0$ 分程序：\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint n;\nint x,y,xx,yy;\n\n\nsigned main()\n{\n    int i,j,k;\n    n=100;\n    while(n--)\n    {\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cin>>x>>y>>xx>>yy;\n    }\n    return 0;\n}\n```\n", "locale": "zh-CN"}}}
{"pid": "P9899", "type": "P", "difficulty": 3, "samples": [["3\n0 1 0\n1 0 1", "4"], ["6\n1 0 1 0 0 1\n1 1 0 1 0 1", "5"], ["10\n0 0 1 1 1 1 1 1 0 0 \n0 1 1 0 1 0 0 0 0 1 \n", "5"], ["10\n0 1 0 1 0 1 0 1 0 1\n1 0 1 0 1 0 1 0 1 0", "11"], ["10\n1 0 1 1 1 0 0 1 0 1\n0 0 0 1 0 1 0 1 1 0", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心"], "title": "『PG2』消除萝卜 A", "background": "", "description": "有 $2\\times n$ 的两行萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $j$ 行第 $i$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第二行的萝卜如果其对应的第一行的位置没有萝卜，就会掉落至第一行。\n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示每行有多少个萝卜。\n\n第二行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,2}$。\n\n第三行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,1}$。", "outputFormat": "一行一个整数表示你的答案。", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$。\n\n**本题使用捆绑测试**\n\n$\\sf subtask \\ 1: n\\leq1 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 10pts$   \n$\\sf subtask \\ 2: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 20pts $   \n$\\sf subtask \\ 3: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 4: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 5: n\\leq500000 \\ \\ \\ 20pts$   \n$\\sf subtask \\ 6: n\\leq5000000 \\ 20pts$   ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』消除萝卜 A", "background": "", "description": "有 $2\\times n$ 的两行萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $j$ 行第 $i$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第二行的萝卜如果其对应的第一行的位置没有萝卜，就会掉落至第一行。\n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示每行有多少个萝卜。\n\n第二行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,2}$。\n\n第三行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,1}$。", "outputFormat": "一行一个整数表示你的答案。", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$。\n\n**本题使用捆绑测试**\n\n$\\sf subtask \\ 1: n\\leq1 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 10pts$   \n$\\sf subtask \\ 2: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 20pts $   \n$\\sf subtask \\ 3: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 4: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 5: n\\leq500000 \\ \\ \\ 20pts$   \n$\\sf subtask \\ 6: n\\leq5000000 \\ 20pts$   ", "locale": "zh-CN"}}}
