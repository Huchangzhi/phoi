{"pid": "P13656", "type": "P", "difficulty": 2, "samples": [["5\n0 2 4 6 8", "1 4 2 -1 -1"], ["5\n5 5 5 0 5", "2 2 3 1 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "前缀和", "ICPC", "CERC"], "title": "[CERC 2020] Rescue Mission", "background": "", "description": "The plan of the Criminal Liberating Rough Squad (CLRS) is to attack the train carrying the prisoners to another jail through a desert and to free at least some of them.\n\nCLRS got exactly 10 trucks which will carry the rescued criminals from the place of the assault to the makeshift airport where the planes are already being refueled before they fly abroad with the criminals on board.\n\nAt the assault scene, the CLRS will break into a train coach, neutralize coach guards, free all prisoners in the coach and move to the next coach. The squad will progress from the first attacked coach towards the end of the train, liberating the criminals in one coach after another. CLRS is proud to claim they are going to free and load into the trucks all criminals from any coach they will attack. CLRS moves in the train in only one direction, they never turn back.\n\nSomewhat strangely, when the trucks will be leaving the scene, the number of freed criminals has to be exactly the same in all trucks. It is an old time safety superstition of CLRS and it cannot be broken at any cost at any action of this kind.\n\nThere are bad news too. The police will probably be patrolling relatively nearby, thus the scene has to be left as soon as possible after the initial assault. That is, immediately when the superstition rule allows it.\n\nIt may also happen, the mission will be impossible to accomplish. For example if CLRS starts the attack on a coach too close to the end of the train.\n\nNow, everything has to be planned carefully. The number of transported criminals in each coach is known to CLRS beforehand. They want to know, for each coach in the train, how many coaches will they have to attack if the assault starts on that particular coach.\n", "inputFormat": "The first input line contains integer $N$ ($1 \\leq N \\leq 10^5$), the number of coaches in the train. The second line contains $N$ values between 0 and 9 (inclusive), the number of transported criminals in each coach. The values are listed in the order from the first coach in the train to the last.\n", "outputFormat": "The output consists of a sequence of $N$ numbers, $k$-th value in the sequence is the number of attacked coaches when the assault starts on $k$-th coach. If the mission cannot be accomplished starting on $k$-th coach, the corresponding value in the sequence is $-1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC 2020] Rescue Mission", "background": "", "description": "The plan of the Criminal Liberating Rough Squad (CLRS) is to attack the train carrying the prisoners to another jail through a desert and to free at least some of them.\n\nCLRS got exactly 10 trucks which will carry the rescued criminals from the place of the assault to the makeshift airport where the planes are already being refueled before they fly abroad with the criminals on board.\n\nAt the assault scene, the CLRS will break into a train coach, neutralize coach guards, free all prisoners in the coach and move to the next coach. The squad will progress from the first attacked coach towards the end of the train, liberating the criminals in one coach after another. CLRS is proud to claim they are going to free and load into the trucks all criminals from any coach they will attack. CLRS moves in the train in only one direction, they never turn back.\n\nSomewhat strangely, when the trucks will be leaving the scene, the number of freed criminals has to be exactly the same in all trucks. It is an old time safety superstition of CLRS and it cannot be broken at any cost at any action of this kind.\n\nThere are bad news too. The police will probably be patrolling relatively nearby, thus the scene has to be left as soon as possible after the initial assault. That is, immediately when the superstition rule allows it.\n\nIt may also happen, the mission will be impossible to accomplish. For example if CLRS starts the attack on a coach too close to the end of the train.\n\nNow, everything has to be planned carefully. The number of transported criminals in each coach is known to CLRS beforehand. They want to know, for each coach in the train, how many coaches will they have to attack if the assault starts on that particular coach.\n", "inputFormat": "The first input line contains integer $N$ ($1 \\leq N \\leq 10^5$), the number of coaches in the train. The second line contains $N$ values between 0 and 9 (inclusive), the number of transported criminals in each coach. The values are listed in the order from the first coach in the train to the last.\n", "outputFormat": "The output consists of a sequence of $N$ numbers, $k$-th value in the sequence is the number of attacked coaches when the assault starts on $k$-th coach. If the mission cannot be accomplished starting on $k$-th coach, the corresponding value in the sequence is $-1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC 2020] Rescue Mission", "background": null, "description": "犯罪解放粗暴小队（CLRS）计划袭击一列正在穿越沙漠、押送囚犯去另一座监狱的火车，并解救其中至少一部分囚犯。\n\nCLRS 恰好有 10 辆卡车，这些卡车将把被解救的罪犯从袭击地点运送到临时机场，飞机已经在加油，准备将罪犯带出国。\n\n在袭击现场，CLRS 会闯入一节车厢，制服车厢守卫，释放该车厢内的所有囚犯，然后前往下一节车厢。小队会从最先被袭击的车厢开始，依次向火车末端推进，逐节释放囚犯。CLRS 自豪地宣称，他们会释放并装载所有被袭击车厢内的罪犯到卡车上。CLRS 在火车上只会朝一个方向前进，绝不会回头。\n\n有些奇怪的是，离开现场时，每辆卡车上被解救的罪犯人数必须完全相同。这是 CLRS 长久以来的安全迷信，无论如何都不能违反。\n\n还有坏消息。警方很可能会在附近巡逻，因此袭击后必须尽快离开现场。也就是说，只要满足迷信规则，就要立即撤离。\n\n也有可能任务无法完成。例如，如果 CLRS 从距离火车末端太近的车厢开始袭击。\n\n现在，一切都必须精心策划。CLRS 事先知道每节车厢内被押送的罪犯人数。他们想知道，对于火车上的每一节车厢，如果从该车厢开始袭击，需要袭击多少节车厢。", "inputFormat": "第一行包含一个整数 $N$（$1 \\leq N \\leq 10^5$），表示火车上的车厢数量。第二行包含 $N$ 个介于 0 到 9 之间的整数，分别表示每节车厢内被押送的罪犯人数，顺序从火车头到火车尾。", "outputFormat": "输出包含 $N$ 个数字，第 $k$ 个数字表示如果从第 $k$ 节车厢开始袭击，需要袭击多少节车厢。如果从第 $k$ 节车厢开始无法完成任务，则对应位置输出 $-1$。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13657", "type": "P", "difficulty": 7, "samples": [["4 3 1 1 100\n0 1 Q\n1 2 Q\n2 3 Q\n3 1", "601"], ["5 3 2 1 100\n0 1 Q\n1 2 O\n3 4 O\n0 2\n5 4", "302\n806"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "ICPC", "CERC"], "title": "[CERC 2020] Offices", "background": "", "description": "The network of detective offices is growing. New offices are connected to the already existing offices via computer cables. There are two types of cables – optical and quantum – which propagate signal at different speeds. It takes time $T_1$ and $T_2$ for a signal to travel between two offices connected by an optical cable and by a quantum cable, respectively. There can be at most one cable between any two offices and it must be of one of the two types.\n\nThere are two ranks of detectives, Technical rank and Social rank. Each detective belongs to exactly one rank.\n\nThe process of building and installing a new office is the following. When a request for a new office is raised and it complies with the request rules, a new office is built and gradually populated by detectives of both ranks.\n\nThe request for a new office comes from two detectives, say A and B, who have different ranks and who also reside in different offices. Suppose the first detective resides in office OA and the second one in office OB. For safety reasons, the offices OA and OB must not share a connection. It is guaranteed by the administration that no request from two offices sharing a connection is possible, as every officer understands the dangers of such a request.\n\nSuppose that ON is the office that will be newly built. Office ON can be connected only to those already existing offices (denote by OE any one of them), to which at least one of OA and OB is already connected. Office ON will be connected to all offices satisfying the conditions and specifications given below.\n\nThe members of both ranks have opposing views on the reliability of the cables. A member of the Technical rank thinks that the type of connection between ON and OE should be the same as the type of connection of his current office to OE. A member of the Social rank thinks that the type of connection between ON and OE should not be the same type as the type of connection of his current office to OE. Therefore, the Headquarters have set the rules regarding new cables:\n\n- When OE is connected to only one of the offices OA and OB, the type of the connection between ON and OE is decided by the detective in the respective office connected to OE.\n- When OE is connected to both offices OA and OB, and the detectives A and B disagree on the type of the connection between ON and OE, then the connection is not built.\n- When OE is connected to both offices OA and OB, and the detectives A and B agree on the type of connection between ON and OE, then the connection is built. However, it should be stressed, it is of the other type than the one which A and B agree on.\n\nNow, there is a need of an application which keeps track of all the offices and the cables connecting them.\n\nThe Headquarters are located in the office labeled 0. After building a new office, the headquarters must be informed on the total sum of distances between the Headquarters and all the other offices that can be reached from it by a sequence of connections. The distance between two offices is the shortest time in which the signal can travel via cables from one office to another, supposing it spends no additional time inside any office on its path.", "inputFormat": "The first line of input contains five integers $N, M, R, T_1, T_2$ ($1 < N \\leq 5; 0 \\leq M \\leq \\binom{N}{2}; 0 \\leq R \\leq 10^5; 0 \\leq T_1, T_2 \\leq 100$), $N$ is the number of existing offices, $M$ is the total number of cables between the existing offices, $R$ is the number of new office requests, $T_1$ and $T_2$ is the time a signal travels through an optical and a quantum cable, respectively.\n\nThe offices are labeled as $0, 1, \\cdots, N-1$. Each of the next $M$ lines contains two integers $a$ and $b$ ($0 \\leq a \\neq b < N$) and a character “O” or “Q”. Integers determine the labels of the connected offices, the character determines the type of the cable which connects them (optical or quantum).\n\nNext, there are $R$ lines, each of which represents one request to build a new office. The $i$-th request line (request counter $i$ starts from 0) contains two integers $a$ and $b$ ($0 \\leq a \\neq b < N+i$), the labels of the offices in which resides the requesting pair of detectives. It is assumed that the office occupied by the detective of Technical rank is always listed first. Furthermore, it is guaranteed that no request will be between two offices that share a direct connection.\n", "outputFormat": "For each request in the input, print on a separate line the sum of distances from the Headquarters to all other offices that can be reached from the Headquarters by a sequence of connections.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC 2020] Offices", "background": "", "description": "The network of detective offices is growing. New offices are connected to the already existing offices via computer cables. There are two types of cables – optical and quantum – which propagate signal at different speeds. It takes time $T_1$ and $T_2$ for a signal to travel between two offices connected by an optical cable and by a quantum cable, respectively. There can be at most one cable between any two offices and it must be of one of the two types.\n\nThere are two ranks of detectives, Technical rank and Social rank. Each detective belongs to exactly one rank.\n\nThe process of building and installing a new office is the following. When a request for a new office is raised and it complies with the request rules, a new office is built and gradually populated by detectives of both ranks.\n\nThe request for a new office comes from two detectives, say A and B, who have different ranks and who also reside in different offices. Suppose the first detective resides in office OA and the second one in office OB. For safety reasons, the offices OA and OB must not share a connection. It is guaranteed by the administration that no request from two offices sharing a connection is possible, as every officer understands the dangers of such a request.\n\nSuppose that ON is the office that will be newly built. Office ON can be connected only to those already existing offices (denote by OE any one of them), to which at least one of OA and OB is already connected. Office ON will be connected to all offices satisfying the conditions and specifications given below.\n\nThe members of both ranks have opposing views on the reliability of the cables. A member of the Technical rank thinks that the type of connection between ON and OE should be the same as the type of connection of his current office to OE. A member of the Social rank thinks that the type of connection between ON and OE should not be the same type as the type of connection of his current office to OE. Therefore, the Headquarters have set the rules regarding new cables:\n\n- When OE is connected to only one of the offices OA and OB, the type of the connection between ON and OE is decided by the detective in the respective office connected to OE.\n- When OE is connected to both offices OA and OB, and the detectives A and B disagree on the type of the connection between ON and OE, then the connection is not built.\n- When OE is connected to both offices OA and OB, and the detectives A and B agree on the type of connection between ON and OE, then the connection is built. However, it should be stressed, it is of the other type than the one which A and B agree on.\n\nNow, there is a need of an application which keeps track of all the offices and the cables connecting them.\n\nThe Headquarters are located in the office labeled 0. After building a new office, the headquarters must be informed on the total sum of distances between the Headquarters and all the other offices that can be reached from it by a sequence of connections. The distance between two offices is the shortest time in which the signal can travel via cables from one office to another, supposing it spends no additional time inside any office on its path.", "inputFormat": "The first line of input contains five integers $N, M, R, T_1, T_2$ ($1 < N \\leq 5; 0 \\leq M \\leq \\binom{N}{2}; 0 \\leq R \\leq 10^5; 0 \\leq T_1, T_2 \\leq 100$), $N$ is the number of existing offices, $M$ is the total number of cables between the existing offices, $R$ is the number of new office requests, $T_1$ and $T_2$ is the time a signal travels through an optical and a quantum cable, respectively.\n\nThe offices are labeled as $0, 1, \\cdots, N-1$. Each of the next $M$ lines contains two integers $a$ and $b$ ($0 \\leq a \\neq b < N$) and a character “O” or “Q”. Integers determine the labels of the connected offices, the character determines the type of the cable which connects them (optical or quantum).\n\nNext, there are $R$ lines, each of which represents one request to build a new office. The $i$-th request line (request counter $i$ starts from 0) contains two integers $a$ and $b$ ($0 \\leq a \\neq b < N+i$), the labels of the offices in which resides the requesting pair of detectives. It is assumed that the office occupied by the detective of Technical rank is always listed first. Furthermore, it is guaranteed that no request will be between two offices that share a direct connection.\n", "outputFormat": "For each request in the input, print on a separate line the sum of distances from the Headquarters to all other offices that can be reached from the Headquarters by a sequence of connections.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC 2020] Offices", "background": null, "description": "侦探事务所的网络正在扩展。新的事务所通过计算机电缆与已有事务所连接。电缆有两种类型——光缆和量子缆——它们传递信号的速度不同。信号通过光缆和量子缆在两个事务所之间传递所需的时间分别为 $T_1$ 和 $T_2$。任意两个事务所之间最多只能有一根电缆，并且只能是其中一种类型。\n\n侦探分为两种级别：技术级和社交级。每位侦探只属于其中一个级别。\n\n新事务所的建设和安装流程如下：当有新事务所的请求被提出且符合规则时，新事务所会被建立，并逐步由两种级别的侦探入驻。\n\n新事务所的请求由两位侦探提出，设为 A 和 B，他们属于不同的级别，并且分别位于不同的事务所。假设第一位侦探在事务所 OA，第二位侦探在事务所 OB。出于安全考虑，OA 和 OB 之间不能有直接连接。管理部门保证不会有来自直接相连事务所的请求，因为每位侦探都明白这样做的危险。\n\n假设新建的事务所为 ON。ON 只能与那些已存在的事务所（记为 OE）连接，且 OE 必须与 OA 或 OB 至少有一个已经连接。ON 会与所有满足以下条件和规范的事务所建立连接。\n\n两种级别的侦探对电缆的可靠性有不同看法。技术级侦探认为 ON 与 OE 之间的连接类型应与其当前事务所与 OE 之间的连接类型相同。社交级侦探则认为 ON 与 OE 之间的连接类型应与其当前事务所与 OE 之间的连接类型不同。因此，总部制定了以下新电缆的规则：\n\n- 当 OE 只与 OA 和 OB 中的一个事务所连接时，ON 与 OE 之间的连接类型由与 OE 相连事务所中的侦探决定。\n- 当 OE 同时与 OA 和 OB 相连，且侦探 A 和 B 对 ON 与 OE 之间的连接类型意见不一致时，则不建立连接。\n- 当 OE 同时与 OA 和 OB 相连，且侦探 A 和 B 对 ON 与 OE 之间的连接类型意见一致时，则建立连接，但连接类型应与他们一致意见的类型相反。\n\n现在，需要一个应用程序来跟踪所有事务所及其之间的电缆连接情况。\n\n总部位于编号为 0 的事务所。每当新事务所建成后，总部需要获知从总部出发，通过一系列连接能够到达的所有其他事务所与总部之间距离的总和。两个事务所之间的距离是信号通过电缆从一个事务所传递到另一个事务所所需的最短时间，假设信号在路径上的任何事务所内部都不消耗额外时间。", "inputFormat": "输入的第一行包含五个整数 $N, M, R, T_1, T_2$（$1 < N \\leq 5; 0 \\leq M \\leq \\binom{N}{2}; 0 \\leq R \\leq 10^5; 0 \\leq T_1, T_2 \\leq 100$），$N$ 表示已有事务所的数量，$M$ 表示已有事务所之间的电缆总数，$R$ 表示新事务所的请求数，$T_1$ 和 $T_2$ 分别表示信号通过光缆和量子缆所需的时间。\n\n事务所编号为 $0, 1, \\cdots, N-1$。接下来的 $M$ 行，每行包含两个整数 $a$ 和 $b$（$0 \\leq a \\neq b < N$）以及一个字符“O”或“Q”。整数表示连接的事务所编号，字符表示连接它们的电缆类型（光缆或量子缆）。\n\n接下来有 $R$ 行，每行表示一个新事务所的请求。第 $i$ 个请求（请求编号从 0 开始）包含两个整数 $a$ 和 $b$（$0 \\leq a \\neq b < N+i$），表示提出请求的两位侦探所在的事务所编号。假设技术级侦探总是排在前面。此外，保证不会有来自直接相连事务所的请求。", "outputFormat": "对于输入中的每个请求，输出一行，从总部出发，通过一系列连接能够到达的所有其他事务所与总部之间距离的总和。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13658", "type": "P", "difficulty": 5, "samples": [["3 4\n2 1 2\n3 2\n1 1\n1 2\n1 3", "7"], ["4 7\n2 2 1 1\n3 1\n1 1\n1 4\n1 1\n2 4\n2 2\n2 1", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "ICPC", "状压 DP", "CERC"], "title": "[CERC 2020] Pickpockets", "background": "", "description": "The police station stands at the very top of the Jewellery Stores lane, a location vitally important for the pickpocket business in the town. The policemen start their daily patrol at the top end of the lane, progress slowly down and then return back to the top, seldom reaching the bottom end of the lane during the day. There are many regularities in the police habits, and therefore Big Pickpocket Boss (BPB) can make a smart plan for the holidays. The stores on the lane are labeled by successive integers, beginning from 1, from the bottom of the lane to its top. For each day of holidays, BPB can guarantee some number of stores, from the beginning up to a particular label, to be clean from the police unwelcome scrutiny. Teams of pickpockets will do the job for BPB. There are many teams available, each of them can operate on a single store for a number of consecutive days. Not necessarily all teams must be employed.\n\nBPB is a formidable boss, his rules must be obeyed to the letter:\n\n- There will be exactly one team operating in each store on any day the store is clean.\n- When a team starts operating in a store they will operate there for some number of consecutive days.\n- When a store will not be clean on a particular day, no team will operate in the store on that day.\n- No team will operate in two or more stores.\n- No team will operate twice or more times during the holidays.\n- No team will operate on any day before or after the holidays.\n\nIt is known that each team can generate their specific minimum income for BPB during their entire operation. BPB knows he has to maximize his minimum total income. He wants that figure from you, today, by 3 PM and not later. Do not even try to disappoint him.\n", "inputFormat": "The first line contains two integers $H$ and $T$ ($1 \\leq H \\leq 10^5$, $1 \\leq T \\leq 16$), the number of days in the holidays and the number of teams available. The second line contains $H$ integers $C_k$ ($0 \\leq C_k \\leq 10^5$, $1 \\leq k \\leq H$), the highest labels of a clean store on the $k$-th day of holidays. Label 0 means there is no clean store on the $k$-th day of holidays. Each of the next $T$ lines contains two integers $D_t$ and $I_t$ ($1 \\leq D_t \\leq H$, $0 \\leq I_t \\leq 10^6$, $1 \\leq t \\leq T$), the duration of the operation of team $t$ in days, and the minimum income the team generates.\n", "outputFormat": "Print the maximum value of the minimum total income the teams can generate when appropriately scheduled. Print $0$ when the conditions of BPB cannot be met.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC 2020] Pickpockets", "background": "", "description": "The police station stands at the very top of the Jewellery Stores lane, a location vitally important for the pickpocket business in the town. The policemen start their daily patrol at the top end of the lane, progress slowly down and then return back to the top, seldom reaching the bottom end of the lane during the day. There are many regularities in the police habits, and therefore Big Pickpocket Boss (BPB) can make a smart plan for the holidays. The stores on the lane are labeled by successive integers, beginning from 1, from the bottom of the lane to its top. For each day of holidays, BPB can guarantee some number of stores, from the beginning up to a particular label, to be clean from the police unwelcome scrutiny. Teams of pickpockets will do the job for BPB. There are many teams available, each of them can operate on a single store for a number of consecutive days. Not necessarily all teams must be employed.\n\nBPB is a formidable boss, his rules must be obeyed to the letter:\n\n- There will be exactly one team operating in each store on any day the store is clean.\n- When a team starts operating in a store they will operate there for some number of consecutive days.\n- When a store will not be clean on a particular day, no team will operate in the store on that day.\n- No team will operate in two or more stores.\n- No team will operate twice or more times during the holidays.\n- No team will operate on any day before or after the holidays.\n\nIt is known that each team can generate their specific minimum income for BPB during their entire operation. BPB knows he has to maximize his minimum total income. He wants that figure from you, today, by 3 PM and not later. Do not even try to disappoint him.\n", "inputFormat": "The first line contains two integers $H$ and $T$ ($1 \\leq H \\leq 10^5$, $1 \\leq T \\leq 16$), the number of days in the holidays and the number of teams available. The second line contains $H$ integers $C_k$ ($0 \\leq C_k \\leq 10^5$, $1 \\leq k \\leq H$), the highest labels of a clean store on the $k$-th day of holidays. Label 0 means there is no clean store on the $k$-th day of holidays. Each of the next $T$ lines contains two integers $D_t$ and $I_t$ ($1 \\leq D_t \\leq H$, $0 \\leq I_t \\leq 10^6$, $1 \\leq t \\leq T$), the duration of the operation of team $t$ in days, and the minimum income the team generates.\n", "outputFormat": "Print the maximum value of the minimum total income the teams can generate when appropriately scheduled. Print $0$ when the conditions of BPB cannot be met.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC 2020] Pickpockets", "background": null, "description": "警察局位于珠宝店巷的最顶端，这对于镇上的扒手生意来说至关重要。警察每天从巷子的顶端开始巡逻，缓慢地向下走，然后再返回顶端，很少在白天到达巷子的底端。警察的习惯有很多规律，因此“大扒手头目”（BPB）可以为假期制定一个聪明的计划。巷子里的商店从底端到顶端依次用连续的整数编号，从 $1$ 开始。对于假期的每一天，BPB 可以保证从巷子底端到某个编号为止的若干商店不会受到警察的干扰。BPB 有许多扒手小队可供调遣，每个小队可以在某一家商店连续工作若干天。并不是所有小队都必须被雇佣。\n\nBPB 是个严厉的头目，他的规则必须严格遵守：\n\n- 在每一天的每一家“干净”的商店，必须且只能有一个小队在工作。\n- 每个小队一旦开始在某家商店工作，必须在该商店连续工作若干天。\n- 如果某一天某家商店不“干净”，则当天该商店不能有小队工作。\n- 每个小队不能在两家或更多商店工作。\n- 每个小队在整个假期内最多只能被安排一次。\n- 每个小队只能在假期期间工作，不能在假期前后工作。\n\n已知每个小队在其整个工作期间能为 BPB 带来一个特定的最小收入。BPB 想要最大化所有被安排小队的最小总收入。他要求你在今天下午 3 点前给出这个数字，不能晚。千万不要让他失望。", "inputFormat": "第一行包含两个整数 $H$ 和 $T$（$1 \\leq H \\leq 10^5$，$1 \\leq T \\leq 16$），分别表示假期的天数和可用小队的数量。第二行包含 $H$ 个整数 $C_k$（$0 \\leq C_k \\leq 10^5$，$1 \\leq k \\leq H$），第 $k$ 天编号不超过 $C_k$ 的商店是“干净”的。$C_k=0$ 表示第 $k$ 天没有“干净”的商店。接下来的 $T$ 行，每行包含两个整数 $D_t$ 和 $I_t$（$1 \\leq D_t \\leq H$，$0 \\leq I_t \\leq 10^6$），分别表示第 $t$ 个小队可以连续工作的天数和该小队能带来的最小收入。", "outputFormat": "输出所有被安排小队的最小总收入的最大值。如果无法满足 BPB 的所有条件，则输出 $0$。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13659", "type": "P", "difficulty": 4, "samples": [["3 3\n2 2 1", "1 1\n1 1\n0 0"], ["5 5\n1 2 3 4 5", "1 1 0 0\n2 2 0 0\n2 2 0 0\n3 3 0 0\n4 4 0 0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2020", "ICPC", "CERC"], "title": "[CERC 2020] Storage Problems", "background": "", "description": "The gangsters did a very successful robbery of the city's most famous auction house. Now they are safely at their hideout, where they store the stolen items. Luckily, you managed to place a listening device into their hideout. You also have a personal file on each ganger, which contains a recording of their voice. You will listen carefully to what happens next with hope it will help you with the investigation of the robbery.\n\nEach gangster stole exactly one item, the $i$-th gangster stole the $i$-th item. Now each gangster is trying to put his item into the common storage, which can hold a total weight of $K$. The storage is a small room and the gangsters store their items one by one.\n\nWhen a gangster tries to put an item into the storage but it does not fit, that is the total weight of the items in the storage would exceed $K$, he gets angry and throws all the items in the storage out. While doing this, he tells the others that \"$j$ items are going to trash!\", where $j$ is the number of items in the storage at the point he tried to store his item. At this point a fight ensues and no more storing will happen.\n\nAs you have a listening device in the gangsters' storage, you will hear how much items the gangster throws out. Also, using your personal files, you can tell apart each of the gangster's voices.\n\nTherefore, it would help your investigation greatly if you could know in advance, for all possible values of $j$ and $i$, how many different subsets of items could be in the storage at the moment when the $i$-th gangster throws all the $j$ items out. As the number of subsets can be large, output it modulo $167772161$.", "inputFormat": "The input consists of two lines. The first line contains two integers $N$ and $K$ ($2 \\leq N \\leq 400$, $1 \\leq K \\leq 400$), the number of gangsters and the maximum weight that the storage can hold. The second line contains $N$ integers $w_1, w_2, \\cdots, w_N$, such that ($1 \\leq w_i \\leq K$) for each $1 \\leq i \\leq N$. Here $w_i$ is the weight of item that the $i$-th gangster stole.\n", "outputFormat": "The output consists of $N$ lines, each line containing exactly $N-1$ integers. The $j$-th value on the $i$-th line contains the number of subsets of items containing exactly $j$ items, such that they fit into the storage but the $i$-th gangster's item can not be added. Each number is modulo $167772161$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC 2020] Storage Problems", "background": "", "description": "The gangsters did a very successful robbery of the city's most famous auction house. Now they are safely at their hideout, where they store the stolen items. Luckily, you managed to place a listening device into their hideout. You also have a personal file on each ganger, which contains a recording of their voice. You will listen carefully to what happens next with hope it will help you with the investigation of the robbery.\n\nEach gangster stole exactly one item, the $i$-th gangster stole the $i$-th item. Now each gangster is trying to put his item into the common storage, which can hold a total weight of $K$. The storage is a small room and the gangsters store their items one by one.\n\nWhen a gangster tries to put an item into the storage but it does not fit, that is the total weight of the items in the storage would exceed $K$, he gets angry and throws all the items in the storage out. While doing this, he tells the others that \"$j$ items are going to trash!\", where $j$ is the number of items in the storage at the point he tried to store his item. At this point a fight ensues and no more storing will happen.\n\nAs you have a listening device in the gangsters' storage, you will hear how much items the gangster throws out. Also, using your personal files, you can tell apart each of the gangster's voices.\n\nTherefore, it would help your investigation greatly if you could know in advance, for all possible values of $j$ and $i$, how many different subsets of items could be in the storage at the moment when the $i$-th gangster throws all the $j$ items out. As the number of subsets can be large, output it modulo $167772161$.", "inputFormat": "The input consists of two lines. The first line contains two integers $N$ and $K$ ($2 \\leq N \\leq 400$, $1 \\leq K \\leq 400$), the number of gangsters and the maximum weight that the storage can hold. The second line contains $N$ integers $w_1, w_2, \\cdots, w_N$, such that ($1 \\leq w_i \\leq K$) for each $1 \\leq i \\leq N$. Here $w_i$ is the weight of item that the $i$-th gangster stole.\n", "outputFormat": "The output consists of $N$ lines, each line containing exactly $N-1$ integers. The $j$-th value on the $i$-th line contains the number of subsets of items containing exactly $j$ items, such that they fit into the storage but the $i$-th gangster's item can not be added. Each number is modulo $167772161$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC 2020] Storage Problems", "background": null, "description": "黑帮分子成功抢劫了城市中最著名的拍卖行。现在他们安全地藏身在他们的据点，并将偷来的物品存放在那里。幸运的是，你设法在他们的据点里安放了窃听器。你还拥有每个黑帮分子的个人档案，其中包含他们的声音录音。你将仔细监听接下来发生的事情，希望这能帮助你调查这起抢劫案。\n\n每个黑帮分子恰好偷了一个物品，第 $i$ 个黑帮分子偷了第 $i$ 个物品。现在每个黑帮分子都试图把自己的物品放入公共储藏室，储藏室最多能承受总重量 $K$。储藏室是一个小房间，黑帮分子们依次存放他们的物品。\n\n当某个黑帮分子试图将物品放入储藏室，但发现放不下时（即储藏室内物品的总重量加上他的新物品会超过 $K$），他会生气并把储藏室里的所有物品都扔出去。在此过程中，他会告诉其他人：“$j$ items are going to trash!”（$j$ 个物品要被扔掉了！），其中 $j$ 是他试图存放物品时储藏室中的物品数量。此时会发生争吵，之后不会再有物品被存放。\n\n由于你在黑帮分子的储藏室里安放了窃听器，你会听到黑帮分子扔出多少物品。此外，利用你的个人档案，你可以分辨出每个黑帮分子的声音。\n\n因此，如果你能提前知道，对于所有可能的 $j$ 和 $i$，在第 $i$ 个黑帮分子扔出所有 $j$ 个物品时，储藏室中可能存在多少种不同的物品子集，这将极大地帮助你的调查。由于子集的数量可能很大，请将结果对 $167772161$ 取模后输出。", "inputFormat": "输入包含两行。\n\n第一行包含两个整数 $N$ 和 $K$（$2 \\leq N \\leq 400$，$1 \\leq K \\leq 400$），分别表示黑帮分子的数量和储藏室能承受的最大总重量。\n\n第二行包含 $N$ 个整数 $w_1, w_2, \\cdots, w_N$，其中 $1 \\leq w_i \\leq K$，表示第 $i$ 个黑帮分子偷的物品的重量。", "outputFormat": "输出共 $N$ 行，每行恰好包含 $N-1$ 个整数。第 $i$ 行的第 $j$ 个值表示：恰好包含 $j$ 个物品的子集，这些物品的总重量不超过 $K$，但无法再加入第 $i$ 个黑帮分子的物品（即加上 $w_i$ 后会超过 $K$）的子集数量。每个数对 $167772161$ 取模。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13660", "type": "P", "difficulty": 6, "samples": [["8 8 1 7 7 1\n2 3 2 0\n2 1 1 2\n1 2 0 0\n0 0 0 1", "14.485281374238"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2020", "Special Judge", "ICPC", "CERC"], "title": "[CERC 2020] Roof Escape", "background": "", "description": "Escaping from the police over city roofs is often tricky and the gangsters have to be trained properly. To keep up with current AI trends in criminality, they are developing a general computerized model of escape paths.\n\nIn the model, the city area where the escape happens is modeled as a 3D grid made of rectangular cuboids with square bases forming a 2D grid on flat ground. Each cuboid represents a block of houses. Top face of a cuboid is called a roof. In the model, all distances between adjacent blocks are reduced to 0. The path of escaping gangsters is modeled as a polyline – a sequence of straight horizontal and vertical segments where the end point of one segment is the start point of the next segment. The basic path properties are:\n\n- Each point on the path is on the surface of at least one block.\n- No part of the path is in the interior of any block.\n- The height of any point on the path is bigger than or equal to the lowest height of roofs of all blocks to which surface the point belongs.\n- The path starts and ends in the center of a block roof.\n- The sum over the lengths of horizontal segments of the path is minimum possible.\n\nIt may happen that two consecutive segments on the path share common points. This stems from the fact that the path models a real behavior of a person moving over physical obstacles. Thus an additional path rule also holds:\n\n- Let $P$ be a point on the path. If there is a point $Q$ directly above $P$, and $Q$ belongs to at least two blocks, then the point $Q$ is on the path.\n\nThe total length of the escape path should be carefully calculated in the model.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4r0xxwq5.png)", "inputFormat": "The first line of the input contains six positive integers $W, H, S_x, S_y, E_x, E_y$ ($1 \\leq W \\cdot H \\leq 10^5$, $1 \\leq S_x, E_x \\leq W$, $1 \\leq S_y, E_y \\leq H$). $W$ and $H$ are even integers representing the dimensions of the grid base in meters, integers $S_x, S_y$ denote starting coordinates of the escape path and $E_x, E_y$ denote coordinates of the end.\n\nEach of the next $H/2$ lines contains $W/2$ integers, the $i$-th integer on $j$-th line is the height of the corresponding block $T_{i,j}$ in meters ($0 \\leq T_{i,j} \\leq 10^3$).\n\nEach grid block base is a square with dimensions of $2 \\times 2$ meters in the model.", "outputFormat": "Print the length of the escape path. The difference between the printed length and the exact length must be less than $10^{-4}$.", "hint": "The sample input with its solution is shown on the picture above.", "locale": "en", "translations": {"en": {"title": "[CERC 2020] Roof Escape", "background": "", "description": "Escaping from the police over city roofs is often tricky and the gangsters have to be trained properly. To keep up with current AI trends in criminality, they are developing a general computerized model of escape paths.\n\nIn the model, the city area where the escape happens is modeled as a 3D grid made of rectangular cuboids with square bases forming a 2D grid on flat ground. Each cuboid represents a block of houses. Top face of a cuboid is called a roof. In the model, all distances between adjacent blocks are reduced to 0. The path of escaping gangsters is modeled as a polyline – a sequence of straight horizontal and vertical segments where the end point of one segment is the start point of the next segment. The basic path properties are:\n\n- Each point on the path is on the surface of at least one block.\n- No part of the path is in the interior of any block.\n- The height of any point on the path is bigger than or equal to the lowest height of roofs of all blocks to which surface the point belongs.\n- The path starts and ends in the center of a block roof.\n- The sum over the lengths of horizontal segments of the path is minimum possible.\n\nIt may happen that two consecutive segments on the path share common points. This stems from the fact that the path models a real behavior of a person moving over physical obstacles. Thus an additional path rule also holds:\n\n- Let $P$ be a point on the path. If there is a point $Q$ directly above $P$, and $Q$ belongs to at least two blocks, then the point $Q$ is on the path.\n\nThe total length of the escape path should be carefully calculated in the model.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4r0xxwq5.png)", "inputFormat": "The first line of the input contains six positive integers $W, H, S_x, S_y, E_x, E_y$ ($1 \\leq W \\cdot H \\leq 10^5$, $1 \\leq S_x, E_x \\leq W$, $1 \\leq S_y, E_y \\leq H$). $W$ and $H$ are even integers representing the dimensions of the grid base in meters, integers $S_x, S_y$ denote starting coordinates of the escape path and $E_x, E_y$ denote coordinates of the end.\n\nEach of the next $H/2$ lines contains $W/2$ integers, the $i$-th integer on $j$-th line is the height of the corresponding block $T_{i,j}$ in meters ($0 \\leq T_{i,j} \\leq 10^3$).\n\nEach grid block base is a square with dimensions of $2 \\times 2$ meters in the model.", "outputFormat": "Print the length of the escape path. The difference between the printed length and the exact length must be less than $10^{-4}$.", "hint": "The sample input with its solution is shown on the picture above.", "locale": "en"}, "zh-CN": {"title": "[CERC 2020] Roof Escape", "background": null, "description": "在城市屋顶上逃避警察常常非常棘手，因此匪徒们必须经过适当的训练。为了跟上当前犯罪领域的 AI 趋势，他们正在开发一个通用的计算机化逃跑路模型。\n\n在该模型中，发生逃跑的城市区域被建模为一个由矩形立方体组成的三维网格，这些立方体的底面为正方形，在平坦的地面上形成一个二维网格。每个立方体代表一栋房屋。立方体的顶面称为屋顶。在模型中，相邻街区之间的距离被简化为 $0$。匪徒的逃跑路被建模为一条折线——由一系列水平和垂直的直线段组成，其中一个线段的终点是下一个线段的起点。基本的路径属性如下：\n\n- 路径上的每个点都位于至少一个街区的表面上。\n- 路径的任何部分都不在任何街区的内部。\n- 路径上任意一点的高度大于等于该点所属于的所有街区屋顶的最低高度。\n- 路径的起点和终点都在某个街区屋顶的中心。\n- 路径所有水平线段长度之和应尽可能小。\n\n可能会出现路径上两个连续线段有公共点的情况。这是因为路径模拟了人在实际物理障碍物上的移动行为。因此，还需满足以下额外的路径规则：\n\n- 设 $P$ 为路径上的一个点。如果存在点 $Q$ 恰好在 $P$ 的正上方，且 $Q$ 属于至少两个街区，则点 $Q$ 也在路径上。\n\n需要在模型中精确计算逃跑路的总长度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4r0xxwq5.png)", "inputFormat": "输入的第一行包含六个正整数 $W, H, S_x, S_y, E_x, E_y$（$1 \\leq W \\cdot H \\leq 10^5$，$1 \\leq S_x, E_x \\leq W$，$1 \\leq S_y, E_y \\leq H$）。$W$ 和 $H$ 是偶数，表示网格底面的尺寸（单位为米）；$S_x, S_y$ 表示逃跑路起点的坐标，$E_x, E_y$ 表示终点的坐标。\n\n接下来的 $H/2$ 行，每行包含 $W/2$ 个整数，第 $j$ 行的第 $i$ 个整数表示对应街区 $T_{i,j}$ 的高度（单位为米，$0 \\leq T_{i,j} \\leq 10^3$）。\n\n每个网格街区的底面为 $2 \\times 2$ 米的正方形。", "outputFormat": "输出逃跑路的长度。输出的长度与精确长度的误差必须小于 $10^{-4}$。", "hint": "样例输入及其解如上图所示。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13661", "type": "P", "difficulty": 6, "samples": [["4 6\n1 2\n2 3\n1 3\n1 4\n3 4\n2 4\n4\n1 1\n1 3\n2 4\n1 6", "1\n5\n6\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "动态树 LCT", "ICPC", "CERC"], "title": "[CERC 2020] Screamers", "background": "", "description": "The police is preparing a huge sting in which they hope to jail most of the prominent criminal figures in the city. The flow of information on the side of the police has to be as tight as possible to prevent any leaks. Each detective officer (DO) taking part in the sting is under a strict regulation.\n\nThe information shared among DOs is in the form of so-called drops. A drop is always spoken, it must not be recorded on any medium, electronics, paper, etc. Any DO can share a drop only with selected DOs with which he shares a bidirectional connection. Each DO is obliged to pass the drop, as soon as possible and without any change, to all his buddies with which he shares a connection, except for the DO from which he received the drop.\n\nThe Chieft Inspector (CI) has to choose which pairs of DOs will share a connection. This final set of connections is called the final group. In this final group (FG) an additional FG-rule holds: A situation when a drop returns to a DO who passed it to his buddies some time ago must not happen. It would mean there are too many unnecessary connections in the FG network.\n\nThere is a stack of folders, each folder describing one connection between a particular pair of DOs. The selection of FG is done in two steps. First, CI chooses two integer values $S$ and $T$, which may be sometimes the same, and removes from the stack all folders above the $S$-th folder and all folders below the $T$-th folder.\n\nNext, with the reduced folders, CI repeats the operation. He chooses two integer values $U$ and $V$, which may be sometimes the same, and removes from the reduced stack all folders above the $U$-th folder and all folders below the $V$-th folder.\n\nCI wants to use all the connections in the remaining folders in the FG. However, it is not guaranteed that connections can form FG, due to the additional FG-rule. CI tends to forget this rule quite often.\n\nOne cannot change the professional habits of CI. His assistant tries to address the issue diplomatically by employing a programmer who would gradually computerize the process. His first task is to compute the number of different FGs that may be selected by CI after he has chosen the first two values $S$ and $T$. This computation must be efficient for many different values of $S$ and $T$.", "inputFormat": "The first input line contains two numbers, $N$ and $M$ ($1 \\leq N, M \\leq 10^5$), the number of DOs and the number of folders in the CI’s stack respectively. The DOs are identified by integers $1 \\ldots N$. Next, there are $M$ lines, each represents one folder and it contains two integers $A$ and $B$ ($1 \\leq A < B \\leq N$), pair of DOs whose connection is described in the folder. The order of lines corresponds to the order of folders in the stack from top to bottom.\n\nThe next line contains one number $Q$ ($1 \\leq Q \\leq 10^5$), the number of queries. Next, there are $Q$ lines, each represents one query and it contains two positive integers $S$ and $T$ ($1 \\leq S \\leq T \\leq M$), the numbers chosen by CI in the first step of FG selection.\n", "outputFormat": "For each of the $Q$ query input lines print the number of different FGs which can be formed in the second step of the selection process.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC 2020] Screamers", "background": "", "description": "The police is preparing a huge sting in which they hope to jail most of the prominent criminal figures in the city. The flow of information on the side of the police has to be as tight as possible to prevent any leaks. Each detective officer (DO) taking part in the sting is under a strict regulation.\n\nThe information shared among DOs is in the form of so-called drops. A drop is always spoken, it must not be recorded on any medium, electronics, paper, etc. Any DO can share a drop only with selected DOs with which he shares a bidirectional connection. Each DO is obliged to pass the drop, as soon as possible and without any change, to all his buddies with which he shares a connection, except for the DO from which he received the drop.\n\nThe Chieft Inspector (CI) has to choose which pairs of DOs will share a connection. This final set of connections is called the final group. In this final group (FG) an additional FG-rule holds: A situation when a drop returns to a DO who passed it to his buddies some time ago must not happen. It would mean there are too many unnecessary connections in the FG network.\n\nThere is a stack of folders, each folder describing one connection between a particular pair of DOs. The selection of FG is done in two steps. First, CI chooses two integer values $S$ and $T$, which may be sometimes the same, and removes from the stack all folders above the $S$-th folder and all folders below the $T$-th folder.\n\nNext, with the reduced folders, CI repeats the operation. He chooses two integer values $U$ and $V$, which may be sometimes the same, and removes from the reduced stack all folders above the $U$-th folder and all folders below the $V$-th folder.\n\nCI wants to use all the connections in the remaining folders in the FG. However, it is not guaranteed that connections can form FG, due to the additional FG-rule. CI tends to forget this rule quite often.\n\nOne cannot change the professional habits of CI. His assistant tries to address the issue diplomatically by employing a programmer who would gradually computerize the process. His first task is to compute the number of different FGs that may be selected by CI after he has chosen the first two values $S$ and $T$. This computation must be efficient for many different values of $S$ and $T$.", "inputFormat": "The first input line contains two numbers, $N$ and $M$ ($1 \\leq N, M \\leq 10^5$), the number of DOs and the number of folders in the CI’s stack respectively. The DOs are identified by integers $1 \\ldots N$. Next, there are $M$ lines, each represents one folder and it contains two integers $A$ and $B$ ($1 \\leq A < B \\leq N$), pair of DOs whose connection is described in the folder. The order of lines corresponds to the order of folders in the stack from top to bottom.\n\nThe next line contains one number $Q$ ($1 \\leq Q \\leq 10^5$), the number of queries. Next, there are $Q$ lines, each represents one query and it contains two positive integers $S$ and $T$ ($1 \\leq S \\leq T \\leq M$), the numbers chosen by CI in the first step of FG selection.\n", "outputFormat": "For each of the $Q$ query input lines print the number of different FGs which can be formed in the second step of the selection process.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC 2020] Screamers", "background": null, "description": "警方正在筹备一次大规模的突袭行动，希望能将城市中大多数著名的犯罪分子绳之以法。为了防止信息泄露，警方内部的信息流通必须尽可能严密。每位参与行动的侦探警官（DO）都受到严格的规定约束。\n\nDO 之间共享的信息以所谓的“滴水”（drop）形式传递。每一次滴水都是口头传递，绝不能以任何形式记录在任何媒介上，包括电子设备、纸张等。每个 DO 只能与与其有双向连接的特定 DO 共享滴水。每个 DO 有义务在收到滴水后，尽快且不做任何更改地将其传递给所有与其有连接的伙伴，除了他收到滴水的那位 DO。\n\n总督察（CI）需要选择哪些 DO 对之间建立连接。这组最终确定的连接称为最终小组（final group，FG）。在 FG 中，还需要遵守一条额外的 FG 规则：不能出现滴水返回到曾经传递给伙伴的 DO 的情况。如果出现这种情况，说明 FG 网络中存在过多不必要的连接。\n\n有一叠文件夹，每个文件夹描述了一对特定 DO 之间的连接。FG 的选择分为两步。首先，CI 选择两个整数 $S$ 和 $T$（有时可以相同），并从文件夹堆中移除第 $S$ 个文件夹之上的所有文件夹，以及第 $T$ 个文件夹之下的所有文件夹。\n\n接下来，CI 对剩下的文件夹重复该操作。他选择两个整数 $U$ 和 $V$（有时可以相同），并从剩下的文件夹中移除第 $U$ 个文件夹之上的所有文件夹，以及第 $V$ 个文件夹之下的所有文件夹。\n\nCI 希望在 FG 中使用剩下文件夹中的所有连接。然而，由于 FG 规则的限制，这些连接不一定能构成 FG。CI 经常会忘记这条规则。\n\nCI 的职业习惯无法改变。他的助手试图通过雇佣一名程序员来逐步实现流程自动化，以委婉地解决这个问题。程序员的第一个任务是：在 CI 选择了第一步的 $S$ 和 $T$ 后，计算可能被选为 FG 的不同方案数。这个计算必须对许多不同的 $S$ 和 $T$ 都高效完成。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$（$1 \\leq N, M \\leq 10^5$），分别表示 DO 的数量和 CI 文件夹堆中的文件夹数量。DO 用整数 $1 \\ldots N$ 编号。接下来有 $M$ 行，每行包含两个整数 $A$ 和 $B$（$1 \\leq A < B \\leq N$），表示该文件夹描述的 DO 对之间的连接。输入顺序即为文件夹从上到下的顺序。\n\n下一行包含一个整数 $Q$（$1 \\leq Q \\leq 10^5$），表示询问的数量。接下来有 $Q$ 行，每行包含两个正整数 $S$ 和 $T$（$1 \\leq S \\leq T \\leq M$），表示 CI 在 FG 选择第一步中选定的文件夹编号。", "outputFormat": "对于每个询问，输出一行，表示在第二步选择过程中可以形成的不同 FG 的数量。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13662", "type": "P", "difficulty": 5, "samples": [["3\n4\n0 0 0 0\n0 1 2 3\n4\n1 0 0 0\n0 0 2 2\n4\n0 0 0 0\n0 1 1 1", "10\n11\n14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "Ad-hoc"], "title": "「TPOI-5A」Luminescence", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/ownsj515.png)\n\n（图片来自 Phigros 曲绘，侵删。）", "description": "给定 $n$ 与两个长度为 $n$ 的序列 $a,b$。定义一个 $0\\sim n-1$ 的排列 $q$ 是 **魔怔的**，当且仅当：\n\n- $\\forall 1\\le k\\le n,\\min^k_{i=1}q_i=a_k$。\n- $\\forall 1\\le k\\le n,\\min^n_{i=k}q_i=b_k$。\n\n定义一个排列 $q$ 的权值为 $\\sum_{1\\le l\\le r\\le n}\\operatorname{mex}_{l\\le i\\le r}q_i$，求所有魔怔的排列的权值之和。答案对 $998244353$ 取模。\n\n一个集合 $M$ 的 $\\operatorname{mex}(M)$ 定义为最小的没有在 $M$ 中出现的自然数。如 $\\text{mex}\\{1,2,3,4\\}=0,\\text{mex}\\{0,1,3,4\\}=2$。", "inputFormat": "本题有多组测试数据。对于每个测试点，先输入一个正整数 $T$，表示数据组数。\n\n对于每一组测试数据，第一行一个正整数 $n$，\n第二行输入 $n$ 个整数 $a_1,a_2,\\dots,a_n$，第三行 $n$ 个整数 $b_1,b_2,\\dots,b_n$。", "outputFormat": "对于每一组测试数据，输出一行一个整数，表示所有魔怔的排列的权值之和。", "hint": "|$\\text{Subtask}$|$n\\le$|$\\sum n\\le$|分值|\n|:-:|:-:|:-:|:-:|\n|$1$|$8$|$800$|$20$|\n|$2$|$10^3$|$10^4$|$40$|\n|$3$|$2\\times10^5$|$2\\times10^6$|$40$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5,0 \\le a_i,b_i < n, \\sum n \\le 2 \\times 10^6$。\n\n**保证至少存在一个魔怔的排列。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TPOI-5A」Luminescence", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/ownsj515.png)\n\n（图片来自 Phigros 曲绘，侵删。）", "description": "给定 $n$ 与两个长度为 $n$ 的序列 $a,b$。定义一个 $0\\sim n-1$ 的排列 $q$ 是 **魔怔的**，当且仅当：\n\n- $\\forall 1\\le k\\le n,\\min^k_{i=1}q_i=a_k$。\n- $\\forall 1\\le k\\le n,\\min^n_{i=k}q_i=b_k$。\n\n定义一个排列 $q$ 的权值为 $\\sum_{1\\le l\\le r\\le n}\\operatorname{mex}_{l\\le i\\le r}q_i$，求所有魔怔的排列的权值之和。答案对 $998244353$ 取模。\n\n一个集合 $M$ 的 $\\operatorname{mex}(M)$ 定义为最小的没有在 $M$ 中出现的自然数。如 $\\text{mex}\\{1,2,3,4\\}=0,\\text{mex}\\{0,1,3,4\\}=2$。", "inputFormat": "本题有多组测试数据。对于每个测试点，先输入一个正整数 $T$，表示数据组数。\n\n对于每一组测试数据，第一行一个正整数 $n$，\n第二行输入 $n$ 个整数 $a_1,a_2,\\dots,a_n$，第三行 $n$ 个整数 $b_1,b_2,\\dots,b_n$。", "outputFormat": "对于每一组测试数据，输出一行一个整数，表示所有魔怔的排列的权值之和。", "hint": "|$\\text{Subtask}$|$n\\le$|$\\sum n\\le$|分值|\n|:-:|:-:|:-:|:-:|\n|$1$|$8$|$800$|$20$|\n|$2$|$10^3$|$10^4$|$40$|\n|$3$|$2\\times10^5$|$2\\times10^6$|$40$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5,0 \\le a_i,b_i < n, \\sum n \\le 2 \\times 10^6$。\n\n**保证至少存在一个魔怔的排列。**", "locale": "zh-CN"}}}
{"pid": "P13663", "type": "P", "difficulty": 6, "samples": [["7 2\n1 3\n1 2\n3 1\n2 4\n5 1\n2 3\n1 1", "2\n2\n6\n9\n18\n18\n18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化"], "title": "「TPOI-5B」回忆", "background": "回忆。\n\n沉溺于过去。\n\n「死期将至」\n\n「惟余旧忆」\n\n回忆。", "description": "对于一棵有根树，记 $u$ 的子树中**除 $u$ 以外**的点组成的集合为 $T_u$。\n\n定义点 $u$ 的权值 $f_u=\\text{mex}_{v\\in T_u}f_v$。特别地，若 $u$ 为叶子，则 $f_u=0$。\n\n现在给定一颗树，每个点 $i$ 除了上述定义的权值外还有一个给定的权重 $a_i$。\n\n这棵树初始只有根结点 $1$，权重为 $a_1$，有 $q$ 次操作，第 $i$ 次输入两个数 $x_i,a_{i+1}$ 代表加入一个新的结点 $i+1$，其权重为 $a_{i+1}$，它的父亲为 $x_i$，求加入这个点之后的 $\\sum\\limits_{j=1}^{i+1}a_jf_j$。\n\n答案对 $10^9+7$ 取模。\n\n注：每加入一个点后就自叶子结点向根更新 $f$ 的值。\n\n一个集合 $M$ 的 $\\operatorname{mex}(M)$ 定义为最小的没有在 $M$ 中出现的自然数。如 $\\text{mex}\\{1,2,3,4\\}=0,\\text{mex}\\{0,1,3,4\\}=2$。", "inputFormat": "第一行两个数 $q,a_1$，接下来接下来 $q$ 行每行两个数 $x_i,a_{i+1}$。", "outputFormat": "输出 $q$ 行，每行一个数，代表加入点 $i+1$ 后所有点的权值乘以权重的和对 $10^9+7$ 取模的结果。", "hint": "### 样例 1 解释\n树的形态如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/910pp86j.png)\n\n其中各点权值依次为 $3,2,1,0,1,0,0,0$。\n\n举例如对于 $2$ 号点，其子树内点有 $5,6,7$，权值分别为 $1,0,0$，MEX 为 $2$，所以 $2$ 的权值为 $2$。\n\n### 数据范围\n\n**本题 IO 量较大，请尝试使用更快的输入输出方式。**\n\n| $\\text{Subtask}$ | 子任务依赖 | $q\\le $ | $x_i$ | 特殊性质 | 时间限制 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | 无 | $5000$ | $x_i\\le i$ | 保证数据随机生成 | $1\\text s$ | $15$ |\n| $1$ | ^ | $10^5$ | $i-5\\le x_i\\le i$ | 无 | ^ | $5$ |\n| $2$ | ^ | ^ | $x_i\\le2$ | ^ | ^ | ^ |\n| $3$ | ^ | ^ | $x_i\\le i$ | 保证数据随机生成 | ^ | $15$ |\n| $4$ | $0,1,2,3$ | ^ | ^ | 无 | ^ | $20$ |\n| $5$ | $4$ | $10^6$ | ^ | ^ | ^ | $10$ |\n| $6$ | $5$ | $5\\times10^6$ | ^ | ^ | $4\\text s$ | $30$ |\n\n对于 $100\\%$ 的数据，$1\\le q\\le5\\times10^6,1\\le x_i\\le i,1\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TPOI-5B」回忆", "background": "回忆。\n\n沉溺于过去。\n\n「死期将至」\n\n「惟余旧忆」\n\n回忆。", "description": "对于一棵有根树，记 $u$ 的子树中**除 $u$ 以外**的点组成的集合为 $T_u$。\n\n定义点 $u$ 的权值 $f_u=\\text{mex}_{v\\in T_u}f_v$。特别地，若 $u$ 为叶子，则 $f_u=0$。\n\n现在给定一颗树，每个点 $i$ 除了上述定义的权值外还有一个给定的权重 $a_i$。\n\n这棵树初始只有根结点 $1$，权重为 $a_1$，有 $q$ 次操作，第 $i$ 次输入两个数 $x_i,a_{i+1}$ 代表加入一个新的结点 $i+1$，其权重为 $a_{i+1}$，它的父亲为 $x_i$，求加入这个点之后的 $\\sum\\limits_{j=1}^{i+1}a_jf_j$。\n\n答案对 $10^9+7$ 取模。\n\n注：每加入一个点后就自叶子结点向根更新 $f$ 的值。\n\n一个集合 $M$ 的 $\\operatorname{mex}(M)$ 定义为最小的没有在 $M$ 中出现的自然数。如 $\\text{mex}\\{1,2,3,4\\}=0,\\text{mex}\\{0,1,3,4\\}=2$。", "inputFormat": "第一行两个数 $q,a_1$，接下来接下来 $q$ 行每行两个数 $x_i,a_{i+1}$。", "outputFormat": "输出 $q$ 行，每行一个数，代表加入点 $i+1$ 后所有点的权值乘以权重的和对 $10^9+7$ 取模的结果。", "hint": "### 样例 1 解释\n树的形态如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/910pp86j.png)\n\n其中各点权值依次为 $3,2,1,0,1,0,0,0$。\n\n举例如对于 $2$ 号点，其子树内点有 $5,6,7$，权值分别为 $1,0,0$，MEX 为 $2$，所以 $2$ 的权值为 $2$。\n\n### 数据范围\n\n**本题 IO 量较大，请尝试使用更快的输入输出方式。**\n\n| $\\text{Subtask}$ | 子任务依赖 | $q\\le $ | $x_i$ | 特殊性质 | 时间限制 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | 无 | $5000$ | $x_i\\le i$ | 保证数据随机生成 | $1\\text s$ | $15$ |\n| $1$ | ^ | $10^5$ | $i-5\\le x_i\\le i$ | 无 | ^ | $5$ |\n| $2$ | ^ | ^ | $x_i\\le2$ | ^ | ^ | ^ |\n| $3$ | ^ | ^ | $x_i\\le i$ | 保证数据随机生成 | ^ | $15$ |\n| $4$ | $0,1,2,3$ | ^ | ^ | 无 | ^ | $20$ |\n| $5$ | $4$ | $10^6$ | ^ | ^ | ^ | $10$ |\n| $6$ | $5$ | $5\\times10^6$ | ^ | ^ | $4\\text s$ | $30$ |\n\n对于 $100\\%$ 的数据，$1\\le q\\le5\\times10^6,1\\le x_i\\le i,1\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P13664", "type": "P", "difficulty": 7, "samples": [["5 5 5\n0 1 0 1 2\n3 2 0 1 4\n5 4 3 0 1\n0 2 0 3 1\n0 0 0 1 2\n1 1 5 5\n2 2 4 4\n1 2 4 5\n3 2 4 4\n1 2 2 3", "2\n1\n2\n1\n1\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "树套树", "扫描线", "整体二分"], "title": "「TPOI-5C」mαtrixing ωiθ μ", "background": "**本题禁止卡评测。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qphit8fj.png?x-oss-process=image/resize,m_lfit,h_2170,w_2225)", "description": "在东京的大雨后，天野阳菜给了 kele7 一个 $n$ 行 $m$ 列的矩阵 $A$。从上往下第 $i$ 行，从左往右第 $j$ 列的元素被称为 $A_{i,j}$。\n\nkele7 喜欢删除矩阵。对于一个 $r$ 行 $c$ 列的矩阵 $B$，他会对它执行两种操作，同时会用**优雅值**衡量一个操作的优雅程度：\n\n- 删除矩阵的某一行 $B_{i,1},\\dots,B_{i,c}$，优雅值为 $\\text{mex}_{j=1}^cB_{i,j}$。然后将第 $i+1\\sim r$ 行往上平移一行，令 $r\\leftarrow r-1$。\n- 删除矩阵的某一列 $B_{1,i},\\dots,B_{r,i}$，优雅值为 $\\text{mex}_{j=1}^rB_{j,i}$。然后将第 $i+1\\sim c$ 列往左平移一列，令 $c\\leftarrow c-1$。\n\n最终 kele7 要将矩阵内的元素全部删除（即 $r$ 或 $c$ 变为 $0$）。定义一种删除方案 $S$ 的权值 $f(S)$ 为其中所有操作的优雅值的**最小值**。定义矩阵 $B$ 的权值 $F(B)$ 为所有删除它的方案 $S$ 中 $f(S)$ 的**最大值**。\n\nkele7 把这个题目给了 lzyqwq。lzyqwq 觉得还可以加上 $q$ 次查询，每次给出 $x_1,y_1,x_2,y_2$，你需要回答当矩阵 $B$ 为矩阵 $A$ 以 $A_{x_1,y_1}$ 为左上角元素、$A_{x_2,y_2}$ 为右下角元素的子矩阵时，$F(B)$ 的值。\n\n一个集合 $M$ 的 $\\operatorname{mex}(M)$ 定义为最小的没有在 $M$ 中出现的自然数。如 $\\text{mex}\\{1,2,3,4\\}=0,\\text{mex}\\{0,1,3,4\\}=2$。", "inputFormat": "第一行三个正整数 $n,m,q$。\n\n接下来 $n$ 行，每行 $m$ 个自然数。第 $i$ 行为 $A_{i,1},\\dots,A_{i,m}$。\n\n接下来 $q$ 行，每行四个整数 $x_1,y_1,x_2,y_2$ 表示一组询问。", "outputFormat": "$q$ 行，每行一个自然数，表示一个询问的答案。", "hint": "**【样例解释】**\n\n以第一个询问为例。初始矩阵 $B$ 为：\n\n$$\\begin{bmatrix}0&1&0&1&2\\\\3&2&0&1&4\\\\5&4&3&0&1\\\\0&2&0&3&1\\\\0&0&0&1&2\\end{bmatrix}$$\n\n一种可行的删除方案如下。\n\n先删除第二行，优雅值为 $5$，得到新的矩阵 $B$ 为：\n\n$$\\begin{bmatrix}0&1&0&1&2\\\\5&4&3&0&1\\\\0&2&0&3&1\\\\0&0&0&1&2\\end{bmatrix}$$\n\n再删除第二列，优雅值为 $3$，得到新的矩阵 $B$ 为：\n\n$$\\begin{bmatrix}0&0&1&2\\\\5&3&0&1\\\\0&0&3&1\\\\0&0&1&2\\end{bmatrix}$$\n\n再依次删除所有行，优雅值分别为 $3,2,2,3$。\n\n因此这种删除方案的权值为 $2$。可以证明，不存在优雅值的最小值更大的删除方案，因此答案为 $2$。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|$n,m$     |$q$       |特殊性质      |分值  |\n|:--------:|:--------:|:--------:|:--------:|:--:|\n|$0$       |$n\\times m\\le3\\times10^5$|$q=1$     |无         |$11$|\n|$1$       |$\\color{red}{n,m\\le300}$|$q\\le10^5$|^         |^   |\n|$2$       |$n\\times m\\le10^5$|^         |^         |$20$|\n|$3$       |$n\\times m\\le2\\times10^5$|$q\\le2\\times10^5$|^         |$24$|\n|$4$       |$n\\times m\\le3\\times10^5$|$q\\le3\\times10^5$|$x_1=y_1=1$|$8$ |\n|$5$       |^         |^         |无         |$26$|\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\times m,q\\le 3\\times 10^5$，$0\\le A_{i,j}\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TPOI-5C」mαtrixing ωiθ μ", "background": "**本题禁止卡评测。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qphit8fj.png?x-oss-process=image/resize,m_lfit,h_2170,w_2225)", "description": "在东京的大雨后，天野阳菜给了 kele7 一个 $n$ 行 $m$ 列的矩阵 $A$。从上往下第 $i$ 行，从左往右第 $j$ 列的元素被称为 $A_{i,j}$。\n\nkele7 喜欢删除矩阵。对于一个 $r$ 行 $c$ 列的矩阵 $B$，他会对它执行两种操作，同时会用**优雅值**衡量一个操作的优雅程度：\n\n- 删除矩阵的某一行 $B_{i,1},\\dots,B_{i,c}$，优雅值为 $\\text{mex}_{j=1}^cB_{i,j}$。然后将第 $i+1\\sim r$ 行往上平移一行，令 $r\\leftarrow r-1$。\n- 删除矩阵的某一列 $B_{1,i},\\dots,B_{r,i}$，优雅值为 $\\text{mex}_{j=1}^rB_{j,i}$。然后将第 $i+1\\sim c$ 列往左平移一列，令 $c\\leftarrow c-1$。\n\n最终 kele7 要将矩阵内的元素全部删除（即 $r$ 或 $c$ 变为 $0$）。定义一种删除方案 $S$ 的权值 $f(S)$ 为其中所有操作的优雅值的**最小值**。定义矩阵 $B$ 的权值 $F(B)$ 为所有删除它的方案 $S$ 中 $f(S)$ 的**最大值**。\n\nkele7 把这个题目给了 lzyqwq。lzyqwq 觉得还可以加上 $q$ 次查询，每次给出 $x_1,y_1,x_2,y_2$，你需要回答当矩阵 $B$ 为矩阵 $A$ 以 $A_{x_1,y_1}$ 为左上角元素、$A_{x_2,y_2}$ 为右下角元素的子矩阵时，$F(B)$ 的值。\n\n一个集合 $M$ 的 $\\operatorname{mex}(M)$ 定义为最小的没有在 $M$ 中出现的自然数。如 $\\text{mex}\\{1,2,3,4\\}=0,\\text{mex}\\{0,1,3,4\\}=2$。", "inputFormat": "第一行三个正整数 $n,m,q$。\n\n接下来 $n$ 行，每行 $m$ 个自然数。第 $i$ 行为 $A_{i,1},\\dots,A_{i,m}$。\n\n接下来 $q$ 行，每行四个整数 $x_1,y_1,x_2,y_2$ 表示一组询问。", "outputFormat": "$q$ 行，每行一个自然数，表示一个询问的答案。", "hint": "**【样例解释】**\n\n以第一个询问为例。初始矩阵 $B$ 为：\n\n$$\\begin{bmatrix}0&1&0&1&2\\\\3&2&0&1&4\\\\5&4&3&0&1\\\\0&2&0&3&1\\\\0&0&0&1&2\\end{bmatrix}$$\n\n一种可行的删除方案如下。\n\n先删除第二行，优雅值为 $5$，得到新的矩阵 $B$ 为：\n\n$$\\begin{bmatrix}0&1&0&1&2\\\\5&4&3&0&1\\\\0&2&0&3&1\\\\0&0&0&1&2\\end{bmatrix}$$\n\n再删除第二列，优雅值为 $3$，得到新的矩阵 $B$ 为：\n\n$$\\begin{bmatrix}0&0&1&2\\\\5&3&0&1\\\\0&0&3&1\\\\0&0&1&2\\end{bmatrix}$$\n\n再依次删除所有行，优雅值分别为 $3,2,2,3$。\n\n因此这种删除方案的权值为 $2$。可以证明，不存在优雅值的最小值更大的删除方案，因此答案为 $2$。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|$n,m$     |$q$       |特殊性质      |分值  |\n|:--------:|:--------:|:--------:|:--------:|:--:|\n|$0$       |$n\\times m\\le3\\times10^5$|$q=1$     |无         |$11$|\n|$1$       |$\\color{red}{n,m\\le300}$|$q\\le10^5$|^         |^   |\n|$2$       |$n\\times m\\le10^5$|^         |^         |$20$|\n|$3$       |$n\\times m\\le2\\times10^5$|$q\\le2\\times10^5$|^         |$24$|\n|$4$       |$n\\times m\\le3\\times10^5$|$q\\le3\\times10^5$|$x_1=y_1=1$|$8$ |\n|$5$       |^         |^         |无         |$26$|\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\times m,q\\le 3\\times 10^5$，$0\\le A_{i,j}\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P13665", "type": "P", "difficulty": 7, "samples": [["5 5\na\nab\nabab\nababab\nb\n1 5 4 5\n3 5 4 5\n1 5 2 4\n1 5 3 5\n2 4 3 4\n", "13\n7\n22\n20\n9\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "O2优化", "分块", "扫描线"], "title": "「TPOI-5D」「僕は…」", "background": "![](https://pic.kts.g.mi.com/e5e19c35ec3d824c4a6b5f7d094de6fd7605802814182560045.png)", "description": "由于你让我看到了世界的绮丽，所以需要解决一道题目。\n\n定义 $f(a,b)$ 为字符串 $a$ 在 $b$ 中出现的次数。\n\n给出 $n$ 个只包含小写字母的字符串 $s_1,\\dots,s_n$，$q$ 次询问 $l,r,L,R$，求：\n\n$$\\sum\\limits_{i=l}^r\\sum\\limits_{j=L}^Rf(s_i,s_j)$$", "inputFormat": "第一行输入两个正整数 $n,q$。\n\n接下来 $n$ 行输入 $n$ 个只包含小写字母的字符串 $s_1,\\dots,s_n$。\n\n接下来 $q$ 行输入 $q$ 个询问 $l,r,L,R$。", "outputFormat": "输出 $q$ 个正整数，为每个询问的答案。", "hint": "记 $m=\\sum\\limits_{i=1}^n|s_i|$。\n\n| $\\text{Subtask}$ | $n,m,q\\le$ |特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^2$ | 无 | $5$ | \n| $2$ | $2\\times 10^5$ | 所有字符串均为 `a` | ^ |\n| $3$ | $10^4$ | 无 | $10$ |\n| $4$ | $2\\times 10^5$ | 所有字符串的长度不超过 $10$ | ^ |\n| $5$ | ^ | $n\\le 10^2$ | ^ |\n| $6$ | $5\\times 10^4$ | 无 | $20$ |\n| $7$ | $2\\times 10^5$ | ^ | $40$ |\n\n\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,q\\le 2\\times 10^5$，$1\\le l\\le r\\le n$，$1\\le L\\le R\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TPOI-5D」「僕は…」", "background": "![](https://pic.kts.g.mi.com/e5e19c35ec3d824c4a6b5f7d094de6fd7605802814182560045.png)", "description": "由于你让我看到了世界的绮丽，所以需要解决一道题目。\n\n定义 $f(a,b)$ 为字符串 $a$ 在 $b$ 中出现的次数。\n\n给出 $n$ 个只包含小写字母的字符串 $s_1,\\dots,s_n$，$q$ 次询问 $l,r,L,R$，求：\n\n$$\\sum\\limits_{i=l}^r\\sum\\limits_{j=L}^Rf(s_i,s_j)$$", "inputFormat": "第一行输入两个正整数 $n,q$。\n\n接下来 $n$ 行输入 $n$ 个只包含小写字母的字符串 $s_1,\\dots,s_n$。\n\n接下来 $q$ 行输入 $q$ 个询问 $l,r,L,R$。", "outputFormat": "输出 $q$ 个正整数，为每个询问的答案。", "hint": "记 $m=\\sum\\limits_{i=1}^n|s_i|$。\n\n| $\\text{Subtask}$ | $n,m,q\\le$ |特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^2$ | 无 | $5$ | \n| $2$ | $2\\times 10^5$ | 所有字符串均为 `a` | ^ |\n| $3$ | $10^4$ | 无 | $10$ |\n| $4$ | $2\\times 10^5$ | 所有字符串的长度不超过 $10$ | ^ |\n| $5$ | ^ | $n\\le 10^2$ | ^ |\n| $6$ | $5\\times 10^4$ | 无 | $20$ |\n| $7$ | $2\\times 10^5$ | ^ | $40$ |\n\n\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,q\\le 2\\times 10^5$，$1\\le l\\le r\\le n$，$1\\le L\\le R\\le n$。", "locale": "zh-CN"}}}
{"pid": "P13666", "type": "P", "difficulty": 7, "samples": [["2\ncircle 2\ntriangle 2", "2"], ["2\ncircle 1\ncircle 2", "3"], ["5\ncircle 123\ntriangle 456\nsquare 789\nsquare 789\ntriangle 555", "7"], ["3\ncircle 299303201\nsquare 79724391\ntriangle 437068198", "3"], ["3\nsquare 539715887\ncircle 518408351\ntriangle 348712924", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "ICPC"], "title": "[GCPC 2023] Adolescent Architecture 2", "background": "", "description": "Three years ago, you helped little Peter stack his toy blocks into a tower. Since then, he has extended his collection of toy blocks, which now features the following base shapes:\n\n- $\\texttt{circle}\\;a$ - a circle of radius $a$;\n- $\\texttt{square}\\;a$ - a square with side length $a$;\n- $\\texttt{triangle}\\;a$ - an equilateral triangle with side length $a$.\n\nHere, $a$ may be any positive integer. The top shapes of each block are the same as their bottom shapes, so the blocks are cuboids, cylinders, and triangular prisms, respectively. Peter has an infinite supply of blocks of each shape and size.\n\n![A game in progress.](https://cdn.luogu.com.cn/upload/image_hosting/u6yfox4n.png)\n\n:::align{center}\nFigure A.1: A game in progress.\n:::\n\nPeter and his friend Amy are playing a two-player game, where the blocks need to be stacked on top of each other.\nInitially, some blocks are already placed on the floor.\nIn each move, the current player must take a toy block from the infinite supply and put it on top of one of the existing stacks of blocks.\nThe block may be rotated around its vertical axis before placing it.\nThe outline of the new block must be strictly within the outline of the old block; the outlines are not allowed to touch.\nThe first player who is unable to make a move loses the game.\n\nGiven the initial configuration, determine the number of winning moves for the first player.", "inputFormat": "The input consists of:\n\n- One line with an integer $n$ ($1 \\le n \\le 1000$), the number of initial stacks.\n- $n$ lines, each with a string $s$ ($s$ is one of \"$\\texttt{circle}$\", \"$\\texttt{square}$\" or \"$\\texttt{triangle}$\") and an integer $a$ ($1 \\le a \\le 10^9$), giving the topmost blocks of the initial stacks as described above.\n", "outputFormat": "Output the number of winning moves for the first player.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mou2c2y4.png)\n\nFigure A.2: Illustration of Sample Input 2, showing all possible end configurations of the game when Peter went first and played optimally to win. The blue blocks are the initial configuration. Peter needs to put one of $\\texttt{circle\\;1}$, $\\texttt{square\\;2}$ or $\\texttt{triangle\\;3}$ on top of $\\texttt{circle\\;2}$ in order to win. Each of these options corresponds to one row of the figure. Blocks placed by Peter are coloured in red, and blocks placed by Amy are coloured in yellow. As the last two blocks are always of type $\\texttt{triangle\\;1}$, they are shown in grey. If, for instance, Peter first puts $\\texttt{circle\\;1}$ (as depicted in the first row), then Peter can win by mirroring the following moves by Amy.\n\n\n", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Adolescent Architecture 2", "background": "", "description": "Three years ago, you helped little Peter stack his toy blocks into a tower. Since then, he has extended his collection of toy blocks, which now features the following base shapes:\n\n- $\\texttt{circle}\\;a$ - a circle of radius $a$;\n- $\\texttt{square}\\;a$ - a square with side length $a$;\n- $\\texttt{triangle}\\;a$ - an equilateral triangle with side length $a$.\n\nHere, $a$ may be any positive integer. The top shapes of each block are the same as their bottom shapes, so the blocks are cuboids, cylinders, and triangular prisms, respectively. Peter has an infinite supply of blocks of each shape and size.\n\n![A game in progress.](https://cdn.luogu.com.cn/upload/image_hosting/u6yfox4n.png)\n\n:::align{center}\nFigure A.1: A game in progress.\n:::\n\nPeter and his friend Amy are playing a two-player game, where the blocks need to be stacked on top of each other.\nInitially, some blocks are already placed on the floor.\nIn each move, the current player must take a toy block from the infinite supply and put it on top of one of the existing stacks of blocks.\nThe block may be rotated around its vertical axis before placing it.\nThe outline of the new block must be strictly within the outline of the old block; the outlines are not allowed to touch.\nThe first player who is unable to make a move loses the game.\n\nGiven the initial configuration, determine the number of winning moves for the first player.", "inputFormat": "The input consists of:\n\n- One line with an integer $n$ ($1 \\le n \\le 1000$), the number of initial stacks.\n- $n$ lines, each with a string $s$ ($s$ is one of \"$\\texttt{circle}$\", \"$\\texttt{square}$\" or \"$\\texttt{triangle}$\") and an integer $a$ ($1 \\le a \\le 10^9$), giving the topmost blocks of the initial stacks as described above.\n", "outputFormat": "Output the number of winning moves for the first player.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mou2c2y4.png)\n\nFigure A.2: Illustration of Sample Input 2, showing all possible end configurations of the game when Peter went first and played optimally to win. The blue blocks are the initial configuration. Peter needs to put one of $\\texttt{circle\\;1}$, $\\texttt{square\\;2}$ or $\\texttt{triangle\\;3}$ on top of $\\texttt{circle\\;2}$ in order to win. Each of these options corresponds to one row of the figure. Blocks placed by Peter are coloured in red, and blocks placed by Amy are coloured in yellow. As the last two blocks are always of type $\\texttt{triangle\\;1}$, they are shown in grey. If, for instance, Peter first puts $\\texttt{circle\\;1}$ (as depicted in the first row), then Peter can win by mirroring the following moves by Amy.\n\n\n", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Adolescent Architecture 2", "background": null, "description": "三年前，你曾帮助小彼得将他的玩具积木堆成一座高塔。从那以后，他扩充了自己的玩具积木收藏，如今拥有以下几种基础形状：\n\n- $\\texttt{circle}\\;a$ —— 半径为 $a$ 的圆形；\n- $\\texttt{square}\\;a$ —— 边长为 $a$ 的正方形；\n- $\\texttt{triangle}\\;a$ —— 边长为 $a$ 的等边三角形。\n\n其中，$a$ 可以是任意正整数。每个积木的顶部和底部形状相同，因此这些积木分别是长方体、圆柱体和三棱柱。彼得拥有无限数量的每种形状和尺寸的积木。\n\n![游戏进行中。](https://cdn.luogu.com.cn/upload/image_hosting/u6yfox4n.png)\n\n:::align{center}\n图 A.1：游戏进行中。\n:::\n\n彼得和他的朋友 Amy 正在玩一个双人游戏，规则是将积木依次堆叠在一起。\n一开始，地板上已经放置了一些积木。\n每一回合，当前玩家必须从无限的积木中选择一个，并将其放在现有某一堆的顶部。\n在放置之前，积木可以绕其竖直轴旋转。\n新积木的轮廓必须严格位于旧积木的轮廓之内，轮廓之间不能接触。\n无法进行操作的第一个玩家判负。\n\n给定初始状态，求先手玩家的必胜步数。", "inputFormat": "输入包括：\n\n- 第一行包含一个整数 $n$（$1 \\le n \\le 1000$），表示初始堆的数量。\n- 接下来 $n$ 行，每行包含一个字符串 $s$（$s$ 为 \"$\\texttt{circle}$\"、\"$\\texttt{square}$\" 或 \"$\\texttt{triangle}$\" 之一）和一个整数 $a$（$1 \\le a \\le 10^9$），描述每一堆顶部的积木。", "outputFormat": "输出一个整数，表示先手玩家的必胜步数。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mou2c2y4.png)\n\n图 A.2：样例输入 2 的示意图，展示了当彼得先手并采取最优策略时，游戏所有可能的结束状态。蓝色积木为初始状态。彼得需要在 $\\texttt{circle\\;2}$ 上放置 $\\texttt{circle\\;1}$、$\\texttt{square\\;2}$ 或 $\\texttt{triangle\\;3}$ 中的任意一个，才能获胜。这三种选择分别对应图中的三行。彼得放置的积木用红色表示，Amy 放置的积木用黄色表示。由于最后两个积木总是 $\\texttt{triangle\\;1}$，因此用灰色表示。例如，如果彼得首先放置 $\\texttt{circle\\;1}$（如第一行所示），那么彼得可以通过镜像 Amy 的后续操作来获胜。\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13667", "type": "P", "difficulty": 4, "samples": [["6\n0 0\n1 1\n2 4\n3 9\n4 16\n5 25", "possible"], ["7\n0 0\n1 1\n2 4\n3 9\n4 16\n5 25\n6 36", "impossible"], ["7\n-1 -1\n0 0\n1 1\n2 4\n3 9\n4 16\n5 25", "possible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "鸽笼原理", "随机化", "构造", "ICPC"], "title": "[GCPC 2023] Balloon Darts", "background": "", "description": "As you may know, you get a colourful balloon for each problem you solve in an ICPC contest.\nYou were quite successful in your last contest\nand now you own a remarkable collection of $n$ balloons.\nThe obvious thing to do with these balloons is to pop them all using darts.\nHowever, you only have three darts.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lkiybcb.png)\n\n:::align{center}\nPopping balloons as an amusement park attraction. Photo by blende12, [Pixabay](https://pixabay.com/photos/balloon-leisure-time-4525887/)\n:::\n\nThe balloons are modelled as points in the plane with fixed locations.\nFor each dart you choose from where and in which direction to throw it.\nThe dart travels in a straight line, popping all balloons in its way.\n\nAs you practised a lot during the last years,\nyou can throw a dart precisely in any direction and it will fly infinitely far.\nThus, if anyone can pop all the balloons, it is you. \nHowever, before the fun begins, you first need to determine\nif you can pop all balloons using at most three darts.", "inputFormat": "The input consists of:\n- One line containing an integer $n$ ($1 \\leq n \\leq 10^4$), the number of balloons.\n- $n$ lines, each containing two integers $x$ and $y$ ($|x|, |y| \\leq 10^9$), the coordinates of a balloon.\n\nIt is guaranteed that no two balloons are at the same location.", "outputFormat": "Output \"$\\texttt{possible}$\" if three darts are sufficient to pop all balloons and \"$\\texttt{impossible}$\" otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Balloon Darts", "background": "", "description": "As you may know, you get a colourful balloon for each problem you solve in an ICPC contest.\nYou were quite successful in your last contest\nand now you own a remarkable collection of $n$ balloons.\nThe obvious thing to do with these balloons is to pop them all using darts.\nHowever, you only have three darts.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lkiybcb.png)\n\n:::align{center}\nPopping balloons as an amusement park attraction. Photo by blende12, [Pixabay](https://pixabay.com/photos/balloon-leisure-time-4525887/)\n:::\n\nThe balloons are modelled as points in the plane with fixed locations.\nFor each dart you choose from where and in which direction to throw it.\nThe dart travels in a straight line, popping all balloons in its way.\n\nAs you practised a lot during the last years,\nyou can throw a dart precisely in any direction and it will fly infinitely far.\nThus, if anyone can pop all the balloons, it is you. \nHowever, before the fun begins, you first need to determine\nif you can pop all balloons using at most three darts.", "inputFormat": "The input consists of:\n- One line containing an integer $n$ ($1 \\leq n \\leq 10^4$), the number of balloons.\n- $n$ lines, each containing two integers $x$ and $y$ ($|x|, |y| \\leq 10^9$), the coordinates of a balloon.\n\nIt is guaranteed that no two balloons are at the same location.", "outputFormat": "Output \"$\\texttt{possible}$\" if three darts are sufficient to pop all balloons and \"$\\texttt{impossible}$\" otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Balloon Darts", "background": null, "description": "如你所知，在 ICPC 比赛中，每解决一道题目你就会获得一个彩色气球。\n你在上一次比赛中表现出色，现在拥有了 $n$ 个令人瞩目的气球收藏。\n显而易见，你想用飞镖把这些气球全部戳破。\n然而，你只有三支飞镖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lkiybcb.png)\n\n:::align{center}\n游乐园里的气球射击项目。图片来自 blende12，[Pixabay](https://pixabay.com/photos/balloon-leisure-time-4525887/)\n:::\n\n这些气球被建模为平面上的点，位置固定。\n每次投掷飞镖时，你可以自由选择起点和方向。\n飞镖会沿着一条直线飞行，将路径上的所有气球全部戳破。\n\n由于你在过去几年里练习了很多，\n你可以精确地朝任意方向投掷飞镖，并且飞镖会无限远地飞行。\n因此，如果有人能用三支飞镖戳破所有气球，那一定是你。\n不过，在开始享受乐趣之前，你需要先判断\n是否可以用至多三支飞镖戳破所有气球。", "inputFormat": "输入包括：\n- 第一行包含一个整数 $n$（$1 \\leq n \\leq 10^4$），表示气球的数量。\n- 接下来 $n$ 行，每行包含两个整数 $x$ 和 $y$（$|x|, |y| \\leq 10^9$），表示一个气球的坐标。\n\n保证没有两个气球在同一位置。", "outputFormat": "如果三支飞镖足以戳破所有气球，输出“possible”；否则输出“impossible”。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13668", "type": "P", "difficulty": 3, "samples": [["5 5 3\n2 3 4\n1 2\n1 3\n2 4\n3 4\n4 5", "5/2"], ["5 6 3\n2 3 4\n1 2\n1 3\n2 4\n3 4\n4 5\n1 4", "2/1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[GCPC 2023] Cosmic Commute", "background": "", "description": "A long time ago, in a galaxy far, far away, the InterCosmic Passage Company (ICPC) operates a complex railway system using *light trains*.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bjjmufd.png)\n\nA wormhole above Gallifrey, [mau\\_king](https://pixabay.com/de/photos/milchstra\\%c3\\%9fe-wurmloch-5904640/)\n:::\n\nEach planet has exactly one train station and each light train connects two distinct planets of the galaxy, going back and forth between them. \nJust recently, the InterCosmic Passage Company established a teleportation system, which is now in its testing phase. \nSome train stations are now extended by a *wormhole*. \nAll wormholes are connected to each other, and it is possible to teleport from one wormhole to another instantaneously. \nTo not overload the new system, each citizen of the galaxy is only allowed to teleport at most once a day.   \n\nCharlie lives on planet Gallifrey and works on planet Sontar. \nIt is her first day of work, and she is already terribly late because her stupid alarm clock did not go off. \nOn top of that, the new teleportation system is malfunctioning today of all days, and the destination wormhole cannot be chosen.\nInstead, after entering a wormhole, one is teleported to a wormhole that is chosen uniformly at random among all other wormholes.\n(It is impossible to be at the same train station after teleportation.)\n\nDespite all her bad luck, Charlie is dead set on getting to work on time. \nSince all light trains are very slow, she wants to take as few light trains as possible. \nWhat is the expected minimum number of light trains she has to take to get to work if she can use the (malfunctioning) teleportation system at most once?  \n\n", "inputFormat": "The input consists of:\n\n- One line with integers $n, m, k$ ($2 \\leq n \\leq 2\\cdot10^5,$ $n - 1 \\leq m \\leq 10^6, 2\\leq k\\leq n$), the number of planets in the galaxy, light trains and wormholes. Planet $1$ is Charlie's home planet Gallifrey, and planet $n$ is Sontar, where Charlie works.\n- One line containing $k$ distinct integers, the planets whose train stations each have a wormhole (in addition to the light trains).\n- $m$ lines, each containing two integers $a$ and $b$ ($1 \\leq a,b \\leq n$ and $a \\neq b$), describing a light train between the planets $a$ and $b$. It is guaranteed that all light trains are pairwise disjoint.\n\nIt is guaranteed that it is possible to travel from any planet to any other planet of the galaxy using only light trains.", "outputFormat": "Output a single reduced fraction, the expected minimum number of light trains Charlie has to take to get to work if she can use the (malfunctioning) teleportation system at most once.\n\nOutput the fraction as \"$\\texttt{a/b}$\", where $a$ is the numerator and $b$ is the denominator.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Cosmic Commute", "background": "", "description": "A long time ago, in a galaxy far, far away, the InterCosmic Passage Company (ICPC) operates a complex railway system using *light trains*.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bjjmufd.png)\n\nA wormhole above Gallifrey, [mau\\_king](https://pixabay.com/de/photos/milchstra\\%c3\\%9fe-wurmloch-5904640/)\n:::\n\nEach planet has exactly one train station and each light train connects two distinct planets of the galaxy, going back and forth between them. \nJust recently, the InterCosmic Passage Company established a teleportation system, which is now in its testing phase. \nSome train stations are now extended by a *wormhole*. \nAll wormholes are connected to each other, and it is possible to teleport from one wormhole to another instantaneously. \nTo not overload the new system, each citizen of the galaxy is only allowed to teleport at most once a day.   \n\nCharlie lives on planet Gallifrey and works on planet Sontar. \nIt is her first day of work, and she is already terribly late because her stupid alarm clock did not go off. \nOn top of that, the new teleportation system is malfunctioning today of all days, and the destination wormhole cannot be chosen.\nInstead, after entering a wormhole, one is teleported to a wormhole that is chosen uniformly at random among all other wormholes.\n(It is impossible to be at the same train station after teleportation.)\n\nDespite all her bad luck, Charlie is dead set on getting to work on time. \nSince all light trains are very slow, she wants to take as few light trains as possible. \nWhat is the expected minimum number of light trains she has to take to get to work if she can use the (malfunctioning) teleportation system at most once?  \n\n", "inputFormat": "The input consists of:\n\n- One line with integers $n, m, k$ ($2 \\leq n \\leq 2\\cdot10^5,$ $n - 1 \\leq m \\leq 10^6, 2\\leq k\\leq n$), the number of planets in the galaxy, light trains and wormholes. Planet $1$ is Charlie's home planet Gallifrey, and planet $n$ is Sontar, where Charlie works.\n- One line containing $k$ distinct integers, the planets whose train stations each have a wormhole (in addition to the light trains).\n- $m$ lines, each containing two integers $a$ and $b$ ($1 \\leq a,b \\leq n$ and $a \\neq b$), describing a light train between the planets $a$ and $b$. It is guaranteed that all light trains are pairwise disjoint.\n\nIt is guaranteed that it is possible to travel from any planet to any other planet of the galaxy using only light trains.", "outputFormat": "Output a single reduced fraction, the expected minimum number of light trains Charlie has to take to get to work if she can use the (malfunctioning) teleportation system at most once.\n\nOutput the fraction as \"$\\texttt{a/b}$\", where $a$ is the numerator and $b$ is the denominator.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Cosmic Commute", "background": null, "description": "很久很久以前，在一个遥远的星系中，星际通道公司（ICPC）运营着一个复杂的铁路系统，使用着“光速列车”。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bjjmufd.png)\n\n盖利弗雷上方的虫洞，图片来源：[mau\\_king](https://pixabay.com/de/photos/milchstra\\%c3\\%9fe-wurmloch-5904640/)\n:::\n\n每个星球恰好有一个火车站，每列光速列车连接两个不同的星球，并在它们之间往返运行。\n最近，星际通道公司建立了一个传送系统，目前正处于测试阶段。\n一些火车站现在扩建了一个“虫洞”。\n所有虫洞彼此相连，可以瞬间从一个虫洞传送到另一个虫洞。\n为了不让新系统过载，每个星系公民每天最多只能使用一次传送。\n\n查理住在盖利弗雷星球，在桑塔星球工作。\n今天是她第一天上班，但她已经迟到了，因为她愚蠢的闹钟没有响。\n更糟糕的是，今天偏偏传送系统还出现了故障，无法选择目的地虫洞。\n现在，进入虫洞后，会被随机传送到所有其他虫洞中的某一个（每个虫洞被选中的概率相同）。\n（不可能在传送后还停留在同一个火车站。）\n\n尽管运气很差，查理还是决心按时到达公司。\n由于所有光速列车都很慢，她希望乘坐尽可能少的光速列车。\n如果她最多只能使用一次（故障的）传送系统，求她到达公司的最小期望乘坐光速列车次数。", "inputFormat": "输入包含：\n\n- 一行三个整数 $n, m, k$（$2 \\leq n \\leq 2\\cdot10^5$，$n-1 \\leq m \\leq 10^6$，$2 \\leq k \\leq n$），分别表示星球数、光速列车数和虫洞数。第 $1$ 号星球是查理的家（盖利弗雷），第 $n$ 号星球是她工作的地方（桑塔）。\n- 一行 $k$ 个互不相同的整数，表示每个拥有虫洞的星球编号（这些火车站除了光速列车外还拥有虫洞）。\n- 接下来 $m$ 行，每行两个整数 $a$ 和 $b$（$1 \\leq a, b \\leq n$ 且 $a \\neq b$），表示在星球 $a$ 和 $b$ 之间有一列光速列车。保证所有光速列车两两不同。\n- 保证仅使用光速列车可以从任意星球到达任意其他星球。", "outputFormat": "输出一个最简分数，表示查理在最多使用一次（故障的）传送系统的情况下，到达公司的最小期望乘坐光速列车次数。\n\n输出格式为“$\\texttt{a/b}$”，其中 $a$ 是分子，$b$ 是分母。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13669", "type": "P", "difficulty": 3, "samples": [["1 1 1 0 0", "11 10 9 12 8 13 14 7 15 6 5 16 17 4 18 3"], ["2 0 0 1 0", "9 14 12 11 10 13 15 8 16 7 6 17 5 18 4 19 3 20"], ["0 0 0 0 1", "10 3 9 8 14 13 11 7 6 12 20 4 15 5 16 1 2 19 17 18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "ICPC"], "title": "[GCPC 2023] DnD Dice", "background": "", "description": "In *Dungeons \\& Dragons* (DnD) and many other role playing games, many\nactions are determined by dice rolls, and it is also quite common to use dice\nwith different numbers of sides. The most common dice are those based on the\nfive Platonic solids, the tetrahedron, cube, octahedron, dodecahedron and\nicosahedron, with $4$, $6$, $8$, $12$ and $20$ sides, respectively. In DnD\nterminology, these dice are usually called d4, d6, d8, d12 and d20.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flvm7fum.png)\n\n:::align{center}\nThe five standard dice, [Ramona Trusheim](https://commons.wikimedia.org/wiki/File:Spielw%C3%BCrfel_(als_Modelle_Platonischer_K%C3%B6rper_und_Trapezoeder).jpg)\n:::\n\nAs a dungeon master, you are currently designing a campaign for your group of\nplayers. In the final battle of this campaign, the players need to roll a\ncombination of multiple dice with varying numbers of sides, and the action of\nthe enemy is determined by the sum of the numbers on the dice that were rolled.\nFor balancing purposes, you want to sort these sums based on how likely they\nare to occur, so that you can assign appropriate events to each of them.\n\nGiven the number of dice of each type, and assuming the sides of each die are\nnumbered from $1$ to the number of sides, find all possible sums of dice rolls\nand output them sorted by non-increasing probability.\n\n", "inputFormat": "The input consists of:\n- One line with five integers $t$, $c$, $o$, $d$ and $i$, ($0 \\le t, c, o, d, i \\le 10$), giving the number of tetrahedra, cubes, octahedra, dodecahedra and icosahedra among the dice that are rolled. There is always at least one die, that is $t+c+o+d+i \\ge 1$.\n", "outputFormat": "Output all possible sums, ordered from most likely to least likely. If two sums occur with the same probability, then those sums may be printed in any relative order.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] DnD Dice", "background": "", "description": "In *Dungeons \\& Dragons* (DnD) and many other role playing games, many\nactions are determined by dice rolls, and it is also quite common to use dice\nwith different numbers of sides. The most common dice are those based on the\nfive Platonic solids, the tetrahedron, cube, octahedron, dodecahedron and\nicosahedron, with $4$, $6$, $8$, $12$ and $20$ sides, respectively. In DnD\nterminology, these dice are usually called d4, d6, d8, d12 and d20.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flvm7fum.png)\n\n:::align{center}\nThe five standard dice, [Ramona Trusheim](https://commons.wikimedia.org/wiki/File:Spielw%C3%BCrfel_(als_Modelle_Platonischer_K%C3%B6rper_und_Trapezoeder).jpg)\n:::\n\nAs a dungeon master, you are currently designing a campaign for your group of\nplayers. In the final battle of this campaign, the players need to roll a\ncombination of multiple dice with varying numbers of sides, and the action of\nthe enemy is determined by the sum of the numbers on the dice that were rolled.\nFor balancing purposes, you want to sort these sums based on how likely they\nare to occur, so that you can assign appropriate events to each of them.\n\nGiven the number of dice of each type, and assuming the sides of each die are\nnumbered from $1$ to the number of sides, find all possible sums of dice rolls\nand output them sorted by non-increasing probability.\n\n", "inputFormat": "The input consists of:\n- One line with five integers $t$, $c$, $o$, $d$ and $i$, ($0 \\le t, c, o, d, i \\le 10$), giving the number of tetrahedra, cubes, octahedra, dodecahedra and icosahedra among the dice that are rolled. There is always at least one die, that is $t+c+o+d+i \\ge 1$.\n", "outputFormat": "Output all possible sums, ordered from most likely to least likely. If two sums occur with the same probability, then those sums may be printed in any relative order.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] DnD Dice", "background": null, "description": "在 *Dungeons & Dragons*（DnD）以及许多其他角色扮演游戏中，许多行动都由掷骰子决定，而且通常会使用不同面数的骰子。最常见的骰子基于五种柏拉图立体：四面体、立方体、八面体、十二面体和二十面体，分别有 $4$、$6$、$8$、$12$ 和 $20$ 个面。在 DnD 的术语中，这些骰子通常被称为 d4、d6、d8、d12 和 d20。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flvm7fum.png)\n\n:::align{center}\n五种标准骰子，[Ramona Trusheim](https://commons.wikimedia.org/wiki/File:Spielw%C3%BCrfel_(als_Modelle_Platonischer_K%C3%B6rper_und_Trapezoeder).jpg)\n:::\n\n作为一名地下城主，你正在为你的玩家小队设计一个冒险。在这个冒险的最终战斗中，玩家需要掷出多种不同面数的骰子的组合，敌人的行动由掷出的所有骰子的点数之和决定。为了平衡游戏，你希望根据这些和出现的概率对它们进行排序，以便为每个和分配合适的事件。\n\n给定每种类型骰子的数量，并假设每个骰子的面从 $1$ 编号到其最大面数，找出所有可能的掷骰子点数之和，并按概率从高到低输出。", "inputFormat": "输入包含一行五个整数 $t$、$c$、$o$、$d$ 和 $i$，($0 \\le t, c, o, d, i \\le 10$)，分别表示掷出的四面体、立方体、八面体、十二面体和二十面体的数量。保证至少有一个骰子，即 $t+c+o+d+i \\ge 1$。", "outputFormat": "输出所有可能的点数之和，按出现概率从高到低排序。如果两个和出现的概率相同，则它们的输出顺序可以任意。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13670", "type": "P", "difficulty": 1, "samples": [["AUFREISSEN", "aufreissen\naufreiBen"], ["MASSSTAB", "massstab\nmaBstab\nmasBtab"], ["EINDEUTIG", "eindeutig"], ["S", "s"], ["STRASSE", "strasse\nstraBe"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "字符串", "2023", "Special Judge", "枚举", "ICPC"], "title": "[GCPC 2023] Eszett", "background": "", "description": "For those trying to learn German, the letter 'ß', called *Eszett* or *sharp S*,\nis usually a source of great confusion.\nThis letter is unique to the German language and it looks similar to a 'b' but is pronounced like an 's'.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u376ek1e.png)\n\n:::align{center}\nAdemonstration of the $\\texttt{upper}$ function in Python\n:::\n\nAdding to the confusion is the fact that, until a few years ago, only a lowercase version of 'ß' existed in standard German orthography.\nWherever an uppercase 'ß' was needed, for example in legal documents and shop signs,\nit was (and usually still is) replaced by capital double letters 'SS'.\nIn 2017, the capital 'ẞ' was officially introduced into the German language and may now be used in those scenarios, instead.\n\nOther than being confusing for foreigners, the practice of replacing 'ß' with\n'SS' also introduces some ambiguity because a given uppercase word\nfeaturing one or more occurrences of 'SS' may correspond to multiple different\nlowercase words, depending on whether each 'SS' is a capitalized 'ß' or 'ss'.\n\nGiven one uppercase word, find all the lowercase words that it could be derived from.\nAs the letter 'ß' is not part of the ASCII range,\nplease write an uppercase 'B', instead.\n", "inputFormat": "The input consists of:\n- One line with a string $s$ ($1 \\le |s| \\le 20$) consisting of uppercase letters.\n\nIt is guaranteed that the letter $\\texttt{S}$ occurs at most three times in $s$. Note that $s$ need not be an actual German word.", "outputFormat": "Output all the possible lowercase strings corresponding to $s$. Any order will be accepted, but each string must occur exactly once.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Eszett", "background": "", "description": "For those trying to learn German, the letter 'ß', called *Eszett* or *sharp S*,\nis usually a source of great confusion.\nThis letter is unique to the German language and it looks similar to a 'b' but is pronounced like an 's'.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u376ek1e.png)\n\n:::align{center}\nAdemonstration of the $\\texttt{upper}$ function in Python\n:::\n\nAdding to the confusion is the fact that, until a few years ago, only a lowercase version of 'ß' existed in standard German orthography.\nWherever an uppercase 'ß' was needed, for example in legal documents and shop signs,\nit was (and usually still is) replaced by capital double letters 'SS'.\nIn 2017, the capital 'ẞ' was officially introduced into the German language and may now be used in those scenarios, instead.\n\nOther than being confusing for foreigners, the practice of replacing 'ß' with\n'SS' also introduces some ambiguity because a given uppercase word\nfeaturing one or more occurrences of 'SS' may correspond to multiple different\nlowercase words, depending on whether each 'SS' is a capitalized 'ß' or 'ss'.\n\nGiven one uppercase word, find all the lowercase words that it could be derived from.\nAs the letter 'ß' is not part of the ASCII range,\nplease write an uppercase 'B', instead.\n", "inputFormat": "The input consists of:\n- One line with a string $s$ ($1 \\le |s| \\le 20$) consisting of uppercase letters.\n\nIt is guaranteed that the letter $\\texttt{S}$ occurs at most three times in $s$. Note that $s$ need not be an actual German word.", "outputFormat": "Output all the possible lowercase strings corresponding to $s$. Any order will be accepted, but each string must occur exactly once.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Eszett", "background": null, "description": "对于正在学习德语的人来说，字母“ß”（称为 *Eszett* 或 *sharp S*）通常会让人感到非常困惑。\n这个字母是德语独有的，看起来类似于“b”，但发音像“s”。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u376ek1e.png)\n\n:::align{center}\nPython 中 $\\texttt{upper}$ 函数的演示\n:::\n\n更让人困惑的是，直到几年前，标准德语正字法中只存在小写的“ß”。\n在需要大写“ß”的场合，例如法律文件和商店招牌中，\n它通常（现在也常常如此）被大写双字母“SS”所替代。\n2017 年，德语正式引入了大写“ẞ”，从此可以在这些场合中使用。\n\n除了让外国人困惑之外，用“SS”替代“ß”的做法还会引入一些歧义，因为一个包含一个或多个“SS”的大写单词，\n可能对应多个不同的小写单词，具体取决于每个“SS”究竟是大写的“ß”还是“ss”。\n\n给定一个大写单词，找出所有可能由它转换而来的小写单词。\n由于字母“ß”不属于 ASCII 范围，请用大写字母“B”来代替。", "inputFormat": "输入包含一行字符串 $s$（$1 \\le |s| \\le 20$），由大写字母组成。\n\n保证字母 $\\texttt{S}$ 在 $s$ 中最多出现三次。注意，$s$ 不一定是实际存在的德语单词。", "outputFormat": "输出所有可能对应于 $s$ 的小写字符串。顺序不限，但每个字符串只能出现一次。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13671", "type": "P", "difficulty": 5, "samples": [["3 3\n0 0 1", "possible"], ["6 3\n1 0 1 1 0 1", "possible"], ["6 2\n1 0 1 1 0 1", "impossible"], ["5 2\n1 2 3 2 2", "impossible"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[GCPC 2023] Freestyle Masonry", "background": "", "description": "Fred got a simple task, he just has to build a $w\\times h$ wall.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jdfpt5uu.png)\n\n:::align{center}\nAn interesting brick layout, photo by [Bobo Boom](https://commons.wikimedia.org/wiki/File:Intricate_patterns_in_brick-laying_(29947248771).jpg)\n:::\n\nTo make this even easier, he was provided with enough $2\\times1$ bricks and also a few $1\\times1$ bricks to complete the wall.\nKnowing that this task should not be too hard, Fred went to work and started building the wall without thinking too much about the design.\nOnly when he ran out of $1\\times1$ bricks, Fred noticed that this might have been a bad idea...\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f5wolnfs.png)\n\nFigure F.1: Visualization of Sample Input 2. The red bricks have already been placed by Fred. The blue bricks still need to be placed to complete the wall (the only possible design in this case).\n:::\n\nMaybe he should have made a plan before starting to build the wall, but now it is too late.\nFred only has a bunch of $2\\times1$ bricks left and wants to finish the wall.\nCan he still complete it with the remaining $2\\times 1$ bricks?\nNote that the wall to be built should have a width of exactly $w$ units and a height of exactly $h$ units.", "inputFormat": "The input consists of:\n- One line with two integers $w$ and $h$ ($1\\leq w\\leq2\\cdot10^5$, $1\\leq h\\leq10^6$), the width and height of the wall Fred wants to build.\n- One line with $w$ integers $h_1,\\dots,h_n$ ($0\\leq h_i\\leq 10^6$), where $h_i$ is the current height of the wall at position $i$.", "outputFormat": "Output \"$\\texttt{possible}$\" if Fred can complete his wall and \"$\\texttt{impossible}$\" otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Freestyle Masonry", "background": "", "description": "Fred got a simple task, he just has to build a $w\\times h$ wall.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jdfpt5uu.png)\n\n:::align{center}\nAn interesting brick layout, photo by [Bobo Boom](https://commons.wikimedia.org/wiki/File:Intricate_patterns_in_brick-laying_(29947248771).jpg)\n:::\n\nTo make this even easier, he was provided with enough $2\\times1$ bricks and also a few $1\\times1$ bricks to complete the wall.\nKnowing that this task should not be too hard, Fred went to work and started building the wall without thinking too much about the design.\nOnly when he ran out of $1\\times1$ bricks, Fred noticed that this might have been a bad idea...\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f5wolnfs.png)\n\nFigure F.1: Visualization of Sample Input 2. The red bricks have already been placed by Fred. The blue bricks still need to be placed to complete the wall (the only possible design in this case).\n:::\n\nMaybe he should have made a plan before starting to build the wall, but now it is too late.\nFred only has a bunch of $2\\times1$ bricks left and wants to finish the wall.\nCan he still complete it with the remaining $2\\times 1$ bricks?\nNote that the wall to be built should have a width of exactly $w$ units and a height of exactly $h$ units.", "inputFormat": "The input consists of:\n- One line with two integers $w$ and $h$ ($1\\leq w\\leq2\\cdot10^5$, $1\\leq h\\leq10^6$), the width and height of the wall Fred wants to build.\n- One line with $w$ integers $h_1,\\dots,h_n$ ($0\\leq h_i\\leq 10^6$), where $h_i$ is the current height of the wall at position $i$.", "outputFormat": "Output \"$\\texttt{possible}$\" if Fred can complete his wall and \"$\\texttt{impossible}$\" otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Freestyle Masonry", "background": null, "description": "Fred 得到了一个简单的任务，他只需要建造一堵 $w\\times h$ 的墙。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jdfpt5uu.png)\n\n:::align{center}\n一种有趣的砖块布局，照片来自 [Bobo Boom](https://commons.wikimedia.org/wiki/File:Intricate_patterns_in_brick-laying_(29947248771).jpg)\n:::\n\n为了让任务更简单，他得到了足够多的 $2\\times1$ 砖块，以及一些 $1\\times1$ 砖块来完成这堵墙。\nFred 觉得这任务应该不难，于是就开始动手建造，没有太多考虑设计。\n直到他用完了所有的 $1\\times1$ 砖块，Fred 才意识到这可能是个糟糕的决定……\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f5wolnfs.png)\n\n图 F.1：样例输入 2 的可视化。红色的砖块已经被 Fred 放置。蓝色的砖块仍需放置以完成墙体（在这种情况下只有这一种可能的设计）。\n:::\n\n也许他本该在开始前先做个计划，但现在已经太晚了。\nFred 现在只剩下一堆 $2\\times1$ 砖块，他想用这些砖块完成墙体。\n他还能只用剩下的 $2\\times1$ 砖块完成这堵墙吗？\n注意，建造的墙必须恰好宽 $w$ 个单位，高 $h$ 个单位。", "inputFormat": "输入包括：\n- 一行，包含两个整数 $w$ 和 $h$（$1\\leq w\\leq2\\times10^5$，$1\\leq h\\leq10^6$），表示 Fred 想要建造的墙的宽度和高度。\n- 一行，包含 $w$ 个整数 $h_1,\\dots,h_w$（$0\\leq h_i\\leq 10^6$），其中 $h_i$ 表示当前位置 $i$ 处墙体当前的高度。", "outputFormat": "如果 Fred 能够完成这堵墙，输出“$\\texttt{possible}$”；否则输出“$\\texttt{impossible}$”。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13672", "type": "P", "difficulty": 2, "samples": [["5", "6"], ["20", "11"], ["44", "14"], ["271828182", "82"], ["314159265", "82"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[GCPC 2023] German Conference for Public Counting", "background": "", "description": "Greta loves counting.\nShe practises it every day of the year.\nDepending on the season, she counts\nfalling leaves, raindrops, snowflakes, or even growing leaves.\nHowever, there is one event in summer which tops everything else: the German\nConference for Public Counting (GCPC).\n\nAt this event, Greta meets counting enthusiasts from all over the country for\none week of counting and counting and counting... Together they participate in the \nGlamorous Competitive Public Counting and the Great Chaotic Public Counting.\nAt the end of the week they all try to win the Golden Cup of Public Counting.\nHer favourite is the Gently Calming Public Counting where the crowd counts in silence, trying to harmoniously synchronise to reach the target number at precisely the same moment.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9laqt9y.png)\n\n:::align{center}\nFigure G.1: People holding up signs for the countdown.\n:::\n\nTo increase the tension and to prepare for the Gently Calming Public Counting,\nthe organizers of GCPC plan to start\nwith a silent countdown, where the people on the stage will at any time\ndisplay the current number by holding up signs with its digits.\nOn every sign, there is exactly one decimal digit.\nNumbers greater than $9$ are displayed by holding up several signs next to each other.\nEach number is shown using the least possible number of signs; there is no left padding with zeroes.\nThis way, the people on the stage display numbers $n, n-1, n-2, \\dots$ until they\nfinally display $0$.\nSince the GCPC will take place soon, the organizers want to finish their\npreparations quickly.\nHow many signs do they need to prepare at least so that they can display\nthe entire countdown from $n$ to $0$?", "inputFormat": "The input consists of:\n- One line with an integer $n$ ($1 \\le n \\le 10^9$), the starting number of the countdown.\n", "outputFormat": "Output the minimum number of signs required to display every number of the countdown.\n", "hint": "In the first sample case, the organizers need one sign each with the digits $0$ to $5$, for a total of $6$ signs. In the second sample case, they need one sign with each digit other than $1$, and two signs with a $1$, for a total of $9+2=11$ signs.", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] German Conference for Public Counting", "background": "", "description": "Greta loves counting.\nShe practises it every day of the year.\nDepending on the season, she counts\nfalling leaves, raindrops, snowflakes, or even growing leaves.\nHowever, there is one event in summer which tops everything else: the German\nConference for Public Counting (GCPC).\n\nAt this event, Greta meets counting enthusiasts from all over the country for\none week of counting and counting and counting... Together they participate in the \nGlamorous Competitive Public Counting and the Great Chaotic Public Counting.\nAt the end of the week they all try to win the Golden Cup of Public Counting.\nHer favourite is the Gently Calming Public Counting where the crowd counts in silence, trying to harmoniously synchronise to reach the target number at precisely the same moment.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9laqt9y.png)\n\n:::align{center}\nFigure G.1: People holding up signs for the countdown.\n:::\n\nTo increase the tension and to prepare for the Gently Calming Public Counting,\nthe organizers of GCPC plan to start\nwith a silent countdown, where the people on the stage will at any time\ndisplay the current number by holding up signs with its digits.\nOn every sign, there is exactly one decimal digit.\nNumbers greater than $9$ are displayed by holding up several signs next to each other.\nEach number is shown using the least possible number of signs; there is no left padding with zeroes.\nThis way, the people on the stage display numbers $n, n-1, n-2, \\dots$ until they\nfinally display $0$.\nSince the GCPC will take place soon, the organizers want to finish their\npreparations quickly.\nHow many signs do they need to prepare at least so that they can display\nthe entire countdown from $n$ to $0$?", "inputFormat": "The input consists of:\n- One line with an integer $n$ ($1 \\le n \\le 10^9$), the starting number of the countdown.\n", "outputFormat": "Output the minimum number of signs required to display every number of the countdown.\n", "hint": "In the first sample case, the organizers need one sign each with the digits $0$ to $5$, for a total of $6$ signs. In the second sample case, they need one sign with each digit other than $1$, and two signs with a $1$, for a total of $9+2=11$ signs.", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] German Conference for Public Counting", "background": null, "description": "Greta 热爱计数。她一年中的每一天都在练习。\n根据季节不同，她会数落叶、雨滴、雪花，甚至新长出的嫩叶。然而，夏天有一个活动胜过一切：德国公众计数大会（GCPC）。\n\n在这个活动中，Greta 遇到了来自全国各地的计数爱好者，进行为期一周的计数...他们一起参加“迷人的竞技性公众计数”和“盛大的混乱公共计数”。在临近结束前，他们都试图赢得“公众计数金杯”。她最喜欢的是“温和平静公众计数”：人群在沉默中计数，试图和谐同步，力求在同一精确时刻达到目标数字。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k9laqt9y.png)\n\n:::align{center}\n图 G.1: 工作人员举起数字牌用来显示倒计时。\n:::\n\n为了增强紧张感并为“温和平静公共计数”做准备，GCPC 主办方计划以无声倒计时开场。舞台上的工作人员将随时通过举起数字牌来显示当前数字（如图 G.1）。每个牌子只显示一个十进制数字。大于 $9$ 的数字需要通过并列举起多个牌子来展示。每个数字都使用尽可能少的牌子展示，且不会在左侧补零。这样，舞台上的人将从 $n$ 开始展示，依次显示 $n, n-1, n-2, \\dots$ 直到最终显示 $0$。由于 GCPC 即将举行，主办方希望尽快完成准备工作。请问他们至少需要准备多少个数字牌才能完成从 $n$ 到 $0$ 的整个倒计时？", "inputFormat": "输入包括：\n- 一行一个整数 $n$ ($1 \\le n \\le 10^9$)，表示倒计时的起始数字。", "outputFormat": "输出显示倒计时中所有数字所需的最少数字牌的数量。", "hint": "在第一个样例中，组织者需要数字 $0$ 到 $5$ 各一个，共 $6$ 个数字牌。在第二个样例中，除数字 $1$ 外每个数字需要一个数字牌，数字 $1$ 需要两个数字牌，总共需要 $9+2=11$ 个数字牌。", "locale": "zh-CN"}}}
{"pid": "P13673", "type": "P", "difficulty": 6, "samples": [["10", "##..#.......\n....#.##...."], ["27", "...##........\n........##..."]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "数论", "Special Judge", "Fibonacci 数列", "随机化", "ICPC", "折半搜索 meet in the middle"], "title": "[GCPC 2023] Highway Combinatorics", "background": "", "description": "You are the new minister of transport in Berland.\nRecently, you allowed free parking on a two lane road segment of $200$ metres length.\nSince then, that road segment has constantly been jammed by parked cars due to some\ngenius drivers who had the idea to park their cars across both lanes...\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x81bkouf.png)\n\n:::align{center}\nJam caused by parking bus, [Nevermind2](https://commons.wikimedia.org/wiki/File:Moscow_traffic_congestion.JPG)\n:::\n\n\nHowever, this is not your concern.\nYou are more interested in parking some of your own cars on the road segment while it is empty.\nMore specifically, you want to park some of your cars in such a way that the number of different ways to fill the remaining empty space with cars is congruent to your lucky number $n$ modulo $10^9+7$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ntad7154.png)\n\n:::align{center}\nFigure H.1: Visualization of Sample Output 1.\n:::\n\nEach car has a size of $1\\times2$ metres, each of the two lanes is $1$ metre wide and $200$ metres long. You own more than $200$ cars which you could park on the road segment.\n", "inputFormat": "The input consists of:\n- One line with one integer $n$ ($0\\leq n<10^9+7$), the desired number of possible ways to fill the road modulo $10^9+7$.\n\nIt can be proven that at least one valid solution exists for each possible value of $n$.\n", "outputFormat": "Output the state of the two lanes in two lines.\nPrint \"$\\texttt{\\#}$\" for an occupied spot and \"$\\texttt{.}$\" for an empty spot. Note that the two lines should have the same length of at least $1$ metre and at most $200$ metres, and the occupied spots must correspond to some parked cars. If your solution uses a road segment shorter than $200$ metres, the remaining part of the road segment is assumed to be blocked by parked cars. ", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Highway Combinatorics", "background": "", "description": "You are the new minister of transport in Berland.\nRecently, you allowed free parking on a two lane road segment of $200$ metres length.\nSince then, that road segment has constantly been jammed by parked cars due to some\ngenius drivers who had the idea to park their cars across both lanes...\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x81bkouf.png)\n\n:::align{center}\nJam caused by parking bus, [Nevermind2](https://commons.wikimedia.org/wiki/File:Moscow_traffic_congestion.JPG)\n:::\n\n\nHowever, this is not your concern.\nYou are more interested in parking some of your own cars on the road segment while it is empty.\nMore specifically, you want to park some of your cars in such a way that the number of different ways to fill the remaining empty space with cars is congruent to your lucky number $n$ modulo $10^9+7$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ntad7154.png)\n\n:::align{center}\nFigure H.1: Visualization of Sample Output 1.\n:::\n\nEach car has a size of $1\\times2$ metres, each of the two lanes is $1$ metre wide and $200$ metres long. You own more than $200$ cars which you could park on the road segment.\n", "inputFormat": "The input consists of:\n- One line with one integer $n$ ($0\\leq n<10^9+7$), the desired number of possible ways to fill the road modulo $10^9+7$.\n\nIt can be proven that at least one valid solution exists for each possible value of $n$.\n", "outputFormat": "Output the state of the two lanes in two lines.\nPrint \"$\\texttt{\\#}$\" for an occupied spot and \"$\\texttt{.}$\" for an empty spot. Note that the two lines should have the same length of at least $1$ metre and at most $200$ metres, and the occupied spots must correspond to some parked cars. If your solution uses a road segment shorter than $200$ metres, the remaining part of the road segment is assumed to be blocked by parked cars. ", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Highway Combinatorics", "background": null, "description": "你是 Berland 的新任交通部长。  \n最近，你允许在一段 $200$ 米长的双车道道路上免费停车。  \n自那以后，由于一些“天才”司机把车横跨两条车道停放，这段路经常被停满的车辆堵塞……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x81bkouf.png)\n\n:::align{center}\n由停车巴士引起的拥堵，[Nevermind2](https://commons.wikimedia.org/wiki/File:Moscow_traffic_congestion.JPG)\n:::\n\n不过，这并不是你的担忧。  \n你更感兴趣的是在这段路空着的时候，自己也能停一些车。  \n更具体地说，你希望以某种方式停放你的车辆，使得剩余空位可以用车辆填满的方法数对 $10^9+7$ 取模后与你的幸运数字 $n$ 相等。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ntad7154.png)\n\n:::align{center}\n图 H.1：样例输出 1 的可视化。\n:::\n\n每辆车的尺寸为 $1\\times2$ 米，每条车道宽 $1$ 米、长 $200$ 米。你拥有超过 $200$ 辆车，可以随意停在这段路上。", "inputFormat": "输入包含一行，一个整数 $n$（$0\\leq n<10^9+7$），表示希望剩余空位的填充方案数对 $10^9+7$ 取模后等于 $n$。\n\n可以保证对于每个可能的 $n$，都至少存在一种合法解。", "outputFormat": "输出两行，表示两条车道的状态。  \n用“$\\texttt\\#$”表示已被占用的位置，用“$\\texttt.$”表示空位。注意，两行长度应相同，且长度不少于 $1$ 米、不超过 $200$ 米。已被占用的位置必须对应于某辆已停放的车。如果你的方案使用的道路长度小于 $200$ 米，则剩余部分视为已被车辆阻塞。", "hint": "由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13674", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 5 7\n3\n1\n2\n4", "4\n6\n8"], ["5\n1 2 3 5 7\n4\n1\n1\n1\n1", "4\n6\n8\n9"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[GCPC 2023]  Investigating Frog Behaviour  on Lily Pad Patterns", "background": "", "description": "Recently, the biologist Ina discovered a new frog species\non the lily pads of a pond.\nShe observed the frogs for a while and found them to be very conscious\nabout their personal space because they avoided sharing a lily pad with other frogs.\nAlso, they seemed quite lazy as they did not move often, and if they did,\nthey always jumped to the nearest empty lily pad.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/6jt2rls1.png)\n\nA frog in a pond.\n:::\n\nTo confirm her hypotheses about the frogs' movement pattern, Ina set up\na large number of lily pads in a pool in her laboratory, arranged in a straight line.\nSince the frogs were attracted to light, she was able to simplify the test setup\nfurther by placing a bright light at one end of that line. This way, the frogs\nwould always jump in one direction (towards the light).\n\nOf course, Ina could now place some frogs on the lily pads and\nsit there all day watching the frogs jump around. But as the frogs\nmove so rarely, it would take ages to gather a sufficient amount of data.\n\nShe therefore attached to each frog a tiny device that could log all jumps of that frog.\nThis way, she could put the frogs on the lily pads, leave\nthem alone for a few hours and come back later to collect the data.\nUnfortunately, the devices had to be so tiny that there was no space\nfor a position tracking system; instead, the devices could only record the times of the jumps.\n\nBut if the movement pattern of the frogs is as restricted as Ina thinks, surely the\nindividual movements of the frog can be reconstructed only from the initial positions and\nthe recorded jump time stamps?", "inputFormat": "The input consists of:\n- One line with an integer $n$ ($1\\leq n \\leq 2\\cdot10^5$), the number of frogs.\n- One line with $n$ integers $x_1,\\dots, x_n$ ($1\\leq x_i \\leq 10^6$), the number of the lily pad on which the $i$th frog initially sits. The lily pads are numbered consecutively, starting at $1$. It is guaranteed that the initial positions are strictly increasing, i.e. $x_1 < x_2 < \\dots < x_n$.\n- One line with an integer $q$ ($1\\leq q \\leq 2\\cdot10^5$), the number of jumps recorded.\n- $q$ lines, each containing an integer $i$ ($1\\leq i\\leq n$), indicating that the $i$th frog jumped. The jumps are given in chronological order and you may assume that a jumping frog lands before the next jump begins. The frogs always jump to the nearest empty lily pad with a larger number, and you may assume that such a lily pad always exists.\n", "outputFormat": "For each jump, output the number of the lily pad the frog lands on.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/k07qih18.png)\n\n:::align{center}\nFigure I.1: Illustration of the first sample case. The lily pads are numbered from left to right, starting at 1.\n:::", "locale": "en", "translations": {"en": {"title": "[GCPC 2023]  Investigating Frog Behaviour  on Lily Pad Patterns", "background": "", "description": "Recently, the biologist Ina discovered a new frog species\non the lily pads of a pond.\nShe observed the frogs for a while and found them to be very conscious\nabout their personal space because they avoided sharing a lily pad with other frogs.\nAlso, they seemed quite lazy as they did not move often, and if they did,\nthey always jumped to the nearest empty lily pad.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/6jt2rls1.png)\n\nA frog in a pond.\n:::\n\nTo confirm her hypotheses about the frogs' movement pattern, Ina set up\na large number of lily pads in a pool in her laboratory, arranged in a straight line.\nSince the frogs were attracted to light, she was able to simplify the test setup\nfurther by placing a bright light at one end of that line. This way, the frogs\nwould always jump in one direction (towards the light).\n\nOf course, Ina could now place some frogs on the lily pads and\nsit there all day watching the frogs jump around. But as the frogs\nmove so rarely, it would take ages to gather a sufficient amount of data.\n\nShe therefore attached to each frog a tiny device that could log all jumps of that frog.\nThis way, she could put the frogs on the lily pads, leave\nthem alone for a few hours and come back later to collect the data.\nUnfortunately, the devices had to be so tiny that there was no space\nfor a position tracking system; instead, the devices could only record the times of the jumps.\n\nBut if the movement pattern of the frogs is as restricted as Ina thinks, surely the\nindividual movements of the frog can be reconstructed only from the initial positions and\nthe recorded jump time stamps?", "inputFormat": "The input consists of:\n- One line with an integer $n$ ($1\\leq n \\leq 2\\cdot10^5$), the number of frogs.\n- One line with $n$ integers $x_1,\\dots, x_n$ ($1\\leq x_i \\leq 10^6$), the number of the lily pad on which the $i$th frog initially sits. The lily pads are numbered consecutively, starting at $1$. It is guaranteed that the initial positions are strictly increasing, i.e. $x_1 < x_2 < \\dots < x_n$.\n- One line with an integer $q$ ($1\\leq q \\leq 2\\cdot10^5$), the number of jumps recorded.\n- $q$ lines, each containing an integer $i$ ($1\\leq i\\leq n$), indicating that the $i$th frog jumped. The jumps are given in chronological order and you may assume that a jumping frog lands before the next jump begins. The frogs always jump to the nearest empty lily pad with a larger number, and you may assume that such a lily pad always exists.\n", "outputFormat": "For each jump, output the number of the lily pad the frog lands on.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/k07qih18.png)\n\n:::align{center}\nFigure I.1: Illustration of the first sample case. The lily pads are numbered from left to right, starting at 1.\n:::", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023]  Investigating Frog Behaviour  on Lily Pad Patterns", "background": null, "description": "最近，生物学家 Ina 在池塘的睡莲叶上发现了一种新的青蛙物种。她观察这些青蛙一段时间后发现，它们非常注重个人空间，总是避免与其他青蛙共用同一片睡莲叶。此外，它们似乎很懒惰，很少移动，即使移动，也总是跳到最近的空睡莲叶上。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/6jt2rls1.png)\n\n池塘中的一只青蛙。\n:::\n\n为了验证她关于青蛙移动模式的假设，Ina 在实验室的池中布置了大量睡莲叶，并将它们排成一条直线。由于青蛙会被光吸引，她进一步简化了实验装置，在直线的一端放置了一盏明亮的灯。这样，青蛙总是朝着光的方向跳跃（即只会向编号更大的方向跳）。\n\n当然，Ina 现在可以把一些青蛙放到睡莲叶上，然后整天坐在那里观察青蛙跳跃。但由于青蛙很少移动，收集足够的数据将耗费大量时间。\n\n因此，她在每只青蛙身上安装了一个微型装置，可以记录该青蛙的所有跳跃。这样，她就可以把青蛙放到睡莲叶上，离开几个小时后再回来收集数据。不幸的是，这些装置必须非常小，没有空间安装定位系统；它们只能记录每次跳跃的时间。\n\n但如果青蛙的移动模式像 Ina 所想的那样受限，仅凭初始位置和记录的跳跃时间戳，是否一定可以还原每只青蛙的具体移动轨迹呢？", "inputFormat": "输入包括：\n- 一行一个整数 $n$（$1\\leq n \\leq 2\\cdot10^5$），表示青蛙的数量。\n- 一行 $n$ 个整数 $x_1,\\dots, x_n$（$1\\leq x_i \\leq 10^6$），表示第 $i$ 只青蛙最初所在的睡莲叶编号。睡莲叶的编号从 $1$ 开始，连续递增。保证初始位置严格递增，即 $x_1 < x_2 < \\dots < x_n$。\n- 一行一个整数 $q$（$1\\leq q \\leq 2\\cdot10^5$），表示记录到的跳跃次数。\n- 接下来 $q$ 行，每行一个整数 $i$（$1\\leq i\\leq n$），表示第 $i$ 只青蛙跳跃了一次。跳跃按时间顺序给出，可以假设一只青蛙落地后，下一次跳跃才会开始。青蛙总是跳到编号更大的最近的空睡莲叶，并且可以假设总能找到这样的睡莲叶。", "outputFormat": "对于每一次跳跃，输出青蛙落下的睡莲叶编号。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/k07qih18.png)\n\n:::align{center}\n图 I.1：第一个样例的示意图。睡莲叶从左到右编号，从 $1$ 开始。\n:::\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
{"pid": "P13675", "type": "P", "difficulty": 6, "samples": [["4 6 7\n1 1 2\n2 3 4\n4 3 4\n5 1 2\n6 3 4\n3 2 3\n6 3 4", "1\n2\n1\n0\n1\n2\n1"], ["5 9 12\n1 3 4\n2 1 2\n3 2 3\n4 4 5\n5 2 1\n6 4 3\n7 2 3\n8 4 3\n9 4 5\n6 4 3\n7 2 3\n1 3 4", "1\n2\n3\n4\n3\n2\n3\n4\n3\n4\n3\n2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[GCPC 2023] Japanese Lottery", "background": "", "description": "Amida-kuji is a lottery popular in Japan, which can be used to assign $w$ prizes to $w$ people.\nThe game consists of $w$ vertical lines, called *legs*, and some horizontal bars that connect adjacent legs.\nThe tops of the legs are the starting positions of the $w$ people, and the prizes are at the bottom of the legs.\nTo determine the prize of the $i$th person, one has to move down on the $i$th leg, starting at the top, and switch the leg whenever a horizontal bar is encountered.\nYou can see such a game and how to trace a path in Figure J.1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2xrlg1j9.png)\n\n:::align{center}\nStrawberry picking game, photo by [Nanao Wagatsuma](https://commons.wikimedia.org/wiki/File:%E3%82%A4%E3%83%81%E3%82%B4%E3%81%A4%E3%81%BF%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%84%E3%81%86%E5%90%8D%E3%81%AE%E3%81%9F%E3%81%A0%E3%81%AE%E3%81%82%E3%81%BF%E3%81%A0%E3%81%8F%E3%81%98.jpg)\n:::\n\nYou want to manipulate the lottery in such a way that the $i$th person gets the $i$th prize,\nfor every $i$, by removing some horizontal bars.\nSince you do not want to get caught, you want to remove as few bars as possible.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jce88dsz.png)\n\nFigure J.1: Visualization of an Amida-kuji game. The first person is connected to the third prize. This is also Sample Input 2 after all connections are added and before any connection is removed. To connect the ith person to the ith prize, it suffices to remove both horizontal bars between legs 2 and 3 and the topmost horizontal bar between legs 3 and 4. This is the only minimal solution.\n:::\n\nFor this problem, the initial game configuration has no horizontal bars.\nThen, horizontal bars are added one by one or are removed again.\nAfter each change, you want to know the minimum number of horizontal bars that need to be removed such that the $i$th prize is assigned to the $i$th person for each $i$.\nNote that this is always possible by removing all horizontal bars.", "inputFormat": "The input consists of:\n- One line with three integers $w, h$ and $q$ ($2 \\leq w \\leq 20$, $1\\leq h,q \\leq 2\\cdot10^5$), the number of legs, the height of the legs, and the number of changes.\n- $q$ lines, each containing three integers $y, x_{1}$ and $x_{2}$ ($1\\leq y \\leq h$, $1\\leq x_{1}, x_{2} \\leq w$), describing a change where a horizontal bar is added or removed at height $y$ between legs $x_1$ and $x_2$. If there is already a horizontal bar at this position, it will be removed. Otherwise the bar will be added. It is guaranteed that the two legs are adjacent, i.e. $|x_{1}-x_{2}|=1$.\n\nIt is guaranteed that all horizontal bars have different heights at every moment.", "outputFormat": "After each change, output a single integer, the minimum number of horizontal bars that need to be removed in the game with the currently existing bars such that the $i$th prize is assigned to the $i$th person for each $i$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GCPC 2023] Japanese Lottery", "background": "", "description": "Amida-kuji is a lottery popular in Japan, which can be used to assign $w$ prizes to $w$ people.\nThe game consists of $w$ vertical lines, called *legs*, and some horizontal bars that connect adjacent legs.\nThe tops of the legs are the starting positions of the $w$ people, and the prizes are at the bottom of the legs.\nTo determine the prize of the $i$th person, one has to move down on the $i$th leg, starting at the top, and switch the leg whenever a horizontal bar is encountered.\nYou can see such a game and how to trace a path in Figure J.1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2xrlg1j9.png)\n\n:::align{center}\nStrawberry picking game, photo by [Nanao Wagatsuma](https://commons.wikimedia.org/wiki/File:%E3%82%A4%E3%83%81%E3%82%B4%E3%81%A4%E3%81%BF%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%84%E3%81%86%E5%90%8D%E3%81%AE%E3%81%9F%E3%81%A0%E3%81%AE%E3%81%82%E3%81%BF%E3%81%A0%E3%81%8F%E3%81%98.jpg)\n:::\n\nYou want to manipulate the lottery in such a way that the $i$th person gets the $i$th prize,\nfor every $i$, by removing some horizontal bars.\nSince you do not want to get caught, you want to remove as few bars as possible.\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jce88dsz.png)\n\nFigure J.1: Visualization of an Amida-kuji game. The first person is connected to the third prize. This is also Sample Input 2 after all connections are added and before any connection is removed. To connect the ith person to the ith prize, it suffices to remove both horizontal bars between legs 2 and 3 and the topmost horizontal bar between legs 3 and 4. This is the only minimal solution.\n:::\n\nFor this problem, the initial game configuration has no horizontal bars.\nThen, horizontal bars are added one by one or are removed again.\nAfter each change, you want to know the minimum number of horizontal bars that need to be removed such that the $i$th prize is assigned to the $i$th person for each $i$.\nNote that this is always possible by removing all horizontal bars.", "inputFormat": "The input consists of:\n- One line with three integers $w, h$ and $q$ ($2 \\leq w \\leq 20$, $1\\leq h,q \\leq 2\\cdot10^5$), the number of legs, the height of the legs, and the number of changes.\n- $q$ lines, each containing three integers $y, x_{1}$ and $x_{2}$ ($1\\leq y \\leq h$, $1\\leq x_{1}, x_{2} \\leq w$), describing a change where a horizontal bar is added or removed at height $y$ between legs $x_1$ and $x_2$. If there is already a horizontal bar at this position, it will be removed. Otherwise the bar will be added. It is guaranteed that the two legs are adjacent, i.e. $|x_{1}-x_{2}|=1$.\n\nIt is guaranteed that all horizontal bars have different heights at every moment.", "outputFormat": "After each change, output a single integer, the minimum number of horizontal bars that need to be removed in the game with the currently existing bars such that the $i$th prize is assigned to the $i$th person for each $i$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GCPC 2023] Japanese Lottery", "background": null, "description": "阿弥陀签（Amida-kuji）是一种在日本流行的彩票游戏，可以用来将 $w$ 个奖品分配给 $w$ 个人。\n该游戏由 $w$ 条竖直的线段（称为“腿”）和一些连接相邻腿的水平横杆组成。\n每个人从腿的顶部出发，奖品放在腿的底部。\n为了确定第 $i$ 个人获得哪个奖品，需要从第 $i$ 条腿的顶部出发，遇到横杆时就切换到相邻的腿，一直走到最底部。\n你可以在下图（图 J.1）中看到这个游戏以及如何追踪路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2xrlg1j9.png)\n\n:::align{center}\n草莓采摘游戏，图片来自 [Nanao Wagatsuma](https://commons.wikimedia.org/wiki/File:%E3%82%A4%E3%83%81%E3%82%B4%E3%81%A4%E3%81%BF%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%84%E3%81%86%E5%90%8D%E3%81%AE%E3%81%9F%E3%81%A0%E3%81%AE%E3%81%82%E3%81%BF%E3%81%A0%E3%81%8F%E3%81%98.jpg)\n:::\n\n你希望通过移除一些横杆，使得对于每个 $i$，第 $i$ 个人都能获得第 $i$ 个奖品。\n由于你不想被发现，你希望移除的横杆数量尽可能少。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jce88dsz.png)\n\n图 J.1：阿弥陀签游戏的可视化。第一个人最终连接到第三个奖品。这也是样例输入 2 在所有连接加上后、未移除任何连接时的状态。要让第 $i$ 个人连接到第 $i$ 个奖品，只需移除第 2、3 条腿之间的两根横杆，以及第 3、4 条腿之间最上方的一根横杆。这是唯一的最优解。\n:::\n\n在本题中，初始游戏没有任何横杆。\n然后，横杆会被逐个添加或移除。\n每次变化后，你都需要计算，当前状态下，最少需要移除多少根横杆，才能使得对于每个 $i$，第 $i$ 个人获得第 $i$ 个奖品。\n注意，通过移除所有横杆总是可以实现这一目标。", "inputFormat": "输入包含：\n- 一行，包含三个整数 $w, h, q$（$2 \\leq w \\leq 20$，$1 \\leq h, q \\leq 2 \\cdot 10^5$），分别表示腿的数量、腿的高度和操作次数。\n- 接下来 $q$ 行，每行包含三个整数 $y, x_1, x_2$（$1 \\leq y \\leq h$，$1 \\leq x_1, x_2 \\leq w$），表示在高度 $y$ 处、腿 $x_1$ 和 $x_2$ 之间添加或移除一根横杆。如果该位置已有横杆，则移除；否则添加。保证 $x_1$ 和 $x_2$ 是相邻的，即 $|x_1 - x_2| = 1$。\n\n保证任意时刻所有横杆在同一高度的位置都不同。", "outputFormat": "每次操作后，输出一个整数，表示当前状态下，最少需要移除多少根横杆，才能使得对于每个 $i$，第 $i$ 个人获得第 $i$ 个奖品。", "hint": "\n\n由 ChatGPT 4.1 翻译", "locale": "zh-CN"}}}
