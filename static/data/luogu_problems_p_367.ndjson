{"pid": "P8437", "type": "P", "difficulty": 3, "samples": [["10 6 3", "lllrrlrlll"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "伟大的神", "background": "伟大的神 $\\text{T}\\color{red}\\text{nyieldingUrilobite}$ （以下简称 TU）喜欢字符串，在 AK 了 IOI 后的第 $998244353$ 天后，伟大的神 TU 勒令小 s 找出他喜欢的字符串。\n\n否则，小 s 就要被吊打 $10^{998244353}$ 年。（虽然找出来了也要被吊打）", "description": "伟大的神 TU 认为 ，一个所有出现的字符的数量相等的字符串是属于神的，他称之为神之字符串。\n\n对于一个字符串 $S$，如果它的一个子串为神之字符串，即称这个子串为神之子串。\n\n神 TU 认为，他喜欢的字符串只能由 `l` 和 `r` 构成，并且还要满足以下条件：\n\n   - 字符串的长度为 $n$。\n   - 字符串中最长神之子串长度为 $m$。\n   - 字符串中连续的相同的字符的数量不能超过 $k$。\n\n弱小的神小 s 找不出神 TU 喜欢的字符串，现在他找到了你，你能帮帮他吗？", "inputFormat": "一行三个整数，分别为 $n,m,k$。\n\n题目保证输入的 $m$ 是偶数。", "outputFormat": "请输出任意一种神 TU 喜欢的字符串。\n\n数据保证可以找出神 TU 喜欢的字符串。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le k\\le10^5$，$4\\le m\\le n \\le 10^5$。\n\n数据保证可以找出神 TU 喜欢的字符串。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $k=1$。\n\nSubtask 2：对于另外 $10\\%$ 的数据，保证 $n=m$。\n\nSubtask 3：对于另外 $30\\%$ 的数据，保证 $k \\ge 3$。\n\nSubtask 4：无特殊性质。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "伟大的神", "background": "伟大的神 $\\text{T}\\color{red}\\text{nyieldingUrilobite}$ （以下简称 TU）喜欢字符串，在 AK 了 IOI 后的第 $998244353$ 天后，伟大的神 TU 勒令小 s 找出他喜欢的字符串。\n\n否则，小 s 就要被吊打 $10^{998244353}$ 年。（虽然找出来了也要被吊打）", "description": "伟大的神 TU 认为 ，一个所有出现的字符的数量相等的字符串是属于神的，他称之为神之字符串。\n\n对于一个字符串 $S$，如果它的一个子串为神之字符串，即称这个子串为神之子串。\n\n神 TU 认为，他喜欢的字符串只能由 `l` 和 `r` 构成，并且还要满足以下条件：\n\n   - 字符串的长度为 $n$。\n   - 字符串中最长神之子串长度为 $m$。\n   - 字符串中连续的相同的字符的数量不能超过 $k$。\n\n弱小的神小 s 找不出神 TU 喜欢的字符串，现在他找到了你，你能帮帮他吗？", "inputFormat": "一行三个整数，分别为 $n,m,k$。\n\n题目保证输入的 $m$ 是偶数。", "outputFormat": "请输出任意一种神 TU 喜欢的字符串。\n\n数据保证可以找出神 TU 喜欢的字符串。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le k\\le10^5$，$4\\le m\\le n \\le 10^5$。\n\n数据保证可以找出神 TU 喜欢的字符串。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $k=1$。\n\nSubtask 2：对于另外 $10\\%$ 的数据，保证 $n=m$。\n\nSubtask 3：对于另外 $30\\%$ 的数据，保证 $k \\ge 3$。\n\nSubtask 4：无特殊性质。\n\n", "locale": "zh-CN"}}}
{"pid": "P8438", "type": "P", "difficulty": 3, "samples": [["4\n1 2 3 4", "16"], ["30\n15942549000714163495 14973783748924019241 11750608274629447103 3841514779926491634 1491087352666302822 3926467265136890882 2165405652723005667 16850040541486744638 9389207531715430944 2453094189961991688 17306424574086088540 4253088488420240522 6711268779219669357 7357305029308027009 10742286389669332463 16939477641403891687 14194800553999397870 17414698597200046696 18113730556943709454 3735103125227126629 16235879363688955717 14861602169195639258 903677597641043180 12364536150445169736 14881735759803865853 14781978421412291657 872796319752083876 11301016179769629644 14385296580178382407 3946726419982234649 ", "13929368580789239808\n"]], "limits": {"time": [1400, 1400, 1400, 1400, 1400, 1400, 1400, 1400, 1400, 1400], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 8192, 8192, 8192, 8192]}, "tags": ["洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "极寒之地", "background": "238 神教 #1\n\n在古老的传说中，南极企鹅是全知全能的真神，它们能轻易做到任何我们做不到的事情。在南极洲的广袤大陆上，没有任何生物能对它们构成威胁。\n\n所幸，神并不是高高在上，对尘世不屑一顾的。经常有果敢的人类来到这里，运气好的话，能和神结为挚友——这是幸运的，因为神不需要从你这里得到什么，而它的力量却会一直庇佑你，直到永远。\n\n而你是一位探险家，对传说的内容十分向往。在经历了不知多久的苦索之后，你终于找到了些许神迹，并成功地找到了传说中的“神”。\n\n——并且是两位，但是……", "description": "神正在辅导孩子做数学题。在神批评孩子的心算结果从低到高第\n```plain\n17409488245517115276142322168576189279543123341138742779319865028602486509006138934460661849637882913598407636154209737260165754120014607177773359981826603801250947835120164061898414398808778383710734965109968348499255333743808806819897228289078158612425862653924618211976295200391819532525867722941969825549125083939679976935766582544161633553282536186214629150364929344059634288758125744444293077873038252037297534321132535122264070340053106750045495648216831484920706070567384926577457983022367155402606111730048301290388577089307478371008345014562035666767719162727651399592653244427923731578583241159510645308913474636528103155221748236303528072259108507905341048592541395827961771903417533241290874568077431363019042931482055932874814355268929594505880132227031337095583783793918280184860930087635658394839764586155196454253268266394562535661446268255101517600243362823434368473980088051436392198234023198989135142538928701481935979801475550928245044051159083872693810338480154137358569089360697894156\n```\n位就错了并且居然花了 \n```plain\n0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000215055865\n```\n秒才算完的时候，神的孩子发现了你，并要求你来验算一遍。\n\n你当然做不到，于是你请求缩小数据范围，而神同意了。神说，你是个勇敢的探险者，在把这道题算完之后，会与你成为朋友。\n\n现在，你只需要解决的是这么一个问题了：\n\n给定一个正整数 $n$ 和自然数序列 $a_1,a_2,\\cdots,a_n$。你需要对每一个 $0\\le S\\le 2^n-1$，求出数 $S$ 的“权值”。\n\n一个数 $S$ 的权值 $v(S)$ 的计算方式是：把它写成二进制，如果它从低到高第 $x$ 位为 $1$，就把答案异或（xor）上 $a_x$。\n\n神不想刻意刁难你，他只希望你把所有 $v(S)$ 求出来之后，把答案分别乘上对应的 $S$，然后异或起来，取模 $2^{64}$ 再交给他就好了。\n\n你心知这个问题是很好算的。但是你还是希望尽量快地把结果求出，以成为神的朋友。\n\n那么，加油吧！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个自然数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "一行一个自然数如题。", "hint": "**本题采用捆绑测试。**\n\n|数据点编号|$n$|分值|空间限制|子任务编号|\n|----|----|----|----|----|\n|$1\\sim3$|$=20$|$10$|$\\texttt{256MB}$|0|\n|$4\\sim6$|$=25$|$40$|$\\texttt{256MB}$|1|\n|$7\\sim10$|$\\le30$|$50$|$\\texttt{8MB}$|2|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 30,0\\le a_i\\le 2^{64}-1$。\n\n---\n\n### 样例解释\n\n用 $\\bigoplus$ 表示 异或。\n\n对于第一个样例，$\\text{Ans}=(0\\times 0)\\bigoplus(1\\times 1)\\bigoplus(2\\times 2)\\bigoplus(3\\times 3)\\bigoplus(4\\times 3)\\bigoplus(5\\times 2)\\bigoplus(6\\times 1)\\bigoplus(7\\times 0)\\bigoplus(8\\times 4)\\bigoplus(9\\times 5)\\bigoplus(10\\times 6)\\bigoplus(11\\times 7)\\bigoplus(12\\times 7)\\bigoplus(13\\times 6)\\bigoplus(14\\times 5)\\bigoplus(15\\times 4)=16$。\n\n---\n\n本题不需要刻意卡常，$\\texttt{1.4s}$ 已经是出题人最大的善良了，如果还跑不过那基本就一定是算法不优了。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "极寒之地", "background": "238 神教 #1\n\n在古老的传说中，南极企鹅是全知全能的真神，它们能轻易做到任何我们做不到的事情。在南极洲的广袤大陆上，没有任何生物能对它们构成威胁。\n\n所幸，神并不是高高在上，对尘世不屑一顾的。经常有果敢的人类来到这里，运气好的话，能和神结为挚友——这是幸运的，因为神不需要从你这里得到什么，而它的力量却会一直庇佑你，直到永远。\n\n而你是一位探险家，对传说的内容十分向往。在经历了不知多久的苦索之后，你终于找到了些许神迹，并成功地找到了传说中的“神”。\n\n——并且是两位，但是……", "description": "神正在辅导孩子做数学题。在神批评孩子的心算结果从低到高第\n```plain\n17409488245517115276142322168576189279543123341138742779319865028602486509006138934460661849637882913598407636154209737260165754120014607177773359981826603801250947835120164061898414398808778383710734965109968348499255333743808806819897228289078158612425862653924618211976295200391819532525867722941969825549125083939679976935766582544161633553282536186214629150364929344059634288758125744444293077873038252037297534321132535122264070340053106750045495648216831484920706070567384926577457983022367155402606111730048301290388577089307478371008345014562035666767719162727651399592653244427923731578583241159510645308913474636528103155221748236303528072259108507905341048592541395827961771903417533241290874568077431363019042931482055932874814355268929594505880132227031337095583783793918280184860930087635658394839764586155196454253268266394562535661446268255101517600243362823434368473980088051436392198234023198989135142538928701481935979801475550928245044051159083872693810338480154137358569089360697894156\n```\n位就错了并且居然花了 \n```plain\n0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000215055865\n```\n秒才算完的时候，神的孩子发现了你，并要求你来验算一遍。\n\n你当然做不到，于是你请求缩小数据范围，而神同意了。神说，你是个勇敢的探险者，在把这道题算完之后，会与你成为朋友。\n\n现在，你只需要解决的是这么一个问题了：\n\n给定一个正整数 $n$ 和自然数序列 $a_1,a_2,\\cdots,a_n$。你需要对每一个 $0\\le S\\le 2^n-1$，求出数 $S$ 的“权值”。\n\n一个数 $S$ 的权值 $v(S)$ 的计算方式是：把它写成二进制，如果它从低到高第 $x$ 位为 $1$，就把答案异或（xor）上 $a_x$。\n\n神不想刻意刁难你，他只希望你把所有 $v(S)$ 求出来之后，把答案分别乘上对应的 $S$，然后异或起来，取模 $2^{64}$ 再交给他就好了。\n\n你心知这个问题是很好算的。但是你还是希望尽量快地把结果求出，以成为神的朋友。\n\n那么，加油吧！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个自然数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "一行一个自然数如题。", "hint": "**本题采用捆绑测试。**\n\n|数据点编号|$n$|分值|空间限制|子任务编号|\n|----|----|----|----|----|\n|$1\\sim3$|$=20$|$10$|$\\texttt{256MB}$|0|\n|$4\\sim6$|$=25$|$40$|$\\texttt{256MB}$|1|\n|$7\\sim10$|$\\le30$|$50$|$\\texttt{8MB}$|2|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 30,0\\le a_i\\le 2^{64}-1$。\n\n---\n\n### 样例解释\n\n用 $\\bigoplus$ 表示 异或。\n\n对于第一个样例，$\\text{Ans}=(0\\times 0)\\bigoplus(1\\times 1)\\bigoplus(2\\times 2)\\bigoplus(3\\times 3)\\bigoplus(4\\times 3)\\bigoplus(5\\times 2)\\bigoplus(6\\times 1)\\bigoplus(7\\times 0)\\bigoplus(8\\times 4)\\bigoplus(9\\times 5)\\bigoplus(10\\times 6)\\bigoplus(11\\times 7)\\bigoplus(12\\times 7)\\bigoplus(13\\times 6)\\bigoplus(14\\times 5)\\bigoplus(15\\times 4)=16$。\n\n---\n\n本题不需要刻意卡常，$\\texttt{1.4s}$ 已经是出题人最大的善良了，如果还跑不过那基本就一定是算法不优了。", "locale": "zh-CN"}}}
{"pid": "P8439", "type": "P", "difficulty": 6, "samples": [["4 1\n1 2\n2 3\n3 1\n1 4", "1"], ["17 9\n1 2\n1 6\n1 3\n3 4\n4 5\n5 6\n6 7\n8 10\n10 9\n10 11\n11 12\n11 13\n13 14\n14 8\n15 13\n8 16\n16 17", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "洛谷原创", "O2优化", "基环树", "洛谷月赛"], "title": "Altale (Fan-made FTR 7)", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/inglwsjz.png)](https://music.163.com/#/program?id=2067229684)\n\n为什么评级 7？\n\nPowerless：Equilibrium FTR 9.", "description": "小机器人又在钓星星了。\n\n星星在天空中形成了若干个星座，每个星座有一个“中心点”，如果星星脱离了与中心点的直接或间接的联系，那么星星就会从星座中脱离，掉落到地面上。\n\n经过小机器人日日夜夜的观测，他发现了这些星座的性质：每一个星座内部都是联通的，星星的联系的数量总与星座中星星的数量相等。\n\n另外，不同的星座之间星星没有联系，同一个星座中的星星都有间接或直接的联系。\n\n他通过观测天体运动给星星编了号，他发现每个星座的中心点都是星座中编号最小的星星。\n\n可惜的是，小机器人只能通过随（diao）缘（yu）的方式获得取消这些联系的钥匙。\n\n小机器人非常贪心，想要用尽量少的时间获得尽量多的星星。\n\n他想要 $k$ 颗星星，你能告诉他他至少需要钓上几把钥匙吗？\n\n如果你解决了这个问题，说不定小机器人会送给你几颗星星哦~\n\n**[简化题意](https://www.luogu.com.cn/paste/5nhqqjzm)**", "inputFormat": "第一行两个整数 $n,k$，表示**天空中**所有的星星的**总数**和星星之间联系**总数**，和小机器人希望获得的星星数。\n\n接下来 $n$ 行，每行两个整数 $u,v$ 表示 第 $u$ 颗和第 $v$ 颗星星之间存在联系。\n\n保证任意星座内星星联系条数等于星星数，星星不会有自己到自己的联系，不会有两条联系建立在同样两颗星星上。", "outputFormat": "一行一个整数，表示小机器人需要获得足够的星星所需最少的钥匙数。", "hint": "**本题采用捆绑测试。**\n\n设星座共有 $l$ 个。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6,1\\le k\\le n-l$。\n\nSubtask 1：对于 $20\\%$ 的数据，保证 $n\\le 1000$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $l\\le 5$。\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $l\\le 15$。\n\nSubtask 4：无特殊限制。\n\n----\n\n样例解释 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ov9db62k.png)\n\n消除 $(1,4)$ 间联系即可。\n\n样例解释 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wh22obzj.png)\n\n消除 $(8,14),(8,10),(8,16)$ 三条联系即可。\n\n可以证明没有消除联系更少的方法。\n\n可能有别的方法也仅需要消除 $3$ 条联系。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Altale (Fan-made FTR 7)", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/inglwsjz.png)](https://music.163.com/#/program?id=2067229684)\n\n为什么评级 7？\n\nPowerless：Equilibrium FTR 9.", "description": "小机器人又在钓星星了。\n\n星星在天空中形成了若干个星座，每个星座有一个“中心点”，如果星星脱离了与中心点的直接或间接的联系，那么星星就会从星座中脱离，掉落到地面上。\n\n经过小机器人日日夜夜的观测，他发现了这些星座的性质：每一个星座内部都是联通的，星星的联系的数量总与星座中星星的数量相等。\n\n另外，不同的星座之间星星没有联系，同一个星座中的星星都有间接或直接的联系。\n\n他通过观测天体运动给星星编了号，他发现每个星座的中心点都是星座中编号最小的星星。\n\n可惜的是，小机器人只能通过随（diao）缘（yu）的方式获得取消这些联系的钥匙。\n\n小机器人非常贪心，想要用尽量少的时间获得尽量多的星星。\n\n他想要 $k$ 颗星星，你能告诉他他至少需要钓上几把钥匙吗？\n\n如果你解决了这个问题，说不定小机器人会送给你几颗星星哦~\n\n**[简化题意](https://www.luogu.com.cn/paste/5nhqqjzm)**", "inputFormat": "第一行两个整数 $n,k$，表示**天空中**所有的星星的**总数**和星星之间联系**总数**，和小机器人希望获得的星星数。\n\n接下来 $n$ 行，每行两个整数 $u,v$ 表示 第 $u$ 颗和第 $v$ 颗星星之间存在联系。\n\n保证任意星座内星星联系条数等于星星数，星星不会有自己到自己的联系，不会有两条联系建立在同样两颗星星上。", "outputFormat": "一行一个整数，表示小机器人需要获得足够的星星所需最少的钥匙数。", "hint": "**本题采用捆绑测试。**\n\n设星座共有 $l$ 个。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6,1\\le k\\le n-l$。\n\nSubtask 1：对于 $20\\%$ 的数据，保证 $n\\le 1000$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $l\\le 5$。\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $l\\le 15$。\n\nSubtask 4：无特殊限制。\n\n----\n\n样例解释 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ov9db62k.png)\n\n消除 $(1,4)$ 间联系即可。\n\n样例解释 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wh22obzj.png)\n\n消除 $(8,14),(8,10),(8,16)$ 三条联系即可。\n\n可以证明没有消除联系更少的方法。\n\n可能有别的方法也仅需要消除 $3$ 条联系。", "locale": "zh-CN"}}}
{"pid": "P8440", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n14 2\n51 2\n4 2\n1919810 2", "1\n6480\n495741\n57\n936062395"], ["5\n43752 25\n26701 25\n43734 25\n37553 25\n67839 25", "252345090\n86394269\n406573405\n129371352\n118835650"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Aleph-0 (Fan-made LGC 7)", "background": "Rolling_Code 是一个喜欢音游的女孩子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnkqui18.png)\n\nRolling_Code 打 $\\aleph_0$ 的成绩如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q298dfbe.png)\n\n~~然而这并不是 IN。~~\n\n慢报：Rolling_Code 将 Aleph-0 [IN 15(15.7)] All Perfect 了！", "description": "LeaF 作为数学教师开办了一系列完美数学课堂，参加的学生包括了：Rolling_Code，你，美穗。助教：琪露诺。\n\n第一节课，考试。\n\n做出这道题目的同学可以获得特殊版 $\\aleph_0$ 的率先游玩机会哦！——LeaF\n\n~~Aleph-0 (Legacy - SP Lv.?)~~\n\nRolling_Code 对音游非常感兴趣，所以也非常想要获得这首曲子。但是它打开题面的时候震惊了：\n\n> $f(x)=\\begin{cases}0&x=0\\\\1&x=1\\\\2f(\\frac{x}{2})&2|x\\operatorname{and} x>0 \\\\ 2f(\\frac{x-1}{2})+\\frac{2}{x-1}f(\\frac{x-1}{2})+x&\\text{otherwise}\\end{cases}$\n\n求 $S=\\left(\\sum\\limits_{i=0}^{r} f^k(i)\\right)\\bmod (10^9+7)$。\n\n其中 $f^k(i)=(f(i))^k$。\n\n本来是想要求 $r\\rightarrow\\aleph_0$ 的答案，可惜了啊，没有被定义，那就把 $r$ 范围放小一点吧。——LeaF\n\n由于某些原因，LeaF 定义 $0^0=1$。\n\n为了增加趣味，LeaF 还增加了多次对于 $r,k$ 的询问。\n\nRolling_Code 不会做，因此找你求助。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个数字 $t$，代表数据组数。\n\n接下来 $t$ 行每行两个数字 $r_i,k_i$，表示第 $i$ 次询问中的 $r,k$。\n", "outputFormat": "每行一个数字 $S_i$，表示第 $i$ 次询问的答案。\n", "hint": "\n**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10^3,1\\le r\\le 2^{63}-1,0\\le k\\le 30$。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $1\\le t\\le 100,1\\le r\\le 10^4$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^5$，**依赖于 Subtask 1**。\n\nSubtask 3：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^6,k$ 为定值。\n\nSubtask 4：对于 $25\\%$ 的数据：保证 $k=2$。\n\nSubtask 5：对于最后 $50\\%$ 的数据，无特殊限制，**依赖于 Subtask 1，2，3，4**。\n\n---\n\n### 样例解释\n\n$f_0=0,f_1=1,f_2=2,f_3=6,f_4=4$。\n\n对于 $r=4,k=2$ 的情况，$\\text{Ans}=0^2+1^2+2^2+6^2+4^2=57$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Aleph-0 (Fan-made LGC 7)", "background": "Rolling_Code 是一个喜欢音游的女孩子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnkqui18.png)\n\nRolling_Code 打 $\\aleph_0$ 的成绩如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q298dfbe.png)\n\n~~然而这并不是 IN。~~\n\n慢报：Rolling_Code 将 Aleph-0 [IN 15(15.7)] All Perfect 了！", "description": "LeaF 作为数学教师开办了一系列完美数学课堂，参加的学生包括了：Rolling_Code，你，美穗。助教：琪露诺。\n\n第一节课，考试。\n\n做出这道题目的同学可以获得特殊版 $\\aleph_0$ 的率先游玩机会哦！——LeaF\n\n~~Aleph-0 (Legacy - SP Lv.?)~~\n\nRolling_Code 对音游非常感兴趣，所以也非常想要获得这首曲子。但是它打开题面的时候震惊了：\n\n> $f(x)=\\begin{cases}0&x=0\\\\1&x=1\\\\2f(\\frac{x}{2})&2|x\\operatorname{and} x>0 \\\\ 2f(\\frac{x-1}{2})+\\frac{2}{x-1}f(\\frac{x-1}{2})+x&\\text{otherwise}\\end{cases}$\n\n求 $S=\\left(\\sum\\limits_{i=0}^{r} f^k(i)\\right)\\bmod (10^9+7)$。\n\n其中 $f^k(i)=(f(i))^k$。\n\n本来是想要求 $r\\rightarrow\\aleph_0$ 的答案，可惜了啊，没有被定义，那就把 $r$ 范围放小一点吧。——LeaF\n\n由于某些原因，LeaF 定义 $0^0=1$。\n\n为了增加趣味，LeaF 还增加了多次对于 $r,k$ 的询问。\n\nRolling_Code 不会做，因此找你求助。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个数字 $t$，代表数据组数。\n\n接下来 $t$ 行每行两个数字 $r_i,k_i$，表示第 $i$ 次询问中的 $r,k$。\n", "outputFormat": "每行一个数字 $S_i$，表示第 $i$ 次询问的答案。\n", "hint": "\n**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10^3,1\\le r\\le 2^{63}-1,0\\le k\\le 30$。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $1\\le t\\le 100,1\\le r\\le 10^4$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^5$，**依赖于 Subtask 1**。\n\nSubtask 3：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^6,k$ 为定值。\n\nSubtask 4：对于 $25\\%$ 的数据：保证 $k=2$。\n\nSubtask 5：对于最后 $50\\%$ 的数据，无特殊限制，**依赖于 Subtask 1，2，3，4**。\n\n---\n\n### 样例解释\n\n$f_0=0,f_1=1,f_2=2,f_3=6,f_4=4$。\n\n对于 $r=4,k=2$ 的情况，$\\text{Ans}=0^2+1^2+2^2+6^2+4^2=57$。", "locale": "zh-CN"}}}
{"pid": "P8441", "type": "P", "difficulty": 6, "samples": [["II\n11 13\n1 6 8 4\n2 7 7\n2 2 4\n2 11 11\n1 1 11 2\n1 5 5 5\n1 8 11 3\n2 1 8\n1 5 10 2\n1 2 4 4\n2 2 10\n2 3 9\n2 2 4", "4\n0\n0\n14\n14\n14\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "旭日东升", "background": "238 神教 #3\n\n——还有多久，太阳才会出来？\n\n——不知道……\n\n在古老的传说中，你家附近的小村，由于惹怒了太阳神而被罚去了日光。庄稼纷纷枯死了，人们在寒冷与饥饿中求生。而小村的附近，除了你家以外，就是一片大荒。\n\n神学开始在小村中兴起。越来越多的人成为了神学家，在当年集资修建的图书馆中没日没夜地研读着古籍。终于，大家在图书馆仓库的一个阴暗潮湿的角落里发现了一本——\n\n古老而破旧的，据说早已失传的《祈日术》。", "description": "书里的许多记载已不可辨识。根据残存的篇章，大家只能推测是要举办一场比赛，非常困难的比赛。至于比完之后怎么处理，完全没有头绪。\n\n但大家决定试试，哪怕是自己摸索呢？\n\n于是当你路过村子的时候，便看见展板上挂了这么一道题——唯一的比赛题。\n\n> 维护一个不可重集合的序列 $a$，长度为 $n$。支持以下两种操作：\n> 1. 给定 $l,r,x$，对于每个 $l\\le i\\le r$，将 $x$ 并入 $a_i$。\n> 2. 给定 $l,r$，设 $S$ 把每个 $l\\le i\\le r$ 的 $a_i$ 并在一起的集合，输出 $S$ 中所有元素的和。\n\n你看了看自己随身带着的电脑，决定去捧（za）个场。\n\n那么，加油吧！", "inputFormat": "输入数据的起始会有一个长度为 $2$ 的字符串，见【提示说明】处。它们可以用来帮你快速判断数据性质。\n\n第二行两个正整数 $n,m$ 表示集合序列的长度和操作的次数，初始的集合 $a_1,a_2,\\cdots,a_n$ 均为空。\n\n接下来 $m$ 行每行先是三个正整数 $op,l,r$ 如题。如果 $op=1$，那么这一行还会有一个正整数 $x$ 如题。", "outputFormat": "对于每行 $op=2$ 的输入，分别输出一个正整数，依次表示每次查询的结果。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m,x\\le10^5,1\\le l\\le r\\le n$。\n\nSubtask 1：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le100$;\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PP`;\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `IP`;\n\nSubtask 4：对于 $30\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PI`;\n\nSubtask 5：对于最后 $30\\%$ 的数据，无特殊限制。\n\n---\n\n输入第一行的字符串作用：该字符串包含两个为 `P` 或 `I` 的字符。如果第一个字符为 `P`，那么所有修改操作均满足 $l=r$；如果第二个字符为 `P`，那么所有查询操作均满足 $l=r$。对应位置为 `I` 表示无限制。\n\n---\n\n毫无疑问，你获得了第一名。\n\n“好的，那么我们现在来宣读获奖名单！”\n\n“第三名：……”（掌声，颁奖）\n\n“第二名：……”（掌声，颁奖）\n\n“第一……”\n\n主持人突然停下来，揉揉眼睛，随即惶恐地看着天空。附近的人们好奇地凑上去看主持人手中的名单。只见第一名的名字正以一种不可名状的方式剧烈扭曲重构着，反复地在两种不同形态之间变换。\n\n名单的上方突然出现了几个字符。随着字符逐渐变得清晰，人们看清了，是四个意义不明，但看着十分不耐烦的字符：“div1”。\n\n这时，第一名的名字的变动也稳定了下来——就好像其中有一方主动退出了一样。\n\n最终，名字固定在了五个字母：“David”。这并不是你随口报的那个假名。\n\n人们又随主持人一并看向天际，一个看着大概五六岁的孩子正跌跌撞撞地跑来。“我是第一名！”他高兴地笑着。他的母亲——太阳神就站在远方，一脸怜爱地看着那个小小的背影。\n\n一轮红日从地平线上喷薄而出。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "旭日东升", "background": "238 神教 #3\n\n——还有多久，太阳才会出来？\n\n——不知道……\n\n在古老的传说中，你家附近的小村，由于惹怒了太阳神而被罚去了日光。庄稼纷纷枯死了，人们在寒冷与饥饿中求生。而小村的附近，除了你家以外，就是一片大荒。\n\n神学开始在小村中兴起。越来越多的人成为了神学家，在当年集资修建的图书馆中没日没夜地研读着古籍。终于，大家在图书馆仓库的一个阴暗潮湿的角落里发现了一本——\n\n古老而破旧的，据说早已失传的《祈日术》。", "description": "书里的许多记载已不可辨识。根据残存的篇章，大家只能推测是要举办一场比赛，非常困难的比赛。至于比完之后怎么处理，完全没有头绪。\n\n但大家决定试试，哪怕是自己摸索呢？\n\n于是当你路过村子的时候，便看见展板上挂了这么一道题——唯一的比赛题。\n\n> 维护一个不可重集合的序列 $a$，长度为 $n$。支持以下两种操作：\n> 1. 给定 $l,r,x$，对于每个 $l\\le i\\le r$，将 $x$ 并入 $a_i$。\n> 2. 给定 $l,r$，设 $S$ 把每个 $l\\le i\\le r$ 的 $a_i$ 并在一起的集合，输出 $S$ 中所有元素的和。\n\n你看了看自己随身带着的电脑，决定去捧（za）个场。\n\n那么，加油吧！", "inputFormat": "输入数据的起始会有一个长度为 $2$ 的字符串，见【提示说明】处。它们可以用来帮你快速判断数据性质。\n\n第二行两个正整数 $n,m$ 表示集合序列的长度和操作的次数，初始的集合 $a_1,a_2,\\cdots,a_n$ 均为空。\n\n接下来 $m$ 行每行先是三个正整数 $op,l,r$ 如题。如果 $op=1$，那么这一行还会有一个正整数 $x$ 如题。", "outputFormat": "对于每行 $op=2$ 的输入，分别输出一个正整数，依次表示每次查询的结果。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m,x\\le10^5,1\\le l\\le r\\le n$。\n\nSubtask 1：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le100$;\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PP`;\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `IP`;\n\nSubtask 4：对于 $30\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PI`;\n\nSubtask 5：对于最后 $30\\%$ 的数据，无特殊限制。\n\n---\n\n输入第一行的字符串作用：该字符串包含两个为 `P` 或 `I` 的字符。如果第一个字符为 `P`，那么所有修改操作均满足 $l=r$；如果第二个字符为 `P`，那么所有查询操作均满足 $l=r$。对应位置为 `I` 表示无限制。\n\n---\n\n毫无疑问，你获得了第一名。\n\n“好的，那么我们现在来宣读获奖名单！”\n\n“第三名：……”（掌声，颁奖）\n\n“第二名：……”（掌声，颁奖）\n\n“第一……”\n\n主持人突然停下来，揉揉眼睛，随即惶恐地看着天空。附近的人们好奇地凑上去看主持人手中的名单。只见第一名的名字正以一种不可名状的方式剧烈扭曲重构着，反复地在两种不同形态之间变换。\n\n名单的上方突然出现了几个字符。随着字符逐渐变得清晰，人们看清了，是四个意义不明，但看着十分不耐烦的字符：“div1”。\n\n这时，第一名的名字的变动也稳定了下来——就好像其中有一方主动退出了一样。\n\n最终，名字固定在了五个字母：“David”。这并不是你随口报的那个假名。\n\n人们又随主持人一并看向天际，一个看着大概五六岁的孩子正跌跌撞撞地跑来。“我是第一名！”他高兴地笑着。他的母亲——太阳神就站在远方，一脸怜爱地看着那个小小的背影。\n\n一轮红日从地平线上喷薄而出。", "locale": "zh-CN"}}}
{"pid": "P8442", "type": "P", "difficulty": 7, "samples": [["5 7\n5 5\n5 4\n5 5\n5 9", "14\n2\n6\n2\n72"], ["100000 998684\n100000 998671\n100000 998110", "513030267786335\n0\n570065615362699"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "lgdAKIOI", "background": "本题中出现的神犇：[_lgswdn](https://www.luogu.com.cn/user/180652)\n\nAK 完 NOI 后，lgd 一路势不可挡，不久便进入了国家队，来到了 IOI 赛场。", "description": "6ms 后，lgd 写对了最后一题的\n\n```plain\n可持久化非确定状态AC自动分块维护线段平衡仙人掌优化最小费用最大流预处理混合图上莫比乌斯反演莫队带花舞蹈链并查集树状数组套主席树预处理动态DP分治FFT求多项式逆元对数函数的指数函数用可持久化并查集合并最小费用循环流上插头DP\n```\n算法，AK 了 IOI。于是他闲着无聊，开始给自己出题。\n\n有一题是这样的：\n\n$n$ 个同学站成一个圆圈，其中的一个同学手里拿着一个球。每一次，手里有球的同学可以把球传给自己左右的两个同学中的一个（左右任意）。那么有多少种不同的传球方法可以使得从 lgd 手里开始传的球，传了 $m$ 次以后，又回到 lgd 自己手里呢？两种传球方法被视作不同的方法，当且仅当这两种方法中，接到球的同学按接球顺序组成的序列是不同的。\n\n你听说这道题之后，希望把它做出来，以不遭到 lgd 的鄙视。由于 lgd 比较仁慈，他允许你只告诉他答案取模 $720000054000001$ 的余数就好了。", "inputFormat": "此题有多组数据。\n\n对于每组数据，一行两个正整数 $n,m$，含义如题。", "outputFormat": "对于每组数据，一行一个自然数表示答案。", "hint": "**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n**请注意常数因子带来的程序效率及空间占用上的影响。**\n\n数据范围如下表所示。\n\n|数据点编号|$n$|$m$|数据组数|分值|特殊性质|子任务编号|\n|----|----|----|----|----|----|----|\n|$1\\sim6$|$=100$|$\\le100$|$\\le5$|$5$|A|0|\n|$7\\sim12$|$=10^5$|$\\le10^6$|$\\le5$|$15$|A|1|\n|$13\\sim18$|$=10^6$|$\\le2\\times10^6$|$\\le5$|$10$|A|2|\n|$19\\sim24$|$=2\\times10^5$|$\\le10^{1000}$|$\\le5$|$20$|A|3|\n|$25\\sim30$|$\\le6\\times10^6$|$\\le10^{30}$|$\\le50$|$20$||4|\n|$31\\sim36$|$\\le6\\times10^6$|$\\le10^{10^4}$|$\\le2500$|$30$||5|\n\n特殊性质 A：所有输入的 $n$ 全部相同。\n\n对于 $100\\%$ 的数据，$n\\in\\{10,13,100,10^3,10^4,10^5,2\\times10^5,6\\times10^5,10^6,6\\times10^6\\}$。\n\n---\n\nlgd 把这题交给你的时候同时给了你另外一段代码，不过有什么用就不知道了。\n\n```cpp\ntypedef long long i64;\ntypedef unsigned long long u64;\ntypedef __uint128_t u128;\nstruct Mod64 {\n  Mod64() : n(0) {}\n  Mod64(u64 n) : n(init(n)) {}\n  static u64 modulus() { return mod; }\n  static u64 init(u64 w) { return reduce(u128(w) * r2); }\n  static void setmod(u64 m) {\n    mod = m;\n    inv = 1;\n    for (int i = 0; i < 6; ++i) inv *= 2 + inv * m;\n    r2 = -u128(m) % m;\n  }\n  static u64 reduce(u128 x) {\n    u64 y = (x + u128(u64(x) * inv) * mod) >> 64;\n    return i64(y) > mod ? y - mod : y;\n  }\n  Mod64& operator+=(Mod64 rhs) {\n    n += rhs.n - mod;\n    if (i64(n) < 0) n += mod;\n    return *this;\n  }\n  Mod64& operator-=(Mod64 rhs) {\n    if (n < rhs.n)\n      n += mod - rhs.n;\n    else\n      n -= rhs.n;\n    return *this;\n  }\n  Mod64 operator-() const {\n    if (!n) return *this;\n    Mod64 rhs;\n    rhs.n = mod - n;\n    return rhs;\n  }\n  Mod64 operator+(Mod64 rhs) const { return Mod64(*this) += rhs; }\n  Mod64 operator-(Mod64 rhs) const { return Mod64(*this) -= rhs; }\n  Mod64& operator*=(Mod64 rhs) {\n    n = reduce(u128(n) * rhs.n);\n    return *this;\n  }\n  Mod64 operator*(Mod64 rhs) const { return Mod64(*this) *= rhs; }\n  u64 get() const { return reduce(n); }\n  static u64 mod, inv, r2;\n  u64 n;\n};\nu64 Mod64::mod, Mod64::inv, Mod64::r2;\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "lgdAKIOI", "background": "本题中出现的神犇：[_lgswdn](https://www.luogu.com.cn/user/180652)\n\nAK 完 NOI 后，lgd 一路势不可挡，不久便进入了国家队，来到了 IOI 赛场。", "description": "6ms 后，lgd 写对了最后一题的\n\n```plain\n可持久化非确定状态AC自动分块维护线段平衡仙人掌优化最小费用最大流预处理混合图上莫比乌斯反演莫队带花舞蹈链并查集树状数组套主席树预处理动态DP分治FFT求多项式逆元对数函数的指数函数用可持久化并查集合并最小费用循环流上插头DP\n```\n算法，AK 了 IOI。于是他闲着无聊，开始给自己出题。\n\n有一题是这样的：\n\n$n$ 个同学站成一个圆圈，其中的一个同学手里拿着一个球。每一次，手里有球的同学可以把球传给自己左右的两个同学中的一个（左右任意）。那么有多少种不同的传球方法可以使得从 lgd 手里开始传的球，传了 $m$ 次以后，又回到 lgd 自己手里呢？两种传球方法被视作不同的方法，当且仅当这两种方法中，接到球的同学按接球顺序组成的序列是不同的。\n\n你听说这道题之后，希望把它做出来，以不遭到 lgd 的鄙视。由于 lgd 比较仁慈，他允许你只告诉他答案取模 $720000054000001$ 的余数就好了。", "inputFormat": "此题有多组数据。\n\n对于每组数据，一行两个正整数 $n,m$，含义如题。", "outputFormat": "对于每组数据，一行一个自然数表示答案。", "hint": "**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n**请注意常数因子带来的程序效率及空间占用上的影响。**\n\n数据范围如下表所示。\n\n|数据点编号|$n$|$m$|数据组数|分值|特殊性质|子任务编号|\n|----|----|----|----|----|----|----|\n|$1\\sim6$|$=100$|$\\le100$|$\\le5$|$5$|A|0|\n|$7\\sim12$|$=10^5$|$\\le10^6$|$\\le5$|$15$|A|1|\n|$13\\sim18$|$=10^6$|$\\le2\\times10^6$|$\\le5$|$10$|A|2|\n|$19\\sim24$|$=2\\times10^5$|$\\le10^{1000}$|$\\le5$|$20$|A|3|\n|$25\\sim30$|$\\le6\\times10^6$|$\\le10^{30}$|$\\le50$|$20$||4|\n|$31\\sim36$|$\\le6\\times10^6$|$\\le10^{10^4}$|$\\le2500$|$30$||5|\n\n特殊性质 A：所有输入的 $n$ 全部相同。\n\n对于 $100\\%$ 的数据，$n\\in\\{10,13,100,10^3,10^4,10^5,2\\times10^5,6\\times10^5,10^6,6\\times10^6\\}$。\n\n---\n\nlgd 把这题交给你的时候同时给了你另外一段代码，不过有什么用就不知道了。\n\n```cpp\ntypedef long long i64;\ntypedef unsigned long long u64;\ntypedef __uint128_t u128;\nstruct Mod64 {\n  Mod64() : n(0) {}\n  Mod64(u64 n) : n(init(n)) {}\n  static u64 modulus() { return mod; }\n  static u64 init(u64 w) { return reduce(u128(w) * r2); }\n  static void setmod(u64 m) {\n    mod = m;\n    inv = 1;\n    for (int i = 0; i < 6; ++i) inv *= 2 + inv * m;\n    r2 = -u128(m) % m;\n  }\n  static u64 reduce(u128 x) {\n    u64 y = (x + u128(u64(x) * inv) * mod) >> 64;\n    return i64(y) > mod ? y - mod : y;\n  }\n  Mod64& operator+=(Mod64 rhs) {\n    n += rhs.n - mod;\n    if (i64(n) < 0) n += mod;\n    return *this;\n  }\n  Mod64& operator-=(Mod64 rhs) {\n    if (n < rhs.n)\n      n += mod - rhs.n;\n    else\n      n -= rhs.n;\n    return *this;\n  }\n  Mod64 operator-() const {\n    if (!n) return *this;\n    Mod64 rhs;\n    rhs.n = mod - n;\n    return rhs;\n  }\n  Mod64 operator+(Mod64 rhs) const { return Mod64(*this) += rhs; }\n  Mod64 operator-(Mod64 rhs) const { return Mod64(*this) -= rhs; }\n  Mod64& operator*=(Mod64 rhs) {\n    n = reduce(u128(n) * rhs.n);\n    return *this;\n  }\n  Mod64 operator*(Mod64 rhs) const { return Mod64(*this) *= rhs; }\n  u64 get() const { return reduce(n); }\n  static u64 mod, inv, r2;\n  u64 n;\n};\nu64 Mod64::mod, Mod64::inv, Mod64::r2;\n```", "locale": "zh-CN"}}}
{"pid": "P8443", "type": "P", "difficulty": 1, "samples": [["4\n3 6 1\n8 11 4\n4 4 3\n7 16 2", "1\n2\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "gcd.", "background": "与你借星火，容我题山河。", "description": "$T$ 组数据，每一组数据给定 $l,r,x$，试求：$\\gcd(\\lfloor \\frac{l}{x}\\rfloor,\\lfloor \\frac{l+1}{x}\\rfloor,\\cdots,\\lfloor \\frac{r}{x}\\rfloor)$ 的值。\n\n- 其中 $\\gcd$ 表示求最大公约数，例如 $\\gcd(6,9)=3$，$\\gcd(2,4,8)=2$，$\\gcd(5,6,7)=1$。特别地，我们定义一个正整数的最大公约数是它自身。\n- $\\lfloor x \\rfloor$ 表示 $x$ 向下取整，例如 $\\lfloor 3.14 \\rfloor=3$。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数。\n\n对于每一组数据，输入一行三个正整数 $l,r,x$，以空格隔开。", "outputFormat": "对于每一组数据，输出一行，一个正整数表示答案。", "hint": "**【样例解释和说明】**\n\n样例中的 $T=4$，说明有 $4$ 组数据。\n\n- 对于第一组数据，$l=3,r=6,x=1$，即求 $\\gcd(\\lfloor \\frac{3}{1}\\rfloor,\\lfloor \\frac{4}{1} \\rfloor, \\lfloor \\frac{5}{1}\\rfloor,\\lfloor \\frac{6}{1}\\rfloor)=1$。\n- 对于第二组数据，$l=8,r=11,x=4$，即求 $\\gcd(\\lfloor \\frac{8}{4} \\rfloor,\\lfloor \\frac{9}{4} \\rfloor,\\lfloor \\frac{10}{4}\\rfloor,\\lfloor \\frac{11}{4}\\rfloor)=\\gcd(2,2,2,2)=2$。\n- 对于第三组数据，$l=4,r=4,x=3$，即求 $\\gcd(\\lfloor \\frac{4}{3}\\rfloor)=1$。\n- 对于第四组数据，类似可得结果是 $1$。\n\n**【数据范围】**\n\n- 对于 $10\\%$ 的数据，$x=1$。\n- 另有 $10\\%$ 的数据，$l=r$。\n- 另有 $20\\%$ 的数据，$r-l \\leq 10^5$。\n- 对于上述的前 $40\\%$ 的数据，$1 \\leq x \\leq l \\leq r \\leq 10^9$。\n- 对于所有数据，$1 \\leq x \\leq l \\leq r \\leq 10^{18}$，$1 \\leq T \\leq 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "gcd.", "background": "与你借星火，容我题山河。", "description": "$T$ 组数据，每一组数据给定 $l,r,x$，试求：$\\gcd(\\lfloor \\frac{l}{x}\\rfloor,\\lfloor \\frac{l+1}{x}\\rfloor,\\cdots,\\lfloor \\frac{r}{x}\\rfloor)$ 的值。\n\n- 其中 $\\gcd$ 表示求最大公约数，例如 $\\gcd(6,9)=3$，$\\gcd(2,4,8)=2$，$\\gcd(5,6,7)=1$。特别地，我们定义一个正整数的最大公约数是它自身。\n- $\\lfloor x \\rfloor$ 表示 $x$ 向下取整，例如 $\\lfloor 3.14 \\rfloor=3$。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数。\n\n对于每一组数据，输入一行三个正整数 $l,r,x$，以空格隔开。", "outputFormat": "对于每一组数据，输出一行，一个正整数表示答案。", "hint": "**【样例解释和说明】**\n\n样例中的 $T=4$，说明有 $4$ 组数据。\n\n- 对于第一组数据，$l=3,r=6,x=1$，即求 $\\gcd(\\lfloor \\frac{3}{1}\\rfloor,\\lfloor \\frac{4}{1} \\rfloor, \\lfloor \\frac{5}{1}\\rfloor,\\lfloor \\frac{6}{1}\\rfloor)=1$。\n- 对于第二组数据，$l=8,r=11,x=4$，即求 $\\gcd(\\lfloor \\frac{8}{4} \\rfloor,\\lfloor \\frac{9}{4} \\rfloor,\\lfloor \\frac{10}{4}\\rfloor,\\lfloor \\frac{11}{4}\\rfloor)=\\gcd(2,2,2,2)=2$。\n- 对于第三组数据，$l=4,r=4,x=3$，即求 $\\gcd(\\lfloor \\frac{4}{3}\\rfloor)=1$。\n- 对于第四组数据，类似可得结果是 $1$。\n\n**【数据范围】**\n\n- 对于 $10\\%$ 的数据，$x=1$。\n- 另有 $10\\%$ 的数据，$l=r$。\n- 另有 $20\\%$ 的数据，$r-l \\leq 10^5$。\n- 对于上述的前 $40\\%$ 的数据，$1 \\leq x \\leq l \\leq r \\leq 10^9$。\n- 对于所有数据，$1 \\leq x \\leq l \\leq r \\leq 10^{18}$，$1 \\leq T \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P8444", "type": "P", "difficulty": 2, "samples": [["3 \n1 1 2\n5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷原创", "洛谷月赛"], "title": "不等价交换法则", "background": "天弓千亦，市场之神，拥有着剥夺所有权的能力。\n\n她希望着重建市场，在严格而公正的交易中一点点恢复自己的神力。但她看向世间一处处交易之所时，无力感却又遮住了她心中虹色的月光，把她的不甘一点点化作现实的泪。\n\n她一次次在梦中经历着那个晚上。孤独的、神力尽失的她，紧紧攥住她那空白的卡牌，却被灵梦一把夺走。最后一张希望，也伴着虹色的月，消逝在永远的幻想中了。\n\n也许交易本身就是不等价的吧，她想。", "description": "你有 $n$ **件**商品可以买，其中第 $i$ 件的价格为 $a_i$。\n\n蓝会给出一个正整数 $w$，代表你有 $w$ 元钱。你仅可以选择**一件**商品购买。店主允许你用已有的商品交换剩余的商品（当然了，也可以不换），但你交换获得的商品的价值和必须小于等于你用于交换的商品价值和。你想要知道，你最多能获得多少件商品。\n\n注意：不能用空集交换其他商品。", "inputFormat": "第一行一个正整数 $n$，表示商品个数。\n\n接下来一行 $n$ 个正整数，表示 $\\{a_n\\}$。\n\n接下来一行 $1$ 个正整数，表示 $w$。", "outputFormat": "一个正整数，表示询问的结果。 ", "hint": "【样例解释】\n\n买价值为 $2$ 的物品，并交换为两个价值为 $1$ 的物品。\n\n【数据范围及约束】\n\n对于 $40\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq10^6$，$0 \\leq a_i\\leq 10^9$，$1 \\leq w\\leq2\\times10^{9}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不等价交换法则", "background": "天弓千亦，市场之神，拥有着剥夺所有权的能力。\n\n她希望着重建市场，在严格而公正的交易中一点点恢复自己的神力。但她看向世间一处处交易之所时，无力感却又遮住了她心中虹色的月光，把她的不甘一点点化作现实的泪。\n\n她一次次在梦中经历着那个晚上。孤独的、神力尽失的她，紧紧攥住她那空白的卡牌，却被灵梦一把夺走。最后一张希望，也伴着虹色的月，消逝在永远的幻想中了。\n\n也许交易本身就是不等价的吧，她想。", "description": "你有 $n$ **件**商品可以买，其中第 $i$ 件的价格为 $a_i$。\n\n蓝会给出一个正整数 $w$，代表你有 $w$ 元钱。你仅可以选择**一件**商品购买。店主允许你用已有的商品交换剩余的商品（当然了，也可以不换），但你交换获得的商品的价值和必须小于等于你用于交换的商品价值和。你想要知道，你最多能获得多少件商品。\n\n注意：不能用空集交换其他商品。", "inputFormat": "第一行一个正整数 $n$，表示商品个数。\n\n接下来一行 $n$ 个正整数，表示 $\\{a_n\\}$。\n\n接下来一行 $1$ 个正整数，表示 $w$。", "outputFormat": "一个正整数，表示询问的结果。 ", "hint": "【样例解释】\n\n买价值为 $2$ 的物品，并交换为两个价值为 $1$ 的物品。\n\n【数据范围及约束】\n\n对于 $40\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq10^6$，$0 \\leq a_i\\leq 10^9$，$1 \\leq w\\leq2\\times10^{9}$。\n", "locale": "zh-CN"}}}
{"pid": "P8445", "type": "P", "difficulty": 4, "samples": [["5\n0 1 0 1 2\n0 2 0 1 0", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "射命丸文的取材之旅", "background": "射命丸文（Syameimaru Aya）是一只鸦天狗。她不定期制作名为「文文。新闻」的报纸，而为此，她需要对她收集到的新闻进行剪裁。", "description": "射命丸文现在收集到了 $2n$ 条新闻。她想要将其刊登于自己的报刊之上。然而，自己的报刊最多只能刊登 $n$ 条新闻。\n\n为了能在 $n$ 条新闻的篇幅中让自己的报刊得到最大的吸引力，她将这 $2n$ 条新闻**等分**成**两份**，即每一份中均有 $n$ 条新闻。\n\n每一条新闻自然有着其吸引力。在**第一份**中，第 $i$ 条新闻有着吸引力 $a_i$，而在**第二份**中，第 $i$ 条新闻有着吸引力 $b_i$。这两份新闻的划分在输入时已经给定。\n\n现在射命丸文要从中选取新闻放入自己的报刊。报刊上的第 $i$ 条新闻，将选择**第一份**新闻的第 $i$ 条或**第二份**新闻的第 $i$ 条。这样，报刊上的新闻就可以构成一个长度为 $n$ 的序列，第 $i$ 项也就是第 $i$ 条新闻有着吸引力 $c_i \\in \\{a_i,b_i\\}$。\n\n而这样的一份报刊有着其综合影响力。根据射命丸文的经验，对于她这样的一份含有 $n$ 条新闻的报刊，其综合影响力为：\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n其中 $\\operatorname{mex}\\{c_l,c_{l+1},\\dots,c_{r-1},c_r\\}$ 指的是 $c_l,c_{l+1},\\dots,c_{r-1},c_r$ 中没有出现过的**最小非负整数**。\n\n现在她希望知道，在进行这些操作之后，自己的报刊的**最大**的综合影响力会是多少呢？由于她还要继续取材，因此她把这个任务交付给了你。\n\n【形式化题意】\n\n给定序列 $\\{a_n\\},\\{b_n\\}$，求一个序列 $\\{c_n\\}$ 满足 $\\forall i\\in[1,n],c_i\\in\\{a_i,b_i\\}$，最大化\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n并输出该式子可能的最大值。", "inputFormat": "第一行一个正整数 $n$，表示**每一份**新闻中的新闻条数。\n\n第二行 $n$ 个**非负整数**表示第一份新闻中每一条新闻的吸引力，即 $a_1,a_2\\dots ,a_{n-1},a_n$。\n\n第三行 $n$ 个**非负整数**表示第二份新闻中每一条新闻的吸引力，即 $b_1,b_2\\dots ,b_{n-1},b_n$。", "outputFormat": "输出一个整数，表示报刊的**最大**的综合影响力会是多少。", "hint": "**【样例解释和说明】**\n\n射命丸文可以让自己的 $5$ 条新闻分别取第二份的第 $1$ 条，第一份的第 $2$ 条，第一份的第 $3$ 条，第一份的第 $4$ 条和第二份的第 $5$ 条。这样一来，她的报刊每条新闻的吸引力 $c_i$ 分别为 $0,1,0,1,0$。令 $l=1,r=5$，则 $\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=2$，$r-l+1-\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=3$，不难证明其为数列 $c$ 的综合影响力，也是**所有的可能的** $c$ 的最大综合影响力。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，满足 $1 \\leq n\\leq 10$。\n\n另外 $40\\%$ 的数据满足 $a_i=b_i$。\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n\\le 10^6$，$0\n\\leq a_i,b_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "射命丸文的取材之旅", "background": "射命丸文（Syameimaru Aya）是一只鸦天狗。她不定期制作名为「文文。新闻」的报纸，而为此，她需要对她收集到的新闻进行剪裁。", "description": "射命丸文现在收集到了 $2n$ 条新闻。她想要将其刊登于自己的报刊之上。然而，自己的报刊最多只能刊登 $n$ 条新闻。\n\n为了能在 $n$ 条新闻的篇幅中让自己的报刊得到最大的吸引力，她将这 $2n$ 条新闻**等分**成**两份**，即每一份中均有 $n$ 条新闻。\n\n每一条新闻自然有着其吸引力。在**第一份**中，第 $i$ 条新闻有着吸引力 $a_i$，而在**第二份**中，第 $i$ 条新闻有着吸引力 $b_i$。这两份新闻的划分在输入时已经给定。\n\n现在射命丸文要从中选取新闻放入自己的报刊。报刊上的第 $i$ 条新闻，将选择**第一份**新闻的第 $i$ 条或**第二份**新闻的第 $i$ 条。这样，报刊上的新闻就可以构成一个长度为 $n$ 的序列，第 $i$ 项也就是第 $i$ 条新闻有着吸引力 $c_i \\in \\{a_i,b_i\\}$。\n\n而这样的一份报刊有着其综合影响力。根据射命丸文的经验，对于她这样的一份含有 $n$ 条新闻的报刊，其综合影响力为：\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n其中 $\\operatorname{mex}\\{c_l,c_{l+1},\\dots,c_{r-1},c_r\\}$ 指的是 $c_l,c_{l+1},\\dots,c_{r-1},c_r$ 中没有出现过的**最小非负整数**。\n\n现在她希望知道，在进行这些操作之后，自己的报刊的**最大**的综合影响力会是多少呢？由于她还要继续取材，因此她把这个任务交付给了你。\n\n【形式化题意】\n\n给定序列 $\\{a_n\\},\\{b_n\\}$，求一个序列 $\\{c_n\\}$ 满足 $\\forall i\\in[1,n],c_i\\in\\{a_i,b_i\\}$，最大化\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n并输出该式子可能的最大值。", "inputFormat": "第一行一个正整数 $n$，表示**每一份**新闻中的新闻条数。\n\n第二行 $n$ 个**非负整数**表示第一份新闻中每一条新闻的吸引力，即 $a_1,a_2\\dots ,a_{n-1},a_n$。\n\n第三行 $n$ 个**非负整数**表示第二份新闻中每一条新闻的吸引力，即 $b_1,b_2\\dots ,b_{n-1},b_n$。", "outputFormat": "输出一个整数，表示报刊的**最大**的综合影响力会是多少。", "hint": "**【样例解释和说明】**\n\n射命丸文可以让自己的 $5$ 条新闻分别取第二份的第 $1$ 条，第一份的第 $2$ 条，第一份的第 $3$ 条，第一份的第 $4$ 条和第二份的第 $5$ 条。这样一来，她的报刊每条新闻的吸引力 $c_i$ 分别为 $0,1,0,1,0$。令 $l=1,r=5$，则 $\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=2$，$r-l+1-\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=3$，不难证明其为数列 $c$ 的综合影响力，也是**所有的可能的** $c$ 的最大综合影响力。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，满足 $1 \\leq n\\leq 10$。\n\n另外 $40\\%$ 的数据满足 $a_i=b_i$。\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n\\le 10^6$，$0\n\\leq a_i,b_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P8446", "type": "P", "difficulty": 4, "samples": [["6\n5 2 4 2 8 8", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "虹色的北斗七星", "background": "**【题目背景与题意无关，可以直接阅读题目描述】**\n\n（本题目背景部分改编自真实案例）\n\n宇佐见莲子是外界的一名大学生，在京都的一所大学中专攻超统一物理学，最近在做弦论方面的研究。\n\n莲子与梅莉一同经营着名为秘封俱乐部的社团。进行着在科学世纪探寻遍布四处的结界的活动。\n\n这个月梅莉和莲子又商量着去进行新一轮的探索与发现与贴贴，但是在两人手牵手出门的时候甜腻腻的气氛却被一通电话打破。\n\n莲子因为经常外出探险，同时与梅莉增进感情交流，所以作业一拖再拖。她的物理学教授忍无可忍（毕竟莲子可是拖了一个学期的物理作业一个字都没有动呢），规定她必须在 $\\sqrt9$ 天之内交上一篇学习报告，然后才同意给她的“课外实践活动”报备。\n\n这可就没有办法了呢（笑），莲子只好先努力在 deadline 之前糊弄完她的学习报告，然后才能执行她们观赏夜空的计划。", "description": "由于前两天都被莲子用来进行活动的筹备工作了，所以现在她只有几分钟的时间糊弄作业。尽管这样不太好，但是她别无选择，只能从之前的课堂笔记中摘取一段内容。\n\n莲子的课堂笔记共有 $n$ 章，每章分别记着不同的内容。她可以选择其中任意连续的一段 $[l,r]$（表示选取了第 $l$ 章到第 $r$ 章）作为最终的成果。\n\n每一章的内容各不相同，老师对每章内容有一个评价分 $a_i$。因为学习报告要体现出学生的进步，所以老师的满意度将会加上其中最差（$\\min\\{a_i\\}$）和最好章节（$\\max\\{a_i\\}$）的评价分差距。因为直接把冗长的课堂笔记作为报告提交显得太敷衍，所以每存在一章内容，老师的满意度就会 $-1$。\n\n形式化地来说，如果莲子提交了 $[l,r]$ 这一段区间的笔记，老师的满意度将会是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-(r-l+1)$。\n\n莲子希望你能帮她找出一种使得老师的满意度最大的方案。因为她非常聪明，所以只需要你告诉她这个最大的满意度，她就会知道应该怎么做。\n\n**【形式化题意】**\n\n你有一个长度为 $n$ 的序列 $a$，它的一个区间 $[l,r]$ 的价值是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-r+l-1$。求这个序列价值最大的子区间并输出这个价值。", "inputFormat": "第一行输入一个正整数 $n$，表示笔记的章节数。\n\n第二行输入评价分序列 $a$，以空格隔开每一个元素。", "outputFormat": "输出这个评价分序列中，老师满意度最大的子区间的满意度。", "hint": "**【样例解释和说明】**\n\n令 $l=4,r=5$，则有 $\\min\\{a_4,a_5\\}=2$，$\\max\\{a_4,a_5\\}=8$，贡献值为 $4$。易证这是满意度最大的子区间。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq 5\\times 10^3$。\n- 另有 $20\\%$ 的数据，所有的 $a_i$ 都相等。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 4\\times10^6$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "虹色的北斗七星", "background": "**【题目背景与题意无关，可以直接阅读题目描述】**\n\n（本题目背景部分改编自真实案例）\n\n宇佐见莲子是外界的一名大学生，在京都的一所大学中专攻超统一物理学，最近在做弦论方面的研究。\n\n莲子与梅莉一同经营着名为秘封俱乐部的社团。进行着在科学世纪探寻遍布四处的结界的活动。\n\n这个月梅莉和莲子又商量着去进行新一轮的探索与发现与贴贴，但是在两人手牵手出门的时候甜腻腻的气氛却被一通电话打破。\n\n莲子因为经常外出探险，同时与梅莉增进感情交流，所以作业一拖再拖。她的物理学教授忍无可忍（毕竟莲子可是拖了一个学期的物理作业一个字都没有动呢），规定她必须在 $\\sqrt9$ 天之内交上一篇学习报告，然后才同意给她的“课外实践活动”报备。\n\n这可就没有办法了呢（笑），莲子只好先努力在 deadline 之前糊弄完她的学习报告，然后才能执行她们观赏夜空的计划。", "description": "由于前两天都被莲子用来进行活动的筹备工作了，所以现在她只有几分钟的时间糊弄作业。尽管这样不太好，但是她别无选择，只能从之前的课堂笔记中摘取一段内容。\n\n莲子的课堂笔记共有 $n$ 章，每章分别记着不同的内容。她可以选择其中任意连续的一段 $[l,r]$（表示选取了第 $l$ 章到第 $r$ 章）作为最终的成果。\n\n每一章的内容各不相同，老师对每章内容有一个评价分 $a_i$。因为学习报告要体现出学生的进步，所以老师的满意度将会加上其中最差（$\\min\\{a_i\\}$）和最好章节（$\\max\\{a_i\\}$）的评价分差距。因为直接把冗长的课堂笔记作为报告提交显得太敷衍，所以每存在一章内容，老师的满意度就会 $-1$。\n\n形式化地来说，如果莲子提交了 $[l,r]$ 这一段区间的笔记，老师的满意度将会是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-(r-l+1)$。\n\n莲子希望你能帮她找出一种使得老师的满意度最大的方案。因为她非常聪明，所以只需要你告诉她这个最大的满意度，她就会知道应该怎么做。\n\n**【形式化题意】**\n\n你有一个长度为 $n$ 的序列 $a$，它的一个区间 $[l,r]$ 的价值是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-r+l-1$。求这个序列价值最大的子区间并输出这个价值。", "inputFormat": "第一行输入一个正整数 $n$，表示笔记的章节数。\n\n第二行输入评价分序列 $a$，以空格隔开每一个元素。", "outputFormat": "输出这个评价分序列中，老师满意度最大的子区间的满意度。", "hint": "**【样例解释和说明】**\n\n令 $l=4,r=5$，则有 $\\min\\{a_4,a_5\\}=2$，$\\max\\{a_4,a_5\\}=8$，贡献值为 $4$。易证这是满意度最大的子区间。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq 5\\times 10^3$。\n- 另有 $20\\%$ 的数据，所有的 $a_i$ 都相等。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 4\\times10^6$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8447", "type": "P", "difficulty": 6, "samples": [["5\n1 5\n1\n2\n3\n4\n5\n5 5\n8\n20\n25\n37\n49\n11 1\n179\n13 1\n507\n19 1\n841", "1\n2\n3\n4\n5\n2\n2\n1\n4\n4\n3\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数论", "O2优化", "背包 DP"], "title": "「FAOI-R1」完美的平方数", "background": "", "description": "给定一个正整数 $m$。现有 $Q$ 个询问，每个询问给定一个正整数 $n$，要求你从 $1,4,9,16,\\ldots,m^2$ 中取出若干个数（**同一个数可以取出多次**），使它们的和**恰好**为 $n$。问最少取出多少个数？（如果无解，则输出 $-1$）", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n对于每组数据：\n\n第一行，两个正整数 $m,Q$。\n\n下面 $Q$ 行，每行一个正整数 $n$。\n", "outputFormat": "对于每组数据的每个询问，输出一行一个正整数，表示答案。", "hint": "**样例解释：**\n\n对于第一组数据，显然答案是 $n$，因为你只能取 $1$。\n\n对于第二组数据：\n\n- $8=2^2+2^2$；\n- $20=4^2+2^2$；\n- $25=5^2$；\n- $37=5^2+2^2+2^2+2^2$；（或 $37=4^2+4^2+2^2+1^2$）\n- $49=5^2+4^2+2^2+2^2$；（或 $49=4^2+4^2+4^2+1^2$）\n- **请注意，$37=6^2+1^2$ 和 $49=7^2$ 都不是合法的方案，因为该数据中 $m=5$。**\n\n------------\n\n| 测试点编号 | $m\\le$ | $n \\le$ | 分值 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $30$ | $10^4$ | $40$ |\n| $2 \\sim 3$ | $30$ | $10^{18}$ | $15 \\times 2$ |\n| $4 \\sim 9$ | $500$ | $10^{18}$ | $5 \\times 6$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 30$，$1 \\le Q \\le 10^4$，$1 \\le m \\le 500$，$1 \\le n \\le 10^{18}$，单个测试点中所有数据的 $m$ 的和（$\\sum m$）满足 $1 \\le \\sum m \\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R1」完美的平方数", "background": "", "description": "给定一个正整数 $m$。现有 $Q$ 个询问，每个询问给定一个正整数 $n$，要求你从 $1,4,9,16,\\ldots,m^2$ 中取出若干个数（**同一个数可以取出多次**），使它们的和**恰好**为 $n$。问最少取出多少个数？（如果无解，则输出 $-1$）", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n对于每组数据：\n\n第一行，两个正整数 $m,Q$。\n\n下面 $Q$ 行，每行一个正整数 $n$。\n", "outputFormat": "对于每组数据的每个询问，输出一行一个正整数，表示答案。", "hint": "**样例解释：**\n\n对于第一组数据，显然答案是 $n$，因为你只能取 $1$。\n\n对于第二组数据：\n\n- $8=2^2+2^2$；\n- $20=4^2+2^2$；\n- $25=5^2$；\n- $37=5^2+2^2+2^2+2^2$；（或 $37=4^2+4^2+2^2+1^2$）\n- $49=5^2+4^2+2^2+2^2$；（或 $49=4^2+4^2+4^2+1^2$）\n- **请注意，$37=6^2+1^2$ 和 $49=7^2$ 都不是合法的方案，因为该数据中 $m=5$。**\n\n------------\n\n| 测试点编号 | $m\\le$ | $n \\le$ | 分值 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $30$ | $10^4$ | $40$ |\n| $2 \\sim 3$ | $30$ | $10^{18}$ | $15 \\times 2$ |\n| $4 \\sim 9$ | $500$ | $10^{18}$ | $5 \\times 6$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 30$，$1 \\le Q \\le 10^4$，$1 \\le m \\le 500$，$1 \\le n \\le 10^{18}$，单个测试点中所有数据的 $m$ 的和（$\\sum m$）满足 $1 \\le \\sum m \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P8448", "type": "P", "difficulty": 2, "samples": [["2\n16\n9", "1\n0"], ["2\n1327104\n3623878656000", "5\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创"], "title": "[LSOT-1] 暴龙的土豆", "background": "暴龙爱吃土豆。", "description": "给定一个正整数 $n$。\n\n每次操作可以选两个素数 $y,z$，其中要求 $z$ 是奇素数。\n\n令 $x=y^z$，如果 $x$ 能除尽 $n$ 则计为一次有效操作，$n$ 变为 $\\dfrac nx$。\n\n现在需要你回答，对于 $n$ 最多能够进行多少次有效操作。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "对于每组数据，输出答案。", "hint": "【样例解释】\n\n对于样例一：$16$ 可以变成 $2^3 \\times 2$，可以进行一次操作。但是 $9$ 只能变成 $3^2$，所以不能进行操作。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 10^2，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 2(20 pts)：}1 \\le\\ n\\le 10^6，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 3(30 pts)：}1 \\le\\ n\\le 10^{12}，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^{18}$，$1\\le T\\le 10^2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] 暴龙的土豆", "background": "暴龙爱吃土豆。", "description": "给定一个正整数 $n$。\n\n每次操作可以选两个素数 $y,z$，其中要求 $z$ 是奇素数。\n\n令 $x=y^z$，如果 $x$ 能除尽 $n$ 则计为一次有效操作，$n$ 变为 $\\dfrac nx$。\n\n现在需要你回答，对于 $n$ 最多能够进行多少次有效操作。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "对于每组数据，输出答案。", "hint": "【样例解释】\n\n对于样例一：$16$ 可以变成 $2^3 \\times 2$，可以进行一次操作。但是 $9$ 只能变成 $3^2$，所以不能进行操作。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 10^2，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 2(20 pts)：}1 \\le\\ n\\le 10^6，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 3(30 pts)：}1 \\le\\ n\\le 10^{12}，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^{18}$，$1\\le T\\le 10^2$。", "locale": "zh-CN"}}}
{"pid": "P8449", "type": "P", "difficulty": 4, "samples": [["6 4\n4 3 5 7 2 6\n1 1 1 2 2\n2 1 1 3\n3 11\n4 1", "odd\nodd\nodd\nodd"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "[LSOT-1] 逆序对", "background": "逆序对真好玩", "description": "你需要维护一个数列，支持以下 $4$ 种操作：\n\n1. 区间交换；\n2. 把一个区间**向后**移动到第 $k$ 个数字与第 $k+1$ 个数字之间；\n3. 在最后插入一个数 $x$；\n4. 在开头插入一个数 $x$。\n\n每个数数的序号为新序列重新从第一个数到第 $k$ 个数编号为 $1$ 到 $k$。\n\n现在每次操作过后，请你输出整个数列逆序对数量的奇偶性。", "inputFormat": "第一行输入两个正整数 $n,m$，表示初始序列的长度与操作个数。\n\n接下来一行输入 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示初始序列。\n\n接下来 $m$ 行，每行先输入一个 $t$ 表示操作编号，之后：\n- 若 $t=1$，则输入四个正整数 $l_1,r_1,l_2,r_2$，表示将区间 $[l_1,r_1]$ 与区间 $[l_2,r_2]$ 整体交换，保证 $l_1\\le r_1< l_2\\le r_2$；\n- 若 $t=2$，则输入三个正整数 $l,r,k$，表示将区间 $[l,r]$ 移动至序列的第 $k$ 个数与第 $k+1$ 个数之间，保证 $r<k$；\n- 若 $t=3$，则输入一个正整数 $x$，表示将 $x$ 插入到序列末端；\n- 若 $t=4$，则输入一个正整数 $x$，表示将 $x$ 插入到序列首端。", "outputFormat": "对于每一个指令执行后，如果逆序对数量是偶数，请输出 `even` ，否则输出 `odd`。", "hint": "【样例解释】\n\n第一次操作将区间 $[1,1]$ 和区间 $[2,2]$ 交换，序列变为 `3 4 5 7 2 6`。\n\n第二次操作将区间 $[1,1]$ 移动到第 $3$ 和第 $4$ 个数中间。序列变为 `4 5 3 7 2 6`。\n\n第三次操作在序列末端插入 $11$，序列变为 `4 5 3 7 2 6 11`。\n\n第四次操作在序列开头插入 $1$，序列变为 `1 4 5 3 7 2 6 11`。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts): }n,m\\le 10^2$；\n- $\\texttt{Subtask 2(15 pts): }n,m\\le 10^3$；\n- $\\texttt{Subtask 3(20 pts): }$没有一二操作；\n- $\\texttt{Subtask 4(20 pts): }$没有三四操作；\n- $\\texttt{Subtask 5(35 pts): }$无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5,a_i\\le 2\\times10^6$，保证在任意时刻 $a$ 中的数均互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] 逆序对", "background": "逆序对真好玩", "description": "你需要维护一个数列，支持以下 $4$ 种操作：\n\n1. 区间交换；\n2. 把一个区间**向后**移动到第 $k$ 个数字与第 $k+1$ 个数字之间；\n3. 在最后插入一个数 $x$；\n4. 在开头插入一个数 $x$。\n\n每个数数的序号为新序列重新从第一个数到第 $k$ 个数编号为 $1$ 到 $k$。\n\n现在每次操作过后，请你输出整个数列逆序对数量的奇偶性。", "inputFormat": "第一行输入两个正整数 $n,m$，表示初始序列的长度与操作个数。\n\n接下来一行输入 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示初始序列。\n\n接下来 $m$ 行，每行先输入一个 $t$ 表示操作编号，之后：\n- 若 $t=1$，则输入四个正整数 $l_1,r_1,l_2,r_2$，表示将区间 $[l_1,r_1]$ 与区间 $[l_2,r_2]$ 整体交换，保证 $l_1\\le r_1< l_2\\le r_2$；\n- 若 $t=2$，则输入三个正整数 $l,r,k$，表示将区间 $[l,r]$ 移动至序列的第 $k$ 个数与第 $k+1$ 个数之间，保证 $r<k$；\n- 若 $t=3$，则输入一个正整数 $x$，表示将 $x$ 插入到序列末端；\n- 若 $t=4$，则输入一个正整数 $x$，表示将 $x$ 插入到序列首端。", "outputFormat": "对于每一个指令执行后，如果逆序对数量是偶数，请输出 `even` ，否则输出 `odd`。", "hint": "【样例解释】\n\n第一次操作将区间 $[1,1]$ 和区间 $[2,2]$ 交换，序列变为 `3 4 5 7 2 6`。\n\n第二次操作将区间 $[1,1]$ 移动到第 $3$ 和第 $4$ 个数中间。序列变为 `4 5 3 7 2 6`。\n\n第三次操作在序列末端插入 $11$，序列变为 `4 5 3 7 2 6 11`。\n\n第四次操作在序列开头插入 $1$，序列变为 `1 4 5 3 7 2 6 11`。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts): }n,m\\le 10^2$；\n- $\\texttt{Subtask 2(15 pts): }n,m\\le 10^3$；\n- $\\texttt{Subtask 3(20 pts): }$没有一二操作；\n- $\\texttt{Subtask 4(20 pts): }$没有三四操作；\n- $\\texttt{Subtask 5(35 pts): }$无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5,a_i\\le 2\\times10^6$，保证在任意时刻 $a$ 中的数均互不相同。", "locale": "zh-CN"}}}
{"pid": "P8450", "type": "P", "difficulty": 5, "samples": [["1\nNo\n2\nYes", "GetGCD. 0\nTheSame?  0\nGetGCD. 1\n2 1\nTheSame? 1\n2 1\nIFoundTheAnswer! 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "原根", "数论", "交互题", "Special Judge", "O2优化"], "title": "[LSOT-1] 记忆崩塌", "background": "“铃铃铃”，上课铃打响。一阵眩晕，小 H 突然倒在地上。只是隐约间，感受到周围有人赶过来。\n\n“这是哪里？我不是在上课吗？”小 H 望向周围。\n\n“欢迎来到 OI 世界。我负责带你熟悉 OI 世界。”一个奇怪的人走到这里来。\n\n“OI 世界？”\n\n“对。这里没有文化课，你可以在这里尽情学习 OI。”那人解释道。\n\n紧接着，那人将小 H 带到了一个自称是心理学家的人面前。\n\n“你在干什么？”小 H 望着那个心理学家。他正准备把一个奇怪的东西戴到小 H 头上。\n\n“这个可以帮你恢复你在 whk 世界的记忆。”心理学家淡淡地说。\n\n仪器戴到头上后，小 H 大喊：“我什么都想起来了！”\n\n然而，真的什么都想起来了吗……\n\n从那个人带着小H前往OI世界观光开始，这一切，全都乱了……", "description": "**这是一道交互题。**\n\n小 H 失忆了。\n\n现在，小 H 过去的记忆化成了 $n$ 个记忆碎片。医生拥有 $n$ 种长度的取样条（长度为 $1\\dots n$）。记忆碎片会与长度为 $i$ 的取样条发生大小为 $\\gcd(n,i)$ 的情感共鸣。\n\n医生有一个机器，可以测出长度为 $i$ 的取样条与小 H 产生的情感共鸣大小。现在你可以用这个机器测量一定的次数，医生希望你能告诉他若用完 $n$ 种长度的取样条小 H 总共会发生多大的情感共鸣。\n\n### 交互格式\n你可以用以下格式来询问医生你想知道的东西：\n\n`TheSame? m`：下接 $m$ 行，每行两个数 $p_i,k_i$，医生会告诉你数小 H 的记忆碎片数量是否与 $\\displaystyle\\prod_{i=1}^mp_i^{k_i}$ 相等。`Yes` 代表相同或 `No` 代表不同。\n\n`GetGCD. m`：下接 $m$ 行，每行两个数 $p,k$ ，医生会告诉你$\\displaystyle\\prod_{i=1}^mp_i^{k_i}$  与小 H 的记忆碎片产生的情感共鸣大小。\n\n所有询问的 $p_i$ 为素数，$k_i$ 为正整数，不符合上述限制的交互不保证交互库会做出预期行为。\n\n***\n\n你可以用以下格式来告诉医生你知道的东西：\n\n`IFoundTheAnswer! m`：以此来告诉评测器我已经知道了小 H 总共产生的情感共鸣大小为 $m$，并评判是否正确。\n\n***\n\n你一共可以与医生交互 $1050$ 次。交互库的所有输出与你输出的答案均应对 $998244353$ 取模。\n\n***\n\n你需要从**标准输出**中输出，代表你询问的内容。\n\n每一次询问后都应当**清空缓冲区**，不然你会无缘无故 TLE。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入，代表评测机返回的结果。", "inputFormat": "见「交互格式」。\n", "outputFormat": "见「交互格式」。\n", "hint": "【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 500$；\n- $\\texttt{Subtask 2(25 pts)：}1 \\le\\ n\\le 10^6$；\n- $\\texttt{Subtask 3(25 pts)：}$保证 $n$ 的唯一分解形式仅有前 $100$ 个质数；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $n$ 的唯一分解形式质数数量不超过 $1000$，且质因子最大不超过 $7919$（注：$7919$ 为第 $1000$ 个质数），且质数的次数不超过 $10000$。\n\n【其他提示】\n\n因为交互库的效率较低，所以附件中给出交互库的代码。如果你想利用下面的交互库代码进行调试，你可以在官方的 [SPJ 说明](https://www.luogu.com.cn/blog/luogu/special-judge) 中下载 ```testlib.h``` 头文件后将两个程序的输出输入到另一个程序中。当然，你也可以模拟交互库的计算来手动输入到你的程序中。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] 记忆崩塌", "background": "“铃铃铃”，上课铃打响。一阵眩晕，小 H 突然倒在地上。只是隐约间，感受到周围有人赶过来。\n\n“这是哪里？我不是在上课吗？”小 H 望向周围。\n\n“欢迎来到 OI 世界。我负责带你熟悉 OI 世界。”一个奇怪的人走到这里来。\n\n“OI 世界？”\n\n“对。这里没有文化课，你可以在这里尽情学习 OI。”那人解释道。\n\n紧接着，那人将小 H 带到了一个自称是心理学家的人面前。\n\n“你在干什么？”小 H 望着那个心理学家。他正准备把一个奇怪的东西戴到小 H 头上。\n\n“这个可以帮你恢复你在 whk 世界的记忆。”心理学家淡淡地说。\n\n仪器戴到头上后，小 H 大喊：“我什么都想起来了！”\n\n然而，真的什么都想起来了吗……\n\n从那个人带着小H前往OI世界观光开始，这一切，全都乱了……", "description": "**这是一道交互题。**\n\n小 H 失忆了。\n\n现在，小 H 过去的记忆化成了 $n$ 个记忆碎片。医生拥有 $n$ 种长度的取样条（长度为 $1\\dots n$）。记忆碎片会与长度为 $i$ 的取样条发生大小为 $\\gcd(n,i)$ 的情感共鸣。\n\n医生有一个机器，可以测出长度为 $i$ 的取样条与小 H 产生的情感共鸣大小。现在你可以用这个机器测量一定的次数，医生希望你能告诉他若用完 $n$ 种长度的取样条小 H 总共会发生多大的情感共鸣。\n\n### 交互格式\n你可以用以下格式来询问医生你想知道的东西：\n\n`TheSame? m`：下接 $m$ 行，每行两个数 $p_i,k_i$，医生会告诉你数小 H 的记忆碎片数量是否与 $\\displaystyle\\prod_{i=1}^mp_i^{k_i}$ 相等。`Yes` 代表相同或 `No` 代表不同。\n\n`GetGCD. m`：下接 $m$ 行，每行两个数 $p,k$ ，医生会告诉你$\\displaystyle\\prod_{i=1}^mp_i^{k_i}$  与小 H 的记忆碎片产生的情感共鸣大小。\n\n所有询问的 $p_i$ 为素数，$k_i$ 为正整数，不符合上述限制的交互不保证交互库会做出预期行为。\n\n***\n\n你可以用以下格式来告诉医生你知道的东西：\n\n`IFoundTheAnswer! m`：以此来告诉评测器我已经知道了小 H 总共产生的情感共鸣大小为 $m$，并评判是否正确。\n\n***\n\n你一共可以与医生交互 $1050$ 次。交互库的所有输出与你输出的答案均应对 $998244353$ 取模。\n\n***\n\n你需要从**标准输出**中输出，代表你询问的内容。\n\n每一次询问后都应当**清空缓冲区**，不然你会无缘无故 TLE。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入，代表评测机返回的结果。", "inputFormat": "见「交互格式」。\n", "outputFormat": "见「交互格式」。\n", "hint": "【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 500$；\n- $\\texttt{Subtask 2(25 pts)：}1 \\le\\ n\\le 10^6$；\n- $\\texttt{Subtask 3(25 pts)：}$保证 $n$ 的唯一分解形式仅有前 $100$ 个质数；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $n$ 的唯一分解形式质数数量不超过 $1000$，且质因子最大不超过 $7919$（注：$7919$ 为第 $1000$ 个质数），且质数的次数不超过 $10000$。\n\n【其他提示】\n\n因为交互库的效率较低，所以附件中给出交互库的代码。如果你想利用下面的交互库代码进行调试，你可以在官方的 [SPJ 说明](https://www.luogu.com.cn/blog/luogu/special-judge) 中下载 ```testlib.h``` 头文件后将两个程序的输出输入到另一个程序中。当然，你也可以模拟交互库的计算来手动输入到你的程序中。", "locale": "zh-CN"}}}
{"pid": "P8451", "type": "P", "difficulty": 6, "samples": [["5\n1 0 abc\n2 0 abc\n1 2 def\n2 3 defg\n2 1 abcd", "0\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608]}, "tags": ["洛谷原创", "树论", "AC 自动机"], "title": "[LSOT-1] Crosspain", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xcjot9ob.png)", "description": "令 $S_0=\\varnothing$，维护一个数据结构，要求支持以下操作：\n- `1 hoc s`，令 $S_i=S_{hoc}\\cup\\{s\\}$，其中 $s$ 是字符串（保证操作前 $s\\notin S_{hoc}$） .\n- `2 hoc s`，令 $S_i=S_{hoc}$，并查询 $S_i$ 中的所有字符串在给出的字符串 $s$ 中出现的次数之和 .", "inputFormat": "第一行包含一个正整数 $q$，表示询问次数 .\n\n接下来 $q$ 行，每行一个操作，格式见题目描述 .", "outputFormat": "对于每个操作 2，输出一行答案 .", "hint": "### 样例解释\n\n第三行中，询问版本 $0$ 中的串在 `abc` 中出现几次，因为版本 $0$ 为空，所以出现 $0$ 次 .\n\n第五行中，询问版本 $3$ 中的串在 `defg` 中出现几次，因为版本 $3$ 有字符串 `def`，所以出现 $1$ 次 .\n\n第六行中，询问版本 $1$ 中的串在 `abcd` 中出现几次，因为版本 $1$ 有字符串 `abc`，所以出现 $1$ 次 .\n\n### 数据范围及约定\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：} \\displaystyle \\sum|s_i|\\le 1000$；\n- $\\texttt{Subtask 2(20 pts)：}$所有添加的字符串长度相同；\n- $\\texttt{Subtask 3(20 pts)：}$所有添加的字符串只包含一种字符；\n- $\\texttt{Subtask 4(20 pts)：}q\\le 10^3$；\n- $\\texttt{Subtask 5(30 pts)：}$无特殊限制。\n\n对于全部数据，$1\\le q\\le  5\\times10^5$，$\\displaystyle 1\\le \\sum_i|s_i|\\le 10^6$ . 所有字符串仅含小写字母 .", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] Crosspain", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xcjot9ob.png)", "description": "令 $S_0=\\varnothing$，维护一个数据结构，要求支持以下操作：\n- `1 hoc s`，令 $S_i=S_{hoc}\\cup\\{s\\}$，其中 $s$ 是字符串（保证操作前 $s\\notin S_{hoc}$） .\n- `2 hoc s`，令 $S_i=S_{hoc}$，并查询 $S_i$ 中的所有字符串在给出的字符串 $s$ 中出现的次数之和 .", "inputFormat": "第一行包含一个正整数 $q$，表示询问次数 .\n\n接下来 $q$ 行，每行一个操作，格式见题目描述 .", "outputFormat": "对于每个操作 2，输出一行答案 .", "hint": "### 样例解释\n\n第三行中，询问版本 $0$ 中的串在 `abc` 中出现几次，因为版本 $0$ 为空，所以出现 $0$ 次 .\n\n第五行中，询问版本 $3$ 中的串在 `defg` 中出现几次，因为版本 $3$ 有字符串 `def`，所以出现 $1$ 次 .\n\n第六行中，询问版本 $1$ 中的串在 `abcd` 中出现几次，因为版本 $1$ 有字符串 `abc`，所以出现 $1$ 次 .\n\n### 数据范围及约定\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：} \\displaystyle \\sum|s_i|\\le 1000$；\n- $\\texttt{Subtask 2(20 pts)：}$所有添加的字符串长度相同；\n- $\\texttt{Subtask 3(20 pts)：}$所有添加的字符串只包含一种字符；\n- $\\texttt{Subtask 4(20 pts)：}q\\le 10^3$；\n- $\\texttt{Subtask 5(30 pts)：}$无特殊限制。\n\n对于全部数据，$1\\le q\\le  5\\times10^5$，$\\displaystyle 1\\le \\sum_i|s_i|\\le 10^6$ . 所有字符串仅含小写字母 .", "locale": "zh-CN"}}}
{"pid": "P8452", "type": "P", "difficulty": 4, "samples": [["0\n4\n3 3\n2 4\n15 57\n1064 822", "5 11.313708499\n6 6.324555320\n623 10206.135788972\n655956 222400384.677931725\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「SWTR-8」15B03", "background": "15B03 获得了 ION2064 的承办权。", "description": "15B03 的座位非常拥挤，可以看成一张 $n\\times m$ 的网格，每个小正方形 $(i, j)$ 代表一张桌子。\n\n根据规定，考场上任何两张桌子不得相邻。这里相邻指含有 **公共点**。严格定义两张桌子 $(i, j)$ 和 $(i', j')$ 相邻当且仅当 $|i - i'|\\leq 1$ 且 $|j - j'|\\leq 1$。\n\n布置考场的任务落在小 A 头上，他希望撤去最少的桌子满足上述要求。\n\n小 A 认为这样太简单了，因此他添加了限制：在保证撤去桌子最少的前提下，最大化剩余每张桌子到距离它最远的桌子的距离之和。这里距离指 **欧几里得** 距离：桌子 $(a, b)$ 和 $(c, d)$ 的距离为 $\\sqrt{(a - c) ^ 2 + (b - d) ^ 2}$。\n\n平行时空中 15B03 的规模不尽相同：多组测试数据。\n\n**请选手认真阅读本题的评分方式。**", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 一行两个整数 $n, m$。", "outputFormat": "对于每组测试数据：\n\n- 输出一个整数和一个实数，由空格隔开。分别表示最少撤去的桌子数量以及每张桌子到距离它最远的桌子的距离之和的最大值。\n\n实数比较按绝对误差或相对误差不超过 $10 ^ {-9}$：令你输出的答案为 $a$，标准答案为 $b$，你的答案被判为正确当且仅当 $\\frac{|a - b|}{\\max(1, |b|)} \\leq 10 ^ {-9}$。", "hint": "**「样例解释」**\n\n对于第一组询问，选择 $(1, 1), (1, 3), (3, 1)$ 和 $(3, 3)$ 最优。撤去了 $3\\times 3 - 4 = 5$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{2 ^ 2 + 2 ^ 2} = 2\\sqrt 2$，因此第二问答案为 $8\\sqrt 2$。如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y8fi4qhr.png)\n\n对于第二组询问，选择 $(1, 1)$ 和 $(2, 4)$ 最优。撤去了 $2\\times 4 - 2 = 6$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{1 ^ 2 + 3 ^ 2} = \\sqrt {10}$，因此第二问答案为 $2\\sqrt {10}$。\n\n如果选择 $(1, 1)$ 和 $(2, 3)$，则第二问答案为 $2\\sqrt 5$，不优。\n\n**「评分方式」**\n\n对于每组测试数据：\n\n- 若你第一问的答案错误，得 0 分。\n- 否则，若你第二问的答案错误，得 0.8 分。\n- 否则，得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，**若你输出的格式错误，得 0 分**。因此，如果你只希望获得第一问的分数，请在第二问输出任意合理范围内的实数。\n\n**「数据范围与约定」**\n\n- 测试点 #1（15 points）：$n, m$ 均为奇数。\n- 测试点 #2（20 points）：$n = 1$。\n- 测试点 #3（25 points）：$n = 2$。\n- 测试点 #4（30 points）：$n$ 为奇数。\n- 测试点 #5（10 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 57$。\n- $1\\leq n, m\\leq 1064$。\n\n**「帮助与提示」**\n\n- 你可以使用 `cmath` 中的 `sqrt(x)` 函数计算 $x$ 的平方根。它返回 `double` 类型的值。`sqrtl(x)` 精度更高，它返回 `long double` 类型的值。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) A\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」15B03", "background": "15B03 获得了 ION2064 的承办权。", "description": "15B03 的座位非常拥挤，可以看成一张 $n\\times m$ 的网格，每个小正方形 $(i, j)$ 代表一张桌子。\n\n根据规定，考场上任何两张桌子不得相邻。这里相邻指含有 **公共点**。严格定义两张桌子 $(i, j)$ 和 $(i', j')$ 相邻当且仅当 $|i - i'|\\leq 1$ 且 $|j - j'|\\leq 1$。\n\n布置考场的任务落在小 A 头上，他希望撤去最少的桌子满足上述要求。\n\n小 A 认为这样太简单了，因此他添加了限制：在保证撤去桌子最少的前提下，最大化剩余每张桌子到距离它最远的桌子的距离之和。这里距离指 **欧几里得** 距离：桌子 $(a, b)$ 和 $(c, d)$ 的距离为 $\\sqrt{(a - c) ^ 2 + (b - d) ^ 2}$。\n\n平行时空中 15B03 的规模不尽相同：多组测试数据。\n\n**请选手认真阅读本题的评分方式。**", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 一行两个整数 $n, m$。", "outputFormat": "对于每组测试数据：\n\n- 输出一个整数和一个实数，由空格隔开。分别表示最少撤去的桌子数量以及每张桌子到距离它最远的桌子的距离之和的最大值。\n\n实数比较按绝对误差或相对误差不超过 $10 ^ {-9}$：令你输出的答案为 $a$，标准答案为 $b$，你的答案被判为正确当且仅当 $\\frac{|a - b|}{\\max(1, |b|)} \\leq 10 ^ {-9}$。", "hint": "**「样例解释」**\n\n对于第一组询问，选择 $(1, 1), (1, 3), (3, 1)$ 和 $(3, 3)$ 最优。撤去了 $3\\times 3 - 4 = 5$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{2 ^ 2 + 2 ^ 2} = 2\\sqrt 2$，因此第二问答案为 $8\\sqrt 2$。如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y8fi4qhr.png)\n\n对于第二组询问，选择 $(1, 1)$ 和 $(2, 4)$ 最优。撤去了 $2\\times 4 - 2 = 6$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{1 ^ 2 + 3 ^ 2} = \\sqrt {10}$，因此第二问答案为 $2\\sqrt {10}$。\n\n如果选择 $(1, 1)$ 和 $(2, 3)$，则第二问答案为 $2\\sqrt 5$，不优。\n\n**「评分方式」**\n\n对于每组测试数据：\n\n- 若你第一问的答案错误，得 0 分。\n- 否则，若你第二问的答案错误，得 0.8 分。\n- 否则，得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，**若你输出的格式错误，得 0 分**。因此，如果你只希望获得第一问的分数，请在第二问输出任意合理范围内的实数。\n\n**「数据范围与约定」**\n\n- 测试点 #1（15 points）：$n, m$ 均为奇数。\n- 测试点 #2（20 points）：$n = 1$。\n- 测试点 #3（25 points）：$n = 2$。\n- 测试点 #4（30 points）：$n$ 为奇数。\n- 测试点 #5（10 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 57$。\n- $1\\leq n, m\\leq 1064$。\n\n**「帮助与提示」**\n\n- 你可以使用 `cmath` 中的 `sqrt(x)` 函数计算 $x$ 的平方根。它返回 `double` 类型的值。`sqrtl(x)` 精度更高，它返回 `long double` 类型的值。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) A\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P8453", "type": "P", "difficulty": 4, "samples": [["0\n4\n4 0 3\n1 0 6 4\n8 5 2\n1 5 5 7 1 5 5 7\n1 0 0\n15\n4 3 0\n65535 65535 57 57\n", "1010011\n|||\n10100000\n^|^^^^|\n1000000000000000\n\n0\n^^^\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "位运算", "构造", "洛谷月赛"], "title": "「SWTR-8」美元巨大", "background": "#### 输出不允许有前导零。\n\n原题目名称为「美元巨大二的二的二的二的二」。\n\n小 A 喜欢用形如\n$$\n\\Huge 2 ^ {2 ^ {2 ^ {2 ^ {2}}}}\n$$\n的幂塔把小 T 的博客炸掉。", "description": "小 A 有 $n$ 个 $2$ 的幂 $a_1, a_2, \\cdots, a_n$。他要在这些数之间插入 $x$ 个异或运算符和 $y$ 个或运算符，组成一个表达式。保证 $x + y = n - 1$。\n\n表达式越大，越有可能炸掉小 T 的博客。小 A 希望 **从左往右** 计算表达式时它的值最大。他想知道表达式最大可能的取值是多少，用二进制表示。他还希望你构造出这样的表达式，因为他懒得自己构造了。\n\n若存在多组构造方案，输出任意一组。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行三个整数 $n, x, y$。\n- 第二行 $n$ 个整数 $b_i$，表示 $a_i = 2 ^ {b_i}$。", "outputFormat": "对于每组测试数据：\n\n- 第一行输出一个二进制数表示答案。**不允许有前导零**，除非答案为 $0$。\n- 第二行输出一个长为 $n - 1$ 的由 `^` 和 `|` 组成的字符串，其中 $s_i = \\texttt{\\,\\,\\^{}\\,\\,}$ 表示 $a_i$ 与 $a_{i + 1}$ 之间的运算符为异或，$s_i = \\texttt |$ 表示该运算符为或。你需要保证 `^` 的个数为 $x$，`|` 的个数为 $y$。", "hint": "**「评分方式」**\n\n对于每组测试数据：\n\n- 若你输出的第一行比标准答案劣，得 0 分。\n- 若你输出的第一行比标准答案优，则 checker 将检查你的构造方案是否正确。若正确，则返回 `_fail`，表现为测试点 UKE；否则得 0 分。\n- 否则，你输出的第一行和标准答案一样。若构造方案不正确，得 0.6 分；否则得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，checker 能检测出你的答案比标准答案优的前提是输出完全符合格式。**一旦输出不符合格式，得 0 分**。格式限制包括但不限于：\n\n- 第一行不得输出除 `0` 和 `1` 以外的字符。\n- 第二行不得输出除 `^` 和 `|` 以外的字符，且字符串长度恰为 $n - 1$。\n- `^` 的个数恰为 $x$，`|` 的个数恰为 $y$。\n\n**「数据范围与约定」**\n\n- 测试点 #1（10 points）：所有 $b_i$ 互不相等。\n- 测试点 #2（20 points）：所有 $b_i$ 相等。\n- 测试点 #3（30 points）：$n \\leq 8$。\n- 测试点 #4（25 points）：$n \\leq 10 ^ 3$。\n- 测试点 #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 20$。\n- $1 \\leq n \\leq 2.5 \\times 10 ^ 4$。\n- $0 \\leq x, y < n$，$x + y = n - 1$。\n- $1\\leq a_i < 2 ^ {2 ^ {2 ^ {2 ^ 2}}}$，即 $0\\leq b_i < 65536$。\n\n**「帮助与提示」**\n\n- 关于 [位运算](https://oi-wiki.org/math/bit/)。\n- 请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) B\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」美元巨大", "background": "#### 输出不允许有前导零。\n\n原题目名称为「美元巨大二的二的二的二的二」。\n\n小 A 喜欢用形如\n$$\n\\Huge 2 ^ {2 ^ {2 ^ {2 ^ {2}}}}\n$$\n的幂塔把小 T 的博客炸掉。", "description": "小 A 有 $n$ 个 $2$ 的幂 $a_1, a_2, \\cdots, a_n$。他要在这些数之间插入 $x$ 个异或运算符和 $y$ 个或运算符，组成一个表达式。保证 $x + y = n - 1$。\n\n表达式越大，越有可能炸掉小 T 的博客。小 A 希望 **从左往右** 计算表达式时它的值最大。他想知道表达式最大可能的取值是多少，用二进制表示。他还希望你构造出这样的表达式，因为他懒得自己构造了。\n\n若存在多组构造方案，输出任意一组。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行三个整数 $n, x, y$。\n- 第二行 $n$ 个整数 $b_i$，表示 $a_i = 2 ^ {b_i}$。", "outputFormat": "对于每组测试数据：\n\n- 第一行输出一个二进制数表示答案。**不允许有前导零**，除非答案为 $0$。\n- 第二行输出一个长为 $n - 1$ 的由 `^` 和 `|` 组成的字符串，其中 $s_i = \\texttt{\\,\\,\\^{}\\,\\,}$ 表示 $a_i$ 与 $a_{i + 1}$ 之间的运算符为异或，$s_i = \\texttt |$ 表示该运算符为或。你需要保证 `^` 的个数为 $x$，`|` 的个数为 $y$。", "hint": "**「评分方式」**\n\n对于每组测试数据：\n\n- 若你输出的第一行比标准答案劣，得 0 分。\n- 若你输出的第一行比标准答案优，则 checker 将检查你的构造方案是否正确。若正确，则返回 `_fail`，表现为测试点 UKE；否则得 0 分。\n- 否则，你输出的第一行和标准答案一样。若构造方案不正确，得 0.6 分；否则得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，checker 能检测出你的答案比标准答案优的前提是输出完全符合格式。**一旦输出不符合格式，得 0 分**。格式限制包括但不限于：\n\n- 第一行不得输出除 `0` 和 `1` 以外的字符。\n- 第二行不得输出除 `^` 和 `|` 以外的字符，且字符串长度恰为 $n - 1$。\n- `^` 的个数恰为 $x$，`|` 的个数恰为 $y$。\n\n**「数据范围与约定」**\n\n- 测试点 #1（10 points）：所有 $b_i$ 互不相等。\n- 测试点 #2（20 points）：所有 $b_i$ 相等。\n- 测试点 #3（30 points）：$n \\leq 8$。\n- 测试点 #4（25 points）：$n \\leq 10 ^ 3$。\n- 测试点 #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 20$。\n- $1 \\leq n \\leq 2.5 \\times 10 ^ 4$。\n- $0 \\leq x, y < n$，$x + y = n - 1$。\n- $1\\leq a_i < 2 ^ {2 ^ {2 ^ {2 ^ 2}}}$，即 $0\\leq b_i < 65536$。\n\n**「帮助与提示」**\n\n- 关于 [位运算](https://oi-wiki.org/math/bit/)。\n- 请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) B\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P8454", "type": "P", "difficulty": 5, "samples": [["0\n7 7 1 2 3 2 -3\n1 0 6 4 8 2 2\n1 1 1\n4\n3\n1 2 0\n3 4\n\n1 2 0\n2 4\n\n2 1064\n1 1 0\n1\n\n2 5\n1 2 2\n2 7\n4 6", "1\n2\n4\n-3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SWTR-8」补题计划", "background": "因为写博客，小 A 欠下了很多题没有补。", "description": "小 A 一共有 $n$ 道题目没有补。评估后，他认为第 $i$ 题的难度为 $x_i$。\n\n同时，他对自己的水平有评估值 $w$。他的水平会波动，因此 $w$ 会改变。\n\n小 A 认为补难度和自己水平相近的题目（相差不超过 $b_1$）能带来收益 $inc$；相反，如果相差过大（相差超过 $b_2$）则浪费了时间，导致负收益 $dec$。因此，补第 $i$ 道题的收益为\n\n$$\n\\begin{cases}\ninc & |x_i - w| \\leq b_1 \\\\\n0 & b_1 < |x_i - w| \\leq b_2 \\\\\ndec & |x_i - w| > b_2 \\\\\n\\end{cases}\n$$\n\n保证 $b_1 \\leq b_2$ 且 $dec < 0 < inc$。\n\n此外，小 A 有一些喜欢和讨厌的题。如果他没有补任何喜欢的题，或补了任何讨厌的题，就会不高兴。\n\n小 A 将选择一段编号连续的题目进行补题。他希望补每道题的收益之和最大，并且补完题目后不会不高兴。请你告诉他这个最大值。\n\n**任意询问之间独立**。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行七个整数 $n, q, w, b_1, b_2, inc, dec$，其中 $q$ 表示事件数量。\n\n第三行 $n$ 个整数 $x_1, x_2, \\cdots, x_n$。\n\n接下来若干行，每一行或三行表示一次事件：\n\n- 首先一个整数 $op\\in \\{1, 2\\}$。\n- 若 $op = 1$，则接下来两个整数 $l, h$，表示喜欢的题目数量和讨厌的题目数量；接下来一行 $l$ 个整数 $il_1, il_2, \\cdots, il_l$，表示喜欢的题目编号；接下来一行 $h$ 个整数 $ih_1, ih_2, \\cdots, ih_h$，表示讨厌的题目编号。保证任意 $il_i \\neq ih_j$。\n- 若 $op = 2$，则接下来一个整数 $w$，表示新的水平评估值。", "outputFormat": "对于每次 $op = 1$ 的事件，输出一行一个整数表示答案。", "hint": "**「样例解释」**\n\n$w = 1$ 时，每道题目的收益分别为 $2, 2, -3, 0, -3, 2, 2$。\n\n第一次询问必须要补第 $4$ 题，不能补第 $3$ 题，最优方案为 $[4, 7]$，收益为 $1$。\n\n第二次询问必须要补第 $3$ 题或第 $4$ 题，最优方案为 $[1, 7]$，收益为 $2$。\n\n第三次询问必须要补第 $2$ 题或第 $4$ 题，最优方案为 $[1, 2]$，收益为 $4$。\n\n$w = 1064$ 时，所有题目的收益均为 $-3$。\n\n第四次询问必须要补第 $1$ 题，最优方案为 $[1, 1]$，收益为 $-3$。\n\n$w = 5$ 时，每道题目的收益分别为 $-3, -3, 2, 2, 0, 0, 0$。\n\n第五次询问必须要补第 $2$ 题或第 $7$ 题，不能补第 $4$ 题和第 $6$ 题，最优方案为 $[7, 7]$，收益为 $0$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（7 points）：$n, q\\leq 100$。\n- Subtask #2（12 points）：$n, q\\leq 500$。依赖 Subtask #1。\n- Subtask #3（20 points）：$n, q\\leq 4 \\times 10 ^ 3$。依赖 Subtask #2。\n- Subtask #4（25 points）：$w, x_i \\leq 100$。\n- Subtask #5（11 points）：$l = 1$，$h = 0$。\n- Subtask #6（15 points）：$w, x_i \\leq 10 ^ 5$。依赖 Subtask #4。\n- Subtask #7（10 points）：无特殊限制。依赖 Subtask #3，#5，#6。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, q \\leq 10 ^ 5$。\n- $0\\leq w, x_i \\leq 10 ^ 9$，$0\\leq b_1 \\leq b_2$ 且 $b_2$ 不大于 $w, x_i$ 上界的一半。\n- $-10 ^ 4 \\leq dec < 0 < inc \\leq 10 ^ 4$。\n- $1\\leq l, il_i, ih_j \\leq n$，$0 \\leq h < n$，$l + h\\leq 5$。\n- 保证 $il$，$ih$ 递增，且一组询问每个下标至多出现一次。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) C\n- Idea & Solution：[tzc_wk](https://www.luogu.com.cn/user/115194)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294) & [chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"en": {"title": "\"SWTR-8\" Make-up Problem Plan", "background": "Because he writes a blog, Little A has left many problems unsolved and has not made them up yet.", "description": "Little A has a total of $n$ problems that he has not made up. After evaluation, he thinks the difficulty of problem $i$ is $x_i$.\n\nAt the same time, he has an evaluation value $w$ for his own level. His level may fluctuate, so $w$ will change.\n\nLittle A believes that making up problems whose difficulty is close to his level (difference no more than $b_1$) brings a benefit $inc$; on the contrary, if the difference is too large (difference greater than $b_2$), it wastes time and causes a negative benefit $dec$. Therefore, the benefit of making up problem $i$ is\n\n$$\n\\begin{cases}\ninc & |x_i - w| \\leq b_1 \\\\\n0 & b_1 < |x_i - w| \\leq b_2 \\\\\ndec & |x_i - w| > b_2 \\\\\n\\end{cases}\n$$\n\nIt is guaranteed that $b_1 \\leq b_2$ and $dec < 0 < inc$.\n\nIn addition, Little A has some problems he likes and dislikes. If he does not make up any liked problem, or if he makes up any disliked problem, he will be unhappy.\n\nLittle A will choose a consecutive segment of problems (by index) to make up. He wants to maximize the sum of benefits of all chosen problems, and he must not be unhappy after finishing. Please tell him this maximum value.\n\n**All queries are independent of each other**.", "inputFormat": "The first line contains an integer $S$, indicating the Subtask number of this test point.\n\nThe second line contains seven integers $n, q, w, b_1, b_2, inc, dec$, where $q$ is the number of events.\n\nThe third line contains $n$ integers $x_1, x_2, \\cdots, x_n$.\n\nThe following lines describe events. Each event takes either one line or three lines:\n\n- First an integer $op\\in \\{1, 2\\}$.\n- If $op = 1$, then the next two integers $l, h$ represent the number of liked problems and disliked problems; the next line contains $l$ integers $il_1, il_2, \\cdots, il_l$, the indices of liked problems; the next line contains $h$ integers $ih_1, ih_2, \\cdots, ih_h$, the indices of disliked problems. It is guaranteed that any $il_i \\neq ih_j$.\n- If $op = 2$, then the next integer $w$ is the new level evaluation value.", "outputFormat": "For each event with $op = 1$, output one line with one integer, the answer.", "hint": "**\"Sample Explanation\"**\n\nWhen $w = 1$, the benefits of each problem are $2, 2, -3, 0, -3, 2, 2$.\n\nIn the first query, you must make up problem $4$, and you must not make up problem $3$. The optimal choice is $[4, 7]$, with benefit $1$.\n\nIn the second query, you must make up problem $3$ or problem $4$. The optimal choice is $[1, 7]$, with benefit $2$.\n\nIn the third query, you must make up problem $2$ or problem $4$. The optimal choice is $[1, 2]$, with benefit $4$.\n\nWhen $w = 1064$, the benefit of every problem is $-3$.\n\nIn the fourth query, you must make up problem $1$. The optimal choice is $[1, 1]$, with benefit $-3$.\n\nWhen $w = 5$, the benefits of each problem are $-3, -3, 2, 2, 0, 0, 0$.\n\nIn the fifth query, you must make up problem $2$ or problem $7$, and you must not make up problems $4$ and $6$. The optimal choice is $[7, 7]$, with benefit $0$.\n\n**\"Constraints and Notes\"**\n\n**This problem uses bundled tests**.\n\n- Subtask #1 (7 points): $n, q\\leq 100$.\n- Subtask #2 (12 points): $n, q\\leq 500$. Depends on Subtask #1.\n- Subtask #3 (20 points): $n, q\\leq 4 \\times 10 ^ 3$. Depends on Subtask #2.\n- Subtask #4 (25 points): $w, x_i \\leq 100$.\n- Subtask #5 (11 points): $l = 1$, $h = 0$.\n- Subtask #6 (15 points): $w, x_i \\leq 10 ^ 5$. Depends on Subtask #4.\n- Subtask #7 (10 points): no special constraints. Depends on Subtask #3, #5, #6.\n\nFor $100\\%$ of the data:\n\n- $1\\leq n, q \\leq 10 ^ 5$.\n- $0\\leq w, x_i \\leq 10 ^ 9$, $0\\leq b_1 \\leq b_2$, and $b_2$ is no more than half of the upper bound of $w, x_i$.\n- $-10 ^ 4 \\leq dec < 0 < inc \\leq 10 ^ 4$.\n- $1\\leq l, il_i, ih_j \\leq n$, $0 \\leq h < n$, $l + h\\leq 5$.\n- It is guaranteed that $il$ and $ih$ are increasing, and within one query each index appears at most once.\n\n**\"Help and Tips\"**\n\nPlease pay attention to I/O optimization.\n\n**\"Problem Source\"**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) C\n- Idea & Solution: [tzc_wk](https://www.luogu.com.cn/user/115194).\n- Tester: [Alex_Wei](https://www.luogu.com.cn/user/123294) & [chenxia25](https://www.luogu.com.cn/user/138400)。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "「SWTR-8」补题计划", "background": "因为写博客，小 A 欠下了很多题没有补。", "description": "小 A 一共有 $n$ 道题目没有补。评估后，他认为第 $i$ 题的难度为 $x_i$。\n\n同时，他对自己的水平有评估值 $w$。他的水平会波动，因此 $w$ 会改变。\n\n小 A 认为补难度和自己水平相近的题目（相差不超过 $b_1$）能带来收益 $inc$；相反，如果相差过大（相差超过 $b_2$）则浪费了时间，导致负收益 $dec$。因此，补第 $i$ 道题的收益为\n\n$$\n\\begin{cases}\ninc & |x_i - w| \\leq b_1 \\\\\n0 & b_1 < |x_i - w| \\leq b_2 \\\\\ndec & |x_i - w| > b_2 \\\\\n\\end{cases}\n$$\n\n保证 $b_1 \\leq b_2$ 且 $dec < 0 < inc$。\n\n此外，小 A 有一些喜欢和讨厌的题。如果他没有补任何喜欢的题，或补了任何讨厌的题，就会不高兴。\n\n小 A 将选择一段编号连续的题目进行补题。他希望补每道题的收益之和最大，并且补完题目后不会不高兴。请你告诉他这个最大值。\n\n**任意询问之间独立**。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行七个整数 $n, q, w, b_1, b_2, inc, dec$，其中 $q$ 表示事件数量。\n\n第三行 $n$ 个整数 $x_1, x_2, \\cdots, x_n$。\n\n接下来若干行，每一行或三行表示一次事件：\n\n- 首先一个整数 $op\\in \\{1, 2\\}$。\n- 若 $op = 1$，则接下来两个整数 $l, h$，表示喜欢的题目数量和讨厌的题目数量；接下来一行 $l$ 个整数 $il_1, il_2, \\cdots, il_l$，表示喜欢的题目编号；接下来一行 $h$ 个整数 $ih_1, ih_2, \\cdots, ih_h$，表示讨厌的题目编号。保证任意 $il_i \\neq ih_j$。\n- 若 $op = 2$，则接下来一个整数 $w$，表示新的水平评估值。", "outputFormat": "对于每次 $op = 1$ 的事件，输出一行一个整数表示答案。", "hint": "**「样例解释」**\n\n$w = 1$ 时，每道题目的收益分别为 $2, 2, -3, 0, -3, 2, 2$。\n\n第一次询问必须要补第 $4$ 题，不能补第 $3$ 题，最优方案为 $[4, 7]$，收益为 $1$。\n\n第二次询问必须要补第 $3$ 题或第 $4$ 题，最优方案为 $[1, 7]$，收益为 $2$。\n\n第三次询问必须要补第 $2$ 题或第 $4$ 题，最优方案为 $[1, 2]$，收益为 $4$。\n\n$w = 1064$ 时，所有题目的收益均为 $-3$。\n\n第四次询问必须要补第 $1$ 题，最优方案为 $[1, 1]$，收益为 $-3$。\n\n$w = 5$ 时，每道题目的收益分别为 $-3, -3, 2, 2, 0, 0, 0$。\n\n第五次询问必须要补第 $2$ 题或第 $7$ 题，不能补第 $4$ 题和第 $6$ 题，最优方案为 $[7, 7]$，收益为 $0$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（7 points）：$n, q\\leq 100$。\n- Subtask #2（12 points）：$n, q\\leq 500$。依赖 Subtask #1。\n- Subtask #3（20 points）：$n, q\\leq 4 \\times 10 ^ 3$。依赖 Subtask #2。\n- Subtask #4（25 points）：$w, x_i \\leq 100$。\n- Subtask #5（11 points）：$l = 1$，$h = 0$。\n- Subtask #6（15 points）：$w, x_i \\leq 10 ^ 5$。依赖 Subtask #4。\n- Subtask #7（10 points）：无特殊限制。依赖 Subtask #3，#5，#6。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, q \\leq 10 ^ 5$。\n- $0\\leq w, x_i \\leq 10 ^ 9$，$0\\leq b_1 \\leq b_2$ 且 $b_2$ 不大于 $w, x_i$ 上界的一半。\n- $-10 ^ 4 \\leq dec < 0 < inc \\leq 10 ^ 4$。\n- $1\\leq l, il_i, ih_j \\leq n$，$0 \\leq h < n$，$l + h\\leq 5$。\n- 保证 $il$，$ih$ 递增，且一组询问每个下标至多出现一次。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) C\n- Idea & Solution：[tzc_wk](https://www.luogu.com.cn/user/115194)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294) & [chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P8455", "type": "P", "difficulty": 6, "samples": [["0\n1 2\n.*", "4"], ["0\n2 3\n..*\n...", "20"], ["0\n4 4\n..*.\n.*..\n*...\n....", "2112"], ["0\n7 6\n..*...\n......\n*...**\n......\n..*...\n......\n......", "5041530"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SWTR-8」扫雷计数", "background": "2020 年 6 月的某一天，小 A 在等待网络加载的过程中打开了扫雷，从此便一发不可收拾。\n\n小 A 是一个任何事都喜欢做到极致的人，玩游戏也不例外：他不惜花费大量时间不断尝试打破记录。一个个夜晚就在熟练的 `Alt + G + N` 中过去了。\n\n> “这把有戏，前五十个雷只用了不到四十五秒”。他心里想着，紧握鼠标的手微微颤抖。\n>\n> “快，快，快 …… 还有最后二十个雷 ……”。\n>\n> 游戏的关键时刻，他难以按捺激动的心情。直到他遇到了二选一。\n>\n> 他愣了一下，随后迅速按下最后两块空地当中的一个。\n> \n> 一束横贯屏幕的白色激光缓缓扫过，他知道自己打破了记录 …… [整整十二秒](https://cdn.luogu.com.cn/upload/image_hosting/1seixkiz.png)！巨大的惊喜让他跳了起来。\n>\n> 2020.6.19", "description": "以下是简化后的扫雷游戏规则：\n\n- 定义连通为 **八连通**。\n- 如果打开雷，所有雷 **全部同时爆炸**，游戏结束。\n- 如果打开空地，若其周围没有雷，则递归打开周围八个方块。\n- [如图](https://cdn.luogu.com.cn/upload/image_hosting/kjjqs2v1.png)，点开任意红色框内方块均形成当前局面。\n\n\n给定一张 $n\\times m$ 的初始地图。小 A 决定搜出所有可能的局面，并找到最优鼠标点击顺序，从而速通这张地图。\n\n为设置合适的数组大小，小 A 需要知道有多少种不同局面。对 $998244353$ 取模。\n\n- 如果方块是雷，它有爆炸和未爆炸两种状态；如果方块是空地，它有打开和未打开两种状态。\n- 两个局面不同，当且仅当存在方块状态不同。\n- 保证周围无雷的空地形成不超过 $37$ 个连通块。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串描述地图，其中 $\\texttt{.}$ 表示方块无雷，$\\texttt{*}$ 表示方块有雷。", "outputFormat": "一行一个整数表示答案。", "hint": "**「样例解释」**\n\n用 `.` 表示未打开的方块，`+` 表示打开的方块，`*` 表示未爆炸的雷，`!` 表示爆炸的雷。\n\n样例 1 的所有 4 种局面为 `.*   +*   .!   +!`。\n\n样例 2 的所有 20 种局面为\n```plain\n0\n..*\n...\n   \n1\n++*  .+*  ..!  ..*  ..*\n++.  ...  ...  .+.  ..+  \n   \n2\n++!  ++*  .+!  .+*  .+*  ..!  ..!  ..*\n++.  +++  ...  .+.  ..+  .+.  ..+  .++\n   \n3\n++!  .+!  .+!  .+*  ..!\n+++  .+.  ..+  .++  .++\n   \n4\n.+!\n.++\n```\n\n数字描述了最少点击次数。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n设周围无雷的空地形成 $d$ 个连通块。\n\n- Subtask #1（15 points）：$nm\\leq 21$。\n- Subtask #2（4 points）：地图中只有一个雷。\n- Subtask #3（5 points）：$d = 0$。\n- Subtask #4（6 points）：$d = 1$。\n- Subtask #5（7 points）：$d = 2$。\n- Subtask #6（8 points）：$d \\leq 17$。依赖 Subtask #1，#2，#3，#4，#5。\n- Subtask #7（9 points）：$d \\leq 23$。依赖 Subtask #6。\n- Subtask #8（16 points）：$d\\leq 27$。依赖 Subtask #7。\n- Subtask #9（17 points）：$d\\leq 33$。依赖 Subtask #8。\n- Subtask #10（13 points）：无特殊限制。依赖 Subtask #9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, m\\leq 500$。\n- $0\\leq d\\leq 37$。\n- **不保证** 地图中有雷或空地。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) D\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400) & [asmend](https://www.luogu.com.cn/user/21658)。\n\n感谢 [Elegia](https://www.luogu.com.cn/user/21423) 对本题做出的贡献。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」扫雷计数", "background": "2020 年 6 月的某一天，小 A 在等待网络加载的过程中打开了扫雷，从此便一发不可收拾。\n\n小 A 是一个任何事都喜欢做到极致的人，玩游戏也不例外：他不惜花费大量时间不断尝试打破记录。一个个夜晚就在熟练的 `Alt + G + N` 中过去了。\n\n> “这把有戏，前五十个雷只用了不到四十五秒”。他心里想着，紧握鼠标的手微微颤抖。\n>\n> “快，快，快 …… 还有最后二十个雷 ……”。\n>\n> 游戏的关键时刻，他难以按捺激动的心情。直到他遇到了二选一。\n>\n> 他愣了一下，随后迅速按下最后两块空地当中的一个。\n> \n> 一束横贯屏幕的白色激光缓缓扫过，他知道自己打破了记录 …… [整整十二秒](https://cdn.luogu.com.cn/upload/image_hosting/1seixkiz.png)！巨大的惊喜让他跳了起来。\n>\n> 2020.6.19", "description": "以下是简化后的扫雷游戏规则：\n\n- 定义连通为 **八连通**。\n- 如果打开雷，所有雷 **全部同时爆炸**，游戏结束。\n- 如果打开空地，若其周围没有雷，则递归打开周围八个方块。\n- [如图](https://cdn.luogu.com.cn/upload/image_hosting/kjjqs2v1.png)，点开任意红色框内方块均形成当前局面。\n\n\n给定一张 $n\\times m$ 的初始地图。小 A 决定搜出所有可能的局面，并找到最优鼠标点击顺序，从而速通这张地图。\n\n为设置合适的数组大小，小 A 需要知道有多少种不同局面。对 $998244353$ 取模。\n\n- 如果方块是雷，它有爆炸和未爆炸两种状态；如果方块是空地，它有打开和未打开两种状态。\n- 两个局面不同，当且仅当存在方块状态不同。\n- 保证周围无雷的空地形成不超过 $37$ 个连通块。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串描述地图，其中 $\\texttt{.}$ 表示方块无雷，$\\texttt{*}$ 表示方块有雷。", "outputFormat": "一行一个整数表示答案。", "hint": "**「样例解释」**\n\n用 `.` 表示未打开的方块，`+` 表示打开的方块，`*` 表示未爆炸的雷，`!` 表示爆炸的雷。\n\n样例 1 的所有 4 种局面为 `.*   +*   .!   +!`。\n\n样例 2 的所有 20 种局面为\n```plain\n0\n..*\n...\n   \n1\n++*  .+*  ..!  ..*  ..*\n++.  ...  ...  .+.  ..+  \n   \n2\n++!  ++*  .+!  .+*  .+*  ..!  ..!  ..*\n++.  +++  ...  .+.  ..+  .+.  ..+  .++\n   \n3\n++!  .+!  .+!  .+*  ..!\n+++  .+.  ..+  .++  .++\n   \n4\n.+!\n.++\n```\n\n数字描述了最少点击次数。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n设周围无雷的空地形成 $d$ 个连通块。\n\n- Subtask #1（15 points）：$nm\\leq 21$。\n- Subtask #2（4 points）：地图中只有一个雷。\n- Subtask #3（5 points）：$d = 0$。\n- Subtask #4（6 points）：$d = 1$。\n- Subtask #5（7 points）：$d = 2$。\n- Subtask #6（8 points）：$d \\leq 17$。依赖 Subtask #1，#2，#3，#4，#5。\n- Subtask #7（9 points）：$d \\leq 23$。依赖 Subtask #6。\n- Subtask #8（16 points）：$d\\leq 27$。依赖 Subtask #7。\n- Subtask #9（17 points）：$d\\leq 33$。依赖 Subtask #8。\n- Subtask #10（13 points）：无特殊限制。依赖 Subtask #9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, m\\leq 500$。\n- $0\\leq d\\leq 37$。\n- **不保证** 地图中有雷或空地。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) D\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400) & [asmend](https://www.luogu.com.cn/user/21658)。\n\n感谢 [Elegia](https://www.luogu.com.cn/user/21423) 对本题做出的贡献。", "locale": "zh-CN"}}}
{"pid": "P8456", "type": "P", "difficulty": 6, "samples": [["0\n8 13\n1 2 d\n1 3 d\n2 3 d\n3 4 d\n3 5 D\n4 5 d\n4 6 d\n5 6 D\n6 7 d\n6 8 d\n6 8 D\n6 8 D\n7 8 d", "24"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "圆方树"], "title": "「SWTR-8」地地铁铁", "background": "D_T_ : D_tt : ddT_ : ddtt = 9 : 3 : 3 : 1.", "description": "给定一张 $n$ 个点，$m$ 条边的无向连通图。每条边标有 `D` 或 `d`。\n\n定义无序点对 $(x, y)$ 是「[铁的](https://loj.ac/p/3398)」，当且仅当 $x \\neq y$ 且 $x, y$ 之间存在同时出现 `D` 和 `d` 的简单路径。\n\n小 A 深知自由组合定律 DdTt 的重要性，所以他让你对这样的点对计数。\n\n注意：\n\n- 简单路径定义为不经过重复 **节点** 的路径。\n- 保证图无自环，可能有重边。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $m$ 行，每行两个整数 $x, y$ 以及字母 $c$，表示一条连接 $x, y$ 且标有 $c$ 的无向边。", "outputFormat": "一行一个整数表示答案。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（6 points）：$n \\leq 8$，$m \\leq 20$。\n- Subtask #2（16 points）：$n\\leq 15$，$m\\leq 822$。依赖 Subtask #1。\n- Subtask #3（17 points）：$m = n - 1$。\n- Subtask #4（18 points）：$m = n$。\n- Subtask #5（19 points）：$n\\leq 1064$，$m\\leq 10 ^ 4$。依赖 Subtask #2。\n- Subtask #6（24 points）：无特殊限制。依赖 Subtask #3，#4，#5。\n\n对于 $100\\%$ 的数据：\n\n- $2\\leq n \\leq 4\\times 10 ^ 5$，$n - 1\\leq m\\leq  10 ^ 6$。\n- $1\\leq x, y\\leq n$。\n- $c\\in \\{\\texttt{D}, \\texttt{d}\\}$。\n- 保证图无自环，可能有重边。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) E\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[asmend](https://www.luogu.com.cn/user/21658)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」地地铁铁", "background": "D_T_ : D_tt : ddT_ : ddtt = 9 : 3 : 3 : 1.", "description": "给定一张 $n$ 个点，$m$ 条边的无向连通图。每条边标有 `D` 或 `d`。\n\n定义无序点对 $(x, y)$ 是「[铁的](https://loj.ac/p/3398)」，当且仅当 $x \\neq y$ 且 $x, y$ 之间存在同时出现 `D` 和 `d` 的简单路径。\n\n小 A 深知自由组合定律 DdTt 的重要性，所以他让你对这样的点对计数。\n\n注意：\n\n- 简单路径定义为不经过重复 **节点** 的路径。\n- 保证图无自环，可能有重边。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $m$ 行，每行两个整数 $x, y$ 以及字母 $c$，表示一条连接 $x, y$ 且标有 $c$ 的无向边。", "outputFormat": "一行一个整数表示答案。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（6 points）：$n \\leq 8$，$m \\leq 20$。\n- Subtask #2（16 points）：$n\\leq 15$，$m\\leq 822$。依赖 Subtask #1。\n- Subtask #3（17 points）：$m = n - 1$。\n- Subtask #4（18 points）：$m = n$。\n- Subtask #5（19 points）：$n\\leq 1064$，$m\\leq 10 ^ 4$。依赖 Subtask #2。\n- Subtask #6（24 points）：无特殊限制。依赖 Subtask #3，#4，#5。\n\n对于 $100\\%$ 的数据：\n\n- $2\\leq n \\leq 4\\times 10 ^ 5$，$n - 1\\leq m\\leq  10 ^ 6$。\n- $1\\leq x, y\\leq n$。\n- $c\\in \\{\\texttt{D}, \\texttt{d}\\}$。\n- 保证图无自环，可能有重边。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) E\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[asmend](https://www.luogu.com.cn/user/21658)。", "locale": "zh-CN"}}}
