{"pid": "P5046", "type": "P", "difficulty": 6, "samples": [["4 1\n1 4 2 3\n2 4", "2"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "O2优化", "分块", "Ynoi"], "title": "[Ynoi2019 模拟赛] Yuno loves sqrt technology I", "background": "![](https://cdn.luogu.com.cn/upload/pic/44003.png)\n", "description": "给你一个长为 $n$ 的**排列**，$m$ 次询问，每次查询一个区间的逆序对数，强制在线。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数表示这个**排列**。\n\n之后 $m$ 行，每行两个整数表示查询的区间。\n\n本题强制在线，每次查询输入的数要 xor 上 $lastans$，第一次询问默认 $lastans=0$。", "outputFormat": "输出m行，每行一个数表示这次询问的答案", "hint": "$1\\leq n,m\\leq 10^5$。\n\n我们已经有了低于 $n^{1.5}$ 的在线算法。\n\nSource\nBy nzhtl1477", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi2019 Mock Contest] Yuno loves sqrt technology I", "background": "![](https://cdn.luogu.com.cn/upload/pic/44003.png)", "description": "You are given a **permutation** of length $n$ and $m$ queries. Each query asks for the number of inversion pairs in a subarray interval, and the queries must be answered online.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $n$ positive integers representing this **permutation**.\n\nThe next $m$ lines each contain two integers representing the query interval.\n\nThis problem is strictly online: for each query, the input numbers must be xor-ed with $lastans$. For the first query, $lastans = 0$ by default.", "outputFormat": "Output $m$ lines. Each line contains one integer, the answer to the corresponding query.", "hint": "$1 \\le n, m \\le 10^5$.\n\nWe already have an online algorithm with time complexity below $n^{1.5}$.\n\nSource: By nzhtl1477.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi2019 模拟赛] Yuno loves sqrt technology I", "background": "![](https://cdn.luogu.com.cn/upload/pic/44003.png)\n", "description": "给你一个长为 $n$ 的**排列**，$m$ 次询问，每次查询一个区间的逆序对数，强制在线。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数表示这个**排列**。\n\n之后 $m$ 行，每行两个整数表示查询的区间。\n\n本题强制在线，每次查询输入的数要 xor 上 $lastans$，第一次询问默认 $lastans=0$。", "outputFormat": "输出m行，每行一个数表示这次询问的答案", "hint": "$1\\leq n,m\\leq 10^5$。\n\n我们已经有了低于 $n^{1.5}$ 的在线算法。\n\nSource\nBy nzhtl1477", "locale": "zh-CN"}}}
{"pid": "P5047", "type": "P", "difficulty": 6, "samples": [["4 1\n1 4 2 3\n2 4", "2"]], "limits": {"time": [250, 250, 250, 250, 250], "memory": [32000, 32000, 32000, 32000, 32000]}, "tags": ["2019", "莫队", "O2优化", "分块", "Ynoi"], "title": "[Ynoi2019 模拟赛] Yuno loves sqrt technology II", "background": "![](https://cdn.luogu.com.cn/upload/pic/44005.png)\n", "description": "给你一个长为 $n$ 的序列 $a$，$m$ 次询问，每次查询一个区间的逆序对数。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示这个序列。\n\n之后 $m$ 行，每行两个整数表示查询的区间。", "outputFormat": "输出 $m$ 行，每行一个整数表示这次询问的答案。", "hint": "$1\\leq n,m \\leq 10^5$，$0 \\leq a_i \\leq 10^9$。\n\n我们已经有了低于 $n^{1.5}$ 的算法。\n\nSource\nBy nzhtl1477", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi2019 Mock Contest] Yuno loves sqrt technology II", "background": "![](https://cdn.luogu.com.cn/upload/pic/44005.png)", "description": "You are given a sequence $a$ of length $n$ and $m$ queries. For each query, you need to find the number of inversion pairs in a given interval.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $n$ integers representing the sequence.\n\nThen follow $m$ lines, each containing two integers representing the query interval.", "outputFormat": "Output $m$ lines, each with one integer representing the answer to the query.", "hint": "$1 \\leq n, m \\leq 10^5$, $0 \\leq a_i \\leq 10^9$.\n\nWe already have an algorithm faster than $n^{1.5}$.\n\nSource  \nBy nzhtl1477\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi2019 模拟赛] Yuno loves sqrt technology II", "background": "![](https://cdn.luogu.com.cn/upload/pic/44005.png)\n", "description": "给你一个长为 $n$ 的序列 $a$，$m$ 次询问，每次查询一个区间的逆序对数。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示这个序列。\n\n之后 $m$ 行，每行两个整数表示查询的区间。", "outputFormat": "输出 $m$ 行，每行一个整数表示这次询问的答案。", "hint": "$1\\leq n,m \\leq 10^5$，$0 \\leq a_i \\leq 10^9$。\n\n我们已经有了低于 $n^{1.5}$ 的算法。\n\nSource\nBy nzhtl1477", "locale": "zh-CN"}}}
{"pid": "P5048", "type": "P", "difficulty": 6, "samples": [["4 1\n2 3 3 3\n2 4", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [64000, 64000, 64000, 64000, 64000]}, "tags": ["2019", "O2优化", "分块", "Ynoi"], "title": "[Ynoi2019 模拟赛] Yuno loves sqrt technology III", "background": "![](https://cdn.luogu.com.cn/upload/pic/44006.png)", "description": "给你一个长为 $n$ 的序列 $a$，$m$ 次询问，每次查询一个区间的众数的出现次数，强制在线。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示这个序列。\n\n之后 $m$ 行，每行两个数表示查询的区间。\n\n本题强制在线，每次查询输入的数要 $\\operatorname{xor}$ 上 $lastans$，第一次询问默认 $lastans=0$。", "outputFormat": "输出 $m$ 行，每行一个数表示这次询问的答案。", "hint": "$1\\leq n,m,a_i \\leq 5\\times 10^5$。\n\n存在 $O( n^{1.48541} )$ 的算法。\n\nSource By nzhtl1477.", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi2019 Mock Contest] Yuno loves sqrt technology III", "background": "![](https://cdn.luogu.com.cn/upload/pic/44006.png)", "description": "You are given a sequence $a$ of length $n$ and $m$ queries. For each query, you need to output the number of occurrences of the mode in a given interval, and the queries are forced to be online.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $n$ integers representing the sequence.\n\nThen follow $m$ lines, each containing two numbers representing the query interval.\n\nThis problem is forced to be online: in each query, the input numbers should be $\\operatorname{xor}$ with $lastans$. For the first query, $lastans = 0$ by default.", "outputFormat": "Output $m$ lines, each line contains one integer representing the answer to the query.", "hint": "$1\\leq n, m, a_i \\leq 5\\times 10^5$。\n\nThere exists an $O( n^{1.48541} )$ algorithm.\n\nSource By nzhtl1477.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi2019 模拟赛] Yuno loves sqrt technology III", "background": "![](https://cdn.luogu.com.cn/upload/pic/44006.png)", "description": "给你一个长为 $n$ 的序列 $a$，$m$ 次询问，每次查询一个区间的众数的出现次数，强制在线。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数表示这个序列。\n\n之后 $m$ 行，每行两个数表示查询的区间。\n\n本题强制在线，每次查询输入的数要 $\\operatorname{xor}$ 上 $lastans$，第一次询问默认 $lastans=0$。", "outputFormat": "输出 $m$ 行，每行一个数表示这次询问的答案。", "hint": "$1\\leq n,m,a_i \\leq 5\\times 10^5$。\n\n存在 $O( n^{1.48541} )$ 的算法。\n\nSource By nzhtl1477.", "locale": "zh-CN"}}}
{"pid": "P5049", "type": "P", "difficulty": 6, "samples": [["6 5 \n1 3 \n2 3 \n2 5 \n3 4 \n4 6", "1 3 2 5 4 6"], ["6 6 \n1 3 \n2 3 \n2 5 \n3 4 \n4 5 \n4 6", "1 3 2 4 5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "NOIP 提高组", "基环树"], "title": "[NOIP 2018 提高组] 旅行 加强版", "background": "", "description": "小 Y 是一个爱好旅行的 OIer。她来到 X 国，打算将各个城市都玩一遍。 \n  \n小Y了解到，X 国的 $n$ 个城市之间有 $m$ 条双向道路。每条双向道路连接两个城市。 不存在两条连接同一对城市的道路，也不存在一条连接一个城市和它本身的道路。并且， 从任意一个城市出发，通过这些道路都可以到达任意一个其他城市。小 Y 只能通过这些 道路从一个城市前往另一个城市。   \n\n小 Y 的旅行方案是这样的：任意选定一个城市作为起点，然后从起点开始，每次可 以选择一条与当前城市相连的道路，走向一个没有去过的城市，或者沿着第一次访问该 城市时经过的道路后退到上一个城市。当小 Y 回到起点时，她可以选择结束这次旅行或 继续旅行。需要注意的是，小 Y 要求在旅行方案中，每个城市都被访问到。   \n\n为了让自己的旅行更有意义，小 Y 决定在每到达一个新的城市（包括起点）时，将 它的编号记录下来。她知道这样会形成一个长度为 $n$ 的序列。她希望这个序列的字典序 最小，你能帮帮她吗？  对于两个长度均为 $n$ 的序列 $A$ 和 $B$，当且仅当存在一个正整数 $x$，满足以下条件时， 我们说序列 $A$ 的字典序小于 $B$。 \n  \n- 对于任意正整数 $1 ≤ i < x$，序列 $A$ 的第 $i$ 个元素 $A_i$ 和序列 $B$ 的第 $i$ 个元素 $B_i$ 相同。   \n- 序列 $A$ 的第 $x$ 个元素的值小于序列 $B$ 的第 $x$ 个元素的值。 ", "inputFormat": "输入文件共 $m + 1$ 行。第一行包含两个整数 $n,m(m ≤ n)$，中间用一个空格分隔。\n \n接下来 m 行，每行包含两个整数 $u,v (1 ≤ u,v ≤ n)$ ，表示编号为 $u$ 和 $v$ 的城市之 间有一条道路，两个整数之间用一个空格分隔。 ", "outputFormat": "输出文件包含一行，$n$ 个整数，表示字典序最小的序列。相邻两个整数之间用一个 空格分隔。 ", "hint": "【数据规模与约定】   \n\n对于 $100\\%$ 的数据和所有样例， $1 \\le n \\le 500000 $ 且 $m = n - 1$ 或 $m = n$ 。\n\n具体规定详见正常版本（除 testcase11-13）", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Travel Enhanced Version.", "background": "", "description": "Xiao Y is an OIer who loves traveling. She came to Country X and plans to visit all the cities.\n\nXiao Y learned that there are $n$ cities in Country X with $m$ two-way roads between them. Each two-way road connects two cities. There are no two roads connecting the same pair of cities, and there is no road connecting a city to itself. Also, starting from any city, one can reach any other city through these roads. Xiao Y can only travel from one city to another using these roads.\n\nXiao Y's travel plan is as follows: she can choose any city as the starting point, and then starting from the starting point, each time she can choose a road connected to the current city to go to a city she has not visited yet, or she can go back to the previous city along the road she used when she first visited the current city. When Xiao Y returns to the starting point, she may choose to end the trip or continue traveling. Note that Xiao Y requires that in the travel plan, every city must be visited.\n\nTo make her trip more meaningful, Xiao Y decides that each time she arrives at a new city (including the starting point), she will record its index. She knows this will form a sequence of length $n$. She wants this sequence to be lexicographically smallest. Can you help her?\n\nFor two sequences $A$ and $B$ of length $n$, we say that $A$ is lexicographically smaller than $B$ if and only if there exists a positive integer $x$ such that the following conditions hold:\n\n- For any positive integer $1 \\le i < x$, the $i$-th element $A_i$ of $A$ is equal to the $i$-th element $B_i$ of $B$.\n- The value of the $x$-th element of $A$ is less than the value of the $x$-th element of $B$.", "inputFormat": "The input file contains a total of $m + 1$ lines. The first line contains two integers $n, m (m \\le n)$, separated by a single space.\n\nThe next $m$ lines each contain two integers $u, v (1 \\le u, v \\le n)$, indicating that there is a road between the cities indexed $u$ and $v$. The two integers are separated by a single space.", "outputFormat": "The output file contains one line with $n$ integers, representing the lexicographically smallest sequence. Adjacent integers are separated by a single space.", "hint": "Constraints.\n\nFor $100\\%$ of the data and all samples, $1 \\le n \\le 500000$ and $m = n - 1$ or $m = n$.\n\nFor detailed specifications, see the normal version (excluding testcase11-13).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 旅行 加强版", "background": "", "description": "小 Y 是一个爱好旅行的 OIer。她来到 X 国，打算将各个城市都玩一遍。 \n  \n小Y了解到，X 国的 $n$ 个城市之间有 $m$ 条双向道路。每条双向道路连接两个城市。 不存在两条连接同一对城市的道路，也不存在一条连接一个城市和它本身的道路。并且， 从任意一个城市出发，通过这些道路都可以到达任意一个其他城市。小 Y 只能通过这些 道路从一个城市前往另一个城市。   \n\n小 Y 的旅行方案是这样的：任意选定一个城市作为起点，然后从起点开始，每次可 以选择一条与当前城市相连的道路，走向一个没有去过的城市，或者沿着第一次访问该 城市时经过的道路后退到上一个城市。当小 Y 回到起点时，她可以选择结束这次旅行或 继续旅行。需要注意的是，小 Y 要求在旅行方案中，每个城市都被访问到。   \n\n为了让自己的旅行更有意义，小 Y 决定在每到达一个新的城市（包括起点）时，将 它的编号记录下来。她知道这样会形成一个长度为 $n$ 的序列。她希望这个序列的字典序 最小，你能帮帮她吗？  对于两个长度均为 $n$ 的序列 $A$ 和 $B$，当且仅当存在一个正整数 $x$，满足以下条件时， 我们说序列 $A$ 的字典序小于 $B$。 \n  \n- 对于任意正整数 $1 ≤ i < x$，序列 $A$ 的第 $i$ 个元素 $A_i$ 和序列 $B$ 的第 $i$ 个元素 $B_i$ 相同。   \n- 序列 $A$ 的第 $x$ 个元素的值小于序列 $B$ 的第 $x$ 个元素的值。 ", "inputFormat": "输入文件共 $m + 1$ 行。第一行包含两个整数 $n,m(m ≤ n)$，中间用一个空格分隔。\n \n接下来 m 行，每行包含两个整数 $u,v (1 ≤ u,v ≤ n)$ ，表示编号为 $u$ 和 $v$ 的城市之 间有一条道路，两个整数之间用一个空格分隔。 ", "outputFormat": "输出文件包含一行，$n$ 个整数，表示字典序最小的序列。相邻两个整数之间用一个 空格分隔。 ", "hint": "【数据规模与约定】   \n\n对于 $100\\%$ 的数据和所有样例， $1 \\le n \\le 500000 $ 且 $m = n - 1$ 或 $m = n$ 。\n\n具体规定详见正常版本（除 testcase11-13）", "locale": "zh-CN"}}}
{"pid": "P5050", "type": "P", "difficulty": 7, "samples": [["10 10\n18 2 6 17 7 19 17 6 2 12 14\n4 15 5 20 2 6 20 12 16 5\n", "18147258\n804760733\n161737928\n73381527\n23750\n973451550\n73381527\n525589927\n842520242\n161737928\n"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化", "快速傅里叶变换 FFT", "快速数论变换 NTT", "模板题"], "title": "【模板】多项式多点求值", "background": "", "description": "给定一个 $n$ 次多项式 $f(x)$ ，现在请你对于 $i \\in [1,m]$ ，求出 $f(a_i)$ 。", "inputFormat": "第一行两个正整数 $n,m$ 表示多项式的次数及你要求的点值的数量。\n\n第二行 $n+1$ 个非负整数，由低到高地给出多项式的系数。\n\n第三行 $m$ 个非负整数，表示 $a_i$ 。", "outputFormat": "一共 $m$ 行，每行 $1$ 个非负整数。\n\n第 $i$ 行的数字表示 $f(a_i)$ 。\n\n答案对 $998244353$ 取模。", "hint": "$n,m \\in [1,64000]$，$a_i,[x^i]f(x) \\in [0,998244352]$ 。\n\n$[x^i]f(x)$ 表示 $f(x)$ 的 $i$ 次项系数。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Multipoint Evaluation of a Polynomial", "background": "", "description": "Given an $n$-degree polynomial $f(x)$, for each $i \\in [1,m]$, compute $f(a_i)$.", "inputFormat": "The first line contains two positive integers $n,m$, representing the degree of the polynomial and the number of points to evaluate.\n\nThe second line contains $n+1$ non-negative integers, giving the coefficients of the polynomial from low degree to high degree.\n\nThe third line contains $m$ non-negative integers, representing $a_i$.", "outputFormat": "Output a total of $m$ lines, each containing $1$ non-negative integer.\n\nThe number on line $i$ represents $f(a_i)$.\n\nThe answer should be taken modulo $998244353$.", "hint": "Constraints: $n,m \\in [1,64000]$, $a_i,[x^i]f(x) \\in [0,998244352]$.\n\n$[x^i]f(x)$ represents the coefficient of the $i$-th term of $f(x)$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】多项式多点求值", "background": "", "description": "给定一个 $n$ 次多项式 $f(x)$ ，现在请你对于 $i \\in [1,m]$ ，求出 $f(a_i)$ 。", "inputFormat": "第一行两个正整数 $n,m$ 表示多项式的次数及你要求的点值的数量。\n\n第二行 $n+1$ 个非负整数，由低到高地给出多项式的系数。\n\n第三行 $m$ 个非负整数，表示 $a_i$ 。", "outputFormat": "一共 $m$ 行，每行 $1$ 个非负整数。\n\n第 $i$ 行的数字表示 $f(a_i)$ 。\n\n答案对 $998244353$ 取模。", "hint": "$n,m \\in [1,64000]$，$a_i,[x^i]f(x) \\in [0,998244352]$ 。\n\n$[x^i]f(x)$ 表示 $f(x)$ 的 $i$ 次项系数。", "locale": "zh-CN"}}}
{"pid": "P5051", "type": "P", "difficulty": 2, "samples": [["2 1 3", "2 1"], ["3 2 7", "2 3 2"], ["4 5 6", "5 1 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2017", "COCI（克罗地亚）"], "title": "[COCI 2017/2018 #7] Timovi", "background": "", "description": "We need to arrange M kids in N teams. We begin by placing K kids in each team, starting\nfrom the first to the $N^{th}$\nteam. When we finish with the $N^{th}$\nteam, we switch directions and\ncontinue, placing K kids in each team, from the $(N-1)^{th}$\nto the first team, respectively. When\nwe finish with the first team, we switch directions again and continue the process from the\nsecond to the $N^{th}$\nteam, respectively, and so on until there are no kids left to distribute. For\nexample, if we have three teams, we will place K kids in teams in the following order: first\nteam, second team, third team, second team, first team, second team, etc.\n\nIf, at any points, there are less than K kids left to place in the current team, we place all the\nremaining kids in that team and end the process.\n\nOutput the number of kids in each team when the process ends.", "inputFormat": "The first line of input contains the integers N (2 ≤ N ≤ 200 000), K and M\n(1 ≤ K ≤ M ≤ 2 000 000 000) from the task.", "outputFormat": "In a single line, output the number of kids in each of the N teams, respectively from the first\nto the $N^{th}$\nteam.", "hint": "In test cases worth a total of 40 points, it will hold M / K ≤ 200 000.\n", "locale": "en", "translations": {"en": {"title": "[COCI 2017/2018 #7] Timovi", "background": "", "description": "We need to arrange M kids in N teams. We begin by placing K kids in each team, starting\nfrom the first to the $N^{th}$\nteam. When we finish with the $N^{th}$\nteam, we switch directions and\ncontinue, placing K kids in each team, from the $(N-1)^{th}$\nto the first team, respectively. When\nwe finish with the first team, we switch directions again and continue the process from the\nsecond to the $N^{th}$\nteam, respectively, and so on until there are no kids left to distribute. For\nexample, if we have three teams, we will place K kids in teams in the following order: first\nteam, second team, third team, second team, first team, second team, etc.\n\nIf, at any points, there are less than K kids left to place in the current team, we place all the\nremaining kids in that team and end the process.\n\nOutput the number of kids in each team when the process ends.", "inputFormat": "The first line of input contains the integers N (2 ≤ N ≤ 200 000), K and M\n(1 ≤ K ≤ M ≤ 2 000 000 000) from the task.", "outputFormat": "In a single line, output the number of kids in each of the N teams, respectively from the first\nto the $N^{th}$\nteam.", "hint": "In test cases worth a total of 40 points, it will hold M / K ≤ 200 000.\n", "locale": "en"}, "zh-CN": {"title": "[COCI 2017/2018 #7] Timovi", "background": "", "description": "把$m$个人放在$n$个队伍里。\n规则：\n- 每次放$k$个人\n- 顺序为$1^{th}$->$2^{th}$->$3^{th}$->……->$(n-1)^{th}$->$n^{th}$->$(n-1)^{th}$->$(n-2)^{th}$->……->$2^{th}$->$1^{th}$->$2^{th}$->……\n- 一直重复到$\\text{当前剩余人数}<k$为止。此时剩下的人全部放在当前队里", "inputFormat": "", "outputFormat": "", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5052", "type": "P", "difficulty": 5, "samples": [["10 5 4\n1 30 4\n3 5 7\n7 10 12\n9 100 23", "115 "], ["20 8 7\n1 35 14\n4 57 1\n6 32 2\n9 94 28\n14 78 8\n15 8 1\n17 55 3\n", "172"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "COCI（克罗地亚）"], "title": "[COCI 2017/2018 #7] Go", "background": "", "description": "Branimirko is still a passionate player of the world-renowned game Pokémon Go. Recently,\nhe decided to organize a competition in catching Pokémon. It will be held in Ilica street in\nZagreb, and the main sponsor is his friend Slavko. The reward is, of course, candy!\n\nIlica is, as we all know, the longest street in Zagreb. There are N houses on the same side of\nthe street, and each house has a house number between 1 and N. The competition begins\nat house number K.\n\nBefore the competition, Branimirko looked at the map and saw M Pokémon. Each Pokémon\nis located at its (distinct) house number Ai\n, is valued at Bi candy, and can be caught only in\nthe next Ti seconds, after which it disappears from the map and is impossible to catch.\n\nBranimirko can visit one house number per second. Also, when he catches a Pokémon, that\nPokémon disappears from the map.\n\nSince Branimirko really likes candy, he asked for your help.\n\nHelp him and determine the maximal amount of candy he can get!", "inputFormat": "The first line of input contains integers N, K (1 ≤ K ≤ N ≤ 1 000) and M (1 ≤ M ≤ 100), the\nnumber of houses, the starting house number and the number of Pokémon.\n\nEach of the following M lines contains integers $A_i$\n(1 ≤ $A_i$ ≤ N), $B_i$\n(1 ≤ $B_i$ ≤ 100) and $T_i$\n(1 ≤ $T_i$ ≤\n2 000) from the task.\nIn the input data, the Pokémon will always be in a strictly ascending order by house number $A_i$ .", "outputFormat": "You must output the required maximal amount of candy from the task.\n", "hint": "In test cases worth 20% of total points, it will hold M ≤ 10.\n\nIn additional 20% of total points, it will hold M ≤ 20.\n\n**Clarification of the first test case:**\n\nOne strategy is that Branimirko first catches the Pokémon at house number 3 (5 candy), then,\nrespectively, house numbers 7 (10 candy) and 9 (100 candy) for a total of 115 candy.\n\nNotice that Branimirko can’t catch the Pokémon at house number 1, because he can’t reach it in time\nfrom his starting position (house number 5).", "locale": "en", "translations": {"en": {"title": "[COCI 2017/2018 #7] Go", "background": "", "description": "Branimirko is still a passionate player of the world-renowned game Pokémon Go. Recently,\nhe decided to organize a competition in catching Pokémon. It will be held in Ilica street in\nZagreb, and the main sponsor is his friend Slavko. The reward is, of course, candy!\n\nIlica is, as we all know, the longest street in Zagreb. There are N houses on the same side of\nthe street, and each house has a house number between 1 and N. The competition begins\nat house number K.\n\nBefore the competition, Branimirko looked at the map and saw M Pokémon. Each Pokémon\nis located at its (distinct) house number Ai\n, is valued at Bi candy, and can be caught only in\nthe next Ti seconds, after which it disappears from the map and is impossible to catch.\n\nBranimirko can visit one house number per second. Also, when he catches a Pokémon, that\nPokémon disappears from the map.\n\nSince Branimirko really likes candy, he asked for your help.\n\nHelp him and determine the maximal amount of candy he can get!", "inputFormat": "The first line of input contains integers N, K (1 ≤ K ≤ N ≤ 1 000) and M (1 ≤ M ≤ 100), the\nnumber of houses, the starting house number and the number of Pokémon.\n\nEach of the following M lines contains integers $A_i$\n(1 ≤ $A_i$ ≤ N), $B_i$\n(1 ≤ $B_i$ ≤ 100) and $T_i$\n(1 ≤ $T_i$ ≤\n2 000) from the task.\nIn the input data, the Pokémon will always be in a strictly ascending order by house number $A_i$ .", "outputFormat": "You must output the required maximal amount of candy from the task.\n", "hint": "In test cases worth 20% of total points, it will hold M ≤ 10.\n\nIn additional 20% of total points, it will hold M ≤ 20.\n\n**Clarification of the first test case:**\n\nOne strategy is that Branimirko first catches the Pokémon at house number 3 (5 candy), then,\nrespectively, house numbers 7 (10 candy) and 9 (100 candy) for a total of 115 candy.\n\nNotice that Branimirko can’t catch the Pokémon at house number 1, because he can’t reach it in time\nfrom his starting position (house number 5).", "locale": "en"}, "zh-CN": {"title": "[COCI 2017/2018 #7] Go", "background": "", "description": "Branimirko 是世界著名游戏 Pokémon Go 的一位热情玩家。最近，他决定组织一场抓小精灵的比赛。比赛将在 Zagreb 的 Ilica 大街举行，主要赞助商是他的朋友 Slavko。奖励当然是糖果!\n\n我们都知道，Ilica 是 Zagreb 最长的街道。在街道的同一侧有 $N$ 栋房子，房子从左到右分别依次有 $1$ 到 $N$ 的门牌号。\n\n比赛前，Branimirko 看了看地图，发现了一共有 $M$ 只小精灵。每个小精灵都位于自己的各不相同的房子里，第 $i$ 个房子门牌号为 $A_i$，小精灵价值 $B_i$ 个糖果，并且只能在 $T_i$ 秒内被抓，之后它就会从地图上消失。\n\nBranimirko 第 $1$ 秒在门牌号为 $K$ 的房子。接下来每一秒它可以移动到门牌号相邻的房子，或者不移动。当他在一个时刻和一只小精灵处在相同的房子时，他就会抓住这只小精灵，获得其对应的糖果，且这只小精灵就从地图上消失了。\n\n因为 Branimirko 真的很喜欢糖果，所以他请求你的帮助。\n\n帮助他求出他可以得到多少糖果。", "inputFormat": "输入的第一行包含三个整数 $N,K$（$1\\le K\\le N\\le 10^3$）和 $M$（$1\\le M\\le 100$），代表房子数目，比赛开始的房子门牌号和小精灵的数量。\n\n接下来的 $M$ 行每一行都包含三个整数 $A_i$（$1\\le A_i\\le N$），$B_i$（$1\\le B_i\\le 100$）和 $T_i$（$1\\le T_i\\le 2000$）。在输入数据中，小精灵始终按照房间号 $A_i$ 严格升序给出。", "outputFormat": "输出可获取的最大糖果数量。\n\n\n### 说明\n\n在测试用例中，对于 $20\\%$ 的数据，满足 $M\\le 10$。\n\n对于另外 $20\\%$ 的数据，满足 $M\\le 20$。\n\n### 样例 1 解释\n\n一种策略是，Branimirko 首先在第 $3$ 个房子（$5$ 颗糖果）捕捉小精灵，然后分别在第 $7$ 个房子（$10$ 颗糖果）和第 $9$ 个房子（$100$ 颗糖果），总共 $115$ 颗糖果。\n\n注意到 Branimirko 无法在 $1$ 号房子里抓住小精灵，因为他无法从他的起始位置（$5$ 号房子）及时到达这里。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5053", "type": "P", "difficulty": 3, "samples": [["12 13\n..+--+.......\n+-|..|.......\n|.|.1|--+....\n|.+--+..|....\n|......+----+\n+---+..|..2.|\n....|..+----+\n.+--+........\n.|...........\n+---+........\n|.3.|........\n+---+........", "2\n3\n1"], ["8 10\n..........\n.......+-+\n...+---|1|\n...|...+-+\n...|......\n..+-+.....\n..|2|.....\n..+-+.....\n", "2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2017", "COCI（克罗地亚）"], "title": "[COCI 2017/2018 #7] Clickbait", "background": "", "description": "While surfing online, Slavko came across an ad displaying a system of containers and pipes\n(an example of such system is illustrated in the image below) with the message: “If container\n**1** starts filling up with water, determine the order in which the containers get filled up.”\n\n![](https://cdn.luogu.com.cn/upload/pic/44318.png)\n\nThe system consists of K containers denoted with numbers from 1 to K, and we can describe\nit using a matrix of characters with N rows and M columns. The containers are **in the shape of a rectangle**​, and the outlines of the containers and pipes are shown with the following\ncharacters:\n\n-  ‘-’ if it’s a horizontal part of the outline,\n-  ‘|’ if it’s a vertical part of the outline, and\n-  ‘+’ if it’s a spot where the horizontal and vertical parts of the outline connect. An exception is where the containers and pipes connect. In that case, the container outline dominates (see sample tests).\n\nIn an arbitrary place within each container, there is a string of digits that represent the label\nof the container, and all the other fields in the matrix are equal to ‘.’ (dot).\n\nAll containers except the one labeled with 1 have **exactly one** supply pipe that enters the\ncontainer in its **upper side**​. The container labeled with 1 does not have a supply pipe.\n\nThe containers can have multiple (also possible, zero) discharge pipes that leave the\ncontainer out of its **lateral side**​. The places where discharge pipes leave a container will be\nin mutually **distinct rows** in the matrix.\n\nThe pipes directly connect two containers, which means that **it is not possible** to split the\npipes or connect multiple pipes into one, and no two pipes will intersect. On their way,\nlooking from the source to the destination container, the pipes always descend to the\nfollowing row or stay in the same row. In other words, they never go back to the previous\nrow, so the water can flow freely from one container to another.\n\nThe water enters a container until it is full. If the water level reaches the level of the\ndischarge pipe, the water will flow through that pipe until the container the pipe leads into is\nfilled up.\n\nHelp Slavko and determine the order in which the containers will fill up.\n\n**Please note:**\n- The test data is such that each character ‘+’ is surrounded with **exactly one character** ‘-’ to the left or the right side and **exactly one** character ‘|’ to the upper or lower side, and **all other** adjacent characters in directions up, down, left and right will be equal to ‘.’ (dot).\n- The only places where the pipe in the matrix is in a field adjacent to the container outline are the places where the pipe enters or exits the container. In other words, a pipe will never run right next to a container (except where it connects with the\ncontainer). The entry for the supply pipe is labeled with the character ‘|’ above a container, whereas the exit of the discharge pipe is labeled with the character ‘-’ on the lateral side of a container.", "inputFormat": "The first line contains two integers N and M (1 ≤ N, M ≤ 1000), matrix dimensions.\n\nThe following N lines contain M characters describing the container system.", "outputFormat": "You must output K lines. The $i^{th}$\nline contains the label of the container that fills up $i^{th}$\n. A\nsolution will always exist and will be unique.", "hint": "In test cases worth 70% of total points, it will hold N, M ≤ 100.\n\n**Clarification of the first test case:**\n\nContainer 1 starts filling up with water.\n\nThe water level in container 1 grows, and in one moment reaches the level of the discharge pipe leading to container 2. The water flows through the pipe until container 2 fills up.\n\nAfter that, the water level in container 1 keeps growing until it reaches the level of the discharge pipe leading to container 3, which fills up next.\n\nFinally, the water level in container 1 keeps growing and the container fills up.", "locale": "en", "translations": {"en": {"title": "[COCI 2017/2018 #7] Clickbait", "background": "", "description": "While surfing online, Slavko came across an ad displaying a system of containers and pipes\n(an example of such system is illustrated in the image below) with the message: “If container\n**1** starts filling up with water, determine the order in which the containers get filled up.”\n\n![](https://cdn.luogu.com.cn/upload/pic/44318.png)\n\nThe system consists of K containers denoted with numbers from 1 to K, and we can describe\nit using a matrix of characters with N rows and M columns. The containers are **in the shape of a rectangle**​, and the outlines of the containers and pipes are shown with the following\ncharacters:\n\n-  ‘-’ if it’s a horizontal part of the outline,\n-  ‘|’ if it’s a vertical part of the outline, and\n-  ‘+’ if it’s a spot where the horizontal and vertical parts of the outline connect. An exception is where the containers and pipes connect. In that case, the container outline dominates (see sample tests).\n\nIn an arbitrary place within each container, there is a string of digits that represent the label\nof the container, and all the other fields in the matrix are equal to ‘.’ (dot).\n\nAll containers except the one labeled with 1 have **exactly one** supply pipe that enters the\ncontainer in its **upper side**​. The container labeled with 1 does not have a supply pipe.\n\nThe containers can have multiple (also possible, zero) discharge pipes that leave the\ncontainer out of its **lateral side**​. The places where discharge pipes leave a container will be\nin mutually **distinct rows** in the matrix.\n\nThe pipes directly connect two containers, which means that **it is not possible** to split the\npipes or connect multiple pipes into one, and no two pipes will intersect. On their way,\nlooking from the source to the destination container, the pipes always descend to the\nfollowing row or stay in the same row. In other words, they never go back to the previous\nrow, so the water can flow freely from one container to another.\n\nThe water enters a container until it is full. If the water level reaches the level of the\ndischarge pipe, the water will flow through that pipe until the container the pipe leads into is\nfilled up.\n\nHelp Slavko and determine the order in which the containers will fill up.\n\n**Please note:**\n- The test data is such that each character ‘+’ is surrounded with **exactly one character** ‘-’ to the left or the right side and **exactly one** character ‘|’ to the upper or lower side, and **all other** adjacent characters in directions up, down, left and right will be equal to ‘.’ (dot).\n- The only places where the pipe in the matrix is in a field adjacent to the container outline are the places where the pipe enters or exits the container. In other words, a pipe will never run right next to a container (except where it connects with the\ncontainer). The entry for the supply pipe is labeled with the character ‘|’ above a container, whereas the exit of the discharge pipe is labeled with the character ‘-’ on the lateral side of a container.", "inputFormat": "The first line contains two integers N and M (1 ≤ N, M ≤ 1000), matrix dimensions.\n\nThe following N lines contain M characters describing the container system.", "outputFormat": "You must output K lines. The $i^{th}$\nline contains the label of the container that fills up $i^{th}$\n. A\nsolution will always exist and will be unique.", "hint": "In test cases worth 70% of total points, it will hold N, M ≤ 100.\n\n**Clarification of the first test case:**\n\nContainer 1 starts filling up with water.\n\nThe water level in container 1 grows, and in one moment reaches the level of the discharge pipe leading to container 2. The water flows through the pipe until container 2 fills up.\n\nAfter that, the water level in container 1 keeps growing until it reaches the level of the discharge pipe leading to container 3, which fills up next.\n\nFinally, the water level in container 1 keeps growing and the container fills up.", "locale": "en"}, "zh-CN": {"title": "[COCI 2017/2018 #7] Clickbait", "background": "", "description": "在上网的时候，Slavko遇到了一个广告，这个广告上面有一个由容器和管道组成的系统（如图是一个系统的例子）和一行字：“如果往编号为1的容器里注水，请确定这些容器被注满水的顺序。”\n这个系统包含K个编号为1到K的容器，并且我们可以用一个N×M的矩阵来描述它。**这些容器的形状为长方形**。容器和管道的轮廓将用这些字符表示：\n- 如果字符为‘-’，那么这个位置是容器和管道的轮廓的水平部分。\n- 如果字符为‘|’，那么这个位置是容器和管道的轮廓的垂直部分。\n- 如果字符为‘+’，那么这个位置同时是容器和管道的轮廓的水平和垂直部分。（即容器的四个角，管道的拐弯部分），一个例外是容器与管道的相交部分，在这个位置不使用+。\n在每一个容器内的某个位置内，都存在一个表示这个容器编号的数字串。矩阵内既不是容器和管道的轮廓，又不是表示容器编号的数字串的位置上的字符为'.'。\n除了编号为1的容器以外，所有的容器的**顶部都接入且只接入了一条可以使水进入容器的**管道。编号为1的容器的顶部没有管道。\n每个容器的**侧面**可以接入多条（也可以没有）可以使水流出容器的管道。**没有两个可以使水流出容器的管道与容器的连接处在同一个高度。**\n管道必须有方向的连接两个容器，这也就意味着一条管道**不能**在某些地方分成两条管道，或是两条管道交汇成一条管道，并且没有两条管道会相交。并且管道永远不会向上拐弯，所以可以保证管道里的水可以正常的向下流动并且流入对应接入的容器里。\n水只能进入没有被装满水的容器。如果一个容器中的水位达到了可以使水流出的管道的高度，水将会流入这个管道的另一端所接入的容器里，直到那个容器满了为止。\n请帮助Slavko确定这些容器被注满水的顺序。\n**请注意：**\n- 在矩阵中，每一个字符'+'都**有且仅有一个**'-'字符在其左边或右边与其相邻，并且**有且仅有一个**'|'字符在其上边或下边与其相邻。其余的与其相邻的字符将均为'.'。\n- 在字符矩阵中，管道与容器轮廓相邻的唯一可能的位置是管道与容器连接的位置。换句话说，除了管道与容器连接的情况，管道不可能与容器相邻。在与容器连接的位置，管道使水流入容器的一端用'|'标识，使水流出容器的一端用'-'标识。", "inputFormat": "第一行，两个整数N,M(1≤N,M≤1000)，表示矩阵的大小。\n接下来的N行，每行M个字符，描述了如题目所述的容器系统。", "outputFormat": "你必须输出K行。第i行表示第i个被注满水的容器的编号。输入保证存在唯一解。\n\n说明\n\n对于$70%$的数据，满足N,M≤100。\n样例1的解释：\n开始向容器1注水。\n容器1中的水位升高，并且在某个时刻达到通向容器2的管道的高度。水流进管道并最终流向容器2，直到容器2装满水为止。\n此后，容器1中的水位继续升高，直到达到通向容器3的管道的高度，水流进管道并最终流向容器3，直到容器3装满水为止。\n最后，容器1中的水位持续升高，直到容器1装满水。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5054", "type": "P", "difficulty": 4, "samples": [["3 5\n9 2 5\n1 2\n1 3\n", "14"], ["4 5\n1 1 1 2\n1 2\n2 3\n3 4\n", "3"], ["5 10\n1 3 5 2 4\n5 2\n3 1\n2 3\n4 2", "15"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["2017", "COCI（克罗地亚）"], "title": "[COCI 2017/2018 #7] Dostavljač", "background": "", "description": "Ever since Krešo started growing chili peppers, N restaurants all over Croatia showed\ninterest in his peppers so they could enrich their dishes with real spice. Because of high\ndemand, Krešo decided to start working as a delivery guy of chili peppers.\n\nThe restaurants are denoted with numbers from 1 to N and are mutually connected with N -\n1 roads such that traveling between any two restaurants is possible. Krešo begins his\njourney in the restaurant denoted with 1. In one unit of time, he can either drive to the\nadjacent restaurant or deliver the peppers to the current restaurant. For each restaurant, we\nknow the required amount of peppers $A_i$.\n\nSince delivering goods is tiring, Krešo decided to spend a total of M units of time on delivery\nand travel, after which he plans to take a break.\n\nDetermine the maximal amount of peppers Krešo can deliver in the given timeframe. You\ncan assume that Krešo always carries an unlimited supply of peppers.", "inputFormat": "The first line of input contains two integers N and M (1 ≤ N, M ≤ 500), the number of\nrestaurants and the time Krešo plans to spend delivering peppers.\n\nThe second line of input contains N integers $A_i$\n(1 ≤ $A_i$ ≤ $10^6$\n), the required amount of peppers\nfor restaurants denoted with i (1 ≤ i ≤ N).\n\nEach of the following N - 1 lines contains two integers U and V (1 ≤ U, V ≤ N, U ≠ V) that\nrepresent the road between restaurants U and V.", "outputFormat": "You must output the maximal amount of peppers Krešo can deliver in the given timeframe.\n", "hint": "**Clarification of the first test case:**\n\nIn the first step, Krešo will deliver the peppers to restaurant 1.\n\nIn the second step, Krešo will travel to restaurant 3.\n\nIn the third step, Krešo will deliver the peppers to restaurant 3.\n\nHe is left with 2 units of time, in which he can drive to restaurant 2, but he lacks one unit of time to\ndeliver the peppers to that restaurant.", "locale": "en", "translations": {"en": {"title": "[COCI 2017/2018 #7] Dostavljač", "background": "", "description": "Ever since Krešo started growing chili peppers, N restaurants all over Croatia showed\ninterest in his peppers so they could enrich their dishes with real spice. Because of high\ndemand, Krešo decided to start working as a delivery guy of chili peppers.\n\nThe restaurants are denoted with numbers from 1 to N and are mutually connected with N -\n1 roads such that traveling between any two restaurants is possible. Krešo begins his\njourney in the restaurant denoted with 1. In one unit of time, he can either drive to the\nadjacent restaurant or deliver the peppers to the current restaurant. For each restaurant, we\nknow the required amount of peppers $A_i$.\n\nSince delivering goods is tiring, Krešo decided to spend a total of M units of time on delivery\nand travel, after which he plans to take a break.\n\nDetermine the maximal amount of peppers Krešo can deliver in the given timeframe. You\ncan assume that Krešo always carries an unlimited supply of peppers.", "inputFormat": "The first line of input contains two integers N and M (1 ≤ N, M ≤ 500), the number of\nrestaurants and the time Krešo plans to spend delivering peppers.\n\nThe second line of input contains N integers $A_i$\n(1 ≤ $A_i$ ≤ $10^6$\n), the required amount of peppers\nfor restaurants denoted with i (1 ≤ i ≤ N).\n\nEach of the following N - 1 lines contains two integers U and V (1 ≤ U, V ≤ N, U ≠ V) that\nrepresent the road between restaurants U and V.", "outputFormat": "You must output the maximal amount of peppers Krešo can deliver in the given timeframe.\n", "hint": "**Clarification of the first test case:**\n\nIn the first step, Krešo will deliver the peppers to restaurant 1.\n\nIn the second step, Krešo will travel to restaurant 3.\n\nIn the third step, Krešo will deliver the peppers to restaurant 3.\n\nHe is left with 2 units of time, in which he can drive to restaurant 2, but he lacks one unit of time to\ndeliver the peppers to that restaurant.", "locale": "en"}, "zh-CN": {"title": "[COCI 2017/2018 #7] Dostavljač", "background": "", "description": "自从 Krešo 开始种植辣椒以来，克罗地亚各地的 $N$ 家餐馆都对他的辣椒感兴趣，因此他们可以用真正的香料来丰富他们的菜肴。由于需求量很大，Krešo 决定开始作为辣椒的送货员。\n\n餐馆用从 $1$ 到 $N$ 的数字表示，并且与 $N - 1$ 个道路相互连接，使得可以在任何两个餐馆之间旅行。Krešo 在 $1$ 号餐厅开始他的旅程。在一个单位的时间里，他可以开车到相邻的餐厅或将辣椒送到现在的餐馆。对于每家餐厅，我们都知道所需的辣椒数量 $A_i$。\n\n由于交付货物很累，Krešo 决定在交付和旅行上花费总共 $M$ 个单位的时间，之后他计划休息一下。\n\n确定 Krešo 在给定时间范围内可以提供的最大辣椒数量。你可以假设 Krešo 总是带有无限量的辣椒。", "inputFormat": "第一行输入包含两个整数 $N$ 和 $M$（$1 \\le N, M \\le 500$），餐馆数量和 Krešo 计划用于交付辣椒的时间。\n\n第二行输入包含 $N$ 个整数 $A_i$（$1 \\le A_i \\le 10^6$），用 $i$ 表示的餐馆所需的辣椒数量（$1 \\le i \\le N$）。\n\n以下 $N - 1$ 行中的每一行包含两个整数 $U$ 和 $V$（$1 \\le U, V \\le N$，$U \\ne V$），其表示餐馆 $U$ 和 $V$ 之间的道路。", "outputFormat": "您必须输出 Krešo 在给定时间范围内可以提供的最大量的辣椒。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5055", "type": "P", "difficulty": 6, "samples": [["10\n0 1 0 1\n1 1 1 2\n2 4 1 2\n3 1 2 0\n4 4 2 1\n5 3 5 7\n6 4 5 6\n4 1 7 1\n8 3 4 6\n9 4 4 1", "3\n4\n5\n10"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["平衡树", "可持久化", "模板题"], "title": "【模板】可持久化文艺平衡树", "background": "这是一道模板题。", "description": "您需要写一种数据结构，来维护一个序列，其中需要提供以下操作（**对于各个以往的历史版本**）：\n\n1. 在第 $p$ 个数后插入数 $x$。\n2. 删除第 $p$ 个数。\n3. 翻转区间 $[l,r]$，例如原序列是 $\\{5,4,3,2,1\\}$，翻转区间 $[2,4]$ 后，结果是 $\\{5,2,3,4,1\\}$。\n4. 查询区间 $[l,r]$ 中所有数的和。\n\n**和原本平衡树不同的一点是，每一次的任何操作都是基于某一个历史版本，同时生成一个新的版本（操作 $4$ 即保持原版本无变化），新版本即编号为此次操作的序号。**\n\n**本题强制在线。**", "inputFormat": "第一行包含一个整数 $n$，表示操作的总数。\n\n接下来 $n$ 行，每行前两个整数 $v_i, \\mathrm{opt}_i$，$v_i$ 表示基于的过去版本号（$0 \\le v_i < i$），$\\mathrm{opt}_i$ 表示操作的序号（$1 \\le \\mathrm{opt}_i \\le 4$）。\n\n若 $\\mathrm{opt}_i=1$，则接下来两个整数 $p_i, x_i$，表示操作为在第 $p_i$ 个数后插入数 $x$ 。  \n若 $\\mathrm{opt}_i=2$，则接下来一个整数 $p_i$，表示操作为删除第 $p_i$ 个数。  \n若 $\\mathrm{opt}_i=3$，则接下来两个整数 $l_i, r_i$，表示操作为翻转区间 $[l_i, r_i]$。  \n若 $\\mathrm{opt}_i=4$，则接下来两个整数 $l_i, r_i$，表示操作为查询区间 $[l_i, r_i]$ 的和。\n\n**强制在线规则：**  \n**令当前操作之前的最后一次 $4$ 操作的答案为 $lastans$（如果之前没有 $4$ 操作，则 $lastans=0$）。**  \n**则此次操作的 $p_i,x_i$ 或 $l_i,r_i$ 均按位异或上 $lastans$ 即可得到真实的 $p_i,x_i$ 或 $l_i,r_i$。**", "outputFormat": "对于每个序号为 $4$ 的查询操作，输出一行一个数表示区间的和。", "hint": ":::info[样例解释]\n样例明文：\n```\n10\n0 1 0 1\n1 1 1 2\n2 4 1 2\n3 1 1 3\n4 4 1 2\n5 3 1 3\n6 4 1 2\n4 1 2 4\n8 3 1 3\n9 4 1 4\n```\n完成所有操作后总共生成了 $11$ 个版本：\n\n版本 $0$（初始版本）：$\\varnothing$\n\n版本 $1$：$\\{1\\}$\n\n版本 $2$：$\\{1,2\\}$\n\n版本 $3$：$\\{1,2\\}$（这个操作查询区间 $\\left[1,2\\right]$ 的和，输出了 $3$。）\n\n版本 $4$：$\\{1,3,2\\}$\n\n版本 $5$：$\\{1,3,2\\}$（这个操作查询区间 $\\left[1,2\\right]$ 的和，输出了 $4$。）\n\n版本 $6$：$\\{2,3,1\\}$\n\n版本 $7$：$\\{2,3,1\\}$（这个操作查询区间 $\\left[1,2\\right]$ 的和，输出了 $5$。）\n\n版本 $8$：$\\{1,3,4,2\\}$\n\n版本 $9$：$\\{4,3,1,2\\}$\n\n版本 $10$：$\\{4,3,1,2\\}$（这个操作查询区间 $\\left[1,4\\right]$ 的和，输出了 $10$。）\n::::\n\n**强制在线：以下针对 $p_i, x_i, l_i, r_i$ 的限制均是按位异或 $lastans$ 后的限制。**\n\n- 对于 $6$ 个测试点，$n \\le 5000$。\n- 对于另外 $6$ 个测试点，$v_i = i - 1$。\n- 欢迎用户加强数据，可联系管理员或出题人。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times {10}^5$，$|x_i| < {10}^6$。\n\n假设基于的历史版本的序列长度为 $len \\ge 1$，有：  \n若 $\\mathrm{opt}_i=1$，则 $0 \\le p_i \\le len$。  \n若 $\\mathrm{opt}_i=2$，则 $1 \\le p_i \\le len$。  \n若 $\\mathrm{opt}_i=3$，则 $1 \\le l_i \\le r_i \\le len$。  \n若 $\\mathrm{opt}_i=4$，则 $1 \\le l_i \\le r_i \\le len$。\n\n假设基于的历史版本的序列长度为 $0$，有：  \n$\\mathrm{opt}_i=1$，$p_i=0$。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Persistent “Literary” Balanced Tree", "background": "This is a template problem.", "description": "You need to implement a data structure to maintain a sequence, supporting the following operations (**for every past historical version**):\n\n1. Insert a number $x$ after the $p$-th number.\n2. Delete the $p$-th number.\n3. Reverse the interval $[l,r]$. For example, if the original sequence is $\\{5,4,3,2,1\\}$, after reversing $[2,4]$, it becomes $\\{5,2,3,4,1\\}$.\n4. Query the sum of all numbers in the interval $[l,r]$.\n\n**Different from an ordinary balanced tree, every operation is performed based on some historical version, and generates a new version (operation $4$ keeps the original version unchanged). The new version is numbered as the index of this operation.**\n\n**This problem is strictly online.**", "inputFormat": "The first line contains an integer $n$, the total number of operations.\n\nThe next $n$ lines each start with two integers $v_i, \\mathrm{opt}_i$. Here, $v_i$ is the index of the past version it is based on ($0 \\le v_i < i$), and $\\mathrm{opt}_i$ is the operation type ($1 \\le \\mathrm{opt}_i \\le 4$).\n\nIf $\\mathrm{opt}_i=1$, then two more integers $p_i, x_i$ follow, meaning: insert number $x$ after the $p_i$-th number.  \nIf $\\mathrm{opt}_i=2$, then one more integer $p_i$ follows, meaning: delete the $p_i$-th number.  \nIf $\\mathrm{opt}_i=3$, then two more integers $l_i, r_i$ follow, meaning: reverse the interval $[l_i, r_i]$.  \nIf $\\mathrm{opt}_i=4$, then two more integers $l_i, r_i$ follow, meaning: query the sum of the interval $[l_i, r_i]$.\n\n**Strict online rule:**  \n**Let the answer of the last operation of type $4$ before the current operation be $lastans$ (if there is no previous type $4$ operation, then $lastans=0$).**  \n**Then $p_i,x_i$ or $l_i,r_i$ of this operation are each XORed bitwise with $lastans$ to obtain the real $p_i,x_i$ or $l_i,r_i$.**", "outputFormat": "For each query operation with type $4$, output one line with one number: the sum of the interval.", "hint": ":::info[Sample Explanation]\nThe sample input:\n```\n10\n0 1 0 1\n1 1 1 2\n2 4 1 2\n3 1 1 3\n4 4 1 2\n5 3 1 3\n6 4 1 2\n4 1 2 4\n8 3 1 3\n9 4 1 4\n```\nAfter all operations, a total of $11$ versions are generated:\n\nVersion $0$ (initial version): $\\varnothing$\n\nVersion $1$: $\\{1\\}$\n\nVersion $2$: $\\{1,2\\}$\n\nVersion $3$: $\\{1,2\\}$ (this operation queries the sum on $\\left[1,2\\right]$ and outputs $3$.)\n\nVersion $4$: $\\{1,3,2\\}$\n\nVersion $5$: $\\{1,3,2\\}$ (this operation queries the sum on $\\left[1,2\\right]$ and outputs $4$.)\n\nVersion $6$: $\\{2,3,1\\}$\n\nVersion $7$: $\\{2,3,1\\}$ (this operation queries the sum on $\\left[1,2\\right]$ and outputs $5$.)\n\nVersion $8$: $\\{1,3,4,2\\}$\n\nVersion $9$: $\\{4,3,1,2\\}$\n\nVersion $10$: $\\{4,3,1,2\\}$ (this operation queries the sum on $\\left[1,4\\right]$ and outputs $10$.)\n::::\n\n**Strict online: the following constraints on $p_i, x_i, l_i, r_i$ are after XORing with $lastans$.**\n\n- For $6$ test points, $n \\le 5000$.\n- For another $6$ test points, $v_i = i - 1$.\n- Users are welcome to strengthen the testdata. You may contact the administrator or the problem setter.\n\nFor $100\\%$ of the data, $1 \\le n \\le 2 \\times {10}^5$, $|x_i| < {10}^6$.\n\nAssume the sequence length of the referenced historical version is $len \\ge 1$, then:  \nIf $\\mathrm{opt}_i=1$, then $0 \\le p_i \\le len$.  \nIf $\\mathrm{opt}_i=2$, then $1 \\le p_i \\le len$.  \nIf $\\mathrm{opt}_i=3$, then $1 \\le l_i \\le r_i \\le len$.  \nIf $\\mathrm{opt}_i=4$, then $1 \\le l_i \\le r_i \\le len$.\n\nAssume the sequence length of the referenced historical version is $0$, then:  \n$\\mathrm{opt}_i=1$, $p_i=0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】可持久化文艺平衡树", "background": "这是一道模板题。", "description": "您需要写一种数据结构，来维护一个序列，其中需要提供以下操作（**对于各个以往的历史版本**）：\n\n1. 在第 $p$ 个数后插入数 $x$。\n2. 删除第 $p$ 个数。\n3. 翻转区间 $[l,r]$，例如原序列是 $\\{5,4,3,2,1\\}$，翻转区间 $[2,4]$ 后，结果是 $\\{5,2,3,4,1\\}$。\n4. 查询区间 $[l,r]$ 中所有数的和。\n\n**和原本平衡树不同的一点是，每一次的任何操作都是基于某一个历史版本，同时生成一个新的版本（操作 $4$ 即保持原版本无变化），新版本即编号为此次操作的序号。**\n\n**本题强制在线。**", "inputFormat": "第一行包含一个整数 $n$，表示操作的总数。\n\n接下来 $n$ 行，每行前两个整数 $v_i, \\mathrm{opt}_i$，$v_i$ 表示基于的过去版本号（$0 \\le v_i < i$），$\\mathrm{opt}_i$ 表示操作的序号（$1 \\le \\mathrm{opt}_i \\le 4$）。\n\n若 $\\mathrm{opt}_i=1$，则接下来两个整数 $p_i, x_i$，表示操作为在第 $p_i$ 个数后插入数 $x$ 。  \n若 $\\mathrm{opt}_i=2$，则接下来一个整数 $p_i$，表示操作为删除第 $p_i$ 个数。  \n若 $\\mathrm{opt}_i=3$，则接下来两个整数 $l_i, r_i$，表示操作为翻转区间 $[l_i, r_i]$。  \n若 $\\mathrm{opt}_i=4$，则接下来两个整数 $l_i, r_i$，表示操作为查询区间 $[l_i, r_i]$ 的和。\n\n**强制在线规则：**  \n**令当前操作之前的最后一次 $4$ 操作的答案为 $lastans$（如果之前没有 $4$ 操作，则 $lastans=0$）。**  \n**则此次操作的 $p_i,x_i$ 或 $l_i,r_i$ 均按位异或上 $lastans$ 即可得到真实的 $p_i,x_i$ 或 $l_i,r_i$。**", "outputFormat": "对于每个序号为 $4$ 的查询操作，输出一行一个数表示区间的和。", "hint": ":::info[样例解释]\n样例明文：\n```\n10\n0 1 0 1\n1 1 1 2\n2 4 1 2\n3 1 1 3\n4 4 1 2\n5 3 1 3\n6 4 1 2\n4 1 2 4\n8 3 1 3\n9 4 1 4\n```\n完成所有操作后总共生成了 $11$ 个版本：\n\n版本 $0$（初始版本）：$\\varnothing$\n\n版本 $1$：$\\{1\\}$\n\n版本 $2$：$\\{1,2\\}$\n\n版本 $3$：$\\{1,2\\}$（这个操作查询区间 $\\left[1,2\\right]$ 的和，输出了 $3$。）\n\n版本 $4$：$\\{1,3,2\\}$\n\n版本 $5$：$\\{1,3,2\\}$（这个操作查询区间 $\\left[1,2\\right]$ 的和，输出了 $4$。）\n\n版本 $6$：$\\{2,3,1\\}$\n\n版本 $7$：$\\{2,3,1\\}$（这个操作查询区间 $\\left[1,2\\right]$ 的和，输出了 $5$。）\n\n版本 $8$：$\\{1,3,4,2\\}$\n\n版本 $9$：$\\{4,3,1,2\\}$\n\n版本 $10$：$\\{4,3,1,2\\}$（这个操作查询区间 $\\left[1,4\\right]$ 的和，输出了 $10$。）\n::::\n\n**强制在线：以下针对 $p_i, x_i, l_i, r_i$ 的限制均是按位异或 $lastans$ 后的限制。**\n\n- 对于 $6$ 个测试点，$n \\le 5000$。\n- 对于另外 $6$ 个测试点，$v_i = i - 1$。\n- 欢迎用户加强数据，可联系管理员或出题人。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times {10}^5$，$|x_i| < {10}^6$。\n\n假设基于的历史版本的序列长度为 $len \\ge 1$，有：  \n若 $\\mathrm{opt}_i=1$，则 $0 \\le p_i \\le len$。  \n若 $\\mathrm{opt}_i=2$，则 $1 \\le p_i \\le len$。  \n若 $\\mathrm{opt}_i=3$，则 $1 \\le l_i \\le r_i \\le len$。  \n若 $\\mathrm{opt}_i=4$，则 $1 \\le l_i \\le r_i \\le len$。\n\n假设基于的历史版本的序列长度为 $0$，有：  \n$\\mathrm{opt}_i=1$，$p_i=0$。", "locale": "zh-CN"}}}
{"pid": "P5056", "type": "P", "difficulty": 7, "samples": [["4 4\n**..\n....\n....\n....", "2"], ["4 4\n....\n....\n....\n....", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["轮廓线 DP", "模板题"], "title": "【模板】插头 DP", "background": "ural 1519 \n\n陈丹琦《基于连通性状态压缩的动态规划问题》中的例题。", "description": "给出 $n\\times m$ 的方格，有些格子不能铺线，其它格子必须铺，形成一个闭合回路。问有多少种铺法？", "inputFormat": "第一行，两个整数，分别代表 $n,m$。\n\n从第二行到第 $(n+1)$ 行，每行有一个长度为 $m$ 的只含 `*` 和 `.` 的字符串，`*` 表不能铺线，`.` 表必须铺。", "outputFormat": "输出一行一个整数，表示总方案数。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n,m\\le 12$。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Plug DP.", "background": "ural 1519.\n\nAn example problem from Chen Danqi’s article *Dynamic Programming Problems Based on Connectivity State Compression*.", "description": "Given an $n\\times m$ grid, some cells cannot be used to place lines, and all other cells must be used to place lines, forming one closed loop. How many different ways are there to place the lines?", "inputFormat": "The first line contains two integers, representing $n$ and $m$.\n\nFrom the second line to the $(n+1)$-th line, each line contains a string of length $m$ consisting only of `*` and `.`, where `*` means you cannot place lines in this cell, and `.` means you must place lines in this cell.", "outputFormat": "Output one line with one integer, representing the total number of valid ways.", "hint": "#### Constraints\n\n- For $100\\%$ of the testdata, $2\\le n,m\\le 12$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】插头 DP", "background": "ural 1519 \n\n陈丹琦《基于连通性状态压缩的动态规划问题》中的例题。", "description": "给出 $n\\times m$ 的方格，有些格子不能铺线，其它格子必须铺，形成一个闭合回路。问有多少种铺法？", "inputFormat": "第一行，两个整数，分别代表 $n,m$。\n\n从第二行到第 $(n+1)$ 行，每行有一个长度为 $m$ 的只含 `*` 和 `.` 的字符串，`*` 表不能铺线，`.` 表必须铺。", "outputFormat": "输出一行一个整数，表示总方案数。", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n,m\\le 12$。", "locale": "zh-CN"}}}
{"pid": "P5057", "type": "P", "difficulty": 4, "samples": [["20 10\n1 1 10\n2 6\n2 12\n1 5 12\n2 6\n2 15\n1 6 16\n1 11 17\n2 12\n2 6", "1\n0\n0\n0\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2006", "重庆", "线段树", "各省省选", "树状数组"], "title": "[CQOI2006] 简单题", "background": "", "description": "有一个 $n$ 个元素的数组，每个元素初始均为 $0$。有 $m$ 条指令，每条指令为两种操作中的一种：\n1. 让其中一段连续序列数字反转；（即 $0$ 变 $1$，$1$ 变 $0$）\n2. 询问某个元素的值。\n\n例如当 $n=20$ 时，$10$ 条指令如下：\n\n![](https://cdn.luogu.com.cn/upload/pic/44663.png)\n", "inputFormat": "第一行包含两个整数 $n,m$，表示数组的长度和指令的条数。\n\n接下来 $m$ 行，每行的第一个数 $t$ 表示操作的种类：\n\n* 若 $t=1$，则接下来有两个数 $L,R$，表示反转区间 $[L,R]$ 的每个数；\n* 若 $t=2$，则接下来只有一个数 $i$，表示询问的下标。", "outputFormat": "每个操作 $2$ 输出一行（非 $0$ 即 $1$），表示每次操作 $2$ 的回答。", "hint": "对于 $50\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le m \\le 10^4$；\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le m \\le 5 \\times 10^5$，保证 $L \\le R$。", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2006] Simple Problem", "background": "", "description": "There is an array with $n$ elements, and each element is initially $0$. There are $m$ instructions, and each instruction is one of the following two operations:\n\n1. Flip all numbers in a continuous segment. (That is, $0$ becomes $1$, and $1$ becomes $0$.)\n2. Query the value of a certain element.\n\nFor example, when $n=20$, the $10$ instructions are as follows:\n\n![](https://cdn.luogu.com.cn/upload/pic/44663.png)", "inputFormat": "The first line contains two integers $n, m$, representing the length of the array and the number of instructions.\n\nIn the next $m$ lines, the first number is $t$, representing the type of operation:\n\n- If $t = 1$, then two numbers $L, R$ follow, meaning to flip every number in the interval $[L, R]$.\n- If $t = 2$, then only one number $i$ follows, meaning to query the index.", "outputFormat": "For each operation $2$, output one line (either $0$ or $1$), representing the answer to that query.", "hint": "For $50\\%$ of the testdata, $1 \\le n \\le 10^3$, $1 \\le m \\le 10^4$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 5 \\times 10^5$, and it is guaranteed that $L \\le R$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2006] 简单题", "background": "", "description": "有一个 $n$ 个元素的数组，每个元素初始均为 $0$。有 $m$ 条指令，每条指令为两种操作中的一种：\n1. 让其中一段连续序列数字反转；（即 $0$ 变 $1$，$1$ 变 $0$）\n2. 询问某个元素的值。\n\n例如当 $n=20$ 时，$10$ 条指令如下：\n\n![](https://cdn.luogu.com.cn/upload/pic/44663.png)\n", "inputFormat": "第一行包含两个整数 $n,m$，表示数组的长度和指令的条数。\n\n接下来 $m$ 行，每行的第一个数 $t$ 表示操作的种类：\n\n* 若 $t=1$，则接下来有两个数 $L,R$，表示反转区间 $[L,R]$ 的每个数；\n* 若 $t=2$，则接下来只有一个数 $i$，表示询问的下标。", "outputFormat": "每个操作 $2$ 输出一行（非 $0$ 即 $1$），表示每次操作 $2$ 的回答。", "hint": "对于 $50\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le m \\le 10^4$；\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le m \\le 5 \\times 10^5$，保证 $L \\le R$。", "locale": "zh-CN"}}}
{"pid": "P5058", "type": "P", "difficulty": 5, "samples": [["5\n2 1\n2 5\n1 4\n5 3\n2 3\n5 1\n0 0\n4 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2004", "各省省选", "浙江", "Tarjan", "双连通分量"], "title": "[ZJOI2004] 嗅探器", "background": "", "description": "某军搞信息对抗实战演习，红军成功地侵入了蓝军的内部网络。\n\n蓝军共有两个信息中心，红军计划在某台中间服务器上安装一个嗅探器，从而能够侦听到两个信息中心互相交换的所有信息。\n\n但是蓝军的网络相当的庞大，数据包从一个信息中心传到另一个信息中心可以不止有一条通路。\n\n现在需要你尽快地解决这个问题，应该把嗅探器安装在哪个中间服务器上才能保证所有的数据包都能被捕获？", "inputFormat": "输入文件的第一行一个整数 $n$，表示蓝军网络中服务器的数目。\n\n接下来若干行是对蓝军网络的拓扑结构描述，每行是两个整数 $i,j$ 表示编号为 $i$ 和编号为 $j$ 的两台服务器间存在双向连接。\n\n服务器的编号从 $1$ 开始，一行两个 $0$ 表示网络的拓扑结构描述结束，再接下来是两个整数 $a,b$ 分别表示两个中心服务器的编号。", "outputFormat": "输出满足条件的服务器编号。如果有多个解输出编号最小的一个，如果找不到任何解，输出 `No solution`。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 2 \\times 10^5$，边数不超过 $5 \\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2004] Sniffer", "background": "", "description": "In an information warfare exercise, the Red side successfully broke into the Blue side’s internal network.\n\nThe Blue side has two information centers. The Red side plans to install a sniffer on some intermediate server so that it can listen to all information exchanged between the two information centers.\n\nHowever, the Blue side’s network is very large, and packets can travel from one information center to the other through more than one path.\n\nNow you need to solve this problem as quickly as possible: on which intermediate server should the sniffer be installed to ensure that all packets can be captured?", "inputFormat": "The first line contains an integer $n$, which is the number of servers in the Blue side’s network.\n\nThe next several lines describe the network topology. Each line contains two integers $i, j$, meaning there is a bidirectional connection between server $i$ and server $j$.\n\nServer IDs start from $1$. A line with two $0$ indicates the end of the topology description. After that, there are two integers $a, b$, which are the IDs of the two center servers.", "outputFormat": "Output the ID of a server that satisfies the requirement. If there are multiple solutions, output the one with the smallest ID. If no solution can be found, output `No solution`.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 2 \\times 10^5$, and the number of edges does not exceed $5 \\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2004] 嗅探器", "background": "", "description": "某军搞信息对抗实战演习，红军成功地侵入了蓝军的内部网络。\n\n蓝军共有两个信息中心，红军计划在某台中间服务器上安装一个嗅探器，从而能够侦听到两个信息中心互相交换的所有信息。\n\n但是蓝军的网络相当的庞大，数据包从一个信息中心传到另一个信息中心可以不止有一条通路。\n\n现在需要你尽快地解决这个问题，应该把嗅探器安装在哪个中间服务器上才能保证所有的数据包都能被捕获？", "inputFormat": "输入文件的第一行一个整数 $n$，表示蓝军网络中服务器的数目。\n\n接下来若干行是对蓝军网络的拓扑结构描述，每行是两个整数 $i,j$ 表示编号为 $i$ 和编号为 $j$ 的两台服务器间存在双向连接。\n\n服务器的编号从 $1$ 开始，一行两个 $0$ 表示网络的拓扑结构描述结束，再接下来是两个整数 $a,b$ 分别表示两个中心服务器的编号。", "outputFormat": "输出满足条件的服务器编号。如果有多个解输出编号最小的一个，如果找不到任何解，输出 `No solution`。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 2 \\times 10^5$，边数不超过 $5 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P5059", "type": "P", "difficulty": 5, "samples": [["1 10007", "0"], ["2 1000000000", "1"], ["7 1000000000", "612231936"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2018", "矩阵加速"], "title": "中国象棋", "background": "gjm 非常喜欢研究棋类问题，最近，他在钻研中国象棋 QwQ", "description": "现在，gjm 脑海里有一个 $N \\times N$ 的棋盘，其上共有 $N \\times N$ 个格子， gjm 开始在棋盘上的格点上摆放卒，已知卒仅会攻击往左边一个格点和往右边一个格点上的棋子，现在 gjm 开始在棋盘上摆放任意多个卒，满足：\n\n1. 每一行都至少摆放有两个卒\n2. 任意两个卒都不会互相攻击\n\ngjm 现在想知道，满足上述条件，有多少种摆放卒的方案？由于答案可能很大，你只需输出方案数对 $P$ 取模的结果即可。\n\n两种方案被认为不同当且仅当存在同一格点的摆放情况不同。", "inputFormat": "一行两个正整数，分别为 $N$ 和 $P$。", "outputFormat": "一行一个整数，即在 $N \\times N$ 棋盘中摆放卒的方案数对 $P$ 取模的结果 。", "hint": "**样例1解释**\n\n很明显没有方案\n\n**样例2解释**（$0$ 表示格点上无卒，$1$ 表示格点上有卒）\n\n仅有一种方案：\n\n$1$ $0$ $1$\n\n$1$ $0$ $1$\n\n$1$ $0$ $1$\n\n该样例以及解释无误\n\n**样例3解释**\n太大了无法列出所有方案，故不予解释\n\n对于 $20\\%$ 的数据，$N≤100$，$P≤10^{9}$\n\n对于 $50\\%$ 的数据，$N≤10^5$，$P≤10^{9}$\n\n对于 $100\\%$ 的数据 ，$N≤10^{18}$，$P≤10^{18}$\n\nBy：学无止境", "locale": "zh-CN", "translations": {"en": {"title": "Chinese Chess.", "background": "gjm really likes studying board game problems. Recently, he has been researching Chinese chess QwQ.", "description": "Now, in gjm’s mind there is an $N \\times N$ chessboard, with a total of $N \\times N$ cells. gjm starts placing pawns on the grid points of the board. It is known that a pawn only attacks pieces on the grid point one step to its left and one step to its right. Now gjm places any number of pawns on the board, satisfying:\n\n1. Each row has at least two pawns placed.\n2. No two pawns attack each other.\n\ngjm now wants to know: how many pawn placement schemes satisfy the above conditions? Since the answer may be very large, you only need to output the number of schemes modulo $P$.\n\nTwo schemes are considered different if and only if there exists at least one grid point where the placement differs.", "inputFormat": "One line with two positive integers, $N$ and $P$.", "outputFormat": "One line with one integer, the number of pawn placement schemes on an $N \\times N$ board modulo $P$.", "hint": "**Explanation for Sample 1**\n\nObviously, there is no valid scheme.\n\n**Explanation for Sample 2** ($0$ means no pawn on the grid point, $1$ means there is a pawn on the grid point.)\n\nThere is only one scheme:\n\n$1$ $0$ $1$\n\n$1$ $0$ $1$\n\n$1$ $0$ $1$\n\nThis sample and its explanation are correct.\n\n**Explanation for Sample 3**\n\nIt is too large to list all schemes, so no explanation is given.\n\nConstraints:\n\nFor $20\\%$ of the testdata, $N \\le 100$, $P \\le 10^{9}$.\n\nFor $50\\%$ of the testdata, $N \\le 10^5$, $P \\le 10^{9}$.\n\nFor $100\\%$ of the testdata, $N \\le 10^{18}$, $P \\le 10^{18}$.\n\nBy: Endless Learning.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "中国象棋", "background": "gjm 非常喜欢研究棋类问题，最近，他在钻研中国象棋 QwQ", "description": "现在，gjm 脑海里有一个 $N \\times N$ 的棋盘，其上共有 $N \\times N$ 个格子， gjm 开始在棋盘上的格点上摆放卒，已知卒仅会攻击往左边一个格点和往右边一个格点上的棋子，现在 gjm 开始在棋盘上摆放任意多个卒，满足：\n\n1. 每一行都至少摆放有两个卒\n2. 任意两个卒都不会互相攻击\n\ngjm 现在想知道，满足上述条件，有多少种摆放卒的方案？由于答案可能很大，你只需输出方案数对 $P$ 取模的结果即可。\n\n两种方案被认为不同当且仅当存在同一格点的摆放情况不同。", "inputFormat": "一行两个正整数，分别为 $N$ 和 $P$。", "outputFormat": "一行一个整数，即在 $N \\times N$ 棋盘中摆放卒的方案数对 $P$ 取模的结果 。", "hint": "**样例1解释**\n\n很明显没有方案\n\n**样例2解释**（$0$ 表示格点上无卒，$1$ 表示格点上有卒）\n\n仅有一种方案：\n\n$1$ $0$ $1$\n\n$1$ $0$ $1$\n\n$1$ $0$ $1$\n\n该样例以及解释无误\n\n**样例3解释**\n太大了无法列出所有方案，故不予解释\n\n对于 $20\\%$ 的数据，$N≤100$，$P≤10^{9}$\n\n对于 $50\\%$ 的数据，$N≤10^5$，$P≤10^{9}$\n\n对于 $100\\%$ 的数据 ，$N≤10^{18}$，$P≤10^{18}$\n\nBy：学无止境", "locale": "zh-CN"}}}
{"pid": "P5060", "type": "P", "difficulty": 4, "samples": [["2 2 3 1 2\n1 2 1\n2 2 1", "3\n1->2->2->2"], ["4 6 3 2 3\n2 1 7\n2 4 0\n4 3 6\n1 4 0 \n2 3 1\n2 3 9", "6\n2->4->3"], ["3 3 5 1 3\n1 2 15\n2 3 7\n1 3 3 ", "jjc fails in travelling"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "最短路"], "title": "旅行", "background": "$jjc$ 非常喜欢旅行~~（smy）~~！\n\n", "description": "**$NOIP$ $2018$** 已经结束了，$jjc$ 决定去全国各地旅行，每个地方都有许多巨佬，他拥有一张地图来帮助他规划一条从 $A $ 地 到 $B $ 地 的路线，地图上有 $N $ 个地点编号为 $1$~$N$ ，有 $ M $ 条道路将不同(或相同)地点有向连通。\n\n现在，$jjc$ 已经知道了通过第 $ i $ 条路从 $u_i $ 地 直接走到 $v_i $ 地 会遇到多少名巨佬，他将记录遇见的每一名巨佬的名字（不管是否记录过）。但是，每记录一名巨佬的名字就需要使用一张便签，便签以袋为单位出售，$jjc$ 选购的便签每一小袋有 $P$ 张。$jjc$ 不希望他购买的便签被浪费，因此他希望他旅程结束后他购买的每一袋便签都 **恰好** 被用完。除此以外，$jjc$ 正在存钱来$......QwQ$，他得减少消费，因此他希望这次旅行能消耗尽量少的便签。\n\n然而，他不知道怎么才能找到最合适的路径，作为巨佬中的一员，你能帮 $jjc $ 解决这个问题，找到符合条件的最佳路径吗？\n", "inputFormat": "第一行，给出五个整数，依次是$N$、$M$、$P$、起点$A$的编号、终点$B$的编号 \n\n从第二行到第$M+1$行描述道路的信息，每行三个整数，依次是第$i$条道路连接的两个地点的起点编号$u_i$、终点编号$v_i$ 及这条道路上会遇见的巨佬数量$num_i$", "outputFormat": "若存在满足条件路线，请输出两行，第一行一个整数，表示选择最佳路径上会遇见的巨佬总数，第二行输出从起点$A$到终点$B$的最佳路径的详细路线，数据保证答案是唯一的。\n\n若无满足条件的路线 ，请输出一行一个字符串“$jjc$ $fails$ $in$ $travelling$” $($不含引号$)$", "hint": "本题有 $ 3 $ 个 $ Subtask $\n\n对$30$%的数据，$2≤N≤100$ ，$2≤M≤5000$ ，$1≤P≤50$\n\n对另外$20$%的数据 ，$ 2≤N≤5×10^4$，$M≤2×10^5$，$P=1$\n\n对另外$50$%的数据 ，$ 2≤N≤5×10^4$，$M≤2×10^5$，$1≤P≤50$ \n\n对于所有数据，$1≤A,B,u_i,v_i≤N$，$0≤num_i≤10^8 $  \n\n$By : $ 学无止境", "locale": "zh-CN", "translations": {"en": {"title": "Travel", "background": "$jjc$ really likes traveling ~~(smy)~~!", "description": "**$NOIP$ $2018$** has ended, and $jjc$ decided to travel around the country. Each place has many “big shots”. He has a map to help him plan a route from location $A$ to location $B$. The map has $N$ locations numbered from $1$ to $N$, and there are $M$ directed roads connecting different (or the same) locations.\n\nNow, $jjc$ already knows how many “big shots” he will meet when taking the $i$-th road directly from $u_i$ to $v_i$. He will write down the name of every “big shot” he meets (no matter whether the name has been written down before). However, each time he writes down one name, he needs to use one sticky note. Sticky notes are sold in bags, and each small bag that $jjc$ buys contains $P$ notes. $jjc$ does not want any sticky notes he buys to be wasted, so he wants every bag of notes he buys to be used up **exactly** when the trip ends. Besides that, $jjc$ is saving money for $......QwQ$, so he needs to spend less. Therefore, he wants this trip to use as few sticky notes as possible.\n\nHowever, he does not know how to find the best route. As one of the “big shots”, can you help $jjc$ solve this problem and find the optimal path that satisfies the conditions?", "inputFormat": "The first line contains five integers, in order: $N$, $M$, $P$, the index of the start point $A$, and the index of the end point $B$.\n\nLines $2$ to $M+1$ describe the roads. Each line contains three integers: the start point index $u_i$ and end point index $v_i$ of the $i$-th road, and the number of “big shots” met on this road $num_i$.", "outputFormat": "If there exists a route that satisfies the conditions, output two lines. The first line contains one integer, the total number of “big shots” met on the chosen optimal path. The second line outputs the detailed route of the optimal path from $A$ to $B$. The testdata guarantees that the answer is unique.\n\nIf no such route exists, output one line containing the string “$jjc$ $fails$ $in$ $travelling$” (without quotes).", "hint": "This problem has $3$ subtasks.\n\nFor $30\\%$ of the testdata: $2 \\le N \\le 100$, $2 \\le M \\le 5000$, $1 \\le P \\le 50$.\n\nFor another $20\\%$ of the testdata: $2 \\le N \\le 5 \\times 10^4$, $M \\le 2 \\times 10^5$, $P = 1$.\n\nFor another $50\\%$ of the testdata: $2 \\le N \\le 5 \\times 10^4$, $M \\le 2 \\times 10^5$, $1 \\le P \\le 50$.\n\nFor all testdata: $1 \\le A, B, u_i, v_i \\le N$, $0 \\le num_i \\le 10^8$.\n\n$By : $ Never Stop Learning.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "旅行", "background": "$jjc$ 非常喜欢旅行~~（smy）~~！\n\n", "description": "**$NOIP$ $2018$** 已经结束了，$jjc$ 决定去全国各地旅行，每个地方都有许多巨佬，他拥有一张地图来帮助他规划一条从 $A $ 地 到 $B $ 地 的路线，地图上有 $N $ 个地点编号为 $1$~$N$ ，有 $ M $ 条道路将不同(或相同)地点有向连通。\n\n现在，$jjc$ 已经知道了通过第 $ i $ 条路从 $u_i $ 地 直接走到 $v_i $ 地 会遇到多少名巨佬，他将记录遇见的每一名巨佬的名字（不管是否记录过）。但是，每记录一名巨佬的名字就需要使用一张便签，便签以袋为单位出售，$jjc$ 选购的便签每一小袋有 $P$ 张。$jjc$ 不希望他购买的便签被浪费，因此他希望他旅程结束后他购买的每一袋便签都 **恰好** 被用完。除此以外，$jjc$ 正在存钱来$......QwQ$，他得减少消费，因此他希望这次旅行能消耗尽量少的便签。\n\n然而，他不知道怎么才能找到最合适的路径，作为巨佬中的一员，你能帮 $jjc $ 解决这个问题，找到符合条件的最佳路径吗？\n", "inputFormat": "第一行，给出五个整数，依次是$N$、$M$、$P$、起点$A$的编号、终点$B$的编号 \n\n从第二行到第$M+1$行描述道路的信息，每行三个整数，依次是第$i$条道路连接的两个地点的起点编号$u_i$、终点编号$v_i$ 及这条道路上会遇见的巨佬数量$num_i$", "outputFormat": "若存在满足条件路线，请输出两行，第一行一个整数，表示选择最佳路径上会遇见的巨佬总数，第二行输出从起点$A$到终点$B$的最佳路径的详细路线，数据保证答案是唯一的。\n\n若无满足条件的路线 ，请输出一行一个字符串“$jjc$ $fails$ $in$ $travelling$” $($不含引号$)$", "hint": "本题有 $ 3 $ 个 $ Subtask $\n\n对$30$%的数据，$2≤N≤100$ ，$2≤M≤5000$ ，$1≤P≤50$\n\n对另外$20$%的数据 ，$ 2≤N≤5×10^4$，$M≤2×10^5$，$P=1$\n\n对另外$50$%的数据 ，$ 2≤N≤5×10^4$，$M≤2×10^5$，$1≤P≤50$ \n\n对于所有数据，$1≤A,B,u_i,v_i≤N$，$0≤num_i≤10^8 $  \n\n$By : $ 学无止境", "locale": "zh-CN"}}}
{"pid": "P5061", "type": "P", "difficulty": 6, "samples": [["4 4\n3 4\n1 2\n2 4\n2 3", "2 0\n0"], ["10 2\n1 7\n3 5\n", "-1\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2018", "Special Judge"], "title": "秘密任务", "background": ">飞雪连天射白鹿，笑书神侠倚碧鸳。\n\n>谨纪念金庸先生。\n\n 但是这与本题没有联系。\n", "description": "wgr 是 $R$ 国军队总指挥官。现在，他决定组织两个小队分别去执行两个秘密任务。\n\nwgr 将派出 $N$ 名战士来执行这两个任务，他们的编号为 $1 \\sim N$ 。由于任务无比重要，wgr 需要使派出的队伍配合绝对默契 。配合绝对默契指队伍中**任何**两名战士的配合都是默契的。同时，他还需要使两个队伍的战斗力差距尽可能小，队伍的战斗力定义为 $F=2^{k}$，$k$ 为队伍的人数，不允许有人剩余。\n\nwgr 已经知道哪些战士之间的配合是默契的，但由于时间紧迫，wgr 来不及慢慢整理资料了，现在，他请你以最快的速度帮他完成资料的整理，并告诉他：\n\n1. 一共有多少种不同的分组方案。两种方案被认为是不同的当且仅当其两支队伍战斗力差值不同。\n2. 所有分组方案中，最小的战斗力差值是多少，由于这个差值可能很大，请对  $10^9+7$ 取模后再输出。\n3. 有多少对战士配合默契但是不可能被分在同一小组。\n\n**注意：** 特别地，由于队伍的默契程度十分重要，一支队伍 $N$ 名战士另一支队伍 $0$ 名战士也是合法的分组方案。\n", "inputFormat": "第一行两个正整数 $N,M$。 \n\n接下来 $M$ 行每行两个正整数 $x,y$，表示编号为 $x$ 的战士与编号为 $y$ 的战士之间配合默契。\n", "outputFormat": "输出共两行。\n\n第一行，如果存在合法的方案，输出一行两个数，为分组方案数与最小的战斗力差值模 $10^9+7$ 的结果；如果不存在合法的分组方案，第一行输出一个数 $-1$ 即可。\n\n第二行，输出一个整数，表示有多少对战士配合默契但是不可能被分在同一小组。", "hint": "本题共有三个 Subtask。\n\n- Subtask 1：共 $5$ 个测试点，一个测试点 $5$ 分，满足 $N≤30$；\n- Subtask 2：共 $3$ 个测试点，一个测试点 $10$ 分，满足 $N≤300$；\n- Subtask 3：共 $3$ 个测试点，一个测试点 $15$ 分，满足 $N≤2500$。 \n\n对于所有的数据，不会重复说明同一组关系，$1\\le x,y\\le  n$ 且 $x\\neq y$。此外保证 $0\\le m≤n\\times (n-1)/2$。\n\n\n本题开启 Special Judge：\n\n- 若你的答案第一行输出正确你可以得到该测试点 $60\\%$ 的分数；\n- 若你的答案第二行输出正确你可以得到该测试点 $40\\%$ 的分数。\n\n为了确保你能够得到部分分，**请按格式要求输出**。\n", "locale": "zh-CN", "translations": {"en": {"title": "Secret Mission", "background": ">Snow flies across the sky as arrows shoot at the white deer; smiling, I write of heroes leaning on green mandarin ducks.\n\n>In memory of Mr. Jin Yong.\n\nHowever, this has nothing to do with this problem.", "description": "wgr is the commander-in-chief of the army of country $R$. Now, he decides to organize two squads to carry out two secret missions.\n\nwgr will send $N$ soldiers to do these two missions, numbered $1 \\sim N$. Since the missions are extremely important, wgr needs the dispatched squads to have perfect cooperation. Perfect cooperation means that **any** two soldiers within the same squad cooperate well with each other. At the same time, he wants the difference in combat power between the two squads to be as small as possible. The combat power of a squad is defined as $F=2^{k}$, where $k$ is the number of soldiers in the squad. No one is allowed to be left unassigned.\n\nwgr already knows which pairs of soldiers cooperate well, but due to time pressure, he cannot organize the information carefully. He asks you to help him finish organizing the information as fast as possible, and tell him:\n\n1. How many different grouping plans are there in total. Two plans are considered different if and only if the difference in combat power between the two squads is different.\n2. Among all grouping plans, what is the minimum combat power difference. Since this difference may be very large, output it modulo $10^9+7$.\n3. How many pairs of soldiers cooperate well but can never be assigned to the same squad.\n\n**Note:** In particular, since squad cooperation is extremely important, a plan where one squad has $N$ soldiers and the other squad has $0$ soldiers is also a valid grouping plan.", "inputFormat": "The first line contains two positive integers $N,M$.\n\nThe next $M$ lines each contain two positive integers $x,y$, meaning that soldier $x$ and soldier $y$ cooperate well with each other.", "outputFormat": "Output consists of two lines.\n\nOn the first line, if there exists a valid plan, output two numbers: the number of grouping plans and the minimum combat power difference modulo $10^9+7$. If no valid plan exists, output a single number $-1$ on the first line.\n\nOn the second line, output one integer: the number of pairs of soldiers who cooperate well but can never be assigned to the same squad.", "hint": "This problem has three subtasks.\n\n- Subtask 1: $5$ test points, $5$ points each, with $N \\le 30$.\n- Subtask 2: $3$ test points, $10$ points each, with $N \\le 300$.\n- Subtask 3: $3$ test points, $15$ points each, with $N \\le 2500$.\n\nFor all testdata, the same relationship will not be given repeatedly. $1 \\le x,y \\le n$ and $x \\neq y$. Also, it is guaranteed that $0 \\le m \\le n \\times (n-1)/2$.\n\nThis problem uses a Special Judge.\n\n- If the output on the first line is correct, you can get $60\\%$ of the score for that test point.\n- If the output on the second line is correct, you can get $40\\%$ of the score for that test point.\n\nTo make sure you can get partial points, **please output according to the required format**.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "秘密任务", "background": ">飞雪连天射白鹿，笑书神侠倚碧鸳。\n\n>谨纪念金庸先生。\n\n 但是这与本题没有联系。\n", "description": "wgr 是 $R$ 国军队总指挥官。现在，他决定组织两个小队分别去执行两个秘密任务。\n\nwgr 将派出 $N$ 名战士来执行这两个任务，他们的编号为 $1 \\sim N$ 。由于任务无比重要，wgr 需要使派出的队伍配合绝对默契 。配合绝对默契指队伍中**任何**两名战士的配合都是默契的。同时，他还需要使两个队伍的战斗力差距尽可能小，队伍的战斗力定义为 $F=2^{k}$，$k$ 为队伍的人数，不允许有人剩余。\n\nwgr 已经知道哪些战士之间的配合是默契的，但由于时间紧迫，wgr 来不及慢慢整理资料了，现在，他请你以最快的速度帮他完成资料的整理，并告诉他：\n\n1. 一共有多少种不同的分组方案。两种方案被认为是不同的当且仅当其两支队伍战斗力差值不同。\n2. 所有分组方案中，最小的战斗力差值是多少，由于这个差值可能很大，请对  $10^9+7$ 取模后再输出。\n3. 有多少对战士配合默契但是不可能被分在同一小组。\n\n**注意：** 特别地，由于队伍的默契程度十分重要，一支队伍 $N$ 名战士另一支队伍 $0$ 名战士也是合法的分组方案。\n", "inputFormat": "第一行两个正整数 $N,M$。 \n\n接下来 $M$ 行每行两个正整数 $x,y$，表示编号为 $x$ 的战士与编号为 $y$ 的战士之间配合默契。\n", "outputFormat": "输出共两行。\n\n第一行，如果存在合法的方案，输出一行两个数，为分组方案数与最小的战斗力差值模 $10^9+7$ 的结果；如果不存在合法的分组方案，第一行输出一个数 $-1$ 即可。\n\n第二行，输出一个整数，表示有多少对战士配合默契但是不可能被分在同一小组。", "hint": "本题共有三个 Subtask。\n\n- Subtask 1：共 $5$ 个测试点，一个测试点 $5$ 分，满足 $N≤30$；\n- Subtask 2：共 $3$ 个测试点，一个测试点 $10$ 分，满足 $N≤300$；\n- Subtask 3：共 $3$ 个测试点，一个测试点 $15$ 分，满足 $N≤2500$。 \n\n对于所有的数据，不会重复说明同一组关系，$1\\le x,y\\le  n$ 且 $x\\neq y$。此外保证 $0\\le m≤n\\times (n-1)/2$。\n\n\n本题开启 Special Judge：\n\n- 若你的答案第一行输出正确你可以得到该测试点 $60\\%$ 的分数；\n- 若你的答案第二行输出正确你可以得到该测试点 $40\\%$ 的分数。\n\n为了确保你能够得到部分分，**请按格式要求输出**。\n", "locale": "zh-CN"}}}
{"pid": "P5062", "type": "P", "difficulty": 6, "samples": [["10\n2 5\n1 3\n1 4\n2 3\n2 4\n2 5\n1 4\n2 3\n2 4\n2 5", "0\n0\n2\n3\n0\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "平衡树", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2014] 在太阳西斜的这个世界里", "background": "![](https://cdn.luogu.com.cn/upload/pic/45500.png)  \n现在我的梦想实现了 也留下了美好的回忆  \n可以说没有任何遗憾了吧   \n![](https://cdn.luogu.com.cn/upload/pic/45511.png)  \n今天真是多谢你了  \n让我体验了许多美好  \n这全都是托你的福   \n我留下了如同美梦一般的回忆 不过时间到了  \n最后我还想拜托你一件事  \n![](https://cdn.luogu.com.cn/upload/pic/45522.png)  \n希望你可以把我忘掉  ", "description": "珂朵莉需要维护一棵初始为空的红黑树，进行 $n$ 次操作。\n\n对于重复的整数，我们认为插入时间晚的一个更小。\n\n操作有两类：\n\n* $op=1$：在红黑树上插入一个整数$x$。\n* $op=2$：给出 $x$，询问从 $1$ 到 $x$ 的整数中等概率选取一个插入到红黑树上，造成的旋转次数的期望值，方便起见，你只要输出 期望值$\\times x$，（可以证明这是一个整数）。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个由空格分隔的整数 $op,x$，表示一次操作。\n", "outputFormat": "对每个 $op=2$ 的操作，输出一行，包含一个整数，表示答案。", "hint": "红黑树是一棵二叉查找树，每个点有颜色（红/黑）。\n\n每次执行插入操作时，新插入的点为红色，操作方式和普通二叉查找树相同。\n\n如果出现两个红色的点互为父子，如图进行调整（操作是左右对称的，对称操作在图中不再重复列出；黑色三角形表示空或以黑色点为根的子树），调整可能需要连续进行多次。\n\n调整完毕后，把根设为黑色。\n\n![](https://cdn.luogu.com.cn/upload/pic/45533.png)  \n\nIdea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n$1\\leq n\\leq 2\\times 10^5$，$1\\leq op\\leq 2$，$1\\leq x\\leq 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2014] In This World Where the Sun Slants West", "background": "![](https://cdn.luogu.com.cn/upload/pic/45500.png)  \nNow my dream has come true, and I have also留下了美好的回忆 (liú xià le měi hǎo de huí yì).  \nYou could say there are no regrets at all.  \n![](https://cdn.luogu.com.cn/upload/pic/45511.png)  \nThank you so much for today.  \nYou let me experience so many wonderful things.  \nAll of this is thanks to you.  \nI have memories like a beautiful dream, but the time has come.  \nFinally, I want to ask you for one more favor.  \n![](https://cdn.luogu.com.cn/upload/pic/45522.png)  \nI hope you can forget me.", "description": "Chtholly needs to maintain a red-black tree that is initially empty, and perform $n$ operations.\n\nFor duplicate integers, we consider the one inserted later to be smaller.\n\nThere are two types of operations:\n\n* $op=1$: Insert an integer $x$ into the red-black tree.\n* $op=2$: Given $x$, suppose we choose an integer uniformly at random from $1$ to $x$ and insert it into the red-black tree. Query the expected number of rotations caused by this insertion. For convenience, you only need to output $\\text{expected value} \\times x$ (it can be proven that this is an integer).", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain two integers $op,x$ separated by a space, representing one operation.", "outputFormat": "For each operation with $op=2$, output one line containing one integer, which is the answer.", "hint": "A red-black tree is a binary search tree where each node has a color (red/black).\n\nEach time an insertion is performed, the newly inserted node is red, and the insertion process is the same as in a normal binary search tree.\n\nIf two red nodes become a parent-child pair, adjust as shown in the figure (the operations are left-right symmetric, and symmetric cases are not repeated in the figure; the black triangle represents null or a subtree rooted at a black node). The adjustment may need to be performed multiple times in a row.\n\nAfter the adjustment, set the root to black.\n\n![](https://cdn.luogu.com.cn/upload/pic/45533.png)  \n\nIdea: ccz181078, Solution: ccz181078, Code: ccz181078, Data: ccz181078\n\nConstraints: $1\\leq n\\leq 2\\times 10^5$，$1\\leq op\\leq 2$，$1\\leq x\\leq 10^8$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2014] 在太阳西斜的这个世界里", "background": "![](https://cdn.luogu.com.cn/upload/pic/45500.png)  \n现在我的梦想实现了 也留下了美好的回忆  \n可以说没有任何遗憾了吧   \n![](https://cdn.luogu.com.cn/upload/pic/45511.png)  \n今天真是多谢你了  \n让我体验了许多美好  \n这全都是托你的福   \n我留下了如同美梦一般的回忆 不过时间到了  \n最后我还想拜托你一件事  \n![](https://cdn.luogu.com.cn/upload/pic/45522.png)  \n希望你可以把我忘掉  ", "description": "珂朵莉需要维护一棵初始为空的红黑树，进行 $n$ 次操作。\n\n对于重复的整数，我们认为插入时间晚的一个更小。\n\n操作有两类：\n\n* $op=1$：在红黑树上插入一个整数$x$。\n* $op=2$：给出 $x$，询问从 $1$ 到 $x$ 的整数中等概率选取一个插入到红黑树上，造成的旋转次数的期望值，方便起见，你只要输出 期望值$\\times x$，（可以证明这是一个整数）。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个由空格分隔的整数 $op,x$，表示一次操作。\n", "outputFormat": "对每个 $op=2$ 的操作，输出一行，包含一个整数，表示答案。", "hint": "红黑树是一棵二叉查找树，每个点有颜色（红/黑）。\n\n每次执行插入操作时，新插入的点为红色，操作方式和普通二叉查找树相同。\n\n如果出现两个红色的点互为父子，如图进行调整（操作是左右对称的，对称操作在图中不再重复列出；黑色三角形表示空或以黑色点为根的子树），调整可能需要连续进行多次。\n\n调整完毕后，把根设为黑色。\n\n![](https://cdn.luogu.com.cn/upload/pic/45533.png)  \n\nIdea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n$1\\leq n\\leq 2\\times 10^5$，$1\\leq op\\leq 2$，$1\\leq x\\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P5063", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 3 9\n2 1 2 1\n2 1 3 1", "1\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "二分", "O2优化", "排序", "分块", "Ynoi"], "title": "[Ynoi Easy Round 2014] 置身天上之森", "background": "![](https://cdn.luogu.com.cn/upload/pic/45593.png)  \n如果，我是说如果  \n我再过五天就会死掉的话  \n你可以再温柔的对待我一点吗？  \n![](https://cdn.luogu.com.cn/upload/pic/45555.png)  \n运气真好  \n牺牲我一个就可以了  \n怎么样，就是这么一回事   \n![](https://cdn.luogu.com.cn/upload/pic/45566.png)  \n你现在愿意答应我最后的愿望吗？  \n那个...就是...比如说...对了  \n![](https://cdn.luogu.com.cn/upload/pic/45577.png)  \n让你吻我之类的  \n你愿意吗 \n![](https://cdn.luogu.com.cn/upload/pic/45586.png)  \n在自己消失之前  \n心怀不想消失的愿望  \n希望让某个人记住我   \n希望能留下羁绊  \n我这么希望着，又有什么不可以的吗  \n![](https://cdn.luogu.com.cn/upload/pic/45501.png)  ", "description": "线段树是一种特殊的二叉树，满足以下性质：  \n每个点和一个区间对应，且有一个整数权值；  \n根节点对应的区间是 $[1,n]$；  \n如果一个点对应的区间是 $[l,r]$，且 $l<r$，那么它的左孩子和右孩子分别对应区间 $[l,m]$ 和 $[m+1,r]$，其中 $m=\\lfloor\\frac{l+r}{2}\\rfloor$；  \n如果一个点对应的区间是 $[l,r]$，且 $l=r$，那么这个点是叶子；\n如果一个点不是叶子，那么它的权值等于左孩子和右孩子的权值之和。  \n珂朵莉需要维护一棵线段树，叶子的权值初始为 $0$，接下来会进行 $m$ 次操作:  \n操作 $1$：给出 $l,r,a$，对每个 $x$（$l\\leq x\\leq r$），将 $[x,x]$ 对应的叶子的权值加上 $a$，非叶节点的权值相应变化；  \n操作 $2$：给出 $l,r,a$，询问有多少个线段树上的点，满足这个点对应的区间被 $[l,r]$ 包含，且权值小于等于 $a$。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行包含四个整数 $op,l,r,a$，表示一次操作，其中 $op$ 表示操作类型。\n", "outputFormat": "对每个 $op=2$ 的操作，输出一行，包含一个整数，表示答案", "hint": "Idea：zcysky，\n\nSolution：nzhtl1477( $O( m\\sqrt{n\\log n})$ solution )，ccz181078( $O( m\\sqrt{n})$ solution )\n\nCode：nzhtl1477( $O( m\\sqrt{n} \\log n)$ code )，ccz181078( $O( m\\sqrt{n\\log n})$ code )，\n\nData：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq l\\leq r\\leq n$，$1\\leq op\\leq 2$，$-10^5\\leq a\\leq 10^5$。  \n", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2014] In the Forest Above the Sky", "background": "![](https://cdn.luogu.com.cn/upload/pic/45593.png)  \nIf, I mean if,  \nI were going to die in five more days,  \ncould you treat me a bit more gently?  \n![](https://cdn.luogu.com.cn/upload/pic/45555.png)  \nSuch good luck.  \nSacrificing only me will be enough.  \nThat is how it is.  \n![](https://cdn.luogu.com.cn/upload/pic/45566.png)  \nAre you willing to grant my last wish now?  \nUm... well... for example... right.  \n![](https://cdn.luogu.com.cn/upload/pic/45577.png)  \nLike letting you kiss me.  \nWould you?  \n![](https://cdn.luogu.com.cn/upload/pic/45586.png)  \nBefore I disappear,  \nI hold the wish that I do not want to disappear.  \nI hope someone will remember me.  \nI hope to leave behind a bond.  \nI wish for this—what is wrong with that?  \n![](https://cdn.luogu.com.cn/upload/pic/45501.png)", "description": "A segment tree is a special binary tree that satisfies the following properties:  \nEach node corresponds to an interval and has an integer weight.  \nThe interval corresponding to the root is $[1,n]$.  \nIf a node corresponds to interval $[l,r]$ and $l<r$, then its left child and right child correspond to intervals $[l,m]$ and $[m+1,r]$, where $m=\\lfloor\\frac{l+r}{2}\\rfloor$.  \nIf a node corresponds to interval $[l,r]$ and $l=r$, then this node is a leaf.  \nIf a node is not a leaf, then its weight equals the sum of the weights of its left child and right child.  \n\nChtholly (ke duo li, 珂朵莉) needs to maintain a segment tree. The initial weights of the leaves are $0$. Then $m$ operations will be performed:  \n\nOperation $1$: given $l,r,a$, for every $x$ ($l\\leq x\\leq r$), add $a$ to the weight of the leaf corresponding to $[x,x]$, and the weights of non-leaf nodes change accordingly.  \n\nOperation $2$: given $l,r,a$, ask how many nodes in the segment tree satisfy that the interval corresponding to this node is contained in $[l,r]$, and its weight is less than or equal to $a$.", "inputFormat": "The first line contains two integers $n,m$.  \n\nIn the next $m$ lines, each line contains four integers $op,l,r,a$, representing one operation, where $op$ indicates the operation type.", "outputFormat": "For each operation with $op=2$, output one line containing one integer, which is the answer.", "hint": "Idea: zcysky.  \n\nSolution: nzhtl1477 ( $O( m\\sqrt{n\\log n})$ solution ), ccz181078 ( $O( m\\sqrt{n})$ solution ).  \n\nCode: nzhtl1477 ( $O( m\\sqrt{n} \\log n)$ code ), ccz181078 ( $O( m\\sqrt{n\\log n})$ code ).  \n\nData: nzhtl1477.  \n\nConstraints: for $100\\%$ of the testdata, $1\\leq n,m\\leq 10^5$, $1\\leq l\\leq r\\leq n$, $1\\leq op\\leq 2$, $-10^5\\leq a\\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2014] 置身天上之森", "background": "![](https://cdn.luogu.com.cn/upload/pic/45593.png)  \n如果，我是说如果  \n我再过五天就会死掉的话  \n你可以再温柔的对待我一点吗？  \n![](https://cdn.luogu.com.cn/upload/pic/45555.png)  \n运气真好  \n牺牲我一个就可以了  \n怎么样，就是这么一回事   \n![](https://cdn.luogu.com.cn/upload/pic/45566.png)  \n你现在愿意答应我最后的愿望吗？  \n那个...就是...比如说...对了  \n![](https://cdn.luogu.com.cn/upload/pic/45577.png)  \n让你吻我之类的  \n你愿意吗 \n![](https://cdn.luogu.com.cn/upload/pic/45586.png)  \n在自己消失之前  \n心怀不想消失的愿望  \n希望让某个人记住我   \n希望能留下羁绊  \n我这么希望着，又有什么不可以的吗  \n![](https://cdn.luogu.com.cn/upload/pic/45501.png)  ", "description": "线段树是一种特殊的二叉树，满足以下性质：  \n每个点和一个区间对应，且有一个整数权值；  \n根节点对应的区间是 $[1,n]$；  \n如果一个点对应的区间是 $[l,r]$，且 $l<r$，那么它的左孩子和右孩子分别对应区间 $[l,m]$ 和 $[m+1,r]$，其中 $m=\\lfloor\\frac{l+r}{2}\\rfloor$；  \n如果一个点对应的区间是 $[l,r]$，且 $l=r$，那么这个点是叶子；\n如果一个点不是叶子，那么它的权值等于左孩子和右孩子的权值之和。  \n珂朵莉需要维护一棵线段树，叶子的权值初始为 $0$，接下来会进行 $m$ 次操作:  \n操作 $1$：给出 $l,r,a$，对每个 $x$（$l\\leq x\\leq r$），将 $[x,x]$ 对应的叶子的权值加上 $a$，非叶节点的权值相应变化；  \n操作 $2$：给出 $l,r,a$，询问有多少个线段树上的点，满足这个点对应的区间被 $[l,r]$ 包含，且权值小于等于 $a$。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行包含四个整数 $op,l,r,a$，表示一次操作，其中 $op$ 表示操作类型。\n", "outputFormat": "对每个 $op=2$ 的操作，输出一行，包含一个整数，表示答案", "hint": "Idea：zcysky，\n\nSolution：nzhtl1477( $O( m\\sqrt{n\\log n})$ solution )，ccz181078( $O( m\\sqrt{n})$ solution )\n\nCode：nzhtl1477( $O( m\\sqrt{n} \\log n)$ code )，ccz181078( $O( m\\sqrt{n\\log n})$ code )，\n\nData：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq l\\leq r\\leq n$，$1\\leq op\\leq 2$，$-10^5\\leq a\\leq 10^5$。  \n", "locale": "zh-CN"}}}
{"pid": "P5064", "type": "P", "difficulty": 6, "samples": [["6 10\n816801151 223885531 110182151 94271893 319888699 106363731 \n1 1 3\n1 3 5\n1 2 4\n1 4 6\n1 1 2\n3 1 1\n2 4\n1 1 2\n3 1 4\n2 7", "94271893\n223885531"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480, 20480]}, "tags": ["2014", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2014] 等这场战争结束之后", "background": "我真的能变强吗？\n![](https://cdn.luogu.com.cn/upload/pic/45502.png)  \n【就算你不愿意，我也会逼你变强】  \n那么承蒙你的一片美意，我就直说了吧    \n![](https://cdn.luogu.com.cn/upload/pic/45503.png)  \n那个嘛...  \n我才不想变强呢~！   \n【那这样吧，只要你从战场上活着回来】  \n【我可以答应你随便一个要求，随便什么都行】   \n诶？  \n![](https://cdn.luogu.com.cn/upload/pic/45504.png)  \n【结婚什么的当然免谈啦】  \n你说什么都行的...  \n![](https://cdn.luogu.com.cn/upload/pic/45505.png)  \n点心...  \n你之前不是在食堂做了点心吗  \n那么黄油蛋糕你会做吗  \n![](https://cdn.luogu.com.cn/upload/pic/45506.png)  \n我的姐姐...也就是前辈们当中  \n有一个人每次从战场上活着回来之后  \n都会一脸陶醉地品尝黄油蛋糕  \n所以...拜托你了  \n【偏偏挑这个...】  \n【没问题，我会让你吃到吐的】  \n【所以，你一定要活着回来】  ", "description": "给你一个图，每个点有点权，最开始没有边。\n\n有一些操作：\n\n1. 添加一条 $x$ 与 $y$ 之间的双向边。\n2. 回到第 $x$ 次操作后的状态（注意这里的 $x$ 可以是 $0$，即回到初始状态）。\n3. 查询 $x$ 所在联通块能到的点中点权第 $y$ 小的值，如果不存在，那么输出 $-1$。", "inputFormat": "第一行输入两个整数 $n,m$，表示有 $n$ 个点，$m$ 个操作。\n\n之后一行 $n$ 个数，表示每个点的点权。\n\n之后 $m$ 行，每行有三种可能的操作：\n\n`1 x y`\n\n`2 x`\n\n`3 x y`\n\n意义见题面。", "outputFormat": "对所有 $3$ 的操作，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，\n\nSolution：nzhtl1477( $O( nm/w )$ Time , $O( n\\log n )$ Space )，ccz181078( $O( m\\sqrt{n\\log n} )$ Time ，$O(n\\sqrt{n\\log n} )$ Space ) ，shadowice1984( $O( m\\sqrt{n\\log n} )$ Time , $O( n\\log n )$ Space ) , zx2003( $O( m\\sqrt{n} )$ Time ，$O( n )$ Space )\n\nCode：nzhtl1477( $O( nm/w )$ Time , $O( n\\log n )$ Space )，ccz181078( $O( m\\sqrt{n\\log n} )$ Time , $O( n\\sqrt{n\\log n} )$ Space ) ，shadowice1984( $O( m\\sqrt{n\\log n} )$ Time ，$O( n\\log n )$ Space )，zx2003( $O( m\\sqrt{n} )$ Time ，$O( n )$ Space )\n\nData：nzhtl1477( partially uploaded )\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$0\\leq a_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2014] After This War Ends", "background": "Can I really become stronger?  \n![](https://cdn.luogu.com.cn/upload/pic/45502.png)  \n【Even if you don’t want to, I will force you to become stronger.】  \nThen, thanks for your kindness, I’ll say it directly.  \n![](https://cdn.luogu.com.cn/upload/pic/45503.png)  \nWell...  \nI don’t want to become stronger at all~!  \n【Then how about this: as long as you come back alive from the battlefield.】  \n【I can promise you any one request, anything at all.】  \nHuh?  \n![](https://cdn.luogu.com.cn/upload/pic/45504.png)  \n【Marriage is of course out of the question.】  \nYou said anything...  \n![](https://cdn.luogu.com.cn/upload/pic/45505.png)  \nDesserts...  \nDidn’t you make desserts in the cafeteria before?  \nThen, can you make butter cake?  \n![](https://cdn.luogu.com.cn/upload/pic/45506.png)  \nMy older sister... that is, among the seniors,  \nthere is someone who, every time she comes back alive from the battlefield,  \nwill taste butter cake with a blissful look on her face.  \nSo... please.  \n【Of all things, you picked this...】  \n【No problem. I’ll make you eat until you throw up.】  \n【So, you must come back alive.】", "description": "You are given a graph. Each vertex has a weight, and initially there are no edges.\n\nThere are some operations:\n\n1. Add an undirected edge between $x$ and $y$.\n2. Revert to the state after the $x$-th operation (note that $x$ can be $0$, which means reverting to the initial state).\n3. Query the $y$-th smallest vertex weight among the vertices reachable in the connected component containing $x$. If it does not exist, output $-1$.", "inputFormat": "The first line contains two integers $n,m$, meaning there are $n$ vertices and $m$ operations.\n\nThe next line contains $n$ numbers, giving the weight of each vertex.\n\nThen follow $m$ lines, each being one of the following three types:\n\n`1 x y`\n\n`2 x`\n\n`3 x y`\n\nTheir meanings are as described in the statement.", "outputFormat": "For every operation of type $3$, output one line containing one integer, which is the answer.", "hint": "Idea: nzhtl1477.\n\nSolution: nzhtl1477( $O( nm/w )$ Time , $O( n\\log n )$ Space )，ccz181078( $O( m\\sqrt{n\\log n} )$ Time ，$O(n\\sqrt{n\\log n} )$ Space ) ，shadowice1984( $O( m\\sqrt{n\\log n} )$ Time , $O( n\\log n )$ Space ) , zx2003( $O( m\\sqrt{n} )$ Time ，$O( n )$ Space ).\n\nCode: nzhtl1477( $O( nm/w )$ Time , $O( n\\log n )$ Space )，ccz181078( $O( m\\sqrt{n\\log n} )$ Time , $O( n\\sqrt{n\\log n} )$ Space ) ，shadowice1984( $O( m\\sqrt{n\\log n} )$ Time ，$O( n\\log n )$ Space )，zx2003( $O( m\\sqrt{n} )$ Time ，$O( n )$ Space ).\n\nData: nzhtl1477( partially uploaded ).\n\nConstraints: for $100\\%$ of the testdata, $1\\leq n,m\\leq 10^5$ and $0\\leq a_i\\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2014] 等这场战争结束之后", "background": "我真的能变强吗？\n![](https://cdn.luogu.com.cn/upload/pic/45502.png)  \n【就算你不愿意，我也会逼你变强】  \n那么承蒙你的一片美意，我就直说了吧    \n![](https://cdn.luogu.com.cn/upload/pic/45503.png)  \n那个嘛...  \n我才不想变强呢~！   \n【那这样吧，只要你从战场上活着回来】  \n【我可以答应你随便一个要求，随便什么都行】   \n诶？  \n![](https://cdn.luogu.com.cn/upload/pic/45504.png)  \n【结婚什么的当然免谈啦】  \n你说什么都行的...  \n![](https://cdn.luogu.com.cn/upload/pic/45505.png)  \n点心...  \n你之前不是在食堂做了点心吗  \n那么黄油蛋糕你会做吗  \n![](https://cdn.luogu.com.cn/upload/pic/45506.png)  \n我的姐姐...也就是前辈们当中  \n有一个人每次从战场上活着回来之后  \n都会一脸陶醉地品尝黄油蛋糕  \n所以...拜托你了  \n【偏偏挑这个...】  \n【没问题，我会让你吃到吐的】  \n【所以，你一定要活着回来】  ", "description": "给你一个图，每个点有点权，最开始没有边。\n\n有一些操作：\n\n1. 添加一条 $x$ 与 $y$ 之间的双向边。\n2. 回到第 $x$ 次操作后的状态（注意这里的 $x$ 可以是 $0$，即回到初始状态）。\n3. 查询 $x$ 所在联通块能到的点中点权第 $y$ 小的值，如果不存在，那么输出 $-1$。", "inputFormat": "第一行输入两个整数 $n,m$，表示有 $n$ 个点，$m$ 个操作。\n\n之后一行 $n$ 个数，表示每个点的点权。\n\n之后 $m$ 行，每行有三种可能的操作：\n\n`1 x y`\n\n`2 x`\n\n`3 x y`\n\n意义见题面。", "outputFormat": "对所有 $3$ 的操作，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，\n\nSolution：nzhtl1477( $O( nm/w )$ Time , $O( n\\log n )$ Space )，ccz181078( $O( m\\sqrt{n\\log n} )$ Time ，$O(n\\sqrt{n\\log n} )$ Space ) ，shadowice1984( $O( m\\sqrt{n\\log n} )$ Time , $O( n\\log n )$ Space ) , zx2003( $O( m\\sqrt{n} )$ Time ，$O( n )$ Space )\n\nCode：nzhtl1477( $O( nm/w )$ Time , $O( n\\log n )$ Space )，ccz181078( $O( m\\sqrt{n\\log n} )$ Time , $O( n\\sqrt{n\\log n} )$ Space ) ，shadowice1984( $O( m\\sqrt{n\\log n} )$ Time ，$O( n\\log n )$ Space )，zx2003( $O( m\\sqrt{n} )$ Time ，$O( n )$ Space )\n\nData：nzhtl1477( partially uploaded )\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$0\\leq a_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P5065", "type": "P", "difficulty": 6, "samples": [["2 3\n0 2 \n2 3\n1 1 1\n2 3", "-1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2014] 不归之人与望眼欲穿的人们", "background": "【第一船队发来联络了】  \n【是关于第15号悬浮岛的战斗结果】  \n【15号悬浮岛的保卫作战...】  \n【失败了...】  \n![](https://cdn.luogu.com.cn/upload/pic/45508.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45509.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45510.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45512.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45513.png)   \n![](https://cdn.luogu.com.cn/upload/pic/45514.png)  ", "description": "珂朵莉给了你一个序列，支持单点修改，或者询问满足区间 or 和**大于等于**一个数的区间的最短可能长度，无解输出 $-1$。", "inputFormat": "第一行有两个整数 $n,m$。\n\n接下来一行 $n$ 个整数，表示这个序列 $a$。\n\n接下来 $m$ 行，形如：\n\n* $1\\ i\\ x$ 表示将 $a_i$ 修改为 $x$。\n* $2\\ k$ 表示询问最短的一个长度，满足存在一个该长度的区间，其 or 和 $\\geq k$。  ", "outputFormat": "对所有 $2$ 操作，输出一行，包含一个整数，表示答案，无解输出 $-1$。", "hint": "Idea：kczno1，\n\nSolution：kczno1( $O( m\\sqrt n\\log a )$ solution )，liu_cheng_ao($O( m\\log^2 n\\log^2 a$ ) solution )，142857cs($O( m\\log n\\log^2 a$ ) solution )\n\nCode：kczno1( $O( m\\sqrt n\\log a )$ code )，liu_cheng_ao($O( m\\log^2 n\\log^2a$ ) code )\n\n，Data：kczno1\n\n对于 $100\\%$ 的数据，$0\\leq a_i,k\\leq 2^{30}$，$1\\leq n,m\\leq 5\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2014] The People Who Never Return and the People Who Wait in Vain.", "background": "【The First Fleet has sent a message】  \n【It is about the battle result of Floating Island No. 15】  \n【The defense operation of Floating Island No. 15...】  \n【Has failed...】  \n![](https://cdn.luogu.com.cn/upload/pic/45508.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45509.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45510.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45512.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45513.png)   \n![](https://cdn.luogu.com.cn/upload/pic/45514.png)", "description": "Chtholly gives you a sequence. It supports point updates, and queries asking for the minimum possible length of an interval whose bitwise OR sum is **greater than or equal to** a given number. If there is no solution, output $-1$.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe next line contains $n$ integers, representing the sequence $a$.\n\nThe next $m$ lines are in one of the following forms:\n\n* $1\\ i\\ x$: set $a_i$ to $x$.\n* $2\\ k$: query the minimum length such that there exists an interval of that length whose bitwise OR sum is $\\geq k$.", "outputFormat": "For every operation of type $2$, output one line containing an integer, the answer. If there is no solution, output $-1$.", "hint": "Idea: kczno1.\n\nSolution: kczno1 ($O( m\\sqrt n\\log a )$ solution), liu_cheng_ao ($O( m\\log^2 n\\log^2 a )$ solution), 142857cs ($O( m\\log n\\log^2 a )$ solution).\n\nCode: kczno1 ($O( m\\sqrt n\\log a )$ code), liu_cheng_ao ($O( m\\log^2 n\\log^2a$ ) code).\n\nData: kczno1.\n\nConstraints: For $100\\%$ of the testdata, $0\\leq a_i, k\\leq 2^{30}$, $1\\leq n, m\\leq 5\\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2014] 不归之人与望眼欲穿的人们", "background": "【第一船队发来联络了】  \n【是关于第15号悬浮岛的战斗结果】  \n【15号悬浮岛的保卫作战...】  \n【失败了...】  \n![](https://cdn.luogu.com.cn/upload/pic/45508.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45509.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45510.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45512.png)  \n![](https://cdn.luogu.com.cn/upload/pic/45513.png)   \n![](https://cdn.luogu.com.cn/upload/pic/45514.png)  ", "description": "珂朵莉给了你一个序列，支持单点修改，或者询问满足区间 or 和**大于等于**一个数的区间的最短可能长度，无解输出 $-1$。", "inputFormat": "第一行有两个整数 $n,m$。\n\n接下来一行 $n$ 个整数，表示这个序列 $a$。\n\n接下来 $m$ 行，形如：\n\n* $1\\ i\\ x$ 表示将 $a_i$ 修改为 $x$。\n* $2\\ k$ 表示询问最短的一个长度，满足存在一个该长度的区间，其 or 和 $\\geq k$。  ", "outputFormat": "对所有 $2$ 操作，输出一行，包含一个整数，表示答案，无解输出 $-1$。", "hint": "Idea：kczno1，\n\nSolution：kczno1( $O( m\\sqrt n\\log a )$ solution )，liu_cheng_ao($O( m\\log^2 n\\log^2 a$ ) solution )，142857cs($O( m\\log n\\log^2 a$ ) solution )\n\nCode：kczno1( $O( m\\sqrt n\\log a )$ code )，liu_cheng_ao($O( m\\log^2 n\\log^2a$ ) code )\n\n，Data：kczno1\n\n对于 $100\\%$ 的数据，$0\\leq a_i,k\\leq 2^{30}$，$1\\leq n,m\\leq 5\\times 10^4$。", "locale": "zh-CN"}}}
