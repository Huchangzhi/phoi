{"pid": "P4781", "type": "P", "difficulty": 5, "samples": [["3 100\n1 4\n2 9\n3 16", "10201"], ["3 100\n1 1\n2 2\n3 3", "100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["O2优化", "拉格朗日插值法", "模板题"], "title": "【模板】拉格朗日插值", "background": "这是一道模板题。", "description": "对于 $n$ 个点 $(x_i,y_i)$，如果满足 $\\forall i\\neq j, x_i\\neq x_j$，那么经过这 $n$ 个点可以唯一地确定一个 $n-1$ 次多项式 $y = f(x)$。\n\n现在，给定这样 $n$ 个点，请你确定这个 $n-1$ 次多项式，并求出 $f(k) \\bmod 998244353$ 的值。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $x_i,y_i$。", "outputFormat": "一行一个整数，表示 $f(k) \\bmod 998244353$ 的值。", "hint": "样例一中的多项式为 $f(x)=x^2+2x+1$，$f(100) = 10201$。\n\n样例二中的多项式为 $f(x)=x$，$f(100) = 100$。\n\n---\n\n$1 \\le n \\leq 2\\times 10^3$，$1 \\le x_i,y_i,k < 998244353$，$x_i$ 两两不同。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Lagrange Interpolation", "background": "This is a template problem.", "description": "For $n$ points $(x_i, y_i)$, if $\\forall i \\neq j, x_i \\neq x_j$, then these $n$ points uniquely determine a polynomial $y = f(x)$ of degree $n - 1$.\n\nNow, given such $n$ points, please determine this degree $n - 1$ polynomial and compute the value of $f(k) \\bmod 998244353$.", "inputFormat": "The first line contains two integers $n, k$.\n\nThe next $n$ lines each contain two integers $x_i, y_i$ on the $i$-th line.", "outputFormat": "Output one integer in one line, representing the value of $f(k) \\bmod 998244353$.", "hint": "In Sample 1, the polynomial is $f(x) = x^2 + 2x + 1$, and $f(100) = 10201$.\n\nIn Sample 2, the polynomial is $f(x) = x$, and $f(100) = 100$.\n\n---\n\nConstraints: $1 \\le n \\le 2 \\times 10^3$, $1 \\le x_i, y_i, k < 998244353$, and all $x_i$ are pairwise distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】拉格朗日插值", "background": "这是一道模板题。", "description": "对于 $n$ 个点 $(x_i,y_i)$，如果满足 $\\forall i\\neq j, x_i\\neq x_j$，那么经过这 $n$ 个点可以唯一地确定一个 $n-1$ 次多项式 $y = f(x)$。\n\n现在，给定这样 $n$ 个点，请你确定这个 $n-1$ 次多项式，并求出 $f(k) \\bmod 998244353$ 的值。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $x_i,y_i$。", "outputFormat": "一行一个整数，表示 $f(k) \\bmod 998244353$ 的值。", "hint": "样例一中的多项式为 $f(x)=x^2+2x+1$，$f(100) = 10201$。\n\n样例二中的多项式为 $f(x)=x$，$f(100) = 100$。\n\n---\n\n$1 \\le n \\leq 2\\times 10^3$，$1 \\le x_i,y_i,k < 998244353$，$x_i$ 两两不同。", "locale": "zh-CN"}}}
{"pid": "P4782", "type": "P", "difficulty": 5, "samples": [["3 1\n1 1 3 0", "POSSIBLE\n0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "Special Judge", "O2优化", "2-SAT", "强连通分量", "模板题"], "title": "【模板】2-SAT", "background": null, "description": "有 $n$ 个布尔变量 $x_1\\sim x_n$，另有 $m$ 个需要满足的条件，每个条件的形式都是 「$x_i$ 为 `true` / `false` 或 $x_j$ 为 `true` / `false`」。比如 「$x_1$ 为真或 $x_3$ 为假」、「$x_7$ 为假或 $x_2$ 为假」。\n\n2-SAT 问题的目标是给每个变量赋值使得所有条件得到满足。", "inputFormat": "第一行两个整数 $n$ 和 $m$，意义如题面所述。\n\n接下来 $m$ 行每行 $4$ 个整数 $i$, $a$, $j$, $b$，表示 「$x_i$ 为 $a$ 或 $x_j$ 为 $b$」($a, b\\in \\{0,1\\}$)", "outputFormat": "如无解，输出 `IMPOSSIBLE`；\n\n否则输出 `POSSIBLE`，下一行 $n$ 个整数 $x_1\\sim x_n$（$x_i\\in\\{0,1\\}$），表示构造出的解。", "hint": "$1\\leq n, m\\leq 10^6$ , 前 $3$ 个点卡小错误，后面 $5$ 个点卡效率。\n\n由于数据随机生成，可能会含有 10 0 10 0 之类的坑，但按照最常规写法的写的标程没有出错，各个数据点卡什么的提示在标程里。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] 2-SAT", "background": "", "description": "There are $n$ Boolean variables $x_1\\sim x_n$, and $m$ constraints that must be satisfied. Each constraint has the form: “$x_i$ is `true` / `false` or $x_j$ is `true` / `false`”. For example, “$x_1$ is true or $x_3$ is false”, “$x_7$ is false or $x_2$ is false”.\n\nThe goal of the 2-SAT problem is to assign a value to each variable so that all constraints are satisfied.", "inputFormat": "The first line contains two integers $n$ and $m$, with the meanings as described above.\n\nThe next $m$ lines each contain four integers $i$, $a$, $j$, $b$, meaning “$x_i$ is $a$ or $x_j$ is $b” ($a, b\\in \\{0,1\\}$).", "outputFormat": "If there is no solution, output `IMPOSSIBLE`.\n\nOtherwise output `POSSIBLE`, and on the next line output $n$ integers $x_1\\sim x_n$ ($x_i\\in\\{0,1\\}$), representing a constructed solution.", "hint": "$1\\leq n, m\\leq 10^6$. The first $3$ test points check for small mistakes, and the remaining $5$ test points check efficiency.\n\nSince the testdata is generated randomly, it may contain tricky cases such as `10 0 10 0`, but the official solution written in the most standard way did not make mistakes. The hints about what each test point is checking are in the official solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】2-SAT", "background": null, "description": "有 $n$ 个布尔变量 $x_1\\sim x_n$，另有 $m$ 个需要满足的条件，每个条件的形式都是 「$x_i$ 为 `true` / `false` 或 $x_j$ 为 `true` / `false`」。比如 「$x_1$ 为真或 $x_3$ 为假」、「$x_7$ 为假或 $x_2$ 为假」。\n\n2-SAT 问题的目标是给每个变量赋值使得所有条件得到满足。", "inputFormat": "第一行两个整数 $n$ 和 $m$，意义如题面所述。\n\n接下来 $m$ 行每行 $4$ 个整数 $i$, $a$, $j$, $b$，表示 「$x_i$ 为 $a$ 或 $x_j$ 为 $b$」($a, b\\in \\{0,1\\}$)", "outputFormat": "如无解，输出 `IMPOSSIBLE`；\n\n否则输出 `POSSIBLE`，下一行 $n$ 个整数 $x_1\\sim x_n$（$x_i\\in\\{0,1\\}$），表示构造出的解。", "hint": "$1\\leq n, m\\leq 10^6$ , 前 $3$ 个点卡小错误，后面 $5$ 个点卡效率。\n\n由于数据随机生成，可能会含有 10 0 10 0 之类的坑，但按照最常规写法的写的标程没有出错，各个数据点卡什么的提示在标程里。", "locale": "zh-CN"}}}
{"pid": "P4783", "type": "P", "difficulty": 5, "samples": [["3\n1 2 8\n2 5 6\n5 1 2", "718750005 718750005 968750007\n171875001 671875005 296875002\n117187501 867187506 429687503"], ["3\n3 2 4\n7 2 9\n2 4 3", "No Solution"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "高斯消元", "模板题"], "title": "【模板】矩阵求逆", "background": "", "description": "求一个 $N\\times N$ 的矩阵的逆矩阵。答案对 ${10}^9+7$ 取模。", "inputFormat": "第一行有一个整数 $N$，代表矩阵的大小；\n\n接下来 $N$ 行，每行 $N$ 个整数，其中第 $i$ 行第 $j$ 列的数代表矩阵中的元素 $a_{i j}$。", "outputFormat": "若矩阵可逆，则输出 $N$ 行，每行 $N$ 个整数，其中第 $i$ 行第 $j$ 列的数代表逆矩阵中的元素 $b_{i j}$，答案对 ${10}^9+7$ 取模；\n\n否则只输出一行 `No Solution`。", "hint": "对 $30 \\%$ 的数据有 $N\\le 100$；  \n对 $100 \\%$ 的数据有 $N\\le 400$，所有 $0 \\le a_{i j} < {10}^9 + 7$。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Matrix Inversion", "background": "", "description": "Find the inverse matrix of an $N\\times N$ matrix. Output the answer modulo ${10}^9+7$.", "inputFormat": "The first line contains an integer $N$, which represents the size of the matrix.\n\nThe next $N$ lines each contain $N$ integers. The number in row $i$ and column $j$ represents the element $a_{i j}$ of the matrix.", "outputFormat": "If the matrix is invertible, output $N$ lines, each containing $N$ integers. The number in row $i$ and column $j$ represents the element $b_{i j}$ of the inverse matrix, taken modulo ${10}^9+7$.\n\nOtherwise, output only one line: `No Solution`.", "hint": "For $30\\%$ of the testdata, $N\\le 100$.\n\nFor $100\\%$ of the testdata, $N\\le 400$, and all $0 \\le a_{i j} < {10}^9 + 7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】矩阵求逆", "background": "", "description": "求一个 $N\\times N$ 的矩阵的逆矩阵。答案对 ${10}^9+7$ 取模。", "inputFormat": "第一行有一个整数 $N$，代表矩阵的大小；\n\n接下来 $N$ 行，每行 $N$ 个整数，其中第 $i$ 行第 $j$ 列的数代表矩阵中的元素 $a_{i j}$。", "outputFormat": "若矩阵可逆，则输出 $N$ 行，每行 $N$ 个整数，其中第 $i$ 行第 $j$ 列的数代表逆矩阵中的元素 $b_{i j}$，答案对 ${10}^9+7$ 取模；\n\n否则只输出一行 `No Solution`。", "hint": "对 $30 \\%$ 的数据有 $N\\le 100$；  \n对 $100 \\%$ 的数据有 $N\\le 400$，所有 $0 \\le a_{i j} < {10}^9 + 7$。", "locale": "zh-CN"}}}
{"pid": "P4784", "type": "P", "difficulty": 6, "samples": [["4 3 6\n1 3 4\n1 2 4\n1 3 9\n1 4 6\n2 3 2\n2 4 5\n3 4 8", "11"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "枚举", "最短路", "生成树", "BalticOI（波罗的海）", "状压 DP"], "title": "[BalticOI 2016] 城市 (Day2)", "background": "", "description": "在 Byteland 有 $n$ 个城市，并且其中有 $k$ 个国王经常来访的主要城市。\n\n其中有 $m$ 条道路，每条道路连接两个城市。然而不幸的是，这些道路的环境极差使得国王无法全速驶过。\n\n对于每条道路，翻修的成本是已知的。你的任务是选择性的翻修道路使得 $k$ 个主要城市都可以经过翻修后的道路互相连通，且总成本尽量小。", "inputFormat": "第一行，三个整数 $n,k$ 和 $m$，分别表示城市的个数，主要城市的个数和道路的个数。城市的编号分别为 $1,2,\\dots,n$。\n\n第二行，$k$ 个整数，表示主要城市。\n\n接下来 $m$ 行，每行三个整数 $a,b$ 和 $c$，表示有一条双向道路从城市 $a$ 连接到城市 $b$，且翻修成本为 $c$。", "outputFormat": "输出一行，表示满足以上条件的最小的总成本。\n\n", "hint": "对于所有子任务，$1 \\leq c \\leq 10^9$ 且 $n \\geq k$。\n\n|子任务|分数|数据范围|\n|:-:|:-:|-|\n|1|22|$2 \\leq k \\leq 5,n \\leq 20,1 \\leq m \\leq 40$|\n|2|14|$2 \\leq k \\leq 3,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n|3|15|$2 \\leq k \\leq 4,n \\leq 1000,1 \\leq m \\leq 2000$|\n|4|23|$k = 4,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n|5|26|$k = 5,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2016] Cities (Day2)", "background": "", "description": "In Byteland, there are $n$ cities, and among them there are $k$ major cities that the king often visits.\n\nThere are $m$ roads, and each road connects two cities. Unfortunately, the poor condition of these roads prevents the king from driving at full speed.\n\nFor each road, the repair cost is given. Your task is to selectively repair roads so that all $k$ major cities can be connected to each other using the repaired roads, while keeping the total cost as small as possible.", "inputFormat": "The first line contains three integers $n$, $k$, and $m$, representing the number of cities, the number of major cities, and the number of roads. The cities are numbered $1,2,\\dots,n$.\n\nThe second line contains $k$ integers, representing the major cities.\n\nThe next $m$ lines each contain three integers $a$, $b$, and $c$, meaning there is a bidirectional road connecting city $a$ and city $b$, and the repair cost is $c$.", "outputFormat": "Output one line containing the minimum total cost that satisfies the above conditions.", "hint": "For all subtasks, $1 \\leq c \\leq 10^9$ and $n \\geq k$.\n\n|Subtask|Score|Constraints|\n|:-:|:-:|-|\n|1|22|$2 \\leq k \\leq 5,n \\leq 20,1 \\leq m \\leq 40$|\n|2|14|$2 \\leq k \\leq 3,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n|3|15|$2 \\leq k \\leq 4,n \\leq 1000,1 \\leq m \\leq 2000$|\n|4|23|$k = 4,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n|5|26|$k = 5,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2016] 城市 (Day2)", "background": "", "description": "在 Byteland 有 $n$ 个城市，并且其中有 $k$ 个国王经常来访的主要城市。\n\n其中有 $m$ 条道路，每条道路连接两个城市。然而不幸的是，这些道路的环境极差使得国王无法全速驶过。\n\n对于每条道路，翻修的成本是已知的。你的任务是选择性的翻修道路使得 $k$ 个主要城市都可以经过翻修后的道路互相连通，且总成本尽量小。", "inputFormat": "第一行，三个整数 $n,k$ 和 $m$，分别表示城市的个数，主要城市的个数和道路的个数。城市的编号分别为 $1,2,\\dots,n$。\n\n第二行，$k$ 个整数，表示主要城市。\n\n接下来 $m$ 行，每行三个整数 $a,b$ 和 $c$，表示有一条双向道路从城市 $a$ 连接到城市 $b$，且翻修成本为 $c$。", "outputFormat": "输出一行，表示满足以上条件的最小的总成本。\n\n", "hint": "对于所有子任务，$1 \\leq c \\leq 10^9$ 且 $n \\geq k$。\n\n|子任务|分数|数据范围|\n|:-:|:-:|-|\n|1|22|$2 \\leq k \\leq 5,n \\leq 20,1 \\leq m \\leq 40$|\n|2|14|$2 \\leq k \\leq 3,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n|3|15|$2 \\leq k \\leq 4,n \\leq 1000,1 \\leq m \\leq 2000$|\n|4|23|$k = 4,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n|5|26|$k = 5,n \\leq 10^5,1 \\leq m \\leq 2 \\cdot 10^5$|\n", "locale": "zh-CN"}}}
{"pid": "P4785", "type": "P", "difficulty": 6, "samples": [["5\n3 4 2 5 1", "2 1 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2016", "BalticOI（波罗的海）"], "title": "[BalticOI 2016] 交换 (Day2)", "background": "", "description": "给定一个包含 $n$ 个数的序列 $x_1,x_2,\\dots,x_n$。$1,2,\\dots,n$ 每个数在序列中刚好出现一次。  \n你可以通过交换修改这个序列。你需要进行连续的 $n-1$ 轮操作，编号 $k=2,3,\\dots,n$，第 $k$ 轮你可以选择交换 $x_k$ 和 $x_{\\lfloor k/2\\rfloor}$ 或是什么都不做。  \n如果存在一个数 $j(1 \\leq j \\leq n)$，使得对于所有 $k < j$ 且 $a_j < b_j,$ $a_k = b_k$ 成立，那么序列 $a_1\\dots a_n$ 「**字典序小于**」序列 $b_1\\dots b_n$。  \n你能得到的字典序最小的序列是什么？", "inputFormat": "第一行，一个整数 $n$。  \n第二行，$n$ 个整数，表示序列 $x_1,x_2,\\dots,x_n$。", "outputFormat": "输出 $n$ 个整数，表示你能得到的字典序最小的序列。", "hint": "|子任务|分数|数据范围|\n|:-:|:-:|-|\n|1|10|$1 \\leq n \\leq 20$|\n|2|11|$1 \\leq n \\leq 40$|\n|3|27|$1 \\leq n \\leq 1000$|\n|4|20|$1 \\leq n \\leq 5 \\cdot 10^4$|\n|5|32|$1 \\leq n \\leq 2 \\cdot 10^5$|\n", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2016] Swap (Day2)", "background": "", "description": "You are given a sequence $x_1, x_2, \\dots, x_n$ containing $n$ numbers. Each number $1, 2, \\dots, n$ appears in the sequence exactly once.  \n\nYou may modify this sequence by swapping. You must perform $n - 1$ consecutive rounds of operations, numbered $k = 2, 3, \\dots, n$. In round $k$, you may choose to swap $x_k$ and $x_{\\lfloor k/2 \\rfloor}$, or do nothing.  \n\nIf there exists a number $j$ $(1 \\leq j \\leq n)$ such that for all $k < j$, $a_k = b_k$ holds, and $a_j < b_j$, then the sequence $a_1 \\dots a_n$ is \"**lexicographically smaller**\" than the sequence $b_1 \\dots b_n$.  \n\nWhat is the lexicographically smallest sequence you can obtain?", "inputFormat": "The first line contains an integer $n$.  \nThe second line contains $n$ integers, representing the sequence $x_1, x_2, \\dots, x_n$.", "outputFormat": "Output $n$ integers, representing the lexicographically smallest sequence you can obtain.", "hint": "|Subtask|Score|Constraints|\n|:-:|:-:|-|\n|1|10|$1 \\leq n \\leq 20$|\n|2|11|$1 \\leq n \\leq 40$|\n|3|27|$1 \\leq n \\leq 1000$|\n|4|20|$1 \\leq n \\leq 5 \\cdot 10^4$|\n|5|32|$1 \\leq n \\leq 2 \\cdot 10^5$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2016] 交换 (Day2)", "background": "", "description": "给定一个包含 $n$ 个数的序列 $x_1,x_2,\\dots,x_n$。$1,2,\\dots,n$ 每个数在序列中刚好出现一次。  \n你可以通过交换修改这个序列。你需要进行连续的 $n-1$ 轮操作，编号 $k=2,3,\\dots,n$，第 $k$ 轮你可以选择交换 $x_k$ 和 $x_{\\lfloor k/2\\rfloor}$ 或是什么都不做。  \n如果存在一个数 $j(1 \\leq j \\leq n)$，使得对于所有 $k < j$ 且 $a_j < b_j,$ $a_k = b_k$ 成立，那么序列 $a_1\\dots a_n$ 「**字典序小于**」序列 $b_1\\dots b_n$。  \n你能得到的字典序最小的序列是什么？", "inputFormat": "第一行，一个整数 $n$。  \n第二行，$n$ 个整数，表示序列 $x_1,x_2,\\dots,x_n$。", "outputFormat": "输出 $n$ 个整数，表示你能得到的字典序最小的序列。", "hint": "|子任务|分数|数据范围|\n|:-:|:-:|-|\n|1|10|$1 \\leq n \\leq 20$|\n|2|11|$1 \\leq n \\leq 40$|\n|3|27|$1 \\leq n \\leq 1000$|\n|4|20|$1 \\leq n \\leq 5 \\cdot 10^4$|\n|5|32|$1 \\leq n \\leq 2 \\cdot 10^5$|\n", "locale": "zh-CN"}}}
{"pid": "P4786", "type": "P", "difficulty": 6, "samples": [["11\nCCCTTTTTTCC\n3\n1 11\n4 9\n1 6", "4\n6\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2018", "线段树", "前缀和", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2018] Election", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day1 T1「[Election](http://boi2018.ro/assets/Tasks/BOI/Day_1/election/elections_en.pdf)」**\n\n有一个长度为 $N$ 的字符串 $S[1\\dots N]$，它仅由 `C` 和 `T` 两种字母组成。  \n现在有 $Q$ 个查询，每个查询包含两个整数 $L$ 和 $R$，表示：设新字符串 $S'=S[L\\dots R]$，至少在 $S'$ 中要删除多少个字符，才能保证：对于 $S'$ 的每一个前缀和后缀，其 `C` 的数量都不小于 `T` 的数量。", "inputFormat": "第一行有一个整数 $N$。  \n第二行有一个长度为 $N$ 的字符串 $S$。  \n第三行有一个整数 $Q$。  \n在接下来的 $Q$ 行中，每行有两个整数 $L$ 和 $R$，表示一组查询。", "outputFormat": "对于每组查询输出一行，表示至少在 $S'$ 中要删除多少个字符，才能保证题面要求。", "hint": "#### 样例解释\n查询 1：`CCCTTTTTTCC`；  \n查询 2：`TTTTTT`；  \n查询 3：`CCCTTT`。\n\n子任务 #1（28 分）：$1 ≤ N, Q ≤ 2000$；  \n子任务 #2（54 分）：$1 ≤ N, Q ≤ 7\\times 10^4$；  \n子任务 #3（18 分）： $1 ≤ N, Q ≤ 5\\times 10^5$。\n\n感谢 Planet6174 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalkanOI 2018] Election", "background": "", "description": "**Translated from [BalkanOI 2018](http://boi2018.ro) Day 1 T1 “[Election](http://boi2018.ro/assets/Tasks/BOI/Day_1/election/elections_en.pdf)”.**\n\nThere is a string $S[1\\dots N]$ of length $N$, consisting only of the two letters `C` and `T`.  \nNow there are $Q$ queries. Each query contains two integers $L$ and $R$, meaning: let the new string be $S' = S[L\\dots R]$. What is the minimum number of characters that must be deleted from $S'$ to ensure that, for every prefix and every suffix of $S'$, the number of `C` is not less than the number of `T`?", "inputFormat": "The first line contains an integer $N$.  \nThe second line contains a string $S$ of length $N$.  \nThe third line contains an integer $Q$.  \nIn the next $Q$ lines, each line contains two integers $L$ and $R$, representing one query.", "outputFormat": "For each query, output one line: the minimum number of characters that must be deleted from $S'$ to satisfy the requirement in the statement.", "hint": "#### Sample Explanation\n\nQuery 1: `CCCTTTTTTCC`.  \nQuery 2: `TTTTTT`.  \nQuery 3: `CCCTTT`.\n\nSubtask #1 (28 points): $1 \\le N, Q \\le 2000$.  \nSubtask #2 (54 points): $1 \\le N, Q \\le 7 \\times 10^4$.  \nSubtask #3 (18 points): $1 \\le N, Q \\le 5 \\times 10^5$.\n\nThanks to Planet6174 for providing the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalkanOI 2018] Election", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day1 T1「[Election](http://boi2018.ro/assets/Tasks/BOI/Day_1/election/elections_en.pdf)」**\n\n有一个长度为 $N$ 的字符串 $S[1\\dots N]$，它仅由 `C` 和 `T` 两种字母组成。  \n现在有 $Q$ 个查询，每个查询包含两个整数 $L$ 和 $R$，表示：设新字符串 $S'=S[L\\dots R]$，至少在 $S'$ 中要删除多少个字符，才能保证：对于 $S'$ 的每一个前缀和后缀，其 `C` 的数量都不小于 `T` 的数量。", "inputFormat": "第一行有一个整数 $N$。  \n第二行有一个长度为 $N$ 的字符串 $S$。  \n第三行有一个整数 $Q$。  \n在接下来的 $Q$ 行中，每行有两个整数 $L$ 和 $R$，表示一组查询。", "outputFormat": "对于每组查询输出一行，表示至少在 $S'$ 中要删除多少个字符，才能保证题面要求。", "hint": "#### 样例解释\n查询 1：`CCCTTTTTTCC`；  \n查询 2：`TTTTTT`；  \n查询 3：`CCCTTT`。\n\n子任务 #1（28 分）：$1 ≤ N, Q ≤ 2000$；  \n子任务 #2（54 分）：$1 ≤ N, Q ≤ 7\\times 10^4$；  \n子任务 #3（18 分）： $1 ≤ N, Q ≤ 5\\times 10^5$。\n\n感谢 Planet6174 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4787", "type": "P", "difficulty": 6, "samples": [["4\n1 2\n2 3\n3 4\n3\nM 1 2 1\nm 1 4 0\nM 2 3 100", "3 2 100\n1 2 1\n4 3 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2018] Minmaxtree", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day1 T3「[Minmaxtree](http://boi2018.ro/assets/Tasks/BOI/Day_1/minmaxtree/minmaxtree_en.pdf)」**\n\n有一棵有 $N$ 个结点的无权树，结点分别编号为 $1\\dots N$。现在要给每条边赋一个权值，使之变为一棵带权树。这棵带权树满足 $K$ 个条件，条件分为两类： \n1. $\\ \\texttt{M }x\\ y\\ z\\ \\ $ 从结点 $x$ 到结点 $y$ 的链上最大的边权为 $z$；\n2. $\\ \\texttt{m }x\\ y\\ z\\ \\ $ 从结点 $x$ 到结点 $y$ 的链上最小的边权为 $z$。\n\n**保证这 $K$ 组条件的 $z$ 互不相同。**\n\n请构造出这棵树，并输出每条边的边权。", "inputFormat": "第一行有一个整数 $N$。  \n在接下来的 $N-1$ 行中，每行两个整数，表示一条边连接的两个结点。  \n第 $N+1$ 行有一个整数 $K$。  \n在接下来的 $K$ 行中，每行开头有一个字母，字母为 $\\texttt{M}$ 或 $\\texttt{m}$，接下来有三个整数 $x, y, z$。", "outputFormat": "输出 $n-1$ 行，每行三个整数 $x, y, v$，用空格分隔，表示带权树的一条带权边。", "hint": "子任务 #1（7 分）：$1 ≤ N, z ≤ 1000$；  \n子任务 #2（22 分）：只有条件 1，没有条件 2。  \n子任务 #3（29 分）：所有条件 1 中给出的 $x$ 到 $y$ 的链互不相交；所有条件 2 中给出的 $x$ 到 $y$ 的链也互不相交。  \n子任务 #4（42 分）：没有其他限制。  \n对于所有数据，$1 ≤ N, K ≤ 70000$，$0 ≤ z ≤ 10^9$。\n\n\n\n感谢 Planet6174 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalkanOI 2018] Minmaxtree", "background": "", "description": "**Translated from [BalkanOI 2018](http://boi2018.ro) Day 1 T3 “[Minmaxtree](http://boi2018.ro/assets/Tasks/BOI/Day_1/minmaxtree/minmaxtree_en.pdf)”.**\n\nThere is an unweighted tree with $N$ nodes, numbered $1 \\dots N$. You need to assign a weight to each edge to make it a weighted tree. The weighted tree must satisfy $K$ conditions. There are two types of conditions:\n\n1. $\\ \\texttt{M }x\\ y\\ z\\ \\ $ The maximum edge weight on the path from node $x$ to node $y$ is $z$.\n2. $\\ \\texttt{m }x\\ y\\ z\\ \\ $ The minimum edge weight on the path from node $x$ to node $y$ is $z$.\n\n**It is guaranteed that the $z$ values in these $K$ conditions are all distinct.**\n\nPlease construct such a tree and output the weight of each edge.", "inputFormat": "The first line contains an integer $N$.  \nIn the next $N - 1$ lines, each line contains two integers, indicating an edge connecting two nodes.  \nLine $N + 1$ contains an integer $K$.  \nIn the next $K$ lines, each line starts with a letter $\\texttt{M}$ or $\\texttt{m}$, followed by three integers $x, y, z$.", "outputFormat": "Output $N - 1$ lines. Each line contains three integers $x, y, v$ separated by spaces, meaning an edge $(x, y)$ in the weighted tree has weight $v$.", "hint": "Subtask #1 (7 points): $1 \\le N, z \\le 1000$.  \nSubtask #2 (22 points): Only condition type 1, and no condition type 2.  \nSubtask #3 (29 points): All paths from $x$ to $y$ given in condition type 1 are pairwise edge-disjoint. All paths from $x$ to $y$ given in condition type 2 are also pairwise edge-disjoint.  \nSubtask #4 (42 points): No other restrictions.  \nFor all testdata, $1 \\le N, K \\le 70000$, $0 \\le z \\le 10^9$.\n\nThanks to Planet6174 for providing the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalkanOI 2018] Minmaxtree", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day1 T3「[Minmaxtree](http://boi2018.ro/assets/Tasks/BOI/Day_1/minmaxtree/minmaxtree_en.pdf)」**\n\n有一棵有 $N$ 个结点的无权树，结点分别编号为 $1\\dots N$。现在要给每条边赋一个权值，使之变为一棵带权树。这棵带权树满足 $K$ 个条件，条件分为两类： \n1. $\\ \\texttt{M }x\\ y\\ z\\ \\ $ 从结点 $x$ 到结点 $y$ 的链上最大的边权为 $z$；\n2. $\\ \\texttt{m }x\\ y\\ z\\ \\ $ 从结点 $x$ 到结点 $y$ 的链上最小的边权为 $z$。\n\n**保证这 $K$ 组条件的 $z$ 互不相同。**\n\n请构造出这棵树，并输出每条边的边权。", "inputFormat": "第一行有一个整数 $N$。  \n在接下来的 $N-1$ 行中，每行两个整数，表示一条边连接的两个结点。  \n第 $N+1$ 行有一个整数 $K$。  \n在接下来的 $K$ 行中，每行开头有一个字母，字母为 $\\texttt{M}$ 或 $\\texttt{m}$，接下来有三个整数 $x, y, z$。", "outputFormat": "输出 $n-1$ 行，每行三个整数 $x, y, v$，用空格分隔，表示带权树的一条带权边。", "hint": "子任务 #1（7 分）：$1 ≤ N, z ≤ 1000$；  \n子任务 #2（22 分）：只有条件 1，没有条件 2。  \n子任务 #3（29 分）：所有条件 1 中给出的 $x$ 到 $y$ 的链互不相交；所有条件 2 中给出的 $x$ 到 $y$ 的链也互不相交。  \n子任务 #4（42 分）：没有其他限制。  \n对于所有数据，$1 ≤ N, K ≤ 70000$，$0 ≤ z ≤ 10^9$。\n\n\n\n感谢 Planet6174 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4788", "type": "P", "difficulty": 6, "samples": [["1\n3\n())(()\n()(()\n()))", "GRBRBG\nBBRBG\nimpossible"], ["2\n2\n6\n100", "12\n959772055"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "2018", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2018] Parentrises", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day2 T1「[Parentrises](http://boi2018.ro/assets/Tasks/BOI/Day_2/parentrises/parentrises_en.pdf)」**\n\n**「括号串」**是一个仅由 `(` 和 `)` 构成的字符串。如果在括号串中插入一些 `1` 和 `+` 可以将其转化为正确的表达式，该字符串就是一个**「良括号串」**。例如，`(())` 和 `(())` 是良括号串，而 `)(` 和 `(` 不是。空字符串可视为良括号串。（就是你们学 Catalan 数时学的那个啊）  \n将一个**括号串**（不是良括号串）的每个括号都涂成红绿蓝三种颜色之一，如果有一种方案同时满足：\n+ 忽略该串的所有蓝色括号后它是**良括号串**；\n+ 忽略该串的所有红色括号后它是良括号串；\n\n该串就是 **RGB 可读**的。  \n\n你会接到两类任务之一。任务类型用一个整数 $P$ 表示，$P=1$ 或 $2$。\n\n* $P=1$：你会接到 $T$ 组询问，每组询问包含一个括号串，试问该串是否 RGB 可读，如果是，请输出一种染色方案，如果否请输出 `impossible`；\n* $P=2$：你会接到 $T$ 组询问，每组询问包含一个数 $N$，试求：有多少个长度为 $N$ 的 RGB 可读的良括号串。输出答案模 $(10^9+7)$ 的结果。", "inputFormat": "第一行有一个整数 $P$。  \n第二行有一个整数 $T$。  \n+ 如果 $P=1$，在接下来的 $T$ 行中，每行有一个括号串，表示询问。\n+ 如果 $P=2$，在接下来的 $T$ 行中，每行有一个数 $N$，表示询问。", "outputFormat": "如果 $P=1$，对于每组询问，\n+ 如果该串是 RGB 可读的，请输出一种染色方案；\n+ 如果该串不是 RGB 可读的，请输出 `impossible`；\n\n如果 $P=2$，对于每组询问，请输出长度为 $N$ 的 RGB 可读的良括号串的个数模 $(10^9+7)$ 的结果。", "hint": "样例 $1$ 解释：\n\n对于查询 1，忽略原串的所有蓝色括号后它变为 `()()`；忽略原串的所有红色括号后它也变为 `()()`。\n对于查询 2，忽略原串的所有蓝色括号后它变为 `()`；忽略原串的所有红色括号后它变为 `()()`。\n\n$P = 1$：  \n设 $L$ 为字符串总长。  \n* 子任务 #1（5 分）：$1 ≤ T ≤ 5,$ $1 ≤ len(S) ≤ 13$。  \n* 子任务 #2（11 分）：$1 ≤ L ≤ 100$。  \n* 子任务 #3（6 分）：$1 ≤ L ≤ 1000$。  \n* 子任务 #4（28 分）：$1 ≤ L ≤ 10^6$。\n\n$P = 2$：\n* 子任务 #5（6 分）：$1 ≤ N, T ≤ 15$。  \n* 子任务 #6（16 分）：$1 ≤ N, T ≤ 30$。  \n* 子任务 #7（28 分）：$1 ≤ N, T ≤ 300$。\n\n感谢 Planet6174 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalkanOI 2018] Parentrises", "background": "", "description": "**Translated from [BalkanOI 2018](http://boi2018.ro) Day 2 T1 “[Parentrises](http://boi2018.ro/assets/Tasks/BOI/Day_2/parentrises/parentrises_en.pdf)”.**\n\nA **parentheses string** is a string consisting only of `(` and `)`. If inserting some `1` and `+` into a parentheses string can turn it into a correct expression, then the string is a **balanced parentheses string**. For example, `(())` and `()()` are balanced parentheses strings, while `)(` and `(` are not. The empty string is considered a balanced parentheses string. (This is the one you saw when learning Catalan numbers.)\n\nColor each parenthesis of a **parentheses string** (not necessarily balanced) with one of three colors: red, green, and blue. If there exists a coloring such that all of the following are true:\n+ After ignoring all blue parentheses in the string, it becomes a **balanced parentheses string**.\n+ After ignoring all red parentheses in the string, it becomes a balanced parentheses string.\n\nThen the string is called **RGB-readable**.\n\nYou will receive one of two types of tasks. The task type is given by an integer $P$, where $P = 1$ or $2$.\n\n* $P = 1$: You will receive $T$ queries, each containing a parentheses string. Determine whether the string is RGB-readable. If it is, output one valid coloring; otherwise output `impossible`.\n* $P = 2$: You will receive $T$ queries, each containing an integer $N$. Compute how many RGB-readable balanced parentheses strings of length $N$ there are. Output the answer modulo $(10^9+7)$.", "inputFormat": "The first line contains an integer $P$.  \nThe second line contains an integer $T$.  \n+ If $P = 1$, then in the next $T$ lines, each line contains a parentheses string representing a query.\n+ If $P = 2$, then in the next $T$ lines, each line contains an integer $N$ representing a query.", "outputFormat": "If $P = 1$, for each query:\n+ If the string is RGB-readable, output one valid coloring.\n+ If the string is not RGB-readable, output `impossible`.\n\nIf $P = 2$, for each query, output the number of RGB-readable balanced parentheses strings of length $N$ modulo $(10^9+7)$.", "hint": "Explanation for Sample $1$:\n\nFor query 1, after ignoring all blue parentheses, the original string becomes `()()`; after ignoring all red parentheses, it also becomes `()()`.  \nFor query 2, after ignoring all blue parentheses, it becomes `()`; after ignoring all red parentheses, it becomes `()()`.\n\nConstraints for $P = 1$:  \nLet $L$ be the total length of all strings.  \n* Subtask #1 (5 points): $1 \\le T \\le 5$, $1 \\le len(S) \\le 13$.\n* Subtask #2 (11 points): $1 \\le L \\le 100$.\n* Subtask #3 (6 points): $1 \\le L \\le 1000$.\n* Subtask #4 (28 points): $1 \\le L \\le 10^6$.\n\nConstraints for $P = 2$:\n* Subtask #5 (6 points): $1 \\le N, T \\le 15$.\n* Subtask #6 (16 points): $1 \\le N, T \\le 30$.\n* Subtask #7 (28 points): $1 \\le N, T \\le 300$.\n\nThanks to Planet6174 for providing the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalkanOI 2018] Parentrises", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day2 T1「[Parentrises](http://boi2018.ro/assets/Tasks/BOI/Day_2/parentrises/parentrises_en.pdf)」**\n\n**「括号串」**是一个仅由 `(` 和 `)` 构成的字符串。如果在括号串中插入一些 `1` 和 `+` 可以将其转化为正确的表达式，该字符串就是一个**「良括号串」**。例如，`(())` 和 `(())` 是良括号串，而 `)(` 和 `(` 不是。空字符串可视为良括号串。（就是你们学 Catalan 数时学的那个啊）  \n将一个**括号串**（不是良括号串）的每个括号都涂成红绿蓝三种颜色之一，如果有一种方案同时满足：\n+ 忽略该串的所有蓝色括号后它是**良括号串**；\n+ 忽略该串的所有红色括号后它是良括号串；\n\n该串就是 **RGB 可读**的。  \n\n你会接到两类任务之一。任务类型用一个整数 $P$ 表示，$P=1$ 或 $2$。\n\n* $P=1$：你会接到 $T$ 组询问，每组询问包含一个括号串，试问该串是否 RGB 可读，如果是，请输出一种染色方案，如果否请输出 `impossible`；\n* $P=2$：你会接到 $T$ 组询问，每组询问包含一个数 $N$，试求：有多少个长度为 $N$ 的 RGB 可读的良括号串。输出答案模 $(10^9+7)$ 的结果。", "inputFormat": "第一行有一个整数 $P$。  \n第二行有一个整数 $T$。  \n+ 如果 $P=1$，在接下来的 $T$ 行中，每行有一个括号串，表示询问。\n+ 如果 $P=2$，在接下来的 $T$ 行中，每行有一个数 $N$，表示询问。", "outputFormat": "如果 $P=1$，对于每组询问，\n+ 如果该串是 RGB 可读的，请输出一种染色方案；\n+ 如果该串不是 RGB 可读的，请输出 `impossible`；\n\n如果 $P=2$，对于每组询问，请输出长度为 $N$ 的 RGB 可读的良括号串的个数模 $(10^9+7)$ 的结果。", "hint": "样例 $1$ 解释：\n\n对于查询 1，忽略原串的所有蓝色括号后它变为 `()()`；忽略原串的所有红色括号后它也变为 `()()`。\n对于查询 2，忽略原串的所有蓝色括号后它变为 `()`；忽略原串的所有红色括号后它变为 `()()`。\n\n$P = 1$：  \n设 $L$ 为字符串总长。  \n* 子任务 #1（5 分）：$1 ≤ T ≤ 5,$ $1 ≤ len(S) ≤ 13$。  \n* 子任务 #2（11 分）：$1 ≤ L ≤ 100$。  \n* 子任务 #3（6 分）：$1 ≤ L ≤ 1000$。  \n* 子任务 #4（28 分）：$1 ≤ L ≤ 10^6$。\n\n$P = 2$：\n* 子任务 #5（6 分）：$1 ≤ N, T ≤ 15$。  \n* 子任务 #6（16 分）：$1 ≤ N, T ≤ 30$。  \n* 子任务 #7（28 分）：$1 ≤ N, T ≤ 300$。\n\n感谢 Planet6174 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4789", "type": "P", "difficulty": 4, "samples": [["5 1\n29 27 25 25 28", "29 27 25 25 26 28\n"], ["1 5\n29", "29 28 27 26 25 25\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2018] Zalmoxis", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day2 T3「[Zalmoxis](http://boi2018.ro/assets/Tasks/BOI/Day_2/zalmoxis/zalmoxis_en.pdf)」**\n\n**「ZalPunch」** 是一种修改数列的方式，每次 ZalPunch 可以将数列中的任意一个正整数 $x$ 原地替换成两个 $(x-1)$。  \n* 正确示范：$[1, 1]\\xrightarrow{ZalPunch}[0, 0, 1]$；  \n* 正确示范：$[1,23,3]\\xrightarrow{ZalPunch}[1,22,22,3]$；  \n* 错误示范：$[1,3]\\xrightarrow{ZalPunch}[2,1,2]$（第一个 2 不在原位）。\n\n从数列 $[30]$ 开始，用 ZalPunch 修改该数列任意多次，所得到的所有数列都称为 **「ZalSequence」**（含数列 $[30]$）。  \n给你一个有 $N$ 项的数列 $S$，请在其中插入 $K$ 个数（不是使用 $K$ 次 ZalPunch），使之变成 ZalSequence。保证有解。", "inputFormat": "第一行有两个整数 $N, K$。  \n第二行有 $N$ 个整数，表示数列 $S$。", "outputFormat": "输出 $N+K$ 个整数，表示新数列。", "hint": "#### 样例解释 1\n$[30] → [29, 29] →[29, 28, 28] →[29, 27, 27, 28] $ $→[29, 27, 26, 26, 28] $ $→ [29, 27, 25, 25, 26, 28]$\n\n#### 样例解释 2\n$[30] → [29, 29] →[29, 28, 28] →[29, 28, 27, 27] $ $→[29, 28, 27, 26, 26] $ $→[29, 28, 27, 26, 25, 25]$\n\n对于 $30\\%$ 的数据，$K=1$。  \n对于所有数据，$1 ≤ N,K ≤ 10^6, $ $1 ≤ N + K ≤ 10^6$。\n\n\n感谢 Planet6174 提供的翻译\n\n感谢 @tiger2005 提供的 SPJ", "locale": "zh-CN", "translations": {"en": {"title": "[BalkanOI 2018] Zalmoxis", "background": "", "description": "**Translated from [BalkanOI 2018](http://boi2018.ro) Day 2 T3 “[Zalmoxis](http://boi2018.ro/assets/Tasks/BOI/Day_2/zalmoxis/zalmoxis_en.pdf)”.**\n\n**“ZalPunch”** is a way to modify a sequence. Each time you perform a ZalPunch, you can take any non-negative integer $x$ in the sequence and replace it in place with two $(x-1)$.  \n* Correct example: $[1, 1]\\xrightarrow{ZalPunch}[0, 0, 1]$;  \n* Correct example: $[1,23,3]\\xrightarrow{ZalPunch}[1,22,22,3]$;  \n* Wrong example: $[1,3]\\xrightarrow{ZalPunch}[2,1,2]$ (the first $2$ is not in the original position).\n\nStarting from the sequence $[30]$, all sequences that can be obtained by applying ZalPunch any number of times are called **“ZalSequence”** (including $[30]$).  \nYou are given a sequence $S$ with $N$ elements. Insert $K$ numbers into it (not performing ZalPunch $K$ times) so that it becomes a ZalSequence. It is guaranteed that a solution exists.", "inputFormat": "The first line contains two integers $N, K$.  \nThe second line contains $N$ integers, representing the sequence $S$.", "outputFormat": "Output $N+K$ integers, representing the new sequence.", "hint": "#### Sample Explanation 1\n\n$[30] → [29, 29] →[29, 28, 28] →[29, 27, 27, 28]$ $→[29, 27, 26, 26, 28]$ $→ [29, 27, 25, 25, 26, 28]$.\n\n#### Sample Explanation 2\n\n$[30] → [29, 29] →[29, 28, 28] →[29, 28, 27, 27]$ $→[29, 28, 27, 26, 26]$ $→[29, 28, 27, 26, 25, 25]$.\n\nFor $30\\%$ of the testdata, $K=1$.  \nFor all testdata, $1 ≤ N,K ≤ 10^6,$ $1 ≤ N + K ≤ 10^6$.\n\nThanks to Planet6174 for providing the translation.  \n\nThanks to @tiger2005 for providing the SPJ.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalkanOI 2018] Zalmoxis", "background": "", "description": "**翻译自 [BalkanOI 2018](http://boi2018.ro) Day2 T3「[Zalmoxis](http://boi2018.ro/assets/Tasks/BOI/Day_2/zalmoxis/zalmoxis_en.pdf)」**\n\n**「ZalPunch」** 是一种修改数列的方式，每次 ZalPunch 可以将数列中的任意一个正整数 $x$ 原地替换成两个 $(x-1)$。  \n* 正确示范：$[1, 1]\\xrightarrow{ZalPunch}[0, 0, 1]$；  \n* 正确示范：$[1,23,3]\\xrightarrow{ZalPunch}[1,22,22,3]$；  \n* 错误示范：$[1,3]\\xrightarrow{ZalPunch}[2,1,2]$（第一个 2 不在原位）。\n\n从数列 $[30]$ 开始，用 ZalPunch 修改该数列任意多次，所得到的所有数列都称为 **「ZalSequence」**（含数列 $[30]$）。  \n给你一个有 $N$ 项的数列 $S$，请在其中插入 $K$ 个数（不是使用 $K$ 次 ZalPunch），使之变成 ZalSequence。保证有解。", "inputFormat": "第一行有两个整数 $N, K$。  \n第二行有 $N$ 个整数，表示数列 $S$。", "outputFormat": "输出 $N+K$ 个整数，表示新数列。", "hint": "#### 样例解释 1\n$[30] → [29, 29] →[29, 28, 28] →[29, 27, 27, 28] $ $→[29, 27, 26, 26, 28] $ $→ [29, 27, 25, 25, 26, 28]$\n\n#### 样例解释 2\n$[30] → [29, 29] →[29, 28, 28] →[29, 28, 27, 27] $ $→[29, 28, 27, 26, 26] $ $→[29, 28, 27, 26, 25, 25]$\n\n对于 $30\\%$ 的数据，$K=1$。  \n对于所有数据，$1 ≤ N,K ≤ 10^6, $ $1 ≤ N + K ≤ 10^6$。\n\n\n感谢 Planet6174 提供的翻译\n\n感谢 @tiger2005 提供的 SPJ", "locale": "zh-CN"}}}
{"pid": "P4790", "type": "P", "difficulty": 6, "samples": [["8\nleonard emmy\nada emmy\nisaac leonard\nemmy pierre\npierre bernhard\nbernhard emmy\nsofia karl\nkarl sofia", "3\n"], ["4\na c\nb c\nc d\nd d", "3\n"], ["3\nrocky scarlet\nscarlet patrick\npatrick rocky", "-1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000]}, "tags": ["动态规划 DP", "贪心", "2018", "深度优先搜索 DFS", "BalticOI（波罗的海）"], "title": "[BalticOI 2018] 多角恋", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day1「[Love Polygon](https://boi18-day1-open.kattis.com/problems/boi18.polygon)」**\n\n给一张 $N$ 个点的有向图，每个点的出度为 $1$。每次可以花费 $1$ 的代价修改图上的一条边的终点，也就是改变从一个点出发所到达的点。求最少需要花费多少代价，才能使这张图形成若干个两两不相交的二元环，并且图上的所有点都在某一个环里。", "inputFormat": "第一行包含一个整数 $N$。\n\n接下来的 $N$ 行每行包含两个字符串 $s$ 和 $t$，表示图中存在一条 $s\\rightarrow t$ 的边。\n\n字符串只包含小写英文字母，且长度不超过 $10$。", "outputFormat": "输出一个整数，表示最少需要花费多少代价，才能使这张图形成若干个两两不相交的二元环，并且图上的所有点都在某一个环里。无解请输出 $-1$。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ojydan1.png)\n\n唯一的最优解如上图所示，图的上半部分为原图，底色为粉色的三个点为需要修改的边的起点；图的下半部分表示修改后的情况。\n\n#### 样例 2 解释\n\n存在多组最优解。其中一种是分别改变一条以 ``a``、``b`` 和 ``d`` 为起点的边，使他们分别连接到 ``b``、``a`` 和 `c`。\n\n#### 样例 3 解释\n\n图中有 $3$ 个点，无论如何修改边的终点，总会有一个人不在环里。\n\n\n| 子任务 | 分值 | 数据范围 | 附加限制 |\n|:----------:|:-------:|:-------------:|:-------------:|\n|$1$|$21$|$2\\leqslant N\\leqslant 20$|.|\n|$2$|$25$|$2\\leqslant N\\leqslant 100\\, 000$|每个点都有一条入边（可能有自环）|\n|$3$|$29$|$2\\leqslant N\\leqslant 100\\, 000$|不存在两个点或更多个点构成的环|\n|$4$|$25$|$2\\leqslant N\\leqslant 100\\, 000$|.|\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2018] Love Polygon", "background": "", "description": "**This problem is translated from [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day 1 “[Love Polygon](https://boi18-day1-open.kattis.com/problems/boi18.polygon)”.**\n\nYou are given a directed graph with $N$ vertices, where each vertex has out-degree $1$. Each time, you may pay a cost of $1$ to change the destination of one edge in the graph, i.e., change which vertex is reached from a given starting vertex. Find the minimum total cost needed to make the graph become several pairwise disjoint 2-cycles, and every vertex in the graph must belong to some cycle.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain two strings $s$ and $t$, meaning there is an edge $s\\rightarrow t$ in the graph.\n\nEach string contains only lowercase English letters and has length at most $10$.", "outputFormat": "Output one integer, the minimum total cost needed to make the graph become several pairwise disjoint 2-cycles, and every vertex in the graph must belong to some cycle. If there is no solution, output $-1$.", "hint": "#### Explanation for Sample 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ojydan1.png)\n\nThe only optimal solution is shown in the figure above. The upper part is the original graph, and the three vertices with a pink background are the starting vertices of the edges that need to be modified. The lower part shows the graph after the modifications.\n\n#### Explanation for Sample 2\n\nThere are multiple optimal solutions. One of them is to change the edges starting from ``a``, ``b``, and ``d``, so that they connect to ``b``, ``a``, and `c`, respectively.\n\n#### Explanation for Sample 3\n\nThere are $3$ vertices in the graph. No matter how you change the destinations of edges, there will always be one person not in any cycle.\n\n| Subtask | Score | Constraints | Additional Limit |\n|:----------:|:-------:|:-------------:|:-------------:|\n|$1$|$21$|$2\\leqslant N\\leqslant 20$|.|\n|$2$|$25$|$2\\leqslant N\\leqslant 100\\, 000$|Each vertex has one incoming edge (self-loops may exist).|\n|$3$|$29$|$2\\leqslant N\\leqslant 100\\, 000$|There is no cycle consisting of two or more vertices.|\n|$4$|$25$|$2\\leqslant N\\leqslant 100\\, 000$|.|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2018] 多角恋", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day1「[Love Polygon](https://boi18-day1-open.kattis.com/problems/boi18.polygon)」**\n\n给一张 $N$ 个点的有向图，每个点的出度为 $1$。每次可以花费 $1$ 的代价修改图上的一条边的终点，也就是改变从一个点出发所到达的点。求最少需要花费多少代价，才能使这张图形成若干个两两不相交的二元环，并且图上的所有点都在某一个环里。", "inputFormat": "第一行包含一个整数 $N$。\n\n接下来的 $N$ 行每行包含两个字符串 $s$ 和 $t$，表示图中存在一条 $s\\rightarrow t$ 的边。\n\n字符串只包含小写英文字母，且长度不超过 $10$。", "outputFormat": "输出一个整数，表示最少需要花费多少代价，才能使这张图形成若干个两两不相交的二元环，并且图上的所有点都在某一个环里。无解请输出 $-1$。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ojydan1.png)\n\n唯一的最优解如上图所示，图的上半部分为原图，底色为粉色的三个点为需要修改的边的起点；图的下半部分表示修改后的情况。\n\n#### 样例 2 解释\n\n存在多组最优解。其中一种是分别改变一条以 ``a``、``b`` 和 ``d`` 为起点的边，使他们分别连接到 ``b``、``a`` 和 `c`。\n\n#### 样例 3 解释\n\n图中有 $3$ 个点，无论如何修改边的终点，总会有一个人不在环里。\n\n\n| 子任务 | 分值 | 数据范围 | 附加限制 |\n|:----------:|:-------:|:-------------:|:-------------:|\n|$1$|$21$|$2\\leqslant N\\leqslant 20$|.|\n|$2$|$25$|$2\\leqslant N\\leqslant 100\\, 000$|每个点都有一条入边（可能有自环）|\n|$3$|$29$|$2\\leqslant N\\leqslant 100\\, 000$|不存在两个点或更多个点构成的环|\n|$4$|$25$|$2\\leqslant N\\leqslant 100\\, 000$|.|\n\n", "locale": "zh-CN"}}}
{"pid": "P4791", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["搜索", "2018", "递归", "交互题", "Special Judge", "O2优化", "随机化", "BalticOI（波罗的海）"], "title": "[BalticOI 2018] 蠕虫之忧", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day1「[Worm Worries](https://boi18-day1-open.kattis.com/problems/boi18.worm)」**\n\n**本题是一道交互题。**\n\n在一个三维空间（我们限制大小为 $N\\times M\\times K$）内，每个点都有一个正整数参数，记这个参数为 $H[x,\\, y,\\, z]$（保证 $1$ $\\leqslant$ $x$ $\\leqslant$ $N$ $,$ $1$ $\\leqslant$ $y$ $\\leqslant$ $M$ $,$ $1$ $\\leqslant$ $z$ $\\leqslant$ $K$ 且每个参数都不超过 $10^9$）。你最多可以询问 $Q$ 次，找到一个点，使得这个点的参数大于它周围与它有公共边的所有点的参数，即：$H[x,\\,y,\\,z]\\geqslant\\max(H[x+1,\\,y,\\,z],$ $H[x-1,\\,y,\\,z],$ $H[x,\\,y-1,\\,z],$ $H[x,\\,y-1,\\,z],$ $H[x,\\,y,\\,z+1],$ $H[x,\\,y,\\,z-1]).$\n\n特别地，当一个点不在空间直角坐标系的第一卦限内时，它的参数为 $0$。", "inputFormat": "**请使用标准输入输出流**与交互库进行交互。你可以向交互库询问最多 $Q$ 次，每次可以询问一个点的参数。\n\n输入的第一行包含四个整数 $N,\\,M,\\,K,\\,Q$ （请忽略这一行的其他参数）。在此之后，你可以向交互器提出至多 $Q$ 行形如 ``? x y z`` 的询问，表示“询问坐标为 $(x,\\,y,\\,z)$ 的点的参数是多少”。对于每一组询问，交互器会输出一行一个整数表示坐标为 $(x,\\,y,\\,z)$ 的点的参数。\n\n当你找到一组解时，输出一行 ``! x y z`` 表示你找到的答案是 $(x,\\,y,\\,z)$，并终止程序。此时交互器不会有任何输出。\n\n所有坐标必须满足 $1\\leqslant x\\leqslant N,\\, 1\\leqslant y\\leqslant M,\\, 1\\leqslant z\\leqslant K$。如果不满足坐标的限制、询问不符合格式或询问超过了 $Q$ 行，交互器会输出 ``-1`` 并退出，此时你的程序也应该退出。否则你可能会得到 ``Runtime Error`` 或 ``Time Limit Exceeded`` 的判定结果。\n\n请注意，你必须在每一次询问之后手动刷新缓存，否则你的程序将会超时，对于各语言，刷新缓存的方法如下：\n\n - Java: 调用 ``System.out.println()`` 会自动刷新缓存；\n - Python: 调用 ``print()`` 会自动刷新缓存；\n - C++: ``cout << endl`` 可以输出一个换行并刷新缓存。如果使用 ``printf``，请使用 ``fflush(stdout)``；\n - Pascal: 调用 ``Flush(Output)``。\n\n为了帮助你更好地完成交互，我们提供了可以复制到你的程序里的可选代码。可选代码使用了较快的输入输出，可能会提高 IO 较慢的 Python 和 Java 语言的程序效率（只与最后两个子任务有关）。\n\n交互器没有使用随机函数，这意味着，每组测试数据都是固定的，与你的程序的询问无关。", "outputFormat": "为了使你更好地完成交互，下面给出一组交互的示例。在这个示例中，$N=3,\\,M=3,\\,K=1,\\,Q=3$，这三个格子的参数为 $\\{10,\\,14,\\,13\\}$。以 ``JUDGE`` 开头的行表示交互库输出的内容（你的程序的标准输入的内容），以 ``YOU`` 开头的行表示你的程序的输出。\n\n```\nJUDGE:      3 1 1 3 123123 fixed 10 14 13\nYOU  :      ? 3 1 1\nJUDGE:      13\nYOU  :      ? 2 1 1\nJUDGE:      14\nYOU  :      ? 1 1 1\nJUDGE:      10\nYOU  :      ! 2 1 1\n```", "hint": "| 子任务 | 分值 | 限制 |\n|:------:|:----:|:----:|\n| $1$    | $10$ | $M=K=1,\\,N=1\\,000\\,000,\\,Q=10\\,000$ |\n| $2$    | $22$ | $M=K=1,\\,N=1\\,000\\,000,\\,Q=35$ |\n| $3$    | $12$ | $K=1,\\,N=M=200,\\,Q=4\\,000$ |\n| $4$    | $19$ | $K=1,\\,N=M=1\\,000,\\,Q=3\\,500$ |\n| $5$    | $14$ | $N=M=K=100,\\,Q=100\\,000$ |\n| $6$    | $23$ | $N=M=K=500,\\,Q=150\\,000$ |\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2018] Worm Worries", "background": "", "description": "**This problem is translated from [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day 1 “[Worm Worries](https://boi18-day1-open.kattis.com/problems/boi18.worm)”.**\n\n**This is an interactive problem.**\n\nIn a three-dimensional space (we limit the size to $N \\times M \\times K$), each point has a positive integer value, denoted by $H[x,\\, y,\\, z]$ (it is guaranteed that $1 \\leqslant x \\leqslant N$, $1 \\leqslant y \\leqslant M$, $1 \\leqslant z \\leqslant K$, and each value does not exceed $10^9$). You may ask at most $Q$ queries to find a point whose value is greater than or equal to the values of all points that share an edge with it, i.e.,\n$H[x,\\,y,\\,z]\\geqslant\\max(H[x+1,\\,y,\\,z],\\, H[x-1,\\,y,\\,z],\\, H[x,\\,y+1,\\,z],\\, H[x,\\,y-1,\\,z],\\, H[x,\\,y,\\,z+1],\\, H[x,\\,y,\\,z-1]).$\n\nIn particular, when a point is not in the first octant of the Cartesian coordinate system, its value is $0$.", "inputFormat": "**Please use standard input/output streams** to interact with the interactor. You can query the interactor at most $Q$ times, and each time you may ask for the value at one point.\n\nThe first line of input contains four integers $N,\\, M,\\, K,\\, Q$ (please ignore the other parameters on this line). After that, you may send to the interactor at most $Q$ lines of queries of the form ``? x y z``, meaning “ask what the value at coordinate $(x,\\,y,\\,z)$ is”. For each query, the interactor outputs one line with one integer, which is the value at coordinate $(x,\\,y,\\,z)$.\n\nWhen you find a valid answer, output one line ``! x y z`` to indicate that your answer is $(x,\\,y,\\,z)$, and terminate your program. In this case, the interactor will output nothing.\n\nAll coordinates must satisfy $1 \\leqslant x \\leqslant N$, $1 \\leqslant y \\leqslant M$, $1 \\leqslant z \\leqslant K$. If the coordinates do not satisfy the constraints, the query format is invalid, or the number of queries exceeds $Q$, the interactor will output ``-1`` and exit; in this case your program should also exit. Otherwise, you may receive a verdict such as ``Runtime Error`` or ``Time Limit Exceeded``.\n\nNote that you must manually flush the output buffer after each query, otherwise your program will time out. For different languages, the flushing methods are as follows:\n\n- Java: calling ``System.out.println()`` flushes automatically;\n- Python: calling ``print()`` flushes automatically;\n- C++: ``cout << endl`` prints a newline and flushes. If you use ``printf``, use ``fflush(stdout)``;\n- Pascal: call ``Flush(Output)``.\n\nTo help you implement the interaction more easily, we provide optional code that you can copy into your program. The optional code uses faster input/output, which may improve the efficiency of Python and Java programs with slower IO (only related to the last two subtasks).\n\nThe interactor does not use random functions. This means that each testdata is fixed and does not depend on your queries.", "outputFormat": "To help you implement the interaction, here is an example interaction. In this example, $N=3,\\, M=3,\\, K=1,\\, Q=3$, and the values of the three cells are $\\{10,\\,14,\\,13\\}$. Lines starting with ``JUDGE`` are the interactor’s output (your program’s standard input), and lines starting with ``YOU`` are your program’s output.\n\n```\nJUDGE:      3 1 1 3 123123 fixed 10 14 13\nYOU  :      ? 3 1 1\nJUDGE:      13\nYOU  :      ? 2 1 1\nJUDGE:      14\nYOU  :      ? 1 1 1\nJUDGE:      10\nYOU  :      ! 2 1 1\n```", "hint": "| Subtask | Score | Constraints |\n|:------:|:----:|:----:|\n| $1$    | $10$ | $M = K = 1,\\, N = 1\\,000\\,000,\\, Q = 10\\,000$ |\n| $2$    | $22$ | $M = K = 1,\\, N = 1\\,000\\,000,\\, Q = 35$ |\n| $3$    | $12$ | $K = 1,\\, N = M = 200,\\, Q = 4\\,000$ |\n| $4$    | $19$ | $K = 1,\\, N = M = 1\\,000,\\, Q = 3\\,500$ |\n| $5$    | $14$ | $N = M = K = 100,\\, Q = 100\\,000$ |\n| $6$    | $23$ | $N = M = K = 500,\\, Q = 150\\,000$ |\n\nThanks to Hatsune_Miku for providing the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2018] 蠕虫之忧", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day1「[Worm Worries](https://boi18-day1-open.kattis.com/problems/boi18.worm)」**\n\n**本题是一道交互题。**\n\n在一个三维空间（我们限制大小为 $N\\times M\\times K$）内，每个点都有一个正整数参数，记这个参数为 $H[x,\\, y,\\, z]$（保证 $1$ $\\leqslant$ $x$ $\\leqslant$ $N$ $,$ $1$ $\\leqslant$ $y$ $\\leqslant$ $M$ $,$ $1$ $\\leqslant$ $z$ $\\leqslant$ $K$ 且每个参数都不超过 $10^9$）。你最多可以询问 $Q$ 次，找到一个点，使得这个点的参数大于它周围与它有公共边的所有点的参数，即：$H[x,\\,y,\\,z]\\geqslant\\max(H[x+1,\\,y,\\,z],$ $H[x-1,\\,y,\\,z],$ $H[x,\\,y-1,\\,z],$ $H[x,\\,y-1,\\,z],$ $H[x,\\,y,\\,z+1],$ $H[x,\\,y,\\,z-1]).$\n\n特别地，当一个点不在空间直角坐标系的第一卦限内时，它的参数为 $0$。", "inputFormat": "**请使用标准输入输出流**与交互库进行交互。你可以向交互库询问最多 $Q$ 次，每次可以询问一个点的参数。\n\n输入的第一行包含四个整数 $N,\\,M,\\,K,\\,Q$ （请忽略这一行的其他参数）。在此之后，你可以向交互器提出至多 $Q$ 行形如 ``? x y z`` 的询问，表示“询问坐标为 $(x,\\,y,\\,z)$ 的点的参数是多少”。对于每一组询问，交互器会输出一行一个整数表示坐标为 $(x,\\,y,\\,z)$ 的点的参数。\n\n当你找到一组解时，输出一行 ``! x y z`` 表示你找到的答案是 $(x,\\,y,\\,z)$，并终止程序。此时交互器不会有任何输出。\n\n所有坐标必须满足 $1\\leqslant x\\leqslant N,\\, 1\\leqslant y\\leqslant M,\\, 1\\leqslant z\\leqslant K$。如果不满足坐标的限制、询问不符合格式或询问超过了 $Q$ 行，交互器会输出 ``-1`` 并退出，此时你的程序也应该退出。否则你可能会得到 ``Runtime Error`` 或 ``Time Limit Exceeded`` 的判定结果。\n\n请注意，你必须在每一次询问之后手动刷新缓存，否则你的程序将会超时，对于各语言，刷新缓存的方法如下：\n\n - Java: 调用 ``System.out.println()`` 会自动刷新缓存；\n - Python: 调用 ``print()`` 会自动刷新缓存；\n - C++: ``cout << endl`` 可以输出一个换行并刷新缓存。如果使用 ``printf``，请使用 ``fflush(stdout)``；\n - Pascal: 调用 ``Flush(Output)``。\n\n为了帮助你更好地完成交互，我们提供了可以复制到你的程序里的可选代码。可选代码使用了较快的输入输出，可能会提高 IO 较慢的 Python 和 Java 语言的程序效率（只与最后两个子任务有关）。\n\n交互器没有使用随机函数，这意味着，每组测试数据都是固定的，与你的程序的询问无关。", "outputFormat": "为了使你更好地完成交互，下面给出一组交互的示例。在这个示例中，$N=3,\\,M=3,\\,K=1,\\,Q=3$，这三个格子的参数为 $\\{10,\\,14,\\,13\\}$。以 ``JUDGE`` 开头的行表示交互库输出的内容（你的程序的标准输入的内容），以 ``YOU`` 开头的行表示你的程序的输出。\n\n```\nJUDGE:      3 1 1 3 123123 fixed 10 14 13\nYOU  :      ? 3 1 1\nJUDGE:      13\nYOU  :      ? 2 1 1\nJUDGE:      14\nYOU  :      ? 1 1 1\nJUDGE:      10\nYOU  :      ! 2 1 1\n```", "hint": "| 子任务 | 分值 | 限制 |\n|:------:|:----:|:----:|\n| $1$    | $10$ | $M=K=1,\\,N=1\\,000\\,000,\\,Q=10\\,000$ |\n| $2$    | $22$ | $M=K=1,\\,N=1\\,000\\,000,\\,Q=35$ |\n| $3$    | $12$ | $K=1,\\,N=M=200,\\,Q=4\\,000$ |\n| $4$    | $19$ | $K=1,\\,N=M=1\\,000,\\,Q=3\\,500$ |\n| $5$    | $14$ | $N=M=K=100,\\,Q=100\\,000$ |\n| $6$    | $23$ | $N=M=K=500,\\,Q=150\\,000$ |\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4792", "type": "P", "difficulty": 3, "samples": [["5 2 2\n0 1 1 0 1\n0 1\n1 1", "2\n"], ["13 4 3\n1 1 3 2 0 1 2 0 0 0 0 3 1\n0 2\n2 1\n1 2", "7\n"], ["5 3 1\n1 2 0 1 2\n0 2", "impossible\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000]}, "tags": ["字符串", "2018", "枚举", "前缀和", "BalticOI（波罗的海）"], "title": "[BalticOI 2018] 火星人的 DNA", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day1「[Martian DNA](https://boi18-day1-open.kattis.com/problems/boi18.dna)」**\n\n给定一个字符集大小 $|\\Sigma| = K$ 的长度为 $N$ 的字符串和 $R$ 个要求，每个要求为使子串中的字符 $B$ 至少出现 $Q$ 次。求出满足所有要求的最短子串长度。", "inputFormat": "第一行包括三个整数 $N,\\, K,\\, R$，分别表示字符串的长度、字符集的大小和要求个数，保证 $1\\leqslant R\\leqslant K\\leqslant N$。  \n第二行包含 $N$ 个用空格隔开的整数，表示这个字符串。字符从 $0$ 开始编号，每个字符集中的字符至少出现一次。  \n接下来的 $R$ 行，每行两个整数 $B$ 和 $Q$，表示一组要求，满足 $0\\leqslant B < K,\\, 1\\leqslant Q\\leqslant N$，同一个字符不会被重复要求两次。", "outputFormat": "输出一个整数，满足所有要求的最短子串长度。特别地，如果不存在这样的子串，输出 \"``impossible``\"。", "hint": "#### 样例 1 解释\n\n有三个长度为 $2$ 的子串含有字符 $0$ 和 $1$ 各一个，分别为 ``0 1``、``1 0`` 和 ``0 1``，但是不存在长度为 $1$ 的子串满足要求，因此满足要求的最短子串的长度为 $2$。\n\n#### 样例 2 解释\n\n最短的满足要求的子串为 ``1 3 2 0 1 2 0``。\n\n#### 样例 3 解释\n\n在这个字符串中，``0`` 的数量不足。\n\n| 子任务 | 分值 | 限制 |\n|:--------:|:------:|:------:|\n|$1$     |$16$  |$1\\leqslant N\\leqslant 100,\\, R\\leqslant 10$|\n|$2$     |$24$  |$1\\leqslant N\\leqslant 4\\, 000,\\, R\\leqslant 10$|\n|$3$     |$28$  |$1\\leqslant N\\leqslant 200\\, 000,\\, R\\leqslant 10$|\n|$4$     |$32$  |$1\\leqslant N\\leqslant 200\\, 000$|\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2018] Martian DNA", "background": "", "description": "**This problem is translated from [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day 1 “[Martian DNA](https://boi18-day1-open.kattis.com/problems/boi18.dna)”.**\n\nYou are given a string of length $N$ over an alphabet of size $|\\Sigma| = K$, and $R$ requirements. Each requirement is: in the substring, character $B$ must appear at least $Q$ times. Find the length of the shortest substring that satisfies all requirements.", "inputFormat": "The first line contains three integers $N,\\, K,\\, R$, representing the length of the string, the size of the alphabet, and the number of requirements. It is guaranteed that $1\\leqslant R\\leqslant K\\leqslant N$.  \nThe second line contains $N$ space-separated integers describing the string. Characters are numbered starting from $0$, and every character in the alphabet appears at least once.  \nThe next $R$ lines each contain two integers $B$ and $Q$, describing one requirement. It is guaranteed that $0\\leqslant B < K,\\, 1\\leqslant Q\\leqslant N$, and no character will be required more than once.", "outputFormat": "Output one integer: the length of the shortest substring that satisfies all requirements. In particular, if no such substring exists, output \"``impossible``\".", "hint": "#### Explanation for Sample 1\n\nThere are three substrings of length $2$ that contain one occurrence each of characters $0$ and $1$: ``0 1``, ``1 0``, and ``0 1``. However, there is no substring of length $1$ that satisfies the requirements, so the shortest valid substring has length $2$.\n\n#### Explanation for Sample 2\n\nThe shortest substring that satisfies the requirements is ``1 3 2 0 1 2 0``.\n\n#### Explanation for Sample 3\n\nIn this string, the number of ``0`` is not enough.\n\n| Subtask | Score | Constraints |\n|:--------:|:------:|:------:|\n|$1$     |$16$  |$1\\leqslant N\\leqslant 100,\\, R\\leqslant 10$|\n|$2$     |$24$  |$1\\leqslant N\\leqslant 4\\, 000,\\, R\\leqslant 10$|\n|$3$     |$28$  |$1\\leqslant N\\leqslant 200\\, 000,\\, R\\leqslant 10$|\n|$4$     |$32$  |$1\\leqslant N\\leqslant 200\\, 000$|\n\nThanks to Hatsune_Miku for providing the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2018] 火星人的 DNA", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day1「[Martian DNA](https://boi18-day1-open.kattis.com/problems/boi18.dna)」**\n\n给定一个字符集大小 $|\\Sigma| = K$ 的长度为 $N$ 的字符串和 $R$ 个要求，每个要求为使子串中的字符 $B$ 至少出现 $Q$ 次。求出满足所有要求的最短子串长度。", "inputFormat": "第一行包括三个整数 $N,\\, K,\\, R$，分别表示字符串的长度、字符集的大小和要求个数，保证 $1\\leqslant R\\leqslant K\\leqslant N$。  \n第二行包含 $N$ 个用空格隔开的整数，表示这个字符串。字符从 $0$ 开始编号，每个字符集中的字符至少出现一次。  \n接下来的 $R$ 行，每行两个整数 $B$ 和 $Q$，表示一组要求，满足 $0\\leqslant B < K,\\, 1\\leqslant Q\\leqslant N$，同一个字符不会被重复要求两次。", "outputFormat": "输出一个整数，满足所有要求的最短子串长度。特别地，如果不存在这样的子串，输出 \"``impossible``\"。", "hint": "#### 样例 1 解释\n\n有三个长度为 $2$ 的子串含有字符 $0$ 和 $1$ 各一个，分别为 ``0 1``、``1 0`` 和 ``0 1``，但是不存在长度为 $1$ 的子串满足要求，因此满足要求的最短子串的长度为 $2$。\n\n#### 样例 2 解释\n\n最短的满足要求的子串为 ``1 3 2 0 1 2 0``。\n\n#### 样例 3 解释\n\n在这个字符串中，``0`` 的数量不足。\n\n| 子任务 | 分值 | 限制 |\n|:--------:|:------:|:------:|\n|$1$     |$16$  |$1\\leqslant N\\leqslant 100,\\, R\\leqslant 10$|\n|$2$     |$24$  |$1\\leqslant N\\leqslant 4\\, 000,\\, R\\leqslant 10$|\n|$3$     |$28$  |$1\\leqslant N\\leqslant 200\\, 000,\\, R\\leqslant 10$|\n|$4$     |$32$  |$1\\leqslant N\\leqslant 200\\, 000$|\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4793", "type": "P", "difficulty": 6, "samples": [["3\n0 0 5 5\n1 2 3 4\n2 1 4 3\n", "2\n"]], "limits": {"time": [1000, 3000, 3000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "安徽"], "title": "[AHOI2008] 矩形藏宝地", "background": null, "description": "欢乐岛上最著名的游戏是一个寻宝游戏，小可可来到宝藏的埋藏地，这是一块开阔地，宝藏被分散的埋藏在这块地下，现在要做的是一件件的把宝藏挖出来。为了提示宝藏的埋藏点，游戏的主办方把这块开阔地当作第一象限（包括原点和正半坐标轴），将所有可能埋藏宝藏的地方划成一个个矩形的土地，并把这些矩形土地的坐标都告诉了参赛者。挖宝的提示很简单，只要某一个矩阵土地至少被另外一个矩阵土地所包含，那么这个矩阵土地里肯定埋有宝藏。其实这些宝藏都是一些精美的纪念品，如果谁挖出来了纪念品就归谁了，小可可很想为这次旅程画上完美的句号，有你的帮助他信心十足，你只要告诉他：有多少个矩形土地里肯定埋有宝藏就行了。胜利就在眼前，加油吧！", "inputFormat": "第一行包含一个整数 $N\\leq 200000$，表示矩形的个数。\n接下来 $N$ 行，每行用 $4$ 个整数 $x_1,\\,y_1,\\,x_2,\\,y_2$，描述了一个矩形。其中 $(x_1,\\,y_1)$ 表示这个矩形左下角的坐标，$(x_2,\\,y_2)$ 表示右上角的坐标，一个 $x$ 值或 $y$ 值最多出现一次。", "outputFormat": "只包含一个整数，表示肯定埋有宝藏的矩形土地的个数。", "hint": "$30\\%$ 的数据中，$N\\leq 5000$。\n\n$70\\%$ 的数据中，$N\\leq 50000$。\n\n$100\\%$ 的数据中，$N\\leq 200000$。\n\n所有数据中，一个 $x$ 值或 $y$ 值最多出现一次。坐标范围 $2\\times 10 ^ 6$。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2008] Rectangular Treasure Land", "background": "", "description": "The most famous game on Happy Island is a treasure-hunting game. Xiaokeke arrives at the treasure burial area, which is an open field. The treasures are buried scattered underground in this field, and the task now is to dig them out one by one.\n\nTo indicate possible treasure locations, the organizers treat this open field as the first quadrant (including the origin and the positive coordinate axes). They divide all possible treasure locations into rectangular plots, and provide the coordinates of these rectangular plots to the contestants.\n\nThe hint for digging is very simple: if a certain rectangular plot is contained in at least one other rectangular plot, then there must be a treasure buried inside that rectangular plot.\n\nIn fact, these treasures are exquisite souvenirs. Whoever digs up a souvenir gets to keep it. Xiaokeke wants to end this journey perfectly, and with your help he is full of confidence. You only need to tell him: how many rectangular plots are guaranteed to contain a treasure.\n\nVictory is just ahead. Keep it up.", "inputFormat": "The first line contains an integer $N\\leq 200000$, indicating the number of rectangles.  \nThe next $N$ lines each contain $4$ integers $x_1,\\,y_1,\\,x_2,\\,y_2$, describing a rectangle. Here, $(x_1,\\,y_1)$ is the coordinate of the lower-left corner, and $(x_2,\\,y_2)$ is the coordinate of the upper-right corner. Each $x$ value or $y$ value appears at most once.", "outputFormat": "Contains only one integer, the number of rectangular plots that are guaranteed to contain a treasure.", "hint": "In $30\\%$ of the testdata, $N\\leq 5000$.  \n\nIn $70\\%$ of the testdata, $N\\leq 50000$.  \n\nIn $100\\%$ of the testdata, $N\\leq 200000$.  \n\nIn all testdata, each $x$ value or $y$ value appears at most once. The coordinate range is $2\\times 10 ^ 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2008] 矩形藏宝地", "background": null, "description": "欢乐岛上最著名的游戏是一个寻宝游戏，小可可来到宝藏的埋藏地，这是一块开阔地，宝藏被分散的埋藏在这块地下，现在要做的是一件件的把宝藏挖出来。为了提示宝藏的埋藏点，游戏的主办方把这块开阔地当作第一象限（包括原点和正半坐标轴），将所有可能埋藏宝藏的地方划成一个个矩形的土地，并把这些矩形土地的坐标都告诉了参赛者。挖宝的提示很简单，只要某一个矩阵土地至少被另外一个矩阵土地所包含，那么这个矩阵土地里肯定埋有宝藏。其实这些宝藏都是一些精美的纪念品，如果谁挖出来了纪念品就归谁了，小可可很想为这次旅程画上完美的句号，有你的帮助他信心十足，你只要告诉他：有多少个矩形土地里肯定埋有宝藏就行了。胜利就在眼前，加油吧！", "inputFormat": "第一行包含一个整数 $N\\leq 200000$，表示矩形的个数。\n接下来 $N$ 行，每行用 $4$ 个整数 $x_1,\\,y_1,\\,x_2,\\,y_2$，描述了一个矩形。其中 $(x_1,\\,y_1)$ 表示这个矩形左下角的坐标，$(x_2,\\,y_2)$ 表示右上角的坐标，一个 $x$ 值或 $y$ 值最多出现一次。", "outputFormat": "只包含一个整数，表示肯定埋有宝藏的矩形土地的个数。", "hint": "$30\\%$ 的数据中，$N\\leq 5000$。\n\n$70\\%$ 的数据中，$N\\leq 50000$。\n\n$100\\%$ 的数据中，$N\\leq 200000$。\n\n所有数据中，一个 $x$ 值或 $y$ 值最多出现一次。坐标范围 $2\\times 10 ^ 6$。", "locale": "zh-CN"}}}
{"pid": "P4794", "type": "P", "difficulty": 6, "samples": [["10 5\n1 5\n6 7\n5 1\n7 2\n2 4", "00101\n\n"], ["10 5\n1 4\n2 5\n4 7\n6 10\n8 1", "impossible"], ["5 2\n1 5\n3 3", "impossible"], ["5 3\n3 3\n2 1\n4 2", "101\n\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2018", "Special Judge", "枚举", "排序", "BalticOI（波罗的海）"], "title": "[BalticOI 2018] 交流电", "background": "### 滥用本题评测将封禁帐号", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Alternating Current](https://boi18-day2-open.kattis.com/problems/boi18.alternating)」**\n\n给一个环，这个环可以被分为等长的 $N$ 段，分别标号为 $1\\ldots N$。同时你可以通过 $M$ 个控制点将环的某一段染成红色或蓝色，这 $M$ 个控制点分别编号为 $1\\ldots M$。\n\n如何安排这 $M$ 个点控制的线段的颜色，使得轨道上每个点都被至少一条红色线段和至少一条蓝色线段覆盖。\n\n保证这个环中不存在不能被染色的部分。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，分别表示轨道段数和控制点个数。\n\n接下来 $M$ 行，每行两个整数 $a$ 和 $b$，分别表示每一个控制点可以控制颜色的左右端点。特别地，若 $a=b$ 则这个控制点只控制 $a$ 这一条长度为 $1$ 的线段；若 $b < a$ 则说明这个控制点能控制编号在区间 $[a,\\, N]\\cup[1,\\,b]$ 内的所有线段。", "outputFormat": "输出一行 $M$ 个字符，每个字符是 ``0`` 或 ``1``，分别表示设置在第 $i$ 个控制点控制的线段上，染成红色还是蓝色。\n\n如果有多组解请输出任意一组，如果无解请输出 ``impossible``。", "hint": "#### 样例 1 解释\n![](https://gitee.com/mingqihuang/pics/raw/master/alternatingfig.pdf.svg)\n\n上图为样例 1 的一组解。注意可以将所有的箭头反向得到另一组合法解 ``11010``。\n\n## 限制与提示\n\n|子任务|分值|数据范围|附加限制|\n|:----:|:--:|:------:|:------:|\n|$1$   |$13$|$2\\leqslant N,\\,M\\leqslant15$|.|\n|$2$   |$20$|$2\\leqslant N,\\,M\\leqslant100$|.|\n|$3$   |$22$|$2\\leqslant N,\\,M\\leqslant1000$|.|\n|$4$   |$19$|$2\\leqslant N,\\,M\\leqslant100\\,000$|保证 $b\\geqslant a$|\n|$5$   |$26$|$2\\leqslant N,\\,M\\leqslant100\\,000$|　|\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2018] Alternating Current", "background": "### Abusing the judge for this problem will result in your account being banned.", "description": "**This problem is translated from [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day 2 “[Alternating Current](https://boi18-day2-open.kattis.com/problems/boi18.alternating)”.**\n\nYou are given a circular track, which can be divided into $N$ equal-length segments, numbered $1 \\ldots N$. At the same time, you have $M$ control points that can color certain segments of the track either red or blue. These $M$ control points are numbered $1 \\ldots M$.\n\nYour task is to choose the colors of the segments controlled by these $M$ points so that every point on the track is covered by at least one red segment and at least one blue segment.\n\nIt is guaranteed that there is no part of the circle that cannot be colored.", "inputFormat": "The first line contains two integers $N$ and $M$, representing the number of track segments and the number of control points.\n\nThe next $M$ lines each contain two integers $a$ and $b$, representing the left and right endpoints of the range that the control point can color. In particular, if $a=b$, then this control point only controls the single segment $a$ with length $1$; if $b < a$, then this control point can control all segments with indices in the interval $[a,\\, N]\\cup[1,\\,b]$.", "outputFormat": "Output one line containing $M$ characters. Each character is either ``0`` or ``1``, indicating whether the segment controlled by the $i$-th control point is colored red or blue.\n\nIf there are multiple solutions, output any one of them. If there is no solution, output ``impossible``.", "hint": "#### Explanation for Sample 1\n\n![](https://gitee.com/mingqihuang/pics/raw/master/alternatingfig.pdf.svg)\n\nThe figure above shows one solution for Sample 1. Note that you can reverse all arrows to obtain another valid solution ``11010``.\n\n## Constraints\n\n| Subtask | Score | Constraints | Additional Constraints |\n|:------:|:-----:|:-----------:|:----------------------:|\n| $1$ | $13$ | $2\\leqslant N,\\,M\\leqslant15$ | . |\n| $2$ | $20$ | $2\\leqslant N,\\,M\\leqslant100$ | . |\n| $3$ | $22$ | $2\\leqslant N,\\,M\\leqslant1000$ | . |\n| $4$ | $19$ | $2\\leqslant N,\\,M\\leqslant100\\,000$ | It is guaranteed that $b\\geqslant a$. |\n| $5$ | $26$ | $2\\leqslant N,\\,M\\leqslant100\\,000$ | 　|\n\nThanks to Hatsune_Miku for providing the translation.\n\n# Input Format\n\n\n\n# Output Format\n\n\n\n# Hint\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2018] 交流电", "background": "### 滥用本题评测将封禁帐号", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Alternating Current](https://boi18-day2-open.kattis.com/problems/boi18.alternating)」**\n\n给一个环，这个环可以被分为等长的 $N$ 段，分别标号为 $1\\ldots N$。同时你可以通过 $M$ 个控制点将环的某一段染成红色或蓝色，这 $M$ 个控制点分别编号为 $1\\ldots M$。\n\n如何安排这 $M$ 个点控制的线段的颜色，使得轨道上每个点都被至少一条红色线段和至少一条蓝色线段覆盖。\n\n保证这个环中不存在不能被染色的部分。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，分别表示轨道段数和控制点个数。\n\n接下来 $M$ 行，每行两个整数 $a$ 和 $b$，分别表示每一个控制点可以控制颜色的左右端点。特别地，若 $a=b$ 则这个控制点只控制 $a$ 这一条长度为 $1$ 的线段；若 $b < a$ 则说明这个控制点能控制编号在区间 $[a,\\, N]\\cup[1,\\,b]$ 内的所有线段。", "outputFormat": "输出一行 $M$ 个字符，每个字符是 ``0`` 或 ``1``，分别表示设置在第 $i$ 个控制点控制的线段上，染成红色还是蓝色。\n\n如果有多组解请输出任意一组，如果无解请输出 ``impossible``。", "hint": "#### 样例 1 解释\n![](https://gitee.com/mingqihuang/pics/raw/master/alternatingfig.pdf.svg)\n\n上图为样例 1 的一组解。注意可以将所有的箭头反向得到另一组合法解 ``11010``。\n\n## 限制与提示\n\n|子任务|分值|数据范围|附加限制|\n|:----:|:--:|:------:|:------:|\n|$1$   |$13$|$2\\leqslant N,\\,M\\leqslant15$|.|\n|$2$   |$20$|$2\\leqslant N,\\,M\\leqslant100$|.|\n|$3$   |$22$|$2\\leqslant N,\\,M\\leqslant1000$|.|\n|$4$   |$19$|$2\\leqslant N,\\,M\\leqslant100\\,000$|保证 $b\\geqslant a$|\n|$5$   |$26$|$2\\leqslant N,\\,M\\leqslant100\\,000$|　|\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4795", "type": "P", "difficulty": 6, "samples": [["4 3 1\nACC\nCCA\nACA\nAAA", "3"], ["4 4 3\nCATT\nCAAA\nATGA\nTCTA", "4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000]}, "tags": ["数学", "2018", "进制", "构造", "BalticOI（波罗的海）"], "title": "[BalticOI 2018] 基因工程", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Genetics](https://boi18-day2-open.kattis.com/problems/boi18.genetics)」**\n\n给定 $N$ 个长度为 $M$ 的只由 ``A``、``T``、``G`` 和 ``C`` 组成的字符串，分别编号为 $1\\ldots N$，其中一个是模式串，其它 $N-1$ 个字符串与模式串都恰好有 $K$ 个字符不同，找到这个模式串。", "inputFormat": "第一行包含三个整数 $N$, $M$ 和 $K$，满足 $1\\leqslant K\\leqslant M$。\n\n接下来 $N$ 行，每行一个长度为 $M$ 的字符串。\n\n数据保证模式串一定存在。\n\n**警告：本题 IO 量较大，对于 Java 或 Python 语言，请使用较为快速的 IO 操作。**", "outputFormat": "输出一个整数表示模式串的编号。", "hint": "## 限制与提示\n\n|子任务|分值|数据范围|特殊约定|\n|:----:|:--:|:------:|:------:|\n|$1$   |$27$|$3\\leqslant N,\\,M\\leqslant 100$|无|\n|$2$   |$19$|$3\\leqslant N,\\,M\\leqslant 1800$|所有字符串中只包含 ``A`` 和 ``C``|\n|$3$   |$28$|$3\\leqslant N,\\,M\\leqslant 4100$|所有字符串中只包含 ``A`` 和 ``C``|\n|$4$   |$26$|$3\\leqslant N,\\,M\\leqslant 4100$|无|\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2018] Genetic Engineering", "background": "", "description": "**This problem is translated from [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day 2 “[Genetics](https://boi18-day2-open.kattis.com/problems/boi18.genetics)”.**\n\nYou are given $N$ strings of length $M$, consisting only of `A`, `T`, `G`, and `C`, numbered $1 \\ldots N$. One of them is the pattern string. Each of the other $N - 1$ strings differs from the pattern string in exactly $K$ characters. Find this pattern string.", "inputFormat": "The first line contains three integers $N$, $M$, and $K$, satisfying $1\\leqslant K\\leqslant M$.\n\nThe next $N$ lines each contain a string of length $M$.\n\nIt is guaranteed that the pattern string exists.\n\n**Warning: The I/O size of this problem is large. For Java or Python, please use faster I/O methods.**", "outputFormat": "Output one integer, the index of the pattern string.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2018] 基因工程", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Genetics](https://boi18-day2-open.kattis.com/problems/boi18.genetics)」**\n\n给定 $N$ 个长度为 $M$ 的只由 ``A``、``T``、``G`` 和 ``C`` 组成的字符串，分别编号为 $1\\ldots N$，其中一个是模式串，其它 $N-1$ 个字符串与模式串都恰好有 $K$ 个字符不同，找到这个模式串。", "inputFormat": "第一行包含三个整数 $N$, $M$ 和 $K$，满足 $1\\leqslant K\\leqslant M$。\n\n接下来 $N$ 行，每行一个长度为 $M$ 的字符串。\n\n数据保证模式串一定存在。\n\n**警告：本题 IO 量较大，对于 Java 或 Python 语言，请使用较为快速的 IO 操作。**", "outputFormat": "输出一个整数表示模式串的编号。", "hint": "## 限制与提示\n\n|子任务|分值|数据范围|特殊约定|\n|:----:|:--:|:------:|:------:|\n|$1$   |$27$|$3\\leqslant N,\\,M\\leqslant 100$|无|\n|$2$   |$19$|$3\\leqslant N,\\,M\\leqslant 1800$|所有字符串中只包含 ``A`` 和 ``C``|\n|$3$   |$28$|$3\\leqslant N,\\,M\\leqslant 4100$|所有字符串中只包含 ``A`` 和 ``C``|\n|$4$   |$26$|$3\\leqslant N,\\,M\\leqslant 4100$|无|\n\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4796", "type": "P", "difficulty": 5, "samples": [["4 3 3\n1 2 1 3\n1 2\n2 3\n4 2", "10\n\n"], ["9 11 4\n1 2 3 4 1 2 1 2 2\n1 2\n1 3\n2 3\n2 4\n3 6\n6 2\n6 5\n4 3\n4 5\n7 8\n9 8", "70"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000, 768000]}, "tags": ["搜索", "2018", "枚举", "记忆化搜索", "BalticOI（波罗的海）", "状压 DP"], "title": "[BalticOI 2018] 路径", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Paths](https://boi18-day2-open.kattis.com/problems/boi18.paths)」**\n\n给定一张 $N$ 个点 $M$ 条边的无向图，每个点有一个颜色，所有点的颜色共有 $K$ 种，编号为 $1\\ldots K$。求图上有多少条长度至少为 $2$ 的简单路径，满足路径上的每一个点的颜色互不相同。\n\n路径上的点的连接顺序不同看作不同的两条路径。", "inputFormat": "第一行包含三个整数 $N$, $M$ 和 $K$。\n\n第二行包含 $N$ 个在 $1$ 到 $K$ 之间的整数，表示每个点的颜色。\n\n接下来的 $M$ 行每行两个整数 $a$ 和 $b$，表示图的一条边。\n\n数据保证图无自环无重边。", "outputFormat": "输出一个整数表示每一个点颜色都不同的路径条数。保证答案不会超过 $10^{18}$。", "hint": "#### 样例 1 解释\n![](https://cdn.vjudge.net.cn/864bb05c1889b6f8dfd6a1432020613e)\n\n样例 1 中表达的图如上图所示。每个点的底色分别为白色（颜色 $1$）、灰色（颜色 $2$）或黑色（颜色 $3$）。共有 $10$ 条路径满足路径上的所有点的颜色都不同。它们是：``1-2``, ``2-1``, ``2-3``, ``3-2``, ``2-4``, ``4-2``, ``1-2-4``, ``4-2-1``, ``3-2-4`` 和 ``4-2-3``。\n\n注意 ``1`` 不能看作是一条路径，因为一条路径至少连接两个点。``1-2-3`` 也不满足条件，因为有两个点都是 $1$ 号颜色。\n\n|子任务|分值|数据范围|\n|:--:|:--:|:--:|\n|$1$|$23$|$1 \\leqslant N,M \\leqslant 100, 1 \\leqslant K \\leqslant 4$|\n|$2$|$20$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 3$|\n|$3$|$27$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 4$|\n|$4$|$30$|$1 \\leqslant N,M \\leqslant 100\\,000, 1 \\leqslant K \\leqslant 5$|\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN", "translations": {"en": {"title": "[BalticOI 2018] Paths", "background": "", "description": "**This problem is translated from [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day 2 “[Paths](https://boi18-day2-open.kattis.com/problems/boi18.paths)”.**\n\nGiven an undirected graph with $N$ vertices and $M$ edges. Each vertex has a color. There are $K$ different colors in total, numbered $1 \\ldots K$. Find how many simple paths in the graph of length at least $2$ satisfy that all vertices on the path have pairwise distinct colors.\n\nPaths with different visiting orders of vertices are considered different paths.", "inputFormat": "The first line contains three integers $N$, $M$, and $K$.\n\nThe second line contains $N$ integers between $1$ and $K$, representing the color of each vertex.\n\nEach of the next $M$ lines contains two integers $a$ and $b$, denoting an edge of the graph.\n\nIt is guaranteed that the graph has no self-loops and no multiple edges.", "outputFormat": "Output one integer: the number of paths in which all vertices have distinct colors. It is guaranteed that the answer will not exceed $10^{18}$.", "hint": "#### Explanation for Sample 1\n\n![](https://cdn.vjudge.net.cn/864bb05c1889b6f8dfd6a1432020613e)\n\nThe graph in Sample 1 is shown in the figure above. The background color of each vertex is white (color $1$), gray (color $2$), or black (color $3$). There are $10$ paths whose vertices all have distinct colors. They are: ``1-2``, ``2-1``, ``2-3``, ``3-2``, ``2-4``, ``4-2``, ``1-2-4``, ``4-2-1``, ``3-2-4``, and ``4-2-3``.\n\nNote that ``1`` cannot be considered a path, because a path must connect at least two vertices. Also, ``1-2-3`` does not satisfy the condition, because two vertices have color $1$.\n\n|Subtask|Score|Constraints|\n|:--:|:--:|:--:|\n|$1$|$23$|$1 \\leqslant N,M \\leqslant 100, 1 \\leqslant K \\leqslant 4$|\n|$2$|$20$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 3$|\n|$3$|$27$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 4$|\n|$4$|$30$|$1 \\leqslant N,M \\leqslant 100\\,000, 1 \\leqslant K \\leqslant 5$|\n\nThanks to Hatsune_Miku for providing the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[BalticOI 2018] 路径", "background": "", "description": "**题目译自 [BalticOI 2018](https://boi2018.progolymp.se/tasks/) Day2「[Paths](https://boi18-day2-open.kattis.com/problems/boi18.paths)」**\n\n给定一张 $N$ 个点 $M$ 条边的无向图，每个点有一个颜色，所有点的颜色共有 $K$ 种，编号为 $1\\ldots K$。求图上有多少条长度至少为 $2$ 的简单路径，满足路径上的每一个点的颜色互不相同。\n\n路径上的点的连接顺序不同看作不同的两条路径。", "inputFormat": "第一行包含三个整数 $N$, $M$ 和 $K$。\n\n第二行包含 $N$ 个在 $1$ 到 $K$ 之间的整数，表示每个点的颜色。\n\n接下来的 $M$ 行每行两个整数 $a$ 和 $b$，表示图的一条边。\n\n数据保证图无自环无重边。", "outputFormat": "输出一个整数表示每一个点颜色都不同的路径条数。保证答案不会超过 $10^{18}$。", "hint": "#### 样例 1 解释\n![](https://cdn.vjudge.net.cn/864bb05c1889b6f8dfd6a1432020613e)\n\n样例 1 中表达的图如上图所示。每个点的底色分别为白色（颜色 $1$）、灰色（颜色 $2$）或黑色（颜色 $3$）。共有 $10$ 条路径满足路径上的所有点的颜色都不同。它们是：``1-2``, ``2-1``, ``2-3``, ``3-2``, ``2-4``, ``4-2``, ``1-2-4``, ``4-2-1``, ``3-2-4`` 和 ``4-2-3``。\n\n注意 ``1`` 不能看作是一条路径，因为一条路径至少连接两个点。``1-2-3`` 也不满足条件，因为有两个点都是 $1$ 号颜色。\n\n|子任务|分值|数据范围|\n|:--:|:--:|:--:|\n|$1$|$23$|$1 \\leqslant N,M \\leqslant 100, 1 \\leqslant K \\leqslant 4$|\n|$2$|$20$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 3$|\n|$3$|$27$|$1 \\leqslant N,M \\leqslant 300\\,000, 1 \\leqslant K \\leqslant 4$|\n|$4$|$30$|$1 \\leqslant N,M \\leqslant 100\\,000, 1 \\leqslant K \\leqslant 5$|\n\n感谢 Hatsune_Miku 提供的翻译", "locale": "zh-CN"}}}
{"pid": "P4797", "type": "P", "difficulty": 6, "samples": [["5 6\n1 2\n1 3\n2 3\n4 3\n5 2\n4 5", "2 3 4 5"], ["4 5\n1 2\n2 3\n3 4\n4 1\n1 3", "no"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2015] 波将金的路径 (Day1)", "background": null, "description": "**译自 [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day1 T1「[Potemkin cycle](https://ceoi2015.fi.muni.cz/day1/eng/day1task1-eng.pdf)」**\n\n**简要题意** $\\,$ 给一张无向图，$|V|=N,$ $|E|=R$。请找一条简单环，设该环的点集为 $V'$，要求：$|V'| \\ge 4$，且 $V'$ 的导出子图只含该环本身。\n\n---\n\n波将金公爵的领土可以视作一张无向图，他要求你找到一条路线，经过的结点以序列 $s_1,\\dots,s_m$表示，且满足以下要求：\n\n - $m \\geq 4$\n\n- 经过的每个结点互不相同（即对于所有$i \\neq j$满足$s_i \\neq s_j$）\n\n- 对于 $i = 1,\\dots,m - 1$，满足 $s_i$ 与 $s_{i + 1}$ 直接连接，且 $s_m$ 与 $s_1$ 直接连接。\n\n- 序列中的结点没有其他的边（即对于所有 $i < j$，使得 $j \\neq i + 1$ 且 $i \\neq 1$ 或者是 $j \\neq m$，结点 $s_i$ 和 $s_j$ 之间没有边）。", "inputFormat": "第一行，两个非负整数 $N$ 和 $R(0 \\leq N \\leq 1\\ 000,0 \\leq R \\leq 100\\ 000)$，分别表示结点的个数和道路的个数。\n\n接下来 $R$ 行，其中第 $i$ 行包括两个不同的正整数 $a_i$ 和 $b_i(1 \\leq a_i,b_i \\leq N)$，表示结点 $a_i$ 与 $b_i$ 之间有一条边。\n\n保证每两个结点最多有一条边连接。", "outputFormat": "输出序列 $s_1,\\dots,s_m$，表示问题描述的序列（如果有多解任意输出一个）。如果无解，输出`no`。", "hint": "$N$ 与 $R$ 的上限如下表所示：\n\n|数据点|$1-3$|$4-5$|$6-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$N$ 的上限|$10$|$100$|$300$|$1\\ 000$|\n|$R$ 的上限|$45$|$1\\ 000$|$20\\ 000$|$100\\ 000$|", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2015] Potemkin Cycle (Day1)", "background": "", "description": "**Translated from [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day1 T1 “[Potemkin cycle](https://ceoi2015.fi.muni.cz/day1/eng/day1task1-eng.pdf)”.**\n\n**Brief statement** Given an undirected graph with $|V|=N$ and $|E|=R$. Find a simple cycle. Let the vertex set of this cycle be $V'$. It must satisfy: $|V'| \\ge 4$, and the subgraph induced by $V'$ contains only this cycle itself.\n\n---\n\nDuke Potemkin’s territory can be viewed as an undirected graph. He asks you to find a route whose visited vertices are represented by a sequence $s_1,\\dots,s_m$, and it must satisfy the following:\n\n- $m \\geq 4$.\n\n- All visited vertices are pairwise distinct (i.e., for all $i \\neq j$, $s_i \\neq s_j$).\n\n- For $i = 1,\\dots,m - 1$, $s_i$ is directly connected to $s_{i + 1}$, and $s_m$ is directly connected to $s_1$.\n\n- There are no other edges among the vertices in the sequence (i.e., for all $i < j$ such that $j \\neq i + 1$ and either $i \\neq 1$ or $j \\neq m$, there is no edge between $s_i$ and $s_j$).", "inputFormat": "The first line contains two non-negative integers $N$ and $R$ $(0 \\leq N \\leq 1\\ 000, 0 \\leq R \\leq 100\\ 000)$, representing the number of vertices and the number of roads (edges), respectively.\n\nThe next $R$ lines each contain two distinct positive integers $a_i$ and $b_i$ $(1 \\leq a_i,b_i \\leq N)$, indicating that there is an edge between vertices $a_i$ and $b_i$.\n\nIt is guaranteed that there is at most one edge between any pair of vertices.", "outputFormat": "Output the sequence $s_1,\\dots,s_m$ that satisfies the requirements in the description (if there are multiple solutions, output any one). If there is no solution, output `no`.", "hint": "The upper limits of $N$ and $R$ are shown in the table below:\n\n|Test case group|$1-3$|$4-5$|$6-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|Upper limit of $N$|$10$|$100$|$300$|$1\\ 000$|\n|Upper limit of $R$|$45$|$1\\ 000$|$20\\ 000$|$100\\ 000$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2015] 波将金的路径 (Day1)", "background": null, "description": "**译自 [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day1 T1「[Potemkin cycle](https://ceoi2015.fi.muni.cz/day1/eng/day1task1-eng.pdf)」**\n\n**简要题意** $\\,$ 给一张无向图，$|V|=N,$ $|E|=R$。请找一条简单环，设该环的点集为 $V'$，要求：$|V'| \\ge 4$，且 $V'$ 的导出子图只含该环本身。\n\n---\n\n波将金公爵的领土可以视作一张无向图，他要求你找到一条路线，经过的结点以序列 $s_1,\\dots,s_m$表示，且满足以下要求：\n\n - $m \\geq 4$\n\n- 经过的每个结点互不相同（即对于所有$i \\neq j$满足$s_i \\neq s_j$）\n\n- 对于 $i = 1,\\dots,m - 1$，满足 $s_i$ 与 $s_{i + 1}$ 直接连接，且 $s_m$ 与 $s_1$ 直接连接。\n\n- 序列中的结点没有其他的边（即对于所有 $i < j$，使得 $j \\neq i + 1$ 且 $i \\neq 1$ 或者是 $j \\neq m$，结点 $s_i$ 和 $s_j$ 之间没有边）。", "inputFormat": "第一行，两个非负整数 $N$ 和 $R(0 \\leq N \\leq 1\\ 000,0 \\leq R \\leq 100\\ 000)$，分别表示结点的个数和道路的个数。\n\n接下来 $R$ 行，其中第 $i$ 行包括两个不同的正整数 $a_i$ 和 $b_i(1 \\leq a_i,b_i \\leq N)$，表示结点 $a_i$ 与 $b_i$ 之间有一条边。\n\n保证每两个结点最多有一条边连接。", "outputFormat": "输出序列 $s_1,\\dots,s_m$，表示问题描述的序列（如果有多解任意输出一个）。如果无解，输出`no`。", "hint": "$N$ 与 $R$ 的上限如下表所示：\n\n|数据点|$1-3$|$4-5$|$6-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$N$ 的上限|$10$|$100$|$300$|$1\\ 000$|\n|$R$ 的上限|$45$|$1\\ 000$|$20\\ 000$|$100\\ 000$|", "locale": "zh-CN"}}}
{"pid": "P4798", "type": "P", "difficulty": 4, "samples": [["3\n1 2 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["动态规划 DP", "2015", "CEOI（中欧）", "数位 DP"], "title": "[CEOI 2015] 卡尔文球锦标赛 (Day1)", "background": null, "description": "**译自 [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day1 T2「[Calvinball championship](https://ceoi2015.fi.muni.cz/day1/eng/day1task2-eng.pdf)」**\n\n一场卡尔文球比赛会有 $n$ 名选手参与，他们的编号分别为 $1\\dots n$，分为若干个非空的球队。我们规定球队之间按照每个球队编号最小的选手的编号排序，并且以从 1 开始的连续整数编号。\n\n举个栗子，譬如 1 号选手自己成一队，2, 3 和 5 号选手成一队，4 和 6 号选手成一队。\n\n>\\> $\\ \\texttt{1}$  \n>\\> $\\ \\texttt{2 3 5}$  \n>\\> $\\ \\texttt{4 6}$\n\n那么 1 号选手的球队就是 1 号球队，2 号选手的球队就是 2 号球队，4 号选手的球队就是 3 号球队。\n\n>\\> $\\ \\texttt{1|1}$  \n>\\> $\\ \\texttt{2|2 3 5}$  \n>\\> $\\ \\texttt{3|4 6}$\n\n每个人每天会选择不同的球队，我们可以在记录时省略选手的编号，仅记录每个位置对应选手所属球队编号的序列（上述例子为 `1 2 2 3 2 3`），因为每天的选手是一样的。当可能的选择方案全部被使用过后，锦标赛就结束了。\n\n由于选择方案十分多，选择困难症患者纷纷表示力不从心。今年，我们决定根据记录的序列的字典序来选择方案。因此，第一天，所有人都在一个队 `1 1 1 1 1 1`；第二天，所有人都与 6 号针锋相对 `1 1 1 1 1 2`……在最后一天，所有人互相打响战争 `1 2 3 4 5 6`。\n\n对于给定的球队记录，请你算出将会在未来的哪一天使用该记录。输出这个数字对 $1\\ 000\\ 007$ 取余的结果。", "inputFormat": "第一行，一个正整数 $n(1 \\leq n \\leq 10\\ 000)$。\n\n第二行，$n$ 个以空格分隔的正整数，表示任务所给的球队记录。", "outputFormat": "输出一个正整数，表示任务所给的球队记录将会被使用的天数对 $1\\ 000\\ 007$ 取余的结果。第一天的天数为 1。", "hint": "请注意，三人比赛中可能的选择有 `1 1 1` `1 1 2` `1 2 1` `1 2 2` 和 `1 2 3`。\n\n### 数据范围与提示\n\n|数据点|$1-3$|$4-5$|$6-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$n\\le$|$14$|$100$|$1\\ 000$|$10\\ 000$|", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2015] Calvinball Championship (Day1)", "background": "", "description": "**Translated from [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day1 T2 “[Calvinball championship](https://ceoi2015.fi.muni.cz/day1/eng/day1task2-eng.pdf)”.**\n\nA Calvinball match has $n$ players participating, numbered $1 \\dots n$, and they are divided into several non-empty teams. We define the order of teams by sorting them according to the smallest player number in each team, and then numbering the teams with consecutive integers starting from $1$.\n\nFor example, suppose player $1$ forms a team alone; players $2, 3,$ and $5$ form a team; and players $4$ and $6$ form a team.\n\n>\\> $\\ \\texttt{1}$  \n>\\> $\\ \\texttt{2 3 5}$  \n>\\> $\\ \\texttt{4 6}$\n\nThen player $1$’s team is team $1$, player $2$’s team is team $2$, and player $4$’s team is team $3$.\n\n>\\> $\\ \\texttt{1|1}$  \n>\\> $\\ \\texttt{2|2 3 5}$  \n>\\> $\\ \\texttt{3|4 6}$\n\nEach day, everyone will choose a different team partition. When recording, we can omit the player numbers and only record the sequence of team numbers that each position belongs to (in the above example, `1 2 2 3 2 3`), because the players are the same every day. The championship ends when all possible choices have been used.\n\nSince there are too many choices, indecisive people find it hard to handle. This year, we decide to choose the partitions according to the lexicographical order of the recorded sequences. Therefore, on the first day, everyone is in one team: `1 1 1 1 1 1`; on the second day, everyone opposes player $6$: `1 1 1 1 1 2`; … on the last day, everyone is in their own team: `1 2 3 4 5 6`.\n\nGiven a recorded team sequence, compute on which future day this record will be used. Output this number modulo $1\\ 000\\ 007$.", "inputFormat": "The first line contains a positive integer $n(1 \\leq n \\leq 10\\ 000)$.\n\nThe second line contains $n$ positive integers separated by spaces, representing the team record given in the task.", "outputFormat": "Output a positive integer: the day on which the given team record will be used, modulo $1\\ 000\\ 007$. The first day is numbered $1$.", "hint": "Please note that for a three-player match, the possible choices are `1 1 1`, `1 1 2`, `1 2 1`, `1 2 2`, and `1 2 3`.\n\n### Constraints and Hints\n\n|Test case|$1-3$|$4-5$|$6-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$n \\le$|$14$|$100$|$1\\ 000$|$10\\ 000$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2015] 卡尔文球锦标赛 (Day1)", "background": null, "description": "**译自 [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day1 T2「[Calvinball championship](https://ceoi2015.fi.muni.cz/day1/eng/day1task2-eng.pdf)」**\n\n一场卡尔文球比赛会有 $n$ 名选手参与，他们的编号分别为 $1\\dots n$，分为若干个非空的球队。我们规定球队之间按照每个球队编号最小的选手的编号排序，并且以从 1 开始的连续整数编号。\n\n举个栗子，譬如 1 号选手自己成一队，2, 3 和 5 号选手成一队，4 和 6 号选手成一队。\n\n>\\> $\\ \\texttt{1}$  \n>\\> $\\ \\texttt{2 3 5}$  \n>\\> $\\ \\texttt{4 6}$\n\n那么 1 号选手的球队就是 1 号球队，2 号选手的球队就是 2 号球队，4 号选手的球队就是 3 号球队。\n\n>\\> $\\ \\texttt{1|1}$  \n>\\> $\\ \\texttt{2|2 3 5}$  \n>\\> $\\ \\texttt{3|4 6}$\n\n每个人每天会选择不同的球队，我们可以在记录时省略选手的编号，仅记录每个位置对应选手所属球队编号的序列（上述例子为 `1 2 2 3 2 3`），因为每天的选手是一样的。当可能的选择方案全部被使用过后，锦标赛就结束了。\n\n由于选择方案十分多，选择困难症患者纷纷表示力不从心。今年，我们决定根据记录的序列的字典序来选择方案。因此，第一天，所有人都在一个队 `1 1 1 1 1 1`；第二天，所有人都与 6 号针锋相对 `1 1 1 1 1 2`……在最后一天，所有人互相打响战争 `1 2 3 4 5 6`。\n\n对于给定的球队记录，请你算出将会在未来的哪一天使用该记录。输出这个数字对 $1\\ 000\\ 007$ 取余的结果。", "inputFormat": "第一行，一个正整数 $n(1 \\leq n \\leq 10\\ 000)$。\n\n第二行，$n$ 个以空格分隔的正整数，表示任务所给的球队记录。", "outputFormat": "输出一个正整数，表示任务所给的球队记录将会被使用的天数对 $1\\ 000\\ 007$ 取余的结果。第一天的天数为 1。", "hint": "请注意，三人比赛中可能的选择有 `1 1 1` `1 1 2` `1 2 1` `1 2 2` 和 `1 2 3`。\n\n### 数据范围与提示\n\n|数据点|$1-3$|$4-5$|$6-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$n\\le$|$14$|$100$|$1\\ 000$|$10\\ 000$|", "locale": "zh-CN"}}}
{"pid": "P4799", "type": "P", "difficulty": 4, "samples": [["5 1000\n100 1500 500 500 1000", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "2015", "CEOI（中欧）", "折半搜索 meet in the middle"], "title": "[CEOI 2015] 世界冰球锦标赛 (Day2)", "background": "", "description": " **译自 [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day2 T1「[Ice Hockey World Championship](https://ceoi2015.fi.muni.cz/day2/eng/day2task1-eng.pdf)」**\n\n> 今年的世界冰球锦标赛在捷克举行。Bobek 已经抵达布拉格，他不是任何团队的粉丝，也没有时间观念。他只是单纯的想去看几场比赛。如果他有足够的钱，他会去看所有的比赛。不幸的是，他的财产十分有限，他决定把所有财产都用来买门票。\n\n给出 Bobek 的预算和每场比赛的票价，试求：如果总票价不超过预算，他有多少种观赛方案。如果存在以其中一种方案观看某场比赛而另一种方案不观看，则认为这两种方案不同。", "inputFormat": "第一行，两个正整数 $N$ 和 $M(1 \\leq N \\leq 40,1 \\leq M \\leq 10^{18})$，表示比赛的个数和 Bobek 那家徒四壁的财产。  \n\n第二行，$N$ 个以空格分隔的正整数，均不超过 $10^{16}$，代表每场比赛门票的价格。", "outputFormat": "输出一行，表示方案的个数。由于 $N$ 十分大，注意：答案 $\\le 2^{40}$。\n", "hint": "#### 样例解释\n八种方案分别是：\n\n - 一场都不看，溜了溜了  \n - 价格 $100$ 的比赛  \n - 第一场价格 $500$ 的比赛  \n - 第二场价格 $500$ 的比赛  \n - 价格 $100$ 的比赛和第一场价格 $500$ 的比赛  \n - 价格 $100$ 的比赛和第二场价格 $500$ 的比赛  \n - 两场价格 $500$ 的比赛  \n - 价格 $1000$ 的比赛\n\n有十组数据，每通过一组数据你可以获得 10 分。各组数据的数据范围如下表所示：\n\n|数据组号|$1-2$|$3-4$|$5-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$N \\leq$|$10$|$20$|$40$|$40$|\n|$M \\leq$|$10^6$|$10^{18}$|$10^6$|$10^{18}$|", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2015] Ice Hockey World Championship (Day2)", "background": "", "description": "**Translated from [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day2 T1 “[Ice Hockey World Championship](https://ceoi2015.fi.muni.cz/day2/eng/day2task1-eng.pdf)”.**\n\n> This year’s Ice Hockey World Championship is held in the Czech Republic. Bobek has arrived in Prague. He is not a fan of any team, and he has no sense of time. He simply wants to watch some matches. If he had enough money, he would watch all the matches. Unfortunately, his money is very limited, so he decides to spend all his money on tickets.\n\nGiven Bobek’s budget and the ticket price of each match, find: how many different ways he can choose matches to watch such that the total ticket cost does not exceed the budget. If there exists a match that is watched in one plan but not watched in another plan, then the two plans are considered different.", "inputFormat": "The first line contains two positive integers $N$ and $M(1 \\leq N \\leq 40,1 \\leq M \\leq 10^{18})$, denoting the number of matches and Bobek’s extremely limited budget.\n\nThe second line contains $N$ positive integers separated by spaces, each not exceeding $10^{16}$, representing the ticket price of each match.", "outputFormat": "Output one line containing the number of plans. Since $N$ is very large, note that the answer $\\le 2^{40}$.", "hint": "#### Sample Explanation\n\nThe eight plans are:\n\n- Watch no matches and leave.  \n- The match with price $100$.  \n- The first match with price $500$.  \n- The second match with price $500$.  \n- The match with price $100$ and the first match with price $500$.  \n- The match with price $100$ and the second match with price $500$.  \n- Both matches with price $500$.  \n- The match with price $1000$.\n\nThere are 10 test groups. For each group you pass, you get 10 points. The Constraints for each group are shown in the table below:\n\n|Test group|$1-2$|$3-4$|$5-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$N \\leq$|$10$|$20$|$40$|$40$|\n|$M \\leq$|$10^6$|$10^{18}$|$10^6$|$10^{18}$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2015] 世界冰球锦标赛 (Day2)", "background": "", "description": " **译自 [CEOI2015](https://ceoi2015.fi.muni.cz/tasks.php) Day2 T1「[Ice Hockey World Championship](https://ceoi2015.fi.muni.cz/day2/eng/day2task1-eng.pdf)」**\n\n> 今年的世界冰球锦标赛在捷克举行。Bobek 已经抵达布拉格，他不是任何团队的粉丝，也没有时间观念。他只是单纯的想去看几场比赛。如果他有足够的钱，他会去看所有的比赛。不幸的是，他的财产十分有限，他决定把所有财产都用来买门票。\n\n给出 Bobek 的预算和每场比赛的票价，试求：如果总票价不超过预算，他有多少种观赛方案。如果存在以其中一种方案观看某场比赛而另一种方案不观看，则认为这两种方案不同。", "inputFormat": "第一行，两个正整数 $N$ 和 $M(1 \\leq N \\leq 40,1 \\leq M \\leq 10^{18})$，表示比赛的个数和 Bobek 那家徒四壁的财产。  \n\n第二行，$N$ 个以空格分隔的正整数，均不超过 $10^{16}$，代表每场比赛门票的价格。", "outputFormat": "输出一行，表示方案的个数。由于 $N$ 十分大，注意：答案 $\\le 2^{40}$。\n", "hint": "#### 样例解释\n八种方案分别是：\n\n - 一场都不看，溜了溜了  \n - 价格 $100$ 的比赛  \n - 第一场价格 $500$ 的比赛  \n - 第二场价格 $500$ 的比赛  \n - 价格 $100$ 的比赛和第一场价格 $500$ 的比赛  \n - 价格 $100$ 的比赛和第二场价格 $500$ 的比赛  \n - 两场价格 $500$ 的比赛  \n - 价格 $1000$ 的比赛\n\n有十组数据，每通过一组数据你可以获得 10 分。各组数据的数据范围如下表所示：\n\n|数据组号|$1-2$|$3-4$|$5-7$|$8-10$|\n|-|:-:|:-:|:-:|:-:|\n|$N \\leq$|$10$|$20$|$40$|$40$|\n|$M \\leq$|$10^6$|$10^{18}$|$10^6$|$10^{18}$|", "locale": "zh-CN"}}}
{"pid": "P4800", "type": "P", "difficulty": 6, "samples": [["4 3\n2\n1 1 7 3\n3 2 4 2\n4\n1 2 2 3\n1 1 4 3\n4 2 4 2\n1 3 4 3", "4\n4\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2015", "CEOI（中欧）", "差分"], "title": "[CEOI 2015] 核能国度 (Day2)", "background": "", "description": "核能国可以看作一个由 $W \\times H$ 的方格组成的矩形。核能国有 $N$ 个核电站，每个核电站占用一个方格。不幸的是，核能国遭遇了百年一遇的特大地震，导致所有的核电站都发生了核泄漏。\n\n每个核电站的核泄漏程度可以用两个整数 $a, b$ 来表示。如果位于 $P=[x_P,y_P]$ 的核电站爆炸，方格 $C=[x_C,y_C]$ 会增加 $\\mathrm{max}(0,$ $a-b\\times d(P,C))$ 贝克的辐射（贝克是单位），其中 $d(P,C)$ 是两个方格的切比雪夫距离，即 $d(P,C) =$ $\\mathrm{max}(|x_P - x_C|,$ $|y_P - y_C|)$。  \n\n一个方格可能会受到多处核泄漏的影响。  \n\n例如，如果一个 $a = 7,$ $b = 3$ 的核电站爆炸了，所在的方格 $X$ 会受到 $7$ 贝克辐射（贝克是单位），满足 $d(X,Y) = 1$ 的 $8$ 个方格 $Y$ 会受到 $4$ 贝克辐射，满足 $d(X,Z) = 2$ 的 $16$ 个方格 $Z$ 会受到 $1$ 贝克辐射。\n\n环保部门给了你 $Q$ 组询问，每组询问会划定核能国领土中的一个矩形，请回答：矩形区域内（每个方格）所受的平均辐射量为多少。", "inputFormat": "第一行，两个正整数 $W$ 和 $H(W × H \\leq 2.5×10^6)$，分别表示核能国的宽度与高度。  \n\n第二行，一个正整数 $N$，表示核电站的个数 $(1 \\leq N \\leq 2×10^5)$。\n\n在接下来的 $N$ 行中，每行四个正整数 $x_i,y_i,a_i,b_i(1 \\leq x_i \\leq W,1 \\leq y_i \\leq H,1 \\leq a_i,b_i \\leq 10^9)$，表示有一个核电站位于方格 $[x_i,y_i]$，它的参数为 $a_i$ 与 $b_I$。每个格子最多有一个核电站。\n\n第 $N+3$ 行，一个正整数 $Q$，表示询问的次数 $(1 \\leq Q \\leq 2×10^5)$。\n\n在接下来的 $Q$ 行中，每行四个 正整数 $x_{1j},y_{1j},x_{2j},y_{2j}(1 \\leq x_{1j} \\leq x_{2j} \\leq W,1 \\leq y_{1j} \\leq y_{2j} \\leq H)$，表示该询问给出的矩形区域的左上角在 $[x_{1j},y_{1j}]$ 且它的右下角在 $[x_{2j},y_{2j}]$。\n\n你可以假设核能国内的总辐射量少于 $2^{63}$。", "outputFormat": "对于每个询问，输出一行表示给定矩形区域内所有方格的平均辐射量，四舍五入至整数。", "hint": "以下为两次爆炸后对每个方格产生的辐射量：\n```plain\n7 6 3 2\n4 6 5 2\n1 3 3 2\n```\n\n - $2^2$ 方形区域内的总辐射为 $14$，所以平均值为 $14\\div 4=3.5$，四舍五入至 $4$。\n\n - 整个核能国的总辐射为 $44$，所以平均值为 $44\\div 12 \\approx 3.67$，四舍五入至 $4$。\n\n - 单个格子的平均辐射量就是它所受到的辐射量。\n\n - 最后一行的平均辐射量为 $9\\div 4=2.25$，四舍五入至 $2$。\n\n有 14 组测试数据。奇数的测试组只包含 $a$ 是 $b$ 的倍数的核电站。对每个子任务的进一步限制如下：\n\n|测试组|进一步限制|分数|\n|:-:|:-:|:-:|\n|$1$|$H=1,N\\cdot W \\leq 10^8,Q \\cdot W \\leq 10^8$|$3$|\n|$2$|$H=1,N\\cdot W \\leq 10^8,Q \\cdot W \\leq 10^8$|$2$|\n|$3$|$N\\cdot W \\cdot H \\leq 10^8,Q \\cdot W \\cdot H \\leq 10^8$|$3$|\n|$4$|$N\\cdot W \\cdot H \\leq 10^8,Q \\cdot W \\cdot H \\leq 10^8$|$2$|\n|$5$|$H=1,N\\cdot W \\leq 10^8$|$6$|\n|$6$|$H=1,N\\cdot W \\leq 10^8$|$4$|\n|$7$|$N\\cdot W \\cdot H \\leq 10^8$|$6$|\n|$8$|$N\\cdot W \\cdot H \\leq 10^8$|$4$|\n|$9$|$H=1$|$15$|\n|$10$|$H=1$|$10$|\n|$11$|没有符合**界限**定义的爆炸事件|$15$|\n|$12$|没有符合**界限**定义的爆炸事件|$10$|\n|$13$|无|$12$|\n|$14$|无|$8$|\n\n如果核电站位于核能国的边境或是在离边境稍近的位置，那么爆炸可能也会影响到核能国之外的方格。影响到核能国外方格的爆炸被称作**界限**。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2015] Nuclear Country (Day2)", "background": "", "description": "Nuclear Country can be seen as a rectangle made of a $W \\times H$ grid of cells. There are $N$ nuclear power plants in Nuclear Country, and each plant occupies one cell. Unfortunately, Nuclear Country has suffered a once-in-a-century major earthquake, causing all nuclear power plants to leak radiation.\n\nThe leakage level of each nuclear power plant can be described by two integers $a, b$. If the plant at $P=[x_P,y_P]$ explodes, then a cell $C=[x_C,y_C]$ will receive an additional $\\mathrm{max}(0,$ $a-b\\times d(P,C))$ becquerels of radiation (becquerel is a unit), where $d(P,C)$ is the Chebyshev distance between the two cells, i.e. $d(P,C) =$ $\\mathrm{max}(|x_P - x_C|,$ $|y_P - y_C|)$.\n\nA cell may be affected by radiation leaks from multiple plants.\n\nFor example, if a plant with $a = 7,$ $b = 3$ explodes, the cell $X$ where it is located will receive $7$ becquerels of radiation. The $8$ cells $Y$ with $d(X,Y) = 1$ will receive $4$ becquerels, and the $16$ cells $Z$ with $d(X,Z) = 2$ will receive $1$ becquerel.\n\nThe environmental agency gives you $Q$ queries. Each query specifies a rectangle within Nuclear Country. You need to answer: what is the average radiation received (per cell) within that rectangular area.", "inputFormat": "The first line contains two positive integers $W$ and $H$ $(W \\times H \\leq 2.5\\times 10^6)$, representing the width and height of Nuclear Country.\n\nThe second line contains one positive integer $N$, the number of nuclear power plants $(1 \\leq N \\leq 2\\times 10^5)$.\n\nIn the next $N$ lines, each line contains four positive integers $x_i,y_i,a_i,b_i$ $(1 \\leq x_i \\leq W, 1 \\leq y_i \\leq H, 1 \\leq a_i,b_i \\leq 10^9)$, meaning there is a plant at cell $[x_i,y_i]$ with parameters $a_i$ and $b_i$. Each cell contains at most one plant.\n\nLine $N+3$ contains one positive integer $Q$, the number of queries $(1 \\leq Q \\leq 2\\times 10^5)$.\n\nIn the next $Q$ lines, each line contains four positive integers $x_{1j},y_{1j},x_{2j},y_{2j}$ $(1 \\leq x_{1j} \\leq x_{2j} \\leq W, 1 \\leq y_{1j} \\leq y_{2j} \\leq H)$, describing a query rectangle whose top-left corner is $[x_{1j},y_{1j}]$ and whose bottom-right corner is $[x_{2j},y_{2j}]$.\n\nYou may assume that the total radiation within Nuclear Country is less than $2^{63}$.", "outputFormat": "For each query, output one line with the average radiation over all cells in the given rectangle, rounded to the nearest integer.", "hint": "The following shows the radiation in each cell after two explosions:\n```plain\n7 6 3 2\n4 6 5 2\n1 3 3 2\n```\n\n- The total radiation in a $2^2$ square area is $14$, so the average is $14\\div 4=3.5$, which rounds to $4$.\n\n- The total radiation in the whole Nuclear Country is $44$, so the average is $44\\div 12 \\approx 3.67$, which rounds to $4$.\n\n- For a single cell, the average radiation is exactly the radiation it receives.\n\n- For the last row, the average is $9\\div 4=2.25$, which rounds to $2$.\n\nThere are 14 test cases. The odd-numbered test cases contain only plants where $a$ is a multiple of $b$. Further limits for each subtask are as follows:\n\n|Test case|Additional constraints|Score|\n|:-:|:-:|:-:|\n|$1$|$H=1,N\\cdot W \\leq 10^8,Q \\cdot W \\leq 10^8$|$3$|\n|$2$|$H=1,N\\cdot W \\leq 10^8,Q \\cdot W \\leq 10^8$|$2$|\n|$3$|$N\\cdot W \\cdot H \\leq 10^8,Q \\cdot W \\cdot H \\leq 10^8$|$3$|\n|$4$|$N\\cdot W \\cdot H \\leq 10^8,Q \\cdot W \\cdot H \\leq 10^8$|$2$|\n|$5$|$H=1,N\\cdot W \\leq 10^8$|$6$|\n|$6$|$H=1,N\\cdot W \\leq 10^8$|$4$|\n|$7$|$N\\cdot W \\cdot H \\leq 10^8$|$6$|\n|$8$|$N\\cdot W \\cdot H \\leq 10^8$|$4$|\n|$9$|$H=1$|$15$|\n|$10$|$H=1$|$10$|\n|$11$|There are no explosion events that satisfy the definition of **boundary**|$15$|\n|$12$|There are no explosion events that satisfy the definition of **boundary**|$10$|\n|$13$|None|$12$|\n|$14$|None|$8$|\n\nIf a nuclear power plant is on the border of Nuclear Country, or close to the border, its explosion may also affect cells outside Nuclear Country. An explosion that affects cells outside Nuclear Country is called a **boundary**.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2015] 核能国度 (Day2)", "background": "", "description": "核能国可以看作一个由 $W \\times H$ 的方格组成的矩形。核能国有 $N$ 个核电站，每个核电站占用一个方格。不幸的是，核能国遭遇了百年一遇的特大地震，导致所有的核电站都发生了核泄漏。\n\n每个核电站的核泄漏程度可以用两个整数 $a, b$ 来表示。如果位于 $P=[x_P,y_P]$ 的核电站爆炸，方格 $C=[x_C,y_C]$ 会增加 $\\mathrm{max}(0,$ $a-b\\times d(P,C))$ 贝克的辐射（贝克是单位），其中 $d(P,C)$ 是两个方格的切比雪夫距离，即 $d(P,C) =$ $\\mathrm{max}(|x_P - x_C|,$ $|y_P - y_C|)$。  \n\n一个方格可能会受到多处核泄漏的影响。  \n\n例如，如果一个 $a = 7,$ $b = 3$ 的核电站爆炸了，所在的方格 $X$ 会受到 $7$ 贝克辐射（贝克是单位），满足 $d(X,Y) = 1$ 的 $8$ 个方格 $Y$ 会受到 $4$ 贝克辐射，满足 $d(X,Z) = 2$ 的 $16$ 个方格 $Z$ 会受到 $1$ 贝克辐射。\n\n环保部门给了你 $Q$ 组询问，每组询问会划定核能国领土中的一个矩形，请回答：矩形区域内（每个方格）所受的平均辐射量为多少。", "inputFormat": "第一行，两个正整数 $W$ 和 $H(W × H \\leq 2.5×10^6)$，分别表示核能国的宽度与高度。  \n\n第二行，一个正整数 $N$，表示核电站的个数 $(1 \\leq N \\leq 2×10^5)$。\n\n在接下来的 $N$ 行中，每行四个正整数 $x_i,y_i,a_i,b_i(1 \\leq x_i \\leq W,1 \\leq y_i \\leq H,1 \\leq a_i,b_i \\leq 10^9)$，表示有一个核电站位于方格 $[x_i,y_i]$，它的参数为 $a_i$ 与 $b_I$。每个格子最多有一个核电站。\n\n第 $N+3$ 行，一个正整数 $Q$，表示询问的次数 $(1 \\leq Q \\leq 2×10^5)$。\n\n在接下来的 $Q$ 行中，每行四个 正整数 $x_{1j},y_{1j},x_{2j},y_{2j}(1 \\leq x_{1j} \\leq x_{2j} \\leq W,1 \\leq y_{1j} \\leq y_{2j} \\leq H)$，表示该询问给出的矩形区域的左上角在 $[x_{1j},y_{1j}]$ 且它的右下角在 $[x_{2j},y_{2j}]$。\n\n你可以假设核能国内的总辐射量少于 $2^{63}$。", "outputFormat": "对于每个询问，输出一行表示给定矩形区域内所有方格的平均辐射量，四舍五入至整数。", "hint": "以下为两次爆炸后对每个方格产生的辐射量：\n```plain\n7 6 3 2\n4 6 5 2\n1 3 3 2\n```\n\n - $2^2$ 方形区域内的总辐射为 $14$，所以平均值为 $14\\div 4=3.5$，四舍五入至 $4$。\n\n - 整个核能国的总辐射为 $44$，所以平均值为 $44\\div 12 \\approx 3.67$，四舍五入至 $4$。\n\n - 单个格子的平均辐射量就是它所受到的辐射量。\n\n - 最后一行的平均辐射量为 $9\\div 4=2.25$，四舍五入至 $2$。\n\n有 14 组测试数据。奇数的测试组只包含 $a$ 是 $b$ 的倍数的核电站。对每个子任务的进一步限制如下：\n\n|测试组|进一步限制|分数|\n|:-:|:-:|:-:|\n|$1$|$H=1,N\\cdot W \\leq 10^8,Q \\cdot W \\leq 10^8$|$3$|\n|$2$|$H=1,N\\cdot W \\leq 10^8,Q \\cdot W \\leq 10^8$|$2$|\n|$3$|$N\\cdot W \\cdot H \\leq 10^8,Q \\cdot W \\cdot H \\leq 10^8$|$3$|\n|$4$|$N\\cdot W \\cdot H \\leq 10^8,Q \\cdot W \\cdot H \\leq 10^8$|$2$|\n|$5$|$H=1,N\\cdot W \\leq 10^8$|$6$|\n|$6$|$H=1,N\\cdot W \\leq 10^8$|$4$|\n|$7$|$N\\cdot W \\cdot H \\leq 10^8$|$6$|\n|$8$|$N\\cdot W \\cdot H \\leq 10^8$|$4$|\n|$9$|$H=1$|$15$|\n|$10$|$H=1$|$10$|\n|$11$|没有符合**界限**定义的爆炸事件|$15$|\n|$12$|没有符合**界限**定义的爆炸事件|$10$|\n|$13$|无|$12$|\n|$14$|无|$8$|\n\n如果核电站位于核能国的边境或是在离边境稍近的位置，那么爆炸可能也会影响到核能国之外的方格。影响到核能国外方格的爆炸被称作**界限**。", "locale": "zh-CN"}}}
