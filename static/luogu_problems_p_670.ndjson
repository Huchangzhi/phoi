{"pid": "P14585", "type": "P", "difficulty": 4, "samples": [["2\n3\n213 12 21 \n7\n314 880 246 170 493 474 129 \n", "4\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "分治", "辽宁", "前缀和", "省赛/邀请赛", "单调栈"], "title": "[LNCPC 2025] Entering the unknown", "background": "$\\text{Entering the unknown,}$\n\n$\\text{Sending all the poets to the stars,}$\n\n$\\text{Daring to see beyond the manmade,}$\n\n$\\text{Woe to you who evade the horizon.}$\n\n$\\text{——Capoo}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lmlii6pk.png)", "description": "给定一个长度为 $n$ 的正整数数组，请您求出有多少个非空子数组 $^{\\text{*}}$ 满足：该非空子数组的正整数之和能被出现在该非空子数组中的最大**数字** $^{\\text{†}}$ 整除。\n\n---\n\n$^{\\text{*}}$ 一个数组 $a$ 是一个数组 $b$ 的非空子数组，当且仅当 $a$ 可以通过从 $b$ 的开头删除零个或者多个数以及从结尾删除零个或者多个数而得到，并且 $a$ 含有至少一个数。\n\n$^{\\text{†}}$ 数字（digit）是指构成数（number）的 $0,1,2,3,4,5,6,7,8,9$。例如，出现在数组 $[213]$ 中的数字有 $1,2,3$，最大数字是 $3$；出现在数组 $[2025,11,15]$ 中的数字有 $0,1,2,5$，最大数字是 $5$。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1 \\le T \\le 10^4)$，表示测试数据组数。\n\n对于每组测试数据：  \n第一行给定一个整数 $n(1\\le n\\le 10^5)$，表示数组长度。  \n第二行给定 $n$ 个正整数 $x_1,x_2,\\ldots,x_n$（$1\\le x_i\\le 10^9$），表示数组。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $10^5$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示满足题目要求的非空子数组的数量。", "hint": "对于样例的第一组测试数据，非空子数组一共有 $6$ 个：  \n对于非空子数组 $[213]$，正整数之和是 $213$，出现的最大数字是 $3$，$213$ 能被 $3$ 整除，满足题目要求。  \n对于非空子数组 $[12]$，正整数之和是 $12$，出现的最大数字是 $2$，$12$ 能被 $2$ 整除，满足题目要求。  \n对于非空子数组 $[21]$，正整数之和是 $21$，出现的最大数字是 $2$，$21$ 不能被 $2$ 整除，不满足题目要求。  \n对于非空子数组 $[213,12]$，正整数之和是 $213+12=225$，出现的最大数字是 $3$，$225$ 能被 $3$ 整除，满足题目要求。  \n对于非空子数组 $[12,21]$，正整数之和是 $12+21=33$，出现的最大数字是 $2$，$33$ 不能被 $2$ 整除，不满足题目要求。  \n对于非空子数组 $[213,12,21]$，正整数之和是 $213+12+21=246$，出现的最大数字是 $3$，$246$ 能被 $3$ 整除，满足题目要求。  \n因此，满足题目要求的非空子数组的数量是 $4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] Entering the unknown", "background": "$\\text{Entering the unknown,}$\n\n$\\text{Sending all the poets to the stars,}$\n\n$\\text{Daring to see beyond the manmade,}$\n\n$\\text{Woe to you who evade the horizon.}$\n\n$\\text{——Capoo}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lmlii6pk.png)", "description": "给定一个长度为 $n$ 的正整数数组，请您求出有多少个非空子数组 $^{\\text{*}}$ 满足：该非空子数组的正整数之和能被出现在该非空子数组中的最大**数字** $^{\\text{†}}$ 整除。\n\n---\n\n$^{\\text{*}}$ 一个数组 $a$ 是一个数组 $b$ 的非空子数组，当且仅当 $a$ 可以通过从 $b$ 的开头删除零个或者多个数以及从结尾删除零个或者多个数而得到，并且 $a$ 含有至少一个数。\n\n$^{\\text{†}}$ 数字（digit）是指构成数（number）的 $0,1,2,3,4,5,6,7,8,9$。例如，出现在数组 $[213]$ 中的数字有 $1,2,3$，最大数字是 $3$；出现在数组 $[2025,11,15]$ 中的数字有 $0,1,2,5$，最大数字是 $5$。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1 \\le T \\le 10^4)$，表示测试数据组数。\n\n对于每组测试数据：  \n第一行给定一个整数 $n(1\\le n\\le 10^5)$，表示数组长度。  \n第二行给定 $n$ 个正整数 $x_1,x_2,\\ldots,x_n$（$1\\le x_i\\le 10^9$），表示数组。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $10^5$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示满足题目要求的非空子数组的数量。", "hint": "对于样例的第一组测试数据，非空子数组一共有 $6$ 个：  \n对于非空子数组 $[213]$，正整数之和是 $213$，出现的最大数字是 $3$，$213$ 能被 $3$ 整除，满足题目要求。  \n对于非空子数组 $[12]$，正整数之和是 $12$，出现的最大数字是 $2$，$12$ 能被 $2$ 整除，满足题目要求。  \n对于非空子数组 $[21]$，正整数之和是 $21$，出现的最大数字是 $2$，$21$ 不能被 $2$ 整除，不满足题目要求。  \n对于非空子数组 $[213,12]$，正整数之和是 $213+12=225$，出现的最大数字是 $3$，$225$ 能被 $3$ 整除，满足题目要求。  \n对于非空子数组 $[12,21]$，正整数之和是 $12+21=33$，出现的最大数字是 $2$，$33$ 不能被 $2$ 整除，不满足题目要求。  \n对于非空子数组 $[213,12,21]$，正整数之和是 $213+12+21=246$，出现的最大数字是 $3$，$246$ 能被 $3$ 整除，满足题目要求。  \n因此，满足题目要求的非空子数组的数量是 $4$。", "locale": "zh-CN"}}}
{"pid": "P14586", "type": "P", "difficulty": 6, "samples": [["2\n3 7 3 2\n1 3 1 2 1 2 2\n2 6 0 6\n7 3 8 3 5 10\n", "Alice\nAlice\nBob\nAlice\nAlice\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "2025", "辽宁", "组合数学", "排列组合", "Lucas 定理", "快速莫比乌斯变换 FMT", "省赛/邀请赛"], "title": "[LNCPC 2025] 前后缀石子博弈", "background": "Z 形管道猫邀请我们的老朋友 Alice 和 Bob 来玩他们俩最喜欢的取石子博弈游戏啦……这次是基于前后缀的取石子规则和初始局面生成规则。", "description": "在一局游戏中，局面由一行 $m$ 堆石子构成，从前往后是从第 $1$ 堆到第 $m$ 堆。Alice 和 Bob 两人轮流取石子。Alice 先取。\n\n在一轮取石子中，本轮操作的玩家首先**选择**两个**非负整数** $get_{pre},get_{suf}$，然后从前 $get_{pre}$ 个有石子的堆中每堆各取走 $1$ 颗石子，并且从后 $get_{suf}$ 个有石子的堆中每堆各取走 $1$ 颗石子，但是在同一轮同一堆中最多只能取走 $1$ 颗石子。\n\n最先在其的一个操作轮中取走 $0$ 颗石子的玩家输掉本局游戏，另一个玩家胜利。\n\nAlice 和 Bob 将玩 $n$ 局游戏。记 $a_{i,j}$ 表示在第 $i$ 局游戏的初始局面中第 $j$ 堆的石子数。**给定**两个**非负整数** $ put_{pre},put_{suf}(put_{pre}+put_{suf}\\le m)$ 和第 $1$ 局游戏的初始局面 $a_{1,1},\\cdots,a_{1,m}$。\n\n第 $i(i\\in[2,n])$ 局游戏的初始局面的生成规则是：首先基于第 $i-1$ 局游戏的初始局面，然后对前 $put_{pre}$ 堆的石子数取该部分的后缀和，并且对后 $put_{suf}$ 堆的石子数取该部分的前缀和，其余部分保持不变。\\\n更正式地，\n$$a_{i,j}=\\begin{cases}\n\\sum\\limits_{k=j}^{put_{pre}}a_{i-1,k} & j\\in[1,put_{pre}]\\\\\na_{i-1,j} & j\\in[put_{pre}+1,m-put_{suf}]\\\\\n\\sum\\limits_{k=m-put_{suf}+1}^{j}a_{i-1,k} & j\\in[m-put_{suf}+1,m]\n\\end{cases}$$\n\nAlice 和 Bob 都将采用最优策略。请您判断在这 $n$ 局游戏中每一局的胜者。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1\\le T\\le 10^4)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定四个整数 $n,m,put_{pre},put_{suf}(1\\le n\\le10^6,1\\le m\\le10^6,put_{pre}\\ge 0,put_{suf}\\ge 0,put_{pre}+put_{suf}\\le m)$，分别表示总游戏局数，初始局面的总石子堆数和生成初始局面的两个非负整数。\\\n第二行给定 $m$ 个整数 $a_{1,j}(1\\le a_{1,j}\\le10^9)$，其中第 $j$ 个整数 $a_{1,j}$ 表示在第 $1$ 局游戏的初始局面中第 $j$ 堆的石子数。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $10^6$，$m$ 的总和不超过 $10^6$。", "outputFormat": "对于每组测试数据，输出共 $n$ 行，每行一个字符串。对于其中第 $i$ 行，若第 $i$ 局游戏将是 Alice 胜利，则输出 `Alice`；否则（第 $i$ 局游戏将是 Bob 胜利），输出 `Bob`。", "hint": "对于样例的第一组测试数据：  \n第 $1$ 局游戏的初始局面为 $1,3,1,2,1,2,2$。  \n下面是 Alice 和 Bob 可能的博弈过程：  \n1. Alice 选择 $get_{pre}=4,get_{suf}=0$，取走 $4$ 颗石子，局面变为 $0,2,0,1,1,2,2$，即（仅保留有石子的堆） $2,1,1,2,2$。\n2. Bob 选择 $get_{pre}=1,get_{suf}=2$，取走 $3$ 颗石子，局面变为 $1,1,1,1,1$。\n3. Alice 选择 $get_{pre}=2,get_{suf}=3$，取走 $5$ 颗石子，此时局面中所有堆都没有石子。\n4. Bob 选择 $get_{pre}=0,get_{suf}=0$，取走 $0$ 颗石子。Bob 输掉本局游戏，Alice 胜利。\n\n第 $2$ 局游戏的初始局面为 $5,4,1,2,1,2,4$。  \n第 $3$ 局游戏的初始局面为 $10,5,1,2,1,2,6$。\n\n对于样例的第二组测试数据，第 $2$ 局游戏的初始局面为 $7,10,18,21,26,36$。\n\n本题的输入输出量较大，请注意所使用的输入输出方式。\n\n最后 Alice 和 Bob 玩吐了，希望他们俩以后别再玩取石子博弈游戏了……", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 前后缀石子博弈", "background": "Z 形管道猫邀请我们的老朋友 Alice 和 Bob 来玩他们俩最喜欢的取石子博弈游戏啦……这次是基于前后缀的取石子规则和初始局面生成规则。", "description": "在一局游戏中，局面由一行 $m$ 堆石子构成，从前往后是从第 $1$ 堆到第 $m$ 堆。Alice 和 Bob 两人轮流取石子。Alice 先取。\n\n在一轮取石子中，本轮操作的玩家首先**选择**两个**非负整数** $get_{pre},get_{suf}$，然后从前 $get_{pre}$ 个有石子的堆中每堆各取走 $1$ 颗石子，并且从后 $get_{suf}$ 个有石子的堆中每堆各取走 $1$ 颗石子，但是在同一轮同一堆中最多只能取走 $1$ 颗石子。\n\n最先在其的一个操作轮中取走 $0$ 颗石子的玩家输掉本局游戏，另一个玩家胜利。\n\nAlice 和 Bob 将玩 $n$ 局游戏。记 $a_{i,j}$ 表示在第 $i$ 局游戏的初始局面中第 $j$ 堆的石子数。**给定**两个**非负整数** $ put_{pre},put_{suf}(put_{pre}+put_{suf}\\le m)$ 和第 $1$ 局游戏的初始局面 $a_{1,1},\\cdots,a_{1,m}$。\n\n第 $i(i\\in[2,n])$ 局游戏的初始局面的生成规则是：首先基于第 $i-1$ 局游戏的初始局面，然后对前 $put_{pre}$ 堆的石子数取该部分的后缀和，并且对后 $put_{suf}$ 堆的石子数取该部分的前缀和，其余部分保持不变。\\\n更正式地，\n$$a_{i,j}=\\begin{cases}\n\\sum\\limits_{k=j}^{put_{pre}}a_{i-1,k} & j\\in[1,put_{pre}]\\\\\na_{i-1,j} & j\\in[put_{pre}+1,m-put_{suf}]\\\\\n\\sum\\limits_{k=m-put_{suf}+1}^{j}a_{i-1,k} & j\\in[m-put_{suf}+1,m]\n\\end{cases}$$\n\nAlice 和 Bob 都将采用最优策略。请您判断在这 $n$ 局游戏中每一局的胜者。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1\\le T\\le 10^4)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定四个整数 $n,m,put_{pre},put_{suf}(1\\le n\\le10^6,1\\le m\\le10^6,put_{pre}\\ge 0,put_{suf}\\ge 0,put_{pre}+put_{suf}\\le m)$，分别表示总游戏局数，初始局面的总石子堆数和生成初始局面的两个非负整数。\\\n第二行给定 $m$ 个整数 $a_{1,j}(1\\le a_{1,j}\\le10^9)$，其中第 $j$ 个整数 $a_{1,j}$ 表示在第 $1$ 局游戏的初始局面中第 $j$ 堆的石子数。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $10^6$，$m$ 的总和不超过 $10^6$。", "outputFormat": "对于每组测试数据，输出共 $n$ 行，每行一个字符串。对于其中第 $i$ 行，若第 $i$ 局游戏将是 Alice 胜利，则输出 `Alice`；否则（第 $i$ 局游戏将是 Bob 胜利），输出 `Bob`。", "hint": "对于样例的第一组测试数据：  \n第 $1$ 局游戏的初始局面为 $1,3,1,2,1,2,2$。  \n下面是 Alice 和 Bob 可能的博弈过程：  \n1. Alice 选择 $get_{pre}=4,get_{suf}=0$，取走 $4$ 颗石子，局面变为 $0,2,0,1,1,2,2$，即（仅保留有石子的堆） $2,1,1,2,2$。\n2. Bob 选择 $get_{pre}=1,get_{suf}=2$，取走 $3$ 颗石子，局面变为 $1,1,1,1,1$。\n3. Alice 选择 $get_{pre}=2,get_{suf}=3$，取走 $5$ 颗石子，此时局面中所有堆都没有石子。\n4. Bob 选择 $get_{pre}=0,get_{suf}=0$，取走 $0$ 颗石子。Bob 输掉本局游戏，Alice 胜利。\n\n第 $2$ 局游戏的初始局面为 $5,4,1,2,1,2,4$。  \n第 $3$ 局游戏的初始局面为 $10,5,1,2,1,2,6$。\n\n对于样例的第二组测试数据，第 $2$ 局游戏的初始局面为 $7,10,18,21,26,36$。\n\n本题的输入输出量较大，请注意所使用的输入输出方式。\n\n最后 Alice 和 Bob 玩吐了，希望他们俩以后别再玩取石子博弈游戏了……", "locale": "zh-CN"}}}
{"pid": "P14587", "type": "P", "difficulty": 6, "samples": [["3\n6\n5 5 5 5 5 5 \n4\n2 3 2 4 \n10\n5 4 10 3 10 1 5 8 8 1 \n", "6\n5\n31108248\n"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2025", "辽宁", "组合数学", "省赛/邀请赛", "Prüfer 序列"], "title": "[LNCPC 2025] 广义菊花图计数", "background": "Z 形管道猫种菊花，Z 形管道猫数菊花。", "description": "给定 $n$ 个节点，标号为 $i$ 的节点具有权值 $a_i$。\n\n定义一张广义菊花图是一棵满足“度数为 $1$ 的节点的数量大于等于度数最大的节点的**权值**”的**有标号无根树**。特别地，当存在多个度数最大的节点时，取它们的最大的权值。\n\n请您求出这 $n$ 个节点构成一张广义菊花图的方案数 $^{\\text{*}}$，结果对 $998244353$ 取模。\n\n**请注意次数过多的取模运算会带来较大的性能开销，请减少不必要的取模运算！**\n\n---\n\n$^{\\text{∗}}$ 两张广义菊花图不同（也即两棵有标号无根树不同），当且仅当存在两个标号 $u,v$，标号为 $u$ 的节点和标号为 $v$ 的节点在一张广义菊花图上有边相连，在另一张广义菊花图上没有边相连。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1 \\le T \\le 50)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定一个整数 $n(3\\le n\\le250)$，表示节点总数。\\\n第二行给定 $n$ 个整数 $a_1, a_2, \\dots, a_n(1\\le a_i\\le n)$，其中第 $i$ 个整数 $a_i$ 表示标号为 $i$ 的节点的权值。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $250$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示这 $n$ 个节点构成一张广义菊花图的方案数对 $998244353$ 取模后的结果。", "hint": "对于样例的第一组测试数据，这 $6$ 个节点构成一张广义菊花图的所有方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ydbralnx.png)\n\n对于样例的第二组测试数据，这 $4$ 个节点构成一张广义菊花图的所有方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucx1ultu.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 广义菊花图计数", "background": "Z 形管道猫种菊花，Z 形管道猫数菊花。", "description": "给定 $n$ 个节点，标号为 $i$ 的节点具有权值 $a_i$。\n\n定义一张广义菊花图是一棵满足“度数为 $1$ 的节点的数量大于等于度数最大的节点的**权值**”的**有标号无根树**。特别地，当存在多个度数最大的节点时，取它们的最大的权值。\n\n请您求出这 $n$ 个节点构成一张广义菊花图的方案数 $^{\\text{*}}$，结果对 $998244353$ 取模。\n\n**请注意次数过多的取模运算会带来较大的性能开销，请减少不必要的取模运算！**\n\n---\n\n$^{\\text{∗}}$ 两张广义菊花图不同（也即两棵有标号无根树不同），当且仅当存在两个标号 $u,v$，标号为 $u$ 的节点和标号为 $v$ 的节点在一张广义菊花图上有边相连，在另一张广义菊花图上没有边相连。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1 \\le T \\le 50)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定一个整数 $n(3\\le n\\le250)$，表示节点总数。\\\n第二行给定 $n$ 个整数 $a_1, a_2, \\dots, a_n(1\\le a_i\\le n)$，其中第 $i$ 个整数 $a_i$ 表示标号为 $i$ 的节点的权值。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $250$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示这 $n$ 个节点构成一张广义菊花图的方案数对 $998244353$ 取模后的结果。", "hint": "对于样例的第一组测试数据，这 $6$ 个节点构成一张广义菊花图的所有方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ydbralnx.png)\n\n对于样例的第二组测试数据，这 $4$ 个节点构成一张广义菊花图的所有方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucx1ultu.png)", "locale": "zh-CN"}}}
{"pid": "P14588", "type": "P", "difficulty": 6, "samples": [["5 4\n1 3\n1 2\n2 1\n2 2\n1 5 1\n2 1\n1 2 3\n2 2", "5\n23"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "树状数组", "2025", "辽宁", "树链剖分", "省赛/邀请赛"], "title": "[LNCPC 2025] 前线支援", "background": "", "description": "A 国风景秀丽，由 $n$ 个城市组成，每个城市都别具一格，形成了丰富多彩的大国江山。不过遗憾的是，受金融危机的影响，A 国财政紧张，所以仅有 $n-1$ 条双向道路连接着这 $n$ 座城市。为了保证城市的方便快捷，这 $n-1$ 条道路能保证一定能从一座城市到达另一座城市。\n\nA 国城市制度井然有序：其中 $1$ 号城市是 A 国的首都，其它每个城市都有其上属城市。具体而已对于第 $i$ 个城市到其上属城市为 $fa_i$（$1\\le fa_i<i$）有一条道路，这条道路的长度为 $w_i$。我们称一个城市 $y$ 是城市 $x$ 的**间接附属**，**当且仅当**城市 $y$ 的上属城市 $fa_y$ 是城市 $x$，或者城市 $fa_y$ 是城市 $x$ 的**间接附属**。定义 $\\mathrm{dist}(x,y)$ 表示从城市 $x$ 到城市 $y$ 的最短路径长度。\n\n由于 A 国地势险峻、天灾频发，中央指挥部需要精确指挥调度，并平衡各城市消防安全部队的总工作量，定义城市 $i$ 消防安全部队的工作量为 $a_i$，当城市 $i$ 消防安全部队前往城市 $x$ 执行一次任务时，由于道阻且跻，所以工作量会增加 $\\mathrm{dist}(i,x)$，即 $a_i\\leftarrow a_i+\\mathrm{dist}(i,x)$。每个城市的**初始**工作量是 $0$。\n\n中央指挥部总共发出了 $q$ 条指令：\n\n- $1\\ x\\ y$：执行任务：城市 $y$ 发生了一场灾难，命令城市 $x$ 及其所有**间接附属**的城市的消防安全部队前往城市 $y$ 前线支援，执行一次到城市 $y$ 的任务；\n- $2\\ x$：查询工作量：查询城市 $x$ 及其所有**间接附属**的城市的消防安全部队工作量的**总和**。", "inputFormat": "第一行给定两个整数 $n,q(1\\le n,q\\le 5\\times 10^5)$，分别表示城市数量和指令数量。\n\n接下来 $n-1$ 行，每行给定两个整数 $fa_{i+1},w_{i+1}(1\\le fa_{i+1}<i+1,1\\le w_{i+1}\\le 100)$，其中第 $i$ 行的两个整数 $fa_{i+1},w_{i+1}$ 分别表示城市 $i+1$ 的上属城市以及路径长度。\n\n接下来 $q$ 行，每行形如：\n\n- $1\\ x\\ y(1\\le x,y\\le n)$：表示第一类指令：执行任务；\n- $2\\ x(1\\le x\\le n)$：表示第二类指令：查询工作量。", "outputFormat": "对于每条第二类指令，输出一行一个整数，表示总工作量。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 前线支援", "background": "", "description": "A 国风景秀丽，由 $n$ 个城市组成，每个城市都别具一格，形成了丰富多彩的大国江山。不过遗憾的是，受金融危机的影响，A 国财政紧张，所以仅有 $n-1$ 条双向道路连接着这 $n$ 座城市。为了保证城市的方便快捷，这 $n-1$ 条道路能保证一定能从一座城市到达另一座城市。\n\nA 国城市制度井然有序：其中 $1$ 号城市是 A 国的首都，其它每个城市都有其上属城市。具体而已对于第 $i$ 个城市到其上属城市为 $fa_i$（$1\\le fa_i<i$）有一条道路，这条道路的长度为 $w_i$。我们称一个城市 $y$ 是城市 $x$ 的**间接附属**，**当且仅当**城市 $y$ 的上属城市 $fa_y$ 是城市 $x$，或者城市 $fa_y$ 是城市 $x$ 的**间接附属**。定义 $\\mathrm{dist}(x,y)$ 表示从城市 $x$ 到城市 $y$ 的最短路径长度。\n\n由于 A 国地势险峻、天灾频发，中央指挥部需要精确指挥调度，并平衡各城市消防安全部队的总工作量，定义城市 $i$ 消防安全部队的工作量为 $a_i$，当城市 $i$ 消防安全部队前往城市 $x$ 执行一次任务时，由于道阻且跻，所以工作量会增加 $\\mathrm{dist}(i,x)$，即 $a_i\\leftarrow a_i+\\mathrm{dist}(i,x)$。每个城市的**初始**工作量是 $0$。\n\n中央指挥部总共发出了 $q$ 条指令：\n\n- $1\\ x\\ y$：执行任务：城市 $y$ 发生了一场灾难，命令城市 $x$ 及其所有**间接附属**的城市的消防安全部队前往城市 $y$ 前线支援，执行一次到城市 $y$ 的任务；\n- $2\\ x$：查询工作量：查询城市 $x$ 及其所有**间接附属**的城市的消防安全部队工作量的**总和**。", "inputFormat": "第一行给定两个整数 $n,q(1\\le n,q\\le 5\\times 10^5)$，分别表示城市数量和指令数量。\n\n接下来 $n-1$ 行，每行给定两个整数 $fa_{i+1},w_{i+1}(1\\le fa_{i+1}<i+1,1\\le w_{i+1}\\le 100)$，其中第 $i$ 行的两个整数 $fa_{i+1},w_{i+1}$ 分别表示城市 $i+1$ 的上属城市以及路径长度。\n\n接下来 $q$ 行，每行形如：\n\n- $1\\ x\\ y(1\\le x,y\\le n)$：表示第一类指令：执行任务；\n- $2\\ x(1\\le x\\le n)$：表示第二类指令：查询工作量。", "outputFormat": "对于每条第二类指令，输出一行一个整数，表示总工作量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14589", "type": "P", "difficulty": 2, "samples": [["2\n3\n0 3 1 \n4\n0 2 3 0 \n", "2\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "辽宁", "省赛/邀请赛"], "title": "[LNCPC 2025] 子鼠", "background": "Z 形管道猫正在研究如何高效发动《三国杀》中的“子鼠”。", "description": "子鼠：技能，您可以选择一名卡牌数大于您的其他角色，然后获得其的一张卡牌。\n\n总共有 $n$ 名角色，您是第 $1$ 名角色。初始，第 $i$ 名角色有 $a_i$ 张卡牌。\n\n请您求出只通过您发动任意次（可以零次）“子鼠”后，您的卡牌数的最大值。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1\\le T\\le 10^4)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定一个整数 $n(1\\le n\\le10^6)$，表示角色数。\\\n第二行给定 $n$ 个整数 $a_i(0\\le a_i\\le10^9)$，其中第 $i$ 个整数 $a_i$ 表示初始第 $i$ 名角色的卡牌数。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示只通过您发动任意次“子鼠”后，您的卡牌数的最大值。", "hint": "对于样例的第一组测试数据：  \n您发动第一次“子鼠”：选择第 $2$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}1},\\textbf{\\color{red}2},1$。  \n您发动第二次“子鼠”：选择第 $2$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}2},\\textbf{\\color{red}1},1$。  \n因为此时没有卡牌数大于您的其他角色，所以您无法发动第三次“子鼠”。  \n可以证明，只通过您发动任意次“子鼠”后，您的卡牌数的最大值是 $2$。\n\n对于样例的第二组测试数据：  \n您发动第一次“子鼠”：选择第 $3$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}1},2,\\textbf{\\color{red}2},0$。  \n您发动第二次“子鼠”：选择第 $2$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}2},\\textbf{\\color{red}1},2,0$。  \n因为此时没有卡牌数大于您的其他角色，所以您无法发动第三次“子鼠”。  \n可以证明，只通过您发动任意次“子鼠”后，您的卡牌数的最大值是 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 子鼠", "background": "Z 形管道猫正在研究如何高效发动《三国杀》中的“子鼠”。", "description": "子鼠：技能，您可以选择一名卡牌数大于您的其他角色，然后获得其的一张卡牌。\n\n总共有 $n$ 名角色，您是第 $1$ 名角色。初始，第 $i$ 名角色有 $a_i$ 张卡牌。\n\n请您求出只通过您发动任意次（可以零次）“子鼠”后，您的卡牌数的最大值。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1\\le T\\le 10^4)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定一个整数 $n(1\\le n\\le10^6)$，表示角色数。\\\n第二行给定 $n$ 个整数 $a_i(0\\le a_i\\le10^9)$，其中第 $i$ 个整数 $a_i$ 表示初始第 $i$ 名角色的卡牌数。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示只通过您发动任意次“子鼠”后，您的卡牌数的最大值。", "hint": "对于样例的第一组测试数据：  \n您发动第一次“子鼠”：选择第 $2$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}1},\\textbf{\\color{red}2},1$。  \n您发动第二次“子鼠”：选择第 $2$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}2},\\textbf{\\color{red}1},1$。  \n因为此时没有卡牌数大于您的其他角色，所以您无法发动第三次“子鼠”。  \n可以证明，只通过您发动任意次“子鼠”后，您的卡牌数的最大值是 $2$。\n\n对于样例的第二组测试数据：  \n您发动第一次“子鼠”：选择第 $3$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}1},2,\\textbf{\\color{red}2},0$。  \n您发动第二次“子鼠”：选择第 $2$ 名角色，然后获得其的一张卡牌。各角色的卡牌数变为 $\\textbf{\\color{red}2},\\textbf{\\color{red}1},2,0$。  \n因为此时没有卡牌数大于您的其他角色，所以您无法发动第三次“子鼠”。  \n可以证明，只通过您发动任意次“子鼠”后，您的卡牌数的最大值是 $2$。", "locale": "zh-CN"}}}
{"pid": "P14590", "type": "P", "difficulty": 2, "samples": [["3 4\n1 1 250000001\n1 3 250000006\n2 3 1 1 1\n1 1 250000003\n", "2 250000006 250000003\n0\n1 250000001\n"], ["4 9\n1 3 835745037\n1 3 927149742\n1 2 468012503\n1 4 314360098\n2 3 1 4 1\n1 4 501201700\n1 3 271374639\n2 4 2 2 1\n1 3 678882127\n", "0\n1 501201700\n4 314360098 927149742 271374639 678882127\n2 835745037 468012503\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2025", "辽宁", "省赛/邀请赛"], "title": "[LNCPC 2025] 计组实验", "background": "", "description": "在计算机组成原理实验课程中，老师安排了 $n$ 个实验供同学们选择。\n\n接下来有 $m$ 个事件按照时间顺序依次发生，每个事件形如下面两种之一：\n\n- $1\\ i\\ x$：一个学号为 $x$ 的学生选择了第 $i$ 个实验。如果他是第 $j$ 个选择这个实验的学生，那么他在这个实验的序号是 $j$。\n- $2\\ i_1 \\ j_1 \\ i_2\\ j_2$：第 $i_1$ 个实验的序号为 $j_1$ 的学生与第 $i_2$ 个实验的序号为 $j_2$ 的学生交换了实验。  \n更详细地，如果此前第 $i_1$ 个实验的序号为 $j_1$ 的学生的学号是 $x_1$，第 $i_2$ 个实验的序号为 $j_2$ 的学生的学号是 $x_2$，那么此时第 $i_1$ 个实验的序号为 $j_1$ 的学生的学号是 $x_2$，第 $i_2$ 个实验的序号为 $j_2$ 的学生的学号是 $x_1$。\n\n这 $m$ 个事件发生后，老师要打印课程名单。最后请您对于每个实验输出学生数量，以及按照序号从小到大的顺序依次输出对应学生的学号。", "inputFormat": "第一行给定两个整数 $n,m(1\\le n,m\\le 3\\times 10^5)$，分别表示实验个数和事件个数。\n\n接下来 $m$ 行，每行按照下面两种格式之一，按照时间顺序依次给定每个事件：  \n- $1\\ i\\ x$：一个学号为 $x$ 的学生选择了第 $i$ 个实验。保证给定的均为整数，$1\\le i\\le n,10^{8}\\le x <10^{9}$，此前这个学号为 $x$ 的学生没有选择过任何一个实验。\n- $2\\ i_1 \\ j_1 \\ i_2\\ j_2$：第 $i_1$ 个实验的序号为 $j_1$ 的学生与第 $i_2$ 个实验的序号为 $j_2$ 的学生交换了实验。保证给定的均为整数，$1\\le i_1,i_2\\le n,i_1\\not= i_2$，第 $i_1$ 个实验存在序号为 $j_1$ 的学生，第 $i_2$ 个实验存在序号为 $j_2$ 的学生。", "outputFormat": "输出共 $n$ 行，其中第 $i$ 行首先输出选择了第 $i$ 个实验的学生的数量，然后如果数量不为零，那么按照序号从小到大的顺序依次输出第 $i$ 个实验对应学生的学号。一行相邻两个整数之间用一个空格隔开。", "hint": "对于第一个样例，下面用表格表示在每个事件发生后的课程名单情况：\n\n- $1\\ 1\\ 250000001$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000001$|           |\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|           |           |\n\n- $1\\ 3\\ 250000006$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000001$|           |\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|$250000006$|           |\n\n\n\n- $2\\ 1\\ 1\\ 3\\ 1$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000006$|           |\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|$250000001$|           |\n\n\n- $1\\ 1\\ 250000003$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000006$|$250000003$|\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|$250000001$|           |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 计组实验", "background": "", "description": "在计算机组成原理实验课程中，老师安排了 $n$ 个实验供同学们选择。\n\n接下来有 $m$ 个事件按照时间顺序依次发生，每个事件形如下面两种之一：\n\n- $1\\ i\\ x$：一个学号为 $x$ 的学生选择了第 $i$ 个实验。如果他是第 $j$ 个选择这个实验的学生，那么他在这个实验的序号是 $j$。\n- $2\\ i_1 \\ j_1 \\ i_2\\ j_2$：第 $i_1$ 个实验的序号为 $j_1$ 的学生与第 $i_2$ 个实验的序号为 $j_2$ 的学生交换了实验。  \n更详细地，如果此前第 $i_1$ 个实验的序号为 $j_1$ 的学生的学号是 $x_1$，第 $i_2$ 个实验的序号为 $j_2$ 的学生的学号是 $x_2$，那么此时第 $i_1$ 个实验的序号为 $j_1$ 的学生的学号是 $x_2$，第 $i_2$ 个实验的序号为 $j_2$ 的学生的学号是 $x_1$。\n\n这 $m$ 个事件发生后，老师要打印课程名单。最后请您对于每个实验输出学生数量，以及按照序号从小到大的顺序依次输出对应学生的学号。", "inputFormat": "第一行给定两个整数 $n,m(1\\le n,m\\le 3\\times 10^5)$，分别表示实验个数和事件个数。\n\n接下来 $m$ 行，每行按照下面两种格式之一，按照时间顺序依次给定每个事件：  \n- $1\\ i\\ x$：一个学号为 $x$ 的学生选择了第 $i$ 个实验。保证给定的均为整数，$1\\le i\\le n,10^{8}\\le x <10^{9}$，此前这个学号为 $x$ 的学生没有选择过任何一个实验。\n- $2\\ i_1 \\ j_1 \\ i_2\\ j_2$：第 $i_1$ 个实验的序号为 $j_1$ 的学生与第 $i_2$ 个实验的序号为 $j_2$ 的学生交换了实验。保证给定的均为整数，$1\\le i_1,i_2\\le n,i_1\\not= i_2$，第 $i_1$ 个实验存在序号为 $j_1$ 的学生，第 $i_2$ 个实验存在序号为 $j_2$ 的学生。", "outputFormat": "输出共 $n$ 行，其中第 $i$ 行首先输出选择了第 $i$ 个实验的学生的数量，然后如果数量不为零，那么按照序号从小到大的顺序依次输出第 $i$ 个实验对应学生的学号。一行相邻两个整数之间用一个空格隔开。", "hint": "对于第一个样例，下面用表格表示在每个事件发生后的课程名单情况：\n\n- $1\\ 1\\ 250000001$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000001$|           |\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|           |           |\n\n- $1\\ 3\\ 250000006$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000001$|           |\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|$250000006$|           |\n\n\n\n- $2\\ 1\\ 1\\ 3\\ 1$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000006$|           |\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|$250000001$|           |\n\n\n- $1\\ 1\\ 250000003$：\n\n|         |序号 $1$    |序号 $2$|\n|:-------:|:--------:|:----:|\n|第 $1$ 个实验|$250000006$|$250000003$|\n|第 $2$ 个实验|           |           |\n|第 $3$ 个实验|$250000001$|           |", "locale": "zh-CN"}}}
{"pid": "P14591", "type": "P", "difficulty": 6, "samples": [["5\n110\n11010\n1011010\n101111011\n11010101101", "5 2 0 6\n19 3 24 9\n101 4 109 30\n405 7 382 33\n1225 6 1144 53"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "二分", "并查集", "2025", "后缀自动机 SAM", "辽宁", "后缀数组 SA", "省赛/邀请赛"], "title": "[LNCPC 2025] Kanon", "background": "> 梦。\n> \n> 我做着一个悠远而长久的梦。\n> \n> 从很久以前就一直在做着这个梦；\n> \n> 在梦中我凝望四季的街道，\n> \n> 期望与永远不会到来的人再度见面，\n> \n> 找寻连自己也早已忘却的遗失的东西。\n> \n> 多少时间、多少岁月从我身边流逝而过，\n> \n> 在无尽的黑夜中，一直、一直都在孤单地等待着——\n> \n> 等待着最后那必将到来的黎明。\n> \n> ——《Kanon》", "description": "下文中，我们约定：\n- 字符串的下标从 $1$ 开始。\n- 对于一个字符串 $s$，$s[l:r]$ 表示将 $s_l,s_{l+1},\\cdots,s_r$ 依次连接形成的字符串。\n- $a\\oplus b$ 表示 $a$ 和 $b$ 在二进制下按位异或得到的值。\n- $\\bigoplus\\limits_{i=1}^na_i=a_1\\oplus a_2\\oplus\\cdots\\oplus a_n$。\n\n---\n\n亚由的梦里有一个长度为 $n$ 的、仅由数字 $0$ 和 $1$ 构成的字符串 $s$。她现在需要将其划分成 $k$ 个非空子段 $s[1:p_1],s[p_1+1:p_2],\\cdots,s[p_{k-1}+1:n]$，其中 $1\\le p_1<p_2<\\cdots<p_{k-1}<n$。\n\n对于每个子段，她决定将其最左侧视为二进制的最高位，**直接看成**二进制数。形式化地，如果她划分出一个子段 $s[l:r]$，则将这个子段看作十进制数 $\\sum\\limits_{i=l}^r(2^{r-i}\\times s_i)$ 在二进制下的表示。**可能有前导零。**\n\n现在亚由定义一种划分方案的权值为，这些二进制数的**按位异或和**。她现在想知道所有划分方案中权值最大是多少，以及权值恰好为最大值的划分方案数量。\n\n然而亚由忘记了 $k$ 的值，因此她需要对 $k=1,2,\\cdots,n$ 都求出对应的答案。\n\n可她是个连三次方程都不能轻松解出的小朋友，于是她来求助祐一——也就是您了。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1\\leq T\\leq 10^4)$，表示测试数据组数。\n\n对于每组测试数据，给定一行一个仅由 $0$ 和 $1$ 构成的字符串 $s$。\n\n保证在每个测试点中所有测试数据的字符串的长度的总和不超过 $3\\times 10^6$。", "outputFormat": "对于每组数据，为了避免大量的输出，采用如下输出方式（本题正解不依赖该输出方式）：\n\n设对于 $k=1,2,\\cdots,n$，对应的最大值对 $998244353$ 取模后，为 $p_1,p_2,\\cdots,p_n$；权值为最大值的划分方案数对 $998244353$ 取模后，为 $q_1,q_2,\\cdots,q_n$。则一行输出四个整数 $A,B,C,D$，用半角空格隔开。其中 $A,B,C,D$ 的值分别为：\n\n$$\n\\begin{aligned}\nA&=\\bigoplus_{i=1}^np_i\\\\\nB&=\\bigoplus_{i=1}^nq_i\\\\\nC&=\\bigoplus_{i=1}^n(p_i\\times i)\\\\\nD&=\\bigoplus_{i=1}^n(q_i\\times i)\\\\\n\\end{aligned}\n$$\n\n注意，需要取模的只有最终得到的最大值和权值为最大值的划分方案数。**您无需在计算 $\\boldsymbol{A,B,C,D}$ 的过程中取模**。", "hint": "### 样例解释\n\n对于样例的第一组测试数据，下面分别算出 $k=1,2,3$ 时对应的答案：\n\n- $k=1$：最大值即为它本身 $(110)_2=6$，方案数为 $1$。\n- $k=2$：当划分方案为 $(11,0)$ 或 $(1,10)$ 时，都可以得到最大值，为 $(11)_2\\oplus(0)_2=(1)_2\\oplus(10)_2=3$，方案数为 $2$。\n- $k=3$：划分方案只有 $(1,1,0)$，最大值为 $(1)_2\\oplus(1)_2\\oplus(0)_2=0$，方案数为 $1$。\n\n这样可以得到 $p=\\{6,3,0\\},q=\\{1,2,1\\}$，可以分别求得 $A,B,C,D$：\n\n$$\n\\begin{aligned}\nA&=6\\oplus3\\oplus0=5\\\\\nB&=1\\oplus2\\oplus1=2\\\\\nC&=(6\\times1)\\oplus(3\\times2)\\oplus(0\\times3)=0\\\\\nD&=(1\\times1)\\oplus(2\\times2)\\oplus(1\\times3)=6\n\\end{aligned}\n$$\n\n故输出的数分别为 $5,2,0,6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] Kanon", "background": "> 梦。\n> \n> 我做着一个悠远而长久的梦。\n> \n> 从很久以前就一直在做着这个梦；\n> \n> 在梦中我凝望四季的街道，\n> \n> 期望与永远不会到来的人再度见面，\n> \n> 找寻连自己也早已忘却的遗失的东西。\n> \n> 多少时间、多少岁月从我身边流逝而过，\n> \n> 在无尽的黑夜中，一直、一直都在孤单地等待着——\n> \n> 等待着最后那必将到来的黎明。\n> \n> ——《Kanon》", "description": "下文中，我们约定：\n- 字符串的下标从 $1$ 开始。\n- 对于一个字符串 $s$，$s[l:r]$ 表示将 $s_l,s_{l+1},\\cdots,s_r$ 依次连接形成的字符串。\n- $a\\oplus b$ 表示 $a$ 和 $b$ 在二进制下按位异或得到的值。\n- $\\bigoplus\\limits_{i=1}^na_i=a_1\\oplus a_2\\oplus\\cdots\\oplus a_n$。\n\n---\n\n亚由的梦里有一个长度为 $n$ 的、仅由数字 $0$ 和 $1$ 构成的字符串 $s$。她现在需要将其划分成 $k$ 个非空子段 $s[1:p_1],s[p_1+1:p_2],\\cdots,s[p_{k-1}+1:n]$，其中 $1\\le p_1<p_2<\\cdots<p_{k-1}<n$。\n\n对于每个子段，她决定将其最左侧视为二进制的最高位，**直接看成**二进制数。形式化地，如果她划分出一个子段 $s[l:r]$，则将这个子段看作十进制数 $\\sum\\limits_{i=l}^r(2^{r-i}\\times s_i)$ 在二进制下的表示。**可能有前导零。**\n\n现在亚由定义一种划分方案的权值为，这些二进制数的**按位异或和**。她现在想知道所有划分方案中权值最大是多少，以及权值恰好为最大值的划分方案数量。\n\n然而亚由忘记了 $k$ 的值，因此她需要对 $k=1,2,\\cdots,n$ 都求出对应的答案。\n\n可她是个连三次方程都不能轻松解出的小朋友，于是她来求助祐一——也就是您了。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1\\leq T\\leq 10^4)$，表示测试数据组数。\n\n对于每组测试数据，给定一行一个仅由 $0$ 和 $1$ 构成的字符串 $s$。\n\n保证在每个测试点中所有测试数据的字符串的长度的总和不超过 $3\\times 10^6$。", "outputFormat": "对于每组数据，为了避免大量的输出，采用如下输出方式（本题正解不依赖该输出方式）：\n\n设对于 $k=1,2,\\cdots,n$，对应的最大值对 $998244353$ 取模后，为 $p_1,p_2,\\cdots,p_n$；权值为最大值的划分方案数对 $998244353$ 取模后，为 $q_1,q_2,\\cdots,q_n$。则一行输出四个整数 $A,B,C,D$，用半角空格隔开。其中 $A,B,C,D$ 的值分别为：\n\n$$\n\\begin{aligned}\nA&=\\bigoplus_{i=1}^np_i\\\\\nB&=\\bigoplus_{i=1}^nq_i\\\\\nC&=\\bigoplus_{i=1}^n(p_i\\times i)\\\\\nD&=\\bigoplus_{i=1}^n(q_i\\times i)\\\\\n\\end{aligned}\n$$\n\n注意，需要取模的只有最终得到的最大值和权值为最大值的划分方案数。**您无需在计算 $\\boldsymbol{A,B,C,D}$ 的过程中取模**。", "hint": "### 样例解释\n\n对于样例的第一组测试数据，下面分别算出 $k=1,2,3$ 时对应的答案：\n\n- $k=1$：最大值即为它本身 $(110)_2=6$，方案数为 $1$。\n- $k=2$：当划分方案为 $(11,0)$ 或 $(1,10)$ 时，都可以得到最大值，为 $(11)_2\\oplus(0)_2=(1)_2\\oplus(10)_2=3$，方案数为 $2$。\n- $k=3$：划分方案只有 $(1,1,0)$，最大值为 $(1)_2\\oplus(1)_2\\oplus(0)_2=0$，方案数为 $1$。\n\n这样可以得到 $p=\\{6,3,0\\},q=\\{1,2,1\\}$，可以分别求得 $A,B,C,D$：\n\n$$\n\\begin{aligned}\nA&=6\\oplus3\\oplus0=5\\\\\nB&=1\\oplus2\\oplus1=2\\\\\nC&=(6\\times1)\\oplus(3\\times2)\\oplus(0\\times3)=0\\\\\nD&=(1\\times1)\\oplus(2\\times2)\\oplus(1\\times3)=6\n\\end{aligned}\n$$\n\n故输出的数分别为 $5,2,0,6$。", "locale": "zh-CN"}}}
{"pid": "P14592", "type": "P", "difficulty": 3, "samples": [["2\n4\n2 1 3 4 \n3 4 1 2 \n5\n2 1 4 3 5 \n1 4 2 5 3 \n", "0 0 4 1\n2 3 4 0\n1 2 0 1\n0 1 2 3\n0 0 0 0 1\n0 0 0 2 0\n2 3 3 1 0\n2 1 0 4 2\n0 2 1 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "辽宁", "构造", "省赛/邀请赛"], "title": "[LNCPC 2025] 裂痕", "background": "Atlansert 撞见了裂痕，Z 形管道猫说那里会藏着故事。", "description": "给定一个正整数 $n$ 和两个长度为 $n$ 的排列 $^{\\text{*}}$ $r,c$。\n\n请您求出一个满足下列所有条件的矩阵：\n- 矩阵有 $n$ 行 $n$ 列，元素都是在 $[0,n]$ 内的整数。\n- 第 $i$ 行元素的 MEX$^{\\text{†}}$ 值是 $r_i$。\n- 第 $i$ 列元素的 MEX 值是 $c_i$。\n\n可以证明一定存在这样的矩阵。\n\n---\n\n$^{\\text{∗}}$ 一个长度为 $n$ 的排列是一个由 $1$ 到 $n$ 的 $n$ 个不同整数组成的数组，这些整数的顺序可以任意。例如，$[2,3,1,5,4]$ 是一个排列，但是 $[1,2,2]$ 不是一个排列（因为 $2$ 在数组中出现了两次），$[1,3,4]$ 也不是一个排列（因为 $n=3$ 但是数组中有 $4$）。\n\n$^{\\text{†}}$ 一组整数 $a_1,a_2,\\ldots,a_k$ 的 MEX（Minimum Excluded）是该组中未出现的最小非负整数 $x$。例如，$\\operatorname{MEX}([2,2,1])= 0$（因为 $0$ 不在数组中），$\\operatorname{MEX}([3,1,0,1]) = 2$（因为 $0$ 和 $1$ 在数组中，但是 $2$ 不在），$\\operatorname{MEX}([0,3,1,2]) = 4$（因为 $0$、$1$、$2$ 和 $3$ 在数组中，但是 $4$ 不在）。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1 \\le T \\le 10^3)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定一个正整数 $n(1\\le n\\le2\\times 10^3)$。\\\n第二行给定一个长度为 $n$ 的排列 $r_1,r_2,\\ldots,r_n$。\\\n第三行给定一个长度为 $n$ 的排列 $c_1,c_2,\\ldots,c_n$。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $2\\times 10^3$。", "outputFormat": "对于每组测试数据，输出共 $n$ 行，每行输出 $n$ 个整数，表示一个满足本题所有条件的矩阵。如果存在多个这样的矩阵，那么输出其中任意一个。", "hint": "本题的输入输出量较大，请注意所使用的输入输出方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 裂痕", "background": "Atlansert 撞见了裂痕，Z 形管道猫说那里会藏着故事。", "description": "给定一个正整数 $n$ 和两个长度为 $n$ 的排列 $^{\\text{*}}$ $r,c$。\n\n请您求出一个满足下列所有条件的矩阵：\n- 矩阵有 $n$ 行 $n$ 列，元素都是在 $[0,n]$ 内的整数。\n- 第 $i$ 行元素的 MEX$^{\\text{†}}$ 值是 $r_i$。\n- 第 $i$ 列元素的 MEX 值是 $c_i$。\n\n可以证明一定存在这样的矩阵。\n\n---\n\n$^{\\text{∗}}$ 一个长度为 $n$ 的排列是一个由 $1$ 到 $n$ 的 $n$ 个不同整数组成的数组，这些整数的顺序可以任意。例如，$[2,3,1,5,4]$ 是一个排列，但是 $[1,2,2]$ 不是一个排列（因为 $2$ 在数组中出现了两次），$[1,3,4]$ 也不是一个排列（因为 $n=3$ 但是数组中有 $4$）。\n\n$^{\\text{†}}$ 一组整数 $a_1,a_2,\\ldots,a_k$ 的 MEX（Minimum Excluded）是该组中未出现的最小非负整数 $x$。例如，$\\operatorname{MEX}([2,2,1])= 0$（因为 $0$ 不在数组中），$\\operatorname{MEX}([3,1,0,1]) = 2$（因为 $0$ 和 $1$ 在数组中，但是 $2$ 不在），$\\operatorname{MEX}([0,3,1,2]) = 4$（因为 $0$、$1$、$2$ 和 $3$ 在数组中，但是 $4$ 不在）。", "inputFormat": "每个测试点包含多组测试数据。第一行给定一个整数 $T(1 \\le T \\le 10^3)$，表示测试数据组数。\n\n对于每组测试数据：\\\n第一行给定一个正整数 $n(1\\le n\\le2\\times 10^3)$。\\\n第二行给定一个长度为 $n$ 的排列 $r_1,r_2,\\ldots,r_n$。\\\n第三行给定一个长度为 $n$ 的排列 $c_1,c_2,\\ldots,c_n$。\n\n保证在每个测试点中所有测试数据的 $n$ 的总和不超过 $2\\times 10^3$。", "outputFormat": "对于每组测试数据，输出共 $n$ 行，每行输出 $n$ 个整数，表示一个满足本题所有条件的矩阵。如果存在多个这样的矩阵，那么输出其中任意一个。", "hint": "本题的输入输出量较大，请注意所使用的输入输出方式。", "locale": "zh-CN"}}}
{"pid": "P14593", "type": "P", "difficulty": 6, "samples": [["10\n19 18\n6 15\n5 8\n4 20\n18 3\n16 9\n0 7\n5 17\n2 13\n15 17", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "树状数组", "2025", "辽宁", "Ad-hoc", "省赛/邀请赛"], "title": "[LNCPC 2025] 猫猫虫打 CF", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kr0ewfuf.png)", "description": "猫猫虫喜欢打 CF，但是它很挑剔，它只喜欢打难度不低于它当前能力值的比赛。\n\n形式化的，我们设猫猫虫的能力值为 $x$（初始值 $x=0$）。有 $n$ 场比赛，第 $i$ 场比赛的难度是 $a_i$，隐藏分是 $b_i$。当且仅当猫猫虫当前的能力值 $x \\leq a_i$ 时，猫猫虫才会参加这场比赛，然后它的能力值将被重置为 $\\max(b_i, x)$。\n\n现在您可以任意安排比赛的顺序，请问猫猫虫最多能参加多少场比赛？", "inputFormat": "第一行给定一个整数 $n(1\\leq n\\leq 10^6)$。\\\n接下来 $n$ 行，每行给定两个整数 $a_i,b_i(0 \\leq a_i,b_i \\leq 10^{18})$ ，分别表示第 $i$ 场比赛的难度和隐藏分。", "outputFormat": "一个整数表示猫猫虫最多能参加的比赛的数量。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNCPC 2025] 猫猫虫打 CF", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kr0ewfuf.png)", "description": "猫猫虫喜欢打 CF，但是它很挑剔，它只喜欢打难度不低于它当前能力值的比赛。\n\n形式化的，我们设猫猫虫的能力值为 $x$（初始值 $x=0$）。有 $n$ 场比赛，第 $i$ 场比赛的难度是 $a_i$，隐藏分是 $b_i$。当且仅当猫猫虫当前的能力值 $x \\leq a_i$ 时，猫猫虫才会参加这场比赛，然后它的能力值将被重置为 $\\max(b_i, x)$。\n\n现在您可以任意安排比赛的顺序，请问猫猫虫最多能参加多少场比赛？", "inputFormat": "第一行给定一个整数 $n(1\\leq n\\leq 10^6)$。\\\n接下来 $n$ 行，每行给定两个整数 $a_i,b_i(0 \\leq a_i,b_i \\leq 10^{18})$ ，分别表示第 $i$ 场比赛的难度和隐藏分。", "outputFormat": "一个整数表示猫猫虫最多能参加的比赛的数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14594", "type": "P", "difficulty": 1, "samples": [["1 6 1\n1 3", "0 1 B 1 0 0"], ["3 3 3\n1 1\n2 3\n1 3", "B 3 B\n1 3 B\n0 1 1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "COCI（克罗地亚）"], "title": "[COCI 2025/2026 #2] 地雷 / Minesweeper", "background": "本题满分 $50$。", "description": "在一个 $n\\times m$ 的棋盘上有 $k$ 个地雷，每个格子上至多有一个地雷。\n\n请按照「扫雷」游戏中的格式打印出这个棋盘。具体地说，对于每个格子：\n\n- 若格子上有地雷，则用 $\\texttt{B}$ 表示；\n- 否则，用数字 $\\texttt{0}\\sim \\texttt{8}$ 标识，数字表示与该格子八连通（即共享一条公共边或一个公共顶点）的格子上共有几个地雷。", "inputFormat": "第一行，三个正整数 $n,m,k$（$1\\le n,m\\le 500$，$1\\le k\\le n\\cdot m$）。\n\n接下来 $k$ 行，第 $i$ 行两个整数 $(r_i,s_i)$（$1\\le r_i\\le n,1\\le s_i\\le m$），表示一颗在第 $r_i$ 行第 $s_i$ 列的格子（行从上到下编号，列从左到右编号）。", "outputFormat": "输出 $n$ 行，第 $i$ 行 $m$ 个用空格分隔的字符，其中第 $j$ 个字符表示第 $i$ 行第 $j$ 列格子的状态。", "hint": "### 样例解释\n\n**样例一解释**：第三列中的炸弹所在的格子与第二列、第四列的格子八连通。\n\n### 子任务\n\n- $\\text{Subtask 1 (15 pts)}$：$n=1$。\n- $\\text{Subtask 2 (18 pts)}$：$k=1$。\n- $\\text{Subtask 3 (17 pts)}$：无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2025/2026 #2] 地雷 / Minesweeper", "background": "本题满分 $50$。", "description": "在一个 $n\\times m$ 的棋盘上有 $k$ 个地雷，每个格子上至多有一个地雷。\n\n请按照「扫雷」游戏中的格式打印出这个棋盘。具体地说，对于每个格子：\n\n- 若格子上有地雷，则用 $\\texttt{B}$ 表示；\n- 否则，用数字 $\\texttt{0}\\sim \\texttt{8}$ 标识，数字表示与该格子八连通（即共享一条公共边或一个公共顶点）的格子上共有几个地雷。", "inputFormat": "第一行，三个正整数 $n,m,k$（$1\\le n,m\\le 500$，$1\\le k\\le n\\cdot m$）。\n\n接下来 $k$ 行，第 $i$ 行两个整数 $(r_i,s_i)$（$1\\le r_i\\le n,1\\le s_i\\le m$），表示一颗在第 $r_i$ 行第 $s_i$ 列的格子（行从上到下编号，列从左到右编号）。", "outputFormat": "输出 $n$ 行，第 $i$ 行 $m$ 个用空格分隔的字符，其中第 $j$ 个字符表示第 $i$ 行第 $j$ 列格子的状态。", "hint": "### 样例解释\n\n**样例一解释**：第三列中的炸弹所在的格子与第二列、第四列的格子八连通。\n\n### 子任务\n\n- $\\text{Subtask 1 (15 pts)}$：$n=1$。\n- $\\text{Subtask 2 (18 pts)}$：$k=1$。\n- $\\text{Subtask 3 (17 pts)}$：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P14595", "type": "P", "difficulty": 3, "samples": [["5 1\n1 3\n1 4\n1 5\n1 6\n1 7", "6"], ["5 2\n6 10\n8 14\n5 9\n5 6\n4 6", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2025", "优先队列", "COCI（克罗地亚）"], "title": "[COCI 2025/2026 #2] 集训 / Dodatna", "background": "本题满分 $70$。", "description": "有 $n$ 名学生，第 $i$ 名学生从每天的第 $l_i$ 毫秒初到每天的第 $r_i$ 毫秒初（第 $(r_i-1)$ 毫秒末）在学校内。\n\n现在要选择一段连续的时间上 OI 课，要求是：\n\n- 所有上课的学生在上课时间内必须全程在学校。\n- 至少有 $k$ 人上课。\n\n请输出 OI 课能持续的最长时间（单位：毫秒）。特别地，若无解，输出 $0$。", "inputFormat": "第一行，两个正整数 $n,k$（$1\\le n,k\\le 3\\times 10^5$）。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $l_i,r_i$（$1\\le l_i\\lt r_i\\le 86\\, 400\\, 000$）。", "outputFormat": "输出一行一个非负整数，表示答案。\n\n特别地，若无解，输出 $0$。", "hint": "### 样例解释\n\n**样例二解释**：在第 $6,7,8$ 毫秒上课，一共可以上 $3$ 毫秒。\n\n### 子任务\n\n- $\\text{Subtask 1 (13 pts)}$：$k=1$；\n- $\\text{Subtask 2 (27 pts)}$：$1\\le n\\le 1000$，$k=2$；\n- $\\text{Subtask 3 (11 pts)}$：$r_i\\le 100$；\n- $\\text{Subtask 4 (19 pts)}$：无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2025/2026 #2] 集训 / Dodatna", "background": "本题满分 $70$。", "description": "有 $n$ 名学生，第 $i$ 名学生从每天的第 $l_i$ 毫秒初到每天的第 $r_i$ 毫秒初（第 $(r_i-1)$ 毫秒末）在学校内。\n\n现在要选择一段连续的时间上 OI 课，要求是：\n\n- 所有上课的学生在上课时间内必须全程在学校。\n- 至少有 $k$ 人上课。\n\n请输出 OI 课能持续的最长时间（单位：毫秒）。特别地，若无解，输出 $0$。", "inputFormat": "第一行，两个正整数 $n,k$（$1\\le n,k\\le 3\\times 10^5$）。\n\n接下来 $n$ 行，第 $i$ 行两个整数 $l_i,r_i$（$1\\le l_i\\lt r_i\\le 86\\, 400\\, 000$）。", "outputFormat": "输出一行一个非负整数，表示答案。\n\n特别地，若无解，输出 $0$。", "hint": "### 样例解释\n\n**样例二解释**：在第 $6,7,8$ 毫秒上课，一共可以上 $3$ 毫秒。\n\n### 子任务\n\n- $\\text{Subtask 1 (13 pts)}$：$k=1$；\n- $\\text{Subtask 2 (27 pts)}$：$1\\le n\\le 1000$，$k=2$；\n- $\\text{Subtask 3 (11 pts)}$：$r_i\\le 100$；\n- $\\text{Subtask 4 (19 pts)}$：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P14596", "type": "P", "difficulty": 7, "samples": [["5 5 3\nX...X\n.....\n.....\n.....\nS...X", "24"], ["5 5 4\n..X..\n#X#..\n#...X\n.SX#.\n.....", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "一般图的最大匹配", "COCI（克罗地亚）"], "title": "[COCI 2025/2026 #2] 比赛 / Natjecanje", "background": "本题满分 $110$。", "description": "在一个 $n\\times m$ 的网格上，有 $k$ 个包裹要配送到 $k$ 个不同的格子上。包裹起初在中转站处。\n\n有以下四种格子：\n\n- `.`：空格子。\n- `#`：障碍物。\n- `S`：中转站。\n- `X`：包裹要被配送到的格子。\n\n已知：同时至多能带两个包裹；每秒可以向四连通（上下左右）的格子移动一格，但是不能移动到障碍物格子上或者越界。\n\n请求出将所有包裹配送并回到中转站的最短时间，或报告无解。", "inputFormat": "第一行，三个正整数 $n,m,k$（$1\\le n,m\\le 500$，$1\\le k\\le 67$）。\n\n接下来 $n$ 行，第 $i$ 行一个长度为 $m$ 的字符串 $s_i$，字符集为 $\\{\\texttt{.},\\texttt{\\#},\\texttt{S},\\texttt{X}\\}$。$s_{i,j}$ 表示第 $i$ 行第 $j$ 列的格子的类型。\n\n特别地，保证 $\\texttt{X}$ 出现恰好 $k$ 次。", "outputFormat": "若无解，输出一行 $-1$。\n\n否则输出一个正整数，表示答案。", "hint": "### 样例解释\n\n**样例一解释**：先带着一个包裹配送到右下角，回到中转站；然后带着两个包裹依次配送到左上、右上，最后回到起点。\n\n### 子任务\n\n- $\\text{Subtask 1 (17 pts)}$：$k\\le 2$；\n- $\\text{Subtask 2 (26 pts)}$：$k\\le 16$；\n- $\\text{Subtask 3 (29 pts)}$：$k\\le 22$；\n- $\\text{Subtask 4 (38 pts)}$：无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2025/2026 #2] 比赛 / Natjecanje", "background": "本题满分 $110$。", "description": "在一个 $n\\times m$ 的网格上，有 $k$ 个包裹要配送到 $k$ 个不同的格子上。包裹起初在中转站处。\n\n有以下四种格子：\n\n- `.`：空格子。\n- `#`：障碍物。\n- `S`：中转站。\n- `X`：包裹要被配送到的格子。\n\n已知：同时至多能带两个包裹；每秒可以向四连通（上下左右）的格子移动一格，但是不能移动到障碍物格子上或者越界。\n\n请求出将所有包裹配送并回到中转站的最短时间，或报告无解。", "inputFormat": "第一行，三个正整数 $n,m,k$（$1\\le n,m\\le 500$，$1\\le k\\le 67$）。\n\n接下来 $n$ 行，第 $i$ 行一个长度为 $m$ 的字符串 $s_i$，字符集为 $\\{\\texttt{.},\\texttt{\\#},\\texttt{S},\\texttt{X}\\}$。$s_{i,j}$ 表示第 $i$ 行第 $j$ 列的格子的类型。\n\n特别地，保证 $\\texttt{X}$ 出现恰好 $k$ 次。", "outputFormat": "若无解，输出一行 $-1$。\n\n否则输出一个正整数，表示答案。", "hint": "### 样例解释\n\n**样例一解释**：先带着一个包裹配送到右下角，回到中转站；然后带着两个包裹依次配送到左上、右上，最后回到起点。\n\n### 子任务\n\n- $\\text{Subtask 1 (17 pts)}$：$k\\le 2$；\n- $\\text{Subtask 2 (26 pts)}$：$k\\le 16$；\n- $\\text{Subtask 3 (29 pts)}$：$k\\le 22$；\n- $\\text{Subtask 4 (38 pts)}$：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P14597", "type": "P", "difficulty": 4, "samples": [["6\n3 2 6 3 3 8", "4\n5 6 6 8"], ["7\n3 6 4 2 6 2 5", "5\n3 6 6 6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2025", "Special Judge", "动态规划优化", "前缀和", "COCI（克罗地亚）"], "title": "[COCI 2025/2026 #2] 递增 / Rastući", "background": "本题满分 $110$。", "description": "给定长度为 $n$ 的序列 $a_1,\\ldots,a_n$。\n\n你可以进行如下的操作：\n\n> **操作**\n>\n> 设当前序列为 $[b_1,b_2,\\ldots,b_m]$。\n>\n> 选择 $1\\le i\\lt m$，将序列变为 $[b_1,b_2,\\ldots,b_{i-1},b_i+b_{i+1},b_{i+2},\\ldots,b_m]$。\n>\n\n目标是让 $a$ **不降**，即 $a_{i}\\le a_{i+1}$。求出这样的 $a$ 的最大长度，并构造一个合法的 $a$。\n\n本题中你可以获得部分分，详见「计分方式」。", "inputFormat": "第一行，一个正整数 $n$（$1\\le n\\le 5000$）。\n\n第二行，$n$ 个正整数 $a_i$（$1\\le a_i\\le 10^9$）。", "outputFormat": "第一行，一个正整数 $m$，表示最终序列的最长长度。\n\n第二行，$m$ 个正整数，表示操作后得到的序列。", "hint": "### 样例解释\n\n**样例一解释**：$[\\textcolor{red}{3,2},6,3,3,8]\\to [5,6,\\textcolor{red}{3,3},8]\\to [5,6,6,8]$。\n\n### 子任务\n\n- $\\text{Subtask 1 (10 pts)}$：$n\\le 20$。\n- $\\text{Subtask 2 (15 pts)}$：$n\\le 100,a_i\\le 100$。\n- $\\text{Subtask 3 (20 pts)}$：$n\\le 500$。\n- $\\text{Subtask 4 (25 pts)}$：$n\\le 1000$。\n- $\\text{Subtask 5 (40 pts)}$：无额外限制。\n\n### 计分方式\n\n正确回答第一行可以获得 $60\\%$ 的分数。\n\n在正确回答第一行的基础上正确回答第二行可以获得剩下 $40\\%$ 的分数。\n\n如果只想要获得 $60\\%$ 的分数，也要在第二行输出 $m$ 个正整数，否则可能使得分出现偏差。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2025/2026 #2] 递增 / Rastući", "background": "本题满分 $110$。", "description": "给定长度为 $n$ 的序列 $a_1,\\ldots,a_n$。\n\n你可以进行如下的操作：\n\n> **操作**\n>\n> 设当前序列为 $[b_1,b_2,\\ldots,b_m]$。\n>\n> 选择 $1\\le i\\lt m$，将序列变为 $[b_1,b_2,\\ldots,b_{i-1},b_i+b_{i+1},b_{i+2},\\ldots,b_m]$。\n>\n\n目标是让 $a$ **不降**，即 $a_{i}\\le a_{i+1}$。求出这样的 $a$ 的最大长度，并构造一个合法的 $a$。\n\n本题中你可以获得部分分，详见「计分方式」。", "inputFormat": "第一行，一个正整数 $n$（$1\\le n\\le 5000$）。\n\n第二行，$n$ 个正整数 $a_i$（$1\\le a_i\\le 10^9$）。", "outputFormat": "第一行，一个正整数 $m$，表示最终序列的最长长度。\n\n第二行，$m$ 个正整数，表示操作后得到的序列。", "hint": "### 样例解释\n\n**样例一解释**：$[\\textcolor{red}{3,2},6,3,3,8]\\to [5,6,\\textcolor{red}{3,3},8]\\to [5,6,6,8]$。\n\n### 子任务\n\n- $\\text{Subtask 1 (10 pts)}$：$n\\le 20$。\n- $\\text{Subtask 2 (15 pts)}$：$n\\le 100,a_i\\le 100$。\n- $\\text{Subtask 3 (20 pts)}$：$n\\le 500$。\n- $\\text{Subtask 4 (25 pts)}$：$n\\le 1000$。\n- $\\text{Subtask 5 (40 pts)}$：无额外限制。\n\n### 计分方式\n\n正确回答第一行可以获得 $60\\%$ 的分数。\n\n在正确回答第一行的基础上正确回答第二行可以获得剩下 $40\\%$ 的分数。\n\n如果只想要获得 $60\\%$ 的分数，也要在第二行输出 $m$ 个正整数，否则可能使得分出现偏差。", "locale": "zh-CN"}}}
{"pid": "P14598", "type": "P", "difficulty": 5, "samples": [["7 4\nPPCPPCC\n1 7\n1 5\n3 7\n4 5", "3\n3\n2\n2"], ["6 2\nCCCCCC\n1 6\n2 5", "6\n4"], ["16 1\nPPPCPCCCCCCPPPPP\n1 16", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "贪心", "莫队", "线段树", "堆", "树状数组", "2025", "图论建模", "前缀和", "矩阵乘法", "分块", "ST 表", "COCI（克罗地亚）", "离线处理"], "title": "[COCI 2025/2026 #2] 搭塔 / Tornjevi", "background": "本题满分 $110$。", "description": "有 $n$ 块正方体积木，每块积木的颜色是 $\\colorbox{#e82548}{\\textcolor{white}{\\textsf{红}}}\\colorbox{87b3ed}{\\textcolor{white}{\\textsf{蓝}}}$ 二者之一。第 $i$ 块积木的边长为 $i$。\n\n定义一座塔是合法的，当且仅当：\n\n- 相邻的两个积木块的颜色不同；\n- 从下到上，积木块的边长严格递减。\n\n$q$ 次独立询问，每次询问给定 $l,r$，求出：如果用边长 $l,\\ldots,r$ 的积木搭塔，至少要搭几座塔。", "inputFormat": "第一行，两个正整数 $n,q$（$1\\le n,q\\le 10^5$）。\n\n第二行，一个长度为 $n$ 的字符串 $s$。$s_i=\\texttt{C}$，表示边长为 $i$ 的积木为 $\\colorbox{#e82548}{\\textcolor{white}{\\textsf{红}}}$ 色；否则 $s_i=\\texttt{P}$，表示边长为 $i$ 的积木为 $\\colorbox{87b3ed}{\\textcolor{white}{\\textsf{蓝}}}$ 色。\n\n接下来 $q$ 行，每行两个正整数 $l_i,r_i$（$1\\le l_i\\le r_i\\le n$），描述一次询问。", "outputFormat": "输出 $q$ 行，第 $i$ 行一个正整数，描述第 $i$ 个询问的答案。", "hint": "### 样例解释\n\n**样例二解释**：所有积木都是 $\\colorbox{#e82548}{\\textcolor{white}{\\textsf{红}}}$ 色的，所以只能搭出仅包含一块积木的塔。显然对于一次询问 $l,r$ 的答案为 $r-l+1$。\n\n\n### 子任务\n\n- $\\text{Subtask 1 (23 pts)}$：$n,q\\le 10$；\n- $\\text{Subtask 2 (38 pts)}$：$n,q\\le 1000$；\n- $\\text{Subtask 3 (25 pts)}$：至多有 $20$ 块 $\\colorbox{87b3ed}{\\textcolor{white}{\\textsf{蓝}}}$ 色积木。\n- $\\text{Subtask 4 (24 pts)}$：无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2025/2026 #2] 搭塔 / Tornjevi", "background": "本题满分 $110$。", "description": "有 $n$ 块正方体积木，每块积木的颜色是 $\\colorbox{#e82548}{\\textcolor{white}{\\textsf{红}}}\\colorbox{87b3ed}{\\textcolor{white}{\\textsf{蓝}}}$ 二者之一。第 $i$ 块积木的边长为 $i$。\n\n定义一座塔是合法的，当且仅当：\n\n- 相邻的两个积木块的颜色不同；\n- 从下到上，积木块的边长严格递减。\n\n$q$ 次独立询问，每次询问给定 $l,r$，求出：如果用边长 $l,\\ldots,r$ 的积木搭塔，至少要搭几座塔。", "inputFormat": "第一行，两个正整数 $n,q$（$1\\le n,q\\le 10^5$）。\n\n第二行，一个长度为 $n$ 的字符串 $s$。$s_i=\\texttt{C}$，表示边长为 $i$ 的积木为 $\\colorbox{#e82548}{\\textcolor{white}{\\textsf{红}}}$ 色；否则 $s_i=\\texttt{P}$，表示边长为 $i$ 的积木为 $\\colorbox{87b3ed}{\\textcolor{white}{\\textsf{蓝}}}$ 色。\n\n接下来 $q$ 行，每行两个正整数 $l_i,r_i$（$1\\le l_i\\le r_i\\le n$），描述一次询问。", "outputFormat": "输出 $q$ 行，第 $i$ 行一个正整数，描述第 $i$ 个询问的答案。", "hint": "### 样例解释\n\n**样例二解释**：所有积木都是 $\\colorbox{#e82548}{\\textcolor{white}{\\textsf{红}}}$ 色的，所以只能搭出仅包含一块积木的塔。显然对于一次询问 $l,r$ 的答案为 $r-l+1$。\n\n\n### 子任务\n\n- $\\text{Subtask 1 (23 pts)}$：$n,q\\le 10$；\n- $\\text{Subtask 2 (38 pts)}$：$n,q\\le 1000$；\n- $\\text{Subtask 3 (25 pts)}$：至多有 $20$ 块 $\\colorbox{87b3ed}{\\textcolor{white}{\\textsf{蓝}}}$ 色积木。\n- $\\text{Subtask 4 (24 pts)}$：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P14599", "type": "P", "difficulty": 6, "samples": [["5 2 3\n1 -1 1 -1 2", "2"], ["6 3 2\n1 1 -1 -1 -1 -1", "0"], ["10 42 7\n-1 -1 -1 -1 -1 -1 -1 -1 -1 -1", "989891925"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "容斥原理"], "title": "CF1093F 加强版", "background": "", "description": "Niko 有一个长度为 $n$ 的整数序列 $a$ 以及两个整数 $k,\\text{len}$，保证 $a_i\\in[1,k]\\cup\\{-1\\}$。\n\n求有多少种将 $a$ 中的 $-1$ 替换为 $[1,k]$ 中的整数的方式，使得 $a$ 中不存在长度为 $\\text{len}$ 的连续相同区间。答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个正整数 $n,k,\\text{len}$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "输出一行一个数，表示合法的方案数对 $10^9+7$ 取模的结果。", "hint": "对于所有数据，$1\\le n,k\\le2\\times10^6$，$1\\le\\text{len}\\le n$，$a_i\\in[1,k]\\cup\\{-1\\}$，输入均为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "CF1093F 加强版", "background": "", "description": "Niko 有一个长度为 $n$ 的整数序列 $a$ 以及两个整数 $k,\\text{len}$，保证 $a_i\\in[1,k]\\cup\\{-1\\}$。\n\n求有多少种将 $a$ 中的 $-1$ 替换为 $[1,k]$ 中的整数的方式，使得 $a$ 中不存在长度为 $\\text{len}$ 的连续相同区间。答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个正整数 $n,k,\\text{len}$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "输出一行一个数，表示合法的方案数对 $10^9+7$ 取模的结果。", "hint": "对于所有数据，$1\\le n,k\\le2\\times10^6$，$1\\le\\text{len}\\le n$，$a_i\\in[1,k]\\cup\\{-1\\}$，输入均为整数。", "locale": "zh-CN"}}}
{"pid": "P14600", "type": "P", "difficulty": 5, "samples": [["", "2"], ["", "30"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC", "bitset", "NWRRC"], "title": "[NWRRC 2025] Asynchronous Processor", "background": "", "description": "You are given a program consisting of $n$ instructions executed by a processor with a single integer register $A$, initially equal to $0$. Each instruction is one of two types:\n\n- $\\texttt{+ v}$ --- performs $A := A + v$;\n- $\\texttt{= v}$ --- performs $A := v$.\n\nThe instructions in the program are numbered from $1$ to $n$. Each instruction $i$ initially has timestamp $i$.\n\nSome instructions are marked as $\\textit{asynchronous}$. If instruction $i$ is asynchronous, its timestamp can be changed to any $\\textbf{real}$ number greater than $i$.\n\nAfter all timestamp adjustments, all timestamps must be distinct. The processor then executes the instructions in order of increasing timestamp.\n\nDetermine the number of distinct final values of $A$ that can be obtained after all instructions have been executed, considering all possible choices of asynchronous instruction timestamps.\n", "inputFormat": "The first line contains an integer $n$, denoting the number of instructions in the program ($1 \\le n \\le 2000$).\n\nThe $i$-th of the following $n$ lines describes instruction $i$ and contains three tokens. The first token is either $\\texttt{+}$ or $\\texttt{=}$, denoting the type of the instruction. The second token is an integer $v$, denoting the argument of the instruction ($1 \\le v \\le 500$). Finally, the third token is either $\\texttt{async}$ if the instruction is marked as asynchronous, or $\\texttt{sync}$ otherwise.", "outputFormat": "Print the number of distinct final values $A$ can take after executing the program. ", "hint": "In the first test, the program execution starts with instruction $1$ setting $A$ to $1$. Then, instructions $2$ and $3$ are executed in one of the two orders:\n\n- if $\\texttt{= 2}$ is executed before $\\texttt{+ 3}$, $A$ will be equal to $5$;\n- if $\\texttt{+ 3}$ is executed before $\\texttt{= 2}$, $A$ will be equal to $2$.\n\nThus, there are two possible values of $A$ at the end: $5$ and $2$.", "locale": "en", "translations": {"en": {"title": "[NWRRC 2025] Asynchronous Processor", "background": "", "description": "You are given a program consisting of $n$ instructions executed by a processor with a single integer register $A$, initially equal to $0$. Each instruction is one of two types:\n\n- $\\texttt{+ v}$ --- performs $A := A + v$;\n- $\\texttt{= v}$ --- performs $A := v$.\n\nThe instructions in the program are numbered from $1$ to $n$. Each instruction $i$ initially has timestamp $i$.\n\nSome instructions are marked as $\\textit{asynchronous}$. If instruction $i$ is asynchronous, its timestamp can be changed to any $\\textbf{real}$ number greater than $i$.\n\nAfter all timestamp adjustments, all timestamps must be distinct. The processor then executes the instructions in order of increasing timestamp.\n\nDetermine the number of distinct final values of $A$ that can be obtained after all instructions have been executed, considering all possible choices of asynchronous instruction timestamps.\n", "inputFormat": "The first line contains an integer $n$, denoting the number of instructions in the program ($1 \\le n \\le 2000$).\n\nThe $i$-th of the following $n$ lines describes instruction $i$ and contains three tokens. The first token is either $\\texttt{+}$ or $\\texttt{=}$, denoting the type of the instruction. The second token is an integer $v$, denoting the argument of the instruction ($1 \\le v \\le 500$). Finally, the third token is either $\\texttt{async}$ if the instruction is marked as asynchronous, or $\\texttt{sync}$ otherwise.", "outputFormat": "Print the number of distinct final values $A$ can take after executing the program. ", "hint": "In the first test, the program execution starts with instruction $1$ setting $A$ to $1$. Then, instructions $2$ and $3$ are executed in one of the two orders:\n\n- if $\\texttt{= 2}$ is executed before $\\texttt{+ 3}$, $A$ will be equal to $5$;\n- if $\\texttt{+ 3}$ is executed before $\\texttt{= 2}$, $A$ will be equal to $2$.\n\nThus, there are two possible values of $A$ at the end: $5$ and $2$.", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2025] Asynchronous Processor", "background": "", "description": "给定一个由 $n$ 条指令组成的程序，这些指令由一个具有单个整数寄存器 $A$ 的处理器执行，初始值为 $0$。每条指令是以下两种类型之一：\n\n- $\\texttt{+ v}$ —— 执行 $A := A + v$；\n- $\\texttt{= v}$ —— 执行 $A := v$。\n\n程序中的指令从 $1$ 到 $n$ 编号。每条指令 $i$ 初始时间戳为 $i$。\n\n有些指令被标记为 **异步**。如果指令 $i$ 是异步的，其时间戳可以更改为任何大于 $i$ 的 **实数**。\n\n在所有时间戳调整之后，所有时间戳必须互不相同。处理器随后按时间戳递增的顺序执行指令。\n\n确定在执行所有指令后，考虑所有可能的异步指令时间戳选择，$A$ 可以得到的不同的最终值的数量。", "inputFormat": "第一行包含一个整数 $n$，表示程序中的指令数量（$1 \\le n \\le 2000$）。\n\n接下来的 $n$ 行中，第 $i$ 行描述指令 $i$，包含三个标记。第一个标记是 $\\texttt{+}$ 或 $\\texttt{=}$，表示指令的类型。第二个标记是一个整数 $v$，表示指令的参数（$1 \\le v \\le 500$）。最后，第三个标记是 $\\texttt{async}$（如果指令被标记为异步）或 $\\texttt{sync}$（否则）。", "outputFormat": "输出执行程序后 $A$ 可以取到的不同最终值的数量。", "hint": "在第一个测试中，程序执行从指令 $1$ 将 $A$ 设置为 $1$ 开始。然后，指令 $2$ 和 $3$ 按以下两种顺序之一执行：\n\n- 如果 $\\texttt{= 2}$ 在 $\\texttt{+ 3}$ 之前执行，$A$ 将等于 $5$；\n- 如果 $\\texttt{+ 3}$ 在 $\\texttt{= 2}$ 之前执行，$A$ 将等于 $2$。\n\n因此，最后 $A$ 有两个可能的值：$5$ 和 $2$。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14601", "type": "P", "difficulty": 2, "samples": [["3\n6 5 6\n2 10 10\n3 8 4", "48"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC", "NWRRC"], "title": "[NWRRC 2025] Bounding Boxes", "background": "", "description": "ICPC is considering sending out contest souvenirs via a delivery service. The delivery service provides multiple types of packing boxes, each shaped as a rectangular parallelepiped.\n\nUnfortunately, there is no way to know which packing box type will be available on the shipping day, so ICPC needs to choose a souvenir box size that fits inside every packing box.\n\nAccording to the shipment rules, the souvenir box must also be a rectangular parallelepiped. When placed inside a packing box, the souvenir box may be rotated, but its sides must remain parallel to the sides of the packing box. Extra space is not an issue, as it will be filled with plastic wrap.\n\nHelp ICPC determine the maximum possible volume of a souvenir box that fits inside all of the packing boxes.", "inputFormat": "The first line contains a single integer $n$, denoting the number of packing box types provided by the delivery service ($1 \\le n \\le 1000$).\n\nThe $i$-th of the following $n$ lines contains three integers $w_i$, $h_i$, and $d_i$, denoting the width, height, and depth of the $i$-th packing box ($1 \\le w_i, h_i, d_i \\le 1000$).", "outputFormat": "Print the largest possible volume of a souvenir box that fits inside all of the packing boxes. Remember that the souvenir box can be rotated, as long as its sides remain parallel to the sides of the packing box.", "hint": "In the example, the largest souvenir box that fits in each of the packing boxes has dimensions $2 \\times 4 \\times 6$. It fits in the first two packing boxes without rotation, and it can be rotated to become $2 \\times 6 \\times 4$ to fit in the third packing box.", "locale": "en", "translations": {"en": {"title": "[NWRRC 2025] Bounding Boxes", "background": "", "description": "ICPC is considering sending out contest souvenirs via a delivery service. The delivery service provides multiple types of packing boxes, each shaped as a rectangular parallelepiped.\n\nUnfortunately, there is no way to know which packing box type will be available on the shipping day, so ICPC needs to choose a souvenir box size that fits inside every packing box.\n\nAccording to the shipment rules, the souvenir box must also be a rectangular parallelepiped. When placed inside a packing box, the souvenir box may be rotated, but its sides must remain parallel to the sides of the packing box. Extra space is not an issue, as it will be filled with plastic wrap.\n\nHelp ICPC determine the maximum possible volume of a souvenir box that fits inside all of the packing boxes.", "inputFormat": "The first line contains a single integer $n$, denoting the number of packing box types provided by the delivery service ($1 \\le n \\le 1000$).\n\nThe $i$-th of the following $n$ lines contains three integers $w_i$, $h_i$, and $d_i$, denoting the width, height, and depth of the $i$-th packing box ($1 \\le w_i, h_i, d_i \\le 1000$).", "outputFormat": "Print the largest possible volume of a souvenir box that fits inside all of the packing boxes. Remember that the souvenir box can be rotated, as long as its sides remain parallel to the sides of the packing box.", "hint": "In the example, the largest souvenir box that fits in each of the packing boxes has dimensions $2 \\times 4 \\times 6$. It fits in the first two packing boxes without rotation, and it can be rotated to become $2 \\times 6 \\times 4$ to fit in the third packing box.", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2025] Bounding Boxes", "background": "", "description": "ICPC 正在考虑通过快递服务寄送竞赛纪念品。该快递服务提供多种类型的包装盒，每种包装盒的形状都是长方体。\n\n不幸的是，无法预知发货当天哪种包装盒类型可用，因此 ICPC 需要选择一个能放入所有包装盒内的纪念品盒子尺寸。\n\n根据运输规则，纪念品盒子也必须是长方体。当放入包装盒内时，纪念品盒子可以旋转，但其各边必须与包装盒的各边保持平行。多余的空间不是问题，因为会用塑料填充物填满。\n\n请帮助 ICPC 确定一个能放入所有包装盒内的纪念品盒子的最大可能体积。", "inputFormat": "第一行包含一个整数 $n$，表示快递服务提供的包装盒类型数量（$1 \\le n \\le 1000$）。\n\n接下来的 $n$ 行中，第 $i$ 行包含三个整数 $w_i$、$h_i$ 和 $d_i$，分别表示第 $i$ 个包装盒的宽度、高度和深度（$1 \\le w_i, h_i, d_i \\le 1000$）。", "outputFormat": "输出一个能放入所有包装盒内的纪念品盒子的最大可能体积。请注意，只要纪念品盒子的各边与包装盒的各边保持平行，纪念品盒子就可以旋转。", "hint": "在示例中，能放入每个包装盒内的最大纪念品盒子尺寸为 $2 \\times 4 \\times 6$。它在前两个包装盒中无需旋转即可放入，并且可以旋转为 $2 \\times 6 \\times 4$ 以放入第三个包装盒。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14602", "type": "P", "difficulty": 2, "samples": [["112025", "134 235 25"], ["128", "129 0"], ["0", "0"], ["42", "42"], ["16384", "129 128 0"], ["2147483647 ", "135 255 255 255 127"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC", "NWRRC"], "title": "[NWRRC 2025] Compact Encoding", "background": "", "description": "Binary formats often use compact representations for integers. Consider writing a 32-bit unsigned integer to a file: you must always reserve 4 bytes to represent it (remember, 8 bits make one byte). However, in many real-life applications, integer values tend to be small. Writing these small values using a fixed 4-byte representation results in files that are mostly filled with zero bytes.\n\nTo make the representation more compact, we introduce the following encoding scheme. Each value is represented as a sequence of bytes $b_1, b_2, \\ldots, b_k$, where each $b_i$ is an integer between $0$ and $255$, inclusive. The most significant bit of each byte serves as a continuation flag, and the lower $7$ bits carry the actual data. If the continuation flag is $1$, more bytes follow; for the last byte, it is $0$. The representation is $\\textit{big-endian}$, meaning that $b_1$ contains the most significant bits of the encoded value.\n\nFor example, here's how to find the compact representation of $n = 112025$. First, we find its binary representation:\n\n$$112025 = 11011010110011001_2$$\n\nNext, we split it into 7-bit chunks, padding with zeros on the left if necessary:\n\n:::align{center}\n$0000110$ / $1101011$ / $0011001$\n:::\n\nThe first two chunks have a following chunk, so the corresponding bytes have their most significant bit set to $1$. The last chunk has no following chunk, so its most significant bit is $0$. This gives us:\n\n$$\\begin{array}{l}\nb_1 = 10000110_2 = 134\\\\\nb_2 = 11101011_2 = 235\\\\\nb_3 = 00011001_2 = 25\\\\\n\\end{array}$$\n\nYou are given an integer $n$, and your task is to find its compact representation.", "inputFormat": "The only line contains a single integer $n$ ($0 \\le n \\le 2^{31}-1$).", "outputFormat": "Print a sequence of integers between $0$ and $255$, inclusive, representing the compact encoding of $n$. The encoding must not contain leading bytes with zero data bits: that is, it may not start with $128$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[NWRRC 2025] Compact Encoding", "background": "", "description": "Binary formats often use compact representations for integers. Consider writing a 32-bit unsigned integer to a file: you must always reserve 4 bytes to represent it (remember, 8 bits make one byte). However, in many real-life applications, integer values tend to be small. Writing these small values using a fixed 4-byte representation results in files that are mostly filled with zero bytes.\n\nTo make the representation more compact, we introduce the following encoding scheme. Each value is represented as a sequence of bytes $b_1, b_2, \\ldots, b_k$, where each $b_i$ is an integer between $0$ and $255$, inclusive. The most significant bit of each byte serves as a continuation flag, and the lower $7$ bits carry the actual data. If the continuation flag is $1$, more bytes follow; for the last byte, it is $0$. The representation is $\\textit{big-endian}$, meaning that $b_1$ contains the most significant bits of the encoded value.\n\nFor example, here's how to find the compact representation of $n = 112025$. First, we find its binary representation:\n\n$$112025 = 11011010110011001_2$$\n\nNext, we split it into 7-bit chunks, padding with zeros on the left if necessary:\n\n:::align{center}\n$0000110$ / $1101011$ / $0011001$\n:::\n\nThe first two chunks have a following chunk, so the corresponding bytes have their most significant bit set to $1$. The last chunk has no following chunk, so its most significant bit is $0$. This gives us:\n\n$$\\begin{array}{l}\nb_1 = 10000110_2 = 134\\\\\nb_2 = 11101011_2 = 235\\\\\nb_3 = 00011001_2 = 25\\\\\n\\end{array}$$\n\nYou are given an integer $n$, and your task is to find its compact representation.", "inputFormat": "The only line contains a single integer $n$ ($0 \\le n \\le 2^{31}-1$).", "outputFormat": "Print a sequence of integers between $0$ and $255$, inclusive, representing the compact encoding of $n$. The encoding must not contain leading bytes with zero data bits: that is, it may not start with $128$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2025] Compact Encoding", "background": "", "description": "二进制格式通常使用紧凑的整数表示方法。考虑将一个 32 位无符号整数写入文件：你必须始终保留 4 个字节来表示它（记住，8 位构成一个字节）。然而，在许多实际应用中，整数值往往很小。使用固定的 4 字节表示法来写入这些小数值会导致文件大部分被零字节填充。\n\n为了使表示更紧凑，我们引入以下编码方案。每个值表示为一个字节序列 $b_1, b_2, \\ldots, b_k$，其中每个 $b_i$ 是 $0$ 到 $255$ 之间的整数（包含）。每个字节的最高有效位用作继续标志，较低的 $7$ 位携带实际数据。如果继续标志为 $1$，则表示后面还有更多字节；对于最后一个字节，该标志为 $0$。该表示是 **大端序** 的，意味着 $b_1$ 包含编码值的最高有效位。\n\n例如，以下是 $n = 112025$ 的紧凑表示方法。首先，我们找到它的二进制表示：\n\n$$112025 = 11011010110011001_2$$\n\n接下来，我们将其分割为 7 位块，必要时在左侧用零填充：\n\n:::align{center}\n$0000110$ / $1101011$ / $0011001$\n:::\n\n前两个块后面还有块，因此对应字节的最高有效位设置为 $1$。最后一个块没有后续块，因此其最高有效位为 $0$。这给我们：\n\n$$\\begin{array}{l}\nb_1 = 10000110_2 = 134\\\\\nb_2 = 11101011_2 = 235\\\\\nb_3 = 00011001_2 = 25\\\\\n\\end{array}$$\n\n给定一个整数 $n$，你的任务是找到它的紧凑表示。", "inputFormat": "仅一行包含一个整数 $n$（$0 \\le n \\le 2^{31}-1$）。", "outputFormat": "输出 $0$ 到 $255$ 之间（包含）的整数序列，表示 $n$ 的紧凑编码。编码不能包含数据位为零的前导字节：也就是说，不能以 $128$ 开头。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14603", "type": "P", "difficulty": 3, "samples": [["4 3 5", "Yes\nicpc\nnwrrc\nitmo"], ["2 2 2", "Yes\naa\nbb\ncc"], ["0 0 1 ", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "构造", "ICPC", "NWRRC"], "title": "[NWRRC 2025] Defense Distance", "background": "", "description": "The NWRRC security server has a final access check for teams that try to submit their solutions to the secret hidden problem.\n\nTo pass the check, the team must enter three passwords $s$, $t$, and $u$ that the system will accept. Each password must be a non-empty string consisting of at most $5000$ lowercase English letters.\n\nThe rules of the server are public:\n\n- The distance between $s$ and $t$ should be equal to $a$.\n- The distance between $s$ and $u$ should be equal to $b$.\n- The distance between $t$ and $u$ should be equal to $c$.\n\nThe $\\textit{distance}$ between two strings $s_1$ and $s_2$ is the minimum number of single-character operations (insert one character, remove one character, or replace one character) needed to convert string $s_1$ into string $s_2$. This metric is also known as the Levenshtein distance.\n\nThe server gives access to the hidden problem if and only if all described conditions are satisfied. Your goal is to construct a triple of passwords to unlock the hidden problem or determine that it is impossible.", "inputFormat": "The only line contains three integers $a$, $b$, and $c$, denoting the required distances between each pair of passwords ($0 \\le a, b, c \\le 1000$).", "outputFormat": "If there are no three passwords with the required properties, print $\\texttt{No}$ in the only line.\n\nOtherwise, print $\\texttt{Yes}$ in the first line. Then print passwords $s$, $t$, and $u$ in the following three lines. Each password should consist of at least $1$ and at most $5000$ lowercase English letters.\n\nIf there are multiple triples of passwords that meet the requirements, print any of them.\n", "hint": "In the first test case:\n\n- The distance between $\\texttt{icpc}$ and $\\texttt{nwrrc}$ is $4$: $\\texttt{icpc}$ $\\to$ $\\texttt{irpc}$ $\\to$ $\\texttt{irrc}$ $\\to$ $\\texttt{nrrc}$ $\\to$ $\\texttt{nwrrc}$.\n- The distance between $\\texttt{icpc}$ and $\\texttt{itmo}$ is $3$: $\\texttt{icpc}$ $\\to$ $\\texttt{itpc}$ $\\to$ $\\texttt{itpo}$ $\\to$ $\\texttt{itmo}$.\n- The distance between $\\texttt{nwrrc}$ and $\\texttt{itmo}$ is $5$: $\\texttt{nwrrc}$ $\\to$ $\\texttt{wrrc}$ $\\to$ $\\texttt{wrro}$ $\\to$ $\\texttt{irro}$ $\\to$ $\\texttt{itro}$ $\\to$ $\\texttt{itmo}$.\n\nIn the second test case, the distance between each pair of passwords is $2$.\n\nIn the third test case, it can be shown that there are no three passwords with the required properties.", "locale": "en", "translations": {"en": {"title": "[NWRRC 2025] Defense Distance", "background": "", "description": "The NWRRC security server has a final access check for teams that try to submit their solutions to the secret hidden problem.\n\nTo pass the check, the team must enter three passwords $s$, $t$, and $u$ that the system will accept. Each password must be a non-empty string consisting of at most $5000$ lowercase English letters.\n\nThe rules of the server are public:\n\n- The distance between $s$ and $t$ should be equal to $a$.\n- The distance between $s$ and $u$ should be equal to $b$.\n- The distance between $t$ and $u$ should be equal to $c$.\n\nThe $\\textit{distance}$ between two strings $s_1$ and $s_2$ is the minimum number of single-character operations (insert one character, remove one character, or replace one character) needed to convert string $s_1$ into string $s_2$. This metric is also known as the Levenshtein distance.\n\nThe server gives access to the hidden problem if and only if all described conditions are satisfied. Your goal is to construct a triple of passwords to unlock the hidden problem or determine that it is impossible.", "inputFormat": "The only line contains three integers $a$, $b$, and $c$, denoting the required distances between each pair of passwords ($0 \\le a, b, c \\le 1000$).", "outputFormat": "If there are no three passwords with the required properties, print $\\texttt{No}$ in the only line.\n\nOtherwise, print $\\texttt{Yes}$ in the first line. Then print passwords $s$, $t$, and $u$ in the following three lines. Each password should consist of at least $1$ and at most $5000$ lowercase English letters.\n\nIf there are multiple triples of passwords that meet the requirements, print any of them.\n", "hint": "In the first test case:\n\n- The distance between $\\texttt{icpc}$ and $\\texttt{nwrrc}$ is $4$: $\\texttt{icpc}$ $\\to$ $\\texttt{irpc}$ $\\to$ $\\texttt{irrc}$ $\\to$ $\\texttt{nrrc}$ $\\to$ $\\texttt{nwrrc}$.\n- The distance between $\\texttt{icpc}$ and $\\texttt{itmo}$ is $3$: $\\texttt{icpc}$ $\\to$ $\\texttt{itpc}$ $\\to$ $\\texttt{itpo}$ $\\to$ $\\texttt{itmo}$.\n- The distance between $\\texttt{nwrrc}$ and $\\texttt{itmo}$ is $5$: $\\texttt{nwrrc}$ $\\to$ $\\texttt{wrrc}$ $\\to$ $\\texttt{wrro}$ $\\to$ $\\texttt{irro}$ $\\to$ $\\texttt{itro}$ $\\to$ $\\texttt{itmo}$.\n\nIn the second test case, the distance between each pair of passwords is $2$.\n\nIn the third test case, it can be shown that there are no three passwords with the required properties.", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2025] Defense Distance", "background": "", "description": "NWRRC 安全服务器对尝试提交隐藏题目解决方案的队伍进行最终访问检查。\n\n要通过检查，队伍必须输入三个系统会接受的密码 $s$、$t$ 和 $u$。每个密码必须是非空字符串，由最多 $5000$ 个小写英文字母组成。\n\n服务器的规则是公开的：\n\n- $s$ 和 $t$ 之间的距离应等于 $a$。\n- $s$ 和 $u$ 之间的距离应等于 $b$。\n- $t$ 和 $u$ 之间的距离应等于 $c$。\n\n两个字符串 $s_1$ 和 $s_2$ 之间的 **距离** 是将字符串 $s_1$ 转换为字符串 $s_2$ 所需的最少单字符操作次数（插入一个字符、删除一个字符或替换一个字符）。这个度量标准也被称为莱文斯坦距离。\n\n当且仅当所有描述的条件都满足时，服务器才会授予对隐藏问题的访问权限。你的目标是构造一个密码三元组来解锁隐藏问题，或者确定这是不可能的。", "inputFormat": "仅一行包含三个整数 $a$、$b$ 和 $c$，表示每对密码之间所需的距离（$0 \\le a, b, c \\le 1000$）。\n", "outputFormat": "如果不存在具有所需属性的三个密码，则在唯一一行输出 `No`。\n\n否则，在第一行输出 `Yes`。然后在接下来的三行中输出密码 $s$、$t$ 和 $u$。每个密码应由至少 $1$ 个、最多 $5000$ 个小写英文字母组成。\n\n如果有多个密码三元组满足要求，输出其中任意一个。", "hint": "在第一个测试用例中：\n\n- $\\texttt{icpc}$ 和 $\\texttt{nwrrc}$ 之间的距离是 $4$：$\\texttt{icpc}$ $\\to$ $\\texttt{irpc}$ $\\to$ $\\texttt{irrc}$ $\\to$ $\\texttt{nrrc}$ $\\to$ $\\texttt{nwrrc}$。\n- $\\texttt{icpc}$ 和 $\\texttt{itmo}$ 之间的距离是 $3$：$\\texttt{icpc}$ $\\to$ $\\texttt{itpc}$ $\\to$ $\\texttt{itpo}$ $\\to$ $\\texttt{itmo}$。\n- $\\texttt{nwrrc}$ 和 $\\texttt{itmo}$ 之间的距离是 $5$：$\\texttt{nwrrc}$ $\\to$ $\\texttt{wrrc}$ $\\to$ $\\texttt{wrro}$ $\\to$ $\\texttt{irro}$ $\\to$ $\\texttt{itro}$ $\\to$ $\\texttt{itmo}$。\n\n在第二个测试用例中，每对密码之间的距离都是 $2$。\n\n在第三个测试用例中，可以证明不存在具有所需属性的三个密码。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14604", "type": "P", "difficulty": 5, "samples": [["2 5\n\nW\n\nW\n\nB\n\nB\n\nB\n\nW\n\nB\n\nB\n\nB\n\n\nB\n\nW\n\nW\n\nB\n\nB\n\nW\n\nW\n\nW\n\nB", "\n? 1 1\n\n? 1 2\n\n? 1 3\n\n? 2 1\n\n? 2 2\n\n? 2 3\n\n? 3 1\n\n? 3 2\n\n? 3 3\n\n! B 2 2 1 3 3 3 2 1 3 2\n? 1 1\n\n? 1 2\n\n? 1 3\n\n? 2 1\n\n? 2 2\n\n? 2 3\n\n? 3 1\n\n? 3 2\n\n? 3 3\n\n! W 1 2 3 2 1 3 2 3 3 1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "交互题", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2025] Eight-Connected Figures", "background": "Looking at problems \"K-Shaped Figures\", \"H-Shaped Figures\" and \"Eight-Shaped Figures\" from the past three years, you might wonder what kind of geometry problem would be this year. To surprise you, this year the jury decides to change not the shape of the figure, but the \"shape\" itself. Today you need to find \"Eight-$\\textbf{connected}$ Figures\" in real time.", "description": "$\\textit{This is an interactive problem.}$\n\nAn infinite square grid is hidden from you. Every cell is identified by a pair of integers $(x, y)$ and is $\\textbf{randomly}$ colored either black or white with $50\\%$ probability for each color, independently of other cells.\n\nTwo cells are considered $\\textit{adjacent}$ if they share an edge or a corner. Thus, every cell $(x, y)$ has $8$ adjacent cells: $(x-1, y-1)$, $(x-1, y)$, $(x-1, y+1)$, $(x, y-1)$, $(x, y+1)$, $(x+1, y-1)$, $(x+1, y)$, and $(x+1, y+1)$.\n\nA set of cells $S$ is called $\\textit{8-connected}$ if for any two cells in $S$, there exists a path between them using only cells from $S$, where consecutive cells in the path are adjacent.\n\nIn one query, you can learn the color of any cell on the grid. Your task is to find an 8-connected set of $n$ cells such that all cells in the set have the same color.\n\nYou need to solve $t$ test cases. In each test case, the grid is colored randomly and independently of the other test cases.\n\nYou are allowed to make at most $30\\,000$ queries $\\textbf{in total}$ over all test cases.", "inputFormat": "The first line contains two integers $t$ and $n$, denoting the number of test cases and the required size of the 8-connected set ($1 \\le t \\le 50$; $2 \\le n \\le 300$).\n\n### Interaction Protocol\n\nIn each test case, you can make zero or more queries to learn the colors of grid cells.\n\nTo make a query, print a line:\n\n- $\\tt{?}$ $x$ $y$\n\nwhere $(x, y)$ are the coordinates of the requested cell ($-10^9 \\le x, y \\le 10^9$). After that, read a line containing one letter: $\\texttt{B}$ if the cell $(x, y)$ is black, or $\\texttt{W}$ if the cell $(x, y)$ is white.\n\nOnce you are ready to present an 8-connected set of $n$ cells of the same color, print a line:\n\n- $\\tt{!}$ $c$ $x_1$ $y_1$ $x_2$ $y_2$ $\\ldots$ $x_n$ $y_n$\n\nwhere $c$ is a letter denoting the color of the cells in the set ($\\texttt{B}$ for black and $\\texttt{W}$ for white), and $(x_1, y_1), (x_2, y_2), \\ldots, (x_n, y_n)$ are the $n$ distinct cells in the set ($-10^9 \\le x_i, y_i \\le 10^9$). The interactor does not print anything in response to this line.\n\nAfter printing the set, proceed to the next test case, or terminate the program if this was the last one.\n\nYou are allowed to make at most $30\\,000$ queries $\\textbf{in total}$ over all test cases (not including the lines that print the sets). If you exceed this limit, the interactor will print $0$ instead of its usual response, and your program should terminate immediately to guarantee the Wrong Answer verdict.\n\nThe interactor is not adaptive: all random grids used in the tests have been pre-generated and remain the same across all submissions.", "outputFormat": "", "hint": "In the example, the queries and the responses are separated by empty lines for clarity. In the actual interaction between your program and the interactor, there will be no empty lines.\n\nYour solution will be evaluated on at most $60$ test files.", "locale": "en", "translations": {"en": {"title": "[NWRRC 2025] Eight-Connected Figures", "background": "Looking at problems \"K-Shaped Figures\", \"H-Shaped Figures\" and \"Eight-Shaped Figures\" from the past three years, you might wonder what kind of geometry problem would be this year. To surprise you, this year the jury decides to change not the shape of the figure, but the \"shape\" itself. Today you need to find \"Eight-$\\textbf{connected}$ Figures\" in real time.", "description": "$\\textit{This is an interactive problem.}$\n\nAn infinite square grid is hidden from you. Every cell is identified by a pair of integers $(x, y)$ and is $\\textbf{randomly}$ colored either black or white with $50\\%$ probability for each color, independently of other cells.\n\nTwo cells are considered $\\textit{adjacent}$ if they share an edge or a corner. Thus, every cell $(x, y)$ has $8$ adjacent cells: $(x-1, y-1)$, $(x-1, y)$, $(x-1, y+1)$, $(x, y-1)$, $(x, y+1)$, $(x+1, y-1)$, $(x+1, y)$, and $(x+1, y+1)$.\n\nA set of cells $S$ is called $\\textit{8-connected}$ if for any two cells in $S$, there exists a path between them using only cells from $S$, where consecutive cells in the path are adjacent.\n\nIn one query, you can learn the color of any cell on the grid. Your task is to find an 8-connected set of $n$ cells such that all cells in the set have the same color.\n\nYou need to solve $t$ test cases. In each test case, the grid is colored randomly and independently of the other test cases.\n\nYou are allowed to make at most $30\\,000$ queries $\\textbf{in total}$ over all test cases.", "inputFormat": "The first line contains two integers $t$ and $n$, denoting the number of test cases and the required size of the 8-connected set ($1 \\le t \\le 50$; $2 \\le n \\le 300$).\n\n### Interaction Protocol\n\nIn each test case, you can make zero or more queries to learn the colors of grid cells.\n\nTo make a query, print a line:\n\n- $\\tt{?}$ $x$ $y$\n\nwhere $(x, y)$ are the coordinates of the requested cell ($-10^9 \\le x, y \\le 10^9$). After that, read a line containing one letter: $\\texttt{B}$ if the cell $(x, y)$ is black, or $\\texttt{W}$ if the cell $(x, y)$ is white.\n\nOnce you are ready to present an 8-connected set of $n$ cells of the same color, print a line:\n\n- $\\tt{!}$ $c$ $x_1$ $y_1$ $x_2$ $y_2$ $\\ldots$ $x_n$ $y_n$\n\nwhere $c$ is a letter denoting the color of the cells in the set ($\\texttt{B}$ for black and $\\texttt{W}$ for white), and $(x_1, y_1), (x_2, y_2), \\ldots, (x_n, y_n)$ are the $n$ distinct cells in the set ($-10^9 \\le x_i, y_i \\le 10^9$). The interactor does not print anything in response to this line.\n\nAfter printing the set, proceed to the next test case, or terminate the program if this was the last one.\n\nYou are allowed to make at most $30\\,000$ queries $\\textbf{in total}$ over all test cases (not including the lines that print the sets). If you exceed this limit, the interactor will print $0$ instead of its usual response, and your program should terminate immediately to guarantee the Wrong Answer verdict.\n\nThe interactor is not adaptive: all random grids used in the tests have been pre-generated and remain the same across all submissions.", "outputFormat": "", "hint": "In the example, the queries and the responses are separated by empty lines for clarity. In the actual interaction between your program and the interactor, there will be no empty lines.\n\nYour solution will be evaluated on at most $60$ test files.", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2025] Eight-Connected Figures", "background": "回顾过去三年的题目\"K 形图形\"、\"H 形图形\"和\"8 形图形\"，你可能会好奇今年会是什么类型的几何题。为了给你惊喜，今年评委决定不改变图形的形状，而是改变\"形状\"本身。今天你需要实时找出\"八连通\"图形。", "description": "**这是一道交互题。**\n\n有一个无限大的正方形网格对你隐藏。每个单元格由一对整数 $(x, y)$ 标识，并且以 $50\\%$ 的概率随机染成黑色或白色，各单元格的颜色相互独立。\n\n如果两个单元格共享一条边或一个角，则认为它们是 **相邻的**。因此，每个单元格 $(x, y)$ 有 $8$ 个相邻单元格：$(x-1, y-1)$、$(x-1, y)$、$(x-1, y+1)$、$(x, y-1)$、$(x, y+1)$、$(x+1, y-1)$、$(x+1, y)$ 和 $(x+1, y+1)$。\n\n如果对于集合 $S$ 中的任意两个单元格，存在一条仅使用 $S$ 中单元格的路径连接它们，且路径中连续的单元格是相邻的，则称单元格集合 $S$ 是 **八连通的**。\n\n在一次查询中，你可以了解网格上任意单元格的颜色。你的任务是找到一个包含 $n$ 个单元格的八连通集合，且该集合中的所有单元格颜色相同。\n\n你需要解决 $t$ 个测试用例。在每个测试用例中，网格的染色是随机的，且与其他测试用例相互独立。\n\n**在所有测试用例中**，你最多可以进行 $30,000$ 次查询。", "inputFormat": "第一行包含两个整数 $t$ 和 $n$，分别表示测试用例的数量和所需的八连通集合的大小（$1 \\le t \\le 50$；$2 \\le n \\le 300$）。\n\n### 交互协议\n\n在每个测试用例中，你可以进行零次或多次查询以了解网格单元格的颜色。\n\n要进行查询，请输出一行：\n\n- `?` $x$ $y$\n\n其中 $(x, y)$ 是请求单元格的坐标（$-10^9 \\le x, y \\le 10^9$）。之后，读取一行包含一个字母：如果单元格 $(x, y)$ 是黑色则为 `B`，如果是白色则为 `W`。\n\n当你准备好呈现一个包含 $n$ 个同色单元格的八连通集合时，输出一行：\n\n- `!` $c$ $x_1$ $y_1$ $x_2$ $y_2$ $\\ldots$ $x_n$ $y_n$\n\n其中 $c$ 是表示集合中单元格颜色的字母（黑色为 `B`，白色为 `W`），而 $(x_1, y_1), (x_2, y_2), \\ldots, (x_n, y_n)$ 是集合中的 $n$ 个不同单元格（$-10^9 \\le x_i, y_i \\le 10^9$）。交互器不会对此行作出任何响应。\n\n输出集合后，继续处理下一个测试用例，或者如果这是最后一个测试用例则终止程序。\n\n**在所有测试用例中**（不包括输出集合的行），你最多可以进行 $30,000$ 次查询。如果你超过此限制，交互器将输出 $0$ 而不是通常的响应，你的程序应立即终止以保证获得错误答案的判定。\n\n交互器不是自适应的：测试中使用的所有随机网格都是预先生成的，并且在所有提交中保持不变。", "outputFormat": "", "hint": "在示例中，为了清晰起见，查询和响应之间用空行分隔。在你的程序与交互器的实际交互中，不会有空行。\n\n你的解决方案将在最多 $60$ 个测试文件上进行评估。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
