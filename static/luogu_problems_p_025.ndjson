{"pid": "P1501", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2\n2 3\n* 1 3 4\n/ 1 1", "4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["集训队互测", "动态树 LCT"], "title": "[国家集训队] Tree II", "background": "", "description": "一棵 $n$ 个点的树，每个点的初始权值为 $1$。  \n对于这棵树有 $q$ 个操作，每个操作为以下四种操作之一：\n\n- `+ u v c`：将 $u$ 到 $v$ 的路径上的点的权值都加上自然数 $c$；\n- `- u1 v1 u2 v2`：将树中原有的边 $(u_1,v_1)$ 删除，加入一条新边 $(u_2,v_2)$，保证操作完之后仍然是一棵树；\n- `* u v c`：将 $u$ 到 $v$ 的路径上的点的权值都乘上自然数 $c$；\n- `/ u v`：询问 $u$ 到 $v$ 的路径上的点的权值和，将答案对 $51061$ 取模。\n", "inputFormat": "第一行两个整数 $n,q$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，描述这棵树的每条边。\n\n接下来 $q$ 行，每行描述一个操作。\n", "outputFormat": "对于每个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】   \n对于 $10\\%$ 的数据，$1\\le n,q \\le 2000$；   \n另有 $15\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作，并且初始树为一条链；    \n另有 $35\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作；  \n对于 $100\\%$ 的数据，$1\\le n,q \\le 10^5$，$0\\le c \\le 10^4$。\n\nBy (伍一鸣)\n", "locale": "zh-CN", "translations": {"en": {"title": "[National Training Team] Tree II", "background": "", "description": "A tree with $n$ nodes, where each node’s initial weight is $1$.  \nThere are $q$ operations on this tree, each being one of the following four types:\n\n- `+ u v c`: Add a natural number $c$ to the weight of every node on the path from $u$ to $v$.\n- `- u1 v1 u2 v2`: Delete the existing edge $(u_1, v_1)$ from the tree and add a new edge $(u_2, v_2)$. It is guaranteed that after the operation it is still a tree.\n- `* u v c`: Multiply the weight of every node on the path from $u$ to $v$ by a natural number $c$.\n- `/ u v`: Query the sum of the weights of all nodes on the path from $u$ to $v$, and output the answer modulo $51061$.", "inputFormat": "The first line contains two integers $n, q$.\n\nEach of the next $n-1$ lines contains two positive integers $u, v$, describing one edge of the tree.\n\nEach of the next $q$ lines describes one operation.", "outputFormat": "For each query operation, output one integer per line as the answer.", "hint": "Constraints  \n- For $10\\%$ of the testdata, $1 \\le n, q \\le 2000$.  \n- For an additional $15\\%$ of the testdata, $1 \\le n, q \\le 5 \\times 10^4$, there are no `-` operations, and the initial tree is a chain.  \n- For an additional $35\\%$ of the testdata, $1 \\le n, q \\le 5 \\times 10^4$, there are no `-` operations.  \n- For $100\\%$ of the testdata, $1 \\le n, q \\le 10^5$, $0 \\le c \\le 10^4$.\n\nBy (Wu Yiming).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] Tree II", "background": "", "description": "一棵 $n$ 个点的树，每个点的初始权值为 $1$。  \n对于这棵树有 $q$ 个操作，每个操作为以下四种操作之一：\n\n- `+ u v c`：将 $u$ 到 $v$ 的路径上的点的权值都加上自然数 $c$；\n- `- u1 v1 u2 v2`：将树中原有的边 $(u_1,v_1)$ 删除，加入一条新边 $(u_2,v_2)$，保证操作完之后仍然是一棵树；\n- `* u v c`：将 $u$ 到 $v$ 的路径上的点的权值都乘上自然数 $c$；\n- `/ u v`：询问 $u$ 到 $v$ 的路径上的点的权值和，将答案对 $51061$ 取模。\n", "inputFormat": "第一行两个整数 $n,q$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，描述这棵树的每条边。\n\n接下来 $q$ 行，每行描述一个操作。\n", "outputFormat": "对于每个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】   \n对于 $10\\%$ 的数据，$1\\le n,q \\le 2000$；   \n另有 $15\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作，并且初始树为一条链；    \n另有 $35\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作；  \n对于 $100\\%$ 的数据，$1\\le n,q \\le 10^5$，$0\\le c \\le 10^4$。\n\nBy (伍一鸣)\n", "locale": "zh-CN"}}}
{"pid": "P1502", "type": "P", "difficulty": 5, "samples": [["2\n\n3 5 4\n1 2 3\n2 3 2\n6 3 1\n\n3 5 4\n1 2 3\n2 3 2\n5 3 1", "5\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "离散化", "扫描线"], "title": "窗口的星星", "background": "小卡买到了一套新房子，他十分的高兴，在房间里转来转去。\n", "description": "晚上，小卡从阳台望出去，“哇~~~~好多星星啊”，但他还没给其他房间设一个窗户。   \n\n天真的小卡总是希望能够在晚上能看到最多最亮的星星，但是窗子的大小是固定的，边也必须和地面平行。  \n\n这时小卡使用了超能力（透视术）知道了墙后面每个星星的位置和亮度，但是小卡发动超能力后就很疲劳，只好拜托你告诉他最多能够有总和多亮的星星能出现在窗口上。\n", "inputFormat": "本题有多组数据，第一行为 $T$，表示有 $T$ 组数据。\n\n对于每组数据：\n\n第一行 $3$ 个整数 $n,W,H$ 表示有 $n$ 颗星星，窗口宽为 $W$，高为 $H$。\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,l_i$ 表示星星的坐标在 $(x_i,y_i)$，亮度为 $l_i$。\n", "outputFormat": "$T$ 个整数，表示每组数据中窗口星星亮度总和的最大值。\n", "hint": "为了便于理解，输入样例中每组数据之间添加了空行，实际测试数据中并无空行。\n\n小卡买的窗户框是金属做的，所以在边框上的不算在内。\n\n### 数据范围\n\n对于 $100\\%$ 的数据：$1\\le T \\le 10$，$1\\le n \\le 10^4$，$1\\le W,H \\le 10^6$，$0\\le l_i\\le 1000$，$0\\le x_i,y_i < 2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "Stars in the Window", "background": "Xiao Ka has just bought a new home. He is very happy and keeps wandering around his rooms.", "description": "At night, Xiao Ka looks out from the balcony and exclaims, “Wow, so many stars!”, but he has not yet set a window for the other rooms.\n\nNaive as he is, Xiao Ka always hopes to see the most and brightest stars at night, but the window’s size is fixed and its sides must be parallel to the ground. He uses a superpower (clairvoyance) to learn the position and brightness of every star behind the wall. However, using the superpower makes him tired, so he asks you to tell him the maximum possible total brightness of stars that can appear in the window.", "inputFormat": "This problem has multiple test cases. The first line is $T$, indicating there are $T$ test cases.\n\nFor each test case:\n\n- The first line has $3$ integers $n, W, H$, meaning there are $n$ stars, and the window has width $W$ and height $H$.\n- The next $n$ lines each contain three integers $x_i, y_i, l_i$, meaning there is a star at coordinate $(x_i, y_i)$ with brightness $l_i$.", "outputFormat": "Output $T$ integers, each being the maximum total brightness of stars that can appear in the window for the corresponding test case.", "hint": "For ease of understanding, blank lines are added between test cases in the sample input, but the actual testdata contains no blank lines.\n\nThe window frame is made of metal, so stars on the boundary do not count.\n\nConstraints: For $100\\%$ of the testdata: $1 \\le T \\le 10$, $1 \\le n \\le 10^4$, $1 \\le W, H \\le 10^6$, $0 \\le l_i \\le 1000$, $0 \\le x_i, y_i < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "窗口的星星", "background": "小卡买到了一套新房子，他十分的高兴，在房间里转来转去。\n", "description": "晚上，小卡从阳台望出去，“哇~~~~好多星星啊”，但他还没给其他房间设一个窗户。   \n\n天真的小卡总是希望能够在晚上能看到最多最亮的星星，但是窗子的大小是固定的，边也必须和地面平行。  \n\n这时小卡使用了超能力（透视术）知道了墙后面每个星星的位置和亮度，但是小卡发动超能力后就很疲劳，只好拜托你告诉他最多能够有总和多亮的星星能出现在窗口上。\n", "inputFormat": "本题有多组数据，第一行为 $T$，表示有 $T$ 组数据。\n\n对于每组数据：\n\n第一行 $3$ 个整数 $n,W,H$ 表示有 $n$ 颗星星，窗口宽为 $W$，高为 $H$。\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,l_i$ 表示星星的坐标在 $(x_i,y_i)$，亮度为 $l_i$。\n", "outputFormat": "$T$ 个整数，表示每组数据中窗口星星亮度总和的最大值。\n", "hint": "为了便于理解，输入样例中每组数据之间添加了空行，实际测试数据中并无空行。\n\n小卡买的窗户框是金属做的，所以在边框上的不算在内。\n\n### 数据范围\n\n对于 $100\\%$ 的数据：$1\\le T \\le 10$，$1\\le n \\le 10^4$，$1\\le W,H \\le 10^6$，$0\\le l_i\\le 1000$，$0\\le x_i,y_i < 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P1503", "type": "P", "difficulty": 4, "samples": [["7 9\nD 3\nD 6\nD 5\nQ 4\nQ 5\nR\nQ 4\nR\nQ 4\n", "1\n0\n2\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "平衡树", "分块"], "title": "鬼子进村", "background": "小卡正在新家的客厅中看电视。电视里正在播放放了千八百次依旧重播的《亮剑》，剧中李云龙带领的独立团在一个县城遇到了一个鬼子小队，于是独立团与鬼子展开游击战。", "description": "县城里有 $n$ 个用地道相连的房子，第 $i$ 个只与第 $i-1$ 和第 $i+1$ 个相连。特别的，第 $1$ 个房子只和第 $2$ 个联通，第 $n$ 个房子只和第 $n-1$ 个联通。这时有 $m$ 个消息依次传来：\n\n1. 若消息为 ```D x```：鬼子将 $x$ 号房子摧毁了，地道被堵上。\n\n1. 若消息为 ```R``` ：村民们将鬼子上一个摧毁的房子修复了。\n\n1. 若消息为 ```Q x```：有一名士兵被围堵在 $x$ 号房子中。\n\n现定义能够到达如下：若存在房子 $i,j(1\\leq i\\leq j\\leq n)$，使得对于任意的 $k(i\\leq k\\leq j)$ 都满足房子 $k$ 未被摧毁，则称房子 $i$ 与房子 $j$ 互相能够到达。\n\n李云龙收到信息很紧张，他想知道每一个被围堵的士兵能够到达的房子有几个。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，有如题目所说的三种信息共 $m$ 条。", "outputFormat": "对于每一个被围堵的士兵，输出该士兵能够到达的房子数。", "hint": "$1\\leq n,m\\leq 5\\times 10^4$。\n\n若士兵被围堵在摧毁了的房子中，那只能等死了。。。。。。", "locale": "zh-CN", "translations": {"en": {"title": "The Enemy Enters the Village", "background": "Xiao Ka is watching TV in the living room of the new home. On TV, the endlessly re-run “Drawing Sword” (Liangjian) is playing. In the show, the Independent Regiment led by Li Yunlong encounters an enemy squad in a county seat, and they begin a guerrilla war.", "description": "There are $n$ houses in the county connected by tunnels in a line. The $i$-th house is connected only to the $(i-1)$-th and $(i+1)$-th houses. Specifically, house $1$ is connected only to house $2$, and house $n$ is connected only to house $n-1$. There are $m$ messages arriving in order:\n\n1. If the message is ```D x```: the enemy destroys house $x$, and the tunnel is blocked.\n2. If the message is ```R```: the villagers repair the most recently destroyed house.\n3. If the message is ```Q x```: a soldier is trapped in house $x$.\n\nDefine reachability as follows: if there exist houses $i, j$ ($1 \\leq i \\leq j \\leq n$) such that for every $k$ with $i \\leq k \\leq j$, house $k$ is not destroyed, then house $i$ and house $j$ are mutually reachable.\n\nLi Yunlong is nervous after receiving the information. He wants to know, for each trapped soldier, how many houses he can reach.", "inputFormat": "The first line contains two integers $n, m$.\n\nEach of the next $m$ lines contains one of the three messages described above.", "outputFormat": "For each trapped soldier, output the number of houses he can reach.", "hint": "Constraints\n\n$1 \\leq n, m \\leq 5 \\times 10^4$.\n\nIf a soldier is trapped in a destroyed house, he can only wait to die.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "鬼子进村", "background": "小卡正在新家的客厅中看电视。电视里正在播放放了千八百次依旧重播的《亮剑》，剧中李云龙带领的独立团在一个县城遇到了一个鬼子小队，于是独立团与鬼子展开游击战。", "description": "县城里有 $n$ 个用地道相连的房子，第 $i$ 个只与第 $i-1$ 和第 $i+1$ 个相连。特别的，第 $1$ 个房子只和第 $2$ 个联通，第 $n$ 个房子只和第 $n-1$ 个联通。这时有 $m$ 个消息依次传来：\n\n1. 若消息为 ```D x```：鬼子将 $x$ 号房子摧毁了，地道被堵上。\n\n1. 若消息为 ```R``` ：村民们将鬼子上一个摧毁的房子修复了。\n\n1. 若消息为 ```Q x```：有一名士兵被围堵在 $x$ 号房子中。\n\n现定义能够到达如下：若存在房子 $i,j(1\\leq i\\leq j\\leq n)$，使得对于任意的 $k(i\\leq k\\leq j)$ 都满足房子 $k$ 未被摧毁，则称房子 $i$ 与房子 $j$ 互相能够到达。\n\n李云龙收到信息很紧张，他想知道每一个被围堵的士兵能够到达的房子有几个。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，有如题目所说的三种信息共 $m$ 条。", "outputFormat": "对于每一个被围堵的士兵，输出该士兵能够到达的房子数。", "hint": "$1\\leq n,m\\leq 5\\times 10^4$。\n\n若士兵被围堵在摧毁了的房子中，那只能等死了。。。。。。", "locale": "zh-CN"}}}
{"pid": "P1504", "type": "P", "difficulty": 3, "samples": [["2\n2 1 -1\n3 2 1 -1\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "枚举", "背包 DP"], "title": "积木城堡", "background": null, "description": "XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  \n\n小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大或者下面的积木和上面的积木一样大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。\n\n小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  \n\n可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。\n\n任务：\n\n请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。\n\n注意：一座城堡的高度，是组成它的所有积木的棱长之和。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 座城堡。  \n\n以下 $n$ 行每行是一系列非负整数，用一个空格分隔，按从下往上的顺序依次给出一座城堡中所有积木的**棱长**。用 `-1` 结束。", "outputFormat": "一个整数，表示最后城堡的最大可能的高度。  \n如果找不到合适的方案，则输出 $0$。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。", "locale": "zh-CN", "translations": {"en": {"title": "Block Castle", "background": "", "description": "XC’s son, Xiao XC, loves building pretty castles with blocks. The castles are built from cubic blocks, and each layer of the castle is one block.\n\nXiao XC is even smarter than his father, XC. He discovered that when building a castle, if the block below is larger than or equal to the block above, the castle is less likely to fall. So he always follows this rule when stacking.\n\nXiao XC wants to give the castles he built to the pretty girls in his kindergarten to increase his popularity. To be fair, he decides to give each girl a castle of the same height, so the girls won’t argue over getting a prettier one.\n\nHowever, he realizes he didn’t plan for this in advance when building the castles. Since he has no extra blocks, he comes up with a clever plan: he will remove some blocks from each castle so that all castles end up with the same height. To make the castles as majestic as possible, he wants the final height to be as large as possible.\n\nTask:\n\nPlease help Xiao XC write a program to decide which blocks to remove from each castle to achieve the best result.\n\nNote: The height of a castle is the sum of the edge lengths of all its blocks.", "inputFormat": "The first line contains an integer $n$, the number of castles.\n\nEach of the next $n$ lines contains a sequence of non-negative integers, separated by a space, giving the edge lengths of all blocks in one castle from bottom to top. The sequence ends with `-1`.", "outputFormat": "Output a single integer, the maximum possible final height of the castles. If no suitable plan exists, output $0$.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 100$, each castle contains at most $100$ blocks, and each block’s edge length is at most $100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "积木城堡", "background": null, "description": "XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  \n\n小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大或者下面的积木和上面的积木一样大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。\n\n小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  \n\n可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。\n\n任务：\n\n请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。\n\n注意：一座城堡的高度，是组成它的所有积木的棱长之和。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 座城堡。  \n\n以下 $n$ 行每行是一系列非负整数，用一个空格分隔，按从下往上的顺序依次给出一座城堡中所有积木的**棱长**。用 `-1` 结束。", "outputFormat": "一个整数，表示最后城堡的最大可能的高度。  \n如果找不到合适的方案，则输出 $0$。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。", "locale": "zh-CN"}}}
{"pid": "P1505", "type": "P", "difficulty": 5, "samples": [["3\n0 1 1\n1 2 2\n8\nSUM 0 2\nMAX 0 2\nN 0 1\nSUM 0 2\nMIN 0 2\nC 1 3\nSUM 0 2\nMAX 0 2", "3\n2\n1\n-1\n5\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "集训队互测", "树链剖分"], "title": "[国家集训队] 旅游", "background": "Ray 乐忠于旅游，这次他来到了 T 城。T 城是一个水上城市，一共有 $n$ 个景点，有些景点之间会用一座桥连接。为了方便游客到达每个景点但又为了节约成本，T 城的任意两个景点之间有且只有一条路径。换句话说， T 城中只有 $n-1$ 座桥。\n\nRay 发现，有些桥上可以看到美丽的景色，让人心情愉悦，但有些桥狭窄泥泞，令人烦躁。于是，他给每座桥定义一个愉悦度 $w$，也就是说，Ray 经过这座桥会增加 $w$ 的愉悦度，这或许是正的也可能是负的。有时，Ray 看待同一座桥的心情也会发生改变。\n\n现在，Ray 想让你帮他计算从 $u$ 景点到 $v$ 景点能获得的总愉悦度。有时，他还想知道某段路上最美丽的桥所提供的最大愉悦度，或是某段路上最糟糕的一座桥提供的最低愉悦度。\n", "description": "给定一棵 $n$ 个节点的树，边带权，编号 $0 \\sim n-1$，需要支持五种操作：\n\n- `C i w` 将输入的第 $i$ 条边权值改为 $w$；\n- `N u v` 将 $u,v$ 节点之间的边权都变为相反数；\n- `SUM u v` 询问 $u,v$ 节点之间边权和；\n- `MAX u v` 询问 $u,v$ 节点之间边权最大值；\n- `MIN u v` 询问 $u,v$ 节点之间边权最小值。\n\n保证任意时刻所有边的权值都在 $[-1000,1000]$ 内。\n", "inputFormat": "第一行一个正整数 $n$，表示节点个数。  \n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示 $u,v$ 之间有一条权值为 $w$ 的边，描述这棵树。      \n然后一行一个正整数 $m$，表示操作数。  \n接下来 $m$ 行，每行表示一个操作。\n", "outputFormat": "对于每一个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】  \n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5$。\n\n2020.02.04 修正了一点数据的错误  \n2020.03.14 加入了一组 hack 数据  \n2020.11.26 加入了一组 hack 数据 By @_Leaving", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Tourism", "background": "Ray loves traveling, and this time he has arrived in T City. T City is a city of waterways with $n$ attractions, and some pairs of attractions are connected by a bridge. To make it easy for tourists to reach every attraction while saving costs, there is exactly one path between any two attractions. In other words, there are only $n-1$ bridges in T City.\n\nRay noticed that some bridges offer beautiful scenery that lifts the mood, while others are narrow and muddy, which is frustrating. So he assigns a pleasure value $w$ to each bridge, meaning Ray’s pleasure increases by $w$ when he crosses that bridge, which could be positive or negative. Sometimes, Ray’s feelings about the same bridge also change.\n\nNow, Ray wants you to help him compute the total pleasure he can get when traveling from attraction $u$ to attraction $v$. Sometimes he also wants to know the maximum pleasure provided by the most beautiful bridge on a certain route, or the minimum pleasure provided by the worst bridge on a certain route.", "description": "You are given a tree with $n$ nodes, edges have weights, and nodes are numbered $0 \\sim n-1$. You need to support five operations. Edges are indexed by their input order from $1$ to $n-1$.\n\n- `C i w` Change the weight of the $i$-th edge in the input to $w$.\n- `N u v` Negate the weights of all edges on the path between $u$ and $v$.\n- `SUM u v` Query the sum of edge weights on the path between $u$ and $v$.\n- `MAX u v` Query the maximum edge weight on the path between $u$ and $v$.\n- `MIN u v` Query the minimum edge weight on the path between $u$ and $v$.\n\nAt any time, all edge weights are within $[-1000, 1000]$.", "inputFormat": "The first line contains a positive integer $n$, the number of nodes.\nThe next $n-1$ lines each contain three integers $u, v, w$, indicating that there is an edge between $u$ and $v$ with weight $w$, describing the tree.\nThen a line with a positive integer $m$, the number of operations.\nThe next $m$ lines each describe one operation.", "outputFormat": "For each query operation, output one line with one integer representing the answer.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 2 \\times 10^5$.\n\n2020.02.04 Fixed a small error in the testdata.\n2020.03.14 Added a set of hack testdata.\n2020.11.26 Added a set of hack testdata by @_Leaving.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 旅游", "background": "Ray 乐忠于旅游，这次他来到了 T 城。T 城是一个水上城市，一共有 $n$ 个景点，有些景点之间会用一座桥连接。为了方便游客到达每个景点但又为了节约成本，T 城的任意两个景点之间有且只有一条路径。换句话说， T 城中只有 $n-1$ 座桥。\n\nRay 发现，有些桥上可以看到美丽的景色，让人心情愉悦，但有些桥狭窄泥泞，令人烦躁。于是，他给每座桥定义一个愉悦度 $w$，也就是说，Ray 经过这座桥会增加 $w$ 的愉悦度，这或许是正的也可能是负的。有时，Ray 看待同一座桥的心情也会发生改变。\n\n现在，Ray 想让你帮他计算从 $u$ 景点到 $v$ 景点能获得的总愉悦度。有时，他还想知道某段路上最美丽的桥所提供的最大愉悦度，或是某段路上最糟糕的一座桥提供的最低愉悦度。\n", "description": "给定一棵 $n$ 个节点的树，边带权，编号 $0 \\sim n-1$，需要支持五种操作：\n\n- `C i w` 将输入的第 $i$ 条边权值改为 $w$；\n- `N u v` 将 $u,v$ 节点之间的边权都变为相反数；\n- `SUM u v` 询问 $u,v$ 节点之间边权和；\n- `MAX u v` 询问 $u,v$ 节点之间边权最大值；\n- `MIN u v` 询问 $u,v$ 节点之间边权最小值。\n\n保证任意时刻所有边的权值都在 $[-1000,1000]$ 内。\n", "inputFormat": "第一行一个正整数 $n$，表示节点个数。  \n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示 $u,v$ 之间有一条权值为 $w$ 的边，描述这棵树。      \n然后一行一个正整数 $m$，表示操作数。  \n接下来 $m$ 行，每行表示一个操作。\n", "outputFormat": "对于每一个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】  \n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5$。\n\n2020.02.04 修正了一点数据的错误  \n2020.03.14 加入了一组 hack 数据  \n2020.11.26 加入了一组 hack 数据 By @_Leaving", "locale": "zh-CN"}}}
{"pid": "P1506", "type": "P", "difficulty": 2, "samples": [["4 5\n00000\n00*00\n0*0*0\n00*00", "1\n"], ["5 5\n*****\n*0*0*\n**0**\n*0*0*\n*****", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "拯救oibh总部", "background": "oibh 总部突然被水淹没了！现在需要你的救援……", "description": "oibh 被突来的洪水淹没了，还好 oibh 总部有在某些重要的地方起一些围墙。用 `*` 号表示，而一个四面被围墙围住的区域洪水是进不去的。\n\noibh 总部内部也有许多重要区域，每个重要区域在图中用一个 `0` 表示。\n\n现在给出 oibh 的围墙建设图，问有多少个没被洪水淹到的重要区域。", "inputFormat": "第一行为两个正整数 $x,y$。\n\n接下来 $x$ 行，每行 $y$ 个字符，由 `*` 和 `0` 组成，表示 oibh 总部的建设图。", "outputFormat": "输出没被水淹没的 oibh 总部的 `0` 的数量。", "hint": "对于 $100\\%$ 的数据，$1 \\le x,y \\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "Save the oibh Headquarters", "background": "The oibh headquarters was suddenly flooded. Your rescue is needed now...", "description": "oibh was engulfed by a sudden flood. Fortunately, the oibh headquarters has built walls at some important places, denoted by `*`. A region that is enclosed by walls on all four sides cannot be reached by the flood.\n\nInside the oibh headquarters, there are many important regions, each represented on the map by a single `0`.\n\nGiven the wall construction map of oibh, determine how many important regions are not flooded.", "inputFormat": "The first line contains two positive integers $x, y$.\n\nThe next $x$ lines each contain $y$ characters, consisting of `*` and `0`, representing the construction map of the oibh headquarters.", "outputFormat": "Output the number of `0` characters in the oibh headquarters that are not flooded.", "hint": "For $100\\%$ of the testdata, $1 \\le x, y \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拯救oibh总部", "background": "oibh 总部突然被水淹没了！现在需要你的救援……", "description": "oibh 被突来的洪水淹没了，还好 oibh 总部有在某些重要的地方起一些围墙。用 `*` 号表示，而一个四面被围墙围住的区域洪水是进不去的。\n\noibh 总部内部也有许多重要区域，每个重要区域在图中用一个 `0` 表示。\n\n现在给出 oibh 的围墙建设图，问有多少个没被洪水淹到的重要区域。", "inputFormat": "第一行为两个正整数 $x,y$。\n\n接下来 $x$ 行，每行 $y$ 个字符，由 `*` 和 `0` 组成，表示 oibh 总部的建设图。", "outputFormat": "输出没被水淹没的 oibh 总部的 `0` 的数量。", "hint": "对于 $100\\%$ 的数据，$1 \\le x,y \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P1507", "type": "P", "difficulty": 2, "samples": [["320 350\n4\n160 40 120\n80 110 240\n220 70 310\n40 400 220\n", "550\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "动态规划 DP", "背包 DP"], "title": "NASA的食物计划", "background": "NASA（美国航空航天局）因为航天飞机的隔热瓦等其他安全技术问题一直大伤脑筋，因此在各方压力下终止了航天飞机的历史，但是此类事情会不会在以后发生，谁也无法保证。所以，在遇到这类航天问题时，也许只能让航天员出仓维修。但是过多的维修会消耗航天员大量的能量，因此 NASA 便想设计一种食品方案，使体积和承重有限的条件下多装载一些高卡路里的食物。", "description": "航天飞机的体积有限，当然如果载过重的物品，燃料会浪费很多钱，每件食品都有各自的体积、质量以及所含卡路里。在告诉你体积和质量的最大值的情况下，请输出能达到的食品方案所含卡路里的最大值，当然每个食品只能使用一次。", "inputFormat": "第一行 $2$ 个整数，分别代表体积最大值 $H$ 和质量最大值 $T$。 \n\n第二行 $1$ 个整数代表食品总数 $n$。 \n\n接下来 $n$ 行每行 $3$ 个数 体积 $h_i$，质量 $t_i$，所含卡路里 $k_i$。", "outputFormat": "一个数，表示所能达到的最大卡路里（`int` 范围内）", "hint": "对于 $100\\%$ 的数据，$H,T,h_i,t_i \\le 400$，$n \\le 50$，$k_i \\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "NASA's Food Plan", "background": "NASA (National Aeronautics and Space Administration) has long struggled with safety technologies such as the thermal protection tiles on the space shuttle. Under various pressures, the history of the space shuttle program was brought to an end. However, no one can guarantee that similar issues will not occur in the future. Thus, when such spaceflight problems arise, astronauts may have to perform extravehicular repairs. Excessive repairs, however, consume a large amount of the astronauts’ energy. Therefore, NASA wants to design a food plan to load as many high-calorie foods as possible under limited volume and load-bearing capacity.", "description": "The space shuttle has limited volume, and carrying overly heavy items wastes a lot of fuel money. Each food item has its own volume, mass, and contained calories. Given the maximum allowable volume and mass, output the maximum total calories achievable. Each food item can be used at most once.", "inputFormat": "The first line contains $2$ integers, representing the maximum volume $H$ and the maximum mass $T$.\n\nThe second line contains $1$ integer representing the total number of food items $n$.\n\nThe next $n$ lines each contain $3$ numbers: volume $h_i$, mass $t_i$, and contained calories $k_i$.", "outputFormat": "One integer, representing the maximum total calories achievable (within `int` range).", "hint": "For $100\\%$ of the testdata, $H, T, h_i, t_i \\le 400$, $n \\le 50$, $k_i \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "NASA的食物计划", "background": "NASA（美国航空航天局）因为航天飞机的隔热瓦等其他安全技术问题一直大伤脑筋，因此在各方压力下终止了航天飞机的历史，但是此类事情会不会在以后发生，谁也无法保证。所以，在遇到这类航天问题时，也许只能让航天员出仓维修。但是过多的维修会消耗航天员大量的能量，因此 NASA 便想设计一种食品方案，使体积和承重有限的条件下多装载一些高卡路里的食物。", "description": "航天飞机的体积有限，当然如果载过重的物品，燃料会浪费很多钱，每件食品都有各自的体积、质量以及所含卡路里。在告诉你体积和质量的最大值的情况下，请输出能达到的食品方案所含卡路里的最大值，当然每个食品只能使用一次。", "inputFormat": "第一行 $2$ 个整数，分别代表体积最大值 $H$ 和质量最大值 $T$。 \n\n第二行 $1$ 个整数代表食品总数 $n$。 \n\n接下来 $n$ 行每行 $3$ 个数 体积 $h_i$，质量 $t_i$，所含卡路里 $k_i$。", "outputFormat": "一个数，表示所能达到的最大卡路里（`int` 范围内）", "hint": "对于 $100\\%$ 的数据，$H,T,h_i,t_i \\le 400$，$n \\le 50$，$k_i \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P1508", "type": "P", "difficulty": 3, "samples": [["6 7\n16 4 3 12 6 0 3\n4 -5 6 7 0 0 2\n6 0 -1 -2 3 6 8\n5 3 4 0 0 -2 7\n-1 7 4 0 7 -5 6\n0 -1 3 4 12 4 2\n", "41\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "枚举"], "title": "Likecloud-吃、吃、吃", "background": "问世间，青春期为何物？\n\n答曰：“甲亢，甲亢，再甲亢；挨饿，挨饿，再挨饿！”", "description": "正处在某一特定时期之中的李大水牛由于消化系统比较发达，最近一直处在饥饿的状态中。某日上课，正当他饿得头昏眼花之时，眼前突然闪现出了一个 $n \\times m(n,m \\le 200)$ 的矩型的巨型大餐桌，而自己正处在这个大餐桌的一侧的中点下边。餐桌被划分为了 $n \\times m$ 个小方格，每一个方格中都有一个圆形的巨型大餐盘，上面盛满了令李大水牛朝思暮想的食物。李大水牛已将餐桌上所有的食物按其所能提供的能量打了分（有些是负的，因为吃了要拉肚子），他决定从自己所处的位置吃到餐桌的另一侧，途径的所有食物都必须吃掉，不能不吃。但他吃东西有一个习惯——只吃自己前方或左前方或右前方的盘中的食物。\n\n由于李大水牛已饿得不想动脑了，而他又想获得最大的能量，因此，他将这个问题交给了你。\n\n每组数据的出发点都是最后一行的中间位置的下方！", "inputFormat": "第一行为 $m$、$n$（$n$ 为奇数），李大水牛一开始在最后一行的中间的下方。\n\n接下来为 $m \\times n$ 的数字矩阵。\n\n矩阵共有 $m$ 行，每行 $n$ 个数字，数字间用空格隔开，代表该格子上的盘中的食物所能提供的能量。\n\n数字全是整数，且绝对值不超过 $10^5$。", "outputFormat": "一个数，为你所找出的最大能量值。", "hint": "快吃！快吃！快吃！", "locale": "zh-CN", "translations": {"en": {"title": "Likecloud - Eat, Eat, Eat", "background": "What is adolescence?\n\nAnswer: \"Hyperthyroidism, hyperthyroidism, and more hyperthyroidism; hunger, hunger, and more hunger!\"", "description": "", "inputFormat": "", "outputFormat": "Output one number: the maximum total energy you can obtain.", "hint": "Eat! Eat! Eat!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Likecloud-吃、吃、吃", "background": "问世间，青春期为何物？\n\n答曰：“甲亢，甲亢，再甲亢；挨饿，挨饿，再挨饿！”", "description": "正处在某一特定时期之中的李大水牛由于消化系统比较发达，最近一直处在饥饿的状态中。某日上课，正当他饿得头昏眼花之时，眼前突然闪现出了一个 $n \\times m(n,m \\le 200)$ 的矩型的巨型大餐桌，而自己正处在这个大餐桌的一侧的中点下边。餐桌被划分为了 $n \\times m$ 个小方格，每一个方格中都有一个圆形的巨型大餐盘，上面盛满了令李大水牛朝思暮想的食物。李大水牛已将餐桌上所有的食物按其所能提供的能量打了分（有些是负的，因为吃了要拉肚子），他决定从自己所处的位置吃到餐桌的另一侧，途径的所有食物都必须吃掉，不能不吃。但他吃东西有一个习惯——只吃自己前方或左前方或右前方的盘中的食物。\n\n由于李大水牛已饿得不想动脑了，而他又想获得最大的能量，因此，他将这个问题交给了你。\n\n每组数据的出发点都是最后一行的中间位置的下方！", "inputFormat": "第一行为 $m$、$n$（$n$ 为奇数），李大水牛一开始在最后一行的中间的下方。\n\n接下来为 $m \\times n$ 的数字矩阵。\n\n矩阵共有 $m$ 行，每行 $n$ 个数字，数字间用空格隔开，代表该格子上的盘中的食物所能提供的能量。\n\n数字全是整数，且绝对值不超过 $10^5$。", "outputFormat": "一个数，为你所找出的最大能量值。", "hint": "快吃！快吃！快吃！", "locale": "zh-CN"}}}
{"pid": "P1509", "type": "P", "difficulty": 3, "samples": [["4\n1 2 5\n2 1 6\n2 2 2\n2 2 3\n5 5\n", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "找啊找啊找GF", "background": "“找啊找啊找 GF，找到一个好 GF，吃顿饭啊拉拉手，你是我的好 GF。再见。”\n\n“诶，别再见啊…”\n\n七夕… 七夕… 七夕这个日子，对于 sqybi 这种单身的菜鸟来说是多么的痛苦… 虽然他听着这首叫做“找啊找啊找 GF”的歌，他还是很痛苦。为了避免这种痛苦，sqybi 决定要给自己找点事情干。他去找到了七夕模拟赛的负责人 zmc MM，让她给自己一个出题的任务。经过几天的死缠烂打，zmc MM 终于同意了。\n\n但是，拿到这个任务的 sqybi 发现，原来出题比单身更让人感到无聊 -\\_- … 所以，他决定了，要在出题的同时去办另一件能够使自己不无聊的事情——给自己找 GF。", "description": "sqybi 现在看中了 $n$ 个 MM，我们不妨把她们编号 $1$ 到 $n$。请 MM 吃饭是要花钱的，我们假设请 $i$ 号 MM 吃饭要花 $rmb_i$ 块大洋。而希望骗 MM 当自己 GF 是要费人品的，我们假设请第 $i$ 号 MM 吃饭试图让她当自己 GF 的行为（不妨称作泡该 MM）要耗费 $rp_i$ 的人品。而对于每一个 MM 来说，sqybi 都有一个对应的搞定她的时间，对于第 $i$ 个 MM 来说叫做 $time_i$。sqybi 保证自己有足够的魅力用 $time_i$ 的时间搞定第 $i$ 个 MM ^\\_^。\n\nsqybi 希望搞到尽量多的 MM 当自己的 GF，这点是毋庸置疑的。但他不希望为此花费太多的时间（毕竟七夕赛的题目还没出），所以他希望在保证搞到 MM 数量最多的情况下花费的总时间最少。\n\nsqybi 现在有 $m$ 块大洋,他也通过一段时间的努力攒到了 $r$ 的人品（这次为模拟赛出题也攒 rp 哦\\~\\~）。他凭借这些大洋和人品可以泡到一些 MM。他想知道，自己泡到最多的 MM 花费的最少时间是多少。\n\n注意 sqybi 在一个时刻只能去泡一个 MM ——如果同时泡两个或以上的 MM 的话，她们会打起来的…", "inputFormat": "输入的第一行是 $n$，表示 sqybi 看中的 MM 数量。\n\n接下来有 $n$ 行，依次表示编号为 $1, 2, 3, \\ldots , n$ 的一个 MM 的信息。每行表示一个 MM 的信息，有三个整数：$rmb$，$rp$ 和 $time$。\n\n最后一行有两个整数，分别为 $m$ 和 $r$。", "outputFormat": "你只需要输出一行，其中有一个整数，表示 sqybi 在保证 MM 数量的情况下花费的最少总时间是多少。", "hint": "sqybi 说：如果题目里说的都是真的就好了…\n\nsqybi 还说，如果他没有能力泡到任何一个 MM，那么他就不消耗时间了（也就是消耗的时间为 $0$），他要用这些时间出七夕比赛的题来攒 rp…\n\n**【数据规模】**\n\n对于 $20 \\%$ 的数据，$1 \\le n \\le 10$；  \n对于 $100 \\%$ 的数据，$1 \\le rmb \\le 100$，$1 \\le rp \\le 100$，$1 \\le time \\le 1000$。  \n对于 $100 \\%$ 的数据，$1 \\le m, r, n \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Find, Find, Find a GF", "background": "\"Find and find and find a GF, find a good GF, have a meal and hold hands, you are my good GF. Goodbye.\"\n\n\"Hey, don’t say goodbye...\"\n\nQixi... Qixi... For someone like sqybi, a single rookie, the Qixi Festival is so painful... Even though he listens to this song called \"Find and Find and Find GF,\" he still feels bad. To avoid this pain, sqybi decided to find something to do. He went to the organizer of the Qixi mock contest, zmc MM, and asked her to give him a problem-setting task. After several days of pestering, zmc MM finally agreed.\n\nHowever, after getting the task, sqybi found that setting problems is even more boring than being single -\\_- ... So he decided to do another thing at the same time to avoid boredom—find himself a GF.", "description": "sqybi now has his eye on $n$ MMs. Let’s number them from $1$ to $n$. Treating MM $i$ to a meal costs $rmb[i]$ coins. Trying to persuade MM $i$ to be his GF (let’s call this \"chasing\" that MM) consumes $rp[i]$ points of \"renpin\" (rp). For each MM, there is a time needed to win her over, denoted $time[i]$. sqybi guarantees he has enough charm to win over MM $i$ in $time[i]$ time ^\\_^.\n\nsqybi wants to get as many MMs as possible to be his GFs, that is certain. But he does not want to spend too much time (after all, the Qixi contest problems are not finished), so among all choices that maximize the number of MMs, he wants the total time spent to be minimized.\n\nsqybi currently has $m$ coins, and after some effort he has accumulated $r$ rp (he also earns rp by setting problems for this mock contest~~). With these coins and rp, he can chase some MMs. He wants to know the minimum total time he needs when he gets the maximum possible number of MMs.\n\nNote that sqybi can only chase one MM at any moment—if he tries to chase two or more MMs at the same time, they will start fighting...", "inputFormat": "The first line contains $n$, the number of MMs sqybi is interested in.\n\nThen there are $n$ lines, describing MMs numbered $1, 2, 3, \\ldots , n$. Each line has three integers: $rmb$, $rp$, and $time$.\n\nThe last line has two integers, $m$ and $r$.", "outputFormat": "Output a single line with one integer: the minimum total time, under the condition that the number of MMs obtained is maximized.", "hint": "sqybi says: If only everything in the statement were true...\n\nsqybi also says: If he cannot chase any MM at all, then he spends no time (that is, the time spent is $0$). He will use that time to set Qixi contest problems to earn rp...\n\nConstraints\n\n- For 20 % of the testdata, $1 \\le n \\le 10$.\n- For 100 % of the testdata, $1 \\le rmb \\le 100$, $1 \\le rp \\le 100$, $1 \\le time \\le 1000$.\n- For 100 % of the testdata, $1 \\le m, r, n \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "找啊找啊找GF", "background": "“找啊找啊找 GF，找到一个好 GF，吃顿饭啊拉拉手，你是我的好 GF。再见。”\n\n“诶，别再见啊…”\n\n七夕… 七夕… 七夕这个日子，对于 sqybi 这种单身的菜鸟来说是多么的痛苦… 虽然他听着这首叫做“找啊找啊找 GF”的歌，他还是很痛苦。为了避免这种痛苦，sqybi 决定要给自己找点事情干。他去找到了七夕模拟赛的负责人 zmc MM，让她给自己一个出题的任务。经过几天的死缠烂打，zmc MM 终于同意了。\n\n但是，拿到这个任务的 sqybi 发现，原来出题比单身更让人感到无聊 -\\_- … 所以，他决定了，要在出题的同时去办另一件能够使自己不无聊的事情——给自己找 GF。", "description": "sqybi 现在看中了 $n$ 个 MM，我们不妨把她们编号 $1$ 到 $n$。请 MM 吃饭是要花钱的，我们假设请 $i$ 号 MM 吃饭要花 $rmb_i$ 块大洋。而希望骗 MM 当自己 GF 是要费人品的，我们假设请第 $i$ 号 MM 吃饭试图让她当自己 GF 的行为（不妨称作泡该 MM）要耗费 $rp_i$ 的人品。而对于每一个 MM 来说，sqybi 都有一个对应的搞定她的时间，对于第 $i$ 个 MM 来说叫做 $time_i$。sqybi 保证自己有足够的魅力用 $time_i$ 的时间搞定第 $i$ 个 MM ^\\_^。\n\nsqybi 希望搞到尽量多的 MM 当自己的 GF，这点是毋庸置疑的。但他不希望为此花费太多的时间（毕竟七夕赛的题目还没出），所以他希望在保证搞到 MM 数量最多的情况下花费的总时间最少。\n\nsqybi 现在有 $m$ 块大洋,他也通过一段时间的努力攒到了 $r$ 的人品（这次为模拟赛出题也攒 rp 哦\\~\\~）。他凭借这些大洋和人品可以泡到一些 MM。他想知道，自己泡到最多的 MM 花费的最少时间是多少。\n\n注意 sqybi 在一个时刻只能去泡一个 MM ——如果同时泡两个或以上的 MM 的话，她们会打起来的…", "inputFormat": "输入的第一行是 $n$，表示 sqybi 看中的 MM 数量。\n\n接下来有 $n$ 行，依次表示编号为 $1, 2, 3, \\ldots , n$ 的一个 MM 的信息。每行表示一个 MM 的信息，有三个整数：$rmb$，$rp$ 和 $time$。\n\n最后一行有两个整数，分别为 $m$ 和 $r$。", "outputFormat": "你只需要输出一行，其中有一个整数，表示 sqybi 在保证 MM 数量的情况下花费的最少总时间是多少。", "hint": "sqybi 说：如果题目里说的都是真的就好了…\n\nsqybi 还说，如果他没有能力泡到任何一个 MM，那么他就不消耗时间了（也就是消耗的时间为 $0$），他要用这些时间出七夕比赛的题来攒 rp…\n\n**【数据规模】**\n\n对于 $20 \\%$ 的数据，$1 \\le n \\le 10$；  \n对于 $100 \\%$ 的数据，$1 \\le rmb \\le 100$，$1 \\le rp \\le 100$，$1 \\le time \\le 1000$。  \n对于 $100 \\%$ 的数据，$1 \\le m, r, n \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1510", "type": "P", "difficulty": 2, "samples": [["100 2 10\n50 5\n50 5", "0"], ["10 2 1\n50 5\n10 2", "Impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "精卫填海", "background": "", "description": "本题为改编题。\n\n> 发鸠之山，其上多柘木。有鸟焉，其状如乌，文首，白喙，赤足，名曰精卫，其名自詨。是炎帝之少女，名曰女娃。女娃游于东海，溺而不返，故为精卫。常衔西山之木石，以堙于东海。——《山海经》\n\n精卫终于快把东海填平了！只剩下了最后的一小片区域了。同时，西山上的木石也已经不多了。精卫能把东海填平吗？\n\n事实上，东海未填平的区域还需要至少体积为 $v$ 的木石才可以填平，而西山上的木石还剩下 $n$ 块，每块的体积和把它衔到东海需要的体力分别为 $k$ 和 $m$。精卫已经填海填了这么长时间了，她也很累了，她还剩下的体力为 $c$。", "inputFormat": "输入文件的第一行是三个整数：$v,n,c$。\n\n从第二行到第 $n+1$ 行分别为每块木石的体积和把它衔到东海需要的体力。", "outputFormat": "输出文件只有一行，如果精卫能把东海填平，则输出她把东海填平后剩下的最大的体力，否则输出 `Impossible`（不带引号）。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$0<n \\le 50$；\n- 对于 $50\\%$ 的数据，$0<n \\le 1000$；\n- 对于 $100\\%$ 的数据，$0<n \\le 10^4$，所有读入的数均属于 $[0,10^4]$，最后答案不大于 $c$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Jingwei Fills the Sea", "background": "", "description": "This is an adapted problem.\n\n> On Mount Fajiu, there are many zhe trees. There is a bird whose form resembles a crow, with a patterned head, a white beak, and red feet. Its name is Jingwei, and its call is like its name. She was the young daughter of the Flame Emperor, named Nüwa. Nüwa went to play in the Eastern Sea, drowned, and did not return, so she became Jingwei. She often carries wood and stones from the Western Mountains to fill up the Eastern Sea. — Classic of Mountains and Seas\n\nJingwei is finally about to fill up the Eastern Sea—only a small area remains. At the same time, there are not many pieces of wood and stone left on the Western Mountains. Can Jingwei finish the task?\n\nIn fact, the remaining unfilled area of the Eastern Sea requires at least a total volume of $v$ worth of wood and stones to be filled. There are $n$ pieces left on the Western Mountains. For the $i$-th piece, its volume and the stamina required to carry it to the Eastern Sea are $k_i$ and $m_i$, respectively. Jingwei is very tired after working for so long, and her remaining stamina is $c$.", "inputFormat": "The first line contains three integers: $v$, $n$, $c$.\n\nLines $2$ through $n+1$ each contain two integers $k_i$ and $m_i$, the volume of the $i$-th piece and the stamina required to carry it to the Eastern Sea.", "outputFormat": "Output a single line. If Jingwei can fill the Eastern Sea, output the maximum stamina she can have left after filling it. Otherwise, output Impossible.", "hint": "### Constraints and Conventions\n\n- For $20\\%$ of the testdata, $0 < n \\le 50$.\n- For $50\\%$ of the testdata, $0 < n \\le 1000$.\n- For $100\\%$ of the testdata, $0 < n \\le 10^4$, all input numbers are in $[0, 10^4]$, and the final answer is not greater than $c$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "精卫填海", "background": "", "description": "本题为改编题。\n\n> 发鸠之山，其上多柘木。有鸟焉，其状如乌，文首，白喙，赤足，名曰精卫，其名自詨。是炎帝之少女，名曰女娃。女娃游于东海，溺而不返，故为精卫。常衔西山之木石，以堙于东海。——《山海经》\n\n精卫终于快把东海填平了！只剩下了最后的一小片区域了。同时，西山上的木石也已经不多了。精卫能把东海填平吗？\n\n事实上，东海未填平的区域还需要至少体积为 $v$ 的木石才可以填平，而西山上的木石还剩下 $n$ 块，每块的体积和把它衔到东海需要的体力分别为 $k$ 和 $m$。精卫已经填海填了这么长时间了，她也很累了，她还剩下的体力为 $c$。", "inputFormat": "输入文件的第一行是三个整数：$v,n,c$。\n\n从第二行到第 $n+1$ 行分别为每块木石的体积和把它衔到东海需要的体力。", "outputFormat": "输出文件只有一行，如果精卫能把东海填平，则输出她把东海填平后剩下的最大的体力，否则输出 `Impossible`（不带引号）。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$0<n \\le 50$；\n- 对于 $50\\%$ 的数据，$0<n \\le 1000$；\n- 对于 $100\\%$ 的数据，$0<n \\le 10^4$，所有读入的数均属于 $[0,10^4]$，最后答案不大于 $c$。\n", "locale": "zh-CN"}}}
{"pid": "P1511", "type": "P", "difficulty": 5, "samples": [["101\r\n", "10\r\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "数学", "2006", "各省省选", "山东", "枚举"], "title": "[SDOI2006] 数字串位置 / 超长数字串", "background": "George 很喜欢数学，尤其是算数数系列。", "description": "他最喜欢的是数字的无穷序列，结果是把所有的自然数按升序排列。这个序列开始是：$\\texttt{1234567891011121314...}$\n\n我们称这个序列为序列 $S$，然后 $S_1 = 1$, $S_2 = 2$, ... , $S_{10} = 1$, $S_{11} = 0$，依此类推.\n\nGeorge 现有一个数字序列 $A$ ，他想知道这个序列在 $S$ 中最早出现的位置。请你帮助他解决这个问题。", "inputFormat": "输入一个字符串，表示数字序列 $A$ ，位数不超过 $200$，中间没有空格。\n", "outputFormat": "输出使 $A_1 = S_k, A_2 = S_{k+1}, ...,A_{len_{A}} = S_{k + len(A)-1}$ 成立的最小正整数 $k$，其中 $len_{A}$ 表示序列 $A$ 的长度。\n", "hint": "来源 Source\n\nUral State University Problem Archive\n\n ", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Digit String Position / Super Long Digit String", "background": "George likes mathematics, especially arithmetic sequences.", "description": "What he likes most is the infinite sequence of digits formed by writing all natural numbers in ascending order. This sequence begins as: $\\texttt{1234567891011121314...}$\n\nWe call this sequence $S$, and $S_1 = 1$, $S_2 = 2$, ... , $S_{10} = 1$, $S_{11} = 0$, and so on.\n\nGeorge has a digit sequence $A$, and he wants to know the earliest position where this sequence appears in $S$. Please help him solve this problem.", "inputFormat": "Input a single string representing the digit sequence A, with length at most 200, and no spaces.", "outputFormat": "Output the smallest positive integer $k$ such that $A_1 = S_k, A_2 = S_{k+1}, ...,A_{len_{A}} = S_{k + len(A)-1}$ holds, where len_{A} denotes the length of sequence A.", "hint": "Source\n\nUral State University Problem Archive.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 数字串位置 / 超长数字串", "background": "George 很喜欢数学，尤其是算数数系列。", "description": "他最喜欢的是数字的无穷序列，结果是把所有的自然数按升序排列。这个序列开始是：$\\texttt{1234567891011121314...}$\n\n我们称这个序列为序列 $S$，然后 $S_1 = 1$, $S_2 = 2$, ... , $S_{10} = 1$, $S_{11} = 0$，依此类推.\n\nGeorge 现有一个数字序列 $A$ ，他想知道这个序列在 $S$ 中最早出现的位置。请你帮助他解决这个问题。", "inputFormat": "输入一个字符串，表示数字序列 $A$ ，位数不超过 $200$，中间没有空格。\n", "outputFormat": "输出使 $A_1 = S_k, A_2 = S_{k+1}, ...,A_{len_{A}} = S_{k + len(A)-1}$ 成立的最小正整数 $k$，其中 $len_{A}$ 表示序列 $A$ 的长度。\n", "hint": "来源 Source\n\nUral State University Problem Archive\n\n ", "locale": "zh-CN"}}}
{"pid": "P1512", "type": "P", "difficulty": 4, "samples": [["3\n2001 11 3\n2001 11 2\n2001 10 3\n", "YES\nNO\nNO\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["搜索", "博弈论", "记忆化搜索"], "title": "伊甸园日历游戏", "background": "", "description": "Adam 和 Eve 玩一个游戏，他们先从 $1900.1.1$ 到 $2006.11.3$ 这个日期之间随意抽取一个日期出来。然后他们轮流对这个日期进行操作：\n\n1. 把日期的天数加 $1$，例如 $1900.1.1$ 变到 $1900.1.2$；\n2. 把月份加 $1$，例如：$1900.1.1$ 变到 $1900.2.1$。\n\n其中如果天数超过应有天数则日期变更到下个月的第 $1$ 天。月份超过 $12$ 则变到下一年的 $1$ 月。而且进行操作二的时候，如果有这样的日期：$1900.1.31$，则变成了 $1900.2.31$，这样的操作是非法的，我们不允许这样做。而且所有的操作均要考虑历法和闰年的规定。\n\n谁先将日期变到 $2006.11.4$ 谁就赢了。如果超越了指定日期不算获胜。\n\n每次游戏都是 Adam 先操作，问他有没有必胜策略？", "inputFormat": "第一行一个整数，为数据组数。\n\n接下来一行 $X,Y,Z$ 表示 $X$ 年 $Y$ 月 $Z$ 日。", "outputFormat": "输出 `YES` 或者 `NO` 表示 Adam 是否有必胜策略。", "hint": "\n\n------------\n2024/1/31 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Garden of Eden Calendar Game", "background": "", "description": "Adam and Eve play a game that starts from a date chosen uniformly at random from $1900.1.1$ to $2006.11.3$. They then take turns applying one of the following operations to the current date:\n\n1. Add $1$ to the day. For example, $1900.1.1$ becomes $1900.1.2$.\n2. Add $1$ to the month. For example, $1900.1.1$ becomes $1900.2.1$.\n\nIf the day exceeds the number of days in the current month, the date rolls over to the $1$st day of the next month. If the month exceeds $12$, it rolls over to January of the next year. Moreover, when performing operation 2, if the resulting date would be invalid (for example, $1900.1.31$ becoming $1900.2.31$), the operation is illegal and not allowed. All operations must respect calendar rules, including leap years.\n\nWhoever first changes the date to exactly $2006.11.4$ wins. If you overshoot the specified date, it does not count as a win.\n\nAdam always moves first. For the given starting date, determine whether he has a winning strategy.", "inputFormat": "- The first line contains an integer $T$, the number of test cases.\n- Each of the next $T$ lines contains three integers $X$, $Y$, $Z$, indicating year $X$, month $Y$, and day $Z$.", "outputFormat": "For each test case, output `YES` or `NO` indicating whether Adam has a winning strategy.", "hint": "------------  \n2024/1/31 Added a set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "伊甸园日历游戏", "background": "", "description": "Adam 和 Eve 玩一个游戏，他们先从 $1900.1.1$ 到 $2006.11.3$ 这个日期之间随意抽取一个日期出来。然后他们轮流对这个日期进行操作：\n\n1. 把日期的天数加 $1$，例如 $1900.1.1$ 变到 $1900.1.2$；\n2. 把月份加 $1$，例如：$1900.1.1$ 变到 $1900.2.1$。\n\n其中如果天数超过应有天数则日期变更到下个月的第 $1$ 天。月份超过 $12$ 则变到下一年的 $1$ 月。而且进行操作二的时候，如果有这样的日期：$1900.1.31$，则变成了 $1900.2.31$，这样的操作是非法的，我们不允许这样做。而且所有的操作均要考虑历法和闰年的规定。\n\n谁先将日期变到 $2006.11.4$ 谁就赢了。如果超越了指定日期不算获胜。\n\n每次游戏都是 Adam 先操作，问他有没有必胜策略？", "inputFormat": "第一行一个整数，为数据组数。\n\n接下来一行 $X,Y,Z$ 表示 $X$ 年 $Y$ 月 $Z$ 日。", "outputFormat": "输出 `YES` 或者 `NO` 表示 Adam 是否有必胜策略。", "hint": "\n\n------------\n2024/1/31 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1513", "type": "P", "difficulty": 2, "samples": [["4 1\r\n0.0 0.0\r\n2.0 0.0\r\n2.0 2.0\r\n0.0 2.0\r\n", "14.28\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "绕钉子的长绳子", "background": "", "description": "平面上有 $N$ 个圆柱形的大钉子，半径都为 $R$，所有钉子组成一个凸多边形。\n\n现在你要用一条绳子把这些钉子围起来，绳子直径忽略不计。求出绳子的长度。\n", "inputFormat": "第一行共两个数，整数 $N\\ (1 \\le N \\le 100)$ 和实数 $R$。\n\n接下来 $N$ 行按逆时针顺序给出 $N$ 个钉子中心的坐标。\n\n坐标的绝对值不超过 $100$。", "outputFormat": "一个数，绳子的长度，精确到小数点后 $2$ 位。", "hint": "本题来自 URAL1020，翻译来自 NOCOW。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Long Rope Around the Nails", "background": "", "description": "There are $N$ cylindrical nails on the plane, each with radius $R$. The centers of all nails form a convex polygon.\n\nNow you need to use a rope to enclose these nails. The rope’s diameter is negligible. Find the length of the rope.", "inputFormat": "The first line contains two numbers: an integer $N$ ($1 \\le N \\le 100$) and a real number $R$.\n\nThe next $N$ lines give the coordinates of the $N$ nail centers in counterclockwise order.\n\nThe absolute value of each coordinate does not exceed $100$.", "outputFormat": "Output one number: the length of the rope, to $2$ decimal places.", "hint": "This problem is from URAL 1020, translation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "绕钉子的长绳子", "background": "", "description": "平面上有 $N$ 个圆柱形的大钉子，半径都为 $R$，所有钉子组成一个凸多边形。\n\n现在你要用一条绳子把这些钉子围起来，绳子直径忽略不计。求出绳子的长度。\n", "inputFormat": "第一行共两个数，整数 $N\\ (1 \\le N \\le 100)$ 和实数 $R$。\n\n接下来 $N$ 行按逆时针顺序给出 $N$ 个钉子中心的坐标。\n\n坐标的绝对值不超过 $100$。", "outputFormat": "一个数，绳子的长度，精确到小数点后 $2$ 位。", "hint": "本题来自 URAL1020，翻译来自 NOCOW。\n", "locale": "zh-CN"}}}
{"pid": "P1514", "type": "P", "difficulty": 5, "samples": [["2 5\n9 1 5 4 3\n8 7 6 1 2\n", "1\n1\n"], ["3 6\n8 4 5 6 4 4\n7 3 4 3 3 3\n3 2 2 1 1 2", "1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "贪心", "2010", "NOIP 提高组", "广度优先搜索 BFS"], "title": "[NOIP 2010 提高组] 引水入城", "background": "NOIP2010 提高组 T4", "description": "在一个遥远的国度，一侧是风景秀美的湖泊，另一侧则是漫无边际的沙漠。该国的行政区划十分特殊，刚好构成一个 $N$ 行 $M$ 列的矩形，如上图所示，其中每个格子都代表一座城市，每座城市都有一个海拔高度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcqfo04b.png)\n\n\n\n为了使居民们都尽可能饮用到清澈的湖水，现在要在某些城市建造水利设施。水利设施有两种，分别为蓄水厂和输水站。蓄水厂的功能是利用水泵将湖泊中的水抽取到所在城市的蓄水池中。\n\n因此，只有与湖泊毗邻的第 $1$ 行的城市可以建造蓄水厂。而输水站的功能则是通过输水管线利用高度落差，将湖水从高处向低处输送。故一座城市能建造输水站的前提，是存在比它海拔更高且拥有公共边的相邻城市，已经建有水利设施。由于第 $N$ 行的城市靠近沙漠，是该国的干旱区，所以要求其中的每座城市都建有水利设施。那么，这个要求能否满足呢？如果能，请计算最少建造几个蓄水厂；如果不能，求干旱区中不可能建有水利设施的城市数目。\n", "inputFormat": "每行两个数，之间用一个空格隔开。输入的第一行是两个正整数 $N,M$，表示矩形的规模。接下来 $N$ 行，每行 $M$ 个正整数，依次代表每座城市的海拔高度。\n", "outputFormat": "两行。如果能满足要求，输出的第一行是整数 $1$，第二行是一个整数，代表最少建造几个蓄水厂；如果不能满足要求，输出的第一行是整数 $0$，第二行是一个整数，代表有几座干旱区中的城市不可能建有水利设施。\n", "hint": "**样例 1 说明**\n\n只需要在海拔为 $9$ 的那座城市中建造蓄水厂，即可满足要求。\n\n**样例 2 说明**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoz3f0lv.png)\n\n上图中，在 $3 $ 个粗线框出的城市中建造蓄水厂，可以满足要求。以这 $3 $ 个蓄水厂为源头在干旱区中建造的输水站分别用 $3$ 种颜色标出。当然，建造方法可能不唯一。\n\n**数据范围**\n\n本题有 10 个测试数据，每个数据的范围如下表所示：\n\n| 测试数据编号 | 能否满足要求 | $N\\le$ | $M\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | 不能 | $10$ | $10$ |\n| 2 | 不能 | $100$ | $100$ |\n| 3 | 不能 | $500$ | $500$ |\n| 4 | 能 | $1$ | $10$ |\n| 5 | 能 | $10$ | $10$ |\n| 6 | 能 | $100$ | $20$ |\n| 7 | 能 | $100$ | $50$ |\n| 8 | 能 | $100$ | $100$ |\n| 9 | 能 | $200$ | $200$ |\n| 10 | 能 | $500$ | $500$ |\n\n对于所有 10 个数据，每座城市的海拔高度都不超过 $10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2010 Senior] Channeling Water into the City", "background": "NOIP 2010 Senior T4.", "description": "In a faraway country, a scenic lake lies on one side and a boundless desert on the other. The country’s administrative divisions form an $N$-by-$M$ rectangle, as shown above, where each cell represents a city, and each city has an elevation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcqfo04b.png)\n\nTo let as many residents as possible drink clear lake water, water facilities will be built in some cities. There are two types of facilities: reservoir plants and transfer stations. A reservoir plant uses pumps to draw water from the lake into the reservoir of its city.\n\nTherefore, only cities in the first row, which border the lake, can build reservoir plants. A transfer station uses pipelines and elevation drop to convey lake water from higher places to lower places. Thus, a city can build a transfer station only if there exists an adjacent city sharing a side, with a strictly higher elevation, that already has a water facility. Because the cities in the $N$-th row are close to the desert and form the arid region, every city in that row is required to have a water facility. Can this requirement be satisfied? If yes, compute the minimum number of reservoir plants to build; if not, find how many cities in the arid region cannot possibly have any water facility.", "inputFormat": "The first line contains two positive integers $N, M$, representing the size of the rectangle. Then $N$ lines follow, each containing $M$ positive integers, which are the elevations of the cities in order.", "outputFormat": "Two lines. If the requirement can be met, output the integer $1$ on the first line, and output an integer on the second line representing the minimum number of reservoir plants. If the requirement cannot be met, output the integer $0$ on the first line, and output an integer on the second line representing the number of cities in the arid region that cannot possibly have any water facility.", "hint": "Sample 1 explanation:\n\nYou only need to build a reservoir plant in the city with elevation $9$ to satisfy the requirement.\n\nSample 2 explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoz3f0lv.png)\n\nIn the three cities highlighted with thick borders in the figure above, building reservoir plants will satisfy the requirement. The transfer stations in the arid region fed by these three reservoir plants are marked in three colors. Of course, the construction plan may not be unique.\n\nConstraints\n\nThis problem has 10 pieces of testdata, with limits as shown in the table below:\n\n| Testdata ID | Whether requirement can be met | $N\\le$ | $M\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | No | $10$ | $10$ |\n| 2 | No | $100$ | $100$ |\n| 3 | No | $500$ | $500$ |\n| 4 | Yes | $1$ | $10$ |\n| 5 | Yes | $10$ | $10$ |\n| 6 | Yes | $100$ | $20$ |\n| 7 | Yes | $100$ | $50$ |\n| 8 | Yes | $100$ | $100$ |\n| 9 | Yes | $200$ | $200$ |\n| 10 | Yes | $500$ | $500$ |\n\nFor all 10 testdata, each city’s elevation does not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2010 提高组] 引水入城", "background": "NOIP2010 提高组 T4", "description": "在一个遥远的国度，一侧是风景秀美的湖泊，另一侧则是漫无边际的沙漠。该国的行政区划十分特殊，刚好构成一个 $N$ 行 $M$ 列的矩形，如上图所示，其中每个格子都代表一座城市，每座城市都有一个海拔高度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcqfo04b.png)\n\n\n\n为了使居民们都尽可能饮用到清澈的湖水，现在要在某些城市建造水利设施。水利设施有两种，分别为蓄水厂和输水站。蓄水厂的功能是利用水泵将湖泊中的水抽取到所在城市的蓄水池中。\n\n因此，只有与湖泊毗邻的第 $1$ 行的城市可以建造蓄水厂。而输水站的功能则是通过输水管线利用高度落差，将湖水从高处向低处输送。故一座城市能建造输水站的前提，是存在比它海拔更高且拥有公共边的相邻城市，已经建有水利设施。由于第 $N$ 行的城市靠近沙漠，是该国的干旱区，所以要求其中的每座城市都建有水利设施。那么，这个要求能否满足呢？如果能，请计算最少建造几个蓄水厂；如果不能，求干旱区中不可能建有水利设施的城市数目。\n", "inputFormat": "每行两个数，之间用一个空格隔开。输入的第一行是两个正整数 $N,M$，表示矩形的规模。接下来 $N$ 行，每行 $M$ 个正整数，依次代表每座城市的海拔高度。\n", "outputFormat": "两行。如果能满足要求，输出的第一行是整数 $1$，第二行是一个整数，代表最少建造几个蓄水厂；如果不能满足要求，输出的第一行是整数 $0$，第二行是一个整数，代表有几座干旱区中的城市不可能建有水利设施。\n", "hint": "**样例 1 说明**\n\n只需要在海拔为 $9$ 的那座城市中建造蓄水厂，即可满足要求。\n\n**样例 2 说明**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoz3f0lv.png)\n\n上图中，在 $3 $ 个粗线框出的城市中建造蓄水厂，可以满足要求。以这 $3 $ 个蓄水厂为源头在干旱区中建造的输水站分别用 $3$ 种颜色标出。当然，建造方法可能不唯一。\n\n**数据范围**\n\n本题有 10 个测试数据，每个数据的范围如下表所示：\n\n| 测试数据编号 | 能否满足要求 | $N\\le$ | $M\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | 不能 | $10$ | $10$ |\n| 2 | 不能 | $100$ | $100$ |\n| 3 | 不能 | $500$ | $500$ |\n| 4 | 能 | $1$ | $10$ |\n| 5 | 能 | $10$ | $10$ |\n| 6 | 能 | $100$ | $20$ |\n| 7 | 能 | $100$ | $50$ |\n| 8 | 能 | $100$ | $100$ |\n| 9 | 能 | $200$ | $200$ |\n| 10 | 能 | $500$ | $500$ |\n\n对于所有 10 个数据，每座城市的海拔高度都不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P1515", "type": "P", "difficulty": 2, "samples": [["500\n1500\n0\n", "64\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "递推"], "title": "旅行", "background": "", "description": "你要进行一个行程为 $7000$ 千米的旅行，现在沿途有些汽车旅馆，为了安全起见，每天晚上都不开车，住在汽车旅馆，你手里现在已经有一个旅馆列表，用离起点的距离来标识，如下：\n\n- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$。\n\n但在出发之前可能还要增加一些旅馆。\n\n现在旅行社为了节约成本，要求每天至少行驶 $A$ 公里，国家旅行社为了安全起见，要求每天最多只能行驶 $B$ 公里。\n\n你想知道一共有多少种旅行方案。", "inputFormat": "第一行输入一个整数 $A$，第二行输入一个整数 $B$，第三行输入 $N$（$0 \\le N \\le 20$），表示在出发之前又新增 $N$ 个汽车旅馆；\n\n接下来 $N$ 行，每行一个整数 $m$，表示旅馆离起点的距离（$0<m<7000$）。注意：没有任意两个旅馆在同一位置。", "outputFormat": "输出一共有多少种旅行方案。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Travel", "background": "", "description": "You are going to take a trip of $7000$ kilometers. There are some motels along the way. For safety, you do not drive at night and stay in motels. You already have a list of motels, identified by their distance from the starting point, as follows:\n- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$.\n\nHowever, some motels may be added before departure.\n\nTo save costs, the travel agency requires that you drive at least $A$ kilometers each day. For safety, the national travel agency requires that you drive at most $B$ kilometers each day.\n\nYou want to know how many travel plans there are in total.", "inputFormat": "The first line contains an integer $A$. The second line contains an integer $B$. The third line contains an integer $N$ ($0 \\le N \\le 20$), indicating that $N$ additional motels are added before departure.\n\nThe next $N$ lines each contain an integer $m$, which is the distance of a motel from the starting point ($0 < m < 7000$). Note: No two motels are at the same location.", "outputFormat": "Output the total number of travel plans.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "旅行", "background": "", "description": "你要进行一个行程为 $7000$ 千米的旅行，现在沿途有些汽车旅馆，为了安全起见，每天晚上都不开车，住在汽车旅馆，你手里现在已经有一个旅馆列表，用离起点的距离来标识，如下：\n\n- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$。\n\n但在出发之前可能还要增加一些旅馆。\n\n现在旅行社为了节约成本，要求每天至少行驶 $A$ 公里，国家旅行社为了安全起见，要求每天最多只能行驶 $B$ 公里。\n\n你想知道一共有多少种旅行方案。", "inputFormat": "第一行输入一个整数 $A$，第二行输入一个整数 $B$，第三行输入 $N$（$0 \\le N \\le 20$），表示在出发之前又新增 $N$ 个汽车旅馆；\n\n接下来 $N$ 行，每行一个整数 $m$，表示旅馆离起点的距离（$0<m<7000$）。注意：没有任意两个旅馆在同一位置。", "outputFormat": "输出一共有多少种旅行方案。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1516", "type": "P", "difficulty": 5, "samples": [["1 2 3 4 5\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "扩展欧几里德算法", "中国剩余定理 CRT"], "title": "青蛙的约会", "background": null, "description": "两只青蛙在网上相识了，它们聊得很开心，于是觉得很有必要见一面。它们很高兴地发现它们住在同一条纬度线上，于是它们约定各自朝西跳，直到碰面为止。可是它们出发之前忘记了一件很重要的事情，既没有问清楚对方的特征，也没有约定见面的具体位置。不过青蛙们都是很乐观的，它们觉得只要一直朝着某个方向跳下去，总能碰到对方的。但是除非这两只青蛙在同一时间跳到同一点上，不然是永远都不可能碰面的。为了帮助这两只乐观的青蛙，你被要求写一个程序来判断这两只青蛙是否能够碰面，会在什么时候碰面。\n\n我们把这两只青蛙分别叫做青蛙 A 和青蛙 B，并且规定纬度线上东经 $0$ 度处为原点，由东往西为正方向，单位长度 $1$ 米，这样我们就得到了一条首尾相接的数轴。设青蛙 A 的出发点坐标是 $x$，青蛙 B 的出发点坐标是 $y$。青蛙 A 一次能跳 $m$ 米，青蛙 B 一次能跳 $n$ 米，两只青蛙跳一次所花费的时间相同。纬度线总长 $L$ 米。现在要你求出它们跳了几次以后才会碰面。", "inputFormat": "输入只包括一行五个整数 $x,y,m,n,L$。", "outputFormat": "输出碰面所需要的次数，如果永远不可能碰面则输出一行一个字符串 `Impossible`。", "hint": "对于 $100\\%$ 的数据，$1 \\le x, y, m, n \\le 2 \\times 10^9$，$x \\ne y$，$1 \\le L \\le 2.1 \\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Frogs' Date", "background": "", "description": "Two frogs met online and enjoyed chatting, so they thought it necessary to meet. They happily discovered that they live on the same line of latitude and agreed to jump westward until they meet. However, before setting off, they forgot something important: they neither asked each other's characteristics nor agreed on the exact meeting point. Still, the frogs are optimistic and believe that as long as they keep jumping in one direction, they will eventually meet. But unless both frogs land on the same point at the same time, they can never meet. To help these two optimistic frogs, you are asked to write a program to determine whether they can meet and when they will meet.\n\nCall the two frogs frog A and frog B. On the latitude line, set the origin at $0^\\circ$E, take the direction from east to west as positive, and set the unit length to $1$ meter. In this way, we obtain a circular number line. Let the starting position of frog A be $x$, and the starting position of frog B be $y$. Frog A jumps $m$ meters per jump, and frog B jumps $n$ meters per jump. One jump takes the same time for both frogs. The total length of the latitude line is $L$ meters. Now you need to find after how many jumps they will meet.", "inputFormat": "The input consists of one line with five integers $x,y,m,n,L$.", "outputFormat": "Output the number of jumps needed for them to meet. If they can never meet, output a single line containing the string `Impossible`.", "hint": "For $100\\%$ of the testdata, $1 \\le x, y, m, n \\le 2 \\times 10^9$, $x \\ne y$, $1 \\le L \\le 2.1 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "青蛙的约会", "background": null, "description": "两只青蛙在网上相识了，它们聊得很开心，于是觉得很有必要见一面。它们很高兴地发现它们住在同一条纬度线上，于是它们约定各自朝西跳，直到碰面为止。可是它们出发之前忘记了一件很重要的事情，既没有问清楚对方的特征，也没有约定见面的具体位置。不过青蛙们都是很乐观的，它们觉得只要一直朝着某个方向跳下去，总能碰到对方的。但是除非这两只青蛙在同一时间跳到同一点上，不然是永远都不可能碰面的。为了帮助这两只乐观的青蛙，你被要求写一个程序来判断这两只青蛙是否能够碰面，会在什么时候碰面。\n\n我们把这两只青蛙分别叫做青蛙 A 和青蛙 B，并且规定纬度线上东经 $0$ 度处为原点，由东往西为正方向，单位长度 $1$ 米，这样我们就得到了一条首尾相接的数轴。设青蛙 A 的出发点坐标是 $x$，青蛙 B 的出发点坐标是 $y$。青蛙 A 一次能跳 $m$ 米，青蛙 B 一次能跳 $n$ 米，两只青蛙跳一次所花费的时间相同。纬度线总长 $L$ 米。现在要你求出它们跳了几次以后才会碰面。", "inputFormat": "输入只包括一行五个整数 $x,y,m,n,L$。", "outputFormat": "输出碰面所需要的次数，如果永远不可能碰面则输出一行一个字符串 `Impossible`。", "hint": "对于 $100\\%$ 的数据，$1 \\le x, y, m, n \\le 2 \\times 10^9$，$x \\ne y$，$1 \\le L \\le 2.1 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1517", "type": "P", "difficulty": 3, "samples": [["95.123  2\n0.4321  5\n5.1234  7\n6.7592  3\n98.999  5\n1.0100 10\n", "9048.385129\n.01506334182914325601\n92663.3181348508776705891407804544\n308.806114738688\n9509420210.697891990494999\n1.10462212541120451001\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度"], "title": "高精求小数幂", "background": null, "description": "计算量非常大、精度要求非常高的问题是很常见的。举个例子，计算国家债务就是这么一项对于许多计算机系统来说非常繁重的工作。\n\n现在有这么一个任务要求编写一个程序来计算 $R^n$ 的精确值，其中 $R$ 是一个实数 $(0 < R \\le 9999.9)$ 而 $n$ 是一个整数 $(1 \\le n \\le 250)$。", "inputFormat": "**本题有多组数据。**\n\n对于每组数据，一行两个数字 $R,n$，中间有至少一个空格。\n\n保证每行包括空格在内恰好有 $9$ 个字符，且 $n$ 后面没有空格。\n\n**请读入到输入文件末尾：**\n\n- 对于 C++ 的 `std::cin`，可以使用 `while (std::cin >> s >> n) {/* ... */}` 来实现这一功能，其中 `s` 是 `std::string` 类型的变量。\n- 对于 C/C++ 的 `scanf`，可以使用 `while (scanf(\"%s%d\", s, &n) == 2) {/* ... */}` 来实现这一功能，其中 `s` 是 `char*` 类型的变量。\n- 对于其他输入函数实现这一功能的方式，请自行查阅文档。\n\n保证数据组数不超过 $11$ 组。", "outputFormat": "对于每组数据，输出一行一个实数，表示 $R^n$ 的**精确值**。\n\n输出有三点要求：\n\n1. 输出不允许有前导 $0$。\n2. 小数部分末尾不能有 $0$。\n3. 如果结果是整数，不应该输出小数点。\n\n**特别地，当答案小于 $\\bm 1$ 时，你需要省略整数部分的 $\\bm 0$，输出形如 `.25` 的答案。**", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "High-precision decimal power", "background": "", "description": "Problems involving the computation of exact values of very large magnitude and precision are common. For example, the computation of the national debt is a taxing experience for many computer systems.\n\nThis problem requires that you write a program to compute the exact value of Rn where R is a real number ( 0.0 < R <= 9999.9) and n is an integer such that 0 < n <= 250.\n", "inputFormat": "The input will consist of a set (less than 11) of pairs of values for R and n. The R value will occupy columns 1 through 6, and the n value will be in columns 8 and 9.\n\n   \n ", "outputFormat": "The output will consist of one line for each line of input giving the exact value of R^n. Leading zeros should be suppressed in the output. Insignificant trailing zeros must not be printed. Don't print the decimal point if the result is an integer.\n", "hint": "If you don't know how to determine wheather encounted the end of input:\n\ns is a string and n is an integer\n\nC++\nwhile(cin>>s>>n) \n\n{ \n...\n} \nc\nwhile(scanf(\"%s%d\",s,&n)==2) //to see if the scanf read in as many items as you want\n\n\n{ \n...\n}", "locale": "en"}, "zh-CN": {"title": "高精求小数幂", "background": null, "description": "计算量非常大、精度要求非常高的问题是很常见的。举个例子，计算国家债务就是这么一项对于许多计算机系统来说非常繁重的工作。\n\n现在有这么一个任务要求编写一个程序来计算 $R^n$ 的精确值，其中 $R$ 是一个实数 $(0 < R \\le 9999.9)$ 而 $n$ 是一个整数 $(1 \\le n \\le 250)$。", "inputFormat": "**本题有多组数据。**\n\n对于每组数据，一行两个数字 $R,n$，中间有至少一个空格。\n\n保证每行包括空格在内恰好有 $9$ 个字符，且 $n$ 后面没有空格。\n\n**请读入到输入文件末尾：**\n\n- 对于 C++ 的 `std::cin`，可以使用 `while (std::cin >> s >> n) {/* ... */}` 来实现这一功能，其中 `s` 是 `std::string` 类型的变量。\n- 对于 C/C++ 的 `scanf`，可以使用 `while (scanf(\"%s%d\", s, &n) == 2) {/* ... */}` 来实现这一功能，其中 `s` 是 `char*` 类型的变量。\n- 对于其他输入函数实现这一功能的方式，请自行查阅文档。\n\n保证数据组数不超过 $11$ 组。", "outputFormat": "对于每组数据，输出一行一个实数，表示 $R^n$ 的**精确值**。\n\n输出有三点要求：\n\n1. 输出不允许有前导 $0$。\n2. 小数部分末尾不能有 $0$。\n3. 如果结果是整数，不应该输出小数点。\n\n**特别地，当答案小于 $\\bm 1$ 时，你需要省略整数部分的 $\\bm 0$，输出形如 `.25` 的答案。**", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1518", "type": "P", "difficulty": 3, "samples": [["*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......", "49"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "USACO"], "title": "[USACO2.4] 两只塔姆沃斯牛 The Tamworth Two", "background": null, "description": "两只牛逃跑到了森林里。Farmer John 开始用他的专家技术追捕这两头牛。你的任务是模拟他们的行为（牛和 John）。\n\n追击在 $10 \\times 10$ 的平面网格内进行。一个格子可以是：一个障碍物，两头牛（它们总在一起），或者 Farmer John。两头牛和 Farmer John 可以在同一个格子内（当他们相遇时），但是他们都不能进入有障碍的格子。\n\n一个格子可以是：\n- `.` 空地；\n- `*` 障碍物；\n- `C` 两头牛；\n- `F` Farmer John。\n\n这里有一个地图的例子：\n\n```plain\n*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......\n```\n\n牛在地图里以固定的方式游荡。每分钟，它们可以向前移动或是转弯。如果前方无障碍（地图边沿也是障碍），它们会按照原来的方向前进一步。否则它们会用这一分钟顺时针转 $90$ 度。 同时，它们不会离开地图。\n\nFarmer John 深知牛的移动方法，他也这么移动。\n\n每次（每分钟）Farmer John 和两头牛的移动是同时的。如果他们在移动的时候穿过对方，但是没有在同一格相遇，我们不认为他们相遇了。当他们在某分钟末在某格子相遇，那么追捕结束。\n\n读入十行表示地图。每行都只包含 $10$ 个字符，表示的含义和上面所说的相同。保证地图中只有一个 `F` 和一个 `C`。`F` 和 `C` 一开始不会处于同一个格子中。\n\n计算 Farmer John 需要多少分钟来抓住他的牛，假设牛和 Farmer John 一开始的行动方向都是正北（即上）。 如果 John 和牛永远不会相遇，输出 $0$。", "inputFormat": "输入共十行，每行 $10$ 个字符，表示如上文描述的地图。", "outputFormat": "输出一个数字，表示 John 需要多少时间才能抓住牛们。如果 John 无法抓住牛，则输出 $0$。", "hint": "翻译来自NOCOW\n\nUSACO 2.4", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] The Tamworth Two", "background": "", "description": "Two cows have escaped into the forest. Farmer John begins to pursue them using his expert technique. Your task is to simulate their behavior (the cows and John).\n\nThe chase takes place on a $10 \\times 10$ grid. Each cell can be: an obstacle, the two cows (they always stay together), or Farmer John. The cows and Farmer John may occupy the same cell (when they meet), but neither can enter a cell with an obstacle.\n\nA cell can be:\n- `.` empty ground;\n- `*` obstacle;\n- `C` the two cows;\n- `F` Farmer John.\n\nHere is an example map:\n\n```plain\n*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......\n```\n\nThe cows wander the map in a fixed way. Each minute, they either move forward or turn. If the cell directly ahead is not blocked (the map border also counts as a blockage), they advance one cell in their current direction. Otherwise, they spend that minute turning 90 degrees clockwise. They never move off the map.\n\nFarmer John knows the cows' movement rule and moves in exactly the same way.\n\nThe cows and Farmer John move simultaneously each minute. If they pass through each other during a move but do not end up in the same cell at the end of that minute, that does not count as a meeting. When they occupy the same cell at the end of some minute, the chase ends.\n\nRead ten lines describing the map. Each line contains exactly 10 characters, with meanings as defined above. There is exactly one `F` and one `C`. `F` and `C` do not start in the same cell.\n\nCompute how many minutes Farmer John needs to catch the cows, assuming both the cows and Farmer John initially face north (up). If John and the cows will never meet, output 0.", "inputFormat": "The input consists of ten lines, each with 10 characters, describing the map as above.", "outputFormat": "Output a single integer: the number of minutes Farmer John needs to catch the cows. If he cannot catch them, output 0.", "hint": "Translation from NOCOW.\nUSACO 2.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 两只塔姆沃斯牛 The Tamworth Two", "background": null, "description": "两只牛逃跑到了森林里。Farmer John 开始用他的专家技术追捕这两头牛。你的任务是模拟他们的行为（牛和 John）。\n\n追击在 $10 \\times 10$ 的平面网格内进行。一个格子可以是：一个障碍物，两头牛（它们总在一起），或者 Farmer John。两头牛和 Farmer John 可以在同一个格子内（当他们相遇时），但是他们都不能进入有障碍的格子。\n\n一个格子可以是：\n- `.` 空地；\n- `*` 障碍物；\n- `C` 两头牛；\n- `F` Farmer John。\n\n这里有一个地图的例子：\n\n```plain\n*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......\n```\n\n牛在地图里以固定的方式游荡。每分钟，它们可以向前移动或是转弯。如果前方无障碍（地图边沿也是障碍），它们会按照原来的方向前进一步。否则它们会用这一分钟顺时针转 $90$ 度。 同时，它们不会离开地图。\n\nFarmer John 深知牛的移动方法，他也这么移动。\n\n每次（每分钟）Farmer John 和两头牛的移动是同时的。如果他们在移动的时候穿过对方，但是没有在同一格相遇，我们不认为他们相遇了。当他们在某分钟末在某格子相遇，那么追捕结束。\n\n读入十行表示地图。每行都只包含 $10$ 个字符，表示的含义和上面所说的相同。保证地图中只有一个 `F` 和一个 `C`。`F` 和 `C` 一开始不会处于同一个格子中。\n\n计算 Farmer John 需要多少分钟来抓住他的牛，假设牛和 Farmer John 一开始的行动方向都是正北（即上）。 如果 John 和牛永远不会相遇，输出 $0$。", "inputFormat": "输入共十行，每行 $10$ 个字符，表示如上文描述的地图。", "outputFormat": "输出一个数字，表示 John 需要多少时间才能抓住牛们。如果 John 无法抓住牛，则输出 $0$。", "hint": "翻译来自NOCOW\n\nUSACO 2.4", "locale": "zh-CN"}}}
{"pid": "P1519", "type": "P", "difficulty": 3, "samples": [["5 3\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO"], "title": "[USACO2.4] 穿越栅栏 Overfencing", "background": "", "description": "Farmer John 在外面的田野上搭建了一个巨大的用栅栏围成的迷宫。幸运的是，他在迷宫的边界上留出了两段栅栏作为迷宫的出口。更幸运的是，他所建造的迷宫是一个“完美的”迷宫：即你能从迷宫中的任意一点找到一条走出迷宫的路。\n\n给定迷宫的宽度 $W$（$1 \\leq W \\leq 38$）及高度 $H$（$1 \\leq H \\leq 100$）。$2 \\times H+1$ 行，每行 $2 \\times W+1$ 的字符以下面给出的格式表示一个迷宫。然后计算从迷宫中最“糟糕”的那一个点走出迷宫所需的步数（即使从这一点以最优的方式走向最靠近的出口，它仍然需要最多的步数）。\n\n当然了，牛们只会水平或垂直地在 X 或 Y 轴上移动，他们从来不走对角线。每移动到一个新的方格算作一步（包括移出迷宫的那一步）。\n\n这是一个 $W=5,H=3$ 的迷宫：\n\n```plain\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+\n```\n如上图的例子，栅栏的柱子只出现在奇数行或奇数列。每个迷宫只有两个出口。", "inputFormat": "第一行两个整数 $W,H$。\n\n接下来 $2 \\times H+1$ 行：每行 $2 \\times W+1$ 个字符，描述一个迷宫。\n", "outputFormat": "输出一个单独的整数，表示最坏情况下牛走出迷宫的最小步数。\n", "hint": "翻译来自NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] Overfencing", "background": "", "description": "Farmer John built a huge maze enclosed by fences out in the field. Fortunately, he left two fence openings on the boundary of the maze as exits. Even better, the maze he built is “perfect”: from any point in the maze you can find a path to an exit.\n\nGiven the width $W$ ($1 \\leq W \\leq 38$) and height $H$ ($1 \\leq H \\leq 100$), a maze is described by $2 \\times H+1$ lines, each with $2 \\times W+1$ characters in the format shown below. Compute the number of steps needed to exit the maze from the “worst” starting cell (i.e., even if you head optimally toward the nearest exit from that cell, it still requires the most steps).\n\nCows move only horizontally or vertically along the X or Y axes; they never move diagonally. Moving into a new cell counts as one step (including the step that moves out of the maze).\n\nHere is a maze with $W=5, H=3$:\n\n```plain\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+\n```\nIn the example above, fence posts appear only in odd-numbered rows or odd-numbered columns. Each maze has exactly two exits.", "inputFormat": "The first line contains two integers $W,H$.\n\nThen follow $2 \\times H+1$ lines: each line has $2 \\times W+1$ characters describing a maze.", "outputFormat": "Output a single integer: the minimal number of steps to exit the maze in the worst case.", "hint": "Translation from NOCOW.\n\nUSACO 2.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 穿越栅栏 Overfencing", "background": "", "description": "Farmer John 在外面的田野上搭建了一个巨大的用栅栏围成的迷宫。幸运的是，他在迷宫的边界上留出了两段栅栏作为迷宫的出口。更幸运的是，他所建造的迷宫是一个“完美的”迷宫：即你能从迷宫中的任意一点找到一条走出迷宫的路。\n\n给定迷宫的宽度 $W$（$1 \\leq W \\leq 38$）及高度 $H$（$1 \\leq H \\leq 100$）。$2 \\times H+1$ 行，每行 $2 \\times W+1$ 的字符以下面给出的格式表示一个迷宫。然后计算从迷宫中最“糟糕”的那一个点走出迷宫所需的步数（即使从这一点以最优的方式走向最靠近的出口，它仍然需要最多的步数）。\n\n当然了，牛们只会水平或垂直地在 X 或 Y 轴上移动，他们从来不走对角线。每移动到一个新的方格算作一步（包括移出迷宫的那一步）。\n\n这是一个 $W=5,H=3$ 的迷宫：\n\n```plain\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+\n```\n如上图的例子，栅栏的柱子只出现在奇数行或奇数列。每个迷宫只有两个出口。", "inputFormat": "第一行两个整数 $W,H$。\n\n接下来 $2 \\times H+1$ 行：每行 $2 \\times W+1$ 个字符，描述一个迷宫。\n", "outputFormat": "输出一个单独的整数，表示最坏情况下牛走出迷宫的最小步数。\n", "hint": "翻译来自NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN"}}}
{"pid": "P1520", "type": "P", "difficulty": 6, "samples": [["12", "(x-1)(x+1)(x^2+1)(x^2-x+1)(x^2+x+1)(x^4-x^2+1)"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "因式分解", "background": "某天，小 W 正在上数学课，听见老师讲解因式分解增补删除及十字相乘法的技巧，感觉非常厉害，于是想用这些技巧来做题，但做着做着遇到一道不会做的题，你能帮帮他吗？", "description": "在整多项式环内对多项式 $x^n-1$ 作因式分解（简单点说就是做因式分解题），要求分解到全部为素多项式为止（即最后结果不能有可继续分解的多项式）。", "inputFormat": "输入共一行，一个正整数 $n$。", "outputFormat": "输出一行一个字符串，表示因式分解的结果。\n\n最后的输出中每个因式应该不含空格，在可以省略 $0$、$1$、乘号和括号的情况下应该尽可能省略。\n\n有多个因式时，每个因式应该降幂排列，并且保证首项系数为正。\n\n除此以外，我们要求按如下顺序排列因式：\n\n- 优先输出次数低的因式，对于次数相同的因式，依次比较每个因式的系数，从高指数项到低指数项（包括被省略即系数为 $0$ 的项）。\n- 系数首先比较绝对值，其次比较符号。规定绝对值小的系数字典序小，绝对值相同时比较符号，负号字典序比正号小。字典序越小的因式应该排在越前面输出。详见样例。", "hint": "### 提示\n\n$(x^n-1)/(x+1)=\\cdots$\n\n### 数据范围及约定\n\n- 对 $20\\%$ 数据，$1 \\le n \\le 200$；\n- 对 $100\\%$ 数据，$1 \\le n \\le 5000$。", "locale": "zh-CN", "translations": {"en": {"title": "Factorization", "background": "One day, little W was in math class and heard the teacher explain techniques for factorization, including augmentation-deletion (zēng bǔ shān chú) and the cross multiplication method. He thought they were amazing and wanted to use them to solve problems, but then he ran into a problem he couldn’t solve. Can you help him?", "description": "Factor the polynomial $x^n - 1$ over the ring of integer polynomials (in short, this is a factorization problem), and continue factoring until all factors are irreducible polynomials (i.e., no factor can be further factored).", "inputFormat": "A single line containing a positive integer $n$.", "outputFormat": "Output one line with a single string representing the factorization result.\n\nIn the final output, each factor should contain no spaces. Whenever $0$, $1$, the multiplication sign, and parentheses can be omitted, do so whenever possible.\n\nIf there are multiple factors, each factor should be written in descending powers, and its leading coefficient must be positive.\n\nIn addition, order the factors as follows:\n- Prefer factors of lower degree. For factors with the same degree, compare their coefficients term by term from higher to lower exponents (including omitted terms whose coefficients are $0$).\n- For coefficients, compare absolute values first, then signs. A smaller absolute value is lexicographically smaller; if absolute values are equal, a negative sign is lexicographically smaller than a positive sign. Factors with lexicographically smaller sequences should be output earlier. See the sample.", "hint": "### Hint\n\n$(x^n-1)/(x+1)=\\cdots$\n\n### Constraints and Conventions\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 200$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "因式分解", "background": "某天，小 W 正在上数学课，听见老师讲解因式分解增补删除及十字相乘法的技巧，感觉非常厉害，于是想用这些技巧来做题，但做着做着遇到一道不会做的题，你能帮帮他吗？", "description": "在整多项式环内对多项式 $x^n-1$ 作因式分解（简单点说就是做因式分解题），要求分解到全部为素多项式为止（即最后结果不能有可继续分解的多项式）。", "inputFormat": "输入共一行，一个正整数 $n$。", "outputFormat": "输出一行一个字符串，表示因式分解的结果。\n\n最后的输出中每个因式应该不含空格，在可以省略 $0$、$1$、乘号和括号的情况下应该尽可能省略。\n\n有多个因式时，每个因式应该降幂排列，并且保证首项系数为正。\n\n除此以外，我们要求按如下顺序排列因式：\n\n- 优先输出次数低的因式，对于次数相同的因式，依次比较每个因式的系数，从高指数项到低指数项（包括被省略即系数为 $0$ 的项）。\n- 系数首先比较绝对值，其次比较符号。规定绝对值小的系数字典序小，绝对值相同时比较符号，负号字典序比正号小。字典序越小的因式应该排在越前面输出。详见样例。", "hint": "### 提示\n\n$(x^n-1)/(x+1)=\\cdots$\n\n### 数据范围及约定\n\n- 对 $20\\%$ 数据，$1 \\le n \\le 200$；\n- 对 $100\\%$ 数据，$1 \\le n \\le 5000$。", "locale": "zh-CN"}}}
