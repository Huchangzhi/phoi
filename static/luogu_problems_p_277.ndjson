{"pid": "P6607", "type": "P", "difficulty": 2, "samples": [["3 6\n1 3 5\n1 1 0", "5 5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Code+"], "title": "[Code+#7] 蚂蚁", "background": "", "description": "在东西排布的两棵树之间悬挂着一条长为 $L$ 的细绳，有 $N$ 只蚂蚁在这条绳上。这些蚂蚁希望通过绳子爬到任何一棵树上，但这条绳太细了，导致两只蚂蚁不能并排爬行，也不能交错而过。\n\n它们想到了一个方法：每只蚂蚁都以每单位时间移动一个单位距离的速度不断向前爬，当迎面碰到另一只蚂蚁时，两只蚂蚁都将立即掉头并继续向前爬。现在，蚂蚁们想知道自己是否能爬下绳子，如果能，它们还希望知道自己爬下绳子所花的时间。为了方便，我们按初始时位置从东到西的顺序对蚂蚁从 $1$ 开始编号。", "inputFormat": "输入的第一行包含两个正整数 $N, L$，保证 $N\\le 10^5, L\\le 10^9$，且 $N<L$。\n\n输入的第二行包含 $N$ 个正整数，第 $i$ 个数 $p_i$ 表示第 $i$ 只蚂蚁到东侧树木的距离，保证 $p_i$ 随 $i$ 增大严格递增，且 $0<p_i<L$。\n\n输入的第三行包含 $N$ 个整数，第 $i$ 个数 $d_i$ 若为 $1$ 则表示第 $i$ 只蚂蚁一开始朝向西侧，为 $0$ 则表示朝向东侧。", "outputFormat": "输出仅一行，包含 $N$ 个数，第 $i$ 个数表示第 $i$ 只蚂蚁爬下绳子所花时间，四舍五入保留到整数。若第 $i$ 只蚂蚁无法爬下绳子，则输出的第 $i$ 个数为 $-1$。", "hint": "### 样例解释\n\n第三只蚂蚁在爬行 $1$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $2$ 个单位时间到西侧树木；\n\n第二只蚂蚁在爬行 $1$ 个单位时间后遇见第三只蚂蚁并掉头，再爬行 $1$ 个单位时间后遇见第一只蚂蚁并掉头，再爬行 $3$ 个单位时间到西侧树木；\n\n第一只蚂蚁在爬行 $2$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $3$ 个单位时间到东侧树木。\n\n### 子任务\n\n子任务 $1$（$17$ 分）\n- $1\\le N\\le 10, L\\le 10^5$。\n\n子任务 $2$（$19$ 分）\n- $1\\le N\\le 100, L\\le 10^9$。\n\n子任务 $3$（$27$ 分）\n- $1\\le N\\le 5000, L\\le 10^9$。\n\n子任务 $4$（$37$ 分）\n- $1\\le N\\le 10^5, L\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 蚂蚁", "background": "", "description": "在东西排布的两棵树之间悬挂着一条长为 $L$ 的细绳，有 $N$ 只蚂蚁在这条绳上。这些蚂蚁希望通过绳子爬到任何一棵树上，但这条绳太细了，导致两只蚂蚁不能并排爬行，也不能交错而过。\n\n它们想到了一个方法：每只蚂蚁都以每单位时间移动一个单位距离的速度不断向前爬，当迎面碰到另一只蚂蚁时，两只蚂蚁都将立即掉头并继续向前爬。现在，蚂蚁们想知道自己是否能爬下绳子，如果能，它们还希望知道自己爬下绳子所花的时间。为了方便，我们按初始时位置从东到西的顺序对蚂蚁从 $1$ 开始编号。", "inputFormat": "输入的第一行包含两个正整数 $N, L$，保证 $N\\le 10^5, L\\le 10^9$，且 $N<L$。\n\n输入的第二行包含 $N$ 个正整数，第 $i$ 个数 $p_i$ 表示第 $i$ 只蚂蚁到东侧树木的距离，保证 $p_i$ 随 $i$ 增大严格递增，且 $0<p_i<L$。\n\n输入的第三行包含 $N$ 个整数，第 $i$ 个数 $d_i$ 若为 $1$ 则表示第 $i$ 只蚂蚁一开始朝向西侧，为 $0$ 则表示朝向东侧。", "outputFormat": "输出仅一行，包含 $N$ 个数，第 $i$ 个数表示第 $i$ 只蚂蚁爬下绳子所花时间，四舍五入保留到整数。若第 $i$ 只蚂蚁无法爬下绳子，则输出的第 $i$ 个数为 $-1$。", "hint": "### 样例解释\n\n第三只蚂蚁在爬行 $1$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $2$ 个单位时间到西侧树木；\n\n第二只蚂蚁在爬行 $1$ 个单位时间后遇见第三只蚂蚁并掉头，再爬行 $1$ 个单位时间后遇见第一只蚂蚁并掉头，再爬行 $3$ 个单位时间到西侧树木；\n\n第一只蚂蚁在爬行 $2$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $3$ 个单位时间到东侧树木。\n\n### 子任务\n\n子任务 $1$（$17$ 分）\n- $1\\le N\\le 10, L\\le 10^5$。\n\n子任务 $2$（$19$ 分）\n- $1\\le N\\le 100, L\\le 10^9$。\n\n子任务 $3$（$27$ 分）\n- $1\\le N\\le 5000, L\\le 10^9$。\n\n子任务 $4$（$37$ 分）\n- $1\\le N\\le 10^5, L\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6608", "type": "P", "difficulty": 5, "samples": [["1", "2\n1 2"], ["5", "4\n1 2 2 4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "Special Judge", "构造", "Code+"], "title": "[Code+#7] 神秘序列", "background": null, "description": "E.Space 做了一个梦。\n\n他梦到了一个神秘的序列，有人告诉他，这个序列和明天的考试有一些密切的关联。\n\n他决心要把这个序列记住。可醒来之后，E.Space 发现自己没有记住这个序列，甚至连序列的长度都不记得了。不过，他记得这个序列有一个神奇的性质。\n\n在梦中，E.Space 对它进行了一系列的操作。记这个序列为 $a_1, a_2, \\dots, a_n$，开始时它满足 $\\forall 1\\le i\\le n, a_i \\ge 0$，并且 $a_n \\neq 0$。\n\n之后，E.Space 在每次操作时选择一个满足 $a_i=i$ 的 $i$，将 $a_i$ 变为 $0$，并且将 $a_1, a_2, \\dots, a_{i-1}$ 分别变为原来的值加 $1$。\n\nE.Space 记得，在 $n+k$ 次操作之后，这个序列变成了全 $0$ 序列，即 $a_1=a_2=\\cdots =a_n= 0$。\n\nE.Space 知道可能有多个序列满足这个性质，但是他还是希望你告诉他一种可能的情况，因为，说不定所有满足这个性质的序列都可以在考试时派上用场呢。\n\n他的考试成绩就交给你了。", "inputFormat": "输入一行一个正整数 $k$。", "outputFormat": "如果你找到了满足 E.Space 描述的性质的序列，那么输出两行。\n\n第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数，$a_1, a_2, \\dots, a_n$，其中 $a_n \\neq 0$，表示这个神秘序列。\n\n如果存在多种可能的神秘序列，只需输出任意一种。如果不存在这样的神秘序列，输出一行 `Daydream!` 来告诉 E.Space 他在做白日梦。", "hint": "子任务 $1$（$10$ 分）：$k\\le 6$\n\n子任务 $2$（$25$ 分）：$k\\le 10^6$\n\n子任务 $3$（$30$ 分）：$k\\le 10^{11}$，如果有解则保证存在一个解满足 $\\forall 1\\le i< n, a_i \\neq i$\n\n子任务 $4$（$28$ 分）：$k\\le 10^{11}$\n\n子任务 $5$（$7$ 分）：$k\\le 10^{12}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 神秘序列", "background": null, "description": "E.Space 做了一个梦。\n\n他梦到了一个神秘的序列，有人告诉他，这个序列和明天的考试有一些密切的关联。\n\n他决心要把这个序列记住。可醒来之后，E.Space 发现自己没有记住这个序列，甚至连序列的长度都不记得了。不过，他记得这个序列有一个神奇的性质。\n\n在梦中，E.Space 对它进行了一系列的操作。记这个序列为 $a_1, a_2, \\dots, a_n$，开始时它满足 $\\forall 1\\le i\\le n, a_i \\ge 0$，并且 $a_n \\neq 0$。\n\n之后，E.Space 在每次操作时选择一个满足 $a_i=i$ 的 $i$，将 $a_i$ 变为 $0$，并且将 $a_1, a_2, \\dots, a_{i-1}$ 分别变为原来的值加 $1$。\n\nE.Space 记得，在 $n+k$ 次操作之后，这个序列变成了全 $0$ 序列，即 $a_1=a_2=\\cdots =a_n= 0$。\n\nE.Space 知道可能有多个序列满足这个性质，但是他还是希望你告诉他一种可能的情况，因为，说不定所有满足这个性质的序列都可以在考试时派上用场呢。\n\n他的考试成绩就交给你了。", "inputFormat": "输入一行一个正整数 $k$。", "outputFormat": "如果你找到了满足 E.Space 描述的性质的序列，那么输出两行。\n\n第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数，$a_1, a_2, \\dots, a_n$，其中 $a_n \\neq 0$，表示这个神秘序列。\n\n如果存在多种可能的神秘序列，只需输出任意一种。如果不存在这样的神秘序列，输出一行 `Daydream!` 来告诉 E.Space 他在做白日梦。", "hint": "子任务 $1$（$10$ 分）：$k\\le 6$\n\n子任务 $2$（$25$ 分）：$k\\le 10^6$\n\n子任务 $3$（$30$ 分）：$k\\le 10^{11}$，如果有解则保证存在一个解满足 $\\forall 1\\le i< n, a_i \\neq i$\n\n子任务 $4$（$28$ 分）：$k\\le 10^{11}$\n\n子任务 $5$（$7$ 分）：$k\\le 10^{12}$", "locale": "zh-CN"}}}
{"pid": "P6610", "type": "P", "difficulty": 7, "samples": [["1\n5 0", "9"]], "limits": {"time": [1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#7] 同余方程", "background": "", "description": "这就是一些朴素的二次同余方程:)\n\n------------------\n\n给出若干组正整数 $p$ 和 $x$，求方程 $a^2+b^2\\equiv x {\\pmod p}$ 关于 $a$ 和 $b$ **在模 $\\boldsymbol p$ 意义下**解的组数，其中 $p$ 是奇数，且不包含平方因子。", "inputFormat": "第一行包含一个正整数 $n$，表示询问个数。\n\n接下来 $n$ 行每包含两个用空格分隔的正整数 $p$ 和 $x$，保证 $0 \\le x \\le p - 1$，$p$ 是一个奇数，且对任意奇素数 $q\\mid p$，都有 $q^2 \\nmid p$。", "outputFormat": "输出包含 $n$ 行，第 $i$ 行包含一个正整数，表示第 $i$ 个方程解的组数。", "hint": "### 样例解释\n\n$9$ 组解分别为 $(a,b) = (0,0),(1,2),(1,3),(2,1),(2,4),(3,1),(3,4),(4,2),(4,3)$。\n\n### 子任务\n\n每个测试点的分值为 $5$ 分。\n\n**对于所有数据**，$n\\le 10^5$，$p\\le10^7$，且 $2\\nmid p$，$\\forall$ 奇素数 $q\\mid p，q^2\\nmid p$，$0\\le x\\le p-1$。\n\n| 测试点编号 | $n\\le$ | $p\\le$ | 附加性质     |\n| :--------: | :----: | :----: | :------------: |\n|    $1$     |  $5$   | $100$  | $p$ 为奇素数 |\n|    $2$     |  $10$  | $10^3$ | $p$ 为奇素数 |\n|    $3$     |  $10$  | $10^3$ |              |\n|    $4$     |  $50$  | $10^4$ | $p$ 为奇素数 |\n|    $5$     | $100$  | $10^4$ | $p$ 为奇素数 |\n|    $6$     |  $50$  | $10^4$ |              |\n|    $7$     | $100$  | $10^4$ |              |\n|    $8$     | $100$  | $10^4$ |              |\n|    $9$     | $10^3$ | $10^6$ | $p$ 为奇素数 |\n|    $10$    | $10^3$ | $10^6$ |              |\n|    $11$    | $10^3$ | $10^6$ |              |\n|    $12$    | $10^5$ | $10^6$ | $p$ 为奇素数 |\n|    $13$    | $10^5$ | $10^6$ |              |\n|    $14$    | $10^5$ | $10^6$ |              |\n|    $15$    | $10^5$ | $10^6$ |              |\n|    $16$    | $10^5$ | $10^6$ |              |\n|    $17$    | $10^5$ | $10^7$ |              |\n|    $18$    | $10^5$ | $10^7$ |              |\n|    $19$    | $10^5$ | $10^7$ |              |\n|    $20$    | $10^5$ | $10^7$ |              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 同余方程", "background": "", "description": "这就是一些朴素的二次同余方程:)\n\n------------------\n\n给出若干组正整数 $p$ 和 $x$，求方程 $a^2+b^2\\equiv x {\\pmod p}$ 关于 $a$ 和 $b$ **在模 $\\boldsymbol p$ 意义下**解的组数，其中 $p$ 是奇数，且不包含平方因子。", "inputFormat": "第一行包含一个正整数 $n$，表示询问个数。\n\n接下来 $n$ 行每包含两个用空格分隔的正整数 $p$ 和 $x$，保证 $0 \\le x \\le p - 1$，$p$ 是一个奇数，且对任意奇素数 $q\\mid p$，都有 $q^2 \\nmid p$。", "outputFormat": "输出包含 $n$ 行，第 $i$ 行包含一个正整数，表示第 $i$ 个方程解的组数。", "hint": "### 样例解释\n\n$9$ 组解分别为 $(a,b) = (0,0),(1,2),(1,3),(2,1),(2,4),(3,1),(3,4),(4,2),(4,3)$。\n\n### 子任务\n\n每个测试点的分值为 $5$ 分。\n\n**对于所有数据**，$n\\le 10^5$，$p\\le10^7$，且 $2\\nmid p$，$\\forall$ 奇素数 $q\\mid p，q^2\\nmid p$，$0\\le x\\le p-1$。\n\n| 测试点编号 | $n\\le$ | $p\\le$ | 附加性质     |\n| :--------: | :----: | :----: | :------------: |\n|    $1$     |  $5$   | $100$  | $p$ 为奇素数 |\n|    $2$     |  $10$  | $10^3$ | $p$ 为奇素数 |\n|    $3$     |  $10$  | $10^3$ |              |\n|    $4$     |  $50$  | $10^4$ | $p$ 为奇素数 |\n|    $5$     | $100$  | $10^4$ | $p$ 为奇素数 |\n|    $6$     |  $50$  | $10^4$ |              |\n|    $7$     | $100$  | $10^4$ |              |\n|    $8$     | $100$  | $10^4$ |              |\n|    $9$     | $10^3$ | $10^6$ | $p$ 为奇素数 |\n|    $10$    | $10^3$ | $10^6$ |              |\n|    $11$    | $10^3$ | $10^6$ |              |\n|    $12$    | $10^5$ | $10^6$ | $p$ 为奇素数 |\n|    $13$    | $10^5$ | $10^6$ |              |\n|    $14$    | $10^5$ | $10^6$ |              |\n|    $15$    | $10^5$ | $10^6$ |              |\n|    $16$    | $10^5$ | $10^6$ |              |\n|    $17$    | $10^5$ | $10^7$ |              |\n|    $18$    | $10^5$ | $10^7$ |              |\n|    $19$    | $10^5$ | $10^7$ |              |\n|    $20$    | $10^5$ | $10^7$ |              |", "locale": "zh-CN"}}}
{"pid": "P6611", "type": "P", "difficulty": 7, "samples": [["6\n1 2 5 4 3 6\n4\n1 8\n3 6\n5 10\n2 7", "3\n0\n1\n1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#7] 六元环", "background": "", "description": "qwqwq。\n\n------------\n\n给定序列 $a_0, a_1, \\dots, a_n, a_{n+1}$；满足 $a_0 = a_{n+1} = +\\infty$，$a_1, a_2, \\dots, a_n$ 在输入中给出；\n\n对 $1\\le x\\le n$，称 $\\max_{0\\le i<x, a_i\\ge a_x} i$ 和 $x$ 是相邻的，且 $\\min_{x< i\\le n+1, a_i>a_x} i$ 和 $x$ 是**相邻**的；如果 $x$ 和 $y$ 相邻，则 $y$ 和 $x$ 也相邻；\n\n如果 $0 \\le b_1, b_2, b_3, b_4, b_5, b_6\\le n+1$，且 $b_i$ 和 $b_{i+1}$ 相邻，$b_1$ 和 $b_6$ 相邻，$b_i$ 互不相同，则称集合 $\\{b_1,b_2,b_3,b_4,b_5,b_6\\}$ 是一个六元环（即判断两个六元环是否相同时，不考虑 $b_i$ 的顺序）。\n\n共有 $m$ 次修改操作，每次修改操作给出 $x\\ y$，将 $a_x$ 改为 $a_x + y$；每次修改后要求输出六元环的个数；\n\n以上提到的所有数值为整数，且 $1\\le n, m\\le 5\\times 10^5, 1\\le x\\le n,1\\le a_i, y\\le 10^9$。", "inputFormat": "第一行一个整数 $n$；\n\n第二行 $n$ 个整数表示 $a_1, a_2, \\dots, a_n$；\n\n第三行一个整数 $m$；接下来 $m$ 行，每行两个整数 $x\\ y$ 表示一次修改操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次修改后的六元环个数。", "hint": "| 子任务 | 分数 |              限制              |\n| :----: | :--: | :----------------------------: |\n|  $1$   | $10$ |      $\\max (n,m)\\le 100$       |\n|  $2$   | $10$ |      $\\max (n,m)\\le 2000$      |\n|  $3$   | $20$ |     $\\max (n,m)\\le 50000$      |\n|  $4$   | $20$ | for each operation, $x\\le 100$ |\n|  $5$   | $20$ | for each operation, $y\\le 10$  |\n|  $6$   | $20$ |                                |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 六元环", "background": "", "description": "qwqwq。\n\n------------\n\n给定序列 $a_0, a_1, \\dots, a_n, a_{n+1}$；满足 $a_0 = a_{n+1} = +\\infty$，$a_1, a_2, \\dots, a_n$ 在输入中给出；\n\n对 $1\\le x\\le n$，称 $\\max_{0\\le i<x, a_i\\ge a_x} i$ 和 $x$ 是相邻的，且 $\\min_{x< i\\le n+1, a_i>a_x} i$ 和 $x$ 是**相邻**的；如果 $x$ 和 $y$ 相邻，则 $y$ 和 $x$ 也相邻；\n\n如果 $0 \\le b_1, b_2, b_3, b_4, b_5, b_6\\le n+1$，且 $b_i$ 和 $b_{i+1}$ 相邻，$b_1$ 和 $b_6$ 相邻，$b_i$ 互不相同，则称集合 $\\{b_1,b_2,b_3,b_4,b_5,b_6\\}$ 是一个六元环（即判断两个六元环是否相同时，不考虑 $b_i$ 的顺序）。\n\n共有 $m$ 次修改操作，每次修改操作给出 $x\\ y$，将 $a_x$ 改为 $a_x + y$；每次修改后要求输出六元环的个数；\n\n以上提到的所有数值为整数，且 $1\\le n, m\\le 5\\times 10^5, 1\\le x\\le n,1\\le a_i, y\\le 10^9$。", "inputFormat": "第一行一个整数 $n$；\n\n第二行 $n$ 个整数表示 $a_1, a_2, \\dots, a_n$；\n\n第三行一个整数 $m$；接下来 $m$ 行，每行两个整数 $x\\ y$ 表示一次修改操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次修改后的六元环个数。", "hint": "| 子任务 | 分数 |              限制              |\n| :----: | :--: | :----------------------------: |\n|  $1$   | $10$ |      $\\max (n,m)\\le 100$       |\n|  $2$   | $10$ |      $\\max (n,m)\\le 2000$      |\n|  $3$   | $20$ |     $\\max (n,m)\\le 50000$      |\n|  $4$   | $20$ | for each operation, $x\\le 100$ |\n|  $5$   | $20$ | for each operation, $y\\le 10$  |\n|  $6$   | $20$ |                                |", "locale": "zh-CN"}}}
{"pid": "P6612", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "POI（波兰）", "交互题", "Special Judge", "O2优化"], "title": "[POI 2012] LIC-Bidding", "background": "**本题为交互题**。\n\n**本题 checker 中含有正解, 故不下发**。", "description": "A 和 B 两个人在玩一个游戏，这个游戏是他们轮流操作一对整数 $(x,y)$。\n\n初始时 $(x,y)=(1,0)$，可以进行三种操作：\n\n1. 将 $(x,y)$ 变成 $(1,x+y)$。\n2. 将 $(x,y)$ 变成 $(2x,y)$。\n3. 将 $(x,y)$ 变成 $(3x,y)$。\n\n给定正整数 $n$。在 $x+y\\ge n$ 时就不能进行后两种操作。如果某个人操作后 $y\\ge n$，他就输掉了。\n\n保证给出的 $n$ 为先手必胜的，你需要提供一种先手必胜的方案。例如 $n = 3$ 时，先手选择操作 3，后手只能选择操作 1 然后输，所以 $n = 3$ 时先手必胜。\n\n**交互题**，你需要实现一个函数 ``extern \"C\" int _opt(int n, int x, int y)``，该函数的返回值是一个值为 $1$，$2$ 或 $3$ 的整数，表示现在数对是 $(x, y)$，参数是 $n$ 且轮到你操作时，你会选择的操作。", "inputFormat": "", "outputFormat": "", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n\\leq 30000$。\n\n### 说明\n\n样例交互库见附件。与选手程序在本地一起编译后可以通过标准输入来模拟 spj 与选手程序进行交互。  \n当交互库输出 `-2 -2` 并退出时，说明选手程序正确。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2012] LIC-Bidding", "background": "**本题为交互题**。\n\n**本题 checker 中含有正解, 故不下发**。", "description": "A 和 B 两个人在玩一个游戏，这个游戏是他们轮流操作一对整数 $(x,y)$。\n\n初始时 $(x,y)=(1,0)$，可以进行三种操作：\n\n1. 将 $(x,y)$ 变成 $(1,x+y)$。\n2. 将 $(x,y)$ 变成 $(2x,y)$。\n3. 将 $(x,y)$ 变成 $(3x,y)$。\n\n给定正整数 $n$。在 $x+y\\ge n$ 时就不能进行后两种操作。如果某个人操作后 $y\\ge n$，他就输掉了。\n\n保证给出的 $n$ 为先手必胜的，你需要提供一种先手必胜的方案。例如 $n = 3$ 时，先手选择操作 3，后手只能选择操作 1 然后输，所以 $n = 3$ 时先手必胜。\n\n**交互题**，你需要实现一个函数 ``extern \"C\" int _opt(int n, int x, int y)``，该函数的返回值是一个值为 $1$，$2$ 或 $3$ 的整数，表示现在数对是 $(x, y)$，参数是 $n$ 且轮到你操作时，你会选择的操作。", "inputFormat": "", "outputFormat": "", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n\\leq 30000$。\n\n### 说明\n\n样例交互库见附件。与选手程序在本地一起编译后可以通过标准输入来模拟 spj 与选手程序进行交互。  \n当交互库输出 `-2 -2` 并退出时，说明选手程序正确。", "locale": "zh-CN"}}}
{"pid": "P6613", "type": "P", "difficulty": 7, "samples": [["9\n2 9 8 7 3 6 5 4 1 12\n23 9 8 7 4 6 1 3 2 5 ", "1 25 34 332748429 124783260 22560 624092696 904826719 284383572 50973515"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化", "微积分", "导数", "快速傅里叶变换 FFT"], "title": "一阶微分方程", "background": "题目中 $F'(x)$ 右侧的式子可以换成其它的，这里为了方便测试，是固定的。 ", "description": "已知多项式 $F(x),A(x),B(x)$，满足：\n\n$$\\frac{\\text dF(x)}{\\text dx} \\equiv A(x)\\text e^{F(x)-1}+B(x) \\pmod{x^n}$$\n且 $F(0)=1$。\n\n给定 $A(x),B(x)$，请求出 $F(x)$ 的前 $n$ 次项系数。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$，表示 $A(x),B(x)$ 的次数。  \n第二行 $n+1$ 个整数，由低到高表示 $A(x)$ 的系数。  \n第三行 $n+1$ 个整数，由低到高表示 $B(x)$ 的系数。", "outputFormat": "输出一行 $n+1$ 个整数，由低到高表示 $F(x)$ 的系数。", "hint": "### 数据规模与约定\n对于 $30\\%$ 的数据，$1\\le n \\le 5000$；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$。\n\n保证所有输入都在 $[0,998244353)$ 范围内。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一阶微分方程", "background": "题目中 $F'(x)$ 右侧的式子可以换成其它的，这里为了方便测试，是固定的。 ", "description": "已知多项式 $F(x),A(x),B(x)$，满足：\n\n$$\\frac{\\text dF(x)}{\\text dx} \\equiv A(x)\\text e^{F(x)-1}+B(x) \\pmod{x^n}$$\n且 $F(0)=1$。\n\n给定 $A(x),B(x)$，请求出 $F(x)$ 的前 $n$ 次项系数。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$，表示 $A(x),B(x)$ 的次数。  \n第二行 $n+1$ 个整数，由低到高表示 $A(x)$ 的系数。  \n第三行 $n+1$ 个整数，由低到高表示 $B(x)$ 的系数。", "outputFormat": "输出一行 $n+1$ 个整数，由低到高表示 $F(x)$ 的系数。", "hint": "### 数据规模与约定\n对于 $30\\%$ 的数据，$1\\le n \\le 5000$；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$。\n\n保证所有输入都在 $[0,998244353)$ 范围内。\n", "locale": "zh-CN"}}}
{"pid": "P6614", "type": "P", "difficulty": 3, "samples": [["2 1 1\n0 1\n1 0", "1 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge"], "title": "蛋糕 Cake", "background": ">   道不同不相为谋。\n\n$\\text{.cilohocohc}$ 喜欢吃蛋糕，尤其是巧克力蛋糕。\n\n$\\text{LeverImmy}$ 送了一个超级大的巧克力蛋糕给她做生日礼物，蛋糕上面点缀着许多巧克力布丁。\n\n$\\text{.cilohocohc}$ 一个人肯定是吃不完那么大一个蛋糕的，于是她要 $\\text{LeverImmy}$ 帮她蛋糕切成两块，使得两块蛋糕上的布丁数之比为 $a : b$。\n\n蛋糕可以抽象为一个二维平面；而做蛋糕的作坊很缺心眼，因此每个布丁都很小，可以看成二维平面上的一个 **整点**。\n\n$\\text{LeverImmy}$ 的刀技非常高超，所以他准备秀一下，他只会以一个 **斜率不小于 $1$ ，不大于 $10^{12}$ 的一次函数图像** 为轮廓在蛋糕上划一刀。\n\n他想考考聪明的你，如果是你，你会怎么划？\n", "description": "已知 $n$ 以及 $a, b$，求一个一次函数 $f(x) = k(x - x_0) + y_0 (1 \\le k \\le 10^{12})$，使得 $f(x)$ 将平面内的 $n$ 个点恰好分为个数之比 $a : b$ 的两部分。\n\n如果你不知道一次函数为什么要这样表示，这里有 [点斜式](https://baike.baidu.com/item/%E7%82%B9%E6%96%9C%E5%BC%8F/921468?fr=aladdin) 的定义。\n", "inputFormat": "第一行三个整数 $n, a, b$，表示点的个数以及你要分成两部分的比例。\n\n接下来的 $n$ 行，第 $i$ 行两个整数 $x_i, y_i$ 表示平面上的点 $(x_i, y_i)$。\n\n数据保证 **任意两个点不重合**。\n", "outputFormat": "输出数据共一行三个整数，分别表示题目中的 $k, x_0, y_0$。\n\n请务必保证 $1 \\le k \\le 10^{12}, -10^5 \\le x_0, y_0 \\le 10^{5}$。\n\n如果有点 **恰好** 落在你给的直线上，我们视作其位于直线 **上方**。\n", "hint": "本题采用 **捆绑测试**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $n \\in \\{2, 3\\}$；\n\n$\\text{Subtask 2 (30 pts)}:$ 保证 $\\left|x_i\\right|, \\left|y_i\\right| \\le 10$；\n\n$\\text{Subtask 3 (60 pts)}:$ 保证 $2 \\le n \\le 10^5$，$0 \\le \\left|x_i\\right|, \\left|y_i\\right| \\le 10^5$。\n\n对于所有数据，保证 $(a + b) | n$ 且 $ab \\neq 0$。\n\n---\n\n#### Special Judge\n\n**本题采用 $\\text{Special Judge}$。**\n\nspj 返回信息一览：\n\n`Your answer is correct!`：你的结果是正确的；\n\n`Your answer is wrong, expected ratio as a : b, found A : B.`：你的函数有问题，它把所有的点分割成了 $A : B$ 的两部分而不是 $a : b$ 的两部分；\n\n`Oops, data out of range!`：你所给出的点的横纵坐标，或是斜率，在题目要求的范围外。\n\n注意，你在 **赛时** 并不能看到 Special Judge 的返回结果。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "蛋糕 Cake", "background": ">   道不同不相为谋。\n\n$\\text{.cilohocohc}$ 喜欢吃蛋糕，尤其是巧克力蛋糕。\n\n$\\text{LeverImmy}$ 送了一个超级大的巧克力蛋糕给她做生日礼物，蛋糕上面点缀着许多巧克力布丁。\n\n$\\text{.cilohocohc}$ 一个人肯定是吃不完那么大一个蛋糕的，于是她要 $\\text{LeverImmy}$ 帮她蛋糕切成两块，使得两块蛋糕上的布丁数之比为 $a : b$。\n\n蛋糕可以抽象为一个二维平面；而做蛋糕的作坊很缺心眼，因此每个布丁都很小，可以看成二维平面上的一个 **整点**。\n\n$\\text{LeverImmy}$ 的刀技非常高超，所以他准备秀一下，他只会以一个 **斜率不小于 $1$ ，不大于 $10^{12}$ 的一次函数图像** 为轮廓在蛋糕上划一刀。\n\n他想考考聪明的你，如果是你，你会怎么划？\n", "description": "已知 $n$ 以及 $a, b$，求一个一次函数 $f(x) = k(x - x_0) + y_0 (1 \\le k \\le 10^{12})$，使得 $f(x)$ 将平面内的 $n$ 个点恰好分为个数之比 $a : b$ 的两部分。\n\n如果你不知道一次函数为什么要这样表示，这里有 [点斜式](https://baike.baidu.com/item/%E7%82%B9%E6%96%9C%E5%BC%8F/921468?fr=aladdin) 的定义。\n", "inputFormat": "第一行三个整数 $n, a, b$，表示点的个数以及你要分成两部分的比例。\n\n接下来的 $n$ 行，第 $i$ 行两个整数 $x_i, y_i$ 表示平面上的点 $(x_i, y_i)$。\n\n数据保证 **任意两个点不重合**。\n", "outputFormat": "输出数据共一行三个整数，分别表示题目中的 $k, x_0, y_0$。\n\n请务必保证 $1 \\le k \\le 10^{12}, -10^5 \\le x_0, y_0 \\le 10^{5}$。\n\n如果有点 **恰好** 落在你给的直线上，我们视作其位于直线 **上方**。\n", "hint": "本题采用 **捆绑测试**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $n \\in \\{2, 3\\}$；\n\n$\\text{Subtask 2 (30 pts)}:$ 保证 $\\left|x_i\\right|, \\left|y_i\\right| \\le 10$；\n\n$\\text{Subtask 3 (60 pts)}:$ 保证 $2 \\le n \\le 10^5$，$0 \\le \\left|x_i\\right|, \\left|y_i\\right| \\le 10^5$。\n\n对于所有数据，保证 $(a + b) | n$ 且 $ab \\neq 0$。\n\n---\n\n#### Special Judge\n\n**本题采用 $\\text{Special Judge}$。**\n\nspj 返回信息一览：\n\n`Your answer is correct!`：你的结果是正确的；\n\n`Your answer is wrong, expected ratio as a : b, found A : B.`：你的函数有问题，它把所有的点分割成了 $A : B$ 的两部分而不是 $a : b$ 的两部分；\n\n`Oops, data out of range!`：你所给出的点的横纵坐标，或是斜率，在题目要求的范围外。\n\n注意，你在 **赛时** 并不能看到 Special Judge 的返回结果。\n", "locale": "zh-CN"}}}
{"pid": "P6615", "type": "P", "difficulty": 5, "samples": [["6\n1 4 2 8 5 7\n1 2 3\n4 1 2\n1 5 1\n2 3 4\n3 6 1", "198"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "草莓 Strawberry", "background": "小 M 很喜欢草莓。\n\n草莓可以抽象为一棵树 $T$。我也不知道为什么可以，但草莓甚至可以飞，抽象成一棵树想必问题也不大吧。", "description": "给定一棵树 $T$，点和边均有权值。\n\n一条简单路径是一条不重复经过任意一个点的路径。可以证明，两个节点 $u$ 和 $v$ 之间的简单路径是唯一的，我们将其记为 $P(u,v)$。一条路径的长度是它所包含的所有边的权值和。\n\n你有两个集合 $S$ 和 $G$。\n\n在一开始，你必须选择一个点作为 **当前点** 并且将其加入集合 $S$。接下来可以进行任意次操作，一次操作的形式如下：\n\n假设你的 **当前点** 为 $u$，你可以选择一个节点 $v$，使得 $v \\neq u$，然后将你的 **当前点** 更新为 $v$，并且将点 $v$ 加入集合 $S$，将路径 $P(u,v)$ 加入集合 $G$。\n\n在你进行完所有操作之后，你得到的收益为 $S$ 中所有点的点权和 $\\times$ $G$ 中所有路径的长度的最小值。如果 $G$ 为空，我们认为第二项的值为 $0$。\n\n注意 $S$ 和 $G$ 都是 **不可重集**，这意味着，即使你多次将某个点加入集合 $S$，最终在计算点权时，也只会被计算一次。\n\n求得到的收益的最大值。", "inputFormat": "第一行一个整数 $n$。 \n\n接下来一行 $n$ 个整数 $a_1,a_2 \\ldots a_n$，表示这 $n$ 个节点的点权。\n\n接下来 $n - 1$ 行，每行三个整数 $u,v,w$，表示 $u$ 到 $v$ 有一条权值为 $w$ 的边。", "outputFormat": "输出一个整数，所求最大收益。", "hint": "本题采用 **捆绑测试**。\n\n| 子任务编号 |      $n$      |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--: |\n|     1      |   $\\leq 10$   |                  |  5   |\n|     2      |  $\\leq 100$   |                  |  13  |\n|     3      |  $\\leq 900$   |                  |  8   |\n|     4      | $\\leq 214748$ | 树的形态是一条链 |  13  |\n|     5      | $\\leq 214748$ |     $a_i=0$      |  1   |\n|     6      | $\\leq 214748$ |                  |  60  |\n\n\n对于所有数据，保证 $1 \\leq n \\leq 214748, 0 \\leq a_i \\leq 10000$，$1 \\leq w \\leq 10000$。\n\n---\n\n#### 样例 #1 解释\n\n第一组样例给定的图如下。  \n\n[![EWyWjg.png](https://s2.ax1x.com/2019/05/11/EWyWjg.png)](https://imgchr.com/i/EWyWjg)  \n", "locale": "zh-CN", "translations": {"en": {"title": "Strawberry Strawberry", "background": "Little M likes strawberries very much.\n\nA strawberry can be abstracted as a tree $T$. I do not know why it works, but strawberries can even fly, so it should not be a big problem to abstract them as a tree.", "description": "Given a tree $T$, both vertices and edges have weights.\n\nA simple path is a path that does not pass through any vertex more than once. It can be proved that the simple path between two nodes $u$ and $v$ is unique; we denote it by $P(u,v)$. The length of a path is the sum of the weights of all edges on it.\n\nYou have two sets $S$ and $G$.\n\nAt the beginning, you must choose one node as the **current node** and add it to the set $S$. Then you may perform any number of operations. One operation is as follows:\n\nSuppose your **current node** is $u$. You may choose a node $v$ such that $v \\neq u$, then update your **current node** to $v$, add node $v$ to the set $S$, and add the path $P(u,v)$ to the set $G$.\n\nAfter you finish all operations, the profit you get is:\nthe minimum of (the sum of vertex weights of all nodes in $S$) $\\times$ (the sum of lengths of all paths in $G$).\nIf $G$ is empty, we consider the value of the second term to be $0$.\n\nNote that both $S$ and $G$ are **sets, not multisets**. This means that even if you add the same node to $S$ multiple times, it is counted only once when computing the vertex-weight sum.\n\nFind the maximum possible profit.", "inputFormat": "The first line contains an integer $n$.\n\nThe next line contains $n$ integers $a_1,a_2 \\ldots a_n$, representing the vertex weights of these $n$ nodes.\n\nThe next $n - 1$ lines each contain three integers $u,v,w$, indicating that there is an edge of weight $w$ between $u$ and $v$.", "outputFormat": "Output one integer, the maximum profit.", "hint": "This problem uses **bundled testdata**.\n\n| Subtask ID |      $n$      | Special Property | Score |\n| :--------: | :-----------: | :--------------: | :---: |\n|     1      |   $\\leq 10$   |                  |   5   |\n|     2      |  $\\leq 100$   |                  |  13   |\n|     3      |  $\\leq 900$   |                  |   8   |\n|     4      | $\\leq 214748$ | The tree is a chain. |  13  |\n|     5      | $\\leq 214748$ |     $a_i=0$      |   1   |\n|     6      | $\\leq 214748$ |                  |  60   |\n\nFor all data, it is guaranteed that $1 \\leq n \\leq 214748$, $0 \\leq a_i \\leq 10000$, and $1 \\leq w \\leq 10000$.\n\n---\n\n#### Sample #1 Explanation\n\nThe graph given in the first sample is as follows.\n\n[![EWyWjg.png](https://s2.ax1x.com/2019/05/11/EWyWjg.png)](https://imgchr.com/i/EWyWjg)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "草莓 Strawberry", "background": "小 M 很喜欢草莓。\n\n草莓可以抽象为一棵树 $T$。我也不知道为什么可以，但草莓甚至可以飞，抽象成一棵树想必问题也不大吧。", "description": "给定一棵树 $T$，点和边均有权值。\n\n一条简单路径是一条不重复经过任意一个点的路径。可以证明，两个节点 $u$ 和 $v$ 之间的简单路径是唯一的，我们将其记为 $P(u,v)$。一条路径的长度是它所包含的所有边的权值和。\n\n你有两个集合 $S$ 和 $G$。\n\n在一开始，你必须选择一个点作为 **当前点** 并且将其加入集合 $S$。接下来可以进行任意次操作，一次操作的形式如下：\n\n假设你的 **当前点** 为 $u$，你可以选择一个节点 $v$，使得 $v \\neq u$，然后将你的 **当前点** 更新为 $v$，并且将点 $v$ 加入集合 $S$，将路径 $P(u,v)$ 加入集合 $G$。\n\n在你进行完所有操作之后，你得到的收益为 $S$ 中所有点的点权和 $\\times$ $G$ 中所有路径的长度的最小值。如果 $G$ 为空，我们认为第二项的值为 $0$。\n\n注意 $S$ 和 $G$ 都是 **不可重集**，这意味着，即使你多次将某个点加入集合 $S$，最终在计算点权时，也只会被计算一次。\n\n求得到的收益的最大值。", "inputFormat": "第一行一个整数 $n$。 \n\n接下来一行 $n$ 个整数 $a_1,a_2 \\ldots a_n$，表示这 $n$ 个节点的点权。\n\n接下来 $n - 1$ 行，每行三个整数 $u,v,w$，表示 $u$ 到 $v$ 有一条权值为 $w$ 的边。", "outputFormat": "输出一个整数，所求最大收益。", "hint": "本题采用 **捆绑测试**。\n\n| 子任务编号 |      $n$      |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--: |\n|     1      |   $\\leq 10$   |                  |  5   |\n|     2      |  $\\leq 100$   |                  |  13  |\n|     3      |  $\\leq 900$   |                  |  8   |\n|     4      | $\\leq 214748$ | 树的形态是一条链 |  13  |\n|     5      | $\\leq 214748$ |     $a_i=0$      |  1   |\n|     6      | $\\leq 214748$ |                  |  60  |\n\n\n对于所有数据，保证 $1 \\leq n \\leq 214748, 0 \\leq a_i \\leq 10000$，$1 \\leq w \\leq 10000$。\n\n---\n\n#### 样例 #1 解释\n\n第一组样例给定的图如下。  \n\n[![EWyWjg.png](https://s2.ax1x.com/2019/05/11/EWyWjg.png)](https://imgchr.com/i/EWyWjg)  \n", "locale": "zh-CN"}}}
{"pid": "P6616", "type": "P", "difficulty": 6, "samples": [["4\n3\n1 1\n1 0\n2 1\n", "7"], ["15\n4\n5 1\n2 1\n4 0\n4 1\n", "15424"], ["3\n3\n1 1\n1 0\n1 1", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "环 Rings", "background": "> 一九二九不出手，三九四九冰上走，五九六九隔河看杨柳；\n>\n> 七九河开，八九雁来，九九加一九，耕牛遍地走。\n\n「九」自古以来就是一个奇妙的数字，而你今天要解决的问题，也与「九」有关。", "description": "你有一个 $n$ 连环，和你熟知的九连环有着相同的结构。\n\n![这是一个九连环](https://cdn.luogu.com.cn/upload/image_hosting/x68krf0v.png)\n\n> 上图是一个九连环。\n\n顾名思义，$n$ 连环有一个长长的横梁，上面挂着 $n$ 个 **彼此影响** 的环。\n\n我们给这 $n$ 个环编号，其中最靠横梁头部的环为第 $1$ 个环，其次为第 $2$ 个环，以此类推……最靠横梁尾部的环为第 $n$ 个环；\n\n定义 $f_i$ 表示第 $i$ 个环的状态，其中 $f_i = 1$ 表示这个环在横梁上，$f_i = 0$ 表示这个环不在横梁上；\n\n定义 **拆装一个环** 为使环的状态 **取反**，即状态从 $1$ 变成 $0$ 或从 $0$ 变成 $1$。\n\n这些环的合法拆装规则如下：\n\n1. 第 $1$ 个环随时可以单独拆装；\n2. 第 $k+1$ 个环可以单独拆装，当且仅当 $f_k=1$ 且 $\\forall i < k$，都有 $f_i = 0$；\n3. 若 $f_1 = f_2$，则第 $1,2$ 两个环可以一起拆装。\n\n现在你需要解决的问题是：已知一个 $n$ 连环的初始状态，请你求出拆除这个 $n$ 连环的最少拆装步数。", "inputFormat": "本题数据量较大，故采取 **特殊** 输入方式。\n\n第一行一个正整数 $n$。\n\n第二行一个正整数 $m$；\n\n接下来 $m$ 行输入描述了初始状态：\n\n第 $i + 2$ 行有两个整数 $len_{i}, st_{i}$，表示往初始的 $n$ 连环的尾部连续添加 $len_{i}$ 个状态为 $st_{i}$ 的环。", "outputFormat": "一行共一个整数，表示从拆下这个 $n$ 连环所需要的最少拆装次数。\n\n由于答案可能很大，你只需要输出答案对 $1201201201$ 取模后的结果。", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $1 \\le n \\le 20$；\n\n$\\text{Subtask 2 (15 pts)}:$ 保证 $1 \\le n\\le 1000$；\n\n$\\text{Subtask 3 (15 pts)}:$ 保证初始状态中 **只有** $1$ 个 $1$；\n\n$\\text{Subtask 4 (30 pts)}:$ 保证 $1 \\le n \\le 10^7$；\n\n$\\text{Subtask 5 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 10^{18}$，$1 \\le m \\le 10^5$，$st_{i} \\in \\{0, 1\\}$，$len_{i} \\ge 1$\n\n数据保证 $\\sum\\limits_{i=1}^m len_{i} = n$。\n\n---\n\n#### 样例 #1 解释\n\n样例描述的是 $4$ 连环，初始状态为 `1101`。\n\n用最少合法拆装次数完成的方法如下：\n\n```plain\n1. 1101 -> 1100\n2. 1100 -> 0100\n3. 0100 -> 0111\n4. 0111 -> 0110\n5. 0110 -> 0010\n6. 0010 -> 0011\n7. 0011 -> 0000\n```\n\n共 $7$ 步。\n\n---\n\n#### 题外话\n\n本题中 $n$ 连环的第 $3$ 条拆装规则，在大部分的九连环玩法说明中都没有提到，但它确实是一个真实可行的操作呢！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "环 Rings", "background": "> 一九二九不出手，三九四九冰上走，五九六九隔河看杨柳；\n>\n> 七九河开，八九雁来，九九加一九，耕牛遍地走。\n\n「九」自古以来就是一个奇妙的数字，而你今天要解决的问题，也与「九」有关。", "description": "你有一个 $n$ 连环，和你熟知的九连环有着相同的结构。\n\n![这是一个九连环](https://cdn.luogu.com.cn/upload/image_hosting/x68krf0v.png)\n\n> 上图是一个九连环。\n\n顾名思义，$n$ 连环有一个长长的横梁，上面挂着 $n$ 个 **彼此影响** 的环。\n\n我们给这 $n$ 个环编号，其中最靠横梁头部的环为第 $1$ 个环，其次为第 $2$ 个环，以此类推……最靠横梁尾部的环为第 $n$ 个环；\n\n定义 $f_i$ 表示第 $i$ 个环的状态，其中 $f_i = 1$ 表示这个环在横梁上，$f_i = 0$ 表示这个环不在横梁上；\n\n定义 **拆装一个环** 为使环的状态 **取反**，即状态从 $1$ 变成 $0$ 或从 $0$ 变成 $1$。\n\n这些环的合法拆装规则如下：\n\n1. 第 $1$ 个环随时可以单独拆装；\n2. 第 $k+1$ 个环可以单独拆装，当且仅当 $f_k=1$ 且 $\\forall i < k$，都有 $f_i = 0$；\n3. 若 $f_1 = f_2$，则第 $1,2$ 两个环可以一起拆装。\n\n现在你需要解决的问题是：已知一个 $n$ 连环的初始状态，请你求出拆除这个 $n$ 连环的最少拆装步数。", "inputFormat": "本题数据量较大，故采取 **特殊** 输入方式。\n\n第一行一个正整数 $n$。\n\n第二行一个正整数 $m$；\n\n接下来 $m$ 行输入描述了初始状态：\n\n第 $i + 2$ 行有两个整数 $len_{i}, st_{i}$，表示往初始的 $n$ 连环的尾部连续添加 $len_{i}$ 个状态为 $st_{i}$ 的环。", "outputFormat": "一行共一个整数，表示从拆下这个 $n$ 连环所需要的最少拆装次数。\n\n由于答案可能很大，你只需要输出答案对 $1201201201$ 取模后的结果。", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $1 \\le n \\le 20$；\n\n$\\text{Subtask 2 (15 pts)}:$ 保证 $1 \\le n\\le 1000$；\n\n$\\text{Subtask 3 (15 pts)}:$ 保证初始状态中 **只有** $1$ 个 $1$；\n\n$\\text{Subtask 4 (30 pts)}:$ 保证 $1 \\le n \\le 10^7$；\n\n$\\text{Subtask 5 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 10^{18}$，$1 \\le m \\le 10^5$，$st_{i} \\in \\{0, 1\\}$，$len_{i} \\ge 1$\n\n数据保证 $\\sum\\limits_{i=1}^m len_{i} = n$。\n\n---\n\n#### 样例 #1 解释\n\n样例描述的是 $4$ 连环，初始状态为 `1101`。\n\n用最少合法拆装次数完成的方法如下：\n\n```plain\n1. 1101 -> 1100\n2. 1100 -> 0100\n3. 0100 -> 0111\n4. 0111 -> 0110\n5. 0110 -> 0010\n6. 0010 -> 0011\n7. 0011 -> 0000\n```\n\n共 $7$ 步。\n\n---\n\n#### 题外话\n\n本题中 $n$ 连环的第 $3$ 条拆装规则，在大部分的九连环玩法说明中都没有提到，但它确实是一个真实可行的操作呢！", "locale": "zh-CN"}}}
{"pid": "P6617", "type": "P", "difficulty": 6, "samples": [["6 4 6\n1 3 2 5 5 6\n2 1 4\n1 4 1\n2 0 5\n2 3 7", "Yes\nNo\nYes"], ["10 20 10\n9 3 6 3 3 3 3 1 4 9\n1 3 9\n1 6 9\n2 3 10\n1 3 9\n2 4 4\n1 1 7\n1 1 3\n1 5 6\n1 3 9\n2 4 7\n1 2 7\n2 6 8\n1 6 10\n2 2 9\n1 7 9\n2 3 1\n1 3 5\n1 5 6\n1 9 10\n1 3 6", "Yes\nNo\nNo\nNo\nYes\nYes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "平衡树", "O2优化"], "title": "查找 Search", "background": ">   也许，同学间最好的结局就是朋友吧。\n\n$\\mu ry$ 是一个可爱的女孩子。\n\n在她所住的小区里有排成一排的 $n$ 个垃圾桶，从左至右第 $i$ 个垃圾桶里都装着编号为 $a_i$ 的垃圾。\n\n$\\mu ry$ 不喜欢无序，于是就想把社区里编号和为 $w$ 的垃圾都清在一起。\n\n但是调皮的 $\\text{LeverImmy}$ 可能会把某个垃圾桶里的垃圾偷换成另一种。\n\n生气的 $\\mu ry$ 想考考 $\\text{LeverImmy}$ 一个区间 $[l, r]$ 内是否存在编号和为 $w$ 的垃圾。\n\n但 $\\text{LeverImmy}$ 也不会解决这个问题，于是他找到了聪明的你。", "description": "给定 $n$ 个垃圾桶，你需要维护一个数据结构，支持以下操作：\n\n-   `1 pos val` 表示将第 $pos$ 个垃圾桶里的垃圾的编号换成 $val$；\n\n-   `2 l r` 询问在 $[l\\oplus cnt, r\\oplus cnt]$ 内是否存在垃圾编号和为 $w$ 的 **两个** 垃圾桶。\n\n其中 $\\oplus$ 表示异或运算，$cnt$ 表示在 **此次询问之前**，答案为 `Yes` 的个数。\n\n对于每个操作 2，若存在请输出 `Yes`，不存在请输出 `No`。\n\n值得注意的是，对于所有询问， $w$ 为 **同一个数**。", "inputFormat": "第一行共三个整数 $n, m, w$，表示序列长度、接下来的操作个数与 $w$。\n\n第二行共 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ 描述了这个每个垃圾桶内垃圾的编号 $a$。\n\n接下来的 $m$ 行，每行三个整数，格式为 `opt x y`。", "outputFormat": "令操作 2 的次数为 $t$，输出数据共 $t$ 行。\n\n第 $i$ 行表示第 $i$ 个操作 2 的结果，即 `Yes` 或 `No`。", "hint": "本题采用 **捆绑测试**，开启 **O2 优化**。\n\n$\\text{Subtask 1 (7 pts)}:$ 保证 $1 \\le n, m, w \\le 2\\cdot10^3$，**时限 $1\\text{s}$**；\n\n$\\text{Subtask 2 (20 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，$opt = 2$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 3 (30 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 4 (43 pts)}:$ 没有特殊限制，**时限 $4\\text{s}$**；\n\n对于所有数据， $1 \\le n, m, w \\le 5\\cdot10^5$，$0 \\le a_i \\le w$。\n\n数据保证对于每个操作，$1 \\le pos \\le n$，$0 \\le val \\le w$，$1 \\le l \\oplus cnt \\le r \\oplus cnt \\le n$。\n\n由于输入输出量较大，建议使用更快的输入输出方式。\n\n---\n\n#### 输入 #1 解释\n\n第一次操作，询问区间 $[1, 4]$ 中是否有两个数加起来为 $6$，显然有 $a_1 + a_4 = 6$，因此输出 `Yes`；\n\n第二次操作，修改 $a_4$ 为 $1$，则序列变为 $[1, 3, 2, 1, 5, 6]$；\n\n第三次操作，询问区间 $[1, 4]$ 中是否有 **两个** 数加起来为 $6$，无，因此输出 `No`。\n\n第四次操作，询问区间 $[2, 6]$ 中是否有两个数加起来为 $6$，显然有 $a_4 + a_5 = 6$，因此输出 `Yes`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "查找 Search", "background": ">   也许，同学间最好的结局就是朋友吧。\n\n$\\mu ry$ 是一个可爱的女孩子。\n\n在她所住的小区里有排成一排的 $n$ 个垃圾桶，从左至右第 $i$ 个垃圾桶里都装着编号为 $a_i$ 的垃圾。\n\n$\\mu ry$ 不喜欢无序，于是就想把社区里编号和为 $w$ 的垃圾都清在一起。\n\n但是调皮的 $\\text{LeverImmy}$ 可能会把某个垃圾桶里的垃圾偷换成另一种。\n\n生气的 $\\mu ry$ 想考考 $\\text{LeverImmy}$ 一个区间 $[l, r]$ 内是否存在编号和为 $w$ 的垃圾。\n\n但 $\\text{LeverImmy}$ 也不会解决这个问题，于是他找到了聪明的你。", "description": "给定 $n$ 个垃圾桶，你需要维护一个数据结构，支持以下操作：\n\n-   `1 pos val` 表示将第 $pos$ 个垃圾桶里的垃圾的编号换成 $val$；\n\n-   `2 l r` 询问在 $[l\\oplus cnt, r\\oplus cnt]$ 内是否存在垃圾编号和为 $w$ 的 **两个** 垃圾桶。\n\n其中 $\\oplus$ 表示异或运算，$cnt$ 表示在 **此次询问之前**，答案为 `Yes` 的个数。\n\n对于每个操作 2，若存在请输出 `Yes`，不存在请输出 `No`。\n\n值得注意的是，对于所有询问， $w$ 为 **同一个数**。", "inputFormat": "第一行共三个整数 $n, m, w$，表示序列长度、接下来的操作个数与 $w$。\n\n第二行共 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ 描述了这个每个垃圾桶内垃圾的编号 $a$。\n\n接下来的 $m$ 行，每行三个整数，格式为 `opt x y`。", "outputFormat": "令操作 2 的次数为 $t$，输出数据共 $t$ 行。\n\n第 $i$ 行表示第 $i$ 个操作 2 的结果，即 `Yes` 或 `No`。", "hint": "本题采用 **捆绑测试**，开启 **O2 优化**。\n\n$\\text{Subtask 1 (7 pts)}:$ 保证 $1 \\le n, m, w \\le 2\\cdot10^3$，**时限 $1\\text{s}$**；\n\n$\\text{Subtask 2 (20 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，$opt = 2$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 3 (30 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 4 (43 pts)}:$ 没有特殊限制，**时限 $4\\text{s}$**；\n\n对于所有数据， $1 \\le n, m, w \\le 5\\cdot10^5$，$0 \\le a_i \\le w$。\n\n数据保证对于每个操作，$1 \\le pos \\le n$，$0 \\le val \\le w$，$1 \\le l \\oplus cnt \\le r \\oplus cnt \\le n$。\n\n由于输入输出量较大，建议使用更快的输入输出方式。\n\n---\n\n#### 输入 #1 解释\n\n第一次操作，询问区间 $[1, 4]$ 中是否有两个数加起来为 $6$，显然有 $a_1 + a_4 = 6$，因此输出 `Yes`；\n\n第二次操作，修改 $a_4$ 为 $1$，则序列变为 $[1, 3, 2, 1, 5, 6]$；\n\n第三次操作，询问区间 $[1, 4]$ 中是否有 **两个** 数加起来为 $6$，无，因此输出 `No`。\n\n第四次操作，询问区间 $[2, 6]$ 中是否有两个数加起来为 $6$，显然有 $a_4 + a_5 = 6$，因此输出 `Yes`。", "locale": "zh-CN"}}}
{"pid": "P6618", "type": "P", "difficulty": 0, "samples": [["10 12\n1 4 1\n1 5 3\n2 4 1\n4 5 1\n4 6 1\n3 6 1\n4 7 1\n8 7 1\n9 7 1\n8 9 1\n10 2 2\n3 10 2", "15"], ["17 20\n1 3 1\n1 6 2\n2 5 3\n2 6 4\n3 4 5\n3 5 6\n7 4 7\n7 3 8\n4 8 9\n9 1 10\n10 9 11\n11 6 12\n14 13 13\n13 12 14\n12 11 15\n11 14 16\n15 4 17\n16 5 18\n17 5 19\n17 16 20", "161"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "岛屿 Island", "background": "> 从前有些岛，岛旁有些桥；桥连着岛，岛连着桥。\n>\n> 有一天，桥倒了，岛翘了；从此桥没了岛，岛也没了桥。\n", "description": "茫茫大海中央，有一个庞大的群岛体系，坐落着 $n$ 座岛屿。为了方便记录，我们把它们编号为岛屿 $1$ 到 $n$，其中，岛屿 $1$ 是唯一一个有人居住的岛。\n\n这些群岛间，有 $m$ 架摇摇欲坠的小桥。第 $i$ 架桥连接着 $u_i, v_i$ 两座 **不同** 的岛，**没有两座岛之间架有两架桥**。\n\n脆弱的小桥已经荒废了，每架桥都只能容一个人走一遍就会倒塌。\n\n一天，你心血来潮，前来这个庞大的群岛探险。作为探险家的你，知道一条安全的岛屿探险路径 **可以多次踏足同一个岛屿**，但 **绝不能走倒塌的桥**；\n\n一条有趣的岛屿探险回路是一条 **以同一个岛屿为起点和终点** 的安全岛屿探险路径，并且它至少踏足两个不同的岛屿。\n\n但特别的，**有趣的岛屿探险回路除了起点能经过两次以外，其它的岛屿都只能经过一次**（显然，你当然不觉得重复探访你已经踏足过的岛屿很有趣）。\n\n为了保证你的安全，你做足了功课，拿到了群岛的地图。仔细研究这个古老的地图，你发现每两个岛之间都有至少一条路可以抵达，并且第 $i$ 架桥上竟然藏着价值为 $w_i$ 的宝藏！\n\n然而，你又发现群岛间的桥是非常稀少的，这些桥总是满足一个规律：**以同一个岛屿为起点的不同的有趣探险回路一定不会经过相同的一架桥**。\n\n你将可以空降到任意一个岛屿开始你的探险，途中你可以收集宝藏，但最终你 **必须回到岛屿** $1$，才能安全地返回。\n\n现在，你想知道在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。", "inputFormat": "第一行两个正整数 $n, m$，表示小岛的数量和连接小岛的桥梁的总数量；\n\n接下来的 $m$ 行，每行共三个正整数，其中第 $i$ 行为 $u_i, v_i, w_i$ ，含义如题。", "outputFormat": "一行共一个整数，表示在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。\n", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (3 pts)}:$ 保证不存在有趣的探险回路；\n\n$\\text{Subtask 2 (7 pts)}:$ 保证 $1 \\le n \\le 10$；\n\n$\\text{Subtask 3 (10 pts)}:$ 保证没有两个有趣的探险回路经过同一个岛屿；\n\n$\\text{Subtask 4 (10 pts)}:$ 保证 $w_i = 1$；\n\n$\\text{Subtask 5 (20 pts)}:$ 保证 $1 \\le n \\le 2000$；\n\n$\\text{Subtask 6 (20 pts)}:$ 保证 $1 \\le n \\le 10^5$；\n\n$\\text{Subtask 7 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 3\\times10^5$，$1 \\le m \\le10^6$，$1 \\le w_i \\le 10^9$。\n\n---\n\n#### 样例 #1 解释\n\n![地图](https://cdn.luogu.com.cn/upload/image_hosting/emfxzgh2.png)\n\n> 上为群岛的地图，圆圈代表岛屿，圆圈间的线代表桥，\n>\n> 圆圈中的数字是岛屿的编号，线旁的数字是桥上宝藏的价值。\n\n![合法解](https://cdn.luogu.com.cn/upload/image_hosting/4jyob32q.png)\n\n从 $7$ 号岛屿出发，沿着上图的方向和顺序走，收集到的宝藏价值和为 $15$，即为答案。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "岛屿 Island", "background": "> 从前有些岛，岛旁有些桥；桥连着岛，岛连着桥。\n>\n> 有一天，桥倒了，岛翘了；从此桥没了岛，岛也没了桥。\n", "description": "茫茫大海中央，有一个庞大的群岛体系，坐落着 $n$ 座岛屿。为了方便记录，我们把它们编号为岛屿 $1$ 到 $n$，其中，岛屿 $1$ 是唯一一个有人居住的岛。\n\n这些群岛间，有 $m$ 架摇摇欲坠的小桥。第 $i$ 架桥连接着 $u_i, v_i$ 两座 **不同** 的岛，**没有两座岛之间架有两架桥**。\n\n脆弱的小桥已经荒废了，每架桥都只能容一个人走一遍就会倒塌。\n\n一天，你心血来潮，前来这个庞大的群岛探险。作为探险家的你，知道一条安全的岛屿探险路径 **可以多次踏足同一个岛屿**，但 **绝不能走倒塌的桥**；\n\n一条有趣的岛屿探险回路是一条 **以同一个岛屿为起点和终点** 的安全岛屿探险路径，并且它至少踏足两个不同的岛屿。\n\n但特别的，**有趣的岛屿探险回路除了起点能经过两次以外，其它的岛屿都只能经过一次**（显然，你当然不觉得重复探访你已经踏足过的岛屿很有趣）。\n\n为了保证你的安全，你做足了功课，拿到了群岛的地图。仔细研究这个古老的地图，你发现每两个岛之间都有至少一条路可以抵达，并且第 $i$ 架桥上竟然藏着价值为 $w_i$ 的宝藏！\n\n然而，你又发现群岛间的桥是非常稀少的，这些桥总是满足一个规律：**以同一个岛屿为起点的不同的有趣探险回路一定不会经过相同的一架桥**。\n\n你将可以空降到任意一个岛屿开始你的探险，途中你可以收集宝藏，但最终你 **必须回到岛屿** $1$，才能安全地返回。\n\n现在，你想知道在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。", "inputFormat": "第一行两个正整数 $n, m$，表示小岛的数量和连接小岛的桥梁的总数量；\n\n接下来的 $m$ 行，每行共三个正整数，其中第 $i$ 行为 $u_i, v_i, w_i$ ，含义如题。", "outputFormat": "一行共一个整数，表示在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。\n", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (3 pts)}:$ 保证不存在有趣的探险回路；\n\n$\\text{Subtask 2 (7 pts)}:$ 保证 $1 \\le n \\le 10$；\n\n$\\text{Subtask 3 (10 pts)}:$ 保证没有两个有趣的探险回路经过同一个岛屿；\n\n$\\text{Subtask 4 (10 pts)}:$ 保证 $w_i = 1$；\n\n$\\text{Subtask 5 (20 pts)}:$ 保证 $1 \\le n \\le 2000$；\n\n$\\text{Subtask 6 (20 pts)}:$ 保证 $1 \\le n \\le 10^5$；\n\n$\\text{Subtask 7 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 3\\times10^5$，$1 \\le m \\le10^6$，$1 \\le w_i \\le 10^9$。\n\n---\n\n#### 样例 #1 解释\n\n![地图](https://cdn.luogu.com.cn/upload/image_hosting/emfxzgh2.png)\n\n> 上为群岛的地图，圆圈代表岛屿，圆圈间的线代表桥，\n>\n> 圆圈中的数字是岛屿的编号，线旁的数字是桥上宝藏的价值。\n\n![合法解](https://cdn.luogu.com.cn/upload/image_hosting/4jyob32q.png)\n\n从 $7$ 号岛屿出发，沿着上图的方向和顺序走，收集到的宝藏价值和为 $15$，即为答案。\n", "locale": "zh-CN"}}}
{"pid": "P6619", "type": "P", "difficulty": 6, "samples": [["8\n1 1 103 150\n1 0 100 100\n1 1 102 150\n1 0 103 300\n2 1\n1 1 101 100\n1 1 104 350\n1 0 100 400", "Peace\n103 200\n103 200\n103 300\n102 200\n102 200\n104 700\n102 1000"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "线段树", "二分", "各省省选", "树状数组", "离散化"], "title": "[省选联考 2020 A/B 卷] 冰火战士", "background": "A 卷 D1T1，B 卷 D1T3。\n\n时限 3s，内存 512MB。", "description": "一场比赛即将开始。\n\n每位战士有两个属性：温度和能量，有两派战士：冰系战士的技能会对周围造成降温冰冻伤害，因而要求场地温度不低于他的自身温度才能参赛；火系战士的技能会对周围造成升温灼烧伤害，因而要求场地温度不高于他的自身温度才能参赛。\n\n当场地温度确定时，双方能够参赛的战士分别排成一队。冰系战士按自身温度从低到高排序，火系战士按自身温度从高到低排序，温度相同时能量大的战士排在前面。首先，双方的第一位战士之间展开战斗，两位战士消耗相同的能量，能量少的战士将耗尽能量退出比赛，而能量有剩余的战士将继续和对方的下一位战士战斗（能量都耗尽则双方下一位战士之间展开战斗）。如此循环，直至某方战士队列为空，比赛结束。\n\n你需要寻找最佳场地温度：使冰火双方消耗总能量最高的温度的最高值。\n\n现在，比赛还处于报名阶段，目前还没有任何战士报名，接下来你将不断地收到报名信息和撤回信息。其中，报名信息包含报名战士的派系和两个属性，撤回信息包含要撤回的报名信息的序号。每当报名情况发生变化（即收到一条信息）时，你需要立即报出当前局面下的最佳场地温度，以及该场地温度下双方消耗的总能量之和是多少。若当前局面下无论何种温度都无法开展比赛（某一方没有战士能参赛），则只要输出 `Peace`。", "inputFormat": "第一行一个数 $Q$，表示信息的数量。\n\n接下来 $Q$ 行，每行为 `1 t x y` $(t \\in \\{0, 1\\}$，$x$ 和 $y$ 都是正整数 $)$ 或 `2 k`（$k$ 是正整数）：\n\n`1 t x y` 表示一条报名信息，$t = 0$ 时报名战士是冰系，$t = 1$ 时报名战士是火系，$x$ 表示战士的自身温度，$y$ 表示战士的能量。\n\n`2 k` 表示一条撤回信息，撤回的是第 $k$ 条信息。被撤回的信息一定是报名信息，已被撤回的信息不会再次被撤回。", "outputFormat": "共 $Q$ 行，每行有两个用空格隔开的正整数，分别表示当前局面下的最佳温度和该温度下冰火双方消耗的总能量之和。", "hint": "#### 样例 1 解释\n为说明方便，约定：若第 $k$ 条信息是报名信息，则该条报名信息对应战士 $k$。样例中含有战士 $1,2,3,4,6,7,8$，由于第 $5$ 条是撤回信息，所以没有战士 $5$。\n\n下面逐个解释每个输出：\n\n1. 只有火系战士：战士 $1$，无法比赛，输出 `Peace`。\n2. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n3. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n4. 温度 $103$ 能消耗最多的能量 $300$：首先，战士 $1$ 对阵战士 $2$ 消耗能量 $200$；然后，战士 $1$ 对阵战士 $4$ 消耗能量 $100$，最佳温度为 $103$。\n5. 从现在起战士 $1$ 不再存在。温度 $100 \\sim 102$ 能消耗最多的能量 $200$：战士 $2$ 对阵战士 $3$ 消耗能量 $200$，最佳温度为 $102$。\n\n#### 样例 2\n\n见附加文件中 `icefire2.in` 与 `icefire2.ans`。\n\n#### 数据范围\n\n$10\\%$ 的数据：$Q \\leq 100$，$x \\leq 10^3$。\n\n另有 $20\\%$ 的数据：$Q \\leq 10^4$，$x \\leq 5000$，不存在撤回信息，且输入的 $x$ 按顺序不降。\n\n$60\\%$ 的数据（包含上述 $20\\%$，下同）：$Q \\leq 2 \\times 10^5$，$x \\leq 2 \\times 10^5$。\n\n$90\\%$ 的数据：$Q \\leq 2 \\times 10^6$，$x \\leq 2 \\times 10^6$。\n\n$100\\%$ 的数据：$1 \\leq Q \\leq 2 \\times 10^6$，$1 \\leq x \\leq 2 \\times 10^9$，所有 $y$ 之和不超过 $2 \\times 10^9$，保证不存在 $t, x, y$ 完全相同的两个战士。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A/B 卷] 冰火战士", "background": "A 卷 D1T1，B 卷 D1T3。\n\n时限 3s，内存 512MB。", "description": "一场比赛即将开始。\n\n每位战士有两个属性：温度和能量，有两派战士：冰系战士的技能会对周围造成降温冰冻伤害，因而要求场地温度不低于他的自身温度才能参赛；火系战士的技能会对周围造成升温灼烧伤害，因而要求场地温度不高于他的自身温度才能参赛。\n\n当场地温度确定时，双方能够参赛的战士分别排成一队。冰系战士按自身温度从低到高排序，火系战士按自身温度从高到低排序，温度相同时能量大的战士排在前面。首先，双方的第一位战士之间展开战斗，两位战士消耗相同的能量，能量少的战士将耗尽能量退出比赛，而能量有剩余的战士将继续和对方的下一位战士战斗（能量都耗尽则双方下一位战士之间展开战斗）。如此循环，直至某方战士队列为空，比赛结束。\n\n你需要寻找最佳场地温度：使冰火双方消耗总能量最高的温度的最高值。\n\n现在，比赛还处于报名阶段，目前还没有任何战士报名，接下来你将不断地收到报名信息和撤回信息。其中，报名信息包含报名战士的派系和两个属性，撤回信息包含要撤回的报名信息的序号。每当报名情况发生变化（即收到一条信息）时，你需要立即报出当前局面下的最佳场地温度，以及该场地温度下双方消耗的总能量之和是多少。若当前局面下无论何种温度都无法开展比赛（某一方没有战士能参赛），则只要输出 `Peace`。", "inputFormat": "第一行一个数 $Q$，表示信息的数量。\n\n接下来 $Q$ 行，每行为 `1 t x y` $(t \\in \\{0, 1\\}$，$x$ 和 $y$ 都是正整数 $)$ 或 `2 k`（$k$ 是正整数）：\n\n`1 t x y` 表示一条报名信息，$t = 0$ 时报名战士是冰系，$t = 1$ 时报名战士是火系，$x$ 表示战士的自身温度，$y$ 表示战士的能量。\n\n`2 k` 表示一条撤回信息，撤回的是第 $k$ 条信息。被撤回的信息一定是报名信息，已被撤回的信息不会再次被撤回。", "outputFormat": "共 $Q$ 行，每行有两个用空格隔开的正整数，分别表示当前局面下的最佳温度和该温度下冰火双方消耗的总能量之和。", "hint": "#### 样例 1 解释\n为说明方便，约定：若第 $k$ 条信息是报名信息，则该条报名信息对应战士 $k$。样例中含有战士 $1,2,3,4,6,7,8$，由于第 $5$ 条是撤回信息，所以没有战士 $5$。\n\n下面逐个解释每个输出：\n\n1. 只有火系战士：战士 $1$，无法比赛，输出 `Peace`。\n2. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n3. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n4. 温度 $103$ 能消耗最多的能量 $300$：首先，战士 $1$ 对阵战士 $2$ 消耗能量 $200$；然后，战士 $1$ 对阵战士 $4$ 消耗能量 $100$，最佳温度为 $103$。\n5. 从现在起战士 $1$ 不再存在。温度 $100 \\sim 102$ 能消耗最多的能量 $200$：战士 $2$ 对阵战士 $3$ 消耗能量 $200$，最佳温度为 $102$。\n\n#### 样例 2\n\n见附加文件中 `icefire2.in` 与 `icefire2.ans`。\n\n#### 数据范围\n\n$10\\%$ 的数据：$Q \\leq 100$，$x \\leq 10^3$。\n\n另有 $20\\%$ 的数据：$Q \\leq 10^4$，$x \\leq 5000$，不存在撤回信息，且输入的 $x$ 按顺序不降。\n\n$60\\%$ 的数据（包含上述 $20\\%$，下同）：$Q \\leq 2 \\times 10^5$，$x \\leq 2 \\times 10^5$。\n\n$90\\%$ 的数据：$Q \\leq 2 \\times 10^6$，$x \\leq 2 \\times 10^6$。\n\n$100\\%$ 的数据：$1 \\leq Q \\leq 2 \\times 10^6$，$1 \\leq x \\leq 2 \\times 10^9$，所有 $y$ 之和不超过 $2 \\times 10^9$，保证不存在 $t, x, y$ 完全相同的两个战士。", "locale": "zh-CN"}}}
{"pid": "P6620", "type": "P", "difficulty": 6, "samples": [["5 1 10007 2\n0 0 1", "240"], ["996 233 998244353 5\n5 4 13 16 20 15", "869469289"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "组合数学", "Stirling 数"], "title": "[省选联考 2020 A 卷] 组合数问题", "background": "1s 512M", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。小葱现在希望你计算 \n$$\\left(\\sum_{k=0}^{n}f(k)\\times x^k\\times \\binom{n}{k}\\right)\\bmod p$$ \n的值。其中 $n$, $x$, $p$ 为给定的整数，$f(k)$ 为给定的一个 $m$ 次多项式 $f(k) = a_0 + a_1k + a_2k^2 + \\cdots + a_mk^m$。$\\binom{n}{k}$ 为组合数，其值为 $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$。", "inputFormat": "第一行四个非负整数 $n$, $x$, $p$, $m$。\n\n第二行 $m + 1$ 个整数，分别代表 $a_0$, $a_1$, $\\cdots$, $a_m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$f(0) = 0，f(1) = 1，f(2) = 4，f(3) = 9，f(4) = 16，f(5) = 25$。\n\n$x = 1$，故 $x^k$ 恒为 $1$，乘积中的该项可以忽略。\n\n$\\binom 5 0 = 1, \\binom 5 1 = 5, \\binom 5 2 = 10, \\binom 5 3 = 10, \\binom 5 4 = 5, \\binom 5 5 = 1$。\n\n#### 样例 3\n\n见附加文件中 `problem3.in` 与 `problem3.ans`。\n\n#### 数据范围与提示\n\n对于所有测试数据：$1\\le n, x, p \\le 10^9, 0\\le a_i\\le 10^9, 0\\le m \\le \\min(n,1000)$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号  | $n\\le $ | $m\\le $ | 其他特殊限制 |\n| :---------: | :-----: | :-----: | :----------: |\n|  $1\\sim 3$  | $1000$  | $1000$  |              |\n|  $4\\sim 6$  | $10^5$  |   $0$   |  $p$ 是质数  |\n|  $7\\sim 8$  | $10^9$  |   $0$   |              |\n| $9\\sim 12$  | $10^9$  |   $5$   |              |\n| $13\\sim 16$ | $10^9$  | $1000$  |    $x=1$     |\n| $17\\sim 20$ | $10^9$  | $1000$  |              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 组合数问题", "background": "1s 512M", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。小葱现在希望你计算 \n$$\\left(\\sum_{k=0}^{n}f(k)\\times x^k\\times \\binom{n}{k}\\right)\\bmod p$$ \n的值。其中 $n$, $x$, $p$ 为给定的整数，$f(k)$ 为给定的一个 $m$ 次多项式 $f(k) = a_0 + a_1k + a_2k^2 + \\cdots + a_mk^m$。$\\binom{n}{k}$ 为组合数，其值为 $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$。", "inputFormat": "第一行四个非负整数 $n$, $x$, $p$, $m$。\n\n第二行 $m + 1$ 个整数，分别代表 $a_0$, $a_1$, $\\cdots$, $a_m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$f(0) = 0，f(1) = 1，f(2) = 4，f(3) = 9，f(4) = 16，f(5) = 25$。\n\n$x = 1$，故 $x^k$ 恒为 $1$，乘积中的该项可以忽略。\n\n$\\binom 5 0 = 1, \\binom 5 1 = 5, \\binom 5 2 = 10, \\binom 5 3 = 10, \\binom 5 4 = 5, \\binom 5 5 = 1$。\n\n#### 样例 3\n\n见附加文件中 `problem3.in` 与 `problem3.ans`。\n\n#### 数据范围与提示\n\n对于所有测试数据：$1\\le n, x, p \\le 10^9, 0\\le a_i\\le 10^9, 0\\le m \\le \\min(n,1000)$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号  | $n\\le $ | $m\\le $ | 其他特殊限制 |\n| :---------: | :-----: | :-----: | :----------: |\n|  $1\\sim 3$  | $1000$  | $1000$  |              |\n|  $4\\sim 6$  | $10^5$  |   $0$   |  $p$ 是质数  |\n|  $7\\sim 8$  | $10^9$  |   $0$   |              |\n| $9\\sim 12$  | $10^9$  |   $5$   |              |\n| $13\\sim 16$ | $10^9$  | $1000$  |    $x=1$     |\n| $17\\sim 20$ | $10^9$  | $1000$  |              |", "locale": "zh-CN"}}}
{"pid": "P6621", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 5 6 7\n4 4 2 1 3\n1 2 3\n2 4 5", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选"], "title": "[省选联考 2020 A 卷] 魔法商店", "background": "1s 512M", "description": "笠笠和伦伦来到了一家魔法商店，这家商店内有 $n$ 件礼品，礼品从 $1 \\sim n$ 编号，$i$ 号礼品的魅力值为 $c_i$，价格为 $v_i$。\n\n两人希望购买一些礼品，但他们的要求比较奇怪：假设购买到的礼品集合为 $S=\\{s_1,s_2,\\dots,s_p\\}(1\\leq s_i\\leq n)$，两人要求对于 $S$ 中任意的非空子集 $T=\\{t_1,t_2,\\dots,t_q\\}$，它包含的所有礼品的魅力值异或和都不为零，即：$c_{t_1} \\oplus c_{t_2} \\oplus \\cdots \\oplus c_{t_q} \\neq 0$。其中 $\\oplus$ 是异或运算。在此基础上，两人还要求购买到的礼品数尽可能多。\n\n例如：$c_1=1,c_2=2,c_3=5,c_4=6,c_5=7$。则 $S_1=\\{2,3,5\\}$ 不符合要求，因为 $c_2 \\oplus c_3 \\oplus c_5=0$。$S_2=\\{1,2,3\\}$ 与 $S_3=\\{2,4,5\\}$ 符合要求，其任意非空子集的异或和都不为零。$S_4=\\{1,2\\}$ 因为其包含的礼品数不是最多的。\n\n满足两人要求的礼品集合可能很多，因此商店老板为两人挑选出了两个符合要求的礼品集合 $A$ 与 $B$（显然它们所含的礼品数相同），伦伦喜欢集合 $A$，但笠笠更喜欢集合 $B$。为了笠笠同意购买集合 $A$，伦伦决定使用魔法改变礼品价格。更具体地，伦伦能花费 $(x-v_i)^2$ 的魔力值，将 $i$ 号礼品的价格改为任意整数 $x$，每件礼品只能被改价一次。\n\n伦伦希望改价后 $A$ 是所有符合要求的礼品集合之中价格总和最小的，且 $B$ 是所有符合要求的礼品集合之中价格总和最大的（一个礼品集合的价格总和为它包含的所有礼品的价格之和）。现在请你帮伦伦计算，他至少要花费多少魔力值才能完成他的目标。", "inputFormat": "第一行两个整数 $n, m$，分别表示总礼品数与礼品集合 $A(B)$ 包含的礼品数。\n\n第二行 $n$ 个整数 $c_i$，第 $i$ 个整数表示 $i$ 号礼品的魅力值。\n\n第三行 $n$ 个整数 $v_i$，第 $i$ 个整数表示 $i$ 号礼品的价格。\n\n第四行 $m$ 个整数 $a_i$，表示礼品集合 $A$ 包含的礼品的编号。数据保证 $a_i$ 两两不同。\n\n第五行 $m$ 个整数 $b_i$，表示礼品集合 $B$ 包含的礼品的编号。数据保证 $b_i$ 两两不同。\n\n数据保证 $1 \\leq a_i, b_i \\leq n$，且礼品集合 $A$ 和 $B$ 均符合两人的要求。\n", "outputFormat": "仅一行一个整数，表示伦伦至少需要花费的魔力值。", "hint": "#### 样例 1 解释\n\n符合条件的礼品集合有：$\\{1,2,3\\},\\{1,2,4\\},\\{1,2,5\\},\\{1,3,4\\},\\{1,3,5\\},\\{2,3,4\\},\\{2,4,5\\},\\{3,4,5\\}$。\n\n一个最优的改价方案为：$c_1=c_2=c_4=c_5=3$，$c_3=2$。\n\n#### 样例 2\n\n见附加文件中 `shop2.in` 与 `shop2.ans`。\n\n#### 样例 3\n\n见附加文件中 `shop3.in` 与 `shop3.ans`。\n\n#### 数据范围\n\n对于所有测试数据：$1\\leq n\\leq 1000$，$1\\leq m\\leq 64$，$1\\leq c_i < 2^{64}$，$0\\leq v_i\\leq 10^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\leq$ | $m \\leq$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 3$ | $10$ | $4$ | $1 \\leq v_i \\leq 5$ |\n| $4 \\sim 6$ | $50$ | $2$ | $1 \\leq v_i \\leq 10$ |\n| $7 \\sim 10$ | $500$ | $30$ | $0 \\leq v_i \\leq 1$ |\n| $11 \\sim 12$ | $1000$ | $64$ | $A$ 与 $B$ 相同 |\n| $13 \\sim 20$ | $1000$ | $64$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 魔法商店", "background": "1s 512M", "description": "笠笠和伦伦来到了一家魔法商店，这家商店内有 $n$ 件礼品，礼品从 $1 \\sim n$ 编号，$i$ 号礼品的魅力值为 $c_i$，价格为 $v_i$。\n\n两人希望购买一些礼品，但他们的要求比较奇怪：假设购买到的礼品集合为 $S=\\{s_1,s_2,\\dots,s_p\\}(1\\leq s_i\\leq n)$，两人要求对于 $S$ 中任意的非空子集 $T=\\{t_1,t_2,\\dots,t_q\\}$，它包含的所有礼品的魅力值异或和都不为零，即：$c_{t_1} \\oplus c_{t_2} \\oplus \\cdots \\oplus c_{t_q} \\neq 0$。其中 $\\oplus$ 是异或运算。在此基础上，两人还要求购买到的礼品数尽可能多。\n\n例如：$c_1=1,c_2=2,c_3=5,c_4=6,c_5=7$。则 $S_1=\\{2,3,5\\}$ 不符合要求，因为 $c_2 \\oplus c_3 \\oplus c_5=0$。$S_2=\\{1,2,3\\}$ 与 $S_3=\\{2,4,5\\}$ 符合要求，其任意非空子集的异或和都不为零。$S_4=\\{1,2\\}$ 因为其包含的礼品数不是最多的。\n\n满足两人要求的礼品集合可能很多，因此商店老板为两人挑选出了两个符合要求的礼品集合 $A$ 与 $B$（显然它们所含的礼品数相同），伦伦喜欢集合 $A$，但笠笠更喜欢集合 $B$。为了笠笠同意购买集合 $A$，伦伦决定使用魔法改变礼品价格。更具体地，伦伦能花费 $(x-v_i)^2$ 的魔力值，将 $i$ 号礼品的价格改为任意整数 $x$，每件礼品只能被改价一次。\n\n伦伦希望改价后 $A$ 是所有符合要求的礼品集合之中价格总和最小的，且 $B$ 是所有符合要求的礼品集合之中价格总和最大的（一个礼品集合的价格总和为它包含的所有礼品的价格之和）。现在请你帮伦伦计算，他至少要花费多少魔力值才能完成他的目标。", "inputFormat": "第一行两个整数 $n, m$，分别表示总礼品数与礼品集合 $A(B)$ 包含的礼品数。\n\n第二行 $n$ 个整数 $c_i$，第 $i$ 个整数表示 $i$ 号礼品的魅力值。\n\n第三行 $n$ 个整数 $v_i$，第 $i$ 个整数表示 $i$ 号礼品的价格。\n\n第四行 $m$ 个整数 $a_i$，表示礼品集合 $A$ 包含的礼品的编号。数据保证 $a_i$ 两两不同。\n\n第五行 $m$ 个整数 $b_i$，表示礼品集合 $B$ 包含的礼品的编号。数据保证 $b_i$ 两两不同。\n\n数据保证 $1 \\leq a_i, b_i \\leq n$，且礼品集合 $A$ 和 $B$ 均符合两人的要求。\n", "outputFormat": "仅一行一个整数，表示伦伦至少需要花费的魔力值。", "hint": "#### 样例 1 解释\n\n符合条件的礼品集合有：$\\{1,2,3\\},\\{1,2,4\\},\\{1,2,5\\},\\{1,3,4\\},\\{1,3,5\\},\\{2,3,4\\},\\{2,4,5\\},\\{3,4,5\\}$。\n\n一个最优的改价方案为：$c_1=c_2=c_4=c_5=3$，$c_3=2$。\n\n#### 样例 2\n\n见附加文件中 `shop2.in` 与 `shop2.ans`。\n\n#### 样例 3\n\n见附加文件中 `shop3.in` 与 `shop3.ans`。\n\n#### 数据范围\n\n对于所有测试数据：$1\\leq n\\leq 1000$，$1\\leq m\\leq 64$，$1\\leq c_i < 2^{64}$，$0\\leq v_i\\leq 10^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\leq$ | $m \\leq$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 3$ | $10$ | $4$ | $1 \\leq v_i \\leq 5$ |\n| $4 \\sim 6$ | $50$ | $2$ | $1 \\leq v_i \\leq 10$ |\n| $7 \\sim 10$ | $500$ | $30$ | $0 \\leq v_i \\leq 1$ |\n| $11 \\sim 12$ | $1000$ | $64$ | $A$ 与 $B$ 相同 |\n| $13 \\sim 20$ | $1000$ | $64$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P6622", "type": "P", "difficulty": 6, "samples": [["3 3 1\n1 2 3", "2"], ["4 3 1\n1 2 3 1", "6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "状压 DP"], "title": "[省选联考 2020 A/B 卷] 信号传递", "background": "", "description": "一条道路上从左至右排列着 $m$ 个信号站，初始时从左至右依次编号为 $1,2,\\dots,m$，相邻信号站之间相隔 $1$ 单位长度。每个信号站只能往它右侧的任意信号站传输信号（称为普通传递），每单位长度距离需要消耗 $1$ 单位时间。道路的最左侧有一个控制塔，它在最左侧信号站的左侧，与其相隔 $1$ 单位长度。控制塔能与任意信号站进行双向信号传递（称为特殊传递），但每单位长度距离需要消耗 $k$ 个单位时间。对于给定的长度为 $n$ 的信号传递序列 $S$，传递规则如下：\n\n1. 共 $n-1$ 次信号传递，第 $i$ 次信号传递将把信号从 $S_i$ 号信号站传递给 $S_{i+1}$ 号。\n2. 若 $S_{i+1}$ 号信号站在 $S_i$ 号右侧，则将使用普通传递方式，从 $S_i$ 号直接传递给 $S_{i+1}$ 号。\n3. 若 $S_{i+1}$ 号信号站在 $S_i$ 号左侧，则将使用特殊传递方式，信号将从 $S_i$ 号传递给控制塔，再由控制塔传递给 $S_{i+1}$ 号。\n4. 若 $S_i=S_{i+1}$，则信号无须传递。\n\n阿基作为大工程师，他能够任意多次交换任意两个信号站的位置，即他能够重排信号站的顺序，这样会使得 $S$ 消耗的传递时间改变。现在阿基想知道，在他重排信号站顺序后，$S$ 所消耗的传递时间最小能是多少。", "inputFormat": "第一行三个整数 $n,m,k$，分别代表信号传递序列 $S$ 的长度，信号站个数，特殊传递单位长度距离的时间消耗。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $S_i$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n信号站顺序保持不变，两次使用普通传递方式，时间消耗为 $1+1=2$。\n\n【样例解释 $2$】\n\n对于排列 $1,2,3$，传递时间为 $1+1+(3\\times 1+1\\times 1)=6$。\n\n对于排列 $1,3,2$，传递时间为 $2+(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)=10$。\n\n对于排列 $2,1,3$，传递时间为 $(2\\times 1+1\\times 1)+2+(3\\times 1+2\\times 1)=10$。\n\n对于排列 $2,3,1$，传递时间为 $(3\\times 1+1\\times 1)+1+1=6$。\n\n对于排列 $3,1,2$，传递时间为 $1+(3\\times 1+1\\times 1)+1=6$。\n\n对于排列 $3,2,1$，传递时间为 $(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)+2=10$。\n\n【数据范围】\n\n$30\\%$ 的数据：$m\\leq 8, n\\leq 100$。\n\n$60\\%$ 的数据：$m\\leq 20$。\n\n$70\\%$ 的数据：$m\\leq 21$。\n\n$80\\%$ 的数据：$m\\leq 22$。\n\n$100\\%$ 的数据：$2\\leq m\\leq 23$，$2\\leq n\\leq 10^5$，$1\\leq k\\leq 100$，$1\\leq S_i\\leq m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A/B 卷] 信号传递", "background": "", "description": "一条道路上从左至右排列着 $m$ 个信号站，初始时从左至右依次编号为 $1,2,\\dots,m$，相邻信号站之间相隔 $1$ 单位长度。每个信号站只能往它右侧的任意信号站传输信号（称为普通传递），每单位长度距离需要消耗 $1$ 单位时间。道路的最左侧有一个控制塔，它在最左侧信号站的左侧，与其相隔 $1$ 单位长度。控制塔能与任意信号站进行双向信号传递（称为特殊传递），但每单位长度距离需要消耗 $k$ 个单位时间。对于给定的长度为 $n$ 的信号传递序列 $S$，传递规则如下：\n\n1. 共 $n-1$ 次信号传递，第 $i$ 次信号传递将把信号从 $S_i$ 号信号站传递给 $S_{i+1}$ 号。\n2. 若 $S_{i+1}$ 号信号站在 $S_i$ 号右侧，则将使用普通传递方式，从 $S_i$ 号直接传递给 $S_{i+1}$ 号。\n3. 若 $S_{i+1}$ 号信号站在 $S_i$ 号左侧，则将使用特殊传递方式，信号将从 $S_i$ 号传递给控制塔，再由控制塔传递给 $S_{i+1}$ 号。\n4. 若 $S_i=S_{i+1}$，则信号无须传递。\n\n阿基作为大工程师，他能够任意多次交换任意两个信号站的位置，即他能够重排信号站的顺序，这样会使得 $S$ 消耗的传递时间改变。现在阿基想知道，在他重排信号站顺序后，$S$ 所消耗的传递时间最小能是多少。", "inputFormat": "第一行三个整数 $n,m,k$，分别代表信号传递序列 $S$ 的长度，信号站个数，特殊传递单位长度距离的时间消耗。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $S_i$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n信号站顺序保持不变，两次使用普通传递方式，时间消耗为 $1+1=2$。\n\n【样例解释 $2$】\n\n对于排列 $1,2,3$，传递时间为 $1+1+(3\\times 1+1\\times 1)=6$。\n\n对于排列 $1,3,2$，传递时间为 $2+(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)=10$。\n\n对于排列 $2,1,3$，传递时间为 $(2\\times 1+1\\times 1)+2+(3\\times 1+2\\times 1)=10$。\n\n对于排列 $2,3,1$，传递时间为 $(3\\times 1+1\\times 1)+1+1=6$。\n\n对于排列 $3,1,2$，传递时间为 $1+(3\\times 1+1\\times 1)+1=6$。\n\n对于排列 $3,2,1$，传递时间为 $(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)+2=10$。\n\n【数据范围】\n\n$30\\%$ 的数据：$m\\leq 8, n\\leq 100$。\n\n$60\\%$ 的数据：$m\\leq 20$。\n\n$70\\%$ 的数据：$m\\leq 21$。\n\n$80\\%$ 的数据：$m\\leq 22$。\n\n$100\\%$ 的数据：$2\\leq m\\leq 23$，$2\\leq n\\leq 10^5$，$1\\leq k\\leq 100$，$1\\leq S_i\\leq m$。", "locale": "zh-CN"}}}
{"pid": "P6623", "type": "P", "difficulty": 6, "samples": [["5\n5 4 1 2 3\n1 1 2 2", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "倍增", "各省省选", "字典树 Trie", "位运算"], "title": "[省选联考 2020 A 卷] 树", "background": "", "description": "给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\n\n设 $x$ 号结点的子树内（包含 $x$ 自身）的所有结点编号为 $c_1,c_2,\\dots,c_k$，定义 $x$ 的价值为：\n\n$\nval(x)=(v_{c_1}+d(c_1,x)) \\oplus (v_{c_2}+d(c_2,x)) \\oplus \\cdots \\oplus (v_{c_k}+d(c_k, x))\n$\n\n其中 $d(x,y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$\\oplus$ 表示异或运算。\n\n请你求出 $\\sum\\limits_{i=1}^n val(i)$ 的结果。\n", "inputFormat": "第一行一个正整数 $n$ 表示树的大小。\n\n第二行 $n$ 个正整数表示 $v_i$。\n\n接下来一行 $n-1$ 个正整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\n", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n$val(1)=(5+0)\\oplus(4+1)\\oplus(1+1)\\oplus(2+2)\\oplus(3+2)=3$。\n\n$val(2)=(4+0)\\oplus(2+1)\\oplus(3+1) = 3$。\n\n$val(3)=(1+0)=1$。\n\n$val(4)=(2+0)=2$。\n\n$val(5)=(3+0)=3$。\n\n和为 $12$。\n\n【数据范围】\n\n对于 $10\\%$ 的数据：$1\\leq n\\leq 2501$；\n\n对于 $40\\%$ 的数据：$1\\leq n\\leq 152501$；\n\n另有 $20\\%$ 的数据：所有 $p_i=i-1$（$2\\leq i\\leq n$）；\n\n另有 $20\\%$ 的数据：所有 $v_i=1$（$1\\leq i\\leq n$）；\n\n对于 $100\\%$ 的数据：$1\\leq n,v_i \\leq 525010$，$1\\leq p_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 树", "background": "", "description": "给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\n\n设 $x$ 号结点的子树内（包含 $x$ 自身）的所有结点编号为 $c_1,c_2,\\dots,c_k$，定义 $x$ 的价值为：\n\n$\nval(x)=(v_{c_1}+d(c_1,x)) \\oplus (v_{c_2}+d(c_2,x)) \\oplus \\cdots \\oplus (v_{c_k}+d(c_k, x))\n$\n\n其中 $d(x,y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$\\oplus$ 表示异或运算。\n\n请你求出 $\\sum\\limits_{i=1}^n val(i)$ 的结果。\n", "inputFormat": "第一行一个正整数 $n$ 表示树的大小。\n\n第二行 $n$ 个正整数表示 $v_i$。\n\n接下来一行 $n-1$ 个正整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\n", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n$val(1)=(5+0)\\oplus(4+1)\\oplus(1+1)\\oplus(2+2)\\oplus(3+2)=3$。\n\n$val(2)=(4+0)\\oplus(2+1)\\oplus(3+1) = 3$。\n\n$val(3)=(1+0)=1$。\n\n$val(4)=(2+0)=2$。\n\n$val(5)=(3+0)=3$。\n\n和为 $12$。\n\n【数据范围】\n\n对于 $10\\%$ 的数据：$1\\leq n\\leq 2501$；\n\n对于 $40\\%$ 的数据：$1\\leq n\\leq 152501$；\n\n另有 $20\\%$ 的数据：所有 $p_i=i-1$（$2\\leq i\\leq n$）；\n\n另有 $20\\%$ 的数据：所有 $v_i=1$（$1\\leq i\\leq n$）；\n\n对于 $100\\%$ 的数据：$1\\leq n,v_i \\leq 525010$，$1\\leq p_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P6624", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 4\n2 3 6\n1 3 12", "192"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2020", "各省省选", "矩阵树定理", "多项式", "最大公约数 gcd", "莫比乌斯反演", "容斥原理", "行列式"], "title": "[省选联考 2020 A 卷] 作业题", "background": "", "description": "小 W 刚刚在离散数学课学习了生成树的知识：一个无向图 $G=(V,E)$ 的生成树 $T$ 为边集 $E$ 的一个大小为 $|V|-1$ 的子集，且保证 $T$ 的生成子图在 $G$ 中连通。\n\n小 W 在做今天的作业时被这样一道题目难住了：\n\n给定一个 $n$ 个顶点 $m$ 条边（点和边都从 $1$ 开始编号）的无向图 $G$，保证图中无重边和无自环。每一条边有一个正整数边权 $w_i$，对于一棵 $G$ 的生成树 $T$，定义 $T$ 的价值为：$T$ 所包含的边的边权的最大公约数乘以边权之和，即：\n\n$$\nval(T)=\\left(\\sum\\limits_{i=1}^{n-1} w_{e_i}\\right) \\times \\gcd(w_{e_1},w_{e_2},\\dots,w_{e_{n-1}})\n$$\n\n其中 $e_1,e_2,\\dots,e_{n-1}$ 为 $T$ 包含的边的编号。\n\n小 W 需要求出 $G$ 的所有生成树 $T$ 的价值之和，他做了很久也没做出来，请你帮帮他。由于答案可能很大，你只需要给出答案对 $998244353$ 取模后的结果。", "inputFormat": "第一行两个正整数 $n,m$，表示 $G$ 的点数和边数。\n\n接下来 $m$ 行，每行三个正整数 $u_i,v_i,w_i$，第 $i$ 行表示一条无向边连接 $u_i$ 号点和 $v_i$ 号点，权值为 $w_i$。\n", "outputFormat": "仅一行一个整数，表示答案对 $998244353$ 取模后的结果。", "hint": "【样例解释 $1$】\n\n$G$ 共有三棵生成树：\n\n$T_1=\\{(1,2),(2,3)\\}$，价值为 $10\\times 2=20$。\n\n$T_2=\\{(1,2),(1,3)\\}$，价值为 $16\\times 4=64$。\n\n$T_3=\\{(1,3),(2,3)\\}$，价值为 $18\\times 6=108$。\n\n总和为 $192$。\n\n【数据规模】\n\n$10\\%$ 的数据满足：$m\\leq 15$。\n\n另有 $20\\%$ 的数据满足：$m \\leq n$。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均相同。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均为质数。\n\n$100\\%$ 的数据满足：$1\\leq n\\leq 30, 1\\leq m \\leq \\frac {n(n-1)}{2}, 1\\leq w_i \\leq 152501$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 作业题", "background": "", "description": "小 W 刚刚在离散数学课学习了生成树的知识：一个无向图 $G=(V,E)$ 的生成树 $T$ 为边集 $E$ 的一个大小为 $|V|-1$ 的子集，且保证 $T$ 的生成子图在 $G$ 中连通。\n\n小 W 在做今天的作业时被这样一道题目难住了：\n\n给定一个 $n$ 个顶点 $m$ 条边（点和边都从 $1$ 开始编号）的无向图 $G$，保证图中无重边和无自环。每一条边有一个正整数边权 $w_i$，对于一棵 $G$ 的生成树 $T$，定义 $T$ 的价值为：$T$ 所包含的边的边权的最大公约数乘以边权之和，即：\n\n$$\nval(T)=\\left(\\sum\\limits_{i=1}^{n-1} w_{e_i}\\right) \\times \\gcd(w_{e_1},w_{e_2},\\dots,w_{e_{n-1}})\n$$\n\n其中 $e_1,e_2,\\dots,e_{n-1}$ 为 $T$ 包含的边的编号。\n\n小 W 需要求出 $G$ 的所有生成树 $T$ 的价值之和，他做了很久也没做出来，请你帮帮他。由于答案可能很大，你只需要给出答案对 $998244353$ 取模后的结果。", "inputFormat": "第一行两个正整数 $n,m$，表示 $G$ 的点数和边数。\n\n接下来 $m$ 行，每行三个正整数 $u_i,v_i,w_i$，第 $i$ 行表示一条无向边连接 $u_i$ 号点和 $v_i$ 号点，权值为 $w_i$。\n", "outputFormat": "仅一行一个整数，表示答案对 $998244353$ 取模后的结果。", "hint": "【样例解释 $1$】\n\n$G$ 共有三棵生成树：\n\n$T_1=\\{(1,2),(2,3)\\}$，价值为 $10\\times 2=20$。\n\n$T_2=\\{(1,2),(1,3)\\}$，价值为 $16\\times 4=64$。\n\n$T_3=\\{(1,3),(2,3)\\}$，价值为 $18\\times 6=108$。\n\n总和为 $192$。\n\n【数据规模】\n\n$10\\%$ 的数据满足：$m\\leq 15$。\n\n另有 $20\\%$ 的数据满足：$m \\leq n$。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均相同。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均为质数。\n\n$100\\%$ 的数据满足：$1\\leq n\\leq 30, 1\\leq m \\leq \\frac {n(n-1)}{2}, 1\\leq w_i \\leq 152501$。", "locale": "zh-CN"}}}
{"pid": "P6625", "type": "P", "difficulty": 2, "samples": [["3\n2 -1 2", "4"], ["7\n-4 3 0 7 -3 -5 -3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "各省省选", "前缀和"], "title": "[省选联考 2020 B 卷] 卡牌游戏", "background": null, "description": "轩轩某天想到了一个卡牌游戏，游戏规则如下：\n\n1. 初始时轩轩的手中有自左向右排成一排的 $n$ 张卡牌，每张卡牌上有一个整数分值。\n2. 接下来，轩轩每次可以选取卡牌序列最左边的连续若干张卡牌（至少 $2$ 张），将它们替换为一张新卡牌。新卡牌将插入到序列的最左端，它的分值为本次操作中被替换掉的卡牌的分值之和。\n3. 初始时轩轩总分为 $0$，每执行一次卡牌替换操作，新卡牌的分值将加到总分中。当序列长度为 $1$ 时游戏结束，轩轩也可以在任意时刻结束游戏。\n\n现在给出序列中各个卡牌的分值，请你来帮助轩轩计算他能够获得的最高总分是多少？", "inputFormat": "第一行一个正整数 $n$，代表卡牌的数目。\n\n接下来一行 $n$ 个以空格分隔的整数，第 $i$ 个数字 $a_i$ 代表自左向右第 $i$ 张卡牌的分值。", "outputFormat": "仅一行一个整数表示答案。", "hint": "**样例解释 1**\n\n最优策略为，首先选择最左侧的两张卡牌，总分增加 $2 + (-1) = 1$。此时轩轩选择的两张卡牌被替换为一张分值为 $1$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $1$ 和 $2$。\n\n接下来选择当前序列中所有卡牌，总分增加 $1 + 2 = 3$，总分为 $4$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时序列中只有一张分值为 $3$ 的卡牌，游戏结束。\n\n**样例解释 2**\n\n\n最优策略为，首先选择最左侧的四张卡牌，总分增加  $(-4) + 3 + 0 + 7 = 6$。此时轩轩选择的四张卡牌被替换为一张分值为 $6$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $6, -3, -5, -3$。\n\n再选择最左侧的两张卡牌，总分增加 $6 + (-3) = 3$，总分为 $9$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $3, -5, -3$。\n\n此时无论如何操作均无法使总分继续增大，轩轩选择结束游戏。\n\n**数据范围与约定**\n\n测试点 $1 \\sim6 $ 满足：$1\\le n\\le 16, |a_i| \\le 100$。\n\n测试点 $7 \\sim 12$ 满足：$1\\le n\\le 10^3, |a_i| \\le 100$。\n\n测试点 $13 \\sim 20$ 满足：$1\\le n\\le 10^5, |a_i| \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 卡牌游戏", "background": null, "description": "轩轩某天想到了一个卡牌游戏，游戏规则如下：\n\n1. 初始时轩轩的手中有自左向右排成一排的 $n$ 张卡牌，每张卡牌上有一个整数分值。\n2. 接下来，轩轩每次可以选取卡牌序列最左边的连续若干张卡牌（至少 $2$ 张），将它们替换为一张新卡牌。新卡牌将插入到序列的最左端，它的分值为本次操作中被替换掉的卡牌的分值之和。\n3. 初始时轩轩总分为 $0$，每执行一次卡牌替换操作，新卡牌的分值将加到总分中。当序列长度为 $1$ 时游戏结束，轩轩也可以在任意时刻结束游戏。\n\n现在给出序列中各个卡牌的分值，请你来帮助轩轩计算他能够获得的最高总分是多少？", "inputFormat": "第一行一个正整数 $n$，代表卡牌的数目。\n\n接下来一行 $n$ 个以空格分隔的整数，第 $i$ 个数字 $a_i$ 代表自左向右第 $i$ 张卡牌的分值。", "outputFormat": "仅一行一个整数表示答案。", "hint": "**样例解释 1**\n\n最优策略为，首先选择最左侧的两张卡牌，总分增加 $2 + (-1) = 1$。此时轩轩选择的两张卡牌被替换为一张分值为 $1$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $1$ 和 $2$。\n\n接下来选择当前序列中所有卡牌，总分增加 $1 + 2 = 3$，总分为 $4$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时序列中只有一张分值为 $3$ 的卡牌，游戏结束。\n\n**样例解释 2**\n\n\n最优策略为，首先选择最左侧的四张卡牌，总分增加  $(-4) + 3 + 0 + 7 = 6$。此时轩轩选择的四张卡牌被替换为一张分值为 $6$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $6, -3, -5, -3$。\n\n再选择最左侧的两张卡牌，总分增加 $6 + (-3) = 3$，总分为 $9$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $3, -5, -3$。\n\n此时无论如何操作均无法使总分继续增大，轩轩选择结束游戏。\n\n**数据范围与约定**\n\n测试点 $1 \\sim6 $ 满足：$1\\le n\\le 16, |a_i| \\le 100$。\n\n测试点 $7 \\sim 12$ 满足：$1\\le n\\le 10^3, |a_i| \\le 100$。\n\n测试点 $13 \\sim 20$ 满足：$1\\le n\\le 10^5, |a_i| \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6626", "type": "P", "difficulty": 6, "samples": [["1\n4 2\n1 2\n2 3\n3 4\n1 1\n2 2", "1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "各省省选", "点分治"], "title": "[省选联考 2020 B 卷] 消息传递", "background": "", "description": "给定一个包含 $n$ 个人（从 $1$ 到 $n$ 编号）的树形社交网络。如果一个人在某天收到了一条消息，则下一天他会将消息传递给所有与他有直接社交关系的人。\n\n现在有 $m$ 次询问，每次询问假定第 $0$ 天 $x$ 号人收到了一条消息，请你计算第 $k$ 天时新收到此条消息的人数（即第 $k$ 天前收到过此条消息的人不计入其中）。不同询问间互不影响。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行一个整数 $T$，为测试数据组数。\n\n对于每组测试数据：\n\n第一行两个数 $n,m$ 分别表示树形社交网络的人数和询问的数量。\n\n接下来 $n - 1$ 行，每行两个数 $a, b$，表示 $a$ 号人和 $b$ 号人之间有直接社交关系。保证输入的是树形社交网络。\n\n接下来 $m$ 行，每行两个数 $x, k$，意义见题目描述。\n", "outputFormat": "对于每组测试数据：输出 $m$ 行，每行一个数表示询问的答案。\n", "hint": "**样例解释**\n\n第一个询问，第一天新收到消息的人只有 $2$ 号。\n第二个询问，第一天新收到消息的人有 $1$、$3$ 号，第二天新收到消息的人有 $4$ 号。\n\n**数据范围与约定**\n\n对于测试点 $1$：$1\\le n, m\\le 10$。  \n对于测试点 $2$：$1\\le n, m\\le 100$。  \n对于测试点 $3$：$1\\le n, m\\le 1000$。  \n对于测试点 $4\\sim6$：$1\\le n, m\\le 10^5, k\\le 20$。  \n对于测试点 $7\\sim10$：$1\\le n, m\\le 10^5$。  \n对于所有测试点：$1\\le T\\le 5, 1\\le x\\le n, 0\\le k < n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 消息传递", "background": "", "description": "给定一个包含 $n$ 个人（从 $1$ 到 $n$ 编号）的树形社交网络。如果一个人在某天收到了一条消息，则下一天他会将消息传递给所有与他有直接社交关系的人。\n\n现在有 $m$ 次询问，每次询问假定第 $0$ 天 $x$ 号人收到了一条消息，请你计算第 $k$ 天时新收到此条消息的人数（即第 $k$ 天前收到过此条消息的人不计入其中）。不同询问间互不影响。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行一个整数 $T$，为测试数据组数。\n\n对于每组测试数据：\n\n第一行两个数 $n,m$ 分别表示树形社交网络的人数和询问的数量。\n\n接下来 $n - 1$ 行，每行两个数 $a, b$，表示 $a$ 号人和 $b$ 号人之间有直接社交关系。保证输入的是树形社交网络。\n\n接下来 $m$ 行，每行两个数 $x, k$，意义见题目描述。\n", "outputFormat": "对于每组测试数据：输出 $m$ 行，每行一个数表示询问的答案。\n", "hint": "**样例解释**\n\n第一个询问，第一天新收到消息的人只有 $2$ 号。\n第二个询问，第一天新收到消息的人有 $1$、$3$ 号，第二天新收到消息的人有 $4$ 号。\n\n**数据范围与约定**\n\n对于测试点 $1$：$1\\le n, m\\le 10$。  \n对于测试点 $2$：$1\\le n, m\\le 100$。  \n对于测试点 $3$：$1\\le n, m\\le 1000$。  \n对于测试点 $4\\sim6$：$1\\le n, m\\le 10^5, k\\le 20$。  \n对于测试点 $7\\sim10$：$1\\le n, m\\le 10^5$。  \n对于所有测试点：$1\\le T\\le 5, 1\\le x\\le n, 0\\le k < n$。", "locale": "zh-CN"}}}
{"pid": "P6627", "type": "P", "difficulty": 4, "samples": [["4\n1 -100 -80 37\n2 -3 3\n3 4 64\n1 -10 1024 156", "223 -3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "各省省选", "离散化", "差分"], "title": "[省选联考 2020 B 卷] 幸运数字", "background": null, "description": "为庆祝疫情防治取得重大进展，某商场举行酬宾活动，给顾客一些优惠额度，规则如下：\n\n1. 每位顾客可以任意选择一个整数作为自己的幸运数字。\n2. 每位顾客的初始优惠额度为 $0$ 元。\n3. 商场有 $n$ 个奖励条件，对应不同的奖励额度 $w_i$。\n4. 每位顾客需要依次比对这 $n$ 个奖励条件，如果该位顾客选择的幸运数字满足第 $i$ 个条件，那么他的优惠额度就会**异或**上这个条件所对应的奖励额度。\n\n奖励条件共有三种，假设顾客选择的幸运数字为 $x$：\n\n1. 区间型条件，其有两个参数 $L$ 与 $R$，满足条件为 $L \\le x\\le R$。保证 $L < R$。\n2. 相等型条件，其有一个参数 $A$，满足条件为 $x = A$。\n3. 不等型条件，其有一个参数 $B$，满足条件为 $x \\neq B$。\n\n小炎同学获知了所有奖励条件的信息，他希望知道一位顾客能够得到的最大优惠额度以及对应的幸运数字是多少，请你帮他计算。", "inputFormat": "第一行包含一个正整数 $n$，代表奖励条件的数量。\n\n接下来 $n$ 行，每行三个或四个整数表示一个奖励条件。每行第一个整数 $t_i$ 代表奖励条件的类型：\n\n1. $t_i = 1$ 则该条件是区间型条件，接下来三个整数，分别代表 $L, R, w_i$。\n2. $t_i = 2$ 则该条件是相等型条件，接下来两个整数，分别代表 $A, w_i$。\n3. $t_i = 3$ 则该条件是不等型条件，接下来两个整数，分别代表 $B, w_i$。", "outputFormat": "输出一行两个整数，第一个数代表能够得到的最大优惠额度，第二个数代表对应的幸运数字。\n\n如果有多个幸运数字能够得到最大优惠额度，输出绝对值最小的那个。如果还有多个，则输出值最大的。", "hint": "**样例解释**\n\n幸运数字 $-3$ 满足奖励条件 $2, 3, 4$，奖励额度为 $3\\oplus 64\\oplus 156 = 223$，其中 $\\oplus$ 表示异或运算。\n\n**数据范围与约定**\n\n$20\\%$ 的数据满足：$n, |L|, |R|, |A|, |B| \\le 1000$。  \n$40\\%$ 的数据满足：$n\\le 1000$。  \n$100\\%$ 的数据满足：$1\\le n\\le 10^5, |L|, |R|, |A|, |B|\\le 10^9, 1\\le w_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 幸运数字", "background": null, "description": "为庆祝疫情防治取得重大进展，某商场举行酬宾活动，给顾客一些优惠额度，规则如下：\n\n1. 每位顾客可以任意选择一个整数作为自己的幸运数字。\n2. 每位顾客的初始优惠额度为 $0$ 元。\n3. 商场有 $n$ 个奖励条件，对应不同的奖励额度 $w_i$。\n4. 每位顾客需要依次比对这 $n$ 个奖励条件，如果该位顾客选择的幸运数字满足第 $i$ 个条件，那么他的优惠额度就会**异或**上这个条件所对应的奖励额度。\n\n奖励条件共有三种，假设顾客选择的幸运数字为 $x$：\n\n1. 区间型条件，其有两个参数 $L$ 与 $R$，满足条件为 $L \\le x\\le R$。保证 $L < R$。\n2. 相等型条件，其有一个参数 $A$，满足条件为 $x = A$。\n3. 不等型条件，其有一个参数 $B$，满足条件为 $x \\neq B$。\n\n小炎同学获知了所有奖励条件的信息，他希望知道一位顾客能够得到的最大优惠额度以及对应的幸运数字是多少，请你帮他计算。", "inputFormat": "第一行包含一个正整数 $n$，代表奖励条件的数量。\n\n接下来 $n$ 行，每行三个或四个整数表示一个奖励条件。每行第一个整数 $t_i$ 代表奖励条件的类型：\n\n1. $t_i = 1$ 则该条件是区间型条件，接下来三个整数，分别代表 $L, R, w_i$。\n2. $t_i = 2$ 则该条件是相等型条件，接下来两个整数，分别代表 $A, w_i$。\n3. $t_i = 3$ 则该条件是不等型条件，接下来两个整数，分别代表 $B, w_i$。", "outputFormat": "输出一行两个整数，第一个数代表能够得到的最大优惠额度，第二个数代表对应的幸运数字。\n\n如果有多个幸运数字能够得到最大优惠额度，输出绝对值最小的那个。如果还有多个，则输出值最大的。", "hint": "**样例解释**\n\n幸运数字 $-3$ 满足奖励条件 $2, 3, 4$，奖励额度为 $3\\oplus 64\\oplus 156 = 223$，其中 $\\oplus$ 表示异或运算。\n\n**数据范围与约定**\n\n$20\\%$ 的数据满足：$n, |L|, |R|, |A|, |B| \\le 1000$。  \n$40\\%$ 的数据满足：$n\\le 1000$。  \n$100\\%$ 的数据满足：$1\\le n\\le 10^5, |L|, |R|, |A|, |B|\\le 10^9, 1\\le w_i\\le 10^9$。", "locale": "zh-CN"}}}
