{"pid": "P2045", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 3\n0 2 1\n1 4 2", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["网络流", "费用流"], "title": "方格取数加强版", "background": "", "description": "给出一个 $n\\times n$ 的矩阵,每一格有一个非负整数 $A_{i,j}$（$A_{i,j} \\le 10^3$），现在从 $(1,1)$ 出发，可以往右或者往下走，最后到达 $(n,n)$，每达到一格，把该格子的数取出来，该格子的数就变成 $0$，这样一共走 $K$ 次，现在要求 $K$ 次所达到的方格的数的和最大。", "inputFormat": "第一行两个数 $n,K$（$1 \\le n \\le 50$，$0 \\le K \\le 10$）。\n\n接下来 $n$ 行，每行 $n$ 个数，分别表示矩阵的每个格子的数。", "outputFormat": "一个数，为最大和。\n", "hint": "每个格子中的数不超过 $1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Grid Number Picking - Enhanced", "background": "", "description": "Given an $n \\times n$ matrix. Each cell contains a non-negative integer $A_{i,j}$ ($A_{i,j} \\le 10^3$). Starting from $(1, 1)$, you may move only right or down and finally reach $(n, n)$. Every time you arrive at a cell, you take the number in that cell and the cell’s value becomes $0$. Repeat this walk a total of $K$ times. Find the maximum possible sum of the values collected over the $K$ walks.", "inputFormat": "The first line contains two integers $n, K$ ($1 \\le n \\le 50$, $0 \\le K \\le 10$).\n\nThe next $n$ lines each contain $n$ integers, denoting the value of each cell in the matrix.", "outputFormat": "Output a single integer, the maximum sum.", "hint": "The value in each cell does not exceed $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方格取数加强版", "background": "", "description": "给出一个 $n\\times n$ 的矩阵,每一格有一个非负整数 $A_{i,j}$（$A_{i,j} \\le 10^3$），现在从 $(1,1)$ 出发，可以往右或者往下走，最后到达 $(n,n)$，每达到一格，把该格子的数取出来，该格子的数就变成 $0$，这样一共走 $K$ 次，现在要求 $K$ 次所达到的方格的数的和最大。", "inputFormat": "第一行两个数 $n,K$（$1 \\le n \\le 50$，$0 \\le K \\le 10$）。\n\n接下来 $n$ 行，每行 $n$ 个数，分别表示矩阵的每个格子的数。", "outputFormat": "一个数，为最大和。\n", "hint": "每个格子中的数不超过 $1000$。", "locale": "zh-CN"}}}
{"pid": "P2046", "type": "P", "difficulty": 6, "samples": [["1\n1\n2\n3\n4\n5\n6\n7\n8", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["图论", "2010", "NOI", "最短路", "最小割"], "title": "[NOI2010] 海拔", "background": "", "description": "YT 市是一个规划良好的城市，城市被东西向和南北向的主干道划分为 $n \\times n$ 个区域。简单起见，可以将 YT 市看作 一个正方形，每一个区域也可看作一个正方形。从而，YT 城市中包括 $(n+1) \\times (n+1)$ 个交叉路口和 $2n \\times (n+1)$ 条双向道路（简称道路），每条双向道路连接主干道上两个相邻的交叉路口。下图为一张 YT 市的地图（$n = 2$），城市被划分为 $2 \\times 2$ 个区域，包括 $3 \\times 3$ 个交叉路口和 $12$ 条双向道路。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1133.png) \n\n小 Z 作为该市的市长，他根据统计信息得到了每天上班高峰期间 YT 市每条道路两个方向的人流量，即在高峰期间沿着该方向通过这条道路的人数。每一个交叉路口都有不同的海拔高度值，YT 市市民认为爬坡是一件非常累的事情，每向上爬 $h$ 的高度，就需要消耗 $h$ 的体力。如果是下坡的话，则不需要耗费体力。因此如果一段道路的终点海拔减去起点海拔的值为 $h$（注意 $h$ 可能是负数），那么一个人经过这段路所消耗的体力是 $\\max\\{0, h\\}$。\n\n小 Z 还测量得到这个城市西北角的交叉路口海拔为 $0$，东南角的交叉路口海拔为 $1$（如上图所示），但其它交叉路口的海拔高度都无法得知。小 Z 想知道在最理想的情况下（即你可以任意假设其他路口的海拔高度），每天上班高峰期间所有人爬坡消耗的总体力和的最小值。", "inputFormat": "第一行包含一个整数 $n$。\n\n接下来 $4n(n + 1)$ 行，每行包含一个非负整数分别表示每一条道路每一个方向的人流量信息。\n\n输入顺序：$n(n + 1)$个数表示所有从西到东方向的人流量，然后 $n(n + 1)$ 个数表示所有从北到南方向的人流量，$n(n + 1)$ 个数表示所有从东到西方向的人流量，最后是 $n(n + 1)$ 个数表示所有从南到北方向的人流量。对于每一个方向，输入顺序按照起点由北向南，若南北方向相同时由西到东的顺序给出（参见样例输入）。", "outputFormat": "仅包含一个数，表示在最理想情况下每天上班高峰期间所有人爬坡所消耗的总体力和（即总体力和的最小值），结果四舍五入到整数。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1134.png) \n\n### 数据范围\n\n- 对于 $20\\%$ 的数据：$n \\leq 3$；\n- 对于 $50\\%$ 的数据：$n \\leq 15$；\n- 对于 $80\\%$ 的数据：$n \\leq 40$；\n- 对于 $100\\%$ 的数据：$1 \\leq n \\leq 500$，$0 \\leq \\text{流量} \\leq 10^6$ 且所有流量均为整数。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Elevation", "background": "", "description": "YT City is a well-planned city divided by the main east–west and north–south roads into $n \\times n$ regions. For simplicity, you can regard YT City as a square, and each region as a square as well. Thus, the city contains $(n+1) \\times (n+1)$ intersections and $2n \\times (n+1)$ bidirectional roads (simply called roads), where each bidirectional road connects two adjacent intersections on the main roads. The figure below shows a map of YT City when $n = 2$, where the city is divided into $2 \\times 2$ regions, containing $3 \\times 3$ intersections and $12$ bidirectional roads.\n\n![](https://cdn.luogu.com.cn/upload/pic/1133.png)\n\nXiao Z, the mayor of the city, obtained the bidirectional traffic flow for each road in both directions during the morning rush hour, i.e., the number of people passing along that direction during the rush hour. Each intersection has an elevation value. YT City residents consider uphill walking tiring: ascending by a height of $h$ consumes $h$ stamina. Going downhill costs no stamina. Therefore, if the endpoint elevation minus the start elevation of a road is $h$ (note that $h$ may be negative), then the stamina consumed by a person traversing that road is $\\max\\{0, h\\}$.\n\nXiao Z also measured that the intersection at the northwest corner has elevation $0$, and the intersection at the southeast corner has elevation $1$ (as shown above), but the elevations of the other intersections are unknown. He wants to know, in the most favorable situation (i.e., you may assign elevations to the other intersections arbitrarily), the minimum possible total stamina spent on climbing by everyone during the morning rush hour.", "inputFormat": "The first line contains an integer $n$.\n\nThen follow $4n(n + 1)$ lines, each containing a non-negative integer representing the traffic flow for one road in one direction.\n\nInput order: first $n(n + 1)$ numbers for all movements from West to East, then $n(n + 1)$ numbers for all movements from North to South, then $n(n + 1)$ numbers for all movements from East to West, and finally $n(n + 1)$ numbers for all movements from South to North. For each direction, the entries are listed by starting intersections ordered from North to South, and when the north–south position is the same, from West to East (see the sample input).", "outputFormat": "Output a single number, the minimum possible total stamina spent on climbing by everyone during the morning rush hour in the most favorable situation, rounded to the nearest integer.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1134.png)\n\n# Constraints\n\n- For $20\\%$ of the testdata: $n \\leq 3$.\n- For $50\\%$ of the testdata: $n \\leq 15$.\n- For $80\\%$ of the testdata: $n \\leq 40$.\n- For $100\\%$ of the testdata: $1 \\leq n \\leq 500$, $0 \\leq \\text{flow} \\leq 10^6$, and all flows are integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 海拔", "background": "", "description": "YT 市是一个规划良好的城市，城市被东西向和南北向的主干道划分为 $n \\times n$ 个区域。简单起见，可以将 YT 市看作 一个正方形，每一个区域也可看作一个正方形。从而，YT 城市中包括 $(n+1) \\times (n+1)$ 个交叉路口和 $2n \\times (n+1)$ 条双向道路（简称道路），每条双向道路连接主干道上两个相邻的交叉路口。下图为一张 YT 市的地图（$n = 2$），城市被划分为 $2 \\times 2$ 个区域，包括 $3 \\times 3$ 个交叉路口和 $12$ 条双向道路。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1133.png) \n\n小 Z 作为该市的市长，他根据统计信息得到了每天上班高峰期间 YT 市每条道路两个方向的人流量，即在高峰期间沿着该方向通过这条道路的人数。每一个交叉路口都有不同的海拔高度值，YT 市市民认为爬坡是一件非常累的事情，每向上爬 $h$ 的高度，就需要消耗 $h$ 的体力。如果是下坡的话，则不需要耗费体力。因此如果一段道路的终点海拔减去起点海拔的值为 $h$（注意 $h$ 可能是负数），那么一个人经过这段路所消耗的体力是 $\\max\\{0, h\\}$。\n\n小 Z 还测量得到这个城市西北角的交叉路口海拔为 $0$，东南角的交叉路口海拔为 $1$（如上图所示），但其它交叉路口的海拔高度都无法得知。小 Z 想知道在最理想的情况下（即你可以任意假设其他路口的海拔高度），每天上班高峰期间所有人爬坡消耗的总体力和的最小值。", "inputFormat": "第一行包含一个整数 $n$。\n\n接下来 $4n(n + 1)$ 行，每行包含一个非负整数分别表示每一条道路每一个方向的人流量信息。\n\n输入顺序：$n(n + 1)$个数表示所有从西到东方向的人流量，然后 $n(n + 1)$ 个数表示所有从北到南方向的人流量，$n(n + 1)$ 个数表示所有从东到西方向的人流量，最后是 $n(n + 1)$ 个数表示所有从南到北方向的人流量。对于每一个方向，输入顺序按照起点由北向南，若南北方向相同时由西到东的顺序给出（参见样例输入）。", "outputFormat": "仅包含一个数，表示在最理想情况下每天上班高峰期间所有人爬坡所消耗的总体力和（即总体力和的最小值），结果四舍五入到整数。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1134.png) \n\n### 数据范围\n\n- 对于 $20\\%$ 的数据：$n \\leq 3$；\n- 对于 $50\\%$ 的数据：$n \\leq 15$；\n- 对于 $80\\%$ 的数据：$n \\leq 40$；\n- 对于 $100\\%$ 的数据：$1 \\leq n \\leq 500$，$0 \\leq \\text{流量} \\leq 10^6$ 且所有流量均为整数。", "locale": "zh-CN"}}}
{"pid": "P2047", "type": "P", "difficulty": 4, "samples": [["4 4\n1 2 1\n2 3 1\n3 4 1\n4 1 1", "1.000\n1.000\n1.000\n1.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2007", "NOI", "最短路"], "title": "[NOI2007] 社交网络", "background": null, "description": "在社交网络（Social Network）的研究中，我们常常使用图论概念去解释一些社会现象。不妨看这样的一个问题：  \n在一个社交圈子里有 $n$ 个人，人与人之间有不同程度的关系。我们将这个关系网络对应到一个 $n$ 个结点的无向图上，两个不同的人若互相认识，则在他们对应的结点之间连接一条无向边，并附上一个正数权值 $c$，$c$ 越小，表示两个人之间的关系越密切。我们可以用对应结点之间的最短路长度来衡量两个人 $s$ 和 $t$ 之间的关系密切程度，注意到最短路径上的其他结点为 $s$ 和 $t$ 的联系提供了某种便利，即这些结点对于 $s$ 和 $t$ 之间的联系有一定的重要程度。我们可以通过统计经过一个结点 $v$ 的最短路径的数目来衡量该结点在社交网络中的重要程度。考虑到两个结点 $A$ 和 $B$ 之间可能会有多条最短路径。我们修改重要程度的定义如下：令 $C_{s,t}$ 表示从 $s$ 到 $t$ 的不同的最短路的数目，$C_{s,t}(v)$ 表示经过 $v$ 从 $s$ 到 $t$ 的最短路的数目；则定义：\n\n$$ I(v)=\\sum_{s \\ne v,t\\ne v} \\frac{C_{s,t}(v)}{C_{s,t}}$$\n\n为结点 $v$ 在社交网络中的重要程度。为了使 $I(v)$ 和 $C_{s,t}(v)$ 有意义，我们规定需要处理的社交网络都是连通的无向图，即任意两个结点之间都有一条有限长度的最短路径。现在给出这样一幅描述社交网络的加权无向图，请你求出每一个结点的重要程度。", "inputFormat": "输入第一行有两个整数 $n$ 和 $m$，表示社交网络中结点和无向边的数目。    \n在无向图中，我们将所有结点从 $1$ 到 $n$ 进行编号。\n\n接下来 $m$ 行，每行用三个整数 $a,b,c$ 描述一条连接结点 $a$ 和 $b$，权值为 $c$ 的无向边。\n注意任意两个结点之间最多有一条无向边相连，无向图中也不会出现自环（即不存在一条无向边的两个端点是相同的结点）。", "outputFormat": "输出包括 $n$ 行，每行一个实数，精确到小数点后 $3$ 位。第 $i$ 行的实数表示结点 $i$ 在社交网络中的重要程度。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1136.png) \n\n对于 $1$ 号结点而言，只有 $2$ 号到 $4$ 号结点和 $4$ 号到 $2$ 号结点的最短路经过 $1$ 号结点，而 $2$号结点和 $4$ 号结点之间的最短路又有 $2$ 条。因而根据定义， $1$ 号结点的重要程度计算为 $\\frac{1}{2}+\\frac{1}{2}=1$。由于图的对称性，其他三个结点的重要程度也都是 $1$。\n\n对于 $50\\%$ 的数据，$n \\le 10,m \\le 45$。     \n对于 $100\\%$ 的数据，$n \\le 100,m \\le 4500$，任意一条边的权值 $c$ 是正整数且 $1 \\leqslant c \\leqslant 1000$。    \n所有数据中保证给出的无向图连通，且任意两个结点之间的最短路径数目不超过 $10^{10}$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2007] Social Network", "background": "", "description": "In the study of social networks (Social Network), we often use graph theory to explain social phenomena. Consider the following problem:  \nThere are $n$ people in a social circle, and the relationships between people have different strengths. We model this relationship network as an undirected graph with $n$ nodes. If two different people know each other, we connect an undirected edge between their corresponding nodes and assign it a positive weight $c$. The smaller $c$ is, the closer their relationship is. We measure the closeness between two people $s$ and $t$ by the length of the shortest path between their corresponding nodes. Note that other nodes on a shortest path provide some convenience for the connection between $s$ and $t$, that is, these nodes have a certain degree of importance for the connection between $s$ and $t$. We can measure a node’s importance in the social network by counting the number of shortest paths that pass through a node $v$. Considering that there may be multiple shortest paths between two nodes $A$ and $B$, we modify the definition of importance as follows: let $C_{s,t}$ denote the number of different shortest paths from $s$ to $t$, and let $C_{s,t}(v)$ denote the number of shortest paths from $s$ to $t$ that pass through $v$. Then define:\n\n$$ I(v)=\\sum_{s \\ne v,t\\ne v} \\frac{C_{s,t}(v)}{C_{s,t}}$$\n\nas the importance of node $v$ in the social network. To make $I(v)$ and $C_{s,t}(v)$ meaningful, we stipulate that the social networks to be processed are connected undirected graphs, i.e., there is a shortest path of finite length between any two nodes. Given such a weighted undirected graph describing a social network, please compute the importance of each node.\n\nConstraints:\n- For $50\\%$ of the testdata, $n \\le 10, m \\le 45$.\n- For $100\\%$ of the testdata, $n \\le 100, m \\le 4500$, each edge weight $c$ is a positive integer and $1 \\leqslant c \\leqslant 1000$.\n- The graph is guaranteed to be connected, and the number of shortest paths between any two nodes does not exceed $10^{10}$.", "inputFormat": "The first line contains two integers $n$ and $m$, the number of nodes and undirected edges in the social network.  \nIn the undirected graph, all nodes are numbered from $1$ to $n$.\n\nEach of the next $m$ lines contains three integers $a, b, c$ describing an undirected edge connecting nodes $a$ and $b$ with weight $c$.  \nNote that there is at most one undirected edge between any two nodes, and there are no self-loops in the undirected graph (that is, there is no undirected edge whose two endpoints are the same node).", "outputFormat": "Output $n$ lines, each containing a real number rounded to $3$ decimal places. The real number on the $i$-th line represents the importance of node $i$ in the social network.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1136.png)\n\nFor node $1$, only the shortest paths from node $2$ to node $4$ and from node $4$ to node $2$ pass through node $1$. Moreover, there are $2$ shortest paths between node $2$ and node $4$. Therefore, by the definition, the importance of node $1$ is $\\frac{1}{2}+\\frac{1}{2}=1$. Due to the symmetry of the graph, the importance of the other three nodes is also $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2007] 社交网络", "background": null, "description": "在社交网络（Social Network）的研究中，我们常常使用图论概念去解释一些社会现象。不妨看这样的一个问题：  \n在一个社交圈子里有 $n$ 个人，人与人之间有不同程度的关系。我们将这个关系网络对应到一个 $n$ 个结点的无向图上，两个不同的人若互相认识，则在他们对应的结点之间连接一条无向边，并附上一个正数权值 $c$，$c$ 越小，表示两个人之间的关系越密切。我们可以用对应结点之间的最短路长度来衡量两个人 $s$ 和 $t$ 之间的关系密切程度，注意到最短路径上的其他结点为 $s$ 和 $t$ 的联系提供了某种便利，即这些结点对于 $s$ 和 $t$ 之间的联系有一定的重要程度。我们可以通过统计经过一个结点 $v$ 的最短路径的数目来衡量该结点在社交网络中的重要程度。考虑到两个结点 $A$ 和 $B$ 之间可能会有多条最短路径。我们修改重要程度的定义如下：令 $C_{s,t}$ 表示从 $s$ 到 $t$ 的不同的最短路的数目，$C_{s,t}(v)$ 表示经过 $v$ 从 $s$ 到 $t$ 的最短路的数目；则定义：\n\n$$ I(v)=\\sum_{s \\ne v,t\\ne v} \\frac{C_{s,t}(v)}{C_{s,t}}$$\n\n为结点 $v$ 在社交网络中的重要程度。为了使 $I(v)$ 和 $C_{s,t}(v)$ 有意义，我们规定需要处理的社交网络都是连通的无向图，即任意两个结点之间都有一条有限长度的最短路径。现在给出这样一幅描述社交网络的加权无向图，请你求出每一个结点的重要程度。", "inputFormat": "输入第一行有两个整数 $n$ 和 $m$，表示社交网络中结点和无向边的数目。    \n在无向图中，我们将所有结点从 $1$ 到 $n$ 进行编号。\n\n接下来 $m$ 行，每行用三个整数 $a,b,c$ 描述一条连接结点 $a$ 和 $b$，权值为 $c$ 的无向边。\n注意任意两个结点之间最多有一条无向边相连，无向图中也不会出现自环（即不存在一条无向边的两个端点是相同的结点）。", "outputFormat": "输出包括 $n$ 行，每行一个实数，精确到小数点后 $3$ 位。第 $i$ 行的实数表示结点 $i$ 在社交网络中的重要程度。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1136.png) \n\n对于 $1$ 号结点而言，只有 $2$ 号到 $4$ 号结点和 $4$ 号到 $2$ 号结点的最短路经过 $1$ 号结点，而 $2$号结点和 $4$ 号结点之间的最短路又有 $2$ 条。因而根据定义， $1$ 号结点的重要程度计算为 $\\frac{1}{2}+\\frac{1}{2}=1$。由于图的对称性，其他三个结点的重要程度也都是 $1$。\n\n对于 $50\\%$ 的数据，$n \\le 10,m \\le 45$。     \n对于 $100\\%$ 的数据，$n \\le 100,m \\le 4500$，任意一条边的权值 $c$ 是正整数且 $1 \\leqslant c \\leqslant 1000$。    \n所有数据中保证给出的无向图连通，且任意两个结点之间的最短路径数目不超过 $10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P2048", "type": "P", "difficulty": 6, "samples": [["4 3 2 3\n3\n2\n-6\n8", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2010", "堆", "NOI", "O2优化", "前缀和", "ST 表"], "title": "[NOI2010] 超级钢琴", "background": "", "description": "小 Z 是一个小有名气的钢琴家，最近 C 博士送给了小 Z 一架超级钢琴，小 Z 希望能够用这架钢琴创作出世界上最美妙的音乐。\n\n这架超级钢琴可以弹奏出 $n$ 个音符，编号为 $1$ 至 $n$。第 $i$ 个音符的美妙度为 $A_i$，其中 $A_i$ 可正可负。\n\n一个“超级和弦”由若干个编号连续的音符组成，包含的音符个数不少于 $L$ 且不多于 $R$。我们定义超级和弦的美妙度为其包含的所有音符的美妙度之和。两个超级和弦被认为是相同的，当且仅当这两个超级和弦所包含的音符集合是相同的。\n\n小 Z 决定创作一首由 $k$ 个超级和弦组成的乐曲，为了使得乐曲更加动听，小 Z 要求该乐曲由 $k$ 个不同的超级和弦组成。我们定义一首乐曲的美妙度为其所包含的所有超级和弦的美妙度之和。小 Z 想知道他能够创作出来的乐曲美妙度最大值是多少。", "inputFormat": "输入第一行包含四个正整数 $n, k, L, R$。其中 $n$ 为音符的个数，$k$ 为乐曲所包含的超级和弦个数，$L$ 和 $R$ 分别是超级和弦所包含音符个数的下限和上限。\n\n接下来 $n$ 行，每行包含一个整数 $A_i$，表示按编号从小到大每个音符的美妙度。", "outputFormat": "输出只有一个整数，表示乐曲美妙度的最大值。\n", "hint": "### 样例解释\n\n共有 $5$ 种不同的超级和弦：\n\n1. 音符 $1 \\sim 2$，美妙度为 $3+2=5$；\n2. 音符 $2 \\sim 3$，美妙度为 $2+(-6)=-4$；\n3. 音符 $3 \\sim 4$，美妙度为 $(-6)+8=2$；\n4. 音符 $1 \\sim 3$，美妙度为 $3+2+(-6)=-1$；\n5. 音符 $2 \\sim 4$，美妙度为 $2+(-6)+8=4$。\n\n最优方案为：乐曲由和弦 $1,3,5$ 组成，美妙度为 $5+2+4=11$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2609.png) \n\n所有数据满足：$-1000 \\leq A_i \\leq 1000$，$1 \\leq L \\leq R \\leq n$ 且保证一定存在满足要求的乐曲。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Super Piano", "background": "", "description": "Xiao Z is a well-known pianist. Recently, Dr. C gave Xiao Z a super piano, and Xiao Z hopes to use it to create the most beautiful music in the world.\n\nThis super piano can play $n$ notes, indexed from $1$ to $n$. The beauty value of the $i$-th note is $A_i$, where $A_i$ can be positive or negative.\n\nA “super chord” consists of several consecutive notes, with the number of included notes no less than $L$ and no more than $R$. We define the beauty of a super chord as the sum of the beauty values of all notes it contains. Two super chords are considered the same if and only if the sets of notes they contain are identical.\n\nXiao Z decides to compose a piece consisting of $k$ super chords. To make the piece more pleasing, the $k$ super chords must be different. We define the beauty of a piece as the sum of the beauties of all its super chords. Xiao Z wants to know the maximum possible beauty of such a piece.\n\nAll testdata satisfy: $-1000 \\leq A_i \\leq 1000$, $1 \\leq L \\leq R \\leq n$, and it is guaranteed that there exists a valid piece that meets the requirements.", "inputFormat": "The first line contains four positive integers $n, k, L, R$, where $n$ is the number of notes, $k$ is the number of super chords in the piece, and $L$ and $R$ are the lower and upper bounds on the number of notes a super chord can contain, respectively.\n\nThe next $n$ lines each contain an integer $A_i$, representing the beauty value of each note in increasing index order.", "outputFormat": "Output a single integer, the maximum possible beauty of the piece.", "hint": "### Sample Explanation\n\nThere are $5$ different super chords:\n\n1. Notes $1 \\sim 2$, beauty $3+2=5$.\n2. Notes $2 \\sim 3$, beauty $2+(-6)=-4$.\n3. Notes $3 \\sim 4$, beauty $(-6)+8=2$.\n4. Notes $1 \\sim 3$, beauty $3+2+(-6)=-1$.\n5. Notes $2 \\sim 4$, beauty $2+(-6)+8=4$.\n\nThe optimal plan is: the piece consists of chords $1, 3, 5$, with total beauty $5+2+4=11$.\n\n ![](https://cdn.luogu.com.cn/upload/pic/2609.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 超级钢琴", "background": "", "description": "小 Z 是一个小有名气的钢琴家，最近 C 博士送给了小 Z 一架超级钢琴，小 Z 希望能够用这架钢琴创作出世界上最美妙的音乐。\n\n这架超级钢琴可以弹奏出 $n$ 个音符，编号为 $1$ 至 $n$。第 $i$ 个音符的美妙度为 $A_i$，其中 $A_i$ 可正可负。\n\n一个“超级和弦”由若干个编号连续的音符组成，包含的音符个数不少于 $L$ 且不多于 $R$。我们定义超级和弦的美妙度为其包含的所有音符的美妙度之和。两个超级和弦被认为是相同的，当且仅当这两个超级和弦所包含的音符集合是相同的。\n\n小 Z 决定创作一首由 $k$ 个超级和弦组成的乐曲，为了使得乐曲更加动听，小 Z 要求该乐曲由 $k$ 个不同的超级和弦组成。我们定义一首乐曲的美妙度为其所包含的所有超级和弦的美妙度之和。小 Z 想知道他能够创作出来的乐曲美妙度最大值是多少。", "inputFormat": "输入第一行包含四个正整数 $n, k, L, R$。其中 $n$ 为音符的个数，$k$ 为乐曲所包含的超级和弦个数，$L$ 和 $R$ 分别是超级和弦所包含音符个数的下限和上限。\n\n接下来 $n$ 行，每行包含一个整数 $A_i$，表示按编号从小到大每个音符的美妙度。", "outputFormat": "输出只有一个整数，表示乐曲美妙度的最大值。\n", "hint": "### 样例解释\n\n共有 $5$ 种不同的超级和弦：\n\n1. 音符 $1 \\sim 2$，美妙度为 $3+2=5$；\n2. 音符 $2 \\sim 3$，美妙度为 $2+(-6)=-4$；\n3. 音符 $3 \\sim 4$，美妙度为 $(-6)+8=2$；\n4. 音符 $1 \\sim 3$，美妙度为 $3+2+(-6)=-1$；\n5. 音符 $2 \\sim 4$，美妙度为 $2+(-6)+8=4$。\n\n最优方案为：乐曲由和弦 $1,3,5$ 组成，美妙度为 $5+2+4=11$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2609.png) \n\n所有数据满足：$-1000 \\leq A_i \\leq 1000$，$1 \\leq L \\leq R \\leq n$ 且保证一定存在满足要求的乐曲。\n", "locale": "zh-CN"}}}
{"pid": "P2049", "type": "P", "difficulty": 3, "samples": [["2 3 5\n3 4 4\n5 6 6\n", "3\n0 2 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "枚举", "背包 DP"], "title": "魔术棋子", "background": "", "description": "在一个 $M \\times N$ 的魔术棋盘中，每个格子中均有一个整数，当棋子走进这个格子中，则此棋子上的数会被乘以此格子中的数。一个棋子从左上角走到右下角，只能向右或向下行动，请问此棋子走到右下角后，模（mod）$K$ 可以为几？\n\n如以下 $2 \\times 3$ 棋盘：\n\n```\n3    4    4\n5    6    6\n```\n棋子初始数为 $1$，开始从左上角进入棋盘，走到右下角，上图中，最后棋子上的数可能为 $288,432$ 或 $540$。所以当 $K = 5$ 时，可求得最后的结果为：$0,2,3$。\n", "inputFormat": "第一行为三个数，分别为 $M,N,K (1 \\leq M,N,K \\leq 100)$。以下 $M$ 行，每行 $N$ 个数，分别为此方阵中的数。\n", "outputFormat": "第一行为可能的结果个数。\n\n第二行为所有可能的结果（按升序输出）。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Magic Chess Piece", "background": "", "description": "In an $M \\times N$ magic chessboard, each cell contains an integer. When a chess piece steps into a cell, the number on the piece is multiplied by the number in that cell. A chess piece moves from the top-left corner to the bottom-right corner, and it can only move right or down. After it reaches the bottom-right corner, what values modulo $K$ can the number on the piece be?\n\nFor the following $2 \\times 3$ board:\n\n```\n3    4    4\n5    6    6\n```\nThe piece starts with the number $1$, enters the board from the top-left, and moves to the bottom-right. In the example above, the final number on the piece can be $288, 432$, or $540$. Therefore, when $K = 5$, the final possible results are: $0, 2, 3$.", "inputFormat": "The first line contains three integers, $M,N,K (1 \\leq M,N,K \\leq 100)$. The next $M$ lines each contain $N$ integers, representing the numbers in the matrix.", "outputFormat": "The first line contains the count of possible results.\n\nThe second line contains all possible results in ascending order.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔术棋子", "background": "", "description": "在一个 $M \\times N$ 的魔术棋盘中，每个格子中均有一个整数，当棋子走进这个格子中，则此棋子上的数会被乘以此格子中的数。一个棋子从左上角走到右下角，只能向右或向下行动，请问此棋子走到右下角后，模（mod）$K$ 可以为几？\n\n如以下 $2 \\times 3$ 棋盘：\n\n```\n3    4    4\n5    6    6\n```\n棋子初始数为 $1$，开始从左上角进入棋盘，走到右下角，上图中，最后棋子上的数可能为 $288,432$ 或 $540$。所以当 $K = 5$ 时，可求得最后的结果为：$0,2,3$。\n", "inputFormat": "第一行为三个数，分别为 $M,N,K (1 \\leq M,N,K \\leq 100)$。以下 $M$ 行，每行 $N$ 个数，分别为此方阵中的数。\n", "outputFormat": "第一行为可能的结果个数。\n\n第二行为所有可能的结果（按升序输出）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2050", "type": "P", "difficulty": 6, "samples": [["3 2 \n3 1 1 \n5 7 \n3 6 \n8 9", "47"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2012", "NOI", "网络流", "费用流"], "title": "[NOI2012] 美食节", "background": "", "description": "CZ 市为了欢迎全国各地的同学，特地举办了一场盛大的美食节。\n\n作为一个喜欢尝鲜的美食客，小 M 自然不愿意错过这场盛宴。他很快就尝遍了美食节所有的美食。然而，尝鲜的欲望是难以满足的。尽管所有的菜品都很可口，厨师做菜的速度也很快，小 M 仍然觉得自己桌上没有已经摆在别人餐桌上的美食是一件无法忍受的事情。于是小 M 开始研究起了做菜顺序的问题，即安排一个做菜的顺序使得同学们的等待时间最短。\n\n小 M 发现，美食节共有 $n$ 种不同的菜品。每次点餐，每个同学可以选择其中的**一个菜品**。总共有 $m$ 个厨师来制作这些菜品。当所有的同学点餐结束后，菜品的制作任务就会分配给每个厨师。然后每个厨师就会同时开始做菜。**厨师们会按照要求的顺序进行制作，并且每次只能制作一人份**。\n\n此外，小 M 还发现了另一件有意思的事情——虽然这 $m$ 个厨师都会制作全部的 $n$ 种菜品，但**对于同一菜品，不同厨师的制作时间未必相同**。他将菜品用 $1, 2, \\ldots, n$ 依次编号，厨师用 $1, 2, \\ldots, m$ 依次编号，将第 $j$ 个厨师制作第 $i$ 种菜品的时间记为 $t_{i,j}$。\n\n小 M 认为：每个同学的等待时间为**所有厨师开始做菜起，到自己那份菜品完成为止**的时间总长度。换句话说，如果一个同学点的菜是某个厨师做的第 $k$ 道菜，则他的等待时间就是这个厨师制作前 $k$ 道菜的时间之和。而**总等待时间**为**所有同学的等待时间之和**。\n\n现在，小 M 找到了所有同学的点菜信息——有 $p_i$ 个同学点了第 $i$ 种菜品（$i=1, 2, \\ldots, n$）。他想知道的是最小的总等待时间是多少。\n", "inputFormat": "输入文件的第 $1$ 行包含两个正整数 $n$ 和 $m$，表示菜品的种数和厨师的数量。\n\n第 $2$ 行包含 $n$ 个正整数，其中第 $i$ 个数为 $p_i$，表示点第 $i$ 种菜品的人数。\n\n接下来有 $n$ 行，每行包含 $m$ 个非负整数，这 $n$ 行中的第 $i$ 行的第 $j$ 个数为 $t_{i,j}$，表示第 $j$ 个厨师制作第 $i$ 种菜品所需的时间。\n\n输入文件中每行相邻的两个数之间均由一个空格隔开，行末均没有多余空格。\n", "outputFormat": "输出仅一行包含一个整数，为总等待时间的最小值。\n", "hint": "厨师 $1$ 先制作 $1$ 份菜品 $2$，再制作 $2$ 份菜品 $1$。点这 $3$ 道菜的 $3$ 个同学的等待时间分别为 $3$，$3+5=8$，$3+5+5=13$。\n\n厨师 $2$ 先制作 $1$ 份菜品 $1$，再制作 $1$ 份菜品 $3$。点这 $2$ 道菜的 $2$ 个同学的等待时间分别为 $7$，$7+9=16$。\n\n总等待时间为 $3+8+13+7+16=47$。\n\n虽然菜品 $1$ 和菜品 $3$ 由厨师 $1$ 制作更快，如果这些菜品都由厨师 $1$ 制作，总等待时间反而更长。如果按上述的做法，将 $1$ 份菜品 $1$ 和 $1$ 份菜品 $3$ 调整到厨师 $2$ 制作，这样厨师 $2$ 不会闲着，总等待时间更短。\n\n可以证明，没有更优的点餐方案。\n\n每组数据的 $n,m$ 和 $p$ 值如下：  \n\n|测试点编号| $n$| $m$| $p$|   \n|:------:|:----:|:----:|:----:|    \n|$1$|$n = 5$| $m = 5$| $p = 10$|   \n|$2$| $n = 40$| $m = 1$ |$p = 400$ |  \n|$3$| $n = 40$| $m = 2$ |$p = 300$ |\n|$4$| $n = 40$| $m = 40$| $p = 40$ |\n|$5$| $n = 5$| $m = 40$| $p = 100$ |\n|$6$| $n = 10$| $m = 50$| $p = 200$ |\n|$7$| $n = 20$| $m = 60$| $p = 400$ |\n|$8$| $n = 40$| $m = 80$| $p = 600$ |\n|$9$| $n = 40$| $m = 100$| $p = 800$ |\n|$10$| $n = 40$| $m = 100$| $p = 800$ |\n\n\n对于 $100\\%$ 的数据，$n \\leq 40$，$m\\leq 100$，$p\\leq 800$，$t_{i,j}\\leq 1000$（其中 $p = \\sum p_i$）。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2012] Food Festival", "background": "", "description": "To welcome students from all over the country, CZ City is hosting a grand food festival.\n\nAs a foodie who loves trying new things, Xiao M would not miss this feast. He quickly tasted all the foods at the festival. However, the desire to try new dishes is hard to satisfy. Although all dishes are delicious and the chefs cook fast, Xiao M still feels it is unbearable if there is no dish on his table that has already appeared on someone else’s table. So he begins to study the problem of cooking order, that is, arranging a cooking sequence so that the students’ waiting time is minimized.\n\nXiao M finds that there are $n$ different types of dishes. Each time they order, each student may choose exactly one dish. There are $m$ chefs to prepare these dishes. After all students finish ordering, the dish-making tasks are assigned to the chefs. Then all chefs start cooking simultaneously. The chefs follow the required sequence and can cook only one serving at a time.\n\nIn addition, Xiao M finds another interesting fact — although the $m$ chefs can all make all $n$ types of dishes, for the same dish, different chefs may take different amounts of time. He numbers the dishes $1, 2, \\ldots, n$ and the chefs $1, 2, \\ldots, m$, and lets $t_{i,j}$ be the time for chef $j$ to make dish $i$.\n\nXiao M defines the waiting time of each student as the duration from when all chefs start cooking until that student’s serving is completed. In other words, if a student’s dish is the $k$-th dish made by some chef, then the student’s waiting time is the sum of the times of that chef’s first $k$ dishes. The total waiting time is the sum of all students’ waiting times.\n\nNow Xiao M knows all the ordering information — there are $p_i$ students who ordered dish $i$ for $i = 1, 2, \\ldots, n$. He wants to know the minimum possible total waiting time.", "inputFormat": "The first line contains two positive integers $n$ and $m$, the number of dish types and the number of chefs.\n\nThe second line contains $n$ positive integers; the $i$-th number is $p_i$, the number of students who ordered dish $i$.\n\nThen there are $n$ lines, each containing $m$ non-negative integers. In these $n$ lines, the $j$-th number on the $i$-th line is $t_{i,j}$, the time needed for chef $j$ to make dish $i$.\n\nIn the input file, adjacent numbers on each line are separated by a single space, and there are no extra spaces at the end of any line.", "outputFormat": "Output a single line containing one integer: the minimum total waiting time.", "hint": "Chef $1$ first makes $1$ serving of dish $2$, then makes $2$ servings of dish $1$. The waiting times of the $3$ students who ordered these $3$ servings are $3$, $3+5=8$, and $3+5+5=13$.\n\nChef $2$ first makes $1$ serving of dish $1$, then makes $1$ serving of dish $3$. The waiting times of the $2$ students who ordered these $2$ servings are $7$ and $7+9=16$.\n\nThe total waiting time is $3+8+13+7+16=47$.\n\nAlthough dishes $1$ and $3$ are faster if made by chef $1$, the total waiting time would be longer if all these dishes were made by chef $1$. If, as above, we reassign $1$ serving of dish $1$ and $1$ serving of dish $3$ to chef $2$, then chef $2$ will not be idle, and the total waiting time is shorter.\n\nIt can be proved that there is no better ordering and assignment.\n\nFor each test set, the values of $n$, $m$, and $p$ are as follows:\n- Test point $1$: $n = 5$, $m = 5$, $p = 10$.\n- Test point $2$: $n = 40$, $m = 1$, $p = 400$.\n- Test point $3$: $n = 40$, $m = 2$, $p = 300$.\n- Test point $4$: $n = 40$, $m = 40$, $p = 40$.\n- Test point $5$: $n = 5$, $m = 40$, $p = 100$.\n- Test point $6$: $n = 10$, $m = 50$, $p = 200$.\n- Test point $7$: $n = 20$, $m = 60$, $p = 400$.\n- Test point $8$: $n = 40$, $m = 80$, $p = 600$.\n- Test point $9$: $n = 40$, $m = 100$, $p = 800$.\n- Test point $10$: $n = 40$, $m = 100$, $p = 800$.\n\nConstraints for $100\\%$ of the testdata: $n \\leq 40$, $m \\leq 100$, $p \\leq 800$, $t_{i,j} \\leq 1000$ (where $p = \\sum p_i$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2012] 美食节", "background": "", "description": "CZ 市为了欢迎全国各地的同学，特地举办了一场盛大的美食节。\n\n作为一个喜欢尝鲜的美食客，小 M 自然不愿意错过这场盛宴。他很快就尝遍了美食节所有的美食。然而，尝鲜的欲望是难以满足的。尽管所有的菜品都很可口，厨师做菜的速度也很快，小 M 仍然觉得自己桌上没有已经摆在别人餐桌上的美食是一件无法忍受的事情。于是小 M 开始研究起了做菜顺序的问题，即安排一个做菜的顺序使得同学们的等待时间最短。\n\n小 M 发现，美食节共有 $n$ 种不同的菜品。每次点餐，每个同学可以选择其中的**一个菜品**。总共有 $m$ 个厨师来制作这些菜品。当所有的同学点餐结束后，菜品的制作任务就会分配给每个厨师。然后每个厨师就会同时开始做菜。**厨师们会按照要求的顺序进行制作，并且每次只能制作一人份**。\n\n此外，小 M 还发现了另一件有意思的事情——虽然这 $m$ 个厨师都会制作全部的 $n$ 种菜品，但**对于同一菜品，不同厨师的制作时间未必相同**。他将菜品用 $1, 2, \\ldots, n$ 依次编号，厨师用 $1, 2, \\ldots, m$ 依次编号，将第 $j$ 个厨师制作第 $i$ 种菜品的时间记为 $t_{i,j}$。\n\n小 M 认为：每个同学的等待时间为**所有厨师开始做菜起，到自己那份菜品完成为止**的时间总长度。换句话说，如果一个同学点的菜是某个厨师做的第 $k$ 道菜，则他的等待时间就是这个厨师制作前 $k$ 道菜的时间之和。而**总等待时间**为**所有同学的等待时间之和**。\n\n现在，小 M 找到了所有同学的点菜信息——有 $p_i$ 个同学点了第 $i$ 种菜品（$i=1, 2, \\ldots, n$）。他想知道的是最小的总等待时间是多少。\n", "inputFormat": "输入文件的第 $1$ 行包含两个正整数 $n$ 和 $m$，表示菜品的种数和厨师的数量。\n\n第 $2$ 行包含 $n$ 个正整数，其中第 $i$ 个数为 $p_i$，表示点第 $i$ 种菜品的人数。\n\n接下来有 $n$ 行，每行包含 $m$ 个非负整数，这 $n$ 行中的第 $i$ 行的第 $j$ 个数为 $t_{i,j}$，表示第 $j$ 个厨师制作第 $i$ 种菜品所需的时间。\n\n输入文件中每行相邻的两个数之间均由一个空格隔开，行末均没有多余空格。\n", "outputFormat": "输出仅一行包含一个整数，为总等待时间的最小值。\n", "hint": "厨师 $1$ 先制作 $1$ 份菜品 $2$，再制作 $2$ 份菜品 $1$。点这 $3$ 道菜的 $3$ 个同学的等待时间分别为 $3$，$3+5=8$，$3+5+5=13$。\n\n厨师 $2$ 先制作 $1$ 份菜品 $1$，再制作 $1$ 份菜品 $3$。点这 $2$ 道菜的 $2$ 个同学的等待时间分别为 $7$，$7+9=16$。\n\n总等待时间为 $3+8+13+7+16=47$。\n\n虽然菜品 $1$ 和菜品 $3$ 由厨师 $1$ 制作更快，如果这些菜品都由厨师 $1$ 制作，总等待时间反而更长。如果按上述的做法，将 $1$ 份菜品 $1$ 和 $1$ 份菜品 $3$ 调整到厨师 $2$ 制作，这样厨师 $2$ 不会闲着，总等待时间更短。\n\n可以证明，没有更优的点餐方案。\n\n每组数据的 $n,m$ 和 $p$ 值如下：  \n\n|测试点编号| $n$| $m$| $p$|   \n|:------:|:----:|:----:|:----:|    \n|$1$|$n = 5$| $m = 5$| $p = 10$|   \n|$2$| $n = 40$| $m = 1$ |$p = 400$ |  \n|$3$| $n = 40$| $m = 2$ |$p = 300$ |\n|$4$| $n = 40$| $m = 40$| $p = 40$ |\n|$5$| $n = 5$| $m = 40$| $p = 100$ |\n|$6$| $n = 10$| $m = 50$| $p = 200$ |\n|$7$| $n = 20$| $m = 60$| $p = 400$ |\n|$8$| $n = 40$| $m = 80$| $p = 600$ |\n|$9$| $n = 40$| $m = 100$| $p = 800$ |\n|$10$| $n = 40$| $m = 100$| $p = 800$ |\n\n\n对于 $100\\%$ 的数据，$n \\leq 40$，$m\\leq 100$，$p\\leq 800$，$t_{i,j}\\leq 1000$（其中 $p = \\sum p_i$）。\n", "locale": "zh-CN"}}}
{"pid": "P2051", "type": "P", "difficulty": 5, "samples": [["1 3", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2009", "各省省选", "安徽"], "title": "[AHOI2009] 中国象棋", "background": "", "description": "这次小可可想解决的难题和中国象棋有关，在一个 $n$ 行 $m$ 列的棋盘上，让你放若干个炮（可以是 $0$ 个），使得没有一个炮可以攻击到另一个炮，请问有多少种放置方法。大家肯定很清楚，在中国象棋中炮的行走方式是：一个炮攻击到另一个炮，当且仅当它们在同一行或同一列中，且它们之间恰好 有一个棋子。你也来和小可可一起锻炼一下思维吧！\n", "inputFormat": "一行包含两个整数 $n,m$，之间由一个空格隔开。\n", "outputFormat": "总共的方案数，由于该值可能很大，只需给出方案数模 $9999973$ 的结果。\n", "hint": "\n**样例说明**\n\n除了 $3$ 个格子里都塞满了炮以外，其它方案都是可行的，所以一共有 $2 \\times 2 \\times 2-1=7$ 种方案。\n\n**数据规模与约定**\n\n- 对于 $30\\%$ 的数据，$n$ 和 $m$ 均不超过 $6$。\n- 对于 $50\\%$ 的数据，$n$ 和 $m$ 至少有一个数不超过 $8$。\n- 对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 100$。\n\n题面修改：@syksykCCC。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2009] Chinese Chess", "background": "", "description": "This time, Xiao Keke wants to solve a problem related to Chinese chess. On an $n$ row by $m$ column board, place any number of cannons (possibly $0$) so that no cannon can attack another. How many placement methods are there? As you surely know, in Chinese chess the cannon’s attack rule is: one cannon attacks another if and only if they are in the same row or the same column, and there is exactly one piece between them. Come exercise your thinking with Xiao Keke!", "inputFormat": "One line contains two integers $n, m$, separated by a space.", "outputFormat": "Output the total number of valid placements. Since this number can be large, output the result modulo $9999973$.", "hint": "**Sample Explanation**\n\nExcept for the configuration where all $3$ cells are filled with cannons, all other configurations are valid, so there are $2 \\times 2 \\times 2-1=7$ valid configurations.\n\n**Constraints**\n\n- For $30\\%$ of the testdata, $n$ and $m$ do not exceed $6$.\n- For $50\\%$ of the testdata, at least one of $n$ and $m$ does not exceed $8$.\n- For $100\\%$ of the testdata, $1 \\leq n, m \\leq 100$.\n\nProblem statement updated by: @syksykCCC.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2009] 中国象棋", "background": "", "description": "这次小可可想解决的难题和中国象棋有关，在一个 $n$ 行 $m$ 列的棋盘上，让你放若干个炮（可以是 $0$ 个），使得没有一个炮可以攻击到另一个炮，请问有多少种放置方法。大家肯定很清楚，在中国象棋中炮的行走方式是：一个炮攻击到另一个炮，当且仅当它们在同一行或同一列中，且它们之间恰好 有一个棋子。你也来和小可可一起锻炼一下思维吧！\n", "inputFormat": "一行包含两个整数 $n,m$，之间由一个空格隔开。\n", "outputFormat": "总共的方案数，由于该值可能很大，只需给出方案数模 $9999973$ 的结果。\n", "hint": "\n**样例说明**\n\n除了 $3$ 个格子里都塞满了炮以外，其它方案都是可行的，所以一共有 $2 \\times 2 \\times 2-1=7$ 种方案。\n\n**数据规模与约定**\n\n- 对于 $30\\%$ 的数据，$n$ 和 $m$ 均不超过 $6$。\n- 对于 $50\\%$ 的数据，$n$ 和 $m$ 至少有一个数不超过 $8$。\n- 对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 100$。\n\n题面修改：@syksykCCC。", "locale": "zh-CN"}}}
{"pid": "P2052", "type": "P", "difficulty": 3, "samples": [["6\n1 2 1\n1 3 1\n1 4 2\n6 3 1\n5 2 1", "20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["树形数据结构", "2011", "NOI", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[NOI2011] 道路修建", "background": null, "description": "在 W 星球上有 $n$ 个国家。为了各自国家的经济发展，他们决定在各个国家之间建设双向道路使得国家之间连通。但是每个国家的国王都很吝啬，他们只愿意修建恰好 $n - 1$ 条双向道路。\n\n每条道路的修建都要付出一定的费用，这个费用等于道路长度乘以道路两端 的国家个数之差的绝对值。例如，在下图中，虚线所示道路两端分别有 $2$ 个、$4$ 个国家，如果该道路长度为 $1$，则费用为 $1×|2 - 4|=2$。图中圆圈里的数字表示国家的编号。\n \n![](https://cdn.luogu.com.cn/upload/pic/2604.png) \n\n由于国家的数量十分庞大，道路的建造方案有很多种，同时每种方案的修建费用难以用人工计算，国王们决定找人设计一个软件，对于给定的建造方案，计算出所需要的费用。请你帮助国王们设计一个这样的软件。", "inputFormat": "输入的第一行包含一个整数 $n$，表示 W 星球上的国家的数量，国家从 $1$ 到 $n$ 编号。\n\n接下来 $n - 1$ 行描述道路建设情况，其中第 $i$ 行包含三个整数 $a_i$，$b_i$ 和 $c_i$，表示第 $i$ 条双向道路修建在 $a_i$ 与 $b_i$ 两个国家之间，长度为 $c_i$。", "outputFormat": "输出一个整数，表示修建所有道路所需要的总费用。", "hint": "对于 $100\\%$ 的数据，$1\\leq a_i, b_i\\leq n$，$0\\leq c_i\\leq10^6$，$2\\leq n\\leq 10^6$。\n|测试点编号|$n=$|\n|:-:|:-:|\n|$1$|$2$|\n|$2$|$10$|\n|$3$|$100$|\n|$4$|$200$|\n|$5$|$500$|\n|$6$|$600$|\n|$7$|$800$|\n|$8$|$1000$|\n|$9$|$10^4$|\n|$10$|$2\\times 10^4$|\n|$11$|$5\\times 10^4$|\n|$12$|$6\\times 10^4$|\n|$13$|$8\\times 10^4$|\n|$14$|$10^5$|\n|$15$|$6\\times 10^5$|\n|$16$|$7\\times 10^5$|\n|$17$|$8\\times 10^5$|\n|$18$|$9\\times 10^5$|\n|$19,20$|$10^6$|", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2011] Road Construction", "background": "", "description": "There are $n$ countries on planet W. To develop their economies, they decide to build bidirectional roads between countries so that all countries are connected. However, each king is stingy and they are only willing to build exactly $n - 1$ bidirectional roads.\n\nBuilding each road costs an amount equal to the road length multiplied by the absolute difference between the numbers of countries on the two sides of this road (i.e., after removing this road, in the two resulting connected components). For example, in the figure below, the dashed road has $2$ and $4$ countries on its two sides. If its length is $1$, then the cost is $1 \\times |2 - 4| = 2$. The numbers inside the circles in the figure represent country indices.\n \n![](https://cdn.luogu.com.cn/upload/pic/2604.png) \n\nBecause the number of countries is very large, there are many construction schemes, and the cost of each scheme is difficult to compute by hand. The kings decide to commission software that, for a given construction scheme, computes the required total cost. Please help design such software.", "inputFormat": "The first line contains an integer $n$, the number of countries on planet W. The countries are numbered from $1$ to $n$.\n\nThe next $n - 1$ lines describe the road network. The $i$-th line contains three integers $a_i$, $b_i$, and $c_i$, indicating that the $i$-th bidirectional road is built between countries $a_i$ and $b_i$, with length $c_i$.", "outputFormat": "Output a single integer, the total cost required to build all the roads.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq a_i, b_i \\leq n$, $0 \\leq c_i \\leq 10^6$, $2 \\leq n \\leq 10^6$.\n\n|Test point ID|$n=$|\n|:-:|:-:|\n|$1$|$2$|\n|$2$|$10$|\n|$3$|$100$|\n|$4$|$200$|\n|$5$|$500$|\n|$6$|$600$|\n|$7$|$800$|\n|$8$|$1000$|\n|$9$|$10^4$|\n|$10$|$2 \\times 10^4$|\n|$11$|$5 \\times 10^4$|\n|$12$|$6 \\times 10^4$|\n|$13$|$8 \\times 10^4$|\n|$14$|$10^5$|\n|$15$|$6 \\times 10^5$|\n|$16$|$7 \\times 10^5$|\n|$17$|$8 \\times 10^5$|\n|$18$|$9 \\times 10^5$|\n|$19,20$|$10^6$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2011] 道路修建", "background": null, "description": "在 W 星球上有 $n$ 个国家。为了各自国家的经济发展，他们决定在各个国家之间建设双向道路使得国家之间连通。但是每个国家的国王都很吝啬，他们只愿意修建恰好 $n - 1$ 条双向道路。\n\n每条道路的修建都要付出一定的费用，这个费用等于道路长度乘以道路两端 的国家个数之差的绝对值。例如，在下图中，虚线所示道路两端分别有 $2$ 个、$4$ 个国家，如果该道路长度为 $1$，则费用为 $1×|2 - 4|=2$。图中圆圈里的数字表示国家的编号。\n \n![](https://cdn.luogu.com.cn/upload/pic/2604.png) \n\n由于国家的数量十分庞大，道路的建造方案有很多种，同时每种方案的修建费用难以用人工计算，国王们决定找人设计一个软件，对于给定的建造方案，计算出所需要的费用。请你帮助国王们设计一个这样的软件。", "inputFormat": "输入的第一行包含一个整数 $n$，表示 W 星球上的国家的数量，国家从 $1$ 到 $n$ 编号。\n\n接下来 $n - 1$ 行描述道路建设情况，其中第 $i$ 行包含三个整数 $a_i$，$b_i$ 和 $c_i$，表示第 $i$ 条双向道路修建在 $a_i$ 与 $b_i$ 两个国家之间，长度为 $c_i$。", "outputFormat": "输出一个整数，表示修建所有道路所需要的总费用。", "hint": "对于 $100\\%$ 的数据，$1\\leq a_i, b_i\\leq n$，$0\\leq c_i\\leq10^6$，$2\\leq n\\leq 10^6$。\n|测试点编号|$n=$|\n|:-:|:-:|\n|$1$|$2$|\n|$2$|$10$|\n|$3$|$100$|\n|$4$|$200$|\n|$5$|$500$|\n|$6$|$600$|\n|$7$|$800$|\n|$8$|$1000$|\n|$9$|$10^4$|\n|$10$|$2\\times 10^4$|\n|$11$|$5\\times 10^4$|\n|$12$|$6\\times 10^4$|\n|$13$|$8\\times 10^4$|\n|$14$|$10^5$|\n|$15$|$6\\times 10^5$|\n|$16$|$7\\times 10^5$|\n|$17$|$8\\times 10^5$|\n|$18$|$9\\times 10^5$|\n|$19,20$|$10^6$|", "locale": "zh-CN"}}}
{"pid": "P2053", "type": "P", "difficulty": 6, "samples": [["2 2\n3 2\n1 4", "1.50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "四川", "各省省选", "网络流", "费用流"], "title": "[SCOI2007] 修车", "background": "", "description": "同一时刻有 $N$ 位车主带着他们的爱车来到了汽车维修中心。\n\n维修中心共有 $M$ 位技术人员，不同的技术人员对不同的车进行维修所用的时间是不同的。\n\n现在需要安排这 $M$ 位技术人员所维修的车及顺序，使得顾客平均等待的时间最小。\n\n说明：顾客的等待时间是指从他把车送至维修中心到维修完毕所用的时间。", "inputFormat": "第一行有两个数 $M,N$，表示技术人员数与顾客数。\n\n接下来 $N$ 行，每行 $M$ 个整数。第 $i+1$ 行第 $j$ 个数表示第 $j$ 位技术人员维修第 $i$ 辆车需要用的时间 $T_{i,j}$。", "outputFormat": "最小平均等待时间，答案精确到小数点后 $2$ 位。", "hint": "对于 $100\\%$ 的数据，$2\\le M\\le 9$，$1\\le N\\le 60$，$1\\le T\\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Car Repair", "background": "", "description": "At time $0$, $N$ customers arrive at an auto repair center with their cars.\n\nThere are $M$ technicians in the center, and the time required by different technicians to repair different cars may differ.\n\nArrange which cars each of the $M$ technicians repairs and in what order, so that the average waiting time of the customers is minimized.\n\nExplanation: A customer's waiting time is the time from when they deliver the car to the repair center until the repair is completed.", "inputFormat": "The first line contains two integers $M, N$, the number of technicians and the number of customers.\n\nThe next $N$ lines each contain $M$ integers. In row $i+1$, the $j$-th number denotes the time $T_{i, j}$ needed for technician $j$ to repair car $i$.", "outputFormat": "Output the minimum average waiting time, accurate to $2$ decimal places.", "hint": "Constraints: For $100\\%$ of the testdata, $2 \\le M \\le 9$, $1 \\le N \\le 60$, $1 \\le T \\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 修车", "background": "", "description": "同一时刻有 $N$ 位车主带着他们的爱车来到了汽车维修中心。\n\n维修中心共有 $M$ 位技术人员，不同的技术人员对不同的车进行维修所用的时间是不同的。\n\n现在需要安排这 $M$ 位技术人员所维修的车及顺序，使得顾客平均等待的时间最小。\n\n说明：顾客的等待时间是指从他把车送至维修中心到维修完毕所用的时间。", "inputFormat": "第一行有两个数 $M,N$，表示技术人员数与顾客数。\n\n接下来 $N$ 行，每行 $M$ 个整数。第 $i+1$ 行第 $j$ 个数表示第 $j$ 位技术人员维修第 $i$ 辆车需要用的时间 $T_{i,j}$。", "outputFormat": "最小平均等待时间，答案精确到小数点后 $2$ 位。", "hint": "对于 $100\\%$ 的数据，$2\\le M\\le 9$，$1\\le N\\le 60$，$1\\le T\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2054", "type": "P", "difficulty": 5, "samples": [["6 2 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2005", "各省省选", "安徽", "扩展欧几里德算法", "逆元"], "title": "[AHOI2005] 洗牌", "background": null, "description": "为了表彰小联为 Samuel 星球的探险所做出的贡献，小联被邀请参加 Samuel 星球近距离载人探险活动。\n\n由于 Samuel 星球相当遥远，科学家们要在飞船中度过相当长的一段时间，小联提议用扑克牌打发长途旅行中的无聊时间。玩了几局之后，大家觉得单纯玩扑克牌对于像他们这样的高智商人才来说太简单了。有人提出了扑克牌的一种新的玩法。\n\n对于扑克牌的一次洗牌是这样定义的，将一叠 $N$（$N$为偶数）张扑克牌平均分成上下两叠，取下面一叠的第一张作为新的一叠的第一张，然后取上面一叠的第一张作为新的一叠的第二张，再取下面一叠的第二张作为新的一叠的第三张……如此交替直到所有的牌取完。\n\n如果对一叠 $6$ 张的扑克牌 ${1,2,3,4,5,6}$，进行一次洗牌的过程如下图所示：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/a0wt044v.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) \n\n从图中可以看出经过一次洗牌，序列 $1,2,3,4,5,6$ 变为 $4,1,5,2,6,3$。当然，再对得到的序列进行一次洗牌，又会变为 $2,4,6,1,3,5$。\n\n游戏是这样的，如果给定长度为 $N$ 的一叠扑克牌，并且牌面大小从 $1$ 开始连续增加到 $N$（不考虑花色），对这样的一叠扑克牌，进行 $M$ 次洗牌。最先说出经过洗牌后的扑克牌序列中第 $L$ 张扑克牌的牌面大小是多少的科学家得胜。小联想赢取游戏的胜利，你能帮助他吗？", "inputFormat": "输入文件中有三个用空格间隔的整数，分别表示 $N,M,L$。\n\n（其中 $1\\le N\\le 10^{10},0 \\le M\\le 10^{10}$，且 $N$ 为偶数）。", "outputFormat": "单行输出指定的扑克牌的牌面大小。", "hint": "$1\\le N \\leq 10^{10}$，$0 \\leq M \\leq 10^{10}$，且 $N$ 为偶数。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2005] Shuffle", "background": "", "description": "To recognize Xiao Lian’s contributions to the exploration of Planet Samuel, he was invited to participate in a close-range manned expedition to Planet Samuel.\n\nBecause Planet Samuel is very far away, the scientists will spend a long time on the spaceship. Xiao Lian suggested playing poker to pass the time during the long trip. After a few rounds, everyone felt that simply playing poker was too easy for people as intelligent as they were. Someone proposed a new way to play with the cards.\n\nA shuffle is defined as follows: split a deck of $N$ cards (where $N$ is even) evenly into an upper half and a lower half. Take the first card from the lower half as the first card of the new deck, then take the first card from the upper half as the second card of the new deck, then take the second card from the lower half as the third card, and so on, alternating until all cards are taken.\n\nIf we take a deck of 6 cards {1, 2, 3, 4, 5, 6}, the process of one shuffle is shown below:\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/a0wt044v.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) \n\nFrom the figure, we can see that after one shuffle, the sequence 1, 2, 3, 4, 5, 6 becomes 4, 1, 5, 2, 6, 3. Of course, shuffling the resulting sequence once more yields 2, 4, 6, 1, 3, 5.\n\nThe game is as follows: given a deck of length $N$, with face values increasing continuously from 1 to $N$ (suits ignored), perform $M$ shuffles on this deck. The scientist who first says the face value of the $L$-th card in the sequence after shuffling wins. Xiao Lian wants to win the game. Can you help him?", "inputFormat": "The input file contains three integers separated by spaces, representing $N, M, L$.\n\n(Where $1 \\le N \\le 10^{10}$, $0 \\le M \\le 10^{10}$, and $N$ is even.)", "outputFormat": "Output the face value of the specified card on a single line.", "hint": "$0 < N \\le 10^{10}$, $0 \\le M \\le 10^{10}$, and $N$ is even.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2005] 洗牌", "background": null, "description": "为了表彰小联为 Samuel 星球的探险所做出的贡献，小联被邀请参加 Samuel 星球近距离载人探险活动。\n\n由于 Samuel 星球相当遥远，科学家们要在飞船中度过相当长的一段时间，小联提议用扑克牌打发长途旅行中的无聊时间。玩了几局之后，大家觉得单纯玩扑克牌对于像他们这样的高智商人才来说太简单了。有人提出了扑克牌的一种新的玩法。\n\n对于扑克牌的一次洗牌是这样定义的，将一叠 $N$（$N$为偶数）张扑克牌平均分成上下两叠，取下面一叠的第一张作为新的一叠的第一张，然后取上面一叠的第一张作为新的一叠的第二张，再取下面一叠的第二张作为新的一叠的第三张……如此交替直到所有的牌取完。\n\n如果对一叠 $6$ 张的扑克牌 ${1,2,3,4,5,6}$，进行一次洗牌的过程如下图所示：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/a0wt044v.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) \n\n从图中可以看出经过一次洗牌，序列 $1,2,3,4,5,6$ 变为 $4,1,5,2,6,3$。当然，再对得到的序列进行一次洗牌，又会变为 $2,4,6,1,3,5$。\n\n游戏是这样的，如果给定长度为 $N$ 的一叠扑克牌，并且牌面大小从 $1$ 开始连续增加到 $N$（不考虑花色），对这样的一叠扑克牌，进行 $M$ 次洗牌。最先说出经过洗牌后的扑克牌序列中第 $L$ 张扑克牌的牌面大小是多少的科学家得胜。小联想赢取游戏的胜利，你能帮助他吗？", "inputFormat": "输入文件中有三个用空格间隔的整数，分别表示 $N,M,L$。\n\n（其中 $1\\le N\\le 10^{10},0 \\le M\\le 10^{10}$，且 $N$ 为偶数）。", "outputFormat": "单行输出指定的扑克牌的牌面大小。", "hint": "$1\\le N \\leq 10^{10}$，$0 \\leq M \\leq 10^{10}$，且 $N$ 为偶数。", "locale": "zh-CN"}}}
{"pid": "P2055", "type": "P", "difficulty": 5, "samples": [["1\n3\n1 1 0\n0 1 0\n0 1 1\n1 0 0\n1 0 0", "^_^"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "网络流", "浙江", "图论建模", "二分图"], "title": "[ZJOI2009] 假期的宿舍", "background": "", "description": "学校放假了……有些同学回家了，而有些同学则有以前的好朋友来探访，那么住宿就是一个问题。\n\n比如 A 和 B 都是学校的学生，A 要回家，而 C 来看B，C 与 A 不认识。我们假设每个人只能睡和自己直接认识的人的床。那么一个解决方案就是 B 睡 A 的床而 C 睡 B 的床。而实际情况可能非常复杂，有的人可能认识好多在校学生，在校学生之间也不一定都互相认识。\n\n我们已知一共有 $n$ 个人，并且知道其中每个人是不是本校学生，也知道每个本校学生是否回家。问是否存在一个方案使得所有不回家的本校学生和来看他们的其他人都有地方住。\n", "inputFormat": "第一行一个数 $T$ 表示数据组数。接下来 $T$ 组数据，每组数据第一行一个数 $n$ 表示涉及到的总人数。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否是在校学生 ($0$ 表示不是，$1$ 表示是)。再接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否回家 ($0$ 表示不回家，$1$ 表示回家，注意如果第 $i$ 个人不是在校学生，那么这个位置上的数是一个随机的数，你应该在读入以后忽略它)。\n\n接下来 $n$ 行每行 $n$ 个数，第 $i$ 行第 $j$ 个数表示 $i$ 和 $j$ 是否认识 ($1$ 表示认识，$0$ 表示不认识，第 $i$ 行 $i$ 个的值为 $0$，但是显然自己还是可以睡自己的床)，认识的关系是相互的。\n", "outputFormat": "对于每组数据，如果存在一个方案则输出 `^_^`，否则输出`T_T`。（注意输出的都是半角字符，即三个符号的 ASCII 码分别为 $94,84,95$）\n", "hint": "对于 $30\\%$ 的数据满足 $1 \\le n \\le 12$。\n\n对于 $100\\%$ 的数据满足 $1 \\le n \\le 50$，$1 \\le T \\le 20$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2009] Dormitory During the Holidays", "background": "", "description": "The school is on vacation. Some students go home, while some of their old friends come to visit, so accommodation becomes a problem.\n\nFor example, A and B are both students of the school. A is going home, and C comes to visit B. C and A do not know each other. We assume each person can only sleep in the bed of someone they know directly. Then one solution is: B sleeps in A’s bed, and C sleeps in B’s bed. In reality, things can be much more complicated: some people may know many students who are on campus, and students on campus may not all know each other.\n\nWe know there are $n$ people in total, and for each person we know whether they are a student of this school, and for each student we know whether they will go home. Determine whether there exists an arrangement such that all students who do not go home and all the other people who come to visit them have a place to stay.", "inputFormat": "The first line contains an integer $T$ denoting the number of test cases. Then follow $T$ test cases. For each test case, the first line contains an integer $n$ denoting the total number of people involved.\n\nThe next line contains $n$ numbers; the $i$-th number indicates whether person $i$ is a student of the school ($0$ means no, $1$ means yes). The next line contains $n$ numbers; the $i$-th number indicates whether person $i$ will go home ($0$ means not going home, $1$ means going home; note that if person $i$ is not a student, the number at this position is random and should be ignored after reading).\n\nThen follow $n$ lines, each with $n$ numbers. The number in row $i$, column $j$ indicates whether $i$ and $j$ know each other ($1$ means yes, $0$ means no; the value at row $i$, column $i$ is $0$, but of course everyone can still sleep in their own bed). The acquaintance relationship is mutual.", "outputFormat": "For each test case, output `^_^` if a valid arrangement exists; otherwise, output `T_T`. Note that the outputs must be half-width characters (ASCII).", "hint": "For $30\\%$ of the testdata, $1 \\le n \\le 12$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 50$, $1 \\le T \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2009] 假期的宿舍", "background": "", "description": "学校放假了……有些同学回家了，而有些同学则有以前的好朋友来探访，那么住宿就是一个问题。\n\n比如 A 和 B 都是学校的学生，A 要回家，而 C 来看B，C 与 A 不认识。我们假设每个人只能睡和自己直接认识的人的床。那么一个解决方案就是 B 睡 A 的床而 C 睡 B 的床。而实际情况可能非常复杂，有的人可能认识好多在校学生，在校学生之间也不一定都互相认识。\n\n我们已知一共有 $n$ 个人，并且知道其中每个人是不是本校学生，也知道每个本校学生是否回家。问是否存在一个方案使得所有不回家的本校学生和来看他们的其他人都有地方住。\n", "inputFormat": "第一行一个数 $T$ 表示数据组数。接下来 $T$ 组数据，每组数据第一行一个数 $n$ 表示涉及到的总人数。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否是在校学生 ($0$ 表示不是，$1$ 表示是)。再接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否回家 ($0$ 表示不回家，$1$ 表示回家，注意如果第 $i$ 个人不是在校学生，那么这个位置上的数是一个随机的数，你应该在读入以后忽略它)。\n\n接下来 $n$ 行每行 $n$ 个数，第 $i$ 行第 $j$ 个数表示 $i$ 和 $j$ 是否认识 ($1$ 表示认识，$0$ 表示不认识，第 $i$ 行 $i$ 个的值为 $0$，但是显然自己还是可以睡自己的床)，认识的关系是相互的。\n", "outputFormat": "对于每组数据，如果存在一个方案则输出 `^_^`，否则输出`T_T`。（注意输出的都是半角字符，即三个符号的 ASCII 码分别为 $94,84,95$）\n", "hint": "对于 $30\\%$ 的数据满足 $1 \\le n \\le 12$。\n\n对于 $100\\%$ 的数据满足 $1 \\le n \\le 50$，$1 \\le T \\le 20$。\n", "locale": "zh-CN"}}}
{"pid": "P2056", "type": "P", "difficulty": 6, "samples": [["8\n1 2\n2 3\n3 4\n3 5\n3 6\n6 7\n6 8\n7\nG\nC 1\nG\nC 2\nG\nC 1\nG", "4\n3\n3\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 5000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2007", "线段树", "各省省选", "点分治", "浙江", "线段树分治"], "title": "[ZJOI2007] 捉迷藏", "background": null, "description": "Jiajia 和 Wind 是一对恩爱的夫妻，并且他们有很多孩子。某天，Jiajia、Wind 和孩子们决定在家里玩捉迷藏游戏。他们的家很大且构造很奇特，由 $N$ 个屋子和 $N-1$ 条双向走廊组成，这 $N-1$ 条走廊的分布使得任意两个屋子都互相可达。 \n\n\n游戏是这样进行的，孩子们负责躲藏，Jiajia 负责找，而 Wind 负责操纵这 $N$ 个屋子的灯。在起初的时候，所有的灯都没有被打开。每一次，孩子们只会躲藏在没有开灯的房间中，但是为了增加刺激性，孩子们会要求打开某个房间的电灯或者关闭某个房间的电灯。为了评估某一次游戏的复杂性，Jiajia 希望知道可能的最远的两个孩子的距离（即最远的两个关灯房间的距离）。 \n\n我们将以如下形式定义每一种操作： \n\n- C(hange) i 改变第 $i$ 个房间的照明状态，若原来打开，则关闭；若原来关闭，则打开。 \n- G(ame) 开始一次游戏，查询最远的两个关灯房间的距离。", "inputFormat": "第一行包含一个整数 $N$，表示房间的个数，房间将被编号为 $1,2,3…N$ 的整数。\n\n接下来 $N-1$ 行每行两个整数 $a$, $b$，表示房间 $a$ 与房间 $b$ 之间有一条走廊相连。\n\n接下来一行包含一个整数 $Q$，表示操作次数。接着 $Q$ 行，每行一个操作，如上文所示。", "outputFormat": "对于每一个操作 Game，输出一个非负整数，表示最远的两个关灯房间的距离。若只有一个房间是关着灯的，输出 `0`；若所有房间的灯都开着，输出 `-1`。", "hint": "对于$20\\%$的数据， $N \\leq 50$, $Q\\leq 100$； \n\n对于$60\\%$的数据， $N \\leq 3000$, $Q \\leq 10000$； \n\n对于$100\\%$的数据， $N \\leq 100000$, $Q \\leq 500000$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2007] Hide and Seek", "background": "", "description": "Jiajia and Wind are a loving couple, and they have many children. One day, Jiajia, Wind, and the children decide to play hide-and-seek at home. Their house is large and unusual: it consists of $N$ rooms and $N-1$ bidirectional corridors whose layout ensures that any two rooms are mutually reachable.\n\nThe game proceeds as follows: the children hide, Jiajia searches, and Wind controls the lights in the $N$ rooms. Initially, all lights are off. Each time, the children will only hide in rooms whose lights are off. To make the game more exciting, the children may request to turn on or turn off the light of a certain room. To evaluate the complexity of a particular round, Jiajia wants to know the greatest possible distance between two children, that is, the maximum distance between two rooms whose lights are off.\n\nEach operation is defined as follows:\n- C(hange) i: Toggle the light state of room $i$. If it was on, turn it off; if it was off, turn it on.\n- G(ame): Start a round and query the maximum distance between two rooms with lights off.", "inputFormat": "The first line contains an integer $N$, the number of rooms. The rooms are labeled with integers $1, 2, 3, \\ldots, N$.\n\nEach of the next $N-1$ lines contains two integers $a$, $b$, indicating that there is a corridor between room $a$ and room $b$.\n\nThe next line contains an integer $Q$, the number of operations. Then follow $Q$ lines, each containing one operation as described above.", "outputFormat": "For each Game operation, output a non-negative integer representing the maximum distance between two rooms whose lights are off. If there is only one room with its light off, output `0`. If all rooms have their lights on, output `-1`.", "hint": "Constraints\n\n- For $20\\%$ of the testdata, $N \\leq 50$, $Q \\leq 100$.\n- For $60\\%$ of the testdata, $N \\leq 3000$, $Q \\leq 10000$.\n- For $100\\%$ of the testdata, $N \\leq 100000$, $Q \\leq 500000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2007] 捉迷藏", "background": null, "description": "Jiajia 和 Wind 是一对恩爱的夫妻，并且他们有很多孩子。某天，Jiajia、Wind 和孩子们决定在家里玩捉迷藏游戏。他们的家很大且构造很奇特，由 $N$ 个屋子和 $N-1$ 条双向走廊组成，这 $N-1$ 条走廊的分布使得任意两个屋子都互相可达。 \n\n\n游戏是这样进行的，孩子们负责躲藏，Jiajia 负责找，而 Wind 负责操纵这 $N$ 个屋子的灯。在起初的时候，所有的灯都没有被打开。每一次，孩子们只会躲藏在没有开灯的房间中，但是为了增加刺激性，孩子们会要求打开某个房间的电灯或者关闭某个房间的电灯。为了评估某一次游戏的复杂性，Jiajia 希望知道可能的最远的两个孩子的距离（即最远的两个关灯房间的距离）。 \n\n我们将以如下形式定义每一种操作： \n\n- C(hange) i 改变第 $i$ 个房间的照明状态，若原来打开，则关闭；若原来关闭，则打开。 \n- G(ame) 开始一次游戏，查询最远的两个关灯房间的距离。", "inputFormat": "第一行包含一个整数 $N$，表示房间的个数，房间将被编号为 $1,2,3…N$ 的整数。\n\n接下来 $N-1$ 行每行两个整数 $a$, $b$，表示房间 $a$ 与房间 $b$ 之间有一条走廊相连。\n\n接下来一行包含一个整数 $Q$，表示操作次数。接着 $Q$ 行，每行一个操作，如上文所示。", "outputFormat": "对于每一个操作 Game，输出一个非负整数，表示最远的两个关灯房间的距离。若只有一个房间是关着灯的，输出 `0`；若所有房间的灯都开着，输出 `-1`。", "hint": "对于$20\\%$的数据， $N \\leq 50$, $Q\\leq 100$； \n\n对于$60\\%$的数据， $N \\leq 3000$, $Q \\leq 10000$； \n\n对于$100\\%$的数据， $N \\leq 100000$, $Q \\leq 500000$。", "locale": "zh-CN"}}}
{"pid": "P2057", "type": "P", "difficulty": 5, "samples": [["3 3\n1 0 0\n1 2\n1 3\n3 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "2010", "各省省选", "网络流", "上海", "吉林", "最小割"], "title": "[SHOI2007] 善意的投票 / [JLOI2010] 冠军调查", "background": "", "description": "幼儿园里有 $n$ 个小朋友打算通过投票来决定睡不睡午觉。\n\n对他们来说，这个问题并不是很重要，于是他们决定发扬谦让精神。\n\n虽然每个人都有自己的主见，但是为了照顾一下自己朋友的想法，他们也可以投和自己本来意愿相反的票。\n\n我们定义一次投票的冲突数为下面两者相加：\n\n* 实际投票不同的好朋友对数。\n\n* 自己实际投票和自己本来意愿不同的人数。\n\n我们的问题就是，每位小朋友应该怎样投票，才能使冲突数最小？", "inputFormat": "第一行两个整数 $n,m$。其中 $n$ 代表总人数，$m$ 代表好朋友的对数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 个小朋友的意愿：当它为 $1$ 时表示同意睡觉，当它为 $0$ 时表示反对睡觉。\n\n接下来 $m$ 行，每行有两个整数 $i,j$，表示 $i,j$ 是一对好朋友，我们保证任何两对 $i,j$ 不会重复。\n", "outputFormat": "一行一个整数，即可能的最小冲突数。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le300$，$1\\le m \\le \\frac{n(n-1)}2$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2007] Kind-Hearted Voting / [JLOI2010] Champion Survey", "background": "", "description": "In a kindergarten, there are $n$ children who plan to decide whether to take a nap by voting.\n\nThis issue is not very important to them, so they decide to be considerate.\n\nAlthough everyone has their own preference, they may cast a vote opposite to their original intention to accommodate their friends.\n\nWe define the conflict count of a voting result as the sum of the following two quantities:\n- The number of friend pairs whose actual votes differ.\n- The number of children whose actual vote differs from their original preference.\n\nOur problem is: how should each child vote to minimize the conflict count?", "inputFormat": "The first line contains two integers $n, m$, where $n$ is the total number of children and $m$ is the number of friend pairs.\n\nThe second line contains $n$ integers. The $i$-th integer is the $i$-th child’s preference: $1$ means agreeing to take a nap, and $0$ means opposing it.\n\nThe next $m$ lines each contain two integers $i, j$, indicating that $i$ and $j$ are a pair of friends. We guarantee that any pair $i, j$ does not repeat.", "outputFormat": "Output a single integer on one line: the minimum possible conflict count.", "hint": "For $100\\%$ of the testdata, $2 \\le n \\le 300$, $1 \\le m \\le \\frac{n(n-1)}{2}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2007] 善意的投票 / [JLOI2010] 冠军调查", "background": "", "description": "幼儿园里有 $n$ 个小朋友打算通过投票来决定睡不睡午觉。\n\n对他们来说，这个问题并不是很重要，于是他们决定发扬谦让精神。\n\n虽然每个人都有自己的主见，但是为了照顾一下自己朋友的想法，他们也可以投和自己本来意愿相反的票。\n\n我们定义一次投票的冲突数为下面两者相加：\n\n* 实际投票不同的好朋友对数。\n\n* 自己实际投票和自己本来意愿不同的人数。\n\n我们的问题就是，每位小朋友应该怎样投票，才能使冲突数最小？", "inputFormat": "第一行两个整数 $n,m$。其中 $n$ 代表总人数，$m$ 代表好朋友的对数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 个小朋友的意愿：当它为 $1$ 时表示同意睡觉，当它为 $0$ 时表示反对睡觉。\n\n接下来 $m$ 行，每行有两个整数 $i,j$，表示 $i,j$ 是一对好朋友，我们保证任何两对 $i,j$ 不会重复。\n", "outputFormat": "一行一个整数，即可能的最小冲突数。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le300$，$1\\le m \\le \\frac{n(n-1)}2$。", "locale": "zh-CN"}}}
{"pid": "P2058", "type": "P", "difficulty": 3, "samples": [["3\n1 4 4 1 2 2\n2 2 2 3\n10 1 3", "3\n4\n4\n"], ["4\n1 4 1 2 2 3\n3 2 2 3\n86401 2 3 4\n86402 1 5", "3\n3\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2016", "NOIP 普及组", "队列", "双指针 two-pointer"], "title": "[NOIP 2016 普及组] 海港", "background": "NOIP2016 普及组 T3", "description": "小 K 是一个海港的海关工作人员，每天都有许多船只到达海港，船上通常有很多来自不同国家的乘客。\n\n小 K 对这些到达海港的船只非常感兴趣，他按照时间记录下了到达海港的每一艘船只情况；对于第 $i$ 艘到达的船，他记录了这艘船到达的时间 $t_i$ (单位：秒)，船上的乘客数 $k_i$，以及每名乘客的国籍 $x_{i,1}, x_{i,2},\\dots,x_{i,k}$。\n\n小K统计了 $n$ 艘船的信息，希望你帮忙计算出以每一艘船到达时间为止的 $24$ 小时（$24$ 小时 $=86400$ 秒）内所有乘船到达的乘客来自多少个不同的国家。\n\n形式化地讲，你需要计算 $n$ 条信息。对于输出的第 $i$ 条信息，你需要统计满足 $t_i-86400<t_p \\le t_i$ 的船只 $p$，在所有的 $x_{p,j}$ 中，总共有多少个不同的数。\n", "inputFormat": "第一行输入一个正整数 $n$，表示小 K 统计了 $n$ 艘船的信息。\n\n接下来 $n$ 行，每行描述一艘船的信息：前两个整数 $t_i$ 和 $k_i$ 分别表示这艘船到达海港的时间和船上的乘客数量，接下来 $k_i$ 个整数 $x_{i,j}$ 表示船上乘客的国籍。\n\n保证输入的 $t_i$ 是递增的，单位是秒；表示从小K第一次上班开始计时，这艘船在第 $t_i$ 秒到达海港。\n\n保证 $1 \\le n \\le 10^5$，$\\sum{k_i} \\le 3\\times 10^5 $ ，$1\\le x_{i,j} \\le 10^5$， $1 \\le t_{i-1}\\le  t_i    \\le  10^9$。\n\n\n其中 $\\sum{k_i}$ 表示所有的 $k_i$ 的和。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行输出一个整数表示第 $i$ 艘船到达后的统计信息。\n", "hint": "【样例解释 1】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $4,1,2,2$，共来自 $3$ 个不同的国家；\n\n第二艘船在第 $2$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4 + 2 = 6$ 个乘客，分别是来自国家 $4,1,2,2,2,3$，共来自 $4$ 个不同的国家；\n\n第三艘船在第 $10$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船、第二艘船和第三艘船，共有 $4+2+1=7$ 个乘客，分别是来自国家 $4,1,2,2,2,3,3$，共来自 $4$ 个不同的国家。\n\n【样例解释 2】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $1,2,2,3$，共来自 $3$ 个不同的国家。\n\n第二艘船在第 $3$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4+2=6$ 个乘客，分别是来自国家 $1,2,2,3,2,3$，共来自 $3$ 个不同的国家。\n\n第三艘船在第 $86401$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船和第三艘船，共有 $2+2=4$ 个乘客，分别是来自国家 $2,3,3,4$，共来自 $3$ 个不同的国家。\n\n第四艘船在第 $86402$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船、第三艘船和第四艘船，共有 $2+2+1=5$ 个乘客，分别是来自国家 $2,3,3,4,5$，共来自 $4$个 不同的国家。\n\n【数据范围】\n\n- 对于 $10\\%$ 的测试点，$n=1,\\sum k_i \\leq 10,1 \\leq x_{i,j} \\leq 10, 1 \\leq t_i \\leq 10$。\n- 对于 $20\\%$ 的测试点，$1 \\leq n \\leq 10, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 32767$。\n- 对于 $40\\%$ 的测试点，$1 \\leq n \\leq 100, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 86400$。\n- 对于 $70\\%$ 的测试点，$1 \\leq n \\leq 1000, \\sum k_i \\leq 3000,1 \\leq x_{i,j} \\leq 1000,1 \\leq t_i \\leq 10^9$。\n- 对于 $100\\%$ 的测试点，$1 \\leq n \\leq 10^5,\\sum k_i \\leq 3\\times 10^5, 1 \\leq x_{i,j} \\leq 10^5,1\\leq t_i \\leq 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Junior] Harbor", "background": "NOIP 2016 Junior T3.", "description": "Xiao K is a customs officer at a harbor. Many ships arrive at the harbor every day, and there are usually many passengers on board from different countries.\n\nXiao K is very interested in these ships that arrive at the harbor. He records every ship in chronological order. For the $i$-th arriving ship, he records its arrival time $t_i$ (in seconds), the number of passengers $k_i$, and the nationality of each passenger $x_{i,1}, x_{i,2}, \\dots, x_{i,k_i}$.\n\nXiao K has collected information about $n$ ships. Please help him compute, for each ship’s arrival time, how many distinct countries the passengers come from among all ships that arrived within the last $24$ hours ($24$ hours $= 86400$ seconds), up to and including that time.\n\nFormally, you need to compute $n$ values. For the $i$-th output, consider all ships $p$ satisfying $t_i - 86400 < t_p \\le t_i$. Among all $x_{p,j}$ in these ships, count how many distinct values there are.", "inputFormat": "The first line contains a positive integer $n$, indicating that Xiao K recorded information about $n$ ships.\n\nEach of the next $n$ lines describes one ship: the first two integers $t_i$ and $k_i$ denote the ship’s arrival time and the number of passengers on board, followed by $k_i$ integers $x_{i,j}$, which are the nationalities of the passengers.\n\nIt is guaranteed that the $t_i$ are nondecreasing, measured in seconds. Counting from when Xiao K first started working, the $i$-th ship arrives at second $t_i$.\n\nIt is guaranteed that $1 \\le n \\le 10^5$, $\\sum k_i \\le 3 \\times 10^5$, $1 \\le x_{i,j} \\le 10^5$, $1 \\le t_{i-1} \\le t_i \\le 10^9$.\n\nHere, $\\sum k_i$ denotes the sum of all $k_i$.", "outputFormat": "Output $n$ lines. On the $i$-th line, output one integer: the required statistic after the $i$-th ship arrives.", "hint": "Sample Explanation 1:\n\nThe first ship arrives at second $1$. The ships that arrived in the last $24$ hours are just the first ship, with $4$ passengers from countries $4, 1, 2, 2$, for a total of $3$ distinct countries.\n\nThe second ship arrives at second $2$. The ships that arrived in the last $24$ hours are the first and second ships, with $4 + 2 = 6$ passengers from countries $4, 1, 2, 2, 2, 3$, for a total of $4$ distinct countries.\n\nThe third ship arrives at second $10$. The ships that arrived in the last $24$ hours are the first, second, and third ships, with $4 + 2 + 1 = 7$ passengers from countries $4, 1, 2, 2, 2, 3, 3$, for a total of $4$ distinct countries.\n\nSample Explanation 2:\n\nThe first ship arrives at second $1$. The ships that arrived in the last $24$ hours are just the first ship, with $4$ passengers from countries $1, 2, 2, 3$, for a total of $3$ distinct countries.\n\nThe second ship arrives at second $3$. The ships that arrived in the last $24$ hours are the first and second ships, with $4 + 2 = 6$ passengers from countries $1, 2, 2, 3, 2, 3$, for a total of $3$ distinct countries.\n\nThe third ship arrives at second $86401$. The ships that arrived in the last $24$ hours are the second and third ships, with $2 + 2 = 4$ passengers from countries $2, 3, 3, 4$, for a total of $3$ distinct countries.\n\nThe fourth ship arrives at second $86402$. The ships that arrived in the last $24$ hours are the second, third, and fourth ships, with $2 + 2 + 1 = 5$ passengers from countries $2, 3, 3, 4, 5$, for a total of $4$ distinct countries.\n\nConstraints\n\n- For $10\\%$ of the test points, $n = 1, \\sum k_i \\leq 10, 1 \\leq x_{i,j} \\leq 10, 1 \\leq t_i \\leq 10$.\n- For $20\\%$ of the test points, $1 \\leq n \\leq 10, \\sum k_i \\leq 100, 1 \\leq x_{i,j} \\leq 100, 1 \\leq t_i \\leq 32767$.\n- For $40\\%$ of the test points, $1 \\leq n \\leq 100, \\sum k_i \\leq 100, 1 \\leq x_{i,j} \\leq 100, 1 \\leq t_i \\leq 86400$.\n- For $70\\%$ of the test points, $1 \\leq n \\leq 1000, \\sum k_i \\leq 3000, 1 \\leq x_{i,j} \\leq 1000, 1 \\leq t_i \\leq 10^9$.\n- For $100\\%$ of the test points, $1 \\leq n \\leq 10^5, \\sum k_i \\leq 3 \\times 10^5, 1 \\leq x_{i,j} \\leq 10^5, 1 \\leq t_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 普及组] 海港", "background": "NOIP2016 普及组 T3", "description": "小 K 是一个海港的海关工作人员，每天都有许多船只到达海港，船上通常有很多来自不同国家的乘客。\n\n小 K 对这些到达海港的船只非常感兴趣，他按照时间记录下了到达海港的每一艘船只情况；对于第 $i$ 艘到达的船，他记录了这艘船到达的时间 $t_i$ (单位：秒)，船上的乘客数 $k_i$，以及每名乘客的国籍 $x_{i,1}, x_{i,2},\\dots,x_{i,k}$。\n\n小K统计了 $n$ 艘船的信息，希望你帮忙计算出以每一艘船到达时间为止的 $24$ 小时（$24$ 小时 $=86400$ 秒）内所有乘船到达的乘客来自多少个不同的国家。\n\n形式化地讲，你需要计算 $n$ 条信息。对于输出的第 $i$ 条信息，你需要统计满足 $t_i-86400<t_p \\le t_i$ 的船只 $p$，在所有的 $x_{p,j}$ 中，总共有多少个不同的数。\n", "inputFormat": "第一行输入一个正整数 $n$，表示小 K 统计了 $n$ 艘船的信息。\n\n接下来 $n$ 行，每行描述一艘船的信息：前两个整数 $t_i$ 和 $k_i$ 分别表示这艘船到达海港的时间和船上的乘客数量，接下来 $k_i$ 个整数 $x_{i,j}$ 表示船上乘客的国籍。\n\n保证输入的 $t_i$ 是递增的，单位是秒；表示从小K第一次上班开始计时，这艘船在第 $t_i$ 秒到达海港。\n\n保证 $1 \\le n \\le 10^5$，$\\sum{k_i} \\le 3\\times 10^5 $ ，$1\\le x_{i,j} \\le 10^5$， $1 \\le t_{i-1}\\le  t_i    \\le  10^9$。\n\n\n其中 $\\sum{k_i}$ 表示所有的 $k_i$ 的和。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行输出一个整数表示第 $i$ 艘船到达后的统计信息。\n", "hint": "【样例解释 1】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $4,1,2,2$，共来自 $3$ 个不同的国家；\n\n第二艘船在第 $2$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4 + 2 = 6$ 个乘客，分别是来自国家 $4,1,2,2,2,3$，共来自 $4$ 个不同的国家；\n\n第三艘船在第 $10$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船、第二艘船和第三艘船，共有 $4+2+1=7$ 个乘客，分别是来自国家 $4,1,2,2,2,3,3$，共来自 $4$ 个不同的国家。\n\n【样例解释 2】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $1,2,2,3$，共来自 $3$ 个不同的国家。\n\n第二艘船在第 $3$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4+2=6$ 个乘客，分别是来自国家 $1,2,2,3,2,3$，共来自 $3$ 个不同的国家。\n\n第三艘船在第 $86401$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船和第三艘船，共有 $2+2=4$ 个乘客，分别是来自国家 $2,3,3,4$，共来自 $3$ 个不同的国家。\n\n第四艘船在第 $86402$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船、第三艘船和第四艘船，共有 $2+2+1=5$ 个乘客，分别是来自国家 $2,3,3,4,5$，共来自 $4$个 不同的国家。\n\n【数据范围】\n\n- 对于 $10\\%$ 的测试点，$n=1,\\sum k_i \\leq 10,1 \\leq x_{i,j} \\leq 10, 1 \\leq t_i \\leq 10$。\n- 对于 $20\\%$ 的测试点，$1 \\leq n \\leq 10, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 32767$。\n- 对于 $40\\%$ 的测试点，$1 \\leq n \\leq 100, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 86400$。\n- 对于 $70\\%$ 的测试点，$1 \\leq n \\leq 1000, \\sum k_i \\leq 3000,1 \\leq x_{i,j} \\leq 1000,1 \\leq t_i \\leq 10^9$。\n- 对于 $100\\%$ 的测试点，$1 \\leq n \\leq 10^5,\\sum k_i \\leq 3\\times 10^5, 1 \\leq x_{i,j} \\leq 10^5,1\\leq t_i \\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2059", "type": "P", "difficulty": 5, "samples": [["5 5\n2 3 5 7 11\n", "22.72% 17.12% 15.36% 25.44% 19.36%\n"], ["4 4\n3 4 5 6", "25.00% 25.00% 25.00% 25.00%"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2013", "各省省选", "吉林"], "title": "[JLOI2013] 卡牌游戏", "background": "", "description": "$N$ 个人坐成一圈玩游戏。一开始我们把所有玩家按顺时针从 $1$ 到 $N$ 编号。首先第一回合是玩家 $1$ 作为庄家。每个回合庄家都会随机（即按相等的概率）从卡牌堆里选择一张卡片，假设卡片上的数字为 $X$，则庄家首先把卡片上的数字向所有玩家展示，然后按顺时针从庄家位置数第 $X$ 个人将被处决(即退出游戏)。然后卡片将会被放回卡牌堆里并重新洗牌。被处决的人按顺时针的下一个人将会作为下一轮的庄家。那么经过 $N-1$ 轮后最后只会剩下一个人，即为本次游戏的胜者。现在你预先知道了总共有 $M$ 张卡片，也知道每张卡片上的数字。现在你需要确定每个玩家胜出的概率。\n\n这里有一个简单的例子：\n\n例如一共有 $4$ 个玩家，有四张卡片分别写着`3,4,5,6`.\n\n第一回合，庄家是玩家 $1$ ，假设他选择了一张写着数字 $5$ 的卡片。那么按顺时针数 `1,2,3,4,1`，最后玩家 $1$ 被踢出游戏。\n\n第二回合，庄家就是玩家 $1$ 的下一个人，即玩家 $2$.假设玩家 $2$ 这次选择了一张数字 $6$，那么 `2,3,4,2,3,4`，玩家 $4$ 被踢出游戏。\n\n第三回合，玩家 $2$ 再一次成为庄家。如果这一次玩家 $2$ 再次选了 $6$，则玩家 $3$ 被踢出游戏，最后的胜者就是玩家 $2$。", "inputFormat": "第一行包括两个整数 $N,M$ 分别表示玩家个数和卡牌总数。\n\n接下来一行包含 $M$ 个整数，分别给出每张卡片上写的数字。", "outputFormat": "输出一行包含 $N$ 个百分比形式给出的实数，四舍五入到两位小数。分别给出从玩家 $1$ 到玩家 $N$ 的胜出概率，每个概率之间用空格隔开，最后不要有空格。", "hint": "对于 $30\\%$ 的数据，有 $1\\le N\\le 10$。\n\n对于 $50\\%$ 的数据，有 $1\\le N\\le 30$。\n\n对于 $100\\%$ 的数据，有 $1\\le N\\le 50$, $1\\le M\\le 50$, $1\\le$ 每张卡片上的数字 $\\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[JLOI2013] Card Game", "background": "", "description": "$N$ people sit in a circle to play a game. At the beginning, all players are numbered clockwise from $1$ to $N$. In the first round, player $1$ is the dealer. In each round, the dealer randomly (i.e., with equal probability) selects one card from the deck. Suppose the number on the card is $X$. The dealer first shows $X$ to all players, then, counting clockwise starting from the dealer’s position, the $X$-th person is eliminated (i.e., leaves the game). The card is then returned to the deck and the deck is reshuffled. The next person clockwise after the eliminated player becomes the dealer for the next round. After $N-1$ rounds, only one person remains, who is the winner. You are given that there are $M$ cards in total and the number on each card. You need to determine the winning probability of each player.\n\nHere is a simple example:\n\nFor example, there are $4$ players and four cards with the numbers `3,4,5,6`.\n\nIn the first round, the dealer is player $1$. Suppose they draw a card with the number $5$. Counting clockwise `1,2,3,4,1`, player $1$ is eliminated.\n\nIn the second round, the dealer is the next player after player $1$, i.e., player $2$. Suppose player $2$ now draws a card with the number $6$. Counting `2,3,4,2,3,4`, player $4$ is eliminated.\n\nIn the third round, player $2$ is again the dealer. If player $2$ draws $6$ again, then player $3$ is eliminated, and the winner is player $2$.", "inputFormat": "The first line contains two integers $N, M$, the number of players and the total number of cards.\n\nThe next line contains $M$ integers, giving the number on each card.", "outputFormat": "Output one line containing $N$ real numbers in percentage form, rounded to two decimal places. These are the winning probabilities of players $1$ through $N$, separated by single spaces, with no trailing space at the end.", "hint": "- For $30\\%$ of the testdata, $1 \\le N \\le 10$.\n- For $50\\%$ of the testdata, $1 \\le N \\le 30$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 50$, $1 \\le M \\le 50$, and $1 \\le$ each card’s number $\\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JLOI2013] 卡牌游戏", "background": "", "description": "$N$ 个人坐成一圈玩游戏。一开始我们把所有玩家按顺时针从 $1$ 到 $N$ 编号。首先第一回合是玩家 $1$ 作为庄家。每个回合庄家都会随机（即按相等的概率）从卡牌堆里选择一张卡片，假设卡片上的数字为 $X$，则庄家首先把卡片上的数字向所有玩家展示，然后按顺时针从庄家位置数第 $X$ 个人将被处决(即退出游戏)。然后卡片将会被放回卡牌堆里并重新洗牌。被处决的人按顺时针的下一个人将会作为下一轮的庄家。那么经过 $N-1$ 轮后最后只会剩下一个人，即为本次游戏的胜者。现在你预先知道了总共有 $M$ 张卡片，也知道每张卡片上的数字。现在你需要确定每个玩家胜出的概率。\n\n这里有一个简单的例子：\n\n例如一共有 $4$ 个玩家，有四张卡片分别写着`3,4,5,6`.\n\n第一回合，庄家是玩家 $1$ ，假设他选择了一张写着数字 $5$ 的卡片。那么按顺时针数 `1,2,3,4,1`，最后玩家 $1$ 被踢出游戏。\n\n第二回合，庄家就是玩家 $1$ 的下一个人，即玩家 $2$.假设玩家 $2$ 这次选择了一张数字 $6$，那么 `2,3,4,2,3,4`，玩家 $4$ 被踢出游戏。\n\n第三回合，玩家 $2$ 再一次成为庄家。如果这一次玩家 $2$ 再次选了 $6$，则玩家 $3$ 被踢出游戏，最后的胜者就是玩家 $2$。", "inputFormat": "第一行包括两个整数 $N,M$ 分别表示玩家个数和卡牌总数。\n\n接下来一行包含 $M$ 个整数，分别给出每张卡片上写的数字。", "outputFormat": "输出一行包含 $N$ 个百分比形式给出的实数，四舍五入到两位小数。分别给出从玩家 $1$ 到玩家 $N$ 的胜出概率，每个概率之间用空格隔开，最后不要有空格。", "hint": "对于 $30\\%$ 的数据，有 $1\\le N\\le 10$。\n\n对于 $50\\%$ 的数据，有 $1\\le N\\le 30$。\n\n对于 $100\\%$ 的数据，有 $1\\le N\\le 50$, $1\\le M\\le 50$, $1\\le$ 每张卡片上的数字 $\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2060", "type": "P", "difficulty": 5, "samples": [["1 2 7 9", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2006", "各省省选", "湖南", "广度优先搜索 BFS"], "title": "[HNOI2006] 马步距离", "background": "", "description": "在国际象棋和中国象棋中，马的移动规则相同，都是走“日”字，我们将这种移动方式称为马步移动。\n\n如下图所示，从标号为 $0$ 的点出发，可以经过一步马步移动达到标号为 $1$ 的点，经过两步马步移动达到标号为 $2$ 的点。\n\n![](https://cdn.luogu.com.cn/upload/pic/15477.png)\n\n任给平面上的两点 $p$ 和 $s$，它们的坐标分别为 $(x_p,y_p)$ 和 $(x_s,y_s)$，从 $(x,y)$ 出发经过一步马步移动可以达到 $(x+1,y+2)$，$(x+2,y+1)$，$(x+1,y-2)$，$(x+2,y-1)$，$(x-1,y+2)$，$(x-2,y+1)$，$(x-1,y-2)$、$(x-2,y-1)$。\n\n假设棋盘充分大，并且坐标可以为负数。现在请你求出从点 $p$ 到点 $s$ 至少需要经过多少次马步移动？", "inputFormat": "输入只有一行四个用空格隔开的整数，分别代表 $x_p,y_p,x_s,y_s$。", "outputFormat": "含一个整数，表示从点 $p$ 到点 $s$ 至少需要经过的马步移动次数。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1 \\leq x_p,y_p,x_s,y_s \\leq 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Knight Move Distance", "background": "", "description": "In international chess and Chinese chess (Xiangqi), the horse/knight moves in the same way, following an L shape. We call this movement a knight move.\n\nAs shown in the figure below, starting from the point labeled $0$, you can reach a point labeled $1$ in one knight move, and a point labeled $2$ in two knight moves.\n\n![](https://cdn.luogu.com.cn/upload/pic/15477.png)\n\nGiven any two points $p$ and $s$ on the plane, with coordinates $(x_p,y_p)$ and $(x_s,y_s)$ respectively, from $(x,y)$ you can reach $(x+1,y+2)$, $(x+2,y+1)$, $(x+1,y-2)$, $(x+2,y-1)$, $(x-1,y+2)$, $(x-2,y+1)$, $(x-1,y-2)$, $(x-2,y-1)$ in one knight move.\n\nAssume the board is sufficiently large, and coordinates can be negative. Please compute the minimum number of knight moves needed to get from point $p$ to point $s$.", "inputFormat": "A single line containing four integers separated by spaces, representing $x_p,y_p,x_s,y_s$.", "outputFormat": "Output a single integer, the minimum number of knight moves from point $p$ to point $s$.", "hint": "#### Constraints\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq x_p,y_p,x_s,y_s \\leq 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 马步距离", "background": "", "description": "在国际象棋和中国象棋中，马的移动规则相同，都是走“日”字，我们将这种移动方式称为马步移动。\n\n如下图所示，从标号为 $0$ 的点出发，可以经过一步马步移动达到标号为 $1$ 的点，经过两步马步移动达到标号为 $2$ 的点。\n\n![](https://cdn.luogu.com.cn/upload/pic/15477.png)\n\n任给平面上的两点 $p$ 和 $s$，它们的坐标分别为 $(x_p,y_p)$ 和 $(x_s,y_s)$，从 $(x,y)$ 出发经过一步马步移动可以达到 $(x+1,y+2)$，$(x+2,y+1)$，$(x+1,y-2)$，$(x+2,y-1)$，$(x-1,y+2)$，$(x-2,y+1)$，$(x-1,y-2)$、$(x-2,y-1)$。\n\n假设棋盘充分大，并且坐标可以为负数。现在请你求出从点 $p$ 到点 $s$ 至少需要经过多少次马步移动？", "inputFormat": "输入只有一行四个用空格隔开的整数，分别代表 $x_p,y_p,x_s,y_s$。", "outputFormat": "含一个整数，表示从点 $p$ 到点 $s$ 至少需要经过的马步移动次数。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1 \\leq x_p,y_p,x_s,y_s \\leq 10^7$。", "locale": "zh-CN"}}}
{"pid": "P2061", "type": "P", "difficulty": 5, "samples": [["4\n2 5 1\n9 10 4\n6 8 2\n4 6 3", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "线段树", "USACO", "颜色段均摊（珂朵莉树 ODT）", "离散化", "扫描线"], "title": "[USACO07OPEN] City Horizon S", "background": "", "description": "Farmer John has taken his cows on a trip to the city! As the sun sets, the cows gaze at the city horizon and observe the beautiful silhouettes formed by the rectangular buildings.\n\nThe entire horizon is represented by a number line with N (1 ≤ N ≤ 40,000) buildings. Building i's silhouette has a base that spans locations Ai through Bi along the horizon (1 ≤ Ai < Bi ≤ 1,000,000,000) and has height Hi (1 ≤ Hi ≤ 1,000,000,000). Determine the area, in square units, of the aggregate silhouette formed by all N buildings.\n", "inputFormat": "Line 1: A single integer: N\nLines 2..N+1: Input line i+1 describes building i with three space-separated integers: A_i, B_i, and H_i", "outputFormat": "Line 1: The total area, in square units, of the silhouettes formed by all N buildings", "hint": "N<=40000 , a、b、k<=10^9 。\n", "locale": "en", "translations": {"en": {"title": "[USACO07OPEN] City Horizon S", "background": "", "description": "Farmer John has taken his cows on a trip to the city! As the sun sets, the cows gaze at the city horizon and observe the beautiful silhouettes formed by the rectangular buildings.\n\nThe entire horizon is represented by a number line with N (1 ≤ N ≤ 40,000) buildings. Building i's silhouette has a base that spans locations Ai through Bi along the horizon (1 ≤ Ai < Bi ≤ 1,000,000,000) and has height Hi (1 ≤ Hi ≤ 1,000,000,000). Determine the area, in square units, of the aggregate silhouette formed by all N buildings.\n", "inputFormat": "Line 1: A single integer: N\nLines 2..N+1: Input line i+1 describes building i with three space-separated integers: A_i, B_i, and H_i", "outputFormat": "Line 1: The total area, in square units, of the silhouettes formed by all N buildings", "hint": "N<=40000 , a、b、k<=10^9 。\n", "locale": "en"}, "zh-CN": {"title": "[USACO07OPEN] City Horizon S", "background": null, "description": "Farmer John 正带着他的奶牛去城市旅行！当太阳落下时，奶牛们凝望着城市的天际线，观察着由矩形建筑形成的美丽轮廓。\n\n整个地平线可以用一个包含 $N$ 座建筑物（$1\\le N \\le4\\times10^4$）的坐标轴表示。第 $i$ 座矩形建筑的底部轮廓从 $A_i$ 点延伸到 $B_i$ 点（$1\\le A_i<B_i\\le10^9$），高度为 $H_i$（$1\\le H_i\\le10^9$）。请计算出所有 $N$ 座建筑物叠加起来形成的轮廓总面积（以平方单位计）。", "inputFormat": "第一行：一个整数 $N$。\n\n第二行至第 $N + 1$ 行：每行输入三个用空格分开的整数 $A_i$、$B_i$、$H_i$，表示一个矩形建筑。", "outputFormat": "一行：表示所有 $N$ 座建筑物叠加起来形成的轮廓总面积。", "hint": "$1\\le N \\le4\\times10^4$ , $1\\le A_i<B_i\\le10^9$ , $1\\le H_i\\le10^9$", "locale": "zh-CN"}}}
{"pid": "P2062", "type": "P", "difficulty": 3, "samples": [["5\r\n2\r\n1\r\n2\r\n2\r\n3 \r\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心"], "title": "分队问题", "background": "", "description": "给定 $n$ 个选手，将他们分成若干只队伍。其中第 $i$ 个选手要求自己所属的队伍的人数大等于 $a_i$ 人。\n\n在满足所有选手的要求的前提下，最大化队伍的总数。\n\n注：每个选手属于且仅属于一支队伍。", "inputFormat": "第一行一个整数 $n$，表示人数。\n\n以下 $n$ 行，每行一个整数表示 $a_i$。", "outputFormat": "输出队伍总数的最大值。数据保证有解。\n", "hint": "对于 $20\\%$ 的数据，$n \\leq 10$。\n\n对于 $40\\%$ 的数据，$n \\leq 1000$。\n\n对于 $60\\%$ 的数据，$n \\leq 10000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Team Division Problem", "background": "", "description": "Given $n$ players, partition them into several teams. The $i$-th player requires that the size of their team be at least $a_i$.\n\nSubject to satisfying all players' requirements, maximize the total number of teams.\n\nNote: Each player belongs to exactly one team.", "inputFormat": "The first line contains an integer $n$, the number of people.\n\nThe next $n$ lines each contain an integer $a_i$.", "outputFormat": "Output the maximum possible number of teams. It is guaranteed that a solution exists.", "hint": "- For 20% of the testdata, $n \\leq 10$.\n- For 40% of the testdata, $n \\leq 1000$.\n- For 60% of the testdata, $n \\leq 10000$.\n- For 100% of the testdata, $1 \\leq n \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分队问题", "background": "", "description": "给定 $n$ 个选手，将他们分成若干只队伍。其中第 $i$ 个选手要求自己所属的队伍的人数大等于 $a_i$ 人。\n\n在满足所有选手的要求的前提下，最大化队伍的总数。\n\n注：每个选手属于且仅属于一支队伍。", "inputFormat": "第一行一个整数 $n$，表示人数。\n\n以下 $n$ 行，每行一个整数表示 $a_i$。", "outputFormat": "输出队伍总数的最大值。数据保证有解。\n", "hint": "对于 $20\\%$ 的数据，$n \\leq 10$。\n\n对于 $40\\%$ 的数据，$n \\leq 1000$。\n\n对于 $60\\%$ 的数据，$n \\leq 10000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2063", "type": "P", "difficulty": 7, "samples": [["6\n9\n98\n987\n9876\n98765\n987654321", "2\n0 3\n3 0\n1\n7 7\n0\n0\n4\n13 314\n178 259\n259 178\n314 13\n6\n4080 31161\n11064 29415\n18264 25575\n25575 18264\n29415 11064\n31161 4080"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论"], "title": "二平方和定理", "background": "", "description": "对于正整数 $n$，请求出所有满足 $x^2+y^2=n$ 的非负整数对 $(x,y)$。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，代表数据组数。\n\n对于每组数据，一行一个正整数，表示 $n$ 的值。", "outputFormat": "对于每组数据，首先输出一行一个非负整数，代表满足条件的 $(x,y)$ 的个数。随后按 $x$ 从小到大的顺序依次输出 $(x,y)$。$x$ 与 $y$ 之间用空格分隔，每组 $(x,y)$ 之间用换行分隔。\n\n每组数据之间用换行分隔。", "hint": "对于所有数据，$1\\le T\\le 10^2,1\\le n\\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Sum of Two Squares Theorem", "background": "", "description": "For a positive integer $n$, find all pairs of non-negative integers $(x, y)$ such that $x^2+y^2=n$.", "inputFormat": "There are multiple test cases.\n\nThe first line contains a positive integer $T$, representing the number of test cases.\n\nFor each test case, the next line contains a positive integer, which is the value of $n$.", "outputFormat": "For each test case, first output a single non-negative integer, representing the number of pairs $(x, y)$ that satisfy the condition. Then output all $(x, y)$ in increasing order of $x$. Separate $x$ and $y$ with a space, and separate different pairs with a newline.\n\nInsert a blank line between different test cases.", "hint": "Constraints: For all testdata, $1\\le T\\le 10^2,1\\le n\\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二平方和定理", "background": "", "description": "对于正整数 $n$，请求出所有满足 $x^2+y^2=n$ 的非负整数对 $(x,y)$。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，代表数据组数。\n\n对于每组数据，一行一个正整数，表示 $n$ 的值。", "outputFormat": "对于每组数据，首先输出一行一个非负整数，代表满足条件的 $(x,y)$ 的个数。随后按 $x$ 从小到大的顺序依次输出 $(x,y)$。$x$ 与 $y$ 之间用空格分隔，每组 $(x,y)$ 之间用换行分隔。\n\n每组数据之间用换行分隔。", "hint": "对于所有数据，$1\\le T\\le 10^2,1\\le n\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2064", "type": "P", "difficulty": 4, "samples": [["15121", "-1"], ["571", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "深度优先搜索 DFS"], "title": "奇妙的汽车", "background": null, "description": "你有着一辆奇妙的汽车，这辆汽车有着自动加速的功能。打个比方吧，第 $1$ 天你驾驶着它可以行驶 $a$ 路程，那么第 $2$ 天你可以让它所走的路程增加到第 $1$ 天的 $2$ 到 $9$ 倍（必须是其中一个整数），也就是 $2a$ 到 $9a$，第 $3$ 天它所行驶的路程就将达到第 $2$ 天的 $2$ 到 $9$ 倍……也就是说，这辆车在第 $i$ 天所走的路程一定是第 $i-1$ 天的 $2$ 到 $9$ 倍，而且还必须是它的整数倍。\n\n现在你迫不及待地开着这辆车要从 $A$ 城市出发到 $B$ 城市旅游，顺便在路上展示一下这辆旷世奇车。你已经知道你需要行驶的里程 $S$，现在请你合理安排第 $1$ 天的里程和接下来每天需要增加路程的倍数，好让你能够在最短的天数内，恰好到达 $B$ 城市。\n\n不过，因为你想要好好展示一下你的车，而且也是为了交通安全，你被要求至少要花 $2$ 天时间，如果不能找到这样的方案请输出 `-1`。", "inputFormat": "一个正整数 $S$，代表 $A$ 城市到 $B$ 城市的里程。", "outputFormat": "一个数，代表最少需要行驶的天数，如果无解输出 `-1`。", "hint": "数据规模\n\n对于 $30\\%$ 数据，有 $S\\leq 100$；\n\n对于 $70\\%$ 数据，有 $S\\leq 10^7$；\n\n对于 $100\\%$ 数据，有 $9<S\\leq 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "The Wonderful Car", "background": "", "description": "You have a wonderful car with an auto-acceleration feature. For example, on day $1$ you can drive a distance of $a$. Then on day $2$, you can increase the distance to one of $2$ to $9$ times that of day $1$ (it must be one of these integers), that is, from $2a$ to $9a$. On day $3$, the distance will be $2$ to $9$ times that of day $2$, and so on. In other words, on day $i$, the distance must be $2$ to $9$ times that of day $i-1$, and it must be an integer multiple of it.\n\nYou are eager to drive this car from city $A$ to city $B$ for a trip and show off this extraordinary car along the way. You already know the total mileage $S$ you need to travel. Please determine the day $1$ distance and the multiplier used each subsequent day so that the total distance is exactly $S$ and the number of days is minimized.\n\nHowever, because you want to show off your car properly and for safety reasons, you are required to spend at least $2$ days. If no such plan exists, output `-1`.", "inputFormat": "A positive integer $S$, representing the distance from city $A$ to city $B$.", "outputFormat": "A single integer representing the minimum number of days required; if there is no solution, output `-1`.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $S \\leq 100$.\n- For $70\\%$ of the testdata, $S \\leq 10^7$.\n- For $100\\%$ of the testdata, $9 < S \\leq 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "奇妙的汽车", "background": null, "description": "你有着一辆奇妙的汽车，这辆汽车有着自动加速的功能。打个比方吧，第 $1$ 天你驾驶着它可以行驶 $a$ 路程，那么第 $2$ 天你可以让它所走的路程增加到第 $1$ 天的 $2$ 到 $9$ 倍（必须是其中一个整数），也就是 $2a$ 到 $9a$，第 $3$ 天它所行驶的路程就将达到第 $2$ 天的 $2$ 到 $9$ 倍……也就是说，这辆车在第 $i$ 天所走的路程一定是第 $i-1$ 天的 $2$ 到 $9$ 倍，而且还必须是它的整数倍。\n\n现在你迫不及待地开着这辆车要从 $A$ 城市出发到 $B$ 城市旅游，顺便在路上展示一下这辆旷世奇车。你已经知道你需要行驶的里程 $S$，现在请你合理安排第 $1$ 天的里程和接下来每天需要增加路程的倍数，好让你能够在最短的天数内，恰好到达 $B$ 城市。\n\n不过，因为你想要好好展示一下你的车，而且也是为了交通安全，你被要求至少要花 $2$ 天时间，如果不能找到这样的方案请输出 `-1`。", "inputFormat": "一个正整数 $S$，代表 $A$ 城市到 $B$ 城市的里程。", "outputFormat": "一个数，代表最少需要行驶的天数，如果无解输出 `-1`。", "hint": "数据规模\n\n对于 $30\\%$ 数据，有 $S\\leq 100$；\n\n对于 $70\\%$ 数据，有 $S\\leq 10^7$；\n\n对于 $100\\%$ 数据，有 $9<S\\leq 10^8$。", "locale": "zh-CN"}}}
