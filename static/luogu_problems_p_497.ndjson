{"pid": "P11082", "type": "P", "difficulty": 7, "samples": [["2\n3 3 5 20\n1 2 20\n2 3 1\n1 3 10\n2 19\n2 20\n3 20\n3 21\n3 9\n7 10 5 5\n1 2 15\n1 3 10\n2 4 21\n3 4 30\n2 5 14\n3 5 31\n4 6 3\n5 6 14\n1 7 39\n5 7 13\n7 42\n7 43\n7 44\n5 39\n6 44", "11110\n10111"], ["1\n4 6 5 2\n1 2 1\n2 3 1\n3 4 1\n1 2 70\n2 3 120\n3 4 4\n4 90\n4 2\n4 10\n4 37\n2 34", "11010"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "Special Judge", "拓扑排序", "Ad-hoc", "ROI（俄罗斯）", "离线处理"], "title": "[ROI 2019] 高速电车 (Day 1)", "background": "翻译自 [ROI 2019 D1T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\nFlatland 的首都需要与邻近的城市之间建立铁路联系，而现有的铁路系统已经过时。为了优化铁路系统，需要开通一列从首都到另一个城市的高速电车。Flatland 铁路网络总共有 $n$ 个站点，从 $1$ 到 $n$ 进行编号，首都的编号是 $1$。在各个站点之间存在 $m$ 条单向线路，每条线路的行驶时间已知。", "description": "计划部门打算考虑几个不同的高速电车路线方案。每个方案由一个目标站点和预计行驶时间来定义。然而，部门知道实际的行驶时间可能无法完全符合预期。因此，他们使用参数 $p$ 来评估路线的可行性：对于给定的预计时间 $r$，如果 $r\\le x\\le\\frac{p}{p-1}\\times r$，其中 $x$ 是行驶时间的总和，则认为路线是可行的。\n\n编写一个程序，根据 Flatland 铁路网络的描述和各个路线方案，确定每个方案是否存在可行的高速电车路线。", "inputFormat": "第一行包含一个整数 $t$，表示测试数据的组数。\n\n接下来的若干行描述每组测试数据。\n\n每组测试数据的第一行包含四个整数 $n,m,q,p$，分别表示站点数量、线路数量、要考虑的路线方案数量和允许的时间偏差参数。\n\n接下来的 $m$ 行描述每条线路，每行包含三个整数 $v_i,u_i,d_i$，分别表示起始站点、终点站点和行驶时间。\n\n接下来的 $q$ 行描述每个路线方案，每行包含两个整数 $f_i$ 和 $r_i$，分别表示目标站点和预计行驶时间。", "outputFormat": "对于每个测试用例，输出一行长度为 $q$ 的字符串 $s$，其中第 $i$ 个字符 $s_i$ 等于 $1$ 表示存在可行的高速电车路线，行驶时间在区间 $[r_i,\\frac{p}{p-1}\\times r_i]$ 内；否则，$s_i$ 等于 $0$ 表示不存在可行的高速电车路线。", "hint": "### 样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m08fbash.png)\n\n### 样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pr2q9k2f.png)\n\n第一个查询的路线时间为 $1 + 120 + 1 = 122$，符合预期。\n\n第二个查询的路线时间为 $1 + 1 + 1 = 3$，符合预期。\n\n第四个查询的路线时间为 $70 + 1 + 1 = 72$，符合预期。 \n\n对于第三个和第五个查询，没有可行的路线符合预期。\n\n### 数据范围：\n\n对于 $100\\%$ 的数据，$1\\le t\\le1000,1\\le v_i<u_i\\le n\\le500000,1\\le m\\le500000,1\\le q\\le500000,2\\le p\\le20,1\\le d_i\\le10^{11},2\\le f_i\\le n,1\\le r_i\\le10^{17}$。\n\n各个 Subtask 分值及特殊性质：\n\n| Subtask | 分值 | $n$ | $m$ | $q$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $n\\le10$ | $m\\le10$ | $q\\le10$ |  |\n| $2$ | $24$ | $\\sum n\\le5000$ | $\\sum m\\le5000$ | $\\sum q\\le5000$ | $r_i\\le5000$ |\n| $3$ | $17$ |  | $m=2n-2$ | $q\\le10$ | $p=2$，且对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $4$ | $11$ |  | $m=2n-2$ |  | 对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $5$ | $11$ | $\\sum n\\le1000$ | $\\sum m\\le2000$ |  | 所有 $r_i$ 值相等 |\n| $6$ | $11$ |  |  |  | 所有 $r_i$ 值相等 |\n| $7$ | $11$ |  |  |  |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 高速电车 (Day 1)", "background": "翻译自 [ROI 2019 D1T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\nFlatland 的首都需要与邻近的城市之间建立铁路联系，而现有的铁路系统已经过时。为了优化铁路系统，需要开通一列从首都到另一个城市的高速电车。Flatland 铁路网络总共有 $n$ 个站点，从 $1$ 到 $n$ 进行编号，首都的编号是 $1$。在各个站点之间存在 $m$ 条单向线路，每条线路的行驶时间已知。", "description": "计划部门打算考虑几个不同的高速电车路线方案。每个方案由一个目标站点和预计行驶时间来定义。然而，部门知道实际的行驶时间可能无法完全符合预期。因此，他们使用参数 $p$ 来评估路线的可行性：对于给定的预计时间 $r$，如果 $r\\le x\\le\\frac{p}{p-1}\\times r$，其中 $x$ 是行驶时间的总和，则认为路线是可行的。\n\n编写一个程序，根据 Flatland 铁路网络的描述和各个路线方案，确定每个方案是否存在可行的高速电车路线。", "inputFormat": "第一行包含一个整数 $t$，表示测试数据的组数。\n\n接下来的若干行描述每组测试数据。\n\n每组测试数据的第一行包含四个整数 $n,m,q,p$，分别表示站点数量、线路数量、要考虑的路线方案数量和允许的时间偏差参数。\n\n接下来的 $m$ 行描述每条线路，每行包含三个整数 $v_i,u_i,d_i$，分别表示起始站点、终点站点和行驶时间。\n\n接下来的 $q$ 行描述每个路线方案，每行包含两个整数 $f_i$ 和 $r_i$，分别表示目标站点和预计行驶时间。", "outputFormat": "对于每个测试用例，输出一行长度为 $q$ 的字符串 $s$，其中第 $i$ 个字符 $s_i$ 等于 $1$ 表示存在可行的高速电车路线，行驶时间在区间 $[r_i,\\frac{p}{p-1}\\times r_i]$ 内；否则，$s_i$ 等于 $0$ 表示不存在可行的高速电车路线。", "hint": "### 样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m08fbash.png)\n\n### 样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pr2q9k2f.png)\n\n第一个查询的路线时间为 $1 + 120 + 1 = 122$，符合预期。\n\n第二个查询的路线时间为 $1 + 1 + 1 = 3$，符合预期。\n\n第四个查询的路线时间为 $70 + 1 + 1 = 72$，符合预期。 \n\n对于第三个和第五个查询，没有可行的路线符合预期。\n\n### 数据范围：\n\n对于 $100\\%$ 的数据，$1\\le t\\le1000,1\\le v_i<u_i\\le n\\le500000,1\\le m\\le500000,1\\le q\\le500000,2\\le p\\le20,1\\le d_i\\le10^{11},2\\le f_i\\le n,1\\le r_i\\le10^{17}$。\n\n各个 Subtask 分值及特殊性质：\n\n| Subtask | 分值 | $n$ | $m$ | $q$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $n\\le10$ | $m\\le10$ | $q\\le10$ |  |\n| $2$ | $24$ | $\\sum n\\le5000$ | $\\sum m\\le5000$ | $\\sum q\\le5000$ | $r_i\\le5000$ |\n| $3$ | $17$ |  | $m=2n-2$ | $q\\le10$ | $p=2$，且对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $4$ | $11$ |  | $m=2n-2$ |  | 对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $5$ | $11$ | $\\sum n\\le1000$ | $\\sum m\\le2000$ |  | 所有 $r_i$ 值相等 |\n| $6$ | $11$ |  |  |  | 所有 $r_i$ 值相等 |\n| $7$ | $11$ |  |  |  |  |", "locale": "zh-CN"}}}
{"pid": "P11083", "type": "P", "difficulty": 7, "samples": [["2\n\nYes\n\nNo\n\nYes\n\nCorrect\n\nNo\n\nNo\n\nDone", "\n? 2\n\n? 2\n\n? 2\n\n! 2\n\n? 2\n\n? 2\n\n! 1"], ["3\n\nYes\n\nYes\n\nNo\n\nYes\n\nNo\n\nDone", "\n? 2\n\n? 2\n\n? 3\n\n? 3\n\n? 3\n\n! 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "交互题", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 黑洞 (Day 1)", "background": "翻译自 [ROI 2019 D1T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n**这是一道 IO 交互题**。\n\n科学家计划测量一系列黑洞的辐射等级。黑洞的辐射等级由一个从 $1$ 到 $n$ 的整数表示。为了测量每个黑洞的辐射等级，使用一个特殊的轨道探测器，上面安装有辐射传感器。安装在探测器上的传感器可以回答以下查询：根据给定的 $x$ 值，确定辐射等级是否大于或等于 $x$。不幸的是，由于软件错误，传感器的回复可能是错误的。不过，在第一个错误回复之后，该探测器的状态就会改变，对所有后续的查询只给出正确的回复。\n\n科学家想要通过向其导向的探测器提出尽可能少的查询来确定几个黑洞的辐射等级。", "description": "编写一个程序与模拟探测器传感器的交互库进行交互，并确定每个黑洞的辐射等级。\n\n对于每次运行的解决方案程序，必须解决 $n$ 相同的多个黑洞的问题（即，需要确认多个黑洞的辐射等级，这些黑洞的辐射等级都在 $1$ 和 $n$ 之间）。每次的黑洞数量不超过 $100$。\n\n对于每个测试点，交互库记录了 $q$ 的值，也就是允许对一个黑洞进行的最大查询次数。保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。此数字不会被告知给你的程序。如果你的程序对一个黑洞进行了超过 $q$ 个查询，则这个测试点将会返回 WA。\n\n注：在上述 WA 的情况下，该测试点可能显示为 TLE，有可能是因为交互库已经结束并返回，但程序仍在等待该查询的回复。TLE 时可以查看该测试点返回的详细信息，以确认是程序超时还是询问次数超出限制导致的。", "inputFormat": "首先输入一个数 $n$，也就是黑洞的最大辐射强度。这个数字对于本次运行中的所有黑洞是相同的。读取 $n$ 后，你的程序应与交互库进行交互并逐步确定一个或多个黑洞的辐射等级。\n\n在输出完你对一个黑洞辐射等级的回答后，程序应另外读取一行。如果需要继续对下一个黑洞进行研究，则从交互库读入的字符串为 `Correct`；如果所有的黑洞都已经研究完成，则字符串应该为 `Done`。", "outputFormat": "要进行查询，程序必须输出格式为 `? x` 的字符串，其中 $x$ 是一个正整数。作为回答，交互库将给你的程序一个字符串，要么是 `Yes`（如果传感器的回复没有出错，就代表该黑洞的辐射等级大于或等于查询中指定的 $x$ 值），要么是 `No`（如果传感器的回复没有出错，就代表该黑洞的辐射等级小于查询中指定的 $x$ 值）。\n\n如果你的程序确定了问题的答案，则它应该输出一行 `! x`，其中 $x$ 是要查找的黑洞的辐射等级。如果 $x$ 是唯一那个与不多于一个交互库的回复相冲突的辐射水平值，则该答案被视为正确的。如果给出了错误答案，程序将被强制终止，并且该测试点的结果将会变为 WA。", "hint": "### 样例解释：\n\n在第一个示例中，对于第一个黑洞，在前两次查询之后不知道传感器的答案错误在哪一个上面，因此需要进行第三个查询。\n\n在第二个示例中，展示了 $n = 3$ 的一个可能的交互情况，程序可以在 $5$ 次查询内找到答案。可以证明，在 $4$ 次查询内无法确定答案。\n\n在这两个样例中，交互库确定的 $q=30$，明显的，这两个样例都没有超出界限。\n\n请注意，交互库可能给出不同的答案，即使程序输出与样例中完全相同的查询。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $q$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $1000$ | $q=30$ |\n| $2$ | $8$ | $1000$ | $q=21$ |\n| $3$ | $6$ | $4$ |  |\n| $4$ | $9$ | $7$ |  |\n| $5$ | $5$ | $12$ |  |\n| $6$ | $6$ | $25$ |  |\n| $7$ | $4$ | $40$ |  |\n| $8$ | $5$ | $80$ |  |\n| $9$ | $5$ | $150$ |  |\n| $10$ | $8$ | $300$ |  |\n| $11$ | $7$ | $500$ |  |\n| $12$ | $5$ | $1000$ |  |\n| $13$ | $5$ | $2000$ |  |\n| $14$ | $5$ | $4000$ |  |\n| $15$ | $5$ | $8000$ |  |\n| $16$ | $5$ | $15000$ |  |\n| $17$ | $5$ | $30000$ |  |\n\n对于 $100\\%$ 的数据，$n\\le30000$。每个测试中的 $q$ 值都保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。\n\n保证在交互库给出的每个答案之后，都一定存在一个辐射水平值，满足所有先前查询的答案（除了那次错误的）。交互库可以调整自己的行为，包括选择哪个已知答案是错误的，以及根据解决方案程序提出的查询来确定正在研究的黑洞的辐射水平。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 黑洞 (Day 1)", "background": "翻译自 [ROI 2019 D1T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n**这是一道 IO 交互题**。\n\n科学家计划测量一系列黑洞的辐射等级。黑洞的辐射等级由一个从 $1$ 到 $n$ 的整数表示。为了测量每个黑洞的辐射等级，使用一个特殊的轨道探测器，上面安装有辐射传感器。安装在探测器上的传感器可以回答以下查询：根据给定的 $x$ 值，确定辐射等级是否大于或等于 $x$。不幸的是，由于软件错误，传感器的回复可能是错误的。不过，在第一个错误回复之后，该探测器的状态就会改变，对所有后续的查询只给出正确的回复。\n\n科学家想要通过向其导向的探测器提出尽可能少的查询来确定几个黑洞的辐射等级。", "description": "编写一个程序与模拟探测器传感器的交互库进行交互，并确定每个黑洞的辐射等级。\n\n对于每次运行的解决方案程序，必须解决 $n$ 相同的多个黑洞的问题（即，需要确认多个黑洞的辐射等级，这些黑洞的辐射等级都在 $1$ 和 $n$ 之间）。每次的黑洞数量不超过 $100$。\n\n对于每个测试点，交互库记录了 $q$ 的值，也就是允许对一个黑洞进行的最大查询次数。保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。此数字不会被告知给你的程序。如果你的程序对一个黑洞进行了超过 $q$ 个查询，则这个测试点将会返回 WA。\n\n注：在上述 WA 的情况下，该测试点可能显示为 TLE，有可能是因为交互库已经结束并返回，但程序仍在等待该查询的回复。TLE 时可以查看该测试点返回的详细信息，以确认是程序超时还是询问次数超出限制导致的。", "inputFormat": "首先输入一个数 $n$，也就是黑洞的最大辐射强度。这个数字对于本次运行中的所有黑洞是相同的。读取 $n$ 后，你的程序应与交互库进行交互并逐步确定一个或多个黑洞的辐射等级。\n\n在输出完你对一个黑洞辐射等级的回答后，程序应另外读取一行。如果需要继续对下一个黑洞进行研究，则从交互库读入的字符串为 `Correct`；如果所有的黑洞都已经研究完成，则字符串应该为 `Done`。", "outputFormat": "要进行查询，程序必须输出格式为 `? x` 的字符串，其中 $x$ 是一个正整数。作为回答，交互库将给你的程序一个字符串，要么是 `Yes`（如果传感器的回复没有出错，就代表该黑洞的辐射等级大于或等于查询中指定的 $x$ 值），要么是 `No`（如果传感器的回复没有出错，就代表该黑洞的辐射等级小于查询中指定的 $x$ 值）。\n\n如果你的程序确定了问题的答案，则它应该输出一行 `! x`，其中 $x$ 是要查找的黑洞的辐射等级。如果 $x$ 是唯一那个与不多于一个交互库的回复相冲突的辐射水平值，则该答案被视为正确的。如果给出了错误答案，程序将被强制终止，并且该测试点的结果将会变为 WA。", "hint": "### 样例解释：\n\n在第一个示例中，对于第一个黑洞，在前两次查询之后不知道传感器的答案错误在哪一个上面，因此需要进行第三个查询。\n\n在第二个示例中，展示了 $n = 3$ 的一个可能的交互情况，程序可以在 $5$ 次查询内找到答案。可以证明，在 $4$ 次查询内无法确定答案。\n\n在这两个样例中，交互库确定的 $q=30$，明显的，这两个样例都没有超出界限。\n\n请注意，交互库可能给出不同的答案，即使程序输出与样例中完全相同的查询。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $q$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $1000$ | $q=30$ |\n| $2$ | $8$ | $1000$ | $q=21$ |\n| $3$ | $6$ | $4$ |  |\n| $4$ | $9$ | $7$ |  |\n| $5$ | $5$ | $12$ |  |\n| $6$ | $6$ | $25$ |  |\n| $7$ | $4$ | $40$ |  |\n| $8$ | $5$ | $80$ |  |\n| $9$ | $5$ | $150$ |  |\n| $10$ | $8$ | $300$ |  |\n| $11$ | $7$ | $500$ |  |\n| $12$ | $5$ | $1000$ |  |\n| $13$ | $5$ | $2000$ |  |\n| $14$ | $5$ | $4000$ |  |\n| $15$ | $5$ | $8000$ |  |\n| $16$ | $5$ | $15000$ |  |\n| $17$ | $5$ | $30000$ |  |\n\n对于 $100\\%$ 的数据，$n\\le30000$。每个测试中的 $q$ 值都保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。\n\n保证在交互库给出的每个答案之后，都一定存在一个辐射水平值，满足所有先前查询的答案（除了那次错误的）。交互库可以调整自己的行为，包括选择哪个已知答案是错误的，以及根据解决方案程序提出的查询来确定正在研究的黑洞的辐射水平。", "locale": "zh-CN"}}}
{"pid": "P11084", "type": "P", "difficulty": 4, "samples": [["10\n0100100000", "7\n0001000"], ["3\n111", "3\n111"], ["7\n0100101", "5\n01010"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 灯串 (Day 2)", "background": "翻译自 [ROI 2019 D2T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n对于一个由 `0` 和 `1` 组成的序列，“美丽的”的定义是：如果这个序列的第一个 `1` 前面 `0` 的数量和最后一个 `1` 后面 `0` 的数量相等，且每两个 `1` 之间的 `0` 的数量也等于这个数值，则称这个序列是“美丽的”。\n\n例如，`0101010` 和 `11111` 是“美丽的”，而 `10101` 和 `010100001000001010000` 就不是“美丽的”。", "description": "给定一串由 `0` 和 `1` 组成的序列（保证 `1` 的数量不为 $0$），需要删除其中任意位置的一些元素，使得剩下的序列构成最长的美丽的串。", "inputFormat": "第一行输入一个数 $n$，表示这个序列的长度。\n\n第二行输入一个字符串 $s$，只由 `0` 和 `1` 组成，表示这个序列。", "outputFormat": "第一行输出一个数 $m$，表示删除后剩下的序列长度。\n\n第二行输出通过删除操作后剩下的这个“美丽的”序列。\n\n如果有多种方案，输出任意一种。**注意：全为 `0` 的串不是“美丽的”**。", "hint": "设原串有 $k$ 个 $1$。\n\n| 子任务 | 分值 | $1\\le n\\le$ | $1\\le k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $15$ | $n$ |\n| $2$ | $20$ | $1000$ | $2$ |\n| $3$ | $20$ | $1000$ | $15$ |\n| $4$ | $16$ | $1000$ | $n$ |\n| $5$ | $10$ | $100000$ | $50$ |\n| $6$ | $14$ | $500000$ | $n$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 灯串 (Day 2)", "background": "翻译自 [ROI 2019 D2T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n对于一个由 `0` 和 `1` 组成的序列，“美丽的”的定义是：如果这个序列的第一个 `1` 前面 `0` 的数量和最后一个 `1` 后面 `0` 的数量相等，且每两个 `1` 之间的 `0` 的数量也等于这个数值，则称这个序列是“美丽的”。\n\n例如，`0101010` 和 `11111` 是“美丽的”，而 `10101` 和 `010100001000001010000` 就不是“美丽的”。", "description": "给定一串由 `0` 和 `1` 组成的序列（保证 `1` 的数量不为 $0$），需要删除其中任意位置的一些元素，使得剩下的序列构成最长的美丽的串。", "inputFormat": "第一行输入一个数 $n$，表示这个序列的长度。\n\n第二行输入一个字符串 $s$，只由 `0` 和 `1` 组成，表示这个序列。", "outputFormat": "第一行输出一个数 $m$，表示删除后剩下的序列长度。\n\n第二行输出通过删除操作后剩下的这个“美丽的”序列。\n\n如果有多种方案，输出任意一种。**注意：全为 `0` 的串不是“美丽的”**。", "hint": "设原串有 $k$ 个 $1$。\n\n| 子任务 | 分值 | $1\\le n\\le$ | $1\\le k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $15$ | $n$ |\n| $2$ | $20$ | $1000$ | $2$ |\n| $3$ | $20$ | $1000$ | $15$ |\n| $4$ | $16$ | $1000$ | $n$ |\n| $5$ | $10$ | $100000$ | $50$ |\n| $6$ | $14$ | $500000$ | $n$ |", "locale": "zh-CN"}}}
{"pid": "P11085", "type": "P", "difficulty": 6, "samples": [["1 2 2\n5 25\n50 90\n60 5 10 40", "10"], ["2 3 3\n200 400\n300 500\n100 600\n300 330 440 40 30 300\n150 250 350 450 550 300", "130"], ["1 3 4\n10 100\n200 200\n10 100\n300 1000\n5 10 20 15 200 90", "105"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 学生座位 (Day 2)", "background": "翻译自 [ROI 2019 D2T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n学校要购买 $n$ 张双人桌用于新的功能教室。这些桌子有 $k$ 种类型，每种类型具有不同的尺寸。第 $i$ 种类型的桌子适合身高范围在 $L_i$ 到 $R_i$ 之间（包括边界）的学生坐，而对于其他学生来说，坐在这种桌子后是不舒服的，不舒服程度定义为学生身高与桌子适合的身高范围边界（即 $L_i$ 或 $R_i$）的差的绝对值。如果桌子适合学生，不舒服程度为零。\n\n例如，如果 $L_i = 100,R_i = 120$，那么身高为 $80$ 的学生的不舒服程度为 $20$，身高为 $130$ 的学生的不舒服程度为 $10$，而身高为 $114$ 的学生的不舒服程度为 $0$。\n\n$m$ 个班的学生将轮流进入功能教室上课，每个班级恰好有 $2n$ 名学生。购买的桌子将被摆放在教室中，每张桌子坐两名学生。", "description": "已知每个学生在每个班中的身高，需要购买 $n$ 张桌子并安排每个班的学生的座位，以使得在教室中学习的所有学生的总不舒服程度最小。\n\n请编写一个程序，根据每个桌子类型的信息和每个班中学生的身高值，确定通过购买桌子并以最优方式安排学生座位所能实现的不舒服程度之和的最小值。", "inputFormat": "输入的第一行包含三个整数 $m,n,k$，分别表示将在教室中学习的班级数量、需要购买的桌子数量以及不同桌子类型的数量。\n\n接下来的 $k$ 行中，每行包含两个整数 $L_i$ 和 $R_i$，表示适合第 $i$ 种桌子的学生身高范围。\n\n接下来的 $m$ 行中，每行包含 $2n$ 个整数 $h_1,h_2,\\dots,h_{2n}$，表示这个班中每个学生的身高。", "outputFormat": "输出一个数 $P$，表示通过购买桌子并以最优方式安排学生座位后，能实现的不舒服程度之和的最小值。", "hint": "样例 $1$ 解释：在第一个样例中，只有一个班在教室里上课。应该购买每种类型的桌子一张，然后将身高为 $5$ 和 $10$ 的学生安排坐在第一种类型的桌子上，将身高为 $40$ 和 $60$ 的学生安排坐在第二种类型的桌子上。这样，只有身高为 $40$ 的学生会感到不舒服，不舒服程度为 $10$。\n\n| 子任务 | 分值 | 特殊性质 $m$ | 特殊性质 $n$ | 特殊性质 $k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le100$ | $=1$ | $\\le50$ |  |\n| $2$ | $10$ | $=1$ | $\\le1000$ | $\\le50$ |  |\n| $3$ | $10$ | $\\le50$ | $\\le5$ | $\\le3$ |  |\n| $4$ | $10$ | $\\le100$ | $\\le1000$ | $=2$ |  |\n| $5$ | $10$ | $\\le100$ | $\\le1000$ | $\\le3$ |  |\n| $6$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ | $L_i=R_i$ |\n| $7$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ |  |\n| $8$ | $8$ |  |  |  | $L_i=R_i$ |\n| $9$ | $8$ | $\\le100$ |  |  |  |\n| $10$ | $10$ |  |$\\le100$ |  |  |\n| $11$ | $4$ |  |  |  |  |\n\n对于 $100\\%$ 的数据，$1 \\le m\\times n \\le 200000,2 \\le k \\le 200000,1 \\le L_i \\le R_i \\le 10^9,1 \\le h_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 学生座位 (Day 2)", "background": "翻译自 [ROI 2019 D2T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n学校要购买 $n$ 张双人桌用于新的功能教室。这些桌子有 $k$ 种类型，每种类型具有不同的尺寸。第 $i$ 种类型的桌子适合身高范围在 $L_i$ 到 $R_i$ 之间（包括边界）的学生坐，而对于其他学生来说，坐在这种桌子后是不舒服的，不舒服程度定义为学生身高与桌子适合的身高范围边界（即 $L_i$ 或 $R_i$）的差的绝对值。如果桌子适合学生，不舒服程度为零。\n\n例如，如果 $L_i = 100,R_i = 120$，那么身高为 $80$ 的学生的不舒服程度为 $20$，身高为 $130$ 的学生的不舒服程度为 $10$，而身高为 $114$ 的学生的不舒服程度为 $0$。\n\n$m$ 个班的学生将轮流进入功能教室上课，每个班级恰好有 $2n$ 名学生。购买的桌子将被摆放在教室中，每张桌子坐两名学生。", "description": "已知每个学生在每个班中的身高，需要购买 $n$ 张桌子并安排每个班的学生的座位，以使得在教室中学习的所有学生的总不舒服程度最小。\n\n请编写一个程序，根据每个桌子类型的信息和每个班中学生的身高值，确定通过购买桌子并以最优方式安排学生座位所能实现的不舒服程度之和的最小值。", "inputFormat": "输入的第一行包含三个整数 $m,n,k$，分别表示将在教室中学习的班级数量、需要购买的桌子数量以及不同桌子类型的数量。\n\n接下来的 $k$ 行中，每行包含两个整数 $L_i$ 和 $R_i$，表示适合第 $i$ 种桌子的学生身高范围。\n\n接下来的 $m$ 行中，每行包含 $2n$ 个整数 $h_1,h_2,\\dots,h_{2n}$，表示这个班中每个学生的身高。", "outputFormat": "输出一个数 $P$，表示通过购买桌子并以最优方式安排学生座位后，能实现的不舒服程度之和的最小值。", "hint": "样例 $1$ 解释：在第一个样例中，只有一个班在教室里上课。应该购买每种类型的桌子一张，然后将身高为 $5$ 和 $10$ 的学生安排坐在第一种类型的桌子上，将身高为 $40$ 和 $60$ 的学生安排坐在第二种类型的桌子上。这样，只有身高为 $40$ 的学生会感到不舒服，不舒服程度为 $10$。\n\n| 子任务 | 分值 | 特殊性质 $m$ | 特殊性质 $n$ | 特殊性质 $k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le100$ | $=1$ | $\\le50$ |  |\n| $2$ | $10$ | $=1$ | $\\le1000$ | $\\le50$ |  |\n| $3$ | $10$ | $\\le50$ | $\\le5$ | $\\le3$ |  |\n| $4$ | $10$ | $\\le100$ | $\\le1000$ | $=2$ |  |\n| $5$ | $10$ | $\\le100$ | $\\le1000$ | $\\le3$ |  |\n| $6$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ | $L_i=R_i$ |\n| $7$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ |  |\n| $8$ | $8$ |  |  |  | $L_i=R_i$ |\n| $9$ | $8$ | $\\le100$ |  |  |  |\n| $10$ | $10$ |  |$\\le100$ |  |  |\n| $11$ | $4$ |  |  |  |  |\n\n对于 $100\\%$ 的数据，$1 \\le m\\times n \\le 200000,2 \\le k \\le 200000,1 \\le L_i \\le R_i \\le 10^9,1 \\le h_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11086", "type": "P", "difficulty": 6, "samples": [["3 3 3\n2 3 -2\n3 1 3\n1 2 1", "998244352"], ["2 4 3\n1 2 2\n2 4 -3\n2 1 1", "998244348"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 机器人高尔夫 (Day 2)", "background": "翻译自 [ROI 2019 D2T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n在“机器人奥林匹克运动会”中，有一个“机器人高尔夫比赛”。比赛场地是一个由 $n \\times m$ 个单位方块组成的矩形。场地的行用数字 $1$ 到 $n$ 编号，列用数字 $1$ 到 $m$ 编号。每个单位方块由两个正整数 $r$ 和 $c$ 表示，分别代表它所在的行和列的编号。\n\n两个机器人轮流在场地上移动一个特殊的“高尔夫球”，场地的某些方块上可能有洞。如果“高尔夫球”位于方块 $(r, c)$ 上，执行当前操作的机器人可以将其移动到方块 $(r + 1, c)$ 或方块 $(r, c + 1)$。如果“高尔夫球”位于最后一行或最后一列，机器人可以将其移动到场地的边界外。游戏会在以下两种情况下结束：“高尔夫球”超出了场地的边界，或者“高尔夫球”落到一个洞里。\n\n每个洞对应一个整数 $v_i$，表示它的价值。游戏的结果等于游戏结束时“高尔夫球”所在洞的价值，如果“高尔夫球”超出了场地的边界，则结果为 $0$。先手机器人的目标是最小化游戏结果，而后手机器人的目标是最大化游戏结果。", "description": "假设 $g(r, c)$ 表示当“高尔夫球”初始位于方块 $(r, c)$ 时，先手机器人不论对手怎么行动都可以达到的最小游戏结果。由于比赛开始前不知道初始方块，机器人开发者想要计算出所有格子对应的 $g(r, c)$ 的总和，即 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)$。", "inputFormat": "第一行包含三个整数 $n,m,k$，分别表示行数、列数和洞的个数。\n\n接下来的 $k$ 行，每行包含三个整数 $r_i,c_i,v_i$，分别表示洞所在的行、列编号和洞的价值。没有两个洞会位于同一个方块上。", "outputFormat": "输出一个整数，表示 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)\\bmod998244353$。注意：输出的结果应该在 $0$ 和 $998244352$ 之间，而不是在 $-998244352$ 和 $998244352$ 之间。", "hint": "### 样例解释：\n\n第一个样例中，所有方格的 $g(r,c)$ 如下（灰色的格子有洞）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/389eac6h.png)\n\n总结果求和为：$1 + 1 - 2 + 0 - 2 - 2 + 3 + 0 + 0 = -1$。答案为 $(-1) \\bmod 998 244 353 = (-1 + 998 244 353) = 998 244 352$。\n\n第二个样例中，所有方格的 $g(r,c)$ 如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl8p4qbc.png)\n\n总结果求和为：$1 + 2 + 0 - 3 + 1 + 0 - 3 - 3 = -5$。答案为 $(-5) \\bmod 998 244 353 = 998 244 348$。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n,m,k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n,m\\le1000$ |  |\n| $2$ | $14$ | $n\\le5,m\\le10^9$ |  |\n| $3$ | $14$ | $n,m\\le100000,k=n+m-1$ | A |\n| $4$ | $10$ |  | B |\n| $5$ | $6$ | $n,m\\le100000$ | C |\n| $6$ | $6$ |  | C |\n| $7$ | $10$ | $n,m\\le100000$ |  |\n| $8$ | $10$ | $k\\le1000$ |  |\n| $9$ | $10$ |  |  |\n\n特殊性质 A：对于任意 $i$，$r_i=n$ 或 $c_i=m$。\n\n特殊性质 B：对于任意 $i$，$r_i\\ge n-1000$ 且 $c_i\\ge m-1000$。\n\n特殊性质 C：对于任意 $i$，$v_i=1$。\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^9,1\\le k\\le\\min(n\\times m,10^5),1\\le r_i\\le n,1\\le c_i\\le m,|v_i|\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 机器人高尔夫 (Day 2)", "background": "翻译自 [ROI 2019 D2T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n在“机器人奥林匹克运动会”中，有一个“机器人高尔夫比赛”。比赛场地是一个由 $n \\times m$ 个单位方块组成的矩形。场地的行用数字 $1$ 到 $n$ 编号，列用数字 $1$ 到 $m$ 编号。每个单位方块由两个正整数 $r$ 和 $c$ 表示，分别代表它所在的行和列的编号。\n\n两个机器人轮流在场地上移动一个特殊的“高尔夫球”，场地的某些方块上可能有洞。如果“高尔夫球”位于方块 $(r, c)$ 上，执行当前操作的机器人可以将其移动到方块 $(r + 1, c)$ 或方块 $(r, c + 1)$。如果“高尔夫球”位于最后一行或最后一列，机器人可以将其移动到场地的边界外。游戏会在以下两种情况下结束：“高尔夫球”超出了场地的边界，或者“高尔夫球”落到一个洞里。\n\n每个洞对应一个整数 $v_i$，表示它的价值。游戏的结果等于游戏结束时“高尔夫球”所在洞的价值，如果“高尔夫球”超出了场地的边界，则结果为 $0$。先手机器人的目标是最小化游戏结果，而后手机器人的目标是最大化游戏结果。", "description": "假设 $g(r, c)$ 表示当“高尔夫球”初始位于方块 $(r, c)$ 时，先手机器人不论对手怎么行动都可以达到的最小游戏结果。由于比赛开始前不知道初始方块，机器人开发者想要计算出所有格子对应的 $g(r, c)$ 的总和，即 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)$。", "inputFormat": "第一行包含三个整数 $n,m,k$，分别表示行数、列数和洞的个数。\n\n接下来的 $k$ 行，每行包含三个整数 $r_i,c_i,v_i$，分别表示洞所在的行、列编号和洞的价值。没有两个洞会位于同一个方块上。", "outputFormat": "输出一个整数，表示 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)\\bmod998244353$。注意：输出的结果应该在 $0$ 和 $998244352$ 之间，而不是在 $-998244352$ 和 $998244352$ 之间。", "hint": "### 样例解释：\n\n第一个样例中，所有方格的 $g(r,c)$ 如下（灰色的格子有洞）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/389eac6h.png)\n\n总结果求和为：$1 + 1 - 2 + 0 - 2 - 2 + 3 + 0 + 0 = -1$。答案为 $(-1) \\bmod 998 244 353 = (-1 + 998 244 353) = 998 244 352$。\n\n第二个样例中，所有方格的 $g(r,c)$ 如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl8p4qbc.png)\n\n总结果求和为：$1 + 2 + 0 - 3 + 1 + 0 - 3 - 3 = -5$。答案为 $(-5) \\bmod 998 244 353 = 998 244 348$。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n,m,k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n,m\\le1000$ |  |\n| $2$ | $14$ | $n\\le5,m\\le10^9$ |  |\n| $3$ | $14$ | $n,m\\le100000,k=n+m-1$ | A |\n| $4$ | $10$ |  | B |\n| $5$ | $6$ | $n,m\\le100000$ | C |\n| $6$ | $6$ |  | C |\n| $7$ | $10$ | $n,m\\le100000$ |  |\n| $8$ | $10$ | $k\\le1000$ |  |\n| $9$ | $10$ |  |  |\n\n特殊性质 A：对于任意 $i$，$r_i=n$ 或 $c_i=m$。\n\n特殊性质 B：对于任意 $i$，$r_i\\ge n-1000$ 且 $c_i\\ge m-1000$。\n\n特殊性质 C：对于任意 $i$，$v_i=1$。\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^9,1\\le k\\le\\min(n\\times m,10^5),1\\le r_i\\le n,1\\le c_i\\le m,|v_i|\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P11087", "type": "P", "difficulty": 7, "samples": [["3 4\naba\n1 ab\n2 1 3\n2 3 3\n2 1 8", "6"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 考古 (Day 2)", "background": "翻译自 [ROI 2019 D2T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n三〇一九年，在对古城市 Innopolis 进行挖掘时，考古学家发现了一件古代遗物——一个硬盘，里面存有一个文件，据推测，该文件包含了所有 ROI 题目的文本。\n\n经过对文件的研究，发现其中的信息被编码成了一个由英文字母组成的字符串 $t$。题目文本相当长，并且包含了许多重复的内容，因此文件以压缩形式存储在硬盘上。解压缩文件使用以下算法：\n\n在解压缩过程中，将生成一个由小写英文字母组成的字符串 $t$。初始时，字符串 $t$ 为空。压缩文件包含 $n$ 个块，必须按顺序处理每个块。每个块具有两种类型之一。\n- 块 `1 w`，其中 $w$ 是一个字符串。处理此类块时，在字符串 $t$ 的末尾添加字符串 $w$。\n- 块 `2 pos len`，其中 $pos$ 和 $len$ 是正整数。假设字符串 $t$ 中的字符从 $1$ 开始编号。处理此类块时，将字符串 $t$ 中从位置 $pos$ 开始的 $len$ 个连续字符依次添加到字符串 $t$ 的末尾。如果 $len$ 的值足够大，刚刚添加的一些字符可能会在处理同一块时再次使用。", "description": "考古学家们决定统计一个算法在 ROI 中考察的次数。为此，他们构建了一个由小写英文字母组成的字符串 $p$，并希望找出这个字符串在解压缩后的字符串 $t$ 中的出现次数。\n\n如果长度为 $m$ 的字符串 $p$ 作为子串从位置 $i$ 开始出现，那么从第 $i$ 个字符开始的连续 $m$ 个字符串将是字符串 $p$。例如，字符串 `aba` 在字符串 `ababaaba` 中作为子串出现三次，分别从第 $1,3,6$ 个字符开始。\n\n请编写一个程序，确定给定字符串 $p$ 在解压缩后的字符串 $t$ 中出现的次数。", "inputFormat": "第一行包含两个自然数 $m$ 和 $n$，分别表示字符串 $p$ 的长度和压缩文本中的块数。\n\n第二行包含一个非空字符串 $p$，由小写英文字母组成。\n\n接下来的 $n$ 行，包含按照题目背景的格式给出的块的描述。", "outputFormat": "输出一个整数，表示字符串 $p$ 在文本中出现的次数。", "hint": "### 样例解释：\n\n$t$ 的解压缩过程是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/62t2xa29.png)\n\n`aba` 在 `ababaabaababaaba` 中出现了 $6$ 次。\n\n### 数据范围：\n\n设将前 $i$ 块解压缩后字符串的长度为 $L_i$，第 $i$ 块的类型为 $type_i$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ | $L_n\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $2000$ | $1$ | $1000$ |  |\n| $2$ | $10$ | $10^5$ | $2000$ | $10^6$ |  |\n| $3$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $\\forall i>1,type_i=2,pos_i=1,L_1\\mid len_i$ |\n| $4$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=L_{i-1}$ |\n| $5$ | $10$ | $20$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $6$ | $4$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $7$ | $10$ | $20$ | $20$ | $10^{10}$ | $p$ 只含字母 `a`，$pos_i+len_i-1\\le L_{i-1}$ |\n| $8$ | $6$ | $20$ | $20$ | $10^{10}$ | $pos_i+len_i-1\\le L_{i-1}$ |\n| $9$ | $2$ | $1$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $10$ | $4$ | $20$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $11$ | $5$ | $20$ | $2000$ | $10^{10}$ |  |\n| $12$ | $14$ | $10^5$ | $2000$ | $10^{10}$ |  |\n| $13$ | $9$ | $2\\times10^5$ | $10000$ | $10^{15}$ |  |\n\n对于 $100\\%$ 的数据，$\\sum w\\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 考古 (Day 2)", "background": "翻译自 [ROI 2019 D2T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n三〇一九年，在对古城市 Innopolis 进行挖掘时，考古学家发现了一件古代遗物——一个硬盘，里面存有一个文件，据推测，该文件包含了所有 ROI 题目的文本。\n\n经过对文件的研究，发现其中的信息被编码成了一个由英文字母组成的字符串 $t$。题目文本相当长，并且包含了许多重复的内容，因此文件以压缩形式存储在硬盘上。解压缩文件使用以下算法：\n\n在解压缩过程中，将生成一个由小写英文字母组成的字符串 $t$。初始时，字符串 $t$ 为空。压缩文件包含 $n$ 个块，必须按顺序处理每个块。每个块具有两种类型之一。\n- 块 `1 w`，其中 $w$ 是一个字符串。处理此类块时，在字符串 $t$ 的末尾添加字符串 $w$。\n- 块 `2 pos len`，其中 $pos$ 和 $len$ 是正整数。假设字符串 $t$ 中的字符从 $1$ 开始编号。处理此类块时，将字符串 $t$ 中从位置 $pos$ 开始的 $len$ 个连续字符依次添加到字符串 $t$ 的末尾。如果 $len$ 的值足够大，刚刚添加的一些字符可能会在处理同一块时再次使用。", "description": "考古学家们决定统计一个算法在 ROI 中考察的次数。为此，他们构建了一个由小写英文字母组成的字符串 $p$，并希望找出这个字符串在解压缩后的字符串 $t$ 中的出现次数。\n\n如果长度为 $m$ 的字符串 $p$ 作为子串从位置 $i$ 开始出现，那么从第 $i$ 个字符开始的连续 $m$ 个字符串将是字符串 $p$。例如，字符串 `aba` 在字符串 `ababaaba` 中作为子串出现三次，分别从第 $1,3,6$ 个字符开始。\n\n请编写一个程序，确定给定字符串 $p$ 在解压缩后的字符串 $t$ 中出现的次数。", "inputFormat": "第一行包含两个自然数 $m$ 和 $n$，分别表示字符串 $p$ 的长度和压缩文本中的块数。\n\n第二行包含一个非空字符串 $p$，由小写英文字母组成。\n\n接下来的 $n$ 行，包含按照题目背景的格式给出的块的描述。", "outputFormat": "输出一个整数，表示字符串 $p$ 在文本中出现的次数。", "hint": "### 样例解释：\n\n$t$ 的解压缩过程是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/62t2xa29.png)\n\n`aba` 在 `ababaabaababaaba` 中出现了 $6$ 次。\n\n### 数据范围：\n\n设将前 $i$ 块解压缩后字符串的长度为 $L_i$，第 $i$ 块的类型为 $type_i$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ | $L_n\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $2000$ | $1$ | $1000$ |  |\n| $2$ | $10$ | $10^5$ | $2000$ | $10^6$ |  |\n| $3$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $\\forall i>1,type_i=2,pos_i=1,L_1\\mid len_i$ |\n| $4$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=L_{i-1}$ |\n| $5$ | $10$ | $20$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $6$ | $4$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $7$ | $10$ | $20$ | $20$ | $10^{10}$ | $p$ 只含字母 `a`，$pos_i+len_i-1\\le L_{i-1}$ |\n| $8$ | $6$ | $20$ | $20$ | $10^{10}$ | $pos_i+len_i-1\\le L_{i-1}$ |\n| $9$ | $2$ | $1$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $10$ | $4$ | $20$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $11$ | $5$ | $20$ | $2000$ | $10^{10}$ |  |\n| $12$ | $14$ | $10^5$ | $2000$ | $10^{10}$ |  |\n| $13$ | $9$ | $2\\times10^5$ | $10000$ | $10^{15}$ |  |\n\n对于 $100\\%$ 的数据，$\\sum w\\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11088", "type": "P", "difficulty": 5, "samples": [["1 1\na\n1 1 a", "1"], ["3 4\nglhf\n3 1 r 3 h 4 i\n3 1 r 2 l 3 o\n2 1 g 4 f", "3 1 2"], ["2 2\naa\n2 1 a 2 b\n2 1 b 2 a", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 穿孔卡片 (Day 1)", "background": "翻译自 [ROI 2021 D1T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "穿孔卡片是一条由 $m$ 个小方格组成的带状物，每个小方格要么包含一个小写英文字母，要么是一个孔洞。\n\n有 $n$ 张这样的穿孔卡片。给定一个长度为 $m$ 的字符串 $s$，将所有的穿孔卡片按照一定顺序排列，使得将它们从上到下依次叠放后可以变成 $s$。换句话说，要确定穿孔卡片的顺序，它们将叠放在一起，并考虑任意位置 $i(1 \\le i \\le m)$，字符串 $s$ 的第 $i$ 个字符必须与第 $i$ 个位置上第一个包含字母的那张穿孔卡片上的字符相同。\n\n如果对于某个 $i$，不存在任何一个穿孔卡片上的这个位置有字母，那么就无法得到目标字符串 $s$。", "inputFormat": "第一行包含两个整数 $n,m(1 \\le n,m \\le 10^5)$，分别表示穿孔卡片的数量和格子的数量。\n\n第二行包含一个长度为 $m$ 的字符串 $s$，由小写英文字母组成。\n\n接下来的 $n$ 行中，每行输入一张穿孔卡片的信息。\n\n先输入一个整数 $k_i(0\\le k_i\\le m)$，表示该穿孔卡片上有多少个带字母的位置。保证所有 $k_i$ 的总和不超过 $2\\times 10^5$。\n\n然后是该穿孔卡片上字母的描述：对于每个整数 $j(1 \\le j \\le k_i)$，有一个整数 $a_{i,j}$ 和一个字符 $c_{i,j}$（$1 \\le a_{i,j} \\le m$，$c_{i,j}$ 是一个小写英文字母），表示位置 $a_{i,j}$ 上的字符是 $c_{i,j}$。其余位置都是孔洞。保证每张穿孔卡片上的带字母的位置按升序排列，即 $\\forall1 \\le j < k_,a_{i,j} < a_{i,{j+1}}$。", "outputFormat": "如果存在一种正确排列穿孔卡片的方法，输出 $n$ 个整数 $p_1,p_2,\\dots,p_n(1 \\le pi \\le n)$，其中 $p_1$ 表示最上面的卡片编号，$p_2$ 表示第二张卡片编号，依此类推，$p_n$ 表示最下面的卡片编号。\n\n如果存在多个可能的答案，可以输出任意一个。如果不存在一种正确排列穿孔卡片的方法，输出 `-1`。", "hint": "样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxrg57pf.png)\n\n数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $8$ | $100$ |\n| $2$ | $35$ | $100$ | $100$ |\n| $3$ | $50$ | $10^5$ | $10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 穿孔卡片 (Day 1)", "background": "翻译自 [ROI 2021 D1T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "穿孔卡片是一条由 $m$ 个小方格组成的带状物，每个小方格要么包含一个小写英文字母，要么是一个孔洞。\n\n有 $n$ 张这样的穿孔卡片。给定一个长度为 $m$ 的字符串 $s$，将所有的穿孔卡片按照一定顺序排列，使得将它们从上到下依次叠放后可以变成 $s$。换句话说，要确定穿孔卡片的顺序，它们将叠放在一起，并考虑任意位置 $i(1 \\le i \\le m)$，字符串 $s$ 的第 $i$ 个字符必须与第 $i$ 个位置上第一个包含字母的那张穿孔卡片上的字符相同。\n\n如果对于某个 $i$，不存在任何一个穿孔卡片上的这个位置有字母，那么就无法得到目标字符串 $s$。", "inputFormat": "第一行包含两个整数 $n,m(1 \\le n,m \\le 10^5)$，分别表示穿孔卡片的数量和格子的数量。\n\n第二行包含一个长度为 $m$ 的字符串 $s$，由小写英文字母组成。\n\n接下来的 $n$ 行中，每行输入一张穿孔卡片的信息。\n\n先输入一个整数 $k_i(0\\le k_i\\le m)$，表示该穿孔卡片上有多少个带字母的位置。保证所有 $k_i$ 的总和不超过 $2\\times 10^5$。\n\n然后是该穿孔卡片上字母的描述：对于每个整数 $j(1 \\le j \\le k_i)$，有一个整数 $a_{i,j}$ 和一个字符 $c_{i,j}$（$1 \\le a_{i,j} \\le m$，$c_{i,j}$ 是一个小写英文字母），表示位置 $a_{i,j}$ 上的字符是 $c_{i,j}$。其余位置都是孔洞。保证每张穿孔卡片上的带字母的位置按升序排列，即 $\\forall1 \\le j < k_,a_{i,j} < a_{i,{j+1}}$。", "outputFormat": "如果存在一种正确排列穿孔卡片的方法，输出 $n$ 个整数 $p_1,p_2,\\dots,p_n(1 \\le pi \\le n)$，其中 $p_1$ 表示最上面的卡片编号，$p_2$ 表示第二张卡片编号，依此类推，$p_n$ 表示最下面的卡片编号。\n\n如果存在多个可能的答案，可以输出任意一个。如果不存在一种正确排列穿孔卡片的方法，输出 `-1`。", "hint": "样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxrg57pf.png)\n\n数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $8$ | $100$ |\n| $2$ | $35$ | $100$ | $100$ |\n| $3$ | $50$ | $10^5$ | $10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11089", "type": "P", "difficulty": 6, "samples": [["3 7\n010\n001\n100\nabacaba", "aac"], ["3 5\n010\n001\n100\nbcacb", "bacb"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 手机游戏 (Day 1)", "background": "翻译自 [ROI 2021 D1T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "给定一个由 $n$ 个水晶组成的序列，从左到右排列。每个水晶属于 $k$ 种类型之一，用前 $k$ 个英文字母表示。因此，水晶序列可以用一串英文字母表示。\n\n在游戏的一步中，可以从序列中移除一个水晶。玩家的目标是通过用允许的删除方式，得到字典序最小的字符串。\n\n允许的删除方式由大小为 $k\\times k$ 的表 $A$ 定义，表中的元素只包含 $0$ 和 $1$。如果 $A_{i,j} = 1$，则表示当前面紧邻它的水晶是类型 $i$ 时，允许删除类型 $j$ 的水晶。这些操作可以按任意顺序执行。\n\n字符串 $x$ 在字典序上小于字符串 $y$，需要满足以下条件之一：\n- 存在一个位置 $m$，在两个字符串中都存在，且在该位置之前，两个字符串的字符是相同的，但是 $x$ 的第 $m$ 个字符小于 $y$ 的第 $m$ 个字符，\n- 字符串 $x$ 是字符串 $y$ 的严格前缀（即从字符串 $y$ 末尾删除一个或多个字符得到）。\n\n举个例子，`ccf` 的字典序小于 `cff`，因为 `ccf` 的第 $2$ 位（`c`）小于 `cff` 的第 $2$ 位（`f`）；而 `noi` 的字典序小于 `noip`，因为 `noi` 是 `noip` 的严格前缀。", "inputFormat": "第一行给出两个整数 $k$ 和 $n$（$1 \\le k \\le 26,1 \\le n \\le 500000$），分别表示水晶的种类数量和初始水晶序列的长度。\n\n接下来的 $k$ 行给出表 $A$，第 $i$ 行包含 $k$ 个字符，都是 $0$ 或 $1$。第 $i$ 行第 $j$ 列的字符为 $A_{ij}$。\n\n最后一行是由 $n$ 个小写英文字母组成的字符串，表示初始水晶序列。保证字符串中只包含前 $k$ 个英文字母（如前七个英文字母分别是 `a`，`b`，`c`，`d`，`e`，`f`，`g`），第 $i$ 个字母代表第 $i$ 种类型的水晶。", "outputFormat": "输出可以通过操作得到的字典顺序最小的字符串。", "hint": "### 样例解释：\n\n这两个样例的 $A$ 是相同的，它们都只允许这三种类型的删除（下划线的是它的前面一个字符，删除线的是被删除的字符）：$\\underline{\\text{a}}\\xcancel{\\text{b}},\\underline{\\text{b}}\\xcancel{\\text{c}},\\underline{\\text{c}}\\xcancel{\\text{a}}$。\n\n样例 $1$ 中可以这样删除：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hpls8z9t.png)\n\n样例 $2$ 中可以这样删除：\n\n- $\\text{bcacb}$\n- $\\underline{\\text{b}}\\xcancel{\\text{c}}\\text{acb}$\n- $\\text{bacb}$\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $20$ | $26$ |\n| $2$ | $12$ | $50$ | $5$ |\n| $3$ | $16$ | $300$ | $5$ |\n| $4$ | $17$ | $500$ | $26$ |\n| $5$ | $10$ | $2000$ | $26$ |\n| $6$ | $9$ | $10000$ | $26$ |\n| $7$ | $8$ | $100000$ | $26$ |\n| $8$ | $11$ | $500000$ | $2$ |\n| $9$ | $7$ | $500000$ | $26$ |\n\n对于 $100\\%$ 的数据，$n\\le500000$，$k\\le26$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 手机游戏 (Day 1)", "background": "翻译自 [ROI 2021 D1T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "给定一个由 $n$ 个水晶组成的序列，从左到右排列。每个水晶属于 $k$ 种类型之一，用前 $k$ 个英文字母表示。因此，水晶序列可以用一串英文字母表示。\n\n在游戏的一步中，可以从序列中移除一个水晶。玩家的目标是通过用允许的删除方式，得到字典序最小的字符串。\n\n允许的删除方式由大小为 $k\\times k$ 的表 $A$ 定义，表中的元素只包含 $0$ 和 $1$。如果 $A_{i,j} = 1$，则表示当前面紧邻它的水晶是类型 $i$ 时，允许删除类型 $j$ 的水晶。这些操作可以按任意顺序执行。\n\n字符串 $x$ 在字典序上小于字符串 $y$，需要满足以下条件之一：\n- 存在一个位置 $m$，在两个字符串中都存在，且在该位置之前，两个字符串的字符是相同的，但是 $x$ 的第 $m$ 个字符小于 $y$ 的第 $m$ 个字符，\n- 字符串 $x$ 是字符串 $y$ 的严格前缀（即从字符串 $y$ 末尾删除一个或多个字符得到）。\n\n举个例子，`ccf` 的字典序小于 `cff`，因为 `ccf` 的第 $2$ 位（`c`）小于 `cff` 的第 $2$ 位（`f`）；而 `noi` 的字典序小于 `noip`，因为 `noi` 是 `noip` 的严格前缀。", "inputFormat": "第一行给出两个整数 $k$ 和 $n$（$1 \\le k \\le 26,1 \\le n \\le 500000$），分别表示水晶的种类数量和初始水晶序列的长度。\n\n接下来的 $k$ 行给出表 $A$，第 $i$ 行包含 $k$ 个字符，都是 $0$ 或 $1$。第 $i$ 行第 $j$ 列的字符为 $A_{ij}$。\n\n最后一行是由 $n$ 个小写英文字母组成的字符串，表示初始水晶序列。保证字符串中只包含前 $k$ 个英文字母（如前七个英文字母分别是 `a`，`b`，`c`，`d`，`e`，`f`，`g`），第 $i$ 个字母代表第 $i$ 种类型的水晶。", "outputFormat": "输出可以通过操作得到的字典顺序最小的字符串。", "hint": "### 样例解释：\n\n这两个样例的 $A$ 是相同的，它们都只允许这三种类型的删除（下划线的是它的前面一个字符，删除线的是被删除的字符）：$\\underline{\\text{a}}\\xcancel{\\text{b}},\\underline{\\text{b}}\\xcancel{\\text{c}},\\underline{\\text{c}}\\xcancel{\\text{a}}$。\n\n样例 $1$ 中可以这样删除：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hpls8z9t.png)\n\n样例 $2$ 中可以这样删除：\n\n- $\\text{bcacb}$\n- $\\underline{\\text{b}}\\xcancel{\\text{c}}\\text{acb}$\n- $\\text{bacb}$\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $20$ | $26$ |\n| $2$ | $12$ | $50$ | $5$ |\n| $3$ | $16$ | $300$ | $5$ |\n| $4$ | $17$ | $500$ | $26$ |\n| $5$ | $10$ | $2000$ | $26$ |\n| $6$ | $9$ | $10000$ | $26$ |\n| $7$ | $8$ | $100000$ | $26$ |\n| $8$ | $11$ | $500000$ | $2$ |\n| $9$ | $7$ | $500000$ | $26$ |\n\n对于 $100\\%$ 的数据，$n\\le500000$，$k\\le26$。", "locale": "zh-CN"}}}
{"pid": "P11091", "type": "P", "difficulty": 7, "samples": [["6\n1 3 5 4 6\n2 3 10 61 60\n2 2 80 20\n2 2 40 70\n1 2 3 2\n2 4 30 90 91 92", "Yes\n5 6 4\n10\n20\n40\n2 3\n30"], ["3\n1 2 2 3\n2 1 1\n2 1 2", "Yes"], ["5\n1 2 2 3\n2 1 2\n1 2 4 5\n2 1 1\n2 1 3", "No"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 工作报告 (Day 1)", "background": null, "description": "翻译自 [ROI 2021 D1T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。\n\n公司中有 $n$ 个员工，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司的创始人，其他员工都有且只有一个直接上级。公司的组织结构形成了一棵树，每个节点的父节点是它的上级，而子节点是它的下属。拥有下属的员工被称为经理，其他员工被称为顾问。公司的结构保证每个经理最多有 $8$ 个下属，包括创始人。\n\n创始人决定向投资者们汇报最近产品改进的情况。每个改进都是来自公司的某个顾问的工作成果。所有改进按照它们发生的时间顺序进行编号。\n\n每个顾问需要选择一个改进并向他的经理汇报。因此，每个顾问的报告仅包含一个改进。\n\n每个经理，包括创始人在内，需要汇总他们下属的报告，并按照报告的顺序将它们直接连续地组合起来。例如，如果第一个经理的报告包含改进 $[1, 3]$，而第二个经理的报告包含改进 $[2, 4, 10]$，那么可以得到两种组合结果：$[2, 4, 10, 1, 3]$ 或者 $[1, 3, 2, 4, 10]$，其他组合是不可能的。\n\n创始人希望以尽可能合理的方式讲述这些改进，因此他希望在他的报告中改进按照编号的升序排列。请帮助每个顾问选择要汇报的改进，并帮助每个经理选择组合下属报告的顺序，以使得创始人的报告中的改进能够按照时间顺序排列。", "inputFormat": "第一行包含一个整数 $n $（$2 \\le n \\le 100000$），表示公司的员工数量。接下来的 $n$ 行描述每个员工，每行包含以下内容之一：\n- 如果员工是经理或创始人，则以数字 $1$ 开头，接下来是数字 $k_i $（$1 \\le k_i \\le 8$），表示该经理的下属数量，然后是 $k_i$ 个不同的数字，范围在 $2$ 到 $n$，表示是其下属的员工编号。\n- 如果员工是顾问，则以数字 $2$ 开头，接下来是数字 $m_i$，表示他可以汇报的改进数量，然后是 $m_i$ 个不同的整数，范围在 $1$ 到 $100000$，表示对应改进的编号。\n\n保证每个改进都仅被一个顾问提及，即所有顾问提到的改进都是不同的。", "outputFormat": "如果无法组合报告，输出 `No`。\n\n如果能够组合报告，输出 `Yes`，然后你可以按照员工编号的顺序输出以下内容：\n- 如果员工是经理，则输出他的下属在组合报告中的顺序。\n- 如果员工是顾问，则输出他需要汇报的改进编号。\n\n注：如果不输出组合报告的方式但正确判断了是否能够组合报告，将会得到 $10\\%$ 的部分分。", "hint": "### 样例解释：\n\n在样例二中，没有输出具体的组合方法，所以只能得到部分分。正确的输出应该是这样的：\n```text\nYes\n2 3\n1\n2\n```\n在样例三中，每个顾问都只能选择那唯一的改进编号。第三位经理有两种可能的报告方式：$[1, 3]$ 或 $[3, 1]$。第一位经理有四种可能的报告方式，考虑到第三位经理的所有报告可能性：$[1, 3] + [2] = [1, 3, 2],[2] + [1, 3] = [2, 1, 3],[3, 1 ] + [2] = [3, 1, 2],[2] + [3, 1] = [2, 3, 1]$，但是在这些报告中没有一个改进是按照时间顺序排序的。\n\n### 数据范围：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mchn5bpr.png)\n\n对于 $100\\%$ 的数据，$n,\\sum m_i \\le 100 000$ 且 $\\max k_i\\le8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 工作报告 (Day 1)", "background": null, "description": "翻译自 [ROI 2021 D1T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。\n\n公司中有 $n$ 个员工，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司的创始人，其他员工都有且只有一个直接上级。公司的组织结构形成了一棵树，每个节点的父节点是它的上级，而子节点是它的下属。拥有下属的员工被称为经理，其他员工被称为顾问。公司的结构保证每个经理最多有 $8$ 个下属，包括创始人。\n\n创始人决定向投资者们汇报最近产品改进的情况。每个改进都是来自公司的某个顾问的工作成果。所有改进按照它们发生的时间顺序进行编号。\n\n每个顾问需要选择一个改进并向他的经理汇报。因此，每个顾问的报告仅包含一个改进。\n\n每个经理，包括创始人在内，需要汇总他们下属的报告，并按照报告的顺序将它们直接连续地组合起来。例如，如果第一个经理的报告包含改进 $[1, 3]$，而第二个经理的报告包含改进 $[2, 4, 10]$，那么可以得到两种组合结果：$[2, 4, 10, 1, 3]$ 或者 $[1, 3, 2, 4, 10]$，其他组合是不可能的。\n\n创始人希望以尽可能合理的方式讲述这些改进，因此他希望在他的报告中改进按照编号的升序排列。请帮助每个顾问选择要汇报的改进，并帮助每个经理选择组合下属报告的顺序，以使得创始人的报告中的改进能够按照时间顺序排列。", "inputFormat": "第一行包含一个整数 $n $（$2 \\le n \\le 100000$），表示公司的员工数量。接下来的 $n$ 行描述每个员工，每行包含以下内容之一：\n- 如果员工是经理或创始人，则以数字 $1$ 开头，接下来是数字 $k_i $（$1 \\le k_i \\le 8$），表示该经理的下属数量，然后是 $k_i$ 个不同的数字，范围在 $2$ 到 $n$，表示是其下属的员工编号。\n- 如果员工是顾问，则以数字 $2$ 开头，接下来是数字 $m_i$，表示他可以汇报的改进数量，然后是 $m_i$ 个不同的整数，范围在 $1$ 到 $100000$，表示对应改进的编号。\n\n保证每个改进都仅被一个顾问提及，即所有顾问提到的改进都是不同的。", "outputFormat": "如果无法组合报告，输出 `No`。\n\n如果能够组合报告，输出 `Yes`，然后你可以按照员工编号的顺序输出以下内容：\n- 如果员工是经理，则输出他的下属在组合报告中的顺序。\n- 如果员工是顾问，则输出他需要汇报的改进编号。\n\n注：如果不输出组合报告的方式但正确判断了是否能够组合报告，将会得到 $10\\%$ 的部分分。", "hint": "### 样例解释：\n\n在样例二中，没有输出具体的组合方法，所以只能得到部分分。正确的输出应该是这样的：\n```text\nYes\n2 3\n1\n2\n```\n在样例三中，每个顾问都只能选择那唯一的改进编号。第三位经理有两种可能的报告方式：$[1, 3]$ 或 $[3, 1]$。第一位经理有四种可能的报告方式，考虑到第三位经理的所有报告可能性：$[1, 3] + [2] = [1, 3, 2],[2] + [1, 3] = [2, 1, 3],[3, 1 ] + [2] = [3, 1, 2],[2] + [3, 1] = [2, 3, 1]$，但是在这些报告中没有一个改进是按照时间顺序排序的。\n\n### 数据范围：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mchn5bpr.png)\n\n对于 $100\\%$ 的数据，$n,\\sum m_i \\le 100 000$ 且 $\\max k_i\\le8$。", "locale": "zh-CN"}}}
{"pid": "P11092", "type": "P", "difficulty": 4, "samples": [["4\nBBBC\n????\nA?B?C?D\nYYYYY?", "-5\nBBBC\n20000000000000\nZZZZ\n15000000000034\nAZBZCZD\n6000000000000\nYYYYYY"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 莫斯科数字 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n你可能熟悉罗马数字，并且也听说过莫斯科是第三个罗马的说法，所以我们隆重推出莫斯科数字。这是罗马数字的进阶版本，与之类似。在莫斯科数字系统中，数字由大写英文字母 `A` 到 `Z` 表示。每个数字对应一个特定的值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6k4lffzg.png)\n\n莫斯科数字规则如下：每个数字的值等于由它构成的各个数字的总和。数字可以有正负之分。如果一个数字右侧没有比它更大的数字，则该数字的值等于它本身；否则，该数字的值等于其本身取负。例如：\n\n- 「`BBA`」的值为 $5 + 5 + 1 = 11$；\n- 「`BBBC`」的值为 $-5 + (-5) + (-5) + 10 = -5$；\n- 「`ABC`」的值为 $-1 + (-5) + 10 = 4$；\n- 「`BAC`」的值为 $-5 + (-1) + 10 = 4$；\n- 「`ACA`」的值为 $-1 + 10 + 1 = 10$；\n- 「`CFF`」的值为 $-10 + 500 + 500 = 990$。\n\n给定了一些数字，每个数字由大写英文字母组成（即莫斯科数字），但是一部分被替换成了问号。对于每个数字，需要确定在将问号替换为莫斯科数字字母后，可以得到的最大数字。", "inputFormat": "第一行是一个整数 $t$，表示数据组数，即数字的数量（$1 \\le t \\le 50000$）。\n\n接下来的 $t$ 行，每行一个字符串 $s_i$，由大写英文字母和问号组成。所有字符串的长度之和不超过 $300000$。", "outputFormat": "对于每个输入，输出两行，都表示的是将问号替换为莫斯科数字字母后可以得到的最大数字。第一行是以十进制表示的最大数字值，第二行就是替换后的这个最大莫斯科数字。", "hint": "设 $S=\\sum\\limits^{t}_{i=1}|s_i|$。\n\n| 子任务 | 分值 | $S\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $1000$ | $s_i$ 中不包含 `?` |\n| $2$ | $9$ | $3\\times10^5$ | $s_i$ 中不包含 `?` |\n| $3$ | $40$ | $1000$ | $s_i$ 中不包含超过三个 `?` |\n| $4$ | $20$ | $1000$ |  |\n| $5$ | $25$ | $3\\times10^5$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 莫斯科数字 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n你可能熟悉罗马数字，并且也听说过莫斯科是第三个罗马的说法，所以我们隆重推出莫斯科数字。这是罗马数字的进阶版本，与之类似。在莫斯科数字系统中，数字由大写英文字母 `A` 到 `Z` 表示。每个数字对应一个特定的值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6k4lffzg.png)\n\n莫斯科数字规则如下：每个数字的值等于由它构成的各个数字的总和。数字可以有正负之分。如果一个数字右侧没有比它更大的数字，则该数字的值等于它本身；否则，该数字的值等于其本身取负。例如：\n\n- 「`BBA`」的值为 $5 + 5 + 1 = 11$；\n- 「`BBBC`」的值为 $-5 + (-5) + (-5) + 10 = -5$；\n- 「`ABC`」的值为 $-1 + (-5) + 10 = 4$；\n- 「`BAC`」的值为 $-5 + (-1) + 10 = 4$；\n- 「`ACA`」的值为 $-1 + 10 + 1 = 10$；\n- 「`CFF`」的值为 $-10 + 500 + 500 = 990$。\n\n给定了一些数字，每个数字由大写英文字母组成（即莫斯科数字），但是一部分被替换成了问号。对于每个数字，需要确定在将问号替换为莫斯科数字字母后，可以得到的最大数字。", "inputFormat": "第一行是一个整数 $t$，表示数据组数，即数字的数量（$1 \\le t \\le 50000$）。\n\n接下来的 $t$ 行，每行一个字符串 $s_i$，由大写英文字母和问号组成。所有字符串的长度之和不超过 $300000$。", "outputFormat": "对于每个输入，输出两行，都表示的是将问号替换为莫斯科数字字母后可以得到的最大数字。第一行是以十进制表示的最大数字值，第二行就是替换后的这个最大莫斯科数字。", "hint": "设 $S=\\sum\\limits^{t}_{i=1}|s_i|$。\n\n| 子任务 | 分值 | $S\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $1000$ | $s_i$ 中不包含 `?` |\n| $2$ | $9$ | $3\\times10^5$ | $s_i$ 中不包含 `?` |\n| $3$ | $40$ | $1000$ | $s_i$ 中不包含超过三个 `?` |\n| $4$ | $20$ | $1000$ |  |\n| $5$ | $25$ | $3\\times10^5$ |  |", "locale": "zh-CN"}}}
{"pid": "P11093", "type": "P", "difficulty": 0, "samples": [["5 6\n1 2\n2 1\n1 5\n2 3\n2 4\n4 2", "Yes\n1 2 2 3\n2 1 1 5\n2 4 4 2"], ["4 4\n2 1\n2 3\n2 4\n4 2", "No"], ["4 4\n1 2\n2 1\n3 4\n4 3", "Yes\n1 2 2 1\n3 4 4 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 树制游戏 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nVasya 最近想到了一种新的娱乐方式。他想让一个有 $n$ 个顶点和 $2\\times(n−1)$ 条边的有向连通图成为他的玩具。这个图满足以下条件：对于图中的每条边 $(u, v)$，都存在一条反向的边 $(v, u)$。换句话说，这个图是由一棵树转化而来的，其中每条无向边都被分成两个方向相反的边。\n\nVasya 将这样一对边 $(e_1, e_2)$ 称为“gadget”，其中 $e_1$ 的终点与 $e_2$ 的起点相同，或者 $e_2$ 的终点与 $e_1$ 的起点相同（特别地，两条方向相反的边也是一种“gadget”）。简单来说，“gadget”就是一条长度为 $2$ 的路径。Vasya 的娱乐方式是将图中的边划分为互不相交的“gadget”。当然，对于原始图来说，这很容易做到。\n\n但是，Vasya 的好朋友 Petya 从树中删除了 $2k$ 条有向边，使得图中剩下 $m = 2\\times (n - 1) - 2\\times k$ 条有向边。\n\n现在 Vasya 想知道是否可以将剩下的边划分为互不相交的“gadget”，如果可能的话，还要找出这种划分的方法。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示顶点数和剩余边数。保证 $m$ 是偶数。\n\n接下来的 $m$ 行，每行包含两个整数 $u_i$ 和 $v_i$，表示剩余边的起点和终点。", "outputFormat": "如果无法将边分成“gadget”，则输出 `No`。\n\n否则，输出 `Yes`，然后输出 $\\frac{m}{2}$ 行，每行包含 $4$ 个数字，表示每个“gadget”中的两对边。每条边由起点和终点两个数字表示。", "hint": "第一个示例中的“gadget”划分如下图所示，同一个类型的两条线组成了一个“gadget”。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lrmoulud.png)\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 150000,2 \\le m \\le 2\\times n - 2,1 \\le u_i, v_i \\le n$。\n\n| 子任务 | 分值 | $n\\le$ | $m$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $10$ | $m\\le20$ |\n| $2$ | $10$ | $200$ | 无 |\n| $3$ | $11$ | $3000$ | $m=2\\times n-4$ |\n| $4$ | $29$ | $3000$ | 无 |\n| $5$ | $11$ | $150000$ | $m=2\\times n-4$ |\n| $6$ | $32$ | $150000$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 树制游戏 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nVasya 最近想到了一种新的娱乐方式。他想让一个有 $n$ 个顶点和 $2\\times(n−1)$ 条边的有向连通图成为他的玩具。这个图满足以下条件：对于图中的每条边 $(u, v)$，都存在一条反向的边 $(v, u)$。换句话说，这个图是由一棵树转化而来的，其中每条无向边都被分成两个方向相反的边。\n\nVasya 将这样一对边 $(e_1, e_2)$ 称为“gadget”，其中 $e_1$ 的终点与 $e_2$ 的起点相同，或者 $e_2$ 的终点与 $e_1$ 的起点相同（特别地，两条方向相反的边也是一种“gadget”）。简单来说，“gadget”就是一条长度为 $2$ 的路径。Vasya 的娱乐方式是将图中的边划分为互不相交的“gadget”。当然，对于原始图来说，这很容易做到。\n\n但是，Vasya 的好朋友 Petya 从树中删除了 $2k$ 条有向边，使得图中剩下 $m = 2\\times (n - 1) - 2\\times k$ 条有向边。\n\n现在 Vasya 想知道是否可以将剩下的边划分为互不相交的“gadget”，如果可能的话，还要找出这种划分的方法。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示顶点数和剩余边数。保证 $m$ 是偶数。\n\n接下来的 $m$ 行，每行包含两个整数 $u_i$ 和 $v_i$，表示剩余边的起点和终点。", "outputFormat": "如果无法将边分成“gadget”，则输出 `No`。\n\n否则，输出 `Yes`，然后输出 $\\frac{m}{2}$ 行，每行包含 $4$ 个数字，表示每个“gadget”中的两对边。每条边由起点和终点两个数字表示。", "hint": "第一个示例中的“gadget”划分如下图所示，同一个类型的两条线组成了一个“gadget”。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lrmoulud.png)\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 150000,2 \\le m \\le 2\\times n - 2,1 \\le u_i, v_i \\le n$。\n\n| 子任务 | 分值 | $n\\le$ | $m$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $10$ | $m\\le20$ |\n| $2$ | $10$ | $200$ | 无 |\n| $3$ | $11$ | $3000$ | $m=2\\times n-4$ |\n| $4$ | $29$ | $3000$ | 无 |\n| $5$ | $11$ | $150000$ | $m=2\\times n-4$ |\n| $6$ | $32$ | $150000$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11094", "type": "P", "difficulty": 6, "samples": [["3 3\n1 3\n3 1\n4 2\n1 1\n2 3\n1 3", "0\n2\n3"], ["5 3\n1 5\n3 1\n4 2\n5 3\n6 1\n1 5\n5 5\n1 1", "5\n1\n0"], ["1 1\n100 100\n1 1", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 砍树 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T3](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n“2D”组织负责发放伐木许可证。他们收到了沿公路的伐木申请。\n\n公路上有 $n$ 棵树，其中第 $i$ 棵树生长在坐标为 $x_i$ 的点上，高度为 $h_i$。关于这些树的信息被排序，满足 $x_1 < x_2 < \\dots < x_{n-1} < x_n$。\n\n可以按以下方式逐个砍伐树木：将树砍倒，并让它向左或向右倒下。为了防止树木在倒下时受损，它不应碰到距离它自身高度以内的未砍伐的树木。换句话说，如果位于坐标为 $x_i$，高度为 $h_i$ 的树木向右倒下，则不应该存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i < x_j < x_i + h_i$。如果同一树木向左倒下，则不应存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i − h_i < x_j < x_i$。\n\n左边界 $x_1$ 处的树木和右边界 $x_n$ 处的树木旁边有重要的建筑物，因此不允许倒掉的树木落在区间 $[x_1, x_n]$ 之外。换句话说，如果 $x_i − h_i < x_1$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向左倒下；如果 $x_i + h_i > x_n$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向右倒下。\n\n组织收到了 $q$ 个伐木申请。每个申请由两个数字 $l_i$ 和 $r_i$ 组成，表示申请者希望砍伐第 $l_i$ 到第 $r_i$ 个树木（包括边界）。\n\n在执行申请的过程中，只允许砍伐从 $l_i$ 到 $r_i$ 编号的树木。被砍伐的树木可以倒到 $l_i$ 的左边或 $r_i$ 的右边的区域，但不能超出 $[x_1, x_n]$ 范围，也不允许触碰 $l_i$ 到 $r_i$ 范围之外的其它树木。\n\n对于每个申请，需要计算在不损坏任何树木的情况下可以砍倒的最大树木数量。每个申请都应独立处理（只是申请了，树没有真的被砍掉）。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n接下来的 $n$ 行描述每棵树，每行包含两个整数 $x_i$ 和 $h_i$。保证 $x_1 < x_2 < \\dots < x_n$。\n\n然后是 $q$ 个伐木申请的描述，每个占一行。其中第 $i$ 行包含两个整数 $l_i$ 和 $r_i$。", "outputFormat": "对于每个申请，输出可以砍伐的最大树木数量。", "hint": "样例一最后一个询问可以这样砍：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ituaka9n.png)\n\n对于 $100\\%$ 的数据，$1 \\le n, q \\le 500000,1 \\le x_i, h_i \\le 10^9,1 \\le l_i \\le r_i \\le n$。\n\n| 子任务 | 分值 | $n,q\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ |\n| $2$ | $15$ | $500$ |\n| $3$ | $15$ | $5000$ |\n| $4$ | $5$ | $10000$ |\n| $5$ | $10$ | $100000$ |\n| $6$ | $10$ | $200000$ |\n| $7$ | $30$ | $500000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 砍树 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T3](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n“2D”组织负责发放伐木许可证。他们收到了沿公路的伐木申请。\n\n公路上有 $n$ 棵树，其中第 $i$ 棵树生长在坐标为 $x_i$ 的点上，高度为 $h_i$。关于这些树的信息被排序，满足 $x_1 < x_2 < \\dots < x_{n-1} < x_n$。\n\n可以按以下方式逐个砍伐树木：将树砍倒，并让它向左或向右倒下。为了防止树木在倒下时受损，它不应碰到距离它自身高度以内的未砍伐的树木。换句话说，如果位于坐标为 $x_i$，高度为 $h_i$ 的树木向右倒下，则不应该存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i < x_j < x_i + h_i$。如果同一树木向左倒下，则不应存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i − h_i < x_j < x_i$。\n\n左边界 $x_1$ 处的树木和右边界 $x_n$ 处的树木旁边有重要的建筑物，因此不允许倒掉的树木落在区间 $[x_1, x_n]$ 之外。换句话说，如果 $x_i − h_i < x_1$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向左倒下；如果 $x_i + h_i > x_n$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向右倒下。\n\n组织收到了 $q$ 个伐木申请。每个申请由两个数字 $l_i$ 和 $r_i$ 组成，表示申请者希望砍伐第 $l_i$ 到第 $r_i$ 个树木（包括边界）。\n\n在执行申请的过程中，只允许砍伐从 $l_i$ 到 $r_i$ 编号的树木。被砍伐的树木可以倒到 $l_i$ 的左边或 $r_i$ 的右边的区域，但不能超出 $[x_1, x_n]$ 范围，也不允许触碰 $l_i$ 到 $r_i$ 范围之外的其它树木。\n\n对于每个申请，需要计算在不损坏任何树木的情况下可以砍倒的最大树木数量。每个申请都应独立处理（只是申请了，树没有真的被砍掉）。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n接下来的 $n$ 行描述每棵树，每行包含两个整数 $x_i$ 和 $h_i$。保证 $x_1 < x_2 < \\dots < x_n$。\n\n然后是 $q$ 个伐木申请的描述，每个占一行。其中第 $i$ 行包含两个整数 $l_i$ 和 $r_i$。", "outputFormat": "对于每个申请，输出可以砍伐的最大树木数量。", "hint": "样例一最后一个询问可以这样砍：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ituaka9n.png)\n\n对于 $100\\%$ 的数据，$1 \\le n, q \\le 500000,1 \\le x_i, h_i \\le 10^9,1 \\le l_i \\le r_i \\le n$。\n\n| 子任务 | 分值 | $n,q\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ |\n| $2$ | $15$ | $500$ |\n| $3$ | $15$ | $5000$ |\n| $4$ | $5$ | $10000$ |\n| $5$ | $10$ | $100000$ |\n| $6$ | $10$ | $200000$ |\n| $7$ | $30$ | $500000$ |", "locale": "zh-CN"}}}
{"pid": "P11095", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 2\n1 3 1\n2 3 1", "2\n2"], ["7 10\n1 2 2\n1 2 8\n2 3 3\n3 4 5\n3 5 4\n4 5 4\n6 5 7\n6 4 4\n1 7 6\n6 7 9", "4\n5\n6\n6\n6\n10"], ["4 4\n1 2 2\n3 2 0\n2 4 3\n4 3 1", "3\n2\n2"]], "limits": {"time": [1000, 3000, 1000, 3000, 3000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "并查集", "2021", "Special Judge", "生成树", "双连通分量", "ROI（俄罗斯）"], "title": "[ROI 2021] 旅行 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nSky 决定成为旅行 up 主，发布在全国各个城市旅行的视频。这个国家有 $n$ 个城市，编号从 $1$ 到 $n$。城市 $1$ 是国家的首都。城市之间有 $m$ 条双向道路，编号从 $1$ 到 $m$，每条道路连接两个不同的城市。同时，同一对城市可以通过多条不同的道路连接。从任何一个城市都能够通过道路到达其他任何一个城市。\n\nSky 和 Aqua 不能分开，所以 Sky 计划和 Aqua 一起从首都出发前往另一个城市，但目前尚未选择具体是哪个城市。到达城市 $k$ 的旅行路线将由城市 $s_1, s_2,\\dots,s_q$ 和道路 $r_1,r_2,\\dots,r_{q-1}$ 组成，其中：\n- $s_1 = 1,s_q = k$；\n- 道路 $r_i$ 连接城市 $s_i$ 和 $s_{i+1}$；\n- Sky 和 Aqua 不会两次经过同一条道路，因此所有的 $r_i$ 都是不同的。可以多次经过同一个城市，包括旅行起始城市 $1$ 和旅行结束城市 $k$。\n\n对于每条道路，Sky 都计算了在该道路上进行旅行拍摄的视频时长，第 $i$ 条道路的视频时长为 $t_i$。\n\n在旅行过程中，Sky 和 Aqua 都会选择旅行路线中的其中一条道路并拍摄与该道路相关的视频。Sky 喜欢拍短视频，因此 Sky 会选择 $t_i$ 最小的道路；而 Aqua 喜欢拍长视频，因此 Aqua 会选择 $t_i$ 最大的道路。\n\n两个视频的总时长为 $\\min\\limits_{1\\le i \\le q-1}t_{r_{i}} + \\max\\limits_{1\\le i \\le q-1}t_{r_{i}}$。\n\nSky 不愿意浪费素材，于是想把两个视频拼到一起，并发布到某知名视频网站上。因为现在短视频更受欢迎，所以 Sky 希望尽量减少两个视频的总时长。为了选择旅行的目的地和路线，需要计算出每个目的地 $k$ 在从城市 $1$ 到城市 $k$ 的所有可能路线中两个视频的最小总时长。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 300000$，$1 \\le m \\le 300000$），分别表示城市和道路的数量。\n\n接下来的 $m$ 行包含道路的描述。第 $i$ 行包含三个整数 $u_i,v_i,t_i$（$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$0 \\le t_i \\le 10^9$），分别表示连接该道路的城市编号以及在该道路上拍摄视频的时长。\n\n保证通过现有的道路可以从任何一个城市到达任何其他城市。", "outputFormat": "对于每个 $2 \\le k \\le n$，输出从城市 $1$ 到城市 $k$ 的旅行中 Sky 和 Aqua 的视频总时长的最小值。", "hint": "数据范围见输入格式。\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $9$ | $300000$ | $300000$ | $m=n-1$ |\n| $2$ | $17$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=0$ |\n| $3$ | $12$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=10^9$ |\n| $4$ | $9$ | $10$ | $10$ | 每对城市的连接不超过一条道路 |\n| $5$ | $6$ | $20$ | $20$ | 每对城市的连接不超过一条道路 |\n| $6$ | $6$ | $2000$ | $2000$ | 对于所有道路 $i$，$\\lvert u_i-v_i\\rvert=1$ |\n| $7$ | $9$ | $2000$ | $2000$ |  |\n| $8$ | $8$ | $5000$ | $300000$ |  |\n| $9$ | $10$ | $300000$ | $300000$ | 对于所有的 $a$，城市 $a$ 和 $a + 1$ 之间存在一条道路；对于任意一对道路 $i$ 和 $j$，如果 $\\lvert u_i − v_i\\rvert = 1$ 且 $\\lvert u_j − v_j\\rvert > 1$，则 $t_i \\le t_j$。 |\n| $10$ | $14$ | $300000$ | $300000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 旅行 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nSky 决定成为旅行 up 主，发布在全国各个城市旅行的视频。这个国家有 $n$ 个城市，编号从 $1$ 到 $n$。城市 $1$ 是国家的首都。城市之间有 $m$ 条双向道路，编号从 $1$ 到 $m$，每条道路连接两个不同的城市。同时，同一对城市可以通过多条不同的道路连接。从任何一个城市都能够通过道路到达其他任何一个城市。\n\nSky 和 Aqua 不能分开，所以 Sky 计划和 Aqua 一起从首都出发前往另一个城市，但目前尚未选择具体是哪个城市。到达城市 $k$ 的旅行路线将由城市 $s_1, s_2,\\dots,s_q$ 和道路 $r_1,r_2,\\dots,r_{q-1}$ 组成，其中：\n- $s_1 = 1,s_q = k$；\n- 道路 $r_i$ 连接城市 $s_i$ 和 $s_{i+1}$；\n- Sky 和 Aqua 不会两次经过同一条道路，因此所有的 $r_i$ 都是不同的。可以多次经过同一个城市，包括旅行起始城市 $1$ 和旅行结束城市 $k$。\n\n对于每条道路，Sky 都计算了在该道路上进行旅行拍摄的视频时长，第 $i$ 条道路的视频时长为 $t_i$。\n\n在旅行过程中，Sky 和 Aqua 都会选择旅行路线中的其中一条道路并拍摄与该道路相关的视频。Sky 喜欢拍短视频，因此 Sky 会选择 $t_i$ 最小的道路；而 Aqua 喜欢拍长视频，因此 Aqua 会选择 $t_i$ 最大的道路。\n\n两个视频的总时长为 $\\min\\limits_{1\\le i \\le q-1}t_{r_{i}} + \\max\\limits_{1\\le i \\le q-1}t_{r_{i}}$。\n\nSky 不愿意浪费素材，于是想把两个视频拼到一起，并发布到某知名视频网站上。因为现在短视频更受欢迎，所以 Sky 希望尽量减少两个视频的总时长。为了选择旅行的目的地和路线，需要计算出每个目的地 $k$ 在从城市 $1$ 到城市 $k$ 的所有可能路线中两个视频的最小总时长。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 300000$，$1 \\le m \\le 300000$），分别表示城市和道路的数量。\n\n接下来的 $m$ 行包含道路的描述。第 $i$ 行包含三个整数 $u_i,v_i,t_i$（$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$0 \\le t_i \\le 10^9$），分别表示连接该道路的城市编号以及在该道路上拍摄视频的时长。\n\n保证通过现有的道路可以从任何一个城市到达任何其他城市。", "outputFormat": "对于每个 $2 \\le k \\le n$，输出从城市 $1$ 到城市 $k$ 的旅行中 Sky 和 Aqua 的视频总时长的最小值。", "hint": "数据范围见输入格式。\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $9$ | $300000$ | $300000$ | $m=n-1$ |\n| $2$ | $17$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=0$ |\n| $3$ | $12$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=10^9$ |\n| $4$ | $9$ | $10$ | $10$ | 每对城市的连接不超过一条道路 |\n| $5$ | $6$ | $20$ | $20$ | 每对城市的连接不超过一条道路 |\n| $6$ | $6$ | $2000$ | $2000$ | 对于所有道路 $i$，$\\lvert u_i-v_i\\rvert=1$ |\n| $7$ | $9$ | $2000$ | $2000$ |  |\n| $8$ | $8$ | $5000$ | $300000$ |  |\n| $9$ | $10$ | $300000$ | $300000$ | 对于所有的 $a$，城市 $a$ 和 $a + 1$ 之间存在一条道路；对于任意一对道路 $i$ 和 $j$，如果 $\\lvert u_i − v_i\\rvert = 1$ 且 $\\lvert u_j − v_j\\rvert > 1$，则 $t_i \\le t_j$。 |\n| $10$ | $14$ | $300000$ | $300000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11096", "type": "P", "difficulty": 3, "samples": [["5\n5 2 4 1 3", "35"], ["10\n2 1 6 8 3 5 9 10 7 4", "256"], ["2\n2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 体育课 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在体育课前，一个由 $n$ 名学生组成的班级排成了一列。班级中的所有学生身高不同。在队列的第 $i(1\\le i\\le n)$ 个位置上站着一个身高为 $p_i(1\\le p_i\\le n)$ 的学生。\n\n体育老师在课堂开始时可能想要改变学生在队列中的顺序。为此，他可以执行以下操作一次：选择从第 $l$ 到第 $r$ 位置（$1 \\le l \\le r \\le n$）的一段队列，并将这段队列中的学生按照从左到右的升序进行排序。例如，如果 $n = 5$，并且最初学生们的顺序是 $[5, 2, 4, 1, 3]$，而老师选择 $l = 1,r = 4$，则在排序后学生们的顺序将变为 $[1, 2, 4, 5, 3]$。\n\n老师想要使得两个特定的学生尽可能远离彼此。学生之间的距离等于他们所站位置的编号之差。对于每对学生，老师想要知道在执行一次排序操作后他们可以达到的最大距离。请帮助老师算出这些值的总和。\n\n如果用 $d(i, j)$ 表示老师通过选择一段队列并进行排序可以达到的刚开始在位置 $i$ 和 $j$ 上的学生之间的最大距离，需要计算的就是 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "inputFormat": "第一行包含一个整数 $n$，表示班级中的学生数量（$2 \\le n \\le 3,000$）。\n\n第二行包含 $n$ 个整数 $p_1,\\dots , p_n$，表示队列中每个学生的身高（$1 \\le p_i \\le n$）。\n\n保证所有 $p_i$ 都是不同的。", "outputFormat": "输出一个整数，表示问题的答案，即 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "hint": "在样例一中，答案是以下数字之和：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/il74fp66.png)\n\n例如，为了使最初位于位置 $4$ 和 $5$ 上且身高分别为 $1$ 和 $3$ 的学生之间的距离为 $4$，老师可以选择 $l = 1,r = 4$，然后，学生序列将从 $[\\underline{5, 2, 4, 1}, 3]$ 变为 $[\\underline{1, 2, 4, 5}, 3]$。被选择的段已经用下划线标注出来。\n\n| Subtask | 分值 | $n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $10$ |\n| $2$ | $28$ | $50$ |\n| $3$ | $15$ | $100$ |\n| $4$ | $23$ | $600$ |\n| $5$ | $18$ | $3000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 体育课 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在体育课前，一个由 $n$ 名学生组成的班级排成了一列。班级中的所有学生身高不同。在队列的第 $i(1\\le i\\le n)$ 个位置上站着一个身高为 $p_i(1\\le p_i\\le n)$ 的学生。\n\n体育老师在课堂开始时可能想要改变学生在队列中的顺序。为此，他可以执行以下操作一次：选择从第 $l$ 到第 $r$ 位置（$1 \\le l \\le r \\le n$）的一段队列，并将这段队列中的学生按照从左到右的升序进行排序。例如，如果 $n = 5$，并且最初学生们的顺序是 $[5, 2, 4, 1, 3]$，而老师选择 $l = 1,r = 4$，则在排序后学生们的顺序将变为 $[1, 2, 4, 5, 3]$。\n\n老师想要使得两个特定的学生尽可能远离彼此。学生之间的距离等于他们所站位置的编号之差。对于每对学生，老师想要知道在执行一次排序操作后他们可以达到的最大距离。请帮助老师算出这些值的总和。\n\n如果用 $d(i, j)$ 表示老师通过选择一段队列并进行排序可以达到的刚开始在位置 $i$ 和 $j$ 上的学生之间的最大距离，需要计算的就是 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "inputFormat": "第一行包含一个整数 $n$，表示班级中的学生数量（$2 \\le n \\le 3,000$）。\n\n第二行包含 $n$ 个整数 $p_1,\\dots , p_n$，表示队列中每个学生的身高（$1 \\le p_i \\le n$）。\n\n保证所有 $p_i$ 都是不同的。", "outputFormat": "输出一个整数，表示问题的答案，即 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "hint": "在样例一中，答案是以下数字之和：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/il74fp66.png)\n\n例如，为了使最初位于位置 $4$ 和 $5$ 上且身高分别为 $1$ 和 $3$ 的学生之间的距离为 $4$，老师可以选择 $l = 1,r = 4$，然后，学生序列将从 $[\\underline{5, 2, 4, 1}, 3]$ 变为 $[\\underline{1, 2, 4, 5}, 3]$。被选择的段已经用下划线标注出来。\n\n| Subtask | 分值 | $n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $10$ |\n| $2$ | $28$ | $50$ |\n| $3$ | $15$ | $100$ |\n| $4$ | $23$ | $600$ |\n| $5$ | $18$ | $3000$ |", "locale": "zh-CN"}}}
{"pid": "P11097", "type": "P", "difficulty": 6, "samples": [["2\n3\n1 1\n3 1 2\n5 7\n1 2\n2 4\n2\n1\n5 5\n0 1\n2 2", "8\n0 2 3\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 采购优化 (Day 1)", "background": "翻译自 [ROI 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。", "description": "租赁滑雪设备的网点网络是一棵根节点为 $1$ 的树，由 $n$ 个节点组成，编号从 $1$ 到 $n$。每个节点上都有一个租赁点。位于第 $i$ 个节点的租赁点需要以 $c_i$ 卢布的价格购买设备套件。\n\n设 $a_i$ 表示在位于节点 $i$ **子树的所有租赁点中**将要购买的滑雪设备套件的总数。根据市场调研，这个值必须要满足 $l_i\\le a_i\\le r_i$。\n\n需要确定在赛季开始时每个租赁点需要购买多少套设备，以便对于网络中任何一个子树，设备套件的总数量都在市场营销人员指定的范围内，并且购买的所有设备套件的总成本最小，或是否不可能满足所有市场营销条件。", "inputFormat": "每个测试点包含多个测试数据。第一行给出一个整数 $t$，表示测试数据的数量。接下来是 $t$ 个测试数据。\n\n每个测试数据的第一行给出一个整数 $n$（$1\\le n\\le10^5$），表示树中的节点数量。\n\n接下来一行给出 $n-1$ 个整数 $p_2,p_3,\\dots,p_n$（$1\\le p_i<i$），表示节点 $i$ 的父节点为节点 $p_i$。\n\n接下来一行给出 $n$ 个整数 $c_1,\\dots,c_n$（$1\\le c_i\\le10^9$），其中 $c_i$ 表示 $i$ 号租赁点购买一个设备套件的价格。\n\n接下来 $n$ 行，每行给出两个整数 $l_i$ 和 $r_i$（$0\\le l_i\\le r_i\\le10^9$），表示对位于节点编号为 $i$ 的租赁点的子树中设备套件的总数的限制。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^5$。", "outputFormat": "对于每个测试数据，以下面的格式输出答案。\n\n如果无法满足所有市场营销条件，请输出 `-1`。\n\n否则，在第一行中输出购买整个网络的滑雪设备需要花费的最小卢布数。在第二行中，输出 $n$ 个整数 $b_i$，其中 $b_i$ 表示编号为 $i$ 的租赁点需要购买的设备套件的数量。如果有多种方式以最小的成本满足所有市场营销条件，可以输出其中一种。", "hint": "样例输入的第一组数据说明：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1g6vs9v8.png)\n\n$c_1  b_1 + c_2  b_2 + c_3  b_3 = 0 + 2 + 6 = 8$。\n\n数据范围：\n\n设节点 $i$ 的子树中的节点数量为 $s_i$。\n\n| Subtask | 分值 | $\\sum n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $24$ | $500$ | $r_i\\le1000$ |\n| $2$ | $22$ | $5000$ | $r_i\\le s_i$ |\n| $3$ | $18$ | $10^5$ | $l_i\\le100\\times s_i$，$r_i=10^9$ |\n| $4$ | $21$ | $5000$ |  |\n| $5$ | $15$ | $10^5$ |  |\n\n全部数据范围见输入格式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 采购优化 (Day 1)", "background": "翻译自 [ROI 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。", "description": "租赁滑雪设备的网点网络是一棵根节点为 $1$ 的树，由 $n$ 个节点组成，编号从 $1$ 到 $n$。每个节点上都有一个租赁点。位于第 $i$ 个节点的租赁点需要以 $c_i$ 卢布的价格购买设备套件。\n\n设 $a_i$ 表示在位于节点 $i$ **子树的所有租赁点中**将要购买的滑雪设备套件的总数。根据市场调研，这个值必须要满足 $l_i\\le a_i\\le r_i$。\n\n需要确定在赛季开始时每个租赁点需要购买多少套设备，以便对于网络中任何一个子树，设备套件的总数量都在市场营销人员指定的范围内，并且购买的所有设备套件的总成本最小，或是否不可能满足所有市场营销条件。", "inputFormat": "每个测试点包含多个测试数据。第一行给出一个整数 $t$，表示测试数据的数量。接下来是 $t$ 个测试数据。\n\n每个测试数据的第一行给出一个整数 $n$（$1\\le n\\le10^5$），表示树中的节点数量。\n\n接下来一行给出 $n-1$ 个整数 $p_2,p_3,\\dots,p_n$（$1\\le p_i<i$），表示节点 $i$ 的父节点为节点 $p_i$。\n\n接下来一行给出 $n$ 个整数 $c_1,\\dots,c_n$（$1\\le c_i\\le10^9$），其中 $c_i$ 表示 $i$ 号租赁点购买一个设备套件的价格。\n\n接下来 $n$ 行，每行给出两个整数 $l_i$ 和 $r_i$（$0\\le l_i\\le r_i\\le10^9$），表示对位于节点编号为 $i$ 的租赁点的子树中设备套件的总数的限制。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^5$。", "outputFormat": "对于每个测试数据，以下面的格式输出答案。\n\n如果无法满足所有市场营销条件，请输出 `-1`。\n\n否则，在第一行中输出购买整个网络的滑雪设备需要花费的最小卢布数。在第二行中，输出 $n$ 个整数 $b_i$，其中 $b_i$ 表示编号为 $i$ 的租赁点需要购买的设备套件的数量。如果有多种方式以最小的成本满足所有市场营销条件，可以输出其中一种。", "hint": "样例输入的第一组数据说明：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1g6vs9v8.png)\n\n$c_1  b_1 + c_2  b_2 + c_3  b_3 = 0 + 2 + 6 = 8$。\n\n数据范围：\n\n设节点 $i$ 的子树中的节点数量为 $s_i$。\n\n| Subtask | 分值 | $\\sum n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $24$ | $500$ | $r_i\\le1000$ |\n| $2$ | $22$ | $5000$ | $r_i\\le s_i$ |\n| $3$ | $18$ | $10^5$ | $l_i\\le100\\times s_i$，$r_i=10^9$ |\n| $4$ | $21$ | $5000$ |  |\n| $5$ | $15$ | $10^5$ |  |\n\n全部数据范围见输入格式。", "locale": "zh-CN"}}}
{"pid": "P11098", "type": "P", "difficulty": 6, "samples": [["3\n2 3 1\n5\n3 3 3 0\n2 2 2 1\n1 0 3 1\n3 1 3 2\n2 2 2 2", "0 0\n1 1\n0 0\n2 1\n2 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 滑梯 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n佩奇和她的弟弟乔治来到水上公园。乔治喜欢从滑梯上滑行，这个滑梯可以用三角网格的一部分来描述，其中的顶点是滑梯的节点。在每个节点上，可以选择继续沿着哪个管道前进——向左下或向右下。滑梯从上到下编号，从 $0$ 层开始。在第 $0$ 层，滑梯只有一个节点，在第 $1$ 层有两个节点，在第 $i$ 层有 $i + 1$ 个节点。总共有 $n + 1$ 层。每次从上到下滑都要经过恰好 $n$ 个管道。每个节点都有坐标，用两个数字 $(r, c)$ 表示在第 $r$ 层中从左边开始数的第 $c$ 个节点 ($0 \\le c \\le r \\le n$)。请注意，每层和每层上的节点都是从 $0$ 开始编号的。如果乔治位于节点 $(r, c)$ 并向左下滑，他将进入节点 $(r + 1, c)$，如果他向右下滑，他将进入节点 $(r + 1, c + 1)$。\n\n这是一个有 $5$ 层（$n=4$）的滑梯：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8lsit5mv.png)\n\n乔治想要从滑坡上滑下 $n + 1$ 次。在每次下滑之前，佩奇会给他一个指令，告诉他如何沿着滑坡滑行。每个指令由恰好 $n$ 个命令组成，要么是“向左下”，要么是“向右下”。乔治根据佩奇的命令从当前节点去往下一个节点。第一条指令只有“向右下”的命令。佩奇懒得想出新的指令，因此相邻两次下滑的指令只有一条命令不同：为了从第 $i$ 条指令得到第 $i + 1$ 条指令，需要将第 $a_i$ 个（不是第 $i$ 个）命令从“向右下”更改为“向左下”。每个命令只会被更改一次。到最后，第 $n+1$ 条指令将只包含“向左下”命令。可以证明，在这 $n+1$ 次下滑中，乔治会经过滑梯的每个节点（但不是每个管道）。\n\n在从水上乐园返回的途中，乔治遇到了以下问题。首先，考虑所有他滑过的管道的集合。给出两个节点的坐标：$(r_1, c_1)$ 和 $(r_2, c_2)$。你需要确定一个节点的坐标 $(r_3, c_3)$，使得从这个节点开始，通过这些他滑过的管道可以访问到节点 $(r_1, c_1)$ 和节点 $(r_2, c_2)$，并且在所有这样的节点中，它是最低的，即 $r_3$ 的值最大。可以证明，这样的节点总是存在且唯一。\n\n乔治有很多个问题，但是因为他已经离开了水上乐园，所以他不能碰这个滑梯。他需要你帮忙回答他的所有问题！", "inputFormat": "第一行给出一个整数 $n$（$1 \\le n \\le 500 000$）。\n\n在第二行中，给出 $n$ 个整数 $a_1, a_2, \\dots, a_n $（$1 \\le a_i \\le n$），其中 $a_i$ 是第 $i$ 次下滑后将要更改的命令的编号。保证所有的 $a_i$ 都是不同的。\n\n在第三行中给出一个整数 $q $（$1 \\le q \\le 500 000$），表示乔治的问题数量。\n\n在接下来的 $q$ 行中，每行给出四个整数 $r_{i,1}, c_{i,1}, r_{i,2},c_{i,2} $（$0 \\le r_{i,1}, r_{i,2} \\le n$，$0 \\le c_{i,1} \\le r_{i,1}$，$0 \\le c_{i,2} \\le r_{i,2}$），表示第 $i$ 个问题的两个节点的坐标。", "outputFormat": "输出 $q$ 行，每行输出两个整数 $r_{i,3}$ 和 $c_{i,3}$，作为第 $i$ 个问题的答案的节点坐标。", "hint": "### 样例解释：\n\n乔治四次滑滑梯的路线是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkmgi1s8.png)\n\n所以所有他经过的管道的集合是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5yo3n0mt.png)\n\n五个问题的答案看图易得。\n\n### 数据范围：\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $14$ | $300$ | $300$ |  |\n| $2$ | $23$ | $3000$ | $3000$ |  |\n| $3$ | $10$ | $100000$ | $100000$ | 对于所有 $i$，$a_i=i$ |\n| $4$ | $13$ | $100000$ | $100000$ | 数组 $a$ 有特殊形式 |\n| $5$ | $15$ | $100000$ | $100000$ |  |\n| $6$ | $14$ | $300000$ | $300000$ |  |\n| $7$ | $11$ | $500000$ | $500000$ |  |\n\nSubtask 4 中，数组 $a$ 形如 $1,2,3,\\dots,k,n,n-1,n-2,\\dots,k+1$，其中 $0\\le k\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 滑梯 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n佩奇和她的弟弟乔治来到水上公园。乔治喜欢从滑梯上滑行，这个滑梯可以用三角网格的一部分来描述，其中的顶点是滑梯的节点。在每个节点上，可以选择继续沿着哪个管道前进——向左下或向右下。滑梯从上到下编号，从 $0$ 层开始。在第 $0$ 层，滑梯只有一个节点，在第 $1$ 层有两个节点，在第 $i$ 层有 $i + 1$ 个节点。总共有 $n + 1$ 层。每次从上到下滑都要经过恰好 $n$ 个管道。每个节点都有坐标，用两个数字 $(r, c)$ 表示在第 $r$ 层中从左边开始数的第 $c$ 个节点 ($0 \\le c \\le r \\le n$)。请注意，每层和每层上的节点都是从 $0$ 开始编号的。如果乔治位于节点 $(r, c)$ 并向左下滑，他将进入节点 $(r + 1, c)$，如果他向右下滑，他将进入节点 $(r + 1, c + 1)$。\n\n这是一个有 $5$ 层（$n=4$）的滑梯：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8lsit5mv.png)\n\n乔治想要从滑坡上滑下 $n + 1$ 次。在每次下滑之前，佩奇会给他一个指令，告诉他如何沿着滑坡滑行。每个指令由恰好 $n$ 个命令组成，要么是“向左下”，要么是“向右下”。乔治根据佩奇的命令从当前节点去往下一个节点。第一条指令只有“向右下”的命令。佩奇懒得想出新的指令，因此相邻两次下滑的指令只有一条命令不同：为了从第 $i$ 条指令得到第 $i + 1$ 条指令，需要将第 $a_i$ 个（不是第 $i$ 个）命令从“向右下”更改为“向左下”。每个命令只会被更改一次。到最后，第 $n+1$ 条指令将只包含“向左下”命令。可以证明，在这 $n+1$ 次下滑中，乔治会经过滑梯的每个节点（但不是每个管道）。\n\n在从水上乐园返回的途中，乔治遇到了以下问题。首先，考虑所有他滑过的管道的集合。给出两个节点的坐标：$(r_1, c_1)$ 和 $(r_2, c_2)$。你需要确定一个节点的坐标 $(r_3, c_3)$，使得从这个节点开始，通过这些他滑过的管道可以访问到节点 $(r_1, c_1)$ 和节点 $(r_2, c_2)$，并且在所有这样的节点中，它是最低的，即 $r_3$ 的值最大。可以证明，这样的节点总是存在且唯一。\n\n乔治有很多个问题，但是因为他已经离开了水上乐园，所以他不能碰这个滑梯。他需要你帮忙回答他的所有问题！", "inputFormat": "第一行给出一个整数 $n$（$1 \\le n \\le 500 000$）。\n\n在第二行中，给出 $n$ 个整数 $a_1, a_2, \\dots, a_n $（$1 \\le a_i \\le n$），其中 $a_i$ 是第 $i$ 次下滑后将要更改的命令的编号。保证所有的 $a_i$ 都是不同的。\n\n在第三行中给出一个整数 $q $（$1 \\le q \\le 500 000$），表示乔治的问题数量。\n\n在接下来的 $q$ 行中，每行给出四个整数 $r_{i,1}, c_{i,1}, r_{i,2},c_{i,2} $（$0 \\le r_{i,1}, r_{i,2} \\le n$，$0 \\le c_{i,1} \\le r_{i,1}$，$0 \\le c_{i,2} \\le r_{i,2}$），表示第 $i$ 个问题的两个节点的坐标。", "outputFormat": "输出 $q$ 行，每行输出两个整数 $r_{i,3}$ 和 $c_{i,3}$，作为第 $i$ 个问题的答案的节点坐标。", "hint": "### 样例解释：\n\n乔治四次滑滑梯的路线是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkmgi1s8.png)\n\n所以所有他经过的管道的集合是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5yo3n0mt.png)\n\n五个问题的答案看图易得。\n\n### 数据范围：\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $14$ | $300$ | $300$ |  |\n| $2$ | $23$ | $3000$ | $3000$ |  |\n| $3$ | $10$ | $100000$ | $100000$ | 对于所有 $i$，$a_i=i$ |\n| $4$ | $13$ | $100000$ | $100000$ | 数组 $a$ 有特殊形式 |\n| $5$ | $15$ | $100000$ | $100000$ |  |\n| $6$ | $14$ | $300000$ | $300000$ |  |\n| $7$ | $11$ | $500000$ | $500000$ |  |\n\nSubtask 4 中，数组 $a$ 形如 $1,2,3,\\dots,k,n,n-1,n-2,\\dots,k+1$，其中 $0\\le k\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11099", "type": "P", "difficulty": 7, "samples": [["1\n1\n1\n4 6 4\n3 3\n1 2\n4 1\n5 0", "13"], ["2\n1 2\n1\n4 9 7\n3 0\n0 5\n4 4\n1 2", "55"], ["2\n1 3\n1\n5 6 11\n4 2\n2 7\n1 10\n3 8\n5 4", "57"], ["3\n1 2 3\n1\n5 7 10\n1 9\n5 5\n3 4\n2 6\n4 3", "63"], ["4\n1 2 3 4\n1\n3 8 6\n2 2\n4 5\n6 1", "44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 照明 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在平面直角坐标系上有一个矩形区域，它的四个角分别在 $(0, 0), (w, 0), (w, h) , (0, h)$。该区域上有 $n$ 个照明灯，第 $i$ 个照明灯位于坐标点 $(x_i, y_i)$。\n\n每个照明灯照亮一个 $90$ 度的角，这个角的边与坐标轴平行，顶点为照明灯所在位置。因此，每个照明灯有四个可能的照亮方向:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nhl1d2iq.png)\n\n给定一个允许的角度方向的集合（对于所有照明灯都相同）。对于每个照明灯，选择其中一个允许的方向。需要照亮尽可能大的区域。如果一个点至少被一个照明灯照到，则认为该点被照亮。\n\n计算使用照明灯可以照亮的区域的最大可能面积，其中每个照明灯都向其中一个允许的方向上照。", "inputFormat": "每个测试点包含多组数据。\n\n第一行给出一个整数 $k (1 \\le k \\le 4)$，表示每组数据中允许的角度方向的数量。\n\n第二行给出 $k$ 个整数，表示允许的方向编号（如当灯光允许向右上或左下照时，输入为 `1 3`）。所有 $k$ 个数字是不同的，并按升序排列。\n\n第三行给出一个整数 $t (1 \\le t \\le 10000)$，表示数据的组数。接下来输入 $t$ 组数据。\n\n每个数据集的第一行给出三个整数 $n,w,h (1 \\le n \\le 100000, 1 \\le w, h \\le 10^9)$，表示区域上的照明灯数量和区域的大小。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i (0 \\le x_i \\le w, 0 \\le y_i \\le h)$，表示第 $i$ 个照明灯的坐标。保证任意两个照明灯不在同一点上。", "outputFormat": "对于每组数据，输出一个整数，表示可以使用照明灯照亮的区域的最大可能面积。", "hint": "### 样例解释：\n\n样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pt0zscz6.png)\n\n样例 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gxap7oqs.png)\n\n样例 $3$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bsi6lme.png)\n\n样例 $4$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdgimd7c.png)\n\n样例 $5$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/44phd4mh.png)\n\n### 数据范围：\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $\\sum n\\le$ | 允许的方向 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $13$ | $10^5$ | $1$ |\n| $2$ | $11$ | $5000$ | $1,2$ |\n| $3$ | $14$ | $10^5$ | $1,2$ |\n| $4$ | $22$ | $5000$ | $1,3$ |\n| $5$ | $14$ | $10^5$ | $1,3$ |\n| $6$ | $15$ | $2000$ | $1,2,3$ |\n| $7$ | $11$ | $10^5$ | $1,2,3,4$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 照明 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在平面直角坐标系上有一个矩形区域，它的四个角分别在 $(0, 0), (w, 0), (w, h) , (0, h)$。该区域上有 $n$ 个照明灯，第 $i$ 个照明灯位于坐标点 $(x_i, y_i)$。\n\n每个照明灯照亮一个 $90$ 度的角，这个角的边与坐标轴平行，顶点为照明灯所在位置。因此，每个照明灯有四个可能的照亮方向:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nhl1d2iq.png)\n\n给定一个允许的角度方向的集合（对于所有照明灯都相同）。对于每个照明灯，选择其中一个允许的方向。需要照亮尽可能大的区域。如果一个点至少被一个照明灯照到，则认为该点被照亮。\n\n计算使用照明灯可以照亮的区域的最大可能面积，其中每个照明灯都向其中一个允许的方向上照。", "inputFormat": "每个测试点包含多组数据。\n\n第一行给出一个整数 $k (1 \\le k \\le 4)$，表示每组数据中允许的角度方向的数量。\n\n第二行给出 $k$ 个整数，表示允许的方向编号（如当灯光允许向右上或左下照时，输入为 `1 3`）。所有 $k$ 个数字是不同的，并按升序排列。\n\n第三行给出一个整数 $t (1 \\le t \\le 10000)$，表示数据的组数。接下来输入 $t$ 组数据。\n\n每个数据集的第一行给出三个整数 $n,w,h (1 \\le n \\le 100000, 1 \\le w, h \\le 10^9)$，表示区域上的照明灯数量和区域的大小。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i (0 \\le x_i \\le w, 0 \\le y_i \\le h)$，表示第 $i$ 个照明灯的坐标。保证任意两个照明灯不在同一点上。", "outputFormat": "对于每组数据，输出一个整数，表示可以使用照明灯照亮的区域的最大可能面积。", "hint": "### 样例解释：\n\n样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pt0zscz6.png)\n\n样例 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gxap7oqs.png)\n\n样例 $3$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bsi6lme.png)\n\n样例 $4$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdgimd7c.png)\n\n样例 $5$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/44phd4mh.png)\n\n### 数据范围：\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $\\sum n\\le$ | 允许的方向 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $13$ | $10^5$ | $1$ |\n| $2$ | $11$ | $5000$ | $1,2$ |\n| $3$ | $14$ | $10^5$ | $1,2$ |\n| $4$ | $22$ | $5000$ | $1,3$ |\n| $5$ | $14$ | $10^5$ | $1,3$ |\n| $6$ | $15$ | $2000$ | $1,2,3$ |\n| $7$ | $11$ | $10^5$ | $1,2,3,4$ |", "locale": "zh-CN"}}}
{"pid": "P11100", "type": "P", "difficulty": 5, "samples": [["170\n15", "710"], ["170\n600", "170"], ["314599\n17713", "931459"], ["001\n1000", "001"], ["3327\n114", "7332"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 交换 (Day 2)", "background": "翻译自 [ROI 2022 D2T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n给定一个 $n$ 位十进制数 $x$。可以任意多次交换相邻的两个数位，每次交换会产生一个代价 $y$。如果通过 $k$ 次这样的交换得到了数字 $x_{new}$，则收益等于 $x_{new}-k\\times y$。\n\n定义：如果通过交换从 $x$ 得到了数字 $x_{new}$，并且在此过程中达到了最大可能的收益，则称数字 $x_{new}$ 为最优数字。\n\n例如，当 $y=114$ 时，可以通过交换 $3$ 次将数字 $3327$ 中的 $7$ 移到最前面，得到最大的收益 $7332-3\\times114=6990$。此时就称 $7332$ 为最优数字。", "description": "众所周知，这样的最优数字可能不止一个（对于同一个 $x$，它的所有最优数字获得的收益是相等的，但它们的值不相等）。对于给定的 $x$ 和 $y$，需要确定最优数字中的最大值。", "inputFormat": "第一行包含一个由 $n$ 个十进制数位组成的整数 $x$（$1\\le n\\le10^5$），数字 $x$ 可能有前导零。\n\n第二行包含一个整数 $y$，表示一次交换的代价（$1\\le y\\le10^{16}$）。", "outputFormat": "输出一个整数 $x_{new}$，表示最优数字中的最大值。数字 $x_{new}$ 的长度为 $n$，并且可能包含前导零。", "hint": "| Subtask | 分值 | $n\\le$ | $y\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $27$ | $9$ | $10^8$ |  |\n| $2$ | $13$ | $20$ | $10^8$ |  |\n| $3$ | $19$ | $10^5$ | $1$ |  |\n| $4$ | $25$ | $10^5$ | $10^8$ | $x$ 由 `1` 或 `2` 组成 |\n| $5$ | $8$ | $10^5$ | $10^8$ |  |\n| $6$ | $8$ | $10^5$ | $10^{16}$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 交换 (Day 2)", "background": "翻译自 [ROI 2022 D2T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n给定一个 $n$ 位十进制数 $x$。可以任意多次交换相邻的两个数位，每次交换会产生一个代价 $y$。如果通过 $k$ 次这样的交换得到了数字 $x_{new}$，则收益等于 $x_{new}-k\\times y$。\n\n定义：如果通过交换从 $x$ 得到了数字 $x_{new}$，并且在此过程中达到了最大可能的收益，则称数字 $x_{new}$ 为最优数字。\n\n例如，当 $y=114$ 时，可以通过交换 $3$ 次将数字 $3327$ 中的 $7$ 移到最前面，得到最大的收益 $7332-3\\times114=6990$。此时就称 $7332$ 为最优数字。", "description": "众所周知，这样的最优数字可能不止一个（对于同一个 $x$，它的所有最优数字获得的收益是相等的，但它们的值不相等）。对于给定的 $x$ 和 $y$，需要确定最优数字中的最大值。", "inputFormat": "第一行包含一个由 $n$ 个十进制数位组成的整数 $x$（$1\\le n\\le10^5$），数字 $x$ 可能有前导零。\n\n第二行包含一个整数 $y$，表示一次交换的代价（$1\\le y\\le10^{16}$）。", "outputFormat": "输出一个整数 $x_{new}$，表示最优数字中的最大值。数字 $x_{new}$ 的长度为 $n$，并且可能包含前导零。", "hint": "| Subtask | 分值 | $n\\le$ | $y\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $27$ | $9$ | $10^8$ |  |\n| $2$ | $13$ | $20$ | $10^8$ |  |\n| $3$ | $19$ | $10^5$ | $1$ |  |\n| $4$ | $25$ | $10^5$ | $10^8$ | $x$ 由 `1` 或 `2` 组成 |\n| $5$ | $8$ | $10^5$ | $10^8$ |  |\n| $6$ | $8$ | $10^5$ | $10^{16}$ |  |", "locale": "zh-CN"}}}
{"pid": "P11101", "type": "P", "difficulty": 4, "samples": [["6 6\n5 4 4 2 2 2\n1 0\n1 1\n1 2\n2 1\n2 2\n3 1 5", "3\n2\n1\n8\n11\n4"], ["5 4\n0 3 5 4 2\n1 0\n1 1\n2 1\n3 1 1", "5\n2\n10\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "树状数组", "2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 天狼星探险队 (Day 2)", "background": "翻译自 [ROI 2022 D2T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n“天狼星探险队”游戏中有 $n$ 个玩家，编号从 $1$ 到 $n$。每个玩家在之前的任务中积累了 $c_i$ 点经验。如果两个玩家具有相同的经验值，我们称他们具有相同的等级。经验更高的玩家具有更高的等级。\n\n游戏由多个回合组成。在每个回合结束时，每个玩家都会获得经验，该经验为其他玩家中比他更高的**级别的数量**。例如，如果玩家的经验值为 $[2, 5, 5, 1, 2, 10]$，那么第一个玩家的经验将增加 $2$：存在两种更高级别的玩家——经验值分别为 $5$ 和 $10$ 的玩家。这个例子中最后一个玩家的经验不会增加。玩家的经验会同时改变，比如在这个例子中，回合结束时玩家的经验将变为 $[4, 6, 6, 4, 4, 10]$。", "description": "需要回答几个问题。每个问题可以是以下三种类型之一：\n1. 在进行 $k$ 个回合后，玩家将拥有多少不同的级别？\n2. 在前 $k$ 个回合中，所有玩家共添加了多少经验？\n3. 在第 $k$ 个回合结束时，玩家编号 $i$ 将拥有多少经验？", "inputFormat": "第一行包含两个整数 $n$ 和 $q$（$1\\le n,q\\le300,000$），分别表示玩家数量和需要回答的问题数量。\n\n第二行包含 $n$ 个整数 $c_i$（$0\\le c_i\\le10^{12}$），表示当前游戏开始时每个玩家的经验值。\n\n接下来有 $q$ 行问题。每行以整数 $t$（$t\\in\\{1，2，3\\}$）开头，表示问题类型。\n- 如果 $t=1$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=2$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=3$，则后面是两个整数 $k$ 和 $i$（$0\\le k\\le10^{12}，1\\le i\\le n$），表示回合数和玩家编号。\n\n在所有问题中，$k=0$ 表示游戏开始时到进行第一轮之前的时刻。", "outputFormat": "对于每个问题，输出一行一个数字表示其答案。", "hint": "下图是两个样例中游戏进行时玩家的经验值变化。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1o9jl04.png)\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | $c,k\\le$ | $t$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $5000$ | $5000$ | $10^4$ |  |\n| $2$ | $16$ | $5000$ | $5000$ | $10^7$ |  |\n| $3$ | $14$ | $5000$ | $5000$ | $10^{12}$ |  |\n| $4$ | $7$ | $3\\times10^5$ | $3\\times10^5$ | $10^7$ |  |\n| $5$ | $12$ | $5000$ | $3\\times10^5$ | $10^{12}$ |  |\n| $6$ | $14$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t=1$ |\n| $7$ | $10$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t\\in\\{1,2\\}$ |\n| $8$ | $9$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 天狼星探险队 (Day 2)", "background": "翻译自 [ROI 2022 D2T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n“天狼星探险队”游戏中有 $n$ 个玩家，编号从 $1$ 到 $n$。每个玩家在之前的任务中积累了 $c_i$ 点经验。如果两个玩家具有相同的经验值，我们称他们具有相同的等级。经验更高的玩家具有更高的等级。\n\n游戏由多个回合组成。在每个回合结束时，每个玩家都会获得经验，该经验为其他玩家中比他更高的**级别的数量**。例如，如果玩家的经验值为 $[2, 5, 5, 1, 2, 10]$，那么第一个玩家的经验将增加 $2$：存在两种更高级别的玩家——经验值分别为 $5$ 和 $10$ 的玩家。这个例子中最后一个玩家的经验不会增加。玩家的经验会同时改变，比如在这个例子中，回合结束时玩家的经验将变为 $[4, 6, 6, 4, 4, 10]$。", "description": "需要回答几个问题。每个问题可以是以下三种类型之一：\n1. 在进行 $k$ 个回合后，玩家将拥有多少不同的级别？\n2. 在前 $k$ 个回合中，所有玩家共添加了多少经验？\n3. 在第 $k$ 个回合结束时，玩家编号 $i$ 将拥有多少经验？", "inputFormat": "第一行包含两个整数 $n$ 和 $q$（$1\\le n,q\\le300,000$），分别表示玩家数量和需要回答的问题数量。\n\n第二行包含 $n$ 个整数 $c_i$（$0\\le c_i\\le10^{12}$），表示当前游戏开始时每个玩家的经验值。\n\n接下来有 $q$ 行问题。每行以整数 $t$（$t\\in\\{1，2，3\\}$）开头，表示问题类型。\n- 如果 $t=1$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=2$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=3$，则后面是两个整数 $k$ 和 $i$（$0\\le k\\le10^{12}，1\\le i\\le n$），表示回合数和玩家编号。\n\n在所有问题中，$k=0$ 表示游戏开始时到进行第一轮之前的时刻。", "outputFormat": "对于每个问题，输出一行一个数字表示其答案。", "hint": "下图是两个样例中游戏进行时玩家的经验值变化。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1o9jl04.png)\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | $c,k\\le$ | $t$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $5000$ | $5000$ | $10^4$ |  |\n| $2$ | $16$ | $5000$ | $5000$ | $10^7$ |  |\n| $3$ | $14$ | $5000$ | $5000$ | $10^{12}$ |  |\n| $4$ | $7$ | $3\\times10^5$ | $3\\times10^5$ | $10^7$ |  |\n| $5$ | $12$ | $5000$ | $3\\times10^5$ | $10^{12}$ |  |\n| $6$ | $14$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t=1$ |\n| $7$ | $10$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t\\in\\{1,2\\}$ |\n| $8$ | $9$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ |  |", "locale": "zh-CN"}}}
{"pid": "P11102", "type": "P", "difficulty": 6, "samples": [["4\n4 4\n1 2\n2 3\n3 4\n4 1\n5 5\n1 2\n2 3\n3 4\n4 5\n5 1\n5 6\n1 2\n3 2\n1 3\n3 5\n5 4\n3 4\n9 12\n1 2\n2 3\n3 1\n4 5\n5 6\n6 4\n7 8\n8 9\n9 7\n3 6\n6 9\n9 3", "-1 2 -1\n4 2 2 4\n2 2 4 4\n2 2 6 6 4 6 6 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 搬货 (Day 2)", "background": "翻译自 [ROI 2022 D2T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n仓库操作员需要使用特殊叉车移动重箱。可以将仓库简化为 $n$ 个房间，通过 $m$ 条走廊连接。可以通过走廊从任意一个房间到达任意其他房间。房间编号从 $1$ 到 $n$。走廊 $i$ 直接连接房间 $u_i$ 和 $v_i$，可以双向移动。\n\n叉车可以升降货物，如果不携带货物，可以在空房间和走廊之间移动。最初，叉车位于房间 $1$，并携带着升起的货物。叉车可以执行以下操作：\n\n1. 如果叉车位于房间 $a$ 并且携带升起的货物，则可以将货物放置在房间 $b$，前提是房间 $a$ 和 $b$ 直接相连。完成此操作后，叉车不再携带货物并可以移动。\n2. 如果叉车位于房间 $a$，货物放置在房间 $b$，并且房间 $a$ 和 $b$ 直接相连，则叉车可以在不移动的情况下升起货物。完成此操作后，叉车仍然位于房间 $a$ 并携带升起的货物，直到放下货物之前不能移动。\n3. 如果叉车没有携带货物，则可以在走廊和房间之间移动，但不能通过放有货物的房间。", "description": "空车在房间之间移动非常快，比升降货物的速度快得多。因此，我们假设叉车执行第一或第二操作需要一单位时间，而第三个操作是瞬时完成的。对于每个房间 $p(2 \\le p \\le n)$，需要确定叉车从初始位置（在第一个房间且携带升起的货物）到达房间 $p$ 并继续携带升起的货物所需的最短时间，或者确定这是不可能的。", "inputFormat": "每个测试由多组数据组成。第一行给出一个整数 $t$（$1 \\le t \\le 100,000$），即数据的组数。接下来是每组数据的描述。\n\n每组数据的第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 500,000,1 \\le m \\le 500,000$），即仓库中房间和走廊的数量。\n\n接下来的 $m$ 行每行包含两个整数 $u_i$ 和 $v_i$（$1 \\le u_i,v_i \\le n,u_i \\ne v_i$），表示第 $i$ 条走廊连接的两个房间编号。保证每对通过走廊连接的房间只会出现一次（或者说每个走廊只输入一次）。保证如果所有房间都是空闲的，则可以通过走廊从任意房间到达任意其他房间，即由仓库简化成的图是联通的。\n\n用 $\\sum n$ 表示每一组数据中 $n$ 的总和，用 $\\sum m$ 表示 $m$ 的总和，保证 $\\sum n \\le 500,000,\\sum m \\le 500,000$。", "outputFormat": "对于每组输入，输出 $n - 1$ 个数字，其中第 $i$ 个数字应该等于叉车从房间 $1$ 开始到房间 $i+1$（同时继续携带升起的货物）需要升降货物的最小次数（也就是最短时间）。如果无法实现，则第 $i$ 个数字应为 $-1$。", "hint": "部分样例解释：\n\n在第四组数据中，为了使叉车从房间 $1$ 开始（携带升起的货物）尽快到达房间 $4$（并继续携带升起的货物），可以执行以下操作：\n\n- 将货物放置在房间 $2$。需要花费一单位时间。\n- 移动到房间 $3$。不需要花费时间。\n- 从房间 $2$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $9$。需要花费一单位时间。\n- 移动到房间 $6$。不需要花费时间。\n- 从房间 $9$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $5$。需要花费一单位时间。\n- 移动到房间 $4$。不需要花费时间。\n- 从房间 $5$ 中升起货物。需要花费一单位时间。\n\n总共需要花费 $6$ 个单位时间。\n\n| Subtask | 分值 | $\\sum n\\le$ | $\\sum m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $16$ | $1000$ | $2000$ |  |\n| $2$ | $18$ | $1000$ | $100000$ |  |\n| $3$ | $14$ | $5000$ | $500000$ |  |\n| $4$ | $17$ | $500000$ | $500000$ | 对于任意 $1\\le i\\le n-1$，存在一条走廊连接 $i$ 和 $i+1$ 号房间，且 $1$ 和 $n$ 号房间也有走廊连接 |\n| $5$ | $12$ | $500000$ | $500000$ | 每个房间最多有 $3$ 条走廊 |\n| $6$ | $23$ | $500000$ | $500000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 搬货 (Day 2)", "background": "翻译自 [ROI 2022 D2T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n仓库操作员需要使用特殊叉车移动重箱。可以将仓库简化为 $n$ 个房间，通过 $m$ 条走廊连接。可以通过走廊从任意一个房间到达任意其他房间。房间编号从 $1$ 到 $n$。走廊 $i$ 直接连接房间 $u_i$ 和 $v_i$，可以双向移动。\n\n叉车可以升降货物，如果不携带货物，可以在空房间和走廊之间移动。最初，叉车位于房间 $1$，并携带着升起的货物。叉车可以执行以下操作：\n\n1. 如果叉车位于房间 $a$ 并且携带升起的货物，则可以将货物放置在房间 $b$，前提是房间 $a$ 和 $b$ 直接相连。完成此操作后，叉车不再携带货物并可以移动。\n2. 如果叉车位于房间 $a$，货物放置在房间 $b$，并且房间 $a$ 和 $b$ 直接相连，则叉车可以在不移动的情况下升起货物。完成此操作后，叉车仍然位于房间 $a$ 并携带升起的货物，直到放下货物之前不能移动。\n3. 如果叉车没有携带货物，则可以在走廊和房间之间移动，但不能通过放有货物的房间。", "description": "空车在房间之间移动非常快，比升降货物的速度快得多。因此，我们假设叉车执行第一或第二操作需要一单位时间，而第三个操作是瞬时完成的。对于每个房间 $p(2 \\le p \\le n)$，需要确定叉车从初始位置（在第一个房间且携带升起的货物）到达房间 $p$ 并继续携带升起的货物所需的最短时间，或者确定这是不可能的。", "inputFormat": "每个测试由多组数据组成。第一行给出一个整数 $t$（$1 \\le t \\le 100,000$），即数据的组数。接下来是每组数据的描述。\n\n每组数据的第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 500,000,1 \\le m \\le 500,000$），即仓库中房间和走廊的数量。\n\n接下来的 $m$ 行每行包含两个整数 $u_i$ 和 $v_i$（$1 \\le u_i,v_i \\le n,u_i \\ne v_i$），表示第 $i$ 条走廊连接的两个房间编号。保证每对通过走廊连接的房间只会出现一次（或者说每个走廊只输入一次）。保证如果所有房间都是空闲的，则可以通过走廊从任意房间到达任意其他房间，即由仓库简化成的图是联通的。\n\n用 $\\sum n$ 表示每一组数据中 $n$ 的总和，用 $\\sum m$ 表示 $m$ 的总和，保证 $\\sum n \\le 500,000,\\sum m \\le 500,000$。", "outputFormat": "对于每组输入，输出 $n - 1$ 个数字，其中第 $i$ 个数字应该等于叉车从房间 $1$ 开始到房间 $i+1$（同时继续携带升起的货物）需要升降货物的最小次数（也就是最短时间）。如果无法实现，则第 $i$ 个数字应为 $-1$。", "hint": "部分样例解释：\n\n在第四组数据中，为了使叉车从房间 $1$ 开始（携带升起的货物）尽快到达房间 $4$（并继续携带升起的货物），可以执行以下操作：\n\n- 将货物放置在房间 $2$。需要花费一单位时间。\n- 移动到房间 $3$。不需要花费时间。\n- 从房间 $2$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $9$。需要花费一单位时间。\n- 移动到房间 $6$。不需要花费时间。\n- 从房间 $9$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $5$。需要花费一单位时间。\n- 移动到房间 $4$。不需要花费时间。\n- 从房间 $5$ 中升起货物。需要花费一单位时间。\n\n总共需要花费 $6$ 个单位时间。\n\n| Subtask | 分值 | $\\sum n\\le$ | $\\sum m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $16$ | $1000$ | $2000$ |  |\n| $2$ | $18$ | $1000$ | $100000$ |  |\n| $3$ | $14$ | $5000$ | $500000$ |  |\n| $4$ | $17$ | $500000$ | $500000$ | 对于任意 $1\\le i\\le n-1$，存在一条走廊连接 $i$ 和 $i+1$ 号房间，且 $1$ 和 $n$ 号房间也有走廊连接 |\n| $5$ | $12$ | $500000$ | $500000$ | 每个房间最多有 $3$ 条走廊 |\n| $6$ | $23$ | $500000$ | $500000$ |  |", "locale": "zh-CN"}}}
