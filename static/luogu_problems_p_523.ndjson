{"pid": "P11608", "type": "P", "difficulty": 6, "samples": [["3\n5 10\n16 0\n5 10", "10\n26\n57"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2016", "平衡树", "PA（波兰）"], "title": "[PA 2016] 雨后的蘑菇 2 / Grzyby po deszczu 2", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 Grzyby po deszczu 2 [A] (GRZ)。\n", "description": "\n给定长度为 $n$ 的整数数列 $a_1,\\ldots,a_n$ 和 $b_1,\\ldots,b_n$。\n\n第 $1$ 天早上，第 $i$ 块地上有 $b_i$ 个蘑菇。每天的晚上，第 $i$ 块地上都会长出 $a_i$ 个蘑菇。\n\n采蘑菇只能在早上进行，一次只能在一块地上采集，一次采集的数量没有限制。\n\n对于 $k=1,2,\\cdots,n$，求出：如果在前 $k$ 天**每天早上**选择一块地（可以重复选择同一块地）采蘑菇，最多能采多少个蘑菇？", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个非负整数 $a_i,b_i$。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数，表示 $k=i$ 时的答案。\n", "hint": "\n- $1\\le n\\le 10^6$；\n- $0\\le a_i\\le 10^6$；\n- $0\\le b_i\\le 10^{12}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 雨后的蘑菇 2 / Grzyby po deszczu 2", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 Grzyby po deszczu 2 [A] (GRZ)。\n", "description": "\n给定长度为 $n$ 的整数数列 $a_1,\\ldots,a_n$ 和 $b_1,\\ldots,b_n$。\n\n第 $1$ 天早上，第 $i$ 块地上有 $b_i$ 个蘑菇。每天的晚上，第 $i$ 块地上都会长出 $a_i$ 个蘑菇。\n\n采蘑菇只能在早上进行，一次只能在一块地上采集，一次采集的数量没有限制。\n\n对于 $k=1,2,\\cdots,n$，求出：如果在前 $k$ 天**每天早上**选择一块地（可以重复选择同一块地）采蘑菇，最多能采多少个蘑菇？", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个非负整数 $a_i,b_i$。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数，表示 $k=i$ 时的答案。\n", "hint": "\n- $1\\le n\\le 10^6$；\n- $0\\le a_i\\le 10^6$；\n- $0\\le b_i\\le 10^{12}$。\n", "locale": "zh-CN"}}}
{"pid": "P11611", "type": "P", "difficulty": 7, "samples": [["3\n(x2) ^ (x3 v ~x2) ^ (x2 v x1 v ~x3)", "2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "虚树", "字典树 Trie", "PA（波兰）"], "title": "[PA 2016] 归约 / CNF-SAT", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 CNF-SAT [B] (CNF)。$\\texttt{1s,256M}$。\n", "description": "\n我们给定 SAT 问题的定义。本题中，不区分 $1$ 与 $\\mathrm{True}$，$0$ 与 $\\mathrm{False}$。\n\nSAT 问题用来求出一组逻辑变量 $x_1,x_2,\\cdots,x_n$ 的取值（其中 $x_i\\in \\{\\mathrm{True},\\mathrm{False}\\}$），使得以下的**合取范式**取值为真：\n\n$$(l_{1,1}\\lor l_{1,2}\\lor \\ldots\\lor l_{1,q_1})\\land (l_{2,1}\\lor l_{2,2}\\lor \\ldots\\lor l_{2,q_2})\\land \\ldots \\land (l_{m,1}\\lor l_{m,2}\\lor \\ldots\\lor l_{m,q_m})$$\n\n\n\n其中，$(l_{i,1}\\lor l_{i,2}\\lor \\ldots\\lor l_{i,q_i})$ 称为**子句**（Clause），$l_{i,j}$ 是 $x_1,\\ldots,x_n$ 中的变量或其否定。我们规定一个子句中，不存在 $j\\lt k$，使得 $l_{i,j}$ 中的变量与 $l_{i,k}$ 中的变量相同。\n\n---\n\n\n某人声称解决了世界难题 $\\mathrm{P}=\\mathrm{NP?}$。他声称，一般的 SAT 问题都可以归约到一种特例，而这种特例中的所有子句都满足特殊性质：\n\n- $\\forall 1\\le i\\le n$，$x_i$ 和 $\\neg x_i$ 不会同时在子句中出现。\n- $\\forall 1\\le i\\lt j\\lt k\\le n$，若子句中出现了 $x_i$（或 $\\neg x_i$）和 $x_k$（或 $\\neg x_k$），则必然有 $x_j$（或 $\\neg x_j$）在这个子句中出现。\n\n这里，所有出现的变量的下标都是 $1\\sim n$。\n\n给定满足特例的合取范式，统计有多少种不同的取值能够使其取值为真。只需要求出答案对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，一个正整数 $n$，表示**变量的数量**。\n\n第二行，描述一个由若干个子句组成的合取范式：\n\n- 两个子句之间由 ` ^ ` 隔开（一个空格，和 `^`，然后再是一个空格）。\n- 每个子句由一对圆括号 `()` 包围。圆括号内部是若干变量，每个变量形如 `xi` 或者 `~xi`（这里，`x` 是英文字母 $x$，`i` 是一个正整数），其中 `xi` 表示 $x_i$，`~xi` 表示 $\\neg x_i$。两个变量之间用 ` v ` 隔开（一个空格，和英文字母 `v`，然后再是一个空格）。\n\n这里，保证有 $1\\le i\\le n$，且子句满足题目描述中的特殊性质。\n", "outputFormat": "\n输出答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "#### 样例解释\n\n两个合法解为 $(0,1,1)$ 和 $(1,1,1)$。\n\n#### 数据范围\n\n- $1\\le n\\le 10^6$；\n- 所有子句中变量个数的和不超过 $10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 归约 / CNF-SAT", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 CNF-SAT [B] (CNF)。$\\texttt{1s,256M}$。\n", "description": "\n我们给定 SAT 问题的定义。本题中，不区分 $1$ 与 $\\mathrm{True}$，$0$ 与 $\\mathrm{False}$。\n\nSAT 问题用来求出一组逻辑变量 $x_1,x_2,\\cdots,x_n$ 的取值（其中 $x_i\\in \\{\\mathrm{True},\\mathrm{False}\\}$），使得以下的**合取范式**取值为真：\n\n$$(l_{1,1}\\lor l_{1,2}\\lor \\ldots\\lor l_{1,q_1})\\land (l_{2,1}\\lor l_{2,2}\\lor \\ldots\\lor l_{2,q_2})\\land \\ldots \\land (l_{m,1}\\lor l_{m,2}\\lor \\ldots\\lor l_{m,q_m})$$\n\n\n\n其中，$(l_{i,1}\\lor l_{i,2}\\lor \\ldots\\lor l_{i,q_i})$ 称为**子句**（Clause），$l_{i,j}$ 是 $x_1,\\ldots,x_n$ 中的变量或其否定。我们规定一个子句中，不存在 $j\\lt k$，使得 $l_{i,j}$ 中的变量与 $l_{i,k}$ 中的变量相同。\n\n---\n\n\n某人声称解决了世界难题 $\\mathrm{P}=\\mathrm{NP?}$。他声称，一般的 SAT 问题都可以归约到一种特例，而这种特例中的所有子句都满足特殊性质：\n\n- $\\forall 1\\le i\\le n$，$x_i$ 和 $\\neg x_i$ 不会同时在子句中出现。\n- $\\forall 1\\le i\\lt j\\lt k\\le n$，若子句中出现了 $x_i$（或 $\\neg x_i$）和 $x_k$（或 $\\neg x_k$），则必然有 $x_j$（或 $\\neg x_j$）在这个子句中出现。\n\n这里，所有出现的变量的下标都是 $1\\sim n$。\n\n给定满足特例的合取范式，统计有多少种不同的取值能够使其取值为真。只需要求出答案对 $(10^9+7)$ 取模后的结果。", "inputFormat": "\n第一行，一个正整数 $n$，表示**变量的数量**。\n\n第二行，描述一个由若干个子句组成的合取范式：\n\n- 两个子句之间由 ` ^ ` 隔开（一个空格，和 `^`，然后再是一个空格）。\n- 每个子句由一对圆括号 `()` 包围。圆括号内部是若干变量，每个变量形如 `xi` 或者 `~xi`（这里，`x` 是英文字母 $x$，`i` 是一个正整数），其中 `xi` 表示 $x_i$，`~xi` 表示 $\\neg x_i$。两个变量之间用 ` v ` 隔开（一个空格，和英文字母 `v`，然后再是一个空格）。\n\n这里，保证有 $1\\le i\\le n$，且子句满足题目描述中的特殊性质。\n", "outputFormat": "\n输出答案对 $(10^9+7)$ 取模后的结果。\n", "hint": "#### 样例解释\n\n两个合法解为 $(0,1,1)$ 和 $(1,1,1)$。\n\n#### 数据范围\n\n- $1\\le n\\le 10^6$；\n- 所有子句中变量个数的和不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P11612", "type": "P", "difficulty": 7, "samples": [["3 2\n1\n42", "2 1\n3 14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "2016", "递归", "分治", "分类讨论", "PA（波兰）"], "title": "[PA 2016] 台球 / Bilard Hilberta", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Bilard Hilberta [A] (HIL)。\n", "description": "\n考虑如下的 Hilbert 曲线：\n\n$n$ 阶的 Hilbert 曲线的大小为 $2^{n+1}\\times 2^{n+1}$。这里，$n\\ge 1$。\n\n$n=1$ 时的曲线在下图中给出，而 $n\\gt 1$ 时的曲线由四个 $(n-1)$ 阶的曲线组成。左下角的曲线被顺时针旋转了 $90^\\circ$，而右下角的曲线则被逆时针旋转了 $90^\\circ$，而且在左上与左下、左上与右上、右上与右下的曲线的相接处添加了长度为 $2$ 的额外曲线将它们连为一体。\n\n下图中从左至右分别展示了 $n=1,2,3$ 时的曲线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ynfo38pq.png)\n\n令左下角的坐标为 $(0,0)$，右下角的坐标为 $(2^{n+1},0)$，右上角坐标为 $(2^{n+1},2^{n+1})$。\n\n将球视为质点。球从 $(1,0)$ 出发，其速度矢量 $\\boldsymbol{v}=(1,1)$。撞到边缘或者曲线上之后，它会反弹，这里的碰撞是**完全弹性碰撞**，也就是垂直于撞击面的速度分量反向，平行于撞击面的速度分量不变。可以证明撞到的一定是一个面，没有撞到角的情况。\n\n$m$ 次询问，每次问球出发 $t_i$ 秒后，球的位置。", "inputFormat": "\n\n第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，第 $i$ 行只有一个整数 $t_i$，描述一次询问。", "outputFormat": "输出 $m$ 行，每行两个整数表示球的位置。\n", "hint": "\n#### 样例解释\n\n在【题目描述】的图中已经给出。\n\n#### 数据范围\n\n- $1\\le n\\le 30$；\n- $1\\le m\\le 10^5$；\n- $0\\lt t_1\\lt t_2\\lt \\ldots \\lt t_m\\lt 2^{2(n+1)}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 台球 / Bilard Hilberta", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Bilard Hilberta [A] (HIL)。\n", "description": "\n考虑如下的 Hilbert 曲线：\n\n$n$ 阶的 Hilbert 曲线的大小为 $2^{n+1}\\times 2^{n+1}$。这里，$n\\ge 1$。\n\n$n=1$ 时的曲线在下图中给出，而 $n\\gt 1$ 时的曲线由四个 $(n-1)$ 阶的曲线组成。左下角的曲线被顺时针旋转了 $90^\\circ$，而右下角的曲线则被逆时针旋转了 $90^\\circ$，而且在左上与左下、左上与右上、右上与右下的曲线的相接处添加了长度为 $2$ 的额外曲线将它们连为一体。\n\n下图中从左至右分别展示了 $n=1,2,3$ 时的曲线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ynfo38pq.png)\n\n令左下角的坐标为 $(0,0)$，右下角的坐标为 $(2^{n+1},0)$，右上角坐标为 $(2^{n+1},2^{n+1})$。\n\n将球视为质点。球从 $(1,0)$ 出发，其速度矢量 $\\boldsymbol{v}=(1,1)$。撞到边缘或者曲线上之后，它会反弹，这里的碰撞是**完全弹性碰撞**，也就是垂直于撞击面的速度分量反向，平行于撞击面的速度分量不变。可以证明撞到的一定是一个面，没有撞到角的情况。\n\n$m$ 次询问，每次问球出发 $t_i$ 秒后，球的位置。", "inputFormat": "\n\n第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，第 $i$ 行只有一个整数 $t_i$，描述一次询问。", "outputFormat": "输出 $m$ 行，每行两个整数表示球的位置。\n", "hint": "\n#### 样例解释\n\n在【题目描述】的图中已经给出。\n\n#### 数据范围\n\n- $1\\le n\\le 30$；\n- $1\\le m\\le 10^5$；\n- $0\\lt t_1\\lt t_2\\lt \\ldots \\lt t_m\\lt 2^{2(n+1)}$。", "locale": "zh-CN"}}}
{"pid": "P11613", "type": "P", "difficulty": 7, "samples": [["4\n3 1\n5 4\n5 3\n57 32", "0\n1\n1\n1"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "组合数学", "生成函数", "Lucas 定理", "PA（波兰）"], "title": "[PA 2016] 覆盖 / Pokrycia", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Pokrycia [A] (POK)。\n", "description": "\n简单无向图 $G=(V,E)$ 的**点覆盖**是一个点集 $S\\subseteq V$，使得 $\\forall (u,v)\\in E$，都有 $u\\in S$ 或 $v\\in S$。点覆盖 $S$ 的**大小**定义为 $|S|$。\n\n给定点集 $V$ 和整数 $k$，求出有多少张以 $V$ 为点集的简单无向图 $G$ 的最小点覆盖大小为 $k$。\n\n两张图 $G_1=(V,E_1)$ 和 $G_2=(V,E_2)$ 不同，当且仅当存在 $u,v\\in V$，使得 $(u,v)$ 只属于 $E_1$ 或 $E_2$。\n\n给定正整数 $n$，点集 $V=\\{1,2,\\ldots,n\\}$。\n\n由于答案可能很大，所以只需要输出答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n接下来描述 $T$ 组测试数据：\n\n每组测试数据只有一行两个整数 $n,k$，表示一次询问。$V=\\{1,2,\\ldots,n\\}$。\n", "outputFormat": "\n输出 $T$ 行，每行一个非负整数，表示答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "hint": "\n\n#### 样例解释\n\n- 第一组测试数据中，$n=3,k=1$。符合条件的图要么只有一条边，要么有两条边，且这两条边共用一个顶点。不难验证，原始答案为 $6$。\n- 第二组测试数据中，$n=5,k=4$。不难验证符合条件的图只有完全图。\n\n\n#### 数据范围\n\n\n- $1\\le T\\le 2^{14}$；\n- $1\\le n\\lt 2^{14}$；\n- $0\\le k\\lt n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 覆盖 / Pokrycia", "background": "译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Pokrycia [A] (POK)。\n", "description": "\n简单无向图 $G=(V,E)$ 的**点覆盖**是一个点集 $S\\subseteq V$，使得 $\\forall (u,v)\\in E$，都有 $u\\in S$ 或 $v\\in S$。点覆盖 $S$ 的**大小**定义为 $|S|$。\n\n给定点集 $V$ 和整数 $k$，求出有多少张以 $V$ 为点集的简单无向图 $G$ 的最小点覆盖大小为 $k$。\n\n两张图 $G_1=(V,E_1)$ 和 $G_2=(V,E_2)$ 不同，当且仅当存在 $u,v\\in V$，使得 $(u,v)$ 只属于 $E_1$ 或 $E_2$。\n\n给定正整数 $n$，点集 $V=\\{1,2,\\ldots,n\\}$。\n\n由于答案可能很大，所以只需要输出答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n接下来描述 $T$ 组测试数据：\n\n每组测试数据只有一行两个整数 $n,k$，表示一次询问。$V=\\{1,2,\\ldots,n\\}$。\n", "outputFormat": "\n输出 $T$ 行，每行一个非负整数，表示答案模 $\\textcolor{red}{\\textbf{2}}$ 后的余数。", "hint": "\n\n#### 样例解释\n\n- 第一组测试数据中，$n=3,k=1$。符合条件的图要么只有一条边，要么有两条边，且这两条边共用一个顶点。不难验证，原始答案为 $6$。\n- 第二组测试数据中，$n=5,k=4$。不难验证符合条件的图只有完全图。\n\n\n#### 数据范围\n\n\n- $1\\le T\\le 2^{14}$；\n- $1\\le n\\lt 2^{14}$；\n- $0\\le k\\lt n$。", "locale": "zh-CN"}}}
{"pid": "P11614", "type": "P", "difficulty": 6, "samples": [["3 2\n3 8 3\n2 5 2\n3 7 3", "TAK"], ["2 1\n0 1 1\n0 1 1", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "网络流", "图论建模", "PA（波兰）"], "title": "[PA 2016] 任务排序 /  Szeregowanie zadań", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Szeregowanie zadań [B] (SZE)。", "description": "\n有 $n$ 个任务，编号 $1\\sim n$。任务 $i$ 有三个参数 $p_i,c_i,k_i$，含义为：\n- 这个任务必须在时刻 $p_i$（或者 $p_i$ 之后）开始执行；\n- 这个任务需要 $c_i$ 单位时间；（意思是，它需要在处理器上运行的总时间为 $c_i$）\n- 这个任务必须在时刻 $k_i$（或者 $k_i$ 之前）完成。\n\n有 $m$ 个处理器用来执行任务。\n\n一个处理器同一时间只能处理一个任务，一个任务同一时间只能在一个处理器上被处理。每个任务可以在处理时被中断任意次，可以在任意时刻（不一定是整数时刻）被中断，在中断后可以分配给另一个处理器处理。\n\n是否存在一种策略可以满足所有要求？", "inputFormat": "\n第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，每行三个整数 $p_i,k_i,c_i$，描述一个任务。\n", "outputFormat": "如果存在，输出一行一个 $\\texttt{TAK}$；否则输出一行一个 $\\texttt{NIE}$。\n", "hint": "\n- $1\\le n,m\\le 100$；\n- $0\\le p_i\\lt k_i\\le 10^6$；\n- $1\\le c_i\\le k_i-p_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2016] 任务排序 /  Szeregowanie zadań", "background": "\n译自 [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R5 Szeregowanie zadań [B] (SZE)。", "description": "\n有 $n$ 个任务，编号 $1\\sim n$。任务 $i$ 有三个参数 $p_i,c_i,k_i$，含义为：\n- 这个任务必须在时刻 $p_i$（或者 $p_i$ 之后）开始执行；\n- 这个任务需要 $c_i$ 单位时间；（意思是，它需要在处理器上运行的总时间为 $c_i$）\n- 这个任务必须在时刻 $k_i$（或者 $k_i$ 之前）完成。\n\n有 $m$ 个处理器用来执行任务。\n\n一个处理器同一时间只能处理一个任务，一个任务同一时间只能在一个处理器上被处理。每个任务可以在处理时被中断任意次，可以在任意时刻（不一定是整数时刻）被中断，在中断后可以分配给另一个处理器处理。\n\n是否存在一种策略可以满足所有要求？", "inputFormat": "\n第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，每行三个整数 $p_i,k_i,c_i$，描述一个任务。\n", "outputFormat": "如果存在，输出一行一个 $\\texttt{TAK}$；否则输出一行一个 $\\texttt{NIE}$。\n", "hint": "\n- $1\\le n,m\\le 100$；\n- $0\\le p_i\\lt k_i\\le 10^6$；\n- $1\\le c_i\\le k_i-p_i$。", "locale": "zh-CN"}}}
{"pid": "P11615", "type": "P", "difficulty": 3, "samples": [["5\n0 4\n0 998244353\n1000000000000000000 20120712\n1000000000000000000 1000000000000000000\n1000000000000000000 998244353", "5000000000080482856"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["哈希表", "模板题"], "title": "【模板】哈希表", "background": "本题读入量较大，建议使用快速读入。\n\n```\nchar buf[1<<23],*p1=buf,*p2=buf;\n#define gc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\ninline unsigned long long rd() {//读入一个 64 位无符号整数\n\tunsigned long long x=0;\n\tchar ch=gc();\n\twhile(!isdigit(ch))ch=gc();\n\twhile(isdigit(ch)) x=x*10+(ch^48),ch=gc();\n\treturn x;\n}\n```", "description": "你需要维护一个映射 $f:[0,2^{64})\\to[0,2^{64})$，初始 $\\forall x\\in [0,2^{64}),f(x)=0$。\n\n有 $n$ 次操作，每次操作给出二元组 $(x,y)$，表示查询 $f(x)$ 的值，之后 $f(x)\\gets y$。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$ 描述一次操作。", "outputFormat": "为了减少输出量，设第 $i$ 次操作的答案为 $ans_i$，你只需要输出 $\\sum_{i=1}^ni\\times ans_i$ 对 $2^{64}$ 取模的结果。", "hint": "样例的 $ans$ 分别为：$0,4,0,20120712,1000000000000000000$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 5\\times 10^6,0\\le x,y<2^{64}$。\n\n| 子任务 | $n$ |\n| :----------: | :----------: |\n| $0$ | $\\le 10$ |\n| $1$ | $\\le 10^5$ |\n| $2$ | $\\le 10^6$ |\n| $3$ | $\\le 5\\times 10^6$ |\n| $4$ | $\\le 5\\times 10^6$ |\n\n子任务 $0\\sim 3$ 的数据生成方式较为随机，子任务 $4$ 是针对 `unordered_map`，`gp_hash_table`，`cc_hash_table` 和一些错误的哈希方式等的 hack。\n\n如果你认为你的代码复杂度正确却没有通过，记得使用快速读入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】哈希表", "background": "本题读入量较大，建议使用快速读入。\n\n```\nchar buf[1<<23],*p1=buf,*p2=buf;\n#define gc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\ninline unsigned long long rd() {//读入一个 64 位无符号整数\n\tunsigned long long x=0;\n\tchar ch=gc();\n\twhile(!isdigit(ch))ch=gc();\n\twhile(isdigit(ch)) x=x*10+(ch^48),ch=gc();\n\treturn x;\n}\n```", "description": "你需要维护一个映射 $f:[0,2^{64})\\to[0,2^{64})$，初始 $\\forall x\\in [0,2^{64}),f(x)=0$。\n\n有 $n$ 次操作，每次操作给出二元组 $(x,y)$，表示查询 $f(x)$ 的值，之后 $f(x)\\gets y$。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$ 描述一次操作。", "outputFormat": "为了减少输出量，设第 $i$ 次操作的答案为 $ans_i$，你只需要输出 $\\sum_{i=1}^ni\\times ans_i$ 对 $2^{64}$ 取模的结果。", "hint": "样例的 $ans$ 分别为：$0,4,0,20120712,1000000000000000000$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 5\\times 10^6,0\\le x,y<2^{64}$。\n\n| 子任务 | $n$ |\n| :----------: | :----------: |\n| $0$ | $\\le 10$ |\n| $1$ | $\\le 10^5$ |\n| $2$ | $\\le 10^6$ |\n| $3$ | $\\le 5\\times 10^6$ |\n| $4$ | $\\le 5\\times 10^6$ |\n\n子任务 $0\\sim 3$ 的数据生成方式较为随机，子任务 $4$ 是针对 `unordered_map`，`gp_hash_table`，`cc_hash_table` 和一些错误的哈希方式等的 hack。\n\n如果你认为你的代码复杂度正确却没有通过，记得使用快速读入。", "locale": "zh-CN"}}}
{"pid": "P11616", "type": "P", "difficulty": 4, "samples": [["2\n3 2\n2 3 1\n10 5\n7 10 9 23 1 6 7 8 9 20", "1\n29"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2025", "O2优化", "组合数学", "逆元", "洛谷比赛"], "title": "[PumpkinOI Round 1] 瓦解", "background": "> 时间把镜头带走 不假思索 回忆不放手", "description": "你手上有一个长为 $n$ 的数列 $a$。小 Q 想让你将其分成不超过 $m$ 段**非空**连续段，且每段内数字**严格单调递增**。现在小 Q 想知道一共有几种划分方案。由于方案数可能很大，你只需要告诉她方案数对 $998244353$ 取模的结果。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据格式如下：\n\n第一行包含两个整数 $n,m$，分别表示数列长度和段数要求。\n\n第二行包含 $n$ 个整数 $a_1,a_2\\dots a_n$。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n- 对于第一组数据，只有 $[2,3],[1]$ 这一种方案。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（10 pts）：$\\sum n\\le 10$。\n- Subtask 2（20 pts）：$\\sum n\\le 1000$。\n- Subtask 3（10 pts）：保证数列本身严格单调递增。\n- Subtask 4（30 pts）：$\\sum n\\le 10^6$。\n- Subtask 5（30 pts）：$\\sum n\\le 10^7$。\n\n对于所有数据，保证 $1\\le \\sum n\\le 10^7,1\\le m\\le n,1\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 瓦解", "background": "> 时间把镜头带走 不假思索 回忆不放手", "description": "你手上有一个长为 $n$ 的数列 $a$。小 Q 想让你将其分成不超过 $m$ 段**非空**连续段，且每段内数字**严格单调递增**。现在小 Q 想知道一共有几种划分方案。由于方案数可能很大，你只需要告诉她方案数对 $998244353$ 取模的结果。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个整数 $T$，表示测试数据的组数。\n\n接下来包含 $T$ 组数据，每组数据格式如下：\n\n第一行包含两个整数 $n,m$，分别表示数列长度和段数要求。\n\n第二行包含 $n$ 个整数 $a_1,a_2\\dots a_n$。", "outputFormat": "对于每组测试数据输出一行，包含一个整数，表示方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n- 对于第一组数据，只有 $[2,3],[1]$ 这一种方案。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（0 pts）：样例。\n- Subtask 1（10 pts）：$\\sum n\\le 10$。\n- Subtask 2（20 pts）：$\\sum n\\le 1000$。\n- Subtask 3（10 pts）：保证数列本身严格单调递增。\n- Subtask 4（30 pts）：$\\sum n\\le 10^6$。\n- Subtask 5（30 pts）：$\\sum n\\le 10^7$。\n\n对于所有数据，保证 $1\\le \\sum n\\le 10^7,1\\le m\\le n,1\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11617", "type": "P", "difficulty": 4, "samples": [["1\n1\n1 499122176\n", "2\n"], ["2\n1 1\n1 199648870 99824435\n", "14"], ["1\n1\n1 499122177\n", "665496236\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "2025", "Special Judge", "O2优化", "生成函数", "Ad-hoc", "洛谷比赛"], "title": "[PumpkinOI Round 1] 递推", "background": ">一个简单的问题，什么是递推？", "description": "定义一个数列 $\\{a_0 \\dots a_{n - 1} \\}$ 的递推式为满足下式的序列 $\\{r_0\\dots r_m\\}$：\n\n$$\\sum_{j = 0} ^ m r_j a_{i - j} = 0, \\forall i \\ge m$$\n\n$m$ 称为该递推式的阶数。特别地，$r_0\\neq 0$。\n\n给你一个无限长的数列 $\\{a_i\\}$ 的前 $n$ 项以及数列 $\\{a_i\\}$ 的一个阶数为 $n$ 的递推式 $\\{b_i\\}$。\n\n要求求出数列 $\\{a_i\\}$ 的所有项之和。答案对 $998244353$ 取模。\n\n可以证明，对于任意一个模 $998244353$ 意义下输入，都存在实数意义下的一个对应数列的答案是收敛的。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_i\\}$ 的前 $n$ 项即 $\\{a_0 \\dots a_{n-1}\\}$ 在模 $998244353$ 意义下的值。\n\n第三行输入 $n+1$ 个整数，表示递推式 $\\{b_0\\dots b_n\\}$ 在模 $998244353$ 意义下的值。", "outputFormat": "输出一行一个整数，表示数列 $\\{a_i\\}$ 的所有项之和对 $998244353$ 取模的结果。\n\n保证答案可以在模 $998244353$ 意义下表示，即如果最终的答案为分数 $\\frac qp$（可以证明答案肯定是一个有理数），保证 $p\\not\\equiv0\\pmod {998244353}$。", "hint": "**样例解释 #1**\n\n$499122176\\equiv -\\frac12\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-\\frac12\\times a_{i-1}=0$ 即 $a_i=\\frac12\\times a_{i-1}$，即数列 $\\{a_i\\}$ 是等比数列 $1,\\frac12,\\frac14,\\dots$。其和收敛于 $2$。\n\n**样例解释 #2**\n\n$199648870\\equiv -0.6\\pmod {998244353},99824435\\equiv -0.3\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-0.6\\times a_{i-1}-0.3\\times a_{i-2}=0$ 即 $a_i=0.6\\times a_{i-1}+0.3\\times a_{i-2}$。经计算，其和收敛于 $14$。\n\n**本题使用子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n\\le5\\times 10^3$， $0\\le a_i,b_i< 998244353$。特别地，$b_0\\neq 0$。\n\n| 子任务编号 | 分值 | $n\\le$ | 依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $30$ | $1$ | 无 |\n| $2$ | $30$ | $2$ | $1$ |\n| $3$ | $40$ | $5\\times 10^3$ | $1,2$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 递推", "background": ">一个简单的问题，什么是递推？", "description": "定义一个数列 $\\{a_0 \\dots a_{n - 1} \\}$ 的递推式为满足下式的序列 $\\{r_0\\dots r_m\\}$：\n\n$$\\sum_{j = 0} ^ m r_j a_{i - j} = 0, \\forall i \\ge m$$\n\n$m$ 称为该递推式的阶数。特别地，$r_0\\neq 0$。\n\n给你一个无限长的数列 $\\{a_i\\}$ 的前 $n$ 项以及数列 $\\{a_i\\}$ 的一个阶数为 $n$ 的递推式 $\\{b_i\\}$。\n\n要求求出数列 $\\{a_i\\}$ 的所有项之和。答案对 $998244353$ 取模。\n\n可以证明，对于任意一个模 $998244353$ 意义下输入，都存在实数意义下的一个对应数列的答案是收敛的。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_i\\}$ 的前 $n$ 项即 $\\{a_0 \\dots a_{n-1}\\}$ 在模 $998244353$ 意义下的值。\n\n第三行输入 $n+1$ 个整数，表示递推式 $\\{b_0\\dots b_n\\}$ 在模 $998244353$ 意义下的值。", "outputFormat": "输出一行一个整数，表示数列 $\\{a_i\\}$ 的所有项之和对 $998244353$ 取模的结果。\n\n保证答案可以在模 $998244353$ 意义下表示，即如果最终的答案为分数 $\\frac qp$（可以证明答案肯定是一个有理数），保证 $p\\not\\equiv0\\pmod {998244353}$。", "hint": "**样例解释 #1**\n\n$499122176\\equiv -\\frac12\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-\\frac12\\times a_{i-1}=0$ 即 $a_i=\\frac12\\times a_{i-1}$，即数列 $\\{a_i\\}$ 是等比数列 $1,\\frac12,\\frac14,\\dots$。其和收敛于 $2$。\n\n**样例解释 #2**\n\n$199648870\\equiv -0.6\\pmod {998244353},99824435\\equiv -0.3\\pmod {998244353}$。\n\n$\\forall i\\ge n,a_i-0.6\\times a_{i-1}-0.3\\times a_{i-2}=0$ 即 $a_i=0.6\\times a_{i-1}+0.3\\times a_{i-2}$。经计算，其和收敛于 $14$。\n\n**本题使用子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n\\le5\\times 10^3$， $0\\le a_i,b_i< 998244353$。特别地，$b_0\\neq 0$。\n\n| 子任务编号 | 分值 | $n\\le$ | 依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $30$ | $1$ | 无 |\n| $2$ | $30$ | $2$ | $1$ |\n| $3$ | $40$ | $5\\times 10^3$ | $1,2$ |\n", "locale": "zh-CN"}}}
{"pid": "P11618", "type": "P", "difficulty": 6, "samples": [["3\n1 3\n2 3", "1"], ["5\n5 3\n2 3\n1 4\n4 3", "83187030"], ["5\n1 3\n4 1\n2 4\n3 5", "332748118"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "O2优化", "树形 DP", "哈希 hashing", "洛谷比赛"], "title": "[PumpkinOI Round 1] 造树据", "background": "> 拍上了，舒服。", "description": "小 P 正在造数据对拍，可是他拍了 $114514$ 组都没有拍出来。他去请教大佬，但被大佬 D 了，他被告知他随机生成树的期望高度是 $O(\\log n)$ 的，强度不够。\n\n小 P 很难过，以至于无法思考。所以他想请问你，对于他给出的任意一棵**无根树**，以他的随机生成方式，生成出与其形态相同的树即与其**同构**的树的概率。\n\n小 P 随机生成一棵**无根树**的方式为：\n\n- 对于 $2\\le i\\le n$ 的结点，等概率向 $[1,i-1]$ 中连一条边 ", "inputFormat": "第一行输入一个正整数 $n$。\n\n接下来 $2$ 至 $n$ 行，每行输入两个正整数 $u,v$，表示在 $u$ 和 $v$ 之间连一条边。\n\n保证输入的数据是一棵树。", "outputFormat": "输出一行一个非负整数，表示概率对 $998244353$ 取模的值。", "hint": "**本题采用子任务捆绑/依赖**\n\n对于 $10\\%$ 的数据，保证 $2\\le n\\le 10$。\n\n对于 $30\\%$ 的数据，保证 $2\\le n\\le 20$。\n\n对于 $50\\%$ 的数据，保证 $2\\le n\\le 10^3$。\n\n对于另外 $10\\%$ 的数据，保证给出的是一条链。\n\n对于另外 $10\\%$ 的数据，保证给出的树按照题面中小 P 随机生成树的方式生成。\n\n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 造树据", "background": "> 拍上了，舒服。", "description": "小 P 正在造数据对拍，可是他拍了 $114514$ 组都没有拍出来。他去请教大佬，但被大佬 D 了，他被告知他随机生成树的期望高度是 $O(\\log n)$ 的，强度不够。\n\n小 P 很难过，以至于无法思考。所以他想请问你，对于他给出的任意一棵**无根树**，以他的随机生成方式，生成出与其形态相同的树即与其**同构**的树的概率。\n\n小 P 随机生成一棵**无根树**的方式为：\n\n- 对于 $2\\le i\\le n$ 的结点，等概率向 $[1,i-1]$ 中连一条边 ", "inputFormat": "第一行输入一个正整数 $n$。\n\n接下来 $2$ 至 $n$ 行，每行输入两个正整数 $u,v$，表示在 $u$ 和 $v$ 之间连一条边。\n\n保证输入的数据是一棵树。", "outputFormat": "输出一行一个非负整数，表示概率对 $998244353$ 取模的值。", "hint": "**本题采用子任务捆绑/依赖**\n\n对于 $10\\%$ 的数据，保证 $2\\le n\\le 10$。\n\n对于 $30\\%$ 的数据，保证 $2\\le n\\le 20$。\n\n对于 $50\\%$ 的数据，保证 $2\\le n\\le 10^3$。\n\n对于另外 $10\\%$ 的数据，保证给出的是一条链。\n\n对于另外 $10\\%$ 的数据，保证给出的树按照题面中小 P 随机生成树的方式生成。\n\n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P11619", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 4\n1 3 5\n2 1\n", "Yes\nNo\nYes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2025", "Special Judge", "O2优化", "洛谷比赛", "线段树分治"], "title": "[PumpkinOI Round 1] 种南瓜", "background": "> 秋天到了，又到了收获的季节。", "description": "小 P 要在一段长度为 $n$ 的土地上种魔法南瓜，但是魔法南瓜十分珍贵并且种植它还需要特殊的地质。\n\n所以他对土地进行了 $q$ 次勘测，第 $i$ 次勘测是如下两种结果之一：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是之前未被删除的第一种勘测结果）。\n\n魔法南瓜对于地质的要求十分严苛，必须满足对于任意两个区间，它们的关系只能为包含、被包含或不相交。否则，就会因为元素混乱而无法种植魔法南瓜。\n\n请在每次勘测后给出这片土地是否能种植魔法南瓜。\n\n以上的 $[l,r]$ 指的是 $l$ 地块到 $r$ 地块的所有地块。\n\n**形式化题意：**\n\n给你一个标号为 $1 \\dots n$ 的数轴，有 $q$ 次操作：\n\n`1 l r` : 表示在数轴 $l$ 放置左括号，$r$ 放置右括号。\n\n`2 x` : 表示删除第 $x$ 次操作放置的括号。\n\n每次操作后，问能否从数轴 $1$ 到 $n$ 的位置依次取出括号（同一位置的括号应先取出左括号再取出右括号，同种括号可以任意顺序取出）形成一个序列。要求这是一个括号序列，并且该括号序列中任意一对匹配的括号对应该是在同一次操作中放置的。", "inputFormat": "第一行输入两个整数 $n,q$。\n\n接下来 $q$ 行表示有 $q$ 次操作，操作的类型有 $2$ 种，每种操作的输入格式如下：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是第一种勘测结果）。", "outputFormat": "对于每次询问，如果可以种植魔法南瓜则输出一行 `YES` ，否则输出一行 `NO` 。\n\n输出的结果大小写不敏感，例如，`yEs`、`Yes`、`yes`、`YES` 都视作肯定的回答。", "hint": "**本题开启子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n,q\\le 2\\times10^5$，$1\\le op\\le 2$，$1\\le l_i\\le r_i\\le n$，$1\\le x_i< q$。（$x_i$ 次操作是之前未被删除的操作 $1$)\n\n| 子任务编号 | 分值 |$n\\le$ | $q\\le$ | 依赖 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ |$10$ | $10$ | 无 | 无 |\n| $2$ | $10$ |$500$ | $500$ | $1$ | 无 |\n| $3$ | $4$ |$2\\times10^3$ | $2\\times10^3$ | $2$ | 无 |\n| $4$ | $20$ |$2\\times10^5$ | $2\\times10^3$ | $3$ | 无 |\n| $5$ | $20$ |$5\\times10^4$ | $5\\times10^4$ | $3$ | 无 |\n| $6$ | $15$ |$2\\times10^5$ | $2\\times10^3$ | 无 | 所有区间都相交 |\n| $7$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $6$ | 所有区间都相交 |\n| $8$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $4,5,7$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PumpkinOI Round 1] 种南瓜", "background": "> 秋天到了，又到了收获的季节。", "description": "小 P 要在一段长度为 $n$ 的土地上种魔法南瓜，但是魔法南瓜十分珍贵并且种植它还需要特殊的地质。\n\n所以他对土地进行了 $q$ 次勘测，第 $i$ 次勘测是如下两种结果之一：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是之前未被删除的第一种勘测结果）。\n\n魔法南瓜对于地质的要求十分严苛，必须满足对于任意两个区间，它们的关系只能为包含、被包含或不相交。否则，就会因为元素混乱而无法种植魔法南瓜。\n\n请在每次勘测后给出这片土地是否能种植魔法南瓜。\n\n以上的 $[l,r]$ 指的是 $l$ 地块到 $r$ 地块的所有地块。\n\n**形式化题意：**\n\n给你一个标号为 $1 \\dots n$ 的数轴，有 $q$ 次操作：\n\n`1 l r` : 表示在数轴 $l$ 放置左括号，$r$ 放置右括号。\n\n`2 x` : 表示删除第 $x$ 次操作放置的括号。\n\n每次操作后，问能否从数轴 $1$ 到 $n$ 的位置依次取出括号（同一位置的括号应先取出左括号再取出右括号，同种括号可以任意顺序取出）形成一个序列。要求这是一个括号序列，并且该括号序列中任意一对匹配的括号对应该是在同一次操作中放置的。", "inputFormat": "第一行输入两个整数 $n,q$。\n\n接下来 $q$ 行表示有 $q$ 次操作，操作的类型有 $2$ 种，每种操作的输入格式如下：\n\n`1 l r` : 表示他发现 $[l,r]$ 的土地含有一种全新的元素。\n\n`2 x` : 他发现之前的第 $x$ 次勘测是错误的，所以会删除第 $x$ 次的勘测结果（保证第 $x$ 次操作是第一种勘测结果）。", "outputFormat": "对于每次询问，如果可以种植魔法南瓜则输出一行 `YES` ，否则输出一行 `NO` 。\n\n输出的结果大小写不敏感，例如，`yEs`、`Yes`、`yes`、`YES` 都视作肯定的回答。", "hint": "**本题开启子任务捆绑/依赖**\n\n对于所有子任务，$1\\le n,q\\le 2\\times10^5$，$1\\le op\\le 2$，$1\\le l_i\\le r_i\\le n$，$1\\le x_i< q$。（$x_i$ 次操作是之前未被删除的操作 $1$)\n\n| 子任务编号 | 分值 |$n\\le$ | $q\\le$ | 依赖 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ |$10$ | $10$ | 无 | 无 |\n| $2$ | $10$ |$500$ | $500$ | $1$ | 无 |\n| $3$ | $4$ |$2\\times10^3$ | $2\\times10^3$ | $2$ | 无 |\n| $4$ | $20$ |$2\\times10^5$ | $2\\times10^3$ | $3$ | 无 |\n| $5$ | $20$ |$5\\times10^4$ | $5\\times10^4$ | $3$ | 无 |\n| $6$ | $15$ |$2\\times10^5$ | $2\\times10^3$ | 无 | 所有区间都相交 |\n| $7$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $6$ | 所有区间都相交 |\n| $8$ | $15$ |$2\\times10^5$ | $2\\times10^5$ | $4,5,7$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11620", "type": "P", "difficulty": 6, "samples": [["4 5\n1 14 51 4\n2 1 3 0\n1 2 3 3\n2 1 4 10\n1 1 4 514\n2 3 4 2", "61\n63\n560"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2025] TEST_34", "background": "", "description": "给你一个长度为 n 的整数序列 $a_1$, $a_2$, $\\ldots$, $a_n$ ，你需要实现以下两种操作，每个操作都可以用四个整数 $opt\\;l\\;r\\;v$ 来表示：\n\n$opt=1$ 时，代表把一个区间 $[l,r]$ 内的所有数都 xor 上 $v$。\n\n$opt=2$ 时， 查询一个区间  $[l,r]$ 内选任意个数（包括 $0$ 个）数 xor 起来，这个值与 $v$ 的最大 xor 和是多少。", "inputFormat": "第一行有两个正整数 $n,m$。\n第二行有 $n$ 个整数表示给你的序列。 \n之后 $m$ 行每行有四个整数 $opt, l, r, v$表示一个操作。", "outputFormat": "对于每个 $opt=2$ 的操作，输出一行一个数表示答案~", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1 \\le n , m \\le 5 \\times 10^4$，值域在 $[0,10^9]$ 之间", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2025] TEST_34", "background": "", "description": "You are given an integer sequence of length $n$: $a_1$, $a_2$, $\\ldots$, $a_n$. You need to support the following two operations. Each operation can be represented by four integers $opt\\;l\\;r\\;v$:\n\nWhen $opt=1$, it means to xor every number in the interval $[l,r]$ with $v$.\n\nWhen $opt=2$, query the maximum xor value between $v$ and the xor of any chosen numbers (including choosing $0$ numbers) within the interval $[l,r]$.", "inputFormat": "The first line contains two positive integers $n, m$.\nThe second line contains $n$ integers representing the sequence.\nThen there are $m$ lines, each containing four integers $opt, l, r, v$, describing an operation.", "outputFormat": "For each operation with $opt=2$, output one line with one integer representing the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477.\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 5 \\times 10^4$, and the values are in $[0,10^9]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2025] TEST_34", "background": "", "description": "给你一个长度为 n 的整数序列 $a_1$, $a_2$, $\\ldots$, $a_n$ ，你需要实现以下两种操作，每个操作都可以用四个整数 $opt\\;l\\;r\\;v$ 来表示：\n\n$opt=1$ 时，代表把一个区间 $[l,r]$ 内的所有数都 xor 上 $v$。\n\n$opt=2$ 时， 查询一个区间  $[l,r]$ 内选任意个数（包括 $0$ 个）数 xor 起来，这个值与 $v$ 的最大 xor 和是多少。", "inputFormat": "第一行有两个正整数 $n,m$。\n第二行有 $n$ 个整数表示给你的序列。 \n之后 $m$ 行每行有四个整数 $opt, l, r, v$表示一个操作。", "outputFormat": "对于每个 $opt=2$ 的操作，输出一行一个数表示答案~", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1 \\le n , m \\le 5 \\times 10^4$，值域在 $[0,10^9]$ 之间", "locale": "zh-CN"}}}
{"pid": "P11621", "type": "P", "difficulty": 6, "samples": [["8\n1 8 10 2 2\n2 1 5 3 4\n1 8 5 7 10\n1 1 5 4 10\n1 4 2 1 1\n1 8 5 8 9\n2 2 6 2 9\n1 8 9 2 3", "0\n61"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2025] TEST_139", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 0，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $X\\ge x,\\;Y\\ge y,\\;X+Y<x+y+d$ 的整点 $(X,Y)$ 的点权增加 $w$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $m,x_1,x_2,y_1,y_2,x,y,d,w\\le 50$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 2000$。\n\n对于另外 $25\\%$ 的数据，满足修改操作在所有查询操作之前。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2025] TEST_139", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 0，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $X\\ge x,\\;Y\\ge y,\\;X+Y<x+y+d$ 的整点 $(X,Y)$ 的点权增加 $w$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $m,x_1,x_2,y_1,y_2,x,y,d,w\\le 50$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 2000$。\n\n对于另外 $25\\%$ 的数据，满足修改操作在所有查询操作之前。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。", "locale": "zh-CN"}}}
{"pid": "P11622", "type": "P", "difficulty": 6, "samples": [["10 6\n1 4 6 2 10 -3 1 0 13 4\n2 1 10\n0 5 10\n5 1 10\n0 4 8\n-2 6 9\n7 2 9", "7\n10\n8\n8\n11\n7"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2025] TEST_176", "background": "", "description": "你有一个长度为 $n$ 的序列，其中第 $i$ 个元素的值为 $a_i$。\n\n现在有 $q$ 组询问，每组询问给定 $x,l,r$，表示你刚开始有一个数字 $x$ ，然后你从序列的第 $l$ 个位置走到第 $r$ 个位置，每经过一个位置就执行 $x=\\max(x,a_i-x)$。你需要回答每组询问最后 $x$ 的值。", "inputFormat": "第一行两个整数 $n$ 和 $q$，分别表示序列长以及询问数量。\n\n第二行包含 $n$ 个整数，其中第 $i$ 个整数表示序列第 $i$ 个元素的值 $a_i$。\n\n接下来 $q$ 行，每行三个整数 $x,l,r$，含义如题目描述中所示。", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "### 样例解释\n\n对于第一组询问，$x$ 的值为 $2(初始)→2→2→4→4→6→6→6→6→7→7(最终)$。\n\nIdea：zx2003，Solution：zx2003，Code：zx2003，Data：zx2003\n\n### 限制与约定\n\n对于所有数据，保证 $ 1\\leq n,q\\leq 2\\times 10^5,1\\leq l \\leq r \\leq n，0\\leq |x|,|a_i|\\leq 10^{13}$。\n\n\n| 子任务编号 |   $n,q\\leq$   |           特殊性质            | 子任务分值 |\n| :--------: | :-----------: | :---------------------------: | :--------: |\n|    $1$     |    $1000$     |              无               |    $8$     |\n|    $2$     |    $80000$    |      $-500\\leq x,a_i\\leq 500$      |    $16$    |\n|    $3$     | $2\\times10^5$ | $10^6\\leq x,a_i\\leq 10^6$ 且 $l=1$ |    $25$    |\n|    $4$     | $2\\times10^5$ |             $l=1$             |    $24$    |\n|    $5$     | $2\\times10^5$ |              无               |    $27$    |\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2025] TEST_176", "background": "", "description": "你有一个长度为 $n$ 的序列，其中第 $i$ 个元素的值为 $a_i$。\n\n现在有 $q$ 组询问，每组询问给定 $x,l,r$，表示你刚开始有一个数字 $x$ ，然后你从序列的第 $l$ 个位置走到第 $r$ 个位置，每经过一个位置就执行 $x=\\max(x,a_i-x)$。你需要回答每组询问最后 $x$ 的值。", "inputFormat": "第一行两个整数 $n$ 和 $q$，分别表示序列长以及询问数量。\n\n第二行包含 $n$ 个整数，其中第 $i$ 个整数表示序列第 $i$ 个元素的值 $a_i$。\n\n接下来 $q$ 行，每行三个整数 $x,l,r$，含义如题目描述中所示。", "outputFormat": "输出 $q$ 行，每行一个整数，其中第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "### 样例解释\n\n对于第一组询问，$x$ 的值为 $2(初始)→2→2→4→4→6→6→6→6→7→7(最终)$。\n\nIdea：zx2003，Solution：zx2003，Code：zx2003，Data：zx2003\n\n### 限制与约定\n\n对于所有数据，保证 $ 1\\leq n,q\\leq 2\\times 10^5,1\\leq l \\leq r \\leq n，0\\leq |x|,|a_i|\\leq 10^{13}$。\n\n\n| 子任务编号 |   $n,q\\leq$   |           特殊性质            | 子任务分值 |\n| :--------: | :-----------: | :---------------------------: | :--------: |\n|    $1$     |    $1000$     |              无               |    $8$     |\n|    $2$     |    $80000$    |      $-500\\leq x,a_i\\leq 500$      |    $16$    |\n|    $3$     | $2\\times10^5$ | $10^6\\leq x,a_i\\leq 10^6$ 且 $l=1$ |    $25$    |\n|    $4$     | $2\\times10^5$ |             $l=1$             |    $24$    |\n|    $5$     | $2\\times10^5$ |              无               |    $27$    |\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11624", "type": "P", "difficulty": 3, "samples": [["1\n1", "1"], ["5\n1 1 1 2 2", "21"], ["10\n1 1 1 2 2 3 3 3 4 4", "78"], ["20\n1 1 2 2 2 2 2 4 4 4 4 3 3 3 4 4 7 7 9 10", "190"], ["50\n1 1 1 1 1 1 1 1 1 2 2 3 4 3 3 4 5 7 2 4 4 3 2 4 6 9 3 8 7 6 12 13 2 12 5 28 17 27 20 36 5 3 2 8 7 6 5 47 26 1", "2336"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树的遍历"], "title": "[迷宫寻路 Round 3] 挂掉的模板", "background": "**upd : [2025/1/27] Hack 数据已添加。**\n\n某人把 LCA 板子写挂了，然后就有了这道题。", "description": "有一颗 $n$ 个节点的有根树。\n\n定义 `FakeLCA` 函数代码如下：\n\n```cpp\nint FakeLCA(int u, int v) {\n\twhile (u != v) u = fa[u], v = fa[v];\n\treturn u;\n}\n```\n\n其中 `fa[i]` 表示节点 $i$ 的父节点，**特别的，根的父节点是根本身。**\n\n现在给定节点数 $n$ 和每个节点的父节点，问有多少个有序数对 $(u,v)$，满足 $1\\le u,v\\le n$ 且 `FakeLCA(u, v)` 的结果是 $u$ 和 $v$ 的真正的最近公共祖先。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的父节点。", "outputFormat": "一行一个数表示答案。", "hint": "**提示：请仔细阅读题目中关于根的说明，根节点不一定是 1 号点！**\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^6$。\n\n| 子任务编号 | $n\\leq$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $100$ | $25$ |\n| $1$ | $1000$ | $25$ |\n| $2$ | $7000$ | $25$ |\n| $3$ | $10^6$ | $25$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 挂掉的模板", "background": "**upd : [2025/1/27] Hack 数据已添加。**\n\n某人把 LCA 板子写挂了，然后就有了这道题。", "description": "有一颗 $n$ 个节点的有根树。\n\n定义 `FakeLCA` 函数代码如下：\n\n```cpp\nint FakeLCA(int u, int v) {\n\twhile (u != v) u = fa[u], v = fa[v];\n\treturn u;\n}\n```\n\n其中 `fa[i]` 表示节点 $i$ 的父节点，**特别的，根的父节点是根本身。**\n\n现在给定节点数 $n$ 和每个节点的父节点，问有多少个有序数对 $(u,v)$，满足 $1\\le u,v\\le n$ 且 `FakeLCA(u, v)` 的结果是 $u$ 和 $v$ 的真正的最近公共祖先。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的父节点。", "outputFormat": "一行一个数表示答案。", "hint": "**提示：请仔细阅读题目中关于根的说明，根节点不一定是 1 号点！**\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^6$。\n\n| 子任务编号 | $n\\leq$ | 分数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $100$ | $25$ |\n| $1$ | $1000$ | $25$ |\n| $2$ | $7000$ | $25$ |\n| $3$ | $10^6$ | $25$ |", "locale": "zh-CN"}}}
{"pid": "P11625", "type": "P", "difficulty": 5, "samples": [["5 1 2\n1 4 2 3 5\n3\n1 5\n1 3\n2 4\n", "6\n2\n2\n"], ["10 2 4\n1 9 2 5 7 3 6 10 4 8\n10\n1 3\n2 4\n3 5\n4 9\n1 10\n2 9\n5 7\n6 9\n2 6\n7 7\n", "0\n1\n0\n7\n17\n12\n1\n2\n4\n0\n"], ["25 3 39\n20 19 18 17 16 15 18 14 13 12 11 19 17 10 9 8 7 9 6 8 5 4 6 7 3\n20\n17 18\n1 10\n20 25\n4 9\n13 15\n6 21\n3 7\n12 17\n18 21\n3 12\n5 17\n3 4\n8 18\n17 22\n19 21\n2 23\n14 22\n13 20\n18 25\n11 20\n", "0\n33\n6\n8\n1\n76\n5\n10\n1\n33\n55\n0\n40\n7\n0\n123\n24\n18\n15\n32\n"], ["25 40 1000\n20 19 18 17 16 15 18 14 13 12 11 19 17 10 9 8 7 9 6 8 5 4 6 7 3\n20\n17 18\n1 10\n20 25\n4 9\n13 15\n6 21\n3 7\n12 17\n18 21\n3 12\n5 17\n3 4\n8 18\n17 22\n19 21\n2 23\n14 22\n13 20\n18 25\n11 20\n", "0\n1\n0\n0\n0\n21\n0\n0\n0\n0\n6\n0\n1\n0\n0\n77\n0\n0\n0\n0\n"], ["5 1 1\n1 2 3 4 5\n3\n1 3\n2 4\n3 5", "0\n0\n0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "树状数组", "O2优化", "前缀和", "扫描线"], "title": "[迷宫寻路 Round 3] 迷宫寻路大赛", "background": "", "description": "给定参数 $c,d$ 和一个长度为 $n$ 的序列 $\\{a\\}$。有 $q$ 个区间，对于每个区间 $[l,r]$，求出 $\\sum\\limits_{x=l}^{r} \\sum\\limits_{y=x}^r [c\\le (\\sum\\limits_{i=x}^{y} \\sum\\limits_{j=i+1}^{y} [a_i>a_j])\\le d]$。\n\n注意区别以上两种中括号：\n\n1. $[l,r]$ 代表一个区间。\n2. $[p]$ 为艾弗森括号，其中 $p$ 是一个仅有真假两种取值的表达式。若 $p$ 为真，则 $[p]=1$，否则 $[p]=0$。\n\n通俗的讲，对于每个区间 $[l,r]$，求出区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "inputFormat": "第一行包含三个正整数 $n,c,d$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数表示序列第 $i$ 项 $a_i$。\n\n第三行一个整数 $q$，表示区间个数。\n\n接下来的 $q$ 行，第 $i$ 行包含两个正整数 $l_i,r_i$，表示第 $i$ 个区间。\n\n\n", "outputFormat": "输出 $q$ 行，第 $i$ 行表示对于第 $i$ 个区间，这个区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n,q,a_i\\le 5\\times 10^5$，$1\\le c,d\\le 10^{12}$，对于每个 $1\\le i\\le q$，满足 $1\\le l_i\\le r_i\\le n$。\n\n| 子任务编号 | $n\\leq$ | $q\\leq$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $10$ | $5$ |\n| $1$ | $100$ | $100$ | $10$ |\n| $2$ | $1000$ | $1000$ | $10$ |\n| $3$ | $5000$ | $5000$ | $15$ |\n| $4$ | $50000$ | $50000$ | $25$ |\n| $5$ | $5\\times 10^5$ | $5\\times 10^5$ | $35$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 迷宫寻路大赛", "background": "", "description": "给定参数 $c,d$ 和一个长度为 $n$ 的序列 $\\{a\\}$。有 $q$ 个区间，对于每个区间 $[l,r]$，求出 $\\sum\\limits_{x=l}^{r} \\sum\\limits_{y=x}^r [c\\le (\\sum\\limits_{i=x}^{y} \\sum\\limits_{j=i+1}^{y} [a_i>a_j])\\le d]$。\n\n注意区别以上两种中括号：\n\n1. $[l,r]$ 代表一个区间。\n2. $[p]$ 为艾弗森括号，其中 $p$ 是一个仅有真假两种取值的表达式。若 $p$ 为真，则 $[p]=1$，否则 $[p]=0$。\n\n通俗的讲，对于每个区间 $[l,r]$，求出区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "inputFormat": "第一行包含三个正整数 $n,c,d$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数表示序列第 $i$ 项 $a_i$。\n\n第三行一个整数 $q$，表示区间个数。\n\n接下来的 $q$ 行，第 $i$ 行包含两个正整数 $l_i,r_i$，表示第 $i$ 个区间。\n\n\n", "outputFormat": "输出 $q$ 行，第 $i$ 行表示对于第 $i$ 个区间，这个区间内有多少非空子区间的逆序对个数在 $c$ 到 $d$ 之间（含 $c$ 和 $d$）。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n,q,a_i\\le 5\\times 10^5$，$1\\le c,d\\le 10^{12}$，对于每个 $1\\le i\\le q$，满足 $1\\le l_i\\le r_i\\le n$。\n\n| 子任务编号 | $n\\leq$ | $q\\leq$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $10$ | $5$ |\n| $1$ | $100$ | $100$ | $10$ |\n| $2$ | $1000$ | $1000$ | $10$ |\n| $3$ | $5000$ | $5000$ | $15$ |\n| $4$ | $50000$ | $50000$ | $25$ |\n| $5$ | $5\\times 10^5$ | $5\\times 10^5$ | $35$ |\n", "locale": "zh-CN"}}}
{"pid": "P11626", "type": "P", "difficulty": 5, "samples": [["7\n3 4 2 5 6 3 4\n", "27\n"], ["10\n9 9 9 8 8 8 72 72 72 2\n", "20040"], ["20\n3 5 5 5 7 15 20 14 28 9 36 3 4 5 7 19 16 28 37 29\n", "3207876\n"], ["30\n1 9 8 8 8 3 3 4 2 2 3 3 9 8 8 6 6 7 3 3 6 6 8 8 4 3 3 6 6 8", "34595704"], ["50\n9 9 9 9 63 72 36 36 4 4 4 20 20 20 10 10 70 2 12 9 9 9 9 63 72 36 36 4 4 4 20 20 20 10 10 70 2 12 9 9 9 9 63 72 36 36 4 4 4 4", "24688627"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "二分", "O2优化", "最大公约数 gcd", "ST 表"], "title": "[迷宫寻路 Round 3] 七连击", "background": "**任何数和 $0$ 的最大公约数是它本身。**", "description": "小 X 正在研究一个长度为 $n$ 的数列 $\\{A\\}$，他通过查阅资料，偶然间发现了一个叫做“七连击”的式子：$\\sum\\limits_{a=1}^n\\sum\\limits_{b=a+1}^n\\sum\\limits_{c=b+1}^n\\sum\\limits_{d=c+1}^n\\sum\\limits_{e=d+1}^n\\sum\\limits_{f=e+1}^n\\sum\\limits_{g=f+1}^n ((\\gcd\\limits_{i=1}^aA_i)+(\\gcd\\limits_{i=a+1}^bA_i)+(\\gcd\\limits_{i=b+1}^cA_i)+(\\gcd\\limits_{i=c+1}^dA_i)+(\\gcd\\limits_{i=d+1}^eA_i)+(\\gcd\\limits_{i=e+1}^fA_i)+(\\gcd\\limits_{i=f+1}^gA_i))$。\n\n其中 $(\\gcd\\limits_{i=l}^r A_i)$ 表示 $A_l,A_{l+1},\\dots,A_r$ 的最大公约数。\n\n现在小 X 希望你求出这个式子的值。\n由于答案可能很大，他只需要你输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数表示序列 $\\{A\\}$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$7\\le n\\le 10^5$，$0\\le A_i\\le 10^9$。\n\n| 子任务编号 | $n\\leq$ | $A_i\\leq$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $7$ | $10^9$ | 否 | $1$ |\n| $1$ | $10$ | $10^9$ | 否 | $9$ |\n| $2$ | $100$ | $10^9$ | 否 | $10$ |\n| $3$ | $1000$ | $10^9$ | 否 | $20$ |\n| $4$ | $10^5$ | $100$ | 否 | $10$ |\n| $5$ | $10^5$ | $10^9$ | 是 | $10$ |\n| $6$ | $10^5$ | $10^9$ | 否 | $40$ |\n\n特殊性质： 对于任意满足 $1\\le i\\le n$ 的整数 $i$，$A_i$ 在 $[0,10^9]$ 中随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 七连击", "background": "**任何数和 $0$ 的最大公约数是它本身。**", "description": "小 X 正在研究一个长度为 $n$ 的数列 $\\{A\\}$，他通过查阅资料，偶然间发现了一个叫做“七连击”的式子：$\\sum\\limits_{a=1}^n\\sum\\limits_{b=a+1}^n\\sum\\limits_{c=b+1}^n\\sum\\limits_{d=c+1}^n\\sum\\limits_{e=d+1}^n\\sum\\limits_{f=e+1}^n\\sum\\limits_{g=f+1}^n ((\\gcd\\limits_{i=1}^aA_i)+(\\gcd\\limits_{i=a+1}^bA_i)+(\\gcd\\limits_{i=b+1}^cA_i)+(\\gcd\\limits_{i=c+1}^dA_i)+(\\gcd\\limits_{i=d+1}^eA_i)+(\\gcd\\limits_{i=e+1}^fA_i)+(\\gcd\\limits_{i=f+1}^gA_i))$。\n\n其中 $(\\gcd\\limits_{i=l}^r A_i)$ 表示 $A_l,A_{l+1},\\dots,A_r$ 的最大公约数。\n\n现在小 X 希望你求出这个式子的值。\n由于答案可能很大，他只需要你输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数表示序列 $\\{A\\}$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$7\\le n\\le 10^5$，$0\\le A_i\\le 10^9$。\n\n| 子任务编号 | $n\\leq$ | $A_i\\leq$ | 特殊性质 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $7$ | $10^9$ | 否 | $1$ |\n| $1$ | $10$ | $10^9$ | 否 | $9$ |\n| $2$ | $100$ | $10^9$ | 否 | $10$ |\n| $3$ | $1000$ | $10^9$ | 否 | $20$ |\n| $4$ | $10^5$ | $100$ | 否 | $10$ |\n| $5$ | $10^5$ | $10^9$ | 是 | $10$ |\n| $6$ | $10^5$ | $10^9$ | 否 | $40$ |\n\n特殊性质： 对于任意满足 $1\\le i\\le n$ 的整数 $i$，$A_i$ 在 $[0,10^9]$ 中随机生成。", "locale": "zh-CN"}}}
{"pid": "P11627", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n1 3\n2 4\n2 5", "280\n3\n3 4 1 2"], ["7\n5 1\n1 7\n6 2\n2 1\n4 5\n3 2", "1106\n4\n5 1 2 4 6 3"], ["10\n3 6\n7 3\n8 10\n5 9\n9 1\n4 8\n1 8\n2 3\n6 10", "5240\n5\n4 1 6 9 8 2 7 3 5"], ["10\n1 2\n1 3\n3 4\n3 5\n2 6\n6 7\n7 8\n8 9\n9 10", "5660\n10\n4 3 1 2 5 6 7 8 9"], ["20\n5 18\n16 11\n6 15\n7 14\n8 7\n10 20\n3 4\n14 6\n9 8\n18 11\n17 4\n11 10\n4 11\n2 13\n13 12\n12 15\n15 20\n19 9\n1 8", "79480\n19\n1 2 14 16 17 12 3 15 18 7 4 11 9 5 8 10 13 19 6"], ["10\n7 8\n3 2\n6 7\n2 10\n8 3\n4 1\n9 2\n1 3\n5 7\n", "4340\n5\n8 6 1 2 7 3 4 5 9 "], ["见附件", "见附件"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "线段树", "平衡树", "树状数组", "O2优化", "树的遍历"], "title": "[迷宫寻路 Round 3] 游戏", "background": "", "description": "小 L 正在玩游戏，游戏地图是一棵 $n$ 个节点的树，定义一条树上路径的长度为路径上所有边的边权之和，路径可以重复经过点和边。特别的，若路径不包含任何边，则其长度为 $0$。\n\n小 L 会选择一个点作为必经点 $t$，接着，小 L 会设置每条边的边权，使得边的边权构成一个 $1$ 到 $n-1$ 的**排列**。\n\n定义：小 L 的得分为 $\\sum_{1 \\leq u,v \\leq n} \\operatorname{dist}(u,v)$，其中 $\\operatorname{dist}(u,v)$ 为在经过必经点 $t$ 的前提下，长度**最小的**从 $u$ 到 $v$ 的路径的长度。\n\n小 L 希望最大化自己的得分，请你解答以下问题：\n\n第一问：求他得分的**最大值**对 $998244353$ 取模的值。\n\n第二问：求若要最大化他的得分，小 L 应该选择的必经点 $t$ 和小 L 每条边应设置的边权。\n", "inputFormat": "一行一个整数 $n$，表示节点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示树上一条连接点 $u$ 和点 $v$ 的边。", "outputFormat": "输出共三行。\n\n第一行一个整数，表示【小 L 得分的最大值】对 $998244353$ 取模的值。\n\n第二行一个整数，表示小 L 应该选择的必经点 $t$，如有多种 $t$ 符合题意，请输出最小的 $t$。\n\n第三行 $n-1$ 个整数，**按边的输入顺序**依次给出小 L 每条边应设置的边权。如有多种答案，请输出边权的字典序最小的答案。\n\n注意：在小 L 得分最大的前提下，请首先最小化 $t$，其次最小化边权的字典序。\n\n这里“边权的字典序”是指按边的输入顺序将边的边权看作一个排列，这个排列的字典序。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^5$。\n\n| 子任务编号 | $n\\leq$ | 特殊性质 1 | 特殊性质 2 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $50$ | 否 | 否 | $10$ |\n| $1$ | $1000$ | 否 | 否 | $20$ |\n| $2$ | $10^5$ | 是 | 否 | $10$ |\n| $3$ | $10^5$ | 否 | 是 | $10$ |\n| $4$ | $10^5$ | 否 | 否 | $50$ |\n\n特殊性质 1：存在一个对点重标号的方案，使得第 $i$ 条边为 $(1,i+1)$。\n\n特殊性质 2：存在一个对点重标号的方案，使得第 $i$ 条边为 $(i,i+1)$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[迷宫寻路 Round 3] 游戏", "background": "", "description": "小 L 正在玩游戏，游戏地图是一棵 $n$ 个节点的树，定义一条树上路径的长度为路径上所有边的边权之和，路径可以重复经过点和边。特别的，若路径不包含任何边，则其长度为 $0$。\n\n小 L 会选择一个点作为必经点 $t$，接着，小 L 会设置每条边的边权，使得边的边权构成一个 $1$ 到 $n-1$ 的**排列**。\n\n定义：小 L 的得分为 $\\sum_{1 \\leq u,v \\leq n} \\operatorname{dist}(u,v)$，其中 $\\operatorname{dist}(u,v)$ 为在经过必经点 $t$ 的前提下，长度**最小的**从 $u$ 到 $v$ 的路径的长度。\n\n小 L 希望最大化自己的得分，请你解答以下问题：\n\n第一问：求他得分的**最大值**对 $998244353$ 取模的值。\n\n第二问：求若要最大化他的得分，小 L 应该选择的必经点 $t$ 和小 L 每条边应设置的边权。\n", "inputFormat": "一行一个整数 $n$，表示节点数。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示树上一条连接点 $u$ 和点 $v$ 的边。", "outputFormat": "输出共三行。\n\n第一行一个整数，表示【小 L 得分的最大值】对 $998244353$ 取模的值。\n\n第二行一个整数，表示小 L 应该选择的必经点 $t$，如有多种 $t$ 符合题意，请输出最小的 $t$。\n\n第三行 $n-1$ 个整数，**按边的输入顺序**依次给出小 L 每条边应设置的边权。如有多种答案，请输出边权的字典序最小的答案。\n\n注意：在小 L 得分最大的前提下，请首先最小化 $t$，其次最小化边权的字典序。\n\n这里“边权的字典序”是指按边的输入顺序将边的边权看作一个排列，这个排列的字典序。", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n\\le 10^5$。\n\n| 子任务编号 | $n\\leq$ | 特殊性质 1 | 特殊性质 2 | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $50$ | 否 | 否 | $10$ |\n| $1$ | $1000$ | 否 | 否 | $20$ |\n| $2$ | $10^5$ | 是 | 否 | $10$ |\n| $3$ | $10^5$ | 否 | 是 | $10$ |\n| $4$ | $10^5$ | 否 | 否 | $50$ |\n\n特殊性质 1：存在一个对点重标号的方案，使得第 $i$ 条边为 $(1,i+1)$。\n\n特殊性质 2：存在一个对点重标号的方案，使得第 $i$ 条边为 $(i,i+1)$。\n", "locale": "zh-CN"}}}
{"pid": "P11628", "type": "P", "difficulty": 4, "samples": [["2\n2 90\n60 20\n70 30\n2 10\n3 5\n6 6\n", "Yes\nNo\n"], ["见附件", "见附件"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2025", "WC"], "title": "[WC2025] 猫粮", "background": null, "description": "你的家里养了 $n$ 只小猫。到了饭点，你的猫都饿了，每一只都需要吃至少 $m$ 克的猫粮才能吃饱。\n\n你的家里有两种猫粮：优质猫粮和普通猫粮。\n\n- 优质猫粮的味道非常好，所以当你打开一袋优质猫粮后，所有没吃饱的小猫会来争抢，最后所有没吃饱的小猫中**任意**一只猫都有可能抢走这袋猫粮，并吃掉其中的所有猫粮。\n- 普通猫粮的味道一般，所以当你打开一袋猫粮放在某一只小猫面前时，其他小猫不会争抢，而这只小猫会吃掉这个袋子里的所有猫粮。\n\n在这两种情况下，即使占有猫粮的小猫只需要吃掉这袋猫粮的一部分就能吃饱，它也会吃掉整袋猫粮。\n\n你有 $n$ 袋优质猫粮，其中第 $i$ 袋里有 $a_i$ 克；你还有 $n$ 袋普通猫粮，其中第 $i$ 袋里有 $b_i$ 克。所有猫粮加在一起的重量恰好等于 $n\\times m$，也就是所有小猫吃饱所需要的猫粮重量。同时，**所有袋子里的猫粮的重量都是 $1$ 至 $m-1$ 之间的整数**。\n\n为了喂饱所有小猫，你每次可以选择一袋猫粮打开，等待这袋猫粮被吃完之后再打开下一袋，直到所有猫粮都被吃完。你可以根据此时猫粮的食用情况决定之后猫粮的打开顺序以及将普通猫粮放在哪一只猫面前。你想知道，是否存在一种喂猫粮的方案，使得在每次打开优质猫粮时无论哪只没吃饱的猫抢到了猫粮，最终所有猫都能吃饱。", "inputFormat": "**本题有多组测试数据**。  \n输入的第一行包含一个正整数 $T$ 表示数据组数。  \n接下来依次输入每组测试数据，对于每组测试数据：  \n第一行包含两个正整数 $n$ 和 $m$ 表示猫的数量以及每只猫需要的猫粮克数。  \n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 描述 $n$ 袋优质猫粮的重量。  \n第三行包含 $n$ 个整数 $b_1,b_2,\\cdots,b_n$ 描述 $n$ 袋普通猫粮的重量。", "outputFormat": "对于每组测试数据输出一行包含一个字符串，如果存在满足条件的方案输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n第一组数据中，可以先打开重量为 $60$ 克的优质猫粮。无论被哪一只小猫吃掉，打开重量为 $30$ 克的普通猫粮喂给同一只小猫，这样这只小猫就吃饱了。\n\n接下来打开重量为 $20$ 的优质猫粮，被剩下的小猫吃掉。\n\n最后打开重量为 $70$ 的普通猫粮给这只小猫吃，这样两只小猫都吃到了 $90$ 克猫粮，就都吃饱了。\n\n第二组数据中，可以证明不存在可以喂饱所有小猫的方案。\n\n#### 样例 $2$ 解释\n\n该样例满足特殊性质 $\\text{B}$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 50$;\n- $1 \\le n \\le 40000，2 \\le m \\le 10^5$;\n- 对于任意的 $1 \\le i \\le n$，有 $1 \\le a_i, b_i \\le m − 1$;\n- $\\displaystyle \\sum_{i=1}^na_i+\\sum_{i=1}^n b_i=nm$。\n\n::cute-table\n\n|    测试点编号    |     $n\\le$     | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     |       $1$      |   无  |\n|  $2\\sim 4$  |       $2$      |   ^  |\n|  $5\\sim 7$  |       $5$      |   ^  |\n|    $8,9$    | $4\\times 10^4$ |   A  |\n| $10\\sim 16$ |        ^       |   B  |\n| $17\\sim 20$ |        ^       |   无  |\n\n特殊性质 A：保证 $m=3$。\n\n特殊性质 B：保证任意两袋猫粮的重量互不相同，即对于任意的 $1\\le i\\lt j\\le n$，保证 $a_i\\neq a_j$，$b_i\\neq b_j$ 且对于任意的 $1\\le i,j\\le n$，保证 $a_i\\neq b_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2025] 猫粮", "background": null, "description": "你的家里养了 $n$ 只小猫。到了饭点，你的猫都饿了，每一只都需要吃至少 $m$ 克的猫粮才能吃饱。\n\n你的家里有两种猫粮：优质猫粮和普通猫粮。\n\n- 优质猫粮的味道非常好，所以当你打开一袋优质猫粮后，所有没吃饱的小猫会来争抢，最后所有没吃饱的小猫中**任意**一只猫都有可能抢走这袋猫粮，并吃掉其中的所有猫粮。\n- 普通猫粮的味道一般，所以当你打开一袋猫粮放在某一只小猫面前时，其他小猫不会争抢，而这只小猫会吃掉这个袋子里的所有猫粮。\n\n在这两种情况下，即使占有猫粮的小猫只需要吃掉这袋猫粮的一部分就能吃饱，它也会吃掉整袋猫粮。\n\n你有 $n$ 袋优质猫粮，其中第 $i$ 袋里有 $a_i$ 克；你还有 $n$ 袋普通猫粮，其中第 $i$ 袋里有 $b_i$ 克。所有猫粮加在一起的重量恰好等于 $n\\times m$，也就是所有小猫吃饱所需要的猫粮重量。同时，**所有袋子里的猫粮的重量都是 $1$ 至 $m-1$ 之间的整数**。\n\n为了喂饱所有小猫，你每次可以选择一袋猫粮打开，等待这袋猫粮被吃完之后再打开下一袋，直到所有猫粮都被吃完。你可以根据此时猫粮的食用情况决定之后猫粮的打开顺序以及将普通猫粮放在哪一只猫面前。你想知道，是否存在一种喂猫粮的方案，使得在每次打开优质猫粮时无论哪只没吃饱的猫抢到了猫粮，最终所有猫都能吃饱。", "inputFormat": "**本题有多组测试数据**。  \n输入的第一行包含一个正整数 $T$ 表示数据组数。  \n接下来依次输入每组测试数据，对于每组测试数据：  \n第一行包含两个正整数 $n$ 和 $m$ 表示猫的数量以及每只猫需要的猫粮克数。  \n第二行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 描述 $n$ 袋优质猫粮的重量。  \n第三行包含 $n$ 个整数 $b_1,b_2,\\cdots,b_n$ 描述 $n$ 袋普通猫粮的重量。", "outputFormat": "对于每组测试数据输出一行包含一个字符串，如果存在满足条件的方案输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n第一组数据中，可以先打开重量为 $60$ 克的优质猫粮。无论被哪一只小猫吃掉，打开重量为 $30$ 克的普通猫粮喂给同一只小猫，这样这只小猫就吃饱了。\n\n接下来打开重量为 $20$ 的优质猫粮，被剩下的小猫吃掉。\n\n最后打开重量为 $70$ 的普通猫粮给这只小猫吃，这样两只小猫都吃到了 $90$ 克猫粮，就都吃饱了。\n\n第二组数据中，可以证明不存在可以喂饱所有小猫的方案。\n\n#### 样例 $2$ 解释\n\n该样例满足特殊性质 $\\text{B}$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 50$;\n- $1 \\le n \\le 40000，2 \\le m \\le 10^5$;\n- 对于任意的 $1 \\le i \\le n$，有 $1 \\le a_i, b_i \\le m − 1$;\n- $\\displaystyle \\sum_{i=1}^na_i+\\sum_{i=1}^n b_i=nm$。\n\n::cute-table\n\n|    测试点编号    |     $n\\le$     | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     |       $1$      |   无  |\n|  $2\\sim 4$  |       $2$      |   ^  |\n|  $5\\sim 7$  |       $5$      |   ^  |\n|    $8,9$    | $4\\times 10^4$ |   A  |\n| $10\\sim 16$ |        ^       |   B  |\n| $17\\sim 20$ |        ^       |   无  |\n\n特殊性质 A：保证 $m=3$。\n\n特殊性质 B：保证任意两袋猫粮的重量互不相同，即对于任意的 $1\\le i\\lt j\\le n$，保证 $a_i\\neq a_j$，$b_i\\neq b_j$ 且对于任意的 $1\\le i,j\\le n$，保证 $a_i\\neq b_j$。", "locale": "zh-CN"}}}
{"pid": "P11629", "type": "P", "difficulty": 7, "samples": [["0 2\n3 1\n4 2 3\n2 2\n1 3\n", "3\n1\n2\n1 3\n2 1\n2\n1\n1\n1\n2\n"], ["见附件", "见附件"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "Special Judge", "WC"], "title": "[WC2025] Nim 游戏", "background": "WC 2025 d1t2。", "description": "小 w 被迫卷入了一场决定一切的 Nim 游戏！\n\n有 $n$ 堆石子摆在小 w 面前，从 $1$ 到 $n$ 编号，其中编号为 $i$ 的石子堆中有 $a_i$ 个石子。在 Nim 游戏中，小 w 和一位绝顶聪明的对手轮流操作，小 w 后手。每次操作中，操作方可以选择一堆石子，将这一堆石子中任意多的石子扔掉，但不能不扔。如果某个人操作时，所有 $n$ 堆石子中都没有石子了，那么他就无法操作，从而失败。\n\n熟练掌握 OI 知识的小 w 知道 Nim 游戏的最优策略，还知道两个玩家都以最优策略操作时，后手获胜当且仅当所有 $a_i$ 的按位异或和为 $0$。然而初始局面不一定满足这个条件，于是小 w 决定用些盘外招让所有 $a_i$ 的异或和为 $0$，然后赢下这盘游戏。为此小 w 准备了很多石子，他可以在游戏开始前在每个石子堆上添加任意多（也可以不添加）石子。然而小 w 不能从石子堆里取走石子，也不能创建新的石子堆。\n\n小 w 请你提供添加石子的方案。为了保持隐蔽，小 w 希望添加尽可能少的石子，所以他首先想要知道最少需要添加多少石子。除此之外他还希望准备 $m$ 套不同的添加石子数最少的方案，以备不时之需。我们认为两种方案不同，当且仅当存在某堆石子，在这两种方案中该堆石子所添加的石子数量不同。如果这样的方案没有 $m$ 种，则你需要全部告诉他；如果这样的方案大于 $m$ 种，则你任意给出 $m$ 种即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $c,T$，分别表示测试点编号与测试数据组数。对于样例有 $c = 0$。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n$ 和 $m$，分别表示石子堆的数量以及小 w 需要的方案数量。\n\n第二行包含 $n$ 个非负整数 $a_1, a_2, \\cdots , a_n$，描述每堆石子的石子数量。", "outputFormat": "对于每组测试数据：\n\n- 输出的第一行包含一个整数 $k$，表示小 w 最少需要添加多少石子。\n- 输出的第二行包含一个整数 $m'$，表示你提供给小 w 的方案数量。如果添加石子最少的方案数不少于 $m$，你需要保证 $m' = m$，否则你需要保证 $m'$ 恰好是添加石子最少的方案数。\n- 接下来依次输出 $m'$ 个不同的方案，对于每个方案输出三行，其中：\n  - 第一行包含一个整数 $n'$，表示该方案中添加了石子的石子堆数量。\n  - 第二行包含 $n'$ 个整数 $x_1, x_2,\\cdots , x_n'$，描述该方案中添加了石子的石子堆编号。你需要保证 $1 \\le x_1 \\lt x_2 \\lt \\cdots \\lt x_{n'} \\le n$。当 $n' = 0$ 时，这一行需要为空行。\n  - 第三行包含 $n'$ 个整数 $w_1,w_2,\\cdots ,w_{n'}$，其中 $w_j(1 \\le j \\le n')$ 表示该方案中在编号为 $x_j$ 的石子堆中添加的石子数量。你需要保证对于任意的 $1 \\le j \\le n'$，有 $w_j \\ge 1$ 且 $\\sum_{j=1}^{n'} w_j=k$。当 $n' = 0$ 时，这一行需要为空行。\n\n你需要保证在单个测试点内输出的整数数量不超过 $10^7$，可以保证总是存在这样的输出满足题目条件。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n对于第一组数据，小 w 共有两种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子，给编号为 $3$ 的石子堆添加 $1$ 个石子。此时三堆石子数分别是 $6, 2, 4$，后手必胜。\n- 给编号为 $3$ 的石子堆添加 $3$ 个石子。此时三堆石子数分别是 $4, 2, 6$，后手必胜。\n\n由于小 w 只需要一种方案，输出任意一种方案均可，样例输出为第一种。\n\n对于第二组数据，小 w 只有一种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子。此时两堆石子的石子分别是 $3, 3$，此时后手必胜。\n\n尽管小 w 需要两种方案，但由于总方案只有一种，故输出唯一的一种方案即可。\n\n### 数据范围\n\n设 $\\sum n$ 和 $\\sum m$ 分别表示单个测试点的所有测试数据中 $n$ 和 $m$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 2 \\times 10^4$；\n- $2 \\le n \\le 10^5$，$2 \\le \\sum n \\le 2 \\times 10^5$，$1 \\le m,\\sum m \\le 2 \\times 10^4$；\n- 对于任意的 $1 \\le i \\le n$，有 $0 \\le a_i \\le 2^{60} − 1$；\n- $\\displaystyle \\sum_{i=1}^{n} a_i \\ge 1$。\n\n::cute-table\n|   测试点编号  |  $n \\le$ |  $\\sum n \\le$ |   $m \\le$ |  $\\sum m \\le$ |  $a_i \\le$ | 特殊性质 |\n| :------: | :--: | :----: | :----: | :----: | :------: | :--: |\n|     1    |   $2$  |  $10^5$  |  $10^4$  |  $10^4$  | $2^{30} - 1$ |   无  |\n|  $2 \\sim 4$  |   $5$  |   $25$   |  $10^4$  |  $10^4$  |  $2^{4} - 1$ |   B  |\n|  $5 \\sim 7$  |   $6$  |   $30$   |    ^   |    ^   | $2^{10} - 1$ |   ^  |\n|  $8 \\sim 10$ | $10^5$ | $2 \\times 10^5$ |    ^   |    ^   |     $2^{30} - 1$    |   A  |\n| $11 \\sim 13$ |   ^  |    ^   |    $1$   |    ^   |     ^    |   B  |\n| $14 \\sim 17$ | $10^3$ | $2 \\times 10^3$ |  $10^2$  |  $10^2$  |     ^    |   ^  |\n| $18 \\sim 21$ | $10^5$ | $2 \\times 10^5$ |  $10^4$  |  $10^4$  |     ^    |   ^  |\n|  $22, 23$  |   ^  |    ^   |    ^   |    ^   |     ^    |   无  |\n|  $24, 25$  |   ^  |    ^   | $2 \\times 10^4$ | $2 \\times 10^4$ | $2^{60} - 1$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，$a_i$ 都是 $2$ 的非负整数幂次。\n- 特殊性质 B：$a_1=0$。\n\n### 评分方式\n\n对于每个测试点，如果你在所有测试数据中都正确地输出了小 w 需要的最小石子\n数量（即输出格式中的 $k$），你将获得该测试点 $50\\%$ 的分数。在此基础上，如果你在所有测试数据中都按照要求给出了方案，你将获得该测试点 $100\\%$ 的分数。\n\n注意，即使你只想回答小 w 需要的最小石子数量，也需要在回答的小 w 需要的最小石子数量后按照给定的格式输出方案数量以及**对应数量的，正确的，不重复的**方案。简单地输出 $m' = 0$ 即可完成这一点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2025] Nim 游戏", "background": "WC 2025 d1t2。", "description": "小 w 被迫卷入了一场决定一切的 Nim 游戏！\n\n有 $n$ 堆石子摆在小 w 面前，从 $1$ 到 $n$ 编号，其中编号为 $i$ 的石子堆中有 $a_i$ 个石子。在 Nim 游戏中，小 w 和一位绝顶聪明的对手轮流操作，小 w 后手。每次操作中，操作方可以选择一堆石子，将这一堆石子中任意多的石子扔掉，但不能不扔。如果某个人操作时，所有 $n$ 堆石子中都没有石子了，那么他就无法操作，从而失败。\n\n熟练掌握 OI 知识的小 w 知道 Nim 游戏的最优策略，还知道两个玩家都以最优策略操作时，后手获胜当且仅当所有 $a_i$ 的按位异或和为 $0$。然而初始局面不一定满足这个条件，于是小 w 决定用些盘外招让所有 $a_i$ 的异或和为 $0$，然后赢下这盘游戏。为此小 w 准备了很多石子，他可以在游戏开始前在每个石子堆上添加任意多（也可以不添加）石子。然而小 w 不能从石子堆里取走石子，也不能创建新的石子堆。\n\n小 w 请你提供添加石子的方案。为了保持隐蔽，小 w 希望添加尽可能少的石子，所以他首先想要知道最少需要添加多少石子。除此之外他还希望准备 $m$ 套不同的添加石子数最少的方案，以备不时之需。我们认为两种方案不同，当且仅当存在某堆石子，在这两种方案中该堆石子所添加的石子数量不同。如果这样的方案没有 $m$ 种，则你需要全部告诉他；如果这样的方案大于 $m$ 种，则你任意给出 $m$ 种即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $c,T$，分别表示测试点编号与测试数据组数。对于样例有 $c = 0$。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n$ 和 $m$，分别表示石子堆的数量以及小 w 需要的方案数量。\n\n第二行包含 $n$ 个非负整数 $a_1, a_2, \\cdots , a_n$，描述每堆石子的石子数量。", "outputFormat": "对于每组测试数据：\n\n- 输出的第一行包含一个整数 $k$，表示小 w 最少需要添加多少石子。\n- 输出的第二行包含一个整数 $m'$，表示你提供给小 w 的方案数量。如果添加石子最少的方案数不少于 $m$，你需要保证 $m' = m$，否则你需要保证 $m'$ 恰好是添加石子最少的方案数。\n- 接下来依次输出 $m'$ 个不同的方案，对于每个方案输出三行，其中：\n  - 第一行包含一个整数 $n'$，表示该方案中添加了石子的石子堆数量。\n  - 第二行包含 $n'$ 个整数 $x_1, x_2,\\cdots , x_n'$，描述该方案中添加了石子的石子堆编号。你需要保证 $1 \\le x_1 \\lt x_2 \\lt \\cdots \\lt x_{n'} \\le n$。当 $n' = 0$ 时，这一行需要为空行。\n  - 第三行包含 $n'$ 个整数 $w_1,w_2,\\cdots ,w_{n'}$，其中 $w_j(1 \\le j \\le n')$ 表示该方案中在编号为 $x_j$ 的石子堆中添加的石子数量。你需要保证对于任意的 $1 \\le j \\le n'$，有 $w_j \\ge 1$ 且 $\\sum_{j=1}^{n'} w_j=k$。当 $n' = 0$ 时，这一行需要为空行。\n\n你需要保证在单个测试点内输出的整数数量不超过 $10^7$，可以保证总是存在这样的输出满足题目条件。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n对于第一组数据，小 w 共有两种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子，给编号为 $3$ 的石子堆添加 $1$ 个石子。此时三堆石子数分别是 $6, 2, 4$，后手必胜。\n- 给编号为 $3$ 的石子堆添加 $3$ 个石子。此时三堆石子数分别是 $4, 2, 6$，后手必胜。\n\n由于小 w 只需要一种方案，输出任意一种方案均可，样例输出为第一种。\n\n对于第二组数据，小 w 只有一种使添加石子总数最小的方案：\n\n- 给编号为 $1$ 的石子堆添加 $2$ 个石子。此时两堆石子的石子分别是 $3, 3$，此时后手必胜。\n\n尽管小 w 需要两种方案，但由于总方案只有一种，故输出唯一的一种方案即可。\n\n### 数据范围\n\n设 $\\sum n$ 和 $\\sum m$ 分别表示单个测试点的所有测试数据中 $n$ 和 $m$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 2 \\times 10^4$；\n- $2 \\le n \\le 10^5$，$2 \\le \\sum n \\le 2 \\times 10^5$，$1 \\le m,\\sum m \\le 2 \\times 10^4$；\n- 对于任意的 $1 \\le i \\le n$，有 $0 \\le a_i \\le 2^{60} − 1$；\n- $\\displaystyle \\sum_{i=1}^{n} a_i \\ge 1$。\n\n::cute-table\n|   测试点编号  |  $n \\le$ |  $\\sum n \\le$ |   $m \\le$ |  $\\sum m \\le$ |  $a_i \\le$ | 特殊性质 |\n| :------: | :--: | :----: | :----: | :----: | :------: | :--: |\n|     1    |   $2$  |  $10^5$  |  $10^4$  |  $10^4$  | $2^{30} - 1$ |   无  |\n|  $2 \\sim 4$  |   $5$  |   $25$   |  $10^4$  |  $10^4$  |  $2^{4} - 1$ |   B  |\n|  $5 \\sim 7$  |   $6$  |   $30$   |    ^   |    ^   | $2^{10} - 1$ |   ^  |\n|  $8 \\sim 10$ | $10^5$ | $2 \\times 10^5$ |    ^   |    ^   |     $2^{30} - 1$    |   A  |\n| $11 \\sim 13$ |   ^  |    ^   |    $1$   |    ^   |     ^    |   B  |\n| $14 \\sim 17$ | $10^3$ | $2 \\times 10^3$ |  $10^2$  |  $10^2$  |     ^    |   ^  |\n| $18 \\sim 21$ | $10^5$ | $2 \\times 10^5$ |  $10^4$  |  $10^4$  |     ^    |   ^  |\n|  $22, 23$  |   ^  |    ^   |    ^   |    ^   |     ^    |   无  |\n|  $24, 25$  |   ^  |    ^   | $2 \\times 10^4$ | $2 \\times 10^4$ | $2^{60} - 1$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，$a_i$ 都是 $2$ 的非负整数幂次。\n- 特殊性质 B：$a_1=0$。\n\n### 评分方式\n\n对于每个测试点，如果你在所有测试数据中都正确地输出了小 w 需要的最小石子\n数量（即输出格式中的 $k$），你将获得该测试点 $50\\%$ 的分数。在此基础上，如果你在所有测试数据中都按照要求给出了方案，你将获得该测试点 $100\\%$ 的分数。\n\n注意，即使你只想回答小 w 需要的最小石子数量，也需要在回答的小 w 需要的最小石子数量后按照给定的格式输出方案数量以及**对应数量的，正确的，不重复的**方案。简单地输出 $m' = 0$ 即可完成这一点。", "locale": "zh-CN"}}}
{"pid": "P11630", "type": "P", "difficulty": 6, "samples": [["3\n5 1\n1 3\n2 5\n1 4\n3 3\n5 1\n3 2\n1 5\n1 -100\n1 5\n3 2\n1 5\n1 -1\n1 5\n", "12\n6\n7\n"], ["见附件", "见附件"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "2025", "WC"], "title": "[WC2025] 士兵", "background": "WC 2025 d1t3。", "description": "有 $n$ 个士兵站成一排。初始时，编号为 $i$ 的士兵血量为 $a_i$。\n\n你可以进行若干次（也可以不进行）进攻。每次进攻时，你可以选择一段区间 $[l, r](1 \\le l \\le r \\le n)$，将编号在这一段区间内的士兵的血量减少 $1$。每次进攻需要付出 $m$ 的代价。\n\n在所有的进攻结束后，若第 $i$ 个士兵的血量不超过 $0$，那么你会获得 $b_i$ 的收益。由于士兵中敌友混杂，$b_i$ 有可能是负数。注意每个士兵的收益只会获得一次。\n\n你需要找到一个进攻方案，来最大化收益总和减去代价总和。形式化地，设在你的方案进攻了 $k$ 次，最终第 $i$ 个士兵的血量为 $c_i$，令 $p_i$ 在 $c_i \\le 0$ 时为 $1$ 否则为 $0$，则你需要最大化 $\\left(\\sum_{i=1}^n p_i \\times b_i\\right) -m\\times k$。最终，你需要给出收益总和减去代价总和的最大值即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$ 表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n,m$，分别表示士兵数量和单次进攻代价。\n\n接下来 $n$ 行，每行包含两个整数 $a_i, b_i$，分别描述每个士兵的血量和收益。", "outputFormat": "对于每组数据输出一行包含一个整数，表示在所有可能的方案中可以得到的收益总和减去代价总和的最大值。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n在第一组测试数据中，一个最优方案为进攻三次，分别取区间 $[1, 5], [2, 4], [4, 4]$，最终血量序列为 $(0, 0,−1, 0, 4)$，收益为 $b_1 + b_2 + b_3 + b_4 = 15$，代价为 $3 \\times 1 = 3$。可以证明没有比该方案更优的方案，故输出 $15 − 3 = 12$。\n\n在第二组测试数据中，一个最优方案为进攻两次，分别取区间 $[1, 1], [3, 3]$。\n\n在第三组测试数据中，一个最优方案为进攻一次，取区间 $[1, 3]$。\n\n### 数据范围\n\n设 $\\sum n$ 分别表示单个测试点内所有测试数据中 $n$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 5\\times 10^5$；\n- $1\\le n,\\sum n\\le 5\\times 10^5$，$1\\le m\\le 10^9$；\n- 对于任意的 $1 \\le i \\le n$，有 $1\\le a_i\\le 10^9$，$-10^9\\le b_i\\le 10^9$。\n::cute-table\n|    测试点编号    |   $\\sum n\\le$  | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     | $5\\times 10^5$ |   A  |\n|  $2\\sim 4$  |     $5,000$    |   B  |\n|  $5\\sim 8$  |     ^    |   无  |\n|  $9\\sim 12$ |     $10^5$     |   ^  |\n| $13\\sim 17$ | $2\\times 10^5$ |   ^  |\n| $18\\sim 20$ | $5\\times 10^5$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，有 $b_i\\ge 0$。\n- 特殊性质 B：对于任意的 $1\\le i\\le n$，有 $a_i\\le 5,000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2025] 士兵", "background": "WC 2025 d1t3。", "description": "有 $n$ 个士兵站成一排。初始时，编号为 $i$ 的士兵血量为 $a_i$。\n\n你可以进行若干次（也可以不进行）进攻。每次进攻时，你可以选择一段区间 $[l, r](1 \\le l \\le r \\le n)$，将编号在这一段区间内的士兵的血量减少 $1$。每次进攻需要付出 $m$ 的代价。\n\n在所有的进攻结束后，若第 $i$ 个士兵的血量不超过 $0$，那么你会获得 $b_i$ 的收益。由于士兵中敌友混杂，$b_i$ 有可能是负数。注意每个士兵的收益只会获得一次。\n\n你需要找到一个进攻方案，来最大化收益总和减去代价总和。形式化地，设在你的方案进攻了 $k$ 次，最终第 $i$ 个士兵的血量为 $c_i$，令 $p_i$ 在 $c_i \\le 0$ 时为 $1$ 否则为 $0$，则你需要最大化 $\\left(\\sum_{i=1}^n p_i \\times b_i\\right) -m\\times k$。最终，你需要给出收益总和减去代价总和的最大值即可。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$ 表示数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n第一行包含两个整数 $n,m$，分别表示士兵数量和单次进攻代价。\n\n接下来 $n$ 行，每行包含两个整数 $a_i, b_i$，分别描述每个士兵的血量和收益。", "outputFormat": "对于每组数据输出一行包含一个整数，表示在所有可能的方案中可以得到的收益总和减去代价总和的最大值。", "hint": "### 样例解释\n\n#### 样例 $1$ 解释\n\n在第一组测试数据中，一个最优方案为进攻三次，分别取区间 $[1, 5], [2, 4], [4, 4]$，最终血量序列为 $(0, 0,−1, 0, 4)$，收益为 $b_1 + b_2 + b_3 + b_4 = 15$，代价为 $3 \\times 1 = 3$。可以证明没有比该方案更优的方案，故输出 $15 − 3 = 12$。\n\n在第二组测试数据中，一个最优方案为进攻两次，分别取区间 $[1, 1], [3, 3]$。\n\n在第三组测试数据中，一个最优方案为进攻一次，取区间 $[1, 3]$。\n\n### 数据范围\n\n设 $\\sum n$ 分别表示单个测试点内所有测试数据中 $n$ 的和。\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 5\\times 10^5$；\n- $1\\le n,\\sum n\\le 5\\times 10^5$，$1\\le m\\le 10^9$；\n- 对于任意的 $1 \\le i \\le n$，有 $1\\le a_i\\le 10^9$，$-10^9\\le b_i\\le 10^9$。\n::cute-table\n|    测试点编号    |   $\\sum n\\le$  | 特殊性质 |\n| :---------: | :------------: | :--: |\n|     $1$     | $5\\times 10^5$ |   A  |\n|  $2\\sim 4$  |     $5,000$    |   B  |\n|  $5\\sim 8$  |     ^    |   无  |\n|  $9\\sim 12$ |     $10^5$     |   ^  |\n| $13\\sim 17$ | $2\\times 10^5$ |   ^  |\n| $18\\sim 20$ | $5\\times 10^5$ |   ^  |\n\n- 特殊性质 A：对于任意的 $1\\le i\\le n$，有 $b_i\\ge 0$。\n- 特殊性质 B：对于任意的 $1\\le i\\le n$，有 $a_i\\le 5,000$。", "locale": "zh-CN"}}}
