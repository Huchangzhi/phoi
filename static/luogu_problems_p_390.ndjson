{"pid": "P8908", "type": "P", "difficulty": 6, "samples": [["GHHGGHHGH", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "树状数组", "2022", "均摊分析"], "title": "[USACO22DEC] Palindromes P", "background": "", "description": "农夫约翰合牛国（The United Cows of Farmer John，UCFJ）正在参加一年一度的蹄球锦标赛！UCFJ 队的 $N(1 \\le N \\le 7500)$ 头奶牛以微弱优势击败了 Farmer Nhoj 的队伍，赢得了蹄球比赛的金牌。\n\n奶牛们已经为颁奖典礼排好了队。她们希望 FJ 拍摄 $\\dfrac{N(N+1)}{2}$ 张合影，为队伍的每个连续子段拍摄一张。\n\n然而，FJ，作为球队的主帅，对于奶牛们应该如何列队十分讲究。具体地说，他拒绝为一个子段拍照，除非它形成一个**回文串**，即对于所有不超过子段长度的正整数 $i$，从子段左端开始的第 $i$ 头奶牛的品种必须与从子段右端开始的第 $i$ \n头奶牛的品种相同。每头奶牛的品种是更赛牛（Guernsey）或荷斯坦牛（Holstein）之一。\n\n对于队伍的 $\\dfrac{N(N+1)}{2}$ 个连续子段的每一个，计算将该子段重新排列成回文串所需的最小换位次数（如果不可能这样做则为 $−1$）。单次换位是在子序列中取两头相邻的奶牛并交换。输出所有这些次数之和。\n\n注意对每个连续子段所需的换位次数是独立计算的（奶牛们会在照片拍摄之间返回她们的起始位置）。 ", "inputFormat": "输入队伍，用一个长为 $N$ 的字符 $\\texttt{G}$ 和 $\\texttt{H}$ 组成的字符串表示。 ", "outputFormat": "输出队伍的所有 $\\dfrac{N(N+1)}{2}$ 个连续子段的前述数量之和。 ", "hint": "### 样例 1 解释\n\n前四个连续子段是 $\\texttt{G}$，$\\texttt{GH}$，$\\texttt{GHH}$ 和 $\\texttt{GHHG}$。$\\texttt{G}$ 和 $\\texttt{GHHG}$ 都已经是回文串，因此它们对总和的贡献为 $0$。$\\texttt{GHH}$ 可以使用一次换位重新排列成回文串，因此它对总和的贡献为 $1$。$\\texttt{GH}$ 不能使用任意次数的换位重新排列成回文串，因此它对总和的贡献为 $−1$。\n\n$\\texttt{HHGG}$ 是另一个对总和有贡献的连续子段。这个子段可以使用两次换位重新排列成回文串。 \n\n### 测试点性质\n\n除样例外有十五个测试点，满足 $N \\in \\{ 100,200,500,1000,2000,5000,5000,5000,5000,5000,7500,7500,7500,7500,7500\\}$ 各一。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO22DEC] Palindromes P", "background": "", "description": "Farmer John’s United Cows of Farmer John (UCFJ) are competing in the annual hoofball tournament. UCFJ’s team of $N(1 \\le N \\le 7500)$ cows narrowly defeated Farmer Nhoj’s team and won the gold medal.\n\nThe cows have lined up for the award ceremony. They want FJ to take $\\dfrac{N(N+1)}{2}$ group photos, one for every contiguous subsegment of the team.\n\nHowever, as the coach, FJ is very picky about how the cows line up. In particular, he refuses to take a photo of a subsegment unless it forms a **palindrome**, meaning that for every positive integer $i$ not exceeding the length of the subsegment, the breed of the $i$-th cow from the left end must be the same as the breed of the $i$-th cow from the right end. Each cow’s breed is either Guernsey or Holstein.\n\nFor each of the team’s $\\dfrac{N(N+1)}{2}$ contiguous subsegments, compute the minimum number of swaps needed to rearrange that subsegment into a palindrome (or $-1$ if it is impossible). A single swap consists of taking two adjacent cows in the subsequence and swapping them. Output the sum of these values over all subsegments.\n\nNote that the number of swaps needed for each contiguous subsegment is computed independently (the cows return to their original positions between photos).", "inputFormat": "Input the team as a string of length $N$ consisting of the characters $\\texttt{G}$ and $\\texttt{H}$.", "outputFormat": "Output the sum of the quantities described above over all $\\dfrac{N(N+1)}{2}$ contiguous subsegments.", "hint": "### Sample 1 Explanation\n\nThe first four contiguous subsegments are $\\texttt{G}$, $\\texttt{GH}$, $\\texttt{GHH}$, and $\\texttt{GHHG}$. $\\texttt{G}$ and $\\texttt{GHHG}$ are already palindromes, so their contribution to the total is $0$. $\\texttt{GHH}$ can be rearranged into a palindrome using one swap, so its contribution to the total is $1$. $\\texttt{GH}$ cannot be rearranged into a palindrome using any number of swaps, so its contribution to the total is $-1$.\n\n$\\texttt{HHGG}$ is another contiguous subsegment that contributes to the total. This subsegment can be rearranged into a palindrome using two swaps.\n\n### Test Case Properties\n\nBesides the sample, there are fifteen test cases, one each with $N \\in \\{ 100,200,500,1000,2000,5000,5000,5000,5000,5000,7500,7500,7500,7500,7500\\}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO22DEC] Palindromes P", "background": "", "description": "农夫约翰合牛国（The United Cows of Farmer John，UCFJ）正在参加一年一度的蹄球锦标赛！UCFJ 队的 $N(1 \\le N \\le 7500)$ 头奶牛以微弱优势击败了 Farmer Nhoj 的队伍，赢得了蹄球比赛的金牌。\n\n奶牛们已经为颁奖典礼排好了队。她们希望 FJ 拍摄 $\\dfrac{N(N+1)}{2}$ 张合影，为队伍的每个连续子段拍摄一张。\n\n然而，FJ，作为球队的主帅，对于奶牛们应该如何列队十分讲究。具体地说，他拒绝为一个子段拍照，除非它形成一个**回文串**，即对于所有不超过子段长度的正整数 $i$，从子段左端开始的第 $i$ 头奶牛的品种必须与从子段右端开始的第 $i$ \n头奶牛的品种相同。每头奶牛的品种是更赛牛（Guernsey）或荷斯坦牛（Holstein）之一。\n\n对于队伍的 $\\dfrac{N(N+1)}{2}$ 个连续子段的每一个，计算将该子段重新排列成回文串所需的最小换位次数（如果不可能这样做则为 $−1$）。单次换位是在子序列中取两头相邻的奶牛并交换。输出所有这些次数之和。\n\n注意对每个连续子段所需的换位次数是独立计算的（奶牛们会在照片拍摄之间返回她们的起始位置）。 ", "inputFormat": "输入队伍，用一个长为 $N$ 的字符 $\\texttt{G}$ 和 $\\texttt{H}$ 组成的字符串表示。 ", "outputFormat": "输出队伍的所有 $\\dfrac{N(N+1)}{2}$ 个连续子段的前述数量之和。 ", "hint": "### 样例 1 解释\n\n前四个连续子段是 $\\texttt{G}$，$\\texttt{GH}$，$\\texttt{GHH}$ 和 $\\texttt{GHHG}$。$\\texttt{G}$ 和 $\\texttt{GHHG}$ 都已经是回文串，因此它们对总和的贡献为 $0$。$\\texttt{GHH}$ 可以使用一次换位重新排列成回文串，因此它对总和的贡献为 $1$。$\\texttt{GH}$ 不能使用任意次数的换位重新排列成回文串，因此它对总和的贡献为 $−1$。\n\n$\\texttt{HHGG}$ 是另一个对总和有贡献的连续子段。这个子段可以使用两次换位重新排列成回文串。 \n\n### 测试点性质\n\n除样例外有十五个测试点，满足 $N \\in \\{ 100,200,500,1000,2000,5000,5000,5000,5000,5000,7500,7500,7500,7500,7500\\}$ 各一。", "locale": "zh-CN"}}}
{"pid": "P8909", "type": "P", "difficulty": 3, "samples": [["5 1000000\n1 2 3 4 5", "0 266666 333335 266665 116668 16666"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[RC-06] Multiples", "background": "", "description": "给出 $n$，以及一个长度为 $n$ 的数组 $a$，$a_1\\sim a_n$ 都是正整数，且 $a_i$ 在 $[1,10^9]$ 均匀随机生成。\n\n对每个 $0\\le k\\le n$ 计算 $[1,m]$ 中有几个正整数 $x$ 恰好是 $k$ 个 $a_i$ 的倍数（也就是恰好存在 $k$ 个 $1\\le i\\le n$，$a_i\\mid x$）。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$。", "outputFormat": "输出一行 $n+1$ 个整数，第 $i$ 个是 $k=i-1$ 的答案。", "hint": "本题没有部分分，只有 AC 才能得分。\n\n所有数据均满足：$1\\le n\\le 2500$，$1\\le m\\le 10^9$，$1\\le a_i\\le 10^9$，且 $a_i$ 在 $[1,10^9]$ 中均匀随机生成。\n\n**本题有 $6$ 组数据满足 $n=2500$，$2$ 组数据满足 $n\\le 10$，共 $8$ 组数据。**\n\n**所有数据都是如下方式生成：运行以下伪代码恰好一次生成，将其输出作为你的输入。**\n\n```\nfunction rnd(int l,int r):\n\nreturn [l,r] 之内的随机整数\n\nfunction main():\n\n输入本组数据的 n,m\n输出 n,m\n输出 n 个正整数，都是 rnd(1,10^9) 的返回值\n```\n\n如果你不理解上面的生成方式，也可以阅读对应的 C++ 代码：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nint main(){\n\tfreopen(\"in.txt\",\"w\",stdout);\n\tint n,m;\n\tcin>>n>>m;\n\tcout<<n<<' '<<m<<'\\n';\n\tmt19937_64 rng(time(0));\n\tconst int M=1e9;\n\tfor(int i=1;i<=n;i++)cout<<rng()%M+1<<' ';\n}\n```\n\n样例不满足 $a_i$ 在 $[1,10^9]$ 均匀随机生成，因此样例不是合法的输入数据。测试数据中不包含样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-06] Multiples", "background": "", "description": "给出 $n$，以及一个长度为 $n$ 的数组 $a$，$a_1\\sim a_n$ 都是正整数，且 $a_i$ 在 $[1,10^9]$ 均匀随机生成。\n\n对每个 $0\\le k\\le n$ 计算 $[1,m]$ 中有几个正整数 $x$ 恰好是 $k$ 个 $a_i$ 的倍数（也就是恰好存在 $k$ 个 $1\\le i\\le n$，$a_i\\mid x$）。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$。", "outputFormat": "输出一行 $n+1$ 个整数，第 $i$ 个是 $k=i-1$ 的答案。", "hint": "本题没有部分分，只有 AC 才能得分。\n\n所有数据均满足：$1\\le n\\le 2500$，$1\\le m\\le 10^9$，$1\\le a_i\\le 10^9$，且 $a_i$ 在 $[1,10^9]$ 中均匀随机生成。\n\n**本题有 $6$ 组数据满足 $n=2500$，$2$ 组数据满足 $n\\le 10$，共 $8$ 组数据。**\n\n**所有数据都是如下方式生成：运行以下伪代码恰好一次生成，将其输出作为你的输入。**\n\n```\nfunction rnd(int l,int r):\n\nreturn [l,r] 之内的随机整数\n\nfunction main():\n\n输入本组数据的 n,m\n输出 n,m\n输出 n 个正整数，都是 rnd(1,10^9) 的返回值\n```\n\n如果你不理解上面的生成方式，也可以阅读对应的 C++ 代码：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nint main(){\n\tfreopen(\"in.txt\",\"w\",stdout);\n\tint n,m;\n\tcin>>n>>m;\n\tcout<<n<<' '<<m<<'\\n';\n\tmt19937_64 rng(time(0));\n\tconst int M=1e9;\n\tfor(int i=1;i<=n;i++)cout<<rng()%M+1<<' ';\n}\n```\n\n样例不满足 $a_i$ 在 $[1,10^9]$ 均匀随机生成，因此样例不是合法的输入数据。测试数据中不包含样例。", "locale": "zh-CN"}}}
{"pid": "P8910", "type": "P", "difficulty": 3, "samples": [["2\n3 0\n2 1", "0\n3\n3 1\n1 2\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "[RC-06] Operation Sequence", "background": "", "description": "给出 $n$，以及一个长度为 $n+1$ 的数组 $[a_1,a_2,\\dots,a_{n+1}]$，初始时 $a_i=i\\ (1\\le i\\le n)$，$a_{n+1}=0$。\n\n你只能进行以下一种操作，通过输出特定字符串完成操作：\n\n- 输出 `i j` ：其中 $i,j$ 为正整数，要求 $1\\le i,j\\le n+1$，表示把 $a_i$ 赋值为 $a_j$。\n\n请把 $a$ 数组**的前 $n$ 位**向**右**循环移位 $K$ 位；即，在执行完毕你输出的所有操作后，要求 $a$ 数组第 $i\\ (1\\le i\\le K)$ 位等于 $n-K+i$；第 $i\\ (K+1\\le i\\le n)$ 位等于 $i-K$，第 $n+1$ 位任意。你只能进行至多 $T=\\lfloor1.5n\\rfloor$ 次赋值操作。\n\n如果你进行的操作数多于 $T$ 也可以获得部分分，具体地，设你的操作次数为 $S$：\n\n- 如果 $S\\le T$，得 $100$ 分。\n- 如果 $T<S\\le 4T$，得 $50$ 分。\n- 如果 $S>4T$，得 $0$ 分。\n\n你在本题的得分是所有测试点中所有数据里得分的最小值。", "inputFormat": "本题单个测试点内有多组数据。\n\n第一行是数据组数 $T$。\n\n对于每组数据：\n\n第一行两个正整数 $n,K$。", "outputFormat": "对于每组数据：\n\n在第一行输出操作数 $k\\ (0\\le k\\le 4T)$。**请注意，不需要最小化 $k$。**\n\n接下来 $k$ 行，每行输出两个正整数 $i,j$，表示一次操作。$(1\\le i,j\\le n+1)$", "hint": "所有数据均满足：$1\\le T\\le 10^4$，$1\\le n\\le 10^5$，$0\\le K\\le n-1$。保证同一个测试点中所有 $n$ 的和不超过 $5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-06] Operation Sequence", "background": "", "description": "给出 $n$，以及一个长度为 $n+1$ 的数组 $[a_1,a_2,\\dots,a_{n+1}]$，初始时 $a_i=i\\ (1\\le i\\le n)$，$a_{n+1}=0$。\n\n你只能进行以下一种操作，通过输出特定字符串完成操作：\n\n- 输出 `i j` ：其中 $i,j$ 为正整数，要求 $1\\le i,j\\le n+1$，表示把 $a_i$ 赋值为 $a_j$。\n\n请把 $a$ 数组**的前 $n$ 位**向**右**循环移位 $K$ 位；即，在执行完毕你输出的所有操作后，要求 $a$ 数组第 $i\\ (1\\le i\\le K)$ 位等于 $n-K+i$；第 $i\\ (K+1\\le i\\le n)$ 位等于 $i-K$，第 $n+1$ 位任意。你只能进行至多 $T=\\lfloor1.5n\\rfloor$ 次赋值操作。\n\n如果你进行的操作数多于 $T$ 也可以获得部分分，具体地，设你的操作次数为 $S$：\n\n- 如果 $S\\le T$，得 $100$ 分。\n- 如果 $T<S\\le 4T$，得 $50$ 分。\n- 如果 $S>4T$，得 $0$ 分。\n\n你在本题的得分是所有测试点中所有数据里得分的最小值。", "inputFormat": "本题单个测试点内有多组数据。\n\n第一行是数据组数 $T$。\n\n对于每组数据：\n\n第一行两个正整数 $n,K$。", "outputFormat": "对于每组数据：\n\n在第一行输出操作数 $k\\ (0\\le k\\le 4T)$。**请注意，不需要最小化 $k$。**\n\n接下来 $k$ 行，每行输出两个正整数 $i,j$，表示一次操作。$(1\\le i,j\\le n+1)$", "hint": "所有数据均满足：$1\\le T\\le 10^4$，$1\\le n\\le 10^5$，$0\\le K\\le n-1$。保证同一个测试点中所有 $n$ 的和不超过 $5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8911", "type": "P", "difficulty": 4, "samples": [["5 5\n2 4 1 3 5\n1 5 1145141919810", "24"], ["10 20000000\n1 3 4 10 5 5 2 7 10 7\n1 10 23333333333333333", "548722417"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[RC-06] Minimum and Maximum", "background": "受洛谷限制，本题数据有所删减。评测全套数据请到 [InfOJ](http://119.27.163.117/contest/7/)。", "description": "给定长度为 $n$ 的序列 $[a_1,a_2,\\dots ,a_n]$。\n\n$m$ 次询问，每次给出四个正整数 $L_1,R_1,L_2,R_2\\ (1\\le L_1\\le R_1\\le 4000,1\\le L_2\\le R_2\\le 4000)$，问有多少个区间 $[l,r]\\ (1\\le l\\le r\\le n)$ 满足 $a_l,a_{l+1},\\dots,a_r$ 中的最大值属于 $[L_1,R_1]$、最小值属于 $[L_2,R_2]$。\n\n询问次数很大，所以询问是在程序内生成的。请自行阅读提示说明一栏的代码。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$。\n\n接下来一行三个正整数 $p,q,seed$，为数据生成器的参数。你不需要理解数据生成器具体的运行过程，你只需要知道，如果正确生成了询问的话，一定有 $L_1,R_1,L_2,R_2\\in [p,q]$。", "outputFormat": "设第 $i$ 个询问的答案为 $ans_i$。输出一行一个整数，为 $\\operatorname{xor}_{i=1}^m \n(i\\times ans_i)$ 的值。", "hint": "**样例 1 解释**\n\n五次询问的 $(L_1,R_1,L_2,R_2)$ 分别为 $(1,5,1,5),(1,2,2,4),(3,4,2,2),(2,4,2,2),(2,5,2,5)$，答案分别为 $15,1,1,2,6$。\n\n输出 $(1\\times 15)\\ \\mathrm{xor}\\ (2\\times 1)\\ \\mathrm{xor}\\ (3\\times 1)\\ \\mathrm{xor}\\ (4\\times 2)\\ \\mathrm{xor}\\ (5\\times 6)=24$。\n\n**样例程序**\n\n下面是我们提供的样例程序，你可以直接以其为基础编写你的程序。\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nnamespace Generator{\ntypedef unsigned long long ull;\ntypedef __uint128_t L;\null seed;\nint p,q;\nstruct FastMod {\n    ull b, m;\n    FastMod(ull b) : b(b), m(ull((L(1) << 64) / b)) {}\n    ull reduce(ull a) {\n        ull q = (ull)((L(m) * a) >> 64);\n        ull r = a - q * b; // can be proven that 0 <= r < 2*b\n        return r >= b ? r - b : r;\n    }\n}F(2);\nvoid init(){\n\tcin>>p>>q>>seed;//读入 p,q,seed \n\tassert(p!=q);\n\tF=FastMod(q-p+1);\n}\nunsigned long long rd () {\n\tseed ^= (seed << 13);\n\tseed ^= (seed >> 7);\n\tseed ^= (seed << 17);\n\treturn seed;\n}\nvoid getlr(int &l1,int &r1,int &l2,int &r2){\n\t//将 l1,r1,l2,r2 作为参数传入，即可得到一组询问 \n\tl1=F.reduce(rd())+p;\n\tr1=F.reduce(rd())+p;\n\tl2=F.reduce(rd())+p;\n\tr2=F.reduce(rd())+p;\n\tif(l1>r1)swap(l1,r1);\n\tif(l2>r2)swap(l2,r2);\n}\n\n}\nint n,m,a[100005];\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n\tGenerator::init();\n\tlong long xorsum=0;\n\tfor(int i=1,l1,r1,l2,r2;i<=m;i++){\n\t\tGenerator::getlr(l1,r1,l2,r2);\n\t\tlong long ans=/*ans保存你的答案*/;\n\t\txorsum^=ans*i;\n\t}\n\tcout<<xorsum;\n}\n```\n\n**数据范围**\n\n本题有四个子任务。子任务一时间限制 $0.5$ 秒，其它子任务时间限制 $5$ 秒。\n\n所有数据均满足：$1\\le n\\le 10^5$，$1\\le m\\le 2\\times 10^7$，$1\\le a_i\\le 4000$，$1\\le p\\lt q\\le 4000$，$0\\le seed\\lt 2^{64}$。\n\n- 子任务 $1$（$5$ 分）：$n,m,a_i,q\\le 10$。\n- 子任务 $2$（$20$ 分）：$n\\le 10^4$。\n- 子任务 $3$（$20$ 分）：$a_i,q\\le 10$。\n- 子任务 $4$（$55$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-06] Minimum and Maximum", "background": "受洛谷限制，本题数据有所删减。评测全套数据请到 [InfOJ](http://119.27.163.117/contest/7/)。", "description": "给定长度为 $n$ 的序列 $[a_1,a_2,\\dots ,a_n]$。\n\n$m$ 次询问，每次给出四个正整数 $L_1,R_1,L_2,R_2\\ (1\\le L_1\\le R_1\\le 4000,1\\le L_2\\le R_2\\le 4000)$，问有多少个区间 $[l,r]\\ (1\\le l\\le r\\le n)$ 满足 $a_l,a_{l+1},\\dots,a_r$ 中的最大值属于 $[L_1,R_1]$、最小值属于 $[L_2,R_2]$。\n\n询问次数很大，所以询问是在程序内生成的。请自行阅读提示说明一栏的代码。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$。\n\n接下来一行三个正整数 $p,q,seed$，为数据生成器的参数。你不需要理解数据生成器具体的运行过程，你只需要知道，如果正确生成了询问的话，一定有 $L_1,R_1,L_2,R_2\\in [p,q]$。", "outputFormat": "设第 $i$ 个询问的答案为 $ans_i$。输出一行一个整数，为 $\\operatorname{xor}_{i=1}^m \n(i\\times ans_i)$ 的值。", "hint": "**样例 1 解释**\n\n五次询问的 $(L_1,R_1,L_2,R_2)$ 分别为 $(1,5,1,5),(1,2,2,4),(3,4,2,2),(2,4,2,2),(2,5,2,5)$，答案分别为 $15,1,1,2,6$。\n\n输出 $(1\\times 15)\\ \\mathrm{xor}\\ (2\\times 1)\\ \\mathrm{xor}\\ (3\\times 1)\\ \\mathrm{xor}\\ (4\\times 2)\\ \\mathrm{xor}\\ (5\\times 6)=24$。\n\n**样例程序**\n\n下面是我们提供的样例程序，你可以直接以其为基础编写你的程序。\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nnamespace Generator{\ntypedef unsigned long long ull;\ntypedef __uint128_t L;\null seed;\nint p,q;\nstruct FastMod {\n    ull b, m;\n    FastMod(ull b) : b(b), m(ull((L(1) << 64) / b)) {}\n    ull reduce(ull a) {\n        ull q = (ull)((L(m) * a) >> 64);\n        ull r = a - q * b; // can be proven that 0 <= r < 2*b\n        return r >= b ? r - b : r;\n    }\n}F(2);\nvoid init(){\n\tcin>>p>>q>>seed;//读入 p,q,seed \n\tassert(p!=q);\n\tF=FastMod(q-p+1);\n}\nunsigned long long rd () {\n\tseed ^= (seed << 13);\n\tseed ^= (seed >> 7);\n\tseed ^= (seed << 17);\n\treturn seed;\n}\nvoid getlr(int &l1,int &r1,int &l2,int &r2){\n\t//将 l1,r1,l2,r2 作为参数传入，即可得到一组询问 \n\tl1=F.reduce(rd())+p;\n\tr1=F.reduce(rd())+p;\n\tl2=F.reduce(rd())+p;\n\tr2=F.reduce(rd())+p;\n\tif(l1>r1)swap(l1,r1);\n\tif(l2>r2)swap(l2,r2);\n}\n\n}\nint n,m,a[100005];\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n\tGenerator::init();\n\tlong long xorsum=0;\n\tfor(int i=1,l1,r1,l2,r2;i<=m;i++){\n\t\tGenerator::getlr(l1,r1,l2,r2);\n\t\tlong long ans=/*ans保存你的答案*/;\n\t\txorsum^=ans*i;\n\t}\n\tcout<<xorsum;\n}\n```\n\n**数据范围**\n\n本题有四个子任务。子任务一时间限制 $0.5$ 秒，其它子任务时间限制 $5$ 秒。\n\n所有数据均满足：$1\\le n\\le 10^5$，$1\\le m\\le 2\\times 10^7$，$1\\le a_i\\le 4000$，$1\\le p\\lt q\\le 4000$，$0\\le seed\\lt 2^{64}$。\n\n- 子任务 $1$（$5$ 分）：$n,m,a_i,q\\le 10$。\n- 子任务 $2$（$20$ 分）：$n\\le 10^4$。\n- 子任务 $3$（$20$ 分）：$a_i,q\\le 10$。\n- 子任务 $4$（$55$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8912", "type": "P", "difficulty": 4, "samples": [["5\n2 3 3 4 5", "3"], ["10\n1 1 2 2 3 3 4 4 5 8", "25"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[RC-06] ijk", "background": "", "description": "给定一个序列 $[a_1,a_2,a_3,\\dots,a_n]$，保证 $\\forall i\\in [2,n], a_i\\ge a_{i-1}$。\n\n计算有多少整数三元组 $(i,j,k)$ 满足：\n\n- $1\\le i,j,k\\le n$。\n- $a_i\\times j\\times a_k=i+a_j+k$。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\dots,a_n$。保证 $a_i\\ge a_{i-1}$。", "outputFormat": "输出一行一个非负整数，为答案。", "hint": "本题有三个子任务。\n\n所有数据均满足：$1\\le n\\le 10^6$，$1\\le a_i\\le 10^6$，$a_i\\ge a_{i-1}$。\n\n- 子任务 $1$（$5$ 分）：$n\\le 500$。\n- 子任务 $2$（$5$ 分）：$a_i\\le 10 $。\n- 子任务 $3$（$90$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-06] ijk", "background": "", "description": "给定一个序列 $[a_1,a_2,a_3,\\dots,a_n]$，保证 $\\forall i\\in [2,n], a_i\\ge a_{i-1}$。\n\n计算有多少整数三元组 $(i,j,k)$ 满足：\n\n- $1\\le i,j,k\\le n$。\n- $a_i\\times j\\times a_k=i+a_j+k$。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\dots,a_n$。保证 $a_i\\ge a_{i-1}$。", "outputFormat": "输出一行一个非负整数，为答案。", "hint": "本题有三个子任务。\n\n所有数据均满足：$1\\le n\\le 10^6$，$1\\le a_i\\le 10^6$，$a_i\\ge a_{i-1}$。\n\n- 子任务 $1$（$5$ 分）：$n\\le 500$。\n- 子任务 $2$（$5$ 分）：$a_i\\le 10 $。\n- 子任务 $3$（$90$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8913", "type": "P", "difficulty": 4, "samples": [["6 3\n2\n4\n6", "8\n1 1 1 1 1 1 1 1\n++-+-++-\n++-++++-\n++-+++++"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "[RC-06] Remake", "background": "", "description": "请你构造 $n$ 个正整数 $a_1\\sim a_n$ 满足：\n\n- $\\forall X\\in [L,R]$ 且 $X$ 是偶数，$\\exists b_1\\sim b_n$，使得 $\\forall 1\\le i\\le n,b_i\\in \\{-1,1\\}$ 且 $\\sum _{1\\le i\\le n} a_ib_i=X$。$L,R$ 的值见数据范围。\n- 设 $cnt_i$ 为满足 $a_j=i$ 的 $j$ 的个数，则 $cnt_i$ 要么等于 $0$，要么大于等于 $2$。\n- $1\\le n\\le 40$。\n\n为了验证你的 $a_i$ 确实满足条件，会给出 $Q$ 组询问，每次询问偶数 $X \\in [L,R]$，请你输出一组合法的 $b_i$。", "inputFormat": "第一行两个正整数 $M,Q$，$M$ 表示 $X$ 的上界。在测试数据中，保证 $M=10^9$。\n\n接下来 $Q$ 行，每行一个正偶数 $X$。保证 $X\\in [L,R]$。\n\n注意 $L,R$ 并不会在输入中给出，你可以认为 $L=\\min X,R=\\max X$。", "outputFormat": "第一行输出你构造的正整数个数 $n$。$(1\\le n\\le 40)$\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$。$(1\\le a_i\\le 10^9)$\n\n接下来 $Q$ 行，每行 $n$ 个字符，每个字符是 `+` 或 `-`。设第 $i$ 个字符为 $s_i$，设本次询问的值为 $X$，则需要满足 $\\sum _{1\\le i\\le n} a_i([s_i=$ `+` $]-[s_i=$ `-` $])=X$，其中 $[P]$ 在 $P$ 成立时等于 $1$，否则等于 $0$。\n\n你输出的 $a_i$ 需要满足题面中的要求。", "hint": "本题有三个子任务。\n\n所有数据均满足：$2\\le M\\le 10^9$，$1\\le Q\\le 10^5$，$X\\in [L,R]$。\n\n- 子任务 $1$（$25$ 分）：$L=2$，$R=2\\times 10^5$。\n- 子任务 $2$（$5$ 分）：$L=10^9-2\\times 10^5+2$，$R=10^9$。\n- 子任务 $3$（$70$ 分）：$L=2$，$R=M$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-06] Remake", "background": "", "description": "请你构造 $n$ 个正整数 $a_1\\sim a_n$ 满足：\n\n- $\\forall X\\in [L,R]$ 且 $X$ 是偶数，$\\exists b_1\\sim b_n$，使得 $\\forall 1\\le i\\le n,b_i\\in \\{-1,1\\}$ 且 $\\sum _{1\\le i\\le n} a_ib_i=X$。$L,R$ 的值见数据范围。\n- 设 $cnt_i$ 为满足 $a_j=i$ 的 $j$ 的个数，则 $cnt_i$ 要么等于 $0$，要么大于等于 $2$。\n- $1\\le n\\le 40$。\n\n为了验证你的 $a_i$ 确实满足条件，会给出 $Q$ 组询问，每次询问偶数 $X \\in [L,R]$，请你输出一组合法的 $b_i$。", "inputFormat": "第一行两个正整数 $M,Q$，$M$ 表示 $X$ 的上界。在测试数据中，保证 $M=10^9$。\n\n接下来 $Q$ 行，每行一个正偶数 $X$。保证 $X\\in [L,R]$。\n\n注意 $L,R$ 并不会在输入中给出，你可以认为 $L=\\min X,R=\\max X$。", "outputFormat": "第一行输出你构造的正整数个数 $n$。$(1\\le n\\le 40)$\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$。$(1\\le a_i\\le 10^9)$\n\n接下来 $Q$ 行，每行 $n$ 个字符，每个字符是 `+` 或 `-`。设第 $i$ 个字符为 $s_i$，设本次询问的值为 $X$，则需要满足 $\\sum _{1\\le i\\le n} a_i([s_i=$ `+` $]-[s_i=$ `-` $])=X$，其中 $[P]$ 在 $P$ 成立时等于 $1$，否则等于 $0$。\n\n你输出的 $a_i$ 需要满足题面中的要求。", "hint": "本题有三个子任务。\n\n所有数据均满足：$2\\le M\\le 10^9$，$1\\le Q\\le 10^5$，$X\\in [L,R]$。\n\n- 子任务 $1$（$25$ 分）：$L=2$，$R=2\\times 10^5$。\n- 子任务 $2$（$5$ 分）：$L=10^9-2\\times 10^5+2$，$R=10^9$。\n- 子任务 $3$（$70$ 分）：$L=2$，$R=M$。", "locale": "zh-CN"}}}
{"pid": "P8914", "type": "P", "difficulty": 4, "samples": [["4 3 1 2 3\n1 3 1\n2 4 2\n4 3 1", "YES\n1.5"], ["4 3 1 2 3\n1 3 2\n2 4 2\n4 3 1", "NO\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "最短路"], "title": "[DMOI-R2] 梦境", "background": "小 A 做噩梦了。", "description": "小 A 的梦境可以看做有 $n$ 个点，$m$ 条边的无向图。小 A 在图上的点 $S$，有一个怪物在点 $B$，安全屋在点 $F$。\n\n怪物正在追杀小 A，现在小 A 需要逃到安全屋。小 A 意识到这是在自己的梦境里，所以他在一定程度上操控了梦境。他把怪物的移动速度设置成了 $3$，但代价是自己的移动速度被设置成 $2$。\n\n小 A 始终会沿着到 $F$ 的最短路走，如果有多条最短路，则小 A 会选择使得**经过点的编号所顺次构成序列的字典序最小**的那条最短路，因为他觉得这样走最不容易被怪物抓到。\n\n而怪物在梦境中游荡，会随机向自身周围的点移动，且怪物已经访问过的点不会重复访问。\n\n现在小 A 需要知道**在最坏情况下**他能否安全到达安全屋，或者何时被怪物抓住。", "inputFormat": "第一行五个整数 $n,m,S,B,F$。\n\n接下来 $m$ 行，第 $i$ 行三个整数 $u_i,v_i,w_i$，代表 $u_i,v_i$ 之间有一条长度为 $w_i$ 的无向边。", "outputFormat": "两行。\n\n如果小 A **在最坏情况下**能够安全到达安全屋，输出 `YES`，接下来一行输出小 A 到达安全屋后怪物到安全屋的距离。\n\n如果小 A **在最坏情况下**不能安全到达安全屋，输出 `NO`，接下来一行输出小 A 在何时被怪物抓到。\n\n若第二行的答案为整数则输出整数，**否则输出小数**。", "hint": "**关于最坏情况的解释**：怪物的走法可能有多种。也就是说，你需要同时考虑怪物的每种走法，只要怪物的某种最短路走法可以抓到小 A 时答案即为 `NO`。而最坏情况是指怪物的走法在所有走法中能够最快抓到（或接近）小 A 的情况。\n\n另外本题没有 special judge，也就是说如果答案是整数，你需要严格输出整数答案，不带小数点。同时数据保证不存在小数位数超过两位的答案。\n\n### 数据范围\n\n本题采用捆绑测试。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\\hline \n\\textbf{~~Subtask~~}&\\bm{~~n \\le ~~}&\\bm{~~~~m \\le~~~~}& ~\\textbf{~~特殊性质~~}~&\\textbf{~~分值~~}\\cr\\hline \n0\t&10\t\t\t&20\t\t\t&\t\t&10\\cr\\hline \n1\t&500\t\t&1000\t\t&\t\t&10\\cr\\hline \n2\t&800 \t\t&2000\t\t&\t\t&10\\cr\\hline \n3\t&2\\times10^5&  \t\t\t&\\text{A+B}&15\t\\cr\\hline \n4\t&2\\times10^5& \t\t\t&\\text{A}&15\t\\cr\\hline\n5\t&10^5\t\t&2\\times10^5&\t\t&20\\cr\\hline\n6\t&2\\times10^5&2\\times10^5&\t\t&20\n\\end{array}\n$$\n\n特殊性质 $\\text{A}$：$m=n-1$。\n\n特殊性质 $\\text{B}$：对于给定的每个 $v_i$，满足 $v_i=u_i+1$。\n\n对于 $100\\%$ 的数据，保证 $S \\ne B \\ne F$ 且 $1 \\le S,B,F \\le n$，$1 \\le w_i \\le 10^3$，图连通且不存在重边。\n\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{0,3\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $4$，您需要答对子任务 $3$ 才能获得子任务 $4$ 的分数。\n- 对于子任务 $i\\in\\{1,2,5,6\\}$，您需要答对子任务 $0$ 才能获得子任务 $i$ 的分数。\n\n### 附件说明\n对于赛时许多选手卡在了 sub3，此处提供一组 sub3 内的数据用于检查并改正代码。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DMOI-R2] 梦境", "background": "小 A 做噩梦了。", "description": "小 A 的梦境可以看做有 $n$ 个点，$m$ 条边的无向图。小 A 在图上的点 $S$，有一个怪物在点 $B$，安全屋在点 $F$。\n\n怪物正在追杀小 A，现在小 A 需要逃到安全屋。小 A 意识到这是在自己的梦境里，所以他在一定程度上操控了梦境。他把怪物的移动速度设置成了 $3$，但代价是自己的移动速度被设置成 $2$。\n\n小 A 始终会沿着到 $F$ 的最短路走，如果有多条最短路，则小 A 会选择使得**经过点的编号所顺次构成序列的字典序最小**的那条最短路，因为他觉得这样走最不容易被怪物抓到。\n\n而怪物在梦境中游荡，会随机向自身周围的点移动，且怪物已经访问过的点不会重复访问。\n\n现在小 A 需要知道**在最坏情况下**他能否安全到达安全屋，或者何时被怪物抓住。", "inputFormat": "第一行五个整数 $n,m,S,B,F$。\n\n接下来 $m$ 行，第 $i$ 行三个整数 $u_i,v_i,w_i$，代表 $u_i,v_i$ 之间有一条长度为 $w_i$ 的无向边。", "outputFormat": "两行。\n\n如果小 A **在最坏情况下**能够安全到达安全屋，输出 `YES`，接下来一行输出小 A 到达安全屋后怪物到安全屋的距离。\n\n如果小 A **在最坏情况下**不能安全到达安全屋，输出 `NO`，接下来一行输出小 A 在何时被怪物抓到。\n\n若第二行的答案为整数则输出整数，**否则输出小数**。", "hint": "**关于最坏情况的解释**：怪物的走法可能有多种。也就是说，你需要同时考虑怪物的每种走法，只要怪物的某种最短路走法可以抓到小 A 时答案即为 `NO`。而最坏情况是指怪物的走法在所有走法中能够最快抓到（或接近）小 A 的情况。\n\n另外本题没有 special judge，也就是说如果答案是整数，你需要严格输出整数答案，不带小数点。同时数据保证不存在小数位数超过两位的答案。\n\n### 数据范围\n\n本题采用捆绑测试。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\\hline \n\\textbf{~~Subtask~~}&\\bm{~~n \\le ~~}&\\bm{~~~~m \\le~~~~}& ~\\textbf{~~特殊性质~~}~&\\textbf{~~分值~~}\\cr\\hline \n0\t&10\t\t\t&20\t\t\t&\t\t&10\\cr\\hline \n1\t&500\t\t&1000\t\t&\t\t&10\\cr\\hline \n2\t&800 \t\t&2000\t\t&\t\t&10\\cr\\hline \n3\t&2\\times10^5&  \t\t\t&\\text{A+B}&15\t\\cr\\hline \n4\t&2\\times10^5& \t\t\t&\\text{A}&15\t\\cr\\hline\n5\t&10^5\t\t&2\\times10^5&\t\t&20\\cr\\hline\n6\t&2\\times10^5&2\\times10^5&\t\t&20\n\\end{array}\n$$\n\n特殊性质 $\\text{A}$：$m=n-1$。\n\n特殊性质 $\\text{B}$：对于给定的每个 $v_i$，满足 $v_i=u_i+1$。\n\n对于 $100\\%$ 的数据，保证 $S \\ne B \\ne F$ 且 $1 \\le S,B,F \\le n$，$1 \\le w_i \\le 10^3$，图连通且不存在重边。\n\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{0,3\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $4$，您需要答对子任务 $3$ 才能获得子任务 $4$ 的分数。\n- 对于子任务 $i\\in\\{1,2,5,6\\}$，您需要答对子任务 $0$ 才能获得子任务 $i$ 的分数。\n\n### 附件说明\n对于赛时许多选手卡在了 sub3，此处提供一组 sub3 内的数据用于检查并改正代码。", "locale": "zh-CN"}}}
{"pid": "P8915", "type": "P", "difficulty": 6, "samples": [["5\n4 3 2 0\n5 7 3 0\n2 2 3 0\n1 8 2 0\n19 13 3 0", "49\n4773\n0\n21\n2369219"], ["10\n4329 12935 3 0\n125891 5949823 2 0\n95023489 15327384 3 0\n28592394 32891538 2 0\n5894392 52374853 2 0\n58963495 32591238 3 0\n438291538 42819324 3 0\n58493683 234728 2 0\n284952 823499 3 0\n528394298 25892948 3 0", "468372138\n510295355\n536959469\n56564283\n462091483\n842203294\n778629925\n806214146\n91259493\n793676806"], ["10\n55888076 506356561 3 3\n48940088 192152177\n33004718 365781091\n45088097 31400730\n65004621 206038505 2 3\n50919157 24882066\n50919158 24882064\n50919156 24882067\n249418509 7616530 2 1\n205309921 4639136\n164784593 419325145 3 4\n105814446 200482317\n105814449 200482315\n105814443 200482315\n79723922 206425705\n477366546 180501076 3 4\n39819749 14485585\n39819746 14485582\n39819743 14485588\n39819748 14485585\n84215455 29656489 3 0\n524291275 23244413 3 4\n8149961 10903189\n8149958 10903192\n8149958 10903193\n8149961 10903191\n584987873 823324694 3 1\n540008401 27919189\n25681672 419244427 2 4\n4753299 108169462\n4753301 108169463\n4753298 108169462\n4753298 108169464\n313195991 98402123 3 3\n7016773 83186671\n7016770 83186674\n7016767 83186675", "580170965\n521412840\n890711205\n353426094\n41995284\n193113183\n352219667\n748854206\n767819374\n351309432"], ["10\n2 4 2 4\n1 1\n1 3\n2 1\n2 4\n2 4 3 3\n1 2\n2 3\n1 4\n1 1 3 0\n3 4 2 0\n3 2 2 1\n1 2\n4 2 3 0\n2 3 2 0\n5 4 3 3\n2 4\n1 3\n1 1\n4 5 2 2\n1 4\n2 1\n3 1 2 0", "4\n5\n0\n49\n5\n12\n8\n385\n128\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "组合数学", "容斥原理"], "title": "[DMOI-R2] 回到过去", "background": " > 想回到过去\\\n试着抱你在怀里\\\n羞怯的脸带有一点稚气\\\n想看你看的世界\\\n想在你梦的画面\\\n只要靠在一起就能感觉甜蜜\\\n想回到过去\\\n试着让故事继续\\\n至少不再让你离我而去\\\n分散时间的注意\\\n这次会抱得更紧\\\n这样挽留不知还来不来得及\\\n想回到过去\\\n沉默支撑跃过陌生\\\n静静看着凌晨黄昏\\\n你的身影 失去平衡\\\n慢慢下沉\\\n想回到过去\\\n—— 周杰伦《[回到过去](https://www.bilibili.com/video/BV1fx411N7bU?p=32&vd_source=2f4592e5507d6452d7d44dc098844d6b)》\n>\n\n什么阻碍着两颗心的碰面？什么阻碍着两个人的相见？\n\n或许是令人捉摸不透的时间吧。", "description": "给出 $n,m,t$ 以及 $t$ 个障碍物坐标，求在 $n$ 行 $m$ 列的矩阵中的非障碍位置上放置 $k$ 个两两之间没有公共边的方格的方案有多少种，答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示测试点数量。\n\n接下来 $T$ 个测试点，每个测试点的第一行四个整数 $n,m,k,t$。接下来 $t$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 个障碍物的坐标（保证不重叠）。", "outputFormat": "共 $T$ 行，每行一个整数表示当前询问的答案。", "hint": "#### 【样例解释 #4】\n\n对于测试点 1，可以画出如下的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ld7rcxr.png)\n\n其中用黑色格子表示障碍物，可发现只有 $\\{(1,2)(1,4)\\}\\{(1,2)(2,3)\\}\\{(2,2)(1,4)\\}\\{(2,3)(1,4)\\}$ 四种方案满足题意。\n\n对于测试点 2，可以画出如下的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/74rbxvs6.png)\n\n可发现只有 $\\{(1,1)(1,3)(2,2)\\}\\{(1,1)(1,3)(2,4)\\}\\{(1,1)(2,2)(2,4)\\}\\{(1,3)(2,1)(2,4)\\}\\{(1,3)(2,2)(2,4)\\}$ 五种情况符合题意。\n\n### 数据点约定\n\n|  数据点编号  |    $n$     |    $m$     |       $k$       |         $t$         |\n| :----------: | :--------: | :--------: | :-------------: | :-----------------: |\n|     $1$      |    $=1$    | $\\le 10^9$ |      $=2$       |        $=0$         |\n|     $2$      |    $=1$    | $\\le 10^9$ |      $=3$       |        $=0$         |\n|     $3$      |  $\\le 20$  |  $\\le 20$  |      $=2$       |        $=0$         |\n|     $4$      |  $\\le 20$  |  $\\le 20$  |      $=3$       |        $=0$         |\n|     $5$      |  $\\le 20$  |  $\\le 20$  |      $=2$       |      $\\le 400$      |\n|     $6$      |  $\\le 20$  |  $\\le 20$  |      $=3$       |      $\\le 400$      |\n|    $7,8$     | $\\le 1000$ | $\\le 1000$ |      $=2$       |        $=0$         |\n|    $9,10$    | $\\le 1000$ | $\\le 1000$ |      $=3$       |        $=0$         |\n|     $11$     | $\\le 1000$ | $\\le 1000$ |      $=2$       |      $\\le 10$       |\n|     $12$     | $\\le 1000$ | $\\le 1000$ |      $=3$       |      $\\le 10$       |\n|   $13,14$    | $\\le 10^9$ |    $=n$    |      $=2$       |        $=0$         |\n|   $15,16$    | $\\le 10^9$ |    $=n$    |      $=3$       |        $=0$         |\n|   $17,18$    | $\\le 10^9$ | $\\le 10^9$ |      $=2$       |        $=0$         |\n|   $19,20$    | $\\le 10^9$ | $\\le 10^9$ |      $=3$       |        $=0$         |\n|   $21,22$    | $\\le 10^9$ | $\\le 10^9$ |      $=2$       | $\\le 2 \\times 10^4$ |\n|   $23,24$    | $\\le 10^9$ | $\\le 10^9$ |      $=3$       | $\\le 2 \\times 10^4$ |\n| $25$ | $\\le 10^9$ | $\\le 10^9$ | $2 \\le k \\le 3$ | $\\le 2 \\times 10^4$ |\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^9$，$2 \\le k \\le 3$，$0 \\le t \\le \\min(n\\cdot m,2 \\times 10^4)$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，$1 \\le T \\le 10$。每个数据点等分值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DMOI-R2] 回到过去", "background": " > 想回到过去\\\n试着抱你在怀里\\\n羞怯的脸带有一点稚气\\\n想看你看的世界\\\n想在你梦的画面\\\n只要靠在一起就能感觉甜蜜\\\n想回到过去\\\n试着让故事继续\\\n至少不再让你离我而去\\\n分散时间的注意\\\n这次会抱得更紧\\\n这样挽留不知还来不来得及\\\n想回到过去\\\n沉默支撑跃过陌生\\\n静静看着凌晨黄昏\\\n你的身影 失去平衡\\\n慢慢下沉\\\n想回到过去\\\n—— 周杰伦《[回到过去](https://www.bilibili.com/video/BV1fx411N7bU?p=32&vd_source=2f4592e5507d6452d7d44dc098844d6b)》\n>\n\n什么阻碍着两颗心的碰面？什么阻碍着两个人的相见？\n\n或许是令人捉摸不透的时间吧。", "description": "给出 $n,m,t$ 以及 $t$ 个障碍物坐标，求在 $n$ 行 $m$ 列的矩阵中的非障碍位置上放置 $k$ 个两两之间没有公共边的方格的方案有多少种，答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示测试点数量。\n\n接下来 $T$ 个测试点，每个测试点的第一行四个整数 $n,m,k,t$。接下来 $t$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 个障碍物的坐标（保证不重叠）。", "outputFormat": "共 $T$ 行，每行一个整数表示当前询问的答案。", "hint": "#### 【样例解释 #4】\n\n对于测试点 1，可以画出如下的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ld7rcxr.png)\n\n其中用黑色格子表示障碍物，可发现只有 $\\{(1,2)(1,4)\\}\\{(1,2)(2,3)\\}\\{(2,2)(1,4)\\}\\{(2,3)(1,4)\\}$ 四种方案满足题意。\n\n对于测试点 2，可以画出如下的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/74rbxvs6.png)\n\n可发现只有 $\\{(1,1)(1,3)(2,2)\\}\\{(1,1)(1,3)(2,4)\\}\\{(1,1)(2,2)(2,4)\\}\\{(1,3)(2,1)(2,4)\\}\\{(1,3)(2,2)(2,4)\\}$ 五种情况符合题意。\n\n### 数据点约定\n\n|  数据点编号  |    $n$     |    $m$     |       $k$       |         $t$         |\n| :----------: | :--------: | :--------: | :-------------: | :-----------------: |\n|     $1$      |    $=1$    | $\\le 10^9$ |      $=2$       |        $=0$         |\n|     $2$      |    $=1$    | $\\le 10^9$ |      $=3$       |        $=0$         |\n|     $3$      |  $\\le 20$  |  $\\le 20$  |      $=2$       |        $=0$         |\n|     $4$      |  $\\le 20$  |  $\\le 20$  |      $=3$       |        $=0$         |\n|     $5$      |  $\\le 20$  |  $\\le 20$  |      $=2$       |      $\\le 400$      |\n|     $6$      |  $\\le 20$  |  $\\le 20$  |      $=3$       |      $\\le 400$      |\n|    $7,8$     | $\\le 1000$ | $\\le 1000$ |      $=2$       |        $=0$         |\n|    $9,10$    | $\\le 1000$ | $\\le 1000$ |      $=3$       |        $=0$         |\n|     $11$     | $\\le 1000$ | $\\le 1000$ |      $=2$       |      $\\le 10$       |\n|     $12$     | $\\le 1000$ | $\\le 1000$ |      $=3$       |      $\\le 10$       |\n|   $13,14$    | $\\le 10^9$ |    $=n$    |      $=2$       |        $=0$         |\n|   $15,16$    | $\\le 10^9$ |    $=n$    |      $=3$       |        $=0$         |\n|   $17,18$    | $\\le 10^9$ | $\\le 10^9$ |      $=2$       |        $=0$         |\n|   $19,20$    | $\\le 10^9$ | $\\le 10^9$ |      $=3$       |        $=0$         |\n|   $21,22$    | $\\le 10^9$ | $\\le 10^9$ |      $=2$       | $\\le 2 \\times 10^4$ |\n|   $23,24$    | $\\le 10^9$ | $\\le 10^9$ |      $=3$       | $\\le 2 \\times 10^4$ |\n| $25$ | $\\le 10^9$ | $\\le 10^9$ | $2 \\le k \\le 3$ | $\\le 2 \\times 10^4$ |\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^9$，$2 \\le k \\le 3$，$0 \\le t \\le \\min(n\\cdot m,2 \\times 10^4)$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，$1 \\le T \\le 10$。每个数据点等分值。", "locale": "zh-CN"}}}
{"pid": "P8916", "type": "P", "difficulty": 4, "samples": [["4\n1 2 \n1 3 \n2 4 \n6 -2 4 -7 ", "5"], ["10\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n4 8\n4 9\n4 10\n-3 9 4 -3 -2 5 -1 -3 -9 7", "42"], ["20\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n4 8\n4 9\n4 10\n6 11\n6 12\n7 13\n7 14\n7 15\n7 16\n8 17\n9 18\n11 19\n15 20\n1 2 -1 -4 9 -3 -5 8 9 -10 -13 15 11 -6 17 -1 -19 20 -5 -9", "266"], ["6\n1 2\n1 3\n1 4\n2 5\n2 6\n-1 5 -3 -4 -5 -7", "-10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "树形 DP"], "title": "[DMOI-R2] 暗号", "background": "> 有太多人太多事 夹在我们之间咆哮  \n> 杂讯太多讯号弱 就连风吹都要干扰  \n> 可是你不想 一直走在黑暗地下道  \n> 想吹风想自由 想要一起手牵手 去看海绕世界流浪  \n> ——《[暗号](https://www.bilibili.com/video/BV1p24y1f7zM)》\n\n书接上回，每个军队都拿到了补给。但是要上战场，准备还不是很充分。JF 只有军队组成了一个集团军。才有可能形成一股强大的战斗力，才可以在军阀混战中取得胜利。", "description": "已知 JF 有 $n$ 支军队，他们分别由 $n-1$ 条边连接。$1$ 号军队为根。每支军队有自己的或黑或白的 **“暗号”**，方便相互联系，以及他的战力值和士气值。**初始的时候，军队的士气值等于战力值**。我们从深度最深的军队开始改变士气值，对于当前的军队 $u$ 来说，在与他直接相连的军队且深度比 $u$ 深的军队中，如果有军队 $v$ 和他的暗号相同，$u$ 就可以联系上 $v$，然后 $u$ 的士气值 **就必须全部加上**  $v$ 的子树内和 $v$ 颜色相同的点的战力值。（可以理解为，在 $u$ 的士气更新完毕时，$u$ 的子树的士气也更新完毕了。）  \n\n现在，你可以任意修改这些军队的暗号。要你求出所有**军队士气值的和的最大值**是多少。", "inputFormat": "\n第一行一个整数 $n$，如题所示。\n\n第二行至第 $n$ 行每行有两个数，表示 $u$ 和 $v$ 之间有连边。\n\n第 $n+1$ 行有 $n$ 个数，第 $i$ 个数表示第 $i$ 支军队一开始的战力值 $w_i$。\n", "outputFormat": "一行一个整数，表示士气值之和的最大值。", "hint": "#### 【样例解释 #1】\n\n我们将军队 $1,3,4$ 的暗号改为黑色，军队 $2$ 的暗号改成白色。这样，军队 $1,2,3,4$ 的最终士气值变为 $10,-2,4,-7$，总和为 $5$。可以证明不存在使得最终士气值和更大的方案。\n\n#### 【样例解释 #2】\n\n我们用 $1$ 表示黑色暗号，用 $2$ 表示白色暗号，那么 $n$ 支军队的暗号颜色分别如下：`1 1 1 1 2 1 2 2 2 1`。这样整支军队的士气值和为 $42$，可以证明不存在士气值和更大的方案。\n\n#### 【数据范围与约定】\n\n| 测试点编号 | $n \\le$ | 特殊条件 |\n| :----------: | :----------: | :----------: |\n| $1\\sim2$ | $20$ | 无 |\n| $3 \\sim 6$ | $50$ | 无 |\n| $7 \\sim 10$ | $300$ | $v=u+1$ |\n| $11\\sim12$ | $300$ | $1 \\le w_i \\le 1000$ |\n| $13\\sim14$ | $300$ | $u=1$ |\n| $15 \\sim 20$ | $300$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 300$，$-1000 \\le w_i \\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DMOI-R2] 暗号", "background": "> 有太多人太多事 夹在我们之间咆哮  \n> 杂讯太多讯号弱 就连风吹都要干扰  \n> 可是你不想 一直走在黑暗地下道  \n> 想吹风想自由 想要一起手牵手 去看海绕世界流浪  \n> ——《[暗号](https://www.bilibili.com/video/BV1p24y1f7zM)》\n\n书接上回，每个军队都拿到了补给。但是要上战场，准备还不是很充分。JF 只有军队组成了一个集团军。才有可能形成一股强大的战斗力，才可以在军阀混战中取得胜利。", "description": "已知 JF 有 $n$ 支军队，他们分别由 $n-1$ 条边连接。$1$ 号军队为根。每支军队有自己的或黑或白的 **“暗号”**，方便相互联系，以及他的战力值和士气值。**初始的时候，军队的士气值等于战力值**。我们从深度最深的军队开始改变士气值，对于当前的军队 $u$ 来说，在与他直接相连的军队且深度比 $u$ 深的军队中，如果有军队 $v$ 和他的暗号相同，$u$ 就可以联系上 $v$，然后 $u$ 的士气值 **就必须全部加上**  $v$ 的子树内和 $v$ 颜色相同的点的战力值。（可以理解为，在 $u$ 的士气更新完毕时，$u$ 的子树的士气也更新完毕了。）  \n\n现在，你可以任意修改这些军队的暗号。要你求出所有**军队士气值的和的最大值**是多少。", "inputFormat": "\n第一行一个整数 $n$，如题所示。\n\n第二行至第 $n$ 行每行有两个数，表示 $u$ 和 $v$ 之间有连边。\n\n第 $n+1$ 行有 $n$ 个数，第 $i$ 个数表示第 $i$ 支军队一开始的战力值 $w_i$。\n", "outputFormat": "一行一个整数，表示士气值之和的最大值。", "hint": "#### 【样例解释 #1】\n\n我们将军队 $1,3,4$ 的暗号改为黑色，军队 $2$ 的暗号改成白色。这样，军队 $1,2,3,4$ 的最终士气值变为 $10,-2,4,-7$，总和为 $5$。可以证明不存在使得最终士气值和更大的方案。\n\n#### 【样例解释 #2】\n\n我们用 $1$ 表示黑色暗号，用 $2$ 表示白色暗号，那么 $n$ 支军队的暗号颜色分别如下：`1 1 1 1 2 1 2 2 2 1`。这样整支军队的士气值和为 $42$，可以证明不存在士气值和更大的方案。\n\n#### 【数据范围与约定】\n\n| 测试点编号 | $n \\le$ | 特殊条件 |\n| :----------: | :----------: | :----------: |\n| $1\\sim2$ | $20$ | 无 |\n| $3 \\sim 6$ | $50$ | 无 |\n| $7 \\sim 10$ | $300$ | $v=u+1$ |\n| $11\\sim12$ | $300$ | $1 \\le w_i \\le 1000$ |\n| $13\\sim14$ | $300$ | $u=1$ |\n| $15 \\sim 20$ | $300$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 300$，$-1000 \\le w_i \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P8917", "type": "P", "difficulty": 6, "samples": [["8 3 1 6\n1 2\n1 3\n1 6\n2 4\n2 5\n3 7\n3 8\n6 7 8\n1\n3\n5\n6\n7\n8", "0\n1\n1\n2\n2\n3"], ["8 3 2 6\n1 2\n1 3\n1 6\n2 4\n2 5\n3 7\n3 8\n6 7 8\n1\n3\n5\n6\n7\n8", "0\n1\n2\n2\n3\n3"]], "limits": {"time": [350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP"], "title": "[DMOI-R2] 风神瞳（Anemoculus）", "background": "![](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi1.hdslb.com%2Fbfs%2Farchive%2F778e646138c05348a05fc8a5d646201c0be048b0.jpg&refer=http%3A%2F%2Fi1.hdslb.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1665222406&t=01eff8edc99fbecc5e2e94e6e4b8fd01)\n\n$$\\pmb{\\color{Aquamarine}『传说，飞鸟啄去了神像的眼瞳，然后散落到世界各地』}$$\n\n$$\\pmb{\\color{Aquamarine}『当然了，这只是传说而已』}$$\n\n$$\\pmb{\\color{Aquamarine}『不过，据说把散失的神瞳献给神像，会有好事发生呢』}$$", "description": "风起地有一颗大树，它有 $n$ 个节点，以 $1$ 号节点为根。\n\n树上有 $m$ 个风神瞳，第 $i$ 个风神瞳位于节点 $a_i$ 上。\n\n你想要收集这些风神瞳。于是请来了~~在大树旁边摸鱼的~~温迪帮忙。\n\n一开始，你在树的根部的节点，也就是 $1$ 号节点上，每一秒钟，你可以从当前节点走到相邻的节点。或者，你可以请温迪帮忙，他会生成一个风场，你可以通过这个风场直接一次性向上走正好 $k$ 步（我们定义根节点到叶子结点的方向为『上』，即从深度较小的节点到深度较大的节点，换句话说，你可以从当前节点朝着深度更大的节点连续走 $k$ 步）。当你到达某个有风神瞳的节点上时，你就可以收集那个节点的风神瞳，收集不耗费时间。由于从树上跳下来会摔伤，你最后必须回到根节点。现在你有 $q$ 个问题，第 $i$ 个问题是你在 $t_i$ 秒内你最多可以收集到几个风神瞳。", "inputFormat": "第一行四个正整数 $n,m,k,q$，含义如题目描述中所述。\n\n接下来 $n - 1$ 行，每行两个正整数 $u,v$，表示结点 $u$ 和结点 $v$ 是相邻的。\n\n接下来一行 $m$ 个互不相同的正整数，第 $i$ 个数表示 $a_i$，含义如题目描述中所述。\n\n接下来 $q$ 行，其中第 $i$ 行有一个正整数 $t_i$，含义如题目描述中所述。\n", "outputFormat": "对于 $q$ 次询问，每次询问输出一行，表示最多可以收集到几个风神瞳。", "hint": "---\n### 样例解释\n#### 样例一\n![](https://cdn.luogu.com.cn/upload/image_hosting/mz5mcnuo.png)\n\n如图，其中加粗的点是有风神瞳的点。温迪~~很懒~~有事所以不准备帮你。\n#### 样例二\n这个样例除了温迪能让你一次性向上走两步和样例一没有区别。\n\n---\n### 数据范围\n\n本题采用捆绑测试。\n\n对于 $5\\%$ 的数据，$m = 10$。\n\n对于另外 $15\\%$ 的数据，$m = 17$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$n \\leq 2000$，$m \\leq 500$，$q \\le 1000$，$1\\leq t_i \\leq 2\\times n$，$1\\le a_i,u,v \\le n$，$1 \\leq k\\le \\min(dep-1,100)$，其中 $dep$ 表示树的深度，定义根节点的深度为 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DMOI-R2] 风神瞳（Anemoculus）", "background": "![](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi1.hdslb.com%2Fbfs%2Farchive%2F778e646138c05348a05fc8a5d646201c0be048b0.jpg&refer=http%3A%2F%2Fi1.hdslb.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1665222406&t=01eff8edc99fbecc5e2e94e6e4b8fd01)\n\n$$\\pmb{\\color{Aquamarine}『传说，飞鸟啄去了神像的眼瞳，然后散落到世界各地』}$$\n\n$$\\pmb{\\color{Aquamarine}『当然了，这只是传说而已』}$$\n\n$$\\pmb{\\color{Aquamarine}『不过，据说把散失的神瞳献给神像，会有好事发生呢』}$$", "description": "风起地有一颗大树，它有 $n$ 个节点，以 $1$ 号节点为根。\n\n树上有 $m$ 个风神瞳，第 $i$ 个风神瞳位于节点 $a_i$ 上。\n\n你想要收集这些风神瞳。于是请来了~~在大树旁边摸鱼的~~温迪帮忙。\n\n一开始，你在树的根部的节点，也就是 $1$ 号节点上，每一秒钟，你可以从当前节点走到相邻的节点。或者，你可以请温迪帮忙，他会生成一个风场，你可以通过这个风场直接一次性向上走正好 $k$ 步（我们定义根节点到叶子结点的方向为『上』，即从深度较小的节点到深度较大的节点，换句话说，你可以从当前节点朝着深度更大的节点连续走 $k$ 步）。当你到达某个有风神瞳的节点上时，你就可以收集那个节点的风神瞳，收集不耗费时间。由于从树上跳下来会摔伤，你最后必须回到根节点。现在你有 $q$ 个问题，第 $i$ 个问题是你在 $t_i$ 秒内你最多可以收集到几个风神瞳。", "inputFormat": "第一行四个正整数 $n,m,k,q$，含义如题目描述中所述。\n\n接下来 $n - 1$ 行，每行两个正整数 $u,v$，表示结点 $u$ 和结点 $v$ 是相邻的。\n\n接下来一行 $m$ 个互不相同的正整数，第 $i$ 个数表示 $a_i$，含义如题目描述中所述。\n\n接下来 $q$ 行，其中第 $i$ 行有一个正整数 $t_i$，含义如题目描述中所述。\n", "outputFormat": "对于 $q$ 次询问，每次询问输出一行，表示最多可以收集到几个风神瞳。", "hint": "---\n### 样例解释\n#### 样例一\n![](https://cdn.luogu.com.cn/upload/image_hosting/mz5mcnuo.png)\n\n如图，其中加粗的点是有风神瞳的点。温迪~~很懒~~有事所以不准备帮你。\n#### 样例二\n这个样例除了温迪能让你一次性向上走两步和样例一没有区别。\n\n---\n### 数据范围\n\n本题采用捆绑测试。\n\n对于 $5\\%$ 的数据，$m = 10$。\n\n对于另外 $15\\%$ 的数据，$m = 17$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$n \\leq 2000$，$m \\leq 500$，$q \\le 1000$，$1\\leq t_i \\leq 2\\times n$，$1\\le a_i,u,v \\le n$，$1 \\leq k\\le \\min(dep-1,100)$，其中 $dep$ 表示树的深度，定义根节点的深度为 $1$。", "locale": "zh-CN"}}}
{"pid": "P8918", "type": "P", "difficulty": 2, "samples": [["10\n1\n2\n7\n8\n9\n10\n11\n935\n101\n2023", "1\n-1\n3\n-1\n4\n-1\n4\n10\n7\n11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "『MdOI R5』Jump", "background": "", "description": "数轴上有一个人，设他所在的位置为 $x$，初始时 $x=0$。第 $i$ 秒中他可以选择往左或往右跳 $2^{i-1}$ 单位长度，即将 $x$ 增大或减小 $2^{i-1}$。问他至少需要多少秒才能到达 $n$，即在某一秒结束的时刻使得 $x=n$。如果永远都不可能到达 $n$，那么输出 $-1$。\n\n**本题每个测试点中有多组数据。**", "inputFormat": "第一行，一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行一个整数，表示一组测试数据中的 $n$。", "outputFormat": "共 $T$ 行，每行一个数，依次表示每组数据的答案。", "hint": "对于 $100\\%$ 的数据，$1\\le T\\le 10^3$，$1\\le n\\le 10^9$。\n\n$\\operatorname{Subtask} 1(30\\%)$：$n\\le 100$。\n\n$\\operatorname{Subtask} 2(40\\%)$：$n=2^k$，其中 $k$ 是一个非负整数。\n\n$\\operatorname{Subtask} 3(30\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n$n=1$ 时只需要在第一秒中往右跳即可。\n\n$n=2$ 时可以证明永远都不可能到达 $n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R5』Jump", "background": "", "description": "数轴上有一个人，设他所在的位置为 $x$，初始时 $x=0$。第 $i$ 秒中他可以选择往左或往右跳 $2^{i-1}$ 单位长度，即将 $x$ 增大或减小 $2^{i-1}$。问他至少需要多少秒才能到达 $n$，即在某一秒结束的时刻使得 $x=n$。如果永远都不可能到达 $n$，那么输出 $-1$。\n\n**本题每个测试点中有多组数据。**", "inputFormat": "第一行，一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行一个整数，表示一组测试数据中的 $n$。", "outputFormat": "共 $T$ 行，每行一个数，依次表示每组数据的答案。", "hint": "对于 $100\\%$ 的数据，$1\\le T\\le 10^3$，$1\\le n\\le 10^9$。\n\n$\\operatorname{Subtask} 1(30\\%)$：$n\\le 100$。\n\n$\\operatorname{Subtask} 2(40\\%)$：$n=2^k$，其中 $k$ 是一个非负整数。\n\n$\\operatorname{Subtask} 3(30\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n$n=1$ 时只需要在第一秒中往右跳即可。\n\n$n=2$ 时可以证明永远都不可能到达 $n$。", "locale": "zh-CN"}}}
{"pid": "P8919", "type": "P", "difficulty": 3, "samples": [["4 11\n01101010001\n2 6 8 11\n", "2\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "『MdOI R5』Message", "background": "", "description": "小 A 有一个群。这个群正在玩一个小游戏：给出一个函数 $f$，从某一个时间点起，发送第 $x$ 条消息，而 $f(x)=1$ 的群友会受到一个小惩罚。当群内消息总数达到 $m$ 时游戏结束。\n\n但小 A 是个话痨，这段时间他在这个群发了 $n$ 条消息，他发的第 $i$ 条消息在整个消息记录里是第 $a_i$ 条消息。\n\n但是小 A 不想受到惩罚，而小 A 恰好是管理员，他可以撤回**任何时刻、任何群成员发的任何消息**，注意这会导致这条消息之后的消息排名改变。\n\n但是撤回消息太多容易被当成暴政，因此他要尽可能减少撤回信息次数，不管是自己的还是别人的。\n\n接下来你也猜到你要干什么了：假如其他群成员不操作，给出 $n$、函数 $f$ 和 $a_i$，求出他至少要撤回几条消息。", "inputFormat": "输入的第一行有两个正整数 $n,m$，表示他的消息数量以及群内消息数量总数。\n\n第二行是一个长为 $m$ 的 **01 串** $f$，其第 $i$ 项 $f(i)$ 表示发第 $i$ 条消息的群成员是否要受到惩罚。\n\n第三行有 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$，表示每条消息的初始排名。保证数列 $a$ 严格递增，且 $1\\le a_i\\le m$。", "outputFormat": "输出一行一个整数 $ans$ 表示至少撤回几条消息才能让小 A 不被惩罚。", "hint": "【样例解释】\n\n下面给出一种可能的方式：\n- 小 A 先撤回第 $1$ 条消息（群友发的），他的四条消息在消息记录里现在是第 $1,5,7,10$ 条。\n- 然后撤回第 $5$ 条消息（他自己发的），剩下三条消息在消息记录里现在是第 $1,6,9$ 条。\n\n此时三条消息满足 $f(1)=f(6)=f(9)=0$，符合题意。\n\n可以证明无法仅撤回一条消息达成要求。\n\n【数据范围】\n\n|Subtask|$n\\le$|$m\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|1|$17$|$17$||$15$|\n|2|$17$|$100$||$15$|\n|3|$10^3$|$10^4$||$20$|\n|4||$10^5$|$n=m$|$8$|\n|5|$10^5$|$10^6$|A|$12$|\n|6|$10^5$|$10^6$||$30$|\n\n- 特殊性质 A：小 A 没有连发两条消息。\n\n对于全部数据，$1\\le n\\le 10^5$，$1\\le a_i\\le m\\le 10^6$，$a_i$ 严格递增，$f(i)\\in \\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R5』Message", "background": "", "description": "小 A 有一个群。这个群正在玩一个小游戏：给出一个函数 $f$，从某一个时间点起，发送第 $x$ 条消息，而 $f(x)=1$ 的群友会受到一个小惩罚。当群内消息总数达到 $m$ 时游戏结束。\n\n但小 A 是个话痨，这段时间他在这个群发了 $n$ 条消息，他发的第 $i$ 条消息在整个消息记录里是第 $a_i$ 条消息。\n\n但是小 A 不想受到惩罚，而小 A 恰好是管理员，他可以撤回**任何时刻、任何群成员发的任何消息**，注意这会导致这条消息之后的消息排名改变。\n\n但是撤回消息太多容易被当成暴政，因此他要尽可能减少撤回信息次数，不管是自己的还是别人的。\n\n接下来你也猜到你要干什么了：假如其他群成员不操作，给出 $n$、函数 $f$ 和 $a_i$，求出他至少要撤回几条消息。", "inputFormat": "输入的第一行有两个正整数 $n,m$，表示他的消息数量以及群内消息数量总数。\n\n第二行是一个长为 $m$ 的 **01 串** $f$，其第 $i$ 项 $f(i)$ 表示发第 $i$ 条消息的群成员是否要受到惩罚。\n\n第三行有 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$，表示每条消息的初始排名。保证数列 $a$ 严格递增，且 $1\\le a_i\\le m$。", "outputFormat": "输出一行一个整数 $ans$ 表示至少撤回几条消息才能让小 A 不被惩罚。", "hint": "【样例解释】\n\n下面给出一种可能的方式：\n- 小 A 先撤回第 $1$ 条消息（群友发的），他的四条消息在消息记录里现在是第 $1,5,7,10$ 条。\n- 然后撤回第 $5$ 条消息（他自己发的），剩下三条消息在消息记录里现在是第 $1,6,9$ 条。\n\n此时三条消息满足 $f(1)=f(6)=f(9)=0$，符合题意。\n\n可以证明无法仅撤回一条消息达成要求。\n\n【数据范围】\n\n|Subtask|$n\\le$|$m\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|1|$17$|$17$||$15$|\n|2|$17$|$100$||$15$|\n|3|$10^3$|$10^4$||$20$|\n|4||$10^5$|$n=m$|$8$|\n|5|$10^5$|$10^6$|A|$12$|\n|6|$10^5$|$10^6$||$30$|\n\n- 特殊性质 A：小 A 没有连发两条消息。\n\n对于全部数据，$1\\le n\\le 10^5$，$1\\le a_i\\le m\\le 10^6$，$a_i$ 严格递增，$f(i)\\in \\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P8920", "type": "P", "difficulty": 4, "samples": [["2\n1 10\n1 10", "81"], ["3\n1 2 3\n3 4 5", "26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "『MdOI R5』Variance", "background": "Subtask 1~5 为原数据，Subtask 6 为 hack 数据。", "description": "给定两个长度为 $n$ 的整数序列 $a,b$，满足：\n- $\\forall i\\in [1,n),a_i\\le a_{i+1},b_i\\le b_{i+1}$。\n\n- $\\forall i\\in [1,n],a_i\\le b_i$。\n\n有一个长度为 $n$ 的实数序列 $c$，满足 $c_i\\in [a_i,b_i]$，求 $c$ 的方差的最大值。\n\n你只需要输出答案乘上 $n^2$ 之后的结果。容易证明这是一个整数。\n\n### 提示\n\n一个长度为 $n$ 的序列 $a$ 的方差为：$\\dfrac{1}{n}\\sum\\limits_{i=1}^n (a_i-\\overline{a})^2$。其中 $\\overline{a}=\\dfrac{1}{n}\\sum\\limits_{i=1}^n a_i$。\n\n本题的计算过程中可能会涉及到超过 `long long` 范围的数，此时可能需要用到 `__int128` 进行处理。\n\n我们提供了以下代码，它可以用于输出一个 `__int128` 类型的数：\n\n``` cpp\nvoid print(__int128 x)\n{\n\tif(x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tif(x<10)\n\t{\n\t\tputchar(x+48);\n\t\treturn;\n\t}\n\tprint(x/10);\n\tputchar(x%10+48);\n}\n```", "inputFormat": "第一行，一个整数，表示 $n$。\n\n第二行，$n$ 个整数，表示 $a_1,a_2,\\dots,a_n$。\n\n第三行，$n$ 个整数，表示 $b_1,b_2,\\dots,b_n$。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le a_i,b_i\\le 10^9$。\n\n$\\operatorname{Subtask} 1(10\\%)$：$n\\le 2\\times 10^3$，$a_i=b_i\\le 10^5$。\n\n$\\operatorname{Subtask} 2(20\\%)$：$n\\le 10$，$a_i,b_i\\le 5$。\n\n$\\operatorname{Subtask} 3(20\\%)$：$n\\le 2\\times 10^3$，$a_i,b_i\\le 10^5$。\n\n$\\operatorname{Subtask} 4(20\\%)$：$n\\le 10^5$，$a_i,b_i\\le 2\\times 10^3$。\n\n$\\operatorname{Subtask} 5(30\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n$c$ 只可能为 $(1,10)$。\n\n#### 样例说明 2\n\n一种最优的 $c$ 为 $(1,2,5)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R5』Variance", "background": "Subtask 1~5 为原数据，Subtask 6 为 hack 数据。", "description": "给定两个长度为 $n$ 的整数序列 $a,b$，满足：\n- $\\forall i\\in [1,n),a_i\\le a_{i+1},b_i\\le b_{i+1}$。\n\n- $\\forall i\\in [1,n],a_i\\le b_i$。\n\n有一个长度为 $n$ 的实数序列 $c$，满足 $c_i\\in [a_i,b_i]$，求 $c$ 的方差的最大值。\n\n你只需要输出答案乘上 $n^2$ 之后的结果。容易证明这是一个整数。\n\n### 提示\n\n一个长度为 $n$ 的序列 $a$ 的方差为：$\\dfrac{1}{n}\\sum\\limits_{i=1}^n (a_i-\\overline{a})^2$。其中 $\\overline{a}=\\dfrac{1}{n}\\sum\\limits_{i=1}^n a_i$。\n\n本题的计算过程中可能会涉及到超过 `long long` 范围的数，此时可能需要用到 `__int128` 进行处理。\n\n我们提供了以下代码，它可以用于输出一个 `__int128` 类型的数：\n\n``` cpp\nvoid print(__int128 x)\n{\n\tif(x<0)\n\t{\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tif(x<10)\n\t{\n\t\tputchar(x+48);\n\t\treturn;\n\t}\n\tprint(x/10);\n\tputchar(x%10+48);\n}\n```", "inputFormat": "第一行，一个整数，表示 $n$。\n\n第二行，$n$ 个整数，表示 $a_1,a_2,\\dots,a_n$。\n\n第三行，$n$ 个整数，表示 $b_1,b_2,\\dots,b_n$。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le a_i,b_i\\le 10^9$。\n\n$\\operatorname{Subtask} 1(10\\%)$：$n\\le 2\\times 10^3$，$a_i=b_i\\le 10^5$。\n\n$\\operatorname{Subtask} 2(20\\%)$：$n\\le 10$，$a_i,b_i\\le 5$。\n\n$\\operatorname{Subtask} 3(20\\%)$：$n\\le 2\\times 10^3$，$a_i,b_i\\le 10^5$。\n\n$\\operatorname{Subtask} 4(20\\%)$：$n\\le 10^5$，$a_i,b_i\\le 2\\times 10^3$。\n\n$\\operatorname{Subtask} 5(30\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n$c$ 只可能为 $(1,10)$。\n\n#### 样例说明 2\n\n一种最优的 $c$ 为 $(1,2,5)$。", "locale": "zh-CN"}}}
{"pid": "P8921", "type": "P", "difficulty": 5, "samples": [["5\n1 3\n1 4", "-1"], ["8\n6 8\n5 8\n2 4\n2 5\n1 5", "3 2\n2 4\n7 8\n6 8\n2 1\n1 5\n8 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "『MdOI R5』Triangulation", "background": "", "description": "有一个正 $n$ 边形，顶点按顺时针方向从 $1$ 到 $n$ 依次标号。给定这个多边形的 $n-3$ 条**互不相同**的对角线，满足它们**互相之间只可能在顶点处相交**。这样我们得到了一张 $n$ 个点，$2n-3$ 条边的无向图。\n\n凸多边形的对角线指的是连接两个**不相同**且**不在多边形上相邻**的顶点的一条线段。\n\n实际上，这个无向图可以是任意一个凸 $n$ 边形的三角剖分图。\n\n你需要构造这个无向图的一棵生成树，使得每个点的度数都是**奇数**，或报告无解。", "inputFormat": "第一行，一个整数，表示 $n$。\n\n接下来 $n-3$ 行，每行两个整数 $u,v$ 表示一条给定的对角线 $(u,v)$。", "outputFormat": "如果无解，那么输出一行一个整数 $-1$。\n\n如果有解，那么输出 $n-1$ 行，每行两个数 $u,v$ 表示你所构造的答案中的一条边 $(u,v)$。", "hint": "对于 $100\\%$ 的数据，$3\\le n\\le 3\\times 10^5$。\n\n$\\operatorname{Subtask} 1(9\\%)$：$n\\le 10$。\n\n$\\operatorname{Subtask} 2(1\\%)$：$n$ 为奇数。\n\n$\\operatorname{Subtask} 3(10\\%)$：$u=1$。\n\n$\\operatorname{Subtask} 4(30\\%)$：$n\\le 100$。\n\n$\\operatorname{Subtask} 5(30\\%)$：$n\\le 5\\times 10^3$。\n\n$\\operatorname{Subtask} 6(20\\%)$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R5』Triangulation", "background": "", "description": "有一个正 $n$ 边形，顶点按顺时针方向从 $1$ 到 $n$ 依次标号。给定这个多边形的 $n-3$ 条**互不相同**的对角线，满足它们**互相之间只可能在顶点处相交**。这样我们得到了一张 $n$ 个点，$2n-3$ 条边的无向图。\n\n凸多边形的对角线指的是连接两个**不相同**且**不在多边形上相邻**的顶点的一条线段。\n\n实际上，这个无向图可以是任意一个凸 $n$ 边形的三角剖分图。\n\n你需要构造这个无向图的一棵生成树，使得每个点的度数都是**奇数**，或报告无解。", "inputFormat": "第一行，一个整数，表示 $n$。\n\n接下来 $n-3$ 行，每行两个整数 $u,v$ 表示一条给定的对角线 $(u,v)$。", "outputFormat": "如果无解，那么输出一行一个整数 $-1$。\n\n如果有解，那么输出 $n-1$ 行，每行两个数 $u,v$ 表示你所构造的答案中的一条边 $(u,v)$。", "hint": "对于 $100\\%$ 的数据，$3\\le n\\le 3\\times 10^5$。\n\n$\\operatorname{Subtask} 1(9\\%)$：$n\\le 10$。\n\n$\\operatorname{Subtask} 2(1\\%)$：$n$ 为奇数。\n\n$\\operatorname{Subtask} 3(10\\%)$：$u=1$。\n\n$\\operatorname{Subtask} 4(30\\%)$：$n\\le 100$。\n\n$\\operatorname{Subtask} 5(30\\%)$：$n\\le 5\\times 10^3$。\n\n$\\operatorname{Subtask} 6(20\\%)$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8922", "type": "P", "difficulty": 7, "samples": [["4 2\n1 0\n0 3\n4 1\n3 4\n2 2\n5 5", "4\n-1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "『MdOI R5』Squares", "background": "本题不是数据结构题，建议先做 F。\n\n[![1.gif](https://i.postimg.cc/7ZV6xBX6/1.gif)](https://postimg.cc/HrrHz9qD)", "description": "给定平面上的 $n$ 个点，定义平面上的一个区域是好的当且仅当它是一个**边与坐标轴平行的正方形**并且不存在任何一个给定的点被它**严格包含**。再给定 $m$ 次询问，每次给出一个点 $(x,y)$，求出**严格包含** $(x,y)$ 的最大的好区域的边长。如果可以无限大则输出 $-1$。\n\n点 $A$ 被区域 $B$ **严格包含**当且仅当 $A$ 在 $B$ 的内部且不在边界上。\n\n为了减少奇奇怪怪的细节，我们保证所有的 $n+m$ 个点都满足横坐标互不相同，纵坐标互不相同。", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个给定的点 $(x,y)$。\n\n接下来 $m$ 行，每行两个整数 $x,y$，表示一组询问中给定的点 $(x,y)$。", "outputFormat": "共 $m$ 行，每行一个整数，第 $i$ 行的数表示第 $i$ 组询问的答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n,m\\le 3\\times 10^5$，$0\\le x,y\\le 10^8$。\n\n$\\operatorname{Subtask} 1(10\\%)$：$n,m\\le 10$。\n\n$\\operatorname{Subtask} 2(10\\%)$：$n,m\\le 100$。\n\n$\\operatorname{Subtask} 3(20\\%)$：$n,m\\le 10^3$。\n\n$\\operatorname{Subtask} 4(20\\%)$：$n,m\\le 5\\times 10^4$。\n\n$\\operatorname{Subtask} 5(20\\%)$：$n,m\\le 10^5$。\n\n$\\operatorname{Subtask} 6(20\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n对于第一组询问，左下角为 $(0,0)$，边长为 $4$ 的正方形是严格包含 $(2,2)$ 的好区域中边长最大的。\n\n对于第二组询问，左下角为 $(4,4)$，边长为 $+\\infty$ 的正方形是严格包含 $(5,5)$ 的好区域中边长最大的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R5』Squares", "background": "本题不是数据结构题，建议先做 F。\n\n[![1.gif](https://i.postimg.cc/7ZV6xBX6/1.gif)](https://postimg.cc/HrrHz9qD)", "description": "给定平面上的 $n$ 个点，定义平面上的一个区域是好的当且仅当它是一个**边与坐标轴平行的正方形**并且不存在任何一个给定的点被它**严格包含**。再给定 $m$ 次询问，每次给出一个点 $(x,y)$，求出**严格包含** $(x,y)$ 的最大的好区域的边长。如果可以无限大则输出 $-1$。\n\n点 $A$ 被区域 $B$ **严格包含**当且仅当 $A$ 在 $B$ 的内部且不在边界上。\n\n为了减少奇奇怪怪的细节，我们保证所有的 $n+m$ 个点都满足横坐标互不相同，纵坐标互不相同。", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个给定的点 $(x,y)$。\n\n接下来 $m$ 行，每行两个整数 $x,y$，表示一组询问中给定的点 $(x,y)$。", "outputFormat": "共 $m$ 行，每行一个整数，第 $i$ 行的数表示第 $i$ 组询问的答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n,m\\le 3\\times 10^5$，$0\\le x,y\\le 10^8$。\n\n$\\operatorname{Subtask} 1(10\\%)$：$n,m\\le 10$。\n\n$\\operatorname{Subtask} 2(10\\%)$：$n,m\\le 100$。\n\n$\\operatorname{Subtask} 3(20\\%)$：$n,m\\le 10^3$。\n\n$\\operatorname{Subtask} 4(20\\%)$：$n,m\\le 5\\times 10^4$。\n\n$\\operatorname{Subtask} 5(20\\%)$：$n,m\\le 10^5$。\n\n$\\operatorname{Subtask} 6(20\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n对于第一组询问，左下角为 $(0,0)$，边长为 $4$ 的正方形是严格包含 $(2,2)$ 的好区域中边长最大的。\n\n对于第二组询问，左下角为 $(4,4)$，边长为 $+\\infty$ 的正方形是严格包含 $(5,5)$ 的好区域中边长最大的。", "locale": "zh-CN"}}}
{"pid": "P8923", "type": "P", "difficulty": 7, "samples": [["3 2 1000000007", "4"], ["5 5 1000000007", "11040"], ["50 50 1000000009", "875463033"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "『MdOI R5』Many Minimizations", "background": "本题不是多项式题，建议先做 E。\n\n[![2.gif](https://i.postimg.cc/3JN9j60M/2.gif)](https://postimg.cc/xcrKn6Pg)", "description": "小 L 遇到了一个经典题：给定一个长度为 $n$ 的**整数**序列 $a$，你需要在所有**单调不降**的**实数**序列中选出一个作为 $b$，最小化 $\\sum\\limits_{i=1}^n |a_i-b_i|$。可以证明答案是整数。\n\n他一眼就秒了这个题：这不是保序回归板子吗！\n\n他觉得这题太水了，于是决定加强一下：\n\n对于所有长度为 $n$ 的且满足 $\\forall i\\in[1,n],a_i\\in[1,m]$ 的**整数**序列 $a$，求出上面这个问题的答案的总和对**质数** $p$ 取模后的结果。其中 $n,m,p$ 是给定的常数。\n\n这下小 L 不会了。为了不让你看出来他根本就不会，他随便写了一个数据范围就把这题扔给你做了。\n\n现在压力来到了你这边，你能否顺利切掉这个题呢？", "inputFormat": "共一行，三个整数，依次表示 $n,m,p$。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^3$，$1\\le m\\le 10^9$，$10^9<p\\le 1.01\\times 10^9$，保证 $p$ 是质数。\n\n$\\operatorname{Subtask} 1(10\\%)$：$n,m\\le 7$。\n\n$\\operatorname{Subtask} 2(10\\%)$：$m\\le 2$。\n\n$\\operatorname{Subtask} 3(10\\%)$：$n,m\\le 50$。\n\n$\\operatorname{Subtask} 4(10\\%)$：$n\\le 50$。\n\n$\\operatorname{Subtask} 5(10\\%)$：$n,m\\le 500$。\n\n$\\operatorname{Subtask} 6(10\\%)$：$n\\le 500$。\n\n$\\operatorname{Subtask} 7(10\\%)$：$m\\le 5\\times 10^3$。\n\n$\\operatorname{Subtask} 8(30\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n有以下 $8$ 种可能的情况：\n\n$a=(1,1,1),b=(1,1,1),ans=0$。\n\n$a=(1,1,2),b=(1,1,2),ans=0$。\n\n$a=(1,2,1),b=(1,1,1),ans=1$。\n\n$a=(1,2,2),b=(1,2,2),ans=0$。\n\n$a=(2,1,1),b=(1,1,1),ans=1$。\n\n$a=(2,1,2),b=(1,1,2),ans=1$。\n\n$a=(2,2,1),b=(2,2,2),ans=1$。\n\n$a=(2,2,2),b=(2,2,2),ans=0$。\n\n因此答案为 $0+0+1+0+1+1+1+0=4$。\n\n注意，对于一个固定的 $a$，最优的 $b$ 不一定唯一。上面只给出了一种可能的解。\n\n$\\operatorname{Bonus}$：在 $p$ 为 NTT 模数的情况下做到 $O(n\\log n)$。实际上在本题正解的基础上这一部分并不困难。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R5』Many Minimizations", "background": "本题不是多项式题，建议先做 E。\n\n[![2.gif](https://i.postimg.cc/3JN9j60M/2.gif)](https://postimg.cc/xcrKn6Pg)", "description": "小 L 遇到了一个经典题：给定一个长度为 $n$ 的**整数**序列 $a$，你需要在所有**单调不降**的**实数**序列中选出一个作为 $b$，最小化 $\\sum\\limits_{i=1}^n |a_i-b_i|$。可以证明答案是整数。\n\n他一眼就秒了这个题：这不是保序回归板子吗！\n\n他觉得这题太水了，于是决定加强一下：\n\n对于所有长度为 $n$ 的且满足 $\\forall i\\in[1,n],a_i\\in[1,m]$ 的**整数**序列 $a$，求出上面这个问题的答案的总和对**质数** $p$ 取模后的结果。其中 $n,m,p$ 是给定的常数。\n\n这下小 L 不会了。为了不让你看出来他根本就不会，他随便写了一个数据范围就把这题扔给你做了。\n\n现在压力来到了你这边，你能否顺利切掉这个题呢？", "inputFormat": "共一行，三个整数，依次表示 $n,m,p$。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^3$，$1\\le m\\le 10^9$，$10^9<p\\le 1.01\\times 10^9$，保证 $p$ 是质数。\n\n$\\operatorname{Subtask} 1(10\\%)$：$n,m\\le 7$。\n\n$\\operatorname{Subtask} 2(10\\%)$：$m\\le 2$。\n\n$\\operatorname{Subtask} 3(10\\%)$：$n,m\\le 50$。\n\n$\\operatorname{Subtask} 4(10\\%)$：$n\\le 50$。\n\n$\\operatorname{Subtask} 5(10\\%)$：$n,m\\le 500$。\n\n$\\operatorname{Subtask} 6(10\\%)$：$n\\le 500$。\n\n$\\operatorname{Subtask} 7(10\\%)$：$m\\le 5\\times 10^3$。\n\n$\\operatorname{Subtask} 8(30\\%)$：无特殊限制。\n\n#### 样例说明 1\n\n有以下 $8$ 种可能的情况：\n\n$a=(1,1,1),b=(1,1,1),ans=0$。\n\n$a=(1,1,2),b=(1,1,2),ans=0$。\n\n$a=(1,2,1),b=(1,1,1),ans=1$。\n\n$a=(1,2,2),b=(1,2,2),ans=0$。\n\n$a=(2,1,1),b=(1,1,1),ans=1$。\n\n$a=(2,1,2),b=(1,1,2),ans=1$。\n\n$a=(2,2,1),b=(2,2,2),ans=1$。\n\n$a=(2,2,2),b=(2,2,2),ans=0$。\n\n因此答案为 $0+0+1+0+1+1+1+0=4$。\n\n注意，对于一个固定的 $a$，最优的 $b$ 不一定唯一。上面只给出了一种可能的解。\n\n$\\operatorname{Bonus}$：在 $p$ 为 NTT 模数的情况下做到 $O(n\\log n)$。实际上在本题正解的基础上这一部分并不困难。", "locale": "zh-CN"}}}
{"pid": "P8924", "type": "P", "difficulty": 2, "samples": [["5 5 1\n0 1\n", "....*\n...*.\n..*..\n.*...\n*...."], ["8 8 1\n0 2\n", "........\n...*....\n........\n..*.....\n........\n.*......\n........\n*.......\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "O2优化"], "title": "「GMOI R1-T1」Perfect Math Class", "background": "", "description": "Index 给了你一个函数如下：\n\n$$f(x)=a_kx^k+a_{k-1}x^{k-1}+\\cdots+a_1x^1+a_0$$\n\n画出它的函数图像（`*` 表示经过该点，`.` 表示不经过该点），大小为 $n\\times m$，其中 $x$ 的范围是 $[0,n-1]$，$f(x)$ 的范围是 $[0,m-1]$。\n\n具体的，你需要输出一个 $n\\times m$ 的字符矩阵，若该函数经过整点 $(x,y)$，则**从左往右**第 $x+1$ 列，**从下往上**第 $y+1$ 行输出 `*`，否则为 `.`。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $k+1$ 个整数，其中第 $i$ 个整数表示 $a_{i-1}$。", "outputFormat": "输出共 $m$ 行，每行 $n$ 个字符，即输出该函数的函数图像。具体的，仅当函数经过 $(x,y)$ 时，**从左往右**第 $x+1$ 列，**从下往上**第 $y+1$ 行输出 `*`，否则为 `.`。", "hint": "样例 $1$ 解释：\n\n该函数为 $f(x)=x$，显然在 $x\\in[0,4], f(x)\\in[0,4]$ 时穿过 $(0,0),(1,1),(2,2),(3,3),(4,4)$ 这些整点。\n\n对于 $100\\%$ 的数据，$-12\\le a_i\\le 12\n$，$n=m$。每个测试点等分。\n\n| 测试点 | $n\\le$ | $m\\le$ | $k\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $1$ | $0$ | $-$ |\n| $2$ | $5$ | $5$ | $0$ | $-$ |\n| $3$ | $5$ | $5$ | $1$ | $a_1=1$ |\n| $4$ | $5$ | $5$ | $1$ | $a_0+a_1\\le 2$ |\n| $5$ | $10$ | $10$ | $1$ | $-$ |\n| $6$ | $10$ | $10$ | $2$ | $a_0=a_1=0,a_2\\ge n$ |\n| $7$ | $100$ | $100$ | $2$ | $-$ |\n| $8$ | $100$ | $100$ | $3$ | $-$ |\n| $9$ | $100$ | $100$ | $5$ | $-$ |\n| $10$ | $100$ | $100$ | $7$ | $-$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R1-T1」Perfect Math Class", "background": "", "description": "Index 给了你一个函数如下：\n\n$$f(x)=a_kx^k+a_{k-1}x^{k-1}+\\cdots+a_1x^1+a_0$$\n\n画出它的函数图像（`*` 表示经过该点，`.` 表示不经过该点），大小为 $n\\times m$，其中 $x$ 的范围是 $[0,n-1]$，$f(x)$ 的范围是 $[0,m-1]$。\n\n具体的，你需要输出一个 $n\\times m$ 的字符矩阵，若该函数经过整点 $(x,y)$，则**从左往右**第 $x+1$ 列，**从下往上**第 $y+1$ 行输出 `*`，否则为 `.`。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $k+1$ 个整数，其中第 $i$ 个整数表示 $a_{i-1}$。", "outputFormat": "输出共 $m$ 行，每行 $n$ 个字符，即输出该函数的函数图像。具体的，仅当函数经过 $(x,y)$ 时，**从左往右**第 $x+1$ 列，**从下往上**第 $y+1$ 行输出 `*`，否则为 `.`。", "hint": "样例 $1$ 解释：\n\n该函数为 $f(x)=x$，显然在 $x\\in[0,4], f(x)\\in[0,4]$ 时穿过 $(0,0),(1,1),(2,2),(3,3),(4,4)$ 这些整点。\n\n对于 $100\\%$ 的数据，$-12\\le a_i\\le 12\n$，$n=m$。每个测试点等分。\n\n| 测试点 | $n\\le$ | $m\\le$ | $k\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $1$ | $0$ | $-$ |\n| $2$ | $5$ | $5$ | $0$ | $-$ |\n| $3$ | $5$ | $5$ | $1$ | $a_1=1$ |\n| $4$ | $5$ | $5$ | $1$ | $a_0+a_1\\le 2$ |\n| $5$ | $10$ | $10$ | $1$ | $-$ |\n| $6$ | $10$ | $10$ | $2$ | $a_0=a_1=0,a_2\\ge n$ |\n| $7$ | $100$ | $100$ | $2$ | $-$ |\n| $8$ | $100$ | $100$ | $3$ | $-$ |\n| $9$ | $100$ | $100$ | $5$ | $-$ |\n| $10$ | $100$ | $100$ | $7$ | $-$ |", "locale": "zh-CN"}}}
{"pid": "P8925", "type": "P", "difficulty": 2, "samples": [["2\n3 5\nL 1\nR 1", "-6\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化"], "title": "「GMOI R1-T2」Light", "background": "前置芝士：平面镜成像原理。\n\n因为百度的不太清楚，所以大家有不懂的可以自行搜索，也可以看本题的样例解释。", "description": "通道可以认为是一个无限长的坐标轴，在原点 $O$ 上有一盏灯，在坐标为 $-L$ 和 $R$ 的地方分别有两面镜子，这两个镜子构成了无尽的灯廊。\n\n为什么说无尽呢？是因为这两面镜子上理论上能呈现无穷个灯的像。现在，请你求出这盏灯左边或右边第 $x$ 个像的坐标。", "inputFormat": "第一行一个整数 $T$，代表询问个数。\n\n第二行两个整数 $L,R$，意思如题意中所描述。\n\n接下来 $T$ 行，每行先输入一个字符，再输入一个数 $x$。其中如果输入的字符是 `L` 表示左侧，如果是 `R` 表示右侧。请求出左侧或右侧第 $x$ 个像的坐标。\n\n保证字符是 `L` 或 `R` 中的一个。", "outputFormat": "$T$ 行，每行一个整数，为坐标值。", "hint": "[样例 $1$ 解释](https://www.luogu.com.cn/paste/4g9o1uzz)\n\n对于 $100\\%$ 的数据 $1\\le T\\le 5\\times 10^5$，$1\\le L,R \\le 10^7$，$1\\le x \\le 10^{10}$。\n\n| 测试点 | $T$ | $L,R$ | $x$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $T=1$ | $1 \\le L,R \\le 10$ | $1 \\le x \\le 10$ | $15$ |\n| $4\\sim6$ | $T=1$ | $1 \\le L,R \\le 1000$ | $1 \\le x \\le 1000$ | $15$ |\n| $7\\sim11$ | $T \\le 1000$ | $1 \\le L,R \\le 10^7$ | $1 \\le x \\le 10^4 $ | $25$ |\n| $12\\sim16$ | $T \\le 10^5$ | $1 \\le L,R \\le 10^7$ | $1 \\le x \\le 10^9$ | $25$ |\n| $17\\sim20$ | $T \\le 5 \\times 10^5$ | $1 \\le L,R \\le 10^7$ | $1\\le x \\le 10^{10}$ | $20$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R1-T2」Light", "background": "前置芝士：平面镜成像原理。\n\n因为百度的不太清楚，所以大家有不懂的可以自行搜索，也可以看本题的样例解释。", "description": "通道可以认为是一个无限长的坐标轴，在原点 $O$ 上有一盏灯，在坐标为 $-L$ 和 $R$ 的地方分别有两面镜子，这两个镜子构成了无尽的灯廊。\n\n为什么说无尽呢？是因为这两面镜子上理论上能呈现无穷个灯的像。现在，请你求出这盏灯左边或右边第 $x$ 个像的坐标。", "inputFormat": "第一行一个整数 $T$，代表询问个数。\n\n第二行两个整数 $L,R$，意思如题意中所描述。\n\n接下来 $T$ 行，每行先输入一个字符，再输入一个数 $x$。其中如果输入的字符是 `L` 表示左侧，如果是 `R` 表示右侧。请求出左侧或右侧第 $x$ 个像的坐标。\n\n保证字符是 `L` 或 `R` 中的一个。", "outputFormat": "$T$ 行，每行一个整数，为坐标值。", "hint": "[样例 $1$ 解释](https://www.luogu.com.cn/paste/4g9o1uzz)\n\n对于 $100\\%$ 的数据 $1\\le T\\le 5\\times 10^5$，$1\\le L,R \\le 10^7$，$1\\le x \\le 10^{10}$。\n\n| 测试点 | $T$ | $L,R$ | $x$ | 分数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim3$ | $T=1$ | $1 \\le L,R \\le 10$ | $1 \\le x \\le 10$ | $15$ |\n| $4\\sim6$ | $T=1$ | $1 \\le L,R \\le 1000$ | $1 \\le x \\le 1000$ | $15$ |\n| $7\\sim11$ | $T \\le 1000$ | $1 \\le L,R \\le 10^7$ | $1 \\le x \\le 10^4 $ | $25$ |\n| $12\\sim16$ | $T \\le 10^5$ | $1 \\le L,R \\le 10^7$ | $1 \\le x \\le 10^9$ | $25$ |\n| $17\\sim20$ | $T \\le 5 \\times 10^5$ | $1 \\le L,R \\le 10^7$ | $1\\le x \\le 10^{10}$ | $20$ |", "locale": "zh-CN"}}}
{"pid": "P8926", "type": "P", "difficulty": 4, "samples": [["5\n10 1 3\n30 1 5\n997 24 35\n34 39 99\n210 1000 1001", "12\n40\n24\n244\n32"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "数论", "O2优化", "最大公约数 gcd"], "title": "「GMOI R1-T3」Number Pair", "background": "", "description": "我们定义满足如下条件的数对 $(x,y)$ 叫做奇妙数对：\n\n$k \\times \\gcd(x,y)=\\operatorname{lcm}(x,y)$ 并且 $P \\le \\gcd(x,y) \\le Q$（保证 $P \\le Q$）。\n\n有 $T$ 组数据，对于每一组数据，给定 $k,P,Q$ 三个数，求符合条件的数对 $(x,y)$ 的对数。\n\n**答案对 $10^9+7$ 取模。**", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据数量。\n\n接下来 $T$ 行，每行三个整数 $k,P,Q$。", "outputFormat": "对于每一组数据，给出对应答案，每组数据一行。\n\n", "hint": "**注意并不寻常的时间限制。**\n\n对于 $100\\%$ 的数据 $1 \\le k \\le 10^{16}$，$1 \\le T \\le 50$，$1 \\le P \\le Q \\le 2\\times 10^9$。\n\n| 测试点 | $k$ | $T$ | $P$ | $Q$ | 总分 |\n| :----------: | :----------: | :----------: | :-------------: | :----------: | :----------: |\n| $1\\sim 3$ | $k \\le 3$ | $T=1$ | $P=1$ | $Q=1$ | $15$ |\n| $4\\sim 8$ | $k \\le 100$ | $T \\le 8$ | $P \\le 30$ |  $Q \\le 30$ |$15$ |\n| $9\\sim 13$ | $k \\le 10^3$ | $T \\le 50$ | $P \\le 500$ | $Q \\le 500$ | $25$ |\n| $14\\sim 18$ | $k \\le 10^{12}$ | $T \\le 50$ | $P \\le 10^4$ | $Q \\le 10^4$ | $15$ |\n| $19\\sim 22$ | $k \\le 10^{13}$ | $T \\le 50$ | $P \\le 10^6$ | $Q \\le 10^6$ | $12$ |\n| $23\\sim 28$ | $k \\le 10^{16}$ | $T \\le 50$ | $P \\le 2\\times10^9$ | $Q \\le 2\\times10^9$ | $18$ |\n\n**本题保证 $k$ 随机生成，并不存在极限卡人数据，时限已经开到 std 两倍，请各位选手放心。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R1-T3」Number Pair", "background": "", "description": "我们定义满足如下条件的数对 $(x,y)$ 叫做奇妙数对：\n\n$k \\times \\gcd(x,y)=\\operatorname{lcm}(x,y)$ 并且 $P \\le \\gcd(x,y) \\le Q$（保证 $P \\le Q$）。\n\n有 $T$ 组数据，对于每一组数据，给定 $k,P,Q$ 三个数，求符合条件的数对 $(x,y)$ 的对数。\n\n**答案对 $10^9+7$ 取模。**", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据数量。\n\n接下来 $T$ 行，每行三个整数 $k,P,Q$。", "outputFormat": "对于每一组数据，给出对应答案，每组数据一行。\n\n", "hint": "**注意并不寻常的时间限制。**\n\n对于 $100\\%$ 的数据 $1 \\le k \\le 10^{16}$，$1 \\le T \\le 50$，$1 \\le P \\le Q \\le 2\\times 10^9$。\n\n| 测试点 | $k$ | $T$ | $P$ | $Q$ | 总分 |\n| :----------: | :----------: | :----------: | :-------------: | :----------: | :----------: |\n| $1\\sim 3$ | $k \\le 3$ | $T=1$ | $P=1$ | $Q=1$ | $15$ |\n| $4\\sim 8$ | $k \\le 100$ | $T \\le 8$ | $P \\le 30$ |  $Q \\le 30$ |$15$ |\n| $9\\sim 13$ | $k \\le 10^3$ | $T \\le 50$ | $P \\le 500$ | $Q \\le 500$ | $25$ |\n| $14\\sim 18$ | $k \\le 10^{12}$ | $T \\le 50$ | $P \\le 10^4$ | $Q \\le 10^4$ | $15$ |\n| $19\\sim 22$ | $k \\le 10^{13}$ | $T \\le 50$ | $P \\le 10^6$ | $Q \\le 10^6$ | $12$ |\n| $23\\sim 28$ | $k \\le 10^{16}$ | $T \\le 50$ | $P \\le 2\\times10^9$ | $Q \\le 2\\times10^9$ | $18$ |\n\n**本题保证 $k$ 随机生成，并不存在极限卡人数据，时限已经开到 std 两倍，请各位选手放心。**", "locale": "zh-CN"}}}
{"pid": "P8927", "type": "P", "difficulty": 4, "samples": [["10\n2 3\n1 2 3 4 5 6 7 8 9 10", "131\n5 6 7 1 8 2 9 3 10 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "数学", "Special Judge", "O2优化"], "title": "「GMOI R1-T4」Rain", "background": "> **求雨**\n>\n>玉皇爷爷也姓张，\n>\n>为啥为难俺张*昌？\n>\n>三天之内不下雨，\n>\n>先扒龙皇庙，\n>\n>__再用大炮轰你娘。__\n\n如果再不下雨，张大帅就会轰掉全亚洲所有的宗教场所！\n\n博丽神社因为可以在外界被看到，自然也无法幸免于难，灵梦十分着急，准备使用祖传秘法求雨……", "description": "为了防止神社被“大炮开兮轰他娘”，灵梦需要求雨。\n\n求雨需要在一条笔直的路上建 $n$ 个法阵，编号为 $1,2,\\cdots,n$。\n\n给定一个长度为 $n$ 的数组 $a$，表示在 $a_1$ 到 $a_n$ 的位置建法阵，你要干的是给法阵编号。\n\n灵梦需要来检测法阵效果，她会从 $1$ 号法阵走到 $2$ 号，从 $2$ 号再走到 $3$ 号，直到走到 $n$ 号，再从 $n$ 号走回 $1$ 号。\n\n由于法阵的特殊效果，从 $i$ 个走到 $i+1$ 个的距离是 $\\left|a_i\\times p-a_{i+1}\\times q\\right|$。特别的，从 $n$ 号走回到 $1$ 号的距离是 $\\left|a_n\\times p-a_1\\times q\\right|$。$p,q$ 是给定的两个常数，$a_i,a_{i+1}$ 是两个法阵的位置。\n\n灵梦希望你来求一下最大的行走距离，并输出对应法阵从 $1$ 号到 $n$ 号的位置排列。（多个只需输出一个即可）", "inputFormat": "第一行一个整数 $n$，表示法阵数量。\n\n第二行两个整数 $p,q$，表示法阵的倍率常量。\n\n第三行 $n$ 个整数，表示数组 $a$。", "outputFormat": "第一行一个整数，表示答案。\n\n第二行 $n$ 个整数，表示对应位置 $a$ 的排列，按照编号从 $1$ 到 $n$ 输出。", "hint": "**本题开启 SPJ。**\n\n**本题读入量较大，建议使用较快的读入方式。**\n\n对于 $100\\%$ 的数据满足 $10\\le n\\le 10^6$，$1\\le p,q \\le 10^{5}$，$1\\le a_i\\le 10^{5}$。\n\n| 编号 | $n$ | $p,q$ | $a_i$ | 分数 |\n| :----------: | :----------: | :----------: | :----------:  | :----------: |\n| $1$ | $n=10$ | $p,q\\le 10^{3}$ | $a_i\\le 10^{3}$ | $4$ |\n| $2$ | $n=10$ | $p,q\\le 10^{3}$ | $a_i\\le 10^{3}$ | $5$ |\n| $3$ | $n=10$ | $p,q\\le 10^{3}$ | $a_i\\le 10^{3}$ | $5$ |\n| $4\\sim 6$  | $n=19$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $10$ |\n| $7$ | $n\\le 10^{4}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $8$ |\n| $8$ | $n\\le 10^{4}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $9$ |\n| $9$ | $n\\le 10^{4}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $9$ |\n| $10\\sim 12$ | $n\\le 10^{6}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $10$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R1-T4」Rain", "background": "> **求雨**\n>\n>玉皇爷爷也姓张，\n>\n>为啥为难俺张*昌？\n>\n>三天之内不下雨，\n>\n>先扒龙皇庙，\n>\n>__再用大炮轰你娘。__\n\n如果再不下雨，张大帅就会轰掉全亚洲所有的宗教场所！\n\n博丽神社因为可以在外界被看到，自然也无法幸免于难，灵梦十分着急，准备使用祖传秘法求雨……", "description": "为了防止神社被“大炮开兮轰他娘”，灵梦需要求雨。\n\n求雨需要在一条笔直的路上建 $n$ 个法阵，编号为 $1,2,\\cdots,n$。\n\n给定一个长度为 $n$ 的数组 $a$，表示在 $a_1$ 到 $a_n$ 的位置建法阵，你要干的是给法阵编号。\n\n灵梦需要来检测法阵效果，她会从 $1$ 号法阵走到 $2$ 号，从 $2$ 号再走到 $3$ 号，直到走到 $n$ 号，再从 $n$ 号走回 $1$ 号。\n\n由于法阵的特殊效果，从 $i$ 个走到 $i+1$ 个的距离是 $\\left|a_i\\times p-a_{i+1}\\times q\\right|$。特别的，从 $n$ 号走回到 $1$ 号的距离是 $\\left|a_n\\times p-a_1\\times q\\right|$。$p,q$ 是给定的两个常数，$a_i,a_{i+1}$ 是两个法阵的位置。\n\n灵梦希望你来求一下最大的行走距离，并输出对应法阵从 $1$ 号到 $n$ 号的位置排列。（多个只需输出一个即可）", "inputFormat": "第一行一个整数 $n$，表示法阵数量。\n\n第二行两个整数 $p,q$，表示法阵的倍率常量。\n\n第三行 $n$ 个整数，表示数组 $a$。", "outputFormat": "第一行一个整数，表示答案。\n\n第二行 $n$ 个整数，表示对应位置 $a$ 的排列，按照编号从 $1$ 到 $n$ 输出。", "hint": "**本题开启 SPJ。**\n\n**本题读入量较大，建议使用较快的读入方式。**\n\n对于 $100\\%$ 的数据满足 $10\\le n\\le 10^6$，$1\\le p,q \\le 10^{5}$，$1\\le a_i\\le 10^{5}$。\n\n| 编号 | $n$ | $p,q$ | $a_i$ | 分数 |\n| :----------: | :----------: | :----------: | :----------:  | :----------: |\n| $1$ | $n=10$ | $p,q\\le 10^{3}$ | $a_i\\le 10^{3}$ | $4$ |\n| $2$ | $n=10$ | $p,q\\le 10^{3}$ | $a_i\\le 10^{3}$ | $5$ |\n| $3$ | $n=10$ | $p,q\\le 10^{3}$ | $a_i\\le 10^{3}$ | $5$ |\n| $4\\sim 6$  | $n=19$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $10$ |\n| $7$ | $n\\le 10^{4}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $8$ |\n| $8$ | $n\\le 10^{4}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $9$ |\n| $9$ | $n\\le 10^{4}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $9$ |\n| $10\\sim 12$ | $n\\le 10^{6}$ | $p,q\\le 10^{5}$ | $a_i\\le 10^{5}$ | $10$ |\n", "locale": "zh-CN"}}}
