{"pid": "P8417", "type": "P", "difficulty": 7, "samples": [["2 2 2 2\n", "1040\n"], ["12 24 3 4\n", "718185656\n"], ["100 10000000 6 6\n", "146399052\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 高性能计算导论集群登录密码复杂性策略", "background": "高性能计算导论是 T 大学 C 系开设的一门专业选修课。这门课程讲述了高性能计算的基本概念和原理，常见并行编程模型及并行程序的基本编写思路，程序性能分析和优化的基本方法，以及计算机体系结构和程序性能的关系。为了让同学们能够实际体验并行程序的编写、性能分析和优化，课程为同学们提供了五台服务器组成的集群，每台服务器上都配置了 2 socket × 14 core 的处理器和 1 块 GPU。选课的同学可以在集群上进行基于消息传递的并行编程、基于共享内存模型的并行编程和 CUDA 编程。为了防止宝贵的计算资源被滥用（比如偷偷用服务器挖矿），课程在集群使用上有很多的规定，其中就包括要求选课同学使用高强度的集群登录密码。", "description": "为了确保选课同学使用了较强的集群登录密码，课程组在集群上配置了密码复杂性策略。所有选课的同学在学期初会收到随机生成的初始密码。在使用初始密码登录集群后，集群会要求同学输入新的密码，密码更改完毕后才能正常访问集群。在本题中，我们假设密码复杂性策略为：\n\n- 密码至少包含 $L$ 个字符，且至少包含一个数字和一个字母；\n\n- 密码不能包含**连续** $A$ 个**重复**字符，如 `2333` 包含了连续 3 个重复字符；\n\n- 密码不能包含**连续** $B$ 个字符组成的上升序列或下降序列，其中定义上升序列为 `0123456789`，`ABCDEFGHIJKLMNOPQRSTUVWXYZ` 和 `abcdefghijklmnopqrstuvwxyz` 三个字符串中某一个串的**连续**子串，下降序列为这三个字符串中某一个串的**连续**子串的反向串，例如： \n  \n  - `6789` 是长度为 4 的上升序列，`FED` 是长度为 3 的下降序列；\n  \n  - `90`、`AZ`、`az` 不是上升序列或下降序列；\n  \n  - `GPU` 不是上升序列，因为它不连续；\n  \n  - `Def` 不是上升序列，因为字母大小写不一致（但它包含长度为 2 的上升连续子序列 `ef`）；\n  \n  - `1112345678999` 不是上升序列，但它的子序列 `123456789` 是上升的。\n\n假设密码仅由数字及大小写字母构成。求在长度不超过 $R$ 的所有密码中，有多少个密码满足密码复杂性策略。", "inputFormat": "输入仅一行，包括四个正整数 $L, R, A, B$，含义如题目描述中所述。", "outputFormat": "输出一个非负整数，表示满足密码复杂性策略且长度不超过 $R$ 的密码数量对 $1,000,000,007$ 取模的结果。\n", "hint": "【样例 1 解释】\n\n因为密码必须至少包含一个数字和一个字母，所以满足要求的密码有 $2\\times 10 \\times (26\\times 2) = 1040$ 种。\n\n【数据范围与约定】\n\n\n保证 $1\\le L\\le R\\le 10^9$，$2\\le A\\le 6$，$2\\le B\\le 26$。\n\n【提示】\n\n如果你不想记住又长又复杂的密码，不想每次登录时手动输入密码，也可以配置公钥进行 SSH 登录。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 高性能计算导论集群登录密码复杂性策略", "background": "高性能计算导论是 T 大学 C 系开设的一门专业选修课。这门课程讲述了高性能计算的基本概念和原理，常见并行编程模型及并行程序的基本编写思路，程序性能分析和优化的基本方法，以及计算机体系结构和程序性能的关系。为了让同学们能够实际体验并行程序的编写、性能分析和优化，课程为同学们提供了五台服务器组成的集群，每台服务器上都配置了 2 socket × 14 core 的处理器和 1 块 GPU。选课的同学可以在集群上进行基于消息传递的并行编程、基于共享内存模型的并行编程和 CUDA 编程。为了防止宝贵的计算资源被滥用（比如偷偷用服务器挖矿），课程在集群使用上有很多的规定，其中就包括要求选课同学使用高强度的集群登录密码。", "description": "为了确保选课同学使用了较强的集群登录密码，课程组在集群上配置了密码复杂性策略。所有选课的同学在学期初会收到随机生成的初始密码。在使用初始密码登录集群后，集群会要求同学输入新的密码，密码更改完毕后才能正常访问集群。在本题中，我们假设密码复杂性策略为：\n\n- 密码至少包含 $L$ 个字符，且至少包含一个数字和一个字母；\n\n- 密码不能包含**连续** $A$ 个**重复**字符，如 `2333` 包含了连续 3 个重复字符；\n\n- 密码不能包含**连续** $B$ 个字符组成的上升序列或下降序列，其中定义上升序列为 `0123456789`，`ABCDEFGHIJKLMNOPQRSTUVWXYZ` 和 `abcdefghijklmnopqrstuvwxyz` 三个字符串中某一个串的**连续**子串，下降序列为这三个字符串中某一个串的**连续**子串的反向串，例如： \n  \n  - `6789` 是长度为 4 的上升序列，`FED` 是长度为 3 的下降序列；\n  \n  - `90`、`AZ`、`az` 不是上升序列或下降序列；\n  \n  - `GPU` 不是上升序列，因为它不连续；\n  \n  - `Def` 不是上升序列，因为字母大小写不一致（但它包含长度为 2 的上升连续子序列 `ef`）；\n  \n  - `1112345678999` 不是上升序列，但它的子序列 `123456789` 是上升的。\n\n假设密码仅由数字及大小写字母构成。求在长度不超过 $R$ 的所有密码中，有多少个密码满足密码复杂性策略。", "inputFormat": "输入仅一行，包括四个正整数 $L, R, A, B$，含义如题目描述中所述。", "outputFormat": "输出一个非负整数，表示满足密码复杂性策略且长度不超过 $R$ 的密码数量对 $1,000,000,007$ 取模的结果。\n", "hint": "【样例 1 解释】\n\n因为密码必须至少包含一个数字和一个字母，所以满足要求的密码有 $2\\times 10 \\times (26\\times 2) = 1040$ 种。\n\n【数据范围与约定】\n\n\n保证 $1\\le L\\le R\\le 10^9$，$2\\le A\\le 6$，$2\\le B\\le 26$。\n\n【提示】\n\n如果你不想记住又长又复杂的密码，不想每次登录时手动输入密码，也可以配置公钥进行 SSH 登录。", "locale": "zh-CN"}}}
{"pid": "P8418", "type": "P", "difficulty": 5, "samples": [["5 5 1\n1 11 21 1211\n1 2 4\n1 3 11\n2 5 9\n3 4 12\n4 5 13\n", "6 1\n"], ["9 16 1\n1 10 100 1000 10000 100000 1000000 10000000\n1 2 2\n1 3 3\n2 3 5\n2 5 7\n3 4 11\n3 5 13\n3 6 17\n3 7 19\n4 7 23\n5 6 29\n5 8 31\n6 7 37\n6 8 41\n6 9 43\n7 9 47\n8 9 53\n", "221 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 倍增路径", "background": "", "description": "对于任意一张 DAG $G=(V,E)$ 和图中的一个起始点 $s_1\\in V$，倍增小游戏的规则为：\n\n- 在第 $i$ 轮操作（$i=1,2,\\cdots$）中，玩家选取一条起点为 $s_i$ 的**非空**路径 $p_i$，使得所有属于这条路径的边的边权和恰为 $(i+1)$ 的倍数。如果无法选择出满足倍数要求的路径，则称游戏失败，玩家将不会获得任何分数；否则，本轮操作成功，并记 $p_i$ 的终点为 $s_{i+1}$。\n\n- 在第 $i$ 轮操作成功后，玩家可以选择结束游戏或者继续第 $(i+1)$ 轮操作。如果选择结束游戏，则称选择出的 $i$ 条路径 $p_1, \\cdots, p_i$ 为倍增路径，并计算得分。\n\n如果游戏没有失败，则在结束游戏时，对于选出的倍增路径 $p_1, \\cdots, p_k$，定义游戏的分数为 $\\sum_{i=1}^k a_i \\left|p_i\\right|/k$，其中 $|p_i|$ 表示路径 $p_i$ 包含的边数，$a_i$ 是输入给定的权值。显然，无论如何选取路径，最多也只能选出 $(n-1)$ 条路径，因此输入中只给出了 $a_1, \\cdots, a_{n-1}$。\n\n为了设置每张图的通关要求，请对给出的 DAG 和起始点，计算该游戏的最大分数。", "inputFormat": "输入的第一行包含三个由空格隔开的正整数 $n$，$m$，$s_1$，表示给出的图中点的数量、边的数量及起始点的编号。保证 $2\\le n \\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1\\le n$。\n\n输入的第二行包含 $(n-1)$ 个由空格隔开的正整数 $a_1, \\cdots, a_{n-1}$，表示计算分数时的权重。保证 $1\\le a_1\\le a_2\\le\\cdots\\le a_{n-1}\\le 10^9$。\n\n接下来 $m$ 行，每行输入三个由空格隔开的正整数 $u_i, v_i, w_i$，描述图中一条由 $u_i$ 连向 $v_i$，权值为 $w_i$ 的单向边。保证 $1\\le u_i, v_i\\le n$，$u_i\\ne v_i$，$1\\le w_i\\le 10^9$，图是连通的且没有重边。", "outputFormat": "输出仅一行，包括两个整数，由空格隔开。\n\n如果可以选出至少一条路径，则存在一种最优的选取方案使得分数最大，记这个最优分数的最简分数表示为 $p/q$（当最优分数恰为整数时认为 $q=1$），则输出 $p$，$q$。否则，如果无论如何选取都无法选取出至少一条路径，则输出 `-1 -1`。", "hint": "【样例 1 解释】\n\n选出的倍增路径为 $p_1 = ((1, 2)), p_2 = ((2, 5))$。\n\n【数据范围与约定】\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1, u_i, v_i\\le n$，$1\\le a_1 \\le \\cdots\\le a_{n-1}\\le 10^9$，$1\\le w_i\\le 10^9$，输入的图是连通的且没有重边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 倍增路径", "background": "", "description": "对于任意一张 DAG $G=(V,E)$ 和图中的一个起始点 $s_1\\in V$，倍增小游戏的规则为：\n\n- 在第 $i$ 轮操作（$i=1,2,\\cdots$）中，玩家选取一条起点为 $s_i$ 的**非空**路径 $p_i$，使得所有属于这条路径的边的边权和恰为 $(i+1)$ 的倍数。如果无法选择出满足倍数要求的路径，则称游戏失败，玩家将不会获得任何分数；否则，本轮操作成功，并记 $p_i$ 的终点为 $s_{i+1}$。\n\n- 在第 $i$ 轮操作成功后，玩家可以选择结束游戏或者继续第 $(i+1)$ 轮操作。如果选择结束游戏，则称选择出的 $i$ 条路径 $p_1, \\cdots, p_i$ 为倍增路径，并计算得分。\n\n如果游戏没有失败，则在结束游戏时，对于选出的倍增路径 $p_1, \\cdots, p_k$，定义游戏的分数为 $\\sum_{i=1}^k a_i \\left|p_i\\right|/k$，其中 $|p_i|$ 表示路径 $p_i$ 包含的边数，$a_i$ 是输入给定的权值。显然，无论如何选取路径，最多也只能选出 $(n-1)$ 条路径，因此输入中只给出了 $a_1, \\cdots, a_{n-1}$。\n\n为了设置每张图的通关要求，请对给出的 DAG 和起始点，计算该游戏的最大分数。", "inputFormat": "输入的第一行包含三个由空格隔开的正整数 $n$，$m$，$s_1$，表示给出的图中点的数量、边的数量及起始点的编号。保证 $2\\le n \\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1\\le n$。\n\n输入的第二行包含 $(n-1)$ 个由空格隔开的正整数 $a_1, \\cdots, a_{n-1}$，表示计算分数时的权重。保证 $1\\le a_1\\le a_2\\le\\cdots\\le a_{n-1}\\le 10^9$。\n\n接下来 $m$ 行，每行输入三个由空格隔开的正整数 $u_i, v_i, w_i$，描述图中一条由 $u_i$ 连向 $v_i$，权值为 $w_i$ 的单向边。保证 $1\\le u_i, v_i\\le n$，$u_i\\ne v_i$，$1\\le w_i\\le 10^9$，图是连通的且没有重边。", "outputFormat": "输出仅一行，包括两个整数，由空格隔开。\n\n如果可以选出至少一条路径，则存在一种最优的选取方案使得分数最大，记这个最优分数的最简分数表示为 $p/q$（当最优分数恰为整数时认为 $q=1$），则输出 $p$，$q$。否则，如果无论如何选取都无法选取出至少一条路径，则输出 `-1 -1`。", "hint": "【样例 1 解释】\n\n选出的倍增路径为 $p_1 = ((1, 2)), p_2 = ((2, 5))$。\n\n【数据范围与约定】\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1, u_i, v_i\\le n$，$1\\le a_1 \\le \\cdots\\le a_{n-1}\\le 10^9$，$1\\le w_i\\le 10^9$，输入的图是连通的且没有重边。", "locale": "zh-CN"}}}
{"pid": "P8419", "type": "P", "difficulty": 7, "samples": [["8 10\n5 4 8 7 1 6 3 2\n1 2 5\n2 8\n1 2 8\n1 7 8\n2 4\n2 1\n2 6\n2 4\n1 8 8\n2 4\n", "0\n4\n0\n3\n4\n4\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] riapq", "background": null, "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] riapq", "background": null, "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8420", "type": "P", "difficulty": 3, "samples": [["4 1 4\n0000\n1000\n1100\n1010\n1000\n", "5\n"], ["2 4 4\n0000\n0000\n0000\n1000\n0100\n0010", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 匹配", "background": null, "description": "定义“匹配项”是一个长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。现在有 $N$ 个这样的“匹配项”，我们希望设计一个“方案”，“方案”同样是长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。定义每个“匹配项”的错误值为“方案”与“匹配项”不同位的个数，比如“匹配项”是 $\\texttt{101}$，“方案”是 $\\texttt{000}$，那么两者的第一位和第三位是不同的，所以该“方案”对于该“匹配项”的错误值为 $2$。我们希望找到一个“方案”，使得这 $N$ 个“匹配项”的错误值之和最小。此外，有 $M$ 个互不相同的禁用“方案”，我们要求找到的“方案”不能是禁用“方案”之一。", "inputFormat": "输入的第一行包含三个正整数 $N,M,L$。\n\n接下来输入 $N$ 行,每行为一个长度为 $L$ 的字符串，之后 $M$ 行，每行为一个长度为 $L$ 的字符串。", "outputFormat": "输出一个整数，表示满足要求的“方案”得到的这 $N$ 个“匹配项”的最小错误值之和。", "hint": "保证 $1 \\le N \\le 1000$，$1 \\le M \\le \\min(1000,2^L-1) $，$ 1 \\le L \\le 1000 $。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 匹配", "background": null, "description": "定义“匹配项”是一个长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。现在有 $N$ 个这样的“匹配项”，我们希望设计一个“方案”，“方案”同样是长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。定义每个“匹配项”的错误值为“方案”与“匹配项”不同位的个数，比如“匹配项”是 $\\texttt{101}$，“方案”是 $\\texttt{000}$，那么两者的第一位和第三位是不同的，所以该“方案”对于该“匹配项”的错误值为 $2$。我们希望找到一个“方案”，使得这 $N$ 个“匹配项”的错误值之和最小。此外，有 $M$ 个互不相同的禁用“方案”，我们要求找到的“方案”不能是禁用“方案”之一。", "inputFormat": "输入的第一行包含三个正整数 $N,M,L$。\n\n接下来输入 $N$ 行,每行为一个长度为 $L$ 的字符串，之后 $M$ 行，每行为一个长度为 $L$ 的字符串。", "outputFormat": "输出一个整数，表示满足要求的“方案”得到的这 $N$ 个“匹配项”的最小错误值之和。", "hint": "保证 $1 \\le N \\le 1000$，$1 \\le M \\le \\min(1000,2^L-1) $，$ 1 \\le L \\le 1000 $。", "locale": "zh-CN"}}}
{"pid": "P8421", "type": "P", "difficulty": 7, "samples": [["5 3\n3 3 1 1 1\n2 1 3 2 2\n4 5 3 4 4\n1 2\n2 5\n4 5\n", "48\n63\n24\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] rsraogps", "background": "", "description": "给序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，$c_1,\\dots,c_n$，\n\n定义区间 $[l,r]$ 的价值为 $a_l,\\dots,a_r$ 按位与，$b_l,\\dots,b_r$ 按位或，$c_l,\\dots,c_r$ 的最大公因数，这三者的乘积；\n\n$m$ 次查询，每次查询给出区间 $[l,r]$，查询满足 $l\\le l'\\le r'\\le r$ 的 $[l',r']$ 的价值之和。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $b_1,\\dots,b_n$；\n\n第四行 $n$ 个整数 $c_1,\\dots,c_n$；\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。\n", "outputFormat": "共 $m$ 行，每行一个整数，表示对应的答案，答案对 $2^{32}$ 取模后输出。\n", "hint": "\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 5\\times 10^6$\n\n$1\\le a_i,b_i,c_i\\le n$\n\n$1\\le l\\le r\\le n$\n\n建议使用高效的输入输出方式。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] rsraogps", "background": "", "description": "给序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，$c_1,\\dots,c_n$，\n\n定义区间 $[l,r]$ 的价值为 $a_l,\\dots,a_r$ 按位与，$b_l,\\dots,b_r$ 按位或，$c_l,\\dots,c_r$ 的最大公因数，这三者的乘积；\n\n$m$ 次查询，每次查询给出区间 $[l,r]$，查询满足 $l\\le l'\\le r'\\le r$ 的 $[l',r']$ 的价值之和。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $b_1,\\dots,b_n$；\n\n第四行 $n$ 个整数 $c_1,\\dots,c_n$；\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。\n", "outputFormat": "共 $m$ 行，每行一个整数，表示对应的答案，答案对 $2^{32}$ 取模后输出。\n", "hint": "\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 5\\times 10^6$\n\n$1\\le a_i,b_i,c_i\\le n$\n\n$1\\le l\\le r\\le n$\n\n建议使用高效的输入输出方式。\n", "locale": "zh-CN"}}}
{"pid": "P8422", "type": "P", "difficulty": 6, "samples": [["8 8 5 5\n1 1 5 1 5 4 5 3\n2 1 2 2 5 4 3 2\n1 4 1 4 2 1 5 4\n2 1 5 5 2 1 4 4\n2 3 5 2 3 4 2 2\n4 2 4 3 3 2 4 5\n1 3 4 3 5 2 4 3\n3 4 2 5 2 1 1 2\n0 0 0 0 0 0 0 0\n2 0 0 0 0 0 0 0\n0 0 0 0 5 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 6 0 0 3 1\n0 0 0 0 3 0 0 0\n0 0 0 0 0 0 1 4\n3 2 4 2\n5 4 5 5\n7 2 7 3\n8 5 8 6\n6 7 6 8\n", "11692\n"], ["8 8 5 8\n1 1 5 1 5 4 5 3\n2 1 2 2 5 4 3 2\n1 4 1 4 2 1 5 4\n2 1 5 5 2 1 4 4\n2 3 5 2 3 4 2 2\n4 2 4 3 3 2 4 5\n1 3 4 3 5 2 4 3\n3 4 2 5 2 1 1 2\n0 0 0 0 0 0 0 0\n2 0 0 0 0 0 0 0\n0 0 0 0 5 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 6 0 0 3 1\n0 0 0 0 3 0 0 0\n0 0 0 0 0 0 0 0\n1 1 2 2\n3 2 4 2\n3 2 3 3\n4 2 4 3\n5 4 5 5\n7 2 7 3\n8 5 8 6\n6 7 6 8\n", "684\n"], ["5 5 2 1\n1 1 2 1 1\n1 1 2 1 1\n2 2 1 2 2\n1 1 2 1 1\n1 1 2 1 1\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n3 3 4 3\n", "3023\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 德州消消乐", "background": "众所周知小 c 是开心消消乐的高手，而小 z 玩这种稍微需要动一点脑子的游戏都很不在行。正值五一假期，小 c 闲得无聊就打算来教小 z。\n\n经过五天五夜不间断教学，小 z 终于领悟了一点门道（小 z 内心 os：但凡能拿出一点热情来学概率论……），然而他俩都忽略了这玩意是会玩上瘾的，更关键的是小 z 来自山东，于是他打算融入一点家乡特色……\n\n小 z：”……众所周知德州在山东，那我们就叫它‘德州消消乐’吧！“\n\n小 c 连忙制止道你快算了吧，上次的大杂糅棋局你忘了？再说此德州非彼德州啊喂，这次你要搞就自己搞吧别拉我下水了。\n\n话还没说完，小 z 转手把规则甩给了小 c。\n\n小 c：“真香”。", "description": "给定大小为 $n \\times m$ 的棋盘，记左上角坐标为 $(1,1)$ ，右下角坐标为 $(n,m)$ 。有不同颜色的棋子共 $k$ 种，颜色编号为 $1\\sim k$ 。最初每个格子都有一个棋子。\n\n共有 $q$ 次操作，每次操作形如交换相邻（在上、下、左、右方向）的两个棋子。在此之后，在同一行或同一列的连续至少 $3$ 个相同颜色的棋子会被消除。\n\n消除后，所有棋子会遵循重力下落，这一列的最上方变成空位。所有棋子下落完成后，如果又产生了能消除的情况，则会触发连锁反应继续消除，直到无法消除为止。称一次消除+一次下落为“一轮消除”，由此可以定义一次操作触发的消除“轮数”。\n\n其中，有些棋子具有特殊属性，被消除时会触发特殊效果，一共有以下 $6$ 类：\n\n- 1、消除时将同一行的全部棋子消除；\n- 2、消除时将同一列的全部棋子消除；\n- 3、消除时将同一行和同一列的全部棋子消除；\n- 4、消除时将以之为中心 $3 \\times 3$ 的正方形范围内的棋子全部消除；\n- 5、消除时将以之为中心 $5 \\times 5$ 的正方形范围内的棋子全部消除；\n- 6、消除时将与之颜色相同的棋子全部消除； \n\n触发一个棋子的特殊效果时可能连锁触发其他棋子的特殊效果，但是这些都是在同一轮消除内触发的（即连锁反应触发的过程中不会引起下落）。\n\n游戏中，每次操作都要求必须有效，即操作的两个位置相邻且均不为空位，且在操作之后能进行棋子的消除。若某次操作并非有效，则直接跳过这一次操作。所有 $q$ 次操作结束后游戏结束。\n\n定义一次有效操作的“主颜色”为通过交换而直接被消除的颜色（即不包括特殊效果触发和下落引起的消除），容易发现一次有效操作的主颜色至少有 $1$ 种，最多有 $2$ 种。\n\n游戏中，玩家要通过操作来获取尽可能多的得分。得分的规则有如下 $5$ 种：消除奖分+连锁奖分+组合奖分+牌型奖分+终局奖分。\n\n- 消除奖分：每次有效操作中，第 $i$ 轮消除的消除奖分为这一轮中所有被消除的棋子的颜色编号之和的 $i$ 倍。\n- 连锁奖分：设某次有效操作的总消除轮数为 $x$ ，则有连锁奖分 $80(x-1)^2$ 。\n- 组合奖分：某一轮消除中，在仅考虑由“同一行或同一列至少连续 $3$ 个相同颜色”引发的消除的情况下（即不考虑所有特殊效果引起的消除），设某个被消除的同色四连通块大小为 $x$ ，则有组合奖分 $50(x-3)^2$ 。如： $4$ 个同色棋子组成四连的组合奖分为 $50$ ，$5$ 个同色棋子组成五连、十字或T字等形状的组合奖分为 $200$ ，$2\\times3$ 的方形同色棋子的组合奖分为 $450$ 。\n - 牌型奖分：每 $5$ 次有效操作计算一次牌型奖分，取之前 $5$ 次有效操作的主颜色（若某次操作有多个主颜色，取能按照以下规则计算出的最大奖分的主颜色），按照如下牌型规则计算奖分：\n   \n   - 高牌： $5$ 种颜色全部不同，奖 $50$ 分 + 所有牌中最大的颜色编号；\n   - 一对： $2$ 个相同颜色 + $3$ 个不同颜色，奖 $100$ 分 + 一对的颜色编号 $\\times 2$ ；\n   \n   - 两对： $2$ 对相同颜色 + $1$ 个其他颜色，奖 $200$ 分 + 两对中较大的颜色编号 $\\times 2$ + 两对中较小的颜色编号；\n   - 三条： $3$ 个相同颜色 + $2$ 个不同颜色，奖 $300$ 分 + 三条的颜色编号 $\\times 3$ ；\n   - 葫芦： $3$ 个相同颜色 + 另外 $2$ 个相同颜色，奖 $500$ 分 + 三个相同的颜色编号 $\\times 3$ + 两个相同的颜色编号；\n   - 四条： $4$ 个相同颜色 + $1$ 个其他颜色，奖 $750$ 分 + 四条的颜色编号 $\\times 5$ ；\n   - 五条： $5$ 个颜色全部相同，奖 $1000$ 分 + 五条的颜色编号 $\\times 10$ 。\n - 终局奖分：若所有 $q$ 次操作均有效，在终局时额外获得 $1000$ 分终局奖分；若游戏结束时棋盘被全部清空，额外获得 $10000$ 分的终局奖分。\n\n给定一局游戏的初始局面和玩家的每一次操作，你需要计算玩家的总得分。", "inputFormat": "第 $1$ 行： $4$ 个正整数 $n,m,k,q$ 。\n\n接下来 $n$ 行，每行 $m$ 个正整数 $a_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的颜色。\n\n接下来 $n$ 行，每行 $m$ 个非负整数 $b_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的特殊效果，含义如题面所述。特别地， $b_{i,j}=0$ 表示没有特殊效果。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $x_{i,1},y_{i,1},x_{i,2},y_{i,2}$ ，表示交换坐标 $(x_{i,1},y_{i,1})$ 和 $(x_{i,2},y_{i,2})$ 位置的棋子。", "outputFormat": "输出一行，一个非负整数表示终局时的总得分。", "hint": "【样例 1 解释】\n\n每次操作后，前 $3$ 类奖分的和分别为：$315,\\ 417,\\ 429,\\ 435,\\ 482$ 。第 $5$ 次操作后计算牌型奖分，最优牌型为 $(1\\ 2\\ 4\\ 2\\ 4)$ ，奖分为 $200 + 4\\times 2 + 2 \\times 1 = 210$ 。终局时两种终局奖分均可获得，故总分为 $11692$ 。\n\n【样例 2 解释】\n\n与上一组样例相比，增加了 $3$ 次无效操作，且最后不能实现全消，因此得不到终局奖分。\n\n【数据范围与约定】\n\n\n$n,m\\leq 50,\\ k \\leq 100,\\ q \\leq 1000,\\ a_{i,j} \\leq k,\\ b_{i,j} \\leq 6,\\ x_{i,1},x_{i,2} \\leq n,\\ y_{i,1},y_{i,2} \\leq m$ 。\n\n保证初始局面没有可以直接消除的情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 德州消消乐", "background": "众所周知小 c 是开心消消乐的高手，而小 z 玩这种稍微需要动一点脑子的游戏都很不在行。正值五一假期，小 c 闲得无聊就打算来教小 z。\n\n经过五天五夜不间断教学，小 z 终于领悟了一点门道（小 z 内心 os：但凡能拿出一点热情来学概率论……），然而他俩都忽略了这玩意是会玩上瘾的，更关键的是小 z 来自山东，于是他打算融入一点家乡特色……\n\n小 z：”……众所周知德州在山东，那我们就叫它‘德州消消乐’吧！“\n\n小 c 连忙制止道你快算了吧，上次的大杂糅棋局你忘了？再说此德州非彼德州啊喂，这次你要搞就自己搞吧别拉我下水了。\n\n话还没说完，小 z 转手把规则甩给了小 c。\n\n小 c：“真香”。", "description": "给定大小为 $n \\times m$ 的棋盘，记左上角坐标为 $(1,1)$ ，右下角坐标为 $(n,m)$ 。有不同颜色的棋子共 $k$ 种，颜色编号为 $1\\sim k$ 。最初每个格子都有一个棋子。\n\n共有 $q$ 次操作，每次操作形如交换相邻（在上、下、左、右方向）的两个棋子。在此之后，在同一行或同一列的连续至少 $3$ 个相同颜色的棋子会被消除。\n\n消除后，所有棋子会遵循重力下落，这一列的最上方变成空位。所有棋子下落完成后，如果又产生了能消除的情况，则会触发连锁反应继续消除，直到无法消除为止。称一次消除+一次下落为“一轮消除”，由此可以定义一次操作触发的消除“轮数”。\n\n其中，有些棋子具有特殊属性，被消除时会触发特殊效果，一共有以下 $6$ 类：\n\n- 1、消除时将同一行的全部棋子消除；\n- 2、消除时将同一列的全部棋子消除；\n- 3、消除时将同一行和同一列的全部棋子消除；\n- 4、消除时将以之为中心 $3 \\times 3$ 的正方形范围内的棋子全部消除；\n- 5、消除时将以之为中心 $5 \\times 5$ 的正方形范围内的棋子全部消除；\n- 6、消除时将与之颜色相同的棋子全部消除； \n\n触发一个棋子的特殊效果时可能连锁触发其他棋子的特殊效果，但是这些都是在同一轮消除内触发的（即连锁反应触发的过程中不会引起下落）。\n\n游戏中，每次操作都要求必须有效，即操作的两个位置相邻且均不为空位，且在操作之后能进行棋子的消除。若某次操作并非有效，则直接跳过这一次操作。所有 $q$ 次操作结束后游戏结束。\n\n定义一次有效操作的“主颜色”为通过交换而直接被消除的颜色（即不包括特殊效果触发和下落引起的消除），容易发现一次有效操作的主颜色至少有 $1$ 种，最多有 $2$ 种。\n\n游戏中，玩家要通过操作来获取尽可能多的得分。得分的规则有如下 $5$ 种：消除奖分+连锁奖分+组合奖分+牌型奖分+终局奖分。\n\n- 消除奖分：每次有效操作中，第 $i$ 轮消除的消除奖分为这一轮中所有被消除的棋子的颜色编号之和的 $i$ 倍。\n- 连锁奖分：设某次有效操作的总消除轮数为 $x$ ，则有连锁奖分 $80(x-1)^2$ 。\n- 组合奖分：某一轮消除中，在仅考虑由“同一行或同一列至少连续 $3$ 个相同颜色”引发的消除的情况下（即不考虑所有特殊效果引起的消除），设某个被消除的同色四连通块大小为 $x$ ，则有组合奖分 $50(x-3)^2$ 。如： $4$ 个同色棋子组成四连的组合奖分为 $50$ ，$5$ 个同色棋子组成五连、十字或T字等形状的组合奖分为 $200$ ，$2\\times3$ 的方形同色棋子的组合奖分为 $450$ 。\n - 牌型奖分：每 $5$ 次有效操作计算一次牌型奖分，取之前 $5$ 次有效操作的主颜色（若某次操作有多个主颜色，取能按照以下规则计算出的最大奖分的主颜色），按照如下牌型规则计算奖分：\n   \n   - 高牌： $5$ 种颜色全部不同，奖 $50$ 分 + 所有牌中最大的颜色编号；\n   - 一对： $2$ 个相同颜色 + $3$ 个不同颜色，奖 $100$ 分 + 一对的颜色编号 $\\times 2$ ；\n   \n   - 两对： $2$ 对相同颜色 + $1$ 个其他颜色，奖 $200$ 分 + 两对中较大的颜色编号 $\\times 2$ + 两对中较小的颜色编号；\n   - 三条： $3$ 个相同颜色 + $2$ 个不同颜色，奖 $300$ 分 + 三条的颜色编号 $\\times 3$ ；\n   - 葫芦： $3$ 个相同颜色 + 另外 $2$ 个相同颜色，奖 $500$ 分 + 三个相同的颜色编号 $\\times 3$ + 两个相同的颜色编号；\n   - 四条： $4$ 个相同颜色 + $1$ 个其他颜色，奖 $750$ 分 + 四条的颜色编号 $\\times 5$ ；\n   - 五条： $5$ 个颜色全部相同，奖 $1000$ 分 + 五条的颜色编号 $\\times 10$ 。\n - 终局奖分：若所有 $q$ 次操作均有效，在终局时额外获得 $1000$ 分终局奖分；若游戏结束时棋盘被全部清空，额外获得 $10000$ 分的终局奖分。\n\n给定一局游戏的初始局面和玩家的每一次操作，你需要计算玩家的总得分。", "inputFormat": "第 $1$ 行： $4$ 个正整数 $n,m,k,q$ 。\n\n接下来 $n$ 行，每行 $m$ 个正整数 $a_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的颜色。\n\n接下来 $n$ 行，每行 $m$ 个非负整数 $b_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的特殊效果，含义如题面所述。特别地， $b_{i,j}=0$ 表示没有特殊效果。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $x_{i,1},y_{i,1},x_{i,2},y_{i,2}$ ，表示交换坐标 $(x_{i,1},y_{i,1})$ 和 $(x_{i,2},y_{i,2})$ 位置的棋子。", "outputFormat": "输出一行，一个非负整数表示终局时的总得分。", "hint": "【样例 1 解释】\n\n每次操作后，前 $3$ 类奖分的和分别为：$315,\\ 417,\\ 429,\\ 435,\\ 482$ 。第 $5$ 次操作后计算牌型奖分，最优牌型为 $(1\\ 2\\ 4\\ 2\\ 4)$ ，奖分为 $200 + 4\\times 2 + 2 \\times 1 = 210$ 。终局时两种终局奖分均可获得，故总分为 $11692$ 。\n\n【样例 2 解释】\n\n与上一组样例相比，增加了 $3$ 次无效操作，且最后不能实现全消，因此得不到终局奖分。\n\n【数据范围与约定】\n\n\n$n,m\\leq 50,\\ k \\leq 100,\\ q \\leq 1000,\\ a_{i,j} \\leq k,\\ b_{i,j} \\leq 6,\\ x_{i,1},x_{i,2} \\leq n,\\ y_{i,1},y_{i,2} \\leq m$ 。\n\n保证初始局面没有可以直接消除的情况。", "locale": "zh-CN"}}}
{"pid": "P8423", "type": "P", "difficulty": 0, "samples": [], "limits": {"time": [1000], "memory": [131072]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 想象", "background": "", "description": "长颈鹿是一名想象学竞赛（Olympiad in Imaginics） 的选手。特别是出生在风井省内，若要从千百高手中脱颖而出，争夺进入全国决赛的门票，为自己上大学取得升学优势，更需要无穷无尽的想象力。\n\n风井省的赛题风格自古便与其他省份截然不同，因此即便在 3022 年，风井省也保持着自己的独立作风，没有与其他省一同进行统考，仍是独立命卷。\n\n长颈鹿深知风井省赛题所需的想象力之深厚：在往年，赛题的空间限制、数据组数甚至是题目大意，都可能需要选手自行想象。有些一眼看就没有多项式做法的题目，只要加以想象，也可以通过简单的输出通过。而真正的博弈，往往在赛前就开始，风井省总是会从网络各地原汁原味搬运题目，对于没有在赛前就做到原题的选手，想象力的匮乏是不可避免的。\n\n但想象学竞赛的魅力就在于，你永远想象不到会发生的事。\n\n在风井省选前半个月，长颈鹿的教练便为学生们布置了两道在 CodeFancy 上非常冷门的练习题目，但没让长颈鹿想到的是，这竟与正式赛题完全一致！长颈鹿十分钦佩教练的想象力，更深刻理解了“做干净的奥赛”为何意。最终，在这次风井省选中，长颈鹿的学校名列前茅，即便代价是另一些有一定水平的选手没有得到理想的名次。\n\n黑盒测试，是想象学竞赛区别于别的竞赛的最大特点。排除了人为的评判，将所有程序一视同仁，因此在以前，想象学竞赛被称为“最公平的竞赛”。可在冰冷冷的现实面前，所谓公平的表象，也只是一种想象。\n\n幸好，发生过的事情无需想象，我们都还能用双眼直视真相，理解发生了什么，并将之铭记。就像你也无需对本文描述的故事进行想象，简单的换词游戏不会屏蔽真义。现在就请你输出，长颈鹿在风井省参与的比赛的是什么？用缩写名称输出。\n\n例：真卷省的省级选拔赛，缩写名称为 ZJOI。", "inputFormat": "本题的输入对于你的输出没有意义，你可以无需读入。", "outputFormat": "本题仅有一个唯一的输出答案。\n\n输出一行，四个大写字母，表示风井省的省级选拔赛缩写名称。", "hint": "请不要妄加想象，认真阅读题目要求，正确输出，以避免在本题出错罚时。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 想象", "background": "", "description": "长颈鹿是一名想象学竞赛（Olympiad in Imaginics） 的选手。特别是出生在风井省内，若要从千百高手中脱颖而出，争夺进入全国决赛的门票，为自己上大学取得升学优势，更需要无穷无尽的想象力。\n\n风井省的赛题风格自古便与其他省份截然不同，因此即便在 3022 年，风井省也保持着自己的独立作风，没有与其他省一同进行统考，仍是独立命卷。\n\n长颈鹿深知风井省赛题所需的想象力之深厚：在往年，赛题的空间限制、数据组数甚至是题目大意，都可能需要选手自行想象。有些一眼看就没有多项式做法的题目，只要加以想象，也可以通过简单的输出通过。而真正的博弈，往往在赛前就开始，风井省总是会从网络各地原汁原味搬运题目，对于没有在赛前就做到原题的选手，想象力的匮乏是不可避免的。\n\n但想象学竞赛的魅力就在于，你永远想象不到会发生的事。\n\n在风井省选前半个月，长颈鹿的教练便为学生们布置了两道在 CodeFancy 上非常冷门的练习题目，但没让长颈鹿想到的是，这竟与正式赛题完全一致！长颈鹿十分钦佩教练的想象力，更深刻理解了“做干净的奥赛”为何意。最终，在这次风井省选中，长颈鹿的学校名列前茅，即便代价是另一些有一定水平的选手没有得到理想的名次。\n\n黑盒测试，是想象学竞赛区别于别的竞赛的最大特点。排除了人为的评判，将所有程序一视同仁，因此在以前，想象学竞赛被称为“最公平的竞赛”。可在冰冷冷的现实面前，所谓公平的表象，也只是一种想象。\n\n幸好，发生过的事情无需想象，我们都还能用双眼直视真相，理解发生了什么，并将之铭记。就像你也无需对本文描述的故事进行想象，简单的换词游戏不会屏蔽真义。现在就请你输出，长颈鹿在风井省参与的比赛的是什么？用缩写名称输出。\n\n例：真卷省的省级选拔赛，缩写名称为 ZJOI。", "inputFormat": "本题的输入对于你的输出没有意义，你可以无需读入。", "outputFormat": "本题仅有一个唯一的输出答案。\n\n输出一行，四个大写字母，表示风井省的省级选拔赛缩写名称。", "hint": "请不要妄加想象，认真阅读题目要求，正确输出，以避免在本题出错罚时。", "locale": "zh-CN"}}}
{"pid": "P8424", "type": "P", "difficulty": 6, "samples": [["3\n1 2 4\n", "0.8333333333\n"], ["6\n1 2 5 6 8 9\n", "1.166666667\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "Special Judge", "O2优化", "JOI（日本）"], "title": "[JOI Open 2022] 跷跷板 / Seesaw", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T1. [シーソー](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement.pdf) / [Seesaw](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement-en.pdf)。**", "description": "一根长度为 ${10}^9$ 的直杆从左到右水平放置。你可以忽略这根杆的重量。共有 $N$ 个砝码挂在这根杆上，每个砝码的质量为一单位。这 $N$ 个砝码的位置两两不同。第 $i$（$1 \\le i \\le N$）个砝码的位置为 $A_i$。即，第 $i$ 个砝码到直杆最左端的距离为 $A_i$。\n\n最开始，我们有一个宽度为 $w$ 的箱子。我们可以把这根杆子放在箱子上，支撑起杆从 $l$ 到 $r$（$0 \\le l < r \\le {10}^9$）的部分（包括两端），即，从杆上位置为 $l$ 到杆上位置为 $r$ 的区间。这里需要满足 $r = l + w$。之后我们不可以改变 $l$ 和 $r$ 的值。\n\n接下来，我们去掉挂在杆上最左端或最右端的砝码。我们需要重复这个操作 $N - 1$ 次。在这个过程中，包括初始状态和最终状态，挂在杆上的所有砝码重心都需要保持在 $l$ 到 $r$ 之间（包括两端）。如果杆上挂有 $m$ 个砝码，位置分别为 $b_1, b_2, \\ldots, b_m$，那么重心位置为 $\\frac{b_1 + b_2 + \\cdots + b_m}{m}$。\n\n给定 $N$ 和这 $N$ 个砝码的位置 $A_1, A_2, \\ldots, A_N$，写一个程序计算箱子的最小可能宽度 $w$。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个非负整数 $A_1, A_2, \\ldots, A_N$。", "outputFormat": "输出箱子的最小可能宽度 $w$。只要你的输出与标准答案之间的绝对误差或相对误差小于等于 ${10}^{-9}$，你的程序就会被判为正确。", "hint": "**【样例解释 \\#1】**\n\n可让箱子的宽度为 $\\frac{5}{6}$。我们令 $l = \\frac{3}{2}, r = \\frac{7}{3}$。进行如下操作：\n\n- 最初，重心位置为 $\\frac{7}{3}$。\n- 第一次操作，我们去掉最右端的砝码（位置为 $4$ 的砝码）。重心位置变为 $\\frac{3}{2}$。\n- 第二次操作，我们去掉最左端的砝码（位置为 $1$ 的砝码）。重心位置变为 $2$。\n\n在这个过程中，重心始终保持在 $l$ 到 $r$ 范围中。\n\n因为箱子的宽度不会小于 $\\frac{5}{6}$，因此输出 $\\frac{5}{6}$ 的小数形式。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（1 分）：$N \\le 20$。\n- 子任务 2（33 分）：$N \\le 100$。\n- 子任务 3（33 分）：$N \\le 2000$。\n- 子任务 4（33 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le 2 \\times 10^5$，$0 \\le A_1 < A_2 < \\cdots < A_N \\le {10}^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2022] 跷跷板 / Seesaw", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T1. [シーソー](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement.pdf) / [Seesaw](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement-en.pdf)。**", "description": "一根长度为 ${10}^9$ 的直杆从左到右水平放置。你可以忽略这根杆的重量。共有 $N$ 个砝码挂在这根杆上，每个砝码的质量为一单位。这 $N$ 个砝码的位置两两不同。第 $i$（$1 \\le i \\le N$）个砝码的位置为 $A_i$。即，第 $i$ 个砝码到直杆最左端的距离为 $A_i$。\n\n最开始，我们有一个宽度为 $w$ 的箱子。我们可以把这根杆子放在箱子上，支撑起杆从 $l$ 到 $r$（$0 \\le l < r \\le {10}^9$）的部分（包括两端），即，从杆上位置为 $l$ 到杆上位置为 $r$ 的区间。这里需要满足 $r = l + w$。之后我们不可以改变 $l$ 和 $r$ 的值。\n\n接下来，我们去掉挂在杆上最左端或最右端的砝码。我们需要重复这个操作 $N - 1$ 次。在这个过程中，包括初始状态和最终状态，挂在杆上的所有砝码重心都需要保持在 $l$ 到 $r$ 之间（包括两端）。如果杆上挂有 $m$ 个砝码，位置分别为 $b_1, b_2, \\ldots, b_m$，那么重心位置为 $\\frac{b_1 + b_2 + \\cdots + b_m}{m}$。\n\n给定 $N$ 和这 $N$ 个砝码的位置 $A_1, A_2, \\ldots, A_N$，写一个程序计算箱子的最小可能宽度 $w$。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个非负整数 $A_1, A_2, \\ldots, A_N$。", "outputFormat": "输出箱子的最小可能宽度 $w$。只要你的输出与标准答案之间的绝对误差或相对误差小于等于 ${10}^{-9}$，你的程序就会被判为正确。", "hint": "**【样例解释 \\#1】**\n\n可让箱子的宽度为 $\\frac{5}{6}$。我们令 $l = \\frac{3}{2}, r = \\frac{7}{3}$。进行如下操作：\n\n- 最初，重心位置为 $\\frac{7}{3}$。\n- 第一次操作，我们去掉最右端的砝码（位置为 $4$ 的砝码）。重心位置变为 $\\frac{3}{2}$。\n- 第二次操作，我们去掉最左端的砝码（位置为 $1$ 的砝码）。重心位置变为 $2$。\n\n在这个过程中，重心始终保持在 $l$ 到 $r$ 范围中。\n\n因为箱子的宽度不会小于 $\\frac{5}{6}$，因此输出 $\\frac{5}{6}$ 的小数形式。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（1 分）：$N \\le 20$。\n- 子任务 2（33 分）：$N \\le 100$。\n- 子任务 3（33 分）：$N \\le 2000$。\n- 子任务 4（33 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le 2 \\times 10^5$，$0 \\le A_1 < A_2 < \\cdots < A_N \\le {10}^9$。", "locale": "zh-CN"}}}
{"pid": "P8425", "type": "P", "difficulty": 7, "samples": [["6\n5 4 6 1 3 2\n", "2\n"], ["4\n4 1 3 2\n", "0\n"], ["7\n3 1 6 7 4 2 5\n", "2\n"], ["13\n8 5 6 13 4 2 11 3 9 1 10 7 12\n", "6\n"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "O2优化", "JOI（日本）"], "title": "[JOI Open 2022] 长颈鹿 / Giraffes", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T2. [キリン](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement.pdf) / [Giraffes](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement-en.pdf)。**", "description": "IOI 动物园以长颈鹿而闻名。IOI 动物园中有 $N$ 只长颈鹿，按身高递增顺序编号为 $1 \\sim N$。长颈鹿的身高两两不同。共有 $N$ 个笼舍排成一排，从左到右编号为 $1 \\sim N$。每个笼舍居住一只长颈鹿。笼舍 $i$ 中居住长颈鹿 $P_i$。\n\nAPIO 先生是 IOI 动物园园长。他正担心 IOI 动物园的评级问题。IOI 动物园因“长颈鹿的观感很糟”的原因收到了差评。具体来说，当一个游客和长颈鹿拍照时，游客会选择两个整数 $l, r$（$1 \\le l \\le r \\le N$）并给在笼舍 $l, l + 1, \\ldots, r$ 的长颈鹿拍照。那么，只要下列两个条件**都满足**，这些长颈鹿的观感就是差的。\n\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都高。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l < P_k > P_r$。\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都矮。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l > P_k < P_r$。\n\nAPIO 先生将重新排列这些长颈鹿，满足对于游客对任意 $l, r$（$1 \\le l \\le r \\le N$）的选择，长颈鹿的观感都不会是差的。因为将一只长颈鹿从一个笼舍挪到另一个笼舍很费功夫，他想要最小化移动长颈鹿的只数。当然，在移动之后，每个笼舍应仍只有一只长颈鹿居住。\n\n给定目前长颈鹿的信息，写一个程序计算最少要移动多少只长颈鹿。因为 APIO 先生目前的长颈鹿排布是随机的，你可以假设 $P_i$（$1 \\le i \\le N$）的值是随机生成的（见【**数据生成**】一节了解详细信息）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数 $P_1, P_2, \\ldots, P_N$。", "outputFormat": "输出一行一个整数，表示最少要移动多少只长颈鹿。", "hint": "**【样例解释 \\#1】**\n\nIOI 动物园中共有 $6$ 只长颈鹿。长颈鹿 $5,4,6,1,3,2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，如果游客对 $l = 2, r = 5$ 的长颈鹿拍照的话，观感就是差的。两个条件按如下方式满足。\n\n- 住在笼舍 $3$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都高。\n- 住在笼舍 $4$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都矮。\n\n如果 APIO 先生将长颈鹿 $1$ 从笼舍 $4$ 移到笼舍 $1$，然后将长颈鹿 $5$ 从笼舍 $1$ 移动到笼舍 $4$，那么对于游客的任意选择，观感都不会是差的。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\nIOI 动物园中共有 $4$ 只长颈鹿。长颈鹿 $4, 1, 3, 2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，对于游客的任意选择，观感都不会变差。APIO 先生不需要移动长颈鹿，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n以 APIO 先生将长颈鹿 $3, 5, 6, 7, 4, 2, 1$ 按从左到右的顺序居住在各自笼舍中为例。对于游客的任意选择，观感都不会变差。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足子任务 2、3、4 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（10 分）：$N \\le 7$。\n- 子任务 2（22 分）：$N \\le 13$。\n- 子任务 3（27 分）：$N \\le 300$。\n- 子任务 4（41 分）：无特殊限制。\n\n对于所有数据，满足 $1 \\le N \\le 8000$，$1 \\le P_i \\le N$，$P_i$ 两两不同，保证 $P_i$ 是随机生成的（见【**数据生成**】一节了解详细信息）。\n\n----\n\n**【数据生成】**\n\n在本题，除了样例输入，有 $10$ 组数据满足子任务 1、2、3、4 的限制，有 $10$ 组数据满足子任务 2、3、4 的限制，有 $10$ 组数据满足子任务 3、4 的限制，有 $10$ 组数据满足子任务 4 的限制。包括样例，总计有 $44$ 组数据用于评分。所有 $44$ 组数据按如下方式生成：\n\n1. 首先，生成满足子任务的 $N$。\n2. 然后，在 $N! = 1 \\times 2 \\times \\cdots \\times N$ 个满足限制的排列 $(P_1, P_2, \\ldots, P_N)$ 中，等概率随机选择一个作为 $P_1, P_2, \\ldots, P_N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2022] 长颈鹿 / Giraffes", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T2. [キリン](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement.pdf) / [Giraffes](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement-en.pdf)。**", "description": "IOI 动物园以长颈鹿而闻名。IOI 动物园中有 $N$ 只长颈鹿，按身高递增顺序编号为 $1 \\sim N$。长颈鹿的身高两两不同。共有 $N$ 个笼舍排成一排，从左到右编号为 $1 \\sim N$。每个笼舍居住一只长颈鹿。笼舍 $i$ 中居住长颈鹿 $P_i$。\n\nAPIO 先生是 IOI 动物园园长。他正担心 IOI 动物园的评级问题。IOI 动物园因“长颈鹿的观感很糟”的原因收到了差评。具体来说，当一个游客和长颈鹿拍照时，游客会选择两个整数 $l, r$（$1 \\le l \\le r \\le N$）并给在笼舍 $l, l + 1, \\ldots, r$ 的长颈鹿拍照。那么，只要下列两个条件**都满足**，这些长颈鹿的观感就是差的。\n\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都高。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l < P_k > P_r$。\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都矮。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l > P_k < P_r$。\n\nAPIO 先生将重新排列这些长颈鹿，满足对于游客对任意 $l, r$（$1 \\le l \\le r \\le N$）的选择，长颈鹿的观感都不会是差的。因为将一只长颈鹿从一个笼舍挪到另一个笼舍很费功夫，他想要最小化移动长颈鹿的只数。当然，在移动之后，每个笼舍应仍只有一只长颈鹿居住。\n\n给定目前长颈鹿的信息，写一个程序计算最少要移动多少只长颈鹿。因为 APIO 先生目前的长颈鹿排布是随机的，你可以假设 $P_i$（$1 \\le i \\le N$）的值是随机生成的（见【**数据生成**】一节了解详细信息）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数 $P_1, P_2, \\ldots, P_N$。", "outputFormat": "输出一行一个整数，表示最少要移动多少只长颈鹿。", "hint": "**【样例解释 \\#1】**\n\nIOI 动物园中共有 $6$ 只长颈鹿。长颈鹿 $5,4,6,1,3,2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，如果游客对 $l = 2, r = 5$ 的长颈鹿拍照的话，观感就是差的。两个条件按如下方式满足。\n\n- 住在笼舍 $3$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都高。\n- 住在笼舍 $4$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都矮。\n\n如果 APIO 先生将长颈鹿 $1$ 从笼舍 $4$ 移到笼舍 $1$，然后将长颈鹿 $5$ 从笼舍 $1$ 移动到笼舍 $4$，那么对于游客的任意选择，观感都不会是差的。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\nIOI 动物园中共有 $4$ 只长颈鹿。长颈鹿 $4, 1, 3, 2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，对于游客的任意选择，观感都不会变差。APIO 先生不需要移动长颈鹿，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n以 APIO 先生将长颈鹿 $3, 5, 6, 7, 4, 2, 1$ 按从左到右的顺序居住在各自笼舍中为例。对于游客的任意选择，观感都不会变差。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足子任务 2、3、4 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（10 分）：$N \\le 7$。\n- 子任务 2（22 分）：$N \\le 13$。\n- 子任务 3（27 分）：$N \\le 300$。\n- 子任务 4（41 分）：无特殊限制。\n\n对于所有数据，满足 $1 \\le N \\le 8000$，$1 \\le P_i \\le N$，$P_i$ 两两不同，保证 $P_i$ 是随机生成的（见【**数据生成**】一节了解详细信息）。\n\n----\n\n**【数据生成】**\n\n在本题，除了样例输入，有 $10$ 组数据满足子任务 1、2、3、4 的限制，有 $10$ 组数据满足子任务 2、3、4 的限制，有 $10$ 组数据满足子任务 3、4 的限制，有 $10$ 组数据满足子任务 4 的限制。包括样例，总计有 $44$ 组数据用于评分。所有 $44$ 组数据按如下方式生成：\n\n1. 首先，生成满足子任务的 $N$。\n2. 然后，在 $N! = 1 \\times 2 \\times \\cdots \\times N$ 个满足限制的排列 $(P_1, P_2, \\ldots, P_N)$ 中，等概率随机选择一个作为 $P_1, P_2, \\ldots, P_N$。", "locale": "zh-CN"}}}
{"pid": "P8426", "type": "P", "difficulty": 7, "samples": [["4 4\n1 2 1\n1 3 2\n2 4 4\n3 4 3\n", "0\n"], ["4 4\n1 2 1\n1 3 3\n2 4 4\n3 4 3\n", "1\n"], ["3 4\n1 2 1\n1 2 2\n1 3 3\n1 3 3\n", "0\n"], ["4 5\n1 2 1\n1 3 2\n2 4 4\n3 4 3\n2 3 1\n", "1\n"], ["12 17\n2 4 656247308\n4 6 106088453\n1 5 754343261\n9 12 497827261\n3 8 759830309\n3 4 61084725\n1 6 324702188\n3 6 415317430\n7 12 846175092\n5 8 278621369\n1 10 891247646\n10 12 755236904\n6 8 511967203\n5 6 597197970\n1 7 800309458\n7 9 348347831\n10 11 134217757\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "O2优化", "JOI（日本）"], "title": "[JOI Open 2022] 放学路 / School Road", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T3. [通学路](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement.pdf) / [School Road](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement-en.pdf)。**\n\n----\n\n在洛谷上，本题测试点和子任务配置可能导致评测结果页面难以理解。具体地，将评测结果页面中的子任务编号 $x$ 转为二进制后，从低到高第 $i$ 位为 $1$ 就表示子任务内所有测试点均满足题目中的子任务 $i$ 的限制。", "description": "河狸国由 $N$ 座城市组成，编号为 $1 \\sim N$。共有 $M$ 条道路连接这些城市，道路编号为 $1 \\sim M$。道路 $i$（$1 \\le i \\le M$）双向连接城市 $A_i$ 和 $B_i$，并且道路 $i$ 的长度为 $C_i$。保证经过一定数量的道路，均可以从任意一座城市到达任意其他城市。\n\nBitaro 是一只住在城市 $1$ 的河狸。他要去城市 $N$ 上学。他上学通常都走一样的路线。他的上学路线满足如下条件。\n\n- 令 $L$ 为从城市 $1$ 到城市 $N$ 的最短距离。\n- Bitaro 的上学路是一条连接城市 $1$ 和城市 $N$ 且长度为 $L$ 的路径。\n\n因为今天天气好，Bitaro 决定绕路回家。也就是说，他会选择一条从城市 $N$ 到城市 $1$ 且长度大于 $L$ 的路径。因为 Bitaro 很容易厌倦，他不想经过同一座城市多于一次。因此，当他绕远路回家时，不允许经过同一座城市多于一次，并且不允许走回头路。\n\n给定河狸国的城市和道路的信息，写一个程序确定是否存在一条从学校到 Bitaro 的家的远路。\n\n**赛时提醒：Bitaro 不允许在回家途中经过相同的城市超过一次，但是并不禁止经过在他上学路线中经过的城市。**", "inputFormat": "第一行，两个正整数 $N, M$。\n\n接下来 $M$ 行，第 $i$ 行三个正整数 $A_i, B_i, C_i$。", "outputFormat": "输出一行，一个数。如果存在一条到 Bitaro 家的，长度大于 $L$ 且不经过同一座城市多于一次的路径，输出 $1$，否则输出 $0$。", "hint": "**【样例解释 \\#1】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $5$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为不存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $6$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $1$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#5】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（7 分）：$M \\le 40$。\n- 子任务 2（15 分）：$N \\le 18$。\n- 子任务 3（23 分）：$M - N \\le 13$。\n- 子任务 4（35 分）：对于任意三座不同的城市 $a, b, c$，均存在一条从城市 $a$ 到城市 $c$ 且不经过城市 $b$ 的路径。\n- 子任务 5（20 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le {10}^5$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le A_i < B_i \\le N$，$1 \\le C_i \\le {10}^9$，保证经过一定数量的道路，均可以从任意一个城市到达任意其他城市。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2022] 放学路 / School Road", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T3. [通学路](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement.pdf) / [School Road](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement-en.pdf)。**\n\n----\n\n在洛谷上，本题测试点和子任务配置可能导致评测结果页面难以理解。具体地，将评测结果页面中的子任务编号 $x$ 转为二进制后，从低到高第 $i$ 位为 $1$ 就表示子任务内所有测试点均满足题目中的子任务 $i$ 的限制。", "description": "河狸国由 $N$ 座城市组成，编号为 $1 \\sim N$。共有 $M$ 条道路连接这些城市，道路编号为 $1 \\sim M$。道路 $i$（$1 \\le i \\le M$）双向连接城市 $A_i$ 和 $B_i$，并且道路 $i$ 的长度为 $C_i$。保证经过一定数量的道路，均可以从任意一座城市到达任意其他城市。\n\nBitaro 是一只住在城市 $1$ 的河狸。他要去城市 $N$ 上学。他上学通常都走一样的路线。他的上学路线满足如下条件。\n\n- 令 $L$ 为从城市 $1$ 到城市 $N$ 的最短距离。\n- Bitaro 的上学路是一条连接城市 $1$ 和城市 $N$ 且长度为 $L$ 的路径。\n\n因为今天天气好，Bitaro 决定绕路回家。也就是说，他会选择一条从城市 $N$ 到城市 $1$ 且长度大于 $L$ 的路径。因为 Bitaro 很容易厌倦，他不想经过同一座城市多于一次。因此，当他绕远路回家时，不允许经过同一座城市多于一次，并且不允许走回头路。\n\n给定河狸国的城市和道路的信息，写一个程序确定是否存在一条从学校到 Bitaro 的家的远路。\n\n**赛时提醒：Bitaro 不允许在回家途中经过相同的城市超过一次，但是并不禁止经过在他上学路线中经过的城市。**", "inputFormat": "第一行，两个正整数 $N, M$。\n\n接下来 $M$ 行，第 $i$ 行三个正整数 $A_i, B_i, C_i$。", "outputFormat": "输出一行，一个数。如果存在一条到 Bitaro 家的，长度大于 $L$ 且不经过同一座城市多于一次的路径，输出 $1$，否则输出 $0$。", "hint": "**【样例解释 \\#1】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $5$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为不存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $6$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $1$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#5】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（7 分）：$M \\le 40$。\n- 子任务 2（15 分）：$N \\le 18$。\n- 子任务 3（23 分）：$M - N \\le 13$。\n- 子任务 4（35 分）：对于任意三座不同的城市 $a, b, c$，均存在一条从城市 $a$ 到城市 $c$ 且不经过城市 $b$ 的路径。\n- 子任务 5（20 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le {10}^5$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le A_i < B_i \\le N$，$1 \\le C_i \\le {10}^9$，保证经过一定数量的道路，均可以从任意一个城市到达任意其他城市。", "locale": "zh-CN"}}}
{"pid": "P8427", "type": "P", "difficulty": 7, "samples": [["12 11\n1 1 1 1 1 1 1 1 1 1 1\n1 1 1 1 0 0 0 1 1 1 1\n1 1 1 0 0 0 0 0 1 1 1\n1 1 0 0 0 0 0 0 0 1 1\n1 0 0 0 2 2 2 0 0 0 1\n1 0 0 0 2 2 2 0 0 0 1\n1 0 0 0 2 2 2 0 0 0 1\n1 0 0 0 0 0 0 0 0 0 1\n1 1 0 0 0 2 0 0 0 1 1\n0 1 1 0 0 2 0 0 1 1 0\n0 0 1 1 0 0 0 1 1 0 0\n0 0 0 1 1 1 1 1 0 0 0\n2\n5 5 3\n6 2 4", "1 1 1 1 1 1 1 1 1 1 1\n1 1 1 1 4 4 4 1 1 1 1\n1 1 1 4 4 4 4 4 1 1 1\n1 1 4 4 4 4 4 4 4 1 1\n1 4 4 4 3 3 3 4 4 4 1\n1 4 4 4 3 3 3 4 4 4 1\n1 4 4 4 3 3 3 4 4 4 1\n1 4 4 4 4 4 4 4 4 4 1\n1 1 4 4 4 2 4 4 4 1 1\n0 1 1 4 4 2 4 4 1 1 0\n0 0 1 1 4 4 4 1 1 0 0\n0 0 0 1 1 1 1 1 0 0 0"], ["4 4\n1 0 1 3\n1 3 2 2\n3 3 1 2\n2 2 1 3\n3\n1 2 3\n3 2 1\n4 2 3", "1 1 1 3\n1 1 2 2\n1 1 1 2\n3 3 1 3"], ["6 6\n1 2 1 2 2 2\n3 1 2 1 3 1\n3 3 2 3 2 2\n2 3 1 3 3 2\n3 3 3 3 3 3\n2 3 2 2 2 1\n4\n6 2 2\n3 5 2\n3 2 3\n1 2 3", "1 3 1 2 2 2\n3 1 3 1 3 1\n3 3 3 3 3 3\n3 3 1 3 3 3\n3 3 3 3 3 3\n3 3 3 3 3 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COI（克罗地亚）"], "title": "[COI 2020] Paint", "background": "", "description": "你一定用过画图软件的一键填充功能吧？如果拓展到像素层面中，如果一个大连通块内所有像素的颜色相同，那么将一个像素染色，那么整个连通块内的所有像素都会被染色。\n\n现在给定一个 $R\\times S$ 的像素图，给定 $Q$ 个染色操作：\n\n- 将 $(r_i,s_i)$ 染为颜色 $c_i$。\n\n求染色过后的整个像素图。", "inputFormat": "第一行两个整数 $R,S$ 代表像素图大小。          \n接下来 $R$ 行每行 $S$ 个整数，代表像素图的初始颜色。         \n第 $R+2$ 行一个整数 $Q$ 代表操作个数。         \n接下来 $Q$ 行每行三个整数 $r_i,s_i,c_i$ 代表一次染色操作。", "outputFormat": "$R$ 行每行 $S$ 个整数代表染色后的像素图。", "hint": "#### 样例 1 解释\n\n假设 $0$ 为白色，$1$ 为红色，$2$ 为蓝色，$3$ 为绿色，$4$ 为黄色，那么如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4hvovfq7.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le R \\times S \\le 10^4$，$1 \\le Q \\le 10^4$。\n- Subtask 2（9 pts）：$R=1$，$1 \\le S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n- Subtask 3（31 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$，颜色只有 $0$ 和 $1$。\n- Subtask 4（52 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le r_i \\le R$，$1 \\le s_i \\le S$，$0 \\le c_i \\le 10^5$，颜色区间为 $[0,10^5]$。\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 A Paint](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Paint", "background": "", "description": "你一定用过画图软件的一键填充功能吧？如果拓展到像素层面中，如果一个大连通块内所有像素的颜色相同，那么将一个像素染色，那么整个连通块内的所有像素都会被染色。\n\n现在给定一个 $R\\times S$ 的像素图，给定 $Q$ 个染色操作：\n\n- 将 $(r_i,s_i)$ 染为颜色 $c_i$。\n\n求染色过后的整个像素图。", "inputFormat": "第一行两个整数 $R,S$ 代表像素图大小。          \n接下来 $R$ 行每行 $S$ 个整数，代表像素图的初始颜色。         \n第 $R+2$ 行一个整数 $Q$ 代表操作个数。         \n接下来 $Q$ 行每行三个整数 $r_i,s_i,c_i$ 代表一次染色操作。", "outputFormat": "$R$ 行每行 $S$ 个整数代表染色后的像素图。", "hint": "#### 样例 1 解释\n\n假设 $0$ 为白色，$1$ 为红色，$2$ 为蓝色，$3$ 为绿色，$4$ 为黄色，那么如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4hvovfq7.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le R \\times S \\le 10^4$，$1 \\le Q \\le 10^4$。\n- Subtask 2（9 pts）：$R=1$，$1 \\le S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n- Subtask 3（31 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$，颜色只有 $0$ 和 $1$。\n- Subtask 4（52 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le r_i \\le R$，$1 \\le s_i \\le S$，$0 \\le c_i \\le 10^5$，颜色区间为 $[0,10^5]$。\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 A Paint](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8428", "type": "P", "difficulty": 6, "samples": [["4 2\n1 2\n2 3\n3 4\n1 4", "2\n1 3"], ["9 5\n1 2\n2 3\n3 4\n3 5\n1 6\n1 7\n7 8\n8 9\n2 5 6 7 9", "3\n1 4 9"], ["20 9\n1 2\n2 3\n2 4\n4 5\n4 6\n5 7\n7 8\n8 9\n7 10\n10 11\n6 12\n6 13\n6 17\n13 14\n14 15\n14 16\n17 18\n18 19\n18 20\n1 3 9 11 12 15 16 19 20", "3\n5 14 18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "Special Judge", "广度优先搜索 BFS", "树形 DP", "COI（克罗地亚）"], "title": "[COI 2020] Pastiri", "background": "", "description": "给定一棵 $N$ 点的树，点编号为 $1$ 到 $N$，现在在 $K$ 个点上有羊，你的任务是在树上分配一些牧羊人。\n\n这些牧羊人很懒，只会看管离他最近的羊。当然如果有多个离他最近的羊，那么他会都看管。\n\n当然，牧羊人可以和羊在同一个点上，但这样牧羊人只会看管这一个点上的那个羊。\n\n求一种牧羊人的分配方案使得牧羊人总数最小。", "inputFormat": "第一行两个整数 $N,K$ 代表树的点数和有羊的点数。         \n接下来 $N-1$ 行每行两个整数 $a_i,b_i$ 代表树的一条边。         \n第 $N+1$ 行 $K$ 个整数 $o_i$，代表有羊的点的编号。", "outputFormat": "第一行一个整数 $X$ 代表牧羊人总数的最小值。       \n第二行 $X$ 个整数代表每个牧羊人分配到哪个点上。         \n如果有多种解，输出一种即可。", "hint": "#### 样例 3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qwahnh8z.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 5 \\times 10^5$，任意一个点 $i$ 都与 $i+1$ 相连（$1 \\le i \\le N-1$）。\n- Subtask 2（18 pts）：$1 \\le K \\le 15$，$1 \\le N \\le 5 \\times 10^5$。\n- Subtask 3（23 pts）：$1 \\le N \\le 2000$。\n- Subtask 4（51 pts）：$1 \\le N \\le 5 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le N$，$1 \\le a_i,b_i \\le N$，$1 \\le  o_i \\le N$。\n\n**本题使用 Special Judge，checker 提供者 @[Lynkcat](https://www.luogu.com.cn/user/120911)，感谢他的贡献。**\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 B Pastiri](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Pastiri", "background": "", "description": "给定一棵 $N$ 点的树，点编号为 $1$ 到 $N$，现在在 $K$ 个点上有羊，你的任务是在树上分配一些牧羊人。\n\n这些牧羊人很懒，只会看管离他最近的羊。当然如果有多个离他最近的羊，那么他会都看管。\n\n当然，牧羊人可以和羊在同一个点上，但这样牧羊人只会看管这一个点上的那个羊。\n\n求一种牧羊人的分配方案使得牧羊人总数最小。", "inputFormat": "第一行两个整数 $N,K$ 代表树的点数和有羊的点数。         \n接下来 $N-1$ 行每行两个整数 $a_i,b_i$ 代表树的一条边。         \n第 $N+1$ 行 $K$ 个整数 $o_i$，代表有羊的点的编号。", "outputFormat": "第一行一个整数 $X$ 代表牧羊人总数的最小值。       \n第二行 $X$ 个整数代表每个牧羊人分配到哪个点上。         \n如果有多种解，输出一种即可。", "hint": "#### 样例 3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qwahnh8z.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 5 \\times 10^5$，任意一个点 $i$ 都与 $i+1$ 相连（$1 \\le i \\le N-1$）。\n- Subtask 2（18 pts）：$1 \\le K \\le 15$，$1 \\le N \\le 5 \\times 10^5$。\n- Subtask 3（23 pts）：$1 \\le N \\le 2000$。\n- Subtask 4（51 pts）：$1 \\le N \\le 5 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le N$，$1 \\le a_i,b_i \\le N$，$1 \\le  o_i \\le N$。\n\n**本题使用 Special Judge，checker 提供者 @[Lynkcat](https://www.luogu.com.cn/user/120911)，感谢他的贡献。**\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 B Pastiri](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8429", "type": "P", "difficulty": 5, "samples": [["1 2 1 5", "0\n0\n0\n1\n0\n2\n0\n0\n0\n0"], ["1 3 3 8", "0\n0\n0\n6\n0\n13\n0\n0\n0\n0"], ["1 4 2 4", "24\n0\n8\n0\n37\n0\n4\n28\n4\n24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "COI（克罗地亚）"], "title": "[COI 2020] Semafor", "background": "你可能非常熟悉七段 LED 显示器，它广泛地应用于各种数字设备内，比如计算器，手表，红绿灯等等。由于它的简单与美观，该设计已被全球接受，不过年轻的 Matej 反对这个设计，并设计出了\"五段 LED 显示器\"，声称可以更有效地获得与七段 LED 显示器相同的功能。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fuwevm3z.png)", "description": "Matej 的第一步就是将这项设计应用到足球业界中，他目前正在克罗地亚足球协会中做演讲，决定将他的设计用在换人板上。\n\n换人板由 $m$ 个五段 LED 显示器组成，换人板将显示一个数，这个数由换人板上的 $m$ 个数字组成，代表被换下的球员的号码。Matej 决定开始演示他的换人板操作。刚开始他的换人板上显示了数字 $x$。Matej 将做出下面两种操作的一种：\n\n* 将一段关闭的 LED 灯打开。\n* 将一段打开的 LED 灯关闭。\n\nMatej 总共会执行 $n$ 次操作，他需要保证每 $k$ 次操作他的换人板显示的是一个数（每个五段 LED 显示器上都显示了一个 $0$ ~ $ 9$ 内的数字）。\n\n执行完 $n$ 次操作后你会得到一个最终状态，对于每个最终状态是一个数的情况，Matej 想知道分别有多少种满足上述限制的不同的操作序列能达到这些最终状态。我们说两个操作序列不同，当且仅当这两个操作序列中第 $i$ 次操作时操作了不同的五段 LED 显示器并且在某此操作后两种操作序列产生的状态不同。", "inputFormat": "第一行四个整数 $m,n,k,x$，意义见题目描述。", "outputFormat": "共 $10^m$ 行。第 $i$ 行输出一个整数表示最终状态显示的数为 $i-1$ 时所有的操作序列的个数。答案对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释\n刚开始的时候换人板上显示 $5$。因为 $k=1$。所以每次操作后换人板上都必须显示的是一个数。Matej 将会进行 $n=2$ 次操作，因此最终他可以显示出 $3$ 或 $5$ 两个数。为了显示 $3$，我们只能先将 $5$变成 $9$ 然后再将 $9$ 变成 $3$。为了显示 $5$，我们即可以通过 $5-9-5$ 的方法实现也可以通过 $5-8-5$ 的方法实现，因此有两种操作序列。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n* Subtask 1（6 pts）：$m=1$，$1 \\leq n \\leq 12$。\n* Subtask 2（15 pts）：$m=1$，$1 \\leq n \\leq 10^{15}$。\n* Subtask 3（12 pts）：$m=2$，$1 \\leq n \\leq 1500$，$k=n$。\n* Subtask 4（12 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 15$。\n* Subtask 5（15 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 1500$。\n* Subtask 6（40 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$。\n\n对于 $100\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^{15} $，$0 \\leq x \\leq 10^m$。\n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 C Semafor](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Semafor", "background": "你可能非常熟悉七段 LED 显示器，它广泛地应用于各种数字设备内，比如计算器，手表，红绿灯等等。由于它的简单与美观，该设计已被全球接受，不过年轻的 Matej 反对这个设计，并设计出了\"五段 LED 显示器\"，声称可以更有效地获得与七段 LED 显示器相同的功能。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fuwevm3z.png)", "description": "Matej 的第一步就是将这项设计应用到足球业界中，他目前正在克罗地亚足球协会中做演讲，决定将他的设计用在换人板上。\n\n换人板由 $m$ 个五段 LED 显示器组成，换人板将显示一个数，这个数由换人板上的 $m$ 个数字组成，代表被换下的球员的号码。Matej 决定开始演示他的换人板操作。刚开始他的换人板上显示了数字 $x$。Matej 将做出下面两种操作的一种：\n\n* 将一段关闭的 LED 灯打开。\n* 将一段打开的 LED 灯关闭。\n\nMatej 总共会执行 $n$ 次操作，他需要保证每 $k$ 次操作他的换人板显示的是一个数（每个五段 LED 显示器上都显示了一个 $0$ ~ $ 9$ 内的数字）。\n\n执行完 $n$ 次操作后你会得到一个最终状态，对于每个最终状态是一个数的情况，Matej 想知道分别有多少种满足上述限制的不同的操作序列能达到这些最终状态。我们说两个操作序列不同，当且仅当这两个操作序列中第 $i$ 次操作时操作了不同的五段 LED 显示器并且在某此操作后两种操作序列产生的状态不同。", "inputFormat": "第一行四个整数 $m,n,k,x$，意义见题目描述。", "outputFormat": "共 $10^m$ 行。第 $i$ 行输出一个整数表示最终状态显示的数为 $i-1$ 时所有的操作序列的个数。答案对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释\n刚开始的时候换人板上显示 $5$。因为 $k=1$。所以每次操作后换人板上都必须显示的是一个数。Matej 将会进行 $n=2$ 次操作，因此最终他可以显示出 $3$ 或 $5$ 两个数。为了显示 $3$，我们只能先将 $5$变成 $9$ 然后再将 $9$ 变成 $3$。为了显示 $5$，我们即可以通过 $5-9-5$ 的方法实现也可以通过 $5-8-5$ 的方法实现，因此有两种操作序列。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n* Subtask 1（6 pts）：$m=1$，$1 \\leq n \\leq 12$。\n* Subtask 2（15 pts）：$m=1$，$1 \\leq n \\leq 10^{15}$。\n* Subtask 3（12 pts）：$m=2$，$1 \\leq n \\leq 1500$，$k=n$。\n* Subtask 4（12 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 15$。\n* Subtask 5（15 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 1500$。\n* Subtask 6（40 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$。\n\n对于 $100\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^{15} $，$0 \\leq x \\leq 10^m$。\n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 C Semafor](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8430", "type": "P", "difficulty": 4, "samples": [["6 9\n1\n0\n0\n1\n1", "? 1 6\n\n? 1 2\n\n? 2 4\n\n? 2 5\n\n? 3 4\n\n! ((())) "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "交互题", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2020] Zagrade", "background": "**本题为交互题**。\n\n众所周知，中央情报局的工作是收集，处理和分析国家安全信息。现在他们拥有了大量的计算机密码，并且正在开发一些相当复杂的工具，来破坏受密码保护的系统。\n\n现在，您的任务是破坏中央情报局服务器的安全性。自然，他们很清楚人们在输入密码的时候通常会输入什么东西，因此尝试输入 `123456` , `1q2w3e4r` 或 `Welcome` 肯定是没有用的。幸运的是，我们发现了某些可能对您有用的信息。", "description": "现在已知中央情报局服务器的主密码由 $n$ 个字符（$n$ 为偶数）构成，其中一半是左括号，一半是右括号。一些记性不好的服务器管理员会忘记这个主密码，所以服务器提供了找回密码的工具。管理员最多可以使用 $Q$ 次这个工具，每次使用时都会询问这个密码 $l$ 到 $r$ 位的括号串是否合法。\n\n对于一个括号串合法的定义：\n\n* `()` 是一个合法的括号串。\n* 若 `A` 是一个合法的括号串，那么 `(A)` 也是一个合法的括号串。\n* 若 `A` 与 `B` 都是合法的括号串，那么 `AB` 也是合法的括号串。\n\n现在你需要写出一个程序来模拟管理员找回密码的过程。\n\n在进行交互之前，您的程序应该从输入中读取偶数 $n$ 和整数 $Q$ ，这两个数字的含义见题目描述。\n\n之后，您的程序可以通过向**标准输出**输出来发送查询请求。每个查询必须在单独的行中打印，并采用 `? a b`，其中 $1 \\leq a \\leq b \\leq n$。每个查询之后，您的程序应**清空缓冲区**并从**标准输入**中读取答案。\n\n当你推理出密码时，请在**标准输出**中输出： `! x1 x2 x3 …… xn` 的形式，之后你的程序应**清空缓冲区**并正常终止程序运行。\n", "inputFormat": "第一行两个整数 $n,Q$。\n\n接下来若干行，每行对于每个查询给出答案。", "outputFormat": "若干行，表示查询。\n\n最后一行表示最后得出的答案。", "hint": "### 样例解释\n`? 1 6` 对应的是整个串，当然是合法的。  \n`? 1 2` 对应的是 `((` 不合法。  \n`? 2 4` 对应的是 `(()` 不合法。  \n`? 2 5` 对应的是 `(())` 合法。  \n`? 3 4` 对应的是 `()` 合法。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**\n\n* Subtask 1（14 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$，保证整个括号序列合法。 \n* Subtask 2（7 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$。 \n* Subtask 3（57 pts）：$1\\leq n\\leq 100000$，$Q=n-1$，保证整个括号序列合法。 \n* Subtask 4（12 pts）：$1\\leq n\\leq 100000$，$Q=n-1$。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100000$，$n-1\\leq Q$。 \n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 D Zagrade](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Zagrade", "background": "**本题为交互题**。\n\n众所周知，中央情报局的工作是收集，处理和分析国家安全信息。现在他们拥有了大量的计算机密码，并且正在开发一些相当复杂的工具，来破坏受密码保护的系统。\n\n现在，您的任务是破坏中央情报局服务器的安全性。自然，他们很清楚人们在输入密码的时候通常会输入什么东西，因此尝试输入 `123456` , `1q2w3e4r` 或 `Welcome` 肯定是没有用的。幸运的是，我们发现了某些可能对您有用的信息。", "description": "现在已知中央情报局服务器的主密码由 $n$ 个字符（$n$ 为偶数）构成，其中一半是左括号，一半是右括号。一些记性不好的服务器管理员会忘记这个主密码，所以服务器提供了找回密码的工具。管理员最多可以使用 $Q$ 次这个工具，每次使用时都会询问这个密码 $l$ 到 $r$ 位的括号串是否合法。\n\n对于一个括号串合法的定义：\n\n* `()` 是一个合法的括号串。\n* 若 `A` 是一个合法的括号串，那么 `(A)` 也是一个合法的括号串。\n* 若 `A` 与 `B` 都是合法的括号串，那么 `AB` 也是合法的括号串。\n\n现在你需要写出一个程序来模拟管理员找回密码的过程。\n\n在进行交互之前，您的程序应该从输入中读取偶数 $n$ 和整数 $Q$ ，这两个数字的含义见题目描述。\n\n之后，您的程序可以通过向**标准输出**输出来发送查询请求。每个查询必须在单独的行中打印，并采用 `? a b`，其中 $1 \\leq a \\leq b \\leq n$。每个查询之后，您的程序应**清空缓冲区**并从**标准输入**中读取答案。\n\n当你推理出密码时，请在**标准输出**中输出： `! x1 x2 x3 …… xn` 的形式，之后你的程序应**清空缓冲区**并正常终止程序运行。\n", "inputFormat": "第一行两个整数 $n,Q$。\n\n接下来若干行，每行对于每个查询给出答案。", "outputFormat": "若干行，表示查询。\n\n最后一行表示最后得出的答案。", "hint": "### 样例解释\n`? 1 6` 对应的是整个串，当然是合法的。  \n`? 1 2` 对应的是 `((` 不合法。  \n`? 2 4` 对应的是 `(()` 不合法。  \n`? 2 5` 对应的是 `(())` 合法。  \n`? 3 4` 对应的是 `()` 合法。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**\n\n* Subtask 1（14 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$，保证整个括号序列合法。 \n* Subtask 2（7 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$。 \n* Subtask 3（57 pts）：$1\\leq n\\leq 100000$，$Q=n-1$，保证整个括号序列合法。 \n* Subtask 4（12 pts）：$1\\leq n\\leq 100000$，$Q=n-1$。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100000$，$n-1\\leq Q$。 \n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 D Zagrade](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8431", "type": "P", "difficulty": 4, "samples": [["3\n12\n991\n114514", "11\n298\n100001"], ["2\n99999\n99998", "100000\n99998"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "二分", "洛谷原创", "O2优化", "枚举"], "title": "「WHOI-2」彗星蜜月", "background": "![](bilibili:BV11x411Q7PY)\n\n看完这首 mv 的前奏之后你应该知道 $f$ 是什么鬼了（误）。", "description": "定义 $f(x)$ 是 $x$ 的各位数码翻转以后形成的数。\n\n例如：\n\n- $f(12323)=32321$\n- $f(114514)=415411$\n- $f(250)=52$\n---\n\n给定一个 $n$。求最大的 $k$，使得对于所有处于 $[1,k]$ 区间中的正整数 $m$，有 $f(m)\\leq n$。", "inputFormat": "**本题多测**\n\n第一行一个正整数 $T$ 表示测试点数目。\n\n接下来每个测试点一个正整数 $n$。", "outputFormat": "$T$ 行，对应每个测试点的答案。", "hint": "对于测试样例 $1$：\n$f(1)=1,f(2)=2,f(3)=3,f(4)=4,f(5)=5,f(6)=6,f(7)=7,f(8)=8,f(9)=9,f(10)=1,f(11)=11,f(12)=21$。所以 $k$ 最大为 $11$。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(10pts)}:1\\leq T,n\\leq10^3$。\n- $\\text{subtask2(30pts)}:1\\leq n\\leq10^6$。\n- $\\text{subtask3(40pts)}:1\\leq n\\leq10^9$。\n- $\\text{subtask4(20pts)}:$ 无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq10^5,1\\leq n\\leq10^{18}$。\n\n提示：`unsigned long long` 可以储存 $0$ 到 $18,446,744,073,709,551,615(2^{64}-1)$ 的自然数。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」彗星蜜月", "background": "![](bilibili:BV11x411Q7PY)\n\n看完这首 mv 的前奏之后你应该知道 $f$ 是什么鬼了（误）。", "description": "定义 $f(x)$ 是 $x$ 的各位数码翻转以后形成的数。\n\n例如：\n\n- $f(12323)=32321$\n- $f(114514)=415411$\n- $f(250)=52$\n---\n\n给定一个 $n$。求最大的 $k$，使得对于所有处于 $[1,k]$ 区间中的正整数 $m$，有 $f(m)\\leq n$。", "inputFormat": "**本题多测**\n\n第一行一个正整数 $T$ 表示测试点数目。\n\n接下来每个测试点一个正整数 $n$。", "outputFormat": "$T$ 行，对应每个测试点的答案。", "hint": "对于测试样例 $1$：\n$f(1)=1,f(2)=2,f(3)=3,f(4)=4,f(5)=5,f(6)=6,f(7)=7,f(8)=8,f(9)=9,f(10)=1,f(11)=11,f(12)=21$。所以 $k$ 最大为 $11$。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(10pts)}:1\\leq T,n\\leq10^3$。\n- $\\text{subtask2(30pts)}:1\\leq n\\leq10^6$。\n- $\\text{subtask3(40pts)}:1\\leq n\\leq10^9$。\n- $\\text{subtask4(20pts)}:$ 无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq10^5,1\\leq n\\leq10^{18}$。\n\n提示：`unsigned long long` 可以储存 $0$ 到 $18,446,744,073,709,551,615(2^{64}-1)$ 的自然数。 ", "locale": "zh-CN"}}}
{"pid": "P8432", "type": "P", "difficulty": 4, "samples": [["3\n2 2\n1145 1419\n19198 12321", "2\n66937457\n949924930"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "洛谷原创", "O2优化"], "title": "「WHOI-2」ぽかぽかの星", "background": "![](bilibili:BV16J411x7nS)\n\n你在雪洞里喝着热可可数星星。但这次，星星换成了数列，不过聪明的你一定能数清楚数列的吧。", "description": "有多少个长度为 $n$ 的**正整数**数列 $a_i$ 满足：\n\n- $0<a_1\\leq a_2\\leq a_3\\dots \\leq a_n\\leq k$。\n- $\\forall i\\not = j,a_i+a_j\\not = k+1$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题多测**\n\n第一行一个正整数表示 $T$。\n\n接下来 $T$ 行，每行两个正整数表示 $n,k$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "**本题采用捆绑测试**\n\n- $\\text{subtask1(20pts)}:T=5,1\\leq n,k\\le5$。\n- $\\text{subtask2(80pts)}:$ 无特殊限制。\n\n\n对于 $100\\%$ 的数据，$T\\leq100,1\\le n,k\\le 5\\times 10^6,1\\leq  \\sum n,  \\sum  k\\le6\\times 10^7$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」ぽかぽかの星", "background": "![](bilibili:BV16J411x7nS)\n\n你在雪洞里喝着热可可数星星。但这次，星星换成了数列，不过聪明的你一定能数清楚数列的吧。", "description": "有多少个长度为 $n$ 的**正整数**数列 $a_i$ 满足：\n\n- $0<a_1\\leq a_2\\leq a_3\\dots \\leq a_n\\leq k$。\n- $\\forall i\\not = j,a_i+a_j\\not = k+1$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题多测**\n\n第一行一个正整数表示 $T$。\n\n接下来 $T$ 行，每行两个正整数表示 $n,k$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "**本题采用捆绑测试**\n\n- $\\text{subtask1(20pts)}:T=5,1\\leq n,k\\le5$。\n- $\\text{subtask2(80pts)}:$ 无特殊限制。\n\n\n对于 $100\\%$ 的数据，$T\\leq100,1\\le n,k\\le 5\\times 10^6,1\\leq  \\sum n,  \\sum  k\\le6\\times 10^7$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8433", "type": "P", "difficulty": 5, "samples": [["??", "1296"], ["?a?", "1297"], ["a?bc??", "46730"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化"], "title": "「WHOI-2」Regex", "background": " _JP 版は下記のリンクをクリックしてダウンロードしてください。_ \n\n正则表达式是文本处理的一个有用的工具。\n\n3022 年，你看到了你以前写过的一个 Python 程序，用来某插画交流网站上面下载图片。\n\n你很感兴趣，决定试着运行一下。结果因为年代久远，里面的正则表达式损坏了。你得恢复这个正则表达式。\n\n然而损坏的程度有点严重……", "description": "在这里我们只考虑正则表达式的一个子集。\n\n- **单字符**，即单独的—个字符，必须为小写字母或数字。\n\n- **单元表达式**，指的是形如 `<x>-<y>` 的三个字符组成的字符串。其中的 `<x>` 和 `<y>` 为单字符。注意：`<x>` 和 `<y>` 必须**类型相同**，即均为数字或均为小写字母。并且 `<x>` 的 ASCII 码值必须**严格小于** `<y>`。比如 `3-5`、`a-d` 是合法的，而 `7-b`、`z-3`、`8-2` 是不合法的。\n\n- **表达式**，指的是用**中括号**括起来的**一个或多个**单元表达式或单字符，比如 `[1-2]`、`[0-9a-f]`、\n`[a-chg-k]`。在这里中括号**不允许嵌套**。在右括号后面可以有星号 `*` 或加号 `+` 修饰（两者最多只能有一个，**不能同时出现**）。比如 `[3-5]*`、`[pixi-v]+`。\n\n- 一个合法的正则表达式由**一个或多个**表达式或单字符组成。比如 `0x[0-9af]*`、`1[3-7]2345`、`0[7-9]*1`。\n\n\n现在你知道这个残缺的正则表达式，其中残缺的字符用问号 `?` 表示。\n\n你需要计算出原来的正则表达式有多少种可能。\n答案可能过大，对 $1000000007$ 取模即可。\n\n", "inputFormat": "一行一个字符串，表示残缺的正则表达式。", "outputFormat": "一行一个整数，表示所求方案数取模后的结果。", "hint": "- 样例 #1： 两个问号可以任意填数字和字母，总方案数为 $36 \\times 36 = 1296$；\n- 样例 #2：除了数字字母，还可以填括号形成 `[a]`，总方案数为 $1297$；\n- 样例 #3：验题人没有给出解释。\n\n| 测试点编号 | 字符串长度范围 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $\\leq 5$ | 20 |\n| 2 | $\\leq 7$ | 20 |\n| 3 | $\\leq 100$ | 20 |\n| 4 | $\\leq 1000$  | 20 |\n| 5 | $\\leq 5000$  | 20 |\n| 6 | $\\leq 10^5$ | 0 |\n| 7 | $\\leq 5 \\times 10^5$ | 0 |\n| 8 | $\\leq 10^6$ | 0 |\n| 9 | $\\leq 5 \\times 10^6$ | 0 |\n| 10 | $\\leq 10^7$ | 0 |\n\n字符串中只会出现**小写字母、数字、问号**中的一种或几种。\n\n- **提示**：本题存在 $O(kn)$ 的解法，其中 $k$ 为常数。\n\n使用 $O(n^2)$ 的做法可以在本题得到 $100$ 分，但是会由于后五个测试点无法通过而显示为 Unaccepted。可能需要注意常数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」Regex", "background": " _JP 版は下記のリンクをクリックしてダウンロードしてください。_ \n\n正则表达式是文本处理的一个有用的工具。\n\n3022 年，你看到了你以前写过的一个 Python 程序，用来某插画交流网站上面下载图片。\n\n你很感兴趣，决定试着运行一下。结果因为年代久远，里面的正则表达式损坏了。你得恢复这个正则表达式。\n\n然而损坏的程度有点严重……", "description": "在这里我们只考虑正则表达式的一个子集。\n\n- **单字符**，即单独的—个字符，必须为小写字母或数字。\n\n- **单元表达式**，指的是形如 `<x>-<y>` 的三个字符组成的字符串。其中的 `<x>` 和 `<y>` 为单字符。注意：`<x>` 和 `<y>` 必须**类型相同**，即均为数字或均为小写字母。并且 `<x>` 的 ASCII 码值必须**严格小于** `<y>`。比如 `3-5`、`a-d` 是合法的，而 `7-b`、`z-3`、`8-2` 是不合法的。\n\n- **表达式**，指的是用**中括号**括起来的**一个或多个**单元表达式或单字符，比如 `[1-2]`、`[0-9a-f]`、\n`[a-chg-k]`。在这里中括号**不允许嵌套**。在右括号后面可以有星号 `*` 或加号 `+` 修饰（两者最多只能有一个，**不能同时出现**）。比如 `[3-5]*`、`[pixi-v]+`。\n\n- 一个合法的正则表达式由**一个或多个**表达式或单字符组成。比如 `0x[0-9af]*`、`1[3-7]2345`、`0[7-9]*1`。\n\n\n现在你知道这个残缺的正则表达式，其中残缺的字符用问号 `?` 表示。\n\n你需要计算出原来的正则表达式有多少种可能。\n答案可能过大，对 $1000000007$ 取模即可。\n\n", "inputFormat": "一行一个字符串，表示残缺的正则表达式。", "outputFormat": "一行一个整数，表示所求方案数取模后的结果。", "hint": "- 样例 #1： 两个问号可以任意填数字和字母，总方案数为 $36 \\times 36 = 1296$；\n- 样例 #2：除了数字字母，还可以填括号形成 `[a]`，总方案数为 $1297$；\n- 样例 #3：验题人没有给出解释。\n\n| 测试点编号 | 字符串长度范围 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $\\leq 5$ | 20 |\n| 2 | $\\leq 7$ | 20 |\n| 3 | $\\leq 100$ | 20 |\n| 4 | $\\leq 1000$  | 20 |\n| 5 | $\\leq 5000$  | 20 |\n| 6 | $\\leq 10^5$ | 0 |\n| 7 | $\\leq 5 \\times 10^5$ | 0 |\n| 8 | $\\leq 10^6$ | 0 |\n| 9 | $\\leq 5 \\times 10^6$ | 0 |\n| 10 | $\\leq 10^7$ | 0 |\n\n字符串中只会出现**小写字母、数字、问号**中的一种或几种。\n\n- **提示**：本题存在 $O(kn)$ 的解法，其中 $k$ 为常数。\n\n使用 $O(n^2)$ 的做法可以在本题得到 $100$ 分，但是会由于后五个测试点无法通过而显示为 Unaccepted。可能需要注意常数。", "locale": "zh-CN"}}}
{"pid": "P8434", "type": "P", "difficulty": 6, "samples": [["10\n1 2 3 4 5 5 4 3 2 1", "2"], ["9\n1 2 2 1 1 1 2 2 1", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "数学", "二分", "洛谷原创", "O2优化", "位运算", "双指针 two-pointer"], "title": "「WHOI-2」D&D", "background": "有没有发现少了什么？\n\n我们的 miku 决定出门逛街了。但是好巧不巧的就是她家里的装饰物少的可怜，并且只有一些数字可以作为装饰。\n\n但是 miku 发现如果有若干个装饰物组成的数集 $A$，那么 $A$ 的子集 $f(A)$ 是最好看的（尽管不知道为什么）。所以就有了这道题。\n\n但是因为看到了标题，所以聪明的你应该知道 miku 要去哪里了（误）。", "description": "给定**不重**集合 $A$，定义其 _装饰子集_ \n\n$$f(A)=\\{a\\in A|\\forall b\\in A-\\{a\\},a|b\\not= b \\}$$\n\n这里的 $\\texttt{“|”}$ 表示按位或；这里 $b\\in A-\\{a\\}$ 表示 $b\\in A$ 且 $b\\not=a$。\n\nmiku 有一个长度为 $n$ 的正整数序列 $a_i$。你要给这个序列连续地划分为若干个（至少一个）连续子串。要求这些连续子串元素所组成的**不重集合**的 _装饰子集_ 相同。\n\n求方案数对 $10^9+7$ 取模。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来长度为 $n$ 的正整数序列表示 $a_i$。", "outputFormat": "一行一个正整数表示答案。", "hint": "**【样例#1解释】** 可以证明，两种方法分别是：\n$$[1,2,3,4,5,5,4,3,2,1]$$\n$$[1,2,3,4,5],[5,4,3,2,1]$$\n\n这里三个子集所组成的不重集合都是 $\\{1,2,3,4,5\\}$。它们的装饰子集都是 $\\{3,5\\}$。具体说明如下：\n\n- $1:1|3=3$，故不属于。\n- $2:2|3=3$，故不属于。\n- $3:3|1=3,3|2=3,3|4=7,3|5=7$，故属于。\n- $4:4|5=5$，故不属于。\n- $5:5|1=5,5|2=7,5|3=7,5|4=5$，故属于。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(5pts)}:n\\leq10$。\n- $\\text{subtask2(10pts)}:a_i\\leq7$。\n- $\\text{subtask3(20pts)}:a_i=2^a+2^b$。其中 $a\\not = b$。\n- $\\text{subtask4(20pts)}:a_i=2^a+2^b$。其中不保证 $a\\not =b$。\n- $\\text{subtask5(10pts)}:$ 保证 $a_i$ 随机生成。\n- $\\text{subtask6(35pts)}:$ 无特殊限制。时限为 $3s$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 3\\times10^6,0\\leq a_i\\leq2\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」D&D", "background": "有没有发现少了什么？\n\n我们的 miku 决定出门逛街了。但是好巧不巧的就是她家里的装饰物少的可怜，并且只有一些数字可以作为装饰。\n\n但是 miku 发现如果有若干个装饰物组成的数集 $A$，那么 $A$ 的子集 $f(A)$ 是最好看的（尽管不知道为什么）。所以就有了这道题。\n\n但是因为看到了标题，所以聪明的你应该知道 miku 要去哪里了（误）。", "description": "给定**不重**集合 $A$，定义其 _装饰子集_ \n\n$$f(A)=\\{a\\in A|\\forall b\\in A-\\{a\\},a|b\\not= b \\}$$\n\n这里的 $\\texttt{“|”}$ 表示按位或；这里 $b\\in A-\\{a\\}$ 表示 $b\\in A$ 且 $b\\not=a$。\n\nmiku 有一个长度为 $n$ 的正整数序列 $a_i$。你要给这个序列连续地划分为若干个（至少一个）连续子串。要求这些连续子串元素所组成的**不重集合**的 _装饰子集_ 相同。\n\n求方案数对 $10^9+7$ 取模。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来长度为 $n$ 的正整数序列表示 $a_i$。", "outputFormat": "一行一个正整数表示答案。", "hint": "**【样例#1解释】** 可以证明，两种方法分别是：\n$$[1,2,3,4,5,5,4,3,2,1]$$\n$$[1,2,3,4,5],[5,4,3,2,1]$$\n\n这里三个子集所组成的不重集合都是 $\\{1,2,3,4,5\\}$。它们的装饰子集都是 $\\{3,5\\}$。具体说明如下：\n\n- $1:1|3=3$，故不属于。\n- $2:2|3=3$，故不属于。\n- $3:3|1=3,3|2=3,3|4=7,3|5=7$，故属于。\n- $4:4|5=5$，故不属于。\n- $5:5|1=5,5|2=7,5|3=7,5|4=5$，故属于。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(5pts)}:n\\leq10$。\n- $\\text{subtask2(10pts)}:a_i\\leq7$。\n- $\\text{subtask3(20pts)}:a_i=2^a+2^b$。其中 $a\\not = b$。\n- $\\text{subtask4(20pts)}:a_i=2^a+2^b$。其中不保证 $a\\not =b$。\n- $\\text{subtask5(10pts)}:$ 保证 $a_i$ 随机生成。\n- $\\text{subtask6(35pts)}:$ 无特殊限制。时限为 $3s$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 3\\times10^6,0\\leq a_i\\leq2\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8435", "type": "P", "difficulty": 4, "samples": [["5 8\n1 3\n2 4\n4 3\n1 2\n4 5\n5 1\n2 4\n1 1", "1\n5 1 2 3 4 5"], ["5 3\n1 2\n2 3\n1 3", "3\n1 4\n1 5\n3 1 2 3"], ["6 5\n1 3\n2 4\n1 2\n4 6\n2 3", "4\n2 6 4\n2 4 2\n3 3 2 1\n1 5"], ["7 8\n1 3\n2 4\n3 5\n2 5\n6 4\n2 5\n6 3\n2 7", "3\n2 7 2\n5 5 2 4 6 3\n2 3 1"], ["1 1\n1 1", "1\n1 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 5000, 5000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["图论", "Special Judge", "连通块", "Tarjan", "双连通分量", "模板题"], "title": "【模板】点双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其点双连通分量的个数，并且输出每个点双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。", "outputFormat": "第一行一个整数 $x$ 表示点双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个点双连通分量。\n\n你可以以任意顺序输出点双连通分量与点双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/huvwgbuo.png)\n\n相同颜色的点为同一个分量里的结点。\n\n**温馨提示：请认真考虑孤立点与自环（样例五）的情况。**\n\n------------\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n------------\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据出了问题，已修改。\n- $2025/10/29$ [追加了一组 hack 数据](/ticket/VCUU554769)。\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】点双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其点双连通分量的个数，并且输出每个点双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。", "outputFormat": "第一行一个整数 $x$ 表示点双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个点双连通分量。\n\n你可以以任意顺序输出点双连通分量与点双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/huvwgbuo.png)\n\n相同颜色的点为同一个分量里的结点。\n\n**温馨提示：请认真考虑孤立点与自环（样例五）的情况。**\n\n------------\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n------------\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据出了问题，已修改。\n- $2025/10/29$ [追加了一组 hack 数据](/ticket/VCUU554769)。\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN"}}}
{"pid": "P8436", "type": "P", "difficulty": 4, "samples": [["5 8\n1 3\n2 4\n4 3\n1 2\n4 5\n5 1\n2 4\n1 1", "1\n5 1 5 4 2 3"], ["5 3\n1 2\n2 3\n1 3", "3\n3 1 3 2\n1 4\n1 5"], ["6 5\n1 3\n2 4\n1 2\n4 6\n2 3", "4\n3 1 2 3\n1 4\n1 5\n1 6"], ["7 8\n1 3\n2 4\n3 5\n2 5\n6 4\n2 5\n6 3\n2 7", "3\n1 1\n5 2 5 3 6 4\n1 7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 5000, 5000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "Special Judge", "连通块", "Tarjan", "双连通分量", "模板题"], "title": "【模板】边双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其边双连通分量的个数，并且输出每个边双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。\n\n**不保证图为简单图，图中可能有重边和自环。**", "outputFormat": "第一行一个整数 $x$ 表示边双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个边双连通分量。\n\n你可以以任意顺序输出边双连通分量与边双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bzdfzeq.png)\n\n相同颜色的点为同一个连通分量。\n\n\n------------\n\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据数据出了问题，已修改。\n------------\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】边双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其边双连通分量的个数，并且输出每个边双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。\n\n**不保证图为简单图，图中可能有重边和自环。**", "outputFormat": "第一行一个整数 $x$ 表示边双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个边双连通分量。\n\n你可以以任意顺序输出边双连通分量与边双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bzdfzeq.png)\n\n相同颜色的点为同一个连通分量。\n\n\n------------\n\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据数据出了问题，已修改。\n------------\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN"}}}
