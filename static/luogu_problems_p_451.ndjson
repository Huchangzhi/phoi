{"pid": "P10147", "type": "P", "difficulty": 7, "samples": [["8 3\n1\n2\n3\n3\n3\n4\n4\n0\n0\n0\n0\n7\n5\n7\n5\n7 5 8\n1 2 8\n8 2 8", "7 7 28\n7 7 14\n5 7 26"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] 56TP", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/70a1t3pn.png)", "description": "给包含 $n$ 个顶点的有根树，每个顶点 $i$ 在时刻 $t$ 有权重 $v(t,i)$。\n\n对每个顶点给出 $v(0,i)$，保证对非叶节点 $i$ 有 $v(0,i)=0$，对叶子 $i$ 有 $0\\le v(0,i)\\le n$。\n\n共 $m$ 次询问，每次询问给出 $x,y,t$，问 $x$ 到 $y$ 路径上在时刻 $t$ 的权重的最小值、最大值、和。\n\n对叶子 $i$，有 $v(t,i)=v(0,i)$；\n\n对非叶节点 $i$，$t>0$，$v(t,i)$ 是 $i$ 的每个孩子 $j$ 的 $v(t-1,j)$ 的最大值。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n-1$ 行每行一个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 表示节点 $i$ 的父亲，根为 $1$。\n\n接下来 $n$ 行每行一个整数依次表示 $v(0,1),v(0,2),\\dots,v(0,n)$。\n\n接下来 $m$ 行，每行三个整数表示 $x,y,t$。", "outputFormat": "输出 $m$ 行，共 $m$ 个整数表示每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足  $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$0\\le v(0,i)\\le n$，$1\\le x,y,t\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] 56TP", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/70a1t3pn.png)", "description": "给包含 $n$ 个顶点的有根树，每个顶点 $i$ 在时刻 $t$ 有权重 $v(t,i)$。\n\n对每个顶点给出 $v(0,i)$，保证对非叶节点 $i$ 有 $v(0,i)=0$，对叶子 $i$ 有 $0\\le v(0,i)\\le n$。\n\n共 $m$ 次询问，每次询问给出 $x,y,t$，问 $x$ 到 $y$ 路径上在时刻 $t$ 的权重的最小值、最大值、和。\n\n对叶子 $i$，有 $v(t,i)=v(0,i)$；\n\n对非叶节点 $i$，$t>0$，$v(t,i)$ 是 $i$ 的每个孩子 $j$ 的 $v(t-1,j)$ 的最大值。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n-1$ 行每行一个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 表示节点 $i$ 的父亲，根为 $1$。\n\n接下来 $n$ 行每行一个整数依次表示 $v(0,1),v(0,2),\\dots,v(0,n)$。\n\n接下来 $m$ 行，每行三个整数表示 $x,y,t$。", "outputFormat": "输出 $m$ 行，共 $m$ 个整数表示每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足  $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$0\\le v(0,i)\\le n$，$1\\le x,y,t\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10148", "type": "P", "difficulty": 7, "samples": [["10 5 4\n1 9 10 7\n1 7 10 9\n2 3 10\n1 10 10 1\n2 5 10\n2 5\n1 1\n3 4\n1 3", "64\n0\n0\n36"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "分块", "扫描线", "Ynoi"], "title": "[Ynoi1999] M47升级型“钢铁阿诺”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/eb7fil05.png)", "description": "给定一个长度 $n$ 的整数序列 $a_1,\\dots,a_n$ ；\n\n给定一个由 $m$ 次操作构成的操作序列，操作从 $1$ 开始编号，到 $m$ 结束。操作序列中包含修改操作和求和操作，修改操作给定 $l,r,v$ ，将 $a_l,a_{l+1},\\dots,a_r$ 修改为 $v$ ，求和操作给定 $l,r$ ，查询 $\\sum\\limits_{i=l}^r a_i$；\n\n共 $q$ 次查询，每次查询给出 $L,R$ ，询问将序列 $a$ 初始化为 $0$ 后，依次进行操作序列中的第 $L,L+1,\\dots,R$ 次操作，每次求和操作的答案之和。", "inputFormat": "第一行三个整数 $n,m,q$ ；\n\n接下来 $m$ 行，每行 $1,l,r,v$ 或 $2,l,r$ 表示一次操作；\n\n接下来 $q$ 行，每行两个整数 $L,R$ 表示一次查询。", "outputFormat": "共 $q$ 行，每行一个整数，依次表示每次查询的答案。", "hint": "Idea：Ynoi，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对所有数据，满足 $1\\le l\\le r\\le n$，$1\\le v\\le n$，$1\\le L\\le R\\le m$，$1\\le n,m,q\\le 5\\times 10^5$。\n\n对 $10\\%$ 的数据，$n,m,q\\le 10^2$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 5\\times 10^3$。\n\n对另外 $10\\%$ 的数据，每次操作都是求和操作。\n\n对另外 $20\\%$ 的数据，每次查询满足 $L=1$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 2\\times 10^5$。\n\n对于其余数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] M47升级型“钢铁阿诺”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/eb7fil05.png)", "description": "给定一个长度 $n$ 的整数序列 $a_1,\\dots,a_n$ ；\n\n给定一个由 $m$ 次操作构成的操作序列，操作从 $1$ 开始编号，到 $m$ 结束。操作序列中包含修改操作和求和操作，修改操作给定 $l,r,v$ ，将 $a_l,a_{l+1},\\dots,a_r$ 修改为 $v$ ，求和操作给定 $l,r$ ，查询 $\\sum\\limits_{i=l}^r a_i$；\n\n共 $q$ 次查询，每次查询给出 $L,R$ ，询问将序列 $a$ 初始化为 $0$ 后，依次进行操作序列中的第 $L,L+1,\\dots,R$ 次操作，每次求和操作的答案之和。", "inputFormat": "第一行三个整数 $n,m,q$ ；\n\n接下来 $m$ 行，每行 $1,l,r,v$ 或 $2,l,r$ 表示一次操作；\n\n接下来 $q$ 行，每行两个整数 $L,R$ 表示一次查询。", "outputFormat": "共 $q$ 行，每行一个整数，依次表示每次查询的答案。", "hint": "Idea：Ynoi，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对所有数据，满足 $1\\le l\\le r\\le n$，$1\\le v\\le n$，$1\\le L\\le R\\le m$，$1\\le n,m,q\\le 5\\times 10^5$。\n\n对 $10\\%$ 的数据，$n,m,q\\le 10^2$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 5\\times 10^3$。\n\n对另外 $10\\%$ 的数据，每次操作都是求和操作。\n\n对另外 $20\\%$ 的数据，每次查询满足 $L=1$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 2\\times 10^5$。\n\n对于其余数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10149", "type": "P", "difficulty": 6, "samples": [["10 5\n9 8 5 4 5 1 5 1 5 8\n2 8\n4 9\n7 9\n6 7\n2 3", "4\n4\n1\n0\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] XM66F", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/f05zotfr.png)", "description": "给定序列 $a_1,\\dots,a_n$ ，$m$ 次询问，每次询问给出 $l,r$ ，问有多少组 $(i,j,k)$ 满足 $l\\le i<j<k\\le r,\\;a_i=a_k>a_j$ 。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行两个整数 $l,r$ 表示一个询问。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每个询问的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l\\le r\\le n$，$n,m\\le 5\\times 10^5$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] XM66F", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/f05zotfr.png)", "description": "给定序列 $a_1,\\dots,a_n$ ，$m$ 次询问，每次询问给出 $l,r$ ，问有多少组 $(i,j,k)$ 满足 $l\\le i<j<k\\le r,\\;a_i=a_k>a_j$ 。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行两个整数 $l,r$ 表示一个询问。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每个询问的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l\\le r\\le n$，$n,m\\le 5\\times 10^5$。\n\n", "locale": "zh-CN"}}}
{"pid": "P10150", "type": "P", "difficulty": 7, "samples": [["6 5\n4 2 5 5 4 4\n2\n5\n5\n3\n6", "1\n1\n1\n2\n0"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] TS-54", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kgov9x9z.png)", "description": "给定整数序列 $a_1,\\dots,a_n$ ，满足不存在 $1\\le i<j<k<l\\le n$ 使得 $a_i=a_j=a_k=a_l$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少个不同的 $k$ ，满足存在 $1\\le i\\le x<j\\le n$ 使得 $a_i=a_j=k$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足所有数值为整数，$1\\le a_i\\le n$，$1\\le x\\le n$，$n,m\\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] TS-54", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kgov9x9z.png)", "description": "给定整数序列 $a_1,\\dots,a_n$ ，满足不存在 $1\\le i<j<k<l\\le n$ 使得 $a_i=a_j=a_k=a_l$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少个不同的 $k$ ，满足存在 $1\\le i\\le x<j\\le n$ 使得 $a_i=a_j=k$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足所有数值为整数，$1\\le a_i\\le n$，$1\\le x\\le n$，$n,m\\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10151", "type": "P", "difficulty": 7, "samples": [["8 10\n1 4 7 3 8 2 4 7\n5 4 8 7 1 6 3 2\n2 6 6 2\n2 8 8 7\n1 4 3\n2 6 8 3\n2 4 4 3\n2 4 4 3\n2 6 8 4\n2 5 6 2\n2 1 8 1\n2 1 1 6", "1\n1\n0\n1\n1\n3\n2\n1\n0"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] SMV CC-64“蝰蛇”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/h5yq3zo2.png)", "description": "给序列 $a_1,\\dots,a_n$ 和排列 $b_1,\\dots,b_n$，共有 $m$ 次操作：\n\n修改操作：给定 $x,y$，将 $a_x$ 改为 $y$；\n\n查询操作：给定 $l,r,x$，查区间 $[l,r]$ 内最长的子区间 $[l',r']$（即满足 $l\\le l'\\le r'\\le r$），使得对 $l'\\le i<r'$ 有 $a_{i+1}=b_{a_i}$，且存在 $l'\\le i\\le r'$ 使得 $a_i=x$。需要输出满足条件的 $r'-l'+1$ 的最大值，若不存在则输出 $0$。\n", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数依次表示 $b_1,\\dots,b_n$；\n\n接下来 $m$ 行，每行 $1,x,y$ 或 $2,l,r,x$ 表示进行一次修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，表示相应的答案。", "hint": "Idea：s_r_f，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 10^6$；\n\n$1\\le a_i\\le n$；\n\n$1\\le b_i\\le n$，$b_i$ 互不相同；\n\n对修改操作，满足 $1\\le x,y\\le n$；\n\n对查询操作，满足 $1\\le l\\le r\\le n$，$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] SMV CC-64“蝰蛇”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/h5yq3zo2.png)", "description": "给序列 $a_1,\\dots,a_n$ 和排列 $b_1,\\dots,b_n$，共有 $m$ 次操作：\n\n修改操作：给定 $x,y$，将 $a_x$ 改为 $y$；\n\n查询操作：给定 $l,r,x$，查区间 $[l,r]$ 内最长的子区间 $[l',r']$（即满足 $l\\le l'\\le r'\\le r$），使得对 $l'\\le i<r'$ 有 $a_{i+1}=b_{a_i}$，且存在 $l'\\le i\\le r'$ 使得 $a_i=x$。需要输出满足条件的 $r'-l'+1$ 的最大值，若不存在则输出 $0$。\n", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数依次表示 $b_1,\\dots,b_n$；\n\n接下来 $m$ 行，每行 $1,x,y$ 或 $2,l,r,x$ 表示进行一次修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，表示相应的答案。", "hint": "Idea：s_r_f，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 10^6$；\n\n$1\\le a_i\\le n$；\n\n$1\\le b_i\\le n$，$b_i$ 互不相同；\n\n对修改操作，满足 $1\\le x,y\\le n$；\n\n对查询操作，满足 $1\\le l\\le r\\le n$，$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10152", "type": "P", "difficulty": 3, "samples": [["2\n3\n6", "Shinobu\nAlice"], ["1\n1000000000", "Alice"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "O2优化"], "title": "「LAOI-5」拼图", "background": "", "description": "Alice 和 Shinobu 在玩一个游戏。现在有 $n$ 个点，点有黑白两种颜色。初始每个点都是孤立的白点，Alice 和 Shinobu 轮流操作，Alice 先手：\n- 每轮 Alice 选择一对没有边的点对 $u,v$ 并连无向边 $(u,v)$，不能连自环。\n- 每轮 Shinobu 选择一个点并翻转其颜色（黑变白，白变黑）。\n\n当某一次操作后图中存在同色三元环（即存在点 $a,b,c$ 使 $a,b,c$ 同色且 $(a,b),(b,c),(c,a)$ 都已经连上）或者对手无法操作时，操作者获胜。假设两人都绝顶聪明，问谁存在必胜策略？", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $T$ 表示询问组数。\n\n后 $T$ 行，每行一个正整数 $n$ 表示游戏的点数。", "outputFormat": "$T$ 行，每行一个 `Alice` 或 `Shinobu`，表示最后谁会赢。", "hint": "样例 $1$ 解释：\n\n对于第 $1$ 组数据，Alice 一定在 $3$ 轮后连上 $(1,2),(2,3),(3,1)$，Shinobu 把 $1,2,3$ 依次变黑即可。\n\n对于第 $2$ 组数据，Alice 分 $8$ 轮连上 $(1,2),(2,3),(3,4),(4,5),(5,6),(6,1),(1,4),(2,5)$，然后 Alice 必胜：\n\n- $1,2,4,5$ 中三个同色，连上它们；\n- $1,2/4,5$ 同色，将 $6$ 与 $2/4$ 中同色的那个相连；\n- $1,4/2,5$ 同色，方案同上；\n- $1,5/2,4$ 同色，则 $3/6$ 必然同色（颜色换了 $8$ 次，黑点必有偶数个），即 $2,3,4/5,6,1$ 必然同色，连上即可。\n\n----------\n\n**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$n\\le 6$。\n- Subtask 2 (40pts)：$n\\ge 10^7$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le T\\le 10^6$，$1\\le n\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-5」拼图", "background": "", "description": "Alice 和 Shinobu 在玩一个游戏。现在有 $n$ 个点，点有黑白两种颜色。初始每个点都是孤立的白点，Alice 和 Shinobu 轮流操作，Alice 先手：\n- 每轮 Alice 选择一对没有边的点对 $u,v$ 并连无向边 $(u,v)$，不能连自环。\n- 每轮 Shinobu 选择一个点并翻转其颜色（黑变白，白变黑）。\n\n当某一次操作后图中存在同色三元环（即存在点 $a,b,c$ 使 $a,b,c$ 同色且 $(a,b),(b,c),(c,a)$ 都已经连上）或者对手无法操作时，操作者获胜。假设两人都绝顶聪明，问谁存在必胜策略？", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $T$ 表示询问组数。\n\n后 $T$ 行，每行一个正整数 $n$ 表示游戏的点数。", "outputFormat": "$T$ 行，每行一个 `Alice` 或 `Shinobu`，表示最后谁会赢。", "hint": "样例 $1$ 解释：\n\n对于第 $1$ 组数据，Alice 一定在 $3$ 轮后连上 $(1,2),(2,3),(3,1)$，Shinobu 把 $1,2,3$ 依次变黑即可。\n\n对于第 $2$ 组数据，Alice 分 $8$ 轮连上 $(1,2),(2,3),(3,4),(4,5),(5,6),(6,1),(1,4),(2,5)$，然后 Alice 必胜：\n\n- $1,2,4,5$ 中三个同色，连上它们；\n- $1,2/4,5$ 同色，将 $6$ 与 $2/4$ 中同色的那个相连；\n- $1,4/2,5$ 同色，方案同上；\n- $1,5/2,4$ 同色，则 $3/6$ 必然同色（颜色换了 $8$ 次，黑点必有偶数个），即 $2,3,4/5,6,1$ 必然同色，连上即可。\n\n----------\n\n**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$n\\le 6$。\n- Subtask 2 (40pts)：$n\\ge 10^7$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le T\\le 10^6$，$1\\le n\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10153", "type": "P", "difficulty": 4, "samples": [["3 9 20\n3 3 3\n0 1 2", "3\n3 3 3 2 2 2 1 1 1\n1 0 1 0 1 0 0 0 0"], ["3 16 3\n5 5 6\n2 0 8", "3\n1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 3\n0 0 1 0 0 1 1 0 2 1 0 2 0 0 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造"], "title": "「LAOI-5」膜你赛", "background": "LAOI 团员们出了一场有 $10^{100}$ 道题的 CSP-J 膜你赛！\n\n\n2025.1.24 本题 Idea 来源为 [xzCyanBrad](/user/380730)。", "description": "比赛是 ICPC 赛制，先以过题数为第一关键字不升排序，再以罚时数为第二关键字不降排序。\n\n有 $n$ 个巨佬前来爆切这场比赛，比赛一共 $m$ 分钟。\n\n在第 $i$ 分钟（$0 \\le i \\le m-1$）的开始，$s_i$ 号巨佬先提交了 $t_i$ 个 WA 的评测（每个罚时 $x$ 分钟），然后通过了某一道题目。**于是，TA 的通过数增加 $1$，总罚时增加 $x \\times t_i + i$ 分钟。**\n\n第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题（保证 $\\sum_{i=1}^n a_i=m$）。为什么巨佬们没有把题目全部切完呢？因为他们觉得题目太简单了，觉得没意思，走了。\n\n如果巨佬 $i$ 在**结束自己的所有提交**之后，发现自己在排行榜上的第一名（**不能并列**），那么称他「爆切比赛」。\n\n试构造数列 $\\{s_m\\}$ 和 $\\{t_m\\}$，使得第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题，且使「爆切比赛」的人数尽量多。", "inputFormat": "共三行。\n\n第一行三个整数 $n,m,x$。  \n\n第二行 $n$ 个整数，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，表示 $\\{k_n\\}$。", "outputFormat": "第一行输出最大的「爆切比赛」的人数。 \n\n第二、三行输出一组最大方案：\n\n第二行 $m$ 个整数，表示 $\\{s_m\\}$。\n\n第三行 $m$ 个整数，表示 $\\{t_m\\}$。", "hint": "### 样例 1 解释\n\n$2$ 分钟时，巨佬 $3$ 结束提交，通过 $3$ 题，罚时 $20 \\times 2 + 0 + 1 + 2 = 43$ 分钟。\n\n$5$ 分钟时，巨佬 $2$ 结束提交，通过 $3$ 题，罚时 $20 \\times 1 + 3 + 4 + 5 = 32$ 分钟。\n\n$8$ 分钟时，巨佬 $1$ 结束提交，通过 $3$ 题，罚时 $20 \\times 0 + 6 + 7 + 8 = 21$ 分钟。\n\n### 数据范围\n\n**不保证数据随机。**\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n,m,x$|\n|:--:|:--:|:--:|\n|$1$|$10$|$n\\le5$，$m \\le50$，$x\\le5$|\n|$2$|$10$|$n\\le50$，$m\\le500$|\n|$3$|$20$|$n\\le10^3$，$m \\le5\\times10^3$|\n|$4$|$20$|$x=0$，$k_i=0$|\n|$5$|$40$|无特殊限制|\n\n对于 $100\\%$ 的数据，保证：\n\n- $m\\ge 3n$；\n- $3 \\le n\\le10^5$；\n- $9\\le m\\le 3\\times10^5$；\n- $0\\le x\\le 5\\times10^4$；\n- $0\\le k_i \\le 4\\times10^4$；\n- $3\\le\\color{black} a_i \\le 3\\times10^5$；\n- $\\sum ^{n}_{i=1} a_i = m$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-5」膜你赛", "background": "LAOI 团员们出了一场有 $10^{100}$ 道题的 CSP-J 膜你赛！\n\n\n2025.1.24 本题 Idea 来源为 [xzCyanBrad](/user/380730)。", "description": "比赛是 ICPC 赛制，先以过题数为第一关键字不升排序，再以罚时数为第二关键字不降排序。\n\n有 $n$ 个巨佬前来爆切这场比赛，比赛一共 $m$ 分钟。\n\n在第 $i$ 分钟（$0 \\le i \\le m-1$）的开始，$s_i$ 号巨佬先提交了 $t_i$ 个 WA 的评测（每个罚时 $x$ 分钟），然后通过了某一道题目。**于是，TA 的通过数增加 $1$，总罚时增加 $x \\times t_i + i$ 分钟。**\n\n第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题（保证 $\\sum_{i=1}^n a_i=m$）。为什么巨佬们没有把题目全部切完呢？因为他们觉得题目太简单了，觉得没意思，走了。\n\n如果巨佬 $i$ 在**结束自己的所有提交**之后，发现自己在排行榜上的第一名（**不能并列**），那么称他「爆切比赛」。\n\n试构造数列 $\\{s_m\\}$ 和 $\\{t_m\\}$，使得第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题，且使「爆切比赛」的人数尽量多。", "inputFormat": "共三行。\n\n第一行三个整数 $n,m,x$。  \n\n第二行 $n$ 个整数，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，表示 $\\{k_n\\}$。", "outputFormat": "第一行输出最大的「爆切比赛」的人数。 \n\n第二、三行输出一组最大方案：\n\n第二行 $m$ 个整数，表示 $\\{s_m\\}$。\n\n第三行 $m$ 个整数，表示 $\\{t_m\\}$。", "hint": "### 样例 1 解释\n\n$2$ 分钟时，巨佬 $3$ 结束提交，通过 $3$ 题，罚时 $20 \\times 2 + 0 + 1 + 2 = 43$ 分钟。\n\n$5$ 分钟时，巨佬 $2$ 结束提交，通过 $3$ 题，罚时 $20 \\times 1 + 3 + 4 + 5 = 32$ 分钟。\n\n$8$ 分钟时，巨佬 $1$ 结束提交，通过 $3$ 题，罚时 $20 \\times 0 + 6 + 7 + 8 = 21$ 分钟。\n\n### 数据范围\n\n**不保证数据随机。**\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n,m,x$|\n|:--:|:--:|:--:|\n|$1$|$10$|$n\\le5$，$m \\le50$，$x\\le5$|\n|$2$|$10$|$n\\le50$，$m\\le500$|\n|$3$|$20$|$n\\le10^3$，$m \\le5\\times10^3$|\n|$4$|$20$|$x=0$，$k_i=0$|\n|$5$|$40$|无特殊限制|\n\n对于 $100\\%$ 的数据，保证：\n\n- $m\\ge 3n$；\n- $3 \\le n\\le10^5$；\n- $9\\le m\\le 3\\times10^5$；\n- $0\\le x\\le 5\\times10^4$；\n- $0\\le k_i \\le 4\\times10^4$；\n- $3\\le\\color{black} a_i \\le 3\\times10^5$；\n- $\\sum ^{n}_{i=1} a_i = m$。\n", "locale": "zh-CN"}}}
{"pid": "P10154", "type": "P", "difficulty": 4, "samples": [["7\n1 1\n2 4\n3 9\n10 6\n23 44\n108 301\n9181918 918918", "1\n16\n1080\n721510288\n57314155\n568048964\n118153594"]], "limits": {"time": [2000, 2000, 2000], "memory": [524288, 524288, 524288]}, "tags": ["数学", "O2优化"], "title": "「FAOI-R3」移民计划", "background": null, "description": "给定两个正整数 $n,a$。\n\n现有两个正整数数列 $\\{h_n\\},\\{s_n\\}$ 和一个正整数 $W$，满足：\n\n$$\\begin{cases} s_1=a, \\\\  s_i=\\left\\lceil \\dfrac{h_{i-1}}{i} \\right\\rceil, \\\\  h_i=i \\times s_i,\\\\  W=h_1\\times h_2\\times \\ldots\\times h_n. \\end{cases}$$\n\n试计算 $W$ 的值。**答案对 $10^9+7$ 取模。**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行，每行两个整数 $n,a$。", "outputFormat": "$T$ 行，每行一个整数，对应一组数据的答案。", "hint": "样例解释：\n\n- 对于第 $1$ 组数据，$s$ 数列为 $\\{1\\}$，$h$ 数列为 $\\{1\\}$，故答案为 $1$。\n- 对于第 $2$ 组数据，$s$ 数列为 $\\{4,2\\}$，$h$ 数列为 $\\{4,4\\}$，故答案为 $16$。\n- 对于第 $3$ 组数据，$s$ 数列为 $\\{9,5,4\\}$，$h$ 数列为 $\\{9,10,12\\}$，故答案为 $1080$。\n- 对于第 $4$ 组数据，取模前的答案为 $16721510400$。\n\n------------\n\n| 测试点编号 | $n \\le$ | $a \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | $1000$ | $40$ |\n| $2$ | $10^7$ | $1000$ | $30$ |\n| $3$ | $10^7$ | $10^6$ | $30$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^7$，$1 \\le a \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R3」移民计划", "background": null, "description": "给定两个正整数 $n,a$。\n\n现有两个正整数数列 $\\{h_n\\},\\{s_n\\}$ 和一个正整数 $W$，满足：\n\n$$\\begin{cases} s_1=a, \\\\  s_i=\\left\\lceil \\dfrac{h_{i-1}}{i} \\right\\rceil, \\\\  h_i=i \\times s_i,\\\\  W=h_1\\times h_2\\times \\ldots\\times h_n. \\end{cases}$$\n\n试计算 $W$ 的值。**答案对 $10^9+7$ 取模。**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行，每行两个整数 $n,a$。", "outputFormat": "$T$ 行，每行一个整数，对应一组数据的答案。", "hint": "样例解释：\n\n- 对于第 $1$ 组数据，$s$ 数列为 $\\{1\\}$，$h$ 数列为 $\\{1\\}$，故答案为 $1$。\n- 对于第 $2$ 组数据，$s$ 数列为 $\\{4,2\\}$，$h$ 数列为 $\\{4,4\\}$，故答案为 $16$。\n- 对于第 $3$ 组数据，$s$ 数列为 $\\{9,5,4\\}$，$h$ 数列为 $\\{9,10,12\\}$，故答案为 $1080$。\n- 对于第 $4$ 组数据，取模前的答案为 $16721510400$。\n\n------------\n\n| 测试点编号 | $n \\le$ | $a \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | $1000$ | $40$ |\n| $2$ | $10^7$ | $1000$ | $30$ |\n| $3$ | $10^7$ | $10^6$ | $30$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^7$，$1 \\le a \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10155", "type": "P", "difficulty": 3, "samples": [["5\n3 1 4 2 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心"], "title": "[LSOT-2] 基于二分查找与插入的快速排序", "background": "小 H 不会排序，但是会二分！\n\n于是他创造了一个基于二分查找与插入的快速排序。\n\n本题存在可带修做法，因为这题是这场考试的签到题所以良心出题人没有加上。", "description": "给定一个排列 $p$。每次可以选择一个数 $p_i$，你需要找到最小的 $j$，使得 $j>i$ 且 $p_j>p_i$，并将 $p_i$ 插入到 $p_j$ 前面。你需要最小化使得 $p_i=i$ 的操作次数。\n\n若不存在这样的 $j$，则无法进行操作。", "inputFormat": "第一行一个整数 $n$，表示排列的长度。\n\n接下来一行 $n$ 个整数描述排列 $p$，第 $i$ 个数为 $p_i$。", "outputFormat": "一行一个整数表示最小的操作次数。若无法完成排序输出 $-1$。", "hint": "\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(20pts)：}n\\le10$。\n- $\\texttt{Subtask 2(20pts)：}$保证 $p_i=n-i+1$。\n- $\\texttt{Subtask 3(20pts)：}n\\le1000$。\n- $\\texttt{Subtask 4(40pts)：}$无特殊性质。\n\n对于全部的数据，$1\\le n\\le2\\times 10^6$，$p$ 是一个 $1$ 到 $n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] 基于二分查找与插入的快速排序", "background": "小 H 不会排序，但是会二分！\n\n于是他创造了一个基于二分查找与插入的快速排序。\n\n本题存在可带修做法，因为这题是这场考试的签到题所以良心出题人没有加上。", "description": "给定一个排列 $p$。每次可以选择一个数 $p_i$，你需要找到最小的 $j$，使得 $j>i$ 且 $p_j>p_i$，并将 $p_i$ 插入到 $p_j$ 前面。你需要最小化使得 $p_i=i$ 的操作次数。\n\n若不存在这样的 $j$，则无法进行操作。", "inputFormat": "第一行一个整数 $n$，表示排列的长度。\n\n接下来一行 $n$ 个整数描述排列 $p$，第 $i$ 个数为 $p_i$。", "outputFormat": "一行一个整数表示最小的操作次数。若无法完成排序输出 $-1$。", "hint": "\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(20pts)：}n\\le10$。\n- $\\texttt{Subtask 2(20pts)：}$保证 $p_i=n-i+1$。\n- $\\texttt{Subtask 3(20pts)：}n\\le1000$。\n- $\\texttt{Subtask 4(40pts)：}$无特殊性质。\n\n对于全部的数据，$1\\le n\\le2\\times 10^6$，$p$ 是一个 $1$ 到 $n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P10156", "type": "P", "difficulty": 4, "samples": [["6 2 2 3\n2 5 7 2 5 7\n1 1 2 1 2 1", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "背包 DP"], "title": "[LSOT-2] 胜者组", "background": "进入胜者组就算胜利吗...\n\n至少人们都这样说。", "description": "小 H 的学校在 noip 结束后要决定踢出一些学生回去学文化课。\n\n具体的，学校一共有 $n$ 个同学，留下了最多 $m$ 个学习信息学的名额。\n\n学校里的同学组成了 $k$ 个小团体，其中第 $i$ 个同学属于第 $c_i$ 个小团体。\n\n你每次可以钦定两个处于同一小团体的学生学习文化课。若你让学生 $i,j(c_i=c_j)$ 去学习文化课，学生会产生 $a_i+a_j+x\\times|i-j|$ 的不满意度。这里 $x$ 是输入一开始给定的常数。\n\n你需要让学生的不满意度最小化，或报告无法留下不多于 $m$ 个学习信息学的学生。", "inputFormat": "第一行四个正整数 $n,m,k,x$。\n\n接下来两行每行 $n$ 个整数分别表示 $a_i,c_i$。", "outputFormat": "一行一个整数表示最小的不满意度。或输出 `Impossible` 表示无解。", "hint": "样例解释：\n\n分别钦定 $(1,2)$ 和 $(4,6)$ 学习文化课，不满意度为 $(2+5+3\\times|1-2|)+(2+7+3\\times|4-6|)=25$。\n\n需要注意的是，一个同学不可以被钦定多次。\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(15pts)：}n\\le20$。\n- $\\texttt{Subtask 2(15pts)：}x=0$。\n- $\\texttt{Subtask 3(15pts)：}k=1$。\n- $\\texttt{Subtask 4(20pts)：}n\\le 300$。\n- $\\texttt{Subtask 5(35pts)：}$无特殊性质。\n\n对于全部的数据，$0\\le a_i,x\\le10^5$，$1\\le c_i\\le k\\le n\\le 5000$，$0\\le m\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] 胜者组", "background": "进入胜者组就算胜利吗...\n\n至少人们都这样说。", "description": "小 H 的学校在 noip 结束后要决定踢出一些学生回去学文化课。\n\n具体的，学校一共有 $n$ 个同学，留下了最多 $m$ 个学习信息学的名额。\n\n学校里的同学组成了 $k$ 个小团体，其中第 $i$ 个同学属于第 $c_i$ 个小团体。\n\n你每次可以钦定两个处于同一小团体的学生学习文化课。若你让学生 $i,j(c_i=c_j)$ 去学习文化课，学生会产生 $a_i+a_j+x\\times|i-j|$ 的不满意度。这里 $x$ 是输入一开始给定的常数。\n\n你需要让学生的不满意度最小化，或报告无法留下不多于 $m$ 个学习信息学的学生。", "inputFormat": "第一行四个正整数 $n,m,k,x$。\n\n接下来两行每行 $n$ 个整数分别表示 $a_i,c_i$。", "outputFormat": "一行一个整数表示最小的不满意度。或输出 `Impossible` 表示无解。", "hint": "样例解释：\n\n分别钦定 $(1,2)$ 和 $(4,6)$ 学习文化课，不满意度为 $(2+5+3\\times|1-2|)+(2+7+3\\times|4-6|)=25$。\n\n需要注意的是，一个同学不可以被钦定多次。\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(15pts)：}n\\le20$。\n- $\\texttt{Subtask 2(15pts)：}x=0$。\n- $\\texttt{Subtask 3(15pts)：}k=1$。\n- $\\texttt{Subtask 4(20pts)：}n\\le 300$。\n- $\\texttt{Subtask 5(35pts)：}$无特殊性质。\n\n对于全部的数据，$0\\le a_i,x\\le10^5$，$1\\le c_i\\le k\\le n\\le 5000$，$0\\le m\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10157", "type": "P", "difficulty": 6, "samples": [["2\n2\n3", "2\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "二分", "位运算", "Ad-hoc", "分类讨论"], "title": "[LSOT-2] Tree and Xor", "background": "", "description": "给定 $n$，你需要构造一棵 $n$ 个点的以 $1$ 为根的有根树，满足 $\\bigoplus\\limits_{i=1}^ndegree(i)=0$ 且 $fa_2 \\sim fa_n$ 的字典序最小。其中，$\\oplus$ 表示异或运算。\n\n其中 $degree(i)$ 表示与点 $i$ 相连的点数，$fa_i$ 表示点 $i$ 的父节点且 $fa_i < i$。\n\n你需要输出 $\\sum\\limits_{i=2}^ni \\times fa_i$，若无解则输出 $-1$。", "inputFormat": "第一行，一个正整数 $T$，表示询问数量。\n\n接下来每 $T$ 行每行一个正整数 $n$ 表示一次询问。", "outputFormat": "一共 $T$ 行，每行一个整数表示答案除 $998244353$ 的余数。", "hint": "**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(5 pts)：}n \\leq 7$。\n- $\\texttt{Subtask 2(10 pts)：} n \\leq 20$。\n- $\\texttt{Subtask 3(20 pts)：}\\sum n \\leq 2000$。\n- $\\texttt{Subtask 4(15 pts)：}n = 2^k-1$，其中 $k$ 是自然数。\n- $\\texttt{Subtask 5(50 pts)：}$无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^6$，$2 \\leq n \\leq 10^{9}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] Tree and Xor", "background": "", "description": "给定 $n$，你需要构造一棵 $n$ 个点的以 $1$ 为根的有根树，满足 $\\bigoplus\\limits_{i=1}^ndegree(i)=0$ 且 $fa_2 \\sim fa_n$ 的字典序最小。其中，$\\oplus$ 表示异或运算。\n\n其中 $degree(i)$ 表示与点 $i$ 相连的点数，$fa_i$ 表示点 $i$ 的父节点且 $fa_i < i$。\n\n你需要输出 $\\sum\\limits_{i=2}^ni \\times fa_i$，若无解则输出 $-1$。", "inputFormat": "第一行，一个正整数 $T$，表示询问数量。\n\n接下来每 $T$ 行每行一个正整数 $n$ 表示一次询问。", "outputFormat": "一共 $T$ 行，每行一个整数表示答案除 $998244353$ 的余数。", "hint": "**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(5 pts)：}n \\leq 7$。\n- $\\texttt{Subtask 2(10 pts)：} n \\leq 20$。\n- $\\texttt{Subtask 3(20 pts)：}\\sum n \\leq 2000$。\n- $\\texttt{Subtask 4(15 pts)：}n = 2^k-1$，其中 $k$ 是自然数。\n- $\\texttt{Subtask 5(50 pts)：}$无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^6$，$2 \\leq n \\leq 10^{9}$。", "locale": "zh-CN"}}}
{"pid": "P10158", "type": "P", "difficulty": 6, "samples": [["5 2 6 1000000007\n1 1 2 3 5\n0 0 0 0 0\n1 1 2 3\n1 2 2 3\n2 1 1 5 2\n4 1 2 2 3\n1 1 1 4\n1 2 1 4", "3\n0\nwhere is self?\n4\n3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "哈希 hashing"], "title": "[LSOT-2] 笼中鸟", "background": "> 「笼中鸟，笼中鸟」\n>\n> 「笼中有只小小鸟」\n>\n> 「何时才能出囚笼」\n>\n> 「黎明时分的夜晚」\n>\n> 「仙鹤灵龟都滑倒」\n>\n> 「猜猜身后是何人」", "description": "榎本在 SPHIA 的小黑屋内实验神秘转移装置。\n\n实验体是 $m$ 个长度为 $n$ 的数列，他要在这些数列上验证转移装置是否能够正常运行。\n\n这个转移装置的主要功能是将两个序列的部分交换，也就是说他会选择 $(i,j),[l,r]$，然后将序列 $i$ 的 $[l,r]$ 与序列 $j$ 的 $[l,r]$ 交换。\n\n当然了，为了验证是否成功交换，他会查询某个序列的某个区间的和与预期值是否相同，并且为了避免偶然现象，他会给某个序列的某个区间加上一个值。\n\n榎本知道 self 非常喜欢斐波那契数列，于是为了更好的困住 self，他还加了一个功能，就是判断数列 $f$ 的某个区间是不是满足 $f_i\\equiv\\sum_{j=1}^kf_{i-j}\\pmod p$ 的特殊数列。\n\n形式化题面：\n\n1. 给定 $x,l,r$，求 $\\sum_{i=l}^ra_{x,i}\\bmod p$。\n\n2. 给定 $x,l,r,f$，询问命题 $\\forall i\\in[l+f,r],a_{x,i}\\equiv \\sum_{j=1}^fa_{x,i-j}\\pmod p$ 是否是真命题。\n3. 给定 $x,l,r,k$，$\\forall i\\in[l,r],a_{x,i}← a_{x,i}+k$。\n4. 给定 $x,y,l,r$，$\\forall i\\in[l,r],\\text{swap}(a_{x,i},a_{y,i})$。\n", "inputFormat": "第一行四个正整数 $n,m,q,p$，$q$ 代表榎本的操作数。\n\n接下来 $m$ 行每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数代表 $a_{i,j}$。\n\n接下来 $q$ 行，每行四个或五个整数。\n\n若输入为 `1 x l r` 则代表对区间 $[l,r]$ 进行一次 $1$ 操作，若输入为 `2 x l r f` 则代表对区间 $[l,r]$ 进行一次 $2$ 操作，若输入为 `3 x l r k` 则代表对区间 $[l,r]$ 进行一次 $3$ 操作，若输入为 `4 x y l r ` 则代表对区间 $[l,r]$ 进行一次 $4$ 操作。", "outputFormat": "对于每个 $1$ 操作，一行一个正整数表示答案。\n\n对于每个 $2$ 操作，如果是真命题输出 `where is self?`，否则输出 `infinity loop!`。", "hint": "**「本题采用捆绑测试」**\n\n$\\texttt{Subtask 1(20pts)：}n,q\\le100$。\n\n$\\texttt{Subtask 2(25pts)：}n,q\\le10^5$。\n\n$\\texttt{Subtask 3(25pts)：}$不存在 $2$ 操作。\n\n$\\texttt{Subtask 4(30pts)：}$无特殊性质。\n\n对于所有数据，$1\\le n,q\\le5\\times10^5$，$1\\le m\\le10$，$0\\le a_{i,j},k< p$，$1\\le l\\le r\\le n$，$1\\le f\\le n$，$1\\le x,y\\le m$，$x\\not=y$。保证 $p$ 是 $10^{9}$ 到 $2\\times 10^9$ 中随机生成的质数。\n\n\n\n------------\n2024/2/13 本题赛后添加两组 hack 数据（Subtask #5）", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] 笼中鸟", "background": "> 「笼中鸟，笼中鸟」\n>\n> 「笼中有只小小鸟」\n>\n> 「何时才能出囚笼」\n>\n> 「黎明时分的夜晚」\n>\n> 「仙鹤灵龟都滑倒」\n>\n> 「猜猜身后是何人」", "description": "榎本在 SPHIA 的小黑屋内实验神秘转移装置。\n\n实验体是 $m$ 个长度为 $n$ 的数列，他要在这些数列上验证转移装置是否能够正常运行。\n\n这个转移装置的主要功能是将两个序列的部分交换，也就是说他会选择 $(i,j),[l,r]$，然后将序列 $i$ 的 $[l,r]$ 与序列 $j$ 的 $[l,r]$ 交换。\n\n当然了，为了验证是否成功交换，他会查询某个序列的某个区间的和与预期值是否相同，并且为了避免偶然现象，他会给某个序列的某个区间加上一个值。\n\n榎本知道 self 非常喜欢斐波那契数列，于是为了更好的困住 self，他还加了一个功能，就是判断数列 $f$ 的某个区间是不是满足 $f_i\\equiv\\sum_{j=1}^kf_{i-j}\\pmod p$ 的特殊数列。\n\n形式化题面：\n\n1. 给定 $x,l,r$，求 $\\sum_{i=l}^ra_{x,i}\\bmod p$。\n\n2. 给定 $x,l,r,f$，询问命题 $\\forall i\\in[l+f,r],a_{x,i}\\equiv \\sum_{j=1}^fa_{x,i-j}\\pmod p$ 是否是真命题。\n3. 给定 $x,l,r,k$，$\\forall i\\in[l,r],a_{x,i}← a_{x,i}+k$。\n4. 给定 $x,y,l,r$，$\\forall i\\in[l,r],\\text{swap}(a_{x,i},a_{y,i})$。\n", "inputFormat": "第一行四个正整数 $n,m,q,p$，$q$ 代表榎本的操作数。\n\n接下来 $m$ 行每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数代表 $a_{i,j}$。\n\n接下来 $q$ 行，每行四个或五个整数。\n\n若输入为 `1 x l r` 则代表对区间 $[l,r]$ 进行一次 $1$ 操作，若输入为 `2 x l r f` 则代表对区间 $[l,r]$ 进行一次 $2$ 操作，若输入为 `3 x l r k` 则代表对区间 $[l,r]$ 进行一次 $3$ 操作，若输入为 `4 x y l r ` 则代表对区间 $[l,r]$ 进行一次 $4$ 操作。", "outputFormat": "对于每个 $1$ 操作，一行一个正整数表示答案。\n\n对于每个 $2$ 操作，如果是真命题输出 `where is self?`，否则输出 `infinity loop!`。", "hint": "**「本题采用捆绑测试」**\n\n$\\texttt{Subtask 1(20pts)：}n,q\\le100$。\n\n$\\texttt{Subtask 2(25pts)：}n,q\\le10^5$。\n\n$\\texttt{Subtask 3(25pts)：}$不存在 $2$ 操作。\n\n$\\texttt{Subtask 4(30pts)：}$无特殊性质。\n\n对于所有数据，$1\\le n,q\\le5\\times10^5$，$1\\le m\\le10$，$0\\le a_{i,j},k< p$，$1\\le l\\le r\\le n$，$1\\le f\\le n$，$1\\le x,y\\le m$，$x\\not=y$。保证 $p$ 是 $10^{9}$ 到 $2\\times 10^9$ 中随机生成的质数。\n\n\n\n------------\n2024/2/13 本题赛后添加两组 hack 数据（Subtask #5）", "locale": "zh-CN"}}}
{"pid": "P10159", "type": "P", "difficulty": 6, "samples": [["1\n5\n\n2\n\n3\n\n1\n\n4\n\n", "\n\n? 1 1 1\n\n? 2 2 1\n\n? 3 3 1\n\n? 4 4 1\n\n! 2 3 1 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "剪枝", "构造", "洛谷月赛"], "title": "[DTCPC 2024] The last permutation", "background": "**本题题目背景不均为虚构，不影射任何人**。\n\n小 L 是小 L 初中时的白月光。\n\n有一天，小 L 在朋友圈说要玩农，小 L 火速研究怎么下载王者。\n\n第二天，小 L 在朋友圈说要玩吃鸡，小 L 火速研究怎么下载 pubg。\n\n但小 L 很快就和小 L 分手了，小 L 最后的情思化作一个排列。遗憾的是，小 L 并不情愿告诉大家。\n\n不过在你的不断追问下，小 L 还是同意回答几个关于排列的问题。", "description": "现存在一个长度为 $n$ 的隐藏排列 $p$。你可以进行如下询问若干次：选择三元组 $(l,r,k)$，满足 $1\\leq l\\leq r\\leq n$，$1\\leq k\\leq r - l + 1$，交互库会返回下标在 $[l,r]$ 内的第 $k$ 大值。\n\n对于一次询问操作，其代价为 $\\frac{1}{r-l+1}$，你需要在不超过 $11.8$ 的代价内得出排列。\n\n交互库不自适应，也就是说，你所需得到的排列在交互开始前就已经确定。", "inputFormat": "输入第一行是一个正整数 $t$ ($1 \\le t \\le 5$) 表示测试组数。\n\n对于每组数据，输入一行 $n$ ($1 \\le n \\le 1000$) 表示排列 $p$ 的长度。\n\n当你已经得到排列，你应当输出形如 `! p1 p2 ... pn` 表示你得出的排列。\n\n本题使用 IO 交互模式。\n\n### 交互格式\n- `? l r k`，询问下标在 $[l,r]$ 内的第 $k$ 大值。\n\n- `! p1 p2 p3 ... pn`，输出答案。\n\n请注意：在每组数据中，请保证询问操作的代价总和不超过 $11.8$。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] The last permutation", "background": "**本题题目背景不均为虚构，不影射任何人**。\n\n小 L 是小 L 初中时的白月光。\n\n有一天，小 L 在朋友圈说要玩农，小 L 火速研究怎么下载王者。\n\n第二天，小 L 在朋友圈说要玩吃鸡，小 L 火速研究怎么下载 pubg。\n\n但小 L 很快就和小 L 分手了，小 L 最后的情思化作一个排列。遗憾的是，小 L 并不情愿告诉大家。\n\n不过在你的不断追问下，小 L 还是同意回答几个关于排列的问题。", "description": "现存在一个长度为 $n$ 的隐藏排列 $p$。你可以进行如下询问若干次：选择三元组 $(l,r,k)$，满足 $1\\leq l\\leq r\\leq n$，$1\\leq k\\leq r - l + 1$，交互库会返回下标在 $[l,r]$ 内的第 $k$ 大值。\n\n对于一次询问操作，其代价为 $\\frac{1}{r-l+1}$，你需要在不超过 $11.8$ 的代价内得出排列。\n\n交互库不自适应，也就是说，你所需得到的排列在交互开始前就已经确定。", "inputFormat": "输入第一行是一个正整数 $t$ ($1 \\le t \\le 5$) 表示测试组数。\n\n对于每组数据，输入一行 $n$ ($1 \\le n \\le 1000$) 表示排列 $p$ 的长度。\n\n当你已经得到排列，你应当输出形如 `! p1 p2 ... pn` 表示你得出的排列。\n\n本题使用 IO 交互模式。\n\n### 交互格式\n- `? l r k`，询问下标在 $[l,r]$ 内的第 $k$ 大值。\n\n- `! p1 p2 p3 ... pn`，输出答案。\n\n请注意：在每组数据中，请保证询问操作的代价总和不超过 $11.8$。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10160", "type": "P", "difficulty": 4, "samples": [["1010011", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷月赛"], "title": "[DTCPC 2024] Ultra", "background": "Tony2 喜欢玩某二字游戏，这一天他在小 C 面前展示他的 $\\text{Ultra}$。\n\n但是小 C 不会 $\\text{Ultra}$，所以他跑去图图酱一去了。\n\n~~然后图图失败了~~\n\n于是小 C 趁 Tony2 不在的时候偷偷地把他的跳跃键和下冲键交换了（", "description": "Tony2 的操作可以看作下冲和跳跃的组合。\n\n称一个 $\\text{Ultra}$ 为一段连续的操作，以下冲开头，然后跳跃和下冲交替，并以下冲结束。由于是 $\\text{Ultra}$，所以至少要有一次跳跃。\n\n小 C 每次可以将一个 $\\text{Ultra}$ 变成 $\\text{uLTRA}$，也就是将这个 $\\text{Ultra}$ 的每个下冲变成跳跃，将每个跳跃变成下冲。\n\n小 C 不喜欢 $\\text{Ultra}$，所以想要使得下冲次数尽量少。\n\n**形式化题意**\n\n给你一个 $01$ 序列，你可以进行如下操作若干次（或零次）:\n\n- 将序列中形如 $101\\cdots01$ 的一个子串（即 $1(01)^k$，$k\\ge 1$）替换成**等长**的 $010\\cdots10$（即 $0(10)^k$）。\n\n你要操作使得 $1$ 的个数尽可能少，输出最少的 $1$ 的个数。", "inputFormat": "一行一个长度为 $n$（$n\\le 10^6$） 的字符串表示这个 $01$ 序列。", "outputFormat": "输出一个数表示最少的 $1$ 的个数。", "hint": "样例 $1$ 解释：选中该串的前三个字符 $101$，对其操作后该串变为 $0100011$，仅包含 $3$ 个 $1$。容易证明这是最优的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] Ultra", "background": "Tony2 喜欢玩某二字游戏，这一天他在小 C 面前展示他的 $\\text{Ultra}$。\n\n但是小 C 不会 $\\text{Ultra}$，所以他跑去图图酱一去了。\n\n~~然后图图失败了~~\n\n于是小 C 趁 Tony2 不在的时候偷偷地把他的跳跃键和下冲键交换了（", "description": "Tony2 的操作可以看作下冲和跳跃的组合。\n\n称一个 $\\text{Ultra}$ 为一段连续的操作，以下冲开头，然后跳跃和下冲交替，并以下冲结束。由于是 $\\text{Ultra}$，所以至少要有一次跳跃。\n\n小 C 每次可以将一个 $\\text{Ultra}$ 变成 $\\text{uLTRA}$，也就是将这个 $\\text{Ultra}$ 的每个下冲变成跳跃，将每个跳跃变成下冲。\n\n小 C 不喜欢 $\\text{Ultra}$，所以想要使得下冲次数尽量少。\n\n**形式化题意**\n\n给你一个 $01$ 序列，你可以进行如下操作若干次（或零次）:\n\n- 将序列中形如 $101\\cdots01$ 的一个子串（即 $1(01)^k$，$k\\ge 1$）替换成**等长**的 $010\\cdots10$（即 $0(10)^k$）。\n\n你要操作使得 $1$ 的个数尽可能少，输出最少的 $1$ 的个数。", "inputFormat": "一行一个长度为 $n$（$n\\le 10^6$） 的字符串表示这个 $01$ 序列。", "outputFormat": "输出一个数表示最少的 $1$ 的个数。", "hint": "样例 $1$ 解释：选中该串的前三个字符 $101$，对其操作后该串变为 $0100011$，仅包含 $3$ 个 $1$。容易证明这是最优的。", "locale": "zh-CN"}}}
{"pid": "P10161", "type": "P", "difficulty": 5, "samples": [["3\n5 2\n5 3\n5 4\n", "(())(\n()()(\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "背包 DP", "组合数学", "构造", "洛谷月赛", "线性 DP"], "title": "[DTCPC 2024] 小方的疑惑 10", "background": "小方一直有很多疑惑。", "description": "小 C 在几年前的生日那天收到了一个礼物：一个长度为 $n$ 的只包含 $\\text{(}$ 和 $\\text{)}$ 的字符串，其中恰好有 $k$ 个子串为合法的括号序列。\n\n由于小方很疑惑这个礼物长什么样，所以你要构造一个这样的字符串，或者输出 $-1$ 表示无解。\n\n合法的括号序列满足以下条件：\n\n- $\\text{()}$ 是合法的括号序列。\n- 若 $\\text{A}$ 和 $\\text{B}$ 是合法的括号序列，则 $\\text{(A)}$ 和 $\\text{AB}$ 是合法的括号序列。\n- 其它序列均不是合法的括号序列。\n\n小方有很多疑惑，所以他会询问你 $T$ 次。", "inputFormat": "第一行一个整数 $T$ 表示询问次数。\n\n接下来 $T$ 行，每行两个整数 $n$ 和 $k$（$1\\le n,k \\le 10^5$，$\\sum n\\le 10^6$）。\n\n**本题输入输出量较大，请使用较为快速的输入输出方式。**", "outputFormat": "对于每次询问，如果有解，输出一行一个长度为 $n$ 的字符串，否则输出 $-1$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 小方的疑惑 10", "background": "小方一直有很多疑惑。", "description": "小 C 在几年前的生日那天收到了一个礼物：一个长度为 $n$ 的只包含 $\\text{(}$ 和 $\\text{)}$ 的字符串，其中恰好有 $k$ 个子串为合法的括号序列。\n\n由于小方很疑惑这个礼物长什么样，所以你要构造一个这样的字符串，或者输出 $-1$ 表示无解。\n\n合法的括号序列满足以下条件：\n\n- $\\text{()}$ 是合法的括号序列。\n- 若 $\\text{A}$ 和 $\\text{B}$ 是合法的括号序列，则 $\\text{(A)}$ 和 $\\text{AB}$ 是合法的括号序列。\n- 其它序列均不是合法的括号序列。\n\n小方有很多疑惑，所以他会询问你 $T$ 次。", "inputFormat": "第一行一个整数 $T$ 表示询问次数。\n\n接下来 $T$ 行，每行两个整数 $n$ 和 $k$（$1\\le n,k \\le 10^5$，$\\sum n\\le 10^6$）。\n\n**本题输入输出量较大，请使用较为快速的输入输出方式。**", "outputFormat": "对于每次询问，如果有解，输出一行一个长度为 $n$ 的字符串，否则输出 $-1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10162", "type": "P", "difficulty": 5, "samples": [["5\n1 3 5 2 3\n", "21"], ["4\n4 6 3 3", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "分治", "洛谷月赛", "均摊分析"], "title": "[DTCPC 2024] 序列", "background": "", "description": "定义一个长度为 $n$ 的序列 $\\{p_n\\}$ 的权值 $f(\\{p_n\\})$ 为 $\\max\\limits_{i=1}^n\\{p_i-\\max\\{p_{i-1},p_{i+1}\\}\\}$，特别的，定义 $p_0=p_{n+1}=-\\inf$。\n\n求 $\\sum\\limits_{l=1}^n \\sum\\limits_{r=l+1}^n f(\\{a_l,a_{l+1},\\dots,a_r\\})$。\n\n答案对 $2^{32}$ 取模。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n \\le 10^6$）。\n\n第二行 $n$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "一行一个数表示答案。\n\n答案对 $2^{32}$ 取模。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 序列", "background": "", "description": "定义一个长度为 $n$ 的序列 $\\{p_n\\}$ 的权值 $f(\\{p_n\\})$ 为 $\\max\\limits_{i=1}^n\\{p_i-\\max\\{p_{i-1},p_{i+1}\\}\\}$，特别的，定义 $p_0=p_{n+1}=-\\inf$。\n\n求 $\\sum\\limits_{l=1}^n \\sum\\limits_{r=l+1}^n f(\\{a_l,a_{l+1},\\dots,a_r\\})$。\n\n答案对 $2^{32}$ 取模。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n \\le 10^6$）。\n\n第二行 $n$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "一行一个数表示答案。\n\n答案对 $2^{32}$ 取模。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10163", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2\n1 3", "2 2\n1 4\n1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "洛谷月赛"], "title": "[DTCPC 2024] 平方树", "background": "", "description": "给你一个森林，每条边有一个方向。\n\n你可以进行两种操作：\n\n- 新增一个点。\n\n- 将两个点之间连一条有向边。\n\n你要使得最后将所有有向边看成无向边后，图形成一棵树，且每个点的出度都是平方数。\n\n给出一种新增点数最少的方案。", "inputFormat": "第一行两个整数 $n,m$（$1\\le m \\lt n \\le 10^5$）表示这个森林的点数和边数。\n\n接下来 $m$ 行，每行两个数 $u,v$（$1\\le u,v\\le n$）表示一条 $u$ 连向 $v$ 的有向边。\n\n保证将每条边看作无向边后，这张图是森林。", "outputFormat": "第一行两个整数 $x,y$ 表示你的新增点数和连边数。\n\n接下来 $y$ 行，每行两个数 $u,v$ 表示新增一条 $u$ 连向 $v$ 的有向边，你要保证 $1\\le u,v\\le n+x$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 平方树", "background": "", "description": "给你一个森林，每条边有一个方向。\n\n你可以进行两种操作：\n\n- 新增一个点。\n\n- 将两个点之间连一条有向边。\n\n你要使得最后将所有有向边看成无向边后，图形成一棵树，且每个点的出度都是平方数。\n\n给出一种新增点数最少的方案。", "inputFormat": "第一行两个整数 $n,m$（$1\\le m \\lt n \\le 10^5$）表示这个森林的点数和边数。\n\n接下来 $m$ 行，每行两个数 $u,v$（$1\\le u,v\\le n$）表示一条 $u$ 连向 $v$ 的有向边。\n\n保证将每条边看作无向边后，这张图是森林。", "outputFormat": "第一行两个整数 $x,y$ 表示你的新增点数和连边数。\n\n接下来 $y$ 行，每行两个数 $u,v$ 表示新增一条 $u$ 连向 $v$ 的有向边，你要保证 $1\\le u,v\\le n+x$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10164", "type": "P", "difficulty": 6, "samples": [["01101", "1"], ["01011", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["动态规划 DP", "2024", "前缀和", "洛谷月赛"], "title": "[DTCPC 2024] 戈布", "background": "", "description": "对于 $01$ 序列 $\\{a_n\\}$，找到最小的 $k$ 满足存在一组 $\\{(l_k,r_k)\\}$使得以下条件成立。\n\n- $\\forall i\\in[1,n]$，$a_i=1$ 当且仅当 $\\exist  j\\in[1,k]$，$i\\in[l_j,r_j]$。\n\n可以证明满足条件的 $\\{(l_k,r_k)\\}$ 仅有一个。\n\n一个 $01$ 序列 $\\{a_n\\}$ 是好的当且仅当 $\\forall i\\in[1,k)$，$r_i-l_i<r_{i+1}-l_{i+1}$。\n\n简单来说，一个 $01$ 序列是好的当且仅当从左到右形成的极长 $1$ 段长度严格递增。\n\n给定序列 $\\{a_n\\}$，你可以进行如下操作若干次（或不进行操作）：\n\n- 选择 $i,j(i\\ne j)$，交换 $a_i,a_j$。\n\n试求最小的操作次数使得 $\\{a_n\\}$ 变成一个好的序列。", "inputFormat": "一行一个长为 $n$（$n\\leq 800$） 的 $01$ 序列 $\\{a_n\\}$。", "outputFormat": "一行一个数字，表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 戈布", "background": "", "description": "对于 $01$ 序列 $\\{a_n\\}$，找到最小的 $k$ 满足存在一组 $\\{(l_k,r_k)\\}$使得以下条件成立。\n\n- $\\forall i\\in[1,n]$，$a_i=1$ 当且仅当 $\\exist  j\\in[1,k]$，$i\\in[l_j,r_j]$。\n\n可以证明满足条件的 $\\{(l_k,r_k)\\}$ 仅有一个。\n\n一个 $01$ 序列 $\\{a_n\\}$ 是好的当且仅当 $\\forall i\\in[1,k)$，$r_i-l_i<r_{i+1}-l_{i+1}$。\n\n简单来说，一个 $01$ 序列是好的当且仅当从左到右形成的极长 $1$ 段长度严格递增。\n\n给定序列 $\\{a_n\\}$，你可以进行如下操作若干次（或不进行操作）：\n\n- 选择 $i,j(i\\ne j)$，交换 $a_i,a_j$。\n\n试求最小的操作次数使得 $\\{a_n\\}$ 变成一个好的序列。", "inputFormat": "一行一个长为 $n$（$n\\leq 800$） 的 $01$ 序列 $\\{a_n\\}$。", "outputFormat": "一行一个数字，表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10165", "type": "P", "difficulty": 7, "samples": [["5\n1 2 1 2\n1 3 2 1\n1 4 3 3\n1 5 4 4\n", "9"], ["7\n1 2 3 4\n2 3 6 2\n2 4 1 3\n2 5 4 6\n3 6 2 1\n5 7 5 5", "44"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷月赛"], "title": "[DTCPC 2024] 人赢的跳棋", "background": "小 C 是人赢。\n\n每周三晚上，小 T 晚上在吃猪脚饭，小 C 晚上和妹子在食堂共进晚餐。\n\n每周五晚上，小 T 启动废墟图书馆，小 C 在和妹子聊天。\n\n今天小 T 在睡觉，而小 C 在和妹子玩人赢的跳棋。\n", "description": "给一棵 $n$ 个点的树，边有边权，边权为三元组。第 $i$ 条边的三元组 $e$ 为 $(e_{i,1},e_{i,2},e_{i,3})$。\n\n设函数 $\\operatorname{win}(x,y)$：\n- 若 $x_2<y_2$ 且 $x_3<y_3$ 则 $\\operatorname{win}(x,y)=x_1$。\n- 若 $x_2>y_2$ 且 $x_3>y_3$ 则  $\\operatorname{win}(x,y)=y_1$ \n- 否则 $\\operatorname{win}(x,y)=0$。\n\n其中 $x=(x_1,x_2,x_3),y=(y_1,y_2,y_3)$。\n\n显然 $\\operatorname{win}$ 函数满足交换律。\n\n设一个三元组序列 $\\{a_n\\}$ 的权值为 $\\max_{i=1}^{n-1} \\operatorname{win}(a_i,a_{i+1})$，特别的，$n=1$ 时权值为 $0$。\n\n设一条路径的权值为经过的所有边的权值按顺序组成的序列的权值。\n\n求树的所有无向路径的权值和。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n\\leq 3\\times 10^5$） 表示树的节点数。\n\n之后 $n-1$ 行每行四个整数表示 $u,v,e_{i,1},e_{i,2}$，其中有 $e_{i,3}=i$。\n\n保证 $\\{e_{i,1}\\}$ 互不相同，$\\{e_{i,2}\\}$ 互不相同，值域都为 $[1,n]$。", "outputFormat": "一行一个整数表示答案。", "hint": "2025/10/31 增加 hack 数据一组", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 人赢的跳棋", "background": "小 C 是人赢。\n\n每周三晚上，小 T 晚上在吃猪脚饭，小 C 晚上和妹子在食堂共进晚餐。\n\n每周五晚上，小 T 启动废墟图书馆，小 C 在和妹子聊天。\n\n今天小 T 在睡觉，而小 C 在和妹子玩人赢的跳棋。\n", "description": "给一棵 $n$ 个点的树，边有边权，边权为三元组。第 $i$ 条边的三元组 $e$ 为 $(e_{i,1},e_{i,2},e_{i,3})$。\n\n设函数 $\\operatorname{win}(x,y)$：\n- 若 $x_2<y_2$ 且 $x_3<y_3$ 则 $\\operatorname{win}(x,y)=x_1$。\n- 若 $x_2>y_2$ 且 $x_3>y_3$ 则  $\\operatorname{win}(x,y)=y_1$ \n- 否则 $\\operatorname{win}(x,y)=0$。\n\n其中 $x=(x_1,x_2,x_3),y=(y_1,y_2,y_3)$。\n\n显然 $\\operatorname{win}$ 函数满足交换律。\n\n设一个三元组序列 $\\{a_n\\}$ 的权值为 $\\max_{i=1}^{n-1} \\operatorname{win}(a_i,a_{i+1})$，特别的，$n=1$ 时权值为 $0$。\n\n设一条路径的权值为经过的所有边的权值按顺序组成的序列的权值。\n\n求树的所有无向路径的权值和。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n\\leq 3\\times 10^5$） 表示树的节点数。\n\n之后 $n-1$ 行每行四个整数表示 $u,v,e_{i,1},e_{i,2}$，其中有 $e_{i,3}=i$。\n\n保证 $\\{e_{i,1}\\}$ 互不相同，$\\{e_{i,2}\\}$ 互不相同，值域都为 $[1,n]$。", "outputFormat": "一行一个整数表示答案。", "hint": "2025/10/31 增加 hack 数据一组", "locale": "zh-CN"}}}
{"pid": "P10166", "type": "P", "difficulty": 3, "samples": [["5 5\n1 2 3 4 5 \n1 2\n2 3\n3 4\n1 5\n5 4 ", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "拓扑排序", "洛谷月赛"], "title": "[DTCPC 2024] 环", "background": "环", "description": "给定无重边无自环的有向图 $G$ 和序列 $\\{a_n\\}$，每次可以花费 $a_i+a_j$ 的代价加上一条 $i\\to j$ 的边，试花费最小代价使得可以找到 $k\\geq 2$ 个不同的点 $p_1,p_2,\\dots,p_k$，满足 $\\forall i\\in [1,k]$，都有一条 $p_i\\to p_{i\\bmod k+1}$ 的边。", "inputFormat": "第一行两个整数 $n,m$（$2\\le n\\le 5 \\times 10^5$，$n-1 \\le m \\le 10^6$），表示图的点数和边数。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_n\\}$（$1\\le a_i\\le 10^9$）。\n\n接下来 $m$ 行，每行两个整数 $u,v$（$1\\le u,v\\le n$），表示存在一条有向边 $u\\to v$。", "outputFormat": "一行一个整数表示最小代价。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 环", "background": "环", "description": "给定无重边无自环的有向图 $G$ 和序列 $\\{a_n\\}$，每次可以花费 $a_i+a_j$ 的代价加上一条 $i\\to j$ 的边，试花费最小代价使得可以找到 $k\\geq 2$ 个不同的点 $p_1,p_2,\\dots,p_k$，满足 $\\forall i\\in [1,k]$，都有一条 $p_i\\to p_{i\\bmod k+1}$ 的边。", "inputFormat": "第一行两个整数 $n,m$（$2\\le n\\le 5 \\times 10^5$，$n-1 \\le m \\le 10^6$），表示图的点数和边数。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_n\\}$（$1\\le a_i\\le 10^9$）。\n\n接下来 $m$ 行，每行两个整数 $u,v$（$1\\le u,v\\le n$），表示存在一条有向边 $u\\to v$。", "outputFormat": "一行一个整数表示最小代价。", "hint": "", "locale": "zh-CN"}}}
