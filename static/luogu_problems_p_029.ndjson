{"pid": "P8345", "type": "P", "difficulty": 3, "samples": [["5 20 3\n7 4 2 5 9\n2 1 4\n3 1 2 3\n4 1 4 2 5", "11\n24\n34"], ["10 928698067 3\n331485039 15480787 61584781 252174726 472089427 95998831 252561792 118119945 315548522 24453837\n4 9 1 10 2\n5 10 6 1 5 8\n1 5\n", "1798602551\n2249463436\n0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-6」华胥之梦", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/lkvzvoj9.png)](https://thwiki.cc/%E4%B8%9C%E6%96%B9%E6%B1%82%E9%97%BB%E5%8F%B2%E7%BA%AA/%E4%BE%BF%E7%AC%BA)", "description": "### 简要题意\n\n给定长度为 $n$ 的序列 $a$ 和常数 $c$。构造点数为 $n$ 的有向完全图 $G$ 使得边 $i\\to j$（$i\\neq j$）的长度为 $a_i-2a_j+c$，保证所有边权**非负**。\n\n接下来给出 $q$ 次询问，每次给出一个点集，试找出图 $G$ 的一条最短的简单路径，满足其经过点集中所有点，并输出它的长度。\n\n---\n### 原始题意\n\n梅莉做了一个梦，梦到自己穿越到了幻想乡的迷途竹林之中。醒来之后，她希望能够和莲子一起再次穿越境界，进入幻想乡。\n\n但是，这一次，她看到了 $n$ 个世界，其中，第 $i$ 个世界的结界强度为 $a_i$。而世界之间**两两都有**通道相连，莲子和梅莉便是通过这些通道来进行世界之间的穿梭的。\n\n为了避免错过幻想乡所在的世界，因此她们每到达一个世界，都会穿越结界。莲子和梅莉从第 $i$ 个世界中，通过一条通道，再穿越结界进入第 $j$ 个世界，需要使用的灵能为 $a_i-2a_j+c$（保证所需消耗的灵能非负），其中 $c$ 是一个常数，是梅莉每次穿越结界需要的额外灵能消耗。注意，这也意味着，从第 $i$ 个世界到第 $j$ 个世界，与第 $j$ 个世界穿越到第 $i$ 个世界所消耗的灵能，**可能是不同的**。\n\n为了能够高效地找到幻想乡，她们会对你进行 $q$ 次询问，每次询问的时候会给出一个**集合**，表示她们想要进入的世界。由于世界众多，她们希望能够节省灵能，因此她希望你能求出所有包含这些世界的简单路径（即：同一条世界间的通道不会被走多次）中，消耗灵能值之和最少的路径。你只需告诉她们消耗灵能值之和最少为多少。", "inputFormat": "- 第一行三个整数 $n,c,q$。\n- 第二行 $n$ 个整数表示数列 $a$。\n- 接下来 $q$ 行。每行第一个整数 $|S|$，即集合 $S$ 的大小。后面 $|S|$ 个互不相同的整数表示集合 $S$。", "outputFormat": "- 输出共 $q$ 行，每行一个整数，表示询问的答案。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3r2ucsl.png)\n\n每两个点之间的边权如图所示。为了便于选手观察，边权的颜色与它所对应的边的颜色相同。\n\n对于第一个询问，可以找到路径 $4\\to 1$\n；对于第二个询问，可以找到路径 $3\\to 2\\to 1$；对于第三个询问，可以找到路径 $2\\to 4 \\to 1\\to 5$。可以证明，这三个方案分别是对应询问的最优方案。\n#### 样例 \\#2\n\n该样例符合 $\\textbf{Subtask 1}$ 的限制。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{q\\le} & \\bm{\\sum |S|\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 30 & 10 & 10 & 10 & - &-\\cr\\hline\n2 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{B}&-  \\cr\\hline\n4 & 30 & 10^6 & 10^6 &  10^6& -&1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_i$ 单调递增。\n- 特殊性质 $\\bf B$：$a_i$ 全部相等。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq S_i \\leq n \\leq 10^6, 1\\leq \\sum |S|,q \\leq 10^6, 1 \\le a_i,c \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」华胥之梦", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/lkvzvoj9.png)](https://thwiki.cc/%E4%B8%9C%E6%96%B9%E6%B1%82%E9%97%BB%E5%8F%B2%E7%BA%AA/%E4%BE%BF%E7%AC%BA)", "description": "### 简要题意\n\n给定长度为 $n$ 的序列 $a$ 和常数 $c$。构造点数为 $n$ 的有向完全图 $G$ 使得边 $i\\to j$（$i\\neq j$）的长度为 $a_i-2a_j+c$，保证所有边权**非负**。\n\n接下来给出 $q$ 次询问，每次给出一个点集，试找出图 $G$ 的一条最短的简单路径，满足其经过点集中所有点，并输出它的长度。\n\n---\n### 原始题意\n\n梅莉做了一个梦，梦到自己穿越到了幻想乡的迷途竹林之中。醒来之后，她希望能够和莲子一起再次穿越境界，进入幻想乡。\n\n但是，这一次，她看到了 $n$ 个世界，其中，第 $i$ 个世界的结界强度为 $a_i$。而世界之间**两两都有**通道相连，莲子和梅莉便是通过这些通道来进行世界之间的穿梭的。\n\n为了避免错过幻想乡所在的世界，因此她们每到达一个世界，都会穿越结界。莲子和梅莉从第 $i$ 个世界中，通过一条通道，再穿越结界进入第 $j$ 个世界，需要使用的灵能为 $a_i-2a_j+c$（保证所需消耗的灵能非负），其中 $c$ 是一个常数，是梅莉每次穿越结界需要的额外灵能消耗。注意，这也意味着，从第 $i$ 个世界到第 $j$ 个世界，与第 $j$ 个世界穿越到第 $i$ 个世界所消耗的灵能，**可能是不同的**。\n\n为了能够高效地找到幻想乡，她们会对你进行 $q$ 次询问，每次询问的时候会给出一个**集合**，表示她们想要进入的世界。由于世界众多，她们希望能够节省灵能，因此她希望你能求出所有包含这些世界的简单路径（即：同一条世界间的通道不会被走多次）中，消耗灵能值之和最少的路径。你只需告诉她们消耗灵能值之和最少为多少。", "inputFormat": "- 第一行三个整数 $n,c,q$。\n- 第二行 $n$ 个整数表示数列 $a$。\n- 接下来 $q$ 行。每行第一个整数 $|S|$，即集合 $S$ 的大小。后面 $|S|$ 个互不相同的整数表示集合 $S$。", "outputFormat": "- 输出共 $q$ 行，每行一个整数，表示询问的答案。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3r2ucsl.png)\n\n每两个点之间的边权如图所示。为了便于选手观察，边权的颜色与它所对应的边的颜色相同。\n\n对于第一个询问，可以找到路径 $4\\to 1$\n；对于第二个询问，可以找到路径 $3\\to 2\\to 1$；对于第三个询问，可以找到路径 $2\\to 4 \\to 1\\to 5$。可以证明，这三个方案分别是对应询问的最优方案。\n#### 样例 \\#2\n\n该样例符合 $\\textbf{Subtask 1}$ 的限制。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{q\\le} & \\bm{\\sum |S|\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 30 & 10 & 10 & 10 & - &-\\cr\\hline\n2 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{B}&-  \\cr\\hline\n4 & 30 & 10^6 & 10^6 &  10^6& -&1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_i$ 单调递增。\n- 特殊性质 $\\bf B$：$a_i$ 全部相等。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq S_i \\leq n \\leq 10^6, 1\\leq \\sum |S|,q \\leq 10^6, 1 \\le a_i,c \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8346", "type": "P", "difficulty": 5, "samples": [["1\n5\n6\n1 1\n1 3\n3 2\n2 5\n4 3\n5 4", "Renko"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "图论", "洛谷原创", "O2优化", "二分图", "洛谷月赛"], "title": "「Wdoi-6」最澄澈的空与海", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/hiekh6t5.png)](https://thwiki.cc/%E5%8D%AF%E9%85%89%E4%B8%9C%E6%B5%B7%E9%81%93_%EF%BD%9E_Retrospective_53_minutes.)\n\n广重号载着二人向东飞驰。毫无噪音，毫无摇摆，只是一个劲向东飞驰。在“万景幕”装置之下，尽管是全地下的卯酉东海道，乘客们也能饱览美丽的富士山和太平洋的景色。\n\n但是，从这列卯酉新干线『广重』上看到的极富日本风味的美丽情景，对于梅莉来说，只不过是无趣的视觉刺激罢了。高动态范围的影像也好，极富日本风味的情景也好，都敌不过真正的天空的颜色。\n\n身与华落，心将香飞。即便肉体会像花朵一样终有一天凋落，但心却可以如花香一般飘往远方。\n\n「梅莉，你看，天上的星星呦。」", "description": "### 简要题意\n\n给定 $2n$ 个点、$m$ 条边的[二分图](http://oi-wiki.com/graph/bi-graph/#_1)（可能有重边），左部点与右部点个数相同，判断其完美匹配数量是否**恰好**为 $1$。是则输出 `Renko`，否则输出 `Merry`。\n\n> **注**：完美匹配是指，从边集中选出 $n$ 条边，这些边的顶点组成的点集恰好覆盖了所有的 $2n$ 个点。\n\n---\n### 原始题意\n\n在夜里，莲子与梅莉来到了东京的海边，躺在沙滩上，欣赏着澄澈的天空与大海，数起了天上的星星。\n\n在这些星星之中，有 $n$ 个星星 $\\{a_i\\}$，是莲子先发现的，被称为莲子星；而又有 $n$ 个星星 $\\{b_i\\}$，是梅莉先发现的，被称为梅莉星。由于她们心有灵犀，这两批星星之间**不存在交集**。  \n\n她们发现，有一些莲子星，与一些梅莉星之间恰好存在运动关系。具体而言，这些关系一共有 $m$ 组，每一组关系形如 $(u_i,v_i)$，也就是说第 $u_i$ 颗莲子星与第 $v_i$ 颗梅莉星之间存在运动关系。这些运动关系有可能重复。\n\n这让莲子和梅莉非常好奇。作为专攻超统一物理学的女大学生，莲子认为，如果认为这些星星的运动是**和谐**的，那么她应当能够从这 $m$ 个运动关系中，找出若干个运动关系，使得**每颗**星星**都被**这些运动关系**包含**的同时，不会有一颗星星**被包含在两个**运动关系之中。\n\n然而，梅莉认为，**和谐**的运动可能是不存在的，更何况即使莲子找到了**和谐**的运动，莲子也无法确保这种和谐运动的**唯一性**。两种和谐运动不同，当且仅当选取出的两组运动关系中，存在至少一个运动关系，是不相同的。\n\n因为意见不合，她们于是打情骂俏了一顿。莲子于是记下了她们所看到了星星和她们之间的运动关系，并且找到了已经证明了 P=NP 的你，希望你能告诉她们，最后是谁正确呢？", "inputFormat": "第一行输入一个正整数 $T$ 表示数据组数，对于每一组数据：\n\n- 第一行一个整数 $n$，代表莲子和梅莉每个人所先发现的星星的数量。\n- 第二行一个整数 $m$，代表运动关系的数量。\n- 接下来 $m$ 行，每行两个整数 $u_i,v_i$，表示第 $u_i$ 颗莲子星，与第 $v_i$ 颗梅莉星之间，存在运动关系。", "outputFormat": "- 如果这些星星中存在唯一的和谐运动，输出 `Renko`。\n- 如果这些星星中不存在和谐运动，或者有不唯一的和谐运动方式，输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6skoily9.png)\n\n如图所示，存在唯一的方案：$\\{1\\to 1,2\\to 5,3\\to 2,4\\to 3,5\\to 4\\}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10 & - & - \\cr\\hline\n2 & 20 & 300 & 4\\times 10^4 & - & 1\\cr\\hline\n3 & 20 & 10^5 & 5 \\times 10^5 & \\mathbf{A} & - \\cr\\hline\n4 & 20 & 10^5 & 2 \\times 10^5 & \\mathbf{B} & - \\cr\\hline\n5 & 30& 10^6 & 2\\times 10^6 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证对于第 $i$ 颗莲子星，与第 $i$ 颗梅莉星之间存在运动关系。\n- 特殊性质 $\\mathbf{B}$：保证 $m=2n-1$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le u_i,v_i\\le n \\le 10^6$，$1 \\le m \\le 2 \\times 10^6$，$1 \\leq T \\leq 5$ 且对于每个测试点，$\\sum m \\leq 4 \\times 10^6$。\n\n对于 $\\rm Subtask\\ 5$，时间限制为 $3$ 秒。其它测试点时间限制为 $1$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」最澄澈的空与海", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/hiekh6t5.png)](https://thwiki.cc/%E5%8D%AF%E9%85%89%E4%B8%9C%E6%B5%B7%E9%81%93_%EF%BD%9E_Retrospective_53_minutes.)\n\n广重号载着二人向东飞驰。毫无噪音，毫无摇摆，只是一个劲向东飞驰。在“万景幕”装置之下，尽管是全地下的卯酉东海道，乘客们也能饱览美丽的富士山和太平洋的景色。\n\n但是，从这列卯酉新干线『广重』上看到的极富日本风味的美丽情景，对于梅莉来说，只不过是无趣的视觉刺激罢了。高动态范围的影像也好，极富日本风味的情景也好，都敌不过真正的天空的颜色。\n\n身与华落，心将香飞。即便肉体会像花朵一样终有一天凋落，但心却可以如花香一般飘往远方。\n\n「梅莉，你看，天上的星星呦。」", "description": "### 简要题意\n\n给定 $2n$ 个点、$m$ 条边的[二分图](http://oi-wiki.com/graph/bi-graph/#_1)（可能有重边），左部点与右部点个数相同，判断其完美匹配数量是否**恰好**为 $1$。是则输出 `Renko`，否则输出 `Merry`。\n\n> **注**：完美匹配是指，从边集中选出 $n$ 条边，这些边的顶点组成的点集恰好覆盖了所有的 $2n$ 个点。\n\n---\n### 原始题意\n\n在夜里，莲子与梅莉来到了东京的海边，躺在沙滩上，欣赏着澄澈的天空与大海，数起了天上的星星。\n\n在这些星星之中，有 $n$ 个星星 $\\{a_i\\}$，是莲子先发现的，被称为莲子星；而又有 $n$ 个星星 $\\{b_i\\}$，是梅莉先发现的，被称为梅莉星。由于她们心有灵犀，这两批星星之间**不存在交集**。  \n\n她们发现，有一些莲子星，与一些梅莉星之间恰好存在运动关系。具体而言，这些关系一共有 $m$ 组，每一组关系形如 $(u_i,v_i)$，也就是说第 $u_i$ 颗莲子星与第 $v_i$ 颗梅莉星之间存在运动关系。这些运动关系有可能重复。\n\n这让莲子和梅莉非常好奇。作为专攻超统一物理学的女大学生，莲子认为，如果认为这些星星的运动是**和谐**的，那么她应当能够从这 $m$ 个运动关系中，找出若干个运动关系，使得**每颗**星星**都被**这些运动关系**包含**的同时，不会有一颗星星**被包含在两个**运动关系之中。\n\n然而，梅莉认为，**和谐**的运动可能是不存在的，更何况即使莲子找到了**和谐**的运动，莲子也无法确保这种和谐运动的**唯一性**。两种和谐运动不同，当且仅当选取出的两组运动关系中，存在至少一个运动关系，是不相同的。\n\n因为意见不合，她们于是打情骂俏了一顿。莲子于是记下了她们所看到了星星和她们之间的运动关系，并且找到了已经证明了 P=NP 的你，希望你能告诉她们，最后是谁正确呢？", "inputFormat": "第一行输入一个正整数 $T$ 表示数据组数，对于每一组数据：\n\n- 第一行一个整数 $n$，代表莲子和梅莉每个人所先发现的星星的数量。\n- 第二行一个整数 $m$，代表运动关系的数量。\n- 接下来 $m$ 行，每行两个整数 $u_i,v_i$，表示第 $u_i$ 颗莲子星，与第 $v_i$ 颗梅莉星之间，存在运动关系。", "outputFormat": "- 如果这些星星中存在唯一的和谐运动，输出 `Renko`。\n- 如果这些星星中不存在和谐运动，或者有不唯一的和谐运动方式，输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6skoily9.png)\n\n如图所示，存在唯一的方案：$\\{1\\to 1,2\\to 5,3\\to 2,4\\to 3,5\\to 4\\}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10 & - & - \\cr\\hline\n2 & 20 & 300 & 4\\times 10^4 & - & 1\\cr\\hline\n3 & 20 & 10^5 & 5 \\times 10^5 & \\mathbf{A} & - \\cr\\hline\n4 & 20 & 10^5 & 2 \\times 10^5 & \\mathbf{B} & - \\cr\\hline\n5 & 30& 10^6 & 2\\times 10^6 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证对于第 $i$ 颗莲子星，与第 $i$ 颗梅莉星之间存在运动关系。\n- 特殊性质 $\\mathbf{B}$：保证 $m=2n-1$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le u_i,v_i\\le n \\le 10^6$，$1 \\le m \\le 2 \\times 10^6$，$1 \\leq T \\leq 5$ 且对于每个测试点，$\\sum m \\leq 4 \\times 10^6$。\n\n对于 $\\rm Subtask\\ 5$，时间限制为 $3$ 秒。其它测试点时间限制为 $1$ 秒。", "locale": "zh-CN"}}}
{"pid": "P8347", "type": "P", "difficulty": 6, "samples": [["1\n5\n2 4\n1 2\n3 1\n5 2", "Hifuu"], ["1\n11\n1 2\n1 3\n1 4\n2 5\n2 6\n4 7\n5 8\n5 9\n9 10\n9 11", "Hifuu"], ["1\n2\n1 2", "Luna"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["博弈论", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「Wdoi-6」另一侧的月", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/ikxrpn7c.png)](https://thwiki.cc/%E5%A4%A7%E7%A9%BA%E9%AD%94%E6%9C%AF_%EF%BD%9E_Magical_Astronomy.)\n\n「人类的梦想之一，月面旅行对一般人也终于成为可能！」   \n「从下个月起日本各个旅行公司将开始展开旅行」   \n\n然而，月球的表面，有着将月之都与荒凉的无生命星球隔开的一道结界。只要这道结界存在，人们只能看到石头罢了。\n\n而月面旅行的费用，也绝不是身为大学生的莲子与梅莉二人所能承担的。但是，她们想要探寻的是，被结界所包裹的，有着高度发达文明的月之都。\n\n这，便是另一侧的月。梅莉她看见了。兔子在捣药，身着华美的服装，优雅地在天空中起舞的天女。\n\n「我说莲子啊。如果月面旅行太贵实在不行的话，我们要不要试着想点别的办法去月球呢？」", "description": "### 简要题意\n\n给定 $n$ 个节点的树（保证 $n\\ge 2$），Hifuu 和 Luna 交替操作，前者先手。每回合操作者选择一个节点，将「该节点」和「所有与该节点相连的边」删除，形成若干个连通块，操作者再从中保留一个连通块。如果该回合结束后只剩下一个节点，则该回合的操作者失败，另一个人胜利。问谁存在必胜策略。\n\n-----\n### 原始题意\n\n但是，月之都是有结界保护的，也就是说莲子与梅莉若是想要用一些方式完成月球旅行，势必要突破这层结界。\n\n月之都的结界是由 $n$ 个节点，$n-1$ 条灵能输送渠道构成的连通的结构，其中节点编号为 $1 \\sim n$。结界有一个中枢控制系统，以提防外界的人闯入结界，抵达月之都。莲子和梅莉便需要与这个控制系统进行一些交互，才能进入月之都。\n\n具体而言，莲子梅莉，和中枢控制系统是交替进行操作的，其中莲子梅莉是**先手**。操作方可以任意选择结界上的一个节点，将连向这个节点的**所有**灵能输送渠道全部断绝，同时废弃这个节点。这也就意味着，这会把结界分为若干**组**节点，不同组的节点之间没有灵能输送渠道，而组内的节点由灵能输送渠道相连。在这些节点组中，操作者可以任意保留**一组**节点，将另外所有节点**全部废弃**，即，之后再也无法操作这些被废弃的节点了。\n\n在这样的规则之下，若操作结束后，最后只剩下一个节点，那么操作者失败，另一个人取得胜利。现在莲子和梅莉希望知道，在这样的规则之下，她们是否存在一种必定能够抵达月之都的策略？", "inputFormat": "本题多组数据。第一行输入一个正整数 $T$，表示数据组数。对于每一组数据：\n\n- 第一行有一个正整数 $n$。\n- 接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$。表示一条连接节点 $u_i$ 和 $v_i$ 的双向的灵能输送渠道。", "outputFormat": "对于每一组数据，输出莲子和梅莉是否能够到达月之都。具体而言，若她们存在必定能到达月之都的策略，则输出 $\\texttt{Hifuu}$，否则输出 $\\texttt{Luna}$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zcd72k1.png)\n\n图 $1$ 是结界。图 $2$、图 $3$ 展示了一种莲子和梅莉可能的一种必胜策略：选择节点 $2$，然后保留 $\\{1,3\\}$ 所处的连通块，那么中枢控制系统无论是选择节点 $1$ 还是 $3$ 都必输。\n\n#### 样例 \\#2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djzwnoxz.png)\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 15 & 8 & - & - \\cr\\hline\n2 & 20 & 10^5 & \\mathbf{A} & -\\cr\\hline\n3 & 20 & 10^5 & \\mathbf{B} & - \\cr\\hline\n4 & 15 & 10^3 & - & 1 \\cr\\hline\n5 & 30 & 10^5 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证存在一个点度数为 $n-1$。\n- 特殊性质 $\\mathbf{B}$：保证 $n=2^k-1,k \\in \\N^*$。且树的形态是完全二叉树。\n\n对于 $100\\%$ 的数据：$1 \\leq T \\leq 5$，$2 \\le n \\le 10^5$，输入数据构成一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」另一侧的月", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/ikxrpn7c.png)](https://thwiki.cc/%E5%A4%A7%E7%A9%BA%E9%AD%94%E6%9C%AF_%EF%BD%9E_Magical_Astronomy.)\n\n「人类的梦想之一，月面旅行对一般人也终于成为可能！」   \n「从下个月起日本各个旅行公司将开始展开旅行」   \n\n然而，月球的表面，有着将月之都与荒凉的无生命星球隔开的一道结界。只要这道结界存在，人们只能看到石头罢了。\n\n而月面旅行的费用，也绝不是身为大学生的莲子与梅莉二人所能承担的。但是，她们想要探寻的是，被结界所包裹的，有着高度发达文明的月之都。\n\n这，便是另一侧的月。梅莉她看见了。兔子在捣药，身着华美的服装，优雅地在天空中起舞的天女。\n\n「我说莲子啊。如果月面旅行太贵实在不行的话，我们要不要试着想点别的办法去月球呢？」", "description": "### 简要题意\n\n给定 $n$ 个节点的树（保证 $n\\ge 2$），Hifuu 和 Luna 交替操作，前者先手。每回合操作者选择一个节点，将「该节点」和「所有与该节点相连的边」删除，形成若干个连通块，操作者再从中保留一个连通块。如果该回合结束后只剩下一个节点，则该回合的操作者失败，另一个人胜利。问谁存在必胜策略。\n\n-----\n### 原始题意\n\n但是，月之都是有结界保护的，也就是说莲子与梅莉若是想要用一些方式完成月球旅行，势必要突破这层结界。\n\n月之都的结界是由 $n$ 个节点，$n-1$ 条灵能输送渠道构成的连通的结构，其中节点编号为 $1 \\sim n$。结界有一个中枢控制系统，以提防外界的人闯入结界，抵达月之都。莲子和梅莉便需要与这个控制系统进行一些交互，才能进入月之都。\n\n具体而言，莲子梅莉，和中枢控制系统是交替进行操作的，其中莲子梅莉是**先手**。操作方可以任意选择结界上的一个节点，将连向这个节点的**所有**灵能输送渠道全部断绝，同时废弃这个节点。这也就意味着，这会把结界分为若干**组**节点，不同组的节点之间没有灵能输送渠道，而组内的节点由灵能输送渠道相连。在这些节点组中，操作者可以任意保留**一组**节点，将另外所有节点**全部废弃**，即，之后再也无法操作这些被废弃的节点了。\n\n在这样的规则之下，若操作结束后，最后只剩下一个节点，那么操作者失败，另一个人取得胜利。现在莲子和梅莉希望知道，在这样的规则之下，她们是否存在一种必定能够抵达月之都的策略？", "inputFormat": "本题多组数据。第一行输入一个正整数 $T$，表示数据组数。对于每一组数据：\n\n- 第一行有一个正整数 $n$。\n- 接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$。表示一条连接节点 $u_i$ 和 $v_i$ 的双向的灵能输送渠道。", "outputFormat": "对于每一组数据，输出莲子和梅莉是否能够到达月之都。具体而言，若她们存在必定能到达月之都的策略，则输出 $\\texttt{Hifuu}$，否则输出 $\\texttt{Luna}$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zcd72k1.png)\n\n图 $1$ 是结界。图 $2$、图 $3$ 展示了一种莲子和梅莉可能的一种必胜策略：选择节点 $2$，然后保留 $\\{1,3\\}$ 所处的连通块，那么中枢控制系统无论是选择节点 $1$ 还是 $3$ 都必输。\n\n#### 样例 \\#2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djzwnoxz.png)\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 15 & 8 & - & - \\cr\\hline\n2 & 20 & 10^5 & \\mathbf{A} & -\\cr\\hline\n3 & 20 & 10^5 & \\mathbf{B} & - \\cr\\hline\n4 & 15 & 10^3 & - & 1 \\cr\\hline\n5 & 30 & 10^5 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证存在一个点度数为 $n-1$。\n- 特殊性质 $\\mathbf{B}$：保证 $n=2^k-1,k \\in \\N^*$。且树的形态是完全二叉树。\n\n对于 $100\\%$ 的数据：$1 \\leq T \\leq 5$，$2 \\le n \\le 10^5$，输入数据构成一棵树。", "locale": "zh-CN"}}}
{"pid": "P8348", "type": "P", "difficulty": 7, "samples": [["5\n2 3 7 9 1\n4 9 2 5 1\n4 9 2 5 2\n6 4 1 2 3\n7 9 7 9 7", "yes\nyes\nno\nno\nyes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-6」未知之花魅知之旅", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/glirwa55.png)](https://thwiki.cc/%E6%9C%AA%E7%9F%A5%E4%B9%8B%E8%8A%B1_%E9%AD%85%E7%9F%A5%E4%B9%8B%E6%97%85)\n\n位于太平洋板块和亚欧板块消亡边界的日本，是世界上最多发地震的一个国家之一。2011 年 3 月 11 日，日本时间下午 2 时 46 分 18 秒，一场里氏 9 级的地震袭击了这个国家，随之而来的，是超过 10 米高的巨大海啸。妻离子散，家破人亡，是对这一悲剧性事件的最好描述。\n\n2011 年 5 月，东方 Project 的创作者 ZUN，为地震中的灾民谱写了一张专辑，叫做《未知之花，魅知之旅》，所筹得的善款都被捐赠用于救灾赈灾之中。\n\n-----\n\n而到了近未来的科学世纪，莲子和梅莉在一次聊天之中，又谈论到了这场大地震。这场地震对传统宗教的摧残程度也颇深，数千所神社不同程度遭受到了损毁，也有不少神社的主殿全毁或者半毁。甚至就连外界的博丽神社，也因此被摧毁。\n\n莲子与梅莉决定动身，前往外界的博丽神社，进入幻想乡中，通报这一消息。", "description": "### 简要题意\n\n称一个长度为 $n$ 的正整数数列是「$k$ - 好」的，当且仅当它满足以下条件：  \n\n- 对于 $1< i< n$，满足 $a_{i-1},a_i,a_{i+1}$ 中最大的一个等于其他两个之和。\n- 所有元素都不小于 $k$。\n\n$T$ 组询问，每次询问给定 $(a_0,a_1,x,y,k)$，问是否存在「$k$ - 好」数列（长度不小于 $2$），前两项为 $a_0,a_1$ 并且有相邻两项依次为 $x,y$。\n\n-----\n\n### 原始题意\n\n原本就门可罗雀的博丽神社，在地震之后，更显荒凉。莲子与梅莉紧赶慢赶来到了博丽神社，只看到了倒塌的鸟居。由于神社过于荒凉，莲子和梅莉决定先将神社给好好打扫一番，再进入幻想乡。\n\n具体而言，神社中有若干个物件等待被整理，每个物件都有一个正整数魅力值。可以认为，每种魅力值的物件都有**足够多**个。从被遗落的绘马中，莲子得知了，在被地震摧毁前的博丽神社中的物件，应当具有如下特点：\n\n- 每个物件都有一个**不小于** $k$ 的魅力值。\n- 三个相邻物件的**最大**魅力值，是其他两个物件的魅力值**之和**。\n- 前两个物件的魅力值分别为 $a_0, a_1$。\n- 存在**相邻**的两个物件，魅力值依次为 $x, y$。\n\n莲子和梅莉认为，如果能够从所有物件中选出一些进行排列，并满足如上特点的话，那么这样的神社是**美观**的，不会让她们一进入幻想乡就被灵梦退治。\n\n很显然，由于物件的散佚，莲子和梅莉可能无法通过这些信息来使得神社变得**美观**。莲子和梅莉找到了你，希望你能告诉她们，在这样的规则下是否存在一种让神社变得**美观**的方案。\n\n由于灵梦退治得太狠，她们担心自己的生命安全，因此她们会对你询问 $T$ 次，以确保你不是在糊弄她们。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数，对于每一组数据：\n\n- 每行输入 $5$ 个正整数，以空格隔开，分别为 $a_0,a_1,x,y,k$，含义如题目所述。", "outputFormat": "- 对于每一组数据，输出一行 `yes` 或 `no`，即是否存在一种可以使得神社变得**美观**的方法。", "hint": "### 样例解释\n\n- 针对第一次询问，$a_0=2,a_1=3$，莲子和梅莉可以将物件如下排列构造：$2,3,5,2,7,9,2,11,\\dots$，其中 $a_5=7,a_6=9$，从而存在方案让神社变得美观。\n- 针对第二次询问，$a_0=4,a_1=9$，莲子和梅莉可以将物件如下排列构造：$4,9,5,4,1,3,2,5,3,8,\\dots$，其中 $a_6=2,a_7=5$，从而存在方案让神社变得美观。\n- 针对第三次询问，由于要求 $a_i \\geq k=2$，第二次询问中的方法失效，同时也可以证明不存在让神社变得美观的方法。\n- 针对第四次询问，要求构造出的 $x=1,y=2$ 都小于等于 $3$，从而无法让神社变得美观。\n- 针对第五次询问，显然 $a_0=7,a_1=9$ 就已经符合让神社变得美观的要求了。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a_0,a_1,x,y,k)$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{n\\le }  & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10  & - & - \\cr\\hline\n2 & 20 & 300 & 1000 & \\mathbf{A} & - \\cr\\hline\n3 & 10 & 300 & 10^9 & \\mathbf{B} & - \\cr\\hline\n4 & 20 & 300 & 10^8 & \\mathbf{C} & 1,2 \\cr\\hline\n5 & 40 & 10^5 & 10^9 & - & 3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：每次询问的 $k$ 相同。\n- 特殊性质 $\\mathbf{B}$：$k=1$。\n- 特殊性质 $\\mathbf{C}$：$\\sum n \\leq 10^8$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^9,1 \\leq T \\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」未知之花魅知之旅", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/glirwa55.png)](https://thwiki.cc/%E6%9C%AA%E7%9F%A5%E4%B9%8B%E8%8A%B1_%E9%AD%85%E7%9F%A5%E4%B9%8B%E6%97%85)\n\n位于太平洋板块和亚欧板块消亡边界的日本，是世界上最多发地震的一个国家之一。2011 年 3 月 11 日，日本时间下午 2 时 46 分 18 秒，一场里氏 9 级的地震袭击了这个国家，随之而来的，是超过 10 米高的巨大海啸。妻离子散，家破人亡，是对这一悲剧性事件的最好描述。\n\n2011 年 5 月，东方 Project 的创作者 ZUN，为地震中的灾民谱写了一张专辑，叫做《未知之花，魅知之旅》，所筹得的善款都被捐赠用于救灾赈灾之中。\n\n-----\n\n而到了近未来的科学世纪，莲子和梅莉在一次聊天之中，又谈论到了这场大地震。这场地震对传统宗教的摧残程度也颇深，数千所神社不同程度遭受到了损毁，也有不少神社的主殿全毁或者半毁。甚至就连外界的博丽神社，也因此被摧毁。\n\n莲子与梅莉决定动身，前往外界的博丽神社，进入幻想乡中，通报这一消息。", "description": "### 简要题意\n\n称一个长度为 $n$ 的正整数数列是「$k$ - 好」的，当且仅当它满足以下条件：  \n\n- 对于 $1< i< n$，满足 $a_{i-1},a_i,a_{i+1}$ 中最大的一个等于其他两个之和。\n- 所有元素都不小于 $k$。\n\n$T$ 组询问，每次询问给定 $(a_0,a_1,x,y,k)$，问是否存在「$k$ - 好」数列（长度不小于 $2$），前两项为 $a_0,a_1$ 并且有相邻两项依次为 $x,y$。\n\n-----\n\n### 原始题意\n\n原本就门可罗雀的博丽神社，在地震之后，更显荒凉。莲子与梅莉紧赶慢赶来到了博丽神社，只看到了倒塌的鸟居。由于神社过于荒凉，莲子和梅莉决定先将神社给好好打扫一番，再进入幻想乡。\n\n具体而言，神社中有若干个物件等待被整理，每个物件都有一个正整数魅力值。可以认为，每种魅力值的物件都有**足够多**个。从被遗落的绘马中，莲子得知了，在被地震摧毁前的博丽神社中的物件，应当具有如下特点：\n\n- 每个物件都有一个**不小于** $k$ 的魅力值。\n- 三个相邻物件的**最大**魅力值，是其他两个物件的魅力值**之和**。\n- 前两个物件的魅力值分别为 $a_0, a_1$。\n- 存在**相邻**的两个物件，魅力值依次为 $x, y$。\n\n莲子和梅莉认为，如果能够从所有物件中选出一些进行排列，并满足如上特点的话，那么这样的神社是**美观**的，不会让她们一进入幻想乡就被灵梦退治。\n\n很显然，由于物件的散佚，莲子和梅莉可能无法通过这些信息来使得神社变得**美观**。莲子和梅莉找到了你，希望你能告诉她们，在这样的规则下是否存在一种让神社变得**美观**的方案。\n\n由于灵梦退治得太狠，她们担心自己的生命安全，因此她们会对你询问 $T$ 次，以确保你不是在糊弄她们。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数，对于每一组数据：\n\n- 每行输入 $5$ 个正整数，以空格隔开，分别为 $a_0,a_1,x,y,k$，含义如题目所述。", "outputFormat": "- 对于每一组数据，输出一行 `yes` 或 `no`，即是否存在一种可以使得神社变得**美观**的方法。", "hint": "### 样例解释\n\n- 针对第一次询问，$a_0=2,a_1=3$，莲子和梅莉可以将物件如下排列构造：$2,3,5,2,7,9,2,11,\\dots$，其中 $a_5=7,a_6=9$，从而存在方案让神社变得美观。\n- 针对第二次询问，$a_0=4,a_1=9$，莲子和梅莉可以将物件如下排列构造：$4,9,5,4,1,3,2,5,3,8,\\dots$，其中 $a_6=2,a_7=5$，从而存在方案让神社变得美观。\n- 针对第三次询问，由于要求 $a_i \\geq k=2$，第二次询问中的方法失效，同时也可以证明不存在让神社变得美观的方法。\n- 针对第四次询问，要求构造出的 $x=1,y=2$ 都小于等于 $3$，从而无法让神社变得美观。\n- 针对第五次询问，显然 $a_0=7,a_1=9$ 就已经符合让神社变得美观的要求了。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a_0,a_1,x,y,k)$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{n\\le }  & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10  & - & - \\cr\\hline\n2 & 20 & 300 & 1000 & \\mathbf{A} & - \\cr\\hline\n3 & 10 & 300 & 10^9 & \\mathbf{B} & - \\cr\\hline\n4 & 20 & 300 & 10^8 & \\mathbf{C} & 1,2 \\cr\\hline\n5 & 40 & 10^5 & 10^9 & - & 3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：每次询问的 $k$ 相同。\n- 特殊性质 $\\mathbf{B}$：$k=1$。\n- 特殊性质 $\\mathbf{C}$：$\\sum n \\leq 10^8$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^9,1 \\leq T \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8349", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2 3 1 2\n-2 3 2 -1 2\n1 2\n1 3\n2 3\n", "2\n1\n5\n"], ["见附加样例文件中的 ex_sequence2.in", "见附加样例文件中的 ex_sequence2.out"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 整数序列", "background": "", "description": "小 D 三岁就学会了出题。\n\n小 D 有一个正整数序列 $a_1, a_2, \\dots a_n$ 和一个整数序列 $b_1, b_2, \\dots ,b_n$。\n\n小 D 有 $q$ 次查询，每次给出 $x, y$，构造一个新的序列 $c_1,c_2,\\dots ,c_n$，其中 $c_i=\\begin{cases}1 & a_i=x \\\\-1 & a_i = y \\\\ 0 & \\text{else}\\end{cases}$。\n\n保证 $c_i$ 中至少存在一个 $1$ 与一个 $-1$。他想让你帮他找到一个区间 $[l,r]$，满足 $\\sum\\limits_{i = l}^r c_i = 0$，并使得 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$ 最大，并且区间里的 $c_i$ 不能都为 $0$。你需要输出这个最大值。\n\n注：当条件 $[P]$ 为真时，$[P]=1$，否则 $[P]=0$。", "inputFormat": "第一行有两个整数 $n, q$。   \n第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示 $b_i$。  \n接下来 $q$ 行，每行两个整数 $x,y$，表示一次询问。", "outputFormat": "对于每次询问，输出一行一个整数表示最大的 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$。", "hint": "### 数据规模与约定\n本题共 $20$ 个测试点。\n- 对于测试点 $1,2,3,4$，保证 $n, q ≤5000$。\n- 对于测试点 $5,6$，保证 $a$ 的取值不超过 $500$ 种。\n- 对于测试点 $7,8$，保证 $n \\le 150000$。$q \\le 500000$，$b_i>0$。\n- 对于测试点 $9$，保证 $n \\le 150000$，$q \\le 500000$。\n- 对于测试点 $10,11$，保证 $n \\le 200000$，$q \\le 500000$。\n- 对于测试点 $12,13,14$，保证 $b_i=1$。\n- 对于测试点 $15,16$，保证 $b_i>0$。\n\n对于所有测试点，$1 \\le n \\le 300000$，$1 \\le q \\le 1000000$，$1 \\le a_i \\le n$，$-10^9<b_i \\leq 10^9$，$1 \\leq x, y \\leq n$，$x \\neq y$，保证对于每次查询，$c_i$ 中均至少含有一个 $1$ 与一个 $-1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 整数序列", "background": "", "description": "小 D 三岁就学会了出题。\n\n小 D 有一个正整数序列 $a_1, a_2, \\dots a_n$ 和一个整数序列 $b_1, b_2, \\dots ,b_n$。\n\n小 D 有 $q$ 次查询，每次给出 $x, y$，构造一个新的序列 $c_1,c_2,\\dots ,c_n$，其中 $c_i=\\begin{cases}1 & a_i=x \\\\-1 & a_i = y \\\\ 0 & \\text{else}\\end{cases}$。\n\n保证 $c_i$ 中至少存在一个 $1$ 与一个 $-1$。他想让你帮他找到一个区间 $[l,r]$，满足 $\\sum\\limits_{i = l}^r c_i = 0$，并使得 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$ 最大，并且区间里的 $c_i$ 不能都为 $0$。你需要输出这个最大值。\n\n注：当条件 $[P]$ 为真时，$[P]=1$，否则 $[P]=0$。", "inputFormat": "第一行有两个整数 $n, q$。   \n第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示 $b_i$。  \n接下来 $q$ 行，每行两个整数 $x,y$，表示一次询问。", "outputFormat": "对于每次询问，输出一行一个整数表示最大的 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$。", "hint": "### 数据规模与约定\n本题共 $20$ 个测试点。\n- 对于测试点 $1,2,3,4$，保证 $n, q ≤5000$。\n- 对于测试点 $5,6$，保证 $a$ 的取值不超过 $500$ 种。\n- 对于测试点 $7,8$，保证 $n \\le 150000$。$q \\le 500000$，$b_i>0$。\n- 对于测试点 $9$，保证 $n \\le 150000$，$q \\le 500000$。\n- 对于测试点 $10,11$，保证 $n \\le 200000$，$q \\le 500000$。\n- 对于测试点 $12,13,14$，保证 $b_i=1$。\n- 对于测试点 $15,16$，保证 $b_i>0$。\n\n对于所有测试点，$1 \\le n \\le 300000$，$1 \\le q \\le 1000000$，$1 \\le a_i \\le n$，$-10^9<b_i \\leq 10^9$，$1 \\leq x, y \\leq n$，$x \\neq y$，保证对于每次查询，$c_i$ 中均至少含有一个 $1$ 与一个 $-1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8350", "type": "P", "difficulty": 7, "samples": [["123456 12345 234567 3456789\n", "664963464\n"], ["1234567891 123 1 12345\n", "517823355\n"], ["9876543210987 1284916 83759265 128478129\n", "115945104\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 进制转换", "background": "", "description": "小 D 两岁的时候就学会了进制转换。\n\n所以他想问你，对于所有 $1\\sim n$ 之间的数，这个数在二进制和三进制下的数位和分别是多少。\n\n对于 $i$，记二进制和三进制的数位和分别为 $a(i)$ 和 $b(i)$。比如对于一个数 $i=114$，那么它二进制表示为 $(1110010)_2$，三进制表示为$(11020)_3$，那么 $a(i)$ 和 $b(i)$ 分别为 $4$ 和 $4$。\n\n小 D 想知道你是不是真的能算对 $1$ 到 $n$ 里面所有数进制转换，所以想问你 $\\sum\\limits_{i = 1}^n x^i y^{a(i)} z^{b(i)}$ 是多少，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行四个整数，依次表示 $n, x, y, z$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1,2,3$，$n \\le 10^7$。\n- 对于测试点 $4,5$，$x=y=1$。\n- 对于测试点 $6,7$，$y=1$。\n- 对于测试点 $8,9,10$，$n<10^{10}$。\n- 对于测试点 $11,12,13,14$，$n \\le 5 \\times 10^{11}$。\n\n对于所有测试点，$1 \\le n \\le 10^{13}$，$1 \\le x,y,z <998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 进制转换", "background": "", "description": "小 D 两岁的时候就学会了进制转换。\n\n所以他想问你，对于所有 $1\\sim n$ 之间的数，这个数在二进制和三进制下的数位和分别是多少。\n\n对于 $i$，记二进制和三进制的数位和分别为 $a(i)$ 和 $b(i)$。比如对于一个数 $i=114$，那么它二进制表示为 $(1110010)_2$，三进制表示为$(11020)_3$，那么 $a(i)$ 和 $b(i)$ 分别为 $4$ 和 $4$。\n\n小 D 想知道你是不是真的能算对 $1$ 到 $n$ 里面所有数进制转换，所以想问你 $\\sum\\limits_{i = 1}^n x^i y^{a(i)} z^{b(i)}$ 是多少，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行四个整数，依次表示 $n, x, y, z$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1,2,3$，$n \\le 10^7$。\n- 对于测试点 $4,5$，$x=y=1$。\n- 对于测试点 $6,7$，$y=1$。\n- 对于测试点 $8,9,10$，$n<10^{10}$。\n- 对于测试点 $11,12,13,14$，$n \\le 5 \\times 10^{11}$。\n\n对于所有测试点，$1 \\le n \\le 10^{13}$，$1 \\le x,y,z <998244353$。", "locale": "zh-CN"}}}
{"pid": "P8351", "type": "P", "difficulty": 7, "samples": [["zzz\n", "24\n"], ["abbab\n", "53\n"], ["见附加样例文件中的 ex_substring3.in", "见附加样例文件中的 ex_substring3.out"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 子串统计", "background": "", "description": "小 D 四岁半的时候学会了后缀自动机。\n\n你有一个字符串 $S$，长度为 $n$。初始时，$T_0=S$。每次你可以从删除 $T_i$ 的开头或结尾的字符得到新的字符串 $T_{i + 1}$，经过 $n-1$ 次操作之后，我们会得到只有一个字符的串 $T_{n - 1}$，根据每次删除的选择，一共有 $2^{n - 1}$ 种可能的操作序列。注意，虽然可能会有一次操作，删除开头或结尾的字符得到相同的串，但是我们仍然把它当成两种不一样的操作序列。\n\n对于一个串 $T$，我们记 $\\operatorname{\\textit{occ}}(T)$ 表示 $T$ 在 $S$ 中作为子串的出现次数，比如 $\\operatorname{\\textit{occ}}(\\texttt{aaa},\\texttt{aaaabaaa})=3$。\n\n对于一个操作序列，记它贡献是\n\n$$\\prod_{i = 1}^{n - 1} \\operatorname{\\textit{occ}}(T_i)$$\n\n求出所有操作序列的贡献和，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行一个字符串 $S$，保证只包含小写字符。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1\\sim 5$，满足 $|S| \\le 5000$。\n- 对于测试点 $6\\sim 8$，满足 $S$ 的每个字符均从 $\\texttt a$ 和 $\\texttt b$ 中等概率独立随机生成。\n- 对于测试点 $9\\sim 14$，满足 $|S| \\le 6 \\times 10^4$。\n\n对于所有数据，$1 \\le |S| \\le 10^5$。$S$ 中只有小写英文字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 子串统计", "background": "", "description": "小 D 四岁半的时候学会了后缀自动机。\n\n你有一个字符串 $S$，长度为 $n$。初始时，$T_0=S$。每次你可以从删除 $T_i$ 的开头或结尾的字符得到新的字符串 $T_{i + 1}$，经过 $n-1$ 次操作之后，我们会得到只有一个字符的串 $T_{n - 1}$，根据每次删除的选择，一共有 $2^{n - 1}$ 种可能的操作序列。注意，虽然可能会有一次操作，删除开头或结尾的字符得到相同的串，但是我们仍然把它当成两种不一样的操作序列。\n\n对于一个串 $T$，我们记 $\\operatorname{\\textit{occ}}(T)$ 表示 $T$ 在 $S$ 中作为子串的出现次数，比如 $\\operatorname{\\textit{occ}}(\\texttt{aaa},\\texttt{aaaabaaa})=3$。\n\n对于一个操作序列，记它贡献是\n\n$$\\prod_{i = 1}^{n - 1} \\operatorname{\\textit{occ}}(T_i)$$\n\n求出所有操作序列的贡献和，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行一个字符串 $S$，保证只包含小写字符。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1\\sim 5$，满足 $|S| \\le 5000$。\n- 对于测试点 $6\\sim 8$，满足 $S$ 的每个字符均从 $\\texttt a$ 和 $\\texttt b$ 中等概率独立随机生成。\n- 对于测试点 $9\\sim 14$，满足 $|S| \\le 6 \\times 10^4$。\n\n对于所有数据，$1 \\le |S| \\le 10^5$。$S$ 中只有小写英文字母。", "locale": "zh-CN"}}}
{"pid": "P8352", "type": "P", "difficulty": 6, "samples": [["4 2\n1 2\n2 3\n2 4", "0\n0\n2\n6\n6\n2\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西", "DP 套 DP"], "title": "[SDOI/SXOI2022] 小 N 的独立集", "background": "", "description": "小 N 喜欢出最大权独立集问题。\n\n有一天，他接到了一系列的出题任务，于是他顺手出了一系列最大权独立集问题。\n\n为了同时给这一系列题目造数据，小 N 生成了一个 $n$ 个点的树，并选定了一个正整数 $k$。这样每生成一组数据时，他只需要对于每个点，随机生成一个在 $1 \\sim k$ 之间的整数点权，就可以生成一个新的最大独立集问题。\n\n小 N 把这些题给了他的好朋友，小 Ω。小 Ω 表示，这些题太多太乱了，他打算把所有的 $k^n$ 道题归类处理。一个自然的想法就是按答案（也就是最大权独立集中的点的权值之和）分类，显然这些最大权独立集问题的答案一定在 $1 \\sim nk$ 之间，所以小 Ω 只需要将所有题目按照答案分成 $nk$ 类进行管理就行了。\n\n在小 N 正式开始出题之前，小 Ω 先要算出每一类题目具体有多少道。稍加估计之后小 Ω 很快意识到自己并没有《诗云》中描述的那种存储器，于是断然拒绝了小 N 关于“先把所有可能的题目造好再慢慢分类统计数量”的建议，然后悲剧地意识到自己并不会计算这些数字。\n\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在小 N 出那些最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行， $2$ 个正整数 $n$, $k$。\n\n接下来 $n-1$ 行，每行 $2$ 个正整数 $u_i$, $v_i$，描述一条连接点 $u_i$ 和 $v_i$ 的边，保证这些边构成一棵树。", "outputFormat": "$nk$ 行，每行一个整数，第 $i$ 个整数表示在所有可能的题目中，最大权独立集大小为 $i$ 的有多少道，答案对 $10^9+7$ 取模。\n\n", "hint": "**【样例解释】**\n\n符合题意的最大权独立集题目一共有 $2^4=16$ 道。\n\n可以证明，当点 $1$, $3$, $4$ 的权值均为 $1$ 时，最大权独立集为 $3$ ，这样的题目共有 $2$ 道；点 $1$, $3$, $4$ 的权值恰有一个为 $2$ 时，最大权独立集为 $4$ ，这样的题目共有 $6$ 道；对于最大权独立集为 $5$ 或 $6$ 的情况也是类似的。\n\n**【数据范围】**\n\n对于 $15 \\%$ 的数据， $n \\leq 8$；  \n对于 $30 \\%$ 的数据， $n \\leq 30$；  \n对于 $50 \\%$ 的数据， $n \\leq 100$；  \n对于另外 $10 \\%$ 的数据， $k=1$；  \n对于另外 $15 \\%$ 的数据， $k=2$；  \n对于 $100 \\%$ 的数据， $n \\leq 1000$，$k \\leq 5$，$u_{i}, v_{i} \\leq n$。\n\n**【提示】**\n\n最大权独立集问题是指：选择一个点集，使得任意两个被选择的点都没有边直接相连，并且使得所有被选择的点的点权之和最大。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 小 N 的独立集", "background": "", "description": "小 N 喜欢出最大权独立集问题。\n\n有一天，他接到了一系列的出题任务，于是他顺手出了一系列最大权独立集问题。\n\n为了同时给这一系列题目造数据，小 N 生成了一个 $n$ 个点的树，并选定了一个正整数 $k$。这样每生成一组数据时，他只需要对于每个点，随机生成一个在 $1 \\sim k$ 之间的整数点权，就可以生成一个新的最大独立集问题。\n\n小 N 把这些题给了他的好朋友，小 Ω。小 Ω 表示，这些题太多太乱了，他打算把所有的 $k^n$ 道题归类处理。一个自然的想法就是按答案（也就是最大权独立集中的点的权值之和）分类，显然这些最大权独立集问题的答案一定在 $1 \\sim nk$ 之间，所以小 Ω 只需要将所有题目按照答案分成 $nk$ 类进行管理就行了。\n\n在小 N 正式开始出题之前，小 Ω 先要算出每一类题目具体有多少道。稍加估计之后小 Ω 很快意识到自己并没有《诗云》中描述的那种存储器，于是断然拒绝了小 N 关于“先把所有可能的题目造好再慢慢分类统计数量”的建议，然后悲剧地意识到自己并不会计算这些数字。\n\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在小 N 出那些最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行， $2$ 个正整数 $n$, $k$。\n\n接下来 $n-1$ 行，每行 $2$ 个正整数 $u_i$, $v_i$，描述一条连接点 $u_i$ 和 $v_i$ 的边，保证这些边构成一棵树。", "outputFormat": "$nk$ 行，每行一个整数，第 $i$ 个整数表示在所有可能的题目中，最大权独立集大小为 $i$ 的有多少道，答案对 $10^9+7$ 取模。\n\n", "hint": "**【样例解释】**\n\n符合题意的最大权独立集题目一共有 $2^4=16$ 道。\n\n可以证明，当点 $1$, $3$, $4$ 的权值均为 $1$ 时，最大权独立集为 $3$ ，这样的题目共有 $2$ 道；点 $1$, $3$, $4$ 的权值恰有一个为 $2$ 时，最大权独立集为 $4$ ，这样的题目共有 $6$ 道；对于最大权独立集为 $5$ 或 $6$ 的情况也是类似的。\n\n**【数据范围】**\n\n对于 $15 \\%$ 的数据， $n \\leq 8$；  \n对于 $30 \\%$ 的数据， $n \\leq 30$；  \n对于 $50 \\%$ 的数据， $n \\leq 100$；  \n对于另外 $10 \\%$ 的数据， $k=1$；  \n对于另外 $15 \\%$ 的数据， $k=2$；  \n对于 $100 \\%$ 的数据， $n \\leq 1000$，$k \\leq 5$，$u_{i}, v_{i} \\leq n$。\n\n**【提示】**\n\n最大权独立集问题是指：选择一个点集，使得任意两个被选择的点都没有边直接相连，并且使得所有被选择的点的点权之和最大。\n", "locale": "zh-CN"}}}
{"pid": "P8353", "type": "P", "difficulty": 7, "samples": [["0 10 10 935995202 406705156 7034169 418665824\n1 1 1 1 1 1 1 7 2\n0 10 3 781084039\n1 7 5\n0 897574 897583 833116301\n1 897583 897572\n0 886189 886179 123805569\n1 886182 886190\n1 145142 145136\n1 854537 854538\n1 896515 896525\n0 879409 879412 746499584", "2925376046\n3681387943\n4240586487\n2878147072\n2350755335\n731736886"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["树形数据结构", "各省省选", "2022", "山东", "O2优化", "山西", "树链剖分", "分块"], "title": "[SDOI/SXOI2022] 无处存储", "background": "滥用本题评测将封号。请注意本题非同寻常的时空限制和数据点个数。", "description": "小 Ω 想出一个数据结构题，于是它先造了一棵点有点权的树：\n\n给定一棵大小为 $n$ 的树，编号 $1$ 到 $n$，第 $i \\in [2,n]$  个点的父节点记作 $f_i \\in [1, i-1]$。另外，每个点 $i$ 有一个点权 $a_i$，初始点权由输入确定，具体方式见输入格式。\n\n在数据结构题里面，需要有对应的修改和查询的操作，而树上最简单的两种非平凡操作当然是链加、链求和了。\n\n因此你需要支持以下两种操作：\n\n`0 x y v`：将树上从 $x$ 到 $y$ 的简单路径上的点的权值增加 $v$；\n\n`1 x y`：求树上从 $x$ 到 $y$ 的简单路径上的点的权值和；\n\n出完之后小 Ω 拿给小 N 看，小 N 表示：\n\n……这也太简单了，这不是轻重链剖分模板题吗？！！\n\n小 Ω 于是想到在刚刚接触 OI 的时候了解到的时间换空间的原理，因此他决定本题的空间限制为 **64 MB**。", "inputFormat": "第一行输入三个正整数 $id$，$n$，$q$，其中 $id$ 为子任务编号，和四个非负整数 $A$，$B$，$C$，$a_0$。\n\n$A$，$B$，$C$，$a_0$ 用于生成点权 $a_1, a_2, \\dots, a_n$，具体方法是按照下式进行递推：\n$$a_{i}=\\left(A a_{i-1}^{2}+B a_{i-1}+C\\right) \\bmod 2^{32}$$\n\n接下来一行 $n-1$ 个正整数表示 $f_2, \\dots, f_n$。\n\n接下来 $q$ 行，每行若干整数，形如 $0 \\ x' \\ y' \\ v'$ 或者 $1 \\ x' \\ y'$，表示一次修改或查询。\n\n其中 $x^{\\prime}$，$y^{\\prime}$，$v^{\\prime}$ 用于**强制在线**，实际操作的 $x=x^{\\prime} \\operatorname{xor} P$，$y=y^{\\prime} \\operatorname{xor} P$， $v=v^{\\prime} \\operatorname{xor} P$，其中 $\\operatorname{xor}$ 是 `C/C++` 中的按位异或运算符 `^`，$P = \\text{lastans} \\And \\left(2^{20}-1\\right)$，其中 $\\text{lastans}$ 为上一次询问的答案（没有上次询问则记为 0），$\\And$ 为 `C/C++` 中的按位与运算符 `&`。", "outputFormat": "若干行，依次输出每个询问的答案对 $2^{32}$ 取模后的结果。\n", "hint": "样例 2 ~ 样例 15 数据见下方下载链接。\n\n以上各组样例数据中，每组数据的数据范围符合其输入的子任务编号对应的子任务的数据范围及性质（输入的子任务编号为 0 时除外），并且为了避免可能的常数问题，保证下发样例（子任务编号为 0 时除外）与最终评测所用的该子任务的测试点的数据生成方式强度相同。\n\n| 子任务编号 | 测试点分值 |    $n \\leq$     |    $q \\leq $    | 树的形态 | 特殊性质 |\n| :--------: | :--------: | :-------------: | :-------------: | :------: | :------: |\n|     1      |     2      |     $3000$      |     $3000$      |    C     |    W     |\n|     2      |     2      | $7 \\times 10^6$ | $5 \\times 10^4$ |    A     |    W     |\n|     3      |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     4      |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     5      |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     6      |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     7      |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     8      |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     9      |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     10     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     11     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     12     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     13     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     14     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     15     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     16     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     17     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     18     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     19     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     20     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     21     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     22     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     23     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     24     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     25     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     26     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     27     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     28     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     29     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     30     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     31     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     32     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     33     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     34     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     35     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     36     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     37     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     38     |     3      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     39     |     3      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     40     |     3      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     41     |     3      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     42     |     3      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     43     |     3      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     44     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n\n\n上表“树的形态”一栏中，$\\texttt{A}$ 代表 $\\forall i \\in [2,n]$，$f_i$ 在 $[1,i-1]$ 中均匀随机生成；$\\texttt{B}$ 代表 $\\forall i \\in [2,n]$，$f_i=i-1$；$\\texttt{C}$ 代表树的形态无特殊限制。\n\n上表“特殊性质”一栏中，$\\texttt{X}$ 代表没有修改操作；$\\texttt{Y}$ 代表对于每次修改操作 $x=y$；$\\texttt{Z}$ 代表每次询问操作 $x=y$；$\\texttt{W}$ 代表无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 7 \\times 10^6,1 \\leq q \\leq 5 \\times 10^4,1 \\leq f_i<i,1 \\leq x,y \\leq n,0 \\leq A,B,C,a_0,v \\leq 10^9$。\n\n**【提示】**\n\n关于空间限制的提示与警告：\n\n1. 程序本身可能占用约 2~4MB 的空间（例如包含的 libc 库），请避免使用的空间与空间限制过于接近。\n2. 下发的快速输入模板占用约 1MB 空间，将其中的参数 `S` 调大可以减少对 `fread` 的调用次数（从而加快一点速度），但也会占用更多的空间。如有必要，您可以自由的调整 `S` 的大小，或者使用自己的输入方式。\n3. 需要注意的是，递归调用本身尽管没有显式地占用很多空间，但递归过程中的递归栈仍然可能占用内存（可以简单的理解为程序底层需要记录递归过程的参数和返回值）。例如，传入一个 `int` 类参数、返回值为 `int` 的递归函数递归调用 100 次可能产生等同于定义 200 个 `int` 的空间开销（具体比例系数与编译器实现和优化有关）。由于评测时的“空间限制”实际上是程序运行过程中的内存占用的峰值，因此过深的递归可能导致 MLE。因此请谨慎的使用递归，除非您能确保您的递归深度不会过大。\n4. 由于计算机系统向文件输出的底层实现相关的某些原因（例如在内存中缓存输出），输出本身可能会占用一定空间。对本题的输出规模而言，您可以认为这部分占用的空间不会超过 1MB；但是某些调试输出（例如使用 `cerr` 或者向 `stderr` 输出）可能会产生额外的空间开销（尽管它们本身不会出现在输出文件中，从而不会影响评测的比对结果），因此请确保最终提交的文件不包含过多的调试输出。\n5. 因以上原因超出空间限制的一律后果自负。\n\n本题输入量较大，您可能需要采用高效的输入方式以免因输入效率而超时。出于公平起见，在此提供一份快速输入模板（用法参考下发文件的 fast_input.cpp）。关于该快速输出模板的说明：\n\n1. 下发的快速输入模板占用约 1MB 空间。参数 `S` 越大，速度越快，但占用空间越高，请根据您的实际情况谨慎的确定 `S` 以获得最佳的时空平衡。\n2. 请确保代码中无变量、函数、命名空间等名为 `INPUT_SPACE` 或者 `inn` 以避免命名冲突，否则会导致无法通过编译。同理，某些形如 `#define gc getchar()` 的语句可能会导致和 `INPUT_SPACE` 的内部命名冲突。若发生此类编译错误，您需要更改这些冲突的命名。\n3. 对于本模板，建议从文件进行输入。从键盘输入，可能会产生无法终止的情形，此时需要在输入末尾手动输入作用等同于文件终止符的字符（该字符不能和输入的数字字符直接相邻，建议在新的一行）。例如，在 Windows 下，这个字符是 `Ctrl+Z`。\n4. 对 C 和 C++ 选手，该模板分别需要包含 `stdio.h` 和 `cstdio`（或者 `bits/stdc++.h`）头文件。\n5. 出于效率和码长的考虑，`inn()` 函数仅能用于输入一个无符号 32 位整数类型。\n\n为演示快速输入模板的使用和产生权值的方式，提供一样例程序，见下发文件的 sample.cpp。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 无处存储", "background": "滥用本题评测将封号。请注意本题非同寻常的时空限制和数据点个数。", "description": "小 Ω 想出一个数据结构题，于是它先造了一棵点有点权的树：\n\n给定一棵大小为 $n$ 的树，编号 $1$ 到 $n$，第 $i \\in [2,n]$  个点的父节点记作 $f_i \\in [1, i-1]$。另外，每个点 $i$ 有一个点权 $a_i$，初始点权由输入确定，具体方式见输入格式。\n\n在数据结构题里面，需要有对应的修改和查询的操作，而树上最简单的两种非平凡操作当然是链加、链求和了。\n\n因此你需要支持以下两种操作：\n\n`0 x y v`：将树上从 $x$ 到 $y$ 的简单路径上的点的权值增加 $v$；\n\n`1 x y`：求树上从 $x$ 到 $y$ 的简单路径上的点的权值和；\n\n出完之后小 Ω 拿给小 N 看，小 N 表示：\n\n……这也太简单了，这不是轻重链剖分模板题吗？！！\n\n小 Ω 于是想到在刚刚接触 OI 的时候了解到的时间换空间的原理，因此他决定本题的空间限制为 **64 MB**。", "inputFormat": "第一行输入三个正整数 $id$，$n$，$q$，其中 $id$ 为子任务编号，和四个非负整数 $A$，$B$，$C$，$a_0$。\n\n$A$，$B$，$C$，$a_0$ 用于生成点权 $a_1, a_2, \\dots, a_n$，具体方法是按照下式进行递推：\n$$a_{i}=\\left(A a_{i-1}^{2}+B a_{i-1}+C\\right) \\bmod 2^{32}$$\n\n接下来一行 $n-1$ 个正整数表示 $f_2, \\dots, f_n$。\n\n接下来 $q$ 行，每行若干整数，形如 $0 \\ x' \\ y' \\ v'$ 或者 $1 \\ x' \\ y'$，表示一次修改或查询。\n\n其中 $x^{\\prime}$，$y^{\\prime}$，$v^{\\prime}$ 用于**强制在线**，实际操作的 $x=x^{\\prime} \\operatorname{xor} P$，$y=y^{\\prime} \\operatorname{xor} P$， $v=v^{\\prime} \\operatorname{xor} P$，其中 $\\operatorname{xor}$ 是 `C/C++` 中的按位异或运算符 `^`，$P = \\text{lastans} \\And \\left(2^{20}-1\\right)$，其中 $\\text{lastans}$ 为上一次询问的答案（没有上次询问则记为 0），$\\And$ 为 `C/C++` 中的按位与运算符 `&`。", "outputFormat": "若干行，依次输出每个询问的答案对 $2^{32}$ 取模后的结果。\n", "hint": "样例 2 ~ 样例 15 数据见下方下载链接。\n\n以上各组样例数据中，每组数据的数据范围符合其输入的子任务编号对应的子任务的数据范围及性质（输入的子任务编号为 0 时除外），并且为了避免可能的常数问题，保证下发样例（子任务编号为 0 时除外）与最终评测所用的该子任务的测试点的数据生成方式强度相同。\n\n| 子任务编号 | 测试点分值 |    $n \\leq$     |    $q \\leq $    | 树的形态 | 特殊性质 |\n| :--------: | :--------: | :-------------: | :-------------: | :------: | :------: |\n|     1      |     2      |     $3000$      |     $3000$      |    C     |    W     |\n|     2      |     2      | $7 \\times 10^6$ | $5 \\times 10^4$ |    A     |    W     |\n|     3      |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     4      |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     5      |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     6      |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     7      |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     8      |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     9      |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     10     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     11     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     12     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     13     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     14     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     15     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     16     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     17     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     18     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     19     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     20     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     21     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     22     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     23     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     24     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     25     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     26     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     27     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     28     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     29     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     30     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     31     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     32     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     33     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     34     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     35     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     36     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     37     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     38     |     3      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     39     |     3      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     40     |     3      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     41     |     3      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     42     |     3      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     43     |     3      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     44     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n\n\n上表“树的形态”一栏中，$\\texttt{A}$ 代表 $\\forall i \\in [2,n]$，$f_i$ 在 $[1,i-1]$ 中均匀随机生成；$\\texttt{B}$ 代表 $\\forall i \\in [2,n]$，$f_i=i-1$；$\\texttt{C}$ 代表树的形态无特殊限制。\n\n上表“特殊性质”一栏中，$\\texttt{X}$ 代表没有修改操作；$\\texttt{Y}$ 代表对于每次修改操作 $x=y$；$\\texttt{Z}$ 代表每次询问操作 $x=y$；$\\texttt{W}$ 代表无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 7 \\times 10^6,1 \\leq q \\leq 5 \\times 10^4,1 \\leq f_i<i,1 \\leq x,y \\leq n,0 \\leq A,B,C,a_0,v \\leq 10^9$。\n\n**【提示】**\n\n关于空间限制的提示与警告：\n\n1. 程序本身可能占用约 2~4MB 的空间（例如包含的 libc 库），请避免使用的空间与空间限制过于接近。\n2. 下发的快速输入模板占用约 1MB 空间，将其中的参数 `S` 调大可以减少对 `fread` 的调用次数（从而加快一点速度），但也会占用更多的空间。如有必要，您可以自由的调整 `S` 的大小，或者使用自己的输入方式。\n3. 需要注意的是，递归调用本身尽管没有显式地占用很多空间，但递归过程中的递归栈仍然可能占用内存（可以简单的理解为程序底层需要记录递归过程的参数和返回值）。例如，传入一个 `int` 类参数、返回值为 `int` 的递归函数递归调用 100 次可能产生等同于定义 200 个 `int` 的空间开销（具体比例系数与编译器实现和优化有关）。由于评测时的“空间限制”实际上是程序运行过程中的内存占用的峰值，因此过深的递归可能导致 MLE。因此请谨慎的使用递归，除非您能确保您的递归深度不会过大。\n4. 由于计算机系统向文件输出的底层实现相关的某些原因（例如在内存中缓存输出），输出本身可能会占用一定空间。对本题的输出规模而言，您可以认为这部分占用的空间不会超过 1MB；但是某些调试输出（例如使用 `cerr` 或者向 `stderr` 输出）可能会产生额外的空间开销（尽管它们本身不会出现在输出文件中，从而不会影响评测的比对结果），因此请确保最终提交的文件不包含过多的调试输出。\n5. 因以上原因超出空间限制的一律后果自负。\n\n本题输入量较大，您可能需要采用高效的输入方式以免因输入效率而超时。出于公平起见，在此提供一份快速输入模板（用法参考下发文件的 fast_input.cpp）。关于该快速输出模板的说明：\n\n1. 下发的快速输入模板占用约 1MB 空间。参数 `S` 越大，速度越快，但占用空间越高，请根据您的实际情况谨慎的确定 `S` 以获得最佳的时空平衡。\n2. 请确保代码中无变量、函数、命名空间等名为 `INPUT_SPACE` 或者 `inn` 以避免命名冲突，否则会导致无法通过编译。同理，某些形如 `#define gc getchar()` 的语句可能会导致和 `INPUT_SPACE` 的内部命名冲突。若发生此类编译错误，您需要更改这些冲突的命名。\n3. 对于本模板，建议从文件进行输入。从键盘输入，可能会产生无法终止的情形，此时需要在输入末尾手动输入作用等同于文件终止符的字符（该字符不能和输入的数字字符直接相邻，建议在新的一行）。例如，在 Windows 下，这个字符是 `Ctrl+Z`。\n4. 对 C 和 C++ 选手，该模板分别需要包含 `stdio.h` 和 `cstdio`（或者 `bits/stdc++.h`）头文件。\n5. 出于效率和码长的考虑，`inn()` 函数仅能用于输入一个无符号 32 位整数类型。\n\n为演示快速输入模板的使用和产生权值的方式，提供一样例程序，见下发文件的 sample.cpp。", "locale": "zh-CN"}}}
{"pid": "P8354", "type": "P", "difficulty": 7, "samples": [["3\n2 2 1", "5"], ["5\n3 1 4 2 5", "359895"], ["8\n4 2 1 8 3 7 3 1", "577596154\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 多边形", "background": "", "description": "给定一个正 $n$ 边形，除了这个正 $n$ 边形的 $n$ 个顶点，顺时针第 $i$ 条边上还有额外的 $a_i-1$ 个顶点等分这条线段，也就是说，第 $i$ 条边被顶点分成了长度相等的 $a_i$ 段。\n\n你可以在顶点之间连接一些线段，但是连接完线段之后，图中的任意两条新添加的线段只能在端点处有交，此外，新的线段也不应该与多边形的边有所重合。\n\n我们称添加了若干线段之后得到的图为一个三角剖分，当且仅当多边形内的每个面都是一个三角形，注意，三角形的边上可以有原来凸多边形边上的顶点。\n\n给定这样一个凸多边形，其有多少种满足上述条件的三角剖分? 你只需要计算方案数模 $998244353$ 的答案就行。", "inputFormat": "第一行输入一个正整数 $n$，表示凸多边形的边数。\n\n第二行输入 $n$ 个正整数，其中第 $i$ 个正整数为 $a_i$，含义如题目描述中所示。", "outputFormat": "输出一行一个整数，表示满足题目要求的三角剖分的方案数模 $998244353$ 的结果。\n\n", "hint": "**【样例 1 解释】**\n\n5 种方案如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9hip98o.png)\n\n**【数据范围】**\n\n对于 $10 \\%$ 的数据，保证 $\\sum a_{i} \\leq 300$。  \n对于 $50 \\%$ 的数据，保证 $\\sum a_{i} \\leq 5000$。  \n对于 $100 \\%$ 的数据，保证 $n \\geq 3$，$a_{i} \\geq 1$， $\\sum a_{i} \\leq 5 \\times 10^{5}$。\n\n注：本题无大样例下载", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 多边形", "background": "", "description": "给定一个正 $n$ 边形，除了这个正 $n$ 边形的 $n$ 个顶点，顺时针第 $i$ 条边上还有额外的 $a_i-1$ 个顶点等分这条线段，也就是说，第 $i$ 条边被顶点分成了长度相等的 $a_i$ 段。\n\n你可以在顶点之间连接一些线段，但是连接完线段之后，图中的任意两条新添加的线段只能在端点处有交，此外，新的线段也不应该与多边形的边有所重合。\n\n我们称添加了若干线段之后得到的图为一个三角剖分，当且仅当多边形内的每个面都是一个三角形，注意，三角形的边上可以有原来凸多边形边上的顶点。\n\n给定这样一个凸多边形，其有多少种满足上述条件的三角剖分? 你只需要计算方案数模 $998244353$ 的答案就行。", "inputFormat": "第一行输入一个正整数 $n$，表示凸多边形的边数。\n\n第二行输入 $n$ 个正整数，其中第 $i$ 个正整数为 $a_i$，含义如题目描述中所示。", "outputFormat": "输出一行一个整数，表示满足题目要求的三角剖分的方案数模 $998244353$ 的结果。\n\n", "hint": "**【样例 1 解释】**\n\n5 种方案如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9hip98o.png)\n\n**【数据范围】**\n\n对于 $10 \\%$ 的数据，保证 $\\sum a_{i} \\leq 300$。  \n对于 $50 \\%$ 的数据，保证 $\\sum a_{i} \\leq 5000$。  \n对于 $100 \\%$ 的数据，保证 $n \\geq 3$，$a_{i} \\geq 1$， $\\sum a_{i} \\leq 5 \\times 10^{5}$。\n\n注：本题无大样例下载", "locale": "zh-CN"}}}
{"pid": "P8355", "type": "P", "difficulty": 1, "samples": [["3\n(()", "2"], ["2\n()", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "O2优化"], "title": "「WHOI-1」ymh  是 AK 哥！！！", "background": "$2077$ 年春。$15$ 岁的 miku 正在对着你谷发呆，突然看到一个奇怪的问题，你能帮帮他么？？\n\n----\n\n你要先学会一些定义。\n\n\n我们约定一个字符串下标从 $1$ 开始，$s[l,r]$ 表示 $s_ls_{l+1}\\dots s_r$ 拼接成的一个字符串。\n\n---\n\n定义括号匹配串如下：\n\n- 空串是括号匹配串。\n- 如果 $A$ 是括号匹配串，则 $(A)$ 是括号匹配串。\n- 如果 $A,B$ 是括号匹配串，则 $AB$ 是括号匹配串。\n\n---\n\n括号匹配前缀长度是指最大的 $k$ 使得 $s[1,k]$ 是一个括号匹配串。\n\n比如：\n- $s=\\text{(())(()}$ 时括号匹配前缀长度是 $4$。\n- $s=\\text{()()()(()))(}$ 时括号匹配前缀长度是 $10$。", "description": "给你一个括号串 $s$。定义一次操作是交换他们当中相邻的两个字符。\n\n你的任务是找出若干次操作后 $s$ 的括号匹配前缀长度最大值。\n", "inputFormat": "一行一个正整数 $n$ 表示字符串长度。\n\n接下来一行一个字符串表示 $s$。", "outputFormat": "一行一个自然数表示答案。", "hint": "\n\n**本题采用 $\\texttt{Subtask}$ 计分方式，只有通过该 $\\texttt{Subtask}$ 的所有测试点才能得到该点的分数。**\n\n| $\\texttt{Subtask}$ 编号 | 特殊限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | 只含左括号或只含右括号 | 2 |\n| 2 | $n \\leq 2$ | 3 |\n| 3 | $n \\leq 10$ | 10 |\n| 4 | $n \\leq 1000$ | 20 |\n| 5 | 无| 65 |\n\n对于 $100\\%$ 的数据，保证 $ 1\\leq n\\leq10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-1」ymh  是 AK 哥！！！", "background": "$2077$ 年春。$15$ 岁的 miku 正在对着你谷发呆，突然看到一个奇怪的问题，你能帮帮他么？？\n\n----\n\n你要先学会一些定义。\n\n\n我们约定一个字符串下标从 $1$ 开始，$s[l,r]$ 表示 $s_ls_{l+1}\\dots s_r$ 拼接成的一个字符串。\n\n---\n\n定义括号匹配串如下：\n\n- 空串是括号匹配串。\n- 如果 $A$ 是括号匹配串，则 $(A)$ 是括号匹配串。\n- 如果 $A,B$ 是括号匹配串，则 $AB$ 是括号匹配串。\n\n---\n\n括号匹配前缀长度是指最大的 $k$ 使得 $s[1,k]$ 是一个括号匹配串。\n\n比如：\n- $s=\\text{(())(()}$ 时括号匹配前缀长度是 $4$。\n- $s=\\text{()()()(()))(}$ 时括号匹配前缀长度是 $10$。", "description": "给你一个括号串 $s$。定义一次操作是交换他们当中相邻的两个字符。\n\n你的任务是找出若干次操作后 $s$ 的括号匹配前缀长度最大值。\n", "inputFormat": "一行一个正整数 $n$ 表示字符串长度。\n\n接下来一行一个字符串表示 $s$。", "outputFormat": "一行一个自然数表示答案。", "hint": "\n\n**本题采用 $\\texttt{Subtask}$ 计分方式，只有通过该 $\\texttt{Subtask}$ 的所有测试点才能得到该点的分数。**\n\n| $\\texttt{Subtask}$ 编号 | 特殊限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | 只含左括号或只含右括号 | 2 |\n| 2 | $n \\leq 2$ | 3 |\n| 3 | $n \\leq 10$ | 10 |\n| 4 | $n \\leq 1000$ | 20 |\n| 5 | 无| 65 |\n\n对于 $100\\%$ 的数据，保证 $ 1\\leq n\\leq10^6$。", "locale": "zh-CN"}}}
{"pid": "P8356", "type": "P", "difficulty": 3, "samples": [["3\n3 3 1 2\n11 45 14 19\n9876 10 114514 191981", "2\n1688\n426554662\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "O2优化"], "title": "「WHOI-1」数列计数", "background": "> 不再拥有，数列陪伴我。\n\n", "description": "这种数列满足下面这一条神奇的性质：\n\n- $a_0=0$。\n- $\\forall i\\in[1,n]$ 均有 $a_i=a_{i-1}+x$ 或者 $a_i=a_{i-1}+y$。\n- $\\forall i\\in[1,n],p \\nmid a_i$。\n\n求这样的 $\\{a\\}_0^{n}$ 的数量。答案对 $10^9+7$ 取模。\n\n两个数列不同，当且仅当他们有一个下标存储的元素不同。", "inputFormat": "**一个输入文件包含多组数据。**\n\n第一行一个正整数 $T$ 表示测试点数目。\n\n接下来 $T$ 行表示测试点。对于每组测试点，一行四个正整数，表示 $n,p,x,y$。", "outputFormat": "$T$ 行，每行一个自然数表示该测试点的答案。", "hint": "样例 #1：\n\n这样的 $a$ 有 $[0,1,2,4],[0,2,4,5]$。\n\n样例 #2、#3：\n\n本来可爱的 Otm 已经写好了上万页的样例解释了，但是更可爱的 miku 把它删掉了所以 Otm 不想再写一遍了。\n\n---\n\n**本题采用 $\\texttt{Subtask}$ 计分方式，只有通过该 $\\texttt{Subtask}$ 的所有测试点才能得到该点的分数。**\n\n| $\\texttt{Subtask}$ 编号 | 特殊限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $\\sum n\\leq20$ | 10 |\n| 2 | $p\\leq10^3$ | 30 |\n| 3 | $xy,p$ 互质 | 10 |\n| 4 | 无 | 50 |\n\n对于所有测试数据，$1\\leq T\\leq10^3,1\\leq\\sum n\\leq10^4, 1\\leq x,y,p\\leq10^9$，输入均为正整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-1」数列计数", "background": "> 不再拥有，数列陪伴我。\n\n", "description": "这种数列满足下面这一条神奇的性质：\n\n- $a_0=0$。\n- $\\forall i\\in[1,n]$ 均有 $a_i=a_{i-1}+x$ 或者 $a_i=a_{i-1}+y$。\n- $\\forall i\\in[1,n],p \\nmid a_i$。\n\n求这样的 $\\{a\\}_0^{n}$ 的数量。答案对 $10^9+7$ 取模。\n\n两个数列不同，当且仅当他们有一个下标存储的元素不同。", "inputFormat": "**一个输入文件包含多组数据。**\n\n第一行一个正整数 $T$ 表示测试点数目。\n\n接下来 $T$ 行表示测试点。对于每组测试点，一行四个正整数，表示 $n,p,x,y$。", "outputFormat": "$T$ 行，每行一个自然数表示该测试点的答案。", "hint": "样例 #1：\n\n这样的 $a$ 有 $[0,1,2,4],[0,2,4,5]$。\n\n样例 #2、#3：\n\n本来可爱的 Otm 已经写好了上万页的样例解释了，但是更可爱的 miku 把它删掉了所以 Otm 不想再写一遍了。\n\n---\n\n**本题采用 $\\texttt{Subtask}$ 计分方式，只有通过该 $\\texttt{Subtask}$ 的所有测试点才能得到该点的分数。**\n\n| $\\texttt{Subtask}$ 编号 | 特殊限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $\\sum n\\leq20$ | 10 |\n| 2 | $p\\leq10^3$ | 30 |\n| 3 | $xy,p$ 互质 | 10 |\n| 4 | 无 | 50 |\n\n对于所有测试数据，$1\\leq T\\leq10^3,1\\leq\\sum n\\leq10^4, 1\\leq x,y,p\\leq10^9$，输入均为正整数。", "locale": "zh-CN"}}}
{"pid": "P8357", "type": "P", "difficulty": 5, "samples": [["20 1 3", "51 2\n4 1"], ["1000 10 100", "13570 4\n72 12 3 1"]], "limits": {"time": [1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数论", "Special Judge", "O2优化", "记忆化搜索"], "title": "「WHOI-1」Derives", "background": "你的钱里面混进去了一个假币。", "description": "你有 $n$ 枚硬币。经过准确的测量，你发现一定有一枚是假币，假币的质量与其他硬币不同。你想要找出这枚假币。\n\n第 $i$ 轮，假设你当时有 $x_i$ 枚硬币，你会把当前钱堆所有钱分配到若干组，每组 $k_i$ 个，最终剩下的再单独分一组。每个硬币你要拿起来需要 $a$ 秒，那么这将会花费你 $ax_i$ 秒的时间。接下来，你会称量每一组，称量每组需要 $b$ 秒，所以这将会花费你 $b\\cdot\\lceil\\frac{x_i}{k_i}\\rceil$ 秒的时间。由于只有一枚假币，那么只会有一堆的质量与正常的质量不同。**在称量所有堆之后**，你将会选出与正常质量不同的那一堆，并进入下一轮，让 $x_{i+1}=k_i$。一直执行，直到 $x_i=1$。假设进行了 $m$ 轮，那么花费时间 $f=\\sum\\limits_{i=1}^{m}{(ax_i+b\\cdot\\lceil\\frac{x_i}{k_i}\\rceil)}$\n\n请问，你在最差情况下（**即每轮选出不正常的都是 $k_i$ 个一堆的**）最少需要多长时间找出那枚假币？", "inputFormat": "一行三个正整数，代表 $n,a,b$。", "outputFormat": "第一行两个个非负整数 $f,m$，代表最小可能的时间和你的方案的轮数。\n\n接下来一行 $m$ 个正整数，代表 $k_i$。", "hint": "**说明**\n\n**你需要尽量使得花费的时间更少。**\n\n本题采用 Special Judge。\n\n首先，你输出的答案一定要合法，也就是你输出的答案要与下面的选择方法符合，否则将获得 $0$ 分。\n\n接下来，评测机会对你的输出进行判断。如果你输出的答案合法且与正确答案的差 $\\le9$，那么你将获得 $(10-d)\\times100\\%$ 的分数。例如，如果你输出的答案与正确答案的差为 $4$，那么你将获得 $60\\%$ 的分数。如果你输出的答案等于正确答案，你将获得 $100\\%$ 的分数。请不要输出多余的数字或少输出。\n\n**数据范围**\n\n- $\\text{subtask 1(10pts)}:$ $1\\le n\\le2000$。\n- $\\text{subtask 2(20pts)}:$ $1\\le n\\le75000$。\n- $\\text{subtask 3(30pts)}:$ $1\\le n\\le10^7$。\n- $\\text{subtask 4(40pts)}:$ $1\\le n\\le10^9$。\n\n对于所有数据，满足 $0<a,b\\le10^9$。\n\n**样例说明**\n\n对于第一个样例，进行两轮。$x_1=20,k_1=4,x_2=4,k_2=1$。答案 $f=20+15+4+12=51$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-1」Derives", "background": "你的钱里面混进去了一个假币。", "description": "你有 $n$ 枚硬币。经过准确的测量，你发现一定有一枚是假币，假币的质量与其他硬币不同。你想要找出这枚假币。\n\n第 $i$ 轮，假设你当时有 $x_i$ 枚硬币，你会把当前钱堆所有钱分配到若干组，每组 $k_i$ 个，最终剩下的再单独分一组。每个硬币你要拿起来需要 $a$ 秒，那么这将会花费你 $ax_i$ 秒的时间。接下来，你会称量每一组，称量每组需要 $b$ 秒，所以这将会花费你 $b\\cdot\\lceil\\frac{x_i}{k_i}\\rceil$ 秒的时间。由于只有一枚假币，那么只会有一堆的质量与正常的质量不同。**在称量所有堆之后**，你将会选出与正常质量不同的那一堆，并进入下一轮，让 $x_{i+1}=k_i$。一直执行，直到 $x_i=1$。假设进行了 $m$ 轮，那么花费时间 $f=\\sum\\limits_{i=1}^{m}{(ax_i+b\\cdot\\lceil\\frac{x_i}{k_i}\\rceil)}$\n\n请问，你在最差情况下（**即每轮选出不正常的都是 $k_i$ 个一堆的**）最少需要多长时间找出那枚假币？", "inputFormat": "一行三个正整数，代表 $n,a,b$。", "outputFormat": "第一行两个个非负整数 $f,m$，代表最小可能的时间和你的方案的轮数。\n\n接下来一行 $m$ 个正整数，代表 $k_i$。", "hint": "**说明**\n\n**你需要尽量使得花费的时间更少。**\n\n本题采用 Special Judge。\n\n首先，你输出的答案一定要合法，也就是你输出的答案要与下面的选择方法符合，否则将获得 $0$ 分。\n\n接下来，评测机会对你的输出进行判断。如果你输出的答案合法且与正确答案的差 $\\le9$，那么你将获得 $(10-d)\\times100\\%$ 的分数。例如，如果你输出的答案与正确答案的差为 $4$，那么你将获得 $60\\%$ 的分数。如果你输出的答案等于正确答案，你将获得 $100\\%$ 的分数。请不要输出多余的数字或少输出。\n\n**数据范围**\n\n- $\\text{subtask 1(10pts)}:$ $1\\le n\\le2000$。\n- $\\text{subtask 2(20pts)}:$ $1\\le n\\le75000$。\n- $\\text{subtask 3(30pts)}:$ $1\\le n\\le10^7$。\n- $\\text{subtask 4(40pts)}:$ $1\\le n\\le10^9$。\n\n对于所有数据，满足 $0<a,b\\le10^9$。\n\n**样例说明**\n\n对于第一个样例，进行两轮。$x_1=20,k_1=4,x_2=4,k_2=1$。答案 $f=20+15+4+12=51$。", "locale": "zh-CN"}}}
{"pid": "P8358", "type": "P", "difficulty": 6, "samples": [["6 5 4 3\n1 3 4 6 10 10\n1 2 7 8 5 9", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「WHOI-1」HanawoTori", "background": "春天到了，花园里的花竞相开放。樱花、梅花、梨花、桃花、牡丹都开放了。\n\n你需要在花园里采花。\n\n日文版题面：[JP 版リンク](https://www.luogu.com.cn/problem/T239022)。\n\n如果你只会 `cout << 1` 这样骗分，建议不要浪费时间在这里。", "description": "这个花园是由位于最左边的两个 $\\texttt{start}$ 格子加上 $2 \\times n$ 个方格组成的一个长列。如下图，$n=6$：\n\n\n![](https://i.bmp.ovh/imgs/2022/04/07/405bb9192e6cf6d9.png)\n\n注意 $n$ 并不包括最左边的两个 $\\texttt{start}$ 格子。每个格子里面都有一棵花，花的美丽程度（下称“**美丽值**”）用一个整数表示，在上图中已经写在格子里了。\n\n\n从**最左边任选**一个 $\\texttt{start}$ 格子开始，每个时刻，你可以走到当前格子**右**、**右上**或**右下**的格子（只要不走出界），并采走里面的花。当走到花园**尽头**时结束。\n\n然后你需要把采到的花按照美丽程度**升序排列**，组成一串花。记**排序过后的**花串中第 $i$ 朵花的美丽值为 $f_i$，那么这串花的“和谐度”$F$ 等于：\n\n$$F = \\min_{i=1}^{n-1} \\begin{cases} k \\times |f_i-f_{i+1}| && |f_i-f_{i+1}| \\bmod  b = a \\\\ |f_i-f_{i+1}| && |f_i-f_{i+1}| \\bmod  b  \\not = a\\\\\\end{cases}$$\n\n现在知道了花园中每个格子内的花的美丽值，你需要计算出可能的**最大** $F$。即在所有可能的行走方案中，可能出现的最大的 $F$ 值。", "inputFormat": "第一行四个整数，代表 $n,a,b,k$；\n\n接下来一行 $n$ 个整数，第 $i$ 个整数代表第 $1$ 行第 $i$ 格内花的美丽值;\n\n接下来一行 $n$ 个整数，第 $i$ 个整数代表第 $2$ 行第 $i$ 格内花的美丽值;\n", "outputFormat": "一行一个整数，表示所求答案。\n", "hint": "**应要求，本题提供一个大样例，链接在下方。**\n\n样例 #1 解释：\n\n一条路径如下图：![](https://i.bmp.ovh/imgs/2022/04/07/84cfe7c13c0d33c1.png)\n\n按时间顺序，得到的花的美丽值为 $\\{1,2,4,6,5,10\\}$；排序后为 $\\{1,2,4,5,6,10\\}$，可以计算出 $F=1$，这是能得到最大的 $F$ 了。\n\n如果您无法写出能够得到满分的程序，可参考如下数据范围获取部分分值：\n\n| 编号 | 特殊限制 | 分值 | 时限 | \n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $n \\leq 30$ | 10 | 1s |\n| 2 | $n\\leq 100$ | 10 | 1s |\n| 3 | $n \\leq 2500$ | 40 | 1s |\n| 4 | $n \\leq 100000$ | 40 | 2s |\n\n对于所有数据，$0 \\leq f_i,k \\leq 10^{8},1  \\leq b < a \\leq 10^8,n \\ge 2$。\n\n提示：\n\n- 可能需要注意常数因子带来的效率差异。\n- 本题存在 $O(n \\log V)$ 的做法。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-1」HanawoTori", "background": "春天到了，花园里的花竞相开放。樱花、梅花、梨花、桃花、牡丹都开放了。\n\n你需要在花园里采花。\n\n日文版题面：[JP 版リンク](https://www.luogu.com.cn/problem/T239022)。\n\n如果你只会 `cout << 1` 这样骗分，建议不要浪费时间在这里。", "description": "这个花园是由位于最左边的两个 $\\texttt{start}$ 格子加上 $2 \\times n$ 个方格组成的一个长列。如下图，$n=6$：\n\n\n![](https://i.bmp.ovh/imgs/2022/04/07/405bb9192e6cf6d9.png)\n\n注意 $n$ 并不包括最左边的两个 $\\texttt{start}$ 格子。每个格子里面都有一棵花，花的美丽程度（下称“**美丽值**”）用一个整数表示，在上图中已经写在格子里了。\n\n\n从**最左边任选**一个 $\\texttt{start}$ 格子开始，每个时刻，你可以走到当前格子**右**、**右上**或**右下**的格子（只要不走出界），并采走里面的花。当走到花园**尽头**时结束。\n\n然后你需要把采到的花按照美丽程度**升序排列**，组成一串花。记**排序过后的**花串中第 $i$ 朵花的美丽值为 $f_i$，那么这串花的“和谐度”$F$ 等于：\n\n$$F = \\min_{i=1}^{n-1} \\begin{cases} k \\times |f_i-f_{i+1}| && |f_i-f_{i+1}| \\bmod  b = a \\\\ |f_i-f_{i+1}| && |f_i-f_{i+1}| \\bmod  b  \\not = a\\\\\\end{cases}$$\n\n现在知道了花园中每个格子内的花的美丽值，你需要计算出可能的**最大** $F$。即在所有可能的行走方案中，可能出现的最大的 $F$ 值。", "inputFormat": "第一行四个整数，代表 $n,a,b,k$；\n\n接下来一行 $n$ 个整数，第 $i$ 个整数代表第 $1$ 行第 $i$ 格内花的美丽值;\n\n接下来一行 $n$ 个整数，第 $i$ 个整数代表第 $2$ 行第 $i$ 格内花的美丽值;\n", "outputFormat": "一行一个整数，表示所求答案。\n", "hint": "**应要求，本题提供一个大样例，链接在下方。**\n\n样例 #1 解释：\n\n一条路径如下图：![](https://i.bmp.ovh/imgs/2022/04/07/84cfe7c13c0d33c1.png)\n\n按时间顺序，得到的花的美丽值为 $\\{1,2,4,6,5,10\\}$；排序后为 $\\{1,2,4,5,6,10\\}$，可以计算出 $F=1$，这是能得到最大的 $F$ 了。\n\n如果您无法写出能够得到满分的程序，可参考如下数据范围获取部分分值：\n\n| 编号 | 特殊限制 | 分值 | 时限 | \n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $n \\leq 30$ | 10 | 1s |\n| 2 | $n\\leq 100$ | 10 | 1s |\n| 3 | $n \\leq 2500$ | 40 | 1s |\n| 4 | $n \\leq 100000$ | 40 | 2s |\n\n对于所有数据，$0 \\leq f_i,k \\leq 10^{8},1  \\leq b < a \\leq 10^8,n \\ge 2$。\n\n提示：\n\n- 可能需要注意常数因子带来的效率差异。\n- 本题存在 $O(n \\log V)$ 的做法。\n", "locale": "zh-CN"}}}
{"pid": "P8359", "type": "P", "difficulty": 4, "samples": [["6 6 8\n1 2\n2 3\n2 4\n1 4\n2 5\n1 6\nGC\nDELETE 5\nDELETE 3\nGC\nDELETE 1\nGC\nDELETE 2\nGC\n1 2 3 4 5 6\n", "149\n"], ["样例 2 见附件 garbage2.in\n本组数据满足测试点 6 的限制。", "样例 2 见附件 garbage2.ans"], ["样例 3 见附件 garbage3.in\n本组数据满足测试点 11 的限制。", "样例 3 见附件 garbage3.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "各省省选", "2022", "O2优化", "陕西"], "title": "[SNOI2022] 垃圾回收", "background": "", "description": "通常的情况下，编程语言在管理内存时进行如下的选择：\n\n- 让用户进行手动内存管理（C、C++、Rust 等），这会收获很好的性能，但是给用户提供了很大的编程负担。\n- 使用垃圾回收系统（Java、Go 等），这需要维护一个运行时系统，并且在内存使用和程序性能方面造成了许多不可预测的负担。\n\n尽管存在许多的问题，目前最通用的自动化内存管理手段始终为 Tracing Garbage Collector。这种做法的最基础的思路是维护对象间的引用关系，形成一张图，每次回收时通过扫描引用关系推导出已经无法被访问到的对象，释放它们占用的内存。而这种传统的做法最大的问题在于维护引用链需要造成很大的开销，并且随着维护的对象越多，扫描的代价也会越大。\n\n小 L 是一个喜欢思考的女孩子，她发现维护 Garbage Collector 是一件非常复杂的事情，于是她决定考虑一个更简单的模型（注意它与任何现实中的 GC 规则可能是完全不同的！）。\n\n\n对于一个 $n$ 个点 $m$ 条边的无向图，没有重边自环，点和边均从 $1$ 开始标号。其中每个节点代表一个占用了一定内存的对象，每条边对应一个引用关系（注意这里的引用关系是**无向**的），程序从第 $0$ 秒开始运行，在第 $q + 1$ 秒结束运行。对于 $i = 1, 2, 3, \\dots, q$ 的每个时刻 $i$ 发生以下两种操作之一：\n\n- DELETE $i$，删除边 $(x_i,y_i)$，保证不会删除已经被删除的边。\n- GC， 进行一次内存回收，即杀死所有从起点出发不能访问到的点，释放它们占用的内存。（注意这里对节点的删除不会删除与这些点相连的边）\n\n你可以认为这些操作是被瞬间执行完成的，在所有操作执行后，也就是第 $q + 1$ 秒，程序结束，删除所有剩余的节点（包括 $1$ 号点）。\n\n第 $i$ 个点占用的内存为 $a_i$，现在请你求出 $\\sum_{i = 1}^{n} a_i \\cdot \\mathit{alive}_i$，这里 $\\mathit{alive}_i$ 表示第 $i$ 个点存活的时间，在第 $0$ 秒，所有节点都是存活的。", "inputFormat": "输入的第一行是三个正整数 $n, m, q$，分别表示对象的个数，引用关系的个数，操作的个数。\n\n接下来的 $m$ 行每行两个正整数 $x_i, y_i$ 表示第 $i$ 条引用关系的两个端点。\n\n接下来的 $q$ 行每行为以下两种形式之一，第 $i$ 行表示在第 $i$ 秒发生的操作：\n\n- 字符串 DELETE 和正整数 $x$，含义见【题目描述】。\n- 字符串 GC，含义见【题目描述】。\n\n接下来的一行有 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示每个对象占用的内存大小。 ", "outputFormat": "输出一行一个整数表示答案，含义见【题目描述】。", "hint": "**【样例 1 解释】**\n\n在第 $4$ 秒时，节点 $5$ 被删除。\n\n在第 $6$ 秒时，节点 $2, 3$ 被删除。\n\n在第 $9$ 秒时，节点 $1, 4, 6$ 被删除。\n\n答案即 $5 \\times 4 + (2 + 3) \\times 6 + (1 + 4 + 6) \\times 9 = 20 + 30 + 99 = 149$。\n\n**【数据规模与约定】**\n\n对于全部数据，$1 \\leq n, m, q \\leq 4 \\times 10^5$，$1 \\leq a_i \\leq 10^8$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 | $n$ | $m$ | $q$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 2$ | $\\leq 500$ | $\\leq 500$ | $\\leq 500$ |   |\n| $3 \\sim 5$ | $\\leq 3000$ | $\\leq 3000$ | $\\leq 3000$ |  |\n| $6 \\sim 10$ | $\\leq 5000$ | $\\leq 5000$ | $\\leq 5000$ |  |\n| $11 \\sim 14$ | $\\leq 2 \\times 10^5$ | $n-1$ | $\\leq 2 \\times 10^5$ | 保证一开始图是一棵树 |\n| $15 \\sim 16$ | $\\leq 2 \\times 10^5$ | $\\leq 2 \\times 10^5$ | $\\leq 2 \\times 10^5$ |  |\n| $17 \\sim 20$ | $\\leq 4 \\times 10^5$ | $\\leq 4 \\times 10^5$ | $\\leq 4 \\times 10^5$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2022] 垃圾回收", "background": "", "description": "通常的情况下，编程语言在管理内存时进行如下的选择：\n\n- 让用户进行手动内存管理（C、C++、Rust 等），这会收获很好的性能，但是给用户提供了很大的编程负担。\n- 使用垃圾回收系统（Java、Go 等），这需要维护一个运行时系统，并且在内存使用和程序性能方面造成了许多不可预测的负担。\n\n尽管存在许多的问题，目前最通用的自动化内存管理手段始终为 Tracing Garbage Collector。这种做法的最基础的思路是维护对象间的引用关系，形成一张图，每次回收时通过扫描引用关系推导出已经无法被访问到的对象，释放它们占用的内存。而这种传统的做法最大的问题在于维护引用链需要造成很大的开销，并且随着维护的对象越多，扫描的代价也会越大。\n\n小 L 是一个喜欢思考的女孩子，她发现维护 Garbage Collector 是一件非常复杂的事情，于是她决定考虑一个更简单的模型（注意它与任何现实中的 GC 规则可能是完全不同的！）。\n\n\n对于一个 $n$ 个点 $m$ 条边的无向图，没有重边自环，点和边均从 $1$ 开始标号。其中每个节点代表一个占用了一定内存的对象，每条边对应一个引用关系（注意这里的引用关系是**无向**的），程序从第 $0$ 秒开始运行，在第 $q + 1$ 秒结束运行。对于 $i = 1, 2, 3, \\dots, q$ 的每个时刻 $i$ 发生以下两种操作之一：\n\n- DELETE $i$，删除边 $(x_i,y_i)$，保证不会删除已经被删除的边。\n- GC， 进行一次内存回收，即杀死所有从起点出发不能访问到的点，释放它们占用的内存。（注意这里对节点的删除不会删除与这些点相连的边）\n\n你可以认为这些操作是被瞬间执行完成的，在所有操作执行后，也就是第 $q + 1$ 秒，程序结束，删除所有剩余的节点（包括 $1$ 号点）。\n\n第 $i$ 个点占用的内存为 $a_i$，现在请你求出 $\\sum_{i = 1}^{n} a_i \\cdot \\mathit{alive}_i$，这里 $\\mathit{alive}_i$ 表示第 $i$ 个点存活的时间，在第 $0$ 秒，所有节点都是存活的。", "inputFormat": "输入的第一行是三个正整数 $n, m, q$，分别表示对象的个数，引用关系的个数，操作的个数。\n\n接下来的 $m$ 行每行两个正整数 $x_i, y_i$ 表示第 $i$ 条引用关系的两个端点。\n\n接下来的 $q$ 行每行为以下两种形式之一，第 $i$ 行表示在第 $i$ 秒发生的操作：\n\n- 字符串 DELETE 和正整数 $x$，含义见【题目描述】。\n- 字符串 GC，含义见【题目描述】。\n\n接下来的一行有 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示每个对象占用的内存大小。 ", "outputFormat": "输出一行一个整数表示答案，含义见【题目描述】。", "hint": "**【样例 1 解释】**\n\n在第 $4$ 秒时，节点 $5$ 被删除。\n\n在第 $6$ 秒时，节点 $2, 3$ 被删除。\n\n在第 $9$ 秒时，节点 $1, 4, 6$ 被删除。\n\n答案即 $5 \\times 4 + (2 + 3) \\times 6 + (1 + 4 + 6) \\times 9 = 20 + 30 + 99 = 149$。\n\n**【数据规模与约定】**\n\n对于全部数据，$1 \\leq n, m, q \\leq 4 \\times 10^5$，$1 \\leq a_i \\leq 10^8$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 | $n$ | $m$ | $q$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 2$ | $\\leq 500$ | $\\leq 500$ | $\\leq 500$ |   |\n| $3 \\sim 5$ | $\\leq 3000$ | $\\leq 3000$ | $\\leq 3000$ |  |\n| $6 \\sim 10$ | $\\leq 5000$ | $\\leq 5000$ | $\\leq 5000$ |  |\n| $11 \\sim 14$ | $\\leq 2 \\times 10^5$ | $n-1$ | $\\leq 2 \\times 10^5$ | 保证一开始图是一棵树 |\n| $15 \\sim 16$ | $\\leq 2 \\times 10^5$ | $\\leq 2 \\times 10^5$ | $\\leq 2 \\times 10^5$ |  |\n| $17 \\sim 20$ | $\\leq 4 \\times 10^5$ | $\\leq 4 \\times 10^5$ | $\\leq 4 \\times 10^5$ |  |", "locale": "zh-CN"}}}
{"pid": "P8360", "type": "P", "difficulty": 6, "samples": [["5 7 3\n1 2 4 8 16\n1 2 3 2 3\n2 2 4 2 32\n3 1 4\n1 1 5 3 1\n2 2 5 1 64\n3 2 4\n2 1 3 3 128\n3 3 5\n", "79\n142\n188\n"], ["样例 2 见附件 military2.in\n本组数据满足测试点 4 的限制。", "样例 2 见附件 military2.ans"], ["样例 3 见附件 military3.in\n本组数据满足测试点 14 的限制。", "样例 3 见附件 military3.ans"], ["样例 4 见附件 military4.in\n本组数据满足测试点 18 的限制。", "样例 4 见附件 military4.ans"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "各省省选", "2022", "O2优化", "陕西", "分块"], "title": "[SNOI2022] 军队", "background": "", "description": "R 国的历史非常悠久。\n\nR 国有 $n$ 个城市，国内有 $C$ 个党派，分别记为 $1,2,\\dots,C$。由于 R 国的版图非常长，这 $n$ 个城市的位置可以近似为坐标轴上的 $n$ 个点。在历史的最初，记载了第 $i$ 个城市归属党派 $c_i$，城中有数量为 $a_i$ 的军队。\n\nR 国的历史上，经常发生以下三种事件：\n\n1. 党派 $y$ 进行了一次游说，使城市 $l$ 到城市 $r$ 的所有归属党派 $x$ 的城市全部归属了 $y$。\n\n2. 党派 $x$ 进行了一次征兵，使城市 $l$ 到城市 $r$ 的所有归属党派 $x$ 的城市中的军队数量增加了 $v$。\n\n3. 城市 $l$ 到城市 $r$ 之间的所有城市爆发了战争。这场战争的规模可以描述为两地之间的所有城市中的军队数量之和。注意战争不一定发生在不同党派之间，归属同一个党派的一些城市内部也可能发生内战。由于 R 国的医护系统足够先进，战争不会造成军队数量的减少。\n\n小 N 是一个喜欢历史的女孩子，最近她想整理一下 R 国的战争史，特别是每场战争的规模。但是由于 R 国的历史实在太长了，她用纸和笔进行运算实在力不从心。于是她找到了你，希望你写一个程序，统计出 R 国历史上所有战争的规模。", "inputFormat": "输入的第一行是三个正整数 $n,q,C$，分别表示城市的个数，事件的个数，和 R 国国内党派的个数。\n\n接下来一行有 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示每个城市内初始的军队数。\n\n接下来一行有 $n$ 个正整数 $c_1,c_2,\\dots,c_n$，表示每个城市初始归属的党派。\n\n接下来 $q$ 行，每行 $3$ 到 $5$ 个正整数，表示一次事件：\n\n第一个正整数 $\\mathit{op}$ 表示事件的类型。$\\mathit{op}=1,2,3$ 分别表示【题目描述】中所述的游说，征兵和战争事件。\n\n对于每个游说事件，接下来有 $4$ 个正整数 $l,r,x,y$，意义见【题目描述】。\n\n对于每个征兵事件，接下来有 $4$ 个正整数 $l,r,x,v$，意义见【题目描述】。\n\n对于每个战争事件，接下来有 $2$ 个正整数 $l,r$，意义见【题目描述】。", "outputFormat": "对于每个战争事件，输出一行一个整数，表示此次战争的规模。", "hint": "**【样例 1 解释】**\n\n最初，五个城市的军队数量分别为 $1, 2, 4, 8, 16$，归属的党派分别为 $1, 2, 3, 2, 3$。\n\n发生的事件依次为：\n- 党派 $2$ 尝试在城市 $2, 3, 4$ 征兵，归属党派 $2$ 的城市 $2, 4$ 各增加了 $32$ 军队。\n- 城市 $1$ 和 $4$ 之间的所有城市爆发了战争，规模为 $1 + 34 + 4 + 40 = 79$。\n- 党派 $1$ 在城市 $1, 2, 3, 4, 5$ 进行了一次游说，使得原本归属党派 $3$ 的城市 $3, 5$ 归属了党派 $1$。\n- 党派 $1$ 尝试在城市 $2, 3, 4, 5$ 征兵，归属党派 $1$ 的城市 $3, 5$ 各增加了 $64$ 军队。\n- 城市 $2$ 和 $4$ 之间的所有城市爆发了战争，规模为 $34 + 68 + 40 = 142$。\n- 党派 $3$ 尝试在城市 $1, 2, 3$ 征兵，但是党派 $3$ 现在不拥有任何城市，因此并没有成功征兵。\n- 城市 $3$ 和 $5$ 之间的所有城市爆发了战争，规模为 $68 + 40 + 80 = 188$。\n\n因此你的程序应该依次输出 $79, 142, 188$。\n\n**【数据规模与约定】**\n\n对于全部数据，$1 \\leq n, q\\leq 2.5 \\times 10^5$，$1 \\leq a_i, v \\leq 10^8$，$1 \\leq c_i, x, y \\leq C$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 |    $n,q\\leq $     |     $C\\leq $      |               特殊约定               |\n| :--------: | :---------------: | :---------------: | :----------------------------------: |\n|    $1$     |       $20$        |       $20$        |                                      |\n|    $2$     |       $50$        |       $50$        |                                      |\n|    $3$     |       $300$       |       $300$       |                                      |\n|    $4$     |      $5000$       |      $5000$       |                                      |\n|    $5$     |      $10^5$       |       $10$        |                                      |\n|    $6$     | $1.5 \\times 10^5$ |       $10$        |                                      |\n|    $7$     |  $2 \\times 10^5$  |       $10$        |                                      |\n|    $8$     | $2.5 \\times 10^5$ |       $10$        |                                      |\n|    $9$     | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ |    对于所有操作，保证 $l=1,r=n$。    |\n|    $10$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |    对于所有操作，保证 $l=1,r=n$。    |\n|    $11$    | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ | 对于所有操作 $1,2$，保证 $l=1,r=n$。 |\n|    $12$    |  $2 \\times 10^5$  |  $2 \\times 10^5$  | 对于所有操作 $1,2$，保证 $l=1,r=n$。 |\n|    $13$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ | 对于所有操作 $1,2$，保证 $l=1,r=n$。 |\n|    $14$    | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ |         保证不存在操作 $1$。         |\n|    $15$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |         保证不存在操作 $1$。         |\n|    $16$    |      $10^5$       |      $10^5$       |                                      |\n|    $17$    | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ |                                      |\n|    $18$    |  $2 \\times 10^5$  |  $2\\times 10^5$   |                                      |\n|    $19$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |                                      |\n|    $20$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |                                      |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2022] 军队", "background": "", "description": "R 国的历史非常悠久。\n\nR 国有 $n$ 个城市，国内有 $C$ 个党派，分别记为 $1,2,\\dots,C$。由于 R 国的版图非常长，这 $n$ 个城市的位置可以近似为坐标轴上的 $n$ 个点。在历史的最初，记载了第 $i$ 个城市归属党派 $c_i$，城中有数量为 $a_i$ 的军队。\n\nR 国的历史上，经常发生以下三种事件：\n\n1. 党派 $y$ 进行了一次游说，使城市 $l$ 到城市 $r$ 的所有归属党派 $x$ 的城市全部归属了 $y$。\n\n2. 党派 $x$ 进行了一次征兵，使城市 $l$ 到城市 $r$ 的所有归属党派 $x$ 的城市中的军队数量增加了 $v$。\n\n3. 城市 $l$ 到城市 $r$ 之间的所有城市爆发了战争。这场战争的规模可以描述为两地之间的所有城市中的军队数量之和。注意战争不一定发生在不同党派之间，归属同一个党派的一些城市内部也可能发生内战。由于 R 国的医护系统足够先进，战争不会造成军队数量的减少。\n\n小 N 是一个喜欢历史的女孩子，最近她想整理一下 R 国的战争史，特别是每场战争的规模。但是由于 R 国的历史实在太长了，她用纸和笔进行运算实在力不从心。于是她找到了你，希望你写一个程序，统计出 R 国历史上所有战争的规模。", "inputFormat": "输入的第一行是三个正整数 $n,q,C$，分别表示城市的个数，事件的个数，和 R 国国内党派的个数。\n\n接下来一行有 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示每个城市内初始的军队数。\n\n接下来一行有 $n$ 个正整数 $c_1,c_2,\\dots,c_n$，表示每个城市初始归属的党派。\n\n接下来 $q$ 行，每行 $3$ 到 $5$ 个正整数，表示一次事件：\n\n第一个正整数 $\\mathit{op}$ 表示事件的类型。$\\mathit{op}=1,2,3$ 分别表示【题目描述】中所述的游说，征兵和战争事件。\n\n对于每个游说事件，接下来有 $4$ 个正整数 $l,r,x,y$，意义见【题目描述】。\n\n对于每个征兵事件，接下来有 $4$ 个正整数 $l,r,x,v$，意义见【题目描述】。\n\n对于每个战争事件，接下来有 $2$ 个正整数 $l,r$，意义见【题目描述】。", "outputFormat": "对于每个战争事件，输出一行一个整数，表示此次战争的规模。", "hint": "**【样例 1 解释】**\n\n最初，五个城市的军队数量分别为 $1, 2, 4, 8, 16$，归属的党派分别为 $1, 2, 3, 2, 3$。\n\n发生的事件依次为：\n- 党派 $2$ 尝试在城市 $2, 3, 4$ 征兵，归属党派 $2$ 的城市 $2, 4$ 各增加了 $32$ 军队。\n- 城市 $1$ 和 $4$ 之间的所有城市爆发了战争，规模为 $1 + 34 + 4 + 40 = 79$。\n- 党派 $1$ 在城市 $1, 2, 3, 4, 5$ 进行了一次游说，使得原本归属党派 $3$ 的城市 $3, 5$ 归属了党派 $1$。\n- 党派 $1$ 尝试在城市 $2, 3, 4, 5$ 征兵，归属党派 $1$ 的城市 $3, 5$ 各增加了 $64$ 军队。\n- 城市 $2$ 和 $4$ 之间的所有城市爆发了战争，规模为 $34 + 68 + 40 = 142$。\n- 党派 $3$ 尝试在城市 $1, 2, 3$ 征兵，但是党派 $3$ 现在不拥有任何城市，因此并没有成功征兵。\n- 城市 $3$ 和 $5$ 之间的所有城市爆发了战争，规模为 $68 + 40 + 80 = 188$。\n\n因此你的程序应该依次输出 $79, 142, 188$。\n\n**【数据规模与约定】**\n\n对于全部数据，$1 \\leq n, q\\leq 2.5 \\times 10^5$，$1 \\leq a_i, v \\leq 10^8$，$1 \\leq c_i, x, y \\leq C$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 |    $n,q\\leq $     |     $C\\leq $      |               特殊约定               |\n| :--------: | :---------------: | :---------------: | :----------------------------------: |\n|    $1$     |       $20$        |       $20$        |                                      |\n|    $2$     |       $50$        |       $50$        |                                      |\n|    $3$     |       $300$       |       $300$       |                                      |\n|    $4$     |      $5000$       |      $5000$       |                                      |\n|    $5$     |      $10^5$       |       $10$        |                                      |\n|    $6$     | $1.5 \\times 10^5$ |       $10$        |                                      |\n|    $7$     |  $2 \\times 10^5$  |       $10$        |                                      |\n|    $8$     | $2.5 \\times 10^5$ |       $10$        |                                      |\n|    $9$     | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ |    对于所有操作，保证 $l=1,r=n$。    |\n|    $10$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |    对于所有操作，保证 $l=1,r=n$。    |\n|    $11$    | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ | 对于所有操作 $1,2$，保证 $l=1,r=n$。 |\n|    $12$    |  $2 \\times 10^5$  |  $2 \\times 10^5$  | 对于所有操作 $1,2$，保证 $l=1,r=n$。 |\n|    $13$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ | 对于所有操作 $1,2$，保证 $l=1,r=n$。 |\n|    $14$    | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ |         保证不存在操作 $1$。         |\n|    $15$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |         保证不存在操作 $1$。         |\n|    $16$    |      $10^5$       |      $10^5$       |                                      |\n|    $17$    | $1.5 \\times 10^5$ | $1.5 \\times 10^5$ |                                      |\n|    $18$    |  $2 \\times 10^5$  |  $2\\times 10^5$   |                                      |\n|    $19$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |                                      |\n|    $20$    | $2.5 \\times 10^5$ | $2.5 \\times 10^5$ |                                      |", "locale": "zh-CN"}}}
{"pid": "P8361", "type": "P", "difficulty": 6, "samples": [["3\n6 10\n3 3\n6 7\n", "1 4 2 8 5 7\n-1\n0 3 5 3 1 6"], ["样例 2 见附件 double2.in\n本组数据满足测试点 3 的限制。", "样例 2 见附件 double2.ans"], ["样例 3 见附件 double3.in\n本组数据满足测试点 17 的限制。", "样例 3 见附件 double3.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "Special Judge", "O2优化", "陕西"], "title": "[SNOI2022] 倍增", "background": "", "description": "小 Z 是一个喜欢编程的女孩子。\n\n这天，她在做一道编程题的时候偶然发现了一个神奇的整数 $142857$。\n\n$142857 \\times 2 = 285714$，而 $285714$ 的所有数位恰好是 $142857$ 的一个排列。\n\n她很好奇，有没有更大的满足这种性质的整数。\n\n她写了一个搜索，发现了一些更大的有趣的数：\n\n$26835741 \\times 2 = 53671482$\n\n$0987312654 \\times 2 = 1974625308$\n\n$\\dots$\n\n她不满足于解决十进制下这样的问题，于是她想知道，是否在 $B$ 进制下存在一个 $n$ 位正整数 $x$，满足 $2x$ 的所有数位在 $B$ 进制下是 $x$ 的所有数位的一个排列。\n\n由于她讨厌数字 $0$，因此她还要求对于任意 $1 \\leq i \\leq n$，$x$ 和 $2x$ 在 $B$ 进制下的第 $i$ 位不能同时为 $0$。", "inputFormat": "**输入包含多组数据。**\n\n输入的第一行是一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，第 $i$ 行包含两个正整数 $n$ 和 $B$，表示第 $i$ 组数据。", "outputFormat": "对于每组数据，输出一行。\n\n若本组数据有解，按照从高位到低位的顺序输出 $n$ 个非负整数，表示你找到的答案在 $B$ 进制下的值。\n\n否则只需要输出一个数 $-1$。", "hint": "**【样例 1 解释】**\n\n- 第一组数据的解释参见【题目描述】。\n- 对于第二组数据，可以通过枚举所有的 $n$ 位 $B$ 进制数说明一定不能找到这样的正整数。\n- 对于第三组数据，$2x$ 的 $7$ 进制表示为 $103635_{(7)}$，因此这是一个满足题意的答案。\n\n注意此样例的答案文件仅表明了一种可能的合法答案，不表明答案文件恰好对应标准程序的输出。\n\n**【样例 2/3 解释】**\n\n注意此样例的答案文件仅表明了一种可能的合法答案，不表明答案文件恰好对应标准程序的输出。\n\n**【提示】**\n\n由于答案可能不唯一，我们下发了校验器 `checker.cpp` 和库文件 `testlib.h`。\n\n可以使用以下命令编译 `checker.cpp`：\n\n```\ng++ -o checker checker.cpp -O2 -std=c++11\n```\n\n将 `checker.cpp` 编译得到可执行文件 `checker` 后你可以使用以下方式测试你的答案：\n\n`checker <input> <output> <answer>`：利用选手目录下的 `double/double*.ans` 可以用来检验你的答案在样例测试点 `double/double*.in` 的正确性。\n\n`checker <input> <output> <output>`：会检查你的所有有解输出是否符合题目要求。注意以此种方式测试的时候，输出无解总会被报告为合法，因为在此种运行方式下我们只会检查你报告的所有解。\n\n**请选手注意多组数据之间的清空问题。**\n\n**【数据规模与约定】**\n\n对于全部数据，$1 \\leq T \\leq 10^4$，$2 \\leq \\sum B \\leq 2 \\times 10^5$，$1 \\leq \\sum n \\leq 2 \\times 10^5$，$n \\geq 1$，$B \\geq 2$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 |    $n \\leq$     |    $ B \\leq$    | $T \\leq$ | 特殊约定            |\n| :--------: | :-------------: | :-------------: | :------: | ------------------- |\n|    $1$     |       $8$       |       $8$       |   $10$   |                     |\n|    $2$     |       $8$       |       $8$       |  $10^4$  |                     |\n|    $3$     | $2 \\times 10^5$ |       $8$       |   $10$   |                     |\n|    $4$     | $2 \\times 10^5$ |       $8$       |  $10^4$  |                     |\n|    $5$     | $2 \\times 10^5$ |       $8$       |  $10^4$  |                     |\n|    $6$     |      $15$       |      $15$       |  $100$   |                     |\n|    $7$     |      $40$       |      $40$       |  $100$   |                     |\n|    $8$     |      $100$      |      $100$      |  $100$   |                     |\n|    $9$     |      $300$      |      $300$      |  $100$   |                     |\n|    $10$    |     $1000$      |     $1000$      |  $100$   |                     |\n|    $11$    |     $3000$      |     $3000$      |  $100$   |                     |\n|    $12$    |     $15000$     |     $15000$     |  $100$   |                     |\n|    $13$    |     $50000$     |     $50000$     |  $100$   |                     |\n|    $14$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $100$   |                     |\n|    $15$    |      $200$      |      $200$      |  $10^4$  | $n \\geq 100$        |\n|    $16$    |     $5000$      |     $5000$      |  $10^4$  | $n \\geq 100$        |\n|    $17$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  | $n \\geq 100$        |\n|    $18$    |      $300$      |      $300$      |  $10^4$  | $B=3k-1,k \\in \\N^*$ |\n|    $19$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  | $B=3k-1,k \\in \\N^*$ |\n|    $20$    |      $300$      |      $300$      |  $10^4$  | $B=3k,k \\in \\N^*$   |\n|    $21$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  | $B=3k,k \\in \\N^*$   |\n|    $22$    |      $100$      |      $100$      |  $10^4$  |                     |\n|    $23$    |      $500$      |     $5000$      |  $10^4$  |                     |\n|    $24$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  |                     |\n|    $25$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  |                     |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2022] 倍增", "background": "", "description": "小 Z 是一个喜欢编程的女孩子。\n\n这天，她在做一道编程题的时候偶然发现了一个神奇的整数 $142857$。\n\n$142857 \\times 2 = 285714$，而 $285714$ 的所有数位恰好是 $142857$ 的一个排列。\n\n她很好奇，有没有更大的满足这种性质的整数。\n\n她写了一个搜索，发现了一些更大的有趣的数：\n\n$26835741 \\times 2 = 53671482$\n\n$0987312654 \\times 2 = 1974625308$\n\n$\\dots$\n\n她不满足于解决十进制下这样的问题，于是她想知道，是否在 $B$ 进制下存在一个 $n$ 位正整数 $x$，满足 $2x$ 的所有数位在 $B$ 进制下是 $x$ 的所有数位的一个排列。\n\n由于她讨厌数字 $0$，因此她还要求对于任意 $1 \\leq i \\leq n$，$x$ 和 $2x$ 在 $B$ 进制下的第 $i$ 位不能同时为 $0$。", "inputFormat": "**输入包含多组数据。**\n\n输入的第一行是一个正整数 $T$，表示数据组数。\n\n接下来 $T$ 行，第 $i$ 行包含两个正整数 $n$ 和 $B$，表示第 $i$ 组数据。", "outputFormat": "对于每组数据，输出一行。\n\n若本组数据有解，按照从高位到低位的顺序输出 $n$ 个非负整数，表示你找到的答案在 $B$ 进制下的值。\n\n否则只需要输出一个数 $-1$。", "hint": "**【样例 1 解释】**\n\n- 第一组数据的解释参见【题目描述】。\n- 对于第二组数据，可以通过枚举所有的 $n$ 位 $B$ 进制数说明一定不能找到这样的正整数。\n- 对于第三组数据，$2x$ 的 $7$ 进制表示为 $103635_{(7)}$，因此这是一个满足题意的答案。\n\n注意此样例的答案文件仅表明了一种可能的合法答案，不表明答案文件恰好对应标准程序的输出。\n\n**【样例 2/3 解释】**\n\n注意此样例的答案文件仅表明了一种可能的合法答案，不表明答案文件恰好对应标准程序的输出。\n\n**【提示】**\n\n由于答案可能不唯一，我们下发了校验器 `checker.cpp` 和库文件 `testlib.h`。\n\n可以使用以下命令编译 `checker.cpp`：\n\n```\ng++ -o checker checker.cpp -O2 -std=c++11\n```\n\n将 `checker.cpp` 编译得到可执行文件 `checker` 后你可以使用以下方式测试你的答案：\n\n`checker <input> <output> <answer>`：利用选手目录下的 `double/double*.ans` 可以用来检验你的答案在样例测试点 `double/double*.in` 的正确性。\n\n`checker <input> <output> <output>`：会检查你的所有有解输出是否符合题目要求。注意以此种方式测试的时候，输出无解总会被报告为合法，因为在此种运行方式下我们只会检查你报告的所有解。\n\n**请选手注意多组数据之间的清空问题。**\n\n**【数据规模与约定】**\n\n对于全部数据，$1 \\leq T \\leq 10^4$，$2 \\leq \\sum B \\leq 2 \\times 10^5$，$1 \\leq \\sum n \\leq 2 \\times 10^5$，$n \\geq 1$，$B \\geq 2$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 |    $n \\leq$     |    $ B \\leq$    | $T \\leq$ | 特殊约定            |\n| :--------: | :-------------: | :-------------: | :------: | ------------------- |\n|    $1$     |       $8$       |       $8$       |   $10$   |                     |\n|    $2$     |       $8$       |       $8$       |  $10^4$  |                     |\n|    $3$     | $2 \\times 10^5$ |       $8$       |   $10$   |                     |\n|    $4$     | $2 \\times 10^5$ |       $8$       |  $10^4$  |                     |\n|    $5$     | $2 \\times 10^5$ |       $8$       |  $10^4$  |                     |\n|    $6$     |      $15$       |      $15$       |  $100$   |                     |\n|    $7$     |      $40$       |      $40$       |  $100$   |                     |\n|    $8$     |      $100$      |      $100$      |  $100$   |                     |\n|    $9$     |      $300$      |      $300$      |  $100$   |                     |\n|    $10$    |     $1000$      |     $1000$      |  $100$   |                     |\n|    $11$    |     $3000$      |     $3000$      |  $100$   |                     |\n|    $12$    |     $15000$     |     $15000$     |  $100$   |                     |\n|    $13$    |     $50000$     |     $50000$     |  $100$   |                     |\n|    $14$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $100$   |                     |\n|    $15$    |      $200$      |      $200$      |  $10^4$  | $n \\geq 100$        |\n|    $16$    |     $5000$      |     $5000$      |  $10^4$  | $n \\geq 100$        |\n|    $17$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  | $n \\geq 100$        |\n|    $18$    |      $300$      |      $300$      |  $10^4$  | $B=3k-1,k \\in \\N^*$ |\n|    $19$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  | $B=3k-1,k \\in \\N^*$ |\n|    $20$    |      $300$      |      $300$      |  $10^4$  | $B=3k,k \\in \\N^*$   |\n|    $21$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  | $B=3k,k \\in \\N^*$   |\n|    $22$    |      $100$      |      $100$      |  $10^4$  |                     |\n|    $23$    |      $500$      |     $5000$      |  $10^4$  |                     |\n|    $24$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  |                     |\n|    $25$    | $2 \\times 10^5$ | $2 \\times 10^5$ |  $10^4$  |                     |\n", "locale": "zh-CN"}}}
{"pid": "P8362", "type": "P", "difficulty": 7, "samples": [["1\n100\n2", "3728"], ["19260817\n1000000000\n3", "28745082"], ["114514233\n1919810233\n10", "135934411"], ["样例 4 见附件 digit4.in", "样例 4 见附件 digit4.ans"], ["样例 5 见附件 digit5.in", "样例 5 见附件 digit5.ans"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "O2优化", "陕西"], "title": "[SNOI2022] 数位", "background": "", "description": "小 S 是一个喜欢数数的女孩子。\n\n有一天，她在睡前躺在床上数数，当她数到 $977431$ 的时候，她终于困了，并且决定睡觉。但此时她突然发现这个数字的各位数码是单调不增的！她觉得这相当有趣，于是她又睡不着了。\n\n她想知道有多少个数在 $L, R$ 之间，并且它的各位数码是单调不增的。但这个问题太无聊了。\n\n她又想知道有多少数对 $(a, b)$ 在 $L, R$ 之间，并且 $(a + b)$ 的各位数码是单调不增的。但这个问题也太无聊了。\n\n终于，她想到了一个有趣一些的问题：\n\n给定整数 $L, R, k$，求有多少个 $k$ 维向量 $(a_1, a_2, ..., a_k)$ 满足 $(a_1 + a_2 + ... + a_k)$ 的数码是单调不增的，并且 $\\forall i \\in [1, k],  L \\leq a_i \\leq R$。\n\n由于答案可能很大，请你输出它对 $998244353$ 取模的结果。", "inputFormat": "输入的第一行是一个正整数 $L$，含义见【题目描述】。\n\n输入的第二行是一个正整数 $R$，含义见【题目描述】。\n\n输入的第三行是一个正整数 $k$，含义见【题目描述】。", "outputFormat": "输出一行一个整数表示合法的向量数，答案 $998244353$ 取模。", "hint": "**【数据规模与约定】**\n\n对于全部数据，$1 \\leq L \\leq R < 10^{1000}$，$1 \\leq k \\leq 50$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 |    $R<$     | $k$  |\n| :--------: | :---------: | :--: |\n|    $1$     |   $10^6$    | $1$  |\n|    $2$     |   $10^6$    | $10$ |\n|    $3$     |   $10^6$    | $20$ |\n|    $4$     |   $10^6$    | $30$ |\n|    $5$     |   $10^6$    | $50$ |\n|    $6$     |  $10^{17}$  | $10$ |\n|    $7$     |  $10^{17}$  | $10$ |\n|    $8$     |  $10^{17}$  | $20$ |\n|    $9$     |  $10^{17}$  | $30$ |\n|    $10$    |  $10^{17}$  | $50$ |\n|    $11$    |  $10^{50}$  | $2$  |\n|    $12$    |  $10^{50}$  | $10$ |\n|    $13$    | $10^{100}$  | $2$  |\n|    $14$    | $10^{100}$  | $3$  |\n|    $15$    | $10^{100}$  | $10$ |\n|    $16$    | $10^{200}$  | $3$  |\n|    $17$    | $10^{200}$  | $10$ |\n|    $18$    | $10^{300}$  | $10$ |\n|    $19$    | $10^{300}$  | $10$ |\n|    $20$    | $10^{300}$  | $20$ |\n|    $21$    | $10^{500}$  | $10$ |\n|    $22$    | $10^{500}$  | $20$ |\n|    $23$    | $10^{1000}$ | $30$ |\n|    $24$    | $10^{1000}$  | $50$ |\n|    $25$    | $10^{1000}$  | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2022] 数位", "background": "", "description": "小 S 是一个喜欢数数的女孩子。\n\n有一天，她在睡前躺在床上数数，当她数到 $977431$ 的时候，她终于困了，并且决定睡觉。但此时她突然发现这个数字的各位数码是单调不增的！她觉得这相当有趣，于是她又睡不着了。\n\n她想知道有多少个数在 $L, R$ 之间，并且它的各位数码是单调不增的。但这个问题太无聊了。\n\n她又想知道有多少数对 $(a, b)$ 在 $L, R$ 之间，并且 $(a + b)$ 的各位数码是单调不增的。但这个问题也太无聊了。\n\n终于，她想到了一个有趣一些的问题：\n\n给定整数 $L, R, k$，求有多少个 $k$ 维向量 $(a_1, a_2, ..., a_k)$ 满足 $(a_1 + a_2 + ... + a_k)$ 的数码是单调不增的，并且 $\\forall i \\in [1, k],  L \\leq a_i \\leq R$。\n\n由于答案可能很大，请你输出它对 $998244353$ 取模的结果。", "inputFormat": "输入的第一行是一个正整数 $L$，含义见【题目描述】。\n\n输入的第二行是一个正整数 $R$，含义见【题目描述】。\n\n输入的第三行是一个正整数 $k$，含义见【题目描述】。", "outputFormat": "输出一行一个整数表示合法的向量数，答案 $998244353$ 取模。", "hint": "**【数据规模与约定】**\n\n对于全部数据，$1 \\leq L \\leq R < 10^{1000}$，$1 \\leq k \\leq 50$。\n\n具体的数据规模与约定见下表。\n\n| 测试点编号 |    $R<$     | $k$  |\n| :--------: | :---------: | :--: |\n|    $1$     |   $10^6$    | $1$  |\n|    $2$     |   $10^6$    | $10$ |\n|    $3$     |   $10^6$    | $20$ |\n|    $4$     |   $10^6$    | $30$ |\n|    $5$     |   $10^6$    | $50$ |\n|    $6$     |  $10^{17}$  | $10$ |\n|    $7$     |  $10^{17}$  | $10$ |\n|    $8$     |  $10^{17}$  | $20$ |\n|    $9$     |  $10^{17}$  | $30$ |\n|    $10$    |  $10^{17}$  | $50$ |\n|    $11$    |  $10^{50}$  | $2$  |\n|    $12$    |  $10^{50}$  | $10$ |\n|    $13$    | $10^{100}$  | $2$  |\n|    $14$    | $10^{100}$  | $3$  |\n|    $15$    | $10^{100}$  | $10$ |\n|    $16$    | $10^{200}$  | $3$  |\n|    $17$    | $10^{200}$  | $10$ |\n|    $18$    | $10^{300}$  | $10$ |\n|    $19$    | $10^{300}$  | $10$ |\n|    $20$    | $10^{300}$  | $20$ |\n|    $21$    | $10^{500}$  | $10$ |\n|    $22$    | $10^{500}$  | $20$ |\n|    $23$    | $10^{1000}$ | $30$ |\n|    $24$    | $10^{1000}$  | $50$ |\n|    $25$    | $10^{1000}$  | $50$ |", "locale": "zh-CN"}}}
{"pid": "P8363", "type": "P", "difficulty": 6, "samples": [["3\n-2 1 1 2\n1 0 2 1\n-3 -3 -2 0\n2\n1 2 ", "5\n15"], ["4\n5 1 8 4\n-8 1 -5 4\n-10 2 10 3\n6 0 8 10\n6\n1 2 3 4 7 9", "0\n5\n14\n18\n70\n100"], ["1\n1 1 1000000 1000000\n3\n100 10000 1000000", "10000\n100000000\n1000000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "COI（克罗地亚）"], "title": "[COI 2009] PLAHTE", "background": "", "description": "地面上有 $N$ 条矩形床单，所有床单平行于坐标轴且没有任何一条床单覆盖 $(0,0)$。\n\n在 $0$ 时刻的时候油覆盖了 $(0,0)$ 这个格子，且每过一个时刻，油会向八个方向扩散。当油扩散到一个有床单的格子上，油会污染这个格子上的所有床单（只污染被污染的格子，其他未受污染的不算）。\n\n给定你一些时刻，在这些时刻上请你求出所有床单上被污染的格子的总面积。", "inputFormat": "第一行一个正整数 $N$，为床单的数量。\n\n接下来 $N$ 行，每行四个正整数 $x_1,y_1,x_2,y_2$，用 $(x_1,y_1)$ 与 $(x_2,y_2)$ 这两个坐标形成第 $i$ 条床单。\n\n接下来一行一个正整数 $M$，为时刻的数量。\n\n接下来一行 $M$ 个正整数，为时刻。", "outputFormat": "输出 $M$ 行，第 $i$ 行为第 $i$ 个时刻被污染的床单的面积（两条床单重合的话算两个）。", "hint": "$1\\le N,M\\le 10^5$。\n\n$-10^6\\le x_1\\le x_2\\le 10^6,-10^6\\le y_1\\le y_2\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2009] PLAHTE", "background": "", "description": "地面上有 $N$ 条矩形床单，所有床单平行于坐标轴且没有任何一条床单覆盖 $(0,0)$。\n\n在 $0$ 时刻的时候油覆盖了 $(0,0)$ 这个格子，且每过一个时刻，油会向八个方向扩散。当油扩散到一个有床单的格子上，油会污染这个格子上的所有床单（只污染被污染的格子，其他未受污染的不算）。\n\n给定你一些时刻，在这些时刻上请你求出所有床单上被污染的格子的总面积。", "inputFormat": "第一行一个正整数 $N$，为床单的数量。\n\n接下来 $N$ 行，每行四个正整数 $x_1,y_1,x_2,y_2$，用 $(x_1,y_1)$ 与 $(x_2,y_2)$ 这两个坐标形成第 $i$ 条床单。\n\n接下来一行一个正整数 $M$，为时刻的数量。\n\n接下来一行 $M$ 个正整数，为时刻。", "outputFormat": "输出 $M$ 行，第 $i$ 行为第 $i$ 个时刻被污染的床单的面积（两条床单重合的话算两个）。", "hint": "$1\\le N,M\\le 10^5$。\n\n$-10^6\\le x_1\\le x_2\\le 10^6,-10^6\\le y_1\\le y_2\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8364", "type": "P", "difficulty": 6, "samples": [["20 4 5\n4 3 6 1", "3 3 3 2\n1 0 1 0"], ["100 3 5\n30 20 10", "4 3 3\n1 1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "COI（克罗地亚）"], "title": "[COI 2009] IZBORI", "background": "", "description": "有 $V$ 个选民在为选举投票。这次选举有 $N$ 个党派参加，他们要共同争夺议会的 $M$ 个席位。\n\n假设党派编号为 $1$ 至 $N$，且他们分别获得 $v_1,v_2,\\cdots,v_n$ 票。席位分配如下：\n\n1. 所有获得少于 $5\\%$ 的票数的党派直接取消后续参选资格。\n\n2. 一开始议会不会为任何党派预留名额。\n\n3. 对于每个党派，计算 $Q_p=V_p\\div(S_p+1)$，其中 $V_p$ 是党派获得的总票数，$S_p$ 是已经分配给该党派的席位数量。\n\n4. $Q_p$ 最大的党派会获得一个席位。（相同则编号小的获得）\n\n5. 重复第三四步直到满员。\n\n现在已经清点了部分选票，知道了党派现在获得的票数，编写程序以求出在所有可能的情况下，各个党派可能获得的最多或最少席位。\n", "inputFormat": "第一行三个正整数 $V,N,M$。\n\n第二行 $N$ 个正整数，为各个党派目前获得的票数，保证其总和不超过 $V$。", "outputFormat": "输出第一行 $N$ 个整数，为各个党派最多可能得到席位数。\n\n输出第二行 $N$ 个整数，为各个党派最少可能得到席位数。", "hint": "正确输出第一行获得 $20\\%$ 的分数。正确输出第二行获得 $80\\%$ 的分数。\n\n$1\\le V\\le 10^7,1\\le N\\le 100,1\\le M\\le 200$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2009] IZBORI", "background": "", "description": "有 $V$ 个选民在为选举投票。这次选举有 $N$ 个党派参加，他们要共同争夺议会的 $M$ 个席位。\n\n假设党派编号为 $1$ 至 $N$，且他们分别获得 $v_1,v_2,\\cdots,v_n$ 票。席位分配如下：\n\n1. 所有获得少于 $5\\%$ 的票数的党派直接取消后续参选资格。\n\n2. 一开始议会不会为任何党派预留名额。\n\n3. 对于每个党派，计算 $Q_p=V_p\\div(S_p+1)$，其中 $V_p$ 是党派获得的总票数，$S_p$ 是已经分配给该党派的席位数量。\n\n4. $Q_p$ 最大的党派会获得一个席位。（相同则编号小的获得）\n\n5. 重复第三四步直到满员。\n\n现在已经清点了部分选票，知道了党派现在获得的票数，编写程序以求出在所有可能的情况下，各个党派可能获得的最多或最少席位。\n", "inputFormat": "第一行三个正整数 $V,N,M$。\n\n第二行 $N$ 个正整数，为各个党派目前获得的票数，保证其总和不超过 $V$。", "outputFormat": "输出第一行 $N$ 个整数，为各个党派最多可能得到席位数。\n\n输出第二行 $N$ 个整数，为各个党派最少可能得到席位数。", "hint": "正确输出第一行获得 $20\\%$ 的分数。正确输出第二行获得 $80\\%$ 的分数。\n\n$1\\le V\\le 10^7,1\\le N\\le 100,1\\le M\\le 200$。", "locale": "zh-CN"}}}
{"pid": "P8365", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 4 5\n100 200 300 400 500\n", "18060\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "各省省选", "2022", "O2优化", "辽宁"], "title": "[LNOI2022] 吃", "background": "", "description": "小 A 很喜欢吃东西。\n\n小 A 面前有 $n$ 份食物，第 $i$ 份有参数 $a_i$ 和 $b_i$。小 A 可以按照**任意顺序**吃掉这 $n$ 份食物。当她吃掉编号为 $i$ 的食物时，她可以选择将自己的体重乘以 $a_i$ 或者将自己的体重加上 $b_i$。每份食物只能吃恰好一次。\n\n小 A 的初始体重为 $1$，请求出她吃完 $n$ 份食物后能达到的**最大**体重。答案可能很大，你只需要输出其对 $({10}^9 + 7)$ 取模后的结果。\n\n**注意：你需要最大化体重并将该最大值对 $\\bm{({10}^9 + 7)}$ 取模，而非最大化体重对 $\\bm{({10}^9 + 7)}$ 取模的结果。**", "inputFormat": "第一行输入一个整数 $n$ 表示食物的数量。第二行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，第三行 $n$ 个整数 $b_1, b_2, \\ldots, b_n$，表示每份食物的参数。", "outputFormat": "输出一个整数，表示小 A 可以得到的最大体重对 $({10}^9 + 7)$ 取模后的结果。", "hint": "**【样例解释 #1】**\n\n以下方案可以达到最大体重：\n\n- 吃掉第一份食物并选择将体重增加 $100$，体重变为 $101$；\n- 吃掉第二份食物并选择将体重增加 $200$，体重变为 $301$；\n- 吃掉第三份食物并选择将体重乘 $3$，体重变为 $903$；\n- 吃掉第四份食物并选择将体重乘 $4$，体重变为 $3612$；\n- 吃掉第五份食物并选择将体重乘 $5$，体重变为 $18060$。\n\n**【样例 #2】**\n\n见附件中的 `food/food2.in` 与 `food/food2.ans`。\n\n该组样例满足 $n \\le 10$ 和特殊性质 E。\n\n**【样例 #3】**\n\n见附件中的 `food/food3.in` 与 `food/food3.ans`。\n\n该组样例满足 $n \\le 20$ 和特殊性质 E。\n\n**【样例 #4】**\n\n见附件中的 `food/food4.in` 与 `food/food4.ans`。\n\n该组样例满足 $n \\le 2000$。\n\n**【样例 #5】**\n\n见附件中的 `food/food5.in` 与 `food/food5.ans`。\n\n该组样例满足特殊性质 A。\n\n**【样例 #6】**\n\n见附件中的 `food/food6.in` 与 `food/food6.ans`。\n\n该组样例满足特殊性质 C。\n\n**【样例 #7】**\n\n见附件中的 `food/food7.in` 与 `food/food7.ans`。\n\n该组样例满足特殊性质 D。\n\n**【样例 #8】**\n\n见附件中的 `food/food8.in` 与 `food/food8.ans`。\n\n该组样例满足特殊性质 B。\n\n**【样例 #9】**\n\n见附件中的 `food/food9.in` 与 `food/food9.ans`。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的测试数据，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le a_i, b_i \\le {10}^6$。\n\n| 测试点编号 | $n \\le $ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $10$ | DE |\n| $2$ | $10$ | E |\n| $3$ | $10$ | AE |\n| $4$ | $10$ | E |\n| $5$ | $20$ | DE |\n| $6$ | $20$ | E |\n| $7$ | $20$ | E |\n| $8$ | $20$ | E |\n| $9$ | $2000$ | D |\n| $10$ | $2000$ | 无 |\n| $11$ | $2000$ | 无 |\n| $12$ | $2000$ | 无 |\n| $13$ | $5 \\times {10}^5$ | BD |\n| $14$ | $5 \\times {10}^5$ | B |\n| $15$ | $5 \\times {10}^5$ | C |\n| $16$ | $5 \\times {10}^5$ | C |\n| $17$ | ${10}^5$ | 无 |\n| $18$ | ${10}^5$ | 无 |\n| $19$ | $5 \\times {10}^5$ | 无 |\n| $20$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$a_i = 1$。  \n特殊性质 B：$a_i \\ge b_i$。  \n特殊性质 C：$a_i, b_i$ 在 $[1, {10}^6]$ 内独立均匀随机生成。  \n特殊性质 D：$a_i \\ge 2$。  \n特殊性质 E：$a_i \\le 4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNOI2022] 吃", "background": "", "description": "小 A 很喜欢吃东西。\n\n小 A 面前有 $n$ 份食物，第 $i$ 份有参数 $a_i$ 和 $b_i$。小 A 可以按照**任意顺序**吃掉这 $n$ 份食物。当她吃掉编号为 $i$ 的食物时，她可以选择将自己的体重乘以 $a_i$ 或者将自己的体重加上 $b_i$。每份食物只能吃恰好一次。\n\n小 A 的初始体重为 $1$，请求出她吃完 $n$ 份食物后能达到的**最大**体重。答案可能很大，你只需要输出其对 $({10}^9 + 7)$ 取模后的结果。\n\n**注意：你需要最大化体重并将该最大值对 $\\bm{({10}^9 + 7)}$ 取模，而非最大化体重对 $\\bm{({10}^9 + 7)}$ 取模的结果。**", "inputFormat": "第一行输入一个整数 $n$ 表示食物的数量。第二行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，第三行 $n$ 个整数 $b_1, b_2, \\ldots, b_n$，表示每份食物的参数。", "outputFormat": "输出一个整数，表示小 A 可以得到的最大体重对 $({10}^9 + 7)$ 取模后的结果。", "hint": "**【样例解释 #1】**\n\n以下方案可以达到最大体重：\n\n- 吃掉第一份食物并选择将体重增加 $100$，体重变为 $101$；\n- 吃掉第二份食物并选择将体重增加 $200$，体重变为 $301$；\n- 吃掉第三份食物并选择将体重乘 $3$，体重变为 $903$；\n- 吃掉第四份食物并选择将体重乘 $4$，体重变为 $3612$；\n- 吃掉第五份食物并选择将体重乘 $5$，体重变为 $18060$。\n\n**【样例 #2】**\n\n见附件中的 `food/food2.in` 与 `food/food2.ans`。\n\n该组样例满足 $n \\le 10$ 和特殊性质 E。\n\n**【样例 #3】**\n\n见附件中的 `food/food3.in` 与 `food/food3.ans`。\n\n该组样例满足 $n \\le 20$ 和特殊性质 E。\n\n**【样例 #4】**\n\n见附件中的 `food/food4.in` 与 `food/food4.ans`。\n\n该组样例满足 $n \\le 2000$。\n\n**【样例 #5】**\n\n见附件中的 `food/food5.in` 与 `food/food5.ans`。\n\n该组样例满足特殊性质 A。\n\n**【样例 #6】**\n\n见附件中的 `food/food6.in` 与 `food/food6.ans`。\n\n该组样例满足特殊性质 C。\n\n**【样例 #7】**\n\n见附件中的 `food/food7.in` 与 `food/food7.ans`。\n\n该组样例满足特殊性质 D。\n\n**【样例 #8】**\n\n见附件中的 `food/food8.in` 与 `food/food8.ans`。\n\n该组样例满足特殊性质 B。\n\n**【样例 #9】**\n\n见附件中的 `food/food9.in` 与 `food/food9.ans`。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的测试数据，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le a_i, b_i \\le {10}^6$。\n\n| 测试点编号 | $n \\le $ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $10$ | DE |\n| $2$ | $10$ | E |\n| $3$ | $10$ | AE |\n| $4$ | $10$ | E |\n| $5$ | $20$ | DE |\n| $6$ | $20$ | E |\n| $7$ | $20$ | E |\n| $8$ | $20$ | E |\n| $9$ | $2000$ | D |\n| $10$ | $2000$ | 无 |\n| $11$ | $2000$ | 无 |\n| $12$ | $2000$ | 无 |\n| $13$ | $5 \\times {10}^5$ | BD |\n| $14$ | $5 \\times {10}^5$ | B |\n| $15$ | $5 \\times {10}^5$ | C |\n| $16$ | $5 \\times {10}^5$ | C |\n| $17$ | ${10}^5$ | 无 |\n| $18$ | ${10}^5$ | 无 |\n| $19$ | $5 \\times {10}^5$ | 无 |\n| $20$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$a_i = 1$。  \n特殊性质 B：$a_i \\ge b_i$。  \n特殊性质 C：$a_i, b_i$ 在 $[1, {10}^6]$ 内独立均匀随机生成。  \n特殊性质 D：$a_i \\ge 2$。  \n特殊性质 E：$a_i \\le 4$。", "locale": "zh-CN"}}}
{"pid": "P8366", "type": "P", "difficulty": 5, "samples": [["5\n1\n123\n1\n100\n1\n000\n2\n321321\n2\n000001\n", "0\n1\n3\n6\n60\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "各省省选", "2022", "O2优化", "辽宁"], "title": "[LNOI2022] 题", "background": "", "description": "给定长度为 $3 n$、值域为 $[0, 3]$ 的整数序列 $S = s_1 s_2 \\cdots s_{3 n}$。你需要首先将 $S$ 中的每个 $0$ 替换为 $[1, 3]$ 中的任意一个整数，得到序列 $T = t_1 t_2 \\cdots t_{3 n}$，然后给出 $n$ 个长度为 $3$ 的整数序列 ${\\{ a_{i, 1}, a_{i, 2}, a_{i, 3} \\}}_{1 \\le i \\le n}$，使得\n\n- $\\forall 1 \\le i \\le n$，$1 \\le a_{i, 1} < a_{i, 2} < a_{i, 3} \\le 3 n$；\n- $\\forall (i_1, j_1) \\ne (i_2, j_2)$，$a_{i_1, j_1} \\ne a_{i_2, j_2}$；\n- $\\forall 1 \\le i \\le n$，$\\{ t_{a_{i, 1}}, t_{a_{i, 2}}, t_{a_{i, 3}} \\}$ 是 $\\{ 1, 2, 3 \\}$ 的一个排列且逆序对数为奇数。\n\n认为两个方案本质不同当且仅当序列 $T$ 不同或存在 $a_{i, j}$（$1 \\le i \\le n$，$1 \\le j \\le 3$）不同，求以上操作的本质不同的方案数，对 $({10}^9 + 7)$ 取模。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $C$ 表示测试数据组数。\n\n对于每组测试数据，第一行一个整数 $n$，接下来一行一个长度为 $3 n$ 的字符串描述序列 $S$。", "outputFormat": "对于每组测试数据输出一行一个整数表示方案数对 $({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n前三组测试数据中 $n = 1$，故 $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 2, 3 \\}$。\n\n对于第一组测试数据，只能有 $T = 123$，而 $\\{ 1, 2, 3 \\}$ 的逆序对数为 $0$ 不合法，故不存在方案。\n\n对于第二组测试数据，$T = 123$ 不合法，而 $T = 132$ 时 $\\{ 1, 3, 2 \\}$ 的逆序对数为 $1$ 合法，故存在一个方案。\n\n对于第三组测试数据，取 $T = 132$，$T = 213$，$T = 321$ 可以得到三个合法方案。\n\n对于第四组测试数据，$T = 321321$，有如下六种方案：\n\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 2, 3 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 4, 5, 6 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 4, 5, 6 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 1, 2, 3 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 2, 6 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 3, 4, 5 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 3, 4, 5 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 1, 2, 6 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 5, 6 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 2, 3, 4 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 2, 3, 4 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 1, 5, 6 \\}$\n\n**【样例 \\#2】**\n\n见附件中的 ` problem/problem2.in` 与 `problem/problem2.ans`。\n\n该组样例中五组数据的 $n$ 分别为 $3, 5, 8, 12, 17$。\n\n**【样例 \\#3】**\n\n见选手目录下的 `problem/problem3.in` 与 `problem/problem3.ans`。\n\n该组样例满足特殊性质 A，五组数据的 $n$ 分别为 $2, 4, 7, 15, 19$。\n\n**【数据范围】**\n\n对于所有测试数据，$1 \\le C \\le 5$，$1 \\le n \\le 19$，字符串 $S$ 的长度为 $3 n$ 且仅由 $0, 1, 2, 3$ 构成。\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $1$ | 无 |\n| $2$ | $2$ | 无 |\n| $3$ | $3$ | 无 |\n| $4$ | $5$ | A |\n| $5$ | $7$ | 无 |\n| $6$ | $10$ | 无 |\n| $7$ | $13$ | A |\n| $8$ | $16$ | 无 |\n| $9$ | $18$ | 无 |\n| $10$ | $19$ | 无 |\n\n特殊性质 A：字符串 $S$ 由全 $0$ 的字符串构成。\n\n**【提示】**\n\n请注意程序的空间消耗。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNOI2022] 题", "background": "", "description": "给定长度为 $3 n$、值域为 $[0, 3]$ 的整数序列 $S = s_1 s_2 \\cdots s_{3 n}$。你需要首先将 $S$ 中的每个 $0$ 替换为 $[1, 3]$ 中的任意一个整数，得到序列 $T = t_1 t_2 \\cdots t_{3 n}$，然后给出 $n$ 个长度为 $3$ 的整数序列 ${\\{ a_{i, 1}, a_{i, 2}, a_{i, 3} \\}}_{1 \\le i \\le n}$，使得\n\n- $\\forall 1 \\le i \\le n$，$1 \\le a_{i, 1} < a_{i, 2} < a_{i, 3} \\le 3 n$；\n- $\\forall (i_1, j_1) \\ne (i_2, j_2)$，$a_{i_1, j_1} \\ne a_{i_2, j_2}$；\n- $\\forall 1 \\le i \\le n$，$\\{ t_{a_{i, 1}}, t_{a_{i, 2}}, t_{a_{i, 3}} \\}$ 是 $\\{ 1, 2, 3 \\}$ 的一个排列且逆序对数为奇数。\n\n认为两个方案本质不同当且仅当序列 $T$ 不同或存在 $a_{i, j}$（$1 \\le i \\le n$，$1 \\le j \\le 3$）不同，求以上操作的本质不同的方案数，对 $({10}^9 + 7)$ 取模。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $C$ 表示测试数据组数。\n\n对于每组测试数据，第一行一个整数 $n$，接下来一行一个长度为 $3 n$ 的字符串描述序列 $S$。", "outputFormat": "对于每组测试数据输出一行一个整数表示方案数对 $({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n前三组测试数据中 $n = 1$，故 $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 2, 3 \\}$。\n\n对于第一组测试数据，只能有 $T = 123$，而 $\\{ 1, 2, 3 \\}$ 的逆序对数为 $0$ 不合法，故不存在方案。\n\n对于第二组测试数据，$T = 123$ 不合法，而 $T = 132$ 时 $\\{ 1, 3, 2 \\}$ 的逆序对数为 $1$ 合法，故存在一个方案。\n\n对于第三组测试数据，取 $T = 132$，$T = 213$，$T = 321$ 可以得到三个合法方案。\n\n对于第四组测试数据，$T = 321321$，有如下六种方案：\n\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 2, 3 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 4, 5, 6 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 4, 5, 6 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 1, 2, 3 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 2, 6 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 3, 4, 5 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 3, 4, 5 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 1, 2, 6 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 1, 5, 6 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 2, 3, 4 \\}$\n- $\\{ a_{1, 1}, a_{1, 2}, a_{1, 3} \\} = \\{ 2, 3, 4 \\}$，$\\{ a_{2, 1}, a_{2, 2}, a_{2, 3} \\} = \\{ 1, 5, 6 \\}$\n\n**【样例 \\#2】**\n\n见附件中的 ` problem/problem2.in` 与 `problem/problem2.ans`。\n\n该组样例中五组数据的 $n$ 分别为 $3, 5, 8, 12, 17$。\n\n**【样例 \\#3】**\n\n见选手目录下的 `problem/problem3.in` 与 `problem/problem3.ans`。\n\n该组样例满足特殊性质 A，五组数据的 $n$ 分别为 $2, 4, 7, 15, 19$。\n\n**【数据范围】**\n\n对于所有测试数据，$1 \\le C \\le 5$，$1 \\le n \\le 19$，字符串 $S$ 的长度为 $3 n$ 且仅由 $0, 1, 2, 3$ 构成。\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $1$ | 无 |\n| $2$ | $2$ | 无 |\n| $3$ | $3$ | 无 |\n| $4$ | $5$ | A |\n| $5$ | $7$ | 无 |\n| $6$ | $10$ | 无 |\n| $7$ | $13$ | A |\n| $8$ | $16$ | 无 |\n| $9$ | $18$ | 无 |\n| $10$ | $19$ | 无 |\n\n特殊性质 A：字符串 $S$ 由全 $0$ 的字符串构成。\n\n**【提示】**\n\n请注意程序的空间消耗。", "locale": "zh-CN"}}}
{"pid": "P8367", "type": "P", "difficulty": 7, "samples": [["2\n2\n2 3\n65472\n5\n1 3 2 1 1\n2 3 3 3\n", "589248\n8589\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "O2优化", "辽宁"], "title": "[LNOI2022] 盒", "background": null, "description": "有 $n$ 个不同的盒子排成一排。在初始状态下，第 $i$ 个盒子放有 $a_i$ 个货物，总货物数量为 $S = \\sum_{i = 1}^{n} a_i$。对于非负整数数组 $(b_1, b_2, \\ldots, b_n)$ 满足 $\\sum_{i = 1}^{n} b_i = S$，考察以下问题：\n\n你想让第 $i$ 个盒子中拥有恰好 $b_i$ 个货物，为此你可以做如下操作若干次：对两个相邻的盒子，把其中一个盒子的**恰好一个**货物移动至另一个。对 $i, i + 1$（$1 \\le i < n$）号盒子做**一次**操作的代价为 $w_i$。**注意：将 $\\bm{i}$ 号盒子的一个货物移动到 $\\bm{i + 1}$ 号盒子和将 $\\bm{i + 1}$ 号盒子的一个货物移动到 $\\bm{i}$ 号盒子的代价都是 $\\bm{w_i}$**。你需要保证在操作中不存在盒子中的货物数量是负数。\n\n在以上问题下，定义从初始状态达到第 $i$ 个盒子拥有恰好 $b_i$ 个货物的状态的最小代价为 $\\operatorname{val}(b_1, b_2, \\ldots, b_n)$，你需要求出对所有满足 $\\sum_{i = 1}^{n} b_i = S$ 的非负整数数组 $(b_1, b_2, \\ldots, b_n)$，$\\operatorname{val}(b_1, b_2, \\ldots, b_n)$ 的和。输出这个答案对 $998244353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组数据，输入共三行。第一行一个正整数 $n$ 表示盒子的个数，第二行 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$ 描述初始状态，第三行 $n - 1$ 个非负整数 $w_1, w_2, \\ldots, w_{n - 1}$ 描述移动货物的代价。", "outputFormat": "对于每组测试数据输出一行一个整数，表示对于所有满足 $\\sum_{i = 1}^{n} b_i = S$ 的非负整数数组，达到目标的代价的最小值之和模 $998244353$ 的结果。", "hint": "**【样例解释 \\#1】**\n\n对于第一组数据，一共有六种需要考虑的情形，它们的 $b_1$ 和 $b_2$ 构成的二元组 $(b_1, b_2)$ 分别为 $(0, 5), (1, 4), (2, 3), (3, 2), (4, 1), (5, 0)$。\n\n对于第一种情形，需要至少 $2$ 次移动，代价最小值为 $65472 \\times 2 = 130944$。\n\n对于第二种情形，需要至少 $1$ 次移动，代价最小值为 $65472$。\n\n对于第三种情形，不需要做任何操作，代价最小值为 $0$。\n\n对于第四种情形，需要至少 $1$ 次移动，代价最小值为 $65472$。\n\n对于第五种情形，需要至少 $2$ 次移动，代价最小值为 $65472 \\times 2 = 130944$。\n\n对于最后一种情形，需要至少 $3$ 次移动，代价最小值为 $65472 \\times 3 = 196416$。\n\n因此，最小代价之和为 $130944 + 65472 + 0 + 65472 + 130944 + 196416 = 589248$。\n\n**【样例 \\#2】**\n\n见附件中的 `box/box2.in` 与 `box/box2.ans`。\n\n这个样例满足测试点 $5 \\sim 8$ 的限制。\n\n**【样例 \\#3】**\n\n见附件中的 `box/box3.in` 与 `box/box3.ans`。\n\n这个样例满足测试点 $9 \\sim 12$ 的限制。\n\n**【样例 \\#4】**\n\n见附件中的 `box/box4.in` 与 `box/box4.ans`。\n\n这个样例满足测试点 $13 \\sim 14$ 的限制。\n\n**【样例 \\#5】**\n\n见附件中的 `box/box5.in` 与 `box/box5.ans`。\n\n这个样例满足测试点 $15 \\sim 16$ 的限制。\n\n**【样例 \\#6】**\n\n见附件中的 `box/box6.in` 与 `box/box6.ans`。\n\n这个样例满足测试点 $17 \\sim 18$ 的限制。\n\n**【数据范围】**\n\n保证对于任何测试点的任何一组数据，有 $2 \\le n \\le 5 \\times {10}^5$，$1 \\le S \\le 2 \\times {10}^6$，$a_i \\ge 0$，$0 \\le w_i < 998244353$。\n\n| 测试点编号 | $T \\le$ | $n \\le$ | $S \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $1000$ | $5$ | $5$ | A |\n| $3 \\sim 4$ | $5$ | $9$ | $9$ | 无 |\n| $5 \\sim 8$ | $10$ | $2000$ | $2000$ | 无 |\n| $9 \\sim 12$ | $10$ | $2000$ | $2 \\times {10}^5$ | 无 |\n| $13 \\sim 14$ | $2$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | B |\n| $15 \\sim 16$ | $2$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | AC |\n| $17 \\sim 18$ | $2$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | 无 |\n| $19 \\sim 20$ | $5$ | $5 \\times {10}^5$ | $2 \\times {10}^6$ | 无 |\n\n特殊性质 A：对于任意 $1 \\le i < n$，$w_i = 1$。  \n特殊性质 B：对于任意 $1 \\le i < n - 20$，$a_i = 0$。  \n特殊性质 C：最多只有 $20$ 个 $i \\in [1, n]$ 满足 $a_i \\ne 0$。\n\n**【提示】**\n\n本题有读入量较大的测试点，为了优化程序运行的时间，我们建议你采用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNOI2022] 盒", "background": null, "description": "有 $n$ 个不同的盒子排成一排。在初始状态下，第 $i$ 个盒子放有 $a_i$ 个货物，总货物数量为 $S = \\sum_{i = 1}^{n} a_i$。对于非负整数数组 $(b_1, b_2, \\ldots, b_n)$ 满足 $\\sum_{i = 1}^{n} b_i = S$，考察以下问题：\n\n你想让第 $i$ 个盒子中拥有恰好 $b_i$ 个货物，为此你可以做如下操作若干次：对两个相邻的盒子，把其中一个盒子的**恰好一个**货物移动至另一个。对 $i, i + 1$（$1 \\le i < n$）号盒子做**一次**操作的代价为 $w_i$。**注意：将 $\\bm{i}$ 号盒子的一个货物移动到 $\\bm{i + 1}$ 号盒子和将 $\\bm{i + 1}$ 号盒子的一个货物移动到 $\\bm{i}$ 号盒子的代价都是 $\\bm{w_i}$**。你需要保证在操作中不存在盒子中的货物数量是负数。\n\n在以上问题下，定义从初始状态达到第 $i$ 个盒子拥有恰好 $b_i$ 个货物的状态的最小代价为 $\\operatorname{val}(b_1, b_2, \\ldots, b_n)$，你需要求出对所有满足 $\\sum_{i = 1}^{n} b_i = S$ 的非负整数数组 $(b_1, b_2, \\ldots, b_n)$，$\\operatorname{val}(b_1, b_2, \\ldots, b_n)$ 的和。输出这个答案对 $998244353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组数据，输入共三行。第一行一个正整数 $n$ 表示盒子的个数，第二行 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$ 描述初始状态，第三行 $n - 1$ 个非负整数 $w_1, w_2, \\ldots, w_{n - 1}$ 描述移动货物的代价。", "outputFormat": "对于每组测试数据输出一行一个整数，表示对于所有满足 $\\sum_{i = 1}^{n} b_i = S$ 的非负整数数组，达到目标的代价的最小值之和模 $998244353$ 的结果。", "hint": "**【样例解释 \\#1】**\n\n对于第一组数据，一共有六种需要考虑的情形，它们的 $b_1$ 和 $b_2$ 构成的二元组 $(b_1, b_2)$ 分别为 $(0, 5), (1, 4), (2, 3), (3, 2), (4, 1), (5, 0)$。\n\n对于第一种情形，需要至少 $2$ 次移动，代价最小值为 $65472 \\times 2 = 130944$。\n\n对于第二种情形，需要至少 $1$ 次移动，代价最小值为 $65472$。\n\n对于第三种情形，不需要做任何操作，代价最小值为 $0$。\n\n对于第四种情形，需要至少 $1$ 次移动，代价最小值为 $65472$。\n\n对于第五种情形，需要至少 $2$ 次移动，代价最小值为 $65472 \\times 2 = 130944$。\n\n对于最后一种情形，需要至少 $3$ 次移动，代价最小值为 $65472 \\times 3 = 196416$。\n\n因此，最小代价之和为 $130944 + 65472 + 0 + 65472 + 130944 + 196416 = 589248$。\n\n**【样例 \\#2】**\n\n见附件中的 `box/box2.in` 与 `box/box2.ans`。\n\n这个样例满足测试点 $5 \\sim 8$ 的限制。\n\n**【样例 \\#3】**\n\n见附件中的 `box/box3.in` 与 `box/box3.ans`。\n\n这个样例满足测试点 $9 \\sim 12$ 的限制。\n\n**【样例 \\#4】**\n\n见附件中的 `box/box4.in` 与 `box/box4.ans`。\n\n这个样例满足测试点 $13 \\sim 14$ 的限制。\n\n**【样例 \\#5】**\n\n见附件中的 `box/box5.in` 与 `box/box5.ans`。\n\n这个样例满足测试点 $15 \\sim 16$ 的限制。\n\n**【样例 \\#6】**\n\n见附件中的 `box/box6.in` 与 `box/box6.ans`。\n\n这个样例满足测试点 $17 \\sim 18$ 的限制。\n\n**【数据范围】**\n\n保证对于任何测试点的任何一组数据，有 $2 \\le n \\le 5 \\times {10}^5$，$1 \\le S \\le 2 \\times {10}^6$，$a_i \\ge 0$，$0 \\le w_i < 998244353$。\n\n| 测试点编号 | $T \\le$ | $n \\le$ | $S \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $1000$ | $5$ | $5$ | A |\n| $3 \\sim 4$ | $5$ | $9$ | $9$ | 无 |\n| $5 \\sim 8$ | $10$ | $2000$ | $2000$ | 无 |\n| $9 \\sim 12$ | $10$ | $2000$ | $2 \\times {10}^5$ | 无 |\n| $13 \\sim 14$ | $2$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | B |\n| $15 \\sim 16$ | $2$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | AC |\n| $17 \\sim 18$ | $2$ | $2 \\times {10}^5$ | $2 \\times {10}^5$ | 无 |\n| $19 \\sim 20$ | $5$ | $5 \\times {10}^5$ | $2 \\times {10}^6$ | 无 |\n\n特殊性质 A：对于任意 $1 \\le i < n$，$w_i = 1$。  \n特殊性质 B：对于任意 $1 \\le i < n - 20$，$a_i = 0$。  \n特殊性质 C：最多只有 $20$ 个 $i \\in [1, n]$ 满足 $a_i \\ne 0$。\n\n**【提示】**\n\n本题有读入量较大的测试点，为了优化程序运行的时间，我们建议你采用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P8368", "type": "P", "difficulty": 7, "samples": [["3\nabcd\nabab\na\n", "2\n3\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "后缀自动机 SAM", "O2优化", "辽宁", "后缀数组 SA"], "title": "[LNOI2022] 串", "background": "", "description": "为了让你更好地理解题面，给出若干关于字符串的定义：\n\n- 对于一个字符串 $S = s_1 s_2 \\cdots s_n$，定义其长度为 $\\lvert S \\rvert = n$。\n- 对于两个字符串 $S = s_1 s_2 \\cdots s_n$ 和 $T = t_1 t_2 \\cdots t_m$，称 $T$ 为 $S$ 的子串，若 $m = 0$（即 $T$ 为空串）或者 $\\exists 1 \\le i \\le j \\le n$，$T = s_i s_{i + 1} \\cdots s_j$。若 $m = 0$ 或上述判断条件中 $i$ 可以取到 $1$，则称 $T$ 为 $S$ 的前缀；若 $m = 0$ 或上述判断条件中 $j$ 可以取到 $n$，则称 $T$ 为 $S$ 的后缀。\n\n给定一个英文小写字母构成的字符串 $S$，你需要找到一个尽可能长的字符串序列 $(T_0, T_1, \\ldots, T_l)$，满足：\n\n- $T_0$ 是 $S$ 的子串；\n- $\\forall 1 \\le i \\le l$，$\\lvert T_i \\rvert - \\lvert T_{i - 1} \\rvert = 1$；\n- $\\forall 1 \\le i \\le l$，存在 $S$ 的一个长度为 $\\lvert T_i \\rvert + 1$ 的子串 $S'_i$，使得 $S'_i$ 的长度为 $\\lvert T_{i - 1} \\rvert$ 的前缀为 $T_{i - 1}$，长度为 $\\lvert T_i \\rvert$ 的后缀为 $T_i$。\n\n输出这样的字符串序列的长度的最大值（即 $l$ 的最大值）。", "inputFormat": "**本题有多组测试数据**。输入的第一行为一个整数 $T$，表示测试数据组数。对于每组测试数据，输入一行一个英文小写字母构成的字符串 $S$。", "outputFormat": "对于每组测试数据输出一行一个整数，表示题目描述中字符串序列长度的最大值。", "hint": "**【样例解释 \\#1】**\n\n下文中使用符号 $\\epsilon$ 表示空串。\n\n对于第一组测试数据，可以找到如下字符串序列：$T_0 = \\epsilon, T_1 = \\texttt{b}, T_2 = \\texttt{cd}$，其中 $S'_1 = \\texttt{ab}, S'_2 = \\texttt{bcd}$。\n\n对于第二组测试数据，可以找到如下字符串序列：$T_0 = \\epsilon, T_1 = \\texttt{b}, T_2 = \\texttt{ab}, T_3 = \\texttt{bab}$，其中 $S'_1 = \\texttt{ab}, S'_2 = \\texttt{bab}, S'_3 = \\texttt{abab}$。\n\n对于第三组测试数据，可以找到如下字符串序列：$T_0 = \\epsilon$。\n\n**【样例 \\#2】**\n\n见附件中的 `string/string2.in` 与 `string/string2.ans`。\n\n该组样例中的字符串长度有一定梯度，你可以利用该组样例对程序进行检查。\n\n**【样例 \\#3】**\n\n见附件中的 `string/string3.in` 与 `string/string3.ans`。\n\n该组样例满足特殊性质 A。\n\n**【数据范围】**\n\n设 $\\sum |S|$ 表示测试点中所有测试数据的字符串长度和。\n\n对于 $100 \\%$ 的测试数据，$T \\ge 1$，$1 \\le \\lvert S \\rvert \\le 5 \\times {10}^5$，$1 \\le \\sum \\lvert S \\rvert \\le 1.5 \\times {10}^6$。\n\n| 测试点编号 | $\\lvert S \\rvert \\le$ | $\\sum \\lvert S \\rvert \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $30$ | $150$ | 无 |\n| $3 \\sim 5$ | $200$ | $800$ | 无 |\n| $6 \\sim 8$ | $1000$ | $3000$ | 无 |\n| $9 \\sim 11$ | $5 \\times {10}^5$ | $1.5 \\times {10}^6$ | A |\n| $12 \\sim 15$ | $6 \\times {10}^4$ | $3 \\times {10}^5$ | 无 |\n| $16 \\sim 20$ | $5 \\times {10}^5$ | $1.5 \\times {10}^6$ | 无 |\n\n特殊性质 A：字符串中的每个字符在小写字母中独立均匀随机生成。\n\n**【提示】**\n\n本题输入输出量较大，请使用较为快速的输入输出方式。\n\n例如，若你的代码使用了 `cin` 和 `cout` 作为输入输出方式，你可以选择在代码的**输入输出重定向语句**（`freopen` 语句、 `fopen` 语句等）**之后**加入以下语句加速输入输出速度。\n\n```cpp\nios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n```\n\n**加入该语句后不建议同时使用 `cin, cout` 和其他输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LNOI2022] 串", "background": "", "description": "为了让你更好地理解题面，给出若干关于字符串的定义：\n\n- 对于一个字符串 $S = s_1 s_2 \\cdots s_n$，定义其长度为 $\\lvert S \\rvert = n$。\n- 对于两个字符串 $S = s_1 s_2 \\cdots s_n$ 和 $T = t_1 t_2 \\cdots t_m$，称 $T$ 为 $S$ 的子串，若 $m = 0$（即 $T$ 为空串）或者 $\\exists 1 \\le i \\le j \\le n$，$T = s_i s_{i + 1} \\cdots s_j$。若 $m = 0$ 或上述判断条件中 $i$ 可以取到 $1$，则称 $T$ 为 $S$ 的前缀；若 $m = 0$ 或上述判断条件中 $j$ 可以取到 $n$，则称 $T$ 为 $S$ 的后缀。\n\n给定一个英文小写字母构成的字符串 $S$，你需要找到一个尽可能长的字符串序列 $(T_0, T_1, \\ldots, T_l)$，满足：\n\n- $T_0$ 是 $S$ 的子串；\n- $\\forall 1 \\le i \\le l$，$\\lvert T_i \\rvert - \\lvert T_{i - 1} \\rvert = 1$；\n- $\\forall 1 \\le i \\le l$，存在 $S$ 的一个长度为 $\\lvert T_i \\rvert + 1$ 的子串 $S'_i$，使得 $S'_i$ 的长度为 $\\lvert T_{i - 1} \\rvert$ 的前缀为 $T_{i - 1}$，长度为 $\\lvert T_i \\rvert$ 的后缀为 $T_i$。\n\n输出这样的字符串序列的长度的最大值（即 $l$ 的最大值）。", "inputFormat": "**本题有多组测试数据**。输入的第一行为一个整数 $T$，表示测试数据组数。对于每组测试数据，输入一行一个英文小写字母构成的字符串 $S$。", "outputFormat": "对于每组测试数据输出一行一个整数，表示题目描述中字符串序列长度的最大值。", "hint": "**【样例解释 \\#1】**\n\n下文中使用符号 $\\epsilon$ 表示空串。\n\n对于第一组测试数据，可以找到如下字符串序列：$T_0 = \\epsilon, T_1 = \\texttt{b}, T_2 = \\texttt{cd}$，其中 $S'_1 = \\texttt{ab}, S'_2 = \\texttt{bcd}$。\n\n对于第二组测试数据，可以找到如下字符串序列：$T_0 = \\epsilon, T_1 = \\texttt{b}, T_2 = \\texttt{ab}, T_3 = \\texttt{bab}$，其中 $S'_1 = \\texttt{ab}, S'_2 = \\texttt{bab}, S'_3 = \\texttt{abab}$。\n\n对于第三组测试数据，可以找到如下字符串序列：$T_0 = \\epsilon$。\n\n**【样例 \\#2】**\n\n见附件中的 `string/string2.in` 与 `string/string2.ans`。\n\n该组样例中的字符串长度有一定梯度，你可以利用该组样例对程序进行检查。\n\n**【样例 \\#3】**\n\n见附件中的 `string/string3.in` 与 `string/string3.ans`。\n\n该组样例满足特殊性质 A。\n\n**【数据范围】**\n\n设 $\\sum |S|$ 表示测试点中所有测试数据的字符串长度和。\n\n对于 $100 \\%$ 的测试数据，$T \\ge 1$，$1 \\le \\lvert S \\rvert \\le 5 \\times {10}^5$，$1 \\le \\sum \\lvert S \\rvert \\le 1.5 \\times {10}^6$。\n\n| 测试点编号 | $\\lvert S \\rvert \\le$ | $\\sum \\lvert S \\rvert \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $30$ | $150$ | 无 |\n| $3 \\sim 5$ | $200$ | $800$ | 无 |\n| $6 \\sim 8$ | $1000$ | $3000$ | 无 |\n| $9 \\sim 11$ | $5 \\times {10}^5$ | $1.5 \\times {10}^6$ | A |\n| $12 \\sim 15$ | $6 \\times {10}^4$ | $3 \\times {10}^5$ | 无 |\n| $16 \\sim 20$ | $5 \\times {10}^5$ | $1.5 \\times {10}^6$ | 无 |\n\n特殊性质 A：字符串中的每个字符在小写字母中独立均匀随机生成。\n\n**【提示】**\n\n本题输入输出量较大，请使用较为快速的输入输出方式。\n\n例如，若你的代码使用了 `cin` 和 `cout` 作为输入输出方式，你可以选择在代码的**输入输出重定向语句**（`freopen` 语句、 `fopen` 语句等）**之后**加入以下语句加速输入输出速度。\n\n```cpp\nios::sync_with_stdio(0); cin.tie(0); cout.tie(0);\n```\n\n**加入该语句后不建议同时使用 `cin, cout` 和其他输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P8369", "type": "P", "difficulty": 5, "samples": [["1 5 1\n3\n1\n5\n6", "1\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["博弈论", "2000", "POI（波兰）", "SG 函数"], "title": "[POI 2000] 条纹", "background": "", "description": "条纹游戏是一个双人的游戏。所需要的物品有一个棋盘以及三种颜色的长方形条纹，这三种颜色分别是红色、绿色和蓝色。所有的红色条纹的尺寸是 $c \\times 1$，所有的绿色条纹的尺寸是 $z \\times 1$，所有的蓝色条纹的尺寸是 $n \\times 1$，这里 $c,z,n$ 是正整数。每种颜色的条纹每个游戏者都拥有无限多个。\n\n一个棋盘是一个尺寸为 $p \\times 1$ 的长方形，由 $p$ 个 $1 \\times 1$ 的方格组成。\n\n游戏者轮流走，每一步都是由一个游戏者任选一种长方形条纹覆盖到棋盘上，并要求遵循以下规则：\n\n1. 条纹不能伸出棋盘之外。\n2. 不能覆盖在已有的条纹之上（即使部分也不行）。\n3. 条纹的边缘必须与棋盘方格的边缘相重叠。谁不能再走，谁就输了。\n\n先手是指在游戏中第一个走的游戏者。那么是否不管后手怎么走，先手都有必胜策略呢？\n\n请你编写一个程序：\n\n1. 读入条纹的尺寸以及至少一个棋盘的尺寸。\n2. 对每一个给出的棋盘判断先手是否必胜。\n3. 将结果输出。", "inputFormat": "第 $\\text{1}$ 行包含三个整数 $c,z,n$，表示三种条纹的长度，依次为红色，绿色以及蓝色。每两个数之间都用空格隔开。\n\n文件的第 $\\text{2}$ 行包括一个整数 $m$ 表示需要考虑的不同棋盘个数。以下 $\\text{3}$ 到 $\\text{m+2}$ 行每行包括一个整数 $p$ ,第 $\\text{i+2}$ 行表示第 $\\text{i}$ 个棋盘的长度。", "outputFormat": "应当包含 $m$ 行。只有一个数字应当被写入文件的第 $i$ 行：\n\n如果对第 $i$ 个棋盘先手有必胜策略，输出 $1$，否则输出 $2$。", "hint": "对于 $100$ % 的数据： $1 \\le c,z,n,m,p \\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2000] 条纹", "background": "", "description": "条纹游戏是一个双人的游戏。所需要的物品有一个棋盘以及三种颜色的长方形条纹，这三种颜色分别是红色、绿色和蓝色。所有的红色条纹的尺寸是 $c \\times 1$，所有的绿色条纹的尺寸是 $z \\times 1$，所有的蓝色条纹的尺寸是 $n \\times 1$，这里 $c,z,n$ 是正整数。每种颜色的条纹每个游戏者都拥有无限多个。\n\n一个棋盘是一个尺寸为 $p \\times 1$ 的长方形，由 $p$ 个 $1 \\times 1$ 的方格组成。\n\n游戏者轮流走，每一步都是由一个游戏者任选一种长方形条纹覆盖到棋盘上，并要求遵循以下规则：\n\n1. 条纹不能伸出棋盘之外。\n2. 不能覆盖在已有的条纹之上（即使部分也不行）。\n3. 条纹的边缘必须与棋盘方格的边缘相重叠。谁不能再走，谁就输了。\n\n先手是指在游戏中第一个走的游戏者。那么是否不管后手怎么走，先手都有必胜策略呢？\n\n请你编写一个程序：\n\n1. 读入条纹的尺寸以及至少一个棋盘的尺寸。\n2. 对每一个给出的棋盘判断先手是否必胜。\n3. 将结果输出。", "inputFormat": "第 $\\text{1}$ 行包含三个整数 $c,z,n$，表示三种条纹的长度，依次为红色，绿色以及蓝色。每两个数之间都用空格隔开。\n\n文件的第 $\\text{2}$ 行包括一个整数 $m$ 表示需要考虑的不同棋盘个数。以下 $\\text{3}$ 到 $\\text{m+2}$ 行每行包括一个整数 $p$ ,第 $\\text{i+2}$ 行表示第 $\\text{i}$ 个棋盘的长度。", "outputFormat": "应当包含 $m$ 行。只有一个数字应当被写入文件的第 $i$ 行：\n\n如果对第 $i$ 个棋盘先手有必胜策略，输出 $1$，否则输出 $2$。", "hint": "对于 $100$ % 的数据： $1 \\le c,z,n,m,p \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P8370", "type": "P", "difficulty": 4, "samples": [["1 2\n12\n0 0\n1 1\n2 2\n3 3\n4 5\n5 5\n4 2\n1 4\n0 5\n5 0\n2 3\n3 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2001", "POI（波兰）"], "title": "[POI 2001] Goldmine", "background": "", "description": "$\\text{Byteman}$ 作为 $\\text{Byteland}$ 的 $\\text{The Goldmine}$（某一公司厂矿）的最有功的雇员之一，即将在年末退休。\n\n为了表示对他的认真勤恳的工作的承认，$\\text{The Goldmine}$ 的管理层愿意奖励他一小块长方形的矿地，此矿地长和宽为 $s$  和 $w$ ，且平行于坐标系统的轴线。长方形矿地的位置可由他自己选。当然，这块地的价值会随着位置的不同而不同。其价值是指这块区域内天然金矿石的数量（若矿石位于这块地的边缘，我们同样认为他是属于这个区域的）。\n\n你们的任务是计算出这块地的最大可能价值（即：为它选择最佳位置）。为简便起见，我们假定整个金矿的矿区是无穷的，但含有天然金矿石的区域却是有限的。\n\n请你编写一个程序：\n\n1. 读入天然金矿石的位置。\n\n2. 计算这块地的最大可能价值（即：求给定大小的这块地所含的天然金矿石的最大数）。", "inputFormat": "第一行输入两个正整数 $s,w$，各自代表着此矩形区域平行 $X$ 轴和 $Y$ 轴的边的长度。\n\n第二行输入一个正整数 $n$，它表示此金矿矿区内天然矿石的数量。接下来的 $n$ 行，每行输入两个用单个空格隔开的整数 $x,y$，它们分别表示了某一天然金矿石的 $X$ 坐标和 $Y$ 坐标。", "outputFormat": "输出一个整数，表示此块给定大小的矿地的最高价值。", "hint": "对于 $100$ % 的数据：$1 \\le s,w \\le 10000,1 \\le n \\le 15000,-30000 \\le x,y \\le 30000$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2001] Goldmine", "background": "", "description": "$\\text{Byteman}$ 作为 $\\text{Byteland}$ 的 $\\text{The Goldmine}$（某一公司厂矿）的最有功的雇员之一，即将在年末退休。\n\n为了表示对他的认真勤恳的工作的承认，$\\text{The Goldmine}$ 的管理层愿意奖励他一小块长方形的矿地，此矿地长和宽为 $s$  和 $w$ ，且平行于坐标系统的轴线。长方形矿地的位置可由他自己选。当然，这块地的价值会随着位置的不同而不同。其价值是指这块区域内天然金矿石的数量（若矿石位于这块地的边缘，我们同样认为他是属于这个区域的）。\n\n你们的任务是计算出这块地的最大可能价值（即：为它选择最佳位置）。为简便起见，我们假定整个金矿的矿区是无穷的，但含有天然金矿石的区域却是有限的。\n\n请你编写一个程序：\n\n1. 读入天然金矿石的位置。\n\n2. 计算这块地的最大可能价值（即：求给定大小的这块地所含的天然金矿石的最大数）。", "inputFormat": "第一行输入两个正整数 $s,w$，各自代表着此矩形区域平行 $X$ 轴和 $Y$ 轴的边的长度。\n\n第二行输入一个正整数 $n$，它表示此金矿矿区内天然矿石的数量。接下来的 $n$ 行，每行输入两个用单个空格隔开的整数 $x,y$，它们分别表示了某一天然金矿石的 $X$ 坐标和 $Y$ 坐标。", "outputFormat": "输出一个整数，表示此块给定大小的矿地的最高价值。", "hint": "对于 $100$ % 的数据：$1 \\le s,w \\le 10000,1 \\le n \\le 15000,-30000 \\le x,y \\le 30000$ 。", "locale": "zh-CN"}}}
{"pid": "P8371", "type": "P", "difficulty": 5, "samples": [["5 3\n0 2 6 7\n0 3 6 7 8\n0 1 8\n1 1 7\n1 1 8\n1 2 1 2\n0 2 1 2\n0 2 3 4", "5\n1\n2\n4\n6\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2001", "POI（波兰）"], "title": "[POI 2001] 绿色游戏", "background": null, "description": "绿色游戏是一种两人游戏，双方分别称 $\\text{Ann}$ 和$\\text{Billy}$。游戏的内容主要是轮流在棋盘上移动一颗棋子。\n\n棋盘上的点一部分是绿色的，其余是白色的。它们全部从 $1$ 至 $a+b$ 编号。编号 $1$ 至 $a$ 的点属于 $\\text{Ann}$ ，编号 $a+1$ 至 $a+b$ 的点属于 $\\text{Billy}$。每个点都有一些后继点，均可一步到达。属于 $\\text{Ann}$ 的点的后继点一定属于 $\\text{Billy}$，反之亦然。所有的点都至少有一个后继点，这样总可以往下走一步。\n\n游戏开始时把棋子放在任意的一点 $P$ 上，然后双方轮流移动棋子至当前所在点（属于移动方）的一个后继点上（属于对手）。游戏由点 $P$ 的拥有者开始，结束时棋子第二次到达了某一点，称点 $Q$。如果在从点 $Q$ 至点 $Q$ 的一连串移动中，棋子至少一次被放到绿色点上，则 $\\text{Ann}$ 赢。若从点 $P$ 开始，不管 $\\text{Billy}$ 如何移动， $\\text{Ann}$ 总能保证赢得这次游戏，则称 $\\text{Ann}$ 对起始点 $P$ 有必胜的策略。\n\n请你编写一个程序：\n \n1. 读入对棋盘的描述。\n\n2. 算出 $\\text{Ann}$ 有必胜策略的起始点。", "inputFormat": "首行有两个整数 $a$ 和 $b$ ，两个整数之间用一个空格分开，分别表示属于 $\\text{Ann}$ 和 $\\text{Billy}$ 的点数 $(1 \\le a，b \\le 3000)$。以下 $a+b$ 行是对各点的描述，先描述 $\\text{Ann}$ 的点，再描述 $\\text{Billy}$ 的点。\n\n第 $i+1$ 行（$1 \\le i \\le a+b$） 以整数 $z，k$ 开始：$z$ 表示点 $i$ 的颜色（$0$－白色，$1$－绿色），$k$ 表示后继点的数目。然后是 $K$ 个整数（$2 \\le k \\leq a+b$），写在同一行，代表点 $i$ 后继点的编号，这些整数均用一个空格分开。绿点的个数不超过 $100$ ，所有点的后继点的个数之和不超过 $30000$ 。", "outputFormat": "首行仅一个整数 $L$ ，代表 $\\text{Ann}$ 有 $L$ 个有必胜策略的起始点。以下 $L$ 行按升序顺序依次给出这些点的编号。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2001] 绿色游戏", "background": null, "description": "绿色游戏是一种两人游戏，双方分别称 $\\text{Ann}$ 和$\\text{Billy}$。游戏的内容主要是轮流在棋盘上移动一颗棋子。\n\n棋盘上的点一部分是绿色的，其余是白色的。它们全部从 $1$ 至 $a+b$ 编号。编号 $1$ 至 $a$ 的点属于 $\\text{Ann}$ ，编号 $a+1$ 至 $a+b$ 的点属于 $\\text{Billy}$。每个点都有一些后继点，均可一步到达。属于 $\\text{Ann}$ 的点的后继点一定属于 $\\text{Billy}$，反之亦然。所有的点都至少有一个后继点，这样总可以往下走一步。\n\n游戏开始时把棋子放在任意的一点 $P$ 上，然后双方轮流移动棋子至当前所在点（属于移动方）的一个后继点上（属于对手）。游戏由点 $P$ 的拥有者开始，结束时棋子第二次到达了某一点，称点 $Q$。如果在从点 $Q$ 至点 $Q$ 的一连串移动中，棋子至少一次被放到绿色点上，则 $\\text{Ann}$ 赢。若从点 $P$ 开始，不管 $\\text{Billy}$ 如何移动， $\\text{Ann}$ 总能保证赢得这次游戏，则称 $\\text{Ann}$ 对起始点 $P$ 有必胜的策略。\n\n请你编写一个程序：\n \n1. 读入对棋盘的描述。\n\n2. 算出 $\\text{Ann}$ 有必胜策略的起始点。", "inputFormat": "首行有两个整数 $a$ 和 $b$ ，两个整数之间用一个空格分开，分别表示属于 $\\text{Ann}$ 和 $\\text{Billy}$ 的点数 $(1 \\le a，b \\le 3000)$。以下 $a+b$ 行是对各点的描述，先描述 $\\text{Ann}$ 的点，再描述 $\\text{Billy}$ 的点。\n\n第 $i+1$ 行（$1 \\le i \\le a+b$） 以整数 $z，k$ 开始：$z$ 表示点 $i$ 的颜色（$0$－白色，$1$－绿色），$k$ 表示后继点的数目。然后是 $K$ 个整数（$2 \\le k \\leq a+b$），写在同一行，代表点 $i$ 后继点的编号，这些整数均用一个空格分开。绿点的个数不超过 $100$ ，所有点的后继点的个数之和不超过 $30000$ 。", "outputFormat": "首行仅一个整数 $L$ ，代表 $\\text{Ann}$ 有 $L$ 个有必胜策略的起始点。以下 $L$ 行按升序顺序依次给出这些点的编号。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P8374", "type": "P", "difficulty": 7, "samples": [["1\n1\n1 0 0\n1 1 0\n0 0 1", "2"], ["1\n2\n1 1 0 1 1\n1 1 0 0 0\n1 0 1 1 1\n0 1 0 0 0\n0 1 1 1 1", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2022] 火星", "background": "本题只支持 C++ 提交，提交时不需要包含 `mars.h` 头文件，只需要将附件中的 `mars.h` 中的内容粘贴到代码的开头即可。\n\n请使用 C++14、C++17 等语言，**而不是 C++14 (GCC 9)**，因为一些未知原因这个语言下 SPJ 会 CE。\n\n**【注】：洛谷暂不支持题面中所说的评测方式，我实现了一个洛谷支持的简易版本的交互库，但不能对传递数据进行有效限制，请各位自觉。**\n\n", "description": "你们晓得，法老们是最先去过外太空的人。他们发射过首次登陆行星图特摩斯一世（Thutmus I，现在一般叫它火星）的飞船。行星的表面可以建模成由方形单元构成的 $(2n + 1) \\times (2n + 1)$ 网格，其中每个单元中或者为陆地、或者为水域。对于第 $i$ 行第 $j$ 列（$0 \\le i, j \\le 2 \\cdot n$）的单元，如果单元中为陆地，则其状态表示为 $s[i][j] = \\texttt{1}$；如果单元中为水域，则表示为 $s[i][j] = \\texttt{0}$。\n\n如果在两个陆地单元之间存在某条仅由陆地单元构成的路径，而且路径中每两个连续的前后单元都有公共边，则称这两个陆地单元是连通的。行星上的岛屿被定义为两两连通的陆地单元的极大集合。\n\n飞船的任务是统计该行星上岛屿的数量。然而，考虑到飞船的上古电脑，这事儿并不容易。电脑的内存储器 $h$ 以一个 $(2n + 1) \\times (2n + 1)$ 的二维数组的形式存储数据，且数组的每个位置上可以保存长度为 $100$ 的字符串，串中的每个字母为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）。初始时，存储器的每个位置的第 $0$ 位记录的是上述网格中每个单元的状态，即 $h[i][j][0] = s[i][j]$（对所有 $0 \\le i, j \\le 2 \\cdot n$）。$h$ 中的其他位在初始时都被置为 $\\texttt{0}$（ASCII 码 $48$）。\n\n在处理存储器中的数据时，电脑只能访问存储器中的 $3 \\times 3$ 区块，并且改写该区块左上角位置的值。说得更正式一点，电脑可以访问 $h[i \\dots i + 2][j \\dots j + 2]$（$0 \\le i, j \\le 2 \\cdot (n - 1)$）中的值，并且改写 $h[i][j]$ 中的值。在\n下文中，该过程被叫做**处理单元** $(i, j)$。\n\n为了解决电脑能力的局限，法老们搞出了下面的套路：\n\n- 电脑可以分成 $n$ 个阶段来操作存储器。\n- 在阶段 $k$（$0 \\le k \\le n - 1$），令 $m = 2 \\cdot (n - k - 1)$， 电脑将对所有的 $0 \\le i, j \\le m$，按照 $i$ 的升序以及每个 $i$ 上 $j$ 的升序，处理单元 $(i, j)$。换句话说，电脑将按照如下顺序处理这些单元：$(0, 0), (0, 1),\\cdots , (0, m), (1, 0), (1, 1),\\cdots , (1, m),\\cdots , (m, 0), (m, 1),\\cdots , (m, m)$。\n- 在最后一个阶段（$k = n - 1$），电脑仅处理单元 $(0, 0)$。该阶段结束后，写入到 $h[0][0]$ 的值应该等于行星上的岛屿数量，而且该值应以字符串的形式表示成二进制，其中最低有效位对应于字符串的首字符。\n\n下图给出了电脑操作某个 $5 \\times 5$（$n = 2$）存储器的方式。蓝色单元表示该单元正在被改写，而着色的单元则表示被处理的子数组。\n\n在阶段 $0$，电脑将以如下顺序处理下面的子数组：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m33yffaa.png)\n\n在阶段 $1$，电脑将仅处理一个子数组：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/inav002a.png)\n\n你的任务是给出一个方法，让电脑能在给定的操作方式下，统计出行星图特摩斯一世上的岛屿数量。\n\n## 实现细节\n\n你需要实现下面的函数：\n\n```cpp\nstring process(string[][] a, int i, int j, int k, int n)\n```\n\n- $a$：一个 $3 \\times 3$ 数组，表示正在被处理的子数组。特别说明，有 $a = h[i \\dots i + 2][j \\dots j + 2]$，这里 $a$ 中的每个元素均为长度恰好为 $100$ 的字符串，而且串中的字符为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）。\n- $i, j$：电脑当前正在处理的单元的行号和列号。\n- $k$：当前阶段的序号。\n- $n$：阶段总数，同时也是行星表面的大小，此时行星表面包含 $(2n + 1) \\times (2n + 1)$ 个单元。\n- 该函数应返回一个长度为 $100$ 的二进制表示字符串。返回值将保存在电脑存储器中的 $h[i][j]$ 处。\n- $k = n - 1$ 时，是该函数的最后一次调用。在此次调用中，函数应以字符串的形式返回行星上的岛屿数量的二进制表示，其最低有效位对应下标 $0$ 处的字符（二进制字符串的首字符），次低有效位对应下标 $1$ 处的字符，以此类推。\n- 该函数必须独立于任何的静态或全局变量，且其返回值应仅依赖于传递给该函数的参数。\n\n每个测试用例包括 $T$ 个独立的场景（也就是说，不同的行星表面情形）。你的函数在每个场景上的行为，必须与这些场景的顺序无关，因为对同一场景的 `process` 函数调用可能不是连续发生的。但是，可以确保对每个场景，会按照题面所描述的顺序来调用函数 `process`。\n\n此外，对每个测试用例，你的程序可能会同时运行多个实例。内存限制和 CPU 用时限制将施加在所有这些实例的总和上。任何故意在这些实例之间偷偷传递数据的行为，都将被认定为作弊，选手可能会因此被取消比赛资格。\n\n**【注】：洛谷暂不支持这种评测方式，我实现了一个洛谷支持的简易版本的交互库，但不能对传递数据进行有效限制，请各位自觉。**\n\n特别说明，在调用函数 `process` 时保存在静态或全局变量中的信息，不保证在下次调用时可以读出。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n- 第 $1$ 行：$T$。\n- 第 $i$ 个区块（$0 \\le i \\le T - 1$）：该区块表示第 $i$ 个场景。\n\t- 第 $1$ 行：$n$。\n\t- 第 $2 + j$ 行（$0 \\le j \\le 2 ⋅ n$）：$s[j][0]\\ s[j][1]\\ \\dots\\ s[j][2 \\cdot n]$。", "outputFormat": "评测程序示例将按照如下格式打印出结果：\n\n- 第 $1 + i$ 行（$0 \\le i \\le T - 1$）：在第 $i$ 个场景上，函数 `process` 最后一次的返回值的十进制表示。", "hint": "## 例子\n\n### 例 $1$\n\n考虑 $n=1$ 的样例，其中 $s$ 如下所示：\n\n```text\n'1' '0' '0'\n'1' '1' '0'\n'0' '0' '1'\n```\n\n在本例中，行星表面包括 $3 \\times 3$ 个单元，其中有 $2$ 个岛屿。对函数 `process` 的调用至多只有 $1$ 个阶段。\n\n在阶段 $0$，评测程序将调用函数 `process` 恰好一次：\n\n```cpp\nprocess([[\"100\",\"000\",\"000\"],[\"100\",\"100\",\"000\"],[\"000\",\"000\",\"100\"]],0,0,0,1)\n```\n\n注意这里仅展示了 $h$ 中每个元素的前 $3$ 位。\n\n该函数应返回 $\\texttt{0100}\\dots$（省略的位全部为零），这里二进制的 $\\dots 0010$ 等于十进制的 $2$。注意，这里省略了 $96$ 个零并用 $\\dots$ 来代替。\n\n### 例 $2$\n\n考虑 $n=2$ 的样例，其中 $s$ 如下所示：\n\n```text\n'1' '1' '0' '1' '1'\n'1' '1' '0' '0' '0'\n'1' '0' '1' '1' '1'\n'0' '1' '0' '0' '0'\n'0' '1' '1' '1' '1'\n```\n\n在本例中，行星表面包括 $5 \\times 5$ 个单元，其中有 $4$ 个岛屿。对函数 `process` 的调用至多只有 $2$ 个阶段。\n\n在阶段 $0$，评测程序将调用函数 `process` 恰好一次：\n\n```cpp\nprocess([[\"100\",\"100\",\"000\"],[\"100\",\"100\",\"000\"],[\"100\",\"000\",\"100\"]],0,0,0,2)\nprocess([[\"100\",\"000\",\"100\"],[\"100\",\"000\",\"000\"],[\"000\",\"100\",\"100\"]],0,1,0,2)\nprocess([[\"000\",\"100\",\"100\"],[\"000\",\"000\",\"000\"],[\"100\",\"100\",\"100\"]],0,2,0,2)\nprocess([[\"100\",\"100\",\"000\"],[\"100\",\"000\",\"100\"],[\"000\",\"100\",\"000\"]],1,0,0,2)\nprocess([[\"100\",\"000\",\"000\"],[\"000\",\"100\",\"100\"],[\"100\",\"000\",\"000\"]],1,1,0,2)\nprocess([[\"000\",\"000\",\"000\"],[\"100\",\"100\",\"100\"],[\"000\",\"000\",\"000\"]],1,2,0,2)\nprocess([[\"100\",\"000\",\"100\"],[\"000\",\"100\",\"000\"],[\"000\",\"100\",\"100\"]],2,0,0,2)\nprocess([[\"000\",\"100\",\"100\"],[\"100\",\"000\",\"000\"],[\"100\",\"100\",\"100\"]],2,1,0,2)\nprocess([[\"100\",\"100\",\"100\"],[\"000\",\"000\",\"000\"],[\"100\",\"100\",\"100\"]],2,2,0,2)\n```\n\n假定上面调用得到的返回值分别为 $\\texttt{011},\\texttt{000},\\texttt{000},\\texttt{111},\\texttt{111},\\texttt{011},\\texttt{110},\\texttt{010},\\texttt{111}$，被省略的位均为零。因此，在阶段 $0$ 结束后，$h$ 将保存有如下的值：\n\n```text\n\"011\", \"000\", \"000\", \"100\", \"100\"\n\"111\", \"111\", \"011\", \"000\", \"000\"\n\"110\", \"010\", \"111\", \"100\", \"100\"\n\"000\", \"100\", \"000\", \"000\", \"000\"\n\"000\", \"100\", \"100\", \"100\", \"100\"\n```\n\n在阶段 $1$，评测程序将调用函数 `process` 一次：\n\n```cpp\nprocess([[\"011\",\"000\",\"000\"],[\"111\",\"111\",\"011\"],[\"110\",\"010\",\"111\"]],0,0,1,2)\n```\n\n最后，本次函数调用应返回 $\\texttt{0010000}\\dots$（被省略的位均为零），这里二进制的 $\\dots 0000100$ 等于十进制的 $4$。注意这里省略了 $93$ 个零并用 $\\dots$ 来代替。\n\n## 约束条件\n\n- $1\\le T\\le 10$。\n- $1\\le n\\le 20$。\n- $s[i][j]$ 为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）（对所有 $0\\le i,j\\le 2\\cdot n$）。\n- $h[i][j]$ 的长度恰好为 $100$（对所有 $0\\le i,j\\le 2\\cdot n$）。\n- $h[i][j]$ 中的每个字符均为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）（对所有 $0\\le i,j\\le 2\\cdot n$）。\n\n对函数 `process` 的每次调用，都有：\n\n- $0\\le k\\le n-1$。\n- $0\\le i,j\\le 2\\cdot (n-k-1)$。\n\n## 子任务\n\n1. （$6$ 分）$n\\le 2$。\n2. （$8$ 分）$n\\le 4$。\n3. （$7$ 分）$n\\le 6$。\n4. （$8$ 分）$n\\le 8$。\n5. （$7$ 分）$n\\le 10$。\n6. （$8$ 分）$n\\le 12$。\n7. （$10$ 分）$n\\le 14$。\n8. （$24$ 分）$n\\le 16$。\n9. （$11$ 分）$n\\le 18$。\n10. （$11$ 分）$n\\le 20$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2022] 火星", "background": "本题只支持 C++ 提交，提交时不需要包含 `mars.h` 头文件，只需要将附件中的 `mars.h` 中的内容粘贴到代码的开头即可。\n\n请使用 C++14、C++17 等语言，**而不是 C++14 (GCC 9)**，因为一些未知原因这个语言下 SPJ 会 CE。\n\n**【注】：洛谷暂不支持题面中所说的评测方式，我实现了一个洛谷支持的简易版本的交互库，但不能对传递数据进行有效限制，请各位自觉。**\n\n", "description": "你们晓得，法老们是最先去过外太空的人。他们发射过首次登陆行星图特摩斯一世（Thutmus I，现在一般叫它火星）的飞船。行星的表面可以建模成由方形单元构成的 $(2n + 1) \\times (2n + 1)$ 网格，其中每个单元中或者为陆地、或者为水域。对于第 $i$ 行第 $j$ 列（$0 \\le i, j \\le 2 \\cdot n$）的单元，如果单元中为陆地，则其状态表示为 $s[i][j] = \\texttt{1}$；如果单元中为水域，则表示为 $s[i][j] = \\texttt{0}$。\n\n如果在两个陆地单元之间存在某条仅由陆地单元构成的路径，而且路径中每两个连续的前后单元都有公共边，则称这两个陆地单元是连通的。行星上的岛屿被定义为两两连通的陆地单元的极大集合。\n\n飞船的任务是统计该行星上岛屿的数量。然而，考虑到飞船的上古电脑，这事儿并不容易。电脑的内存储器 $h$ 以一个 $(2n + 1) \\times (2n + 1)$ 的二维数组的形式存储数据，且数组的每个位置上可以保存长度为 $100$ 的字符串，串中的每个字母为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）。初始时，存储器的每个位置的第 $0$ 位记录的是上述网格中每个单元的状态，即 $h[i][j][0] = s[i][j]$（对所有 $0 \\le i, j \\le 2 \\cdot n$）。$h$ 中的其他位在初始时都被置为 $\\texttt{0}$（ASCII 码 $48$）。\n\n在处理存储器中的数据时，电脑只能访问存储器中的 $3 \\times 3$ 区块，并且改写该区块左上角位置的值。说得更正式一点，电脑可以访问 $h[i \\dots i + 2][j \\dots j + 2]$（$0 \\le i, j \\le 2 \\cdot (n - 1)$）中的值，并且改写 $h[i][j]$ 中的值。在\n下文中，该过程被叫做**处理单元** $(i, j)$。\n\n为了解决电脑能力的局限，法老们搞出了下面的套路：\n\n- 电脑可以分成 $n$ 个阶段来操作存储器。\n- 在阶段 $k$（$0 \\le k \\le n - 1$），令 $m = 2 \\cdot (n - k - 1)$， 电脑将对所有的 $0 \\le i, j \\le m$，按照 $i$ 的升序以及每个 $i$ 上 $j$ 的升序，处理单元 $(i, j)$。换句话说，电脑将按照如下顺序处理这些单元：$(0, 0), (0, 1),\\cdots , (0, m), (1, 0), (1, 1),\\cdots , (1, m),\\cdots , (m, 0), (m, 1),\\cdots , (m, m)$。\n- 在最后一个阶段（$k = n - 1$），电脑仅处理单元 $(0, 0)$。该阶段结束后，写入到 $h[0][0]$ 的值应该等于行星上的岛屿数量，而且该值应以字符串的形式表示成二进制，其中最低有效位对应于字符串的首字符。\n\n下图给出了电脑操作某个 $5 \\times 5$（$n = 2$）存储器的方式。蓝色单元表示该单元正在被改写，而着色的单元则表示被处理的子数组。\n\n在阶段 $0$，电脑将以如下顺序处理下面的子数组：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m33yffaa.png)\n\n在阶段 $1$，电脑将仅处理一个子数组：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/inav002a.png)\n\n你的任务是给出一个方法，让电脑能在给定的操作方式下，统计出行星图特摩斯一世上的岛屿数量。\n\n## 实现细节\n\n你需要实现下面的函数：\n\n```cpp\nstring process(string[][] a, int i, int j, int k, int n)\n```\n\n- $a$：一个 $3 \\times 3$ 数组，表示正在被处理的子数组。特别说明，有 $a = h[i \\dots i + 2][j \\dots j + 2]$，这里 $a$ 中的每个元素均为长度恰好为 $100$ 的字符串，而且串中的字符为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）。\n- $i, j$：电脑当前正在处理的单元的行号和列号。\n- $k$：当前阶段的序号。\n- $n$：阶段总数，同时也是行星表面的大小，此时行星表面包含 $(2n + 1) \\times (2n + 1)$ 个单元。\n- 该函数应返回一个长度为 $100$ 的二进制表示字符串。返回值将保存在电脑存储器中的 $h[i][j]$ 处。\n- $k = n - 1$ 时，是该函数的最后一次调用。在此次调用中，函数应以字符串的形式返回行星上的岛屿数量的二进制表示，其最低有效位对应下标 $0$ 处的字符（二进制字符串的首字符），次低有效位对应下标 $1$ 处的字符，以此类推。\n- 该函数必须独立于任何的静态或全局变量，且其返回值应仅依赖于传递给该函数的参数。\n\n每个测试用例包括 $T$ 个独立的场景（也就是说，不同的行星表面情形）。你的函数在每个场景上的行为，必须与这些场景的顺序无关，因为对同一场景的 `process` 函数调用可能不是连续发生的。但是，可以确保对每个场景，会按照题面所描述的顺序来调用函数 `process`。\n\n此外，对每个测试用例，你的程序可能会同时运行多个实例。内存限制和 CPU 用时限制将施加在所有这些实例的总和上。任何故意在这些实例之间偷偷传递数据的行为，都将被认定为作弊，选手可能会因此被取消比赛资格。\n\n**【注】：洛谷暂不支持这种评测方式，我实现了一个洛谷支持的简易版本的交互库，但不能对传递数据进行有效限制，请各位自觉。**\n\n特别说明，在调用函数 `process` 时保存在静态或全局变量中的信息，不保证在下次调用时可以读出。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n- 第 $1$ 行：$T$。\n- 第 $i$ 个区块（$0 \\le i \\le T - 1$）：该区块表示第 $i$ 个场景。\n\t- 第 $1$ 行：$n$。\n\t- 第 $2 + j$ 行（$0 \\le j \\le 2 ⋅ n$）：$s[j][0]\\ s[j][1]\\ \\dots\\ s[j][2 \\cdot n]$。", "outputFormat": "评测程序示例将按照如下格式打印出结果：\n\n- 第 $1 + i$ 行（$0 \\le i \\le T - 1$）：在第 $i$ 个场景上，函数 `process` 最后一次的返回值的十进制表示。", "hint": "## 例子\n\n### 例 $1$\n\n考虑 $n=1$ 的样例，其中 $s$ 如下所示：\n\n```text\n'1' '0' '0'\n'1' '1' '0'\n'0' '0' '1'\n```\n\n在本例中，行星表面包括 $3 \\times 3$ 个单元，其中有 $2$ 个岛屿。对函数 `process` 的调用至多只有 $1$ 个阶段。\n\n在阶段 $0$，评测程序将调用函数 `process` 恰好一次：\n\n```cpp\nprocess([[\"100\",\"000\",\"000\"],[\"100\",\"100\",\"000\"],[\"000\",\"000\",\"100\"]],0,0,0,1)\n```\n\n注意这里仅展示了 $h$ 中每个元素的前 $3$ 位。\n\n该函数应返回 $\\texttt{0100}\\dots$（省略的位全部为零），这里二进制的 $\\dots 0010$ 等于十进制的 $2$。注意，这里省略了 $96$ 个零并用 $\\dots$ 来代替。\n\n### 例 $2$\n\n考虑 $n=2$ 的样例，其中 $s$ 如下所示：\n\n```text\n'1' '1' '0' '1' '1'\n'1' '1' '0' '0' '0'\n'1' '0' '1' '1' '1'\n'0' '1' '0' '0' '0'\n'0' '1' '1' '1' '1'\n```\n\n在本例中，行星表面包括 $5 \\times 5$ 个单元，其中有 $4$ 个岛屿。对函数 `process` 的调用至多只有 $2$ 个阶段。\n\n在阶段 $0$，评测程序将调用函数 `process` 恰好一次：\n\n```cpp\nprocess([[\"100\",\"100\",\"000\"],[\"100\",\"100\",\"000\"],[\"100\",\"000\",\"100\"]],0,0,0,2)\nprocess([[\"100\",\"000\",\"100\"],[\"100\",\"000\",\"000\"],[\"000\",\"100\",\"100\"]],0,1,0,2)\nprocess([[\"000\",\"100\",\"100\"],[\"000\",\"000\",\"000\"],[\"100\",\"100\",\"100\"]],0,2,0,2)\nprocess([[\"100\",\"100\",\"000\"],[\"100\",\"000\",\"100\"],[\"000\",\"100\",\"000\"]],1,0,0,2)\nprocess([[\"100\",\"000\",\"000\"],[\"000\",\"100\",\"100\"],[\"100\",\"000\",\"000\"]],1,1,0,2)\nprocess([[\"000\",\"000\",\"000\"],[\"100\",\"100\",\"100\"],[\"000\",\"000\",\"000\"]],1,2,0,2)\nprocess([[\"100\",\"000\",\"100\"],[\"000\",\"100\",\"000\"],[\"000\",\"100\",\"100\"]],2,0,0,2)\nprocess([[\"000\",\"100\",\"100\"],[\"100\",\"000\",\"000\"],[\"100\",\"100\",\"100\"]],2,1,0,2)\nprocess([[\"100\",\"100\",\"100\"],[\"000\",\"000\",\"000\"],[\"100\",\"100\",\"100\"]],2,2,0,2)\n```\n\n假定上面调用得到的返回值分别为 $\\texttt{011},\\texttt{000},\\texttt{000},\\texttt{111},\\texttt{111},\\texttt{011},\\texttt{110},\\texttt{010},\\texttt{111}$，被省略的位均为零。因此，在阶段 $0$ 结束后，$h$ 将保存有如下的值：\n\n```text\n\"011\", \"000\", \"000\", \"100\", \"100\"\n\"111\", \"111\", \"011\", \"000\", \"000\"\n\"110\", \"010\", \"111\", \"100\", \"100\"\n\"000\", \"100\", \"000\", \"000\", \"000\"\n\"000\", \"100\", \"100\", \"100\", \"100\"\n```\n\n在阶段 $1$，评测程序将调用函数 `process` 一次：\n\n```cpp\nprocess([[\"011\",\"000\",\"000\"],[\"111\",\"111\",\"011\"],[\"110\",\"010\",\"111\"]],0,0,1,2)\n```\n\n最后，本次函数调用应返回 $\\texttt{0010000}\\dots$（被省略的位均为零），这里二进制的 $\\dots 0000100$ 等于十进制的 $4$。注意这里省略了 $93$ 个零并用 $\\dots$ 来代替。\n\n## 约束条件\n\n- $1\\le T\\le 10$。\n- $1\\le n\\le 20$。\n- $s[i][j]$ 为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）（对所有 $0\\le i,j\\le 2\\cdot n$）。\n- $h[i][j]$ 的长度恰好为 $100$（对所有 $0\\le i,j\\le 2\\cdot n$）。\n- $h[i][j]$ 中的每个字符均为 $\\texttt{0}$（ASCII 码 $48$）或 $\\texttt{1}$（ASCII 码 $49$）（对所有 $0\\le i,j\\le 2\\cdot n$）。\n\n对函数 `process` 的每次调用，都有：\n\n- $0\\le k\\le n-1$。\n- $0\\le i,j\\le 2\\cdot (n-k-1)$。\n\n## 子任务\n\n1. （$6$ 分）$n\\le 2$。\n2. （$8$ 分）$n\\le 4$。\n3. （$7$ 分）$n\\le 6$。\n4. （$8$ 分）$n\\le 8$。\n5. （$7$ 分）$n\\le 10$。\n6. （$8$ 分）$n\\le 12$。\n7. （$10$ 分）$n\\le 14$。\n8. （$24$ 分）$n\\le 16$。\n9. （$11$ 分）$n\\le 18$。\n10. （$11$ 分）$n\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P8375", "type": "P", "difficulty": 7, "samples": [["6 5 3\n3 4\n5 0\n4 5\n5 3\n1 4", "4"], ["4 1 2\n1 1", "0"], ["4 3 2\n1 3\n2 0\n3 2", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2022] 游戏", "background": "本题只支持 C++ 提交，提交时不需要包含 `game.h` 头文件，只需要将附件中的 `game.h` 中的内容粘贴到代码的开头即可。", "description": "法老们发现了标号从 $0$ 到 $n - 1$ 的 $n$ 个星球，并且在它们之间建立了一个**单向传输系统**。在这个传输系统中，每个传送器连接一个起始星球和一个目的星球。当游客从一个起始星球使用传送器，就可以到达对应的目的星球。需要注意的是，起始星球和目的星球有可能是同一个星球。我们使用 $(u, v)$ 表示一个起始于星球 $u$ 到达星球 $v$ 的传送器。\n\n为了促进传输系统的广泛使用，法老们设计了一个供游客们在乘坐传送系统时可以进行的游戏。一名游客可以从任一星球出发。标号 $0, 1,\\dots , k - 1$（$k \\le n$）的星球被称为**特殊星球**。当游客每次进入一个特殊星球，就可以获得一枚邮票。\n\n目前，对于每个星球 $i$（$0 \\le i \\le k - 2$），都建立了一个传送器 $(i, i + 1)$。这 $k - 1$ 个传送器叫做**起始传送器**。\n\n传送器随着时间不断建立。随着传送器的建立，一名游客也许有可能获得无穷多枚邮票。准确来说，这种情况会在存在一个满足如下条件的星球序列 $w[0], w[1],\\dots , w[t]$ 时发生：\n\n- $1 \\le t$。\n- $0 \\le w[0] \\le k - 1$。\n- $w[t] = w[0]$。\n- 对于每个星球 $i$（$0 \\le i \\le t - 1$），存在一个传送器 $(w[i], w[i + 1])$。\n\n注意一名游客能够使用起始传送器和任何一个目前已经建立的传送器。\n\n你的任务是，帮助法老验证在每次加入新的传送器后，一位游客是否能够拿到无穷多枚邮票。\n\n## 实现细节\n\n你需要实现下述函数：\n\n```cpp\ninit(int n, int k)\n```\n\n- $n$：星球数量。\n- $k$：特殊星球数量。\n- 这个函数只会被调用一次，早于任何一次 `add_teleporter` 调用。\n\n```cpp\nint add_teleporter(int u, int v)\n```\n\n- $u$ 和 $v$：被加入传送器的起始和目的星球。\n- 这个函数至多被调用 $m$ 次（$m$ 的取值范围参阅“约束条件”部分的内容）。\n- 如果当传送器 $(u, v)$ 被加入后游客能够获得无穷多枚邮票，函数需要返回 $1$。否则，这个函数应该返回 $0$。\n- 一旦函数返回了 $1$，你的程序将会被终止。", "inputFormat": "评测程序示例按照如下的格式读取输入数据：\n\n- 第 $1$ 行：$n\\ m\\ k$。\n- 第 $2 + i$ 行（$0 \\le i \\le m - 1$）：$u[i]\\ v[i]$。\n\n评测程序示例首先调用 `init`，然后按照 $i = 0, 1,\\dots , m - 1$ 的顺序调用 `add_teleporter`：$u = u[i]$ 和 $v = v[i]$。", "outputFormat": "程序需要打印多次调用 `add_teleporter` 中首次返回 $1$ 的调用索引（$0$ 到 $m - 1$，包含 $0$ 和 $m - 1$）；当所有 `add_teleporter` 调用中都返回 $0$ 时，你的程序需要返回 $m$。\n\n如果某次 `add_teleporter` 调用返回了 $0$ 和 $1$ 之外的整数，评测程序示例会打印 $-1$，你的程序会被马上终止。", "hint": "## 例子\n\n### 例 $1$\n\n考虑下面的函数调用：\n\n```cpp\ninit(6, 3)\n```\n\n在这个例子里，有 $6$ 个星球和 $3$ 个特殊星球，标号为 $0,1,2$ 的星球是特殊星球。起始传送器是 $(0,1)$ 和 $(1,2)$。\n\n假设评测程序执行下述调用：\n\n- (0) `add_teleporter(3, 4)`：应该返回 $0$。\n- (1) `add_teleporter(5, 0)`：应该返回 $0$。\n- (2) `add_teleporter(4, 5)`：应该返回 $0$。\n- (3) `add_teleporter(5, 3)`：应该返回 $0$。\n- (4) `add_teleporter(1, 4)`：在这种情况下，是可能获得无穷多枚邮票的。例如，游客可以从星球 $0$ 出发，按照 $1, 4, 5, 0, 1, 4, 5, 0,\\dots$ 这个顺序进行。因此，函数需要返回 $1$，进一步你的程序会被终止。\n\n下图对于这个例子进行了说明。特殊星球和起始传送器都使用粗体字表示。通过 `add_teleporter` 加入的传送器，按照顺序被标记为 $0$ 到 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q80oy4px.png)\n\n### 例 $2$\n\n考虑下面的函数调用：\n\n```cpp\ninit(4, 2)\n```\n\n在这个例子里，有 $4$ 个星球和 $2$ 个特殊星球。标号为 $0$ 和 $1$ 星球是特殊星球。起始传送器是 $(0, 1)$。\n\n假设评测程序执行下述调用：\n\n- `add_teleporter(1, 1)`：当加入传送器 $(1, 1)$ 后，我们就能够获得无穷多枚邮票。例如，游客从星球 $1$ 出发，可以使用传送器 $(1, 1)$ 到达星球 $1$ 无限次。因此，函数需要返回 $1$，然后你的程序被终止。\n\n附件包里还包含了另一个样例输入输出。\n\n## 约束条件\n\n- $1\\le n\\le 3\\times 10^5$；\n- $1\\le m\\le 5\\times 10^5$；\n- $1\\le k\\le n$。\n\n对于每次调用 `add_teleporter` 函数：\n\n- $0\\le u\\le n-1$ 和 $0\\le v\\le n-1$；\n- 在传送器 $(u,v)$ 加入之前，不会有从星球 $u$ 到星球 $v$ 的传送器。\n\n## 子任务\n\n1. （$2$ 分）$n=k$，$n\\le 100$，$m\\le 300$；\n2. （$10$ 分）$n\\le 100$，$m\\le 300$。\n3. （$18$ 分）$n\\le 10^3$，$m\\le 5\\times 10^3$。\n4. （$30$ 分）$n\\le 3\\times 10^4$，$m\\le 5\\times 10^4$，$k\\le 10^3$。\n5. （$40$ 分）没有额外的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2022] 游戏", "background": "本题只支持 C++ 提交，提交时不需要包含 `game.h` 头文件，只需要将附件中的 `game.h` 中的内容粘贴到代码的开头即可。", "description": "法老们发现了标号从 $0$ 到 $n - 1$ 的 $n$ 个星球，并且在它们之间建立了一个**单向传输系统**。在这个传输系统中，每个传送器连接一个起始星球和一个目的星球。当游客从一个起始星球使用传送器，就可以到达对应的目的星球。需要注意的是，起始星球和目的星球有可能是同一个星球。我们使用 $(u, v)$ 表示一个起始于星球 $u$ 到达星球 $v$ 的传送器。\n\n为了促进传输系统的广泛使用，法老们设计了一个供游客们在乘坐传送系统时可以进行的游戏。一名游客可以从任一星球出发。标号 $0, 1,\\dots , k - 1$（$k \\le n$）的星球被称为**特殊星球**。当游客每次进入一个特殊星球，就可以获得一枚邮票。\n\n目前，对于每个星球 $i$（$0 \\le i \\le k - 2$），都建立了一个传送器 $(i, i + 1)$。这 $k - 1$ 个传送器叫做**起始传送器**。\n\n传送器随着时间不断建立。随着传送器的建立，一名游客也许有可能获得无穷多枚邮票。准确来说，这种情况会在存在一个满足如下条件的星球序列 $w[0], w[1],\\dots , w[t]$ 时发生：\n\n- $1 \\le t$。\n- $0 \\le w[0] \\le k - 1$。\n- $w[t] = w[0]$。\n- 对于每个星球 $i$（$0 \\le i \\le t - 1$），存在一个传送器 $(w[i], w[i + 1])$。\n\n注意一名游客能够使用起始传送器和任何一个目前已经建立的传送器。\n\n你的任务是，帮助法老验证在每次加入新的传送器后，一位游客是否能够拿到无穷多枚邮票。\n\n## 实现细节\n\n你需要实现下述函数：\n\n```cpp\ninit(int n, int k)\n```\n\n- $n$：星球数量。\n- $k$：特殊星球数量。\n- 这个函数只会被调用一次，早于任何一次 `add_teleporter` 调用。\n\n```cpp\nint add_teleporter(int u, int v)\n```\n\n- $u$ 和 $v$：被加入传送器的起始和目的星球。\n- 这个函数至多被调用 $m$ 次（$m$ 的取值范围参阅“约束条件”部分的内容）。\n- 如果当传送器 $(u, v)$ 被加入后游客能够获得无穷多枚邮票，函数需要返回 $1$。否则，这个函数应该返回 $0$。\n- 一旦函数返回了 $1$，你的程序将会被终止。", "inputFormat": "评测程序示例按照如下的格式读取输入数据：\n\n- 第 $1$ 行：$n\\ m\\ k$。\n- 第 $2 + i$ 行（$0 \\le i \\le m - 1$）：$u[i]\\ v[i]$。\n\n评测程序示例首先调用 `init`，然后按照 $i = 0, 1,\\dots , m - 1$ 的顺序调用 `add_teleporter`：$u = u[i]$ 和 $v = v[i]$。", "outputFormat": "程序需要打印多次调用 `add_teleporter` 中首次返回 $1$ 的调用索引（$0$ 到 $m - 1$，包含 $0$ 和 $m - 1$）；当所有 `add_teleporter` 调用中都返回 $0$ 时，你的程序需要返回 $m$。\n\n如果某次 `add_teleporter` 调用返回了 $0$ 和 $1$ 之外的整数，评测程序示例会打印 $-1$，你的程序会被马上终止。", "hint": "## 例子\n\n### 例 $1$\n\n考虑下面的函数调用：\n\n```cpp\ninit(6, 3)\n```\n\n在这个例子里，有 $6$ 个星球和 $3$ 个特殊星球，标号为 $0,1,2$ 的星球是特殊星球。起始传送器是 $(0,1)$ 和 $(1,2)$。\n\n假设评测程序执行下述调用：\n\n- (0) `add_teleporter(3, 4)`：应该返回 $0$。\n- (1) `add_teleporter(5, 0)`：应该返回 $0$。\n- (2) `add_teleporter(4, 5)`：应该返回 $0$。\n- (3) `add_teleporter(5, 3)`：应该返回 $0$。\n- (4) `add_teleporter(1, 4)`：在这种情况下，是可能获得无穷多枚邮票的。例如，游客可以从星球 $0$ 出发，按照 $1, 4, 5, 0, 1, 4, 5, 0,\\dots$ 这个顺序进行。因此，函数需要返回 $1$，进一步你的程序会被终止。\n\n下图对于这个例子进行了说明。特殊星球和起始传送器都使用粗体字表示。通过 `add_teleporter` 加入的传送器，按照顺序被标记为 $0$ 到 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q80oy4px.png)\n\n### 例 $2$\n\n考虑下面的函数调用：\n\n```cpp\ninit(4, 2)\n```\n\n在这个例子里，有 $4$ 个星球和 $2$ 个特殊星球。标号为 $0$ 和 $1$ 星球是特殊星球。起始传送器是 $(0, 1)$。\n\n假设评测程序执行下述调用：\n\n- `add_teleporter(1, 1)`：当加入传送器 $(1, 1)$ 后，我们就能够获得无穷多枚邮票。例如，游客从星球 $1$ 出发，可以使用传送器 $(1, 1)$ 到达星球 $1$ 无限次。因此，函数需要返回 $1$，然后你的程序被终止。\n\n附件包里还包含了另一个样例输入输出。\n\n## 约束条件\n\n- $1\\le n\\le 3\\times 10^5$；\n- $1\\le m\\le 5\\times 10^5$；\n- $1\\le k\\le n$。\n\n对于每次调用 `add_teleporter` 函数：\n\n- $0\\le u\\le n-1$ 和 $0\\le v\\le n-1$；\n- 在传送器 $(u,v)$ 加入之前，不会有从星球 $u$ 到星球 $v$ 的传送器。\n\n## 子任务\n\n1. （$2$ 分）$n=k$，$n\\le 100$，$m\\le 300$；\n2. （$10$ 分）$n\\le 100$，$m\\le 300$。\n3. （$18$ 分）$n\\le 10^3$，$m\\le 5\\times 10^3$。\n4. （$30$ 分）$n\\le 3\\times 10^4$，$m\\le 5\\times 10^4$，$k\\le 10^3$。\n5. （$40$ 分）没有额外的约束条件。", "locale": "zh-CN"}}}
{"pid": "P8376", "type": "P", "difficulty": 6, "samples": [["2\n3\n8", "2\n1 0\n3\n0 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2022] 排列", "background": "本题只支持 C++ 提交，提交时不需要包含 `perm.h` 头文件，只需要将附件中的 `perm.h` 中的内容粘贴到代码的开头即可。", "description": "法老们利用行星的引力来加速飞船。假设飞船将依次以 $p[0], p[1],\\dots , p[n - 1]$ 的轨道速度飞掠 $n$ 颗行星。飞掠每颗行星时，法老科学家可以选择是否利用它来加速飞船。为了节省能量，当飞船以轨道速度 $p[i]$ 飞掠一颗行星并完成加速后，它将不能再在以轨道速度 $p[j] < p[i]$ 飞掠行星时进行加速。也就是说，选择用来加速的行星构成 $p[0], p[1],\\dots , p[n - 1]$ 的一个**递增子序列**。$p$ 的子序列是从 $p$ 中删除零个或多个元素得到的序列。例如，$[0]$、$[ ]$、$[0, 2]$ 和 $[0, 1, 2]$ 是 $[0, 1, 2]$ 的子序列，但 $[2, 1]$ 不是。\n\n科学家已经确认，总共有 $k$ 种方案来选择行星对飞船进行加速，但是他们弄丢了轨道速度的记录信息（甚至包括 $n$ 的大小）。不过他们记得 $(p[0], p[1],\\dots , p[n - 1])$ 是 $0, 1,\\dots , n - 1$ 的一个排列。这里的排列是包含从 $0$ 到 $n - 1$ 每个整数恰好一次的序列。 你的任务是找出一个长度尽量小且符合要求的排列 $(p[0], p[1],\\dots , p[n - 1])$。\n\n你要对 $q$ 艘不同的飞船来解决该问题。对每艘飞船 $i$，你会得到一个整数 $k_i$，表示选择行星加速飞船的不同方案数。你的任务是找出长度 $n$ 足够小的轨道速度序列，使得从中恰好可以选出 $k_i$ 个轨道速度递增的行星子序列。\n\n## 实现细节\n\n你要实现以下函数：\n\n```cpp\nint[] construct_permutation(int64 k)\n```\n\n- $k$ 是应有的递增子序列的数量。\n- 该函数要返回有 $n$ 个元素的数组，每个元素是 $0$ 到 $n - 1$ 之间（包括 $0$ 和 $n - 1$）的数。\n- 返回的数组必须是恰好有 $k$ 个递增子序列的合法排列。\n- 该函数总共被调用 $q$ 次。每次调用被视为一个独立的场景。", "inputFormat": "评测程序示例按以下格式读取输入：\n\n- 第 $1$ 行：$q$。\n- 第 $2+i$ 行（$0\\le i\\le q-1$）：$k_i$。", "outputFormat": "评测示例程序对每个 $k_i$ 打印一行，包含对应 `construct_permutation` 调用的返回值。如果出错则打印错误信息。", "hint": "## 例子\n\n### 例 $1$\n\n考虑以下调用：\n\n```cpp\nconstruct_permutation(3)\n```\n\n该函数应该返回一个恰好有 $3$ 个递增子序列的排列。一种可能的答案是 $[1,0]$，它的递增子序列有 $[]$（空的子序列）、$[0]$ 和 $[1]$。\n\n### 例 $2$\n\n考虑以下调用：\n\n```cpp\nconstruct_permutation(8)\n```\n\n该函数应该返回一个恰好有 $8$ 个递增子序列的排列。一种可能的答案是 $[0,1,2]$。\n\n## 约束条件\n\n- $1\\le q\\le 100$。\n- $2\\le k_i\\le 10^{18}$（对所有 $0\\le i\\le q-1$）。\n\n## 子任务\n\n1. （$10$ 分）$2\\le k_i\\le 90$（对所有 $0\\le i\\le q-1$）。如果你给出的所有排列长度至多为 $90$ 且结果正确，你将获得 $10$ 分，否则获得 $0$ 分。\n2. （$90$ 分）没有额外的约束条件。对该子任务，令 $m$ 为你在所有场景中给出的排列的最大长度，则你的得分按下表来计算：\n\n|条件|得分|\n|:-:|:-:|\n|$m\\le 90$|$90$|\n|$90 < m\\le 120$|$90-\\dfrac{m-90}{3}$|\n|$120 < m\\le 5000$|$80-\\dfrac{m-120}{65}$|\n|$m > 5000$|$0$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2022] 排列", "background": "本题只支持 C++ 提交，提交时不需要包含 `perm.h` 头文件，只需要将附件中的 `perm.h` 中的内容粘贴到代码的开头即可。", "description": "法老们利用行星的引力来加速飞船。假设飞船将依次以 $p[0], p[1],\\dots , p[n - 1]$ 的轨道速度飞掠 $n$ 颗行星。飞掠每颗行星时，法老科学家可以选择是否利用它来加速飞船。为了节省能量，当飞船以轨道速度 $p[i]$ 飞掠一颗行星并完成加速后，它将不能再在以轨道速度 $p[j] < p[i]$ 飞掠行星时进行加速。也就是说，选择用来加速的行星构成 $p[0], p[1],\\dots , p[n - 1]$ 的一个**递增子序列**。$p$ 的子序列是从 $p$ 中删除零个或多个元素得到的序列。例如，$[0]$、$[ ]$、$[0, 2]$ 和 $[0, 1, 2]$ 是 $[0, 1, 2]$ 的子序列，但 $[2, 1]$ 不是。\n\n科学家已经确认，总共有 $k$ 种方案来选择行星对飞船进行加速，但是他们弄丢了轨道速度的记录信息（甚至包括 $n$ 的大小）。不过他们记得 $(p[0], p[1],\\dots , p[n - 1])$ 是 $0, 1,\\dots , n - 1$ 的一个排列。这里的排列是包含从 $0$ 到 $n - 1$ 每个整数恰好一次的序列。 你的任务是找出一个长度尽量小且符合要求的排列 $(p[0], p[1],\\dots , p[n - 1])$。\n\n你要对 $q$ 艘不同的飞船来解决该问题。对每艘飞船 $i$，你会得到一个整数 $k_i$，表示选择行星加速飞船的不同方案数。你的任务是找出长度 $n$ 足够小的轨道速度序列，使得从中恰好可以选出 $k_i$ 个轨道速度递增的行星子序列。\n\n## 实现细节\n\n你要实现以下函数：\n\n```cpp\nint[] construct_permutation(int64 k)\n```\n\n- $k$ 是应有的递增子序列的数量。\n- 该函数要返回有 $n$ 个元素的数组，每个元素是 $0$ 到 $n - 1$ 之间（包括 $0$ 和 $n - 1$）的数。\n- 返回的数组必须是恰好有 $k$ 个递增子序列的合法排列。\n- 该函数总共被调用 $q$ 次。每次调用被视为一个独立的场景。", "inputFormat": "评测程序示例按以下格式读取输入：\n\n- 第 $1$ 行：$q$。\n- 第 $2+i$ 行（$0\\le i\\le q-1$）：$k_i$。", "outputFormat": "评测示例程序对每个 $k_i$ 打印一行，包含对应 `construct_permutation` 调用的返回值。如果出错则打印错误信息。", "hint": "## 例子\n\n### 例 $1$\n\n考虑以下调用：\n\n```cpp\nconstruct_permutation(3)\n```\n\n该函数应该返回一个恰好有 $3$ 个递增子序列的排列。一种可能的答案是 $[1,0]$，它的递增子序列有 $[]$（空的子序列）、$[0]$ 和 $[1]$。\n\n### 例 $2$\n\n考虑以下调用：\n\n```cpp\nconstruct_permutation(8)\n```\n\n该函数应该返回一个恰好有 $8$ 个递增子序列的排列。一种可能的答案是 $[0,1,2]$。\n\n## 约束条件\n\n- $1\\le q\\le 100$。\n- $2\\le k_i\\le 10^{18}$（对所有 $0\\le i\\le q-1$）。\n\n## 子任务\n\n1. （$10$ 分）$2\\le k_i\\le 90$（对所有 $0\\le i\\le q-1$）。如果你给出的所有排列长度至多为 $90$ 且结果正确，你将获得 $10$ 分，否则获得 $0$ 分。\n2. （$90$ 分）没有额外的约束条件。对该子任务，令 $m$ 为你在所有场景中给出的排列的最大长度，则你的得分按下表来计算：\n\n|条件|得分|\n|:-:|:-:|\n|$m\\le 90$|$90$|\n|$90 < m\\le 120$|$90-\\dfrac{m-90}{3}$|\n|$120 < m\\le 5000$|$80-\\dfrac{m-120}{65}$|\n|$m > 5000$|$0$|", "locale": "zh-CN"}}}
{"pid": "P8377", "type": "P", "difficulty": 2, "samples": [["3\n7\n14\n114514", "6\n5\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "[PFOI Round1] 暴龙的火锅", "background": "暴龙爱吃火锅。", "description": "定义 $S(x)$ 表示 $x$ 的每一位的数字之和，例如：$S(14)=1+4=5$，$S(114514)=1+1+4+5+1+4=16.$\n\n另外，定义 $fib(x)$ 代表斐波那契数列的第 $x$ 项，具体地：\n\n$$fib(1)=fib(2)=1,\\ fib(x)=fib(x-1)+fib(x-2)\\ (x≥3).$$\n\n现在给定 $n$，求出下式的值，其中 $\\bmod 9$ 表示对 $9$ 取余数：\n\n$$(S(fib(1))+S(fib(2))+S(fib(3))+...+S(fib(n))) \\bmod 9.$$", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 组问询，每次一个整数 $n$。", "outputFormat": "$T$ 行，每行一个整数代表答案。", "hint": "【样例解释】\n\n对于第一组询问，$n=7$，答案为： \n\n$$\n\\begin{aligned}\n& \\ \\ \\ \\ \\ (S(fib(1))+S(fib(2))\\ldots+S(fib(6))+S(fib(7)))\\bmod 9 \\\\\n& =(1+1+2+3+5+8+(1+3))\\bmod 9 \\\\\n& =6.\n\\end{aligned}\n$$\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PFOI Round1] 暴龙的火锅", "background": "暴龙爱吃火锅。", "description": "定义 $S(x)$ 表示 $x$ 的每一位的数字之和，例如：$S(14)=1+4=5$，$S(114514)=1+1+4+5+1+4=16.$\n\n另外，定义 $fib(x)$ 代表斐波那契数列的第 $x$ 项，具体地：\n\n$$fib(1)=fib(2)=1,\\ fib(x)=fib(x-1)+fib(x-2)\\ (x≥3).$$\n\n现在给定 $n$，求出下式的值，其中 $\\bmod 9$ 表示对 $9$ 取余数：\n\n$$(S(fib(1))+S(fib(2))+S(fib(3))+...+S(fib(n))) \\bmod 9.$$", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 组问询，每次一个整数 $n$。", "outputFormat": "$T$ 行，每行一个整数代表答案。", "hint": "【样例解释】\n\n对于第一组询问，$n=7$，答案为： \n\n$$\n\\begin{aligned}\n& \\ \\ \\ \\ \\ (S(fib(1))+S(fib(2))\\ldots+S(fib(6))+S(fib(7)))\\bmod 9 \\\\\n& =(1+1+2+3+5+8+(1+3))\\bmod 9 \\\\\n& =6.\n\\end{aligned}\n$$\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8378", "type": "P", "difficulty": 3, "samples": [["4\n3\n20\n8492\n114514", "3\n61560\n822256526\n988192964\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "[PFOI Round1] Two Sequences", "background": "syzf2222 喜欢并查集！特别是路径压缩的并查集。", "description": "\n\n```cpp\ninline int find(int x){\n\tif(x==fa[x])return x;\n\treturn fa[x]=find(fa[x]);\n}\ninline void merge(int x,int y){\n\tfx=find(x),fy=find(y);\n\tif(fx==fy)return;fa[fx]=fy;\n}\n```\n\n这是他惯用的并查集代码，初始时对于每个 $x$ 有 `fa[x]=x`。\n\n接下来的 $T$ 天中，每天小 h 都给了他一个 $n$，表示并查集的大小（每天的 $n$ 可能是不同的）。\n\n调皮的小 x 见他不在机房，每天都在并查集上不断 `merge`。\n注意到小 x 不喜欢 `==`，他觉得这特别像他的眼睛，于是他不会使 `merge` 函数在第二行的条件语句中被 `return`，否则他会十分气愤。\n\n现在的已知信息就只有最终的 $fa$ 数组了。\n而 syzf2222 希望还原小 x 的操作序列（即若干次按顺序进行的 `merge` 操作）。由于他名字里有很多个 2 而且本人也非常 2 ，他希望知道对于每一天，有多少个 $fa$ 数组**恰好**能被还原成**两种**操作序列，答案对 $998244353$ 取余数。\n\n两个操作序列不同，当且仅当某次 `merge` 时的变量 `fx,fy` 至少有一个不同。\n\n", "inputFormat": "第一行一个整数 $T$。\n\n后面 $T$ 行，每行读入一个整数 $n$ 表示小 h 给的数。", "outputFormat": "$T$ 行，每行一个整数表示答案对 $998244353$ 取余数的结果。", "hint": "【样例解释】\n\n对于第一天，$n=3$，共有 $fa=[1,1,1],[2,2,2],[3,3,3]$ 这三种 $fa$ 数组使得恰有两种操作序列。\n\n以 $fa=[1,1,1]$ 为例，两种操作序列分别为 `merge(2,1),merge(3,1)` 和 `merge(3,1),merge(2,1)`，其他 `merge` 参数不同的方案与上述两种的其中一种是本质相同的（每次的 `fx,fy` 都一样）。\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PFOI Round1] Two Sequences", "background": "syzf2222 喜欢并查集！特别是路径压缩的并查集。", "description": "\n\n```cpp\ninline int find(int x){\n\tif(x==fa[x])return x;\n\treturn fa[x]=find(fa[x]);\n}\ninline void merge(int x,int y){\n\tfx=find(x),fy=find(y);\n\tif(fx==fy)return;fa[fx]=fy;\n}\n```\n\n这是他惯用的并查集代码，初始时对于每个 $x$ 有 `fa[x]=x`。\n\n接下来的 $T$ 天中，每天小 h 都给了他一个 $n$，表示并查集的大小（每天的 $n$ 可能是不同的）。\n\n调皮的小 x 见他不在机房，每天都在并查集上不断 `merge`。\n注意到小 x 不喜欢 `==`，他觉得这特别像他的眼睛，于是他不会使 `merge` 函数在第二行的条件语句中被 `return`，否则他会十分气愤。\n\n现在的已知信息就只有最终的 $fa$ 数组了。\n而 syzf2222 希望还原小 x 的操作序列（即若干次按顺序进行的 `merge` 操作）。由于他名字里有很多个 2 而且本人也非常 2 ，他希望知道对于每一天，有多少个 $fa$ 数组**恰好**能被还原成**两种**操作序列，答案对 $998244353$ 取余数。\n\n两个操作序列不同，当且仅当某次 `merge` 时的变量 `fx,fy` 至少有一个不同。\n\n", "inputFormat": "第一行一个整数 $T$。\n\n后面 $T$ 行，每行读入一个整数 $n$ 表示小 h 给的数。", "outputFormat": "$T$ 行，每行一个整数表示答案对 $998244353$ 取余数的结果。", "hint": "【样例解释】\n\n对于第一天，$n=3$，共有 $fa=[1,1,1],[2,2,2],[3,3,3]$ 这三种 $fa$ 数组使得恰有两种操作序列。\n\n以 $fa=[1,1,1]$ 为例，两种操作序列分别为 `merge(2,1),merge(3,1)` 和 `merge(3,1),merge(2,1)`，其他 `merge` 参数不同的方案与上述两种的其中一种是本质相同的（每次的 `fx,fy` 都一样）。\n\n---\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1,\\ n\\le 10$；\n- $\\texttt{Subtask 2(30 pts)：}T=10^2,\\ n\\le 10^3$；\n- $\\texttt{Subtask 3(60 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5,\\ 1\\le n\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8379", "type": "P", "difficulty": 4, "samples": [["3 3 2\n1 1 2\n3 4 5\nQuery\nChange 2 1\nQuery", "666666677\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Two Operations", "background": "**本题时限较小，请采用较快的读入方式，以下是出题人提供的快读模板：**\n\n```cpp\ntypedef long long LL;\ninline LL read(){\n\tregister LL x=0,f=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9') x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\treturn x*f;\n}\n```\n\n当然你也可以采用自己的读入方法。", "description": "在一次聚会上，一共有 $n$ 名学生，他们的编号分别为 $1,2,3,\\cdots,n$，他们被分成 $k$ 组，组的编号分别为 $1,2,3,\\ldots,k$。\n\n小 V 老师负责组织这场聚会，在聚会的开始，第 $i$ 名学生被分到了第 $a_i$ 组，并拿到了 $b_i$ 颗糖果。（小 V 既不属于任何组别，也没有任何糖果。在接下来的活动中，小 V 作为组织者的身份。） \n\n这一次聚会一共有 $m$ 轮活动，对于每一轮活动，可能发生以下两种情况之一：\n\n1.  `Change X Y`，表示把所有组别为 $X$ 的学生的组别改为 $Y$（修改后 $X$ 即为空组），并把组 $X$ **删除**。\n2.  `Query`，表示小 V 想要知道，如果把**剩下**的组合并（定义见下） 成一大组，那么这一大组内**拥有最多糖果的学生的糖果数最少可能是多少**。\n\n定义一个组 $G_i$ 的大小就是这个组内含有学生的个数，记为 $S_i$。\n\n**合并**：将大小为 $S_1(S_1>0)$ 的组 $G_1$ 合并到大小为 $S_2(S_2>0)$ 的组 $G_2$，其中 $G_1$ 组内所有学生拥有糖果数之和为 $f$，则：\n\n1. 第一步，将原先 $G_1$ 中所有学生的糖果数都变为 $0$，并将他们的组别改为 $G_2$。\n2. 第二步，将目前 $G_2$ 中每位学生（包括原先 $G_1$ 中的学生）的糖果数加上 $\\dfrac{f}{S_1+S_2}$（糖果数不一定为整数块）。\n\n**注意：**\n\n1. $G_1$ 合并到 $G_2$ 的最后结果可能会与 $G_2$ 合并到 $G_1$ 的最后结果不同。\n2. `Query` 中的合并不会真实发生。即在这一次情况过后，所有学生的糖果数与所在组与此次操作未发生前一致。\n\n请将每次 `Query` 中的答案对 $10^9+7$ 取模。（可能是分数取模，如果不知道如何取模请见**提示说明**）", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $n$ 个整数 $a_{1\\ldots n}$。\n\n第三行 $n$ 个整数 $b_{1\\ldots n}$。\n\n接下来 $m$ 行，每行对应一种情况。具体格式参见题目描述或输入输出样例。", "outputFormat": "输出若干行整数表示答案。", "hint": "【样例解释】\n\n第一次 `Query` 时，将第二组合并到第一组，此时三名学生的糖果数分别为 $\\dfrac{14}{3},\\dfrac{17}{3},\\dfrac{5}{3}$，糖果数最多的同学有 $\\dfrac{17}{3}$ 块糖果，取到了最小值，对 $10^9+7$ 取模后为 $666666677$。\n\n第二次 `Query` 时，所有学生都在同一组，而糖果数最多的同学有 $5$ 块糖果。\n\n---\n\n【数据范围】\n\n| 数据点 | $n$  | $m$  | $k$  | $a_i$ | $b_i$  |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $\\le 10$ |无特殊限制 | $\\le 10$ | $\\le 10$ | $\\le 100$ |\n| $2$ | $\\le 100$ | $\\le 10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $3$ | $\\le 10^5$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $4$ | $\\le 10^5$ | 无特殊限制 | $=1$ | $=1$ | $\\le10^5$ |\n| $5$ | $\\le 10^3$ |无特殊限制 | $\\le 5$ | $\\le 5$ | $\\le 100$ |\n| $6$ | $\\le 10^4$ | $\\le 10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $7$ | $\\le 10^4$ | $\\le 5\\times10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $8$ | $\\le 10^5$ | 无特殊限制 | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $9 $| $\\le 5\\times10^5$ | 无特殊限制 | $5\\times10^5$ | $5\\times10^5$ | $\\le 10^5$ |\n| $10$ | $\\le 10^6$ | 无特殊限制 | $\\le 10^6$ | $\\le 10^6$ | $\\le 10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 10^6,\\ 1\\leq m \\leq 2\\times k-1,\\ 1 \\leq a_i\\leq k \\leq n,\\ 1 \\leq b_i \\leq 10^5$。**数据保证合法，初始时每组是非空的。**\n\n\n不熟悉有理数取模的请看[此处](/problem/solution/P2613)。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Two Operations", "background": "**本题时限较小，请采用较快的读入方式，以下是出题人提供的快读模板：**\n\n```cpp\ntypedef long long LL;\ninline LL read(){\n\tregister LL x=0,f=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9') x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\treturn x*f;\n}\n```\n\n当然你也可以采用自己的读入方法。", "description": "在一次聚会上，一共有 $n$ 名学生，他们的编号分别为 $1,2,3,\\cdots,n$，他们被分成 $k$ 组，组的编号分别为 $1,2,3,\\ldots,k$。\n\n小 V 老师负责组织这场聚会，在聚会的开始，第 $i$ 名学生被分到了第 $a_i$ 组，并拿到了 $b_i$ 颗糖果。（小 V 既不属于任何组别，也没有任何糖果。在接下来的活动中，小 V 作为组织者的身份。） \n\n这一次聚会一共有 $m$ 轮活动，对于每一轮活动，可能发生以下两种情况之一：\n\n1.  `Change X Y`，表示把所有组别为 $X$ 的学生的组别改为 $Y$（修改后 $X$ 即为空组），并把组 $X$ **删除**。\n2.  `Query`，表示小 V 想要知道，如果把**剩下**的组合并（定义见下） 成一大组，那么这一大组内**拥有最多糖果的学生的糖果数最少可能是多少**。\n\n定义一个组 $G_i$ 的大小就是这个组内含有学生的个数，记为 $S_i$。\n\n**合并**：将大小为 $S_1(S_1>0)$ 的组 $G_1$ 合并到大小为 $S_2(S_2>0)$ 的组 $G_2$，其中 $G_1$ 组内所有学生拥有糖果数之和为 $f$，则：\n\n1. 第一步，将原先 $G_1$ 中所有学生的糖果数都变为 $0$，并将他们的组别改为 $G_2$。\n2. 第二步，将目前 $G_2$ 中每位学生（包括原先 $G_1$ 中的学生）的糖果数加上 $\\dfrac{f}{S_1+S_2}$（糖果数不一定为整数块）。\n\n**注意：**\n\n1. $G_1$ 合并到 $G_2$ 的最后结果可能会与 $G_2$ 合并到 $G_1$ 的最后结果不同。\n2. `Query` 中的合并不会真实发生。即在这一次情况过后，所有学生的糖果数与所在组与此次操作未发生前一致。\n\n请将每次 `Query` 中的答案对 $10^9+7$ 取模。（可能是分数取模，如果不知道如何取模请见**提示说明**）", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $n$ 个整数 $a_{1\\ldots n}$。\n\n第三行 $n$ 个整数 $b_{1\\ldots n}$。\n\n接下来 $m$ 行，每行对应一种情况。具体格式参见题目描述或输入输出样例。", "outputFormat": "输出若干行整数表示答案。", "hint": "【样例解释】\n\n第一次 `Query` 时，将第二组合并到第一组，此时三名学生的糖果数分别为 $\\dfrac{14}{3},\\dfrac{17}{3},\\dfrac{5}{3}$，糖果数最多的同学有 $\\dfrac{17}{3}$ 块糖果，取到了最小值，对 $10^9+7$ 取模后为 $666666677$。\n\n第二次 `Query` 时，所有学生都在同一组，而糖果数最多的同学有 $5$ 块糖果。\n\n---\n\n【数据范围】\n\n| 数据点 | $n$  | $m$  | $k$  | $a_i$ | $b_i$  |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $\\le 10$ |无特殊限制 | $\\le 10$ | $\\le 10$ | $\\le 100$ |\n| $2$ | $\\le 100$ | $\\le 10$ | $\\le 100$ | $\\le 100$ | $\\le 100$ |\n| $3$ | $\\le 10^5$ | $=1$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $4$ | $\\le 10^5$ | 无特殊限制 | $=1$ | $=1$ | $\\le10^5$ |\n| $5$ | $\\le 10^3$ |无特殊限制 | $\\le 5$ | $\\le 5$ | $\\le 100$ |\n| $6$ | $\\le 10^4$ | $\\le 10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $7$ | $\\le 10^4$ | $\\le 5\\times10^3$ | $\\le 10^4$ | $\\le 10^4$ | $\\le 10^5$ |\n| $8$ | $\\le 10^5$ | 无特殊限制 | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ |\n| $9 $| $\\le 5\\times10^5$ | 无特殊限制 | $5\\times10^5$ | $5\\times10^5$ | $\\le 10^5$ |\n| $10$ | $\\le 10^6$ | 无特殊限制 | $\\le 10^6$ | $\\le 10^6$ | $\\le 10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n \\leq 10^6,\\ 1\\leq m \\leq 2\\times k-1,\\ 1 \\leq a_i\\leq k \\leq n,\\ 1 \\leq b_i \\leq 10^5$。**数据保证合法，初始时每组是非空的。**\n\n\n不熟悉有理数取模的请看[此处](/problem/solution/P2613)。\n", "locale": "zh-CN"}}}
{"pid": "P8380", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n3 4 5 \n6 7 8", "3\n8\n15"], ["2\n999 9999 99999\n2000 20000 200000", "101202\n202276"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "Two Hypercubes", "background": "注：数据已经加强。", "description": "$T$ 次询问，每次给定 $A,B,C$，求：\n\n$$\\Big(\\sum_{x=1}^A\\sum_{y=1}^B\\sum_{z=1}^C[y^x=x^z]\\Big)\\bmod (10^9+7).$$", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行三个正整数 $A,B,C$。", "outputFormat": "$T$ 个整数 $\\text{ans}$ 表示答案。以换行符隔开。", "hint": "【样例 1 解释】\n\n第一组询问 $A=1,B=2,C=3$，满足条件的三元组 $(x,y,z)$ 有 $(1,1,1),(1,1,2),(1,1,3).$\n\n第二组询问 $A=3,B=4,C=5$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(2,2,2),(2,4,4),(3,3,3).$\n\n第三组询问 $A=6,B=7,C=8$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(1,1,6),(1,1,7),(1,1,8);$\n\n$(2,2,2),(2,4,4),(3,3,3),(4,2,2),(4,4,4),(5,5,5),(6,6,6).$\n\n---\n\n【数据范围】\n\n对 $100\\%$ 的数据，满足 $1\\leq T\\leq 2\\times 10^4,\\ 1\\leq A,B,C\\leq 10^{18}$。\n\n\n- $\\text{Subtask}\\ 0(5\\ \\text{pts})$：$T,A,B,C\\leq 11$。\n- $\\text{Subtask}\\ 1(7\\ \\text{pts})$： $T\\leq 20,\\ A,B,C\\leq 3333$。\n- $\\text{Subtask}\\ 2(17\\ \\text{pts})$：$T\\leq 20,\\ A,B\\leq 10^{10},\\ C\\leq 3333$。\n- $\\text{Subtask}\\ 3(17\\ \\text{pts})$：$T\\leq 20,\\ A,B,C\\leq 10^{10}$。\n- $\\text{Subtask}\\ 4(27\\ \\text{pts})$：$A,B,C\\leq 10^{11}$。\n- $\\text{Subtask}\\ 5(27\\ \\text{pts})$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Two Hypercubes", "background": "注：数据已经加强。", "description": "$T$ 次询问，每次给定 $A,B,C$，求：\n\n$$\\Big(\\sum_{x=1}^A\\sum_{y=1}^B\\sum_{z=1}^C[y^x=x^z]\\Big)\\bmod (10^9+7).$$", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行三个正整数 $A,B,C$。", "outputFormat": "$T$ 个整数 $\\text{ans}$ 表示答案。以换行符隔开。", "hint": "【样例 1 解释】\n\n第一组询问 $A=1,B=2,C=3$，满足条件的三元组 $(x,y,z)$ 有 $(1,1,1),(1,1,2),(1,1,3).$\n\n第二组询问 $A=3,B=4,C=5$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(2,2,2),(2,4,4),(3,3,3).$\n\n第三组询问 $A=6,B=7,C=8$，满足条件的三元组 $(x,y,z)$ 有：\n\n$(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(1,1,6),(1,1,7),(1,1,8);$\n\n$(2,2,2),(2,4,4),(3,3,3),(4,2,2),(4,4,4),(5,5,5),(6,6,6).$\n\n---\n\n【数据范围】\n\n对 $100\\%$ 的数据，满足 $1\\leq T\\leq 2\\times 10^4,\\ 1\\leq A,B,C\\leq 10^{18}$。\n\n\n- $\\text{Subtask}\\ 0(5\\ \\text{pts})$：$T,A,B,C\\leq 11$。\n- $\\text{Subtask}\\ 1(7\\ \\text{pts})$： $T\\leq 20,\\ A,B,C\\leq 3333$。\n- $\\text{Subtask}\\ 2(17\\ \\text{pts})$：$T\\leq 20,\\ A,B\\leq 10^{10},\\ C\\leq 3333$。\n- $\\text{Subtask}\\ 3(17\\ \\text{pts})$：$T\\leq 20,\\ A,B,C\\leq 10^{10}$。\n- $\\text{Subtask}\\ 4(27\\ \\text{pts})$：$A,B,C\\leq 10^{11}$。\n- $\\text{Subtask}\\ 5(27\\ \\text{pts})$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8381", "type": "P", "difficulty": 7, "samples": [["2\n7\n2 1 4 7 6 5 3\n2\n2 1", "3\n4\n1 1 4\n1 2 3\n1 1 2\n0 5 6\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[PFOI Round1] Two Subsegments", "background": ">洛谷知名网红，€€£官方团队团主 [€€£](https://www.luogu.com.cn/user/559616) 同志，因联合省选寄，医院抢救无效，于 4 月 17 日 g 了。\n\n> [€€£](https://www.luogu.com.cn/user/559616) 是知名洛谷人，2021年加入洛谷，同年成立 €€£ 官方团队。在他在位期间勤勤恳恳，认真整活，发奋出题，为整活革命化、现代化、正规化建设作出了贡献。\n\n对于 [€€£](https://www.luogu.com.cn/user/559616) 的退役，[Uvocde](https://www.luogu.com.cn/user/111084) 深感悲痛。这时，他想起了 [€€£](https://www.luogu.com.cn/user/559616) 对构造的深爱，于是便出了这道题来缅怀 [€€£](https://www.luogu.com.cn/user/559616)。", "description": "有 $T$ 组询问，每组询问给出一个长为 $n$ 的序列 $a$，保证 $a$ 是 $1\\sim n$ 的排列。\n\n你可以选择一个数 $x$，然后你每次可以将一段长为 $x+1$ 或一段长为 $x-1$ 的序列在原序列中前移或后移 $x$ 位，将经过的部分移到空出来的地方。\n\n请在 $80\\times n$ 次内将 $a$ 排成升序。", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $2 \\times T$ 行，每两行代表一组询问。\n\n对于每组询问，格式为：先一行一个正整数 $n$，接下来一行 $n$ 个正整数，代表 $a_1,\\ldots,a_n$。", "outputFormat": "输出共 $T$ 组。\n\n一组询问如果无解，仅输出一个 $-1$。\n\n如果有解，则输出共 $m+2$ 行：\n\n前两行每行一个数，分别是 $x,m$，其中 $m$ 表示操作次数，$x$ 如题意。\n\n接下来 $m$ 行，每行三个数，第一个数表示方向（向左是 $0$，向右是 $1$），接下来两个数 $l,r$ 代表平移区间的左、右端点。\n\n你的方案需要保证：\n\n- $2\\leq x\\leq n$，$0\\leq m\\leq 80n$；\n- 对每一次操作，有：\n  - $1\\leq l\\leq r\\leq n$；\n  - $r-l+1=x-1$ 或 $r-l+1=x+1$；\n  - 右移时 $r\\leq n-x$，左移时 $l\\geq x+1$。\n\n本题采用 $\\text{SPJ}$，只要调换操作正确或正确判断无解即可给分。", "hint": "【样例解释】\n\n对于 $2\\ 1\\ 4\\ 7\\ 6\\ 5\\ 3$ 这组样例：\n\n$x$ 取 $3$，共进行 $4$ 次操作：\n\n0. **2 1 4 7** 6 5 3，向右平移；\n1. 6 **5 3** 2 1 4 7，向右平移；\n2. **6 2** 1 4 5 3 7，向右平移；\n3. 1 4 5 6 **2 3** 7，向左平移；\n4. 1 2 3 4 5 6 7，排序完成。\n\n \n---\n\n【数据范围】\n  \n  对于 $100\\%$ 的数据，$1\\le T\\le10^4,\\ 2\\le n\\le 10^4,\\ \\sum n\\le10^4$，**保证排列在所有排列中等概率随机**。  \n  \n | $\\text{Subtasks}$ | 测试点数 | 数据范围 |分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $\\text{Subtask0}$ | $1$ | $n\\leq 5$ | $\\text{2pts}$ |\n| $\\text{Subtask1}$ | $7$ | $n\\leq 50$ |$\\text{7pts}$ |\n| $\\text{Subtask2}$ | $9$ | $n\\leq 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask3}$ | $14$ | $n\\leq 5\\times 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask4}$ | $9$ | $n\\leq 10^4$ | $\\text{37pts}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PFOI Round1] Two Subsegments", "background": ">洛谷知名网红，€€£官方团队团主 [€€£](https://www.luogu.com.cn/user/559616) 同志，因联合省选寄，医院抢救无效，于 4 月 17 日 g 了。\n\n> [€€£](https://www.luogu.com.cn/user/559616) 是知名洛谷人，2021年加入洛谷，同年成立 €€£ 官方团队。在他在位期间勤勤恳恳，认真整活，发奋出题，为整活革命化、现代化、正规化建设作出了贡献。\n\n对于 [€€£](https://www.luogu.com.cn/user/559616) 的退役，[Uvocde](https://www.luogu.com.cn/user/111084) 深感悲痛。这时，他想起了 [€€£](https://www.luogu.com.cn/user/559616) 对构造的深爱，于是便出了这道题来缅怀 [€€£](https://www.luogu.com.cn/user/559616)。", "description": "有 $T$ 组询问，每组询问给出一个长为 $n$ 的序列 $a$，保证 $a$ 是 $1\\sim n$ 的排列。\n\n你可以选择一个数 $x$，然后你每次可以将一段长为 $x+1$ 或一段长为 $x-1$ 的序列在原序列中前移或后移 $x$ 位，将经过的部分移到空出来的地方。\n\n请在 $80\\times n$ 次内将 $a$ 排成升序。", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $2 \\times T$ 行，每两行代表一组询问。\n\n对于每组询问，格式为：先一行一个正整数 $n$，接下来一行 $n$ 个正整数，代表 $a_1,\\ldots,a_n$。", "outputFormat": "输出共 $T$ 组。\n\n一组询问如果无解，仅输出一个 $-1$。\n\n如果有解，则输出共 $m+2$ 行：\n\n前两行每行一个数，分别是 $x,m$，其中 $m$ 表示操作次数，$x$ 如题意。\n\n接下来 $m$ 行，每行三个数，第一个数表示方向（向左是 $0$，向右是 $1$），接下来两个数 $l,r$ 代表平移区间的左、右端点。\n\n你的方案需要保证：\n\n- $2\\leq x\\leq n$，$0\\leq m\\leq 80n$；\n- 对每一次操作，有：\n  - $1\\leq l\\leq r\\leq n$；\n  - $r-l+1=x-1$ 或 $r-l+1=x+1$；\n  - 右移时 $r\\leq n-x$，左移时 $l\\geq x+1$。\n\n本题采用 $\\text{SPJ}$，只要调换操作正确或正确判断无解即可给分。", "hint": "【样例解释】\n\n对于 $2\\ 1\\ 4\\ 7\\ 6\\ 5\\ 3$ 这组样例：\n\n$x$ 取 $3$，共进行 $4$ 次操作：\n\n0. **2 1 4 7** 6 5 3，向右平移；\n1. 6 **5 3** 2 1 4 7，向右平移；\n2. **6 2** 1 4 5 3 7，向右平移；\n3. 1 4 5 6 **2 3** 7，向左平移；\n4. 1 2 3 4 5 6 7，排序完成。\n\n \n---\n\n【数据范围】\n  \n  对于 $100\\%$ 的数据，$1\\le T\\le10^4,\\ 2\\le n\\le 10^4,\\ \\sum n\\le10^4$，**保证排列在所有排列中等概率随机**。  \n  \n | $\\text{Subtasks}$ | 测试点数 | 数据范围 |分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $\\text{Subtask0}$ | $1$ | $n\\leq 5$ | $\\text{2pts}$ |\n| $\\text{Subtask1}$ | $7$ | $n\\leq 50$ |$\\text{7pts}$ |\n| $\\text{Subtask2}$ | $9$ | $n\\leq 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask3}$ | $14$ | $n\\leq 5\\times 10^3$ |$\\text{27pts}$ |\n| $\\text{Subtask4}$ | $9$ | $n\\leq 10^4$ | $\\text{37pts}$ |\n", "locale": "zh-CN"}}}
{"pid": "P8382", "type": "P", "difficulty": 6, "samples": [["5 2\n1 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] Gra", "background": "", "description": "让我们考虑一个在 $m \\times 1$ 的板子上玩的游戏,板子被从 $1$ 到 $m$ 编号。 \n\n现在板子上有 $n$ 个棋子，每个都严格占据板子上的一个格子，没有一个棋子占据格子 $m$。 \n\n每个单独的移动遵循以下原则：移动的人选择一个棋子把它移动到比它大的格子中第一个未被占据的格子里去。两个选手交替移动，谁先占据格子 $m$ 谁赢。\n\n我们在当且仅当他移动以后令一选手无论如何都无法赢他的时候说当前选手的移动称作 $\\text{winning}$ 操作。\n\n我们想知道先手有多少个移动是 $\\text{winning}$ 操作。", "inputFormat": "第一行有两个数 $m,n$ 。\n\n然后接下来 $n$ 个上升的整数表示初始被占据的格子编号。", "outputFormat": "输出先手有多少移动是 $\\text{winning}$ 操作。", "hint": "对于 $100$ % 的数据：$2 \\le m \\le 10^{9}, 1 \\le n \\le 10^{6}$ ，且有 $n + 1 \\le m$ 。\n\n下面是一个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/obrkvr84.png)\n\n在 $m = 7$ 的时候，一个选手可以把 $2$ 移到 $4$，把 $3$ 移到 $4$ 或者把 $6$ 移动到 $7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2004] Gra", "background": "", "description": "让我们考虑一个在 $m \\times 1$ 的板子上玩的游戏,板子被从 $1$ 到 $m$ 编号。 \n\n现在板子上有 $n$ 个棋子，每个都严格占据板子上的一个格子，没有一个棋子占据格子 $m$。 \n\n每个单独的移动遵循以下原则：移动的人选择一个棋子把它移动到比它大的格子中第一个未被占据的格子里去。两个选手交替移动，谁先占据格子 $m$ 谁赢。\n\n我们在当且仅当他移动以后令一选手无论如何都无法赢他的时候说当前选手的移动称作 $\\text{winning}$ 操作。\n\n我们想知道先手有多少个移动是 $\\text{winning}$ 操作。", "inputFormat": "第一行有两个数 $m,n$ 。\n\n然后接下来 $n$ 个上升的整数表示初始被占据的格子编号。", "outputFormat": "输出先手有多少移动是 $\\text{winning}$ 操作。", "hint": "对于 $100$ % 的数据：$2 \\le m \\le 10^{9}, 1 \\le n \\le 10^{6}$ ，且有 $n + 1 \\le m$ 。\n\n下面是一个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/obrkvr84.png)\n\n在 $m = 7$ 的时候，一个选手可以把 $2$ 移到 $4$，把 $3$ 移到 $4$ 或者把 $6$ 移动到 $7$。", "locale": "zh-CN"}}}
{"pid": "P8383", "type": "P", "difficulty": 5, "samples": [["5\n2 0 1\n2 4 2\n2 2 4", "0\n1\n1/2\n?\n?"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] Bra", "background": "", "description": "让我们考虑一个包含 $n$ 个门的电路。\n\n门从 $0$ 到 $n-1$ 编号，每个门都包含若干个输入和一个输出。\n\n每一个输入和输出都只可能是 $0,1,\\dfrac{1}{2}$ 三种状态，每个输入都连接着某个门的输出，输入的状态就等于它连接的输出的状态值，而每个输出可能连接着任意多个输入。\n\n$0$ 和 $1$ 是很特殊的两个门。门 $0$ 的输出永远为 $0$，门 $1$ 的输出永远为 $1$。\n\n一个门有效的输出状态条件如下: \n\n1. 它的输入中 $0$ 的个数多于 $1$ 的个数那么输出状态为 $0$。 \n\n2. 它的输入中 $0$ 的个数等于 $1$ 的个数那么输出状态为 $\\dfrac{1}{2}$。 \n\n3. 它的输入中 $0$ 的个数少于 $1$ 的个数那么输出状态为 $1$。\n\n4. 对于门 $0$ 和 $1$，他们分别输出 $0$ 和 $1$。\n\n现在给出电路信息，请你编写一个程序，确定所有可以确定状态的门的状态分别是什么。", "inputFormat": "第一行一个数 $n$。\n\n接下来 $n-2$ 行表示门的连接信息，第 $i$ 行描述第 $i$ 个门的输入端，一个数 $k_i$ 表示它的输入端个数，接下来 $k_i$  个数分别表示每个输入端的门的编号。", "outputFormat": "输出 $n$ 行，表示 $n$ 个门的输出状态。如果确定，请输出具体状态值，否则输出 $?$ 。", "hint": "对于全部数据，$2 \\le n \\le 10000,k_i \\ge 1$，数据保证所有门的输入端总数不超过 $200000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2004] Bra", "background": "", "description": "让我们考虑一个包含 $n$ 个门的电路。\n\n门从 $0$ 到 $n-1$ 编号，每个门都包含若干个输入和一个输出。\n\n每一个输入和输出都只可能是 $0,1,\\dfrac{1}{2}$ 三种状态，每个输入都连接着某个门的输出，输入的状态就等于它连接的输出的状态值，而每个输出可能连接着任意多个输入。\n\n$0$ 和 $1$ 是很特殊的两个门。门 $0$ 的输出永远为 $0$，门 $1$ 的输出永远为 $1$。\n\n一个门有效的输出状态条件如下: \n\n1. 它的输入中 $0$ 的个数多于 $1$ 的个数那么输出状态为 $0$。 \n\n2. 它的输入中 $0$ 的个数等于 $1$ 的个数那么输出状态为 $\\dfrac{1}{2}$。 \n\n3. 它的输入中 $0$ 的个数少于 $1$ 的个数那么输出状态为 $1$。\n\n4. 对于门 $0$ 和 $1$，他们分别输出 $0$ 和 $1$。\n\n现在给出电路信息，请你编写一个程序，确定所有可以确定状态的门的状态分别是什么。", "inputFormat": "第一行一个数 $n$。\n\n接下来 $n-2$ 行表示门的连接信息，第 $i$ 行描述第 $i$ 个门的输入端，一个数 $k_i$ 表示它的输入端个数，接下来 $k_i$  个数分别表示每个输入端的门的编号。", "outputFormat": "输出 $n$ 行，表示 $n$ 个门的输出状态。如果确定，请输出具体状态值，否则输出 $?$ 。", "hint": "对于全部数据，$2 \\le n \\le 10000,k_i \\ge 1$，数据保证所有门的输入端总数不超过 $200000$。", "locale": "zh-CN"}}}
{"pid": "P8384", "type": "P", "difficulty": 5, "samples": [["9\n7 8\n4 5\n5 6\n1 2\n3 2\n9 8\n2 5\n5 8", "4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "POI（波兰）"], "title": "[POI 2004] SZN", "background": "", "description": "$\\text{String-Toys joint-stock}$ 公司需要你帮他们解决一个问题。\n\n他们想制造一个没有环的连通图模型，每个图都是由一些顶点和特定数量的边构成。每个顶点都可以连向许多的其他顶点。一个图是连通且无环的，图是由许多的线做成的。一条线是一条连接图中两个顶点之间的路径。\n\n由于一些技术原因，两条线之间不能有重叠的部分，要保证图中任意一条边都被且仅被一条线所覆盖。\n\n做一个这样的图的模型的费用取决于用了多少条线以及最长的那条的长度(每条边的长度都为 $1$ )。\n\n现在给你对应的图，请你编写一个程序，求出最少能用多少条线以及在用最少线的情况下最长的那根线最短可以为多少。", "inputFormat": "第一行仅包含一个数 $n$ ，表示顶点的总数。顶点从 $1$ 到 $n$ 进行编号。\n\n接下来的 $n - 1$ 行描述这些边，每行两个数 $a$ 和 $b$,表示顶点 $a$ 和顶点 $b$ 之间有一条边。", "outputFormat": "输出两个数,最少用多少条线以及在用最少线的情况下最长线最短可以为多少.", "hint": "对于 $100$ % 的数据：$2 \\le n \\le 10000,1 \\le a,b \\le n$ 。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/00d4scv1.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2004] SZN", "background": "", "description": "$\\text{String-Toys joint-stock}$ 公司需要你帮他们解决一个问题。\n\n他们想制造一个没有环的连通图模型，每个图都是由一些顶点和特定数量的边构成。每个顶点都可以连向许多的其他顶点。一个图是连通且无环的，图是由许多的线做成的。一条线是一条连接图中两个顶点之间的路径。\n\n由于一些技术原因，两条线之间不能有重叠的部分，要保证图中任意一条边都被且仅被一条线所覆盖。\n\n做一个这样的图的模型的费用取决于用了多少条线以及最长的那条的长度(每条边的长度都为 $1$ )。\n\n现在给你对应的图，请你编写一个程序，求出最少能用多少条线以及在用最少线的情况下最长的那根线最短可以为多少。", "inputFormat": "第一行仅包含一个数 $n$ ，表示顶点的总数。顶点从 $1$ 到 $n$ 进行编号。\n\n接下来的 $n - 1$ 行描述这些边，每行两个数 $a$ 和 $b$,表示顶点 $a$ 和顶点 $b$ 之间有一条边。", "outputFormat": "输出两个数,最少用多少条线以及在用最少线的情况下最长线最短可以为多少.", "hint": "对于 $100$ % 的数据：$2 \\le n \\le 10000,1 \\le a,b \\le n$ 。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/00d4scv1.png)", "locale": "zh-CN"}}}
{"pid": "P8385", "type": "P", "difficulty": 3, "samples": [["4\n200\n100\n40\n2\n6\n1 2 10\n1 3 5\n2 1 25\n3 2 10\n3 4 5\n4 1 50", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2003", "POI（波兰）"], "title": "[POI 2003] Smugglers", "background": "", "description": "Byteotia 因为它丰富的金矿资源而闻名世界. 所以在和它的邻国 Bitland 的边界上每年都有大量的金矿交易。不幸的是由于税务的繁重，商人带着矿产穿过边境时都要交纳矿产价格的 $50\\%$ 作为关税。但是幸运的是，有一些炼金术士已经发明了一些方法能把某一种矿产转化成另一种的矿物。于是这样在交易时就可以先把昂贵的矿产转化成便宜的，等到带过边境以后在转换回来。但是由于这项工作费时费力，炼金术士对于每种转换都要收取相应的费用。现在有个商人想将 $1$ kg 金子带过边境，他想知道最少的花费是多少。", "inputFormat": "第一行仅一个数 $n$ 表示有多少种金属矿产。\n\n接下来 $n$ 行，表示每种金属 $1$ kg 的单价。第 $k+1$ 行的数 $p_k$ 为第 $k$ 种金属的单价。我们假设金子的标号为 $1$。接下来一个正数 $m$ 表示一共有 $m$ 种转换方式。接下来 $m$ 行每行描述一个转换，它由三个数 $a$，$b$，$c$ 表示把 $1$ kg 的 $a$ 金属转换为 $1$ kg 的 $b$ 金属需要 $c$ 的代价。对于特定的金属对 $a$ 和 $b$ 最多只会出现一次。", "outputFormat": "输出一行，表示把 $1$ kg 的金子带过边境的最小花费。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 5000$，$0 \\le p_k \\le 10^9$，$0 \\le m \\le 100000$，$1 \\le a,b \\le n$，$0 \\le c \\leq 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2003] Smugglers", "background": "", "description": "Byteotia 因为它丰富的金矿资源而闻名世界. 所以在和它的邻国 Bitland 的边界上每年都有大量的金矿交易。不幸的是由于税务的繁重，商人带着矿产穿过边境时都要交纳矿产价格的 $50\\%$ 作为关税。但是幸运的是，有一些炼金术士已经发明了一些方法能把某一种矿产转化成另一种的矿物。于是这样在交易时就可以先把昂贵的矿产转化成便宜的，等到带过边境以后在转换回来。但是由于这项工作费时费力，炼金术士对于每种转换都要收取相应的费用。现在有个商人想将 $1$ kg 金子带过边境，他想知道最少的花费是多少。", "inputFormat": "第一行仅一个数 $n$ 表示有多少种金属矿产。\n\n接下来 $n$ 行，表示每种金属 $1$ kg 的单价。第 $k+1$ 行的数 $p_k$ 为第 $k$ 种金属的单价。我们假设金子的标号为 $1$。接下来一个正数 $m$ 表示一共有 $m$ 种转换方式。接下来 $m$ 行每行描述一个转换，它由三个数 $a$，$b$，$c$ 表示把 $1$ kg 的 $a$ 金属转换为 $1$ kg 的 $b$ 金属需要 $c$ 的代价。对于特定的金属对 $a$ 和 $b$ 最多只会出现一次。", "outputFormat": "输出一行，表示把 $1$ kg 的金子带过边境的最小花费。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 5000$，$0 \\le p_k \\le 10^9$，$0 \\le m \\le 100000$，$1 \\le a,b \\le n$，$0 \\le c \\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P8386", "type": "P", "difficulty": 6, "samples": [["4 2", "10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "PA（波兰）", "DP 套 DP"], "title": "[PA 2021] Od deski do deski", "background": "", "description": "给定 $n$，$m$，求满足以下限制的长度为 $n$ 的序列数目：\n\n1. 每个元素在 $[1,m]$ 之间；\n2. 一次操作定义为删除一个长度至少为 $2$ 且区间两端相等的区间，该序列需要在若干次操作内被删空。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行包含两个正整数 $n$，$m$。", "outputFormat": "输出一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "### 样例解释\n\n合法序列有：\n\n$[1,1,1,1]$\n\n$[1,1,2,1]$\n\n$[1,1,2,2]$\n\n$[1,2,1,1]$\n\n$[1,2,2,1]$\n\n$[2,1,1,2]$\n\n$[2,1,2,2]$\n\n$[2,2,1,1]$\n\n$[2,2,1,2]$\n\n$[2,2,2,2]$\n\n### 数据范围\n\n$1 \\le n \\le 3000$，$1 \\le m \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2021] Od deski do deski", "background": "", "description": "给定 $n$，$m$，求满足以下限制的长度为 $n$ 的序列数目：\n\n1. 每个元素在 $[1,m]$ 之间；\n2. 一次操作定义为删除一个长度至少为 $2$ 且区间两端相等的区间，该序列需要在若干次操作内被删空。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行包含两个正整数 $n$，$m$。", "outputFormat": "输出一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "### 样例解释\n\n合法序列有：\n\n$[1,1,1,1]$\n\n$[1,1,2,1]$\n\n$[1,1,2,2]$\n\n$[1,2,1,1]$\n\n$[1,2,2,1]$\n\n$[2,1,1,2]$\n\n$[2,1,2,2]$\n\n$[2,2,1,1]$\n\n$[2,2,1,2]$\n\n$[2,2,2,2]$\n\n### 数据范围\n\n$1 \\le n \\le 3000$，$1 \\le m \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8387", "type": "P", "difficulty": 0, "samples": [["5 3 4\n2 1 4\n3 3 7\n3 3 8\n1 5 7\n5 3 8\n", "7"], ["3 2 22\n7 16 33\n69 14 88\n8 10 97", "27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COI（克罗地亚）"], "title": "[COI 2021] Autobahn", "background": null, "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T1「[Autobahn](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n有 $N$ 个人在赛车场疾驰，第 $i$ 个人从第 $l_i$ 小时初疾驰到第 $r_i$ 小时末。\n\n鉴于赛车场要恰钱，每疾驰一小时交一块钱，然而这 $N$ 个人都只付了前 $t_i$ 个小时的钱。\n\n管理员十分仁慈，他们只会在有至少 $K$ 个人在赛车场上疾驰时来收额外的钱。\n\n赛车场搞活动，要求划分出一个长为 $X$ 小时的时间段，在这个时间段内如果有人需要被补交钱，则他不需要补交对应时间段欠的钱。\n\n赛车场希望活动使这 $N$ 个人不需要补交的钱最多，求出这个钱数。", "inputFormat": "第一行三个整数 $N$，$K$，$X$。\n\n接下来 $N$ 行，一行三个整数 $l_i$，$t_i$，$r_i$。", "outputFormat": "仅输出一行一个整数，表示您的答案。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n所划分出的时间段为 $[4,7]$，这之中第一个人不需要交第 $4$ 小时的费用，而第二、三、四个人不需要交第 $6$，$7$ 个小时的费用。\n\n样例 #2 解释：\n\n所划分出的时间段为 $[12,33]$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据有 $1\\le K\\le N\\le10^5$，$1\\le X,l_i,t_i,r_i\\le 10^9$，$l_i\\le r_i$。\n\n| Subtask |            限制             | 分数 |\n| :-----: | :-------------------------: | :--: |\n|   $1$   | $N,K,X,l_i,t_i,r_i\\le 100$  | $20$ |\n|   $2$   | $N,K,X,l_i,t_i,r_i\\le 10^3$ | $30$ |\n|   $3$   |         无特殊限制          | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] Autobahn", "background": null, "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T1「[Autobahn](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n有 $N$ 个人在赛车场疾驰，第 $i$ 个人从第 $l_i$ 小时初疾驰到第 $r_i$ 小时末。\n\n鉴于赛车场要恰钱，每疾驰一小时交一块钱，然而这 $N$ 个人都只付了前 $t_i$ 个小时的钱。\n\n管理员十分仁慈，他们只会在有至少 $K$ 个人在赛车场上疾驰时来收额外的钱。\n\n赛车场搞活动，要求划分出一个长为 $X$ 小时的时间段，在这个时间段内如果有人需要被补交钱，则他不需要补交对应时间段欠的钱。\n\n赛车场希望活动使这 $N$ 个人不需要补交的钱最多，求出这个钱数。", "inputFormat": "第一行三个整数 $N$，$K$，$X$。\n\n接下来 $N$ 行，一行三个整数 $l_i$，$t_i$，$r_i$。", "outputFormat": "仅输出一行一个整数，表示您的答案。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n所划分出的时间段为 $[4,7]$，这之中第一个人不需要交第 $4$ 小时的费用，而第二、三、四个人不需要交第 $6$，$7$ 个小时的费用。\n\n样例 #2 解释：\n\n所划分出的时间段为 $[12,33]$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据有 $1\\le K\\le N\\le10^5$，$1\\le X,l_i,t_i,r_i\\le 10^9$，$l_i\\le r_i$。\n\n| Subtask |            限制             | 分数 |\n| :-----: | :-------------------------: | :--: |\n|   $1$   | $N,K,X,l_i,t_i,r_i\\le 100$  | $20$ |\n|   $2$   | $N,K,X,l_i,t_i,r_i\\le 10^3$ | $30$ |\n|   $3$   |         无特殊限制          | $50$ |", "locale": "zh-CN"}}}
{"pid": "P8388", "type": "P", "difficulty": 6, "samples": [["6\n2 2 2 1 1 2", "2"], ["13\n9 5 2 8 8 2 5 9 9 7 8 5 10", "5"], ["12\n5 5 2 3 2 1 1 5 5 2 5 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COI（克罗地亚）"], "title": "[COI 2021] Cigle", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T2「[Cigle](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您是一位设计师，现在您正在思考您的下一个设计是什么。\n\n您可以使用 $N$ 块分别长为 $d_i$ 宽为一个单位长度的砖来建造一个多行的砖墙，每行长一个单位长度，具体方式是：\n\n- 首先，从第 $1$ 行，即最底下一行开始，从左到右放置一些砖块。\n- 紧接着，在第 $2$ 行，即第 $1$ 行上面一行从右到左放置一些砖块，使得中间一行最右边的砖块与最底下一行最右边的砖块右边边缘对齐。\n- 然后，在第 $3$ 行从左到右放置剩下所有的砖块，使得中间一行最左边的砖块与最上面一行最左边的砖块左边边缘对齐。\n- 以此类推。\n\n由于砖是神奇的，所以砖可以浮空。\n\n对于一座砖墙，他的美丽度被定义为被四个砖块共顶点的顶点个数。\n\n按砖块的放置顺序给定每块砖的长度，求出最大美丽度。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个整数 $d_i$。", "outputFormat": "输出一行一个整数，表示最大美丽度。\n", "hint": "【样例解释】\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vx3vf6cp.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N,d_i\\le 5\\times 10^3$。\n\n| Subtask |          限制          | 分数 |\n| :-----: | :--------------------: | :--: |\n|   $1$   |       $N\\le 20$        | $9$  |\n|   $2$   |       $N\\le 80$        | $11$ |\n|   $3$   | $N\\le 500$，$d_i\\le 2$ | $13$ |\n|   $4$   |       $N\\le 500$       | $15$ |\n|   $5$   |       无特殊限制       | $52$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] Cigle", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T2「[Cigle](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您是一位设计师，现在您正在思考您的下一个设计是什么。\n\n您可以使用 $N$ 块分别长为 $d_i$ 宽为一个单位长度的砖来建造一个多行的砖墙，每行长一个单位长度，具体方式是：\n\n- 首先，从第 $1$ 行，即最底下一行开始，从左到右放置一些砖块。\n- 紧接着，在第 $2$ 行，即第 $1$ 行上面一行从右到左放置一些砖块，使得中间一行最右边的砖块与最底下一行最右边的砖块右边边缘对齐。\n- 然后，在第 $3$ 行从左到右放置剩下所有的砖块，使得中间一行最左边的砖块与最上面一行最左边的砖块左边边缘对齐。\n- 以此类推。\n\n由于砖是神奇的，所以砖可以浮空。\n\n对于一座砖墙，他的美丽度被定义为被四个砖块共顶点的顶点个数。\n\n按砖块的放置顺序给定每块砖的长度，求出最大美丽度。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个整数 $d_i$。", "outputFormat": "输出一行一个整数，表示最大美丽度。\n", "hint": "【样例解释】\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vx3vf6cp.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N,d_i\\le 5\\times 10^3$。\n\n| Subtask |          限制          | 分数 |\n| :-----: | :--------------------: | :--: |\n|   $1$   |       $N\\le 20$        | $9$  |\n|   $2$   |       $N\\le 80$        | $11$ |\n|   $3$   | $N\\le 500$，$d_i\\le 2$ | $13$ |\n|   $4$   |       $N\\le 500$       | $15$ |\n|   $5$   |       无特殊限制       | $52$ |", "locale": "zh-CN"}}}
{"pid": "P8389", "type": "P", "difficulty": 6, "samples": [["3 1\n1 1\n1 3\n2 2", "0 1 2"], ["5 2\n1 3\n3 1\n5 5\n5 10\n7 7", "1 1 4\n5 7 3"], ["5 3\n1 3\n3 1\n5 5\n5 10\n7 7\n", "1 1 2\n5 5 2\n5 10 1\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2021] Izvanzemaljci", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T3「[Izvanzemaljci](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n在二维平面上有 $N$ 个整点 $(x_i,y_i)$，请找出 $K$ 个不相交的正方形，使得所有整点在正方形内或在正方形上，如有多解，求出在所有构造方案中面积最大的正方形面积最小的那一种，如果还有多解，输出任意一组即可。\n\n两个正方形如果没有边相交或相碰，并且没有一个正方形完全被另一个正方形包含的情况，则这两个正方形不相交。", "inputFormat": "第一行为两个整数 $N$，$K$。\n\n接下来 $N$ 行，一行两个整数 $x_i$，$y_i$。", "outputFormat": "共 $K$ 行，每行三个整数 $a_i$，$b_i$，$l_i$，表示有一个左下角为 $(a_i,b_i)$，边长为 $l_i$ 的正方形。\n\n您需要保证 $0\\le |a_i|,|b_i|\\le 3\\times 10^9$，$1\\le l_i\\le 2\\times 10^9$。", "hint": "【样例解释】\n\n样例 #2 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zatdwp0m.png)\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u9roo5df.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N\\le 10^5$，$1\\le K\\le 3$，$0\\le |x_i|,|y_i|\\le 10^9$。\n\n| Subtask |        限制        | 分数 |\n| :-----: | :----------------: | :--: |\n|   $1$   |       $K=1$        | $5$  |\n|   $2$   |       $K=2$        | $21$ |\n|   $3$   |  $N\\le 12$，$K=3$  | $12$ |\n|   $4$   | $N\\le 10^3$，$K=3$ | $30$ |\n|   $5$   |       $K=3$        | $32$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] Izvanzemaljci", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T3「[Izvanzemaljci](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n在二维平面上有 $N$ 个整点 $(x_i,y_i)$，请找出 $K$ 个不相交的正方形，使得所有整点在正方形内或在正方形上，如有多解，求出在所有构造方案中面积最大的正方形面积最小的那一种，如果还有多解，输出任意一组即可。\n\n两个正方形如果没有边相交或相碰，并且没有一个正方形完全被另一个正方形包含的情况，则这两个正方形不相交。", "inputFormat": "第一行为两个整数 $N$，$K$。\n\n接下来 $N$ 行，一行两个整数 $x_i$，$y_i$。", "outputFormat": "共 $K$ 行，每行三个整数 $a_i$，$b_i$，$l_i$，表示有一个左下角为 $(a_i,b_i)$，边长为 $l_i$ 的正方形。\n\n您需要保证 $0\\le |a_i|,|b_i|\\le 3\\times 10^9$，$1\\le l_i\\le 2\\times 10^9$。", "hint": "【样例解释】\n\n样例 #2 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zatdwp0m.png)\n\n样例 #3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u9roo5df.png)\n\n【数据范围】\n\n对于全部数据，有 $1\\le N\\le 10^5$，$1\\le K\\le 3$，$0\\le |x_i|,|y_i|\\le 10^9$。\n\n| Subtask |        限制        | 分数 |\n| :-----: | :----------------: | :--: |\n|   $1$   |       $K=1$        | $5$  |\n|   $2$   |       $K=2$        | $21$ |\n|   $3$   |  $N\\le 12$，$K=3$  | $12$ |\n|   $4$   | $N\\le 10^3$，$K=3$ | $30$ |\n|   $5$   |       $K=3$        | $32$ |", "locale": "zh-CN"}}}
{"pid": "P8390", "type": "P", "difficulty": 6, "samples": [["2", "1\nCMPSWP R1 R2\n"], ["3", "3\nCMPSWP R1 R2\nCMPSWP R1 R3\nCMPSWP R2 R3\n"], ["4", "4\nCMPSWP R1 R3\nCMPSWP R2 R4\nCMPSWP R1 R2 CMPSWP R3 R4\nCMPSWP R2 R3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2021] MalnaRISC", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T4「[MalnaRISC](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您需要使用 MalnaRISC 这一神奇的处理器来解决知名问题——排序！\n\nMalnaRISC 仅支持一种命令 `CMPSWP` $R_i$ $R_j$，其含义为，比较 $R_i$ 与 $R_j$ 的大小，若 $R_i>R_j$，交换他们。\n\nMalnaRISC 最厉害的是，他可以同时运行多个不同的写在一行的程序，只要他们互不冲突，也就是说，`CMPSWP` 所接参数必须仅在同一行使用一次。\n\n现在，请写一个处理长度为 $N$ 的序列的排序问题（按单调不降的顺序）的 MalnaRISC 程序，我们将根据您的程序长度进行评分。", "inputFormat": "仅一行一个整数 $N$。", "outputFormat": "第一行为一个整数 $t$，表示您的代码长度。\n\n接下来 $t$ 行，每行表示您的一行代码。\n", "hint": "| Subtask |  $N$  | $t_1$  | $t_2$ | $t_3$ | 分数 |\n| :-----: | :---: | :----: | :---: | :---: | :--: |\n|   $1$   |  $8$  |  $28$  | $12$  |  $6$  | $10$ |\n|   $2$   | $13$  |  $78$  | $22$  | $10$  | $10 $ |\n|   $3$   | $16$  | $120$  | $28$  | $10$  | $10$ |\n|   $4$   | $32$  | $496$  | $60$  | $15$  | $10 $ |\n|   $5$   | $53$  | $1378$ | $102$ | $21$  | $10$ |\n|   $6$   | $64$  | $2016$ | $124$ | $21$  | $10 $ |\n|   $7$   | $73$  | $2628$ | $142$ | $28$  | $10$ |\n|   $8$   | $82$  | $3321$ | $160$ | $28$  | $10 $ |\n|   $9$   | $91$  | $4095$ | $178$ | $29$  | $10$ |\n|  $10$   | $100$ | $4950$ | $196$ | $30$  | $10 $ |\n\n如果您的正确代码是 $t$ 行，那么您将获得这个分数四舍五入后的结果：\n$$\n\\text{score}(t)=\n\\begin{cases}\n0 & t>t_1\\\\\n1+\\frac{2}{t-t_2} & t_1\\ge t>t_2\\\\\n3+\\frac{7(t_2-t+1)}{t_2-t_3} & t_2\\ge t>t_3\\\\\n10 & t_3\\ge t\n\\end{cases}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2021] MalnaRISC", "background": "", "description": "**译自 [COI 2021](https://hsin.hr/coci/archive/2020_2021/) T4「[MalnaRISC](https://hsin.hr/coci/archive/2020_2021/olympiad_tasks.pdf)」**\n\n您需要使用 MalnaRISC 这一神奇的处理器来解决知名问题——排序！\n\nMalnaRISC 仅支持一种命令 `CMPSWP` $R_i$ $R_j$，其含义为，比较 $R_i$ 与 $R_j$ 的大小，若 $R_i>R_j$，交换他们。\n\nMalnaRISC 最厉害的是，他可以同时运行多个不同的写在一行的程序，只要他们互不冲突，也就是说，`CMPSWP` 所接参数必须仅在同一行使用一次。\n\n现在，请写一个处理长度为 $N$ 的序列的排序问题（按单调不降的顺序）的 MalnaRISC 程序，我们将根据您的程序长度进行评分。", "inputFormat": "仅一行一个整数 $N$。", "outputFormat": "第一行为一个整数 $t$，表示您的代码长度。\n\n接下来 $t$ 行，每行表示您的一行代码。\n", "hint": "| Subtask |  $N$  | $t_1$  | $t_2$ | $t_3$ | 分数 |\n| :-----: | :---: | :----: | :---: | :---: | :--: |\n|   $1$   |  $8$  |  $28$  | $12$  |  $6$  | $10$ |\n|   $2$   | $13$  |  $78$  | $22$  | $10$  | $10 $ |\n|   $3$   | $16$  | $120$  | $28$  | $10$  | $10$ |\n|   $4$   | $32$  | $496$  | $60$  | $15$  | $10 $ |\n|   $5$   | $53$  | $1378$ | $102$ | $21$  | $10$ |\n|   $6$   | $64$  | $2016$ | $124$ | $21$  | $10 $ |\n|   $7$   | $73$  | $2628$ | $142$ | $28$  | $10$ |\n|   $8$   | $82$  | $3321$ | $160$ | $28$  | $10 $ |\n|   $9$   | $91$  | $4095$ | $178$ | $29$  | $10$ |\n|  $10$   | $100$ | $4950$ | $196$ | $30$  | $10 $ |\n\n如果您的正确代码是 $t$ 行，那么您将获得这个分数四舍五入后的结果：\n$$\n\\text{score}(t)=\n\\begin{cases}\n0 & t>t_1\\\\\n1+\\frac{2}{t-t_2} & t_1\\ge t>t_2\\\\\n3+\\frac{7(t_2-t+1)}{t_2-t_3} & t_2\\ge t>t_3\\\\\n10 & t_3\\ge t\n\\end{cases}\n$$", "locale": "zh-CN"}}}
{"pid": "P8391", "type": "P", "difficulty": 6, "samples": [["5 2\n1 3\n2 4\n4 7\n7 9\n3 7\n1 4\n3 2", "2\nimpossible\n"], ["8 5\n1 2\n3 4\n1 5\n6 7\n5 10\n10 20\n15 20\n999999999 1000000000\n1 6\n1 7\n2 4\n3 3\n5 8\n", "3\n4\nimpossible\n0\nimpossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Event Hopping (Day1)", "background": "", "description": "有 $n$ 个区间，第 $i$ 个区间为 $[l_i,r_i]$。\n\n你可以在区间之间跳跃。当你在第 $x$ 个区间上时，你可以跳到一个覆盖右端点 $r_x$ 的区间 $y$ 上，即从 $x$ 能跳到 $y$ 当且仅当 $[r_x \\in [l_y,r_y]]$。\n\n有 $q$ 次询问，每次你一开始在第 $s_i$ 个区间，你需要跳到第 $t_i$ 个区间。你需要输出你至少需要跳多少次。如果不能跳到，输出 `impossible`。", "inputFormat": "第一行，两个整数 $n, q$。\n\n接下来 $n$ 行，每行两个整数 $l_i$，$r_i$。\n\n接下来 $q$ 行，每行两个整数 $s_i$，$t_i$。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 次询问的答案。如果无解输出 `impossible`。", "hint": "- 子任务 $1$ ($10$ 分)：每一个区间可以跳到至多一个其他区间。\n\n- 子任务 $2$ ($10$ 分)：$n≤ 1000$，$q ≤100$。\n\n- 子任务 $3$ ($15$ 分)：$n≤5000$。\n\n- 子任务 $4$ ($15$ 分)：$q ≤100$。\n\n- 子任务 $5$ ($20$ 分)：不存在两个区间 $i,j$ 满足 $[l_i, r_i] \\subseteq [l_j,r_j]$。\n\n- 子任务 $6$ ($30$ 分)：没有特殊限制。\n\n对于所有数据，满足 $1≤n,q ≤100000$，$1≤l_i<r_i≤10^9$，$1≤s_i,t_i≤n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Event Hopping (Day1)", "background": "", "description": "有 $n$ 个区间，第 $i$ 个区间为 $[l_i,r_i]$。\n\n你可以在区间之间跳跃。当你在第 $x$ 个区间上时，你可以跳到一个覆盖右端点 $r_x$ 的区间 $y$ 上，即从 $x$ 能跳到 $y$ 当且仅当 $[r_x \\in [l_y,r_y]]$。\n\n有 $q$ 次询问，每次你一开始在第 $s_i$ 个区间，你需要跳到第 $t_i$ 个区间。你需要输出你至少需要跳多少次。如果不能跳到，输出 `impossible`。", "inputFormat": "第一行，两个整数 $n, q$。\n\n接下来 $n$ 行，每行两个整数 $l_i$，$r_i$。\n\n接下来 $q$ 行，每行两个整数 $s_i$，$t_i$。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 次询问的答案。如果无解输出 `impossible`。", "hint": "- 子任务 $1$ ($10$ 分)：每一个区间可以跳到至多一个其他区间。\n\n- 子任务 $2$ ($10$ 分)：$n≤ 1000$，$q ≤100$。\n\n- 子任务 $3$ ($15$ 分)：$n≤5000$。\n\n- 子任务 $4$ ($15$ 分)：$q ≤100$。\n\n- 子任务 $5$ ($20$ 分)：不存在两个区间 $i,j$ 满足 $[l_i, r_i] \\subseteq [l_j,r_j]$。\n\n- 子任务 $6$ ($30$ 分)：没有特殊限制。\n\n对于所有数据，满足 $1≤n,q ≤100000$，$1≤l_i<r_i≤10^9$，$1≤s_i,t_i≤n$。", "locale": "zh-CN"}}}
{"pid": "P8392", "type": "P", "difficulty": 6, "samples": [["2 5\n2 3 1 1 4\n", "9\n"], ["3 5\n3 1 0 2 0 0 2", "impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2022", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Uplifting Excursion (Day1)", "background": null, "description": "有 $2m+1$ 种物品，重量分别为 $-m,-m+1,\\ldots, m-1,m$。重量为 $i$ 的物品有 $a_i$ 个。\n\n你需要拿走若干物品，使得这些物品重量之和恰好为 $l$。在此基础上，你需要拿尽可能多的物品。\n\n问在物品重量之和恰好为 $l$ 的基础上，你最多能拿多少物品。", "inputFormat": "第一行两个数 $m,l$。\n\n第二行 $2m+1$ 个数，分别为 $a_{-m},a_{-m+1},\\ldots, a_{m-1},a_m$。", "outputFormat": "一行一个数表示答案。若不存在方案，输出 `impossible`。", "hint": "子任务 $1$ ($5$ 分)：$m , a_i≤50$\n\n子任务 $2$ ($15$ 分)：$m , a_i≤100$。\n\n子任务 $3$ ($20$ 分)：$m≤30$。\n\n子任务 $4$ ($20$ 分)：$m ≤50$。\n\n子任务 $5$ ($20$ 分)：$m ≤ 100$。\n\n子任务 $6$ ($20$ 分)：没有特殊限制。\n\n对于子任务 $3$ 到子任务 $6$，如果通过 $\\forall i<0,a_i=0$ 的测试点，可以获得一半的得分。\n\n对于所有数据，满足 $1\\leq m \\leq 300$，$-10^{18}\\le l \\le 10^{18}$，$0\\le a_i\\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Uplifting Excursion (Day1)", "background": null, "description": "有 $2m+1$ 种物品，重量分别为 $-m,-m+1,\\ldots, m-1,m$。重量为 $i$ 的物品有 $a_i$ 个。\n\n你需要拿走若干物品，使得这些物品重量之和恰好为 $l$。在此基础上，你需要拿尽可能多的物品。\n\n问在物品重量之和恰好为 $l$ 的基础上，你最多能拿多少物品。", "inputFormat": "第一行两个数 $m,l$。\n\n第二行 $2m+1$ 个数，分别为 $a_{-m},a_{-m+1},\\ldots, a_{m-1},a_m$。", "outputFormat": "一行一个数表示答案。若不存在方案，输出 `impossible`。", "hint": "子任务 $1$ ($5$ 分)：$m , a_i≤50$\n\n子任务 $2$ ($15$ 分)：$m , a_i≤100$。\n\n子任务 $3$ ($20$ 分)：$m≤30$。\n\n子任务 $4$ ($20$ 分)：$m ≤50$。\n\n子任务 $5$ ($20$ 分)：$m ≤ 100$。\n\n子任务 $6$ ($20$ 分)：没有特殊限制。\n\n对于子任务 $3$ 到子任务 $6$，如果通过 $\\forall i<0,a_i=0$ 的测试点，可以获得一半的得分。\n\n对于所有数据，满足 $1\\leq m \\leq 300$，$-10^{18}\\le l \\le 10^{18}$，$0\\le a_i\\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P8393", "type": "P", "difficulty": 6, "samples": [["4 4\n2 2 4 3\n1 2\n1 3\n2 3\n3 4\n", "1110\n"], ["4 3\n4 2 2 1\n1 2\n3 2\n4 1\n", "1110\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "BalticOI（波罗的海）"], "title": "[BalticOI 2022] Stranded Far From Home (Day2)", "background": "", "description": "你就是不能放任不管……实际上你进行了闯入行动，并且最初所有事情就像计划一样进行。然而，你和你的助手之间的通讯情况变得十分糟糕（这是符合预期的，不是吗？）你没有安全返回吕贝克，而是被困在一个小岛上，并且你的潜艇没有燃料了。\n\n为了及时返回参加 BOI 的颁奖仪式，你现在必须去岛的另一边坐船。然而，当地居民有着奇怪的传统。领带对他们来说非常重要，每个村庄都有自己喜欢的领带颜色，并且这个颜色可能会随着时间的推移而改变。\n\n一份互联网上的报告显示，不同的村庄最初喜欢不同的领带颜色。不幸的是，这份报告已经相当过时了。从那时起，每个星期都有恰好一个村庄说服一个相邻的村庄喜欢和他们一样的领带颜色（如果两个村庄有公路直接相连，它们就是相邻的）。然而，只有当整个岛上喜欢第一个村庄的领带颜色不比喜欢第二个村庄的领带颜色的人少时，这种情况才会发生。足够长的时间过去了，所以现在所有的岛民都喜欢同样的领带颜色。\n\n你基本可以肯定，如果你不戴符合他们喜好的领带，岛民就不会让你通过。因此，为了去渡口，你计划戴上岛民可能喜欢的每种颜色的领带。然而，戴太多的领带会让你看起来很可疑。编写一个程序，使用对岛屿的描述来计算你必须戴哪些领带。", "inputFormat": "第一行包含两个整数 $n$，$m$。$n$ 表示村庄的个数，$m$ 表示岛上道路的条数。村庄从 $1$ 到 $n$ 编号。\n\n接下来一行包含 $n$ 个整数 $s_1,\\dots,s_n$，$s_i$ 表示村庄 $i$ 的居民数。\n\n接下来 $m$ 行，每行两个整数 $a$，$b(1\\le a,b\\le n,a\\neq b)$，表示村庄 $a$ 和 $b$ 之间有一条道路。所有村庄通过道路直接或间接相连。", "outputFormat": "输出一个长度为 $n$ 的 $01$ 字符串。第 $i$ 位为 $1$ 当且仅当有可能所有的岛民现在都喜欢村庄 $i$ 最初喜欢的领带颜色。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g9hsfh2d.png)\n\n【数据范围】\n\n* 子任务 1（10 分）：$N,M\\leq2000$；\n* 子任务 2（10 分）：$s_1\\geq s_2\\geq\\dots\\geq s_n$ 且对于 $i=2\\sim n$，有且仅有一个 $j$ 满足 $j$ 与 $i$ 相连；\n* 子任务 3（15 分）：$i,j$ 直接相连当且仅当 $|i-j|=1$；\n* 子任务 4（30 分）：有且仅有不超过 $10$ 种不同的 $s_i$；\n* 子任务 5（35 分）：无特殊限制。\n\n对于所有数据，满足 $1\\le n\\le 2\\times 10^5$，$0\\le m \\le 2\\times 10^5$，$1 \\le s_ i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Stranded Far From Home (Day2)", "background": "", "description": "你就是不能放任不管……实际上你进行了闯入行动，并且最初所有事情就像计划一样进行。然而，你和你的助手之间的通讯情况变得十分糟糕（这是符合预期的，不是吗？）你没有安全返回吕贝克，而是被困在一个小岛上，并且你的潜艇没有燃料了。\n\n为了及时返回参加 BOI 的颁奖仪式，你现在必须去岛的另一边坐船。然而，当地居民有着奇怪的传统。领带对他们来说非常重要，每个村庄都有自己喜欢的领带颜色，并且这个颜色可能会随着时间的推移而改变。\n\n一份互联网上的报告显示，不同的村庄最初喜欢不同的领带颜色。不幸的是，这份报告已经相当过时了。从那时起，每个星期都有恰好一个村庄说服一个相邻的村庄喜欢和他们一样的领带颜色（如果两个村庄有公路直接相连，它们就是相邻的）。然而，只有当整个岛上喜欢第一个村庄的领带颜色不比喜欢第二个村庄的领带颜色的人少时，这种情况才会发生。足够长的时间过去了，所以现在所有的岛民都喜欢同样的领带颜色。\n\n你基本可以肯定，如果你不戴符合他们喜好的领带，岛民就不会让你通过。因此，为了去渡口，你计划戴上岛民可能喜欢的每种颜色的领带。然而，戴太多的领带会让你看起来很可疑。编写一个程序，使用对岛屿的描述来计算你必须戴哪些领带。", "inputFormat": "第一行包含两个整数 $n$，$m$。$n$ 表示村庄的个数，$m$ 表示岛上道路的条数。村庄从 $1$ 到 $n$ 编号。\n\n接下来一行包含 $n$ 个整数 $s_1,\\dots,s_n$，$s_i$ 表示村庄 $i$ 的居民数。\n\n接下来 $m$ 行，每行两个整数 $a$，$b(1\\le a,b\\le n,a\\neq b)$，表示村庄 $a$ 和 $b$ 之间有一条道路。所有村庄通过道路直接或间接相连。", "outputFormat": "输出一个长度为 $n$ 的 $01$ 字符串。第 $i$ 位为 $1$ 当且仅当有可能所有的岛民现在都喜欢村庄 $i$ 最初喜欢的领带颜色。", "hint": "【样例解释】\n\n样例 #1 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g9hsfh2d.png)\n\n【数据范围】\n\n* 子任务 1（10 分）：$N,M\\leq2000$；\n* 子任务 2（10 分）：$s_1\\geq s_2\\geq\\dots\\geq s_n$ 且对于 $i=2\\sim n$，有且仅有一个 $j$ 满足 $j$ 与 $i$ 相连；\n* 子任务 3（15 分）：$i,j$ 直接相连当且仅当 $|i-j|=1$；\n* 子任务 4（30 分）：有且仅有不超过 $10$ 种不同的 $s_i$；\n* 子任务 5（35 分）：无特殊限制。\n\n对于所有数据，满足 $1\\le n\\le 2\\times 10^5$，$0\\le m \\le 2\\times 10^5$，$1 \\le s_ i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8394", "type": "P", "difficulty": 6, "samples": [["AACCAA\n", "1\n"], ["HEHEHEHIHILOL\n", "7.5\n"], ["ONMLKJIHGFEDCBAABCDEFGHIJKLMNO\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "BalticOI（波罗的海）", "状压 DP"], "title": "[BalticOI 2022] Boarding Passes (Day2)", "background": "", "description": "在成功遵守当地的风俗之后，你正好赶上了轮船的出发时间。然而，你没有想到会有那么多人前往吕贝克！由于你不想在颁奖仪式上迟到（你还需要一些时间将你所有偷来的艺术品存放在旅店里），你想加快轮船的登船速度。\n\n船上有一排 $n$ 个座位，共 $n$ 名乘客预订了所有座位。每位乘客都有一张船票，上面写着他们的指定座位和 $g$ 个登船组中的一组。\n\n登船时，一次会叫一个组的乘客登船。每个登船组内的乘客将以随机顺序登船，即对于所有可能的登船顺序，出现概率相等。每位乘客可以在第一个座位的前面或最后一个座位的后面登船，然后在另一位乘客登船前移到他们的指定座位。\n\n你确定这个过程中，当一个乘客要经过已经入座的乘客时最耗时（装有所有这些领带的行李在过道上是一个相当大的障碍）。幸运的是，你在附近的储物柜里发现了一件工作人员的制服，所以你可以决定各组乘客的登船顺序，并在登船开始前告诉每位乘客，是要从所有座位的前面还是后面登船。\n\n编写一个程序，利用船票信息计算出在登船过程中，如果你确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n### 注意\n\n给定一个登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的期望被定义为：\n$$1\\cdot p_1+2\\cdot p_2+3\\cdot p_3+\\ldots$$\n其中 $p_k$ 是登船时一个乘客要经过已经入座的乘客的次数恰好为 $k$ 的概率。换句话说，这是每个登船组中所有可能的乘客登船顺序中一个乘客要经过已经入座的乘客的平均次数。\n", "inputFormat": "输入包含一个由 $n$ 个字符组成的字符串 $s_1 \\dots s_n$，其中 $s_i$ 是前 $g$ 个大写英文字母中的一个，表示坐在第  个座位的乘客所属的登船组（最前面的座位为 $1$ 号座位）。", "outputFormat": "输出一个实数，表示确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n如果你的输出与答案的绝对误差不大于 $0.001$，则认为你的输出是正确的。", "hint": "对于所有数据，满足 $1\\le g\\le 15$，$1\\le n \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2022] Boarding Passes (Day2)", "background": "", "description": "在成功遵守当地的风俗之后，你正好赶上了轮船的出发时间。然而，你没有想到会有那么多人前往吕贝克！由于你不想在颁奖仪式上迟到（你还需要一些时间将你所有偷来的艺术品存放在旅店里），你想加快轮船的登船速度。\n\n船上有一排 $n$ 个座位，共 $n$ 名乘客预订了所有座位。每位乘客都有一张船票，上面写着他们的指定座位和 $g$ 个登船组中的一组。\n\n登船时，一次会叫一个组的乘客登船。每个登船组内的乘客将以随机顺序登船，即对于所有可能的登船顺序，出现概率相等。每位乘客可以在第一个座位的前面或最后一个座位的后面登船，然后在另一位乘客登船前移到他们的指定座位。\n\n你确定这个过程中，当一个乘客要经过已经入座的乘客时最耗时（装有所有这些领带的行李在过道上是一个相当大的障碍）。幸运的是，你在附近的储物柜里发现了一件工作人员的制服，所以你可以决定各组乘客的登船顺序，并在登船开始前告诉每位乘客，是要从所有座位的前面还是后面登船。\n\n编写一个程序，利用船票信息计算出在登船过程中，如果你确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n### 注意\n\n给定一个登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的期望被定义为：\n$$1\\cdot p_1+2\\cdot p_2+3\\cdot p_3+\\ldots$$\n其中 $p_k$ 是登船时一个乘客要经过已经入座的乘客的次数恰好为 $k$ 的概率。换句话说，这是每个登船组中所有可能的乘客登船顺序中一个乘客要经过已经入座的乘客的平均次数。\n", "inputFormat": "输入包含一个由 $n$ 个字符组成的字符串 $s_1 \\dots s_n$，其中 $s_i$ 是前 $g$ 个大写英文字母中的一个，表示坐在第  个座位的乘客所属的登船组（最前面的座位为 $1$ 号座位）。", "outputFormat": "输出一个实数，表示确定了登船组的登船顺序，并将乘客分配到最前面和后面时，一个乘客要经过已经入座的乘客的次数的最小值的期望。\n\n如果你的输出与答案的绝对误差不大于 $0.001$，则认为你的输出是正确的。", "hint": "对于所有数据，满足 $1\\le g\\le 15$，$1\\le n \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8395", "type": "P", "difficulty": 2, "samples": [["14", "1"], ["40", "3"], ["6", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2022", "枚举", "CCC（加拿大）"], "title": "[CCC 2022 S1]  Good Fours and Good Fives", "background": "", "description": "$\\rm Finn$ 非常喜欢 $4$ 和 $5$，他认为所有的数都可以用 $4$ 和 $5$ 进行相加得出。\n\n例：\n\n$14=5+5+4$\n\n$20=4+4+4+4+4$ 或 $20=5+5+5+5$\n\n$40=4+4+4+4+4+4+4+4+4+4$ 或 $40=4+4+4+4+4+5+5+5+5$ 或 $40=5+5+5+5+5+5+5+5$\n\n当然，$4$ 和 $5$ 的顺序并不重要，重要的是他们的个数。\n\n给你一个正整数 $n$，问有多少种方法可以用 $4$ 和 $5$ 拼凑成 $n$。", "inputFormat": "一行，一个整数 $n$，表示要被拼凑的数。", "outputFormat": "一行，表示方法的数量。如果这个数不能被拼凑，请输出 $0$。", "hint": "对于 $20\\%$ 的数据：$1\\le n\\le 10$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 4$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 5$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^6$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S1]  Good Fours and Good Fives", "background": "", "description": "$\\rm Finn$ 非常喜欢 $4$ 和 $5$，他认为所有的数都可以用 $4$ 和 $5$ 进行相加得出。\n\n例：\n\n$14=5+5+4$\n\n$20=4+4+4+4+4$ 或 $20=5+5+5+5$\n\n$40=4+4+4+4+4+4+4+4+4+4$ 或 $40=4+4+4+4+4+5+5+5+5$ 或 $40=5+5+5+5+5+5+5+5$\n\n当然，$4$ 和 $5$ 的顺序并不重要，重要的是他们的个数。\n\n给你一个正整数 $n$，问有多少种方法可以用 $4$ 和 $5$ 拼凑成 $n$。", "inputFormat": "一行，一个整数 $n$，表示要被拼凑的数。", "outputFormat": "一行，表示方法的数量。如果这个数不能被拼凑，请输出 $0$。", "hint": "对于 $20\\%$ 的数据：$1\\le n\\le 10$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 4$\n\n对于另外 $15\\%$ 的数据：$1\\le n\\le10^5$ 并且保证\n$n\\equiv0$ $\\pmod 5$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^6$", "locale": "zh-CN"}}}
{"pid": "P8396", "type": "P", "difficulty": 3, "samples": [["1\nELODIE CHI\n0\n2\nDWAYNE BEN ANJALI\nCHI FRANCOIS ELODIE", "0"], ["3\nA B\nG L\nJ K\n2\nD F\nD G\n4\nA C G\nB D F\nE H I\nJ K L", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["并查集", "2022", "CCC（加拿大）", "哈希 hashing"], "title": "[CCC 2022 S2] Good Groups", "background": "请注意：这道题是 [CCO 2022 J4  Good Groups](https://www.luogu.com.cn/problem/P8403) 的加强版。\n\n管理备注：似乎没有加强。", "description": "一个班级会被分成 $g$ 个组，每个组有三个人，这种分组方式可能会违反两种规定：\n\n1. 一些学生必须在同一小组；\n2. 一些学生必须不在同一小组。\n\n现在校长找到了你，问学生违反了多少个规定。", "inputFormat": "第一行一个整数 $x$。\n\n接下来 $x$ 行，每行两个学生名字 $name1_1,name1_2$ ，表示这两个学生必须被分配到同一个小组。\n\n接下来一个整数 $y$。\n\n接下来 $y$ 行，每行两个学生名字 $name2_1,name2_2$ ，表示这两个学生必须不在同一个小组。\n\n接下来一个整数 $g$。\n\n接下来 $g$ 行，每行三个学生名字 $name3_1,name3_2,name3_3$，表示这三个学生现在被分在一个小组。\n", "outputFormat": "输出一个整数，表示学生违反了多少个规定。", "hint": "### 样例 2 解释：\n\n1. $\\rm A$ 和 $\\rm B$ 必须在同一组，这一点违反了。\n2. $\\rm G$ 和 $\\rm L$ 必须在同一组，这一点违反了。\n3. $\\rm J$ 和 $\\rm K$ 必须在同一组，这一点没有违反。\n4. $\\rm D$ 和 $\\rm F$ 必须不在同一组，这一点违反了。\n5. $\\rm D$ 和 $\\rm G$ 必须不在同一组，这一点没有被违反。\n\n以上 $5$ 条共违反 $3$ 条，所以输出 $3$。\n\n对于 $20\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$y=0$。\n\n对于另外 $35\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$1\\le y\\le 50$。\n \n对于 $100\\%$ 的数据：$1\\le g\\le 10^5$，$1\\le x\\le 10^5$，$1\\le y\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S2] Good Groups", "background": "请注意：这道题是 [CCO 2022 J4  Good Groups](https://www.luogu.com.cn/problem/P8403) 的加强版。\n\n管理备注：似乎没有加强。", "description": "一个班级会被分成 $g$ 个组，每个组有三个人，这种分组方式可能会违反两种规定：\n\n1. 一些学生必须在同一小组；\n2. 一些学生必须不在同一小组。\n\n现在校长找到了你，问学生违反了多少个规定。", "inputFormat": "第一行一个整数 $x$。\n\n接下来 $x$ 行，每行两个学生名字 $name1_1,name1_2$ ，表示这两个学生必须被分配到同一个小组。\n\n接下来一个整数 $y$。\n\n接下来 $y$ 行，每行两个学生名字 $name2_1,name2_2$ ，表示这两个学生必须不在同一个小组。\n\n接下来一个整数 $g$。\n\n接下来 $g$ 行，每行三个学生名字 $name3_1,name3_2,name3_3$，表示这三个学生现在被分在一个小组。\n", "outputFormat": "输出一个整数，表示学生违反了多少个规定。", "hint": "### 样例 2 解释：\n\n1. $\\rm A$ 和 $\\rm B$ 必须在同一组，这一点违反了。\n2. $\\rm G$ 和 $\\rm L$ 必须在同一组，这一点违反了。\n3. $\\rm J$ 和 $\\rm K$ 必须在同一组，这一点没有违反。\n4. $\\rm D$ 和 $\\rm F$ 必须不在同一组，这一点违反了。\n5. $\\rm D$ 和 $\\rm G$ 必须不在同一组，这一点没有被违反。\n\n以上 $5$ 条共违反 $3$ 条，所以输出 $3$。\n\n对于 $20\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$y=0$。\n\n对于另外 $35\\%$ 的数据：$1\\le g\\le 50$，$1\\le x\\le 50$，$1\\le y\\le 50$。\n \n对于 $100\\%$ 的数据：$1\\le g\\le 10^5$，$1\\le x\\le 10^5$，$1\\le y\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8397", "type": "P", "difficulty": 0, "samples": [["3 2 5", "1 2 1"], ["5 5 14", "1 5 3 2 1"], ["5 5 50", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 S3] Good Samples", "background": "", "description": "注意：乐谱中的音符就是数字。\n\n我们把子乐谱定义为 “非空的连续音符序列”。也就是说，把一个序列排序去重之后，相邻的两个的值相差 $1$ 。\n\n比如说：\n$(3,4,2),(1,2,3,4,2),(4)$ 是 $(1,2,3,4,2)$ 的子乐谱。\n\n注意 $(1,3)$ 不是子乐谱。\n\n如果两个子乐谱在作品中开始或结束的位置不同，我们称之为“不同的子乐谱”。\n\n如果一个子乐谱中任意两个位置的数互不相同，我们称之为“好的子乐谱”。\n\n表演的演奏者非常讨厌，他们对乐谱提出了以下要求：\n\n1. 所有的音符必须低于 $m$ 。\n2. 子乐谱中有 $k$ 个好的子乐谱。\n\n现在他们找到了你，问是否能完成这些操作。", "inputFormat": "第一行输入三个整数 $n,m,k$ ，具体意义见题目描述。", "outputFormat": "一行，$n$ 个整数，表示演奏者想要的乐谱。\n\n如果有一个或多个符合要求的乐谱，请输出字典序最小的一个；如果不能组成演奏这想要的乐谱，则输出 `-1` 。", "hint": "对于 $20\\%$ 的数据：$1\\le n\\le 16,m=2,1\\le k\\le 1000$\n\n对于另外 $20\\%$ 的数据：$1\\le n\\le 10^6,m=2,1\\le k\\le 10^{18}$\n\n对于另外 $25\\%$ 的数据：$1\\le n\\le 10^6,m=n,1\\le k\\le 10^{18}$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^6,1\\le m\\le n,1\\le k\\le 10^{18}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S3] Good Samples", "background": "", "description": "注意：乐谱中的音符就是数字。\n\n我们把子乐谱定义为 “非空的连续音符序列”。也就是说，把一个序列排序去重之后，相邻的两个的值相差 $1$ 。\n\n比如说：\n$(3,4,2),(1,2,3,4,2),(4)$ 是 $(1,2,3,4,2)$ 的子乐谱。\n\n注意 $(1,3)$ 不是子乐谱。\n\n如果两个子乐谱在作品中开始或结束的位置不同，我们称之为“不同的子乐谱”。\n\n如果一个子乐谱中任意两个位置的数互不相同，我们称之为“好的子乐谱”。\n\n表演的演奏者非常讨厌，他们对乐谱提出了以下要求：\n\n1. 所有的音符必须低于 $m$ 。\n2. 子乐谱中有 $k$ 个好的子乐谱。\n\n现在他们找到了你，问是否能完成这些操作。", "inputFormat": "第一行输入三个整数 $n,m,k$ ，具体意义见题目描述。", "outputFormat": "一行，$n$ 个整数，表示演奏者想要的乐谱。\n\n如果有一个或多个符合要求的乐谱，请输出字典序最小的一个；如果不能组成演奏这想要的乐谱，则输出 `-1` 。", "hint": "对于 $20\\%$ 的数据：$1\\le n\\le 16,m=2,1\\le k\\le 1000$\n\n对于另外 $20\\%$ 的数据：$1\\le n\\le 10^6,m=2,1\\le k\\le 10^{18}$\n\n对于另外 $25\\%$ 的数据：$1\\le n\\le 10^6,m=n,1\\le k\\le 10^{18}$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^6,1\\le m\\le n,1\\le k\\le 10^{18}$", "locale": "zh-CN"}}}
{"pid": "P8398", "type": "P", "difficulty": 4, "samples": [["8 10\n0 2 5 5 6 9 0 0", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 S4] Good Triplets", "background": "", "description": "$\\rm Andrew$ 是十分好奇的学生，一天他在纸上画了一个圆，圆心在 $(0,0)$ 。设周长为 $C$ ，圆上每一个点的坐标为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3ltbuv3.png)\n\n现在 $\\rm Andrew$ 在圆上画了 $n$ 个点，第 $i$ 的点画在 $p_i$ 上，$\\rm Andrew$ 可能在一个位置上画多个点。\n\n现在一个好的三角形 $（a,b,c)$ 的定义为：\n\n- $1\\le a<b<c\\le n$\n- 原点 $（0，0）$ 严格位于顶点在 $p_a$，$P_b$ 和 $p_c$ 的三角形内。特别注意的是，原点不在三角形的周长上。\n\n$\\rm Andrew$ 问你有多少个好的三角形。", "inputFormat": "第一行两个整数 $n,c$ ，表示点的个数和圆的周长。\n\n接下来一行，有 $n$ 个整数，具体意义见题目描述。", "outputFormat": "输出一个整数 $x$ ，表示有 $x$ 个好的三角形。", "hint": "样例 $1$ 解释：\n\n$\\rm Andrew$ 画了下面的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o1ie0ubf.png)\n\n原点严格地位于顶点为 $p_1$、$p_2$ 和 $p_5$ 的三角形内，所以 $（1，2，5）$ 是一个好的三角形。其他五个好三联体是$（2，3，6），（2，4，6），（2，5，6），（2，5，7）$ 和$（2，5，8）$。\n\n对于 $20\\%$ 的数据：$3\\le n\\le 200,3\\le c\\le10^6$\n\n对于另外 $20\\%$ 的数据：$3\\le n\\le 10^6,3\\le c\\le6000$\n\n对于 $40\\%$ 的数据：$3\\le n\\le 10^6,3\\le c\\le10^6$ 且所有点的位置互不相同。\n\n对于 $100\\%$ 的数据：$3\\le n\\le 10^6,3\\le c\\le10^6$ ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S4] Good Triplets", "background": "", "description": "$\\rm Andrew$ 是十分好奇的学生，一天他在纸上画了一个圆，圆心在 $(0,0)$ 。设周长为 $C$ ，圆上每一个点的坐标为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3ltbuv3.png)\n\n现在 $\\rm Andrew$ 在圆上画了 $n$ 个点，第 $i$ 的点画在 $p_i$ 上，$\\rm Andrew$ 可能在一个位置上画多个点。\n\n现在一个好的三角形 $（a,b,c)$ 的定义为：\n\n- $1\\le a<b<c\\le n$\n- 原点 $（0，0）$ 严格位于顶点在 $p_a$，$P_b$ 和 $p_c$ 的三角形内。特别注意的是，原点不在三角形的周长上。\n\n$\\rm Andrew$ 问你有多少个好的三角形。", "inputFormat": "第一行两个整数 $n,c$ ，表示点的个数和圆的周长。\n\n接下来一行，有 $n$ 个整数，具体意义见题目描述。", "outputFormat": "输出一个整数 $x$ ，表示有 $x$ 个好的三角形。", "hint": "样例 $1$ 解释：\n\n$\\rm Andrew$ 画了下面的图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o1ie0ubf.png)\n\n原点严格地位于顶点为 $p_1$、$p_2$ 和 $p_5$ 的三角形内，所以 $（1，2，5）$ 是一个好的三角形。其他五个好三联体是$（2，3，6），（2，4，6），（2，5，6），（2，5，7）$ 和$（2，5，8）$。\n\n对于 $20\\%$ 的数据：$3\\le n\\le 200,3\\le c\\le10^6$\n\n对于另外 $20\\%$ 的数据：$3\\le n\\le 10^6,3\\le c\\le6000$\n\n对于 $40\\%$ 的数据：$3\\le n\\le 10^6,3\\le c\\le10^6$ 且所有点的位置互不相同。\n\n对于 $100\\%$ 的数据：$3\\le n\\le 10^6,3\\le c\\le10^6$ ", "locale": "zh-CN"}}}
{"pid": "P8399", "type": "P", "difficulty": 5, "samples": [["4\n1 2\n2 3\n3 4\nYNYN\n4 3 6 2\n", "6"], ["15\n1 5\n5 2\n2 15\n15 4\n2 10\n8 3\n3 1\n1 6\n11 6\n12 6\n11 9\n11 14\n12 7\n13 7\nNNYYYNYYNNNNNNN\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 S5] Good Influencers", "background": "", "description": "给定一棵**树**，点 $i$ 的点权是 $c_i$，上面有的点是蓝点 `Y` ，有的点是白点 `N` 。每次操作可以选定一个**蓝**点，将和这个蓝点直接相连的白点染成蓝色，代价是选定的蓝点的点权。\n\n求将整个树染成蓝色的最小代价。\n\n数据保证存在至少一个白点和至少一个蓝点。\n\n", "inputFormat": "\n第一行一个整数 $n$ 表示树的大小。\n\n接下来 $n-1$ 行每行两个整数 $a_i$,$b_i$，表示 $a_i$ 和 $b_i$ 直接相连。\n\n接下来一行 $n$ 个字符表示每个点初始颜色。\n\n接下来一行 $n$ 个整数表示每个点的点权。", "outputFormat": "一行，表示最小花费。", "hint": "\n对于 $30\\%$ 的数据：$2\\le n\\le 2000,1\\le c_i\\le1000$，且 $a_i=i,b_i=i+1$ 。\n\n对于另外 $50\\%$ 的数据：$2\\le n\\le 2000,1\\le c_i\\le1000$ 。\n\n对于 $100\\%$ 的数据：$2\\le n\\le 2\\times10^5,1\\le c_i\\le1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 S5] Good Influencers", "background": "", "description": "给定一棵**树**，点 $i$ 的点权是 $c_i$，上面有的点是蓝点 `Y` ，有的点是白点 `N` 。每次操作可以选定一个**蓝**点，将和这个蓝点直接相连的白点染成蓝色，代价是选定的蓝点的点权。\n\n求将整个树染成蓝色的最小代价。\n\n数据保证存在至少一个白点和至少一个蓝点。\n\n", "inputFormat": "\n第一行一个整数 $n$ 表示树的大小。\n\n接下来 $n-1$ 行每行两个整数 $a_i$,$b_i$，表示 $a_i$ 和 $b_i$ 直接相连。\n\n接下来一行 $n$ 个字符表示每个点初始颜色。\n\n接下来一行 $n$ 个整数表示每个点的点权。", "outputFormat": "一行，表示最小花费。", "hint": "\n对于 $30\\%$ 的数据：$2\\le n\\le 2000,1\\le c_i\\le1000$，且 $a_i=i,b_i=i+1$ 。\n\n对于另外 $50\\%$ 的数据：$2\\le n\\le 2000,1\\le c_i\\le1000$ 。\n\n对于 $100\\%$ 的数据：$2\\le n\\le 2\\times10^5,1\\le c_i\\le1000$。", "locale": "zh-CN"}}}
{"pid": "P8400", "type": "P", "difficulty": 1, "samples": [["2 5", "3"], ["2 4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 J1] Cupcake Party", "background": "", "description": "幼儿园有 $28$ 个小朋友，因此需要 $28$ 个蛋糕。\n\n一个大盒子可以装 $8$ 块蛋糕，一个小盒子可以装 $3$ 块蛋糕。现在有 $n$ 个大盒子和 $m$ 个小盒子，现在给每个小朋友一块蛋糕，问能剩下几个？", "inputFormat": "一行，两个整数 $n,m$ ，具体意义见题目描述。", "outputFormat": "一行，表示剩余蛋糕的数量。", "hint": "对于全部数据：$0\\le n,m\\le100$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 J1] Cupcake Party", "background": "", "description": "幼儿园有 $28$ 个小朋友，因此需要 $28$ 个蛋糕。\n\n一个大盒子可以装 $8$ 块蛋糕，一个小盒子可以装 $3$ 块蛋糕。现在有 $n$ 个大盒子和 $m$ 个小盒子，现在给每个小朋友一块蛋糕，问能剩下几个？", "inputFormat": "一行，两个整数 $n,m$ ，具体意义见题目描述。", "outputFormat": "一行，表示剩余蛋糕的数量。", "hint": "对于全部数据：$0\\le n,m\\le100$", "locale": "zh-CN"}}}
{"pid": "P8401", "type": "P", "difficulty": 1, "samples": [["3\n12\n4\n10\n3\n9\n1", "3+"], ["2\n8\n0\n12\n1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 J2] Fergusonball Ratings", "background": "", "description": "现在有一个球队需要你评价。\n\n球队中的第 $i$ 个人进了 $a_i$ 个球，犯规了 $b_i$ 次。\n\n所以第 $i$ 个人的分数就是 $5\\times a_i-3\\times b_i$ 。\n\n如果第 $i$ 个人的分数大于 $40$ ，那么这个人就是一个黄金球员。\n\n相对应的，如果这个球队的所有人都是黄金球员，那么这个球队就是一个黄金球队。", "inputFormat": "第一行一个整数 $n$ ，表示球队的人数。\n\n接下来 $2n$ 行，第 $2 i - 1$ 行表示 $a_i$，第 $2 i$ 行表示 $b_i$ 。", "outputFormat": "共一行，表示黄金球员的数量。如果这是一个黄金球队，请再输出一个 `+` 。", "hint": "对于全部数据：$1\\le n\\le 20,1\\le a_i,b_i\\le2000$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 J2] Fergusonball Ratings", "background": "", "description": "现在有一个球队需要你评价。\n\n球队中的第 $i$ 个人进了 $a_i$ 个球，犯规了 $b_i$ 次。\n\n所以第 $i$ 个人的分数就是 $5\\times a_i-3\\times b_i$ 。\n\n如果第 $i$ 个人的分数大于 $40$ ，那么这个人就是一个黄金球员。\n\n相对应的，如果这个球队的所有人都是黄金球员，那么这个球队就是一个黄金球队。", "inputFormat": "第一行一个整数 $n$ ，表示球队的人数。\n\n接下来 $2n$ 行，第 $2 i - 1$ 行表示 $a_i$，第 $2 i$ 行表示 $b_i$ 。", "outputFormat": "共一行，表示黄金球员的数量。如果这是一个黄金球队，请再输出一个 `+` 。", "hint": "对于全部数据：$1\\le n\\le 20,1\\le a_i,b_i\\le2000$", "locale": "zh-CN"}}}
{"pid": "P8402", "type": "P", "difficulty": 2, "samples": [["AFB+8HC-4", "AFB tighten 8\nHC loosen 4"], ["AFB+8SC-4H-2GDPE+9", "AFB tighten 8\nSC loosen 4\nH loosen 2\nGDPE tighten 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 J3]  Harp Tuning", "background": null, "description": "现在有一个竖琴，像其他乐器一样，它可以走调。\n\n一个有音乐倾向的计算机科学学生写了一个聪明的计算机程序来帮助竖琴调音。\n\n这个程序分析了竖琴产生的声音，并提供指令来修复每根失调的弦。\n\n每条指令包括一组琴弦，它们是应该收紧还是松开，以及转多少圈。\n\n例如，单行的 $AFB+8HC-4$ 实际上包含两条调谐指令。\n\n$AFB+8$ 和 $HC-4$。\n\n第一条指令表示竖琴的 $A、F、B$ 弦应收紧 $8$ 圈。\n\n第二条指令表示，竖琴的 $H、C$ 弦应该松开 $4$ 圈。\n\n你的工作是把单行的调音指令变得更容易阅读。", "inputFormat": "一行，输入一个字符串 $s$，具体意义见题目描述。", "outputFormat": "输出若干行。\n\n对于每个指令，第一行输出琴弦的大写字母；如果原指令中是 `+`，输出 `tighten`，否则输出 `loosen`；最后输出转数 $x$（用空格间隔开）。", "hint": "对于全部数据：$1\\le s\\le 1000,1\\le x\\le 99999$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 J3]  Harp Tuning", "background": null, "description": "现在有一个竖琴，像其他乐器一样，它可以走调。\n\n一个有音乐倾向的计算机科学学生写了一个聪明的计算机程序来帮助竖琴调音。\n\n这个程序分析了竖琴产生的声音，并提供指令来修复每根失调的弦。\n\n每条指令包括一组琴弦，它们是应该收紧还是松开，以及转多少圈。\n\n例如，单行的 $AFB+8HC-4$ 实际上包含两条调谐指令。\n\n$AFB+8$ 和 $HC-4$。\n\n第一条指令表示竖琴的 $A、F、B$ 弦应收紧 $8$ 圈。\n\n第二条指令表示，竖琴的 $H、C$ 弦应该松开 $4$ 圈。\n\n你的工作是把单行的调音指令变得更容易阅读。", "inputFormat": "一行，输入一个字符串 $s$，具体意义见题目描述。", "outputFormat": "输出若干行。\n\n对于每个指令，第一行输出琴弦的大写字母；如果原指令中是 `+`，输出 `tighten`，否则输出 `loosen`；最后输出转数 $x$（用空格间隔开）。", "hint": "对于全部数据：$1\\le s\\le 1000,1\\le x\\le 99999$", "locale": "zh-CN"}}}
{"pid": "P8403", "type": "P", "difficulty": 3, "samples": [["1\nELODIE CHI\n0\n2\nDWAYNE BEN ANJALI\nCHI FRANCOIS ELODIE", "0"], ["3\nA B\nG L\nJ K\n2\nD F\nD G\n4\nA C G\nB D F\nE H I\nJ K L", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["并查集", "2022", "CCC（加拿大）", "哈希 hashing"], "title": "[CCC 2022 J4] Good Groups", "background": "请注意：这道题是 [CCO 2022 S2  Good Groups](https://www.luogu.com.cn/problem/P8396) 的弱化版\n\n管理备注：似乎没有弱化", "description": "一个班级会被分成 $g$ 个组，每个组有三个人，这种分组方式可能会违反两种规定：\n\n1. 一些学生必须在同一小组；\n2. 一些学生必须不在同一小组。\n\n现在校长找到了你，问学生一共违反了多少个规定。", "inputFormat": "第一行一个整数 $x$。紧接着 $x$ 行，每行两个学生名字 $name_1,name_2$ ，表示这两个学生必须被分配到同一个小组。\n\n接下来一个整数 $y$。紧接着 $y$ 行，每行两个学生名字 $name_1,name_2$ ，表示这两个学生必须不在同一个小组。\n\n接下来一个整数 $g$。紧接着 $g$ 行，每行三个学生名字$name_1,name_2,name_3$，表示这三个学生现在被分在一个小组。\n", "outputFormat": "输出一个整数，表示学生一共违反了多少个规定。", "hint": "### 样例2解释：\n\n1. $\\rm A$ 和 $\\rm B$ 必须在同一组，这一点违反了。\n2. $\\rm G$ 和 $\\rm L$ 必须在同一组，这一点违反了。\n3. $\\rm J$ 和 $\\rm K$ 必须在同一组，这一点没有违反。\n4. $\\rm D$ 和 $\\rm F$ 必须不在同一组，这一点违反了。\n5. $\\rm D$ 和 $\\rm G$ 必须不在同一组，这一点没有被违反。\n\n以上 $5$ 条共违反 $3$ 条，所以输出 $3$。\n\n对于 $25\\%$ 的数据：$1\\le g\\le 50 , 1\\le x\\le 50,y=0$\n\n对于另外 $60\\%$ 的数据：$1\\le g\\le 50 , 1\\le x\\le 50,1\\le\n y\\le 50$\n \n对于 $100\\%$ 的数据：$1\\le g\\le 10^5,1\\le x\\le 10^5,1\\le y\\le 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 J4] Good Groups", "background": "请注意：这道题是 [CCO 2022 S2  Good Groups](https://www.luogu.com.cn/problem/P8396) 的弱化版\n\n管理备注：似乎没有弱化", "description": "一个班级会被分成 $g$ 个组，每个组有三个人，这种分组方式可能会违反两种规定：\n\n1. 一些学生必须在同一小组；\n2. 一些学生必须不在同一小组。\n\n现在校长找到了你，问学生一共违反了多少个规定。", "inputFormat": "第一行一个整数 $x$。紧接着 $x$ 行，每行两个学生名字 $name_1,name_2$ ，表示这两个学生必须被分配到同一个小组。\n\n接下来一个整数 $y$。紧接着 $y$ 行，每行两个学生名字 $name_1,name_2$ ，表示这两个学生必须不在同一个小组。\n\n接下来一个整数 $g$。紧接着 $g$ 行，每行三个学生名字$name_1,name_2,name_3$，表示这三个学生现在被分在一个小组。\n", "outputFormat": "输出一个整数，表示学生一共违反了多少个规定。", "hint": "### 样例2解释：\n\n1. $\\rm A$ 和 $\\rm B$ 必须在同一组，这一点违反了。\n2. $\\rm G$ 和 $\\rm L$ 必须在同一组，这一点违反了。\n3. $\\rm J$ 和 $\\rm K$ 必须在同一组，这一点没有违反。\n4. $\\rm D$ 和 $\\rm F$ 必须不在同一组，这一点违反了。\n5. $\\rm D$ 和 $\\rm G$ 必须不在同一组，这一点没有被违反。\n\n以上 $5$ 条共违反 $3$ 条，所以输出 $3$。\n\n对于 $25\\%$ 的数据：$1\\le g\\le 50 , 1\\le x\\le 50,y=0$\n\n对于另外 $60\\%$ 的数据：$1\\le g\\le 50 , 1\\le x\\le 50,1\\le\n y\\le 50$\n \n对于 $100\\%$ 的数据：$1\\le g\\le 10^5,1\\le x\\le 10^5,1\\le y\\le 10^5$", "locale": "zh-CN"}}}
{"pid": "P8404", "type": "P", "difficulty": 4, "samples": [["5\n1\n2 4", "3"], ["15\n8\n4 7\n4 1\n14 11\n10 6\n13 4\n4 10\n10 3\n9 14", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "CCC（加拿大）"], "title": "[CCC 2022 J5] Square Pool", "background": "", "description": "罗恩想在他的 $n\\times n$ 的正方形院子里建一个正方形游泳池，但他的院子里有 $T$ 棵树。\n\n你的任务是确定他可以建造的最大的方形游泳池的边长。", "inputFormat": "第一行一个整数 $n$ ，具体意义见题目描述。\n\n第二行一个整数 $T$ ，具体意义见题目描述。\n\n接下来 $T$ 行，每行两个整数 $x,y$ ，表示在 $(x,y)$ 上有一棵树。", "outputFormat": "一行，表示游泳池的最大边长。", "hint": "样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c2b58ek8.png)\n\n样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r7uoub7n.png)\n\n对于 $20\\%$ 的数据：$1\\le n\\le 50,T=1$\n\n对于 $35\\%$ 的数据：$1\\le n\\le 50,1\\le T\\le 10$\n\n对于 $25\\%$ 的数据：$1\\le n\\le 5\\times 10^5,1\\le T\\le 10$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 5\\times 10^5,1\\le T\\le 100$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2022 J5] Square Pool", "background": "", "description": "罗恩想在他的 $n\\times n$ 的正方形院子里建一个正方形游泳池，但他的院子里有 $T$ 棵树。\n\n你的任务是确定他可以建造的最大的方形游泳池的边长。", "inputFormat": "第一行一个整数 $n$ ，具体意义见题目描述。\n\n第二行一个整数 $T$ ，具体意义见题目描述。\n\n接下来 $T$ 行，每行两个整数 $x,y$ ，表示在 $(x,y)$ 上有一棵树。", "outputFormat": "一行，表示游泳池的最大边长。", "hint": "样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c2b58ek8.png)\n\n样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r7uoub7n.png)\n\n对于 $20\\%$ 的数据：$1\\le n\\le 50,T=1$\n\n对于 $35\\%$ 的数据：$1\\le n\\le 50,1\\le T\\le 10$\n\n对于 $25\\%$ 的数据：$1\\le n\\le 5\\times 10^5,1\\le T\\le 10$\n\n对于 $100\\%$ 的数据：$1\\le n\\le 5\\times 10^5,1\\le T\\le 100$", "locale": "zh-CN"}}}
{"pid": "P8405", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2\n2 3\n1 3", "3\n2 1\n3 0\n1 1\n"], ["4 3\n1 2\n3 2\n2 4\n", "4\n2 1\n4 0\n3 1\n1 1"], ["5 10\n2 4\n3 4\n1 4\n4 5\n3 2\n2 1\n5 2\n1 3\n5 3\n1 5", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #6]  Naboj", "background": "", "description": "Šikić 先生是一位化学老师，他正在用 $n$ 个金属球和 $m$ 根铜导线做实验。他将一些对金属球用导线相连，使这些球（直接或间接地）与其他球都相连。他想要教学生关于电荷的知识，因此他将通过按顺序给金属球充电来演示它。\n\nŠikić 先生可以让每个球带上正负电荷的一种。当一个金属球带负电荷时，与这个金属球相连的所有导线中的电子都将被排斥到与该导线相连的另一个金属球上。反过来，当一个金属球带正电荷时，与这个金属球相连的所有导线中的电子都将受这个金属球的吸引。无论导线的先前状态如何，给球充电对导线的影响都相同。\n\n在刚上课的时候，所有的金属球都不带电，导线中的电子不动。对于每根导线，Šikić 先生都想让它其中电子的流向是某一个确定的方向。请帮他确定一个给金属球充电的顺序，使得最后电子的流向是他想要的。", "inputFormat": "第一行两个数 $n$ 和 $m$，意义如题目描述。\n\n接下来 $m$ 行每行两个整数 $a_i$ 和 $b_i$，表示金属球 $a_i$ 和 $b_i$ 之间有一根导线相连，并且这根导线中的电子应更靠近 $a_i$ 而不是 $b_i$。在一对金属球之间最多只有一条导线。所有的金属球都通过导线直接或间接相连。", "outputFormat": "如果不可能让最后电子的流向是 Šikić 先生想要的，输出 $-1$。否则输出 $k$，表示需要充电的金属球数量。$k$ 必须小于等于 $200000$。\n\n接下来 $k$ 行，每行输出两个整数 $c_i$ 和 $d_i(1 \\leq c_i \\leq n,0 \\leq d_i \\leq 1)$，分别表示第 $i$ 步 Šikić 先生需要充电的金属球的编号和是给这个金属球充正电荷（用 $d_i=1$ 表示）还是负电荷（用 $d_i=0$ 表示）。如果有多种方案，输出其中一种即可。", "hint": "### 样例解释 1：\n\n首先，我们给金属球 $2$ 充正电荷。金属球 $1,2$ 和金属球 $2,3$ 之间的导线中的电子现在更靠近 $2$。金属球 $1,3$ 之间的导线仍保持中性。\n\n现在我们给金属球 $3$ 充负电荷。金属球 $2,3$ 之间的导线状态不变，金属球 $1,3$ 之间的导线中的电子更靠近金属球 $1$。\n\n最后我们给金属球 $1$ 冲正电荷。金属球 $1,3$ 之间的导线状态不变，但金属球 $1,2$ 之间的导线现在将更靠近金属球 $1$，目标流向达成。\n\n### 数据范围：\n\n对于全部数据，$1 \\le n\\le 200000$，$1\\le m\\le 500000$，$1 \\le a_i,b_ i\\le n,a_i\\neq b_i$\n\n本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $110$ 分", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #6]  Naboj", "background": "", "description": "Šikić 先生是一位化学老师，他正在用 $n$ 个金属球和 $m$ 根铜导线做实验。他将一些对金属球用导线相连，使这些球（直接或间接地）与其他球都相连。他想要教学生关于电荷的知识，因此他将通过按顺序给金属球充电来演示它。\n\nŠikić 先生可以让每个球带上正负电荷的一种。当一个金属球带负电荷时，与这个金属球相连的所有导线中的电子都将被排斥到与该导线相连的另一个金属球上。反过来，当一个金属球带正电荷时，与这个金属球相连的所有导线中的电子都将受这个金属球的吸引。无论导线的先前状态如何，给球充电对导线的影响都相同。\n\n在刚上课的时候，所有的金属球都不带电，导线中的电子不动。对于每根导线，Šikić 先生都想让它其中电子的流向是某一个确定的方向。请帮他确定一个给金属球充电的顺序，使得最后电子的流向是他想要的。", "inputFormat": "第一行两个数 $n$ 和 $m$，意义如题目描述。\n\n接下来 $m$ 行每行两个整数 $a_i$ 和 $b_i$，表示金属球 $a_i$ 和 $b_i$ 之间有一根导线相连，并且这根导线中的电子应更靠近 $a_i$ 而不是 $b_i$。在一对金属球之间最多只有一条导线。所有的金属球都通过导线直接或间接相连。", "outputFormat": "如果不可能让最后电子的流向是 Šikić 先生想要的，输出 $-1$。否则输出 $k$，表示需要充电的金属球数量。$k$ 必须小于等于 $200000$。\n\n接下来 $k$ 行，每行输出两个整数 $c_i$ 和 $d_i(1 \\leq c_i \\leq n,0 \\leq d_i \\leq 1)$，分别表示第 $i$ 步 Šikić 先生需要充电的金属球的编号和是给这个金属球充正电荷（用 $d_i=1$ 表示）还是负电荷（用 $d_i=0$ 表示）。如果有多种方案，输出其中一种即可。", "hint": "### 样例解释 1：\n\n首先，我们给金属球 $2$ 充正电荷。金属球 $1,2$ 和金属球 $2,3$ 之间的导线中的电子现在更靠近 $2$。金属球 $1,3$ 之间的导线仍保持中性。\n\n现在我们给金属球 $3$ 充负电荷。金属球 $2,3$ 之间的导线状态不变，金属球 $1,3$ 之间的导线中的电子更靠近金属球 $1$。\n\n最后我们给金属球 $1$ 冲正电荷。金属球 $1,3$ 之间的导线状态不变，但金属球 $1,2$ 之间的导线现在将更靠近金属球 $1$，目标流向达成。\n\n### 数据范围：\n\n对于全部数据，$1 \\le n\\le 200000$，$1\\le m\\le 500000$，$1 \\le a_i,b_ i\\le n,a_i\\neq b_i$\n\n本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $110$ 分", "locale": "zh-CN"}}}
{"pid": "P8406", "type": "P", "difficulty": 6, "samples": [["3\n010\n1 2\n2 3", "2\n3"], ["5\n00111\n4 1\n1 5\n2 1\n3 1", "2\n3\n4\n5\n"], ["8\n10010000\n7 5\n4 2\n3 6\n1 3\n6 8\n5 3\n1 2", "2\n2\n2\n3\n4\n6\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "回文自动机 PAM", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #6]  Palindromi", "background": "", "description": "给你一个长度为 $n$ 的 $\\texttt{01}$ 序列，下标为 $1,2,\\dots,n$。最初每个字符都代表了一个长度为 $1$ 的字符串。在一次连接中，需要选择两个字符串 $a$ 和 $b$，将它们删除后，换为字符串 $ab$，即在写下 $a$ 中的所有字符后写下字符串 $b$ 的所有字符。\n\n这 $n$ 个初始字符串需要用 $n-1$ 次连接操作连成一个字符串。第 $i$ 次选择的字符串用一个下标对 $(a_i,b_i)$ 描述，表示要连接的字符串是包含下标为 $a_i$ 的字符的和包含下标为 $b_i$ 的字符的。保证下标为 $a_i$ 和 $b_i$ 的字符不在同一字符串中。\n\n一些字符串 $w$ 的回文值被定义为 $w$ 中不同回文子串的个数。我们定义回文串为从左到右读和从右到左读相同的字符串。一个字符串的子串被定义为可以从字符串开头和（或）结尾开始删去一个或多个字符得到的字符串。\n\n对于每次连接操作，输出每次连成的字符串的回文值。", "inputFormat": "第一行包含一个整数 $n$，表示字符个数。\n\n第二行一个长度为 $n$ 的 $01$ 字符串，表示初始字符串。\n\n接下来 $n-1$ 行，每行两个整数 $a_i$，$b_i$，表示第 $i$ 次连接操作。", "outputFormat": "输出 $n-1$ 行，表示每次连接操作得到的字符串的回文值。", "hint": "### 样例解释3：\n在每个连接之后新创建的字符串是： $\\tt 00, 10,00, 100, 1000,001000 $ 和 $\\tt 00100010$。\n\n它们各自的回文值在样例输出中给出。例如 $\\tt 00100010$ 的回文值是 $8$，因为字符串包含$8$回文子字符串： $\\tt 0, 00, 000, 10001,0100010, 1010$ 和 $00100$。\n\n\n### 数据范围：\n\n对于 $9\\%$ 的数据：$1\\le n\\le100$\n\n对于 $18\\%$ 的数据：$1\\le n\\le1000$\n\n对于 $27\\%$ 的数据：$a_i = 1, b_i = i + 1$\n\n对于 $100\\%$ 的数据：$1\\le n\\le10^5$，$1\\le a_i, b_i\\le n$\n\n本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $110$ 分", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #6]  Palindromi", "background": "", "description": "给你一个长度为 $n$ 的 $\\texttt{01}$ 序列，下标为 $1,2,\\dots,n$。最初每个字符都代表了一个长度为 $1$ 的字符串。在一次连接中，需要选择两个字符串 $a$ 和 $b$，将它们删除后，换为字符串 $ab$，即在写下 $a$ 中的所有字符后写下字符串 $b$ 的所有字符。\n\n这 $n$ 个初始字符串需要用 $n-1$ 次连接操作连成一个字符串。第 $i$ 次选择的字符串用一个下标对 $(a_i,b_i)$ 描述，表示要连接的字符串是包含下标为 $a_i$ 的字符的和包含下标为 $b_i$ 的字符的。保证下标为 $a_i$ 和 $b_i$ 的字符不在同一字符串中。\n\n一些字符串 $w$ 的回文值被定义为 $w$ 中不同回文子串的个数。我们定义回文串为从左到右读和从右到左读相同的字符串。一个字符串的子串被定义为可以从字符串开头和（或）结尾开始删去一个或多个字符得到的字符串。\n\n对于每次连接操作，输出每次连成的字符串的回文值。", "inputFormat": "第一行包含一个整数 $n$，表示字符个数。\n\n第二行一个长度为 $n$ 的 $01$ 字符串，表示初始字符串。\n\n接下来 $n-1$ 行，每行两个整数 $a_i$，$b_i$，表示第 $i$ 次连接操作。", "outputFormat": "输出 $n-1$ 行，表示每次连接操作得到的字符串的回文值。", "hint": "### 样例解释3：\n在每个连接之后新创建的字符串是： $\\tt 00, 10,00, 100, 1000,001000 $ 和 $\\tt 00100010$。\n\n它们各自的回文值在样例输出中给出。例如 $\\tt 00100010$ 的回文值是 $8$，因为字符串包含$8$回文子字符串： $\\tt 0, 00, 000, 10001,0100010, 1010$ 和 $00100$。\n\n\n### 数据范围：\n\n对于 $9\\%$ 的数据：$1\\le n\\le100$\n\n对于 $18\\%$ 的数据：$1\\le n\\le1000$\n\n对于 $27\\%$ 的数据：$a_i = 1, b_i = i + 1$\n\n对于 $100\\%$ 的数据：$1\\le n\\le10^5$，$1\\le a_i, b_i\\le n$\n\n本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $110$ 分", "locale": "zh-CN"}}}
{"pid": "P8407", "type": "P", "difficulty": 6, "samples": [["1\n4\n()))((()\n1 2\n3 5\n4 6\n7 8", "0 1 0 1"], ["1\n4\n)()()()(\n1 2\n3 4\n5 6\n7 8", "1 1 0 0"], ["1\n3\n(()())\n1 6\n2 4\n3 5", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "【征集 SPJ】[COCI 2021/2022 #6]  Superpozicija", "background": "", "description": "世界闻名的物理学家 Juraj 最近发现了一种新的基本粒子——括号子（parenthesision）。括号子可以有开 `(` 或关 `)` 两种状态。使用 Juraj 自制的粒子加速器，他创造了 $t$ 个由 $n$ 个括号子组成的叠加态序列。这 $t$ 个序列中的 $n$ 个括号子都是两个不同的位置和（不必不同的）状态的叠加态。如果序列被观测的话，括号子的波函数就将坍缩，每个括号子的位置和状态就是确定的了。Juraj 想知道这些括号子是否可以坍缩为一个合法的括号序列。\n\nJuraj M. 博士知道这些革命性的且完全有科学依据的粒子的量子物理学已经超出了 COCI 的参赛者的知识范围，所以他提供了一个正式的题面：\n\n给你 $t$ 个长度为 $2n$ 且由左右括号构成的括号序列。每个括号都恰好是一对括号中的一个。一对中的括号可以是不同的，也可以都是左括号或右括号。Juraj 想知道是否可以在每对括号中选一个，使得最后组成的括号序列是一个合法的括号序列。此外，如果是可能的，他需要你输出如何才能获得一个合法的括号序列。一个括号序列是合法的，如果它是一个空串，或者可以写成 $(A)$ 或者 $AB$，其中 $A$ 和 $B$ 是任意的合法括号序列。", "inputFormat": "第一行包含一个整数 $t$，表示括号序列数。接下来描述这 $t$ 个序列。\n\n第一行包含一个整数 $n$，表示这个序列里的括号对数。\n\n第二行包含一个长度为 $2n$ 的字符串 $z$，$z$ 只由字符 `(` 和 `)` 组成。\n\n接下来 $n$ 行，每行包含两个整数 $a_i,b_i$，数字 $1,2,\\dots,2n$ 在其中都只出现恰好一次。", "outputFormat": "输出 $t$ 行，第 $i$ 行输出一个 $01$ 序列，表示可能的括号选择方案。如果第 $i$ 个序列中，第 $j$ 对括号下标为 $a_j$ 的一个被选中，输出 $0$，如果是 $b_j$ 被选中，输出 $1$。如果没有合法的选择方案，输出 $-1$。", "hint": "### 样例解释 1：\n\n从原序列 `()))((()` 中，只有加粗的部分会留下 **(**))**)(**((**)**，即 **()()**，它是一个合法的括号序列。\n\n### 数据范围：\n\n对于 $9\\%$ 的数据：$1\\le n \\le 10$。\n\n对于 $9\\%$ 的数据：$z[a_i]=z[b_i]$。\n\n对于 $18\\%$ 的数据：$b_i=a_i+1$。\n\n对于 $100\\%$ 的数据：$1\\le t \\le 10^5,\\sum n\\le10^5,1\\le n \\le 10^5 ,1\\le a_i \\le b_i \\le 2\\times n$。\n\n本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $110$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【征集 SPJ】[COCI 2021/2022 #6]  Superpozicija", "background": "", "description": "世界闻名的物理学家 Juraj 最近发现了一种新的基本粒子——括号子（parenthesision）。括号子可以有开 `(` 或关 `)` 两种状态。使用 Juraj 自制的粒子加速器，他创造了 $t$ 个由 $n$ 个括号子组成的叠加态序列。这 $t$ 个序列中的 $n$ 个括号子都是两个不同的位置和（不必不同的）状态的叠加态。如果序列被观测的话，括号子的波函数就将坍缩，每个括号子的位置和状态就是确定的了。Juraj 想知道这些括号子是否可以坍缩为一个合法的括号序列。\n\nJuraj M. 博士知道这些革命性的且完全有科学依据的粒子的量子物理学已经超出了 COCI 的参赛者的知识范围，所以他提供了一个正式的题面：\n\n给你 $t$ 个长度为 $2n$ 且由左右括号构成的括号序列。每个括号都恰好是一对括号中的一个。一对中的括号可以是不同的，也可以都是左括号或右括号。Juraj 想知道是否可以在每对括号中选一个，使得最后组成的括号序列是一个合法的括号序列。此外，如果是可能的，他需要你输出如何才能获得一个合法的括号序列。一个括号序列是合法的，如果它是一个空串，或者可以写成 $(A)$ 或者 $AB$，其中 $A$ 和 $B$ 是任意的合法括号序列。", "inputFormat": "第一行包含一个整数 $t$，表示括号序列数。接下来描述这 $t$ 个序列。\n\n第一行包含一个整数 $n$，表示这个序列里的括号对数。\n\n第二行包含一个长度为 $2n$ 的字符串 $z$，$z$ 只由字符 `(` 和 `)` 组成。\n\n接下来 $n$ 行，每行包含两个整数 $a_i,b_i$，数字 $1,2,\\dots,2n$ 在其中都只出现恰好一次。", "outputFormat": "输出 $t$ 行，第 $i$ 行输出一个 $01$ 序列，表示可能的括号选择方案。如果第 $i$ 个序列中，第 $j$ 对括号下标为 $a_j$ 的一个被选中，输出 $0$，如果是 $b_j$ 被选中，输出 $1$。如果没有合法的选择方案，输出 $-1$。", "hint": "### 样例解释 1：\n\n从原序列 `()))((()` 中，只有加粗的部分会留下 **(**))**)(**((**)**，即 **()()**，它是一个合法的括号序列。\n\n### 数据范围：\n\n对于 $9\\%$ 的数据：$1\\le n \\le 10$。\n\n对于 $9\\%$ 的数据：$z[a_i]=z[b_i]$。\n\n对于 $18\\%$ 的数据：$b_i=a_i+1$。\n\n对于 $100\\%$ 的数据：$1\\le t \\le 10^5,\\sum n\\le10^5,1\\le n \\le 10^5 ,1\\le a_i \\le b_i \\le 2\\times n$。\n\n本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $110$ 分。", "locale": "zh-CN"}}}
{"pid": "P8408", "type": "P", "difficulty": 5, "samples": [["1 42\n1 10\n1\n5", "2"], ["2 42\n1 10\n1\n5\n1 5\n1\n5", "3"], ["3 8\n4 5\n1 2 3 2\n1 2 1 3\n1 1\n3\n1\n2 1\n1 2\n2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "矩阵乘法", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #6] GREMLINI", "background": null, "description": "有 $n$ 种小妖精，我们给这 $n$ 类小妖分别编号为 $1,\\dots,n$。\n\n$t$ 年前，一次事故造出了 $n$ 只小妖（视为刚出生的，而非成熟的），这些小妖的种类互不相同。\n\n第 $i$ 种小妖出生后需要 $y_i$ 年成熟，成熟后会立即产下 $k_i$ 个蛋（小妖是无性繁殖的生物）然后死亡。将它的蛋编号为 $1.\\dots,k$，其中，第 $j$ 个蛋需要 $h_{i,j}$ 年孵化，孵出的小妖的类型为 $g _ {i, j}$。\n\n请问，现在和祖先关系最远的小妖到了多少代，不考虑暂未孵出的。假设祖先是 $0$ 代，其子辈为第 $1$ 代，孙辈为第 $2$ 代，以此类推。", "inputFormat": "第一行：$n,t$。\n接下来 $3n$ 行，每三行为一组。\n\n每组的第一行：$k_i,y_i$。\n每组的第二行：$g_{ i,1},\\ldots,g_{i,k_i}$。\n每组的第三行：$h_{ i,1},\\ldots,h_{i,k_i}$。", "outputFormat": "一行，一个整数，表示现在和祖先关系最远的小妖到了多少代。", "hint": "**【样例 #1 解释】**\n\n事故发生 $10$ 年后，最开始的那只小妖（$0$ 代）产下了一个蛋，然后死亡。事故发生 $15$ 年后，蛋孵化出了新的一只小妖（$1$ 代）。事故发生 $25$ 年后，$1$ 代小妖产下了一个蛋，然后死亡。事故发生 $30$ 年后，蛋孵化出了新的一只小妖（$2$ 代）。事故发生 $40$ 年后，$2$ 代小妖产下了一个蛋，然后死亡。事故发生 $42$ 年后，这个蛋仍未孵化，因此不计。\n\n**【数据范围】**\n\n$1 \\le n \\le 100,1 \\le t \\le 10^{15},1 \\le k_i, y_i, h_{i,j} \\le 1000,1 \\le g_{i,j} \\le n$。\n\n本题分值按 COCI 原题设置，满分 $130$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #6] GREMLINI", "background": null, "description": "有 $n$ 种小妖精，我们给这 $n$ 类小妖分别编号为 $1,\\dots,n$。\n\n$t$ 年前，一次事故造出了 $n$ 只小妖（视为刚出生的，而非成熟的），这些小妖的种类互不相同。\n\n第 $i$ 种小妖出生后需要 $y_i$ 年成熟，成熟后会立即产下 $k_i$ 个蛋（小妖是无性繁殖的生物）然后死亡。将它的蛋编号为 $1.\\dots,k$，其中，第 $j$ 个蛋需要 $h_{i,j}$ 年孵化，孵出的小妖的类型为 $g _ {i, j}$。\n\n请问，现在和祖先关系最远的小妖到了多少代，不考虑暂未孵出的。假设祖先是 $0$ 代，其子辈为第 $1$ 代，孙辈为第 $2$ 代，以此类推。", "inputFormat": "第一行：$n,t$。\n接下来 $3n$ 行，每三行为一组。\n\n每组的第一行：$k_i,y_i$。\n每组的第二行：$g_{ i,1},\\ldots,g_{i,k_i}$。\n每组的第三行：$h_{ i,1},\\ldots,h_{i,k_i}$。", "outputFormat": "一行，一个整数，表示现在和祖先关系最远的小妖到了多少代。", "hint": "**【样例 #1 解释】**\n\n事故发生 $10$ 年后，最开始的那只小妖（$0$ 代）产下了一个蛋，然后死亡。事故发生 $15$ 年后，蛋孵化出了新的一只小妖（$1$ 代）。事故发生 $25$ 年后，$1$ 代小妖产下了一个蛋，然后死亡。事故发生 $30$ 年后，蛋孵化出了新的一只小妖（$2$ 代）。事故发生 $40$ 年后，$2$ 代小妖产下了一个蛋，然后死亡。事故发生 $42$ 年后，这个蛋仍未孵化，因此不计。\n\n**【数据范围】**\n\n$1 \\le n \\le 100,1 \\le t \\le 10^{15},1 \\le k_i, y_i, h_{i,j} \\le 1000,1 \\le g_{i,j} \\le n$。\n\n本题分值按 COCI 原题设置，满分 $130$。", "locale": "zh-CN"}}}
{"pid": "P8409", "type": "P", "difficulty": 6, "samples": [["3 4\n1 -2 5 200\n-8 0 -4 -10\n11 4 0 100", "345 2\nrotS 2 1\nnegR 2"], ["3 3\n8 -2 7\n1 0 -3\n-4 -8 3", "34 4\nrotR 1 1\nrotS 3 1\nnegR 2\nnegR 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2009", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #5] CHUCK", "background": "", "description": "给你一个 $R$ 行 $C$ 列的矩阵 $a$，$|a_{i,j}| \\le 10^4$。请使用若干次下述操作（次数尽量少），使得矩阵中 $\\sum_i \\sum_j a_{i,j}$ 尽可能大。\n\n\n\n| 操作 | 示例 |  |\n| :---: | :---: | :---: |\n| `rotR i k` 将第 $i$ 行的元素循环右移 $k$ 位 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\operatorname{rotR} 3\\ 1}\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 9 & 7 & 8 \\\\ 10 & 11 & 12\\end{array}\\right)$ |\n| `rotS j k` 将第 $j$ 列的元素循环下移 $k$ 位 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\text { rotS } 3\\ 2}\\left(\\begin{array}{ccc}1 & 2 & 9 \\\\ 4 & 5 & 12 \\\\ 7 & 8 & 3 \\\\ 10 & 11 & 6\\end{array}\\right)$ |\n| `negR i` 将第 $i$ 行的元素全部乘以 -1 。 该操作当且仅当该行任何一个元素均未乘以 -1 时有效 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\text { negR } 2}\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ -4 & -5 & -6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ |\n| `negS j` 将第 $j$ 列的元素全部乘以 -1。 该操作当且仅当该列任何一个元素均未乘以 -1 时有效 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 0 & 0 & 0 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\text { negS } 1}\\left(\\begin{array}{ccc}-1 & 2 & 3 \\\\ 0 & 0 & 0 \\\\ -7 & 8 & 9 \\\\ -10 & 11 & 12\\end{array}\\right)$ |", "inputFormat": "第一行：$r,c$。\n接下来 $r$ 行：矩阵 $a$。", "outputFormat": "第一行包含两个整数，第一个整数为 $\\sum_i \\sum_j a_{i,j}$ 的最大值，第二个数为操作数量 $t$。\n接下来 $t$ 行，每行包含一组操作。", "hint": "$1 \\le R,C \\le 100$，$|A_{i,j}|s \\le 10^4$\n\n#### 评分标准\n若你求了个错误的最大和，或是执行的操作中有无效的，该测试点不得分，否则：\n\n若 $t \\le 5 \\cdot RC$，你将得到该点的所有分数；\n\n若 $5\\cdot RC<T<10^5$，你将得到该点 $50\\%$ 的分数；\n\n若 $t > 10^5$，你将得不到该点的任何分数。\n\n本题分值按 COCI 原题设置，满分 $130$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #5] CHUCK", "background": "", "description": "给你一个 $R$ 行 $C$ 列的矩阵 $a$，$|a_{i,j}| \\le 10^4$。请使用若干次下述操作（次数尽量少），使得矩阵中 $\\sum_i \\sum_j a_{i,j}$ 尽可能大。\n\n\n\n| 操作 | 示例 |  |\n| :---: | :---: | :---: |\n| `rotR i k` 将第 $i$ 行的元素循环右移 $k$ 位 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\operatorname{rotR} 3\\ 1}\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 9 & 7 & 8 \\\\ 10 & 11 & 12\\end{array}\\right)$ |\n| `rotS j k` 将第 $j$ 列的元素循环下移 $k$ 位 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\text { rotS } 3\\ 2}\\left(\\begin{array}{ccc}1 & 2 & 9 \\\\ 4 & 5 & 12 \\\\ 7 & 8 & 3 \\\\ 10 & 11 & 6\\end{array}\\right)$ |\n| `negR i` 将第 $i$ 行的元素全部乘以 -1 。 该操作当且仅当该行任何一个元素均未乘以 -1 时有效 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\text { negR } 2}\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ -4 & -5 & -6 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ |\n| `negS j` 将第 $j$ 列的元素全部乘以 -1。 该操作当且仅当该列任何一个元素均未乘以 -1 时有效 | $\\left(\\begin{array}{ccc}1 & 2 & 3 \\\\ 0 & 0 & 0 \\\\ 7 & 8 & 9 \\\\ 10 & 11 & 12\\end{array}\\right)$ | $\\xrightarrow{\\text { negS } 1}\\left(\\begin{array}{ccc}-1 & 2 & 3 \\\\ 0 & 0 & 0 \\\\ -7 & 8 & 9 \\\\ -10 & 11 & 12\\end{array}\\right)$ |", "inputFormat": "第一行：$r,c$。\n接下来 $r$ 行：矩阵 $a$。", "outputFormat": "第一行包含两个整数，第一个整数为 $\\sum_i \\sum_j a_{i,j}$ 的最大值，第二个数为操作数量 $t$。\n接下来 $t$ 行，每行包含一组操作。", "hint": "$1 \\le R,C \\le 100$，$|A_{i,j}|s \\le 10^4$\n\n#### 评分标准\n若你求了个错误的最大和，或是执行的操作中有无效的，该测试点不得分，否则：\n\n若 $t \\le 5 \\cdot RC$，你将得到该点的所有分数；\n\n若 $5\\cdot RC<T<10^5$，你将得到该点 $50\\%$ 的分数；\n\n若 $t > 10^5$，你将得不到该点的任何分数。\n\n本题分值按 COCI 原题设置，满分 $130$。", "locale": "zh-CN"}}}
{"pid": "P8410", "type": "P", "difficulty": 1, "samples": [["7 1 2020\nwop:\n/yueliang\neoq:\nwop_loushang\nwop:\neoq_npy_when\neoq:\n/oh\ndek:\n/oh\nrif:\nNOI2022_rp_++\nrif:\n/hsh", "2022"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2022", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SvR-1」Don't Mozheng. /oh", "background": "**Problem Number:** $\\textit{58}$\n\n在 Guluo Academic 群中，大家正在魔怔。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iphmcxwz.png)\n\n洛谷博客上的《魔怔导论》：<https://www.luogu.com.cn/blog/supervise/how-to-get-a-mz>。\n\n需要《魔怔导论》（目前更新至 v1.1.1 版本）的 PDF 请于下方「**题目附件**」处下载。", "description": "你得到了 $n$ 条信息，这些信息共有三种类型（注意 $\\texttt<\\textit{str}\\texttt>$ 描述一个名为 $str$ 的字符串，**该字符串不含空格、字符 $\\texttt:$ 与 $\\texttt/$**，不含两边的尖角括号）：\n\n1. 形如 $\\texttt<\\textit{str}\\texttt{>:}$。意为**接下来一行的一条信息**是名为 $str$ 的用户发的。\n2. 形如 $\\texttt{/<}str\\texttt>$。意为一条名称为 $str$ 的**表情信息**。\n3. 形如 $\\texttt<\\textit{str}\\texttt>$。意为一条内容为 $str$ 的文字信息。\n\n你经过长期观察，发现名称为 $\\texttt{oh}$ 和 $\\texttt{hsh}$ 的**表情信息**具有魔怔的意味。\n\n并且在一段对话中：\n\n- 一个 $\\texttt{oh}$ 表情会增加 $a$ 的魔怔值。\n- 一个 $\\texttt{hsh}$ 表情会增加 $b$ 的魔怔值。\n- **其他的任何信息都不会影响魔怔值，魔怔值初始为 $0$**。\n\n现在你需要对于这些信息，计算出总的魔怔值。", "inputFormat": "第一行三个整数 $n,a,b$，表示共有 $n$ 条信息，$a,b$ 意义如题述。\n\n接下来 $2\\times n$ 行，描述每条信息：\n\n- 第一行是第 1 类信息。\n- 第二行是第 2 类**或**第 3 类信息。", "outputFormat": "仅一行一个整数，即总的魔怔值。", "hint": "#### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mbfgnv8i.png)\n\n如图所示。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n记 $l$ 表示输入中单行信息的最大长度。\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & \\le 10 & - & 20 \\\\\\hline\n\\textsf{2} & \\le 100 & - & 20 \\\\\\hline\n\\textsf{3} & \\text{无特殊限制} & \\text A & 20 \\\\\\hline\n\\textsf{4} & \\text{无特殊限制} & - & 40 \\\\\\hline\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\text{A}$：输入不含有第 3 类信息。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^4$，$1\\le l\\le 50$，$1\\le a,b\\le 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SvR-1」Don't Mozheng. /oh", "background": "**Problem Number:** $\\textit{58}$\n\n在 Guluo Academic 群中，大家正在魔怔。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iphmcxwz.png)\n\n洛谷博客上的《魔怔导论》：<https://www.luogu.com.cn/blog/supervise/how-to-get-a-mz>。\n\n需要《魔怔导论》（目前更新至 v1.1.1 版本）的 PDF 请于下方「**题目附件**」处下载。", "description": "你得到了 $n$ 条信息，这些信息共有三种类型（注意 $\\texttt<\\textit{str}\\texttt>$ 描述一个名为 $str$ 的字符串，**该字符串不含空格、字符 $\\texttt:$ 与 $\\texttt/$**，不含两边的尖角括号）：\n\n1. 形如 $\\texttt<\\textit{str}\\texttt{>:}$。意为**接下来一行的一条信息**是名为 $str$ 的用户发的。\n2. 形如 $\\texttt{/<}str\\texttt>$。意为一条名称为 $str$ 的**表情信息**。\n3. 形如 $\\texttt<\\textit{str}\\texttt>$。意为一条内容为 $str$ 的文字信息。\n\n你经过长期观察，发现名称为 $\\texttt{oh}$ 和 $\\texttt{hsh}$ 的**表情信息**具有魔怔的意味。\n\n并且在一段对话中：\n\n- 一个 $\\texttt{oh}$ 表情会增加 $a$ 的魔怔值。\n- 一个 $\\texttt{hsh}$ 表情会增加 $b$ 的魔怔值。\n- **其他的任何信息都不会影响魔怔值，魔怔值初始为 $0$**。\n\n现在你需要对于这些信息，计算出总的魔怔值。", "inputFormat": "第一行三个整数 $n,a,b$，表示共有 $n$ 条信息，$a,b$ 意义如题述。\n\n接下来 $2\\times n$ 行，描述每条信息：\n\n- 第一行是第 1 类信息。\n- 第二行是第 2 类**或**第 3 类信息。", "outputFormat": "仅一行一个整数，即总的魔怔值。", "hint": "#### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mbfgnv8i.png)\n\n如图所示。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n记 $l$ 表示输入中单行信息的最大长度。\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & \\le 10 & - & 20 \\\\\\hline\n\\textsf{2} & \\le 100 & - & 20 \\\\\\hline\n\\textsf{3} & \\text{无特殊限制} & \\text A & 20 \\\\\\hline\n\\textsf{4} & \\text{无特殊限制} & - & 40 \\\\\\hline\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\text{A}$：输入不含有第 3 类信息。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^4$，$1\\le l\\le 50$，$1\\le a,b\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P8411", "type": "P", "difficulty": 3, "samples": [["6 114514", "14907285111"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2022", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SvR-1」Problem", "background": "小 L 打颓被 nodgd 发现，于是他开始做题了。", "description": "他的 DS 非常菜，于是他把一共 $n$ 道 DS 题加到了自己的计划题单里，其中第 $i$ 道题的有趣程度为 $a_i$。\n\n由于他并不精通 DS，他发现他在做一些题目之前需要先做另一些题目。这样的关系共有 $n - 1$ 组，他还发现每道题都出现在了这些关系中且没有重复。\n\n他发现 $\\forall 2 \\leq i \\leq n$，第 $i$ 题和第 $fa_i$ 题间存在上文所述的关系，且 $1 \\leq fa_i < i$。**他必须先做第 $fa_i$ 题后才能做第 $i$ 题**。\n\n他发现，如果他在做一道题之前高兴程度为 $k$，则他做完第 $i$ 题后，他的高兴程度便会变为 $\\min(k, a_i)$。**他做题前的高兴程度为无穷大**。\n\n他想问你**在必须先做第 $1$ 题且不能重复做某一道题**的情况下，他在做题的全过程中每做完一道题后**高兴程度之和的最大值**。", "inputFormat": "第一行，两个整数 $n, seed$；\n\n由于输入量较大，我们采用如下方式生成 $a_i, fa_i$。\n\nC++：\n\n```cpp\ntypedef unsigned int uint;\n\ninline uint get_next(uint &seed){\n\tseed ^= seed << 13;\n\tseed ^= seed >> 17;\n\tseed ^= seed << 5;\n\treturn seed;\n}\n\nint main(){\n\t// ...\n\tfor (int i = 1; i <= n; i++){\n\t\ta[i] = get_next(seed);\n\t}\n\tfor (int i = 2; i <= n; i++){\n\t\tfa[i] = get_next(seed) % (i - 1) + 1;\n\t}\n\t// ...\n\treturn 0;\n}\n```\n使用其他语言的选手请参考「**说明/提示**」中的「**伪代码参考**」。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "#### 样例 #1 解释\n在该组样例中 $a = [3398922311, 3077554952, 2933028207, 4018360144, 1263042788, 835814542]$，$fa_2 = fa_3 = fa_4 = 1$，$fa_5 = fa_6 = 2$。\n\n最优方案之一：依次做第 $1, 4, 2, 3, 5, 6$ 题，最大值为 $3398922311 + 3398922311 + 3077554952 + 2933028207 + 1263042788 + 835814542 = 14907285111$。\n#### 伪代码参考\n$$\n\\def\\b#1{ \\textbf{ #1 } }\\def\\t#1{\\text{ #1 }}\\def\\s{\\quad}\\def\\f#1{\\textsf{ #1 }}\n\\def\\l{\\underline{\\kern{300pt}}\\\\[-10pt]} \n\\def\\r{\\overline{\\underline{\\kern{300pt}}}}\n\\begin{aligned}\n&\\r\\\\&\\b{Algorithm:}\\t{Get }a_i,fa_i\\\\[-13pt]&\\l\\\\\n&\\begin{aligned}\n    \\f{1.}&\\b{function} \\b{\\color{red}unsigned int} \\t{getnext}(\\b{\\color{red}unsigned int}\\&seed): \\\\\n    \\f{2.}&\\s seed=seed\\oplus\\t{left}(seed,13)\\\\\n    \\f{3.}&\\s seed=seed\\oplus\\t{right}(seed,17)\\\\\n    \\f{4.}&\\s seed=seed\\oplus\\t{left}(seed,5) \\\\\n    \\f{5.}&\\s \\b{return} seed\\\\\n    \\f{6.}&\\b{function} \\t{main}(n):\\\\\n    \\f{7.}&\\s \\b{for} i \\b{from} 1 \\b{to} n \\b{step}1\\\\\n    \\f{8.}&\\s\\s a_i=\\t{getnext}(seed)\\\\\n    \\f{9.}&\\s \\b{end for} \\\\\n    \\f{10.}&\\s \\b{for} i \\b{from} 2 \\b{to} n \\b{step}1\\\\\n    \\f{11.}&\\s\\s fa_i=\\t{getnext}(seed)\\bmod(i-1)+1\\\\\n    \\f{12.}&\\s \\b{end for} \\\\\n    \\end{aligned}\\\\[-12pt]\n&\\r\n\\end{aligned}\n$$\n\n其中 $\\text{left}(x,d)$ 和 $\\text{right}(x,d)$ 分别表示将 $x$ 左移或右移 $d$ 位。\n#### 数据规模与约定\n**本题自动开启捆绑测试和 O2 优化。**\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n \\leq} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & 10 & 10 \\\\\\hline\n\\textsf{2} & 10^4 & 20 \\\\\\hline\n\\textsf{3} & 10^6 & 20 \\\\\\hline\n\\textsf{4} & \\text{无特殊限制} & 50 \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^7$，$0 \\leq seed < 2^{32}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SvR-1」Problem", "background": "小 L 打颓被 nodgd 发现，于是他开始做题了。", "description": "他的 DS 非常菜，于是他把一共 $n$ 道 DS 题加到了自己的计划题单里，其中第 $i$ 道题的有趣程度为 $a_i$。\n\n由于他并不精通 DS，他发现他在做一些题目之前需要先做另一些题目。这样的关系共有 $n - 1$ 组，他还发现每道题都出现在了这些关系中且没有重复。\n\n他发现 $\\forall 2 \\leq i \\leq n$，第 $i$ 题和第 $fa_i$ 题间存在上文所述的关系，且 $1 \\leq fa_i < i$。**他必须先做第 $fa_i$ 题后才能做第 $i$ 题**。\n\n他发现，如果他在做一道题之前高兴程度为 $k$，则他做完第 $i$ 题后，他的高兴程度便会变为 $\\min(k, a_i)$。**他做题前的高兴程度为无穷大**。\n\n他想问你**在必须先做第 $1$ 题且不能重复做某一道题**的情况下，他在做题的全过程中每做完一道题后**高兴程度之和的最大值**。", "inputFormat": "第一行，两个整数 $n, seed$；\n\n由于输入量较大，我们采用如下方式生成 $a_i, fa_i$。\n\nC++：\n\n```cpp\ntypedef unsigned int uint;\n\ninline uint get_next(uint &seed){\n\tseed ^= seed << 13;\n\tseed ^= seed >> 17;\n\tseed ^= seed << 5;\n\treturn seed;\n}\n\nint main(){\n\t// ...\n\tfor (int i = 1; i <= n; i++){\n\t\ta[i] = get_next(seed);\n\t}\n\tfor (int i = 2; i <= n; i++){\n\t\tfa[i] = get_next(seed) % (i - 1) + 1;\n\t}\n\t// ...\n\treturn 0;\n}\n```\n使用其他语言的选手请参考「**说明/提示**」中的「**伪代码参考**」。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "#### 样例 #1 解释\n在该组样例中 $a = [3398922311, 3077554952, 2933028207, 4018360144, 1263042788, 835814542]$，$fa_2 = fa_3 = fa_4 = 1$，$fa_5 = fa_6 = 2$。\n\n最优方案之一：依次做第 $1, 4, 2, 3, 5, 6$ 题，最大值为 $3398922311 + 3398922311 + 3077554952 + 2933028207 + 1263042788 + 835814542 = 14907285111$。\n#### 伪代码参考\n$$\n\\def\\b#1{ \\textbf{ #1 } }\\def\\t#1{\\text{ #1 }}\\def\\s{\\quad}\\def\\f#1{\\textsf{ #1 }}\n\\def\\l{\\underline{\\kern{300pt}}\\\\[-10pt]} \n\\def\\r{\\overline{\\underline{\\kern{300pt}}}}\n\\begin{aligned}\n&\\r\\\\&\\b{Algorithm:}\\t{Get }a_i,fa_i\\\\[-13pt]&\\l\\\\\n&\\begin{aligned}\n    \\f{1.}&\\b{function} \\b{\\color{red}unsigned int} \\t{getnext}(\\b{\\color{red}unsigned int}\\&seed): \\\\\n    \\f{2.}&\\s seed=seed\\oplus\\t{left}(seed,13)\\\\\n    \\f{3.}&\\s seed=seed\\oplus\\t{right}(seed,17)\\\\\n    \\f{4.}&\\s seed=seed\\oplus\\t{left}(seed,5) \\\\\n    \\f{5.}&\\s \\b{return} seed\\\\\n    \\f{6.}&\\b{function} \\t{main}(n):\\\\\n    \\f{7.}&\\s \\b{for} i \\b{from} 1 \\b{to} n \\b{step}1\\\\\n    \\f{8.}&\\s\\s a_i=\\t{getnext}(seed)\\\\\n    \\f{9.}&\\s \\b{end for} \\\\\n    \\f{10.}&\\s \\b{for} i \\b{from} 2 \\b{to} n \\b{step}1\\\\\n    \\f{11.}&\\s\\s fa_i=\\t{getnext}(seed)\\bmod(i-1)+1\\\\\n    \\f{12.}&\\s \\b{end for} \\\\\n    \\end{aligned}\\\\[-12pt]\n&\\r\n\\end{aligned}\n$$\n\n其中 $\\text{left}(x,d)$ 和 $\\text{right}(x,d)$ 分别表示将 $x$ 左移或右移 $d$ 位。\n#### 数据规模与约定\n**本题自动开启捆绑测试和 O2 优化。**\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n \\leq} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & 10 & 10 \\\\\\hline\n\\textsf{2} & 10^4 & 20 \\\\\\hline\n\\textsf{3} & 10^6 & 20 \\\\\\hline\n\\textsf{4} & \\text{无特殊限制} & 50 \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^7$，$0 \\leq seed < 2^{32}$。", "locale": "zh-CN"}}}
{"pid": "P8412", "type": "P", "difficulty": 5, "samples": [["3\n10 13\n10 3\n2 1", "2 3\n-1 -1\n1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「SvR-1」Hack Function!", "background": "**Problem Number:** $\\textit{63}$\n\n小 C 坐在 J-PSC2077 的赛场（题目可于下方「**题目附件**」处下载）上，他早已年逾七旬，但作为 Z 队选手还是成功参赛。", "description": "此时的 J-PSC 终于改成了 CF 赛制，小 C 迅速地 AK 了 Day 1，他发现 T2 function 比较好 Hack，题目的人话翻译如下：\n\n> 对于一个数 $A$，定义函数 $f(A)$ 如下：\n> \n> 1. 先把 $A$ 变成 $k$ 进制数 $B$。\n> 2. 将 $A$ 替换为 $B$ 各位之和。\n> 3. 返回执行第 1 步，直到 $B$ 是一位数为止。\n> 4. 记 $x$ 表示 $A$ 此时的值（十进制）。\n> 此时 $f(A) = x$，$f(A)$ 称作 $A$ 关于 $k$ 的**位和函数**。\n>\n> 给定 $k, l, r, p$，求出 $\\sum_{i = l}^r f(i^i) \\bmod p$ 的值。\n>\n> **特别地，当 $\\sum_{i = l}^r f(i^i) = p$ 时，输出 $\\texttt{perfect}$。**\n\n小 C 迅速秒了该题，当他翻看别人的代码时，发现他们用的全是暴力枚举。（因为机子跑得飞快）\n\n好不容易看到一个人，他的代码里竟然没有一个  $\\texttt{perfect}$！但由于数据过弱，竟然让他 pp 了。\n\n小 C 突然脑子一热，忘记了怎么构造 Hack 数据，所以他通过 Luogu 6.0 求助于你。\n\n小 C 会告诉你 $k, p$ 的值，你需要构造一组 $l, r$，**使答案输出为 $\\texttt{perfect}$**。\n\n**若无法构造，输出两个 $\\texttt{-1}$。**", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $k,p$，含义如题所述。", "outputFormat": "共 $T$ 行，对于每组数据，输出你构造的 $l,r$ 的值。\n\n若有多组解，输出任意一组。", "hint": "#### 样例 1 说明\n\n- 对于数据 $1$，在 $k = 10$ 下，有 $f(2^2) = f(4) = 4$，$f(3^3) = f(27) = 9$，显然 $l = 2, r = 3$ 时原题应该输出 $\\texttt{perfect}$。\n- 对于数据 $2$，在 $k = 10$ 下，发现不可能满足要求。\n- 对于数据 $3$，在 $k = 2$ 下，显然有 $f(1^1) = 1$，但该样例仅用于理解，根据数据规模与约定，我们保证 $k \\geq 10$。\n\n#### 数据规模与约定\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\textbf{说明} & \\textbf{时限} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & \\text{无解} & 1\\text{ s} & 3 \\\\\\hline\n\\textsf{2} & \\text{有解且\\textbf{\\textsf{存在}}一组解使 }1\\le l\\le r\\le 10^5 & 1\\text{ s} & 16 \\\\\\hline\n\\textsf{3} & 1\\le p\\le 10^7 & 1\\text{ s} & 34 \\\\\\hline\n\\textsf{4} & \\text{无特殊限制} & 1.5\\text{ s} & 47 \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$10 \\leq k \\leq 10^3$，$1 \\leq p \\leq 10^8$，$1 \\leq T \\leq 10$。\n\n保证时限在 std 用时的 $4$ 倍以上。\n\n#### 评测说明\n\n**本题开启 Special Judge 和捆绑测试。**\n\n你需要保证 $l = r = -1$ 或 $1 \\leq l \\leq r \\leq 10^{18}$ 且 $r - l \\leq 10^{15}$，否则 SPJ 会将你的答案判为 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SvR-1」Hack Function!", "background": "**Problem Number:** $\\textit{63}$\n\n小 C 坐在 J-PSC2077 的赛场（题目可于下方「**题目附件**」处下载）上，他早已年逾七旬，但作为 Z 队选手还是成功参赛。", "description": "此时的 J-PSC 终于改成了 CF 赛制，小 C 迅速地 AK 了 Day 1，他发现 T2 function 比较好 Hack，题目的人话翻译如下：\n\n> 对于一个数 $A$，定义函数 $f(A)$ 如下：\n> \n> 1. 先把 $A$ 变成 $k$ 进制数 $B$。\n> 2. 将 $A$ 替换为 $B$ 各位之和。\n> 3. 返回执行第 1 步，直到 $B$ 是一位数为止。\n> 4. 记 $x$ 表示 $A$ 此时的值（十进制）。\n> 此时 $f(A) = x$，$f(A)$ 称作 $A$ 关于 $k$ 的**位和函数**。\n>\n> 给定 $k, l, r, p$，求出 $\\sum_{i = l}^r f(i^i) \\bmod p$ 的值。\n>\n> **特别地，当 $\\sum_{i = l}^r f(i^i) = p$ 时，输出 $\\texttt{perfect}$。**\n\n小 C 迅速秒了该题，当他翻看别人的代码时，发现他们用的全是暴力枚举。（因为机子跑得飞快）\n\n好不容易看到一个人，他的代码里竟然没有一个  $\\texttt{perfect}$！但由于数据过弱，竟然让他 pp 了。\n\n小 C 突然脑子一热，忘记了怎么构造 Hack 数据，所以他通过 Luogu 6.0 求助于你。\n\n小 C 会告诉你 $k, p$ 的值，你需要构造一组 $l, r$，**使答案输出为 $\\texttt{perfect}$**。\n\n**若无法构造，输出两个 $\\texttt{-1}$。**", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $k,p$，含义如题所述。", "outputFormat": "共 $T$ 行，对于每组数据，输出你构造的 $l,r$ 的值。\n\n若有多组解，输出任意一组。", "hint": "#### 样例 1 说明\n\n- 对于数据 $1$，在 $k = 10$ 下，有 $f(2^2) = f(4) = 4$，$f(3^3) = f(27) = 9$，显然 $l = 2, r = 3$ 时原题应该输出 $\\texttt{perfect}$。\n- 对于数据 $2$，在 $k = 10$ 下，发现不可能满足要求。\n- 对于数据 $3$，在 $k = 2$ 下，显然有 $f(1^1) = 1$，但该样例仅用于理解，根据数据规模与约定，我们保证 $k \\geq 10$。\n\n#### 数据规模与约定\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\textbf{说明} & \\textbf{时限} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & \\text{无解} & 1\\text{ s} & 3 \\\\\\hline\n\\textsf{2} & \\text{有解且\\textbf{\\textsf{存在}}一组解使 }1\\le l\\le r\\le 10^5 & 1\\text{ s} & 16 \\\\\\hline\n\\textsf{3} & 1\\le p\\le 10^7 & 1\\text{ s} & 34 \\\\\\hline\n\\textsf{4} & \\text{无特殊限制} & 1.5\\text{ s} & 47 \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$10 \\leq k \\leq 10^3$，$1 \\leq p \\leq 10^8$，$1 \\leq T \\leq 10$。\n\n保证时限在 std 用时的 $4$ 倍以上。\n\n#### 评测说明\n\n**本题开启 Special Judge 和捆绑测试。**\n\n你需要保证 $l = r = -1$ 或 $1 \\leq l \\leq r \\leq 10^{18}$ 且 $r - l \\leq 10^{15}$，否则 SPJ 会将你的答案判为 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P8413", "type": "P", "difficulty": 5, "samples": [["2 3 2\n2 0\n2 3", "3\n2"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "树状数组", "2022", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SvR-1」Five of Pentacles", "background": "UPD on 2023.2.5 by 出题人： 原题强制在线方式有问题，会使得一些依赖强制在线的方式通过，这并不是正解~~但是不想改了~~。", "description": "**请仔细阅读数据范围和时间限制。**\n\n有一个长度为 $m$ 的数轴，一开始，处于 $1$ 时刻的**开始**，小 Z 处于 $1$ 号点，此时数轴上每个点都有一个障碍。\n\n每个时刻，若小 Z 处于 $i$ 号点，小 Z 可以指定一个 $d \\geq 0$，然后移动到 $i + d$ 号点，并且会越过 $[i, i + d]$ 的每一个障碍。\n\n当然，一切都是在变化的，一共会有 $k$ 次变化，第 $i$ 次会发生如下变化：\n\n- $t_i$ 时刻内 $x_i$ 号点上的障碍将会消失。\n- **请注意，此变化仅作用于 $t_i$ 时刻**\n\n保证变化是**随时间倒序发生的**，也就是说 $t_i$ **单调不升**。\n\n现在，对于每个 $1\\le i\\le k$，你都需要输出**在前 $i$ 个变化发生的条件下**、在保证第 $n$ 个时刻结束时小 Z 恰好处于 $m$ 号点的基础上，小 Z 越过的最小障碍数。", "inputFormat": "**本题强制在线，同时请注意在线形式。**\n\n第一行，三个整数 $n,m,k$。\n\n接下来 $k$ 行，其中第 $i$ 行有两个数字 $t_i, p$。其中 $p$ 用于生成 $x_i$，即：$x_i = \\min(x_{i - 1} + p \\oplus (lastans \\bmod 15) + 1, m)$，其中 $lastans$ 表示上次变化的答案。\n\n**特别地，第一次变化之前 $lastans = 0$，$x_0 = 0$，且当 $x_{i - 1} = m$ 时，将 $x_{i - 1}$ 视作 $0$（注意这不会真的改变 $x_{i - 1}$ 的值）。**", "outputFormat": "$k$ 行，每行一个整数，表示所求的值。", "hint": "#### 样例解释\n\n样例解密后：\n\n```plain\n2 3 2\n2 1\n2 2\n```\n\n- 第一次变化后：小 Z 第一秒选择 $d = 0$，跨过一个障碍。第二秒选择 $d = 2$，原本跨过了 $3$ 个障碍，但是第 $2$ 秒第一个点没有障碍，所以只跨过了 $2$ 个障碍。一共 $1 + 2 = 3$ 个障碍。\n- 第二次变化后：小 Z 第一秒选择 $d = 0$，跨过一个障碍。第二秒只有第三个位置有障碍，选择 $d = 2$，所以只跨过了一个障碍。一共 $1 + 1 = 2$ 个障碍。\n\n#### 数据规模与约定\n\n**本题自动开启捆绑测试和 O2 优化。**\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n,m,k\\le} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & 100 & 15 \\\\\\hline\n\\textsf{2} & 2\\times10^3 & 20 \\\\\\hline\n\\textsf{3} & 5\\times10^4 & 20 \\\\\\hline\n\\textsf{4} & 10^6 & 20 \\\\\\hline\n\\textsf{5} & \\text{无特殊限制} & 25 \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据（解密后），$1 \\leq n, m, k \\leq 2 \\times 10^6$，$1 \\leq t_i \\leq n$，$0 \\leq p \\leq 15$，$t_i$ **单调不升**，若 $t_i$ 相同，按 $x_i$ **升序**，且 $\\forall 1 \\leq i < j \\leq k$，$(t_i, x_i)$ 和 $(t_j, x_j)$ 不同。\n\n本题提供读入优化方式。\n\n使用 `read(x);` 读入一个任意的整型 `x` 等价于 `scanf(\"%d\", &x);`其中可以将 `%d` 自动识别为对应类型。\n\n```cpp\n#define getchar()(p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[1<<21],*p1=buf,*p2=buf;\ntemplate <typename T>\ninline void read(T& r) {\n\tr=0;bool w=0; char ch=getchar();\n\twhile(ch<'0'||ch>'9') w=ch=='-'?1:0,ch=getchar();\n\twhile(ch>='0'&&ch<='9') r=r*10+(ch^48), ch=getchar();\n\tr=w?-r:r;\n}\n```\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SvR-1」Five of Pentacles", "background": "UPD on 2023.2.5 by 出题人： 原题强制在线方式有问题，会使得一些依赖强制在线的方式通过，这并不是正解~~但是不想改了~~。", "description": "**请仔细阅读数据范围和时间限制。**\n\n有一个长度为 $m$ 的数轴，一开始，处于 $1$ 时刻的**开始**，小 Z 处于 $1$ 号点，此时数轴上每个点都有一个障碍。\n\n每个时刻，若小 Z 处于 $i$ 号点，小 Z 可以指定一个 $d \\geq 0$，然后移动到 $i + d$ 号点，并且会越过 $[i, i + d]$ 的每一个障碍。\n\n当然，一切都是在变化的，一共会有 $k$ 次变化，第 $i$ 次会发生如下变化：\n\n- $t_i$ 时刻内 $x_i$ 号点上的障碍将会消失。\n- **请注意，此变化仅作用于 $t_i$ 时刻**\n\n保证变化是**随时间倒序发生的**，也就是说 $t_i$ **单调不升**。\n\n现在，对于每个 $1\\le i\\le k$，你都需要输出**在前 $i$ 个变化发生的条件下**、在保证第 $n$ 个时刻结束时小 Z 恰好处于 $m$ 号点的基础上，小 Z 越过的最小障碍数。", "inputFormat": "**本题强制在线，同时请注意在线形式。**\n\n第一行，三个整数 $n,m,k$。\n\n接下来 $k$ 行，其中第 $i$ 行有两个数字 $t_i, p$。其中 $p$ 用于生成 $x_i$，即：$x_i = \\min(x_{i - 1} + p \\oplus (lastans \\bmod 15) + 1, m)$，其中 $lastans$ 表示上次变化的答案。\n\n**特别地，第一次变化之前 $lastans = 0$，$x_0 = 0$，且当 $x_{i - 1} = m$ 时，将 $x_{i - 1}$ 视作 $0$（注意这不会真的改变 $x_{i - 1}$ 的值）。**", "outputFormat": "$k$ 行，每行一个整数，表示所求的值。", "hint": "#### 样例解释\n\n样例解密后：\n\n```plain\n2 3 2\n2 1\n2 2\n```\n\n- 第一次变化后：小 Z 第一秒选择 $d = 0$，跨过一个障碍。第二秒选择 $d = 2$，原本跨过了 $3$ 个障碍，但是第 $2$ 秒第一个点没有障碍，所以只跨过了 $2$ 个障碍。一共 $1 + 2 = 3$ 个障碍。\n- 第二次变化后：小 Z 第一秒选择 $d = 0$，跨过一个障碍。第二秒只有第三个位置有障碍，选择 $d = 2$，所以只跨过了一个障碍。一共 $1 + 1 = 2$ 个障碍。\n\n#### 数据规模与约定\n\n**本题自动开启捆绑测试和 O2 优化。**\n\n$$\n\\newcommand{\\arraystretch}{1.5}\n\\begin{array}{c|c|c}\\hline\\hline\n\\textbf{Subtask} & \\bm{n,m,k\\le} & \\textbf{分值} \\\\\\hline\n\\textsf{1} & 100 & 15 \\\\\\hline\n\\textsf{2} & 2\\times10^3 & 20 \\\\\\hline\n\\textsf{3} & 5\\times10^4 & 20 \\\\\\hline\n\\textsf{4} & 10^6 & 20 \\\\\\hline\n\\textsf{5} & \\text{无特殊限制} & 25 \\\\\\hline\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据（解密后），$1 \\leq n, m, k \\leq 2 \\times 10^6$，$1 \\leq t_i \\leq n$，$0 \\leq p \\leq 15$，$t_i$ **单调不升**，若 $t_i$ 相同，按 $x_i$ **升序**，且 $\\forall 1 \\leq i < j \\leq k$，$(t_i, x_i)$ 和 $(t_j, x_j)$ 不同。\n\n本题提供读入优化方式。\n\n使用 `read(x);` 读入一个任意的整型 `x` 等价于 `scanf(\"%d\", &x);`其中可以将 `%d` 自动识别为对应类型。\n\n```cpp\n#define getchar()(p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[1<<21],*p1=buf,*p2=buf;\ntemplate <typename T>\ninline void read(T& r) {\n\tr=0;bool w=0; char ch=getchar();\n\twhile(ch<'0'||ch>'9') w=ch=='-'?1:0,ch=getchar();\n\twhile(ch>='0'&&ch<='9') r=r*10+(ch^48), ch=getchar();\n\tr=w?-r:r;\n}\n```\n", "locale": "zh-CN"}}}
{"pid": "P8414", "type": "P", "difficulty": 5, "samples": [["S4 S6 S11 S13 H3 H4 H5 H6 H8 H10 H12 C2 C4 C5 C6 C8 C9 C11 C13 D1 D4 D5 D6 D8 D10 D12\n", "Bob\n"], ["S1 S2 S3 S4 S5 S6 S7 S8 S9 S10 S11 S12 S13 D1 D2 D3 D4 D5 D6 D7 D8 D9 D10 D11 D12 D13\n", "Draw\n"], ["H1 H2 H3 H4 H5 H6 H7 H8 H9 H10 H11 H12 C13 D1 D2 D3 D4 D5 D6 D7 D8 D9 D10 D11 D12 D13\n", "Alice\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 简单的卡牌游戏", "background": "", "description": "Alice 和 Bob 最近玩了很多复杂的游戏，于是他们想玩点简单的游戏放松一下。\n\n他们想起来有一种非常简单的游戏叫“憋七”，这种游戏只需要一副扑克牌就能玩。传统的“憋七”玩法稍微有点复杂，所以 Alice 和 Bob 打算玩一种简化版的“憋七”。\n\n在游戏中用到的扑克牌包括黑桃（Spades）、红桃（Hearts）、梅花（Clubs）和方块（Diamonds）四种花色，每种花色的 1 点至 13 点各 1 张，共计 52 张牌。\n\n简化版的游戏规则如下：\n\n1. 首先将一副 52 张的扑克牌平均分成两份，每份各 26 张，Alice 和 Bob 各拿一张；\n\n2. 拥有黑桃 7 的一方将手中的黑桃 7 置于场上；\n\n3. 接着，从另外一方开始轮流操作，每一轮玩家需要从自己持有的牌中挑选一张置于场上，可以打出的牌需要满足以下两个条件之一：\n   \n   - 这张牌的点数为 7；\n   \n   - 当前场上的牌中，有一张牌与将要打出的牌花色相同，点数恰好差 1。\n\n4. 如果当前进行操作的玩家不能按照规则打出一张牌，则判该玩家负，另一位玩家胜；否则，如果双方都打出了手上的所有牌，则判平局。\n\n由于该游戏中不同花色的接龙是独立的，游戏时玩家常常将不同花色的 7 对成一竖排列，并在 7 的两侧接龙，将同花色的牌排成一行。\n\n已知 Alice 和 Bob 都足够聪明。现在给出 Alice 和 Bob 的初始手牌，请计算当二人都按最优策略出牌时，游戏的结果。", "inputFormat": "由于可以从一个人的手牌推断出另一个人的手牌，因此输入仅包含 Alice 的所有手牌。\n\n输入仅一行，包括 26 个用空格隔开的字符串，每个字符串表示 Alice 手上的一张牌。\n\n每张牌的输入格式为 花色 + 点数。其中，花色由一个字符表示，`S` 表示黑桃，`H` 表示红桃，`C` 表示梅花，`D` 表示方块；点数由对应的一位或两位的数字表示，数字最小为 `1`，最大为 `13`，均不含前导 0。例如，黑桃 7 对应字符串 `S7`。\n", "outputFormat": "输出仅一行，包括一个字符串，表示游戏的结果。如果 Alice 能赢得这局游戏则输出 `Alice`；如果 `Bob` 能赢得这局游戏则输出 `Bob`；如果平局则输出 `Draw`。", "hint": "对于 $100\\%$ 的数据，保证输入的牌符合输入格式中描述的格式，且输入的 26 张牌各不相同。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 简单的卡牌游戏", "background": "", "description": "Alice 和 Bob 最近玩了很多复杂的游戏，于是他们想玩点简单的游戏放松一下。\n\n他们想起来有一种非常简单的游戏叫“憋七”，这种游戏只需要一副扑克牌就能玩。传统的“憋七”玩法稍微有点复杂，所以 Alice 和 Bob 打算玩一种简化版的“憋七”。\n\n在游戏中用到的扑克牌包括黑桃（Spades）、红桃（Hearts）、梅花（Clubs）和方块（Diamonds）四种花色，每种花色的 1 点至 13 点各 1 张，共计 52 张牌。\n\n简化版的游戏规则如下：\n\n1. 首先将一副 52 张的扑克牌平均分成两份，每份各 26 张，Alice 和 Bob 各拿一张；\n\n2. 拥有黑桃 7 的一方将手中的黑桃 7 置于场上；\n\n3. 接着，从另外一方开始轮流操作，每一轮玩家需要从自己持有的牌中挑选一张置于场上，可以打出的牌需要满足以下两个条件之一：\n   \n   - 这张牌的点数为 7；\n   \n   - 当前场上的牌中，有一张牌与将要打出的牌花色相同，点数恰好差 1。\n\n4. 如果当前进行操作的玩家不能按照规则打出一张牌，则判该玩家负，另一位玩家胜；否则，如果双方都打出了手上的所有牌，则判平局。\n\n由于该游戏中不同花色的接龙是独立的，游戏时玩家常常将不同花色的 7 对成一竖排列，并在 7 的两侧接龙，将同花色的牌排成一行。\n\n已知 Alice 和 Bob 都足够聪明。现在给出 Alice 和 Bob 的初始手牌，请计算当二人都按最优策略出牌时，游戏的结果。", "inputFormat": "由于可以从一个人的手牌推断出另一个人的手牌，因此输入仅包含 Alice 的所有手牌。\n\n输入仅一行，包括 26 个用空格隔开的字符串，每个字符串表示 Alice 手上的一张牌。\n\n每张牌的输入格式为 花色 + 点数。其中，花色由一个字符表示，`S` 表示黑桃，`H` 表示红桃，`C` 表示梅花，`D` 表示方块；点数由对应的一位或两位的数字表示，数字最小为 `1`，最大为 `13`，均不含前导 0。例如，黑桃 7 对应字符串 `S7`。\n", "outputFormat": "输出仅一行，包括一个字符串，表示游戏的结果。如果 Alice 能赢得这局游戏则输出 `Alice`；如果 `Bob` 能赢得这局游戏则输出 `Bob`；如果平局则输出 `Draw`。", "hint": "对于 $100\\%$ 的数据，保证输入的牌符合输入格式中描述的格式，且输入的 26 张牌各不相同。\n", "locale": "zh-CN"}}}
{"pid": "P8415", "type": "P", "difficulty": 7, "samples": [["8 10\n1 4 7 3 8 2 4 7\n5 4 8 7 1 6 3 2\n2 6 6 2\n2 8 8 7\n1 4 3\n2 6 8 3\n2 4 4 3\n2 4 4 3\n2 6 8 4\n2 5 6 2\n2 1 8 1\n2 1 1 6\n", "1\n1\n0\n1\n1\n3\n2\n1\n0\n"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] pmrmscxip", "background": "", "description": "给序列 $a_1,\\dots,a_n$ 和排列 $b_1,\\dots,b_n$，共有 $m$ 次操作：\n\n修改操作：给定 $x,y$，将 $a_x$ 改为 $y$；\n\n查询操作：给定 $l,r,x$，查区间 $[l,r]$ 内最长的子区间 $[l',r']$（即满足 $l\\le l'\\le r'\\le r$），使得对 $l'\\le i<r'$ 有 $a_{i+1}=b_{a_i}$，且存在 $l'\\le i\\le r'$ 使得 $a_i=x$。需要输出满足条件的 $r'-l'+1$ 的最大值，若不存在则输出 $0$。\n", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数依次表示 $b_1,\\dots,b_n$；\n\n接下来 $m$ 行，每行 $1,x,y$ 或 $2,l,r,x$ 表示进行一次修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，表示相应的答案。", "hint": "$1\\le n,m\\le 10^6$；\n\n$1\\le a_i\\le n$；\n\n$1\\le b_i\\le n$，$b_i$ 互不相同；\n\n对修改操作，满足 $1\\le x,y\\le n$；\n\n对查询操作，满足 $1\\le l\\le r\\le n$，$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] pmrmscxip", "background": "", "description": "给序列 $a_1,\\dots,a_n$ 和排列 $b_1,\\dots,b_n$，共有 $m$ 次操作：\n\n修改操作：给定 $x,y$，将 $a_x$ 改为 $y$；\n\n查询操作：给定 $l,r,x$，查区间 $[l,r]$ 内最长的子区间 $[l',r']$（即满足 $l\\le l'\\le r'\\le r$），使得对 $l'\\le i<r'$ 有 $a_{i+1}=b_{a_i}$，且存在 $l'\\le i\\le r'$ 使得 $a_i=x$。需要输出满足条件的 $r'-l'+1$ 的最大值，若不存在则输出 $0$。\n", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数依次表示 $b_1,\\dots,b_n$；\n\n接下来 $m$ 行，每行 $1,x,y$ 或 $2,l,r,x$ 表示进行一次修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，表示相应的答案。", "hint": "$1\\le n,m\\le 10^6$；\n\n$1\\le a_i\\le n$；\n\n$1\\le b_i\\le n$，$b_i$ 互不相同；\n\n对修改操作，满足 $1\\le x,y\\le n$；\n\n对查询操作，满足 $1\\le l\\le r\\le n$，$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8416", "type": "P", "difficulty": 7, "samples": [["2\n4 2\n3 1\n", "3\n1 1 1 2\n1 2 2 2\n1 1 1 2\n"], ["2\n2 1\n3 4\n", "3\n2 1 2 2\n1 1 1 2\n2 1 2 2\n"], ["2\n3 2\n1 4\n", "2\n1 1 1 1\n1 1 2 1\n"], ["2\n1 2\n3 4\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2022", "Special Judge", "O2优化", "构造", "THUPC"], "title": "[THUPC 2022 决赛] 拯救还是毁灭", "background": "", "description": "*有人说，它拯救了世界；也有人说，它毁灭了世界。*\n\n这个世界危在旦夕！秩序已然一片混乱。\n\n秩序可以抽象成一个 $n\\times n$ 的矩阵，矩阵中是一个 $1\\sim n^2$ 的排列。你想要拯救世界，于是请来了神，来帮忙把秩序恢复原状。然而神也不是万能的，它只能做到交换矩阵中同一行或者同一列中的两个数。而且，它并不知道要怎么交换才能复原，得听你的指导。\n\n幸好，你不一定需要在最少的交换次数之内完成复原。你只需要不比最糟糕的情况差就好。也就是说，如果你的交换次数为 $k$，且对于所有 $1\\sim n^2$ 的排列，最小交换次数的最大值为 $k_0$，你只需要满足 $k\\le k_0$。\n\n注：复原指的是将矩阵变为如下的一个矩阵：\n\n$\\begin{matrix} 1 & 2 & 3 & \\cdots & n \\\\ n+1 & n+2 & n+3 & \\cdots & 2n \\\\ 2n+1 & 2n+2 & 2n+3 & \\cdots & 3n\\\\ \\vdots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ (n-1)n+1 & (n-1)n+2 & (n-1)n+3 & \\cdots & n^2 \\end{matrix}$", "inputFormat": "接下来 $n$ 行，每行 $n$ 个正整数，表示这个 $n\\times n$ 的矩阵。保证 $1\\sim n^2$ 中的每个数恰好出现一次。", "outputFormat": "第一行一个非负整数 $k$，表示你的交换次数。\n\n接下来 $k$ 行，每行四个正整数 $x_1,y_1,x_2,y_2$，表示将第 $x_1$ 行 $y_1$ 列的数与第 $x_2$ 行 $y_2$ 列的数交换。\n\n你需要保证 $x_1=x_2$ 或 $y_1=y_2$。", "hint": "【样例 1 解释】\n\n可以证明这是交换次数最少的方案之一，显然它符合条件。\n\n【样例 2 解释】\n\n对于这个输入来说，这个样例输出的方案不是交换次数最少的方案，但是我们知道存在一个 $1\\sim n^2$ 的排列（即上一个样例）需要至少 $3$ 次的交换，所以这个方案也是可行的。\n\n【样例 3 解释】\n\n我们允许出现 $(x_1,y_1)=(x_2,y_2)$ 的情况。\n\n【样例 4 解释】\n\n注意 $k$ 可以等于 $0$。\n\n【数据范围与约定】\n\n保证 $1\\le n\\le 1000$。\n\n保证输入的矩阵中 $1\\sim n^2$ 恰好各出现一次。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 拯救还是毁灭", "background": "", "description": "*有人说，它拯救了世界；也有人说，它毁灭了世界。*\n\n这个世界危在旦夕！秩序已然一片混乱。\n\n秩序可以抽象成一个 $n\\times n$ 的矩阵，矩阵中是一个 $1\\sim n^2$ 的排列。你想要拯救世界，于是请来了神，来帮忙把秩序恢复原状。然而神也不是万能的，它只能做到交换矩阵中同一行或者同一列中的两个数。而且，它并不知道要怎么交换才能复原，得听你的指导。\n\n幸好，你不一定需要在最少的交换次数之内完成复原。你只需要不比最糟糕的情况差就好。也就是说，如果你的交换次数为 $k$，且对于所有 $1\\sim n^2$ 的排列，最小交换次数的最大值为 $k_0$，你只需要满足 $k\\le k_0$。\n\n注：复原指的是将矩阵变为如下的一个矩阵：\n\n$\\begin{matrix} 1 & 2 & 3 & \\cdots & n \\\\ n+1 & n+2 & n+3 & \\cdots & 2n \\\\ 2n+1 & 2n+2 & 2n+3 & \\cdots & 3n\\\\ \\vdots & \\vdots & \\vdots & \\ddots & \\vdots \\\\ (n-1)n+1 & (n-1)n+2 & (n-1)n+3 & \\cdots & n^2 \\end{matrix}$", "inputFormat": "接下来 $n$ 行，每行 $n$ 个正整数，表示这个 $n\\times n$ 的矩阵。保证 $1\\sim n^2$ 中的每个数恰好出现一次。", "outputFormat": "第一行一个非负整数 $k$，表示你的交换次数。\n\n接下来 $k$ 行，每行四个正整数 $x_1,y_1,x_2,y_2$，表示将第 $x_1$ 行 $y_1$ 列的数与第 $x_2$ 行 $y_2$ 列的数交换。\n\n你需要保证 $x_1=x_2$ 或 $y_1=y_2$。", "hint": "【样例 1 解释】\n\n可以证明这是交换次数最少的方案之一，显然它符合条件。\n\n【样例 2 解释】\n\n对于这个输入来说，这个样例输出的方案不是交换次数最少的方案，但是我们知道存在一个 $1\\sim n^2$ 的排列（即上一个样例）需要至少 $3$ 次的交换，所以这个方案也是可行的。\n\n【样例 3 解释】\n\n我们允许出现 $(x_1,y_1)=(x_2,y_2)$ 的情况。\n\n【样例 4 解释】\n\n注意 $k$ 可以等于 $0$。\n\n【数据范围与约定】\n\n保证 $1\\le n\\le 1000$。\n\n保证输入的矩阵中 $1\\sim n^2$ 恰好各出现一次。", "locale": "zh-CN"}}}
{"pid": "P8417", "type": "P", "difficulty": 7, "samples": [["2 2 2 2\n", "1040\n"], ["12 24 3 4\n", "718185656\n"], ["100 10000000 6 6\n", "146399052\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 高性能计算导论集群登录密码复杂性策略", "background": "高性能计算导论是 T 大学 C 系开设的一门专业选修课。这门课程讲述了高性能计算的基本概念和原理，常见并行编程模型及并行程序的基本编写思路，程序性能分析和优化的基本方法，以及计算机体系结构和程序性能的关系。为了让同学们能够实际体验并行程序的编写、性能分析和优化，课程为同学们提供了五台服务器组成的集群，每台服务器上都配置了 2 socket × 14 core 的处理器和 1 块 GPU。选课的同学可以在集群上进行基于消息传递的并行编程、基于共享内存模型的并行编程和 CUDA 编程。为了防止宝贵的计算资源被滥用（比如偷偷用服务器挖矿），课程在集群使用上有很多的规定，其中就包括要求选课同学使用高强度的集群登录密码。", "description": "为了确保选课同学使用了较强的集群登录密码，课程组在集群上配置了密码复杂性策略。所有选课的同学在学期初会收到随机生成的初始密码。在使用初始密码登录集群后，集群会要求同学输入新的密码，密码更改完毕后才能正常访问集群。在本题中，我们假设密码复杂性策略为：\n\n- 密码至少包含 $L$ 个字符，且至少包含一个数字和一个字母；\n\n- 密码不能包含**连续** $A$ 个**重复**字符，如 `2333` 包含了连续 3 个重复字符；\n\n- 密码不能包含**连续** $B$ 个字符组成的上升序列或下降序列，其中定义上升序列为 `0123456789`，`ABCDEFGHIJKLMNOPQRSTUVWXYZ` 和 `abcdefghijklmnopqrstuvwxyz` 三个字符串中某一个串的**连续**子串，下降序列为这三个字符串中某一个串的**连续**子串的反向串，例如： \n  \n  - `6789` 是长度为 4 的上升序列，`FED` 是长度为 3 的下降序列；\n  \n  - `90`、`AZ`、`az` 不是上升序列或下降序列；\n  \n  - `GPU` 不是上升序列，因为它不连续；\n  \n  - `Def` 不是上升序列，因为字母大小写不一致（但它包含长度为 2 的上升连续子序列 `ef`）；\n  \n  - `1112345678999` 不是上升序列，但它的子序列 `123456789` 是上升的。\n\n假设密码仅由数字及大小写字母构成。求在长度不超过 $R$ 的所有密码中，有多少个密码满足密码复杂性策略。", "inputFormat": "输入仅一行，包括四个正整数 $L, R, A, B$，含义如题目描述中所述。", "outputFormat": "输出一个非负整数，表示满足密码复杂性策略且长度不超过 $R$ 的密码数量对 $1,000,000,007$ 取模的结果。\n", "hint": "【样例 1 解释】\n\n因为密码必须至少包含一个数字和一个字母，所以满足要求的密码有 $2\\times 10 \\times (26\\times 2) = 1040$ 种。\n\n【数据范围与约定】\n\n\n保证 $1\\le L\\le R\\le 10^9$，$2\\le A\\le 6$，$2\\le B\\le 26$。\n\n【提示】\n\n如果你不想记住又长又复杂的密码，不想每次登录时手动输入密码，也可以配置公钥进行 SSH 登录。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 高性能计算导论集群登录密码复杂性策略", "background": "高性能计算导论是 T 大学 C 系开设的一门专业选修课。这门课程讲述了高性能计算的基本概念和原理，常见并行编程模型及并行程序的基本编写思路，程序性能分析和优化的基本方法，以及计算机体系结构和程序性能的关系。为了让同学们能够实际体验并行程序的编写、性能分析和优化，课程为同学们提供了五台服务器组成的集群，每台服务器上都配置了 2 socket × 14 core 的处理器和 1 块 GPU。选课的同学可以在集群上进行基于消息传递的并行编程、基于共享内存模型的并行编程和 CUDA 编程。为了防止宝贵的计算资源被滥用（比如偷偷用服务器挖矿），课程在集群使用上有很多的规定，其中就包括要求选课同学使用高强度的集群登录密码。", "description": "为了确保选课同学使用了较强的集群登录密码，课程组在集群上配置了密码复杂性策略。所有选课的同学在学期初会收到随机生成的初始密码。在使用初始密码登录集群后，集群会要求同学输入新的密码，密码更改完毕后才能正常访问集群。在本题中，我们假设密码复杂性策略为：\n\n- 密码至少包含 $L$ 个字符，且至少包含一个数字和一个字母；\n\n- 密码不能包含**连续** $A$ 个**重复**字符，如 `2333` 包含了连续 3 个重复字符；\n\n- 密码不能包含**连续** $B$ 个字符组成的上升序列或下降序列，其中定义上升序列为 `0123456789`，`ABCDEFGHIJKLMNOPQRSTUVWXYZ` 和 `abcdefghijklmnopqrstuvwxyz` 三个字符串中某一个串的**连续**子串，下降序列为这三个字符串中某一个串的**连续**子串的反向串，例如： \n  \n  - `6789` 是长度为 4 的上升序列，`FED` 是长度为 3 的下降序列；\n  \n  - `90`、`AZ`、`az` 不是上升序列或下降序列；\n  \n  - `GPU` 不是上升序列，因为它不连续；\n  \n  - `Def` 不是上升序列，因为字母大小写不一致（但它包含长度为 2 的上升连续子序列 `ef`）；\n  \n  - `1112345678999` 不是上升序列，但它的子序列 `123456789` 是上升的。\n\n假设密码仅由数字及大小写字母构成。求在长度不超过 $R$ 的所有密码中，有多少个密码满足密码复杂性策略。", "inputFormat": "输入仅一行，包括四个正整数 $L, R, A, B$，含义如题目描述中所述。", "outputFormat": "输出一个非负整数，表示满足密码复杂性策略且长度不超过 $R$ 的密码数量对 $1,000,000,007$ 取模的结果。\n", "hint": "【样例 1 解释】\n\n因为密码必须至少包含一个数字和一个字母，所以满足要求的密码有 $2\\times 10 \\times (26\\times 2) = 1040$ 种。\n\n【数据范围与约定】\n\n\n保证 $1\\le L\\le R\\le 10^9$，$2\\le A\\le 6$，$2\\le B\\le 26$。\n\n【提示】\n\n如果你不想记住又长又复杂的密码，不想每次登录时手动输入密码，也可以配置公钥进行 SSH 登录。", "locale": "zh-CN"}}}
{"pid": "P8418", "type": "P", "difficulty": 5, "samples": [["5 5 1\n1 11 21 1211\n1 2 4\n1 3 11\n2 5 9\n3 4 12\n4 5 13\n", "6 1\n"], ["9 16 1\n1 10 100 1000 10000 100000 1000000 10000000\n1 2 2\n1 3 3\n2 3 5\n2 5 7\n3 4 11\n3 5 13\n3 6 17\n3 7 19\n4 7 23\n5 6 29\n5 8 31\n6 7 37\n6 8 41\n6 9 43\n7 9 47\n8 9 53\n", "221 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 倍增路径", "background": "", "description": "对于任意一张 DAG $G=(V,E)$ 和图中的一个起始点 $s_1\\in V$，倍增小游戏的规则为：\n\n- 在第 $i$ 轮操作（$i=1,2,\\cdots$）中，玩家选取一条起点为 $s_i$ 的**非空**路径 $p_i$，使得所有属于这条路径的边的边权和恰为 $(i+1)$ 的倍数。如果无法选择出满足倍数要求的路径，则称游戏失败，玩家将不会获得任何分数；否则，本轮操作成功，并记 $p_i$ 的终点为 $s_{i+1}$。\n\n- 在第 $i$ 轮操作成功后，玩家可以选择结束游戏或者继续第 $(i+1)$ 轮操作。如果选择结束游戏，则称选择出的 $i$ 条路径 $p_1, \\cdots, p_i$ 为倍增路径，并计算得分。\n\n如果游戏没有失败，则在结束游戏时，对于选出的倍增路径 $p_1, \\cdots, p_k$，定义游戏的分数为 $\\sum_{i=1}^k a_i \\left|p_i\\right|/k$，其中 $|p_i|$ 表示路径 $p_i$ 包含的边数，$a_i$ 是输入给定的权值。显然，无论如何选取路径，最多也只能选出 $(n-1)$ 条路径，因此输入中只给出了 $a_1, \\cdots, a_{n-1}$。\n\n为了设置每张图的通关要求，请对给出的 DAG 和起始点，计算该游戏的最大分数。", "inputFormat": "输入的第一行包含三个由空格隔开的正整数 $n$，$m$，$s_1$，表示给出的图中点的数量、边的数量及起始点的编号。保证 $2\\le n \\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1\\le n$。\n\n输入的第二行包含 $(n-1)$ 个由空格隔开的正整数 $a_1, \\cdots, a_{n-1}$，表示计算分数时的权重。保证 $1\\le a_1\\le a_2\\le\\cdots\\le a_{n-1}\\le 10^9$。\n\n接下来 $m$ 行，每行输入三个由空格隔开的正整数 $u_i, v_i, w_i$，描述图中一条由 $u_i$ 连向 $v_i$，权值为 $w_i$ 的单向边。保证 $1\\le u_i, v_i\\le n$，$u_i\\ne v_i$，$1\\le w_i\\le 10^9$，图是连通的且没有重边。", "outputFormat": "输出仅一行，包括两个整数，由空格隔开。\n\n如果可以选出至少一条路径，则存在一种最优的选取方案使得分数最大，记这个最优分数的最简分数表示为 $p/q$（当最优分数恰为整数时认为 $q=1$），则输出 $p$，$q$。否则，如果无论如何选取都无法选取出至少一条路径，则输出 `-1 -1`。", "hint": "【样例 1 解释】\n\n选出的倍增路径为 $p_1 = ((1, 2)), p_2 = ((2, 5))$。\n\n【数据范围与约定】\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1, u_i, v_i\\le n$，$1\\le a_1 \\le \\cdots\\le a_{n-1}\\le 10^9$，$1\\le w_i\\le 10^9$，输入的图是连通的且没有重边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 倍增路径", "background": "", "description": "对于任意一张 DAG $G=(V,E)$ 和图中的一个起始点 $s_1\\in V$，倍增小游戏的规则为：\n\n- 在第 $i$ 轮操作（$i=1,2,\\cdots$）中，玩家选取一条起点为 $s_i$ 的**非空**路径 $p_i$，使得所有属于这条路径的边的边权和恰为 $(i+1)$ 的倍数。如果无法选择出满足倍数要求的路径，则称游戏失败，玩家将不会获得任何分数；否则，本轮操作成功，并记 $p_i$ 的终点为 $s_{i+1}$。\n\n- 在第 $i$ 轮操作成功后，玩家可以选择结束游戏或者继续第 $(i+1)$ 轮操作。如果选择结束游戏，则称选择出的 $i$ 条路径 $p_1, \\cdots, p_i$ 为倍增路径，并计算得分。\n\n如果游戏没有失败，则在结束游戏时，对于选出的倍增路径 $p_1, \\cdots, p_k$，定义游戏的分数为 $\\sum_{i=1}^k a_i \\left|p_i\\right|/k$，其中 $|p_i|$ 表示路径 $p_i$ 包含的边数，$a_i$ 是输入给定的权值。显然，无论如何选取路径，最多也只能选出 $(n-1)$ 条路径，因此输入中只给出了 $a_1, \\cdots, a_{n-1}$。\n\n为了设置每张图的通关要求，请对给出的 DAG 和起始点，计算该游戏的最大分数。", "inputFormat": "输入的第一行包含三个由空格隔开的正整数 $n$，$m$，$s_1$，表示给出的图中点的数量、边的数量及起始点的编号。保证 $2\\le n \\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1\\le n$。\n\n输入的第二行包含 $(n-1)$ 个由空格隔开的正整数 $a_1, \\cdots, a_{n-1}$，表示计算分数时的权重。保证 $1\\le a_1\\le a_2\\le\\cdots\\le a_{n-1}\\le 10^9$。\n\n接下来 $m$ 行，每行输入三个由空格隔开的正整数 $u_i, v_i, w_i$，描述图中一条由 $u_i$ 连向 $v_i$，权值为 $w_i$ 的单向边。保证 $1\\le u_i, v_i\\le n$，$u_i\\ne v_i$，$1\\le w_i\\le 10^9$，图是连通的且没有重边。", "outputFormat": "输出仅一行，包括两个整数，由空格隔开。\n\n如果可以选出至少一条路径，则存在一种最优的选取方案使得分数最大，记这个最优分数的最简分数表示为 $p/q$（当最优分数恰为整数时认为 $q=1$），则输出 $p$，$q$。否则，如果无论如何选取都无法选取出至少一条路径，则输出 `-1 -1`。", "hint": "【样例 1 解释】\n\n选出的倍增路径为 $p_1 = ((1, 2)), p_2 = ((2, 5))$。\n\n【数据范围与约定】\n\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 100$，$1\\le m\\le \\frac{n(n-1)}{2}$，$1\\le s_1, u_i, v_i\\le n$，$1\\le a_1 \\le \\cdots\\le a_{n-1}\\le 10^9$，$1\\le w_i\\le 10^9$，输入的图是连通的且没有重边。", "locale": "zh-CN"}}}
{"pid": "P8419", "type": "P", "difficulty": 7, "samples": [["8 10\n5 4 8 7 1 6 3 2\n1 2 5\n2 8\n1 2 8\n1 7 8\n2 4\n2 1\n2 6\n2 4\n1 8 8\n2 4\n", "0\n4\n0\n3\n4\n4\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] riapq", "background": null, "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] riapq", "background": null, "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8420", "type": "P", "difficulty": 3, "samples": [["4 1 4\n0000\n1000\n1100\n1010\n1000\n", "5\n"], ["2 4 4\n0000\n0000\n0000\n1000\n0100\n0010", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 匹配", "background": null, "description": "定义“匹配项”是一个长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。现在有 $N$ 个这样的“匹配项”，我们希望设计一个“方案”，“方案”同样是长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。定义每个“匹配项”的错误值为“方案”与“匹配项”不同位的个数，比如“匹配项”是 $\\texttt{101}$，“方案”是 $\\texttt{000}$，那么两者的第一位和第三位是不同的，所以该“方案”对于该“匹配项”的错误值为 $2$。我们希望找到一个“方案”，使得这 $N$ 个“匹配项”的错误值之和最小。此外，有 $M$ 个互不相同的禁用“方案”，我们要求找到的“方案”不能是禁用“方案”之一。", "inputFormat": "输入的第一行包含三个正整数 $N,M,L$。\n\n接下来输入 $N$ 行,每行为一个长度为 $L$ 的字符串，之后 $M$ 行，每行为一个长度为 $L$ 的字符串。", "outputFormat": "输出一个整数，表示满足要求的“方案”得到的这 $N$ 个“匹配项”的最小错误值之和。", "hint": "保证 $1 \\le N \\le 1000$，$1 \\le M \\le \\min(1000,2^L-1) $，$ 1 \\le L \\le 1000 $。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 匹配", "background": null, "description": "定义“匹配项”是一个长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。现在有 $N$ 个这样的“匹配项”，我们希望设计一个“方案”，“方案”同样是长度为 $L$ 的字符串，每一位要么是 $\\texttt{0}$，要么是 $\\texttt{1}$。定义每个“匹配项”的错误值为“方案”与“匹配项”不同位的个数，比如“匹配项”是 $\\texttt{101}$，“方案”是 $\\texttt{000}$，那么两者的第一位和第三位是不同的，所以该“方案”对于该“匹配项”的错误值为 $2$。我们希望找到一个“方案”，使得这 $N$ 个“匹配项”的错误值之和最小。此外，有 $M$ 个互不相同的禁用“方案”，我们要求找到的“方案”不能是禁用“方案”之一。", "inputFormat": "输入的第一行包含三个正整数 $N,M,L$。\n\n接下来输入 $N$ 行,每行为一个长度为 $L$ 的字符串，之后 $M$ 行，每行为一个长度为 $L$ 的字符串。", "outputFormat": "输出一个整数，表示满足要求的“方案”得到的这 $N$ 个“匹配项”的最小错误值之和。", "hint": "保证 $1 \\le N \\le 1000$，$1 \\le M \\le \\min(1000,2^L-1) $，$ 1 \\le L \\le 1000 $。", "locale": "zh-CN"}}}
{"pid": "P8421", "type": "P", "difficulty": 7, "samples": [["5 3\n3 3 1 1 1\n2 1 3 2 2\n4 5 3 4 4\n1 2\n2 5\n4 5\n", "48\n63\n24\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] rsraogps", "background": "", "description": "给序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，$c_1,\\dots,c_n$，\n\n定义区间 $[l,r]$ 的价值为 $a_l,\\dots,a_r$ 按位与，$b_l,\\dots,b_r$ 按位或，$c_l,\\dots,c_r$ 的最大公因数，这三者的乘积；\n\n$m$ 次查询，每次查询给出区间 $[l,r]$，查询满足 $l\\le l'\\le r'\\le r$ 的 $[l',r']$ 的价值之和。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $b_1,\\dots,b_n$；\n\n第四行 $n$ 个整数 $c_1,\\dots,c_n$；\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。\n", "outputFormat": "共 $m$ 行，每行一个整数，表示对应的答案，答案对 $2^{32}$ 取模后输出。\n", "hint": "\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 5\\times 10^6$\n\n$1\\le a_i,b_i,c_i\\le n$\n\n$1\\le l\\le r\\le n$\n\n建议使用高效的输入输出方式。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] rsraogps", "background": "", "description": "给序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，$c_1,\\dots,c_n$，\n\n定义区间 $[l,r]$ 的价值为 $a_l,\\dots,a_r$ 按位与，$b_l,\\dots,b_r$ 按位或，$c_l,\\dots,c_r$ 的最大公因数，这三者的乘积；\n\n$m$ 次查询，每次查询给出区间 $[l,r]$，查询满足 $l\\le l'\\le r'\\le r$ 的 $[l',r']$ 的价值之和。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $b_1,\\dots,b_n$；\n\n第四行 $n$ 个整数 $c_1,\\dots,c_n$；\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。\n", "outputFormat": "共 $m$ 行，每行一个整数，表示对应的答案，答案对 $2^{32}$ 取模后输出。\n", "hint": "\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 5\\times 10^6$\n\n$1\\le a_i,b_i,c_i\\le n$\n\n$1\\le l\\le r\\le n$\n\n建议使用高效的输入输出方式。\n", "locale": "zh-CN"}}}
{"pid": "P8422", "type": "P", "difficulty": 6, "samples": [["8 8 5 5\n1 1 5 1 5 4 5 3\n2 1 2 2 5 4 3 2\n1 4 1 4 2 1 5 4\n2 1 5 5 2 1 4 4\n2 3 5 2 3 4 2 2\n4 2 4 3 3 2 4 5\n1 3 4 3 5 2 4 3\n3 4 2 5 2 1 1 2\n0 0 0 0 0 0 0 0\n2 0 0 0 0 0 0 0\n0 0 0 0 5 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 6 0 0 3 1\n0 0 0 0 3 0 0 0\n0 0 0 0 0 0 1 4\n3 2 4 2\n5 4 5 5\n7 2 7 3\n8 5 8 6\n6 7 6 8\n", "11692\n"], ["8 8 5 8\n1 1 5 1 5 4 5 3\n2 1 2 2 5 4 3 2\n1 4 1 4 2 1 5 4\n2 1 5 5 2 1 4 4\n2 3 5 2 3 4 2 2\n4 2 4 3 3 2 4 5\n1 3 4 3 5 2 4 3\n3 4 2 5 2 1 1 2\n0 0 0 0 0 0 0 0\n2 0 0 0 0 0 0 0\n0 0 0 0 5 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 6 0 0 3 1\n0 0 0 0 3 0 0 0\n0 0 0 0 0 0 0 0\n1 1 2 2\n3 2 4 2\n3 2 3 3\n4 2 4 3\n5 4 5 5\n7 2 7 3\n8 5 8 6\n6 7 6 8\n", "684\n"], ["5 5 2 1\n1 1 2 1 1\n1 1 2 1 1\n2 2 1 2 2\n1 1 2 1 1\n1 1 2 1 1\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n3 3 4 3\n", "3023\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 德州消消乐", "background": "众所周知小 c 是开心消消乐的高手，而小 z 玩这种稍微需要动一点脑子的游戏都很不在行。正值五一假期，小 c 闲得无聊就打算来教小 z。\n\n经过五天五夜不间断教学，小 z 终于领悟了一点门道（小 z 内心 os：但凡能拿出一点热情来学概率论……），然而他俩都忽略了这玩意是会玩上瘾的，更关键的是小 z 来自山东，于是他打算融入一点家乡特色……\n\n小 z：”……众所周知德州在山东，那我们就叫它‘德州消消乐’吧！“\n\n小 c 连忙制止道你快算了吧，上次的大杂糅棋局你忘了？再说此德州非彼德州啊喂，这次你要搞就自己搞吧别拉我下水了。\n\n话还没说完，小 z 转手把规则甩给了小 c。\n\n小 c：“真香”。", "description": "给定大小为 $n \\times m$ 的棋盘，记左上角坐标为 $(1,1)$ ，右下角坐标为 $(n,m)$ 。有不同颜色的棋子共 $k$ 种，颜色编号为 $1\\sim k$ 。最初每个格子都有一个棋子。\n\n共有 $q$ 次操作，每次操作形如交换相邻（在上、下、左、右方向）的两个棋子。在此之后，在同一行或同一列的连续至少 $3$ 个相同颜色的棋子会被消除。\n\n消除后，所有棋子会遵循重力下落，这一列的最上方变成空位。所有棋子下落完成后，如果又产生了能消除的情况，则会触发连锁反应继续消除，直到无法消除为止。称一次消除+一次下落为“一轮消除”，由此可以定义一次操作触发的消除“轮数”。\n\n其中，有些棋子具有特殊属性，被消除时会触发特殊效果，一共有以下 $6$ 类：\n\n- 1、消除时将同一行的全部棋子消除；\n- 2、消除时将同一列的全部棋子消除；\n- 3、消除时将同一行和同一列的全部棋子消除；\n- 4、消除时将以之为中心 $3 \\times 3$ 的正方形范围内的棋子全部消除；\n- 5、消除时将以之为中心 $5 \\times 5$ 的正方形范围内的棋子全部消除；\n- 6、消除时将与之颜色相同的棋子全部消除； \n\n触发一个棋子的特殊效果时可能连锁触发其他棋子的特殊效果，但是这些都是在同一轮消除内触发的（即连锁反应触发的过程中不会引起下落）。\n\n游戏中，每次操作都要求必须有效，即操作的两个位置相邻且均不为空位，且在操作之后能进行棋子的消除。若某次操作并非有效，则直接跳过这一次操作。所有 $q$ 次操作结束后游戏结束。\n\n定义一次有效操作的“主颜色”为通过交换而直接被消除的颜色（即不包括特殊效果触发和下落引起的消除），容易发现一次有效操作的主颜色至少有 $1$ 种，最多有 $2$ 种。\n\n游戏中，玩家要通过操作来获取尽可能多的得分。得分的规则有如下 $5$ 种：消除奖分+连锁奖分+组合奖分+牌型奖分+终局奖分。\n\n- 消除奖分：每次有效操作中，第 $i$ 轮消除的消除奖分为这一轮中所有被消除的棋子的颜色编号之和的 $i$ 倍。\n- 连锁奖分：设某次有效操作的总消除轮数为 $x$ ，则有连锁奖分 $80(x-1)^2$ 。\n- 组合奖分：某一轮消除中，在仅考虑由“同一行或同一列至少连续 $3$ 个相同颜色”引发的消除的情况下（即不考虑所有特殊效果引起的消除），设某个被消除的同色四连通块大小为 $x$ ，则有组合奖分 $50(x-3)^2$ 。如： $4$ 个同色棋子组成四连的组合奖分为 $50$ ，$5$ 个同色棋子组成五连、十字或T字等形状的组合奖分为 $200$ ，$2\\times3$ 的方形同色棋子的组合奖分为 $450$ 。\n - 牌型奖分：每 $5$ 次有效操作计算一次牌型奖分，取之前 $5$ 次有效操作的主颜色（若某次操作有多个主颜色，取能按照以下规则计算出的最大奖分的主颜色），按照如下牌型规则计算奖分：\n   \n   - 高牌： $5$ 种颜色全部不同，奖 $50$ 分 + 所有牌中最大的颜色编号；\n   - 一对： $2$ 个相同颜色 + $3$ 个不同颜色，奖 $100$ 分 + 一对的颜色编号 $\\times 2$ ；\n   \n   - 两对： $2$ 对相同颜色 + $1$ 个其他颜色，奖 $200$ 分 + 两对中较大的颜色编号 $\\times 2$ + 两对中较小的颜色编号；\n   - 三条： $3$ 个相同颜色 + $2$ 个不同颜色，奖 $300$ 分 + 三条的颜色编号 $\\times 3$ ；\n   - 葫芦： $3$ 个相同颜色 + 另外 $2$ 个相同颜色，奖 $500$ 分 + 三个相同的颜色编号 $\\times 3$ + 两个相同的颜色编号；\n   - 四条： $4$ 个相同颜色 + $1$ 个其他颜色，奖 $750$ 分 + 四条的颜色编号 $\\times 5$ ；\n   - 五条： $5$ 个颜色全部相同，奖 $1000$ 分 + 五条的颜色编号 $\\times 10$ 。\n - 终局奖分：若所有 $q$ 次操作均有效，在终局时额外获得 $1000$ 分终局奖分；若游戏结束时棋盘被全部清空，额外获得 $10000$ 分的终局奖分。\n\n给定一局游戏的初始局面和玩家的每一次操作，你需要计算玩家的总得分。", "inputFormat": "第 $1$ 行： $4$ 个正整数 $n,m,k,q$ 。\n\n接下来 $n$ 行，每行 $m$ 个正整数 $a_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的颜色。\n\n接下来 $n$ 行，每行 $m$ 个非负整数 $b_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的特殊效果，含义如题面所述。特别地， $b_{i,j}=0$ 表示没有特殊效果。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $x_{i,1},y_{i,1},x_{i,2},y_{i,2}$ ，表示交换坐标 $(x_{i,1},y_{i,1})$ 和 $(x_{i,2},y_{i,2})$ 位置的棋子。", "outputFormat": "输出一行，一个非负整数表示终局时的总得分。", "hint": "【样例 1 解释】\n\n每次操作后，前 $3$ 类奖分的和分别为：$315,\\ 417,\\ 429,\\ 435,\\ 482$ 。第 $5$ 次操作后计算牌型奖分，最优牌型为 $(1\\ 2\\ 4\\ 2\\ 4)$ ，奖分为 $200 + 4\\times 2 + 2 \\times 1 = 210$ 。终局时两种终局奖分均可获得，故总分为 $11692$ 。\n\n【样例 2 解释】\n\n与上一组样例相比，增加了 $3$ 次无效操作，且最后不能实现全消，因此得不到终局奖分。\n\n【数据范围与约定】\n\n\n$n,m\\leq 50,\\ k \\leq 100,\\ q \\leq 1000,\\ a_{i,j} \\leq k,\\ b_{i,j} \\leq 6,\\ x_{i,1},x_{i,2} \\leq n,\\ y_{i,1},y_{i,2} \\leq m$ 。\n\n保证初始局面没有可以直接消除的情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 德州消消乐", "background": "众所周知小 c 是开心消消乐的高手，而小 z 玩这种稍微需要动一点脑子的游戏都很不在行。正值五一假期，小 c 闲得无聊就打算来教小 z。\n\n经过五天五夜不间断教学，小 z 终于领悟了一点门道（小 z 内心 os：但凡能拿出一点热情来学概率论……），然而他俩都忽略了这玩意是会玩上瘾的，更关键的是小 z 来自山东，于是他打算融入一点家乡特色……\n\n小 z：”……众所周知德州在山东，那我们就叫它‘德州消消乐’吧！“\n\n小 c 连忙制止道你快算了吧，上次的大杂糅棋局你忘了？再说此德州非彼德州啊喂，这次你要搞就自己搞吧别拉我下水了。\n\n话还没说完，小 z 转手把规则甩给了小 c。\n\n小 c：“真香”。", "description": "给定大小为 $n \\times m$ 的棋盘，记左上角坐标为 $(1,1)$ ，右下角坐标为 $(n,m)$ 。有不同颜色的棋子共 $k$ 种，颜色编号为 $1\\sim k$ 。最初每个格子都有一个棋子。\n\n共有 $q$ 次操作，每次操作形如交换相邻（在上、下、左、右方向）的两个棋子。在此之后，在同一行或同一列的连续至少 $3$ 个相同颜色的棋子会被消除。\n\n消除后，所有棋子会遵循重力下落，这一列的最上方变成空位。所有棋子下落完成后，如果又产生了能消除的情况，则会触发连锁反应继续消除，直到无法消除为止。称一次消除+一次下落为“一轮消除”，由此可以定义一次操作触发的消除“轮数”。\n\n其中，有些棋子具有特殊属性，被消除时会触发特殊效果，一共有以下 $6$ 类：\n\n- 1、消除时将同一行的全部棋子消除；\n- 2、消除时将同一列的全部棋子消除；\n- 3、消除时将同一行和同一列的全部棋子消除；\n- 4、消除时将以之为中心 $3 \\times 3$ 的正方形范围内的棋子全部消除；\n- 5、消除时将以之为中心 $5 \\times 5$ 的正方形范围内的棋子全部消除；\n- 6、消除时将与之颜色相同的棋子全部消除； \n\n触发一个棋子的特殊效果时可能连锁触发其他棋子的特殊效果，但是这些都是在同一轮消除内触发的（即连锁反应触发的过程中不会引起下落）。\n\n游戏中，每次操作都要求必须有效，即操作的两个位置相邻且均不为空位，且在操作之后能进行棋子的消除。若某次操作并非有效，则直接跳过这一次操作。所有 $q$ 次操作结束后游戏结束。\n\n定义一次有效操作的“主颜色”为通过交换而直接被消除的颜色（即不包括特殊效果触发和下落引起的消除），容易发现一次有效操作的主颜色至少有 $1$ 种，最多有 $2$ 种。\n\n游戏中，玩家要通过操作来获取尽可能多的得分。得分的规则有如下 $5$ 种：消除奖分+连锁奖分+组合奖分+牌型奖分+终局奖分。\n\n- 消除奖分：每次有效操作中，第 $i$ 轮消除的消除奖分为这一轮中所有被消除的棋子的颜色编号之和的 $i$ 倍。\n- 连锁奖分：设某次有效操作的总消除轮数为 $x$ ，则有连锁奖分 $80(x-1)^2$ 。\n- 组合奖分：某一轮消除中，在仅考虑由“同一行或同一列至少连续 $3$ 个相同颜色”引发的消除的情况下（即不考虑所有特殊效果引起的消除），设某个被消除的同色四连通块大小为 $x$ ，则有组合奖分 $50(x-3)^2$ 。如： $4$ 个同色棋子组成四连的组合奖分为 $50$ ，$5$ 个同色棋子组成五连、十字或T字等形状的组合奖分为 $200$ ，$2\\times3$ 的方形同色棋子的组合奖分为 $450$ 。\n - 牌型奖分：每 $5$ 次有效操作计算一次牌型奖分，取之前 $5$ 次有效操作的主颜色（若某次操作有多个主颜色，取能按照以下规则计算出的最大奖分的主颜色），按照如下牌型规则计算奖分：\n   \n   - 高牌： $5$ 种颜色全部不同，奖 $50$ 分 + 所有牌中最大的颜色编号；\n   - 一对： $2$ 个相同颜色 + $3$ 个不同颜色，奖 $100$ 分 + 一对的颜色编号 $\\times 2$ ；\n   \n   - 两对： $2$ 对相同颜色 + $1$ 个其他颜色，奖 $200$ 分 + 两对中较大的颜色编号 $\\times 2$ + 两对中较小的颜色编号；\n   - 三条： $3$ 个相同颜色 + $2$ 个不同颜色，奖 $300$ 分 + 三条的颜色编号 $\\times 3$ ；\n   - 葫芦： $3$ 个相同颜色 + 另外 $2$ 个相同颜色，奖 $500$ 分 + 三个相同的颜色编号 $\\times 3$ + 两个相同的颜色编号；\n   - 四条： $4$ 个相同颜色 + $1$ 个其他颜色，奖 $750$ 分 + 四条的颜色编号 $\\times 5$ ；\n   - 五条： $5$ 个颜色全部相同，奖 $1000$ 分 + 五条的颜色编号 $\\times 10$ 。\n - 终局奖分：若所有 $q$ 次操作均有效，在终局时额外获得 $1000$ 分终局奖分；若游戏结束时棋盘被全部清空，额外获得 $10000$ 分的终局奖分。\n\n给定一局游戏的初始局面和玩家的每一次操作，你需要计算玩家的总得分。", "inputFormat": "第 $1$ 行： $4$ 个正整数 $n,m,k,q$ 。\n\n接下来 $n$ 行，每行 $m$ 个正整数 $a_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的颜色。\n\n接下来 $n$ 行，每行 $m$ 个非负整数 $b_{i,j}$ ，表示初始状态下，从上往下第 $i$ 行、从左往右第 $j$ 列的棋子的特殊效果，含义如题面所述。特别地， $b_{i,j}=0$ 表示没有特殊效果。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $x_{i,1},y_{i,1},x_{i,2},y_{i,2}$ ，表示交换坐标 $(x_{i,1},y_{i,1})$ 和 $(x_{i,2},y_{i,2})$ 位置的棋子。", "outputFormat": "输出一行，一个非负整数表示终局时的总得分。", "hint": "【样例 1 解释】\n\n每次操作后，前 $3$ 类奖分的和分别为：$315,\\ 417,\\ 429,\\ 435,\\ 482$ 。第 $5$ 次操作后计算牌型奖分，最优牌型为 $(1\\ 2\\ 4\\ 2\\ 4)$ ，奖分为 $200 + 4\\times 2 + 2 \\times 1 = 210$ 。终局时两种终局奖分均可获得，故总分为 $11692$ 。\n\n【样例 2 解释】\n\n与上一组样例相比，增加了 $3$ 次无效操作，且最后不能实现全消，因此得不到终局奖分。\n\n【数据范围与约定】\n\n\n$n,m\\leq 50,\\ k \\leq 100,\\ q \\leq 1000,\\ a_{i,j} \\leq k,\\ b_{i,j} \\leq 6,\\ x_{i,1},x_{i,2} \\leq n,\\ y_{i,1},y_{i,2} \\leq m$ 。\n\n保证初始局面没有可以直接消除的情况。", "locale": "zh-CN"}}}
{"pid": "P8423", "type": "P", "difficulty": 0, "samples": [], "limits": {"time": [1000], "memory": [131072]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 决赛] 想象", "background": "", "description": "长颈鹿是一名想象学竞赛（Olympiad in Imaginics） 的选手。特别是出生在风井省内，若要从千百高手中脱颖而出，争夺进入全国决赛的门票，为自己上大学取得升学优势，更需要无穷无尽的想象力。\n\n风井省的赛题风格自古便与其他省份截然不同，因此即便在 3022 年，风井省也保持着自己的独立作风，没有与其他省一同进行统考，仍是独立命卷。\n\n长颈鹿深知风井省赛题所需的想象力之深厚：在往年，赛题的空间限制、数据组数甚至是题目大意，都可能需要选手自行想象。有些一眼看就没有多项式做法的题目，只要加以想象，也可以通过简单的输出通过。而真正的博弈，往往在赛前就开始，风井省总是会从网络各地原汁原味搬运题目，对于没有在赛前就做到原题的选手，想象力的匮乏是不可避免的。\n\n但想象学竞赛的魅力就在于，你永远想象不到会发生的事。\n\n在风井省选前半个月，长颈鹿的教练便为学生们布置了两道在 CodeFancy 上非常冷门的练习题目，但没让长颈鹿想到的是，这竟与正式赛题完全一致！长颈鹿十分钦佩教练的想象力，更深刻理解了“做干净的奥赛”为何意。最终，在这次风井省选中，长颈鹿的学校名列前茅，即便代价是另一些有一定水平的选手没有得到理想的名次。\n\n黑盒测试，是想象学竞赛区别于别的竞赛的最大特点。排除了人为的评判，将所有程序一视同仁，因此在以前，想象学竞赛被称为“最公平的竞赛”。可在冰冷冷的现实面前，所谓公平的表象，也只是一种想象。\n\n幸好，发生过的事情无需想象，我们都还能用双眼直视真相，理解发生了什么，并将之铭记。就像你也无需对本文描述的故事进行想象，简单的换词游戏不会屏蔽真义。现在就请你输出，长颈鹿在风井省参与的比赛的是什么？用缩写名称输出。\n\n例：真卷省的省级选拔赛，缩写名称为 ZJOI。", "inputFormat": "本题的输入对于你的输出没有意义，你可以无需读入。", "outputFormat": "本题仅有一个唯一的输出答案。\n\n输出一行，四个大写字母，表示风井省的省级选拔赛缩写名称。", "hint": "请不要妄加想象，认真阅读题目要求，正确输出，以避免在本题出错罚时。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 决赛] 想象", "background": "", "description": "长颈鹿是一名想象学竞赛（Olympiad in Imaginics） 的选手。特别是出生在风井省内，若要从千百高手中脱颖而出，争夺进入全国决赛的门票，为自己上大学取得升学优势，更需要无穷无尽的想象力。\n\n风井省的赛题风格自古便与其他省份截然不同，因此即便在 3022 年，风井省也保持着自己的独立作风，没有与其他省一同进行统考，仍是独立命卷。\n\n长颈鹿深知风井省赛题所需的想象力之深厚：在往年，赛题的空间限制、数据组数甚至是题目大意，都可能需要选手自行想象。有些一眼看就没有多项式做法的题目，只要加以想象，也可以通过简单的输出通过。而真正的博弈，往往在赛前就开始，风井省总是会从网络各地原汁原味搬运题目，对于没有在赛前就做到原题的选手，想象力的匮乏是不可避免的。\n\n但想象学竞赛的魅力就在于，你永远想象不到会发生的事。\n\n在风井省选前半个月，长颈鹿的教练便为学生们布置了两道在 CodeFancy 上非常冷门的练习题目，但没让长颈鹿想到的是，这竟与正式赛题完全一致！长颈鹿十分钦佩教练的想象力，更深刻理解了“做干净的奥赛”为何意。最终，在这次风井省选中，长颈鹿的学校名列前茅，即便代价是另一些有一定水平的选手没有得到理想的名次。\n\n黑盒测试，是想象学竞赛区别于别的竞赛的最大特点。排除了人为的评判，将所有程序一视同仁，因此在以前，想象学竞赛被称为“最公平的竞赛”。可在冰冷冷的现实面前，所谓公平的表象，也只是一种想象。\n\n幸好，发生过的事情无需想象，我们都还能用双眼直视真相，理解发生了什么，并将之铭记。就像你也无需对本文描述的故事进行想象，简单的换词游戏不会屏蔽真义。现在就请你输出，长颈鹿在风井省参与的比赛的是什么？用缩写名称输出。\n\n例：真卷省的省级选拔赛，缩写名称为 ZJOI。", "inputFormat": "本题的输入对于你的输出没有意义，你可以无需读入。", "outputFormat": "本题仅有一个唯一的输出答案。\n\n输出一行，四个大写字母，表示风井省的省级选拔赛缩写名称。", "hint": "请不要妄加想象，认真阅读题目要求，正确输出，以避免在本题出错罚时。", "locale": "zh-CN"}}}
{"pid": "P8424", "type": "P", "difficulty": 6, "samples": [["3\n1 2 4\n", "0.8333333333\n"], ["6\n1 2 5 6 8 9\n", "1.166666667\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "Special Judge", "O2优化", "JOI（日本）"], "title": "[JOI Open 2022] 跷跷板 / Seesaw", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T1. [シーソー](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement.pdf) / [Seesaw](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement-en.pdf)。**", "description": "一根长度为 ${10}^9$ 的直杆从左到右水平放置。你可以忽略这根杆的重量。共有 $N$ 个砝码挂在这根杆上，每个砝码的质量为一单位。这 $N$ 个砝码的位置两两不同。第 $i$（$1 \\le i \\le N$）个砝码的位置为 $A_i$。即，第 $i$ 个砝码到直杆最左端的距离为 $A_i$。\n\n最开始，我们有一个宽度为 $w$ 的箱子。我们可以把这根杆子放在箱子上，支撑起杆从 $l$ 到 $r$（$0 \\le l < r \\le {10}^9$）的部分（包括两端），即，从杆上位置为 $l$ 到杆上位置为 $r$ 的区间。这里需要满足 $r = l + w$。之后我们不可以改变 $l$ 和 $r$ 的值。\n\n接下来，我们去掉挂在杆上最左端或最右端的砝码。我们需要重复这个操作 $N - 1$ 次。在这个过程中，包括初始状态和最终状态，挂在杆上的所有砝码重心都需要保持在 $l$ 到 $r$ 之间（包括两端）。如果杆上挂有 $m$ 个砝码，位置分别为 $b_1, b_2, \\ldots, b_m$，那么重心位置为 $\\frac{b_1 + b_2 + \\cdots + b_m}{m}$。\n\n给定 $N$ 和这 $N$ 个砝码的位置 $A_1, A_2, \\ldots, A_N$，写一个程序计算箱子的最小可能宽度 $w$。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个非负整数 $A_1, A_2, \\ldots, A_N$。", "outputFormat": "输出箱子的最小可能宽度 $w$。只要你的输出与标准答案之间的绝对误差或相对误差小于等于 ${10}^{-9}$，你的程序就会被判为正确。", "hint": "**【样例解释 \\#1】**\n\n可让箱子的宽度为 $\\frac{5}{6}$。我们令 $l = \\frac{3}{2}, r = \\frac{7}{3}$。进行如下操作：\n\n- 最初，重心位置为 $\\frac{7}{3}$。\n- 第一次操作，我们去掉最右端的砝码（位置为 $4$ 的砝码）。重心位置变为 $\\frac{3}{2}$。\n- 第二次操作，我们去掉最左端的砝码（位置为 $1$ 的砝码）。重心位置变为 $2$。\n\n在这个过程中，重心始终保持在 $l$ 到 $r$ 范围中。\n\n因为箱子的宽度不会小于 $\\frac{5}{6}$，因此输出 $\\frac{5}{6}$ 的小数形式。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（1 分）：$N \\le 20$。\n- 子任务 2（33 分）：$N \\le 100$。\n- 子任务 3（33 分）：$N \\le 2000$。\n- 子任务 4（33 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le 2 \\times 10^5$，$0 \\le A_1 < A_2 < \\cdots < A_N \\le {10}^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2022] 跷跷板 / Seesaw", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T1. [シーソー](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement.pdf) / [Seesaw](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/seesaw/2022-open-seesaw-statement-en.pdf)。**", "description": "一根长度为 ${10}^9$ 的直杆从左到右水平放置。你可以忽略这根杆的重量。共有 $N$ 个砝码挂在这根杆上，每个砝码的质量为一单位。这 $N$ 个砝码的位置两两不同。第 $i$（$1 \\le i \\le N$）个砝码的位置为 $A_i$。即，第 $i$ 个砝码到直杆最左端的距离为 $A_i$。\n\n最开始，我们有一个宽度为 $w$ 的箱子。我们可以把这根杆子放在箱子上，支撑起杆从 $l$ 到 $r$（$0 \\le l < r \\le {10}^9$）的部分（包括两端），即，从杆上位置为 $l$ 到杆上位置为 $r$ 的区间。这里需要满足 $r = l + w$。之后我们不可以改变 $l$ 和 $r$ 的值。\n\n接下来，我们去掉挂在杆上最左端或最右端的砝码。我们需要重复这个操作 $N - 1$ 次。在这个过程中，包括初始状态和最终状态，挂在杆上的所有砝码重心都需要保持在 $l$ 到 $r$ 之间（包括两端）。如果杆上挂有 $m$ 个砝码，位置分别为 $b_1, b_2, \\ldots, b_m$，那么重心位置为 $\\frac{b_1 + b_2 + \\cdots + b_m}{m}$。\n\n给定 $N$ 和这 $N$ 个砝码的位置 $A_1, A_2, \\ldots, A_N$，写一个程序计算箱子的最小可能宽度 $w$。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个非负整数 $A_1, A_2, \\ldots, A_N$。", "outputFormat": "输出箱子的最小可能宽度 $w$。只要你的输出与标准答案之间的绝对误差或相对误差小于等于 ${10}^{-9}$，你的程序就会被判为正确。", "hint": "**【样例解释 \\#1】**\n\n可让箱子的宽度为 $\\frac{5}{6}$。我们令 $l = \\frac{3}{2}, r = \\frac{7}{3}$。进行如下操作：\n\n- 最初，重心位置为 $\\frac{7}{3}$。\n- 第一次操作，我们去掉最右端的砝码（位置为 $4$ 的砝码）。重心位置变为 $\\frac{3}{2}$。\n- 第二次操作，我们去掉最左端的砝码（位置为 $1$ 的砝码）。重心位置变为 $2$。\n\n在这个过程中，重心始终保持在 $l$ 到 $r$ 范围中。\n\n因为箱子的宽度不会小于 $\\frac{5}{6}$，因此输出 $\\frac{5}{6}$ 的小数形式。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（1 分）：$N \\le 20$。\n- 子任务 2（33 分）：$N \\le 100$。\n- 子任务 3（33 分）：$N \\le 2000$。\n- 子任务 4（33 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le 2 \\times 10^5$，$0 \\le A_1 < A_2 < \\cdots < A_N \\le {10}^9$。", "locale": "zh-CN"}}}
{"pid": "P8425", "type": "P", "difficulty": 7, "samples": [["6\n5 4 6 1 3 2\n", "2\n"], ["4\n4 1 3 2\n", "0\n"], ["7\n3 1 6 7 4 2 5\n", "2\n"], ["13\n8 5 6 13 4 2 11 3 9 1 10 7 12\n", "6\n"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "O2优化", "JOI（日本）"], "title": "[JOI Open 2022] 长颈鹿 / Giraffes", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T2. [キリン](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement.pdf) / [Giraffes](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement-en.pdf)。**", "description": "IOI 动物园以长颈鹿而闻名。IOI 动物园中有 $N$ 只长颈鹿，按身高递增顺序编号为 $1 \\sim N$。长颈鹿的身高两两不同。共有 $N$ 个笼舍排成一排，从左到右编号为 $1 \\sim N$。每个笼舍居住一只长颈鹿。笼舍 $i$ 中居住长颈鹿 $P_i$。\n\nAPIO 先生是 IOI 动物园园长。他正担心 IOI 动物园的评级问题。IOI 动物园因“长颈鹿的观感很糟”的原因收到了差评。具体来说，当一个游客和长颈鹿拍照时，游客会选择两个整数 $l, r$（$1 \\le l \\le r \\le N$）并给在笼舍 $l, l + 1, \\ldots, r$ 的长颈鹿拍照。那么，只要下列两个条件**都满足**，这些长颈鹿的观感就是差的。\n\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都高。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l < P_k > P_r$。\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都矮。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l > P_k < P_r$。\n\nAPIO 先生将重新排列这些长颈鹿，满足对于游客对任意 $l, r$（$1 \\le l \\le r \\le N$）的选择，长颈鹿的观感都不会是差的。因为将一只长颈鹿从一个笼舍挪到另一个笼舍很费功夫，他想要最小化移动长颈鹿的只数。当然，在移动之后，每个笼舍应仍只有一只长颈鹿居住。\n\n给定目前长颈鹿的信息，写一个程序计算最少要移动多少只长颈鹿。因为 APIO 先生目前的长颈鹿排布是随机的，你可以假设 $P_i$（$1 \\le i \\le N$）的值是随机生成的（见【**数据生成**】一节了解详细信息）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数 $P_1, P_2, \\ldots, P_N$。", "outputFormat": "输出一行一个整数，表示最少要移动多少只长颈鹿。", "hint": "**【样例解释 \\#1】**\n\nIOI 动物园中共有 $6$ 只长颈鹿。长颈鹿 $5,4,6,1,3,2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，如果游客对 $l = 2, r = 5$ 的长颈鹿拍照的话，观感就是差的。两个条件按如下方式满足。\n\n- 住在笼舍 $3$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都高。\n- 住在笼舍 $4$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都矮。\n\n如果 APIO 先生将长颈鹿 $1$ 从笼舍 $4$ 移到笼舍 $1$，然后将长颈鹿 $5$ 从笼舍 $1$ 移动到笼舍 $4$，那么对于游客的任意选择，观感都不会是差的。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\nIOI 动物园中共有 $4$ 只长颈鹿。长颈鹿 $4, 1, 3, 2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，对于游客的任意选择，观感都不会变差。APIO 先生不需要移动长颈鹿，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n以 APIO 先生将长颈鹿 $3, 5, 6, 7, 4, 2, 1$ 按从左到右的顺序居住在各自笼舍中为例。对于游客的任意选择，观感都不会变差。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足子任务 2、3、4 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（10 分）：$N \\le 7$。\n- 子任务 2（22 分）：$N \\le 13$。\n- 子任务 3（27 分）：$N \\le 300$。\n- 子任务 4（41 分）：无特殊限制。\n\n对于所有数据，满足 $1 \\le N \\le 8000$，$1 \\le P_i \\le N$，$P_i$ 两两不同，保证 $P_i$ 是随机生成的（见【**数据生成**】一节了解详细信息）。\n\n----\n\n**【数据生成】**\n\n在本题，除了样例输入，有 $10$ 组数据满足子任务 1、2、3、4 的限制，有 $10$ 组数据满足子任务 2、3、4 的限制，有 $10$ 组数据满足子任务 3、4 的限制，有 $10$ 组数据满足子任务 4 的限制。包括样例，总计有 $44$ 组数据用于评分。所有 $44$ 组数据按如下方式生成：\n\n1. 首先，生成满足子任务的 $N$。\n2. 然后，在 $N! = 1 \\times 2 \\times \\cdots \\times N$ 个满足限制的排列 $(P_1, P_2, \\ldots, P_N)$ 中，等概率随机选择一个作为 $P_1, P_2, \\ldots, P_N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2022] 长颈鹿 / Giraffes", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T2. [キリン](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement.pdf) / [Giraffes](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/giraffes/2022-open-giraffes-statement-en.pdf)。**", "description": "IOI 动物园以长颈鹿而闻名。IOI 动物园中有 $N$ 只长颈鹿，按身高递增顺序编号为 $1 \\sim N$。长颈鹿的身高两两不同。共有 $N$ 个笼舍排成一排，从左到右编号为 $1 \\sim N$。每个笼舍居住一只长颈鹿。笼舍 $i$ 中居住长颈鹿 $P_i$。\n\nAPIO 先生是 IOI 动物园园长。他正担心 IOI 动物园的评级问题。IOI 动物园因“长颈鹿的观感很糟”的原因收到了差评。具体来说，当一个游客和长颈鹿拍照时，游客会选择两个整数 $l, r$（$1 \\le l \\le r \\le N$）并给在笼舍 $l, l + 1, \\ldots, r$ 的长颈鹿拍照。那么，只要下列两个条件**都满足**，这些长颈鹿的观感就是差的。\n\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都高。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l < P_k > P_r$。\n- 存在一只长颈鹿，满足这只长颈鹿比两端的长颈鹿都矮。换句话说，存在一个整数 $k$（$l < k < r$）满足 $P_l > P_k < P_r$。\n\nAPIO 先生将重新排列这些长颈鹿，满足对于游客对任意 $l, r$（$1 \\le l \\le r \\le N$）的选择，长颈鹿的观感都不会是差的。因为将一只长颈鹿从一个笼舍挪到另一个笼舍很费功夫，他想要最小化移动长颈鹿的只数。当然，在移动之后，每个笼舍应仍只有一只长颈鹿居住。\n\n给定目前长颈鹿的信息，写一个程序计算最少要移动多少只长颈鹿。因为 APIO 先生目前的长颈鹿排布是随机的，你可以假设 $P_i$（$1 \\le i \\le N$）的值是随机生成的（见【**数据生成**】一节了解详细信息）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个正整数 $P_1, P_2, \\ldots, P_N$。", "outputFormat": "输出一行一个整数，表示最少要移动多少只长颈鹿。", "hint": "**【样例解释 \\#1】**\n\nIOI 动物园中共有 $6$ 只长颈鹿。长颈鹿 $5,4,6,1,3,2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，如果游客对 $l = 2, r = 5$ 的长颈鹿拍照的话，观感就是差的。两个条件按如下方式满足。\n\n- 住在笼舍 $3$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都高。\n- 住在笼舍 $4$ 的长颈鹿比住在最左（笼舍 $2$）和最右（笼舍 $5$）笼舍的长颈鹿都矮。\n\n如果 APIO 先生将长颈鹿 $1$ 从笼舍 $4$ 移到笼舍 $1$，然后将长颈鹿 $5$ 从笼舍 $1$ 移动到笼舍 $4$，那么对于游客的任意选择，观感都不会是差的。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\nIOI 动物园中共有 $4$ 只长颈鹿。长颈鹿 $4, 1, 3, 2$ 按从左到右的顺序居住在各自的笼舍中。这样排列的话，对于游客的任意选择，观感都不会变差。APIO 先生不需要移动长颈鹿，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n以 APIO 先生将长颈鹿 $3, 5, 6, 7, 4, 2, 1$ 按从左到右的顺序居住在各自笼舍中为例。对于游客的任意选择，观感都不会变差。APIO 先生通过移动 $2$ 只长颈鹿达成了目标。因为这是移动只数的最小值，所以输出 $2$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足子任务 2、3、4 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（10 分）：$N \\le 7$。\n- 子任务 2（22 分）：$N \\le 13$。\n- 子任务 3（27 分）：$N \\le 300$。\n- 子任务 4（41 分）：无特殊限制。\n\n对于所有数据，满足 $1 \\le N \\le 8000$，$1 \\le P_i \\le N$，$P_i$ 两两不同，保证 $P_i$ 是随机生成的（见【**数据生成**】一节了解详细信息）。\n\n----\n\n**【数据生成】**\n\n在本题，除了样例输入，有 $10$ 组数据满足子任务 1、2、3、4 的限制，有 $10$ 组数据满足子任务 2、3、4 的限制，有 $10$ 组数据满足子任务 3、4 的限制，有 $10$ 组数据满足子任务 4 的限制。包括样例，总计有 $44$ 组数据用于评分。所有 $44$ 组数据按如下方式生成：\n\n1. 首先，生成满足子任务的 $N$。\n2. 然后，在 $N! = 1 \\times 2 \\times \\cdots \\times N$ 个满足限制的排列 $(P_1, P_2, \\ldots, P_N)$ 中，等概率随机选择一个作为 $P_1, P_2, \\ldots, P_N$。", "locale": "zh-CN"}}}
{"pid": "P8426", "type": "P", "difficulty": 7, "samples": [["4 4\n1 2 1\n1 3 2\n2 4 4\n3 4 3\n", "0\n"], ["4 4\n1 2 1\n1 3 3\n2 4 4\n3 4 3\n", "1\n"], ["3 4\n1 2 1\n1 2 2\n1 3 3\n1 3 3\n", "0\n"], ["4 5\n1 2 1\n1 3 2\n2 4 4\n3 4 3\n2 3 1\n", "1\n"], ["12 17\n2 4 656247308\n4 6 106088453\n1 5 754343261\n9 12 497827261\n3 8 759830309\n3 4 61084725\n1 6 324702188\n3 6 415317430\n7 12 846175092\n5 8 278621369\n1 10 891247646\n10 12 755236904\n6 8 511967203\n5 6 597197970\n1 7 800309458\n7 9 348347831\n10 11 134217757\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "O2优化", "JOI（日本）"], "title": "[JOI Open 2022] 放学路 / School Road", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T3. [通学路](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement.pdf) / [School Road](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement-en.pdf)。**\n\n----\n\n在洛谷上，本题测试点和子任务配置可能导致评测结果页面难以理解。具体地，将评测结果页面中的子任务编号 $x$ 转为二进制后，从低到高第 $i$ 位为 $1$ 就表示子任务内所有测试点均满足题目中的子任务 $i$ 的限制。", "description": "河狸国由 $N$ 座城市组成，编号为 $1 \\sim N$。共有 $M$ 条道路连接这些城市，道路编号为 $1 \\sim M$。道路 $i$（$1 \\le i \\le M$）双向连接城市 $A_i$ 和 $B_i$，并且道路 $i$ 的长度为 $C_i$。保证经过一定数量的道路，均可以从任意一座城市到达任意其他城市。\n\nBitaro 是一只住在城市 $1$ 的河狸。他要去城市 $N$ 上学。他上学通常都走一样的路线。他的上学路线满足如下条件。\n\n- 令 $L$ 为从城市 $1$ 到城市 $N$ 的最短距离。\n- Bitaro 的上学路是一条连接城市 $1$ 和城市 $N$ 且长度为 $L$ 的路径。\n\n因为今天天气好，Bitaro 决定绕路回家。也就是说，他会选择一条从城市 $N$ 到城市 $1$ 且长度大于 $L$ 的路径。因为 Bitaro 很容易厌倦，他不想经过同一座城市多于一次。因此，当他绕远路回家时，不允许经过同一座城市多于一次，并且不允许走回头路。\n\n给定河狸国的城市和道路的信息，写一个程序确定是否存在一条从学校到 Bitaro 的家的远路。\n\n**赛时提醒：Bitaro 不允许在回家途中经过相同的城市超过一次，但是并不禁止经过在他上学路线中经过的城市。**", "inputFormat": "第一行，两个正整数 $N, M$。\n\n接下来 $M$ 行，第 $i$ 行三个正整数 $A_i, B_i, C_i$。", "outputFormat": "输出一行，一个数。如果存在一条到 Bitaro 家的，长度大于 $L$ 且不经过同一座城市多于一次的路径，输出 $1$，否则输出 $0$。", "hint": "**【样例解释 \\#1】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $5$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为不存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $6$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $1$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#5】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（7 分）：$M \\le 40$。\n- 子任务 2（15 分）：$N \\le 18$。\n- 子任务 3（23 分）：$M - N \\le 13$。\n- 子任务 4（35 分）：对于任意三座不同的城市 $a, b, c$，均存在一条从城市 $a$ 到城市 $c$ 且不经过城市 $b$ 的路径。\n- 子任务 5（20 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le {10}^5$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le A_i < B_i \\le N$，$1 \\le C_i \\le {10}^9$，保证经过一定数量的道路，均可以从任意一个城市到达任意其他城市。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2022] 放学路 / School Road", "background": "**译自 [JOI Open 2022](https://contests.ioi-jp.org/open-2022/index.html) T3. [通学路](https://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement.pdf) / [School Road](http://s3-ap-northeast-1.amazonaws.com/data.cms.ioi-jp.org/open-2022/school_road/2022-open-school_road-statement-en.pdf)。**\n\n----\n\n在洛谷上，本题测试点和子任务配置可能导致评测结果页面难以理解。具体地，将评测结果页面中的子任务编号 $x$ 转为二进制后，从低到高第 $i$ 位为 $1$ 就表示子任务内所有测试点均满足题目中的子任务 $i$ 的限制。", "description": "河狸国由 $N$ 座城市组成，编号为 $1 \\sim N$。共有 $M$ 条道路连接这些城市，道路编号为 $1 \\sim M$。道路 $i$（$1 \\le i \\le M$）双向连接城市 $A_i$ 和 $B_i$，并且道路 $i$ 的长度为 $C_i$。保证经过一定数量的道路，均可以从任意一座城市到达任意其他城市。\n\nBitaro 是一只住在城市 $1$ 的河狸。他要去城市 $N$ 上学。他上学通常都走一样的路线。他的上学路线满足如下条件。\n\n- 令 $L$ 为从城市 $1$ 到城市 $N$ 的最短距离。\n- Bitaro 的上学路是一条连接城市 $1$ 和城市 $N$ 且长度为 $L$ 的路径。\n\n因为今天天气好，Bitaro 决定绕路回家。也就是说，他会选择一条从城市 $N$ 到城市 $1$ 且长度大于 $L$ 的路径。因为 Bitaro 很容易厌倦，他不想经过同一座城市多于一次。因此，当他绕远路回家时，不允许经过同一座城市多于一次，并且不允许走回头路。\n\n给定河狸国的城市和道路的信息，写一个程序确定是否存在一条从学校到 Bitaro 的家的远路。\n\n**赛时提醒：Bitaro 不允许在回家途中经过相同的城市超过一次，但是并不禁止经过在他上学路线中经过的城市。**", "inputFormat": "第一行，两个正整数 $N, M$。\n\n接下来 $M$ 行，第 $i$ 行三个正整数 $A_i, B_i, C_i$。", "outputFormat": "输出一行，一个数。如果存在一条到 Bitaro 家的，长度大于 $L$ 且不经过同一座城市多于一次的路径，输出 $1$，否则输出 $0$。", "hint": "**【样例解释 \\#1】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $5$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为不存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $0$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#2】**\n\n在这组样例中，从城市 $1$（Bitaro 家）到城市 $4$（学校）的最短距离是 $5$。\n\n有两条到 Bitaro 家并且不经过同一座城市多于一次的路径。\n\n- 按顺序经过道路 $3 \\to 1$，长度为 $5$ 的路径，按 $4 \\to 2 \\to 1$ 的顺序经过城市。\n- 按顺序经过道路 $4 \\to 2$，长度为 $6$ 的路径，按 $4 \\to 3 \\to 1$ 的顺序经过城市。\n\n因为存在到 Bitaro 家的，长度大于 $5$ 且不经过同一座城市多于一次的路径，因此输出 $1$。\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#3】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【样例解释 \\#4】**\n\n这组样例满足所有子任务的限制。\n\n----\n\n**【样例解释 \\#5】**\n\n这组样例满足子任务 1、2、3、5 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（7 分）：$M \\le 40$。\n- 子任务 2（15 分）：$N \\le 18$。\n- 子任务 3（23 分）：$M - N \\le 13$。\n- 子任务 4（35 分）：对于任意三座不同的城市 $a, b, c$，均存在一条从城市 $a$ 到城市 $c$ 且不经过城市 $b$ 的路径。\n- 子任务 5（20 分）：无特殊限制。\n\n对于所有数据，满足 $2 \\le N \\le {10}^5$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le A_i < B_i \\le N$，$1 \\le C_i \\le {10}^9$，保证经过一定数量的道路，均可以从任意一个城市到达任意其他城市。", "locale": "zh-CN"}}}
{"pid": "P8427", "type": "P", "difficulty": 7, "samples": [["12 11\n1 1 1 1 1 1 1 1 1 1 1\n1 1 1 1 0 0 0 1 1 1 1\n1 1 1 0 0 0 0 0 1 1 1\n1 1 0 0 0 0 0 0 0 1 1\n1 0 0 0 2 2 2 0 0 0 1\n1 0 0 0 2 2 2 0 0 0 1\n1 0 0 0 2 2 2 0 0 0 1\n1 0 0 0 0 0 0 0 0 0 1\n1 1 0 0 0 2 0 0 0 1 1\n0 1 1 0 0 2 0 0 1 1 0\n0 0 1 1 0 0 0 1 1 0 0\n0 0 0 1 1 1 1 1 0 0 0\n2\n5 5 3\n6 2 4", "1 1 1 1 1 1 1 1 1 1 1\n1 1 1 1 4 4 4 1 1 1 1\n1 1 1 4 4 4 4 4 1 1 1\n1 1 4 4 4 4 4 4 4 1 1\n1 4 4 4 3 3 3 4 4 4 1\n1 4 4 4 3 3 3 4 4 4 1\n1 4 4 4 3 3 3 4 4 4 1\n1 4 4 4 4 4 4 4 4 4 1\n1 1 4 4 4 2 4 4 4 1 1\n0 1 1 4 4 2 4 4 1 1 0\n0 0 1 1 4 4 4 1 1 0 0\n0 0 0 1 1 1 1 1 0 0 0"], ["4 4\n1 0 1 3\n1 3 2 2\n3 3 1 2\n2 2 1 3\n3\n1 2 3\n3 2 1\n4 2 3", "1 1 1 3\n1 1 2 2\n1 1 1 2\n3 3 1 3"], ["6 6\n1 2 1 2 2 2\n3 1 2 1 3 1\n3 3 2 3 2 2\n2 3 1 3 3 2\n3 3 3 3 3 3\n2 3 2 2 2 1\n4\n6 2 2\n3 5 2\n3 2 3\n1 2 3", "1 3 1 2 2 2\n3 1 3 1 3 1\n3 3 3 3 3 3\n3 3 1 3 3 3\n3 3 3 3 3 3\n3 3 3 3 3 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COI（克罗地亚）"], "title": "[COI 2020] Paint", "background": "", "description": "你一定用过画图软件的一键填充功能吧？如果拓展到像素层面中，如果一个大连通块内所有像素的颜色相同，那么将一个像素染色，那么整个连通块内的所有像素都会被染色。\n\n现在给定一个 $R\\times S$ 的像素图，给定 $Q$ 个染色操作：\n\n- 将 $(r_i,s_i)$ 染为颜色 $c_i$。\n\n求染色过后的整个像素图。", "inputFormat": "第一行两个整数 $R,S$ 代表像素图大小。          \n接下来 $R$ 行每行 $S$ 个整数，代表像素图的初始颜色。         \n第 $R+2$ 行一个整数 $Q$ 代表操作个数。         \n接下来 $Q$ 行每行三个整数 $r_i,s_i,c_i$ 代表一次染色操作。", "outputFormat": "$R$ 行每行 $S$ 个整数代表染色后的像素图。", "hint": "#### 样例 1 解释\n\n假设 $0$ 为白色，$1$ 为红色，$2$ 为蓝色，$3$ 为绿色，$4$ 为黄色，那么如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4hvovfq7.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le R \\times S \\le 10^4$，$1 \\le Q \\le 10^4$。\n- Subtask 2（9 pts）：$R=1$，$1 \\le S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n- Subtask 3（31 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$，颜色只有 $0$ 和 $1$。\n- Subtask 4（52 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le r_i \\le R$，$1 \\le s_i \\le S$，$0 \\le c_i \\le 10^5$，颜色区间为 $[0,10^5]$。\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 A Paint](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Paint", "background": "", "description": "你一定用过画图软件的一键填充功能吧？如果拓展到像素层面中，如果一个大连通块内所有像素的颜色相同，那么将一个像素染色，那么整个连通块内的所有像素都会被染色。\n\n现在给定一个 $R\\times S$ 的像素图，给定 $Q$ 个染色操作：\n\n- 将 $(r_i,s_i)$ 染为颜色 $c_i$。\n\n求染色过后的整个像素图。", "inputFormat": "第一行两个整数 $R,S$ 代表像素图大小。          \n接下来 $R$ 行每行 $S$ 个整数，代表像素图的初始颜色。         \n第 $R+2$ 行一个整数 $Q$ 代表操作个数。         \n接下来 $Q$ 行每行三个整数 $r_i,s_i,c_i$ 代表一次染色操作。", "outputFormat": "$R$ 行每行 $S$ 个整数代表染色后的像素图。", "hint": "#### 样例 1 解释\n\n假设 $0$ 为白色，$1$ 为红色，$2$ 为蓝色，$3$ 为绿色，$4$ 为黄色，那么如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4hvovfq7.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le R \\times S \\le 10^4$，$1 \\le Q \\le 10^4$。\n- Subtask 2（9 pts）：$R=1$，$1 \\le S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n- Subtask 3（31 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$，颜色只有 $0$ 和 $1$。\n- Subtask 4（52 pts）：$1 \\le R \\times S \\le 2 \\times 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le r_i \\le R$，$1 \\le s_i \\le S$，$0 \\le c_i \\le 10^5$，颜色区间为 $[0,10^5]$。\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 A Paint](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8428", "type": "P", "difficulty": 6, "samples": [["4 2\n1 2\n2 3\n3 4\n1 4", "2\n1 3"], ["9 5\n1 2\n2 3\n3 4\n3 5\n1 6\n1 7\n7 8\n8 9\n2 5 6 7 9", "3\n1 4 9"], ["20 9\n1 2\n2 3\n2 4\n4 5\n4 6\n5 7\n7 8\n8 9\n7 10\n10 11\n6 12\n6 13\n6 17\n13 14\n14 15\n14 16\n17 18\n18 19\n18 20\n1 3 9 11 12 15 16 19 20", "3\n5 14 18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "Special Judge", "广度优先搜索 BFS", "树形 DP", "COI（克罗地亚）"], "title": "[COI 2020] Pastiri", "background": "", "description": "给定一棵 $N$ 点的树，点编号为 $1$ 到 $N$，现在在 $K$ 个点上有羊，你的任务是在树上分配一些牧羊人。\n\n这些牧羊人很懒，只会看管离他最近的羊。当然如果有多个离他最近的羊，那么他会都看管。\n\n当然，牧羊人可以和羊在同一个点上，但这样牧羊人只会看管这一个点上的那个羊。\n\n求一种牧羊人的分配方案使得牧羊人总数最小。", "inputFormat": "第一行两个整数 $N,K$ 代表树的点数和有羊的点数。         \n接下来 $N-1$ 行每行两个整数 $a_i,b_i$ 代表树的一条边。         \n第 $N+1$ 行 $K$ 个整数 $o_i$，代表有羊的点的编号。", "outputFormat": "第一行一个整数 $X$ 代表牧羊人总数的最小值。       \n第二行 $X$ 个整数代表每个牧羊人分配到哪个点上。         \n如果有多种解，输出一种即可。", "hint": "#### 样例 3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qwahnh8z.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 5 \\times 10^5$，任意一个点 $i$ 都与 $i+1$ 相连（$1 \\le i \\le N-1$）。\n- Subtask 2（18 pts）：$1 \\le K \\le 15$，$1 \\le N \\le 5 \\times 10^5$。\n- Subtask 3（23 pts）：$1 \\le N \\le 2000$。\n- Subtask 4（51 pts）：$1 \\le N \\le 5 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le N$，$1 \\le a_i,b_i \\le N$，$1 \\le  o_i \\le N$。\n\n**本题使用 Special Judge，checker 提供者 @[Lynkcat](https://www.luogu.com.cn/user/120911)，感谢他的贡献。**\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 B Pastiri](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Pastiri", "background": "", "description": "给定一棵 $N$ 点的树，点编号为 $1$ 到 $N$，现在在 $K$ 个点上有羊，你的任务是在树上分配一些牧羊人。\n\n这些牧羊人很懒，只会看管离他最近的羊。当然如果有多个离他最近的羊，那么他会都看管。\n\n当然，牧羊人可以和羊在同一个点上，但这样牧羊人只会看管这一个点上的那个羊。\n\n求一种牧羊人的分配方案使得牧羊人总数最小。", "inputFormat": "第一行两个整数 $N,K$ 代表树的点数和有羊的点数。         \n接下来 $N-1$ 行每行两个整数 $a_i,b_i$ 代表树的一条边。         \n第 $N+1$ 行 $K$ 个整数 $o_i$，代表有羊的点的编号。", "outputFormat": "第一行一个整数 $X$ 代表牧羊人总数的最小值。       \n第二行 $X$ 个整数代表每个牧羊人分配到哪个点上。         \n如果有多种解，输出一种即可。", "hint": "#### 样例 3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qwahnh8z.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 5 \\times 10^5$，任意一个点 $i$ 都与 $i+1$ 相连（$1 \\le i \\le N-1$）。\n- Subtask 2（18 pts）：$1 \\le K \\le 15$，$1 \\le N \\le 5 \\times 10^5$。\n- Subtask 3（23 pts）：$1 \\le N \\le 2000$。\n- Subtask 4（51 pts）：$1 \\le N \\le 5 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le N$，$1 \\le a_i,b_i \\le N$，$1 \\le  o_i \\le N$。\n\n**本题使用 Special Judge，checker 提供者 @[Lynkcat](https://www.luogu.com.cn/user/120911)，感谢他的贡献。**\n\n#### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 B Pastiri](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8429", "type": "P", "difficulty": 5, "samples": [["1 2 1 5", "0\n0\n0\n1\n0\n2\n0\n0\n0\n0"], ["1 3 3 8", "0\n0\n0\n6\n0\n13\n0\n0\n0\n0"], ["1 4 2 4", "24\n0\n8\n0\n37\n0\n4\n28\n4\n24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "COI（克罗地亚）"], "title": "[COI 2020] Semafor", "background": "你可能非常熟悉七段 LED 显示器，它广泛地应用于各种数字设备内，比如计算器，手表，红绿灯等等。由于它的简单与美观，该设计已被全球接受，不过年轻的 Matej 反对这个设计，并设计出了\"五段 LED 显示器\"，声称可以更有效地获得与七段 LED 显示器相同的功能。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fuwevm3z.png)", "description": "Matej 的第一步就是将这项设计应用到足球业界中，他目前正在克罗地亚足球协会中做演讲，决定将他的设计用在换人板上。\n\n换人板由 $m$ 个五段 LED 显示器组成，换人板将显示一个数，这个数由换人板上的 $m$ 个数字组成，代表被换下的球员的号码。Matej 决定开始演示他的换人板操作。刚开始他的换人板上显示了数字 $x$。Matej 将做出下面两种操作的一种：\n\n* 将一段关闭的 LED 灯打开。\n* 将一段打开的 LED 灯关闭。\n\nMatej 总共会执行 $n$ 次操作，他需要保证每 $k$ 次操作他的换人板显示的是一个数（每个五段 LED 显示器上都显示了一个 $0$ ~ $ 9$ 内的数字）。\n\n执行完 $n$ 次操作后你会得到一个最终状态，对于每个最终状态是一个数的情况，Matej 想知道分别有多少种满足上述限制的不同的操作序列能达到这些最终状态。我们说两个操作序列不同，当且仅当这两个操作序列中第 $i$ 次操作时操作了不同的五段 LED 显示器并且在某此操作后两种操作序列产生的状态不同。", "inputFormat": "第一行四个整数 $m,n,k,x$，意义见题目描述。", "outputFormat": "共 $10^m$ 行。第 $i$ 行输出一个整数表示最终状态显示的数为 $i-1$ 时所有的操作序列的个数。答案对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释\n刚开始的时候换人板上显示 $5$。因为 $k=1$。所以每次操作后换人板上都必须显示的是一个数。Matej 将会进行 $n=2$ 次操作，因此最终他可以显示出 $3$ 或 $5$ 两个数。为了显示 $3$，我们只能先将 $5$变成 $9$ 然后再将 $9$ 变成 $3$。为了显示 $5$，我们即可以通过 $5-9-5$ 的方法实现也可以通过 $5-8-5$ 的方法实现，因此有两种操作序列。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n* Subtask 1（6 pts）：$m=1$，$1 \\leq n \\leq 12$。\n* Subtask 2（15 pts）：$m=1$，$1 \\leq n \\leq 10^{15}$。\n* Subtask 3（12 pts）：$m=2$，$1 \\leq n \\leq 1500$，$k=n$。\n* Subtask 4（12 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 15$。\n* Subtask 5（15 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 1500$。\n* Subtask 6（40 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$。\n\n对于 $100\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^{15} $，$0 \\leq x \\leq 10^m$。\n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 C Semafor](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Semafor", "background": "你可能非常熟悉七段 LED 显示器，它广泛地应用于各种数字设备内，比如计算器，手表，红绿灯等等。由于它的简单与美观，该设计已被全球接受，不过年轻的 Matej 反对这个设计，并设计出了\"五段 LED 显示器\"，声称可以更有效地获得与七段 LED 显示器相同的功能。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fuwevm3z.png)", "description": "Matej 的第一步就是将这项设计应用到足球业界中，他目前正在克罗地亚足球协会中做演讲，决定将他的设计用在换人板上。\n\n换人板由 $m$ 个五段 LED 显示器组成，换人板将显示一个数，这个数由换人板上的 $m$ 个数字组成，代表被换下的球员的号码。Matej 决定开始演示他的换人板操作。刚开始他的换人板上显示了数字 $x$。Matej 将做出下面两种操作的一种：\n\n* 将一段关闭的 LED 灯打开。\n* 将一段打开的 LED 灯关闭。\n\nMatej 总共会执行 $n$ 次操作，他需要保证每 $k$ 次操作他的换人板显示的是一个数（每个五段 LED 显示器上都显示了一个 $0$ ~ $ 9$ 内的数字）。\n\n执行完 $n$ 次操作后你会得到一个最终状态，对于每个最终状态是一个数的情况，Matej 想知道分别有多少种满足上述限制的不同的操作序列能达到这些最终状态。我们说两个操作序列不同，当且仅当这两个操作序列中第 $i$ 次操作时操作了不同的五段 LED 显示器并且在某此操作后两种操作序列产生的状态不同。", "inputFormat": "第一行四个整数 $m,n,k,x$，意义见题目描述。", "outputFormat": "共 $10^m$ 行。第 $i$ 行输出一个整数表示最终状态显示的数为 $i-1$ 时所有的操作序列的个数。答案对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释\n刚开始的时候换人板上显示 $5$。因为 $k=1$。所以每次操作后换人板上都必须显示的是一个数。Matej 将会进行 $n=2$ 次操作，因此最终他可以显示出 $3$ 或 $5$ 两个数。为了显示 $3$，我们只能先将 $5$变成 $9$ 然后再将 $9$ 变成 $3$。为了显示 $5$，我们即可以通过 $5-9-5$ 的方法实现也可以通过 $5-8-5$ 的方法实现，因此有两种操作序列。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n* Subtask 1（6 pts）：$m=1$，$1 \\leq n \\leq 12$。\n* Subtask 2（15 pts）：$m=1$，$1 \\leq n \\leq 10^{15}$。\n* Subtask 3（12 pts）：$m=2$，$1 \\leq n \\leq 1500$，$k=n$。\n* Subtask 4（12 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 15$。\n* Subtask 5（15 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$，$1\\leq k \\leq 1500$。\n* Subtask 6（40 pts）：$m=2$，$1 \\leq n \\leq 10^{15}$。\n\n对于 $100\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^{15} $，$0 \\leq x \\leq 10^m$。\n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 C Semafor](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8430", "type": "P", "difficulty": 4, "samples": [["6 9\n1\n0\n0\n1\n1", "? 1 6\n\n? 1 2\n\n? 2 4\n\n? 2 5\n\n? 3 4\n\n! ((())) "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "交互题", "Special Judge", "COI（克罗地亚）"], "title": "[COI 2020] Zagrade", "background": "**本题为交互题**。\n\n众所周知，中央情报局的工作是收集，处理和分析国家安全信息。现在他们拥有了大量的计算机密码，并且正在开发一些相当复杂的工具，来破坏受密码保护的系统。\n\n现在，您的任务是破坏中央情报局服务器的安全性。自然，他们很清楚人们在输入密码的时候通常会输入什么东西，因此尝试输入 `123456` , `1q2w3e4r` 或 `Welcome` 肯定是没有用的。幸运的是，我们发现了某些可能对您有用的信息。", "description": "现在已知中央情报局服务器的主密码由 $n$ 个字符（$n$ 为偶数）构成，其中一半是左括号，一半是右括号。一些记性不好的服务器管理员会忘记这个主密码，所以服务器提供了找回密码的工具。管理员最多可以使用 $Q$ 次这个工具，每次使用时都会询问这个密码 $l$ 到 $r$ 位的括号串是否合法。\n\n对于一个括号串合法的定义：\n\n* `()` 是一个合法的括号串。\n* 若 `A` 是一个合法的括号串，那么 `(A)` 也是一个合法的括号串。\n* 若 `A` 与 `B` 都是合法的括号串，那么 `AB` 也是合法的括号串。\n\n现在你需要写出一个程序来模拟管理员找回密码的过程。\n\n在进行交互之前，您的程序应该从输入中读取偶数 $n$ 和整数 $Q$ ，这两个数字的含义见题目描述。\n\n之后，您的程序可以通过向**标准输出**输出来发送查询请求。每个查询必须在单独的行中打印，并采用 `? a b`，其中 $1 \\leq a \\leq b \\leq n$。每个查询之后，您的程序应**清空缓冲区**并从**标准输入**中读取答案。\n\n当你推理出密码时，请在**标准输出**中输出： `! x1 x2 x3 …… xn` 的形式，之后你的程序应**清空缓冲区**并正常终止程序运行。\n", "inputFormat": "第一行两个整数 $n,Q$。\n\n接下来若干行，每行对于每个查询给出答案。", "outputFormat": "若干行，表示查询。\n\n最后一行表示最后得出的答案。", "hint": "### 样例解释\n`? 1 6` 对应的是整个串，当然是合法的。  \n`? 1 2` 对应的是 `((` 不合法。  \n`? 2 4` 对应的是 `(()` 不合法。  \n`? 2 5` 对应的是 `(())` 合法。  \n`? 3 4` 对应的是 `()` 合法。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**\n\n* Subtask 1（14 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$，保证整个括号序列合法。 \n* Subtask 2（7 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$。 \n* Subtask 3（57 pts）：$1\\leq n\\leq 100000$，$Q=n-1$，保证整个括号序列合法。 \n* Subtask 4（12 pts）：$1\\leq n\\leq 100000$，$Q=n-1$。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100000$，$n-1\\leq Q$。 \n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 D Zagrade](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2020] Zagrade", "background": "**本题为交互题**。\n\n众所周知，中央情报局的工作是收集，处理和分析国家安全信息。现在他们拥有了大量的计算机密码，并且正在开发一些相当复杂的工具，来破坏受密码保护的系统。\n\n现在，您的任务是破坏中央情报局服务器的安全性。自然，他们很清楚人们在输入密码的时候通常会输入什么东西，因此尝试输入 `123456` , `1q2w3e4r` 或 `Welcome` 肯定是没有用的。幸运的是，我们发现了某些可能对您有用的信息。", "description": "现在已知中央情报局服务器的主密码由 $n$ 个字符（$n$ 为偶数）构成，其中一半是左括号，一半是右括号。一些记性不好的服务器管理员会忘记这个主密码，所以服务器提供了找回密码的工具。管理员最多可以使用 $Q$ 次这个工具，每次使用时都会询问这个密码 $l$ 到 $r$ 位的括号串是否合法。\n\n对于一个括号串合法的定义：\n\n* `()` 是一个合法的括号串。\n* 若 `A` 是一个合法的括号串，那么 `(A)` 也是一个合法的括号串。\n* 若 `A` 与 `B` 都是合法的括号串，那么 `AB` 也是合法的括号串。\n\n现在你需要写出一个程序来模拟管理员找回密码的过程。\n\n在进行交互之前，您的程序应该从输入中读取偶数 $n$ 和整数 $Q$ ，这两个数字的含义见题目描述。\n\n之后，您的程序可以通过向**标准输出**输出来发送查询请求。每个查询必须在单独的行中打印，并采用 `? a b`，其中 $1 \\leq a \\leq b \\leq n$。每个查询之后，您的程序应**清空缓冲区**并从**标准输入**中读取答案。\n\n当你推理出密码时，请在**标准输出**中输出： `! x1 x2 x3 …… xn` 的形式，之后你的程序应**清空缓冲区**并正常终止程序运行。\n", "inputFormat": "第一行两个整数 $n,Q$。\n\n接下来若干行，每行对于每个查询给出答案。", "outputFormat": "若干行，表示查询。\n\n最后一行表示最后得出的答案。", "hint": "### 样例解释\n`? 1 6` 对应的是整个串，当然是合法的。  \n`? 1 2` 对应的是 `((` 不合法。  \n`? 2 4` 对应的是 `(()` 不合法。  \n`? 2 5` 对应的是 `(())` 合法。  \n`? 3 4` 对应的是 `()` 合法。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**\n\n* Subtask 1（14 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$，保证整个括号序列合法。 \n* Subtask 2（7 pts）：$1\\leq n\\leq 1000$，$Q=\\frac{n^2}{4}$。 \n* Subtask 3（57 pts）：$1\\leq n\\leq 100000$，$Q=n-1$，保证整个括号序列合法。 \n* Subtask 4（12 pts）：$1\\leq n\\leq 100000$，$Q=n-1$。 \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100000$，$n-1\\leq Q$。 \n\n### 说明\n\n翻译自 [Croatian Olympiad in Informatics 2020 D Zagrade](https://hsin.hr/coci/archive/2019_2020/olympiad_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8431", "type": "P", "difficulty": 4, "samples": [["3\n12\n991\n114514", "11\n298\n100001"], ["2\n99999\n99998", "100000\n99998"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "二分", "洛谷原创", "O2优化", "枚举"], "title": "「WHOI-2」彗星蜜月", "background": "![](bilibili:BV11x411Q7PY)\n\n看完这首 mv 的前奏之后你应该知道 $f$ 是什么鬼了（误）。", "description": "定义 $f(x)$ 是 $x$ 的各位数码翻转以后形成的数。\n\n例如：\n\n- $f(12323)=32321$\n- $f(114514)=415411$\n- $f(250)=52$\n---\n\n给定一个 $n$。求最大的 $k$，使得对于所有处于 $[1,k]$ 区间中的正整数 $m$，有 $f(m)\\leq n$。", "inputFormat": "**本题多测**\n\n第一行一个正整数 $T$ 表示测试点数目。\n\n接下来每个测试点一个正整数 $n$。", "outputFormat": "$T$ 行，对应每个测试点的答案。", "hint": "对于测试样例 $1$：\n$f(1)=1,f(2)=2,f(3)=3,f(4)=4,f(5)=5,f(6)=6,f(7)=7,f(8)=8,f(9)=9,f(10)=1,f(11)=11,f(12)=21$。所以 $k$ 最大为 $11$。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(10pts)}:1\\leq T,n\\leq10^3$。\n- $\\text{subtask2(30pts)}:1\\leq n\\leq10^6$。\n- $\\text{subtask3(40pts)}:1\\leq n\\leq10^9$。\n- $\\text{subtask4(20pts)}:$ 无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq10^5,1\\leq n\\leq10^{18}$。\n\n提示：`unsigned long long` 可以储存 $0$ 到 $18,446,744,073,709,551,615(2^{64}-1)$ 的自然数。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」彗星蜜月", "background": "![](bilibili:BV11x411Q7PY)\n\n看完这首 mv 的前奏之后你应该知道 $f$ 是什么鬼了（误）。", "description": "定义 $f(x)$ 是 $x$ 的各位数码翻转以后形成的数。\n\n例如：\n\n- $f(12323)=32321$\n- $f(114514)=415411$\n- $f(250)=52$\n---\n\n给定一个 $n$。求最大的 $k$，使得对于所有处于 $[1,k]$ 区间中的正整数 $m$，有 $f(m)\\leq n$。", "inputFormat": "**本题多测**\n\n第一行一个正整数 $T$ 表示测试点数目。\n\n接下来每个测试点一个正整数 $n$。", "outputFormat": "$T$ 行，对应每个测试点的答案。", "hint": "对于测试样例 $1$：\n$f(1)=1,f(2)=2,f(3)=3,f(4)=4,f(5)=5,f(6)=6,f(7)=7,f(8)=8,f(9)=9,f(10)=1,f(11)=11,f(12)=21$。所以 $k$ 最大为 $11$。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(10pts)}:1\\leq T,n\\leq10^3$。\n- $\\text{subtask2(30pts)}:1\\leq n\\leq10^6$。\n- $\\text{subtask3(40pts)}:1\\leq n\\leq10^9$。\n- $\\text{subtask4(20pts)}:$ 无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq10^5,1\\leq n\\leq10^{18}$。\n\n提示：`unsigned long long` 可以储存 $0$ 到 $18,446,744,073,709,551,615(2^{64}-1)$ 的自然数。 ", "locale": "zh-CN"}}}
{"pid": "P8432", "type": "P", "difficulty": 4, "samples": [["3\n2 2\n1145 1419\n19198 12321", "2\n66937457\n949924930"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "洛谷原创", "O2优化"], "title": "「WHOI-2」ぽかぽかの星", "background": "![](bilibili:BV16J411x7nS)\n\n你在雪洞里喝着热可可数星星。但这次，星星换成了数列，不过聪明的你一定能数清楚数列的吧。", "description": "有多少个长度为 $n$ 的**正整数**数列 $a_i$ 满足：\n\n- $0<a_1\\leq a_2\\leq a_3\\dots \\leq a_n\\leq k$。\n- $\\forall i\\not = j,a_i+a_j\\not = k+1$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题多测**\n\n第一行一个正整数表示 $T$。\n\n接下来 $T$ 行，每行两个正整数表示 $n,k$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "**本题采用捆绑测试**\n\n- $\\text{subtask1(20pts)}:T=5,1\\leq n,k\\le5$。\n- $\\text{subtask2(80pts)}:$ 无特殊限制。\n\n\n对于 $100\\%$ 的数据，$T\\leq100,1\\le n,k\\le 5\\times 10^6,1\\leq  \\sum n,  \\sum  k\\le6\\times 10^7$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」ぽかぽかの星", "background": "![](bilibili:BV16J411x7nS)\n\n你在雪洞里喝着热可可数星星。但这次，星星换成了数列，不过聪明的你一定能数清楚数列的吧。", "description": "有多少个长度为 $n$ 的**正整数**数列 $a_i$ 满足：\n\n- $0<a_1\\leq a_2\\leq a_3\\dots \\leq a_n\\leq k$。\n- $\\forall i\\not = j,a_i+a_j\\not = k+1$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题多测**\n\n第一行一个正整数表示 $T$。\n\n接下来 $T$ 行，每行两个正整数表示 $n,k$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "**本题采用捆绑测试**\n\n- $\\text{subtask1(20pts)}:T=5,1\\leq n,k\\le5$。\n- $\\text{subtask2(80pts)}:$ 无特殊限制。\n\n\n对于 $100\\%$ 的数据，$T\\leq100,1\\le n,k\\le 5\\times 10^6,1\\leq  \\sum n,  \\sum  k\\le6\\times 10^7$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8433", "type": "P", "difficulty": 5, "samples": [["??", "1296"], ["?a?", "1297"], ["a?bc??", "46730"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化"], "title": "「WHOI-2」Regex", "background": " _JP 版は下記のリンクをクリックしてダウンロードしてください。_ \n\n正则表达式是文本处理的一个有用的工具。\n\n3022 年，你看到了你以前写过的一个 Python 程序，用来某插画交流网站上面下载图片。\n\n你很感兴趣，决定试着运行一下。结果因为年代久远，里面的正则表达式损坏了。你得恢复这个正则表达式。\n\n然而损坏的程度有点严重……", "description": "在这里我们只考虑正则表达式的一个子集。\n\n- **单字符**，即单独的—个字符，必须为小写字母或数字。\n\n- **单元表达式**，指的是形如 `<x>-<y>` 的三个字符组成的字符串。其中的 `<x>` 和 `<y>` 为单字符。注意：`<x>` 和 `<y>` 必须**类型相同**，即均为数字或均为小写字母。并且 `<x>` 的 ASCII 码值必须**严格小于** `<y>`。比如 `3-5`、`a-d` 是合法的，而 `7-b`、`z-3`、`8-2` 是不合法的。\n\n- **表达式**，指的是用**中括号**括起来的**一个或多个**单元表达式或单字符，比如 `[1-2]`、`[0-9a-f]`、\n`[a-chg-k]`。在这里中括号**不允许嵌套**。在右括号后面可以有星号 `*` 或加号 `+` 修饰（两者最多只能有一个，**不能同时出现**）。比如 `[3-5]*`、`[pixi-v]+`。\n\n- 一个合法的正则表达式由**一个或多个**表达式或单字符组成。比如 `0x[0-9af]*`、`1[3-7]2345`、`0[7-9]*1`。\n\n\n现在你知道这个残缺的正则表达式，其中残缺的字符用问号 `?` 表示。\n\n你需要计算出原来的正则表达式有多少种可能。\n答案可能过大，对 $1000000007$ 取模即可。\n\n", "inputFormat": "一行一个字符串，表示残缺的正则表达式。", "outputFormat": "一行一个整数，表示所求方案数取模后的结果。", "hint": "- 样例 #1： 两个问号可以任意填数字和字母，总方案数为 $36 \\times 36 = 1296$；\n- 样例 #2：除了数字字母，还可以填括号形成 `[a]`，总方案数为 $1297$；\n- 样例 #3：验题人没有给出解释。\n\n| 测试点编号 | 字符串长度范围 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $\\leq 5$ | 20 |\n| 2 | $\\leq 7$ | 20 |\n| 3 | $\\leq 100$ | 20 |\n| 4 | $\\leq 1000$  | 20 |\n| 5 | $\\leq 5000$  | 20 |\n| 6 | $\\leq 10^5$ | 0 |\n| 7 | $\\leq 5 \\times 10^5$ | 0 |\n| 8 | $\\leq 10^6$ | 0 |\n| 9 | $\\leq 5 \\times 10^6$ | 0 |\n| 10 | $\\leq 10^7$ | 0 |\n\n字符串中只会出现**小写字母、数字、问号**中的一种或几种。\n\n- **提示**：本题存在 $O(kn)$ 的解法，其中 $k$ 为常数。\n\n使用 $O(n^2)$ 的做法可以在本题得到 $100$ 分，但是会由于后五个测试点无法通过而显示为 Unaccepted。可能需要注意常数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」Regex", "background": " _JP 版は下記のリンクをクリックしてダウンロードしてください。_ \n\n正则表达式是文本处理的一个有用的工具。\n\n3022 年，你看到了你以前写过的一个 Python 程序，用来某插画交流网站上面下载图片。\n\n你很感兴趣，决定试着运行一下。结果因为年代久远，里面的正则表达式损坏了。你得恢复这个正则表达式。\n\n然而损坏的程度有点严重……", "description": "在这里我们只考虑正则表达式的一个子集。\n\n- **单字符**，即单独的—个字符，必须为小写字母或数字。\n\n- **单元表达式**，指的是形如 `<x>-<y>` 的三个字符组成的字符串。其中的 `<x>` 和 `<y>` 为单字符。注意：`<x>` 和 `<y>` 必须**类型相同**，即均为数字或均为小写字母。并且 `<x>` 的 ASCII 码值必须**严格小于** `<y>`。比如 `3-5`、`a-d` 是合法的，而 `7-b`、`z-3`、`8-2` 是不合法的。\n\n- **表达式**，指的是用**中括号**括起来的**一个或多个**单元表达式或单字符，比如 `[1-2]`、`[0-9a-f]`、\n`[a-chg-k]`。在这里中括号**不允许嵌套**。在右括号后面可以有星号 `*` 或加号 `+` 修饰（两者最多只能有一个，**不能同时出现**）。比如 `[3-5]*`、`[pixi-v]+`。\n\n- 一个合法的正则表达式由**一个或多个**表达式或单字符组成。比如 `0x[0-9af]*`、`1[3-7]2345`、`0[7-9]*1`。\n\n\n现在你知道这个残缺的正则表达式，其中残缺的字符用问号 `?` 表示。\n\n你需要计算出原来的正则表达式有多少种可能。\n答案可能过大，对 $1000000007$ 取模即可。\n\n", "inputFormat": "一行一个字符串，表示残缺的正则表达式。", "outputFormat": "一行一个整数，表示所求方案数取模后的结果。", "hint": "- 样例 #1： 两个问号可以任意填数字和字母，总方案数为 $36 \\times 36 = 1296$；\n- 样例 #2：除了数字字母，还可以填括号形成 `[a]`，总方案数为 $1297$；\n- 样例 #3：验题人没有给出解释。\n\n| 测试点编号 | 字符串长度范围 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $\\leq 5$ | 20 |\n| 2 | $\\leq 7$ | 20 |\n| 3 | $\\leq 100$ | 20 |\n| 4 | $\\leq 1000$  | 20 |\n| 5 | $\\leq 5000$  | 20 |\n| 6 | $\\leq 10^5$ | 0 |\n| 7 | $\\leq 5 \\times 10^5$ | 0 |\n| 8 | $\\leq 10^6$ | 0 |\n| 9 | $\\leq 5 \\times 10^6$ | 0 |\n| 10 | $\\leq 10^7$ | 0 |\n\n字符串中只会出现**小写字母、数字、问号**中的一种或几种。\n\n- **提示**：本题存在 $O(kn)$ 的解法，其中 $k$ 为常数。\n\n使用 $O(n^2)$ 的做法可以在本题得到 $100$ 分，但是会由于后五个测试点无法通过而显示为 Unaccepted。可能需要注意常数。", "locale": "zh-CN"}}}
{"pid": "P8434", "type": "P", "difficulty": 6, "samples": [["10\n1 2 3 4 5 5 4 3 2 1", "2"], ["9\n1 2 2 1 1 1 2 2 1", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "数学", "二分", "洛谷原创", "O2优化", "位运算", "双指针 two-pointer"], "title": "「WHOI-2」D&D", "background": "有没有发现少了什么？\n\n我们的 miku 决定出门逛街了。但是好巧不巧的就是她家里的装饰物少的可怜，并且只有一些数字可以作为装饰。\n\n但是 miku 发现如果有若干个装饰物组成的数集 $A$，那么 $A$ 的子集 $f(A)$ 是最好看的（尽管不知道为什么）。所以就有了这道题。\n\n但是因为看到了标题，所以聪明的你应该知道 miku 要去哪里了（误）。", "description": "给定**不重**集合 $A$，定义其 _装饰子集_ \n\n$$f(A)=\\{a\\in A|\\forall b\\in A-\\{a\\},a|b\\not= b \\}$$\n\n这里的 $\\texttt{“|”}$ 表示按位或；这里 $b\\in A-\\{a\\}$ 表示 $b\\in A$ 且 $b\\not=a$。\n\nmiku 有一个长度为 $n$ 的正整数序列 $a_i$。你要给这个序列连续地划分为若干个（至少一个）连续子串。要求这些连续子串元素所组成的**不重集合**的 _装饰子集_ 相同。\n\n求方案数对 $10^9+7$ 取模。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来长度为 $n$ 的正整数序列表示 $a_i$。", "outputFormat": "一行一个正整数表示答案。", "hint": "**【样例#1解释】** 可以证明，两种方法分别是：\n$$[1,2,3,4,5,5,4,3,2,1]$$\n$$[1,2,3,4,5],[5,4,3,2,1]$$\n\n这里三个子集所组成的不重集合都是 $\\{1,2,3,4,5\\}$。它们的装饰子集都是 $\\{3,5\\}$。具体说明如下：\n\n- $1:1|3=3$，故不属于。\n- $2:2|3=3$，故不属于。\n- $3:3|1=3,3|2=3,3|4=7,3|5=7$，故属于。\n- $4:4|5=5$，故不属于。\n- $5:5|1=5,5|2=7,5|3=7,5|4=5$，故属于。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(5pts)}:n\\leq10$。\n- $\\text{subtask2(10pts)}:a_i\\leq7$。\n- $\\text{subtask3(20pts)}:a_i=2^a+2^b$。其中 $a\\not = b$。\n- $\\text{subtask4(20pts)}:a_i=2^a+2^b$。其中不保证 $a\\not =b$。\n- $\\text{subtask5(10pts)}:$ 保证 $a_i$ 随机生成。\n- $\\text{subtask6(35pts)}:$ 无特殊限制。时限为 $3s$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 3\\times10^6,0\\leq a_i\\leq2\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「WHOI-2」D&D", "background": "有没有发现少了什么？\n\n我们的 miku 决定出门逛街了。但是好巧不巧的就是她家里的装饰物少的可怜，并且只有一些数字可以作为装饰。\n\n但是 miku 发现如果有若干个装饰物组成的数集 $A$，那么 $A$ 的子集 $f(A)$ 是最好看的（尽管不知道为什么）。所以就有了这道题。\n\n但是因为看到了标题，所以聪明的你应该知道 miku 要去哪里了（误）。", "description": "给定**不重**集合 $A$，定义其 _装饰子集_ \n\n$$f(A)=\\{a\\in A|\\forall b\\in A-\\{a\\},a|b\\not= b \\}$$\n\n这里的 $\\texttt{“|”}$ 表示按位或；这里 $b\\in A-\\{a\\}$ 表示 $b\\in A$ 且 $b\\not=a$。\n\nmiku 有一个长度为 $n$ 的正整数序列 $a_i$。你要给这个序列连续地划分为若干个（至少一个）连续子串。要求这些连续子串元素所组成的**不重集合**的 _装饰子集_ 相同。\n\n求方案数对 $10^9+7$ 取模。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来长度为 $n$ 的正整数序列表示 $a_i$。", "outputFormat": "一行一个正整数表示答案。", "hint": "**【样例#1解释】** 可以证明，两种方法分别是：\n$$[1,2,3,4,5,5,4,3,2,1]$$\n$$[1,2,3,4,5],[5,4,3,2,1]$$\n\n这里三个子集所组成的不重集合都是 $\\{1,2,3,4,5\\}$。它们的装饰子集都是 $\\{3,5\\}$。具体说明如下：\n\n- $1:1|3=3$，故不属于。\n- $2:2|3=3$，故不属于。\n- $3:3|1=3,3|2=3,3|4=7,3|5=7$，故属于。\n- $4:4|5=5$，故不属于。\n- $5:5|1=5,5|2=7,5|3=7,5|4=5$，故属于。\n\n---\n**本题采用捆绑测试**\n\n- $\\text{subtask1(5pts)}:n\\leq10$。\n- $\\text{subtask2(10pts)}:a_i\\leq7$。\n- $\\text{subtask3(20pts)}:a_i=2^a+2^b$。其中 $a\\not = b$。\n- $\\text{subtask4(20pts)}:a_i=2^a+2^b$。其中不保证 $a\\not =b$。\n- $\\text{subtask5(10pts)}:$ 保证 $a_i$ 随机生成。\n- $\\text{subtask6(35pts)}:$ 无特殊限制。时限为 $3s$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 3\\times10^6,0\\leq a_i\\leq2\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8435", "type": "P", "difficulty": 4, "samples": [["5 8\n1 3\n2 4\n4 3\n1 2\n4 5\n5 1\n2 4\n1 1", "1\n5 1 2 3 4 5"], ["5 3\n1 2\n2 3\n1 3", "3\n1 4\n1 5\n3 1 2 3"], ["6 5\n1 3\n2 4\n1 2\n4 6\n2 3", "4\n2 6 4\n2 4 2\n3 3 2 1\n1 5"], ["7 8\n1 3\n2 4\n3 5\n2 5\n6 4\n2 5\n6 3\n2 7", "3\n2 7 2\n5 5 2 4 6 3\n2 3 1"], ["1 1\n1 1", "1\n1 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 5000, 5000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["图论", "Special Judge", "连通块", "Tarjan", "双连通分量", "模板题"], "title": "【模板】点双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其点双连通分量的个数，并且输出每个点双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。", "outputFormat": "第一行一个整数 $x$ 表示点双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个点双连通分量。\n\n你可以以任意顺序输出点双连通分量与点双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/huvwgbuo.png)\n\n相同颜色的点为同一个分量里的结点。\n\n**温馨提示：请认真考虑孤立点与自环（样例五）的情况。**\n\n------------\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n------------\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据出了问题，已修改。\n- $2025/10/29$ [追加了一组 hack 数据](/ticket/VCUU554769)。\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】点双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其点双连通分量的个数，并且输出每个点双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。", "outputFormat": "第一行一个整数 $x$ 表示点双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个点双连通分量。\n\n你可以以任意顺序输出点双连通分量与点双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/huvwgbuo.png)\n\n相同颜色的点为同一个分量里的结点。\n\n**温馨提示：请认真考虑孤立点与自环（样例五）的情况。**\n\n------------\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n------------\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据出了问题，已修改。\n- $2025/10/29$ [追加了一组 hack 数据](/ticket/VCUU554769)。\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN"}}}
{"pid": "P8436", "type": "P", "difficulty": 4, "samples": [["5 8\n1 3\n2 4\n4 3\n1 2\n4 5\n5 1\n2 4\n1 1", "1\n5 1 5 4 2 3"], ["5 3\n1 2\n2 3\n1 3", "3\n3 1 3 2\n1 4\n1 5"], ["6 5\n1 3\n2 4\n1 2\n4 6\n2 3", "4\n3 1 2 3\n1 4\n1 5\n1 6"], ["7 8\n1 3\n2 4\n3 5\n2 5\n6 4\n2 5\n6 3\n2 7", "3\n1 1\n5 2 5 3 6 4\n1 7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 5000, 5000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "Special Judge", "连通块", "Tarjan", "双连通分量", "模板题"], "title": "【模板】边双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其边双连通分量的个数，并且输出每个边双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。\n\n**不保证图为简单图，图中可能有重边和自环。**", "outputFormat": "第一行一个整数 $x$ 表示边双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个边双连通分量。\n\n你可以以任意顺序输出边双连通分量与边双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bzdfzeq.png)\n\n相同颜色的点为同一个连通分量。\n\n\n------------\n\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据数据出了问题，已修改。\n------------\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】边双连通分量", "background": "", "description": "对于一个 $n$ 个节点 $m$ 条无向边的图，请输出其边双连通分量的个数，并且输出每个边双连通分量。", "inputFormat": "第一行，两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条无向边。\n\n**不保证图为简单图，图中可能有重边和自环。**", "outputFormat": "第一行一个整数 $x$ 表示边双连通分量的个数。\n\n接下来的 $x$ 行，每行第一个数 $a$ 表示该分量结点个数，然后 $a$ 个数，描述一个边双连通分量。\n\n你可以以任意顺序输出边双连通分量与边双连通分量内的结点。", "hint": "**样例四解释：**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bzdfzeq.png)\n\n相同颜色的点为同一个连通分量。\n\n\n------------\n\n**数据范围：**\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times10 ^5$，$1 \\le m \\le 2 \\times 10^6$。\n\n| subtask | $n$ | $m$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1 \\le n \\le 100$ | $1 \\le m \\le 500$ | $25$ |\n| $2$ | $1 \\le n \\le 5000$ | $1 \\le m \\le 5 \\times 10^4$ | $25$ |\n| $3$ | $1 \\le n \\le 2\\times 10^5$ | $1 \\le m \\le 5\\times 10^5$ | $25$ |\n| $4$ | $1 \\le n \\le 5 \\times10 ^5$ | $1 \\le m \\le 2 \\times 10^6$ | $25$ |\n\n### 数据更新\n- $2022/7/14$ 加强数据\n- $2022/11/26$  新增 $10$ 组较小的数据（$1\\le n, m \\le 10$)，方便选手调试。\n- $2022/12/31$ 重组 $subtask$，并加入若干组极端数据。\n- $2023/1/1$ 发现昨天新加入的数据数据出了问题，已修改。\n------------\n\n本题不卡常，时间限制与空间限制均已开大，正确的解法均可通过。\n\n\n------------\n\n惊喜：AC 后记得把鼠标放到测试点上看反馈信息，有惊喜哦。", "locale": "zh-CN"}}}
{"pid": "P8437", "type": "P", "difficulty": 3, "samples": [["10 6 3", "lllrrlrlll"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "伟大的神", "background": "伟大的神 $\\text{T}\\color{red}\\text{nyieldingUrilobite}$ （以下简称 TU）喜欢字符串，在 AK 了 IOI 后的第 $998244353$ 天后，伟大的神 TU 勒令小 s 找出他喜欢的字符串。\n\n否则，小 s 就要被吊打 $10^{998244353}$ 年。（虽然找出来了也要被吊打）", "description": "伟大的神 TU 认为 ，一个所有出现的字符的数量相等的字符串是属于神的，他称之为神之字符串。\n\n对于一个字符串 $S$，如果它的一个子串为神之字符串，即称这个子串为神之子串。\n\n神 TU 认为，他喜欢的字符串只能由 `l` 和 `r` 构成，并且还要满足以下条件：\n\n   - 字符串的长度为 $n$。\n   - 字符串中最长神之子串长度为 $m$。\n   - 字符串中连续的相同的字符的数量不能超过 $k$。\n\n弱小的神小 s 找不出神 TU 喜欢的字符串，现在他找到了你，你能帮帮他吗？", "inputFormat": "一行三个整数，分别为 $n,m,k$。\n\n题目保证输入的 $m$ 是偶数。", "outputFormat": "请输出任意一种神 TU 喜欢的字符串。\n\n数据保证可以找出神 TU 喜欢的字符串。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le k\\le10^5$，$4\\le m\\le n \\le 10^5$。\n\n数据保证可以找出神 TU 喜欢的字符串。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $k=1$。\n\nSubtask 2：对于另外 $10\\%$ 的数据，保证 $n=m$。\n\nSubtask 3：对于另外 $30\\%$ 的数据，保证 $k \\ge 3$。\n\nSubtask 4：无特殊性质。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "伟大的神", "background": "伟大的神 $\\text{T}\\color{red}\\text{nyieldingUrilobite}$ （以下简称 TU）喜欢字符串，在 AK 了 IOI 后的第 $998244353$ 天后，伟大的神 TU 勒令小 s 找出他喜欢的字符串。\n\n否则，小 s 就要被吊打 $10^{998244353}$ 年。（虽然找出来了也要被吊打）", "description": "伟大的神 TU 认为 ，一个所有出现的字符的数量相等的字符串是属于神的，他称之为神之字符串。\n\n对于一个字符串 $S$，如果它的一个子串为神之字符串，即称这个子串为神之子串。\n\n神 TU 认为，他喜欢的字符串只能由 `l` 和 `r` 构成，并且还要满足以下条件：\n\n   - 字符串的长度为 $n$。\n   - 字符串中最长神之子串长度为 $m$。\n   - 字符串中连续的相同的字符的数量不能超过 $k$。\n\n弱小的神小 s 找不出神 TU 喜欢的字符串，现在他找到了你，你能帮帮他吗？", "inputFormat": "一行三个整数，分别为 $n,m,k$。\n\n题目保证输入的 $m$ 是偶数。", "outputFormat": "请输出任意一种神 TU 喜欢的字符串。\n\n数据保证可以找出神 TU 喜欢的字符串。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le k\\le10^5$，$4\\le m\\le n \\le 10^5$。\n\n数据保证可以找出神 TU 喜欢的字符串。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $k=1$。\n\nSubtask 2：对于另外 $10\\%$ 的数据，保证 $n=m$。\n\nSubtask 3：对于另外 $30\\%$ 的数据，保证 $k \\ge 3$。\n\nSubtask 4：无特殊性质。\n\n", "locale": "zh-CN"}}}
{"pid": "P8438", "type": "P", "difficulty": 3, "samples": [["4\n1 2 3 4", "16"], ["30\n15942549000714163495 14973783748924019241 11750608274629447103 3841514779926491634 1491087352666302822 3926467265136890882 2165405652723005667 16850040541486744638 9389207531715430944 2453094189961991688 17306424574086088540 4253088488420240522 6711268779219669357 7357305029308027009 10742286389669332463 16939477641403891687 14194800553999397870 17414698597200046696 18113730556943709454 3735103125227126629 16235879363688955717 14861602169195639258 903677597641043180 12364536150445169736 14881735759803865853 14781978421412291657 872796319752083876 11301016179769629644 14385296580178382407 3946726419982234649 ", "13929368580789239808\n"]], "limits": {"time": [1400, 1400, 1400, 1400, 1400, 1400, 1400, 1400, 1400, 1400], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 8192, 8192, 8192, 8192]}, "tags": ["洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "极寒之地", "background": "238 神教 #1\n\n在古老的传说中，南极企鹅是全知全能的真神，它们能轻易做到任何我们做不到的事情。在南极洲的广袤大陆上，没有任何生物能对它们构成威胁。\n\n所幸，神并不是高高在上，对尘世不屑一顾的。经常有果敢的人类来到这里，运气好的话，能和神结为挚友——这是幸运的，因为神不需要从你这里得到什么，而它的力量却会一直庇佑你，直到永远。\n\n而你是一位探险家，对传说的内容十分向往。在经历了不知多久的苦索之后，你终于找到了些许神迹，并成功地找到了传说中的“神”。\n\n——并且是两位，但是……", "description": "神正在辅导孩子做数学题。在神批评孩子的心算结果从低到高第\n```plain\n17409488245517115276142322168576189279543123341138742779319865028602486509006138934460661849637882913598407636154209737260165754120014607177773359981826603801250947835120164061898414398808778383710734965109968348499255333743808806819897228289078158612425862653924618211976295200391819532525867722941969825549125083939679976935766582544161633553282536186214629150364929344059634288758125744444293077873038252037297534321132535122264070340053106750045495648216831484920706070567384926577457983022367155402606111730048301290388577089307478371008345014562035666767719162727651399592653244427923731578583241159510645308913474636528103155221748236303528072259108507905341048592541395827961771903417533241290874568077431363019042931482055932874814355268929594505880132227031337095583783793918280184860930087635658394839764586155196454253268266394562535661446268255101517600243362823434368473980088051436392198234023198989135142538928701481935979801475550928245044051159083872693810338480154137358569089360697894156\n```\n位就错了并且居然花了 \n```plain\n0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000215055865\n```\n秒才算完的时候，神的孩子发现了你，并要求你来验算一遍。\n\n你当然做不到，于是你请求缩小数据范围，而神同意了。神说，你是个勇敢的探险者，在把这道题算完之后，会与你成为朋友。\n\n现在，你只需要解决的是这么一个问题了：\n\n给定一个正整数 $n$ 和自然数序列 $a_1,a_2,\\cdots,a_n$。你需要对每一个 $0\\le S\\le 2^n-1$，求出数 $S$ 的“权值”。\n\n一个数 $S$ 的权值 $v(S)$ 的计算方式是：把它写成二进制，如果它从低到高第 $x$ 位为 $1$，就把答案异或（xor）上 $a_x$。\n\n神不想刻意刁难你，他只希望你把所有 $v(S)$ 求出来之后，把答案分别乘上对应的 $S$，然后异或起来，取模 $2^{64}$ 再交给他就好了。\n\n你心知这个问题是很好算的。但是你还是希望尽量快地把结果求出，以成为神的朋友。\n\n那么，加油吧！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个自然数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "一行一个自然数如题。", "hint": "**本题采用捆绑测试。**\n\n|数据点编号|$n$|分值|空间限制|子任务编号|\n|----|----|----|----|----|\n|$1\\sim3$|$=20$|$10$|$\\texttt{256MB}$|0|\n|$4\\sim6$|$=25$|$40$|$\\texttt{256MB}$|1|\n|$7\\sim10$|$\\le30$|$50$|$\\texttt{8MB}$|2|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 30,0\\le a_i\\le 2^{64}-1$。\n\n---\n\n### 样例解释\n\n用 $\\bigoplus$ 表示 异或。\n\n对于第一个样例，$\\text{Ans}=(0\\times 0)\\bigoplus(1\\times 1)\\bigoplus(2\\times 2)\\bigoplus(3\\times 3)\\bigoplus(4\\times 3)\\bigoplus(5\\times 2)\\bigoplus(6\\times 1)\\bigoplus(7\\times 0)\\bigoplus(8\\times 4)\\bigoplus(9\\times 5)\\bigoplus(10\\times 6)\\bigoplus(11\\times 7)\\bigoplus(12\\times 7)\\bigoplus(13\\times 6)\\bigoplus(14\\times 5)\\bigoplus(15\\times 4)=16$。\n\n---\n\n本题不需要刻意卡常，$\\texttt{1.4s}$ 已经是出题人最大的善良了，如果还跑不过那基本就一定是算法不优了。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "极寒之地", "background": "238 神教 #1\n\n在古老的传说中，南极企鹅是全知全能的真神，它们能轻易做到任何我们做不到的事情。在南极洲的广袤大陆上，没有任何生物能对它们构成威胁。\n\n所幸，神并不是高高在上，对尘世不屑一顾的。经常有果敢的人类来到这里，运气好的话，能和神结为挚友——这是幸运的，因为神不需要从你这里得到什么，而它的力量却会一直庇佑你，直到永远。\n\n而你是一位探险家，对传说的内容十分向往。在经历了不知多久的苦索之后，你终于找到了些许神迹，并成功地找到了传说中的“神”。\n\n——并且是两位，但是……", "description": "神正在辅导孩子做数学题。在神批评孩子的心算结果从低到高第\n```plain\n17409488245517115276142322168576189279543123341138742779319865028602486509006138934460661849637882913598407636154209737260165754120014607177773359981826603801250947835120164061898414398808778383710734965109968348499255333743808806819897228289078158612425862653924618211976295200391819532525867722941969825549125083939679976935766582544161633553282536186214629150364929344059634288758125744444293077873038252037297534321132535122264070340053106750045495648216831484920706070567384926577457983022367155402606111730048301290388577089307478371008345014562035666767719162727651399592653244427923731578583241159510645308913474636528103155221748236303528072259108507905341048592541395827961771903417533241290874568077431363019042931482055932874814355268929594505880132227031337095583783793918280184860930087635658394839764586155196454253268266394562535661446268255101517600243362823434368473980088051436392198234023198989135142538928701481935979801475550928245044051159083872693810338480154137358569089360697894156\n```\n位就错了并且居然花了 \n```plain\n0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000215055865\n```\n秒才算完的时候，神的孩子发现了你，并要求你来验算一遍。\n\n你当然做不到，于是你请求缩小数据范围，而神同意了。神说，你是个勇敢的探险者，在把这道题算完之后，会与你成为朋友。\n\n现在，你只需要解决的是这么一个问题了：\n\n给定一个正整数 $n$ 和自然数序列 $a_1,a_2,\\cdots,a_n$。你需要对每一个 $0\\le S\\le 2^n-1$，求出数 $S$ 的“权值”。\n\n一个数 $S$ 的权值 $v(S)$ 的计算方式是：把它写成二进制，如果它从低到高第 $x$ 位为 $1$，就把答案异或（xor）上 $a_x$。\n\n神不想刻意刁难你，他只希望你把所有 $v(S)$ 求出来之后，把答案分别乘上对应的 $S$，然后异或起来，取模 $2^{64}$ 再交给他就好了。\n\n你心知这个问题是很好算的。但是你还是希望尽量快地把结果求出，以成为神的朋友。\n\n那么，加油吧！", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个自然数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "一行一个自然数如题。", "hint": "**本题采用捆绑测试。**\n\n|数据点编号|$n$|分值|空间限制|子任务编号|\n|----|----|----|----|----|\n|$1\\sim3$|$=20$|$10$|$\\texttt{256MB}$|0|\n|$4\\sim6$|$=25$|$40$|$\\texttt{256MB}$|1|\n|$7\\sim10$|$\\le30$|$50$|$\\texttt{8MB}$|2|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 30,0\\le a_i\\le 2^{64}-1$。\n\n---\n\n### 样例解释\n\n用 $\\bigoplus$ 表示 异或。\n\n对于第一个样例，$\\text{Ans}=(0\\times 0)\\bigoplus(1\\times 1)\\bigoplus(2\\times 2)\\bigoplus(3\\times 3)\\bigoplus(4\\times 3)\\bigoplus(5\\times 2)\\bigoplus(6\\times 1)\\bigoplus(7\\times 0)\\bigoplus(8\\times 4)\\bigoplus(9\\times 5)\\bigoplus(10\\times 6)\\bigoplus(11\\times 7)\\bigoplus(12\\times 7)\\bigoplus(13\\times 6)\\bigoplus(14\\times 5)\\bigoplus(15\\times 4)=16$。\n\n---\n\n本题不需要刻意卡常，$\\texttt{1.4s}$ 已经是出题人最大的善良了，如果还跑不过那基本就一定是算法不优了。", "locale": "zh-CN"}}}
{"pid": "P8439", "type": "P", "difficulty": 6, "samples": [["4 1\n1 2\n2 3\n3 1\n1 4", "1"], ["17 9\n1 2\n1 6\n1 3\n3 4\n4 5\n5 6\n6 7\n8 10\n10 9\n10 11\n11 12\n11 13\n13 14\n14 8\n15 13\n8 16\n16 17", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "洛谷原创", "O2优化", "基环树", "洛谷月赛"], "title": "Altale (Fan-made FTR 7)", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/inglwsjz.png)](https://music.163.com/#/program?id=2067229684)\n\n为什么评级 7？\n\nPowerless：Equilibrium FTR 9.", "description": "小机器人又在钓星星了。\n\n星星在天空中形成了若干个星座，每个星座有一个“中心点”，如果星星脱离了与中心点的直接或间接的联系，那么星星就会从星座中脱离，掉落到地面上。\n\n经过小机器人日日夜夜的观测，他发现了这些星座的性质：每一个星座内部都是联通的，星星的联系的数量总与星座中星星的数量相等。\n\n另外，不同的星座之间星星没有联系，同一个星座中的星星都有间接或直接的联系。\n\n他通过观测天体运动给星星编了号，他发现每个星座的中心点都是星座中编号最小的星星。\n\n可惜的是，小机器人只能通过随（diao）缘（yu）的方式获得取消这些联系的钥匙。\n\n小机器人非常贪心，想要用尽量少的时间获得尽量多的星星。\n\n他想要 $k$ 颗星星，你能告诉他他至少需要钓上几把钥匙吗？\n\n如果你解决了这个问题，说不定小机器人会送给你几颗星星哦~\n\n**[简化题意](https://www.luogu.com.cn/paste/5nhqqjzm)**", "inputFormat": "第一行两个整数 $n,k$，表示**天空中**所有的星星的**总数**和星星之间联系**总数**，和小机器人希望获得的星星数。\n\n接下来 $n$ 行，每行两个整数 $u,v$ 表示 第 $u$ 颗和第 $v$ 颗星星之间存在联系。\n\n保证任意星座内星星联系条数等于星星数，星星不会有自己到自己的联系，不会有两条联系建立在同样两颗星星上。", "outputFormat": "一行一个整数，表示小机器人需要获得足够的星星所需最少的钥匙数。", "hint": "**本题采用捆绑测试。**\n\n设星座共有 $l$ 个。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6,1\\le k\\le n-l$。\n\nSubtask 1：对于 $20\\%$ 的数据，保证 $n\\le 1000$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $l\\le 5$。\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $l\\le 15$。\n\nSubtask 4：无特殊限制。\n\n----\n\n样例解释 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ov9db62k.png)\n\n消除 $(1,4)$ 间联系即可。\n\n样例解释 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wh22obzj.png)\n\n消除 $(8,14),(8,10),(8,16)$ 三条联系即可。\n\n可以证明没有消除联系更少的方法。\n\n可能有别的方法也仅需要消除 $3$ 条联系。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Altale (Fan-made FTR 7)", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/inglwsjz.png)](https://music.163.com/#/program?id=2067229684)\n\n为什么评级 7？\n\nPowerless：Equilibrium FTR 9.", "description": "小机器人又在钓星星了。\n\n星星在天空中形成了若干个星座，每个星座有一个“中心点”，如果星星脱离了与中心点的直接或间接的联系，那么星星就会从星座中脱离，掉落到地面上。\n\n经过小机器人日日夜夜的观测，他发现了这些星座的性质：每一个星座内部都是联通的，星星的联系的数量总与星座中星星的数量相等。\n\n另外，不同的星座之间星星没有联系，同一个星座中的星星都有间接或直接的联系。\n\n他通过观测天体运动给星星编了号，他发现每个星座的中心点都是星座中编号最小的星星。\n\n可惜的是，小机器人只能通过随（diao）缘（yu）的方式获得取消这些联系的钥匙。\n\n小机器人非常贪心，想要用尽量少的时间获得尽量多的星星。\n\n他想要 $k$ 颗星星，你能告诉他他至少需要钓上几把钥匙吗？\n\n如果你解决了这个问题，说不定小机器人会送给你几颗星星哦~\n\n**[简化题意](https://www.luogu.com.cn/paste/5nhqqjzm)**", "inputFormat": "第一行两个整数 $n,k$，表示**天空中**所有的星星的**总数**和星星之间联系**总数**，和小机器人希望获得的星星数。\n\n接下来 $n$ 行，每行两个整数 $u,v$ 表示 第 $u$ 颗和第 $v$ 颗星星之间存在联系。\n\n保证任意星座内星星联系条数等于星星数，星星不会有自己到自己的联系，不会有两条联系建立在同样两颗星星上。", "outputFormat": "一行一个整数，表示小机器人需要获得足够的星星所需最少的钥匙数。", "hint": "**本题采用捆绑测试。**\n\n设星座共有 $l$ 个。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6,1\\le k\\le n-l$。\n\nSubtask 1：对于 $20\\%$ 的数据，保证 $n\\le 1000$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $l\\le 5$。\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $l\\le 15$。\n\nSubtask 4：无特殊限制。\n\n----\n\n样例解释 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ov9db62k.png)\n\n消除 $(1,4)$ 间联系即可。\n\n样例解释 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wh22obzj.png)\n\n消除 $(8,14),(8,10),(8,16)$ 三条联系即可。\n\n可以证明没有消除联系更少的方法。\n\n可能有别的方法也仅需要消除 $3$ 条联系。", "locale": "zh-CN"}}}
{"pid": "P8440", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n14 2\n51 2\n4 2\n1919810 2", "1\n6480\n495741\n57\n936062395"], ["5\n43752 25\n26701 25\n43734 25\n37553 25\n67839 25", "252345090\n86394269\n406573405\n129371352\n118835650"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Aleph-0 (Fan-made LGC 7)", "background": "Rolling_Code 是一个喜欢音游的女孩子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnkqui18.png)\n\nRolling_Code 打 $\\aleph_0$ 的成绩如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q298dfbe.png)\n\n~~然而这并不是 IN。~~\n\n慢报：Rolling_Code 将 Aleph-0 [IN 15(15.7)] All Perfect 了！", "description": "LeaF 作为数学教师开办了一系列完美数学课堂，参加的学生包括了：Rolling_Code，你，美穗。助教：琪露诺。\n\n第一节课，考试。\n\n做出这道题目的同学可以获得特殊版 $\\aleph_0$ 的率先游玩机会哦！——LeaF\n\n~~Aleph-0 (Legacy - SP Lv.?)~~\n\nRolling_Code 对音游非常感兴趣，所以也非常想要获得这首曲子。但是它打开题面的时候震惊了：\n\n> $f(x)=\\begin{cases}0&x=0\\\\1&x=1\\\\2f(\\frac{x}{2})&2|x\\operatorname{and} x>0 \\\\ 2f(\\frac{x-1}{2})+\\frac{2}{x-1}f(\\frac{x-1}{2})+x&\\text{otherwise}\\end{cases}$\n\n求 $S=\\left(\\sum\\limits_{i=0}^{r} f^k(i)\\right)\\bmod (10^9+7)$。\n\n其中 $f^k(i)=(f(i))^k$。\n\n本来是想要求 $r\\rightarrow\\aleph_0$ 的答案，可惜了啊，没有被定义，那就把 $r$ 范围放小一点吧。——LeaF\n\n由于某些原因，LeaF 定义 $0^0=1$。\n\n为了增加趣味，LeaF 还增加了多次对于 $r,k$ 的询问。\n\nRolling_Code 不会做，因此找你求助。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个数字 $t$，代表数据组数。\n\n接下来 $t$ 行每行两个数字 $r_i,k_i$，表示第 $i$ 次询问中的 $r,k$。\n", "outputFormat": "每行一个数字 $S_i$，表示第 $i$ 次询问的答案。\n", "hint": "\n**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10^3,1\\le r\\le 2^{63}-1,0\\le k\\le 30$。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $1\\le t\\le 100,1\\le r\\le 10^4$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^5$，**依赖于 Subtask 1**。\n\nSubtask 3：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^6,k$ 为定值。\n\nSubtask 4：对于 $25\\%$ 的数据：保证 $k=2$。\n\nSubtask 5：对于最后 $50\\%$ 的数据，无特殊限制，**依赖于 Subtask 1，2，3，4**。\n\n---\n\n### 样例解释\n\n$f_0=0,f_1=1,f_2=2,f_3=6,f_4=4$。\n\n对于 $r=4,k=2$ 的情况，$\\text{Ans}=0^2+1^2+2^2+6^2+4^2=57$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Aleph-0 (Fan-made LGC 7)", "background": "Rolling_Code 是一个喜欢音游的女孩子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnkqui18.png)\n\nRolling_Code 打 $\\aleph_0$ 的成绩如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q298dfbe.png)\n\n~~然而这并不是 IN。~~\n\n慢报：Rolling_Code 将 Aleph-0 [IN 15(15.7)] All Perfect 了！", "description": "LeaF 作为数学教师开办了一系列完美数学课堂，参加的学生包括了：Rolling_Code，你，美穗。助教：琪露诺。\n\n第一节课，考试。\n\n做出这道题目的同学可以获得特殊版 $\\aleph_0$ 的率先游玩机会哦！——LeaF\n\n~~Aleph-0 (Legacy - SP Lv.?)~~\n\nRolling_Code 对音游非常感兴趣，所以也非常想要获得这首曲子。但是它打开题面的时候震惊了：\n\n> $f(x)=\\begin{cases}0&x=0\\\\1&x=1\\\\2f(\\frac{x}{2})&2|x\\operatorname{and} x>0 \\\\ 2f(\\frac{x-1}{2})+\\frac{2}{x-1}f(\\frac{x-1}{2})+x&\\text{otherwise}\\end{cases}$\n\n求 $S=\\left(\\sum\\limits_{i=0}^{r} f^k(i)\\right)\\bmod (10^9+7)$。\n\n其中 $f^k(i)=(f(i))^k$。\n\n本来是想要求 $r\\rightarrow\\aleph_0$ 的答案，可惜了啊，没有被定义，那就把 $r$ 范围放小一点吧。——LeaF\n\n由于某些原因，LeaF 定义 $0^0=1$。\n\n为了增加趣味，LeaF 还增加了多次对于 $r,k$ 的询问。\n\nRolling_Code 不会做，因此找你求助。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个数字 $t$，代表数据组数。\n\n接下来 $t$ 行每行两个数字 $r_i,k_i$，表示第 $i$ 次询问中的 $r,k$。\n", "outputFormat": "每行一个数字 $S_i$，表示第 $i$ 次询问的答案。\n", "hint": "\n**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n对于 $100\\%$ 的数据，保证 $1\\le t\\le 10^3,1\\le r\\le 2^{63}-1,0\\le k\\le 30$。\n\nSubtask 1：对于 $5\\%$ 的数据，保证 $1\\le t\\le 100,1\\le r\\le 10^4$。\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^5$，**依赖于 Subtask 1**。\n\nSubtask 3：对于 $10\\%$ 的数据，保证 $1\\le t\\le 1000,1\\le r\\le 10^6,k$ 为定值。\n\nSubtask 4：对于 $25\\%$ 的数据：保证 $k=2$。\n\nSubtask 5：对于最后 $50\\%$ 的数据，无特殊限制，**依赖于 Subtask 1，2，3，4**。\n\n---\n\n### 样例解释\n\n$f_0=0,f_1=1,f_2=2,f_3=6,f_4=4$。\n\n对于 $r=4,k=2$ 的情况，$\\text{Ans}=0^2+1^2+2^2+6^2+4^2=57$。", "locale": "zh-CN"}}}
{"pid": "P8441", "type": "P", "difficulty": 6, "samples": [["II\n11 13\n1 6 8 4\n2 7 7\n2 2 4\n2 11 11\n1 1 11 2\n1 5 5 5\n1 8 11 3\n2 1 8\n1 5 10 2\n1 2 4 4\n2 2 10\n2 3 9\n2 2 4", "4\n0\n0\n14\n14\n14\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "旭日东升", "background": "238 神教 #3\n\n——还有多久，太阳才会出来？\n\n——不知道……\n\n在古老的传说中，你家附近的小村，由于惹怒了太阳神而被罚去了日光。庄稼纷纷枯死了，人们在寒冷与饥饿中求生。而小村的附近，除了你家以外，就是一片大荒。\n\n神学开始在小村中兴起。越来越多的人成为了神学家，在当年集资修建的图书馆中没日没夜地研读着古籍。终于，大家在图书馆仓库的一个阴暗潮湿的角落里发现了一本——\n\n古老而破旧的，据说早已失传的《祈日术》。", "description": "书里的许多记载已不可辨识。根据残存的篇章，大家只能推测是要举办一场比赛，非常困难的比赛。至于比完之后怎么处理，完全没有头绪。\n\n但大家决定试试，哪怕是自己摸索呢？\n\n于是当你路过村子的时候，便看见展板上挂了这么一道题——唯一的比赛题。\n\n> 维护一个不可重集合的序列 $a$，长度为 $n$。支持以下两种操作：\n> 1. 给定 $l,r,x$，对于每个 $l\\le i\\le r$，将 $x$ 并入 $a_i$。\n> 2. 给定 $l,r$，设 $S$ 把每个 $l\\le i\\le r$ 的 $a_i$ 并在一起的集合，输出 $S$ 中所有元素的和。\n\n你看了看自己随身带着的电脑，决定去捧（za）个场。\n\n那么，加油吧！", "inputFormat": "输入数据的起始会有一个长度为 $2$ 的字符串，见【提示说明】处。它们可以用来帮你快速判断数据性质。\n\n第二行两个正整数 $n,m$ 表示集合序列的长度和操作的次数，初始的集合 $a_1,a_2,\\cdots,a_n$ 均为空。\n\n接下来 $m$ 行每行先是三个正整数 $op,l,r$ 如题。如果 $op=1$，那么这一行还会有一个正整数 $x$ 如题。", "outputFormat": "对于每行 $op=2$ 的输入，分别输出一个正整数，依次表示每次查询的结果。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m,x\\le10^5,1\\le l\\le r\\le n$。\n\nSubtask 1：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le100$;\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PP`;\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `IP`;\n\nSubtask 4：对于 $30\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PI`;\n\nSubtask 5：对于最后 $30\\%$ 的数据，无特殊限制。\n\n---\n\n输入第一行的字符串作用：该字符串包含两个为 `P` 或 `I` 的字符。如果第一个字符为 `P`，那么所有修改操作均满足 $l=r$；如果第二个字符为 `P`，那么所有查询操作均满足 $l=r$。对应位置为 `I` 表示无限制。\n\n---\n\n毫无疑问，你获得了第一名。\n\n“好的，那么我们现在来宣读获奖名单！”\n\n“第三名：……”（掌声，颁奖）\n\n“第二名：……”（掌声，颁奖）\n\n“第一……”\n\n主持人突然停下来，揉揉眼睛，随即惶恐地看着天空。附近的人们好奇地凑上去看主持人手中的名单。只见第一名的名字正以一种不可名状的方式剧烈扭曲重构着，反复地在两种不同形态之间变换。\n\n名单的上方突然出现了几个字符。随着字符逐渐变得清晰，人们看清了，是四个意义不明，但看着十分不耐烦的字符：“div1”。\n\n这时，第一名的名字的变动也稳定了下来——就好像其中有一方主动退出了一样。\n\n最终，名字固定在了五个字母：“David”。这并不是你随口报的那个假名。\n\n人们又随主持人一并看向天际，一个看着大概五六岁的孩子正跌跌撞撞地跑来。“我是第一名！”他高兴地笑着。他的母亲——太阳神就站在远方，一脸怜爱地看着那个小小的背影。\n\n一轮红日从地平线上喷薄而出。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "旭日东升", "background": "238 神教 #3\n\n——还有多久，太阳才会出来？\n\n——不知道……\n\n在古老的传说中，你家附近的小村，由于惹怒了太阳神而被罚去了日光。庄稼纷纷枯死了，人们在寒冷与饥饿中求生。而小村的附近，除了你家以外，就是一片大荒。\n\n神学开始在小村中兴起。越来越多的人成为了神学家，在当年集资修建的图书馆中没日没夜地研读着古籍。终于，大家在图书馆仓库的一个阴暗潮湿的角落里发现了一本——\n\n古老而破旧的，据说早已失传的《祈日术》。", "description": "书里的许多记载已不可辨识。根据残存的篇章，大家只能推测是要举办一场比赛，非常困难的比赛。至于比完之后怎么处理，完全没有头绪。\n\n但大家决定试试，哪怕是自己摸索呢？\n\n于是当你路过村子的时候，便看见展板上挂了这么一道题——唯一的比赛题。\n\n> 维护一个不可重集合的序列 $a$，长度为 $n$。支持以下两种操作：\n> 1. 给定 $l,r,x$，对于每个 $l\\le i\\le r$，将 $x$ 并入 $a_i$。\n> 2. 给定 $l,r$，设 $S$ 把每个 $l\\le i\\le r$ 的 $a_i$ 并在一起的集合，输出 $S$ 中所有元素的和。\n\n你看了看自己随身带着的电脑，决定去捧（za）个场。\n\n那么，加油吧！", "inputFormat": "输入数据的起始会有一个长度为 $2$ 的字符串，见【提示说明】处。它们可以用来帮你快速判断数据性质。\n\n第二行两个正整数 $n,m$ 表示集合序列的长度和操作的次数，初始的集合 $a_1,a_2,\\cdots,a_n$ 均为空。\n\n接下来 $m$ 行每行先是三个正整数 $op,l,r$ 如题。如果 $op=1$，那么这一行还会有一个正整数 $x$ 如题。", "outputFormat": "对于每行 $op=2$ 的输入，分别输出一个正整数，依次表示每次查询的结果。", "hint": "**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，保证 $1\\le n,m,x\\le10^5,1\\le l\\le r\\le n$。\n\nSubtask 1：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le100$;\n\nSubtask 2：对于 $10\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PP`;\n\nSubtask 3：对于 $20\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `IP`;\n\nSubtask 4：对于 $30\\%$ 的数据，保证 $1\\le n,m,x\\le10^5$，第一行的字符串为 `PI`;\n\nSubtask 5：对于最后 $30\\%$ 的数据，无特殊限制。\n\n---\n\n输入第一行的字符串作用：该字符串包含两个为 `P` 或 `I` 的字符。如果第一个字符为 `P`，那么所有修改操作均满足 $l=r$；如果第二个字符为 `P`，那么所有查询操作均满足 $l=r$。对应位置为 `I` 表示无限制。\n\n---\n\n毫无疑问，你获得了第一名。\n\n“好的，那么我们现在来宣读获奖名单！”\n\n“第三名：……”（掌声，颁奖）\n\n“第二名：……”（掌声，颁奖）\n\n“第一……”\n\n主持人突然停下来，揉揉眼睛，随即惶恐地看着天空。附近的人们好奇地凑上去看主持人手中的名单。只见第一名的名字正以一种不可名状的方式剧烈扭曲重构着，反复地在两种不同形态之间变换。\n\n名单的上方突然出现了几个字符。随着字符逐渐变得清晰，人们看清了，是四个意义不明，但看着十分不耐烦的字符：“div1”。\n\n这时，第一名的名字的变动也稳定了下来——就好像其中有一方主动退出了一样。\n\n最终，名字固定在了五个字母：“David”。这并不是你随口报的那个假名。\n\n人们又随主持人一并看向天际，一个看着大概五六岁的孩子正跌跌撞撞地跑来。“我是第一名！”他高兴地笑着。他的母亲——太阳神就站在远方，一脸怜爱地看着那个小小的背影。\n\n一轮红日从地平线上喷薄而出。", "locale": "zh-CN"}}}
{"pid": "P8442", "type": "P", "difficulty": 7, "samples": [["5 7\n5 5\n5 4\n5 5\n5 9", "14\n2\n6\n2\n72"], ["100000 998684\n100000 998671\n100000 998110", "513030267786335\n0\n570065615362699"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "lgdAKIOI", "background": "本题中出现的神犇：[_lgswdn](https://www.luogu.com.cn/user/180652)\n\nAK 完 NOI 后，lgd 一路势不可挡，不久便进入了国家队，来到了 IOI 赛场。", "description": "6ms 后，lgd 写对了最后一题的\n\n```plain\n可持久化非确定状态AC自动分块维护线段平衡仙人掌优化最小费用最大流预处理混合图上莫比乌斯反演莫队带花舞蹈链并查集树状数组套主席树预处理动态DP分治FFT求多项式逆元对数函数的指数函数用可持久化并查集合并最小费用循环流上插头DP\n```\n算法，AK 了 IOI。于是他闲着无聊，开始给自己出题。\n\n有一题是这样的：\n\n$n$ 个同学站成一个圆圈，其中的一个同学手里拿着一个球。每一次，手里有球的同学可以把球传给自己左右的两个同学中的一个（左右任意）。那么有多少种不同的传球方法可以使得从 lgd 手里开始传的球，传了 $m$ 次以后，又回到 lgd 自己手里呢？两种传球方法被视作不同的方法，当且仅当这两种方法中，接到球的同学按接球顺序组成的序列是不同的。\n\n你听说这道题之后，希望把它做出来，以不遭到 lgd 的鄙视。由于 lgd 比较仁慈，他允许你只告诉他答案取模 $720000054000001$ 的余数就好了。", "inputFormat": "此题有多组数据。\n\n对于每组数据，一行两个正整数 $n,m$，含义如题。", "outputFormat": "对于每组数据，一行一个自然数表示答案。", "hint": "**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n**请注意常数因子带来的程序效率及空间占用上的影响。**\n\n数据范围如下表所示。\n\n|数据点编号|$n$|$m$|数据组数|分值|特殊性质|子任务编号|\n|----|----|----|----|----|----|----|\n|$1\\sim6$|$=100$|$\\le100$|$\\le5$|$5$|A|0|\n|$7\\sim12$|$=10^5$|$\\le10^6$|$\\le5$|$15$|A|1|\n|$13\\sim18$|$=10^6$|$\\le2\\times10^6$|$\\le5$|$10$|A|2|\n|$19\\sim24$|$=2\\times10^5$|$\\le10^{1000}$|$\\le5$|$20$|A|3|\n|$25\\sim30$|$\\le6\\times10^6$|$\\le10^{30}$|$\\le50$|$20$||4|\n|$31\\sim36$|$\\le6\\times10^6$|$\\le10^{10^4}$|$\\le2500$|$30$||5|\n\n特殊性质 A：所有输入的 $n$ 全部相同。\n\n对于 $100\\%$ 的数据，$n\\in\\{10,13,100,10^3,10^4,10^5,2\\times10^5,6\\times10^5,10^6,6\\times10^6\\}$。\n\n---\n\nlgd 把这题交给你的时候同时给了你另外一段代码，不过有什么用就不知道了。\n\n```cpp\ntypedef long long i64;\ntypedef unsigned long long u64;\ntypedef __uint128_t u128;\nstruct Mod64 {\n  Mod64() : n(0) {}\n  Mod64(u64 n) : n(init(n)) {}\n  static u64 modulus() { return mod; }\n  static u64 init(u64 w) { return reduce(u128(w) * r2); }\n  static void setmod(u64 m) {\n    mod = m;\n    inv = 1;\n    for (int i = 0; i < 6; ++i) inv *= 2 + inv * m;\n    r2 = -u128(m) % m;\n  }\n  static u64 reduce(u128 x) {\n    u64 y = (x + u128(u64(x) * inv) * mod) >> 64;\n    return i64(y) > mod ? y - mod : y;\n  }\n  Mod64& operator+=(Mod64 rhs) {\n    n += rhs.n - mod;\n    if (i64(n) < 0) n += mod;\n    return *this;\n  }\n  Mod64& operator-=(Mod64 rhs) {\n    if (n < rhs.n)\n      n += mod - rhs.n;\n    else\n      n -= rhs.n;\n    return *this;\n  }\n  Mod64 operator-() const {\n    if (!n) return *this;\n    Mod64 rhs;\n    rhs.n = mod - n;\n    return rhs;\n  }\n  Mod64 operator+(Mod64 rhs) const { return Mod64(*this) += rhs; }\n  Mod64 operator-(Mod64 rhs) const { return Mod64(*this) -= rhs; }\n  Mod64& operator*=(Mod64 rhs) {\n    n = reduce(u128(n) * rhs.n);\n    return *this;\n  }\n  Mod64 operator*(Mod64 rhs) const { return Mod64(*this) *= rhs; }\n  u64 get() const { return reduce(n); }\n  static u64 mod, inv, r2;\n  u64 n;\n};\nu64 Mod64::mod, Mod64::inv, Mod64::r2;\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "lgdAKIOI", "background": "本题中出现的神犇：[_lgswdn](https://www.luogu.com.cn/user/180652)\n\nAK 完 NOI 后，lgd 一路势不可挡，不久便进入了国家队，来到了 IOI 赛场。", "description": "6ms 后，lgd 写对了最后一题的\n\n```plain\n可持久化非确定状态AC自动分块维护线段平衡仙人掌优化最小费用最大流预处理混合图上莫比乌斯反演莫队带花舞蹈链并查集树状数组套主席树预处理动态DP分治FFT求多项式逆元对数函数的指数函数用可持久化并查集合并最小费用循环流上插头DP\n```\n算法，AK 了 IOI。于是他闲着无聊，开始给自己出题。\n\n有一题是这样的：\n\n$n$ 个同学站成一个圆圈，其中的一个同学手里拿着一个球。每一次，手里有球的同学可以把球传给自己左右的两个同学中的一个（左右任意）。那么有多少种不同的传球方法可以使得从 lgd 手里开始传的球，传了 $m$ 次以后，又回到 lgd 自己手里呢？两种传球方法被视作不同的方法，当且仅当这两种方法中，接到球的同学按接球顺序组成的序列是不同的。\n\n你听说这道题之后，希望把它做出来，以不遭到 lgd 的鄙视。由于 lgd 比较仁慈，他允许你只告诉他答案取模 $720000054000001$ 的余数就好了。", "inputFormat": "此题有多组数据。\n\n对于每组数据，一行两个正整数 $n,m$，含义如题。", "outputFormat": "对于每组数据，一行一个自然数表示答案。", "hint": "**本题采用捆绑测试。**\n\n**本题有多组数据。**\n\n**请注意常数因子带来的程序效率及空间占用上的影响。**\n\n数据范围如下表所示。\n\n|数据点编号|$n$|$m$|数据组数|分值|特殊性质|子任务编号|\n|----|----|----|----|----|----|----|\n|$1\\sim6$|$=100$|$\\le100$|$\\le5$|$5$|A|0|\n|$7\\sim12$|$=10^5$|$\\le10^6$|$\\le5$|$15$|A|1|\n|$13\\sim18$|$=10^6$|$\\le2\\times10^6$|$\\le5$|$10$|A|2|\n|$19\\sim24$|$=2\\times10^5$|$\\le10^{1000}$|$\\le5$|$20$|A|3|\n|$25\\sim30$|$\\le6\\times10^6$|$\\le10^{30}$|$\\le50$|$20$||4|\n|$31\\sim36$|$\\le6\\times10^6$|$\\le10^{10^4}$|$\\le2500$|$30$||5|\n\n特殊性质 A：所有输入的 $n$ 全部相同。\n\n对于 $100\\%$ 的数据，$n\\in\\{10,13,100,10^3,10^4,10^5,2\\times10^5,6\\times10^5,10^6,6\\times10^6\\}$。\n\n---\n\nlgd 把这题交给你的时候同时给了你另外一段代码，不过有什么用就不知道了。\n\n```cpp\ntypedef long long i64;\ntypedef unsigned long long u64;\ntypedef __uint128_t u128;\nstruct Mod64 {\n  Mod64() : n(0) {}\n  Mod64(u64 n) : n(init(n)) {}\n  static u64 modulus() { return mod; }\n  static u64 init(u64 w) { return reduce(u128(w) * r2); }\n  static void setmod(u64 m) {\n    mod = m;\n    inv = 1;\n    for (int i = 0; i < 6; ++i) inv *= 2 + inv * m;\n    r2 = -u128(m) % m;\n  }\n  static u64 reduce(u128 x) {\n    u64 y = (x + u128(u64(x) * inv) * mod) >> 64;\n    return i64(y) > mod ? y - mod : y;\n  }\n  Mod64& operator+=(Mod64 rhs) {\n    n += rhs.n - mod;\n    if (i64(n) < 0) n += mod;\n    return *this;\n  }\n  Mod64& operator-=(Mod64 rhs) {\n    if (n < rhs.n)\n      n += mod - rhs.n;\n    else\n      n -= rhs.n;\n    return *this;\n  }\n  Mod64 operator-() const {\n    if (!n) return *this;\n    Mod64 rhs;\n    rhs.n = mod - n;\n    return rhs;\n  }\n  Mod64 operator+(Mod64 rhs) const { return Mod64(*this) += rhs; }\n  Mod64 operator-(Mod64 rhs) const { return Mod64(*this) -= rhs; }\n  Mod64& operator*=(Mod64 rhs) {\n    n = reduce(u128(n) * rhs.n);\n    return *this;\n  }\n  Mod64 operator*(Mod64 rhs) const { return Mod64(*this) *= rhs; }\n  u64 get() const { return reduce(n); }\n  static u64 mod, inv, r2;\n  u64 n;\n};\nu64 Mod64::mod, Mod64::inv, Mod64::r2;\n```", "locale": "zh-CN"}}}
{"pid": "P8443", "type": "P", "difficulty": 1, "samples": [["4\n3 6 1\n8 11 4\n4 4 3\n7 16 2", "1\n2\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "gcd.", "background": "与你借星火，容我题山河。", "description": "$T$ 组数据，每一组数据给定 $l,r,x$，试求：$\\gcd(\\lfloor \\frac{l}{x}\\rfloor,\\lfloor \\frac{l+1}{x}\\rfloor,\\cdots,\\lfloor \\frac{r}{x}\\rfloor)$ 的值。\n\n- 其中 $\\gcd$ 表示求最大公约数，例如 $\\gcd(6,9)=3$，$\\gcd(2,4,8)=2$，$\\gcd(5,6,7)=1$。特别地，我们定义一个正整数的最大公约数是它自身。\n- $\\lfloor x \\rfloor$ 表示 $x$ 向下取整，例如 $\\lfloor 3.14 \\rfloor=3$。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数。\n\n对于每一组数据，输入一行三个正整数 $l,r,x$，以空格隔开。", "outputFormat": "对于每一组数据，输出一行，一个正整数表示答案。", "hint": "**【样例解释和说明】**\n\n样例中的 $T=4$，说明有 $4$ 组数据。\n\n- 对于第一组数据，$l=3,r=6,x=1$，即求 $\\gcd(\\lfloor \\frac{3}{1}\\rfloor,\\lfloor \\frac{4}{1} \\rfloor, \\lfloor \\frac{5}{1}\\rfloor,\\lfloor \\frac{6}{1}\\rfloor)=1$。\n- 对于第二组数据，$l=8,r=11,x=4$，即求 $\\gcd(\\lfloor \\frac{8}{4} \\rfloor,\\lfloor \\frac{9}{4} \\rfloor,\\lfloor \\frac{10}{4}\\rfloor,\\lfloor \\frac{11}{4}\\rfloor)=\\gcd(2,2,2,2)=2$。\n- 对于第三组数据，$l=4,r=4,x=3$，即求 $\\gcd(\\lfloor \\frac{4}{3}\\rfloor)=1$。\n- 对于第四组数据，类似可得结果是 $1$。\n\n**【数据范围】**\n\n- 对于 $10\\%$ 的数据，$x=1$。\n- 另有 $10\\%$ 的数据，$l=r$。\n- 另有 $20\\%$ 的数据，$r-l \\leq 10^5$。\n- 对于上述的前 $40\\%$ 的数据，$1 \\leq x \\leq l \\leq r \\leq 10^9$。\n- 对于所有数据，$1 \\leq x \\leq l \\leq r \\leq 10^{18}$，$1 \\leq T \\leq 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "gcd.", "background": "与你借星火，容我题山河。", "description": "$T$ 组数据，每一组数据给定 $l,r,x$，试求：$\\gcd(\\lfloor \\frac{l}{x}\\rfloor,\\lfloor \\frac{l+1}{x}\\rfloor,\\cdots,\\lfloor \\frac{r}{x}\\rfloor)$ 的值。\n\n- 其中 $\\gcd$ 表示求最大公约数，例如 $\\gcd(6,9)=3$，$\\gcd(2,4,8)=2$，$\\gcd(5,6,7)=1$。特别地，我们定义一个正整数的最大公约数是它自身。\n- $\\lfloor x \\rfloor$ 表示 $x$ 向下取整，例如 $\\lfloor 3.14 \\rfloor=3$。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数。\n\n对于每一组数据，输入一行三个正整数 $l,r,x$，以空格隔开。", "outputFormat": "对于每一组数据，输出一行，一个正整数表示答案。", "hint": "**【样例解释和说明】**\n\n样例中的 $T=4$，说明有 $4$ 组数据。\n\n- 对于第一组数据，$l=3,r=6,x=1$，即求 $\\gcd(\\lfloor \\frac{3}{1}\\rfloor,\\lfloor \\frac{4}{1} \\rfloor, \\lfloor \\frac{5}{1}\\rfloor,\\lfloor \\frac{6}{1}\\rfloor)=1$。\n- 对于第二组数据，$l=8,r=11,x=4$，即求 $\\gcd(\\lfloor \\frac{8}{4} \\rfloor,\\lfloor \\frac{9}{4} \\rfloor,\\lfloor \\frac{10}{4}\\rfloor,\\lfloor \\frac{11}{4}\\rfloor)=\\gcd(2,2,2,2)=2$。\n- 对于第三组数据，$l=4,r=4,x=3$，即求 $\\gcd(\\lfloor \\frac{4}{3}\\rfloor)=1$。\n- 对于第四组数据，类似可得结果是 $1$。\n\n**【数据范围】**\n\n- 对于 $10\\%$ 的数据，$x=1$。\n- 另有 $10\\%$ 的数据，$l=r$。\n- 另有 $20\\%$ 的数据，$r-l \\leq 10^5$。\n- 对于上述的前 $40\\%$ 的数据，$1 \\leq x \\leq l \\leq r \\leq 10^9$。\n- 对于所有数据，$1 \\leq x \\leq l \\leq r \\leq 10^{18}$，$1 \\leq T \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P8444", "type": "P", "difficulty": 2, "samples": [["3 \n1 1 2\n5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷原创", "洛谷月赛"], "title": "不等价交换法则", "background": "天弓千亦，市场之神，拥有着剥夺所有权的能力。\n\n她希望着重建市场，在严格而公正的交易中一点点恢复自己的神力。但她看向世间一处处交易之所时，无力感却又遮住了她心中虹色的月光，把她的不甘一点点化作现实的泪。\n\n她一次次在梦中经历着那个晚上。孤独的、神力尽失的她，紧紧攥住她那空白的卡牌，却被灵梦一把夺走。最后一张希望，也伴着虹色的月，消逝在永远的幻想中了。\n\n也许交易本身就是不等价的吧，她想。", "description": "你有 $n$ **件**商品可以买，其中第 $i$ 件的价格为 $a_i$。\n\n蓝会给出一个正整数 $w$，代表你有 $w$ 元钱。你仅可以选择**一件**商品购买。店主允许你用已有的商品交换剩余的商品（当然了，也可以不换），但你交换获得的商品的价值和必须小于等于你用于交换的商品价值和。你想要知道，你最多能获得多少件商品。\n\n注意：不能用空集交换其他商品。", "inputFormat": "第一行一个正整数 $n$，表示商品个数。\n\n接下来一行 $n$ 个正整数，表示 $\\{a_n\\}$。\n\n接下来一行 $1$ 个正整数，表示 $w$。", "outputFormat": "一个正整数，表示询问的结果。 ", "hint": "【样例解释】\n\n买价值为 $2$ 的物品，并交换为两个价值为 $1$ 的物品。\n\n【数据范围及约束】\n\n对于 $40\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq10^6$，$0 \\leq a_i\\leq 10^9$，$1 \\leq w\\leq2\\times10^{9}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不等价交换法则", "background": "天弓千亦，市场之神，拥有着剥夺所有权的能力。\n\n她希望着重建市场，在严格而公正的交易中一点点恢复自己的神力。但她看向世间一处处交易之所时，无力感却又遮住了她心中虹色的月光，把她的不甘一点点化作现实的泪。\n\n她一次次在梦中经历着那个晚上。孤独的、神力尽失的她，紧紧攥住她那空白的卡牌，却被灵梦一把夺走。最后一张希望，也伴着虹色的月，消逝在永远的幻想中了。\n\n也许交易本身就是不等价的吧，她想。", "description": "你有 $n$ **件**商品可以买，其中第 $i$ 件的价格为 $a_i$。\n\n蓝会给出一个正整数 $w$，代表你有 $w$ 元钱。你仅可以选择**一件**商品购买。店主允许你用已有的商品交换剩余的商品（当然了，也可以不换），但你交换获得的商品的价值和必须小于等于你用于交换的商品价值和。你想要知道，你最多能获得多少件商品。\n\n注意：不能用空集交换其他商品。", "inputFormat": "第一行一个正整数 $n$，表示商品个数。\n\n接下来一行 $n$ 个正整数，表示 $\\{a_n\\}$。\n\n接下来一行 $1$ 个正整数，表示 $w$。", "outputFormat": "一个正整数，表示询问的结果。 ", "hint": "【样例解释】\n\n买价值为 $2$ 的物品，并交换为两个价值为 $1$ 的物品。\n\n【数据范围及约束】\n\n对于 $40\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq10^6$，$0 \\leq a_i\\leq 10^9$，$1 \\leq w\\leq2\\times10^{9}$。\n", "locale": "zh-CN"}}}
{"pid": "P8445", "type": "P", "difficulty": 4, "samples": [["5\n0 1 0 1 2\n0 2 0 1 0", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "射命丸文的取材之旅", "background": "射命丸文（Syameimaru Aya）是一只鸦天狗。她不定期制作名为「文文。新闻」的报纸，而为此，她需要对她收集到的新闻进行剪裁。", "description": "射命丸文现在收集到了 $2n$ 条新闻。她想要将其刊登于自己的报刊之上。然而，自己的报刊最多只能刊登 $n$ 条新闻。\n\n为了能在 $n$ 条新闻的篇幅中让自己的报刊得到最大的吸引力，她将这 $2n$ 条新闻**等分**成**两份**，即每一份中均有 $n$ 条新闻。\n\n每一条新闻自然有着其吸引力。在**第一份**中，第 $i$ 条新闻有着吸引力 $a_i$，而在**第二份**中，第 $i$ 条新闻有着吸引力 $b_i$。这两份新闻的划分在输入时已经给定。\n\n现在射命丸文要从中选取新闻放入自己的报刊。报刊上的第 $i$ 条新闻，将选择**第一份**新闻的第 $i$ 条或**第二份**新闻的第 $i$ 条。这样，报刊上的新闻就可以构成一个长度为 $n$ 的序列，第 $i$ 项也就是第 $i$ 条新闻有着吸引力 $c_i \\in \\{a_i,b_i\\}$。\n\n而这样的一份报刊有着其综合影响力。根据射命丸文的经验，对于她这样的一份含有 $n$ 条新闻的报刊，其综合影响力为：\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n其中 $\\operatorname{mex}\\{c_l,c_{l+1},\\dots,c_{r-1},c_r\\}$ 指的是 $c_l,c_{l+1},\\dots,c_{r-1},c_r$ 中没有出现过的**最小非负整数**。\n\n现在她希望知道，在进行这些操作之后，自己的报刊的**最大**的综合影响力会是多少呢？由于她还要继续取材，因此她把这个任务交付给了你。\n\n【形式化题意】\n\n给定序列 $\\{a_n\\},\\{b_n\\}$，求一个序列 $\\{c_n\\}$ 满足 $\\forall i\\in[1,n],c_i\\in\\{a_i,b_i\\}$，最大化\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n并输出该式子可能的最大值。", "inputFormat": "第一行一个正整数 $n$，表示**每一份**新闻中的新闻条数。\n\n第二行 $n$ 个**非负整数**表示第一份新闻中每一条新闻的吸引力，即 $a_1,a_2\\dots ,a_{n-1},a_n$。\n\n第三行 $n$ 个**非负整数**表示第二份新闻中每一条新闻的吸引力，即 $b_1,b_2\\dots ,b_{n-1},b_n$。", "outputFormat": "输出一个整数，表示报刊的**最大**的综合影响力会是多少。", "hint": "**【样例解释和说明】**\n\n射命丸文可以让自己的 $5$ 条新闻分别取第二份的第 $1$ 条，第一份的第 $2$ 条，第一份的第 $3$ 条，第一份的第 $4$ 条和第二份的第 $5$ 条。这样一来，她的报刊每条新闻的吸引力 $c_i$ 分别为 $0,1,0,1,0$。令 $l=1,r=5$，则 $\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=2$，$r-l+1-\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=3$，不难证明其为数列 $c$ 的综合影响力，也是**所有的可能的** $c$ 的最大综合影响力。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，满足 $1 \\leq n\\leq 10$。\n\n另外 $40\\%$ 的数据满足 $a_i=b_i$。\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n\\le 10^6$，$0\n\\leq a_i,b_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "射命丸文的取材之旅", "background": "射命丸文（Syameimaru Aya）是一只鸦天狗。她不定期制作名为「文文。新闻」的报纸，而为此，她需要对她收集到的新闻进行剪裁。", "description": "射命丸文现在收集到了 $2n$ 条新闻。她想要将其刊登于自己的报刊之上。然而，自己的报刊最多只能刊登 $n$ 条新闻。\n\n为了能在 $n$ 条新闻的篇幅中让自己的报刊得到最大的吸引力，她将这 $2n$ 条新闻**等分**成**两份**，即每一份中均有 $n$ 条新闻。\n\n每一条新闻自然有着其吸引力。在**第一份**中，第 $i$ 条新闻有着吸引力 $a_i$，而在**第二份**中，第 $i$ 条新闻有着吸引力 $b_i$。这两份新闻的划分在输入时已经给定。\n\n现在射命丸文要从中选取新闻放入自己的报刊。报刊上的第 $i$ 条新闻，将选择**第一份**新闻的第 $i$ 条或**第二份**新闻的第 $i$ 条。这样，报刊上的新闻就可以构成一个长度为 $n$ 的序列，第 $i$ 项也就是第 $i$ 条新闻有着吸引力 $c_i \\in \\{a_i,b_i\\}$。\n\n而这样的一份报刊有着其综合影响力。根据射命丸文的经验，对于她这样的一份含有 $n$ 条新闻的报刊，其综合影响力为：\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n其中 $\\operatorname{mex}\\{c_l,c_{l+1},\\dots,c_{r-1},c_r\\}$ 指的是 $c_l,c_{l+1},\\dots,c_{r-1},c_r$ 中没有出现过的**最小非负整数**。\n\n现在她希望知道，在进行这些操作之后，自己的报刊的**最大**的综合影响力会是多少呢？由于她还要继续取材，因此她把这个任务交付给了你。\n\n【形式化题意】\n\n给定序列 $\\{a_n\\},\\{b_n\\}$，求一个序列 $\\{c_n\\}$ 满足 $\\forall i\\in[1,n],c_i\\in\\{a_i,b_i\\}$，最大化\n\n$$\\max\\{r-l+1-\\operatorname{mex}\\{c_l,c_{l+1},\\dots, c_{r-1},c_r\\}\\}(1\\le l\\le r\\le n)$$\n\n并输出该式子可能的最大值。", "inputFormat": "第一行一个正整数 $n$，表示**每一份**新闻中的新闻条数。\n\n第二行 $n$ 个**非负整数**表示第一份新闻中每一条新闻的吸引力，即 $a_1,a_2\\dots ,a_{n-1},a_n$。\n\n第三行 $n$ 个**非负整数**表示第二份新闻中每一条新闻的吸引力，即 $b_1,b_2\\dots ,b_{n-1},b_n$。", "outputFormat": "输出一个整数，表示报刊的**最大**的综合影响力会是多少。", "hint": "**【样例解释和说明】**\n\n射命丸文可以让自己的 $5$ 条新闻分别取第二份的第 $1$ 条，第一份的第 $2$ 条，第一份的第 $3$ 条，第一份的第 $4$ 条和第二份的第 $5$ 条。这样一来，她的报刊每条新闻的吸引力 $c_i$ 分别为 $0,1,0,1,0$。令 $l=1,r=5$，则 $\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=2$，$r-l+1-\\operatorname{mex}\\{c_1,c_2,c_3,c_4,c_5\\}=3$，不难证明其为数列 $c$ 的综合影响力，也是**所有的可能的** $c$ 的最大综合影响力。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，满足 $1 \\leq n\\leq 10$。\n\n另外 $40\\%$ 的数据满足 $a_i=b_i$。\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n\\le 10^6$，$0\n\\leq a_i,b_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P8446", "type": "P", "difficulty": 4, "samples": [["6\n5 2 4 2 8 8", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "虹色的北斗七星", "background": "**【题目背景与题意无关，可以直接阅读题目描述】**\n\n（本题目背景部分改编自真实案例）\n\n宇佐见莲子是外界的一名大学生，在京都的一所大学中专攻超统一物理学，最近在做弦论方面的研究。\n\n莲子与梅莉一同经营着名为秘封俱乐部的社团。进行着在科学世纪探寻遍布四处的结界的活动。\n\n这个月梅莉和莲子又商量着去进行新一轮的探索与发现与贴贴，但是在两人手牵手出门的时候甜腻腻的气氛却被一通电话打破。\n\n莲子因为经常外出探险，同时与梅莉增进感情交流，所以作业一拖再拖。她的物理学教授忍无可忍（毕竟莲子可是拖了一个学期的物理作业一个字都没有动呢），规定她必须在 $\\sqrt9$ 天之内交上一篇学习报告，然后才同意给她的“课外实践活动”报备。\n\n这可就没有办法了呢（笑），莲子只好先努力在 deadline 之前糊弄完她的学习报告，然后才能执行她们观赏夜空的计划。", "description": "由于前两天都被莲子用来进行活动的筹备工作了，所以现在她只有几分钟的时间糊弄作业。尽管这样不太好，但是她别无选择，只能从之前的课堂笔记中摘取一段内容。\n\n莲子的课堂笔记共有 $n$ 章，每章分别记着不同的内容。她可以选择其中任意连续的一段 $[l,r]$（表示选取了第 $l$ 章到第 $r$ 章）作为最终的成果。\n\n每一章的内容各不相同，老师对每章内容有一个评价分 $a_i$。因为学习报告要体现出学生的进步，所以老师的满意度将会加上其中最差（$\\min\\{a_i\\}$）和最好章节（$\\max\\{a_i\\}$）的评价分差距。因为直接把冗长的课堂笔记作为报告提交显得太敷衍，所以每存在一章内容，老师的满意度就会 $-1$。\n\n形式化地来说，如果莲子提交了 $[l,r]$ 这一段区间的笔记，老师的满意度将会是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-(r-l+1)$。\n\n莲子希望你能帮她找出一种使得老师的满意度最大的方案。因为她非常聪明，所以只需要你告诉她这个最大的满意度，她就会知道应该怎么做。\n\n**【形式化题意】**\n\n你有一个长度为 $n$ 的序列 $a$，它的一个区间 $[l,r]$ 的价值是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-r+l-1$。求这个序列价值最大的子区间并输出这个价值。", "inputFormat": "第一行输入一个正整数 $n$，表示笔记的章节数。\n\n第二行输入评价分序列 $a$，以空格隔开每一个元素。", "outputFormat": "输出这个评价分序列中，老师满意度最大的子区间的满意度。", "hint": "**【样例解释和说明】**\n\n令 $l=4,r=5$，则有 $\\min\\{a_4,a_5\\}=2$，$\\max\\{a_4,a_5\\}=8$，贡献值为 $4$。易证这是满意度最大的子区间。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq 5\\times 10^3$。\n- 另有 $20\\%$ 的数据，所有的 $a_i$ 都相等。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 4\\times10^6$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "虹色的北斗七星", "background": "**【题目背景与题意无关，可以直接阅读题目描述】**\n\n（本题目背景部分改编自真实案例）\n\n宇佐见莲子是外界的一名大学生，在京都的一所大学中专攻超统一物理学，最近在做弦论方面的研究。\n\n莲子与梅莉一同经营着名为秘封俱乐部的社团。进行着在科学世纪探寻遍布四处的结界的活动。\n\n这个月梅莉和莲子又商量着去进行新一轮的探索与发现与贴贴，但是在两人手牵手出门的时候甜腻腻的气氛却被一通电话打破。\n\n莲子因为经常外出探险，同时与梅莉增进感情交流，所以作业一拖再拖。她的物理学教授忍无可忍（毕竟莲子可是拖了一个学期的物理作业一个字都没有动呢），规定她必须在 $\\sqrt9$ 天之内交上一篇学习报告，然后才同意给她的“课外实践活动”报备。\n\n这可就没有办法了呢（笑），莲子只好先努力在 deadline 之前糊弄完她的学习报告，然后才能执行她们观赏夜空的计划。", "description": "由于前两天都被莲子用来进行活动的筹备工作了，所以现在她只有几分钟的时间糊弄作业。尽管这样不太好，但是她别无选择，只能从之前的课堂笔记中摘取一段内容。\n\n莲子的课堂笔记共有 $n$ 章，每章分别记着不同的内容。她可以选择其中任意连续的一段 $[l,r]$（表示选取了第 $l$ 章到第 $r$ 章）作为最终的成果。\n\n每一章的内容各不相同，老师对每章内容有一个评价分 $a_i$。因为学习报告要体现出学生的进步，所以老师的满意度将会加上其中最差（$\\min\\{a_i\\}$）和最好章节（$\\max\\{a_i\\}$）的评价分差距。因为直接把冗长的课堂笔记作为报告提交显得太敷衍，所以每存在一章内容，老师的满意度就会 $-1$。\n\n形式化地来说，如果莲子提交了 $[l,r]$ 这一段区间的笔记，老师的满意度将会是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-(r-l+1)$。\n\n莲子希望你能帮她找出一种使得老师的满意度最大的方案。因为她非常聪明，所以只需要你告诉她这个最大的满意度，她就会知道应该怎么做。\n\n**【形式化题意】**\n\n你有一个长度为 $n$ 的序列 $a$，它的一个区间 $[l,r]$ 的价值是 $\\max\\{a_l,a_{l+1},\\cdots,a_r\\}-\\min\\{a_l,a_{l+1},\\cdots,a_r\\}-r+l-1$。求这个序列价值最大的子区间并输出这个价值。", "inputFormat": "第一行输入一个正整数 $n$，表示笔记的章节数。\n\n第二行输入评价分序列 $a$，以空格隔开每一个元素。", "outputFormat": "输出这个评价分序列中，老师满意度最大的子区间的满意度。", "hint": "**【样例解释和说明】**\n\n令 $l=4,r=5$，则有 $\\min\\{a_4,a_5\\}=2$，$\\max\\{a_4,a_5\\}=8$，贡献值为 $4$。易证这是满意度最大的子区间。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq 5\\times 10^3$。\n- 另有 $20\\%$ 的数据，所有的 $a_i$ 都相等。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 4\\times10^6$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8447", "type": "P", "difficulty": 6, "samples": [["5\n1 5\n1\n2\n3\n4\n5\n5 5\n8\n20\n25\n37\n49\n11 1\n179\n13 1\n507\n19 1\n841", "1\n2\n3\n4\n5\n2\n2\n1\n4\n4\n3\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数论", "O2优化", "背包 DP"], "title": "「FAOI-R1」完美的平方数", "background": "", "description": "给定一个正整数 $m$。现有 $Q$ 个询问，每个询问给定一个正整数 $n$，要求你从 $1,4,9,16,\\ldots,m^2$ 中取出若干个数（**同一个数可以取出多次**），使它们的和**恰好**为 $n$。问最少取出多少个数？（如果无解，则输出 $-1$）", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n对于每组数据：\n\n第一行，两个正整数 $m,Q$。\n\n下面 $Q$ 行，每行一个正整数 $n$。\n", "outputFormat": "对于每组数据的每个询问，输出一行一个正整数，表示答案。", "hint": "**样例解释：**\n\n对于第一组数据，显然答案是 $n$，因为你只能取 $1$。\n\n对于第二组数据：\n\n- $8=2^2+2^2$；\n- $20=4^2+2^2$；\n- $25=5^2$；\n- $37=5^2+2^2+2^2+2^2$；（或 $37=4^2+4^2+2^2+1^2$）\n- $49=5^2+4^2+2^2+2^2$；（或 $49=4^2+4^2+4^2+1^2$）\n- **请注意，$37=6^2+1^2$ 和 $49=7^2$ 都不是合法的方案，因为该数据中 $m=5$。**\n\n------------\n\n| 测试点编号 | $m\\le$ | $n \\le$ | 分值 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $30$ | $10^4$ | $40$ |\n| $2 \\sim 3$ | $30$ | $10^{18}$ | $15 \\times 2$ |\n| $4 \\sim 9$ | $500$ | $10^{18}$ | $5 \\times 6$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 30$，$1 \\le Q \\le 10^4$，$1 \\le m \\le 500$，$1 \\le n \\le 10^{18}$，单个测试点中所有数据的 $m$ 的和（$\\sum m$）满足 $1 \\le \\sum m \\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R1」完美的平方数", "background": "", "description": "给定一个正整数 $m$。现有 $Q$ 个询问，每个询问给定一个正整数 $n$，要求你从 $1,4,9,16,\\ldots,m^2$ 中取出若干个数（**同一个数可以取出多次**），使它们的和**恰好**为 $n$。问最少取出多少个数？（如果无解，则输出 $-1$）", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n对于每组数据：\n\n第一行，两个正整数 $m,Q$。\n\n下面 $Q$ 行，每行一个正整数 $n$。\n", "outputFormat": "对于每组数据的每个询问，输出一行一个正整数，表示答案。", "hint": "**样例解释：**\n\n对于第一组数据，显然答案是 $n$，因为你只能取 $1$。\n\n对于第二组数据：\n\n- $8=2^2+2^2$；\n- $20=4^2+2^2$；\n- $25=5^2$；\n- $37=5^2+2^2+2^2+2^2$；（或 $37=4^2+4^2+2^2+1^2$）\n- $49=5^2+4^2+2^2+2^2$；（或 $49=4^2+4^2+4^2+1^2$）\n- **请注意，$37=6^2+1^2$ 和 $49=7^2$ 都不是合法的方案，因为该数据中 $m=5$。**\n\n------------\n\n| 测试点编号 | $m\\le$ | $n \\le$ | 分值 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $30$ | $10^4$ | $40$ |\n| $2 \\sim 3$ | $30$ | $10^{18}$ | $15 \\times 2$ |\n| $4 \\sim 9$ | $500$ | $10^{18}$ | $5 \\times 6$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 30$，$1 \\le Q \\le 10^4$，$1 \\le m \\le 500$，$1 \\le n \\le 10^{18}$，单个测试点中所有数据的 $m$ 的和（$\\sum m$）满足 $1 \\le \\sum m \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P8448", "type": "P", "difficulty": 2, "samples": [["2\n16\n9", "1\n0"], ["2\n1327104\n3623878656000", "5\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创"], "title": "[LSOT-1] 暴龙的土豆", "background": "暴龙爱吃土豆。", "description": "给定一个正整数 $n$。\n\n每次操作可以选两个素数 $y,z$，其中要求 $z$ 是奇素数。\n\n令 $x=y^z$，如果 $x$ 能除尽 $n$ 则计为一次有效操作，$n$ 变为 $\\dfrac nx$。\n\n现在需要你回答，对于 $n$ 最多能够进行多少次有效操作。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "对于每组数据，输出答案。", "hint": "【样例解释】\n\n对于样例一：$16$ 可以变成 $2^3 \\times 2$，可以进行一次操作。但是 $9$ 只能变成 $3^2$，所以不能进行操作。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 10^2，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 2(20 pts)：}1 \\le\\ n\\le 10^6，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 3(30 pts)：}1 \\le\\ n\\le 10^{12}，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^{18}$，$1\\le T\\le 10^2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] 暴龙的土豆", "background": "暴龙爱吃土豆。", "description": "给定一个正整数 $n$。\n\n每次操作可以选两个素数 $y,z$，其中要求 $z$ 是奇素数。\n\n令 $x=y^z$，如果 $x$ 能除尽 $n$ 则计为一次有效操作，$n$ 变为 $\\dfrac nx$。\n\n现在需要你回答，对于 $n$ 最多能够进行多少次有效操作。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "对于每组数据，输出答案。", "hint": "【样例解释】\n\n对于样例一：$16$ 可以变成 $2^3 \\times 2$，可以进行一次操作。但是 $9$ 只能变成 $3^2$，所以不能进行操作。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 10^2，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 2(20 pts)：}1 \\le\\ n\\le 10^6，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 3(30 pts)：}1 \\le\\ n\\le 10^{12}，1 \\le\\ T\\le 10^2$；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^{18}$，$1\\le T\\le 10^2$。", "locale": "zh-CN"}}}
{"pid": "P8449", "type": "P", "difficulty": 4, "samples": [["6 4\n4 3 5 7 2 6\n1 1 1 2 2\n2 1 1 3\n3 11\n4 1", "odd\nodd\nodd\nodd"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "[LSOT-1] 逆序对", "background": "逆序对真好玩", "description": "你需要维护一个数列，支持以下 $4$ 种操作：\n\n1. 区间交换；\n2. 把一个区间**向后**移动到第 $k$ 个数字与第 $k+1$ 个数字之间；\n3. 在最后插入一个数 $x$；\n4. 在开头插入一个数 $x$。\n\n每个数数的序号为新序列重新从第一个数到第 $k$ 个数编号为 $1$ 到 $k$。\n\n现在每次操作过后，请你输出整个数列逆序对数量的奇偶性。", "inputFormat": "第一行输入两个正整数 $n,m$，表示初始序列的长度与操作个数。\n\n接下来一行输入 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示初始序列。\n\n接下来 $m$ 行，每行先输入一个 $t$ 表示操作编号，之后：\n- 若 $t=1$，则输入四个正整数 $l_1,r_1,l_2,r_2$，表示将区间 $[l_1,r_1]$ 与区间 $[l_2,r_2]$ 整体交换，保证 $l_1\\le r_1< l_2\\le r_2$；\n- 若 $t=2$，则输入三个正整数 $l,r,k$，表示将区间 $[l,r]$ 移动至序列的第 $k$ 个数与第 $k+1$ 个数之间，保证 $r<k$；\n- 若 $t=3$，则输入一个正整数 $x$，表示将 $x$ 插入到序列末端；\n- 若 $t=4$，则输入一个正整数 $x$，表示将 $x$ 插入到序列首端。", "outputFormat": "对于每一个指令执行后，如果逆序对数量是偶数，请输出 `even` ，否则输出 `odd`。", "hint": "【样例解释】\n\n第一次操作将区间 $[1,1]$ 和区间 $[2,2]$ 交换，序列变为 `3 4 5 7 2 6`。\n\n第二次操作将区间 $[1,1]$ 移动到第 $3$ 和第 $4$ 个数中间。序列变为 `4 5 3 7 2 6`。\n\n第三次操作在序列末端插入 $11$，序列变为 `4 5 3 7 2 6 11`。\n\n第四次操作在序列开头插入 $1$，序列变为 `1 4 5 3 7 2 6 11`。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts): }n,m\\le 10^2$；\n- $\\texttt{Subtask 2(15 pts): }n,m\\le 10^3$；\n- $\\texttt{Subtask 3(20 pts): }$没有一二操作；\n- $\\texttt{Subtask 4(20 pts): }$没有三四操作；\n- $\\texttt{Subtask 5(35 pts): }$无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5,a_i\\le 2\\times10^6$，保证在任意时刻 $a$ 中的数均互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] 逆序对", "background": "逆序对真好玩", "description": "你需要维护一个数列，支持以下 $4$ 种操作：\n\n1. 区间交换；\n2. 把一个区间**向后**移动到第 $k$ 个数字与第 $k+1$ 个数字之间；\n3. 在最后插入一个数 $x$；\n4. 在开头插入一个数 $x$。\n\n每个数数的序号为新序列重新从第一个数到第 $k$ 个数编号为 $1$ 到 $k$。\n\n现在每次操作过后，请你输出整个数列逆序对数量的奇偶性。", "inputFormat": "第一行输入两个正整数 $n,m$，表示初始序列的长度与操作个数。\n\n接下来一行输入 $n$ 个正整数 $a_1,a_2,\\dots,a_n$，表示初始序列。\n\n接下来 $m$ 行，每行先输入一个 $t$ 表示操作编号，之后：\n- 若 $t=1$，则输入四个正整数 $l_1,r_1,l_2,r_2$，表示将区间 $[l_1,r_1]$ 与区间 $[l_2,r_2]$ 整体交换，保证 $l_1\\le r_1< l_2\\le r_2$；\n- 若 $t=2$，则输入三个正整数 $l,r,k$，表示将区间 $[l,r]$ 移动至序列的第 $k$ 个数与第 $k+1$ 个数之间，保证 $r<k$；\n- 若 $t=3$，则输入一个正整数 $x$，表示将 $x$ 插入到序列末端；\n- 若 $t=4$，则输入一个正整数 $x$，表示将 $x$ 插入到序列首端。", "outputFormat": "对于每一个指令执行后，如果逆序对数量是偶数，请输出 `even` ，否则输出 `odd`。", "hint": "【样例解释】\n\n第一次操作将区间 $[1,1]$ 和区间 $[2,2]$ 交换，序列变为 `3 4 5 7 2 6`。\n\n第二次操作将区间 $[1,1]$ 移动到第 $3$ 和第 $4$ 个数中间。序列变为 `4 5 3 7 2 6`。\n\n第三次操作在序列末端插入 $11$，序列变为 `4 5 3 7 2 6 11`。\n\n第四次操作在序列开头插入 $1$，序列变为 `1 4 5 3 7 2 6 11`。\n\n【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts): }n,m\\le 10^2$；\n- $\\texttt{Subtask 2(15 pts): }n,m\\le 10^3$；\n- $\\texttt{Subtask 3(20 pts): }$没有一二操作；\n- $\\texttt{Subtask 4(20 pts): }$没有三四操作；\n- $\\texttt{Subtask 5(35 pts): }$无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5,a_i\\le 2\\times10^6$，保证在任意时刻 $a$ 中的数均互不相同。", "locale": "zh-CN"}}}
{"pid": "P8450", "type": "P", "difficulty": 5, "samples": [["1\nNo\n2\nYes", "GetGCD. 0\nTheSame?  0\nGetGCD. 1\n2 1\nTheSame? 1\n2 1\nIFoundTheAnswer! 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "原根", "数论", "交互题", "Special Judge", "O2优化"], "title": "[LSOT-1] 记忆崩塌", "background": "“铃铃铃”，上课铃打响。一阵眩晕，小 H 突然倒在地上。只是隐约间，感受到周围有人赶过来。\n\n“这是哪里？我不是在上课吗？”小 H 望向周围。\n\n“欢迎来到 OI 世界。我负责带你熟悉 OI 世界。”一个奇怪的人走到这里来。\n\n“OI 世界？”\n\n“对。这里没有文化课，你可以在这里尽情学习 OI。”那人解释道。\n\n紧接着，那人将小 H 带到了一个自称是心理学家的人面前。\n\n“你在干什么？”小 H 望着那个心理学家。他正准备把一个奇怪的东西戴到小 H 头上。\n\n“这个可以帮你恢复你在 whk 世界的记忆。”心理学家淡淡地说。\n\n仪器戴到头上后，小 H 大喊：“我什么都想起来了！”\n\n然而，真的什么都想起来了吗……\n\n从那个人带着小H前往OI世界观光开始，这一切，全都乱了……", "description": "**这是一道交互题。**\n\n小 H 失忆了。\n\n现在，小 H 过去的记忆化成了 $n$ 个记忆碎片。医生拥有 $n$ 种长度的取样条（长度为 $1\\dots n$）。记忆碎片会与长度为 $i$ 的取样条发生大小为 $\\gcd(n,i)$ 的情感共鸣。\n\n医生有一个机器，可以测出长度为 $i$ 的取样条与小 H 产生的情感共鸣大小。现在你可以用这个机器测量一定的次数，医生希望你能告诉他若用完 $n$ 种长度的取样条小 H 总共会发生多大的情感共鸣。\n\n### 交互格式\n你可以用以下格式来询问医生你想知道的东西：\n\n`TheSame? m`：下接 $m$ 行，每行两个数 $p_i,k_i$，医生会告诉你数小 H 的记忆碎片数量是否与 $\\displaystyle\\prod_{i=1}^mp_i^{k_i}$ 相等。`Yes` 代表相同或 `No` 代表不同。\n\n`GetGCD. m`：下接 $m$ 行，每行两个数 $p,k$ ，医生会告诉你$\\displaystyle\\prod_{i=1}^mp_i^{k_i}$  与小 H 的记忆碎片产生的情感共鸣大小。\n\n所有询问的 $p_i$ 为素数，$k_i$ 为正整数，不符合上述限制的交互不保证交互库会做出预期行为。\n\n***\n\n你可以用以下格式来告诉医生你知道的东西：\n\n`IFoundTheAnswer! m`：以此来告诉评测器我已经知道了小 H 总共产生的情感共鸣大小为 $m$，并评判是否正确。\n\n***\n\n你一共可以与医生交互 $1050$ 次。交互库的所有输出与你输出的答案均应对 $998244353$ 取模。\n\n***\n\n你需要从**标准输出**中输出，代表你询问的内容。\n\n每一次询问后都应当**清空缓冲区**，不然你会无缘无故 TLE。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入，代表评测机返回的结果。", "inputFormat": "见「交互格式」。\n", "outputFormat": "见「交互格式」。\n", "hint": "【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 500$；\n- $\\texttt{Subtask 2(25 pts)：}1 \\le\\ n\\le 10^6$；\n- $\\texttt{Subtask 3(25 pts)：}$保证 $n$ 的唯一分解形式仅有前 $100$ 个质数；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $n$ 的唯一分解形式质数数量不超过 $1000$，且质因子最大不超过 $7919$（注：$7919$ 为第 $1000$ 个质数），且质数的次数不超过 $10000$。\n\n【其他提示】\n\n因为交互库的效率较低，所以附件中给出交互库的代码。如果你想利用下面的交互库代码进行调试，你可以在官方的 [SPJ 说明](https://www.luogu.com.cn/blog/luogu/special-judge) 中下载 ```testlib.h``` 头文件后将两个程序的输出输入到另一个程序中。当然，你也可以模拟交互库的计算来手动输入到你的程序中。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] 记忆崩塌", "background": "“铃铃铃”，上课铃打响。一阵眩晕，小 H 突然倒在地上。只是隐约间，感受到周围有人赶过来。\n\n“这是哪里？我不是在上课吗？”小 H 望向周围。\n\n“欢迎来到 OI 世界。我负责带你熟悉 OI 世界。”一个奇怪的人走到这里来。\n\n“OI 世界？”\n\n“对。这里没有文化课，你可以在这里尽情学习 OI。”那人解释道。\n\n紧接着，那人将小 H 带到了一个自称是心理学家的人面前。\n\n“你在干什么？”小 H 望着那个心理学家。他正准备把一个奇怪的东西戴到小 H 头上。\n\n“这个可以帮你恢复你在 whk 世界的记忆。”心理学家淡淡地说。\n\n仪器戴到头上后，小 H 大喊：“我什么都想起来了！”\n\n然而，真的什么都想起来了吗……\n\n从那个人带着小H前往OI世界观光开始，这一切，全都乱了……", "description": "**这是一道交互题。**\n\n小 H 失忆了。\n\n现在，小 H 过去的记忆化成了 $n$ 个记忆碎片。医生拥有 $n$ 种长度的取样条（长度为 $1\\dots n$）。记忆碎片会与长度为 $i$ 的取样条发生大小为 $\\gcd(n,i)$ 的情感共鸣。\n\n医生有一个机器，可以测出长度为 $i$ 的取样条与小 H 产生的情感共鸣大小。现在你可以用这个机器测量一定的次数，医生希望你能告诉他若用完 $n$ 种长度的取样条小 H 总共会发生多大的情感共鸣。\n\n### 交互格式\n你可以用以下格式来询问医生你想知道的东西：\n\n`TheSame? m`：下接 $m$ 行，每行两个数 $p_i,k_i$，医生会告诉你数小 H 的记忆碎片数量是否与 $\\displaystyle\\prod_{i=1}^mp_i^{k_i}$ 相等。`Yes` 代表相同或 `No` 代表不同。\n\n`GetGCD. m`：下接 $m$ 行，每行两个数 $p,k$ ，医生会告诉你$\\displaystyle\\prod_{i=1}^mp_i^{k_i}$  与小 H 的记忆碎片产生的情感共鸣大小。\n\n所有询问的 $p_i$ 为素数，$k_i$ 为正整数，不符合上述限制的交互不保证交互库会做出预期行为。\n\n***\n\n你可以用以下格式来告诉医生你知道的东西：\n\n`IFoundTheAnswer! m`：以此来告诉评测器我已经知道了小 H 总共产生的情感共鸣大小为 $m$，并评判是否正确。\n\n***\n\n你一共可以与医生交互 $1050$ 次。交互库的所有输出与你输出的答案均应对 $998244353$ 取模。\n\n***\n\n你需要从**标准输出**中输出，代表你询问的内容。\n\n每一次询问后都应当**清空缓冲区**，不然你会无缘无故 TLE。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n然后你需要从**标准输入**中输入，代表评测机返回的结果。", "inputFormat": "见「交互格式」。\n", "outputFormat": "见「交互格式」。\n", "hint": "【数据范围】\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：}1 \\le\\ n\\le 500$；\n- $\\texttt{Subtask 2(25 pts)：}1 \\le\\ n\\le 10^6$；\n- $\\texttt{Subtask 3(25 pts)：}$保证 $n$ 的唯一分解形式仅有前 $100$ 个质数；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $n$ 的唯一分解形式质数数量不超过 $1000$，且质因子最大不超过 $7919$（注：$7919$ 为第 $1000$ 个质数），且质数的次数不超过 $10000$。\n\n【其他提示】\n\n因为交互库的效率较低，所以附件中给出交互库的代码。如果你想利用下面的交互库代码进行调试，你可以在官方的 [SPJ 说明](https://www.luogu.com.cn/blog/luogu/special-judge) 中下载 ```testlib.h``` 头文件后将两个程序的输出输入到另一个程序中。当然，你也可以模拟交互库的计算来手动输入到你的程序中。", "locale": "zh-CN"}}}
{"pid": "P8451", "type": "P", "difficulty": 6, "samples": [["5\n1 0 abc\n2 0 abc\n1 2 def\n2 3 defg\n2 1 abcd", "0\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608, 196608]}, "tags": ["洛谷原创", "树论", "AC 自动机"], "title": "[LSOT-1] Crosspain", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xcjot9ob.png)", "description": "令 $S_0=\\varnothing$，维护一个数据结构，要求支持以下操作：\n- `1 hoc s`，令 $S_i=S_{hoc}\\cup\\{s\\}$，其中 $s$ 是字符串（保证操作前 $s\\notin S_{hoc}$） .\n- `2 hoc s`，令 $S_i=S_{hoc}$，并查询 $S_i$ 中的所有字符串在给出的字符串 $s$ 中出现的次数之和 .", "inputFormat": "第一行包含一个正整数 $q$，表示询问次数 .\n\n接下来 $q$ 行，每行一个操作，格式见题目描述 .", "outputFormat": "对于每个操作 2，输出一行答案 .", "hint": "### 样例解释\n\n第三行中，询问版本 $0$ 中的串在 `abc` 中出现几次，因为版本 $0$ 为空，所以出现 $0$ 次 .\n\n第五行中，询问版本 $3$ 中的串在 `defg` 中出现几次，因为版本 $3$ 有字符串 `def`，所以出现 $1$ 次 .\n\n第六行中，询问版本 $1$ 中的串在 `abcd` 中出现几次，因为版本 $1$ 有字符串 `abc`，所以出现 $1$ 次 .\n\n### 数据范围及约定\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：} \\displaystyle \\sum|s_i|\\le 1000$；\n- $\\texttt{Subtask 2(20 pts)：}$所有添加的字符串长度相同；\n- $\\texttt{Subtask 3(20 pts)：}$所有添加的字符串只包含一种字符；\n- $\\texttt{Subtask 4(20 pts)：}q\\le 10^3$；\n- $\\texttt{Subtask 5(30 pts)：}$无特殊限制。\n\n对于全部数据，$1\\le q\\le  5\\times10^5$，$\\displaystyle 1\\le \\sum_i|s_i|\\le 10^6$ . 所有字符串仅含小写字母 .", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-1] Crosspain", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xcjot9ob.png)", "description": "令 $S_0=\\varnothing$，维护一个数据结构，要求支持以下操作：\n- `1 hoc s`，令 $S_i=S_{hoc}\\cup\\{s\\}$，其中 $s$ 是字符串（保证操作前 $s\\notin S_{hoc}$） .\n- `2 hoc s`，令 $S_i=S_{hoc}$，并查询 $S_i$ 中的所有字符串在给出的字符串 $s$ 中出现的次数之和 .", "inputFormat": "第一行包含一个正整数 $q$，表示询问次数 .\n\n接下来 $q$ 行，每行一个操作，格式见题目描述 .", "outputFormat": "对于每个操作 2，输出一行答案 .", "hint": "### 样例解释\n\n第三行中，询问版本 $0$ 中的串在 `abc` 中出现几次，因为版本 $0$ 为空，所以出现 $0$ 次 .\n\n第五行中，询问版本 $3$ 中的串在 `defg` 中出现几次，因为版本 $3$ 有字符串 `def`，所以出现 $1$ 次 .\n\n第六行中，询问版本 $1$ 中的串在 `abcd` 中出现几次，因为版本 $1$ 有字符串 `abc`，所以出现 $1$ 次 .\n\n### 数据范围及约定\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(10 pts)：} \\displaystyle \\sum|s_i|\\le 1000$；\n- $\\texttt{Subtask 2(20 pts)：}$所有添加的字符串长度相同；\n- $\\texttt{Subtask 3(20 pts)：}$所有添加的字符串只包含一种字符；\n- $\\texttt{Subtask 4(20 pts)：}q\\le 10^3$；\n- $\\texttt{Subtask 5(30 pts)：}$无特殊限制。\n\n对于全部数据，$1\\le q\\le  5\\times10^5$，$\\displaystyle 1\\le \\sum_i|s_i|\\le 10^6$ . 所有字符串仅含小写字母 .", "locale": "zh-CN"}}}
{"pid": "P8452", "type": "P", "difficulty": 4, "samples": [["0\n4\n3 3\n2 4\n15 57\n1064 822", "5 11.313708499\n6 6.324555320\n623 10206.135788972\n655956 222400384.677931725\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「SWTR-8」15B03", "background": "15B03 获得了 ION2064 的承办权。", "description": "15B03 的座位非常拥挤，可以看成一张 $n\\times m$ 的网格，每个小正方形 $(i, j)$ 代表一张桌子。\n\n根据规定，考场上任何两张桌子不得相邻。这里相邻指含有 **公共点**。严格定义两张桌子 $(i, j)$ 和 $(i', j')$ 相邻当且仅当 $|i - i'|\\leq 1$ 且 $|j - j'|\\leq 1$。\n\n布置考场的任务落在小 A 头上，他希望撤去最少的桌子满足上述要求。\n\n小 A 认为这样太简单了，因此他添加了限制：在保证撤去桌子最少的前提下，最大化剩余每张桌子到距离它最远的桌子的距离之和。这里距离指 **欧几里得** 距离：桌子 $(a, b)$ 和 $(c, d)$ 的距离为 $\\sqrt{(a - c) ^ 2 + (b - d) ^ 2}$。\n\n平行时空中 15B03 的规模不尽相同：多组测试数据。\n\n**请选手认真阅读本题的评分方式。**", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 一行两个整数 $n, m$。", "outputFormat": "对于每组测试数据：\n\n- 输出一个整数和一个实数，由空格隔开。分别表示最少撤去的桌子数量以及每张桌子到距离它最远的桌子的距离之和的最大值。\n\n实数比较按绝对误差或相对误差不超过 $10 ^ {-9}$：令你输出的答案为 $a$，标准答案为 $b$，你的答案被判为正确当且仅当 $\\frac{|a - b|}{\\max(1, |b|)} \\leq 10 ^ {-9}$。", "hint": "**「样例解释」**\n\n对于第一组询问，选择 $(1, 1), (1, 3), (3, 1)$ 和 $(3, 3)$ 最优。撤去了 $3\\times 3 - 4 = 5$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{2 ^ 2 + 2 ^ 2} = 2\\sqrt 2$，因此第二问答案为 $8\\sqrt 2$。如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y8fi4qhr.png)\n\n对于第二组询问，选择 $(1, 1)$ 和 $(2, 4)$ 最优。撤去了 $2\\times 4 - 2 = 6$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{1 ^ 2 + 3 ^ 2} = \\sqrt {10}$，因此第二问答案为 $2\\sqrt {10}$。\n\n如果选择 $(1, 1)$ 和 $(2, 3)$，则第二问答案为 $2\\sqrt 5$，不优。\n\n**「评分方式」**\n\n对于每组测试数据：\n\n- 若你第一问的答案错误，得 0 分。\n- 否则，若你第二问的答案错误，得 0.8 分。\n- 否则，得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，**若你输出的格式错误，得 0 分**。因此，如果你只希望获得第一问的分数，请在第二问输出任意合理范围内的实数。\n\n**「数据范围与约定」**\n\n- 测试点 #1（15 points）：$n, m$ 均为奇数。\n- 测试点 #2（20 points）：$n = 1$。\n- 测试点 #3（25 points）：$n = 2$。\n- 测试点 #4（30 points）：$n$ 为奇数。\n- 测试点 #5（10 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 57$。\n- $1\\leq n, m\\leq 1064$。\n\n**「帮助与提示」**\n\n- 你可以使用 `cmath` 中的 `sqrt(x)` 函数计算 $x$ 的平方根。它返回 `double` 类型的值。`sqrtl(x)` 精度更高，它返回 `long double` 类型的值。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) A\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」15B03", "background": "15B03 获得了 ION2064 的承办权。", "description": "15B03 的座位非常拥挤，可以看成一张 $n\\times m$ 的网格，每个小正方形 $(i, j)$ 代表一张桌子。\n\n根据规定，考场上任何两张桌子不得相邻。这里相邻指含有 **公共点**。严格定义两张桌子 $(i, j)$ 和 $(i', j')$ 相邻当且仅当 $|i - i'|\\leq 1$ 且 $|j - j'|\\leq 1$。\n\n布置考场的任务落在小 A 头上，他希望撤去最少的桌子满足上述要求。\n\n小 A 认为这样太简单了，因此他添加了限制：在保证撤去桌子最少的前提下，最大化剩余每张桌子到距离它最远的桌子的距离之和。这里距离指 **欧几里得** 距离：桌子 $(a, b)$ 和 $(c, d)$ 的距离为 $\\sqrt{(a - c) ^ 2 + (b - d) ^ 2}$。\n\n平行时空中 15B03 的规模不尽相同：多组测试数据。\n\n**请选手认真阅读本题的评分方式。**", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 一行两个整数 $n, m$。", "outputFormat": "对于每组测试数据：\n\n- 输出一个整数和一个实数，由空格隔开。分别表示最少撤去的桌子数量以及每张桌子到距离它最远的桌子的距离之和的最大值。\n\n实数比较按绝对误差或相对误差不超过 $10 ^ {-9}$：令你输出的答案为 $a$，标准答案为 $b$，你的答案被判为正确当且仅当 $\\frac{|a - b|}{\\max(1, |b|)} \\leq 10 ^ {-9}$。", "hint": "**「样例解释」**\n\n对于第一组询问，选择 $(1, 1), (1, 3), (3, 1)$ 和 $(3, 3)$ 最优。撤去了 $3\\times 3 - 4 = 5$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{2 ^ 2 + 2 ^ 2} = 2\\sqrt 2$，因此第二问答案为 $8\\sqrt 2$。如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y8fi4qhr.png)\n\n对于第二组询问，选择 $(1, 1)$ 和 $(2, 4)$ 最优。撤去了 $2\\times 4 - 2 = 6$ 张桌子，且每张桌子到距离它最远的桌子的距离均为 $\\sqrt{1 ^ 2 + 3 ^ 2} = \\sqrt {10}$，因此第二问答案为 $2\\sqrt {10}$。\n\n如果选择 $(1, 1)$ 和 $(2, 3)$，则第二问答案为 $2\\sqrt 5$，不优。\n\n**「评分方式」**\n\n对于每组测试数据：\n\n- 若你第一问的答案错误，得 0 分。\n- 否则，若你第二问的答案错误，得 0.8 分。\n- 否则，得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，**若你输出的格式错误，得 0 分**。因此，如果你只希望获得第一问的分数，请在第二问输出任意合理范围内的实数。\n\n**「数据范围与约定」**\n\n- 测试点 #1（15 points）：$n, m$ 均为奇数。\n- 测试点 #2（20 points）：$n = 1$。\n- 测试点 #3（25 points）：$n = 2$。\n- 测试点 #4（30 points）：$n$ 为奇数。\n- 测试点 #5（10 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 57$。\n- $1\\leq n, m\\leq 1064$。\n\n**「帮助与提示」**\n\n- 你可以使用 `cmath` 中的 `sqrt(x)` 函数计算 $x$ 的平方根。它返回 `double` 类型的值。`sqrtl(x)` 精度更高，它返回 `long double` 类型的值。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) A\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P8453", "type": "P", "difficulty": 4, "samples": [["0\n4\n4 0 3\n1 0 6 4\n8 5 2\n1 5 5 7 1 5 5 7\n1 0 0\n15\n4 3 0\n65535 65535 57 57\n", "1010011\n|||\n10100000\n^|^^^^|\n1000000000000000\n\n0\n^^^\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "位运算", "构造", "洛谷月赛"], "title": "「SWTR-8」美元巨大", "background": "#### 输出不允许有前导零。\n\n原题目名称为「美元巨大二的二的二的二的二」。\n\n小 A 喜欢用形如\n$$\n\\Huge 2 ^ {2 ^ {2 ^ {2 ^ {2}}}}\n$$\n的幂塔把小 T 的博客炸掉。", "description": "小 A 有 $n$ 个 $2$ 的幂 $a_1, a_2, \\cdots, a_n$。他要在这些数之间插入 $x$ 个异或运算符和 $y$ 个或运算符，组成一个表达式。保证 $x + y = n - 1$。\n\n表达式越大，越有可能炸掉小 T 的博客。小 A 希望 **从左往右** 计算表达式时它的值最大。他想知道表达式最大可能的取值是多少，用二进制表示。他还希望你构造出这样的表达式，因为他懒得自己构造了。\n\n若存在多组构造方案，输出任意一组。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行三个整数 $n, x, y$。\n- 第二行 $n$ 个整数 $b_i$，表示 $a_i = 2 ^ {b_i}$。", "outputFormat": "对于每组测试数据：\n\n- 第一行输出一个二进制数表示答案。**不允许有前导零**，除非答案为 $0$。\n- 第二行输出一个长为 $n - 1$ 的由 `^` 和 `|` 组成的字符串，其中 $s_i = \\texttt{\\,\\,\\^{}\\,\\,}$ 表示 $a_i$ 与 $a_{i + 1}$ 之间的运算符为异或，$s_i = \\texttt |$ 表示该运算符为或。你需要保证 `^` 的个数为 $x$，`|` 的个数为 $y$。", "hint": "**「评分方式」**\n\n对于每组测试数据：\n\n- 若你输出的第一行比标准答案劣，得 0 分。\n- 若你输出的第一行比标准答案优，则 checker 将检查你的构造方案是否正确。若正确，则返回 `_fail`，表现为测试点 UKE；否则得 0 分。\n- 否则，你输出的第一行和标准答案一样。若构造方案不正确，得 0.6 分；否则得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，checker 能检测出你的答案比标准答案优的前提是输出完全符合格式。**一旦输出不符合格式，得 0 分**。格式限制包括但不限于：\n\n- 第一行不得输出除 `0` 和 `1` 以外的字符。\n- 第二行不得输出除 `^` 和 `|` 以外的字符，且字符串长度恰为 $n - 1$。\n- `^` 的个数恰为 $x$，`|` 的个数恰为 $y$。\n\n**「数据范围与约定」**\n\n- 测试点 #1（10 points）：所有 $b_i$ 互不相等。\n- 测试点 #2（20 points）：所有 $b_i$ 相等。\n- 测试点 #3（30 points）：$n \\leq 8$。\n- 测试点 #4（25 points）：$n \\leq 10 ^ 3$。\n- 测试点 #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 20$。\n- $1 \\leq n \\leq 2.5 \\times 10 ^ 4$。\n- $0 \\leq x, y < n$，$x + y = n - 1$。\n- $1\\leq a_i < 2 ^ {2 ^ {2 ^ {2 ^ 2}}}$，即 $0\\leq b_i < 65536$。\n\n**「帮助与提示」**\n\n- 关于 [位运算](https://oi-wiki.org/math/bit/)。\n- 请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) B\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」美元巨大", "background": "#### 输出不允许有前导零。\n\n原题目名称为「美元巨大二的二的二的二的二」。\n\n小 A 喜欢用形如\n$$\n\\Huge 2 ^ {2 ^ {2 ^ {2 ^ {2}}}}\n$$\n的幂塔把小 T 的博客炸掉。", "description": "小 A 有 $n$ 个 $2$ 的幂 $a_1, a_2, \\cdots, a_n$。他要在这些数之间插入 $x$ 个异或运算符和 $y$ 个或运算符，组成一个表达式。保证 $x + y = n - 1$。\n\n表达式越大，越有可能炸掉小 T 的博客。小 A 希望 **从左往右** 计算表达式时它的值最大。他想知道表达式最大可能的取值是多少，用二进制表示。他还希望你构造出这样的表达式，因为他懒得自己构造了。\n\n若存在多组构造方案，输出任意一组。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行三个整数 $n, x, y$。\n- 第二行 $n$ 个整数 $b_i$，表示 $a_i = 2 ^ {b_i}$。", "outputFormat": "对于每组测试数据：\n\n- 第一行输出一个二进制数表示答案。**不允许有前导零**，除非答案为 $0$。\n- 第二行输出一个长为 $n - 1$ 的由 `^` 和 `|` 组成的字符串，其中 $s_i = \\texttt{\\,\\,\\^{}\\,\\,}$ 表示 $a_i$ 与 $a_{i + 1}$ 之间的运算符为异或，$s_i = \\texttt |$ 表示该运算符为或。你需要保证 `^` 的个数为 $x$，`|` 的个数为 $y$。", "hint": "**「评分方式」**\n\n对于每组测试数据：\n\n- 若你输出的第一行比标准答案劣，得 0 分。\n- 若你输出的第一行比标准答案优，则 checker 将检查你的构造方案是否正确。若正确，则返回 `_fail`，表现为测试点 UKE；否则得 0 分。\n- 否则，你输出的第一行和标准答案一样。若构造方案不正确，得 0.6 分；否则得 1 分。\n\n每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。\n\n注意，checker 能检测出你的答案比标准答案优的前提是输出完全符合格式。**一旦输出不符合格式，得 0 分**。格式限制包括但不限于：\n\n- 第一行不得输出除 `0` 和 `1` 以外的字符。\n- 第二行不得输出除 `^` 和 `|` 以外的字符，且字符串长度恰为 $n - 1$。\n- `^` 的个数恰为 $x$，`|` 的个数恰为 $y$。\n\n**「数据范围与约定」**\n\n- 测试点 #1（10 points）：所有 $b_i$ 互不相等。\n- 测试点 #2（20 points）：所有 $b_i$ 相等。\n- 测试点 #3（30 points）：$n \\leq 8$。\n- 测试点 #4（25 points）：$n \\leq 10 ^ 3$。\n- 测试点 #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 20$。\n- $1 \\leq n \\leq 2.5 \\times 10 ^ 4$。\n- $0 \\leq x, y < n$，$x + y = n - 1$。\n- $1\\leq a_i < 2 ^ {2 ^ {2 ^ {2 ^ 2}}}$，即 $0\\leq b_i < 65536$。\n\n**「帮助与提示」**\n\n- 关于 [位运算](https://oi-wiki.org/math/bit/)。\n- 请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) B\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P8454", "type": "P", "difficulty": 5, "samples": [["0\n7 7 1 2 3 2 -3\n1 0 6 4 8 2 2\n1 1 1\n4\n3\n1 2 0\n3 4\n\n1 2 0\n2 4\n\n2 1064\n1 1 0\n1\n\n2 5\n1 2 2\n2 7\n4 6", "1\n2\n4\n-3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SWTR-8」补题计划", "background": "因为写博客，小 A 欠下了很多题没有补。", "description": "小 A 一共有 $n$ 道题目没有补。评估后，他认为第 $i$ 题的难度为 $x_i$。\n\n同时，他对自己的水平有评估值 $w$。他的水平会波动，因此 $w$ 会改变。\n\n小 A 认为补难度和自己水平相近的题目（相差不超过 $b_1$）能带来收益 $inc$；相反，如果相差过大（相差超过 $b_2$）则浪费了时间，导致负收益 $dec$。因此，补第 $i$ 道题的收益为\n\n$$\n\\begin{cases}\ninc & |x_i - w| \\leq b_1 \\\\\n0 & b_1 < |x_i - w| \\leq b_2 \\\\\ndec & |x_i - w| > b_2 \\\\\n\\end{cases}\n$$\n\n保证 $b_1 \\leq b_2$ 且 $dec < 0 < inc$。\n\n此外，小 A 有一些喜欢和讨厌的题。如果他没有补任何喜欢的题，或补了任何讨厌的题，就会不高兴。\n\n小 A 将选择一段编号连续的题目进行补题。他希望补每道题的收益之和最大，并且补完题目后不会不高兴。请你告诉他这个最大值。\n\n**任意询问之间独立**。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行七个整数 $n, q, w, b_1, b_2, inc, dec$，其中 $q$ 表示事件数量。\n\n第三行 $n$ 个整数 $x_1, x_2, \\cdots, x_n$。\n\n接下来若干行，每一行或三行表示一次事件：\n\n- 首先一个整数 $op\\in \\{1, 2\\}$。\n- 若 $op = 1$，则接下来两个整数 $l, h$，表示喜欢的题目数量和讨厌的题目数量；接下来一行 $l$ 个整数 $il_1, il_2, \\cdots, il_l$，表示喜欢的题目编号；接下来一行 $h$ 个整数 $ih_1, ih_2, \\cdots, ih_h$，表示讨厌的题目编号。保证任意 $il_i \\neq ih_j$。\n- 若 $op = 2$，则接下来一个整数 $w$，表示新的水平评估值。", "outputFormat": "对于每次 $op = 1$ 的事件，输出一行一个整数表示答案。", "hint": "**「样例解释」**\n\n$w = 1$ 时，每道题目的收益分别为 $2, 2, -3, 0, -3, 2, 2$。\n\n第一次询问必须要补第 $4$ 题，不能补第 $3$ 题，最优方案为 $[4, 7]$，收益为 $1$。\n\n第二次询问必须要补第 $3$ 题或第 $4$ 题，最优方案为 $[1, 7]$，收益为 $2$。\n\n第三次询问必须要补第 $2$ 题或第 $4$ 题，最优方案为 $[1, 2]$，收益为 $4$。\n\n$w = 1064$ 时，所有题目的收益均为 $-3$。\n\n第四次询问必须要补第 $1$ 题，最优方案为 $[1, 1]$，收益为 $-3$。\n\n$w = 5$ 时，每道题目的收益分别为 $-3, -3, 2, 2, 0, 0, 0$。\n\n第五次询问必须要补第 $2$ 题或第 $7$ 题，不能补第 $4$ 题和第 $6$ 题，最优方案为 $[7, 7]$，收益为 $0$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（7 points）：$n, q\\leq 100$。\n- Subtask #2（12 points）：$n, q\\leq 500$。依赖 Subtask #1。\n- Subtask #3（20 points）：$n, q\\leq 4 \\times 10 ^ 3$。依赖 Subtask #2。\n- Subtask #4（25 points）：$w, x_i \\leq 100$。\n- Subtask #5（11 points）：$l = 1$，$h = 0$。\n- Subtask #6（15 points）：$w, x_i \\leq 10 ^ 5$。依赖 Subtask #4。\n- Subtask #7（10 points）：无特殊限制。依赖 Subtask #3，#5，#6。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, q \\leq 10 ^ 5$。\n- $0\\leq w, x_i \\leq 10 ^ 9$，$0\\leq b_1 \\leq b_2$ 且 $b_2$ 不大于 $w, x_i$ 上界的一半。\n- $-10 ^ 4 \\leq dec < 0 < inc \\leq 10 ^ 4$。\n- $1\\leq l, il_i, ih_j \\leq n$，$0 \\leq h < n$，$l + h\\leq 5$。\n- 保证 $il$，$ih$ 递增，且一组询问每个下标至多出现一次。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) C\n- Idea & Solution：[tzc_wk](https://www.luogu.com.cn/user/115194)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294) & [chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"en": {"title": "\"SWTR-8\" Make-up Problem Plan", "background": "Because he writes a blog, Little A has left many problems unsolved and has not made them up yet.", "description": "Little A has a total of $n$ problems that he has not made up. After evaluation, he thinks the difficulty of problem $i$ is $x_i$.\n\nAt the same time, he has an evaluation value $w$ for his own level. His level may fluctuate, so $w$ will change.\n\nLittle A believes that making up problems whose difficulty is close to his level (difference no more than $b_1$) brings a benefit $inc$; on the contrary, if the difference is too large (difference greater than $b_2$), it wastes time and causes a negative benefit $dec$. Therefore, the benefit of making up problem $i$ is\n\n$$\n\\begin{cases}\ninc & |x_i - w| \\leq b_1 \\\\\n0 & b_1 < |x_i - w| \\leq b_2 \\\\\ndec & |x_i - w| > b_2 \\\\\n\\end{cases}\n$$\n\nIt is guaranteed that $b_1 \\leq b_2$ and $dec < 0 < inc$.\n\nIn addition, Little A has some problems he likes and dislikes. If he does not make up any liked problem, or if he makes up any disliked problem, he will be unhappy.\n\nLittle A will choose a consecutive segment of problems (by index) to make up. He wants to maximize the sum of benefits of all chosen problems, and he must not be unhappy after finishing. Please tell him this maximum value.\n\n**All queries are independent of each other**.", "inputFormat": "The first line contains an integer $S$, indicating the Subtask number of this test point.\n\nThe second line contains seven integers $n, q, w, b_1, b_2, inc, dec$, where $q$ is the number of events.\n\nThe third line contains $n$ integers $x_1, x_2, \\cdots, x_n$.\n\nThe following lines describe events. Each event takes either one line or three lines:\n\n- First an integer $op\\in \\{1, 2\\}$.\n- If $op = 1$, then the next two integers $l, h$ represent the number of liked problems and disliked problems; the next line contains $l$ integers $il_1, il_2, \\cdots, il_l$, the indices of liked problems; the next line contains $h$ integers $ih_1, ih_2, \\cdots, ih_h$, the indices of disliked problems. It is guaranteed that any $il_i \\neq ih_j$.\n- If $op = 2$, then the next integer $w$ is the new level evaluation value.", "outputFormat": "For each event with $op = 1$, output one line with one integer, the answer.", "hint": "**\"Sample Explanation\"**\n\nWhen $w = 1$, the benefits of each problem are $2, 2, -3, 0, -3, 2, 2$.\n\nIn the first query, you must make up problem $4$, and you must not make up problem $3$. The optimal choice is $[4, 7]$, with benefit $1$.\n\nIn the second query, you must make up problem $3$ or problem $4$. The optimal choice is $[1, 7]$, with benefit $2$.\n\nIn the third query, you must make up problem $2$ or problem $4$. The optimal choice is $[1, 2]$, with benefit $4$.\n\nWhen $w = 1064$, the benefit of every problem is $-3$.\n\nIn the fourth query, you must make up problem $1$. The optimal choice is $[1, 1]$, with benefit $-3$.\n\nWhen $w = 5$, the benefits of each problem are $-3, -3, 2, 2, 0, 0, 0$.\n\nIn the fifth query, you must make up problem $2$ or problem $7$, and you must not make up problems $4$ and $6$. The optimal choice is $[7, 7]$, with benefit $0$.\n\n**\"Constraints and Notes\"**\n\n**This problem uses bundled tests**.\n\n- Subtask #1 (7 points): $n, q\\leq 100$.\n- Subtask #2 (12 points): $n, q\\leq 500$. Depends on Subtask #1.\n- Subtask #3 (20 points): $n, q\\leq 4 \\times 10 ^ 3$. Depends on Subtask #2.\n- Subtask #4 (25 points): $w, x_i \\leq 100$.\n- Subtask #5 (11 points): $l = 1$, $h = 0$.\n- Subtask #6 (15 points): $w, x_i \\leq 10 ^ 5$. Depends on Subtask #4.\n- Subtask #7 (10 points): no special constraints. Depends on Subtask #3, #5, #6.\n\nFor $100\\%$ of the data:\n\n- $1\\leq n, q \\leq 10 ^ 5$.\n- $0\\leq w, x_i \\leq 10 ^ 9$, $0\\leq b_1 \\leq b_2$, and $b_2$ is no more than half of the upper bound of $w, x_i$.\n- $-10 ^ 4 \\leq dec < 0 < inc \\leq 10 ^ 4$.\n- $1\\leq l, il_i, ih_j \\leq n$, $0 \\leq h < n$, $l + h\\leq 5$.\n- It is guaranteed that $il$ and $ih$ are increasing, and within one query each index appears at most once.\n\n**\"Help and Tips\"**\n\nPlease pay attention to I/O optimization.\n\n**\"Problem Source\"**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) C\n- Idea & Solution: [tzc_wk](https://www.luogu.com.cn/user/115194).\n- Tester: [Alex_Wei](https://www.luogu.com.cn/user/123294) & [chenxia25](https://www.luogu.com.cn/user/138400)。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "「SWTR-8」补题计划", "background": "因为写博客，小 A 欠下了很多题没有补。", "description": "小 A 一共有 $n$ 道题目没有补。评估后，他认为第 $i$ 题的难度为 $x_i$。\n\n同时，他对自己的水平有评估值 $w$。他的水平会波动，因此 $w$ 会改变。\n\n小 A 认为补难度和自己水平相近的题目（相差不超过 $b_1$）能带来收益 $inc$；相反，如果相差过大（相差超过 $b_2$）则浪费了时间，导致负收益 $dec$。因此，补第 $i$ 道题的收益为\n\n$$\n\\begin{cases}\ninc & |x_i - w| \\leq b_1 \\\\\n0 & b_1 < |x_i - w| \\leq b_2 \\\\\ndec & |x_i - w| > b_2 \\\\\n\\end{cases}\n$$\n\n保证 $b_1 \\leq b_2$ 且 $dec < 0 < inc$。\n\n此外，小 A 有一些喜欢和讨厌的题。如果他没有补任何喜欢的题，或补了任何讨厌的题，就会不高兴。\n\n小 A 将选择一段编号连续的题目进行补题。他希望补每道题的收益之和最大，并且补完题目后不会不高兴。请你告诉他这个最大值。\n\n**任意询问之间独立**。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行七个整数 $n, q, w, b_1, b_2, inc, dec$，其中 $q$ 表示事件数量。\n\n第三行 $n$ 个整数 $x_1, x_2, \\cdots, x_n$。\n\n接下来若干行，每一行或三行表示一次事件：\n\n- 首先一个整数 $op\\in \\{1, 2\\}$。\n- 若 $op = 1$，则接下来两个整数 $l, h$，表示喜欢的题目数量和讨厌的题目数量；接下来一行 $l$ 个整数 $il_1, il_2, \\cdots, il_l$，表示喜欢的题目编号；接下来一行 $h$ 个整数 $ih_1, ih_2, \\cdots, ih_h$，表示讨厌的题目编号。保证任意 $il_i \\neq ih_j$。\n- 若 $op = 2$，则接下来一个整数 $w$，表示新的水平评估值。", "outputFormat": "对于每次 $op = 1$ 的事件，输出一行一个整数表示答案。", "hint": "**「样例解释」**\n\n$w = 1$ 时，每道题目的收益分别为 $2, 2, -3, 0, -3, 2, 2$。\n\n第一次询问必须要补第 $4$ 题，不能补第 $3$ 题，最优方案为 $[4, 7]$，收益为 $1$。\n\n第二次询问必须要补第 $3$ 题或第 $4$ 题，最优方案为 $[1, 7]$，收益为 $2$。\n\n第三次询问必须要补第 $2$ 题或第 $4$ 题，最优方案为 $[1, 2]$，收益为 $4$。\n\n$w = 1064$ 时，所有题目的收益均为 $-3$。\n\n第四次询问必须要补第 $1$ 题，最优方案为 $[1, 1]$，收益为 $-3$。\n\n$w = 5$ 时，每道题目的收益分别为 $-3, -3, 2, 2, 0, 0, 0$。\n\n第五次询问必须要补第 $2$ 题或第 $7$ 题，不能补第 $4$ 题和第 $6$ 题，最优方案为 $[7, 7]$，收益为 $0$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（7 points）：$n, q\\leq 100$。\n- Subtask #2（12 points）：$n, q\\leq 500$。依赖 Subtask #1。\n- Subtask #3（20 points）：$n, q\\leq 4 \\times 10 ^ 3$。依赖 Subtask #2。\n- Subtask #4（25 points）：$w, x_i \\leq 100$。\n- Subtask #5（11 points）：$l = 1$，$h = 0$。\n- Subtask #6（15 points）：$w, x_i \\leq 10 ^ 5$。依赖 Subtask #4。\n- Subtask #7（10 points）：无特殊限制。依赖 Subtask #3，#5，#6。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, q \\leq 10 ^ 5$。\n- $0\\leq w, x_i \\leq 10 ^ 9$，$0\\leq b_1 \\leq b_2$ 且 $b_2$ 不大于 $w, x_i$ 上界的一半。\n- $-10 ^ 4 \\leq dec < 0 < inc \\leq 10 ^ 4$。\n- $1\\leq l, il_i, ih_j \\leq n$，$0 \\leq h < n$，$l + h\\leq 5$。\n- 保证 $il$，$ih$ 递增，且一组询问每个下标至多出现一次。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) C\n- Idea & Solution：[tzc_wk](https://www.luogu.com.cn/user/115194)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294) & [chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P8455", "type": "P", "difficulty": 6, "samples": [["0\n1 2\n.*", "4"], ["0\n2 3\n..*\n...", "20"], ["0\n4 4\n..*.\n.*..\n*...\n....", "2112"], ["0\n7 6\n..*...\n......\n*...**\n......\n..*...\n......\n......", "5041530"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SWTR-8」扫雷计数", "background": "2020 年 6 月的某一天，小 A 在等待网络加载的过程中打开了扫雷，从此便一发不可收拾。\n\n小 A 是一个任何事都喜欢做到极致的人，玩游戏也不例外：他不惜花费大量时间不断尝试打破记录。一个个夜晚就在熟练的 `Alt + G + N` 中过去了。\n\n> “这把有戏，前五十个雷只用了不到四十五秒”。他心里想着，紧握鼠标的手微微颤抖。\n>\n> “快，快，快 …… 还有最后二十个雷 ……”。\n>\n> 游戏的关键时刻，他难以按捺激动的心情。直到他遇到了二选一。\n>\n> 他愣了一下，随后迅速按下最后两块空地当中的一个。\n> \n> 一束横贯屏幕的白色激光缓缓扫过，他知道自己打破了记录 …… [整整十二秒](https://cdn.luogu.com.cn/upload/image_hosting/1seixkiz.png)！巨大的惊喜让他跳了起来。\n>\n> 2020.6.19", "description": "以下是简化后的扫雷游戏规则：\n\n- 定义连通为 **八连通**。\n- 如果打开雷，所有雷 **全部同时爆炸**，游戏结束。\n- 如果打开空地，若其周围没有雷，则递归打开周围八个方块。\n- [如图](https://cdn.luogu.com.cn/upload/image_hosting/kjjqs2v1.png)，点开任意红色框内方块均形成当前局面。\n\n\n给定一张 $n\\times m$ 的初始地图。小 A 决定搜出所有可能的局面，并找到最优鼠标点击顺序，从而速通这张地图。\n\n为设置合适的数组大小，小 A 需要知道有多少种不同局面。对 $998244353$ 取模。\n\n- 如果方块是雷，它有爆炸和未爆炸两种状态；如果方块是空地，它有打开和未打开两种状态。\n- 两个局面不同，当且仅当存在方块状态不同。\n- 保证周围无雷的空地形成不超过 $37$ 个连通块。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串描述地图，其中 $\\texttt{.}$ 表示方块无雷，$\\texttt{*}$ 表示方块有雷。", "outputFormat": "一行一个整数表示答案。", "hint": "**「样例解释」**\n\n用 `.` 表示未打开的方块，`+` 表示打开的方块，`*` 表示未爆炸的雷，`!` 表示爆炸的雷。\n\n样例 1 的所有 4 种局面为 `.*   +*   .!   +!`。\n\n样例 2 的所有 20 种局面为\n```plain\n0\n..*\n...\n   \n1\n++*  .+*  ..!  ..*  ..*\n++.  ...  ...  .+.  ..+  \n   \n2\n++!  ++*  .+!  .+*  .+*  ..!  ..!  ..*\n++.  +++  ...  .+.  ..+  .+.  ..+  .++\n   \n3\n++!  .+!  .+!  .+*  ..!\n+++  .+.  ..+  .++  .++\n   \n4\n.+!\n.++\n```\n\n数字描述了最少点击次数。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n设周围无雷的空地形成 $d$ 个连通块。\n\n- Subtask #1（15 points）：$nm\\leq 21$。\n- Subtask #2（4 points）：地图中只有一个雷。\n- Subtask #3（5 points）：$d = 0$。\n- Subtask #4（6 points）：$d = 1$。\n- Subtask #5（7 points）：$d = 2$。\n- Subtask #6（8 points）：$d \\leq 17$。依赖 Subtask #1，#2，#3，#4，#5。\n- Subtask #7（9 points）：$d \\leq 23$。依赖 Subtask #6。\n- Subtask #8（16 points）：$d\\leq 27$。依赖 Subtask #7。\n- Subtask #9（17 points）：$d\\leq 33$。依赖 Subtask #8。\n- Subtask #10（13 points）：无特殊限制。依赖 Subtask #9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, m\\leq 500$。\n- $0\\leq d\\leq 37$。\n- **不保证** 地图中有雷或空地。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) D\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400) & [asmend](https://www.luogu.com.cn/user/21658)。\n\n感谢 [Elegia](https://www.luogu.com.cn/user/21423) 对本题做出的贡献。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」扫雷计数", "background": "2020 年 6 月的某一天，小 A 在等待网络加载的过程中打开了扫雷，从此便一发不可收拾。\n\n小 A 是一个任何事都喜欢做到极致的人，玩游戏也不例外：他不惜花费大量时间不断尝试打破记录。一个个夜晚就在熟练的 `Alt + G + N` 中过去了。\n\n> “这把有戏，前五十个雷只用了不到四十五秒”。他心里想着，紧握鼠标的手微微颤抖。\n>\n> “快，快，快 …… 还有最后二十个雷 ……”。\n>\n> 游戏的关键时刻，他难以按捺激动的心情。直到他遇到了二选一。\n>\n> 他愣了一下，随后迅速按下最后两块空地当中的一个。\n> \n> 一束横贯屏幕的白色激光缓缓扫过，他知道自己打破了记录 …… [整整十二秒](https://cdn.luogu.com.cn/upload/image_hosting/1seixkiz.png)！巨大的惊喜让他跳了起来。\n>\n> 2020.6.19", "description": "以下是简化后的扫雷游戏规则：\n\n- 定义连通为 **八连通**。\n- 如果打开雷，所有雷 **全部同时爆炸**，游戏结束。\n- 如果打开空地，若其周围没有雷，则递归打开周围八个方块。\n- [如图](https://cdn.luogu.com.cn/upload/image_hosting/kjjqs2v1.png)，点开任意红色框内方块均形成当前局面。\n\n\n给定一张 $n\\times m$ 的初始地图。小 A 决定搜出所有可能的局面，并找到最优鼠标点击顺序，从而速通这张地图。\n\n为设置合适的数组大小，小 A 需要知道有多少种不同局面。对 $998244353$ 取模。\n\n- 如果方块是雷，它有爆炸和未爆炸两种状态；如果方块是空地，它有打开和未打开两种状态。\n- 两个局面不同，当且仅当存在方块状态不同。\n- 保证周围无雷的空地形成不超过 $37$ 个连通块。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串描述地图，其中 $\\texttt{.}$ 表示方块无雷，$\\texttt{*}$ 表示方块有雷。", "outputFormat": "一行一个整数表示答案。", "hint": "**「样例解释」**\n\n用 `.` 表示未打开的方块，`+` 表示打开的方块，`*` 表示未爆炸的雷，`!` 表示爆炸的雷。\n\n样例 1 的所有 4 种局面为 `.*   +*   .!   +!`。\n\n样例 2 的所有 20 种局面为\n```plain\n0\n..*\n...\n   \n1\n++*  .+*  ..!  ..*  ..*\n++.  ...  ...  .+.  ..+  \n   \n2\n++!  ++*  .+!  .+*  .+*  ..!  ..!  ..*\n++.  +++  ...  .+.  ..+  .+.  ..+  .++\n   \n3\n++!  .+!  .+!  .+*  ..!\n+++  .+.  ..+  .++  .++\n   \n4\n.+!\n.++\n```\n\n数字描述了最少点击次数。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n设周围无雷的空地形成 $d$ 个连通块。\n\n- Subtask #1（15 points）：$nm\\leq 21$。\n- Subtask #2（4 points）：地图中只有一个雷。\n- Subtask #3（5 points）：$d = 0$。\n- Subtask #4（6 points）：$d = 1$。\n- Subtask #5（7 points）：$d = 2$。\n- Subtask #6（8 points）：$d \\leq 17$。依赖 Subtask #1，#2，#3，#4，#5。\n- Subtask #7（9 points）：$d \\leq 23$。依赖 Subtask #6。\n- Subtask #8（16 points）：$d\\leq 27$。依赖 Subtask #7。\n- Subtask #9（17 points）：$d\\leq 33$。依赖 Subtask #8。\n- Subtask #10（13 points）：无特殊限制。依赖 Subtask #9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq n, m\\leq 500$。\n- $0\\leq d\\leq 37$。\n- **不保证** 地图中有雷或空地。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) D\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[chenxia25](https://www.luogu.com.cn/user/138400) & [asmend](https://www.luogu.com.cn/user/21658)。\n\n感谢 [Elegia](https://www.luogu.com.cn/user/21423) 对本题做出的贡献。", "locale": "zh-CN"}}}
{"pid": "P8456", "type": "P", "difficulty": 6, "samples": [["0\n8 13\n1 2 d\n1 3 d\n2 3 d\n3 4 d\n3 5 D\n4 5 d\n4 6 d\n5 6 D\n6 7 d\n6 8 d\n6 8 D\n6 8 D\n7 8 d", "24"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "圆方树"], "title": "「SWTR-8」地地铁铁", "background": "D_T_ : D_tt : ddT_ : ddtt = 9 : 3 : 3 : 1.", "description": "给定一张 $n$ 个点，$m$ 条边的无向连通图。每条边标有 `D` 或 `d`。\n\n定义无序点对 $(x, y)$ 是「[铁的](https://loj.ac/p/3398)」，当且仅当 $x \\neq y$ 且 $x, y$ 之间存在同时出现 `D` 和 `d` 的简单路径。\n\n小 A 深知自由组合定律 DdTt 的重要性，所以他让你对这样的点对计数。\n\n注意：\n\n- 简单路径定义为不经过重复 **节点** 的路径。\n- 保证图无自环，可能有重边。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $m$ 行，每行两个整数 $x, y$ 以及字母 $c$，表示一条连接 $x, y$ 且标有 $c$ 的无向边。", "outputFormat": "一行一个整数表示答案。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（6 points）：$n \\leq 8$，$m \\leq 20$。\n- Subtask #2（16 points）：$n\\leq 15$，$m\\leq 822$。依赖 Subtask #1。\n- Subtask #3（17 points）：$m = n - 1$。\n- Subtask #4（18 points）：$m = n$。\n- Subtask #5（19 points）：$n\\leq 1064$，$m\\leq 10 ^ 4$。依赖 Subtask #2。\n- Subtask #6（24 points）：无特殊限制。依赖 Subtask #3，#4，#5。\n\n对于 $100\\%$ 的数据：\n\n- $2\\leq n \\leq 4\\times 10 ^ 5$，$n - 1\\leq m\\leq  10 ^ 6$。\n- $1\\leq x, y\\leq n$。\n- $c\\in \\{\\texttt{D}, \\texttt{d}\\}$。\n- 保证图无自环，可能有重边。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) E\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[asmend](https://www.luogu.com.cn/user/21658)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」地地铁铁", "background": "D_T_ : D_tt : ddT_ : ddtt = 9 : 3 : 3 : 1.", "description": "给定一张 $n$ 个点，$m$ 条边的无向连通图。每条边标有 `D` 或 `d`。\n\n定义无序点对 $(x, y)$ 是「[铁的](https://loj.ac/p/3398)」，当且仅当 $x \\neq y$ 且 $x, y$ 之间存在同时出现 `D` 和 `d` 的简单路径。\n\n小 A 深知自由组合定律 DdTt 的重要性，所以他让你对这样的点对计数。\n\n注意：\n\n- 简单路径定义为不经过重复 **节点** 的路径。\n- 保证图无自环，可能有重边。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行两个整数 $n, m$。\n\n接下来 $m$ 行，每行两个整数 $x, y$ 以及字母 $c$，表示一条连接 $x, y$ 且标有 $c$ 的无向边。", "outputFormat": "一行一个整数表示答案。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（6 points）：$n \\leq 8$，$m \\leq 20$。\n- Subtask #2（16 points）：$n\\leq 15$，$m\\leq 822$。依赖 Subtask #1。\n- Subtask #3（17 points）：$m = n - 1$。\n- Subtask #4（18 points）：$m = n$。\n- Subtask #5（19 points）：$n\\leq 1064$，$m\\leq 10 ^ 4$。依赖 Subtask #2。\n- Subtask #6（24 points）：无特殊限制。依赖 Subtask #3，#4，#5。\n\n对于 $100\\%$ 的数据：\n\n- $2\\leq n \\leq 4\\times 10 ^ 5$，$n - 1\\leq m\\leq  10 ^ 6$。\n- $1\\leq x, y\\leq n$。\n- $c\\in \\{\\texttt{D}, \\texttt{d}\\}$。\n- 保证图无自环，可能有重边。\n\n**「帮助与提示」**\n\n请注意 IO 优化。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) E\n- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n- Tester：[asmend](https://www.luogu.com.cn/user/21658)。", "locale": "zh-CN"}}}
{"pid": "P8457", "type": "P", "difficulty": 7, "samples": [["0\n10\n7 4\n7\n16 3\n2\n6 1\n2 3\n144 5\n2 3\n2520 11\n2 3 5 7\n999999 2\n3 7 11 13 37\n22511 21795\n22511\n47067727606562827 30911969774113407\n3083 13697 25747 43291\n2147483648 2333333\n2\n675288511488360000 510472780110265817\n2 3 5 7 11", "25\n11\n1\n101\n4811\n219871229\n16139671\n760913896873844308082367046696111\n1221598821\n24445987958110300438937\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["原根", "数论", "洛谷原创", "Special Judge", "O2优化", "扩展欧几里德算法", "中国剩余定理 CRT", "逆元", "洛谷月赛"], "title": "「SWTR-8」幂塔方程", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iflu3244.png)\n\n图片来自于 Solara570 的 B 站视频 [轻易相信简单直观的结论究竟有多危险？](https://www.bilibili.com/video/BV1PW41177Vb)。\n\n很久以前的某一天，小 A 在 B 站上无意间刷到了这个视频。视频中的无穷幂塔方程及其「简单直观，但暗藏陷阱」的解法令他影响深刻。\n$$\n\\Huge x ^ {x ^ {x ^ {x ^ {x}}}}\n$$", "description": "如果小 A 是一个，一个一个一个毒瘤，他会让你求解套了十层甚至九层的幂塔方程，但他不是。\n\n他想让你求解：\n$$\nx ^ x\\equiv D \\pmod n\n$$\n\n保证 $n$ 的最大质因子不超过 $10 ^ 5$，且 $D$ 与 $n$ 互质。\n\n你需要保证得到的解 $x$ 为 $[0, 2 ^ {125}]$ 范围内的整数。若该范围内无解，输出 $-1$；若存在多解，输出任意一个。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行两个整数 $n, D$。\n- 第二行若干递增的质数 $p_1, p_2, \\cdots, p_k$，表示 $n$ 的所有质因子。", "outputFormat": "输出 $T$ 行 $[-1, 2 ^ {125}]$ 范围内的整数。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（5 points）：$n\\leq 20$。\n- Subtask #2（8 points）：$n\\leq 400$。依赖 Subtask #1。\n- Subtask #3（11 points）：$n$ 是质数，$T\\leq 10 ^ 4$。\n- Subtask #4（15 points）：$\\mu(n) \\neq 0$，$T\\leq 100$。\n- Subtask #5（9 points）：$\\mu(n) \\neq 0$，$T\\leq 10 ^ 4$。依赖 Subtask #4。\n- Subtask #6（13 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 100$。\n- Subtask #7（7 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 10 ^ 4$。依赖 Subtask #3，#6。\n- Subtask #8（6 points）：$n$ 的最大质因子不超过 $ 1064$。依赖 Subtask #2。\n- Subtask #9（16 points）：$n\\leq 10 ^ 9$，$T\\leq 10 ^ 4$。\n- Subtask #10（10 points）：无特殊限制。依赖 Subtask #5，#7，#8，#9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 4\\times 10 ^ 4$。\n- $2\\leq n \\leq 10 ^ {18}$。\n- $1\\leq D < n$，$D\\perp n$。\n- $2\\leq p_1 < p_2 < \\cdots < p_k \\leq 10 ^ 5$。\n\n**「帮助与提示」**\n\n选手可以通过边读入边试除的方式判断何时停止读入 $n$ 的质因子。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) F\n- Idea & Solution：[demonlover923](https://www.luogu.com.cn/user/152997) & [codecode](https://www.luogu.com.cn/user/119526)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n**Update on 2025.5.30**：本题可以做 $p_k\\leq 10 ^ {18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-8」幂塔方程", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iflu3244.png)\n\n图片来自于 Solara570 的 B 站视频 [轻易相信简单直观的结论究竟有多危险？](https://www.bilibili.com/video/BV1PW41177Vb)。\n\n很久以前的某一天，小 A 在 B 站上无意间刷到了这个视频。视频中的无穷幂塔方程及其「简单直观，但暗藏陷阱」的解法令他影响深刻。\n$$\n\\Huge x ^ {x ^ {x ^ {x ^ {x}}}}\n$$", "description": "如果小 A 是一个，一个一个一个毒瘤，他会让你求解套了十层甚至九层的幂塔方程，但他不是。\n\n他想让你求解：\n$$\nx ^ x\\equiv D \\pmod n\n$$\n\n保证 $n$ 的最大质因子不超过 $10 ^ 5$，且 $D$ 与 $n$ 互质。\n\n你需要保证得到的解 $x$ 为 $[0, 2 ^ {125}]$ 范围内的整数。若该范围内无解，输出 $-1$；若存在多解，输出任意一个。\n\n多组测试数据。", "inputFormat": "第一行一个整数 $S$，表示该测试点的 Subtask 编号。\n\n第二行一个整数 $T$，表示数据组数。接下来 $T$ 组测试数据，每组数据形如：\n\n- 第一行两个整数 $n, D$。\n- 第二行若干递增的质数 $p_1, p_2, \\cdots, p_k$，表示 $n$ 的所有质因子。", "outputFormat": "输出 $T$ 行 $[-1, 2 ^ {125}]$ 范围内的整数。", "hint": "**「数据范围与约定」**\n\n**本题采用捆绑测试**。\n\n- Subtask #1（5 points）：$n\\leq 20$。\n- Subtask #2（8 points）：$n\\leq 400$。依赖 Subtask #1。\n- Subtask #3（11 points）：$n$ 是质数，$T\\leq 10 ^ 4$。\n- Subtask #4（15 points）：$\\mu(n) \\neq 0$，$T\\leq 100$。\n- Subtask #5（9 points）：$\\mu(n) \\neq 0$，$T\\leq 10 ^ 4$。依赖 Subtask #4。\n- Subtask #6（13 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 100$。\n- Subtask #7（7 points）：$n = p ^ k(p \\in \\mathrm{prime})$，$T\\leq 10 ^ 4$。依赖 Subtask #3，#6。\n- Subtask #8（6 points）：$n$ 的最大质因子不超过 $ 1064$。依赖 Subtask #2。\n- Subtask #9（16 points）：$n\\leq 10 ^ 9$，$T\\leq 10 ^ 4$。\n- Subtask #10（10 points）：无特殊限制。依赖 Subtask #5，#7，#8，#9。\n\n对于 $100\\%$ 的数据：\n\n- $1\\leq T\\leq 4\\times 10 ^ 4$。\n- $2\\leq n \\leq 10 ^ {18}$。\n- $1\\leq D < n$，$D\\perp n$。\n- $2\\leq p_1 < p_2 < \\cdots < p_k \\leq 10 ^ 5$。\n\n**「帮助与提示」**\n\n选手可以通过边读入边试除的方式判断何时停止读入 $n$ 的质因子。\n\n**「题目来源」**\n\n- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) F\n- Idea & Solution：[demonlover923](https://www.luogu.com.cn/user/152997) & [codecode](https://www.luogu.com.cn/user/119526)。\n- Tester：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n**Update on 2025.5.30**：本题可以做 $p_k\\leq 10 ^ {18}$。", "locale": "zh-CN"}}}
{"pid": "P8458", "type": "P", "difficulty": 4, "samples": [["2 12\n3 2 3 4\n4 1 2 3 4", "90"], ["3 999999924\n4 4 4 5 3\n7 1 9 1 9 8 1 0\n6 1 1 4 5 1 4", "599517664"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "「REOI-p1」打捞", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/0ukve6wl.png)\n\n出题人：XL4453\n\n验题人：犇犇犇犇\n\n文案：小糯米\n\nupd：注意，先取模再取max", "description": "“别介意，我和那些家伙都是打捞者。我们在头一次追寻梦想降落到地表时，就做好丧命的准备和赴死的觉悟了。”\n\n葛力克一行人在一次打捞中，时来运转，获得了不少的宝藏。在归途之路，言及谁的功劳最大之时，大家却起了冲突。有人说自己的宝藏是史上绝无仅有，是在鬼门关前绕了一大圈才好不容易抢到的一个；有人说自己惨淡经营，虽然没有获得那么珍贵的宝物，但数量可观，也足以与之相提并论；也有人说自己的收获二者兼有，应当综合评价云云：总之，场面一片混乱，颇有生死与共的患难之交从此决裂的危险。\n\n于是，大家把目光投到了葛力克的身上，这让他十分为难。思索良久，他决定这样来评价大家的贡献： \n\n假设一共有 $n$ 名打捞者，第 $i$ 位打捞者 $a_i$ 取得的宝物数量为 $l_i$ ，而其中第 $p$ 件宝物对应的价值则为 $a_{i,p}$ ，那么在计算的时候只需要将每个序列相加求和即可。但是葛力克并不满足于现状，他现在想知道，如果是将两个人的贡献放在一起看待，那么又将如何计算呢？\n一番激烈的头脑风暴后，他决定这样来计算两位打捞者 $i,j$ 之间的贡献 $g(i,j)$ ：将 $a_i$ 与$a_j$ 分别复制数遍使得两堆宝物的数量都为 $k$ ，得到两个序列 $a_i',a_j'$ ，则 $g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。\n\n现在葛力克想知道，这个贡献值的最大值是多少。\n\n因为贡献值可能会很大，超出了正常生物大脑的运算能力，所以我们对它进行 $998244353$ 的取余。\n\n----------\n形式化题面：给定一个整数 $n$，和 $n$ 个序列，第 $i$ 个序列 $\\{a_i\\}$ 长度为 $l_i$，将每个 $a_i$ 复制 $\\dfrac k{l_i}$ 遍得到 $\\{a'_i\\}$ 使得 $\\{a'_i\\}$ 的长度为 $k$。\n\n试求：$\\max\\limits_{i=1,j=i+1}^{i,j\\leq n}\\{g(i,j)\\bmod 998244353\\}$，其中$g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n接下来输入 $n$ 行。第 $i + 1$ 行第一个数为 $l_i$，接下来输入 $l_i$ 个数，表示打捞者的宝藏 $a_i$。\n", "outputFormat": "一个整数，表示所求的最大值。", "hint": "#### 样例解释 $#1$\n\n$a_1'=2, 3, 4, 2, 3, 4, 2, 3, 4, 2, 3, 4$。  \n$a_2'=1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4$。  \n$g(1,2)=2\\times1+3\\times2+4\\times3+2\\times4+3\\times1+4\\times2+2\\times3+3\\times4+4\\times1+2\\times2+3\\times3+4\\times4=90$。\n\n#### 样例解释 $#2$\n\n$g(1,2)\\bmod998244353=599517664$。  \n$g(1,3)\\bmod998244353=350889018$。  \n$g(2,3)\\bmod998244353=66930325$。  \n$\\max\\limits_{1\\leq i < j \\leq n}\\{g(i,j)\\bmod998244353\\}=599517664$。  \n\n#### 数据范围\n\n对于 $10\\%$ 的数据，有 $n=2$。  \n对于 $30\\%$ 的数据，有 $k \\leq 100$。  \n对于 $60\\%$ 的数据，所有 $l_i$ 两两互质，即 $\\gcd(l_i,l_j)=1(1\\leq i < j \\leq n)$，$\\gcd$ 为[最大公约数](https://oi-wiki.org/math/number-theory/gcd/)。  \n对于 $100\\%$ 的数据，有 $1\\leq n\\le 100，1\\leq l_i\\le 1000，1\\leq k,a_{i,j}\\le 10^{9}$ 且对于任意的 $i \\in [1,n],l_i\\mid k$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-p1」打捞", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/0ukve6wl.png)\n\n出题人：XL4453\n\n验题人：犇犇犇犇\n\n文案：小糯米\n\nupd：注意，先取模再取max", "description": "“别介意，我和那些家伙都是打捞者。我们在头一次追寻梦想降落到地表时，就做好丧命的准备和赴死的觉悟了。”\n\n葛力克一行人在一次打捞中，时来运转，获得了不少的宝藏。在归途之路，言及谁的功劳最大之时，大家却起了冲突。有人说自己的宝藏是史上绝无仅有，是在鬼门关前绕了一大圈才好不容易抢到的一个；有人说自己惨淡经营，虽然没有获得那么珍贵的宝物，但数量可观，也足以与之相提并论；也有人说自己的收获二者兼有，应当综合评价云云：总之，场面一片混乱，颇有生死与共的患难之交从此决裂的危险。\n\n于是，大家把目光投到了葛力克的身上，这让他十分为难。思索良久，他决定这样来评价大家的贡献： \n\n假设一共有 $n$ 名打捞者，第 $i$ 位打捞者 $a_i$ 取得的宝物数量为 $l_i$ ，而其中第 $p$ 件宝物对应的价值则为 $a_{i,p}$ ，那么在计算的时候只需要将每个序列相加求和即可。但是葛力克并不满足于现状，他现在想知道，如果是将两个人的贡献放在一起看待，那么又将如何计算呢？\n一番激烈的头脑风暴后，他决定这样来计算两位打捞者 $i,j$ 之间的贡献 $g(i,j)$ ：将 $a_i$ 与$a_j$ 分别复制数遍使得两堆宝物的数量都为 $k$ ，得到两个序列 $a_i',a_j'$ ，则 $g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。\n\n现在葛力克想知道，这个贡献值的最大值是多少。\n\n因为贡献值可能会很大，超出了正常生物大脑的运算能力，所以我们对它进行 $998244353$ 的取余。\n\n----------\n形式化题面：给定一个整数 $n$，和 $n$ 个序列，第 $i$ 个序列 $\\{a_i\\}$ 长度为 $l_i$，将每个 $a_i$ 复制 $\\dfrac k{l_i}$ 遍得到 $\\{a'_i\\}$ 使得 $\\{a'_i\\}$ 的长度为 $k$。\n\n试求：$\\max\\limits_{i=1,j=i+1}^{i,j\\leq n}\\{g(i,j)\\bmod 998244353\\}$，其中$g(i,j)= \\sum\\limits_{p=1}^k a'_{i,p}\\times a'_{j,p}$ 。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n接下来输入 $n$ 行。第 $i + 1$ 行第一个数为 $l_i$，接下来输入 $l_i$ 个数，表示打捞者的宝藏 $a_i$。\n", "outputFormat": "一个整数，表示所求的最大值。", "hint": "#### 样例解释 $#1$\n\n$a_1'=2, 3, 4, 2, 3, 4, 2, 3, 4, 2, 3, 4$。  \n$a_2'=1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4$。  \n$g(1,2)=2\\times1+3\\times2+4\\times3+2\\times4+3\\times1+4\\times2+2\\times3+3\\times4+4\\times1+2\\times2+3\\times3+4\\times4=90$。\n\n#### 样例解释 $#2$\n\n$g(1,2)\\bmod998244353=599517664$。  \n$g(1,3)\\bmod998244353=350889018$。  \n$g(2,3)\\bmod998244353=66930325$。  \n$\\max\\limits_{1\\leq i < j \\leq n}\\{g(i,j)\\bmod998244353\\}=599517664$。  \n\n#### 数据范围\n\n对于 $10\\%$ 的数据，有 $n=2$。  \n对于 $30\\%$ 的数据，有 $k \\leq 100$。  \n对于 $60\\%$ 的数据，所有 $l_i$ 两两互质，即 $\\gcd(l_i,l_j)=1(1\\leq i < j \\leq n)$，$\\gcd$ 为[最大公约数](https://oi-wiki.org/math/number-theory/gcd/)。  \n对于 $100\\%$ 的数据，有 $1\\leq n\\le 100，1\\leq l_i\\le 1000，1\\leq k,a_{i,j}\\le 10^{9}$ 且对于任意的 $i \\in [1,n],l_i\\mid k$。\n", "locale": "zh-CN"}}}
{"pid": "P8460", "type": "P", "difficulty": 6, "samples": [["100 3\n1 1\n2 2\n1 2\n5\n5 5\n2 1\n2 1\n5 1\n2 5", "No\nYes\nNo\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "并查集", "线段树分治"], "title": "「REOI-p1」按摩", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iojg3sgx.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/5m1v3g37.png)\n\n出题人：LinkyChristian\n\n验题人：Legitimity\n\n文案：小糯米", "description": "\n\n无论是勇者还是妖精，在执行任务时，都难免会患上一些特有的“职业病”。其中，在这份“常见勇者职业病名单”上排名第一的，叫作“急性魔力中毒”。虽然魔力中毒在表面上只是类似于发高烧的症状，但倘若没有每次根除，就会变成痼疾，身体马上就会超出负荷极限。魔力中毒的治疗方案，说起来倒是颇为实在：找到魔力淤积的部位，用力按压，利用类似中医按摩的原理，将其淤积点给揉开。具体的治疗原理如下：\n\n人体的魔力脉络，可以视作一个 $n \\times n$ 的网格。与中医腧穴中的经穴、经外穴分类类似，魔力的作用“穴位”，亦可以大致上分为阴性和阳性。为了更直观的叙述，我们不妨将阳性的魔力穴位在网格上用黑点表示。而魔力出现淤积，大概率的情形下便是因使用魔力导致肌肉紧绷，从而使得本是阴性的穴位变为阳性，或者阳性变为阴性的结果。所谓的按摩，其实就是将其恢复到其应有的状态，从而疏通魔力。判断按摩是否完成的标志，便是在这个网格中，是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。\n\n现在，经过了一场激烈的战斗，珂朵莉因使用魔力过度，又出现了急性魔力中毒的症状。在给珂朵莉检查身体的时候，威廉发现，在珂朵莉的魔力脉络上，有 $m$ 个魔力穴位呈阳性反应。现在他要进行 $k$ 次按摩，每次的按摩都会给出一个点，如果该点的穴位呈阳性则变为阴性，反之则成为阳性。\n\n威廉想知道，在每一次按摩结束后，他的治疗是否已经完成。\n\n------------\n\n形式化题面：给出一个  $n \\times n$ 的网格，其中有 $m$ 个点为黑点。\n\n共有 $k$ 个操作，每次操作使一个点黑白反转。判断在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "inputFormat": "第一行两个数：$n,m$。  \n接下来 $m$ 行，每行两个数 $x,y$，表示点 $(x,y)$ 为黑点。  \n下一行输入一个数 $k$ ，接下来 $k$ 行，每行两个数 $x,y$ ，表示对点 $(x,y)$ 进行一次操作(即按摩）。", "outputFormat": "输出 $k$ 行，每行一个 `Yes` 或 `No` 表示该次操作后治疗是否完成，即在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "hint": "对于样例1，初始状态为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ykf02pm6.png)\n\n之后每次操作后状态依次为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ml2qqt5d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/altczbf0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uqvq4u0j.png)\n\n对于 $5\\%$ 的数据，$n\\le 10,m\\le 5,k\\le 100$。  \n对于 $10\\%$ 的数据，$n,k\\le 100$。  \n对于 $20\\%$ 的数据，$n,k\\le 1000$。  \n对于 $80\\%$ 的数据，$n,k\\le 5\\times10^4$。   \n对于另外 $10\\%$ 的数据，$k=1$。  \n对于 $100\\%$ 的数据，$m\\le n \\le 10^5,k\\le 10^5$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-p1」按摩", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/iojg3sgx.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/5m1v3g37.png)\n\n出题人：LinkyChristian\n\n验题人：Legitimity\n\n文案：小糯米", "description": "\n\n无论是勇者还是妖精，在执行任务时，都难免会患上一些特有的“职业病”。其中，在这份“常见勇者职业病名单”上排名第一的，叫作“急性魔力中毒”。虽然魔力中毒在表面上只是类似于发高烧的症状，但倘若没有每次根除，就会变成痼疾，身体马上就会超出负荷极限。魔力中毒的治疗方案，说起来倒是颇为实在：找到魔力淤积的部位，用力按压，利用类似中医按摩的原理，将其淤积点给揉开。具体的治疗原理如下：\n\n人体的魔力脉络，可以视作一个 $n \\times n$ 的网格。与中医腧穴中的经穴、经外穴分类类似，魔力的作用“穴位”，亦可以大致上分为阴性和阳性。为了更直观的叙述，我们不妨将阳性的魔力穴位在网格上用黑点表示。而魔力出现淤积，大概率的情形下便是因使用魔力导致肌肉紧绷，从而使得本是阴性的穴位变为阳性，或者阳性变为阴性的结果。所谓的按摩，其实就是将其恢复到其应有的状态，从而疏通魔力。判断按摩是否完成的标志，便是在这个网格中，是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。\n\n现在，经过了一场激烈的战斗，珂朵莉因使用魔力过度，又出现了急性魔力中毒的症状。在给珂朵莉检查身体的时候，威廉发现，在珂朵莉的魔力脉络上，有 $m$ 个魔力穴位呈阳性反应。现在他要进行 $k$ 次按摩，每次的按摩都会给出一个点，如果该点的穴位呈阳性则变为阴性，反之则成为阳性。\n\n威廉想知道，在每一次按摩结束后，他的治疗是否已经完成。\n\n------------\n\n形式化题面：给出一个  $n \\times n$ 的网格，其中有 $m$ 个点为黑点。\n\n共有 $k$ 个操作，每次操作使一个点黑白反转。判断在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "inputFormat": "第一行两个数：$n,m$。  \n接下来 $m$ 行，每行两个数 $x,y$，表示点 $(x,y)$ 为黑点。  \n下一行输入一个数 $k$ ，接下来 $k$ 行，每行两个数 $x,y$ ，表示对点 $(x,y)$ 进行一次操作(即按摩）。", "outputFormat": "输出 $k$ 行，每行一个 `Yes` 或 `No` 表示该次操作后治疗是否完成，即在每次操作结束后是否存在一个以黑点作为顶点的所有边均平行于网格的多边形。", "hint": "对于样例1，初始状态为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ykf02pm6.png)\n\n之后每次操作后状态依次为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ml2qqt5d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lilddgfo.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/altczbf0.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uqvq4u0j.png)\n\n对于 $5\\%$ 的数据，$n\\le 10,m\\le 5,k\\le 100$。  \n对于 $10\\%$ 的数据，$n,k\\le 100$。  \n对于 $20\\%$ 的数据，$n,k\\le 1000$。  \n对于 $80\\%$ 的数据，$n,k\\le 5\\times10^4$。   \n对于另外 $10\\%$ 的数据，$k=1$。  \n对于 $100\\%$ 的数据，$m\\le n \\le 10^5,k\\le 10^5$。  ", "locale": "zh-CN"}}}
{"pid": "P8461", "type": "P", "difficulty": 6, "samples": [["2 2 2\n1 3 7 8\n4 5 9 10\n0 0\n0 0", "7"], ["2 3 3\n1 2 3 5 100 200\n5 7 9 10 400 500\n1000 1000 0\n1000 1000 0", "4009"], ["2 2 2\n1 2 4 5\n7 7 3 10\n2 1\n3 2", "14"], ["2 2 2\n1 2 4 5\n6 7 8 9\n12 33\n23 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「REOI-p1」回忆", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/3uztip2k.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsmn7uez.png)\n\n出题人：LinkyChristian\n\n文案：小糯米", "description": "“话虽如此，我们并没有四处游走让妖精一个一个地诞生。\n只是在作为素材的巨大魂体上施予咒迹，好让她们带着接近人族的体格与人格自然诞生罢了。”\n\n黄金妖精，自出生开始即刻下早夭诅咒之“人”，若非魔物无法抵御，是本不应在这茫茫尘世之中诞生之兵器。\n\n每当前世之回忆涌上妖精之时，便是开启一朵含苞待放之花凋零倒计时之日。妖精的记忆，是由一条射线组成，为了便于叙述，我们不妨将射线当作数轴进行处理。在她们的记忆之中，会有若干个区间，在这个区间之内的回忆，是极易受到前世回忆的侵蚀的。但是由于生物的回忆本身自是不可探视分明之物，我们只能得知它们的 $m1$ 个开始区间 $[sl_i,sr_i]$ 与 $m2$ 个结束区间$[el_j,er_j]$ 。在这个回忆之内，会逐渐的有各种前世回忆涌出，侵蚀前期的记忆，当这些易于侵蚀的记忆区间全部被侵蚀殆尽后，黄金妖精便会就此“消失”。这些前世的回忆，可以看作成 $n$ 个不重叠的子段，这些子段的起点和终点恰好在一个开始区间和一个结束区间之内。而根据回忆的性质，不同的前世回忆的起点和终点自然是在不同的开始区间和结束区间内的。\n\n记忆犹如湍急的小河，河水汩汩，顺流而下，搅动着石块与泥沙，不断地在水面上下浮沉。在上游之时，或许巉岩乱石，自有其沉重，因而水流清澈，自在澄明；越到入海口，石块逐渐的被泥沙所代替，哪怕只是微风逐浪，也会搅动其一片浑浊，将记忆都给摆弄的纠缠不清。每一次的记忆侵蚀，就如同翻腾的浪花，也许搅动的是泥沙，又或许只是将那些巨石推动了一隅。从数值上来叙述的话，第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。当这些贡献达到了最大值，所谓的“侵蚀殆尽”，便会发生。那么现在这些妖精想知道，这个最大值究竟是多少。\n\n特别的，如果数据本身无解，请输出 $-1$。\n\n\n------------\n\n\n简明题意：\n\n给出 $m1$ 个开始区间 $[sl_i,sr_i]$ ，以及 $m2$ 个结束区间$[el_j,er_j]$ 。在数轴上选取不重叠的 $n$ 个子段，使得每个子段的起点和终点分别在一个开始区间和一个结束区间内。不同的子段的起点和终点需要在不同的开始区间和结束区间内。第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。总贡献为选出的子段长度之和加上区间被匹配带来的贡献。求能最大总贡献是多少。\n\n注意，将一个子段 $[l,r]$ 的长度定义为 $r-l$ ，这里的两个子段“重叠”定义为存在一个长度 > 0 的区间被同时包含在两个子段之内。\n\n无解输出 $-1$。\n", "inputFormat": "第一行三个整数 $n,m1,m2$\n\n第二行 $2\\times m1$ 个整数表示 $sl_1,sr_1,sl_2,sr_2,\\dots , sl_{m1},sr_{m1}$，\n\n第三行 $2\\times m2$ 个整数表示 $el_1,er_1,el_2,er_2,\\dots , el_{m2},er_{m2}$\n\n第四行 $m1$ 个数表示 $a_1,a_2,\\dots ,a_{m1}$\n\n第五行 $m2$ 个数表示 $b_1,b_2,\\dots ,b_{m2}$", "outputFormat": "输出一个整数，表示最大的总贡献。", "hint": "对于第一组样例，将起始区间 $[1,3]$ 与结束区间 $[4,5]$ 匹配，选取子段 $[1,5]$ 长度为 $5-1=4$，再将起始区间 $[7,8]$ 与结束区间 $[9,10]$ 匹配，选取子段 $[7,10]$ 长度为 $10-7=3$ ，选取总长度为 $4+3=7$ ,满足起始区间与结束区间存在 $n$ 个匹配，且选取的子段没有重合，总贡献最大。  \n对于第二组样例，分别将 $[1,2]$ 与 $[9,10]$ ，$[3,5]$ 与 $[5,7]$ 匹配，选取子段 $[1,10]$ 和 $[5,5]$。   \n对于第三组样例，分别将 $[1,2]$ 与 $[3,10]$ ，$[4,5]$ 与 $[7,7]$ 匹配，选取子段 $[1,5]$ 和 $[5,7]$。   \n**subtask1:** 对于 $15\\%$ 的数据，$n<=5,m1,m2<=10$。  \n**subtask2:** 对于 $100\\%$ 的数据，$n,m1,m2<=100$ ，题目中所有数据 $\\le 10^3$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-p1」回忆", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/3uztip2k.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/rsmn7uez.png)\n\n出题人：LinkyChristian\n\n文案：小糯米", "description": "“话虽如此，我们并没有四处游走让妖精一个一个地诞生。\n只是在作为素材的巨大魂体上施予咒迹，好让她们带着接近人族的体格与人格自然诞生罢了。”\n\n黄金妖精，自出生开始即刻下早夭诅咒之“人”，若非魔物无法抵御，是本不应在这茫茫尘世之中诞生之兵器。\n\n每当前世之回忆涌上妖精之时，便是开启一朵含苞待放之花凋零倒计时之日。妖精的记忆，是由一条射线组成，为了便于叙述，我们不妨将射线当作数轴进行处理。在她们的记忆之中，会有若干个区间，在这个区间之内的回忆，是极易受到前世回忆的侵蚀的。但是由于生物的回忆本身自是不可探视分明之物，我们只能得知它们的 $m1$ 个开始区间 $[sl_i,sr_i]$ 与 $m2$ 个结束区间$[el_j,er_j]$ 。在这个回忆之内，会逐渐的有各种前世回忆涌出，侵蚀前期的记忆，当这些易于侵蚀的记忆区间全部被侵蚀殆尽后，黄金妖精便会就此“消失”。这些前世的回忆，可以看作成 $n$ 个不重叠的子段，这些子段的起点和终点恰好在一个开始区间和一个结束区间之内。而根据回忆的性质，不同的前世回忆的起点和终点自然是在不同的开始区间和结束区间内的。\n\n记忆犹如湍急的小河，河水汩汩，顺流而下，搅动着石块与泥沙，不断地在水面上下浮沉。在上游之时，或许巉岩乱石，自有其沉重，因而水流清澈，自在澄明；越到入海口，石块逐渐的被泥沙所代替，哪怕只是微风逐浪，也会搅动其一片浑浊，将记忆都给摆弄的纠缠不清。每一次的记忆侵蚀，就如同翻腾的浪花，也许搅动的是泥沙，又或许只是将那些巨石推动了一隅。从数值上来叙述的话，第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。当这些贡献达到了最大值，所谓的“侵蚀殆尽”，便会发生。那么现在这些妖精想知道，这个最大值究竟是多少。\n\n特别的，如果数据本身无解，请输出 $-1$。\n\n\n------------\n\n\n简明题意：\n\n给出 $m1$ 个开始区间 $[sl_i,sr_i]$ ，以及 $m2$ 个结束区间$[el_j,er_j]$ 。在数轴上选取不重叠的 $n$ 个子段，使得每个子段的起点和终点分别在一个开始区间和一个结束区间内。不同的子段的起点和终点需要在不同的开始区间和结束区间内。第 $i$ 个起始区间被匹配能带来 $a_i$ 的贡献，第 $i$ 个结束区间被匹配能带来 $b_i$ 的贡献。总贡献为选出的子段长度之和加上区间被匹配带来的贡献。求能最大总贡献是多少。\n\n注意，将一个子段 $[l,r]$ 的长度定义为 $r-l$ ，这里的两个子段“重叠”定义为存在一个长度 > 0 的区间被同时包含在两个子段之内。\n\n无解输出 $-1$。\n", "inputFormat": "第一行三个整数 $n,m1,m2$\n\n第二行 $2\\times m1$ 个整数表示 $sl_1,sr_1,sl_2,sr_2,\\dots , sl_{m1},sr_{m1}$，\n\n第三行 $2\\times m2$ 个整数表示 $el_1,er_1,el_2,er_2,\\dots , el_{m2},er_{m2}$\n\n第四行 $m1$ 个数表示 $a_1,a_2,\\dots ,a_{m1}$\n\n第五行 $m2$ 个数表示 $b_1,b_2,\\dots ,b_{m2}$", "outputFormat": "输出一个整数，表示最大的总贡献。", "hint": "对于第一组样例，将起始区间 $[1,3]$ 与结束区间 $[4,5]$ 匹配，选取子段 $[1,5]$ 长度为 $5-1=4$，再将起始区间 $[7,8]$ 与结束区间 $[9,10]$ 匹配，选取子段 $[7,10]$ 长度为 $10-7=3$ ，选取总长度为 $4+3=7$ ,满足起始区间与结束区间存在 $n$ 个匹配，且选取的子段没有重合，总贡献最大。  \n对于第二组样例，分别将 $[1,2]$ 与 $[9,10]$ ，$[3,5]$ 与 $[5,7]$ 匹配，选取子段 $[1,10]$ 和 $[5,5]$。   \n对于第三组样例，分别将 $[1,2]$ 与 $[3,10]$ ，$[4,5]$ 与 $[7,7]$ 匹配，选取子段 $[1,5]$ 和 $[5,7]$。   \n**subtask1:** 对于 $15\\%$ 的数据，$n<=5,m1,m2<=10$。  \n**subtask2:** 对于 $100\\%$ 的数据，$n,m1,m2<=100$ ，题目中所有数据 $\\le 10^3$。  ", "locale": "zh-CN"}}}
{"pid": "P8462", "type": "P", "difficulty": 2, "samples": [["5 4 1 1\nNENW", "10 10 10 10 10 \n10 10 10 10 10 \n10 6 10 10 10 \n4 4 10 10 10 \n6 10 10 10 10 \n"], ["7 14 1 1\nNENENENENESSSS", "105 105 105 105 105 105 105 \n105 105 105 105 55 61 105 \n105 105 105 49 51 69 105 \n105 105 51 49 105 79 105 \n105 61 55 105 105 91 105 \n79 69 105 105 105 105 105 \n91 105 105 105 105 105 105 \n"], ["10 70 2 2\nNWSNSNNNSNNSSNNSENNNNEESNWSESESSWENNSEWESWWWESEEESENNSENWNESNWSNNNEESS", "2485 2485 2485 2485 2485 2485 2485 2485 2485 2485 \n2485 1407 1205 1267 2485 2485 2485 2485 2485 2485 \n2485 1435 1281 1167 2485 2485 2485 2217 2281 2347 \n2485 1465 2485 1255 1041 2485 2485 2155 2485 2415 \n1557 1497 2485 2485 969 1177 2485 1733 1807 2485 \n1471 1531 1315 907 935 1267 2485 1473 1647 2485 \n1631 2485 2485 1357 1381 1407 1435 1499 1645 2485 \n2021 2347 2485 2485 2485 2485 1465 1497 2485 2485 \n2087 2415 2485 2485 2485 2485 2485 2485 2485 2485 \n2485 2485 2485 2485 2485 2485 2485 2485 2485 2485 \n"], ["5 4 2 1\nNENW", "10 10 10 10 10 \n10 10 10 10 10 \n10 10 6 10 10 \n10 4 4 10 10 \n10 6 10 10 10 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」奶油蛋糕", "background": "\n----------\n早餐时间过后，小不点们都前往操场接受基础训练课程，威廉便趁机占据厨房了。  \n他在军服上披围裙，头上绑三角巾，还将清早从市场采买回来的大量材料摆到桌上。  \n接着，威廉烤了大量的奶油蛋糕。  \n\n威廉把奶油蛋糕摆放到桌子上，珂朵莉闻到了蛋糕的香味，迫不及待地扑到了餐桌前享受着这份饕餮盛宴，然而蛋糕的制作，似乎还差了那么最后一步……  \n“等一等哦，我还没有挤上奶油呢。”威廉说着，拿起了裱花袋。  \n\n可饥肠辘辘的珂朵莉哪里等得起全部的奶油都给挤好？  \n正当威廉还在忙着挨个给蛋糕挤上白花花的奶油的时候，珂朵莉已经偷偷的拿起了一块蛋糕……", "description": "在桌子上的蛋糕可以看作是一个无限大的[平面直角坐标系](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E7%9B%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB/1296463?fr=aladdin)，每一个蛋糕都位于坐标系的整点上。 \n\n每一分钟，威廉会给每个蛋糕都涂上若干层奶油，规则如下：如果蛋糕连续第 $i$ 次没有被珂朵莉吃到，那么就会在蛋糕上挤上 $i$ 层奶油。  \n\n每次在威廉挤完所有蛋糕的奶油后，珂朵莉会拿起一块蛋糕，把这个蛋糕上的奶油给吃掉一层。特别的，如果珂朵莉吃掉了蛋糕上的一层奶油，威廉马上会贴心的再次给这个蛋糕补上一层，且不计入连续没有被吃到的次数里（即下一次的 $i$ 依旧为 $1$ ）。  \n\n由于蛋糕太多，珂朵莉实在不知道从何下手，所以她决定按照移动的吃法进行试吃。  \n总共 $m$ 个分钟，珂朵莉的吃蛋糕序列可以用一个长度为 $m$ 的字符串表达。第 $t$ 个字符可能为 `N`，`S`，`W`，`E`分别表示珂朵莉在第 $t+1$ 分钟会吃掉第 $t$ 分钟吃掉蛋糕的上，下，左，右方位的蛋糕。  \n珂朵莉第 $1$ 个分钟会拿起位于点 $(x,y)$ 的蛋糕，因为蛋糕目前没有被挤上奶油，所以珂朵莉既不会进行试吃，威廉也不会立刻给她补上奶油。\n\n珂朵莉想知道在 $m$ 分钟后，这些蛋糕在最后都还剩多少层奶油。\n\n本题中的上和右分别表示 $y$ 轴正方向和 $x$ 轴正方向。\n\n---\n简要题面：\n\n有一个 $n\\times n$ 的地块，一个连续 $i$ 分钟没人经过的地面在第 $i$ 分钟会落上 $i$ 个单位的灰，有人经过时不会落灰但灰也不会清零，在人走后第一分钟又会落上一个单位的灰，以此类推。有一个人在这个 $n\\times n$ 的范围内移动，他的移动轨迹可以描述为一个由 $\\text{N,S,W,E}$ 组成的字符串，每个字母分别表示上、下、左、右。这个人一开始在点 $(x,y)$，每一分钟移动一步。\n\n求最后每一个位置上落下的灰的量。\n\n保证这个人没有超过移动的范围。\n", "inputFormat": "第一行四个正整数 $n,m,x,y$，含义如题面所示，其中 $x,y$ 表示横纵坐标，不是数组下标。  \n第二行一个长度为 $m$ 的字符串，表示珂朵莉的移动序列。", "outputFormat": "共$n$ 行，每行 $n$ 个数，第 $i$ 行的第 $j$ 个数表示坐标 $(j,n-i+1)$ 上的灰的数量", "hint": "**本题 y 轴朝上，x 轴朝右，样例输出中的左下角表示 $(1,1)$，第一分钟珂朵莉在初始点处，第二分钟移动到相应的位置，第 $m+1$ 分钟移动到最后一个点，但是总共只有 $m$ 分钟，因此最后一个点不受移动的影响**\n\n---\n**样例 1 解释：**\n\n珂朵莉的移动路径为 $(1,1)\\rightarrow(1,2)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$，共 $4$ 分钟。\n\n对于第 $1$ 分钟，$(1,1)$ 奶油层数不变，其余点被挤上了 $1$ 层奶油。\n\n对于第 $2$ 分钟，$(1,2)$ 奶油层数不变，$(1,1)$ 被挤上了 $1$ 层奶油，其余点挤上 $2$ 层奶油。\n\n对于第 $3$ 分钟，$(2,2)$ 奶油层数不变，$(1,1)$ 挤上 $2$ 层奶油，$(1,2)$ 挤上 $1$ 层奶油，其余点挤上 $3$ 层奶油。\n\n对于第 $4$ 分钟，$(2,3)$ 奶油层数不变，$(1,1)$ 挤上 $3$ 层奶油，$(1,2)$ 挤上 $2$ 层奶油，$(2,2)$ 挤上 $1$ 层奶油，其余点挤上 $4$ 层奶油。\n\n**注意最后珂朵莉移动到了 $(1,3)$，但是时间只有 $4$ 分钟，所以实际上不会对 $(1,3)$ 造成影响。初始点不一定在 $(1,1)$。**\n\n$1\\le n\\leq 50,1\\leq m\\le 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」奶油蛋糕", "background": "\n----------\n早餐时间过后，小不点们都前往操场接受基础训练课程，威廉便趁机占据厨房了。  \n他在军服上披围裙，头上绑三角巾，还将清早从市场采买回来的大量材料摆到桌上。  \n接着，威廉烤了大量的奶油蛋糕。  \n\n威廉把奶油蛋糕摆放到桌子上，珂朵莉闻到了蛋糕的香味，迫不及待地扑到了餐桌前享受着这份饕餮盛宴，然而蛋糕的制作，似乎还差了那么最后一步……  \n“等一等哦，我还没有挤上奶油呢。”威廉说着，拿起了裱花袋。  \n\n可饥肠辘辘的珂朵莉哪里等得起全部的奶油都给挤好？  \n正当威廉还在忙着挨个给蛋糕挤上白花花的奶油的时候，珂朵莉已经偷偷的拿起了一块蛋糕……", "description": "在桌子上的蛋糕可以看作是一个无限大的[平面直角坐标系](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E7%9B%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB/1296463?fr=aladdin)，每一个蛋糕都位于坐标系的整点上。 \n\n每一分钟，威廉会给每个蛋糕都涂上若干层奶油，规则如下：如果蛋糕连续第 $i$ 次没有被珂朵莉吃到，那么就会在蛋糕上挤上 $i$ 层奶油。  \n\n每次在威廉挤完所有蛋糕的奶油后，珂朵莉会拿起一块蛋糕，把这个蛋糕上的奶油给吃掉一层。特别的，如果珂朵莉吃掉了蛋糕上的一层奶油，威廉马上会贴心的再次给这个蛋糕补上一层，且不计入连续没有被吃到的次数里（即下一次的 $i$ 依旧为 $1$ ）。  \n\n由于蛋糕太多，珂朵莉实在不知道从何下手，所以她决定按照移动的吃法进行试吃。  \n总共 $m$ 个分钟，珂朵莉的吃蛋糕序列可以用一个长度为 $m$ 的字符串表达。第 $t$ 个字符可能为 `N`，`S`，`W`，`E`分别表示珂朵莉在第 $t+1$ 分钟会吃掉第 $t$ 分钟吃掉蛋糕的上，下，左，右方位的蛋糕。  \n珂朵莉第 $1$ 个分钟会拿起位于点 $(x,y)$ 的蛋糕，因为蛋糕目前没有被挤上奶油，所以珂朵莉既不会进行试吃，威廉也不会立刻给她补上奶油。\n\n珂朵莉想知道在 $m$ 分钟后，这些蛋糕在最后都还剩多少层奶油。\n\n本题中的上和右分别表示 $y$ 轴正方向和 $x$ 轴正方向。\n\n---\n简要题面：\n\n有一个 $n\\times n$ 的地块，一个连续 $i$ 分钟没人经过的地面在第 $i$ 分钟会落上 $i$ 个单位的灰，有人经过时不会落灰但灰也不会清零，在人走后第一分钟又会落上一个单位的灰，以此类推。有一个人在这个 $n\\times n$ 的范围内移动，他的移动轨迹可以描述为一个由 $\\text{N,S,W,E}$ 组成的字符串，每个字母分别表示上、下、左、右。这个人一开始在点 $(x,y)$，每一分钟移动一步。\n\n求最后每一个位置上落下的灰的量。\n\n保证这个人没有超过移动的范围。\n", "inputFormat": "第一行四个正整数 $n,m,x,y$，含义如题面所示，其中 $x,y$ 表示横纵坐标，不是数组下标。  \n第二行一个长度为 $m$ 的字符串，表示珂朵莉的移动序列。", "outputFormat": "共$n$ 行，每行 $n$ 个数，第 $i$ 行的第 $j$ 个数表示坐标 $(j,n-i+1)$ 上的灰的数量", "hint": "**本题 y 轴朝上，x 轴朝右，样例输出中的左下角表示 $(1,1)$，第一分钟珂朵莉在初始点处，第二分钟移动到相应的位置，第 $m+1$ 分钟移动到最后一个点，但是总共只有 $m$ 分钟，因此最后一个点不受移动的影响**\n\n---\n**样例 1 解释：**\n\n珂朵莉的移动路径为 $(1,1)\\rightarrow(1,2)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$，共 $4$ 分钟。\n\n对于第 $1$ 分钟，$(1,1)$ 奶油层数不变，其余点被挤上了 $1$ 层奶油。\n\n对于第 $2$ 分钟，$(1,2)$ 奶油层数不变，$(1,1)$ 被挤上了 $1$ 层奶油，其余点挤上 $2$ 层奶油。\n\n对于第 $3$ 分钟，$(2,2)$ 奶油层数不变，$(1,1)$ 挤上 $2$ 层奶油，$(1,2)$ 挤上 $1$ 层奶油，其余点挤上 $3$ 层奶油。\n\n对于第 $4$ 分钟，$(2,3)$ 奶油层数不变，$(1,1)$ 挤上 $3$ 层奶油，$(1,2)$ 挤上 $2$ 层奶油，$(2,2)$ 挤上 $1$ 层奶油，其余点挤上 $4$ 层奶油。\n\n**注意最后珂朵莉移动到了 $(1,3)$，但是时间只有 $4$ 分钟，所以实际上不会对 $(1,3)$ 造成影响。初始点不一定在 $(1,1)$。**\n\n$1\\le n\\leq 50,1\\leq m\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P8463", "type": "P", "difficulty": 4, "samples": [["2 2\n1 3 2\n2 6 1\n3 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」深潜的第六兽", "background": "“〈十七兽〉全都不会飞。因此，在它们毁灭大地以后，悬浮大陆群还能像这样浮在天空。\n\n“可是，只有〈深潜的第六兽〉在本身留在大地的同时，还能对悬浮大陆群发动攻击。它有两种能力，『分裂增生』和『快速茁壮』。\n\n“留在地表的本体会让身体分裂出几万个碎块，然后随风飞扬，等待碰巧飘流到某座悬浮岛。抵达岛上以后，它会当场发育茁壮，大约六到八小时过后就能占据并毁灭整座岛。”", "description": "现在有一只〈第六兽〉，在某一次的「分裂增生」时分裂出了 $n$ 个碎块，这些碎块会笔直向上飞去，如果其中一块碎块遇到了一座浮空岛（为了研究方便，我们不妨将它当成一条二维空间中的线段处理），便会迅速占据它，并一分为二，再次从浮空岛的两端笔直向上飞去。\n\n不过好在，那些只是一些无关紧要最为荒凉毫无人烟的岛屿，但如果就这样放任它们继续肆虐，势必会给那些至关重要的浮空岛带来毁灭性的打击。于是乎，负责清理〈第六兽〉的军官们，决定以他们所在的岛屿为直线建立 $x$ 轴，并以重力的方向为正方向建立 $y$ 轴，他们总共监测到了 $m$ 座浮空岛，并确定了那些碎块分裂出的位置（距离 $x$ 轴的位置视作无限远），于是他们想知道，如果放任这些碎块，那么当它们到达军官的位置时，最终会有多少碎块。\n\n注意，若一座浮空岛的 $ l_i $ 与 $ r_i $ 相同，即为一个点， 〈第六兽〉占据后仍然会分裂成两只，从这个点向上飞去。\n\n**提示：浮空岛作为实体显然不会重叠。**\n\n**简要题意：**\n\n在一个平面直角坐标系上有 $m$ 条平行于 x 轴的线段，第 $i$ 条线段为 $(l_i,h_i)$ 与 $(r_i,h_i)$ 的连线。特别注意 $l_i$ 可与 $r_i$ 相等，此时线段变为一个点。\n\n在直线 $y=10^9$ 上有 $n$ 个点，分别位于 $(x_i,10^9)$。\n\n现在，这些点逐渐向下（y轴负方向）移动。若触碰到线段，则会一分为二，分裂出的两个点分别从线段的两端继续向下移动。\n\n特别地，若线段为一个点，则会原地分裂成 2 个。\n\n问所有初始点在经历了线段的分裂后，在最后会有多少个点掉在 $ x $ 轴上", "inputFormat": "第一行输入两个数 $ n $ 和 $ m $。\n\n接下来 $ m $ 行，每行三个数 $ l_i $ , $ r_i $ , $ h_i $ ,分别描述一座被视作线段的浮空岛的左端点横坐标，右端点横坐标，以及线段的纵坐标（ $ 0 \\leq l_i,r_i,h_i \\leq 10^5，l_i \\leq r_i$）。\n\n接下来一行 $ n $ 个数，$ x_i $表示第 $ i $ 个碎块的横坐标（ $ 0 \\leq x_i \\leq 10^5 $）。\n", "outputFormat": "输出一个整数 $ ans $ ，表示最后会有多少个碎块落在 $ x $ 轴上，答案对 $998244353$ 取模。", "hint": "样例解释：\n\n注意， $y$ 轴正方向为重力方向。\n在坐标轴中，横坐标为 $x$ 的碎块，先掉到纵坐标为2的线段上，然后分成两个从 $1$ 和 $3$ 往下掉，$3$ 的那个掉到了纵坐标为1的线段上，分成两个从 $2$ 和 $6$ 往下掉，第一个碎块一共变成了 $3$ 块，分别掉在 $1，2，6$ ，第二个碎块一共变成了两个碎块，分别掉在 $2，6$。\n\n| 子问题 | 特殊限制条件 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $ 1\\leq n,m \\leq 10 $ | 10 |\n| 2 | $ 1\\leq n,m \\leq 100 $ | 5 |\n| 3 | $ 1\\leq n\\leq 10^4， 1\\leq m \\leq 5\\times 10^5 $ | 35 |\n| 4 |$ 1\\leq n,m \\leq 5\\times 10^5 $|50|\n\n本题各个子问题之间不捆绑测试。\n\n对于 $100\\%$ 的数据 $ 1\\leq n,m \\leq 5\\times 10^5 $，所有数字均为非负整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」深潜的第六兽", "background": "“〈十七兽〉全都不会飞。因此，在它们毁灭大地以后，悬浮大陆群还能像这样浮在天空。\n\n“可是，只有〈深潜的第六兽〉在本身留在大地的同时，还能对悬浮大陆群发动攻击。它有两种能力，『分裂增生』和『快速茁壮』。\n\n“留在地表的本体会让身体分裂出几万个碎块，然后随风飞扬，等待碰巧飘流到某座悬浮岛。抵达岛上以后，它会当场发育茁壮，大约六到八小时过后就能占据并毁灭整座岛。”", "description": "现在有一只〈第六兽〉，在某一次的「分裂增生」时分裂出了 $n$ 个碎块，这些碎块会笔直向上飞去，如果其中一块碎块遇到了一座浮空岛（为了研究方便，我们不妨将它当成一条二维空间中的线段处理），便会迅速占据它，并一分为二，再次从浮空岛的两端笔直向上飞去。\n\n不过好在，那些只是一些无关紧要最为荒凉毫无人烟的岛屿，但如果就这样放任它们继续肆虐，势必会给那些至关重要的浮空岛带来毁灭性的打击。于是乎，负责清理〈第六兽〉的军官们，决定以他们所在的岛屿为直线建立 $x$ 轴，并以重力的方向为正方向建立 $y$ 轴，他们总共监测到了 $m$ 座浮空岛，并确定了那些碎块分裂出的位置（距离 $x$ 轴的位置视作无限远），于是他们想知道，如果放任这些碎块，那么当它们到达军官的位置时，最终会有多少碎块。\n\n注意，若一座浮空岛的 $ l_i $ 与 $ r_i $ 相同，即为一个点， 〈第六兽〉占据后仍然会分裂成两只，从这个点向上飞去。\n\n**提示：浮空岛作为实体显然不会重叠。**\n\n**简要题意：**\n\n在一个平面直角坐标系上有 $m$ 条平行于 x 轴的线段，第 $i$ 条线段为 $(l_i,h_i)$ 与 $(r_i,h_i)$ 的连线。特别注意 $l_i$ 可与 $r_i$ 相等，此时线段变为一个点。\n\n在直线 $y=10^9$ 上有 $n$ 个点，分别位于 $(x_i,10^9)$。\n\n现在，这些点逐渐向下（y轴负方向）移动。若触碰到线段，则会一分为二，分裂出的两个点分别从线段的两端继续向下移动。\n\n特别地，若线段为一个点，则会原地分裂成 2 个。\n\n问所有初始点在经历了线段的分裂后，在最后会有多少个点掉在 $ x $ 轴上", "inputFormat": "第一行输入两个数 $ n $ 和 $ m $。\n\n接下来 $ m $ 行，每行三个数 $ l_i $ , $ r_i $ , $ h_i $ ,分别描述一座被视作线段的浮空岛的左端点横坐标，右端点横坐标，以及线段的纵坐标（ $ 0 \\leq l_i,r_i,h_i \\leq 10^5，l_i \\leq r_i$）。\n\n接下来一行 $ n $ 个数，$ x_i $表示第 $ i $ 个碎块的横坐标（ $ 0 \\leq x_i \\leq 10^5 $）。\n", "outputFormat": "输出一个整数 $ ans $ ，表示最后会有多少个碎块落在 $ x $ 轴上，答案对 $998244353$ 取模。", "hint": "样例解释：\n\n注意， $y$ 轴正方向为重力方向。\n在坐标轴中，横坐标为 $x$ 的碎块，先掉到纵坐标为2的线段上，然后分成两个从 $1$ 和 $3$ 往下掉，$3$ 的那个掉到了纵坐标为1的线段上，分成两个从 $2$ 和 $6$ 往下掉，第一个碎块一共变成了 $3$ 块，分别掉在 $1，2，6$ ，第二个碎块一共变成了两个碎块，分别掉在 $2，6$。\n\n| 子问题 | 特殊限制条件 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| 1 | $ 1\\leq n,m \\leq 10 $ | 10 |\n| 2 | $ 1\\leq n,m \\leq 100 $ | 5 |\n| 3 | $ 1\\leq n\\leq 10^4， 1\\leq m \\leq 5\\times 10^5 $ | 35 |\n| 4 |$ 1\\leq n,m \\leq 5\\times 10^5 $|50|\n\n本题各个子问题之间不捆绑测试。\n\n对于 $100\\%$ 的数据 $ 1\\leq n,m \\leq 5\\times 10^5 $，所有数字均为非负整数。\n", "locale": "zh-CN"}}}
{"pid": "P8464", "type": "P", "difficulty": 6, "samples": [["4\nabab", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」渺茫的希望", "background": "威廉在与妖精们相处的日子里，留下了不少幸福的记忆。", "description": "其中有一件令威廉记忆颇深的事情，便是活泼的少女们会时常的“抓住”威廉，让他来与她们一起读书。每逢此时，威廉总要开玩笑说“我脑筋超棒的哦，只要是五百年以上的古书尽管找我念”云云。但一来二去终究还是拗不过少女们的请求，半推半就的讲述一些以前的故事。长此以往，威廉在讲故事之余，会间或的用那些五百年以前的文字来和少女们玩一些“文字游戏”，游戏的规则如下：\n\n威廉会给出一串由小写英文字母组成的字符串 $S$ ，其中每一个古文字便是由它的子串构成——如果我们说两个古文字不同，那么当且仅当这两个子串长度不同或长度相同且有任意一位不同——当两个不同的古文字拼凑在一起组成一个词语时，其音律、词义等各方面也会有所不同，于是威廉为了方便，就定义了一个“意境值”来衡量拼凑成的词语的质量。意境值的计算公式便是这两个本质不同子串在 $S$ 中出现的次数之和加上这两个本质不同子串的最长公共前缀的长度。\n\n而当少女们把所有这些古文字拼凑成了一个句子后，威廉惊讶的发现，这个句子可以视作为任意两个古文字连边形成的完全图的最小生成树。他于是一鼓作气，推理出了这个句子的意境值的公式——这些最小生成树（因为最小生成树可能不唯一）的边权和。\n\n其中，两个古文字的边权与她们组成的词语的意境值在数值上相等。\n\n现在，威廉又在和少女们玩文字游戏了，威廉现在给出了一个字符串 $S$ ，但由于这是他临时起意写出的，他也不知道如果将它拼凑成一个句子，意境值究竟是多少——于是乎，威廉将求助的目光投向了你。\n\n----\n\n简要题意：\n\n给定一个由小写英文字母组成的字符串 $S$ ，设在两个本质不同子串之间连边的权值为两个子串在 $S$ 中出现的次数之和加上这两个子串的最长公共前缀的长度，求对所有本质不同子串做最小生成树的边权之和（不含空串）。", "inputFormat": "第一行一个整数 $n$ 。  \n接下来一行 $n$ 个字符表示威廉给出的字符串 $S$ 。\n", "outputFormat": "一行一个整数，表示这个句子的意境值。", "hint": "#### 样例解释 #1\n![](https://cdn.luogu.com.cn/upload/image_hosting/fqjg81g9.png)\n\n如图所示为一种最小生成树，边权和为 $15$。\n\n\n#### 数据范围\n对于 $10\\%$ 的数据，$|S|\\le 100$。  \n对于 $30\\%$ 的数据，$|S|\\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le|S|\\le 10^5$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」渺茫的希望", "background": "威廉在与妖精们相处的日子里，留下了不少幸福的记忆。", "description": "其中有一件令威廉记忆颇深的事情，便是活泼的少女们会时常的“抓住”威廉，让他来与她们一起读书。每逢此时，威廉总要开玩笑说“我脑筋超棒的哦，只要是五百年以上的古书尽管找我念”云云。但一来二去终究还是拗不过少女们的请求，半推半就的讲述一些以前的故事。长此以往，威廉在讲故事之余，会间或的用那些五百年以前的文字来和少女们玩一些“文字游戏”，游戏的规则如下：\n\n威廉会给出一串由小写英文字母组成的字符串 $S$ ，其中每一个古文字便是由它的子串构成——如果我们说两个古文字不同，那么当且仅当这两个子串长度不同或长度相同且有任意一位不同——当两个不同的古文字拼凑在一起组成一个词语时，其音律、词义等各方面也会有所不同，于是威廉为了方便，就定义了一个“意境值”来衡量拼凑成的词语的质量。意境值的计算公式便是这两个本质不同子串在 $S$ 中出现的次数之和加上这两个本质不同子串的最长公共前缀的长度。\n\n而当少女们把所有这些古文字拼凑成了一个句子后，威廉惊讶的发现，这个句子可以视作为任意两个古文字连边形成的完全图的最小生成树。他于是一鼓作气，推理出了这个句子的意境值的公式——这些最小生成树（因为最小生成树可能不唯一）的边权和。\n\n其中，两个古文字的边权与她们组成的词语的意境值在数值上相等。\n\n现在，威廉又在和少女们玩文字游戏了，威廉现在给出了一个字符串 $S$ ，但由于这是他临时起意写出的，他也不知道如果将它拼凑成一个句子，意境值究竟是多少——于是乎，威廉将求助的目光投向了你。\n\n----\n\n简要题意：\n\n给定一个由小写英文字母组成的字符串 $S$ ，设在两个本质不同子串之间连边的权值为两个子串在 $S$ 中出现的次数之和加上这两个子串的最长公共前缀的长度，求对所有本质不同子串做最小生成树的边权之和（不含空串）。", "inputFormat": "第一行一个整数 $n$ 。  \n接下来一行 $n$ 个字符表示威廉给出的字符串 $S$ 。\n", "outputFormat": "一行一个整数，表示这个句子的意境值。", "hint": "#### 样例解释 #1\n![](https://cdn.luogu.com.cn/upload/image_hosting/fqjg81g9.png)\n\n如图所示为一种最小生成树，边权和为 $15$。\n\n\n#### 数据范围\n对于 $10\\%$ 的数据，$|S|\\le 100$。  \n对于 $30\\%$ 的数据，$|S|\\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le|S|\\le 10^5$。  ", "locale": "zh-CN"}}}
{"pid": "P8465", "type": "P", "difficulty": 6, "samples": [["3 2 1\n2 1 3\n1 2 2 2 \n", "2"], ["3 2 1\n2 1 3\n1 2 1 1 ", "3"], ["10 4 2\n5 2 1 3 3 1 4 5 5 3 \n4 3 1 7\n2 4 5 5", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「REOI-1」调整圣剑", "background": "威廉从仓库搬出了瑟尼欧里斯。\n\n六十八号悬浮岛的边陲，稍稍隆起的小山丘上。\n\n风势平稳，空气澄净，星光柔和，各方面条件都合适的夜晚。\n\n他掀开盖着瑟尼欧里斯的布，让剑身透风。\n\n威廉注入些许魔力。太阳穴稍微会痛，不过这种程度还没什么大不了。\n\n瑟尼欧里斯顿时绽发柔和光芒。\n\n「——调整开始。」\n", "description": "具体而言，圣剑瑟尼欧里斯由 $n$ 个护符组成，每个护符有一个权值 $a_i$。威廉会进行 $k$ 次调整，每次调整一个护符，并获得与护符权值相等的疲惫值。\n\n然而由于护符间的某种奇怪联系，威廉调整护符时有一些限制，这些限制形如 $(i,j,x,y)$，表示威廉必须在第 $i$ 次调整时调整前 $x$ 个护符中的一个 **或** 在第 $j$ 次调整时调整后 $y$ 个护符中的一个，否则圣剑就会崩溃。\n\n现在，珂朵莉想知道威廉在调整完所有护符后的最小疲惫值是多少。\n\n**注意每个护符可以调整不止一遍。**", "inputFormat": "第一行三个正整数 $n,k,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,a_3...a_n$。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $i,j,x,y$。", "outputFormat": "一个数表示威廉疲惫值的最小值。", "hint": "样例解释：\n\n对于第一组样例，第一次选取 $a_2$ ，第二次选取 $a_2$ 。可以证明这是满足限制的最小值。\n\n对于第二组样例，第一次选择 $a_1$ ，第二次选择 $a_2$ 是为满足限制的最小值。\n\n对于 $24\\%$ 的数据：$1\\le n \\le 20,1\\le k,q \\le 14$ ；\n\n对于 $56\\%$ 的数据：$1\\le n \\le 100,1\\le k,q \\le 60$ ；\n\n对于 $80\\%$ 的数据：$1\\le n \\le 10^5, 1\\le k,q\\le 10^3$ ；\n\n对于 $100\\%$ 的数据：$1\\le n \\le 10^5,1\\le k,q\\le 10^4,1\\le a_i\\le 10^5$。\n\n对于每一次询问有 $1 \\le i,j \\le k$ , $1 \\le x,y \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「REOI-1」调整圣剑", "background": "威廉从仓库搬出了瑟尼欧里斯。\n\n六十八号悬浮岛的边陲，稍稍隆起的小山丘上。\n\n风势平稳，空气澄净，星光柔和，各方面条件都合适的夜晚。\n\n他掀开盖着瑟尼欧里斯的布，让剑身透风。\n\n威廉注入些许魔力。太阳穴稍微会痛，不过这种程度还没什么大不了。\n\n瑟尼欧里斯顿时绽发柔和光芒。\n\n「——调整开始。」\n", "description": "具体而言，圣剑瑟尼欧里斯由 $n$ 个护符组成，每个护符有一个权值 $a_i$。威廉会进行 $k$ 次调整，每次调整一个护符，并获得与护符权值相等的疲惫值。\n\n然而由于护符间的某种奇怪联系，威廉调整护符时有一些限制，这些限制形如 $(i,j,x,y)$，表示威廉必须在第 $i$ 次调整时调整前 $x$ 个护符中的一个 **或** 在第 $j$ 次调整时调整后 $y$ 个护符中的一个，否则圣剑就会崩溃。\n\n现在，珂朵莉想知道威廉在调整完所有护符后的最小疲惫值是多少。\n\n**注意每个护符可以调整不止一遍。**", "inputFormat": "第一行三个正整数 $n,k,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,a_3...a_n$。\n\n接下来 $q$ 行，每行 $4$ 个正整数 $i,j,x,y$。", "outputFormat": "一个数表示威廉疲惫值的最小值。", "hint": "样例解释：\n\n对于第一组样例，第一次选取 $a_2$ ，第二次选取 $a_2$ 。可以证明这是满足限制的最小值。\n\n对于第二组样例，第一次选择 $a_1$ ，第二次选择 $a_2$ 是为满足限制的最小值。\n\n对于 $24\\%$ 的数据：$1\\le n \\le 20,1\\le k,q \\le 14$ ；\n\n对于 $56\\%$ 的数据：$1\\le n \\le 100,1\\le k,q \\le 60$ ；\n\n对于 $80\\%$ 的数据：$1\\le n \\le 10^5, 1\\le k,q\\le 10^3$ ；\n\n对于 $100\\%$ 的数据：$1\\le n \\le 10^5,1\\le k,q\\le 10^4,1\\le a_i\\le 10^5$。\n\n对于每一次询问有 $1 \\le i,j \\le k$ , $1 \\le x,y \\le n$。", "locale": "zh-CN"}}}
{"pid": "P8466", "type": "P", "difficulty": 1, "samples": [["3\nX2AAKKKKQT9765433\nDX22AKKQJTT884443\nX2AAAKQQJT8554433", "Yes\nYes\nNo"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "[Aya Round 1 A] 幻想乡扑克游戏", "background": "**Problem Number:** [$\\textit{22}$](https://www.luogu.com.cn/training/1392)\n\n在能力卡牌异变之后，幻想乡的少女们将多余的卡牌收集起来，仿照外界人的「斗地主」这一游戏，进行了愉快的玩耍。", "description": "斗地主是一种使用 $\\tt A$ 到 $\\tt K$ 加上大小王的共 $54$ 张扑克牌来进行的游戏，其中大小王各一张，其它数码牌各四张。在斗地主中，牌的大小关系根据牌的数码表示如下：\n\n$$\\tt 3<4<5<6<7<8<9<10<J<Q<K<A<2<\\stackrel{\\mathclap{\\color{white}\\textbf{\\textit{wxy}}}}{\\text{小王}} < \\text{大王}$$\n\n且牌的大小关系和花色无关。\n\n游戏开始时，将会给 $3$ 名玩家各自发放 $17$ 张牌作为手牌，余下三张作为底牌。**玩家会将牌从大到小排序理好**，然后根据自己牌型的好坏程度来选择是否叫地主。\n\n你认为，如果自己的手牌中存在王炸（即大小王各一张）或者至少一个炸弹（即四张数码相同的牌），则你会选择叫地主。\n\n请实现一个程序来判断你是否应该叫地主。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入一个长度为 $17$ 的字符串，表示你的手牌。**保证牌已经预先理好**。在输入中使用 $\\tt T$ 代表点数为 $\\tt 10$ 的牌，使用 $\\tt X$ 代表小王，使用 $\\tt D$ 代表大王。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据，输出一行一个字符串：\n  - `yes` 代表你应该叫地主。\n  - `no` 代表你不应该叫地主。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示应该叫地主。", "hint": "### 样例解释\n\n> 对于数据 $1$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/g56d0ywv.png)\n> \n> 该手牌中存在炸弹：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6sal0bye.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $2$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6g2jrx6t.png)\n> \n> 该手牌中存在王炸：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/1ulc1sxz.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $3$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/5qb6bwen.png)\n> \n> 该手牌中不存在王炸和炸弹。故你选择不叫地主。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$。**保证牌已经预先理好**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 A] 幻想乡扑克游戏", "background": "**Problem Number:** [$\\textit{22}$](https://www.luogu.com.cn/training/1392)\n\n在能力卡牌异变之后，幻想乡的少女们将多余的卡牌收集起来，仿照外界人的「斗地主」这一游戏，进行了愉快的玩耍。", "description": "斗地主是一种使用 $\\tt A$ 到 $\\tt K$ 加上大小王的共 $54$ 张扑克牌来进行的游戏，其中大小王各一张，其它数码牌各四张。在斗地主中，牌的大小关系根据牌的数码表示如下：\n\n$$\\tt 3<4<5<6<7<8<9<10<J<Q<K<A<2<\\stackrel{\\mathclap{\\color{white}\\textbf{\\textit{wxy}}}}{\\text{小王}} < \\text{大王}$$\n\n且牌的大小关系和花色无关。\n\n游戏开始时，将会给 $3$ 名玩家各自发放 $17$ 张牌作为手牌，余下三张作为底牌。**玩家会将牌从大到小排序理好**，然后根据自己牌型的好坏程度来选择是否叫地主。\n\n你认为，如果自己的手牌中存在王炸（即大小王各一张）或者至少一个炸弹（即四张数码相同的牌），则你会选择叫地主。\n\n请实现一个程序来判断你是否应该叫地主。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入一个长度为 $17$ 的字符串，表示你的手牌。**保证牌已经预先理好**。在输入中使用 $\\tt T$ 代表点数为 $\\tt 10$ 的牌，使用 $\\tt X$ 代表小王，使用 $\\tt D$ 代表大王。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据，输出一行一个字符串：\n  - `yes` 代表你应该叫地主。\n  - `no` 代表你不应该叫地主。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示应该叫地主。", "hint": "### 样例解释\n\n> 对于数据 $1$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/g56d0ywv.png)\n> \n> 该手牌中存在炸弹：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6sal0bye.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $2$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/6g2jrx6t.png)\n> \n> 该手牌中存在王炸：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/1ulc1sxz.png)\n> \n> 故你选择叫地主。\n\n> 对于数据 $3$，输入数据相当于下面的手牌（忽略花色）：\n> \n> ![](https://cdn.luogu.com.cn/upload/image_hosting/5qb6bwen.png)\n> \n> 该手牌中不存在王炸和炸弹。故你选择不叫地主。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$。**保证牌已经预先理好**。", "locale": "zh-CN"}}}
{"pid": "P8467", "type": "P", "difficulty": 3, "samples": [["5\n3 2 8 4\n1 2 3 4\n1 9 4 9\n1 0 0 1\n0 0 4 2", "1\n1\n0\n0\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "[Aya Round 1 B] 甲（one）", "background": "", "description": "定义长度为 $5$ 的序列 $S$ 为「好的」，当且仅当存在长度为 $5$ 的排列 $P$，满足 $S_{P_1}-1=S_{P_2}=S_{P_3}+1$ 且 $S_{P_4}=S_{P_5}$。现有一长度为 $5$ 的整数序列 $a$，满足 $0\\le a_i \\le 9(1\\le i \\le 5)$。其中 $a_1 \\sim a_4$ 给定。试判断是否存在 $a_5$ 满足 $a$ 为「好的」。\n\n其中，长度为 $5$ 的排列 $P$，指的是一个长度为 $5$ 的数列，其中 $1,2,3,4,5$ 在这个数列中出现且只出现一次。", "inputFormat": "**本题含有多组数据。**\n\n- 第一行输入一个整数 $T$ 代表数据组数。\n- 接下来 $T$ 行每行输入四个整数 $a_1,a_2,a_3,a_4$。表示一组数据。", "outputFormat": "- 输出共 $T$ 行。对于每组数据，若存在满足条件的 $a_5$，输出 $1$；否则输出 $0$。", "hint": "### 附加样例\n\n- 样例 $2$ 见下发文件中的 $\\textbf{\\textit{one2.in/one2.ans}}$。该样例满足测试点 $2$ 的限制。\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{one3.in/one3.ans}}$。该样例满足测试点 $5$ 的限制。\n\n### 样例解释\n\n#### 样例 \\#1\n\n- 对于第 $1$ 组数据，可以令 $a_5=8$。此时存在 $P=\\{4,1,2,5,3\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $2$ 组数据，可以令 $a_5=4$。此时存在 $P=\\{3,2,1,4,5\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $3$ 组数据，不存在可以使 $a$ 为「好的」的 $a_5$。\n\n$$\n\\begin{aligned}\n\\fcolorbox{black}{#fbb}{3\\ \\ 2\\ \\ 8\\ \\ 4} + \\fcolorbox{black}{yellow}{8} &\\Rightarrow \\fcolorbox{black}{#fbb}{2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{8\\ \\ 8}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{4} &\\Rightarrow \\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3} + \\fcolorbox{black}{yellow}{4\\ \\ 4}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9} +   \\begin{cases}\n\\fcolorbox{black}{yellow}{0}\\\\\n\\fcolorbox{black}{yellow}{1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{yellow}{9}\n\\end{cases}&\\Rightarrow\n{\\color{red}\\xcancel{\\color{black}\n\\begin{cases}\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 0}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 9}\n\\end{cases}}}\n\\end{aligned}\n$$\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|} \\hline\n\\textbf{\\textsf{测试点}} & \\bm{{T\\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 100 & \\textbf{A} \\cr\\hline\n2 & 100 & \\textbf{B} \\cr\\hline\n3 & 100 & - \\cr\\hline\n4 & 1000 & - \\cr\\hline\n5 & 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_1=a_2=a_3=a_4$。\n- 特殊性质 $\\bf B$：$a_1,a_2,a_3,a_4$ 互不相等。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$0\\le a_i \\le 9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 B] 甲（one）", "background": "", "description": "定义长度为 $5$ 的序列 $S$ 为「好的」，当且仅当存在长度为 $5$ 的排列 $P$，满足 $S_{P_1}-1=S_{P_2}=S_{P_3}+1$ 且 $S_{P_4}=S_{P_5}$。现有一长度为 $5$ 的整数序列 $a$，满足 $0\\le a_i \\le 9(1\\le i \\le 5)$。其中 $a_1 \\sim a_4$ 给定。试判断是否存在 $a_5$ 满足 $a$ 为「好的」。\n\n其中，长度为 $5$ 的排列 $P$，指的是一个长度为 $5$ 的数列，其中 $1,2,3,4,5$ 在这个数列中出现且只出现一次。", "inputFormat": "**本题含有多组数据。**\n\n- 第一行输入一个整数 $T$ 代表数据组数。\n- 接下来 $T$ 行每行输入四个整数 $a_1,a_2,a_3,a_4$。表示一组数据。", "outputFormat": "- 输出共 $T$ 行。对于每组数据，若存在满足条件的 $a_5$，输出 $1$；否则输出 $0$。", "hint": "### 附加样例\n\n- 样例 $2$ 见下发文件中的 $\\textbf{\\textit{one2.in/one2.ans}}$。该样例满足测试点 $2$ 的限制。\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{one3.in/one3.ans}}$。该样例满足测试点 $5$ 的限制。\n\n### 样例解释\n\n#### 样例 \\#1\n\n- 对于第 $1$ 组数据，可以令 $a_5=8$。此时存在 $P=\\{4,1,2,5,3\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $2$ 组数据，可以令 $a_5=4$。此时存在 $P=\\{3,2,1,4,5\\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。\n- 对于第 $3$ 组数据，不存在可以使 $a$ 为「好的」的 $a_5$。\n\n$$\n\\begin{aligned}\n\\fcolorbox{black}{#fbb}{3\\ \\ 2\\ \\ 8\\ \\ 4} + \\fcolorbox{black}{yellow}{8} &\\Rightarrow \\fcolorbox{black}{#fbb}{2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{8\\ \\ 8}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3\\ \\ 4} + \\fcolorbox{black}{yellow}{4} &\\Rightarrow \\fcolorbox{black}{#fbb}{1\\ \\ 2\\ \\ 3} + \\fcolorbox{black}{yellow}{4\\ \\ 4}\\ {\\color{green}\\sqrt{}}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9} +   \\begin{cases}\n\\fcolorbox{black}{yellow}{0}\\\\\n\\fcolorbox{black}{yellow}{1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{yellow}{9}\n\\end{cases}&\\Rightarrow\n{\\color{red}\\xcancel{\\color{black}\n\\begin{cases}\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 0}\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 1}\\\\\n\\cdots\\\\\n\\fcolorbox{black}{#fbb}{1\\ \\ 9\\ \\ 4\\ \\ 9\\ \\ 9}\n\\end{cases}}}\n\\end{aligned}\n$$\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|} \\hline\n\\textbf{\\textsf{测试点}} & \\bm{{T\\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 100 & \\textbf{A} \\cr\\hline\n2 & 100 & \\textbf{B} \\cr\\hline\n3 & 100 & - \\cr\\hline\n4 & 1000 & - \\cr\\hline\n5 & 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_1=a_2=a_3=a_4$。\n- 特殊性质 $\\bf B$：$a_1,a_2,a_3,a_4$ 互不相等。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$0\\le a_i \\le 9$。", "locale": "zh-CN"}}}
{"pid": "P8468", "type": "P", "difficulty": 2, "samples": [["2\n14 9\n3 3", "3 3 5 6\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[Aya Round 1 C] 文文的构造游戏", "background": "**Problem Number:** [$\\textit{23}$](https://www.luogu.com.cn/training/1392)\n\n众所周知，射命丸文和琪露诺是好朋友。但是文是大妖怪，非常聪明，而琪露诺是个笨蛋。为了提升琪露诺的智商，文便给琪露诺出了一道简单的题目。", "description": "对于一个长度为 $l$ 的数列 $p$，定义 $S(p)$ 为所有元素的**异或和**，其中 $\\oplus$ 指[按位异或运算](https://baike.baidu.com/item/%E5%BC%82%E6%88%96%E6%93%8D%E4%BD%9C)。\n\n给定整数 $s,m$，判断能否构造一个长度为 $n$（$n$ 值自定）的数列 $a$，满足：\n\n- $1 \\le n \\le m$。\n- $1 \\le a_i \\le s$。\n- $S(a)=0$。\n- $a_1+a_2+\\cdots+a_n=s$。\n\n试构造任意一组合法解或报告无解。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入两个整数 $s,m$。表示一组询问。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据：\n  - 若有解，首先输出一个整数 $n$，然后输出 $n$ 个整数，表示 $a$。\n  - 若无解，仅输出一行一个整数 $-1$。", "hint": "### 样例解释\n\n- 对于数据 $1$，容易发现 $3\\oplus5\\oplus6=0$，$3+5+6=14$。符合要求。\n- 对于数据 $2$，发现数列 $\\{3\\},\\{1,2\\},\\{1,1,1\\}$ 均不符合要求，故无解。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，有 $1\\le s\\le 10^{18}$，$1 \\le m$，$1 \\le \\sum m \\le 10^6$。\n\n**友情提示，您可能需要使用较快的 I/O 方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 C] 文文的构造游戏", "background": "**Problem Number:** [$\\textit{23}$](https://www.luogu.com.cn/training/1392)\n\n众所周知，射命丸文和琪露诺是好朋友。但是文是大妖怪，非常聪明，而琪露诺是个笨蛋。为了提升琪露诺的智商，文便给琪露诺出了一道简单的题目。", "description": "对于一个长度为 $l$ 的数列 $p$，定义 $S(p)$ 为所有元素的**异或和**，其中 $\\oplus$ 指[按位异或运算](https://baike.baidu.com/item/%E5%BC%82%E6%88%96%E6%93%8D%E4%BD%9C)。\n\n给定整数 $s,m$，判断能否构造一个长度为 $n$（$n$ 值自定）的数列 $a$，满足：\n\n- $1 \\le n \\le m$。\n- $1 \\le a_i \\le s$。\n- $S(a)=0$。\n- $a_1+a_2+\\cdots+a_n=s$。\n\n试构造任意一组合法解或报告无解。", "inputFormat": "**本题包含多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行输入两个整数 $s,m$。表示一组询问。", "outputFormat": "- 输出共 $T$ 行。\n- 对于每组数据：\n  - 若有解，首先输出一个整数 $n$，然后输出 $n$ 个整数，表示 $a$。\n  - 若无解，仅输出一行一个整数 $-1$。", "hint": "### 样例解释\n\n- 对于数据 $1$，容易发现 $3\\oplus5\\oplus6=0$，$3+5+6=14$。符合要求。\n- 对于数据 $2$，发现数列 $\\{3\\},\\{1,2\\},\\{1,1,1\\}$ 均不符合要求，故无解。\n\n### 数据范围与约定\n\n对于 $100\\%$ 的数据，有 $1\\le s\\le 10^{18}$，$1 \\le m$，$1 \\le \\sum m \\le 10^6$。\n\n**友情提示，您可能需要使用较快的 I/O 方式。**", "locale": "zh-CN"}}}
{"pid": "P8469", "type": "P", "difficulty": 2, "samples": [["3\n1 2 3", "1 6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "数论", "洛谷原创", "O2优化", "最大公约数 gcd", "组合数学", "洛谷月赛"], "title": "[Aya Round 1 D] 文文的数学游戏", "background": "在解决了上一题之后，琪露诺觉得自己仿佛就是天才。于是，射命丸文又给了她一道简单的数学题。", "description": "给定长度为 $n$ 的整数序列 $a$，你需要构造一个长度为 $n$ 的整数序列 $b$ 满足对于所有 $1\\le i\\le n$，有 $1\\le b_i \\le a_i$。且 $\\gcd(b_1,b_2,\\cdots,b_n)$ 最大，其中 $\\gcd$ 表示最大公因数。试求出能得到的最大值和取得最大值时，不同的数列 $b$ 的个数，对 $10^9+7$ 取模。\n\n定义两个长度为 $L$ 的数列 $c,d$ 不同，当且仅当存在整数 $i(1 \\le i \\le L)$，使得 $c_i \\ne d_i$。", "inputFormat": "- 第一行一个输入整数 $n$。\n- 第二行输入 $n$ 个整数，表示序列 $a$。", "outputFormat": "- 输出一行两个整数。分别表示能得到到的最大 $\\gcd(b_1,b_2,\\cdots,b_n)$ 和对应的不同的 $b$ 的个数，对 $10^9+7$ 取模。", "hint": "### 样例 1 解释\n\n注意到由于 $1\\le b_1\\le a_1=1$，因此 $b_1$ 必须要为 $1$，因此最大的 $\\gcd$ 值只能为 $1$。在这个前提下，所有合法的 $b$ 如下：\n\n- $\\{1,1,1\\},\\{1,1,2\\},\\{1,1,3\\},\\{1,2,1\\},\\{1,2,2\\},\\{1,2,3\\}$。\n\n### 数据范围与约束\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^5$，$1 \\le a_i\\le 10^9$。\n\n本题附带一组大样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 D] 文文的数学游戏", "background": "在解决了上一题之后，琪露诺觉得自己仿佛就是天才。于是，射命丸文又给了她一道简单的数学题。", "description": "给定长度为 $n$ 的整数序列 $a$，你需要构造一个长度为 $n$ 的整数序列 $b$ 满足对于所有 $1\\le i\\le n$，有 $1\\le b_i \\le a_i$。且 $\\gcd(b_1,b_2,\\cdots,b_n)$ 最大，其中 $\\gcd$ 表示最大公因数。试求出能得到的最大值和取得最大值时，不同的数列 $b$ 的个数，对 $10^9+7$ 取模。\n\n定义两个长度为 $L$ 的数列 $c,d$ 不同，当且仅当存在整数 $i(1 \\le i \\le L)$，使得 $c_i \\ne d_i$。", "inputFormat": "- 第一行一个输入整数 $n$。\n- 第二行输入 $n$ 个整数，表示序列 $a$。", "outputFormat": "- 输出一行两个整数。分别表示能得到到的最大 $\\gcd(b_1,b_2,\\cdots,b_n)$ 和对应的不同的 $b$ 的个数，对 $10^9+7$ 取模。", "hint": "### 样例 1 解释\n\n注意到由于 $1\\le b_1\\le a_1=1$，因此 $b_1$ 必须要为 $1$，因此最大的 $\\gcd$ 值只能为 $1$。在这个前提下，所有合法的 $b$ 如下：\n\n- $\\{1,1,1\\},\\{1,1,2\\},\\{1,1,3\\},\\{1,2,1\\},\\{1,2,2\\},\\{1,2,3\\}$。\n\n### 数据范围与约束\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^5$，$1 \\le a_i\\le 10^9$。\n\n本题附带一组大样例。", "locale": "zh-CN"}}}
{"pid": "P8470", "type": "P", "difficulty": 2, "samples": [["3\n1 1 2\n1 3 3\n1 2 4", "8\n20\n26"], ["6\n1 2 1\n2 1 4\n2 3 8\n3 2 6\n2 2 2\n2 2 11", "4\n20\n52\n76\n70\n90"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[Aya Round 1 E] 乙（two）", "background": "", "description": "定义由若干个边长为 $1$ 的正方体方块搭成的立体图形的「侧面积」为：对于所有方块，若它的前、后、左或右面没有紧贴着另一个方块，则该面计入侧面积。\n\n维护长宽均无限的矩形地面，地面被划分为若干个边长为 $1$ 的格子。$n$ 次操作，每次选择一个格子 $(x_i,y_i)$ 在该位置向上堆叠 $z_i$ 个边长为 $1$ 的正方体方块。每次操作后，输出整个立体图形的「侧面积」。", "inputFormat": "- 第一行输入一个整数 $n$。\n- 接下来 $n$ 行，每行输入三个整数 $x_i,y_i,z_i$。", "outputFormat": "- 输出共 $n$ 行，每行输出一个整数。表示每次操作后立体图形的「侧面积」。", "hint": "### 样例 1 解释\n\n如图所示，建立空间直角坐标系。其 $x$-轴向南、$y$-轴向东、$z$-轴向上。限于技术原因，此处仅给出斜二测画法的立体图形，请读者自行脑补立体图形其他角度的模样。图中绿色部分即为立体图形的侧面。\n\n第一次操作后，在 $(1,1)$ 位置放入了一个高度为 $2$ 的立体图形，侧面积为 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncd21a4f.png)\n\n第二次操作后，在 $(1,3)$ 位置放入了一个高度为 $3$ 的立体图形，侧面积为 $12$。由于两个立体图形没有接触，因此可以直接加上第一次放上的立体图形的侧面积，总侧面积为 $20$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hl9f45rq.png)\n\n第三次操作后，在 $(1,2)$ 位置放入了一个高度为 $4$ 的立体图形。由于某些面发生了接触，这些面对应的面积不计入侧面积的计算范围内。容易发现，总侧面积为 $26$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j8x2mtc8.png)\n\n---\n\n再强调下，每次堆叠操作是在对应位置上再加上 $z_i$ 个方块。例如下图，是先执行了 $\\verb!2 2 1!$，再执行了 $\\verb!2 2 3!$ 的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lgipl4z.png)\n\n### 附加样例\n\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{two3.in/two3.ans}}$。该样例满足测试点 $4$ 的限制。\n- 样例 $4$ 见下发文件中的 $\\textbf{\\textit{two4.in/two4.ans}}$。该样例满足测试点 $7$ 的限制。\n- 样例 $5$ 见下发文件中的 $\\textbf{\\textit{two5.in/two5.ans}}$。该样例满足测试点 $10$ 的限制。\n- 样例 $6$ 见下发文件中的 $\\textbf{\\textit{two6.in/two6.ans}}$。该样例满足测试点 $13$ 的限制。\n- 样例 $7$ 见下发文件中的 $\\textbf{\\textit{two7.in/two7.ans}}$。该样例满足测试点 $20$ 的限制。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c||c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} &\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 1 & 1 & 10 & - &\n14 & 10^3 & 10^3 & 10^3 & - \\cr\\hline\n2 & 2 & 5 & 10 & - &\n15 & 10^3 & 10^3 & 10^9 & - \\cr\\hline\n3 & 10 & 5 & 10 & - &\n16 & 10^3 & 10^9 & 10^9 & - \\cr\\hline\n4 & 100 & 100 & 100 & - &\n17 & 10^5 & 10^9 & 10^9 & \\textbf{AB} \\cr\\hline\n5 & 10^3 & 10^3 & 10^3 & \\textbf{AB} &\n18 & 10^5 & 10^9 & 10^9 & \\textbf{A} \\cr\\hline\n6 & 10^3 & 10^3 & 10^9 & \\textbf{AB} &\n19 & 10^5 & 10^9 & 10^9 & \\textbf{B} \\cr\\hline\n7 & 10^3 & 10^9 & 10^9 & \\textbf{AB} &\n20 & 10^5 & 10^9 & 10^9 & - \\cr\\hline\n8 & 10^3 & 10^3 & 10^3 & \\textbf{A} &\n21 & 2\\times 10^5 & 10^9 & 10^9 & - \\cr\\hline\n9 & 10^3 & 10^3 & 10^9 & \\textbf{A} &\n22 & 2\\times 10^5 & 10^9 & 10^{12} & - \\cr\\hline\n10 & 10^3 & 10^9 & 10^9 & \\textbf{A} &\n23 & 2\\times 10^5 & 10^9 & 10^{13} & \\textbf{A} \\cr\\hline\n11 & 10^3 & 10^3 & 10^3 & \\textbf{B} &\n24 & 2\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n12 & 10^3 & 10^3 & 10^9 & \\textbf{B} &\n25 & 3\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n13 & 10^3 & 10^9 & 10^9 & \\textbf{B} &&&&&\\cr\\hline\n\\end{array}\n$$\n\n- 特殊限制 $\\bf A$：$\\forall 1 \\le i\\le j \\le n$，有 $x_i=x_j$。\n- 特殊限制 $\\bf B$：$\\forall 1 \\le i\\le j \\le n$，有 $(x_i,y_i) \\ne (x_j,y_j)$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 3 \\times 10^5$，$1 \\le x,y \\le 10^9$，$1\\le z \\le 10^{13}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 E] 乙（two）", "background": "", "description": "定义由若干个边长为 $1$ 的正方体方块搭成的立体图形的「侧面积」为：对于所有方块，若它的前、后、左或右面没有紧贴着另一个方块，则该面计入侧面积。\n\n维护长宽均无限的矩形地面，地面被划分为若干个边长为 $1$ 的格子。$n$ 次操作，每次选择一个格子 $(x_i,y_i)$ 在该位置向上堆叠 $z_i$ 个边长为 $1$ 的正方体方块。每次操作后，输出整个立体图形的「侧面积」。", "inputFormat": "- 第一行输入一个整数 $n$。\n- 接下来 $n$ 行，每行输入三个整数 $x_i,y_i,z_i$。", "outputFormat": "- 输出共 $n$ 行，每行输出一个整数。表示每次操作后立体图形的「侧面积」。", "hint": "### 样例 1 解释\n\n如图所示，建立空间直角坐标系。其 $x$-轴向南、$y$-轴向东、$z$-轴向上。限于技术原因，此处仅给出斜二测画法的立体图形，请读者自行脑补立体图形其他角度的模样。图中绿色部分即为立体图形的侧面。\n\n第一次操作后，在 $(1,1)$ 位置放入了一个高度为 $2$ 的立体图形，侧面积为 $8$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncd21a4f.png)\n\n第二次操作后，在 $(1,3)$ 位置放入了一个高度为 $3$ 的立体图形，侧面积为 $12$。由于两个立体图形没有接触，因此可以直接加上第一次放上的立体图形的侧面积，总侧面积为 $20$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hl9f45rq.png)\n\n第三次操作后，在 $(1,2)$ 位置放入了一个高度为 $4$ 的立体图形。由于某些面发生了接触，这些面对应的面积不计入侧面积的计算范围内。容易发现，总侧面积为 $26$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j8x2mtc8.png)\n\n---\n\n再强调下，每次堆叠操作是在对应位置上再加上 $z_i$ 个方块。例如下图，是先执行了 $\\verb!2 2 1!$，再执行了 $\\verb!2 2 3!$ 的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3lgipl4z.png)\n\n### 附加样例\n\n- 样例 $3$ 见下发文件中的 $\\textbf{\\textit{two3.in/two3.ans}}$。该样例满足测试点 $4$ 的限制。\n- 样例 $4$ 见下发文件中的 $\\textbf{\\textit{two4.in/two4.ans}}$。该样例满足测试点 $7$ 的限制。\n- 样例 $5$ 见下发文件中的 $\\textbf{\\textit{two5.in/two5.ans}}$。该样例满足测试点 $10$ 的限制。\n- 样例 $6$ 见下发文件中的 $\\textbf{\\textit{two6.in/two6.ans}}$。该样例满足测试点 $13$ 的限制。\n- 样例 $7$ 见下发文件中的 $\\textbf{\\textit{two7.in/two7.ans}}$。该样例满足测试点 $20$ 的限制。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c||c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} &\n\\textbf{\\textsf{\\#}} & \\bm{{n \\le }} & \\bm{{x,y \\le}} & \\bm{{z \\le}} & \\textbf{\\textsf{特殊性质}} \\cr\\hline\n1 & 1 & 1 & 10 & - &\n14 & 10^3 & 10^3 & 10^3 & - \\cr\\hline\n2 & 2 & 5 & 10 & - &\n15 & 10^3 & 10^3 & 10^9 & - \\cr\\hline\n3 & 10 & 5 & 10 & - &\n16 & 10^3 & 10^9 & 10^9 & - \\cr\\hline\n4 & 100 & 100 & 100 & - &\n17 & 10^5 & 10^9 & 10^9 & \\textbf{AB} \\cr\\hline\n5 & 10^3 & 10^3 & 10^3 & \\textbf{AB} &\n18 & 10^5 & 10^9 & 10^9 & \\textbf{A} \\cr\\hline\n6 & 10^3 & 10^3 & 10^9 & \\textbf{AB} &\n19 & 10^5 & 10^9 & 10^9 & \\textbf{B} \\cr\\hline\n7 & 10^3 & 10^9 & 10^9 & \\textbf{AB} &\n20 & 10^5 & 10^9 & 10^9 & - \\cr\\hline\n8 & 10^3 & 10^3 & 10^3 & \\textbf{A} &\n21 & 2\\times 10^5 & 10^9 & 10^9 & - \\cr\\hline\n9 & 10^3 & 10^3 & 10^9 & \\textbf{A} &\n22 & 2\\times 10^5 & 10^9 & 10^{12} & - \\cr\\hline\n10 & 10^3 & 10^9 & 10^9 & \\textbf{A} &\n23 & 2\\times 10^5 & 10^9 & 10^{13} & \\textbf{A} \\cr\\hline\n11 & 10^3 & 10^3 & 10^3 & \\textbf{B} &\n24 & 2\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n12 & 10^3 & 10^3 & 10^9 & \\textbf{B} &\n25 & 3\\times 10^5 & 10^9 & 10^{13} & - \\cr\\hline\n13 & 10^3 & 10^9 & 10^9 & \\textbf{B} &&&&&\\cr\\hline\n\\end{array}\n$$\n\n- 特殊限制 $\\bf A$：$\\forall 1 \\le i\\le j \\le n$，有 $x_i=x_j$。\n- 特殊限制 $\\bf B$：$\\forall 1 \\le i\\le j \\le n$，有 $(x_i,y_i) \\ne (x_j,y_j)$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 3 \\times 10^5$，$1 \\le x,y \\le 10^9$，$1\\le z \\le 10^{13}$。", "locale": "zh-CN"}}}
{"pid": "P8471", "type": "P", "difficulty": 3, "samples": [["2\n3 2 3\nABABBA\n3 3 1\nAAABBB", "BBAABB\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[Aya Round 1 F] 琪露诺的选择题", "background": "**Problem Number:** [$\\textit{24}$](https://www.luogu.com.cn/training/1392)\n\n在经过射命丸文的一番调教之后，琪露诺的智商总算增长了⑨点。\n\n现在寺子屋又要开始考试了，琪露诺通过一些手段知道了答案中的一些信息，而且因为她冰雪聪明，她不希望自己的成绩进步太明显，从而被老师上白泽慧音特别关照。因此她找到了你寻求一些帮助。\n\n（注意：考试作弊是不对的！）", "description": "有 $2\\cdot n$ 道选择题，每题有 $\\text{A}$ 和 $\\text{B}$ 两个选项。正确答案可以表示为一个长度为 $2\\cdot n$ 的字符串。\n\n现在你要构造出一份作答（长度同样为 $2\\cdot n$ 的字符串），其中**恰好**有 $a$ 个 $\\text{A}$，同时与正确答案相比，你的作答恰好有 $e$ 个错误。如果不存在这样的构造方案，报告无解。\n\n**注意：为了方便处理，本题保证 $e\\le n$。**\n\n**形式化地**，给定 $n,a,e$ 和一个长度为 $2\\cdot n$ 的 01 串 $s$，你需要构造出一个恰好有 $a$ 个字符是 $\\texttt 0$ 的长度为 $2\\cdot n$ 的 01 串 $p$，使得\n\n$$\n\\left(\\sum_{i=1}^{2\\cdot n}[s_i\\ne p_i]\\right)=e,\n$$\n\n其中 $[]$ 是 Iverson Bracket，详见「**说明/提示**」中的「提示」。", "inputFormat": "**本题含有多组数据。**\n\n第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行输入三个整数 $n,a,e$。\n- 第二行输入一个长度为 $2\\cdot n$ 的字符串，表示答案串。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据：\n\n- 若有解，输出一行一个长度为 $2\\cdot n$ 的字符串，表示你构造的作答串。\n- 若无解，输出一行一个字符串 $\\texttt{-1}$。", "hint": "### 样例解释\n\n对于数据 $1$，你构造出的作答串 $\\text{BB{\\color{e74c3c}AA}BB}$ 中恰好有 $2$ 个 $\\text A$，与答案串相比刚好有 $3$ 处不同（即，有 $3$ 处错误）：\n\n$$\n\\text{{\\color{e74c3c}A}BA{\\color{e74c3c}B}B{\\color{e74c3c}A}}\\\\\n\\text{{\\color{52c41a}B}BA{\\color{52c41a}A}B{\\color{52c41a}B}}\n$$\n\n故符合要求。\n\n对于数据 $2$，不存在合法构造方案。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le T\\le 100$，$1\\le n\\le 10^5$，$0\\le e\\le n$，$0\\le a\\le 2\\cdot n$。\n\n单组测试点内保证 $\\sum(2\\cdot n)\\le 10^6$。\n\n### 提示\n\n$\\textbf{A. Iverson Bracket}$\n\nIverson Bracket，是一种用方括号记号，如果方括号内的条件满足则为 $1$，不满足则为 $0$。更确切地讲，\n\n$$\n[P]=\\begin{cases}1, & \\text{If }P\\text{ is true,}\\\\0,&\\text{Otherwise.}\\end{cases}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 F] 琪露诺的选择题", "background": "**Problem Number:** [$\\textit{24}$](https://www.luogu.com.cn/training/1392)\n\n在经过射命丸文的一番调教之后，琪露诺的智商总算增长了⑨点。\n\n现在寺子屋又要开始考试了，琪露诺通过一些手段知道了答案中的一些信息，而且因为她冰雪聪明，她不希望自己的成绩进步太明显，从而被老师上白泽慧音特别关照。因此她找到了你寻求一些帮助。\n\n（注意：考试作弊是不对的！）", "description": "有 $2\\cdot n$ 道选择题，每题有 $\\text{A}$ 和 $\\text{B}$ 两个选项。正确答案可以表示为一个长度为 $2\\cdot n$ 的字符串。\n\n现在你要构造出一份作答（长度同样为 $2\\cdot n$ 的字符串），其中**恰好**有 $a$ 个 $\\text{A}$，同时与正确答案相比，你的作答恰好有 $e$ 个错误。如果不存在这样的构造方案，报告无解。\n\n**注意：为了方便处理，本题保证 $e\\le n$。**\n\n**形式化地**，给定 $n,a,e$ 和一个长度为 $2\\cdot n$ 的 01 串 $s$，你需要构造出一个恰好有 $a$ 个字符是 $\\texttt 0$ 的长度为 $2\\cdot n$ 的 01 串 $p$，使得\n\n$$\n\\left(\\sum_{i=1}^{2\\cdot n}[s_i\\ne p_i]\\right)=e,\n$$\n\n其中 $[]$ 是 Iverson Bracket，详见「**说明/提示**」中的「提示」。", "inputFormat": "**本题含有多组数据。**\n\n第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行输入三个整数 $n,a,e$。\n- 第二行输入一个长度为 $2\\cdot n$ 的字符串，表示答案串。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据：\n\n- 若有解，输出一行一个长度为 $2\\cdot n$ 的字符串，表示你构造的作答串。\n- 若无解，输出一行一个字符串 $\\texttt{-1}$。", "hint": "### 样例解释\n\n对于数据 $1$，你构造出的作答串 $\\text{BB{\\color{e74c3c}AA}BB}$ 中恰好有 $2$ 个 $\\text A$，与答案串相比刚好有 $3$ 处不同（即，有 $3$ 处错误）：\n\n$$\n\\text{{\\color{e74c3c}A}BA{\\color{e74c3c}B}B{\\color{e74c3c}A}}\\\\\n\\text{{\\color{52c41a}B}BA{\\color{52c41a}A}B{\\color{52c41a}B}}\n$$\n\n故符合要求。\n\n对于数据 $2$，不存在合法构造方案。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le T\\le 100$，$1\\le n\\le 10^5$，$0\\le e\\le n$，$0\\le a\\le 2\\cdot n$。\n\n单组测试点内保证 $\\sum(2\\cdot n)\\le 10^6$。\n\n### 提示\n\n$\\textbf{A. Iverson Bracket}$\n\nIverson Bracket，是一种用方括号记号，如果方括号内的条件满足则为 $1$，不满足则为 $0$。更确切地讲，\n\n$$\n[P]=\\begin{cases}1, & \\text{If }P\\text{ is true,}\\\\0,&\\text{Otherwise.}\\end{cases}\n$$", "locale": "zh-CN"}}}
{"pid": "P8472", "type": "P", "difficulty": 4, "samples": [["3 4 2\nBBGB\nGBBB\nPGPP", "8\nBBBB\nBBBB\nPGPP"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛", "双指针 two-pointer"], "title": "[Aya Round 1 G] 咕噜论坛（post）", "background": "", "description": "「咕噜论坛」的一篇帖子下，有若干个不同的人对其进行了回复，这些评论形成了一个 $n\\times m$ 的矩阵。\n\n论坛管理员 prAB 发现这些评论者的名字颜色只有灰名、紫名和棕名三种，他决定「动用神权」来增加这些评论的整齐度。但是论坛站长超氧化铯（CsO2）可能会因为他「滥用神权」导致论坛「臭名昭著」而踢掉他的管理身份。所以 prAB **最多**只能动用 $k$ 次神权。已知他的神权有两种：\n\n- 「暴政警告」：送一个灰名进陶片使他变成棕名。\n- 「放人一马」：将一个棕名解封使他变成灰名。\n\n由于「咕噜论坛」的管理员是至高无上的，对于评论中的紫名他无能为力。\n\nprAB 认为在这些评论者的名字颜色中，最大的颜色相同的子矩阵的大小能代表这篇帖子评论的整齐度。所以他想知道，他动用完神权后评论的整齐度的最大值。", "inputFormat": "- 第一行输入三个整数 $n,m,k$。\n- 接下来 $n$ 行，每行输入一个长度为 $m$ 的字符串，代表评论矩阵中每个人名字的颜色。其中 `B` 代表棕名，`G` 代表灰名，`P` 代表紫名。", "outputFormat": "- 第一行输出一个整数，表示整齐度的最大值。\n- 下面 $n$ 行，每行输出一个长度为 $m$ 的字符串，格式同「输入格式」。代表修改完后每个人名字的颜色。如有多种方案输出则任意一种即可。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1 \\le n,m\\le 500$，$0 \\le k \\le nm$。字符矩阵中只会出现大写字母 `B`、`G` 和 `P`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 G] 咕噜论坛（post）", "background": "", "description": "「咕噜论坛」的一篇帖子下，有若干个不同的人对其进行了回复，这些评论形成了一个 $n\\times m$ 的矩阵。\n\n论坛管理员 prAB 发现这些评论者的名字颜色只有灰名、紫名和棕名三种，他决定「动用神权」来增加这些评论的整齐度。但是论坛站长超氧化铯（CsO2）可能会因为他「滥用神权」导致论坛「臭名昭著」而踢掉他的管理身份。所以 prAB **最多**只能动用 $k$ 次神权。已知他的神权有两种：\n\n- 「暴政警告」：送一个灰名进陶片使他变成棕名。\n- 「放人一马」：将一个棕名解封使他变成灰名。\n\n由于「咕噜论坛」的管理员是至高无上的，对于评论中的紫名他无能为力。\n\nprAB 认为在这些评论者的名字颜色中，最大的颜色相同的子矩阵的大小能代表这篇帖子评论的整齐度。所以他想知道，他动用完神权后评论的整齐度的最大值。", "inputFormat": "- 第一行输入三个整数 $n,m,k$。\n- 接下来 $n$ 行，每行输入一个长度为 $m$ 的字符串，代表评论矩阵中每个人名字的颜色。其中 `B` 代表棕名，`G` 代表灰名，`P` 代表紫名。", "outputFormat": "- 第一行输出一个整数，表示整齐度的最大值。\n- 下面 $n$ 行，每行输出一个长度为 $m$ 的字符串，格式同「输入格式」。代表修改完后每个人名字的颜色。如有多种方案输出则任意一种即可。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1 \\le n,m\\le 500$，$0 \\le k \\le nm$。字符矩阵中只会出现大写字母 `B`、`G` 和 `P`。", "locale": "zh-CN"}}}
{"pid": "P8473", "type": "P", "difficulty": 4, "samples": [["6 3\n1 2 3 5 8 13\n1 0 0 1 0 1\n1 5 10\n1 1 15\n2 2\n", "No\nNo\nYes\nNo"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "[Aya Round 1 H] 破碎的历史", "background": "幻想乡迎来了它的毁灭，幻想的载体也已经遁入了幻想。\n\n所幸的是，幻想乡中的乡民们还侥幸存活着，她们在尝试恢复幻想乡的历史。然而历史之中的大大小小的事情不计其数，人们只能记得起一些大事情罢了。\n\n或许，根据那些重要的事情，可以把次要的事件推导出来呢？", "description": "数轴的正半轴上有 $n$ 个互不相同的被黑白染色的特殊整点，位置从左到右依次为 $p_1,p_2,\\cdots,p_n$。维护初始为空的**可重**线段集合 $S$。\n\n$q$ 次操作。操作分若干种，具体格式如下：\n\n- `1 l r`：将所有满足 $l \\le x \\le y \\le r$ 且两端点均为特殊整点的线段 $[x,y]$ 加入 $S$。\n- `2 x`：撤回第 $x$ 次操作添加的线段。\n\n在初始时和每次操作后，假设你可以进行任意次（可以是零次）染色。每次从 $S$ 中选出一条线段 $[x,y]$，满足位于点 $x$ 和点 $y$ 的特殊整点均为黑色，然后将所有在线段内的白色特殊整点染黑。试判断是否存在至少一种合法染色方式使得正半轴上的所有特殊整点均被染黑（即，不存在白色特殊整点）。**注意：所有的询问均为「假设」，即各组询问之间独立，不会造成对数轴的实际修改。**\n", "inputFormat": "- 第一行输入两个整数 $n,q$。\n- 第二行输入 $n$ 个整数 $p_1,p_2,\\cdots,p_n$，表示 $n$ 个特殊整点从左到右的位置。\n- 第三行输入 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示特殊整点的颜色。其中 $a_i=0$ 表示白色，$a_i=1$ 表示黑色。\n- 接下来 $q$ 行，每行二至三个整数，表示一次操作。\n", "outputFormat": "- 输出共 $(q+1)$ 行。\n- 在初始时和每次操作后，输出一行一个字符串：\n  - `yes` 代表存在合法染色方式。\n  - `no` 代表不存在合法染色方式。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示存在合法染色方式。", "hint": "### 样例解释\n\n六个特殊点的位置/颜色在数轴正半轴上如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i1hfjrk8.png)\n\n容易发现，并非所有点都是黑点。因此在进行操作前，输出 $\\verb!NO!$。\n\n第一次操作后，一共往 $S$ 加入了三条线段：$[5,5],[8,8],[5,8]$（图中省略了端点重叠的线段）。容易发现，此时无法进行任何操作，因此没法将所有点变成黑点。输出 $\\verb!NO!$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ayeijyli.png)\n\n第二次操作后，又往 $S$ 中加入了 $20$ 条线段。除去端点重叠的选段，在 $S$ 中如图所示。（以示区别，上一次操作加入的边标成了深蓝色）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/icw9ar9m.png)\n\n可以找出一种方案，将图上所有特殊点变成黑点。具体而言，首先选择 $S$ 中 $[1,5]$ 线段（容易发现位于 $1$ 和 $5$ 的特殊点均为黑点，因此可以进行染色），那么可以把位于 $2$ 和 $3$ 的点染色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3k1uvul0.png)\n\n此时又可以选择 $S$ 中 $[3,13]$ 线段（在上一轮操作中，$3$ 号点变为了黑点，因此 $[3,13]$ 符合条件），将点 $8$ 染为黑色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ebafj63.png)\n\n此时所有点都为黑色，因此输出 $\\verb!YES!$。再次强调，询问之间互相独立，且只是询问是否存在染色方案，而不会对特殊整点进行实际上的染色操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pjqpqvtr.png)\n\n第三个操作撤回了第二个操作往 $S$ 里加入的所有线段。因此退回到了只有第一个操作的情况。不存在一种方案将所有点染黑，因此输出 $\\verb!NO!$。\n\n### 数据范围\n\n对于所有数据，$1 \\le n,q \\le 5 \\times 10^5$，$a_i \\in \\{0,1\\}$，$1 \\le l< r \\le 10^9$，$1 \\le p_i \\le 10^9$。保证 $p_i$ 单调递增，$2$ 操作撤销的只会是 $1$ 操作，且每个操作最多被撤销一次。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Aya Round 1 H] 破碎的历史", "background": "幻想乡迎来了它的毁灭，幻想的载体也已经遁入了幻想。\n\n所幸的是，幻想乡中的乡民们还侥幸存活着，她们在尝试恢复幻想乡的历史。然而历史之中的大大小小的事情不计其数，人们只能记得起一些大事情罢了。\n\n或许，根据那些重要的事情，可以把次要的事件推导出来呢？", "description": "数轴的正半轴上有 $n$ 个互不相同的被黑白染色的特殊整点，位置从左到右依次为 $p_1,p_2,\\cdots,p_n$。维护初始为空的**可重**线段集合 $S$。\n\n$q$ 次操作。操作分若干种，具体格式如下：\n\n- `1 l r`：将所有满足 $l \\le x \\le y \\le r$ 且两端点均为特殊整点的线段 $[x,y]$ 加入 $S$。\n- `2 x`：撤回第 $x$ 次操作添加的线段。\n\n在初始时和每次操作后，假设你可以进行任意次（可以是零次）染色。每次从 $S$ 中选出一条线段 $[x,y]$，满足位于点 $x$ 和点 $y$ 的特殊整点均为黑色，然后将所有在线段内的白色特殊整点染黑。试判断是否存在至少一种合法染色方式使得正半轴上的所有特殊整点均被染黑（即，不存在白色特殊整点）。**注意：所有的询问均为「假设」，即各组询问之间独立，不会造成对数轴的实际修改。**\n", "inputFormat": "- 第一行输入两个整数 $n,q$。\n- 第二行输入 $n$ 个整数 $p_1,p_2,\\cdots,p_n$，表示 $n$ 个特殊整点从左到右的位置。\n- 第三行输入 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示特殊整点的颜色。其中 $a_i=0$ 表示白色，$a_i=1$ 表示黑色。\n- 接下来 $q$ 行，每行二至三个整数，表示一次操作。\n", "outputFormat": "- 输出共 $(q+1)$ 行。\n- 在初始时和每次操作后，输出一行一个字符串：\n  - `yes` 代表存在合法染色方式。\n  - `no` 代表不存在合法染色方式。\n- 你可以输出字符串的任意大小写形式。例如：字符串 `yes`、`Yes`、`YES` 均会被视为表示存在合法染色方式。", "hint": "### 样例解释\n\n六个特殊点的位置/颜色在数轴正半轴上如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i1hfjrk8.png)\n\n容易发现，并非所有点都是黑点。因此在进行操作前，输出 $\\verb!NO!$。\n\n第一次操作后，一共往 $S$ 加入了三条线段：$[5,5],[8,8],[5,8]$（图中省略了端点重叠的线段）。容易发现，此时无法进行任何操作，因此没法将所有点变成黑点。输出 $\\verb!NO!$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ayeijyli.png)\n\n第二次操作后，又往 $S$ 中加入了 $20$ 条线段。除去端点重叠的选段，在 $S$ 中如图所示。（以示区别，上一次操作加入的边标成了深蓝色）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/icw9ar9m.png)\n\n可以找出一种方案，将图上所有特殊点变成黑点。具体而言，首先选择 $S$ 中 $[1,5]$ 线段（容易发现位于 $1$ 和 $5$ 的特殊点均为黑点，因此可以进行染色），那么可以把位于 $2$ 和 $3$ 的点染色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3k1uvul0.png)\n\n此时又可以选择 $S$ 中 $[3,13]$ 线段（在上一轮操作中，$3$ 号点变为了黑点，因此 $[3,13]$ 符合条件），将点 $8$ 染为黑色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ebafj63.png)\n\n此时所有点都为黑色，因此输出 $\\verb!YES!$。再次强调，询问之间互相独立，且只是询问是否存在染色方案，而不会对特殊整点进行实际上的染色操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pjqpqvtr.png)\n\n第三个操作撤回了第二个操作往 $S$ 里加入的所有线段。因此退回到了只有第一个操作的情况。不存在一种方案将所有点染黑，因此输出 $\\verb!NO!$。\n\n### 数据范围\n\n对于所有数据，$1 \\le n,q \\le 5 \\times 10^5$，$a_i \\in \\{0,1\\}$，$1 \\le l< r \\le 10^9$，$1 \\le p_i \\le 10^9$。保证 $p_i$ 单调递增，$2$ 操作撤销的只会是 $1$ 操作，且每个操作最多被撤销一次。\n", "locale": "zh-CN"}}}
{"pid": "P8474", "type": "P", "difficulty": 3, "samples": [["3", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「GLR-R3」立春", "background": "&emsp;&emsp;「从此雪消风自软，梅花合让柳条新」\n\n---\n\n&emsp;&emsp;“明天就要返校了呢。”\n\n&emsp;&emsp;灰色的长发被身后的人儿慢慢地顺着，顺着，于假期最后一个慵懒的清晨醒来，与春日的第一抹阳光迷迷糊糊地耳语，她的目光随着点过窗外的鸟雀，停留在那丛褐色的光秃枝丫。\n\n&emsp;&emsp;“天依？”\n\n&emsp;&emsp;赤红色的眸子随之望去，片刻，静默。\n\n&emsp;&emsp;“如果我能告诉它，今天是立春，是春天的……”\n\n&emsp;&emsp;“那么它会抽芽，繁盛，会成为我们窗外或红或绿的美妙。”\n\n&emsp;&emsp;“——因为它本该如此，希望如此吧。”\n\n---\n\n&emsp;&emsp;**立春**&emsp;「雏鸟站在悬崖上　展开了翅膀　地平线上的梦想　照进一缕光」\n", "description": "由于天依刚睡醒，害怕第一题的题面就迷糊了大家，所以本题只有简要题意。~~（其实是实在编不下去了。）~~\n\n设 $\\sigma$ 为任意一个长度为 $n$ 的排列，$\\tau(\\sigma)$ 表示其中的逆序对个数，请求出\n\n$$\n\\sum_\\sigma 2^{\\tau(\\sigma)}\n$$\n\n对 $(10^9+7)$ 取模的结果。", "inputFormat": "输入一行一个整数 $n$，表示排列的长度。", "outputFormat": "输出一行一个整数，表示所求得的答案。", "hint": "#### 题意解释\n\n本节为部分选手介绍**逆序对的定义**，对此熟悉的选手可以跳过本节。\n\n对于长度为 $n$ 的排列 $\\sigma$，假设下标从 $1$ 开始，那么我们称 $(i,j)$ 构成逆序对，当且仅当 $1\\le i<j\\le n$，并且 $\\sigma_i>\\sigma_j$；$\\tau(\\sigma)$ 则表示总共有多少对不同的 $(i,j)$ 满足上述条件。\n\n举个例子，对于排列 $\\sigma=\\lang 2,4,1,3\\rang$，有逆序对 $(1,3),(2,3),(2,4)$，所以 $\\tau(\\sigma)=3$。可见只要 $\\sigma$ 中元素的大小关系确定，$\\tau(\\sigma)$ 就是确定的。\n\n#### 样例 #1 解释\n\n$$\n\\begin{aligned}\n\\sum_{\\sigma}2^{\\tau(\\sigma)} &= 2^{\\tau(\\lang 1,2,3\\rang)}+2^{\\tau(\\lang 1,3,2\\rang)}+2^{\\tau(\\lang 2,1,3\\rang)}+2^{\\tau(\\lang 2,3,1\\rang)}+2^{\\tau(\\lang 3,1,2\\rang)}+2^{\\tau(\\lang 3,2,1\\rang)}\\\\\n&= 2^0+2^1+2^1+2^2+2^2+2^3\\\\\n&= 21.\n\\end{aligned}\n$$\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n| 子任务编号 |    $n$    | 分值 |\n| :--------: | :-------: | :--: |\n|    $1$     |  $\\le4$   | $5$  |\n|    $2$     |  $\\le10$  | $20$ |\n|    $3$     | $\\le100$  | $20$ |\n|    $4$     | $\\le10^3$ | $25$ |\n|    $5$     | $\\le10^7$ | $30$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」立春", "background": "&emsp;&emsp;「从此雪消风自软，梅花合让柳条新」\n\n---\n\n&emsp;&emsp;“明天就要返校了呢。”\n\n&emsp;&emsp;灰色的长发被身后的人儿慢慢地顺着，顺着，于假期最后一个慵懒的清晨醒来，与春日的第一抹阳光迷迷糊糊地耳语，她的目光随着点过窗外的鸟雀，停留在那丛褐色的光秃枝丫。\n\n&emsp;&emsp;“天依？”\n\n&emsp;&emsp;赤红色的眸子随之望去，片刻，静默。\n\n&emsp;&emsp;“如果我能告诉它，今天是立春，是春天的……”\n\n&emsp;&emsp;“那么它会抽芽，繁盛，会成为我们窗外或红或绿的美妙。”\n\n&emsp;&emsp;“——因为它本该如此，希望如此吧。”\n\n---\n\n&emsp;&emsp;**立春**&emsp;「雏鸟站在悬崖上　展开了翅膀　地平线上的梦想　照进一缕光」\n", "description": "由于天依刚睡醒，害怕第一题的题面就迷糊了大家，所以本题只有简要题意。~~（其实是实在编不下去了。）~~\n\n设 $\\sigma$ 为任意一个长度为 $n$ 的排列，$\\tau(\\sigma)$ 表示其中的逆序对个数，请求出\n\n$$\n\\sum_\\sigma 2^{\\tau(\\sigma)}\n$$\n\n对 $(10^9+7)$ 取模的结果。", "inputFormat": "输入一行一个整数 $n$，表示排列的长度。", "outputFormat": "输出一行一个整数，表示所求得的答案。", "hint": "#### 题意解释\n\n本节为部分选手介绍**逆序对的定义**，对此熟悉的选手可以跳过本节。\n\n对于长度为 $n$ 的排列 $\\sigma$，假设下标从 $1$ 开始，那么我们称 $(i,j)$ 构成逆序对，当且仅当 $1\\le i<j\\le n$，并且 $\\sigma_i>\\sigma_j$；$\\tau(\\sigma)$ 则表示总共有多少对不同的 $(i,j)$ 满足上述条件。\n\n举个例子，对于排列 $\\sigma=\\lang 2,4,1,3\\rang$，有逆序对 $(1,3),(2,3),(2,4)$，所以 $\\tau(\\sigma)=3$。可见只要 $\\sigma$ 中元素的大小关系确定，$\\tau(\\sigma)$ 就是确定的。\n\n#### 样例 #1 解释\n\n$$\n\\begin{aligned}\n\\sum_{\\sigma}2^{\\tau(\\sigma)} &= 2^{\\tau(\\lang 1,2,3\\rang)}+2^{\\tau(\\lang 1,3,2\\rang)}+2^{\\tau(\\lang 2,1,3\\rang)}+2^{\\tau(\\lang 2,3,1\\rang)}+2^{\\tau(\\lang 3,1,2\\rang)}+2^{\\tau(\\lang 3,2,1\\rang)}\\\\\n&= 2^0+2^1+2^1+2^2+2^2+2^3\\\\\n&= 21.\n\\end{aligned}\n$$\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n| 子任务编号 |    $n$    | 分值 |\n| :--------: | :-------: | :--: |\n|    $1$     |  $\\le4$   | $5$  |\n|    $2$     |  $\\le10$  | $20$ |\n|    $3$     | $\\le100$  | $20$ |\n|    $4$     | $\\le10^3$ | $25$ |\n|    $5$     | $\\le10^7$ | $30$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P8475", "type": "P", "difficulty": 3, "samples": [["7 20120712 21702102 4", "43"], ["10 114514 19198 10", "256"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "「GLR-R3」雨水", "background": "&emsp;&emsp;「天将化雨舒清景，萌动生机待绿田」\n\n---\n\n&emsp;&emsp;在天依面前口口声声说着习惯了，才开学没几天，文化课和乐队训练的压力可是又让阿绫头疼呢。\n\n&emsp;&emsp;浓缩为一个晚上的周末。站在阳台上，摸索朦胧于雨声的城市轮廓。雨水之日的雨，对于眼前的高楼大厦——们，恐怕也难有一些别样的意境吧。\n\n&emsp;&emsp;“雨水节令的雨、白露节令的露、霜降节令的霜、小雪节令的雪各十二钱……”\n\n&emsp;&emsp;胡乱想着，阿绫噗嗤一声笑了出来，“但是不管在哪里，雨中的空气，雨后的初阳，总是清新得叫人欢喜。”向着雨幕笑笑，拨弄这手里的旧吉他，不知不觉哼起那首歌来。\n\n---\n\n&emsp;&emsp;**雨水**&emsp;「等凉雨　的温度　将不安燥热中和　寻觅着　风的波折」", "description": "\n\n身后的门被敲响，接过天依包回来的一大盒多肉，放下东西贴贴一会儿之后，她们决定把多肉们在阳台上排成一排。\n\n多肉们的高度不尽相同，天依先将一共 $n$ 盆多肉随意排成一排，从左到右第 $i$ 盆的高度为 $a_i$。为了美观，她希望交换某些多肉的位置，使得由高度组成的序列 $A$ 的**字典序**尽可能小，不过，为了照顾多肉们的感受（？）她要求阿绫只能选取 $A$ 的一个**长度为偶数的子序列**（长度可以为 $0$），交换序列里第 $1$ 盆和第 $2$ 盆，第 $3$ 盆和第 $4$ 盆……的位置，然后放回它们原来的位置中。\n\n苦活交给了阿绫，思考的工作自然交给你啦！请告诉阿绫，仅使用**一次**选取子序列的操作，她能够得到的字典序最小的新高度序列 $A'$。\n\n#### 形式化题意\n\n给定一个长为 $n$ 的整数序列 $A$，下标从 $1$ 开始。你可以**任取一个**自然数 $k$ 以及一个序列 $\\lang 1,2,\\dots,n\\rang$ 的，长度为 $2k~(k\\in\\mathbb N)$ 的**子序列** $P$，并对于所有 $i=1,2,\\dots,k$，交换 $A_{P_{2i-1}}$ 与 $A_{P_{2i}}$ 的值。求在所有可能得到的新序列 $A'$ 中，**字典序** 最小的序列。\n\n**字典序**：对于长度为 $n$ 的序列 $A$ 和 $B$，定义 $A$ 的字典序小于 $B$，当且仅当：\n\n$$\n\\exists i\\in[1,n], (\\forall j\\in[1,i), A_j=B_j)\\land A_i<B_i.\n$$\n\n**注意**：本题输入输出方式具有特殊性。详见「输入格式」与「输出格式」。\n", "inputFormat": "为节省程序输入耗时，序列 $A$ 将在你的程序内部由 `xorShift128Plus` 和提供的种子生成。下面给出 C++ 语言下的示例程序：\n\n```cpp\n#include <cstdio> // scanf\n\nconst int MAXN = 712; // Set a right value according to your solution.\nint n, a[MAXN + 1];\n\nnamespace Generator {\n\nunsigned long long k1, k2;\nint thres;\n\ninline unsigned long long xorShift128Plus() {\n    unsigned long long k3 = k1, k4 = k2;\n    k1 = k4, k3 ^= (k3 << 23), k2 = k3 ^ k4 ^ (k3 >> 17) ^ (k4 >> 26);\n    return k2 + k4;\n}\n\ninline void generate() {\n    for (int i = 1; i <= n; ++i) {\n        a[i] = xorShift128Plus() % thres;\n    }\n}\n\n} // namespace Generator.\n\nint main() {\n    scanf(\"%d\", &n);\n    scanf(\"%llu %llu %d\", &Generator::k1, &Generator::k2, &Generator::thres);\n    Generator::generate();\n    // Now array a[1..n] represents the sequence A in the statement.\n    return 0;\n}\n```\n\n输入文件仅有一行，包含四个整数 $n,k_1,k_2,\\textit{thres}$。\n\n程序读入序列长度 $n$，种子 $k_1,k_2$ 和序列值上限 $\\textit{thres}$，用 `xorShift128Plus` 连续生成 $n$ 个随机数，将它们对 $\\textit{thres}$ 取模的值依次赋给 $a_1,a_2,\\cdots,a_n$，得到序列 $A$。请使用其他语言的选手自行查阅相关信息实现生成器。\n", "outputFormat": "为节省程序输出耗时，你的程序应当输出一行一个整数，表示 $\\left(\\sum_{i=1}^ni\\times A_i'\\right)\\bmod2^{64}$ 的值。\n", "hint": "#### 样例 #1 解释\n\n生成的序列为 $A=\\lang 1,1,3,0,0,1,3\\rang$，选取 $k=1,P=\\lang 1,5\\rang$, 得到答案序列为 $A'=\\lang 0,1,3,0,1,1,3\\rang$，按照要求计算知答案为 $43$。\n\n#### 样例 #2 解释\n\n生成的序列为 $A=\\lang 2,8,0,6,2,2,1,7,8,3\\rang$，选取 $k=3,P=\\lang 1,3,4,7,8,10\\rang$, 得到答案序列为 $A'=\\lang 0,8,2,1,2,2,6,3,8,7\\rang$，按照要求计算知答案为 $256$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的测试数据，$1\\le n\\le10^7$，$2\\le \\textit{thres}\\le10^9$，$0\\le k_1,k_2<2^{64}$。\n\n对于不同的子任务，作如下约定：\n\n | 子任务编号 |    $n$    |     $\\textit{thres}$     | 特殊性质 | 分值 |\n| :--------: | :-------: | :---------: | :------: | :--: |\n|    $1$     | $\\le10^5$ |  $\\le10^9$   |  **有**  | $10$ |\n|    $2$     |   $\\le20$    | $\\le10$ |    无    | $15$ |\n|    $3$     | $\\le10^7$ | $=2$  |    无    | $20$ |\n|    $4$     | $\\le10^7$ | $\\le10^7$ |    无    | $25$ |\n|    $5$     | $\\le10^7$ | $\\le10^9$ |    无    | $30$ |\n\n- **特殊性质**：保证程序正确生成的序列 $A$ 中不存在相等元素。\n\n- **注意**：本题时限为 $0.5\\text s$。\n\n- ~~热知识：《世末歌者》演唱于夏日，显然不在雨水节气。~~\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」雨水", "background": "&emsp;&emsp;「天将化雨舒清景，萌动生机待绿田」\n\n---\n\n&emsp;&emsp;在天依面前口口声声说着习惯了，才开学没几天，文化课和乐队训练的压力可是又让阿绫头疼呢。\n\n&emsp;&emsp;浓缩为一个晚上的周末。站在阳台上，摸索朦胧于雨声的城市轮廓。雨水之日的雨，对于眼前的高楼大厦——们，恐怕也难有一些别样的意境吧。\n\n&emsp;&emsp;“雨水节令的雨、白露节令的露、霜降节令的霜、小雪节令的雪各十二钱……”\n\n&emsp;&emsp;胡乱想着，阿绫噗嗤一声笑了出来，“但是不管在哪里，雨中的空气，雨后的初阳，总是清新得叫人欢喜。”向着雨幕笑笑，拨弄这手里的旧吉他，不知不觉哼起那首歌来。\n\n---\n\n&emsp;&emsp;**雨水**&emsp;「等凉雨　的温度　将不安燥热中和　寻觅着　风的波折」", "description": "\n\n身后的门被敲响，接过天依包回来的一大盒多肉，放下东西贴贴一会儿之后，她们决定把多肉们在阳台上排成一排。\n\n多肉们的高度不尽相同，天依先将一共 $n$ 盆多肉随意排成一排，从左到右第 $i$ 盆的高度为 $a_i$。为了美观，她希望交换某些多肉的位置，使得由高度组成的序列 $A$ 的**字典序**尽可能小，不过，为了照顾多肉们的感受（？）她要求阿绫只能选取 $A$ 的一个**长度为偶数的子序列**（长度可以为 $0$），交换序列里第 $1$ 盆和第 $2$ 盆，第 $3$ 盆和第 $4$ 盆……的位置，然后放回它们原来的位置中。\n\n苦活交给了阿绫，思考的工作自然交给你啦！请告诉阿绫，仅使用**一次**选取子序列的操作，她能够得到的字典序最小的新高度序列 $A'$。\n\n#### 形式化题意\n\n给定一个长为 $n$ 的整数序列 $A$，下标从 $1$ 开始。你可以**任取一个**自然数 $k$ 以及一个序列 $\\lang 1,2,\\dots,n\\rang$ 的，长度为 $2k~(k\\in\\mathbb N)$ 的**子序列** $P$，并对于所有 $i=1,2,\\dots,k$，交换 $A_{P_{2i-1}}$ 与 $A_{P_{2i}}$ 的值。求在所有可能得到的新序列 $A'$ 中，**字典序** 最小的序列。\n\n**字典序**：对于长度为 $n$ 的序列 $A$ 和 $B$，定义 $A$ 的字典序小于 $B$，当且仅当：\n\n$$\n\\exists i\\in[1,n], (\\forall j\\in[1,i), A_j=B_j)\\land A_i<B_i.\n$$\n\n**注意**：本题输入输出方式具有特殊性。详见「输入格式」与「输出格式」。\n", "inputFormat": "为节省程序输入耗时，序列 $A$ 将在你的程序内部由 `xorShift128Plus` 和提供的种子生成。下面给出 C++ 语言下的示例程序：\n\n```cpp\n#include <cstdio> // scanf\n\nconst int MAXN = 712; // Set a right value according to your solution.\nint n, a[MAXN + 1];\n\nnamespace Generator {\n\nunsigned long long k1, k2;\nint thres;\n\ninline unsigned long long xorShift128Plus() {\n    unsigned long long k3 = k1, k4 = k2;\n    k1 = k4, k3 ^= (k3 << 23), k2 = k3 ^ k4 ^ (k3 >> 17) ^ (k4 >> 26);\n    return k2 + k4;\n}\n\ninline void generate() {\n    for (int i = 1; i <= n; ++i) {\n        a[i] = xorShift128Plus() % thres;\n    }\n}\n\n} // namespace Generator.\n\nint main() {\n    scanf(\"%d\", &n);\n    scanf(\"%llu %llu %d\", &Generator::k1, &Generator::k2, &Generator::thres);\n    Generator::generate();\n    // Now array a[1..n] represents the sequence A in the statement.\n    return 0;\n}\n```\n\n输入文件仅有一行，包含四个整数 $n,k_1,k_2,\\textit{thres}$。\n\n程序读入序列长度 $n$，种子 $k_1,k_2$ 和序列值上限 $\\textit{thres}$，用 `xorShift128Plus` 连续生成 $n$ 个随机数，将它们对 $\\textit{thres}$ 取模的值依次赋给 $a_1,a_2,\\cdots,a_n$，得到序列 $A$。请使用其他语言的选手自行查阅相关信息实现生成器。\n", "outputFormat": "为节省程序输出耗时，你的程序应当输出一行一个整数，表示 $\\left(\\sum_{i=1}^ni\\times A_i'\\right)\\bmod2^{64}$ 的值。\n", "hint": "#### 样例 #1 解释\n\n生成的序列为 $A=\\lang 1,1,3,0,0,1,3\\rang$，选取 $k=1,P=\\lang 1,5\\rang$, 得到答案序列为 $A'=\\lang 0,1,3,0,1,1,3\\rang$，按照要求计算知答案为 $43$。\n\n#### 样例 #2 解释\n\n生成的序列为 $A=\\lang 2,8,0,6,2,2,1,7,8,3\\rang$，选取 $k=3,P=\\lang 1,3,4,7,8,10\\rang$, 得到答案序列为 $A'=\\lang 0,8,2,1,2,2,6,3,8,7\\rang$，按照要求计算知答案为 $256$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的测试数据，$1\\le n\\le10^7$，$2\\le \\textit{thres}\\le10^9$，$0\\le k_1,k_2<2^{64}$。\n\n对于不同的子任务，作如下约定：\n\n | 子任务编号 |    $n$    |     $\\textit{thres}$     | 特殊性质 | 分值 |\n| :--------: | :-------: | :---------: | :------: | :--: |\n|    $1$     | $\\le10^5$ |  $\\le10^9$   |  **有**  | $10$ |\n|    $2$     |   $\\le20$    | $\\le10$ |    无    | $15$ |\n|    $3$     | $\\le10^7$ | $=2$  |    无    | $20$ |\n|    $4$     | $\\le10^7$ | $\\le10^7$ |    无    | $25$ |\n|    $5$     | $\\le10^7$ | $\\le10^9$ |    无    | $30$ |\n\n- **特殊性质**：保证程序正确生成的序列 $A$ 中不存在相等元素。\n\n- **注意**：本题时限为 $0.5\\text s$。\n\n- ~~热知识：《世末歌者》演唱于夏日，显然不在雨水节气。~~\n", "locale": "zh-CN"}}}
{"pid": "P8476", "type": "P", "difficulty": 6, "samples": [["3 3\n4 5 2", "1"], ["10 5\n12 17 20 2 0 1 13 6 10 1", "26"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "二分", "洛谷原创", "O2优化", "动态规划优化", "洛谷月赛"], "title": "「GLR-R3」惊蛰", "background": "&emsp;&emsp;「微雨众卉新，一雷惊蛰始」\n\n---\n\n&emsp;&emsp;中午，休息室，阿绫肩膀上。\n\n&emsp;&emsp;“我有一个愿望，参加全国音乐祭，获奖，和阿绫一起，摆脱这训练的苦海。”\n\n&emsp;&emsp;“为热爱而到来，为抽身而努力……吗”。\n\n&emsp;&emsp;正午的阳光渗过窗帘，抚上困倦的人儿的脸颊。天依的左手悄悄搭上阿绫怀里的吉他，\n\n&emsp;&emsp;“铮——”\n\n&emsp;&emsp;蛰虫被雷声唤醒，没人向他们保证雨的降临。\n\n---\n\n&emsp;&emsp;**惊蛰**&emsp;「我愿把岁月磨成望镜寻遍这星空　将微光聚焦手心紧紧握住不放松」", "description": "比赛临近，各式测试也丰富了起来，作为天依他们的专业分析师，你的工作是统计分析队员们表现情况——总之，某领导要来慰问，所以你被要求修改出一份令人赏心悦目的分析报告。\n\n在已有的 $n$ 次测试中，对于某位特定的选手，他在第 $i$ 次测试的**波动值**是非负整数 $a_i$。波动值越小表示选手在测试中的心态和发挥越稳定，所以你需要“略微调整”波动值序列 $\\{a_n\\}$，得到另一个非负整数序列 $\\{b_n\\}$。不过，做人不能昧良心，但报告又必须好看，所以 $\\{b_n\\}$ 有如下要求：\n\n- $\\{b_n\\}$ **单调不递增**，选手越来越厉害嘛；\n\n- 对于每个 $i$，如果 $b_i<a_i$，老师会不高兴，所以你需要花费 $C$ 单位的精力说服老师（其中 $C$ 为给定常数）；\n- 对于每个 $i$，如果 $a_i\\le b_i$，选手会不高兴，而且可能很不高兴，所以你需要花费 $b_i-a_i$ 单位的精力安慰选手。\n\n你希望在满足条件的情况下，**最小化**花费的精力之和。作为成熟的信竞选手，你自然需要自己动手，求出这一最小化的结果。\n\n#### 形式化题意\n\n给定非负整数序列 $\\{a_n\\}$，定义函数 $f(x,y)$ 为\n\n$$\nf(x,y)=\\begin{cases}\nx-y,&x\\ge y\\\\\nC,&x< y\n\\end{cases},\n$$\n\n其中 $C$ 是给定常数。请构造一个**不增**非负整数序列 $\\{b_n\\}$，最小化\n\n$$\n\\sum_{i=1}^nf(b_i,a_i).\n$$\n\n你仅需输出这一最小化的结果。\n", "inputFormat": "第一行两个整数，表示序列长度 $n$ 和给定常数 $C$。\n\n接下来一行表示序列 $\\{a_n\\}$ 。", "outputFormat": "输出一行一个整数，表示最小化的结果。", "hint": "#### 样例 #1 解释\n\n构造 $\\{b_n\\}=\\{5,5,2\\}$，可见：\n\n$$\n\\begin{aligned}\n\\sum_{i=1}^nf(b_i,a_i) &=  f(5,4)+f(5,5)+f(2,2)\\\\\n&= 1+0+0\\\\\n&= 1.\n\\end{aligned}\n$$\n\n#### 样例 #2 解释\n\n构造 $\\{b_n\\}=\\{12,11,4,2,1,1,1,1,1,1\\}$，可以得到答案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n设 $V$ 为序列 $\\{a_n\\}$ 中元素以及常数 $C$ 的值域。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，$V\\subseteq[0,10^9]$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$   |       $V$       | 特殊性质 | 子任务分值 |\n| :--------: | :-------: | :-------------: | :------: | :--------: |\n|    $1$     | $\\le10^3$ | $\\subseteq[0,10^9]$ |    无    |    $25$    |\n|    $2$     | $\\le10^5$ | $\\subseteq[0,10^2]$ |  无   |    $15$    |\n|    $3$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **A**   |    $5$    |\n|    $4$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **B**   |    $15$    |\n|    $5$     | $\\le10^5$ | $\\subseteq[0,10^9]$ |  无   |    $20$    |\n|    $6$     | $\\le10^6$ |   $\\subseteq[0,10^9]$   |    无    |    $20$    |\n\n- **特殊性质 A**：对于常数 $C$ ，满足 $C = 0$。\n- **特殊性质 B**：对于序列 $\\{a_n\\}$ ，满足元素单调**递增**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」惊蛰", "background": "&emsp;&emsp;「微雨众卉新，一雷惊蛰始」\n\n---\n\n&emsp;&emsp;中午，休息室，阿绫肩膀上。\n\n&emsp;&emsp;“我有一个愿望，参加全国音乐祭，获奖，和阿绫一起，摆脱这训练的苦海。”\n\n&emsp;&emsp;“为热爱而到来，为抽身而努力……吗”。\n\n&emsp;&emsp;正午的阳光渗过窗帘，抚上困倦的人儿的脸颊。天依的左手悄悄搭上阿绫怀里的吉他，\n\n&emsp;&emsp;“铮——”\n\n&emsp;&emsp;蛰虫被雷声唤醒，没人向他们保证雨的降临。\n\n---\n\n&emsp;&emsp;**惊蛰**&emsp;「我愿把岁月磨成望镜寻遍这星空　将微光聚焦手心紧紧握住不放松」", "description": "比赛临近，各式测试也丰富了起来，作为天依他们的专业分析师，你的工作是统计分析队员们表现情况——总之，某领导要来慰问，所以你被要求修改出一份令人赏心悦目的分析报告。\n\n在已有的 $n$ 次测试中，对于某位特定的选手，他在第 $i$ 次测试的**波动值**是非负整数 $a_i$。波动值越小表示选手在测试中的心态和发挥越稳定，所以你需要“略微调整”波动值序列 $\\{a_n\\}$，得到另一个非负整数序列 $\\{b_n\\}$。不过，做人不能昧良心，但报告又必须好看，所以 $\\{b_n\\}$ 有如下要求：\n\n- $\\{b_n\\}$ **单调不递增**，选手越来越厉害嘛；\n\n- 对于每个 $i$，如果 $b_i<a_i$，老师会不高兴，所以你需要花费 $C$ 单位的精力说服老师（其中 $C$ 为给定常数）；\n- 对于每个 $i$，如果 $a_i\\le b_i$，选手会不高兴，而且可能很不高兴，所以你需要花费 $b_i-a_i$ 单位的精力安慰选手。\n\n你希望在满足条件的情况下，**最小化**花费的精力之和。作为成熟的信竞选手，你自然需要自己动手，求出这一最小化的结果。\n\n#### 形式化题意\n\n给定非负整数序列 $\\{a_n\\}$，定义函数 $f(x,y)$ 为\n\n$$\nf(x,y)=\\begin{cases}\nx-y,&x\\ge y\\\\\nC,&x< y\n\\end{cases},\n$$\n\n其中 $C$ 是给定常数。请构造一个**不增**非负整数序列 $\\{b_n\\}$，最小化\n\n$$\n\\sum_{i=1}^nf(b_i,a_i).\n$$\n\n你仅需输出这一最小化的结果。\n", "inputFormat": "第一行两个整数，表示序列长度 $n$ 和给定常数 $C$。\n\n接下来一行表示序列 $\\{a_n\\}$ 。", "outputFormat": "输出一行一个整数，表示最小化的结果。", "hint": "#### 样例 #1 解释\n\n构造 $\\{b_n\\}=\\{5,5,2\\}$，可见：\n\n$$\n\\begin{aligned}\n\\sum_{i=1}^nf(b_i,a_i) &=  f(5,4)+f(5,5)+f(2,2)\\\\\n&= 1+0+0\\\\\n&= 1.\n\\end{aligned}\n$$\n\n#### 样例 #2 解释\n\n构造 $\\{b_n\\}=\\{12,11,4,2,1,1,1,1,1,1\\}$，可以得到答案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n设 $V$ 为序列 $\\{a_n\\}$ 中元素以及常数 $C$ 的值域。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，$V\\subseteq[0,10^9]$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$   |       $V$       | 特殊性质 | 子任务分值 |\n| :--------: | :-------: | :-------------: | :------: | :--------: |\n|    $1$     | $\\le10^3$ | $\\subseteq[0,10^9]$ |    无    |    $25$    |\n|    $2$     | $\\le10^5$ | $\\subseteq[0,10^2]$ |  无   |    $15$    |\n|    $3$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **A**   |    $5$    |\n|    $4$     | $\\le10^6$ | $\\subseteq[0,10^9]$ |  **B**   |    $15$    |\n|    $5$     | $\\le10^5$ | $\\subseteq[0,10^9]$ |  无   |    $20$    |\n|    $6$     | $\\le10^6$ |   $\\subseteq[0,10^9]$   |    无    |    $20$    |\n\n- **特殊性质 A**：对于常数 $C$ ，满足 $C = 0$。\n- **特殊性质 B**：对于序列 $\\{a_n\\}$ ，满足元素单调**递增**。", "locale": "zh-CN"}}}
{"pid": "P8477", "type": "P", "difficulty": 7, "samples": [["2", "2\n2 1 1 2 1\n1 1 1 2\n1 2 2 1\n2 2 2 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "Special Judge", "洛谷月赛"], "title": "「GLR-R3」春分", "background": "&emsp;&emsp;「解冻群芳盛，馀寒百卉稀」\n\n---\n\n&emsp;&emsp;吉他　贝斯　键盘　架子鼓\n\n&emsp;&emsp;她们的声嗓　七八点的太阳光\n\n&emsp;&emsp;炖作一隅　所谓青春的模样\n\n&emsp;&emsp;可惜他们　还得把那胜负扛在\n\n&emsp;&emsp;佯作成熟的肩上\n\n---\n\n&emsp;&emsp;**春分**&emsp;「你我间有无形磁场　追赶着终有天碰撞　迸发火光吧」\n", "description": "休息室外的走廊上有一块电视屏幕，除了高考倒计时外，还偶尔整些无聊的活。练习的间隙，枕在某位阿绫腿上的天依竖起耳朵听着，但闻——\n\n今有一外国小哥，整了个笨重、花哨、无用的原电池装置，天依的脑补图如下：\n\n![figure1.png](https://cdn.luogu.com.cn/upload/image_hosting/ibdp8eyw.png)\n\n我们只关心中间的红色部分，它们是若干分隔板，用于分隔左右两侧的溶液。这些分隔板**可拆下，可任意顺序同时组装入任意块，可翻转左右方向**。\n\n现在小哥有两组溶液，第一组为 $X=\\{x_1,x_2,\\cdots,x_n\\}$，第二组为 $Y=\\{y_1,y_2,\\cdots,y_n\\}$，这 $2n$ 种溶液**两两不同**。小哥想将每种 $X$ 组内溶液置于容器左侧，每种 $Y$ 组内溶液置于容器右侧，一共进行 $n^2$ 次原电池实验。每次实验结束后，严谨的小哥会清洗装置，但是他不想清洗分隔板。\n\n实验过程中，若分隔板的某侧**直接接触**了实验溶液，则此种溶液会沾在分隔板对应侧。为了防止溶液的污染，任意分隔板沾上任何一种溶液的**一侧**都不能和**非同种**的实验用溶液接触。例如下图（红色竖线表示分隔板，蓝色标号表示两侧已沾上的溶液，黑色标号表示实验中的溶液，下同）：\n\n![explanation1.png](https://cdn.luogu.com.cn/upload/image_hosting/ezwggdwh.png)\n\n此外，若一次使用了多个分隔板，由于分隔板贴合紧密，所以若某块分隔板的一侧与另一分隔板沾有某种溶液的一侧相接触，这种溶液就会残留在两块分隔板各自的接触侧。例如下图（绿色标号表示本次实验后两块分隔板**新**沾上的溶液）：\n\n![explanation2.png](https://cdn.luogu.com.cn/upload/image_hosting/gjbad0ox.png)\n\n小哥称他希望用较少（**不必最少**）数量的分隔板完成所有实验，并邀请观众给出使用分隔板的数量 $m$ 和此时**依次进行**的 $n^2$ 次实验中，所用的左右两侧溶液种类以及使用分隔板的方案。\n\n天依预料到评论区的答案一定质量堪忧，所以邀请你来构造一个优秀的方案。\n", "inputFormat": "一行一个整数 $n$，表示集合 $X,Y$ 的大小。", "outputFormat": "输出 $n^2+1$ 行，描述你的构造。\n\n第一行一个整数 $m$，表示需要的集合分隔板的数量。**你应当保证 $1\\le m\\le 712$。** 为方便后文描述，将分隔板记为 $C_1,C_2,\\cdots,C_m$。\n\n接下来 $n^2$ 行，第 $i$ 行按次序进行的第 $i$ 次实验：\n\n1. 首先输出一个整数 $k\\in[1,m]$，表示本次实验安装的分隔板数量。\n\n2. 接着输出整数 $u\\in[1,n]$，表示左侧所用溶液为 $x_u$。\n\n3. 然后依次输出 $k$ 个整数 $p_1,p_2,\\cdots,p_k$。对于其中第 $t$ 个整数 $p_t\\in[-m,0)\\cup(0,m]$ 描述了从左到右第 $t$ 块分隔板：\n\n\t- 若 $p_t>0$，则其为 $C_{p_t}$；\n\n\t- 否则 $p_t<0$，则表示翻转 $C_{-p_t}$ 的左右面，然后将其安装。注意本次实验完成后，$C_{-p_t}$ 的默认左右面仍然是翻转前的左右面。（即翻转的效果**不会保持**。）\n\n4. 最后输出整数 $v\\in[1,n]$，表示右侧所用溶液为 $y_v$。\n\n一行内的多个整数间应用单个半角空格隔开，不允许行末出现多余的空格。不符合格式的答案可能被判为 Wrong Answer。\n", "hint": "#### 样例 #1 解释\n\n![figure2.png](https://cdn.luogu.com.cn/upload/image_hosting/je86hjkk.png)\n\n可以证明，这是 $n=2$ 时 $m$ 最小的一种方案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le609$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$    | 子任务分值 |\n| :--------: | :------: | :--------: |\n|    $1$     | $\\le26$  |    $10$    |\n|    $2$     | $\\le356$ |    $10$    |\n|    $3$     | $\\le475$ |    $20$    |\n|    $4$     | $\\le534$ |    $20$    |\n|    $5$     | $\\le567$ |    $20$    |\n|    $6$     | $\\le592$ |    $10$    |\n|    $7$     | $\\le609$ |    $10$    |\n\n- **提示 1**：再次强调，你构造的方案**应当保证 $1\\le m\\le712$**。\n\n- **提示 2**：对于任意子任务，保证**针对该子任务的标算**的输出量不超过 $5\\times10^6$ 个整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」春分", "background": "&emsp;&emsp;「解冻群芳盛，馀寒百卉稀」\n\n---\n\n&emsp;&emsp;吉他　贝斯　键盘　架子鼓\n\n&emsp;&emsp;她们的声嗓　七八点的太阳光\n\n&emsp;&emsp;炖作一隅　所谓青春的模样\n\n&emsp;&emsp;可惜他们　还得把那胜负扛在\n\n&emsp;&emsp;佯作成熟的肩上\n\n---\n\n&emsp;&emsp;**春分**&emsp;「你我间有无形磁场　追赶着终有天碰撞　迸发火光吧」\n", "description": "休息室外的走廊上有一块电视屏幕，除了高考倒计时外，还偶尔整些无聊的活。练习的间隙，枕在某位阿绫腿上的天依竖起耳朵听着，但闻——\n\n今有一外国小哥，整了个笨重、花哨、无用的原电池装置，天依的脑补图如下：\n\n![figure1.png](https://cdn.luogu.com.cn/upload/image_hosting/ibdp8eyw.png)\n\n我们只关心中间的红色部分，它们是若干分隔板，用于分隔左右两侧的溶液。这些分隔板**可拆下，可任意顺序同时组装入任意块，可翻转左右方向**。\n\n现在小哥有两组溶液，第一组为 $X=\\{x_1,x_2,\\cdots,x_n\\}$，第二组为 $Y=\\{y_1,y_2,\\cdots,y_n\\}$，这 $2n$ 种溶液**两两不同**。小哥想将每种 $X$ 组内溶液置于容器左侧，每种 $Y$ 组内溶液置于容器右侧，一共进行 $n^2$ 次原电池实验。每次实验结束后，严谨的小哥会清洗装置，但是他不想清洗分隔板。\n\n实验过程中，若分隔板的某侧**直接接触**了实验溶液，则此种溶液会沾在分隔板对应侧。为了防止溶液的污染，任意分隔板沾上任何一种溶液的**一侧**都不能和**非同种**的实验用溶液接触。例如下图（红色竖线表示分隔板，蓝色标号表示两侧已沾上的溶液，黑色标号表示实验中的溶液，下同）：\n\n![explanation1.png](https://cdn.luogu.com.cn/upload/image_hosting/ezwggdwh.png)\n\n此外，若一次使用了多个分隔板，由于分隔板贴合紧密，所以若某块分隔板的一侧与另一分隔板沾有某种溶液的一侧相接触，这种溶液就会残留在两块分隔板各自的接触侧。例如下图（绿色标号表示本次实验后两块分隔板**新**沾上的溶液）：\n\n![explanation2.png](https://cdn.luogu.com.cn/upload/image_hosting/gjbad0ox.png)\n\n小哥称他希望用较少（**不必最少**）数量的分隔板完成所有实验，并邀请观众给出使用分隔板的数量 $m$ 和此时**依次进行**的 $n^2$ 次实验中，所用的左右两侧溶液种类以及使用分隔板的方案。\n\n天依预料到评论区的答案一定质量堪忧，所以邀请你来构造一个优秀的方案。\n", "inputFormat": "一行一个整数 $n$，表示集合 $X,Y$ 的大小。", "outputFormat": "输出 $n^2+1$ 行，描述你的构造。\n\n第一行一个整数 $m$，表示需要的集合分隔板的数量。**你应当保证 $1\\le m\\le 712$。** 为方便后文描述，将分隔板记为 $C_1,C_2,\\cdots,C_m$。\n\n接下来 $n^2$ 行，第 $i$ 行按次序进行的第 $i$ 次实验：\n\n1. 首先输出一个整数 $k\\in[1,m]$，表示本次实验安装的分隔板数量。\n\n2. 接着输出整数 $u\\in[1,n]$，表示左侧所用溶液为 $x_u$。\n\n3. 然后依次输出 $k$ 个整数 $p_1,p_2,\\cdots,p_k$。对于其中第 $t$ 个整数 $p_t\\in[-m,0)\\cup(0,m]$ 描述了从左到右第 $t$ 块分隔板：\n\n\t- 若 $p_t>0$，则其为 $C_{p_t}$；\n\n\t- 否则 $p_t<0$，则表示翻转 $C_{-p_t}$ 的左右面，然后将其安装。注意本次实验完成后，$C_{-p_t}$ 的默认左右面仍然是翻转前的左右面。（即翻转的效果**不会保持**。）\n\n4. 最后输出整数 $v\\in[1,n]$，表示右侧所用溶液为 $y_v$。\n\n一行内的多个整数间应用单个半角空格隔开，不允许行末出现多余的空格。不符合格式的答案可能被判为 Wrong Answer。\n", "hint": "#### 样例 #1 解释\n\n![figure2.png](https://cdn.luogu.com.cn/upload/image_hosting/je86hjkk.png)\n\n可以证明，这是 $n=2$ 时 $m$ 最小的一种方案。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le609$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$    | 子任务分值 |\n| :--------: | :------: | :--------: |\n|    $1$     | $\\le26$  |    $10$    |\n|    $2$     | $\\le356$ |    $10$    |\n|    $3$     | $\\le475$ |    $20$    |\n|    $4$     | $\\le534$ |    $20$    |\n|    $5$     | $\\le567$ |    $20$    |\n|    $6$     | $\\le592$ |    $10$    |\n|    $7$     | $\\le609$ |    $10$    |\n\n- **提示 1**：再次强调，你构造的方案**应当保证 $1\\le m\\le712$**。\n\n- **提示 2**：对于任意子任务，保证**针对该子任务的标算**的输出量不超过 $5\\times10^6$ 个整数。\n", "locale": "zh-CN"}}}
{"pid": "P8478", "type": "P", "difficulty": 7, "samples": [["3 0\n2 2 2", "8"], ["3 1\n2 2 2", "30"], ["5 3\n2 3 4 4 3", "275200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R3」清明", "background": "&emsp;&emsp;「&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;，&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;」\n\n---\n\n&emsp;&emsp;“你非说这不是我的实力，那凭什么一个偶然错音就不能毁了我的命运？！”\n\n&emsp;&emsp;天依没有注意到，心中所哭嚎向的那个人，同她一样撑着伞，身后十来步而已。\n\n---\n\n&emsp;&emsp;**清明**　「你在名为弱小的深渊　究竟看见过什么」", "description": "雨打在窗沿，下坠，一级一级。\n\n这里一共有 $n$ 级窗沿，从高到低编号，最高层编号为 $1$，最底层编号为 $n$。假设在某一瞬间，第 $i$ 级窗沿上有 $a_i$ 单位体积的雨水。由于奇妙的物理原因，第 $i$ 级的雨水将在「下一个瞬间」滴向第 $i+1,i+2,\\dots,\\min\\{i+k,n\\}$ 级，也可能留在第 $i$ 级，但是每一种去向的雨水的单位体积都应是非负整数，且总和为 $a_i$。\n\n设在「下一个瞬间」，第 $i$ 级窗沿上有 $a_i'$ 单位的雨水，那么称此时雨水的**奇妙度**为 $\\prod_{i=1}^n a_i'$。现在，悲伤的人儿想知道，对于所有**本质不同的**「下一个瞬间」，雨水的奇妙度之和对素数 $P=998244353$ 取模的结果。\n\n两个「下一个瞬间」本质不同，当且仅当存在编号 $i<j$ 的两级窗沿，从窗沿 $i$ 滴向窗沿 $j$ 的雨水的单位体积不同。", "inputFormat": "第一行输入两个正整数 $n,k$，分别表示窗沿的数量、限制雨点滴落距离的常数。\n\n第二行输入 $n$ 个非负整数 $a_1,a_2,a_3,\\cdots,a_n$，其中 $a_i$ 表示第 $i$ 级窗沿在这一瞬间的雨水体积。", "outputFormat": "输出一行一个整数，表示所有本质不同的「下一个瞬间」，雨水的奇妙度之和对 $P$ 取模后的结果。", "hint": "#### 样例 #1 解释\n\n容易发现总共只有一种本质不同的「下一个瞬间」，也就是每级窗沿都没有雨水向其他窗沿滴落。\n\n所以最终 $a'=\\{2,2,2\\}$，权值为 $8$。\n\n#### 样例 #2 解释\n\n设 $c_k$ 表示从第 $k$ 级窗沿滴向第 $k+1$ 级窗沿的雨点体积，显然有 $c_3=0$。\n\n枚举所有合法的滴落情况：\n\n- $c=\\{0,0,0\\},b=\\{2,2,2\\}$，权值为 $8$；\n- $c=\\{0,1,0\\},b=\\{2,1,3\\}$，权值为 $6$；\n- $c=\\{0,2,0\\},b=\\{2,0,4\\}$，权值为 $0$；\n- $c=\\{1,0,0\\},b=\\{1,3,2\\}$，权值为 $6$；\n- $c=\\{1,1,0\\},b=\\{1,2,3\\}$，权值为 $6$；\n- $c=\\{1,2,0\\},b=\\{1,1,4\\}$，权值为 $4$；\n- $c_1=2$，此时必然有 $b_1=0$，此情况下的三种方案权值均为 $0$；\n\n所以所有本质不同的「下一个瞬间」的权值和为 $8+6+0+6+6+4+0+0+0=30$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的数据，$0\\le k<n\\le 32$，$0\\le a_i<P$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$   |   $k$   | $\\max a_i$ | 子任务分值 |\n| :--------: | :-----: | :-----: | :--------: | :--: |\n|    $1$     | $\\le32$ |  $<n$   |    $=0$    | $2$  |\n|    $2$     | $\\le32$ |  $=0$   |    $<P$    | $2$  |\n|    $3$     | $\\le32$ |  $<n$   |    $=1$    | $3$  |\n|    $4$     | $\\le5$  |  $<n$   |   $\\le4$   | $20$ |\n|    $5$     | $\\le32$ |  $=1$   |    $<P$    | $13$ |\n|    $6$     | $\\le32$ | $=n-1$  |    $<P$    | $10$ |\n|    $7$     | $\\le32$ | $\\le16$ |    $<P$    | $20$ |\n|    $8$     | $\\le25$ |  $<n$   |    $<P$    | $10$ |\n|    $9$     | $\\le32$ |  $<n$   |    $<P$    | $20$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」清明", "background": "&emsp;&emsp;「&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;，&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;」\n\n---\n\n&emsp;&emsp;“你非说这不是我的实力，那凭什么一个偶然错音就不能毁了我的命运？！”\n\n&emsp;&emsp;天依没有注意到，心中所哭嚎向的那个人，同她一样撑着伞，身后十来步而已。\n\n---\n\n&emsp;&emsp;**清明**　「你在名为弱小的深渊　究竟看见过什么」", "description": "雨打在窗沿，下坠，一级一级。\n\n这里一共有 $n$ 级窗沿，从高到低编号，最高层编号为 $1$，最底层编号为 $n$。假设在某一瞬间，第 $i$ 级窗沿上有 $a_i$ 单位体积的雨水。由于奇妙的物理原因，第 $i$ 级的雨水将在「下一个瞬间」滴向第 $i+1,i+2,\\dots,\\min\\{i+k,n\\}$ 级，也可能留在第 $i$ 级，但是每一种去向的雨水的单位体积都应是非负整数，且总和为 $a_i$。\n\n设在「下一个瞬间」，第 $i$ 级窗沿上有 $a_i'$ 单位的雨水，那么称此时雨水的**奇妙度**为 $\\prod_{i=1}^n a_i'$。现在，悲伤的人儿想知道，对于所有**本质不同的**「下一个瞬间」，雨水的奇妙度之和对素数 $P=998244353$ 取模的结果。\n\n两个「下一个瞬间」本质不同，当且仅当存在编号 $i<j$ 的两级窗沿，从窗沿 $i$ 滴向窗沿 $j$ 的雨水的单位体积不同。", "inputFormat": "第一行输入两个正整数 $n,k$，分别表示窗沿的数量、限制雨点滴落距离的常数。\n\n第二行输入 $n$ 个非负整数 $a_1,a_2,a_3,\\cdots,a_n$，其中 $a_i$ 表示第 $i$ 级窗沿在这一瞬间的雨水体积。", "outputFormat": "输出一行一个整数，表示所有本质不同的「下一个瞬间」，雨水的奇妙度之和对 $P$ 取模后的结果。", "hint": "#### 样例 #1 解释\n\n容易发现总共只有一种本质不同的「下一个瞬间」，也就是每级窗沿都没有雨水向其他窗沿滴落。\n\n所以最终 $a'=\\{2,2,2\\}$，权值为 $8$。\n\n#### 样例 #2 解释\n\n设 $c_k$ 表示从第 $k$ 级窗沿滴向第 $k+1$ 级窗沿的雨点体积，显然有 $c_3=0$。\n\n枚举所有合法的滴落情况：\n\n- $c=\\{0,0,0\\},b=\\{2,2,2\\}$，权值为 $8$；\n- $c=\\{0,1,0\\},b=\\{2,1,3\\}$，权值为 $6$；\n- $c=\\{0,2,0\\},b=\\{2,0,4\\}$，权值为 $0$；\n- $c=\\{1,0,0\\},b=\\{1,3,2\\}$，权值为 $6$；\n- $c=\\{1,1,0\\},b=\\{1,2,3\\}$，权值为 $6$；\n- $c=\\{1,2,0\\},b=\\{1,1,4\\}$，权值为 $4$；\n- $c_1=2$，此时必然有 $b_1=0$，此情况下的三种方案权值均为 $0$；\n\n所以所有本质不同的「下一个瞬间」的权值和为 $8+6+0+6+6+4+0+0+0=30$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n对于 $100\\%$ 的数据，$0\\le k<n\\le 32$，$0\\le a_i<P$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n$   |   $k$   | $\\max a_i$ | 子任务分值 |\n| :--------: | :-----: | :-----: | :--------: | :--: |\n|    $1$     | $\\le32$ |  $<n$   |    $=0$    | $2$  |\n|    $2$     | $\\le32$ |  $=0$   |    $<P$    | $2$  |\n|    $3$     | $\\le32$ |  $<n$   |    $=1$    | $3$  |\n|    $4$     | $\\le5$  |  $<n$   |   $\\le4$   | $20$ |\n|    $5$     | $\\le32$ |  $=1$   |    $<P$    | $13$ |\n|    $6$     | $\\le32$ | $=n-1$  |    $<P$    | $10$ |\n|    $7$     | $\\le32$ | $\\le16$ |    $<P$    | $20$ |\n|    $8$     | $\\le25$ |  $<n$   |    $<P$    | $10$ |\n|    $9$     | $\\le32$ |  $<n$   |    $<P$    | $20$ |\n", "locale": "zh-CN"}}}
{"pid": "P8479", "type": "P", "difficulty": 7, "samples": [["0\n5\n1 2 3 4 5\n1 2 2 1\n5\n1 1 2\n0 2 3 -2\n1 3 4\n0 4 4 1\n1 3 4\n", "15\n0\n1"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R3」谷雨", "background": "&emsp;&emsp;「几枝新叶萧萧竹，数笔横皴淡淡山」\n\n---\n\n&emsp;&emsp;十几天前的那条路，还好，两个人一起。\n\n&emsp;&emsp;“很幸运呢”，阿绫悄悄嘬一口才破涕为笑的天依，“上天保佑我们要在一……”\n\n&emsp;&emsp;鼓着腮掐着软软的腰，天依却又不觉流露笑意，是很幸运呢，刚好入围……\n\n&emsp;&emsp;鳞次栉比的尽头，天空似云下起伏的山，皴擦着淡青墨样的欣喜。\n\n&emsp;&emsp;她们的故事还在继续，正如谷物正当在今日生长。\n\n---\n\n&emsp;&emsp;**谷雨**&emsp;「我翻过一座高山　前方依然　山路漫漫」", "description": "老 V 为发挥不错的大家办了场小 party，为了活跃气氛，同时贯彻安全环保的理念，~~（主要还是因为编不出来了，）~~ 老 V 带来了一个高大上的“电子烟花”，美其名曰，火**树**银花。\n\n物如其名，这是一棵含有 $n$ 个结点的树，结点 $u$ 上有点权 $l_u$，表示该结点上所设烟花样式的**绚丽度**。好奇的大家一共对它进行了 $q$ 次操作，不妨记树上从 $u$ 到 $v$ 的路径上的结点（含 $u,v$）构成集合 $P(u,v)$，则每次操作形如：\n\n0. 给定结点编号 $u,v$ 和新的绚丽度 $k$，意为将所有 $\\in P(u,v)$，**或者**存在一个邻接点 $\\in P(u,v)$ 的结点 $w$ 的绚丽度 $l_w$ **赋值**为 $k$。\n\n1. 给定 $u,v$，点燃这一串烟花最“耀眼”的子段。具体地，维护一个**序列** $S$，从 $u$ 出发沿着树边走向 $v$，当走到结点 $w$（$w$ 可能为 $u$ 或 $v$） 时：\n\n    - 将 $l_w$ 加入序列 $S$ 的末尾；\n    - **按标号从小到大**枚举 $w$ 的邻接点 $x$，若 $x\\notin P(u,v)$，将 $l_x$ 加入 $S$ 的末尾；\n    - 最后，走向下一个结点。\n\n得到最终的 $S$ 后，系统将自动点燃 $S$ 中绚丽度之和最大的子段，子段可能为空。而你需要求出这一和的最大值，即对于每次 1. 操作，求出 $S$ 的**最大可空子段和**。", "inputFormat": "第一行一个整数 $T$，表示该测试数据所属的子任务编号。\n\n第二行一个整数 $n$，表示树的结点个数。\n\n第三行 $n$ 个整数，第 $i$ 个整数 $l_i$ 表示结点 $i$ 的初始权值。\n\n第四行 $n-1$ 个整数，**为方便选手处理数据，此处假设 $1$ 号结点为树的根。** 第 $i$ 个整数 $p_i$ 表示结点 $i+1$ 的父亲，即表述一条边 $(p_i,i+1)$。**保证 $p_i<i+1$**。\n\n第五行一个整数 $q$，表示需要处理的操作数量。\n\n接下来 $q$ 行，每行格式为 $0~u~v~k$ 或者 $1~u~v$，分别对应了「题目描述」中的两种操作。", "outputFormat": "输出有若干行，第 $i$ 行应包含一个整数 $a_i$，表示第 $i$ 次 1. 操作的答案。", "hint": "#### 样例 #1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2szx2kdy.png)\n\n本组样例不属于测试数据，故第一行 $T$ 以 $0$ 代替。\n\n第 $1$ 次操作为询问，依次遍历到的结点为 $\\lang 1,5,2,3,4\\rang$，对应权值队列 $S=\\lang 1,5,2,3,4\\rang$，最大子段和为 $15$。\n\n第 $2$ 次操作为修改，将结点 $2,1,4,3$ 的点权修改为 $-2$。\n\n第 $3$ 次操作为询问，依次遍历到的结点为 $\\lang 3,2,1,4\\rang$，对应权值队列 $S=\\lang -2,-2,-2,-2\\rang$，注意子段可以为空，所以最大子段和为 $0$。\n\n第 $4$ 次操作为修改，将结点 $4,2$ 的点权修改为 $1$。\n\n第 $5$ 次操作为询问，依次遍历到的结点为 $\\lang 3,2,1,4\\rang$，对应权值队列 $S=\\lang -2,1,-2,1\\rang$，最大子段和为 $1$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n设 $V$ 为初始点权以及修改操作中点权的值域。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le10^5$，$1\\le p_i\\le i$，$V\\subseteq[-10^9,10^9]$，操作参数 $1\\le u,v\\le n$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n,q$   |       $V$       | 特殊性质 | 子任务分值 |\n| :--------: | :-------: | :-------------: | :------: | :--------: |\n|    $1$     | $\\le10^3$ | $\\subseteq[-10^9,10^9]$ |    无    |    $10$    |\n|    $2$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **A**   |    $10$    |\n|    $3$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **B**   |    $10$    |\n|    $4$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **C**   |    $15$    |\n|    $5$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **D**   |    $15$    |\n|    $6$     | $\\le10^5$ |   $\\subseteq[0,10^9]$   |    无    |    $10$    |\n|    $7$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **E**   |    $20$    |\n|    $8$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |    无    |    $10$    |\n\n- **特殊性质 A**：对于所有 $i\\in[1,n)$，满足 $p_i=i$。\n- **特殊性质 B**：对于所有操作中的参数 $u,v$，满足 $u=v$。\n- **特殊性质 C**：不存在修改操作。\n- **特殊性质 D**：有且仅有第 $q$ 次操作是询问操作。\n- **特殊性质 E**：对于所有**询问操作**中的参数 $u,v$，满足当结点 $1$ 为树根时，$u=v$ 或 $u$ 是 $v$ 的祖先。\n- **注意**：输入数据中的 $T$ 仅指该数据点所属子任务编号，该数据点可能满足其他子任务的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R3」谷雨", "background": "&emsp;&emsp;「几枝新叶萧萧竹，数笔横皴淡淡山」\n\n---\n\n&emsp;&emsp;十几天前的那条路，还好，两个人一起。\n\n&emsp;&emsp;“很幸运呢”，阿绫悄悄嘬一口才破涕为笑的天依，“上天保佑我们要在一……”\n\n&emsp;&emsp;鼓着腮掐着软软的腰，天依却又不觉流露笑意，是很幸运呢，刚好入围……\n\n&emsp;&emsp;鳞次栉比的尽头，天空似云下起伏的山，皴擦着淡青墨样的欣喜。\n\n&emsp;&emsp;她们的故事还在继续，正如谷物正当在今日生长。\n\n---\n\n&emsp;&emsp;**谷雨**&emsp;「我翻过一座高山　前方依然　山路漫漫」", "description": "老 V 为发挥不错的大家办了场小 party，为了活跃气氛，同时贯彻安全环保的理念，~~（主要还是因为编不出来了，）~~ 老 V 带来了一个高大上的“电子烟花”，美其名曰，火**树**银花。\n\n物如其名，这是一棵含有 $n$ 个结点的树，结点 $u$ 上有点权 $l_u$，表示该结点上所设烟花样式的**绚丽度**。好奇的大家一共对它进行了 $q$ 次操作，不妨记树上从 $u$ 到 $v$ 的路径上的结点（含 $u,v$）构成集合 $P(u,v)$，则每次操作形如：\n\n0. 给定结点编号 $u,v$ 和新的绚丽度 $k$，意为将所有 $\\in P(u,v)$，**或者**存在一个邻接点 $\\in P(u,v)$ 的结点 $w$ 的绚丽度 $l_w$ **赋值**为 $k$。\n\n1. 给定 $u,v$，点燃这一串烟花最“耀眼”的子段。具体地，维护一个**序列** $S$，从 $u$ 出发沿着树边走向 $v$，当走到结点 $w$（$w$ 可能为 $u$ 或 $v$） 时：\n\n    - 将 $l_w$ 加入序列 $S$ 的末尾；\n    - **按标号从小到大**枚举 $w$ 的邻接点 $x$，若 $x\\notin P(u,v)$，将 $l_x$ 加入 $S$ 的末尾；\n    - 最后，走向下一个结点。\n\n得到最终的 $S$ 后，系统将自动点燃 $S$ 中绚丽度之和最大的子段，子段可能为空。而你需要求出这一和的最大值，即对于每次 1. 操作，求出 $S$ 的**最大可空子段和**。", "inputFormat": "第一行一个整数 $T$，表示该测试数据所属的子任务编号。\n\n第二行一个整数 $n$，表示树的结点个数。\n\n第三行 $n$ 个整数，第 $i$ 个整数 $l_i$ 表示结点 $i$ 的初始权值。\n\n第四行 $n-1$ 个整数，**为方便选手处理数据，此处假设 $1$ 号结点为树的根。** 第 $i$ 个整数 $p_i$ 表示结点 $i+1$ 的父亲，即表述一条边 $(p_i,i+1)$。**保证 $p_i<i+1$**。\n\n第五行一个整数 $q$，表示需要处理的操作数量。\n\n接下来 $q$ 行，每行格式为 $0~u~v~k$ 或者 $1~u~v$，分别对应了「题目描述」中的两种操作。", "outputFormat": "输出有若干行，第 $i$ 行应包含一个整数 $a_i$，表示第 $i$ 次 1. 操作的答案。", "hint": "#### 样例 #1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2szx2kdy.png)\n\n本组样例不属于测试数据，故第一行 $T$ 以 $0$ 代替。\n\n第 $1$ 次操作为询问，依次遍历到的结点为 $\\lang 1,5,2,3,4\\rang$，对应权值队列 $S=\\lang 1,5,2,3,4\\rang$，最大子段和为 $15$。\n\n第 $2$ 次操作为修改，将结点 $2,1,4,3$ 的点权修改为 $-2$。\n\n第 $3$ 次操作为询问，依次遍历到的结点为 $\\lang 3,2,1,4\\rang$，对应权值队列 $S=\\lang -2,-2,-2,-2\\rang$，注意子段可以为空，所以最大子段和为 $0$。\n\n第 $4$ 次操作为修改，将结点 $4,2$ 的点权修改为 $1$。\n\n第 $5$ 次操作为询问，依次遍历到的结点为 $\\lang 3,2,1,4\\rang$，对应权值队列 $S=\\lang -2,1,-2,1\\rang$，最大子段和为 $1$。\n\n### 数据规模与约定\n\n**本题采用 Subtask 的计分方式。**\n\n设 $V$ 为初始点权以及修改操作中点权的值域。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le10^5$，$1\\le p_i\\le i$，$V\\subseteq[-10^9,10^9]$，操作参数 $1\\le u,v\\le n$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |   $n,q$   |       $V$       | 特殊性质 | 子任务分值 |\n| :--------: | :-------: | :-------------: | :------: | :--------: |\n|    $1$     | $\\le10^3$ | $\\subseteq[-10^9,10^9]$ |    无    |    $10$    |\n|    $2$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **A**   |    $10$    |\n|    $3$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **B**   |    $10$    |\n|    $4$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **C**   |    $15$    |\n|    $5$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **D**   |    $15$    |\n|    $6$     | $\\le10^5$ |   $\\subseteq[0,10^9]$   |    无    |    $10$    |\n|    $7$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |  **E**   |    $20$    |\n|    $8$     | $\\le10^5$ | $\\subseteq[-10^9,10^9]$ |    无    |    $10$    |\n\n- **特殊性质 A**：对于所有 $i\\in[1,n)$，满足 $p_i=i$。\n- **特殊性质 B**：对于所有操作中的参数 $u,v$，满足 $u=v$。\n- **特殊性质 C**：不存在修改操作。\n- **特殊性质 D**：有且仅有第 $q$ 次操作是询问操作。\n- **特殊性质 E**：对于所有**询问操作**中的参数 $u,v$，满足当结点 $1$ 为树根时，$u=v$ 或 $u$ 是 $v$ 的祖先。\n- **注意**：输入数据中的 $T$ 仅指该数据点所属子任务编号，该数据点可能满足其他子任务的约束条件。", "locale": "zh-CN"}}}
{"pid": "P8480", "type": "P", "difficulty": 1, "samples": [["3 2\n0 1 0 ", "6"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「HGOI-1」PMTD", "background": " $\\text{uuku}$ 在学习[四则运算](https://baike.baidu.com/item/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97/5337481?fr=aladdin)！", "description": "为了验证 $\\text{uuku}$ 学习成果，$\\text{bh1234666}$ 给出一个长为 $n$ 整数序列 $a_i$。并让 $\\text{uuku}$ 给这个序列进行 $m$ 次操作。\n\n每次操作可以任意选择序列中一个数 $a_i$，令 $a_i$ 变成 $a_i+2$，$a_i-2$，$a_i\\times 2$，$\\lfloor\\frac{a_i}{2}\\rfloor$ 这四个结果中的一个。\n\n$\\text{bh1234666}$ 希望 $m$ 次操作后，整个序列的极差（最大值减最小值）最大。\n\n显然 $\\text{uuku}$ 没有认真学习，所以他希望你来帮他回答这个问题。", "inputFormat": "第一行两个整数 $n$，$m$。\n\n第二行 $n$ 个整数，表示序列 $a_i$。", "outputFormat": "共一行一个整数，表示最大的极差。", "hint": "#### 样例解释\n\n第一步操作：将 $1$ 加上 $2$ 得到 $3$。\n\n第二步操作：将 $3$ 乘以 $2$ 得到 $6$。\n\n极差为 $6-0=6$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $2$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 40 & n \\le 5,m \\le 5 \\cr\\hline\n2 & 60 &  \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^6$，$1 \\le m \\le 10$，$0 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」PMTD", "background": " $\\text{uuku}$ 在学习[四则运算](https://baike.baidu.com/item/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97/5337481?fr=aladdin)！", "description": "为了验证 $\\text{uuku}$ 学习成果，$\\text{bh1234666}$ 给出一个长为 $n$ 整数序列 $a_i$。并让 $\\text{uuku}$ 给这个序列进行 $m$ 次操作。\n\n每次操作可以任意选择序列中一个数 $a_i$，令 $a_i$ 变成 $a_i+2$，$a_i-2$，$a_i\\times 2$，$\\lfloor\\frac{a_i}{2}\\rfloor$ 这四个结果中的一个。\n\n$\\text{bh1234666}$ 希望 $m$ 次操作后，整个序列的极差（最大值减最小值）最大。\n\n显然 $\\text{uuku}$ 没有认真学习，所以他希望你来帮他回答这个问题。", "inputFormat": "第一行两个整数 $n$，$m$。\n\n第二行 $n$ 个整数，表示序列 $a_i$。", "outputFormat": "共一行一个整数，表示最大的极差。", "hint": "#### 样例解释\n\n第一步操作：将 $1$ 加上 $2$ 得到 $3$。\n\n第二步操作：将 $3$ 乘以 $2$ 得到 $6$。\n\n极差为 $6-0=6$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $2$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 40 & n \\le 5,m \\le 5 \\cr\\hline\n2 & 60 &  \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^6$，$1 \\le m \\le 10$，$0 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8481", "type": "P", "difficulty": 2, "samples": [["10\n1 2 4 6 7 8 10 13 15 17\n3\n4\n10\n15", "3\n3\n3"], ["13\n1 2 4 6 10 12 19 23 45 99 101 123 134\n5\n1\n2\n10\n19\n123\n", "3\n4\n3\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["二分", "洛谷原创", "O2优化", "深度优先搜索 DFS", "洛谷月赛"], "title": "「HGOI-1」Binary search", "background": "$\\text{bh1234666}$ 正在学习[二分查找](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/10628618?fr=aladdin)。", "description": "众所周知二分查找的 $\\text{mid}$ 在计算时可以取 $\\lfloor\\dfrac{l+r}{2}\\rfloor$ 或者 $\\lceil\\dfrac{l+r}{2}\\rceil$，于是有选择困难症的 $\\text{bh1234666}$ 同学在自己的二分查找代码中加入了随机化，每次随机选取其中的一个作为 $\\textit{mid}$。\n\n注意，选取不同的 mid 其他参数也会受到影响，请以代码为准。\n\n现在 $\\text{bh1234666}$ 给你了二分查找使用的序列（保证为单调递增）以及他想要寻找的数（保证在序列内），他想知道在运气最好的情况下循环需要进行几次（即代码中 $\\textit{cnt}$ 的可能的最终值的最小值）。\n\n循环：\n```cpp\nint find(int *num,int x,int len)\n{\n\tint l=0,r=len-1,mid,cnt=0,w;\n\twhile(l<r)\n\t{\n\t\tcnt++;\n\t\tw=rand()%2;\n\t\tmid=(l+r+w)/2;\n\t\tif(num[mid]-w<x) l=mid+!w;\n\t\telse r=mid-w;\n\t}\n\treturn mid;\n}\n```\n递归：\n```\nint cnt;\nint get(int *num,int x,int l,int r)\n{\n\tif(l==r) return l;\n\tcnt++;\n\tint w=rand()%2;\n\tint mid=(l+r+w)/2;\n\tif(num[mid]-w<x) return get(num,x,mid+!w,r);\n\telse return get(num,x,l,mid-w);\n}\nint find(int *num,int x,int len)\n{\n\tcnt=0;\n\treturn get(num,x,0,len-1);\n}\n```\n注：以上两代码完全等价。\n\n在此对上述代码中的 $w$ 的作用做进一步阐释。\n\n例如对于区间 $[0,7]$，有 $8$ 个成员。虽然 $mid$ 的取值会因为 $w$ 的取值改变而改变，但是最终确定的区间一定是 $[0,3]$ 或 $[4,7]$，选手可以就上述代码自行模拟。\n\n对于区间 $[0,6]$，有 $7$ 个成员。$\\textit{mid}$ 的取值与 $w$ 的取值无关，但是 $l$ 和 $r$ 的取值会受到 $w$ 的影响，最终确定的区间可能是 $[0,2]$，$[3,6]$（$w=1$）或 $[0,3]$，$[4,6]$（$w=0$）。", "inputFormat": "第一行给出一个整数 $n$ 表示序列长度。\n\n第二行给出单调递增的 $n$ 个整数表示 $\\text{bh1234666}$ 的序列。\n\n第三行一个整数 $q$ 表示询问的次数。\n\n接下来 $q$ 行每行一个整数表示需要查询的数字。", "outputFormat": "对于每个询问回答一个整数，表示最小的循环次数。", "hint": "### 样例 1 解释\n\n找 $4$：\n\n取 $[1,5]$。\n\n取 $[1,3]$。\n\n取 $[3,3]$（退出循环）。\n\n### 样例 2 解释\n\n查询 $10$ 的位置。\n\n$$\n[1,13] \\stackrel{w=0}{\\longrightarrow} [1,7]\\stackrel{w=0}{\\longrightarrow}[5,7] \\stackrel{w=1}{\\longrightarrow} [5,5]\n$$\n\n### 数据范围及约定\n本题采用**捆绑测试**，共有 $3$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\text{特殊限制} \\cr\\hline\n1 & 25 & n \\le 20 \\cr\\hline\n2 & 35 & n=2^k(k \\in \\mathbf{N}) \\cr\\hline\n3 & 40 &  \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 2^{20}$，$1 \\le q \\le 100$，$1 \\le num_i \\le 10^9$。\n\n本题有 [extra sub](https://www.luogu.com.cn/problem/P8487)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Binary search", "background": "$\\text{bh1234666}$ 正在学习[二分查找](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/10628618?fr=aladdin)。", "description": "众所周知二分查找的 $\\text{mid}$ 在计算时可以取 $\\lfloor\\dfrac{l+r}{2}\\rfloor$ 或者 $\\lceil\\dfrac{l+r}{2}\\rceil$，于是有选择困难症的 $\\text{bh1234666}$ 同学在自己的二分查找代码中加入了随机化，每次随机选取其中的一个作为 $\\textit{mid}$。\n\n注意，选取不同的 mid 其他参数也会受到影响，请以代码为准。\n\n现在 $\\text{bh1234666}$ 给你了二分查找使用的序列（保证为单调递增）以及他想要寻找的数（保证在序列内），他想知道在运气最好的情况下循环需要进行几次（即代码中 $\\textit{cnt}$ 的可能的最终值的最小值）。\n\n循环：\n```cpp\nint find(int *num,int x,int len)\n{\n\tint l=0,r=len-1,mid,cnt=0,w;\n\twhile(l<r)\n\t{\n\t\tcnt++;\n\t\tw=rand()%2;\n\t\tmid=(l+r+w)/2;\n\t\tif(num[mid]-w<x) l=mid+!w;\n\t\telse r=mid-w;\n\t}\n\treturn mid;\n}\n```\n递归：\n```\nint cnt;\nint get(int *num,int x,int l,int r)\n{\n\tif(l==r) return l;\n\tcnt++;\n\tint w=rand()%2;\n\tint mid=(l+r+w)/2;\n\tif(num[mid]-w<x) return get(num,x,mid+!w,r);\n\telse return get(num,x,l,mid-w);\n}\nint find(int *num,int x,int len)\n{\n\tcnt=0;\n\treturn get(num,x,0,len-1);\n}\n```\n注：以上两代码完全等价。\n\n在此对上述代码中的 $w$ 的作用做进一步阐释。\n\n例如对于区间 $[0,7]$，有 $8$ 个成员。虽然 $mid$ 的取值会因为 $w$ 的取值改变而改变，但是最终确定的区间一定是 $[0,3]$ 或 $[4,7]$，选手可以就上述代码自行模拟。\n\n对于区间 $[0,6]$，有 $7$ 个成员。$\\textit{mid}$ 的取值与 $w$ 的取值无关，但是 $l$ 和 $r$ 的取值会受到 $w$ 的影响，最终确定的区间可能是 $[0,2]$，$[3,6]$（$w=1$）或 $[0,3]$，$[4,6]$（$w=0$）。", "inputFormat": "第一行给出一个整数 $n$ 表示序列长度。\n\n第二行给出单调递增的 $n$ 个整数表示 $\\text{bh1234666}$ 的序列。\n\n第三行一个整数 $q$ 表示询问的次数。\n\n接下来 $q$ 行每行一个整数表示需要查询的数字。", "outputFormat": "对于每个询问回答一个整数，表示最小的循环次数。", "hint": "### 样例 1 解释\n\n找 $4$：\n\n取 $[1,5]$。\n\n取 $[1,3]$。\n\n取 $[3,3]$（退出循环）。\n\n### 样例 2 解释\n\n查询 $10$ 的位置。\n\n$$\n[1,13] \\stackrel{w=0}{\\longrightarrow} [1,7]\\stackrel{w=0}{\\longrightarrow}[5,7] \\stackrel{w=1}{\\longrightarrow} [5,5]\n$$\n\n### 数据范围及约定\n本题采用**捆绑测试**，共有 $3$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\text{特殊限制} \\cr\\hline\n1 & 25 & n \\le 20 \\cr\\hline\n2 & 35 & n=2^k(k \\in \\mathbf{N}) \\cr\\hline\n3 & 40 &  \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 2^{20}$，$1 \\le q \\le 100$，$1 \\le num_i \\le 10^9$。\n\n本题有 [extra sub](https://www.luogu.com.cn/problem/P8487)。", "locale": "zh-CN"}}}
{"pid": "P8482", "type": "P", "difficulty": 4, "samples": [["1 2 3 2 1 1 2 1 2 1", "13949030\n620572547"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "高精度", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "「HGOI-1」Number", "background": "$\\text{bh1234666}$ 正在学习乘法！", "description": "$\\text{bh1234666}$ 有一定数量的数字 $0 \\sim 9$，现在他想让你寻找一种分配方案，将它们分成两个整数，使得他们的乘积 $p$ 最大。\n \n由于 $\\text{bh1234666}$ 不喜欢太大的数，所以你只需要输出**两个非负整数**，使它们的乘积**等于**最大乘积 $p$，但是这两个整数 $0 \\sim 9$ 的数量不能等于给定的数量（任意一个数字数量不相等即可，**不考虑前导零**）。\n\n$\\text{bh1234666}$ 是很善良的，如果 $0 \\sim 9$ 的数量等于给定的数量了，你依旧可以得到的一半的分。", "inputFormat": "第一行十个整数 $c_0,c_1,\\cdots c_9$，分别表示 $0 \\sim 9$ 的个数。", "outputFormat": "共两行每行一个非负整数，分别表示你给出的两个非负整数。", "hint": "#### 样例解释\n最大可能乘积为 $97643210 \\times 88653221=13949030 \\times 620572547=8656385075279410$。\n\n若输出 $97643210 \\times 88653221$ 则只能得到一半的分，因为 $0\\sim 9$ 出现的次数与给定的相同。\n\n#### 数据范围及约定\n本题采用**捆绑测试**，共有 $5$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\sum c_i\\le \\cr\\hline\n1 & 10 & 20 \\cr\\hline\n2 & 20 & 100 \\cr\\hline\n3 & 20 & 5000 \\cr\\hline\n4 & 20 & 10^6 \\cr\\hline\n5 & 30 & 10^7 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1 \\le c_i$，$\\sum c_i \\le 10^7$。\n\n#### 说明\n\n本题有 $\\text{spj}$，两数乘积正确得一半的分，数量与给出的不同且乘积正确得全部分数。故每一 $\\text{subtask}$ 的得分为其中所有数据点得分的**最小值**。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Number", "background": "$\\text{bh1234666}$ 正在学习乘法！", "description": "$\\text{bh1234666}$ 有一定数量的数字 $0 \\sim 9$，现在他想让你寻找一种分配方案，将它们分成两个整数，使得他们的乘积 $p$ 最大。\n \n由于 $\\text{bh1234666}$ 不喜欢太大的数，所以你只需要输出**两个非负整数**，使它们的乘积**等于**最大乘积 $p$，但是这两个整数 $0 \\sim 9$ 的数量不能等于给定的数量（任意一个数字数量不相等即可，**不考虑前导零**）。\n\n$\\text{bh1234666}$ 是很善良的，如果 $0 \\sim 9$ 的数量等于给定的数量了，你依旧可以得到的一半的分。", "inputFormat": "第一行十个整数 $c_0,c_1,\\cdots c_9$，分别表示 $0 \\sim 9$ 的个数。", "outputFormat": "共两行每行一个非负整数，分别表示你给出的两个非负整数。", "hint": "#### 样例解释\n最大可能乘积为 $97643210 \\times 88653221=13949030 \\times 620572547=8656385075279410$。\n\n若输出 $97643210 \\times 88653221$ 则只能得到一半的分，因为 $0\\sim 9$ 出现的次数与给定的相同。\n\n#### 数据范围及约定\n本题采用**捆绑测试**，共有 $5$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\sum c_i\\le \\cr\\hline\n1 & 10 & 20 \\cr\\hline\n2 & 20 & 100 \\cr\\hline\n3 & 20 & 5000 \\cr\\hline\n4 & 20 & 10^6 \\cr\\hline\n5 & 30 & 10^7 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1 \\le c_i$，$\\sum c_i \\le 10^7$。\n\n#### 说明\n\n本题有 $\\text{spj}$，两数乘积正确得一半的分，数量与给出的不同且乘积正确得全部分数。故每一 $\\text{subtask}$ 的得分为其中所有数据点得分的**最小值**。\n", "locale": "zh-CN"}}}
{"pid": "P8483", "type": "P", "difficulty": 4, "samples": [["4 4\n1 2 3\n2 3 4\n3 4 5\n4 5 6", "114\n1 2\n1 2\n1 3\n3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "贪心", "二分", "堆", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「HGOI-1」Build", "background": "一次旅行，$\\text{uuku}$ 到了一个奇怪的小镇。", "description": "这个小镇将要和周围的其他小镇一共 $n$ 个小镇，一起修建一个能**连通**这 $n$ 个小镇，有 $m$ 条高速公路的交通网。其中每条高速公路都将会连接**不同的两个小镇**，即不存在一条高速公路的起点和终点相同。\n\n但高速公路的修建费用是很高的，所以镇长们一致决定将共同承担高速公路的费用，所以他们希望修建的**总费用最小**。\n\n而且由于不同小镇的基础设施建设情况不同，所以每个小镇在修建的费用也不同。经过协商，每条高速公路将由其所连接的两个小镇共同施工。每个小镇负责一半路程。为了同时结束整个施工过程，显然将会有小镇同时进行多条道路的施工，而施工的道路数量越多，所需要花费的价钱就越多。\n\n经过计算，每个小镇施工的花费可以用函数表示，及对于小镇 $i$，有三个参数 $a_i$，$b_i$，$c_i$。对于 $i$ 小镇来说在修建其第 $j$ 条高速时，**这条**高速所需要的花费为 $a_ij^2+b_ij+c_i$。\n\n现在，这些镇长想要 $\\text{uuku}$ 给他们提供一个满足要求的**建造方案**，使**总价格最小**。\n\n当然，$\\text{uuku}$ 将这个问题交给了你。", "inputFormat": "第一行两个整数 $n$，$m$。\n\n接下来 $n$ 行，每行三个整数 $a_i$，$b_i$，$c_i$。", "outputFormat": "共 $m+1$ 行\n\n第一行一个整数表示最小价格。\n\n接下来 $m$ 行，每行两个整数 $u$，$v$，表示你提供的方案中的一条边。", "hint": "#### 数据范围\n本题采用**捆绑测试**，共有 $6$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 10 & n,m\\le 500  \\cr\\hline\n2 & 20 &  n,m\\le 5\\times 10^3 \\cr\\hline\n3 & 10 & \\text{每个小镇的函数相同}\\cr\\hline\n4 & 20 & a_i=0 \\cr\\hline\n5 & 20 & m=n-1 \\cr\\hline\n6 & 20 & \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$2\\le n \\le 2 \\times 10^5$， $n-1 \\le m \\le 10^6$，$0 \\le a_i$，$b_i$，$c_i \\le 10^6$。\n\n数据保证最小价格在 $\\tt{long \\ long}$ 范围内。\n\n#### 说明\n\n本题有 $\\text{spj}$，价格正确可以获得 $30\\%$ 的分数。每个 $\\text{subtask}$ 取其中所有数据点得分的最小值。\n\n如果你不会构造方案，也请你再输出最小价格后输出 $m$ 行，每行两个 $[1,n]$ 范围内的整数，防止 $\\text{spj}$ 出现错误。\n\n本题已添加 hack 数据，为 $\\text{subtask7}$，该 $\\text{subtask}$ 不计分数，但会影响是否 $\\text{AC}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Build", "background": "一次旅行，$\\text{uuku}$ 到了一个奇怪的小镇。", "description": "这个小镇将要和周围的其他小镇一共 $n$ 个小镇，一起修建一个能**连通**这 $n$ 个小镇，有 $m$ 条高速公路的交通网。其中每条高速公路都将会连接**不同的两个小镇**，即不存在一条高速公路的起点和终点相同。\n\n但高速公路的修建费用是很高的，所以镇长们一致决定将共同承担高速公路的费用，所以他们希望修建的**总费用最小**。\n\n而且由于不同小镇的基础设施建设情况不同，所以每个小镇在修建的费用也不同。经过协商，每条高速公路将由其所连接的两个小镇共同施工。每个小镇负责一半路程。为了同时结束整个施工过程，显然将会有小镇同时进行多条道路的施工，而施工的道路数量越多，所需要花费的价钱就越多。\n\n经过计算，每个小镇施工的花费可以用函数表示，及对于小镇 $i$，有三个参数 $a_i$，$b_i$，$c_i$。对于 $i$ 小镇来说在修建其第 $j$ 条高速时，**这条**高速所需要的花费为 $a_ij^2+b_ij+c_i$。\n\n现在，这些镇长想要 $\\text{uuku}$ 给他们提供一个满足要求的**建造方案**，使**总价格最小**。\n\n当然，$\\text{uuku}$ 将这个问题交给了你。", "inputFormat": "第一行两个整数 $n$，$m$。\n\n接下来 $n$ 行，每行三个整数 $a_i$，$b_i$，$c_i$。", "outputFormat": "共 $m+1$ 行\n\n第一行一个整数表示最小价格。\n\n接下来 $m$ 行，每行两个整数 $u$，$v$，表示你提供的方案中的一条边。", "hint": "#### 数据范围\n本题采用**捆绑测试**，共有 $6$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 10 & n,m\\le 500  \\cr\\hline\n2 & 20 &  n,m\\le 5\\times 10^3 \\cr\\hline\n3 & 10 & \\text{每个小镇的函数相同}\\cr\\hline\n4 & 20 & a_i=0 \\cr\\hline\n5 & 20 & m=n-1 \\cr\\hline\n6 & 20 & \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$2\\le n \\le 2 \\times 10^5$， $n-1 \\le m \\le 10^6$，$0 \\le a_i$，$b_i$，$c_i \\le 10^6$。\n\n数据保证最小价格在 $\\tt{long \\ long}$ 范围内。\n\n#### 说明\n\n本题有 $\\text{spj}$，价格正确可以获得 $30\\%$ 的分数。每个 $\\text{subtask}$ 取其中所有数据点得分的最小值。\n\n如果你不会构造方案，也请你再输出最小价格后输出 $m$ 行，每行两个 $[1,n]$ 范围内的整数，防止 $\\text{spj}$ 出现错误。\n\n本题已添加 hack 数据，为 $\\text{subtask7}$，该 $\\text{subtask}$ 不计分数，但会影响是否 $\\text{AC}$。", "locale": "zh-CN"}}}
{"pid": "P8484", "type": "P", "difficulty": 6, "samples": [["5 10\n1 3 1 1 1 1 1 1 5 1", "3 5 6 7 12 16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "线段树", "堆", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「HGOI-1」Mole", "background": "$\\text{brealid}$ 觉得普通的打地鼠游戏太过于 $\\text{simple}$ 了。所以，她设计了一款全新的打地鼠游戏。", "description": "在长度为 $l$ 的游戏窗口上，有一个长为 $t$ 的地鼠序列 $(l \\le t)$，初始序列左端与窗口左端对齐，接下来序列每秒移动一个单位长度，（即最左端的地鼠离开窗口，最右端的地鼠进入窗口），向左滚动直至玩家结束游戏或者序列最右端与窗口最右端重合（即任何时刻窗口内均应有 $l$ 只地鼠）。\n\n游戏开始的第一秒序列不会移动，不难发现游戏最多会进行 $(t-l+1)$ 秒。\n\n序列 $T$ 中的每一只地鼠都有自己的高度 $h_i$，玩家每次可以选择击打一只地鼠，玩家可以获得与地鼠高度 $h_i$ 数值相同的金币奖励，同时地鼠 $i$ 的高度 $h_i$ 会减一。\n\n经过调研，$\\text{brealid}$ 控制了游戏运行速度，使得玩家在地鼠序列移动一个单位长度的同时**最多只能打击一次**（也可以不打）。\n\n现在 $\\text{brealid}$ 告诉了你某一次游戏的窗口长度 $l$、序列长度 $t$ 以及某一局游戏中生成的地鼠高度序列 $T$。我们可爱的 $\\text{brealid}$ 想要知道，她在**任意时刻**结束游戏所能得到的**最多金币**，即在第 $1,2,\\cdots (t-l+1)$ 秒时停止游戏分别可以获得的最多金币。", "inputFormat": "第一行两个整数 $l$，$t$，表示窗口长度 $l$ 和序列长度 $t$。\n\n第二行 $t$ 个整数，表示某一局中的地鼠高度序列。", "outputFormat": "一行 $t-l+1$ 个整数 $a_1,a_2,\\cdots a_{t-l+1}$，$a_i$ 表示第 $i$ 秒时结束游戏可以获得的最多的金币数。\n", "hint": "#### 样例解释\n\n第一秒：锤 $2$，答案加 $3$。\n\n第二秒：锤 $2$，答案加 $2$。\n\n第三秒：随便锤一个，答案加 $1$。\n\n第四秒：再随便锤一个（非 $0$ 的），答案加 $1$。\n\n第五秒：锤 $9$，答案加 $5$。\n\n第六秒：锤 $9$，答案加 $4$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $4$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & l\\le t\\le  \\cr\\hline\n1 & 10 & 10 \\cr\\hline\n2 & 20 & 500 \\cr\\hline\n3 & 30 & 5000 \\cr\\hline\n4 & 40 & 10^6 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\le l\\le t\\le 10^6$，$|h_i|\\le 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Mole", "background": "$\\text{brealid}$ 觉得普通的打地鼠游戏太过于 $\\text{simple}$ 了。所以，她设计了一款全新的打地鼠游戏。", "description": "在长度为 $l$ 的游戏窗口上，有一个长为 $t$ 的地鼠序列 $(l \\le t)$，初始序列左端与窗口左端对齐，接下来序列每秒移动一个单位长度，（即最左端的地鼠离开窗口，最右端的地鼠进入窗口），向左滚动直至玩家结束游戏或者序列最右端与窗口最右端重合（即任何时刻窗口内均应有 $l$ 只地鼠）。\n\n游戏开始的第一秒序列不会移动，不难发现游戏最多会进行 $(t-l+1)$ 秒。\n\n序列 $T$ 中的每一只地鼠都有自己的高度 $h_i$，玩家每次可以选择击打一只地鼠，玩家可以获得与地鼠高度 $h_i$ 数值相同的金币奖励，同时地鼠 $i$ 的高度 $h_i$ 会减一。\n\n经过调研，$\\text{brealid}$ 控制了游戏运行速度，使得玩家在地鼠序列移动一个单位长度的同时**最多只能打击一次**（也可以不打）。\n\n现在 $\\text{brealid}$ 告诉了你某一次游戏的窗口长度 $l$、序列长度 $t$ 以及某一局游戏中生成的地鼠高度序列 $T$。我们可爱的 $\\text{brealid}$ 想要知道，她在**任意时刻**结束游戏所能得到的**最多金币**，即在第 $1,2,\\cdots (t-l+1)$ 秒时停止游戏分别可以获得的最多金币。", "inputFormat": "第一行两个整数 $l$，$t$，表示窗口长度 $l$ 和序列长度 $t$。\n\n第二行 $t$ 个整数，表示某一局中的地鼠高度序列。", "outputFormat": "一行 $t-l+1$ 个整数 $a_1,a_2,\\cdots a_{t-l+1}$，$a_i$ 表示第 $i$ 秒时结束游戏可以获得的最多的金币数。\n", "hint": "#### 样例解释\n\n第一秒：锤 $2$，答案加 $3$。\n\n第二秒：锤 $2$，答案加 $2$。\n\n第三秒：随便锤一个，答案加 $1$。\n\n第四秒：再随便锤一个（非 $0$ 的），答案加 $1$。\n\n第五秒：锤 $9$，答案加 $5$。\n\n第六秒：锤 $9$，答案加 $4$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $4$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & l\\le t\\le  \\cr\\hline\n1 & 10 & 10 \\cr\\hline\n2 & 20 & 500 \\cr\\hline\n3 & 30 & 5000 \\cr\\hline\n4 & 40 & 10^6 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\le l\\le t\\le 10^6$，$|h_i|\\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P8485", "type": "P", "difficulty": 6, "samples": [["3 9\n#...#...#\n#.#...#.#\n#########", "110916040"], ["10 20\n###...###....#######\n##..#.####.##.######\n##.##.####.#.#.#####\n#.#..##..###.#.....#\n#..##.#.#....###.#.#\n####....#.##.#..##.#\n##..###.#.#..#.##..#\n###...#..##.##..##.#\n#.#.#.##.##.##..####\n####################", "966268884"], ["10 20\n#####.######.####.##\n####.#.#####.###.###\n###.###.####.##.####\n###.###.####.#.#####\n##.#####.###..######\n##.......###.#.#####\n#..#####..##.##.####\n#.#######.##.###.###\n#.#######.##.####.##\n####################", "581693010"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["并查集", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「HGOI-1」Water", "background": "$\\text{uuku}$ 每天都给他的线段树浇水。但由于线段树是平面的，所以 $\\text{uuku}$ 用一个二维的水桶给它浇水。", "description": "水桶可以描述为一个 $h\\times w$ 的竖直平面，其中 `.` 表示空格，`#` 表示挡板，保证除顶面外所有边界均有 `#`。\n\n$\\text{uuku}$ 给水桶装水的方式很奇特：他希望在装水完成的瞬间水不流动。即对于任意一格存在水的位置，其左右和下方均有水或者挡板。并且如果一格水的上方是空格，则称之为水平面，如果上方是挡板或者水桶外部，则称之为上界面。水形成的四连通块内的所有水平面都要一样高且所有上界面都应该不高于水平面（该条件即为在真空环境且存在重力时水不流动）。\n\n从装水完成后开始计时，每秒都会进行一次扩展。每次扩展所有水平面都会向上方的空格**扩展一层**，并填充**高度小于等于新扩展层的**所有可达的空格（可以理解为仍满足 $\\text{uuku}$ 的上述要求），这一切可以看作是瞬间完成的。\n\n神奇的水会一直扩展，直到**所有可达的空格**均被水填满后停止扩展，即不存在水平面。\n\n现在 $\\text{uuku}$ 想知道，对于所有符合他要求的装水方案，所有水停止扩展所需时间的**平均值**是多少。\n", "inputFormat": "第一行两个整数 $h$，$w$，表示水桶的高度和宽度。\n\n接下来 $h$ 行，每行 $w$ 个字符，其中 `.` 表示空格，`#` 表示挡板。", "outputFormat": "一行一个整数，表示 $\\text{uuku}$ 给水桶装水需要的时间的平均值，由于答案可能很大，所以你只需要给出对 $998244353$ 取模以后的结果。", "hint": "#### 样例 1 解释\n\n装水无需时间。\n\n共有 $9$ 种情况（`*` 表示水）：\n\n$1$：\n\n```\n#...#...#\n#.#...#.#\n#########\n```\n需要 $0\\text{s}$。\n\n$2$：\n\n```\n#...#...#\n#*#...#.#\n#########\n```\n需要 $1\\text{s}$。\n\n$3$：\n\n```\n#...#...#\n#*#***#.#\n#########\n```\n需要 $1\\text{s}$。\n\n$4$：\n\n```\n#...#...#\n#*#***#*#\n#########\n```\n需要 $1\\text{s}$。\n\n$5$：\n\n```\n#...#...#\n#.#***#.#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$6$：\n\n```\n#...#...#\n#.#***#*#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$7$：\n\n```\n#...#...#\n#*#...#*#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$8$：\n\n```\n#...#...#\n#.#...#*#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$9$：\n\n```\n#***#***#\n#*#***#*#\n#########\n```\n\n需要 $0\\text{s}$。\n\n因此期望为 $\\dfrac{7}{9}\\equiv 110916040(\\bmod 998244353)$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $5$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & h,w\\le \\cr\\hline\n1 & 10 &  10 \\cr\\hline\n2 & 20 &  100 \\cr\\hline\n3 & 20 &  500 \\cr\\hline\n4 & 20 &  2000 \\cr\\hline\n5 & 30 &  5000 \\cr\\hline\n\\end{array}\n$$\n\n\n对于 $100\\%$ 的数据，$1 \\le h,w \\le 5000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Water", "background": "$\\text{uuku}$ 每天都给他的线段树浇水。但由于线段树是平面的，所以 $\\text{uuku}$ 用一个二维的水桶给它浇水。", "description": "水桶可以描述为一个 $h\\times w$ 的竖直平面，其中 `.` 表示空格，`#` 表示挡板，保证除顶面外所有边界均有 `#`。\n\n$\\text{uuku}$ 给水桶装水的方式很奇特：他希望在装水完成的瞬间水不流动。即对于任意一格存在水的位置，其左右和下方均有水或者挡板。并且如果一格水的上方是空格，则称之为水平面，如果上方是挡板或者水桶外部，则称之为上界面。水形成的四连通块内的所有水平面都要一样高且所有上界面都应该不高于水平面（该条件即为在真空环境且存在重力时水不流动）。\n\n从装水完成后开始计时，每秒都会进行一次扩展。每次扩展所有水平面都会向上方的空格**扩展一层**，并填充**高度小于等于新扩展层的**所有可达的空格（可以理解为仍满足 $\\text{uuku}$ 的上述要求），这一切可以看作是瞬间完成的。\n\n神奇的水会一直扩展，直到**所有可达的空格**均被水填满后停止扩展，即不存在水平面。\n\n现在 $\\text{uuku}$ 想知道，对于所有符合他要求的装水方案，所有水停止扩展所需时间的**平均值**是多少。\n", "inputFormat": "第一行两个整数 $h$，$w$，表示水桶的高度和宽度。\n\n接下来 $h$ 行，每行 $w$ 个字符，其中 `.` 表示空格，`#` 表示挡板。", "outputFormat": "一行一个整数，表示 $\\text{uuku}$ 给水桶装水需要的时间的平均值，由于答案可能很大，所以你只需要给出对 $998244353$ 取模以后的结果。", "hint": "#### 样例 1 解释\n\n装水无需时间。\n\n共有 $9$ 种情况（`*` 表示水）：\n\n$1$：\n\n```\n#...#...#\n#.#...#.#\n#########\n```\n需要 $0\\text{s}$。\n\n$2$：\n\n```\n#...#...#\n#*#...#.#\n#########\n```\n需要 $1\\text{s}$。\n\n$3$：\n\n```\n#...#...#\n#*#***#.#\n#########\n```\n需要 $1\\text{s}$。\n\n$4$：\n\n```\n#...#...#\n#*#***#*#\n#########\n```\n需要 $1\\text{s}$。\n\n$5$：\n\n```\n#...#...#\n#.#***#.#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$6$：\n\n```\n#...#...#\n#.#***#*#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$7$：\n\n```\n#...#...#\n#*#...#*#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$8$：\n\n```\n#...#...#\n#.#...#*#\n#########\n```\n\n需要 $1\\text{s}$。\n\n$9$：\n\n```\n#***#***#\n#*#***#*#\n#########\n```\n\n需要 $0\\text{s}$。\n\n因此期望为 $\\dfrac{7}{9}\\equiv 110916040(\\bmod 998244353)$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $5$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & h,w\\le \\cr\\hline\n1 & 10 &  10 \\cr\\hline\n2 & 20 &  100 \\cr\\hline\n3 & 20 &  500 \\cr\\hline\n4 & 20 &  2000 \\cr\\hline\n5 & 30 &  5000 \\cr\\hline\n\\end{array}\n$$\n\n\n对于 $100\\%$ 的数据，$1 \\le h,w \\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P8486", "type": "P", "difficulty": 7, "samples": [["4 2 2\n499122177 499122177 499122177 499122177\n1 2 \n4 5", "779878410"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["多项式", "洛谷原创", "O2优化", "生成函数", "快速数论变换 NTT", "洛谷月赛"], "title": "「HGOI-1」Competition", "background": "$\\text{HGOI}$ 举办了一场模拟赛。\n\n为了增加选手们的积极性，$\\text{HGOI}$ 的出题人根据题目难度划定了一个分数线。$\\text{bh1234666}$ 会给超过这个分数线的选手发奖品。", "description": "众所周知，$\\text{OI}$ 赛制的比赛有很大的运气成分。选手们往往不能发挥出真实水平。所以对于参赛的 $n$ 位选手，第 $i$ 位选手会有一个达到分数线的概率 $p_i$。\n\n在模拟赛结束后就是最激动人心颁奖环节。\n\n组委会的委员们设置了若干种类的奖品，并且每种奖品都有对应的价值。而他们对自己设置的奖品的发放有各自的要求：\n\n- $\\text{uuku}$ 喜欢成双成对，所以对于他设置的**每种**奖品必须向**偶数个获奖选手**发放。\n\n- $\\text{rechinist}$ 喜欢跟 $\\text{uuku}$ 对着干，所以对于他设置的**每种**奖品必须向**奇数个获奖选手**发放。\n\n委员 $\\text{uuku}$ 设置了 $A$ 种奖品，$a_i$ 表示他设置的第 $i$ 种奖品的价值。\n\n委员 $\\text{rechinist}$ 准备了 $B$ 种奖品，$b_i$ 表示他设置的第 $i$ 种奖品的价值。\n\n当然**每个获奖选手**都将被发给**恰好**一份奖励。\n\n选手们不关心每种奖品被发放了几次，但是他们关心有多少种奖品被发放了，因此选手们的积极性被定义为所有被发放的奖品的价值的乘积（每种奖品只会被乘一次）。\n\n假如获奖人数使得委员会无法发放奖品， $\\text{bh1234666}$ 会十分生气，拒绝提供资金购买奖品，使得选手积极性为 $0$ 。\n\n现在，委员会已经知道了每个选手能达到分数线的概率 $p_i$，他们想知道选手们积极性的期望值为多少。\n\n由于答案可能很大，所以你只需要给出对 $998244353$ 取模以后的结果。\n", "inputFormat": "第一行四个整数 $n$，$A$，$B$ 表示参赛人数和两位委员提出的金额序列的长度。\n\n第二行 $n$ 个整数，表示 $n$ 选手达到分数线的概率 $p_i$（为了方便我们给出模 $998244353$ 意义下的概率）。\n\n第三行 $A$ 个整数，表示 $\\text{uuku}$ 提出的金额序列 $a$。\n\n第四行 $B$ 个整数，表示 $\\text{rechinist}$ 提出的金额序列 $b$。", "outputFormat": "一行一个整数，表示**选手们积极性的期望值**。", "hint": "#### 样例1解释\n\n$0\\sim n$ 人达到分数线的概率依次为$\\dfrac{1}{16}$，$\\dfrac{1}{4}$，$\\dfrac{3}{8}$，$\\dfrac{1}{4}$，$\\dfrac{1}{16}$。\n\n对于 $0$ 人达到分数线无发放方案。\n\n对于 $1$ 人达到分数线无发放方案。\n\n对于 $2$ 人达到分数线有如下 $2$ 种发放方案。\n\n$4$，$5$ 价值为 $20$ 对期望贡献为 $20\\times \\dfrac{3}{8}\\times \\dfrac{1}{2}=\\dfrac{15}{4}$。\n\n$5$，$4$ 价值为 $20$ 对期望贡献为 $20\\times \\dfrac{3}{8}\\times \\dfrac{1}{2}=\\dfrac{15}{4}$。\n\n对于 $3$ 人达到分数线无发放方案。\n\n对于 $4$ 人达到分数线有如下 $32$ 种发放方案。\n\n对于发放 $4$，$5$ 两种奖品一共有 $8$ 种方式。\n\n每种价值均为 $20$ 对期望总贡献为 $20\\times 8\\times \\dfrac{1}{16}\\times \\dfrac{1}{32}=\\dfrac{5}{16}$。\n\n对于发放 $1$，$4$，$5$ 三种奖品一共有 $12$ 种方式。\n\n每种价值均为 $20$ 对期望总贡献为 $20\\times 12\\times \\dfrac{1}{16}\\times \\dfrac{1}{32}=\\dfrac{15}{32}$。\n\n对于发放 $2$，$4$，$5$ 三种奖品一共有 $12$ 种方式。\n\n价值均为 $40$ 对期望贡献为 $40\\times 12\\times \\dfrac{1}{16}\\times \\dfrac{1}{32}=\\dfrac{15}{16}$。\n\n则总期望 $E=\\dfrac{15}{4}+\\dfrac{15}{4}+\\dfrac{5}{16}+\\dfrac{15}{32}+\\dfrac{15}{16}=\\dfrac{295}{32}\\equiv 779878410 (\\bmod\\ 998244353)$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $6$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 5 & n \\le 5 \\text{且} A \\text{，}B \\le 5 \\cr\\hline\n2 & 10 & n \\le 500 \\text{且} A+B \\le 500 \\cr\\hline\n3 & 15 & n \\le 2000 \\text{且} A+B\\le 2000  \\cr\\hline\n4 & 20 & n\\text{，}A\\text{，}B \\le 5000  \\cr\\hline\n5 & 20 & n \\le 2\\times 10^5 \\text{，} A \\text{，} B \\le 10^5\\cr\\hline\n6 & 30 &  \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1 \\le A$，$B \\le 2 \\times 10^5$，$1 \\le n \\le 4 \\times 10^5$，$1 \\le a_i$，$b_i$，$p_i \\le 998244352$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Competition", "background": "$\\text{HGOI}$ 举办了一场模拟赛。\n\n为了增加选手们的积极性，$\\text{HGOI}$ 的出题人根据题目难度划定了一个分数线。$\\text{bh1234666}$ 会给超过这个分数线的选手发奖品。", "description": "众所周知，$\\text{OI}$ 赛制的比赛有很大的运气成分。选手们往往不能发挥出真实水平。所以对于参赛的 $n$ 位选手，第 $i$ 位选手会有一个达到分数线的概率 $p_i$。\n\n在模拟赛结束后就是最激动人心颁奖环节。\n\n组委会的委员们设置了若干种类的奖品，并且每种奖品都有对应的价值。而他们对自己设置的奖品的发放有各自的要求：\n\n- $\\text{uuku}$ 喜欢成双成对，所以对于他设置的**每种**奖品必须向**偶数个获奖选手**发放。\n\n- $\\text{rechinist}$ 喜欢跟 $\\text{uuku}$ 对着干，所以对于他设置的**每种**奖品必须向**奇数个获奖选手**发放。\n\n委员 $\\text{uuku}$ 设置了 $A$ 种奖品，$a_i$ 表示他设置的第 $i$ 种奖品的价值。\n\n委员 $\\text{rechinist}$ 准备了 $B$ 种奖品，$b_i$ 表示他设置的第 $i$ 种奖品的价值。\n\n当然**每个获奖选手**都将被发给**恰好**一份奖励。\n\n选手们不关心每种奖品被发放了几次，但是他们关心有多少种奖品被发放了，因此选手们的积极性被定义为所有被发放的奖品的价值的乘积（每种奖品只会被乘一次）。\n\n假如获奖人数使得委员会无法发放奖品， $\\text{bh1234666}$ 会十分生气，拒绝提供资金购买奖品，使得选手积极性为 $0$ 。\n\n现在，委员会已经知道了每个选手能达到分数线的概率 $p_i$，他们想知道选手们积极性的期望值为多少。\n\n由于答案可能很大，所以你只需要给出对 $998244353$ 取模以后的结果。\n", "inputFormat": "第一行四个整数 $n$，$A$，$B$ 表示参赛人数和两位委员提出的金额序列的长度。\n\n第二行 $n$ 个整数，表示 $n$ 选手达到分数线的概率 $p_i$（为了方便我们给出模 $998244353$ 意义下的概率）。\n\n第三行 $A$ 个整数，表示 $\\text{uuku}$ 提出的金额序列 $a$。\n\n第四行 $B$ 个整数，表示 $\\text{rechinist}$ 提出的金额序列 $b$。", "outputFormat": "一行一个整数，表示**选手们积极性的期望值**。", "hint": "#### 样例1解释\n\n$0\\sim n$ 人达到分数线的概率依次为$\\dfrac{1}{16}$，$\\dfrac{1}{4}$，$\\dfrac{3}{8}$，$\\dfrac{1}{4}$，$\\dfrac{1}{16}$。\n\n对于 $0$ 人达到分数线无发放方案。\n\n对于 $1$ 人达到分数线无发放方案。\n\n对于 $2$ 人达到分数线有如下 $2$ 种发放方案。\n\n$4$，$5$ 价值为 $20$ 对期望贡献为 $20\\times \\dfrac{3}{8}\\times \\dfrac{1}{2}=\\dfrac{15}{4}$。\n\n$5$，$4$ 价值为 $20$ 对期望贡献为 $20\\times \\dfrac{3}{8}\\times \\dfrac{1}{2}=\\dfrac{15}{4}$。\n\n对于 $3$ 人达到分数线无发放方案。\n\n对于 $4$ 人达到分数线有如下 $32$ 种发放方案。\n\n对于发放 $4$，$5$ 两种奖品一共有 $8$ 种方式。\n\n每种价值均为 $20$ 对期望总贡献为 $20\\times 8\\times \\dfrac{1}{16}\\times \\dfrac{1}{32}=\\dfrac{5}{16}$。\n\n对于发放 $1$，$4$，$5$ 三种奖品一共有 $12$ 种方式。\n\n每种价值均为 $20$ 对期望总贡献为 $20\\times 12\\times \\dfrac{1}{16}\\times \\dfrac{1}{32}=\\dfrac{15}{32}$。\n\n对于发放 $2$，$4$，$5$ 三种奖品一共有 $12$ 种方式。\n\n价值均为 $40$ 对期望贡献为 $40\\times 12\\times \\dfrac{1}{16}\\times \\dfrac{1}{32}=\\dfrac{15}{16}$。\n\n则总期望 $E=\\dfrac{15}{4}+\\dfrac{15}{4}+\\dfrac{5}{16}+\\dfrac{15}{32}+\\dfrac{15}{16}=\\dfrac{295}{32}\\equiv 779878410 (\\bmod\\ 998244353)$。\n\n#### 数据范围\n\n本题采用**捆绑测试**，共有 $6$ 个 $\\text{subtask}$，最终分数为所有 $\\text{subtask}$ 分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 5 & n \\le 5 \\text{且} A \\text{，}B \\le 5 \\cr\\hline\n2 & 10 & n \\le 500 \\text{且} A+B \\le 500 \\cr\\hline\n3 & 15 & n \\le 2000 \\text{且} A+B\\le 2000  \\cr\\hline\n4 & 20 & n\\text{，}A\\text{，}B \\le 5000  \\cr\\hline\n5 & 20 & n \\le 2\\times 10^5 \\text{，} A \\text{，} B \\le 10^5\\cr\\hline\n6 & 30 &  \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1 \\le A$，$B \\le 2 \\times 10^5$，$1 \\le n \\le 4 \\times 10^5$，$1 \\le a_i$，$b_i$，$p_i \\le 998244352$。", "locale": "zh-CN"}}}
{"pid": "P8487", "type": "P", "difficulty": 5, "samples": [["10\n3 0\n2 6 8", "18"], ["13\n5 0\n0 1 4 6 11\n", "52"], ["1928374\n10 1000000\n193 3489 238 438 8 912 83 19 12489 10", "10000215403302"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "二分", "洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "「HGOI-1」Binary search Ex", "background": "此题为 [div.2 B](https://www.luogu.com.cn/problem/P8481) 的 extra sub，并非完整的题，总分为 $25$ 分（进入主题库后满分为 $100$ 分）。\n\n$\\text{bh1234666}$ 正在学习[二分查找](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/10628618?fr=aladdin)。", "description": "众所周知二分查找的 $\\text{mid}$ 在计算时可以取 $\\lfloor\\dfrac{l+r}{2}\\rfloor$ 或者 $\\lceil\\dfrac{l+r}{2}\\rceil$,于是有选择困难症的 $\\text{bh1234666}$ 同学在自己的二分查找代码中加入了随机化，每次随机选取其中的一个作为 $\\textit{mid}$。\n\n现在 $\\text{bh1234666}$ 告诉你了他要找的数在序列内的下标（从 $0$ 开始，可以理解为在一个 $0\\sim n-1$ 的升序序列内查询询问的数），他想知道在运气最好的情况下循环需要进行几次（即代码中 $\\textit{cnt}$ 的可能的最终值的最小值）。\n\n循环：\n```cpp\nint find(int *num,int x,int len)\n{\n\tint l=0,r=len-1,mid,cnt=0,w;\n\twhile(l<r)\n\t{\n\t\tcnt++;\n\t\tw=rand()%2;\n\t\tmid=(l+r+w)/2;\n\t\tif(num[mid]-w<x) l=mid+!w;\n\t\telse r=mid-w;\n\t}\n\treturn mid;\n}\n```\n递归：\n```\nint cnt;\nint get(int *num,int x,int l,int r)\n{\n\tif(l==r) return l;\n\tcnt++;\n\tint w=rand()%2;\n\tint mid=(l+r+w)/2;\n\tif(num[mid]-w<x) return get(num,x,mid+!w,r);\n\telse return get(num,x,l,mid-w);\n}\nint find(int *num,int x,int len)\n{\n\tcnt=0;\n\treturn get(num,x,0,len-1);\n}\n```\n注：以上两代码完全等价。", "inputFormat": "第一行给出一个整数 $n$ 表示序列长度。\n\n第二行两个整数 $q$，$q_2$ 表示询问的次数，其中 $q$ 表示输入的询问次数，$q_2$ 表示由数据生成器生成的询问次数。\n\n接下来一行 $q$ 个整数表示需要查询的数字。\n\n接下来由数据生成器给出 $q_2$ 个询问（无需读入）。", "outputFormat": "在总共的 $q+q_2$ 次询问中，记第 $i$ \n次询问的答案为 $ans_i$。\n\n请你输出一个整数 $\\sum\\limits_{i=1}^{q+q_2}i\\times ans_i$ 来表示答案。", "hint": "### 样例 1 解释\n\n还原后的输出：$3\\  3\\  3$。\n\n找 $2$：\n\n取 $[1,5]$。\n\n取 $[1,3]$。\n\n取 $[3,3]$（退出循环）。\n\n### 样例 2 解释\n\n还原后的输出：$3\\ 4\\ 3\\  3\\  4$。\n\n#### 数据生成器\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ull unsigned long long\null sd = 111111111111111111ull, sd2, k = 1;\null qu, n, ans;//qu表示每次询问的位置。 \ninline ull get_q(int i)\n{\n\tsd = (sd2 ^ (sd2 >> 3)) + 998244353;\n\treturn ((sd2 = sd ^ (sd << 37)) & k) + ((i & 1) ? 0 : (n - k - 1));\n}\nint q, q2;\nvoid init()\n{\n\t//Put your code here or not.\n}\ninline ull get_ans(ull x)\n{\n\t//Put your code here.\n}\nint main()\n{\n\tcin >> n;\n\tsd2 = n;\n\twhile((k << 1) <= n + 1) k <<= 1;\n\tk -= 1;\n\tcin >> q >> q2;\n\tinit();\n\tfor(int i = 1; i <= q; i++)\n\t{\n\t\tcin >> qu;\n\t\tans += get_ans(qu) * i;\n\t}\n\tfor(int i = 1; i <= q2; i++)\n\t{\n\t\tqu = get_q(i);\n\t\tans += get_ans(qu) * (i + q);\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n\n### 数据范围及约定\n\n此题不进行捆绑测试，分数为各点分数之和。数据存在梯度，如下表所示。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{ExTest} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 5 & n,q_2 \\le 2^{20}\\cr\\hline\n2 & 5 & n \\le 2^{30},q_2 \\le 2\\times 10^6 \\cr\\hline\n3 & 5 & n \\le 2^{40},q_2 \\le 5 \\times 10^6 \\cr\\hline\n4 & 5 &  n \\le 2^{50},q_2 \\le  2\\times 10^7 \\cr\\hline\n5 & 5 &  n \\le 2^{60},q_2 \\le 2\\times 10^8 \\cr\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1 \\le n \\le 2^{60}$，$1 \\le q+q_2 \\le n$，$q \\le 2^{20}$，$q_2 \\le 2 \\times 10^8$。\n\n本题保证时限是 std 的两倍以上且使用给出的模板可以通过此题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HGOI-1」Binary search Ex", "background": "此题为 [div.2 B](https://www.luogu.com.cn/problem/P8481) 的 extra sub，并非完整的题，总分为 $25$ 分（进入主题库后满分为 $100$ 分）。\n\n$\\text{bh1234666}$ 正在学习[二分查找](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/10628618?fr=aladdin)。", "description": "众所周知二分查找的 $\\text{mid}$ 在计算时可以取 $\\lfloor\\dfrac{l+r}{2}\\rfloor$ 或者 $\\lceil\\dfrac{l+r}{2}\\rceil$,于是有选择困难症的 $\\text{bh1234666}$ 同学在自己的二分查找代码中加入了随机化，每次随机选取其中的一个作为 $\\textit{mid}$。\n\n现在 $\\text{bh1234666}$ 告诉你了他要找的数在序列内的下标（从 $0$ 开始，可以理解为在一个 $0\\sim n-1$ 的升序序列内查询询问的数），他想知道在运气最好的情况下循环需要进行几次（即代码中 $\\textit{cnt}$ 的可能的最终值的最小值）。\n\n循环：\n```cpp\nint find(int *num,int x,int len)\n{\n\tint l=0,r=len-1,mid,cnt=0,w;\n\twhile(l<r)\n\t{\n\t\tcnt++;\n\t\tw=rand()%2;\n\t\tmid=(l+r+w)/2;\n\t\tif(num[mid]-w<x) l=mid+!w;\n\t\telse r=mid-w;\n\t}\n\treturn mid;\n}\n```\n递归：\n```\nint cnt;\nint get(int *num,int x,int l,int r)\n{\n\tif(l==r) return l;\n\tcnt++;\n\tint w=rand()%2;\n\tint mid=(l+r+w)/2;\n\tif(num[mid]-w<x) return get(num,x,mid+!w,r);\n\telse return get(num,x,l,mid-w);\n}\nint find(int *num,int x,int len)\n{\n\tcnt=0;\n\treturn get(num,x,0,len-1);\n}\n```\n注：以上两代码完全等价。", "inputFormat": "第一行给出一个整数 $n$ 表示序列长度。\n\n第二行两个整数 $q$，$q_2$ 表示询问的次数，其中 $q$ 表示输入的询问次数，$q_2$ 表示由数据生成器生成的询问次数。\n\n接下来一行 $q$ 个整数表示需要查询的数字。\n\n接下来由数据生成器给出 $q_2$ 个询问（无需读入）。", "outputFormat": "在总共的 $q+q_2$ 次询问中，记第 $i$ \n次询问的答案为 $ans_i$。\n\n请你输出一个整数 $\\sum\\limits_{i=1}^{q+q_2}i\\times ans_i$ 来表示答案。", "hint": "### 样例 1 解释\n\n还原后的输出：$3\\  3\\  3$。\n\n找 $2$：\n\n取 $[1,5]$。\n\n取 $[1,3]$。\n\n取 $[3,3]$（退出循环）。\n\n### 样例 2 解释\n\n还原后的输出：$3\\ 4\\ 3\\  3\\  4$。\n\n#### 数据生成器\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ull unsigned long long\null sd = 111111111111111111ull, sd2, k = 1;\null qu, n, ans;//qu表示每次询问的位置。 \ninline ull get_q(int i)\n{\n\tsd = (sd2 ^ (sd2 >> 3)) + 998244353;\n\treturn ((sd2 = sd ^ (sd << 37)) & k) + ((i & 1) ? 0 : (n - k - 1));\n}\nint q, q2;\nvoid init()\n{\n\t//Put your code here or not.\n}\ninline ull get_ans(ull x)\n{\n\t//Put your code here.\n}\nint main()\n{\n\tcin >> n;\n\tsd2 = n;\n\twhile((k << 1) <= n + 1) k <<= 1;\n\tk -= 1;\n\tcin >> q >> q2;\n\tinit();\n\tfor(int i = 1; i <= q; i++)\n\t{\n\t\tcin >> qu;\n\t\tans += get_ans(qu) * i;\n\t}\n\tfor(int i = 1; i <= q2; i++)\n\t{\n\t\tqu = get_q(i);\n\t\tans += get_ans(qu) * (i + q);\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n\n### 数据范围及约定\n\n此题不进行捆绑测试，分数为各点分数之和。数据存在梯度，如下表所示。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{ExTest} & \\textbf{Score} & \\textbf{特殊限制} \\cr\\hline\n1 & 5 & n,q_2 \\le 2^{20}\\cr\\hline\n2 & 5 & n \\le 2^{30},q_2 \\le 2\\times 10^6 \\cr\\hline\n3 & 5 & n \\le 2^{40},q_2 \\le 5 \\times 10^6 \\cr\\hline\n4 & 5 &  n \\le 2^{50},q_2 \\le  2\\times 10^7 \\cr\\hline\n5 & 5 &  n \\le 2^{60},q_2 \\le 2\\times 10^8 \\cr\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1 \\le n \\le 2^{60}$，$1 \\le q+q_2 \\le n$，$q \\le 2^{20}$，$q_2 \\le 2 \\times 10^8$。\n\n本题保证时限是 std 的两倍以上且使用给出的模板可以通过此题。", "locale": "zh-CN"}}}
{"pid": "P8488", "type": "P", "difficulty": 4, "samples": [["5 5\n2 8 15 1 10\n5 19 19 3 5\n6 6 2 8 2\n12 16 3 8 17\n12 5 3 14 13\n1 1 1 1 1 1\n", "97"], ["2 5\n2 8 15 3 10\n5 19 19 3 5\n1 2 3 4 5 6", "194"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-(-1)」恋弹者们的黑集市", "background": "> 天弓千亦有言：「能力卡终将大势所趋归于陈腐，集市终将回归日常，这是发展规律。」但不知为何和神明所说相悖，卡片的价值遭到了炒作。有人在炒作卡的价值吗废话？又或者说，有倒爷在囤积这些卡片吗？卡片市场秩序完全陷入混乱之时，即便是神明也无法介入的集市，就此出现。\n\n$$\\quad\\tag*{\\small\\textit{---TH18.5 恋弹者们的黑集市}}$$\n\n魔理沙正在调查妖怪之山的高地，来收集逸散在各地的能力卡片。就在此时，她遇到了住在此处的驹草山如。\n\n在河童与天狗间游刃有余的驹草山如，掌握着此地大量的资源。显而易见的，她掌握着大量的能力卡片——这正是魔理沙探访的目标。\n\n「想要这些卡片吗，那就让我们玩一个游戏吧」\n\n「赢了，这些卡片就都归你；输了，你可要交出身上所有的卡片。」\n\n", "description": "### 原始题意\n\n\n\n驹草山如将一个六面写满权值的骰子放在了棋盘上。棋盘上花花绿绿写着很多数字。第 $i$ 行第 $j$ 列写有数字 $a_{i-1,j-1}$。\n\n「你能否获得这些能力卡片，取决于你获得的分数。」\n\n魔理沙有两种方法移动这个骰子：将骰子向下一列**翻转**，或者向下一行**翻转**。值得注意的是，翻转骰子后，骰子每面上的数字就会随着翻滚而改变。现在魔理沙需要将骰子滚动至第 $n$ 行第 $m$ 列。\n\n魔理沙的分数被定义为，所有时刻，骰子与棋盘上的数字接触的那一面的数字，乘上棋盘上该数字，再累加起来的和。只有魔理沙最大化这个和，她才能获取她所需要的卡片。\n\n你能帮帮魔理沙吗？\n\n### 简要题意\n\n有一个 $n\\times m$ 大小的棋盘，第 $i$ 行第 $j$ 列写有数字 $a_{i-1,j-1}$。\n\n现在有一个骰子，六个面按照前、后、左、右、上、下的顺序，依次写有数字 $w_0,w_1,w_2,w_3,w_4,w_5$。现在骰子摆放在 $(0,0)$ 位置，需要将它**滚动**至 $(n-1,m-1)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2l378eln.png)\n\n骰子只有两种方式滚动：向下一行翻滚、向下一列翻滚。我们记一种方案的权值为，整个过程中（包括骰子在起点和终点时），骰子**最底面**上写着的数字，与此时骰子所在格子上写着的数字的乘积之和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4jwvxax5.png)\n\n（为了方便读者阅读，骰子上的数字已经隐去）\n\n现在你需要最大化这个乘积之和。", "inputFormat": "- 第一行有两个正整数 $n, m$，表示棋盘的大小。\n- 接下来 $n$ 行 $m$ 列描述棋盘内元素的值 $a_{i,j}$。\n- 接下来一行有六个整数，分别表示 $w_0,w_1,w_2,w_3,w_4,w_5$。", "outputFormat": "- 输出共一行一个整数，表示可以获得的最大权值。", "hint": "### 样例解释\n\n#### 样例 1 解释\n\n一种最优的方案为，$(0,0)\\to(0,1)\\to(1,1)\\to(1,2)\\to(1,3)\\to(2,3)\\to(3,3)\\to(3,4)\\to(4,4)$。\n\n总权值为 $2+8+19+19+3+8+8+17+13=97$。\n\n#### 样例 2 解释\n\n一种最优的方案为，$(0,0)\\to(0,1)\\to(1,1)\\to(1,2)\\to(1,3)\\to(1,4)$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,m\\le} & \\textbf{特殊性质} & \\textbf{分值} \\\\\\hline\n1 & 10 & - & 10 \\\\\\hline\n2 & 100 & - & 30 \\\\\\hline\n3 & 10^3 & \\textbf{A} & 10 \\\\\\hline\n4 & 10^3 & - & 50 \\\\\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $w_i=1,i=0,1,2,\\cdots 5$。\n\n对于全部数据，保证 $1\\le n,m\\le 10^3$，$|a_i|\\le 10^3$，$|w_i|\\le 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-(-1)」恋弹者们的黑集市", "background": "> 天弓千亦有言：「能力卡终将大势所趋归于陈腐，集市终将回归日常，这是发展规律。」但不知为何和神明所说相悖，卡片的价值遭到了炒作。有人在炒作卡的价值吗废话？又或者说，有倒爷在囤积这些卡片吗？卡片市场秩序完全陷入混乱之时，即便是神明也无法介入的集市，就此出现。\n\n$$\\quad\\tag*{\\small\\textit{---TH18.5 恋弹者们的黑集市}}$$\n\n魔理沙正在调查妖怪之山的高地，来收集逸散在各地的能力卡片。就在此时，她遇到了住在此处的驹草山如。\n\n在河童与天狗间游刃有余的驹草山如，掌握着此地大量的资源。显而易见的，她掌握着大量的能力卡片——这正是魔理沙探访的目标。\n\n「想要这些卡片吗，那就让我们玩一个游戏吧」\n\n「赢了，这些卡片就都归你；输了，你可要交出身上所有的卡片。」\n\n", "description": "### 原始题意\n\n\n\n驹草山如将一个六面写满权值的骰子放在了棋盘上。棋盘上花花绿绿写着很多数字。第 $i$ 行第 $j$ 列写有数字 $a_{i-1,j-1}$。\n\n「你能否获得这些能力卡片，取决于你获得的分数。」\n\n魔理沙有两种方法移动这个骰子：将骰子向下一列**翻转**，或者向下一行**翻转**。值得注意的是，翻转骰子后，骰子每面上的数字就会随着翻滚而改变。现在魔理沙需要将骰子滚动至第 $n$ 行第 $m$ 列。\n\n魔理沙的分数被定义为，所有时刻，骰子与棋盘上的数字接触的那一面的数字，乘上棋盘上该数字，再累加起来的和。只有魔理沙最大化这个和，她才能获取她所需要的卡片。\n\n你能帮帮魔理沙吗？\n\n### 简要题意\n\n有一个 $n\\times m$ 大小的棋盘，第 $i$ 行第 $j$ 列写有数字 $a_{i-1,j-1}$。\n\n现在有一个骰子，六个面按照前、后、左、右、上、下的顺序，依次写有数字 $w_0,w_1,w_2,w_3,w_4,w_5$。现在骰子摆放在 $(0,0)$ 位置，需要将它**滚动**至 $(n-1,m-1)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2l378eln.png)\n\n骰子只有两种方式滚动：向下一行翻滚、向下一列翻滚。我们记一种方案的权值为，整个过程中（包括骰子在起点和终点时），骰子**最底面**上写着的数字，与此时骰子所在格子上写着的数字的乘积之和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4jwvxax5.png)\n\n（为了方便读者阅读，骰子上的数字已经隐去）\n\n现在你需要最大化这个乘积之和。", "inputFormat": "- 第一行有两个正整数 $n, m$，表示棋盘的大小。\n- 接下来 $n$ 行 $m$ 列描述棋盘内元素的值 $a_{i,j}$。\n- 接下来一行有六个整数，分别表示 $w_0,w_1,w_2,w_3,w_4,w_5$。", "outputFormat": "- 输出共一行一个整数，表示可以获得的最大权值。", "hint": "### 样例解释\n\n#### 样例 1 解释\n\n一种最优的方案为，$(0,0)\\to(0,1)\\to(1,1)\\to(1,2)\\to(1,3)\\to(2,3)\\to(3,3)\\to(3,4)\\to(4,4)$。\n\n总权值为 $2+8+19+19+3+8+8+17+13=97$。\n\n#### 样例 2 解释\n\n一种最优的方案为，$(0,0)\\to(0,1)\\to(1,1)\\to(1,2)\\to(1,3)\\to(1,4)$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,m\\le} & \\textbf{特殊性质} & \\textbf{分值} \\\\\\hline\n1 & 10 & - & 10 \\\\\\hline\n2 & 100 & - & 30 \\\\\\hline\n3 & 10^3 & \\textbf{A} & 10 \\\\\\hline\n4 & 10^3 & - & 50 \\\\\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $w_i=1,i=0,1,2,\\cdots 5$。\n\n对于全部数据，保证 $1\\le n,m\\le 10^3$，$|a_i|\\le 10^3$，$|w_i|\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P8490", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["动态规划 DP", "2022", "IOI", "交互题", "动态规划优化", "前缀和", "Ad-hoc"], "title": "[IOI 2022] 鲶鱼塘", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。", "description": "Bu Dengklek 有一个鲶鱼塘。这个鲶鱼塘是由 $N \\times N$ 个网格单元构成的池塘。每个单元都是相同大小的正方形。网格各列自西向东编号为从 $0$ 到 $N - 1$，各行自南向北编号为从 $0$ 到 $N - 1$。我们把坐落在网格第 $c$ 列第 $r$ 行处（$0 \\le c \\le N - 1$，$0 \\le r \\le N - 1$）的单元记为单元 $(c, r)$。\n\n池塘里总共有 $M$ 条鲶鱼，编号为从 $0$ 到 $M - 1$，分别位于**不同的**单元中。对每个满足 $0 \\le i \\le M - 1$ 的 $i$，鲶鱼 $i$ 在单元 $(X_i, Y_i)$ 中，其重量为 $W_i$ 克。\n\nBu Dengklek 想造些长堤来抓鲶鱼。在第 $c$ 列中长度为 $k$ 的长堤（对于所有 $0 \\le c \\le N - 1$ 和 $1 \\le k \\le N$），是一个从第 $0$ 行跨到第 $k - 1$ 行的矩形，盖住单元 $(c, 0), (c, 1), \\ldots, (c, k - 1)$。对于每一列，Bu Dengklek 可以按照她自己选择的某个长度造长堤，也可以不造。\n\n鲶鱼 $i$（对所有满足 $0 \\le i \\le M - 1$ 的 $i$）能被抓住，如果有某个长堤紧邻它的西侧或东侧，而且没有长堤盖住它所在的单元；也就是说，如果\n* 单元 $(X_i - 1, Y_i)$ 或 $(X_i + 1, Y_i)$ 中 **至少有一个** 被某个长堤盖住，而且\n* 没有长堤盖住单元 $(X_i, Y_i)$。\n\n例如，考虑尺寸为 $N = 5$，有 $M = 4$ 条鲶鱼的池塘：\n\n* 鲶鱼 $0$ 在单元 $(0, 2)$ 中，重量为 $5$ 克。\n* 鲶鱼 $1$ 在单元 $(1, 1)$ 中，重量为 $2$ 克。\n* 鲶鱼 $2$ 在单元 $(4, 4)$ 中，重量为 $1$ 克。\n* 鲶鱼 $3$ 在单元 $(3, 3)$ 中，重量为 $3$ 克。\n\nBu Dengklek 可以这样来造长堤：\n\n| 造长堤前 | 造长堤后 |\n| :---: | :---: |\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/2rcnqc7k.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/yesaiovt.png) |\n\n单元中的数字表示该单元中鲶鱼的重量。\n阴影单元被长堤盖住。\n在该场景中，鲶鱼 $0$（在单元 $(0, 2)$ 中）和鲶鱼 $3$（在单元 $(3, 3)$ 中）能被抓住。\n鲶鱼 $1$（在单元 $(1, 1)$ 中）没被抓住，因为有一个长堤盖住了它所在的单元；鲶鱼 $2$（在单元 $(4, 4)$ 中）没被抓住，因为没有长堤紧邻它的西侧或东侧。\n\nBu Dengklek 希望造出来的长堤能让被抓住的鲶鱼的总重量尽量大。\n你的任务是求出 Bu Dengklek 通过造长堤能抓住的鲶鱼的最大总重量。", "inputFormat": "你需要实现下面的函数：\n\n```go\nint64 max_weights(int N, int M, int[] X, int[] Y, int[] W)\n```\n\n* $N$：池塘的尺寸。\n* $M$：鲶鱼的数量。\n* $X$, $Y$：长度为 $M$ 的两个数组，给出鲶鱼的位置。\n* $W$：长度为 $M$ 的数组，给出鲶鱼的重量。\n* 该函数需要返回一个整数，表示 Bu Dengklek 通过造长堤能抓住的鲶鱼的最大总重量。\n* 该函数将被恰好调用一次。", "outputFormat": "考虑如下调用：\n\n```go\nmax_weights(5, 4, [0, 1, 4, 3], [2, 1, 4, 3], [5, 2, 1, 3])\n```\n\n该例子的解释请见前面的题面。\n\n在造完所述的长堤后，Bu Dengklek 能抓住鲶鱼 $0$ 和 $3$，其总重量为 $5 + 3 = 8$ 克。\n因为无法造出能够抓住总重量超过  $8$ 克的鲶鱼的长堤，函数应当返回 $8$。", "hint": "### 约束条件\n\n* $2 \\le N \\le 100\\;000$\n* $1 \\le M \\le 300\\;000$\n* $0 \\le X_i \\le N - 1$，$0 \\le Y_i \\le N - 1$（对所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n* $1 \\le W_i \\le 10^9$（对所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n* 任意两条鲶鱼都不会在同一单元中。\n  换句话说，$X_i \\neq X[j]$ 或 $Y_i \\neq Y[j]$（对于所有满足 $0 \\le i \\lt j \\le M - 1$ 的 $i$ 和 $j$）。\n\n### 子任务\n\n1. （3 分） $X_i$ 是偶数（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （6 分） $X_i \\le 1$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （9 分） $Y_i = 0$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （14 分） $N \\le 300$，$Y_i \\le 8$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （21 分） $N \\le 300$\n1. （17 分） $N \\le 3000$\n1. （14 分） 在每列中至多有 $2$ 条鲶鱼。\n1. （16 分） 没有额外限制。\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n* 第 $1$ 行：$N \\; M$\n* 第 $2 + i$ 行（$0 \\le i \\le M - 1$）：$X_i \\; Y_i \\; W_i$\n\n评测程序示例将按照如下格式打印你的答案：\n\n* 第 $1$ 行：`max_weights` 的返回值\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`int`、`int64`、`int[]`（数组）和 `int[][]`（数组的数组）。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `int` | `int64`     | `int[]`            |\n| ------- | ----- | ----------- | ------------------ |\n| `void ` | `int` | `long long` | `std::vector<int>` |\n\n| `int[][]`                       | 数组 `a` 的长度 |\n| ------------------------------- | ------------------- |\n| `std::vector<std::vector<int>>` | `a.size()`          |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2022] 鲶鱼塘", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。", "description": "Bu Dengklek 有一个鲶鱼塘。这个鲶鱼塘是由 $N \\times N$ 个网格单元构成的池塘。每个单元都是相同大小的正方形。网格各列自西向东编号为从 $0$ 到 $N - 1$，各行自南向北编号为从 $0$ 到 $N - 1$。我们把坐落在网格第 $c$ 列第 $r$ 行处（$0 \\le c \\le N - 1$，$0 \\le r \\le N - 1$）的单元记为单元 $(c, r)$。\n\n池塘里总共有 $M$ 条鲶鱼，编号为从 $0$ 到 $M - 1$，分别位于**不同的**单元中。对每个满足 $0 \\le i \\le M - 1$ 的 $i$，鲶鱼 $i$ 在单元 $(X_i, Y_i)$ 中，其重量为 $W_i$ 克。\n\nBu Dengklek 想造些长堤来抓鲶鱼。在第 $c$ 列中长度为 $k$ 的长堤（对于所有 $0 \\le c \\le N - 1$ 和 $1 \\le k \\le N$），是一个从第 $0$ 行跨到第 $k - 1$ 行的矩形，盖住单元 $(c, 0), (c, 1), \\ldots, (c, k - 1)$。对于每一列，Bu Dengklek 可以按照她自己选择的某个长度造长堤，也可以不造。\n\n鲶鱼 $i$（对所有满足 $0 \\le i \\le M - 1$ 的 $i$）能被抓住，如果有某个长堤紧邻它的西侧或东侧，而且没有长堤盖住它所在的单元；也就是说，如果\n* 单元 $(X_i - 1, Y_i)$ 或 $(X_i + 1, Y_i)$ 中 **至少有一个** 被某个长堤盖住，而且\n* 没有长堤盖住单元 $(X_i, Y_i)$。\n\n例如，考虑尺寸为 $N = 5$，有 $M = 4$ 条鲶鱼的池塘：\n\n* 鲶鱼 $0$ 在单元 $(0, 2)$ 中，重量为 $5$ 克。\n* 鲶鱼 $1$ 在单元 $(1, 1)$ 中，重量为 $2$ 克。\n* 鲶鱼 $2$ 在单元 $(4, 4)$ 中，重量为 $1$ 克。\n* 鲶鱼 $3$ 在单元 $(3, 3)$ 中，重量为 $3$ 克。\n\nBu Dengklek 可以这样来造长堤：\n\n| 造长堤前 | 造长堤后 |\n| :---: | :---: |\n| ![](https://cdn.luogu.com.cn/upload/image_hosting/2rcnqc7k.png) | ![](https://cdn.luogu.com.cn/upload/image_hosting/yesaiovt.png) |\n\n单元中的数字表示该单元中鲶鱼的重量。\n阴影单元被长堤盖住。\n在该场景中，鲶鱼 $0$（在单元 $(0, 2)$ 中）和鲶鱼 $3$（在单元 $(3, 3)$ 中）能被抓住。\n鲶鱼 $1$（在单元 $(1, 1)$ 中）没被抓住，因为有一个长堤盖住了它所在的单元；鲶鱼 $2$（在单元 $(4, 4)$ 中）没被抓住，因为没有长堤紧邻它的西侧或东侧。\n\nBu Dengklek 希望造出来的长堤能让被抓住的鲶鱼的总重量尽量大。\n你的任务是求出 Bu Dengklek 通过造长堤能抓住的鲶鱼的最大总重量。", "inputFormat": "你需要实现下面的函数：\n\n```go\nint64 max_weights(int N, int M, int[] X, int[] Y, int[] W)\n```\n\n* $N$：池塘的尺寸。\n* $M$：鲶鱼的数量。\n* $X$, $Y$：长度为 $M$ 的两个数组，给出鲶鱼的位置。\n* $W$：长度为 $M$ 的数组，给出鲶鱼的重量。\n* 该函数需要返回一个整数，表示 Bu Dengklek 通过造长堤能抓住的鲶鱼的最大总重量。\n* 该函数将被恰好调用一次。", "outputFormat": "考虑如下调用：\n\n```go\nmax_weights(5, 4, [0, 1, 4, 3], [2, 1, 4, 3], [5, 2, 1, 3])\n```\n\n该例子的解释请见前面的题面。\n\n在造完所述的长堤后，Bu Dengklek 能抓住鲶鱼 $0$ 和 $3$，其总重量为 $5 + 3 = 8$ 克。\n因为无法造出能够抓住总重量超过  $8$ 克的鲶鱼的长堤，函数应当返回 $8$。", "hint": "### 约束条件\n\n* $2 \\le N \\le 100\\;000$\n* $1 \\le M \\le 300\\;000$\n* $0 \\le X_i \\le N - 1$，$0 \\le Y_i \\le N - 1$（对所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n* $1 \\le W_i \\le 10^9$（对所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n* 任意两条鲶鱼都不会在同一单元中。\n  换句话说，$X_i \\neq X[j]$ 或 $Y_i \\neq Y[j]$（对于所有满足 $0 \\le i \\lt j \\le M - 1$ 的 $i$ 和 $j$）。\n\n### 子任务\n\n1. （3 分） $X_i$ 是偶数（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （6 分） $X_i \\le 1$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （9 分） $Y_i = 0$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （14 分） $N \\le 300$，$Y_i \\le 8$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）\n1. （21 分） $N \\le 300$\n1. （17 分） $N \\le 3000$\n1. （14 分） 在每列中至多有 $2$ 条鲶鱼。\n1. （16 分） 没有额外限制。\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n* 第 $1$ 行：$N \\; M$\n* 第 $2 + i$ 行（$0 \\le i \\le M - 1$）：$X_i \\; Y_i \\; W_i$\n\n评测程序示例将按照如下格式打印你的答案：\n\n* 第 $1$ 行：`max_weights` 的返回值\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`int`、`int64`、`int[]`（数组）和 `int[][]`（数组的数组）。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `int` | `int64`     | `int[]`            |\n| ------- | ----- | ----------- | ------------------ |\n| `void ` | `int` | `long long` | `std::vector<int>` |\n\n| `int[][]`                       | 数组 `a` 的长度 |\n| ------------------------------- | ------------------- |\n| `std::vector<std::vector<int>>` | `a.size()`          |\n", "locale": "zh-CN"}}}
{"pid": "P8491", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "IOI", "交互题", "Special Judge", "进制", "构造", "Ad-hoc"], "title": "[IOI 2022] 囚徒挑战", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。", "description": "一个监狱里关着 $500$ 名囚徒。\n有一天，监狱长给了他们一个重获自由的机会。\n他把装钱的两个袋子 A 和 B 放在一个房间里。\n每个袋子装有若干枚硬币，数量的范围在 $1$ 到 $N$ 之间（包含 $1$ 和 $N$）。\n两个袋子里硬币的数量**不同**。\n监狱长给囚徒们提出了挑战，目标是指出硬币数量较少的那个袋子。\n\n房间里除了袋子还有一块白板。\n任意时刻白板上写着一个数，一开始写的是 $0$。\n\n监狱长让囚徒一个接一个地进入房间。\n每个进入房间的囚徒不知道他之前进入过房间的囚徒有多少人，也不知道是哪些人。\n每次一个囚徒进入房间时，他看一眼白板上目前写的这个数。\n看完之后，他必须在袋子 A 和 B 之间做出选择。\n接着，他**检查**自己选的那个袋子，知道了里面有多少枚硬币。\n然后，这名囚徒必须选择做以下两种**行动**之一：\n\n* 将白板上的数改写成一个非负整数，并离开房间。\n注意他可以改变成新的数，也可以保留当前的数。\n然后挑战继续进行（除非所有 $500$ 名囚徒都已经进过房间）。\n* 指出硬币数量较少的那个袋子。这会立即结束挑战。\n\n对于已经进过房间的囚徒，监狱长不会让他再次进入房间。\n\n如果某个囚徒正确地指出硬币较少的袋子，则囚徒们获得挑战的胜利。\n如果指出的袋子不正确，或者所有 $500$ 人进过房间之后还没有人尝试指出硬币较少的袋子，则囚徒们失败。\n\n挑战开始之前，囚徒们集合在监狱大厅商量应对挑战的共同**策略**，分以下三个步骤：\n* 他们挑选一个非负整数 $x$，作为他们可能会写在白板上的最大的数。\n* 他们决定对任意一个数 $i$ ($0 \\le i \\le x$)，如果某个囚徒进入房间后看到白板上写着数 $i$，那么他应该去检查哪个袋子。\n* 他们决定当某个囚徒得知选中的袋子里的硬币数量后要采取的行动。具体来说，对任意写在白板上的数 $i$ ($0 \\le i \\le x$) 和检查选中的袋子里的硬币数量 $j$ ($1 \\le j \\le N$)，他们要决定做出以下两种行动之一：\n  - 白板上应该要写一个 $0$ 到 $x$ 之间（包含 $0$ 和 $x$）的什么数；\n  - 指出哪个袋子是硬币较少的。\n\n如果赢得挑战，监狱长会在囚徒们继续服刑 $x$ 天后释放他们。\n\n你的任务是提出能够确保囚徒们赢得挑战的策略（不管袋子 A 和 B 中的硬币数量是多少）。\n你的得分取决于 $x$ 的值（详见子任务一节）。", "inputFormat": "你要实现以下函数：\n\n```go\nint[][] devise_strategy(int N)\n```\n\n- $N$：每个袋子里硬币最多可能的数量。\n- 该函数需要返回一个数组 $s$，它的每个元素是长度为 $N + 1$ 的整数数组，表示你给出的策略。$x$ 的值是数组 $s$ 的长度减一。对满足 $0 \\le i \\le x$ 的每个 $i$，数组 $s_i$ 表示囚徒在进入房间看到白板上写着数 $i$ 时要做的事情：\n  1. 如果囚徒应该检查袋子 A，则 $s_{i, 0}$ 的值是 $0$；如果囚徒应该检查袋子 B，则该值是 $1$。\n  2. 令 $j$ 为所选袋子中的硬币数量，囚徒应该进行以下行动：\n     - 如果 $s_{i, j}$ 的值是 $-1$，则囚徒应该指出袋子 A 是硬币较少的袋子。\n     - 如果 $s_{i, j}$ 的值是 $-2$，则囚徒应该指出袋子 B 是硬币较少的袋子。\n     - 如果 $s_{i, j}$ 的值是非负整数，则囚徒应该把这个数写到白板上。注意 $s_{i, j}$ 至多只能是 $x$。\n- 该函数恰好被调用一次。", "outputFormat": "考虑以下调⽤：\n\n```go\ndevise_strategy(3)\n```\n\n令 $v$ 表示囚徒进入房间时看到白板上写着的数。以下是一种正确的策略：\n\n- 如果 $v = 0$（也包括开始时的数），则检查袋子 A。\n  - 如果它装了 $1$ 个硬币，则指出袋子 A 是硬币较少的袋子。\n  - 如果它装了 $3$ 个硬币，则指出袋子 B 是硬币较少的袋子。\n  - 如果它装了 $2$ 个硬币，则在白板上写上 $1$（覆盖之前的 $0$）。\n- 如果 $v = 1$，则检查袋子 B。\n  - 如果它装了 $1$ 个硬币，则指出袋子 B 是硬币较少的袋子。\n  - 如果它装了 $3$ 个硬币，则指出袋子 A 是硬币较少的袋子。\n  - 如果它装了 $2$ 个硬币，则在白板上写上 $0$（覆盖之前的 $1$）。注意，这种情况其实不可能发生，因为此时两个袋子都装有 $2$ 枚硬币，是不允许的。\n\n要产生以上策略，函数应该返回 `[[0, -1, 1, -2], [1, -2, 0, -1]]`。\n返回的数组长度是 $2$，此时 $x$ 的值是 $2 - 1 = 1$。", "hint": "### 约束条件\n\n- $2 \\leq N \\leq 5000$。\n\n### 子任务\n\n1. （5 分）$N \\le 500$，$x$ 的值不能超过 $500$。\n1. （5 分）$N \\le 500$，$x$ 的值不能超过 $70$。\n1. （90分）$x$ 的值不能超过 $60$。\n\n对于任何测试用例，如果 `devise_strategy` 返回的数组是不合法的，则你在该子任务上的得分为 $0$。\n\n子任务 3 有部分分。\n令 $m$ 为该子任务中所有测试用例返回数组对应的 $x$ 的最大值，你的得分将根据下表计算：\n\n| 条件 | 得分 |\n| :-: | :-: |\n| $40 \\leq m \\leq 60$ | $20$ |\n| $26 \\leq m \\leq 39$ | $25 + 1.5 \\times (40 − m)$ |\n| $m = 25$ | $50$ |\n| $m = 24$ | $55$ |\n| $m = 23$ | $62$ |\n| $m = 22$ | $70$ |\n| $m = 21$ | $80$ |\n| $m \\leq 20$ | $90$ |\n\n### 评测程序示例\n\n评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$N$\n* 第 $2 + k$ 行 ($0 \\le k$)：$A_k \\; B_k$\n* 最后一行：$-1$\n\n除第一行和最后一行外，每行表示一个场景。\n将第 $2 + k$ 行对应的场景称为场景 $k$。\n场景 $k$ 中，袋子 A 装有 $A[k]$ 枚硬币，袋子 B 装有 $B[k]$ 枚硬币。\n\n评测程序示例首先调用 `devise_strategy(N)`。\n$x$ 的值是返回数组的长度减一。\n如果评测程序示例检测到 `devise_strategy` 返回的数组不符合实现细节中描述的约束，它会打印如下错误信息并退出：\n\n* `s is an empty array`：$s$ 是空的数组（表示不合法的策略）。\n* `s[i] contains incorrect length`：存在一个下标 $i$ ($0 \\le i \\le x$) 满足 $s_i$ 的长度不是 $N + 1$。\n* `First element of s[i] is non-binary`：存在一个下标 $i$ ($0 \\le i \\le x$) 满足 $s_{i,0}$ 既不是 $0$，也不是$1$。\n* `s[i][j] contains incorrect value`：存在下标 $i, j$ ($0 \\le i \\le x, 1 \\le j \\le N$) 满足 $s_{i, j}$ 的值不在 $-2$ 和 $x$ 之间。\n\n否则，评测程序示例产生两项输出内容。\n\n首先，评测程序示例以如下格式打印你的策略的输出：\n\n* 第 $1 + k$ 行 ($0 \\le k$)：场景 $k$ 下你的策略的输出。\n如果用该策略导致某个囚徒指出袋子 A 是硬币较少的，则输出字符 `A`。\n如果用该策略导致某个囚徒指出袋子 B 是硬币较少的，则输出字符 `B`。\n如果用该策略后没有囚徒指出哪个袋子的硬币较少，则输出字符 `X`。\n\n其次，评测程序示例以如下格式在当前目录下写一个文件 `log.txt`：\n\n* 第 $1 + k$ 行 ($0 \\le k$)：$w_{k,0} \\; w_{k,1} \\; \\ldots$\n\n第 $1 + k$ 行的序列对应于场景 $k$，描述了写在白板上的数。\n具体来说，$w[k][l]$ 是第 $l + 1$ 个囚徒进入房间后写的数。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`int`、`int64`、`int[]`（数组）和 `int[][]`（数组的数组）。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `int` | `int64`     | `int[]`            |\n| ------- | ----- | ----------- | ------------------ |\n| `void ` | `int` | `long long` | `std::vector<int>` |\n\n| `int[][]`                       | 数组 `a` 的长度 |\n| ------------------------------- | ------------------- |\n| `std::vector<std::vector<int>>` | `a.size()`          |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2022] 囚徒挑战", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。", "description": "一个监狱里关着 $500$ 名囚徒。\n有一天，监狱长给了他们一个重获自由的机会。\n他把装钱的两个袋子 A 和 B 放在一个房间里。\n每个袋子装有若干枚硬币，数量的范围在 $1$ 到 $N$ 之间（包含 $1$ 和 $N$）。\n两个袋子里硬币的数量**不同**。\n监狱长给囚徒们提出了挑战，目标是指出硬币数量较少的那个袋子。\n\n房间里除了袋子还有一块白板。\n任意时刻白板上写着一个数，一开始写的是 $0$。\n\n监狱长让囚徒一个接一个地进入房间。\n每个进入房间的囚徒不知道他之前进入过房间的囚徒有多少人，也不知道是哪些人。\n每次一个囚徒进入房间时，他看一眼白板上目前写的这个数。\n看完之后，他必须在袋子 A 和 B 之间做出选择。\n接着，他**检查**自己选的那个袋子，知道了里面有多少枚硬币。\n然后，这名囚徒必须选择做以下两种**行动**之一：\n\n* 将白板上的数改写成一个非负整数，并离开房间。\n注意他可以改变成新的数，也可以保留当前的数。\n然后挑战继续进行（除非所有 $500$ 名囚徒都已经进过房间）。\n* 指出硬币数量较少的那个袋子。这会立即结束挑战。\n\n对于已经进过房间的囚徒，监狱长不会让他再次进入房间。\n\n如果某个囚徒正确地指出硬币较少的袋子，则囚徒们获得挑战的胜利。\n如果指出的袋子不正确，或者所有 $500$ 人进过房间之后还没有人尝试指出硬币较少的袋子，则囚徒们失败。\n\n挑战开始之前，囚徒们集合在监狱大厅商量应对挑战的共同**策略**，分以下三个步骤：\n* 他们挑选一个非负整数 $x$，作为他们可能会写在白板上的最大的数。\n* 他们决定对任意一个数 $i$ ($0 \\le i \\le x$)，如果某个囚徒进入房间后看到白板上写着数 $i$，那么他应该去检查哪个袋子。\n* 他们决定当某个囚徒得知选中的袋子里的硬币数量后要采取的行动。具体来说，对任意写在白板上的数 $i$ ($0 \\le i \\le x$) 和检查选中的袋子里的硬币数量 $j$ ($1 \\le j \\le N$)，他们要决定做出以下两种行动之一：\n  - 白板上应该要写一个 $0$ 到 $x$ 之间（包含 $0$ 和 $x$）的什么数；\n  - 指出哪个袋子是硬币较少的。\n\n如果赢得挑战，监狱长会在囚徒们继续服刑 $x$ 天后释放他们。\n\n你的任务是提出能够确保囚徒们赢得挑战的策略（不管袋子 A 和 B 中的硬币数量是多少）。\n你的得分取决于 $x$ 的值（详见子任务一节）。", "inputFormat": "你要实现以下函数：\n\n```go\nint[][] devise_strategy(int N)\n```\n\n- $N$：每个袋子里硬币最多可能的数量。\n- 该函数需要返回一个数组 $s$，它的每个元素是长度为 $N + 1$ 的整数数组，表示你给出的策略。$x$ 的值是数组 $s$ 的长度减一。对满足 $0 \\le i \\le x$ 的每个 $i$，数组 $s_i$ 表示囚徒在进入房间看到白板上写着数 $i$ 时要做的事情：\n  1. 如果囚徒应该检查袋子 A，则 $s_{i, 0}$ 的值是 $0$；如果囚徒应该检查袋子 B，则该值是 $1$。\n  2. 令 $j$ 为所选袋子中的硬币数量，囚徒应该进行以下行动：\n     - 如果 $s_{i, j}$ 的值是 $-1$，则囚徒应该指出袋子 A 是硬币较少的袋子。\n     - 如果 $s_{i, j}$ 的值是 $-2$，则囚徒应该指出袋子 B 是硬币较少的袋子。\n     - 如果 $s_{i, j}$ 的值是非负整数，则囚徒应该把这个数写到白板上。注意 $s_{i, j}$ 至多只能是 $x$。\n- 该函数恰好被调用一次。", "outputFormat": "考虑以下调⽤：\n\n```go\ndevise_strategy(3)\n```\n\n令 $v$ 表示囚徒进入房间时看到白板上写着的数。以下是一种正确的策略：\n\n- 如果 $v = 0$（也包括开始时的数），则检查袋子 A。\n  - 如果它装了 $1$ 个硬币，则指出袋子 A 是硬币较少的袋子。\n  - 如果它装了 $3$ 个硬币，则指出袋子 B 是硬币较少的袋子。\n  - 如果它装了 $2$ 个硬币，则在白板上写上 $1$（覆盖之前的 $0$）。\n- 如果 $v = 1$，则检查袋子 B。\n  - 如果它装了 $1$ 个硬币，则指出袋子 B 是硬币较少的袋子。\n  - 如果它装了 $3$ 个硬币，则指出袋子 A 是硬币较少的袋子。\n  - 如果它装了 $2$ 个硬币，则在白板上写上 $0$（覆盖之前的 $1$）。注意，这种情况其实不可能发生，因为此时两个袋子都装有 $2$ 枚硬币，是不允许的。\n\n要产生以上策略，函数应该返回 `[[0, -1, 1, -2], [1, -2, 0, -1]]`。\n返回的数组长度是 $2$，此时 $x$ 的值是 $2 - 1 = 1$。", "hint": "### 约束条件\n\n- $2 \\leq N \\leq 5000$。\n\n### 子任务\n\n1. （5 分）$N \\le 500$，$x$ 的值不能超过 $500$。\n1. （5 分）$N \\le 500$，$x$ 的值不能超过 $70$。\n1. （90分）$x$ 的值不能超过 $60$。\n\n对于任何测试用例，如果 `devise_strategy` 返回的数组是不合法的，则你在该子任务上的得分为 $0$。\n\n子任务 3 有部分分。\n令 $m$ 为该子任务中所有测试用例返回数组对应的 $x$ 的最大值，你的得分将根据下表计算：\n\n| 条件 | 得分 |\n| :-: | :-: |\n| $40 \\leq m \\leq 60$ | $20$ |\n| $26 \\leq m \\leq 39$ | $25 + 1.5 \\times (40 − m)$ |\n| $m = 25$ | $50$ |\n| $m = 24$ | $55$ |\n| $m = 23$ | $62$ |\n| $m = 22$ | $70$ |\n| $m = 21$ | $80$ |\n| $m \\leq 20$ | $90$ |\n\n### 评测程序示例\n\n评测程序示例按以下格式读取输入：\n\n* 第 $1$ 行：$N$\n* 第 $2 + k$ 行 ($0 \\le k$)：$A_k \\; B_k$\n* 最后一行：$-1$\n\n除第一行和最后一行外，每行表示一个场景。\n将第 $2 + k$ 行对应的场景称为场景 $k$。\n场景 $k$ 中，袋子 A 装有 $A[k]$ 枚硬币，袋子 B 装有 $B[k]$ 枚硬币。\n\n评测程序示例首先调用 `devise_strategy(N)`。\n$x$ 的值是返回数组的长度减一。\n如果评测程序示例检测到 `devise_strategy` 返回的数组不符合实现细节中描述的约束，它会打印如下错误信息并退出：\n\n* `s is an empty array`：$s$ 是空的数组（表示不合法的策略）。\n* `s[i] contains incorrect length`：存在一个下标 $i$ ($0 \\le i \\le x$) 满足 $s_i$ 的长度不是 $N + 1$。\n* `First element of s[i] is non-binary`：存在一个下标 $i$ ($0 \\le i \\le x$) 满足 $s_{i,0}$ 既不是 $0$，也不是$1$。\n* `s[i][j] contains incorrect value`：存在下标 $i, j$ ($0 \\le i \\le x, 1 \\le j \\le N$) 满足 $s_{i, j}$ 的值不在 $-2$ 和 $x$ 之间。\n\n否则，评测程序示例产生两项输出内容。\n\n首先，评测程序示例以如下格式打印你的策略的输出：\n\n* 第 $1 + k$ 行 ($0 \\le k$)：场景 $k$ 下你的策略的输出。\n如果用该策略导致某个囚徒指出袋子 A 是硬币较少的，则输出字符 `A`。\n如果用该策略导致某个囚徒指出袋子 B 是硬币较少的，则输出字符 `B`。\n如果用该策略后没有囚徒指出哪个袋子的硬币较少，则输出字符 `X`。\n\n其次，评测程序示例以如下格式在当前目录下写一个文件 `log.txt`：\n\n* 第 $1 + k$ 行 ($0 \\le k$)：$w_{k,0} \\; w_{k,1} \\; \\ldots$\n\n第 $1 + k$ 行的序列对应于场景 $k$，描述了写在白板上的数。\n具体来说，$w[k][l]$ 是第 $l + 1$ 个囚徒进入房间后写的数。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`int`、`int64`、`int[]`（数组）和 `int[][]`（数组的数组）。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `int` | `int64`     | `int[]`            |\n| ------- | ----- | ----------- | ------------------ |\n| `void ` | `int` | `long long` | `std::vector<int>` |\n\n| `int[][]`                       | 数组 `a` 的长度 |\n| ------------------------------- | ------------------- |\n| `std::vector<std::vector<int>>` | `a.size()`          |\n", "locale": "zh-CN"}}}
{"pid": "P8492", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "IOI", "交互题"], "title": "[IOI 2022] 无线电信号塔", "background": "\n\n### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。", "description": "雅加达有 $N$ 个无线电信号塔。这些信号塔排布成一条直线，并且从左到右依次编号为从 $0$ 到 $N - 1$。\n对于每个满足 $0 \\le i \\le N - 1$ 的 $i$，信号塔 $i$ 的高度为 $H_i$ 米。\n所有塔的高度都是**不同的**。\n\n对于某个为正数的信号干扰参数 $\\delta$，一对信号塔 $i$ 和 $j$ ($0 \\le i \\lt j \\le N - 1$) 之间能够互相通信，当且仅当存在一个中间信号塔 $k$ 满足如下条件：\n\n* 塔 $i$ 在塔 $k$ 的左边，并且塔 $j$ 在塔 $k$ 的右边，即 $i \\lt k \\lt j$；\n* 塔 $i$ 和塔 $j$ 的高度都至多为 $H[k] - \\delta$ 米。\n\nPak Dengklek 想租一些信号塔来组建他的新无线电网络。\n你的任务是回答 Pak Dengklek 提出的 $Q$ 个询问。这些询问的形式如下：\n给定参数 $L, R$ 和 $D$ ($0 \\le L \\le R \\le N - 1$ 且 $D > 0$)，在满足下述所有条件时，Pak Dengklek 最多能够租多少个信号塔：\n\n * Pak Dengklek 只能租编号在 $L$ 和 $R$ 之间的信号塔（包括 $L$和 $R$）；\n * 信号干扰参数 $\\delta$ 的值为 $D$；\n * Pak Dengklek 租的信号塔两两之间必须能够进行通信。\n\n注意，无论中间信号塔 $k$ 是否被租，两个已租的信号塔都可以借助信号塔 $k$ 进行通信。", "inputFormat": "你需要实现以下函数：\n\n```go\nvoid init(int N, int[] H)\n```\n\n* $N$： 信号塔的数量。\n* $H$： 一个长度为 $N$ 的数组，给出信号塔的高度。\n* 这个函数恰好被调用一次，且在函数 `max_towers` 的所有调用之前。\n\n```go\nint max_towers(int L, int R, int D)\n```\n\n* $L$, $R$：信号塔编号区间的边界。\n* $D$：信号干扰参数 $\\delta$ 的值。\n* 该函数应返回 Pak Dengklek 最多能租的信号塔数量（用于组建信号网络），这里 Pak Dengklek 只能租 $L$ 和 $R$之间（包含 $L$ 和 $R$）的信号塔，且信号干扰参数 $\\delta$ 的值是 $D$。\n* 该函数将被调用恰好 $Q$ 次。", "outputFormat": "考虑如下函数调⽤序列：\n\n```go\ninit(7, [10, 20, 60, 40, 50, 30, 70])\n```\n\n```go\nmax_towers(1, 5, 10)\n```\n\nPak Dengklek 可以租编号为 $1$, $3$ 和 $5$ 的信号塔。\n下面给出了这个例子的示意图，其中的灰色梯形表示被租的信号塔。\n\n![](https://img.loj.ac.cn/2022/08/10/a52f5b077031b.png)\n\n信号塔 $3$ 和 $5$ 可以借助信号塔 $4$ 进行通信，这是因为 $40 \\le 50 - 10$ 且 $30 \\le 50 - 10$。\n信号塔 $1$ 和 $3$ 可以借助信号塔 $2$ 进行通信。\n信号塔 $1$ 和 $5$ 可以借助信号塔 $3$ 进行通信。\n无法租超过 $3$ 个信号塔，因此函数应返回 $3$。\n\n```go\nmax_towers(2, 2, 100)\n```\n\n在这个区间里只有 $1$ 个信号塔，所以 Pak Dengklek 只能租借 $1$ 个信号塔。\n因此函数应返回 $1$。\n\n```go\nmax_towers(0, 6, 17)\n```\n\nPak Dengklek 可以租信号塔$1$ 和 $3$ 。\n信号塔  $1$ 和 $3$ 可以借助信号塔 $2$进行通信，这是因为 $20 \\le 60 - 17$ 且 $40 \\le 60 - 17$。\n无法租赁超过 $2$ 个信号塔，因此函数应返回 $2$。", "hint": "### 约束条件\n\n* $1 \\le N \\le 100\\;000$\n* $1 \\le Q \\le 100\\;000$\n* $1 \\le H_i \\le 10^9$ (对于所有满足 $0 \\le i \\le N - 1$ 的 $i$ )\n* $H_i \\ne H_j$ (对于所有满足 $0 \\le i \\lt j \\le N - 1$  的 $i$ 和 $j$ )\n* $0 \\le L \\le R \\le N - 1$\n* $1 \\le D \\le 10^9$\n\n### 子任务\n\n1. (4 分) 存在一个满足下述所有条件的信号塔 $k$ ($0 \\le k \\le N - 1$) \n   * 对于 $0 \\le i \\le k - 1$ 的每个 $i$：$H_i \\lt H_{i + 1}$ \n   * 对于 $k \\le i \\le N - 2$ 的每个 $i$：$H_i \\gt H_{i + 1}$ \n2. (11 分) $Q = 1$，$N \\le 2000$\n3. (12 分) $Q = 1$\n4. (14 分) $D = 1$\n5. (17 分) $L = 0$，$R = N - 1$\n6. (19 分)  $D$ 的值在 `max_towers` 的所有调用中都是相同的\n7. (23 分) 没有额外的限制\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n* 第 $1$ 行：$N \\; Q$\n* 第 $2$ 行：$H_{0} \\; H_{1} \\; \\ldots \\; H_{N - 1}$\n* 第 $3 + j$ 行（$0 \\le j \\le Q - 1$）：$L \\; R \\; D$（对应第 $j$ 次询问）\n\n评测程序示例按照如下的格式打印你的答案：\n\n* 第 $1 + j$ 行（$0 \\le j \\le Q - 1$）：`max_towers` 对第 $j$ 次询问的返回值\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`int`、`int64`、`int[]`（数组）和 `int[][]`（数组的数组）。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `int` | `int64`     | `int[]`            |\n| ------- | ----- | ----------- | ------------------ |\n| `void ` | `int` | `long long` | `std::vector<int>` |\n\n| `int[][]`                       | 数组 `a` 的长度 |\n| ------------------------------- | ------------------- |\n| `std::vector<std::vector<int>>` | `a.size()`          |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2022] 无线电信号塔", "background": "\n\n### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。", "description": "雅加达有 $N$ 个无线电信号塔。这些信号塔排布成一条直线，并且从左到右依次编号为从 $0$ 到 $N - 1$。\n对于每个满足 $0 \\le i \\le N - 1$ 的 $i$，信号塔 $i$ 的高度为 $H_i$ 米。\n所有塔的高度都是**不同的**。\n\n对于某个为正数的信号干扰参数 $\\delta$，一对信号塔 $i$ 和 $j$ ($0 \\le i \\lt j \\le N - 1$) 之间能够互相通信，当且仅当存在一个中间信号塔 $k$ 满足如下条件：\n\n* 塔 $i$ 在塔 $k$ 的左边，并且塔 $j$ 在塔 $k$ 的右边，即 $i \\lt k \\lt j$；\n* 塔 $i$ 和塔 $j$ 的高度都至多为 $H[k] - \\delta$ 米。\n\nPak Dengklek 想租一些信号塔来组建他的新无线电网络。\n你的任务是回答 Pak Dengklek 提出的 $Q$ 个询问。这些询问的形式如下：\n给定参数 $L, R$ 和 $D$ ($0 \\le L \\le R \\le N - 1$ 且 $D > 0$)，在满足下述所有条件时，Pak Dengklek 最多能够租多少个信号塔：\n\n * Pak Dengklek 只能租编号在 $L$ 和 $R$ 之间的信号塔（包括 $L$和 $R$）；\n * 信号干扰参数 $\\delta$ 的值为 $D$；\n * Pak Dengklek 租的信号塔两两之间必须能够进行通信。\n\n注意，无论中间信号塔 $k$ 是否被租，两个已租的信号塔都可以借助信号塔 $k$ 进行通信。", "inputFormat": "你需要实现以下函数：\n\n```go\nvoid init(int N, int[] H)\n```\n\n* $N$： 信号塔的数量。\n* $H$： 一个长度为 $N$ 的数组，给出信号塔的高度。\n* 这个函数恰好被调用一次，且在函数 `max_towers` 的所有调用之前。\n\n```go\nint max_towers(int L, int R, int D)\n```\n\n* $L$, $R$：信号塔编号区间的边界。\n* $D$：信号干扰参数 $\\delta$ 的值。\n* 该函数应返回 Pak Dengklek 最多能租的信号塔数量（用于组建信号网络），这里 Pak Dengklek 只能租 $L$ 和 $R$之间（包含 $L$ 和 $R$）的信号塔，且信号干扰参数 $\\delta$ 的值是 $D$。\n* 该函数将被调用恰好 $Q$ 次。", "outputFormat": "考虑如下函数调⽤序列：\n\n```go\ninit(7, [10, 20, 60, 40, 50, 30, 70])\n```\n\n```go\nmax_towers(1, 5, 10)\n```\n\nPak Dengklek 可以租编号为 $1$, $3$ 和 $5$ 的信号塔。\n下面给出了这个例子的示意图，其中的灰色梯形表示被租的信号塔。\n\n![](https://img.loj.ac.cn/2022/08/10/a52f5b077031b.png)\n\n信号塔 $3$ 和 $5$ 可以借助信号塔 $4$ 进行通信，这是因为 $40 \\le 50 - 10$ 且 $30 \\le 50 - 10$。\n信号塔 $1$ 和 $3$ 可以借助信号塔 $2$ 进行通信。\n信号塔 $1$ 和 $5$ 可以借助信号塔 $3$ 进行通信。\n无法租超过 $3$ 个信号塔，因此函数应返回 $3$。\n\n```go\nmax_towers(2, 2, 100)\n```\n\n在这个区间里只有 $1$ 个信号塔，所以 Pak Dengklek 只能租借 $1$ 个信号塔。\n因此函数应返回 $1$。\n\n```go\nmax_towers(0, 6, 17)\n```\n\nPak Dengklek 可以租信号塔$1$ 和 $3$ 。\n信号塔  $1$ 和 $3$ 可以借助信号塔 $2$进行通信，这是因为 $20 \\le 60 - 17$ 且 $40 \\le 60 - 17$。\n无法租赁超过 $2$ 个信号塔，因此函数应返回 $2$。", "hint": "### 约束条件\n\n* $1 \\le N \\le 100\\;000$\n* $1 \\le Q \\le 100\\;000$\n* $1 \\le H_i \\le 10^9$ (对于所有满足 $0 \\le i \\le N - 1$ 的 $i$ )\n* $H_i \\ne H_j$ (对于所有满足 $0 \\le i \\lt j \\le N - 1$  的 $i$ 和 $j$ )\n* $0 \\le L \\le R \\le N - 1$\n* $1 \\le D \\le 10^9$\n\n### 子任务\n\n1. (4 分) 存在一个满足下述所有条件的信号塔 $k$ ($0 \\le k \\le N - 1$) \n   * 对于 $0 \\le i \\le k - 1$ 的每个 $i$：$H_i \\lt H_{i + 1}$ \n   * 对于 $k \\le i \\le N - 2$ 的每个 $i$：$H_i \\gt H_{i + 1}$ \n2. (11 分) $Q = 1$，$N \\le 2000$\n3. (12 分) $Q = 1$\n4. (14 分) $D = 1$\n5. (17 分) $L = 0$，$R = N - 1$\n6. (19 分)  $D$ 的值在 `max_towers` 的所有调用中都是相同的\n7. (23 分) 没有额外的限制\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n* 第 $1$ 行：$N \\; Q$\n* 第 $2$ 行：$H_{0} \\; H_{1} \\; \\ldots \\; H_{N - 1}$\n* 第 $3 + j$ 行（$0 \\le j \\le Q - 1$）：$L \\; R \\; D$（对应第 $j$ 次询问）\n\n评测程序示例按照如下的格式打印你的答案：\n\n* 第 $1 + j$ 行（$0 \\le j \\le Q - 1$）：`max_towers` 对第 $j$ 次询问的返回值\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`int`、`int64`、`int[]`（数组）和 `int[][]`（数组的数组）。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `int` | `int64`     | `int[]`            |\n| ------- | ----- | ----------- | ------------------ |\n| `void ` | `int` | `long long` | `std::vector<int>` |\n\n| `int[][]`                       | 数组 `a` 的长度 |\n| ------------------------------- | ------------------- |\n| `std::vector<std::vector<int>>` | `a.size()`          |\n", "locale": "zh-CN"}}}
{"pid": "P8493", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "IOI", "交互题", "树形 DP", "组合数学", "期望"], "title": "[IOI 2022] 数字电路", "background": "**由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。\n\n由于本题数据点过多，结合洛谷评测技术实现情况，本题将不按照题给 Subtask 评分。", "description": "有一个数字电路，由编号为从 $0$ 到 $N + M - 1$ 的 $N + M$ 个**门**组成。其中，$0$ 到 $N - 1$ 号门是**阈值门**，而 $N$ 到 $N + M - 1$ 号门是**输入门**。\n\n除 $0$ 号门之外的每个门都是恰好一个某阈值门的**输入**。具体来说，对于每个满足 $1 \\le i \\le N + M - 1$ 的 $i$，门 $i$ 是门 $P[i]$ 的一个输入，其中 $0 \\le P[i] \\le N-1$。重要的是，我们保证 $P[i] \\lt i$ 成立。此外，我们假设有 $P[0] = -1$。每个阈值门有一个或多个的输入。输入门没有任何输入。\n\n每个门都有一个**状态**，取 $0$ 或 $1$。输入门的初始状态由一个包含 $M$ 个整数的数组 $A$ 给定。也就是说，对于每个满足 $0 \\le j \\le M - 1$ 的 $j$ ，输入门 $N + j$ 的初始状态为 $A[j]$。\n\n每个阈值门的状态取决于它的输入的状态，具体如下。首先，每个阈值门会被指定一个阈值**参数**。对于一个有 $c$ 个输入的阈值门，其所指定的参数必须是 $1$ 到 $c$ 之间的某个整数（包括 $1$ 和 $c$）。随后，对于一个参数为 $p$ 的阈值门，如果它的输入中至少有 $p$ 个门的状态为 $1$，则当前阈值门的状态为 $1$，否则状态为 $0$。\n\n例如，假设有 $N = 3$ 个阈值门和 $M = 4$ 个输入门。其中，门 $0$ 的输入为门 $1$ 和门 $6$，门 $1$ 的输入为门 $2$、$4$ 和 $5$，门 $2$ 仅有的输入为门 $3$。\n\n上述例子的说明可见下图。\n\n![](https://arina.loli.net/2022/08/12/JtjqOi4HVBXeD3x.png)\n\n假设输入门 $3$ 和 $5$ 的状态为 $1$，而门 $4$ 和 $6$ 的状态为 $0$。假设阈值门 $2$、$1$、$0$ 被指定的参数分别为 $1$、$2$、$2$。在这种情况下，门 $2$ 的状态为 $1$，门 $1$ 的状态为 $1$ ，门 $0$ 的状态为 $0$。下面给出了参数赋值以及状态的示意图。状态为 $1$ 的门被标记为黑色。\n\n![](https://arina.loli.net/2022/08/12/Sdiye2vg3B1aYPu.png)\n\n输入门的状态将会经历 $Q$ 次更新。每次更新用两个整数 $L$ 和 $R$ 来描述 ($N \\le L \\le R \\le N + M - 1$) ，表示翻转所有编号在 $L$ 和 $R$ 之间（包括 $L$ 和 $R$）的输入门的状态。这就是说，对于所有满足 $L \\le i \\le R$ 的 $i$，输入门 $i$ 的状态如果为 $0$，则会被翻转为$1$；如果状态为 $1$，则会被翻转为 $0$。每个门被翻转后将会一直保持在新状态，直到在后续某次更新中被翻转。\n\n你的目标是，计算每次更新后有多少种阈值门参数的赋值方案，使得门 $0$ 的状态为 $1$。当有至少一个阈值门的参数不同时，两种参数赋值方案被认为是不同的。由于方案数可能较大，你需要计算它对 $1\\;000\\;002\\;022$ 取模的结果。\n\n注意，在上面的例子中，共有 $6$ 种不同的对阈值门参数进行赋值的方案，因为门 $0$、$1$、$2$ 分别有 $2$、$3$、$1$ 个输入。在这 $6$ 种方案里面，有 $2$ 种参数赋值方案使得门 $0$ 的状态为 $1$。", "inputFormat": "你的任务是实现下述两个函数。\n\n```go\nvoid init(int N, int M, int[] P, int[] A)\n```\n\n- $N$： 阈值门的数量。\n- $M$：输入门的数量。\n- $P$： 一个长度为 $N + M$ 的数组，给出阈值门的输入。\n- $A$： 一个长度为 $M$ 的数组，给出输入门的初始状态。\n- 这个函数被调用恰好一次，且发生在函数 `count_ways` 的所有调用之前。\n\n```go\nint count_ways(int L, int R)\n```\n\n- $L$, $R$：编号在 $L$ 和 $R$ 之间的输入门的状态将会被翻转。\n- 这个函数应首先执行所规定的更新，然后返回使得门 $0$ 的状态为 $1$ 的参数赋值方案的方案数对 $1\\;000\\;002\\;022$ 取模的结果。\n- 这个函数会被调用恰好 $Q$ 次。", "outputFormat": "考虑如下的函数调用序列：\n\n```go\ninit(3, 4, [-1, 0, 1, 2, 1, 1, 0], [1, 0, 1, 0])\n```\n\n题面描述中已经给出了对这个例子的解释。\n\n```go\ncount_ways(3, 4)\n```\n\n这次调用翻转了门 $3$ 和 $4$ 的状态，也就是说，门 $3$ 的状态变成 $0$，门 $4$ 的状态变成 $1$。下面给出了两种可行的参数赋值方案，可以使得门 $0$ 的状态为 $1$ 。\n\n|               方案 $1$                |               方案 $2$                |\n| :-----------------------------------: | :-----------------------------------: |\n| ![](https://arina.loli.net/2022/08/12/azi4xDYOKpBnge6.png) | ![](https://arina.loli.net/2022/08/12/MBPhnOFyARSEQDH.png) |\n\n在所有其他的参数赋值方案中，门 $0$ 的状态为 $0$。因此，函数应返回 $2$。\n\n```go\ncount_ways(4, 5)\n```\n\n这次调用翻转了门 $4$ 和 $5$ 的状态。其结果是，所有输入门的状态均为 $0$，而且对于所有的参数赋值方案，门 $0$ 的状态均为 $0$。因此，函数应返回 $0$。\n\n```go\ncount_ways(3, 6)\n```\n\n这次调用将所有输入门的状态置为 $1$。其结果是，对于所有参数赋值方案，门 $0$ 的状态均为 $1$。因此，函数应返回 $6$。", "hint": "### 约束条件\n\n- $1 \\le N, M \\le 10^5$；\n- $1 \\le Q \\le 10^5$；\n- $P[0] = -1$；\n- $0 \\le P[i] \\lt i$ 且 $P[i] \\le N - 1$（对于所有满足 $1 \\le i \\le N + M - 1$ 的 $i$）；\n- 每个阈值门至少有一个输入（对于所有满足 $0 \\le i \\le N - 1$ 的 $i$，存在某个下标 $x$ 满足 $i \\lt x \\le N + M - 1$ 且 $P[x] = i$）；\n- $0 \\le A[j] \\le 1$（对于所有满足 $0 \\le j \\le M - 1$的 $j$）；\n- $N \\le L \\le R \\le N + M - 1$。\n\n### 子任务\n\n1. （2 分）$N = 1$，$M \\le 1000$，$Q \\le 5$；\n2. （7 分）$N, M \\le 1000$，$Q \\le 5$，每个阈值门都有恰好两个输入；\n3. （9 分）$N, M \\le 1000$，$Q \\le 5$；\n4. （4 分）$M = N + 1$，$M = 2^z$（对于某个正整数 $z$）， $P[i] = \\lfloor\\frac{i - 1}{2}\\rfloor$（对于所有满足 $1 \\le i \\le N + M - 1$ 的 $i$），$L = R$；\n5. （12 分）$M = N + 1$，$M = 2^z$（对于某个正整数 $z$），$P[i] = \\lfloor\\frac{i - 1}{2}\\rfloor$（对于所有满足$1 \\le i \\le N + M - 1$的 $i$）；\n6. （27 分）每个阈值门都恰好有两个输入；\n7. （28 分）$N, M \\le 5000$；\n8. （11 分）没有额外的约束条件。\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n- 第 $1$ 行： $N \\; M \\; Q$；\n- 第 $2$ 行： $P[0] \\; P[1] \\; \\ldots \\; P[N + M - 1]$；\n- 第 $3$ 行： $A[0] \\; A[1] \\; \\ldots \\; A[M - 1]$；\n- 第 $4 + k$ 行（$0 \\le k \\le Q - 1$）： 第 $k$ 次更新对应的 $L \\; R$。\n\n评测程序示例按照如下格式打印你的答案：\n\n- 第 $1 + k$ 行（$0 \\le k \\le Q - 1$）： `count_ways` 函数对第 $k$ 次更新的返回值。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`bool`、`int`、`int[]`（数组）和 `union(bool, int[])`。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `bool` | `int` | `int[]`            |\n| ------- | ------ | ------| ------------------ |\n| `void ` | `bool` | `int` | `std::vector<int>` |\n\n| `union(bool, int[])`                   | 数组 `a` 的长度 |\n| -------------------------------------- | ------------------- |\n| `std::variant<bool, std::vector<int>>` | `a.size()`          |\n\nC++ 语言里，`std::variant` 定义在 `<variant>` 头文件中。\n一个返回类型为 `std::variant<bool, std::vector<int>>` 的函数可以返回一个 `bool` 或一个 `std::vector<int>`。\n以下示例代码给出了三个返回 `std::variant` 的函数，它们都能正常工作：\n\n```cpp\nstd::variant<bool, std::vector<int>> foo(int N) {\n    return N % 2 == 0;\n}\n\nstd::variant<bool, std::vector<int>> goo(int N) {\n    return std::vector<int>(N, 0);\n}\n\nstd::variant<bool, std::vector<int>> hoo(int N) {\n    if (N % 2 == 0) {\n        return false;\n    }\n\n    return std::vector<int>(N, 0);\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2022] 数字电路", "background": "**由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 main 函数。\n\n由于本题数据点过多，结合洛谷评测技术实现情况，本题将不按照题给 Subtask 评分。", "description": "有一个数字电路，由编号为从 $0$ 到 $N + M - 1$ 的 $N + M$ 个**门**组成。其中，$0$ 到 $N - 1$ 号门是**阈值门**，而 $N$ 到 $N + M - 1$ 号门是**输入门**。\n\n除 $0$ 号门之外的每个门都是恰好一个某阈值门的**输入**。具体来说，对于每个满足 $1 \\le i \\le N + M - 1$ 的 $i$，门 $i$ 是门 $P[i]$ 的一个输入，其中 $0 \\le P[i] \\le N-1$。重要的是，我们保证 $P[i] \\lt i$ 成立。此外，我们假设有 $P[0] = -1$。每个阈值门有一个或多个的输入。输入门没有任何输入。\n\n每个门都有一个**状态**，取 $0$ 或 $1$。输入门的初始状态由一个包含 $M$ 个整数的数组 $A$ 给定。也就是说，对于每个满足 $0 \\le j \\le M - 1$ 的 $j$ ，输入门 $N + j$ 的初始状态为 $A[j]$。\n\n每个阈值门的状态取决于它的输入的状态，具体如下。首先，每个阈值门会被指定一个阈值**参数**。对于一个有 $c$ 个输入的阈值门，其所指定的参数必须是 $1$ 到 $c$ 之间的某个整数（包括 $1$ 和 $c$）。随后，对于一个参数为 $p$ 的阈值门，如果它的输入中至少有 $p$ 个门的状态为 $1$，则当前阈值门的状态为 $1$，否则状态为 $0$。\n\n例如，假设有 $N = 3$ 个阈值门和 $M = 4$ 个输入门。其中，门 $0$ 的输入为门 $1$ 和门 $6$，门 $1$ 的输入为门 $2$、$4$ 和 $5$，门 $2$ 仅有的输入为门 $3$。\n\n上述例子的说明可见下图。\n\n![](https://arina.loli.net/2022/08/12/JtjqOi4HVBXeD3x.png)\n\n假设输入门 $3$ 和 $5$ 的状态为 $1$，而门 $4$ 和 $6$ 的状态为 $0$。假设阈值门 $2$、$1$、$0$ 被指定的参数分别为 $1$、$2$、$2$。在这种情况下，门 $2$ 的状态为 $1$，门 $1$ 的状态为 $1$ ，门 $0$ 的状态为 $0$。下面给出了参数赋值以及状态的示意图。状态为 $1$ 的门被标记为黑色。\n\n![](https://arina.loli.net/2022/08/12/Sdiye2vg3B1aYPu.png)\n\n输入门的状态将会经历 $Q$ 次更新。每次更新用两个整数 $L$ 和 $R$ 来描述 ($N \\le L \\le R \\le N + M - 1$) ，表示翻转所有编号在 $L$ 和 $R$ 之间（包括 $L$ 和 $R$）的输入门的状态。这就是说，对于所有满足 $L \\le i \\le R$ 的 $i$，输入门 $i$ 的状态如果为 $0$，则会被翻转为$1$；如果状态为 $1$，则会被翻转为 $0$。每个门被翻转后将会一直保持在新状态，直到在后续某次更新中被翻转。\n\n你的目标是，计算每次更新后有多少种阈值门参数的赋值方案，使得门 $0$ 的状态为 $1$。当有至少一个阈值门的参数不同时，两种参数赋值方案被认为是不同的。由于方案数可能较大，你需要计算它对 $1\\;000\\;002\\;022$ 取模的结果。\n\n注意，在上面的例子中，共有 $6$ 种不同的对阈值门参数进行赋值的方案，因为门 $0$、$1$、$2$ 分别有 $2$、$3$、$1$ 个输入。在这 $6$ 种方案里面，有 $2$ 种参数赋值方案使得门 $0$ 的状态为 $1$。", "inputFormat": "你的任务是实现下述两个函数。\n\n```go\nvoid init(int N, int M, int[] P, int[] A)\n```\n\n- $N$： 阈值门的数量。\n- $M$：输入门的数量。\n- $P$： 一个长度为 $N + M$ 的数组，给出阈值门的输入。\n- $A$： 一个长度为 $M$ 的数组，给出输入门的初始状态。\n- 这个函数被调用恰好一次，且发生在函数 `count_ways` 的所有调用之前。\n\n```go\nint count_ways(int L, int R)\n```\n\n- $L$, $R$：编号在 $L$ 和 $R$ 之间的输入门的状态将会被翻转。\n- 这个函数应首先执行所规定的更新，然后返回使得门 $0$ 的状态为 $1$ 的参数赋值方案的方案数对 $1\\;000\\;002\\;022$ 取模的结果。\n- 这个函数会被调用恰好 $Q$ 次。", "outputFormat": "考虑如下的函数调用序列：\n\n```go\ninit(3, 4, [-1, 0, 1, 2, 1, 1, 0], [1, 0, 1, 0])\n```\n\n题面描述中已经给出了对这个例子的解释。\n\n```go\ncount_ways(3, 4)\n```\n\n这次调用翻转了门 $3$ 和 $4$ 的状态，也就是说，门 $3$ 的状态变成 $0$，门 $4$ 的状态变成 $1$。下面给出了两种可行的参数赋值方案，可以使得门 $0$ 的状态为 $1$ 。\n\n|               方案 $1$                |               方案 $2$                |\n| :-----------------------------------: | :-----------------------------------: |\n| ![](https://arina.loli.net/2022/08/12/azi4xDYOKpBnge6.png) | ![](https://arina.loli.net/2022/08/12/MBPhnOFyARSEQDH.png) |\n\n在所有其他的参数赋值方案中，门 $0$ 的状态为 $0$。因此，函数应返回 $2$。\n\n```go\ncount_ways(4, 5)\n```\n\n这次调用翻转了门 $4$ 和 $5$ 的状态。其结果是，所有输入门的状态均为 $0$，而且对于所有的参数赋值方案，门 $0$ 的状态均为 $0$。因此，函数应返回 $0$。\n\n```go\ncount_ways(3, 6)\n```\n\n这次调用将所有输入门的状态置为 $1$。其结果是，对于所有参数赋值方案，门 $0$ 的状态均为 $1$。因此，函数应返回 $6$。", "hint": "### 约束条件\n\n- $1 \\le N, M \\le 10^5$；\n- $1 \\le Q \\le 10^5$；\n- $P[0] = -1$；\n- $0 \\le P[i] \\lt i$ 且 $P[i] \\le N - 1$（对于所有满足 $1 \\le i \\le N + M - 1$ 的 $i$）；\n- 每个阈值门至少有一个输入（对于所有满足 $0 \\le i \\le N - 1$ 的 $i$，存在某个下标 $x$ 满足 $i \\lt x \\le N + M - 1$ 且 $P[x] = i$）；\n- $0 \\le A[j] \\le 1$（对于所有满足 $0 \\le j \\le M - 1$的 $j$）；\n- $N \\le L \\le R \\le N + M - 1$。\n\n### 子任务\n\n1. （2 分）$N = 1$，$M \\le 1000$，$Q \\le 5$；\n2. （7 分）$N, M \\le 1000$，$Q \\le 5$，每个阈值门都有恰好两个输入；\n3. （9 分）$N, M \\le 1000$，$Q \\le 5$；\n4. （4 分）$M = N + 1$，$M = 2^z$（对于某个正整数 $z$）， $P[i] = \\lfloor\\frac{i - 1}{2}\\rfloor$（对于所有满足 $1 \\le i \\le N + M - 1$ 的 $i$），$L = R$；\n5. （12 分）$M = N + 1$，$M = 2^z$（对于某个正整数 $z$），$P[i] = \\lfloor\\frac{i - 1}{2}\\rfloor$（对于所有满足$1 \\le i \\le N + M - 1$的 $i$）；\n6. （27 分）每个阈值门都恰好有两个输入；\n7. （28 分）$N, M \\le 5000$；\n8. （11 分）没有额外的约束条件。\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n- 第 $1$ 行： $N \\; M \\; Q$；\n- 第 $2$ 行： $P[0] \\; P[1] \\; \\ldots \\; P[N + M - 1]$；\n- 第 $3$ 行： $A[0] \\; A[1] \\; \\ldots \\; A[M - 1]$；\n- 第 $4 + k$ 行（$0 \\le k \\le Q - 1$）： 第 $k$ 次更新对应的 $L \\; R$。\n\n评测程序示例按照如下格式打印你的答案：\n\n- 第 $1 + k$ 行（$0 \\le k \\le Q - 1$）： `count_ways` 函数对第 $k$ 次更新的返回值。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`bool`、`int`、`int[]`（数组）和 `union(bool, int[])`。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `bool` | `int` | `int[]`            |\n| ------- | ------ | ------| ------------------ |\n| `void ` | `bool` | `int` | `std::vector<int>` |\n\n| `union(bool, int[])`                   | 数组 `a` 的长度 |\n| -------------------------------------- | ------------------- |\n| `std::variant<bool, std::vector<int>>` | `a.size()`          |\n\nC++ 语言里，`std::variant` 定义在 `<variant>` 头文件中。\n一个返回类型为 `std::variant<bool, std::vector<int>>` 的函数可以返回一个 `bool` 或一个 `std::vector<int>`。\n以下示例代码给出了三个返回 `std::variant` 的函数，它们都能正常工作：\n\n```cpp\nstd::variant<bool, std::vector<int>> foo(int N) {\n    return N % 2 == 0;\n}\n\nstd::variant<bool, std::vector<int>> goo(int N) {\n    return std::vector<int>(N, 0);\n}\n\nstd::variant<bool, std::vector<int>> hoo(int N) {\n    if (N % 2 == 0) {\n        return false;\n    }\n\n    return std::vector<int>(N, 0);\n}\n```", "locale": "zh-CN"}}}
{"pid": "P8494", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000]}, "tags": ["二分", "2022", "IOI", "交互题", "Special Judge", "随机化", "Ad-hoc"], "title": "[IOI 2022] 最罕见的昆虫", "background": "**本题为交互题。**\n\n您**不需要也不应该**在提交的程序中包含 `insects.h` 头文件和主函数。\n\n但是在您的程序中，需要声明以下三个函数：\n\n```cpp\nvoid move_inside(int i);\nvoid move_outside(int i);\nint press_button();\n```\n\n例如，您的程序可以是这样：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid move_inside(int i);\nvoid move_outside(int i);\nint press_button();\n\nint min_cardinality(int N) {\n\t// Code Here\n}\n```", "description": "Pak Blangkon 的房子四周有 $N$ 只昆虫，编号为 $0$ 至 $N-1$。每只昆虫有一个**类型**，以从 $0$ 至 $10^9$（包含 $0$ 和 $10^9$）的整数编号。可能有多只昆虫类型相同。\n\n假设将昆虫按照类型分组。我们定义**最常见**昆虫类型的基数是昆虫最多的分组中的昆虫数。类似地，**最罕见**昆虫类型的基数是昆虫最少的分组中的昆虫数。\n\n例如，假设有 $11$ 只昆虫，类型分别为 $[5, 7, 9, 11, 11, 5, 0, 11, 9, 100, 9]$。在此情形中，**最常见**昆虫类型的基数是 $3$，是因为类型 $9$ 和类型 $11$ 的分组均有最多数目的昆虫，每个分组都有 $3$ 只。**最罕见**昆虫类型的基数是 $1$，是因为类型 $7$、类型 $0$ 和类型 $100$ 的分组均有最少数目的昆虫，每个分组都有 $1$ 只。\n\nPak Blangkon 不知道这些昆虫的类型。他有一台单按钮的机器，可以提供昆虫类型相关的信息。刚开始时，机器是空的。在使用机器时，可以做如下三种操作：\n\n1. 将一只昆虫放进机器。\n2. 将一只昆虫取出机器。\n3. 按下机器的按钮。\n\n每种操作最多可以做 $40\\;000$ 次。\n\n每当按下按钮时，机器会报告在机器内的**最常见**昆虫类型的基数。\n\n你的任务是使用上述机器，确定 Pak Blangkon 的房子四周所有 $N$ 只昆虫中**最罕见**昆虫类型的基数。此外，在某些子任务里，你的得分取决于机器执行某种操作的最大次数（详见子任务一节）。", "inputFormat": "你要实现以下函数：\n\n```go\nint min_cardinality(int N)\n```\n\n- $N$：昆虫数量。\n- 此函数应返回 Pak Blangkon 的房子四周所有 $N$ 只昆虫中**最罕见**昆虫类型的基数。\n- 此函数恰好被调用一次。\n\n该函数可调用以下几个函数：\n\n```go\nvoid move_inside(int i)\n```\n\n- $i$：将被放进机器的昆虫编号。编号 $i$ 的取值范围是 $0$ 至 $N-1$（包含 $0$ 和 $N-1$）。\n- 如果昆虫已在机器内，函数调用不会影响机器内昆虫的集合。但是，调用仍会被计入此类操作的次数。\n- 此函数最多可以被调用 $40\\;000$ 次。\n\n```go\nvoid move_outside(int i)\n```\n\n- $i$：将被从机器中取出的昆虫编号。编号 $i$ 的取值范围是 $0$ 至 $N-1$（包含 $0$ 和 $N-1$）。\n- 如果昆虫已在机器外，函数调用不会影响机器内昆虫的集合。但是，调用仍会被计入此类操作的次数。\n- 此函数最多可以被调用 $40\\;000$ 次。\n\n```go\nint press_button()\n```\n\n- 此函数返回机器内**最常见**昆虫类型的基数。\n- 此函数最多可以被调用 $40\\;000$ 次。\n- 评测程序**不是适应性**的。也就是说，所有 $N$ 只昆虫的类型在 `min_cardinality` 调用前已经确定。\n", "outputFormat": "考虑在某个场景下，有 $6$ 只类型分别为 $[5, 8, 9, 5, 9, 9]$ 的昆虫。\n函数 `min_cardinality` 的调用方式如下：\n\n```go\nmin_cardinality(6)\n```\n\n此函数按以下次序调用了 `move_inside`、`move_outside` 和 `press_button`。\n\n|     函数调用      |  返回值  |       机器内的昆虫       |   机器内的昆虫类型   |\n| :---------------: | :------: | :----------------------: | :------------------: |\n|                   | $\\\\{\\\\}$ |          $[\\ ]$          |\n| `move_inside(0)`  |          |        $\\\\{0\\\\}$         |        $[5]$         |\n| `press_button()`  |   $1$    |        $\\\\{0\\\\}$         |        $[5]$         |\n| `move_inside(1)`  |          |       $\\\\{0, 1\\\\}$       |       $[5, 8]$       |\n| `press_button()`  |   $1$    |       $\\\\{0, 1\\\\}$       |       $[5, 8]$       |\n| `move_inside(3)`  |          |     $\\\\{0, 1, 3\\\\}$      |     $[5, 8, 5]$      |\n| `press_button()`  |   $2$    |     $\\\\{0, 1, 3\\\\}$      |     $[5, 8, 5]$      |\n| `move_inside(2)`  |          |    $\\\\{0, 1, 2, 3\\\\}$    |    $[5, 8, 9, 5]$    |\n| `move_inside(4)`  |          |  $\\\\{0, 1, 2, 3, 4\\\\}$   |  $[5, 8, 9, 5, 9]$   |\n| `move_inside(5)`  |          | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `press_button()`  |   $3$    | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `move_inside(5)`  |          | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `press_button()`  |   $3$    | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `move_outside(5)` |          |  $\\\\{0, 1, 2, 3, 4\\\\}$   |  $[5, 8, 9, 5, 9]$   |\n| `press_button()`  |   $2$    |  $\\\\{0, 1, 2, 3, 4\\\\}$   |  $[5, 8, 9, 5, 9]$   |\n\n至此，已有充分信息表明，最罕见昆虫类型的基数是 $1$。\n因此，函数 `min_cardinality` 应返回 $1$。\n\n在这个例子里，`move_inside` 被调用 $7$ 次，`move_outside` 被调用 $1$ 次，`press_button` 被调用 $6$ 次。", "hint": "### 约束条件\n\n- $2 \\le N \\le 2000$。\n\n### 子任务\n\n1. （10 分） $N \\le 200$；\n2. （15 分） $N \\le 1000$；\n3. （75 分） 没有额外的约束条件。\n\n如果在某个测试用例上，函数 `move_inside`、`move_outside` 或 `press_button` 的调用次数不符合“实现细节”中给出的约束条件，或者 `min_cardinality` 的返回值不正确，你的解答在此子任务上得分为 $0$。\n\n令 $q$ 为以下三个值的 **最大值**：`move_inside` 的调用次数、`move_outside` 的调用次数、`press_button` 的调用次数。\n\n在子任务 3 中，你可能会得部分分。令 $m$ 为此子任务所有测试用例的 $\\frac{q}{N}$ 的最大值。你在此子任务的得分将根据以下表格计算：\n\n|       条件       |                   得分                   |\n| :--------------: | :--------------------------------------: |\n|    $20 \\lt m$    | $0$ （CMS 报告“`Output isn’t correct`”） |\n| $6 \\lt m \\le 20$ |           $\\frac{225}{m - 2}$            |\n| $3 \\lt m \\le 6$  |          $81 - \\frac{2}{3} m^2$          |\n|    $m \\le 3$     |                   $75$                   |\n\n### 评测程序示例\n\n令 $T$ 是长度为 $N$ 的整数数组，其中 $T[i]$ 是编号为 $i$ 的昆虫的类型。\n\n评测程序示例按以下格式读取输入：\n\n- 第 $1$ 行：$N$；\n- 第 $2$ 行：$T[0] \\; T[1] \\; \\ldots \\; T[N - 1]$。\n\n如果评测程序示例检测到非法行为，评测程序示例将输出 `Protocol Violation: <MSG>`，其中 `<MSG>` 为如下某种类型：\n\n- `invalid parameter`：在函数调用 `move_inside` 或 `move_outside` 时，参数 $i$ 的值不在 $0$ 至 $N-1$ 的范围内（包括 $0$ 和 $N-1$）。\n- `too many calls`：函数 `move_inside`、`move_outside` 或 `press_button` 中**某个**的调用次数超过 $40\\;000$ 次。\n\n否则，评测程序示例按以下格式输出：\n\n- 第 $1$ 行：`min_cardinality` 的返回值；\n- 第 $2$ 行：$q$。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`bool`、`int`、`int[]`（数组）和 `union(bool, int[])`。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `bool` | `int` | `int[]`            |\n| ------- | ------ | ------| ------------------ |\n| `void ` | `bool` | `int` | `std::vector<int>` |\n\n| `union(bool, int[])`                   | 数组 `a` 的长度 |\n| -------------------------------------- | ------------------- |\n| `std::variant<bool, std::vector<int>>` | `a.size()`          |\n\nC++ 语言里，`std::variant` 定义在 `<variant>` 头文件中。\n一个返回类型为 `std::variant<bool, std::vector<int>>` 的函数可以返回一个 `bool` 或一个 `std::vector<int>`。\n以下示例代码给出了三个返回 `std::variant` 的函数，它们都能正常工作：\n\n```cpp\nstd::variant<bool, std::vector<int>> foo(int N) {\n    return N % 2 == 0;\n}\n\nstd::variant<bool, std::vector<int>> goo(int N) {\n    return std::vector<int>(N, 0);\n}\n\nstd::variant<bool, std::vector<int>> hoo(int N) {\n    if (N % 2 == 0) {\n        return false;\n    }\n\n    return std::vector<int>(N, 0);\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2022] 最罕见的昆虫", "background": "**本题为交互题。**\n\n您**不需要也不应该**在提交的程序中包含 `insects.h` 头文件和主函数。\n\n但是在您的程序中，需要声明以下三个函数：\n\n```cpp\nvoid move_inside(int i);\nvoid move_outside(int i);\nint press_button();\n```\n\n例如，您的程序可以是这样：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid move_inside(int i);\nvoid move_outside(int i);\nint press_button();\n\nint min_cardinality(int N) {\n\t// Code Here\n}\n```", "description": "Pak Blangkon 的房子四周有 $N$ 只昆虫，编号为 $0$ 至 $N-1$。每只昆虫有一个**类型**，以从 $0$ 至 $10^9$（包含 $0$ 和 $10^9$）的整数编号。可能有多只昆虫类型相同。\n\n假设将昆虫按照类型分组。我们定义**最常见**昆虫类型的基数是昆虫最多的分组中的昆虫数。类似地，**最罕见**昆虫类型的基数是昆虫最少的分组中的昆虫数。\n\n例如，假设有 $11$ 只昆虫，类型分别为 $[5, 7, 9, 11, 11, 5, 0, 11, 9, 100, 9]$。在此情形中，**最常见**昆虫类型的基数是 $3$，是因为类型 $9$ 和类型 $11$ 的分组均有最多数目的昆虫，每个分组都有 $3$ 只。**最罕见**昆虫类型的基数是 $1$，是因为类型 $7$、类型 $0$ 和类型 $100$ 的分组均有最少数目的昆虫，每个分组都有 $1$ 只。\n\nPak Blangkon 不知道这些昆虫的类型。他有一台单按钮的机器，可以提供昆虫类型相关的信息。刚开始时，机器是空的。在使用机器时，可以做如下三种操作：\n\n1. 将一只昆虫放进机器。\n2. 将一只昆虫取出机器。\n3. 按下机器的按钮。\n\n每种操作最多可以做 $40\\;000$ 次。\n\n每当按下按钮时，机器会报告在机器内的**最常见**昆虫类型的基数。\n\n你的任务是使用上述机器，确定 Pak Blangkon 的房子四周所有 $N$ 只昆虫中**最罕见**昆虫类型的基数。此外，在某些子任务里，你的得分取决于机器执行某种操作的最大次数（详见子任务一节）。", "inputFormat": "你要实现以下函数：\n\n```go\nint min_cardinality(int N)\n```\n\n- $N$：昆虫数量。\n- 此函数应返回 Pak Blangkon 的房子四周所有 $N$ 只昆虫中**最罕见**昆虫类型的基数。\n- 此函数恰好被调用一次。\n\n该函数可调用以下几个函数：\n\n```go\nvoid move_inside(int i)\n```\n\n- $i$：将被放进机器的昆虫编号。编号 $i$ 的取值范围是 $0$ 至 $N-1$（包含 $0$ 和 $N-1$）。\n- 如果昆虫已在机器内，函数调用不会影响机器内昆虫的集合。但是，调用仍会被计入此类操作的次数。\n- 此函数最多可以被调用 $40\\;000$ 次。\n\n```go\nvoid move_outside(int i)\n```\n\n- $i$：将被从机器中取出的昆虫编号。编号 $i$ 的取值范围是 $0$ 至 $N-1$（包含 $0$ 和 $N-1$）。\n- 如果昆虫已在机器外，函数调用不会影响机器内昆虫的集合。但是，调用仍会被计入此类操作的次数。\n- 此函数最多可以被调用 $40\\;000$ 次。\n\n```go\nint press_button()\n```\n\n- 此函数返回机器内**最常见**昆虫类型的基数。\n- 此函数最多可以被调用 $40\\;000$ 次。\n- 评测程序**不是适应性**的。也就是说，所有 $N$ 只昆虫的类型在 `min_cardinality` 调用前已经确定。\n", "outputFormat": "考虑在某个场景下，有 $6$ 只类型分别为 $[5, 8, 9, 5, 9, 9]$ 的昆虫。\n函数 `min_cardinality` 的调用方式如下：\n\n```go\nmin_cardinality(6)\n```\n\n此函数按以下次序调用了 `move_inside`、`move_outside` 和 `press_button`。\n\n|     函数调用      |  返回值  |       机器内的昆虫       |   机器内的昆虫类型   |\n| :---------------: | :------: | :----------------------: | :------------------: |\n|                   | $\\\\{\\\\}$ |          $[\\ ]$          |\n| `move_inside(0)`  |          |        $\\\\{0\\\\}$         |        $[5]$         |\n| `press_button()`  |   $1$    |        $\\\\{0\\\\}$         |        $[5]$         |\n| `move_inside(1)`  |          |       $\\\\{0, 1\\\\}$       |       $[5, 8]$       |\n| `press_button()`  |   $1$    |       $\\\\{0, 1\\\\}$       |       $[5, 8]$       |\n| `move_inside(3)`  |          |     $\\\\{0, 1, 3\\\\}$      |     $[5, 8, 5]$      |\n| `press_button()`  |   $2$    |     $\\\\{0, 1, 3\\\\}$      |     $[5, 8, 5]$      |\n| `move_inside(2)`  |          |    $\\\\{0, 1, 2, 3\\\\}$    |    $[5, 8, 9, 5]$    |\n| `move_inside(4)`  |          |  $\\\\{0, 1, 2, 3, 4\\\\}$   |  $[5, 8, 9, 5, 9]$   |\n| `move_inside(5)`  |          | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `press_button()`  |   $3$    | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `move_inside(5)`  |          | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `press_button()`  |   $3$    | $\\\\{0, 1, 2, 3, 4, 5\\\\}$ | $[5, 8, 9, 5, 9, 9]$ |\n| `move_outside(5)` |          |  $\\\\{0, 1, 2, 3, 4\\\\}$   |  $[5, 8, 9, 5, 9]$   |\n| `press_button()`  |   $2$    |  $\\\\{0, 1, 2, 3, 4\\\\}$   |  $[5, 8, 9, 5, 9]$   |\n\n至此，已有充分信息表明，最罕见昆虫类型的基数是 $1$。\n因此，函数 `min_cardinality` 应返回 $1$。\n\n在这个例子里，`move_inside` 被调用 $7$ 次，`move_outside` 被调用 $1$ 次，`press_button` 被调用 $6$ 次。", "hint": "### 约束条件\n\n- $2 \\le N \\le 2000$。\n\n### 子任务\n\n1. （10 分） $N \\le 200$；\n2. （15 分） $N \\le 1000$；\n3. （75 分） 没有额外的约束条件。\n\n如果在某个测试用例上，函数 `move_inside`、`move_outside` 或 `press_button` 的调用次数不符合“实现细节”中给出的约束条件，或者 `min_cardinality` 的返回值不正确，你的解答在此子任务上得分为 $0$。\n\n令 $q$ 为以下三个值的 **最大值**：`move_inside` 的调用次数、`move_outside` 的调用次数、`press_button` 的调用次数。\n\n在子任务 3 中，你可能会得部分分。令 $m$ 为此子任务所有测试用例的 $\\frac{q}{N}$ 的最大值。你在此子任务的得分将根据以下表格计算：\n\n|       条件       |                   得分                   |\n| :--------------: | :--------------------------------------: |\n|    $20 \\lt m$    | $0$ （CMS 报告“`Output isn’t correct`”） |\n| $6 \\lt m \\le 20$ |           $\\frac{225}{m - 2}$            |\n| $3 \\lt m \\le 6$  |          $81 - \\frac{2}{3} m^2$          |\n|    $m \\le 3$     |                   $75$                   |\n\n### 评测程序示例\n\n令 $T$ 是长度为 $N$ 的整数数组，其中 $T[i]$ 是编号为 $i$ 的昆虫的类型。\n\n评测程序示例按以下格式读取输入：\n\n- 第 $1$ 行：$N$；\n- 第 $2$ 行：$T[0] \\; T[1] \\; \\ldots \\; T[N - 1]$。\n\n如果评测程序示例检测到非法行为，评测程序示例将输出 `Protocol Violation: <MSG>`，其中 `<MSG>` 为如下某种类型：\n\n- `invalid parameter`：在函数调用 `move_inside` 或 `move_outside` 时，参数 $i$ 的值不在 $0$ 至 $N-1$ 的范围内（包括 $0$ 和 $N-1$）。\n- `too many calls`：函数 `move_inside`、`move_outside` 或 `press_button` 中**某个**的调用次数超过 $40\\;000$ 次。\n\n否则，评测程序示例按以下格式输出：\n\n- 第 $1$ 行：`min_cardinality` 的返回值；\n- 第 $2$ 行：$q$。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`bool`、`int`、`int[]`（数组）和 `union(bool, int[])`。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `bool` | `int` | `int[]`            |\n| ------- | ------ | ------| ------------------ |\n| `void ` | `bool` | `int` | `std::vector<int>` |\n\n| `union(bool, int[])`                   | 数组 `a` 的长度 |\n| -------------------------------------- | ------------------- |\n| `std::variant<bool, std::vector<int>>` | `a.size()`          |\n\nC++ 语言里，`std::variant` 定义在 `<variant>` 头文件中。\n一个返回类型为 `std::variant<bool, std::vector<int>>` 的函数可以返回一个 `bool` 或一个 `std::vector<int>`。\n以下示例代码给出了三个返回 `std::variant` 的函数，它们都能正常工作：\n\n```cpp\nstd::variant<bool, std::vector<int>> foo(int N) {\n    return N % 2 == 0;\n}\n\nstd::variant<bool, std::vector<int>> goo(int N) {\n    return std::vector<int>(N, 0);\n}\n\nstd::variant<bool, std::vector<int>> hoo(int N) {\n    if (N % 2 == 0) {\n        return false;\n    }\n\n    return std::vector<int>(N, 0);\n}\n```", "locale": "zh-CN"}}}
{"pid": "P8495", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2022", "IOI", "交互题", "Special Judge"], "title": "[IOI 2022] 千岛", "background": "不要 $\\texttt{\\#include \"islands.h\"}$。", "description": "千岛是爪哇海里一组美丽的岛屿，其中有 $N$ 个岛屿，编号为从 $0$ 到 $N - 1$。\n\n有 $M$ 艘独木舟在岛屿之间航行，编号为从 $0$ 到 $M - 1$。对于满足 $0 \\le i \\le M - 1$ 的所有 $i$，独木舟 $i$ 可以停靠在岛屿 $U_i$ 或 $V_i$，并且在岛屿 $U_i$ 和 $V_i$ 之间航行。具体来说，当独木舟停靠在岛屿 $U_i$ 时，可以用它从岛屿 $U_i$ 去往岛屿 $V_i$，此后该独木舟就变成停靠在岛屿 $V[i]$。类似地，当该独木舟停靠在岛屿 $V[i]$ 时，它可以从岛屿 $V_i$ 航向岛屿 $U_i$，此后该独木舟就变成停靠在岛屿 $U_i$。在初始时，该独木舟停靠在岛屿 $U_i$。可能有多艘独木舟能用于在同一对岛屿之间航行。也可能会有多艘独木舟停靠在同一个岛屿处。\n\n出于安全考虑，各艘独木舟在每次航行后必须进行维修，因此同一独木舟不允许紧接着完成两次航行。也就是说，在用完某艘独木舟 $i$ 后，必须先用过另外某艘独木舟，才能再启用独木舟 $i$。\n\nBu Dengklek 想策划一次在部分岛屿之间的旅行。她的旅程是**合理的**，当且仅当满足如下条件：\n\n- 她的旅程应从岛屿 $0$ 开始，并且在该岛屿结束。\n- 她应该游览岛屿 $0$ 之外的至少一个岛屿。\n- 在旅行结束后，每艘独木舟应停靠在旅行开始前它所在的岛屿。也就是说，对于满足 $0 \\le i \\le M - 1$ 的所有 $i$，独木舟必须停靠在岛屿 $U_i$。\n\n请你帮助 Bu Dengklek 找出包括至多航行 $2\\;000\\;000$ 次的合理旅行，或者告诉她不存在合理旅行。\n可以证明，在本题所给出的约束条件下（参见约束条件部分），如果存在合理旅行，则必然存在航行次数不超过 $2\\;000\\;000$ 次的合理旅行。", "inputFormat": "你要实现如下函数：\n\n```go\nunion(bool, int[]) find_journey(int N, int M, int[] U, int[] V)\n```\n\n- $N$：岛屿数量。\n- $M$：独木舟数量。\n- $U$, $V$：长度为 $M$ 的两个数组，给出独木舟航行的岛屿。\n- 该函数应当返回一个布尔类型或者整数数组。\n  - 如果不存在合理旅程，该函数应返回 `false`。\n  - 如果存在合理旅程，你有两个选择：\n  - 如果想得到全部的分数，该函数应返回一个至多包含 $2\\;000\\;000$ 个整数的数组，该数组用来刻画一个合理旅程。更确切地说，该数组中的元素应为旅程中所用独木舟的编号（按照独木舟的使用顺序）。\n  - 如果想得到部分分数，该函数应返回 `true`，或返回一个包含超过 $2\\;000\\;000$ 个整数的数组，或返回了一个未给出合理旅程的整数数组（更多细节参见“子任务”部分）。\n- 该函数将被调用恰好一次。", "outputFormat": "### 例子 1\n\n考虑如下调用：\n\n```go\nfind_journey(4, 5, [0, 1, 2, 0, 3], [1, 2, 3, 3, 1])\n```\n\n下图给出了岛屿和独木舟。\n\n![](https://arina.loli.net/2022/08/12/Aey1En5QvcFHrUZ.png)\n\n一个可行的合理旅行如下。Bu Dengklek 先依次使用独木舟 $0$，$1$，$2$ 和 $4$。结果是她将在岛屿 $1$ 上。其后，Bu Dengklek 可以再次使用独木舟 $0$，因为该独木舟正停靠在岛屿 $1$，而且她用的上一艘独木舟不是 $0$。再次使用独木舟 $0$ 后，现在 Bu Dengklek 在岛屿 $0$ 上。然而，独木舟 $1$，$2$ 和 $4$ 没有停靠在旅程开始前它们所在的岛屿。接下来 Bu Dengklek 继续她的旅程，使用独木舟 $3$，$2$，$1$，$4$ 和再一次使用 $3$。Bu Dengklek 回到了岛屿 $0$ 上，并且所有独木舟都停靠在旅行开始前它们所在的岛屿。\n\n因此，返回结果 $[0, 1, 2, 4, 0, 3, 2, 1, 4, 3]$ 刻画了一个合理旅程。\n\n### 例子 2\n\n考虑如下调用：\n\n```go\nfind_journey(2, 3, [0, 1, 1], [1, 0, 0])\n```\n\n下图给出了岛屿和独木舟。\n\n![](https://arina.loli.net/2022/08/12/nWJqhN7KXV3FPRl.png)\n\nBu Dengklek 仅能从使用独木舟 $0$ 开始，此后她可以使用独木舟 $1$ 或者 $2$。注意，她不能连续使用独木舟 $0$ 两次。在两种情况下，Bu Dengklek 都回到了岛屿 $0$ 上。然而，有独木舟没停靠在旅行开始前它们所在的岛屿，而 Bu Dengklek 此后却无法再使用任何独木舟，因为唯一停靠在岛屿 $0$ 的独木舟是她刚用过的那艘。由于不存在合理旅程，该函数应当返回 `false`。", "hint": "### 约束条件\n\n- $2 \\le N \\le 10^5$；\n- $1 \\le M \\le 2 \\times 10^5$；\n- $0 \\le U_i \\le N - 1$ 且 $0 \\le V_i \\le N - 1$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）；\n- $U_i \\neq V_i$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）。\n\n### 子任务\n\n1. （5 分）$N = 2$。\n1. （5 分） $N \\le 400$。\n   对于每一对不同的岛屿 $x$ 和 $y$（$0 \\le x \\lt y \\le N - 1$），恰好有两艘可在它们之间航行的独木舟。\n   其中一艘停靠在岛屿 $x$，而另一艘停靠在岛屿 $y$。\n1. （21 分） $N \\le 1000$，$M$ 是偶数，而且对于满足 $0 \\le i \\le M - 1$ 的所有**偶数** $i$，独木舟 $i$ 和 $i + 1$ 都可以用于在岛屿 $U_i$ 和 $V_i$ 之间航行。独木舟 $i$ 最初停靠在岛屿 $U_i$ 处，而独木舟 $i + 1$ 最初停靠在岛屿 $V_i$ 处。形式化地，$U_i = V_{i + 1}$ 且 $V_i = U_{i + 1}$。\n1. （24 分） $N \\le 1000$，$M$ 是偶数，而且对于满足 $0 \\le i \\le M - 1$ 的所有**偶数** $i$，独木舟 $i$ 和 $i + 1$ 都可以用于在岛屿 $U_i$ 和 $V_i$ 之间航行。两艘独木舟最初都停靠在岛屿 $U_i$ 处。\n   形式化地，$U_i = U_{i + 1}$ 且 $V_i = V_{i + 1}$。\n1. （45 分）没有额外的约束条件。\n\n对于每个存在合理旅程的测试用例，你的解答：\n\n- 如果返回一个合理旅程，将得到全部分数，\n- 如果返回 `true`，或返回一个超过 $2\\;000\\;000$ 个整数的数组，或返回一个未给出合理旅程的数组，将得到 $35\\%$ 的分数，\n- 在其他情况下得分为 $0$。\n\n对于每个不存在合理旅程的测试用例，你的解答：\n\n- 如果返回 `false`，将得到全部分数，\n- 在其他情况下得分为 $0$。\n\n注意，每个子任务上的最终得分，为该子任务中所有测试用例上的最低得分。\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n- 第 $1$ 行：$N \\; M$；\n- 第 $2 + i$ 行（$0 \\le i \\le M - 1$）：$U_i \\; V_i$。\n\n测试程序示例将按照如下格式打印你的答案：\n\n- 如果 `find_journey` 返回一个 `bool`：\n  - 第 $1$ 行：$0$；\n  - 第 $2$ 行：如果 `find_journey` 返回 `false` 则为 $0$，否则为 $1$。\n- 如果 `find_journey` 返回一个 `int[]`，该数组中的元素记为 $c[0], c[1], \\ldots c[k-1]$。测试程序示例打印出：\n  - 第 $1$ 行：$1$；\n  - 第 $2$ 行：$k$；\n  - 第 $3$ 行：$c[0] \\; c[1] \\; \\ldots \\; c[k-1]$。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`bool`、`int`、`int[]`（数组）和 `union(bool, int[])`。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `bool` | `int` | `int[]`            |\n| ------- | ------ | ------| ------------------ |\n| `void ` | `bool` | `int` | `std::vector<int>` |\n\n| `union(bool, int[])`                   | 数组 `a` 的长度 |\n| -------------------------------------- | ------------------- |\n| `std::variant<bool, std::vector<int>>` | `a.size()`          |\n\nC++ 语言里，`std::variant` 定义在 `<variant>` 头文件中。\n一个返回类型为 `std::variant<bool, std::vector<int>>` 的函数可以返回一个 `bool` 或一个 `std::vector<int>`。\n以下示例代码给出了三个返回 `std::variant` 的函数，它们都能正常工作：\n\n```cpp\nstd::variant<bool, std::vector<int>> foo(int N) {\n    return N % 2 == 0;\n}\n\nstd::variant<bool, std::vector<int>> goo(int N) {\n    return std::vector<int>(N, 0);\n}\n\nstd::variant<bool, std::vector<int>> hoo(int N) {\n    if (N % 2 == 0) {\n        return false;\n    }\n\n    return std::vector<int>(N, 0);\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2022] 千岛", "background": "不要 $\\texttt{\\#include \"islands.h\"}$。", "description": "千岛是爪哇海里一组美丽的岛屿，其中有 $N$ 个岛屿，编号为从 $0$ 到 $N - 1$。\n\n有 $M$ 艘独木舟在岛屿之间航行，编号为从 $0$ 到 $M - 1$。对于满足 $0 \\le i \\le M - 1$ 的所有 $i$，独木舟 $i$ 可以停靠在岛屿 $U_i$ 或 $V_i$，并且在岛屿 $U_i$ 和 $V_i$ 之间航行。具体来说，当独木舟停靠在岛屿 $U_i$ 时，可以用它从岛屿 $U_i$ 去往岛屿 $V_i$，此后该独木舟就变成停靠在岛屿 $V[i]$。类似地，当该独木舟停靠在岛屿 $V[i]$ 时，它可以从岛屿 $V_i$ 航向岛屿 $U_i$，此后该独木舟就变成停靠在岛屿 $U_i$。在初始时，该独木舟停靠在岛屿 $U_i$。可能有多艘独木舟能用于在同一对岛屿之间航行。也可能会有多艘独木舟停靠在同一个岛屿处。\n\n出于安全考虑，各艘独木舟在每次航行后必须进行维修，因此同一独木舟不允许紧接着完成两次航行。也就是说，在用完某艘独木舟 $i$ 后，必须先用过另外某艘独木舟，才能再启用独木舟 $i$。\n\nBu Dengklek 想策划一次在部分岛屿之间的旅行。她的旅程是**合理的**，当且仅当满足如下条件：\n\n- 她的旅程应从岛屿 $0$ 开始，并且在该岛屿结束。\n- 她应该游览岛屿 $0$ 之外的至少一个岛屿。\n- 在旅行结束后，每艘独木舟应停靠在旅行开始前它所在的岛屿。也就是说，对于满足 $0 \\le i \\le M - 1$ 的所有 $i$，独木舟必须停靠在岛屿 $U_i$。\n\n请你帮助 Bu Dengklek 找出包括至多航行 $2\\;000\\;000$ 次的合理旅行，或者告诉她不存在合理旅行。\n可以证明，在本题所给出的约束条件下（参见约束条件部分），如果存在合理旅行，则必然存在航行次数不超过 $2\\;000\\;000$ 次的合理旅行。", "inputFormat": "你要实现如下函数：\n\n```go\nunion(bool, int[]) find_journey(int N, int M, int[] U, int[] V)\n```\n\n- $N$：岛屿数量。\n- $M$：独木舟数量。\n- $U$, $V$：长度为 $M$ 的两个数组，给出独木舟航行的岛屿。\n- 该函数应当返回一个布尔类型或者整数数组。\n  - 如果不存在合理旅程，该函数应返回 `false`。\n  - 如果存在合理旅程，你有两个选择：\n  - 如果想得到全部的分数，该函数应返回一个至多包含 $2\\;000\\;000$ 个整数的数组，该数组用来刻画一个合理旅程。更确切地说，该数组中的元素应为旅程中所用独木舟的编号（按照独木舟的使用顺序）。\n  - 如果想得到部分分数，该函数应返回 `true`，或返回一个包含超过 $2\\;000\\;000$ 个整数的数组，或返回了一个未给出合理旅程的整数数组（更多细节参见“子任务”部分）。\n- 该函数将被调用恰好一次。", "outputFormat": "### 例子 1\n\n考虑如下调用：\n\n```go\nfind_journey(4, 5, [0, 1, 2, 0, 3], [1, 2, 3, 3, 1])\n```\n\n下图给出了岛屿和独木舟。\n\n![](https://arina.loli.net/2022/08/12/Aey1En5QvcFHrUZ.png)\n\n一个可行的合理旅行如下。Bu Dengklek 先依次使用独木舟 $0$，$1$，$2$ 和 $4$。结果是她将在岛屿 $1$ 上。其后，Bu Dengklek 可以再次使用独木舟 $0$，因为该独木舟正停靠在岛屿 $1$，而且她用的上一艘独木舟不是 $0$。再次使用独木舟 $0$ 后，现在 Bu Dengklek 在岛屿 $0$ 上。然而，独木舟 $1$，$2$ 和 $4$ 没有停靠在旅程开始前它们所在的岛屿。接下来 Bu Dengklek 继续她的旅程，使用独木舟 $3$，$2$，$1$，$4$ 和再一次使用 $3$。Bu Dengklek 回到了岛屿 $0$ 上，并且所有独木舟都停靠在旅行开始前它们所在的岛屿。\n\n因此，返回结果 $[0, 1, 2, 4, 0, 3, 2, 1, 4, 3]$ 刻画了一个合理旅程。\n\n### 例子 2\n\n考虑如下调用：\n\n```go\nfind_journey(2, 3, [0, 1, 1], [1, 0, 0])\n```\n\n下图给出了岛屿和独木舟。\n\n![](https://arina.loli.net/2022/08/12/nWJqhN7KXV3FPRl.png)\n\nBu Dengklek 仅能从使用独木舟 $0$ 开始，此后她可以使用独木舟 $1$ 或者 $2$。注意，她不能连续使用独木舟 $0$ 两次。在两种情况下，Bu Dengklek 都回到了岛屿 $0$ 上。然而，有独木舟没停靠在旅行开始前它们所在的岛屿，而 Bu Dengklek 此后却无法再使用任何独木舟，因为唯一停靠在岛屿 $0$ 的独木舟是她刚用过的那艘。由于不存在合理旅程，该函数应当返回 `false`。", "hint": "### 约束条件\n\n- $2 \\le N \\le 10^5$；\n- $1 \\le M \\le 2 \\times 10^5$；\n- $0 \\le U_i \\le N - 1$ 且 $0 \\le V_i \\le N - 1$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）；\n- $U_i \\neq V_i$（对于所有满足 $0 \\le i \\le M - 1$ 的 $i$）。\n\n### 子任务\n\n1. （5 分）$N = 2$。\n1. （5 分） $N \\le 400$。\n   对于每一对不同的岛屿 $x$ 和 $y$（$0 \\le x \\lt y \\le N - 1$），恰好有两艘可在它们之间航行的独木舟。\n   其中一艘停靠在岛屿 $x$，而另一艘停靠在岛屿 $y$。\n1. （21 分） $N \\le 1000$，$M$ 是偶数，而且对于满足 $0 \\le i \\le M - 1$ 的所有**偶数** $i$，独木舟 $i$ 和 $i + 1$ 都可以用于在岛屿 $U_i$ 和 $V_i$ 之间航行。独木舟 $i$ 最初停靠在岛屿 $U_i$ 处，而独木舟 $i + 1$ 最初停靠在岛屿 $V_i$ 处。形式化地，$U_i = V_{i + 1}$ 且 $V_i = U_{i + 1}$。\n1. （24 分） $N \\le 1000$，$M$ 是偶数，而且对于满足 $0 \\le i \\le M - 1$ 的所有**偶数** $i$，独木舟 $i$ 和 $i + 1$ 都可以用于在岛屿 $U_i$ 和 $V_i$ 之间航行。两艘独木舟最初都停靠在岛屿 $U_i$ 处。\n   形式化地，$U_i = U_{i + 1}$ 且 $V_i = V_{i + 1}$。\n1. （45 分）没有额外的约束条件。\n\n对于每个存在合理旅程的测试用例，你的解答：\n\n- 如果返回一个合理旅程，将得到全部分数，\n- 如果返回 `true`，或返回一个超过 $2\\;000\\;000$ 个整数的数组，或返回一个未给出合理旅程的数组，将得到 $35\\%$ 的分数，\n- 在其他情况下得分为 $0$。\n\n对于每个不存在合理旅程的测试用例，你的解答：\n\n- 如果返回 `false`，将得到全部分数，\n- 在其他情况下得分为 $0$。\n\n注意，每个子任务上的最终得分，为该子任务中所有测试用例上的最低得分。\n\n### 评测程序示例\n\n评测程序示例读取如下格式的输入：\n\n- 第 $1$ 行：$N \\; M$；\n- 第 $2 + i$ 行（$0 \\le i \\le M - 1$）：$U_i \\; V_i$。\n\n测试程序示例将按照如下格式打印你的答案：\n\n- 如果 `find_journey` 返回一个 `bool`：\n  - 第 $1$ 行：$0$；\n  - 第 $2$ 行：如果 `find_journey` 返回 `false` 则为 $0$，否则为 $1$。\n- 如果 `find_journey` 返回一个 `int[]`，该数组中的元素记为 $c[0], c[1], \\ldots c[k-1]$。测试程序示例打印出：\n  - 第 $1$ 行：$1$；\n  - 第 $2$ 行：$k$；\n  - 第 $3$ 行：$c[0] \\; c[1] \\; \\ldots \\; c[k-1]$。\n\n### 约定\n\n题面在给出函数接口时，会使用一般性的类型名称 `void`、`bool`、`int`、`int[]`（数组）和 `union(bool, int[])`。\n\n在 C++ 中，评测程序会采用适当的数据类型或实现，如下表所示：\n\n| `void ` | `bool` | `int` | `int[]`            |\n| ------- | ------ | ------| ------------------ |\n| `void ` | `bool` | `int` | `std::vector<int>` |\n\n| `union(bool, int[])`                   | 数组 `a` 的长度 |\n| -------------------------------------- | ------------------- |\n| `std::variant<bool, std::vector<int>>` | `a.size()`          |\n\nC++ 语言里，`std::variant` 定义在 `<variant>` 头文件中。\n一个返回类型为 `std::variant<bool, std::vector<int>>` 的函数可以返回一个 `bool` 或一个 `std::vector<int>`。\n以下示例代码给出了三个返回 `std::variant` 的函数，它们都能正常工作：\n\n```cpp\nstd::variant<bool, std::vector<int>> foo(int N) {\n    return N % 2 == 0;\n}\n\nstd::variant<bool, std::vector<int>> goo(int N) {\n    return std::vector<int>(N, 0);\n}\n\nstd::variant<bool, std::vector<int>> hoo(int N) {\n    if (N % 2 == 0) {\n        return false;\n    }\n\n    return std::vector<int>(N, 0);\n}\n```", "locale": "zh-CN"}}}
{"pid": "P8496", "type": "P", "difficulty": 6, "samples": [["2 8\n3 1 1 2\n3 3 3 3\n3 1 1\n3 1 2\n4 2 1 3\n3 1 3\n2 3\n3 1 3\n1 3 1\n3 1 3\n", "1\n3\n-1\n3\n-1\n"], ["4 9\n1 1\n1 2\n1 3\n1 4\n3 4 1 2 3 4\n1 1 2\n3 2 1 2\n2 3\n3 3 1 2 3\n1 4 4\n1 4 4\n1 4 4\n3 4 1 2 3 4\n", "-1\n2\n2\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "NOI", "O2优化"], "title": "[NOI2022] 众数", "background": null, "description": "**对于一个序列，定义其众数为序列中出现次数严格大于一半的数字。注意该定义与一般的定义有出入，在本题中请以题面中给出的定义为准。**\n\n一开始给定 $n$ 个长度不一的正整数序列，编号为 $1 \\sim n$，初始序列可以为空。这 $n$ 个序列被视为存在，其他编号对应的序列视为不存在。\n\n有 $q$ 次操作，操作有以下类型:\n\n- $1 \\ x \\ y$：在 $x$ 号序列末尾插入数字 $y$。保证 $x$ 号序列存在，且 $1 \\le x, y \\le n + q$。\n- $2 \\ x$：删除 $x$ 号序列末尾的数字，保证 $x$ 号序列存在、非空，且 $1 \\le x \\le n + q$。\n- $3 \\ m \\ x_1 \\ x_2 \\dots \\ x_m$：将 $x_1, x_2, \\ldots, x_m$ 号序列顺次拼接，得到一个新序列，并询问其众数。如果不存在满足上述条件的数，则返回 $-1$。数据保证对于任意 $1 \\le i \\le m$，$x_i$ 是一个仍然存在的序列，$1 \\le x_i \\le n + q$，且拼接得到的序列非空。**注意：不保证 $\\boldsymbol{x_1, \\ldots, x_m}$ 互不相同，询问中的合并操作不会对后续操作产生影响。**\n- $4 \\ x_1 \\ x_2 \\ x_3$：新建一个编号为 $x_3$ 的序列，其为 $x_1$ 号序列后顺次添加 $x_2$ 号序列中数字得到的结果，然后删除 $x_1, x_2$ 对应的序列。此时序列 $x_3$ 视为存在，而序列 $x_1, x_2$ 被视为不存在，在后续操作中也不会被再次使用。保证 $1 \\le x_1, x_2, x_3 \\le n + q$、$x_1 \\ne x_2$、序列 $x_1, x_2$ 在操作前存在、且在操作前没有序列使用过编号 $x_3$。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $q$，分别表示数列的个数和操作的次数，保证 $n \\le 5 \\times {10}^5$、$q \\le 5 \\times {10}^5$。\n\n接下来 $n$ 行，第 $i$ 行表示编号为 $i$ 的数列。每一行的第一个非负整数 $l_i$ 表示初始第 $i$ 号序列的数字个数，接下来有 $l_i$ 个非负整数 $a_{i,j}$ 按顺序表示数列中的数字。假定 $C_l = \\sum l_i$ 代表输入序列长度之和，则保证 $C_l \\le 5 \\times {10}^5$、$a_{i,j} \\le n + q$。\n\n接下来 $q$ 行，每行若干个正整数，表示一个操作，并按照题面描述中的格式输入。\n\n假定 $C_m = \\sum m$ 代表所有操作 $3$ 需要拼接的序列个数之和，则保证 $C_m \\le 5 \\times {10}^5$。", "outputFormat": "对于每次询问，一行输出一个整数表示对应的答案。", "hint": "**【样例解释 \\#1】**\n\n第一次询问查询序列 $1$ 的众数。由于序列包含两个 $1$，超过序列长度的一半，因此众数为 $1$。\n\n第二次询问查询序列 $2$ 的众数。由于序列只包含 $3$，因此众数为 $3$。\n\n第三次询问询问序列 $3$ 的众数。此时序列 $3$ 为 $(3, 3, 3, 1, 1, 2)$，不存在出现次数大于 $3$ 次的数，因此输出为 $-1$。\n\n----\n\n**【样例解释 \\#2】**\n\n第一次询问查询序列 $1, 2, 3, 4$ 拼接后得到的序列的众数。拼接的结果为 $(1, 2, 3, 4)$，不存在出现次数大于两次的数，因此输出为 $-1$。\n\n第四次询问查询序列 $1, 2, 3, 4$ 拼接后得到的序列的众数。拼接的结果为 $(1, 2, 2, 4, 4, 4, 4)$，众数为 $4$。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `major/major3.in` 与 `major/major3.ans`。\n\n该样例满足测试点 $1 \\sim 3$ 的限制。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `major/major4.in` 与 `major/major4.ans`。\n\n该样例满足测试点 $11 \\sim 12$ 的限制。\n\n----\n\n**【数据范围】**\n\n对于所有测试数据，保证 $1 \\le n, q, C_m, C_l \\le 5 \\times {10}^5$。\n\n| $n, q$ | $C_m, C_l$ | 测试点编号 | 特殊性质 A | 特殊性质 B | 特殊性质 C |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $\\le 300$ | $\\le 300$ | $1 \\sim 3$ | 否 | 否 | 是 |\n| $\\le 4000$ | $\\le 4000$ | $4 \\sim 7$ | 否 | 否 | 是 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $8$ | 是 | 是 | 是 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $9$ | 是 | 否 | 否 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $10$ | 否 | 是 | 否 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $11 \\sim 12$ | 否 | 否 | 是 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $13$ | 否 | 否 | 否 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $14$ | 是 | 是 | 是 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $15$ | 是 | 否 | 否 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $16$ | 否 | 是 | 否 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $17 \\sim 18$ | 否 | 否 | 是 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $19 \\sim 20$ | 否 | 否 | 否 |\n\n特殊性质 A：保证 $n = 1$ 且没有操作 $4$。  \n特殊性质 B：保证任意时刻任何序列中只有数字 $1$ 和 $2$。  \n特殊性质 C：保证没有操作 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2022] 众数", "background": null, "description": "**对于一个序列，定义其众数为序列中出现次数严格大于一半的数字。注意该定义与一般的定义有出入，在本题中请以题面中给出的定义为准。**\n\n一开始给定 $n$ 个长度不一的正整数序列，编号为 $1 \\sim n$，初始序列可以为空。这 $n$ 个序列被视为存在，其他编号对应的序列视为不存在。\n\n有 $q$ 次操作，操作有以下类型:\n\n- $1 \\ x \\ y$：在 $x$ 号序列末尾插入数字 $y$。保证 $x$ 号序列存在，且 $1 \\le x, y \\le n + q$。\n- $2 \\ x$：删除 $x$ 号序列末尾的数字，保证 $x$ 号序列存在、非空，且 $1 \\le x \\le n + q$。\n- $3 \\ m \\ x_1 \\ x_2 \\dots \\ x_m$：将 $x_1, x_2, \\ldots, x_m$ 号序列顺次拼接，得到一个新序列，并询问其众数。如果不存在满足上述条件的数，则返回 $-1$。数据保证对于任意 $1 \\le i \\le m$，$x_i$ 是一个仍然存在的序列，$1 \\le x_i \\le n + q$，且拼接得到的序列非空。**注意：不保证 $\\boldsymbol{x_1, \\ldots, x_m}$ 互不相同，询问中的合并操作不会对后续操作产生影响。**\n- $4 \\ x_1 \\ x_2 \\ x_3$：新建一个编号为 $x_3$ 的序列，其为 $x_1$ 号序列后顺次添加 $x_2$ 号序列中数字得到的结果，然后删除 $x_1, x_2$ 对应的序列。此时序列 $x_3$ 视为存在，而序列 $x_1, x_2$ 被视为不存在，在后续操作中也不会被再次使用。保证 $1 \\le x_1, x_2, x_3 \\le n + q$、$x_1 \\ne x_2$、序列 $x_1, x_2$ 在操作前存在、且在操作前没有序列使用过编号 $x_3$。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $q$，分别表示数列的个数和操作的次数，保证 $n \\le 5 \\times {10}^5$、$q \\le 5 \\times {10}^5$。\n\n接下来 $n$ 行，第 $i$ 行表示编号为 $i$ 的数列。每一行的第一个非负整数 $l_i$ 表示初始第 $i$ 号序列的数字个数，接下来有 $l_i$ 个非负整数 $a_{i,j}$ 按顺序表示数列中的数字。假定 $C_l = \\sum l_i$ 代表输入序列长度之和，则保证 $C_l \\le 5 \\times {10}^5$、$a_{i,j} \\le n + q$。\n\n接下来 $q$ 行，每行若干个正整数，表示一个操作，并按照题面描述中的格式输入。\n\n假定 $C_m = \\sum m$ 代表所有操作 $3$ 需要拼接的序列个数之和，则保证 $C_m \\le 5 \\times {10}^5$。", "outputFormat": "对于每次询问，一行输出一个整数表示对应的答案。", "hint": "**【样例解释 \\#1】**\n\n第一次询问查询序列 $1$ 的众数。由于序列包含两个 $1$，超过序列长度的一半，因此众数为 $1$。\n\n第二次询问查询序列 $2$ 的众数。由于序列只包含 $3$，因此众数为 $3$。\n\n第三次询问询问序列 $3$ 的众数。此时序列 $3$ 为 $(3, 3, 3, 1, 1, 2)$，不存在出现次数大于 $3$ 次的数，因此输出为 $-1$。\n\n----\n\n**【样例解释 \\#2】**\n\n第一次询问查询序列 $1, 2, 3, 4$ 拼接后得到的序列的众数。拼接的结果为 $(1, 2, 3, 4)$，不存在出现次数大于两次的数，因此输出为 $-1$。\n\n第四次询问查询序列 $1, 2, 3, 4$ 拼接后得到的序列的众数。拼接的结果为 $(1, 2, 2, 4, 4, 4, 4)$，众数为 $4$。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `major/major3.in` 与 `major/major3.ans`。\n\n该样例满足测试点 $1 \\sim 3$ 的限制。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `major/major4.in` 与 `major/major4.ans`。\n\n该样例满足测试点 $11 \\sim 12$ 的限制。\n\n----\n\n**【数据范围】**\n\n对于所有测试数据，保证 $1 \\le n, q, C_m, C_l \\le 5 \\times {10}^5$。\n\n| $n, q$ | $C_m, C_l$ | 测试点编号 | 特殊性质 A | 特殊性质 B | 特殊性质 C |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $\\le 300$ | $\\le 300$ | $1 \\sim 3$ | 否 | 否 | 是 |\n| $\\le 4000$ | $\\le 4000$ | $4 \\sim 7$ | 否 | 否 | 是 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $8$ | 是 | 是 | 是 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $9$ | 是 | 否 | 否 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $10$ | 否 | 是 | 否 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $11 \\sim 12$ | 否 | 否 | 是 |\n| $\\le {10}^5$ | $\\le {10}^5$ | $13$ | 否 | 否 | 否 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $14$ | 是 | 是 | 是 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $15$ | 是 | 否 | 否 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $16$ | 否 | 是 | 否 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $17 \\sim 18$ | 否 | 否 | 是 |\n| $\\le 5 \\times {10}^5$ | $\\le 5 \\times {10}^5$ | $19 \\sim 20$ | 否 | 否 | 否 |\n\n特殊性质 A：保证 $n = 1$ 且没有操作 $4$。  \n特殊性质 B：保证任意时刻任何序列中只有数字 $1$ 和 $2$。  \n特殊性质 C：保证没有操作 $2$。", "locale": "zh-CN"}}}
{"pid": "P8497", "type": "P", "difficulty": 7, "samples": [["1\n4 1\n0 1\n0 1\n0 1\n0 1\n", "14\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "NOI", "O2优化", "DP 套 DP"], "title": "[NOI2022] 移除石子", "background": "", "description": "你正在玩一个名为“移除石子”的小游戏。\n\n有 $n$ 堆石子排成一行，第 $i$ 堆有 $a_i$ 枚，你的任务是通过如下的操作将所有石子移除：\n\n- 操作一：选择一堆石子，将其中的至少 $2$ 枚石子移除；\n- 操作二：选择一个连续的编号区间 $[l, r]$（$1 \\le l \\le r \\le n$）并满足 $r - l \\ge 2$，将其中的每一堆石子都恰好移除 $1$ 枚。\n\n你可以采用任意顺序执行任意多次上述两种操作，直到无法再执行操作为止。若最后你能将所有石子全部移除则胜利。\n\n你或许已经开始计算起了诸如“有多少种本质不同的操作方式”的问题，但实际玩起来你却发现自己总是在输。因此，你打算玩个小花招：在游戏开始时，你在手里偷偷藏有 $k$ 枚石子，在执行所有操作之前你**可以且必须**将这些石子放入某一堆或某几堆石子中。你期望这会提高自己的胜率，但也清楚这可能会使自己输掉原本可能胜利的游戏。\n\n现在，你可以自由选择一个初始局面进行游戏，具体而言，每个 $a_i$ 可以选择 $[l_i, r_i]$ 范围内的任意整数。你希望计算出，在多少种初始局面下，自己存在至少一种获胜的方案。由于答案很大，你只需要输出其对 $({10}^9 + 7)$ 取模的结果。**两个初始局面不同，当且仅当存在至少一个 $\\boldsymbol{1 \\le i \\le n}$ 使得两者的 $\\boldsymbol{a_i}$ 不相等，注意这里的“初始局面”指的是你放入 $\\boldsymbol{k}$ 枚石子之前的局面。**", "inputFormat": "**本题有多组测试数据。** 第一行一个正整数 $T$ 表示测试数据组数，接下来依次给出每组测试数据。\n\n对于每组测试数据，第一行两个整数 $n, k$，分别表示石子堆数和加入的石子个数，接下来 $n$ 行，每行两个非负整数 $l_i, r_i$ 表示每堆石子初始石子数的范围。", "outputFormat": "对于每组数据输出一行一个整数，表示可能获胜的局面数对$({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n共有 $2^4 = 16$ 种可能的初始局面，可以证明除了 $(0 \\ 0 \\ 0 \\ 0)$ 和 $(1 \\ 0 \\ 0 \\ 1)$ 这两种初始局面无法获胜以外，其余初始局面均存在获胜方案。例如，初始局面为 $(1 \\ 0 \\ 1 \\ 0)$ 时，你可以将手中的 $1$ 枚石子放入第 $2$ 堆石子，使局面变为 $(1 \\ 1 \\ 1 \\ 0)$，再对区间 $[1, 3]$ 使用一次操作二即可。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `stone/stone2.in` 与 `stone/stone2.ans`。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `stone/stone3.in` 与 `stone/stone3.ans`。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `stone/stone4.in` 与 `stone/stone4.ans`。\n\n----\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，保证 $T \\le 10$，$3 \\le n \\le 1000$，$0 \\le l_i \\le r_i \\le {10}^9$，$0 \\le k \\le 100$。\n\n| 测试点编号 | $n \\le$ | $k \\le$ | 特殊条件 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 3$ | $5$ | $2$ | $r_i \\le 5$ |\n| $4 \\sim 5$ | $1000$ | $0$ | $l_i = r_i$ |\n| $6 \\sim 8$ | $1000$ | $100$ | $l_i = r_i$ |\n| $9 \\sim 11$ | $1000$ | $0$ | 无 |\n| $12 \\sim 13$ | $1000$ | $2$ | 无 |\n| $14 \\sim 15$ | $1000$ | $100$ | $r_i \\le 10$ |\n| $16 \\sim 20$ | $1000$ | $100$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2022] 移除石子", "background": "", "description": "你正在玩一个名为“移除石子”的小游戏。\n\n有 $n$ 堆石子排成一行，第 $i$ 堆有 $a_i$ 枚，你的任务是通过如下的操作将所有石子移除：\n\n- 操作一：选择一堆石子，将其中的至少 $2$ 枚石子移除；\n- 操作二：选择一个连续的编号区间 $[l, r]$（$1 \\le l \\le r \\le n$）并满足 $r - l \\ge 2$，将其中的每一堆石子都恰好移除 $1$ 枚。\n\n你可以采用任意顺序执行任意多次上述两种操作，直到无法再执行操作为止。若最后你能将所有石子全部移除则胜利。\n\n你或许已经开始计算起了诸如“有多少种本质不同的操作方式”的问题，但实际玩起来你却发现自己总是在输。因此，你打算玩个小花招：在游戏开始时，你在手里偷偷藏有 $k$ 枚石子，在执行所有操作之前你**可以且必须**将这些石子放入某一堆或某几堆石子中。你期望这会提高自己的胜率，但也清楚这可能会使自己输掉原本可能胜利的游戏。\n\n现在，你可以自由选择一个初始局面进行游戏，具体而言，每个 $a_i$ 可以选择 $[l_i, r_i]$ 范围内的任意整数。你希望计算出，在多少种初始局面下，自己存在至少一种获胜的方案。由于答案很大，你只需要输出其对 $({10}^9 + 7)$ 取模的结果。**两个初始局面不同，当且仅当存在至少一个 $\\boldsymbol{1 \\le i \\le n}$ 使得两者的 $\\boldsymbol{a_i}$ 不相等，注意这里的“初始局面”指的是你放入 $\\boldsymbol{k}$ 枚石子之前的局面。**", "inputFormat": "**本题有多组测试数据。** 第一行一个正整数 $T$ 表示测试数据组数，接下来依次给出每组测试数据。\n\n对于每组测试数据，第一行两个整数 $n, k$，分别表示石子堆数和加入的石子个数，接下来 $n$ 行，每行两个非负整数 $l_i, r_i$ 表示每堆石子初始石子数的范围。", "outputFormat": "对于每组数据输出一行一个整数，表示可能获胜的局面数对$({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n共有 $2^4 = 16$ 种可能的初始局面，可以证明除了 $(0 \\ 0 \\ 0 \\ 0)$ 和 $(1 \\ 0 \\ 0 \\ 1)$ 这两种初始局面无法获胜以外，其余初始局面均存在获胜方案。例如，初始局面为 $(1 \\ 0 \\ 1 \\ 0)$ 时，你可以将手中的 $1$ 枚石子放入第 $2$ 堆石子，使局面变为 $(1 \\ 1 \\ 1 \\ 0)$，再对区间 $[1, 3]$ 使用一次操作二即可。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `stone/stone2.in` 与 `stone/stone2.ans`。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `stone/stone3.in` 与 `stone/stone3.ans`。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `stone/stone4.in` 与 `stone/stone4.ans`。\n\n----\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，保证 $T \\le 10$，$3 \\le n \\le 1000$，$0 \\le l_i \\le r_i \\le {10}^9$，$0 \\le k \\le 100$。\n\n| 测试点编号 | $n \\le$ | $k \\le$ | 特殊条件 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 3$ | $5$ | $2$ | $r_i \\le 5$ |\n| $4 \\sim 5$ | $1000$ | $0$ | $l_i = r_i$ |\n| $6 \\sim 8$ | $1000$ | $100$ | $l_i = r_i$ |\n| $9 \\sim 11$ | $1000$ | $0$ | 无 |\n| $12 \\sim 13$ | $1000$ | $2$ | 无 |\n| $14 \\sim 15$ | $1000$ | $100$ | $r_i \\le 10$ |\n| $16 \\sim 20$ | $1000$ | $100$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8498", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "NOI", "交互题", "Special Judge", "O2优化"], "title": "[NOI2022] 树上邻域数点", "background": "**这是一道交互题。**\n\n**在提交本题前请务必仔细阅读以下内容。**\n\n本题只支持 C++ 语言提交（建议使用 C++14，请不要使用 C++14 (GCC9)）。\n\n由于洛谷特殊的交互机制，在提交本题时，请去掉代码中的 ```#include \"count.h\"``` 语句，并将下发文件 **`count_.h`** （注意并不是 `count.zip` 里的 `count.h`）中的内容粘贴到代码最开头，然后提交。\n\n如果您无法打开 `count_.h`，那么可以复制下面的内容。\n\n```cpp\n#ifndef CIRCLE_H\n#define CIRCLE_H\n#include<vector>\nstruct info{\n  unsigned val;\n  unsigned poi[2];\n};\nconst info emptyinfo=info{0,(unsigned)-1,(unsigned)-1};\ninfo MR(info a,info b);\ninfo MC(info a,info b);\nvoid init(int T,int n,int q,std::vector<int>dad,std::vector<info>ve,int M);\nbool isempty(info a);\ninfo ask(int x,int d);\n\n#endif\n```\n\n如果您在提交本题时出现了任何意外的情况，请咨询管理员。", "description": "给出五元组 $(T, I, S_V, S_E, \\iota)$，其中：\n\n- $T$ 是一棵 $n$ 个点的有根树 $T = (V, E)$，其中 $V$ 为 $T$ 的点集，$E$ 为 $T$ 的边集。树的节点被编号为 $1, 2, \\ldots, n$，其中根节点编号为 $1$。\n- $I$ 是一个集合，集合中的元素称作**信息**。其中有两个不同的特殊元素：单位元 $\\epsilon$ 和不合法信息 $\\bot$。\n\n对于一般的信息，其都具有**点集合**和**边集合**两个属性。特别的，对于单位元，其只有边集合的属性，而对于不合法信息，其没有以上两种属性。\n\n- 对于信息 $o \\in I \\setminus \\{ \\epsilon, \\bot \\}$，$o$ 的**点集合**是 $V$ 的一个二元子集，记作 $S_V(o)$，满足 $S_V(o) \\subseteq V$ 且 $\\lvert S_V(o) \\rvert = 2$。其中，两个集合 $A, B$ 的差 $A \\setminus B$ 被定义为 $A \\setminus B = \\{ x \\in A \\hspace{3mu}\\vert\\hspace{3mu} x \\notin B \\}$。\n- 对于信息 $o \\in I \\setminus \\{ \\bot \\}$，$o$ 的**边集合**是 $E$ 的一个子集，记作 $S_E(o)$，满足 $S_E(o) \\subseteq E$。规定单位元的边集合为空，也即 $S_E(\\epsilon) = \\varnothing$。\n- 对于树上的任何一条边 $e \\in E$，记 $e = (u, v)$，存在一个关于 $e$ 的信息 $\\iota(e) \\in I$，它以其端点为点集合、自身为边集合，即 $S_V(\\iota(e)) = \\{ u, v \\}$、$S_E(\\iota(e)) = \\{ e \\}$。\n\n信息有两种合并的方式，分别记作 $R$ 和 $C$。对于 $\\forall a, b \\in I$，记 $r = R(a, b), c = C(a, b)$，满足 $r, c \\in I$，则：\n\n- 单位元和任何信息合并都得到对方。也即，如果 $a = \\epsilon$，那么 $r = c = b$；如果 $b = \\epsilon$，那么 $r = c = a$。\n- 不合法信息和任何信息合并都得到不合法信息。也即，如果 $a = \\bot$ 或者 $b = \\bot$，那么 $r = c = \\bot$。\n- 对于剩下的情况，如果两个信息的**边集合**的交集非空，或者**点集合**的交集的大小不为 $1$，则合并得到不合法信息。也即，如果 $S_E(a) \\cap S_E(b) \\ne \\varnothing$ 或 $\\lvert S_V(a) \\cap S_V(b) \\rvert \\ne 1$，则 $r = c = \\bot$。\n- 否则，有\n  $$ S_E(r) = S_E(c) = S_E(a) \\cup S_E(b) \\text{,} $$\n  $$ S_V(r) = S_V(a) \\text{,} $$\n  $$ S_V(c) = S_V(a) \\oplus S_V(b) \\text{,} $$\n  其中 $\\oplus$ 表示集合的对称差运算，也即 $A \\oplus B = (A \\cup B) \\setminus (A \\cap B)$。\n\n定义 $T$ 中两个点的树上距离为树上以两个点为端点的唯一简单路径经过的边数。\n\n给出评分参数 $M$ 和 $q$ 次询问，每次询问给出树上的一个点 $u$ 和一个非负整数 $d$。记点集 $X$ 为 $T$ 中所有与 $u$ 的树上距离不超过 $d$ 的点构成的集合，又记边集 $Y = \\{ (a, b) \\in E \\hspace{3mu}\\vert\\hspace{3mu} a, b \\in X \\}$ 为 $X$ 内部的边集。可以证明，从 $\\epsilon$ 和所有 $\\iota(e)$（$e \\in E$）出发，总是能通过有限次 $R, C$ 的调用得到信息 $o \\ne \\bot$ 满足 $S_E(o) = Y$。\n\n每组询问中，你需要在 $R$ 和 $C$ 的调用次数总和不超过 $M$ 的限制下构造出一个满足这样的要求的信息 $o$。特别地，如果 $d = 0$，则直接返回单位元 $\\epsilon$ 即可。\n\n----\n\n**【实现细节】**\n\n请确保你的程序开头有 `#include \"count.h\"`。\n\n头文件 `count.h` 中实现了如下内容：\n\n1. 定义了信息对应的数据类型 `info`；\n2. 定义了 $\\epsilon$ 所对应的 `info` 类型常量 `emptyinfo`，你可以在程序中直接使用。\n3. 定义并实现了以下两个信息合并函数，你可以在程序中直接调用：\n   \n   ```cpp\n   info MR(info a,info b);\n   info MC(info a,info b);\n   ```\n   \n   - 两个函数分别返回 $R(a, b)$ 与 $C(a, b)$ 对应的信息。\n   \n   **你需要保证调用 $\\boldsymbol{R(a, b)}$ 与 $\\boldsymbol{C(a, b)}$ 时结果不为 $\\boldsymbol{\\bot}$，否则程序可能会出现异常行为。**\n4. 定义并实现了判定一个信息是否为单位元的函数，你可以在程序中直接调用：\n   ```cpp\n   bool isempty(info a);\n   ```\n   - 这个函数返回真当且仅当 $a$ 为单位元。\n\n可以查看参考交互库了解更多实现细节。\n\n**你不需要，也不应该实现主函数。** 你需要实现如下几个函数：\n\n```cpp\nvoid init(int T, int n, int q, vector<int> fa, vector<info> e, int M);\n```\n\n- `T` 表示测试点编号，`n` 表示树的点数，`q` 表示询问数，`M` 表示该测试点的评分参数。\n- `fa` 和 `e` 的长度均为 $n - 1$。对于 $0 \\le i < n - 1$，$fa[i]$ 和 $i + 2$ 为第 $i$ 条边 $e_i$ 的两个端点，$e[i]$ 为题目描述中提到的 $\\iota(e_i)$ 所对应的 `info` 类型元素。数据保证 $fa[i]$ 小于 $i + 2$。\n\n```cpp\ninfo ask(int u, int d);\n```\n\n给出一个询问，参数的意义见题目描述。你需要在函数结束时返回一个满足题设条件的信息。\n\n最终测试时，在每个测试点，交互库会**恰好**调用一次 `init` 函数，随后调用 $q$ 次 `ask`函数。交互库会使用特殊的实现方式，单个 `info` 类型的变量会恒定消耗 $12$ 字节内存，**这与下发的参考交互库不同**。为保证程序运行时内存使用在题目限制内，你需要保证运行过程中没有过多的 `info` 类型变量同时存在。\n\n保证在满足调用次数限制且不进行 `isempty` 函数调用的情况下，最终测试的交互库运行所需的时间不超过 0.6 秒，交互库本身所消耗的内存不超过 16 MiB。保证在只执行 ${10}^8$ 次 `isempty` 函数调用的情况下，最终测试的交互库运行的时间不超过 0.25 秒。\n\n在下发文件中包含一个名为 `count.cpp` 的文件，作为示例程序，选手可以在此基础上继续实现本题。在下发文件中还额外包含一个名为 `count_backup.h` 的备份文件，我们保证其与 `count.h` 文件完全相同。\n\n----\n\n**【测试程序方式】**\n\n本题目录下提供了两个交互库的参考实现 `grader.o`、`checker.o`，其为两个不同的交互库编译产生的可链接文件。最终测试时所用的交互库实现与该实现有不同，因此选手的解法**不应依赖交互库的具体实现**，同时也不应该依赖 `count.h` 中 `info` 类型的具体实现。\n\n你需要修改下发的 `count.h` 来帮助进行链接。具体的，在将源代码 `count.cpp` 和程序 `grader.o` 进行链接的时候，你需要注释掉 `count.h` 代码的第 5 行，并保留第 4 行的代码。链接 `checker.o` 方法类似，需要注释掉 `count.h` 代码的第 4 行，并保留第 5 行的代码。选手可以对 `count.h` 的实现自行修改来实现不同程序的编译。\n\n修改后，选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```bash\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o grader.o -o count\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o checker.o -o count\n```\n\n其中第一行命令会编译当前 `count.cpp` 后与 `grader.o` 链接起来，生成可执行文件 `count`，第二行命令则会编译当前 `count.cpp` 后与 `checker.o` 链接起来，生成可执行文件 `count`。\n\n按上述方法编译得到的可执行文件 `count`，其运行方式如下：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行四个整数 $id, n, q, M$，分别表示测试点编号、树的点数、询问数和评分参数；\n  - 第二行 $n - 1$ 个整数 $p_2, p_3, \\ldots, p_n$，分别表示 $2$ 至 $n$ 的父亲节点编号，在本地调试时你需要保证 $\\forall i \\in [2, n]$，$p_i < i$；\n  - 接下来 $q$ 行每行两个整数 $u, d$，描述一次询问。\n- 读入之后，交互库会进行测试。如果你的程序不满足交互库限制，其会在输出中返回对应的错误信息。否则，对于链接的可执行文件，其输出如下：\n  - 总共一行三个整数 $C_1, C_2, C_3$，其中：\n    - $C_1$ 表示程序在 `init` 函数中调用交互库函数的总次数；\n    - $C_2$ 表示程序在运行过程中调用交互库函数的总次数；\n    - $C_3$ 表示程序在 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。\n    - 对于上述三个统计量，我们只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n- 在链接不同文件的时候，其能够进行的检查也不同，具体地：\n  - `grader.o`：其在运行时不会检查 `ask` 函数返回的信息是否正确，但可以帮助选手判断交互操作是否符合要求。这份程序运行时间最接近评测时的交互库，因此选手可以利用该程序测试运行速度，但不保证程序正确性。\n  - `checker.o`：其在运行时会检查 `ask` 函数返回的信息是否正确，也可以帮助选手判断交互操作是否符合要求。同时其会检查 `ask` 函数返回的信息是否正确。这份程序可以进行答案正确性的检查。\n\n选手在调试时需要保证输入可执行文件 `count` 的数据满足上述输入格式，否则不保证输出结果正确。\n", "inputFormat": "见【测试程序方式】。", "outputFormat": "见【测试程序方式】。", "hint": "**【评分方式】**\n\n最终评测**只会**收取 `count.cpp`，修改选手目录下其他文件不会对评测结果产生影响。**注意：**\n\n- **未初始化的 `info` 类型的变量不保证是 `emptyinfo`。**\n- **请不要尝试访问或修改 `info` 类型的成员变量，否则将被视为攻击交互库。**\n- **请不要在 `init` 函数调用之前调用 `MR` 和 `MC` 函数，否则可能会发生未定义行为。**\n- **你只能访问自己定义的变量和交互库返回的 `info` 类型变量，尝试访问其他空间将可能导致编译错误或运行时错误。**\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若程序执行了非法的函数调用或询问操作中给出了错误回答，该测试点将会获得 0 分。否则，记 $C_1, C_3$ 分别表示你的程序在 `init` 函数中调用交互库函数的次数，和你的程序在所有 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。如果 $C_1 \\le 3 \\cdot {10}^7$ 且 $C_3$ 不超过该测试点的评分参数 $M$，你将获得该测试点的分数，否则你无法获得该测试点的分数。注意：计算 $C_1, C_3$ 时只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n\n----\n\n**【样例 \\#1】**\n\n见附件中的 `count/count1.in` 与 `count/count1.ans`。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `count/count2.in` 与 `count/count2.ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `count/count3.in` 与 `count/count3.ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `count/count4.in` 与 `count/count4.ans`。\n\n----\n\n**【数据范围】**\n\n对于所有测试点，$1 \\le n \\le 2 \\times {10}^5$，$1 \\le q \\le {10}^6$；每组询问中，有 $1 \\le u \\le n$，$1 \\le d \\le n - 1$。\n\n| 测试点   | $n=$              | $q=$            | 特殊性质 | $M=$  |\n|:-----:|:-----------------:|:---------------:|:----:|:-----:|\n| $1$   | $1000$            | $10^4$          |      | $500$ |\n| $2$   | $2000$            | $10^4$          |      | $500$ |\n| $3,4$ | $10^5$            | $10^6$          | A    | $5$   |\n| $5,6$ | $6 \\times 10^4$   | $6\\times 10^4$  | B    | $50$  |\n| $7$   | $6 \\times 10^4$   | $6 \\times 10^4$ | B    | $5$   |\n| $8$   | $10^5$            | $10^5$          | B    | $5$   |\n| $9$   | $7500$            | $5 \\times 10^4$ | C    | $500$ |\n| $10$  | $10^4$            | $5 \\times 10^4$ |      | $500$ |\n| $11$  | $1.5 \\times 10^4$ | $5 \\times 10^4$ |      | $500$ |\n| $12$  | $2 \\times 10^4$   | $5 \\times 10^4$ |      | $50$  |\n| $13$  | $2.5 \\times 10^4$ | $5 \\times 10^4$ |      | $5$   |\n| $14$  | $3 \\times 10^4$   | $10^5$          |      | $5$   |\n| $15$  | $6 \\times 10^4$   | $10^6$          | D    | $5$   |\n| $16$  | $6 \\times 10^4$   | $10^6$          |      | $5$   |\n| $17$  | $8 \\times 10^4$   | $10^6$          |      | $5$   |\n| $18$  | $10^5$            | $10^6$          |      | $5$   |\n| $19$  | $1.5 \\times 10^5$ | $10^6$          |      | $5$   |\n| $20$  | $2 \\times 10^5$   | $10^6$          |      | $1$   |\n\n\n特殊性质 A：保证 $\\forall i \\in [1, n - 1]$，编号为 $i + 1$ 的点的父节点为 $i$。  \n特殊性质 B：保证所有询问均满足 $u = 1$。  \n特殊性质 C：保证所有询问均满足 $d \\le 100$。  \n特殊性质 D：保证所有询问均满足 $d \\ge 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2022] 树上邻域数点", "background": "**这是一道交互题。**\n\n**在提交本题前请务必仔细阅读以下内容。**\n\n本题只支持 C++ 语言提交（建议使用 C++14，请不要使用 C++14 (GCC9)）。\n\n由于洛谷特殊的交互机制，在提交本题时，请去掉代码中的 ```#include \"count.h\"``` 语句，并将下发文件 **`count_.h`** （注意并不是 `count.zip` 里的 `count.h`）中的内容粘贴到代码最开头，然后提交。\n\n如果您无法打开 `count_.h`，那么可以复制下面的内容。\n\n```cpp\n#ifndef CIRCLE_H\n#define CIRCLE_H\n#include<vector>\nstruct info{\n  unsigned val;\n  unsigned poi[2];\n};\nconst info emptyinfo=info{0,(unsigned)-1,(unsigned)-1};\ninfo MR(info a,info b);\ninfo MC(info a,info b);\nvoid init(int T,int n,int q,std::vector<int>dad,std::vector<info>ve,int M);\nbool isempty(info a);\ninfo ask(int x,int d);\n\n#endif\n```\n\n如果您在提交本题时出现了任何意外的情况，请咨询管理员。", "description": "给出五元组 $(T, I, S_V, S_E, \\iota)$，其中：\n\n- $T$ 是一棵 $n$ 个点的有根树 $T = (V, E)$，其中 $V$ 为 $T$ 的点集，$E$ 为 $T$ 的边集。树的节点被编号为 $1, 2, \\ldots, n$，其中根节点编号为 $1$。\n- $I$ 是一个集合，集合中的元素称作**信息**。其中有两个不同的特殊元素：单位元 $\\epsilon$ 和不合法信息 $\\bot$。\n\n对于一般的信息，其都具有**点集合**和**边集合**两个属性。特别的，对于单位元，其只有边集合的属性，而对于不合法信息，其没有以上两种属性。\n\n- 对于信息 $o \\in I \\setminus \\{ \\epsilon, \\bot \\}$，$o$ 的**点集合**是 $V$ 的一个二元子集，记作 $S_V(o)$，满足 $S_V(o) \\subseteq V$ 且 $\\lvert S_V(o) \\rvert = 2$。其中，两个集合 $A, B$ 的差 $A \\setminus B$ 被定义为 $A \\setminus B = \\{ x \\in A \\hspace{3mu}\\vert\\hspace{3mu} x \\notin B \\}$。\n- 对于信息 $o \\in I \\setminus \\{ \\bot \\}$，$o$ 的**边集合**是 $E$ 的一个子集，记作 $S_E(o)$，满足 $S_E(o) \\subseteq E$。规定单位元的边集合为空，也即 $S_E(\\epsilon) = \\varnothing$。\n- 对于树上的任何一条边 $e \\in E$，记 $e = (u, v)$，存在一个关于 $e$ 的信息 $\\iota(e) \\in I$，它以其端点为点集合、自身为边集合，即 $S_V(\\iota(e)) = \\{ u, v \\}$、$S_E(\\iota(e)) = \\{ e \\}$。\n\n信息有两种合并的方式，分别记作 $R$ 和 $C$。对于 $\\forall a, b \\in I$，记 $r = R(a, b), c = C(a, b)$，满足 $r, c \\in I$，则：\n\n- 单位元和任何信息合并都得到对方。也即，如果 $a = \\epsilon$，那么 $r = c = b$；如果 $b = \\epsilon$，那么 $r = c = a$。\n- 不合法信息和任何信息合并都得到不合法信息。也即，如果 $a = \\bot$ 或者 $b = \\bot$，那么 $r = c = \\bot$。\n- 对于剩下的情况，如果两个信息的**边集合**的交集非空，或者**点集合**的交集的大小不为 $1$，则合并得到不合法信息。也即，如果 $S_E(a) \\cap S_E(b) \\ne \\varnothing$ 或 $\\lvert S_V(a) \\cap S_V(b) \\rvert \\ne 1$，则 $r = c = \\bot$。\n- 否则，有\n  $$ S_E(r) = S_E(c) = S_E(a) \\cup S_E(b) \\text{,} $$\n  $$ S_V(r) = S_V(a) \\text{,} $$\n  $$ S_V(c) = S_V(a) \\oplus S_V(b) \\text{,} $$\n  其中 $\\oplus$ 表示集合的对称差运算，也即 $A \\oplus B = (A \\cup B) \\setminus (A \\cap B)$。\n\n定义 $T$ 中两个点的树上距离为树上以两个点为端点的唯一简单路径经过的边数。\n\n给出评分参数 $M$ 和 $q$ 次询问，每次询问给出树上的一个点 $u$ 和一个非负整数 $d$。记点集 $X$ 为 $T$ 中所有与 $u$ 的树上距离不超过 $d$ 的点构成的集合，又记边集 $Y = \\{ (a, b) \\in E \\hspace{3mu}\\vert\\hspace{3mu} a, b \\in X \\}$ 为 $X$ 内部的边集。可以证明，从 $\\epsilon$ 和所有 $\\iota(e)$（$e \\in E$）出发，总是能通过有限次 $R, C$ 的调用得到信息 $o \\ne \\bot$ 满足 $S_E(o) = Y$。\n\n每组询问中，你需要在 $R$ 和 $C$ 的调用次数总和不超过 $M$ 的限制下构造出一个满足这样的要求的信息 $o$。特别地，如果 $d = 0$，则直接返回单位元 $\\epsilon$ 即可。\n\n----\n\n**【实现细节】**\n\n请确保你的程序开头有 `#include \"count.h\"`。\n\n头文件 `count.h` 中实现了如下内容：\n\n1. 定义了信息对应的数据类型 `info`；\n2. 定义了 $\\epsilon$ 所对应的 `info` 类型常量 `emptyinfo`，你可以在程序中直接使用。\n3. 定义并实现了以下两个信息合并函数，你可以在程序中直接调用：\n   \n   ```cpp\n   info MR(info a,info b);\n   info MC(info a,info b);\n   ```\n   \n   - 两个函数分别返回 $R(a, b)$ 与 $C(a, b)$ 对应的信息。\n   \n   **你需要保证调用 $\\boldsymbol{R(a, b)}$ 与 $\\boldsymbol{C(a, b)}$ 时结果不为 $\\boldsymbol{\\bot}$，否则程序可能会出现异常行为。**\n4. 定义并实现了判定一个信息是否为单位元的函数，你可以在程序中直接调用：\n   ```cpp\n   bool isempty(info a);\n   ```\n   - 这个函数返回真当且仅当 $a$ 为单位元。\n\n可以查看参考交互库了解更多实现细节。\n\n**你不需要，也不应该实现主函数。** 你需要实现如下几个函数：\n\n```cpp\nvoid init(int T, int n, int q, vector<int> fa, vector<info> e, int M);\n```\n\n- `T` 表示测试点编号，`n` 表示树的点数，`q` 表示询问数，`M` 表示该测试点的评分参数。\n- `fa` 和 `e` 的长度均为 $n - 1$。对于 $0 \\le i < n - 1$，$fa[i]$ 和 $i + 2$ 为第 $i$ 条边 $e_i$ 的两个端点，$e[i]$ 为题目描述中提到的 $\\iota(e_i)$ 所对应的 `info` 类型元素。数据保证 $fa[i]$ 小于 $i + 2$。\n\n```cpp\ninfo ask(int u, int d);\n```\n\n给出一个询问，参数的意义见题目描述。你需要在函数结束时返回一个满足题设条件的信息。\n\n最终测试时，在每个测试点，交互库会**恰好**调用一次 `init` 函数，随后调用 $q$ 次 `ask`函数。交互库会使用特殊的实现方式，单个 `info` 类型的变量会恒定消耗 $12$ 字节内存，**这与下发的参考交互库不同**。为保证程序运行时内存使用在题目限制内，你需要保证运行过程中没有过多的 `info` 类型变量同时存在。\n\n保证在满足调用次数限制且不进行 `isempty` 函数调用的情况下，最终测试的交互库运行所需的时间不超过 0.6 秒，交互库本身所消耗的内存不超过 16 MiB。保证在只执行 ${10}^8$ 次 `isempty` 函数调用的情况下，最终测试的交互库运行的时间不超过 0.25 秒。\n\n在下发文件中包含一个名为 `count.cpp` 的文件，作为示例程序，选手可以在此基础上继续实现本题。在下发文件中还额外包含一个名为 `count_backup.h` 的备份文件，我们保证其与 `count.h` 文件完全相同。\n\n----\n\n**【测试程序方式】**\n\n本题目录下提供了两个交互库的参考实现 `grader.o`、`checker.o`，其为两个不同的交互库编译产生的可链接文件。最终测试时所用的交互库实现与该实现有不同，因此选手的解法**不应依赖交互库的具体实现**，同时也不应该依赖 `count.h` 中 `info` 类型的具体实现。\n\n你需要修改下发的 `count.h` 来帮助进行链接。具体的，在将源代码 `count.cpp` 和程序 `grader.o` 进行链接的时候，你需要注释掉 `count.h` 代码的第 5 行，并保留第 4 行的代码。链接 `checker.o` 方法类似，需要注释掉 `count.h` 代码的第 4 行，并保留第 5 行的代码。选手可以对 `count.h` 的实现自行修改来实现不同程序的编译。\n\n修改后，选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```bash\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o grader.o -o count\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o checker.o -o count\n```\n\n其中第一行命令会编译当前 `count.cpp` 后与 `grader.o` 链接起来，生成可执行文件 `count`，第二行命令则会编译当前 `count.cpp` 后与 `checker.o` 链接起来，生成可执行文件 `count`。\n\n按上述方法编译得到的可执行文件 `count`，其运行方式如下：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行四个整数 $id, n, q, M$，分别表示测试点编号、树的点数、询问数和评分参数；\n  - 第二行 $n - 1$ 个整数 $p_2, p_3, \\ldots, p_n$，分别表示 $2$ 至 $n$ 的父亲节点编号，在本地调试时你需要保证 $\\forall i \\in [2, n]$，$p_i < i$；\n  - 接下来 $q$ 行每行两个整数 $u, d$，描述一次询问。\n- 读入之后，交互库会进行测试。如果你的程序不满足交互库限制，其会在输出中返回对应的错误信息。否则，对于链接的可执行文件，其输出如下：\n  - 总共一行三个整数 $C_1, C_2, C_3$，其中：\n    - $C_1$ 表示程序在 `init` 函数中调用交互库函数的总次数；\n    - $C_2$ 表示程序在运行过程中调用交互库函数的总次数；\n    - $C_3$ 表示程序在 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。\n    - 对于上述三个统计量，我们只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n- 在链接不同文件的时候，其能够进行的检查也不同，具体地：\n  - `grader.o`：其在运行时不会检查 `ask` 函数返回的信息是否正确，但可以帮助选手判断交互操作是否符合要求。这份程序运行时间最接近评测时的交互库，因此选手可以利用该程序测试运行速度，但不保证程序正确性。\n  - `checker.o`：其在运行时会检查 `ask` 函数返回的信息是否正确，也可以帮助选手判断交互操作是否符合要求。同时其会检查 `ask` 函数返回的信息是否正确。这份程序可以进行答案正确性的检查。\n\n选手在调试时需要保证输入可执行文件 `count` 的数据满足上述输入格式，否则不保证输出结果正确。\n", "inputFormat": "见【测试程序方式】。", "outputFormat": "见【测试程序方式】。", "hint": "**【评分方式】**\n\n最终评测**只会**收取 `count.cpp`，修改选手目录下其他文件不会对评测结果产生影响。**注意：**\n\n- **未初始化的 `info` 类型的变量不保证是 `emptyinfo`。**\n- **请不要尝试访问或修改 `info` 类型的成员变量，否则将被视为攻击交互库。**\n- **请不要在 `init` 函数调用之前调用 `MR` 和 `MC` 函数，否则可能会发生未定义行为。**\n- **你只能访问自己定义的变量和交互库返回的 `info` 类型变量，尝试访问其他空间将可能导致编译错误或运行时错误。**\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若程序执行了非法的函数调用或询问操作中给出了错误回答，该测试点将会获得 0 分。否则，记 $C_1, C_3$ 分别表示你的程序在 `init` 函数中调用交互库函数的次数，和你的程序在所有 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。如果 $C_1 \\le 3 \\cdot {10}^7$ 且 $C_3$ 不超过该测试点的评分参数 $M$，你将获得该测试点的分数，否则你无法获得该测试点的分数。注意：计算 $C_1, C_3$ 时只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n\n----\n\n**【样例 \\#1】**\n\n见附件中的 `count/count1.in` 与 `count/count1.ans`。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `count/count2.in` 与 `count/count2.ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `count/count3.in` 与 `count/count3.ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `count/count4.in` 与 `count/count4.ans`。\n\n----\n\n**【数据范围】**\n\n对于所有测试点，$1 \\le n \\le 2 \\times {10}^5$，$1 \\le q \\le {10}^6$；每组询问中，有 $1 \\le u \\le n$，$1 \\le d \\le n - 1$。\n\n| 测试点   | $n=$              | $q=$            | 特殊性质 | $M=$  |\n|:-----:|:-----------------:|:---------------:|:----:|:-----:|\n| $1$   | $1000$            | $10^4$          |      | $500$ |\n| $2$   | $2000$            | $10^4$          |      | $500$ |\n| $3,4$ | $10^5$            | $10^6$          | A    | $5$   |\n| $5,6$ | $6 \\times 10^4$   | $6\\times 10^4$  | B    | $50$  |\n| $7$   | $6 \\times 10^4$   | $6 \\times 10^4$ | B    | $5$   |\n| $8$   | $10^5$            | $10^5$          | B    | $5$   |\n| $9$   | $7500$            | $5 \\times 10^4$ | C    | $500$ |\n| $10$  | $10^4$            | $5 \\times 10^4$ |      | $500$ |\n| $11$  | $1.5 \\times 10^4$ | $5 \\times 10^4$ |      | $500$ |\n| $12$  | $2 \\times 10^4$   | $5 \\times 10^4$ |      | $50$  |\n| $13$  | $2.5 \\times 10^4$ | $5 \\times 10^4$ |      | $5$   |\n| $14$  | $3 \\times 10^4$   | $10^5$          |      | $5$   |\n| $15$  | $6 \\times 10^4$   | $10^6$          | D    | $5$   |\n| $16$  | $6 \\times 10^4$   | $10^6$          |      | $5$   |\n| $17$  | $8 \\times 10^4$   | $10^6$          |      | $5$   |\n| $18$  | $10^5$            | $10^6$          |      | $5$   |\n| $19$  | $1.5 \\times 10^5$ | $10^6$          |      | $5$   |\n| $20$  | $2 \\times 10^5$   | $10^6$          |      | $1$   |\n\n\n特殊性质 A：保证 $\\forall i \\in [1, n - 1]$，编号为 $i + 1$ 的点的父节点为 $i$。  \n特殊性质 B：保证所有询问均满足 $u = 1$。  \n特殊性质 C：保证所有询问均满足 $d \\le 100$。  \n特殊性质 D：保证所有询问均满足 $d \\ge 1000$。", "locale": "zh-CN"}}}
{"pid": "P8499", "type": "P", "difficulty": 6, "samples": [["0 3 1\n3\n2 -1 2\n2\n-1 1\n4\n3 3 -1 3\n3\n2 3 -1\n5\n-1 1 5 5 1\n5\n2 3 -1 3 2\n", "Yes\nNo\nYes\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "NOI", "O2优化"], "title": "[NOI2022] 挑战 NPC Ⅱ", "background": "", "description": "诸由杨是一名咸鱼大学生，虽然他每天仍然幻想着在多项式时间内解决 NPC 问题。\n\n诸由杨上课的时候了解到子图同构问题是一个 NPC 问题。他打算给出一个子图同构问题的多项式判定算法，间接地去证明 P = NP，这样他一定可以凭借这个伟大的工作荣获图灵奖！只可惜诸由杨才疏学浅，连子图同构问题属于 NPC 的证明都没有想出来。因而他退而求其次，准备判定一个更加简单的问题：\n\n给定两棵有根树 $G, H$。设 $\\lvert G \\rvert$ 代表树 $G$ 中的节点个数，则这两棵树满足如下限制：$1 \\leq \\lvert H \\rvert \\leq \\lvert G \\rvert \\leq \\lvert H \\rvert + k$。这里诸由杨保证 $k$ 是一个小常数。\n\n诸由杨可以删除 $G$ 中的若干个节点，假定删除节点后后得到的子图为 $G'$。他想要知道是否存在一种删除节点的方式，使得删除后得到的子图 $G'$ 满足如下条件：\n\n- $G'$ 连通。\n- $G'$ 包含 $G$ 中的根节点（也就是说 $G$ 根节点在删除过程中没有被删除）。\n- $G'$ 和 $H$ 同构（也就是说存在一种让 $G'$ 中点重标号的方式，使得重标号得到的图和 $H$ 完全相同，且 $G$ 中的根节点经过重标号后恰好为 $H$ 的根节点）。", "inputFormat": "本题有多组测试数据。\n\n输入的第一行依次包含两个正整数 $C,T$ 和一个非负整数 $k$，三个数字分别表示当前测试点编号，测试数据组数和题目中给定的常数。如果当前测试数据为样例则 $C = 0$。保证 $T \\leq 500$、$k \\leq 5$。\n\n对于每一组测试数据：\n\n输入的第一行包含一个正整数 $n_1$，表示树 $G$ 中的节点个数，保证 $1 \\leq n_1 \\leq {10}^5$，且 $\\sum n_1 \\leq 5 \\times {10}^5$。\n\n输入的第二行包含 $n_1$ 个整数，描述了树 $G$ 的结构。具体地，第 $i$（$1 \\leq i \\leq n_1$）个整数 $a_i$ 表示在树 $G$ 中节点 $i$ 的父节点，如果其为根节点则 $a_i = -1$。保证按照上述规则得到的树为连通有根树。\n\n输入的第三行包含一个正整数 $n_2$，表示 $H$ 中的节点个数，保证对于所有测试数据，满足 $\\max(1, n_1 - k) \\leq n_2 \\leq n_1$。\n\n输入的第四行包含 $n_2$ 个整数，描述了树 $H$ 的结构。具体地，第 $i$（$1 \\leq i \\leq n_2$）个整数 $b_i$ 表示在树 $H$ 中节点 $i$ 的父节点，如果其为根节点则 $b_i = -1$。保证按照上述规则得到的树为连通有根树。", "outputFormat": "对于每一组测试数据：\n\n输出一行一个字符串。如果存在删除 $G$ 中节点的方式，使得其能够同时满足上述三个条件，则输出 `Yes`；否则输出 `No`。", "hint": "**【样例解释 \\#1】**\n\n对于第一个测试点，我们删除第一棵树的 $1$ 号节点。此时剩余的树和输入第二棵树均为包含两个节点的有根树，因而输出为 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vyoktd4u.png)\n\n\n对于第二个测试点，输入第一颗树深度为 $1$，但是输入第二颗树深度为 $2$。因而不论如何删除第一颗树的节点不会导致其树高增加到 $2$，因而输出为 `No`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r1szu0zb.png)\n\n对于第三个测试点，其输入两颗树均同构于下图的树，因而因而输出为 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxyllt4y.png)\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `iso/iso2.in` 与 `iso/iso2.ans`。\n\n该样例数据范围满足测试点 $7 \\sim 8$。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `iso/iso3.in` 与 `iso/iso3.ans`。\n\n该样例数据范围满足测试点 $9 \\sim 10$。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `iso/iso4.in` 与 `iso/iso4.ans`。\n\n该样例数据范围满足测试点 $13$。\n\n----\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\leq T \\leq 500$，$1 \\le n_2 \\leq n_1 \\le {10}^5$，$\\sum n_1 \\leq 5 \\times {10}^5$，$0 \\leq k \\leq 5$。各测试点的附加限制如下表所示：\n\n| $n_1,n_2$   | $\\sum n_1$           | 测试点           | $k$      | 特殊性质         |\n|:-----------:|:--------------------:|:-------------:|:--------:|:------------:|\n| $\\leq 8$    | $\\leq 500$           | $1 \\sim 3$       | $\\leq 0$ | 无            |\n| $\\leq 8$    | $\\leq 500$           | $4 \\sim 6$       | $\\leq 5$ | 无            |\n| $\\leq 16$   | $\\leq 10^3$          | $7 \\sim 8$         | $\\leq 0$ | 无            |\n| $\\leq 16$   | $\\leq 10^3$          | $9 \\sim 10$        | $\\leq 5$ | 无            |\n| $\\leq 150$  | $\\leq 10^4$          | $11$          | $\\leq 0$ | 无            |\n| $\\leq 150$  | $\\leq 10^4$          | $12$          | $\\leq 1$ | 无            |\n| $\\leq 150$  | $\\leq 10^4$          | $13$          | $\\leq 5$ | 无            |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $14 \\sim 16$    | $\\leq 0$ | A |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $17 \\sim 20$ | $\\leq 0$ | B  |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $21$          | $\\leq 1$ | 无            |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $22 \\sim 23$       | $\\leq 3$ | 无            |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $24 \\sim 25$       | $\\leq 5$ | 无            |\n\n其中附加限制中的特殊性质如下所示：\n\n- 特殊性质 A：保证有根树 $G$ 每个节点要么是叶节点，要么有恰好 $1$ 个儿子结点；另一种等价的表述是有根树 $G$ 构成了一条链，且根节点为链的一个端点。\n- 特殊性质 B：保证有根树 $G$ 每个节点要么是叶节点，要么有恰好 $2$ 个儿子结点，同时保证 $G$ 的每一个叶节点深度均相同；另一种等价的表述是有根树 $G$ 构成一棵完全二叉树，且根节点为完全二叉树的根节点。\n\n**【提示】**\n\n数据没有**针对任何合理的哈希算法做任何针对性的构造**，所以在合理范围内不需要过度担心因为哈希碰撞而产生的失分问题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2022] 挑战 NPC Ⅱ", "background": "", "description": "诸由杨是一名咸鱼大学生，虽然他每天仍然幻想着在多项式时间内解决 NPC 问题。\n\n诸由杨上课的时候了解到子图同构问题是一个 NPC 问题。他打算给出一个子图同构问题的多项式判定算法，间接地去证明 P = NP，这样他一定可以凭借这个伟大的工作荣获图灵奖！只可惜诸由杨才疏学浅，连子图同构问题属于 NPC 的证明都没有想出来。因而他退而求其次，准备判定一个更加简单的问题：\n\n给定两棵有根树 $G, H$。设 $\\lvert G \\rvert$ 代表树 $G$ 中的节点个数，则这两棵树满足如下限制：$1 \\leq \\lvert H \\rvert \\leq \\lvert G \\rvert \\leq \\lvert H \\rvert + k$。这里诸由杨保证 $k$ 是一个小常数。\n\n诸由杨可以删除 $G$ 中的若干个节点，假定删除节点后后得到的子图为 $G'$。他想要知道是否存在一种删除节点的方式，使得删除后得到的子图 $G'$ 满足如下条件：\n\n- $G'$ 连通。\n- $G'$ 包含 $G$ 中的根节点（也就是说 $G$ 根节点在删除过程中没有被删除）。\n- $G'$ 和 $H$ 同构（也就是说存在一种让 $G'$ 中点重标号的方式，使得重标号得到的图和 $H$ 完全相同，且 $G$ 中的根节点经过重标号后恰好为 $H$ 的根节点）。", "inputFormat": "本题有多组测试数据。\n\n输入的第一行依次包含两个正整数 $C,T$ 和一个非负整数 $k$，三个数字分别表示当前测试点编号，测试数据组数和题目中给定的常数。如果当前测试数据为样例则 $C = 0$。保证 $T \\leq 500$、$k \\leq 5$。\n\n对于每一组测试数据：\n\n输入的第一行包含一个正整数 $n_1$，表示树 $G$ 中的节点个数，保证 $1 \\leq n_1 \\leq {10}^5$，且 $\\sum n_1 \\leq 5 \\times {10}^5$。\n\n输入的第二行包含 $n_1$ 个整数，描述了树 $G$ 的结构。具体地，第 $i$（$1 \\leq i \\leq n_1$）个整数 $a_i$ 表示在树 $G$ 中节点 $i$ 的父节点，如果其为根节点则 $a_i = -1$。保证按照上述规则得到的树为连通有根树。\n\n输入的第三行包含一个正整数 $n_2$，表示 $H$ 中的节点个数，保证对于所有测试数据，满足 $\\max(1, n_1 - k) \\leq n_2 \\leq n_1$。\n\n输入的第四行包含 $n_2$ 个整数，描述了树 $H$ 的结构。具体地，第 $i$（$1 \\leq i \\leq n_2$）个整数 $b_i$ 表示在树 $H$ 中节点 $i$ 的父节点，如果其为根节点则 $b_i = -1$。保证按照上述规则得到的树为连通有根树。", "outputFormat": "对于每一组测试数据：\n\n输出一行一个字符串。如果存在删除 $G$ 中节点的方式，使得其能够同时满足上述三个条件，则输出 `Yes`；否则输出 `No`。", "hint": "**【样例解释 \\#1】**\n\n对于第一个测试点，我们删除第一棵树的 $1$ 号节点。此时剩余的树和输入第二棵树均为包含两个节点的有根树，因而输出为 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vyoktd4u.png)\n\n\n对于第二个测试点，输入第一颗树深度为 $1$，但是输入第二颗树深度为 $2$。因而不论如何删除第一颗树的节点不会导致其树高增加到 $2$，因而输出为 `No`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r1szu0zb.png)\n\n对于第三个测试点，其输入两颗树均同构于下图的树，因而因而输出为 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxyllt4y.png)\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `iso/iso2.in` 与 `iso/iso2.ans`。\n\n该样例数据范围满足测试点 $7 \\sim 8$。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `iso/iso3.in` 与 `iso/iso3.ans`。\n\n该样例数据范围满足测试点 $9 \\sim 10$。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `iso/iso4.in` 与 `iso/iso4.ans`。\n\n该样例数据范围满足测试点 $13$。\n\n----\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\leq T \\leq 500$，$1 \\le n_2 \\leq n_1 \\le {10}^5$，$\\sum n_1 \\leq 5 \\times {10}^5$，$0 \\leq k \\leq 5$。各测试点的附加限制如下表所示：\n\n| $n_1,n_2$   | $\\sum n_1$           | 测试点           | $k$      | 特殊性质         |\n|:-----------:|:--------------------:|:-------------:|:--------:|:------------:|\n| $\\leq 8$    | $\\leq 500$           | $1 \\sim 3$       | $\\leq 0$ | 无            |\n| $\\leq 8$    | $\\leq 500$           | $4 \\sim 6$       | $\\leq 5$ | 无            |\n| $\\leq 16$   | $\\leq 10^3$          | $7 \\sim 8$         | $\\leq 0$ | 无            |\n| $\\leq 16$   | $\\leq 10^3$          | $9 \\sim 10$        | $\\leq 5$ | 无            |\n| $\\leq 150$  | $\\leq 10^4$          | $11$          | $\\leq 0$ | 无            |\n| $\\leq 150$  | $\\leq 10^4$          | $12$          | $\\leq 1$ | 无            |\n| $\\leq 150$  | $\\leq 10^4$          | $13$          | $\\leq 5$ | 无            |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $14 \\sim 16$    | $\\leq 0$ | A |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $17 \\sim 20$ | $\\leq 0$ | B  |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $21$          | $\\leq 1$ | 无            |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $22 \\sim 23$       | $\\leq 3$ | 无            |\n| $\\leq 10^5$ | $\\leq 5 \\times 10^5$ | $24 \\sim 25$       | $\\leq 5$ | 无            |\n\n其中附加限制中的特殊性质如下所示：\n\n- 特殊性质 A：保证有根树 $G$ 每个节点要么是叶节点，要么有恰好 $1$ 个儿子结点；另一种等价的表述是有根树 $G$ 构成了一条链，且根节点为链的一个端点。\n- 特殊性质 B：保证有根树 $G$ 每个节点要么是叶节点，要么有恰好 $2$ 个儿子结点，同时保证 $G$ 的每一个叶节点深度均相同；另一种等价的表述是有根树 $G$ 构成一棵完全二叉树，且根节点为完全二叉树的根节点。\n\n**【提示】**\n\n数据没有**针对任何合理的哈希算法做任何针对性的构造**，所以在合理范围内不需要过度担心因为哈希碰撞而产生的失分问题。", "locale": "zh-CN"}}}
{"pid": "P8500", "type": "P", "difficulty": 7, "samples": [["1\n3 2\n1 1 2022\n2 3 39\n", "1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "线段树", "并查集", "树状数组", "2022", "NOI", "离散化", "O2优化", "扫描线"], "title": "[NOI2022] 冒泡排序", "background": "最近，小 Z 对冒泡排序产生了浓厚的兴趣。\n\n下面是冒泡排序的伪代码：\n\n```\n输入: 一个长度为 n 的序列 a[1...n]\n输出: a 从小到大排序后的结果\nfor i = 1 to n do:\n    for j = 1 to n - 1 do\n        if (a[j] > a[j + 1])\n            交换 a[j] 与 a[j + 1] 的值\n```\n\n冒泡排序的交换次数被定义为在排序时**进行交换的次数**，也就是上面冒泡排序伪代码**第六行**的执行次数。他希望找到一个交换次数尽量少的序列。", "description": "小 Z 所研究的序列均由非负整数构成。它的长度为 $n$，且必须满足 $m$ 个附加条件。其中第 $i$ 个条件为：下标在 $[L_i, R_i]$ 中的数，即 $a_{L_i}, a_{L_{i+1}},\\dots,a_{R_i}$ 这些数，其最小值**恰好为 $\\boldsymbol{V_i}$**。\n\n他知道冒泡排序时常会超时。所以，他想要知道，在所有满足附加条件的序列中，进行冒泡排序的交换次数的最少值是多少。", "inputFormat": "本题有多组数据。\n\n输入的第一行包含一个正整数 $T$。\n\n对于每组数据，第一行包含两个正整数 $n,m$。数据保证 $1 \\leq n,m \\leq 10^6$。\n\n接下来 $m$ 行，每行三个非负整数 $L_i, R_i, V_i$，表示一组附加条件。数据保证 $1 \\leq L_i \\leq R_i \\leq n$、$0 \\leq V_i \\leq 10^9$。\n", "outputFormat": "输出共 $T$ 行，每行一个整数。\n\n对于每组数据，如果存在满足这 $m$ 个附加条件的序列，则输出在所有满足附加条件的序列中，冒泡排序交换次数的最小值。如果不存在满足所有条件的序列，则输出 $-1$。", "hint": "**【样例解释 \\#1】**\n\n这组数据的约束条件为 $a_1 = 2022, \\min\\{a_2, a_3\\} = 39$。\n\n若 $a_2 = 39$，且 $39 \\leq a_3 < 2022$，则冒泡排序只有第一轮有交换操作，这一轮交换了 $a_1, a_2$ 和 $a_2, a_3$，总交换次数为 $2$。\n\n若 $a_2 = 39$，且 $a_3 \\geq 2022$，则冒泡排序只有第一轮有交换操作，这一轮仅仅交换 $a_1, a_2$，总交换次数为 $1$。\n\n若 $a_3 = 39$，且 $39 < a_2 < 2022$，则冒泡排序算法第一轮交换 $a_1, a_2$ 和 $a_2, a_3$，第二轮交换 $a_1, a_2$。总交换次数为 $3$。\n\n若 $a_3 = 39$，且 $a_2 \\geq 2022$，则冒泡排序算法第一轮交换 $a_2, a_3$，第二轮交换 $a_1, a_2$。总交换次数为 $2$。\n\n因此，交换次数的最小值为 $1$。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `bubble/bubble2.in` 与 `bubble/bubble2.ans`。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `bubble/bubble3.in` 与 `bubble/bubble3.ans`。\n\n这个样例满足测试点 $8 \\sim 10$ 的条件。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `bubble/bubble4.in` 与 `bubble/bubble4.ans`。\n\n这个样例满足测试点 $13 \\sim 14$ 的条件。\n\n----\n\n**【样例 \\#5】**\n\n见附件中的 `bubble/bubble5.in` 与 `bubble/bubble5.ans`。\n\n这个样例满足测试点 $15 \\sim 16$ 的条件。\n\n----\n\n**【样例 \\#6】**\n\n见附件中的 `bubble/bubble6.in` 与 `bubble/bubble6.ans`。\n\n这个样例满足测试点 $23 \\sim 25$ 的条件。\n\n----\n\n**【数据范围】**\n\n本题共 $25$ 个测试点。全部测试点满足：$1 \\leq T \\leq 1000$，$1 \\leq \\sum n, \\sum m \\leq 10^6$，$1 \\leq L_i \\leq R_i \\leq n$，$0 \\leq V_i \\leq 10^9$。\n\n其中 $\\sum n, \\sum m$ 分别表示所有测试点的 $n$ 的总和和 $m$ 的总和。$\\sum n^2, \\sum m^2, \\sum n^3, \\sum m^3$ 的含义类似。\n\n| 测试点          | 数据范围                                                   | 特殊性质         |\n|:------------:|:------------------------------------------------------:|:------------:|\n| $1 \\sim 4$   | $n,m \\leq 7$，且最多 $2$ 组数据不满足 $n, m \\leq 5$              |              |\n| $5 \\sim 7$   | $n,m \\leq 17$，且最多 $3$ 组数据不满足 $n, m \\leq 9$             | A |\n| $8 \\sim 10$  | $n,m \\leq 100$，$\\sum n^3,\\sum m^3 \\leq 4 \\times 10^7$  | A |\n| $11 \\sim 12$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ | A |\n| $13 \\sim 14$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ | B |\n| $15 \\sim 16$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ | C |\n| $17 \\sim 18$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ |              |\n| $19$         | $\\sum n,\\sum m \\leq 10^6$                              | A |\n| $20$         | $\\sum n,\\sum m \\leq 10^6$                              | B |\n| $21 \\sim 22$ | $\\sum n,\\sum m \\leq 10^6$                              | C |\n| $23 \\sim 25$ | $\\sum n,\\sum m \\leq 10^6$                              |              |\n\n特殊性质 A：对于 $1 \\leq i \\leq m$，$0 \\leq V_i \\leq 1$。  \n特殊性质 B：对于 $1 \\leq i \\leq m$，$L_i = R_i$。  \n特殊性质 C：输入给出的 $m$ 个区间 $[L_i, R_i]$ 两两不相交。\n\n----\n\n**【提示】**\n\n本题的部分测试点输入量较大。我们建议你使用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2022] 冒泡排序", "background": "最近，小 Z 对冒泡排序产生了浓厚的兴趣。\n\n下面是冒泡排序的伪代码：\n\n```\n输入: 一个长度为 n 的序列 a[1...n]\n输出: a 从小到大排序后的结果\nfor i = 1 to n do:\n    for j = 1 to n - 1 do\n        if (a[j] > a[j + 1])\n            交换 a[j] 与 a[j + 1] 的值\n```\n\n冒泡排序的交换次数被定义为在排序时**进行交换的次数**，也就是上面冒泡排序伪代码**第六行**的执行次数。他希望找到一个交换次数尽量少的序列。", "description": "小 Z 所研究的序列均由非负整数构成。它的长度为 $n$，且必须满足 $m$ 个附加条件。其中第 $i$ 个条件为：下标在 $[L_i, R_i]$ 中的数，即 $a_{L_i}, a_{L_{i+1}},\\dots,a_{R_i}$ 这些数，其最小值**恰好为 $\\boldsymbol{V_i}$**。\n\n他知道冒泡排序时常会超时。所以，他想要知道，在所有满足附加条件的序列中，进行冒泡排序的交换次数的最少值是多少。", "inputFormat": "本题有多组数据。\n\n输入的第一行包含一个正整数 $T$。\n\n对于每组数据，第一行包含两个正整数 $n,m$。数据保证 $1 \\leq n,m \\leq 10^6$。\n\n接下来 $m$ 行，每行三个非负整数 $L_i, R_i, V_i$，表示一组附加条件。数据保证 $1 \\leq L_i \\leq R_i \\leq n$、$0 \\leq V_i \\leq 10^9$。\n", "outputFormat": "输出共 $T$ 行，每行一个整数。\n\n对于每组数据，如果存在满足这 $m$ 个附加条件的序列，则输出在所有满足附加条件的序列中，冒泡排序交换次数的最小值。如果不存在满足所有条件的序列，则输出 $-1$。", "hint": "**【样例解释 \\#1】**\n\n这组数据的约束条件为 $a_1 = 2022, \\min\\{a_2, a_3\\} = 39$。\n\n若 $a_2 = 39$，且 $39 \\leq a_3 < 2022$，则冒泡排序只有第一轮有交换操作，这一轮交换了 $a_1, a_2$ 和 $a_2, a_3$，总交换次数为 $2$。\n\n若 $a_2 = 39$，且 $a_3 \\geq 2022$，则冒泡排序只有第一轮有交换操作，这一轮仅仅交换 $a_1, a_2$，总交换次数为 $1$。\n\n若 $a_3 = 39$，且 $39 < a_2 < 2022$，则冒泡排序算法第一轮交换 $a_1, a_2$ 和 $a_2, a_3$，第二轮交换 $a_1, a_2$。总交换次数为 $3$。\n\n若 $a_3 = 39$，且 $a_2 \\geq 2022$，则冒泡排序算法第一轮交换 $a_2, a_3$，第二轮交换 $a_1, a_2$。总交换次数为 $2$。\n\n因此，交换次数的最小值为 $1$。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `bubble/bubble2.in` 与 `bubble/bubble2.ans`。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `bubble/bubble3.in` 与 `bubble/bubble3.ans`。\n\n这个样例满足测试点 $8 \\sim 10$ 的条件。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `bubble/bubble4.in` 与 `bubble/bubble4.ans`。\n\n这个样例满足测试点 $13 \\sim 14$ 的条件。\n\n----\n\n**【样例 \\#5】**\n\n见附件中的 `bubble/bubble5.in` 与 `bubble/bubble5.ans`。\n\n这个样例满足测试点 $15 \\sim 16$ 的条件。\n\n----\n\n**【样例 \\#6】**\n\n见附件中的 `bubble/bubble6.in` 与 `bubble/bubble6.ans`。\n\n这个样例满足测试点 $23 \\sim 25$ 的条件。\n\n----\n\n**【数据范围】**\n\n本题共 $25$ 个测试点。全部测试点满足：$1 \\leq T \\leq 1000$，$1 \\leq \\sum n, \\sum m \\leq 10^6$，$1 \\leq L_i \\leq R_i \\leq n$，$0 \\leq V_i \\leq 10^9$。\n\n其中 $\\sum n, \\sum m$ 分别表示所有测试点的 $n$ 的总和和 $m$ 的总和。$\\sum n^2, \\sum m^2, \\sum n^3, \\sum m^3$ 的含义类似。\n\n| 测试点          | 数据范围                                                   | 特殊性质         |\n|:------------:|:------------------------------------------------------:|:------------:|\n| $1 \\sim 4$   | $n,m \\leq 7$，且最多 $2$ 组数据不满足 $n, m \\leq 5$              |              |\n| $5 \\sim 7$   | $n,m \\leq 17$，且最多 $3$ 组数据不满足 $n, m \\leq 9$             | A |\n| $8 \\sim 10$  | $n,m \\leq 100$，$\\sum n^3,\\sum m^3 \\leq 4 \\times 10^7$  | A |\n| $11 \\sim 12$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ | A |\n| $13 \\sim 14$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ | B |\n| $15 \\sim 16$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ | C |\n| $17 \\sim 18$ | $n,m \\leq 2000$，$\\sum n^2,\\sum m^2 \\leq 4 \\times 10^7$ |              |\n| $19$         | $\\sum n,\\sum m \\leq 10^6$                              | A |\n| $20$         | $\\sum n,\\sum m \\leq 10^6$                              | B |\n| $21 \\sim 22$ | $\\sum n,\\sum m \\leq 10^6$                              | C |\n| $23 \\sim 25$ | $\\sum n,\\sum m \\leq 10^6$                              |              |\n\n特殊性质 A：对于 $1 \\leq i \\leq m$，$0 \\leq V_i \\leq 1$。  \n特殊性质 B：对于 $1 \\leq i \\leq m$，$L_i = R_i$。  \n特殊性质 C：输入给出的 $m$ 个区间 $[L_i, R_i]$ 两两不相交。\n\n----\n\n**【提示】**\n\n本题的部分测试点输入量较大。我们建议你使用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P8501", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "NOI", "网络流", "O2优化", "分治", "凸包", "整数规划"], "title": "[NOI2022] 二次整数规划问题", "background": "", "description": "本题中，你需要解决一个著名的 NP 问题——二次整数规划问题。\n\n二次整数规划问题要有变量：你需要给出一个长度为 $n$ 的**整数**序列 $(x_1, x_2, \\ldots, x_n)$，满足下文中的所有条件。\n\n二次整数规划问题要有约束：你给出的整数序列需要满足以下两类约束：\n\n1. 一类约束是单个变量取值的约束：给出正整数 $k$（$3 \\leq k \\leq 5$）和 $n$ 个区间 $[l_i, r_i]$（$1 \\leq i \\leq n$），其中 $1 \\leq l_i \\leq r_i \\leq k$，你给出的序列需要满足 $\\forall 1 \\leq i \\leq n$，$l_i \\leq x_i \\leq r_i$；\n2. 另一类约束是变量之间取值的约束：给出 $m$ 个三元组 $(p_i, q_i, b_i)$，你给出的序列需要满足 $\\forall 1 \\leq j \\leq m$，$\\lvert x_{p_j} - x_{q_j} \\rvert \\leq b_j$。\n\n二次整数规划问题要有目标函数：在给出 $k-2$ 个目标参数 $v_2,v_3,\\dots,v_{k-1}$（**注意下标范围为 $\\boldsymbol{2}$ 至 $\\boldsymbol{k-1}$**）的前提下，对于一个值域为 $[1,k]$ 的整数数列 $\\{p_1,p_2,\\dots,p_n\\}$，设 $c_i$ 为该序列中取值为 $i$ 的元素个数，$G$ 为满足 $1 \\leq i,j \\leq n$ 且 $|p_i-p_j|\\leq 1$ 的整数二元组 $(i, j)$ 个数，**注意当 $\\boldsymbol{i \\neq j}$ 时，$\\boldsymbol{(i, j)}$ 与 $\\boldsymbol{(j, i)}$ 是不同的二元组**。定义该序列的**权值**为\n\n$$ W(p_1, p_2, \\ldots, p_n) = 10^6 G+\\sum_{i=2}^{k-1} c_i v_i \\text{。} $$\n\n你的序列需要在满足以上两类约束的情况下，最大化其权值。在给出的约束下，保证存在满足约束的序列。\n\n二次整数规划问题不一定要有多组询问，但是我们会给出 $q$ 次询问，每次询问给出不同的权值参数 $v_2, v_3, \\ldots, v_{k-1}$，对于每组询问你需要找到满足约束的最大化权值的序列。为了减少输出量，你只需要输出这个序列的权值。", "inputFormat": "**本题有多组测试数据。** 第一行一个非负整数和一个正整数 $C, T$，分别表示测试点编号和测试数据数量。$C = 0$ 表示该组数据为样例。\n\n对于每组测试数据，第一行四个整数 $k, n, m, q$，描述序列值域、序列长度、变量之间约束的个数和询问次数。\n\n接下来 $n$ 行每行两个整数 $l_i, r_i$，描述序列中每个元素对应的取值区间。\n\n接下来 $m$ 行每行三个整数 $p_j, q_j, b_j$，描述一个变量之间的约束。\n\n接下来 $q$ 行每行 $k - 2$ 个非负整数 $v_2, v_3, \\ldots, v_{k - 1}$ 描述一组询问的权值参数。", "outputFormat": "对于每组数据的每组询问输出一行一个整数，表示序列权值的最大值。", "hint": "**【样例 \\#1】**\n\n见附件中的 `qip/qip1.in` 与 `qip/qip1.ans`。\n\n该样例满足数据范围中测试点 $1$ 的性质。\n\n----\n\n**【样例解释 \\#1】**\n\n第一个测试数据中两组询问对应的最优序列均为 $(1, 2, 2, 1, 3)$，有 $c_2 = 2, G = 21$。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `qip/qip2.in` 与 `qip/qip2.ans`。\n\n该样例满足数据范围中测试点 $3$ 的性质。\n\n----\n\n**【样例解释 \\#2】**\n\n第一个测试数据中两组询问对应的最优序列分别为 $(4,4,3,3)$ 和 $(4,3,2,2)$。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `qip/qip3.in` 与 `qip/qip3.ans`。\n\n该样例满足数据范围中测试点 $5$ 的性质。\n\n----\n\n**【样例解释 \\#3】**\n\n第一个测试数据中三组询问对应的一个最优序列分别为 $(3, 3, 3, 3, 3)$、$(2, 2, 3, 3, 2)$ 和 $(3, 2, 4, 4, 2)$。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `qip/qip4.in` 与 `qip/qip4.ans`。\n\n该样例满足数据范围中测试点 $2$ 的性质。\n\n----\n\n**【样例 \\#5】**\n\n见附件中的 `qip/qip5.in` 与 `qip/qip5.ans`。\n\n该样例满足数据范围中测试点 $4$ 的性质。\n\n----\n\n**【样例 \\#6】**\n\n见附件中的 `qip/qip6.in` 与 `qip/qip6.ans`。\n\n该样例满足数据范围中测试点 $8$ 的性质。\n\n----\n\n**【样例 \\#7】**\n\n见附件中的 `qip/qip7.in` 与 `qip/qip7.ans`。\n\n该样例满足数据范围中测试点 $14$ 的性质。\n\n----\n\n**【样例 \\#8】**\n\n见附件中的 `qip/qip8.in` 与 `qip/qip8.ans`。\n\n该样例满足数据范围中测试点 $17$ 的性质。\n\n----\n\n**【数据范围】**\n\n设 $\\sum q$ 为单个测试点中所有测试数据的 $q$ 的和。对于所有测试点，\n\n- $1 \\leq T \\leq 600$，\n- 第 $i$（$1 \\le i \\le T$）个测试数据中，$1 \\leq n \\leq \\max(\\frac{T}{i},2 \\log_2 T)$，\n- $3 \\leq k \\leq 5$，$0 \\leq m \\leq 3n$，$1 \\leq q,\\sum q \\leq 3 \\times 10^5$，\n- $1 \\leq l_i \\leq r_i \\leq k$，\n- $1 \\leq p_j,q_j \\leq n$，$0 \\leq b_j<k$，\n- $0 \\leq v_2,\\dots,v_{k-1} \\leq 10^{12}$。\n\n| 测试点编号 | $T \\leq$ | $k=$ | $\\sum q \\leq$   | 特殊性质         | 测试点分数 |\n|:-----:|:--------:|:----:|:---------------:|:------------:|:-----:|\n| $1$   | $10$     | $3$  | $200$           | 无            | $4$   |\n| $2$   | $600$    | $3$  | $3 \\times 10^5$ | 无            | $6$   |\n| $3$   | $10$     | $4$  | $200$           | 无            | $4$   |\n| $4$   | $600$    | $4$  | $3 \\times 10^5$ | 无            | $6$   |\n| $5$   | $10$     | $5$  | $300$           | 无            | $5$   |\n| $6$   | $15$     | $5$  | $500$           | 无            | $4$   |\n| $7$   | $25$     | $5$  | $750$           | 无            | $4$   |\n| $8$   | $50$     | $5$  | $1000$          | 无            | $6$   |\n| $9$   | $80$     | $5$  | $1500$          | 无            | $6$   |\n| $10$  | $120$    | $5$  | $2000$          | 无            | $5$   |\n| $11$  | $200$    | $5$  | $8000$          | A | $3$   |\n| $12$  | $400$    | $5$  | $3 \\times 10^4$ | A | $4$   |\n| $13$  | $600$    | $5$  | $2 \\times 10^5$ | A | $5$   |\n| $14$  | $200$    | $5$  | $8000$          | B | $3$   |\n| $15$  | $400$    | $5$  | $3 \\times 10^4$ | B | $4$   |\n| $16$  | $600$    | $5$  | $2 \\times 10^5$ | B | $4$   |\n| $17$  | $120$    | $5$  | $10^5$          | C | $4$   |\n| $18$  | $150$    | $5$  | $2 \\times 10^5$ | C | $5$   |\n| $19$  | $180$    | $5$  | $3 \\times 10^5$ | C | $5$   |\n| $20$  | $300$    | $5$  | $5 \\times 10^4$ | 无            | $5$   |\n| $21$  | $450$    | $5$  | $10^5$          | 无            | $4$   |\n| $22$  | $600$    | $5$  | $3 \\times 10^5$ | 无            | $4$   |\n\n特殊性质 A：$m=0$。\n\n特殊性质 B：$m \\leq 10$，单个测试点中所有测试数据的 $m$ 的和不超过 $200$。\n\n特殊性质 C：数据随机生成。具体地，生成测试点中每组测试数据时，给出参数 $k,n,m,q$ 以及 $k$ 个非负常数 $p_0,p_1,p_2,\\dots,p_{k-1}$，保证 $p_{k-1} \\neq 0$，则按照如下规则生成该组数据：\n\n- 对于 $1 \\leq i \\leq n$，独立均匀生成 $x,y \\in [1,k]$，则 $l_i=\\min(x,y),r_i=\\max(x,y)$；\n- 不断按照如下方式生成三元组直至有 $m$ 个三元组：\n  1. 独立均匀随机生成 $u,v \\in [1,n]$；\n  2. 以 $p$ 为权值随机生成 $w$（对于 $0 \\leq i \\leq k-1$，$w=i$ 的概率为 $\\frac{p_i}{p_0+p_1+\\dots+p_{k-1}}$）；\n  3. 若在原有三元组集合中加入 $(u,v,w)$ 后不存在序列 $(x_1,x_2,\\dots,x_n)$ 满足所有限制，则舍弃当前三元组，否则加入当前三元组。\n- 每组询问的 $v_2, \\ldots, v_{k-1}$ 在 $[0,10^{12}]$ 内独立均匀随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2022] 二次整数规划问题", "background": "", "description": "本题中，你需要解决一个著名的 NP 问题——二次整数规划问题。\n\n二次整数规划问题要有变量：你需要给出一个长度为 $n$ 的**整数**序列 $(x_1, x_2, \\ldots, x_n)$，满足下文中的所有条件。\n\n二次整数规划问题要有约束：你给出的整数序列需要满足以下两类约束：\n\n1. 一类约束是单个变量取值的约束：给出正整数 $k$（$3 \\leq k \\leq 5$）和 $n$ 个区间 $[l_i, r_i]$（$1 \\leq i \\leq n$），其中 $1 \\leq l_i \\leq r_i \\leq k$，你给出的序列需要满足 $\\forall 1 \\leq i \\leq n$，$l_i \\leq x_i \\leq r_i$；\n2. 另一类约束是变量之间取值的约束：给出 $m$ 个三元组 $(p_i, q_i, b_i)$，你给出的序列需要满足 $\\forall 1 \\leq j \\leq m$，$\\lvert x_{p_j} - x_{q_j} \\rvert \\leq b_j$。\n\n二次整数规划问题要有目标函数：在给出 $k-2$ 个目标参数 $v_2,v_3,\\dots,v_{k-1}$（**注意下标范围为 $\\boldsymbol{2}$ 至 $\\boldsymbol{k-1}$**）的前提下，对于一个值域为 $[1,k]$ 的整数数列 $\\{p_1,p_2,\\dots,p_n\\}$，设 $c_i$ 为该序列中取值为 $i$ 的元素个数，$G$ 为满足 $1 \\leq i,j \\leq n$ 且 $|p_i-p_j|\\leq 1$ 的整数二元组 $(i, j)$ 个数，**注意当 $\\boldsymbol{i \\neq j}$ 时，$\\boldsymbol{(i, j)}$ 与 $\\boldsymbol{(j, i)}$ 是不同的二元组**。定义该序列的**权值**为\n\n$$ W(p_1, p_2, \\ldots, p_n) = 10^6 G+\\sum_{i=2}^{k-1} c_i v_i \\text{。} $$\n\n你的序列需要在满足以上两类约束的情况下，最大化其权值。在给出的约束下，保证存在满足约束的序列。\n\n二次整数规划问题不一定要有多组询问，但是我们会给出 $q$ 次询问，每次询问给出不同的权值参数 $v_2, v_3, \\ldots, v_{k-1}$，对于每组询问你需要找到满足约束的最大化权值的序列。为了减少输出量，你只需要输出这个序列的权值。", "inputFormat": "**本题有多组测试数据。** 第一行一个非负整数和一个正整数 $C, T$，分别表示测试点编号和测试数据数量。$C = 0$ 表示该组数据为样例。\n\n对于每组测试数据，第一行四个整数 $k, n, m, q$，描述序列值域、序列长度、变量之间约束的个数和询问次数。\n\n接下来 $n$ 行每行两个整数 $l_i, r_i$，描述序列中每个元素对应的取值区间。\n\n接下来 $m$ 行每行三个整数 $p_j, q_j, b_j$，描述一个变量之间的约束。\n\n接下来 $q$ 行每行 $k - 2$ 个非负整数 $v_2, v_3, \\ldots, v_{k - 1}$ 描述一组询问的权值参数。", "outputFormat": "对于每组数据的每组询问输出一行一个整数，表示序列权值的最大值。", "hint": "**【样例 \\#1】**\n\n见附件中的 `qip/qip1.in` 与 `qip/qip1.ans`。\n\n该样例满足数据范围中测试点 $1$ 的性质。\n\n----\n\n**【样例解释 \\#1】**\n\n第一个测试数据中两组询问对应的最优序列均为 $(1, 2, 2, 1, 3)$，有 $c_2 = 2, G = 21$。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `qip/qip2.in` 与 `qip/qip2.ans`。\n\n该样例满足数据范围中测试点 $3$ 的性质。\n\n----\n\n**【样例解释 \\#2】**\n\n第一个测试数据中两组询问对应的最优序列分别为 $(4,4,3,3)$ 和 $(4,3,2,2)$。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `qip/qip3.in` 与 `qip/qip3.ans`。\n\n该样例满足数据范围中测试点 $5$ 的性质。\n\n----\n\n**【样例解释 \\#3】**\n\n第一个测试数据中三组询问对应的一个最优序列分别为 $(3, 3, 3, 3, 3)$、$(2, 2, 3, 3, 2)$ 和 $(3, 2, 4, 4, 2)$。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `qip/qip4.in` 与 `qip/qip4.ans`。\n\n该样例满足数据范围中测试点 $2$ 的性质。\n\n----\n\n**【样例 \\#5】**\n\n见附件中的 `qip/qip5.in` 与 `qip/qip5.ans`。\n\n该样例满足数据范围中测试点 $4$ 的性质。\n\n----\n\n**【样例 \\#6】**\n\n见附件中的 `qip/qip6.in` 与 `qip/qip6.ans`。\n\n该样例满足数据范围中测试点 $8$ 的性质。\n\n----\n\n**【样例 \\#7】**\n\n见附件中的 `qip/qip7.in` 与 `qip/qip7.ans`。\n\n该样例满足数据范围中测试点 $14$ 的性质。\n\n----\n\n**【样例 \\#8】**\n\n见附件中的 `qip/qip8.in` 与 `qip/qip8.ans`。\n\n该样例满足数据范围中测试点 $17$ 的性质。\n\n----\n\n**【数据范围】**\n\n设 $\\sum q$ 为单个测试点中所有测试数据的 $q$ 的和。对于所有测试点，\n\n- $1 \\leq T \\leq 600$，\n- 第 $i$（$1 \\le i \\le T$）个测试数据中，$1 \\leq n \\leq \\max(\\frac{T}{i},2 \\log_2 T)$，\n- $3 \\leq k \\leq 5$，$0 \\leq m \\leq 3n$，$1 \\leq q,\\sum q \\leq 3 \\times 10^5$，\n- $1 \\leq l_i \\leq r_i \\leq k$，\n- $1 \\leq p_j,q_j \\leq n$，$0 \\leq b_j<k$，\n- $0 \\leq v_2,\\dots,v_{k-1} \\leq 10^{12}$。\n\n| 测试点编号 | $T \\leq$ | $k=$ | $\\sum q \\leq$   | 特殊性质         | 测试点分数 |\n|:-----:|:--------:|:----:|:---------------:|:------------:|:-----:|\n| $1$   | $10$     | $3$  | $200$           | 无            | $4$   |\n| $2$   | $600$    | $3$  | $3 \\times 10^5$ | 无            | $6$   |\n| $3$   | $10$     | $4$  | $200$           | 无            | $4$   |\n| $4$   | $600$    | $4$  | $3 \\times 10^5$ | 无            | $6$   |\n| $5$   | $10$     | $5$  | $300$           | 无            | $5$   |\n| $6$   | $15$     | $5$  | $500$           | 无            | $4$   |\n| $7$   | $25$     | $5$  | $750$           | 无            | $4$   |\n| $8$   | $50$     | $5$  | $1000$          | 无            | $6$   |\n| $9$   | $80$     | $5$  | $1500$          | 无            | $6$   |\n| $10$  | $120$    | $5$  | $2000$          | 无            | $5$   |\n| $11$  | $200$    | $5$  | $8000$          | A | $3$   |\n| $12$  | $400$    | $5$  | $3 \\times 10^4$ | A | $4$   |\n| $13$  | $600$    | $5$  | $2 \\times 10^5$ | A | $5$   |\n| $14$  | $200$    | $5$  | $8000$          | B | $3$   |\n| $15$  | $400$    | $5$  | $3 \\times 10^4$ | B | $4$   |\n| $16$  | $600$    | $5$  | $2 \\times 10^5$ | B | $4$   |\n| $17$  | $120$    | $5$  | $10^5$          | C | $4$   |\n| $18$  | $150$    | $5$  | $2 \\times 10^5$ | C | $5$   |\n| $19$  | $180$    | $5$  | $3 \\times 10^5$ | C | $5$   |\n| $20$  | $300$    | $5$  | $5 \\times 10^4$ | 无            | $5$   |\n| $21$  | $450$    | $5$  | $10^5$          | 无            | $4$   |\n| $22$  | $600$    | $5$  | $3 \\times 10^5$ | 无            | $4$   |\n\n特殊性质 A：$m=0$。\n\n特殊性质 B：$m \\leq 10$，单个测试点中所有测试数据的 $m$ 的和不超过 $200$。\n\n特殊性质 C：数据随机生成。具体地，生成测试点中每组测试数据时，给出参数 $k,n,m,q$ 以及 $k$ 个非负常数 $p_0,p_1,p_2,\\dots,p_{k-1}$，保证 $p_{k-1} \\neq 0$，则按照如下规则生成该组数据：\n\n- 对于 $1 \\leq i \\leq n$，独立均匀生成 $x,y \\in [1,k]$，则 $l_i=\\min(x,y),r_i=\\max(x,y)$；\n- 不断按照如下方式生成三元组直至有 $m$ 个三元组：\n  1. 独立均匀随机生成 $u,v \\in [1,n]$；\n  2. 以 $p$ 为权值随机生成 $w$（对于 $0 \\leq i \\leq k-1$，$w=i$ 的概率为 $\\frac{p_i}{p_0+p_1+\\dots+p_{k-1}}$）；\n  3. 若在原有三元组集合中加入 $(u,v,w)$ 后不存在序列 $(x_1,x_2,\\dots,x_n)$ 满足所有限制，则舍弃当前三元组，否则加入当前三元组。\n- 每组询问的 $v_2, \\ldots, v_{k-1}$ 在 $[0,10^{12}]$ 内独立均匀随机生成。", "locale": "zh-CN"}}}
{"pid": "P8502", "type": "P", "difficulty": 5, "samples": [["4 5\n2 3\n1 1\n2 4\n0 0\n1 3 4 5\n1 4 2 4\n2 3 1 2\n4 4 3 0\n1 3 2 5", "5\n1\n0\n1\n1"], ["10 10\n6 6\n4 10\n2 5\n1 7\n3 4\n5 7\n4 10\n1 7\n1 3\n2 5\n8 8 5 1\n4 7 5 3\n5 9 4 4\n1 5 5 2\n6 2 10 2\n3 3 7 4\n1 10 1 2\n6 2 4 4\n9 2 1 4\n9 10 3 2", "0\n17\n2\n0\n0\n46\n0\n12\n23\n1"], ["10 10\n2 6\n6 9\n5 7\n3 9\n0 0\n0 0\n3 5\n5 5\n3 6\n1 10\n5 9 6 3\n10 8 6 4\n10 8 5 1\n8 6 5 4\n7 2 5 4\n6 1 5 3\n10 4 5 1\n5 5 6 0\n7 9 6 4\n4 9 6 2", "0\n17\n1\n0\n0\n0\n1\n1\n4\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "容斥原理", "差分"], "title": "「CGOI-2」No cost too great", "background": "光芒浸透圣巢，她正犯下弥天之错。\n\n所剩寥寥无几的信仰，为什么始终执着。\n\n我将作灯塔，照耀王国。\n\n但在那之前有更重要的事去做，\n\n无论什么代价都在所不惜，尽管我所剩无多……", "description": "白王正在最后一次参观他建造的宏伟宫殿。现在假设宫殿由 $n$ 个房间构成，房间之间有若干个**单向**通道。出于白王奇怪的装修癖好（不是指到处安电锯），对于第 $i$ 个房间，它向编号在区间 $[l_i,r_i]$ 中的所有房间都连有一条单向通道。例如，$4$ 号房间向 $[2,5]$ 连有单向通道，就意味着从 $4$ 号房间到 $2,3,4,5$ 号房间各有一条单向通道（一个房间可以向自己连有通道）。当一个房间向 $[0,0]$ 连有通道时，表示没有从这个房间出发的通道。\n\n白王提出了 $q$ 个问题，每次询问从 $a$ 号房间，通过恰好 $m$ 条单向通道且不经过 $c$ 号房间到达 $b$ 号房间的方案数（两方案不同，当且仅当存在 $i$ 使得两方案通过的第 $i$ 条通道不同）。因为这个数字可能会很大，所以白王让你将答案模 $998244353$ 后再回答。", "inputFormat": "第一行，两个整数 $n, q$ 表示点数和询问数。\n\n接下来 $n$ 行，每行两个整数 $l, r$，第 $i+1$ 行的整数 $l_i, r_i$ 表示 $i$ 号节点向区间 $[l_i, r_i]$ 中的每个点都连了一条单向边。当 $l_i=r_i=0$ 时，表示该节点没有向任何点连边。\n\n接下来 $q$ 行，每行四个整数 $a, b, c, m$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个整数，第 $i$ 行的数字表示第 $i$ 个询问的方案数模 $998244353$ 的结果。", "hint": "### 样例说明\n\n在样例一中，$1$ 号房间能到达 $2,3$ 号房间，$2$ 号房间能到达 $1$ 号房间，$3$ 号房间能到达 $2,3,4$ 号房间，$4$ 号房间不能到达任何房间。\n\n对于第一个询问，从 $1$ 号房间经过 $5$ 条通道且不经过 $4$ 号房间到达 $3$ 号房间的方案有 `121213`，`121333`，`133213`，`132133`，`133333` 共五种。\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| 编号| 特殊性质 | 空间限制 |分数 |\n| :-: | :-: | :-: | :-: |\n| 0 | $n\\le10$，$q\\le10$，$m\\le4$ | 256MB | 10pts |\n| 1 | $n\\le100$，$q\\le10^4$，$m\\le40$ | 256MB | 15pts |\n| 2 | 对于所有询问，$l_c=r_c=0$ | 256MB | 15pts |\n| 3 | 无 | 256MB | 30pts |\n| 4 | 无 | 128MB | 30pts |\n\n对于 $100\\%$ 的数据，$1\\le n \\le 500$，$1\\le q \\le 10^5$，$1\\le m \\le 100$，$0 \\le l_i \\le r_i \\le n$，$1 \\le a,b,c \\le n$。当且仅当 $l_i=0$ 时 $r_i=0$。时间限制均为 1s。\n\n---\n\n### 提示\n\n**注意空间常数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CGOI-2」No cost too great", "background": "光芒浸透圣巢，她正犯下弥天之错。\n\n所剩寥寥无几的信仰，为什么始终执着。\n\n我将作灯塔，照耀王国。\n\n但在那之前有更重要的事去做，\n\n无论什么代价都在所不惜，尽管我所剩无多……", "description": "白王正在最后一次参观他建造的宏伟宫殿。现在假设宫殿由 $n$ 个房间构成，房间之间有若干个**单向**通道。出于白王奇怪的装修癖好（不是指到处安电锯），对于第 $i$ 个房间，它向编号在区间 $[l_i,r_i]$ 中的所有房间都连有一条单向通道。例如，$4$ 号房间向 $[2,5]$ 连有单向通道，就意味着从 $4$ 号房间到 $2,3,4,5$ 号房间各有一条单向通道（一个房间可以向自己连有通道）。当一个房间向 $[0,0]$ 连有通道时，表示没有从这个房间出发的通道。\n\n白王提出了 $q$ 个问题，每次询问从 $a$ 号房间，通过恰好 $m$ 条单向通道且不经过 $c$ 号房间到达 $b$ 号房间的方案数（两方案不同，当且仅当存在 $i$ 使得两方案通过的第 $i$ 条通道不同）。因为这个数字可能会很大，所以白王让你将答案模 $998244353$ 后再回答。", "inputFormat": "第一行，两个整数 $n, q$ 表示点数和询问数。\n\n接下来 $n$ 行，每行两个整数 $l, r$，第 $i+1$ 行的整数 $l_i, r_i$ 表示 $i$ 号节点向区间 $[l_i, r_i]$ 中的每个点都连了一条单向边。当 $l_i=r_i=0$ 时，表示该节点没有向任何点连边。\n\n接下来 $q$ 行，每行四个整数 $a, b, c, m$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个整数，第 $i$ 行的数字表示第 $i$ 个询问的方案数模 $998244353$ 的结果。", "hint": "### 样例说明\n\n在样例一中，$1$ 号房间能到达 $2,3$ 号房间，$2$ 号房间能到达 $1$ 号房间，$3$ 号房间能到达 $2,3,4$ 号房间，$4$ 号房间不能到达任何房间。\n\n对于第一个询问，从 $1$ 号房间经过 $5$ 条通道且不经过 $4$ 号房间到达 $3$ 号房间的方案有 `121213`，`121333`，`133213`，`132133`，`133333` 共五种。\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| 编号| 特殊性质 | 空间限制 |分数 |\n| :-: | :-: | :-: | :-: |\n| 0 | $n\\le10$，$q\\le10$，$m\\le4$ | 256MB | 10pts |\n| 1 | $n\\le100$，$q\\le10^4$，$m\\le40$ | 256MB | 15pts |\n| 2 | 对于所有询问，$l_c=r_c=0$ | 256MB | 15pts |\n| 3 | 无 | 256MB | 30pts |\n| 4 | 无 | 128MB | 30pts |\n\n对于 $100\\%$ 的数据，$1\\le n \\le 500$，$1\\le q \\le 10^5$，$1\\le m \\le 100$，$0 \\le l_i \\le r_i \\le n$，$1 \\le a,b,c \\le n$。当且仅当 $l_i=0$ 时 $r_i=0$。时间限制均为 1s。\n\n---\n\n### 提示\n\n**注意空间常数。**", "locale": "zh-CN"}}}
{"pid": "P8503", "type": "P", "difficulty": 6, "samples": [["7\n1 7\n7 6\n1 2\n2 3\n3 4\n4 5\n5 6", "1\n2\n3\n4\n5\n10"], ["6\n1 4\n4 2\n2 6\n6 1\n6 3\n1 5", "2\n4\n7\n9\n11"], ["18\n14 15\n8 12\n5 4\n10 14\n15 17\n7 5\n3 9\n9 18\n11 13\n1 2\n16 10\n5 11\n5 6\n6 8\n2 3\n2 7\n18 16\n7 10", "1\n2\n6\n7\n8\n10\n13\n19\n22\n26\n30\n35\n40\n41\n45\n49\n54"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "基环树"], "title": "「CGOI-2」No mind to think", "background": "“我的王，这个孩子……不纯粹……他……”\n\n“嗯。容器不能拥有与人交流的能力，否则可能会在交流中产生思维。它们只应该有猎杀的本能，和战斗的天分。就像我的守卫们一样。”\n\n“那些不过是傀儡……”\n\n“傀儡也比这个有思维的家伙好。改天把它带走，它真的好吵……我累了，我出去走走。”\n\n~~无敌的勇敢的性感的神秘的迷人的神气的勤勉的强势的华丽的激情的可怕的漂亮的强大的灰色王子左特骂骂咧咧地滚出了白色宫殿。~~", "description": "圣巢有 $n$ 个鹿角虫车站和 $n$ 条轨道，第 $i$ 条轨道连接 $u_i$ 和 $v_i$ 两个车站。初始时轨道是单向的，第一次经过第 $i$ 条轨道时，只能从 $u_i$ 到达 $v_i$；第一次经过后该轨道变为双向，既可以从 $u_i$ 到 $v_i$，又可以从 $v_i$ 到 $u_i$。\n\n现在白王在 $1$ 号车站，他要经过若干条轨道到达 $2$ 号车站，再从 $2$ 号车站经过若干条轨道到达 $3$ 号车站……一直到 $x$ 号车站。因为白王需要尽快走遍整个王国以便探清瘟疫的情况，所以他问你，当 $x$ 取遍 $[2,n]$ 中的每一个整数时，所经过的最少的轨道数分别是多少。", "inputFormat": "第一行一个整数 $n$，表示车站数与轨道数。\n\n接下来 $n$ 行，每行两个整数。第 $i$ 行的数 $u_i,v_i$ 表示第 $i$ 条轨道第一次经过时只能从 $u_i$ 走到 $v_i$，此后可以双向经过。", "outputFormat": "输出 $n-1$ 行，每行一个数，第 $i$ 个数表示当 $x=i+1$ 时，经过的最少轨道数。", "hint": "### 样例说明\n\n对于样例 1，地图如下所示：\n\n![样例 1 地图](https://z3.ax1x.com/2021/06/24/RMPoN9.png)\n\n$x=2,3,4,5,6$ 的最短路径均为沿着 $1\\to 2\\to3\\to4\\to5\\to6$ 这条路径走，答案分别是 $1,2,3,4,5$。\n\n$x=7$ 时，若仍按照上述路径走，就不能从 $6$ 号车站直接通过 $7\\to 6$ 这条轨道到 $7$ 号车站，因为这条轨道还是单向的。绕路回去需要再经过 $6$ 条轨道，总共 $11$ 条轨道。\n\n但如果先走一遍 $7\\to6$，即沿着 $1\\to7\\to6\\to7\\to1\\to2\\to3\\to4\\to5\\to6$ 的路径走，来到 $6$ 时就能直接走到 $7$，总共只需要经过 $10$ 条轨道，同时也满足了依次经过 $1\\sim 7$ 号点，比上一种方案更优。\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| 编号 | $n$ |分值|\n| :-: | :-: | :-: |\n| 0 | $\\le6$ | 10pts|\n| 1 | $\\le18$ | 20pts |\n| 2 | $\\le3\\times10^3$ | 32pts |\n| 3 | $\\le5\\times10^5$ | 38pts |\n\n对于 $100\\%$ 的数据，$3\\le n\\le5\\times10^5$。\n\n数据保证从 $1$ 号车站出发可以到达任意车站，且无重边自环、二元环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CGOI-2」No mind to think", "background": "“我的王，这个孩子……不纯粹……他……”\n\n“嗯。容器不能拥有与人交流的能力，否则可能会在交流中产生思维。它们只应该有猎杀的本能，和战斗的天分。就像我的守卫们一样。”\n\n“那些不过是傀儡……”\n\n“傀儡也比这个有思维的家伙好。改天把它带走，它真的好吵……我累了，我出去走走。”\n\n~~无敌的勇敢的性感的神秘的迷人的神气的勤勉的强势的华丽的激情的可怕的漂亮的强大的灰色王子左特骂骂咧咧地滚出了白色宫殿。~~", "description": "圣巢有 $n$ 个鹿角虫车站和 $n$ 条轨道，第 $i$ 条轨道连接 $u_i$ 和 $v_i$ 两个车站。初始时轨道是单向的，第一次经过第 $i$ 条轨道时，只能从 $u_i$ 到达 $v_i$；第一次经过后该轨道变为双向，既可以从 $u_i$ 到 $v_i$，又可以从 $v_i$ 到 $u_i$。\n\n现在白王在 $1$ 号车站，他要经过若干条轨道到达 $2$ 号车站，再从 $2$ 号车站经过若干条轨道到达 $3$ 号车站……一直到 $x$ 号车站。因为白王需要尽快走遍整个王国以便探清瘟疫的情况，所以他问你，当 $x$ 取遍 $[2,n]$ 中的每一个整数时，所经过的最少的轨道数分别是多少。", "inputFormat": "第一行一个整数 $n$，表示车站数与轨道数。\n\n接下来 $n$ 行，每行两个整数。第 $i$ 行的数 $u_i,v_i$ 表示第 $i$ 条轨道第一次经过时只能从 $u_i$ 走到 $v_i$，此后可以双向经过。", "outputFormat": "输出 $n-1$ 行，每行一个数，第 $i$ 个数表示当 $x=i+1$ 时，经过的最少轨道数。", "hint": "### 样例说明\n\n对于样例 1，地图如下所示：\n\n![样例 1 地图](https://z3.ax1x.com/2021/06/24/RMPoN9.png)\n\n$x=2,3,4,5,6$ 的最短路径均为沿着 $1\\to 2\\to3\\to4\\to5\\to6$ 这条路径走，答案分别是 $1,2,3,4,5$。\n\n$x=7$ 时，若仍按照上述路径走，就不能从 $6$ 号车站直接通过 $7\\to 6$ 这条轨道到 $7$ 号车站，因为这条轨道还是单向的。绕路回去需要再经过 $6$ 条轨道，总共 $11$ 条轨道。\n\n但如果先走一遍 $7\\to6$，即沿着 $1\\to7\\to6\\to7\\to1\\to2\\to3\\to4\\to5\\to6$ 的路径走，来到 $6$ 时就能直接走到 $7$，总共只需要经过 $10$ 条轨道，同时也满足了依次经过 $1\\sim 7$ 号点，比上一种方案更优。\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| 编号 | $n$ |分值|\n| :-: | :-: | :-: |\n| 0 | $\\le6$ | 10pts|\n| 1 | $\\le18$ | 20pts |\n| 2 | $\\le3\\times10^3$ | 32pts |\n| 3 | $\\le5\\times10^5$ | 38pts |\n\n对于 $100\\%$ 的数据，$3\\le n\\le5\\times10^5$。\n\n数据保证从 $1$ 号车站出发可以到达任意车站，且无重边自环、二元环。", "locale": "zh-CN"}}}
{"pid": "P8504", "type": "P", "difficulty": 5, "samples": [["5 3 1\n1 0\n2 0\n3 0\n4 0\n114514 0", "1"], ["3 2 1\n1 0\n1 1\n1 1", "1"], ["4 2 1\n3 2\n2 0\n1 1\n3 1", "249561090"], ["15 5 2\n4 0\n2 0\n3 1\n0 1\n1 4\n2 0\n0 4\n1 4\n0 4\n1 0\n2 2\n4 1\n0 4\n1 0\n4 0", "63887640"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "状压 DP"], "title": "「CGOI-2」No will to break", "background": "-传播-由-缺失-它们-子民-思想-哦-思想-信念-\n\n-它们-途径-缺失-切除-哦-虚空-全部-多样性-\n\n-同族-内部-意志-缺失-容器-永远-屈服-哦-\n\n-放-入-物质-全部-缺失-噫-空洞-壳-封印-", "description": "一场战斗由 $n$ 个时刻组成，第 $i$ 个时刻有 $\\frac{x_i}{x_i+y_i}$ 的概率是安全的。\n\n在安全的时刻，你可以进行“聚集”。要求每连续的 $a$ 个时刻都至少要有 $b$ 个时刻进行聚集，在此前提下希望进行聚集的时刻数量尽量少；若不能满足此前提则认为进行聚集的时刻数量为 $0$。求进行聚集的时刻数量的期望，答案对 $998244353$ 取模。", "inputFormat": "第一行输入三个整数 $n,a,b$，含义如上所述。\n\n接下来 $n$ 行，第 $(i+1)$ 行输入两个整数 $x_i,y_i$，表示第 $i$ 个时刻有 $\\frac{x_i}{x_i+y_i}$ 的概率是安全的。", "outputFormat": "输出一个整数，表示期望对 $998244353$ 取模的值。", "hint": "### 样例说明：\n\n用 `1` 表示当前时刻是安全的，`0` 表示不是。\n\n对于样例一，安全性序列只能是 `11111`，每连续三个时刻至少要有一个时刻用来聚集，可以选择第 $3$ 个时刻聚集，满足条件。聚集时刻数量为 $1$，可以证明不会小于 $1$。只有一种可能性，故期望也为 $1$。\n\n对于样例二，安全性序列为 `100`，`101`，`110`，`111` 的概率相等，均为 $\\frac14$，聚集时刻数量分别为 $0,2,1,1$，期望为 $\\frac{0+2+1+1}4=1$。\n\n---\n\n### 数据范围：\n\n**本题采用捆绑测试。**\n\n| 编号| 限制 | 分数 |\n| :-: | :-: | :-: |\n| 0 | $n\\le20$ | 10pts |\n| 1 | $\\forall i$，$x_i=0$ 或 $y_i=0$ | 10pts |\n| 2 | $n\\le3\\times 10^3$ | 30pts |\n| 3 | 无 | 50pts |\n\n对于 $100\\%$ 的数据，$1<n\\le1.5\\times10^4$，$1\\le b<a\\le\\min(n,9)$，$x_i,y_i\\ge0$，$0<x_i+y_i<998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CGOI-2」No will to break", "background": "-传播-由-缺失-它们-子民-思想-哦-思想-信念-\n\n-它们-途径-缺失-切除-哦-虚空-全部-多样性-\n\n-同族-内部-意志-缺失-容器-永远-屈服-哦-\n\n-放-入-物质-全部-缺失-噫-空洞-壳-封印-", "description": "一场战斗由 $n$ 个时刻组成，第 $i$ 个时刻有 $\\frac{x_i}{x_i+y_i}$ 的概率是安全的。\n\n在安全的时刻，你可以进行“聚集”。要求每连续的 $a$ 个时刻都至少要有 $b$ 个时刻进行聚集，在此前提下希望进行聚集的时刻数量尽量少；若不能满足此前提则认为进行聚集的时刻数量为 $0$。求进行聚集的时刻数量的期望，答案对 $998244353$ 取模。", "inputFormat": "第一行输入三个整数 $n,a,b$，含义如上所述。\n\n接下来 $n$ 行，第 $(i+1)$ 行输入两个整数 $x_i,y_i$，表示第 $i$ 个时刻有 $\\frac{x_i}{x_i+y_i}$ 的概率是安全的。", "outputFormat": "输出一个整数，表示期望对 $998244353$ 取模的值。", "hint": "### 样例说明：\n\n用 `1` 表示当前时刻是安全的，`0` 表示不是。\n\n对于样例一，安全性序列只能是 `11111`，每连续三个时刻至少要有一个时刻用来聚集，可以选择第 $3$ 个时刻聚集，满足条件。聚集时刻数量为 $1$，可以证明不会小于 $1$。只有一种可能性，故期望也为 $1$。\n\n对于样例二，安全性序列为 `100`，`101`，`110`，`111` 的概率相等，均为 $\\frac14$，聚集时刻数量分别为 $0,2,1,1$，期望为 $\\frac{0+2+1+1}4=1$。\n\n---\n\n### 数据范围：\n\n**本题采用捆绑测试。**\n\n| 编号| 限制 | 分数 |\n| :-: | :-: | :-: |\n| 0 | $n\\le20$ | 10pts |\n| 1 | $\\forall i$，$x_i=0$ 或 $y_i=0$ | 10pts |\n| 2 | $n\\le3\\times 10^3$ | 30pts |\n| 3 | 无 | 50pts |\n\n对于 $100\\%$ 的数据，$1<n\\le1.5\\times10^4$，$1\\le b<a\\le\\min(n,9)$，$x_i,y_i\\ge0$，$0<x_i+y_i<998244353$。", "locale": "zh-CN"}}}
{"pid": "P8505", "type": "P", "difficulty": 6, "samples": [["3 3\n1 5\n1 1\n1 0", "2\n2\n1\n1"], ["5 2\n2 1\n4 5", "4\n3\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "线段树", "O2优化"], "title": "「CGOI-2」No voice to cry suffering", "background": "父亲，您的王国在崩塌；\n\n父亲，您的人民在离去；\n\n父亲，但您说我不该有为苦难哭泣的声音；\n\n所以我将无能为力，所以我独自分崩离析。", "description": "容器面前有 $n$ 个感染者，这 $n$ 个感染者排成一列，编号依次从 $1$ 到 $n$，第 $i$ 个感染者的感染深度为 $a_i$。\n\n容器会从第 $x$ 个感染者处开始向第 $n$ 个感染者走，依次经过第 $x$ 到 $n$ 个感染者。容器会击杀所有经过的感染者。然而，如果击杀了两个**编号连续，感染深度严格递增**的感染者，那么它会略过下一个感染者（如果存在下一个）。\n\n记 $f_x$ 表示若容器从第 $x$ 个位置开始，击杀的感染者数量（$f$ 之间两两独立）。例如有五个感染者，他们的感染深度依次为：\n\n```plain\n2 6 4 5 1\n```\n\n那么对应的 $f$ 序列为 $\\{4,3,2,2,1\\}$。\n\n你不知道每个感染者的感染深度，只知道 $m$ 组 $f_i-f_{i+1}$ 的值，对于请输出满足条件的不同 $f$ 序列的数量对 $998244353$ 取模的结果。\n\n序列 $f,g$ 不同，当且仅当存在 $1\\le i \\le n$ 满足 $f_i\\not= g_i$。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行一个二元组 $(x,y)$，表示 $f_x-f_{x+1}=y$。\n\n注意，数据中可能存在错误的二元组，您需要自行忽略它们。具体地，若二元组 $(x_i,y_i)$ 使得考虑 $1\\sim i-1$ 的所有合法二元组及该二元组后，不存在满足条件的 $f$ 序列，那么该二元组不合法，您在计算答案时不应考虑该二元组。", "outputFormat": "输出为 $(m+1)$ 行，每行 $1$ 个数。\n\n第一行表示不考虑任何二元组时的答案对 $998244353$ 取模的结果。\n\n第 $i(2 \\le i \\le m+1)$ 行表示考虑 $1 \\sim i-1$ 中所有合法二元组时的答案对 $998244353$ 取模的结果。\n\n", "hint": "### 样例一解释\n\n初始：符合条件的 $f$ 序列有 $\\{3,2,1\\},\\{2,2,1\\}$。\n\n约束一：初始的 $f$ 序列都不符合约束一，忽略该条件。\n\n约束二：只有 $\\{3,2,1\\}$ 符合约束条件。\n\n约束三：只有 $\\{2,2,1\\}$ 符合约束条件。结合约束二，不存在合法的 $f$ 序列，忽略该条件。\n\n---\n\n### 数据范围及约定\n\n对于 $20\\%$ 的数据，$n,m\\le5$。\n\n对于 $60\\%$ 的数据，$n\\le10^6$。\n\n对于另外 $10\\%$ 的数据，$m=0$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{11},0 \\leq m \\leq 5\\times 10^4,0 \\leq |y| \\leq n,1 \\leq x <n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CGOI-2」No voice to cry suffering", "background": "父亲，您的王国在崩塌；\n\n父亲，您的人民在离去；\n\n父亲，但您说我不该有为苦难哭泣的声音；\n\n所以我将无能为力，所以我独自分崩离析。", "description": "容器面前有 $n$ 个感染者，这 $n$ 个感染者排成一列，编号依次从 $1$ 到 $n$，第 $i$ 个感染者的感染深度为 $a_i$。\n\n容器会从第 $x$ 个感染者处开始向第 $n$ 个感染者走，依次经过第 $x$ 到 $n$ 个感染者。容器会击杀所有经过的感染者。然而，如果击杀了两个**编号连续，感染深度严格递增**的感染者，那么它会略过下一个感染者（如果存在下一个）。\n\n记 $f_x$ 表示若容器从第 $x$ 个位置开始，击杀的感染者数量（$f$ 之间两两独立）。例如有五个感染者，他们的感染深度依次为：\n\n```plain\n2 6 4 5 1\n```\n\n那么对应的 $f$ 序列为 $\\{4,3,2,2,1\\}$。\n\n你不知道每个感染者的感染深度，只知道 $m$ 组 $f_i-f_{i+1}$ 的值，对于请输出满足条件的不同 $f$ 序列的数量对 $998244353$ 取模的结果。\n\n序列 $f,g$ 不同，当且仅当存在 $1\\le i \\le n$ 满足 $f_i\\not= g_i$。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每行一个二元组 $(x,y)$，表示 $f_x-f_{x+1}=y$。\n\n注意，数据中可能存在错误的二元组，您需要自行忽略它们。具体地，若二元组 $(x_i,y_i)$ 使得考虑 $1\\sim i-1$ 的所有合法二元组及该二元组后，不存在满足条件的 $f$ 序列，那么该二元组不合法，您在计算答案时不应考虑该二元组。", "outputFormat": "输出为 $(m+1)$ 行，每行 $1$ 个数。\n\n第一行表示不考虑任何二元组时的答案对 $998244353$ 取模的结果。\n\n第 $i(2 \\le i \\le m+1)$ 行表示考虑 $1 \\sim i-1$ 中所有合法二元组时的答案对 $998244353$ 取模的结果。\n\n", "hint": "### 样例一解释\n\n初始：符合条件的 $f$ 序列有 $\\{3,2,1\\},\\{2,2,1\\}$。\n\n约束一：初始的 $f$ 序列都不符合约束一，忽略该条件。\n\n约束二：只有 $\\{3,2,1\\}$ 符合约束条件。\n\n约束三：只有 $\\{2,2,1\\}$ 符合约束条件。结合约束二，不存在合法的 $f$ 序列，忽略该条件。\n\n---\n\n### 数据范围及约定\n\n对于 $20\\%$ 的数据，$n,m\\le5$。\n\n对于 $60\\%$ 的数据，$n\\le10^6$。\n\n对于另外 $10\\%$ 的数据，$m=0$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{11},0 \\leq m \\leq 5\\times 10^4,0 \\leq |y| \\leq n,1 \\leq x <n$。", "locale": "zh-CN"}}}
{"pid": "P8506", "type": "P", "difficulty": 1, "samples": [["1\n#u#n#t#i#t#l#e#d#", "0"], ["1\n# a perfect title", "1"], ["10\n# a\n # b\n## c\n#d\n#  \ne\n# f#g#h#i#j\n  ##k\n# #\nl # m", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "洛谷原创", "洛谷月赛"], "title": "标题计数", "background": "5ab 试图帮洛谷写机器人，数题解中有多少个一级标题。", "description": "Markdown 是一种标记语言。在 Markdown 中，若一行的第一个非空白字符是井号（#），且紧跟着若干个空格，则这一行剩余的**非空白**内容将会按照一级标题渲染。\n\n在本题范围内，下面的都是一级标题：\n\n```plaintext\n# This is a title\n#    This is another title\n    # This is also a title\n    #   You#can#add#more#sharps\n# #\n```\n\n在本题范围内，下面的都不是一级标题：\n\n```plaintext\n<h1>an HTML title</h1>\n#You should insert a space\n## This is a secondary title\naaaaa # This is not a title at all\n # \nYou should add something after the sharp sign\n```\n\n给定一段多行文本，求出这段文本总共有多少个一级标题。", "inputFormat": "第一行输入一个整数 $n$，代表文本的行数。\n\n接下来输入 $n$ 行，是给出的标记文本。", "outputFormat": "输出一行一个整数，为这段文本中的一级标题个数。", "hint": "#### 样例 3 解释\n\n第 2,3,8,10 行（文本第 1,2,7,9 行）是满足条件的一级标题。\n\n---\n\n如果选手在比赛中使用 Windows 系统，则直接从网站或下发题面中复制的样例的换行符是 CRLF，与真实数据中的 LF 会有区别。为了方便调试，建议使用下发文件中的样例进行测试，并直接使用文件输入输出。\n\n### 数据规模与约定\n\n总文本不超过 $100$ 个字符，不超过 $10$ 行。文本中只有英文字母，井号（`#`），换行符（Line Feed，LF，`\\n`）和空格。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|}\\hline\n\\bf{测试点} & \\bf{文本特殊性质}\n\\\\\n\\hline\n1 & 没有空白字符 \\\\\\hline\n2,3& 只有\\ 1\\ 行 \\\\\\hline\n4,5 & / \\\\\\hline\n\\end{array}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "标题计数", "background": "5ab 试图帮洛谷写机器人，数题解中有多少个一级标题。", "description": "Markdown 是一种标记语言。在 Markdown 中，若一行的第一个非空白字符是井号（#），且紧跟着若干个空格，则这一行剩余的**非空白**内容将会按照一级标题渲染。\n\n在本题范围内，下面的都是一级标题：\n\n```plaintext\n# This is a title\n#    This is another title\n    # This is also a title\n    #   You#can#add#more#sharps\n# #\n```\n\n在本题范围内，下面的都不是一级标题：\n\n```plaintext\n<h1>an HTML title</h1>\n#You should insert a space\n## This is a secondary title\naaaaa # This is not a title at all\n # \nYou should add something after the sharp sign\n```\n\n给定一段多行文本，求出这段文本总共有多少个一级标题。", "inputFormat": "第一行输入一个整数 $n$，代表文本的行数。\n\n接下来输入 $n$ 行，是给出的标记文本。", "outputFormat": "输出一行一个整数，为这段文本中的一级标题个数。", "hint": "#### 样例 3 解释\n\n第 2,3,8,10 行（文本第 1,2,7,9 行）是满足条件的一级标题。\n\n---\n\n如果选手在比赛中使用 Windows 系统，则直接从网站或下发题面中复制的样例的换行符是 CRLF，与真实数据中的 LF 会有区别。为了方便调试，建议使用下发文件中的样例进行测试，并直接使用文件输入输出。\n\n### 数据规模与约定\n\n总文本不超过 $100$ 个字符，不超过 $10$ 行。文本中只有英文字母，井号（`#`），换行符（Line Feed，LF，`\\n`）和空格。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|}\\hline\n\\bf{测试点} & \\bf{文本特殊性质}\n\\\\\n\\hline\n1 & 没有空白字符 \\\\\\hline\n2,3& 只有\\ 1\\ 行 \\\\\\hline\n4,5 & / \\\\\\hline\n\\end{array}\n$$", "locale": "zh-CN"}}}
{"pid": "P8507", "type": "P", "difficulty": 2, "samples": [["2 2", "0.5000000000000000"], ["114 514", "0.0077821011673152"], ["191 9810", "0.0051987767584098"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "洛谷月赛"], "title": "毕业后", "background": "毕业后，同学们都在热烈讨论高中的计划。所有人总是难以避开一个话题——学考。\n\n在浙江，高中生除了要参加普通高等学校招生全国统一考试（简称高考）以外，还要参加普通高中学业水平考试（简称学考）。学生要在高一下、高二上和高二下各参加一次学考。", "description": "**注意：题目中的部分描述可能和现实有所出入。**\n\n学考会考查高中所有科目，并根据成绩分层评级，自高到低为 A~E。每门科目都会按照一个确定的比率 $w$（所有学科都相同）确定 E 等人数。如果学考有**大于一门**科目拿到了 E 等（不合格），该学生将不能毕业。\n\n在另一个平行世界里，高中总共有 $a$ 门科目。全省共有 $b$ 名考生。如果 E 等的分数线过高，可能会导致总存在某些人毕不了业的情况。现在，考试院院长找到了你，希望你确定学考 E 等占所有考生的**最大**比例（即，最大化 $w$ 的值），使得**存在**至少一种方案，能使浙江所有考生都能毕业。\n\n如果按照某个比例算出来的 E 等考生数不为整数，则将考生数**向上**取整。", "inputFormat": "一行，输入两个正整数 $a,b$。", "outputFormat": "输出一个浮点数，表示 E 等级的最大占比。\n\n本题使用自定义校验器，与标准答案之间的绝对误差在 $10^{-6}$ 以内的结果都算作正确答案。", "hint": "#### 样例 1 解释\n\n将 E 等比率设成 $\\frac{1}{2}$，此时每门科目都恰好有一名考生不合格。当第一名考生在第一门科目不合格，第二名考生在第二门科目不合格时，所有考生都能毕业。所以 $\\frac{1}{2}$ 是满足要求的。\n\n可以证明不存在更优的方案。\n\n### 数据规模与约定\n\n对于所有数据，$1\\le a, b\\le 10000$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|}\\hline\n\\bf{测试点} & \\bf{特殊性质}\n\\\\\n\\hline\n1\\sim3 & b=1\\\\\\hline\n4\\sim6 & a=b \\\\\\hline\n7\\sim10 & /\\\\\\hline\n\\end{array}\n$$\n\n做完这道题，你能否说明，为什么现实中，浙江 E 等不能超过 $5\\%$ 呢？", "locale": "zh-CN", "translations": {"zh-CN": {"title": "毕业后", "background": "毕业后，同学们都在热烈讨论高中的计划。所有人总是难以避开一个话题——学考。\n\n在浙江，高中生除了要参加普通高等学校招生全国统一考试（简称高考）以外，还要参加普通高中学业水平考试（简称学考）。学生要在高一下、高二上和高二下各参加一次学考。", "description": "**注意：题目中的部分描述可能和现实有所出入。**\n\n学考会考查高中所有科目，并根据成绩分层评级，自高到低为 A~E。每门科目都会按照一个确定的比率 $w$（所有学科都相同）确定 E 等人数。如果学考有**大于一门**科目拿到了 E 等（不合格），该学生将不能毕业。\n\n在另一个平行世界里，高中总共有 $a$ 门科目。全省共有 $b$ 名考生。如果 E 等的分数线过高，可能会导致总存在某些人毕不了业的情况。现在，考试院院长找到了你，希望你确定学考 E 等占所有考生的**最大**比例（即，最大化 $w$ 的值），使得**存在**至少一种方案，能使浙江所有考生都能毕业。\n\n如果按照某个比例算出来的 E 等考生数不为整数，则将考生数**向上**取整。", "inputFormat": "一行，输入两个正整数 $a,b$。", "outputFormat": "输出一个浮点数，表示 E 等级的最大占比。\n\n本题使用自定义校验器，与标准答案之间的绝对误差在 $10^{-6}$ 以内的结果都算作正确答案。", "hint": "#### 样例 1 解释\n\n将 E 等比率设成 $\\frac{1}{2}$，此时每门科目都恰好有一名考生不合格。当第一名考生在第一门科目不合格，第二名考生在第二门科目不合格时，所有考生都能毕业。所以 $\\frac{1}{2}$ 是满足要求的。\n\n可以证明不存在更优的方案。\n\n### 数据规模与约定\n\n对于所有数据，$1\\le a, b\\le 10000$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|}\\hline\n\\bf{测试点} & \\bf{特殊性质}\n\\\\\n\\hline\n1\\sim3 & b=1\\\\\\hline\n4\\sim6 & a=b \\\\\\hline\n7\\sim10 & /\\\\\\hline\n\\end{array}\n$$\n\n做完这道题，你能否说明，为什么现实中，浙江 E 等不能超过 $5\\%$ 呢？", "locale": "zh-CN"}}}
{"pid": "P8508", "type": "P", "difficulty": 3, "samples": [["3 5 1 3\n1 2 2", "2"], ["2 10 4 10\n9 1", "3"], ["10 2 1 2\n1 1 1 1 1 1 1 1 1 1", "10"], ["见下发文件 task/task4.in", "见下发文件 task/task4.ans"], ["见下发文件 task/task5.in", "见下发文件 task/task5.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "做不完的作业", "background": "高中的任务是非常艰巨的，要学习十门功课（浙江要学技术）。导致作业超级加倍，这一点在暑假就已经体现出来了。\n\n作业的总量是一定的，但不同作业下发的时间是不一定的，导致每天都要花不同的时间应付作业。此时，如何保证睡眠是一个需要仔细考虑的问题。", "description": "**提示：如果你对题目内容有疑问，可以配合样例更好地阅读。**\n\n有 $n$ 个任务，第 $i$ 个任务需要 $t_i$ 的时间。Eric 要在若干天内**依次**完成这些任务。Eric 是一个专注的人，所以完成每个任务的时间**必须连续**。\n\n一天有 $x$ 的时间。由于 Eric 需要睡觉，所以 Eric 不能利用所有的时间。具体地：\n\n- Eric 每天**必须睡觉**；\n- Eric 每天的睡觉的时间是连续的，且睡觉时间结束后，第二天恰好开始；\n- Eric **前 $\\boldsymbol i$ 天**的睡觉时间**总和**不能少于 $r\\cdot x\\cdot i$ 的时间。$r$ 是一个给定的实数，$i$ 是一个正整数。\n\nEric 想问你，至少需要多少天才能完成任务。", "inputFormat": "第一行输入四个整数 $n,x,p,q$，代表 $r=\\dfrac p q$。\n\n接下来一行，输入 $n$ 个整数，第 $i$ 个代表 $t_i$。", "outputFormat": "输出一个正整数，代表最小天数。可以证明，在下文限定的数据下，一定存在至少一个解。", "hint": "#### 样例 1 解释\n\n下面是一种可能的方案：\n\nEric 先在第一天做任务 1，总共消耗 $1$ 的时间，用 $4$ 时间睡觉，满足至少要 $5\\times \\dfrac 1 3=\\dfrac 5 3$ 的时间睡觉的要求。\n\nEric 再在第二天加班加点，完成剩下的任务，有 $1$ 的时间睡觉。两天睡觉总量为 $5\\ge 10\\times \\dfrac 1 3=\\dfrac {10} 3$，也是满足要求的。\n\n#### 样例 2 解释\n\nEric 试图在第一天完成任务 1，但假如要做就会熬夜，觉就不够睡。所以 Eric 第一天只能睡大觉。Eric 在第二天完成任务 1 就没有问题。\n\n同时请注意，即使睡觉时间满足了要求，Eric 也不能在第二天就完成任务 2，因为 Eric 必须睡觉。所以 Eric 先睡到第三天，然后完成任务 2。可以证明不存在方案小于三天。\n\n同时注意数据**不保证** $\\gcd(p,q)=1$。\n\n#### 样例 3 解释\n\n显然一天只能干一件活，所以要 $10$ 天。\n\n#### 样例 4 解释\n\n该样例满足子任务 3 的限制条件。\n\n#### 样例 5 解释\n\n该样例满足子任务 5 的限制条件。\n\n### 数据规模与约定\n\n**本题捆绑测试**。对于所有数据，保证 $1\\le n\\le 10^5$，$1\\le t_i<x\\le 10^6$，$1\\le p<q\\le 10^6$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\n\\bf 子任务 & \\bf 分值 & n\\le & \\bf特殊性质\n\\\\\n\\hline\n1 & 10 & 3 & /\\\\\\hline\n2 & 20 & 10^3 & \\bf A \\\\\\hline\n3 & 20 & / & \\bf A\\\\\\hline\n4 & 20 & / & \\bf B\\\\\\hline\n5 & 30 & / & /\\\\\\hline\n\\end{array}\n$$\n\n特殊性质 $\\bf A$：$\\forall i,\\ \\dfrac{t_i}{x}+\\dfrac{p}{q}\\le 1$。\n\n特殊性质 $\\bf B$：$n\\times q\\le 10^6$。\n\n为了减少评测量，本题开启子任务依赖。具体地，当且仅当前四个子任务全部通过时，子任务 5 才计分，否则子任务 5 计 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "做不完的作业", "background": "高中的任务是非常艰巨的，要学习十门功课（浙江要学技术）。导致作业超级加倍，这一点在暑假就已经体现出来了。\n\n作业的总量是一定的，但不同作业下发的时间是不一定的，导致每天都要花不同的时间应付作业。此时，如何保证睡眠是一个需要仔细考虑的问题。", "description": "**提示：如果你对题目内容有疑问，可以配合样例更好地阅读。**\n\n有 $n$ 个任务，第 $i$ 个任务需要 $t_i$ 的时间。Eric 要在若干天内**依次**完成这些任务。Eric 是一个专注的人，所以完成每个任务的时间**必须连续**。\n\n一天有 $x$ 的时间。由于 Eric 需要睡觉，所以 Eric 不能利用所有的时间。具体地：\n\n- Eric 每天**必须睡觉**；\n- Eric 每天的睡觉的时间是连续的，且睡觉时间结束后，第二天恰好开始；\n- Eric **前 $\\boldsymbol i$ 天**的睡觉时间**总和**不能少于 $r\\cdot x\\cdot i$ 的时间。$r$ 是一个给定的实数，$i$ 是一个正整数。\n\nEric 想问你，至少需要多少天才能完成任务。", "inputFormat": "第一行输入四个整数 $n,x,p,q$，代表 $r=\\dfrac p q$。\n\n接下来一行，输入 $n$ 个整数，第 $i$ 个代表 $t_i$。", "outputFormat": "输出一个正整数，代表最小天数。可以证明，在下文限定的数据下，一定存在至少一个解。", "hint": "#### 样例 1 解释\n\n下面是一种可能的方案：\n\nEric 先在第一天做任务 1，总共消耗 $1$ 的时间，用 $4$ 时间睡觉，满足至少要 $5\\times \\dfrac 1 3=\\dfrac 5 3$ 的时间睡觉的要求。\n\nEric 再在第二天加班加点，完成剩下的任务，有 $1$ 的时间睡觉。两天睡觉总量为 $5\\ge 10\\times \\dfrac 1 3=\\dfrac {10} 3$，也是满足要求的。\n\n#### 样例 2 解释\n\nEric 试图在第一天完成任务 1，但假如要做就会熬夜，觉就不够睡。所以 Eric 第一天只能睡大觉。Eric 在第二天完成任务 1 就没有问题。\n\n同时请注意，即使睡觉时间满足了要求，Eric 也不能在第二天就完成任务 2，因为 Eric 必须睡觉。所以 Eric 先睡到第三天，然后完成任务 2。可以证明不存在方案小于三天。\n\n同时注意数据**不保证** $\\gcd(p,q)=1$。\n\n#### 样例 3 解释\n\n显然一天只能干一件活，所以要 $10$ 天。\n\n#### 样例 4 解释\n\n该样例满足子任务 3 的限制条件。\n\n#### 样例 5 解释\n\n该样例满足子任务 5 的限制条件。\n\n### 数据规模与约定\n\n**本题捆绑测试**。对于所有数据，保证 $1\\le n\\le 10^5$，$1\\le t_i<x\\le 10^6$，$1\\le p<q\\le 10^6$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\n\\bf 子任务 & \\bf 分值 & n\\le & \\bf特殊性质\n\\\\\n\\hline\n1 & 10 & 3 & /\\\\\\hline\n2 & 20 & 10^3 & \\bf A \\\\\\hline\n3 & 20 & / & \\bf A\\\\\\hline\n4 & 20 & / & \\bf B\\\\\\hline\n5 & 30 & / & /\\\\\\hline\n\\end{array}\n$$\n\n特殊性质 $\\bf A$：$\\forall i,\\ \\dfrac{t_i}{x}+\\dfrac{p}{q}\\le 1$。\n\n特殊性质 $\\bf B$：$n\\times q\\le 10^6$。\n\n为了减少评测量，本题开启子任务依赖。具体地，当且仅当前四个子任务全部通过时，子任务 5 才计分，否则子任务 5 计 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P8509", "type": "P", "difficulty": 4, "samples": [["5 1 5\n1 2 1\n2 3 1\n3 4 1\n4 5 1", "4\n2201"], ["13 4 5\n1 3 3\n2 3 2\n6 4 5\n7 4 10\n4 8 2\n11 8 3\n5 13 6\n8 13 5\n8 3 4\n10 5 8\n12 10 3\n13 9 9", "85\n111121202112"], ["见下发文件 corridor/corridor3.in", "见下发文件 corridor/corridor3.ans"], ["见下发文件 corridor/corridor4.in", "见下发文件 corridor/corridor4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "图论", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "如何得到 npy", "background": "作为年级第一大风流人物，Steve 总会给自己找很多东西，包括但不限于 npy。Steve 看上了 Ada，并试图接近她，然而 Ada 并不是那么乐意。", "description": "**提示：你可以阅读题目描述末尾的形式化题面。**\n\nSteve 所在的校园有 $n$ 间教室，编号为 $1$ 到 $n$，有 $n-1$ 条走廊将其连通。也就是说，教室和走廊构成了一棵树。每条走廊都有一定的长度 $w_i$，经过这条走廊的时间等于其长度的数值。\n\nSteve 喜欢在校园里游荡。当然，他希望最后能走到自己的教室 $s$ 或 Ada 的教室 $t$。但由于学校过于错综复杂，且 Steve 不想走回头路，所以他想到了如下方案：\n\n对于每个教室（Steve 和 Ada 的教室除外，这两个教室周围不应该有任何标牌），在一条与其相连的边立上标牌。每次走到这个教室，就从立了标牌的边出。\n\nSteve 可能会在学校的任何一个教室出现，所以一方面，Steve 需要让他从每个教室都能跟着标牌回到他的或 Ada 的教室。另一方面，他希望从学校所有教室走到目的地的**时间总和**尽可能小。\n\n由于 Steve 又要去找 Ada 了，所以请你帮他完成这个任务。\n\n#### 形式化题意\n\n给定一棵 $n$ 个节点的无根树和两个关键点 $s,t$，要求对所有边定向，满足：\n\n- 每条边要么是有向边，要么被删除；\n- 每个点（除 $s,t$）出度恰好为 $1$，$s,t$ 出度为 $0$；\n- 每个点都可以顺着有向边到达 $s$ 或 $t$。\n\n求每个点到 $s$ 或 $t$ 的距离总和最小值。", "inputFormat": "第一行输入三个正整数 $n$，$s$，$t$。\n\n接下来 $n-1$ 行，每行输入三个正整数 $u_i$，$v_i$，$w_i$，代表一条树边 $(u_i,v_i)$，权值为 $w_i$。", "outputFormat": "输出第一行一个正整数，代表最小的权值和。\n\n接下来一行，输出一个字符串 $S$，要求：\n\n- $S_i=\\texttt{0}$，指第 $i$ 条边两边均不立标牌；\n- $S_i=\\texttt{1}$，指第 $i$ 条边在 $u_i$ 处立标牌；\n- $S_i=\\texttt{2}$，指第 $i$ 条边在 $v_i$ 处立标牌。\n\n本题使用自定义校验器评测。如果有多种方案，输出任意一种。", "hint": "#### 样例 1 解释\n\n`2011` 也是合法的答案，但 `2211`，`1102` 等都不是。\n\n#### 样例 2 解释\n\n下图是取到样例中最优解的状态（$(8,13)$ 这条边没有画出）:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/78tlf89y.png)\n\n#### 样例 3 解释\n\n该样例满足子任务 2 的限制条件。\n\n#### 样例 4 解释\n\n该样例满足子任务 5 的限制条件。\n\n---\n\n下发文件中还有 `checker.cpp` 可判定答案是否合法。使用时，先编译（设二进制文件为 `checker`（Linux/MacOS）或 `checker.exe`（Windows）），然后在终端输入如下命令：\n\n```\n./checker in.txt out.txt ans.txt\n```\n\n如果你使用了 Windows 系统且无法运行上述命令，请尝试：\n\n```\nchecker.exe in.txt out.txt ans.txt\n```\n\n其中 `in.txt`、`out.txt`、`ans.txt` 分别是放在同一目录下的输入文件、选手输出、标准答案。\n\n结果可能有如下中的一种：\n\n- `ok`：结果正确，可以得到满分；\n- `wrong answer`：第一行答案错误；\n- `points 0.60`：第一行答案正确，第二行答案错误。\n\n对于所有非满分情况，会有附加消息，意义如下：\n\n- `A x y`：第一行答案错误，标准答案是 $x$，选手答案是 $y$；\n- `B`：第二行长度不符合条件；\n- `C`：第二行出现非法字符；\n- `D`：第二行给出的构造不满足题目中关于度数的限制；\n- `E x y`：第二行给出的构造产生的答案是 $y$，而实际上答案是 $x$。\n\n该校验器和最终评测时采用的校验器可能有所不同。\n\n注意下发文件的输出样例中只有最优答案，没有构造方案。\n\n### 数据规模与约定\n\n**本题捆绑测试**。对于所有数据，$3\\le n\\le 3\\times 10^5$，$1\\le w_i\\le2\\times 10^8$，$1\\le s,t\\le n$，$s\\neq t$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c||c|c}\\hline\n\n\\bf 子任务 & \\bf 分值 & \\bf 依赖 & n\\le & \\bf特殊性质\n\\\\\n\\hline\n\\hline\n1 & 10 & / & 10 & /\\\\\\hline\n2 & 15 & 1 & 18 & /\\\\\\hline\n3 & 15 & / & / & v_i=u_i+1\\\\\\hline\n4 & 10 & / & / & u_i=1\\\\\\hline\n5 & 20 & / & / & 存在边\\ (s,t)\\\\\\hline\n6 & 30 & 2\\sim5 &/ & /\n\\end{array}\n$$\n\n如果你计算出了正确的答案，但是你的构造是错误的，那你将得到该测试点 $60\\%$ 的分数。注意即使你只实现了第一小问，请依旧在第二行输出任意一个非空字符串，否则可能会不计分。\n\n本题中的依赖指：某子任务的得分占比不能超过其所依赖的子任务得分占比。比如，一选手子任务 $1$ 得到 $60\\%$ 的分数，则他的子任务 $2$ 就不会超过对应的 $60\\%$ 分数，即不超过 $9$ 分。\n\n答案可能很大，请注意你使用的数据类型。\n\n---\n\n到毕业为止，Steve 也没有追到 Ada。What a sad story. :-(", "locale": "zh-CN", "translations": {"zh-CN": {"title": "如何得到 npy", "background": "作为年级第一大风流人物，Steve 总会给自己找很多东西，包括但不限于 npy。Steve 看上了 Ada，并试图接近她，然而 Ada 并不是那么乐意。", "description": "**提示：你可以阅读题目描述末尾的形式化题面。**\n\nSteve 所在的校园有 $n$ 间教室，编号为 $1$ 到 $n$，有 $n-1$ 条走廊将其连通。也就是说，教室和走廊构成了一棵树。每条走廊都有一定的长度 $w_i$，经过这条走廊的时间等于其长度的数值。\n\nSteve 喜欢在校园里游荡。当然，他希望最后能走到自己的教室 $s$ 或 Ada 的教室 $t$。但由于学校过于错综复杂，且 Steve 不想走回头路，所以他想到了如下方案：\n\n对于每个教室（Steve 和 Ada 的教室除外，这两个教室周围不应该有任何标牌），在一条与其相连的边立上标牌。每次走到这个教室，就从立了标牌的边出。\n\nSteve 可能会在学校的任何一个教室出现，所以一方面，Steve 需要让他从每个教室都能跟着标牌回到他的或 Ada 的教室。另一方面，他希望从学校所有教室走到目的地的**时间总和**尽可能小。\n\n由于 Steve 又要去找 Ada 了，所以请你帮他完成这个任务。\n\n#### 形式化题意\n\n给定一棵 $n$ 个节点的无根树和两个关键点 $s,t$，要求对所有边定向，满足：\n\n- 每条边要么是有向边，要么被删除；\n- 每个点（除 $s,t$）出度恰好为 $1$，$s,t$ 出度为 $0$；\n- 每个点都可以顺着有向边到达 $s$ 或 $t$。\n\n求每个点到 $s$ 或 $t$ 的距离总和最小值。", "inputFormat": "第一行输入三个正整数 $n$，$s$，$t$。\n\n接下来 $n-1$ 行，每行输入三个正整数 $u_i$，$v_i$，$w_i$，代表一条树边 $(u_i,v_i)$，权值为 $w_i$。", "outputFormat": "输出第一行一个正整数，代表最小的权值和。\n\n接下来一行，输出一个字符串 $S$，要求：\n\n- $S_i=\\texttt{0}$，指第 $i$ 条边两边均不立标牌；\n- $S_i=\\texttt{1}$，指第 $i$ 条边在 $u_i$ 处立标牌；\n- $S_i=\\texttt{2}$，指第 $i$ 条边在 $v_i$ 处立标牌。\n\n本题使用自定义校验器评测。如果有多种方案，输出任意一种。", "hint": "#### 样例 1 解释\n\n`2011` 也是合法的答案，但 `2211`，`1102` 等都不是。\n\n#### 样例 2 解释\n\n下图是取到样例中最优解的状态（$(8,13)$ 这条边没有画出）:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/78tlf89y.png)\n\n#### 样例 3 解释\n\n该样例满足子任务 2 的限制条件。\n\n#### 样例 4 解释\n\n该样例满足子任务 5 的限制条件。\n\n---\n\n下发文件中还有 `checker.cpp` 可判定答案是否合法。使用时，先编译（设二进制文件为 `checker`（Linux/MacOS）或 `checker.exe`（Windows）），然后在终端输入如下命令：\n\n```\n./checker in.txt out.txt ans.txt\n```\n\n如果你使用了 Windows 系统且无法运行上述命令，请尝试：\n\n```\nchecker.exe in.txt out.txt ans.txt\n```\n\n其中 `in.txt`、`out.txt`、`ans.txt` 分别是放在同一目录下的输入文件、选手输出、标准答案。\n\n结果可能有如下中的一种：\n\n- `ok`：结果正确，可以得到满分；\n- `wrong answer`：第一行答案错误；\n- `points 0.60`：第一行答案正确，第二行答案错误。\n\n对于所有非满分情况，会有附加消息，意义如下：\n\n- `A x y`：第一行答案错误，标准答案是 $x$，选手答案是 $y$；\n- `B`：第二行长度不符合条件；\n- `C`：第二行出现非法字符；\n- `D`：第二行给出的构造不满足题目中关于度数的限制；\n- `E x y`：第二行给出的构造产生的答案是 $y$，而实际上答案是 $x$。\n\n该校验器和最终评测时采用的校验器可能有所不同。\n\n注意下发文件的输出样例中只有最优答案，没有构造方案。\n\n### 数据规模与约定\n\n**本题捆绑测试**。对于所有数据，$3\\le n\\le 3\\times 10^5$，$1\\le w_i\\le2\\times 10^8$，$1\\le s,t\\le n$，$s\\neq t$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c||c|c}\\hline\n\n\\bf 子任务 & \\bf 分值 & \\bf 依赖 & n\\le & \\bf特殊性质\n\\\\\n\\hline\n\\hline\n1 & 10 & / & 10 & /\\\\\\hline\n2 & 15 & 1 & 18 & /\\\\\\hline\n3 & 15 & / & / & v_i=u_i+1\\\\\\hline\n4 & 10 & / & / & u_i=1\\\\\\hline\n5 & 20 & / & / & 存在边\\ (s,t)\\\\\\hline\n6 & 30 & 2\\sim5 &/ & /\n\\end{array}\n$$\n\n如果你计算出了正确的答案，但是你的构造是错误的，那你将得到该测试点 $60\\%$ 的分数。注意即使你只实现了第一小问，请依旧在第二行输出任意一个非空字符串，否则可能会不计分。\n\n本题中的依赖指：某子任务的得分占比不能超过其所依赖的子任务得分占比。比如，一选手子任务 $1$ 得到 $60\\%$ 的分数，则他的子任务 $2$ 就不会超过对应的 $60\\%$ 分数，即不超过 $9$ 分。\n\n答案可能很大，请注意你使用的数据类型。\n\n---\n\n到毕业为止，Steve 也没有追到 Ada。What a sad story. :-(", "locale": "zh-CN"}}}
{"pid": "P8511", "type": "P", "difficulty": 6, "samples": [["10\n1 1 2 3 2 3 6 7 7\n10 6 4 10 8 10 5 3 5 4", "0\n15\n12\n15\n15\n15\n14\n15\n15\n15"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "O2优化", "字典树 Trie", "Ynoi"], "title": "[Ynoi Easy Round 2021] TEST_68", "background": "", "description": "给定一棵 $n$ 个节点的树，第 $i$ 个点有一个权值 $a_i$。\n\n对每个点 $x$，其的答案为其所在子树外的所有点中，选两个可以相同的点 $i,j$，$a_i$ 异或 $a_j$ 的最大值，如果选不出两个点，则认为 $x$ 的答案是 $0$。 ", "inputFormat": "第一行一个数 $n$。\n\n之后一行 $n-1$ 个数，第 $i$ 个数表示 $i+1$ 节点的父亲节点 $j$，保证 $j<i+1$。\n\n之后一行 $n$ 个元素，第 $i$ 个元素表示第 $i$ 个点的权值 $a_i$。", "outputFormat": "$n$ 行，每行一个数，其中第 $i$ 行的数表示第 $i$ 个节点对应的答案。", "hint": "Idea：nzhtl1477，Solution：zx2003，Code：nzhtl1477，Data：nzhtl1477\n\n\n对于 $10\\%$ 的数据，满足 $1 \\le n \\le 10^2$。\n\n对于另外 $20\\%$ 的数据，满足 $1 \\le n \\le 10^4$。\n\n对于另外 $30\\%$ 的数据，树构成一条链。\n\n对于另外 $20\\%$ 的数据，满足 $0 \\le a_i \\le 10^2$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 5 \\times 10^5$，$ 0\\le a_i \\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2021] TEST_68", "background": "", "description": "给定一棵 $n$ 个节点的树，第 $i$ 个点有一个权值 $a_i$。\n\n对每个点 $x$，其的答案为其所在子树外的所有点中，选两个可以相同的点 $i,j$，$a_i$ 异或 $a_j$ 的最大值，如果选不出两个点，则认为 $x$ 的答案是 $0$。 ", "inputFormat": "第一行一个数 $n$。\n\n之后一行 $n-1$ 个数，第 $i$ 个数表示 $i+1$ 节点的父亲节点 $j$，保证 $j<i+1$。\n\n之后一行 $n$ 个元素，第 $i$ 个元素表示第 $i$ 个点的权值 $a_i$。", "outputFormat": "$n$ 行，每行一个数，其中第 $i$ 行的数表示第 $i$ 个节点对应的答案。", "hint": "Idea：nzhtl1477，Solution：zx2003，Code：nzhtl1477，Data：nzhtl1477\n\n\n对于 $10\\%$ 的数据，满足 $1 \\le n \\le 10^2$。\n\n对于另外 $20\\%$ 的数据，满足 $1 \\le n \\le 10^4$。\n\n对于另外 $30\\%$ 的数据，树构成一条链。\n\n对于另外 $20\\%$ 的数据，满足 $0 \\le a_i \\le 10^2$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 5 \\times 10^5$，$ 0\\le a_i \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8512", "type": "P", "difficulty": 6, "samples": [["4 5 3\n1 4 3\n2 3 1\n5 5 2\n1 2 4\n1 2\n1 4\n2 3\n", "8\n14\n4\n"], ["10 10 10\n1 5 20\n5 7 7\n3 6 8\n1 6 20\n1 7 14\n5 6 5\n9 9 18\n5 10 5\n1 9 6\n1 5 19\n1 10\n5 5\n7 10\n4 8\n1 9\n1 6\n6 7\n7 10\n2 6\n1 4\n", "124\n98\n124\n86\n59\n80\n28\n124\n80\n127\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "扫描线", "Ynoi"], "title": "[Ynoi Easy Round 2021] TEST_152", "background": null, "description": "转转有一个长度为 $n$ 的操作序列 $(l_i,r_i,v_i)$。\n\n现在有 $q$ 个询问 $(L,R)$。\n\n对于每次询问，你初始有一个长度为 $m$ 的序列 $c$，初值全是 $0$。\n\n现在我们依次执行操作序列的第 $L,L+1,L+2,\\cdots,R$ 项所对应的操作。\n\n每个操作是将序列 $c$ 的第 $l_i$ 项至第 $r_i$ 项赋值为 $v_i$。\n\n询问所有操作结束后整个序列 $c$ 中所有数的和。\n\n询问之间互相独立。", "inputFormat": "第一行三个正整数 $n,m,q$。\n\n第 $2$ 行至第 $n+1$ 行，每行 $3$ 个正整数，第 $i+1$ 行表示 $l_i,r_i,v_i$。\n\n后面 $q$ 行，每行两个正整数，表示一次询问 $L,R$。", "outputFormat": "$q$ 行，每行一个正整数，表示询问的答案。", "hint": "Idea：Ynoi，Solution：Ynoi，Code：Ynoi，Data：Ynoi\n\n对于 $100\\%$ 的数据，满足：\n\n$ 1 \\le n,m,q \\le 5 \\times 10^5$\n\n$ 1 \\le l_i \\le r_i \\le m$\n\n$0 \\le v_i \\le 2 \\times 10^9$\n\n$1 \\le L \\le R \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2021] TEST_152", "background": null, "description": "转转有一个长度为 $n$ 的操作序列 $(l_i,r_i,v_i)$。\n\n现在有 $q$ 个询问 $(L,R)$。\n\n对于每次询问，你初始有一个长度为 $m$ 的序列 $c$，初值全是 $0$。\n\n现在我们依次执行操作序列的第 $L,L+1,L+2,\\cdots,R$ 项所对应的操作。\n\n每个操作是将序列 $c$ 的第 $l_i$ 项至第 $r_i$ 项赋值为 $v_i$。\n\n询问所有操作结束后整个序列 $c$ 中所有数的和。\n\n询问之间互相独立。", "inputFormat": "第一行三个正整数 $n,m,q$。\n\n第 $2$ 行至第 $n+1$ 行，每行 $3$ 个正整数，第 $i+1$ 行表示 $l_i,r_i,v_i$。\n\n后面 $q$ 行，每行两个正整数，表示一次询问 $L,R$。", "outputFormat": "$q$ 行，每行一个正整数，表示询问的答案。", "hint": "Idea：Ynoi，Solution：Ynoi，Code：Ynoi，Data：Ynoi\n\n对于 $100\\%$ 的数据，满足：\n\n$ 1 \\le n,m,q \\le 5 \\times 10^5$\n\n$ 1 \\le l_i \\le r_i \\le m$\n\n$0 \\le v_i \\le 2 \\times 10^9$\n\n$1 \\le L \\le R \\le n$。", "locale": "zh-CN"}}}
{"pid": "P8513", "type": "P", "difficulty": 7, "samples": [["5 2\n2 -1 1\n0 -3 5\n1 -3 2\n1 3 5\n3 2 2\n1 2 4\n1 -2 -9\n", "2\n9\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2021] TEST_136", "background": "", "description": "给定 $n$ 个点 $(x_i,y_i,c_i)$，$i=1,2,\\dots,n$，共有 $m$ 次查询操作，每次查询给定 $A,B,C$，问满足 $Ax_i+By_i+C<0$，$Ax_j+By_j+C<0$，$c_i=c_j$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来 $n$ 行，每行三个整数 $x_i\\ y_i\\ c_i$，$i=1,2,\\dots,n$；\n\n接下来 $m$ 行，每行三个整数 $A\\ B\\ C$。", "outputFormat": "共 $m$ 行，每行一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n样例解释：\n\n第一个查询对应 $(2,2)(3,3)$；\n\n第二个查询对应 $(1,1)(2,2)(2,4)(3,3)(3,5)(4,2)(4,4)(5,3)(5,5)$。\n\n数据范围：\n\n对 $5\\%$ 的数据，$n,m\\le 10^3$；\n\n对另外 $10\\%$ 的数据，$c_i\\le 2$；\n\n对另外 $15\\%$ 的数据，$c_i\\le 100$；\n\n对另外 $15\\%$​ 的数据，$\\max(|x_i|,|y_i|)=10^6$​；\n\n对另外 $15\\%$ 的数据，$|A|=|B|=1$；\n\n对另外 $10\\%$ 的数据，$n\\le 20000,\\;m\\le 200000$；\n\n对于其余数据，无特殊约束。\n\n每部分数据构成子任务，无依赖关系。\n\n所有数据满足：\n\n$1\\le n\\le 50000$；\n\n$1\\le m\\le 500000$；\n\n$A^2+B^2>0$；\n\n$-10^9\\le x_i,y_i,A,B,C\\le 10^9$；\n\n$1\\le c_i\\le n$；\n\n所有数值为整数；\n\n当 $i\\ne j$ 时，$x_i\\ne x_j$ 或 $y_i\\ne y_j$。\n\n对于除了子任务 4 以外的数据，满足 $n$ 个点的 $x,y$ 坐标分别在某个预设的区间内均匀随机选取，并保证没有重复的点，且对于第 $i$ 个点，$c_i$ 和 $x_i,y_i$ 是分别独立地随机选取的，但 $c_i$ 的分布没有特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2021] TEST_136", "background": "", "description": "给定 $n$ 个点 $(x_i,y_i,c_i)$，$i=1,2,\\dots,n$，共有 $m$ 次查询操作，每次查询给定 $A,B,C$，问满足 $Ax_i+By_i+C<0$，$Ax_j+By_j+C<0$，$c_i=c_j$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来 $n$ 行，每行三个整数 $x_i\\ y_i\\ c_i$，$i=1,2,\\dots,n$；\n\n接下来 $m$ 行，每行三个整数 $A\\ B\\ C$。", "outputFormat": "共 $m$ 行，每行一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n样例解释：\n\n第一个查询对应 $(2,2)(3,3)$；\n\n第二个查询对应 $(1,1)(2,2)(2,4)(3,3)(3,5)(4,2)(4,4)(5,3)(5,5)$。\n\n数据范围：\n\n对 $5\\%$ 的数据，$n,m\\le 10^3$；\n\n对另外 $10\\%$ 的数据，$c_i\\le 2$；\n\n对另外 $15\\%$ 的数据，$c_i\\le 100$；\n\n对另外 $15\\%$​ 的数据，$\\max(|x_i|,|y_i|)=10^6$​；\n\n对另外 $15\\%$ 的数据，$|A|=|B|=1$；\n\n对另外 $10\\%$ 的数据，$n\\le 20000,\\;m\\le 200000$；\n\n对于其余数据，无特殊约束。\n\n每部分数据构成子任务，无依赖关系。\n\n所有数据满足：\n\n$1\\le n\\le 50000$；\n\n$1\\le m\\le 500000$；\n\n$A^2+B^2>0$；\n\n$-10^9\\le x_i,y_i,A,B,C\\le 10^9$；\n\n$1\\le c_i\\le n$；\n\n所有数值为整数；\n\n当 $i\\ne j$ 时，$x_i\\ne x_j$ 或 $y_i\\ne y_j$。\n\n对于除了子任务 4 以外的数据，满足 $n$ 个点的 $x,y$ 坐标分别在某个预设的区间内均匀随机选取，并保证没有重复的点，且对于第 $i$ 个点，$c_i$ 和 $x_i,y_i$ 是分别独立地随机选取的，但 $c_i$ 的分布没有特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8518", "type": "P", "difficulty": 7, "samples": [["3\n10 15 13\n2\n0 2 20\n0 1 -11\n", "0 4 13\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "IOI", "交互题"], "title": "[IOI 2021] 分糖果", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。", "description": "Khong 阿姨正在给附近一所学校的学生准备 $n$ 盒糖果。盒子的编号分别为 $0$ 到 $n - 1$，开始时盒子都为空。第 $i$ 个盒子 $(0 \\leq i \\leq n - 1)$ 至多可以容纳 $c[i]$ 块糖果（容量为 $c[i]$）。\n\nKhong 阿姨花了 $q$ 天时间准备糖果盒。在第 $j$ 天 $(0 \\leq j \\leq q - 1)$，她根据三个整数 $l[j]$、 $r[j]$ 和 $v[j]$ 执行操作，其中 $0 \\leq l[j] \\leq r[j] \\leq n - 1$ 且 $v[j] \\neq 0$。对于每个编号满足 $l[j] \\leq k \\leq r[j]$ 的盒子 $k$：\n\n- 如果 $v[j] > 0$，Khong 阿姨将糖果一块接一块地放入第 $k$ 个盒子，直到她正好放了 $v[j]$ 块糖果或者该盒子已满。也就是说，如果该盒子在这次操作之前已有 $p$ 块糖果，那么在这次操作之后盒子将有 $\\min(c[k], p + v[j])$ 块糖果。\n\n- 如果 $v[j] < 0$，Khong 阿姨将糖果一块接一块地从第 $k$ 个盒子取出，直到她正好从盒子中取出 $-v[j]$ 块糖果或者该盒子已空。也就是说，如果该盒子在这次操作之前已有 $p$ 块糖果，那么在这次操作之后盒子将有 $\\max(0, p + v[j])$ 块糖果。\n\n你的任务是求出 $q$ 天之后每个盒子中糖果的数量。", "inputFormat": "**实现细节**\n\n你要实现以下函数：\n\n```cpp\nstd::vector<int> distribute_candies(\n  \tstd::vector<int> c, std::vector<int> l, \n  \tstd::vector<int> r, std::vector<int> v)\n```\n\n- $c$：一个长度为 $n$ 的数组。 对于 $0 \\leq i \\leq n - 1$, $c[i]$ 表示盒子 $i$ 的容量。\n\n- $l$、 $r$ 和 $v$：三个长度为 $q$ 的数组。 在第 $j$ 天, 对于 $0 \\leq j \\leq q - 1$，Khong 阿姨执行由整数 $l[j]$、$r[j]$ 和 $v[j]$ 决定的操作，如题面所述。", "outputFormat": "- 该函数应该返回一个长度为 $n$ 的数组。用 $s$ 表示这个数组。 对于 $0 \\leq i \\leq n - 1$，$s[i]$ 应为 $q$ 天以后盒子 $i$ 中的糖果数量。", "hint": "**例 1**\n\n考虑如下调⽤：\n`distribute_candies([10, 15, 13], [0, 0], [2, 1], [20, -11])`\n\n这表示盒子 $0$ 的容量为 $10$ 块糖果，盒子 $1$ 的容量为 $15$ 块糖果，盒子 $2$ 的容量为 $13$ 块糖果。\n\n在第 $0$ 天结束时，盒子 $0$ 有 $\\min(c[0], 0 + v[0]) = 10$ 块糖果，盒子 $1$ 有 $\\min(c[1], 0 + v[0]) = 15$ 块糖果，盒子 2 有 $\\min(c[2], 0 + v[0]) = 13$ 块糖果。\n\n在第 $1$ 天结束时，盒子 $0$ 有 $\\max(0, 10 + v[1]) = 0$ 块糖果，盒子 $1$ 有 $\\max(0, 15 + v[1]) = 4$ 块糖果。因为 $2 > r[1]$，盒子 $2$ 中的糖果数量没有变化。每一天结束时糖果的数量总结如下：\n\n| 天 | 盒子 $0$ | 盒子 $1$ | 盒子 $2$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $15$ | $13$ |\n| $1$ | $0$ | $4$ | $13$ |\n\n就此情况，函数应该返回 $[0, 4, 13]$。\n\n**约束条件**\n\n- $1 \\le n \\le 200 000$\n\n- $1 \\le q \\le 200 000$\n- $1 \\le c[i] \\le 10 ^ 9$ （对所有 $0 \\le i \\le n - 1$）\n- $0 \\le l[j] \\le r[j] \\le n - 1$（对所有 $0 \\le j \\le q - 1$）\n\n- $−10 ^ 9 \\le v[j] \\le 10 ^ 9$ , $v[j] ≠ 0$（对所有 $0 \\le j \\le q - 1$）\n\n**子任务**\n\n1. （$3$ 分）$n, q \\leq 2000$\n2. （$8$ 分）$v[j] > 0$（对所有 $0 \\le j \\le q - 1$）\n3. （$27$ 分）$c[0] = c[1] = \\cdots = c[n - 1]$\n4. （$29$ 分）$l[j] = 0$ 和 $r[j] = n - 1$（对所有 $0 \\leq j \\leq q - 1$）\n5. （$33$ 分） 没有额外的约束条件。\n\n**评测程序示例**\n\n评测程序示例读入如下格式的输入：\n\n- 第 $1$ 行: $n$\n- 第 $2$ 行: $c[0] ~ c[1] ~ \\cdots ~ c[n - 1]$\n- 第 $3$ 行: $q$\n- 第 $4 + j$ 行 ( $0 \\leq j \\leq q - 1$): $l[j] ~ r[j] ~ v[j]$\n\n评测程序示例按照以下格式打印你的答案：\n\n第 $1$ 行: $s[0] ~ s[1] ~ \\cdots ~ s[n - 1]$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2021] 分糖果", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。", "description": "Khong 阿姨正在给附近一所学校的学生准备 $n$ 盒糖果。盒子的编号分别为 $0$ 到 $n - 1$，开始时盒子都为空。第 $i$ 个盒子 $(0 \\leq i \\leq n - 1)$ 至多可以容纳 $c[i]$ 块糖果（容量为 $c[i]$）。\n\nKhong 阿姨花了 $q$ 天时间准备糖果盒。在第 $j$ 天 $(0 \\leq j \\leq q - 1)$，她根据三个整数 $l[j]$、 $r[j]$ 和 $v[j]$ 执行操作，其中 $0 \\leq l[j] \\leq r[j] \\leq n - 1$ 且 $v[j] \\neq 0$。对于每个编号满足 $l[j] \\leq k \\leq r[j]$ 的盒子 $k$：\n\n- 如果 $v[j] > 0$，Khong 阿姨将糖果一块接一块地放入第 $k$ 个盒子，直到她正好放了 $v[j]$ 块糖果或者该盒子已满。也就是说，如果该盒子在这次操作之前已有 $p$ 块糖果，那么在这次操作之后盒子将有 $\\min(c[k], p + v[j])$ 块糖果。\n\n- 如果 $v[j] < 0$，Khong 阿姨将糖果一块接一块地从第 $k$ 个盒子取出，直到她正好从盒子中取出 $-v[j]$ 块糖果或者该盒子已空。也就是说，如果该盒子在这次操作之前已有 $p$ 块糖果，那么在这次操作之后盒子将有 $\\max(0, p + v[j])$ 块糖果。\n\n你的任务是求出 $q$ 天之后每个盒子中糖果的数量。", "inputFormat": "**实现细节**\n\n你要实现以下函数：\n\n```cpp\nstd::vector<int> distribute_candies(\n  \tstd::vector<int> c, std::vector<int> l, \n  \tstd::vector<int> r, std::vector<int> v)\n```\n\n- $c$：一个长度为 $n$ 的数组。 对于 $0 \\leq i \\leq n - 1$, $c[i]$ 表示盒子 $i$ 的容量。\n\n- $l$、 $r$ 和 $v$：三个长度为 $q$ 的数组。 在第 $j$ 天, 对于 $0 \\leq j \\leq q - 1$，Khong 阿姨执行由整数 $l[j]$、$r[j]$ 和 $v[j]$ 决定的操作，如题面所述。", "outputFormat": "- 该函数应该返回一个长度为 $n$ 的数组。用 $s$ 表示这个数组。 对于 $0 \\leq i \\leq n - 1$，$s[i]$ 应为 $q$ 天以后盒子 $i$ 中的糖果数量。", "hint": "**例 1**\n\n考虑如下调⽤：\n`distribute_candies([10, 15, 13], [0, 0], [2, 1], [20, -11])`\n\n这表示盒子 $0$ 的容量为 $10$ 块糖果，盒子 $1$ 的容量为 $15$ 块糖果，盒子 $2$ 的容量为 $13$ 块糖果。\n\n在第 $0$ 天结束时，盒子 $0$ 有 $\\min(c[0], 0 + v[0]) = 10$ 块糖果，盒子 $1$ 有 $\\min(c[1], 0 + v[0]) = 15$ 块糖果，盒子 2 有 $\\min(c[2], 0 + v[0]) = 13$ 块糖果。\n\n在第 $1$ 天结束时，盒子 $0$ 有 $\\max(0, 10 + v[1]) = 0$ 块糖果，盒子 $1$ 有 $\\max(0, 15 + v[1]) = 4$ 块糖果。因为 $2 > r[1]$，盒子 $2$ 中的糖果数量没有变化。每一天结束时糖果的数量总结如下：\n\n| 天 | 盒子 $0$ | 盒子 $1$ | 盒子 $2$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $15$ | $13$ |\n| $1$ | $0$ | $4$ | $13$ |\n\n就此情况，函数应该返回 $[0, 4, 13]$。\n\n**约束条件**\n\n- $1 \\le n \\le 200 000$\n\n- $1 \\le q \\le 200 000$\n- $1 \\le c[i] \\le 10 ^ 9$ （对所有 $0 \\le i \\le n - 1$）\n- $0 \\le l[j] \\le r[j] \\le n - 1$（对所有 $0 \\le j \\le q - 1$）\n\n- $−10 ^ 9 \\le v[j] \\le 10 ^ 9$ , $v[j] ≠ 0$（对所有 $0 \\le j \\le q - 1$）\n\n**子任务**\n\n1. （$3$ 分）$n, q \\leq 2000$\n2. （$8$ 分）$v[j] > 0$（对所有 $0 \\le j \\le q - 1$）\n3. （$27$ 分）$c[0] = c[1] = \\cdots = c[n - 1]$\n4. （$29$ 分）$l[j] = 0$ 和 $r[j] = n - 1$（对所有 $0 \\leq j \\leq q - 1$）\n5. （$33$ 分） 没有额外的约束条件。\n\n**评测程序示例**\n\n评测程序示例读入如下格式的输入：\n\n- 第 $1$ 行: $n$\n- 第 $2$ 行: $c[0] ~ c[1] ~ \\cdots ~ c[n - 1]$\n- 第 $3$ 行: $q$\n- 第 $4 + j$ 行 ( $0 \\leq j \\leq q - 1$): $l[j] ~ r[j] ~ v[j]$\n\n评测程序示例按照以下格式打印你的答案：\n\n第 $1$ 行: $s[0] ~ s[1] ~ \\cdots ~ s[n - 1]$", "locale": "zh-CN"}}}
{"pid": "P8519", "type": "P", "difficulty": 7, "samples": [["4 5\n0 1 1 2\n0 1 0\n0 2 0\n1 2 1\n1 3 0\n3 1 2\n", "0 1 1 0\n"], ["7 10\n0 1 1 2 2 1 2\n0 1 0\n0 2 0\n1 2 1\n1 3 0\n2 3 0\n3 4 1\n3 5 2\n4 5 0\n4 6 2\n5 6 1\n", "0 1 1 0 1 0 1\n"], ["3 1\n0 0 0\n0 1 0\n", "0 0 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "IOI", "交互题", "O2优化"], "title": "[IOI 2021] 钥匙", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。", "description": "建筑师 Timothy 设计了一个新的密室逃脱游戏。\n\n这个游戏里有 $n$ 个房间，房间从 $0$ 到 $n - 1$ 编号。最开始的时候，每个房间里都恰好有一把钥匙。每把钥匙都有一个类型，钥匙的类型是一个 $0$ 到 $n - 1$ 区间内的整数。第 $i$ 个房间里的钥匙类型是 $r[i]$。注意多个房间里可能会包含相同类型的钥匙，即$r[i]$ 的值不一定是两两不同的。 \n\n游戏里还有 $m$ 条**双向**的通道，通道从 $0$ 到 $m - 1$ 编号。第 $j$ 条通道连接了一对编号不同的房间 $u[j]$ 和 $v[j]$。同一对房间之间可能存在多条通道。\n\n参与游戏的玩家需要收集钥匙和在不同的房间之间通过通道进行移动。 当玩家使用通道 $j$ 从房间 $u[j]$ 移动到 $v[j]$ ，或者反过来从 $v[j]$ 移动到 $u[j]$ 时，我们说玩家**通过**了通道 $j$。 只有当玩家收集到类型为 $c[j]$ 的钥匙时，玩家才可以通过通道 $j$。 \n\n在游戏的任意时刻，玩家可以在某个房间 $x$ 里执行以下两种操作： \n\n- 收集房间 $x$ 里面的钥匙，钥匙的类型是 $r[x]$（除⾮对应类型的钥匙已经被收集过）。\n- 通过通道 $j$，需要满足 $u[j] = x$ 或 $v[j] = x$，且玩家已经获得 $c[j]$ 类型的钥匙。 \n\n注意玩家收集过的钥匙可以一直使用，**永远不会被丢弃**。 \n\n最初玩家会在某个房间 $s$ **开始**游戏，不带任何钥匙。 如果玩家从房间 $s$ 开始，通过一系列上述描述的两种操作，能够到达房间 $t$，那么称房间 $t$ 是**从房间 $s$ 开始可以到达的**。 \n\n对于每一个房间 $i ~ ( 0 \\le i \\le n − 1)$，定义从房间 $i$ 出发能够到达的房间数为 $p[i]$。Timothy 想要知道满⾜ $p[i]$ 值最小的下标 $i$ 的集合。", "inputFormat": "你要实现以下函数：\n\n```cpp\nstd::vector<int> find_reachable(\n\tstd::vector<int> r, std::vector<int> u, \n\tstd::vector<int> v, std::vector<int> c\n)\n```\n\n- $r$：⼀个⻓度为 $n$ 的序列。对于每⼀个 $i ~ ( 0 \\leq i \\leq n − 1)$，第 $i$ 个房间⾥的钥匙类型是 $r[i]$。\n- $u, v$：两个⻓度为 $m$ 的序列。 对于每⼀个 $j ~ ( 0 \\leq j \\leq m − 1)$，第 $j$ 条通道连接了房间 $u[j]$ 和 $v[j]$。\n- $c$：⼀个⻓度为 $m$ 的序列。对于每⼀个 $j ~ ( 0 \\leq j \\leq m − 1)$，通过通道 $j$ 需要⽤到的钥匙类型是 $c[j]$.\n", "outputFormat": "- 这个函数应该返回⼀个⻓度为 $n$ 的序列 $a$。对于 $0 \\leq i \\leq n − 1$ 中的 $i$，如果满⾜ $p[i] \\leq p[j] ~ (0 \\leq j \\leq n − 1)$ 那么 $a[i]$ 的值为 $1$，否则 $a[i]$ 的值为 $0$。", "hint": "**样例解释**\n\n对于例 $1$，考虑以下调用：\n\n```cpp\nfind_reachable([0, 1, 1, 2],\n[0, 0, 1, 1, 3], [1, 2, 2, 3, 1], [0, 0, 1, 0, 2])\n```\n\n如果玩家从房间 $0$ 开始游戏，可以执⾏以下的操作序列：\n\n| 当前房间 | 操作 |\n| :----------: | :----------: |\n| $0$ | 收集钥匙类型 $0$ |\n| $0$ | 通过通道 $0$ 到房间 $1$ |\n| $1$ | 收集钥匙类型 $1$ |\n| $1$ | 通过通道 $2$ 到房间 $2$ |\n| $2$ | 通过通道 $2$ 到房间 $1$ |\n| $1$ | 通过通道 $3$ 到房间 $3$ |\n\n因此从房间 $0$ 出发可以到达房间 $3$。 类似地，我们可以构造出操作序列表明所有 $4$ 个房间都是从房间 $0$ 出发可达的，所以 $p[0] = 4$。 下表展⽰了从各个房间出发可以到达的房间集合：\n\n| 开始房间 $i$ | 可以到达的房间 | $p[i]$ |\n| :----------: | :------------: | :----: |\n|     $0$      | $[0, 1, 2, 3]$ |  $4$   |\n|     $1$      |    $[1, 2]$    |  $2$   |\n|     $2$      |    $[1, 2]$    |  $2$   |\n|     $3$      |  $[1, 2, 3]$   |  $3$   |\n\n所有房间中 $p[i]$ 的最小值是 $2$，这可以在 $i = 1$ 或 $i = 2$ 处取得。所以这次函数调⽤的返回值是 $[0, 1, 1, 0]$。\n\n对于例 $2$：所有房间中 $p[i]$ 的最小值是 $2$，这可以在 $i \\in \\{1, 2, 4, 6\\}$ 处取得。所以这次函数调⽤的返回值是\n$[0, 1, 1, 0, 1, 0, 1]$。\n\n对于例 $3$：所有房间中 $p[i]$ 的最小值是 $1$，这可以在 $i = 2$ 处取得。所以这次函数调⽤的返回值是 $[0, 0, 1]$。\n\n**约束条件**\n\n- $2 \\leq n \\leq 3 \\times 10 ^ 5$\n- $1 \\leq m \\leq 3 \\times 10 ^ 5$\n- $0 \\leq r[i] \\leq n - 1$ （对于所有的 $0 \\leq i \\leq n - 1$）\n- $0 \\leq u[j], v[j] \\leq n - 1$ 且 $u[j] \\neq v[j]$ （对于所有的 $0 \\leq j \\leq m - 1$）\n- $0 \\leq c[j] \\leq n - 1$（对于所有的 $0 \\leq j \\leq m - 1$）\n\n**子任务**\n\n1. （$9$ 分） $c[j] = 0$（对于所有的 $0 \\leq j \\leq m − 1$）且 $n, m \\leq 200$  \n2. （$11$ 分） $n, m \\leq 20$\n3. （$17$ 分） $n, m \\leq 2000$ \n4. （$30$ 分） $c[j] \\leq 29$（对于所有的 $0 \\leq j \\leq m − 1$）且 $r[i] \\leq 29$（对于所有的 $0 \\leq i \\leq n − 1$） \n5. （$33$ 分）没有额外的约束条件。\n\n**样例评分程序**\n\n评测程序⽰例以如下格式读取输⼊数据：\n\n- 第 $1$ ⾏：$n ~ m$\n- 第 $2$ ⾏： $r[0] ~ r[1] ~ \\cdots ~ r[n − 1]$\n- 第 $3 + j$ ⾏ $( 0 \\leq j \\leq m − 1)$： $u[j] ~ v[j] ~ c[j]$\n\n样例评分程序按照以下格式打印 `find_reachable` 函数的返回值：\n\n第 $1$ ⾏： $s[0] ~ s[1] \\cdots ~ s[n − 1]$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2021] 钥匙", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。", "description": "建筑师 Timothy 设计了一个新的密室逃脱游戏。\n\n这个游戏里有 $n$ 个房间，房间从 $0$ 到 $n - 1$ 编号。最开始的时候，每个房间里都恰好有一把钥匙。每把钥匙都有一个类型，钥匙的类型是一个 $0$ 到 $n - 1$ 区间内的整数。第 $i$ 个房间里的钥匙类型是 $r[i]$。注意多个房间里可能会包含相同类型的钥匙，即$r[i]$ 的值不一定是两两不同的。 \n\n游戏里还有 $m$ 条**双向**的通道，通道从 $0$ 到 $m - 1$ 编号。第 $j$ 条通道连接了一对编号不同的房间 $u[j]$ 和 $v[j]$。同一对房间之间可能存在多条通道。\n\n参与游戏的玩家需要收集钥匙和在不同的房间之间通过通道进行移动。 当玩家使用通道 $j$ 从房间 $u[j]$ 移动到 $v[j]$ ，或者反过来从 $v[j]$ 移动到 $u[j]$ 时，我们说玩家**通过**了通道 $j$。 只有当玩家收集到类型为 $c[j]$ 的钥匙时，玩家才可以通过通道 $j$。 \n\n在游戏的任意时刻，玩家可以在某个房间 $x$ 里执行以下两种操作： \n\n- 收集房间 $x$ 里面的钥匙，钥匙的类型是 $r[x]$（除⾮对应类型的钥匙已经被收集过）。\n- 通过通道 $j$，需要满足 $u[j] = x$ 或 $v[j] = x$，且玩家已经获得 $c[j]$ 类型的钥匙。 \n\n注意玩家收集过的钥匙可以一直使用，**永远不会被丢弃**。 \n\n最初玩家会在某个房间 $s$ **开始**游戏，不带任何钥匙。 如果玩家从房间 $s$ 开始，通过一系列上述描述的两种操作，能够到达房间 $t$，那么称房间 $t$ 是**从房间 $s$ 开始可以到达的**。 \n\n对于每一个房间 $i ~ ( 0 \\le i \\le n − 1)$，定义从房间 $i$ 出发能够到达的房间数为 $p[i]$。Timothy 想要知道满⾜ $p[i]$ 值最小的下标 $i$ 的集合。", "inputFormat": "你要实现以下函数：\n\n```cpp\nstd::vector<int> find_reachable(\n\tstd::vector<int> r, std::vector<int> u, \n\tstd::vector<int> v, std::vector<int> c\n)\n```\n\n- $r$：⼀个⻓度为 $n$ 的序列。对于每⼀个 $i ~ ( 0 \\leq i \\leq n − 1)$，第 $i$ 个房间⾥的钥匙类型是 $r[i]$。\n- $u, v$：两个⻓度为 $m$ 的序列。 对于每⼀个 $j ~ ( 0 \\leq j \\leq m − 1)$，第 $j$ 条通道连接了房间 $u[j]$ 和 $v[j]$。\n- $c$：⼀个⻓度为 $m$ 的序列。对于每⼀个 $j ~ ( 0 \\leq j \\leq m − 1)$，通过通道 $j$ 需要⽤到的钥匙类型是 $c[j]$.\n", "outputFormat": "- 这个函数应该返回⼀个⻓度为 $n$ 的序列 $a$。对于 $0 \\leq i \\leq n − 1$ 中的 $i$，如果满⾜ $p[i] \\leq p[j] ~ (0 \\leq j \\leq n − 1)$ 那么 $a[i]$ 的值为 $1$，否则 $a[i]$ 的值为 $0$。", "hint": "**样例解释**\n\n对于例 $1$，考虑以下调用：\n\n```cpp\nfind_reachable([0, 1, 1, 2],\n[0, 0, 1, 1, 3], [1, 2, 2, 3, 1], [0, 0, 1, 0, 2])\n```\n\n如果玩家从房间 $0$ 开始游戏，可以执⾏以下的操作序列：\n\n| 当前房间 | 操作 |\n| :----------: | :----------: |\n| $0$ | 收集钥匙类型 $0$ |\n| $0$ | 通过通道 $0$ 到房间 $1$ |\n| $1$ | 收集钥匙类型 $1$ |\n| $1$ | 通过通道 $2$ 到房间 $2$ |\n| $2$ | 通过通道 $2$ 到房间 $1$ |\n| $1$ | 通过通道 $3$ 到房间 $3$ |\n\n因此从房间 $0$ 出发可以到达房间 $3$。 类似地，我们可以构造出操作序列表明所有 $4$ 个房间都是从房间 $0$ 出发可达的，所以 $p[0] = 4$。 下表展⽰了从各个房间出发可以到达的房间集合：\n\n| 开始房间 $i$ | 可以到达的房间 | $p[i]$ |\n| :----------: | :------------: | :----: |\n|     $0$      | $[0, 1, 2, 3]$ |  $4$   |\n|     $1$      |    $[1, 2]$    |  $2$   |\n|     $2$      |    $[1, 2]$    |  $2$   |\n|     $3$      |  $[1, 2, 3]$   |  $3$   |\n\n所有房间中 $p[i]$ 的最小值是 $2$，这可以在 $i = 1$ 或 $i = 2$ 处取得。所以这次函数调⽤的返回值是 $[0, 1, 1, 0]$。\n\n对于例 $2$：所有房间中 $p[i]$ 的最小值是 $2$，这可以在 $i \\in \\{1, 2, 4, 6\\}$ 处取得。所以这次函数调⽤的返回值是\n$[0, 1, 1, 0, 1, 0, 1]$。\n\n对于例 $3$：所有房间中 $p[i]$ 的最小值是 $1$，这可以在 $i = 2$ 处取得。所以这次函数调⽤的返回值是 $[0, 0, 1]$。\n\n**约束条件**\n\n- $2 \\leq n \\leq 3 \\times 10 ^ 5$\n- $1 \\leq m \\leq 3 \\times 10 ^ 5$\n- $0 \\leq r[i] \\leq n - 1$ （对于所有的 $0 \\leq i \\leq n - 1$）\n- $0 \\leq u[j], v[j] \\leq n - 1$ 且 $u[j] \\neq v[j]$ （对于所有的 $0 \\leq j \\leq m - 1$）\n- $0 \\leq c[j] \\leq n - 1$（对于所有的 $0 \\leq j \\leq m - 1$）\n\n**子任务**\n\n1. （$9$ 分） $c[j] = 0$（对于所有的 $0 \\leq j \\leq m − 1$）且 $n, m \\leq 200$  \n2. （$11$ 分） $n, m \\leq 20$\n3. （$17$ 分） $n, m \\leq 2000$ \n4. （$30$ 分） $c[j] \\leq 29$（对于所有的 $0 \\leq j \\leq m − 1$）且 $r[i] \\leq 29$（对于所有的 $0 \\leq i \\leq n − 1$） \n5. （$33$ 分）没有额外的约束条件。\n\n**样例评分程序**\n\n评测程序⽰例以如下格式读取输⼊数据：\n\n- 第 $1$ ⾏：$n ~ m$\n- 第 $2$ ⾏： $r[0] ~ r[1] ~ \\cdots ~ r[n − 1]$\n- 第 $3 + j$ ⾏ $( 0 \\leq j \\leq m − 1)$： $u[j] ~ v[j] ~ c[j]$\n\n样例评分程序按照以下格式打印 `find_reachable` 函数的返回值：\n\n第 $1$ ⾏： $s[0] ~ s[1] \\cdots ~ s[n − 1]$", "locale": "zh-CN"}}}
{"pid": "P8520", "type": "P", "difficulty": 7, "samples": [["5\n4 4\n4 6\n6 4\n4 2\n2 4\n", "1\n4\n0 2 5 5\n0 1 3 5\n3 0 5 3\n4 0 3 3\n"], ["2\n2 2\n4 6\n", "0\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "IOI", "交互题", "Special Judge", "O2优化"], "title": "[IOI 2021] 喷泉公园", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。但是你的代码需要声明 `void build(std::vector<int> u, std::vector<int> v, std::vector<int> a, std::vector<int> b)` 函数。\n\n具体的，以下是一种模板：\n```cpp\n#include <vector>\n\nvoid build(std::vector<int> u, std::vector<int> v, std::vector<int> a, std::vector<int> b);\n\nint construct_roads(std::vector<int> x, std::vector<int> y) {\n    // Code here...\n}\n```\n\n由于洛谷技术限制，本题仅包含 IOI 官方数据的部分测试点。", "description": "在附近的一个公园里，有 $n$ 座**喷泉**，编号为从 $0$ 到 $n - 1$。我们把喷泉看成是二维平面上的点。也就是说，喷泉 $i ~ (0 \\leq i \\leq n - 1)$ 是一个点 $(x _ i, y _ i)$，这里 $x _ i$ 和 $y _ i$ 是**偶数**。喷泉的位置各不相同。\n\n建筑师 Timothy 受雇来规划一些**道路**的建设，以及每条道路对应的长椅的摆放。每条道路都是一个长度为 $2$ 的**横向**或**纵向**的线段，其端点是两座不同的喷泉。游客应该能够沿着它们即可在任意两座喷泉之间互相抵达。在最开始时，公园里没有任何道路。\n\n对于每条道路，都要在公园里摆放恰好一个长椅，并将其**分配给**（也就是面朝）这条道路。每个长椅必须摆放在某个点 $(a, ~ b)$ 上，这里 $a$ 和 $b$ 都是**奇数**。所有长椅的位置必须都是**不同的**。在 $(a, ~ b)$ 处的长椅，只能分配给两个端点均为 $(a - 1, ~ b - 1), (a - 1, ~ b + 1), (a + 1, ~ b - 1)$ 和 $(a + 1, ~ b + 1)$ 其中之一的道路。举例来说，在 $(3, ~ 3)$ 处的长椅只能分配给下面四条线段所表示的道路之一：$(2, ~ 2), - (2, ~ 4), ~ (2 , ~ 4) - (4, ~ 4), ~ (4, ~ 4) - (4, ~ 2), ~ (4, ~ 2) - (2, ~ 2)$。\n\n请帮助 Timothy 判断一下，能否在满足上述所有要求的前提下，造出所有道路，并摆放和分配长椅。如果这能做到，请给他一个可行的解决方案。如果有多个满足所有要求的方案，你可以报告其中的任意方案。", "inputFormat": "你要实现以下函数：\n\n```cpp\nint construct_roads(std::vector<int> x, std::vector<int> y)\n```\n- $x, ~ y$: 长度为 $n$ 的两个数组。对所有 $i ~ (0 \\leq i \\leq n - 1)$，喷泉 $i$ 是一个点 $(x[i], y[i]$，这里 $(x[i], y[i])$ 都是偶数。\n- 如果存在某个建设方案，函数应当调用 `build`（参见下文）恰好一次来报告建设方案，并紧接着返回 $1$。\n- 否则，函数应当返回 $0$，并且不做 `build` 的任何调用。\n- 该函数将被调用恰好一次。\n\n你实现的函数可以调用下面的函数，以提供一个可行的道路建设与长椅摆放方案。\n```cpp\nvoid build(std::vector<int> u, std::vector<int> v, std::vector<int> a, std::vector<int> b)\n```\n\n- 设 $m$ 为建设方案中道路的个数。\n- $u, v$: 长度为 $m$ 的两个数组，表示要建设的道路。这些道路的编号为从 $0$ 到 $m - 1$。对所有的 $j ~ (0 \\leq j \\leq m - 1)$，道路 $j$ 要连接喷泉 $u[j]$ 和 $v[j]$。每条道路必须是长度为 $2$ 的横向或纵向线段。任意两条不同的道路，最多只能有一个公共端点（某个喷泉）。这些道路在建成之后，必须能够沿着它们就可以在任意两个喷泉之间相互抵达。\n- $a, b$: 长度为 $m$ 的两个数组，表示长椅。对所有的 $j ~ (0 \\leq j \\leq m - 1)$，将在 $(a[j], b[j])$ 处摆放一个长椅，并且分配给道路 $j$。不同的长椅不能摆放在同一位置。", "outputFormat": "", "hint": "**例 1**\n\n考虑如下调用：\n```cpp\nconstruct_roads([4, 4, 6, 4, 2], [4, 6, 4, 2, 4])\n```\n\n这意味着总共有 $5$ 座喷泉：\n\n- 喷泉 $0$ 坐落在 $(4, 4)$ 处。\n- 喷泉 $1$ 坐落在 $(4, 6)$ 处。\n- 喷泉 $2$ 坐落在 $(6, 4)$ 处。\n- 喷泉 $3$ 坐落在 $(4, 2)$ 处。\n- 喷泉 $4$ 坐落在 $(2, 4)$ 处。\n\n可以建造下面这样 $4$ 条道路，其中每条道路连接两座喷泉，并且摆放着对应的长椅。\n\n| 道路编号 | 道路所连接的喷泉编号 | 所分配的长椅的位置 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0, 2$ | $(5, 5)$ |\n| $1$ | $0, 1$ | $(3, 5)$ |\n| $2$ | $3, 0$ | $(5, 3)$ |\n| $3$ | $4, 0$ | $(3, 3)$ |\n\n该方案对应下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s7vv14bj.png)\n\n为报告此方案，`construct_roads` 应做如下调用：\n\n```cpp\nbuild([0, 0, 3, 4], [2, 1, 0, 0], [5, 3, 5, 3], [5, 5, 3, 3])\n```\n\n随后它应当返回 $1$，\n\n注意，在这个例子中，有多个满足要求的方案，它们都被视为正确。\n\n**例 2**\n\n考虑如下调用：\n\n```cpp\nconstruct_roads([2, 4], [2, 6])\n```\n\n喷泉 $0$ 坐落在 $(2, 2)$ 处，而喷泉 $1$ 坐落在 $(4, 6)$ 处。由于不可能建造出满⾜要求的道路，\n`construct_roads` 应当返回 $0$，并且不做 `build` 的任何调⽤。\n\n**约束条件**\n\n- $1 \\leq n \\leq 2 \\times 10 ^ 5$\n- $2 \\leq x[i], y[i] \\leq 2 \\times 10 ^ 5$\n- $x[i], y[i]$ 都是偶数。\n- 任意两座喷泉的位置都不相同。\n\n**子任务**\n\n1. （$5$ 分）$x[i] = 2$\n2. （$10$ 分）$2 \\leq x[i] \\leq 4$\n3. （$15$ 分）$2 \\leq x[i] \\leq 6$\n4. （$20$ 分）至多只有一种道路建设方案，能够让游客在任意两座喷泉之间沿着这些道路即可抵达。\n5. （$20$ 分）任意四座喷泉都不会构成某一个 $2 \\times 2$ 正方形的四个顶点。\n6. （$30$ 分）没有额外的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2021] 喷泉公园", "background": "### 由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。但是你的代码需要声明 `void build(std::vector<int> u, std::vector<int> v, std::vector<int> a, std::vector<int> b)` 函数。\n\n具体的，以下是一种模板：\n```cpp\n#include <vector>\n\nvoid build(std::vector<int> u, std::vector<int> v, std::vector<int> a, std::vector<int> b);\n\nint construct_roads(std::vector<int> x, std::vector<int> y) {\n    // Code here...\n}\n```\n\n由于洛谷技术限制，本题仅包含 IOI 官方数据的部分测试点。", "description": "在附近的一个公园里，有 $n$ 座**喷泉**，编号为从 $0$ 到 $n - 1$。我们把喷泉看成是二维平面上的点。也就是说，喷泉 $i ~ (0 \\leq i \\leq n - 1)$ 是一个点 $(x _ i, y _ i)$，这里 $x _ i$ 和 $y _ i$ 是**偶数**。喷泉的位置各不相同。\n\n建筑师 Timothy 受雇来规划一些**道路**的建设，以及每条道路对应的长椅的摆放。每条道路都是一个长度为 $2$ 的**横向**或**纵向**的线段，其端点是两座不同的喷泉。游客应该能够沿着它们即可在任意两座喷泉之间互相抵达。在最开始时，公园里没有任何道路。\n\n对于每条道路，都要在公园里摆放恰好一个长椅，并将其**分配给**（也就是面朝）这条道路。每个长椅必须摆放在某个点 $(a, ~ b)$ 上，这里 $a$ 和 $b$ 都是**奇数**。所有长椅的位置必须都是**不同的**。在 $(a, ~ b)$ 处的长椅，只能分配给两个端点均为 $(a - 1, ~ b - 1), (a - 1, ~ b + 1), (a + 1, ~ b - 1)$ 和 $(a + 1, ~ b + 1)$ 其中之一的道路。举例来说，在 $(3, ~ 3)$ 处的长椅只能分配给下面四条线段所表示的道路之一：$(2, ~ 2), - (2, ~ 4), ~ (2 , ~ 4) - (4, ~ 4), ~ (4, ~ 4) - (4, ~ 2), ~ (4, ~ 2) - (2, ~ 2)$。\n\n请帮助 Timothy 判断一下，能否在满足上述所有要求的前提下，造出所有道路，并摆放和分配长椅。如果这能做到，请给他一个可行的解决方案。如果有多个满足所有要求的方案，你可以报告其中的任意方案。", "inputFormat": "你要实现以下函数：\n\n```cpp\nint construct_roads(std::vector<int> x, std::vector<int> y)\n```\n- $x, ~ y$: 长度为 $n$ 的两个数组。对所有 $i ~ (0 \\leq i \\leq n - 1)$，喷泉 $i$ 是一个点 $(x[i], y[i]$，这里 $(x[i], y[i])$ 都是偶数。\n- 如果存在某个建设方案，函数应当调用 `build`（参见下文）恰好一次来报告建设方案，并紧接着返回 $1$。\n- 否则，函数应当返回 $0$，并且不做 `build` 的任何调用。\n- 该函数将被调用恰好一次。\n\n你实现的函数可以调用下面的函数，以提供一个可行的道路建设与长椅摆放方案。\n```cpp\nvoid build(std::vector<int> u, std::vector<int> v, std::vector<int> a, std::vector<int> b)\n```\n\n- 设 $m$ 为建设方案中道路的个数。\n- $u, v$: 长度为 $m$ 的两个数组，表示要建设的道路。这些道路的编号为从 $0$ 到 $m - 1$。对所有的 $j ~ (0 \\leq j \\leq m - 1)$，道路 $j$ 要连接喷泉 $u[j]$ 和 $v[j]$。每条道路必须是长度为 $2$ 的横向或纵向线段。任意两条不同的道路，最多只能有一个公共端点（某个喷泉）。这些道路在建成之后，必须能够沿着它们就可以在任意两个喷泉之间相互抵达。\n- $a, b$: 长度为 $m$ 的两个数组，表示长椅。对所有的 $j ~ (0 \\leq j \\leq m - 1)$，将在 $(a[j], b[j])$ 处摆放一个长椅，并且分配给道路 $j$。不同的长椅不能摆放在同一位置。", "outputFormat": "", "hint": "**例 1**\n\n考虑如下调用：\n```cpp\nconstruct_roads([4, 4, 6, 4, 2], [4, 6, 4, 2, 4])\n```\n\n这意味着总共有 $5$ 座喷泉：\n\n- 喷泉 $0$ 坐落在 $(4, 4)$ 处。\n- 喷泉 $1$ 坐落在 $(4, 6)$ 处。\n- 喷泉 $2$ 坐落在 $(6, 4)$ 处。\n- 喷泉 $3$ 坐落在 $(4, 2)$ 处。\n- 喷泉 $4$ 坐落在 $(2, 4)$ 处。\n\n可以建造下面这样 $4$ 条道路，其中每条道路连接两座喷泉，并且摆放着对应的长椅。\n\n| 道路编号 | 道路所连接的喷泉编号 | 所分配的长椅的位置 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0, 2$ | $(5, 5)$ |\n| $1$ | $0, 1$ | $(3, 5)$ |\n| $2$ | $3, 0$ | $(5, 3)$ |\n| $3$ | $4, 0$ | $(3, 3)$ |\n\n该方案对应下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s7vv14bj.png)\n\n为报告此方案，`construct_roads` 应做如下调用：\n\n```cpp\nbuild([0, 0, 3, 4], [2, 1, 0, 0], [5, 3, 5, 3], [5, 5, 3, 3])\n```\n\n随后它应当返回 $1$，\n\n注意，在这个例子中，有多个满足要求的方案，它们都被视为正确。\n\n**例 2**\n\n考虑如下调用：\n\n```cpp\nconstruct_roads([2, 4], [2, 6])\n```\n\n喷泉 $0$ 坐落在 $(2, 2)$ 处，而喷泉 $1$ 坐落在 $(4, 6)$ 处。由于不可能建造出满⾜要求的道路，\n`construct_roads` 应当返回 $0$，并且不做 `build` 的任何调⽤。\n\n**约束条件**\n\n- $1 \\leq n \\leq 2 \\times 10 ^ 5$\n- $2 \\leq x[i], y[i] \\leq 2 \\times 10 ^ 5$\n- $x[i], y[i]$ 都是偶数。\n- 任意两座喷泉的位置都不相同。\n\n**子任务**\n\n1. （$5$ 分）$x[i] = 2$\n2. （$10$ 分）$2 \\leq x[i] \\leq 4$\n3. （$15$ 分）$2 \\leq x[i] \\leq 6$\n4. （$20$ 分）至多只有一种道路建设方案，能够让游客在任意两座喷泉之间沿着这些道路即可抵达。\n5. （$20$ 分）任意四座喷泉都不会构成某一个 $2 \\times 2$ 正方形的四个顶点。\n6. （$30$ 分）没有额外的约束条件。", "locale": "zh-CN"}}}
{"pid": "P8521", "type": "P", "difficulty": 4, "samples": [["6 3\nATACAT\nACTATA\n1 3\n4 5\n3 5", "2\n1\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000]}, "tags": ["2021", "IOI", "交互题", "前缀和"], "title": "[IOI 2021] 修改 DNA", "background": "**滥用本题评测将被封号**\n\n**由于技术限制，请不要使用 C++ 14 (GCC 9) 语言提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数", "description": "Grace 是一名生物学家，在新加坡的一个生物信息学公司工作。她的一部分工作是分析不同有机体的 DNA 序列。DNA 序列是包含字符 A、T 和 C 的字符串。注意在本题中，DNA 序列不包含字符 G。\n\n定义一次修改是把 DNA 序列中的两个元素交换位置的操作。例如，通过交换加粗的字符 A 和 C，一次修改可以把 A**C**T**A** 转化为 A**A**T**C**。\n\n两个序列的修改距离是把一个序列转化为另一个序列所用的最少修改次数。如果不能通过修改把一个序列转化为另一个序列，那么这两个序列的修改距离为 $-1$。\n\nGrace 正在分析两个 DNA 序列 $a$ 和 $b$，每个都由 n 个元素组成，下标从 $0$ 到 $n - 1$。你的任务是帮助 Grace 回答以下形式的 $q$ 个问题：子串 $a[x \\ldots y]$ 和 $b[x \\ldots y]$ 的修改距离是多少？这里，DNA 序列 $s$ 的子串 $s[x \\ldots y]$ 定义为 $s$ 的下标从 $x$ 到 $y$（包括 x 和 y）的连续字符序列。也就是说，$s[x \\ldots y]$ 是序列 $s[x] s[x + 1] \\ldots s[y]$。", "inputFormat": "你要实现以下函数：\n```cpp\nvoid init(string a, string b)\n  ```\n- $a, b$：长度为 $n$ 的字符串，表示两个待分析的 DNA 序列。\n恰好调用此函数一次，且发生在任何对 `get_distance` 的调用之前。\n```cpp\nint get_distance(int x, int y)\n```\n- $x, y$：待分析的子串的开始和结束下标。\n此函数应返回子串 $a[x \\ldots y]$ 和 $b[x \\ldots y]$ 的修改距离。\n恰好调用此函数 $q$ 次。", "outputFormat": "", "hint": "对于所有数据：\n\n- $1 \\le n, q \\le 100 \\, 000$\n- $0 \\le x \\le y \\le n - 1$\n- $a$ 和 $b$ 的每个字符都是 A、T 和 C 之⼀\n\n子任务|分值|特殊限制\n:-:|:-:|:-:\n$1$\t|$21$|$y - x \\le 2$\n$2$\t|$22$|\t$q \\le 500$，$y - x \\le 1000$，$a$ 和 $b$ 的每个字符是 A 或 T\n$3$\t|$13$|\t$a$ 和 $b$ 的每个字符是 A 或 T\n$4$\t|$28$|\t$q \\le 500$，$y - x \\le 1000$\n$5$\t|$16$|\t没有额外的约束条件\n\n## 样例解释\n\n如果评测程序调用 `get_distance(1, 3)`，那么该调用应返回 $a[1 \\ldots 3]$ 和 $b[1 \\ldots 3]$（也就是序列 TAC 和 CTA）之间的修改距离。通过 $2$ 次修改可以把 TAC 转化为 CTA：TAC $\\to$ CAT，然后是 CAT $\\to$ CTA。无法通过比 $2$ 次更少的修改完成该转化。\n\n因此，该调用应返回 $2$。\n\n如果评测程序调用 `get_distance(4, 5)`，那么该调用应返回序列 AT 和 TA 之间的修改距离。 通过一次修改可以把 AT 转化为 TA，而且显然至少需要一次。\n\n因此，该调用应返回 $1$。\n\n最后，如果评测程序调用 `get_distance(3, 5)`，由于无法通过修改将序列 CAT 转化为 ATA，因此该调用应返回 $-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2021] 修改 DNA", "background": "**滥用本题评测将被封号**\n\n**由于技术限制，请不要使用 C++ 14 (GCC 9) 语言提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数", "description": "Grace 是一名生物学家，在新加坡的一个生物信息学公司工作。她的一部分工作是分析不同有机体的 DNA 序列。DNA 序列是包含字符 A、T 和 C 的字符串。注意在本题中，DNA 序列不包含字符 G。\n\n定义一次修改是把 DNA 序列中的两个元素交换位置的操作。例如，通过交换加粗的字符 A 和 C，一次修改可以把 A**C**T**A** 转化为 A**A**T**C**。\n\n两个序列的修改距离是把一个序列转化为另一个序列所用的最少修改次数。如果不能通过修改把一个序列转化为另一个序列，那么这两个序列的修改距离为 $-1$。\n\nGrace 正在分析两个 DNA 序列 $a$ 和 $b$，每个都由 n 个元素组成，下标从 $0$ 到 $n - 1$。你的任务是帮助 Grace 回答以下形式的 $q$ 个问题：子串 $a[x \\ldots y]$ 和 $b[x \\ldots y]$ 的修改距离是多少？这里，DNA 序列 $s$ 的子串 $s[x \\ldots y]$ 定义为 $s$ 的下标从 $x$ 到 $y$（包括 x 和 y）的连续字符序列。也就是说，$s[x \\ldots y]$ 是序列 $s[x] s[x + 1] \\ldots s[y]$。", "inputFormat": "你要实现以下函数：\n```cpp\nvoid init(string a, string b)\n  ```\n- $a, b$：长度为 $n$ 的字符串，表示两个待分析的 DNA 序列。\n恰好调用此函数一次，且发生在任何对 `get_distance` 的调用之前。\n```cpp\nint get_distance(int x, int y)\n```\n- $x, y$：待分析的子串的开始和结束下标。\n此函数应返回子串 $a[x \\ldots y]$ 和 $b[x \\ldots y]$ 的修改距离。\n恰好调用此函数 $q$ 次。", "outputFormat": "", "hint": "对于所有数据：\n\n- $1 \\le n, q \\le 100 \\, 000$\n- $0 \\le x \\le y \\le n - 1$\n- $a$ 和 $b$ 的每个字符都是 A、T 和 C 之⼀\n\n子任务|分值|特殊限制\n:-:|:-:|:-:\n$1$\t|$21$|$y - x \\le 2$\n$2$\t|$22$|\t$q \\le 500$，$y - x \\le 1000$，$a$ 和 $b$ 的每个字符是 A 或 T\n$3$\t|$13$|\t$a$ 和 $b$ 的每个字符是 A 或 T\n$4$\t|$28$|\t$q \\le 500$，$y - x \\le 1000$\n$5$\t|$16$|\t没有额外的约束条件\n\n## 样例解释\n\n如果评测程序调用 `get_distance(1, 3)`，那么该调用应返回 $a[1 \\ldots 3]$ 和 $b[1 \\ldots 3]$（也就是序列 TAC 和 CTA）之间的修改距离。通过 $2$ 次修改可以把 TAC 转化为 CTA：TAC $\\to$ CAT，然后是 CAT $\\to$ CTA。无法通过比 $2$ 次更少的修改完成该转化。\n\n因此，该调用应返回 $2$。\n\n如果评测程序调用 `get_distance(4, 5)`，那么该调用应返回序列 AT 和 TA 之间的修改距离。 通过一次修改可以把 AT 转化为 TA，而且显然至少需要一次。\n\n因此，该调用应返回 $1$。\n\n最后，如果评测程序调用 `get_distance(3, 5)`，由于无法通过修改将序列 CAT 转化为 ATA，因此该调用应返回 $-1$。", "locale": "zh-CN"}}}
{"pid": "P8522", "type": "P", "difficulty": 7, "samples": [["3 2\n2 6 9\n3 1 2\n2 2 3\n1 0 1\n0 1\n2 3", "24\n25"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000]}, "tags": ["倍增", "2021", "IOI", "交互题"], "title": "[IOI 2021] 地牢游戏", "background": "**滥用本题评测将被封号**\n\n**由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。", "description": "Robert 正在设计一款新的电脑游戏。游戏中有一位英雄、$n$ 个敌人和 $n + 1$ 个地牢。敌人从 $0$ 到 $n - 1$ 编号，地牢从 $0$ 到 $n$ 编号。敌人 $i$（$0 \\le i \\le n - 1$）处在地牢 $i$，其能力值为 $s[i]$。地牢 $n$ 里没有敌人。\n\n英雄一开始进入地牢 $x$，初始能力值为 $z$。每次英雄进入地牢 $i$（$0 \\le i \\le n - 1$）时，都需要面对敌人 $i$，且会发生以下情况中的一种：\n\n如果英雄的能力值大于等于敌人 $i$ 的能力值 $s[i]$，那么英雄会胜出。这使得英雄的能力值增加 $s[i]$（$s[i] \\ge 1$）。这种情况下，下一步英雄将会进入地牢 $w[i]$（$w[i] > i$）。\n\n否则英雄会战败，这使得英雄的能力值增加 $p[i]$（$p[i] \\ge 1$）。在这种情况下，下一步英雄将会进入地牢 $l[i]$。\n\n注意 $p[i]$ 可能会小于、等于、大于 $s[i]$，$l[i]$ 可能会小于、等于、大于 $i$。无论对战结果如何，敌人 $i$ 始终处在地牢 $i$，且能力值为 $s[i]$。\n\n当英雄进入地牢 $n$ 的时候，游戏结束。可以看出无论英雄的起始地牢和初始能力值如何，游戏一定会在有限次对战之后结束。\n\nRobert 希望你通过 $q$ 次模拟来对游戏进行测试。对于每次模拟，Robert 输入英雄的起始地牢 $x$ 和初始能力值 $z$。你需要做的是对于每次模拟给出游戏结束时英雄的能力值。", "inputFormat": "你要实现以下函数：\n```cpp\nvoid init(int n, int[] s, int[] p, int[] w, int[] l)\n```\n- $n$：敌人的数量。\n$s$、$p$、$w$、$l$：长度为 $n$ 的序列。对于每一个 $i$（$0 \\le i \\le n - 1$）：\n  + $s[i]$ 是敌人 $i$ 的能力值，也是击败敌人 $i$ 后英雄增加的能力值。\n  + $p[i]$ 是英雄被敌人 $i$ 击败后增加的能力值。\n  + $w[i]$ 是英雄击败敌人 $i$ 后进入的下一个地牢的编号。\n  + $l[i]$ 是英雄被敌人 $i$ 击败后进入的下一个地牢的编号。\n- 恰好调用此函数一次，且发生在任何对如下的 simulate 函数的调用之前。\n```cpp\nint64 simulate(int x, int z)\n```\n- $x$：英雄的起始地牢编号。\n- $z$：英雄的初始能力值。\n- 假设英雄的起始地牢编号为 $x$，初始能力值为 $z$，函数的返回值是相应情况下游戏结束时英雄的能力值。\n- 恰好调用此函数 $q$ 次。", "outputFormat": "", "hint": "对于所有数据：\n\n- $1 \\le n \\le 400 \\, 000$\n- $1 \\le q \\le 50 \\, 000$\n- $1 \\le s[i], p[i] \\le {10}^7$（对于所有的 $0 \\le i \\le n - 1$）\n- $0 \\le l[i], w[i] \\le n$（对于所有的 $0 \\le i \\le n - 1$）\n- $w[i] > i$（对于所有的 $0 \\le i \\le n - 1$）\n- $0 \\le x \\le n - 1$\n- $1 \\le z \\le {10}^7$\n\n子任务\t|分值|特殊限制\n:-:|:-:|:-:\n$0$|$0$|样例\n$1$|\t$11$|\t$n \\le 50 \\, 000$，$q \\le 100$，$s[i], p[i] \\le 10 \\, 000$（对于所有的 $0 \\le i \\le n - 1$）\n$2$|\t$26$|\t$s[i] = p[i]$（对于所有的 $0 \\le i \\le n - 1$）\n$3$|\t$13$|\t$n \\le 50 \\, 000$，所有的敌人拥有相同的能力值，即 $s[i] = s[j]$，对于所有的 $0 \\le i, j \\le n - 1$\n$4$|\t$12$|\t$n \\le 50 \\, 000$，所有的 $s[i]$ 至多有 $5$ 种不同的数值\n$5$|\t$27$|\t$n \\le 50 \\, 000$\n$6$|\t$11$|\t没有额外的约束条件", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2021] 地牢游戏", "background": "**滥用本题评测将被封号**\n\n**由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。", "description": "Robert 正在设计一款新的电脑游戏。游戏中有一位英雄、$n$ 个敌人和 $n + 1$ 个地牢。敌人从 $0$ 到 $n - 1$ 编号，地牢从 $0$ 到 $n$ 编号。敌人 $i$（$0 \\le i \\le n - 1$）处在地牢 $i$，其能力值为 $s[i]$。地牢 $n$ 里没有敌人。\n\n英雄一开始进入地牢 $x$，初始能力值为 $z$。每次英雄进入地牢 $i$（$0 \\le i \\le n - 1$）时，都需要面对敌人 $i$，且会发生以下情况中的一种：\n\n如果英雄的能力值大于等于敌人 $i$ 的能力值 $s[i]$，那么英雄会胜出。这使得英雄的能力值增加 $s[i]$（$s[i] \\ge 1$）。这种情况下，下一步英雄将会进入地牢 $w[i]$（$w[i] > i$）。\n\n否则英雄会战败，这使得英雄的能力值增加 $p[i]$（$p[i] \\ge 1$）。在这种情况下，下一步英雄将会进入地牢 $l[i]$。\n\n注意 $p[i]$ 可能会小于、等于、大于 $s[i]$，$l[i]$ 可能会小于、等于、大于 $i$。无论对战结果如何，敌人 $i$ 始终处在地牢 $i$，且能力值为 $s[i]$。\n\n当英雄进入地牢 $n$ 的时候，游戏结束。可以看出无论英雄的起始地牢和初始能力值如何，游戏一定会在有限次对战之后结束。\n\nRobert 希望你通过 $q$ 次模拟来对游戏进行测试。对于每次模拟，Robert 输入英雄的起始地牢 $x$ 和初始能力值 $z$。你需要做的是对于每次模拟给出游戏结束时英雄的能力值。", "inputFormat": "你要实现以下函数：\n```cpp\nvoid init(int n, int[] s, int[] p, int[] w, int[] l)\n```\n- $n$：敌人的数量。\n$s$、$p$、$w$、$l$：长度为 $n$ 的序列。对于每一个 $i$（$0 \\le i \\le n - 1$）：\n  + $s[i]$ 是敌人 $i$ 的能力值，也是击败敌人 $i$ 后英雄增加的能力值。\n  + $p[i]$ 是英雄被敌人 $i$ 击败后增加的能力值。\n  + $w[i]$ 是英雄击败敌人 $i$ 后进入的下一个地牢的编号。\n  + $l[i]$ 是英雄被敌人 $i$ 击败后进入的下一个地牢的编号。\n- 恰好调用此函数一次，且发生在任何对如下的 simulate 函数的调用之前。\n```cpp\nint64 simulate(int x, int z)\n```\n- $x$：英雄的起始地牢编号。\n- $z$：英雄的初始能力值。\n- 假设英雄的起始地牢编号为 $x$，初始能力值为 $z$，函数的返回值是相应情况下游戏结束时英雄的能力值。\n- 恰好调用此函数 $q$ 次。", "outputFormat": "", "hint": "对于所有数据：\n\n- $1 \\le n \\le 400 \\, 000$\n- $1 \\le q \\le 50 \\, 000$\n- $1 \\le s[i], p[i] \\le {10}^7$（对于所有的 $0 \\le i \\le n - 1$）\n- $0 \\le l[i], w[i] \\le n$（对于所有的 $0 \\le i \\le n - 1$）\n- $w[i] > i$（对于所有的 $0 \\le i \\le n - 1$）\n- $0 \\le x \\le n - 1$\n- $1 \\le z \\le {10}^7$\n\n子任务\t|分值|特殊限制\n:-:|:-:|:-:\n$0$|$0$|样例\n$1$|\t$11$|\t$n \\le 50 \\, 000$，$q \\le 100$，$s[i], p[i] \\le 10 \\, 000$（对于所有的 $0 \\le i \\le n - 1$）\n$2$|\t$26$|\t$s[i] = p[i]$（对于所有的 $0 \\le i \\le n - 1$）\n$3$|\t$13$|\t$n \\le 50 \\, 000$，所有的敌人拥有相同的能力值，即 $s[i] = s[j]$，对于所有的 $0 \\le i, j \\le n - 1$\n$4$|\t$12$|\t$n \\le 50 \\, 000$，所有的 $s[i]$ 至多有 $5$ 种不同的数值\n$5$|\t$27$|\t$n \\le 50 \\, 000$\n$6$|\t$11$|\t没有额外的约束条件", "locale": "zh-CN"}}}
{"pid": "P8523", "type": "P", "difficulty": 7, "samples": [["0 2 1 1000\n0 0\n0 1\n1 0\n1 1\n-1", "move 1 0\nright 1 1 1\nand 0 0 1\n0\n0\n0\n1"], ["1 2 1 1000\n0 0\n0 1\n1 0\n1 1\n-1\n", "move 1 0\nright 1 1 1\nand 2 0 1\nor 3 0 1\nleft 3 3 1\nor 0 2 3\n0 0\n0 1\n0 1\n1 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "IOI", "交互题", "Special Judge"], "title": "[IOI 2021] 位移寄存器", "background": "**滥用本题评测将被封号**\n\n**由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n你的代码需要在开头添加以下代码：\n\n```cpp\n#include<vector>\nvoid append_move(int t, int y);\nvoid append_store(int t, std::vector<bool> v);\nvoid append_and(int t, int x, int y);\nvoid append_or(int t, int x, int y);\nvoid append_xor(int t, int x, int y);\nvoid append_not(int t, int x);\nvoid append_left(int t, int x, int p);\nvoid append_right(int t, int x, int p);\nvoid append_add(int t, int x, int y);\nvoid append_print(int t);\n```", "description": "工程师 Christopher 在开发一款新的计算机处理器。\n\n这个处理器可以访问 $m$ 个不同的 $b$ 位存储单元（本题中 $m = 100$ 且 $b = 2000$）。它们被称作寄存器，编号从 $0 $ 到 $m - 1$。我们把这些寄存器记为 $r[0], r[1], \\ldots , r[m - 1]$。每个寄存器都是 $b$ 个比特的数组，这些比特从 $0$（最右的比特）到 $b - 1$（最左的比特）编号。对所有的 $i$（$0 \\le i \\le m - 1$）和 $j$（$0 \\le j \\le b - 1$），我们将寄存器 $i$ 的第 $j$ 个比特记为 $r[i][j]$。\n\n对所有的比特序列 $d_0, d_1, \\ldots , d_{l - 1}$（具有某个长度 $l$），该序列的整数值等于 $2^0 \\cdot d_0 + 2^1 \\cdot d_1 + \\cdots + 2^{l - 1} \\cdot d_{l - 1}$。我们说存储在某个寄存器中的整数值就是寄存器中比特序列的整数值，也就是说，该整数值为 $2^0 \\cdot r[i][0] + 2^1 \\cdot r[i][1] + \\cdots + 2^{b - 1} \\cdot r[i][b - 1]$。\n\n该处理器有 $9$ 种类型的指令，可以用来修改寄存器中的比特。每条指令操作一个或多个寄存器，并将其输出存储到其中的一个寄存器。下面我们用 $x := y$ 表示一个修改 $x$ 的值并将其变成 $y$ 的操作。每种类型的指令所做的操作描述如下：\n\n$\\operatorname{\\mathit{move}}(t, y)$：将寄存器 $y$ 中的比特数组拷贝到寄存器 $t$。对所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := r[y][j]$。\n\n$\\operatorname{\\mathit{store}}(t, v)$：设置寄存器 t 等于 $v$，这里 $v$ 是某个 $b$ 个比特的数组。对于所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := v[j]$。\n\n$\\operatorname{\\mathit{and}}(t, x, y)$：取寄存器 $x$ 和 $y$ 的按位与，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $r[x][j]$ 和 $r[y][j]$ 同时为 $1$ 则设置 $r[t][j] := 1$，否则设置 $r[t][j] := 0$。\n\n$\\operatorname{\\mathit{or}}(t, x, y)$：取寄存器 $x$ 和 $y$ 的按位或，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $r[x][j]$ 和 $r[y][j]$ 至少有一个为 1 则设置 $r[t][j] := 1$，否则设置 $r[t][j] := 0$。\n\n$\\operatorname{\\mathit{xor}}(t, x, y)$：取寄存器 $x$ 和 $y$ 的按位异或，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $r[x][j]$ 和 $r[y][j]$ 恰好有一个为 1 则设置 $r[t][j] := 1$，否则设置 $r[t][j] := 0$。\n\n$\\operatorname{\\mathit{not}}(t, x)$：取寄存器 $x$ 的按位非，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := 1 - r[x][j]$。\n\n$\\operatorname{\\mathit{left}}(t, x, p)$：左移寄存器 $x$ 中的所有比特 $p$ 位，并将结果存到寄存器 $t$ 中。将寄存器 $x$ 中的比特左移 $p$ 位的结果，是一个包含 $b$ 个比特的数组 $v$。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $j \\ge p$ 则 $v[j] = r[x][j - p]$，否则 $v[j] = 0$。对所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := v[j]$。\n\n$\\operatorname{\\mathit{right}}(t, x, p)$：右移寄存器 $x$ 中的所有比特 $p$ 位，并将结果存到寄存器 $t$ 中。将寄存器 $x$ 中的比特右移 $p$ 位的结果，是一个包含 $b$ 个比特的数组 $v$。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $j \\le b - 1 - p$ 则 $v[j] = r[x][j + p]$，否则 $v[j] = 0$。对所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := v[j]$。\n\n$\\operatorname{\\mathit{add}}(t, x, y)$：将寄存器 $x$ 和 $y$ 中的整数值加起来，并将结果存到寄存器 $t$ 中。加法是在模 $2^b$ 下做的。正式一些来说，设 $X$ 是操作前存在寄存器 $x$ 中的整数值，而 $Y$ 是操作前存在寄存器 $y$ 中的整数值。设 $T$ 为操作后存在寄存器 $t$ 中的整数值。如果 $X + Y < 2^b$，设置 $t$ 中的比特使得 $T = X + Y$。否则，设置 $t$ 中的比特使得 $T = X + Y - 2^b$。\n\nChristopher 希望你用这个新处理器解决两种任务。任务的类型用整数 $s$ 来表示。对所有类型的任务，你需要创建一个程序，其为上文所定义的指令构成的序列。\n\n程序的输入包括 $n$ 个整数 $a[0], a[1], \\ldots , a[n - 1]$，而每个整数都有 $k$ 个比特，也就是说，$a[i] < 2^k$（$0 \\le i \\le n - 1$）。在程序执行前，输入的所有的数都依次存储在寄存器 $0$ 中，使得对所有的 $i$（$0 \\le i \\le n - 1$），$k$ 比特序列 $r[0][i \\cdot k], r[0][i \\cdot k + 1], \\ldots , r[0][(i + 1) \\cdot k - 1]$ 的整数值等于 $a[i]$。注意 $n \\cdot k \\le b$。寄存器 $0$ 中所有其他的比特（其下标在 $n \\cdot k$ 和 $b - 1$ 之间，包括 $n \\cdot k$ 和 $b - 1$），以及其他所有寄存器中的所有比特，都初始化为 $0$。\n\n执行某个程序就是按序执行其所包含的指令。在最后一条指令执行完毕后，程序的输出将根据寄存器 $0$ 中比特最终的值计算出来。具体来说，输出是 $n$ 个整数 $c[0], c[1], \\ldots , c[n - 1]$ 的序列，这里对所有 $i$（$0 \\le i \\le n - 1$）来说，$c[i]$ 都是寄存器 $0$ 中比特 $i \\cdot k$ 到 $(i + 1) \\cdot k - 1$ 所构成的序列的整数值。注意，在程序运行结束后，寄存器 $0$ 中其余的比特（下标不小于 $n \\cdot k$），以及其他寄存器中的所有比特，可能是任意值。\n\n第一个任务（$s = 0$）是要找出输入整数 $a[0], a[1], \\ldots , a[n - 1]$ 中的最小值。 具体来说，$c[0]$ 必须是 $a[0], a[1], \\ldots , a[n - 1]$ 中的最小值。$c[1], c[2], \\ldots , c[n - 1]$ 的值可以是任意的。\n\n第二个任务（$s = 1$）是要将输入整数 $a[0], a[1], \\ldots , a[n - 1]$ 进行非降序排序。具体来说，对于所有的 $i$（$0 \\le i \\le n - 1$），$c[i]$ 应当等于 $a[0], a[1], \\ldots , a[n - 1]$ 中第 $1 + i$ 小的整数（也就是说，$c[0]$ 是输入整数中的最小整数）。\n\n请帮 Christopher 写一下解决这些任务的程序。每个程序至多只能包含 $q$ 条指令。", "inputFormat": "你要实现如下函数：\n\n```cpp\nvoid construct_instructions(int s, int n, int k, int q)\n ```\n- $s$：任务类型。\n- $n$：输入中的整数的数量。\n- $k$：输入中的每个整数的比特数。\n- $q$：允许的最大的指令数。\n该函数将被恰好调用一次，并应当为所要解决的任务创建一个指令序列。\n\n该函数应当调用以下函数中的一或多个，以创建指令序列：\n\n```cpp\nvoid append_move(int t, int y)\nvoid append_store(int t, std::vector<bool> v)\nvoid append_and(int t, int x, int y)\nvoid append_or(int t, int x, int y)\nvoid append_xor(int t, int x, int y)\nvoid append_not(int t, int x)\nvoid append_left(int t, int x, int p)\nvoid append_right(int t, int x, int p)\nvoid append_add(int t, int x, int y)\n```\n- 每个函数分别往程序追加一条 $\\operatorname{\\mathit{move}}(t, y)$、$\\operatorname{\\mathit{store}}(t, v)$、$\\operatorname{\\mathit{and}}(t, x, y)$、$\\operatorname{\\mathit{or}}(t, x, y)$、$\\operatorname{\\mathit{xor}}(t, x, y)$、$\\operatorname{\\mathit{not}}(t, x)$、$\\operatorname{\\mathit{left}}(t, x, p)$、$\\operatorname{\\mathit{right}}(t, x, p)$ 或 $\\operatorname{\\mathit{add}}(t, x, y)$ 指令。\n- 对于所有相关的指令，$t$、$x$、$y$ 必须至少为 $0$ 且至多为 $m - 1$。\n- 对于所有相关的指令，$t$、$x$、$y$ 不必是两两之间不同的。\n- 对于指令 `left` 和 `right`，$p$ 必须至少为 $0$ 且至多为 b。\n- 对于指令 `store`，$v$ 的长度必须为 $b$。\n\n你还可以调用以下函数，以帮助测试你的答案：\n\n```cpp\nvoid append_print(int t)\n```\n- 在评测你的答案时，对该函数的所有调用都将被忽略。\n- 在评测程序示例中，该函数将往程序追加一个 $\\operatorname{\\mathit{print}}(t)$ 操作。\n- 当评测程序示例在执行某个程序过程中遇到一个 $\\operatorname{\\mathit{print}}(t)$ 操作时，它会打印出由寄存器 $t$ 中前 $n \\cdot k$ 比特构成的 $n$ 个 $k$-比特整数。\n- $t$ 必须满足 $0 \\le t \\le m - 1$。\n- 对该函数的任何调用，都不会算到你所创建的指令的数量里面。\n\n在追加最后一条指令之后，`construct_instructions` 应当返回。随后你创建的程序将在一定数量的测试用例上评测，其中每个测试用例给出的输入数据为 $n$ 个 $k$-比特整数 $a[0], a[1], \\ldots , a[n - 1]$。如果程序对给定输入数据的输出结果 $c[0], c[1], \\ldots , c[n - 1]$ 满足如下条件，你的答案就将被视为通过了对应的样例：\n\n- 如果 $s = 0$，$c[0]$ 应当为 $a[0], a[1], \\ldots , a[n - 1]$ 中的最小值。\n- 如果 $s = 1$，对所有 $i$（$0 \\le i \\le n - 1$）来说，$c[i]$ 应当是 $a[0], a[1], \\ldots , a[n - 1]$ 中第 $1 + i$ 小的整数。\n\n在评测你的答案时，可能会给出下面的错误信息之一：\n\n- `Invalid index`：在调用某些函数时的参数 $t$、$x$ 或 $y$ 所给出的寄存器下标是不正确的（可能是负数）。\n- `Value to store is not b bits long`：提供给 `append_store` 的 $v$ 的长度不等于 $b$。\n- `Invalid shift value`：提供给 `append_left` 或 `append_right` 的 $p$ 的值不在 $0$ 和 $b$ 之间（包括 $0$ 和 $b$）。\n- `Too many instructions`：你的函数试图追加超过 $q$ 条指令。", "outputFormat": "", "hint": "对于所有数据：\n\n- $m = 100$\n- $b = 2000$\n- $0 \\le s \\le 1$\n- $2 \\le n \\le 100$\n- $1 \\le k \\le 10$\n- $q \\le 4000$\n- $0 \\le a[i] \\le 2^k - 1$（对于所有 $0 \\le i \\le n - 1$）\n\n子任务|\t分值|\t特殊限制\n:-:|:-:|:-:\n$1$\t|$10$|\t$s = 0$，$n = 2$，$k \\le 2$，$q = 1000$\n$2$|\t$11$|\t$s = 0$，$n = 2$，$k \\le 2$，$q = 20$\n$3$\t|$12$\t|$s = 0$，$q = 4000$\n$4$\t|$25$|\t$s = 0$，$q = 150$\n$5$\t|$13$\t|$s = 1$，$n \\le 10$，$q = 4000$\n$6$\t|$29$|\t$s = 1$，$q=4000$\n\n感谢 @[Bingxiu](https://www.luogu.com.cn/user/676498) 提供交互库。附件中的交互库可用于本地测试，与实际评测用的交互库有所不同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2021] 位移寄存器", "background": "**滥用本题评测将被封号**\n\n**由于技术限制，请不要使用 C++ 14 (GCC 9) 提交本题。**\n\n这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n你的代码需要在开头添加以下代码：\n\n```cpp\n#include<vector>\nvoid append_move(int t, int y);\nvoid append_store(int t, std::vector<bool> v);\nvoid append_and(int t, int x, int y);\nvoid append_or(int t, int x, int y);\nvoid append_xor(int t, int x, int y);\nvoid append_not(int t, int x);\nvoid append_left(int t, int x, int p);\nvoid append_right(int t, int x, int p);\nvoid append_add(int t, int x, int y);\nvoid append_print(int t);\n```", "description": "工程师 Christopher 在开发一款新的计算机处理器。\n\n这个处理器可以访问 $m$ 个不同的 $b$ 位存储单元（本题中 $m = 100$ 且 $b = 2000$）。它们被称作寄存器，编号从 $0 $ 到 $m - 1$。我们把这些寄存器记为 $r[0], r[1], \\ldots , r[m - 1]$。每个寄存器都是 $b$ 个比特的数组，这些比特从 $0$（最右的比特）到 $b - 1$（最左的比特）编号。对所有的 $i$（$0 \\le i \\le m - 1$）和 $j$（$0 \\le j \\le b - 1$），我们将寄存器 $i$ 的第 $j$ 个比特记为 $r[i][j]$。\n\n对所有的比特序列 $d_0, d_1, \\ldots , d_{l - 1}$（具有某个长度 $l$），该序列的整数值等于 $2^0 \\cdot d_0 + 2^1 \\cdot d_1 + \\cdots + 2^{l - 1} \\cdot d_{l - 1}$。我们说存储在某个寄存器中的整数值就是寄存器中比特序列的整数值，也就是说，该整数值为 $2^0 \\cdot r[i][0] + 2^1 \\cdot r[i][1] + \\cdots + 2^{b - 1} \\cdot r[i][b - 1]$。\n\n该处理器有 $9$ 种类型的指令，可以用来修改寄存器中的比特。每条指令操作一个或多个寄存器，并将其输出存储到其中的一个寄存器。下面我们用 $x := y$ 表示一个修改 $x$ 的值并将其变成 $y$ 的操作。每种类型的指令所做的操作描述如下：\n\n$\\operatorname{\\mathit{move}}(t, y)$：将寄存器 $y$ 中的比特数组拷贝到寄存器 $t$。对所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := r[y][j]$。\n\n$\\operatorname{\\mathit{store}}(t, v)$：设置寄存器 t 等于 $v$，这里 $v$ 是某个 $b$ 个比特的数组。对于所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := v[j]$。\n\n$\\operatorname{\\mathit{and}}(t, x, y)$：取寄存器 $x$ 和 $y$ 的按位与，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $r[x][j]$ 和 $r[y][j]$ 同时为 $1$ 则设置 $r[t][j] := 1$，否则设置 $r[t][j] := 0$。\n\n$\\operatorname{\\mathit{or}}(t, x, y)$：取寄存器 $x$ 和 $y$ 的按位或，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $r[x][j]$ 和 $r[y][j]$ 至少有一个为 1 则设置 $r[t][j] := 1$，否则设置 $r[t][j] := 0$。\n\n$\\operatorname{\\mathit{xor}}(t, x, y)$：取寄存器 $x$ 和 $y$ 的按位异或，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $r[x][j]$ 和 $r[y][j]$ 恰好有一个为 1 则设置 $r[t][j] := 1$，否则设置 $r[t][j] := 0$。\n\n$\\operatorname{\\mathit{not}}(t, x)$：取寄存器 $x$ 的按位非，并将结果存到寄存器 $t$ 中。对于所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := 1 - r[x][j]$。\n\n$\\operatorname{\\mathit{left}}(t, x, p)$：左移寄存器 $x$ 中的所有比特 $p$ 位，并将结果存到寄存器 $t$ 中。将寄存器 $x$ 中的比特左移 $p$ 位的结果，是一个包含 $b$ 个比特的数组 $v$。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $j \\ge p$ 则 $v[j] = r[x][j - p]$，否则 $v[j] = 0$。对所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := v[j]$。\n\n$\\operatorname{\\mathit{right}}(t, x, p)$：右移寄存器 $x$ 中的所有比特 $p$ 位，并将结果存到寄存器 $t$ 中。将寄存器 $x$ 中的比特右移 $p$ 位的结果，是一个包含 $b$ 个比特的数组 $v$。对于所有的 $j$（$0 \\le j \\le b - 1$），如果 $j \\le b - 1 - p$ 则 $v[j] = r[x][j + p]$，否则 $v[j] = 0$。对所有的 $j$（$0 \\le j \\le b - 1$），设置 $r[t][j] := v[j]$。\n\n$\\operatorname{\\mathit{add}}(t, x, y)$：将寄存器 $x$ 和 $y$ 中的整数值加起来，并将结果存到寄存器 $t$ 中。加法是在模 $2^b$ 下做的。正式一些来说，设 $X$ 是操作前存在寄存器 $x$ 中的整数值，而 $Y$ 是操作前存在寄存器 $y$ 中的整数值。设 $T$ 为操作后存在寄存器 $t$ 中的整数值。如果 $X + Y < 2^b$，设置 $t$ 中的比特使得 $T = X + Y$。否则，设置 $t$ 中的比特使得 $T = X + Y - 2^b$。\n\nChristopher 希望你用这个新处理器解决两种任务。任务的类型用整数 $s$ 来表示。对所有类型的任务，你需要创建一个程序，其为上文所定义的指令构成的序列。\n\n程序的输入包括 $n$ 个整数 $a[0], a[1], \\ldots , a[n - 1]$，而每个整数都有 $k$ 个比特，也就是说，$a[i] < 2^k$（$0 \\le i \\le n - 1$）。在程序执行前，输入的所有的数都依次存储在寄存器 $0$ 中，使得对所有的 $i$（$0 \\le i \\le n - 1$），$k$ 比特序列 $r[0][i \\cdot k], r[0][i \\cdot k + 1], \\ldots , r[0][(i + 1) \\cdot k - 1]$ 的整数值等于 $a[i]$。注意 $n \\cdot k \\le b$。寄存器 $0$ 中所有其他的比特（其下标在 $n \\cdot k$ 和 $b - 1$ 之间，包括 $n \\cdot k$ 和 $b - 1$），以及其他所有寄存器中的所有比特，都初始化为 $0$。\n\n执行某个程序就是按序执行其所包含的指令。在最后一条指令执行完毕后，程序的输出将根据寄存器 $0$ 中比特最终的值计算出来。具体来说，输出是 $n$ 个整数 $c[0], c[1], \\ldots , c[n - 1]$ 的序列，这里对所有 $i$（$0 \\le i \\le n - 1$）来说，$c[i]$ 都是寄存器 $0$ 中比特 $i \\cdot k$ 到 $(i + 1) \\cdot k - 1$ 所构成的序列的整数值。注意，在程序运行结束后，寄存器 $0$ 中其余的比特（下标不小于 $n \\cdot k$），以及其他寄存器中的所有比特，可能是任意值。\n\n第一个任务（$s = 0$）是要找出输入整数 $a[0], a[1], \\ldots , a[n - 1]$ 中的最小值。 具体来说，$c[0]$ 必须是 $a[0], a[1], \\ldots , a[n - 1]$ 中的最小值。$c[1], c[2], \\ldots , c[n - 1]$ 的值可以是任意的。\n\n第二个任务（$s = 1$）是要将输入整数 $a[0], a[1], \\ldots , a[n - 1]$ 进行非降序排序。具体来说，对于所有的 $i$（$0 \\le i \\le n - 1$），$c[i]$ 应当等于 $a[0], a[1], \\ldots , a[n - 1]$ 中第 $1 + i$ 小的整数（也就是说，$c[0]$ 是输入整数中的最小整数）。\n\n请帮 Christopher 写一下解决这些任务的程序。每个程序至多只能包含 $q$ 条指令。", "inputFormat": "你要实现如下函数：\n\n```cpp\nvoid construct_instructions(int s, int n, int k, int q)\n ```\n- $s$：任务类型。\n- $n$：输入中的整数的数量。\n- $k$：输入中的每个整数的比特数。\n- $q$：允许的最大的指令数。\n该函数将被恰好调用一次，并应当为所要解决的任务创建一个指令序列。\n\n该函数应当调用以下函数中的一或多个，以创建指令序列：\n\n```cpp\nvoid append_move(int t, int y)\nvoid append_store(int t, std::vector<bool> v)\nvoid append_and(int t, int x, int y)\nvoid append_or(int t, int x, int y)\nvoid append_xor(int t, int x, int y)\nvoid append_not(int t, int x)\nvoid append_left(int t, int x, int p)\nvoid append_right(int t, int x, int p)\nvoid append_add(int t, int x, int y)\n```\n- 每个函数分别往程序追加一条 $\\operatorname{\\mathit{move}}(t, y)$、$\\operatorname{\\mathit{store}}(t, v)$、$\\operatorname{\\mathit{and}}(t, x, y)$、$\\operatorname{\\mathit{or}}(t, x, y)$、$\\operatorname{\\mathit{xor}}(t, x, y)$、$\\operatorname{\\mathit{not}}(t, x)$、$\\operatorname{\\mathit{left}}(t, x, p)$、$\\operatorname{\\mathit{right}}(t, x, p)$ 或 $\\operatorname{\\mathit{add}}(t, x, y)$ 指令。\n- 对于所有相关的指令，$t$、$x$、$y$ 必须至少为 $0$ 且至多为 $m - 1$。\n- 对于所有相关的指令，$t$、$x$、$y$ 不必是两两之间不同的。\n- 对于指令 `left` 和 `right`，$p$ 必须至少为 $0$ 且至多为 b。\n- 对于指令 `store`，$v$ 的长度必须为 $b$。\n\n你还可以调用以下函数，以帮助测试你的答案：\n\n```cpp\nvoid append_print(int t)\n```\n- 在评测你的答案时，对该函数的所有调用都将被忽略。\n- 在评测程序示例中，该函数将往程序追加一个 $\\operatorname{\\mathit{print}}(t)$ 操作。\n- 当评测程序示例在执行某个程序过程中遇到一个 $\\operatorname{\\mathit{print}}(t)$ 操作时，它会打印出由寄存器 $t$ 中前 $n \\cdot k$ 比特构成的 $n$ 个 $k$-比特整数。\n- $t$ 必须满足 $0 \\le t \\le m - 1$。\n- 对该函数的任何调用，都不会算到你所创建的指令的数量里面。\n\n在追加最后一条指令之后，`construct_instructions` 应当返回。随后你创建的程序将在一定数量的测试用例上评测，其中每个测试用例给出的输入数据为 $n$ 个 $k$-比特整数 $a[0], a[1], \\ldots , a[n - 1]$。如果程序对给定输入数据的输出结果 $c[0], c[1], \\ldots , c[n - 1]$ 满足如下条件，你的答案就将被视为通过了对应的样例：\n\n- 如果 $s = 0$，$c[0]$ 应当为 $a[0], a[1], \\ldots , a[n - 1]$ 中的最小值。\n- 如果 $s = 1$，对所有 $i$（$0 \\le i \\le n - 1$）来说，$c[i]$ 应当是 $a[0], a[1], \\ldots , a[n - 1]$ 中第 $1 + i$ 小的整数。\n\n在评测你的答案时，可能会给出下面的错误信息之一：\n\n- `Invalid index`：在调用某些函数时的参数 $t$、$x$ 或 $y$ 所给出的寄存器下标是不正确的（可能是负数）。\n- `Value to store is not b bits long`：提供给 `append_store` 的 $v$ 的长度不等于 $b$。\n- `Invalid shift value`：提供给 `append_left` 或 `append_right` 的 $p$ 的值不在 $0$ 和 $b$ 之间（包括 $0$ 和 $b$）。\n- `Too many instructions`：你的函数试图追加超过 $q$ 条指令。", "outputFormat": "", "hint": "对于所有数据：\n\n- $m = 100$\n- $b = 2000$\n- $0 \\le s \\le 1$\n- $2 \\le n \\le 100$\n- $1 \\le k \\le 10$\n- $q \\le 4000$\n- $0 \\le a[i] \\le 2^k - 1$（对于所有 $0 \\le i \\le n - 1$）\n\n子任务|\t分值|\t特殊限制\n:-:|:-:|:-:\n$1$\t|$10$|\t$s = 0$，$n = 2$，$k \\le 2$，$q = 1000$\n$2$|\t$11$|\t$s = 0$，$n = 2$，$k \\le 2$，$q = 20$\n$3$\t|$12$\t|$s = 0$，$q = 4000$\n$4$\t|$25$|\t$s = 0$，$q = 150$\n$5$\t|$13$\t|$s = 1$，$n \\le 10$，$q = 4000$\n$6$\t|$29$|\t$s = 1$，$q=4000$\n\n感谢 @[Bingxiu](https://www.luogu.com.cn/user/676498) 提供交互库。附件中的交互库可用于本地测试，与实际评测用的交互库有所不同。", "locale": "zh-CN"}}}
{"pid": "P8524", "type": "P", "difficulty": 6, "samples": [["10\n1 81 93 81 16 97 63 26 66 13\n10\n1 1 5 3\n3 5 6\n3 9 9\n3 1 3\n3 1 7\n2 1 3\n3 3 9\n1 5 6 6\n3 1 4\n3 3 9", "174\n66\n83\n354\n363\n121\n440"], ["10\n61 53 17 97 81 17 1 91 38 93\n10\n2 3 6\n2 1 8\n3 1 5\n3 1 1\n3 1 7\n3 3 5\n3 1 4\n2 2 10\n2 1 5\n3 5 5", "104\n30\n108\n48\n84\n5"]], "limits": {"time": [60000, 60000, 60000, 60000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["O2优化", "Ynoi", "2078"], "title": "[Ynoi2078] 《A theory of consciousness from a theoretical computer scienceperspective: Insights from the Conscious Turing Machine》阅读报告（更新中...）", "background": "## 警告：滥用本题将被封号。", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$，需要进行 $m$ 次操作，操作共有三种类型：\n\n操作 1：给定 $l,r,x$，先新建一个数组 $b$ 满足 $b_i=a_i$，之后将 $a_x,\\dots,a_{x+r-l}$ 同时修改为 $b_l,\\dots,b_r$；\n\n操作 2：给定 $l,r$，将 $a_l,\\dots,a_r$ 同时修改为除以 $2$ 下取整后的值；\n\n操作 3：给定 $l,r$，求 $a_l,\\dots,a_r$ 的和。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个整数表示序列 $a_1,\\dots,a_n$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行表示一个操作：\n\n`1 l r x` 表示操作 1；\n\n`2 l r` 表示操作 2；\n\n`3 l r` 表示操作 3。", "outputFormat": "对每个操作 3，输出一行，包含一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，满足 $1\\le n\\le 3\\cdot 10^6$，$1\\le m\\le 3\\cdot 10^6$。\n\n序列的初值满足 $1\\le a_i\\le 10^9。$\n\n对每个操作满足 $1\\le l\\le r\\le n$。\n\n对每个操作 1 满足 $1\\le x\\le x+r-l+1\\le n$。\n\n以上所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2078] 《A theory of consciousness from a theoretical computer scienceperspective: Insights from the Conscious Turing Machine》阅读报告（更新中...）", "background": "## 警告：滥用本题将被封号。", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$，需要进行 $m$ 次操作，操作共有三种类型：\n\n操作 1：给定 $l,r,x$，先新建一个数组 $b$ 满足 $b_i=a_i$，之后将 $a_x,\\dots,a_{x+r-l}$ 同时修改为 $b_l,\\dots,b_r$；\n\n操作 2：给定 $l,r$，将 $a_l,\\dots,a_r$ 同时修改为除以 $2$ 下取整后的值；\n\n操作 3：给定 $l,r$，求 $a_l,\\dots,a_r$ 的和。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个整数表示序列 $a_1,\\dots,a_n$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行表示一个操作：\n\n`1 l r x` 表示操作 1；\n\n`2 l r` 表示操作 2；\n\n`3 l r` 表示操作 3。", "outputFormat": "对每个操作 3，输出一行，包含一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，满足 $1\\le n\\le 3\\cdot 10^6$，$1\\le m\\le 3\\cdot 10^6$。\n\n序列的初值满足 $1\\le a_i\\le 10^9。$\n\n对每个操作满足 $1\\le l\\le r\\le n$。\n\n对每个操作 1 满足 $1\\le x\\le x+r-l+1\\le n$。\n\n以上所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P8525", "type": "P", "difficulty": 7, "samples": [["10 6\n3 5 93 89 1 1 3 39\n3804 3800 3800 3791 3804 3807 3803 3720\n83 93 90 121 87 86 81 110\n298 291 302 383 298 296 303 266\n15768 15760 15818 15836 15768 15773 15773 15822\n204761 204753 204692 204781 204765 204765 204762 204678", "3805\n85\n299\n15769\n204763\n93"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "Ynoi", "2078"], "title": "[Ynoi2078] 《A Path Towards Autonomous Machine Intelligence》阅读报告（更新中...）", "background": "", "description": "你需要支持 $m$ 次操作，第 $i$ 次操作给出 $L_i,R_i,a_i,b_i,l_i,r_i,X_i,x_i$,\n\n相应的答案定义为：\n\n$(\\texttt{ans}_{i,0},\\texttt{ans}_{i,1}):=F_{i,r_i}(F_{i,r_i-1}(\\dots F_{i,l_i}(x_i,0)\\dots))$，\n\n其中\n\n若 $L_j\\le X_i\\le R_j$ 则 $F_{i,j}(x,y)=((a_jx+b_j)\\bmod 2677114440,\\max(b_j,y))$，\n\n其余情况 $F_{i,j}(x,y)=(x,y)$。\n\n你需要输出 $\\texttt{ans}_{i,0}$ 与 $\\texttt{ans}_{i,1}$ 的异或和。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，第 $i$ 行为 $L_i,R_i,a_i,b_i,l_i,r_i,X_i,x_i$ 表示第 $i$ 次操作。\n\n本题强制在线，对 $2\\le i\\le m$，第 $i$ 次操作的输入的每个数需要与第 $i-1$次操作的答案异或。", "outputFormat": "共 $m$ 行，每行一个整数，表示每个操作的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n样例解释：\n\n在强制在线加密前，样例输入为：\n\n```\n10 6\n3 5 93 89 1 1 3 39\n1 5 5 18 1 2 6 85\n6 8 15 44 2 3 4 59\n1 8 5 84 1 3 4 33\n1 9 83 69 1 4 4 87\n2 10 79 54 6 6 1 93\n```\n\n### \n\n对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 3\\times 10^5$\n\n对于 $1\\le i\\le m$：\n\n$1\\le L_i\\le R_i\\le n$\n\n$1\\le a_i\\le 10^6$\n\n$1\\le b_i\\le 10^6$\n\n$1\\le l_i\\le r_i\\le i$\n\n$1\\le X_i\\le n$\n\n$1\\le x_i\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2078] 《A Path Towards Autonomous Machine Intelligence》阅读报告（更新中...）", "background": "", "description": "你需要支持 $m$ 次操作，第 $i$ 次操作给出 $L_i,R_i,a_i,b_i,l_i,r_i,X_i,x_i$,\n\n相应的答案定义为：\n\n$(\\texttt{ans}_{i,0},\\texttt{ans}_{i,1}):=F_{i,r_i}(F_{i,r_i-1}(\\dots F_{i,l_i}(x_i,0)\\dots))$，\n\n其中\n\n若 $L_j\\le X_i\\le R_j$ 则 $F_{i,j}(x,y)=((a_jx+b_j)\\bmod 2677114440,\\max(b_j,y))$，\n\n其余情况 $F_{i,j}(x,y)=(x,y)$。\n\n你需要输出 $\\texttt{ans}_{i,0}$ 与 $\\texttt{ans}_{i,1}$ 的异或和。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，第 $i$ 行为 $L_i,R_i,a_i,b_i,l_i,r_i,X_i,x_i$ 表示第 $i$ 次操作。\n\n本题强制在线，对 $2\\le i\\le m$，第 $i$ 次操作的输入的每个数需要与第 $i-1$次操作的答案异或。", "outputFormat": "共 $m$ 行，每行一个整数，表示每个操作的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n样例解释：\n\n在强制在线加密前，样例输入为：\n\n```\n10 6\n3 5 93 89 1 1 3 39\n1 5 5 18 1 2 6 85\n6 8 15 44 2 3 4 59\n1 8 5 84 1 3 4 33\n1 9 83 69 1 4 4 87\n2 10 79 54 6 6 1 93\n```\n\n### \n\n对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 3\\times 10^5$\n\n对于 $1\\le i\\le m$：\n\n$1\\le L_i\\le R_i\\le n$\n\n$1\\le a_i\\le 10^6$\n\n$1\\le b_i\\le 10^6$\n\n$1\\le l_i\\le r_i\\le i$\n\n$1\\le X_i\\le n$\n\n$1\\le x_i\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8526", "type": "P", "difficulty": 7, "samples": [["5 2\n1 1 1 2 4\n1 5\n3 5\n", "3\n2"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "Ynoi", "2078"], "title": "[Ynoi2078] 《How to represent part-whole hierarchies in a neural network》阅读报告（更新中...）", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次询问，每次询问给出 $l,r$，查询所有满足 $l\\le L\\le R\\le r$ 的 $(L,R)$ 的权值的按位异或和，二元组 $(L,R)$ 的权值是 $|\\{a_i\\mid L\\le i\\le R\\}|$。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来一行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行两个整数 $l\\ r$ 表示一次查询。", "outputFormat": "输出 $m$ 行，依次表示每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $5\\%$ 的数据，满足 $1\\le n,m\\le 100$。\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 5000$。\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $30\\%$ 的数据，满足 $1\\le n,m\\le 2\\times 10^5$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n,m\\le 3\\times 10^5$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 3.5\\times 10^5$。\n\n对于另外 $10\\%$ 的数据，满足 $m=n^2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 4\\times 10^5$，$1\\le a_i\\le n$，所有数值为整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2078] 《How to represent part-whole hierarchies in a neural network》阅读报告（更新中...）", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次询问，每次询问给出 $l,r$，查询所有满足 $l\\le L\\le R\\le r$ 的 $(L,R)$ 的权值的按位异或和，二元组 $(L,R)$ 的权值是 $|\\{a_i\\mid L\\le i\\le R\\}|$。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来一行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行两个整数 $l\\ r$ 表示一次查询。", "outputFormat": "输出 $m$ 行，依次表示每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $5\\%$ 的数据，满足 $1\\le n,m\\le 100$。\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 5000$。\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $30\\%$ 的数据，满足 $1\\le n,m\\le 2\\times 10^5$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n,m\\le 3\\times 10^5$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 3.5\\times 10^5$。\n\n对于另外 $10\\%$ 的数据，满足 $m=n^2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 4\\times 10^5$，$1\\le a_i\\le n$，所有数值为整数。\n", "locale": "zh-CN"}}}
{"pid": "P8527", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n1\n1 2 2", "0\n1\n2"]], "limits": {"time": [2000, 2000], "memory": [524288, 524288]}, "tags": ["2003", "O2优化", "Ynoi"], "title": "[Ynoi2003] 樋口円香", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/n2xd23kw.png)", "description": "给定两个序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，一开始 $b_i=0$；\n\n你需要进行 $m$ 次操作：\n\n每次操作，给出 $l,r,L$，需要对于$k\\in[l,r]$，将 $b_{L+k-l}$ 增加 $a_k$；\n\n最后输出经过所有操作后的序列 $b_1,\\dots,b_n$。\n\n", "inputFormat": "第一行一个整数 $n$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行一个整数 $m$；\n\n之后 $m$ 行每行三个整数 $l\\;r\\;L$，表示一个询问。", "outputFormat": "输出 $n$ 行，表示操作后的 $b_1,\\dots,b_n$。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n\n对于 $100\\%$ 的数据满足 $0\\le a_i\\le 1000$；$1\\le n\\le 10^5$；$1\\le m\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2003] 樋口円香", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/n2xd23kw.png)", "description": "给定两个序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，一开始 $b_i=0$；\n\n你需要进行 $m$ 次操作：\n\n每次操作，给出 $l,r,L$，需要对于$k\\in[l,r]$，将 $b_{L+k-l}$ 增加 $a_k$；\n\n最后输出经过所有操作后的序列 $b_1,\\dots,b_n$。\n\n", "inputFormat": "第一行一个整数 $n$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行一个整数 $m$；\n\n之后 $m$ 行每行三个整数 $l\\;r\\;L$，表示一个询问。", "outputFormat": "输出 $n$ 行，表示操作后的 $b_1,\\dots,b_n$。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n\n对于 $100\\%$ 的数据满足 $0\\le a_i\\le 1000$；$1\\le n\\le 10^5$；$1\\le m\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8528", "type": "P", "difficulty": 7, "samples": [["5 5\n2 5 1 3 4\n1\n2\n3\n4\n1 1\n1 4\n3 3\n2 2\n1 1", "1\n10\n1\n1\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2003", "O2优化", "Ynoi"], "title": "[Ynoi2003] 铃原露露", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/px0y070c.png)", "description": "给定一棵有根树，顶点编号为 $1,2,\\dots,n$，对 $2\\le i\\le n$ 有 $f_{i}$ 为 $i$ 的父亲。$a_1,\\dots,a_n$ 是 $1,\\dots,n$ 的排列。\n\n共 $m$ 次询问，每次询问给出 $l,r$，询问有多少个二元组 $L,R$，满足 $l\\le L\\le R\\le r$，且对任意 $L\\le a_x\\le a_y\\le R$，有 $x,y$ 在树上的最近公共祖先 $z$ 满足 $L\\le a_z\\le R$。\n\n以上所有数值为整数。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来一行，$n$ 个整数 $a_1,\\dots,a_n$；\n\n接下来 $n-1$ 行，依次为 $f_2,\\dots,f_n$；\n\n接下来 $m$ 行，每行 $l\\ r$ 表示一个询问。", "outputFormat": "对每个询问，输出一行，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 2\\times 10^5$，$1\\le f_i\\le i-1$，$l\\le r$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 3000$。\n\n对于另外 $25\\%$ 的数据，满足 $l=1,\\;r=n,\\;m=1$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2003] 铃原露露", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/px0y070c.png)", "description": "给定一棵有根树，顶点编号为 $1,2,\\dots,n$，对 $2\\le i\\le n$ 有 $f_{i}$ 为 $i$ 的父亲。$a_1,\\dots,a_n$ 是 $1,\\dots,n$ 的排列。\n\n共 $m$ 次询问，每次询问给出 $l,r$，询问有多少个二元组 $L,R$，满足 $l\\le L\\le R\\le r$，且对任意 $L\\le a_x\\le a_y\\le R$，有 $x,y$ 在树上的最近公共祖先 $z$ 满足 $L\\le a_z\\le R$。\n\n以上所有数值为整数。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来一行，$n$ 个整数 $a_1,\\dots,a_n$；\n\n接下来 $n-1$ 行，依次为 $f_2,\\dots,f_n$；\n\n接下来 $m$ 行，每行 $l\\ r$ 表示一个询问。", "outputFormat": "对每个询问，输出一行，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 2\\times 10^5$，$1\\le f_i\\le i-1$，$l\\le r$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 3000$。\n\n对于另外 $25\\%$ 的数据，满足 $l=1,\\;r=n,\\;m=1$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。\n\n", "locale": "zh-CN"}}}
{"pid": "P8529", "type": "P", "difficulty": 7, "samples": [["5 3\n2021 700\n-9384 1031\n2201 2561\n4982 6255\n-1700 388\n-2151 1808 -4359815\n-2850 -1980 7147359\n-924 217 -8902828", "2\n1\n3"]], "limits": {"time": [20000, 20000, 20000, 20000, 20000, 20000, 20000, 20000, 20000, 20000, 20000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2003", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2003] 赫露艾斯塔", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/1kgx165m.png)", "description": "给定 $n$ 个互不相同的点 $(x_i,y_i),\\;1\\le i\\le n$，$m$ 个集合 $S_j=\\{(x_i,y_i)\\mid A_jx_i+B_jy_i+C_j>0\\},\\;1\\le j\\le m$。\n\n你需要找出一个 $1,2,\\dots,m$ 的排列 $p_1,\\dots,p_m$，使得 $|S_{p_1}|+\\sum\\limits_{i=2}^m |S_{p_i}\\oplus S_{p_{i-1}}|\\le M$。\n\n$M$ 是给定的常数，$A\\oplus B$ 表示 $(A\\cup B)-(A\\cap B)$。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $n$ 行每行两个整数表示 $x_i,y_i$；\n\n接下来 $m$ 行每行三个整数表示 $A_j,B_j,C_j$。", "outputFormat": "输出 $m$ 行，依次表示 $p_1,\\dots,p_m$。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足\n\n$1\\le n\\le 10^5$\n\n$1\\le m\\le 2\\times 10^5$\n\n$M=1.8\\times 10^8$\n\n$A_j^2+B_j^2>0$\n\n$-10^8\\le x_i,y_i,A_j,B_j,C_j\\le 10^8$。\n\n实际上数据是随机生成的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2003] 赫露艾斯塔", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/1kgx165m.png)", "description": "给定 $n$ 个互不相同的点 $(x_i,y_i),\\;1\\le i\\le n$，$m$ 个集合 $S_j=\\{(x_i,y_i)\\mid A_jx_i+B_jy_i+C_j>0\\},\\;1\\le j\\le m$。\n\n你需要找出一个 $1,2,\\dots,m$ 的排列 $p_1,\\dots,p_m$，使得 $|S_{p_1}|+\\sum\\limits_{i=2}^m |S_{p_i}\\oplus S_{p_{i-1}}|\\le M$。\n\n$M$ 是给定的常数，$A\\oplus B$ 表示 $(A\\cup B)-(A\\cap B)$。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $n$ 行每行两个整数表示 $x_i,y_i$；\n\n接下来 $m$ 行每行三个整数表示 $A_j,B_j,C_j$。", "outputFormat": "输出 $m$ 行，依次表示 $p_1,\\dots,p_m$。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足\n\n$1\\le n\\le 10^5$\n\n$1\\le m\\le 2\\times 10^5$\n\n$M=1.8\\times 10^8$\n\n$A_j^2+B_j^2>0$\n\n$-10^8\\le x_i,y_i,A_j,B_j,C_j\\le 10^8$。\n\n实际上数据是随机生成的。", "locale": "zh-CN"}}}
{"pid": "P8530", "type": "P", "difficulty": 7, "samples": [["9\n9 8 7 6 2 4 5 3 1\n1 1 4 5 1 4 1 9 1\n9 1 1 4 5 1 4 1 9\n9\n4 9 3 6\n2 9 1 8\n3 8 2 4\n3 9 2 7\n2 8 1 6\n1 9 1 9\n1 3 5 7\n2 3 3 3\n6 6 6 6", "27\n27\n22\n27\n27\n27\n4\n0\n0"]], "limits": {"time": [7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500, 7500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2003", "O2优化", "Ynoi"], "title": "[Ynoi2003] 博丽灵梦", "background": "", "description": "矩形颜色数，带权。\n\n给定一个有 $n$ 个点的二维平面，每个点坐标为 $(i,p_i)$ ，其有权值 $a$。\n\n给定一个长为 $n$ 的数组 $b$，其下标从 $1$ 到 $n$。\n\n有 $m$ 次查询，每次查询给定一个矩形 $l_1,r_1,l_2,r_2$，定义集合 $S=\\{a_i|l_1\\le i\\le r_1 \\land l_2\\le p_i\\le r_2\\}$，求对于集合 $S$ 中所有元素 $j$，$b_j$ 的和。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示 $p_i$。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示 $a_i$。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示 $b_i$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行 $4$ 个数分别表示 $l_1,r_1,l_2,r_2$，是一组询问。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案，答案对 $2^{32}$ 进行取模后输出。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n### 样例解释\n\n对于答案为 $27$ 的询问，$S=\\{1,4,5,9\\}$，对应 $b_j=9,4,5,9$，和为 $27$。\n\n对于答案为 $22$ 的询问，$S=\\{1,4,9\\}$，对应 $b_j=9,4,9$，和为 $22$。\n\n对于答案为 $4$ 的询问， $S=\\{4\\}$，对应 $b_j=4$，和为 $4$。\n\n对于答案为 $0$ 的询问， $S=\\emptyset$，和为 $0$。\n\n### 数据范围\n\n每个测试点的具体限制见下表：\n\n| 测试点编号  |     $n\\le $      |     $m\\le $      |  特殊限制  |\n| :---------: | :--------------: | :--------------: | :--------: |\n|     $1$     |       $10$       |       $10$       |     无     |\n|     $2$     |  $5\\times 10^3$  |  $5\\times 10^3$  |     无     |\n|     $3$     | $2.5\\times 10^4$ |  $5\\times 10^4$  | $\\text{A}$ |\n|     $4$     |  $5\\times 10^4$  |      $10^5$      | $\\text{A}$ |\n|     $5$     | $7.5\\times 10^4$ | $1.5\\times 10^5$ | $\\text{A}$ |\n|     $6$     |      $10^5$      |  $2\\times 10^5$  | $\\text{A}$ |\n|     $7$     |  $2\\times 10^4$  |  $2\\times 10^4$  |     无     |\n|     $8$     |  $3\\times 10^4$  |  $6\\times 10^4$  |     无     |\n|     $9$     |  $4\\times 10^4$  |  $8\\times 10^4$  |     无     |\n|    $10$     |  $5\\times 10^4$  |      $10^5$      |     无     |\n|    $11$     |  $6\\times 10^4$  | $1.2\\times 10^5$ |     无     |\n|    $12$     |  $7\\times 10^4$  | $1.4\\times 10^5$ |     无     |\n| $13\\sim 15$ |      $10^5$      |  $2\\times 10^5$  | $\\text{C}$ |\n| $16\\sim 18$ |      $10^5$      |  $2\\times 10^5$  |     无     |\n|    $19$     |      $10^5$      |  $3\\times 10^5$  |     无     |\n|    $20$     |      $10^5$      |  $4\\times 10^5$  |     无     |\n|    $21$     |      $10^5$      |  $5\\times 10^5$  |     无     |\n|    $22$     |      $10^5$      |  $6\\times 10^5$  |     无     |\n|    $23$     |      $10^5$      |  $8\\times 10^5$  |     无     |\n|    $24$     |      $10^5$      |      $10^6$      |     无     |\n|    $25$     |      $10^5$      |      $10^6$      |     无     |\n\n为了方便，下面记 $(a, b) \\leq (c, d)$ 表示平面上两个点 $(a, b),(c, d)$ 满足 $a \\leq c, b \\leq d$。\n\n特殊限制 A：对于所有询问有 $l_2 = 1, r_2 = n$。\n\n特殊限制 B：这个特殊限制太容易造水了，不要了。\n\n特殊限制 C：最多有 $50$ 对二元组 $(i, j)(1 \\leq i < j \\leq n)$ 不满足 $(i, p_i) \\leq (j, p_j)$。\n\n对于所有测试点：$2 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^6$，$1 \\leq l_1\\le r_1 \\leq n$，$1 \\leq l_2\\le r_2 \\leq n$，保证 $p_i$ 为一个排列，保证 $1\\le p_i,a_i,b_i\\le n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2003] 博丽灵梦", "background": "", "description": "矩形颜色数，带权。\n\n给定一个有 $n$ 个点的二维平面，每个点坐标为 $(i,p_i)$ ，其有权值 $a$。\n\n给定一个长为 $n$ 的数组 $b$，其下标从 $1$ 到 $n$。\n\n有 $m$ 次查询，每次查询给定一个矩形 $l_1,r_1,l_2,r_2$，定义集合 $S=\\{a_i|l_1\\le i\\le r_1 \\land l_2\\le p_i\\le r_2\\}$，求对于集合 $S$ 中所有元素 $j$，$b_j$ 的和。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示 $p_i$。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示 $a_i$。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示 $b_i$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行 $4$ 个数分别表示 $l_1,r_1,l_2,r_2$，是一组询问。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案，答案对 $2^{32}$ 进行取模后输出。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n### 样例解释\n\n对于答案为 $27$ 的询问，$S=\\{1,4,5,9\\}$，对应 $b_j=9,4,5,9$，和为 $27$。\n\n对于答案为 $22$ 的询问，$S=\\{1,4,9\\}$，对应 $b_j=9,4,9$，和为 $22$。\n\n对于答案为 $4$ 的询问， $S=\\{4\\}$，对应 $b_j=4$，和为 $4$。\n\n对于答案为 $0$ 的询问， $S=\\emptyset$，和为 $0$。\n\n### 数据范围\n\n每个测试点的具体限制见下表：\n\n| 测试点编号  |     $n\\le $      |     $m\\le $      |  特殊限制  |\n| :---------: | :--------------: | :--------------: | :--------: |\n|     $1$     |       $10$       |       $10$       |     无     |\n|     $2$     |  $5\\times 10^3$  |  $5\\times 10^3$  |     无     |\n|     $3$     | $2.5\\times 10^4$ |  $5\\times 10^4$  | $\\text{A}$ |\n|     $4$     |  $5\\times 10^4$  |      $10^5$      | $\\text{A}$ |\n|     $5$     | $7.5\\times 10^4$ | $1.5\\times 10^5$ | $\\text{A}$ |\n|     $6$     |      $10^5$      |  $2\\times 10^5$  | $\\text{A}$ |\n|     $7$     |  $2\\times 10^4$  |  $2\\times 10^4$  |     无     |\n|     $8$     |  $3\\times 10^4$  |  $6\\times 10^4$  |     无     |\n|     $9$     |  $4\\times 10^4$  |  $8\\times 10^4$  |     无     |\n|    $10$     |  $5\\times 10^4$  |      $10^5$      |     无     |\n|    $11$     |  $6\\times 10^4$  | $1.2\\times 10^5$ |     无     |\n|    $12$     |  $7\\times 10^4$  | $1.4\\times 10^5$ |     无     |\n| $13\\sim 15$ |      $10^5$      |  $2\\times 10^5$  | $\\text{C}$ |\n| $16\\sim 18$ |      $10^5$      |  $2\\times 10^5$  |     无     |\n|    $19$     |      $10^5$      |  $3\\times 10^5$  |     无     |\n|    $20$     |      $10^5$      |  $4\\times 10^5$  |     无     |\n|    $21$     |      $10^5$      |  $5\\times 10^5$  |     无     |\n|    $22$     |      $10^5$      |  $6\\times 10^5$  |     无     |\n|    $23$     |      $10^5$      |  $8\\times 10^5$  |     无     |\n|    $24$     |      $10^5$      |      $10^6$      |     无     |\n|    $25$     |      $10^5$      |      $10^6$      |     无     |\n\n为了方便，下面记 $(a, b) \\leq (c, d)$ 表示平面上两个点 $(a, b),(c, d)$ 满足 $a \\leq c, b \\leq d$。\n\n特殊限制 A：对于所有询问有 $l_2 = 1, r_2 = n$。\n\n特殊限制 B：这个特殊限制太容易造水了，不要了。\n\n特殊限制 C：最多有 $50$ 对二元组 $(i, j)(1 \\leq i < j \\leq n)$ 不满足 $(i, p_i) \\leq (j, p_j)$。\n\n对于所有测试点：$2 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^6$，$1 \\leq l_1\\le r_1 \\leq n$，$1 \\leq l_2\\le r_2 \\leq n$，保证 $p_i$ 为一个排列，保证 $1\\le p_i,a_i,b_i\\le n$。\n", "locale": "zh-CN"}}}
{"pid": "P8531", "type": "P", "difficulty": 7, "samples": [["10\n1 3\n3 4\n1 2\n5 2\n5 6\n2 6\n3 4\n2 9\n2 1\n3 1\n5\n1 10\n9 10\n3 10\n1 7\n4 9", "4\n0\n3\n3\n1"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2003", "O2优化", "Ynoi"], "title": "[Ynoi2003] 戌亥彗星", "background": "", "description": "定义一个图为海胆， 如果它满足以下条件：\n\n1. 是一个连通图\n2. 包含恰好一个简单环\n3. 除了环以外的点每个点度数不超过 $2$\n\n有一张图，有 $n$ 个点，$n$ 条边，第 $i$ 条边连接 $u_i$ 和 $v_i$（不保证联通）。\n\n定义一张图的区间子图 $[l,r]$ 为 $(V',E'),E'=\\{(u_i,v_i)|l\\leq i\\leq r\\},V'=\\{u_i|l\\leq i\\leq r\\} \\cup \\{v_i|l\\leq i\\leq r\\}$，也就是说，这个区间子图包含且仅包含区间中的边和所有在区间中一条边上的点。\n\n现在有 $q$ 次询问，每次给定一个区间 $l,r$，求 $l,r$ 有多少个子区间 $[l',r'](l\\leq l'\\leq r'\\leq r)$ 满足原图的 $[l',r']$ 区间子图是个海胆。\n\n**对于条件 2 的补充说明：**\n\n1. 简单环的定义是 可以从任一点开始经过一些不重复的边回到起点，途中经过了至少一条边，且除了起点和终点相同以外不经过重复点，例如 $1-2-3-1$ 是简单环，两条 $1-2$ 的边是简单环，但只有一个点的时候不是, $1-2-3-4-5-3-1$ 也不是，（这里的环用某一个点开始的路径表示）。\n2. 条件 $2$ 要求除了环边以外不存在边两端都在这个环上。", "inputFormat": "第一行一个整数 $n$，表示点数和边数。\n\n接下来 $n$ 行，每行两个整数 $u_i,v_i$ 表示一条边。\n\n接下来一行一个整数 $q$。\n\n接下来 $q$ 行，每行两个整数 $l,r$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个数表示这组询问的答案。", "hint": "Idea：lk&nzhtl1477，Solution：lk&ccz181078，Code：lk&ccz181078，Data：lk&ccz181078\n\n**数据保证不存在自环**\n\n\n| 子任务编号 | $n\\le$  | $q\\le$  |    特殊性质    | 分值  |\n| :--------: | :-----: | :-----: | :------------: | :---: |\n|    $1$     |  $100$  |  $100$  |       无       |  $5$  |\n|    $2$     |  $500$  |  $500$  |       无       | $15$  |\n|    $3$     | $5000$  | $5000$  |       无       | $15 $ |\n|    $4$     | $50000$ | $50000$ |       无       | $15$  |\n|    $5$     | $10^6$  |   $1$   |       无       | $15 $ |\n|    $6$     | $10^6$  | $10^6$  | 原图是一个海胆 | $15$  |\n|    $7$     | $10^6$  | $10^6$  |       无       | $20$  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2003] 戌亥彗星", "background": "", "description": "定义一个图为海胆， 如果它满足以下条件：\n\n1. 是一个连通图\n2. 包含恰好一个简单环\n3. 除了环以外的点每个点度数不超过 $2$\n\n有一张图，有 $n$ 个点，$n$ 条边，第 $i$ 条边连接 $u_i$ 和 $v_i$（不保证联通）。\n\n定义一张图的区间子图 $[l,r]$ 为 $(V',E'),E'=\\{(u_i,v_i)|l\\leq i\\leq r\\},V'=\\{u_i|l\\leq i\\leq r\\} \\cup \\{v_i|l\\leq i\\leq r\\}$，也就是说，这个区间子图包含且仅包含区间中的边和所有在区间中一条边上的点。\n\n现在有 $q$ 次询问，每次给定一个区间 $l,r$，求 $l,r$ 有多少个子区间 $[l',r'](l\\leq l'\\leq r'\\leq r)$ 满足原图的 $[l',r']$ 区间子图是个海胆。\n\n**对于条件 2 的补充说明：**\n\n1. 简单环的定义是 可以从任一点开始经过一些不重复的边回到起点，途中经过了至少一条边，且除了起点和终点相同以外不经过重复点，例如 $1-2-3-1$ 是简单环，两条 $1-2$ 的边是简单环，但只有一个点的时候不是, $1-2-3-4-5-3-1$ 也不是，（这里的环用某一个点开始的路径表示）。\n2. 条件 $2$ 要求除了环边以外不存在边两端都在这个环上。", "inputFormat": "第一行一个整数 $n$，表示点数和边数。\n\n接下来 $n$ 行，每行两个整数 $u_i,v_i$ 表示一条边。\n\n接下来一行一个整数 $q$。\n\n接下来 $q$ 行，每行两个整数 $l,r$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个数表示这组询问的答案。", "hint": "Idea：lk&nzhtl1477，Solution：lk&ccz181078，Code：lk&ccz181078，Data：lk&ccz181078\n\n**数据保证不存在自环**\n\n\n| 子任务编号 | $n\\le$  | $q\\le$  |    特殊性质    | 分值  |\n| :--------: | :-----: | :-----: | :------------: | :---: |\n|    $1$     |  $100$  |  $100$  |       无       |  $5$  |\n|    $2$     |  $500$  |  $500$  |       无       | $15$  |\n|    $3$     | $5000$  | $5000$  |       无       | $15 $ |\n|    $4$     | $50000$ | $50000$ |       无       | $15$  |\n|    $5$     | $10^6$  |   $1$   |       无       | $15 $ |\n|    $6$     | $10^6$  | $10^6$  | 原图是一个海胆 | $15$  |\n|    $7$     | $10^6$  | $10^6$  |       无       | $20$  |", "locale": "zh-CN"}}}
{"pid": "P8532", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2003", "交互题", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2003] 雾雨魔理沙", "background": "**这是一道交互题。**\n\n**在提交本题前请务必仔细阅读以下内容。**\n\n本题只支持 C++ 语言提交（建议使用 C++14，请不要使用 C++14 (GCC9)）。\n\n由于洛谷特殊的交互机制，在提交本题时，请去掉代码中的 ```#include \"count.h\"``` 语句，并将下发文件 **`count_.h`** （注意并不是 `count.zip` 里的 `count.h`）中的内容粘贴到代码最开头，然后提交。\n\n如果您无法打开 `count_.h`，那么可以复制下面的内容。\n\n```cpp\n#ifndef CIRCLE_H\n#define CIRCLE_H\n#include<vector>\nstruct info{\n  unsigned val;\n  unsigned poi[2];\n};\nconst info emptyinfo=info{0,(unsigned)-1,(unsigned)-1};\ninfo MR(info a,info b);\ninfo MC(info a,info b);\nvoid init(int T,int n,int q,std::vector<int>dad,std::vector<info>ve,int M);\nbool isempty(info a);\ninfo ask(int x,int d);\n\n#endif\n```\n\n如果您在提交本题时出现了任何意外的情况，请咨询管理员。", "description": "给出五元组 $(T, I, S_V, S_E, \\iota)$，其中：\n\n- $T$ 是一棵 $n$ 个点的有根树 $T = (V, E)$，其中 $V$ 为 $T$ 的点集，$E$ 为 $T$ 的边集。树的节点被编号为 $1, 2, \\ldots, n$，其中根节点编号为 $1$。\n- $I$ 是一个集合，集合中的元素称作**信息**。其中有两个不同的特殊元素：单位元 $\\epsilon$ 和不合法信息 $\\bot$。\n\n对于一般的信息，其都具有**点集合**和**边集合**两个属性。特别的，对于单位元，其只有边集合的属性，而对于不合法信息，其没有以上两种属性。\n\n- 对于信息 $o \\in I \\setminus \\{ \\epsilon, \\bot \\}$，$o$ 的**点集合**是 $V$ 的一个二元子集，记作 $S_V(o)$，满足 $S_V(o) \\subseteq V$ 且 $\\lvert S_V(o) \\rvert = 2$。其中，两个集合 $A, B$ 的差 $A \\setminus B$ 被定义为 $A \\setminus B = \\{ x \\in A \\hspace{3mu}\\vert\\hspace{3mu} x \\notin B \\}$。\n- 对于信息 $o \\in I \\setminus \\{ \\bot \\}$，$o$ 的**边集合**是 $E$ 的一个子集，记作 $S_E(o)$，满足 $S_E(o) \\subseteq E$。规定单位元的边集合为空，也即 $S_E(\\epsilon) = \\varnothing$。\n- 对于树上的任何一条边 $e \\in E$，记 $e = (u, v)$，存在一个关于 $e$ 的信息 $\\iota(e) \\in I$，它以其端点为点集合、自身为边集合，即 $S_V(\\iota(e)) = \\{ u, v \\}$、$S_E(\\iota(e)) = \\{ e \\}$。\n\n信息有两种合并的方式，分别记作 $R$ 和 $C$。对于 $\\forall a, b \\in I$，记 $r = R(a, b), c = C(a, b)$，满足 $r, c \\in I$，则：\n\n- 单位元和任何信息合并都得到对方。也即，如果 $a = \\epsilon$，那么 $r = c = b$；如果 $b = \\epsilon$，那么 $r = c = a$。\n- 不合法信息和任何信息合并都得到不合法信息。也即，如果 $a = \\bot$ 或者 $b = \\bot$，那么 $r = c = \\bot$。\n- 对于剩下的情况，如果两个信息的**边集合**的交集非空，或者**点集合**的交集的大小不为 $1$，则合并得到不合法信息。也即，如果 $S_E(a) \\cap S_E(b) \\ne \\varnothing$ 或 $\\lvert S_V(a) \\cap S_V(b) \\rvert \\ne 1$，则 $r = c = \\bot$。\n- 否则，有\n  $$ S_E(r) = S_E(c) = S_E(a) \\cup S_E(b) \\text{,} $$\n  $$ S_V(r) = S_V(a) \\text{,} $$\n  $$ S_V(c) = S_V(a) \\oplus S_V(b) \\text{,} $$\n  其中 $\\oplus$ 表示集合的对称差运算，也即 $A \\oplus B = (A \\cup B) \\setminus (A \\cap B)$。\n\n定义 $T$ 中两个点的树上距离为树上以两个点为端点的唯一简单路径经过的边数。\n\n给出评分参数 $M$ 和 $q$ 次询问，每次询问给出树上的一个点 $u$ 和一个非负整数 $d$。记点集 $X$ 为 $T$ 中所有与 $u$ 的树上距离不超过 $d$ 的点构成的集合，又记边集 $Y = \\{ (a, b) \\in E \\hspace{3mu}\\vert\\hspace{3mu} a, b \\in X \\}$ 为 $X$ 内部的边集。可以证明，从 $\\epsilon$ 和所有 $\\iota(e)$（$e \\in E$）出发，总是能通过有限次 $R, C$ 的调用得到信息 $o \\ne \\bot$ 满足 $S_E(o) = Y$。\n\n每组询问中，你需要在 $R$ 和 $C$ 的调用次数总和不超过 $M$ 的限制下构造出一个满足这样的要求的信息 $o$。特别地，如果 $d = 0$，则直接返回单位元 $\\epsilon$ 即可。\n\n----\n\n**【实现细节】**\n\n请确保你的程序开头有 `#include \"count.h\"`。\n\n头文件 `count.h` 中实现了如下内容：\n\n1. 定义了信息对应的数据类型 `info`；\n2. 定义了 $\\epsilon$ 所对应的 `info` 类型常量 `emptyinfo`，你可以在程序中直接使用。\n3. 定义并实现了以下两个信息合并函数，你可以在程序中直接调用：\n   \n   ```cpp\n   info MR(info a,info b);\n   info MC(info a,info b);\n   ```\n   \n   - 两个函数分别返回 $R(a, b)$ 与 $C(a, b)$ 对应的信息。\n   \n   **你需要保证调用 $\\boldsymbol{R(a, b)}$ 与 $\\boldsymbol{C(a, b)}$ 时结果不为 $\\boldsymbol{\\bot}$，否则程序可能会出现异常行为。**\n4. 定义并实现了判定一个信息是否为单位元的函数，你可以在程序中直接调用：\n   ```cpp\n   bool isempty(info a);\n   ```\n   - 这个函数返回真当且仅当 $a$ 为单位元。\n\n可以查看参考交互库了解更多实现细节。\n\n**你不需要，也不应该实现主函数。** 你需要实现如下几个函数：\n\n```cpp\nvoid init(int T, int n, int q, vector<int> fa, vector<info> e, int M);\n```\n\n- `T` 表示测试点编号，`n` 表示树的点数，`q` 表示询问数，`M` 表示该测试点的评分参数。\n- `fa` 和 `e` 的长度均为 $n - 1$。对于 $0 \\le i < n - 1$，$fa[i]$ 和 $i + 2$ 为第 $i$ 条边 $e_i$ 的两个端点，$e[i]$ 为题目描述中提到的 $\\iota(e_i)$ 所对应的 `info` 类型元素。数据保证 $fa[i]$ 小于 $i + 2$。\n\n```cpp\ninfo ask(int u, int d);\n```\n\n给出一个询问，参数的意义见题目描述。你需要在函数结束时返回一个满足题设条件的信息。\n\n最终测试时，在每个测试点，交互库会**恰好**调用一次 `init` 函数，随后调用 $q$ 次 `ask`函数。交互库会使用特殊的实现方式，单个 `info` 类型的变量会恒定消耗 $12$ 字节内存，**这与下发的参考交互库不同**。为保证程序运行时内存使用在题目限制内，你需要保证运行过程中没有过多的 `info` 类型变量同时存在。\n\n保证在满足调用次数限制且不进行 `isempty` 函数调用的情况下，最终测试的交互库运行所需的时间不超过 0.6 秒，交互库本身所消耗的内存不超过 16 MiB。保证在只执行 ${10}^8$ 次 `isempty` 函数调用的情况下，最终测试的交互库运行的时间不超过 0.25 秒。\n\n在下发文件中包含一个名为 `count.cpp` 的文件，作为示例程序，选手可以在此基础上继续实现本题。在下发文件中还额外包含一个名为 `count_backup.h` 的备份文件，我们保证其与 `count.h` 文件完全相同。\n\n----\n\n**【测试程序方式】**\n\n本题目录下提供了两个交互库的参考实现 `grader.o`、`checker.o`，其为两个不同的交互库编译产生的可链接文件。最终测试时所用的交互库实现与该实现有不同，因此选手的解法**不应依赖交互库的具体实现**，同时也不应该依赖 `count.h` 中 `info` 类型的具体实现。\n\n你需要修改下发的 `count.h` 来帮助进行链接。具体的，在将源代码 `count.cpp` 和程序 `grader.o` 进行链接的时候，你需要注释掉 `count.h` 代码的第 5 行，并保留第 4 行的代码。链接 `checker.o` 方法类似，需要注释掉 `count.h` 代码的第 4 行，并保留第 5 行的代码。选手可以对 `count.h` 的实现自行修改来实现不同程序的编译。\n\n修改后，选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```bash\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o grader.o -o count\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o checker.o -o count\n```\n\n其中第一行命令会编译当前 `count.cpp` 后与 `grader.o` 链接起来，生成可执行文件 `count`，第二行命令则会编译当前 `count.cpp` 后与 `checker.o` 链接起来，生成可执行文件 `count`。\n\n按上述方法编译得到的可执行文件 `count`，其运行方式如下：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行四个整数 $id, n, q, M$，分别表示测试点编号、树的点数、询问数和评分参数；\n  - 第二行 $n - 1$ 个整数 $p_2, p_3, \\ldots, p_n$，分别表示 $2$ 至 $n$ 的父亲节点编号，在本地调试时你需要保证 $\\forall i \\in [2, n]$，$p_i < i$；\n  - 接下来 $q$ 行每行两个整数 $u, d$，描述一次询问。\n- 读入之后，交互库会进行测试。如果你的程序不满足交互库限制，其会在输出中返回对应的错误信息。否则，对于链接的可执行文件，其输出如下：\n  - 总共一行三个整数 $C_1, C_2, C_3$，其中：\n    - $C_1$ 表示程序在 `init` 函数中调用交互库函数的总次数；\n    - $C_2$ 表示程序在运行过程中调用交互库函数的总次数；\n    - $C_3$ 表示程序在 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。\n    - 对于上述三个统计量，我们只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n- 在链接不同文件的时候，其能够进行的检查也不同，具体地：\n  - `grader.o`：其在运行时不会检查 `ask` 函数返回的信息是否正确，但可以帮助选手判断交互操作是否符合要求。这份程序运行时间最接近评测时的交互库，因此选手可以利用该程序测试运行速度，但不保证程序正确性。\n  - `checker.o`：其在运行时会检查 `ask` 函数返回的信息是否正确，也可以帮助选手判断交互操作是否符合要求。同时其会检查 `ask` 函数返回的信息是否正确。这份程序可以进行答案正确性的检查。\n\n选手在调试时需要保证输入可执行文件 `count` 的数据满足上述输入格式，否则不保证输出结果正确。\n", "inputFormat": "见【测试程序方式】。", "outputFormat": "见【测试程序方式】。", "hint": "Idea：zx2003，Solution：zx2003，Code：zx2003，Data：zx2003\n\n**【评分方式】**\n\n最终评测**只会**收取 `count.cpp`，修改选手目录下其他文件不会对评测结果产生影响。**注意：**\n\n- **未初始化的 `info` 类型的变量不保证是 `emptyinfo`。**\n- **请不要尝试访问或修改 `info` 类型的成员变量，否则将被视为攻击交互库。**\n- **请不要在 `init` 函数调用之前调用 `MR` 和 `MC` 函数，否则可能会发生未定义行为。**\n- **你只能访问自己定义的变量和交互库返回的 `info` 类型变量，尝试访问其他空间将可能导致编译错误或运行时错误。**\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若程序执行了非法的函数调用或询问操作中给出了错误回答，该测试点将会获得 0 分。否则，记 $C_1, C_3$ 分别表示你的程序在 `init` 函数中调用交互库函数的次数，和你的程序在所有 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。如果 $C_1 \\le 3 \\cdot {10}^7$ 且 $C_3$ 不超过该测试点的评分参数 $M$，你将获得该测试点的分数，否则你无法获得该测试点的分数。注意：计算 $C_1, C_3$ 时只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n\n----\n\n**【样例 \\#1】**\n\n见附件中的 `count/count1.in` 与 `count/count1.ans`。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `count/count2.in` 与 `count/count2.ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `count/count3.in` 与 `count/count3.ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `count/count4.in` 与 `count/count4.ans`。\n\n----\n\n**【数据范围】**\n\n对于所有测试点，$1 \\le n \\le 2 \\times {10}^5$，$1 \\le q \\le {10}^6$；每组询问中，有 $1 \\le u \\le n$，$1 \\le d \\le n - 1$。\n\n| 测试点   | $n=$              | $q=$            | 特殊性质 | $M=$  |\n|:-----:|:-----------------:|:---------------:|:----:|:-----:|\n| $1$   | $1000$            | $10^4$          |      | $500$ |\n| $2$   | $2000$            | $10^4$          |      | $500$ |\n| $3,4$ | $10^5$            | $10^6$          | A    | $5$   |\n| $5,6$ | $6 \\times 10^4$   | $6\\times 10^4$  | B    | $50$  |\n| $7$   | $6 \\times 10^4$   | $6 \\times 10^4$ | B    | $5$   |\n| $8$   | $10^5$            | $10^5$          | B    | $5$   |\n| $9$   | $7500$            | $5 \\times 10^4$ | C    | $500$ |\n| $10$  | $10^4$            | $5 \\times 10^4$ |      | $500$ |\n| $11$  | $1.5 \\times 10^4$ | $5 \\times 10^4$ |      | $500$ |\n| $12$  | $2 \\times 10^4$   | $5 \\times 10^4$ |      | $50$  |\n| $13$  | $2.5 \\times 10^4$ | $5 \\times 10^4$ |      | $5$   |\n| $14$  | $3 \\times 10^4$   | $10^5$          |      | $5$   |\n| $15$  | $6 \\times 10^4$   | $10^6$          | D    | $5$   |\n| $16$  | $6 \\times 10^4$   | $10^6$          |      | $5$   |\n| $17$  | $8 \\times 10^4$   | $10^6$          |      | $5$   |\n| $18$  | $10^5$            | $10^6$          |      | $5$   |\n| $19$  | $1.5 \\times 10^5$ | $10^6$          |      | $5$   |\n| $20$  | $2 \\times 10^5$   | $10^6$          |      | $1$   |\n\n\n特殊性质 A：保证 $\\forall i \\in [1, n - 1]$，编号为 $i + 1$ 的点的父节点为 $i$。  \n特殊性质 B：保证所有询问均满足 $u = 1$。  \n特殊性质 C：保证所有询问均满足 $d \\le 100$。  \n特殊性质 D：保证所有询问均满足 $d \\ge 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2003] 雾雨魔理沙", "background": "**这是一道交互题。**\n\n**在提交本题前请务必仔细阅读以下内容。**\n\n本题只支持 C++ 语言提交（建议使用 C++14，请不要使用 C++14 (GCC9)）。\n\n由于洛谷特殊的交互机制，在提交本题时，请去掉代码中的 ```#include \"count.h\"``` 语句，并将下发文件 **`count_.h`** （注意并不是 `count.zip` 里的 `count.h`）中的内容粘贴到代码最开头，然后提交。\n\n如果您无法打开 `count_.h`，那么可以复制下面的内容。\n\n```cpp\n#ifndef CIRCLE_H\n#define CIRCLE_H\n#include<vector>\nstruct info{\n  unsigned val;\n  unsigned poi[2];\n};\nconst info emptyinfo=info{0,(unsigned)-1,(unsigned)-1};\ninfo MR(info a,info b);\ninfo MC(info a,info b);\nvoid init(int T,int n,int q,std::vector<int>dad,std::vector<info>ve,int M);\nbool isempty(info a);\ninfo ask(int x,int d);\n\n#endif\n```\n\n如果您在提交本题时出现了任何意外的情况，请咨询管理员。", "description": "给出五元组 $(T, I, S_V, S_E, \\iota)$，其中：\n\n- $T$ 是一棵 $n$ 个点的有根树 $T = (V, E)$，其中 $V$ 为 $T$ 的点集，$E$ 为 $T$ 的边集。树的节点被编号为 $1, 2, \\ldots, n$，其中根节点编号为 $1$。\n- $I$ 是一个集合，集合中的元素称作**信息**。其中有两个不同的特殊元素：单位元 $\\epsilon$ 和不合法信息 $\\bot$。\n\n对于一般的信息，其都具有**点集合**和**边集合**两个属性。特别的，对于单位元，其只有边集合的属性，而对于不合法信息，其没有以上两种属性。\n\n- 对于信息 $o \\in I \\setminus \\{ \\epsilon, \\bot \\}$，$o$ 的**点集合**是 $V$ 的一个二元子集，记作 $S_V(o)$，满足 $S_V(o) \\subseteq V$ 且 $\\lvert S_V(o) \\rvert = 2$。其中，两个集合 $A, B$ 的差 $A \\setminus B$ 被定义为 $A \\setminus B = \\{ x \\in A \\hspace{3mu}\\vert\\hspace{3mu} x \\notin B \\}$。\n- 对于信息 $o \\in I \\setminus \\{ \\bot \\}$，$o$ 的**边集合**是 $E$ 的一个子集，记作 $S_E(o)$，满足 $S_E(o) \\subseteq E$。规定单位元的边集合为空，也即 $S_E(\\epsilon) = \\varnothing$。\n- 对于树上的任何一条边 $e \\in E$，记 $e = (u, v)$，存在一个关于 $e$ 的信息 $\\iota(e) \\in I$，它以其端点为点集合、自身为边集合，即 $S_V(\\iota(e)) = \\{ u, v \\}$、$S_E(\\iota(e)) = \\{ e \\}$。\n\n信息有两种合并的方式，分别记作 $R$ 和 $C$。对于 $\\forall a, b \\in I$，记 $r = R(a, b), c = C(a, b)$，满足 $r, c \\in I$，则：\n\n- 单位元和任何信息合并都得到对方。也即，如果 $a = \\epsilon$，那么 $r = c = b$；如果 $b = \\epsilon$，那么 $r = c = a$。\n- 不合法信息和任何信息合并都得到不合法信息。也即，如果 $a = \\bot$ 或者 $b = \\bot$，那么 $r = c = \\bot$。\n- 对于剩下的情况，如果两个信息的**边集合**的交集非空，或者**点集合**的交集的大小不为 $1$，则合并得到不合法信息。也即，如果 $S_E(a) \\cap S_E(b) \\ne \\varnothing$ 或 $\\lvert S_V(a) \\cap S_V(b) \\rvert \\ne 1$，则 $r = c = \\bot$。\n- 否则，有\n  $$ S_E(r) = S_E(c) = S_E(a) \\cup S_E(b) \\text{,} $$\n  $$ S_V(r) = S_V(a) \\text{,} $$\n  $$ S_V(c) = S_V(a) \\oplus S_V(b) \\text{,} $$\n  其中 $\\oplus$ 表示集合的对称差运算，也即 $A \\oplus B = (A \\cup B) \\setminus (A \\cap B)$。\n\n定义 $T$ 中两个点的树上距离为树上以两个点为端点的唯一简单路径经过的边数。\n\n给出评分参数 $M$ 和 $q$ 次询问，每次询问给出树上的一个点 $u$ 和一个非负整数 $d$。记点集 $X$ 为 $T$ 中所有与 $u$ 的树上距离不超过 $d$ 的点构成的集合，又记边集 $Y = \\{ (a, b) \\in E \\hspace{3mu}\\vert\\hspace{3mu} a, b \\in X \\}$ 为 $X$ 内部的边集。可以证明，从 $\\epsilon$ 和所有 $\\iota(e)$（$e \\in E$）出发，总是能通过有限次 $R, C$ 的调用得到信息 $o \\ne \\bot$ 满足 $S_E(o) = Y$。\n\n每组询问中，你需要在 $R$ 和 $C$ 的调用次数总和不超过 $M$ 的限制下构造出一个满足这样的要求的信息 $o$。特别地，如果 $d = 0$，则直接返回单位元 $\\epsilon$ 即可。\n\n----\n\n**【实现细节】**\n\n请确保你的程序开头有 `#include \"count.h\"`。\n\n头文件 `count.h` 中实现了如下内容：\n\n1. 定义了信息对应的数据类型 `info`；\n2. 定义了 $\\epsilon$ 所对应的 `info` 类型常量 `emptyinfo`，你可以在程序中直接使用。\n3. 定义并实现了以下两个信息合并函数，你可以在程序中直接调用：\n   \n   ```cpp\n   info MR(info a,info b);\n   info MC(info a,info b);\n   ```\n   \n   - 两个函数分别返回 $R(a, b)$ 与 $C(a, b)$ 对应的信息。\n   \n   **你需要保证调用 $\\boldsymbol{R(a, b)}$ 与 $\\boldsymbol{C(a, b)}$ 时结果不为 $\\boldsymbol{\\bot}$，否则程序可能会出现异常行为。**\n4. 定义并实现了判定一个信息是否为单位元的函数，你可以在程序中直接调用：\n   ```cpp\n   bool isempty(info a);\n   ```\n   - 这个函数返回真当且仅当 $a$ 为单位元。\n\n可以查看参考交互库了解更多实现细节。\n\n**你不需要，也不应该实现主函数。** 你需要实现如下几个函数：\n\n```cpp\nvoid init(int T, int n, int q, vector<int> fa, vector<info> e, int M);\n```\n\n- `T` 表示测试点编号，`n` 表示树的点数，`q` 表示询问数，`M` 表示该测试点的评分参数。\n- `fa` 和 `e` 的长度均为 $n - 1$。对于 $0 \\le i < n - 1$，$fa[i]$ 和 $i + 2$ 为第 $i$ 条边 $e_i$ 的两个端点，$e[i]$ 为题目描述中提到的 $\\iota(e_i)$ 所对应的 `info` 类型元素。数据保证 $fa[i]$ 小于 $i + 2$。\n\n```cpp\ninfo ask(int u, int d);\n```\n\n给出一个询问，参数的意义见题目描述。你需要在函数结束时返回一个满足题设条件的信息。\n\n最终测试时，在每个测试点，交互库会**恰好**调用一次 `init` 函数，随后调用 $q$ 次 `ask`函数。交互库会使用特殊的实现方式，单个 `info` 类型的变量会恒定消耗 $12$ 字节内存，**这与下发的参考交互库不同**。为保证程序运行时内存使用在题目限制内，你需要保证运行过程中没有过多的 `info` 类型变量同时存在。\n\n保证在满足调用次数限制且不进行 `isempty` 函数调用的情况下，最终测试的交互库运行所需的时间不超过 0.6 秒，交互库本身所消耗的内存不超过 16 MiB。保证在只执行 ${10}^8$ 次 `isempty` 函数调用的情况下，最终测试的交互库运行的时间不超过 0.25 秒。\n\n在下发文件中包含一个名为 `count.cpp` 的文件，作为示例程序，选手可以在此基础上继续实现本题。在下发文件中还额外包含一个名为 `count_backup.h` 的备份文件，我们保证其与 `count.h` 文件完全相同。\n\n----\n\n**【测试程序方式】**\n\n本题目录下提供了两个交互库的参考实现 `grader.o`、`checker.o`，其为两个不同的交互库编译产生的可链接文件。最终测试时所用的交互库实现与该实现有不同，因此选手的解法**不应依赖交互库的具体实现**，同时也不应该依赖 `count.h` 中 `info` 类型的具体实现。\n\n你需要修改下发的 `count.h` 来帮助进行链接。具体的，在将源代码 `count.cpp` 和程序 `grader.o` 进行链接的时候，你需要注释掉 `count.h` 代码的第 5 行，并保留第 4 行的代码。链接 `checker.o` 方法类似，需要注释掉 `count.h` 代码的第 4 行，并保留第 5 行的代码。选手可以对 `count.h` 的实现自行修改来实现不同程序的编译。\n\n修改后，选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```bash\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o grader.o -o count\ng++ count.cpp -c -O2 -std=c++14 -lm && g++ count.o checker.o -o count\n```\n\n其中第一行命令会编译当前 `count.cpp` 后与 `grader.o` 链接起来，生成可执行文件 `count`，第二行命令则会编译当前 `count.cpp` 后与 `checker.o` 链接起来，生成可执行文件 `count`。\n\n按上述方法编译得到的可执行文件 `count`，其运行方式如下：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行四个整数 $id, n, q, M$，分别表示测试点编号、树的点数、询问数和评分参数；\n  - 第二行 $n - 1$ 个整数 $p_2, p_3, \\ldots, p_n$，分别表示 $2$ 至 $n$ 的父亲节点编号，在本地调试时你需要保证 $\\forall i \\in [2, n]$，$p_i < i$；\n  - 接下来 $q$ 行每行两个整数 $u, d$，描述一次询问。\n- 读入之后，交互库会进行测试。如果你的程序不满足交互库限制，其会在输出中返回对应的错误信息。否则，对于链接的可执行文件，其输出如下：\n  - 总共一行三个整数 $C_1, C_2, C_3$，其中：\n    - $C_1$ 表示程序在 `init` 函数中调用交互库函数的总次数；\n    - $C_2$ 表示程序在运行过程中调用交互库函数的总次数；\n    - $C_3$ 表示程序在 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。\n    - 对于上述三个统计量，我们只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n- 在链接不同文件的时候，其能够进行的检查也不同，具体地：\n  - `grader.o`：其在运行时不会检查 `ask` 函数返回的信息是否正确，但可以帮助选手判断交互操作是否符合要求。这份程序运行时间最接近评测时的交互库，因此选手可以利用该程序测试运行速度，但不保证程序正确性。\n  - `checker.o`：其在运行时会检查 `ask` 函数返回的信息是否正确，也可以帮助选手判断交互操作是否符合要求。同时其会检查 `ask` 函数返回的信息是否正确。这份程序可以进行答案正确性的检查。\n\n选手在调试时需要保证输入可执行文件 `count` 的数据满足上述输入格式，否则不保证输出结果正确。\n", "inputFormat": "见【测试程序方式】。", "outputFormat": "见【测试程序方式】。", "hint": "Idea：zx2003，Solution：zx2003，Code：zx2003，Data：zx2003\n\n**【评分方式】**\n\n最终评测**只会**收取 `count.cpp`，修改选手目录下其他文件不会对评测结果产生影响。**注意：**\n\n- **未初始化的 `info` 类型的变量不保证是 `emptyinfo`。**\n- **请不要尝试访问或修改 `info` 类型的成员变量，否则将被视为攻击交互库。**\n- **请不要在 `init` 函数调用之前调用 `MR` 和 `MC` 函数，否则可能会发生未定义行为。**\n- **你只能访问自己定义的变量和交互库返回的 `info` 类型变量，尝试访问其他空间将可能导致编译错误或运行时错误。**\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若程序执行了非法的函数调用或询问操作中给出了错误回答，该测试点将会获得 0 分。否则，记 $C_1, C_3$ 分别表示你的程序在 `init` 函数中调用交互库函数的次数，和你的程序在所有 $q$ 次 `ask` 函数中调用交互库函数的次数的最大值。如果 $C_1 \\le 3 \\cdot {10}^7$ 且 $C_3$ 不超过该测试点的评分参数 $M$，你将获得该测试点的分数，否则你无法获得该测试点的分数。注意：计算 $C_1, C_3$ 时只会计入 `MR`、`MC` 函数的调用次数，而不会计入 `isempty` 函数的调用次数。\n\n----\n\n**【样例 \\#1】**\n\n见附件中的 `count/count1.in` 与 `count/count1.ans`。\n\n----\n\n**【样例 \\#2】**\n\n见附件中的 `count/count2.in` 与 `count/count2.ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n----\n\n**【样例 \\#3】**\n\n见附件中的 `count/count3.in` 与 `count/count3.ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n----\n\n**【样例 \\#4】**\n\n见附件中的 `count/count4.in` 与 `count/count4.ans`。\n\n----\n\n**【数据范围】**\n\n对于所有测试点，$1 \\le n \\le 2 \\times {10}^5$，$1 \\le q \\le {10}^6$；每组询问中，有 $1 \\le u \\le n$，$1 \\le d \\le n - 1$。\n\n| 测试点   | $n=$              | $q=$            | 特殊性质 | $M=$  |\n|:-----:|:-----------------:|:---------------:|:----:|:-----:|\n| $1$   | $1000$            | $10^4$          |      | $500$ |\n| $2$   | $2000$            | $10^4$          |      | $500$ |\n| $3,4$ | $10^5$            | $10^6$          | A    | $5$   |\n| $5,6$ | $6 \\times 10^4$   | $6\\times 10^4$  | B    | $50$  |\n| $7$   | $6 \\times 10^4$   | $6 \\times 10^4$ | B    | $5$   |\n| $8$   | $10^5$            | $10^5$          | B    | $5$   |\n| $9$   | $7500$            | $5 \\times 10^4$ | C    | $500$ |\n| $10$  | $10^4$            | $5 \\times 10^4$ |      | $500$ |\n| $11$  | $1.5 \\times 10^4$ | $5 \\times 10^4$ |      | $500$ |\n| $12$  | $2 \\times 10^4$   | $5 \\times 10^4$ |      | $50$  |\n| $13$  | $2.5 \\times 10^4$ | $5 \\times 10^4$ |      | $5$   |\n| $14$  | $3 \\times 10^4$   | $10^5$          |      | $5$   |\n| $15$  | $6 \\times 10^4$   | $10^6$          | D    | $5$   |\n| $16$  | $6 \\times 10^4$   | $10^6$          |      | $5$   |\n| $17$  | $8 \\times 10^4$   | $10^6$          |      | $5$   |\n| $18$  | $10^5$            | $10^6$          |      | $5$   |\n| $19$  | $1.5 \\times 10^5$ | $10^6$          |      | $5$   |\n| $20$  | $2 \\times 10^5$   | $10^6$          |      | $1$   |\n\n\n特殊性质 A：保证 $\\forall i \\in [1, n - 1]$，编号为 $i + 1$ 的点的父节点为 $i$。  \n特殊性质 B：保证所有询问均满足 $u = 1$。  \n特殊性质 C：保证所有询问均满足 $d \\le 100$。  \n特殊性质 D：保证所有询问均满足 $d \\ge 1000$。", "locale": "zh-CN"}}}
{"pid": "P8534", "type": "P", "difficulty": 1, "samples": [["5\n1 0\n1 314159265\n6 100\n3 20000001\n5 1", "2\n6\n4\n5\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」比赤色更红的梦", "background": "这里是东之国的远离人类村落的山中。博丽神社，就存在于那样的边境。\n\n这座山，原本就没有人住，现在也是大部分人决不会踏足的地方。这里被人们称作幻想乡。\n\n-----\n\n一座洋馆，两次异变，揭开了幻想乡符卡战斗的序幕。\n\n这是 118 季的夏天，从红色的西洋馆中，无数的红雾从中喷发而出，幻想乡的天染成了绯红色。博丽的巫女博丽灵梦与西洋的魔法使雾雨魔理沙察觉这片妖雾后匆忙出发。迎接她们的，是第一次在符卡规则下的异变。伴随着巨大的阴阳玉从空中砸下，摧毁了整座红魔馆，红雾异变宣告收尾，这是昔日的二色莲花蝶与黑白魔法使的表演。\n\n但是这次，失去记忆的主角二人，遗忘了中途的种种事件，无论是那威严满满的吸血鬼，还是大图书馆中的那一串魔法阵。她们只知道，这是一次异变，急需她们解决。但是由于第一次异变的神秘性以及特殊性，她们希望你能告诉她们一共有多少个残机可以供她们挥霍。", "description": "《东方红魔乡》的游戏剧情共有六关，分别称为 $\\text{Stage 1}\\sim \\text{Stage 6}$。\n\n当分数达到（即大于等于）$1000$ 万，$2000$ 万，$4000$ 万，$6000$ 万，会分别地奖励主角一个残机（即一条命）。此外，在 $\\text{Stage 3}$ 和 $\\text{Stage 5}$ 的中途，会奖励主角一个残机。主角**一开始**有 $2$ 个残机。\n\n尽管灵梦和魔理沙二人失去了记忆，但是躲避弹幕的本能是不会被遗忘的，也就是说她们在游戏过程中不会消耗任何一个残机。现在主角**刚刚通关**了 $\\text{Stage }x$，主角的分数是 $s$，请问主角现在有多少个残机？", "inputFormat": "**本题含有多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 对于每组数据，输入一行两个整数 $x$ 和 $s$。", "outputFormat": "- 对于每组数据，输出一行一个整数，表示主角现在拥有的残机数量。", "hint": "### 样例解释\n\n- 对于第 $1$ 组数据，主角只通过了第一关，且得分零分。故只有初始时的两个残机。\n- 对于第 $2$ 组数据，主角通过了第一关，并且得到了非常多的分数，这足以让主角获得所有分数相关的残机奖励。答案为 $2$（初始时的残机）$+4$（得分奖励）$=6$ 个残机。\n- 对于第 $3$ 组数据，主角把游戏通关了，但是分数非常少。主角获得了初始的两个残机、$\\text{Stage 3}$ 中途的奖励残机和 $\\text{Stage 5}$ 中途的奖励残机共 $4$ 个。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{x\\le} & \\bm{s\\le} & \\bm{T\\le} & \\textbf{分值}\\\\\\hline\n1 & 1 & 0 & 1 & 5\\\\\\hline\n2 & 6 & 0 & 100 & 10 \\\\\\hline\n3 & 6 & 10^9 & 10^4 & 10 \\\\\\hline\n4 & 6 & 10^{18} & 10^4 & 75 \\\\\\hline\n\\end{array}$$\n\n对于全部数据，满足 $1 \\le T \\le 10^4$，$1 \\le x \\le6$，$0 \\le s \\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」比赤色更红的梦", "background": "这里是东之国的远离人类村落的山中。博丽神社，就存在于那样的边境。\n\n这座山，原本就没有人住，现在也是大部分人决不会踏足的地方。这里被人们称作幻想乡。\n\n-----\n\n一座洋馆，两次异变，揭开了幻想乡符卡战斗的序幕。\n\n这是 118 季的夏天，从红色的西洋馆中，无数的红雾从中喷发而出，幻想乡的天染成了绯红色。博丽的巫女博丽灵梦与西洋的魔法使雾雨魔理沙察觉这片妖雾后匆忙出发。迎接她们的，是第一次在符卡规则下的异变。伴随着巨大的阴阳玉从空中砸下，摧毁了整座红魔馆，红雾异变宣告收尾，这是昔日的二色莲花蝶与黑白魔法使的表演。\n\n但是这次，失去记忆的主角二人，遗忘了中途的种种事件，无论是那威严满满的吸血鬼，还是大图书馆中的那一串魔法阵。她们只知道，这是一次异变，急需她们解决。但是由于第一次异变的神秘性以及特殊性，她们希望你能告诉她们一共有多少个残机可以供她们挥霍。", "description": "《东方红魔乡》的游戏剧情共有六关，分别称为 $\\text{Stage 1}\\sim \\text{Stage 6}$。\n\n当分数达到（即大于等于）$1000$ 万，$2000$ 万，$4000$ 万，$6000$ 万，会分别地奖励主角一个残机（即一条命）。此外，在 $\\text{Stage 3}$ 和 $\\text{Stage 5}$ 的中途，会奖励主角一个残机。主角**一开始**有 $2$ 个残机。\n\n尽管灵梦和魔理沙二人失去了记忆，但是躲避弹幕的本能是不会被遗忘的，也就是说她们在游戏过程中不会消耗任何一个残机。现在主角**刚刚通关**了 $\\text{Stage }x$，主角的分数是 $s$，请问主角现在有多少个残机？", "inputFormat": "**本题含有多组数据。**\n\n- 第一行输入一个整数 $T$，表示数据组数。\n- 对于每组数据，输入一行两个整数 $x$ 和 $s$。", "outputFormat": "- 对于每组数据，输出一行一个整数，表示主角现在拥有的残机数量。", "hint": "### 样例解释\n\n- 对于第 $1$ 组数据，主角只通过了第一关，且得分零分。故只有初始时的两个残机。\n- 对于第 $2$ 组数据，主角通过了第一关，并且得到了非常多的分数，这足以让主角获得所有分数相关的残机奖励。答案为 $2$（初始时的残机）$+4$（得分奖励）$=6$ 个残机。\n- 对于第 $3$ 组数据，主角把游戏通关了，但是分数非常少。主角获得了初始的两个残机、$\\text{Stage 3}$ 中途的奖励残机和 $\\text{Stage 5}$ 中途的奖励残机共 $4$ 个。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{x\\le} & \\bm{s\\le} & \\bm{T\\le} & \\textbf{分值}\\\\\\hline\n1 & 1 & 0 & 1 & 5\\\\\\hline\n2 & 6 & 0 & 100 & 10 \\\\\\hline\n3 & 6 & 10^9 & 10^4 & 10 \\\\\\hline\n4 & 6 & 10^{18} & 10^4 & 75 \\\\\\hline\n\\end{array}$$\n\n对于全部数据，满足 $1 \\le T \\le 10^4$，$1 \\le x \\le6$，$0 \\le s \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8535", "type": "P", "difficulty": 2, "samples": [["5", "1"], ["13", "21"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」森罗结界", "background": "119 季 5 月，明明本应是樱花盛开的春天，幻想乡却依然下着大雪。异变的主谋西行寺幽幽子在古书上看到，只要使妖樱西行妖满开便会有什么人复活，便出于兴趣命令妖梦收集幻想乡中的春度，一手策划成了这场异变。在收集春度的过程中散落的能量在西行妖的影响下化为樱点，散落在幻想乡各处。这一异变被称之为“春雪异变”。\n\n出发前往解决异变的三位主角——博丽灵梦、雾雨魔理沙、十六夜咲夜怀着不同的目的，踏上了寻找异变主谋的征途。在这一过程中，她们发现了一个叫做“森罗结界”的东西。收集齐一定程度的樱点，就会立即开出森罗结界。开出森罗结界后可以短暂地屏蔽一切攻击，并且获得相应的增益。\n\n然而，也许是因为世界秩序的 bug，如果森罗结界开得过多，数值显示将会产生问题，原本应该是一个数值的森罗结界信息会被汉字所替代。为了解决这些怪问题，她们找到了你，希望你能帮她们解决这个问题。", "description": "### 简要题意\n\n给定汉字的字符画，输入你能使用的 $\\texttt{*}$ 的个数，要求输出一个**最大**的汉字数字（**可以不全部用完**），不考虑“千”、“百”等数量单位。\n\n### 原始题意\n\n森罗结界的信息显示系统可以看作一个宽度为 $7$，长度为无限大的矩形系统，在上面仅仅有两个字符 $\\texttt{.}$ 与 $\\texttt{*}$。\n\n由于主角组失去了记忆，她们在解决异变的时候开了过多的森罗结界，使得原本应该显示数字的位置变成了汉字。在信息显示系统中，每个汉字（仅包含零、一、二到九）都以点阵字体的形式呈现。\n\n显然，阅读汉字比阅读单纯的数字困难了许多。不过，信息显示系统告诉了主角们在显示系统上有 $n$ 个 $\\texttt{*}$。主角们希望能够知道运用**不超过** $n$ 个 $\\texttt{*}$ 的情况下，显示系统上能表示的最大数字是多少，来帮助她们解决异变。\n\n为了评测和阅读的方便，您只需输出对应的整数即可。\n\n---\n\n如下分别给出了字符画的图片形式，以及文本形式。同时在下发文件里我们准备了每个数字对应的字符画的文本形式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ocrxxti4.png)\n\n```plain\n.......  .......  .......  *******  .......  .......  .......  .......  ..*....  *******\n.......  .......  ..***..  *.*.*.*  *******  ...*...  ...*...  ..*.*..  ..*....  *.....*\n.......  ..***..  .......  *.*.*.*  ...*...  ...*...  ...*...  ..*.*..  *****..  *.....*\n.*****.  .......  .*****.  **...**  .******  .*****.  *******  ..*.*..  ..*.*..  *.....*\n.......  .......  .......  *.....*  ...*..*  ..*.*..  ...*...  .*...*.  ..*.*..  *.....*\n.......  .*****.  *******  *.....*  *******  .*...*.  ...*..*  *.....*  .*..*.*  *.....*\n.......  .......  .......  *******  .......  .......  ...****  .......  *...***  *******\n```", "inputFormat": "输入一个正整数 $n$，表示主角组拥有的 $\\texttt{*}$ 个数。", "outputFormat": "输出一个整数，表示最大能够拼出的数字。由于汉字不便输出，您只需输出汉字对应的整数。", "hint": "### 样例解释\n\n对于样例 $1$，显然只能拼出数字一，故输出 $1$ 即可。\n\n对于样例 $2$，可以拼出很多的数字如“一二”、“六”等，但是在这些数字中最大的数字是 $21$，且显然可以发现不存在更大的数字是可以被拼出的了。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{分值}\\\\\\hline\n1 & 10 & 5\\\\\\hline\n2 & 100 & 15 \\\\\\hline\n3 & 10^3 & 20 \\\\\\hline\n4 & 10^6 & 60 \\\\\\hline\n\\end{array}$$\n\n对于全部数据，保证 $5 \\leq n \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」森罗结界", "background": "119 季 5 月，明明本应是樱花盛开的春天，幻想乡却依然下着大雪。异变的主谋西行寺幽幽子在古书上看到，只要使妖樱西行妖满开便会有什么人复活，便出于兴趣命令妖梦收集幻想乡中的春度，一手策划成了这场异变。在收集春度的过程中散落的能量在西行妖的影响下化为樱点，散落在幻想乡各处。这一异变被称之为“春雪异变”。\n\n出发前往解决异变的三位主角——博丽灵梦、雾雨魔理沙、十六夜咲夜怀着不同的目的，踏上了寻找异变主谋的征途。在这一过程中，她们发现了一个叫做“森罗结界”的东西。收集齐一定程度的樱点，就会立即开出森罗结界。开出森罗结界后可以短暂地屏蔽一切攻击，并且获得相应的增益。\n\n然而，也许是因为世界秩序的 bug，如果森罗结界开得过多，数值显示将会产生问题，原本应该是一个数值的森罗结界信息会被汉字所替代。为了解决这些怪问题，她们找到了你，希望你能帮她们解决这个问题。", "description": "### 简要题意\n\n给定汉字的字符画，输入你能使用的 $\\texttt{*}$ 的个数，要求输出一个**最大**的汉字数字（**可以不全部用完**），不考虑“千”、“百”等数量单位。\n\n### 原始题意\n\n森罗结界的信息显示系统可以看作一个宽度为 $7$，长度为无限大的矩形系统，在上面仅仅有两个字符 $\\texttt{.}$ 与 $\\texttt{*}$。\n\n由于主角组失去了记忆，她们在解决异变的时候开了过多的森罗结界，使得原本应该显示数字的位置变成了汉字。在信息显示系统中，每个汉字（仅包含零、一、二到九）都以点阵字体的形式呈现。\n\n显然，阅读汉字比阅读单纯的数字困难了许多。不过，信息显示系统告诉了主角们在显示系统上有 $n$ 个 $\\texttt{*}$。主角们希望能够知道运用**不超过** $n$ 个 $\\texttt{*}$ 的情况下，显示系统上能表示的最大数字是多少，来帮助她们解决异变。\n\n为了评测和阅读的方便，您只需输出对应的整数即可。\n\n---\n\n如下分别给出了字符画的图片形式，以及文本形式。同时在下发文件里我们准备了每个数字对应的字符画的文本形式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ocrxxti4.png)\n\n```plain\n.......  .......  .......  *******  .......  .......  .......  .......  ..*....  *******\n.......  .......  ..***..  *.*.*.*  *******  ...*...  ...*...  ..*.*..  ..*....  *.....*\n.......  ..***..  .......  *.*.*.*  ...*...  ...*...  ...*...  ..*.*..  *****..  *.....*\n.*****.  .......  .*****.  **...**  .******  .*****.  *******  ..*.*..  ..*.*..  *.....*\n.......  .......  .......  *.....*  ...*..*  ..*.*..  ...*...  .*...*.  ..*.*..  *.....*\n.......  .*****.  *******  *.....*  *******  .*...*.  ...*..*  *.....*  .*..*.*  *.....*\n.......  .......  .......  *******  .......  .......  ...****  .......  *...***  *******\n```", "inputFormat": "输入一个正整数 $n$，表示主角组拥有的 $\\texttt{*}$ 个数。", "outputFormat": "输出一个整数，表示最大能够拼出的数字。由于汉字不便输出，您只需输出汉字对应的整数。", "hint": "### 样例解释\n\n对于样例 $1$，显然只能拼出数字一，故输出 $1$ 即可。\n\n对于样例 $2$，可以拼出很多的数字如“一二”、“六”等，但是在这些数字中最大的数字是 $21$，且显然可以发现不存在更大的数字是可以被拼出的了。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{分值}\\\\\\hline\n1 & 10 & 5\\\\\\hline\n2 & 100 & 15 \\\\\\hline\n3 & 10^3 & 20 \\\\\\hline\n4 & 10^6 & 60 \\\\\\hline\n\\end{array}$$\n\n对于全部数据，保证 $5 \\leq n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8536", "type": "P", "difficulty": 2, "samples": [["3\n3\n111\n3\n101\n4\n0101", "1 2 3\n2 1 3\n1 3 2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-2」幻胧月睨", "background": "**Problem Number:** $\\textit{39}$\n\n**背景与题目无关，选手可以直接看下面的「简要题意」。**\n\n那是在竹取物语之后的故事了，幻想乡距离与现实隔绝也已经过去了百年时光。\n\n地上人向月球发起了侵略战争之后，一只名叫**铃仙**的月兔舍弃了同伴，死里逃生，逃到了在幻想乡内的永远亭，来到了辉夜与永琳的身边，生活得安稳而舒适。\n\n又过了数十年，铃仙接收到了来自月球的使唤，被要求强制返回月球。辉夜与永琳商量了下，决定不将铃仙交还予月球。但为了避免造成麻烦，辉夜与永琳决定将满月消失在地上，只留下一轮虚假的月亮。\n\n-----\n\n为了方便调查异变，八云紫运用自己的能力，将整个幻想乡变成了永夜。\n\n被穿梭回异变发生当时的四组主角，共八人。除了依然留有记忆，可以来回穿梭在虚与实的境界的八云紫之外，其他的人缺乏了记忆，重新开始踏上夺回幻想乡的满月的征途。\n\n在慧音的指引之下，她们来到了迷途竹林，在她们的面前，是一只名叫铃仙的月兔。", "description": "### 简要题意\n\n给定一个长度为 $n$ 的 01 串 $b$，要求构造一个 $n$ 阶排列 $a$，满足，对于 $a_i(2\\le i\\le n)$，记 $m_i=\\max_{j=1}^{i-1}\\{a_j\\}$，则：\n  - 若 $b_i=1$，则 $a_i>m_i$;\n  - 否则 $a_i<m_i$。\n\n可以证明，总存在一个数列 $a$ 满足以上条件。\n\n**如果有多组解，输出任意一种。**\n\n同时注意到 $b_1$ 的取值是任意的，对数列 $a$ 没有影响。\n\n### 原始题意\n\n铃仙拥有操纵狂气程度的能力，换而言之，就是操纵物体的波长、振幅以及相位。这种能力为主角制造了种种障碍——例如操纵光波，会让弹幕虚虚实实，甚至会出现虚假的自我，对躲避弹幕造成极大的干扰。\n\n以符卡「幻胧月睨」为例。「幻胧月睨」中一共有 $n$ 个弹幕，每个弹幕都会有一个相位，相位非 $0$ 即 $1$。这些弹幕的相位会构成一个长度为 $n$ 的数列 $\\{b_i\\}$。\n\n铃仙会操纵这些弹幕的相位，将其变得千奇百怪。具体而言，被操纵了之后的弹幕的相位是一个长度为 $n$ 的**排列** $\\{a_i\\}$，即 $1 \\sim n$ 的数字都会**不重不漏**地出现在这个序列之中。\n\n为了加大主角躲避弹幕的难度，铃仙会设置一个阈值。对于每一个元素 $a_i$，阈值是其**前缀**的**最大**值，即 $a_1,a_2,\\dots,a_{i-1}$ 中的最大值。若原来的第 $i$ 个弹幕的相位为 $1$，则被操纵后的弹幕的相位要**大于**这个阈值，否则被操纵后的弹幕的相位要**小于**这个阈值。\n\n显然的是，根据铃仙的操纵规则，无论原本的弹幕的相位如何，都是存在可能的操纵方案的。由于主角们失去了记忆，而找回月亮的时间已经所剩不多了，而且弹幕战对时间的把控要求极高。她们找到了你，希望你能够对铃仙原本的弹幕相位，给出**任意一种**操作后的弹幕相位，来为她们的闪避弹幕进行准备。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，意义如题述。\n- 第二行一个长度为 $n$ 的 01 串 $b$。", "outputFormat": "对于每组数据，输出一行 $n$ 个整数，即你构造的数列 $a$。\n\n**如果有多组解，输出任意一种。**", "hint": "### 样例解释\n\n- 对于数据 $1$，显然 $a_2>1,a_3>2$。\n- 对于数据 $2$，显然 $a_2<2,a_3>2$。\n- 对于数据 $3$，显然 $a_2>1,a_3<3,a_4>3$。\\\n  注意到 $a=\\{2,3,1,4\\}$ 同样满足要求。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{Subtask 依赖} & \\textbf{分值}\\\\\\hline\n1 & 10 & - & - & 5\\\\\\hline\n2 & 10^5 & \\textbf{A} & - & 5 \\\\\\hline\n3 & 10^5 & \\textbf{B} & - & 20 \\\\\\hline\n4 & 10^5 & - & 1,2,3 &70 \\\\\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $b_i$ 都相等。\n- **特殊性质** $\\textbf{B}$：存在整数 $p\\in[2,n]$，使得对于 $1\\le i<p$，有 $b_i=1$；对于 $n\\ge i\\ge p$，有 $b_i=0$。\n\n对于全部数据，满足 $1\\le T\\le 10^4$，$1\\le n\\le 10^5$，$\\forall i\\in[1,n],b_i\\in\\{0,1\\}$。\n\n保证单个测试点内 $\\sum n\\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」幻胧月睨", "background": "**Problem Number:** $\\textit{39}$\n\n**背景与题目无关，选手可以直接看下面的「简要题意」。**\n\n那是在竹取物语之后的故事了，幻想乡距离与现实隔绝也已经过去了百年时光。\n\n地上人向月球发起了侵略战争之后，一只名叫**铃仙**的月兔舍弃了同伴，死里逃生，逃到了在幻想乡内的永远亭，来到了辉夜与永琳的身边，生活得安稳而舒适。\n\n又过了数十年，铃仙接收到了来自月球的使唤，被要求强制返回月球。辉夜与永琳商量了下，决定不将铃仙交还予月球。但为了避免造成麻烦，辉夜与永琳决定将满月消失在地上，只留下一轮虚假的月亮。\n\n-----\n\n为了方便调查异变，八云紫运用自己的能力，将整个幻想乡变成了永夜。\n\n被穿梭回异变发生当时的四组主角，共八人。除了依然留有记忆，可以来回穿梭在虚与实的境界的八云紫之外，其他的人缺乏了记忆，重新开始踏上夺回幻想乡的满月的征途。\n\n在慧音的指引之下，她们来到了迷途竹林，在她们的面前，是一只名叫铃仙的月兔。", "description": "### 简要题意\n\n给定一个长度为 $n$ 的 01 串 $b$，要求构造一个 $n$ 阶排列 $a$，满足，对于 $a_i(2\\le i\\le n)$，记 $m_i=\\max_{j=1}^{i-1}\\{a_j\\}$，则：\n  - 若 $b_i=1$，则 $a_i>m_i$;\n  - 否则 $a_i<m_i$。\n\n可以证明，总存在一个数列 $a$ 满足以上条件。\n\n**如果有多组解，输出任意一种。**\n\n同时注意到 $b_1$ 的取值是任意的，对数列 $a$ 没有影响。\n\n### 原始题意\n\n铃仙拥有操纵狂气程度的能力，换而言之，就是操纵物体的波长、振幅以及相位。这种能力为主角制造了种种障碍——例如操纵光波，会让弹幕虚虚实实，甚至会出现虚假的自我，对躲避弹幕造成极大的干扰。\n\n以符卡「幻胧月睨」为例。「幻胧月睨」中一共有 $n$ 个弹幕，每个弹幕都会有一个相位，相位非 $0$ 即 $1$。这些弹幕的相位会构成一个长度为 $n$ 的数列 $\\{b_i\\}$。\n\n铃仙会操纵这些弹幕的相位，将其变得千奇百怪。具体而言，被操纵了之后的弹幕的相位是一个长度为 $n$ 的**排列** $\\{a_i\\}$，即 $1 \\sim n$ 的数字都会**不重不漏**地出现在这个序列之中。\n\n为了加大主角躲避弹幕的难度，铃仙会设置一个阈值。对于每一个元素 $a_i$，阈值是其**前缀**的**最大**值，即 $a_1,a_2,\\dots,a_{i-1}$ 中的最大值。若原来的第 $i$ 个弹幕的相位为 $1$，则被操纵后的弹幕的相位要**大于**这个阈值，否则被操纵后的弹幕的相位要**小于**这个阈值。\n\n显然的是，根据铃仙的操纵规则，无论原本的弹幕的相位如何，都是存在可能的操纵方案的。由于主角们失去了记忆，而找回月亮的时间已经所剩不多了，而且弹幕战对时间的把控要求极高。她们找到了你，希望你能够对铃仙原本的弹幕相位，给出**任意一种**操作后的弹幕相位，来为她们的闪避弹幕进行准备。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，意义如题述。\n- 第二行一个长度为 $n$ 的 01 串 $b$。", "outputFormat": "对于每组数据，输出一行 $n$ 个整数，即你构造的数列 $a$。\n\n**如果有多组解，输出任意一种。**", "hint": "### 样例解释\n\n- 对于数据 $1$，显然 $a_2>1,a_3>2$。\n- 对于数据 $2$，显然 $a_2<2,a_3>2$。\n- 对于数据 $3$，显然 $a_2>1,a_3<3,a_4>3$。\\\n  注意到 $a=\\{2,3,1,4\\}$ 同样满足要求。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{Subtask 依赖} & \\textbf{分值}\\\\\\hline\n1 & 10 & - & - & 5\\\\\\hline\n2 & 10^5 & \\textbf{A} & - & 5 \\\\\\hline\n3 & 10^5 & \\textbf{B} & - & 20 \\\\\\hline\n4 & 10^5 & - & 1,2,3 &70 \\\\\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $b_i$ 都相等。\n- **特殊性质** $\\textbf{B}$：存在整数 $p\\in[2,n]$，使得对于 $1\\le i<p$，有 $b_i=1$；对于 $n\\ge i\\ge p$，有 $b_i=0$。\n\n对于全部数据，满足 $1\\le T\\le 10^4$，$1\\le n\\le 10^5$，$\\forall i\\in[1,n],b_i\\in\\{0,1\\}$。\n\n保证单个测试点内 $\\sum n\\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8537", "type": "P", "difficulty": 2, "samples": [["3\n1 2 3\n3 2 1", "1"], ["2\n3 1\n1 2", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」花如幻想一般", "background": "冬的白色被春日的阳光所点缀，幻想乡完全取回了生机的颜色。但，樱花，向日葵，野菊花，桔梗……明明还是春天，全年的花却全都盛开了。\n\n六十年前（注：现实中的 1945 年）的大战，炮火声中、枪林弹雨中，无数的无辜的亡魂，在六十年后纷纷落于幻想之中，寄托于每一朵花上。\n\n每一朵花寄托着每一朵亡魂的灵魂本质。向日葵寄宿着开朗的人的灵魂。彼岸花寄宿了没有朋友的寂寞灵魂，紫色的樱树下满是持有罪恶的幽灵。由于是从有德的幽灵开始按顺序送往彼岸，留到最后的都将是樱花。\n\n外面的人类所看到的虚幻的彼岸，正回归于幻想的此岸。", "description": "### 简要题意\n\n有一个长度为 $n$ 的序列 $a$。可以进行两种操作：\n- 将整个序列翻转；\n- 将序列中的某个数加上某个**整数**。\n\n问：至少要用多少次操作可以将序列 $a$ 转化为序列 $b$。\n\n### 原始题意\n\n参与解决花之异变的十余位主角都并未年满 60 岁，并没有经历过上一次的花之异变。在万花丛中解决异变的紧迫性逐渐被消弭，取而代之的是用花朵来进行游戏。\n\n灵梦将 $n$ 个花朵排成了一排，第 $i$ 朵花都有其对应的美丽程度 $a_i$。而一旁的魔理沙作为一位魔法使，拥有两种能力。她可以进行若干次操作，每次操作可以**使得这 $\\bm n$ 朵花的位置完全翻转**，或者可以**将某一朵花的美丽程度加上或减去一个整数**。\n\n灵梦认为，如果能用魔理沙的操作，使得最后花朵的美丽程度可以变成序列 $b_i$，那么将会是很好的。为了解决异变顺利，魔理沙希望自己的操作次数尽可能少。那么请问魔理沙为了满足灵梦的愿望至少需要操作几次？\n\n---\n\n幻想乡的花儿渐落，新绿开始步向美丽的季节。经过六十年还不会被遗忘的记忆，可能是没有的吧。", "inputFormat": "- 第一行一个整数 $n$。  \n- 第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n- 第三行 $n$ 个整数 $b_1,b_2,\\cdots,b_n$。", "outputFormat": "- 输出一行一个整数，代表至少需要几次操作。", "hint": "### 样例解释 \\#1\n\n$$\n\\begin{array}{cccl}\n\\color{red}1&\\color{red}2&\\color{red}3&\\downarrow\\text{reverse}\\\\\n3&2&1&\n\\end{array}\n$$\n\n### 样例解释 \\#2\n\n$$\n\\begin{array}{ccl}\n\\color{red}3&\\color{red}1&\\downarrow\\text{reverse}\\\\\n1&\\color{red}3&\\downarrow\\text{add }-1\\\\\n1&2&\n\\end{array}\n$$\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 10 & - & 10\\\\\\hline\n2 & 10^3 & - & 30\\\\\\hline\n3 & 5\\times 10^5 & \\text{A} & 5 \\\\\\hline\n4 & 5\\times 10^5 & - & 55 \\\\\\hline\n\\end{array}$$\n\n- 特殊性质 $\\textbf{A}$：保证存在一种花费最小的方案，不需要执行第二种操作。\n\n对于全部数据，满足 $1 \\leq n \\leq 5\\times10^5$，\n$1 \\leq a_i,b_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」花如幻想一般", "background": "冬的白色被春日的阳光所点缀，幻想乡完全取回了生机的颜色。但，樱花，向日葵，野菊花，桔梗……明明还是春天，全年的花却全都盛开了。\n\n六十年前（注：现实中的 1945 年）的大战，炮火声中、枪林弹雨中，无数的无辜的亡魂，在六十年后纷纷落于幻想之中，寄托于每一朵花上。\n\n每一朵花寄托着每一朵亡魂的灵魂本质。向日葵寄宿着开朗的人的灵魂。彼岸花寄宿了没有朋友的寂寞灵魂，紫色的樱树下满是持有罪恶的幽灵。由于是从有德的幽灵开始按顺序送往彼岸，留到最后的都将是樱花。\n\n外面的人类所看到的虚幻的彼岸，正回归于幻想的此岸。", "description": "### 简要题意\n\n有一个长度为 $n$ 的序列 $a$。可以进行两种操作：\n- 将整个序列翻转；\n- 将序列中的某个数加上某个**整数**。\n\n问：至少要用多少次操作可以将序列 $a$ 转化为序列 $b$。\n\n### 原始题意\n\n参与解决花之异变的十余位主角都并未年满 60 岁，并没有经历过上一次的花之异变。在万花丛中解决异变的紧迫性逐渐被消弭，取而代之的是用花朵来进行游戏。\n\n灵梦将 $n$ 个花朵排成了一排，第 $i$ 朵花都有其对应的美丽程度 $a_i$。而一旁的魔理沙作为一位魔法使，拥有两种能力。她可以进行若干次操作，每次操作可以**使得这 $\\bm n$ 朵花的位置完全翻转**，或者可以**将某一朵花的美丽程度加上或减去一个整数**。\n\n灵梦认为，如果能用魔理沙的操作，使得最后花朵的美丽程度可以变成序列 $b_i$，那么将会是很好的。为了解决异变顺利，魔理沙希望自己的操作次数尽可能少。那么请问魔理沙为了满足灵梦的愿望至少需要操作几次？\n\n---\n\n幻想乡的花儿渐落，新绿开始步向美丽的季节。经过六十年还不会被遗忘的记忆，可能是没有的吧。", "inputFormat": "- 第一行一个整数 $n$。  \n- 第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n- 第三行 $n$ 个整数 $b_1,b_2,\\cdots,b_n$。", "outputFormat": "- 输出一行一个整数，代表至少需要几次操作。", "hint": "### 样例解释 \\#1\n\n$$\n\\begin{array}{cccl}\n\\color{red}1&\\color{red}2&\\color{red}3&\\downarrow\\text{reverse}\\\\\n3&2&1&\n\\end{array}\n$$\n\n### 样例解释 \\#2\n\n$$\n\\begin{array}{ccl}\n\\color{red}3&\\color{red}1&\\downarrow\\text{reverse}\\\\\n1&\\color{red}3&\\downarrow\\text{add }-1\\\\\n1&2&\n\\end{array}\n$$\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 10 & - & 10\\\\\\hline\n2 & 10^3 & - & 30\\\\\\hline\n3 & 5\\times 10^5 & \\text{A} & 5 \\\\\\hline\n4 & 5\\times 10^5 & - & 55 \\\\\\hline\n\\end{array}$$\n\n- 特殊性质 $\\textbf{A}$：保证存在一种花费最小的方案，不需要执行第二种操作。\n\n对于全部数据，满足 $1 \\leq n \\leq 5\\times10^5$，\n$1 \\leq a_i,b_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8538", "type": "P", "difficulty": 3, "samples": [["6\n3 1 3 2 1 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」灵山之上神风起", "background": "在天狗记者射命丸文的指（放）引（水）之下，灵梦一行人找到了山中的神社。\n\n“在妖怪之山上还真的存在其他的神社啊。”灵梦感慨道。她们看到了由树木建造的神社正殿，以及正殿前的参拜道上的一排御柱，而更远处则是一片湖——风神之湖。湖面非常开阔，波光粼粼，一碧万顷，远处似乎有群山环抱，让人心旷神怡。\n\n到达神社之时已经是傍晚了。正当灵梦和魔理沙感慨之时，见到在她们面前有一位白衣蓝裙的少女，东风谷早苗，拥有着引发奇迹程度的能力。为了找到守矢神社中的两位神灵，灵梦与魔理沙，向东风谷早苗产生了激烈的交战。\n\n“那就在现人神的力量洗礼中思索吧！这召唤奇迹的神明之力！”", "description": "### 简要题意\n\n给定一个长度为 $n$ 的正整数序列 $a$ 满足对于所有 $i\\in [1,n]$ 有 $a_i \\in \\{1,2,3\\}$。\n\n现在通过该序列构造一张含 $n$ 个节点，节点编号为 $1$ 到 $n$ 的图：对于数 $i$，如果 $a_i=1$，那么什么都不做；如果 $a_i=2$，那么向所有比 $i$ 小的数的节点连无向边；如果 $a_i=3$，那么向所有比 $i$ 大的数的节点连无向边。求出该图的最大独立集的大小。\n\n最大独立集，指的是原图中一个点数尽量多的点集，这些点在原图中两两之间没有边**直接**相连。\n\n### 原始题意\n\n然而，东风谷早苗（后称早苗）的弹幕密度相当之高，使人应接不暇，灵梦只得想个方法去减少她需要关注的弹幕数量。\n\n数个回合过后，她发现，早苗每次释放弹幕只会释放出 $n$ 个弹幕，分别编号为 $1,2,\\dots,n$，而她每释放一个弹幕，都会对应着产生一次神力波动。因而她的神力波动可以抽象为一个长度为 $n$ 的正整数数列 $\\{a_n\\}$。由于她的资历尚浅，只会使用三种神力，分别用 $1,2,3$ 表示，即 $\\forall i \\in [1,n]$，$a_i \\in \\{1,2,3\\}$。\n\n她发现，早苗的三种神力作用各不相同，具体而言如下：\n\n- 当 $a_i=1$ 时，她不会做任何事情。\n- 当 $a_i=2$ 时，早苗会让第 $i$ 个弹幕向所有弹幕编号**小于** $i$ 的弹幕建立神力输送通道。\n- 当 $a_i=3$ 时，早苗会让第 $i$ 个弹幕向所有弹幕编号**大于** $i$ 的弹幕建立神力输送通道。\n\n接着，在各种神力的交互配合之下，密集的弹幕将展开于灵梦的眼前。而一旁的魔理沙发现，若是从这些弹幕中挑选出**尽可能多的**一群弹幕，使得每个弹幕之间不存在直接相连的神力输送通道，那么这群弹幕会产生【引发奇迹程度的能力】，是不必关注的。\n\n由于【引发奇迹程度的能力】只能被触发**一次**，灵梦和魔理沙想要知道，**最多**有多少个弹幕是不必关注的。她们找到了你，希望你能帮她解答。", "inputFormat": "- 第一行，输入一个正整数 $n$，表示弹幕总数。\n- 第二行，输入 $n$ 个正整数表示 $a_i$，具体含义见题目描述。", "outputFormat": "- 共一行，输出一个正整数，表示**最多**有多少个弹幕是不必关注的。", "hint": "### 样例解释\n\n根据题意显然可以构造出如下的图。其中 $a_i=2$ 的用蓝色边表示，$a_i=3$ 的用红色边表示。\n\n显然选取第 $2,3$ 个弹幕（已用绿色填图）是最多的情况。实际上对于这个样例，选取弹幕的方案不止一种，但是不存在更多的情况了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/99a854cu.png)\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 10 & - & 20\\\\\\hline\n2 & 10^5 & \\text{A} & 10\\\\\\hline\n3 & 10^5 & \\text{B} & 30 \\\\\\hline\n4 & 10^5 & - & 40 \\\\\\hline\n\\end{array}$$\n\n- 特殊性质 $\\text{A}$：所有的 $a_i=1$；\n- 特殊性质 $\\text{B}$：所有的 $a_i$ 不是 $1$ 就是 $2$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$a_i \\in \\{1,2,3\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」灵山之上神风起", "background": "在天狗记者射命丸文的指（放）引（水）之下，灵梦一行人找到了山中的神社。\n\n“在妖怪之山上还真的存在其他的神社啊。”灵梦感慨道。她们看到了由树木建造的神社正殿，以及正殿前的参拜道上的一排御柱，而更远处则是一片湖——风神之湖。湖面非常开阔，波光粼粼，一碧万顷，远处似乎有群山环抱，让人心旷神怡。\n\n到达神社之时已经是傍晚了。正当灵梦和魔理沙感慨之时，见到在她们面前有一位白衣蓝裙的少女，东风谷早苗，拥有着引发奇迹程度的能力。为了找到守矢神社中的两位神灵，灵梦与魔理沙，向东风谷早苗产生了激烈的交战。\n\n“那就在现人神的力量洗礼中思索吧！这召唤奇迹的神明之力！”", "description": "### 简要题意\n\n给定一个长度为 $n$ 的正整数序列 $a$ 满足对于所有 $i\\in [1,n]$ 有 $a_i \\in \\{1,2,3\\}$。\n\n现在通过该序列构造一张含 $n$ 个节点，节点编号为 $1$ 到 $n$ 的图：对于数 $i$，如果 $a_i=1$，那么什么都不做；如果 $a_i=2$，那么向所有比 $i$ 小的数的节点连无向边；如果 $a_i=3$，那么向所有比 $i$ 大的数的节点连无向边。求出该图的最大独立集的大小。\n\n最大独立集，指的是原图中一个点数尽量多的点集，这些点在原图中两两之间没有边**直接**相连。\n\n### 原始题意\n\n然而，东风谷早苗（后称早苗）的弹幕密度相当之高，使人应接不暇，灵梦只得想个方法去减少她需要关注的弹幕数量。\n\n数个回合过后，她发现，早苗每次释放弹幕只会释放出 $n$ 个弹幕，分别编号为 $1,2,\\dots,n$，而她每释放一个弹幕，都会对应着产生一次神力波动。因而她的神力波动可以抽象为一个长度为 $n$ 的正整数数列 $\\{a_n\\}$。由于她的资历尚浅，只会使用三种神力，分别用 $1,2,3$ 表示，即 $\\forall i \\in [1,n]$，$a_i \\in \\{1,2,3\\}$。\n\n她发现，早苗的三种神力作用各不相同，具体而言如下：\n\n- 当 $a_i=1$ 时，她不会做任何事情。\n- 当 $a_i=2$ 时，早苗会让第 $i$ 个弹幕向所有弹幕编号**小于** $i$ 的弹幕建立神力输送通道。\n- 当 $a_i=3$ 时，早苗会让第 $i$ 个弹幕向所有弹幕编号**大于** $i$ 的弹幕建立神力输送通道。\n\n接着，在各种神力的交互配合之下，密集的弹幕将展开于灵梦的眼前。而一旁的魔理沙发现，若是从这些弹幕中挑选出**尽可能多的**一群弹幕，使得每个弹幕之间不存在直接相连的神力输送通道，那么这群弹幕会产生【引发奇迹程度的能力】，是不必关注的。\n\n由于【引发奇迹程度的能力】只能被触发**一次**，灵梦和魔理沙想要知道，**最多**有多少个弹幕是不必关注的。她们找到了你，希望你能帮她解答。", "inputFormat": "- 第一行，输入一个正整数 $n$，表示弹幕总数。\n- 第二行，输入 $n$ 个正整数表示 $a_i$，具体含义见题目描述。", "outputFormat": "- 共一行，输出一个正整数，表示**最多**有多少个弹幕是不必关注的。", "hint": "### 样例解释\n\n根据题意显然可以构造出如下的图。其中 $a_i=2$ 的用蓝色边表示，$a_i=3$ 的用红色边表示。\n\n显然选取第 $2,3$ 个弹幕（已用绿色填图）是最多的情况。实际上对于这个样例，选取弹幕的方案不止一种，但是不存在更多的情况了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/99a854cu.png)\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 10 & - & 20\\\\\\hline\n2 & 10^5 & \\text{A} & 10\\\\\\hline\n3 & 10^5 & \\text{B} & 30 \\\\\\hline\n4 & 10^5 & - & 40 \\\\\\hline\n\\end{array}$$\n\n- 特殊性质 $\\text{A}$：所有的 $a_i=1$；\n- 特殊性质 $\\text{B}$：所有的 $a_i$ 不是 $1$ 就是 $2$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$a_i \\in \\{1,2,3\\}$。", "locale": "zh-CN"}}}
{"pid": "P8539", "type": "P", "difficulty": 4, "samples": [["7 2 3\n1 4 1 5 4 1 1\n3 3\n6 4", "7 7"], ["10 10 9\n14 91 84 13 97 92 23 64 31 10 \n5 2\n5 5\n9 1\n2 6\n9 1\n5 4\n3 5\n2 8\n8 2\n5 4\n", "245 1177\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "线段树", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」来自地上的支援", "background": "波光粼粼的山顶湖与庄严神圣的神社之下，是一座复合型活火山。  \n沿幻想风穴而下，便能到达火山之下，废弃已久的地狱原址。   \n>在旧地狱中，有一座大都市。那里是旧地狱还是地狱的时候在那工作的众鬼们居住的地方，只有那里亡者们是无法踏入去的。后来地狱体制改革，机构搬离了这个地方。  \n因为这个缘故这块地狱变成了废墟，但却有一部分看上了那里的妖怪擅作主张占领了那里，于是就成了如今的旧地狱了。\n这里比地上更没有秩序可言。悍匪恶霸，特别是惹人类讨厌的家伙都喜欢搬到这边定居下来。\n\n自旧地狱喷泻而出的间歇泉，给妖怪之山带来了优良的温泉，也喷出了大量的怨灵。\n\n为了解决这次异变，乐园的巫女和普通的魔法使结伴而行，在来自地上的支援下，自幻想风穴直冲地底。\n\n先后结（bao）识（da）了黑暗洞窟中的明亮之网、地壳下的嫉妒心、人们所谈论的怪力乱神后，二人来到了遗址中心的洋馆，地灵殿。\n\n受这里主人的指引，二人来到了位于深处的间歇泉地下中心。", "description": "### 简要题意\n给定正整数 $n$、$v$ 和长度为 $n$ 的数组 $\\{A_i\\}$。\n\n有一个长度为 $n$ 的数组 $B$，初始值与 $A$ 相同。 \n执行 $n$ 次操作，第 $i$ 次操作在 $[1,i]$ 中按如下规则选取一个正整数 $j$，然后把 $B_j$ 变成 $B_j+v$：\n- 选取 $B_j$ 最大的 $j$。\n- $B_j$ 相同时选择 $A_j$ 最大的 $j$。\n- $A_j,B_j$ 均相同，选择较小的 $j$。\n\n我们称这是选中了一次 $j$。\n\n有 $m$ 次询问，每次询问给定 $x_i,k_i$。表示求最小的 $s$，使得**若**将 $A_{x_i}$ 的初始值改为 $s$（注意此时 $B_{x_i}$ 的初始值也会跟着改变），$x_i$ 至少被选中 $k_i$ 次，或报告不存在（**结果为** $0$）。请注意，$s$ 不存在最小值时也是报告不存在（**结果为** $0$）。\n\n询问之间互相独立，也就是每次询问不会对 $A_{x_i}$ 和 $B_{x_i}$ 产生实质性更改。\n\n### 原始题意\n\n到达控制中心之后，主角组和灵乌路空进行了激烈的狗斗大赛。负责技术维护的河童需要接受荷取来自地上指挥部的指令，保障生产安全。\n\n具体地，有 $n$ 个核反应机组依次排开，第 $i$ 个机组的活动强度为 $A_i$。为了维护平衡，控制系统依次操作 $n$ 次，第 $i$ 次操作会在前 $i$ 个机组中找到一个**当前活动度最高的**机组，进行一次调节平衡操作，并将其活动度增加 $v$。倘若有多个机组活动度最高，就应当选择初始活动度**最大**的，若还是无法比较，则取编号最小。\n\n为了在自动控制系统的基础上调节平衡，荷取会发出 $m$ 条指令，形如她每次会给出两个整数 $x_i,k_i$，表示她会修改第 $x_i$ 个机组的初始活动度。她希望通过修改（必须改成一个**非负整数** $s$）后，$x_i$ 号机组至少被平衡 $k_i$ 次。如果无论如何都无法达到要求，那么结果就是 $0$；否则请求出满足条件的**最小的** $s$。", "inputFormat": "- 第一行有三个整数 $n, m, v$。\n- 接下来一行，有 $n$ 个整数，描述 $a_i$。\n- 接下来 $m$ 行，每行有两个整数 $x_i,k_i$，描述一次询问。", "outputFormat": "- 一行，输出两个整数，表示所有结果的**异或和**与**加法和**。", "hint": "### 样例 1 解释\n\n对于第一次询问，我们将 $A_3$ 修改为 $7$。\n\n- 第一次操作选择了位置 $1$，于是 $B_1$ 变为 $4$。\n- 第二次操作选择了位置 $2$，于是 $B_2$ 变为 $7$。虽然操作前 $B_1=B_2$，但是 $A_2>A_1$，因此选择位置 $2$。\n- 第三次操作选择了位置 $3$，于是 $B_3$ 变为 $10$。\n- 第四次操作选择了位置 $3$，于是 $B_3$ 变为 $13$。\n- 第五次操作选择了位置 $3$，于是 $B_3$ 变为 $16$。\n- 第六次操作选择了位置 $3$，于是 $B_3$ 变为 $19$。\n- 第七次操作选择了位置 $3$，于是 $B_3$ 变为 $22$。\n\n于是位置 $3$ 一共被选择了 $5$ 次，满足题意。可以证明，如果把 $A_3$ 的初始值设为 $6$，无法达成要求。于是该询问结果为 $7$。\n\n对于第二个询问，容易发现不可能有 $4$ 次以上操作选择位置 $6$。因此该询问结果为 $0$。\n\n$7\\oplus 0=7$，$7+0=7$，因此输出 $7,7$。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,m\\le} & \\bm {a_i\\le } & \\bm{v\\le} & \\textbf{分值} \\cr\\hline\n1 & 10 & 100 & 10 & 10 \\cr\\hline\n2 & 100 & 5\\times 10^3 & 50 & 20 \\cr\\hline\n3 & 10^3 & 10^9 & 100 & 10 \\cr\\hline\n4 & 10^5 & 10^9 & 100 & 25 \\cr\\hline\n5 & 2\\times 10^6 & 10^9 & 100 & 35 \\cr\\hline\n\\end{array}$$\n\n对于全部数据，满足 $1 \\le n,m \\le 2\\times 10^6$，$1 \\le v \\le 100$，$1 \\le a_i \\le 10 ^ 9$，$1 \\le x,k \\le n$。\n\n**本题 IO 量较大，请选择合适的输入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」来自地上的支援", "background": "波光粼粼的山顶湖与庄严神圣的神社之下，是一座复合型活火山。  \n沿幻想风穴而下，便能到达火山之下，废弃已久的地狱原址。   \n>在旧地狱中，有一座大都市。那里是旧地狱还是地狱的时候在那工作的众鬼们居住的地方，只有那里亡者们是无法踏入去的。后来地狱体制改革，机构搬离了这个地方。  \n因为这个缘故这块地狱变成了废墟，但却有一部分看上了那里的妖怪擅作主张占领了那里，于是就成了如今的旧地狱了。\n这里比地上更没有秩序可言。悍匪恶霸，特别是惹人类讨厌的家伙都喜欢搬到这边定居下来。\n\n自旧地狱喷泻而出的间歇泉，给妖怪之山带来了优良的温泉，也喷出了大量的怨灵。\n\n为了解决这次异变，乐园的巫女和普通的魔法使结伴而行，在来自地上的支援下，自幻想风穴直冲地底。\n\n先后结（bao）识（da）了黑暗洞窟中的明亮之网、地壳下的嫉妒心、人们所谈论的怪力乱神后，二人来到了遗址中心的洋馆，地灵殿。\n\n受这里主人的指引，二人来到了位于深处的间歇泉地下中心。", "description": "### 简要题意\n给定正整数 $n$、$v$ 和长度为 $n$ 的数组 $\\{A_i\\}$。\n\n有一个长度为 $n$ 的数组 $B$，初始值与 $A$ 相同。 \n执行 $n$ 次操作，第 $i$ 次操作在 $[1,i]$ 中按如下规则选取一个正整数 $j$，然后把 $B_j$ 变成 $B_j+v$：\n- 选取 $B_j$ 最大的 $j$。\n- $B_j$ 相同时选择 $A_j$ 最大的 $j$。\n- $A_j,B_j$ 均相同，选择较小的 $j$。\n\n我们称这是选中了一次 $j$。\n\n有 $m$ 次询问，每次询问给定 $x_i,k_i$。表示求最小的 $s$，使得**若**将 $A_{x_i}$ 的初始值改为 $s$（注意此时 $B_{x_i}$ 的初始值也会跟着改变），$x_i$ 至少被选中 $k_i$ 次，或报告不存在（**结果为** $0$）。请注意，$s$ 不存在最小值时也是报告不存在（**结果为** $0$）。\n\n询问之间互相独立，也就是每次询问不会对 $A_{x_i}$ 和 $B_{x_i}$ 产生实质性更改。\n\n### 原始题意\n\n到达控制中心之后，主角组和灵乌路空进行了激烈的狗斗大赛。负责技术维护的河童需要接受荷取来自地上指挥部的指令，保障生产安全。\n\n具体地，有 $n$ 个核反应机组依次排开，第 $i$ 个机组的活动强度为 $A_i$。为了维护平衡，控制系统依次操作 $n$ 次，第 $i$ 次操作会在前 $i$ 个机组中找到一个**当前活动度最高的**机组，进行一次调节平衡操作，并将其活动度增加 $v$。倘若有多个机组活动度最高，就应当选择初始活动度**最大**的，若还是无法比较，则取编号最小。\n\n为了在自动控制系统的基础上调节平衡，荷取会发出 $m$ 条指令，形如她每次会给出两个整数 $x_i,k_i$，表示她会修改第 $x_i$ 个机组的初始活动度。她希望通过修改（必须改成一个**非负整数** $s$）后，$x_i$ 号机组至少被平衡 $k_i$ 次。如果无论如何都无法达到要求，那么结果就是 $0$；否则请求出满足条件的**最小的** $s$。", "inputFormat": "- 第一行有三个整数 $n, m, v$。\n- 接下来一行，有 $n$ 个整数，描述 $a_i$。\n- 接下来 $m$ 行，每行有两个整数 $x_i,k_i$，描述一次询问。", "outputFormat": "- 一行，输出两个整数，表示所有结果的**异或和**与**加法和**。", "hint": "### 样例 1 解释\n\n对于第一次询问，我们将 $A_3$ 修改为 $7$。\n\n- 第一次操作选择了位置 $1$，于是 $B_1$ 变为 $4$。\n- 第二次操作选择了位置 $2$，于是 $B_2$ 变为 $7$。虽然操作前 $B_1=B_2$，但是 $A_2>A_1$，因此选择位置 $2$。\n- 第三次操作选择了位置 $3$，于是 $B_3$ 变为 $10$。\n- 第四次操作选择了位置 $3$，于是 $B_3$ 变为 $13$。\n- 第五次操作选择了位置 $3$，于是 $B_3$ 变为 $16$。\n- 第六次操作选择了位置 $3$，于是 $B_3$ 变为 $19$。\n- 第七次操作选择了位置 $3$，于是 $B_3$ 变为 $22$。\n\n于是位置 $3$ 一共被选择了 $5$ 次，满足题意。可以证明，如果把 $A_3$ 的初始值设为 $6$，无法达成要求。于是该询问结果为 $7$。\n\n对于第二个询问，容易发现不可能有 $4$ 次以上操作选择位置 $6$。因此该询问结果为 $0$。\n\n$7\\oplus 0=7$，$7+0=7$，因此输出 $7,7$。\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,m\\le} & \\bm {a_i\\le } & \\bm{v\\le} & \\textbf{分值} \\cr\\hline\n1 & 10 & 100 & 10 & 10 \\cr\\hline\n2 & 100 & 5\\times 10^3 & 50 & 20 \\cr\\hline\n3 & 10^3 & 10^9 & 100 & 10 \\cr\\hline\n4 & 10^5 & 10^9 & 100 & 25 \\cr\\hline\n5 & 2\\times 10^6 & 10^9 & 100 & 35 \\cr\\hline\n\\end{array}$$\n\n对于全部数据，满足 $1 \\le n,m \\le 2\\times 10^6$，$1 \\le v \\le 100$，$1 \\le a_i \\le 10 ^ 9$，$1 \\le x,k \\le n$。\n\n**本题 IO 量较大，请选择合适的输入方式。**", "locale": "zh-CN"}}}
{"pid": "P8540", "type": "P", "difficulty": 5, "samples": [["5 2 4", "1"], ["1000000000000000000 1000000000000000000 1000000000000000000", "262144"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "「Wdoi-2」夜空中的 UFO 恋曲", "background": "土地变得泥泞，曾被寒冰覆盖的大地上，万物开始复苏。  \n覆盖着幻想乡的少量积雪，封住了在这个冬天苏醒的地灵们，   \n也足以使妖精们的活动变得迟钝。这样安稳沉睡的季节也即将告一段落。\n\n博丽神社的巫女博丽灵梦从居住在森林里的魔法使那儿听到了一个传闻说，有人目击到云的缝隙中有不可思议的船在空中飞行。\n\n——船中空空如也。  \n曾在船中的金银财宝早已散佚，剩下的东西也散发着  \n陈年霉臭。  \n仅凭凛冽春风，仍不足以将那霉味吹散。  \n但是，只有那位大人留下的宝物，即使变成碎片也不会失去威力吧。\n\n只是那些碎片依旧以不可思议不可理解的形态飘在幻想乡各处，对扑簌迷离的真相加盖了疑问的迷雾。\n\n貌似有很深的原因。我们不知道的某种东西，在酝酿着什么。", "description": "### 简要题意\n给定正整数 $a,b,c$，满足 $a,b,c\\textcolor{red} > 1$。对于函数 $f_k$，给出如下定义：\n\n$$f_{k}(x)=\\begin{cases}\nx^{2c}\\oplus c & k = 1\\\\\nf_{k-1}(x^{2c}\\oplus c) & k > 1\n\\end{cases}$$\n\n其中 $\\oplus$ 表示二进制下的异或操作。\n\n现在要求计算出 $\\operatorname{lowbit}(f_{b}(a))$。其中 $\\operatorname{lowbit}(x)$ 表示二进制下 $x$ 最右侧的 $1$ 所在位置对应的二进制值，例如：\n\n$$\\operatorname{lowbit}(101101\\cdots 10\\textcolor{red}1\\underbrace{00\\cdots000}_{k\\text{ 个 }0})=2^k$$\n\n特别地，若 $x=0$，则 $\\operatorname{lowbit}(x)=0$。\n### 原始题意\n为了去除碎片上附加的「不明的因子」，主角组需要破开[【正体不明】](https://www.luogu.com.cn/user/35891)附加的法术。\n\n不明的因子是一种小蛇一般的飞行物，在不同人的眼中具有不同的形象。  \n当有人看到它时，会按照自己的常识，把它看成自己认识的、认为合理的东西。\n\n碎片的表面有一个由红蓝组成的长串，妖怪贤者发现，若将红看作 $0$，蓝看作 $1$，它就成了一个二进制数字 $x$。  \n碎片上一共有 $k$ 层不明因子，每破开一层都会使数字 $x$ 变为 $x^{2c}\\oplus c$（其中 $\\oplus$ 表示二进制下的异或操作）。  \n为了破解法术，主角组需要根据给定的常数 $c$，初始值 $a$ 和层数 $k=b$ 先破开所有的不明因子，然后计算剩下的数字所代表的串中， 最右侧的「蓝色」所在位置对应的二进制值。\n\n经过主角们一定的分析，她们发现了 $a,b,c\\textcolor{red} > 1$。\n\n紫把[式神计算机](https://www.luogu.com.cn/user/149196)搬了出来就回去睡觉了，把编制程序的任务交给了可怜的金发小女孩。你的任务就是帮她完成程序的编制，彻底肃清异变的影响，找回丢失的记忆。", "inputFormat": "第一行有三个正整数 $a,b,c$，含义如题面所示。\n\n再次强调，$a,b,c\\textcolor{red} > 1$。", "outputFormat": "输出共一行一个整数，表示 $\\operatorname{lowbit}(f_b(a))$ 的值。", "hint": "### 样例 1 解释\n\n- $f_{2}(5)=f_1(5^8\\oplus 4)=f_1(390{,}629)$；\n- $f_1(390{,}629)=390{,}629^8\\oplus 4=542{,}145{,}496{,}755{,} 385{,}548{,}075{,}315{,}235{,}215{,}044{,}149{,}100{,}456{,}165$；\n- 容易发现，$f_{2}(5)$ 的 $\\text{lowbit}$ 值为 $1$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{a,b,c\\le} & \\textbf{特殊性质} & \\textbf{分值} \\cr\\hline\n1 & 11 & - & 25 \\cr\\hline\n2 & 10^{18} & \\text{A} & 35 \\cr\\hline\n3 & 10^{18} & - & 40 \\cr\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $c$ 为偶数。\n\n对于全部数据，保证 $1 \\textcolor{red}< a,b,c\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」夜空中的 UFO 恋曲", "background": "土地变得泥泞，曾被寒冰覆盖的大地上，万物开始复苏。  \n覆盖着幻想乡的少量积雪，封住了在这个冬天苏醒的地灵们，   \n也足以使妖精们的活动变得迟钝。这样安稳沉睡的季节也即将告一段落。\n\n博丽神社的巫女博丽灵梦从居住在森林里的魔法使那儿听到了一个传闻说，有人目击到云的缝隙中有不可思议的船在空中飞行。\n\n——船中空空如也。  \n曾在船中的金银财宝早已散佚，剩下的东西也散发着  \n陈年霉臭。  \n仅凭凛冽春风，仍不足以将那霉味吹散。  \n但是，只有那位大人留下的宝物，即使变成碎片也不会失去威力吧。\n\n只是那些碎片依旧以不可思议不可理解的形态飘在幻想乡各处，对扑簌迷离的真相加盖了疑问的迷雾。\n\n貌似有很深的原因。我们不知道的某种东西，在酝酿着什么。", "description": "### 简要题意\n给定正整数 $a,b,c$，满足 $a,b,c\\textcolor{red} > 1$。对于函数 $f_k$，给出如下定义：\n\n$$f_{k}(x)=\\begin{cases}\nx^{2c}\\oplus c & k = 1\\\\\nf_{k-1}(x^{2c}\\oplus c) & k > 1\n\\end{cases}$$\n\n其中 $\\oplus$ 表示二进制下的异或操作。\n\n现在要求计算出 $\\operatorname{lowbit}(f_{b}(a))$。其中 $\\operatorname{lowbit}(x)$ 表示二进制下 $x$ 最右侧的 $1$ 所在位置对应的二进制值，例如：\n\n$$\\operatorname{lowbit}(101101\\cdots 10\\textcolor{red}1\\underbrace{00\\cdots000}_{k\\text{ 个 }0})=2^k$$\n\n特别地，若 $x=0$，则 $\\operatorname{lowbit}(x)=0$。\n### 原始题意\n为了去除碎片上附加的「不明的因子」，主角组需要破开[【正体不明】](https://www.luogu.com.cn/user/35891)附加的法术。\n\n不明的因子是一种小蛇一般的飞行物，在不同人的眼中具有不同的形象。  \n当有人看到它时，会按照自己的常识，把它看成自己认识的、认为合理的东西。\n\n碎片的表面有一个由红蓝组成的长串，妖怪贤者发现，若将红看作 $0$，蓝看作 $1$，它就成了一个二进制数字 $x$。  \n碎片上一共有 $k$ 层不明因子，每破开一层都会使数字 $x$ 变为 $x^{2c}\\oplus c$（其中 $\\oplus$ 表示二进制下的异或操作）。  \n为了破解法术，主角组需要根据给定的常数 $c$，初始值 $a$ 和层数 $k=b$ 先破开所有的不明因子，然后计算剩下的数字所代表的串中， 最右侧的「蓝色」所在位置对应的二进制值。\n\n经过主角们一定的分析，她们发现了 $a,b,c\\textcolor{red} > 1$。\n\n紫把[式神计算机](https://www.luogu.com.cn/user/149196)搬了出来就回去睡觉了，把编制程序的任务交给了可怜的金发小女孩。你的任务就是帮她完成程序的编制，彻底肃清异变的影响，找回丢失的记忆。", "inputFormat": "第一行有三个正整数 $a,b,c$，含义如题面所示。\n\n再次强调，$a,b,c\\textcolor{red} > 1$。", "outputFormat": "输出共一行一个整数，表示 $\\operatorname{lowbit}(f_b(a))$ 的值。", "hint": "### 样例 1 解释\n\n- $f_{2}(5)=f_1(5^8\\oplus 4)=f_1(390{,}629)$；\n- $f_1(390{,}629)=390{,}629^8\\oplus 4=542{,}145{,}496{,}755{,} 385{,}548{,}075{,}315{,}235{,}215{,}044{,}149{,}100{,}456{,}165$；\n- 容易发现，$f_{2}(5)$ 的 $\\text{lowbit}$ 值为 $1$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{a,b,c\\le} & \\textbf{特殊性质} & \\textbf{分值} \\cr\\hline\n1 & 11 & - & 25 \\cr\\hline\n2 & 10^{18} & \\text{A} & 35 \\cr\\hline\n3 & 10^{18} & - & 40 \\cr\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $c$ 为偶数。\n\n对于全部数据，保证 $1 \\textcolor{red}< a,b,c\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8541", "type": "P", "difficulty": 6, "samples": [["1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n0\n\n0\n\n1", "\n? 0\n\n? 1\n\n? 2\n\n? 3\n\n? 10\n\n? 100\n\n? 233\n\n? 1919810\n\n! 114514"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["倍增", "二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」死亡之后愈发愉悦", "background": "落樱缤纷春不待，如果错过了这次机会，可能得等到紫藤绽放的春夏之际才能赏花了。  \n但是两人依然无心在樱花树下席地而宴。\n\n因为正体不明的灵体在两人面前倏现骤消的飘浮着。  \n后来才明白这些四处飘浮的正体不明灵体，既非普通幽灵，也不是前阵子出现的怨灵。  \n这些是神灵。本应超脱为神的灵体。\n\n一般而言，神灵多半居住在神社里，其实它们是随处可见的没有固定型态的灵体。  \n这些神灵让她们困惑不已。\n\n超乎常人的强烈人欲、想法、恐惧与情感，是神灵出现的原因。一般而言，神灵很少危害人类，如果没有强烈的欲望。例如祈求丰收，或是除厄避邪等，是不会产生神灵的……\n\n小神灵指引着灵梦与魔理沙深入命莲寺的地底，与千年复苏的敌人交手。从命莲寺墓地到莲池中央的梦殿大祀庙，从彷徨的亡灵到极具传说色彩的圣德太子，从欲望加速到小小的欲望星空，一切都显得那么不可思议。\n\n「死亡之后，才能得到更加绚烂的重生。」", "description": "**【这是一道交互题】**\n\n定义 $f(x)$ 表示严格大于 $x$ 的最小的完全平方数，定义 $g(x)$ 为小于等于 $x$ 的最大的完全平方数。例如，$f(1)=f(2)=g(4)=g(8)=4$。\n\n一个正整数是“可爱”的，当且仅当 $x-g(x)<f(x)-x$，例如，$1,5,11$ 是可爱的正整数，而 $3,8,15$ 不是。\n\n为了倾听小神灵的愿望，主角组需要向神子询问。小神灵有一个最喜欢的正整数 $a$，神子可以根据灵梦给出的 $x\\quad(x\\in[0,10^9])$，向小神灵询问，而小神灵只能回答她，$a+x$ 是不是可爱的正整数（$\\text{cute number}$）。\n\n请通过适当的询问找出 $a$。", "inputFormat": "第一行有一个正整数 $T$，表示数据组数。每一组之间互相独立。\n\n接下来，对于每一组数据，你将可以进行以下两种操作：\n\n- $\\verb!? x!$：询问 $a+x$ 是否是 $\\text{cute number}$。要注意，$x$ 的值应当在 $[0,10^9]$ 以内。对于正确的询问，交互库会返回一个数字 $1$ 或者 $0$，表示 $a+x$ 是/不是 $\\text{cute number}$。\n- $\\verb|! a|$：报告你发现的 $a$。如果你给出的 $a$ 正确，该组数据结束。注意：报告操作不计入询问操作的总次数。\n\n如果你的询问次数超过了 $100$，或者 $x$ 不符合数据范围，或者你报告的 $a$ 不正确，交互库会返回一个数字 $-1$。此时你应当立即结束程序，否则可能发生不可预知的错误。", "outputFormat": "", "hint": "### 样例解释\n\n样例当中的过程仅供参考。\n\n样例当中，$a=114514$，是 $\\text{cute number}$（因为 $338^2\\le 114514 <339^2$，而 $114514-338^2=270<339^2-114514=407$）。\n\n同样地，$a+0,a+1,a+2,a+3,a+10$ 均为 $\\text{cute number}$。而 $a+100=114614$ 不是 $\\text{cute number}$，因为 $338^2\\le 114614 <339^2$，而 $114614-338^2=370\\ge 339^2-114614=307$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{a\\le } & \\bm{T\\le} & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 100 & 100 & - & 10\\\\\\hline\n3 & 10^9 & 2\\times 10^3 & -  & 20\\\\\\hline\n2 & 10^{12} & 2\\times 10^3 & \\textbf{A}  & 30\\\\\\hline\n4 & 10^{12} & 2\\times 10^3 & -  & 40\\\\\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $a$ 是 $\\text{cute number}$。\n\n对于全部数据，保证 $1\\le a\\le 10^{12}$。你发起的询问当中，$x$ 的值应当在 $[0,10^9]$ 以内。\n\n---\n\n此外，你每个测试点的得分还与该测试点所有询问次数的最大值有关。具体而言，设某个测试点你询问操作一共进行了 $\\text{max\\_count}$ 次。\n\n- 若 $\\text{max\\_count}< 64$，你将获得该测试点 $100\\%$ 的分数；\n- 若 $64\\le \\text{max\\_count}< 81$，你将获得该测试点 $50\\%$ 的分数；\n- 若 $81\\le \\text{max\\_count}< 100$，你将获得该测试点 $20\\%$ 的分数；\n- 若 $\\text{max\\_count}\\ge 100$，你将不能获得该测试点的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」死亡之后愈发愉悦", "background": "落樱缤纷春不待，如果错过了这次机会，可能得等到紫藤绽放的春夏之际才能赏花了。  \n但是两人依然无心在樱花树下席地而宴。\n\n因为正体不明的灵体在两人面前倏现骤消的飘浮着。  \n后来才明白这些四处飘浮的正体不明灵体，既非普通幽灵，也不是前阵子出现的怨灵。  \n这些是神灵。本应超脱为神的灵体。\n\n一般而言，神灵多半居住在神社里，其实它们是随处可见的没有固定型态的灵体。  \n这些神灵让她们困惑不已。\n\n超乎常人的强烈人欲、想法、恐惧与情感，是神灵出现的原因。一般而言，神灵很少危害人类，如果没有强烈的欲望。例如祈求丰收，或是除厄避邪等，是不会产生神灵的……\n\n小神灵指引着灵梦与魔理沙深入命莲寺的地底，与千年复苏的敌人交手。从命莲寺墓地到莲池中央的梦殿大祀庙，从彷徨的亡灵到极具传说色彩的圣德太子，从欲望加速到小小的欲望星空，一切都显得那么不可思议。\n\n「死亡之后，才能得到更加绚烂的重生。」", "description": "**【这是一道交互题】**\n\n定义 $f(x)$ 表示严格大于 $x$ 的最小的完全平方数，定义 $g(x)$ 为小于等于 $x$ 的最大的完全平方数。例如，$f(1)=f(2)=g(4)=g(8)=4$。\n\n一个正整数是“可爱”的，当且仅当 $x-g(x)<f(x)-x$，例如，$1,5,11$ 是可爱的正整数，而 $3,8,15$ 不是。\n\n为了倾听小神灵的愿望，主角组需要向神子询问。小神灵有一个最喜欢的正整数 $a$，神子可以根据灵梦给出的 $x\\quad(x\\in[0,10^9])$，向小神灵询问，而小神灵只能回答她，$a+x$ 是不是可爱的正整数（$\\text{cute number}$）。\n\n请通过适当的询问找出 $a$。", "inputFormat": "第一行有一个正整数 $T$，表示数据组数。每一组之间互相独立。\n\n接下来，对于每一组数据，你将可以进行以下两种操作：\n\n- $\\verb!? x!$：询问 $a+x$ 是否是 $\\text{cute number}$。要注意，$x$ 的值应当在 $[0,10^9]$ 以内。对于正确的询问，交互库会返回一个数字 $1$ 或者 $0$，表示 $a+x$ 是/不是 $\\text{cute number}$。\n- $\\verb|! a|$：报告你发现的 $a$。如果你给出的 $a$ 正确，该组数据结束。注意：报告操作不计入询问操作的总次数。\n\n如果你的询问次数超过了 $100$，或者 $x$ 不符合数据范围，或者你报告的 $a$ 不正确，交互库会返回一个数字 $-1$。此时你应当立即结束程序，否则可能发生不可预知的错误。", "outputFormat": "", "hint": "### 样例解释\n\n样例当中的过程仅供参考。\n\n样例当中，$a=114514$，是 $\\text{cute number}$（因为 $338^2\\le 114514 <339^2$，而 $114514-338^2=270<339^2-114514=407$）。\n\n同样地，$a+0,a+1,a+2,a+3,a+10$ 均为 $\\text{cute number}$。而 $a+100=114614$ 不是 $\\text{cute number}$，因为 $338^2\\le 114614 <339^2$，而 $114614-338^2=370\\ge 339^2-114614=307$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{a\\le } & \\bm{T\\le} & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 100 & 100 & - & 10\\\\\\hline\n3 & 10^9 & 2\\times 10^3 & -  & 20\\\\\\hline\n2 & 10^{12} & 2\\times 10^3 & \\textbf{A}  & 30\\\\\\hline\n4 & 10^{12} & 2\\times 10^3 & -  & 40\\\\\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $a$ 是 $\\text{cute number}$。\n\n对于全部数据，保证 $1\\le a\\le 10^{12}$。你发起的询问当中，$x$ 的值应当在 $[0,10^9]$ 以内。\n\n---\n\n此外，你每个测试点的得分还与该测试点所有询问次数的最大值有关。具体而言，设某个测试点你询问操作一共进行了 $\\text{max\\_count}$ 次。\n\n- 若 $\\text{max\\_count}< 64$，你将获得该测试点 $100\\%$ 的分数；\n- 若 $64\\le \\text{max\\_count}< 81$，你将获得该测试点 $50\\%$ 的分数；\n- 若 $81\\le \\text{max\\_count}< 100$，你将获得该测试点 $20\\%$ 的分数；\n- 若 $\\text{max\\_count}\\ge 100$，你将不能获得该测试点的分数。", "locale": "zh-CN"}}}
{"pid": "P8542", "type": "P", "difficulty": 7, "samples": [["4\n14\n13\n16\n3\n16", "1 1\n1 0\n0 1\n1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-2」魔力的雷云", "background": "道具会自己活动，本来温顺的妖怪突然大闹起来原来都是因为万宝槌的影响。  \n唆使小人的天邪鬼虽然最后逃走了，但因为真正使用万宝槌的是小人，所以灵梦决定对其进行监视。但是总感觉也没再有什么不良企图的样子。  \n\n但就在那时，天空再次出现了诡异的云团。  \n是与逆城出现之时一样的，魔力风暴。\n\n“那不是我干的”，少名针妙丸这样解释着  \n到底，又是谁再次掀起了这样的风暴？  \n灵梦她们，为了调查清楚原因，再次冲进了风暴之中。\n\n小人的末裔、逆转的城、为反抗而反抗的天邪鬼。  \n这背后又隐藏着什么呢。", "description": "### 简要题意\n\n$n$ 块磁铁排列成了一个环。每块磁铁都有磁力，用 $4^{a_i}$ 表示。相邻两块磁铁**磁力大小不同**。磁铁大小一致，长度均为 $1$ 单位长度。摆放时分为北极朝左和北极朝右。当两块磁铁互相吸引时，它们会紧紧靠拢，互相排斥时，记这两块磁铁的磁力为 $u$ 和 $v$，那么它们会相距 $u+v$ 单位长度。\n\n目前已知**整个环**的长度（包括**每个**磁铁的长度，以及相邻磁铁之间的距离），记这个长度为 $d_0$ 个单位长度。对于第 $i$ 块磁铁，也已知若拿去这块磁铁，剩余磁铁组成的环的长度，记这个长度为 $d_i$ 个单位长度。\n\n找到找到任意一种可能的磁铁排列方法满足这些已知的数据，（也要满足相邻两块磁铁磁力大小不同），并且可以决定所用磁铁的磁力。保证有解。\n\n### 原始题意\n\n在堀川雷鼓引发的雷暴中，一架架周围附带着电磁场的鼓正随着节奏摇摆着。在强大的电磁干扰下，巫女和魔法使与地面失去了联系。\n\n这些尺寸完全相同（可以视作为单位长度 $1$）的带有磁力的鼓一共有 $n$ 架，它们排列成了一个环。为了让弹幕美观，第 $i$ 架鼓上带有的磁力是 $4^{a_i}$，而且相邻两架鼓带有的磁力大小不同。\n\n每一架鼓都有磁性上的南北两极，而且在摆放的时候有北极朝左和北极朝右的两种情况。若两架鼓相互吸引它们会紧紧靠拢；而若它们相互排斥，这两架鼓之间的距离就是它们的磁力之和的单位长度。\n\n灵梦记录下了整个环的长度 $d_0$，这包括了每架鼓的长度和相邻的鼓之间的距离，而魔理沙正在使用自己的火力击碎这些鼓。然而这些鼓的质量非常皮实，魔理沙一次只能击碎一个鼓，随后堀川雷鼓会用一个尺寸和磁力完全一致的鼓替代这个被击碎的鼓。但是在击碎第 $i$ 架鼓的时候，受到磁力的作用环的长度会发生变化，魔理沙会记录此时剩余的鼓组成的环的长度 $d_i$（假设磁力的作用是瞬间完成的）。\n\n在战斗的间隙，灵梦和魔理沙希望通过她们记录下的数据，找到任意一种鼓的排布情况满足这些数据。为了降低难度，她们可以自由决定每架鼓上的磁力多少。数据保证有解。\n\n尽快解出鼓的分布，从而结束这场异变吧！", "inputFormat": "- 第一行有一个整数 $n$，表示磁铁的总个数。\n- 接下来 $1$ 行一个整数，表示 $d_0$。\n- 接下来 $n$ 行每行一个整数，其中第 $i$ 行的整数表示 $d_i$。", "outputFormat": "- 输出共 $n$ 行。第 $i$ 行有两个整数 $f_i,a_i$，分别表示磁铁的方向与磁力。若 $f_i=0$ 则表示北极向左，否则若 $f_i=1$ 则表示北极向右。", "hint": "### 样例 1 解释\n\n一种合法的方案中，$c=\\{1,1,0,1\\}$，$a=\\{1,0,1,0\\}$。以下是这种方案的图解。\n\n初始时磁铁的状态如下图所示，磁铁上方的数字是它的磁力大小（即 $4^{a_i}$ 的值），磁铁上标记的 $\\textsf{N/S}$ 是它的磁极。由于笔者能力有限，无法还原出环形，只能用这种传送门的方式扭曲时空了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdbb4nqb.png)\n\n容易发现，总长度为 $14$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wmagcu24.png)\n\n拿掉第一块磁铁后的情形如图所示。容易发现，总长度为 $13$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eipnbj08.png)\n\n拿掉第二块磁铁后的情形如图所示。由于缺少了第二块磁铁的阻挡，第一块和第三块磁铁直接相邻，产生了更大的间距。可以发现，总长度为 $16$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/830j9rz5.png)\n\n拿掉第三块磁铁后的情形如图所示。值得注意的是，所有磁铁北极方向相同，于是直接互相接触，总长度为 $3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afqw0jx4.png)\n\n拿掉第四块磁铁后的情形如图所示。由于第三块和第一块磁铁直接相邻（因为是形成了环。在图上则是扭曲后的空间里相邻），因此形成了这种模样。总长度为 $16$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值} \\\\\\hline\n1 & 10 & - & 10 \\\\\\hline\n2 & 10^5 & - & 30 \\\\\\hline\n3 & 10^6 & \\text{A} & 5 \\\\\\hline\n4 & 10^6 & - & 55 \\\\\\hline\n\\end{array}$$\n\n**特殊性质** $\\textbf{A}$：保证存在一种方案，所有磁铁的方向一致。\n\n对于所有数据，保证 $1\\leq n\\leq 1\\times10^6$，存在至少一种合法方案。此外，保证 $d_i< 2^{63}$，你构造的 $a_i$ 大小应该在 $[0,10^9]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」魔力的雷云", "background": "道具会自己活动，本来温顺的妖怪突然大闹起来原来都是因为万宝槌的影响。  \n唆使小人的天邪鬼虽然最后逃走了，但因为真正使用万宝槌的是小人，所以灵梦决定对其进行监视。但是总感觉也没再有什么不良企图的样子。  \n\n但就在那时，天空再次出现了诡异的云团。  \n是与逆城出现之时一样的，魔力风暴。\n\n“那不是我干的”，少名针妙丸这样解释着  \n到底，又是谁再次掀起了这样的风暴？  \n灵梦她们，为了调查清楚原因，再次冲进了风暴之中。\n\n小人的末裔、逆转的城、为反抗而反抗的天邪鬼。  \n这背后又隐藏着什么呢。", "description": "### 简要题意\n\n$n$ 块磁铁排列成了一个环。每块磁铁都有磁力，用 $4^{a_i}$ 表示。相邻两块磁铁**磁力大小不同**。磁铁大小一致，长度均为 $1$ 单位长度。摆放时分为北极朝左和北极朝右。当两块磁铁互相吸引时，它们会紧紧靠拢，互相排斥时，记这两块磁铁的磁力为 $u$ 和 $v$，那么它们会相距 $u+v$ 单位长度。\n\n目前已知**整个环**的长度（包括**每个**磁铁的长度，以及相邻磁铁之间的距离），记这个长度为 $d_0$ 个单位长度。对于第 $i$ 块磁铁，也已知若拿去这块磁铁，剩余磁铁组成的环的长度，记这个长度为 $d_i$ 个单位长度。\n\n找到找到任意一种可能的磁铁排列方法满足这些已知的数据，（也要满足相邻两块磁铁磁力大小不同），并且可以决定所用磁铁的磁力。保证有解。\n\n### 原始题意\n\n在堀川雷鼓引发的雷暴中，一架架周围附带着电磁场的鼓正随着节奏摇摆着。在强大的电磁干扰下，巫女和魔法使与地面失去了联系。\n\n这些尺寸完全相同（可以视作为单位长度 $1$）的带有磁力的鼓一共有 $n$ 架，它们排列成了一个环。为了让弹幕美观，第 $i$ 架鼓上带有的磁力是 $4^{a_i}$，而且相邻两架鼓带有的磁力大小不同。\n\n每一架鼓都有磁性上的南北两极，而且在摆放的时候有北极朝左和北极朝右的两种情况。若两架鼓相互吸引它们会紧紧靠拢；而若它们相互排斥，这两架鼓之间的距离就是它们的磁力之和的单位长度。\n\n灵梦记录下了整个环的长度 $d_0$，这包括了每架鼓的长度和相邻的鼓之间的距离，而魔理沙正在使用自己的火力击碎这些鼓。然而这些鼓的质量非常皮实，魔理沙一次只能击碎一个鼓，随后堀川雷鼓会用一个尺寸和磁力完全一致的鼓替代这个被击碎的鼓。但是在击碎第 $i$ 架鼓的时候，受到磁力的作用环的长度会发生变化，魔理沙会记录此时剩余的鼓组成的环的长度 $d_i$（假设磁力的作用是瞬间完成的）。\n\n在战斗的间隙，灵梦和魔理沙希望通过她们记录下的数据，找到任意一种鼓的排布情况满足这些数据。为了降低难度，她们可以自由决定每架鼓上的磁力多少。数据保证有解。\n\n尽快解出鼓的分布，从而结束这场异变吧！", "inputFormat": "- 第一行有一个整数 $n$，表示磁铁的总个数。\n- 接下来 $1$ 行一个整数，表示 $d_0$。\n- 接下来 $n$ 行每行一个整数，其中第 $i$ 行的整数表示 $d_i$。", "outputFormat": "- 输出共 $n$ 行。第 $i$ 行有两个整数 $f_i,a_i$，分别表示磁铁的方向与磁力。若 $f_i=0$ 则表示北极向左，否则若 $f_i=1$ 则表示北极向右。", "hint": "### 样例 1 解释\n\n一种合法的方案中，$c=\\{1,1,0,1\\}$，$a=\\{1,0,1,0\\}$。以下是这种方案的图解。\n\n初始时磁铁的状态如下图所示，磁铁上方的数字是它的磁力大小（即 $4^{a_i}$ 的值），磁铁上标记的 $\\textsf{N/S}$ 是它的磁极。由于笔者能力有限，无法还原出环形，只能用这种传送门的方式扭曲时空了。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdbb4nqb.png)\n\n容易发现，总长度为 $14$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wmagcu24.png)\n\n拿掉第一块磁铁后的情形如图所示。容易发现，总长度为 $13$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eipnbj08.png)\n\n拿掉第二块磁铁后的情形如图所示。由于缺少了第二块磁铁的阻挡，第一块和第三块磁铁直接相邻，产生了更大的间距。可以发现，总长度为 $16$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/830j9rz5.png)\n\n拿掉第三块磁铁后的情形如图所示。值得注意的是，所有磁铁北极方向相同，于是直接互相接触，总长度为 $3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afqw0jx4.png)\n\n拿掉第四块磁铁后的情形如图所示。由于第三块和第一块磁铁直接相邻（因为是形成了环。在图上则是扭曲后的空间里相邻），因此形成了这种模样。总长度为 $16$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值} \\\\\\hline\n1 & 10 & - & 10 \\\\\\hline\n2 & 10^5 & - & 30 \\\\\\hline\n3 & 10^6 & \\text{A} & 5 \\\\\\hline\n4 & 10^6 & - & 55 \\\\\\hline\n\\end{array}$$\n\n**特殊性质** $\\textbf{A}$：保证存在一种方案，所有磁铁的方向一致。\n\n对于所有数据，保证 $1\\leq n\\leq 1\\times10^6$，存在至少一种合法方案。此外，保证 $d_i< 2^{63}$，你构造的 $a_i$ 大小应该在 $[0,10^9]$。", "locale": "zh-CN"}}}
{"pid": "P8543", "type": "P", "difficulty": 6, "samples": [["10 10\n3 2 2 1 2 1 3 2 1 2 \n10 4 10 4 9 8 1 4 9 4 \n3 4\n3 9\n4 8\n3 6\n3 3\n9 10\n5 8\n5 8\n6 8\n5 8\n", "10\n4\n4\n9\n10\n9\n8\n8\n8\n8\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-2」纯粹的复仇女神", "background": ">「因为，人类的历史与成长，就是战争的历史与成长。没有纷争，就没有成长。满足于现状，就等于人类放弃了生存。月之民每天都为地上人考虑着。地上人的历史，就是月之民创造的。」\n\n「我对月之民还是很了解的。这么说吧，她们在各式各样的异世界的居民中，属于最恶劣的那一类。超级排他，超级没自由，虚构的乐园，虽然擅长鄙视别人，但无法容忍自己被当成笨蛋。她们甚至认为其他世界的居民连杂菌都不如。」\n\n「最重要的问题是，月之民敌视着幻想乡，就是这样的。」 \n\n「没想到竟然会把地上人送到月面上来，之前丝毫没有过这种想法呢。那些眼里容不下一点沙子的月之民，竟然会使用这种不入流的手段。」\n\n「幻想乡被作为人质绑架了，可以这么认为吧？要是想拯救幻想乡的话，就不许对月之都动手，就是这种不人道的策略。」\n\n遥遥 $38$ 万公里航程之外，于此故乡之星倒映之海，打败不共戴天之敌，击碎永久不得醒之梦。\n\n> 不倶戴天の敵、$\\stackrel{じょうが}{嫦娥}$よ。見てるか！？    \n> 不共戴天之敌，嫦娥啊。你在看着吗！？", "description": "### 简要题意\n\n给定一个长度为 $n$ 的序列，序列中每个元素是一个二元组 $(c_i,a_i)$，分别表示颜色与权值。\n\n现在有 $q$ 次询问，每次给出一个区间 $[l,r]$，求：\n\n$$\\max\\limits_{k=1}^n \\left\\{\\min\\limits_{l\\le i \\le r,c_i=k} a_i\\right\\}$$\n\n特别地，如果 $[l,r]$ 内没有颜色为 $k$ 的值，后面的部分定义为 $0$。\n### 原始题意\n纯狐的能力是纯化，一旦灵梦身上的污秽被纯化，则必死无疑。\n\n灵梦携带了 $n$ 张一字排开的灵符用于转嫁污秽，但纯狐依旧可以纯化附着在上面的污秽，置灵梦于死地。\n\n具体地，每次纯狐命中一个区间 $[l_i,r_i]$ 中的所有灵符，灵梦需要在此之前净化这些灵符上面的污秽。  \n每张灵符有固定的颜色 $c_i$，经过激烈的战斗，每张灵符上沾染了 $a_i$ 单位的污秽。  \n同种颜色的灵符之间相互作用，净化区间内一批相同颜色的灵符，其灵力花费为这些灵符上污秽的最小值。  \n由于逸散的灵力可以为其他灵符所吸收，灵梦只需知道该区间内所有颜色的灵符净化花费的最大值，此为她净化一次的灵力花费。\n\n给定 $\\{c_i\\}$ 和 $\\{a_i\\}$，每次给出纯狐的一种可能的攻击 $l_i,r_i$，问灵梦净化一次的灵力花费。注意只是计算，每次给出答案后并不改变 $\\{c_i\\}$ 和 $\\{a_i\\}$。", "inputFormat": "第一行两个整数 $n,q$，表示序列长度与询问次数。\n\n第二行 $n$ 个整数，依次为 $c_1,c_2,\\cdots,c_n$。\n\n第三行 $n$ 个整数，依次为 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $q$ 行，每行两个整数 $l,r$，表示每次询问给出的区间。", "outputFormat": "共 $q$ 行，每行一个整数，表示本次询问的答案。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yu9grxjy.png)\n\n如图，数字代表权值，背景色代表颜色。\n\n- 对于区间 $[3,4]$，出现的两种颜色对应的权值最小值为 $10$ 和 $4$，取最大值答案为 $10$。\n- 对于区间 $[3,9]$，出现的三种颜色对应的权值最小值为 $1,4$ 和 $4$，取最大值答案为 $4$。\n- 对于区间 $[4,8]$，出现的三种颜色对应的权值最小值为 $1,4$ 和 $4$，取最大值答案为 $4$。\n- 对于区间 $[3,6]$，出现的两种颜色对应的权值最小值为 $9$ 和 $4$，取最大值答案为 $9$。\n- 对于区间 $[3,3]$，出现的一种颜色对应的权值最小值为 $10$。\n其余同理。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le } & \\bm{q\\le} & \\textbf{特殊性质} & \\textbf{Subtask 依赖} & \\textbf{分值}\\\\\\hline\n1 & 100 & 100 & - & - & 10\\\\\\hline\n2 & 2 \\times 10^5 & 2\\times 10^5 & \\textbf A & - & 20\\\\\\hline\n3 & 2 \\times 10^5 & 2\\times 10^5 & - & 2 & 30\\\\\\hline\n4 & 2 \\times 10^5 & 10^6 & - & 1,3 & 40\\\\\\hline\n\\end{array}\n$$\n\n特殊性质 $\\textbf A$：所有的 $c_i \\leq 10$。\n\n对于全部数据，保证 $1 \\leq n \\leq 2\\times10^5$，$1 \\leq q \\leq 10^6$，$1 \\le c_i,a_i \\le n$，$l \\leq r$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」纯粹的复仇女神", "background": ">「因为，人类的历史与成长，就是战争的历史与成长。没有纷争，就没有成长。满足于现状，就等于人类放弃了生存。月之民每天都为地上人考虑着。地上人的历史，就是月之民创造的。」\n\n「我对月之民还是很了解的。这么说吧，她们在各式各样的异世界的居民中，属于最恶劣的那一类。超级排他，超级没自由，虚构的乐园，虽然擅长鄙视别人，但无法容忍自己被当成笨蛋。她们甚至认为其他世界的居民连杂菌都不如。」\n\n「最重要的问题是，月之民敌视着幻想乡，就是这样的。」 \n\n「没想到竟然会把地上人送到月面上来，之前丝毫没有过这种想法呢。那些眼里容不下一点沙子的月之民，竟然会使用这种不入流的手段。」\n\n「幻想乡被作为人质绑架了，可以这么认为吧？要是想拯救幻想乡的话，就不许对月之都动手，就是这种不人道的策略。」\n\n遥遥 $38$ 万公里航程之外，于此故乡之星倒映之海，打败不共戴天之敌，击碎永久不得醒之梦。\n\n> 不倶戴天の敵、$\\stackrel{じょうが}{嫦娥}$よ。見てるか！？    \n> 不共戴天之敌，嫦娥啊。你在看着吗！？", "description": "### 简要题意\n\n给定一个长度为 $n$ 的序列，序列中每个元素是一个二元组 $(c_i,a_i)$，分别表示颜色与权值。\n\n现在有 $q$ 次询问，每次给出一个区间 $[l,r]$，求：\n\n$$\\max\\limits_{k=1}^n \\left\\{\\min\\limits_{l\\le i \\le r,c_i=k} a_i\\right\\}$$\n\n特别地，如果 $[l,r]$ 内没有颜色为 $k$ 的值，后面的部分定义为 $0$。\n### 原始题意\n纯狐的能力是纯化，一旦灵梦身上的污秽被纯化，则必死无疑。\n\n灵梦携带了 $n$ 张一字排开的灵符用于转嫁污秽，但纯狐依旧可以纯化附着在上面的污秽，置灵梦于死地。\n\n具体地，每次纯狐命中一个区间 $[l_i,r_i]$ 中的所有灵符，灵梦需要在此之前净化这些灵符上面的污秽。  \n每张灵符有固定的颜色 $c_i$，经过激烈的战斗，每张灵符上沾染了 $a_i$ 单位的污秽。  \n同种颜色的灵符之间相互作用，净化区间内一批相同颜色的灵符，其灵力花费为这些灵符上污秽的最小值。  \n由于逸散的灵力可以为其他灵符所吸收，灵梦只需知道该区间内所有颜色的灵符净化花费的最大值，此为她净化一次的灵力花费。\n\n给定 $\\{c_i\\}$ 和 $\\{a_i\\}$，每次给出纯狐的一种可能的攻击 $l_i,r_i$，问灵梦净化一次的灵力花费。注意只是计算，每次给出答案后并不改变 $\\{c_i\\}$ 和 $\\{a_i\\}$。", "inputFormat": "第一行两个整数 $n,q$，表示序列长度与询问次数。\n\n第二行 $n$ 个整数，依次为 $c_1,c_2,\\cdots,c_n$。\n\n第三行 $n$ 个整数，依次为 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $q$ 行，每行两个整数 $l,r$，表示每次询问给出的区间。", "outputFormat": "共 $q$ 行，每行一个整数，表示本次询问的答案。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yu9grxjy.png)\n\n如图，数字代表权值，背景色代表颜色。\n\n- 对于区间 $[3,4]$，出现的两种颜色对应的权值最小值为 $10$ 和 $4$，取最大值答案为 $10$。\n- 对于区间 $[3,9]$，出现的三种颜色对应的权值最小值为 $1,4$ 和 $4$，取最大值答案为 $4$。\n- 对于区间 $[4,8]$，出现的三种颜色对应的权值最小值为 $1,4$ 和 $4$，取最大值答案为 $4$。\n- 对于区间 $[3,6]$，出现的两种颜色对应的权值最小值为 $9$ 和 $4$，取最大值答案为 $9$。\n- 对于区间 $[3,3]$，出现的一种颜色对应的权值最小值为 $10$。\n其余同理。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le } & \\bm{q\\le} & \\textbf{特殊性质} & \\textbf{Subtask 依赖} & \\textbf{分值}\\\\\\hline\n1 & 100 & 100 & - & - & 10\\\\\\hline\n2 & 2 \\times 10^5 & 2\\times 10^5 & \\textbf A & - & 20\\\\\\hline\n3 & 2 \\times 10^5 & 2\\times 10^5 & - & 2 & 30\\\\\\hline\n4 & 2 \\times 10^5 & 10^6 & - & 1,3 & 40\\\\\\hline\n\\end{array}\n$$\n\n特殊性质 $\\textbf A$：所有的 $c_i \\leq 10$。\n\n对于全部数据，保证 $1 \\leq n \\leq 2\\times10^5$，$1 \\leq q \\leq 10^6$，$1 \\le c_i,a_i \\le n$，$l \\leq r$。", "locale": "zh-CN"}}}
{"pid": "P8544", "type": "P", "difficulty": 7, "samples": [["2 2 2\n9 9\n6 1", "252"], ["10 10 10\n2 8 10 10 10 2 5 8 9 3\n2 1 5 2 10 7 8 9 10 6\n", "8040\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "洛谷原创", "O2优化", "凸完全单调性（wqs 二分）", "洛谷月赛"], "title": "「Wdoi-2」禁断之门对面，是此世还是彼世", "background": "或许是后户之国轻易不与外界联系，或许是神职所限，又或许是性格喜好的原因，摩多罗作为最初建立幻想乡的几位贤者之一，和其他贤者之间的联系并不频繁。其他如八云紫、茨木华扇等贤者均亲身走在幻想乡之中，而摩多罗却置身之外。\n\n耗费神力发动全幻想乡级别的异变，看似规模宏大，其实并未对幻想乡造成真正的伤害，只是让一群笨蛋妖精狂躁了些而已。 \n\n谁也不知道门后的秘神心中真正的想法。", "description": "给定一场长度为 $n$ 的正整数序列 $a$ 和一个长度为 $m$ 的正整数序列 $b$。\n\n现在蓝根据序列 $a$ 与序列 $b$ 构造了一个 $n$ 行 $m$ 列的正整数矩阵 $A$ 满足 $A_{i,j}=a_ib_j$，你需要构造 $n+1$ 行 $t$ 列的正整数矩阵 $B$ 满足以下条件：\n\n- 矩阵的每个元素取值在 $[1,m]$ 间；\n- 矩阵同一行的元素**两两**不相同；\n- 矩阵的每列**相邻元素**不同；\n- 在所有满足上面三项要求的矩阵中**最小化**下式：\n$$f(B)=\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{t}\\sum\\limits_{k=\\min(B_{i,j},B_{i+1,j})}^{\\max(B_{i,j},B_{i+1,j})}A_{i,k}$$\n\n请输出构造出的 $B$ 矩阵的 $f(B)$ 的值模 $10^9+7$ 的结果。", "inputFormat": "第一行三个整数 $n,m,t$。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\cdots a_n$，含义如题面中所述。\n\n接下来一行 $m$ 个整数 $b_1,b_2,\\cdots b_m$，含义如题面中所述。\n\n", "outputFormat": "输出一行，表示构造出的 $B$ 矩阵的 $f(B)$ 的值模 $10^9+7$ 的结果。", "hint": "### 样例解释 1\n\n根据题意，可以构造出矩阵 $A=\\begin{bmatrix}54 & 9 \\\\ 54 & 9 \\end{bmatrix}$。\n\n你需要构造出的 $3$ 行 $2$ 列的矩阵 $B=\\begin{bmatrix}1 & 2 \\\\ 2 & 1 \\\\ 1 & 2 \\end{bmatrix}$，此时 $f(B)=252$ 为最小值\n\n可以证明 $f(B)=252$ 为所有情况中，$f(B)$ 的最小值。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n \\le } & \\bm{m \\le } & \\bm{t \\le } & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 10 & 10 & 10 & - & 5 \\\\\\hline\n2 & 100 & 100 & 100 & - & 5 \\\\\\hline\n3 & 10^3 & 10^3 & 10^3 & - & 15 \\\\\\hline\n4 & 5\\times 10^4 & 5\\times 10^4 & 5\\times 10^4 & - & 30 \\\\\\hline\n5 & 5\\times 10^5 & 5\\times 10^5 & 5\\times 10^5 & \\textbf{A} & 10 \\\\\\hline\n6 & 5\\times 10^5 & 5\\times 10^5 & 5\\times 10^5 & \\textbf{B} & 10 \\\\\\hline\n7 & 5\\times 10^5 & 5\\times 10^5 & 5\\times 10^5 & - & 25 \\\\\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $a_i=1$；\n- **特殊性质** $\\textbf{B}$：保证 $m=t$。\n\n对于全部数据，保证 $1\\le a_i, b_i\\le 10^9$，$1\\le n, m, t\\le 5\\times 10^5 $，$t\\le m$。保证数据有解。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」禁断之门对面，是此世还是彼世", "background": "或许是后户之国轻易不与外界联系，或许是神职所限，又或许是性格喜好的原因，摩多罗作为最初建立幻想乡的几位贤者之一，和其他贤者之间的联系并不频繁。其他如八云紫、茨木华扇等贤者均亲身走在幻想乡之中，而摩多罗却置身之外。\n\n耗费神力发动全幻想乡级别的异变，看似规模宏大，其实并未对幻想乡造成真正的伤害，只是让一群笨蛋妖精狂躁了些而已。 \n\n谁也不知道门后的秘神心中真正的想法。", "description": "给定一场长度为 $n$ 的正整数序列 $a$ 和一个长度为 $m$ 的正整数序列 $b$。\n\n现在蓝根据序列 $a$ 与序列 $b$ 构造了一个 $n$ 行 $m$ 列的正整数矩阵 $A$ 满足 $A_{i,j}=a_ib_j$，你需要构造 $n+1$ 行 $t$ 列的正整数矩阵 $B$ 满足以下条件：\n\n- 矩阵的每个元素取值在 $[1,m]$ 间；\n- 矩阵同一行的元素**两两**不相同；\n- 矩阵的每列**相邻元素**不同；\n- 在所有满足上面三项要求的矩阵中**最小化**下式：\n$$f(B)=\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{t}\\sum\\limits_{k=\\min(B_{i,j},B_{i+1,j})}^{\\max(B_{i,j},B_{i+1,j})}A_{i,k}$$\n\n请输出构造出的 $B$ 矩阵的 $f(B)$ 的值模 $10^9+7$ 的结果。", "inputFormat": "第一行三个整数 $n,m,t$。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\cdots a_n$，含义如题面中所述。\n\n接下来一行 $m$ 个整数 $b_1,b_2,\\cdots b_m$，含义如题面中所述。\n\n", "outputFormat": "输出一行，表示构造出的 $B$ 矩阵的 $f(B)$ 的值模 $10^9+7$ 的结果。", "hint": "### 样例解释 1\n\n根据题意，可以构造出矩阵 $A=\\begin{bmatrix}54 & 9 \\\\ 54 & 9 \\end{bmatrix}$。\n\n你需要构造出的 $3$ 行 $2$ 列的矩阵 $B=\\begin{bmatrix}1 & 2 \\\\ 2 & 1 \\\\ 1 & 2 \\end{bmatrix}$，此时 $f(B)=252$ 为最小值\n\n可以证明 $f(B)=252$ 为所有情况中，$f(B)$ 的最小值。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n \\le } & \\bm{m \\le } & \\bm{t \\le } & \\textbf{特殊性质} & \\textbf{分值}\\\\\\hline\n1 & 10 & 10 & 10 & - & 5 \\\\\\hline\n2 & 100 & 100 & 100 & - & 5 \\\\\\hline\n3 & 10^3 & 10^3 & 10^3 & - & 15 \\\\\\hline\n4 & 5\\times 10^4 & 5\\times 10^4 & 5\\times 10^4 & - & 30 \\\\\\hline\n5 & 5\\times 10^5 & 5\\times 10^5 & 5\\times 10^5 & \\textbf{A} & 10 \\\\\\hline\n6 & 5\\times 10^5 & 5\\times 10^5 & 5\\times 10^5 & \\textbf{B} & 10 \\\\\\hline\n7 & 5\\times 10^5 & 5\\times 10^5 & 5\\times 10^5 & - & 25 \\\\\\hline\n\\end{array}$$\n\n- **特殊性质** $\\textbf{A}$：保证 $a_i=1$；\n- **特殊性质** $\\textbf{B}$：保证 $m=t$。\n\n对于全部数据，保证 $1\\le a_i, b_i\\le 10^9$，$1\\le n, m, t\\le 5\\times 10^5 $，$t\\le m$。保证数据有解。", "locale": "zh-CN"}}}
{"pid": "P8545", "type": "P", "difficulty": 7, "samples": [["4", "4\n3 1 2 3\n3 1 2 4\n3 1 3 4\n3 2 3 4"], ["5", "7\n4 1 2 3 4\n3 1 2 5\n3 1 3 5\n3 1 4 5\n3 2 3 5\n3 2 4 5\n3 3 4 5\n"]], "limits": {"time": [1000, 1000], "memory": [128000, 128000]}, "tags": ["数论", "洛谷原创", "提交答案", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-2」不败的无尽兵团", "background": "畜生界是一个被动物灵所占据的，究极的弱肉强食的空间，也是个被几个组织所支配的世界——劲牙组、鬼杰组、刚欲同盟……\n\n在这些动物灵其中也有一些灵长类动物的灵，也就是人类灵，它们弱小但又手脚灵活，作为完完全全的奴隶苟存在灵长园这一娱乐设施中。\n\n但人类的灵也是有信仰的，它们向神明祈求，神也回应了人类的祈求，向人类给予了信仰的偶像。然而，人类灵原本只是皈依于存在于偶像背后的神性，却逐渐开始信仰起偶像本身来。结果，自然而然地，偶像开始支配人类，使得灵长园变成一个凶恶的失控组织。\n\n畜生界也因为灵长园的暴动变得混乱，为了打倒偶像，鬼杰组希望能够卷入地上的人类，借用人类之手毁灭灵长园。动物灵们也就来到了地上，也就是幻想乡，带领灵梦一行人一同前往地狱。", "description": "### 简要题意\n\n对于正整数 $n$（$n$ 为 $529$ 或 $625$），$A=\\{1,2,\\cdots,n\\}$ 的 $m \\ge 2$ 个子集 $B_1,B_2,\\cdots,B_m(|B_i| \\geq 3)$ 为好的，如果对于 $A$ 的每一个三元子集 $C$，都存在 **恰好** 一个 $i$ 使得 $C$ 为 $B_i$ 的子集。构造一个好的子集族使得 $m$ 尽量小（不超过题目给定的评分参数）。\n\n### 原始题意\n\n一路进入畜生界的灵梦，遭遇到了埴轮兵团的首长，杖刀偶磨弓的阻拦。\n\n埴轮兵团由 $n$ 个战士组成，它们编号为 $1,2,\\dots,n$。战士数量为 $529$ 或者 $625$。作为一个兵团，要做到最好的进攻与防守，埴轮之间存在 $m$ 组配合关系 $B_1,B_2,\\dots,B_m$，每组关系包含若干个不同（但不少于 $3$ 个）的埴轮战士，但不同组的关系中包含的埴轮战士可以重复。\n\n但是灵梦并不事先知道这些配合关系，而且由于埴轮兵团配合默契，灵梦难以强行击败它们。在动物灵的帮助之下，灵梦发现，这些埴轮满足如下特点：从埴轮兵团中任意选出 $3$ 个埴轮，都存在 **恰好** 一个 $i$，使得这三个埴轮是 $B_i$ 的一个子集。在满足这个特点的基础之上，由于磨弓的精力有限，无法同时维护太多组配合关系。因此，$m$ 是一个大于等于 $2$ 的一个正整数，且其小于等于 $m_{ans}$。\n\n现在灵梦告诉了你埴轮兵团的总人数，请你告诉她一种可能的埴轮兵团配合的情况，帮助她打败杖刀偶磨弓，进入灵长园。", "inputFormat": "第一行有一个正整数 $n$，含义如题意所示。保证 $n=529$ 或者 $625$。", "outputFormat": "第一行输出一个正整数 $m$，表示你构造的方案使用的集合的总个数。应当满足 $m\\ge 2$。\n\n接下来 $m$ 行，每行输出若干个整数。第一个整数 $s$ 表示你构造的 $B_i$ 的大小，应当满足 $n\\ge s>0$。接下来 $s$ 个整数描述 $B_i$ 内的元素，中间用空格隔开。", "hint": "### 样例 1 解释\n\n**样例仅供理解题意参考。实际数据中，$n$ 只会为 $529$ 或 $625$。**\n\n由于 $m>1$，因此结果不能为 $\\{\\{1,2,3,4\\}\\}$；又因为 $|B_i|< 3$ 时 $B_i$ 无用，于是唯一的方案就是列出 $\\{1,2,3,4\\}$ 的所有三元子集 $\\{\\{1,2,3\\},\\{1,2,4\\},\\{1,3,4\\},\\{2,3,4\\}\\}$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n=} & \\bm{m_{\\text{ans}}=} & \\textbf{分值} \\cr\\hline\n1 & 529 & 1.25\\times 10^4 & 75 \\cr\\hline\n2 & 625 & 1.60\\times 10^4 & 25 \\cr\\hline\n\\end{array}$$\n\n如果你输出的方案不合法，那么你将不能获得该测试点的得分。\n\n当你构造的解符合题设，并且 $m$ 的值不超过 $m_{\\text{ans}}$，你才能获得该测试点的分值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」不败的无尽兵团", "background": "畜生界是一个被动物灵所占据的，究极的弱肉强食的空间，也是个被几个组织所支配的世界——劲牙组、鬼杰组、刚欲同盟……\n\n在这些动物灵其中也有一些灵长类动物的灵，也就是人类灵，它们弱小但又手脚灵活，作为完完全全的奴隶苟存在灵长园这一娱乐设施中。\n\n但人类的灵也是有信仰的，它们向神明祈求，神也回应了人类的祈求，向人类给予了信仰的偶像。然而，人类灵原本只是皈依于存在于偶像背后的神性，却逐渐开始信仰起偶像本身来。结果，自然而然地，偶像开始支配人类，使得灵长园变成一个凶恶的失控组织。\n\n畜生界也因为灵长园的暴动变得混乱，为了打倒偶像，鬼杰组希望能够卷入地上的人类，借用人类之手毁灭灵长园。动物灵们也就来到了地上，也就是幻想乡，带领灵梦一行人一同前往地狱。", "description": "### 简要题意\n\n对于正整数 $n$（$n$ 为 $529$ 或 $625$），$A=\\{1,2,\\cdots,n\\}$ 的 $m \\ge 2$ 个子集 $B_1,B_2,\\cdots,B_m(|B_i| \\geq 3)$ 为好的，如果对于 $A$ 的每一个三元子集 $C$，都存在 **恰好** 一个 $i$ 使得 $C$ 为 $B_i$ 的子集。构造一个好的子集族使得 $m$ 尽量小（不超过题目给定的评分参数）。\n\n### 原始题意\n\n一路进入畜生界的灵梦，遭遇到了埴轮兵团的首长，杖刀偶磨弓的阻拦。\n\n埴轮兵团由 $n$ 个战士组成，它们编号为 $1,2,\\dots,n$。战士数量为 $529$ 或者 $625$。作为一个兵团，要做到最好的进攻与防守，埴轮之间存在 $m$ 组配合关系 $B_1,B_2,\\dots,B_m$，每组关系包含若干个不同（但不少于 $3$ 个）的埴轮战士，但不同组的关系中包含的埴轮战士可以重复。\n\n但是灵梦并不事先知道这些配合关系，而且由于埴轮兵团配合默契，灵梦难以强行击败它们。在动物灵的帮助之下，灵梦发现，这些埴轮满足如下特点：从埴轮兵团中任意选出 $3$ 个埴轮，都存在 **恰好** 一个 $i$，使得这三个埴轮是 $B_i$ 的一个子集。在满足这个特点的基础之上，由于磨弓的精力有限，无法同时维护太多组配合关系。因此，$m$ 是一个大于等于 $2$ 的一个正整数，且其小于等于 $m_{ans}$。\n\n现在灵梦告诉了你埴轮兵团的总人数，请你告诉她一种可能的埴轮兵团配合的情况，帮助她打败杖刀偶磨弓，进入灵长园。", "inputFormat": "第一行有一个正整数 $n$，含义如题意所示。保证 $n=529$ 或者 $625$。", "outputFormat": "第一行输出一个正整数 $m$，表示你构造的方案使用的集合的总个数。应当满足 $m\\ge 2$。\n\n接下来 $m$ 行，每行输出若干个整数。第一个整数 $s$ 表示你构造的 $B_i$ 的大小，应当满足 $n\\ge s>0$。接下来 $s$ 个整数描述 $B_i$ 内的元素，中间用空格隔开。", "hint": "### 样例 1 解释\n\n**样例仅供理解题意参考。实际数据中，$n$ 只会为 $529$ 或 $625$。**\n\n由于 $m>1$，因此结果不能为 $\\{\\{1,2,3,4\\}\\}$；又因为 $|B_i|< 3$ 时 $B_i$ 无用，于是唯一的方案就是列出 $\\{1,2,3,4\\}$ 的所有三元子集 $\\{\\{1,2,3\\},\\{1,2,4\\},\\{1,3,4\\},\\{2,3,4\\}\\}$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n=} & \\bm{m_{\\text{ans}}=} & \\textbf{分值} \\cr\\hline\n1 & 529 & 1.25\\times 10^4 & 75 \\cr\\hline\n2 & 625 & 1.60\\times 10^4 & 25 \\cr\\hline\n\\end{array}$$\n\n如果你输出的方案不合法，那么你将不能获得该测试点的得分。\n\n当你构造的解符合题设，并且 $m$ 的值不超过 $m_{\\text{ans}}$，你才能获得该测试点的分值。", "locale": "zh-CN"}}}
{"pid": "P8546", "type": "P", "difficulty": 2, "samples": [["5\n10001\n01010\n00100\n01011\n00011", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "小挖的 X 献身", "background": "", "description": "给定一张 $n\\times  n$ 的 $01$ 方阵，请计算其中 X 的数目。\n\nX 定义为用 $1$ 填充且形状为 X 的联通块。具体的，X 由左向斜线 `\\` 和右向斜线 `/` 构成，且需要保证左向斜线和右向斜线**长度相等**，而且 X 是中心对称图形，斜线长度大于 1。\n\n例如：\n\n```cpp\n101\n010\n101\n```\n有一个斜线长度为 $3$ 的 X。\n\n```cpp\n1001\n0110\n0110\n1001\n````\n\n则有两个斜线长度分别为 $2,4$ 的 X。\n\n```cpp\n10001\n01010\n00100\n01010\n00001\n```\n\n仅有一个斜线长度为 $3$ 的 X 。", "inputFormat": "第 $1$ 行，共一个正整数 $n$。\n\n接下来 $n$ 行每行一个长度为 $n$ 的 $01$ 串，描述了一个 $01$ 矩阵。", "outputFormat": "共 $1$ 行，一个非负整数，表示 X 的数目。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 3$。\n\n对于 $40\\%$ 的数据，$1\\leq n\\leq 10$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的 X 献身", "background": "", "description": "给定一张 $n\\times  n$ 的 $01$ 方阵，请计算其中 X 的数目。\n\nX 定义为用 $1$ 填充且形状为 X 的联通块。具体的，X 由左向斜线 `\\` 和右向斜线 `/` 构成，且需要保证左向斜线和右向斜线**长度相等**，而且 X 是中心对称图形，斜线长度大于 1。\n\n例如：\n\n```cpp\n101\n010\n101\n```\n有一个斜线长度为 $3$ 的 X。\n\n```cpp\n1001\n0110\n0110\n1001\n````\n\n则有两个斜线长度分别为 $2,4$ 的 X。\n\n```cpp\n10001\n01010\n00100\n01010\n00001\n```\n\n仅有一个斜线长度为 $3$ 的 X 。", "inputFormat": "第 $1$ 行，共一个正整数 $n$。\n\n接下来 $n$ 行每行一个长度为 $n$ 的 $01$ 串，描述了一个 $01$ 矩阵。", "outputFormat": "共 $1$ 行，一个非负整数，表示 X 的数目。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 3$。\n\n对于 $40\\%$ 的数据，$1\\leq n\\leq 10$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P8547", "type": "P", "difficulty": 2, "samples": [["6\n34\n60\n100\n118\n50\n106", "1\n1\n4\n5\n1\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "小挖的时间", "background": "", "description": "小挖有一个电子表，采用只显示小时和分钟的 $12$ 小时制，即只显示 $12:00\\sim 11:59$，$12:59$ 后的时刻是 $1:00$。\n\n小时数不会有前导零，但分钟数可以（比如 $7:59$ 不会写成 $07:59$，而 $10:03$ 不会写成 $10:3$）。\n\n小挖从某天**中午**（即 $12:00$）开始盯着这块电子表，一共会持续盯 $T$ 分钟。Ta 现在想知道，一共会看到多少次成**等差数列**的时刻呢？\n\n**等差数列**的定义如下：如果一个数列是等差数列，那么第一个数后面的每一个数，都是前面一个数加上一个固定的差值。比如 $11:11$ 就是一个固定差值为 $0$ 的等差数列时刻，$12:34$ 就是一个固定差值为 $1$ 的等差数列时刻。\n\n如果你稍微留心一点，就会发现我没有给差值明确的大小定义，所以正数负数皆可。", "inputFormat": "第 $1$ 行，一个正整数 $D$，表示该测试点有共 $D$ 组测试数据。\n\n第 $2\\sim D+1$ 行，每行一个非负整数 $T$，含义见题目描述。", "outputFormat": "共 $D$ 行，每行一个整数 $ans$ 表示看到的等差数列时刻数目。", "hint": "对于 $30\\%$ 的数据，$0\\leq T\\leq 60$。\n\n对于 $60\\%$ 的数据，$0\\leq T\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$0\\leq T \\leq 10^9$，$1\\leq D\\leq 500$。\n\n#### 样例说明\n\n对于第一个询问 $34$，询问的是从 $12:00\\sim 12:34$ 的时刻。其中仅有 $12:34$ 一个时刻满足题意。\n\n对于第三个询问 $100$，询问的是从 $12:00\\sim 1:40$ 的时刻。其中有 $12:34,1:11,1:23,1:35$ 四个符合要求的时刻。\n\n对于第四个询问 $118$，询问的是从 $12:00\\sim 1:58$ 的时刻。其中有 $12:34,1:11,1:23,1:35,1:47$ 五个符合要求的时刻。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的时间", "background": "", "description": "小挖有一个电子表，采用只显示小时和分钟的 $12$ 小时制，即只显示 $12:00\\sim 11:59$，$12:59$ 后的时刻是 $1:00$。\n\n小时数不会有前导零，但分钟数可以（比如 $7:59$ 不会写成 $07:59$，而 $10:03$ 不会写成 $10:3$）。\n\n小挖从某天**中午**（即 $12:00$）开始盯着这块电子表，一共会持续盯 $T$ 分钟。Ta 现在想知道，一共会看到多少次成**等差数列**的时刻呢？\n\n**等差数列**的定义如下：如果一个数列是等差数列，那么第一个数后面的每一个数，都是前面一个数加上一个固定的差值。比如 $11:11$ 就是一个固定差值为 $0$ 的等差数列时刻，$12:34$ 就是一个固定差值为 $1$ 的等差数列时刻。\n\n如果你稍微留心一点，就会发现我没有给差值明确的大小定义，所以正数负数皆可。", "inputFormat": "第 $1$ 行，一个正整数 $D$，表示该测试点有共 $D$ 组测试数据。\n\n第 $2\\sim D+1$ 行，每行一个非负整数 $T$，含义见题目描述。", "outputFormat": "共 $D$ 行，每行一个整数 $ans$ 表示看到的等差数列时刻数目。", "hint": "对于 $30\\%$ 的数据，$0\\leq T\\leq 60$。\n\n对于 $60\\%$ 的数据，$0\\leq T\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$0\\leq T \\leq 10^9$，$1\\leq D\\leq 500$。\n\n#### 样例说明\n\n对于第一个询问 $34$，询问的是从 $12:00\\sim 12:34$ 的时刻。其中仅有 $12:34$ 一个时刻满足题意。\n\n对于第三个询问 $100$，询问的是从 $12:00\\sim 1:40$ 的时刻。其中有 $12:34,1:11,1:23,1:35$ 四个符合要求的时刻。\n\n对于第四个询问 $118$，询问的是从 $12:00\\sim 1:58$ 的时刻。其中有 $12:34,1:11,1:23,1:35,1:47$ 五个符合要求的时刻。", "locale": "zh-CN"}}}
{"pid": "P8548", "type": "P", "difficulty": 4, "samples": [["5 1\n2 4 5\n4 3 3\n1 3 2\n3 4 3\n3 2 5\n10 10\n", "15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "背包 DP"], "title": "小挖的买花", "background": "小挖喜欢买花，但是 ta 太懒了！所以这个任务全权交给了你。", "description": "花店里只有 $n$ 株花，每一株花都有三个属性：价格 $cost_i$、美丽度 $be_i$、新鲜程度 $fr_i$。\n\n小挖每次都有不同的要求。准确来说，对于第 $j$ 次买花，你手里的钱**至多能买下总价为 $c_j$ 的花**。同时，小挖还要求购买花的**新鲜程度总和大于等于 $f_j$**。而小挖希望知道，在满足 ta 给出的条件后，购买**花的美丽度总和**的最大值是多少？如果拥有的钱无论如何都无法满足新鲜程度总和大于等于 $f_j$ 的要求，输出 $0$。\n\n\n小挖一共要让你买 $q$ 次花，你能否正确回答 ta 的问题呢？询问彼此独立。", "inputFormat": "第 $1$ 行，共两个正整数 $n,q$。\n\n第 $2\\sim n+1$ 行，每行三个正整数 $cost_i,fr_i,be_i$，分别表示一株花的三个属性。\n\n第 $n+2\\sim n+q+1$ 行，每行两个正整数 $c_j,f_j$，表示每次买花时的要求。", "outputFormat": "共 $q$ 行，每行一个整数，表示美丽度总和的最大值。如果无解，输出 $0$。", "hint": "对于 $20\\%$ 的数据，$3\\leq n,q\\leq 16$。\n\n对于 $40\\%$ 的数据，$3\\leq n,q\\leq 30$，$0\\leq c_j,f_j\\leq 50$。\n\n对于 $60\\%$ 的数据，$3\\leq n\\leq 100$，$1\\leq q\\leq 5\\times 10^4$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 100$。\n\n对于另外 $20\\%$ 的数据，对于每次买花，都有 $f_j=0$。\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 500$，$\\boldsymbol{1\\leq q\\leq 10^6}$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 500$，$1\\leq be_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的买花", "background": "小挖喜欢买花，但是 ta 太懒了！所以这个任务全权交给了你。", "description": "花店里只有 $n$ 株花，每一株花都有三个属性：价格 $cost_i$、美丽度 $be_i$、新鲜程度 $fr_i$。\n\n小挖每次都有不同的要求。准确来说，对于第 $j$ 次买花，你手里的钱**至多能买下总价为 $c_j$ 的花**。同时，小挖还要求购买花的**新鲜程度总和大于等于 $f_j$**。而小挖希望知道，在满足 ta 给出的条件后，购买**花的美丽度总和**的最大值是多少？如果拥有的钱无论如何都无法满足新鲜程度总和大于等于 $f_j$ 的要求，输出 $0$。\n\n\n小挖一共要让你买 $q$ 次花，你能否正确回答 ta 的问题呢？询问彼此独立。", "inputFormat": "第 $1$ 行，共两个正整数 $n,q$。\n\n第 $2\\sim n+1$ 行，每行三个正整数 $cost_i,fr_i,be_i$，分别表示一株花的三个属性。\n\n第 $n+2\\sim n+q+1$ 行，每行两个正整数 $c_j,f_j$，表示每次买花时的要求。", "outputFormat": "共 $q$ 行，每行一个整数，表示美丽度总和的最大值。如果无解，输出 $0$。", "hint": "对于 $20\\%$ 的数据，$3\\leq n,q\\leq 16$。\n\n对于 $40\\%$ 的数据，$3\\leq n,q\\leq 30$，$0\\leq c_j,f_j\\leq 50$。\n\n对于 $60\\%$ 的数据，$3\\leq n\\leq 100$，$1\\leq q\\leq 5\\times 10^4$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 100$。\n\n对于另外 $20\\%$ 的数据，对于每次买花，都有 $f_j=0$。\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 500$，$\\boldsymbol{1\\leq q\\leq 10^6}$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 500$，$1\\leq be_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8549", "type": "P", "difficulty": 4, "samples": [["3\n701210842\n832478367\n564653501\n386648785\n457235610\n021170423\n410702257\n327514806\n685368341", "12\n1 1\n1 1\n1 2\n1 3\n2 1\n2 2\n2 3\n2 3\n3 1\n3 1\n3 3\n3 3"], ["4\n36952EA1CF74857C\n18E207C9B36D0419\n4DAC56BF8209DFE2\nB07FD3485AE1BA36\n36B5B7CA6E5839FE\nA4985620FD32A8B7\n01CF94DF1B7C0564\n7DE283E14A09C21D\nB46D729D0F7246B0\n8CF560154BCA159E\n1327AB8459D8D278\nEA09FC3E6E31A3CF\n8E910623C5622B60\n320BF7EDB847CDFE\n45AF5A18310F183A\n6CD7B9C4A9ED7459\n", "17\n1 1\n1 1\n1 2\n1 2\n1 3\n1 3\n1 4\n2 2\n2 3\n2 4\n3 1\n3 2\n3 2\n3 3\n4 1\n4 2\n4 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["深度优先搜索 DFS"], "title": "小挖的核燃料填充", "background": "", "description": "小挖做 Web 设计的时候，剧情里插入了酷炫的核填充情节！但很可惜，受制于技术，情节对应的游戏竟然是数独……\n\n一开始，会给定你一个有 $n\\times n$ 个**宫**，每个宫中有 $n \\times n$ 个元素，且**早已全部正确填好**的 $n$ 阶数独。本题中数独游戏的详细表示与玩法见下方 **“补充说明”** 。\n\n但小挖会把其中**一些宫向左或者向右转 90 度/180 度**。比如，若一个宫初始为\n\n```cpp\n087\n654\n321\n```\n\n那么它向左旋转 $90$ 度后会变成：\n\n```cpp\n741\n852\n063\n```\n你在恢复数独时，也**只能将一些宫向左转 $90$ 度**，一次旋转算作一步。现在小挖想考考你：如果把操作后的数独重新恢复成合法的数独，最少需要多少步呢？\n\n如果一开始小挖给出的数独局面不可以通过任意次、任意位置的左旋得到，则输出 $-1$ 。~~为什么呢？因为小挖给出的是“自认为完全正确的”数独，但实际不一定。~~", "inputFormat": "第 $1$ 行，输入一个正整数 $n$。\n\n第 $2\\sim n^2+1$ 行，每行输入 $n^2$ 个 $16$ 进制整数，表示一个给定的数独局面，表示小挖操作之后的游戏。", "outputFormat": "第 $1$ 行输出一个整数，表示最小步数 $s$。\n\n第 $2\\sim s+1$ 行，每行输出两个整数 $x_i,y_i$。表示对行号列号为 $x_i,y_i$ 的宫向左旋转了 $90$ 度。\n\n数据保证当存在解时，最优解方案唯一。输出时请按如下规则输出：\n\n设 $i<j$ 表示输出方案时的第 $i,j$ 两步。则：\n\n- $x_i\\leq x_j$。\n- 若 $x_i= x_j$ ，则 $y_i\\leq y_j$。\n\n若不存在合法方案，请输出 $-1$。", "hint": "对于 $40\\%$ 的数据，$2 \\le n\\leq 3$。\n\n对于 $100\\%$ 的数据，$2 \\le n\\leq 4$。\n\n## Hint\n\n$n$ 阶数独合法的条件：每一行、每一列、每一个粗线宫 $(n\\times n)$ 内的数字均含 $0\\sim  n^2-1$，且不重复。\n\n需要注意的是，本题内对于 $4$ 阶数独的表示方式中 $>9$ 的数字采用了十六进制表示法。准确来说 $\\mathrm A=10$，$\\mathrm B=11$，$\\mathrm C=12$，$\\mathrm D=13$，$\\mathrm E=14$，$\\mathrm F=15$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的核燃料填充", "background": "", "description": "小挖做 Web 设计的时候，剧情里插入了酷炫的核填充情节！但很可惜，受制于技术，情节对应的游戏竟然是数独……\n\n一开始，会给定你一个有 $n\\times n$ 个**宫**，每个宫中有 $n \\times n$ 个元素，且**早已全部正确填好**的 $n$ 阶数独。本题中数独游戏的详细表示与玩法见下方 **“补充说明”** 。\n\n但小挖会把其中**一些宫向左或者向右转 90 度/180 度**。比如，若一个宫初始为\n\n```cpp\n087\n654\n321\n```\n\n那么它向左旋转 $90$ 度后会变成：\n\n```cpp\n741\n852\n063\n```\n你在恢复数独时，也**只能将一些宫向左转 $90$ 度**，一次旋转算作一步。现在小挖想考考你：如果把操作后的数独重新恢复成合法的数独，最少需要多少步呢？\n\n如果一开始小挖给出的数独局面不可以通过任意次、任意位置的左旋得到，则输出 $-1$ 。~~为什么呢？因为小挖给出的是“自认为完全正确的”数独，但实际不一定。~~", "inputFormat": "第 $1$ 行，输入一个正整数 $n$。\n\n第 $2\\sim n^2+1$ 行，每行输入 $n^2$ 个 $16$ 进制整数，表示一个给定的数独局面，表示小挖操作之后的游戏。", "outputFormat": "第 $1$ 行输出一个整数，表示最小步数 $s$。\n\n第 $2\\sim s+1$ 行，每行输出两个整数 $x_i,y_i$。表示对行号列号为 $x_i,y_i$ 的宫向左旋转了 $90$ 度。\n\n数据保证当存在解时，最优解方案唯一。输出时请按如下规则输出：\n\n设 $i<j$ 表示输出方案时的第 $i,j$ 两步。则：\n\n- $x_i\\leq x_j$。\n- 若 $x_i= x_j$ ，则 $y_i\\leq y_j$。\n\n若不存在合法方案，请输出 $-1$。", "hint": "对于 $40\\%$ 的数据，$2 \\le n\\leq 3$。\n\n对于 $100\\%$ 的数据，$2 \\le n\\leq 4$。\n\n## Hint\n\n$n$ 阶数独合法的条件：每一行、每一列、每一个粗线宫 $(n\\times n)$ 内的数字均含 $0\\sim  n^2-1$，且不重复。\n\n需要注意的是，本题内对于 $4$ 阶数独的表示方式中 $>9$ 的数字采用了十六进制表示法。准确来说 $\\mathrm A=10$，$\\mathrm B=11$，$\\mathrm C=12$，$\\mathrm D=13$，$\\mathrm E=14$，$\\mathrm F=15$。\n", "locale": "zh-CN"}}}
{"pid": "P8550", "type": "P", "difficulty": 2, "samples": [["2\n1 1\n-1\n2 10\n1 -1\n", "No\nYes\n"]], "limits": {"time": [1000, 1000], "memory": [131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "冬之花", "background": "“哭泣并不是因为悲伤，\n\n只是因为活着，眼泪就不自觉跑了出来。”\n\n赫尔德失恋以后，跑到大马路上飙车。因为是飙车，她不愿意一直待在路上，而是跑到路左右的黄沙地上转圈圈。她的便宜车的转向功能出了一些问题，但她真的很想转圈圈。", "description": "给定 $n$ 个数 $a_1, a_2, \\ldots, a_n$，再给定一个非零数 $x$。\n\n你需要进行 ${10}^{100}$ 次操作，每次操作，你需要选定一个下标 $i$（$1 \\le i \\le n$），然后给 $x$ 加上 $a_i$。\n\n你需要保证，在每次操作后，新的 $x$ 值都不能为 $0$。\n\n请判断你能否完成这 ${10}^{100}$ 次操作。", "inputFormat": "**本题有多组测试数据**。\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, x$。\n- 第二行，$n$ 个整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "对于每组数据，输出一行一个字符串，若可以进行 ${10}^{100}$ 次操作，则输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释】**\n\n对于第一组数据，第一次操作只能选择下标 $1$，$a_1=-1$，但 $1+(-1)=0$，因此无法进行操作。输出 `No`。\n\n对于第二组数据，你可以轮流选择下标 $1$ 和 $2$，这样 $x$ 将一直 $+1$、$-1$，从而一直在 $10$ 和 $9$ 之间变化，这样你可以执行任意多次操作。输出 `Yes`。当然，这只是其中一种方案，你还可以有其他的操作方案。\n\n---\n\n**【数据范围】**\n\n- 测试点 1（50 分）：$n = 1$；\n- 测试点 2（50 分）：无特殊限制。\n\n对于所有测试点：$1 \\le T \\le 30$，$1 \\le n \\le 5$，$1 \\le \\lvert x \\rvert, \\lvert a_i \\rvert \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "冬之花", "background": "“哭泣并不是因为悲伤，\n\n只是因为活着，眼泪就不自觉跑了出来。”\n\n赫尔德失恋以后，跑到大马路上飙车。因为是飙车，她不愿意一直待在路上，而是跑到路左右的黄沙地上转圈圈。她的便宜车的转向功能出了一些问题，但她真的很想转圈圈。", "description": "给定 $n$ 个数 $a_1, a_2, \\ldots, a_n$，再给定一个非零数 $x$。\n\n你需要进行 ${10}^{100}$ 次操作，每次操作，你需要选定一个下标 $i$（$1 \\le i \\le n$），然后给 $x$ 加上 $a_i$。\n\n你需要保证，在每次操作后，新的 $x$ 值都不能为 $0$。\n\n请判断你能否完成这 ${10}^{100}$ 次操作。", "inputFormat": "**本题有多组测试数据**。\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, x$。\n- 第二行，$n$ 个整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "对于每组数据，输出一行一个字符串，若可以进行 ${10}^{100}$ 次操作，则输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释】**\n\n对于第一组数据，第一次操作只能选择下标 $1$，$a_1=-1$，但 $1+(-1)=0$，因此无法进行操作。输出 `No`。\n\n对于第二组数据，你可以轮流选择下标 $1$ 和 $2$，这样 $x$ 将一直 $+1$、$-1$，从而一直在 $10$ 和 $9$ 之间变化，这样你可以执行任意多次操作。输出 `Yes`。当然，这只是其中一种方案，你还可以有其他的操作方案。\n\n---\n\n**【数据范围】**\n\n- 测试点 1（50 分）：$n = 1$；\n- 测试点 2（50 分）：无特殊限制。\n\n对于所有测试点：$1 \\le T \\le 30$，$1 \\le n \\le 5$，$1 \\le \\lvert x \\rvert, \\lvert a_i \\rvert \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P8551", "type": "P", "difficulty": 3, "samples": [["4\n1 3\n4 7\n5 9\n7 10\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Bassline", "background": "fuwa↑ fuwa↑ fuwa↑ fuwa↑\n\n赫尔德开始使用当下热潮的聊天软件 BassLine，那么第一步自然是加好友了！加好友既需要确认自己和对方有共同兴趣，又需要能加到足够多的好友。赫尔德将其抽象成了下面这个问题，让你来帮她解决。", "description": "本题中，区间 $[l,r]$ 指所有大于等于 $l$ 且小于等于 $r$ 的整数组成的集合，如 $[3,3]$ 代表 $\\{3\\}$，$[3,7]$ 代表 $\\{3,4,5,6,7\\}$。\n\n给定 $n$ 个区间，第 $i$ 个区间是 $[l_i,r_i]$。\n\n你需要选择两个整数 $x\\le y$，满足：\n\n- 对于所有区间 $[l_i,r_i]$（$1\\le i \\le n$），以下两个条件之一满足：\n\t1. $[x,y]$ 被 $[l_i,r_i]$ 包含，换言之， $[x,y]\\cap[l_i,r_i]=[x,y]$。\n    2.  $[x,y]$ 与 $[l_i,r_i]$ 无交集，换言之，$[x,y]\\cap[l_i,r_i]=\\varnothing$。\n\n若有 $k$ 个区间满足条件 1，则你的得分是 $k(y-x)$。输出你最大的可能的得分。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来 $n$ 行，每行两个数 $l_i,r_i$，描述一个区间。", "outputFormat": "一行一个自然数表示答案。", "hint": "**【样例解释】**\n\n对于样例，$[5,6]$ 是最优的区间之一，其含于 $[4,7],[5,9]$，且与 $[1,3],[7,10]$ 没有交集。此时 $k=2$，因此答案为 $2\\times(6-5)=2$。$[1,3]$ 也是一个最优的区间。\n\n$[5,7]$ 并非合法的区间，因为它与 $[7,10]$ 有交集，也并不含于 $[7,10]$。\n\n---\n\n**【数据范围】**\n\n对于所有数据保证 $1 \\le n \\le 3 \\times {10}^5$，$1 \\le l_i \\le r_i \\le 3 \\times {10}^5$。\n\n- 子任务 1（20 分）：$n,l_i,r_i \\le 10$；\n- 子任务 2（20 分）：$n \\le {10}^3$；\n- 子任务 3（20 分）：$l_i, r_i \\le {10}^3$；\n- 子任务 4（40 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Bassline", "background": "fuwa↑ fuwa↑ fuwa↑ fuwa↑\n\n赫尔德开始使用当下热潮的聊天软件 BassLine，那么第一步自然是加好友了！加好友既需要确认自己和对方有共同兴趣，又需要能加到足够多的好友。赫尔德将其抽象成了下面这个问题，让你来帮她解决。", "description": "本题中，区间 $[l,r]$ 指所有大于等于 $l$ 且小于等于 $r$ 的整数组成的集合，如 $[3,3]$ 代表 $\\{3\\}$，$[3,7]$ 代表 $\\{3,4,5,6,7\\}$。\n\n给定 $n$ 个区间，第 $i$ 个区间是 $[l_i,r_i]$。\n\n你需要选择两个整数 $x\\le y$，满足：\n\n- 对于所有区间 $[l_i,r_i]$（$1\\le i \\le n$），以下两个条件之一满足：\n\t1. $[x,y]$ 被 $[l_i,r_i]$ 包含，换言之， $[x,y]\\cap[l_i,r_i]=[x,y]$。\n    2.  $[x,y]$ 与 $[l_i,r_i]$ 无交集，换言之，$[x,y]\\cap[l_i,r_i]=\\varnothing$。\n\n若有 $k$ 个区间满足条件 1，则你的得分是 $k(y-x)$。输出你最大的可能的得分。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来 $n$ 行，每行两个数 $l_i,r_i$，描述一个区间。", "outputFormat": "一行一个自然数表示答案。", "hint": "**【样例解释】**\n\n对于样例，$[5,6]$ 是最优的区间之一，其含于 $[4,7],[5,9]$，且与 $[1,3],[7,10]$ 没有交集。此时 $k=2$，因此答案为 $2\\times(6-5)=2$。$[1,3]$ 也是一个最优的区间。\n\n$[5,7]$ 并非合法的区间，因为它与 $[7,10]$ 有交集，也并不含于 $[7,10]$。\n\n---\n\n**【数据范围】**\n\n对于所有数据保证 $1 \\le n \\le 3 \\times {10}^5$，$1 \\le l_i \\le r_i \\le 3 \\times {10}^5$。\n\n- 子任务 1（20 分）：$n,l_i,r_i \\le 10$；\n- 子任务 2（20 分）：$n \\le {10}^3$；\n- 子任务 3（20 分）：$l_i, r_i \\le {10}^3$；\n- 子任务 4（40 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8552", "type": "P", "difficulty": 5, "samples": [["3\n3\n2 3\n1 3\n4\n2 3\n3 4\n4 1\n7\n2 5\n5 1\n2 6\n2 3\n7 4\n3 7\n", "1\n1\n2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Rabbit", "background": "“说实话，最喜欢你了；因为长得好看，所以最喜欢你了。\n\n你的性格，我最喜欢了；虽然不太清楚，但是最喜欢了。”\n\n赫尔德最近加入了一个奇怪的社区，那里面流行一种“配对追星”的活动。大家在人群中找到那个最耀眼的人，就作为自己的偶像了。", "description": "赫尔德不知道这样是否好，为了研究这个活动，她想先从这个活动能持续多久开始研究。于是她抽象了这个问题。\n\n给定一棵树，共 $n$ 个点，分别编号为 $1\\sim n$。\n\n每次操作，你需要选出三个点 $a,b,c$ 将他们标记，满足：\n\n- $c$ 是 $a$ 到 $b$ 简单路径上编号最大的点；\n- $a,b,c$ 两两不同；\n- $a,b,c$ 先前都没有被标记过。\n\n问至多能进行多少次操作。\n\n---\n\n**【提示】**\n\n树上 $p$ 到 $q$ 的简单路径是指一个数列 $a_1,\\dots,a_k$，满足：\n\n1. $a_1=p$，$a_k=q$；\n2. 其中没有重复元素；\n3. 对于所有 $1\\le i<k$，$a_{i+1}$ 与 $a_i$ 有边相连。", "inputFormat": "本题有多组数据。\n\n第一行是数据组数 $T$，接下来 $T$ 组数据，每组数据格式如下：\n\n第一行一个正整数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$，描述树上的一条连接 $x,y$ 的边。", "outputFormat": "对于每组数据输出一行一个非负整数，为答案。", "hint": "**【样例解释】**\n\n对于第一组数据，可以选择 $a=1,b=2,c=3$。\n\n对于第三组数据，可以依次选择 $a=3,b=4,c=7$，$a=1,b=2,c=5$。\n\n---\n\n**【数据范围】**\n\n设 $S$ 为每个测试点所有数据中 $n$ 的和。\n\n对于所有数据：$1\\le T\\le 3\\times 10^4$，$1\\le n\\le 2\\times 10^5$，$S\\le 6\\times 10^5$。\n\n$$\n\\begin{array}{c|c|c|c|c|c} \\hline\n\\textbf{子任务编号} & ~~~~~~~n\\le ~~~~~~~ & ~~~~~~~S\\le ~~~~~~~ & \\textbf{特殊性质} & \\textbf{子任务依赖} & \\textbf{~~~分数~~~} \\\\ \\hline\n\\textsf{1} & 5 & & & & 3 \\\\ \\hline\n\\textsf{2} & 20 & 60 & & & 5 \\\\ \\hline\n\\textsf{3} & & & \\textsf{B} & & 12 \\\\ \\hline\n\\textsf{4} & 333 & 10^3 & \\textsf{A} & & 9 \\\\ \\hline\n\\textsf{5} & 333 & 10^3 & & \\textsf{2,4} & 7 \\\\ \\hline\n\\textsf{6} & 3333 & 10^4 & \\textsf{A} & \\textsf{4} & 15 \\\\ \\hline\n\\textsf{7} & 3333 & 10^4 & & \\textsf{5,6} & 13 \\\\ \\hline\n\\textsf{8} & & & \\textsf{A} & \\textsf{6} & 12 \\\\ \\hline\n\\textsf{9} & & & & \\textsf{1,3,7,8} & 24 \\\\ \\hline\n\\end{array}\n$$\n\n特殊限制 $\\textsf{A}$：保证树的形态是一条链，即树上不存在度数大于 2 的点。\n\n特殊限制 $\\textsf{B}$：保证树随机生成：对于每个整数 $i\\in [2,n]$，均匀随机选择整数 $j\\in [1,i-1]$ 并在 $i,j$ 间连边，然后随机打乱点的编号。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Rabbit", "background": "“说实话，最喜欢你了；因为长得好看，所以最喜欢你了。\n\n你的性格，我最喜欢了；虽然不太清楚，但是最喜欢了。”\n\n赫尔德最近加入了一个奇怪的社区，那里面流行一种“配对追星”的活动。大家在人群中找到那个最耀眼的人，就作为自己的偶像了。", "description": "赫尔德不知道这样是否好，为了研究这个活动，她想先从这个活动能持续多久开始研究。于是她抽象了这个问题。\n\n给定一棵树，共 $n$ 个点，分别编号为 $1\\sim n$。\n\n每次操作，你需要选出三个点 $a,b,c$ 将他们标记，满足：\n\n- $c$ 是 $a$ 到 $b$ 简单路径上编号最大的点；\n- $a,b,c$ 两两不同；\n- $a,b,c$ 先前都没有被标记过。\n\n问至多能进行多少次操作。\n\n---\n\n**【提示】**\n\n树上 $p$ 到 $q$ 的简单路径是指一个数列 $a_1,\\dots,a_k$，满足：\n\n1. $a_1=p$，$a_k=q$；\n2. 其中没有重复元素；\n3. 对于所有 $1\\le i<k$，$a_{i+1}$ 与 $a_i$ 有边相连。", "inputFormat": "本题有多组数据。\n\n第一行是数据组数 $T$，接下来 $T$ 组数据，每组数据格式如下：\n\n第一行一个正整数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$，描述树上的一条连接 $x,y$ 的边。", "outputFormat": "对于每组数据输出一行一个非负整数，为答案。", "hint": "**【样例解释】**\n\n对于第一组数据，可以选择 $a=1,b=2,c=3$。\n\n对于第三组数据，可以依次选择 $a=3,b=4,c=7$，$a=1,b=2,c=5$。\n\n---\n\n**【数据范围】**\n\n设 $S$ 为每个测试点所有数据中 $n$ 的和。\n\n对于所有数据：$1\\le T\\le 3\\times 10^4$，$1\\le n\\le 2\\times 10^5$，$S\\le 6\\times 10^5$。\n\n$$\n\\begin{array}{c|c|c|c|c|c} \\hline\n\\textbf{子任务编号} & ~~~~~~~n\\le ~~~~~~~ & ~~~~~~~S\\le ~~~~~~~ & \\textbf{特殊性质} & \\textbf{子任务依赖} & \\textbf{~~~分数~~~} \\\\ \\hline\n\\textsf{1} & 5 & & & & 3 \\\\ \\hline\n\\textsf{2} & 20 & 60 & & & 5 \\\\ \\hline\n\\textsf{3} & & & \\textsf{B} & & 12 \\\\ \\hline\n\\textsf{4} & 333 & 10^3 & \\textsf{A} & & 9 \\\\ \\hline\n\\textsf{5} & 333 & 10^3 & & \\textsf{2,4} & 7 \\\\ \\hline\n\\textsf{6} & 3333 & 10^4 & \\textsf{A} & \\textsf{4} & 15 \\\\ \\hline\n\\textsf{7} & 3333 & 10^4 & & \\textsf{5,6} & 13 \\\\ \\hline\n\\textsf{8} & & & \\textsf{A} & \\textsf{6} & 12 \\\\ \\hline\n\\textsf{9} & & & & \\textsf{1,3,7,8} & 24 \\\\ \\hline\n\\end{array}\n$$\n\n特殊限制 $\\textsf{A}$：保证树的形态是一条链，即树上不存在度数大于 2 的点。\n\n特殊限制 $\\textsf{B}$：保证树随机生成：对于每个整数 $i\\in [2,n]$，均匀随机选择整数 $j\\in [1,i-1]$ 并在 $i,j$ 间连边，然后随机打乱点的编号。", "locale": "zh-CN"}}}
{"pid": "P8553", "type": "P", "difficulty": 7, "samples": [["0 7\n", "Yes\n0 1 3 2 6 7 5 4\n"], ["0 7\n", "yEs\n0 abacaba\n"], ["0 7\n", "yes\n"], ["3 5\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递归", "洛谷原创", "Special Judge", "O2优化", "分治", "构造", "洛谷月赛"], "title": "醒来", "background": "\n“那羡慕的烟火去哪了，那信任的朋友疏远了。\n\n我年幼时坚持过什么，你们还记不记得。”\n\n回想自己儿时的样子，已和现在大不相同了；但想想昨天的自己，却与今天没什么差异。这不经意的改变，让我们已经是另一个样子了。", "description": "赫尔德用一个长为 $r-l+1$ 的数列 $a$ 来描述自己性格的变化。但赫尔德记忆不好，她已经记不清 $a$ 了，只记得非负整数 $l,r$，其中 $l<r$。\n\n不过，她还记得：\n\n1.  $l\\le a_i\\le r$，且 $a_i$ 互不相同。换言之，$a$ 是一个 $l\\sim r$ 的排列。\n2.  对于所有 $1\\le i\\le r-l$，有 $\\operatorname{popcount}(a_i \\mathbin{\\mathrm{xor}} a_{i+1})=1$。换言之，$a$ 中相邻的两个数二进制下只相差一位。\n\n请你告诉她一个可能的 $a$，或告诉她其实不存在这样的 $a$。", "inputFormat": "仅一行，两个非负整数 $l,r$。", "outputFormat": "第一行，若有解输出 `Yes`，若无解则输出 `No`。不区分大小写。\n\n若你输出了 `Yes`，则你可以用以下两种格式之一输出你的构造：\n\n1. 输出一行 $r-l+1$ 个数，表示你构造的排列。\n3. 先输出一个数，表示你构造排列的第一个数。接下来输出一个长为 $r-l$ 的字符串，对于第 $i$ 个字符，若你构造排列第 $i$ 与 $i+1$ 个数相差了 $2^k$，则你应该输出第 $k+1$ 个小写英文字母，即 `(char)('a'+k)`。 \n\n**注意，若你使用格式 1 输出，你可能无法通过最后两个子任务。若您获得了 UKE 的评测结果，请考虑修改输出答案的格式。**\n\n---\n\n**【评分方法】**\n\n本题采用**自定义校验器**检测你的输出。\n\n若你对解的存在性判断错误，你无法获得任何分数。\n\n若你对解的存在性判断正确，你可以获得 $40\\%$ 的分数；若解不存在或你给出了一组正确的构造，则你可以获得剩下 $60\\%$ 的分数。", "hint": "**【样例解释 \\#1、\\#2、\\#3】**\n\n样例输出 \\#1 和 \\#2 对应同一个数列，即 $\\{ 0, 1, 3, 2, 6, 7, 5, 4 \\}$，它们均能获得该测试点 $100 \\%$ 的分数。\n\n样例输出 \\#3 能获得该测试点 $40 \\%$ 的分数。\n\n----\n\n**【数据范围】**\n\n对于所有数据，保证 $0\\le l<r\\le 10^7$。\n\n设 $n=r-l+1$。\n\n| 子任务编号 | $ n \\leq $ | 特殊限制 | 分数 |\n|:---:|:---:|:---:|:---:|\n| $1$ | $ 10 $ | — | $ 9 $ |\n| $2$ | $ 20 $ | — | $ 9 $ |\n| $3$ | $ 10^5 $ | $\\textsf{A, B}$ | $ 10 $ |\n| $4$ | $ 10^5 $ | $\\textsf{A}$ | $ 10 $ |\n| $5$ | $ 2000 $ | $\\textsf{C}$ | $ 25 $ |\n| $6$ | $ 5 \\times 10^5 $ | $\\textsf{D}$ | $ 20 $ |\n| $7$ | $ 3 \\times 10^6 $ | — | $ 10 $ |\n| $8$ | — | — | $ 7 $ |\n\n\n\n$\\textsf A$：保证 $l=0$。\n\n$\\textsf B$：保证 $n$ 是 $2$ 的整数次幂。\n\n$\\textsf C$：保证 $l$ 是偶数，$r$ 是奇数。\n\n$\\textsf D$：本子任务有 5 个测试点，从所有 $n\\ge 2\\times 10^5$ 且有解的数据中随机生成。\n\n---\n\n即使一直在改变，赫尔德也许仍似儿时的自己。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "醒来", "background": "\n“那羡慕的烟火去哪了，那信任的朋友疏远了。\n\n我年幼时坚持过什么，你们还记不记得。”\n\n回想自己儿时的样子，已和现在大不相同了；但想想昨天的自己，却与今天没什么差异。这不经意的改变，让我们已经是另一个样子了。", "description": "赫尔德用一个长为 $r-l+1$ 的数列 $a$ 来描述自己性格的变化。但赫尔德记忆不好，她已经记不清 $a$ 了，只记得非负整数 $l,r$，其中 $l<r$。\n\n不过，她还记得：\n\n1.  $l\\le a_i\\le r$，且 $a_i$ 互不相同。换言之，$a$ 是一个 $l\\sim r$ 的排列。\n2.  对于所有 $1\\le i\\le r-l$，有 $\\operatorname{popcount}(a_i \\mathbin{\\mathrm{xor}} a_{i+1})=1$。换言之，$a$ 中相邻的两个数二进制下只相差一位。\n\n请你告诉她一个可能的 $a$，或告诉她其实不存在这样的 $a$。", "inputFormat": "仅一行，两个非负整数 $l,r$。", "outputFormat": "第一行，若有解输出 `Yes`，若无解则输出 `No`。不区分大小写。\n\n若你输出了 `Yes`，则你可以用以下两种格式之一输出你的构造：\n\n1. 输出一行 $r-l+1$ 个数，表示你构造的排列。\n3. 先输出一个数，表示你构造排列的第一个数。接下来输出一个长为 $r-l$ 的字符串，对于第 $i$ 个字符，若你构造排列第 $i$ 与 $i+1$ 个数相差了 $2^k$，则你应该输出第 $k+1$ 个小写英文字母，即 `(char)('a'+k)`。 \n\n**注意，若你使用格式 1 输出，你可能无法通过最后两个子任务。若您获得了 UKE 的评测结果，请考虑修改输出答案的格式。**\n\n---\n\n**【评分方法】**\n\n本题采用**自定义校验器**检测你的输出。\n\n若你对解的存在性判断错误，你无法获得任何分数。\n\n若你对解的存在性判断正确，你可以获得 $40\\%$ 的分数；若解不存在或你给出了一组正确的构造，则你可以获得剩下 $60\\%$ 的分数。", "hint": "**【样例解释 \\#1、\\#2、\\#3】**\n\n样例输出 \\#1 和 \\#2 对应同一个数列，即 $\\{ 0, 1, 3, 2, 6, 7, 5, 4 \\}$，它们均能获得该测试点 $100 \\%$ 的分数。\n\n样例输出 \\#3 能获得该测试点 $40 \\%$ 的分数。\n\n----\n\n**【数据范围】**\n\n对于所有数据，保证 $0\\le l<r\\le 10^7$。\n\n设 $n=r-l+1$。\n\n| 子任务编号 | $ n \\leq $ | 特殊限制 | 分数 |\n|:---:|:---:|:---:|:---:|\n| $1$ | $ 10 $ | — | $ 9 $ |\n| $2$ | $ 20 $ | — | $ 9 $ |\n| $3$ | $ 10^5 $ | $\\textsf{A, B}$ | $ 10 $ |\n| $4$ | $ 10^5 $ | $\\textsf{A}$ | $ 10 $ |\n| $5$ | $ 2000 $ | $\\textsf{C}$ | $ 25 $ |\n| $6$ | $ 5 \\times 10^5 $ | $\\textsf{D}$ | $ 20 $ |\n| $7$ | $ 3 \\times 10^6 $ | — | $ 10 $ |\n| $8$ | — | — | $ 7 $ |\n\n\n\n$\\textsf A$：保证 $l=0$。\n\n$\\textsf B$：保证 $n$ 是 $2$ 的整数次幂。\n\n$\\textsf C$：保证 $l$ 是偶数，$r$ 是奇数。\n\n$\\textsf D$：本子任务有 5 个测试点，从所有 $n\\ge 2\\times 10^5$ 且有解的数据中随机生成。\n\n---\n\n即使一直在改变，赫尔德也许仍似儿时的自己。", "locale": "zh-CN"}}}
{"pid": "P8554", "type": "P", "difficulty": 7, "samples": [["3 1\n", "6\n"], ["5 3\n", "8\n"], ["50 10", "664411387"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "心跳", "background": "“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $3\\le n\\le 2000,1\\le m\\le n $。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&~~\\bm{n\\le} ~~&~~\\bm{m\\le}~~ &\\textbf{分数}\\cr\\hline \n\\textsf1 & 9 &1&8\\cr\\hline \n\\textsf2 & 18&1&12 \\cr\\hline \n\\textsf3 & 70&1&15\\cr\\hline \n\\textsf4 & 70 &&24\\cr\\hline \n\\textsf5 & 300&&18 \\cr\\hline\n\\textsf6 & &&23\\cr\\hline\\end{array}\n$$\n\n没写就是没特殊限制。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "心跳", "background": "“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $3\\le n\\le 2000,1\\le m\\le n $。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&~~\\bm{n\\le} ~~&~~\\bm{m\\le}~~ &\\textbf{分数}\\cr\\hline \n\\textsf1 & 9 &1&8\\cr\\hline \n\\textsf2 & 18&1&12 \\cr\\hline \n\\textsf3 & 70&1&15\\cr\\hline \n\\textsf4 & 70 &&24\\cr\\hline \n\\textsf5 & 300&&18 \\cr\\hline\n\\textsf6 & &&23\\cr\\hline\\end{array}\n$$\n\n没写就是没特殊限制。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN"}}}
{"pid": "P8555", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 3\n", "291154603\n249561089\n1\n"], ["50 5\n4 7 9 14 17\n", "344293672\n864377042\n192544332\n688054502\n97923957\n"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "嘘月", "background": "“我早已认不出你的眼睛，也没有在想念你的面容；\n\n你还是没有说出再见，就化作黑夜离开了。”\n\n[赫尔德看着潮水](https://baike.baidu.com/item/%E4%B8%A5%E7%95%AF/23345630?fr=aladdin)，忽觉这不断上涨的潮水就像是持续上升的热情，它维持着热恋的时间，而激动的情绪又带给我们更多的热情。但是初识的热情终会逐渐平淡，又有多少人能在冷却的心跳中找到其中不变的节奏，走完这一生呢？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n对于一个长为 $n$ 的排列，我们维护一个下标 $t$，初始 $t=m$。\n\n重复以下过程：\n\n- 从下标在 $1\\sim t$ 的元素中选一个没标记过的，并将其标记。若标记的数比上一次标记的数大且 $t<n$，则 $t$ 自增 $1$；否则结束此过程。在你进行第一次标记前，上一次标记的数视为 $0$。\n\n我们称这样的排列是好的：\n\n- 存在某种方法，使得在经过若干次操作后，$t=n$。\n\n现在，给定 $m$，求长为 $n$ 的好的排列在所有长为 $n$ 的排列中所占比例，对 $998244353$ 取模。换言之，若长为 $n$ 的好的排列一共有 $x$ 个，你需要输出 $\\frac x{n!}$ 取模 $998244353$ 的结果。如果你不理解有理数的取模，可以看[这道题目](/problem/P2613)。\n\n有 $q$ 次询问，每次给出一个 $m$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $q$ 个正整数，表示每次询问的 $m_i$。保证询问升序且两两不同。", "outputFormat": "对于每次询问一行一个整数表示答案对 $998244353$ 取模的值。", "hint": "**【样例解释 \\#1】**\n\n可以使得 $t=n$ 的排列的数量分别为 $5,90,120$，排列总共有 $5!=120$ 种，所以分别需要输出 $\\frac{5}{120},\\frac{90}{120},\\frac{120}{120}$。取模后即为样例输出中的答案。\n\n$m=1$ 时，以下是所有可以使得 $t=n$ 的排列：\n\n$$ \\{1,2,3,4,5\\},\\{2,3,4,5,1\\},\\{1,3,4,5,2\\},\\{1,2,4,5,3\\},\\{1,2,3,5,4\\} $$\n\n$m=2$ 时，列出了一些可以使得 $t=n$ 的排列：\n\n$$ \\{1,4,2,3,5\\},\\{1,5,4,3,2\\} $$\n\n和一些不能使得 $t=n$ 的排列：\n\n$$ \\{5,4,3,2,1\\},\\{3,5,2,1,4\\} $$\n\n---\n\n**【数据范围】**\n\n保证 $1\\le q\\le n\\le 10^5$，$1\\leq m_i \\leq n$，询问的 $m_i$ 互不相同且升序排列。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&\\bm{~~~~~~~n\\le~~~~~~~}&\\textbf{~~~特殊限制~~~}&\\textbf{~~分数~~}\\cr\\hline \n\\textsf1 & 5 &&7\\cr\\hline \n\\textsf2 & 200&&23\\cr\\hline \n\\textsf3 & 2\\times 10^4 &m_i=1& 9\\cr \\hline \n\\textsf4 & 2\\times 10^4 &2m_i\\ge n& 3\\cr \\hline \n\\textsf5 & 2\\times 10^4 &&12\\cr\\hline \n\\textsf6 &  &q=1&36\\cr\\hline \n\\textsf7 &  &&10\\cr\\hline \n\\end{array}\n$$\n\n提示：$O(n^2)$ 能跑挺多点的。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "嘘月", "background": "“我早已认不出你的眼睛，也没有在想念你的面容；\n\n你还是没有说出再见，就化作黑夜离开了。”\n\n[赫尔德看着潮水](https://baike.baidu.com/item/%E4%B8%A5%E7%95%AF/23345630?fr=aladdin)，忽觉这不断上涨的潮水就像是持续上升的热情，它维持着热恋的时间，而激动的情绪又带给我们更多的热情。但是初识的热情终会逐渐平淡，又有多少人能在冷却的心跳中找到其中不变的节奏，走完这一生呢？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n对于一个长为 $n$ 的排列，我们维护一个下标 $t$，初始 $t=m$。\n\n重复以下过程：\n\n- 从下标在 $1\\sim t$ 的元素中选一个没标记过的，并将其标记。若标记的数比上一次标记的数大且 $t<n$，则 $t$ 自增 $1$；否则结束此过程。在你进行第一次标记前，上一次标记的数视为 $0$。\n\n我们称这样的排列是好的：\n\n- 存在某种方法，使得在经过若干次操作后，$t=n$。\n\n现在，给定 $m$，求长为 $n$ 的好的排列在所有长为 $n$ 的排列中所占比例，对 $998244353$ 取模。换言之，若长为 $n$ 的好的排列一共有 $x$ 个，你需要输出 $\\frac x{n!}$ 取模 $998244353$ 的结果。如果你不理解有理数的取模，可以看[这道题目](/problem/P2613)。\n\n有 $q$ 次询问，每次给出一个 $m$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $q$ 个正整数，表示每次询问的 $m_i$。保证询问升序且两两不同。", "outputFormat": "对于每次询问一行一个整数表示答案对 $998244353$ 取模的值。", "hint": "**【样例解释 \\#1】**\n\n可以使得 $t=n$ 的排列的数量分别为 $5,90,120$，排列总共有 $5!=120$ 种，所以分别需要输出 $\\frac{5}{120},\\frac{90}{120},\\frac{120}{120}$。取模后即为样例输出中的答案。\n\n$m=1$ 时，以下是所有可以使得 $t=n$ 的排列：\n\n$$ \\{1,2,3,4,5\\},\\{2,3,4,5,1\\},\\{1,3,4,5,2\\},\\{1,2,4,5,3\\},\\{1,2,3,5,4\\} $$\n\n$m=2$ 时，列出了一些可以使得 $t=n$ 的排列：\n\n$$ \\{1,4,2,3,5\\},\\{1,5,4,3,2\\} $$\n\n和一些不能使得 $t=n$ 的排列：\n\n$$ \\{5,4,3,2,1\\},\\{3,5,2,1,4\\} $$\n\n---\n\n**【数据范围】**\n\n保证 $1\\le q\\le n\\le 10^5$，$1\\leq m_i \\leq n$，询问的 $m_i$ 互不相同且升序排列。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&\\bm{~~~~~~~n\\le~~~~~~~}&\\textbf{~~~特殊限制~~~}&\\textbf{~~分数~~}\\cr\\hline \n\\textsf1 & 5 &&7\\cr\\hline \n\\textsf2 & 200&&23\\cr\\hline \n\\textsf3 & 2\\times 10^4 &m_i=1& 9\\cr \\hline \n\\textsf4 & 2\\times 10^4 &2m_i\\ge n& 3\\cr \\hline \n\\textsf5 & 2\\times 10^4 &&12\\cr\\hline \n\\textsf6 &  &q=1&36\\cr\\hline \n\\textsf7 &  &&10\\cr\\hline \n\\end{array}\n$$\n\n提示：$O(n^2)$ 能跑挺多点的。\n", "locale": "zh-CN"}}}
{"pid": "P8556", "type": "P", "difficulty": 7, "samples": [["3 1\n", "6\n"], ["5 3\n", "8\n"], ["500000 100000\n", "226048544\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "多项式", "洛谷原创", "O2优化", "组合数学", "线性递推", "洛谷月赛"], "title": "心跳 加强版", "background": "本题为 [洛谷 9 月月赛 II & NR I. E. 心跳](/problem/P8554) 的加强版，唯一的区别在于数据范围改为 $n \\le 5 \\times {10}^6$。\n\n---\n\n“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $1 \\le m < n \\le 5 \\times {10}^6$。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "心跳 加强版", "background": "本题为 [洛谷 9 月月赛 II & NR I. E. 心跳](/problem/P8554) 的加强版，唯一的区别在于数据范围改为 $n \\le 5 \\times {10}^6$。\n\n---\n\n“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $1 \\le m < n \\le 5 \\times {10}^6$。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN"}}}
{"pid": "P8557", "type": "P", "difficulty": 3, "samples": [["2 2", "9"], ["4 5", "923521"], ["233 123", "81633405"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "组合数学", "容斥原理"], "title": "炼金术（Alchemy）", "background": "", "description": "铃是一个爱玩游戏的女孩子。\n\n她在游戏中想要炼制一种稀有合金 —— 这需要 $n$ 种金属来合成。\n\n她准备好矿石后建造了 $k$ 个不同的熔炉，当熔炉启动时，会随机炼出这 $n$ 种金属中的一些（也可能什么都没有）。\n\n如果把每个熔炉炼出的金属收集起来，有了全部 $n$ 种金属，就能造出合金了。澪对此很好奇，对铃说：「我考考你，有多少种情况可以炼出合金呢？」这个简单的问题铃很快就会做了，你能求出结果吗？\n\n答案可能很大，请对 $998244353$ 取模（即除以 $998244353$ 的余数）后输出。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例一解释】  \n对于所有成功情况，两个熔炉中的金属如下表：\n\n| 一号  | 二号 |\n| :----------: | :----------: |\n| $\\varnothing$ | $\\{1,2\\}$ |\n| $\\{1\\}$ | $\\{2\\}$ |\n| $\\{1\\}$ | $\\{1,2\\}$ |\n| $\\{2\\}$ | $\\{1\\}$ |\n| $\\{2\\}$ | $\\{1,2\\}$ |\n| $\\{1,2\\}$ | $\\varnothing$ |\n| $\\{1,2\\}$ | $\\{1\\}$ |\n| $\\{1,2\\}$ | $\\{2\\}$ |\n| $\\{1,2\\}$ | $\\{1,2\\}$ |\n\n一共 $9$ 种，因此答案为 $9$。\n\n【数据范围】  \n对于 $30\\%$ 的数据，$1\\le n,k \\le 10$；  \n对于 $80\\%$ 的数据，$1\\le n,k \\le 10^6$；  \n对于 $100\\%$ 的数据，$1\\le n,k \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "炼金术（Alchemy）", "background": "", "description": "铃是一个爱玩游戏的女孩子。\n\n她在游戏中想要炼制一种稀有合金 —— 这需要 $n$ 种金属来合成。\n\n她准备好矿石后建造了 $k$ 个不同的熔炉，当熔炉启动时，会随机炼出这 $n$ 种金属中的一些（也可能什么都没有）。\n\n如果把每个熔炉炼出的金属收集起来，有了全部 $n$ 种金属，就能造出合金了。澪对此很好奇，对铃说：「我考考你，有多少种情况可以炼出合金呢？」这个简单的问题铃很快就会做了，你能求出结果吗？\n\n答案可能很大，请对 $998244353$ 取模（即除以 $998244353$ 的余数）后输出。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例一解释】  \n对于所有成功情况，两个熔炉中的金属如下表：\n\n| 一号  | 二号 |\n| :----------: | :----------: |\n| $\\varnothing$ | $\\{1,2\\}$ |\n| $\\{1\\}$ | $\\{2\\}$ |\n| $\\{1\\}$ | $\\{1,2\\}$ |\n| $\\{2\\}$ | $\\{1\\}$ |\n| $\\{2\\}$ | $\\{1,2\\}$ |\n| $\\{1,2\\}$ | $\\varnothing$ |\n| $\\{1,2\\}$ | $\\{1\\}$ |\n| $\\{1,2\\}$ | $\\{2\\}$ |\n| $\\{1,2\\}$ | $\\{1,2\\}$ |\n\n一共 $9$ 种，因此答案为 $9$。\n\n【数据范围】  \n对于 $30\\%$ 的数据，$1\\le n,k \\le 10$；  \n对于 $80\\%$ 的数据，$1\\le n,k \\le 10^6$；  \n对于 $100\\%$ 的数据，$1\\le n,k \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8558", "type": "P", "difficulty": 6, "samples": [["1 1 1 1", "443664158"], ["2 3 4 2", "128260948"], ["4 6 9 2", "622775535"], ["58 88 133 233", "128518400"], ["114514 1919810 4999231 8214898", "823989766"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "期望"], "title": "黑暗（Darkness）", "background": "", "description": "铃在一个黑暗的三维空间内寻找澪。这个空间可以表示为 $\\{(x,y,z) \\mid x \\in[0,A],y \\in [0,B],z\\in [0,C] \\}$。铃初始站在坐标为 $(A,B,C)$ 处，澪站在 $(0,0,0)$ 处。假设铃在 $(x,y,z)$ 处，她每次移动会**均匀随机**地尝试移动到 $(x-1,y,z)$ 或 $(x,y-1,z)$ 或 $(x,y,z-1)$。\n\n这个空间的外围是墙壁，不可穿过。由于空间内很暗，铃并不知道自己是否走到了墙边。也就是说，她在随机选择三种方向尝试移动时，有可能撞在墙上。\n\n铃想要知道，自己在第一次撞墙时，「到澪的曼哈顿距离（在本题中的情况就是 $x,y,z$ 坐标之和）」的 $k$ 次方的期望值。\n\n你只需要求出答案对 $998244353$ 取模的结果。", "inputFormat": "输入一行四个正整数 $A,B,C,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】 \n\n下表列出了走到各处并撞到墙的概率：\n\n| $(0,0,0)$ | $(1,0,0)$ | $(0,1,0)$ | $(0,0,1)$ | $(1,1,0)$ | $(1,0,1)$ | $(0,1,1)$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2/9$ | $4/27$ | $4/27$ | $4/27$ | $1/9$ | $1/9$ | $1/9$ |\n\n可以发现只有在这 $7$ 个位置有可能撞到墙。由此算出期望值为 $\\dfrac{10}{9}$，在模 $998244353$ 意义下为 $443664158$。\n\n\n【样例 $2,3$ 解释】   \n\n这里要算的都是距离的平方的期望。实际答案分别为 $\\dfrac{30083}{2187}$ 和 $\\dfrac{22748643655}{387420489}$。\n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\nSubtask1（8 pts）：$1\\le A,B,C,k\\le 6$；   \nSubtask2（19 pts）：$1\\le A,B,C \\le 100$；  \nSubtask3（13 pts）：$k=1$；  \nSubtask4（23 pts）：$1\\le A,B,C,k \\le 10^5$；  \nSubtask5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le A,B,C \\le 5\\times 10^6$，$1\\le k \\le 10^7$。\n\n【提示】  \n\n对于离散随机变量 $X$，其取值等于 $k$ 的概率设为 $P_k$，则 $X$ 的期望值定义为：\n\n$$\\sum_k kP_k$$\n\n对于有理数 $a/b$（$a,b$ 均为正整数），若整数 $r$ 满足 $r\\in[0,p-1]$ 且 $rb \\equiv a \\pmod p$，则 $r$ 就是 $a/b$ 对 $p$ 取模的结果。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "黑暗（Darkness）", "background": "", "description": "铃在一个黑暗的三维空间内寻找澪。这个空间可以表示为 $\\{(x,y,z) \\mid x \\in[0,A],y \\in [0,B],z\\in [0,C] \\}$。铃初始站在坐标为 $(A,B,C)$ 处，澪站在 $(0,0,0)$ 处。假设铃在 $(x,y,z)$ 处，她每次移动会**均匀随机**地尝试移动到 $(x-1,y,z)$ 或 $(x,y-1,z)$ 或 $(x,y,z-1)$。\n\n这个空间的外围是墙壁，不可穿过。由于空间内很暗，铃并不知道自己是否走到了墙边。也就是说，她在随机选择三种方向尝试移动时，有可能撞在墙上。\n\n铃想要知道，自己在第一次撞墙时，「到澪的曼哈顿距离（在本题中的情况就是 $x,y,z$ 坐标之和）」的 $k$ 次方的期望值。\n\n你只需要求出答案对 $998244353$ 取模的结果。", "inputFormat": "输入一行四个正整数 $A,B,C,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】 \n\n下表列出了走到各处并撞到墙的概率：\n\n| $(0,0,0)$ | $(1,0,0)$ | $(0,1,0)$ | $(0,0,1)$ | $(1,1,0)$ | $(1,0,1)$ | $(0,1,1)$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2/9$ | $4/27$ | $4/27$ | $4/27$ | $1/9$ | $1/9$ | $1/9$ |\n\n可以发现只有在这 $7$ 个位置有可能撞到墙。由此算出期望值为 $\\dfrac{10}{9}$，在模 $998244353$ 意义下为 $443664158$。\n\n\n【样例 $2,3$ 解释】   \n\n这里要算的都是距离的平方的期望。实际答案分别为 $\\dfrac{30083}{2187}$ 和 $\\dfrac{22748643655}{387420489}$。\n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\nSubtask1（8 pts）：$1\\le A,B,C,k\\le 6$；   \nSubtask2（19 pts）：$1\\le A,B,C \\le 100$；  \nSubtask3（13 pts）：$k=1$；  \nSubtask4（23 pts）：$1\\le A,B,C,k \\le 10^5$；  \nSubtask5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le A,B,C \\le 5\\times 10^6$，$1\\le k \\le 10^7$。\n\n【提示】  \n\n对于离散随机变量 $X$，其取值等于 $k$ 的概率设为 $P_k$，则 $X$ 的期望值定义为：\n\n$$\\sum_k kP_k$$\n\n对于有理数 $a/b$（$a,b$ 均为正整数），若整数 $r$ 满足 $r\\in[0,p-1]$ 且 $rb \\equiv a \\pmod p$，则 $r$ 就是 $a/b$ 对 $p$ 取模的结果。", "locale": "zh-CN"}}}
{"pid": "P8559", "type": "P", "difficulty": 7, "samples": [["3 3 2", "4"], ["10 9 11\n", "776"], ["10 8 7", "6776"], ["233 123 114", "22504357"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "递推", "莫队", "洛谷原创", "O2优化", "生成函数", "高斯消元"], "title": "寻宝（Treasure）", "background": "", "description": "铃准备到一个 $2$ 行 $n+1$ 列的方格图上寻宝。   \n有这样寻宝的机会，她不会放过任何一个可以获取的宝物。\n\n每个方格都有两种状态：**空地** 或 **墙壁**。\n\n**空地** 可以被自由穿过，除了第一列的下面都埋藏有宝物，地图的第一列一定是空地，也是地图的入口。\n\n**墙壁** 不能被穿过。\n\n需要注意的是，她每次只能移动到相邻的方格，且地图的边界也是不能被穿过的。\n\n铃还不知道地图的形态，正在考虑策略时，澪说：「我知道地图中恰好有 $k$ 个墙壁哦，对于所有可能的地图，有多少种情况你能找到恰好 $m$ 个宝物呢？」  \n「那我不回答又怎样嘛。」铃只想着挖宝，轻浮地答道。  \n「欸？那还有好几个藏宝点我就不告诉你了～」澪表现出一副认真的样子，「不过我也不难为你，你求出答案对 $998244353$ 取模的结果就可以啦。」\n\n铃没有办法，只能请你帮忙算出答案。", "inputFormat": "仅一行三个正整数 $n,k,m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例一解释】\n\n地图大小为 $2\\times(3+1)$，有 $3$ 个障碍。其中有 $4$ 种情况可以找到恰好 $2$ 个宝物，具体如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rd7xxuhd.png)\n\n图中绿色的部分表示入口，灰色表示墙壁，白色代表**有宝藏的**空地。  \n可以看出，有且仅有图中 $4$ 种情况可以由入口走到恰好 $2$ 块空地上，即获得 $2$ 个宝物。\n\n故答案为 $4$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（11 pts）：$n\\leq 12$；  \nSubtask2（19 pts）：$n\\leq 1000$；  \nSubtask3（31 pts）：$n \\leq 5\\times 10^4$；  \nSubtask4（39 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3\\times 10^6$，$m,k\\geq 2$，$m+k\\leq 2n$。\n\n【提示】   \n这是一道 OI 题，不是证明题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "寻宝（Treasure）", "background": "", "description": "铃准备到一个 $2$ 行 $n+1$ 列的方格图上寻宝。   \n有这样寻宝的机会，她不会放过任何一个可以获取的宝物。\n\n每个方格都有两种状态：**空地** 或 **墙壁**。\n\n**空地** 可以被自由穿过，除了第一列的下面都埋藏有宝物，地图的第一列一定是空地，也是地图的入口。\n\n**墙壁** 不能被穿过。\n\n需要注意的是，她每次只能移动到相邻的方格，且地图的边界也是不能被穿过的。\n\n铃还不知道地图的形态，正在考虑策略时，澪说：「我知道地图中恰好有 $k$ 个墙壁哦，对于所有可能的地图，有多少种情况你能找到恰好 $m$ 个宝物呢？」  \n「那我不回答又怎样嘛。」铃只想着挖宝，轻浮地答道。  \n「欸？那还有好几个藏宝点我就不告诉你了～」澪表现出一副认真的样子，「不过我也不难为你，你求出答案对 $998244353$ 取模的结果就可以啦。」\n\n铃没有办法，只能请你帮忙算出答案。", "inputFormat": "仅一行三个正整数 $n,k,m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例一解释】\n\n地图大小为 $2\\times(3+1)$，有 $3$ 个障碍。其中有 $4$ 种情况可以找到恰好 $2$ 个宝物，具体如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rd7xxuhd.png)\n\n图中绿色的部分表示入口，灰色表示墙壁，白色代表**有宝藏的**空地。  \n可以看出，有且仅有图中 $4$ 种情况可以由入口走到恰好 $2$ 块空地上，即获得 $2$ 个宝物。\n\n故答案为 $4$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（11 pts）：$n\\leq 12$；  \nSubtask2（19 pts）：$n\\leq 1000$；  \nSubtask3（31 pts）：$n \\leq 5\\times 10^4$；  \nSubtask4（39 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3\\times 10^6$，$m,k\\geq 2$，$m+k\\leq 2n$。\n\n【提示】   \n这是一道 OI 题，不是证明题。", "locale": "zh-CN"}}}
{"pid": "P8560", "type": "P", "difficulty": 7, "samples": [["3 0 2", "9"], ["3 2 2", "198"], ["4 3 2", "16008"], ["6 4 2", "58351320"], ["514 250 114", "354914151"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "生成函数", "快速傅里叶变换 FFT", "拉格朗日反演"], "title": "约定（Promise）", "background": "在化为废墟的城市中，大雨倾盆而降。\n\n「魔女之夜」被击败后，圆和焰也已遍体鳞伤，因魔力不足而倒地不起。\n\n「我们，也已经完了......」圆轻叹道。  \n\n「那悲叹之种呢？」焰的语气中还带着一丝希望。\n\n圆沉默不语，望着天空，只是无奈地摇了摇头。\n\n「是吗...... 我说，我们就这样一起变成怪物，把这世界的一切都搞得一团糟吧。」焰说着，不由地啜泣起来。「把那些讨厌的事和悲伤的事，全都和没发生过一样，破坏掉、破坏掉、破坏殆尽...... 你不觉得，这样也很好吗？」\n\n随着一声清脆的碰撞，焰感觉到魔力流入了自己的灵魂宝石内。她转头看见圆正微笑着，拿着一枚悲叹之种。\n\n「刚才那是骗你的，」圆的笑容依旧那么甜美，「我还留着一个呢。」\n\n焰慌忙抱住了圆的手臂，问到：「为什么，为什么要给我？」\n\n「因为有件我做不到，但是小焰能做到的事，我想拜托你...... 小焰，你可以回到过去对吧？你说过，为了避免这样的结局，而改写过历史的吧......」\n\n「嗯...」\n\n圆也终于忍不住悲伤，晶莹的泪珠从她脸上滑落。「你能去救救那个还没被丘比欺骗的，笨蛋的我吗？」\n\n**「我答应你，一定会救你的！无论重复多少次，我都会保护好你！」**\n\n「太好了......」圆平静了下来，但下一瞬间，她的灵魂宝石中就散出了黑雾，她的表情也痛苦地扭曲了起来。「再......拜托你一件事可以吗？」\n\n焰轻轻点头答应。\n\n「我，不想变成魔女......」圆的声音更加虚弱，「就算有讨厌的事和悲伤的事，但我想守护的东西，在这世上还有很多。」圆艰难地抬起手臂，支撑着手中漆黑的灵魂宝石。\n\n「小圆......」焰拔出手枪，对准了圆的灵魂宝石。在焰的痛哭声中，她扣下了扳机。\n", "description": "澪正陪着铃一起 N 刷《魔法少女小圆》，看到全剧最催人泪下的情节之一时，家长却突然推门进来了。澪不想被发现自己在摸鱼，就迅速切换界面，假装她们在做一道计数题：\n\n\n> 定义一棵有标号、有根、不区分左右儿子的二叉树的权值是：以「根节点的所有儿子节点」为根的子树的权值之和加上 $d$，特别定义只有一个节点的树权值为 $1$。求所有 $n$ 个节点的这种树权值的 $k$ 次方和，答案对 $998244353$ 取模。\n\n「这不是那个什么 [NaCly_Fish's Math Contest](https://www.luogu.com.cn/contest/53104) 的题... 吗？」铃看了看题，小声说道，「好无聊哦，不看这题。」", "inputFormat": "输入一行三个正整数 $n,k,d$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n$3$ 个节点的有标号有根二叉树有 $9$ 种，分别如下，其中标红的节点表示树根。\n![](https://cdn.luogu.com.cn/upload/image_hosting/266knse0.png)  \n由于 $k=0$，所有树权值的 $k$ 次方和就等于树的总数，故答案为 $9$。\n\n【样例 $2$ 解释】  \n接上图，图中第一行的树权值都为 $5$，第二行的树权值为 $4$，故答案为 $6\\times 5^2+3\\times 4^2=198$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（5 pts）：$n \\le 6$；  \nSubtask2（9 pts）：$k=0$，$n\\le 10^7$；      \nSubtask3（14 pts）：$n\\le 10^5$；   \nSubtask4（18 pts）：$k \\le 4000$，$n\\le 10^7$；  \nSubtask5（23 pts）：$k \\le 10^5$；  \nSubtask6（31 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n,d \\le 9\\times 10^8$，$0\\le k \\le 5\\times 10^6$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "约定（Promise）", "background": "在化为废墟的城市中，大雨倾盆而降。\n\n「魔女之夜」被击败后，圆和焰也已遍体鳞伤，因魔力不足而倒地不起。\n\n「我们，也已经完了......」圆轻叹道。  \n\n「那悲叹之种呢？」焰的语气中还带着一丝希望。\n\n圆沉默不语，望着天空，只是无奈地摇了摇头。\n\n「是吗...... 我说，我们就这样一起变成怪物，把这世界的一切都搞得一团糟吧。」焰说着，不由地啜泣起来。「把那些讨厌的事和悲伤的事，全都和没发生过一样，破坏掉、破坏掉、破坏殆尽...... 你不觉得，这样也很好吗？」\n\n随着一声清脆的碰撞，焰感觉到魔力流入了自己的灵魂宝石内。她转头看见圆正微笑着，拿着一枚悲叹之种。\n\n「刚才那是骗你的，」圆的笑容依旧那么甜美，「我还留着一个呢。」\n\n焰慌忙抱住了圆的手臂，问到：「为什么，为什么要给我？」\n\n「因为有件我做不到，但是小焰能做到的事，我想拜托你...... 小焰，你可以回到过去对吧？你说过，为了避免这样的结局，而改写过历史的吧......」\n\n「嗯...」\n\n圆也终于忍不住悲伤，晶莹的泪珠从她脸上滑落。「你能去救救那个还没被丘比欺骗的，笨蛋的我吗？」\n\n**「我答应你，一定会救你的！无论重复多少次，我都会保护好你！」**\n\n「太好了......」圆平静了下来，但下一瞬间，她的灵魂宝石中就散出了黑雾，她的表情也痛苦地扭曲了起来。「再......拜托你一件事可以吗？」\n\n焰轻轻点头答应。\n\n「我，不想变成魔女......」圆的声音更加虚弱，「就算有讨厌的事和悲伤的事，但我想守护的东西，在这世上还有很多。」圆艰难地抬起手臂，支撑着手中漆黑的灵魂宝石。\n\n「小圆......」焰拔出手枪，对准了圆的灵魂宝石。在焰的痛哭声中，她扣下了扳机。\n", "description": "澪正陪着铃一起 N 刷《魔法少女小圆》，看到全剧最催人泪下的情节之一时，家长却突然推门进来了。澪不想被发现自己在摸鱼，就迅速切换界面，假装她们在做一道计数题：\n\n\n> 定义一棵有标号、有根、不区分左右儿子的二叉树的权值是：以「根节点的所有儿子节点」为根的子树的权值之和加上 $d$，特别定义只有一个节点的树权值为 $1$。求所有 $n$ 个节点的这种树权值的 $k$ 次方和，答案对 $998244353$ 取模。\n\n「这不是那个什么 [NaCly_Fish's Math Contest](https://www.luogu.com.cn/contest/53104) 的题... 吗？」铃看了看题，小声说道，「好无聊哦，不看这题。」", "inputFormat": "输入一行三个正整数 $n,k,d$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n$3$ 个节点的有标号有根二叉树有 $9$ 种，分别如下，其中标红的节点表示树根。\n![](https://cdn.luogu.com.cn/upload/image_hosting/266knse0.png)  \n由于 $k=0$，所有树权值的 $k$ 次方和就等于树的总数，故答案为 $9$。\n\n【样例 $2$ 解释】  \n接上图，图中第一行的树权值都为 $5$，第二行的树权值为 $4$，故答案为 $6\\times 5^2+3\\times 4^2=198$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（5 pts）：$n \\le 6$；  \nSubtask2（9 pts）：$k=0$，$n\\le 10^7$；      \nSubtask3（14 pts）：$n\\le 10^5$；   \nSubtask4（18 pts）：$k \\le 4000$，$n\\le 10^7$；  \nSubtask5（23 pts）：$k \\le 10^5$；  \nSubtask6（31 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n,d \\le 9\\times 10^8$，$0\\le k \\le 5\\times 10^6$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8561", "type": "P", "difficulty": 7, "samples": [["4 2 2", "765"], ["233 2 99", "161697303"], ["7 4 5", "322237710"], ["10 3 17", "146281933"], ["1919810 114514 2333", "426283611"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "多项式", "洛谷原创", "O2优化", "组合数学", "Stirling 数", "生成函数", "快速傅里叶变换 FFT", "拉格朗日反演"], "title": "送别（Farewell）", "background": "还是到了离别的时候呢...... 相聚的时间很短暂，不知是否给了你一次美好的经历呢？\n\n我举办这场比赛，还是想给自己留下一些珍贵的回忆。虽然自己的水平并不高，但这对我还是很有纪念意义。\n\n经过长时间的准备，在这送别之际，应当更隆重一些的 —— 可惜我并没有那样的能力。若不然，也不会只能以这种程度的题目来压轴。\n\n既然如此，就不要让此次分别成为永别...... 我将全力以赴，为了我们下次再会。这是我自私的请求，但请你等着我回来！\n\n我这贫乏的语言，难以表述心中的情感。不如我们就这样，在离别前静静地享受这段时光吧。", "description": "铃来到了一个奇妙的 Gnilrits 星球，上面生活着一种奇妙的 Gnilrits 人。\n\n这种生物有除了 $k$ 个寿命无限但不能繁殖的个体以外，设其它人的总数在第 $i$ 年为 $a_i$，她得知有规律 $a_i=qa_{i-1}-a_{i-2}$，其中 $a_0=0$，$a_1=1$。\n\n在第 $i$ 年，若 $a_i > k$，则星球上都会依次发生如下事件：\n\n1. 全部 $a_i+k$ 个人被分配到 $a_i$ 个**相同的**住房内，不能有空房（每个人都是不同的）。\n\n2. 每个房屋都修建一条单向道路，连接另一个房屋（可以是自己）；且对任意房屋，都要有一条连向它的道路。最终形成 $a_i-k$ 个环，包括自环。\n\n需要注意的是，在第一步后因为房屋有不同的人居住，它们之间也就是不同的了。\n\n铃想到了一个问题：设第 $i$ 年分配房屋并修建道路的总方案数为 $b_i$（若 $a_i \\leq k$ 则 $b_i=0$），则 $i\\in [0,n]$ 的所有 $b_i$ 之和是多少呢？\n\n铃在思考这个问题时，她突然惊醒了过来 —— 原来刚才的只是一场梦。她正想和澪分享梦中的见闻，才想起以往在她身边的澪，如今已经离开了。\n\n没有办法，但铃还是想知道问题的答案，请你帮忙求出来吧。结果可能很大，你只需要告诉她答案对 $998244353$ 取模的结果即可。\n\n", "inputFormat": "第一行三个正整数 $n,q,k$。 ", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】  \n\n在 $i \\leq 2$ 时 $b_i=0$。\n\n对于 $i=3$ 的情况，$a_i=3$。首先要将 $5$ 个不同的人分配入 $3$ 个相同的房屋，有 $25$ 种方案；再把 $3$ 个变得不同的房屋用环路连接，形成 $1$ 个环，只有 $2$ 种方案，故 $b_3 = 25 \\times 2 = 50$。  \n（更具体的解释见[此处](https://www.luogu.com.cn/paste/usa2ggb4)）\n\n对于 $i=4$，$a_i=4$，将 $6$ 个人分入 $4$ 个房屋有 $65$ 种方案；在 $4$ 个房屋间修路形成 $2$ 个环有 $11$ 种方案，总方案数为 $65\\times 11 = 715$。\n\n故答案为 $50+715=765$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（7 pts）：$1\\le n\\le 1000$，$1\\le k \\le 3$；   \nSubtask 2（11 pts）：$1\\le n,k \\le 100$；   \nSubtask 3（13 pts）：$1 \\le k \\le 1000$；  \nSubtask 4（19 pts）：$1\\le k \\le 32000$，$q=2$；  \nSubtask 5（23 pts）：$1\\le k \\le 16000$，$q \\neq 2$；   \nSubtsak 6（27 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^9$，$1\\le k \\le 64000$，$2\\le q \\le 10^9$。  \n\n\n【提示】  \n此题并不难，但可能需要一定程度的常数优化。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "送别（Farewell）", "background": "还是到了离别的时候呢...... 相聚的时间很短暂，不知是否给了你一次美好的经历呢？\n\n我举办这场比赛，还是想给自己留下一些珍贵的回忆。虽然自己的水平并不高，但这对我还是很有纪念意义。\n\n经过长时间的准备，在这送别之际，应当更隆重一些的 —— 可惜我并没有那样的能力。若不然，也不会只能以这种程度的题目来压轴。\n\n既然如此，就不要让此次分别成为永别...... 我将全力以赴，为了我们下次再会。这是我自私的请求，但请你等着我回来！\n\n我这贫乏的语言，难以表述心中的情感。不如我们就这样，在离别前静静地享受这段时光吧。", "description": "铃来到了一个奇妙的 Gnilrits 星球，上面生活着一种奇妙的 Gnilrits 人。\n\n这种生物有除了 $k$ 个寿命无限但不能繁殖的个体以外，设其它人的总数在第 $i$ 年为 $a_i$，她得知有规律 $a_i=qa_{i-1}-a_{i-2}$，其中 $a_0=0$，$a_1=1$。\n\n在第 $i$ 年，若 $a_i > k$，则星球上都会依次发生如下事件：\n\n1. 全部 $a_i+k$ 个人被分配到 $a_i$ 个**相同的**住房内，不能有空房（每个人都是不同的）。\n\n2. 每个房屋都修建一条单向道路，连接另一个房屋（可以是自己）；且对任意房屋，都要有一条连向它的道路。最终形成 $a_i-k$ 个环，包括自环。\n\n需要注意的是，在第一步后因为房屋有不同的人居住，它们之间也就是不同的了。\n\n铃想到了一个问题：设第 $i$ 年分配房屋并修建道路的总方案数为 $b_i$（若 $a_i \\leq k$ 则 $b_i=0$），则 $i\\in [0,n]$ 的所有 $b_i$ 之和是多少呢？\n\n铃在思考这个问题时，她突然惊醒了过来 —— 原来刚才的只是一场梦。她正想和澪分享梦中的见闻，才想起以往在她身边的澪，如今已经离开了。\n\n没有办法，但铃还是想知道问题的答案，请你帮忙求出来吧。结果可能很大，你只需要告诉她答案对 $998244353$ 取模的结果即可。\n\n", "inputFormat": "第一行三个正整数 $n,q,k$。 ", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】  \n\n在 $i \\leq 2$ 时 $b_i=0$。\n\n对于 $i=3$ 的情况，$a_i=3$。首先要将 $5$ 个不同的人分配入 $3$ 个相同的房屋，有 $25$ 种方案；再把 $3$ 个变得不同的房屋用环路连接，形成 $1$ 个环，只有 $2$ 种方案，故 $b_3 = 25 \\times 2 = 50$。  \n（更具体的解释见[此处](https://www.luogu.com.cn/paste/usa2ggb4)）\n\n对于 $i=4$，$a_i=4$，将 $6$ 个人分入 $4$ 个房屋有 $65$ 种方案；在 $4$ 个房屋间修路形成 $2$ 个环有 $11$ 种方案，总方案数为 $65\\times 11 = 715$。\n\n故答案为 $50+715=765$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（7 pts）：$1\\le n\\le 1000$，$1\\le k \\le 3$；   \nSubtask 2（11 pts）：$1\\le n,k \\le 100$；   \nSubtask 3（13 pts）：$1 \\le k \\le 1000$；  \nSubtask 4（19 pts）：$1\\le k \\le 32000$，$q=2$；  \nSubtask 5（23 pts）：$1\\le k \\le 16000$，$q \\neq 2$；   \nSubtsak 6（27 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^9$，$1\\le k \\le 64000$，$2\\le q \\le 10^9$。  \n\n\n【提示】  \n此题并不难，但可能需要一定程度的常数优化。\n\n", "locale": "zh-CN"}}}
{"pid": "P8562", "type": "P", "difficulty": 7, "samples": [["3\n3\n2 1 2\n2 2 3\n2 1 3", "2"], ["7\n5 5 133\n10001\n00000\n11111\n00000\n01010", "129"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "提交答案", "枚举", "组合数学"], "title": "十二重骗分法（Cheating XII）", "background": "", "description": "一阵恍惚过后，你发现自己坐在机房里。一看时间，现在竟然是 2202 年！你又环视了一下周围的情况，原来自己在 CSP-J 2202 的考场上。\n\n你还没搞清楚情况时，似乎听见有人对你低语：「想知道怎么回事吗？那就展现你以往的能力，把这次的 CSP-J 也 AK 掉吧。」\n\n于是你看到四个题分别是：  \n\n1. 输入一个正整数 $n$，求 $\\lfloor \\sqrt n \\rfloor$。  \n\n2. 给定一个左右各有 $n$ 个点的二分图，与其中的边，求它完美匹配的方案数，答案对 $998244353$ 取模。\n\n3. 生命游戏（Conway's Game of Life）进行于一个无限大的二维网格上，每个格子要么是空地，要么有一个细胞。每个时刻都会进行一轮**迭代**，规则如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/do0c6ras.png)  \n现在，给定你初始状态，求迭代 $k$ 次后的细胞数。  \nps：你可以在 [这里](https://playgameoflife.com/) 试玩。\n\n4. 给你一个 $n$ 个点、 $m$ 条边的无向图，每个点都可以涂上 $k$ 种颜色中的一种，且相邻的点（即有边直接相连的点）不能有相同的颜色。求有多少种染色方案，答案对 $998244353$ 取模。\n\n「这怎么可能啊！」你差点惊叫出来。不过你发现，唯独你的电脑上有题目的输入数据！你想暴力跑出答案，却发现 2202 年的评测机性能和一百多年前没差别。\n\n那该怎么办呢？总之只能靠自己了吧。\n\n\n**输入数据可以在题目下方的附件中下载。**", "inputFormat": "第一行一个正整数 $T$，表示测试点编号。\n\n若 $T \\in \\{ 1,2\\}$，表示 Subtask 1。接下来一行仅一个正整数 $n$。\n\n若 $T \\in \\{3,4,5,6\\}$，表示 Subtask 2。第二行一个正整数 $n$。\n接下来 $n$ 行，第 $i$ 行先输入一个正整数 $m_i$，表示左部分第 $i$ 个点（记作 $u_i$）的度数为 $m_i$；后面接着 $m_i$ 个整数 $v_{i,1},v_{i,2},\\cdots,v_{i,m_i}$，依次表示与 $u_i$ 连接的右部分节点编号。  \n\n若 $T \\in\\{ 7,8,9\\}$，表示 Subtask 3。第二行输入三个正整数 $n,m,k$，表示输入的初始形态有 $n$ 行 $m$ 列（除此之外是无限大的二维平面，没有其它细胞），迭代 $k$ 次。接下来 $n$ 行，每行一个长度为 $m$ 的 01 串，`0` 表示空地，`1` 表示细胞，描述了一行的形态。\n\n若 $T \\in\\{ 10,11,12\\}$，表示 Subtask 4。第二行输入三个正整数 $n,m,k$。接下来 $m$ 行，每行两个正整数 $u,v$ 描述一条无向边，保证无重边和自环。", "outputFormat": "输出一行一个正整数，表示答案。", "hint": "【样例 $1$ 解释】  \n输入中 $T=3$，要求的问题是二分图完美匹配计数。  \n可以发现，只有两种匹配方案：$1 \\leftrightarrow 1,2 \\leftrightarrow 2,3 \\leftrightarrow 3$\n 或 $1 \\leftrightarrow 2,2 \\leftrightarrow 3,3 \\leftrightarrow 1$。\n \n 【样例 $2$ 解释】  \n 输入中 $T=7$，要求的问题是预测生命游戏细胞数。给出的输入是：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/0ukc526n.png)   \n 经过 $133$ 轮迭代后为：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/g6yz6nf3.png)  \n 可以数出其中细胞数为 $129$。  \n \n样例中虽然有 $T\\in[1,12]$，但并不代表实际输入。  \n\n【测试点分数信息】   \n\n| 编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| **分数** | $7$ | $8$ | $6$ | $7$ | $9$ | $11$ | $8$ | $9$ | $10$ | $7$ | $8$ | $10$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "十二重骗分法（Cheating XII）", "background": "", "description": "一阵恍惚过后，你发现自己坐在机房里。一看时间，现在竟然是 2202 年！你又环视了一下周围的情况，原来自己在 CSP-J 2202 的考场上。\n\n你还没搞清楚情况时，似乎听见有人对你低语：「想知道怎么回事吗？那就展现你以往的能力，把这次的 CSP-J 也 AK 掉吧。」\n\n于是你看到四个题分别是：  \n\n1. 输入一个正整数 $n$，求 $\\lfloor \\sqrt n \\rfloor$。  \n\n2. 给定一个左右各有 $n$ 个点的二分图，与其中的边，求它完美匹配的方案数，答案对 $998244353$ 取模。\n\n3. 生命游戏（Conway's Game of Life）进行于一个无限大的二维网格上，每个格子要么是空地，要么有一个细胞。每个时刻都会进行一轮**迭代**，规则如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/do0c6ras.png)  \n现在，给定你初始状态，求迭代 $k$ 次后的细胞数。  \nps：你可以在 [这里](https://playgameoflife.com/) 试玩。\n\n4. 给你一个 $n$ 个点、 $m$ 条边的无向图，每个点都可以涂上 $k$ 种颜色中的一种，且相邻的点（即有边直接相连的点）不能有相同的颜色。求有多少种染色方案，答案对 $998244353$ 取模。\n\n「这怎么可能啊！」你差点惊叫出来。不过你发现，唯独你的电脑上有题目的输入数据！你想暴力跑出答案，却发现 2202 年的评测机性能和一百多年前没差别。\n\n那该怎么办呢？总之只能靠自己了吧。\n\n\n**输入数据可以在题目下方的附件中下载。**", "inputFormat": "第一行一个正整数 $T$，表示测试点编号。\n\n若 $T \\in \\{ 1,2\\}$，表示 Subtask 1。接下来一行仅一个正整数 $n$。\n\n若 $T \\in \\{3,4,5,6\\}$，表示 Subtask 2。第二行一个正整数 $n$。\n接下来 $n$ 行，第 $i$ 行先输入一个正整数 $m_i$，表示左部分第 $i$ 个点（记作 $u_i$）的度数为 $m_i$；后面接着 $m_i$ 个整数 $v_{i,1},v_{i,2},\\cdots,v_{i,m_i}$，依次表示与 $u_i$ 连接的右部分节点编号。  \n\n若 $T \\in\\{ 7,8,9\\}$，表示 Subtask 3。第二行输入三个正整数 $n,m,k$，表示输入的初始形态有 $n$ 行 $m$ 列（除此之外是无限大的二维平面，没有其它细胞），迭代 $k$ 次。接下来 $n$ 行，每行一个长度为 $m$ 的 01 串，`0` 表示空地，`1` 表示细胞，描述了一行的形态。\n\n若 $T \\in\\{ 10,11,12\\}$，表示 Subtask 4。第二行输入三个正整数 $n,m,k$。接下来 $m$ 行，每行两个正整数 $u,v$ 描述一条无向边，保证无重边和自环。", "outputFormat": "输出一行一个正整数，表示答案。", "hint": "【样例 $1$ 解释】  \n输入中 $T=3$，要求的问题是二分图完美匹配计数。  \n可以发现，只有两种匹配方案：$1 \\leftrightarrow 1,2 \\leftrightarrow 2,3 \\leftrightarrow 3$\n 或 $1 \\leftrightarrow 2,2 \\leftrightarrow 3,3 \\leftrightarrow 1$。\n \n 【样例 $2$ 解释】  \n 输入中 $T=7$，要求的问题是预测生命游戏细胞数。给出的输入是：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/0ukc526n.png)   \n 经过 $133$ 轮迭代后为：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/g6yz6nf3.png)  \n 可以数出其中细胞数为 $129$。  \n \n样例中虽然有 $T\\in[1,12]$，但并不代表实际输入。  \n\n【测试点分数信息】   \n\n| 编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| **分数** | $7$ | $8$ | $6$ | $7$ | $9$ | $11$ | $8$ | $9$ | $10$ | $7$ | $8$ | $10$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P8563", "type": "P", "difficulty": 4, "samples": [["5 7\n2 2 3 4 5\n2 1 5\n1 3 -3\n2 1 5\n2 3 3\n1 1 100000\n1 2 100000\n2 1 2", "240\n20\n1\nToo large"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "二分", "洛谷原创", "O2优化", "洛谷月赛"], "title": "Magenta Potion", "background": "", "description": "给定一个长为 $n$ 的整数序列 $a$，其中所有数的绝对值均大于等于 $2$。有 $q$ 次操作，格式如下：\n\n$\\texttt{1 i k}$，表示将 $a_i$ 修改为 $k$。保证 $k $ 的绝对值大于等于 $2$。\n\n$\\texttt{2 l r}$，考虑 $[l,r]$ 的子区间（包括本身）中乘积最大的的区间乘积 $M$。如果 $M>2^{30}$，输出 `Too large`，否则输出 $M$。特别地，空区间的元素乘积定义为 $1$。", "inputFormat": "第一行两个正整数表示 $n,q$。\n\n第二行输入 $n$ 个**整数**表示 $a_i$。\n\n接下来 $q$ 行，每行三个整数表示一次询问，格式见上。", "outputFormat": "对于每次 $\\tt2$ 操作输出一行表示询问的答案。", "hint": "对于所有的数据，$2\\le |a_i|,|k| \\le 10^9$，$1 \\le n,q \\le 2\\times 10^5$，$1 \\le l \\le r \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n,q\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 10& \\cr\\hline \n\\sf3\\sim 6 & 100&  \\cr\\hline \n\\sf7\\sim 10 & 5 \\times 10^3&\\cr\\hline \n\\sf 11\\sim 13 &  &\\sf A\\cr\\hline \n\\sf14\\sim 16 & & \\sf B\\cr\\hline\n\\sf17\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证 $a_i,k \\ge 2$。\n\n$\\textsf B$：保证对于每一组询问，对应的 $r-l \\ge 100$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Magenta Potion", "background": "", "description": "给定一个长为 $n$ 的整数序列 $a$，其中所有数的绝对值均大于等于 $2$。有 $q$ 次操作，格式如下：\n\n$\\texttt{1 i k}$，表示将 $a_i$ 修改为 $k$。保证 $k $ 的绝对值大于等于 $2$。\n\n$\\texttt{2 l r}$，考虑 $[l,r]$ 的子区间（包括本身）中乘积最大的的区间乘积 $M$。如果 $M>2^{30}$，输出 `Too large`，否则输出 $M$。特别地，空区间的元素乘积定义为 $1$。", "inputFormat": "第一行两个正整数表示 $n,q$。\n\n第二行输入 $n$ 个**整数**表示 $a_i$。\n\n接下来 $q$ 行，每行三个整数表示一次询问，格式见上。", "outputFormat": "对于每次 $\\tt2$ 操作输出一行表示询问的答案。", "hint": "对于所有的数据，$2\\le |a_i|,|k| \\le 10^9$，$1 \\le n,q \\le 2\\times 10^5$，$1 \\le l \\le r \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n,q\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 10& \\cr\\hline \n\\sf3\\sim 6 & 100&  \\cr\\hline \n\\sf7\\sim 10 & 5 \\times 10^3&\\cr\\hline \n\\sf 11\\sim 13 &  &\\sf A\\cr\\hline \n\\sf14\\sim 16 & & \\sf B\\cr\\hline\n\\sf17\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证 $a_i,k \\ge 2$。\n\n$\\textsf B$：保证对于每一组询问，对应的 $r-l \\ge 100$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8564", "type": "P", "difficulty": 5, "samples": [["8\n11000 18640 32793 36187 45104 64932 66425 \n6 8\n3 6\n3 7\n1 8\n1 4\n3 5\n2 7", "63744"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "背包 DP", "树形 DP", "洛谷月赛"], "title": "ρars/ey", "background": "", "description": "给定一颗有 $n$ 个节点的有根树，其中根节点是 $1$。你可以进行若干次以下操作:\n\n-   选择一个节点，删去其子树内除其以外的点。\n\n此操作的代价为 $f_i$，其中 $i$ 是你选择的节点子树大小。\n\n你希望删掉除了 $1$ 以外的所有点，请问代价的最小值是多少？\n\n\n\n\n\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n-1$ 个正整数，第 $i$ 个表示 $f_{i+1}$。\n\n接下来 $n-1$ 行，每行两个正整数，表示一条树边。", "outputFormat": "一行一个正整数表示答案。", "hint": "【样例解释】\n\n先删除节点 $8$ 的子树内除了它自身的 $5$ 个点，再删除节点 $1$ 的子树内除了它自身的 $2$ 个点，代价为 $f_6+f_3=63744$。可以证明这是最小的代价。\n\n【数据范围】\n\n对于所有数据，保证 $1\\le n\\le 5000$，$1\\le f_i\\le 10^9$。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 8& \\cr\\hline \n\\sf3\\sim 6 & 15&  \\cr\\hline \n\\sf7\\sim 8 & 400&\\textsf{A}\\cr\\hline \n\\textsf9 & 400 &\\sf B\\cr\\hline \n\\sf10\\sim 12 & 400&\\cr\\hline\n\\sf13\\sim 14 & &\\sf C\\cr\\hline\n\\sf15\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证树上所有点度数均小于等于 $2$，其中 $1$ 号点度数为 $1$。\n\n$\\textsf B$：保证树上只有 $1$ 号点度数大于等于 $2$。\n\n$\\textsf C$：保证树随机生成，随机生成方式是，对于 $i\\ge 2$，从 $[1,i-1]$ 中随机一个整数 $x$，在 $x$ 与 $i$ 之间连边。然后随机打乱所有节点的编号。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ρars/ey", "background": "", "description": "给定一颗有 $n$ 个节点的有根树，其中根节点是 $1$。你可以进行若干次以下操作:\n\n-   选择一个节点，删去其子树内除其以外的点。\n\n此操作的代价为 $f_i$，其中 $i$ 是你选择的节点子树大小。\n\n你希望删掉除了 $1$ 以外的所有点，请问代价的最小值是多少？\n\n\n\n\n\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n-1$ 个正整数，第 $i$ 个表示 $f_{i+1}$。\n\n接下来 $n-1$ 行，每行两个正整数，表示一条树边。", "outputFormat": "一行一个正整数表示答案。", "hint": "【样例解释】\n\n先删除节点 $8$ 的子树内除了它自身的 $5$ 个点，再删除节点 $1$ 的子树内除了它自身的 $2$ 个点，代价为 $f_6+f_3=63744$。可以证明这是最小的代价。\n\n【数据范围】\n\n对于所有数据，保证 $1\\le n\\le 5000$，$1\\le f_i\\le 10^9$。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 8& \\cr\\hline \n\\sf3\\sim 6 & 15&  \\cr\\hline \n\\sf7\\sim 8 & 400&\\textsf{A}\\cr\\hline \n\\textsf9 & 400 &\\sf B\\cr\\hline \n\\sf10\\sim 12 & 400&\\cr\\hline\n\\sf13\\sim 14 & &\\sf C\\cr\\hline\n\\sf15\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证树上所有点度数均小于等于 $2$，其中 $1$ 号点度数为 $1$。\n\n$\\textsf B$：保证树上只有 $1$ 号点度数大于等于 $2$。\n\n$\\textsf C$：保证树随机生成，随机生成方式是，对于 $i\\ge 2$，从 $[1,i-1]$ 中随机一个整数 $x$，在 $x$ 与 $i$ 之间连边。然后随机打乱所有节点的编号。", "locale": "zh-CN"}}}
{"pid": "P8565", "type": "P", "difficulty": 6, "samples": [["2\n2 5\n1 1\n3 5 7 9 11\n3 5\n1 2 5\n4 7 10 18 22", "3\n3\n3\n5\n5\n0\n1\n1\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Sultan Rage", "background": "", "description": "有一个数列 $\\{a_n\\}$ 满足对 $n > m$ 均有 $a_n=\\sum\\limits_{j=1}^m a_{n-j}$，并且 $a_1,a_2,\\cdots,a_m$ 是输入中给出的正整数。\n\n$q$ 次询问，每一次给出一个正整数 $x$，问有多少个不可重正整数集 $S$ 满足 $\\sum\\limits_{s\\in S}a_s=x$。答案对质数 $998244353$ 取模。\n\n本题有多组数据。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。对于每一组数据：\n\n第一行两个整数 $m,q$。\n\n第二行 $m$ 个整数 $a_1,a_2,\\cdots,a_m$。\n\n第三行 $q$ 个整数，每一个整数代表一次询问。", "outputFormat": "对于每组询问输出一行表示答案。", "hint": "对于所有数据，$T=5$，$2 \\le m \\le 100$，$1 \\le q,a_i \\le 100$，$1 \\le x \\le 10^{18}$。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{m\\le}&\\bm{q \\le }&\\bm{a_i \\le }& \\bm{x \\le}&\\bm{\\textbf{特殊性质}}\\cr\\hline \n\\textsf1\\sim \\sf2 & 8&8  & 8 & 100\\cr\\hline \n\\sf3\\sim 5 & 15& &15&10^3 \\cr\\hline \n\\textsf6 & & & & 1 &\\cr\\hline \n\\sf7\\sim 11 & & 1& & & \\textsf{A}\\cr\\hline\n\\sf12\\sim 16 & 2& & &\\cr\\hline\n\\sf17\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：$m=10$，且 $x$ 在所有可能的 $x$ 中随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Sultan Rage", "background": "", "description": "有一个数列 $\\{a_n\\}$ 满足对 $n > m$ 均有 $a_n=\\sum\\limits_{j=1}^m a_{n-j}$，并且 $a_1,a_2,\\cdots,a_m$ 是输入中给出的正整数。\n\n$q$ 次询问，每一次给出一个正整数 $x$，问有多少个不可重正整数集 $S$ 满足 $\\sum\\limits_{s\\in S}a_s=x$。答案对质数 $998244353$ 取模。\n\n本题有多组数据。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。对于每一组数据：\n\n第一行两个整数 $m,q$。\n\n第二行 $m$ 个整数 $a_1,a_2,\\cdots,a_m$。\n\n第三行 $q$ 个整数，每一个整数代表一次询问。", "outputFormat": "对于每组询问输出一行表示答案。", "hint": "对于所有数据，$T=5$，$2 \\le m \\le 100$，$1 \\le q,a_i \\le 100$，$1 \\le x \\le 10^{18}$。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{m\\le}&\\bm{q \\le }&\\bm{a_i \\le }& \\bm{x \\le}&\\bm{\\textbf{特殊性质}}\\cr\\hline \n\\textsf1\\sim \\sf2 & 8&8  & 8 & 100\\cr\\hline \n\\sf3\\sim 5 & 15& &15&10^3 \\cr\\hline \n\\textsf6 & & & & 1 &\\cr\\hline \n\\sf7\\sim 11 & & 1& & & \\textsf{A}\\cr\\hline\n\\sf12\\sim 16 & 2& & &\\cr\\hline\n\\sf17\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：$m=10$，且 $x$ 在所有可能的 $x$ 中随机生成。", "locale": "zh-CN"}}}
{"pid": "P8566", "type": "P", "difficulty": 7, "samples": [["5\n4 2\n1 3 0\n2 4 1\n5 4\n2 5 0\n1 4 0\n3 1 1\n2 4 0\n5 4\n1 3 0\n2 4 1\n2 5 0\n1 4 1\n5 4\n1 3 0\n5 3 0\n1 4 1\n2 5 0\n4 2\n1 3 0\n1 3 1", "0\nB 4\n0\nB 2\nB 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "You are the Miserable", "background": "", "description": "小 A 和小 B 玩游戏。小 A 有一个凸 $n$ 边形以及 $n-3$ 条不交的对角线构成一个三角剖分。每一次，小 B 可以问小 A 某一条对角线 $x-y$ ，小 A 会回答他该对角线是否在他的三角剖分中。小 B 想要对于每一条 **三角剖分中** 的对角线得到至少一次肯定的答复。他希望询问的次数尽量少，而小 A 希望询问次数尽量多，并且有可能会根据小 B 的询问来改变他的三角剖分。但在这个过程中，小 A 的三角剖分不能与他曾做出的回答矛盾。\n\n现在，给出小 A 和小 B 玩的若干步，判断它们的游戏过程是否保持最优。如果是，输出 $0$；如果不是，输出第一次不是最优的操作，形如 `A x` 或者 `B x`，表示小 A 或者小 B 的第 $x$ 次操作不是最优的。\n\n具体地，保持最优的定义如下：假设最优情况下小 B 要询问 $k$ 次，那么每一步过后，双方最优的策略仍然使得总的询问次数为 $k$，第一次使得询问次数不为 $k$ 的步骤就是需要输出的步骤。\n\n他们玩了 $T$ 次独立的游戏，你需要对每一次询问作出回答。\n\n**注意：**\n\n-   数据保证，直到第一次不优的操作被做出，小 A 的回答都是合法的，即总存在一个三角剖分符合小 A 做出的所有回答。\n-   数据不保证，在第一次不优的操作被做出以后，小 A 的回答仍然保持合法，即可能不存在一个三角剖分符合小 A 做出的所有回答。\n\n**【提示】**\n\n1. 多边形的对角线指连接不相邻两个顶点的线段。\n2. 多边形的三角剖分指 $n-3$ 条仅可以在顶点处相交的对角线构成的集合。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。\n\n对于每一组数据，第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每一行三个整数 $x,y,z$，表示小 B 的询问和小 A 的回答。其中 $z=0$ 表示该对角线不存在，$z=1$ 则表示存在。", "outputFormat": "对于每组数据输出一行，若存在不优的操作则输出第一次不是最优的操作，否则输出 $0$。", "hint": "【样例解释】\n\n对于 $n=5$，最优的 $k=4$。对于 $n=4$，最优的 $k=2$。对于最后一组数据，B 重复询问同一条边已经不是最优，此时 A 的回答可以不合法。\n\n【数据范围】\n\n$1 \\le T\\le 10^3$，$4\\le n \\le 10^5$，$1 \\le \\sum n \\le 2\\times 10^5$，$1 \\le m \\le k$，$1 \\le x,y \\le n$，$0 \\le z \\le 1$。保证所有的 $x-y$ 都是合法的对角线，以及直到第一次不是最优的一步所有询问的回答都至少对应一种三角剖分。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\\hline \n\\textbf{~~测试点编号~~}&\\bm{~~T\\le~~}&\\bm{~~n \\le ~~}&\\bm{~~~~m~~~~}& ~\\bm{z}~\\cr\\hline \n\\textsf1\\sim \\sf2 &100 &5  &  \\cr\\hline \n\\sf3\\sim 4 & 100& 7& &\\cr\\hline \n\\sf5 \\sim 6 &100 &8 & & \\cr\\hline \n\\sf7 \\sim \\sf9 & & &=1 & \\cr\\hline \n\\sf10\\sim 12 & & & & =0\\cr\\hline\n\\sf13\\sim 16 &20 &200\\cr\\hline\n\\sf 17 \\sim 20\n\\end{array}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "You are the Miserable", "background": "", "description": "小 A 和小 B 玩游戏。小 A 有一个凸 $n$ 边形以及 $n-3$ 条不交的对角线构成一个三角剖分。每一次，小 B 可以问小 A 某一条对角线 $x-y$ ，小 A 会回答他该对角线是否在他的三角剖分中。小 B 想要对于每一条 **三角剖分中** 的对角线得到至少一次肯定的答复。他希望询问的次数尽量少，而小 A 希望询问次数尽量多，并且有可能会根据小 B 的询问来改变他的三角剖分。但在这个过程中，小 A 的三角剖分不能与他曾做出的回答矛盾。\n\n现在，给出小 A 和小 B 玩的若干步，判断它们的游戏过程是否保持最优。如果是，输出 $0$；如果不是，输出第一次不是最优的操作，形如 `A x` 或者 `B x`，表示小 A 或者小 B 的第 $x$ 次操作不是最优的。\n\n具体地，保持最优的定义如下：假设最优情况下小 B 要询问 $k$ 次，那么每一步过后，双方最优的策略仍然使得总的询问次数为 $k$，第一次使得询问次数不为 $k$ 的步骤就是需要输出的步骤。\n\n他们玩了 $T$ 次独立的游戏，你需要对每一次询问作出回答。\n\n**注意：**\n\n-   数据保证，直到第一次不优的操作被做出，小 A 的回答都是合法的，即总存在一个三角剖分符合小 A 做出的所有回答。\n-   数据不保证，在第一次不优的操作被做出以后，小 A 的回答仍然保持合法，即可能不存在一个三角剖分符合小 A 做出的所有回答。\n\n**【提示】**\n\n1. 多边形的对角线指连接不相邻两个顶点的线段。\n2. 多边形的三角剖分指 $n-3$ 条仅可以在顶点处相交的对角线构成的集合。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。\n\n对于每一组数据，第一行两个整数 $n,m$。\n\n接下来 $m$ 行，每一行三个整数 $x,y,z$，表示小 B 的询问和小 A 的回答。其中 $z=0$ 表示该对角线不存在，$z=1$ 则表示存在。", "outputFormat": "对于每组数据输出一行，若存在不优的操作则输出第一次不是最优的操作，否则输出 $0$。", "hint": "【样例解释】\n\n对于 $n=5$，最优的 $k=4$。对于 $n=4$，最优的 $k=2$。对于最后一组数据，B 重复询问同一条边已经不是最优，此时 A 的回答可以不合法。\n\n【数据范围】\n\n$1 \\le T\\le 10^3$，$4\\le n \\le 10^5$，$1 \\le \\sum n \\le 2\\times 10^5$，$1 \\le m \\le k$，$1 \\le x,y \\le n$，$0 \\le z \\le 1$。保证所有的 $x-y$ 都是合法的对角线，以及直到第一次不是最优的一步所有询问的回答都至少对应一种三角剖分。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c|c}\\hline \n\\textbf{~~测试点编号~~}&\\bm{~~T\\le~~}&\\bm{~~n \\le ~~}&\\bm{~~~~m~~~~}& ~\\bm{z}~\\cr\\hline \n\\textsf1\\sim \\sf2 &100 &5  &  \\cr\\hline \n\\sf3\\sim 4 & 100& 7& &\\cr\\hline \n\\sf5 \\sim 6 &100 &8 & & \\cr\\hline \n\\sf7 \\sim \\sf9 & & &=1 & \\cr\\hline \n\\sf10\\sim 12 & & & & =0\\cr\\hline\n\\sf13\\sim 16 &20 &200\\cr\\hline\n\\sf 17 \\sim 20\n\\end{array}\n$$", "locale": "zh-CN"}}}
{"pid": "P8567", "type": "P", "difficulty": 1, "samples": [["2\n3 5\n15 20", "2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "洛谷原创"], "title": "[JRKSJ R6] Nothing", "background": "【此处应有图】", "description": "我们定义 $f(x)$ 表示 $x$ 在 $2$ 进制下最低的 $1$ 的位置（你需要注意，二进制下的最低位是第 $0 $ 位）。以下是其在 `C++` 语言中的代码（未考虑数据类型造成的问题）：\n\n```c++\nint f(int x){\n\tint ans = 0;\n\twhile (x % 2 == 0){\n\t\tx /= 2;\n\t\tans += 1;\n\t}\n\treturn ans;\n}\n```\n\n共有 $T$ 组询问，每组询问给定区间 $[l,r]$，求有多少个 $i\\in [l,r]$ 使得 $f(i)< f(i+1)$。", "inputFormat": "第一行一个正整数 $T$。\\\n接下来 $T$ 行每行两个正整数 $l,r$ 表示一次询问。", "outputFormat": "$T$ 行每行一个整数表示答案。", "hint": "### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $T\\le$ | 特殊限制 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^5$ | $l=r$ | $10$ |\n| $2$ | $10^4$ | $r-l\\le10^3$ | $30$ |\n| $3$ | $10^5$ | $r\\le10^6$ | $20$ |\n| $4$ | $10^5$ | 无 | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le l\\le r\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R6] Nothing", "background": "【此处应有图】", "description": "我们定义 $f(x)$ 表示 $x$ 在 $2$ 进制下最低的 $1$ 的位置（你需要注意，二进制下的最低位是第 $0 $ 位）。以下是其在 `C++` 语言中的代码（未考虑数据类型造成的问题）：\n\n```c++\nint f(int x){\n\tint ans = 0;\n\twhile (x % 2 == 0){\n\t\tx /= 2;\n\t\tans += 1;\n\t}\n\treturn ans;\n}\n```\n\n共有 $T$ 组询问，每组询问给定区间 $[l,r]$，求有多少个 $i\\in [l,r]$ 使得 $f(i)< f(i+1)$。", "inputFormat": "第一行一个正整数 $T$。\\\n接下来 $T$ 行每行两个正整数 $l,r$ 表示一次询问。", "outputFormat": "$T$ 行每行一个整数表示答案。", "hint": "### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $T\\le$ | 特殊限制 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^5$ | $l=r$ | $10$ |\n| $2$ | $10^4$ | $r-l\\le10^3$ | $30$ |\n| $3$ | $10^5$ | $r\\le10^6$ | $20$ |\n| $4$ | $10^5$ | 无 | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le l\\le r\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8568", "type": "P", "difficulty": 6, "samples": [["1\n5 999 999\n\n0\n\n1\n\n1", "\n\n? 1 3 2\n\n? 4 5 2\n\n! 3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "2022", "三分", "洛谷原创", "交互题", "Special Judge", "O2优化"], "title": "[JRKSJ R6] func", "background": "", "description": "**这是一道 IO 交互题．**\n\n你有一个一次函数 $f(x)=kx+b$（$1\\le x \\le n-1$）．这个一次函数满足 $k,b$ 均为整数且 $k>0$．\n\nvectorwyx 修改了这个函数，具体而言，他会选择一个整数 $t$（$1\\le t \\le n-1$），将这个函数在直线 $x=t$ 及右侧的部分向右平移一个单位长度，并把两部分的端点用直线段连接，得到一个分段函数 $g(x)$：\n\n$$\ng(x)=\\begin{cases}\nkx+b&1\\le x<t\\\\\nkt+b& t\\le x <t+1\\\\\nk(x-1)+b& t+1\\le x \\le n\n\\end{cases}\n$$\n\n请通过交互的方式得到 $t$ 的值．\n\n### 交互方式\n\n**本题单个测试点中含有多组数据．**\n\n1. 首先从标准输入流读入一个整数 $T$，表示数据组数．\n1. 接下来你将进行 $T$ 组数据的交互．对于每组数据，首先从标准输入流读入三个整数 $n,Q,P$．\n1. 你可以通过向标准输出流输出 `? l r p`（$1\\le l \\le r \\le n$，$2\\le p \\le P$）的方式来询问．在单组数据中，你最多只能进行 $Q$ 次 `?` 操作．交互库会根据你的询问依次做出以下判断并向标准输入流发送返回结果：\n    - 若你的询问数据范围错误，回答为 $-2$．此时交互库会直接返回 WA．你需要立刻退出你的程序来避免与已经结束程序的交互库交互引起超时．\n    - 若 $g(l)=g(r)$，回答为 $-1$．\n    - 否则回答为 $(g(l) + g(r))\\bmod p$．\n1. 你可以通过向标准输出流输出 `! t` 的方式来给出答案．你只能进行一次回答操作，且回答操作必须是你在每组数据中进行的最后一个操作．交互完成后，从标准输入流读入一个零或一的整数 $x$．若 $x=1$ 则代表当前数据回答正确，你需要回到步骤 $2$ 以进行下一组数据的交互．否则 $x=0$，你需要立刻退出自己的程序．\n\n**不要忘记在每次输出后刷新缓冲区，否则你将会 TLE．**\n\n下面是一些语言的刷新缓冲区操作：\n\n- C++：`fflush(stdout)` 或 `cout.flush()`．\n- C: `fflush(stdout)`．\n- Java: `System.out.flush()`．\n- Python: `stdout.flush()`．\n- Pascal: `flush(output)`．\n- 其他语言：请参考对应语言的帮助文档．\n", "inputFormat": "见「交互方式」．", "outputFormat": "见「交互方式」，", "hint": "### 样例解释\n\n请注意，样例仅用来表示交互的规则，不保证有逻辑性．\n\n#### 样例 #1\n\n$f(x)=3x-2$（$1\\le x \\le 4$），$t=3$．\n\n$$\ng(x)=\\begin{cases}\n3x-2&1\\le x<3\\\\\n7& 3\\le x <4\\\\\n3x-5& 4\\le x \\le 5.\n\\end{cases}\n$$\n\n所以第一次询问的结果 $(g(1) + g(3))\\bmod 2 = (1+7)\\bmod 2=0$，第二次询问的结果 $(g(4)+g(5))\\bmod 2 = (7+ 10)\\bmod 2=1$．\n\n### 数据范围与约束\n\n**本题采用捆绑测试．且不存在一个 Subtask 包含其它所有 Subtask 的限制．**\n\n| Subtask | 分值 |    $n$     | $Q=$ |       $P=$        | $g(x)\\le$ |    特殊性质     |\n| ------- | ---- | ---------- | ---- | ----------------- | --------- | --------------- |\n| $1$     | $10$ | $\\le 10^9$ | $42$ | $2\\times 10^{18}$ | $10^{18}$ | 无              |\n| $2$     | $20$ | $\\le 10^9$ | $30$ | $2$               | $10^{18}$ | 斜率 $k$ 为奇数 |\n| $3$     | $30$ | $\\le 10^9$ | $42$ | $50$              | $10^{18}$ | 无              |\n| $4$     | $39$ | $\\le 10^9$ | $32$ | $50$              | $10^{18}$ | 无              |\n|$5$|$1$|$ = 1162261531$| $32$| $50$| $7857125847061472735$|无|\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 10$，$2\\le n\\le 1162261531$．且满足 $\\forall x \\in [1,n], 0 \\le g(x)\\le 7857125847061472735$．\n\n### 提示\n\n由于本题不存在一个 Subtask 包含其它所有 Subtask 的限制．所以数据范围中「对于 $100\\%$ 的数据」部分的 $n$ 和 $g(x)$ 的上界没有任何意义．但由于直接写「对于 $100\\%$ 的数据，满足 $n \\ge 2$，$g(x)\\ge 0$」会被某些管理以「你管这叫数据范围」打回，故此题中保留该没有意义的上界．", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R6] func", "background": "", "description": "**这是一道 IO 交互题．**\n\n你有一个一次函数 $f(x)=kx+b$（$1\\le x \\le n-1$）．这个一次函数满足 $k,b$ 均为整数且 $k>0$．\n\nvectorwyx 修改了这个函数，具体而言，他会选择一个整数 $t$（$1\\le t \\le n-1$），将这个函数在直线 $x=t$ 及右侧的部分向右平移一个单位长度，并把两部分的端点用直线段连接，得到一个分段函数 $g(x)$：\n\n$$\ng(x)=\\begin{cases}\nkx+b&1\\le x<t\\\\\nkt+b& t\\le x <t+1\\\\\nk(x-1)+b& t+1\\le x \\le n\n\\end{cases}\n$$\n\n请通过交互的方式得到 $t$ 的值．\n\n### 交互方式\n\n**本题单个测试点中含有多组数据．**\n\n1. 首先从标准输入流读入一个整数 $T$，表示数据组数．\n1. 接下来你将进行 $T$ 组数据的交互．对于每组数据，首先从标准输入流读入三个整数 $n,Q,P$．\n1. 你可以通过向标准输出流输出 `? l r p`（$1\\le l \\le r \\le n$，$2\\le p \\le P$）的方式来询问．在单组数据中，你最多只能进行 $Q$ 次 `?` 操作．交互库会根据你的询问依次做出以下判断并向标准输入流发送返回结果：\n    - 若你的询问数据范围错误，回答为 $-2$．此时交互库会直接返回 WA．你需要立刻退出你的程序来避免与已经结束程序的交互库交互引起超时．\n    - 若 $g(l)=g(r)$，回答为 $-1$．\n    - 否则回答为 $(g(l) + g(r))\\bmod p$．\n1. 你可以通过向标准输出流输出 `! t` 的方式来给出答案．你只能进行一次回答操作，且回答操作必须是你在每组数据中进行的最后一个操作．交互完成后，从标准输入流读入一个零或一的整数 $x$．若 $x=1$ 则代表当前数据回答正确，你需要回到步骤 $2$ 以进行下一组数据的交互．否则 $x=0$，你需要立刻退出自己的程序．\n\n**不要忘记在每次输出后刷新缓冲区，否则你将会 TLE．**\n\n下面是一些语言的刷新缓冲区操作：\n\n- C++：`fflush(stdout)` 或 `cout.flush()`．\n- C: `fflush(stdout)`．\n- Java: `System.out.flush()`．\n- Python: `stdout.flush()`．\n- Pascal: `flush(output)`．\n- 其他语言：请参考对应语言的帮助文档．\n", "inputFormat": "见「交互方式」．", "outputFormat": "见「交互方式」，", "hint": "### 样例解释\n\n请注意，样例仅用来表示交互的规则，不保证有逻辑性．\n\n#### 样例 #1\n\n$f(x)=3x-2$（$1\\le x \\le 4$），$t=3$．\n\n$$\ng(x)=\\begin{cases}\n3x-2&1\\le x<3\\\\\n7& 3\\le x <4\\\\\n3x-5& 4\\le x \\le 5.\n\\end{cases}\n$$\n\n所以第一次询问的结果 $(g(1) + g(3))\\bmod 2 = (1+7)\\bmod 2=0$，第二次询问的结果 $(g(4)+g(5))\\bmod 2 = (7+ 10)\\bmod 2=1$．\n\n### 数据范围与约束\n\n**本题采用捆绑测试．且不存在一个 Subtask 包含其它所有 Subtask 的限制．**\n\n| Subtask | 分值 |    $n$     | $Q=$ |       $P=$        | $g(x)\\le$ |    特殊性质     |\n| ------- | ---- | ---------- | ---- | ----------------- | --------- | --------------- |\n| $1$     | $10$ | $\\le 10^9$ | $42$ | $2\\times 10^{18}$ | $10^{18}$ | 无              |\n| $2$     | $20$ | $\\le 10^9$ | $30$ | $2$               | $10^{18}$ | 斜率 $k$ 为奇数 |\n| $3$     | $30$ | $\\le 10^9$ | $42$ | $50$              | $10^{18}$ | 无              |\n| $4$     | $39$ | $\\le 10^9$ | $32$ | $50$              | $10^{18}$ | 无              |\n|$5$|$1$|$ = 1162261531$| $32$| $50$| $7857125847061472735$|无|\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 10$，$2\\le n\\le 1162261531$．且满足 $\\forall x \\in [1,n], 0 \\le g(x)\\le 7857125847061472735$．\n\n### 提示\n\n由于本题不存在一个 Subtask 包含其它所有 Subtask 的限制．所以数据范围中「对于 $100\\%$ 的数据」部分的 $n$ 和 $g(x)$ 的上界没有任何意义．但由于直接写「对于 $100\\%$ 的数据，满足 $n \\ge 2$，$g(x)\\ge 0$」会被某些管理以「你管这叫数据范围」打回，故此题中保留该没有意义的上界．", "locale": "zh-CN"}}}
{"pid": "P8569", "type": "P", "difficulty": 6, "samples": [["10 10\n2 8 9 1 9 2 7 1 2 10\n1 10 1 1", "544"]], "limits": {"time": [2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077, 2077], "memory": [27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648, 27648]}, "tags": ["2022", "洛谷原创", "O2优化", "分治", "位运算"], "title": "[JRKSJ R6] 第七学区", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/jswrnw5w.png)\n\n这个题本来是要拿到 Tree Diagram 上算的，但是 Tree Diagram 被某组织的宇宙射线射爆了，所以这个问题交给了你。\n\n不过你不需要计算出可能出现的最坏情况，只需要解决原问题就可以了。", "description": "给你一个长度为 $n$ 的序列 $a$，求其所有子区间的按位或和的和。", "inputFormat": "**本题采用特殊的读入方式。以下是[读入模板](https://www.luogu.com.cn/paste/rz2t978c)：**\n\n```cpp\n#include<bits/stdc++.h>\n#define Misaka namespace  \n#define Mikoto std \n#define ull unsigned long long \nusing Misaka Mikoto;\nnamespace READ\n{\n\tull Read()\n\t{\n\t\tchar ch=getchar();\n\t\tull s=0;\n\t\twhile(ch<'0'||ch>'9') ch=getchar();\n\t\twhile(ch>='0'&&ch<='9') s=s*10+ch-'0',ch=getchar();\n\t\treturn s;\n\t}\n\tull tp[10005];\n\tint l,r;\n\tull g1,g2;\n\tvoid init(int &n)\n\t{\n\t\tint i,k;\n\t\tn=Read(),k=Read(),l=1;\n\t\tfor(i=1;i<=k;i++)\n\t\t\ttp[i]=Read();\n\t}\n\tull read()\n\t{\n\t\tif(l>r)\n\t\t\tl=Read(),r=Read(),g1=Read(),g2=Read();\n\t\treturn tp[l++]*g1+g2;\n\t}\n}\nint main()\n{\n\tint n;\n   \tREAD::init(n);\n}\n```\n\n初始调用一次 `READ::init(n)`，之后你应调用 $n$ 次 `READ::read()`，第 $i$ 次 `READ::read` 返回 $a_i$。", "outputFormat": "一个整数，表示答案。答案对 $2^{64}$ 取模。", "hint": "保证读入模板消耗的时间少于 200ms，空间少于 1MB。\n\n### 数据规模\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $10^4$ | $10$ |\n| $2$ | $3\\times 10^6$ | $20$ |\n| $3$ | $4\\times 10^7$ | $30$ |\n| $4$ | $5\\times 10^7$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^7$，$0\\le a_i <2^{64}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R6] 第七学区", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/jswrnw5w.png)\n\n这个题本来是要拿到 Tree Diagram 上算的，但是 Tree Diagram 被某组织的宇宙射线射爆了，所以这个问题交给了你。\n\n不过你不需要计算出可能出现的最坏情况，只需要解决原问题就可以了。", "description": "给你一个长度为 $n$ 的序列 $a$，求其所有子区间的按位或和的和。", "inputFormat": "**本题采用特殊的读入方式。以下是[读入模板](https://www.luogu.com.cn/paste/rz2t978c)：**\n\n```cpp\n#include<bits/stdc++.h>\n#define Misaka namespace  \n#define Mikoto std \n#define ull unsigned long long \nusing Misaka Mikoto;\nnamespace READ\n{\n\tull Read()\n\t{\n\t\tchar ch=getchar();\n\t\tull s=0;\n\t\twhile(ch<'0'||ch>'9') ch=getchar();\n\t\twhile(ch>='0'&&ch<='9') s=s*10+ch-'0',ch=getchar();\n\t\treturn s;\n\t}\n\tull tp[10005];\n\tint l,r;\n\tull g1,g2;\n\tvoid init(int &n)\n\t{\n\t\tint i,k;\n\t\tn=Read(),k=Read(),l=1;\n\t\tfor(i=1;i<=k;i++)\n\t\t\ttp[i]=Read();\n\t}\n\tull read()\n\t{\n\t\tif(l>r)\n\t\t\tl=Read(),r=Read(),g1=Read(),g2=Read();\n\t\treturn tp[l++]*g1+g2;\n\t}\n}\nint main()\n{\n\tint n;\n   \tREAD::init(n);\n}\n```\n\n初始调用一次 `READ::init(n)`，之后你应调用 $n$ 次 `READ::read()`，第 $i$ 次 `READ::read` 返回 $a_i$。", "outputFormat": "一个整数，表示答案。答案对 $2^{64}$ 取模。", "hint": "保证读入模板消耗的时间少于 200ms，空间少于 1MB。\n\n### 数据规模\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | \n| $1$ | $10^4$ | $10$ |\n| $2$ | $3\\times 10^6$ | $20$ |\n| $3$ | $4\\times 10^7$ | $30$ |\n| $4$ | $5\\times 10^7$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^7$，$0\\le a_i <2^{64}$。", "locale": "zh-CN"}}}
{"pid": "P8570", "type": "P", "difficulty": 7, "samples": [["5 5", "453"], ["20 20", "173825"]], "limits": {"time": [1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "洛谷原创", "O2优化", "素数判断,质数,筛法", "莫比乌斯反演"], "title": "[JRKSJ R6] 牵连的世界", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/jdi9nrec.png)", "description": "给定 $n,m$，求\n\n$$\\sum_{i=1}^n \\sum_{j=1}^m \\sigma_0(ij)\\varphi(ij)$$", "inputFormat": "两个整数 $n,m$。", "outputFormat": "一个整数，表示答案。答案对 $10^9+7$ 取模。", "hint": "$\\sigma_0,\\varphi$ 分别为因数个数函数，欧拉函数。\n\n本题可能轻微卡常。\n\n### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n,m\\le$ |  $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10$ |\n| $2$ | $10^5$ |  $30$ |\n| $3$ | $2\\times 10^5$ | $30$ |\n| $4$ | $5\\times 10^5$ | $30$ |\n| $5$ | $3\\times 10^6$ | $1$ |\n\n对于所有数据，$1\\le n,m\\le 3\\times 10^6$。\n\n出于某些原因，你只要得到了 $\\ge 100$ 分就可以通过此题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R6] 牵连的世界", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/jdi9nrec.png)", "description": "给定 $n,m$，求\n\n$$\\sum_{i=1}^n \\sum_{j=1}^m \\sigma_0(ij)\\varphi(ij)$$", "inputFormat": "两个整数 $n,m$。", "outputFormat": "一个整数，表示答案。答案对 $10^9+7$ 取模。", "hint": "$\\sigma_0,\\varphi$ 分别为因数个数函数，欧拉函数。\n\n本题可能轻微卡常。\n\n### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n,m\\le$ |  $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10$ |\n| $2$ | $10^5$ |  $30$ |\n| $3$ | $2\\times 10^5$ | $30$ |\n| $4$ | $5\\times 10^5$ | $30$ |\n| $5$ | $3\\times 10^6$ | $1$ |\n\n对于所有数据，$1\\le n,m\\le 3\\times 10^6$。\n\n出于某些原因，你只要得到了 $\\ge 100$ 分就可以通过此题。", "locale": "zh-CN"}}}
{"pid": "P8571", "type": "P", "difficulty": 7, "samples": [["6 3\ndedicatus\na\nmisaka\nmikoto\nmi\naaa\n1 5 6\n1 2 4\n1 5 4", "3\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "洛谷原创", "后缀自动机 SAM", "O2优化", "分治", "虚树", "分块", "AC 自动机"], "title": "[JRKSJ R6] Dedicatus545", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/im5jyatm.png)", "description": "对于字符串 $x,y$，定义 $w(x,y)$ 为 $x$ 在 $y$ 中的出现次数。\n\nIndex 给了你 $n$ 个字符串 $s_{1\\dots n}$，$m$ 次询问，每次询问给定 $l,r,k$，求 $\\max_{i=l}^r w(s_i,s_k)$。", "inputFormat": "第一行两个整数 $n,m$。\\\n下面 $n$ 行，每行一个只包含小写字母的字符串表示 $s_{1\\dots n}$\\\n下面 $m$ 行，每行三个整数 $l,r,k$ 表示询问。", "outputFormat": "对于每个询问，每行输出一个整数表示答案。", "hint": "### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n,q\\le$ | $\\sum\\vert s\\vert\\le$ | $\\text{Score}$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |:----------: |\n| $1$ | $2\\times10^3$ | $10^4$ | $20$ | 无 |\n| $2$ | $5\\times10^4$ | $3\\times 10^5$ | $20$ | 无\n| $3$ | $10^5$ | $5\\times10^5$ | $20$ | 所有字符串互不相同 |\n| $4$ | $10^5$ | $5\\times10^5$ | $40$ | 无\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 10^5$，$1\\le \\sum |s|\\le 5\\times 10^5$，$1\\le l\\le r\\le n$，$1\\le k\\le n$。\n\nData：abruce&critnos&fjy666", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R6] Dedicatus545", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/im5jyatm.png)", "description": "对于字符串 $x,y$，定义 $w(x,y)$ 为 $x$ 在 $y$ 中的出现次数。\n\nIndex 给了你 $n$ 个字符串 $s_{1\\dots n}$，$m$ 次询问，每次询问给定 $l,r,k$，求 $\\max_{i=l}^r w(s_i,s_k)$。", "inputFormat": "第一行两个整数 $n,m$。\\\n下面 $n$ 行，每行一个只包含小写字母的字符串表示 $s_{1\\dots n}$\\\n下面 $m$ 行，每行三个整数 $l,r,k$ 表示询问。", "outputFormat": "对于每个询问，每行输出一个整数表示答案。", "hint": "### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n,q\\le$ | $\\sum\\vert s\\vert\\le$ | $\\text{Score}$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |:----------: |\n| $1$ | $2\\times10^3$ | $10^4$ | $20$ | 无 |\n| $2$ | $5\\times10^4$ | $3\\times 10^5$ | $20$ | 无\n| $3$ | $10^5$ | $5\\times10^5$ | $20$ | 所有字符串互不相同 |\n| $4$ | $10^5$ | $5\\times10^5$ | $40$ | 无\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 10^5$，$1\\le \\sum |s|\\le 5\\times 10^5$，$1\\le l\\le r\\le n$，$1\\le k\\le n$。\n\nData：abruce&critnos&fjy666", "locale": "zh-CN"}}}
{"pid": "P8572", "type": "P", "difficulty": 4, "samples": [["7 2 3\n1 1 4 5 1 4 0\n1 9 1 9 8 1 0\n6 7\n5 7\n1 3", "4\n9\n11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "洛谷原创", "O2优化", "枚举", "前缀和", "根号分治"], "title": "[JRKSJ R6] Eltaw", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/at23jtmh.png?x-oss-process=image)\n\n你在月下独自行走，不禁想起了一道简单题。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "给你 $k$ 个长为 $n$ 的序列 $a_{1\\dots k,1\\dots n}$，有 $q$ 次询问，每次询问给出一个区间 $[l,r]$，要求出 $\\displaystyle\\max_{i=1}^k\\sum_{j=l}^ra_{i,j}$，即求出所有序列中区间 $[l,r]$ 的和的最大值。", "inputFormat": "第一行三个整数 $n,k,q$。\\\n接下来 $k$ 行，每行 $n$ 个整数 $a_{i,j}$。\\\n接下来 $q$ 行，每行两个整数 $l,r$ 表示一次询问。", "outputFormat": "输出 $q$ 行表示每个询问的答案。", "hint": "Idea：cyffff，Solution：cyffff，Code：cyffff，Data：cyffff\n\n**Eltaw - Fl00t (IN Lv 14.8)**\n\n**本题输入输出文件较大，请使用恰当的输入输出方式。**\n### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊限制 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times10^3$ | $k\\le 100$ | $20$ |\n| $2$ | $5\\times10^5$ | 保证 $l=1$ | $30$ |\n| $3$ | $5\\times10^5$ | 无 | $50$ |\n\n对于 $100\\%$ 的数据，$1\\le n,k,q\\le5\\times 10^5$，$n\\times k\\le 5\\times10^5$，$1\\le l\\le r\\le n$，$0\\le a_{i,j}\\le 10^9$。\n### 数据更新记录\n$\\text{Upd 2022.10.05}$：更新了两组数据，分别卡掉了两种时间复杂度错误的做法。感谢 @[二叉苹果树](https://www.luogu.com.cn/user/270854) 指出。\n\n$\\text{Upd 2022.10.08}$：更新了一组数据，卡掉了记忆化不正确的做法。感谢 @[SweetOrangeOvO](https://www.luogu.com.cn/user/236862) 指出。\n\n如果你能通过现在的所有测试点，说明你的代码复杂度极可能是正确的。如果你仍认为你的复杂度是错误的，请联系出题人。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R6] Eltaw", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/at23jtmh.png?x-oss-process=image)\n\n你在月下独自行走，不禁想起了一道简单题。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "给你 $k$ 个长为 $n$ 的序列 $a_{1\\dots k,1\\dots n}$，有 $q$ 次询问，每次询问给出一个区间 $[l,r]$，要求出 $\\displaystyle\\max_{i=1}^k\\sum_{j=l}^ra_{i,j}$，即求出所有序列中区间 $[l,r]$ 的和的最大值。", "inputFormat": "第一行三个整数 $n,k,q$。\\\n接下来 $k$ 行，每行 $n$ 个整数 $a_{i,j}$。\\\n接下来 $q$ 行，每行两个整数 $l,r$ 表示一次询问。", "outputFormat": "输出 $q$ 行表示每个询问的答案。", "hint": "Idea：cyffff，Solution：cyffff，Code：cyffff，Data：cyffff\n\n**Eltaw - Fl00t (IN Lv 14.8)**\n\n**本题输入输出文件较大，请使用恰当的输入输出方式。**\n### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊限制 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times10^3$ | $k\\le 100$ | $20$ |\n| $2$ | $5\\times10^5$ | 保证 $l=1$ | $30$ |\n| $3$ | $5\\times10^5$ | 无 | $50$ |\n\n对于 $100\\%$ 的数据，$1\\le n,k,q\\le5\\times 10^5$，$n\\times k\\le 5\\times10^5$，$1\\le l\\le r\\le n$，$0\\le a_{i,j}\\le 10^9$。\n### 数据更新记录\n$\\text{Upd 2022.10.05}$：更新了两组数据，分别卡掉了两种时间复杂度错误的做法。感谢 @[二叉苹果树](https://www.luogu.com.cn/user/270854) 指出。\n\n$\\text{Upd 2022.10.08}$：更新了一组数据，卡掉了记忆化不正确的做法。感谢 @[SweetOrangeOvO](https://www.luogu.com.cn/user/236862) 指出。\n\n如果你能通过现在的所有测试点，说明你的代码复杂度极可能是正确的。如果你仍认为你的复杂度是错误的，请联系出题人。", "locale": "zh-CN"}}}
{"pid": "P8573", "type": "P", "difficulty": 2, "samples": [["5\nCapsLock CapsLock a CapsLock B\n4\n1\n2\n3\n4", "a\nb\nA\nB"], ["7\nh W CapsLock I CapsLock j CapsLock\n8\n7\n9\n13\n45\n20\n28\n50\n101", "I\nh\nH\nH\nj\nj\nW\nH"], ["10\nOh P CapsLock CapsLock CapsLock Cv Ts CapsLock XU AR \n10\n84\n63\n414\n149\n25\n61\n50\n4043\n9111\n47", "AR\ncV\nAR\nXU\nOh\nOh\nP\nXU\ncV\nXU"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串"], "title": "「DTOI-2」星之灵", "background": "### 小提醒\n\n- 注意 $\\texttt{CapsLock}$ 的大小写。", "description": "### 简要题意\n\n重复输入 $n$ 个字符串，其中：\n\n- 当输入的字符串为 $\\texttt{CapsLock}$ 时，在此之后的字符串大小写互换，直到下一个 $\\texttt{CapsLock}$ 出现；\n- 给定 $q$ 组询问，每次询问第 $x$ 个不为 $\\texttt{CapsLock}$ 的字符串。\n\n### 原题面\n\n星之灵可以对你说 $n$ 句话，你需要对其做记录。\n\n每句话可能是一个不等于 $\\texttt{CapsLock}$ 的字符串，也可以是一个命令 $\\texttt{CapsLock}$，其作用是控制星之灵说出的所有字母的大小写，当说出一次 $\\texttt{CapsLock}$ 时，之后说出的所有小写字母均需变为大写，大写字母均需变为小写，第二次说出 $\\texttt{CapsLock}$ 时又变为正常，以此类推。特别地，对于星之灵说出的 $\\texttt{CapsLock}$ 命令，你无须记录。\n\n星之灵将会不断重复说出这 $n$ 句话，且不改变顺序，而且他有 $q$ 次询问，每次询问都请你告诉星之灵，你记录的第 $x$ 句话是什么。", "inputFormat": "**本题使用多组数据测试。**\n\n第一行一个整数 $n$；\n\n接下来一行 $n$ 个字符串；\n\n第三行一个整数 $q$；\n\n接下来 $q$ 行，每行一个正整数 $x$。\n\n$n,q,x$ 的含义见题面。", "outputFormat": "输出 $q$ 行，每行一个字符串对应一次询问的答案。", "hint": "### 样例 #1 解释\n\n前四次记录的语句分别为：$a,b,A,B$。\n\n### 数据范围\n\n| $\\textbf{Subtask}$ | $n,q \\le$ | $x\\le $ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $100$ | $A$ | $30$ |\n| $2$ | $10^4$ | $10^5$ | / | $30$ |\n| $3$ | $10^5$ | $10^{18}$ | / | $40$ |\n\n对于所有数据，$1 \\leq n,q \\leq 10^5,1 \\leq x \\leq 10^{18}$\n\n性质 $A$：输入字符串中不存在 $\\texttt{CapsLock}$。\n\n### 数据保证\n\n- 所有语句中至少包含一个不为 $\\texttt{CapsLock}$ 的字符串；\n- 所有输入的字符串长度不大于 $10$；\n- 所有输入的字符串不为空且仅包含大小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-2」星之灵", "background": "### 小提醒\n\n- 注意 $\\texttt{CapsLock}$ 的大小写。", "description": "### 简要题意\n\n重复输入 $n$ 个字符串，其中：\n\n- 当输入的字符串为 $\\texttt{CapsLock}$ 时，在此之后的字符串大小写互换，直到下一个 $\\texttt{CapsLock}$ 出现；\n- 给定 $q$ 组询问，每次询问第 $x$ 个不为 $\\texttt{CapsLock}$ 的字符串。\n\n### 原题面\n\n星之灵可以对你说 $n$ 句话，你需要对其做记录。\n\n每句话可能是一个不等于 $\\texttt{CapsLock}$ 的字符串，也可以是一个命令 $\\texttt{CapsLock}$，其作用是控制星之灵说出的所有字母的大小写，当说出一次 $\\texttt{CapsLock}$ 时，之后说出的所有小写字母均需变为大写，大写字母均需变为小写，第二次说出 $\\texttt{CapsLock}$ 时又变为正常，以此类推。特别地，对于星之灵说出的 $\\texttt{CapsLock}$ 命令，你无须记录。\n\n星之灵将会不断重复说出这 $n$ 句话，且不改变顺序，而且他有 $q$ 次询问，每次询问都请你告诉星之灵，你记录的第 $x$ 句话是什么。", "inputFormat": "**本题使用多组数据测试。**\n\n第一行一个整数 $n$；\n\n接下来一行 $n$ 个字符串；\n\n第三行一个整数 $q$；\n\n接下来 $q$ 行，每行一个正整数 $x$。\n\n$n,q,x$ 的含义见题面。", "outputFormat": "输出 $q$ 行，每行一个字符串对应一次询问的答案。", "hint": "### 样例 #1 解释\n\n前四次记录的语句分别为：$a,b,A,B$。\n\n### 数据范围\n\n| $\\textbf{Subtask}$ | $n,q \\le$ | $x\\le $ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $100$ | $A$ | $30$ |\n| $2$ | $10^4$ | $10^5$ | / | $30$ |\n| $3$ | $10^5$ | $10^{18}$ | / | $40$ |\n\n对于所有数据，$1 \\leq n,q \\leq 10^5,1 \\leq x \\leq 10^{18}$\n\n性质 $A$：输入字符串中不存在 $\\texttt{CapsLock}$。\n\n### 数据保证\n\n- 所有语句中至少包含一个不为 $\\texttt{CapsLock}$ 的字符串；\n- 所有输入的字符串长度不大于 $10$；\n- 所有输入的字符串不为空且仅包含大小写字母。", "locale": "zh-CN"}}}
{"pid": "P8574", "type": "P", "difficulty": 4, "samples": [["7\n1\n5\n12\n95\n2040\n1145141920209\n1070909051", "1.000000\n4.000000\n6.500000\n38.666667\n403.857143\n1475989956.412959\n1.000000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化"], "title": "「DTOI-2」星之影", "background": ">闻是白极影，见时方立竿。", "description": "白极影化为立竿之人莅临人间，带来了星之函数 $f(x)$，它的值为最接近于 $\\sqrt[4]x$ 的整数$\\\\$（即 $f(x)=\\left\\lfloor\\sqrt[4]x+\\dfrac12\\right\\rfloor$；$\\lfloor u\\rfloor$ 为对 $u$ 向下取整后的值）。\n\n现有 $t$ 个数字 $n$，对于每个 $n$，立竿人想知道 $\\sum\\limits_{i=1}^n\\dfrac1{f(i)}$ 的值是多少，请你告诉它吧。\n\n---\n~~因为立竿人很急，所以~~本题的 $t$ 组询问强制在线，后一个询问需通过前一个询问的答案生成。\n\n可用以下 `C++` 代码生成（其他语言同理；需包含 `<stdio.h>`）：\n```cpp\ntypedef long long ll;\nchar buf_ans[114];\nll next_n(double last_ans=0,ll get_n=0){\n\t//last_ans<n<=1e18\n\tsprintf(buf_ans,\"%.6f\",last_ans);\n\tfor(ll i=0,x=0;;i++){\n\t\tif(buf_ans[i]=='.')return get_n^x;\n\t\tif(i&1)x*=10;\n\t\telse x=x*10+(buf_ans[i]^48);\n\t}\n}\n```\n该函数第一个参数为上一次询问的答案（第一次询问时该值为 $0$，也就是说第一个数未经加密），第二个参数为这一次读入的被加密的数，函数返回解密后的 $n$。", "inputFormat": "\n\n第一行一个整数 $t$，表示数据组数（询问次数）。\n\n对于每组数据，仅一行一个整数表示加密后的 $n$（第一个 $n$ 未被加密）。", "outputFormat": "每行输出一个六位小数，表示答案。", "hint": "### 样例解释\n\n样例#1 解密后各组询问分别是：\n$$\n\\def\\r{\\cr\\hline}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{t}&1&2&3&4&5&6&7\\r\n\\textbf{n}&1&4&8&89&2022&1145141919810&1\\r\n\\end{array}\n$$\n### 数据范围\n\n**本题采用捆绑测试。**\n$$\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & t= & n\\le&\\bm{\\textbf{Score}} \\cr\\hline\n1 & 10&10^6 & 2 \\cr\\hline\n2&1000&10^6&13\\cr\\hline\n3&100&10^9&15\\cr\\hline\n4 &1000&10^{18}&40\\cr\\hline\n5 &%\\text{No Special Constraints}\n5\\times10^5&10^{18}& 30 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$10 \\le t \\le 5\\times10^5$，$1 \\le n \\le 10^{18}$。\n\n### 计分规则\n\n本题采用 $\\textbf{Special Judge}$，令你输出的答案为 $\\text{pans}$，标答答案为 $\\text{jans}$，如果 $\\vert \\text{pans}-\\text{jans}\\vert<\\text{jans}\\times10^{-5}$ 那么该组数据通过，在一个测试点内只有所有 $t$ 组数据通过该测试点才算通过。\n\n注意后一个 $\\text{Subtask}$ 对前一个 $\\text{Subtask}$ 有依赖关系，即如果你没有在前一个 $\\text{Subtask}$ 拿到分，那么你即使通过后一个 $\\text{Subtask}$ 的所有测试点，你也无法拿到后面的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-2」星之影", "background": ">闻是白极影，见时方立竿。", "description": "白极影化为立竿之人莅临人间，带来了星之函数 $f(x)$，它的值为最接近于 $\\sqrt[4]x$ 的整数$\\\\$（即 $f(x)=\\left\\lfloor\\sqrt[4]x+\\dfrac12\\right\\rfloor$；$\\lfloor u\\rfloor$ 为对 $u$ 向下取整后的值）。\n\n现有 $t$ 个数字 $n$，对于每个 $n$，立竿人想知道 $\\sum\\limits_{i=1}^n\\dfrac1{f(i)}$ 的值是多少，请你告诉它吧。\n\n---\n~~因为立竿人很急，所以~~本题的 $t$ 组询问强制在线，后一个询问需通过前一个询问的答案生成。\n\n可用以下 `C++` 代码生成（其他语言同理；需包含 `<stdio.h>`）：\n```cpp\ntypedef long long ll;\nchar buf_ans[114];\nll next_n(double last_ans=0,ll get_n=0){\n\t//last_ans<n<=1e18\n\tsprintf(buf_ans,\"%.6f\",last_ans);\n\tfor(ll i=0,x=0;;i++){\n\t\tif(buf_ans[i]=='.')return get_n^x;\n\t\tif(i&1)x*=10;\n\t\telse x=x*10+(buf_ans[i]^48);\n\t}\n}\n```\n该函数第一个参数为上一次询问的答案（第一次询问时该值为 $0$，也就是说第一个数未经加密），第二个参数为这一次读入的被加密的数，函数返回解密后的 $n$。", "inputFormat": "\n\n第一行一个整数 $t$，表示数据组数（询问次数）。\n\n对于每组数据，仅一行一个整数表示加密后的 $n$（第一个 $n$ 未被加密）。", "outputFormat": "每行输出一个六位小数，表示答案。", "hint": "### 样例解释\n\n样例#1 解密后各组询问分别是：\n$$\n\\def\\r{\\cr\\hline}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{t}&1&2&3&4&5&6&7\\r\n\\textbf{n}&1&4&8&89&2022&1145141919810&1\\r\n\\end{array}\n$$\n### 数据范围\n\n**本题采用捆绑测试。**\n$$\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & t= & n\\le&\\bm{\\textbf{Score}} \\cr\\hline\n1 & 10&10^6 & 2 \\cr\\hline\n2&1000&10^6&13\\cr\\hline\n3&100&10^9&15\\cr\\hline\n4 &1000&10^{18}&40\\cr\\hline\n5 &%\\text{No Special Constraints}\n5\\times10^5&10^{18}& 30 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$10 \\le t \\le 5\\times10^5$，$1 \\le n \\le 10^{18}$。\n\n### 计分规则\n\n本题采用 $\\textbf{Special Judge}$，令你输出的答案为 $\\text{pans}$，标答答案为 $\\text{jans}$，如果 $\\vert \\text{pans}-\\text{jans}\\vert<\\text{jans}\\times10^{-5}$ 那么该组数据通过，在一个测试点内只有所有 $t$ 组数据通过该测试点才算通过。\n\n注意后一个 $\\text{Subtask}$ 对前一个 $\\text{Subtask}$ 有依赖关系，即如果你没有在前一个 $\\text{Subtask}$ 拿到分，那么你即使通过后一个 $\\text{Subtask}$ 的所有测试点，你也无法拿到后面的分数。", "locale": "zh-CN"}}}
{"pid": "P8575", "type": "P", "difficulty": 6, "samples": [["10\n2 1\n3 1\n4 3\n5 1\n6 4\n7 2\n8 2\n9 4\n10 3\n3 1\n2 4\n-3 3\n4 -2\n-2 3\n-3 -6\n-5 -1\n-4 -7\n-5 -1\n-7 -7", "5\n2\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["cdq 分治"], "title": "「DTOI-2」星之河", "background": "> 星稀河影转，霜重月华孤。", "description": "星之统治者有一个星盘，其可以被抽象为一棵根节点为 $1$ 的树。树上每个节点 $i$ 有一颗红星、一颗蓝星，亮度分别记为 $\\text{Red}_i,\\text{Blue}_i$。\n\n现在，星之统治者想要知道，对于每个节点 $x$，其子树内（不包括该节点）有多少节点满足：其红星亮度小于等于 $x$ 的红星亮度，且其蓝星亮度小于等于 $x$ 的蓝星亮度。\n\n你需要按编号顺序依次输出每个节点的答案。为减少输出量，**如果答案为 $0$ 则不必输出。**", "inputFormat": "第一行一个整数表示 $n$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，表示存在 $(u,v)$ 这条树边。\n\n接下来 $n$ 行每行两个整数分别表示 $\\text{Red}_i, \\text{Blue}_i$。", "outputFormat": "每个答案非 $0$ 的节点一行，每行一个整数表示答案。", "hint": "### 样例解释\n\n对于节点 $1$，小于等于他的子节点有 $6,7,8,9,10$，因此输出 $5$。  \n对于节点 $4$，小于等于他的子节点有 $6$，因此输出 $1$。  \n对于节点 $5 $ 至 $10$，没有小于等于他的子节点，因此不输出。\n\n### 数据范围\n\n| $\\textbf{Subtask}$| $n\\le$ | 特殊性质 | 总分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $1000$ | 无 | $10$ |\n| $2$ | $5\\times 10^4$ | 无 | $20$ ||\n| $3$ | $10^5$ | $-200\\le \\text{Red}_i, \\text{Blue}_i \\le 200$ | $20$ |\n| $4$ | $2\\times 10^5$ | 树的形态是链 | $20$ |\n| $5$ | $2\\times 10^5$ | 无 | $30$ |\n\n对于所有数据，保证 $n \\le 2\\times 10^5$，$-10^9 \\le \\text{Red}_i, \\text{Blue}_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-2」星之河", "background": "> 星稀河影转，霜重月华孤。", "description": "星之统治者有一个星盘，其可以被抽象为一棵根节点为 $1$ 的树。树上每个节点 $i$ 有一颗红星、一颗蓝星，亮度分别记为 $\\text{Red}_i,\\text{Blue}_i$。\n\n现在，星之统治者想要知道，对于每个节点 $x$，其子树内（不包括该节点）有多少节点满足：其红星亮度小于等于 $x$ 的红星亮度，且其蓝星亮度小于等于 $x$ 的蓝星亮度。\n\n你需要按编号顺序依次输出每个节点的答案。为减少输出量，**如果答案为 $0$ 则不必输出。**", "inputFormat": "第一行一个整数表示 $n$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，表示存在 $(u,v)$ 这条树边。\n\n接下来 $n$ 行每行两个整数分别表示 $\\text{Red}_i, \\text{Blue}_i$。", "outputFormat": "每个答案非 $0$ 的节点一行，每行一个整数表示答案。", "hint": "### 样例解释\n\n对于节点 $1$，小于等于他的子节点有 $6,7,8,9,10$，因此输出 $5$。  \n对于节点 $4$，小于等于他的子节点有 $6$，因此输出 $1$。  \n对于节点 $5 $ 至 $10$，没有小于等于他的子节点，因此不输出。\n\n### 数据范围\n\n| $\\textbf{Subtask}$| $n\\le$ | 特殊性质 | 总分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $1000$ | 无 | $10$ |\n| $2$ | $5\\times 10^4$ | 无 | $20$ ||\n| $3$ | $10^5$ | $-200\\le \\text{Red}_i, \\text{Blue}_i \\le 200$ | $20$ |\n| $4$ | $2\\times 10^5$ | 树的形态是链 | $20$ |\n| $5$ | $2\\times 10^5$ | 无 | $30$ |\n\n对于所有数据，保证 $n \\le 2\\times 10^5$，$-10^9 \\le \\text{Red}_i, \\text{Blue}_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8576", "type": "P", "difficulty": 6, "samples": [["3 3\n2 3 5\n2 1 3\n1 1 3 2 4\n2 1 2", "2520\n35"], ["5 5\n4 6 7 8 9\n1 2 4 9 8\n1 3 5 8 9\n2 3 5\n2 1 3\n2 1 2", "412013881\n4084080\n210"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264, 523264]}, "tags": ["O2优化", "分块"], "title": "「DTOI-2」星之界", "background": ">天仙开碧落，银界失黄昏。", "description": "夜空中的星星组成了一个序列 $a$，序列中的第 $i$ 个数表示第 $i$ 颗星星的亮度。\n\n现在，作为星之眷顾者的你，拥有两种方式来操作星星。\n\n- 操作一：输入格式为 $\\texttt{1 l r x y}$，表示将 $[l,r]$ 内所有亮为 $x$ 的星星的亮度改为 $y$。\n \n- 操作二：输入格式为 $\\texttt{2 l r}$，表示输出 $ \\prod\\limits_{i = l}^{r} C_{\\sum_{j = l}^{i}a_j}^{a_i}\\ \\bmod 998244353 $ 的值。", "inputFormat": "输入第一行，两个整数 $n,q$，表示序列长度与操作次数。\n\n第二行，$n$ 个整数，表示初始序列值。\n\n接下来 $q$ 行，每行一个操作，格式由上方给出。", "outputFormat": "对于每个 $2$ 操作，输出所求值。", "hint": "**样例解释#1**\n\n直接按照题意计算可得。\n\n\n\n| $\\textbf{Subtask}$ | $n \\le$ | $q \\le$ | 特殊性质 | 总分数 |\n| :----------: | :---------------: | :---------------: | :-------------: | :---: |\n| $1$ | $10$ | $15$ | 无 | $5$ |\n| $2$ | $10^3$ | $10^3$ | 无 | $10$ |\n| $3$ | $5\\times 10^4$ | $5\\times 10^4$ | 只有操作 $2$ | $10$ |\n| $4$ | $5\\times 10^4$ | $5\\times 10^4$ | 只有一次操作 $2$ | $10$ |\n| $5$ | $5\\times 10^4$ | $5\\times 10^4$ | 无 | $21$ |\n| $6$ | $10^5$ | $10^5$ | $\\sum a[i] \\le 5\\times 10^5$ | $14$ |\n| $7$ | $10^5$ | $10^5$ | 无 | $30$ |\n\n对于 $100\\%$ 的数据，$1 \\le n,q,a_i \\le 10^5$。有 $1 \\le l,r\\le n;1 \\le x,y\\le 10^5$。\n\n任意时刻 $\\sum a$ 不会超过 $10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-2」星之界", "background": ">天仙开碧落，银界失黄昏。", "description": "夜空中的星星组成了一个序列 $a$，序列中的第 $i$ 个数表示第 $i$ 颗星星的亮度。\n\n现在，作为星之眷顾者的你，拥有两种方式来操作星星。\n\n- 操作一：输入格式为 $\\texttt{1 l r x y}$，表示将 $[l,r]$ 内所有亮为 $x$ 的星星的亮度改为 $y$。\n \n- 操作二：输入格式为 $\\texttt{2 l r}$，表示输出 $ \\prod\\limits_{i = l}^{r} C_{\\sum_{j = l}^{i}a_j}^{a_i}\\ \\bmod 998244353 $ 的值。", "inputFormat": "输入第一行，两个整数 $n,q$，表示序列长度与操作次数。\n\n第二行，$n$ 个整数，表示初始序列值。\n\n接下来 $q$ 行，每行一个操作，格式由上方给出。", "outputFormat": "对于每个 $2$ 操作，输出所求值。", "hint": "**样例解释#1**\n\n直接按照题意计算可得。\n\n\n\n| $\\textbf{Subtask}$ | $n \\le$ | $q \\le$ | 特殊性质 | 总分数 |\n| :----------: | :---------------: | :---------------: | :-------------: | :---: |\n| $1$ | $10$ | $15$ | 无 | $5$ |\n| $2$ | $10^3$ | $10^3$ | 无 | $10$ |\n| $3$ | $5\\times 10^4$ | $5\\times 10^4$ | 只有操作 $2$ | $10$ |\n| $4$ | $5\\times 10^4$ | $5\\times 10^4$ | 只有一次操作 $2$ | $10$ |\n| $5$ | $5\\times 10^4$ | $5\\times 10^4$ | 无 | $21$ |\n| $6$ | $10^5$ | $10^5$ | $\\sum a[i] \\le 5\\times 10^5$ | $14$ |\n| $7$ | $10^5$ | $10^5$ | 无 | $30$ |\n\n对于 $100\\%$ 的数据，$1 \\le n,q,a_i \\le 10^5$。有 $1 \\le l,r\\le n;1 \\le x,y\\le 10^5$。\n\n任意时刻 $\\sum a$ 不会超过 $10^7$。", "locale": "zh-CN"}}}
{"pid": "P8577", "type": "P", "difficulty": 2, "samples": [["4\n5 9\n46 50\n114 514\n19 19810", "18\n3\n1134\n74924"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "前缀和", "洛谷月赛"], "title": "[CoE R5] 暴龙的白菜", "background": "暴龙爱吃白菜。", "description": "给定一个字符串，由 $1$ 个 $\\texttt{1}$，$2$ 个 $\\texttt{2}$，$3$ 个 $\\texttt{3}$，$4$ 个 $\\texttt{4}$，$5$ 个 $\\texttt{5}$，$6$ 个 $\\texttt{6}$，$7$ 个 $\\texttt{7}$，$8$ 个 $\\texttt{8}$，$9$ 个 $\\texttt{9}$，$10$ 个 $\\texttt{10}$……以此类推，依次拼接而成。\n\n询问字符串第 $l$ 位到第 $r$ 位的数字之和。", "inputFormat": "**输入包含多组测试数据。**\n\n第一行一个正整数 $T$。\n\n接下来 $T$ 组问询，每次两个正整数 $l,r$。", "outputFormat": "$T$ 行，每行一个整数代表答案。", "hint": "**样例解释**\n\n字符串为：\n\n$$\\texttt{12233344445555566666677777778888888899999999910101010101010101010}\\cdots\\cdots$$\n\n对于第一组询问，第 $5$ 位到第 $9$ 位的数字之和为 $3+3+4+4+4=18$。\n\n对于第二组询问，第 $46$ 位到第 $50$ 位的数字之和为 $1 + 0 + 1 + 0 + 1 = 3$。\n\n------------\n\n**数据范围**\n\n**本题采用捆绑测试。**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1$，$1\\le l\\le r\\le 10$；\n- $\\texttt{Subtask 2(20 pts)：}1\\le T\\le 10$，$1\\le l\\le r\\le 10^3$；\n- $\\texttt{Subtask 3(30 pts)：}1\\le T\\le 10^3$，$1\\le l\\le r\\le 10^5$；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5$，$1\\le l\\le r\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R5] 暴龙的白菜", "background": "暴龙爱吃白菜。", "description": "给定一个字符串，由 $1$ 个 $\\texttt{1}$，$2$ 个 $\\texttt{2}$，$3$ 个 $\\texttt{3}$，$4$ 个 $\\texttt{4}$，$5$ 个 $\\texttt{5}$，$6$ 个 $\\texttt{6}$，$7$ 个 $\\texttt{7}$，$8$ 个 $\\texttt{8}$，$9$ 个 $\\texttt{9}$，$10$ 个 $\\texttt{10}$……以此类推，依次拼接而成。\n\n询问字符串第 $l$ 位到第 $r$ 位的数字之和。", "inputFormat": "**输入包含多组测试数据。**\n\n第一行一个正整数 $T$。\n\n接下来 $T$ 组问询，每次两个正整数 $l,r$。", "outputFormat": "$T$ 行，每行一个整数代表答案。", "hint": "**样例解释**\n\n字符串为：\n\n$$\\texttt{12233344445555566666677777778888888899999999910101010101010101010}\\cdots\\cdots$$\n\n对于第一组询问，第 $5$ 位到第 $9$ 位的数字之和为 $3+3+4+4+4=18$。\n\n对于第二组询问，第 $46$ 位到第 $50$ 位的数字之和为 $1 + 0 + 1 + 0 + 1 = 3$。\n\n------------\n\n**数据范围**\n\n**本题采用捆绑测试。**\n\n- $\\texttt{Subtask 1(10 pts)：}T=1$，$1\\le l\\le r\\le 10$；\n- $\\texttt{Subtask 2(20 pts)：}1\\le T\\le 10$，$1\\le l\\le r\\le 10^3$；\n- $\\texttt{Subtask 3(30 pts)：}1\\le T\\le 10^3$，$1\\le l\\le r\\le 10^5$；\n- $\\texttt{Subtask 4(40 pts)：}$无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10^5$，$1\\le l\\le r\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8578", "type": "P", "difficulty": 3, "samples": [["3\n1 2\n1 3", "1 2 3"], ["2\n1 2", "1 2"], ["5\n1 2\n2 3\n3 4\n4 5", "1 2 3 4 5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[CoE R5] So What Do We Do Now?", "background": "![396ac9d3c58dbf329d6ead206944a5a495930006.jpg](https://img-kysic-1258722770.file.myqcloud.com/f2a3112865eea75d3c27aae713e1a8a8/ae2c3e0c34910.jpg)\n\n>$\\texttt{I'm getting tired of hiding.}$\n\n声明：上述图片取自网络，`pid:6544352`，如有侵权，告知即删。", "description": "给定一棵 $n$ 个结点的有根树，根结点编号为 $1$。设以 $i$ 为根的子树为 $T_i$。你需要给每个结点赋一个正整数点权 $v_i$，使得所有点的点权恰为 $1,2,\\dots,n$ 各一个。记\n$$f=\\sum_{i=1}^{n}R_i,$$\n其中 $R_i$ 是以 $i$ 为根的子树中点权的极差，即\n$$R_i=\\max_{j \\in T_i}\\{v_j\\}-\\min_{j \\in T_i}\\{v_j\\}.$$\n对于所有的赋点权的方式，请求出一组使 $f$ 取到最小值的点权。\n", "inputFormat": "第一行一个正整数 $n$ 表示树的结点数。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u,v$ 之间有一条边。", "outputFormat": "第一行一个 $1,2,\\dots,n$ 的排列，表示结点 $1,2,\\dots,n$ 的点权。由于赋点权的方式可能有很多种，你只需要输出其中任意一种即可。", "hint": "**样例说明**\n\n输入 $\\#1$\n\n![graph.png](https://img-kysic-1258722770.file.myqcloud.com/4a372f1ae46e27a31fae60c4db5e439e/af9581fa182de.png)\n\n$R_1=3-1=2,R_2=2-2=0,R_3=3-3=0,f=R_1+R_2+R_3=2$，可以证明，不存在使得 $f$ 更小的构造。\n\n\n------------\n\n**数据范围**\n\n对于 $10\\%$ 的数据，$n \\le 10$；\n\n对于另外 $10\\%$ 的数据，树是一条链；\n\n对于另外 $20\\%$ 的数据，有一个结点与其他 $n-1$ 个结点都相连；\n\n对于另外 $20\\%$ 的数据，树是一棵完全二叉树，即除了叶子结点外每个结点都恰有两个子结点；\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R5] So What Do We Do Now?", "background": "![396ac9d3c58dbf329d6ead206944a5a495930006.jpg](https://img-kysic-1258722770.file.myqcloud.com/f2a3112865eea75d3c27aae713e1a8a8/ae2c3e0c34910.jpg)\n\n>$\\texttt{I'm getting tired of hiding.}$\n\n声明：上述图片取自网络，`pid:6544352`，如有侵权，告知即删。", "description": "给定一棵 $n$ 个结点的有根树，根结点编号为 $1$。设以 $i$ 为根的子树为 $T_i$。你需要给每个结点赋一个正整数点权 $v_i$，使得所有点的点权恰为 $1,2,\\dots,n$ 各一个。记\n$$f=\\sum_{i=1}^{n}R_i,$$\n其中 $R_i$ 是以 $i$ 为根的子树中点权的极差，即\n$$R_i=\\max_{j \\in T_i}\\{v_j\\}-\\min_{j \\in T_i}\\{v_j\\}.$$\n对于所有的赋点权的方式，请求出一组使 $f$ 取到最小值的点权。\n", "inputFormat": "第一行一个正整数 $n$ 表示树的结点数。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u,v$ 之间有一条边。", "outputFormat": "第一行一个 $1,2,\\dots,n$ 的排列，表示结点 $1,2,\\dots,n$ 的点权。由于赋点权的方式可能有很多种，你只需要输出其中任意一种即可。", "hint": "**样例说明**\n\n输入 $\\#1$\n\n![graph.png](https://img-kysic-1258722770.file.myqcloud.com/4a372f1ae46e27a31fae60c4db5e439e/af9581fa182de.png)\n\n$R_1=3-1=2,R_2=2-2=0,R_3=3-3=0,f=R_1+R_2+R_3=2$，可以证明，不存在使得 $f$ 更小的构造。\n\n\n------------\n\n**数据范围**\n\n对于 $10\\%$ 的数据，$n \\le 10$；\n\n对于另外 $10\\%$ 的数据，树是一条链；\n\n对于另外 $20\\%$ 的数据，有一个结点与其他 $n-1$ 个结点都相连；\n\n对于另外 $20\\%$ 的数据，树是一棵完全二叉树，即除了叶子结点外每个结点都恰有两个子结点；\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8579", "type": "P", "difficulty": 4, "samples": [["3 2 1 2\n1 2\n2 3\n", "2.0000000\n"], ["10 20 13 37\n1 2\n1 3\n1 5\n2 4\n2 5\n2 6\n3 4\n3 5\n3 7\n3 9\n3 10\n4 6\n4 7\n4 8\n5 7\n5 9\n7 8\n7 9\n7 10\n9 10\n", "3.6903390\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "图论", "二分", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛", "2029"], "title": "[CoE R5/Stoi2029] 半岛铁盒", "background": "> 为什么这样子 你拉着我 说你有些犹豫  \n> 怎么这样子 雨还没停 你就撑伞要走  \n> 已经习惯 不去阻止你 过好一阵子 你就会回来  \n> 印象中的爱情 好像顶不住那时间  \n> ——《[半岛铁盒](https://www.bilibili.com/video/BV1fx411N7bU?p=26)》", "description": "**题意简述**\n\n给定一个 $n$ 个顶点 $m$ 条边的无向图，可能有重边自环，可能不连通。\n\n初始时每个顶点有点权，点权为随机正实数。现在需要重新分配每个顶点的点权，使得：\n\n1. 相邻顶点的点权中较大者与较小者之比不超过 $x$；\n\n2. 点权总和不变；\n\n3. 每个顶点的点权不小于初始时的 $\\dfrac{p}{q}$。\n\n求最小的 $x \\ge 1$，使得对于给定的图，无论初始点权如何，均存在一种满足上述要求的重新分配方式。\n\n---\n\n**原版题面**\n\n神在半岛铁盒里创建了一个世界。\n\n这个世界由 $n$ 个地域和地域之间的 $m$ 条通道组成，每条通道连接两个地域。创世时每个地域有一定的气压，气压为正数。\n\n由于世界刚刚创建，比较混乱，所以两个地域之间可能有多条通道相连，一个地域也有可能有通道连接到自身，两个地域也可能无法通过若干条通道相互通行。\n\n由于通道连接的两个地域气压之比（大比小，下同）过大时会在通道里形成强风，使得跨地域旅行非常危险，所以造世神决定调整每个地域的气压使得每条通道连接的两个地域气压之比都不超过安全比值 $x$。显然 $x \\ge 1$。\n\n由于各种守恒定律被打破会很麻烦，所以神希望调整前后所有地域的气压之和不变。\n\n由于世界中的生物无法在过低的气压中生存但对高气压的适应力强，因此每个地域改变后的气压必须不低于初始的 $\\dfrac{p}{q}$。\n\n由于创世时气压不受神控制地随机，所以神希望安全比值 $x$ 满足无论初始气压如何都存在一种合适的调整气压的方法。\n\n由于通道越宽敞，通行越舒适，但是安全比值 $x$ 也越小，因此神想要求出满足要求的最小安全比值 $x$。\n\n由于神忙着处理创世事务，所以他钦定你来解决这个问题。", "inputFormat": "第一行四个正整数 $n,m,p,q$，含义如题。\n\n接下来 $m$ 行，每行两个正整数 $u,v$ 表示一条通道连接的两个地域的编号。", "outputFormat": "输出一个实数表示 $x$ 的最小值，保留 $7$ 位小数。\n\n本题采用 Special Judge，如果你的答案与参考答案的差值不超过参考答案值的 $10^{-4}$ 倍即为通过。", "hint": "**数据范围**\n\n对于 $10\\%$ 的数据，$np \\le q$；\n\n对于另外 $20\\%$ 的数据，有一个地域和其他所有地域之间有通道相连；\n\n对于另外 $30\\%$ 的数据，通道构成一棵树。\n\n对于 $100\\%$ 的数据，$1 \\le u,v \\le n \\le 10^3$，$1 \\le m \\le 3 \\times 10^4$，$1 \\le p<q \\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R5/Stoi2029] 半岛铁盒", "background": "> 为什么这样子 你拉着我 说你有些犹豫  \n> 怎么这样子 雨还没停 你就撑伞要走  \n> 已经习惯 不去阻止你 过好一阵子 你就会回来  \n> 印象中的爱情 好像顶不住那时间  \n> ——《[半岛铁盒](https://www.bilibili.com/video/BV1fx411N7bU?p=26)》", "description": "**题意简述**\n\n给定一个 $n$ 个顶点 $m$ 条边的无向图，可能有重边自环，可能不连通。\n\n初始时每个顶点有点权，点权为随机正实数。现在需要重新分配每个顶点的点权，使得：\n\n1. 相邻顶点的点权中较大者与较小者之比不超过 $x$；\n\n2. 点权总和不变；\n\n3. 每个顶点的点权不小于初始时的 $\\dfrac{p}{q}$。\n\n求最小的 $x \\ge 1$，使得对于给定的图，无论初始点权如何，均存在一种满足上述要求的重新分配方式。\n\n---\n\n**原版题面**\n\n神在半岛铁盒里创建了一个世界。\n\n这个世界由 $n$ 个地域和地域之间的 $m$ 条通道组成，每条通道连接两个地域。创世时每个地域有一定的气压，气压为正数。\n\n由于世界刚刚创建，比较混乱，所以两个地域之间可能有多条通道相连，一个地域也有可能有通道连接到自身，两个地域也可能无法通过若干条通道相互通行。\n\n由于通道连接的两个地域气压之比（大比小，下同）过大时会在通道里形成强风，使得跨地域旅行非常危险，所以造世神决定调整每个地域的气压使得每条通道连接的两个地域气压之比都不超过安全比值 $x$。显然 $x \\ge 1$。\n\n由于各种守恒定律被打破会很麻烦，所以神希望调整前后所有地域的气压之和不变。\n\n由于世界中的生物无法在过低的气压中生存但对高气压的适应力强，因此每个地域改变后的气压必须不低于初始的 $\\dfrac{p}{q}$。\n\n由于创世时气压不受神控制地随机，所以神希望安全比值 $x$ 满足无论初始气压如何都存在一种合适的调整气压的方法。\n\n由于通道越宽敞，通行越舒适，但是安全比值 $x$ 也越小，因此神想要求出满足要求的最小安全比值 $x$。\n\n由于神忙着处理创世事务，所以他钦定你来解决这个问题。", "inputFormat": "第一行四个正整数 $n,m,p,q$，含义如题。\n\n接下来 $m$ 行，每行两个正整数 $u,v$ 表示一条通道连接的两个地域的编号。", "outputFormat": "输出一个实数表示 $x$ 的最小值，保留 $7$ 位小数。\n\n本题采用 Special Judge，如果你的答案与参考答案的差值不超过参考答案值的 $10^{-4}$ 倍即为通过。", "hint": "**数据范围**\n\n对于 $10\\%$ 的数据，$np \\le q$；\n\n对于另外 $20\\%$ 的数据，有一个地域和其他所有地域之间有通道相连；\n\n对于另外 $30\\%$ 的数据，通道构成一棵树。\n\n对于 $100\\%$ 的数据，$1 \\le u,v \\le n \\le 10^3$，$1 \\le m \\le 3 \\times 10^4$，$1 \\le p<q \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P8580", "type": "P", "difficulty": 6, "samples": [["2 8\n200 400\n200 400", "888921"], ["7 8\n321 637\n321 637\n321 637\n321 637\n321 637\n321 637\n321 637", "818968"], ["6 10\n338 270\n229 413\n132 133\n141 173\n157 686\n616 250", "315860"], ["8 10\n338 270\n229 413\n132 133\n141 173\n157 686\n616 250\n0 0\n0 0", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "洛谷原创", "O2优化", "期望", "高斯消元", "洛谷月赛"], "title": "[CoE R5] 罚球", "background": "", "description": "有 $n$ 个人在玩罚球游戏，游戏规则如下：\n- 每个人编号为 $1,2,\\dots,n$，最开始由 $1$ 号罚球，接下来让下一个没有出局的人罚球。特殊地，$n$ 号的下一个是 $1$ 号。\n- 如果罚球者没有碰到篮板，那么直接出局。\n- 如果罚球者碰到篮板但没有进球，那么如果上一个人进球了，这个人就会出局，否则不会出局。\n- 游戏结束的条件是最后只剩下一个人。\n\n注意最开始的那个人碰到篮板但没有进球不出局。\n\n这 $n$ 个人中，第 $i$ 个人碰不到篮板的概率为 $\\dfrac{a_i}{1000}$，碰到篮板但没有进球的概率为 $\\dfrac{b_i}{1000}$，求游戏结束时所有人总共罚球数量的期望值。", "inputFormat": "第一行两个整数 $n,t$，为人数和子任务编号。  \n接下来 $n$ 行，每行两个整数，为 $a_i,b_i$，保证 $0\\le a_i+b_i\\le1000$。", "outputFormat": "输出一行，为所有人总共罚球数量的期望值，如果永远不会结束，那么输出 $-1$。否则，输出对 $10^6+33$ 取模的值。", "hint": "**关于取模**\n\n不会有理数取模的看[这里](https://www.luogu.com.cn/problem/P2613)。\n\n\n\n------------\n**样例说明**\n\n输入 $\\#1$：\n\n所有人碰不到篮板的概率都是 $\\dfrac{1}{5}$，碰到篮板但不进球的概率都是 $\\dfrac{2}{5}$，罚球数量的期望值为 $\\dfrac{25}{9}$。\n\n计算如下（黑色表示出局，红色表示没进球但不出局，蓝色表示进球）：\n$$\\dfrac{1}{5}+\\red{\\dfrac{2}{5}}\\times(\\dfrac{1}{5}+\\red{\\dfrac{2}{5}}\\times(...)+\\blue{\\dfrac{2}{5}}\\times(...))+\\blue{\\dfrac{2}{5}}\\times(\\dfrac{3}{5}+\\blue{\\dfrac{2}{5}}\\times(...))=\\dfrac{25}{9}$$\n\n输入 $\\#2$：\n\n所有人碰不到篮板的概率都是 $\\dfrac{321}{1000}$，碰到篮板但不进球的概率都是 $\\dfrac{637}{1000}$，罚球数量的期望值为 $\\dfrac{1000000}{57959}$。\n\n------------\n\n**数据范围**\n\n**本题采用捆绑测试**。\n\n测试点性质：\n| $t=$ | 性质 | 分数 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n=1$ | $2$ |\n| $2$ | $a_i=b_i=0$ | $2$ |\n| $3$ | $a_i=1000$ | $4$ |\n| $4$ | $b_i=1000$ | $4$ |\n| $5$ | $a_i=0,b_1=0,\\forall i>1,b_i=1000$ | $6$ |\n| $6$ | $a_i=b_i=500$ | $6$ |\n| $7$ | $a_i=0,b_i=500$ | $6$ |\n| $8$ | $a_i,b_i$ 均为定值，且答案不为 $-1$ | $19$ |\n| $9$ | $1 \\le n \\le 11$ | $26$ |\n| $10$ | $1 \\le n \\le 15$ | $8$ |\n| $11$ | 无特殊性质 | $17$ |\n\n**对于** $100\\%$ **的数据**，$1 \\le n \\le 18$，$0 \\le a_i,b_i,a_i+b_i \\le 1000$。\n\n本题的 $\\text{Subtask 10}$ 分为两部分计分，对应 $t \\in \\{10,11\\}$。\n\n保证不存在分母为 $10^6+33$ 的倍数的情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R5] 罚球", "background": "", "description": "有 $n$ 个人在玩罚球游戏，游戏规则如下：\n- 每个人编号为 $1,2,\\dots,n$，最开始由 $1$ 号罚球，接下来让下一个没有出局的人罚球。特殊地，$n$ 号的下一个是 $1$ 号。\n- 如果罚球者没有碰到篮板，那么直接出局。\n- 如果罚球者碰到篮板但没有进球，那么如果上一个人进球了，这个人就会出局，否则不会出局。\n- 游戏结束的条件是最后只剩下一个人。\n\n注意最开始的那个人碰到篮板但没有进球不出局。\n\n这 $n$ 个人中，第 $i$ 个人碰不到篮板的概率为 $\\dfrac{a_i}{1000}$，碰到篮板但没有进球的概率为 $\\dfrac{b_i}{1000}$，求游戏结束时所有人总共罚球数量的期望值。", "inputFormat": "第一行两个整数 $n,t$，为人数和子任务编号。  \n接下来 $n$ 行，每行两个整数，为 $a_i,b_i$，保证 $0\\le a_i+b_i\\le1000$。", "outputFormat": "输出一行，为所有人总共罚球数量的期望值，如果永远不会结束，那么输出 $-1$。否则，输出对 $10^6+33$ 取模的值。", "hint": "**关于取模**\n\n不会有理数取模的看[这里](https://www.luogu.com.cn/problem/P2613)。\n\n\n\n------------\n**样例说明**\n\n输入 $\\#1$：\n\n所有人碰不到篮板的概率都是 $\\dfrac{1}{5}$，碰到篮板但不进球的概率都是 $\\dfrac{2}{5}$，罚球数量的期望值为 $\\dfrac{25}{9}$。\n\n计算如下（黑色表示出局，红色表示没进球但不出局，蓝色表示进球）：\n$$\\dfrac{1}{5}+\\red{\\dfrac{2}{5}}\\times(\\dfrac{1}{5}+\\red{\\dfrac{2}{5}}\\times(...)+\\blue{\\dfrac{2}{5}}\\times(...))+\\blue{\\dfrac{2}{5}}\\times(\\dfrac{3}{5}+\\blue{\\dfrac{2}{5}}\\times(...))=\\dfrac{25}{9}$$\n\n输入 $\\#2$：\n\n所有人碰不到篮板的概率都是 $\\dfrac{321}{1000}$，碰到篮板但不进球的概率都是 $\\dfrac{637}{1000}$，罚球数量的期望值为 $\\dfrac{1000000}{57959}$。\n\n------------\n\n**数据范围**\n\n**本题采用捆绑测试**。\n\n测试点性质：\n| $t=$ | 性质 | 分数 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n=1$ | $2$ |\n| $2$ | $a_i=b_i=0$ | $2$ |\n| $3$ | $a_i=1000$ | $4$ |\n| $4$ | $b_i=1000$ | $4$ |\n| $5$ | $a_i=0,b_1=0,\\forall i>1,b_i=1000$ | $6$ |\n| $6$ | $a_i=b_i=500$ | $6$ |\n| $7$ | $a_i=0,b_i=500$ | $6$ |\n| $8$ | $a_i,b_i$ 均为定值，且答案不为 $-1$ | $19$ |\n| $9$ | $1 \\le n \\le 11$ | $26$ |\n| $10$ | $1 \\le n \\le 15$ | $8$ |\n| $11$ | 无特殊性质 | $17$ |\n\n**对于** $100\\%$ **的数据**，$1 \\le n \\le 18$，$0 \\le a_i,b_i,a_i+b_i \\le 1000$。\n\n本题的 $\\text{Subtask 10}$ 分为两部分计分，对应 $t \\in \\{10,11\\}$。\n\n保证不存在分母为 $10^6+33$ 的倍数的情况。", "locale": "zh-CN"}}}
{"pid": "P8581", "type": "P", "difficulty": 7, "samples": [["3\n1 2\n5 7 12\n1 1 10", "2"], ["3\n1 1\n2 2 12\n2 3 4", "9"], ["5\n1 2 2 1\n1 7 10 20 9\n1 1 1 1 1", "223"], ["12\n1 2 3 1 5 6 7 1 9 10 11\n4 10 2 1 50 1 20 9 40 2 15 10\n1 1 1 1 1 1 1 1 1 1 1 1", "124"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 327680, 327680, 327680, 327680, 327680, 262144, 262144, 262144, 262144, 262144, 327680, 327680, 327680, 327680, 327680]}, "tags": ["数学", "图论", "贪心", "堆", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[CoE R5] X 细胞", "background": "", "description": "**题意简述**\n\n**有根树**为一个有向图，该有向图有一个特殊的顶点，称之为**根**，从根出发，存在唯一的有向路径到达图中的任意其他顶点。按照习惯，一般将有根树中的顶点称为**结点**。**子树**为有根树 $T$ 的一个子图且该子图是一棵以 $T$ 中某个结点为根的有根树。在有根树中，如果有一条边从结点 $i$ 出发，到达结点 $j$，则将结点 $i$ 称为结点 $j$ 的**父结点**，将结点 $j$ 称为结点 $i$ 的**子结点**。将有根树中不存在子结点的结点称为**叶结点**。\n\n给定有根树 $T$，第 $i$ 个结点具有权值 $a_i \\in \\mathbb{Z^+}$ 和 $b_i \\in \\mathbb{Z^+}$。\n\n令 $T'$ 为 $T$ 的一棵子树，$F_i$ 为 $T$ 中所有以结点 $i$ 为根的子树的集合。\n\n- 定义 $r(T') = \\frac {a(T')}{b(T')}$，其中 $a(T') = \\sum \\limits_{j \\in T'}{a_j}$，$b(T') = \\sum \\limits_{j \\in T'}{b_j}$。\n\n- 定义 $T_i$ 为一棵以结点 $i$ 为根的子树，$T_i$ 满足 $r(T_i) = \\min \\limits_{T' \\in F_i}r(T')$ 且具有最多的结点数量。\n\n- 定义 $S(T')$：对于 $T$ 中的某个结点 $j$，令其父结点为 $i$，则 $j \\in S(T')$ 当且仅当 $i \\in T'$ 但 $j \\notin T'$ 。\n\n给定一棵具有 $n$ 个结点的有根树 $T$，令根结点为 $i$，对其执行以下操作：\n\n（$1$）将根结点 $i$ 放入结点集合 $Q$，即初始时置 $Q \\leftarrow \\{i\\}$；\n\n（$2$）任取 $Q$ 中的一个元素，令其为 $j$，确定 $T_j$，对于结点 $k \\in S(T_j)$，置 $a_k \\leftarrow a_k + \\lceil r(T_j) \\rceil$；\n\n（$3$）从集合 $Q$ 中删除元素 $j$，并置 $Q \\leftarrow Q \\cup S(T_j)$；\n\n（$4$）若集合 $Q = \\varnothing $，结束操作，否则转步骤（$2$）。\n\n每执行一次步骤（$2$）就会确定一棵 $T$ 的子树，假设在结束操作时一共执行了  $m$ 次步骤（$2$）,令第 $i$ 次执行步骤（$2$）所确定的子树为 $K_i$，最小化以下 $W$ 值：\n\n$$W = 1 \\times \\lceil r(K_1) \\rceil + 2 \\times \\lceil r(K_2) \\rceil + \\cdots + m \\times \\lceil r(K_m) \\rceil = \\sum_{i = 1}^{m}i \\times \\lceil r(K_i) \\rceil$$\n\n$\\mathbb{Z^+}$ 表示全体正整数，$\\lceil x \\rceil$ 表示不小于 $x$ 的最小整数。\n\n------------\n\n**原版题面**\n\n$\\text{X}$ 细胞是来自于仙女座星系 $\\text{Gamma}$ 行星的一种古老生命形式。\n\n初始时，只有 $1$ 个 $\\text{X}$ 细胞，而 $\\text{X}$ 细胞可以通过直接分裂来产生后代 $\\text{X}$ 细胞。对于某个 $\\text{X}$ 细胞 $i$ 来说，如果它产生了一个直接后代 $\\text{X}$ 细胞 $j$，则将细胞 $i$ 称为细胞 $j$ 的**母细胞**，将细胞 $j$ 称为 $i$ 的**子细胞**。\n\n注意，母细胞、子细胞的定义不具有传递性。假设细胞 $i$ 产生了一个直接后代细胞 $j$，细胞 $j$ 又产生了一个直接后代细胞 $k$，则将 $j$ 称为 $i$ 的子细胞，$k$ 称为 $j$ 的子细胞，但 $k$ 不是 $i$ 的子细胞。\n\n每个 $\\text{X}$ 细胞具有活力值 $h_x$ 和体积 $v_x$，为了研究的方便，人们为 $\\text{X}$ 细胞定义了**变异指数**\n\n$$d_x = \\frac{h_x}{v_x}$$\n\n该指数用于衡量 $\\text{X}$ 细胞对环境的适应性，变异指数越低，细胞存活的概率越高。\n\n人们发现，当 $\\text{X}$ 细胞受到特定的外界刺激后，它会激活并开始一种被人们称为**同化**的过程来转变为一个 $\\text{Z}$ 细胞。在同化过程开始前，激活的 $\\text{X}$ 细胞会改变自身状态成为一个 $\\text{Y}$ 细胞，$\\text{Y}$ 细胞会不断吸收它的子细胞并进行融合，使得该子细胞成为 $\\text{Y}$ 细胞的一部分。\n\n在融合后，$\\text{Y}$ 细胞的活力值和体积为融合前的细胞活力值和体积的加和。也就是说，假设有 $n$ 个细胞经过融合成为一个 $\\text{Y}$ 细胞，这 $n$ 个细胞的活力值和体积分别为 $h_1$，$h_2$，…，$h_n$ 和 $v_1$，$v_2$，…，$v_n$，则融合完成后，该 $\\text{Y}$ 细胞的活力值 $h_y = \\sum_{i=1}^{n}h_i$，体积 $v_y = \\sum_{i=1}^{n}v_i$，变异指数 $d_y = \\frac{h_y}{v_y}$。\n\n在同化过程中，$\\text{Y}$ 细胞会遵循以下原则：\n\n- 如果某个子细胞 $j$ 的母细胞 $i$ 尚未被同化，则该子细胞 $j$ 不会被同化。\n- 能够使得 $\\text{Y}$ 细胞变异指数尽可能地小且同化尽可能多的细胞。\n\n当 $\\text{Y}$ 细胞无法再同化更多的细胞时，它会停止同化过程，转变为一个 $\\text{Z}$ 细胞并释放信息素（状态转变前后，细胞的活力值和体积不变）。该信息素会产生以下作用：令生成的 $\\text{Z}$ 细胞的变异指数为 $d_z = \\frac{h_z}{v_z}$，如果某个尚未被同化的子细胞 $j$ 的母细胞 $i$ 被该 $\\text{Z}$ 细胞同化，则该子细胞 $j$ 的活力值 $h_j$ 增加 $\\lceil d_z \\rceil$（$\\lceil x \\rceil$ 表示不小于 $x$ 的最小整数）。\n\n需要注意，在同化过程结束时，$\\text{Y}$ 细胞的变异指数要求尽可能地小，但在同化过程中，$\\text{Y}$ 细胞的变异指数并不要求时刻保持最小（参见输入 $\\#1$）。\n\n研究人员需要通过一种专用设备来产生激活 $\\text{X}$ 细胞的特定外界刺激，每次使用该设备都会消耗一定数量的激活剂，消耗的激活剂数量 $c_t$ 使用以下公式进行计算：\n\n$$c_t = t \\times \\lceil d_z \\rceil $$\n\n其中 $t$ 表示使用该设备的次数序号（初始时从 $1$ 开始计数），$d_z$ 表示该次激活最终生成的 $\\text{Z}$ 细胞的变异指数。\n\n由于母细胞会分泌信息素使得子细胞无法被激活，只能选择不存在母细胞或者母细胞已经被同化的 $\\text{X}$ 细胞作为特定外界刺激的对象，以使其激活并开始同化过程。\n\n给定所有 $\\text{X}$ 细胞之间的相互关系及其活力值和体积，鉴于激活剂非常难以制造，现在需要你制定一个最优的 $\\text{X}$ 细胞激活顺序方案，使得所有的 $\\text{X}$ 细胞均转变为 $\\text{Z}$ 细胞且消耗的激活剂数量最少。\n\n你只需要输出该最少值即可。\n", "inputFormat": "输入的第一行是一个整数 $n$，表示 $\\text{X}$ 细胞的数量。\n\n接下来的一行，包含 $n - 1$ 个整数，依次表示编号为 $2 \\sim n$ 的 $\\text{X}$ 细胞的母细胞的编号。\n\n接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的 $\\text{X}$ 细胞的活力值 $h_i$。\n\n再接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的 $\\text{X}$ 细胞的体积 $v_i$。\n\n初始的 $\\text{X}$ 细胞的编号为 $1$。\n\n\n------------\n\n**题意简述所对应的输入格式**：\n\n输入的第一行是一个整数 $n$，表示有根树结点的数量。\n\n接下来的一行，包含 $n - 1$ 个整数，依次表示编号为 $2 \\sim n$ 的结点的父结点的编号。\n\n接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的结点的权值 $a_i$。\n\n再接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的结点的权值 $b_i$。\n\n根结点的编号为 $1$。", "outputFormat": "输出一个整数，表示使得所有 $\\text{X}$ 细胞均转变为 $\\text{Z}$ 细胞所需消耗的激活剂数量的最少值。\n\n\n------------\n\n**题意简述所对应的输出格式**：\n\n输出一个整数，表示 $W$ 的最小值。", "hint": "**样例说明**\n\n输入 $\\#1$：\n\n- 激活细胞 $1$，同化细胞 $2、3$，产生的 $\\text{Z}$ 细胞活力值 $h_z = 24$，体积 $v_z = 12$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {24}{12} = 2$。\n\n- $1$ 次激活总共最少需要消耗的激活剂数量为 $c_1 = t \\times \\lceil d_z \\rceil = 1 \\times \\lceil \\frac {24}{12} \\rceil = 1 \\times 2 = 2$。\n\n- 初始时 $\\text{Y}$ 细胞的变异指数为 $5$，当同化细胞 $2$ 后，变异指数为 $6$，当同化细胞 $3$ 后，变异指数变为 $2$。由此可见，在同化过程中，$\\text{Y}$ 细胞的变异指数并不是时刻都保持最小，只需在最后停止同化转变为 $\\text{Z}$ 细胞时为最小值即可。\n\n输入 $\\#2$：\n\n- 激活细胞 $1$，同化细胞 $2$，产生的 $\\text{Z}$ 细胞活力值 $h_z = 2 + 2 = 4$，体积 $v_z = 2 + 3 = 5$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {4}{5}$，该次激活消耗的激活剂数量 $c_1 = t \\times \\lceil d_z \\rceil= 1 \\times \\lceil \\frac {4}{5} \\rceil = 1 \\times 1 = 1$，该 $\\text{Z}$ 细胞释放信息素使得细胞 $3$ 的活力值增加 $1$，则细胞 $3$ 的活力值变为 $13$；\n\n- 激活细胞 $3$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 13$，体积 $v_z = 4$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {13}{4}$，该次激活消耗的激活剂数量 $c_2 = t \\times \\lceil d_z \\rceil = 2 \\times \\lceil \\frac {13}{4} \\rceil= 2 \\times 4 = 8$。\n\n- $2$ 次激活总共最少需要消耗的激活剂数量为 $c_1 + c_2 = 1 + 8 = 9$。\n\n\n输入 $\\#3$：\n\n- 激活细胞 $1$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 1$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {1}{1} = 1$。总共消耗的激活剂数量 $c_1 = t \\times \\lceil d_z \\rceil = 1 \\times \\lceil 1 \\rceil = 1$。$\\text{Z}$ 细胞释放信息素，使得细胞 $2$、$5$ 的活力值各增加 $1$，细胞 $2$、$5$ 的活力值当前为 $8$、$10$。\n\n- 激活细胞 $2$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 8$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {8}{1} = 8$。总共消耗的激活剂数量 $c_2 = t \\times \\lceil d_z \\rceil = 2 \\times \\lceil 8 \\rceil = 16$。$\\text{Z}$ 细胞释放信息素，使得细胞 $3$、$4$ 的活力值各增加 $8$，细胞 $3$、$4$ 的活力值当前为 $18$、$28$。\n\n- 激活细胞 $4$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 28$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {28}{1} = 28$。总共消耗的激活剂数量 $c_3 = t \\times \\lceil d_z \\rceil = 3 \\times \\lceil 28 \\rceil = 84$。\n\n- 激活细胞 $3$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 18$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {18}{1} = 18$。总共消耗的激活剂数量 $c_4 = t \\times \\lceil d_z \\rceil = 4 \\times \\lceil 18 \\rceil = 72$。\n\n- 激活细胞 $5$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 10$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {10}{1} = 10$。总共消耗的激活剂数量 $c_5 = t \\times \\lceil d_z \\rceil = 5 \\times \\lceil 10 \\rceil = 50$。\n\n- $5$ 次激活总共最少需要消耗的激活剂数量为 $c_1 + c_2 + c_3 + c_4 + c_5 = 1 + 16 + 84 + 72 + 50 = 223$。\n\n输入 $\\#4$：\n\n- 激活细胞 $1$，未同化其他细胞，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {4}{1}$，释放信息素使得细胞 $2、5、9$ 的活力值增加 $4$，消耗激活剂 $c_1 = 1 \\times \\lceil \\frac {4}{1} \\rceil = 1 \\times 4 = 4$。\n\n- 激活细胞 $5$，同化细胞 $6、7、8$，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {84}{4}$，消耗激活剂 $c_2 = 2 \\times \\lceil \\frac {84}{4} \\rceil = 2 \\times 21 = 42$。\n\n- 激活细胞 $9$，同化细胞 $10、11、12$，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {71}{4}$，消耗激活剂 $c_3 = 3 \\times \\lceil \\frac {71}{4} \\rceil = 3 \\times 18 = 54$。\n\n- 激活细胞 $2$，同化细胞 $3、4$，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {17}{3}$，消耗激活剂 $c_4 = 4 \\times \\lceil \\frac {17}{3} \\rceil = 4 \\times 6 = 24$。\n\n- $4$ 次激活总共最少需要消耗的激活剂数量为 $c_1 + c_2 + c_3 + c_4 = 4 + 42 + 54 + 24 = 124$。\n\n------------\n\n**数据范围**\n\n**本题采用捆绑测试。某些子任务的输入文件较大，请使用合适的输入读取方式。**\n\n| 子任务 | 分值 | $n \\leq$ | 特殊性质 | 时间限制 | 内存限制 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $20$ |   | $1 \\text{ s}$ |  $256 \\text{ MB}$ | |\n| $2$ | $30$ | $10^3$ |   | $1 \\text{ s}$ | $256 \\text{ MB}$ | $1$ |\n| $3$ | $10$ | $10^5$ |   | $1 \\text{ s}$ | $256 \\text{ MB}$ | $1 \\sim 2$ |\n| $4$ | $10$ | $10^6$ | $\\text{A}$ | $3 \\text{ s}$ | $256 \\text{ MB}$ |  |\n| $5$ | $20$ | $10^6$ | $\\text{B}$ | $1 \\text{ s}$ | $320 \\text{ MB}$ |  |\n| $6$ | $10$ | $10^6$ | $\\text{C}$ | $1 \\text{ s}$ | $256 \\text{ MB}$ |  |\n| $7$ | $10$ | $10^6$ |   | $3 \\text{ s}$ | $320 \\text{ MB}$ | $1 \\sim 6$ |\n\n- 特殊性质 $\\text{A}$：即给定的有根树所对应的图是星形图。$\\forall \\  2 \\leq i \\leq n$，$f_i = 1$。\n- 特殊性质 $\\text{B}$：给定的有根树所对应的图是有向链。$\\forall \\ 2 \\leq i \\leq n$，$f_i = i - 1$。\n- 特殊性质 $\\text{C}$：数据随机生成。$\\forall \\ 2 \\leq i \\leq n$，$f_i$ 是 $[1, i - 1]$ 中随机选取的整数。$h_i, v_i$ 是 $[1, 10^6]$ 中随机选取的整数。\n\n\n对于 $100 \\%$ 的数据，$1 \\leq n \\leq 10^6$，$1 \\leq h_i \\leq 10^6$，$1 \\leq v_i \\leq 10^6$，答案不超过 $10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R5] X 细胞", "background": "", "description": "**题意简述**\n\n**有根树**为一个有向图，该有向图有一个特殊的顶点，称之为**根**，从根出发，存在唯一的有向路径到达图中的任意其他顶点。按照习惯，一般将有根树中的顶点称为**结点**。**子树**为有根树 $T$ 的一个子图且该子图是一棵以 $T$ 中某个结点为根的有根树。在有根树中，如果有一条边从结点 $i$ 出发，到达结点 $j$，则将结点 $i$ 称为结点 $j$ 的**父结点**，将结点 $j$ 称为结点 $i$ 的**子结点**。将有根树中不存在子结点的结点称为**叶结点**。\n\n给定有根树 $T$，第 $i$ 个结点具有权值 $a_i \\in \\mathbb{Z^+}$ 和 $b_i \\in \\mathbb{Z^+}$。\n\n令 $T'$ 为 $T$ 的一棵子树，$F_i$ 为 $T$ 中所有以结点 $i$ 为根的子树的集合。\n\n- 定义 $r(T') = \\frac {a(T')}{b(T')}$，其中 $a(T') = \\sum \\limits_{j \\in T'}{a_j}$，$b(T') = \\sum \\limits_{j \\in T'}{b_j}$。\n\n- 定义 $T_i$ 为一棵以结点 $i$ 为根的子树，$T_i$ 满足 $r(T_i) = \\min \\limits_{T' \\in F_i}r(T')$ 且具有最多的结点数量。\n\n- 定义 $S(T')$：对于 $T$ 中的某个结点 $j$，令其父结点为 $i$，则 $j \\in S(T')$ 当且仅当 $i \\in T'$ 但 $j \\notin T'$ 。\n\n给定一棵具有 $n$ 个结点的有根树 $T$，令根结点为 $i$，对其执行以下操作：\n\n（$1$）将根结点 $i$ 放入结点集合 $Q$，即初始时置 $Q \\leftarrow \\{i\\}$；\n\n（$2$）任取 $Q$ 中的一个元素，令其为 $j$，确定 $T_j$，对于结点 $k \\in S(T_j)$，置 $a_k \\leftarrow a_k + \\lceil r(T_j) \\rceil$；\n\n（$3$）从集合 $Q$ 中删除元素 $j$，并置 $Q \\leftarrow Q \\cup S(T_j)$；\n\n（$4$）若集合 $Q = \\varnothing $，结束操作，否则转步骤（$2$）。\n\n每执行一次步骤（$2$）就会确定一棵 $T$ 的子树，假设在结束操作时一共执行了  $m$ 次步骤（$2$）,令第 $i$ 次执行步骤（$2$）所确定的子树为 $K_i$，最小化以下 $W$ 值：\n\n$$W = 1 \\times \\lceil r(K_1) \\rceil + 2 \\times \\lceil r(K_2) \\rceil + \\cdots + m \\times \\lceil r(K_m) \\rceil = \\sum_{i = 1}^{m}i \\times \\lceil r(K_i) \\rceil$$\n\n$\\mathbb{Z^+}$ 表示全体正整数，$\\lceil x \\rceil$ 表示不小于 $x$ 的最小整数。\n\n------------\n\n**原版题面**\n\n$\\text{X}$ 细胞是来自于仙女座星系 $\\text{Gamma}$ 行星的一种古老生命形式。\n\n初始时，只有 $1$ 个 $\\text{X}$ 细胞，而 $\\text{X}$ 细胞可以通过直接分裂来产生后代 $\\text{X}$ 细胞。对于某个 $\\text{X}$ 细胞 $i$ 来说，如果它产生了一个直接后代 $\\text{X}$ 细胞 $j$，则将细胞 $i$ 称为细胞 $j$ 的**母细胞**，将细胞 $j$ 称为 $i$ 的**子细胞**。\n\n注意，母细胞、子细胞的定义不具有传递性。假设细胞 $i$ 产生了一个直接后代细胞 $j$，细胞 $j$ 又产生了一个直接后代细胞 $k$，则将 $j$ 称为 $i$ 的子细胞，$k$ 称为 $j$ 的子细胞，但 $k$ 不是 $i$ 的子细胞。\n\n每个 $\\text{X}$ 细胞具有活力值 $h_x$ 和体积 $v_x$，为了研究的方便，人们为 $\\text{X}$ 细胞定义了**变异指数**\n\n$$d_x = \\frac{h_x}{v_x}$$\n\n该指数用于衡量 $\\text{X}$ 细胞对环境的适应性，变异指数越低，细胞存活的概率越高。\n\n人们发现，当 $\\text{X}$ 细胞受到特定的外界刺激后，它会激活并开始一种被人们称为**同化**的过程来转变为一个 $\\text{Z}$ 细胞。在同化过程开始前，激活的 $\\text{X}$ 细胞会改变自身状态成为一个 $\\text{Y}$ 细胞，$\\text{Y}$ 细胞会不断吸收它的子细胞并进行融合，使得该子细胞成为 $\\text{Y}$ 细胞的一部分。\n\n在融合后，$\\text{Y}$ 细胞的活力值和体积为融合前的细胞活力值和体积的加和。也就是说，假设有 $n$ 个细胞经过融合成为一个 $\\text{Y}$ 细胞，这 $n$ 个细胞的活力值和体积分别为 $h_1$，$h_2$，…，$h_n$ 和 $v_1$，$v_2$，…，$v_n$，则融合完成后，该 $\\text{Y}$ 细胞的活力值 $h_y = \\sum_{i=1}^{n}h_i$，体积 $v_y = \\sum_{i=1}^{n}v_i$，变异指数 $d_y = \\frac{h_y}{v_y}$。\n\n在同化过程中，$\\text{Y}$ 细胞会遵循以下原则：\n\n- 如果某个子细胞 $j$ 的母细胞 $i$ 尚未被同化，则该子细胞 $j$ 不会被同化。\n- 能够使得 $\\text{Y}$ 细胞变异指数尽可能地小且同化尽可能多的细胞。\n\n当 $\\text{Y}$ 细胞无法再同化更多的细胞时，它会停止同化过程，转变为一个 $\\text{Z}$ 细胞并释放信息素（状态转变前后，细胞的活力值和体积不变）。该信息素会产生以下作用：令生成的 $\\text{Z}$ 细胞的变异指数为 $d_z = \\frac{h_z}{v_z}$，如果某个尚未被同化的子细胞 $j$ 的母细胞 $i$ 被该 $\\text{Z}$ 细胞同化，则该子细胞 $j$ 的活力值 $h_j$ 增加 $\\lceil d_z \\rceil$（$\\lceil x \\rceil$ 表示不小于 $x$ 的最小整数）。\n\n需要注意，在同化过程结束时，$\\text{Y}$ 细胞的变异指数要求尽可能地小，但在同化过程中，$\\text{Y}$ 细胞的变异指数并不要求时刻保持最小（参见输入 $\\#1$）。\n\n研究人员需要通过一种专用设备来产生激活 $\\text{X}$ 细胞的特定外界刺激，每次使用该设备都会消耗一定数量的激活剂，消耗的激活剂数量 $c_t$ 使用以下公式进行计算：\n\n$$c_t = t \\times \\lceil d_z \\rceil $$\n\n其中 $t$ 表示使用该设备的次数序号（初始时从 $1$ 开始计数），$d_z$ 表示该次激活最终生成的 $\\text{Z}$ 细胞的变异指数。\n\n由于母细胞会分泌信息素使得子细胞无法被激活，只能选择不存在母细胞或者母细胞已经被同化的 $\\text{X}$ 细胞作为特定外界刺激的对象，以使其激活并开始同化过程。\n\n给定所有 $\\text{X}$ 细胞之间的相互关系及其活力值和体积，鉴于激活剂非常难以制造，现在需要你制定一个最优的 $\\text{X}$ 细胞激活顺序方案，使得所有的 $\\text{X}$ 细胞均转变为 $\\text{Z}$ 细胞且消耗的激活剂数量最少。\n\n你只需要输出该最少值即可。\n", "inputFormat": "输入的第一行是一个整数 $n$，表示 $\\text{X}$ 细胞的数量。\n\n接下来的一行，包含 $n - 1$ 个整数，依次表示编号为 $2 \\sim n$ 的 $\\text{X}$ 细胞的母细胞的编号。\n\n接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的 $\\text{X}$ 细胞的活力值 $h_i$。\n\n再接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的 $\\text{X}$ 细胞的体积 $v_i$。\n\n初始的 $\\text{X}$ 细胞的编号为 $1$。\n\n\n------------\n\n**题意简述所对应的输入格式**：\n\n输入的第一行是一个整数 $n$，表示有根树结点的数量。\n\n接下来的一行，包含 $n - 1$ 个整数，依次表示编号为 $2 \\sim n$ 的结点的父结点的编号。\n\n接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的结点的权值 $a_i$。\n\n再接下来的一行，包含 $n$ 个整数，依次表示编号为 $i$ 的结点的权值 $b_i$。\n\n根结点的编号为 $1$。", "outputFormat": "输出一个整数，表示使得所有 $\\text{X}$ 细胞均转变为 $\\text{Z}$ 细胞所需消耗的激活剂数量的最少值。\n\n\n------------\n\n**题意简述所对应的输出格式**：\n\n输出一个整数，表示 $W$ 的最小值。", "hint": "**样例说明**\n\n输入 $\\#1$：\n\n- 激活细胞 $1$，同化细胞 $2、3$，产生的 $\\text{Z}$ 细胞活力值 $h_z = 24$，体积 $v_z = 12$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {24}{12} = 2$。\n\n- $1$ 次激活总共最少需要消耗的激活剂数量为 $c_1 = t \\times \\lceil d_z \\rceil = 1 \\times \\lceil \\frac {24}{12} \\rceil = 1 \\times 2 = 2$。\n\n- 初始时 $\\text{Y}$ 细胞的变异指数为 $5$，当同化细胞 $2$ 后，变异指数为 $6$，当同化细胞 $3$ 后，变异指数变为 $2$。由此可见，在同化过程中，$\\text{Y}$ 细胞的变异指数并不是时刻都保持最小，只需在最后停止同化转变为 $\\text{Z}$ 细胞时为最小值即可。\n\n输入 $\\#2$：\n\n- 激活细胞 $1$，同化细胞 $2$，产生的 $\\text{Z}$ 细胞活力值 $h_z = 2 + 2 = 4$，体积 $v_z = 2 + 3 = 5$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {4}{5}$，该次激活消耗的激活剂数量 $c_1 = t \\times \\lceil d_z \\rceil= 1 \\times \\lceil \\frac {4}{5} \\rceil = 1 \\times 1 = 1$，该 $\\text{Z}$ 细胞释放信息素使得细胞 $3$ 的活力值增加 $1$，则细胞 $3$ 的活力值变为 $13$；\n\n- 激活细胞 $3$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 13$，体积 $v_z = 4$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {13}{4}$，该次激活消耗的激活剂数量 $c_2 = t \\times \\lceil d_z \\rceil = 2 \\times \\lceil \\frac {13}{4} \\rceil= 2 \\times 4 = 8$。\n\n- $2$ 次激活总共最少需要消耗的激活剂数量为 $c_1 + c_2 = 1 + 8 = 9$。\n\n\n输入 $\\#3$：\n\n- 激活细胞 $1$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 1$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {1}{1} = 1$。总共消耗的激活剂数量 $c_1 = t \\times \\lceil d_z \\rceil = 1 \\times \\lceil 1 \\rceil = 1$。$\\text{Z}$ 细胞释放信息素，使得细胞 $2$、$5$ 的活力值各增加 $1$，细胞 $2$、$5$ 的活力值当前为 $8$、$10$。\n\n- 激活细胞 $2$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 8$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {8}{1} = 8$。总共消耗的激活剂数量 $c_2 = t \\times \\lceil d_z \\rceil = 2 \\times \\lceil 8 \\rceil = 16$。$\\text{Z}$ 细胞释放信息素，使得细胞 $3$、$4$ 的活力值各增加 $8$，细胞 $3$、$4$ 的活力值当前为 $18$、$28$。\n\n- 激活细胞 $4$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 28$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {28}{1} = 28$。总共消耗的激活剂数量 $c_3 = t \\times \\lceil d_z \\rceil = 3 \\times \\lceil 28 \\rceil = 84$。\n\n- 激活细胞 $3$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 18$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {18}{1} = 18$。总共消耗的激活剂数量 $c_4 = t \\times \\lceil d_z \\rceil = 4 \\times \\lceil 18 \\rceil = 72$。\n\n- 激活细胞 $5$，未同化其他细胞，产生的 $\\text{Z}$ 细胞活力值 $h_z = 10$，体积 $v_z = 1$，变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {10}{1} = 10$。总共消耗的激活剂数量 $c_5 = t \\times \\lceil d_z \\rceil = 5 \\times \\lceil 10 \\rceil = 50$。\n\n- $5$ 次激活总共最少需要消耗的激活剂数量为 $c_1 + c_2 + c_3 + c_4 + c_5 = 1 + 16 + 84 + 72 + 50 = 223$。\n\n输入 $\\#4$：\n\n- 激活细胞 $1$，未同化其他细胞，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {4}{1}$，释放信息素使得细胞 $2、5、9$ 的活力值增加 $4$，消耗激活剂 $c_1 = 1 \\times \\lceil \\frac {4}{1} \\rceil = 1 \\times 4 = 4$。\n\n- 激活细胞 $5$，同化细胞 $6、7、8$，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {84}{4}$，消耗激活剂 $c_2 = 2 \\times \\lceil \\frac {84}{4} \\rceil = 2 \\times 21 = 42$。\n\n- 激活细胞 $9$，同化细胞 $10、11、12$，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {71}{4}$，消耗激活剂 $c_3 = 3 \\times \\lceil \\frac {71}{4} \\rceil = 3 \\times 18 = 54$。\n\n- 激活细胞 $2$，同化细胞 $3、4$，产生的 $\\text{Z}$ 细胞变异指数 $d_z = \\frac {h_z}{v_z} = \\frac {17}{3}$，消耗激活剂 $c_4 = 4 \\times \\lceil \\frac {17}{3} \\rceil = 4 \\times 6 = 24$。\n\n- $4$ 次激活总共最少需要消耗的激活剂数量为 $c_1 + c_2 + c_3 + c_4 = 4 + 42 + 54 + 24 = 124$。\n\n------------\n\n**数据范围**\n\n**本题采用捆绑测试。某些子任务的输入文件较大，请使用合适的输入读取方式。**\n\n| 子任务 | 分值 | $n \\leq$ | 特殊性质 | 时间限制 | 内存限制 | 子任务依赖 |\n| :-: | :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $20$ |   | $1 \\text{ s}$ |  $256 \\text{ MB}$ | |\n| $2$ | $30$ | $10^3$ |   | $1 \\text{ s}$ | $256 \\text{ MB}$ | $1$ |\n| $3$ | $10$ | $10^5$ |   | $1 \\text{ s}$ | $256 \\text{ MB}$ | $1 \\sim 2$ |\n| $4$ | $10$ | $10^6$ | $\\text{A}$ | $3 \\text{ s}$ | $256 \\text{ MB}$ |  |\n| $5$ | $20$ | $10^6$ | $\\text{B}$ | $1 \\text{ s}$ | $320 \\text{ MB}$ |  |\n| $6$ | $10$ | $10^6$ | $\\text{C}$ | $1 \\text{ s}$ | $256 \\text{ MB}$ |  |\n| $7$ | $10$ | $10^6$ |   | $3 \\text{ s}$ | $320 \\text{ MB}$ | $1 \\sim 6$ |\n\n- 特殊性质 $\\text{A}$：即给定的有根树所对应的图是星形图。$\\forall \\  2 \\leq i \\leq n$，$f_i = 1$。\n- 特殊性质 $\\text{B}$：给定的有根树所对应的图是有向链。$\\forall \\ 2 \\leq i \\leq n$，$f_i = i - 1$。\n- 特殊性质 $\\text{C}$：数据随机生成。$\\forall \\ 2 \\leq i \\leq n$，$f_i$ 是 $[1, i - 1]$ 中随机选取的整数。$h_i, v_i$ 是 $[1, 10^6]$ 中随机选取的整数。\n\n\n对于 $100 \\%$ 的数据，$1 \\leq n \\leq 10^6$，$1 \\leq h_i \\leq 10^6$，$1 \\leq v_i \\leq 10^6$，答案不超过 $10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8582", "type": "P", "difficulty": 6, "samples": [["0 16 3\n0 0 3\n1 3 3\n0 0 3\n1 1 2\n0 0 3\n2 1 3\n0 0 3\n1 0 0\n1 1 1\n0 0 3\n0 1 2\n0 1 3\n1 2 3\n0 2 3\n2 3 3\n0 2 3", "0\n1\n6\n0\n4\n2\n2\nDeath\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "洛谷原创", "O2优化", "字典树 Trie", "位运算", "洛谷月赛"], "title": "[CoE R5] 斑马王子", "background": "#### 注意：此题 Sub #4 中 $opt_i=3$，可视作 $opt_i=0$。数据将稍后修复，修复后将另行通知。\n\n#### UPD: 已修复。", "description": "**题意简述**\n\n有一长度为 $k+1$ 的数组 $s$，下标依次为 $0$ 到 $k$，初始时有 $s_i = 0 \\ (0 \\leqslant i \\leqslant k)$。\n接下来给定 $n$ 个非负整数二元组 $(l_i,\\ r_i)$，记 $T = \\bigcup\\limits_{i = 1}^n [l_i,\\ r_i] $，将所有符合 $i \\in T \\bigcap \\mathbb{Z}$ 的 $s_i$ 赋值为 $1$。\n在任意时刻，记 $S =\\{ x |x \\in \\mathbb{Z} \\bigwedge x \\in [0,\\ k] \\bigwedge s_x = 0 \\}$。接下来给定 $m$ 个非负整数三元组 $(opt_i,\\ a_i,\\ b_i)$。\n\n当 $opt_i = 0$ 时，求：\n\n$$t_i = \\sum\\limits_{x = a_i}^{b_i} \\min\\limits_{y \\in S}(x \\oplus y)$$\n\n当 $opt_i = 1$ 时，将所有符合 $i \\in [a_i,\\ b_i] \\bigcap \\mathbb{Z}$ 的 $s_i$ 赋值为 $1$。\n\n当 $opt_i = 2$ 时，将所有符合 $i \\in [a_i,\\ b_i] \\bigcap \\mathbb{Z}$ 的 $s_i$ 赋值为 $0$。\n\n符号 $\\mathbb{Z}$ 表示全体整数，$\\oplus$ 表示异或。\n\n---\n\n**原版题面**\n\n『斑马王子』统治着无垠的草原。\n\n一条小河无息地流淌在草原的中央，与河流源头距离为 $y$ 的草地被赋予了 $y \\ (0 \\leqslant y \\leqslant k)$ 的『膜力』。\n\n第 $x \\ (0 \\leqslant x \\leqslant k)$ 天，『斑马王子』的『潜力智商』为 $x$。\n\n他会来到一片自己心仪的草地用膳，并以 $x \\oplus y$ 的『智商』开始新的一天。\n\n有一种叫『猎人』的生物，热衷于剥夺草原居民的生命。\n\n他们初始时设立了 $n$ 个形如 $(l_i,\\ r_i) \\ (0 \\leqslant l_i \\leqslant r_i \\leqslant k)$ 的营地，用『枪』屠杀着所有在 $[l_i,\\ r_i]$ 中驻足的生灵。\n\n作为『斑马王子』的得力大臣，你需要回答他的若干个问题，以保证草原的安全。\n\n在风云变幻的草原上，会依次发生 $m$ 个形如 $(opt_i,\\ a_i,\\ b_i) \\ (0 \\leqslant a_i \\leqslant b_i \\leqslant k , \\ opt_i \\in \\{0,\\ 1,\\ 2\\})$ 的事件。\n\n当 $opt_i = 1$ 时，事件 $i$ 代表猎人在 $[a_i,\\ b_i]$ 中全部驻扎了新营地。\n\n当 $opt_i = 2$ 时，事件 $i$ 代表斑马王子英勇的部队摧毁了 $[a_i,\\ b_i]$ 中的全部营地。\n\n而当 $opt_i = 0$ 时，斑马王子向你发出了灵魂拷问：\n\n每一个问题中，『斑马王子』希望从第 $a_i$ 到第 $b_i$ 天 $(0 \\leqslant a_i \\leqslant b_i \\leqslant k)$，在非『猎人』营地的草地用膳。『斑马王子』希望知道从第 $a_i$ 到 $b_i$ 天，『智商』之和的最小可能值 $t_i$。\n\n你苦思冥想，忽然，『枪』的吼叫声撕裂了空气，如果不在 $1 \\ sec$ 内回答问题 $\\dots \\dots$", "inputFormat": "第一行输入整数 $n, \\ m, \\ k$。\n\n接下来 $n$ 行，每行两个整数 $l_i, \\ r_i$，表示『猎人』的一个营地。\n\n接下来 $m$ 行，每行三个整数 $opt_i,\\ a_i,\\ b_i$，表示一组操作。", "outputFormat": "对于第 $i$ 组操作 $(1 \\leqslant i \\leqslant m)$，当 $opt_i = 1$ 或 $opt_i = 2$ 时，不需要输出。\n\n当 $opt_i = 0$ 时，当所有草地都属于猎人的营地时，输出一行 ``Death``,否则输出一行一个整数，表示 $t_i$。", "hint": "**数据范围**\n\n**本题采用捆绑测试。**\n\n$\\texttt{Subtask 1 (5 pts)}$：对于 $5\\%$ 的数据，保证 $0 \\leqslant n,m,k \\leqslant 20$。\n\n$\\texttt{Subtask 2 (5 pts)}$：对于 $5\\%$ 的数据，保证 $0 \\leqslant n,m,k \\leqslant 500$。\n\n$\\texttt{Subtask 3 (15 pts)}$：对于 $15\\%$ 的数据，保证 $0 \\leqslant n,m,k \\leqslant 4000$。\n\n$\\texttt{Subtask 4 (5 pts)}$：对于 $5\\%$ 的数据，保证 $opt_i = 0$。\n\n$\\texttt{Subtask 5 (70 pts)}$：无特殊限制。\n\n对于 $100 \\%$ 的数据， $0 \\leqslant n,\\ m,\\ k \\leqslant 2 \\times 10^5$，$0 \\leqslant l_i \\leqslant r_i \\leqslant k$，$0 \\leqslant a_i \\leqslant b_i \\leqslant k$，$opt_i \\in \\{0,\\ 1,\\ 2\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R5] 斑马王子", "background": "#### 注意：此题 Sub #4 中 $opt_i=3$，可视作 $opt_i=0$。数据将稍后修复，修复后将另行通知。\n\n#### UPD: 已修复。", "description": "**题意简述**\n\n有一长度为 $k+1$ 的数组 $s$，下标依次为 $0$ 到 $k$，初始时有 $s_i = 0 \\ (0 \\leqslant i \\leqslant k)$。\n接下来给定 $n$ 个非负整数二元组 $(l_i,\\ r_i)$，记 $T = \\bigcup\\limits_{i = 1}^n [l_i,\\ r_i] $，将所有符合 $i \\in T \\bigcap \\mathbb{Z}$ 的 $s_i$ 赋值为 $1$。\n在任意时刻，记 $S =\\{ x |x \\in \\mathbb{Z} \\bigwedge x \\in [0,\\ k] \\bigwedge s_x = 0 \\}$。接下来给定 $m$ 个非负整数三元组 $(opt_i,\\ a_i,\\ b_i)$。\n\n当 $opt_i = 0$ 时，求：\n\n$$t_i = \\sum\\limits_{x = a_i}^{b_i} \\min\\limits_{y \\in S}(x \\oplus y)$$\n\n当 $opt_i = 1$ 时，将所有符合 $i \\in [a_i,\\ b_i] \\bigcap \\mathbb{Z}$ 的 $s_i$ 赋值为 $1$。\n\n当 $opt_i = 2$ 时，将所有符合 $i \\in [a_i,\\ b_i] \\bigcap \\mathbb{Z}$ 的 $s_i$ 赋值为 $0$。\n\n符号 $\\mathbb{Z}$ 表示全体整数，$\\oplus$ 表示异或。\n\n---\n\n**原版题面**\n\n『斑马王子』统治着无垠的草原。\n\n一条小河无息地流淌在草原的中央，与河流源头距离为 $y$ 的草地被赋予了 $y \\ (0 \\leqslant y \\leqslant k)$ 的『膜力』。\n\n第 $x \\ (0 \\leqslant x \\leqslant k)$ 天，『斑马王子』的『潜力智商』为 $x$。\n\n他会来到一片自己心仪的草地用膳，并以 $x \\oplus y$ 的『智商』开始新的一天。\n\n有一种叫『猎人』的生物，热衷于剥夺草原居民的生命。\n\n他们初始时设立了 $n$ 个形如 $(l_i,\\ r_i) \\ (0 \\leqslant l_i \\leqslant r_i \\leqslant k)$ 的营地，用『枪』屠杀着所有在 $[l_i,\\ r_i]$ 中驻足的生灵。\n\n作为『斑马王子』的得力大臣，你需要回答他的若干个问题，以保证草原的安全。\n\n在风云变幻的草原上，会依次发生 $m$ 个形如 $(opt_i,\\ a_i,\\ b_i) \\ (0 \\leqslant a_i \\leqslant b_i \\leqslant k , \\ opt_i \\in \\{0,\\ 1,\\ 2\\})$ 的事件。\n\n当 $opt_i = 1$ 时，事件 $i$ 代表猎人在 $[a_i,\\ b_i]$ 中全部驻扎了新营地。\n\n当 $opt_i = 2$ 时，事件 $i$ 代表斑马王子英勇的部队摧毁了 $[a_i,\\ b_i]$ 中的全部营地。\n\n而当 $opt_i = 0$ 时，斑马王子向你发出了灵魂拷问：\n\n每一个问题中，『斑马王子』希望从第 $a_i$ 到第 $b_i$ 天 $(0 \\leqslant a_i \\leqslant b_i \\leqslant k)$，在非『猎人』营地的草地用膳。『斑马王子』希望知道从第 $a_i$ 到 $b_i$ 天，『智商』之和的最小可能值 $t_i$。\n\n你苦思冥想，忽然，『枪』的吼叫声撕裂了空气，如果不在 $1 \\ sec$ 内回答问题 $\\dots \\dots$", "inputFormat": "第一行输入整数 $n, \\ m, \\ k$。\n\n接下来 $n$ 行，每行两个整数 $l_i, \\ r_i$，表示『猎人』的一个营地。\n\n接下来 $m$ 行，每行三个整数 $opt_i,\\ a_i,\\ b_i$，表示一组操作。", "outputFormat": "对于第 $i$ 组操作 $(1 \\leqslant i \\leqslant m)$，当 $opt_i = 1$ 或 $opt_i = 2$ 时，不需要输出。\n\n当 $opt_i = 0$ 时，当所有草地都属于猎人的营地时，输出一行 ``Death``,否则输出一行一个整数，表示 $t_i$。", "hint": "**数据范围**\n\n**本题采用捆绑测试。**\n\n$\\texttt{Subtask 1 (5 pts)}$：对于 $5\\%$ 的数据，保证 $0 \\leqslant n,m,k \\leqslant 20$。\n\n$\\texttt{Subtask 2 (5 pts)}$：对于 $5\\%$ 的数据，保证 $0 \\leqslant n,m,k \\leqslant 500$。\n\n$\\texttt{Subtask 3 (15 pts)}$：对于 $15\\%$ 的数据，保证 $0 \\leqslant n,m,k \\leqslant 4000$。\n\n$\\texttt{Subtask 4 (5 pts)}$：对于 $5\\%$ 的数据，保证 $opt_i = 0$。\n\n$\\texttt{Subtask 5 (70 pts)}$：无特殊限制。\n\n对于 $100 \\%$ 的数据， $0 \\leqslant n,\\ m,\\ k \\leqslant 2 \\times 10^5$，$0 \\leqslant l_i \\leqslant r_i \\leqslant k$，$0 \\leqslant a_i \\leqslant b_i \\leqslant k$，$opt_i \\in \\{0,\\ 1,\\ 2\\}$。", "locale": "zh-CN"}}}
{"pid": "P8584", "type": "P", "difficulty": 2, "samples": [["3\n3 5 1\n4 7 2\n7 3 1", "248/105"], ["4\n6 7 1\n8 3 2\n9 14 2\n5 17 1", "-1541/714"], ["3\n7 4 1\n3 8 2\n3 8 2\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "探索未知", "background": "下发文件：\n\n<https://luogu-ipic.oss-cn-shanghai.aliyuncs.com/watujir2-jdi92.zip>", "description": "2102 年，人类已经建立了从地球到室女座 $\\alpha $ 星的星际通道。通道绵延数百光年。\n\n而在通道上有许多路牌。第 $i$ 个路牌上写有一个分数 $\\dfrac{a_i}{b_i}$ 和一个分数运算符 $+$ 或 $-$。\n\n一开始，你的手上拿着一个数字 $0$。你沿着通道向后走。每走到一个路牌，**会用手上的数和路牌上的分数，用路牌上的运算符号进行计算，并把得到的新数拿在手中（丢弃掉手中原来的数）**。值得注意的是，如果你手中计算得到的数不是整数，则会保留既约分数的形式；否则直接保留整数形式。\n\n现在你想知道，当你走到通道的末端时，手中拿着的数是多少？", "inputFormat": "第 $1$ 行共一个正整数 $n$ 表示通道内共有 $n$ 个路牌。\n\n第 $2\\sim n+1$ 行每行三个正整数 $a_i,b_i,opt_i$ 表示第 $i$ 个路牌上写着的分数为 $\\dfrac{a_i}{b_i}$，运算符为 $opt_i$。\n\n其中，$+,-$ 两种运算分别用 $1,2$ 代替。", "outputFormat": "共一行一个数。\n\n若最终的结果可以保留为整数，则输出一个整数 $ans$ 表示结果。\n\n否则，若最终的结果只能保留为分数，则需要以 $a/b$ 的形式输出一个分数 $\\dfrac{a}{b}$。需要保证 $\\dfrac{a}{b}$ 为既约分数，即 $\\gcd(a,b)=1$ 。\n\n需要注意，结果可能出现负数，此时需要保留负号。例如，若结果为 $-\\dfrac{11451}{4}$，那么需要输出 `-11451/4`。", "hint": "对于 $20\\%$ 的数据，运算符只存在加法。\n\n另有 $20\\%$ 的数据，运算法只存在减法。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^3$，$0\\leq a \\leq 1000$，$0 < b \\leq 1000$，保证答案以及过程中全部数值(整数部分/分子/分母)不超过 $2\\times 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "探索未知", "background": "下发文件：\n\n<https://luogu-ipic.oss-cn-shanghai.aliyuncs.com/watujir2-jdi92.zip>", "description": "2102 年，人类已经建立了从地球到室女座 $\\alpha $ 星的星际通道。通道绵延数百光年。\n\n而在通道上有许多路牌。第 $i$ 个路牌上写有一个分数 $\\dfrac{a_i}{b_i}$ 和一个分数运算符 $+$ 或 $-$。\n\n一开始，你的手上拿着一个数字 $0$。你沿着通道向后走。每走到一个路牌，**会用手上的数和路牌上的分数，用路牌上的运算符号进行计算，并把得到的新数拿在手中（丢弃掉手中原来的数）**。值得注意的是，如果你手中计算得到的数不是整数，则会保留既约分数的形式；否则直接保留整数形式。\n\n现在你想知道，当你走到通道的末端时，手中拿着的数是多少？", "inputFormat": "第 $1$ 行共一个正整数 $n$ 表示通道内共有 $n$ 个路牌。\n\n第 $2\\sim n+1$ 行每行三个正整数 $a_i,b_i,opt_i$ 表示第 $i$ 个路牌上写着的分数为 $\\dfrac{a_i}{b_i}$，运算符为 $opt_i$。\n\n其中，$+,-$ 两种运算分别用 $1,2$ 代替。", "outputFormat": "共一行一个数。\n\n若最终的结果可以保留为整数，则输出一个整数 $ans$ 表示结果。\n\n否则，若最终的结果只能保留为分数，则需要以 $a/b$ 的形式输出一个分数 $\\dfrac{a}{b}$。需要保证 $\\dfrac{a}{b}$ 为既约分数，即 $\\gcd(a,b)=1$ 。\n\n需要注意，结果可能出现负数，此时需要保留负号。例如，若结果为 $-\\dfrac{11451}{4}$，那么需要输出 `-11451/4`。", "hint": "对于 $20\\%$ 的数据，运算符只存在加法。\n\n另有 $20\\%$ 的数据，运算法只存在减法。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^3$，$0\\leq a \\leq 1000$，$0 < b \\leq 1000$，保证答案以及过程中全部数值(整数部分/分子/分母)不超过 $2\\times 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P8585", "type": "P", "difficulty": 3, "samples": [["4\n1 3 5\n1 2 3\n2 2 3\n4 3 5", "0\n4\n6"], ["10\n2 5 5\n4 3 3\n1 3 2\n3 4 3\n3 2 5\n3 4 3\n2 3 4\n4 5 5\n2 3 4\n5 3 4", "1\n1 8\n31"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Special Judge", "O2优化"], "title": "球状精灵的传说", "background": "", "description": "你在人马座的三叶星云里，发现了一类新生物：球状精灵。\n\n球状精灵是一类外形为标准椭球形的精灵。每只精灵有三个维度的**幅度** $\\{r_1,r_2,r_3\\}$，分别表示其三维世界中三个方向上的尺度。\n\n而关于球状精灵有一个传说：族群中**声望值最高**的球状精灵会获得升入四维宇宙的机会。而某个幅度为 $\\{r_1,r_2,r_3\\}$ 的球状精灵的声望值 $\\rho$ 定义为：\n\n$$\\rho=\\left\\lfloor{\\frac{1}{4}\\min\\{r_1,r_2,r_3\\}^3}\\right\\rfloor$$ \n\n其中 $\\left\\lfloor\\right\\rfloor$ 表示下取整。\n\n同时，每只球状精灵可以选择与别的精灵**拥抱至多一次**，之后两者会合成为**一个新的球状精灵**。两只球状精灵能够拥抱，当且仅当它们**存在至少一个幅度面能够重合**。具体来讲，即需要两只精灵的幅度**存在至少两个值相同**。\n\n例如，两只精灵三个方向上的幅度分别为 $\\{a,x,y\\}$ 和 $\\{b,x,y\\}$，那么他们可以选择拥抱并生成一只幅度为 $\\{a+b,x,y\\}$ 的新精灵。但是注意，精灵们都是漂浮在宇宙中的，所以他们可以任意旋转。比如幅度为 $\\{x,y,z\\}$ 的精灵可以任意旋转成为 $\\{x,z,y\\},\\{z,x,y\\},\\{z,y,x\\},\\{y,z,x\\},\\{y,x,z\\}$ 的精灵。**拥抱形成的新精灵不能再次参与拥抱。**\n\n现在球状精灵们想知道，族群中能够升入四维宇宙的精灵，声望值最高能是多少？\n\n请仔细阅读输入格式和输出格式以获取更详细的讯息。", "inputFormat": "第 $1$ 行共一个正整数 $n$，表示族群中最初的球状精灵数目。最初全部的球状精灵都没有拥抱过。\n\n第 $2\\sim n+1$ 行，每行三个非负整数 $r_{i,1},r_{i,2},r_{i,3}$，分别表示编号为 $i$ 的球状精灵三个维度的幅度。\n", "outputFormat": "第一行，输出一个整数 $opt$:\n\n  - 当最优情况下，升入四维空间的球状精灵是最初未拥抱过的精灵之一时，$opt=0$。\n\n  - 当最优情况下，升入四维空间的精灵是由原来的两只精灵拥抱生成时，$opt=1$。\n\n第二行，有两种情况：\n\n  - 当 $opt=0$ 时，输出一个整数 $i$，表示升入四维空间的精灵是编号为 $i$ 的精灵。\n\n  - 当 $opt=1$ 时，输出两个整数 $i,j$，表示最终升入四维空间的精灵由编号为 $i,j$ 的精灵拥抱生成。\n\n第三行，共一个整数，表示最优情况下升入四维空间精灵的声望值为多少。\n\n如果最优解有多种方案，输出任意一种情况即可。", "hint": "\n对于 $10\\%$ 的数据，$1\\leq n\\leq 20$。\n\n对于 $40\\%$ 的数据，$1\\leq n\\leq 800$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 5000$。\n\n对于 $85\\%$ 的数据，$1\\leq n\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^5$，$1\\leq r_{i,1},r_{i,2},r_{i,3} \\leq 10^3$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "球状精灵的传说", "background": "", "description": "你在人马座的三叶星云里，发现了一类新生物：球状精灵。\n\n球状精灵是一类外形为标准椭球形的精灵。每只精灵有三个维度的**幅度** $\\{r_1,r_2,r_3\\}$，分别表示其三维世界中三个方向上的尺度。\n\n而关于球状精灵有一个传说：族群中**声望值最高**的球状精灵会获得升入四维宇宙的机会。而某个幅度为 $\\{r_1,r_2,r_3\\}$ 的球状精灵的声望值 $\\rho$ 定义为：\n\n$$\\rho=\\left\\lfloor{\\frac{1}{4}\\min\\{r_1,r_2,r_3\\}^3}\\right\\rfloor$$ \n\n其中 $\\left\\lfloor\\right\\rfloor$ 表示下取整。\n\n同时，每只球状精灵可以选择与别的精灵**拥抱至多一次**，之后两者会合成为**一个新的球状精灵**。两只球状精灵能够拥抱，当且仅当它们**存在至少一个幅度面能够重合**。具体来讲，即需要两只精灵的幅度**存在至少两个值相同**。\n\n例如，两只精灵三个方向上的幅度分别为 $\\{a,x,y\\}$ 和 $\\{b,x,y\\}$，那么他们可以选择拥抱并生成一只幅度为 $\\{a+b,x,y\\}$ 的新精灵。但是注意，精灵们都是漂浮在宇宙中的，所以他们可以任意旋转。比如幅度为 $\\{x,y,z\\}$ 的精灵可以任意旋转成为 $\\{x,z,y\\},\\{z,x,y\\},\\{z,y,x\\},\\{y,z,x\\},\\{y,x,z\\}$ 的精灵。**拥抱形成的新精灵不能再次参与拥抱。**\n\n现在球状精灵们想知道，族群中能够升入四维宇宙的精灵，声望值最高能是多少？\n\n请仔细阅读输入格式和输出格式以获取更详细的讯息。", "inputFormat": "第 $1$ 行共一个正整数 $n$，表示族群中最初的球状精灵数目。最初全部的球状精灵都没有拥抱过。\n\n第 $2\\sim n+1$ 行，每行三个非负整数 $r_{i,1},r_{i,2},r_{i,3}$，分别表示编号为 $i$ 的球状精灵三个维度的幅度。\n", "outputFormat": "第一行，输出一个整数 $opt$:\n\n  - 当最优情况下，升入四维空间的球状精灵是最初未拥抱过的精灵之一时，$opt=0$。\n\n  - 当最优情况下，升入四维空间的精灵是由原来的两只精灵拥抱生成时，$opt=1$。\n\n第二行，有两种情况：\n\n  - 当 $opt=0$ 时，输出一个整数 $i$，表示升入四维空间的精灵是编号为 $i$ 的精灵。\n\n  - 当 $opt=1$ 时，输出两个整数 $i,j$，表示最终升入四维空间的精灵由编号为 $i,j$ 的精灵拥抱生成。\n\n第三行，共一个整数，表示最优情况下升入四维空间精灵的声望值为多少。\n\n如果最优解有多种方案，输出任意一种情况即可。", "hint": "\n对于 $10\\%$ 的数据，$1\\leq n\\leq 20$。\n\n对于 $40\\%$ 的数据，$1\\leq n\\leq 800$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 5000$。\n\n对于 $85\\%$ 的数据，$1\\leq n\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^5$，$1\\leq r_{i,1},r_{i,2},r_{i,3} \\leq 10^3$。\n", "locale": "zh-CN"}}}
{"pid": "P8586", "type": "P", "difficulty": 2, "samples": [["3 3 \n1 6\n4 7\n2 2", "14"], ["10 100\n6 14\n2 92\n3 91\n4 74\n7 75\n2 90\n7 25\n1 92\n3 41\n2 14", "580"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "星环防御工事", "background": "来自河外星系的小行星群即将有组织地打击地球。", "description": "据观测，一共会有共 $n$ 波小行星群攻击太阳系。每一波攻击有两个属性：$d_i,m_i$，表示第 $i$ 波攻击会在第 $d_i$ 个太阳日发动，小行星群的总质量为 $m_i$。如果不进行精准防御，太阳系或将面临灭顶之灾。于是你的上司将星环防御工事的建设任务交给了你。\n\n准确来讲，星环防御工事每个太阳日最多可以击毁总质量为 $k$ 的小行星。对于某一个在第 $d$ 个太阳日出现的小行星群，如果星环防御工事不能在第 $d$ 或 $d+1$ 个太阳日将其击毁(或者仅能部分击毁)，那么该小行星群(或其残余部分)将会被移交给地球和平联合组织 TPC 去处理——你当然不希望到手的美差被别人抢走！\n\n因此你现在想知道，你领导的星环防御工事最多可以击毁多少质量的小行星呢？", "inputFormat": "第 $1$ 行共两个整数 $n,k$ ，表示共有 $n$ 波小行星群，每个太阳日最多击毁 $k$ 质量的小行星。\n\n第 $2\\sim n+1$ 行每行两个非负整数 $d_i,m_i$，含义见题目描述。", "outputFormat": "\n共一行一个整数 $ans$ ，表示最多可以击毁多少的小行星总质量。", "hint": "对于 $10\\%$ 的数据，$1\\leq n,\\max\\{d_i\\} \\leq 20$。\n\n对于 $20\\%$ 的数据，$1\\leq n,\\max\\{d_i\\}\\leq 600$。\n\n对于 $40\\%$ 的数据，$1\\leq n,\\max\\{d_i\\}\\leq 5000$。\n\n对于另外 $10\\%$ 的数据，保证全部小行星群的 $m_i$ 总和不超过 $k$ 。\n\n对于 $100\\%$ 的数据，$1\\leq n,\\max\\{d_i\\}\\leq 3\\times 10^5$，$0\\leq m_i,k\\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "星环防御工事", "background": "来自河外星系的小行星群即将有组织地打击地球。", "description": "据观测，一共会有共 $n$ 波小行星群攻击太阳系。每一波攻击有两个属性：$d_i,m_i$，表示第 $i$ 波攻击会在第 $d_i$ 个太阳日发动，小行星群的总质量为 $m_i$。如果不进行精准防御，太阳系或将面临灭顶之灾。于是你的上司将星环防御工事的建设任务交给了你。\n\n准确来讲，星环防御工事每个太阳日最多可以击毁总质量为 $k$ 的小行星。对于某一个在第 $d$ 个太阳日出现的小行星群，如果星环防御工事不能在第 $d$ 或 $d+1$ 个太阳日将其击毁(或者仅能部分击毁)，那么该小行星群(或其残余部分)将会被移交给地球和平联合组织 TPC 去处理——你当然不希望到手的美差被别人抢走！\n\n因此你现在想知道，你领导的星环防御工事最多可以击毁多少质量的小行星呢？", "inputFormat": "第 $1$ 行共两个整数 $n,k$ ，表示共有 $n$ 波小行星群，每个太阳日最多击毁 $k$ 质量的小行星。\n\n第 $2\\sim n+1$ 行每行两个非负整数 $d_i,m_i$，含义见题目描述。", "outputFormat": "\n共一行一个整数 $ans$ ，表示最多可以击毁多少的小行星总质量。", "hint": "对于 $10\\%$ 的数据，$1\\leq n,\\max\\{d_i\\} \\leq 20$。\n\n对于 $20\\%$ 的数据，$1\\leq n,\\max\\{d_i\\}\\leq 600$。\n\n对于 $40\\%$ 的数据，$1\\leq n,\\max\\{d_i\\}\\leq 5000$。\n\n对于另外 $10\\%$ 的数据，保证全部小行星群的 $m_i$ 总和不超过 $k$ 。\n\n对于 $100\\%$ 的数据，$1\\leq n,\\max\\{d_i\\}\\leq 3\\times 10^5$，$0\\leq m_i,k\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P8587", "type": "P", "difficulty": 3, "samples": [["4\n4 7 6 5", "2 1"], ["6\n1 1000 100 1500 10 1800", "1 15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "新的家乡", "background": "2102 年，太阳系的生态终于不再支持人类的生存。人类打算沿着之前建好的星际长途路线去往金牛座蟹状星云中的某行星 $\\beta$ 谋求发展。\n", "description": "你作为第一批科研人员，提前来到了 $\\beta$ 星建造基地。\n\n$\\beta$ 星盛产锰钛矿石。基地需要一些**高度相同**的柱子，而每根柱子都需要由**恰好**两根锰钛矿石顺次连接组成。例如，若你有两根高度分别为 $h_x,h_y$ 的锰钛矿石，那么你可以用两者合成为一根高度为 $h_x+h_y$ 的柱子。每根锰钛矿石**显然至多被使用一次**。\n\n现在你来到了 $\\beta$ 星的锰钛矿场，摆在你面前的是 $n$ 根高度分别为 $h_i$ 的锰钛矿石。经过严密思考后你发现，房屋的牢固程度应该取决于柱子的数目，而不是柱子的高度。所以你想知道，使用面前这 $n$ 根矿石最多可以建造出多少根高度相同的柱子？\n\n但小花觉得这个问题太 easy 了，于是 ta 选择多问你一嘴：假设柱子高度均为 $h$，基地最多可以建出 $\\mathrm{res}$ 根柱子，那么在柱子数目同为 $\\mathrm{res}$ 时 $h$ 可以有几种不同的取值？", "inputFormat": "输入共两行。\n\n第一行共一个正整数 $n$，表示锰钛矿石的数量。\n\n第二行共 $n$ 个正整数 $h_i$，含义见题目描述。", "outputFormat": "输出共一行两个整数 $\\mathrm{res}$ 和 $\\mathrm{ans}$，分别表示最多的柱子数目以及最优答案下有多少种不同的高度方案。\n", "hint": "额外样例见附加文件 `ex.in/out`。\n\n对于 $20\\%$ 的数据，$1\\leq n\\leq 100$。\n\n对于 $40\\%$ 的数据，$1\\leq n \\leq 10^3$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$1\\leq h_i \\leq 3\\times 10^3$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "新的家乡", "background": "2102 年，太阳系的生态终于不再支持人类的生存。人类打算沿着之前建好的星际长途路线去往金牛座蟹状星云中的某行星 $\\beta$ 谋求发展。\n", "description": "你作为第一批科研人员，提前来到了 $\\beta$ 星建造基地。\n\n$\\beta$ 星盛产锰钛矿石。基地需要一些**高度相同**的柱子，而每根柱子都需要由**恰好**两根锰钛矿石顺次连接组成。例如，若你有两根高度分别为 $h_x,h_y$ 的锰钛矿石，那么你可以用两者合成为一根高度为 $h_x+h_y$ 的柱子。每根锰钛矿石**显然至多被使用一次**。\n\n现在你来到了 $\\beta$ 星的锰钛矿场，摆在你面前的是 $n$ 根高度分别为 $h_i$ 的锰钛矿石。经过严密思考后你发现，房屋的牢固程度应该取决于柱子的数目，而不是柱子的高度。所以你想知道，使用面前这 $n$ 根矿石最多可以建造出多少根高度相同的柱子？\n\n但小花觉得这个问题太 easy 了，于是 ta 选择多问你一嘴：假设柱子高度均为 $h$，基地最多可以建出 $\\mathrm{res}$ 根柱子，那么在柱子数目同为 $\\mathrm{res}$ 时 $h$ 可以有几种不同的取值？", "inputFormat": "输入共两行。\n\n第一行共一个正整数 $n$，表示锰钛矿石的数量。\n\n第二行共 $n$ 个正整数 $h_i$，含义见题目描述。", "outputFormat": "输出共一行两个整数 $\\mathrm{res}$ 和 $\\mathrm{ans}$，分别表示最多的柱子数目以及最优答案下有多少种不同的高度方案。\n", "hint": "额外样例见附加文件 `ex.in/out`。\n\n对于 $20\\%$ 的数据，$1\\leq n\\leq 100$。\n\n对于 $40\\%$ 的数据，$1\\leq n \\leq 10^3$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^6$，$1\\leq h_i \\leq 3\\times 10^3$。\n", "locale": "zh-CN"}}}
{"pid": "P8588", "type": "P", "difficulty": 2, "samples": [["1 3", "2"], ["10 3", "5"], ["1919810 3", "213313"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "『JROI-8』雷雨天特别行动科", "background": "![1663764044201.png](https://img-kysic-1258722770.file.myqcloud.com/639b5f084b6aa779f0a90253f9eef153/b2f5e91db29b9.png)\n\n>“天使可没有假期”\\\n“啊，又来了……还是不要勉强自己会比较好哦”\n\n**已获得转载授权。**", "description": "对于**非负整数**变量 $x$，记以下为一轮操作：\n\n1. 将 $x$ 增加 $1$；\n2. 如果 $x$ 是 $3$ 的倍数，则将 $x$ 除以 $3$。\n\n给定初始的 $x,k$，试求 $k$ 轮操作后 $x$ 的值。\n\n**请注意，大样例不以文件附加形式给出，而直接放在题目的 输入输出样例 中的 样例 #3**", "inputFormat": "一行两个非负整数 $x,k$。", "outputFormat": "一行一个正整数，表示 $k$ 轮操作后 $x$ 的值。", "hint": "【样例解释】\n\n对于样例一， $x$ 的变化过程如下：$1\\rightarrow 2\\rightarrow (3\\rightarrow 1)\\rightarrow 2$。\n\n其中括号内为一次操作。\n\n【数据范围与提示】\n\n对于全部的测试数据，满足 $0\\leq x,k\\leq 10^{18}$。\n\n**特别的，第 $1\\sim 2$ 测试点中的 $k\\leq 0$ 等价于 $k=0$，$3\\sim 4$ 的 $x$ 同理**。\n\n| 测试点编号 | 分数 | $x\\leq$ | $k\\leq$ |\n| -----------: | -----------: | -----------: | -----------: |\n| $1\\sim 2$ | $20$ | $5$ | $0$ |\n| $3\\sim 4$ | $20$ | $0$ | $10^{18}$ |\n| $5\\sim 6$ | $20$ | $10^{18}$ | $10^6$ |\n| $7 \\sim 10$ | $40$ | $10^{18}$ | $10^{18}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-8』雷雨天特别行动科", "background": "![1663764044201.png](https://img-kysic-1258722770.file.myqcloud.com/639b5f084b6aa779f0a90253f9eef153/b2f5e91db29b9.png)\n\n>“天使可没有假期”\\\n“啊，又来了……还是不要勉强自己会比较好哦”\n\n**已获得转载授权。**", "description": "对于**非负整数**变量 $x$，记以下为一轮操作：\n\n1. 将 $x$ 增加 $1$；\n2. 如果 $x$ 是 $3$ 的倍数，则将 $x$ 除以 $3$。\n\n给定初始的 $x,k$，试求 $k$ 轮操作后 $x$ 的值。\n\n**请注意，大样例不以文件附加形式给出，而直接放在题目的 输入输出样例 中的 样例 #3**", "inputFormat": "一行两个非负整数 $x,k$。", "outputFormat": "一行一个正整数，表示 $k$ 轮操作后 $x$ 的值。", "hint": "【样例解释】\n\n对于样例一， $x$ 的变化过程如下：$1\\rightarrow 2\\rightarrow (3\\rightarrow 1)\\rightarrow 2$。\n\n其中括号内为一次操作。\n\n【数据范围与提示】\n\n对于全部的测试数据，满足 $0\\leq x,k\\leq 10^{18}$。\n\n**特别的，第 $1\\sim 2$ 测试点中的 $k\\leq 0$ 等价于 $k=0$，$3\\sim 4$ 的 $x$ 同理**。\n\n| 测试点编号 | 分数 | $x\\leq$ | $k\\leq$ |\n| -----------: | -----------: | -----------: | -----------: |\n| $1\\sim 2$ | $20$ | $5$ | $0$ |\n| $3\\sim 4$ | $20$ | $0$ | $10^{18}$ |\n| $5\\sim 6$ | $20$ | $10^{18}$ | $10^6$ |\n| $7 \\sim 10$ | $40$ | $10^{18}$ | $10^{18}$ |", "locale": "zh-CN"}}}
{"pid": "P8589", "type": "P", "difficulty": 2, "samples": [["3", "-1"], ["5", "00110"], ["15400", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "构造", "洛谷月赛"], "title": "『JROI-8』对了，还有花，少女，银河", "background": "![1663764189387.png](https://img-kysic-1258722770.file.myqcloud.com/9d24e2bd5b20f277e72914b1bc44543e/44b6413b44c70.png)\n\n>「其一」\\\n即使化身白骨，也有不想忘记的东西\n\n**已获得转载授权。**", "description": "给定 $n$，请构造一个长度为 $n$ 的仅包含 $0,1$ 的数字串，满足 $01,00,10,11$ 出现的次数相等。或报告无解。\n\n这里“出现”指与原字符串中连续的一部分完全相同。例如，在 $1011101$ 中，$01,00,10,11$ 分别出现了 $2,0,2,2$ 次。\n\n**请注意，大样例不以文件附加形式给出，而直接放在题目的 输入输出样例 中的 样例 #3**", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "若有解，输出一行一个长度为 $n$ 的满足条件的仅包含 $0,1$ 的数字串。\n\n若无解，输出 `-1`。", "hint": "【数据范围与提示】\n\n| 测试点编号 | 分数 | $n\\leq$ | 特殊性质 |\n| -----------: | -----------: | -----------: | -----------: |\n| $1\\sim 2$ | $20$ | $5$ | 无 |\n| $3\\sim 4$ | $20$ | $10^6$ | $n \\bmod 4 = 0$ |\n| $5\\sim 6$ | $20$ | $20$ | 无 |\n| $7 \\sim 10$ | $40$ | $10^6$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-8』对了，还有花，少女，银河", "background": "![1663764189387.png](https://img-kysic-1258722770.file.myqcloud.com/9d24e2bd5b20f277e72914b1bc44543e/44b6413b44c70.png)\n\n>「其一」\\\n即使化身白骨，也有不想忘记的东西\n\n**已获得转载授权。**", "description": "给定 $n$，请构造一个长度为 $n$ 的仅包含 $0,1$ 的数字串，满足 $01,00,10,11$ 出现的次数相等。或报告无解。\n\n这里“出现”指与原字符串中连续的一部分完全相同。例如，在 $1011101$ 中，$01,00,10,11$ 分别出现了 $2,0,2,2$ 次。\n\n**请注意，大样例不以文件附加形式给出，而直接放在题目的 输入输出样例 中的 样例 #3**", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "若有解，输出一行一个长度为 $n$ 的满足条件的仅包含 $0,1$ 的数字串。\n\n若无解，输出 `-1`。", "hint": "【数据范围与提示】\n\n| 测试点编号 | 分数 | $n\\leq$ | 特殊性质 |\n| -----------: | -----------: | -----------: | -----------: |\n| $1\\sim 2$ | $20$ | $5$ | 无 |\n| $3\\sim 4$ | $20$ | $10^6$ | $n \\bmod 4 = 0$ |\n| $5\\sim 6$ | $20$ | $20$ | 无 |\n| $7 \\sim 10$ | $40$ | $10^6$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8590", "type": "P", "difficulty": 4, "samples": [["4 3\n-3 1 2 2", "141"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "前缀和", "洛谷月赛", "双指针 two-pointer"], "title": "『JROI-8』这是新历的朝阳，也是旧历的残阳", "background": "![1663764375173.png](https://img-kysic-1258722770.file.myqcloud.com/8c10be566f21cceb653f209300936b97/68a6764e14651.png)\n\n>少女于海边伫立，凝视着落日最后的余晖\\\n“已然过去了呢，旧历的一年......”\n\n**已获得转载授权。**", "description": "给定序列 $\\{a_n\\}$，满足每一项都不小于前一项。对于所有不超过 $k$ 的正整数 $m$，询问如果将 $a$ 分成 $m$ 段（可以有空段），并给从前往后第 $i$ 段内的每个数都加上 $i$，增加后的 $\\sum\\limits_{j=1}^n a_j^2$ 最大是多少。询问相互独立，即每次询问时给每个数加的值不保留到下一次询问。\n\n例如，对于序列 $\\{-3,1,2,2\\}$，若 $m=5$，则一种分段方式是 $[-3][][1,2][][2]$，增加后的序列是 $-2,4,5,7$，此时 $\\sum\\limits_{j=1}^n a_j^2=94$。\n\n记 $m=i$ 时的答案（即此时最大的 $\\sum\\limits_{j=1}^n a_j^2$）为 $q_i$，出于良心考虑，你只需要输出 $\\left(\\sum\\limits_{i=1}^k q_i\\right) \\bmod 998244353$ 即可。标准程序不基于特殊的输出方式，即能独立求出每一个 $q_i$。\n", "inputFormat": "第一行两个正整数 $n,k$，同题意。\n\n接下来一行 $n$ 个整数，表示 $\\{a_n\\}$。", "outputFormat": "一行一个整数，表示 $\\left(\\sum\\limits_{i=1}^k q_i\\right) \\bmod 998244353$。", "hint": "#### 【样例解释】\n\n当 $m=1$ 时，最优策略是 $[-3,1,2,2]$，$q_1=(-2)^2+2^2+3^2+3^2=26$。\n\n当 $m=2$ 时，最优策略是 $[-3][1,2,2]$，$q_2=(-2)^2+3^2+4^2+4^2=45$。\n\n当 $m=3$ 时，最优策略是 $[-3][][1,2,2]$，$q_3=(-2)^2+4^2+5^2+5^2=70$。\n\n则 $\\left(\\sum\\limits_{i=1}^k q_i\\right) \\bmod 998244353=(q_1+q_2+q_3)\\bmod 998244353=(26+45+70)\\bmod 998244353=141$。\n\n#### 【数据范围与约束】\n\n| 测试点编号 | 分数 | $n\\leq$ | $k\\leq$ | $\\lvert a_i\\rvert \\leq$ | 特殊性质 |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1\\sim 3$ | $15$ | $12$ | $12$ | $1000$ | 无 |\n| $4\\sim 6$ | $15$ | $1000$ | $1000$ | $1000$ | 无 |\n| $7\\sim 8$ | $10$ | $10^6$ | $10^6$ | $10^7$ | $a_i\\geq0$ |\n| $9 \\sim 12$ | $20$ | $10^6$ | $1000$ | $10^7$ | 无 |\n| $13\\sim 20$ | $40$ | $10^6$ | $10^7$ | $10^7$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-8』这是新历的朝阳，也是旧历的残阳", "background": "![1663764375173.png](https://img-kysic-1258722770.file.myqcloud.com/8c10be566f21cceb653f209300936b97/68a6764e14651.png)\n\n>少女于海边伫立，凝视着落日最后的余晖\\\n“已然过去了呢，旧历的一年......”\n\n**已获得转载授权。**", "description": "给定序列 $\\{a_n\\}$，满足每一项都不小于前一项。对于所有不超过 $k$ 的正整数 $m$，询问如果将 $a$ 分成 $m$ 段（可以有空段），并给从前往后第 $i$ 段内的每个数都加上 $i$，增加后的 $\\sum\\limits_{j=1}^n a_j^2$ 最大是多少。询问相互独立，即每次询问时给每个数加的值不保留到下一次询问。\n\n例如，对于序列 $\\{-3,1,2,2\\}$，若 $m=5$，则一种分段方式是 $[-3][][1,2][][2]$，增加后的序列是 $-2,4,5,7$，此时 $\\sum\\limits_{j=1}^n a_j^2=94$。\n\n记 $m=i$ 时的答案（即此时最大的 $\\sum\\limits_{j=1}^n a_j^2$）为 $q_i$，出于良心考虑，你只需要输出 $\\left(\\sum\\limits_{i=1}^k q_i\\right) \\bmod 998244353$ 即可。标准程序不基于特殊的输出方式，即能独立求出每一个 $q_i$。\n", "inputFormat": "第一行两个正整数 $n,k$，同题意。\n\n接下来一行 $n$ 个整数，表示 $\\{a_n\\}$。", "outputFormat": "一行一个整数，表示 $\\left(\\sum\\limits_{i=1}^k q_i\\right) \\bmod 998244353$。", "hint": "#### 【样例解释】\n\n当 $m=1$ 时，最优策略是 $[-3,1,2,2]$，$q_1=(-2)^2+2^2+3^2+3^2=26$。\n\n当 $m=2$ 时，最优策略是 $[-3][1,2,2]$，$q_2=(-2)^2+3^2+4^2+4^2=45$。\n\n当 $m=3$ 时，最优策略是 $[-3][][1,2,2]$，$q_3=(-2)^2+4^2+5^2+5^2=70$。\n\n则 $\\left(\\sum\\limits_{i=1}^k q_i\\right) \\bmod 998244353=(q_1+q_2+q_3)\\bmod 998244353=(26+45+70)\\bmod 998244353=141$。\n\n#### 【数据范围与约束】\n\n| 测试点编号 | 分数 | $n\\leq$ | $k\\leq$ | $\\lvert a_i\\rvert \\leq$ | 特殊性质 |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1\\sim 3$ | $15$ | $12$ | $12$ | $1000$ | 无 |\n| $4\\sim 6$ | $15$ | $1000$ | $1000$ | $1000$ | 无 |\n| $7\\sim 8$ | $10$ | $10^6$ | $10^6$ | $10^7$ | $a_i\\geq0$ |\n| $9 \\sim 12$ | $20$ | $10^6$ | $1000$ | $10^7$ | 无 |\n| $13\\sim 20$ | $40$ | $10^6$ | $10^7$ | $10^7$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P8591", "type": "P", "difficulty": 4, "samples": [["5\n-6 5\n1 3\n-4 9\n-1 10\n6 8\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "O2优化", "洛谷月赛"], "title": "『JROI-8』颅脑损伤 2.0", "background": "", "description": "给定 $n$ 条线段，第 $i$ 条是 $[l_i,r_i]$。将每一条线段染成红色或黑色，要求：\n\n1. 任意两条红色线段不相交。\n2. 任意一条黑色线段**至少**和一条红色线段相交。\n\n请最小化红色线段的长度和，并输出这个长度和。\n\n一条线段 $[l_i,r_i]$ 的长度定义为 $r_i-l_i$，两条线段 $[l_i,r_i],[l_j,r_j]$ 交**当且仅当** $l_i\\le r_j$ 且 $l_j\\le r_i$。", "inputFormat": "第一行一行一个正整数，代表 $n$。\n\n接下来 $n$ 行，每行两个整数，代表 $l_i,r_i$，用空格隔开。", "outputFormat": "一行一个非负整数，代表红色线段的长度和的最小值。", "hint": "**数据范围**\n\n|测试点编号|$n\\le$|\n| :----------: | :----------: |\n|$1\\sim4$|$10$|\n|$5\\sim8$|$400$|\n|$9\\sim20$|$3000$|\n\n对于所有数据，满足 $-10^9\\le l_i<r_i\\le10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-8』颅脑损伤 2.0", "background": "", "description": "给定 $n$ 条线段，第 $i$ 条是 $[l_i,r_i]$。将每一条线段染成红色或黑色，要求：\n\n1. 任意两条红色线段不相交。\n2. 任意一条黑色线段**至少**和一条红色线段相交。\n\n请最小化红色线段的长度和，并输出这个长度和。\n\n一条线段 $[l_i,r_i]$ 的长度定义为 $r_i-l_i$，两条线段 $[l_i,r_i],[l_j,r_j]$ 交**当且仅当** $l_i\\le r_j$ 且 $l_j\\le r_i$。", "inputFormat": "第一行一行一个正整数，代表 $n$。\n\n接下来 $n$ 行，每行两个整数，代表 $l_i,r_i$，用空格隔开。", "outputFormat": "一行一个非负整数，代表红色线段的长度和的最小值。", "hint": "**数据范围**\n\n|测试点编号|$n\\le$|\n| :----------: | :----------: |\n|$1\\sim4$|$10$|\n|$5\\sim8$|$400$|\n|$9\\sim20$|$3000$|\n\n对于所有数据，满足 $-10^9\\le l_i<r_i\\le10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P8592", "type": "P", "difficulty": 5, "samples": [["5\n-6 5\n1 3\n-4 9\n-1 10\n6 8\n", "4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "『JROI-8』颅脑损伤 2.0（加强版）", "background": "注意到本题特殊的时间限制。\n\n[普通版](https://www.luogu.com.cn/problem/P8591)。", "description": "给定 $n$ 条线段，第 $i$ 条是 $[l_i,r_i]$，将他们染成红色或黑色，要求：\n\n1. 任意两条红色不相交\n2. 任意一条黑色**至少**和一条红色相交。\n\n请最小化红色线段的长度和，并输出这个长度和。\n\n一条线段 $[l_i,r_i]$ 的长度定义为 $r_i-l_i$，两条线段 $[l_i,r_i],[l_j,r_j]$ 交**当且仅当**存在 $k\\in[l_i,r_i]$ 且 $k\\in[l_j,r_j]$。", "inputFormat": "第一行一行一个正整数，代表 $n$。\n\n接下来 $n$ 行，每行两个整数，代表 $l_i,r_i$，用空格隔开。", "outputFormat": "一行一个非负整数，代表最小的红色线段的长度和。", "hint": "**数据范围**\n\n|测试点编号|$n\\le$|\n| :----------: | :----------: |\n|$1\\sim10$|$5\\times 10^5$|\n\n对于所有数据，满足 $-10^9\\le l_i<r_i\\le10^9$。\n\n本题采用捆绑测试。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-8』颅脑损伤 2.0（加强版）", "background": "注意到本题特殊的时间限制。\n\n[普通版](https://www.luogu.com.cn/problem/P8591)。", "description": "给定 $n$ 条线段，第 $i$ 条是 $[l_i,r_i]$，将他们染成红色或黑色，要求：\n\n1. 任意两条红色不相交\n2. 任意一条黑色**至少**和一条红色相交。\n\n请最小化红色线段的长度和，并输出这个长度和。\n\n一条线段 $[l_i,r_i]$ 的长度定义为 $r_i-l_i$，两条线段 $[l_i,r_i],[l_j,r_j]$ 交**当且仅当**存在 $k\\in[l_i,r_i]$ 且 $k\\in[l_j,r_j]$。", "inputFormat": "第一行一行一个正整数，代表 $n$。\n\n接下来 $n$ 行，每行两个整数，代表 $l_i,r_i$，用空格隔开。", "outputFormat": "一行一个非负整数，代表最小的红色线段的长度和。", "hint": "**数据范围**\n\n|测试点编号|$n\\le$|\n| :----------: | :----------: |\n|$1\\sim10$|$5\\times 10^5$|\n\n对于所有数据，满足 $-10^9\\le l_i<r_i\\le10^9$。\n\n本题采用捆绑测试。", "locale": "zh-CN"}}}
{"pid": "P8593", "type": "P", "difficulty": 5, "samples": [["3 0\n1 1 -2\n1 2 -1\n1 3 1\n1 1 1", "0"], ["4 1\n-3 3 0\n1 3 1\n4 3 -4\n-9 3 -7\n1 3 2 3", "1"], ["见附件中的 missile3.in", "见附件中的 missile3.ans"], ["见附件中的 missile4.in", "见附件中的 missile4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "线段树", "树状数组", "2022", "洛谷原创", "O2优化"], "title": "「KDOI-02」一个弹的投", "background": "- 前置芝士：[平抛运动](https://baike.baidu.com/item/%E5%B9%B3%E6%8A%9B%E8%BF%90%E5%8A%A8/974021?fr=aladdin)\n~~（看到这个如果不想做可以直接开下一题）~~\n\n「这群该死的外星人，肯定是来抢夺新矿资源的！」  \n「这导弹什么鬼啊，研究不明白。」  \n无数的水滴型武器从苍穹之外落下，猛击着无知的生命。  ", "description": "经研究，该武器的运作方式是这样的。其中设重力方向为 $y$ 轴负半轴，$x$ 轴为地面，速度向右为正向左为负。  \n- 每颗导弹在 $(x_i,y_i)$ 的地方投放并悬浮，初始速度设置为 $v_i$。\n- 所有导弹投放完成后，于同一时刻开始照初始速度做平抛运动。其中 $g=9.8$。  \n- 每颗导弹与另一颗导弹碰撞时，不会改变原来的路线，并且将爆破威力 $p_i$ 增加 $1$，所有导弹初始时 $p_i=0$，**在接触到 $x$ 轴时碰撞也增加威力**。\n- 当武器落到 $x$ 轴时，会对落点造成 $p_i$ 点杀伤力。\n\n地面指挥部提前预测了导弹的落点，并部署了反制武器。第 $i$ 台武器能将第 $i$ 枚导弹在降落至地面后的威力值减少 $a_i$（至多减少到 $0$）。但是，由于技术限制，只能启动其中 $m$ 台反制武器。地面指挥官想知道，导弹造成的爆炸威力值总和最小为多少。", "inputFormat": "从标准输入中读入数据。\n\n输入一共包含 $n+2$ 行。\n\n第 $1$ 行输入两个正整数 $n,m$。\n\n第 $2$ 行到第 $n+1$ 行每行包含三个整数 $x_i,y_i,v_i$，表示第 $i$ 颗导弹的起点坐标和水平速度。 \n\n第 $n+2$ 行包含 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，含义见题目描述。", "outputFormat": "输出到标准输出。\n\n输出一行一个非负整数，表示答案。", "hint": "**【样例解释】**\n\n- **样例 1 解释：** \n\n\t每颗导弹的爆炸威力值都是 $0$。\n- **样例 2 解释：** \n\n\t四枚导弹的爆炸威力值分别是 $0,1,1,0$，启动第 $2$ 或第 $3$ 台反制武器，最后爆炸威力值的和为 $1$。\n    \n- **样例 4 说明：**\n\n   该样例满足测试点 $13\\sim16$ 的限制。\n***\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$0\\le a_i,m\\le n$，$0\\le |x_i|,y_i\\le10^9$，$0\\le |v_i|\\le10^6$。  \n\n**保证所有导弹起始坐标不相等。**\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim6$|$5000$|无|\n|$7\\sim10$|$12000$|无|\n|$11\\sim12$|$10^5$|有|\n|$13\\sim16$|$10^5$|无|\n|$17\\sim20$|$5\\times10^5$|无|\n\n特殊性质：保证所有 $y_i$ 均相同。  \n\n**【提示】**\n\n本题 I/O 量较大，推荐使用较快的 I/O 方式。\n\n附平抛运动落点公式：  \n$$x_t=x_i+v_i\\sqrt{\\dfrac{2y_i}g}$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-02」一个弹的投", "background": "- 前置芝士：[平抛运动](https://baike.baidu.com/item/%E5%B9%B3%E6%8A%9B%E8%BF%90%E5%8A%A8/974021?fr=aladdin)\n~~（看到这个如果不想做可以直接开下一题）~~\n\n「这群该死的外星人，肯定是来抢夺新矿资源的！」  \n「这导弹什么鬼啊，研究不明白。」  \n无数的水滴型武器从苍穹之外落下，猛击着无知的生命。  ", "description": "经研究，该武器的运作方式是这样的。其中设重力方向为 $y$ 轴负半轴，$x$ 轴为地面，速度向右为正向左为负。  \n- 每颗导弹在 $(x_i,y_i)$ 的地方投放并悬浮，初始速度设置为 $v_i$。\n- 所有导弹投放完成后，于同一时刻开始照初始速度做平抛运动。其中 $g=9.8$。  \n- 每颗导弹与另一颗导弹碰撞时，不会改变原来的路线，并且将爆破威力 $p_i$ 增加 $1$，所有导弹初始时 $p_i=0$，**在接触到 $x$ 轴时碰撞也增加威力**。\n- 当武器落到 $x$ 轴时，会对落点造成 $p_i$ 点杀伤力。\n\n地面指挥部提前预测了导弹的落点，并部署了反制武器。第 $i$ 台武器能将第 $i$ 枚导弹在降落至地面后的威力值减少 $a_i$（至多减少到 $0$）。但是，由于技术限制，只能启动其中 $m$ 台反制武器。地面指挥官想知道，导弹造成的爆炸威力值总和最小为多少。", "inputFormat": "从标准输入中读入数据。\n\n输入一共包含 $n+2$ 行。\n\n第 $1$ 行输入两个正整数 $n,m$。\n\n第 $2$ 行到第 $n+1$ 行每行包含三个整数 $x_i,y_i,v_i$，表示第 $i$ 颗导弹的起点坐标和水平速度。 \n\n第 $n+2$ 行包含 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，含义见题目描述。", "outputFormat": "输出到标准输出。\n\n输出一行一个非负整数，表示答案。", "hint": "**【样例解释】**\n\n- **样例 1 解释：** \n\n\t每颗导弹的爆炸威力值都是 $0$。\n- **样例 2 解释：** \n\n\t四枚导弹的爆炸威力值分别是 $0,1,1,0$，启动第 $2$ 或第 $3$ 台反制武器，最后爆炸威力值的和为 $1$。\n    \n- **样例 4 说明：**\n\n   该样例满足测试点 $13\\sim16$ 的限制。\n***\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$0\\le a_i,m\\le n$，$0\\le |x_i|,y_i\\le10^9$，$0\\le |v_i|\\le10^6$。  \n\n**保证所有导弹起始坐标不相等。**\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim6$|$5000$|无|\n|$7\\sim10$|$12000$|无|\n|$11\\sim12$|$10^5$|有|\n|$13\\sim16$|$10^5$|无|\n|$17\\sim20$|$5\\times10^5$|无|\n\n特殊性质：保证所有 $y_i$ 均相同。  \n\n**【提示】**\n\n本题 I/O 量较大，推荐使用较快的 I/O 方式。\n\n附平抛运动落点公式：  \n$$x_t=x_i+v_i\\sqrt{\\dfrac{2y_i}g}$$", "locale": "zh-CN"}}}
{"pid": "P8594", "type": "P", "difficulty": 6, "samples": [["4 3\n", "8\n"], ["15 5", "4015"], ["3050 1314", "670638639"], ["19198114 4154", "264122135"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2022", "洛谷原创", "O2优化", "组合数学", "排列组合"], "title": "「KDOI-02」一个仇的复", "background": "**本题由于 OI 赛制，关闭 subtask，可能会放部分错解高分，赛后将开启 subtask。**\n\n「听说那件事了吗？愿他们安息。」  \n「诶？你看，前面那座环形建筑是什么？」  \n「等我对比一下……啊哈！这就是他们的老巢！」  \n「捣毁了它，为牺牲的同志们报仇！！！」  \n死亡的宇宙射线指向了脆弱的文明，正准备发出它震耳欲聋的怒吼。", "description": "外星人的空间站是一个环形结构。不过，由于环的两段不连通，因此可以将其近似为 $2\\times n$ 的平面网格。目前，地方飞船有 $n$ 种不同规格的射线武器，作用范围是 $1\\times x$（$x$ 为正整数）的长方形。并且，武器可以往顺时针或逆时针方向旋转 $90^\\circ$。射线十分强力，只需一发便可与作用范围平面内的所有物体相湮灭。不过，只要宇宙射线的一部分作用范围落到目标外，便会一直延续到宇宙尽头，贪婪地吞噬沿途的一切。指挥官当然不想危害到无辜文明，他想知道，在这 $n$ 中武器中选出 $k$ 种，共有多少种不同的摧毁飞行器的方式。\n\n**【形式化题意】**\n\n你有 $1\\times x$（$x$ 为任意正整数）的矩形各无穷多个和一个 $2\\times n$ 的网格，请求出恰好选择其中 $k$ 个矩形（可以选择相同的矩形）**不重不漏**地铺满整个网格的方案数。矩形可以旋转。", "inputFormat": "从标准输入中读入数据。\n\n输入共包含一行两个正整数 $n,k$。", "outputFormat": "输出到标准输出。\n\n输出一行一个正整数，表示方案数，答案对 $998244353$ 取模。", "hint": "****\n**【样例解释】**\n+ **样例 1 解释：**  \n共有如下图所示的 $8$ 种方案。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/iko97ksh.png)\n\n***\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times 10^7$，$1\\le k\\le 5000$。\n\n| 测试点编号 | 分值 | $n$ | $k$ |\n| :----------: | :----------: | :----------: | :----------: |\n|$1\\sim 5$| $2$ | $\\leq5$ | $\\leq10$ |\n|$6\\sim 10$| $2$ | $\\leq1000$ | $=2n$ |\n|$11\\sim 15$| $2$ | $\\leq10^6$ | $\\leq3$ |\n|$16\\sim 20$| $4$ | $\\leq1000$ | $\\leq2n$ |\n|$21\\sim 25$| $4$ | $\\leq2\\times10^7$ | $\\leq100$ |\n|$26\\sim 30$| $4$ | $\\leq10^6$ | $\\leq5000$ |\n|$31\\sim 40$| $1$ | $\\leq2\\times10^7$ | $\\leq5000$ |\n\n注意：分值一列指的是单个测试点分值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-02」一个仇的复", "background": "**本题由于 OI 赛制，关闭 subtask，可能会放部分错解高分，赛后将开启 subtask。**\n\n「听说那件事了吗？愿他们安息。」  \n「诶？你看，前面那座环形建筑是什么？」  \n「等我对比一下……啊哈！这就是他们的老巢！」  \n「捣毁了它，为牺牲的同志们报仇！！！」  \n死亡的宇宙射线指向了脆弱的文明，正准备发出它震耳欲聋的怒吼。", "description": "外星人的空间站是一个环形结构。不过，由于环的两段不连通，因此可以将其近似为 $2\\times n$ 的平面网格。目前，地方飞船有 $n$ 种不同规格的射线武器，作用范围是 $1\\times x$（$x$ 为正整数）的长方形。并且，武器可以往顺时针或逆时针方向旋转 $90^\\circ$。射线十分强力，只需一发便可与作用范围平面内的所有物体相湮灭。不过，只要宇宙射线的一部分作用范围落到目标外，便会一直延续到宇宙尽头，贪婪地吞噬沿途的一切。指挥官当然不想危害到无辜文明，他想知道，在这 $n$ 中武器中选出 $k$ 种，共有多少种不同的摧毁飞行器的方式。\n\n**【形式化题意】**\n\n你有 $1\\times x$（$x$ 为任意正整数）的矩形各无穷多个和一个 $2\\times n$ 的网格，请求出恰好选择其中 $k$ 个矩形（可以选择相同的矩形）**不重不漏**地铺满整个网格的方案数。矩形可以旋转。", "inputFormat": "从标准输入中读入数据。\n\n输入共包含一行两个正整数 $n,k$。", "outputFormat": "输出到标准输出。\n\n输出一行一个正整数，表示方案数，答案对 $998244353$ 取模。", "hint": "****\n**【样例解释】**\n+ **样例 1 解释：**  \n共有如下图所示的 $8$ 种方案。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/iko97ksh.png)\n\n***\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times 10^7$，$1\\le k\\le 5000$。\n\n| 测试点编号 | 分值 | $n$ | $k$ |\n| :----------: | :----------: | :----------: | :----------: |\n|$1\\sim 5$| $2$ | $\\leq5$ | $\\leq10$ |\n|$6\\sim 10$| $2$ | $\\leq1000$ | $=2n$ |\n|$11\\sim 15$| $2$ | $\\leq10^6$ | $\\leq3$ |\n|$16\\sim 20$| $4$ | $\\leq1000$ | $\\leq2n$ |\n|$21\\sim 25$| $4$ | $\\leq2\\times10^7$ | $\\leq100$ |\n|$26\\sim 30$| $4$ | $\\leq10^6$ | $\\leq5000$ |\n|$31\\sim 40$| $1$ | $\\leq2\\times10^7$ | $\\leq5000$ |\n\n注意：分值一列指的是单个测试点分值。", "locale": "zh-CN"}}}
{"pid": "P8595", "type": "P", "difficulty": 5, "samples": [["3 1\n1 2", "1"], ["见附件中的 traffic2.in", "见附件中的 traffic2.ans"], ["见附件中的 traffic3.in", "见附件中的 traffic3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2022", "洛谷原创", "O2优化", "树形 DP"], "title": "「KDOI-02」一个网的路", "background": "「{$&%#$~!@ovo}（他们也有路网？有趣。）」  \n「{&%#@~akoio!@}（该干的活先干完吧，玩物丧志的东西待会再说。）」  \n「{!%_&#%@yw?}（您语文是不是没学好？）」  \n蔚蓝的天空下，人们还不知道危险的来临。", "description": "\n敌对文明被惹怒了。他们想用一种奇怪的方式摧毁地球的路网。地球的路网可以近似为一个含有 $n$ 个节点 $m$ 条无向边的**森林**。他们想用以下 $2$ 种操作：  \n\n- 炸毁一个城市 $u$ 向外连接的所有道路。\n- 在城市 $u,v$ 间新建一条道路。  \n\n来将地球上的路网改成效率最低的形式：一条链。现在你想知道，他们要达成目标最少需要操作几次。", "inputFormat": "从标准输入中读入数据。\n\n输入的第一行包含 $2$ 个正整数 $n,m$。\n\n接下来 $m$ 行，每行 $2$ 个正整数 $u,v$ ，表示在城市 $u,v$ 间有一条无向道路。", "outputFormat": "输出到标准输出。\n\n输出共一行一个整数，表示外星人的最少操作次数。", "hint": "**【样例解释】**\n\n+ **样例 1 解释：**  \n初始图：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/2z6ava49.png)  \n对城市 $2,3$ 进行操作二。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/lqhomfm5.png)  \n此时已经成为了一条链。\n\n***\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$0\\le m<n\\le2\\times10^6$ 且保证输入合法。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim2$|$10$|A|\n|$3\\sim6$|$500$|无|\n|$7\\sim8$|$10^4$|A|\n|$9$|$10^4$|B|\n|$10\\sim12$|$10^4$|无|\n|$13\\sim15$|$10^6$|无|\n|$16\\sim20$|$2\\times10^6$|无|\n\n+ 特殊性质 A：保证每个连通块都为二叉树。\n+ 特殊性质 B：保证每个顶点的度数不超过 $2$。\n\n**【提示】**\n\n本题 I/O 量较大，推荐使用较快的 I/O 方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-02」一个网的路", "background": "「{$&%#$~!@ovo}（他们也有路网？有趣。）」  \n「{&%#@~akoio!@}（该干的活先干完吧，玩物丧志的东西待会再说。）」  \n「{!%_&#%@yw?}（您语文是不是没学好？）」  \n蔚蓝的天空下，人们还不知道危险的来临。", "description": "\n敌对文明被惹怒了。他们想用一种奇怪的方式摧毁地球的路网。地球的路网可以近似为一个含有 $n$ 个节点 $m$ 条无向边的**森林**。他们想用以下 $2$ 种操作：  \n\n- 炸毁一个城市 $u$ 向外连接的所有道路。\n- 在城市 $u,v$ 间新建一条道路。  \n\n来将地球上的路网改成效率最低的形式：一条链。现在你想知道，他们要达成目标最少需要操作几次。", "inputFormat": "从标准输入中读入数据。\n\n输入的第一行包含 $2$ 个正整数 $n,m$。\n\n接下来 $m$ 行，每行 $2$ 个正整数 $u,v$ ，表示在城市 $u,v$ 间有一条无向道路。", "outputFormat": "输出到标准输出。\n\n输出共一行一个整数，表示外星人的最少操作次数。", "hint": "**【样例解释】**\n\n+ **样例 1 解释：**  \n初始图：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/2z6ava49.png)  \n对城市 $2,3$ 进行操作二。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/lqhomfm5.png)  \n此时已经成为了一条链。\n\n***\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$0\\le m<n\\le2\\times10^6$ 且保证输入合法。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim2$|$10$|A|\n|$3\\sim6$|$500$|无|\n|$7\\sim8$|$10^4$|A|\n|$9$|$10^4$|B|\n|$10\\sim12$|$10^4$|无|\n|$13\\sim15$|$10^6$|无|\n|$16\\sim20$|$2\\times10^6$|无|\n\n+ 特殊性质 A：保证每个连通块都为二叉树。\n+ 特殊性质 B：保证每个顶点的度数不超过 $2$。\n\n**【提示】**\n\n本题 I/O 量较大，推荐使用较快的 I/O 方式。", "locale": "zh-CN"}}}
{"pid": "P8596", "type": "P", "difficulty": 7, "samples": [["1\n5 6 9\n0 1\n0 0\n0 -1\n-1 0\n1 0\n1 2 10\n1 4 1\n2 3 8\n3 4 5\n3 5 1\n1 5 1", "1\n2 3 2"], ["见附件中的 intercept2.in", "见附件中的 intercept2.ans"], ["见附件中的 intercept3.in", "见附件中的 intercept3.ans"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "贪心", "2022", "洛谷原创", "Special Judge", "O2优化", "平面图", "最小环", "最小割"], "title": "「KDOI-02」一个截的拦", "background": "## 本题疑似是错题，详情见 [讨论](/discuss/1032942)。\n\n「{!@@(*@@￥';l]dw@)%)%&^_^}（可恶的人类！我一定会回来的！）」 \n\n它将飞船拉到了最高速度，试图离开这个充满人类的地狱。\n\n……", "description": "过了那么多年，外星人的飞船速度早已比不过地球的飞船。因此，它决定使用折跃点逃离。\n\n平面地图上有 $n$ 个折跃点，坐标分别为 $(x_i,y_i)$。某些折跃点之间有双向空间隧道连接，共 $m$ 条隧道，每条隧道分别连接折跃点 $u_i,v_i$，且激活该隧道需要消耗 $w_i$ 单位能量。**请注意，为了保证空间隧道之间互不干扰，对于任意两条空间隧道 $\\bm{i,j}$，都保证连接点 $\\bm{u_i,v_i}$ 与点 $\\bm{u_j,v_j}$ 的线段没有交点。保证不存在起点和终点都相同的两条空间隧道。**\n\n外星人的科技非常神奇，因此为了成功折跃离开，外星人必须经过地图上的所有折跃点 **至少一次**，它可以从任意一点开始折跃并从任意一点结束折跃，最终，外星人所花费的总能量为激活路径上所有隧道所消耗能量的 **按位或运算和**。经过两次或两次以上同一隧道只需激活一次该隧道。\n\n外星人的飞船上拥有 $x$ 单位能量，因此，它所选择的折跃方案花费的总能量不能超过 $x$。为了拦截外星人，地方可以执行以下操作任意多次：\n\n+ 选择一条连接 $u$ 和 $v$ 的双向隧道（你需要保证在点 $u$ 和 $v$ 之间存在双向隧道连接）；\n+ 将激活它所需要的能量增加 $w$（$w\\ge0$ 且操作后激活该通道所需要的能量不能超过 $2^{31}-1$）。\n\n其中，$u,v,w$ 都可以自行指定。**每次操作所需要的代价为 $w$ 的二进制表示下 $1$ 的个数。**（即 `c++` 中的 `__builtin_popcount()` 函数）\n\n为了赎罪，你需要设计一种操作方案，使得外星人无法通过折跃逃离，并最小化该方案所需要的代价。", "inputFormat": "从标准输入读入数据。\n\n输入的第一行包含 $1$ 个正整数 $W$，表示该测试点的评分参数。\n\n输入的第二行包含 $3$ 个整数 $n,m,x$，分别表示折跃点个数，双向隧道条数以及外星人飞船上拥有的能量。\n\n第 $3$ 至 $(n+2)$ 行，第 $(i+2)$ 行有 $2$ 个整数 $x_i,y_i$，表示第 $i$ 个折跃点的坐标。\n\n接下来 $m$ 行，每行 $3$ 个整数 $u_i,v_i,w_i$，表示每条双向隧道连接的两个折跃点和激活所需能量。", "outputFormat": "输出到标准输出。\n\n**本题采用自定义校验器（special judge）评测。**\n\n输出的第一行应包含一个非负整数 $k$，表示操作总次数。\n\n接下来 $k$ 行，每行一次操作，形如 $u~v~w$，表示将激活连接 $u$ 和 $v$ 的双向隧道所需能量增加 $w$。\n\n你需要保证 $0\\le k\\le 10000$，否则将被判定为不合法答案。", "hint": "**【样例解释】**\n+ **样例 1 解释：**  \n经过操作后的平面地图如下图所示（省略坐标轴）：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/cbg7sir6.png)  \n由于与 $2$ 号折跃点相连的空间隧道所需要的激活能量全部为 $10$，所以成功折跃所需要的能量至少为 $10$，因此外星人无法通过折跃逃离，代价为 $1$，显然不存在代价更小的操作方案。\n\n***\n\n**【评分方式】**\n\n对于每个测试点，如果你的操作方案不合法或使得外星人能够成功通过折跃逃离，你将在该测试点得到  $0$ 分。\n\n否则，设该测试点的评分参数为 $W$，标准答案的代价为 $a$，你的操作方案的代价为 $b$，则你的分数 $s$ 将由下列公式给出：\n\n$$\ns=\\max\\left(1-\\frac{b-a}{a}\\times W,0\\right)\\times10\n$$\n\n***\n\n**【数据范围】** \n\n对于 $100\\%$ 的数据，$12\\le n\\le 53280$，$n-1\\le m\\le 3n-6$，$0\\le x<2^{31}-1$，$0\\le|x_i|,|y_i|\\le3\\times10^4$，$0\\le w_i<2^{31}$，$1\\le W\\le 1000$。\n\n|测试点编号|$n=$|$m=$|$W=$|数据随机生成|\n|:--:|:--:|:--:|:--:|:--:|\n|$1$|$12$|$26$|$1000$|否|\n|$2$|$12$|$26$|$1$|是|\n|$3$|$200$|$579$|$2$|是|\n|$4$|$500$|$1482$|$5$|是|\n|$5$|$5000$|$14971$|$5$|否|\n|$6$|$5000$|$14962$|$1$|是|\n|$7$|$10656$|$30188$|$1000$|否|\n|$8$|$10656$|$30188$|$5$|否|\n|$9$|$53280$|$150960$|$1000$|否|\n|$10$|$53280$|$150960$|$1000$|否|\n\n***\n\n**【校验器】**\n\n为了方便测试，在 $\\texttt{intercept}$ 目录下我们下发了 $\\texttt{checker.cpp}$ 文件。你可以编译该文件，并使用它校验自己的输出文件。请注意它与最终评测时所用的校验器并不完全一致，你不需要也不应该关心其代码的具体内容。\n\n编译命令为：\n\n```plain\ng++ checker.cpp -o checker -std=c++14\n```\n\n使用方式为：\n\n```\n./checker <inputfile> <outputfile> <answerfile>\n```\n\n校验器可能会返回以下状态中的其中一种：\n\n+ $\\texttt{accepted}$：表示你的输出完全正确。\n+ $\\texttt{points } x$：表示你的输出部分正确，可以在该测试点得到比例为 $x$ 的分数。\n+ $\\texttt{wrong answer}$：表示你在该测试点得到 $0$ 分。\n\n\n对于所有非 $\\texttt{accepted}$ 状态，校验器接下来会输出以下信息中的一种：\n\n+ $\\texttt{A}$：表示你的输出不合法。\n+ $\\texttt{B x y}$：表示你的输出方案的代价为 $x$，标准答案为 $y$。\n+ $\\texttt{C}$：表示你的输出方案使得外星人能够成功通过折跃逃离。\n\n***\n\n**【后记】**\n\n他知道，他将永远离开家乡了。他仍记得，在倒转时空前，指挥官最后的那句叮嘱。他花了几乎半辈子，终于建立了新的基地，重整了军队。他的目的，就是为了防止这一切重蹈覆辙。现在，基地被毁了，他被困在这暗淡无光的星系里。他终于醒悟了，一切都是早已被决定好的。  \n「指挥官，对不起。」  \n「舱室将在十秒后自毁。十。九。八。七……」  \n举起手枪，对准自己太阳穴。  \n「六。五。四。三……」  \n随着砰的一声，他无力地倒下了，眼里黯淡无光。  \n「二。一。」  \n巨响过后，无人将被铭记。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-02」一个截的拦", "background": "## 本题疑似是错题，详情见 [讨论](/discuss/1032942)。\n\n「{!@@(*@@￥';l]dw@)%)%&^_^}（可恶的人类！我一定会回来的！）」 \n\n它将飞船拉到了最高速度，试图离开这个充满人类的地狱。\n\n……", "description": "过了那么多年，外星人的飞船速度早已比不过地球的飞船。因此，它决定使用折跃点逃离。\n\n平面地图上有 $n$ 个折跃点，坐标分别为 $(x_i,y_i)$。某些折跃点之间有双向空间隧道连接，共 $m$ 条隧道，每条隧道分别连接折跃点 $u_i,v_i$，且激活该隧道需要消耗 $w_i$ 单位能量。**请注意，为了保证空间隧道之间互不干扰，对于任意两条空间隧道 $\\bm{i,j}$，都保证连接点 $\\bm{u_i,v_i}$ 与点 $\\bm{u_j,v_j}$ 的线段没有交点。保证不存在起点和终点都相同的两条空间隧道。**\n\n外星人的科技非常神奇，因此为了成功折跃离开，外星人必须经过地图上的所有折跃点 **至少一次**，它可以从任意一点开始折跃并从任意一点结束折跃，最终，外星人所花费的总能量为激活路径上所有隧道所消耗能量的 **按位或运算和**。经过两次或两次以上同一隧道只需激活一次该隧道。\n\n外星人的飞船上拥有 $x$ 单位能量，因此，它所选择的折跃方案花费的总能量不能超过 $x$。为了拦截外星人，地方可以执行以下操作任意多次：\n\n+ 选择一条连接 $u$ 和 $v$ 的双向隧道（你需要保证在点 $u$ 和 $v$ 之间存在双向隧道连接）；\n+ 将激活它所需要的能量增加 $w$（$w\\ge0$ 且操作后激活该通道所需要的能量不能超过 $2^{31}-1$）。\n\n其中，$u,v,w$ 都可以自行指定。**每次操作所需要的代价为 $w$ 的二进制表示下 $1$ 的个数。**（即 `c++` 中的 `__builtin_popcount()` 函数）\n\n为了赎罪，你需要设计一种操作方案，使得外星人无法通过折跃逃离，并最小化该方案所需要的代价。", "inputFormat": "从标准输入读入数据。\n\n输入的第一行包含 $1$ 个正整数 $W$，表示该测试点的评分参数。\n\n输入的第二行包含 $3$ 个整数 $n,m,x$，分别表示折跃点个数，双向隧道条数以及外星人飞船上拥有的能量。\n\n第 $3$ 至 $(n+2)$ 行，第 $(i+2)$ 行有 $2$ 个整数 $x_i,y_i$，表示第 $i$ 个折跃点的坐标。\n\n接下来 $m$ 行，每行 $3$ 个整数 $u_i,v_i,w_i$，表示每条双向隧道连接的两个折跃点和激活所需能量。", "outputFormat": "输出到标准输出。\n\n**本题采用自定义校验器（special judge）评测。**\n\n输出的第一行应包含一个非负整数 $k$，表示操作总次数。\n\n接下来 $k$ 行，每行一次操作，形如 $u~v~w$，表示将激活连接 $u$ 和 $v$ 的双向隧道所需能量增加 $w$。\n\n你需要保证 $0\\le k\\le 10000$，否则将被判定为不合法答案。", "hint": "**【样例解释】**\n+ **样例 1 解释：**  \n经过操作后的平面地图如下图所示（省略坐标轴）：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/cbg7sir6.png)  \n由于与 $2$ 号折跃点相连的空间隧道所需要的激活能量全部为 $10$，所以成功折跃所需要的能量至少为 $10$，因此外星人无法通过折跃逃离，代价为 $1$，显然不存在代价更小的操作方案。\n\n***\n\n**【评分方式】**\n\n对于每个测试点，如果你的操作方案不合法或使得外星人能够成功通过折跃逃离，你将在该测试点得到  $0$ 分。\n\n否则，设该测试点的评分参数为 $W$，标准答案的代价为 $a$，你的操作方案的代价为 $b$，则你的分数 $s$ 将由下列公式给出：\n\n$$\ns=\\max\\left(1-\\frac{b-a}{a}\\times W,0\\right)\\times10\n$$\n\n***\n\n**【数据范围】** \n\n对于 $100\\%$ 的数据，$12\\le n\\le 53280$，$n-1\\le m\\le 3n-6$，$0\\le x<2^{31}-1$，$0\\le|x_i|,|y_i|\\le3\\times10^4$，$0\\le w_i<2^{31}$，$1\\le W\\le 1000$。\n\n|测试点编号|$n=$|$m=$|$W=$|数据随机生成|\n|:--:|:--:|:--:|:--:|:--:|\n|$1$|$12$|$26$|$1000$|否|\n|$2$|$12$|$26$|$1$|是|\n|$3$|$200$|$579$|$2$|是|\n|$4$|$500$|$1482$|$5$|是|\n|$5$|$5000$|$14971$|$5$|否|\n|$6$|$5000$|$14962$|$1$|是|\n|$7$|$10656$|$30188$|$1000$|否|\n|$8$|$10656$|$30188$|$5$|否|\n|$9$|$53280$|$150960$|$1000$|否|\n|$10$|$53280$|$150960$|$1000$|否|\n\n***\n\n**【校验器】**\n\n为了方便测试，在 $\\texttt{intercept}$ 目录下我们下发了 $\\texttt{checker.cpp}$ 文件。你可以编译该文件，并使用它校验自己的输出文件。请注意它与最终评测时所用的校验器并不完全一致，你不需要也不应该关心其代码的具体内容。\n\n编译命令为：\n\n```plain\ng++ checker.cpp -o checker -std=c++14\n```\n\n使用方式为：\n\n```\n./checker <inputfile> <outputfile> <answerfile>\n```\n\n校验器可能会返回以下状态中的其中一种：\n\n+ $\\texttt{accepted}$：表示你的输出完全正确。\n+ $\\texttt{points } x$：表示你的输出部分正确，可以在该测试点得到比例为 $x$ 的分数。\n+ $\\texttt{wrong answer}$：表示你在该测试点得到 $0$ 分。\n\n\n对于所有非 $\\texttt{accepted}$ 状态，校验器接下来会输出以下信息中的一种：\n\n+ $\\texttt{A}$：表示你的输出不合法。\n+ $\\texttt{B x y}$：表示你的输出方案的代价为 $x$，标准答案为 $y$。\n+ $\\texttt{C}$：表示你的输出方案使得外星人能够成功通过折跃逃离。\n\n***\n\n**【后记】**\n\n他知道，他将永远离开家乡了。他仍记得，在倒转时空前，指挥官最后的那句叮嘱。他花了几乎半辈子，终于建立了新的基地，重整了军队。他的目的，就是为了防止这一切重蹈覆辙。现在，基地被毁了，他被困在这暗淡无光的星系里。他终于醒悟了，一切都是早已被决定好的。  \n「指挥官，对不起。」  \n「舱室将在十秒后自毁。十。九。八。七……」  \n举起手枪，对准自己太阳穴。  \n「六。五。四。三……」  \n随着砰的一声，他无力地倒下了，眼里黯淡无光。  \n「二。一。」  \n巨响过后，无人将被铭记。", "locale": "zh-CN"}}}
{"pid": "P8597", "type": "P", "difficulty": 2, "samples": [["**********\no****o****", "5"], ["*o**o***o***\n*o***o**o***", "1"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["模拟", "贪心", "2013", "蓝桥杯省赛"], "title": "[蓝桥杯 2013 省 B] 翻硬币", "background": "小明正在玩一个“翻硬币”的游戏。", "description": "桌上放着排成一排的若干硬币。我们用 `*` 表示正面，用 `o` 表示反面（是小写字母，不是零），比如可能情形是 `**oo***oooo`，如果同时翻转左边的两个硬币，则变为 `oooo***oooo`。现在小明的问题是：如果已知了初始状态和要达到的目标状态，每次只能同时翻转相邻的两个硬币，那么对特定的局面，最少要翻动多少次呢？\n", "inputFormat": "两行等长字符串，分别表示初始状态和要达到的目标状态，每行长度小于 $1000$。\n\n数据保证一定存在至少一种方案可以从初始状态和要达到的目标状态。", "outputFormat": "一个整数，表示最小操作步数。", "hint": "source：蓝桥杯 2013 省 B 组 H 题", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 省 B] 翻硬币", "background": "小明正在玩一个“翻硬币”的游戏。", "description": "桌上放着排成一排的若干硬币。我们用 `*` 表示正面，用 `o` 表示反面（是小写字母，不是零），比如可能情形是 `**oo***oooo`，如果同时翻转左边的两个硬币，则变为 `oooo***oooo`。现在小明的问题是：如果已知了初始状态和要达到的目标状态，每次只能同时翻转相邻的两个硬币，那么对特定的局面，最少要翻动多少次呢？\n", "inputFormat": "两行等长字符串，分别表示初始状态和要达到的目标状态，每行长度小于 $1000$。\n\n数据保证一定存在至少一种方案可以从初始状态和要达到的目标状态。", "outputFormat": "一个整数，表示最小操作步数。", "hint": "source：蓝桥杯 2013 省 B 组 H 题", "locale": "zh-CN"}}}
{"pid": "P8598", "type": "P", "difficulty": 1, "samples": [["2\n5 6 8 11 9\n10 12 9", "7 9\n"], ["6\n164 178 108 109 180 155 141 159 104 182 179 118 137 184 115 124 125 129 168 196\n172 189 127 107 112 192 103 131 133 169 158\n128 102 110 148 139 157 140 195 197\n185 152 135 106 123 173 122 136 174 191 145 116 151 143 175 120 161 134 162 190\n149 138 142 146 199 126 165 156 153 193 144 166 170 121 171 132 101 194 187 188\n113 130 176 154 177 120 117 150 114 183 186 181 100 163 160 167 147 198 111 119", "105 120"]], "limits": {"time": [1000, 1000], "memory": [131072, 131072]}, "tags": ["2013", "蓝桥杯省赛"], "title": "[蓝桥杯 2013 省 AB] 错误票据", "background": "某涉密单位下发了某种票据，并要在年终全部收回。", "description": "每张票据有唯一的 ID 号，全年所有票据的 ID 号是连续的，但 ID 的开始数码是随机选定的。因为工作人员疏忽，在录入 ID 号的时候发生了一处错误，造成了某个 ID 断号，另外一个 ID 重号。\n\n你的任务是通过编程，找出断号的 ID 和重号的 ID。\n\n数据保证断号不可能发生在最大和最小号。\n", "inputFormat": "一个整数 $N(N<100)$ 表示后面数据行数，接着读入 $N$ 行数据，每行数据长度不等，是用空格分开的若干个（不大于 $100$ 个）正整数（不大于 $10^5$），每个整数代表一个 ID 号。", "outputFormat": "要求程序首先输入要求程序输出 $1$ 行，含两个整数 $m$，$n$，用空格分隔，其中，$m$ 表示断号 ID，$n$ 表示重号 ID。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 省 AB] 错误票据", "background": "某涉密单位下发了某种票据，并要在年终全部收回。", "description": "每张票据有唯一的 ID 号，全年所有票据的 ID 号是连续的，但 ID 的开始数码是随机选定的。因为工作人员疏忽，在录入 ID 号的时候发生了一处错误，造成了某个 ID 断号，另外一个 ID 重号。\n\n你的任务是通过编程，找出断号的 ID 和重号的 ID。\n\n数据保证断号不可能发生在最大和最小号。\n", "inputFormat": "一个整数 $N(N<100)$ 表示后面数据行数，接着读入 $N$ 行数据，每行数据长度不等，是用空格分开的若干个（不大于 $100$ 个）正整数（不大于 $10^5$），每个整数代表一个 ID 号。", "outputFormat": "要求程序首先输入要求程序输出 $1$ 行，含两个整数 $m$，$n$，用空格分隔，其中，$m$ 表示断号 ID，$n$ 表示重号 ID。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8599", "type": "P", "difficulty": 3, "samples": [["100", "11"], ["105", "6"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["2013", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2013 省 B] 带分数", "background": "", "description": "$100$ 可以表示为带分数的形式：$100 = 3 + \\frac{69258}{714}$。\n\n还可以表示为：$100 = 82 + \\frac{3546}{197}$。\n\n注意特征：带分数中，数字 $1$ ~ $9$ 分别出现且只出现一次（不包含 $0$）。\n\n类似这样的带分数，$100$ 有 $11$ 种表示法。\n\n\n\n\n", "inputFormat": "从标准输入读入一个正整数 $N(N<10^6)$。", "outputFormat": "程序输出数字 $N$ 用数码 $1$ ~ $9$ 不重复不遗漏地组成带分数表示的全部种数。\n\n注意：不要求输出每个表示，只统计有多少表示法！", "hint": "原题时限 3 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 省 B] 带分数", "background": "", "description": "$100$ 可以表示为带分数的形式：$100 = 3 + \\frac{69258}{714}$。\n\n还可以表示为：$100 = 82 + \\frac{3546}{197}$。\n\n注意特征：带分数中，数字 $1$ ~ $9$ 分别出现且只出现一次（不包含 $0$）。\n\n类似这样的带分数，$100$ 有 $11$ 种表示法。\n\n\n\n\n", "inputFormat": "从标准输入读入一个正整数 $N(N<10^6)$。", "outputFormat": "程序输出数字 $N$ 用数码 $1$ ~ $9$ 不重复不遗漏地组成带分数表示的全部种数。\n\n注意：不要求输出每个表示，只统计有多少表示法！", "hint": "原题时限 3 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN"}}}
{"pid": "P8600", "type": "P", "difficulty": 6, "samples": [["4\n3 2 4 1", "7"], ["5\n3 4 2 5 1", "9"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "线段树", "分治", "前缀和", "蓝桥杯省赛"], "title": "[蓝桥杯 2013 省 B] 连号区间数", "background": null, "description": "小明这些天一直在思考这样一个奇怪而有趣的问题：\n\n在 $1$ ~ $N$ 的某个全排列中有多少个连号区间呢？这里所说的连号区间的定义是：\n\n如果区间 $[L, R]$ 里的所有元素（即此排列的第 $L$个到第 $R$ 个元素）递增排序后能得到一个长度为 $R-L+1$ 的“连续”数列，则称这个区间连号区间。\n\n其中对“连续”数列的定义：\n\n记长度为 $m$ 的数列 $A$ 第 $i$ 个元素为 $A_i$，当 $\\forall i \\in [2,m]，a_i=a_{i-1}+1$ 时认为该数列为“连续”数列。\n\n当 $N$ 很小的时候，小明可以很快地算出答案，但是当 $N$ 变大的时候，问题就不是那么简单了，现在小明需要你的帮助。", "inputFormat": "第一行是一个正整数 $N (1 \\le N \\le 50000)$， 表示全排列的规模。\n\n第二行是 $N$ 个不同的数字 $P_i(1 \\le P_i \\le N)$， 表示这 $N$ 个数字的某一全排列。", "outputFormat": "输出一个整数，表示不同连号区间的数目。", "hint": "第一个用例中，有 $7$ 个连号区间分别是：$[1,1]$, $[1,2]$, $[1,3]$, $[1,4]$, $[2,2]$, $[3,3]$, $[4,4]$。\n\n第二个用例中，有 $9$ 个连号区间分别是：$[1,1]$, $[1,2]$, $[1,3]$, $[1,4]$, $[1,5]$, $[2,2]$, $[3,3]$, $[4,4]$, $[5,5]$。\n\n原题时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 省 B] 连号区间数", "background": null, "description": "小明这些天一直在思考这样一个奇怪而有趣的问题：\n\n在 $1$ ~ $N$ 的某个全排列中有多少个连号区间呢？这里所说的连号区间的定义是：\n\n如果区间 $[L, R]$ 里的所有元素（即此排列的第 $L$个到第 $R$ 个元素）递增排序后能得到一个长度为 $R-L+1$ 的“连续”数列，则称这个区间连号区间。\n\n其中对“连续”数列的定义：\n\n记长度为 $m$ 的数列 $A$ 第 $i$ 个元素为 $A_i$，当 $\\forall i \\in [2,m]，a_i=a_{i-1}+1$ 时认为该数列为“连续”数列。\n\n当 $N$ 很小的时候，小明可以很快地算出答案，但是当 $N$ 变大的时候，问题就不是那么简单了，现在小明需要你的帮助。", "inputFormat": "第一行是一个正整数 $N (1 \\le N \\le 50000)$， 表示全排列的规模。\n\n第二行是 $N$ 个不同的数字 $P_i(1 \\le P_i \\le N)$， 表示这 $N$ 个数字的某一全排列。", "outputFormat": "输出一个整数，表示不同连号区间的数目。", "hint": "第一个用例中，有 $7$ 个连号区间分别是：$[1,1]$, $[1,2]$, $[1,3]$, $[1,4]$, $[2,2]$, $[3,3]$, $[4,4]$。\n\n第二个用例中，有 $9$ 个连号区间分别是：$[1,1]$, $[1,2]$, $[1,3]$, $[1,4]$, $[1,5]$, $[2,2]$, $[3,3]$, $[4,4]$, $[5,5]$。\n\n原题时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN"}}}
{"pid": "P8601", "type": "P", "difficulty": 0, "samples": [["3 3\n10 1 52\n20 30 1\n1 2 3", "3"], ["4 3\n1 1 1 1\n1 30 80 2\n1 1 1 100", "10"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["搜索", "2013", "蓝桥杯省赛"], "title": "[蓝桥杯 2013 省 A] 剪格子（疑似错题）", "background": "本题**不保证**存在**可以通过满足本题数据范围的任意数据**做法。由于测试数据过水，可以通过此题的程序不一定完全正确（算法时间复杂度错误、或不保证正确性）。本题题目和数据仅供参考。本题不接受添加 hack 数据。\n\n本题为错题。**不建议尝试或提交本题。**[关于此类题目的详细内容](https://www.luogu.com.cn/paste/pf94n89x)\n\n本题的 Subtask 0 下的 3 个测试点为蓝桥杯数据。", "description": "如图 $1$ 所示，$3\\times 3$ 的格子中填写了一些整数。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hsfjsi38.png)\n\n我们沿着图中的红色线剪开，得到两个部分，每个部分的数字和都是 $60$。\n\n本题的要求就是请你编程判定：对给定的 $m\\times n$ 的格子中的整数，是否可以分割为两个部分，使得这两个区域的数字和相等。\n\n如果存在多种解答，请输出包含左上角格子的那个区域包含的格子的最小数目。   \n\n如果无法分割，则输出 $0$。", "inputFormat": "程序先读入两个整数 $m$，$n$ 用空格分割 $(m,n<10)$\n表示表格的宽度和高度。\n\n接下来是 $n$ 行，每行 $m$ 个正整数，用空格分开。每个整数不大于 $10000$。", "outputFormat": "程序输出：在所有解中，包含左上角的分割区可能包含的最小的格子数目。", "hint": "第二个用例中：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u5omt41.png)\n\n时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 省 A] 剪格子（疑似错题）", "background": "本题**不保证**存在**可以通过满足本题数据范围的任意数据**做法。由于测试数据过水，可以通过此题的程序不一定完全正确（算法时间复杂度错误、或不保证正确性）。本题题目和数据仅供参考。本题不接受添加 hack 数据。\n\n本题为错题。**不建议尝试或提交本题。**[关于此类题目的详细内容](https://www.luogu.com.cn/paste/pf94n89x)\n\n本题的 Subtask 0 下的 3 个测试点为蓝桥杯数据。", "description": "如图 $1$ 所示，$3\\times 3$ 的格子中填写了一些整数。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hsfjsi38.png)\n\n我们沿着图中的红色线剪开，得到两个部分，每个部分的数字和都是 $60$。\n\n本题的要求就是请你编程判定：对给定的 $m\\times n$ 的格子中的整数，是否可以分割为两个部分，使得这两个区域的数字和相等。\n\n如果存在多种解答，请输出包含左上角格子的那个区域包含的格子的最小数目。   \n\n如果无法分割，则输出 $0$。", "inputFormat": "程序先读入两个整数 $m$，$n$ 用空格分割 $(m,n<10)$\n表示表格的宽度和高度。\n\n接下来是 $n$ 行，每行 $m$ 个正整数，用空格分开。每个整数不大于 $10000$。", "outputFormat": "程序输出：在所有解中，包含左上角的分割区可能包含的最小的格子数目。", "hint": "第二个用例中：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3u5omt41.png)\n\n时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN"}}}
{"pid": "P8602", "type": "P", "difficulty": 3, "samples": [["5\n1 2 2\n1 3 1\n2 4 5\n2 5 4", "135"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072]}, "tags": ["2013", "蓝桥杯省赛"], "title": "[蓝桥杯 2013 省 A] 大臣的旅费", "background": "", "description": "很久以前，T 王国空前繁荣。为了更好地管理国家，王国修建了大量的快速路，用于连接首都和王国内的各大城市。\n\n为节省经费，T 国的大臣们经过思考，制定了一套优秀的修建方案，使得任何一个大城市都能从首都直接或者通过其他大城市间接到达。同时，如果不重复经过大城市，从首都到达每个大城市的方案都是唯一的。\n\nJ 是 T 国重要大臣，他巡查于各大城市之间，体察民情。所以，从一个城市马不停蹄地到另一个城市成了 J 最常做的事情。他有一个钱袋，用于存放往来城市间的路费。\n\n聪明的 J 发现，如果不在某个城市停下来修整，在连续行进过程中，他所花的路费与他已走过的距离有关，在走第 $x - 1$ 千米到第 $x$ 千米这一千米中（$x$ 是整数），他花费的路费是 $x+10$ 这么多。也就是说走 $1$ 千米花费 $11$，走 $2$ 千米要花费 $23$。\n\nJ 大臣想知道：他从某一个城市出发，中间不休息，到达另一个城市，所有可能花费的路费中最多是多少呢？\n", "inputFormat": "输入的第一行包含一个整数 $n(n \\le 10^5)$，表示包括首都在内的 $T$ 王国的城市数。\n\n城市从 $1$ 开始依次编号，$1$ 号城市为首都。\n\n接下来 $n-1$ 行，描述 $T$ 国的高速路（$T$ 国的高速路一定是 $n-1$ 条）。\n\n每行三个整数 $P_i,Q,D_i$，表示城市 $P_i$ 和城市 $Q_i$ 之间有一条高速路，长度为 $D_i(D_i \\le 1000)$ 千米。", "outputFormat": "输出一个整数，表示大臣J最多花费的路费是多少。\n\n", "hint": "样例解释：大臣 J 从城市 $4$ 到城市 $5$ 要花费 $135$ 的路费。\n\n时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 省 A] 大臣的旅费", "background": "", "description": "很久以前，T 王国空前繁荣。为了更好地管理国家，王国修建了大量的快速路，用于连接首都和王国内的各大城市。\n\n为节省经费，T 国的大臣们经过思考，制定了一套优秀的修建方案，使得任何一个大城市都能从首都直接或者通过其他大城市间接到达。同时，如果不重复经过大城市，从首都到达每个大城市的方案都是唯一的。\n\nJ 是 T 国重要大臣，他巡查于各大城市之间，体察民情。所以，从一个城市马不停蹄地到另一个城市成了 J 最常做的事情。他有一个钱袋，用于存放往来城市间的路费。\n\n聪明的 J 发现，如果不在某个城市停下来修整，在连续行进过程中，他所花的路费与他已走过的距离有关，在走第 $x - 1$ 千米到第 $x$ 千米这一千米中（$x$ 是整数），他花费的路费是 $x+10$ 这么多。也就是说走 $1$ 千米花费 $11$，走 $2$ 千米要花费 $23$。\n\nJ 大臣想知道：他从某一个城市出发，中间不休息，到达另一个城市，所有可能花费的路费中最多是多少呢？\n", "inputFormat": "输入的第一行包含一个整数 $n(n \\le 10^5)$，表示包括首都在内的 $T$ 王国的城市数。\n\n城市从 $1$ 开始依次编号，$1$ 号城市为首都。\n\n接下来 $n-1$ 行，描述 $T$ 国的高速路（$T$ 国的高速路一定是 $n-1$ 条）。\n\n每行三个整数 $P_i,Q,D_i$，表示城市 $P_i$ 和城市 $Q_i$ 之间有一条高速路，长度为 $D_i(D_i \\le 1000)$ 千米。", "outputFormat": "输出一个整数，表示大臣J最多花费的路费是多少。\n\n", "hint": "样例解释：大臣 J 从城市 $4$ 到城市 $5$ 要花费 $135$ 的路费。\n\n时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛", "locale": "zh-CN"}}}
{"pid": "P8603", "type": "P", "difficulty": 4, "samples": [["10 8 5 7 12 4", "...|-12\n10-|\n...|-8-|\n.......|...|-7\n.......|-5-|\n...........|-4"], ["10 5 20", "...|-20\n10-|\n...|-5"], ["5 10 20 8 4 7", ".......|-20\n..|-10-|\n..|....|-8-|\n..|........|-7\n5-|\n..|-4"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072]}, "tags": ["模拟", "树形数据结构", "2013", "蓝桥杯国赛"], "title": "[蓝桥杯 2013 国 C] 横向打印二叉树", "background": "二叉树可以用于排序。", "description": "其原理很简单：对于一个排序二叉树添加新节点时，先与根节点比较，若小则交给左子树继续处理，否则交给右子树。\n\n当遇到空子树时，则把该节点放入那个位置。\n\n比如，`10 8 5 7 12 4` 的输入顺序，应该建成二叉树如图 $1$ 所示。\n\n本题目要求：根据已知的数字，建立排序二叉树，并在标准输出中横向打印该二叉树。\n", "inputFormat": "输入数据为一行空格分开的 $N$ 个整数。$N<100$，每个数字不超过 $10000$。\n\n$N$ 并没有在输入中给出。\n\n输入数据中没有重复的数字。", "outputFormat": "输出该排序二叉树的横向表示,为了便于评卷程序比对空格的数目，请把空格用句点代替。", "hint": "样例解释 1：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4z42ybq4.png)\n\n时限 1 秒, 64M。蓝桥杯 2013 年第四届国赛", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 国 C] 横向打印二叉树", "background": "二叉树可以用于排序。", "description": "其原理很简单：对于一个排序二叉树添加新节点时，先与根节点比较，若小则交给左子树继续处理，否则交给右子树。\n\n当遇到空子树时，则把该节点放入那个位置。\n\n比如，`10 8 5 7 12 4` 的输入顺序，应该建成二叉树如图 $1$ 所示。\n\n本题目要求：根据已知的数字，建立排序二叉树，并在标准输出中横向打印该二叉树。\n", "inputFormat": "输入数据为一行空格分开的 $N$ 个整数。$N<100$，每个数字不超过 $10000$。\n\n$N$ 并没有在输入中给出。\n\n输入数据中没有重复的数字。", "outputFormat": "输出该排序二叉树的横向表示,为了便于评卷程序比对空格的数目，请把空格用句点代替。", "hint": "样例解释 1：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4z42ybq4.png)\n\n时限 1 秒, 64M。蓝桥杯 2013 年第四届国赛", "locale": "zh-CN"}}}
{"pid": "P8604", "type": "P", "difficulty": 2, "samples": [["7 6\n1 3\n2 3\n3 4\n3 5\n4 5\n5 6\n1 6", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2013", "广度优先搜索 BFS", "深度优先搜索 DFS", "蓝桥杯国赛"], "title": "[蓝桥杯 2013 国 C] 危险系数", "background": "抗日战争时期，冀中平原的地道战曾发挥重要作用。\n", "description": "地道的多个站点间有通道连接，形成了庞大的网络。但也有隐患，当敌人发现了某个站点后，其它站点间可能因此会失去联系。\n\n我们来定义一个危险系数 $DF(x,y)$：\n\n对于两个站点 $x$ 和 $y(x\\neq y),$ 如果能找到一个站点 $z$，当 $z$ 被敌人破坏后，$x$ 和 $y$ 不连通，那么我们称 $z$ 为关于 $x,y$ 的关键点。相应的，对于任意一对站点 $x$ 和 $y$，危险系数 $DF(x,y)$ 就表示为这两点之间的关键点个数。\n\n本题的任务是：已知网络结构，求两站点之间的危险系数。", "inputFormat": "输入数据第一行包含 $2$ 个整数 $n(2 \\le n \\le 1000)$，$m(0 \\le m \\le 2000)$，分别代表站点数，通道数。\n\n接下来 $m$ 行，每行两个整数 $u,v(1 \\le u,v \\le n,u\\neq v)$ 代表一条通道。\n\n最后 $1$ 行，两个数 $u,v$，代表询问两点之间的危险系数 $DF(u,v)$。", "outputFormat": "一个整数，如果询问的两点不连通则输出 $-1$。", "hint": "时限 1 秒, 64M。蓝桥杯 2013 年第四届国赛", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 国 C] 危险系数", "background": "抗日战争时期，冀中平原的地道战曾发挥重要作用。\n", "description": "地道的多个站点间有通道连接，形成了庞大的网络。但也有隐患，当敌人发现了某个站点后，其它站点间可能因此会失去联系。\n\n我们来定义一个危险系数 $DF(x,y)$：\n\n对于两个站点 $x$ 和 $y(x\\neq y),$ 如果能找到一个站点 $z$，当 $z$ 被敌人破坏后，$x$ 和 $y$ 不连通，那么我们称 $z$ 为关于 $x,y$ 的关键点。相应的，对于任意一对站点 $x$ 和 $y$，危险系数 $DF(x,y)$ 就表示为这两点之间的关键点个数。\n\n本题的任务是：已知网络结构，求两站点之间的危险系数。", "inputFormat": "输入数据第一行包含 $2$ 个整数 $n(2 \\le n \\le 1000)$，$m(0 \\le m \\le 2000)$，分别代表站点数，通道数。\n\n接下来 $m$ 行，每行两个整数 $u,v(1 \\le u,v \\le n,u\\neq v)$ 代表一条通道。\n\n最后 $1$ 行，两个数 $u,v$，代表询问两点之间的危险系数 $DF(u,v)$。", "outputFormat": "一个整数，如果询问的两点不连通则输出 $-1$。", "hint": "时限 1 秒, 64M。蓝桥杯 2013 年第四届国赛", "locale": "zh-CN"}}}
{"pid": "P8605", "type": "P", "difficulty": 2, "samples": [["3 3\n1 2\n2 3\n1 3", "6"], ["4 4\n1 2\n2 3\n3 1\n1 4", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["图论", "2013", "蓝桥杯国赛"], "title": "[蓝桥杯 2013 国 AC] 网络寻路", "background": null, "description": "$X$ 国的一个网络使用若干条线路连接若干个节点。节点间的通信是双向的。某重要数据包，为了安全起见，必须恰好被转发两次到达目的地。该包可能在任意一个节点产生，我们需要知道该网络中一共有多少种不同的转发路径。\n\n源地址和目标地址可以相同，但中间节点必须不同。\n\n如图 $1$ 所示的网络：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/asqw8dfi.png)\n\n$1 \\to 2 \\to 3 \\to 1$ 是允许的。\n\n$1 \\to 2 \\to 1 \\to 2$ 或者 $1 \\to 2 \\to 3 \\to 2$ 都是非法的。", "inputFormat": "输入数据的第一行为两个整数 $N,M$，分别表示节点个数和连接线路的条数 $(1 \\le N \\le 10000,0 \\le M \\le 100000)$。\n\n接下去有 $M$ 行，每行为两个整数 $u$ 和 $v$，表示节点 $u$ 和 $v$ 联通 $(1 \\le u,v \\le N,u \\neq v)$。\n\n输入数据保证任意两点最多只有一条边连接，并且没有自己连自己的边，即不存在重边和自环。", "outputFormat": "输出一个整数，表示满足要求的路径条数。", "hint": "时限 1 秒，空间限制 64M。蓝桥杯 2013 年第四届国赛\n\n\n------------\n2024/1/28 添加一组 hack 数据", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2013 国 AC] 网络寻路", "background": null, "description": "$X$ 国的一个网络使用若干条线路连接若干个节点。节点间的通信是双向的。某重要数据包，为了安全起见，必须恰好被转发两次到达目的地。该包可能在任意一个节点产生，我们需要知道该网络中一共有多少种不同的转发路径。\n\n源地址和目标地址可以相同，但中间节点必须不同。\n\n如图 $1$ 所示的网络：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/asqw8dfi.png)\n\n$1 \\to 2 \\to 3 \\to 1$ 是允许的。\n\n$1 \\to 2 \\to 1 \\to 2$ 或者 $1 \\to 2 \\to 3 \\to 2$ 都是非法的。", "inputFormat": "输入数据的第一行为两个整数 $N,M$，分别表示节点个数和连接线路的条数 $(1 \\le N \\le 10000,0 \\le M \\le 100000)$。\n\n接下去有 $M$ 行，每行为两个整数 $u$ 和 $v$，表示节点 $u$ 和 $v$ 联通 $(1 \\le u,v \\le N,u \\neq v)$。\n\n输入数据保证任意两点最多只有一条边连接，并且没有自己连自己的边，即不存在重边和自环。", "outputFormat": "输出一个整数，表示满足要求的路径条数。", "hint": "时限 1 秒，空间限制 64M。蓝桥杯 2013 年第四届国赛\n\n\n------------\n2024/1/28 添加一组 hack 数据", "locale": "zh-CN"}}}
