{"pid": "P14278", "type": "P", "difficulty": 5, "samples": [["3\n1 1 1\n2 2 2\n3 3 3", "0\n0\n9\n0\n0"], ["5\n1 4 1 3 5\n2 1 4 1 2\n5 1 1 4 5\n3 5 1 1 2\n4 3 5 1 1", "2\n4\n9\n0\n0 \n1\n1\n8\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2014", "树状数组", "ROI（俄罗斯）"], "title": "[ROI 2014 Day2] 健康饮食", "background": "**译自 [ROI 2014](https://neerc.ifmo.ru/school/archive/2013-2014.html) Day2 T3.** ***[Здоровое питание](https://neerc.ifmo.ru/school/archive/2013-2014/ru-olymp-roi-2014-statement-day2.pdf)***", "description": "某大学的学生城规划为一个 $n \\times n$ 的正方形网格，每个格子里都有一栋建筑。如果两栋建筑位于有公共边的相邻格子中，它们之间就有一条连通的通道。在正方形的**左上角**是学生宿舍，在**右下角**是教学楼。每栋建筑中（包括宿舍与教学楼）都设有一台自动售货机，每台售货机只出售一种食品，例如：仅售咖啡，或仅售肉馅饼等。学生每天都会从宿舍出发，沿着通道前往教学楼，并选择一条**最短路径**。\n\n校方希望研究学生在行进过程中购买食品的多样性。对于每一台售货机 $A_{i,j}$，希望找到一条**经过该售货机的最短路径**，并且该路径上与 $A_{i,j}$ 出售相同食品的售货机数量尽可能多。该数量称为售货机 $A_{i,j}$ 的**冗余度**。已知售货机 $A_{1,1}$ 位于宿舍内，而 $A_{n,n}$ 位于教学楼内。\n\n请编写程序，根据各售货机所售食品的信息，统计冗余度为 $1, 2, \\ldots, 2n - 1$ 的售货机各有多少台。", "inputFormat": "第一行包含一个整数 $n$（$2 \\leqslant n \\leqslant 1500$）。\n\n接下来的 $n$ 行，每行包含 $n$ 个整数。第 $i$ 行第 $j$ 个数表示售货机 $A_{i,j}$ 所售食品的编号。食品编号的取值范围为 $1$ 到 $n^2$。", "outputFormat": "输出共 $(2n - 1)$ 个整数，第 $k$ 个数表示冗余度等于 $k$ 的售货机数量（$k = 1, 2, \\ldots, 2n - 1$）。", "hint": "本题共 50 个测试，每个测试独立计分，每个测试 2 分。测试中使用的 $n$ 值如下表所示：\n\n| 测试编号 | $n$ | 测试编号 | $n$ | 测试编号 | $n$ | 测试编号 | $n$ | 测试编号 | $n$ |\n|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|\n| 1 | 2 | 11 | 50 | 21 | 200 | 31 | 550 | 41 | 1050 |\n| 2 | 4 | 12 | 60 | 22 | 225 | 32 | 600 | 42 | 1100 |\n| 3 | 6 | 13 | 70 | 23 | 250 | 33 | 650 | 43 | 1150 |\n| 4 | 8 | 14 | 80 | 24 | 275 | 34 | 700 | 44 | 1200 |\n| 5 | 10 | 15 | 90 | 25 | 300 | 35 | 750 | 45 | 1250 |\n| 6 | 15 | 16 | 100 | 26 | 325 | 36 | 800 | 46 | 1300 |\n| 7 | 20 | 17 | 120 | 27 | 350 | 37 | 850 | 47 | 1350 |\n| 8 | 25 | 18 | 140 | 28 | 400 | 38 | 900 | 48 | 1400 |\n| 9 | 30 | 19 | 160 | 29 | 450 | 39 | 950 | 49 | 1450 |\n| 10 | 40 | 20 | 180 | 30 | 500 | 40 | 1000 | 50 | 1500 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2014 Day2] 健康饮食", "background": "**译自 [ROI 2014](https://neerc.ifmo.ru/school/archive/2013-2014.html) Day2 T3.** ***[Здоровое питание](https://neerc.ifmo.ru/school/archive/2013-2014/ru-olymp-roi-2014-statement-day2.pdf)***", "description": "某大学的学生城规划为一个 $n \\times n$ 的正方形网格，每个格子里都有一栋建筑。如果两栋建筑位于有公共边的相邻格子中，它们之间就有一条连通的通道。在正方形的**左上角**是学生宿舍，在**右下角**是教学楼。每栋建筑中（包括宿舍与教学楼）都设有一台自动售货机，每台售货机只出售一种食品，例如：仅售咖啡，或仅售肉馅饼等。学生每天都会从宿舍出发，沿着通道前往教学楼，并选择一条**最短路径**。\n\n校方希望研究学生在行进过程中购买食品的多样性。对于每一台售货机 $A_{i,j}$，希望找到一条**经过该售货机的最短路径**，并且该路径上与 $A_{i,j}$ 出售相同食品的售货机数量尽可能多。该数量称为售货机 $A_{i,j}$ 的**冗余度**。已知售货机 $A_{1,1}$ 位于宿舍内，而 $A_{n,n}$ 位于教学楼内。\n\n请编写程序，根据各售货机所售食品的信息，统计冗余度为 $1, 2, \\ldots, 2n - 1$ 的售货机各有多少台。", "inputFormat": "第一行包含一个整数 $n$（$2 \\leqslant n \\leqslant 1500$）。\n\n接下来的 $n$ 行，每行包含 $n$ 个整数。第 $i$ 行第 $j$ 个数表示售货机 $A_{i,j}$ 所售食品的编号。食品编号的取值范围为 $1$ 到 $n^2$。", "outputFormat": "输出共 $(2n - 1)$ 个整数，第 $k$ 个数表示冗余度等于 $k$ 的售货机数量（$k = 1, 2, \\ldots, 2n - 1$）。", "hint": "本题共 50 个测试，每个测试独立计分，每个测试 2 分。测试中使用的 $n$ 值如下表所示：\n\n| 测试编号 | $n$ | 测试编号 | $n$ | 测试编号 | $n$ | 测试编号 | $n$ | 测试编号 | $n$ |\n|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|\n| 1 | 2 | 11 | 50 | 21 | 200 | 31 | 550 | 41 | 1050 |\n| 2 | 4 | 12 | 60 | 22 | 225 | 32 | 600 | 42 | 1100 |\n| 3 | 6 | 13 | 70 | 23 | 250 | 33 | 650 | 43 | 1150 |\n| 4 | 8 | 14 | 80 | 24 | 275 | 34 | 700 | 44 | 1200 |\n| 5 | 10 | 15 | 90 | 25 | 300 | 35 | 750 | 45 | 1250 |\n| 6 | 15 | 16 | 100 | 26 | 325 | 36 | 800 | 46 | 1300 |\n| 7 | 20 | 17 | 120 | 27 | 350 | 37 | 850 | 47 | 1350 |\n| 8 | 25 | 18 | 140 | 28 | 400 | 38 | 900 | 48 | 1400 |\n| 9 | 30 | 19 | 160 | 29 | 450 | 39 | 950 | 49 | 1450 |\n| 10 | 40 | 20 | 180 | 30 | 500 | 40 | 1000 | 50 | 1500 |", "locale": "zh-CN"}}}
{"pid": "P14279", "type": "P", "difficulty": 6, "samples": [["4\n1 5\n2 7\n7 10\n1 11\n3\n1 1 1\n4 1 2\n7 2 2 3", "2 1 3 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "线段树", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2014 Day2] 乌拉尔高速公路", "background": "**译自 [ROI 2014](https://neerc.ifmo.ru/school/archive/2013-2014.html) Day2 T4.** ***[Магистраль «Урал»](https://neerc.ifmo.ru/school/archive/2013-2014/ru-olymp-roi-2014-statement-day2.pdf)***", "description": "计划修建一条名为“乌拉尔”的新高速公路。高速公路的耐久性取决于其下方所分布的岩层结构。一个岩层是由同一种岩石组成的地质体。\n\n在未来的高速公路下方共有 $n$ 层水平岩层。地质勘探确定了每一层岩层在高速公路下方的起点与终点位置。然而，这些岩层在深度方向上的顺序尚无法确定。\n\n在高速公路沿线的若干位置进行了垂直钻探。每口钻井穿过了钻井位置下方的若干上部岩层。对于每口钻井，已知钻井从地表向下依次穿过的岩层顺序。如果某层岩石没有出现在该钻井中，说明它位于钻井的底部以下。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/2jo8r2e7.png)\n:::\n\n你的任务是编写一个程序，根据钻探数据，确定一种可能的岩层深度顺序，使其不与已知的地质信息相矛盾。", "inputFormat": "第一行包含一个整数 $n$ —— 岩层的数量。岩层编号为 $1$ 到 $n$，顺序任意。\n\n接下来的 $n$ 行中，第 $i$ 行包含两个整数 $l_i$ 和 $r_i$（$0 \\leqslant l_i < r_i \\leqslant 10^9$），表示第 $i$ 层岩石在高速公路下方的起点与终点距离。\n\n接下来一行包含一个整数 $m$ —— 钻井的数量。\n\n随后 $m$ 行描述每口钻井的勘探结果。每行格式如下：\n\n$x\\ k\\ s_1\\ s_2\\ \\ldots\\ s_k$\n\n其中：\n\n- $x$ —— 钻井的位置（距公路起点的距离，$0 \\leqslant x \\leqslant 10^9$）；  \n- $k$ —— 该钻井中穿过的岩层数（$0 \\leqslant k \\leqslant n$）；  \n- $s_1, s_2, \\ldots, s_k$ —— 钻井自上而下依次穿过的岩层编号。\n\n钻井按 $x$ 坐标递增顺序给出。\n\n保证至少存在一个满足条件的解。", "outputFormat": "输出一行，包含 $n$ 个整数 $p_1, p_2, \\ldots, p_n$，表示一种可能的岩层从上到下的顺序。每个岩层编号从 $1$ 到 $n$，且在序列中恰好出现一次。\n\n并且应满足以下条件：对于岩层编号 $p_j$，在整个区间中，它**不会出现在**岩层 $p_1, p_2, \\ldots, p_{j-1}$ **之上**，也不会出现在岩层 $p_{j+1}, \\ldots, p_n$ **之下**。\n\n若存在多种可能的排列，输出任意一种即可。", "hint": "### 样例解释\n\n题目中的示意图对应此样例。\n\n对于该样例，答案 `2 3 1 4` 也是正确的。\n\n请注意，样例测试不属于子任务 1 的范围。  \n\n### 数据范围\n\n本题包含五个子任务。每个子任务的测试集独立计分，只有当该组所有测试均通过时，才能获得该子任务的分数。\n\n| 子任务 | 限制条件 | 分值 |\n|:--:|:--:|:--:|\n| 1 | $1 \\leqslant n, m \\leqslant 1000$，每口钻井都穿过了其位置下方的所有岩层 | 20 |\n| 2 | $1 \\leqslant n, m \\leqslant 1000$ | 20 |\n| 3 | $1 \\leqslant n, m \\leqslant 30\\,000$，钻井中岩层编号的总数不超过 $10^6$ | 20 |\n| 4 | $1 \\leqslant n, m \\leqslant 10^5$，钻井中岩层编号的总数不超过 $10^5$ | 20 |\n| 5 | $1 \\leqslant n, m \\leqslant 10^5$，钻井中岩层编号的总数不超过 $10^6$ | 20 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2014 Day2] 乌拉尔高速公路", "background": "**译自 [ROI 2014](https://neerc.ifmo.ru/school/archive/2013-2014.html) Day2 T4.** ***[Магистраль «Урал»](https://neerc.ifmo.ru/school/archive/2013-2014/ru-olymp-roi-2014-statement-day2.pdf)***", "description": "计划修建一条名为“乌拉尔”的新高速公路。高速公路的耐久性取决于其下方所分布的岩层结构。一个岩层是由同一种岩石组成的地质体。\n\n在未来的高速公路下方共有 $n$ 层水平岩层。地质勘探确定了每一层岩层在高速公路下方的起点与终点位置。然而，这些岩层在深度方向上的顺序尚无法确定。\n\n在高速公路沿线的若干位置进行了垂直钻探。每口钻井穿过了钻井位置下方的若干上部岩层。对于每口钻井，已知钻井从地表向下依次穿过的岩层顺序。如果某层岩石没有出现在该钻井中，说明它位于钻井的底部以下。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/2jo8r2e7.png)\n:::\n\n你的任务是编写一个程序，根据钻探数据，确定一种可能的岩层深度顺序，使其不与已知的地质信息相矛盾。", "inputFormat": "第一行包含一个整数 $n$ —— 岩层的数量。岩层编号为 $1$ 到 $n$，顺序任意。\n\n接下来的 $n$ 行中，第 $i$ 行包含两个整数 $l_i$ 和 $r_i$（$0 \\leqslant l_i < r_i \\leqslant 10^9$），表示第 $i$ 层岩石在高速公路下方的起点与终点距离。\n\n接下来一行包含一个整数 $m$ —— 钻井的数量。\n\n随后 $m$ 行描述每口钻井的勘探结果。每行格式如下：\n\n$x\\ k\\ s_1\\ s_2\\ \\ldots\\ s_k$\n\n其中：\n\n- $x$ —— 钻井的位置（距公路起点的距离，$0 \\leqslant x \\leqslant 10^9$）；  \n- $k$ —— 该钻井中穿过的岩层数（$0 \\leqslant k \\leqslant n$）；  \n- $s_1, s_2, \\ldots, s_k$ —— 钻井自上而下依次穿过的岩层编号。\n\n钻井按 $x$ 坐标递增顺序给出。\n\n保证至少存在一个满足条件的解。", "outputFormat": "输出一行，包含 $n$ 个整数 $p_1, p_2, \\ldots, p_n$，表示一种可能的岩层从上到下的顺序。每个岩层编号从 $1$ 到 $n$，且在序列中恰好出现一次。\n\n并且应满足以下条件：对于岩层编号 $p_j$，在整个区间中，它**不会出现在**岩层 $p_1, p_2, \\ldots, p_{j-1}$ **之上**，也不会出现在岩层 $p_{j+1}, \\ldots, p_n$ **之下**。\n\n若存在多种可能的排列，输出任意一种即可。", "hint": "### 样例解释\n\n题目中的示意图对应此样例。\n\n对于该样例，答案 `2 3 1 4` 也是正确的。\n\n请注意，样例测试不属于子任务 1 的范围。  \n\n### 数据范围\n\n本题包含五个子任务。每个子任务的测试集独立计分，只有当该组所有测试均通过时，才能获得该子任务的分数。\n\n| 子任务 | 限制条件 | 分值 |\n|:--:|:--:|:--:|\n| 1 | $1 \\leqslant n, m \\leqslant 1000$，每口钻井都穿过了其位置下方的所有岩层 | 20 |\n| 2 | $1 \\leqslant n, m \\leqslant 1000$ | 20 |\n| 3 | $1 \\leqslant n, m \\leqslant 30\\,000$，钻井中岩层编号的总数不超过 $10^6$ | 20 |\n| 4 | $1 \\leqslant n, m \\leqslant 10^5$，钻井中岩层编号的总数不超过 $10^5$ | 20 |\n| 5 | $1 \\leqslant n, m \\leqslant 10^5$，钻井中岩层编号的总数不超过 $10^6$ | 20 |", "locale": "zh-CN"}}}
{"pid": "P14280", "type": "P", "difficulty": 0, "samples": [["7\n2 3\n4 5\n6 7\n0 0\n0 0\n0 0\n0 0", "1 3 2 7 5 6 4\n7 1 5 3 2 6 4"], ["2\n0 2\n0 0", "impossible"], ["3\n2 0\n3 0\n0 0", "2 3 1\n3 2 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "WF"], "title": "[ICPC 2025 WF] A-Skew-ed Reasoning", "background": "", "description": "The following is based on a true story – the names have been changed because...well, because you always change names in stories like this one.\n\nProfessor Taylor Swift is grading a homework assignment on integer skew heaps. A skew heap is a binary tree with an integer stored in each node such that the value in any node is less than or equal to the values in any of its children. Note that the skew heap need not be a perfect binary tree; that is, the left and/or right subtree of any node may be empty.\n\nInserting a value $ x $ into a skew heap $ H $ is done using the following recursive procedure:\n\n- If $ H $ is empty, make $ H $ a skew heap consisting of a single node containing $ x $.\n- Otherwise, let $ y $ be the value in the root of $ H $.\n    - If $ y < x $, swap the two children of the root and recursively insert $ x $ into the new left subtree.\n    - If $ y \\ge x $, create a new node with value $ x $ and make $ H $ the left subtree of this node.\n\n:::align{center}\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/caazjasf.png)\n\n  Figure A.1: Example of inserting the value $7$ into a skew heap. The nodes storing 4 and 5 (marked in blue) have their children swapped, while the node storing $11$ becomes the left child of the newly inserted node (marked in red).\n:::\n\nNow, back to Professor Swift. The homework problem she has assigned asks the students to show the heap that results from inserting a given permutation of the numbers from $ 1 $ to $ n $, in the given order, into an empty heap. Surprisingly, some of the students have wrong answers! That got Professor Swift wondering: For a given heap, is there an input permutation that would have produced this heap? And if so, what are the lexicographically minimal and maximal such input permutations?", "inputFormat": "The first line of input contains an integer $ n $ ($ 1 \\le n \\le 2 \\cdot 10^5 $), the number of nodes in the tree. These nodes contain the numbers from $ 1 $ to $ n $ exactly. This is followed by $ n $ lines, the $ i $th of which contains two integers $ l_i $ and $ r_i $ ($ i < l_i \\le n $ or $ l_i = 0 $; $ i < r_i \\le n $ or $ r_i = 0 $), describing the values of the left and right children of the node storing $ i $, where a value of $ 0 $ is used to indicate that the corresponding child does not exist. It is guaranteed that this data describes a binary tree.", "outputFormat": "Output the lexicographically minimal input permutation that produces the given tree under the insertion method for skew heaps, followed by the lexicographically maximal such input permutation. These permutations may coincide, in which case you still need to output both. If no input permutation producing the given tree exists, output `impossible`.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] A-Skew-ed Reasoning", "background": "", "description": "The following is based on a true story – the names have been changed because...well, because you always change names in stories like this one.\n\nProfessor Taylor Swift is grading a homework assignment on integer skew heaps. A skew heap is a binary tree with an integer stored in each node such that the value in any node is less than or equal to the values in any of its children. Note that the skew heap need not be a perfect binary tree; that is, the left and/or right subtree of any node may be empty.\n\nInserting a value $ x $ into a skew heap $ H $ is done using the following recursive procedure:\n\n- If $ H $ is empty, make $ H $ a skew heap consisting of a single node containing $ x $.\n- Otherwise, let $ y $ be the value in the root of $ H $.\n    - If $ y < x $, swap the two children of the root and recursively insert $ x $ into the new left subtree.\n    - If $ y \\ge x $, create a new node with value $ x $ and make $ H $ the left subtree of this node.\n\n:::align{center}\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/caazjasf.png)\n\n  Figure A.1: Example of inserting the value $7$ into a skew heap. The nodes storing 4 and 5 (marked in blue) have their children swapped, while the node storing $11$ becomes the left child of the newly inserted node (marked in red).\n:::\n\nNow, back to Professor Swift. The homework problem she has assigned asks the students to show the heap that results from inserting a given permutation of the numbers from $ 1 $ to $ n $, in the given order, into an empty heap. Surprisingly, some of the students have wrong answers! That got Professor Swift wondering: For a given heap, is there an input permutation that would have produced this heap? And if so, what are the lexicographically minimal and maximal such input permutations?", "inputFormat": "The first line of input contains an integer $ n $ ($ 1 \\le n \\le 2 \\cdot 10^5 $), the number of nodes in the tree. These nodes contain the numbers from $ 1 $ to $ n $ exactly. This is followed by $ n $ lines, the $ i $th of which contains two integers $ l_i $ and $ r_i $ ($ i < l_i \\le n $ or $ l_i = 0 $; $ i < r_i \\le n $ or $ r_i = 0 $), describing the values of the left and right children of the node storing $ i $, where a value of $ 0 $ is used to indicate that the corresponding child does not exist. It is guaranteed that this data describes a binary tree.", "outputFormat": "Output the lexicographically minimal input permutation that produces the given tree under the insertion method for skew heaps, followed by the lexicographically maximal such input permutation. These permutations may coincide, in which case you still need to output both. If no input permutation producing the given tree exists, output `impossible`.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] A-Skew-ed Reasoning", "background": null, "description": "以下故事基于真实事件——嗯，其中姓名已作修改，毕竟这类故事总是要改名字的。\n\nTaylor Swift 教授正在批改一份关于整数斜堆（skiff heap）的作业。斜堆是一种二叉树，每个节点存储一个整数，且任意节点的值都小于或等于其所有子节点的值。注意斜堆不必是完全二叉树；也就是说，任意节点的左子树和（或）右子树可能为空。\n\n将值 $ x $ 插入斜堆 $ H $ 的递归过程如下：\n\n- 如果 $ H $ 为空，则将 $ H $ 变为仅包含一个值为 $ x $ 的节点的斜堆。\n- 否则，设 $ y $ 为 $ H $ 根节点的值。\n    - 如果 $ y < x $，则交换根节点的两个子树，并将 $ x $ 递归插入新的左子树。\n    - 如果 $ y \\ge x $，则创建一个值为 $ x $ 的新节点，并将 $ H $ 作为该新节点的左子树。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/caazjasf.png)\n\n  图 A.1：将值 $7$ 插入斜堆的示例。存储值 4 和 5 的节点（蓝色标记）交换了它们的子节点，而存储值 $11$ 的节点成为新插入节点（红色标记）的左子节点。\n\n现在回到 Swift 教授的故事。她布置的作业要求学生展示将数字 $ 1 $ 到 $ n $ 的某个给定排列按给定顺序依次插入空堆后得到的堆结构。令人惊讶的是，有些学生的答案是错误的！这让 Swift 教授思考：对于一个给定的堆，是否存在一个输入排列能够生成这个堆？如果存在，字典序最小和最大的输入排列分别是什么？", "inputFormat": "第一行输入包含一个整数 $ n $（$ 1 \\le n \\le 2 \\cdot 10^5 $），表示树中的节点数。这些节点恰好包含从 $ 1 $ 到 $ n $ 的数字。\n\n接下来是 $ n $ 行，第 $ i $ 行包含两个整数 $ l_i $ 和 $ r_i $（$ i < l_i \\le n $ 或 $ l_i = 0 $；$ i < r_i \\le n $ 或 $ r_i = 0 $），描述了存储值 $ i $ 的节点的左孩子和右孩子的值，其中 $ 0 $ 表示对应的孩子不存在。数据保证描述了一棵二叉树。", "outputFormat": "输出在斜堆插入方法下能够产生给定树的字典序最小的输入排列，然后是字典序最大的输入排列。这两个排列可能相同，如果相同你仍然需要输出两者。如果不存在能够产生给定树的输入排列，输出 `impossible`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P14281", "type": "P", "difficulty": 7, "samples": [["1\n5", "second"], ["2\n12\n17", "first 8\nfirst 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2025 WF] Blackboard Game【暂无 spj】", "background": "", "description": "To help her elementary school students understand the concept of prime factorization, Aisha has invented a game for them to play on the blackboard. The rules of the game are as follows.\n\nThe game is played by two players who alternate their moves. Initially, the integers from $ 1 $ to $ n $ are written on the blackboard. To start, the first player may choose any even number and circle it. On every subsequent move, the current player must choose a number that is either the circled number multiplied by some prime, or the circled number divided by some prime. That player then erases the circled number and circles the newly chosen number. When a player is unable to make a move, that player loses the game.\n\nTo help Aisha's students, write a program that, given the integer $ n $, decides whether it is better to move first or second, and if it is better to move first, figures out a winning first move.", "inputFormat": "The first line of input contains an integer $ t $ ($ 1 \\le t \\le 40 $), which is the number of test cases. The descriptions of $ t $ test cases follow.\n\nEach test case consists of a single line containing an integer $ n $ ($ 2 \\le n \\le 10^7 $), which is the largest number written on the blackboard.\n\nOver all test cases, the sum of $ n $ is at most $ 10^7 $.", "outputFormat": "For each test case, if the first player has a winning strategy for the given $ n $, output the word $ \\text{first} $, followed by an even integer – any valid first move that can be extended to a winning strategy. If the second player has a winning strategy, output just the word $ \\text{second} $.", "hint": "Explanation of Sample 1: For $ n = 5 $, the first player loses the game regardless of the first move.\n\n- If the first player starts with $ 2 $, the second player circles $ 4 $, and there are no more valid moves left.\n- If the first move is $ 4 $, the second player circles $ 2 $. The first player must then circle $ 1 $, and the second player may pick either of the remaining two numbers ($ 3 $ or $ 5 $) to win.\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Blackboard Game【暂无 spj】", "background": "", "description": "To help her elementary school students understand the concept of prime factorization, Aisha has invented a game for them to play on the blackboard. The rules of the game are as follows.\n\nThe game is played by two players who alternate their moves. Initially, the integers from $ 1 $ to $ n $ are written on the blackboard. To start, the first player may choose any even number and circle it. On every subsequent move, the current player must choose a number that is either the circled number multiplied by some prime, or the circled number divided by some prime. That player then erases the circled number and circles the newly chosen number. When a player is unable to make a move, that player loses the game.\n\nTo help Aisha's students, write a program that, given the integer $ n $, decides whether it is better to move first or second, and if it is better to move first, figures out a winning first move.", "inputFormat": "The first line of input contains an integer $ t $ ($ 1 \\le t \\le 40 $), which is the number of test cases. The descriptions of $ t $ test cases follow.\n\nEach test case consists of a single line containing an integer $ n $ ($ 2 \\le n \\le 10^7 $), which is the largest number written on the blackboard.\n\nOver all test cases, the sum of $ n $ is at most $ 10^7 $.", "outputFormat": "For each test case, if the first player has a winning strategy for the given $ n $, output the word $ \\text{first} $, followed by an even integer – any valid first move that can be extended to a winning strategy. If the second player has a winning strategy, output just the word $ \\text{second} $.", "hint": "Explanation of Sample 1: For $ n = 5 $, the first player loses the game regardless of the first move.\n\n- If the first player starts with $ 2 $, the second player circles $ 4 $, and there are no more valid moves left.\n- If the first move is $ 4 $, the second player circles $ 2 $. The first player must then circle $ 1 $, and the second player may pick either of the remaining two numbers ($ 3 $ or $ 5 $) to win.\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Blackboard Game", "background": null, "description": "为了帮助小学学生理解素因数分解的概念，Aisha 发明了一个可以在黑板上玩的游戏。游戏规则如下。\n\n该游戏有两名玩家轮流进行操作。初始时，黑板上写有从 $1$ 到 $n$ 的整数。首先，第一位玩家可以任选一个偶数并将其圈出。之后每一步，当前玩家必须选择一个数字，该数字要么是当前被圈出的数字乘以某个素数，要么是当前被圈出的数字除以某个素数。此后，玩家擦掉原先被圈出的数字，并圈出新选的数字。当某位玩家无法进行操作时，该玩家输掉游戏。\n\n为了帮助 Aisha 的学生，请你编写一个程序，对于给定的整数 $n$，判断是先手好，还是后手好。如果先手有必胜策略，还要输出一个可以实现必胜策略的有效首步。", "inputFormat": "第一行输入一个整数 $t$（$1\\leq t\\leq 40$），表示测试用例数量。接下来 $t$ 行，每行一个整数 $n$（$2\\leq n\\leq 10^7$），表示黑板上的最大数字。\n\n所有测试用例中，$n$ 的总和不超过 $10^7$。", "outputFormat": "对每个测试用例，如果先手有必胜策略，输出单词 $\\text{first}$，并输出一个偶数——表示一个可以实现必胜策略的有效首步。如果后手有必胜策略，仅输出单词 $\\text{second}$。", "hint": "样例 1 解释：对于 $n = 5$，无论先手如何选择，都会输掉这局游戏。\n\n- 如果先手选择 $2$，后手圈出 $4$，无法再进行有效操作。\n- 如果首步选择 $4$，后手圈出 $2$，先手只能圈出 $1$，后手可以在剩下的两个数字（$3$ 或 $5$）任意选择获得胜利。\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14282", "type": "P", "difficulty": 7, "samples": [["2 3 3\n1 2 3 80 4 10\n1 2 2 40 4 30\n2 1 5 100", "24.0"], ["1 2 3\n1 1 2 50\n1 1 3 50\n1 2 2 40 3 60", "42.8571428571"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2025 WF] Bride of Pipe Stream", "background": "", "description": "The story continues! For several years now, your town has been gifted with an abundance of Flubber, the adorable-but-slightly-flammable-and-toxic-and-acidic-and-sentient-and-mischievous man-made chemical. The search continues for more (or, well, any) uses for the substance. But in the meantime, the Flubber factory continues to produce it at full capacity. Efforts to shut it down have failed, partly because nobody is sure who is actually running the factory.\n\nYou've been tasked with storing the perpetually-flowing Flubber in various Flubber reservoirs for future use (or, at least, to get it out of everyone's hair – literally). To accomplish this, you have access to a complicated network of Flubber ducts, connecting up various Flubber stations and reservoirs.\n\nEvery Flubber station has one or more Flubber ducts leading from it, and has various gates that may be raised or lowered so that incoming Flubber will drain into the output Flubber ducts in any desired proportion. For instance, you can send all the Flubber down one duct, or split it between two ducts 25-75, etc.\n\nIn contrast, a Flubber duct flows down to one or more lower stations or reservoirs, but the Flubber drains into them in a fixed proportion that you do not control. It is possible that some of the Flubber is lost to the environment as well, but that is a problem for your successor, not you.\n\nYou would like to fill all the reservoirs as quickly as possible. That is, you want to maximize the minimum amount of Flubber flowing into any of the reservoirs, among all possible configurations of station drainage.\n\nFigure C.1 illustrates the two sample inputs. Stations and reservoirs are shown as numbered nodes, colored green for stations and blue for reservoirs. Ducts are depicted as white nodes. For example, in the first sample input (left), Flubber can be sent from station 1 in any proportion to its two downstream ducts, but each duct will distribute its inflow according to the percentages printed on its outgoing edges.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/ixrxdcgj.png)\n\nFigure C.1: Illustrations of the two sample inputs.\n:::", "inputFormat": "The first line of input contains three integers $ s $, $ r $, and $ d $, where $ s $ ($ 1 \\le s \\le 10\\,000 $) is the number of stations, $ r $ ($ 1 \\le r \\le 3 $) is the number of reservoirs, and $ d $ ($ s \\le d \\le 20\\,000 $) is the number of ducts. The stations are numbered from 1 to $ s $ and the reservoirs are numbered from $ s+1 $ to $ s+r $, in decreasing order of altitude. The factory's Flubber initially flows into station 1.\n\nEach of the remaining $ d $ lines starts with two integers $ i $ and $ n $, where $ i $ ($ 1 \\le i \\le s $) is the station that can drain into this duct, and $ n $ ($ 1 \\le n \\le 10 $) is the number of outputs of this duct. The remainder of the line contains $ n $ pairs of integers $ o $ and $ p $, where $ o $ ($ i < o \\le s + r $) is a station or reservoir to which this duct drains, and $ p $ ($ 1 \\le p \\le 100 $) is the percentage of the Flubber entering the duct that will drain to $ o $. The $ o $ values for a given duct are distinct. Every station has at least one duct that it can drain into. The percentages for a given duct's outputs will sum to at most 100.", "outputFormat": "Output a single percentage $ f $, which is the highest possible percentage such that, for some configuration of station drainage, all reservoirs receive at least $ f\\% $ of the factory's produced Flubber. Your answer should have an absolute error of at most $ 10^{-6} $.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Bride of Pipe Stream", "background": "", "description": "The story continues! For several years now, your town has been gifted with an abundance of Flubber, the adorable-but-slightly-flammable-and-toxic-and-acidic-and-sentient-and-mischievous man-made chemical. The search continues for more (or, well, any) uses for the substance. But in the meantime, the Flubber factory continues to produce it at full capacity. Efforts to shut it down have failed, partly because nobody is sure who is actually running the factory.\n\nYou've been tasked with storing the perpetually-flowing Flubber in various Flubber reservoirs for future use (or, at least, to get it out of everyone's hair – literally). To accomplish this, you have access to a complicated network of Flubber ducts, connecting up various Flubber stations and reservoirs.\n\nEvery Flubber station has one or more Flubber ducts leading from it, and has various gates that may be raised or lowered so that incoming Flubber will drain into the output Flubber ducts in any desired proportion. For instance, you can send all the Flubber down one duct, or split it between two ducts 25-75, etc.\n\nIn contrast, a Flubber duct flows down to one or more lower stations or reservoirs, but the Flubber drains into them in a fixed proportion that you do not control. It is possible that some of the Flubber is lost to the environment as well, but that is a problem for your successor, not you.\n\nYou would like to fill all the reservoirs as quickly as possible. That is, you want to maximize the minimum amount of Flubber flowing into any of the reservoirs, among all possible configurations of station drainage.\n\nFigure C.1 illustrates the two sample inputs. Stations and reservoirs are shown as numbered nodes, colored green for stations and blue for reservoirs. Ducts are depicted as white nodes. For example, in the first sample input (left), Flubber can be sent from station 1 in any proportion to its two downstream ducts, but each duct will distribute its inflow according to the percentages printed on its outgoing edges.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/ixrxdcgj.png)\n\nFigure C.1: Illustrations of the two sample inputs.\n:::", "inputFormat": "The first line of input contains three integers $ s $, $ r $, and $ d $, where $ s $ ($ 1 \\le s \\le 10\\,000 $) is the number of stations, $ r $ ($ 1 \\le r \\le 3 $) is the number of reservoirs, and $ d $ ($ s \\le d \\le 20\\,000 $) is the number of ducts. The stations are numbered from 1 to $ s $ and the reservoirs are numbered from $ s+1 $ to $ s+r $, in decreasing order of altitude. The factory's Flubber initially flows into station 1.\n\nEach of the remaining $ d $ lines starts with two integers $ i $ and $ n $, where $ i $ ($ 1 \\le i \\le s $) is the station that can drain into this duct, and $ n $ ($ 1 \\le n \\le 10 $) is the number of outputs of this duct. The remainder of the line contains $ n $ pairs of integers $ o $ and $ p $, where $ o $ ($ i < o \\le s + r $) is a station or reservoir to which this duct drains, and $ p $ ($ 1 \\le p \\le 100 $) is the percentage of the Flubber entering the duct that will drain to $ o $. The $ o $ values for a given duct are distinct. Every station has at least one duct that it can drain into. The percentages for a given duct's outputs will sum to at most 100.", "outputFormat": "Output a single percentage $ f $, which is the highest possible percentage such that, for some configuration of station drainage, all reservoirs receive at least $ f\\% $ of the factory's produced Flubber. Your answer should have an absolute error of at most $ 10^{-6} $.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Bride of Pipe Stream", "background": null, "description": "故事仍在继续！几年来，你们的小镇一直有大量 Flubber ——这种可爱但略带易燃性、毒性、酸性、感知力和恶作剧倾向的人造化学物质。人们仍在继续寻找这种物质的更多（或者说，任何）用途。但与此同时， Flubber 工厂继续全力生产。关闭工厂的行动失败了，部分原因是没人知道到底是谁在运营这家工厂。\n\n你被委以重任，要将源源不断的 Flubber 储存到各个 Flubber 储罐中供未来使用（或者，至少让这东西远离大家的头发——字面意思）。为此，你可以使用一个复杂的 Flubber 管道网络，这个网络连接着各个 Flubber 站点和储罐。\n\n每个 Flubber 站点都有一个或多个 Flubber 管道从中引出，并有各种可以升降的闸门，使得流入的 Flubber 能够以任意所需比例排入输出管道。例如，你可以将所有 Flubber 送入一个管道，或者按 `25-75` 的比例分流到两个管道，等等。\n\n相比之下， Flubber 管道向下流向一个或多个较低站点或储罐，但 Flubber 以你无法控制的固定比例排入这些目的地。可能部分 Flubber 会流失到环境中，但那是你的继任者要解决的问题，不是你要解决的问题。\n\n你希望尽快填满所有储罐。也就是说，在所有可能的站点排放配置中，你想要最大化任意储罐中 Flubber 流量的最小值。\n\n图 C.1 展示了两个样例输入。站点和储罐显示为编号节点，初始站点为绿色，储罐为蓝色。其余站点被描绘为白色节点。例如，在第一个样例输入（左侧）中，可以从站点1以任意比例将 Flubber 送入其两个下游管道，但其他管道将根据其出边上打印的百分比分配其流入量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ixrxdcgj.png)\n\n图 C.1：两个样例输入的示意图。", "inputFormat": "第一行输入包含三个整数 $ s $ 、 $ r $ 和 $ d $ ，其中 $ s $ （$ 1 \\le s \\le 10\\,000 $）是站点数量，$ r $（$ 1 \\le r \\le 3 $）是储罐数量，$ d $ （$ s \\le d \\le 20\\,000 $）是管道数量。站点编号从 1 到 $ s $ ，储罐编号从 $ s+1 $ 到 $ s+r $ ，按海拔递减顺序排列。工厂的 Flubber 最初流入站点 1 。\n\n接下来的 $ d $ 行每行以两个整数 $ i $ 和 $ n $ 开始，其中 $ i $（$ 1 \\le i \\le s $）是可以排入此管道的站点，$ n $（$ 1 \\le n \\le 10 $）是此管道的输出数量。该行剩余部分包含 $ n $ 对整数 $ o $ 和 $ p $ ，其中 $ o $（$ i < o \\le s + r $）是此管道排向的站点或储罐，$ p $（$ 1 \\le p \\le 100 $）是进入管道的 Flubber 将排向 $ o $ 的百分比。给定管道的 $ o $ 值是互不相同的。每个站点至少有一个可以排放的管道。给定管道输出的百分比总和不超过 `100` 。", "outputFormat": "输出一个数 $ f $ ，表示可能达到的最高百分比，使得在某种站点排放配置下，所有储罐至少接收到工厂生产的 Flubber 的 $ f\\% $ 。你的答案的绝对误差应不超过 $ 10^{-6} $ 。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P14283", "type": "P", "difficulty": 0, "samples": [["5 3\n#..\n...\n...\n...\n.S.\nNNEN", "1"], ["3 5\n.###.\n....#\n.S...\nNEESNS", "0"], ["3 3\n...\n...\nS#.\nNEESNNWWSENESS", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "WF"], "title": "[ICPC 2025 WF] Buggy Rover", "background": "", "description": "The International Center for Planetary Cartography (ICPC) uses rovers to explore the surfaces of other planets. As we all know, other planets are flat surfaces which can be perfectly and evenly discretized into a rectangular grid structure. Each cell in this grid is either flat and can be explored by the rover, or rocky and cannot.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/43mlk28c.png)\n\nMars rover being tested near the Paranal Observatory.    \nCC BY-SA 4.0 by ESO/G.    \nHudepohl on [Wikimedia Commons](https://commons.wikimedia.org/w/index.php?curid=29010513)\n:::\n\nToday marks the launch of their brand-new Hornet rover. The rover is set to explore the planet using a simple algorithm. Internally, the rover maintains a $ direction $ ordering, a permutation of the directions north, east, south, and west. When the rover makes a move, it goes through its $ direction $ ordering, chooses the first direction that does not move it off the face of the planet or onto an impassable rock, and makes one step in that direction.\n\nBetween two consecutive moves, the rover may be hit by a cosmic ray, replacing its direction ordering with a different one. ICPC scientists have a log of the rover's moves, but it is difficult to determine by hand if and when the rover's direction ordering changed. Given the moves that the rover has made, what is the smallest number of times that it could have been hit by cosmic rays?", "inputFormat": "The first line of input contains two integers $ r $ and $ c $, where $ r $ ($ 1 \\le r \\le 200 $) is the number of rows on the planet, and $ c $ ($ 1 \\le c \\le 200 $) is the number of columns. The rows run north to south, while the columns run west to east.\n\nThe next $ r $ lines each contain $ c $ characters, representing the layout of the planet. Each character is either `#`, a rocky space; `.`, a flat space; or `S`, a flat space that marks the starting position of the rover. There is exactly one `S` in the grid.\n\nThe following line contains a string $ s $, where each character of $ s $ is `N`, `E`, `S`, or `W`, representing the sequence of the moves performed by the rover. The string $ s $ contains between 1 and 10 000 characters, inclusive. All of the moves lead to flat spaces.", "outputFormat": "Output the minimum number of times the rover's direction ordering could have changed to be consistent with the moves it made.", "hint": "**Explanation of Sample 1:** The rover's direction ordering could be as follows. In the first move, it either prefers to go north, or it prefers to go south and then north. Note that in the latter case, it cannot move south as it would fall from the face of the planet. In the second move, it must prefer to go north. In the third move, it must prefer to go east. In the fourth move, it can either prefer to go north, or east and then north. It is therefore possible that it was hit by exactly one cosmic ray between the second and third move, changing its direction ordering from N??? to EN?? where `?` stands for any remaining direction.\n\n**Explanation of Sample 2:** It is possible the rover began with the direction ordering NESW, which is consistent with all moves it makes.", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Buggy Rover", "background": "", "description": "The International Center for Planetary Cartography (ICPC) uses rovers to explore the surfaces of other planets. As we all know, other planets are flat surfaces which can be perfectly and evenly discretized into a rectangular grid structure. Each cell in this grid is either flat and can be explored by the rover, or rocky and cannot.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/43mlk28c.png)\n\nMars rover being tested near the Paranal Observatory.    \nCC BY-SA 4.0 by ESO/G.    \nHudepohl on [Wikimedia Commons](https://commons.wikimedia.org/w/index.php?curid=29010513)\n:::\n\nToday marks the launch of their brand-new Hornet rover. The rover is set to explore the planet using a simple algorithm. Internally, the rover maintains a $ direction $ ordering, a permutation of the directions north, east, south, and west. When the rover makes a move, it goes through its $ direction $ ordering, chooses the first direction that does not move it off the face of the planet or onto an impassable rock, and makes one step in that direction.\n\nBetween two consecutive moves, the rover may be hit by a cosmic ray, replacing its direction ordering with a different one. ICPC scientists have a log of the rover's moves, but it is difficult to determine by hand if and when the rover's direction ordering changed. Given the moves that the rover has made, what is the smallest number of times that it could have been hit by cosmic rays?", "inputFormat": "The first line of input contains two integers $ r $ and $ c $, where $ r $ ($ 1 \\le r \\le 200 $) is the number of rows on the planet, and $ c $ ($ 1 \\le c \\le 200 $) is the number of columns. The rows run north to south, while the columns run west to east.\n\nThe next $ r $ lines each contain $ c $ characters, representing the layout of the planet. Each character is either `#`, a rocky space; `.`, a flat space; or `S`, a flat space that marks the starting position of the rover. There is exactly one `S` in the grid.\n\nThe following line contains a string $ s $, where each character of $ s $ is `N`, `E`, `S`, or `W`, representing the sequence of the moves performed by the rover. The string $ s $ contains between 1 and 10 000 characters, inclusive. All of the moves lead to flat spaces.", "outputFormat": "Output the minimum number of times the rover's direction ordering could have changed to be consistent with the moves it made.", "hint": "**Explanation of Sample 1:** The rover's direction ordering could be as follows. In the first move, it either prefers to go north, or it prefers to go south and then north. Note that in the latter case, it cannot move south as it would fall from the face of the planet. In the second move, it must prefer to go north. In the third move, it must prefer to go east. In the fourth move, it can either prefer to go north, or east and then north. It is therefore possible that it was hit by exactly one cosmic ray between the second and third move, changing its direction ordering from N??? to EN?? where `?` stands for any remaining direction.\n\n**Explanation of Sample 2:** It is possible the rover began with the direction ordering NESW, which is consistent with all moves it makes.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Buggy Rover", "background": null, "description": "国际行星制图中心（ICPC）使用探测车来探索其他行星的地表。众所周知，其他行星的地表是一块完美平整的矩形网格，可以均匀地离散划分。每个格点要么是平地（可以由探测车通行），要么是岩石（无法通行）。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/43mlk28c.png)\n\n在 Paranal 天文台附近测试的火星探测车。  \n图片由 ESO/G. Hudepohl 拍摄，采用 CC BY-SA 4.0 许可，来源于 [Wikimedia Commons](https://commons.wikimedia.org/w/index.php?curid=29010513)\n:::\n\n今天，最新的 Hornet 探测车即将发射。它将按照一种简单的算法来探索行星。探测车内部会维护一个 $direction$ 序列，即“北、东、南、西”这四个方向的任意一个排列。当探测车移动时，会依次检查这个 $direction$ 列表，选择第一个不会让其离开行星表面、也不会驶入岩石格的方向，然后朝该方向移动一格。\n\n在两个连续的移动之间，探测车有可能被宇宙射线击中，使得其 $direction$ 序列变成另一个排列。ICPC 的科学家们记录了探测车的所有移动路径，但手工判断探测车的 $direction$ 序列是否发生变化、何时发生变化十分困难。给定探测车移动序列，请你计算，为了与实际移动路径一致，探测车的 $direction$ 序列最少可能发生了几次改变（被宇宙射线击中）。", "inputFormat": "第一行输入两个整数 $r$ 和 $c$，其中 $r$（$1 \\le r \\le 200$）表示行星的行数，$c$（$1 \\le c \\le 200$）表示列数。行的编号自北至南，列的编号自西至东。\n\n接下来的 $r$ 行，每行包含 $c$ 个字符，表示行星表面布局。每个字符是 `#`（岩石，不可通行）、`.`（平地，可通行）或 `S`（探测车起始位置，也为平地）。网格中恰好有且仅有一个 `S`。\n\n紧接着输入一行字符串 $s$，每个字符均为 `N`、`E`、`S` 或 `W`，分别表示探测车实际的移动方向。$s$ 的长度在 1 到 10 000 之间（含），且所有移动都只能经过可通行的格子。", "outputFormat": "输出一个整数，表示与探测车实际移动路径一致所需的最小宇宙射线击中次数（即 $direction$ 序列的最小变化次数）。", "hint": "**样例 1 说明：** 探测车的 $direction$ 序列可能如下：第一次移动时，可以是优先往北，也可以是优先往南再往北。需要注意的是第二种情况不能走南，因为会离开行星表面。第二次移动时，必须优先往北。第三次移动时，必须优先往东。第四次移动时，可以优先往北，也可以优先往东再往北。因此，只需在第二步和第三步之间被宇宙射线击中一次，使得其 $direction$ 序列从 N??? 变成 EN??（其中 `?` 表示剩下的任意方向）。\n\n**样例 2 说明：** 探测车一开始的 $direction$ 序列为 NESW，就可以不变地完成全部移动。\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14284", "type": "P", "difficulty": 0, "samples": [["4 4\n1 2\n2 3\n4 3\n4 2", "1\n2\n4\n6"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "WF"], "title": "[ICPC 2025 WF] Delivery Service", "background": "", "description": "The Intercity Caspian Package Company (ICPC) is starting a delivery service which will deliver packages between various cities near the Caspian Sea. The company plans to hire couriers to carry packages between these cities.\n\nEach courier has a home city and a destination city, and all couriers have exactly the same travel schedule: They leave their home city at 9:00, arrive at their destination city at 12:00, leave their destination city at 14:00 and return to their home city at 17:00. While couriers are in their home or destination cities, they can receive packages from and/or deliver packages to customers. They can also hand off to or receive packages from other couriers who are in that city at the same time. Since ICPC is a personal service, packages are never left in warehouses or other facilities to be picked up later – unless the package has reached its destination, couriers have to either keep the package with themselves (during the day or during the night), or hand it off to another courier.\n\nThe company will direct the couriers to hand off packages in such a way that any package can always be delivered to its destination. So it is hoped! We'll say that two cities $ u $ and $ v $ are connected if it is possible to deliver a package from city $ u $ to city $ v $ as well as from $ v $ to $ u $. To estimate the efficiency of their hiring process, the company would like to find, after each courier is hired, the number of pairs of cities $ (u, v) $ that are connected ($ 1 \\le u < v \\le n $).", "inputFormat": "The first line of input contains two integers $ n $ and $ m $, where $ n $ ($ 2 \\le n \\le 2 \\cdot 10^5 $) is the number of cities, and $ m $ ($ 1 \\le m \\le 4 \\cdot 10^5 $) is the number of couriers that will be hired. Couriers are numbered 1 to $ m $, in the order they are hired. This is followed by $ m $ lines, the $ i $th of which contains two distinct integers $ a_i $ and $ b_i $ ($ 1 \\le a_i, b_i \\le n $), denoting the home and destination cities, respectively, for courier $ i $.\n", "outputFormat": "Output $ m $ integers, denoting the number of pairs of connected cities after hiring the first $ 1, 2, \\ldots, m $ couriers.", "hint": "**Explanation of Sample 1:**\n\n1. After the first courier is hired, cities 1 and 2 are connected.\n2. After the second courier is hired, cities 2 and 3 are connected. Note, however, that cities 1 and 3 are still not connected. Even though there's a courier moving between cities 1 and 2, and a courier moving between cities 2 and 3, they never meet each other.\n3. After the third courier is hired, cities 3 and 4 are connected and cities 2 and 4 are connected. For example, one way to deliver a package from city 2 to city 4 is:\n    - hand it to courier 2 in city 2 at 19:00;\n    - the next day, courier 2 arrives in city 3 at 12:00, and hands the package to courier 3 who is also in city 3;\n    - at 18:00, courier 3 delivers the package to city 4.\n4. After the fourth courier is hired, all six pairs of cities are connected.", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Delivery Service", "background": "", "description": "The Intercity Caspian Package Company (ICPC) is starting a delivery service which will deliver packages between various cities near the Caspian Sea. The company plans to hire couriers to carry packages between these cities.\n\nEach courier has a home city and a destination city, and all couriers have exactly the same travel schedule: They leave their home city at 9:00, arrive at their destination city at 12:00, leave their destination city at 14:00 and return to their home city at 17:00. While couriers are in their home or destination cities, they can receive packages from and/or deliver packages to customers. They can also hand off to or receive packages from other couriers who are in that city at the same time. Since ICPC is a personal service, packages are never left in warehouses or other facilities to be picked up later – unless the package has reached its destination, couriers have to either keep the package with themselves (during the day or during the night), or hand it off to another courier.\n\nThe company will direct the couriers to hand off packages in such a way that any package can always be delivered to its destination. So it is hoped! We'll say that two cities $ u $ and $ v $ are connected if it is possible to deliver a package from city $ u $ to city $ v $ as well as from $ v $ to $ u $. To estimate the efficiency of their hiring process, the company would like to find, after each courier is hired, the number of pairs of cities $ (u, v) $ that are connected ($ 1 \\le u < v \\le n $).", "inputFormat": "The first line of input contains two integers $ n $ and $ m $, where $ n $ ($ 2 \\le n \\le 2 \\cdot 10^5 $) is the number of cities, and $ m $ ($ 1 \\le m \\le 4 \\cdot 10^5 $) is the number of couriers that will be hired. Couriers are numbered 1 to $ m $, in the order they are hired. This is followed by $ m $ lines, the $ i $th of which contains two distinct integers $ a_i $ and $ b_i $ ($ 1 \\le a_i, b_i \\le n $), denoting the home and destination cities, respectively, for courier $ i $.\n", "outputFormat": "Output $ m $ integers, denoting the number of pairs of connected cities after hiring the first $ 1, 2, \\ldots, m $ couriers.", "hint": "**Explanation of Sample 1:**\n\n1. After the first courier is hired, cities 1 and 2 are connected.\n2. After the second courier is hired, cities 2 and 3 are connected. Note, however, that cities 1 and 3 are still not connected. Even though there's a courier moving between cities 1 and 2, and a courier moving between cities 2 and 3, they never meet each other.\n3. After the third courier is hired, cities 3 and 4 are connected and cities 2 and 4 are connected. For example, one way to deliver a package from city 2 to city 4 is:\n    - hand it to courier 2 in city 2 at 19:00;\n    - the next day, courier 2 arrives in city 3 at 12:00, and hands the package to courier 3 who is also in city 3;\n    - at 18:00, courier 3 delivers the package to city 4.\n4. After the fourth courier is hired, all six pairs of cities are connected.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Delivery Service", "background": null, "description": "里海城际包裹公司（ICPC）即将在里海附近的各个城市间启动包裹递送服务。公司计划雇佣快递员在这些城市间运送包裹。\n\n每位快递员都有一个家乡城市和一个目的地城市，而且所有快递员的日程完全相同：他们在 9:00 从家乡城市出发，12:00 到达目的地城市，14:00 从目的地城市出发，17:00 返回家乡城市。当快递员在家乡或目的地城市时，他们可以从客户那里接收包裹或向客户递送包裹。他们也可以与同时在该城市的其他快递员交接包裹。由于 ICPC 是一家个性化服务公司，包裹永远不会被放在仓库或其他设施等候后续领取——除非包裹已经到达目的地，否则快递员要么自己随身保管包裹（白天或晚上），要么将其交给另一个快递员。\n\n公司会安排快递员的交接，使得任何包裹最终都能投递到目的地。至少理论上是这样！我们称两个城市 $u$ 和 $v$ 是连通的，若能将包裹从城市 $u$ 递送到城市 $v$，并能从 $v$ 递送回 $u$。为了评估其雇佣效率，公司希望在每雇佣一名快递员后，统计此时有多少对城市 $(u, v)$ 是连通的（$1 \\le u < v \\le n$）。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，其中 $n$（$2 \\le n \\le 2 \\cdot 10^5$）为城市总数，$m$（$1 \\le m \\le 4 \\cdot 10^5$）为总共将要雇佣的快递员数。快递员按雇佣顺序编号 1 到 $m$。接下来有 $m$ 行，第 $i$ 行包含两个不同的整数 $a_i$ 和 $b_i$（$1 \\le a_i, b_i \\le n$），表示第 $i$ 位快递员的家乡和目的地城市。", "outputFormat": "输出 $m$ 个整数，第 $i$ 个整数表示前 $i$ 位快递员雇佣完成后，连通的城市对 $(u, v)$（$1 \\le u < v \\le n$）的数量。", "hint": "**样例 1 说明：**\n\n1. 招聘第 1 位快递员后，城市 1 和 2 连通。\n2. 招聘第 2 位快递员后，城市 2 和 3 连通。但城市 1 和 3 依然不连通。即使有快递员往返 1、2 和 2、3，彼此之间永远不会相遇。\n3. 招聘第 3 位快递员后，城市 3 和 4 连通，城市 2 和 4 也连通。例如，将包裹从城市 2 递送到城市 4 的一种方式如下：\n   - 19:00 将包裹交给第 2 位快递员（在城市 2）；\n   - 第 2 位快递员次日 12:00 抵达城市 3，并把包裹交给同样在城市 3 的第 3 位快递员；\n   - 18:00，第 3 位快递员将包裹递送到城市 4。\n4. 招聘第 4 位快递员后，所有六组城市都是连通的。\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14285", "type": "P", "difficulty": 0, "samples": [["2\n3 5\n2 2 1 5\n2 3 1 4 5\n4 2 3 4\n3 5\n2 2 1 5\n2 3 1 4 5\n5 2 3 4", "yes\nno"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "WF"], "title": "[ICPC 2025 WF] Herding Cats", "background": "", "description": "You are opening a cat cafe in Baku and would like to take a promotional photograph of all the cats sitting in the front window. Unfortunately, getting cats to do what you want is a famously hard problem. But you have a plan: you have bought a collection of $ m $ catnip plants, each of a different variety, knowing that each cat likes some of these varieties. There is a row of $ m $ pots in the window, numbered 1 to $ m $ in order, and you will place one plant in each pot. Each cat will then be persuaded (by means of a toy on a string) to walk along the row of pots from 1 to $ m $. As soon as a cat reaches a pot with a catnip plant that it likes, it will stop there, even if there already are other cats at that plant.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/unj9cndz.png)\n\nFigure F.1: One possible plant ordering for the first sample test case.\n:::\n\nYou know which pot you would like each cat to stop beside. Can you find a way in which to place the plants in the pots to achieve this?", "inputFormat": "The first line of input contains an integer $ t $ ($ 1 \\le t \\le 10\\,000 $), which is the number of test cases. The descriptions of $ t $ test cases follow.\n\nThe first line of each test case contains two integers $ n $ and $ m $, where $ n $ ($ 1 \\le n \\le 2 \\cdot 10^5 $) is the number of cats, and $ m $ ($ 1 \\le m \\le 2 \\cdot 10^5 $) is the number of catnip plants (and also the number of pots). Catnip plants are numbered from 1 to $ m $.\n\nThe following $ n $ lines each describe one cat. The line starts with two integers $ p $ and $ k $, where $ p $ ($ 1 \\le p \\le m $) is the pot at which the cat should stop, and $ k $ ($ 1 \\le k \\le m $) is the number of catnip plants the cat likes. The remainder of the line contains $ k $ distinct integers, which are the numbers of the plants that the cat likes.\n\nOver all test cases, the sum of $ n $ is at most $ 2 \\cdot 10^5 $, the sum of $ m $ is at most $ 2 \\cdot 10^5 $, and the sum of all $ k $ is at most $ 5 \\cdot 10^5 $.", "outputFormat": "For each test case, output either `yes` if it is possible to arrange the catnip plants as described above, or `no` if not.", "hint": "**Explanation of Sample 1:** In the first test case, a possible ordering of the plants is $[2, 1, 5, 3, 4]$. This way, cat 1 will stop at pot 2, as it is the first pot with a plant variety that it likes. Cat 2 will stop there as well. Cat 3 will continue all the way to pot 4, as shown in Figure F.1.", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Herding Cats", "background": "", "description": "You are opening a cat cafe in Baku and would like to take a promotional photograph of all the cats sitting in the front window. Unfortunately, getting cats to do what you want is a famously hard problem. But you have a plan: you have bought a collection of $ m $ catnip plants, each of a different variety, knowing that each cat likes some of these varieties. There is a row of $ m $ pots in the window, numbered 1 to $ m $ in order, and you will place one plant in each pot. Each cat will then be persuaded (by means of a toy on a string) to walk along the row of pots from 1 to $ m $. As soon as a cat reaches a pot with a catnip plant that it likes, it will stop there, even if there already are other cats at that plant.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/unj9cndz.png)\n\nFigure F.1: One possible plant ordering for the first sample test case.\n:::\n\nYou know which pot you would like each cat to stop beside. Can you find a way in which to place the plants in the pots to achieve this?", "inputFormat": "The first line of input contains an integer $ t $ ($ 1 \\le t \\le 10\\,000 $), which is the number of test cases. The descriptions of $ t $ test cases follow.\n\nThe first line of each test case contains two integers $ n $ and $ m $, where $ n $ ($ 1 \\le n \\le 2 \\cdot 10^5 $) is the number of cats, and $ m $ ($ 1 \\le m \\le 2 \\cdot 10^5 $) is the number of catnip plants (and also the number of pots). Catnip plants are numbered from 1 to $ m $.\n\nThe following $ n $ lines each describe one cat. The line starts with two integers $ p $ and $ k $, where $ p $ ($ 1 \\le p \\le m $) is the pot at which the cat should stop, and $ k $ ($ 1 \\le k \\le m $) is the number of catnip plants the cat likes. The remainder of the line contains $ k $ distinct integers, which are the numbers of the plants that the cat likes.\n\nOver all test cases, the sum of $ n $ is at most $ 2 \\cdot 10^5 $, the sum of $ m $ is at most $ 2 \\cdot 10^5 $, and the sum of all $ k $ is at most $ 5 \\cdot 10^5 $.", "outputFormat": "For each test case, output either `yes` if it is possible to arrange the catnip plants as described above, or `no` if not.", "hint": "**Explanation of Sample 1:** In the first test case, a possible ordering of the plants is $[2, 1, 5, 3, 4]$. This way, cat 1 will stop at pot 2, as it is the first pot with a plant variety that it likes. Cat 2 will stop there as well. Cat 3 will continue all the way to pot 4, as shown in Figure F.1.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Herding Cats", "background": null, "description": "你打算在巴库开一家猫咪咖啡馆，并想拍一张所有猫咪都坐在橱窗前的宣传照片。不幸的是，让猫做你想做的事是一项出了名的难题。不过你有个计划：你买了一组 $m$ 种不同品种的猫薄荷植株，你知道每只猫只喜欢其中的一些品种。橱窗里有一排 $m$ 个花盆，按顺序编号为 $1$ 到 $m$，你准备在每个花盆里放上一株猫薄荷。然后，每只猫会被引导（通过细绳上的玩具）沿着花盆从 $1$ 号走到 $m$ 号。当一只猫到达某个花盆，而那个花盆里的猫薄荷是它喜欢的品种时，它就会停在那里，即使那盆植物旁已经有其它猫也会如此。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/unj9cndz.png)\n\n图 F.1：是第一个样例的一种可能的种植顺序。\n:::\n\n你已经确定希望每只猫停在哪个花盆旁。你能否安排这些猫薄荷植株在花盆里的放置方式，好让所有猫最终都恰好停在你希望的位置？", "inputFormat": "输入的第一行包含一个整数 $t$（$1 \\le t \\le 10\\,000$），表示测试用例的数量。接下来是 $t$ 个测试用例的描述。\n\n每个测试用例的第一行包含两个整数 $n$ 和 $m$，其中 $n$（$1 \\le n \\le 2 \\cdot 10^5$）为猫的数量，$m$（$1 \\le m \\le 2 \\cdot 10^5$）为猫薄荷植株的种类数（也是花盆的数量）。猫薄荷植株编号从 $1$ 到 $m$。\n\n接下来的 $n$ 行，每行描述一只猫。每行以两个整数 $p$ 和 $k$ 开头，其中 $p$（$1 \\le p \\le m$）表示希望这只猫停留的花盆位置，$k$（$1 \\le k \\le m$）表示这只猫喜欢的猫薄荷品种数。其余部分为 $k$ 个两两不同的整数，表示这只猫喜欢的猫薄荷品种的编号。\n\n所有测试用例中，$n$ 的总和不超过 $2 \\cdot 10^5$，$m$ 的总和不超过 $2 \\cdot 10^5$，所有 $k$ 的总和不超过 $5 \\cdot 10^5$。", "outputFormat": "对于每个测试用例，如果存在一种安排方式让所有猫都能按照指定的位置停留，输出 `yes`。否则输出 `no`。", "hint": "**样例 1 解释：** 在第一个测试用例中，一种可能的植株顺序为 $[2, 1, 5, 3, 4]$。这样，猫1会停在第2号花盆，因为这是她遇到的第一个她喜欢的品种。猫2也会停在这里。猫3会一直走到第4号花盆，如图 F.1 所示。\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14286", "type": "P", "difficulty": 7, "samples": [["3\n6 6 4 2\n0 0 1\n6 0 4\n6 6 3\n0 6 2\n1 2 3\n1 3 4\n6 6 4 2\n0 0 1\n6 0 2\n6 6 4\n0 6 3\n1 2 3\n1 3 4\n10 6 7 7\n6 1 8\n10 0 10\n10 6 4\n2 6 6\n0 6 0\n4 3 11\n0 0 7\n2 1 7\n2 3 1\n3 6 1\n3 4 6\n6 4 5\n5 7 6\n7 1 6", "impossible\n6.708203932\n15.849260054"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2025 WF] Lava Moat", "background": "", "description": "These pesky armies of good are coming to disturb the quiet and peaceful lands of the goblins again. Building a huge wall didn't work out that well, and so the goblins are going to turn to the tried and true staple of defense: a moat filled with lava. They want to dig this moat as a boundary between the goblin lands in the north and the do-gooder lands in the south, crossing the whole borderlands west-to-east.\n\nThis presents them with a challenge. The borderlands are hilly, if not outright mountainous, while a lava moat has to be all on one level – otherwise the lava from the higher parts will flow down and out of the moat in the lower parts. So, the goblins have to choose a path that is all on one elevation, and connects the western border of the borderlands to its eastern border. For obvious economic reasons, they want this path to be as short as possible.\n\nThis is where you come in. You are given an elevation map of the borderlands, and your task is to determine how short the moat can be.\n\nThe map is in the form of a fully triangulated rectangle with dimensions $ w \\times \\ell $, with all triangles having positive area. No vertex lies on the interior of an edge of another triangle. The southwestern corner of the map has coordinates $ (0, 0) $, with the $ x $-axis going east and the $ y $-axis going north. Furthermore, the western border (the line segment connecting $ (0, 0) $ and $ (0, \\ell) $, including the endpoints) is a single edge. Similarly, the eastern border (between points $ (w, 0) $ and $ (w, \\ell) $) is also a single edge.\n\nOf course, this map is just a 2D projection of the actual 3D terrain: Every point $ (x, y) $ also has an elevation $ z $. The elevation at the vertices of the triangulation is directly specified by the map, and all of these given elevations are distinct. The elevation at all other points can be computed by linear interpolation on associated triangles. In other words, the terrain is shaped like a collection of triangular faces joined together by shared sides. These faces correspond to the triangles on the map.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/u972p6cj.png)\n\nFigure G.1: Illustration of the sample test cases. Shading denotes elevation, and the thick red lines denote optimal moats.\n:::", "inputFormat": "The first line of input contains an integer $ t $ ($ 1 \\le t \\le 10\\,000 $), which is the number of test cases. The descriptions of $ t $ test cases follow.\n\nThe first line of each test case contains four integers $ w $, $ \\ell $, $ n $, and $ m $, where $ w $ ($ 1 \\le w \\le 10^6 $) is the extent of the borderlands from west to east, $ \\ell $ ($ 1 \\le \\ell \\le 10^6 $) is the extent from south to north, $ n $ ($ 4 \\le n \\le 50\\,000 $) is the number of vertices, and $ m $ ($ n - 2 \\le m \\le 2n - 6 $) is the number of triangles in the provided triangulation.\n\nThis is followed by $ n $ lines, the $ i $th of which contains three integers $ x_i $, $ y_i $, and $ z_i $ ($ 0 \\le x_i \\le w $; $ 0 \\le y_i \\le \\ell $; $ 0 \\le z_i \\le 10^6 $), denoting the coordinates and the elevation of vertex $ i $. The only vertices with $ x_i = 0 $ or $ x_i = w $ are the four corners. All pairs $ (x_i, y_i) $ are distinct. All $ z_i $s are distinct.\n\nEach of the following $ m $ lines contains three distinct integers $ a $, $ b $, and $ c $ ($ 1 \\le a, b, c \\le n $), denoting a map triangle formed by vertices $ a $, $ b $, and $ c $ in counter-clockwise order. These triangles are a complete triangulation of the rectangle $ [0, w] \\times [0, \\ell] $. Each of the $ n $ vertices is referenced by at least one triangle.\n\nOver all test cases, the sum of $ n $ is at most $50\\ 000$.", "outputFormat": "For each test case, if it is possible to construct a lava moat at a single elevation that connects the western border to the eastern border, output the minimum length of such a moat, with an absolute or relative error of at most $ 10^{-6} $. Otherwise, output `impossible`.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Lava Moat", "background": "", "description": "These pesky armies of good are coming to disturb the quiet and peaceful lands of the goblins again. Building a huge wall didn't work out that well, and so the goblins are going to turn to the tried and true staple of defense: a moat filled with lava. They want to dig this moat as a boundary between the goblin lands in the north and the do-gooder lands in the south, crossing the whole borderlands west-to-east.\n\nThis presents them with a challenge. The borderlands are hilly, if not outright mountainous, while a lava moat has to be all on one level – otherwise the lava from the higher parts will flow down and out of the moat in the lower parts. So, the goblins have to choose a path that is all on one elevation, and connects the western border of the borderlands to its eastern border. For obvious economic reasons, they want this path to be as short as possible.\n\nThis is where you come in. You are given an elevation map of the borderlands, and your task is to determine how short the moat can be.\n\nThe map is in the form of a fully triangulated rectangle with dimensions $ w \\times \\ell $, with all triangles having positive area. No vertex lies on the interior of an edge of another triangle. The southwestern corner of the map has coordinates $ (0, 0) $, with the $ x $-axis going east and the $ y $-axis going north. Furthermore, the western border (the line segment connecting $ (0, 0) $ and $ (0, \\ell) $, including the endpoints) is a single edge. Similarly, the eastern border (between points $ (w, 0) $ and $ (w, \\ell) $) is also a single edge.\n\nOf course, this map is just a 2D projection of the actual 3D terrain: Every point $ (x, y) $ also has an elevation $ z $. The elevation at the vertices of the triangulation is directly specified by the map, and all of these given elevations are distinct. The elevation at all other points can be computed by linear interpolation on associated triangles. In other words, the terrain is shaped like a collection of triangular faces joined together by shared sides. These faces correspond to the triangles on the map.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/u972p6cj.png)\n\nFigure G.1: Illustration of the sample test cases. Shading denotes elevation, and the thick red lines denote optimal moats.\n:::", "inputFormat": "The first line of input contains an integer $ t $ ($ 1 \\le t \\le 10\\,000 $), which is the number of test cases. The descriptions of $ t $ test cases follow.\n\nThe first line of each test case contains four integers $ w $, $ \\ell $, $ n $, and $ m $, where $ w $ ($ 1 \\le w \\le 10^6 $) is the extent of the borderlands from west to east, $ \\ell $ ($ 1 \\le \\ell \\le 10^6 $) is the extent from south to north, $ n $ ($ 4 \\le n \\le 50\\,000 $) is the number of vertices, and $ m $ ($ n - 2 \\le m \\le 2n - 6 $) is the number of triangles in the provided triangulation.\n\nThis is followed by $ n $ lines, the $ i $th of which contains three integers $ x_i $, $ y_i $, and $ z_i $ ($ 0 \\le x_i \\le w $; $ 0 \\le y_i \\le \\ell $; $ 0 \\le z_i \\le 10^6 $), denoting the coordinates and the elevation of vertex $ i $. The only vertices with $ x_i = 0 $ or $ x_i = w $ are the four corners. All pairs $ (x_i, y_i) $ are distinct. All $ z_i $s are distinct.\n\nEach of the following $ m $ lines contains three distinct integers $ a $, $ b $, and $ c $ ($ 1 \\le a, b, c \\le n $), denoting a map triangle formed by vertices $ a $, $ b $, and $ c $ in counter-clockwise order. These triangles are a complete triangulation of the rectangle $ [0, w] \\times [0, \\ell] $. Each of the $ n $ vertices is referenced by at least one triangle.\n\nOver all test cases, the sum of $ n $ is at most $50\\ 000$.", "outputFormat": "For each test case, if it is possible to construct a lava moat at a single elevation that connects the western border to the eastern border, output the minimum length of such a moat, with an absolute or relative error of at most $ 10^{-6} $. Otherwise, output `impossible`.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Lava Moat", "background": null, "description": "这些讨厌的正义军队又要来打扰地精们安静和平的土地了。建造一堵巨大的墙并没有奏效，因此地精们打算采用久经考验的防御手段：挖一条充满岩浆的护城河。他们想把这条护城河作为北方地精领地和南方正义军领地之间的边界，从西到东横穿整个边境地带。\n\n这对他们来说提出了一个挑战。边境地区地势多变，有丘陵甚至是山地，而岩浆护城河必须保持同一高程——否则高处的岩浆会流到低处并从护城河流出。因此，地精们必须选择一条完全位于同一高程上的路径，把边境地带的西部边界与东部边界连接起来。出于经济原因，他们希望这条路径尽可能短。\n\n这正是你需要出场的地方。你将得到边境地带的高程地图，你的任务是确定这条护城河最短能有多长。\n\n地图以完全三角剖分的矩形给出，尺寸为 $w \\times \\ell$，所有三角形均为正面积。没有顶点落在其它三角形边的内部。地图的西南角为坐标 $(0, 0)$，$x$ 轴向东，$y$ 轴向北。此外，西部边界（连接 $(0,0)$ 与 $(0,\\ell)$ 的线段，包括端点）是单条边。东部边界（连接 $(w, 0)$ 和 $(w, \\ell)$ 的线段，包括端点）同样如此。\n\n当然，这份地图只是实际三维地形的二维投影：每个 $(x, y)$ 点还有一个高程 $z$。三角剖分顶点的高程直接由地图指定，且所有给定的高程两两不同。任意其它点的高程可通过其所在三角形线性插值得到。换句话说，地形由多个三角形面片拼接而成，这些面片通过公共边连接。这些面片对应于地图中的三角形。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/u972p6cj.png)\n\n图 G.1：示例测试用例的插图。阴影表示高程，红色粗线表示最优护城河。\n:::", "inputFormat": "第一行输入一个整数 $t$（$1 \\le t \\le 10\\,000$），表示测试用例的数量。接下来的 $t$ 组测试用例描述如下。\n\n每个测试用例的第一行包含四个整数 $w$、$\\ell$、$n$ 和 $m$，其中 $w$（$1 \\le w \\le 10^6$）表示西到东的边境长度，$\\ell$（$1 \\le \\ell \\le 10^6$）表示南到北的边境长度，$n$（$4 \\le n \\le 50\\,000$）为顶点数，$m$（$n - 2 \\le m \\le 2n - 6$）为三角形数。\n\n接下来 $n$ 行描述顶点信息，第 $i$ 行包含三个整数 $x_i$、$y_i$、$z_i$（$0 \\le x_i \\le w$；$0 \\le y_i \\le \\ell$；$0 \\le z_i \\le 10^6$），表示第 $i$ 个顶点的坐标和高程。仅有四个角的顶点会满足 $x_i=0$ 或 $x_i=w$。所有 $(x_i, y_i)$ 互不相同，所有 $z_i$ 也互不相同。\n\n之后 $m$ 行，每行包含三个不同的整数 $a$、$b$、$c$（$1 \\le a, b, c \\le n$），表示由顶点 $a$、$b$、$c$ 按逆时针顺序组成的一个地图三角形。这些三角形共同完全三角剖分了矩形 $[0,w] \\times [0,\\ell]$。每个顶点至少会被一个三角形引用。\n\n所有测试用例中，$n$ 的总和不超过 $50\\,000$。", "outputFormat": "对于每个测试用例，如果可能构建一条高程一致、连接西部至东部边界的岩浆护城河，则输出最短长度，要求绝对误差或相对误差不超过 $10^{-6}$。如果无法实现，则输出 `impossible`。", "hint": "\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14287", "type": "P", "difficulty": 0, "samples": [["1000 4\n60\n100\n222\n650", "0 3\n1 1\n2 3\n3 1\n4 3\n5 1\n6 3\n7 2\n8 3"], ["967 1\n1000", "0 1\n6 2\n7 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "WF"], "title": "[ICPC 2025 WF] Score Values", "background": "", "description": "Ever since you arrived at your university, you have been a tireless advocate for introducing the brand-new martial-arts-plus-card-based sport of Contact Bridge to the school (and the world). Finally, after a great deal of (really persistent and annoying) advocacy on your part, you have obtained permission and funding from your dean to build a grand new arena for the sport! Well, technically it is not so much an \"arena\" as a \"broom closet\", and maybe not \"grand\" so much as \"cramped\", and the \"new\" is also debatable. But the sport of the future has to start somewhere!\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fvt2vbs0.png)\n\nGenerated by ChatGPT\n:::\n\nUnfortunately, you just realized that you are going to need a score display in order to run the games. In Contact Bridge, the score for a team starts at 0 and, after various repeatable actions, may be incremented by certain fixed amounts. There is also a maximum value – if the team's score would be incremented above the maximum, it will instead be capped there. You want the team's score to be visible at all times, so you will need to prepare some signs, each with a single digit printed on it, that can be arranged to show the score.\n\nUnfortunately the dean's \"funding\" is running short, and these signs are expensive. Figure out the minimum set of signs you need to purchase to show any score that is possible to achieve during the game. Note that you won't need any 9 signs, as any 6 sign can be turned upside-down to make a 9.\n", "inputFormat": "The first line of input contains two integers $ m $ and $ n $, where $ m $ ($ 1 \\le m \\le 10^{18} $) is the maximum score value, and $ n $ ($ 1 \\le n \\le 10 $) is the number of different ways of scoring. This is followed by $ n $ lines, each containing an integer $ p $ ($ 1 \\le p \\le 1000 $), which is the number of points awarded for a type of action in the game. No two types of action are awarded the same number of points.\n", "outputFormat": "For each digit from 0 to 8 in increasing order, output two integers: the digit and the number of signs with that digit that you need to purchase. Omit digits where the number of signs needed is 0.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Score Values", "background": "", "description": "Ever since you arrived at your university, you have been a tireless advocate for introducing the brand-new martial-arts-plus-card-based sport of Contact Bridge to the school (and the world). Finally, after a great deal of (really persistent and annoying) advocacy on your part, you have obtained permission and funding from your dean to build a grand new arena for the sport! Well, technically it is not so much an \"arena\" as a \"broom closet\", and maybe not \"grand\" so much as \"cramped\", and the \"new\" is also debatable. But the sport of the future has to start somewhere!\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fvt2vbs0.png)\n\nGenerated by ChatGPT\n:::\n\nUnfortunately, you just realized that you are going to need a score display in order to run the games. In Contact Bridge, the score for a team starts at 0 and, after various repeatable actions, may be incremented by certain fixed amounts. There is also a maximum value – if the team's score would be incremented above the maximum, it will instead be capped there. You want the team's score to be visible at all times, so you will need to prepare some signs, each with a single digit printed on it, that can be arranged to show the score.\n\nUnfortunately the dean's \"funding\" is running short, and these signs are expensive. Figure out the minimum set of signs you need to purchase to show any score that is possible to achieve during the game. Note that you won't need any 9 signs, as any 6 sign can be turned upside-down to make a 9.\n", "inputFormat": "The first line of input contains two integers $ m $ and $ n $, where $ m $ ($ 1 \\le m \\le 10^{18} $) is the maximum score value, and $ n $ ($ 1 \\le n \\le 10 $) is the number of different ways of scoring. This is followed by $ n $ lines, each containing an integer $ p $ ($ 1 \\le p \\le 1000 $), which is the number of points awarded for a type of action in the game. No two types of action are awarded the same number of points.\n", "outputFormat": "For each digit from 0 to 8 in increasing order, output two integers: the digit and the number of signs with that digit that you need to purchase. Omit digits where the number of signs needed is 0.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Score Values", "background": null, "description": "自从你进入大学以来，你一直在大力推广一种全新的集武术和纸牌于一体的运动——Contact Bridge（接触桥牌）——不仅在学校，在全世界也是如此。最终，在你坚持不懈（甚至有点烦人）的努力下，你终于从院长那里获得了建造这项运动的崭新竞技场的许可和资金！不过严格来说，这个地方与其说是“竞技场”，不如说是“扫帚间”；与其说是”崭新“，倒不如说是“拥挤”；而且这个“新”的说法也值得商榷。但毕竟，未来的体育项目总是要从某个地方开始的！\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/fvt2vbs0.png)\n\n由 ChatGPT 生成\n:::\n\n不幸的是，你刚刚意识到你需要一个分数牌展示系统来进行比赛。在 Contact Bridge 中，队伍的分数一开始是 $0$，通过各种可重复的操作，可以按某些固定数值进行加分。此外，存在一个最大分数值——如果队伍得分本应超过该上限，则只会被封顶在该最大值。你希望队伍分数在任何时候都能被清晰地看到，因此你需要准备一些只印有单个数字的牌子，可以用来排列展示分数。\n\n可惜的是，院长的“资金”很快就所剩无几，而且这些分数字牌很贵。请你计算出，为了展示比赛中所有可能出现的分数，你至少需要购买哪些数字的牌，以及每种数字的牌需要多少个。注意，你不需要购买 $9$ 这个数字的牌，因为任何 $6$ 的牌都可以倒过来当作 $9$ 来使用。", "inputFormat": "输入的第一行包含两个整数 $m$ 和 $n$，其中 $m$（$1 \\le m \\le 10^{18}$）为最大得分值，$n$（$1 \\le n \\le 10$）为不同加分方式的种数。接下来的 $n$ 行，每行包含一个整数 $p$（$1 \\le p \\le 1000$），表示某种操作能获得的分数。每种操作所得分数均不相同。", "outputFormat": "对于每个从 $0$ 到 $8$ 的数字，按数字升序输出两个整数，分别表示该数字以及需要购买该数字牌子的数量。如果某个数字不需要牌子，则省略该行输出。", "hint": "\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14288", "type": "P", "difficulty": 0, "samples": [["5\n4\n\n3\n\n3\n\n3\n\n2\n\n1", "\n\n1 1\n\n4 2\n\n3 1\n\n3 1\n\n5 4"], ["3\n3\n\n2\n\n2\n\n1", "\n\n2 -1\n\n3 -1\n\n2 -1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "交互题", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2025 WF] Slot Machine【暂无交互库】", "background": "", "description": "Imperial Chance & Play Casino offers games using a slot machine that has $n$ wheels arranged next to each other. Each of the wheels has $n$ distinct symbols on it, and these symbols appear in the same order on each wheel. Each wheel shows one of its symbols through a window on the front of the machine, which results in a sequence of $n$ symbols being shown next to each other.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c78s2nk1.png)\n:::\n\nYou are standing behind the machine and notice that a maintenance panel has been left open. When you stick your hand inside, you are able to secretly rotate any of the wheels by any number of steps, thus changing the symbol shown on that wheel. You want to win a jackpot, which will happen if all the wheels show the same symbol at the same time. Unfortunately, you cannot see the symbols from your position, so you asked your good friend to help you. The friend is standing in front of the machine and she tells you the number of distinct symbols in the sequence she can currently see. Can you win the jackpot by manipulating the wheels if your friend updates the information after every action you make?\n\n### Interaction\n\nThe first line of input contains an integer $n$ ($3 \\le n \\le 50$), giving the number of wheels and symbols in the machine.\n\nInteraction then proceeds in rounds. In each round, one line of input becomes available, containing an integer $k$ ($1 \\le k \\le n$), the number of distinct symbols in the current sequence. If $k > 1$, output two integers $i$ and $j$ ($1 \\le i \\le n$; $-10^9 \\le j \\le 10^9$), representing your action: rotating the $i^\\text{th}$ wheel by $j$ positions, where negative numbers indicate rotating in the opposite direction. Otherwise, if $k = 1$, indicating that all wheels show the same symbol, your program must exit without printing more output.\n\nAt most 10000 actions are allowed – if your submission uses more rounds, it will not be accepted. It is guaranteed that the initial configuration of wheels does not already have all wheels showing the same symbol ($k > 1$ in the first round).\n\nThe judge program will not behave in an adversarial way, which means the initial configuration is fixed before the first action.\n\nA testing tool is provided to help you develop and test your solution.", "inputFormat": "", "outputFormat": "", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Slot Machine【暂无交互库】", "background": "", "description": "Imperial Chance & Play Casino offers games using a slot machine that has $n$ wheels arranged next to each other. Each of the wheels has $n$ distinct symbols on it, and these symbols appear in the same order on each wheel. Each wheel shows one of its symbols through a window on the front of the machine, which results in a sequence of $n$ symbols being shown next to each other.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c78s2nk1.png)\n:::\n\nYou are standing behind the machine and notice that a maintenance panel has been left open. When you stick your hand inside, you are able to secretly rotate any of the wheels by any number of steps, thus changing the symbol shown on that wheel. You want to win a jackpot, which will happen if all the wheels show the same symbol at the same time. Unfortunately, you cannot see the symbols from your position, so you asked your good friend to help you. The friend is standing in front of the machine and she tells you the number of distinct symbols in the sequence she can currently see. Can you win the jackpot by manipulating the wheels if your friend updates the information after every action you make?\n\n### Interaction\n\nThe first line of input contains an integer $n$ ($3 \\le n \\le 50$), giving the number of wheels and symbols in the machine.\n\nInteraction then proceeds in rounds. In each round, one line of input becomes available, containing an integer $k$ ($1 \\le k \\le n$), the number of distinct symbols in the current sequence. If $k > 1$, output two integers $i$ and $j$ ($1 \\le i \\le n$; $-10^9 \\le j \\le 10^9$), representing your action: rotating the $i^\\text{th}$ wheel by $j$ positions, where negative numbers indicate rotating in the opposite direction. Otherwise, if $k = 1$, indicating that all wheels show the same symbol, your program must exit without printing more output.\n\nAt most 10000 actions are allowed – if your submission uses more rounds, it will not be accepted. It is guaranteed that the initial configuration of wheels does not already have all wheels showing the same symbol ($k > 1$ in the first round).\n\nThe judge program will not behave in an adversarial way, which means the initial configuration is fixed before the first action.\n\nA testing tool is provided to help you develop and test your solution.", "inputFormat": "", "outputFormat": "", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Slot Machine【暂无交互库】", "background": "翻译来自 [LOJ](https://loj.ac/p/6991)。", "description": "皇家机遇与博弈赌场提供一种老虎机游戏，该老虎机有 $n$ 个并排排列的转轮。每个转轮上都有 $n$ 个不同的符号，并且这些符号在每个转轮上的排列顺序都相同。每个转轮通过机器正面的一个窗口显示其上的一个符号，从而形成一个由 $n$ 个符号并排显示的序列。\n\n:::align{center}\n![Fig I.1](https://cdn.luogu.com.cn/upload/image_hosting/c78s2nk1.png)\n\n图 I.1：样例 1 中的初始配置。\n:::\n\n你正站在机器后面，注意到一个维修面板开着。当你把手伸进去时，你可以秘密地旋转任意一个转轮任意步数，从而改变该转轮上显示的符号。你想要赢得大奖，而要赢得大奖，所有转轮必须同时显示相同的符号。不幸的是，从你的位置你无法看到这些符号，所以你请了一位好朋友来帮你。这位朋友站在机器前面，她会告诉你她当前能看到的序列中有多少种不同的符号。如果你的朋友在你每次操作后都更新信息，你能通过操纵转轮来赢得大奖吗？\n\n### 交互方式\n\n输入的第一行包含一个整数 $n \\ (3 \\leq n \\leq 50)$，表示机器中转轮和符号的数量。\n\n然后交互按轮次进行。在每一轮中，你会得到一行输入，包含一个整数 $k \\ (1 \\leq k \\leq n)$，即当前序列中不同符号的数量。如果 $k>1$，你需要输出两个整数 $i$ 和 $j \\ (1 \\leq i \\leq n; -10^{9} \\leq j \\leq 10^{9})$，代表你的操作：将第 $i$ 个转轮旋转 $j$ 个位置，其中负数表示向相反方向旋转。否则，如果 $k=1$，表示所有转轮都显示相同的符号，你的程序必须退出，并且不再输出任何内容。\n\n最多允许进行 $10000$ 次操作——如果你的提交使用的轮次超过此数，将不被接受。保证初始配置中并非所有转轮都显示相同的符号（即第一轮中 $k>1$）。\n\n评测程序不会以自适应性的方式运行，这意味着初始配置在第一次操作前是固定的。", "inputFormat": "见“交互方式”。", "outputFormat": "见“交互方式”。", "hint": "提供了一个测试工具来帮助你开发和测试你的解决方案。", "locale": "zh-CN"}}}
{"pid": "P14290", "type": "P", "difficulty": 0, "samples": [["3 3 5 1 1\n1 3 1\n3 3 2\n2 3 3\n2 2 4\n2 1 5", "3"], ["3 5 4 3 4\n2 4 1\n2 2 2\n1 1 4\n3 1 5", "1"], ["3 3 3 3 3\n2 3 1\n2 1 2\n1 2 4", "0"], ["3 3 4 3 2\n2 1 2\n2 3 3\n1 3 4\n1 1 5", "impossible"], ["3 3 3 2 2\n3 2 0\n2 2 1\n2 3 0", "impossible"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "WF"], "title": "[ICPC 2025 WF] Treasure Map", "background": "", "description": "After years of searching you have come across Captain Blackbeard's old map showing where his long-lost treasure is hidden, deep on the ocean floor. The map was once a hypsometric map – that is, it showed the ocean depth for the region around the treasure – but many of the elevation marks have faded away over time and are no longer legible.\n\nSpecifically, the map covers a rectangular part of the ocean, subdivided into an $(n - 1) \\times (m - 1)$ rectangular grid of unit squares. The map originally showed the ocean depth $d(p)$ for each point $p = (x, y)$ with integer coordinates $1 \\leq x \\leq n$ and $1 \\leq y \\leq m$. There are no islets in the region. In other words, it is known that $d(p) \\geq 0$ for all points.\n\nPreparing the map must have been quite a struggle for Blackbeard, since there is no unique natural way to interpolate the depths between points with non-integer coordinates. Consider a unit square on the grid, with corners at the grid points $A$, $B$, $C$, and $D$ in clockwise order, and some depth $d(p)$ stored for each $p \\in \\{A, B, C, D\\}$. One natural way is to interpolate the depth in the triangle $ABC$ linearly, and likewise in $CDA$. Another equally natural way is to interpolate linearly within $BCD$, and likewise within $DAB$. Usually, the results of those two interpolations are different. For example, if $d(A) = d(B) = d(C) = 0$ and $d(D) = 1$, the first method results in depths across all of $ABC$ being equal to zero (Figure K.1 left), while the second method results in the depths being positive in the whole interior of the square (right).\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/b2xoimzb.png)\n:::\n\nHowever, Blackbeard was as stubborn as he was cruel and would not let such pesky ambiguities stop him. To find the perfect hiding spot for his treasure, he scoured the seven seas for a region of the ocean where the two methods described above yield the same results for each unit square (or maybe he forced some of his pirates to do a bit of terraforming work to achieve this – scholars disagree).\n\nBack in the present, you are preparing an expedition to retrieve the treasure, and would like to figure out at what depth the treasure could be buried. Specifically, given the remaining depth data of the map, you should calculate the smallest possible depth at the treasure location.", "inputFormat": "The first line of input contains five integers $n$, $m$, $k$, $t_x$, and $t_y$, where $n$ and $m$ ($2 \\leq n, m \\leq 3 \\cdot 10^5$) denote the maximum coordinates of the grid, $k$ ($1 \\leq k \\leq 3 \\cdot 10^5$) is the number of known depths, and $(t_x, t_y)$ is the location of the treasure ($1 \\leq t_x \\leq n$; $1 \\leq t_y \\leq m$). Each of the next $k$ lines contains three integers $x$, $y$, and $d$ ($1 \\leq x \\leq n$; $1 \\leq y \\leq m$; $0 \\leq d \\leq 10^9$), indicating that the depth at coordinate $(x, y)$ of the grid equals $d$. Each pair $(x, y)$ appears in the input at most once.", "outputFormat": "If the provided data points can be extended to a valid map (that is, a map where, for each unit square, the two methods of interpolation yield the same results, and all points have non-negative depth), output one integer: the smallest possible depth of $(t_x, t_y)$ – it can be shown that this is always an integer. Otherwise, output impossible.\n", "hint": "**Explanation of Sample 5:** Even though the depth of $(2, 2)$ is given in the input, the provided data points cannot be extended to a valid map, so the correct answer is impossible.\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Treasure Map", "background": "", "description": "After years of searching you have come across Captain Blackbeard's old map showing where his long-lost treasure is hidden, deep on the ocean floor. The map was once a hypsometric map – that is, it showed the ocean depth for the region around the treasure – but many of the elevation marks have faded away over time and are no longer legible.\n\nSpecifically, the map covers a rectangular part of the ocean, subdivided into an $(n - 1) \\times (m - 1)$ rectangular grid of unit squares. The map originally showed the ocean depth $d(p)$ for each point $p = (x, y)$ with integer coordinates $1 \\leq x \\leq n$ and $1 \\leq y \\leq m$. There are no islets in the region. In other words, it is known that $d(p) \\geq 0$ for all points.\n\nPreparing the map must have been quite a struggle for Blackbeard, since there is no unique natural way to interpolate the depths between points with non-integer coordinates. Consider a unit square on the grid, with corners at the grid points $A$, $B$, $C$, and $D$ in clockwise order, and some depth $d(p)$ stored for each $p \\in \\{A, B, C, D\\}$. One natural way is to interpolate the depth in the triangle $ABC$ linearly, and likewise in $CDA$. Another equally natural way is to interpolate linearly within $BCD$, and likewise within $DAB$. Usually, the results of those two interpolations are different. For example, if $d(A) = d(B) = d(C) = 0$ and $d(D) = 1$, the first method results in depths across all of $ABC$ being equal to zero (Figure K.1 left), while the second method results in the depths being positive in the whole interior of the square (right).\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/b2xoimzb.png)\n:::\n\nHowever, Blackbeard was as stubborn as he was cruel and would not let such pesky ambiguities stop him. To find the perfect hiding spot for his treasure, he scoured the seven seas for a region of the ocean where the two methods described above yield the same results for each unit square (or maybe he forced some of his pirates to do a bit of terraforming work to achieve this – scholars disagree).\n\nBack in the present, you are preparing an expedition to retrieve the treasure, and would like to figure out at what depth the treasure could be buried. Specifically, given the remaining depth data of the map, you should calculate the smallest possible depth at the treasure location.", "inputFormat": "The first line of input contains five integers $n$, $m$, $k$, $t_x$, and $t_y$, where $n$ and $m$ ($2 \\leq n, m \\leq 3 \\cdot 10^5$) denote the maximum coordinates of the grid, $k$ ($1 \\leq k \\leq 3 \\cdot 10^5$) is the number of known depths, and $(t_x, t_y)$ is the location of the treasure ($1 \\leq t_x \\leq n$; $1 \\leq t_y \\leq m$). Each of the next $k$ lines contains three integers $x$, $y$, and $d$ ($1 \\leq x \\leq n$; $1 \\leq y \\leq m$; $0 \\leq d \\leq 10^9$), indicating that the depth at coordinate $(x, y)$ of the grid equals $d$. Each pair $(x, y)$ appears in the input at most once.", "outputFormat": "If the provided data points can be extended to a valid map (that is, a map where, for each unit square, the two methods of interpolation yield the same results, and all points have non-negative depth), output one integer: the smallest possible depth of $(t_x, t_y)$ – it can be shown that this is always an integer. Otherwise, output impossible.\n", "hint": "**Explanation of Sample 5:** Even though the depth of $(2, 2)$ is given in the input, the provided data points cannot be extended to a valid map, so the correct answer is impossible.\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Treasure Map", "background": null, "description": "经过多年的寻找，你终于发现了海盗 Blackbeard 的老藏宝图，显示了他那失落已久的宝藏，深藏在海底之下。这张地图曾是一张等高线图——也就是说，它展示了宝藏附近地区的海洋深度——但许多高程标记已随着时间流逝而褪色，现在无法辨认。\n\n具体来说，地图覆盖了一个矩形海域，被细分成 $(n-1) \\times (m-1)$ 的单位正方形网格。原本，地图上每个整点 $p=(x, y)$，其中 $1 \\leq x \\leq n$ 且 $1 \\leq y \\leq m$，都会标记海洋深度 $d(p)$。已知该区域没有岛屿，也就是说对所有点都有 $d(p) \\geq 0$。\n\n绘制这张地图对 Blackbeard 来说必定很具挑战性，因为对于非整点坐标的深度插值，没有唯一自然的方式。考虑位于网格上的一个单位正方形，其四个顶点依次为 $A$、$B$、$C$、$D$（顺时针），每个点 $p \\in \\{A, B, C, D\\}$ 存储一个深度 $d(p)$。一种自然的插值方法是，在三角形 $ABC$ 内进行线性插值，三角形 $CDA$ 也如此。另一种同样自然的方式，是分别在 $BCD$ 和 $DAB$ 内线性插值。通常，这两种插值的结果会不同。例如，如果 $d(A) = d(B) = d(C) = 0$ 且 $d(D) = 1$，第一种方式会使 $ABC$ 区域内的深度始终为零（见下图左），而第二种方式会使该正方形内部所有点的深度为正（见下图右）。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/b2xoimzb.png)\n:::\n\n然而，Blackbeard 的固执与残忍一样著名，他并不会让这种令人头疼的歧义阻止自己。为了找到藏匿宝藏的绝佳地点，他不惜踏遍七海，寻找海底区域使上述两种插值方法对每个单位正方形来说均得到相同的结果（或者说，他强令手下海盗对海底进行了些“地形改造”——学者们对此说法尚有争议）。\n\n回到现实，现在你正准备组织考察队去打捞宝藏，希望能推断出宝藏可能被埋藏的最浅深度。具体来说，给定藏宝图上依然可辨的部分深度数据，请你计算在宝藏所在位置，可能的最小深度。", "inputFormat": "第一行输入五个整数 $n$、$m$、$k$、$t_x$ 和 $t_y$，其中 $n$ 和 $m$（$2 \\leq n, m \\leq 3 \\cdot 10^5$）表示网格的最大坐标，$k$（$1 \\leq k \\leq 3 \\cdot 10^5$） 表示已知的深度点数，$(t_x, t_y)$ 是宝藏所在的坐标（$1 \\leq t_x \\leq n$，$1 \\leq t_y \\leq m$）。接下来的 $k$ 行每行三个整数 $x$、$y$、$d$（$1 \\leq x \\leq n$，$1 \\leq y \\leq m$，$0 \\leq d \\leq 10^9$），表示网格上 $(x, y)$ 的深度为 $d$。每个 $(x, y)$ 对应的点在输入中至多出现一次。", "outputFormat": "如果这些已知数据点可以扩展成一份合法的地图（即对于每一个单位方格，两种插值方法的结果一致，且所有点的深度不小于零），输出一个整数：宝藏位置 $(t_x, t_y)$ 可能的最小深度——可以证明这个深度总为整数。否则输出 impossible。", "hint": "**样例 5 说明：** 即使输入中已给出 $(2,2)$ 点的深度，但这些数据无法扩展成一份合法的地图，因此正确输出为 impossible。\n\n由 ChatGPT 5 翻译", "locale": "zh-CN"}}}
{"pid": "P14291", "type": "P", "difficulty": 3, "samples": [["2 1 7 5 1\n3 6 5 9\n2 3 6 5", "3.0"], ["2 0 10 10 0\n2 7 3 8\n4 3 8 5", "7.0"], ["2 11 -1 -1 11\n2 7 3 8\n4 3 8 5", "0.0"], ["3 1 5 9 5\n-5 6 2 9\n4 7 12 8\n1 1 7 3", "0.0"], ["3 1 7 9 3\n2 6 3 8\n4 4 5 6\n6 2 7 4", "0.0"], ["1 0 0 0 0\n-5 -5 5 5", "0.0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["贪心", "2025", "Special Judge", "差分", "ICPC", "WF"], "title": "[ICPC 2025 WF] Walking on Sunshine", "background": "", "description": "I'm walking on sunshine, and it don't feel good – my eyes hurt!\n\nBaku has plenty of sunshine. If you walk away from the sun, or at least perpendicular to its rays, it does not shine in your eyes. For this problem assume that the sun shines from the south. Walking west or east or in any direction between west and east with a northward component avoids looking into the sun. Your eyes will hurt if you walk in any direction with a southward component.\n\nBaku also has many rectangular areas of shade, and staying in these protects your eyes regardless of which direction you walk in. For example, Figure L.1 shows two shaded areas.\n\nFind the minimum distance you need to walk with the sun shining in your eyes to get from the contest location to the awards ceremony location.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/lhfhv5fh.png)\n\nFigure L.1: Sample Input 1 and a path that minimizes the sun shining in your eyes.\n:::", "inputFormat": "The first line of input contains five integers $n$, $x_c$, $y_c$, $x_a$, and $y_a$, where $n$ ($0 \\leq n \\leq 10^5$) is the number of shaded areas, $(x_c, y_c)$ is the location of the contest, and $(x_a, y_a)$ is the location of the awards ceremony ($-10^6 \\leq x_c, y_c, x_a, y_a \\leq 10^6$). The sun shines in the direction $(0, 1)$ from south towards north. You look into the sun if you walk in direction $(x, y)$ for any $y < 0$ and any $x$.\n\nThe next $n$ lines describe the shaded areas, which are axis-aligned rectangles. Each of these lines contains four integers $x_1$, $y_1$, $x_2$, and $y_2$ ($-10^6 \\leq x_1 < x_2 \\leq 10^6$; $-10^6 \\leq y_1 < y_2 \\leq 10^6$). The southwest corner of the rectangle is $(x_1, y_1)$ and its northeast corner is $(x_2, y_2)$. The rectangles describing the shaded areas do not touch or intersect.", "outputFormat": "Output the minimum distance you have to walk with the sun shining in your eyes. Your answer must have an absolute or relative error of at most $10^{-7}$.", "hint": "**Explanation of Sample 1:** Figure L.1 shows an optimal path from the contest location to the awards ceremony location with 5 segments. On the first segment you walk away from the sun. On the second and fourth segments you walk towards the sun but in a shaded area. On the third and fifth segments you walk towards the sun outside the shaded areas. The total length of these two segments is 3.\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 WF] Walking on Sunshine", "background": "", "description": "I'm walking on sunshine, and it don't feel good – my eyes hurt!\n\nBaku has plenty of sunshine. If you walk away from the sun, or at least perpendicular to its rays, it does not shine in your eyes. For this problem assume that the sun shines from the south. Walking west or east or in any direction between west and east with a northward component avoids looking into the sun. Your eyes will hurt if you walk in any direction with a southward component.\n\nBaku also has many rectangular areas of shade, and staying in these protects your eyes regardless of which direction you walk in. For example, Figure L.1 shows two shaded areas.\n\nFind the minimum distance you need to walk with the sun shining in your eyes to get from the contest location to the awards ceremony location.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/lhfhv5fh.png)\n\nFigure L.1: Sample Input 1 and a path that minimizes the sun shining in your eyes.\n:::", "inputFormat": "The first line of input contains five integers $n$, $x_c$, $y_c$, $x_a$, and $y_a$, where $n$ ($0 \\leq n \\leq 10^5$) is the number of shaded areas, $(x_c, y_c)$ is the location of the contest, and $(x_a, y_a)$ is the location of the awards ceremony ($-10^6 \\leq x_c, y_c, x_a, y_a \\leq 10^6$). The sun shines in the direction $(0, 1)$ from south towards north. You look into the sun if you walk in direction $(x, y)$ for any $y < 0$ and any $x$.\n\nThe next $n$ lines describe the shaded areas, which are axis-aligned rectangles. Each of these lines contains four integers $x_1$, $y_1$, $x_2$, and $y_2$ ($-10^6 \\leq x_1 < x_2 \\leq 10^6$; $-10^6 \\leq y_1 < y_2 \\leq 10^6$). The southwest corner of the rectangle is $(x_1, y_1)$ and its northeast corner is $(x_2, y_2)$. The rectangles describing the shaded areas do not touch or intersect.", "outputFormat": "Output the minimum distance you have to walk with the sun shining in your eyes. Your answer must have an absolute or relative error of at most $10^{-7}$.", "hint": "**Explanation of Sample 1:** Figure L.1 shows an optimal path from the contest location to the awards ceremony location with 5 segments. On the first segment you walk away from the sun. On the second and fourth segments you walk towards the sun but in a shaded area. On the third and fifth segments you walk towards the sun outside the shaded areas. The total length of these two segments is 3.\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 WF] Walking on Sunshine", "background": null, "description": "我在阳光下行走，但这感觉并不好——我的眼睛很疼！\n\n巴库的阳光很充足。如果你背对太阳行走，或者至少垂直于它的光线行走，阳光就不会直射你的眼睛。对于本题，我们假设太阳从正南方照射。向西、向东或任何介于西和东之间且带有向北分量的方向行走，都可以避免直视太阳。如果你朝任何带有向南分量的方向行走，你的眼睛就会感到刺痛。\n\n巴库也有许多矩形的阴影区域，停留在这些区域内可以保护你的眼睛，无论你朝哪个方向行走。例如，图 L.1 展示了两个阴影区域。\n\n请计算你从比赛地点前往颁奖典礼地点时，必须在阳光下（即阳光刺眼的情况下）行走的最短距离。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/lhfhv5fh.png)\n\n图 L.1: 样例输入 1 以及一条最小化阳光刺眼程度的路径。\n:::", "inputFormat": "第一行输入包含五个整数 $ n $、$ x_c $、$ y_c $、$ x_a $ 和 $ y_a $，其中 $ n $ ($ 0 \\leq n \\leq 10^5 $) 是阴影区域的数量，$ (x_c, y_c) $ 是比赛地点，$ (x_a, y_a) $ 是颁奖典礼地点 ($ -10^6 \\leq x_c, y_c, x_a, y_a \\leq 10^6 $)。太阳从正南方向北照射，即方向为从 $ (0,0) $ 到 $ (0, 1) $。如果你朝方向 $ (x, y) $ 行走，其中 $ y < 0 $ 且 $ x $ 为任意值，那么你就会直视太阳。\n\n接下来的 $ n $ 行描述了阴影区域，它们是与坐标轴对齐的矩形。每行包含四个整数 $ x_1 $、$ y_1 $、$ x_2 $ 和 $ y_2 $ ($ -10^6 \\leq x_1 < x_2 \\leq 10^6 $；$ -10^6 \\leq y_1 < y_2 \\leq 10^6 $)。矩形的西南角是 $ (x_1, y_1) $，东北角是 $ (x_2, y_2) $。描述阴影区域的矩形之间不会相互接触或相交。", "outputFormat": "输出你必须在阳光下（即阳光刺眼）行走的最短距离。你的答案的绝对误差或相对误差必须不超过 $ 10^{-7} $。", "hint": "**样例 1 解释：** 图 L.1 展示了一条从比赛地点到颁奖典礼地点的最优路径，包含 5 段直线路程。在第一段，你背对太阳行走。在第二段和第四段，你虽然面向太阳行走，但位于阴影区域内。在第三段和第五段，你在阴影区域外面向太阳行走。这两段的总长度是 3。", "locale": "zh-CN"}}}
{"pid": "P14292", "type": "P", "difficulty": 1, "samples": [["3\n2 5 8", "Yes"], ["4\n1 4 6 4", "No"], ["8\n9 8 11 1 1 6 10 4", "No"], ["20\n2 15 4 30 6 8 11 27 14 3 16 26 19 2 23 21 18 13 28 6", "Yes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "2023", "JOI（日本）"], "title": "[JOI2024 预选赛 R2] 卡牌游戏 / Card Game 2", "background": "", "description": "比太郎持有 $N$ 张卡片，第 $i$ 张卡片（$1 \\le i \\le N$）上写有一个整数 $A_i$。他希望从这些卡片中选出满足以下条件的三张卡片。\n\n**条件：**\n\n- 选出的三张卡片上所写的整数彼此相差 $3$。更精确地说，选出的三张卡片上的整数可以表示为某个整数 $x$，以及 $x+3$、$x+6$。\n\n例如，若比太郎持有 $5$ 张卡片，上面分别写着 $2, 4, 5, 7, 10$，则选择写有 $4, 7, 10$ 的三张卡片即可满足条件。\n\n给定比太郎所持卡片的信息，请编写一个程序，判断是否能够选出满足条件的三张卡片。", "inputFormat": "输入以如下格式给出：\n\n$N$\n\n$A_1\\ A_2\\ \\cdots\\ A_N$", "outputFormat": "若能够选出满足条件的三张卡片，则输出 `Yes`；否则输出 `No`。", "hint": "### 样例解释\n\n- 样例 $1$ 可以选择 $2,5,8$；\n- 样例 $2,3$ 不存在可以选择的情况；\n- 样例 $4$ 可以选择 $15,18,21$；\n\n### 约束\n\n- $3 \\le N \\le 200\\,000$。\n- $1 \\le A_i \\le 200\\,000$（$1 \\le i \\le N$）。\n- 所有输入的值均为整数。\n\n### 子任务\n\n1. （20 分）$N = 3$。\n2. （20 分）$A_i \\le 7$（$1 \\le i \\le N$）。\n3. （30 分）$N \\le 100$。\n4. （30 分）无额外约束。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2024 预选赛 R2] 卡牌游戏 / Card Game 2", "background": "", "description": "比太郎持有 $N$ 张卡片，第 $i$ 张卡片（$1 \\le i \\le N$）上写有一个整数 $A_i$。他希望从这些卡片中选出满足以下条件的三张卡片。\n\n**条件：**\n\n- 选出的三张卡片上所写的整数彼此相差 $3$。更精确地说，选出的三张卡片上的整数可以表示为某个整数 $x$，以及 $x+3$、$x+6$。\n\n例如，若比太郎持有 $5$ 张卡片，上面分别写着 $2, 4, 5, 7, 10$，则选择写有 $4, 7, 10$ 的三张卡片即可满足条件。\n\n给定比太郎所持卡片的信息，请编写一个程序，判断是否能够选出满足条件的三张卡片。", "inputFormat": "输入以如下格式给出：\n\n$N$\n\n$A_1\\ A_2\\ \\cdots\\ A_N$", "outputFormat": "若能够选出满足条件的三张卡片，则输出 `Yes`；否则输出 `No`。", "hint": "### 样例解释\n\n- 样例 $1$ 可以选择 $2,5,8$；\n- 样例 $2,3$ 不存在可以选择的情况；\n- 样例 $4$ 可以选择 $15,18,21$；\n\n### 约束\n\n- $3 \\le N \\le 200\\,000$。\n- $1 \\le A_i \\le 200\\,000$（$1 \\le i \\le N$）。\n- 所有输入的值均为整数。\n\n### 子任务\n\n1. （20 分）$N = 3$。\n2. （20 分）$A_i \\le 7$（$1 \\le i \\le N$）。\n3. （30 分）$N \\le 100$。\n4. （30 分）无额外约束。", "locale": "zh-CN"}}}
{"pid": "P14293", "type": "P", "difficulty": 3, "samples": [["5 1 3\n10 1\n40 1\n30 1\n20 1\n50 1\n1 2 4\n1 3 5\n1 1 5", "45\n50\n75"], ["5 3 3\n10 1\n40 3\n30 2\n20 1\n50 3\n1 2 4\n3 3 5\n2 1 5", "80\n75\n135"], ["5 5 3\n50 2\n70 4\n20 5\n30 1\n10 3\n4 2 4\n5 1 5\n2 3 4", "85\n170\n50"], ["10 5 4\n2 1\n2 5\n2 4\n2 3\n2 4\n2 2\n2 2\n2 4\n2 2\n2 1\n3 2 7\n1 1 7\n2 1 10\n5 5 8", "11\n13\n17\n8"], ["10 10 10\n741703628 7\n231838922 5\n920286164 3\n763741914 5\n246151406 7\n54109256 1\n966457488 5\n441379880 10\n458514202 2\n224373612 1\n5 5 10\n2 2 7\n1 9 9\n1 3 4\n9 4 6\n1 1 7\n9 4 7\n4 8 8\n7 5 9\n1 4 5", "1907757100\n3182585150\n458514202\n1684028078\n1064002576\n3897234150\n2030460064\n441379880\n2043536529\n1009893320"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "二分", "2023", "前缀和", "JOI（日本）"], "title": "[JOI2024 预选赛 R2] 购物 2 / Shopping 2", "background": "", "description": "JOI 商店有 $N$ 件商品，每件商品被编号为从 $1$ 到 $N$。\n\n每件商品都有一个**定价**和**种类**。商品 $i$（$1 \\le i \\le N$）的定价为 $P_i$ 日元。商品的种类用 $1$ 到 $M$ 之间的整数表示，商品 $i$（$1 \\le i \\le N$）的种类为 $A_i$。\n\nJOI 商店决定举行一次促销活动。促销持续 $M$ 天，在第 $j$ 天（$1 \\le j \\le M$），所有种类为 $j$ 的商品均以定价的一半价格出售。\n\n在促销期间，共有 $Q$ 位顾客访问了 JOI 商店。每位顾客被编号为从 $1$ 到 $Q$。顾客 $k$（$1 \\le k \\le Q$）在促销的第 $T_k$ 天访问商店，并购买了商品 $L_k, L_k+1, \\cdots, R_k$ 各一件。\n\n为了评估促销的效果，商店希望知道每位顾客购买商品所花费的金额。\n\n给定商品信息和顾客信息，编写一个程序，计算每位顾客购买商品所花费的金额。", "inputFormat": "输入以如下格式给出：\n\n$N\\ M\\ Q$\n\n$P_1\\ A_1$\n\n$P_2\\ A_2$\n\n$\\vdots$\n\n$P_N\\ A_N$\n\n$T_1\\ L_1\\ R_1$\n\n$T_2\\ L_2\\ R_2$\n\n$\\vdots$\n\n$T_Q\\ L_Q\\ R_Q$", "outputFormat": "输出 $Q$ 行。第 $k$ 行（$1 \\le k \\le Q$）应输出顾客 $k$ 购买商品所花费的金额，单位“日元”省略不写。\n", "hint": "### 样例 1 解释\n\n顾客 1 购买商品所花费的金额为 $40 \\div 2 + 30 \\div 2 + 20 \\div 2 = 45$ 日元，因此第一行输出 45。\n\n顾客 2 购买商品所花费的金额为 $30 \\div 2 + 20 \\div 2 + 50 \\div 2 = 50$ 日元，因此第二行输出 50。\n\n顾客 3 购买商品所花费的金额为 $10 \\div 2 + 40 \\div 2 + 30 \\div 2 + 20 \\div 2 + 50 \\div 2 = 75$ 日元，因此第三行输出 75。\n\n该输入样例满足子任务 1、2、3、6 的约束。\n\n### 样例 2 解释\n\n顾客 1 购买商品所花费的金额为 $40 + 30 + 20 \\div 2 = 80$ 日元，因此第一行输出 80。\n\n顾客 2 购买商品所花费的金额为 $30 + 20 + 50 \\div 2 = 75$ 日元，因此第二行输出 75。\n\n顾客 3 购买商品所花费的金额为 $10 + 40 + 30 \\div 2 + 20 + 50 = 135$ 日元，因此第三行输出 135。\n\n该输入样例满足子任务 1、3、6 的约束。\n\n### 数据范围\n\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 200\\,000$。\n- $1 \\le Q \\le 200\\,000$。\n- $2 \\le P_i \\le 10^9$（$1 \\le i \\le N$）。\n- $P_i$ 为偶数（$1 \\le i \\le N$）。\n- $1 \\le A_i \\le M$（$1 \\le i \\le N$）。\n- $1 \\le T_k \\le M$（$1 \\le k \\le Q$）。\n- $1 \\le L_k \\le R_k \\le N$（$1 \\le k \\le Q$）。\n- 所有输入的值均为整数。\n\n### 子任务\n\n1. （15 分）$N \\le 2\\,000$，$M \\le 2\\,000$，$Q \\le 2\\,000$。\n2. （20 分）$M = 1$。\n3. （12 分）$M \\le 10$。\n4. （14 分）$A_i \\ne A_j$（$1 \\le i < j \\le N$）。\n5. （22 分）$P_i = 2$（$1 \\le i \\le N$）。\n6. （17 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2024 预选赛 R2] 购物 2 / Shopping 2", "background": "", "description": "JOI 商店有 $N$ 件商品，每件商品被编号为从 $1$ 到 $N$。\n\n每件商品都有一个**定价**和**种类**。商品 $i$（$1 \\le i \\le N$）的定价为 $P_i$ 日元。商品的种类用 $1$ 到 $M$ 之间的整数表示，商品 $i$（$1 \\le i \\le N$）的种类为 $A_i$。\n\nJOI 商店决定举行一次促销活动。促销持续 $M$ 天，在第 $j$ 天（$1 \\le j \\le M$），所有种类为 $j$ 的商品均以定价的一半价格出售。\n\n在促销期间，共有 $Q$ 位顾客访问了 JOI 商店。每位顾客被编号为从 $1$ 到 $Q$。顾客 $k$（$1 \\le k \\le Q$）在促销的第 $T_k$ 天访问商店，并购买了商品 $L_k, L_k+1, \\cdots, R_k$ 各一件。\n\n为了评估促销的效果，商店希望知道每位顾客购买商品所花费的金额。\n\n给定商品信息和顾客信息，编写一个程序，计算每位顾客购买商品所花费的金额。", "inputFormat": "输入以如下格式给出：\n\n$N\\ M\\ Q$\n\n$P_1\\ A_1$\n\n$P_2\\ A_2$\n\n$\\vdots$\n\n$P_N\\ A_N$\n\n$T_1\\ L_1\\ R_1$\n\n$T_2\\ L_2\\ R_2$\n\n$\\vdots$\n\n$T_Q\\ L_Q\\ R_Q$", "outputFormat": "输出 $Q$ 行。第 $k$ 行（$1 \\le k \\le Q$）应输出顾客 $k$ 购买商品所花费的金额，单位“日元”省略不写。\n", "hint": "### 样例 1 解释\n\n顾客 1 购买商品所花费的金额为 $40 \\div 2 + 30 \\div 2 + 20 \\div 2 = 45$ 日元，因此第一行输出 45。\n\n顾客 2 购买商品所花费的金额为 $30 \\div 2 + 20 \\div 2 + 50 \\div 2 = 50$ 日元，因此第二行输出 50。\n\n顾客 3 购买商品所花费的金额为 $10 \\div 2 + 40 \\div 2 + 30 \\div 2 + 20 \\div 2 + 50 \\div 2 = 75$ 日元，因此第三行输出 75。\n\n该输入样例满足子任务 1、2、3、6 的约束。\n\n### 样例 2 解释\n\n顾客 1 购买商品所花费的金额为 $40 + 30 + 20 \\div 2 = 80$ 日元，因此第一行输出 80。\n\n顾客 2 购买商品所花费的金额为 $30 + 20 + 50 \\div 2 = 75$ 日元，因此第二行输出 75。\n\n顾客 3 购买商品所花费的金额为 $10 + 40 + 30 \\div 2 + 20 + 50 = 135$ 日元，因此第三行输出 135。\n\n该输入样例满足子任务 1、3、6 的约束。\n\n### 数据范围\n\n- $1 \\le N \\le 200\\,000$。\n- $1 \\le M \\le 200\\,000$。\n- $1 \\le Q \\le 200\\,000$。\n- $2 \\le P_i \\le 10^9$（$1 \\le i \\le N$）。\n- $P_i$ 为偶数（$1 \\le i \\le N$）。\n- $1 \\le A_i \\le M$（$1 \\le i \\le N$）。\n- $1 \\le T_k \\le M$（$1 \\le k \\le Q$）。\n- $1 \\le L_k \\le R_k \\le N$（$1 \\le k \\le Q$）。\n- 所有输入的值均为整数。\n\n### 子任务\n\n1. （15 分）$N \\le 2\\,000$，$M \\le 2\\,000$，$Q \\le 2\\,000$。\n2. （20 分）$M = 1$。\n3. （12 分）$M \\le 10$。\n4. （14 分）$A_i \\ne A_j$（$1 \\le i < j \\le N$）。\n5. （22 分）$P_i = 2$（$1 \\le i \\le N$）。\n6. （17 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。\n", "locale": "zh-CN"}}}
{"pid": "P14294", "type": "P", "difficulty": 4, "samples": [["6\nGRBBRG\n3 4 5", "16"], ["3\nBRG\n1000000000 1000000000 1", "3"], ["3\nGRB\n9 11 14", "27"], ["9\nRGBRGBRGB\n1000000000 1000000000 1", "0"], ["20\nBRGBRGBBGBBBGRRBBBRB\n1000000000 1000000000 1", "2000000008"], ["23\nBBGRGBBBBBBGRRGGGGBGGGG\n786820955 792349124 710671229", "10107224827"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "数学", "2023", "JOI（日本）"], "title": "[JOI2024 预选赛 R2] 白色灯 2 / White Light 2", "background": "", "description": "有 $N$ 个灯横向排成一列，从左到右依次编号为 $1$ 到 $N$。每个灯的颜色为红、绿、蓝中的一种。灯的颜色由字符串 $S$ 表示：灯 $i$（$1 \\le i \\le N$）的颜色为，当 $S$ 的第 $i$ 个字符为 R 时是红色，为 G 时是绿色，为 B 时是蓝色。最初所有灯均为点亮状态。\n\n只要点亮的灯至少有一个，JOI 君就可以按任意顺序、任意次数执行以下三种操作（也可以一次都不执行）：\n\n- 支付 $A$ 日元，熄灭当前所有点亮的灯中最左侧的一个。\n- 支付 $B$ 日元，熄灭当前所有点亮的灯中最右侧的一个。\n- 支付 $C$ 日元，任选一个当前点亮的灯，将其颜色更改为任意一种颜色。\n\nJOI 君希望从远处看这排灯时，能呈现出漂亮的白色。为此，需要点亮的灯从左到右的颜色序列形如 RGBRGB…RGB，即按 RGB（红绿蓝）循环重复。注意，即使没有点亮的灯存在，也视为满足 RGB 循环重复的条件。例如，GBRGBR 或 RGBRG 等颜色序列不满足条件。\n\n给定灯的颜色信息与操作所需金额，编写一个程序，求出将点亮灯的颜色序列调整为 RGB 循环重复所需的最小花费。", "inputFormat": "输入以如下格式给出：\n\n$N$\n\n$S$\n\n$A\\ B\\ C$", "outputFormat": "输出一行，表示将点亮灯的颜色序列调整为 RGB 循环重复所需的最小花费，单位“日元”省略不写。", "hint": "### 样例 1 解释\n\n例如，执行以下 4 次操作后，点亮灯的颜色序列可变为 RGB 循环重复。用 `-` 表示熄灭的灯。\n\n- 支付 3 日元，熄灭当前点亮灯中最左侧的灯 1。此时各灯状态用字符串 `-RBBRG` 表示。\n- 支付 4 日元，熄灭当前点亮灯中最右侧的灯 6。此时各灯状态用字符串 `-RBBR-` 表示。\n- 支付 4 日元，熄灭当前点亮灯中最右侧的灯 5。此时各灯状态用字符串 `-RBB--` 表示。\n- 支付 5 日元，选择灯 3，将其重新点亮为绿色。此时各灯状态用字符串 `-RGB--` 表示。\n\n无法以低于 16 日元的花费使点亮灯的颜色序列变为 RGB 循环重复，因此输出 16。\n\n该输入样例满足子任务 2、3、6 的约束。\n\n### 样例 2 解释\n\n例如，执行以下 3 次操作后，点亮灯的颜色序列可变为 RGB 循环重复。用 `-` 表示熄灭的灯。\n\n- 支付 1 日元，选择灯 2，将其重新点亮为绿色。此时各灯状态用字符串 `BGG` 表示。\n- 支付 1 日元，选择灯 3，将其重新点亮为蓝色。此时各灯状态用字符串 `BGB` 表示。\n- 支付 1 日元，选择灯 1，将其重新点亮为红色。此时各灯状态用字符串 `RGB` 表示。\n\n无法以低于 3 日元的花费使点亮灯的颜色序列变为 RGB 循环重复，因此输出 3。\n\n该输入样例满足子任务 1、2、3、4、5、6 的约束。\n\n### 样例 3 解释\n\n例如，执行以下 3 次操作后，点亮灯的颜色序列可变为 RGB 循环重复。用 `-` 表示熄灭的灯。\n\n- 支付 9 日元，熄灭当前点亮灯中最左侧的灯 1。此时各灯状态用字符串 `-RB` 表示。\n- 支付 9 日元，熄灭当前点亮灯中最左侧的灯 2。此时各灯状态用字符串 `--B` 表示。\n- 支付 9 日元，熄灭当前点亮灯中最左侧的灯 3。此时各灯状态用字符串 `---` 表示。\n\n无法以低于 27 日元的花费使点亮灯的颜色序列变为 RGB 循环重复，因此输出 27。请注意，即使没有点亮的灯存在，也视为满足条件。\n\n该输入样例满足子任务 1、2、3、6 的约束。\n\n### 样例 4 解释\n\n当前灯的颜色序列已为 RGB 循环重复，因此输出 0。\n\n该输入样例满足子任务 2、3、4、5、6 的约束。\n\n### 约束\n\n- $1 \\le N \\le 200\\,000$。\n- $S$ 是长度为 $N$ 的字符串。\n- $S$ 中的每个字符为 R、G、B 中的某一个。\n- $1 \\le A \\le 10^9$。\n- $1 \\le B \\le 10^9$。\n- $1 \\le C \\le 10^9$。\n- $N$、$A$、$B$、$C$ 均为整数。\n\n### 子任务\n\n1. （4 分）$N = 3$。\n2. （22 分）$N \\le 300$。\n3. （19 分）$N \\le 10\\,000$。\n4. （9 分）$N$ 是 3 的倍数，$A = 10^9$，$B = 10^9$，$C = 1$。\n5. （10 分）$A = 10^9$，$B = 10^9$，$C = 1$。\n6. （36 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2024 预选赛 R2] 白色灯 2 / White Light 2", "background": "", "description": "有 $N$ 个灯横向排成一列，从左到右依次编号为 $1$ 到 $N$。每个灯的颜色为红、绿、蓝中的一种。灯的颜色由字符串 $S$ 表示：灯 $i$（$1 \\le i \\le N$）的颜色为，当 $S$ 的第 $i$ 个字符为 R 时是红色，为 G 时是绿色，为 B 时是蓝色。最初所有灯均为点亮状态。\n\n只要点亮的灯至少有一个，JOI 君就可以按任意顺序、任意次数执行以下三种操作（也可以一次都不执行）：\n\n- 支付 $A$ 日元，熄灭当前所有点亮的灯中最左侧的一个。\n- 支付 $B$ 日元，熄灭当前所有点亮的灯中最右侧的一个。\n- 支付 $C$ 日元，任选一个当前点亮的灯，将其颜色更改为任意一种颜色。\n\nJOI 君希望从远处看这排灯时，能呈现出漂亮的白色。为此，需要点亮的灯从左到右的颜色序列形如 RGBRGB…RGB，即按 RGB（红绿蓝）循环重复。注意，即使没有点亮的灯存在，也视为满足 RGB 循环重复的条件。例如，GBRGBR 或 RGBRG 等颜色序列不满足条件。\n\n给定灯的颜色信息与操作所需金额，编写一个程序，求出将点亮灯的颜色序列调整为 RGB 循环重复所需的最小花费。", "inputFormat": "输入以如下格式给出：\n\n$N$\n\n$S$\n\n$A\\ B\\ C$", "outputFormat": "输出一行，表示将点亮灯的颜色序列调整为 RGB 循环重复所需的最小花费，单位“日元”省略不写。", "hint": "### 样例 1 解释\n\n例如，执行以下 4 次操作后，点亮灯的颜色序列可变为 RGB 循环重复。用 `-` 表示熄灭的灯。\n\n- 支付 3 日元，熄灭当前点亮灯中最左侧的灯 1。此时各灯状态用字符串 `-RBBRG` 表示。\n- 支付 4 日元，熄灭当前点亮灯中最右侧的灯 6。此时各灯状态用字符串 `-RBBR-` 表示。\n- 支付 4 日元，熄灭当前点亮灯中最右侧的灯 5。此时各灯状态用字符串 `-RBB--` 表示。\n- 支付 5 日元，选择灯 3，将其重新点亮为绿色。此时各灯状态用字符串 `-RGB--` 表示。\n\n无法以低于 16 日元的花费使点亮灯的颜色序列变为 RGB 循环重复，因此输出 16。\n\n该输入样例满足子任务 2、3、6 的约束。\n\n### 样例 2 解释\n\n例如，执行以下 3 次操作后，点亮灯的颜色序列可变为 RGB 循环重复。用 `-` 表示熄灭的灯。\n\n- 支付 1 日元，选择灯 2，将其重新点亮为绿色。此时各灯状态用字符串 `BGG` 表示。\n- 支付 1 日元，选择灯 3，将其重新点亮为蓝色。此时各灯状态用字符串 `BGB` 表示。\n- 支付 1 日元，选择灯 1，将其重新点亮为红色。此时各灯状态用字符串 `RGB` 表示。\n\n无法以低于 3 日元的花费使点亮灯的颜色序列变为 RGB 循环重复，因此输出 3。\n\n该输入样例满足子任务 1、2、3、4、5、6 的约束。\n\n### 样例 3 解释\n\n例如，执行以下 3 次操作后，点亮灯的颜色序列可变为 RGB 循环重复。用 `-` 表示熄灭的灯。\n\n- 支付 9 日元，熄灭当前点亮灯中最左侧的灯 1。此时各灯状态用字符串 `-RB` 表示。\n- 支付 9 日元，熄灭当前点亮灯中最左侧的灯 2。此时各灯状态用字符串 `--B` 表示。\n- 支付 9 日元，熄灭当前点亮灯中最左侧的灯 3。此时各灯状态用字符串 `---` 表示。\n\n无法以低于 27 日元的花费使点亮灯的颜色序列变为 RGB 循环重复，因此输出 27。请注意，即使没有点亮的灯存在，也视为满足条件。\n\n该输入样例满足子任务 1、2、3、6 的约束。\n\n### 样例 4 解释\n\n当前灯的颜色序列已为 RGB 循环重复，因此输出 0。\n\n该输入样例满足子任务 2、3、4、5、6 的约束。\n\n### 约束\n\n- $1 \\le N \\le 200\\,000$。\n- $S$ 是长度为 $N$ 的字符串。\n- $S$ 中的每个字符为 R、G、B 中的某一个。\n- $1 \\le A \\le 10^9$。\n- $1 \\le B \\le 10^9$。\n- $1 \\le C \\le 10^9$。\n- $N$、$A$、$B$、$C$ 均为整数。\n\n### 子任务\n\n1. （4 分）$N = 3$。\n2. （22 分）$N \\le 300$。\n3. （19 分）$N \\le 10\\,000$。\n4. （9 分）$N$ 是 3 的倍数，$A = 10^9$，$B = 10^9$，$C = 1$。\n5. （10 分）$A = 10^9$，$B = 10^9$，$C = 1$。\n6. （36 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN"}}}
{"pid": "P14295", "type": "P", "difficulty": 5, "samples": [["3\nRYR\nYBY\nBYY", "5"], ["9\nYYRYBBBYR\nBYYRRBYBB\nRBRRBRBBY\nRYRBRYRBR\nYYBRYYYRB\nRRYBRYRBR\nRBYRBRBRB\nBRYYRBBBR\nRBBBYBRRY", "25"], ["6\nRBYRBY\nBYRBYR\nYRBYRB\nRBYRBY\nBYRBYR\nYRBYRB", "1"], ["20\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRBRRRRRRRRRRRRYRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRYRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRYRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRBR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR\nRRRRRRRRRRRRRRRRRRRR", "85"], ["10\nRRRRRRRRRR\nRYRRRRRRRR\nRRRRYRRRRR\nRBRRRRRRRR\nRRRRRRRRYR\nRBRRRRRRRR\nRRRRBRRRRR\nRBRRRRRRRR\nRRRRRRRRYR\nRRRRRRRRRR", "25"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "JOI（日本）"], "title": "[JOI2024 预选赛 R2] 花园 2 / Garden 2", "background": "", "description": "JOI 庭园呈正方形，被划分为 $N$ 行 $N$ 列的网格状区域。从上往下第 $i$ 行（$1 \\le i \\le N$）、从左往右第 $j$ 列（$1 \\le j \\le N$）的格子称为区域 $(i, j)$。\n\n由于 JOI 庭园的土壤贫瘠，每个区域最多只能种植一种颜色的花，且最多只能种一棵。具体来说，区域 $(i, j)$ 中，当 $A_{i,j} = \\text{R}$ 时只能种植红色花，当 $A_{i,j} = \\text{Y}$ 时只能种植黄色花，当 $A_{i,j} = \\text{B}$ 时只能种植蓝色花，且每个区域最多只能种一棵花。\n\n现在，庭园的管理者 K 理事长希望在航拍时获得更好的视觉效果，因此计划按以下步骤种植花：\n\n1. 确定一个表示大小的整数 $r$，需满足 $0 \\le r \\le (N-1) \\div 2$。\n2. 确定一个表示中心的区域 $(x, y)$，需满足 $r+1 \\le x \\le N-r$ 且 $r+1 \\le y \\le N-r$。\n3. 从红、黄、蓝三种颜色中分别选择颜色 $c_0, c_1, c_2, \\cdots, c_r$。\n4. 对于每个区域 $(x', y')$，根据 $d = |x' - x| + |y' - y|$ 按以下规则种植花。其中，$|t|$ 表示 $t$ 的绝对值：\n   - 若 $d \\le r$，则在区域 $(x', y')$ 种植颜色为 $c_d$ 的花。\n   - 若 $d > r$，则不在区域 $(x', y')$ 种植花。\n\n给定庭园的大小，以及每个区域可种植的花的颜色信息，编写一个程序，求出 K 理事长最多能种植的花的数量。", "inputFormat": "输入以如下格式给出：\n\n$N$\n\n$A_{1,1}\\ A_{1,2}\\ \\cdots\\ A_{1,N}$\n\n$A_{2,1}\\ A_{2,2}\\ \\cdots\\ A_{2,N}$\n\n$\\vdots$\n\n$A_{N,1}\\ A_{N,2}\\ \\cdots\\ A_{N,N}$", "outputFormat": "输出一行，表示 K 理事长最多能种植的花的数量。", "hint": "### 样例 1 解释\n\n若取 $r = 1$，中心 $(x, y) = (2, 2)$，并选择 $c_0$ 为蓝色、$c_1$ 为黄色，则可如图所示种植 5 朵花。图中背景色表示各区域可种植的花的颜色。\n\n不存在能种植 6 朵或更多花的方法，因此输出 5。\n\n该输入样例满足子任务 1、2、3、6 的约束。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gblb7szd.png)\n:::\n\n### 样例 2 解释\n\n若取 $r = 3$，中心 $(x, y) = (5, 6)$，并选择 $c_0$ 为黄色、$c_1$ 为黄色、$c_2$ 为红色、$c_3$ 为蓝色，则可如图所示种植 25 朵花。图中背景色表示各区域可种植的花的颜色。\n\n不存在能种植 26 朵或更多花的方法，因此输出 25。\n\n该输入样例满足子任务 2、3、6 的约束。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/k3rmc9u8.png)\n:::\n\n### 数据范围\n\n- $3 \\le N \\le 3\\,500$。\n- $A_{i,j}$ 为 R、Y、B 中的某一个（$1 \\le i \\le N$，$1 \\le j \\le N$）。\n- $N$ 为整数。\n\n### 子任务\n\n1. （4 分）$N = 3$。\n2. （13 分）$N \\le 50$。\n3. （17 分）$N \\le 800$。\n4. （14 分）满足 $A_{i,j} \\ne \\text{R}$ 的 $(i, j)$（$1 \\le i \\le N$，$1 \\le j \\le N$）不超过 5 个。\n5. （16 分）对于任意 $(i, j)$（$1 \\le i \\le N-1$，$1 \\le j \\le N-1$），在 $A_{i,j}$、$A_{i,j+1}$、$A_{i+1,j}$、$A_{i+1,j+1}$ 中，R 至少出现 3 次。\n6. （36 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2024 预选赛 R2] 花园 2 / Garden 2", "background": "", "description": "JOI 庭园呈正方形，被划分为 $N$ 行 $N$ 列的网格状区域。从上往下第 $i$ 行（$1 \\le i \\le N$）、从左往右第 $j$ 列（$1 \\le j \\le N$）的格子称为区域 $(i, j)$。\n\n由于 JOI 庭园的土壤贫瘠，每个区域最多只能种植一种颜色的花，且最多只能种一棵。具体来说，区域 $(i, j)$ 中，当 $A_{i,j} = \\text{R}$ 时只能种植红色花，当 $A_{i,j} = \\text{Y}$ 时只能种植黄色花，当 $A_{i,j} = \\text{B}$ 时只能种植蓝色花，且每个区域最多只能种一棵花。\n\n现在，庭园的管理者 K 理事长希望在航拍时获得更好的视觉效果，因此计划按以下步骤种植花：\n\n1. 确定一个表示大小的整数 $r$，需满足 $0 \\le r \\le (N-1) \\div 2$。\n2. 确定一个表示中心的区域 $(x, y)$，需满足 $r+1 \\le x \\le N-r$ 且 $r+1 \\le y \\le N-r$。\n3. 从红、黄、蓝三种颜色中分别选择颜色 $c_0, c_1, c_2, \\cdots, c_r$。\n4. 对于每个区域 $(x', y')$，根据 $d = |x' - x| + |y' - y|$ 按以下规则种植花。其中，$|t|$ 表示 $t$ 的绝对值：\n   - 若 $d \\le r$，则在区域 $(x', y')$ 种植颜色为 $c_d$ 的花。\n   - 若 $d > r$，则不在区域 $(x', y')$ 种植花。\n\n给定庭园的大小，以及每个区域可种植的花的颜色信息，编写一个程序，求出 K 理事长最多能种植的花的数量。", "inputFormat": "输入以如下格式给出：\n\n$N$\n\n$A_{1,1}\\ A_{1,2}\\ \\cdots\\ A_{1,N}$\n\n$A_{2,1}\\ A_{2,2}\\ \\cdots\\ A_{2,N}$\n\n$\\vdots$\n\n$A_{N,1}\\ A_{N,2}\\ \\cdots\\ A_{N,N}$", "outputFormat": "输出一行，表示 K 理事长最多能种植的花的数量。", "hint": "### 样例 1 解释\n\n若取 $r = 1$，中心 $(x, y) = (2, 2)$，并选择 $c_0$ 为蓝色、$c_1$ 为黄色，则可如图所示种植 5 朵花。图中背景色表示各区域可种植的花的颜色。\n\n不存在能种植 6 朵或更多花的方法，因此输出 5。\n\n该输入样例满足子任务 1、2、3、6 的约束。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gblb7szd.png)\n:::\n\n### 样例 2 解释\n\n若取 $r = 3$，中心 $(x, y) = (5, 6)$，并选择 $c_0$ 为黄色、$c_1$ 为黄色、$c_2$ 为红色、$c_3$ 为蓝色，则可如图所示种植 25 朵花。图中背景色表示各区域可种植的花的颜色。\n\n不存在能种植 26 朵或更多花的方法，因此输出 25。\n\n该输入样例满足子任务 2、3、6 的约束。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/k3rmc9u8.png)\n:::\n\n### 数据范围\n\n- $3 \\le N \\le 3\\,500$。\n- $A_{i,j}$ 为 R、Y、B 中的某一个（$1 \\le i \\le N$，$1 \\le j \\le N$）。\n- $N$ 为整数。\n\n### 子任务\n\n1. （4 分）$N = 3$。\n2. （13 分）$N \\le 50$。\n3. （17 分）$N \\le 800$。\n4. （14 分）满足 $A_{i,j} \\ne \\text{R}$ 的 $(i, j)$（$1 \\le i \\le N$，$1 \\le j \\le N$）不超过 5 个。\n5. （16 分）对于任意 $(i, j)$（$1 \\le i \\le N-1$，$1 \\le j \\le N-1$），在 $A_{i,j}$、$A_{i,j+1}$、$A_{i+1,j}$、$A_{i+1,j+1}$ 中，R 至少出现 3 次。\n6. （36 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN"}}}
{"pid": "P14296", "type": "P", "difficulty": 5, "samples": [["4 4 2\n1 2 3 2\n1 3 1 10\n2 3 1 4\n3 4 5 3", "15"], ["4 4 0\n1 2 3 2\n1 3 1 10\n2 3 1 4\n3 4 5 3", "9"], ["2 1 10\n2 1 4 7", "-1"], ["4 3 5\n1 2 3 1\n2 3 1 10\n3 4 7 6", "37"], ["8 8 2\n1 2 1 5\n5 6 3 1\n2 4 10 18\n3 5 3 1\n1 3 4 2\n5 6 2 2\n2 5 2 3\n6 8 1 1", "25"], ["6 10 100000\n4 2 212037 752027141\n2 5 667097 1571491\n2 1 769275 576006950\n1 2 711969 526189398\n5 3 733555 206320177\n3 4 364807 802102091\n1 4 467240 183184247\n3 5 44994 15991843\n5 3 613192 782356546\n4 6 832593 639529758", "47546714005"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "JOI（日本）"], "title": "[JOI2024 预选赛 R2] 高速公路通行费 / Highway Tolls", "background": "", "description": "JOI 王国由 $N$ 个城市组成，这些城市被编号为 $1$ 至 $N$。JOI 王国内有 $M$ 条单向高速公路，这些高速公路被编号为 $1$ 至 $M$。通过高速公路 $i$（$1 \\le i \\le M$），可以从城市 $A_i$ 移动到城市 $B_i$，所需时间为 $L_i$。\n\n每次通过高速公路都会产生通行费。高速公路 $i$ 的基本通行费为 $C_i$，但由于 JOI 王国的劳动者厌恶加班，若离开基准时刻 $0$ 的时间越久，通行费就会越高。具体而言，若在时刻 $t$ 从城市 $A_i$ 出发并通过高速公路 $i$，则通行费可表示为 $C_i + K \\times |t|$，其中 $|t|$ 表示 $t$ 的绝对值。\n\n你居住在城市 $1$，计划前往朋友居住的城市 $N$。你希望确认是否可能通过高速公路从城市 $1$ 移动到城市 $N$，若可能，则进一步求出通行费总和的最小值。你可以自由选择移动路径和在各城市出发的时间。特别地，允许在负时刻从城市 $1$ 出发，也允许在途中某个城市停留一段时间。\n\n给定高速公路的信息以及常数 $K$，请编写一个程序，判断是否可以通过高速公路从城市 $1$ 移动到城市 $N$，若可以，则求出通行费总和的最小值。\n\n此外，在本题的约束条件下，若可以通过高速公路从城市 $1$ 移动到城市 $N$，则通行费总和的最小值必定为整数。", "inputFormat": "输入以如下格式给出：\n\n$N\\ M\\ K$\n\n$A_1\\ B_1\\ L_1\\ C_1$\n\n$A_2\\ B_2\\ L_2\\ C_2$\n\n$\\vdots$\n\n$A_M\\ B_M\\ L_M\\ C_M$\n", "outputFormat": "若无法通过高速公路从城市 $1$ 移动到城市 $N$，则输出 $-1$。若可以，则输出一行整数，表示通行费总和的最小值。", "hint": "### 样例 1 解释\n\nJOI 王国的城市与道路示意图如下所示。圆圈代表城市，箭头代表道路，每条道路旁标注了其对应的 $L_i$ 和 $C_i$ 的值（按此顺序）。圆圈内标注的数字代表该城市的编号。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/83kyk88v.png)\n:::\n\n按以下方式移动时，通行费总和为 15：\n\n- 时刻 $-1$：从城市 1 出发，前往城市 3，通行费为 $10 + 2 \\times |-1| = 12$。\n- 时刻 $0$：到达城市 3，立即前往城市 4，通行费为 $3 + 2 \\times |0| = 3$。\n- 时刻 $5$：到达城市 4。\n\n不存在通行费总和小于 15 的移动方案，因此输出 15。\n\n该输入样例满足子任务 2、5、6、7 的约束。\n\n### 样例 2 解释\n\n本样例与样例 1 仅在 $K$ 的取值上不同。\n\n按以下方式移动时，通行费总和为 9：\n\n- 时刻 $-3$：从城市 1 出发，前往城市 2，通行费为 $2 + 0 \\times |-3| = 2$。\n- 时刻 $0$：到达城市 2，立即前往城市 3，通行费为 $4 + 0 \\times |0| = 4$。\n- 时刻 $1$：到达城市 3，停留于城市 3。\n- 时刻 $3$：从城市 3 出发，前往城市 4，通行费为 $3 + 0 \\times |3| = 3$。\n- 时刻 $8$：到达城市 4。\n\n不存在通行费总和小于 9 的移动方案，因此输出 9。\n\n该输入样例满足子任务 1、2、5、6、7 的约束。\n\n### 样例 3 解释\n\n无法通过高速公路从城市 1 移动到城市 2，因此输出 $-1$。\n\n该输入样例满足子任务 2、5、6、7 的约束。\n\n### 样例 5 解释\n\n可能存在多个具有相同 $(A_i, B_i)$ 对的道路。\n\n该输入样例满足子任务 2、4、5、6、7 的约束。\n\n### 数据范围\n\n- $2 \\le N \\le 4\\,000$。\n- $1 \\le M \\le 8\\,000$。\n- $0 \\le K \\le 100\\,000$。\n- $1 \\le A_i \\le N$（$1 \\le i \\le M$）。\n- $1 \\le B_i \\le N$（$1 \\le i \\le M$）。\n- $A_i \\ne B_i$（$1 \\le i \\le M$）。\n- $1 \\le L_i \\le 1\\,000\\,000$（$1 \\le i \\le M$）。\n- $0 \\le C_i \\le 10^9$（$1 \\le i \\le M$）。\n- 所有输入的值均为整数。\n\n### 子任务\n\n1. （9 分）$N \\le 100$，$M \\le 200$，$K = 0$。\n2. （21 分）$N \\le 100$，$M \\le 200$，$L_i \\le 20$（$1 \\le i \\le M$）。\n3. （13 分）$N \\le 100$，$M = N - 1$，$A_i = i$，$B_i = i + 1$（$1 \\le i \\le M$）。\n4. （23 分）$N \\le 100$，$M \\le 200$，并满足以下约束：\n   - $N$ 为偶数，且对所有 $1 \\le i \\le M$，满足 $\\lfloor B_i \\div 2 \\rfloor - \\lfloor A_i \\div 2 \\rfloor = 1$。其中，$\\lfloor x \\rfloor$ 表示不超过 $x$ 的最大整数。\n5. （16 分）$N \\le 100$，$M \\le 200$。\n6. （11 分）$N \\le 1\\,500$，$M \\le 3\\,000$。\n7. （7 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2024 预选赛 R2] 高速公路通行费 / Highway Tolls", "background": "", "description": "JOI 王国由 $N$ 个城市组成，这些城市被编号为 $1$ 至 $N$。JOI 王国内有 $M$ 条单向高速公路，这些高速公路被编号为 $1$ 至 $M$。通过高速公路 $i$（$1 \\le i \\le M$），可以从城市 $A_i$ 移动到城市 $B_i$，所需时间为 $L_i$。\n\n每次通过高速公路都会产生通行费。高速公路 $i$ 的基本通行费为 $C_i$，但由于 JOI 王国的劳动者厌恶加班，若离开基准时刻 $0$ 的时间越久，通行费就会越高。具体而言，若在时刻 $t$ 从城市 $A_i$ 出发并通过高速公路 $i$，则通行费可表示为 $C_i + K \\times |t|$，其中 $|t|$ 表示 $t$ 的绝对值。\n\n你居住在城市 $1$，计划前往朋友居住的城市 $N$。你希望确认是否可能通过高速公路从城市 $1$ 移动到城市 $N$，若可能，则进一步求出通行费总和的最小值。你可以自由选择移动路径和在各城市出发的时间。特别地，允许在负时刻从城市 $1$ 出发，也允许在途中某个城市停留一段时间。\n\n给定高速公路的信息以及常数 $K$，请编写一个程序，判断是否可以通过高速公路从城市 $1$ 移动到城市 $N$，若可以，则求出通行费总和的最小值。\n\n此外，在本题的约束条件下，若可以通过高速公路从城市 $1$ 移动到城市 $N$，则通行费总和的最小值必定为整数。", "inputFormat": "输入以如下格式给出：\n\n$N\\ M\\ K$\n\n$A_1\\ B_1\\ L_1\\ C_1$\n\n$A_2\\ B_2\\ L_2\\ C_2$\n\n$\\vdots$\n\n$A_M\\ B_M\\ L_M\\ C_M$\n", "outputFormat": "若无法通过高速公路从城市 $1$ 移动到城市 $N$，则输出 $-1$。若可以，则输出一行整数，表示通行费总和的最小值。", "hint": "### 样例 1 解释\n\nJOI 王国的城市与道路示意图如下所示。圆圈代表城市，箭头代表道路，每条道路旁标注了其对应的 $L_i$ 和 $C_i$ 的值（按此顺序）。圆圈内标注的数字代表该城市的编号。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/83kyk88v.png)\n:::\n\n按以下方式移动时，通行费总和为 15：\n\n- 时刻 $-1$：从城市 1 出发，前往城市 3，通行费为 $10 + 2 \\times |-1| = 12$。\n- 时刻 $0$：到达城市 3，立即前往城市 4，通行费为 $3 + 2 \\times |0| = 3$。\n- 时刻 $5$：到达城市 4。\n\n不存在通行费总和小于 15 的移动方案，因此输出 15。\n\n该输入样例满足子任务 2、5、6、7 的约束。\n\n### 样例 2 解释\n\n本样例与样例 1 仅在 $K$ 的取值上不同。\n\n按以下方式移动时，通行费总和为 9：\n\n- 时刻 $-3$：从城市 1 出发，前往城市 2，通行费为 $2 + 0 \\times |-3| = 2$。\n- 时刻 $0$：到达城市 2，立即前往城市 3，通行费为 $4 + 0 \\times |0| = 4$。\n- 时刻 $1$：到达城市 3，停留于城市 3。\n- 时刻 $3$：从城市 3 出发，前往城市 4，通行费为 $3 + 0 \\times |3| = 3$。\n- 时刻 $8$：到达城市 4。\n\n不存在通行费总和小于 9 的移动方案，因此输出 9。\n\n该输入样例满足子任务 1、2、5、6、7 的约束。\n\n### 样例 3 解释\n\n无法通过高速公路从城市 1 移动到城市 2，因此输出 $-1$。\n\n该输入样例满足子任务 2、5、6、7 的约束。\n\n### 样例 5 解释\n\n可能存在多个具有相同 $(A_i, B_i)$ 对的道路。\n\n该输入样例满足子任务 2、4、5、6、7 的约束。\n\n### 数据范围\n\n- $2 \\le N \\le 4\\,000$。\n- $1 \\le M \\le 8\\,000$。\n- $0 \\le K \\le 100\\,000$。\n- $1 \\le A_i \\le N$（$1 \\le i \\le M$）。\n- $1 \\le B_i \\le N$（$1 \\le i \\le M$）。\n- $A_i \\ne B_i$（$1 \\le i \\le M$）。\n- $1 \\le L_i \\le 1\\,000\\,000$（$1 \\le i \\le M$）。\n- $0 \\le C_i \\le 10^9$（$1 \\le i \\le M$）。\n- 所有输入的值均为整数。\n\n### 子任务\n\n1. （9 分）$N \\le 100$，$M \\le 200$，$K = 0$。\n2. （21 分）$N \\le 100$，$M \\le 200$，$L_i \\le 20$（$1 \\le i \\le M$）。\n3. （13 分）$N \\le 100$，$M = N - 1$，$A_i = i$，$B_i = i + 1$（$1 \\le i \\le M$）。\n4. （23 分）$N \\le 100$，$M \\le 200$，并满足以下约束：\n   - $N$ 为偶数，且对所有 $1 \\le i \\le M$，满足 $\\lfloor B_i \\div 2 \\rfloor - \\lfloor A_i \\div 2 \\rfloor = 1$。其中，$\\lfloor x \\rfloor$ 表示不超过 $x$ 的最大整数。\n5. （16 分）$N \\le 100$，$M \\le 200$。\n6. （11 分）$N \\le 1\\,500$，$M \\le 3\\,000$。\n7. （7 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN"}}}
{"pid": "P14297", "type": "P", "difficulty": 1, "samples": [["3\n13 15 20", "7\n5\n7"], ["2\n100 100", "0\n0"], ["10\n440894064 101089692 556439322 34369336 98417847 216265879 623843484 554560874 247445405 718003331", "406524728\n616913639\n522069986\n683633995\n619585484\n501737452\n589474148\n520191538\n470557926\n683633995"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "排序", "JOI（日本）"], "title": "[JOI2023 预选赛 R2] 年龄之差 / Age Difference", "background": "", "description": "JOI 市有编号从 $1$ 到 $N$ 的 $N$ 位居民，居民 $i$（$1 \\le i \\le N$）的年龄为 $A_i$ 岁。\n\n给定 JOI 市居民的年龄 $A_1, A_2, \\cdots, A_N$。对于每个 $i = 1, 2, \\cdots, N$，请编写一个程序，求出居民 $i$ 与其他居民年龄差的最大值。", "inputFormat": "输入数据按以下格式给出：\n\n$N$\n\n$A_1\\ A_2\\ \\cdots\\ A_N$", "outputFormat": "输出 $N$ 行。第 $i$ 行（$1 \\le i \\le N$）应输出居民 $i$ 与其他居民年龄差的最大值。", "hint": "### 样例 1 解释\n\n- 居民 1 与居民 2、3 的年龄差分别为 $2$ 岁和 $7$ 岁。这些差值的最大值为 $7$ 岁，因此第 1 行应输出 $7$。\n- 居民 2 与居民 1、3 的年龄差分别为 $2$ 岁和 $5$ 岁。这些差值的最大值为 $5$ 岁，因此第 2 行应输出 $5$。\n- 居民 3 与居民 1、2 的年龄差分别为 $7$ 岁和 $5$ 岁。这些差值的最大值为 $7$ 岁，因此第 3 行应输出 $7$。\n\n该输入样例满足子任务 2 和 3 的约束。\n\n### 样例 2 解释\n\n- 居民 1 与居民 2 的年龄差为 $0$ 岁，因此第 1 行应输出 $0$。\n- 居民 2 与居民 1 的年龄差为 $0$ 岁，因此第 2 行应输出 $0$。\n\n该输入样例满足所有子任务的约束。\n\n### 数据范围\n\n- $2 \\le N \\le 250\\,000$。\n- $0 \\le A_i \\le 10^9$（$1 \\le i \\le N$）。\n- 所有输入值均为整数。\n\n### 子任务\n\n1. （25 分）$N = 2$。\n2. （30 分）$N \\le 1\\,000$。\n3. （45 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2023 预选赛 R2] 年龄之差 / Age Difference", "background": "", "description": "JOI 市有编号从 $1$ 到 $N$ 的 $N$ 位居民，居民 $i$（$1 \\le i \\le N$）的年龄为 $A_i$ 岁。\n\n给定 JOI 市居民的年龄 $A_1, A_2, \\cdots, A_N$。对于每个 $i = 1, 2, \\cdots, N$，请编写一个程序，求出居民 $i$ 与其他居民年龄差的最大值。", "inputFormat": "输入数据按以下格式给出：\n\n$N$\n\n$A_1\\ A_2\\ \\cdots\\ A_N$", "outputFormat": "输出 $N$ 行。第 $i$ 行（$1 \\le i \\le N$）应输出居民 $i$ 与其他居民年龄差的最大值。", "hint": "### 样例 1 解释\n\n- 居民 1 与居民 2、3 的年龄差分别为 $2$ 岁和 $7$ 岁。这些差值的最大值为 $7$ 岁，因此第 1 行应输出 $7$。\n- 居民 2 与居民 1、3 的年龄差分别为 $2$ 岁和 $5$ 岁。这些差值的最大值为 $5$ 岁，因此第 2 行应输出 $5$。\n- 居民 3 与居民 1、2 的年龄差分别为 $7$ 岁和 $5$ 岁。这些差值的最大值为 $7$ 岁，因此第 3 行应输出 $7$。\n\n该输入样例满足子任务 2 和 3 的约束。\n\n### 样例 2 解释\n\n- 居民 1 与居民 2 的年龄差为 $0$ 岁，因此第 1 行应输出 $0$。\n- 居民 2 与居民 1 的年龄差为 $0$ 岁，因此第 2 行应输出 $0$。\n\n该输入样例满足所有子任务的约束。\n\n### 数据范围\n\n- $2 \\le N \\le 250\\,000$。\n- $0 \\le A_i \\le 10^9$（$1 \\le i \\le N$）。\n- 所有输入值均为整数。\n\n### 子任务\n\n1. （25 分）$N = 2$。\n2. （30 分）$N \\le 1\\,000$。\n3. （45 分）无额外约束。\n\n翻译由 Qwen3-235B 完成。", "locale": "zh-CN"}}}
{"pid": "P14298", "type": "P", "difficulty": 3, "samples": [["1\n169\n173\n152\n200", "48"], ["7\n7 9 9 4 6 3 5\n1 1 1 1 1 1 1\n1 1 1 1 1 1 1\n1 1 1 1 1 1 1", "2"], ["7\n1 1 1 1 2 1 1\n1 2 1 1 1 1 1\n1 1 1 1 2 1 1\n1 1 1 1 1 1 2", "0"], ["5\n287 690 413 420 138\n813 873 223 415 907\n261 330 361 747 787\n958 672 544 126 345", "70"], ["10\n1682 2008 1135 1576 2450 1362 1518 1925 2212 1275\n1993 1945 1312 1401 2027 1705 1086 2333 1787 1654\n2257 1548 1219 1031 2613 2171 1866 1532 2800 1497\n1062 1175 1984 1870 2059 1639 2107 1335 1289 2494", "79"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "排序", "JOI（日本）", "双指针 two-pointer"], "title": "[JOI2023 预选赛 R2] JOI 运动会 / JOI04", "background": "", "description": "JOI 中学有 $4N$ 名一年级学生，他们被分入 4 个班级。各班级的信息如下：\n\n- 1 年 A 组：有 $N$ 名学生，他们的身高分别为 $A_1, A_2, \\cdots, A_N$。\n- 1 年 B 组：有 $N$ 名学生，他们的身高分别为 $B_1, B_2, \\cdots, B_N$。\n- 1 年 C 组：有 $N$ 名学生，他们的身高分别为 $C_1, C_2, \\cdots, C_N$。\n- 1 年 D 组：有 $N$ 名学生，他们的身高分别为 $D_1, D_2, \\cdots, D_N$。\n\n下个月，JOI 中学将举办运动会。运动会包含接力、骑马战、棒倒等多种项目，而各年级表演的舞蹈被称为“运动会之花”，是备受瞩目的项目。\n\n为此，一年级学生将从每个班级各选一名代表，组成 4 人小组进行舞蹈表演。为了使舞蹈表演更具观赏性，他们决定选择身高差尽可能小的 4 人组合。\n\n给定一年级学生的身高数据，请编写一个程序，求出“4 人身高最大值”与“4 人身高最小值”之差的最小可能值", "inputFormat": "输入数据按以下格式给出：\n\n$N$\n\n$A_1\\ A_2\\ \\cdots\\ A_N$\n\n$B_1\\ B_2\\ \\cdots\\ B_N$\n\n$C_1\\ C_2\\ \\cdots\\ C_N$\n\n$D_1\\ D_2\\ \\cdots\\ D_N$", "outputFormat": "在一行内输出“4 人身高最大值”与“4 人身高最小值”之差的最小可能值。\n", "hint": "### 数据范围\n\n- $1 \\le N \\le 75\\,000$。\n- $1 \\le A_i \\le 10^9$（$1 \\le i \\le N$）。\n- $1 \\le B_j \\le 10^9$（$1 \\le j \\le N$）。\n- $1 \\le C_k \\le 10^9$（$1 \\le k \\le N$）。\n- $1 \\le D_l \\le 10^9$（$1 \\le l \\le N$）。\n- 所有输入值均为整数。\n\n### 子任务\n\n1. （7 分）$N = 1$。\n2. （23 分）$N \\le 30$。\n3. （14 分）$N \\le 2\\,000$，且 $A_i \\le 10$（$1 \\le i \\le N$），$B_j \\le 10$（$1 \\le j \\le N$），$C_k \\le 10$（$1 \\le k \\le N$），$D_l \\le 10$（$1 \\le l \\le N$）。\n4. （20 分）$N \\le 2\\,000$，且 $A_i \\le 2\\,000$（$1 \\le i \\le N$），$B_j \\le 2\\,000$（$1 \\le j \\le N$），$C_k \\le 2\\,000$（$1 \\le k \\le N$），$D_l \\le 2\\,000$（$1 \\le l \\le N$）。\n5. （13 分）$N \\le 2\\,000$。\n6. （23 分）无额外约束。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI2023 预选赛 R2] JOI 运动会 / JOI04", "background": "", "description": "JOI 中学有 $4N$ 名一年级学生，他们被分入 4 个班级。各班级的信息如下：\n\n- 1 年 A 组：有 $N$ 名学生，他们的身高分别为 $A_1, A_2, \\cdots, A_N$。\n- 1 年 B 组：有 $N$ 名学生，他们的身高分别为 $B_1, B_2, \\cdots, B_N$。\n- 1 年 C 组：有 $N$ 名学生，他们的身高分别为 $C_1, C_2, \\cdots, C_N$。\n- 1 年 D 组：有 $N$ 名学生，他们的身高分别为 $D_1, D_2, \\cdots, D_N$。\n\n下个月，JOI 中学将举办运动会。运动会包含接力、骑马战、棒倒等多种项目，而各年级表演的舞蹈被称为“运动会之花”，是备受瞩目的项目。\n\n为此，一年级学生将从每个班级各选一名代表，组成 4 人小组进行舞蹈表演。为了使舞蹈表演更具观赏性，他们决定选择身高差尽可能小的 4 人组合。\n\n给定一年级学生的身高数据，请编写一个程序，求出“4 人身高最大值”与“4 人身高最小值”之差的最小可能值", "inputFormat": "输入数据按以下格式给出：\n\n$N$\n\n$A_1\\ A_2\\ \\cdots\\ A_N$\n\n$B_1\\ B_2\\ \\cdots\\ B_N$\n\n$C_1\\ C_2\\ \\cdots\\ C_N$\n\n$D_1\\ D_2\\ \\cdots\\ D_N$", "outputFormat": "在一行内输出“4 人身高最大值”与“4 人身高最小值”之差的最小可能值。\n", "hint": "### 数据范围\n\n- $1 \\le N \\le 75\\,000$。\n- $1 \\le A_i \\le 10^9$（$1 \\le i \\le N$）。\n- $1 \\le B_j \\le 10^9$（$1 \\le j \\le N$）。\n- $1 \\le C_k \\le 10^9$（$1 \\le k \\le N$）。\n- $1 \\le D_l \\le 10^9$（$1 \\le l \\le N$）。\n- 所有输入值均为整数。\n\n### 子任务\n\n1. （7 分）$N = 1$。\n2. （23 分）$N \\le 30$。\n3. （14 分）$N \\le 2\\,000$，且 $A_i \\le 10$（$1 \\le i \\le N$），$B_j \\le 10$（$1 \\le j \\le N$），$C_k \\le 10$（$1 \\le k \\le N$），$D_l \\le 10$（$1 \\le l \\le N$）。\n4. （20 分）$N \\le 2\\,000$，且 $A_i \\le 2\\,000$（$1 \\le i \\le N$），$B_j \\le 2\\,000$（$1 \\le j \\le N$），$C_k \\le 2\\,000$（$1 \\le k \\le N$），$D_l \\le 2\\,000$（$1 \\le l \\le N$）。\n5. （13 分）$N \\le 2\\,000$。\n6. （23 分）无额外约束。", "locale": "zh-CN"}}}
