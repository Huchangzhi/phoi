{"pid": "P2598", "type": "P", "difficulty": 5, "samples": [["2 2\r\n2 2 \r\n1 1 ", "2\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "网络流", "浙江", "最小割"], "title": "[ZJOI2009] 狼和羊的故事", "background": "", "description": "“狼爱上羊啊爱的疯狂，谁让他们真爱了一场；狼爱上羊啊并不荒唐，他们说有爱就有方向……”Orez 听到这首歌，心想：狼和羊如此和谐，为什么不尝试羊狼合养呢？说干就干！\n\nOrez 的羊狼圈可以看作一个 $n\\times m$ 的矩阵格子，这个矩阵的边缘已经装上了篱笆。可是 Drake 很快发现狼再怎么也是狼，它们总是对羊垂涎三尺，那首歌只不过是一个动人的传说而已。所以 Orez 决定在羊狼圈中再加入一些篱笆，还是要将羊狼分开来养。\n\n通过仔细观察，Orez 发现狼和羊都有属于自己领地，若狼和羊们不能呆在自己的领地，那它们就会变得非常暴躁，不利于他们的成长。\n\nOrez 想要添加篱笆的尽可能的短。当然这个篱笆首先得保证不能改变狼羊的所属领地，再就是篱笆必须修筑完整，也就是说必须修建在单位格子的边界上并且不能只修建一部分。", "inputFormat": "文件的第一行包含两个整数 $n$ 和 $m$。接下来 $n$ 行每行 $m$ 个整数，$1$ 表示该格子属于狼的领地，$2$ 表示属于羊的领地，$0$ 表示该格子不是任何一只动物的领地。", "outputFormat": "文件中仅包含一个整数 $\\mathit{ans}$，代表篱笆的最短长度。", "hint": "对于 $10\\%$ 的数据，$n, m \\le 3$。  \n对于 $30\\%$ 的数据，$n, m \\le 20$。  \n对于 $100\\%$ 的数据，$1 \\le n, m \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2009] The Story of the Wolf and the Sheep", "background": "", "description": "“The wolf fell in love with the sheep, madly in love; after all, they truly loved once. The wolf fell in love with the sheep; it isn’t absurd. They say where there is love, there is direction...” Hearing this song, Orez thought: since wolves and sheep are so harmonious, why not try raising them together? So he decided to give it a try.\n\nOrez’s wolf-and-sheep pen can be viewed as an $n\\times m$ grid. Fences have already been installed along the outer boundary of this grid. However, Drake quickly realized that wolves are still wolves—they always covet the sheep—and that song is just a moving legend. So Orez decided to add some more fences inside the pen to keep the wolves and sheep separated.\n\nAfter careful observation, Orez found that both wolves and sheep each have their own territories. If they cannot stay within their own territory, they become very irritable, which is not good for their growth.\n\nOrez wants the added fences to be as short as possible. Of course, these fences must first ensure that the ownership of wolves’ and sheep’s territories does not change; second, the fences must be built completely—specifically, they must lie along the edges of unit cells and cannot be built only partially.", "inputFormat": "The first line contains two integers $n$ and $m$. Then follow $n$ lines, each containing $m$ integers: $1$ indicates that the cell belongs to the wolves’ territory, $2$ indicates that it belongs to the sheep’s territory, and $0$ indicates that the cell belongs to neither animal.", "outputFormat": "Output a single integer $\\mathit{ans}$, representing the shortest total length of the fence.", "hint": "For $10\\%$ of the testdata, $n, m \\le 3$.  \nFor $30\\%$ of the testdata, $n, m \\le 20$.  \nFor $100\\%$ of the testdata, $1 \\le n, m \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2009] 狼和羊的故事", "background": "", "description": "“狼爱上羊啊爱的疯狂，谁让他们真爱了一场；狼爱上羊啊并不荒唐，他们说有爱就有方向……”Orez 听到这首歌，心想：狼和羊如此和谐，为什么不尝试羊狼合养呢？说干就干！\n\nOrez 的羊狼圈可以看作一个 $n\\times m$ 的矩阵格子，这个矩阵的边缘已经装上了篱笆。可是 Drake 很快发现狼再怎么也是狼，它们总是对羊垂涎三尺，那首歌只不过是一个动人的传说而已。所以 Orez 决定在羊狼圈中再加入一些篱笆，还是要将羊狼分开来养。\n\n通过仔细观察，Orez 发现狼和羊都有属于自己领地，若狼和羊们不能呆在自己的领地，那它们就会变得非常暴躁，不利于他们的成长。\n\nOrez 想要添加篱笆的尽可能的短。当然这个篱笆首先得保证不能改变狼羊的所属领地，再就是篱笆必须修筑完整，也就是说必须修建在单位格子的边界上并且不能只修建一部分。", "inputFormat": "文件的第一行包含两个整数 $n$ 和 $m$。接下来 $n$ 行每行 $m$ 个整数，$1$ 表示该格子属于狼的领地，$2$ 表示属于羊的领地，$0$ 表示该格子不是任何一只动物的领地。", "outputFormat": "文件中仅包含一个整数 $\\mathit{ans}$，代表篱笆的最短长度。", "hint": "对于 $10\\%$ 的数据，$n, m \\le 3$。  \n对于 $30\\%$ 的数据，$n, m \\le 20$。  \n对于 $100\\%$ 的数据，$1 \\le n, m \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2599", "type": "P", "difficulty": 7, "samples": [["1\n4\n3 1 9 4\n", "0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "博弈论", "2009", "各省省选", "浙江"], "title": "[ZJOI2009] 取石子游戏", "background": "", "description": "在研究过 Nim 游戏及各种变种之后，Orez 又发现了一种全新的取石子游戏，这个游戏是这样的：\n\n有 $n$ 堆石子，将这 $n$ 堆石子摆成一排。游戏由两个人进行，两人轮流操作，每次操作者都可以从最左或最右的一堆中取出若干颗石子，可以将那一堆全部取掉，但不能不取，不能操作的人就输了。\n\nOrez 问：对于任意给出一个初始一个局面，是否存在先手必胜策略。", "inputFormat": "文件的第一行为一个整数 $T$，表示有 $T$ 组测试数据。对于每组测试数据：\n\n第一行为一个整数 $n$，表示有 $n$ 堆石子。\n\n第二行为 $n$ 个整数 $a_1, a_2, \\ldots , a_n$，依次表示每堆石子的数目。", "outputFormat": "对于每组测试数据仅输出一个整数 $0$ 或 $1$。其中 $1$ 表示有先手必胜策略，$0$ 表示没有。", "hint": "对于 $30 \\%$ 的数据，$n \\le 5$，$a_i \\le {10}^5$。  \n对于 $100 \\%$ 的数据，$1 \\le T \\le 10$，$1 \\le n \\le 1000$，$1 \\le a_i \\le {10}^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2009] Stone-Taking Game", "background": "", "description": "After studying the Nim game and its variants, Orez discovered a brand-new stone-taking game, defined as follows:\n\nThere are $n$ piles of stones arranged in a row. Two players take turns. On each turn, a player may take any positive number of stones from either the leftmost pile or the rightmost pile; the entire pile may be taken, but taking zero stones is not allowed. The player who cannot move loses.\n\nOrez asks: given any initial position, does there exist a winning strategy for the first player?", "inputFormat": "The first line contains an integer $T$, the number of test cases.  \nFor each test case:\n\n- The first line contains an integer $n$, the number of piles.  \n- The second line contains $n$ integers $a_1, a_2, \\ldots, a_n$, where $a_i$ is the number of stones in the $i$-th pile.", "outputFormat": "For each test case, output a single integer $0$ or $1$. Here, $1$ means there exists a winning strategy for the first player, and $0$ means there is not.", "hint": "- For $30\\%$ of the testdata, $n \\le 5$, $a_i \\le 10^5$.  \n- For $100\\%$ of the testdata, $1 \\le T \\le 10$, $1 \\le n \\le 1000$, $1 \\le a_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2009] 取石子游戏", "background": "", "description": "在研究过 Nim 游戏及各种变种之后，Orez 又发现了一种全新的取石子游戏，这个游戏是这样的：\n\n有 $n$ 堆石子，将这 $n$ 堆石子摆成一排。游戏由两个人进行，两人轮流操作，每次操作者都可以从最左或最右的一堆中取出若干颗石子，可以将那一堆全部取掉，但不能不取，不能操作的人就输了。\n\nOrez 问：对于任意给出一个初始一个局面，是否存在先手必胜策略。", "inputFormat": "文件的第一行为一个整数 $T$，表示有 $T$ 组测试数据。对于每组测试数据：\n\n第一行为一个整数 $n$，表示有 $n$ 堆石子。\n\n第二行为 $n$ 个整数 $a_1, a_2, \\ldots , a_n$，依次表示每堆石子的数目。", "outputFormat": "对于每组测试数据仅输出一个整数 $0$ 或 $1$。其中 $1$ 表示有先手必胜策略，$0$ 表示没有。", "hint": "对于 $30 \\%$ 的数据，$n \\le 5$，$a_i \\le {10}^5$。  \n对于 $100 \\%$ 的数据，$1 \\le T \\le 10$，$1 \\le n \\le 1000$，$1 \\le a_i \\le {10}^9$。", "locale": "zh-CN"}}}
{"pid": "P2600", "type": "P", "difficulty": 6, "samples": [["6\r\n1 2 4 5 6 7\r\n1 2 2 4 2 1\r\n", "1.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "2008", "各省省选", "浙江", "半平面交"], "title": "[ZJOI2008] 瞭望塔", "background": null, "description": "致力于建设全国示范和谐小村庄的 H 村村长 dadzhi，决定在村中建立一个瞭望塔，以此加强村中的治安。\n\n我们将 H 村抽象为一维的轮廓，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/pic/1710.png)\n\n我们可以用一条山的上方轮廓折线 $(x_1, y_1),(x_2, y_2),\\cdots,(x_n, y_n)$ 来描述 H 村的形状，这里 $x_1 < x_2 < \\cdots < x_n$。瞭望塔可以建造在 $[x_1, x_n]$ 间的任意位置，但必须满足从瞭望塔的顶端可以看到 H 村的任意位置。显然在不同的位置建造瞭望塔，所需要建造的高度是不同的。为了节省开支，dadzhi 村长希望建造的塔高度尽可能小。\n\n请你写一个程序，帮助 dadzhi 村长计算塔的最小高度。", "inputFormat": "输入第一行包含一个整数 $n$，表示轮廓折线的节点数目。接下来第一行 $n$ 个整数，为 $x_1 \\sim x_n$。第三行 $n$ 个整数，为 $y_1 \\sim y_n$。", "outputFormat": "输出仅包含一个实数，为塔的最小高度，精确到小数点后三位。", "hint": "对于 $60\\%$ 的数据，$n \\le 60$；\n\n对于 $100\\%$ 的数据，$n \\le 300$，输入坐标绝对值不超过 $10^6$。\n\n**请注意实数误差带来的问题。**", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2008] Watchtower", "background": "", "description": "The village head of village H, dadzhi, who is committed to building a nationally recognized harmonious small village, decides to build a watchtower in the village to improve public security.\n\nWe abstract village H as a one-dimensional silhouette, as shown in the figure below.\n\n![](https://cdn.luogu.com.cn/upload/pic/1710.png)\n\nWe can describe the shape of village H by the upper contour polyline of a mountain $(x_1, y_1),(x_2, y_2),\\cdots,(x_n, y_n)$, where $x_1 < x_2 < \\cdots < x_n$. The watchtower can be built at any position within $[x_1, x_n]$, but it must satisfy that from the top of the watchtower one can see every point of village H. Clearly, the required height depends on where the watchtower is built. To save costs, village head dadzhi wants the tower’s height to be as small as possible.\n\nPlease write a program to compute the minimum height of the tower.", "inputFormat": "The first line contains an integer $n$, denoting the number of vertices of the contour polyline. The second line contains $n$ integers, which are $x_1 \\sim x_n$. The third line contains $n$ integers, which are $y_1 \\sim y_n$.", "outputFormat": "Output a single real number, which is the minimum height of the tower, accurate to three digits after the decimal point.", "hint": "For 60% of the testdata, $n \\le 60$.\n\nFor 100% of the testdata, $n \\le 300$, and the absolute values of the input coordinates do not exceed $10^6$.\n\nPlease be careful about floating-point errors.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2008] 瞭望塔", "background": null, "description": "致力于建设全国示范和谐小村庄的 H 村村长 dadzhi，决定在村中建立一个瞭望塔，以此加强村中的治安。\n\n我们将 H 村抽象为一维的轮廓，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/pic/1710.png)\n\n我们可以用一条山的上方轮廓折线 $(x_1, y_1),(x_2, y_2),\\cdots,(x_n, y_n)$ 来描述 H 村的形状，这里 $x_1 < x_2 < \\cdots < x_n$。瞭望塔可以建造在 $[x_1, x_n]$ 间的任意位置，但必须满足从瞭望塔的顶端可以看到 H 村的任意位置。显然在不同的位置建造瞭望塔，所需要建造的高度是不同的。为了节省开支，dadzhi 村长希望建造的塔高度尽可能小。\n\n请你写一个程序，帮助 dadzhi 村长计算塔的最小高度。", "inputFormat": "输入第一行包含一个整数 $n$，表示轮廓折线的节点数目。接下来第一行 $n$ 个整数，为 $x_1 \\sim x_n$。第三行 $n$ 个整数，为 $y_1 \\sim y_n$。", "outputFormat": "输出仅包含一个实数，为塔的最小高度，精确到小数点后三位。", "hint": "对于 $60\\%$ 的数据，$n \\le 60$；\n\n对于 $100\\%$ 的数据，$n \\le 300$，输入坐标绝对值不超过 $10^6$。\n\n**请注意实数误差带来的问题。**", "locale": "zh-CN"}}}
{"pid": "P2601", "type": "P", "difficulty": 6, "samples": [["5 5\r\n4 2 4 4 4 \r\n3 1 4 4 3 \r\n3 5 3 3 3 \r\n3 1 5 3 3 \r\n4 2 1 2 4 ", "27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "二分", "各省省选", "浙江", "哈希 hashing", "Manacher 算法"], "title": "[ZJOI2009] 对称的正方形", "background": "", "description": "Orez 很喜欢搜集一些神秘的数据，并经常把它们排成一个矩阵进行研究。最近，Orez 又得到了一些数据，并已经把它们排成了一个 $n$ 行 $m$ 列的矩阵。通过观察，Orez 发现这些数据蕴涵了一个奇特的数，就是矩阵中上下对称且左右对称的正方形子矩阵的个数。Orez 自然很想知道这个数是多少，可是矩阵太大，无法去数。只能请你编个程序来计算出这个数。\n", "inputFormat": "文件的第一行为两个整数 $n$ 和 $m$。接下来 $n$ 行每行包含 $m$ 个正整数，表示 Orez 得到的矩阵。\n", "outputFormat": "文件中仅包含一个整数 $ans$，表示矩阵中有 $ans$ 个上下左右对称的正方形子矩阵。\n", "hint": "- 对于 $30\\%$ 的数据 $1\\le n,m\\le 100$；\n- 对于 $100\\%$ 的数据 $1\\le n,m\\le 1000$，矩阵中的数的大小不超过 $10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2009] Symmetric Square", "background": "", "description": "Orez likes collecting mysterious data and often arranges them into a matrix for study. Recently, Orez obtained some new data and arranged them into an $n$-row, $m$-column matrix. By observation, Orez found a peculiar number: the count of square submatrices that are symmetric both top-to-bottom and left-to-right. Naturally, Orez wants to know this number, but the matrix is too large to count by hand. Please write a program to compute this number.", "inputFormat": "The first line contains two integers $n$ and $m$. The next $n$ lines each contain $m$ positive integers, representing Orez’s matrix.", "outputFormat": "Output a single integer $ans$, the number of square submatrices that are symmetric both top-to-bottom and left-to-right.", "hint": "- For 30% of the testdata, $1 \\le n, m \\le 100$.\n- For 100% of the testdata, $1 \\le n, m \\le 1000$, and the values in the matrix do not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2009] 对称的正方形", "background": "", "description": "Orez 很喜欢搜集一些神秘的数据，并经常把它们排成一个矩阵进行研究。最近，Orez 又得到了一些数据，并已经把它们排成了一个 $n$ 行 $m$ 列的矩阵。通过观察，Orez 发现这些数据蕴涵了一个奇特的数，就是矩阵中上下对称且左右对称的正方形子矩阵的个数。Orez 自然很想知道这个数是多少，可是矩阵太大，无法去数。只能请你编个程序来计算出这个数。\n", "inputFormat": "文件的第一行为两个整数 $n$ 和 $m$。接下来 $n$ 行每行包含 $m$ 个正整数，表示 Orez 得到的矩阵。\n", "outputFormat": "文件中仅包含一个整数 $ans$，表示矩阵中有 $ans$ 个上下左右对称的正方形子矩阵。\n", "hint": "- 对于 $30\\%$ 的数据 $1\\le n,m\\le 100$；\n- 对于 $100\\%$ 的数据 $1\\le n,m\\le 1000$，矩阵中的数的大小不超过 $10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2602", "type": "P", "difficulty": 4, "samples": [["1 99\n", "9 20 20 20 20 20 20 20 20 20\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2010", "各省省选", "浙江", "深度优先搜索 DFS", "数位 DP"], "title": "[ZJOI2010] 数字计数", "background": null, "description": "给定两个正整数 $a$ 和 $b$，求在 $[a,b]$ 中的所有整数中，每个数码（digit）各出现了多少次。", "inputFormat": "仅包含一行两个整数 $a,b$，含义如上所述。", "outputFormat": "包含一行十个整数，分别表示 $0\\sim 9$ 在 $[a,b]$ 中出现了多少次。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le a\\le b\\le10^6$；\n- 对于 $100\\%$ 的数据，保证 $1\\le a\\le b\\le 10^{12}$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2010] Digit Counting", "background": "", "description": "Given two positive integers $a$ and $b$, count how many times each digit appears among all integers in $[a,b]$.", "inputFormat": "A single line containing two integers $a,b$, as described above.", "outputFormat": "A single line with ten integers, representing how many times $0\\sim 9$ appear in $[a,b]$.", "hint": "#### Constraints and Notes\n\n- For $30\\%$ of the testdata, it is guaranteed that $1\\le a\\le b\\le10^6$.\n- For $100\\%$ of the testdata, it is guaranteed that $1\\le a\\le b\\le 10^{12}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2010] 数字计数", "background": null, "description": "给定两个正整数 $a$ 和 $b$，求在 $[a,b]$ 中的所有整数中，每个数码（digit）各出现了多少次。", "inputFormat": "仅包含一行两个整数 $a,b$，含义如上所述。", "outputFormat": "包含一行十个整数，分别表示 $0\\sim 9$ 在 $[a,b]$ 中出现了多少次。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le a\\le b\\le10^6$；\n- 对于 $100\\%$ 的数据，保证 $1\\le a\\le b\\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P2603", "type": "P", "difficulty": 6, "samples": [["3 2\n2 17 0 10 1\n3 0 0 1 0 1 -1\n0 0 1 0 1 1\n", "2\n1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2008", "各省省选", "浙江", "向量", "AC 自动机"], "title": "[ZJOI2008] 无序运动", "background": "", "description": "D 博士对物理有着深入的研究，经典物理、天体物理、量子物理都有着以他的名字命名的定理。最近 D 博士着迷于研究粒子运动的无规则性。对圣经深信不疑的他相信，上帝创造的任何事物必然是有序的、有理可循的，而不是无规则的、混沌的。\n\n经过长时间的研究，D 博士找到了很多出现相当频繁的轨迹片断，他把这些轨迹片断储存在一个很大的数据库内。他需要你帮助他写一个程序，对于一个给出的粒子运动轨迹，统计数据库中每个轨迹片断的出现的次数。\n\n为清楚起见，我们定义一个粒子的轨迹为二维平面上的一个点列 $(P_1, P_2, \\dots, P_N)$。点列 $P$ 的一个子列 $[i, j]$ 定义为 $P$ 中一段连续的子序列 $(P_i, P_{i + 1}, \\dots, P_j)$。点列 $P$ 的一个子列 $[u, v]$ 被称为点列 $Q = (Q_1, Q_2, \\dots, Q_{v - u + 1})$ 在 $P$ 中的一次出现，当且仅当 $Q$ 经过有限次的平移、旋转、翻转、放缩之后得到 $Q'$ 满足 $\\forall 1 \\le k \\le u - v + 1$，$ Q'_k = P_{u + k - 1}$。\n\n对点列进行四种操作的解释：\n|操作名称|解释|\n|:-:|:-:|\n|平移|设平移向量为 $(d_x, d_y)$，则任意点 $(x, y)$ 平移后的结果为 $(x + d_x, y + d_y)$|\n|旋转|设旋转角为 $t$，则任意点 $(x, y)$ 旋转后的结果为 $(x \\cos t - y \\sin t, x \\sin t + y \\cos t)$|\n|翻转|任意点 $(x, y)$ 翻转后的结果为 $(x, -y)$\n|放缩|设放缩比例为 $p(p \\ne 0)$，则任意点 $(x, y)$ 放缩后的结果为 $(px, py)$|", "inputFormat": "第一行两个整数 $N, M$，分别描述待处理的粒子运动轨迹的点列大小与数据库内的轨迹片断个数。\n\n接下来 $M$ 行依次给出每个轨迹片断。每行先是一个正整数 $K$，表示该轨迹片断点列的长度。然后 $2K$ 个整数，依次描述点列中的 $K$ 个点的横坐标与纵坐标。\n\n接下来一行 $2N$ 个整数，依次描述待处理的粒子运动轨迹的点列中 $N$ 个点的横坐标与纵坐标。\n\n注：输入中的每条轨迹中任意相邻两点不会相同。", "outputFormat": "应包含 $M$ 行，依次给出每个片段在待处理运动轨迹中的出现次数。", "hint": "记片段总长度为 $L$。\n\n对于 $30\\%$ 的测试数据，满足 $N, M, K \\le 100$，$L \\le 500$;\n\n对于 $50\\%$ 的测试数据，满足 $N, M, K \\le 1000$，$L \\le 5000$;\n\n对于 $100\\%$ 的测试数据，满足 $N, K \\le 2 \\times 10 ^ 5$，$L \\le 2 \\times 10 ^ 6$，保证输入中给出所有点坐标绝对值均不大于 $10 ^ 4$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2008] Unordered Motion", "background": "", "description": "Dr. D has conducted in-depth research in physics, with theorems in classical physics, astrophysics, and quantum physics named after him. Recently, he has been fascinated by the irregularity of particle motion. Firmly believing in the Bible, he is convinced that anything created by God must be orderly and rational, rather than random and chaotic.\n\nAfter long study, Dr. D found many trajectory fragments that appear quite frequently and stored them in a large database. He needs you to write a program that, for a given particle trajectory, counts the number of occurrences of each trajectory fragment from the database.\n\nFor clarity, we define a particle’s trajectory as a sequence of points on a 2D plane, $(P_1, P_2, \\dots, P_N)$. A subarray $[i, j]$ of the point sequence $P$ is defined as a contiguous subsequence in $P$, $(P_i, P_{i + 1}, \\dots, P_j)$. A subarray $[u, v]$ of the point sequence $P$ is called an occurrence of the point sequence $Q = (Q_1, Q_2, \\dots, Q_{v - u + 1})$ in $P$ if and only if, after a finite number of translations, rotations, reflections, and scalings, we obtain $Q'$ such that $\\forall 1 \\le k \\le v - u + 1$, $Q'_k = P_{u + k - 1}$.\n\nExplanations for the four operations on point sequences:\n|Operation|Explanation|\n|:-:|:-:|\n|Translation|Let the translation vector be $(d_x, d_y)$. Then any point $(x, y)$ is mapped to $(x + d_x, y + d_y)$.|\n|Rotation|Let the rotation angle be $t$. Then any point $(x, y)$ is mapped to $(x \\cos t - y \\sin t, x \\sin t + y \\cos t)$.|\n|Reflection|Any point $(x, y)$ is mapped to $(x, -y)$.|\n|Scaling|Let the scaling factor be $p (p \\ne 0)$. Then any point $(x, y)$ is mapped to $(px, py)$.|", "inputFormat": "The first line contains two integers $N, M$, representing the size of the point sequence of the trajectory to be processed and the number of trajectory fragments in the database, respectively.\n\nThe next $M$ lines describe each trajectory fragment in order. Each line starts with a positive integer $K$, the length of the point sequence of that fragment. Then $2K$ integers follow, describing the $K$ points’ $x$- and $y$-coordinates in order.\n\nThe next line contains $2N$ integers, describing the $x$- and $y$-coordinates of the $N$ points in the point sequence of the trajectory to be processed, in order.\n\nNote: In every trajectory in the input, any two adjacent points are different.", "outputFormat": "Output $M$ lines. For each fragment, output the number of its occurrences in the trajectory to be processed, in order.", "hint": "Let the total length of all fragments be $L$.\n\nConstraints:\n- For $30\\%$ of the testdata, $N, M, K \\le 100$, $L \\le 500$.\n- For $50\\%$ of the testdata, $N, M, K \\le 1000$, $L \\le 5000$.\n- For $100\\%$ of the testdata, $N, K \\le 2 \\times 10 ^ 5$, $L \\le 2 \\times 10 ^ 6$, and it is guaranteed that the absolute value of every given point coordinate in the input does not exceed $10 ^ 4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2008] 无序运动", "background": "", "description": "D 博士对物理有着深入的研究，经典物理、天体物理、量子物理都有着以他的名字命名的定理。最近 D 博士着迷于研究粒子运动的无规则性。对圣经深信不疑的他相信，上帝创造的任何事物必然是有序的、有理可循的，而不是无规则的、混沌的。\n\n经过长时间的研究，D 博士找到了很多出现相当频繁的轨迹片断，他把这些轨迹片断储存在一个很大的数据库内。他需要你帮助他写一个程序，对于一个给出的粒子运动轨迹，统计数据库中每个轨迹片断的出现的次数。\n\n为清楚起见，我们定义一个粒子的轨迹为二维平面上的一个点列 $(P_1, P_2, \\dots, P_N)$。点列 $P$ 的一个子列 $[i, j]$ 定义为 $P$ 中一段连续的子序列 $(P_i, P_{i + 1}, \\dots, P_j)$。点列 $P$ 的一个子列 $[u, v]$ 被称为点列 $Q = (Q_1, Q_2, \\dots, Q_{v - u + 1})$ 在 $P$ 中的一次出现，当且仅当 $Q$ 经过有限次的平移、旋转、翻转、放缩之后得到 $Q'$ 满足 $\\forall 1 \\le k \\le u - v + 1$，$ Q'_k = P_{u + k - 1}$。\n\n对点列进行四种操作的解释：\n|操作名称|解释|\n|:-:|:-:|\n|平移|设平移向量为 $(d_x, d_y)$，则任意点 $(x, y)$ 平移后的结果为 $(x + d_x, y + d_y)$|\n|旋转|设旋转角为 $t$，则任意点 $(x, y)$ 旋转后的结果为 $(x \\cos t - y \\sin t, x \\sin t + y \\cos t)$|\n|翻转|任意点 $(x, y)$ 翻转后的结果为 $(x, -y)$\n|放缩|设放缩比例为 $p(p \\ne 0)$，则任意点 $(x, y)$ 放缩后的结果为 $(px, py)$|", "inputFormat": "第一行两个整数 $N, M$，分别描述待处理的粒子运动轨迹的点列大小与数据库内的轨迹片断个数。\n\n接下来 $M$ 行依次给出每个轨迹片断。每行先是一个正整数 $K$，表示该轨迹片断点列的长度。然后 $2K$ 个整数，依次描述点列中的 $K$ 个点的横坐标与纵坐标。\n\n接下来一行 $2N$ 个整数，依次描述待处理的粒子运动轨迹的点列中 $N$ 个点的横坐标与纵坐标。\n\n注：输入中的每条轨迹中任意相邻两点不会相同。", "outputFormat": "应包含 $M$ 行，依次给出每个片段在待处理运动轨迹中的出现次数。", "hint": "记片段总长度为 $L$。\n\n对于 $30\\%$ 的测试数据，满足 $N, M, K \\le 100$，$L \\le 500$;\n\n对于 $50\\%$ 的测试数据，满足 $N, M, K \\le 1000$，$L \\le 5000$;\n\n对于 $100\\%$ 的测试数据，满足 $N, K \\le 2 \\times 10 ^ 5$，$L \\le 2 \\times 10 ^ 6$，保证输入中给出所有点坐标绝对值均不大于 $10 ^ 4$。", "locale": "zh-CN"}}}
{"pid": "P2604", "type": "P", "difficulty": 6, "samples": [["5 8 2\n1 2 5 8\n2 5 9 9\n5 1 6 2\n5 1 1 8\n1 2 8 7\n2 5 4 9\n1 2 1 1\n1 4 2 1", "13 19\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "网络流", "浙江", "图论建模", "费用流"], "title": "[ZJOI2010] 网络扩容", "background": "", "description": "给定一张有向图，每条边都有一个容量 $c$ 和一个扩容费用 $w$。这里扩容费用是指将容量扩大 $1$ 所需的费用。求： \n\n1. 在不扩容的情况下，$1$ 到 $n$ 的最大流；\n\n2. 将 $1$ 到 $n$ 的最大流增加 $k$ 所需的最小扩容费用。", "inputFormat": "第一行包含三个整数 $n,m,k$，表示有向图的点数、边数以及所需要增加的流量。\n\n接下来的 $M$ 行每行包含四个整数 $u,v,c,w$，表示一条从$u$ 到 $v$，容量为 $c$，扩容费用为 $w$ 的边。", "outputFormat": "输出文件一行包含两个整数，分别表示问题 $1$ 和问题 $2$ 的答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 100$。\n- 对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^3$，$1\\le m\\le 5\\times 10^3$，$1\\le k\\le 10$，$1 \\leq u, v \\leq n$，$1\\le c,w\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2010] Network Expansion", "background": "", "description": "Given a directed graph, each edge has a capacity $c$ and an expansion cost $w$. The expansion cost is the cost required to increase the capacity by $1$. Find:\n1. The maximum flow from $1$ to $n$ without any expansion.\n2. The minimum total expansion cost required to increase the maximum flow from $1$ to $n$ by $k$.", "inputFormat": "The first line contains three integers $n, m, k$, denoting the number of vertices, the number of edges, and the required increase in flow.\n\nThe next $m$ lines each contain four integers $u, v, c, w$, describing a directed edge from $u$ to $v$ with capacity $c$ and expansion cost $w$.", "outputFormat": "Output one line containing two integers, which are the answers to problems $1$ and $2$ respectively.", "hint": "- Constraints\n  - For $30\\%$ of the testdata, it is guaranteed that $n \\le 100$.\n  - For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 10^3$, $1 \\le m \\le 5 \\times 10^3$, $1 \\le k \\le 10$, $1 \\le u, v \\le n$, and $1 \\le c, w \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2010] 网络扩容", "background": "", "description": "给定一张有向图，每条边都有一个容量 $c$ 和一个扩容费用 $w$。这里扩容费用是指将容量扩大 $1$ 所需的费用。求： \n\n1. 在不扩容的情况下，$1$ 到 $n$ 的最大流；\n\n2. 将 $1$ 到 $n$ 的最大流增加 $k$ 所需的最小扩容费用。", "inputFormat": "第一行包含三个整数 $n,m,k$，表示有向图的点数、边数以及所需要增加的流量。\n\n接下来的 $M$ 行每行包含四个整数 $u,v,c,w$，表示一条从$u$ 到 $v$，容量为 $c$，扩容费用为 $w$ 的边。", "outputFormat": "输出文件一行包含两个整数，分别表示问题 $1$ 和问题 $2$ 的答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 100$。\n- 对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^3$，$1\\le m\\le 5\\times 10^3$，$1\\le k\\le 10$，$1 \\leq u, v \\leq n$，$1\\le c,w\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2605", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2\n2 3 2\n1 1 0\n10 20 30", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2010", "线段树", "各省省选", "浙江"], "title": "[ZJOI2010] 基站选址", "background": null, "description": "有 $N$ 个村庄坐落在一条直线上，第 $i(i>1)$ 个村庄距离第 $1$ 个村庄的距离为 $D_i$。需要在这些村庄中建立不超过 $K$ 个通讯基站，在第 $i$ 个村庄建立基站的费用为 $C_i$。如果在距离第 $i$ 个村庄不超过 $S_i$ 的范围内建立了一个通讯基站，那么就村庄被基站覆盖了。如果第 $i$ 个村庄没有被覆盖，则需要向他们补偿，费用为 $W_i$。现在的问题是，选择基站的位置，使得总费用最小。", "inputFormat": "输入文件的第一行包含两个整数 $N,K$，含义如上所述。\n\n第二行包含 $N-1$ 个整数，分别表示 $D_2,D_3,\\cdots,D_N$，这 $N-1$ 个数是递增的。\n\n第三行包含 $N$ 个整数，表示 $C_1,C_2,\\cdots,C_N$。\n\n第四行包含 $N$ 个整数，表示 $S_1,S_2,\\cdots,S_N$。\n\n第五行包含 $N$ 个整数，表示 $W_1,W_2,\\cdots,W_N$。", "outputFormat": "输出文件中仅包含一个整数，表示最小的总费用。", "hint": "### 数据规模与约定\n\n$30\\%$ 的数据中，$N \\leq 500$；\n\n$100\\%$ 的数据中，$K\\leq N$，$K\\leq 100$，$N\\leq 2\\times 10^4$，$D_i \\leq 10^9$，$C_i\\leq 10^4$，$S_i \\leq10^9$，$W_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2010] Base Station Placement", "background": "", "description": "There are $N$ villages located on a straight line. For village $i$ ($i > 1$), the distance to village $1$ is $D_i$. You need to build at most $K$ communication base stations in these villages. The cost to build a base station at village $i$ is $C_i$. If there is a base station within a distance no more than $S_i$ from village $i$, then village $i$ is considered covered. If village $i$ is not covered, you must compensate it at a cost of $W_i$. Choose the locations of the base stations to minimize the total cost.", "inputFormat": "- The first line contains two integers $N, K$, as described above.\n- The second line contains $N-1$ integers, $D_2, D_3, \\cdots, D_N$, which are in ascending order.\n- The third line contains $N$ integers, $C_1, C_2, \\cdots, C_N$.\n- The fourth line contains $N$ integers, $S_1, S_2, \\cdots, S_N$.\n- The fifth line contains $N$ integers, $W_1, W_2, \\cdots, W_N$.", "outputFormat": "Output a single integer, the minimum total cost.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $N \\leq 500$.\n- For $100\\%$ of the testdata, $K \\leq N$, $K \\leq 100$, $N \\leq 2 \\times 10^4$, $D_i \\leq 10^9$, $C_i \\leq 10^4$, $S_i \\leq 10^9$, $W_i \\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2010] 基站选址", "background": null, "description": "有 $N$ 个村庄坐落在一条直线上，第 $i(i>1)$ 个村庄距离第 $1$ 个村庄的距离为 $D_i$。需要在这些村庄中建立不超过 $K$ 个通讯基站，在第 $i$ 个村庄建立基站的费用为 $C_i$。如果在距离第 $i$ 个村庄不超过 $S_i$ 的范围内建立了一个通讯基站，那么就村庄被基站覆盖了。如果第 $i$ 个村庄没有被覆盖，则需要向他们补偿，费用为 $W_i$。现在的问题是，选择基站的位置，使得总费用最小。", "inputFormat": "输入文件的第一行包含两个整数 $N,K$，含义如上所述。\n\n第二行包含 $N-1$ 个整数，分别表示 $D_2,D_3,\\cdots,D_N$，这 $N-1$ 个数是递增的。\n\n第三行包含 $N$ 个整数，表示 $C_1,C_2,\\cdots,C_N$。\n\n第四行包含 $N$ 个整数，表示 $S_1,S_2,\\cdots,S_N$。\n\n第五行包含 $N$ 个整数，表示 $W_1,W_2,\\cdots,W_N$。", "outputFormat": "输出文件中仅包含一个整数，表示最小的总费用。", "hint": "### 数据规模与约定\n\n$30\\%$ 的数据中，$N \\leq 500$；\n\n$100\\%$ 的数据中，$K\\leq N$，$K\\leq 100$，$N\\leq 2\\times 10^4$，$D_i \\leq 10^9$，$C_i\\leq 10^4$，$S_i \\leq10^9$，$W_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2606", "type": "P", "difficulty": 5, "samples": [["20 23 ", "16\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "2010", "各省省选", "浙江", "组合数学", "Lucas 定理"], "title": "[ZJOI2010] 排列计数", "background": "", "description": "称一个 $1 \\sim n$ 的排列 $p_1,p_2, \\dots ,p_n$ 是 Magic 的，当且仅当  \n$$\\forall i \\in [2,n],p_i > p_{\\lfloor i/2 \\rfloor}$$\n计算 $1 \\sim n$ 的排列中有多少是 Magic 的，答案可能很大，只能输出模 $m$ 以后的值。", "inputFormat": "一行两个整数 $n,m$，含义如上所述。\n", "outputFormat": "输出文件中仅包含一个整数，表示 $1\\sim n$ 的排列中， Magic 排列的个数模 $m$ 的值。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^6$, $1\\le m \\le 10^9$，$m$ 是一个质数。\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2010] Permutation Counting", "background": "", "description": "We call a permutation $p_1, p_2, \\dots, p_n$ of $1 \\sim n$ \"Magic\" if and only if\n$$\\forall i \\in [2,n], \\; p_i > p_{\\lfloor i/2 \\rfloor}.$$\nCount how many permutations of $1 \\sim n$ are \"Magic\". The answer may be large; output the value modulo $m$.", "inputFormat": "One line contains two integers $n, m$, as described above.", "outputFormat": "Output a single integer: the number of \"Magic\" permutations of $1 \\sim n$ modulo $m$.", "hint": "Constraints  \nFor $100\\%$ of the data, $1 \\le n \\le 10^6$, $1 \\le m \\le 10^9$, and $m$ is a prime.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2010] 排列计数", "background": "", "description": "称一个 $1 \\sim n$ 的排列 $p_1,p_2, \\dots ,p_n$ 是 Magic 的，当且仅当  \n$$\\forall i \\in [2,n],p_i > p_{\\lfloor i/2 \\rfloor}$$\n计算 $1 \\sim n$ 的排列中有多少是 Magic 的，答案可能很大，只能输出模 $m$ 以后的值。", "inputFormat": "一行两个整数 $n,m$，含义如上所述。\n", "outputFormat": "输出文件中仅包含一个整数，表示 $1\\sim n$ 的排列中， Magic 排列的个数模 $m$ 的值。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^6$, $1\\le m \\le 10^9$，$m$ 是一个质数。\n", "locale": "zh-CN"}}}
{"pid": "P2607", "type": "P", "difficulty": 5, "samples": [["3\n10 2\n20 3\n30 1\n", "30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2008", "各省省选", "浙江", "树形 DP", "基环树"], "title": "[ZJOI2008] 骑士", "background": "", "description": "Z 国的骑士团是一个很有势力的组织，帮会中汇聚了来自各地的精英。他们劫富济贫，惩恶扬善，受到社会各界的赞扬。\n\n最近发生了一件可怕的事情，邪恶的 Y 国发动了一场针对 Z 国的侵略战争。战火绵延五百里，在和平环境中安逸了数百年的 Z 国又怎能抵挡的住 Y 国的军队。于是人们把所有的希望都寄托在了骑士团的身上，就像期待有一个真龙天子的降生，带领正义打败邪恶。\n\n骑士团是肯定具有打败邪恶势力的能力的，但是骑士们互相之间往往有一些矛盾。每个骑士都有且仅有一个自己最厌恶的骑士（当然不是他自己），他是绝对不会与自己最厌恶的人一同出征的。\n\n战火绵延，人民生灵涂炭，组织起一个骑士军团加入战斗刻不容缓！国王交给了你一个艰巨的任务，从所有的骑士中选出一个骑士军团，使得军团内没有矛盾的两人（不存在一个骑士与他最痛恨的人一同被选入骑士军团的情况），并且，使得这支骑士军团最具有战斗力。\n\n为了描述战斗力，我们将骑士按照 $1$ 至 $n$ 编号，给每名骑士一个战斗力的估计，一个军团的战斗力为所有骑士的战斗力总和。", "inputFormat": "第一行包含一个整数 $n$，描述骑士团的人数。\n\n接下来 $n$ 行，每行两个整数，按顺序描述每一名骑士的战斗力和他最痛恨的骑士。", "outputFormat": "应输出一行，包含一个整数，表示你所选出的骑士军团的战斗力。", "hint": "#### 数据规模与约定\n\n对于 $30\\%$ 的测试数据，满足 $n \\le 10$；\n\n对于 $60\\%$ 的测试数据，满足 $n \\le 100$；\n\n对于 $80\\%$ 的测试数据，满足 $n \\le 10 ^4$。\n\n对于 $100\\%$ 的测试数据，满足 $1\\le n \\le 10^6$，每名骑士的战斗力都是不大于 $10^6$ 的正整数。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2008] Knights", "background": "", "description": "The knights’ order of country Z is a powerful organization that gathers elites from all over the land. They rob the rich to help the poor and punish evil while promoting good, earning praise from all sectors of society.\n\nRecently, a terrible event occurred: the evil country Y launched an invasion against country Z. War flames stretch for five hundred li. Having enjoyed peace for hundreds of years, country Z could hardly resist the army of country Y. Thus, people pinned all their hopes on the knights’ order, as if awaiting the birth of a true dragon emperor to lead justice to defeat evil.\n\nThe knights’ order certainly has the ability to defeat evil forces, but there are often conflicts among the knights. Each knight has exactly one knight he hates the most (and it is not himself), and he absolutely refuses to go on campaign together with the one he hates the most.\n\nWar is raging, and people are suffering. It is urgent to organize a knights’ army to join the battle. The king assigns you a difficult task: choose a subset of knights to form an army such that no two selected knights are in conflict (i.e., there does not exist a knight who is selected together with the knight he hates the most), and such that this army has the maximum combat power.\n\nTo describe combat power, we number the knights from $1$ to $n$, and assign each knight an estimated combat power. The combat power of an army is the sum of the combat power of all selected knights.", "inputFormat": "The first line contains an integer $n$, the number of knights.\n\nThe next $n$ lines, in order, describe each knight’s combat power and the knight he hates the most. Specifically, for $i = 1, \\dots, n$, line $i$ contains two integers $w_i$ and $h_i$, where $w_i$ is the combat power of knight $i$, and $h_i$ is the index of the knight he hates the most, with $1 \\le h_i \\le n$ and $h_i \\ne i$.", "outputFormat": "Output one line containing a single integer, the maximum combat power of the army you select.", "hint": "Constraints:\n\n- For $30\\%$ of the testdata, $n \\le 10$.\n- For $60\\%$ of the testdata, $n \\le 100$.\n- For $80\\%$ of the testdata, $n \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^6$, and each knight’s combat power is a positive integer not greater than $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2008] 骑士", "background": "", "description": "Z 国的骑士团是一个很有势力的组织，帮会中汇聚了来自各地的精英。他们劫富济贫，惩恶扬善，受到社会各界的赞扬。\n\n最近发生了一件可怕的事情，邪恶的 Y 国发动了一场针对 Z 国的侵略战争。战火绵延五百里，在和平环境中安逸了数百年的 Z 国又怎能抵挡的住 Y 国的军队。于是人们把所有的希望都寄托在了骑士团的身上，就像期待有一个真龙天子的降生，带领正义打败邪恶。\n\n骑士团是肯定具有打败邪恶势力的能力的，但是骑士们互相之间往往有一些矛盾。每个骑士都有且仅有一个自己最厌恶的骑士（当然不是他自己），他是绝对不会与自己最厌恶的人一同出征的。\n\n战火绵延，人民生灵涂炭，组织起一个骑士军团加入战斗刻不容缓！国王交给了你一个艰巨的任务，从所有的骑士中选出一个骑士军团，使得军团内没有矛盾的两人（不存在一个骑士与他最痛恨的人一同被选入骑士军团的情况），并且，使得这支骑士军团最具有战斗力。\n\n为了描述战斗力，我们将骑士按照 $1$ 至 $n$ 编号，给每名骑士一个战斗力的估计，一个军团的战斗力为所有骑士的战斗力总和。", "inputFormat": "第一行包含一个整数 $n$，描述骑士团的人数。\n\n接下来 $n$ 行，每行两个整数，按顺序描述每一名骑士的战斗力和他最痛恨的骑士。", "outputFormat": "应输出一行，包含一个整数，表示你所选出的骑士军团的战斗力。", "hint": "#### 数据规模与约定\n\n对于 $30\\%$ 的测试数据，满足 $n \\le 10$；\n\n对于 $60\\%$ 的测试数据，满足 $n \\le 100$；\n\n对于 $80\\%$ 的测试数据，满足 $n \\le 10 ^4$。\n\n对于 $100\\%$ 的测试数据，满足 $1\\le n \\le 10^6$，每名骑士的战斗力都是不大于 $10^6$ 的正整数。", "locale": "zh-CN"}}}
{"pid": "P2608", "type": "P", "difficulty": 0, "samples": [["4\r\n\r\n1 2 3\r\n10 20\r\n\r\n3 5 7\r\n10 20\r\n15 16\r\n17 18\r\n\r\n4 3 6\r\n10 12\r\n8 9\r\n16 11\r\n13 20\r\n\r\n4 4 6\r\n7 12\r\n5 3\r\n6 5\r\n1000000 1000000\r\n", "100\r\n162\r\n84\r\n41\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "浙江"], "title": "[ZJOI2010] 任务安排", "background": "", "description": "小 Y 最近遇到了一个棘手的问题。她有两项任务需要完成，其中第一项任务是重复操作 $1$（下文称作 op1）共 $S_1$ 次，第二项任务是重复操作 $2$（下文称作 op2）共 $S_2$ 次。为了完成这些任务，小 Y 雇佣了 $N$ 名工人。其中，第 $i$ 个工人完成 op1 所需时间为 $T_{1,i}$，完成 op2 所需时间为 $T_{2,i}$。每个 op1 和 op2 都只能被一名工人完成，每名工人在任意时刻都只能做一项工作。\n\n所有的工人从第 $0$ 秒开始工作。每当一个工人开始执行一项操作（op1 或 op2），他必须一直执行下去直到完成而不能被打断。我们记第一项任务完成的时间为 $E_1$，第二项任务完成的时间为 $E_2$，你的任务就是安排这些工人的工作，使得 $E_1+E_2$ 最小。", "inputFormat": "输入文件的第一行包含一个整数 $T$，表示输入文件中数据的组数。\n\n每个测试数据的第一行包含三个整数 $N,S_1,S_2$，含义如上文所述。\n\n接下来的 $N$ 行每行包含两个整数 $T_{1,i},T_{2,i}$，分别表示第 $i$ 个工人完成 op1 和 op2 所需的时间。", "outputFormat": "输出文件包含 $T$ 行，每行只有一个整数，表示你找到的 $E_1+E_2$ 的最小值。", "hint": "### 样例说明\n\n第一组数据中，唯一的工人首先执行 $2$ 次 op1，在第 $20$ 秒完成任务一 $(E_1=20)$。然后执行 $2$ 次 op2，在第 $80$ 秒完成任务二 $(E_2=80)$。因此答案为 $20+80=100$。\n\n第二组数据中，工人 $\\#1$ 连续执行 $5$ 次 op1，在第 $50$ 秒完成任务一 $(E_1=50)$，工人 $#2$ 执行 $7$ 次 op2，在第 $112$ 秒完成任务二 $(E_2=112)$。因此答案为 $50+112=162$。\n\n第三组数据和第二组数据类似。\n\n第四组数据中，工人 $\\#2$ 首先连续执行 $6$ 次 op2，在第 $18$ 秒完成任务二 $(E_2=18)$。于此同时，工人 $#3$ 执行 $3$ 次 op1，同样在第 $18$ 秒完成。此时还需要执行一次 op1，因此让工人 $#2$ 去执行最后一次 op1，在第 $23$ 秒完成任务一 $(E_1=23)$ 、因此答案为 $18+23=41$。\n\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 7$，$1 \\le N \\le 100$，$1 \\le S_1,S_2 \\le 7$，$1 \\le T_{1,i},T_{2,i} \\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2010] Task Arrangement", "background": "", "description": "Xiao Y recently encountered a tricky problem. She has two tasks to complete. The first task is to repeat operation 1 (hereinafter referred to as op1) exactly $S_1$ times, and the second task is to repeat operation 2 (hereinafter referred to as op2) exactly $S_2$ times. To complete these tasks, Xiao Y hired $N$ workers. For the $i$-th worker, the time to complete one op1 is $T_{1,i}$, and the time to complete one op2 is $T_{2,i}$. Each op1 and op2 can only be completed by one worker, and each worker can only perform one job at any moment.\n\nAll workers start working at time $0$. Whenever a worker starts an operation (op1 or op2), they must continue until it finishes and cannot be interrupted. Let the completion time of the first task be $E_1$, and the completion time of the second task be $E_2$. Your goal is to schedule the workers so that $E_1 + E_2$ is minimized.", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains three integers $N, S_1, S_2$ as described above.\n\nEach of the next $N$ lines contains two integers $T_{1,i}, T_{2,i}$, denoting the time the $i$-th worker needs to complete one op1 and one op2, respectively.", "outputFormat": "Output $T$ lines. Each line contains a single integer, the minimum value of $E_1 + E_2$ you can achieve.", "hint": "### Sample Explanation\n\nIn the first test case, the only worker first performs op1 $2$ times and finishes task 1 at time $20$ ( $E_1 = 20$ ). Then they perform op2 $2$ times and finish task 2 at time $80$ ( $E_2 = 80$ ). Therefore, the answer is $20 + 80 = 100$.\n\nIn the second test case, worker #1 performs op1 $5$ times consecutively and finishes task 1 at time $50$ ( $E_1 = 50$ ). Worker #2 performs op2 $7$ times and finishes task 2 at time $112$ ( $E_2 = 112$ ). Therefore, the answer is $50 + 112 = 162$.\n\nThe third test case is similar to the second test case.\n\nIn the fourth test case, worker #2 first performs op2 $6$ times and finishes task 2 at time $18$ ( $E_2 = 18$ ). Meanwhile, worker #3 performs op1 $3$ times and also finishes at time $18$. At this point, one more op1 is still needed, so worker #2 performs the last op1 and finishes task 1 at time $23$ ( $E_1 = 23$ ). Therefore, the answer is $18 + 23 = 41$.\n\n### Constraints\n\nFor $100\\%$ of the testdata, $1 \\le T \\le 7$, $1 \\le N \\le 100$, $1 \\le S_1, S_2 \\le 7$, and $1 \\le T_{1,i}, T_{2,i} \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2010] 任务安排", "background": "", "description": "小 Y 最近遇到了一个棘手的问题。她有两项任务需要完成，其中第一项任务是重复操作 $1$（下文称作 op1）共 $S_1$ 次，第二项任务是重复操作 $2$（下文称作 op2）共 $S_2$ 次。为了完成这些任务，小 Y 雇佣了 $N$ 名工人。其中，第 $i$ 个工人完成 op1 所需时间为 $T_{1,i}$，完成 op2 所需时间为 $T_{2,i}$。每个 op1 和 op2 都只能被一名工人完成，每名工人在任意时刻都只能做一项工作。\n\n所有的工人从第 $0$ 秒开始工作。每当一个工人开始执行一项操作（op1 或 op2），他必须一直执行下去直到完成而不能被打断。我们记第一项任务完成的时间为 $E_1$，第二项任务完成的时间为 $E_2$，你的任务就是安排这些工人的工作，使得 $E_1+E_2$ 最小。", "inputFormat": "输入文件的第一行包含一个整数 $T$，表示输入文件中数据的组数。\n\n每个测试数据的第一行包含三个整数 $N,S_1,S_2$，含义如上文所述。\n\n接下来的 $N$ 行每行包含两个整数 $T_{1,i},T_{2,i}$，分别表示第 $i$ 个工人完成 op1 和 op2 所需的时间。", "outputFormat": "输出文件包含 $T$ 行，每行只有一个整数，表示你找到的 $E_1+E_2$ 的最小值。", "hint": "### 样例说明\n\n第一组数据中，唯一的工人首先执行 $2$ 次 op1，在第 $20$ 秒完成任务一 $(E_1=20)$。然后执行 $2$ 次 op2，在第 $80$ 秒完成任务二 $(E_2=80)$。因此答案为 $20+80=100$。\n\n第二组数据中，工人 $\\#1$ 连续执行 $5$ 次 op1，在第 $50$ 秒完成任务一 $(E_1=50)$，工人 $#2$ 执行 $7$ 次 op2，在第 $112$ 秒完成任务二 $(E_2=112)$。因此答案为 $50+112=162$。\n\n第三组数据和第二组数据类似。\n\n第四组数据中，工人 $\\#2$ 首先连续执行 $6$ 次 op2，在第 $18$ 秒完成任务二 $(E_2=18)$。于此同时，工人 $#3$ 执行 $3$ 次 op1，同样在第 $18$ 秒完成。此时还需要执行一次 op1，因此让工人 $#2$ 去执行最后一次 op1，在第 $23$ 秒完成任务一 $(E_1=23)$ 、因此答案为 $18+23=41$。\n\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 7$，$1 \\le N \\le 100$，$1 \\le S_1,S_2 \\le 7$，$1 \\le T_{1,i},T_{2,i} \\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P2609", "type": "P", "difficulty": 5, "samples": [["3\n1\n3\n10\n", "1\n2\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度", "2012", "各省省选", "递归", "浙江"], "title": "[ZJOI2012] 数列", "background": "", "description": "小白和小蓝在一起上数学课，下课后老师留了一道作业，求下面这个数列的通项公式：\n\n$$a_0=0,a_1=1,a_{2i}=a_i,a_{2i+1}=a_i+a_{i+1}$$\n\n小白作为一个数学爱好者，很快就计算出了这个数列的通项公式。于是，小白告诉小蓝自己已经做出来了，但为了防止小蓝抄作业，小白并不想把公式公布出来。于是小白为了向小蓝证明自己的确做出来了此题以达到其炫耀的目的，想出了一个绝妙的方法：即让小蓝说一个正整数 $n$，小白则说出 $a_n$ 的值，如果当 $n$ 很大时小白仍能很快的说出正确答案，这就说明小白的确得到了公式。但这个方法有一个很大的漏洞：小蓝自己不会做，没法验证小白的答案是否正确。作为小蓝的好友，你能帮帮小蓝吗？", "inputFormat": "输入文件第一行有且只有一个正整数 $T$，表示测试数据的组数。\n\n接下来 $T$ 行，每行一个整数 $n$。", "outputFormat": "对于每组数据：输出一行一个整数代表 $a_n$。", "hint": "- 对于 $20\\%$ 的数据，$1 \\le n \\le 10^8$。 \n- 对于 $50\\%$ 的数据，$1 \\le n \\le 10^{12}$。\n- 对于 $100\\%$ 的数据，$1 \\le T \\le 20$，$1 \\le n \\le 10^{100}$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2012] Sequence", "background": "", "description": "Xiaobai and Xiaolan are in a math class together. After class, the teacher assigns a homework problem: find the general term of the following sequence:\n\n$$a_0=0,a_1=1,a_{2i}=a_i,a_{2i+1}=a_i+a_{i+1}$$\n\nAs a math enthusiast, Xiaobai quickly figures out the general term of this sequence. Xiaobai tells Xiaolan that he has solved it, but to prevent Xiaolan from copying, he does not want to reveal the formula. To show off while proving that he indeed solved it, Xiaobai comes up with a clever method: Xiaolan says a positive integer $n$, and Xiaobai tells the value of $a_n$. If Xiaobai can still quickly give the correct answer when $n$ is very large, it proves that he really has the formula. However, this method has a big flaw: Xiaolan cannot solve the problem himself, so he cannot verify whether Xiaobai’s answer is correct. As Xiaolan’s friend, can you help him?", "inputFormat": "The first line of input contains exactly one positive integer $T$, the number of test cases.\n\nThe next $T$ lines each contain an integer $n$.", "outputFormat": "For each test case, output a single integer representing $a_n$ on one line.", "hint": "- For 20% of the testdata, $1 \\le n \\le 10^8$.\n- For 50% of the testdata, $1 \\le n \\le 10^{12}$.\n- For 100% of the testdata, $1 \\le T \\le 20$, $1 \\le n \\le 10^{100}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2012] 数列", "background": "", "description": "小白和小蓝在一起上数学课，下课后老师留了一道作业，求下面这个数列的通项公式：\n\n$$a_0=0,a_1=1,a_{2i}=a_i,a_{2i+1}=a_i+a_{i+1}$$\n\n小白作为一个数学爱好者，很快就计算出了这个数列的通项公式。于是，小白告诉小蓝自己已经做出来了，但为了防止小蓝抄作业，小白并不想把公式公布出来。于是小白为了向小蓝证明自己的确做出来了此题以达到其炫耀的目的，想出了一个绝妙的方法：即让小蓝说一个正整数 $n$，小白则说出 $a_n$ 的值，如果当 $n$ 很大时小白仍能很快的说出正确答案，这就说明小白的确得到了公式。但这个方法有一个很大的漏洞：小蓝自己不会做，没法验证小白的答案是否正确。作为小蓝的好友，你能帮帮小蓝吗？", "inputFormat": "输入文件第一行有且只有一个正整数 $T$，表示测试数据的组数。\n\n接下来 $T$ 行，每行一个整数 $n$。", "outputFormat": "对于每组数据：输出一行一个整数代表 $a_n$。", "hint": "- 对于 $20\\%$ 的数据，$1 \\le n \\le 10^8$。 \n- 对于 $50\\%$ 的数据，$1 \\le n \\le 10^{12}$。\n- 对于 $100\\%$ 的数据，$1 \\le T \\le 20$，$1 \\le n \\le 10^{100}$。", "locale": "zh-CN"}}}
{"pid": "P2610", "type": "P", "difficulty": 4, "samples": [["6\r\n1 2 4\r\n2 3 4\r\n1 4 5\r\n1 5 6", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2012", "各省省选", "浙江", "广度优先搜索 BFS", "树形 DP", "树的直径"], "title": "[ZJOI2012] 旅游", "background": "", "description": "到了难得的暑假，为了庆祝小白在数学考试中取得的优异成绩，小蓝决定带小白出去旅游~~\n\n经过一番抉择，两人决定将 T 国作为他们的目的地。T 国的国土可以用一个凸 $n$ 边形来表示，$n$ 个顶点表示 $n$ 个入境/出境口。T 国包含 $n-2$ 个城市，每个城市都是顶点均为 $n$ 边形顶点的三角形（换而言之，**城市组成了关于 T 国的一个三角剖分**）。**两人的旅游路线可以看做是连接 $n$ 个顶点中不相邻两点的线段**。\n\n![](https://cdn.luogu.com.cn/upload/pic/1409.png) \n\n为了能够买到最好的纪念品，小白希望旅游路线上经过的城市尽量多。作为小蓝的好友，你能帮帮小蓝吗？", "inputFormat": "每个输入文件中仅包含一个测试数据。\n\n第一行包含一个正整数 $n$，$n$ 的含义如题目所述。\n\n接下来有 $n-2$ 行，每行包含三个整数 $p,q,r$，表示该城市三角形的三个顶点的编号（T 国的 $n$ 个顶点按顺时间方向从 $1$ 至 $n$ 编号）。", "outputFormat": "输出文件共包含一行，表示最多经过的城市数目。（**一个城市被当做经过当且仅当其与线路有至少两个公共点**）", "hint": "对于 $20\\%$ 的数据，$n\\le 2000$。\n\n对于 $100\\%$ 的数据，$4\\le n \\le 200000$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2012] Travel", "background": "", "description": "During the rare summer vacation, to celebrate Xiaobai’s excellent performance in the math exam, Xiaolan decides to take Xiaobai on a trip~~\n\nAfter some deliberation, they choose Country T as their destination. The territory of Country T can be represented by a convex $n$-gon, and the $n$ vertices represent $n$ entry/exit ports. Country T contains $n - 2$ cities, each city being a triangle whose vertices are vertices of the $n$-gon (in other words, the cities form a triangulation of Country T). The travel route of the two can be regarded as a line segment connecting two non-adjacent vertices among the $n$ vertices.\n\n![](https://cdn.luogu.com.cn/upload/pic/1409.png)\n\nTo buy the best souvenirs, Xiaobai hopes the route passes through as many cities as possible. As Xiaolan’s friend, can you help?", "inputFormat": "Each input file contains only one test case.\n\nThe first line contains a positive integer $n$, as described above.\n\nThen there are $n - 2$ lines. Each line contains three integers $p, q, r$, indicating the vertex indices of that city’s triangle (the $n$ vertices of Country T are numbered from $1$ to $n$ in clockwise order).", "outputFormat": "Output a single line: the maximum number of cities that can be passed through. (A city is counted as passed if and only if it shares at least two common points with the route.)", "hint": "For $20\\%$ of the testdata, $n \\le 2000$.\n\nFor $100\\%$ of the testdata, $4 \\le n \\le 200000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2012] 旅游", "background": "", "description": "到了难得的暑假，为了庆祝小白在数学考试中取得的优异成绩，小蓝决定带小白出去旅游~~\n\n经过一番抉择，两人决定将 T 国作为他们的目的地。T 国的国土可以用一个凸 $n$ 边形来表示，$n$ 个顶点表示 $n$ 个入境/出境口。T 国包含 $n-2$ 个城市，每个城市都是顶点均为 $n$ 边形顶点的三角形（换而言之，**城市组成了关于 T 国的一个三角剖分**）。**两人的旅游路线可以看做是连接 $n$ 个顶点中不相邻两点的线段**。\n\n![](https://cdn.luogu.com.cn/upload/pic/1409.png) \n\n为了能够买到最好的纪念品，小白希望旅游路线上经过的城市尽量多。作为小蓝的好友，你能帮帮小蓝吗？", "inputFormat": "每个输入文件中仅包含一个测试数据。\n\n第一行包含一个正整数 $n$，$n$ 的含义如题目所述。\n\n接下来有 $n-2$ 行，每行包含三个整数 $p,q,r$，表示该城市三角形的三个顶点的编号（T 国的 $n$ 个顶点按顺时间方向从 $1$ 至 $n$ 编号）。", "outputFormat": "输出文件共包含一行，表示最多经过的城市数目。（**一个城市被当做经过当且仅当其与线路有至少两个公共点**）", "hint": "对于 $20\\%$ 的数据，$n\\le 2000$。\n\n对于 $100\\%$ 的数据，$4\\le n \\le 200000$。", "locale": "zh-CN"}}}
{"pid": "P2611", "type": "P", "difficulty": 6, "samples": [["5 5 4\n1 2\n2 3\n3 5\n4 1\n", "139"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "各省省选", "平衡树", "浙江", "深度优先搜索 DFS", "栈"], "title": "[ZJOI2012] 小蓝的好友", "background": "终于到达了这次选拔赛的最后一题，想必你已经厌倦了小蓝和小白的故事。\n\n为了回馈各位比赛选手，此题的主角是贯穿这次比赛的关键人物——小蓝的好友。\n\n在帮小蓝确定了旅游路线后，小蓝的好友也不会浪费这个难得的暑假。\n\n与小蓝不同，小蓝的好友并不想将时间花在旅游上，而是盯上了最近发行的即时战略游戏——SangoCraft。\n\n但在前往通关之路的道路上，一个小游戏挡住了小蓝的好友的步伐。", "description": "\n“国家的战争其本质是抢夺资源的战争”是整款游戏的核心理念，这个小游戏也不例外。\n\n简单来说，用户需要在一块 $R\\times C$ 的长方形土地上选出一块子矩形。\n\n而系统随机生成了 $N$ 个资源点，第 $i$ 个资源点的坐标为 $(x_i,y_i)$。\n\n位于用户所选的长方形土地上的资源点越多，给予用户的奖励也越多。\n\n悲剧的是，小蓝的好友虽然拥有着极其优秀的能力，但同时也有着极差的 RP，小蓝的好友所选的区域总是没有一个资源点。\n\n终于有一天，小蓝的好友决定投诉这款游戏的制造厂商，为了搜集证据，小蓝的好友想算出至少包含一个资源点的区域的数量。\n\n具体的说，你需要计算有多少个四元组 $(LB,DB,RB,UB)$ 满足 $1\\le LB\\le RB\\le R,1\\le DB\\le UB\\le C$ ，且存在一个 $i$ 使得 $LB\\le x_i\\le RB,DB\\le y_i\\le UB$ 均成立。\n\n作为小蓝的好友，这自然是你分内之事。", "inputFormat": "第一行三个正整数 $R,C,N$。\n\n接下来有 $N$ 行，每行包含两个整数 $x_i,y_i$，表示第 $i$ 个资源点的坐标。", "outputFormat": "一行一个整数，表示至少包含一个资源点的区域的数量。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，$N\\le 50$。\n- 对于 $40\\%$ 的数据，$N\\le 2\\times 10^3$。\n- 对于 $100\\%$ 的数据，$1\\le R,C\\le 4\\times 10^4$，$1\\le N\\le 10^5$，题目保证资源点的位置两两不同，且位置为随机生成。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2012] Xiao Lan's Friend", "background": "At last we have reached the final problem of this selection contest; you are probably already tired of the stories of Xiao Lan and Xiao Bai.\n\nTo thank all contestants, the protagonist of this problem is the key figure throughout this contest—Xiao Lan's friend.\n\nAfter helping Xiao Lan determine the travel route, Xiao Lan's friend is not going to waste this rare summer vacation either.\n\nUnlike Xiao Lan, Xiao Lan's friend does not want to spend time traveling, but instead has set their sights on the newly released real-time strategy game—SangoCraft.\n\nHowever, on the road to beating the game, a mini-game blocked Xiao Lan's friend's way.", "description": "“The essence of war between nations is the struggle to seize resources” is the core concept of the entire game, and this mini-game is no exception.\n\nSimply put, the player needs to choose a sub-rectangle on an $R\\times C$ rectangular land.\n\nThe system randomly generates $N$ resource points; the coordinates of the $i$-th resource point are $(x_i,y_i)$.\n\nThe more resource points lie within the player's chosen rectangular land, the greater the reward.\n\nTragically, although Xiao Lan's friend is exceptionally capable, they also have terrible RP, and the region they choose always contains no resource points.\n\nOne day, Xiao Lan's friend finally decided to complain to the game's developer. To collect evidence, they want to count how many regions contain at least one resource point.\n\nSpecifically, you need to compute how many four-tuples $(LB,DB,RB,UB)$ satisfy $1\\le LB\\le RB\\le R,1\\le DB\\le UB\\le C$, and there exists an $i$ such that $LB\\le x_i\\le RB,DB\\le y_i\\le UB$ are both true.\n\nAs Xiao Lan's friend, this is naturally your duty.", "inputFormat": "The first line contains three positive integers $R,C,N$.\n\nThen there are $N$ lines; each line contains two integers $x_i,y_i$, representing the coordinates of the $i$-th resource point.", "outputFormat": "Output a single integer on one line, the number of regions that contain at least one resource point.", "hint": "- Constraints:\n  - For 20% of the testdata, $N\\le 50$.\n  - For 40% of the testdata, $N\\le 2\\times 10^3$.\n  - For 100% of the testdata, $1\\le R,C\\le 4\\times 10^4$, $1\\le N\\le 10^5$; resource point positions are pairwise distinct and are generated randomly.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2012] 小蓝的好友", "background": "终于到达了这次选拔赛的最后一题，想必你已经厌倦了小蓝和小白的故事。\n\n为了回馈各位比赛选手，此题的主角是贯穿这次比赛的关键人物——小蓝的好友。\n\n在帮小蓝确定了旅游路线后，小蓝的好友也不会浪费这个难得的暑假。\n\n与小蓝不同，小蓝的好友并不想将时间花在旅游上，而是盯上了最近发行的即时战略游戏——SangoCraft。\n\n但在前往通关之路的道路上，一个小游戏挡住了小蓝的好友的步伐。", "description": "\n“国家的战争其本质是抢夺资源的战争”是整款游戏的核心理念，这个小游戏也不例外。\n\n简单来说，用户需要在一块 $R\\times C$ 的长方形土地上选出一块子矩形。\n\n而系统随机生成了 $N$ 个资源点，第 $i$ 个资源点的坐标为 $(x_i,y_i)$。\n\n位于用户所选的长方形土地上的资源点越多，给予用户的奖励也越多。\n\n悲剧的是，小蓝的好友虽然拥有着极其优秀的能力，但同时也有着极差的 RP，小蓝的好友所选的区域总是没有一个资源点。\n\n终于有一天，小蓝的好友决定投诉这款游戏的制造厂商，为了搜集证据，小蓝的好友想算出至少包含一个资源点的区域的数量。\n\n具体的说，你需要计算有多少个四元组 $(LB,DB,RB,UB)$ 满足 $1\\le LB\\le RB\\le R,1\\le DB\\le UB\\le C$ ，且存在一个 $i$ 使得 $LB\\le x_i\\le RB,DB\\le y_i\\le UB$ 均成立。\n\n作为小蓝的好友，这自然是你分内之事。", "inputFormat": "第一行三个正整数 $R,C,N$。\n\n接下来有 $N$ 行，每行包含两个整数 $x_i,y_i$，表示第 $i$ 个资源点的坐标。", "outputFormat": "一行一个整数，表示至少包含一个资源点的区域的数量。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，$N\\le 50$。\n- 对于 $40\\%$ 的数据，$N\\le 2\\times 10^3$。\n- 对于 $100\\%$ 的数据，$1\\le R,C\\le 4\\times 10^4$，$1\\le N\\le 10^5$，题目保证资源点的位置两两不同，且位置为随机生成。", "locale": "zh-CN"}}}
{"pid": "P2612", "type": "P", "difficulty": 7, "samples": [["3 3 3", "0.667"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2012", "各省省选", "浙江", "组合数学"], "title": "[ZJOI2012] 波浪", "background": null, "description": "阿米巴和小强是好朋友。\n\n阿米巴和小强在大海旁边看海水的波涛。小强第一次面对如此汹涌的海潮，他兴奋地叫个不停。而阿米巴则很淡定，他回想起曾经的那些日子，事业的起伏，情感的挫折……总之今天的风浪和曾经经历的那些风雨比起来，简直什么都不算。\n\n于是，这对好朋友不可避免地产生了分歧。为了论证自己的观点，小强建立了一个模型。他海面抽象成一个 $1$ 到 $N$ 的排列 $P_{1\\ldots N}$。定义波动强度等于相邻两项的差的绝对值的和，即：\n\n$$L = | P_2 - P_1 | + | P_3 - P_2 | +\\ldots + | P_N - P_{N-1} |$$\n\n给你一个 $N$ 和 $M$，问：随机一个 $1\\ldots N$ 的排列，它的波动强度不小于 $M$ 的概率有多大？\n\n答案请保留小数点后 $K$ 位输出，四舍五入。", "inputFormat": "第一行包含三个整数 $N, M$ 和 $K$，分别表示排列的长度，波动强度，输出位数。", "outputFormat": "第一行包含一个小数点后 $K$ 位的实数。", "hint": "$N = 3$ 的排列有 $6$ 个：$123, 132, 213, 231, 312, 321$；他们的波动强度分别为 $2, 3, 3, 3, 3, 2$。所以，波动强度不小于 $3$ 的概率是 $\\frac 46$，即 $0.667$。\n\n你也可以通过下面的代码来验证这个概率：\n\n```cpp\nint a[3]={0,1,2},s=0,n=3;\nfor (int i=0;i<1000000;i++){\n  random_shuffle(a,a+n);\n  int t=0;\n  for (int j=0;j<n-1;j++) t+=abs(a[j+1]-a[j]); \n  if (t>=3) s++;\n}\nprintf(\"%.3f\\n\",s/1000000.0);\n```\n### 【数据规模】\n\n对于 $100\\%$ 的数据，$0 \\leq M < 2^{31}$。\n\n**注意：请注意本题不存在一个测试点使得 $N,K$ 均达到最大值。**\n\n| 测试点编号 | $N \\le$ | $K \\leq$|\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $30$ |\n| $4 \\sim 6$ | $100$ | $3$ |\n| $7 \\sim 9$ | $100$ | $8$ |\n| $10$ | $50$ | $30$ |", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2012] Waves", "background": "", "description": "Amoeba and Xiaoqiang are good friends.\n\nThey are watching the waves by the sea. It is Xiaoqiang’s first time facing such surging tides, and he keeps shouting with excitement. Amoeba, however, remains calm, recalling the ups and downs of his career and the setbacks in his relationships... In short, compared with the storms he has experienced, today’s waves are nothing.\n\nThus, a disagreement between the two friends is inevitable. To support his view, Xiaoqiang builds a model. He abstracts the sea surface as a permutation $P_{1 \\ldots N}$ of $1$ to $N$. Define the wave intensity as the sum of the absolute differences between adjacent elements, that is:\n$$L = | P_2 - P_1 | + | P_3 - P_2 | + \\ldots + | P_N - P_{N-1} |.$$\n\nGiven $N$ and $M$, what is the probability that a uniformly random permutation of $1 \\ldots N$ has wave intensity at least $M$?\n\nOutput the answer rounded to $K$ digits after the decimal point.", "inputFormat": "The first line contains three integers $N, M$ and $K$, denoting the length of the permutation, the wave intensity threshold, and the number of digits to output, respectively.", "outputFormat": "Output one real number with exactly $K$ digits after the decimal point.", "hint": "For $N = 3$, there are $6$ permutations: $123, 132, 213, 231, 312, 321$; their wave intensities are $2, 3, 3, 3, 3, 2$. Therefore, the probability that the wave intensity is at least $3$ is $\\frac 46$, i.e., $0.667$.\n\nYou can also verify this probability with the following code:\n\n```cpp\nint a[3]={0,1,2},s=0,n=3;\nfor (int i=0;i<1000000;i++){\nrandom_shuffle(a,a+n);\nint t=0;\nfor (int j=0;j<n-1;j++) t+=abs(a[j+1]-a[j]); \nif (t>=3) s++;\n}\nprintf(\"%.3f\\n\",s/1000000.0);\n```\n\nConstraints\n\nFor $100\\%$ of the testdata, $0 \\leq M \\leq 2147483647$.\n\nPlease note that there is no single test point where both $N$ and $K$ reach their maximum values.\n\n| Test set index | $N \\le$ | $K \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $30$ |\n| $4 \\sim 6$ | $100$ | $3$ |\n| $7 \\sim 9$ | $100$ | $8$ |\n| $10$ | $50$ | $30$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2012] 波浪", "background": null, "description": "阿米巴和小强是好朋友。\n\n阿米巴和小强在大海旁边看海水的波涛。小强第一次面对如此汹涌的海潮，他兴奋地叫个不停。而阿米巴则很淡定，他回想起曾经的那些日子，事业的起伏，情感的挫折……总之今天的风浪和曾经经历的那些风雨比起来，简直什么都不算。\n\n于是，这对好朋友不可避免地产生了分歧。为了论证自己的观点，小强建立了一个模型。他海面抽象成一个 $1$ 到 $N$ 的排列 $P_{1\\ldots N}$。定义波动强度等于相邻两项的差的绝对值的和，即：\n\n$$L = | P_2 - P_1 | + | P_3 - P_2 | +\\ldots + | P_N - P_{N-1} |$$\n\n给你一个 $N$ 和 $M$，问：随机一个 $1\\ldots N$ 的排列，它的波动强度不小于 $M$ 的概率有多大？\n\n答案请保留小数点后 $K$ 位输出，四舍五入。", "inputFormat": "第一行包含三个整数 $N, M$ 和 $K$，分别表示排列的长度，波动强度，输出位数。", "outputFormat": "第一行包含一个小数点后 $K$ 位的实数。", "hint": "$N = 3$ 的排列有 $6$ 个：$123, 132, 213, 231, 312, 321$；他们的波动强度分别为 $2, 3, 3, 3, 3, 2$。所以，波动强度不小于 $3$ 的概率是 $\\frac 46$，即 $0.667$。\n\n你也可以通过下面的代码来验证这个概率：\n\n```cpp\nint a[3]={0,1,2},s=0,n=3;\nfor (int i=0;i<1000000;i++){\n  random_shuffle(a,a+n);\n  int t=0;\n  for (int j=0;j<n-1;j++) t+=abs(a[j+1]-a[j]); \n  if (t>=3) s++;\n}\nprintf(\"%.3f\\n\",s/1000000.0);\n```\n### 【数据规模】\n\n对于 $100\\%$ 的数据，$0 \\leq M < 2^{31}$。\n\n**注意：请注意本题不存在一个测试点使得 $N,K$ 均达到最大值。**\n\n| 测试点编号 | $N \\le$ | $K \\leq$|\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $30$ |\n| $4 \\sim 6$ | $100$ | $3$ |\n| $7 \\sim 9$ | $100$ | $8$ |\n| $10$ | $50$ | $30$ |", "locale": "zh-CN"}}}
{"pid": "P2613", "type": "P", "difficulty": 4, "samples": [["233\n666\n", "18595654\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "扩展欧几里德算法", "模板题"], "title": "【模板】有理数取余", "background": "", "description": "给出一个有理数 $c=\\frac{a}{b}$，求 $c \\bmod 19260817$ 的值。\n\n这个值被定义为 $bx\\equiv a\\pmod{19260817}$ 的解。", "inputFormat": "一共两行。\n\n第一行，一个整数 $a$。  \n第二行，一个整数 $b$。  ", "outputFormat": "一个整数，代表求余后的结果。如果无解，输出 `Angry!`。", "hint": "对于所有数据，保证 $0\\leq a \\leq 10^{10001}$，$1 \\leq b \\leq 10^{10001}$，且 $a, b$ 不同时是 $19260817$ 的倍数。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Rational Number Modulo", "background": "", "description": "Given a rational number $c=\\frac{a}{b}$, compute $c \\bmod 19260817$.\n\nThis value is defined as the solution to $bx\\equiv a\\pmod{19260817}$.", "inputFormat": "There are two lines in total.\n\nThe first line contains an integer $a$.  \nThe second line contains an integer $b$.", "outputFormat": "Output a single integer, representing the result after taking modulo. If there is no solution, output `Angry!`.", "hint": "For all testdata, it is guaranteed that $0\\leq a \\leq 10^{10001}$, $1 \\leq b \\leq 10^{10001}$, and $a, b$ are not both multiples of $19260817$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】有理数取余", "background": "", "description": "给出一个有理数 $c=\\frac{a}{b}$，求 $c \\bmod 19260817$ 的值。\n\n这个值被定义为 $bx\\equiv a\\pmod{19260817}$ 的解。", "inputFormat": "一共两行。\n\n第一行，一个整数 $a$。  \n第二行，一个整数 $b$。  ", "outputFormat": "一个整数，代表求余后的结果。如果无解，输出 `Angry!`。", "hint": "对于所有数据，保证 $0\\leq a \\leq 10^{10001}$，$1 \\leq b \\leq 10^{10001}$，且 $a, b$ 不同时是 $19260817$ 的倍数。", "locale": "zh-CN"}}}
{"pid": "P2614", "type": "P", "difficulty": 2, "samples": [["2 60\n3345 5432 1123 322-\n3345 5432 1123 211-", "32\n"], ["5 120\n3(1.(3))55 8(7.(6))65 655(3.(1)) (4.(4))32- \n3(1.(2))35 8(7.(6))65 655(4.(3)) (2.(3))21- \n2.(3)44 6(6.(6))(5.(4))3 3.(5)88 (9.(8)7.(6))5-\n=.(=)(9.(8))7 9.(8)(7.(6))5  8(856543) (2.(3))43- \n=.(=)(9.(8))7 9.(8)(7.(6))5  8(857654) (3.(4))21- ", "40\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2015", "洛谷原创", "洛谷月赛"], "title": "计算器弹琴", "background": "小 A 发现了一个计算器的另一个隐藏功能——弹琴。\n\n![](bilibili:av2205500)", "description": "在计算器的某个模式里，如果按上一个键，比如说 `1`，就会发出中音 `Do`。\n\n这里给出按键音高表。\n\n```plain\n+ 低音Fa\n< 低音So\n* 低音La\n/ 低音Xi\n1 中音Do\n2 中音Re\n3 中音Mi\n4 中音Fa\n5 中音So\n6 中音La\n7 高音Xi\n8 高音Do\n9 高音Re\n= 高音Mi\n% 高音Fa\nC 高音So\nM 高音La\n```\n现在小 A 搞到了一份乐谱——我们称为计算器谱，一种变形的简谱。\n\n时值（也就是按的时间长度）是这么记录的，例如：\n\n`1` 是四分音符，占 $1$ 拍。\n\n`1-` 是二分音符，占 $2$ 拍。\n\n`1---` 是全音符，占 $4$ 拍。\n\n对于小于四分音符的音符，我们用嵌套括号表示，例如：\n\n`(1(34(56))2)`\n\n`1` 和 `2` 在一层括号中，是八分音符，占 $0.5$ 拍。\n\n`3` 和 `4` 在两层括号中，是 $16$ 分音符，占 $0.25$ 拍。\n\n`5` 和 `6` 在三层括号中，是 $32$ 分音符，占 $\\dfrac{1}{8}$ 拍。\n\n数据中最多只会出现 $32$ 分音符，没有更短的音符了。\n\n括号中不会出现 `-` 这个符号。\n\n在一个音符后面添加一个附点即 `.` 表示这个音符延长1/2倍。\n\n例如，`1-.` 是 $3$ 拍，`1.` 是 $1.5$ 拍，`(3.(45.))` 中 `3` 是 $\\dfrac{3}{4}$ 拍，`4` 是 $\\dfrac{1}{4}$ 拍，`5` 是 $\\dfrac{3}{8}$ 拍。\n\n附点不会连续添加两个或以上。全音符不会有附点。\n\n不考虑其他的乐理符号。\n\n另外，整个乐谱会给出一个整数 $T$，为每分钟的拍数。\n\n为了美观，乐谱可以随便换行、添加空格。输入时可以忽略。\n\n现在小 A 想知道，按完这个谱子，需要多少秒。", "inputFormat": "第一行，两个整数 $n,T$，表示谱子行数以及每分钟的拍数。\n\n接下来 $n$ 行，给出乐谱。", "outputFormat": "一个整数，表示演奏需要花费的时间，单位秒，如果是小数则向下取整到整数。", "hint": "### 样例解释\n\n对于第一组样例，有 $28$ 个四分音符，有 $2$ 个二分音符，总共 $32$ 拍，每分钟 $60$ 拍，则总共需要 $32$ 秒。\n\n### 数据范围\n\n对于 $40\\%$ 的数据，不会出现 `(`、`)`、`.` 字符。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100,\\ 50 \\le T \\le 200$，每行不超过 $100$ 个字符。", "locale": "zh-CN", "translations": {"en": {"title": "Playing Piano on a Calculator", "background": "Xiao A discovered another hidden feature of a calculator — playing piano.\n\n![](bilibili:av2205500)", "description": "In a certain mode of the calculator, pressing a key, for example `1`, will produce the middle pitch `Do`.\n\nHere is the key-to-pitch table.\n\n```plain\n+ 低音Fa\n< 低音So\n* 低音La\n/ 低音Xi\n1 中音Do\n2 中音Re\n3 中音Mi\n4 中音Fa\n5 中音So\n6 中音La\n7 高音Xi\n8 高音Do\n9 高音Re\n= 高音Mi\n% 高音Fa\nC 高音So\nM 高音La\n```\nNow Xiao A has obtained a piece of sheet music — we call it calculator notation, a variant of numbered musical notation (jianpu).\n\nDurations (i.e., how long you press) are recorded as follows, for example:\n\n`1` is a quarter note, taking $1$ beat.\n\n`1-` is a half note, taking $2$ beats.\n\n`1---` is a whole note, taking $4$ beats.\n\nFor notes shorter than a quarter note, we use nested parentheses, for example:\n\n`(1(34(56))2)`\n\n`1` and `2` are inside one layer of parentheses, so they are eighth notes, taking $0.5$ beat.\n\n`3` and `4` are inside two layers of parentheses, so they are sixteenth notes, taking $0.25$ beat.\n\n`5` and `6` are inside three layers of parentheses, so they are thirty-second notes, taking $\\dfrac{1}{8}$ beat.\n\nAt most thirty-second notes will appear in the testdata; there are no shorter notes.\n\nThe symbol `-` will not appear inside parentheses.\n\nAdding a dot `.` after a note means the note is extended by $1/2$ of its original duration.\n\nFor example, `1-.` is $3$ beats, `1.` is $1.5$ beats, and in `(3.(45.))`, `3` is $\\dfrac{3}{4}$ beat, `4` is $\\dfrac{1}{4}$ beat, and `5` is $\\dfrac{3}{8}$ beat.\n\nThere will not be two or more consecutive dots. A whole note will not be dotted.\n\nIgnore other musical symbols.\n\nIn addition, the entire score provides an integer $T$, the number of beats per minute.\n\nFor readability, the score may contain arbitrary line breaks and spaces. They can be ignored when reading the input.\n\nNow Xiao A wants to know how many seconds it takes to finish playing this score.", "inputFormat": "The first line contains two integers $n, T$, the number of lines of the score and the beats per minute.\n\nThe next $n$ lines contain the score.", "outputFormat": "Output a single integer: the total time in seconds needed to perform the score. If the exact time is fractional, round down to an integer.", "hint": "- Sample Explanation\n\nFor the first sample, there are $28$ quarter notes and $2$ half notes, totaling $32$ beats. With $60$ beats per minute, the total time is $32$ seconds.\n\n- Constraints\n\nFor $40\\%$ of the testdata, the characters `(`, `)`, and `.` do not appear.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 100,\\ 50 \\le T \\le 200$, and each line contains at most $100$ characters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "计算器弹琴", "background": "小 A 发现了一个计算器的另一个隐藏功能——弹琴。\n\n![](bilibili:av2205500)", "description": "在计算器的某个模式里，如果按上一个键，比如说 `1`，就会发出中音 `Do`。\n\n这里给出按键音高表。\n\n```plain\n+ 低音Fa\n< 低音So\n* 低音La\n/ 低音Xi\n1 中音Do\n2 中音Re\n3 中音Mi\n4 中音Fa\n5 中音So\n6 中音La\n7 高音Xi\n8 高音Do\n9 高音Re\n= 高音Mi\n% 高音Fa\nC 高音So\nM 高音La\n```\n现在小 A 搞到了一份乐谱——我们称为计算器谱，一种变形的简谱。\n\n时值（也就是按的时间长度）是这么记录的，例如：\n\n`1` 是四分音符，占 $1$ 拍。\n\n`1-` 是二分音符，占 $2$ 拍。\n\n`1---` 是全音符，占 $4$ 拍。\n\n对于小于四分音符的音符，我们用嵌套括号表示，例如：\n\n`(1(34(56))2)`\n\n`1` 和 `2` 在一层括号中，是八分音符，占 $0.5$ 拍。\n\n`3` 和 `4` 在两层括号中，是 $16$ 分音符，占 $0.25$ 拍。\n\n`5` 和 `6` 在三层括号中，是 $32$ 分音符，占 $\\dfrac{1}{8}$ 拍。\n\n数据中最多只会出现 $32$ 分音符，没有更短的音符了。\n\n括号中不会出现 `-` 这个符号。\n\n在一个音符后面添加一个附点即 `.` 表示这个音符延长1/2倍。\n\n例如，`1-.` 是 $3$ 拍，`1.` 是 $1.5$ 拍，`(3.(45.))` 中 `3` 是 $\\dfrac{3}{4}$ 拍，`4` 是 $\\dfrac{1}{4}$ 拍，`5` 是 $\\dfrac{3}{8}$ 拍。\n\n附点不会连续添加两个或以上。全音符不会有附点。\n\n不考虑其他的乐理符号。\n\n另外，整个乐谱会给出一个整数 $T$，为每分钟的拍数。\n\n为了美观，乐谱可以随便换行、添加空格。输入时可以忽略。\n\n现在小 A 想知道，按完这个谱子，需要多少秒。", "inputFormat": "第一行，两个整数 $n,T$，表示谱子行数以及每分钟的拍数。\n\n接下来 $n$ 行，给出乐谱。", "outputFormat": "一个整数，表示演奏需要花费的时间，单位秒，如果是小数则向下取整到整数。", "hint": "### 样例解释\n\n对于第一组样例，有 $28$ 个四分音符，有 $2$ 个二分音符，总共 $32$ 拍，每分钟 $60$ 拍，则总共需要 $32$ 秒。\n\n### 数据范围\n\n对于 $40\\%$ 的数据，不会出现 `(`、`)`、`.` 字符。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100,\\ 50 \\le T \\le 200$，每行不超过 $100$ 个字符。", "locale": "zh-CN"}}}
{"pid": "P2615", "type": "P", "difficulty": 2, "samples": [["3\n", "8 1 6\n3 5 7\n4 9 2"], ["25\n", "327 354 381 408 435 462 489 516 543 570 597 624 1 28 55 82 109 136 163 190 217 244 271 298 325\n353 380 407 434 461 488 515 542 569 596 623 25 27 54 81 108 135 162 189 216 243 270 297 324 326\n379 406 433 460 487 514 541 568 595 622 24 26 53 80 107 134 161 188 215 242 269 296 323 350 352\n405 432 459 486 513 540 567 594 621 23 50 52 79 106 133 160 187 214 241 268 295 322 349 351 378\n431 458 485 512 539 566 593 620 22 49 51 78 105 132 159 186 213 240 267 294 321 348 375 377 404\n457 484 511 538 565 592 619 21 48 75 77 104 131 158 185 212 239 266 293 320 347 374 376 403 430\n483 510 537 564 591 618 20 47 74 76 103 130 157 184 211 238 265 292 319 346 373 400 402 429 456\n509 536 563 590 617 19 46 73 100 102 129 156 183 210 237 264 291 318 345 372 399 401 428 455 482\n535 562 589 616 18 45 72 99 101 128 155 182 209 236 263 290 317 344 371 398 425 427 454 481 508\n561 588 615 17 44 71 98 125 127 154 181 208 235 262 289 316 343 370 397 424 426 453 480 507 534\n587 614 16 43 70 97 124 126 153 180 207 234 261 288 315 342 369 396 423 450 452 479 506 533 560\n613 15 42 69 96 123 150 152 179 206 233 260 287 314 341 368 395 422 449 451 478 505 532 559 586\n14 41 68 95 122 149 151 178 205 232 259 286 313 340 367 394 421 448 475 477 504 531 558 585 612\n40 67 94 121 148 175 177 204 231 258 285 312 339 366 393 420 447 474 476 503 530 557 584 611 13\n66 93 120 147 174 176 203 230 257 284 311 338 365 392 419 446 473 500 502 529 556 583 610 12 39\n92 119 146 173 200 202 229 256 283 310 337 364 391 418 445 472 499 501 528 555 582 609 11 38 65\n118 145 172 199 201 228 255 282 309 336 363 390 417 444 471 498 525 527 554 581 608 10 37 64 91\n144 171 198 225 227 254 281 308 335 362 389 416 443 470 497 524 526 553 580 607 9 36 63 90 117\n170 197 224 226 253 280 307 334 361 388 415 442 469 496 523 550 552 579 606 8 35 62 89 116 143\n196 223 250 252 279 306 333 360 387 414 441 468 495 522 549 551 578 605 7 34 61 88 115 142 169\n222 249 251 278 305 332 359 386 413 440 467 494 521 548 575 577 604 6 33 60 87 114 141 168 195\n248 275 277 304 331 358 385 412 439 466 493 520 547 574 576 603 5 32 59 86 113 140 167 194 221\n274 276 303 330 357 384 411 438 465 492 519 546 573 600 602 4 31 58 85 112 139 166 193 220 247\n300 302 329 356 383 410 437 464 491 518 545 572 599 601 3 30 57 84 111 138 165 192 219 246 273\n301 328 355 382 409 436 463 490 517 544 571 598 625 2 29 56 83 110 137 164 191 218 245 272 299\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2015", "NOIP 提高组", "枚举"], "title": "[NOIP 2015 提高组] 神奇的幻方", "background": "NOIp2015 提高组 Day1T1\n", "description": "幻方是一种很神奇的 $N\\times N$ 矩阵：它由数字 $1,2,3,\\cdots \\cdots ,N \\times N$ 构成，且每行、每列及两条对角线上的数字之和都相同。\n\n当 $N$ 为奇数时，我们可以通过下方法构建一个幻方：\n\n首先将 $1$ 写在第一行的中间。\n\n之后，按如下方式从小到大依次填写每个数 $K \\ (K=2,3,\\cdots,N \\times N)$ ：\n\n1. 若 $(K-1)$ 在第一行但不在最后一列，则将 $K$ 填在最后一行， $(K-1)$ 所在列的右一列；\n2. 若 $(K-1)$ 在最后一列但不在第一行，则将 $K$ 填在第一列， $(K-1)$ 所在行的上一行；\n3. 若 $(K-1)$ 在第一行最后一列，则将 $K$ 填在 $(K-1)$ 的正下方；\n4. 若 $(K-1)$ 既不在第一行，也不在最后一列，如果 $(K-1)$ 的右上方还未填数，则将 $K$ 填在 $(K-1)$ 的右上方，否则将 $K$ 填在 $(K-1)$ 的正下方。\n\n现给定 $N$ ，请按上述方法构造 $N \\times N$ 的幻方。", "inputFormat": "一个正整数 $N$，即幻方的大小。", "outputFormat": "共 $N$ 行，每行 $N$ 个整数，即按上述方法构造出的 $N \\times N$ 的幻方，相邻两个整数之间用单空格隔开。", "hint": "对于 $100\\%$ 的数据，对于全部数据， $1 \\leq N \\leq 39$ 且 $N$ 为奇数。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2015 Senior] The Magical Magic Square", "background": "NOIP 2015 Senior Day 1 T1.", "description": "A magic square is a very special $N \\times N$ matrix: it consists of the numbers $1,2,3,\\cdots,N \\times N$, and the sums of every row, every column, and the two diagonals are all the same.\n\nWhen $N$ is odd, we can construct a magic square by the following method:\n\nFirst, write $1$ in the middle of the first row.\n\nThen fill each number $K$ in increasing order ($K=2,3,\\cdots,N \\times N$) as follows:\n\n1. If $(K-1)$ is in the first row but not in the last column, then place $K$ in the last row, in the column immediately to the right of the column of $(K-1)$.\n2. If $(K-1)$ is in the last column but not in the first row, then place $K$ in the first column, in the row immediately above the row of $(K-1)$.\n3. If $(K-1)$ is in the first row and the last column, then place $K$ directly below $(K-1)$.\n4. If $(K-1)$ is neither in the first row nor in the last column, then if the cell to the upper-right of $(K-1)$ is still empty, place $K$ there; otherwise, place $K$ directly below $(K-1)$.\n\nGiven $N$, construct the $N \\times N$ magic square using the method above.", "inputFormat": "A positive integer $N$, the size of the magic square.", "outputFormat": "Output $N$ lines, each containing $N$ integers. Adjacent integers are separated by a single space. The output is the $N \\times N$ magic square constructed by the method above.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq N \\leq 39$ and $N$ is odd.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2015 提高组] 神奇的幻方", "background": "NOIp2015 提高组 Day1T1\n", "description": "幻方是一种很神奇的 $N\\times N$ 矩阵：它由数字 $1,2,3,\\cdots \\cdots ,N \\times N$ 构成，且每行、每列及两条对角线上的数字之和都相同。\n\n当 $N$ 为奇数时，我们可以通过下方法构建一个幻方：\n\n首先将 $1$ 写在第一行的中间。\n\n之后，按如下方式从小到大依次填写每个数 $K \\ (K=2,3,\\cdots,N \\times N)$ ：\n\n1. 若 $(K-1)$ 在第一行但不在最后一列，则将 $K$ 填在最后一行， $(K-1)$ 所在列的右一列；\n2. 若 $(K-1)$ 在最后一列但不在第一行，则将 $K$ 填在第一列， $(K-1)$ 所在行的上一行；\n3. 若 $(K-1)$ 在第一行最后一列，则将 $K$ 填在 $(K-1)$ 的正下方；\n4. 若 $(K-1)$ 既不在第一行，也不在最后一列，如果 $(K-1)$ 的右上方还未填数，则将 $K$ 填在 $(K-1)$ 的右上方，否则将 $K$ 填在 $(K-1)$ 的正下方。\n\n现给定 $N$ ，请按上述方法构造 $N \\times N$ 的幻方。", "inputFormat": "一个正整数 $N$，即幻方的大小。", "outputFormat": "共 $N$ 行，每行 $N$ 个整数，即按上述方法构造出的 $N \\times N$ 的幻方，相邻两个整数之间用单空格隔开。", "hint": "对于 $100\\%$ 的数据，对于全部数据， $1 \\leq N \\leq 39$ 且 $N$ 为奇数。\n\n", "locale": "zh-CN"}}}
{"pid": "P2616", "type": "P", "difficulty": 2, "samples": [["2 5 3\n3 1 2\n4 1 2\n1 1 1", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2010", "USACO", "排序"], "title": "[USACO10JAN] Buying Feed, II S", "background": null, "description": "FJ 开车来到镇上，他要带 $K$ 吨饲料回家。运送饲料是需要花钱的，如果他的车上有 $X$ 吨饲料，开车 $D$ 公里就需要 $D×X$ 元。FJ 可以从 $N$ 家商店购买饲料，所有商店都在一个坐标轴上，第 $i$ 家店的位置是 $X_i$，饲料的售价为每吨 $C_i$ 元，库存为 $F_i$。\n\n这个镇上有 $N(1 \\le N \\le 100)$ 家商店（编号为 $1 \\sim N$）售卖饲料，所有商店都在一个长度为 $E(1 \\le E \\le 350)$ 的 $X$ 轴上。第 $i$ 个商店位于数轴上 $X_i$ 的位置，最多可以售卖给 FJ $F_i(1 \\le F_i \\le 100)$ 吨饲料，花费为 $C_i(1 \\le C_i \\le 10^6)$ 元每吨。奇妙的是，$X$ 轴上同一个坐标可能不只有一家商店。\n\nFJ 从坐标为 $0$ 的地方出发并且只能向前走，直到到达坐标为 $E$ 的地方，并且需要买到 $K$ 吨饲料。他可以在沿途任意一家商店停下来买饲料。\n\n请你求出 FJ 购买并运输 $K$ 吨饲料的最小花费是多少。", "inputFormat": "- 第一行：三个整数 $K$，$ E $ 和 $ N $，$ 1\\leq K \\leq 100 $，$ 1\\leq E \\leq 350 $，$ 1\\leq N \\leq 100 $；\n- 第二行到第 $ N + 1 $ 行：第 $ i + 1 $ 行有三个整数 $ X_i $，$ F_i $ 和 $ C_i $，$0 < X_i < E $，$1\\leq F_i \\leq 100 $，$1\\leq C_i \\leq 10^6$。", "outputFormat": "一个整数，表示购买并运送饲料的最小花费。", "hint": "在离家较近的两家商店里各购买一吨饲料，则花费路上的钱是 $1+2=3$，花在店里的钱是 $2+2=4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO10JAN] Buying Feed, II S", "background": null, "description": "Farmer John needs to travel to town to pick up $K (1 \\le K \\le 100)$ pounds of feed. Driving D miles with $K$ pounds of feed in his truck costs $D*K$ cents.\n\nThe county feed lot has $N (1 \\le N \\le 100)$ stores (conveniently numbered $1...N$) that sell feed. Each store is located on a segment of the X axis whose length is $E (1 \\le E \\le 350$). Store $i$ is at location $X_i (0 < X_i < E)$ on the number line and can sell FJ as much as $F_i (1 \\le F_i \\le 100)$ pounds of feed at a cost of $C_i (1 \\le C_i \\le 1,000,000)$ cents per pound. Amazingly, a given point on the $X$ axis might have more than one store.\n\nFJ starts at location $0$ on this number line and can drive only in the positive direction, ultimately arriving at location $E$, with at least $K$ pounds of feed. He can stop at any of the feed stores along the way and buy any amount of feed up to the the store's limit.\n\nWhat is the minimum amount FJ has to pay to buy and transport the $K$ pounds of feed? FJ knows there is a solution.", "inputFormat": null, "outputFormat": null, "hint": "Consider a sample where FJ needs two pounds of feed from three stores (locations: $1$, $3$, and $4$) on a number line whose range is $0...5$:\n\n```plain\n0   1   2   3   4   5 \n+---|---+---|---|---+ \n    1       1   1      Available pounds of feed \n    1       2   2      Cents per pound \n```\n\nIt is best for FJ to buy one pound of feed from both the second and third stores. He must pay two cents to buy each pound of feed for a total cost of $4$. When FJ travels from $3$ to $4$ he is moving $1$ unit of length and he has $1$ pound of feed so he must pay $1*1 = 1$ cents.\n\nWhen FJ travels from $4$ to $5$ he is moving one unit and he has $2$ pounds of feed so he must pay $1*2 = 2$ cents.\n\nThe total cost is $4+1+2 = 7$ cents.", "locale": "en"}, "zh-CN": {"title": "[USACO10JAN] Buying Feed, II S", "background": null, "description": "FJ 开车来到镇上，他要带 $K$ 吨饲料回家。运送饲料是需要花钱的，如果他的车上有 $X$ 吨饲料，开车 $D$ 公里就需要 $D×X$ 元。FJ 可以从 $N$ 家商店购买饲料，所有商店都在一个坐标轴上，第 $i$ 家店的位置是 $X_i$，饲料的售价为每吨 $C_i$ 元，库存为 $F_i$。\n\n这个镇上有 $N(1 \\le N \\le 100)$ 家商店（编号为 $1 \\sim N$）售卖饲料，所有商店都在一个长度为 $E(1 \\le E \\le 350)$ 的 $X$ 轴上。第 $i$ 个商店位于数轴上 $X_i$ 的位置，最多可以售卖给 FJ $F_i(1 \\le F_i \\le 100)$ 吨饲料，花费为 $C_i(1 \\le C_i \\le 10^6)$ 元每吨。奇妙的是，$X$ 轴上同一个坐标可能不只有一家商店。\n\nFJ 从坐标为 $0$ 的地方出发并且只能向前走，直到到达坐标为 $E$ 的地方，并且需要买到 $K$ 吨饲料。他可以在沿途任意一家商店停下来买饲料。\n\n请你求出 FJ 购买并运输 $K$ 吨饲料的最小花费是多少。", "inputFormat": "- 第一行：三个整数 $K$，$ E $ 和 $ N $，$ 1\\leq K \\leq 100 $，$ 1\\leq E \\leq 350 $，$ 1\\leq N \\leq 100 $；\n- 第二行到第 $ N + 1 $ 行：第 $ i + 1 $ 行有三个整数 $ X_i $，$ F_i $ 和 $ C_i $，$0 < X_i < E $，$1\\leq F_i \\leq 100 $，$1\\leq C_i \\leq 10^6$。", "outputFormat": "一个整数，表示购买并运送饲料的最小花费。", "hint": "在离家较近的两家商店里各购买一吨饲料，则花费路上的钱是 $1+2=3$，花在店里的钱是 $2+2=4$。", "locale": "zh-CN"}}}
{"pid": "P2617", "type": "P", "difficulty": 6, "samples": [["5 3\n3 2 1 4 7\nQ 1 4 3\nC 2 6\nQ 2 5 3", "3\n6\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["莫队", "线段树", "平衡树", "树状数组", "O2优化", "树套树", "可持久化线段树", "分块", "整体二分"], "title": "Dynamic Rankings", "background": null, "description": "给定一个含有 $n$ 个数的序列 $a_1,a_2 \\dots a_n$，需要支持两种操作：  \n\n- `Q l r k` 表示查询下标在区间 $[l,r]$ 中的第 $k$ 小的数；\n- `C x y` 表示将 $a_x$ 改为 $y$。", "inputFormat": "第一行两个正整数 $n,m$，表示序列长度与操作个数。  \n第二行 $n$ 个整数，表示 $a_1,a_2 \\dots a_n$。  \n接下来 $m$ 行，每行表示一个操作，都为上述两种中的一个。", "outputFormat": "对于每一次询问，输出一行一个整数表示答案。", "hint": "**【数据范围】**  \n\n对于 $10\\%$ 的数据，$1\\le n,m \\le 100$；  \n对于 $20\\%$ 的数据，$1\\le n,m \\le 1000$；  \n对于 $50\\%$ 的数据，$1\\le n,m \\le 10^4$；     \n对于 $100\\%$ 的数据，$1\\le n,m \\le 10^5$，$1 \\le l \\le r \\le n$，$1 \\le k \\le r-l+1$，$1\\le x \\le n$，$0 \\le a_i,y \\le 10^9$。\n\n请注意常数优化，但写法正常的整体二分和树套树都可以以大约 $1000\\text{ms}$ 每个点的时间通过。\n\n来源：bzoj1901。\n\n本题数据为洛谷自造数据，使用 [CYaRon](https://github.com/luogu-dev/cyaron) 耗时 $5$ 分钟完成数据制作。", "locale": "zh-CN", "translations": {"en": {"title": "Dynamic Rankings", "background": "", "description": "Given a sequence of $n$ numbers $a_1,a_2 \\dots a_n$, you need to support two operations:\n- `Q l r k` queries the $k$-th smallest number among indices in the interval $[l,r]$.\n- `C x y` sets $a_x$ to $y$.", "inputFormat": "The first line contains two positive integers $n,m$, the sequence length and the number of operations.\nThe second line contains $n$ integers, representing $a_1,a_2 \\dots a_n$.\nThe next $m$ lines each describe an operation, which is one of the two types above.", "outputFormat": "For each query, output one integer on a separate line representing the answer.", "hint": "Constraints:\n- For $10\\%$ of the testdata, $1 \\le n,m \\le 100$.\n- For $20\\%$ of the testdata, $1 \\le n,m \\le 1000$.\n- For $50\\%$ of the testdata, $1 \\le n,m \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n,m \\le 10^5$, $1 \\le l \\le r \\le n$, $1 \\le k \\le r-l+1$, $1 \\le x \\le n$, $0 \\le a_i,y \\le 10^9$.\n\nPay attention to constant-factor optimizations, but straightforward implementations of overall binary search on values (\"整体二分\") and tree-of-trees (\"树套树\") can both pass in about 1000 ms per test point.\n\nSource: bzoj1901.\n\nThis problem uses custom Luogu testdata, generated with [CYaRon](https://github.com/luogu-dev/cyaron) in $5$ minutes.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Dynamic Rankings", "background": null, "description": "给定一个含有 $n$ 个数的序列 $a_1,a_2 \\dots a_n$，需要支持两种操作：  \n\n- `Q l r k` 表示查询下标在区间 $[l,r]$ 中的第 $k$ 小的数；\n- `C x y` 表示将 $a_x$ 改为 $y$。", "inputFormat": "第一行两个正整数 $n,m$，表示序列长度与操作个数。  \n第二行 $n$ 个整数，表示 $a_1,a_2 \\dots a_n$。  \n接下来 $m$ 行，每行表示一个操作，都为上述两种中的一个。", "outputFormat": "对于每一次询问，输出一行一个整数表示答案。", "hint": "**【数据范围】**  \n\n对于 $10\\%$ 的数据，$1\\le n,m \\le 100$；  \n对于 $20\\%$ 的数据，$1\\le n,m \\le 1000$；  \n对于 $50\\%$ 的数据，$1\\le n,m \\le 10^4$；     \n对于 $100\\%$ 的数据，$1\\le n,m \\le 10^5$，$1 \\le l \\le r \\le n$，$1 \\le k \\le r-l+1$，$1\\le x \\le n$，$0 \\le a_i,y \\le 10^9$。\n\n请注意常数优化，但写法正常的整体二分和树套树都可以以大约 $1000\\text{ms}$ 每个点的时间通过。\n\n来源：bzoj1901。\n\n本题数据为洛谷自造数据，使用 [CYaRon](https://github.com/luogu-dev/cyaron) 耗时 $5$ 分钟完成数据制作。", "locale": "zh-CN"}}}
