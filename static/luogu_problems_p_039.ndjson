{"pid": "P10887", "type": "P", "difficulty": 5, "samples": [["2\n3 100\n3\n\n3\n\n4\n\n2\n\n\n\n\n1 0\n2", "\n\n\n^ 1 2\n\n^ 3 6\n\n^ 6 2\n\n!\n5 1\n6 4\n2 3\n\n\n!\n1 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["交互题", "Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-S3-T3】「FeOI Round 1」再演", "background": "原题链接：<https://oier.team/problems/S3C>。\n\n---\n\n![](bilibili:BV1rx411E7WH)", "description": "**这是一道交互题。**\n\njt 有一个大小为 $n$ 的集合 $S$，集合中每个元素都是一个无序二元整数对 $(x, y)$，保证集合中 $1 \\sim 2n$ 共 $2n$ 个整数每个恰好出现一次。\n\n比如当 $n = 3$ 时，合法的集合 $S$ 可能是 $\\{(1, 5), (2, 3), (4, 6)\\}$。\n\n开始时你只知道 $n$ 而不知道 $S$ 具体是什么。\n\n现在支持一种操作：你可以给出 $i, j$（$1 \\le i, j \\le 2n$），然后 jt 会交换 $i, j$ 在 $S$ 中的位置（如 $i, j$ 在同一个二元组内，或 $i = j$，则什么也不会发生）。\n\n比如，当 $S = \\{(1, 5), (2, 3), (4, 6)\\}$ 时，执行 $i = 2, j = 6$ 后 $S = \\{(1, 5), (6, 3), (4, 2)\\} = \\{(1, 5), (2, 4), (3, 6)\\}$。\n\n在最开始时以及每次操作过后，对于当前的集合 $S$，jt 会告诉你 $res = \\min\\limits_{(x, y) \\in S} \\max(x, y)$。\n\n比如，当 $S = \\{(1, 5), (2, 3), (4, 6)\\}$ 时，$res$ 为 $\\min(\\max(1, 5), \\max(2, 3), \\max(4, 6)) = \\min(5, 3, 6) = 3$。\n\n注意，每次 jt 告诉你 $res$ 之后**不会撤销**你做的操作，即你的操作是持续有效的。\n\n你需要在 $lim$ 次操作内猜出**初始的**集合 $S$，即进行所有交换操作之前的版本。\n\n保证初始的 $S$ 是提前确定的，即**交互库不自适应**。\n\n### 交互方式\n\n**本题单个测试点内包含多组数据。**\n\n首先读入数据组数 $T$。\n\n接下来有 $T$ 组数据，对于每组数据进行以下过程：\n\n输入 $S$ 的大小 $n$ 以及 $lim$ 以开始交互。\n\n每次操作，首先读入 $res$，接下来输出一行 `^ i j` 表示你要执行操作 $i, j$。\n\n在你确定答案后，请先输出一行一个 `!`，然后接下来 $n$ 行每行输出两个整数 `x y` 代表 $S$ 中的一个二元组，然后准备读入下一组数据。你可以以任意顺序输出这些二元组，且二元组内元素顺序可以任意。\n\n每次在你输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。\n\n**当你在单个测试点所有测试数据的总操作次数不超过 $\\boldsymbol{2.5 \\times 10^5}$ 次时**，保证交互库占用时间不超过 $1\\operatorname s$，空间不超过 $128\\operatorname{MB}$，也就是你至少能使用 $1 \\operatorname{s}$ 的时间以及 $384\\operatorname{MB}$ 的空间。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "**【样例解释】**\n\n注意，样例只是描述了一个可能发生的交互过程，**并不一定存在逻辑**（就是说答案可能是乱猜猜对的）。\n\n对于第一组测试数据，$S$ 最开始为 $\\{(1, 5), (2, 3), (4, 6)\\}$，jt 告诉你 $res = 3$。\n\n接下来你交换 $1, 2$，$S$ 变为 $\\{(2, 5), (1, 3), (4, 6)\\}$，jt 告诉你 $res = 3$。\n\n接下来你交换 $3, 6$，$S$ 变为 $\\{(2, 5), (1, 6), (3, 4)\\}$，jt 告诉你 $res = 4$。\n\n接下来你交换 $6, 2$，$S$ 变为 $\\{(5, 6), (1, 2), (3, 4)\\}$，jt 告诉你 $res = 2$。\n\n你输出 $\\{(5, 1), (6, 4), (2, 3)\\}$，用了 $3$ 次操作，不超过 $lim = 100$ 次，回答正确。\n\n对于第二组测试数据，$S$ 初始为 $\\{(1, 2)\\}$，你直接输出 $\\{(1, 2)\\}$，用了 $0$ 次操作，不超过 $lim = 0$ 次，回答正确。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n记 $\\sum n$ 为单个测试点内所有的 $n$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$ 1 \\le n \\le 5 \\times 10^4$，$ \\sum n \\le 10^5$。\n\n| 子任务编号 | $T$ | $n$ | $lim$ | 分数 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $=1$ | $=1$ | $=0$ | $1$ |\n| $i$（$2 \\le i \\le 6$） | $=(2i-1)!!$ | $=i$ | $=10^9$ | $8$ |\n| $7$ | $\\le 5$ | $\\le 100$ | $=5n^2$ | $14$ |\n| $8$ | $\\le 25$| $\\le 10^3$ | $=10n$ | $15$ |\n| $9$ | $\\le 10^5$ | $\\le 5 \\times 10^4$ | $=\\max(0, 2n - 3)$ | $30$ |\n\n$!!$ 代表[双阶乘](https://baike.baidu.com/item/%E5%8F%8C%E9%98%B6%E4%B9%98/9500461)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S3-T3】「FeOI Round 1」再演", "background": "原题链接：<https://oier.team/problems/S3C>。\n\n---\n\n![](bilibili:BV1rx411E7WH)", "description": "**这是一道交互题。**\n\njt 有一个大小为 $n$ 的集合 $S$，集合中每个元素都是一个无序二元整数对 $(x, y)$，保证集合中 $1 \\sim 2n$ 共 $2n$ 个整数每个恰好出现一次。\n\n比如当 $n = 3$ 时，合法的集合 $S$ 可能是 $\\{(1, 5), (2, 3), (4, 6)\\}$。\n\n开始时你只知道 $n$ 而不知道 $S$ 具体是什么。\n\n现在支持一种操作：你可以给出 $i, j$（$1 \\le i, j \\le 2n$），然后 jt 会交换 $i, j$ 在 $S$ 中的位置（如 $i, j$ 在同一个二元组内，或 $i = j$，则什么也不会发生）。\n\n比如，当 $S = \\{(1, 5), (2, 3), (4, 6)\\}$ 时，执行 $i = 2, j = 6$ 后 $S = \\{(1, 5), (6, 3), (4, 2)\\} = \\{(1, 5), (2, 4), (3, 6)\\}$。\n\n在最开始时以及每次操作过后，对于当前的集合 $S$，jt 会告诉你 $res = \\min\\limits_{(x, y) \\in S} \\max(x, y)$。\n\n比如，当 $S = \\{(1, 5), (2, 3), (4, 6)\\}$ 时，$res$ 为 $\\min(\\max(1, 5), \\max(2, 3), \\max(4, 6)) = \\min(5, 3, 6) = 3$。\n\n注意，每次 jt 告诉你 $res$ 之后**不会撤销**你做的操作，即你的操作是持续有效的。\n\n你需要在 $lim$ 次操作内猜出**初始的**集合 $S$，即进行所有交换操作之前的版本。\n\n保证初始的 $S$ 是提前确定的，即**交互库不自适应**。\n\n### 交互方式\n\n**本题单个测试点内包含多组数据。**\n\n首先读入数据组数 $T$。\n\n接下来有 $T$ 组数据，对于每组数据进行以下过程：\n\n输入 $S$ 的大小 $n$ 以及 $lim$ 以开始交互。\n\n每次操作，首先读入 $res$，接下来输出一行 `^ i j` 表示你要执行操作 $i, j$。\n\n在你确定答案后，请先输出一行一个 `!`，然后接下来 $n$ 行每行输出两个整数 `x y` 代表 $S$ 中的一个二元组，然后准备读入下一组数据。你可以以任意顺序输出这些二元组，且二元组内元素顺序可以任意。\n\n每次在你输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。\n\n**当你在单个测试点所有测试数据的总操作次数不超过 $\\boldsymbol{2.5 \\times 10^5}$ 次时**，保证交互库占用时间不超过 $1\\operatorname s$，空间不超过 $128\\operatorname{MB}$，也就是你至少能使用 $1 \\operatorname{s}$ 的时间以及 $384\\operatorname{MB}$ 的空间。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "**【样例解释】**\n\n注意，样例只是描述了一个可能发生的交互过程，**并不一定存在逻辑**（就是说答案可能是乱猜猜对的）。\n\n对于第一组测试数据，$S$ 最开始为 $\\{(1, 5), (2, 3), (4, 6)\\}$，jt 告诉你 $res = 3$。\n\n接下来你交换 $1, 2$，$S$ 变为 $\\{(2, 5), (1, 3), (4, 6)\\}$，jt 告诉你 $res = 3$。\n\n接下来你交换 $3, 6$，$S$ 变为 $\\{(2, 5), (1, 6), (3, 4)\\}$，jt 告诉你 $res = 4$。\n\n接下来你交换 $6, 2$，$S$ 变为 $\\{(5, 6), (1, 2), (3, 4)\\}$，jt 告诉你 $res = 2$。\n\n你输出 $\\{(5, 1), (6, 4), (2, 3)\\}$，用了 $3$ 次操作，不超过 $lim = 100$ 次，回答正确。\n\n对于第二组测试数据，$S$ 初始为 $\\{(1, 2)\\}$，你直接输出 $\\{(1, 2)\\}$，用了 $0$ 次操作，不超过 $lim = 0$ 次，回答正确。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n记 $\\sum n$ 为单个测试点内所有的 $n$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$ 1 \\le n \\le 5 \\times 10^4$，$ \\sum n \\le 10^5$。\n\n| 子任务编号 | $T$ | $n$ | $lim$ | 分数 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $=1$ | $=1$ | $=0$ | $1$ |\n| $i$（$2 \\le i \\le 6$） | $=(2i-1)!!$ | $=i$ | $=10^9$ | $8$ |\n| $7$ | $\\le 5$ | $\\le 100$ | $=5n^2$ | $14$ |\n| $8$ | $\\le 25$| $\\le 10^3$ | $=10n$ | $15$ |\n| $9$ | $\\le 10^5$ | $\\le 5 \\times 10^4$ | $=\\max(0, 2n - 3)$ | $30$ |\n\n$!!$ 代表[双阶乘](https://baike.baidu.com/item/%E5%8F%8C%E9%98%B6%E4%B9%98/9500461)。", "locale": "zh-CN"}}}
{"pid": "P10888", "type": "P", "difficulty": 6, "samples": [["4\n4 4\n4 2 4 3\n1 3 1 2\n1 2 4 2\n4 2 4 3\n10 2\n1 2\n4 0\n3 1\n2 4\n0 5\n2 3\n3 2\n1 1\n2 2\n4 4\n4 4\n0 0 0 0\n0 0 0 0\n1 0 1 0\n0 0 0 0\n2 10\n92603107 17358677 20869254 22085089 68529385 51524980 47064864 17692636 31121387 37022044\n25517267 69562538 61254114 54886162 15087981 27505611 76082026 59892091 54661294 59475460", "748683265\n249561089\n748683265\n499122177\n399297742\n399297742\n0\n0\n0\n0\n892513752\n105730602\n366911811\n374997189\n954012663\n897963459\n891479524\n220357565\n706471693\n519276178\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["梦熊比赛"], "title": "【MX-S3-T4】「FeOI Round 1」醒餞の鳥 (feat. Feryquitous)", "background": "原题链接：<https://oier.team/problems/S3D>。\n\n---\n\n![](bilibili:BV16h411Y7YB)", "description": "有 $n$ 个学生（编号为 $1 \\sim n$）参加了一场有 $m$ 门学科（编号为 $1 \\sim m$）的考试，现在你知道，学生 $i$ 的第 $j$ 门学科考试的成绩为 $a_{i, j}$。\n\n现在你想要给这些学生排名。由于成绩不形成偏序关系的两个学生实力难以比较，所以你打算设置 $m$ 个实数 $p_{1 \\sim m}$（要求满足 $\\sum_{i = 1}^m p_i = 1$，且 $p_i \\ge 0$）作为权值。定义学生 $i$ 的加权总分为 $\\sum_{j = 1}^m a_{i, j} \\times p_j$，则按照加权总分降序排名，加权总分相等的则排名并列。\n\n现在这 $m$ 个学科的老师都向你提出了要求，第 $k$ 个学科的老师想让你所设置的 $p$ 满足：\n\n- 以这个 $p$ 得到的排名结果中，不存在一对学生 $(x, y)$（$x \\ne y$），使得 $x$ 排名更靠前（并列不算），但是 $a_{x, k} < a_{y, k}$；\n\n因为你想要尽量自由的分配权值，所以你需要对于每个 $k$（$1 \\le k \\le m$），都**分别**求出：\n\n- $p_k$ 至少要为多少，才能保证**无论如何分配其他 $\\boldsymbol{p_i}$ 的权值，都能满足**第 $k$ 个学科的老师的要求？请输出答案对 $998244353$ 取模的结果。", "inputFormat": "**本题单个测试点内包含多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n接下来，对于每组数据，格式如下：\n\n第一行两个整数，分别为 $n, m$。\n\n第二行到第 $n + 1$ 行每行 $m$ 个整数，第 $i + 1$ 行第 $j$ 列的整数表示 $a_{i, j}$。", "outputFormat": "对于每组测试数据，输出 $m$ 行，每行一个非负整数，第 $i$ 行表示 $k = i$ 时，$p_k$ 的最小值对 $998244353$ 取模的结果。\n\n即设答案化为最简分式后的形式为 $\\frac{a}\n{b}$，其中 $a$ 和 $b$ 互质。输出整数 $x$ 使得 $bx \\equiv a \\pmod{998244353}$ 且 $0 \\le x < 998244353$。可以证明这样的整数 $x$ 是唯一的。", "hint": "**【样例解释】**\n\n对于第一组数据，询问的答案取模之前分别为 $\\frac{1}{4}, \\frac{3}{4}, \\frac{1}{4}, \\frac{1}{2}$。\n\n对于第二组数据，询问的答案取模之前分别为 $\\frac{4}{5}, \\frac{4}{5}$。\n\n对于第三组数据，询问的答案取模之前分别为 $0, 0, 0, 0$。\n\n对于第一组数据的 $k = 2$ 的询问，假设 $p = [0.1, 0.75, 0.1, 0.05]$：\n\n- 第 $1$ 个学生的加权总分是 $4 \\times 0.1 + 2 \\times 0.75 + 4 \\times 0.1 + 3 \\times 0.05 = 2.45$；\n- 第 $2$ 个学生的加权总分是 $1 \\times 0.1 + 3 \\times 0.75 + 1 \\times 0.1 + 2 \\times 0.05 = 2.55$；\n- 第 $3$ 个学生的加权总分是 $1 \\times 0.1 + 2 \\times 0.75 + 4 \\times 0.1 + 2 \\times 0.05 = 2.1$；\n- 第 $4$ 个学生的加权总分是 $4 \\times 0.1 + 2 \\times 0.75 + 4 \\times 0.1 + 3 \\times 0.05 = 2.45$；\n\n则你令按加权总分降序排名的学生编号为 $[2, 4, 1, 3]$（当然也可以令其为 $[2, 1, 4, 3]$），且 $a_{2, 2} = 3, a_{4, 2} = 2, a_{1, 2} = 2, a_{3, 2} = 2$，不存在排名更靠后但是第 $2$ 个学科成绩更高的情况。\n\n可以证明，在 $p_2 \\ge 0.75$ 的情况下，无论其他 $p_i$ 如何分布，都可以满足要求；而 $p_2 < 0.75$ 的情况下，一定存在一种其他 $p_i$ 的分布使得无法满足要求。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n设 $\\sum nm$ 为单个测试点内所有的 $nm$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 5 \\times 10^4$，$ 2 \\le n, m \\le 10^5$，$ \\sum nm \\le 2 \\times 10^5$，$ 0 \\le a_{i, j} \\leq 10^8$。\n\n| 子任务编号 | $n$ | $m$ | $\\sum nm$ | 特殊性质 | 分数 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $\\leq 10$ | $\\leq 10$ | $\\leq 100$ | 无 | $5$ |\n| $2$ | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ | 无 | $10$ |\n| $3$ | $\\leq 5 \\times 10^3$ | $\\leq 5 \\times 10^3$ | $\\leq 10^4$ | 无 | $15$ |\n| $4$ | $\\leq 100$ | $\\le 10^5$ | $\\le 2 \\times 10^5$ | 无 | $20$ |\n| $5$ | $\\le 10^5$ | $\\leq 100$ | $\\le 2 \\times 10^5$ | 无 | $10$ |\n| $6$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 2 \\times 10^5$ | $a_{i, j} \\in \\{0, 1\\}$ | $20$ |\n| $7$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 2 \\times 10^5$ | 无 | $20$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S3-T4】「FeOI Round 1」醒餞の鳥 (feat. Feryquitous)", "background": "原题链接：<https://oier.team/problems/S3D>。\n\n---\n\n![](bilibili:BV16h411Y7YB)", "description": "有 $n$ 个学生（编号为 $1 \\sim n$）参加了一场有 $m$ 门学科（编号为 $1 \\sim m$）的考试，现在你知道，学生 $i$ 的第 $j$ 门学科考试的成绩为 $a_{i, j}$。\n\n现在你想要给这些学生排名。由于成绩不形成偏序关系的两个学生实力难以比较，所以你打算设置 $m$ 个实数 $p_{1 \\sim m}$（要求满足 $\\sum_{i = 1}^m p_i = 1$，且 $p_i \\ge 0$）作为权值。定义学生 $i$ 的加权总分为 $\\sum_{j = 1}^m a_{i, j} \\times p_j$，则按照加权总分降序排名，加权总分相等的则排名并列。\n\n现在这 $m$ 个学科的老师都向你提出了要求，第 $k$ 个学科的老师想让你所设置的 $p$ 满足：\n\n- 以这个 $p$ 得到的排名结果中，不存在一对学生 $(x, y)$（$x \\ne y$），使得 $x$ 排名更靠前（并列不算），但是 $a_{x, k} < a_{y, k}$；\n\n因为你想要尽量自由的分配权值，所以你需要对于每个 $k$（$1 \\le k \\le m$），都**分别**求出：\n\n- $p_k$ 至少要为多少，才能保证**无论如何分配其他 $\\boldsymbol{p_i}$ 的权值，都能满足**第 $k$ 个学科的老师的要求？请输出答案对 $998244353$ 取模的结果。", "inputFormat": "**本题单个测试点内包含多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n接下来，对于每组数据，格式如下：\n\n第一行两个整数，分别为 $n, m$。\n\n第二行到第 $n + 1$ 行每行 $m$ 个整数，第 $i + 1$ 行第 $j$ 列的整数表示 $a_{i, j}$。", "outputFormat": "对于每组测试数据，输出 $m$ 行，每行一个非负整数，第 $i$ 行表示 $k = i$ 时，$p_k$ 的最小值对 $998244353$ 取模的结果。\n\n即设答案化为最简分式后的形式为 $\\frac{a}\n{b}$，其中 $a$ 和 $b$ 互质。输出整数 $x$ 使得 $bx \\equiv a \\pmod{998244353}$ 且 $0 \\le x < 998244353$。可以证明这样的整数 $x$ 是唯一的。", "hint": "**【样例解释】**\n\n对于第一组数据，询问的答案取模之前分别为 $\\frac{1}{4}, \\frac{3}{4}, \\frac{1}{4}, \\frac{1}{2}$。\n\n对于第二组数据，询问的答案取模之前分别为 $\\frac{4}{5}, \\frac{4}{5}$。\n\n对于第三组数据，询问的答案取模之前分别为 $0, 0, 0, 0$。\n\n对于第一组数据的 $k = 2$ 的询问，假设 $p = [0.1, 0.75, 0.1, 0.05]$：\n\n- 第 $1$ 个学生的加权总分是 $4 \\times 0.1 + 2 \\times 0.75 + 4 \\times 0.1 + 3 \\times 0.05 = 2.45$；\n- 第 $2$ 个学生的加权总分是 $1 \\times 0.1 + 3 \\times 0.75 + 1 \\times 0.1 + 2 \\times 0.05 = 2.55$；\n- 第 $3$ 个学生的加权总分是 $1 \\times 0.1 + 2 \\times 0.75 + 4 \\times 0.1 + 2 \\times 0.05 = 2.1$；\n- 第 $4$ 个学生的加权总分是 $4 \\times 0.1 + 2 \\times 0.75 + 4 \\times 0.1 + 3 \\times 0.05 = 2.45$；\n\n则你令按加权总分降序排名的学生编号为 $[2, 4, 1, 3]$（当然也可以令其为 $[2, 1, 4, 3]$），且 $a_{2, 2} = 3, a_{4, 2} = 2, a_{1, 2} = 2, a_{3, 2} = 2$，不存在排名更靠后但是第 $2$ 个学科成绩更高的情况。\n\n可以证明，在 $p_2 \\ge 0.75$ 的情况下，无论其他 $p_i$ 如何分布，都可以满足要求；而 $p_2 < 0.75$ 的情况下，一定存在一种其他 $p_i$ 的分布使得无法满足要求。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n设 $\\sum nm$ 为单个测试点内所有的 $nm$ 之和。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 5 \\times 10^4$，$ 2 \\le n, m \\le 10^5$，$ \\sum nm \\le 2 \\times 10^5$，$ 0 \\le a_{i, j} \\leq 10^8$。\n\n| 子任务编号 | $n$ | $m$ | $\\sum nm$ | 特殊性质 | 分数 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $\\leq 10$ | $\\leq 10$ | $\\leq 100$ | 无 | $5$ |\n| $2$ | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ | 无 | $10$ |\n| $3$ | $\\leq 5 \\times 10^3$ | $\\leq 5 \\times 10^3$ | $\\leq 10^4$ | 无 | $15$ |\n| $4$ | $\\leq 100$ | $\\le 10^5$ | $\\le 2 \\times 10^5$ | 无 | $20$ |\n| $5$ | $\\le 10^5$ | $\\leq 100$ | $\\le 2 \\times 10^5$ | 无 | $10$ |\n| $6$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 2 \\times 10^5$ | $a_{i, j} \\in \\{0, 1\\}$ | $20$ |\n| $7$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 2 \\times 10^5$ | 无 | $20$ |\n", "locale": "zh-CN"}}}
{"pid": "P10889", "type": "P", "difficulty": 6, "samples": [["4 2\n1 1\n1 2 3 4", "6"], ["10 5\n1 3\n1 1 4 5 1 4 1 9 19 81", "124"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 10240, 10240, 10240, 10240, 10240, 10240, 10240, 10240, 10240, 10240, 10240, 10240, 10240]}, "tags": ["网络流", "O2优化", "费用流", "线性规划"], "title": "【烂题杯 Round 1】糖果色的梦", "background": "", "description": "小 A 做了一个糖果色的梦，于是他打算买一些糖果送给他的 $n$ 个小朋友。\n\n小 A 可以零售地购买糖果，也可以批发地购买糖果，他还可以批发地回收糖果。\n\n- 零售地购买糖果：每次小 A 可以给一个小朋友购买一个糖果，这将会花费 $1$ 元；\n\n- 批发地购买糖果：每次小 A 可以给连续且不少于 $k$ 个小朋友分别购买一个糖果，设小朋友的个数为 $l$，这将会花费 $l-B$ 元；\n\n- 批发地回收糖果：每次小 A 可以给连续且不少于 $k$ 个小朋友分别收回一个糖果，这将会获得 $C$ 元；\n\n第 $i$ 个小朋友都希望自己得到不少于 $a_i$ 个糖果。求小 A 满足所有小朋友的希望的最小代价。", "inputFormat": "第一行输入两个正整数 $n$、$k$，表示小朋友数量、批发最少需要的小朋友数量。\n\n接下来输入两个整数 $B$、$C$。\n\n接下来一行 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，表示每个小朋友希望的糖果个数。", "outputFormat": "输出一行一个整数，表示最小代价。", "hint": "**样例 1 解释：**\n\n我们给 $[1,2]$ 小朋友批发分别购买 $1$ 个糖果，代价为 $1$；给 $[3,4]$ 小朋友批发分别购买 $3$ 个糖果，代价为 $3$；给 $2$ 小朋友单独购买糖果，代价为 $1$；给 $4$ 小朋友单独购买糖果，代价为 $1$。总共代价为 $6$。\n\n**数据范围：**\n\n对于 $20\\%$ 数据，满足 $1\\le k\\le n\\le 10$。\n\n对于 $40\\%$ 数据，满足内存限制至少为 512 MB。\n\n对于 $100\\%$ 数据，满足 $1\\le k\\le n\\le 1000$，$0\\le B\\le k$，$0\\le C\\le k-B$，$0\\le a_i\\le 10^9$。满足内存限制至少为 10 MB。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【烂题杯 Round 1】糖果色的梦", "background": "", "description": "小 A 做了一个糖果色的梦，于是他打算买一些糖果送给他的 $n$ 个小朋友。\n\n小 A 可以零售地购买糖果，也可以批发地购买糖果，他还可以批发地回收糖果。\n\n- 零售地购买糖果：每次小 A 可以给一个小朋友购买一个糖果，这将会花费 $1$ 元；\n\n- 批发地购买糖果：每次小 A 可以给连续且不少于 $k$ 个小朋友分别购买一个糖果，设小朋友的个数为 $l$，这将会花费 $l-B$ 元；\n\n- 批发地回收糖果：每次小 A 可以给连续且不少于 $k$ 个小朋友分别收回一个糖果，这将会获得 $C$ 元；\n\n第 $i$ 个小朋友都希望自己得到不少于 $a_i$ 个糖果。求小 A 满足所有小朋友的希望的最小代价。", "inputFormat": "第一行输入两个正整数 $n$、$k$，表示小朋友数量、批发最少需要的小朋友数量。\n\n接下来输入两个整数 $B$、$C$。\n\n接下来一行 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，表示每个小朋友希望的糖果个数。", "outputFormat": "输出一行一个整数，表示最小代价。", "hint": "**样例 1 解释：**\n\n我们给 $[1,2]$ 小朋友批发分别购买 $1$ 个糖果，代价为 $1$；给 $[3,4]$ 小朋友批发分别购买 $3$ 个糖果，代价为 $3$；给 $2$ 小朋友单独购买糖果，代价为 $1$；给 $4$ 小朋友单独购买糖果，代价为 $1$。总共代价为 $6$。\n\n**数据范围：**\n\n对于 $20\\%$ 数据，满足 $1\\le k\\le n\\le 10$。\n\n对于 $40\\%$ 数据，满足内存限制至少为 512 MB。\n\n对于 $100\\%$ 数据，满足 $1\\le k\\le n\\le 1000$，$0\\le B\\le k$，$0\\le C\\le k-B$，$0\\le a_i\\le 10^9$。满足内存限制至少为 10 MB。", "locale": "zh-CN"}}}
{"pid": "P10890", "type": "P", "difficulty": 7, "samples": [["2 2 3\n1 2 3 4 5 6\n7 8 9 10 11 12\n5\n0 1 13\n0 2 14\n1 2 15\n1 3 16\n2 3 17", "2\n2\n0\n0\n2\n0"], ["10 1 2\n568508003 500481779\n296073373 42467215\n878878423 182698953\n810051825 300278778\n506619835 300576052\n878109763 816209514\n722729481 557555287\n810227870 524124026\n693592304 92818139\n971977946 139368888\n3\n0 1 524124026\n0 1 500481779\n0 2 816209514", "1\n6\n6\n2"]], "limits": {"time": [3000], "memory": [524288]}, "tags": ["多项式", "O2优化", "容斥原理", "快速沃尔什变换 FWT", "单位根反演"], "title": "【烂题杯 Round 1】可持久化糖果树", "background": "", "description": "小 A 有一棵糖果树，树上有 $n$ 个节点，编号为 $1,2,\\cdots,n$。每个节点里有 $m$ 位小朋友，编号为 $1,2,\\cdots,m$。每个小朋友可以进行 $k$ 次祈愿，编号为 $1,2,\\cdots,k$。节点 $i$ 中的第 $j$ 位小朋友的第 $x$ 次祈愿可以获得 $a_{i,j,x}$ 个糖果。我们称未被修改的糖果树为第 $0$ 个版本树。\n\n一个小朋友被称为开心的，当且仅当她经过 $k$ 轮祈愿后可以获得的糖果数量可以被 $3$ 整除，这样就可以把糖果平均地分给她和她的父母。也就是说，第 $i$ 个节点的第 $j$ 个小朋友是开心的当且仅当 $\\sum_{x=1}^k a_{i,j,x}\\bmod 3=0$。\n\n一个节点被称为是快乐的，当且仅当上面的 $m$ 位小朋友都是开心的。\n\n小 A 可以施加魔法：他将会有 $q$ 次修改，下标从 $1$ 开始的第 $i$ 次修改可以描述为 $(x,y,z)$，表示将第 $x$ 个版本树上所有节点中的所有小朋友的第 $y$ 次祈愿获得的糖果数量乘上 $z$，得到第 $i$ 个版本树。要求你求出每个版本树中有多少个点是快乐的。", "inputFormat": "第一行有 $3$ 个整数 $n$、$m$、$k$，分别表示节点个数、每个节点上的小朋友个数、每个小朋友的祈愿次数。\n\n接下来读入 $n$ 行，每行 $m\\times k$ 个整数，表示 $a_{i,j,x}$，从 $1$ 开始标号。\n\n接下来一行一个正整数 $q$，表示修改次数。\n\n接下来读入 $q$ 行，第 $i$ 行三个正整数 $x,y,z$，表示将第 $x$ 个版本树上所有节点中的所有小朋友的第 $y$ 次祈愿获得的糖果数量乘上 $z$，得到第 $i$ 个版本树，从 $1$ 开始标号。", "outputFormat": "输出 $q+1$ 行，每行一个正整数，第 $i$ 行表示第 $i-1$ 个版本树中快乐的节点数。", "hint": "**数据范围：**\n\n对于 $0\\%$ 的数据，满足 $n\\le 10^3$，$q\\le 10^3$。\n\n对于 $0\\%$ 的数据，满足 $n\\le 10^3$，$q\\le 10^6$。\n\n对于另外 $0\\%$ 的数据，满足 $m=1$。\n\n对于另外 $0\\%$ 的数据，满足 $k=1$。\n\n对于另外 $0\\%$ 的数据，满足 $q=0$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le m\\le 4$，$1\\le k\\le 12$，$0\\le q\\le 10^6$，$0\\le a_{i,j,x}\\le 10^9$。对于第 $i$ 次修改，$0\\le x<i$，$1\\le y\\le k$，$0\\le z\\le 10^9$。\n\n输入输出量较大，需要快速输入输出算法。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【烂题杯 Round 1】可持久化糖果树", "background": "", "description": "小 A 有一棵糖果树，树上有 $n$ 个节点，编号为 $1,2,\\cdots,n$。每个节点里有 $m$ 位小朋友，编号为 $1,2,\\cdots,m$。每个小朋友可以进行 $k$ 次祈愿，编号为 $1,2,\\cdots,k$。节点 $i$ 中的第 $j$ 位小朋友的第 $x$ 次祈愿可以获得 $a_{i,j,x}$ 个糖果。我们称未被修改的糖果树为第 $0$ 个版本树。\n\n一个小朋友被称为开心的，当且仅当她经过 $k$ 轮祈愿后可以获得的糖果数量可以被 $3$ 整除，这样就可以把糖果平均地分给她和她的父母。也就是说，第 $i$ 个节点的第 $j$ 个小朋友是开心的当且仅当 $\\sum_{x=1}^k a_{i,j,x}\\bmod 3=0$。\n\n一个节点被称为是快乐的，当且仅当上面的 $m$ 位小朋友都是开心的。\n\n小 A 可以施加魔法：他将会有 $q$ 次修改，下标从 $1$ 开始的第 $i$ 次修改可以描述为 $(x,y,z)$，表示将第 $x$ 个版本树上所有节点中的所有小朋友的第 $y$ 次祈愿获得的糖果数量乘上 $z$，得到第 $i$ 个版本树。要求你求出每个版本树中有多少个点是快乐的。", "inputFormat": "第一行有 $3$ 个整数 $n$、$m$、$k$，分别表示节点个数、每个节点上的小朋友个数、每个小朋友的祈愿次数。\n\n接下来读入 $n$ 行，每行 $m\\times k$ 个整数，表示 $a_{i,j,x}$，从 $1$ 开始标号。\n\n接下来一行一个正整数 $q$，表示修改次数。\n\n接下来读入 $q$ 行，第 $i$ 行三个正整数 $x,y,z$，表示将第 $x$ 个版本树上所有节点中的所有小朋友的第 $y$ 次祈愿获得的糖果数量乘上 $z$，得到第 $i$ 个版本树，从 $1$ 开始标号。", "outputFormat": "输出 $q+1$ 行，每行一个正整数，第 $i$ 行表示第 $i-1$ 个版本树中快乐的节点数。", "hint": "**数据范围：**\n\n对于 $0\\%$ 的数据，满足 $n\\le 10^3$，$q\\le 10^3$。\n\n对于 $0\\%$ 的数据，满足 $n\\le 10^3$，$q\\le 10^6$。\n\n对于另外 $0\\%$ 的数据，满足 $m=1$。\n\n对于另外 $0\\%$ 的数据，满足 $k=1$。\n\n对于另外 $0\\%$ 的数据，满足 $q=0$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le m\\le 4$，$1\\le k\\le 12$，$0\\le q\\le 10^6$，$0\\le a_{i,j,x}\\le 10^9$。对于第 $i$ 次修改，$0\\le x<i$，$1\\le y\\le k$，$0\\le z\\le 10^9$。\n\n输入输出量较大，需要快速输入输出算法。", "locale": "zh-CN"}}}
{"pid": "P10891", "type": "P", "difficulty": 6, "samples": [["5 3\n4\n5", "998244304"], ["10 114514\n191981\n3", "998244191"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "容斥原理", "单调栈"], "title": "【烂题杯 Round 1】消灭劳嗝", "background": "", "description": "你需要消灭劳嗝。\n\n给定一个长度为 $n$ 的排列 $A=a_1,a_2,\\cdots,a_n$，定义 $S_i=\\{x|x\\ge i\\land \\max_{i\\le k\\le x}a_k\\le a_x\\}$，您可以把它理解为以 $i$ 开头的后缀的前缀最大值的下标集合。例如对于 $A=\\{3,5,2,1,4\\}$，$S_1=\\{1,2\\}$，$S_3=\\{3,5\\}$。\n\n有 $q$ 次询问，每次询问给出 $l,r$，求：\n\n$$\n\\left(\\left(\\sum_{l\\le x\\le y\\le r} |S_x\\cup S_y|-\\sum_{\\substack{{1\\le x<l}\\\\{r<y\\le n}}} |S_x\\cup S_y|\\right)\\bmod P+P\\right)\\bmod P\n$$\n\n其中，$P=998244353$。", "inputFormat": "由于输入文件过大无法上传，接下来我们将会以一种诡异的方式读入数据。\n\n第一行输入两个非负整数 $n$、$X$。表示排列长度、随机种子。\n\n初始令 $a_i=i$，接下来输入一行一个整数 $c$，表示对排列的操作次数。\n\n接下来我们将会对排列 $A$ 进行 $c$ 次操作，对于下标从 $1$ 开始的第 $i$ 次操作，令 $l=(X\\times (X\\oplus i))\\bmod n+1,r=(X\\oplus(i\\times i))\\bmod n+1$，你需要交换 $a_l$ 与 $a_r$。$\\oplus$ 表示按位异或。\n\n对于 C++，代码实现如下：\n\n```cpp\nl = (1ll * X * (X ^ i)) % n + 1;\nr = (X ^ (1ll * i * i)) % n + 1;\n```\n\n接下来输入一行一个整数 $q$，表示询问组数。\n\n对于下标从 $1$ 开始的第 $i$ 次询问，我们令 $l=\\min((X\\times i+(X\\oplus (X\\times i)))\\bmod n,(X-i+(X\\oplus (X+i)))\\bmod n)+1,r=\\max((X\\times i+(X\\oplus (X\\times i)))\\bmod n,(X-i+(X\\oplus (X+i)))\\bmod n)+1$。表示询问的参数。\n\n对于 C++，代码实现如下：\n\n```cpp\nl = min((1ll * X * i + (X ^ (1ll * X * i))) % n, (X - i + (X ^ (X + i))) % n) + 1;\nr = max((1ll * X * i + (X ^ (1ll * X * i))) % n, (X - i + (X ^ (X + i))) % n) + 1;\n```", "outputFormat": "由于输出文件过大无法上传，接下来我们将会以一种诡异的方式输出数据。\n\n输出一行一个整数，表示 $q$ 次询问中所有答案的异或和。", "hint": "**样例 1 解释：**\n\n操作后 $A=\\{1,5,4,2,3\\}$。\n\n对询问解密后真实询问如下：\n\n```\n4 5\n2 3\n1 5\n3 4\n3 5\n```\n\n对输出解密后真实输出如下：\n\n```\n5\n998244350\n33\n1\n11\n```\n\n对于第一个询问，$S_4=\\{4,5\\}$，$S_5=\\{5\\}$，$|S_4\\cup S_4|+|S_4\\cup S_5|+|S_5\\cup S_5|=5$。\n\n对于倒数第二个询问，不要忘了 $1\\le x<l,r<y\\le n$ 的项。\n\n**数据范围：**\n\n对于 $20\\%$ 的数据，满足 $1\\le n\\le 100$、$1\\le q\\le 100$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n\\le 100$、$1\\le q\\le 10^5$。\n\n对于 $60\\%$ 的数据，满足 $1\\le n\\le 10^5$、$1\\le q\\le 10^5$。\n\n对于 $80\\%$ 的数据，满足 $1\\le n\\le 3\\times10^6$、$1\\le q\\le 3\\times10^6$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^7$，$1\\le q\\le 10^7$，$0\\le c\\le 10^7$，$0\\le X\\le 10^9$，$a_i$ 互不相同。\n\n**请各位选手注意常数因子的影响。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【烂题杯 Round 1】消灭劳嗝", "background": "", "description": "你需要消灭劳嗝。\n\n给定一个长度为 $n$ 的排列 $A=a_1,a_2,\\cdots,a_n$，定义 $S_i=\\{x|x\\ge i\\land \\max_{i\\le k\\le x}a_k\\le a_x\\}$，您可以把它理解为以 $i$ 开头的后缀的前缀最大值的下标集合。例如对于 $A=\\{3,5,2,1,4\\}$，$S_1=\\{1,2\\}$，$S_3=\\{3,5\\}$。\n\n有 $q$ 次询问，每次询问给出 $l,r$，求：\n\n$$\n\\left(\\left(\\sum_{l\\le x\\le y\\le r} |S_x\\cup S_y|-\\sum_{\\substack{{1\\le x<l}\\\\{r<y\\le n}}} |S_x\\cup S_y|\\right)\\bmod P+P\\right)\\bmod P\n$$\n\n其中，$P=998244353$。", "inputFormat": "由于输入文件过大无法上传，接下来我们将会以一种诡异的方式读入数据。\n\n第一行输入两个非负整数 $n$、$X$。表示排列长度、随机种子。\n\n初始令 $a_i=i$，接下来输入一行一个整数 $c$，表示对排列的操作次数。\n\n接下来我们将会对排列 $A$ 进行 $c$ 次操作，对于下标从 $1$ 开始的第 $i$ 次操作，令 $l=(X\\times (X\\oplus i))\\bmod n+1,r=(X\\oplus(i\\times i))\\bmod n+1$，你需要交换 $a_l$ 与 $a_r$。$\\oplus$ 表示按位异或。\n\n对于 C++，代码实现如下：\n\n```cpp\nl = (1ll * X * (X ^ i)) % n + 1;\nr = (X ^ (1ll * i * i)) % n + 1;\n```\n\n接下来输入一行一个整数 $q$，表示询问组数。\n\n对于下标从 $1$ 开始的第 $i$ 次询问，我们令 $l=\\min((X\\times i+(X\\oplus (X\\times i)))\\bmod n,(X-i+(X\\oplus (X+i)))\\bmod n)+1,r=\\max((X\\times i+(X\\oplus (X\\times i)))\\bmod n,(X-i+(X\\oplus (X+i)))\\bmod n)+1$。表示询问的参数。\n\n对于 C++，代码实现如下：\n\n```cpp\nl = min((1ll * X * i + (X ^ (1ll * X * i))) % n, (X - i + (X ^ (X + i))) % n) + 1;\nr = max((1ll * X * i + (X ^ (1ll * X * i))) % n, (X - i + (X ^ (X + i))) % n) + 1;\n```", "outputFormat": "由于输出文件过大无法上传，接下来我们将会以一种诡异的方式输出数据。\n\n输出一行一个整数，表示 $q$ 次询问中所有答案的异或和。", "hint": "**样例 1 解释：**\n\n操作后 $A=\\{1,5,4,2,3\\}$。\n\n对询问解密后真实询问如下：\n\n```\n4 5\n2 3\n1 5\n3 4\n3 5\n```\n\n对输出解密后真实输出如下：\n\n```\n5\n998244350\n33\n1\n11\n```\n\n对于第一个询问，$S_4=\\{4,5\\}$，$S_5=\\{5\\}$，$|S_4\\cup S_4|+|S_4\\cup S_5|+|S_5\\cup S_5|=5$。\n\n对于倒数第二个询问，不要忘了 $1\\le x<l,r<y\\le n$ 的项。\n\n**数据范围：**\n\n对于 $20\\%$ 的数据，满足 $1\\le n\\le 100$、$1\\le q\\le 100$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n\\le 100$、$1\\le q\\le 10^5$。\n\n对于 $60\\%$ 的数据，满足 $1\\le n\\le 10^5$、$1\\le q\\le 10^5$。\n\n对于 $80\\%$ 的数据，满足 $1\\le n\\le 3\\times10^6$、$1\\le q\\le 3\\times10^6$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^7$，$1\\le q\\le 10^7$，$0\\le c\\le 10^7$，$0\\le X\\le 10^9$，$a_i$ 互不相同。\n\n**请各位选手注意常数因子的影响。**", "locale": "zh-CN"}}}
{"pid": "P10892", "type": "P", "difficulty": 2, "samples": [["2\n13\n7", "3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "SDOI2024", "background": "AzureHair 在 NOIP 2022 中被喵了个喵创死，于是患上了不治之症——T2 恐惧症，于是他在 NOIP 2023 中果断跳过了 T2 并杠 T3 两小时无果，遗憾离场，他的同学决定帮他治疗这种不治之症。\n\n在他的同学给他治愈了 T2 恐惧症后，他自信的开始了他的 SDOI，遂分讨写了 $2$ 个小时没写出来，遗憾离场……", "description": "AzureHair 的同学把 AzureHair 和 $n$ 只猫猫关在一个房间里，并且要求 AzureHair 每过一天就交出 $\\frac{n}{2}$ 只猫猫，但是如果 $n$ 是奇数时，AzureHair 就会纠结于要交出 $\\frac{n+1}{2}$ 只猫猫还是交出 $\\frac{n-1}{2}$ 只猫猫。AzureHair 不想让自己纠结，所以请你计算出直到所有猫猫都被拿出房间时，AzureHair 的最小纠结次数是多少。", "inputFormat": "本题有多组测试数据。\n\n第一行一个整数 $T$。\n\n接下来 $T$ 行，每行一个整数 $n$。", "outputFormat": "$T$ 行，每行一个整数表示最小纠结次数。", "hint": "**【样例解释】**\n\n对于 $13$ 只猫猫，只纠结 $3$ 次的过程如下：\n\n选择交出 $7$ 只猫猫，剩余 $6$ 只；\n\n不纠结，交出 $3$ 只猫猫，剩余 $3$ 只；\n\n选择交出 $2$ 只猫猫，剩余 $1$ 只；\n\n选择交出 $1$ 只猫猫，所有猫猫均被取走。\n\n容易证明不存在少于 $3$ 次纠结的方案。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，保证 $1\\le n \\le 10$。\n\n对于 $30\\%$ 的数据，保证 $1\\le n \\le 10^{5}$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n \\le 2^{60}$，$1 \\le T \\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "SDOI2024", "background": "AzureHair 在 NOIP 2022 中被喵了个喵创死，于是患上了不治之症——T2 恐惧症，于是他在 NOIP 2023 中果断跳过了 T2 并杠 T3 两小时无果，遗憾离场，他的同学决定帮他治疗这种不治之症。\n\n在他的同学给他治愈了 T2 恐惧症后，他自信的开始了他的 SDOI，遂分讨写了 $2$ 个小时没写出来，遗憾离场……", "description": "AzureHair 的同学把 AzureHair 和 $n$ 只猫猫关在一个房间里，并且要求 AzureHair 每过一天就交出 $\\frac{n}{2}$ 只猫猫，但是如果 $n$ 是奇数时，AzureHair 就会纠结于要交出 $\\frac{n+1}{2}$ 只猫猫还是交出 $\\frac{n-1}{2}$ 只猫猫。AzureHair 不想让自己纠结，所以请你计算出直到所有猫猫都被拿出房间时，AzureHair 的最小纠结次数是多少。", "inputFormat": "本题有多组测试数据。\n\n第一行一个整数 $T$。\n\n接下来 $T$ 行，每行一个整数 $n$。", "outputFormat": "$T$ 行，每行一个整数表示最小纠结次数。", "hint": "**【样例解释】**\n\n对于 $13$ 只猫猫，只纠结 $3$ 次的过程如下：\n\n选择交出 $7$ 只猫猫，剩余 $6$ 只；\n\n不纠结，交出 $3$ 只猫猫，剩余 $3$ 只；\n\n选择交出 $2$ 只猫猫，剩余 $1$ 只；\n\n选择交出 $1$ 只猫猫，所有猫猫均被取走。\n\n容易证明不存在少于 $3$ 次纠结的方案。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，保证 $1\\le n \\le 10$。\n\n对于 $30\\%$ 的数据，保证 $1\\le n \\le 10^{5}$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n \\le 2^{60}$，$1 \\le T \\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10893", "type": "P", "difficulty": 4, "samples": [["8 0\n1 1 -2 1 1 -1 0 1", "2"], ["6 0\n1 1 -4 -5 1 -4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "城市化发展委员会", "background": "MLE 大帝曾说过：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kce8kpx3.png)\n\n所以为了应对这种情况我们设立了**城市化发展委员会**。", "description": "在高中的校园里我们常常能看到随机刷新的小情侣，对于他们之间的情感，对于 OIer 来说还是太过于高深了，即使是退役的 AzureHair 也无法理解这一行为，但是作为自命的城市化发展委员会的常委，他有自己的一套理解方法。\n\n他认为，女生往往对男生十分的严格。一天开始时男生在女生的心里的积分会加 $1$，而如果当天惹女生生气了 $x$ 次，积分就会在此基础上减 $x$。积分会不断累计，一旦小于等于 $0$ 就可能导致去城市化的严重后果。\n\n现在 **威廉** 在和 **珂朵莉** 进行一种城市化行为，**威廉** 在~~纳西妲~~的帮助之下获得了超能力：一是他可以预知到接下来一个周期的积分变化情况，初始的周期长度为 $n$；二是他可以选择从任意一天开始，开始前的日子将会被拼接到最后一天之后。\n\n他从每一天开始都尝试过一次后，发现了 $a$ 个能使得他不被去城市化的起始日期。随后他会将这若干种情况下的序列按照起始日期的先后拼在一起，变成一个长度为原先 $a$ 倍的周期。他如此重复操作 $k$ 次，由于一天天地试太累了，**威廉** 只想知道最后一次操作后有多少个起始日期能让自己不被去城市化，对 $998244353$ 取模。\n\n---\n\n形式化地说，我们称满足前缀和始终大于 $0$ 的数列为 “安全的”。\n\n对于一个长为 $n$ 的数列 $A_i$，根据以下算法构造出数列 $A_{i+1}$，初始时 $A_{i+1}$ 为空。\n\n- 重复执行 $n$ 次：\n\n1. 若 $A_i$ 是安全的，将其整个接到 $A_{i+1}$ 末尾。\n\n2. 将 $A_i$ 循环左移一位，即令 $A_{i_j} ← A_{i_{j+1 \\bmod n}}$。\n\n现在给定 $A_0$，**满足其各项均不大于 1**。\n\n从 $A_0$ 开始按上述规则生成数列 $A_1$ 到 $A_{k+1}$，请求出 $A_{k+1}$ 与 $A_k$ 的长度比，这个值只要存在就一定是整数，请输出它对 $998244353$ 取模的值。特别地，如果 $A_k$ 为空，请输出 ```0```。", "inputFormat": "普通题意：\n\n共两行，第一行两个整数 $n$ 和 $k$，表示初始的周期长度和操作次数。\n\n第二行 $n$ 个小于等于 1 的整数，表示每天的积分变化。\n\n形式化题意：\n\n共两行，第一行两个整数为 $A_0$ 的长度 $n$ 以及 $k$。\n\n第二行是 $A_0$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例解释1】**\n\n对于样例 #1 的数据，初始周期为 ```1 1 -2 1 1 -1 0 1```。从每一天开始得到的序列分别是：\n\n```text\n1 1 -2 1 1 -1 0 1\n1 -2 1 1 -1 0 1 1\n-2 1 1 -1 0 1 1 1\n1 1 -1 0 1 1 1 -2\n1 -1 0 1 1 1 -2 1\n-1 0 1 1 1 -2 1 1 \n0 1 1 1 -2 1 1 -1\n1 1 1 -2 1 1 -1 0\n```\n\n只有从第 4 天和第 8 天开始的序列是满足条件的。\n\n形式化题意：\n\n$A_1=\\{1,1,-1,0,1,1,1,-2,1,1,1,-2,1,1,-1,0\\}$，长度为 16，因此应输出 2。\n\n**【样例解释2】**\n\n可以证明不存在合法的方案。\n\n喂！样例全都 $k=0$ 是不是太过分了？！\n\n**数据范围：**\n\n对于 $15\\%$ 的数据，保证 $1\\le n \\le 10$，$1\\le k \\le 5$。\n\n对于另外 $25\\%$ 的数据，保证 $k=0$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6$，$0 \\le k \\le 10^6$，$-10^9 \\le {A_0}_i \\le 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "城市化发展委员会", "background": "MLE 大帝曾说过：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kce8kpx3.png)\n\n所以为了应对这种情况我们设立了**城市化发展委员会**。", "description": "在高中的校园里我们常常能看到随机刷新的小情侣，对于他们之间的情感，对于 OIer 来说还是太过于高深了，即使是退役的 AzureHair 也无法理解这一行为，但是作为自命的城市化发展委员会的常委，他有自己的一套理解方法。\n\n他认为，女生往往对男生十分的严格。一天开始时男生在女生的心里的积分会加 $1$，而如果当天惹女生生气了 $x$ 次，积分就会在此基础上减 $x$。积分会不断累计，一旦小于等于 $0$ 就可能导致去城市化的严重后果。\n\n现在 **威廉** 在和 **珂朵莉** 进行一种城市化行为，**威廉** 在~~纳西妲~~的帮助之下获得了超能力：一是他可以预知到接下来一个周期的积分变化情况，初始的周期长度为 $n$；二是他可以选择从任意一天开始，开始前的日子将会被拼接到最后一天之后。\n\n他从每一天开始都尝试过一次后，发现了 $a$ 个能使得他不被去城市化的起始日期。随后他会将这若干种情况下的序列按照起始日期的先后拼在一起，变成一个长度为原先 $a$ 倍的周期。他如此重复操作 $k$ 次，由于一天天地试太累了，**威廉** 只想知道最后一次操作后有多少个起始日期能让自己不被去城市化，对 $998244353$ 取模。\n\n---\n\n形式化地说，我们称满足前缀和始终大于 $0$ 的数列为 “安全的”。\n\n对于一个长为 $n$ 的数列 $A_i$，根据以下算法构造出数列 $A_{i+1}$，初始时 $A_{i+1}$ 为空。\n\n- 重复执行 $n$ 次：\n\n1. 若 $A_i$ 是安全的，将其整个接到 $A_{i+1}$ 末尾。\n\n2. 将 $A_i$ 循环左移一位，即令 $A_{i_j} ← A_{i_{j+1 \\bmod n}}$。\n\n现在给定 $A_0$，**满足其各项均不大于 1**。\n\n从 $A_0$ 开始按上述规则生成数列 $A_1$ 到 $A_{k+1}$，请求出 $A_{k+1}$ 与 $A_k$ 的长度比，这个值只要存在就一定是整数，请输出它对 $998244353$ 取模的值。特别地，如果 $A_k$ 为空，请输出 ```0```。", "inputFormat": "普通题意：\n\n共两行，第一行两个整数 $n$ 和 $k$，表示初始的周期长度和操作次数。\n\n第二行 $n$ 个小于等于 1 的整数，表示每天的积分变化。\n\n形式化题意：\n\n共两行，第一行两个整数为 $A_0$ 的长度 $n$ 以及 $k$。\n\n第二行是 $A_0$。", "outputFormat": "一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例解释1】**\n\n对于样例 #1 的数据，初始周期为 ```1 1 -2 1 1 -1 0 1```。从每一天开始得到的序列分别是：\n\n```text\n1 1 -2 1 1 -1 0 1\n1 -2 1 1 -1 0 1 1\n-2 1 1 -1 0 1 1 1\n1 1 -1 0 1 1 1 -2\n1 -1 0 1 1 1 -2 1\n-1 0 1 1 1 -2 1 1 \n0 1 1 1 -2 1 1 -1\n1 1 1 -2 1 1 -1 0\n```\n\n只有从第 4 天和第 8 天开始的序列是满足条件的。\n\n形式化题意：\n\n$A_1=\\{1,1,-1,0,1,1,1,-2,1,1,1,-2,1,1,-1,0\\}$，长度为 16，因此应输出 2。\n\n**【样例解释2】**\n\n可以证明不存在合法的方案。\n\n喂！样例全都 $k=0$ 是不是太过分了？！\n\n**数据范围：**\n\n对于 $15\\%$ 的数据，保证 $1\\le n \\le 10$，$1\\le k \\le 5$。\n\n对于另外 $25\\%$ 的数据，保证 $k=0$。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6$，$0 \\le k \\le 10^6$，$-10^9 \\le {A_0}_i \\le 1$。", "locale": "zh-CN"}}}
{"pid": "P10894", "type": "P", "difficulty": 5, "samples": [["5\n1 2\n2 3\n2 4\n1 5\n2\n2 5", "3\n13"], ["10\n1 2\n2 3\n2 4\n1 5\n5 6\n5 7\n7 8\n7 10\n1 9\n3\n5 2 8", "21\n66\n201"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "虚树", "background": "首先，做这道题不需要用到任何虚树有关知识。\n\n——尽管这是主题库里第一个名字含“虚树”的题（", "description": "jq 姐姐有一棵以结点 $1$ 为根的树。定义一棵树的点集 $S$ 的非空子集 $s$ 是好的，当且仅当它满足 $\\forall i,j \\in s, \\text{LCA}(i,j) \\in s$。[什么是 $\\text{LCA}$？](https://oi-wiki.org/graph/lca/)\n\n为了让树的形态更加可爱，jq 姐姐打算修剪掉某个以节点 $i$ 为根的子树（也就是在原树里将节点 $i$ 及其子树内节点及其相连的边均删除）。\n\n她有若干个修剪方案但从未实施，你需要求出每种方案实施后这棵树的好的非空子集数量。由于答案可能会很大，请输出其对 $998244353$ 取模的结果。", "inputFormat": "第一行读入一个整数 $n$ ($n \\leq 5 \\times 10^5$)，表示树的节点数。\n\n第 $2$ 到 $n$ 行，每行读入两个整数 $u_i,v_i$，表示一条从 $u_i$ 连向 $v_i$ 的边。\n\n第 $n+1$ 行读入一个整数 $m$ ($m \\leq 5 \\times 10^5$)，表示修剪方案数。\n\n接下来一行每行读入 $m$ 个整数 $q_i$，表示将以 $q_i$ 为根的子树修剪掉。", "outputFormat": "共 $m$ 行，第 $i$ 行一个整数 $k$ 表示删除以 $q_i$ 为根的子树后原树的好的非空子集数量。", "hint": "样例 1 解释：删去以 $2$ 为根的子树后，原树点集的 $3$ 个非空子集均满足性质，删去以 $5$ 为根的子树后，原树点集的 $15$ 个非空子集中有 $\\{3,4\\}$、$\\{1,3,4\\}$ 不满足性质。\n\n对于前 $10\\%$  的数据，$n,m \\leq 20$。\n\n对于前 $30\\%$ 的数据，$n,m \\leq 3000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 5 \\times 10^5$，$q \\in [1,n]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "虚树", "background": "首先，做这道题不需要用到任何虚树有关知识。\n\n——尽管这是主题库里第一个名字含“虚树”的题（", "description": "jq 姐姐有一棵以结点 $1$ 为根的树。定义一棵树的点集 $S$ 的非空子集 $s$ 是好的，当且仅当它满足 $\\forall i,j \\in s, \\text{LCA}(i,j) \\in s$。[什么是 $\\text{LCA}$？](https://oi-wiki.org/graph/lca/)\n\n为了让树的形态更加可爱，jq 姐姐打算修剪掉某个以节点 $i$ 为根的子树（也就是在原树里将节点 $i$ 及其子树内节点及其相连的边均删除）。\n\n她有若干个修剪方案但从未实施，你需要求出每种方案实施后这棵树的好的非空子集数量。由于答案可能会很大，请输出其对 $998244353$ 取模的结果。", "inputFormat": "第一行读入一个整数 $n$ ($n \\leq 5 \\times 10^5$)，表示树的节点数。\n\n第 $2$ 到 $n$ 行，每行读入两个整数 $u_i,v_i$，表示一条从 $u_i$ 连向 $v_i$ 的边。\n\n第 $n+1$ 行读入一个整数 $m$ ($m \\leq 5 \\times 10^5$)，表示修剪方案数。\n\n接下来一行每行读入 $m$ 个整数 $q_i$，表示将以 $q_i$ 为根的子树修剪掉。", "outputFormat": "共 $m$ 行，第 $i$ 行一个整数 $k$ 表示删除以 $q_i$ 为根的子树后原树的好的非空子集数量。", "hint": "样例 1 解释：删去以 $2$ 为根的子树后，原树点集的 $3$ 个非空子集均满足性质，删去以 $5$ 为根的子树后，原树点集的 $15$ 个非空子集中有 $\\{3,4\\}$、$\\{1,3,4\\}$ 不满足性质。\n\n对于前 $10\\%$  的数据，$n,m \\leq 20$。\n\n对于前 $30\\%$ 的数据，$n,m \\leq 3000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 5 \\times 10^5$，$q \\in [1,n]$。", "locale": "zh-CN"}}}
{"pid": "P10895", "type": "P", "difficulty": 6, "samples": [["3\n3\n4\n5", "4\n3\n6"], ["5\n13860108\n13850709\n220000633\n693439571\n1004535809", "188051653\n724253523\n444803502\n370347248\n425186012"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化"], "title": "选择困难症", "background": "Parviz 认为，如果一道题有一个可以显著优化复杂度的方法而不去使用，那这题就是有遗憾的。\n\nAlice 认为，任何算法难度大于思维难度的题，出在正式比赛中都是没有意义的。\n\n猫猫认为，ta 是学数学学的。\n\n$\\textsf{linyue}$ 认为……啊？你们在说啥？\n\n很有喜剧效果的是这四个名字你可能都没法一下子对上号（", "description": "Alice 与 Bob 在下棋之余，也需要一些娱乐活动来放松身心，比如去小吃街吃饭。作为一名绅士，Bob 每次都让 Alice 选择要去吃哪家。这却让 Alice 犯了难——她有选择困难症。\n\n小吃街有 $n$ 家饭店，在第 $i$ 家就餐需要 $i$ 元钱。如果预算为 $a$ 元，则可以选择前 $a$ 家餐厅。\n\n在长期的纠结后，Alice 想到一种方法：她提前在心里想好一个非负整数 $k< \\text{lcm}_{i=1}^{n} i$ ，在得知预算 $a$ 之后，选择在第 $(k$ $\\text{mod}$ $a)+1$ 家餐厅就餐。\n\n由于买棋盘与棋子的市场价格浮动，每次就餐的预算未必相同，但都是 $[2,n]$ 之间的整数。Alice 想每次都换换口味，希望对于不同的 $a$，最后选定的餐厅各不相同。她想要知道满足要求的 $k$ 的个数，但又忙于与 Bob 下棋没有时间算，于是只好求助于你啦。\n\n形式化地说，对于给定的 $n$，你需要求有多少个整数 $k \\in [0, \\text{lcm}_{i=1}^{n}i)$ ，满足 $k\\bmod 2,k\\bmod3 ,..., k\\bmod n$ 各不相同。答案对 $998244353$ 取模。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n接下来 $T$ 行，每行一个整数 $n$ ，含义见题面。", "outputFormat": "共 $T$ 行，每行一个整数，表示满足要求的 $k$ 的数量。", "hint": "**【样例解释1】**\n\n$n=3,4$ 时，$k$ 的取值集合分别为 $\\{2, 3, 4, 5\\}$ 、 $\\{3, 10, 11\\}$。\n\n$n=5$ 时：\n\n| $k$ | $k \\bmod 2$ | $k \\bmod 3$ | $k \\bmod 4$ | $k \\bmod 5$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $27$ | $1$ | $0$ | $3$ | $2$ |\n| $34$ | $0$ | $1$ | $2$ | $4$ |\n| $35$ | $1$ | $2$ | $3$ | $0$ |\n| $39$ | $1$ | $0$ | $3$ | $4$ |\n| $58$ | $0$ | $1$ | $2$ | $3$ |\n| $59$ | $1$ | $2$ | $3$ | $4$ |\n\n$\\text{lcm}_{i=1}^{n}i=60$，可以验证在 $[0,60)$ 内不存在其他的 $k$ 满足条件，故答案为 $6$。\n\n| 测试点编号 | $T \\leq$ | $n \\leq$ |\n| -----------: | -----------: | -----------: |\n| $1-2$ | $15$ | $15$ |\n| $3-6$ | $1000$ | $1000$ |\n| $7-12$ | $1000$ | $2 \\times 10^7$ |\n| $13-20$ | $15$ | $2 \\times 10^9$ |\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n \\leq 2 \\times 10^9$，$ T \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "选择困难症", "background": "Parviz 认为，如果一道题有一个可以显著优化复杂度的方法而不去使用，那这题就是有遗憾的。\n\nAlice 认为，任何算法难度大于思维难度的题，出在正式比赛中都是没有意义的。\n\n猫猫认为，ta 是学数学学的。\n\n$\\textsf{linyue}$ 认为……啊？你们在说啥？\n\n很有喜剧效果的是这四个名字你可能都没法一下子对上号（", "description": "Alice 与 Bob 在下棋之余，也需要一些娱乐活动来放松身心，比如去小吃街吃饭。作为一名绅士，Bob 每次都让 Alice 选择要去吃哪家。这却让 Alice 犯了难——她有选择困难症。\n\n小吃街有 $n$ 家饭店，在第 $i$ 家就餐需要 $i$ 元钱。如果预算为 $a$ 元，则可以选择前 $a$ 家餐厅。\n\n在长期的纠结后，Alice 想到一种方法：她提前在心里想好一个非负整数 $k< \\text{lcm}_{i=1}^{n} i$ ，在得知预算 $a$ 之后，选择在第 $(k$ $\\text{mod}$ $a)+1$ 家餐厅就餐。\n\n由于买棋盘与棋子的市场价格浮动，每次就餐的预算未必相同，但都是 $[2,n]$ 之间的整数。Alice 想每次都换换口味，希望对于不同的 $a$，最后选定的餐厅各不相同。她想要知道满足要求的 $k$ 的个数，但又忙于与 Bob 下棋没有时间算，于是只好求助于你啦。\n\n形式化地说，对于给定的 $n$，你需要求有多少个整数 $k \\in [0, \\text{lcm}_{i=1}^{n}i)$ ，满足 $k\\bmod 2,k\\bmod3 ,..., k\\bmod n$ 各不相同。答案对 $998244353$ 取模。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n接下来 $T$ 行，每行一个整数 $n$ ，含义见题面。", "outputFormat": "共 $T$ 行，每行一个整数，表示满足要求的 $k$ 的数量。", "hint": "**【样例解释1】**\n\n$n=3,4$ 时，$k$ 的取值集合分别为 $\\{2, 3, 4, 5\\}$ 、 $\\{3, 10, 11\\}$。\n\n$n=5$ 时：\n\n| $k$ | $k \\bmod 2$ | $k \\bmod 3$ | $k \\bmod 4$ | $k \\bmod 5$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $27$ | $1$ | $0$ | $3$ | $2$ |\n| $34$ | $0$ | $1$ | $2$ | $4$ |\n| $35$ | $1$ | $2$ | $3$ | $0$ |\n| $39$ | $1$ | $0$ | $3$ | $4$ |\n| $58$ | $0$ | $1$ | $2$ | $3$ |\n| $59$ | $1$ | $2$ | $3$ | $4$ |\n\n$\\text{lcm}_{i=1}^{n}i=60$，可以验证在 $[0,60)$ 内不存在其他的 $k$ 满足条件，故答案为 $6$。\n\n| 测试点编号 | $T \\leq$ | $n \\leq$ |\n| -----------: | -----------: | -----------: |\n| $1-2$ | $15$ | $15$ |\n| $3-6$ | $1000$ | $1000$ |\n| $7-12$ | $1000$ | $2 \\times 10^7$ |\n| $13-20$ | $15$ | $2 \\times 10^9$ |\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n \\leq 2 \\times 10^9$，$ T \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10896", "type": "P", "difficulty": 7, "samples": [["2\n2 2", "62500001"], ["5\n1 2 3 4 5", "762695321"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "组合数学", "Catalan 数"], "title": "移言丁真：Unavoided linyue", "background": "**注：你不需要阅读此题题目背景。**\n\n\"$\\textsf{linyue}$\" 是我起过的唯一一个人名，所以 $\\textsf{linyue}$ 成了唯一一个由我想象出来的角色。她是我脑海中所有故事的主角，对我而言非常地重要，以至于不知道为什么，每次我看到她的名字被写出来或是被读出来都会感到无所适从，所以我总是会想办法避免这样，比如说这个题的题面里我就用的是拼音作代替。\n\n“跑团”这种游戏我最初了解的时候简直是“绝望地想要跟不管是谁玩随便什么”。可是疫情却让我的好多和同学玩的计划纷纷泡汤，所以我甚至走投无路到把它也纳入了计划的考虑范畴，不过由于它实在是太复杂了，没过多久我就把它抛诸脑后了（\n\n“黑影杀”是一款在泞之翼官方交流群里兴起的游戏，玩家将会探索《泞之翼》原作的旅馆，躲避黑影以求逃出生天——对我而言没有比这更完美的事了！它完全实现了我上一段里的愿望，只要一有空，我便可以在群里“开鲨”！我给这个游戏准备了便于主持的程序，写了许多特殊规则，甚至还以它为背景出了题——尽管这题投到的比赛咕了（\n\n《怪商一克拉》是一部我很喜欢的漫画。它的特点就是主角好像在每段故事里都只会最小程度地完成任务，然后哪怕这个故事还有好多未解之谜都只会跳到下一段故事。尽管这看起来像是没写好，但我相信这种效果作者是刻意为之。所以我期待着在未来看到这些故事的伏笔被精妙地解决，带来一个震撼的结局。可是有一天，我没有在漫画派对上看到这部漫画。这意味着以上就都不会发生了……我当时心态崩了好长时间，甚至都到泞之翼群里发癫了，不过事实上作者只是请了一个月假，接下来这漫画还会照常更新（\n\n前两天，我终于又找到机会和同学出去玩了！这一次我们打算上一个主营镜土 TRPG 的店里试试跑团。要知道，这对我而言还是很有吸引力的，因为之前不管是玩什么，都是\"我\"在玩，跟 $\\textsf{linyue}$ 没有什么关系。但要是玩跑团做角色卡的话，是不是就能填补这个遗憾了呢？所以这次我是有备而来！我提前十分费力地给 $\\textsf{linyue}$ 画了一张简单的画，然后输入名字的时候，我决定不再回避——用她那两个汉字的真名，而非六个字母的替代。\n\n然而，尽管我这一天听到和看到她名字的次数前所未有，但最后却并没什么很好的效果。我在游戏里确实是主打一个不入戏，对话内容有种全人类取平均的美，没推理出什么剧情的关键，也没想到什么新奇的点子。相信把我换成 Kimi AI 游戏绝对会更有趣……\n\n——不过当然啦，这倒也在我意料之中，因为我知道我本来就非常非常不擅长这种角色扮演……看来对我而言，创造 $\\textsf{linyue}$ 的故事会比别人更加困难。\n\n所以我不会太受这个问题的困扰，一是因为习惯了，二是因为——我们出题组的比赛没过审。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7qwdep44.png)\n\n“移言丁真”是这场比赛的原定 E 题之一，可是它被鉴定为了典……显然这最主要是我的锅。所以我现在的当务之急是要想一个新的 idea……", "description": "定义一个括号串的权值为其中可配对的括号组数。也就是你重复地在里面删除掉某个为 ```()``` 的子串，最多可以删除的次数。\n\n你会遇到 $m$ 个括号串，第 $i$ 个的长度是 $l_i$。你可以将它们按照任意顺序连接起来，然后连成一个长的括号串，而你的目标就是让最终的串的权值最小。\n\n如果这 $m$ 个串是等概率随机生成的，而你的操作是最优的，请你求出最终权值的期望。也就是说你要对于初始括号串的所有可能性求出最小权值的和再除以 $2^n$，$n$ 为这些字符串的总长。对 $10^9+7$ 取模。", "inputFormat": "第一行一个整数 $m$。\n\n第二行 $m$ 个整数，表示 $l_1$ 到 $l_m$。", "outputFormat": "一行一个整数表示答案，对 $10^9+7$ 取模。", "hint": "**【样例解释1】**\n\n这里 $\\{S_1,S_2\\}$ 表示两个括号串构成的无序可重集合，$P$ 表示取到这样集合的概率。\n\n| $\\{S_1,S_2\\}$ | $P$ | 最优方案 | 权值 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $\\{$```((```$,$```((```$\\}$ | $\\frac{1}{16}$ | ```((((``` | $0$\n| $\\{$```((```$,$```()```$\\}$ | $\\frac{1}{8}$ | 任意 | $1$\n| $\\{$```((```$,$```)(```$\\}$ | $\\frac{1}{8}$ | ```)(((``` | $0$\n| $\\{$```((```$,$```))```$\\}$ | $\\frac{1}{8}$ | ```))((``` | $0$\n| $\\{$```()```$,$```()```$\\}$ | $\\frac{1}{16}$ | ```()()``` | $2$\n| $\\{$```()```$,$```)(```$\\}$ | $\\frac{1}{8}$ | 任意 | $1$\n| $\\{$```()```$,$```))```$\\}$ | $\\frac{1}{8}$ | 任意 | $1$\n| $\\{$```)(```$,$```)(```$\\}$ | $\\frac{1}{16}$ | ```)()(``` | $1$\n| $\\{$```)(```$,$```))```$\\}$ | $\\frac{1}{8}$ | ```)))(``` | $0$\n| $\\{$```))```$,$```))```$\\}$ | $\\frac{1}{16}$ | ```))))``` | $0$\n\n最终答案为 $\\dfrac{9}{16}$。\n\n**【数据范围】**\n\n令 $n$ 为 $l_i$ 的总和。\n\n子任务 $1$（$20$ 分）: $n \\le 20$。\n\n子任务 $2$（$30$ 分）: $n \\le 5000$。\n\n子任务 $3$（$50$ 分）: $n \\le 4000000$。\n\n保证 $l_i \\ge 1$。\n\n**【后记】**\n\n左括号和右括号可以是 $\\textsf{linyue}$ 名字的第一个字和第二个字，也可以是一段故事的萌芽和结果。\n\n下一次跑团遥遥无期，黑影杀渐渐无人问津，我们团的三个原定 E 题和其他好多好多的 idea 不知道何去何从，那些和 $\\textsf{linyue}$ 有关的故事和设想更是也难以被呈现。有时我感觉自己就像是在《怪商一克拉》里一样，好多段经历都没等到自己的右括号，有种被最小化了权值的美。所以，我总是期待这些故事的伏笔被精妙地解决，带来最大的幸福。不过在这之前，我只好继续回避 “$\\textsf{linyue}$” 了。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "移言丁真：Unavoided linyue", "background": "**注：你不需要阅读此题题目背景。**\n\n\"$\\textsf{linyue}$\" 是我起过的唯一一个人名，所以 $\\textsf{linyue}$ 成了唯一一个由我想象出来的角色。她是我脑海中所有故事的主角，对我而言非常地重要，以至于不知道为什么，每次我看到她的名字被写出来或是被读出来都会感到无所适从，所以我总是会想办法避免这样，比如说这个题的题面里我就用的是拼音作代替。\n\n“跑团”这种游戏我最初了解的时候简直是“绝望地想要跟不管是谁玩随便什么”。可是疫情却让我的好多和同学玩的计划纷纷泡汤，所以我甚至走投无路到把它也纳入了计划的考虑范畴，不过由于它实在是太复杂了，没过多久我就把它抛诸脑后了（\n\n“黑影杀”是一款在泞之翼官方交流群里兴起的游戏，玩家将会探索《泞之翼》原作的旅馆，躲避黑影以求逃出生天——对我而言没有比这更完美的事了！它完全实现了我上一段里的愿望，只要一有空，我便可以在群里“开鲨”！我给这个游戏准备了便于主持的程序，写了许多特殊规则，甚至还以它为背景出了题——尽管这题投到的比赛咕了（\n\n《怪商一克拉》是一部我很喜欢的漫画。它的特点就是主角好像在每段故事里都只会最小程度地完成任务，然后哪怕这个故事还有好多未解之谜都只会跳到下一段故事。尽管这看起来像是没写好，但我相信这种效果作者是刻意为之。所以我期待着在未来看到这些故事的伏笔被精妙地解决，带来一个震撼的结局。可是有一天，我没有在漫画派对上看到这部漫画。这意味着以上就都不会发生了……我当时心态崩了好长时间，甚至都到泞之翼群里发癫了，不过事实上作者只是请了一个月假，接下来这漫画还会照常更新（\n\n前两天，我终于又找到机会和同学出去玩了！这一次我们打算上一个主营镜土 TRPG 的店里试试跑团。要知道，这对我而言还是很有吸引力的，因为之前不管是玩什么，都是\"我\"在玩，跟 $\\textsf{linyue}$ 没有什么关系。但要是玩跑团做角色卡的话，是不是就能填补这个遗憾了呢？所以这次我是有备而来！我提前十分费力地给 $\\textsf{linyue}$ 画了一张简单的画，然后输入名字的时候，我决定不再回避——用她那两个汉字的真名，而非六个字母的替代。\n\n然而，尽管我这一天听到和看到她名字的次数前所未有，但最后却并没什么很好的效果。我在游戏里确实是主打一个不入戏，对话内容有种全人类取平均的美，没推理出什么剧情的关键，也没想到什么新奇的点子。相信把我换成 Kimi AI 游戏绝对会更有趣……\n\n——不过当然啦，这倒也在我意料之中，因为我知道我本来就非常非常不擅长这种角色扮演……看来对我而言，创造 $\\textsf{linyue}$ 的故事会比别人更加困难。\n\n所以我不会太受这个问题的困扰，一是因为习惯了，二是因为——我们出题组的比赛没过审。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7qwdep44.png)\n\n“移言丁真”是这场比赛的原定 E 题之一，可是它被鉴定为了典……显然这最主要是我的锅。所以我现在的当务之急是要想一个新的 idea……", "description": "定义一个括号串的权值为其中可配对的括号组数。也就是你重复地在里面删除掉某个为 ```()``` 的子串，最多可以删除的次数。\n\n你会遇到 $m$ 个括号串，第 $i$ 个的长度是 $l_i$。你可以将它们按照任意顺序连接起来，然后连成一个长的括号串，而你的目标就是让最终的串的权值最小。\n\n如果这 $m$ 个串是等概率随机生成的，而你的操作是最优的，请你求出最终权值的期望。也就是说你要对于初始括号串的所有可能性求出最小权值的和再除以 $2^n$，$n$ 为这些字符串的总长。对 $10^9+7$ 取模。", "inputFormat": "第一行一个整数 $m$。\n\n第二行 $m$ 个整数，表示 $l_1$ 到 $l_m$。", "outputFormat": "一行一个整数表示答案，对 $10^9+7$ 取模。", "hint": "**【样例解释1】**\n\n这里 $\\{S_1,S_2\\}$ 表示两个括号串构成的无序可重集合，$P$ 表示取到这样集合的概率。\n\n| $\\{S_1,S_2\\}$ | $P$ | 最优方案 | 权值 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $\\{$```((```$,$```((```$\\}$ | $\\frac{1}{16}$ | ```((((``` | $0$\n| $\\{$```((```$,$```()```$\\}$ | $\\frac{1}{8}$ | 任意 | $1$\n| $\\{$```((```$,$```)(```$\\}$ | $\\frac{1}{8}$ | ```)(((``` | $0$\n| $\\{$```((```$,$```))```$\\}$ | $\\frac{1}{8}$ | ```))((``` | $0$\n| $\\{$```()```$,$```()```$\\}$ | $\\frac{1}{16}$ | ```()()``` | $2$\n| $\\{$```()```$,$```)(```$\\}$ | $\\frac{1}{8}$ | 任意 | $1$\n| $\\{$```()```$,$```))```$\\}$ | $\\frac{1}{8}$ | 任意 | $1$\n| $\\{$```)(```$,$```)(```$\\}$ | $\\frac{1}{16}$ | ```)()(``` | $1$\n| $\\{$```)(```$,$```))```$\\}$ | $\\frac{1}{8}$ | ```)))(``` | $0$\n| $\\{$```))```$,$```))```$\\}$ | $\\frac{1}{16}$ | ```))))``` | $0$\n\n最终答案为 $\\dfrac{9}{16}$。\n\n**【数据范围】**\n\n令 $n$ 为 $l_i$ 的总和。\n\n子任务 $1$（$20$ 分）: $n \\le 20$。\n\n子任务 $2$（$30$ 分）: $n \\le 5000$。\n\n子任务 $3$（$50$ 分）: $n \\le 4000000$。\n\n保证 $l_i \\ge 1$。\n\n**【后记】**\n\n左括号和右括号可以是 $\\textsf{linyue}$ 名字的第一个字和第二个字，也可以是一段故事的萌芽和结果。\n\n下一次跑团遥遥无期，黑影杀渐渐无人问津，我们团的三个原定 E 题和其他好多好多的 idea 不知道何去何从，那些和 $\\textsf{linyue}$ 有关的故事和设想更是也难以被呈现。有时我感觉自己就像是在《怪商一克拉》里一样，好多段经历都没等到自己的右括号，有种被最小化了权值的美。所以，我总是期待这些故事的伏笔被精妙地解决，带来最大的幸福。不过在这之前，我只好继续回避 “$\\textsf{linyue}$” 了。", "locale": "zh-CN"}}}
{"pid": "P10897", "type": "P", "difficulty": 7, "samples": [["3 2", "12"], ["4 3", "60"], ["22 21", "478037653"], ["407693 333333", "971291318"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "生成函数"], "title": "AGC022F Checkers 故事2", "background": ">『长存不灭的过去，逐渐消逝的未来』\n>\n>以某种事物作为代价，以某种代价作为契机……？\n>\n>\"I'm not crazy, my reality is just different to yours.\"\n>\n>黄沙卷狂风，庭迹一如故。", "description": "令 $x=40^{76^{93}}$，平面上有 $n$ 个点，第 $i$ 个点的坐标为 $(x^i,0)$。\n\n进行 $m$ 次操作，每次操作选择两点 $A$ 和 $B$，将 $A$ 绕 $B$ 顺时针旋转 $60°$ 并删去 $B$。\n\n求最后剩下的所有点的重心有多少种可能的位置，对 $998244353$  取模。\n\n$2 \\le n\\le 407693$，$1\\le m\\le n-1$。", "inputFormat": "一行两个整数 $n,m$。", "outputFormat": "一行，为答案在模 $998244353$ 意义下的结果。", "hint": "本题只有一个 Subtask，只有通过了全部数据点才能得分。\n\n```\n哪 怕 梦想  再 虚 妄\n无 论 希望  多 渺 茫\n悲 伤 痛苦 和  绝 望 别怕\n没 关 系的 都  一 样\n\n忘 掉 虚妄  的 梦 想\n放 弃 渺茫  的 希 望\n快 乐 美好 的  景 象 我们\n再 来 一次 怎  么 样\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "AGC022F Checkers 故事2", "background": ">『长存不灭的过去，逐渐消逝的未来』\n>\n>以某种事物作为代价，以某种代价作为契机……？\n>\n>\"I'm not crazy, my reality is just different to yours.\"\n>\n>黄沙卷狂风，庭迹一如故。", "description": "令 $x=40^{76^{93}}$，平面上有 $n$ 个点，第 $i$ 个点的坐标为 $(x^i,0)$。\n\n进行 $m$ 次操作，每次操作选择两点 $A$ 和 $B$，将 $A$ 绕 $B$ 顺时针旋转 $60°$ 并删去 $B$。\n\n求最后剩下的所有点的重心有多少种可能的位置，对 $998244353$  取模。\n\n$2 \\le n\\le 407693$，$1\\le m\\le n-1$。", "inputFormat": "一行两个整数 $n,m$。", "outputFormat": "一行，为答案在模 $998244353$ 意义下的结果。", "hint": "本题只有一个 Subtask，只有通过了全部数据点才能得分。\n\n```\n哪 怕 梦想  再 虚 妄\n无 论 希望  多 渺 茫\n悲 伤 痛苦 和  绝 望 别怕\n没 关 系的 都  一 样\n\n忘 掉 虚妄  的 梦 想\n放 弃 渺茫  的 希 望\n快 乐 美好 的  景 象 我们\n再 来 一次 怎  么 样\n```", "locale": "zh-CN"}}}
{"pid": "P10898", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["数学", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 拼正方形", "background": "", "description": "小蓝正在玩拼图游戏，他有 $7385137888721$ 个 $2 \\times 2$ 的方块和 $10470245$ 个 $1 \\times 1$ 的方块，他需要从中挑出一些来拼出一个正方形，比如用 $3$ 个 $2 \\times 2$ 和 $4$ 个 $1 \\times 1$ 的方块可以拼出一个 $4 \\times 4$ 的正方形，用 $9$ 个 $2 \\times 2$ 的方块可以拼出一个 $6 \\times 6$ 的正方形，请问小蓝能拼成的最大的正方形的边长为多少。", "inputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 拼正方形", "background": "", "description": "小蓝正在玩拼图游戏，他有 $7385137888721$ 个 $2 \\times 2$ 的方块和 $10470245$ 个 $1 \\times 1$ 的方块，他需要从中挑出一些来拼出一个正方形，比如用 $3$ 个 $2 \\times 2$ 和 $4$ 个 $1 \\times 1$ 的方块可以拼出一个 $4 \\times 4$ 的正方形，用 $9$ 个 $2 \\times 2$ 的方块可以拼出一个 $6 \\times 6$ 的正方形，请问小蓝能拼成的最大的正方形的边长为多少。", "inputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10899", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "2024", "提交答案", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 劲舞团", "background": "", "description": "小蓝最近迷上了一款名为“劲舞团”的游戏，具体来说，只要按照游戏中给出的键位提示依次按出对应的键位，游戏人物便可以跟随节奏跳舞。对于连续的 $K$ 次正确敲击，如果任意连续的两次敲击间间隔时间都小于等于 $1\\texttt s$，那么\n我们称这是一次 $K$ 连击。现在给出一局小蓝的游戏记录文件，log.txt 中记录了 $N$ 条记录，每条记录有三个字段，依次为正确的敲击字符、小蓝打出的字符、打出字符的时间对应的毫秒时间戳。现在请你计算下最长的 $K$ 连击是多少，你\n只需要输出 $K$ 的值。", "inputFormat": "为了方便评测，输入数据已替换为 log.txt。在洛谷评测时，你可以从标准输入读取 log.txt，也可以从下发文件中下载。", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 劲舞团", "background": "", "description": "小蓝最近迷上了一款名为“劲舞团”的游戏，具体来说，只要按照游戏中给出的键位提示依次按出对应的键位，游戏人物便可以跟随节奏跳舞。对于连续的 $K$ 次正确敲击，如果任意连续的两次敲击间间隔时间都小于等于 $1\\texttt s$，那么\n我们称这是一次 $K$ 连击。现在给出一局小蓝的游戏记录文件，log.txt 中记录了 $N$ 条记录，每条记录有三个字段，依次为正确的敲击字符、小蓝打出的字符、打出字符的时间对应的毫秒时间戳。现在请你计算下最长的 $K$ 连击是多少，你\n只需要输出 $K$ 的值。", "inputFormat": "为了方便评测，输入数据已替换为 log.txt。在洛谷评测时，你可以从标准输入读取 log.txt，也可以从下发文件中下载。", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10900", "type": "P", "difficulty": 2, "samples": [["3\n3 6 8", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 数字诗意", "background": "", "description": "在诗人的眼中，数字是生活的韵律，也是诗意的表达。\n\n小蓝，当代顶级诗人与数学家，被赋予了“数学诗人” 的美誉。他擅长将冰冷的数字与抽象的诗意相融合，并用优雅的文字将数学之美展现于纸上。\n\n某日，小蓝静坐书桌前，目光所及，展现着 $n$ 个数字，它们依次为 $a_1, a_2, \\cdots, a_n$，熠熠生辉。小蓝悟到，如果一个数能够以若干个（至少两个）**连续的正整数**相加表示，那么它就蕴含诗意。例如，数字 $6$ 就蕴含诗意，因为\n它可以表示为 $1 + 2 + 3$。而 $8$ 则缺乏诗意，因为它无法用连续的正整数相加表示。\n\n小蓝希望他面前的所有数字都蕴含诗意，为此，他决定从这 $n$ 个数字中删除一部分。请问，小蓝需要删除多少个数字，才能使剩下的数字全部蕴含诗意？", "inputFormat": "输入的第一行包含一个整数 $n$，表示展示的数字个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔，表示展示的数字。", "outputFormat": "输出一行包含一个整数，表示小蓝需要删除的数字个数，以使剩下的数字全部蕴含诗意。", "hint": "**【样例说明】**\n\n在样例中，数字 $3$ 可以表示为 $1 + 2$，数字 $6$ 可以表示为 $1 + 2 + 3$，数字 $8$ 无法表示为连续的正整数相加，因此，需要删除的数字个数为 $1$。\n\n**【评测用例规模与约定】**\n\n对于 $30\\%$ 的评测用例，$1 \\le n \\le 10^3$，$1 \\le a_i \\le 10^3$。  \n对于所有评测用例，$1 \\le n \\le 2 \\times 10^5$，$1 \\le a_i \\le 10^{16}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 数字诗意", "background": "", "description": "在诗人的眼中，数字是生活的韵律，也是诗意的表达。\n\n小蓝，当代顶级诗人与数学家，被赋予了“数学诗人” 的美誉。他擅长将冰冷的数字与抽象的诗意相融合，并用优雅的文字将数学之美展现于纸上。\n\n某日，小蓝静坐书桌前，目光所及，展现着 $n$ 个数字，它们依次为 $a_1, a_2, \\cdots, a_n$，熠熠生辉。小蓝悟到，如果一个数能够以若干个（至少两个）**连续的正整数**相加表示，那么它就蕴含诗意。例如，数字 $6$ 就蕴含诗意，因为\n它可以表示为 $1 + 2 + 3$。而 $8$ 则缺乏诗意，因为它无法用连续的正整数相加表示。\n\n小蓝希望他面前的所有数字都蕴含诗意，为此，他决定从这 $n$ 个数字中删除一部分。请问，小蓝需要删除多少个数字，才能使剩下的数字全部蕴含诗意？", "inputFormat": "输入的第一行包含一个整数 $n$，表示展示的数字个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\cdots, a_n$，相邻整数之间使用一个空格分隔，表示展示的数字。", "outputFormat": "输出一行包含一个整数，表示小蓝需要删除的数字个数，以使剩下的数字全部蕴含诗意。", "hint": "**【样例说明】**\n\n在样例中，数字 $3$ 可以表示为 $1 + 2$，数字 $6$ 可以表示为 $1 + 2 + 3$，数字 $8$ 无法表示为连续的正整数相加，因此，需要删除的数字个数为 $1$。\n\n**【评测用例规模与约定】**\n\n对于 $30\\%$ 的评测用例，$1 \\le n \\le 10^3$，$1 \\le a_i \\le 10^3$。  \n对于所有评测用例，$1 \\le n \\le 2 \\times 10^5$，$1 \\le a_i \\le 10^{16}$。", "locale": "zh-CN"}}}
{"pid": "P10901", "type": "P", "difficulty": 2, "samples": [["3\n18 29 6", "6 29 18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "排序", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 封闭图形个数", "background": null, "description": "在蓝桥王国，数字的大小不仅仅取决于它们的数值大小，还取决于它们所形成的“封闭图形”的个数。\n\n封闭图形是指数字中完全封闭的空间，例如数字 $1$、$2$、$3$、$5$、$7$ 都没有形成封闭图形，而数字 $0$、$4$、$6$、$9$ 分别形成了 $1$ 个封闭图形，数字 $8$ 则形成了 $2$ 个封闭图形。值得注意的是，封闭图形的个数是可以累加的。例如，对于数字 $68$，由于 $6$ 形成了 $1$ 个封闭图形，而 $8$ 形成了 $2$ 个，所以 $68$ 形成的封闭图形的个数总共为 $3$。\n\n在比较两个数的大小时，如果它们的封闭图形个数不同，那么封闭图形个数较多的数更大。例如，数字 $41$ 和数字 $18$，它们对应的封闭图形的个数分别为 $1$ 和 $2$，因此数字 $41$ 小于数字 $18$。如果两个数的封闭图形个数相同，那么数值较大的数更大。例如，数字 $14$ 和数字 $41$，它们的封闭图形的个数都是 $1$，但 $14 < 41$，所以数字 $14$ 小于数字 $41$。如果两个数字的封闭图形个数和数值都相同，那么这两个数字被认为是相等的。\n\n小蓝对蓝桥王国的数字大小规则十分感兴趣。现在，他将给定你 $n$ 个数 $a_1, a_2,\\cdots, a_n$，请你按照蓝桥王国的数字大小规则，将这 $n$ 数从小到大排序，并输出排序后结果。", "inputFormat": "输入的第一行包含一个整数 $n$，表示给定的数字个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，相邻整数之间使用一个空格分隔，表示待排序的数字。", "outputFormat": "输出一行包含 $n$ 个整数，相邻整数之间使用一个空格分隔，表示按照蓝桥王国的数字大小规则从小到大排序后的结果。", "hint": "**【样例说明】**\n\n对于给定的数字序列 $[18, 29, 6]$，数字 $18$ 的封闭图形个数为 $2$，数字 $29$ 的封闭图形个数为 $1$，数字 $6$ 的封闭图形个数为 $1$。按照封闭图形个数从小到大排序后，得到 $[29, 6, 18]$。\n\n由于数字 $29$ 和数字 $6$ 的封闭图形个数相同，因此需要进一步按照数值大小对它们进行排序，最终得到 $[6, 29, 18]$。\n\n**【评测用例规模与约定】**\n\n对于 $50\\%$ 的评测用例，$1\\le n \\le 2 \\times 10^3$，$1 \\le a_i \\le 10^5$。  \n对于所有评测用例，$1 \\le n\\le 2 \\times 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 封闭图形个数", "background": null, "description": "在蓝桥王国，数字的大小不仅仅取决于它们的数值大小，还取决于它们所形成的“封闭图形”的个数。\n\n封闭图形是指数字中完全封闭的空间，例如数字 $1$、$2$、$3$、$5$、$7$ 都没有形成封闭图形，而数字 $0$、$4$、$6$、$9$ 分别形成了 $1$ 个封闭图形，数字 $8$ 则形成了 $2$ 个封闭图形。值得注意的是，封闭图形的个数是可以累加的。例如，对于数字 $68$，由于 $6$ 形成了 $1$ 个封闭图形，而 $8$ 形成了 $2$ 个，所以 $68$ 形成的封闭图形的个数总共为 $3$。\n\n在比较两个数的大小时，如果它们的封闭图形个数不同，那么封闭图形个数较多的数更大。例如，数字 $41$ 和数字 $18$，它们对应的封闭图形的个数分别为 $1$ 和 $2$，因此数字 $41$ 小于数字 $18$。如果两个数的封闭图形个数相同，那么数值较大的数更大。例如，数字 $14$ 和数字 $41$，它们的封闭图形的个数都是 $1$，但 $14 < 41$，所以数字 $14$ 小于数字 $41$。如果两个数字的封闭图形个数和数值都相同，那么这两个数字被认为是相等的。\n\n小蓝对蓝桥王国的数字大小规则十分感兴趣。现在，他将给定你 $n$ 个数 $a_1, a_2,\\cdots, a_n$，请你按照蓝桥王国的数字大小规则，将这 $n$ 数从小到大排序，并输出排序后结果。", "inputFormat": "输入的第一行包含一个整数 $n$，表示给定的数字个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，相邻整数之间使用一个空格分隔，表示待排序的数字。", "outputFormat": "输出一行包含 $n$ 个整数，相邻整数之间使用一个空格分隔，表示按照蓝桥王国的数字大小规则从小到大排序后的结果。", "hint": "**【样例说明】**\n\n对于给定的数字序列 $[18, 29, 6]$，数字 $18$ 的封闭图形个数为 $2$，数字 $29$ 的封闭图形个数为 $1$，数字 $6$ 的封闭图形个数为 $1$。按照封闭图形个数从小到大排序后，得到 $[29, 6, 18]$。\n\n由于数字 $29$ 和数字 $6$ 的封闭图形个数相同，因此需要进一步按照数值大小对它们进行排序，最终得到 $[6, 29, 18]$。\n\n**【评测用例规模与约定】**\n\n对于 $50\\%$ 的评测用例，$1\\le n \\le 2 \\times 10^3$，$1 \\le a_i \\le 10^5$。  \n对于所有评测用例，$1 \\le n\\le 2 \\times 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10902", "type": "P", "difficulty": 2, "samples": [["4\n1 2 3 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 回文数组", "background": "", "description": "小蓝在无聊时随机生成了一个长度为 $n$ 的整数数组，数组中的第 $i$ 个数为 $a_i$，他觉得随机生成的数组不太美观，想把它变成回文数组，也是就对于任意 $i\\in [1,n]$ 满足 $a_i=a_{n-i+1}$。小蓝一次操作可以指定相邻的两个数，将它们一起加 $1$ 或减 $1$；也可以只指定一个数加 $1$ 或减 $1$，请问他最少需要操作多少次能把这个数组变成回文数组？", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "**【样例说明】**\n\n第一次操作将 $a_1, a_2$ 加 $1$，变为 $2, 3, 3, 4$；\n\n后面两次操作将 $a_1$ 加 $1$，变为 $4,3,3,4$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1 \\le n \\le 10$；  \n对于所有评测用例，$1 \\le n \\le 10^5$，$-10^6 \\le a_i \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 回文数组", "background": "", "description": "小蓝在无聊时随机生成了一个长度为 $n$ 的整数数组，数组中的第 $i$ 个数为 $a_i$，他觉得随机生成的数组不太美观，想把它变成回文数组，也是就对于任意 $i\\in [1,n]$ 满足 $a_i=a_{n-i+1}$。小蓝一次操作可以指定相邻的两个数，将它们一起加 $1$ 或减 $1$；也可以只指定一个数加 $1$ 或减 $1$，请问他最少需要操作多少次能把这个数组变成回文数组？", "inputFormat": "输入的第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "**【样例说明】**\n\n第一次操作将 $a_1, a_2$ 加 $1$，变为 $2, 3, 3, 4$；\n\n后面两次操作将 $a_1$ 加 $1$，变为 $4,3,3,4$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1 \\le n \\le 10$；  \n对于所有评测用例，$1 \\le n \\le 10^5$，$-10^6 \\le a_i \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10903", "type": "P", "difficulty": 3, "samples": [["5 3\n1 2\n2 4\n3 5", "1\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "差分", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 商品库存管理", "background": "", "description": "在库存管理系统中，跟踪和调节商品库存量是关键任务之一。小蓝经营的仓库中存有多种商品，这些商品根据类别和规格被有序地分类并编号，编号范围从 $1$ 至 $n$。初始时，每种商品的库存量均为 $0$。\n\n为了高效地监控和调整库存量，小蓝的管理团队设计了 $m$ 个操作，每个操作涉及到一个特定的商品区间，即一段连续的商品编号范围（例如区间 $[L, R]$）。执行这些操作时，区间内每种商品的库存量都将增加 $1$。然而，在某些情况下，管理团队可能会决定不执行某些操作，使得这些操作涉及的商品区间内的库存量不会发生改变，维持原有的状态。\n\n现在，管理团队需要一个评估机制，来确定如果某个操作未被执行，那么最终会有多少种商品的库存量为 $0$。对此，请你为管理团队计算出，对于每个操作，如果不执行该操作而执行其它操作，库存量为 $0$ 的商品的种类数。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，分别表示商品的种类数和操作的个数。\n\n接下来的 $m$ 行，每行包含两个整数 $L$ 和 $R$，表示一个操作涉及的商品区间。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行的整数表示如果不执行第 $i$ 个操作，则最终库存量为 $0$ 的商品种类数。", "hint": "**【样例说明】**\n\n考虑不执行每个操作时，其余操作对商品库存的综合影响：\n\n- **不执行操作 $1$**：剩余的操作是操作 $2$（影响区间 $[2, 4]$）和操作 $3$（影响区间 $[3, 5]$）。执行这两个操作后，商品库存序列变为 $[0, 1, 2, 2, 1]$。在这种情况下，只有编号为 $1$ 的商品的库存量为 $0$。因此，库存量为 $0$ 的商品种类数为 $1$。\n\n- **不执行操作 $2$**：剩余的操作是操作 $1$（影响区间 $[1, 2]$）和操作 $3$（影响区间 $[3, 5]$）。执行这两个操作后，商品库存序列变为 $[1, 1, 1, 1, 1]$。在这种情况下，所有商品的库存量都不为 $0$。因此，库存量为 $0$ 的商品种类数为 $0$。\n\n- **不执行操作 $3$**：剩余的操作是操作 $1$（影响区间 $[1, 2]$）和操作 $2$（影响区间 $[2, 4]$）。执行这两个操作后，商品库存序列变为 $[1, 2, 1, 1, 0]$。在这种情况下，只有编号为 $5$ 的商品的库存量为 $0$。因此，库存量为 $0$ 的商品种类数为 $1$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1 \\le n,m \\le 5 \\times 10^3$，$1\\le L \\le R \\le n$。  \n对于所有评测用例，$1 \\le n,m \\le 3 \\times 10^5$，$1 \\le L \\le R \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 商品库存管理", "background": "", "description": "在库存管理系统中，跟踪和调节商品库存量是关键任务之一。小蓝经营的仓库中存有多种商品，这些商品根据类别和规格被有序地分类并编号，编号范围从 $1$ 至 $n$。初始时，每种商品的库存量均为 $0$。\n\n为了高效地监控和调整库存量，小蓝的管理团队设计了 $m$ 个操作，每个操作涉及到一个特定的商品区间，即一段连续的商品编号范围（例如区间 $[L, R]$）。执行这些操作时，区间内每种商品的库存量都将增加 $1$。然而，在某些情况下，管理团队可能会决定不执行某些操作，使得这些操作涉及的商品区间内的库存量不会发生改变，维持原有的状态。\n\n现在，管理团队需要一个评估机制，来确定如果某个操作未被执行，那么最终会有多少种商品的库存量为 $0$。对此，请你为管理团队计算出，对于每个操作，如果不执行该操作而执行其它操作，库存量为 $0$ 的商品的种类数。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，分别表示商品的种类数和操作的个数。\n\n接下来的 $m$ 行，每行包含两个整数 $L$ 和 $R$，表示一个操作涉及的商品区间。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行的整数表示如果不执行第 $i$ 个操作，则最终库存量为 $0$ 的商品种类数。", "hint": "**【样例说明】**\n\n考虑不执行每个操作时，其余操作对商品库存的综合影响：\n\n- **不执行操作 $1$**：剩余的操作是操作 $2$（影响区间 $[2, 4]$）和操作 $3$（影响区间 $[3, 5]$）。执行这两个操作后，商品库存序列变为 $[0, 1, 2, 2, 1]$。在这种情况下，只有编号为 $1$ 的商品的库存量为 $0$。因此，库存量为 $0$ 的商品种类数为 $1$。\n\n- **不执行操作 $2$**：剩余的操作是操作 $1$（影响区间 $[1, 2]$）和操作 $3$（影响区间 $[3, 5]$）。执行这两个操作后，商品库存序列变为 $[1, 1, 1, 1, 1]$。在这种情况下，所有商品的库存量都不为 $0$。因此，库存量为 $0$ 的商品种类数为 $0$。\n\n- **不执行操作 $3$**：剩余的操作是操作 $1$（影响区间 $[1, 2]$）和操作 $2$（影响区间 $[2, 4]$）。执行这两个操作后，商品库存序列变为 $[1, 2, 1, 1, 0]$。在这种情况下，只有编号为 $5$ 的商品的库存量为 $0$。因此，库存量为 $0$ 的商品种类数为 $1$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1 \\le n,m \\le 5 \\times 10^3$，$1\\le L \\le R \\le n$。  \n对于所有评测用例，$1 \\le n,m \\le 3 \\times 10^5$，$1 \\le L \\le R \\le n$。", "locale": "zh-CN"}}}
{"pid": "P10904", "type": "P", "difficulty": 3, "samples": [["5 4\n0 -3 -1 1 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "前缀和", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 挖矿", "background": "", "description": "小蓝正在数轴上挖矿，数轴上一共有 $n$ 个矿洞，第 $i$ 个矿洞的坐标为 $a_i$。小蓝从 $0$ 出发，每次可以向左或向右移动 $1$ 的距离，当路过一个矿洞时，就会进行挖矿作业，获得 $1$ 单位矿石，但一个矿洞不能被多次挖掘。小蓝想知道在\n移动距离不超过 $m$ 的前提下，最多能获得多少单位矿石？", "inputFormat": "输入的第一行包含两个正整数 $n,m$，用一个空格分隔。\n\n第二行包含 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "**【样例说明】**\n\n路径：$0\\to -1\\to 0\\to 1\\to 2$，可以对 $\\{0,-1,1,2\\}$ 四个矿洞挖掘并获得最多 $4$ 块矿石。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1 \\le n \\le 10^3$；  \n对于所有评测用例，$1 \\le n \\le 10^5$，$-10^6 \\le a_i \\le 10^6$，$1 \\le m \\le 2 \\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 挖矿", "background": "", "description": "小蓝正在数轴上挖矿，数轴上一共有 $n$ 个矿洞，第 $i$ 个矿洞的坐标为 $a_i$。小蓝从 $0$ 出发，每次可以向左或向右移动 $1$ 的距离，当路过一个矿洞时，就会进行挖矿作业，获得 $1$ 单位矿石，但一个矿洞不能被多次挖掘。小蓝想知道在\n移动距离不超过 $m$ 的前提下，最多能获得多少单位矿石？", "inputFormat": "输入的第一行包含两个正整数 $n,m$，用一个空格分隔。\n\n第二行包含 $n$ 个整数 $a_1, a_2,\\cdots, a_n$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "**【样例说明】**\n\n路径：$0\\to -1\\to 0\\to 1\\to 2$，可以对 $\\{0,-1,1,2\\}$ 四个矿洞挖掘并获得最多 $4$ 块矿石。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$1 \\le n \\le 10^3$；  \n对于所有评测用例，$1 \\le n \\le 10^5$，$-10^6 \\le a_i \\le 10^6$，$1 \\le m \\le 2 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10905", "type": "P", "difficulty": 3, "samples": [["3\ngmgqlq\npdlbll\naaa", "Yes\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 C] 回文字符串", "background": "", "description": "小蓝最近迷上了回文字符串，他有一个只包含小写字母的字符串 $S$，小蓝可以往字符串 $S$ 的开头处加入任意数目个指定字符：`l`、`q`、`b`（ASCII 码分别为：$108$、$113$、$98$）。小蓝想要知道他是否能通过这种方式把字符串 $S$ 转化为一个回文字符串。", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每组数据一行包含一个字符串 $S$。", "outputFormat": "输出 $T$ 行，每行包含一个字符串，依次表示每组数据的答案。如果可以将 $S$ 转化为一个回文字符串输出 `Yes`，否则输出 `No`。\n", "hint": "**【样例说明】**\n\n对于 `gmgqlq`，可以在前面加上 `qlq` => `qlqgmgqlq` 转化为一个回文字符串；\n\n对于 `pdlbll`，无法转化为一个回文字符串；\n\n对于 `aaa`，本身就是一个回文字符串。\n\n**【评测用例规模与约定】**\n\n对于 $50\\%$ 的评测用例，$1 \\le |S| \\le 1000$，其中 $|S_j|$ 表示字符串 $S$ 的长度；  \n对于所有评测用例，$1 \\le T \\le 10$，$1 \\le \\sum |S| \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 C] 回文字符串", "background": "", "description": "小蓝最近迷上了回文字符串，他有一个只包含小写字母的字符串 $S$，小蓝可以往字符串 $S$ 的开头处加入任意数目个指定字符：`l`、`q`、`b`（ASCII 码分别为：$108$、$113$、$98$）。小蓝想要知道他是否能通过这种方式把字符串 $S$ 转化为一个回文字符串。", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每组数据一行包含一个字符串 $S$。", "outputFormat": "输出 $T$ 行，每行包含一个字符串，依次表示每组数据的答案。如果可以将 $S$ 转化为一个回文字符串输出 `Yes`，否则输出 `No`。\n", "hint": "**【样例说明】**\n\n对于 `gmgqlq`，可以在前面加上 `qlq` => `qlqgmgqlq` 转化为一个回文字符串；\n\n对于 `pdlbll`，无法转化为一个回文字符串；\n\n对于 `aaa`，本身就是一个回文字符串。\n\n**【评测用例规模与约定】**\n\n对于 $50\\%$ 的评测用例，$1 \\le |S| \\le 1000$，其中 $|S_j|$ 表示字符串 $S$ 的长度；  \n对于所有评测用例，$1 \\le T \\le 10$，$1 \\le \\sum |S| \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10906", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "字符串", "2024", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 合法密码", "background": "", "description": "小蓝正在开发自己的 OJ 网站。他要求网站用户的密码必须符合以下条件：\n\n1. 长度大于等于 $8$ 个字符，小于等于 $16$ 个字符。\n2. 必须包含至少 $1$ 个数字字符和至少 $1$ 个符号字符。\n\n例如 `lanqiao2024!`、`+-*/0601`、`8((>w<))8` 都是合法的密码。\n\n而 `12345678`、`##**##**`、`abc0!#`、`lanqiao20240601!?` 都不是合法的密码。\n\n请你计算以下的字符串中，有多少个子串可以当作合法密码？只要两个子串的开头字符和末尾字符在原串中的位置不同，就算作不同的子串。\n\n字符串为：\n\n```plain\nkfdhtshmrw4nxg#f44ehlbn33ccto#mwfn2waebry#3qd1ubwyhcyuavuajb#vyecsycuzsmwp31ipzah#catatja3kaqbcss2th\n```", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 合法密码", "background": "", "description": "小蓝正在开发自己的 OJ 网站。他要求网站用户的密码必须符合以下条件：\n\n1. 长度大于等于 $8$ 个字符，小于等于 $16$ 个字符。\n2. 必须包含至少 $1$ 个数字字符和至少 $1$ 个符号字符。\n\n例如 `lanqiao2024!`、`+-*/0601`、`8((>w<))8` 都是合法的密码。\n\n而 `12345678`、`##**##**`、`abc0!#`、`lanqiao20240601!?` 都不是合法的密码。\n\n请你计算以下的字符串中，有多少个子串可以当作合法密码？只要两个子串的开头字符和末尾字符在原串中的位置不同，就算作不同的子串。\n\n字符串为：\n\n```plain\nkfdhtshmrw4nxg#f44ehlbn33ccto#mwfn2waebry#3qd1ubwyhcyuavuajb#vyecsycuzsmwp31ipzah#catatja3kaqbcss2th\n```", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10907", "type": "P", "difficulty": 3, "samples": [["4\n0 0 4 4\n0 4 4 0\n2 0 0 4\n2 1 2 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "数论", "哈希 hashing", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 蚂蚁开会", "background": "", "description": "二维平面上有 $n$ 只蚂蚁，每只蚂蚁有一条线段作为活动范围，第 $i$ 只蚂蚁的活动范围的两个端点为 $(u_i^\nx,u_i^y), (v_i^x,v_i^y)$。现在蚂蚁们考虑在这些线段的交点处设置会议中心。为了尽可能节省经费，它们决定只在所有交点为整点的地方设置会议中心，请问需要设置多少个会议中心？", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n$ 行，每行 $4$ 个由空格分开的整数表示 $u_i^x, u_i^y,v_i^x,v_i^y$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n所有线段之间共有 $3$ 个不同的交点：$(0, 4), (\\frac{4}{3}, \\frac{4}{3}), (2, 2)$, 其中整点有 $2$ 个：$(0, 4), (2, 2)$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $0 \\le u_i^x, u_i^y, v_i^x, v_i^y\\le 100$。  \n对于 $100\\%$ 的评测用例，保证 $n \\le 500$，$0 \\le u_i^x, u_i^y, v_i^x, v_i^y \\le 10000$，保证任意蚂蚁的活动范围不会退化成一个点，**不保证**任意两条线段之间交点数量有限。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 蚂蚁开会", "background": "", "description": "二维平面上有 $n$ 只蚂蚁，每只蚂蚁有一条线段作为活动范围，第 $i$ 只蚂蚁的活动范围的两个端点为 $(u_i^\nx,u_i^y), (v_i^x,v_i^y)$。现在蚂蚁们考虑在这些线段的交点处设置会议中心。为了尽可能节省经费，它们决定只在所有交点为整点的地方设置会议中心，请问需要设置多少个会议中心？", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n$ 行，每行 $4$ 个由空格分开的整数表示 $u_i^x, u_i^y,v_i^x,v_i^y$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n所有线段之间共有 $3$ 个不同的交点：$(0, 4), (\\frac{4}{3}, \\frac{4}{3}), (2, 2)$, 其中整点有 $2$ 个：$(0, 4), (2, 2)$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $0 \\le u_i^x, u_i^y, v_i^x, v_i^y\\le 100$。  \n对于 $100\\%$ 的评测用例，保证 $n \\le 500$，$0 \\le u_i^x, u_i^y, v_i^x, v_i^y \\le 10000$，保证任意蚂蚁的活动范围不会退化成一个点，**不保证**任意两条线段之间交点数量有限。", "locale": "zh-CN"}}}
{"pid": "P10908", "type": "P", "difficulty": 3, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["数学", "2024", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 选数概率", "background": "", "description": "一个数组中有 $a$ 个 $1$，$b$ 个 $2$，$c$ 个 $3$。设 $P_{i,j}$ 表示在数组中随机选取两个数，其中一个数为 $i$，另一个数为 $j$ 的概率。比如 $P_{1,2} = \\dfrac{ab}{C(a+b+c,2)}$，其中 $C(N, M)$ 为组合数，表示从 $N$ 个不同元素中任取 $M$ 个的方案数。\n\n\n当 $a=\\text{?},b=\\text{?},c=\\text{?}$ 时，满足 $P_{1,2}=\\dfrac{517}{2091},P_{2,3}=\\dfrac{2632}{10455},P_{1,3}=\\dfrac{308}{2091}$，且 $a + b + c$ 最小。保证 $a + b + c$ 最小的解是唯一的。\n\n你需要提交一个格式为 $a,b,c$ 的字符串。例如假设你计算的结果是 $a =12, b = 34, c = 56$，那么你需要提交的字符串是 `12,34,56`。", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 选数概率", "background": "", "description": "一个数组中有 $a$ 个 $1$，$b$ 个 $2$，$c$ 个 $3$。设 $P_{i,j}$ 表示在数组中随机选取两个数，其中一个数为 $i$，另一个数为 $j$ 的概率。比如 $P_{1,2} = \\dfrac{ab}{C(a+b+c,2)}$，其中 $C(N, M)$ 为组合数，表示从 $N$ 个不同元素中任取 $M$ 个的方案数。\n\n\n当 $a=\\text{?},b=\\text{?},c=\\text{?}$ 时，满足 $P_{1,2}=\\dfrac{517}{2091},P_{2,3}=\\dfrac{2632}{10455},P_{1,3}=\\dfrac{308}{2091}$，且 $a + b + c$ 最小。保证 $a + b + c$ 最小的解是唯一的。\n\n你需要提交一个格式为 $a,b,c$ 的字符串。例如假设你计算的结果是 $a =12, b = 34, c = 56$，那么你需要提交的字符串是 `12,34,56`。", "inputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "outputFormat": "这是一道结果填空题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10909", "type": "P", "difficulty": 3, "samples": [["5 3\n1 3 5 16 21", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2024", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 立定跳远", "background": "", "description": "在运动会上，小明从数轴的原点开始向正方向立定跳远。项目设置了 $n$ 个检查点 $a_1, a_2, \\cdots , a_n$ 且 $a_i \\ge a_{i−1} > 0$。小明必须先后跳跃到每个检查点上且只能跳跃到检查点上。同时，小明可以自行再增加 $m$ 个检查点让自己跳得更轻松。\n\n在运动会前，小明制定训练计划让自己单次跳跃的最远距离达到 $L$，并且学会一个爆发技能可以在运动会时使用一次，使用时可以在该次跳跃时的最远距离变为 $2L$。小明想知道，$L$ 的最小值是多少可以完成这个项目？", "inputFormat": "输入共 $2$ 行。\n\n第一行为两个正整数 $n,m$。\n\n第二行为 $n$ 个由空格分开的正整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n增加检查点 $10, 13, 19$，因此每次跳跃距离为 $1,2, 2, 5, 3, 3, 3, 2$，在第三次跳跃时使用技能即可。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n \\le 10^2$，$m \\le 10^3$，$a_i \\le 10^3$。  \n对于 $100\\%$ 的评测用例，保证 $2 \\le n \\le 10^5$，$m \\le 10^8$，$0 < a_i \\le 10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 立定跳远", "background": "", "description": "在运动会上，小明从数轴的原点开始向正方向立定跳远。项目设置了 $n$ 个检查点 $a_1, a_2, \\cdots , a_n$ 且 $a_i \\ge a_{i−1} > 0$。小明必须先后跳跃到每个检查点上且只能跳跃到检查点上。同时，小明可以自行再增加 $m$ 个检查点让自己跳得更轻松。\n\n在运动会前，小明制定训练计划让自己单次跳跃的最远距离达到 $L$，并且学会一个爆发技能可以在运动会时使用一次，使用时可以在该次跳跃时的最远距离变为 $2L$。小明想知道，$L$ 的最小值是多少可以完成这个项目？", "inputFormat": "输入共 $2$ 行。\n\n第一行为两个正整数 $n,m$。\n\n第二行为 $n$ 个由空格分开的正整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n增加检查点 $10, 13, 19$，因此每次跳跃距离为 $1,2, 2, 5, 3, 3, 3, 2$，在第三次跳跃时使用技能即可。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n \\le 10^2$，$m \\le 10^3$，$a_i \\le 10^3$。  \n对于 $100\\%$ 的评测用例，保证 $2 \\le n \\le 10^5$，$m \\le 10^8$，$0 < a_i \\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P10910", "type": "P", "difficulty": 2, "samples": [["4 3\nabbc\ncba", "aabbbcc"], ["7 3\nlanqiao\nbei", "beilanqiao"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "排序", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 最小字符串", "background": "", "description": "给定一个长度为 $N$ 且只包含小写字母的字符串 $S$，和 $M$ 个小写字母 $c_1, c_2, \\cdots, c_M$。现在你要把 $M$ 个小写字母全部插入到字符串 $S$ 中，每个小写字母都可以插入到任意位置。\n\n请问能得到的字典序最小的字符串是什么？", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n第二行包含一个长度为 $N$ 的字符串 $S$。\n第三行包含 $M$ 个小写字母 $c_1, c_2, \\cdots, c_M$。", "outputFormat": "输出一个长度为 $N + M$ 的字符串代表答案。", "hint": "**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$M = 1$。  \n对于 $100\\%$ 的评测用例，$1 \\le N, M \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 最小字符串", "background": "", "description": "给定一个长度为 $N$ 且只包含小写字母的字符串 $S$，和 $M$ 个小写字母 $c_1, c_2, \\cdots, c_M$。现在你要把 $M$ 个小写字母全部插入到字符串 $S$ 中，每个小写字母都可以插入到任意位置。\n\n请问能得到的字典序最小的字符串是什么？", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n第二行包含一个长度为 $N$ 的字符串 $S$。\n第三行包含 $M$ 个小写字母 $c_1, c_2, \\cdots, c_M$。", "outputFormat": "输出一个长度为 $N + M$ 的字符串代表答案。", "hint": "**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，$M = 1$。  \n对于 $100\\%$ 的评测用例，$1 \\le N, M \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10911", "type": "P", "difficulty": 3, "samples": [["5 3\n11 12 13 14 15", "67"], ["6 2\n23 8 11 19 16 35", "134"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 数位翻转", "background": "", "description": "小明创造了一个函数 $f(x)$ 用来翻转 $x$ 的二进制的数位（无前导 $0$）。比如 $f (11) = 13$，因为 $11 = (1011)_2$，将其左右翻转后，变为 $13 = (1101)_2$；再比如 $f (3) = 3$，$f (0) = 0$，$f (2) = f (4) = f (8) = 1$ 等等。\n\n小明随机出了一个长度为 $n$ 的整数数组 $\\{a_1, a_2,\\cdots, a_n\\}$，他想知道，在这个数组中选择最多 $m$ 个不相交的区间，将这些区间内的数进行二进制数位翻转（将\n$a_i$ 变为 $f (a_i)$）后，整个数组的和最大是多少？", "inputFormat": "输入共 $2$ 行。\n\n第一行为两个正整数 $n,m$。\n\n第二行为 $n$ 个由空格分开的整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明 1】**\n\n只翻转 $a_1$，和为 $13 + 12 + 13 + 14 + 15 = 67$。\n\n**【样例说明 2】**\n\n翻转区间 $[a_3, a_4]$ 和 $[a_6]$，和为 $23 + 8 + 13 + 25 + 16 + 49 = 134$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n,m \\le 20$。  \n对于 $100\\%$ 的评测用例，保证 $n,m \\le 1000$，$0 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 数位翻转", "background": "", "description": "小明创造了一个函数 $f(x)$ 用来翻转 $x$ 的二进制的数位（无前导 $0$）。比如 $f (11) = 13$，因为 $11 = (1011)_2$，将其左右翻转后，变为 $13 = (1101)_2$；再比如 $f (3) = 3$，$f (0) = 0$，$f (2) = f (4) = f (8) = 1$ 等等。\n\n小明随机出了一个长度为 $n$ 的整数数组 $\\{a_1, a_2,\\cdots, a_n\\}$，他想知道，在这个数组中选择最多 $m$ 个不相交的区间，将这些区间内的数进行二进制数位翻转（将\n$a_i$ 变为 $f (a_i)$）后，整个数组的和最大是多少？", "inputFormat": "输入共 $2$ 行。\n\n第一行为两个正整数 $n,m$。\n\n第二行为 $n$ 个由空格分开的整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明 1】**\n\n只翻转 $a_1$，和为 $13 + 12 + 13 + 14 + 15 = 67$。\n\n**【样例说明 2】**\n\n翻转区间 $[a_3, a_4]$ 和 $[a_6]$，和为 $23 + 8 + 13 + 25 + 16 + 49 = 134$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n,m \\le 20$。  \n对于 $100\\%$ 的评测用例，保证 $n,m \\le 1000$，$0 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10912", "type": "P", "difficulty": 4, "samples": [["6\n1 2\n1 3\n2 4\n2 5\n3 6\n3 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2024", "组合数学", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 数星星", "background": "", "description": "小明正在一棵树上数星星，这棵树有 $n$ 个结点 $1, 2,\\cdots, n$。他定义树上的一个子图 $G$ 是一颗星星，当且仅当 $G$ 同时满足：\n\n1. $G$ 是一棵树。\n2. $G$ 中存在某个结点，其度数为 $|V_G| - 1$。其中 $|V_G|$ 表示这个子图含有的结点数。\n\n两颗星星不相同当且仅当它们包含的结点集合 $V_G$ 不完全相同。小明想知道这棵树上有多少颗不同的星星包含的结点的数量在区间 $[L, R]$ 中，答案对 $1000000007$ 取模。", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n - 1$ 行，每行两个正整数表示树上的一条边。\n\n第 $n + 1$ 行，两个正整数 $L, R$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n包含 $3$ 个结点的星星有 $5$ 个，它们的结点集合分别为 $\\{1, 2, 3\\}$，$\\{1, 2, 4\\}$，$\\{1, 2, 5\\}$，$\\{2, 4, 5\\}$，$\\{1, 3, 6\\}$。\n\n包含 $4$ 个结点的星星有 $1$ 个，它的结点集合为 $\\{1, 2, 4, 5\\}$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n \\le 20$。  \n对于 $100\\%$ 的评测用例，保证 $n \\le 10^5$，$1 \\le L \\le R \\le n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 数星星", "background": "", "description": "小明正在一棵树上数星星，这棵树有 $n$ 个结点 $1, 2,\\cdots, n$。他定义树上的一个子图 $G$ 是一颗星星，当且仅当 $G$ 同时满足：\n\n1. $G$ 是一棵树。\n2. $G$ 中存在某个结点，其度数为 $|V_G| - 1$。其中 $|V_G|$ 表示这个子图含有的结点数。\n\n两颗星星不相同当且仅当它们包含的结点集合 $V_G$ 不完全相同。小明想知道这棵树上有多少颗不同的星星包含的结点的数量在区间 $[L, R]$ 中，答案对 $1000000007$ 取模。", "inputFormat": "输入共 $n + 1$ 行。\n\n第一行为一个正整数 $n$。\n\n后面 $n - 1$ 行，每行两个正整数表示树上的一条边。\n\n第 $n + 1$ 行，两个正整数 $L, R$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n包含 $3$ 个结点的星星有 $5$ 个，它们的结点集合分别为 $\\{1, 2, 3\\}$，$\\{1, 2, 4\\}$，$\\{1, 2, 5\\}$，$\\{2, 4, 5\\}$，$\\{1, 3, 6\\}$。\n\n包含 $4$ 个结点的星星有 $1$ 个，它的结点集合为 $\\{1, 2, 4, 5\\}$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n \\le 20$。  \n对于 $100\\%$ 的评测用例，保证 $n \\le 10^5$，$1 \\le L \\le R \\le n$。\n", "locale": "zh-CN"}}}
{"pid": "P10913", "type": "P", "difficulty": 4, "samples": [["8 12 9\n18 22 1\n3 17 2\n21 28 1\n7 18 2\n10 2 2\n4 24 2\n19 13 1\n14 15 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "优先队列", "双指针 two-pointer", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 套手镯", "background": "", "description": "小蓝在 LQ 集市上发现一个套手镯的游戏，在一个大小为 $10^8 \\times 10^8$ 矩形平面上摆放着 $N$ 个圆形的手镯。玩家可以将一个大小为 $w \\times h$ 的矩形方框放置在这个平面上（玩家只可以沿着水平/垂直方向放置方框，即可以将方框旋转 $90$ 度，但不可以旋转至其他角度），位于这个矩形方框内部的手镯就是玩家获得的奖励。\n\n可以将这个矩形平面看作是一个二维坐标系，左下角的坐标为  $(0, 0)$。手镯和方框的厚度可以忽略不计, 允许多个手镯重叠放置。\n\n小蓝想要尝试一次，请问他最多可以获得多少手镯？", "inputFormat": "第一行输入三个整数 $N$、$w$、$h$。\n\n接下来输入 $N$ 行，每行三个整数 $x, y, r$，表示第 $i$ 个手镯的圆心坐标和半径。", "outputFormat": "输出一个整数表示答案。", "hint": "**【样例说明】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j9uggngv.png)\n\n上图展示了一种可能的答案。\n\n**【评测用例规模与约定】**\n\n对于 $50\\%$ 的评测用例：$1 \\le N \\le 100$，$1 \\le w, h, x, y, r \\le 200$。  \n对于 $100\\%$ 的评测用例：$1 \\le N \\le 1000$，$1 \\le w, h, x, y, r \\le 10^8$，$1 \\le \\min\\{w, h\\} \\le 200$。保证所有手镯都位于平面内部。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 套手镯", "background": "", "description": "小蓝在 LQ 集市上发现一个套手镯的游戏，在一个大小为 $10^8 \\times 10^8$ 矩形平面上摆放着 $N$ 个圆形的手镯。玩家可以将一个大小为 $w \\times h$ 的矩形方框放置在这个平面上（玩家只可以沿着水平/垂直方向放置方框，即可以将方框旋转 $90$ 度，但不可以旋转至其他角度），位于这个矩形方框内部的手镯就是玩家获得的奖励。\n\n可以将这个矩形平面看作是一个二维坐标系，左下角的坐标为  $(0, 0)$。手镯和方框的厚度可以忽略不计, 允许多个手镯重叠放置。\n\n小蓝想要尝试一次，请问他最多可以获得多少手镯？", "inputFormat": "第一行输入三个整数 $N$、$w$、$h$。\n\n接下来输入 $N$ 行，每行三个整数 $x, y, r$，表示第 $i$ 个手镯的圆心坐标和半径。", "outputFormat": "输出一个整数表示答案。", "hint": "**【样例说明】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j9uggngv.png)\n\n上图展示了一种可能的答案。\n\n**【评测用例规模与约定】**\n\n对于 $50\\%$ 的评测用例：$1 \\le N \\le 100$，$1 \\le w, h, x, y, r \\le 200$。  \n对于 $100\\%$ 的评测用例：$1 \\le N \\le 1000$，$1 \\le w, h, x, y, r \\le 10^8$，$1 \\le \\min\\{w, h\\} \\le 200$。保证所有手镯都位于平面内部。", "locale": "zh-CN"}}}
{"pid": "P10914", "type": "P", "difficulty": 3, "samples": [["5\n4 3 5 2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "蓝桥杯国赛", "bitset"], "title": "[蓝桥杯 2024 国 B] 跳石头", "background": "", "description": "小明正在和朋友们玩跳石头的小游戏，一共有 $n$ 块石头按 $1$ 到 $n$ 顺序排成一排，第 $i$ 块石头上写有正整数权值 $c_i$。\n\n如果某一时刻小明在第 $j$ 块石头，那么他可以选择跳向第 $j + c_j$ 块石头（前提 $j + c_j \\le n$）或者跳向第 $2j$ 块石头（前提 $2j \\le n$），没有可跳跃的目标时游戏结束。\n\n假如小明选择从第 $x$ 块石头开始跳跃，如果某块石头**有可能**被小明经过（“经过” 指存在某一时刻小明在这个石头处），则将这块石头的权值纳入得分集合 $S_x$，那么小明从第 $x$ 块石头开始跳跃的得分为 $|S_x|$。\n\n比如如果小明从第 $x$ 块石头出发，所有可能经过的石头上的权值分别为 $5,3,5,2, 3$，那么 $S_x = \\{5, 3, 2\\}$ 得分为 $|S_x| = 3$。小明可以任选一块石头开始跳跃，请求出小明最多能获得的分数。", "inputFormat": "输入共 $2$ 行。\n\n第一行为一个正整数 $n$。\n\n第二行为 $n$ 个由空格分开的正整数 $c_1, c_2,\\cdots, c_n$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n从第一块石头出发得分最多，路径有以下几种：\n\n1. $1$ 号 $\\to 5$ 号：选择从 $1$ 号跳到 $1 + c_1=5$ 号。\n2. $1$ 号 $\\to 2$ 号 $\\to 5$ 号：第一次选择从 $1$ 号跳到 $2 \\times 1=2$ 号，第二次选择从 $2$ 号跳到 $2 + c_2 = 5$ 号。\n3. $1$ 号 $\\to 2$ 号 $\\to 4$ 号：第一次选择从 $1$ 号跳到 $2 \\times 1=2$ 号，第二次选择从 $2$ 号跳到 $2 \\times 2 = 4$ 号。\n\n所以所有可能经过的石头的权值的集合为 $S_1 = \\{c_1, c_2, c_4, c_5\\} = \\{4, 3, 2, 1\\}$，得分为 $|S_1| = 4$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n \\le 20$。  \n对于 $100\\%$ 的评测用例，保证 $n \\le 40000$，$c_i \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 跳石头", "background": "", "description": "小明正在和朋友们玩跳石头的小游戏，一共有 $n$ 块石头按 $1$ 到 $n$ 顺序排成一排，第 $i$ 块石头上写有正整数权值 $c_i$。\n\n如果某一时刻小明在第 $j$ 块石头，那么他可以选择跳向第 $j + c_j$ 块石头（前提 $j + c_j \\le n$）或者跳向第 $2j$ 块石头（前提 $2j \\le n$），没有可跳跃的目标时游戏结束。\n\n假如小明选择从第 $x$ 块石头开始跳跃，如果某块石头**有可能**被小明经过（“经过” 指存在某一时刻小明在这个石头处），则将这块石头的权值纳入得分集合 $S_x$，那么小明从第 $x$ 块石头开始跳跃的得分为 $|S_x|$。\n\n比如如果小明从第 $x$ 块石头出发，所有可能经过的石头上的权值分别为 $5,3,5,2, 3$，那么 $S_x = \\{5, 3, 2\\}$ 得分为 $|S_x| = 3$。小明可以任选一块石头开始跳跃，请求出小明最多能获得的分数。", "inputFormat": "输入共 $2$ 行。\n\n第一行为一个正整数 $n$。\n\n第二行为 $n$ 个由空格分开的正整数 $c_1, c_2,\\cdots, c_n$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n从第一块石头出发得分最多，路径有以下几种：\n\n1. $1$ 号 $\\to 5$ 号：选择从 $1$ 号跳到 $1 + c_1=5$ 号。\n2. $1$ 号 $\\to 2$ 号 $\\to 5$ 号：第一次选择从 $1$ 号跳到 $2 \\times 1=2$ 号，第二次选择从 $2$ 号跳到 $2 + c_2 = 5$ 号。\n3. $1$ 号 $\\to 2$ 号 $\\to 4$ 号：第一次选择从 $1$ 号跳到 $2 \\times 1=2$ 号，第二次选择从 $2$ 号跳到 $2 \\times 2 = 4$ 号。\n\n所以所有可能经过的石头的权值的集合为 $S_1 = \\{c_1, c_2, c_4, c_5\\} = \\{4, 3, 2, 1\\}$，得分为 $|S_1| = 4$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $n \\le 20$。  \n对于 $100\\%$ 的评测用例，保证 $n \\le 40000$，$c_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P10915", "type": "P", "difficulty": 4, "samples": [["abcdebijbba", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2024", "哈希 hashing", "KMP 算法", "蓝桥杯国赛"], "title": "[蓝桥杯 2024 国 B] 最长回文前后缀", "background": null, "description": "小明特别喜欢回文串，然而回文串太少见了，因此他定义了一个字符串的相同长度的、不相交的前缀和后缀是“回文前后缀”，当且仅当这个前缀和后缀拼起来是个回文串。那么字符串 $S=c_1c_2c_3,\\cdots,c_n$ 的“最长回文前后缀” 的长度 $L(S)$ 即为 $\\argmax\\limits_{x}{S_{[1,x]} = (S_{[n-x+1,n]})^T}$ 其中 $S_{[i,j]}$ 表示 $S$ 的一个子串 $c_ic_{i+1}\\cdots c_j$，$S^T$ 表示翻转 $S$ 得到的字符串。\n\n对于一个给定的字符串 $S$，小明希望对其进行改造使得 $L(S ^\\prime)$ 尽可能大。改造允许将字符串中一个任意长度的子串删除。比如删除 $S = \\texttt{abcdebijbba}$ 中\n的子串 $S_{[3,5]}$ 后 $S$ 变成了 $\\texttt{abbijbba}$。\n\n小明想知道改造后的新字符串 $S^\\prime$ 的“最长回文前后缀”的长度 $L(S^\\prime)$ 最大是多少？", "inputFormat": "输入共 $1$ 行，一个字符串 $S$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n如题干中的方案删除 $S_{[3,5]}$ 后，$S^\\prime = \\texttt{abbijbba}$，$L(S^\\prime) = 3$。\n\n**【评测用例规模与约定】**\n对于 $20\\%$ 的评测用例，保证 $|S| \\le 500$。  \n对于 $100\\%$ 的评测用例，保证 $|S| \\le 500000$，$S$ 仅包含小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 国 B] 最长回文前后缀", "background": null, "description": "小明特别喜欢回文串，然而回文串太少见了，因此他定义了一个字符串的相同长度的、不相交的前缀和后缀是“回文前后缀”，当且仅当这个前缀和后缀拼起来是个回文串。那么字符串 $S=c_1c_2c_3,\\cdots,c_n$ 的“最长回文前后缀” 的长度 $L(S)$ 即为 $\\argmax\\limits_{x}{S_{[1,x]} = (S_{[n-x+1,n]})^T}$ 其中 $S_{[i,j]}$ 表示 $S$ 的一个子串 $c_ic_{i+1}\\cdots c_j$，$S^T$ 表示翻转 $S$ 得到的字符串。\n\n对于一个给定的字符串 $S$，小明希望对其进行改造使得 $L(S ^\\prime)$ 尽可能大。改造允许将字符串中一个任意长度的子串删除。比如删除 $S = \\texttt{abcdebijbba}$ 中\n的子串 $S_{[3,5]}$ 后 $S$ 变成了 $\\texttt{abbijbba}$。\n\n小明想知道改造后的新字符串 $S^\\prime$ 的“最长回文前后缀”的长度 $L(S^\\prime)$ 最大是多少？", "inputFormat": "输入共 $1$ 行，一个字符串 $S$。", "outputFormat": "输出共 $1$ 行，一个整数表示答案。", "hint": "**【样例说明】**\n\n如题干中的方案删除 $S_{[3,5]}$ 后，$S^\\prime = \\texttt{abbijbba}$，$L(S^\\prime) = 3$。\n\n**【评测用例规模与约定】**\n对于 $20\\%$ 的评测用例，保证 $|S| \\le 500$。  \n对于 $100\\%$ 的评测用例，保证 $|S| \\le 500000$，$S$ 仅包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P10916", "type": "P", "difficulty": 3, "samples": [["3\n3 1 2", "3 2 2"], ["6\n3 6 4 1 5 2", "6 6 5 5 5 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "最大公约数 gcd"], "title": "椰子", "background": "众所周知，椰子是一种椰子，但这和题目好像没什么关系。", "description": "给出一个长度为 $n$ 的序列 $a$，我们保证 $1\\sim n$ 中的每一个数都恰好在 $a$ 中出现了一次，对于每一个 $1\\le i\\le n$，求出在序列中将值为 $i$ 的数的值修改成 $1$ 后，序列有多少种不同的区间 $\\gcd$ 的值。\n\n严格来说，记将值为 $x$ 的数修改为 $1$ 后的序列为 $A^x$。集合 $S_x=\\{\\gcd\\limits_{i=l}^r(A^x_i)|1\\le l\\le r\\le n\\}$，求出所有 $|S_i|$ 的值。", "inputFormat": "第一行一个正整数 $n$，表示排列的长度。\n\n接下来一行 $n$ 个正整数，表示序列 $a$。", "outputFormat": "一行一共 $n$ 个整数，第 $i$ 个数表示在把值为 $i$ 的数改成 $1$ 后，序列有多少种不同的区间 $\\gcd$ 的值。", "hint": "### 样例解释 1\n\n对于将 $1$ 变成 $1$，有 $\\{1,2,3\\}$ 共 $3$ 种不同的区间 $\\gcd$ 值，分别可以对应区间 $[1,3],[3,3],[1,1]$。\n\n对于将 $2$ 变成 $1$，有 $\\{1,3\\}$ 共 $2$ 种不同的区间 $\\gcd$ 值，分别可以对应区间 $[2,3],[1,1]$。\n\n对于将 $3$ 变成 $1$，有 $\\{1,2\\}$ 共 $2$ 种不同的区间 $\\gcd$ 值，分别可以对应区间 $[1,2],[3,3]$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n| $\\text{Subtask}$ | 分数 | 数据范围 | 特殊性质 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $n\\le 20$ | 无特殊限制 |\n| $2$ | $20$ | $n\\le 200$ | 无特殊限制 |\n| $3$ | $30$ | $n\\le 2000$ | 无特殊限制 |\n| $4$ | $20$ | 无特殊限制 | $A$ |\n| $5$ | $20$ | 无特殊限制 | 无特殊限制 |\n\n$A$：对于所有 $1\\le i\\le n$，有 $a_i=i$。\n\n对于所有的数据，$2\\le n\\le 5\\times 10^5$，我们保证 $1\\sim n$ 中的每一个数都恰好在 $a$ 中出现了一次。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "椰子", "background": "众所周知，椰子是一种椰子，但这和题目好像没什么关系。", "description": "给出一个长度为 $n$ 的序列 $a$，我们保证 $1\\sim n$ 中的每一个数都恰好在 $a$ 中出现了一次，对于每一个 $1\\le i\\le n$，求出在序列中将值为 $i$ 的数的值修改成 $1$ 后，序列有多少种不同的区间 $\\gcd$ 的值。\n\n严格来说，记将值为 $x$ 的数修改为 $1$ 后的序列为 $A^x$。集合 $S_x=\\{\\gcd\\limits_{i=l}^r(A^x_i)|1\\le l\\le r\\le n\\}$，求出所有 $|S_i|$ 的值。", "inputFormat": "第一行一个正整数 $n$，表示排列的长度。\n\n接下来一行 $n$ 个正整数，表示序列 $a$。", "outputFormat": "一行一共 $n$ 个整数，第 $i$ 个数表示在把值为 $i$ 的数改成 $1$ 后，序列有多少种不同的区间 $\\gcd$ 的值。", "hint": "### 样例解释 1\n\n对于将 $1$ 变成 $1$，有 $\\{1,2,3\\}$ 共 $3$ 种不同的区间 $\\gcd$ 值，分别可以对应区间 $[1,3],[3,3],[1,1]$。\n\n对于将 $2$ 变成 $1$，有 $\\{1,3\\}$ 共 $2$ 种不同的区间 $\\gcd$ 值，分别可以对应区间 $[2,3],[1,1]$。\n\n对于将 $3$ 变成 $1$，有 $\\{1,2\\}$ 共 $2$ 种不同的区间 $\\gcd$ 值，分别可以对应区间 $[1,2],[3,3]$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n| $\\text{Subtask}$ | 分数 | 数据范围 | 特殊性质 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $n\\le 20$ | 无特殊限制 |\n| $2$ | $20$ | $n\\le 200$ | 无特殊限制 |\n| $3$ | $30$ | $n\\le 2000$ | 无特殊限制 |\n| $4$ | $20$ | 无特殊限制 | $A$ |\n| $5$ | $20$ | 无特殊限制 | 无特殊限制 |\n\n$A$：对于所有 $1\\le i\\le n$，有 $a_i=i$。\n\n对于所有的数据，$2\\le n\\le 5\\times 10^5$，我们保证 $1\\sim n$ 中的每一个数都恰好在 $a$ 中出现了一次。", "locale": "zh-CN"}}}
{"pid": "P10917", "type": "P", "difficulty": 5, "samples": [["0\n3 4\n.#..\n..#.\n....\n3 4 1 2 \n2 4\n1 4\n2 1", "3 -1 2 1\n2 3 -1 1\n3 2 1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "广度优先搜索 BFS"], "title": "电王的传送迷宫", "background": "电王天天玩传送门。", "description": "给出一个大小为 $n\\times m$ 的二维网格图。\n\n网格上的 `.` 是可以通行的路径，`#` 是不能通行的障碍。\n\n你每次可以走到一个与当前位置四连通的且不超过边界的点。\n\n严格来说，若你当前在点 $(x,y)$，你可以走到 $(x-1,y),(x+1,y),(x,y-1),(x,y+1)$ 中的一个，并且保证在任意时刻你的坐标 $(x,y)$ 应该满足 $1\\le x\\le n,1\\le y\\le m$。\n\n我们从起点 $(sx,sy)$ 出发，你希望知道到达任意一个位置至少要走几步。\n\n但这太简单了，于是精通传送门的电王在这个网格图上建造了 $p$ 个传送门，它们的坐标分别为 $(a_1,b_1),(a_2,b_2),...,(a_p,b_p)$。\n\n而电王也设计了 $q$ 个终点，它们的坐标分别为 $(c_1,d_1),(c_2,d_2),...,(c_q,d_q)$。\n\n假如你使用了 $i$ 次传送门，当你到达任意一个传送门，你可以选择直接传送到点 $(c_{i+1},d_{i+1})$。而第 $q$ 次传送后，所有的传送门都会失效。\n\n**所以，传送到的位置只与你传送的次数有关，而与你到达了哪个传送门没有任何关系，我们可以认为所有传送门都是等价的。**\n\n**保证 $p$ 个传送门和 $q$ 个终点的位置都不是障碍。**\n\n保证对于任意输入给出的坐标对应的位置上都是可以通行的路径，且这些坐标一定两两不同。\n\n但电王有的时候并不想知道到去往任意点最少要移动几步，可能他只想知道到一个终点 $(tx,ty)$ 的最少移动步数，我们会在输入格式中了解这个测试点电王的喜好（保证 $tx,ty$ 不是一个障碍）。", "inputFormat": "第一行输入一个正整数 $opt$。\n\n第二行两个正整数 $n,m$，表示网格图的大小。\n\n然后的 $n$ 行，每行 $m$ 个字符，用来描述这个网格的形态。\n\n下一行若干个正整数，前四个数分别表示 $sx,sy,p,q$，若 $opt=1$，我们还会额外输入两个数 $tx,ty$，表示电王只想知道从起点到 $(tx,ty)$ 的最少移动步数。\n\n接下来 $p$ 行，每行两个正整数，分别表示 $a_i,b_i$ 的值。\n\n最后 $q$ 行，每行两个正整数，分别表示 $c_i,d_i$ 的值。", "outputFormat": "若 $opt=0$，输出一个 $n\\times m$ 的数组矩阵。第 $i$ 行 $j$ 列的数表示从起点 $(sx,sy)$ 到达 $(i,j)$ 最少移动几步，如果不可能到达或者这个地方是一个障碍，输出 `-1`。\n\n否则输出一个数，表示从起点 $(sx,sy)$ 到达 $tx,ty$ 最少移动几步，如果不可能到达输出 `-1`。\n\n**注意：使用传送门改变位置的操作，不算入移动的步数。**", "hint": "样例解释：\n\n我们以从起点 $(3,4)$ 去往 $(1,1)$ 为例：首先 $(3,4)\\to(2,4)$，然后使用传送门，第一次传送到 $(1,4)$。然后 $(1,4)\\to (2,4)$，第二次使用传送门，到达点 $(2,1)$，最后 $(2,1)\\to(1,1)$，我们使用了两次传送门，行走了 $3$ 步，所以这个路径方案的移动次数是 $3$，可以证明不存在比这更优的方案了。\n\n**本题采用捆绑测试**。\n\n| $\\text{Subtask}$ | 分数 | $n,m,p,q$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $p=q=0$ | 无特殊限制 |\n| $2$ | $20$ | $p=1$ | 无特殊限制 |\n| $3$ | $20$ | $1\\le n,m,p,q\\le 500$ | 无特殊限制 |\n| $4$ | $20$ | 无特殊限制 | $A$ |\n| $5$ | $10$ | 无特殊限制 | $B$ |\n| $6$ | $20$ | 无特殊限制 | 无特殊限制 |\n\n$A$：保证 $opt=1$。\n\n$B$：保证网格中不存在不可通行的障碍 `#`。\n\n对于所有数据，满足 $1\\le n,m\\le 1000,0\\le p,q\\le n\\times m,0 \\leq opt \\leq 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "电王的传送迷宫", "background": "电王天天玩传送门。", "description": "给出一个大小为 $n\\times m$ 的二维网格图。\n\n网格上的 `.` 是可以通行的路径，`#` 是不能通行的障碍。\n\n你每次可以走到一个与当前位置四连通的且不超过边界的点。\n\n严格来说，若你当前在点 $(x,y)$，你可以走到 $(x-1,y),(x+1,y),(x,y-1),(x,y+1)$ 中的一个，并且保证在任意时刻你的坐标 $(x,y)$ 应该满足 $1\\le x\\le n,1\\le y\\le m$。\n\n我们从起点 $(sx,sy)$ 出发，你希望知道到达任意一个位置至少要走几步。\n\n但这太简单了，于是精通传送门的电王在这个网格图上建造了 $p$ 个传送门，它们的坐标分别为 $(a_1,b_1),(a_2,b_2),...,(a_p,b_p)$。\n\n而电王也设计了 $q$ 个终点，它们的坐标分别为 $(c_1,d_1),(c_2,d_2),...,(c_q,d_q)$。\n\n假如你使用了 $i$ 次传送门，当你到达任意一个传送门，你可以选择直接传送到点 $(c_{i+1},d_{i+1})$。而第 $q$ 次传送后，所有的传送门都会失效。\n\n**所以，传送到的位置只与你传送的次数有关，而与你到达了哪个传送门没有任何关系，我们可以认为所有传送门都是等价的。**\n\n**保证 $p$ 个传送门和 $q$ 个终点的位置都不是障碍。**\n\n保证对于任意输入给出的坐标对应的位置上都是可以通行的路径，且这些坐标一定两两不同。\n\n但电王有的时候并不想知道到去往任意点最少要移动几步，可能他只想知道到一个终点 $(tx,ty)$ 的最少移动步数，我们会在输入格式中了解这个测试点电王的喜好（保证 $tx,ty$ 不是一个障碍）。", "inputFormat": "第一行输入一个正整数 $opt$。\n\n第二行两个正整数 $n,m$，表示网格图的大小。\n\n然后的 $n$ 行，每行 $m$ 个字符，用来描述这个网格的形态。\n\n下一行若干个正整数，前四个数分别表示 $sx,sy,p,q$，若 $opt=1$，我们还会额外输入两个数 $tx,ty$，表示电王只想知道从起点到 $(tx,ty)$ 的最少移动步数。\n\n接下来 $p$ 行，每行两个正整数，分别表示 $a_i,b_i$ 的值。\n\n最后 $q$ 行，每行两个正整数，分别表示 $c_i,d_i$ 的值。", "outputFormat": "若 $opt=0$，输出一个 $n\\times m$ 的数组矩阵。第 $i$ 行 $j$ 列的数表示从起点 $(sx,sy)$ 到达 $(i,j)$ 最少移动几步，如果不可能到达或者这个地方是一个障碍，输出 `-1`。\n\n否则输出一个数，表示从起点 $(sx,sy)$ 到达 $tx,ty$ 最少移动几步，如果不可能到达输出 `-1`。\n\n**注意：使用传送门改变位置的操作，不算入移动的步数。**", "hint": "样例解释：\n\n我们以从起点 $(3,4)$ 去往 $(1,1)$ 为例：首先 $(3,4)\\to(2,4)$，然后使用传送门，第一次传送到 $(1,4)$。然后 $(1,4)\\to (2,4)$，第二次使用传送门，到达点 $(2,1)$，最后 $(2,1)\\to(1,1)$，我们使用了两次传送门，行走了 $3$ 步，所以这个路径方案的移动次数是 $3$，可以证明不存在比这更优的方案了。\n\n**本题采用捆绑测试**。\n\n| $\\text{Subtask}$ | 分数 | $n,m,p,q$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $p=q=0$ | 无特殊限制 |\n| $2$ | $20$ | $p=1$ | 无特殊限制 |\n| $3$ | $20$ | $1\\le n,m,p,q\\le 500$ | 无特殊限制 |\n| $4$ | $20$ | 无特殊限制 | $A$ |\n| $5$ | $10$ | 无特殊限制 | $B$ |\n| $6$ | $20$ | 无特殊限制 | 无特殊限制 |\n\n$A$：保证 $opt=1$。\n\n$B$：保证网格中不存在不可通行的障碍 `#`。\n\n对于所有数据，满足 $1\\le n,m\\le 1000,0\\le p,q\\le n\\times m,0 \\leq opt \\leq 1$。", "locale": "zh-CN"}}}
{"pid": "P10918", "type": "P", "difficulty": 6, "samples": [["3 6\n1 1\n2 2\n3 1", "4"], ["6 12\n12 3\n3 1\n2 1\n6 2\n4 2\n1 2", "8"], ["11 60\n4 1\n15 10\n3 1\n20 3\n2 2\n30 2\n6 4\n10 5\n5 3\n60 5\n12 14", "23"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "小分图最大匹配", "background": "", "description": "给你一个二分图，有一些个左部点。还有 $m$ 个右部点，编号为 $0$ 到 $m-1$。\n\n对于每个左部点 $i$，有一个连边参数 $a_i$，表示其向所有满足 $\\exist x\\in \\mathbb{N}, a_ix\\equiv j \\pmod m$ 的 $j$ 连接了一条边。\n\n现在给出两个长度为 $n$ 的数组 $a_i,c_i$，表示存在 $c_i$ 个左部点的连边参数为 $a_i$，换句话说，这个图总共有 $\\sum\\limits_{i=1}^n c_i$ 个左部点，使用这样的方式来快速读入左部点的连边参数。\n\n保证 $a_i$ 两两不同。\n\n求这张二分图的最大匹配。\n", "inputFormat": "第一行两个整数 $n$ 和 $m$。\n\n接下来 $n$ 行，每行两个正整数，第 $i$ 行的两个数分别表示 $a_i$ 和 $c_i$ 的值。 ", "outputFormat": "一行一个整数，表示答案。", "hint": "**本题采用捆绑测试**。\n\n| Subtask | $n\\le$ | $m\\le$ | 特殊性质 | 分数 |\n| :-: | :--------: | :-: | :-: | :-: |\n| 0 | $10^3$ | $10^3$ | 无 | 10 |\n| 1 | $1$ | $10^{12}$ | 无 | 10 |\n| 2 | $2 \\times 10^3$ | $2\\times 10^7$ | 有 | 20 |\n| 3 | $2 \\times 10^3$ | $2\\times 10^7$ | 无 | 20 |\n| 4 | $2 \\times 10^3$ | $10^{12}$ | 有 | 20 |\n| 5 | $7 \\times 10^3$ | $10^{12}$ | 无 | 20 |\n\n对于所有数据，保证 $1\\le n \\le 7\\times10^3, 1\\le m \\le 10^{12},1\\le a_i \\le m,0\\le c_i \\le 10^{12}$\n\n特殊性质 : 保证 $\\mu(m)\\not=0$。\n\n其中 $\\mu$ 指莫比乌斯函数，定义为\n\n$$\n\\mu(n)=\\left\\{\\begin{array}{ll}\n1 & n=1 \\\\\n0 & n \\text { 含有平方因子 } \\\\\n(-1)^{k} & k \\text { 为 } n \\text { 的本质不同质因子个数 }\n\\end{array}\\right.\n$$\n\n对于所有数据，保证 $a_i$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小分图最大匹配", "background": "", "description": "给你一个二分图，有一些个左部点。还有 $m$ 个右部点，编号为 $0$ 到 $m-1$。\n\n对于每个左部点 $i$，有一个连边参数 $a_i$，表示其向所有满足 $\\exist x\\in \\mathbb{N}, a_ix\\equiv j \\pmod m$ 的 $j$ 连接了一条边。\n\n现在给出两个长度为 $n$ 的数组 $a_i,c_i$，表示存在 $c_i$ 个左部点的连边参数为 $a_i$，换句话说，这个图总共有 $\\sum\\limits_{i=1}^n c_i$ 个左部点，使用这样的方式来快速读入左部点的连边参数。\n\n保证 $a_i$ 两两不同。\n\n求这张二分图的最大匹配。\n", "inputFormat": "第一行两个整数 $n$ 和 $m$。\n\n接下来 $n$ 行，每行两个正整数，第 $i$ 行的两个数分别表示 $a_i$ 和 $c_i$ 的值。 ", "outputFormat": "一行一个整数，表示答案。", "hint": "**本题采用捆绑测试**。\n\n| Subtask | $n\\le$ | $m\\le$ | 特殊性质 | 分数 |\n| :-: | :--------: | :-: | :-: | :-: |\n| 0 | $10^3$ | $10^3$ | 无 | 10 |\n| 1 | $1$ | $10^{12}$ | 无 | 10 |\n| 2 | $2 \\times 10^3$ | $2\\times 10^7$ | 有 | 20 |\n| 3 | $2 \\times 10^3$ | $2\\times 10^7$ | 无 | 20 |\n| 4 | $2 \\times 10^3$ | $10^{12}$ | 有 | 20 |\n| 5 | $7 \\times 10^3$ | $10^{12}$ | 无 | 20 |\n\n对于所有数据，保证 $1\\le n \\le 7\\times10^3, 1\\le m \\le 10^{12},1\\le a_i \\le m,0\\le c_i \\le 10^{12}$\n\n特殊性质 : 保证 $\\mu(m)\\not=0$。\n\n其中 $\\mu$ 指莫比乌斯函数，定义为\n\n$$\n\\mu(n)=\\left\\{\\begin{array}{ll}\n1 & n=1 \\\\\n0 & n \\text { 含有平方因子 } \\\\\n(-1)^{k} & k \\text { 为 } n \\text { 的本质不同质因子个数 }\n\\end{array}\\right.\n$$\n\n对于所有数据，保证 $a_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P10919", "type": "P", "difficulty": 6, "samples": [["10 3 \n1 2 3 5 4 10 8 6 7 9\n1 2 8\n6 10 3\n", "1 3 2"], ["20 5\n12 13 14 15 16 17 18 19 20 22 21 30 29 28 27 26 23 24 25 1\n1 20 2 5 3 \n10 12 11 9 13 \n", "1 2 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "二分图", "树链剖分", "笛卡尔树"], "title": "运输规划", "background": "你需要规划卡车的运输方案，为了让您更好地解决问题，**请仔细阅读题面。**", "description": "有 $n$ 个城市，对于任意 $1 < i \\leq n$ 满足第 $i$ 个城市与第 $i-1$ 个城市间有一条双向的道路，每个城市有一个对卡车高度的限制 $h_i$，代表只有高度小于等于 $h_i$ 的卡车可以从这个城市经过，现在有 $m$ 个城市 $S_{1},S_{2},...,S_{m}$ 各有**恰好**一个运输任务，任务要求**编号为 $i$ 且高度为 $h_{S_{i}}$ 的**卡车从城市 $S_{i}$ 出发**到达**任意一个有机场的城市，而有 $m$ 个城市有机场，分别为 $T_{1},T_{2},...,T_{m}$，对于一个合法的运输方案而言，需要保证每个卡车都到达一个机场且每个机场**恰好**有一辆卡车**抵达**。一个机场**可以**同时被多辆卡车**经过**。请注意，如果你无法经过某个城市，那么你也无法抵达这个城市。\n\n记 $c_i$ 表示抵达位于城市 $T_i$ 的机场的的**卡车编号**，令数组 $F = \\{c_1,c_2,...,c_m\\}$，请你最小化 $F$ 的字典序并输出 $F$。\n\n我们定义两个长度为 $len$ 的数组 $A,B$ 满足 $A$ 的字典序小于 $B$ 当且仅当存在 $0 \\leq i < len$ 满足对于任意 $1 \\leq j \\leq i$ 满足 $A_j = B_j$ 且 $A_{i+1} < B_{i+1}$。\n\n数据保证有解，保证**所有 $h_i$ 互不相同**，所有 $T_i$ 互不相同，所有 $S_i$ 互不相同。但是**可能会**存在 $i,j$ 满足 $S_i = T_j$。\n", "inputFormat": "第一行两个数 $n,m$。\n\n接下来一行 $n$ 个数表示 $h_1,h_2,...,h_n$。\n\n再接下来一行 $m$ 个数表示 $S_{1},S_{2},...,S_{m}$。\n\n再接下来一行 $m$ 个数表示 $T_{1},T_{2},...,T_{m}$。\n\n", "outputFormat": "输出一行 $m$ 个数表示 $F$。", "hint": "**本题采用捆绑测试**。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n,m \\leq 50$ | $10$ |\n| $2$ | 对于任意 $1 < i \\leq n$ 满足 $h_i < h_{i-1}$ | $25$ |\n| $3$ | $n,m \\leq 10^3$ | $25$ |\n| $4$ | 无特殊性质 | $40$ |\n\n对于 $100\\%$ 的数据保证 $1 \\leq m \\leq n \\leq 2 \\times 10^5,0 < h_i \\leq 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "运输规划", "background": "你需要规划卡车的运输方案，为了让您更好地解决问题，**请仔细阅读题面。**", "description": "有 $n$ 个城市，对于任意 $1 < i \\leq n$ 满足第 $i$ 个城市与第 $i-1$ 个城市间有一条双向的道路，每个城市有一个对卡车高度的限制 $h_i$，代表只有高度小于等于 $h_i$ 的卡车可以从这个城市经过，现在有 $m$ 个城市 $S_{1},S_{2},...,S_{m}$ 各有**恰好**一个运输任务，任务要求**编号为 $i$ 且高度为 $h_{S_{i}}$ 的**卡车从城市 $S_{i}$ 出发**到达**任意一个有机场的城市，而有 $m$ 个城市有机场，分别为 $T_{1},T_{2},...,T_{m}$，对于一个合法的运输方案而言，需要保证每个卡车都到达一个机场且每个机场**恰好**有一辆卡车**抵达**。一个机场**可以**同时被多辆卡车**经过**。请注意，如果你无法经过某个城市，那么你也无法抵达这个城市。\n\n记 $c_i$ 表示抵达位于城市 $T_i$ 的机场的的**卡车编号**，令数组 $F = \\{c_1,c_2,...,c_m\\}$，请你最小化 $F$ 的字典序并输出 $F$。\n\n我们定义两个长度为 $len$ 的数组 $A,B$ 满足 $A$ 的字典序小于 $B$ 当且仅当存在 $0 \\leq i < len$ 满足对于任意 $1 \\leq j \\leq i$ 满足 $A_j = B_j$ 且 $A_{i+1} < B_{i+1}$。\n\n数据保证有解，保证**所有 $h_i$ 互不相同**，所有 $T_i$ 互不相同，所有 $S_i$ 互不相同。但是**可能会**存在 $i,j$ 满足 $S_i = T_j$。\n", "inputFormat": "第一行两个数 $n,m$。\n\n接下来一行 $n$ 个数表示 $h_1,h_2,...,h_n$。\n\n再接下来一行 $m$ 个数表示 $S_{1},S_{2},...,S_{m}$。\n\n再接下来一行 $m$ 个数表示 $T_{1},T_{2},...,T_{m}$。\n\n", "outputFormat": "输出一行 $m$ 个数表示 $F$。", "hint": "**本题采用捆绑测试**。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n,m \\leq 50$ | $10$ |\n| $2$ | 对于任意 $1 < i \\leq n$ 满足 $h_i < h_{i-1}$ | $25$ |\n| $3$ | $n,m \\leq 10^3$ | $25$ |\n| $4$ | 无特殊性质 | $40$ |\n\n对于 $100\\%$ 的数据保证 $1 \\leq m \\leq n \\leq 2 \\times 10^5,0 < h_i \\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P10920", "type": "P", "difficulty": 6, "samples": [["2\n10\n0110011010\n6\n01?0?0", "4\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "宇宙射线", "background": "感谢 @[jason_sun](https://www.luogu.com.cn/user/399762) 加强数据。\n\n宇宙射线天天乱改东西/fn。", "description": "有一个长度为 $n$ 的二进制串 $s$，你需要找到一个最长的长度为偶数的子串，使得它的前半部分和后半部分完全相同。\n\n但是因为宇宙射线攻击了这个串，有一些位置的值变得未知了。\n\n你可以把未知的值视为 $0$ 和 $1$ 的任意一个数，求出在这种情况下这个最长子串的长度。\n\n本题有多组测试。", "inputFormat": "第一行一个正整数 $t$，表示测试组数。\n\n接下来 $2t$ 行，每两行表示一组测试数据，每组测试数据第一行一个正整数 $n$，表示字符串的长度，接下来一行一个长度为 $n$ 的字符串 $s$。", "outputFormat": "$t$ 行，每行一个非负整数，表示第 $i$ 组测试的答案，由于这个串长一定是偶数，所以你只用输出它的长度除以 $2$ 的结果。", "hint": "**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 分数 | $n,t$ | 特殊性质 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $n\\le 10,t=500$ | 无特殊限制 |\n| $2$ | $10$ | $n\\le1000,t=1$ | 无特殊限制 |\n| $3$ | $10$ | $n\\le 1000,t=1000$ | $A$ |\n| $4$ | $10$ | $n\\le 1000,t=1000$ | 无特殊限制 |\n| $5$ | $10$ | $n\\le 10^4,t=10$ | 无特殊限制 |\n| $6$ | $10$ | $n\\le 10^4,t=50$ | 无特殊限制 |\n| $7$ | $20$ | $n\\le 5\\times 10^4,t=2$ | 无特殊限制 |\n| $8$ | $15$ | $n\\le 10^5,t=1$ | 无特殊限制 |\n| $9$ | $5$ | $n\\le 10^5,t=5$ | 无特殊限制 |\n\n$A$：保证 $s$ 中不存在字符 `?`。\n\n保证字符串只由 `0,1,?` 三种字符组成，$1\\le n\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "宇宙射线", "background": "感谢 @[jason_sun](https://www.luogu.com.cn/user/399762) 加强数据。\n\n宇宙射线天天乱改东西/fn。", "description": "有一个长度为 $n$ 的二进制串 $s$，你需要找到一个最长的长度为偶数的子串，使得它的前半部分和后半部分完全相同。\n\n但是因为宇宙射线攻击了这个串，有一些位置的值变得未知了。\n\n你可以把未知的值视为 $0$ 和 $1$ 的任意一个数，求出在这种情况下这个最长子串的长度。\n\n本题有多组测试。", "inputFormat": "第一行一个正整数 $t$，表示测试组数。\n\n接下来 $2t$ 行，每两行表示一组测试数据，每组测试数据第一行一个正整数 $n$，表示字符串的长度，接下来一行一个长度为 $n$ 的字符串 $s$。", "outputFormat": "$t$ 行，每行一个非负整数，表示第 $i$ 组测试的答案，由于这个串长一定是偶数，所以你只用输出它的长度除以 $2$ 的结果。", "hint": "**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 分数 | $n,t$ | 特殊性质 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $n\\le 10,t=500$ | 无特殊限制 |\n| $2$ | $10$ | $n\\le1000,t=1$ | 无特殊限制 |\n| $3$ | $10$ | $n\\le 1000,t=1000$ | $A$ |\n| $4$ | $10$ | $n\\le 1000,t=1000$ | 无特殊限制 |\n| $5$ | $10$ | $n\\le 10^4,t=10$ | 无特殊限制 |\n| $6$ | $10$ | $n\\le 10^4,t=50$ | 无特殊限制 |\n| $7$ | $20$ | $n\\le 5\\times 10^4,t=2$ | 无特殊限制 |\n| $8$ | $15$ | $n\\le 10^5,t=1$ | 无特殊限制 |\n| $9$ | $5$ | $n\\le 10^5,t=5$ | 无特殊限制 |\n\n$A$：保证 $s$ 中不存在字符 `?`。\n\n保证字符串只由 `0,1,?` 三种字符组成，$1\\le n\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10921", "type": "P", "difficulty": 3, "samples": [["2\n3\n1 2\n2 3\n7\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7", "1 2 3\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "Happybob's Puzzle (UBC001A)", "background": "", "description": "给定一棵有 $n$ 个点的树，每条边的长度都是 $1$，你需要构造一个 $1\\sim n$ 的排列 $p$，满足以下条件：\n\n- 对于每个满足 $1\\le i<n$ 的整数 $i$，点 $p_i$ 到点 $p_{i+1}$ 的简单路径长度为奇数。\n\n如果有解，请输出字典序最小的排列 $p$；否则，输出 $-1$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $t$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行，一个正整数 $n$。\n\n接下来的 $n-1$ 行，每行两个正整数 $u,v$，表示点 $u,v$ 之间有一条边。", "outputFormat": "$t$ 行，每行 $n$ 个正整数或一个整数 $-1$，表示该组测试数据的答案。", "hint": "**数据范围**\n\n对于所有数据，都有 $1\\le t,n,\\sum n\\le 10^5$，保证有 $1 \\leq u, v \\leq n$ 且 $u \\neq v$。保证输入构成一棵树。其中 $\\sum n$ 表示所有测试数据的 $n$ 的总和。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Happybob's Puzzle (UBC001A)", "background": "", "description": "给定一棵有 $n$ 个点的树，每条边的长度都是 $1$，你需要构造一个 $1\\sim n$ 的排列 $p$，满足以下条件：\n\n- 对于每个满足 $1\\le i<n$ 的整数 $i$，点 $p_i$ 到点 $p_{i+1}$ 的简单路径长度为奇数。\n\n如果有解，请输出字典序最小的排列 $p$；否则，输出 $-1$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $t$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行，一个正整数 $n$。\n\n接下来的 $n-1$ 行，每行两个正整数 $u,v$，表示点 $u,v$ 之间有一条边。", "outputFormat": "$t$ 行，每行 $n$ 个正整数或一个整数 $-1$，表示该组测试数据的答案。", "hint": "**数据范围**\n\n对于所有数据，都有 $1\\le t,n,\\sum n\\le 10^5$，保证有 $1 \\leq u, v \\leq n$ 且 $u \\neq v$。保证输入构成一棵树。其中 $\\sum n$ 表示所有测试数据的 $n$ 的总和。", "locale": "zh-CN"}}}
{"pid": "P10922", "type": "P", "difficulty": 3, "samples": [["2\n3\n1 2 3\n4\n114 514 1919 810", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "排序"], "title": "Happybob's Numbers (UBC001B)", "background": "", "description": "happybob 在地上有 $n$ 个数，第 $i$ 个记为 $a_i$。happybob 正在研究如何将这些数全部删除。在他开始进行所有操作以前，他有一次按任意顺序摆放这些数的机会。他接下来要按照如下方式进行删数：\n\n- happybob 有一个删数下标 $h$（初始时 $h=1$），他会设立一个新变量 $H$，其值为 $a_h$ ，然后对于每一个满足 $h\\le i<k$ 的正整数 $i$ 都执行 $a_i\\gets a_{i+1}$（这里 $k$ 是当前地上剩余的数的个数）并删除数 $a_k$，在这之后他会把 $h$ 赋值为 $H$。\n\n- **如果在任何一次操作过后，$h$ 严格大于当前地上剩余的数的个数，那么他将不能再删除任何数。**\n\n当然以他的这种删数方式不一定可以删完所有数，所以他现在想问你：他最多能删除多少个数？", "inputFormat": "第一行，一个正整数 $t$，表示测试数据组数。\n\n对于每组数据：\n\n第一行，一个正整数 $n$，表示 $a$ 的大小；\n\n第二行，$n$ 个正整数表示 $a$ 中的元素。\n", "outputFormat": "$t$ 行，每行一个正整数，表示该组测试数据对应的答案。\n", "hint": "#### 样例解释\n\n对于第一个数据点，happybob 可以把 $a$ 数组排序为 $[2, 3, 1]$。以下是删数过程：\n\n| 操作次数 | $h$（操作完成后） | 地上的数（操作完成后） |\n| -- | -- | -- |\n| 初始 | $1$ | $[2, 3, 1]$ |\n| $1$ | $2$ | $[3, 1]$ |\n| $2$ | $1$ | $[3]$ |\n| $3$ | $3$ | $[]$ |\n\n地上没有数了，也就是一共删除了 $3$ 个数。\n\n对于第二个数据点，可以证明，无论怎么排序 $a$，都只能删除一个数。\n\n#### 数据范围\n\n**本题有多组测试数据。**\n\n对于 $100\\%$ 的数据，保证 $1 \\le t,n,\\sum n\\le 5 \\times 10^5$，$1\\le a_i\\le 10^9$。其中 $\\sum n$ 表示所有测试数据中 $n$ 的和。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Happybob's Numbers (UBC001B)", "background": "", "description": "happybob 在地上有 $n$ 个数，第 $i$ 个记为 $a_i$。happybob 正在研究如何将这些数全部删除。在他开始进行所有操作以前，他有一次按任意顺序摆放这些数的机会。他接下来要按照如下方式进行删数：\n\n- happybob 有一个删数下标 $h$（初始时 $h=1$），他会设立一个新变量 $H$，其值为 $a_h$ ，然后对于每一个满足 $h\\le i<k$ 的正整数 $i$ 都执行 $a_i\\gets a_{i+1}$（这里 $k$ 是当前地上剩余的数的个数）并删除数 $a_k$，在这之后他会把 $h$ 赋值为 $H$。\n\n- **如果在任何一次操作过后，$h$ 严格大于当前地上剩余的数的个数，那么他将不能再删除任何数。**\n\n当然以他的这种删数方式不一定可以删完所有数，所以他现在想问你：他最多能删除多少个数？", "inputFormat": "第一行，一个正整数 $t$，表示测试数据组数。\n\n对于每组数据：\n\n第一行，一个正整数 $n$，表示 $a$ 的大小；\n\n第二行，$n$ 个正整数表示 $a$ 中的元素。\n", "outputFormat": "$t$ 行，每行一个正整数，表示该组测试数据对应的答案。\n", "hint": "#### 样例解释\n\n对于第一个数据点，happybob 可以把 $a$ 数组排序为 $[2, 3, 1]$。以下是删数过程：\n\n| 操作次数 | $h$（操作完成后） | 地上的数（操作完成后） |\n| -- | -- | -- |\n| 初始 | $1$ | $[2, 3, 1]$ |\n| $1$ | $2$ | $[3, 1]$ |\n| $2$ | $1$ | $[3]$ |\n| $3$ | $3$ | $[]$ |\n\n地上没有数了，也就是一共删除了 $3$ 个数。\n\n对于第二个数据点，可以证明，无论怎么排序 $a$，都只能删除一个数。\n\n#### 数据范围\n\n**本题有多组测试数据。**\n\n对于 $100\\%$ 的数据，保证 $1 \\le t,n,\\sum n\\le 5 \\times 10^5$，$1\\le a_i\\le 10^9$。其中 $\\sum n$ 表示所有测试数据中 $n$ 的和。", "locale": "zh-CN"}}}
{"pid": "P10923", "type": "P", "difficulty": 4, "samples": [["3\n1 1 3 3\n011\n011\n000", "2"], ["3\n1 1 3 3\n011\n111\n110", "inf"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "Happybob's Pencil Case (UBC001C)", "background": "注：本题无 typo。", "description": "假设教室是一个 $n \\times n$ 的 `01` 矩阵，`0` 表示空，`1` 表示有课桌（障碍）。\n\n现在 Cuazyoxi 拿着 Happybob's Pencil Case 在 $(x_1, y_1)$ 处，Happybob 在 $(x_2, y_2)$ 处。\n\n我们定义一次移动为往当前格子的上下左右一格移动。形式化地，假设当前一人（Cuazyoxi 或 Happybob）在 $(x, y)$ 处，如果 $(x + 1, y), (x, y + 1), (x - 1, y), (x, y - 1)$ 当中的某一个存在且不是障碍，则他可以移动到那一格。\n\n每秒，Cuazyoxi 先移动一次或不动，然后 Happybob 移动一次或两次或者不动，每次移动后他们都知道对方的位置。\n\n双方都很聪明。Cuazyoxi 想要让 Happybob 抓到他的时间尽量久，而 Happybob 想要尽早抓到 Cuazyoxi。\n\n问：Cuazyoxi 还能躲避 Happybob 多少秒（Happybob 至少要多少秒后才能和 Cuazyoxi 达到同一个格子）？\n", "inputFormat": "第一行，一个正整数 $n$，表示教室大小。\n\n第二行，四个正整数 $x_1,y_1,x_2,y_2$，表示 Cuazyoxi 与 Happybob 的起点。\n\n接下来 $n$ 行，每行一个长度为 $n$ 的字符串 $S$，这 $n$ 行的字符串构成一个 `01` 矩阵。\n", "outputFormat": "如果 Cuazyoxi 迟早会被抓到，输出他被抓到的时间，否则输出 `inf`。", "hint": "**样例说明**\n\n对于样例 $1$，Cuazyoxi 的最优策略显然是呆在原地不动，$2$ 秒后 Happybob 可以抓到他。\n\n对于样例 $2$，无论如何 Happybob 都抓不到 Cuazyoxi。\n\n**数据范围**\n\n$2\\le n\\le 10$ 且 $1 \\le x_1, x_2, y_1, y_2 \\le n$。保证 $(x_1,y_1),(x_2,y_2)$ 上的数字是 `0` 且 $x_1\\ne x_2$ 或 $y_1\\ne y_2$。保证输入的 $n$ 个字符串长度都是 $n$ 且只含字符 `0` 与 `1`（可能只含 `1` 或只含 `0`）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Happybob's Pencil Case (UBC001C)", "background": "注：本题无 typo。", "description": "假设教室是一个 $n \\times n$ 的 `01` 矩阵，`0` 表示空，`1` 表示有课桌（障碍）。\n\n现在 Cuazyoxi 拿着 Happybob's Pencil Case 在 $(x_1, y_1)$ 处，Happybob 在 $(x_2, y_2)$ 处。\n\n我们定义一次移动为往当前格子的上下左右一格移动。形式化地，假设当前一人（Cuazyoxi 或 Happybob）在 $(x, y)$ 处，如果 $(x + 1, y), (x, y + 1), (x - 1, y), (x, y - 1)$ 当中的某一个存在且不是障碍，则他可以移动到那一格。\n\n每秒，Cuazyoxi 先移动一次或不动，然后 Happybob 移动一次或两次或者不动，每次移动后他们都知道对方的位置。\n\n双方都很聪明。Cuazyoxi 想要让 Happybob 抓到他的时间尽量久，而 Happybob 想要尽早抓到 Cuazyoxi。\n\n问：Cuazyoxi 还能躲避 Happybob 多少秒（Happybob 至少要多少秒后才能和 Cuazyoxi 达到同一个格子）？\n", "inputFormat": "第一行，一个正整数 $n$，表示教室大小。\n\n第二行，四个正整数 $x_1,y_1,x_2,y_2$，表示 Cuazyoxi 与 Happybob 的起点。\n\n接下来 $n$ 行，每行一个长度为 $n$ 的字符串 $S$，这 $n$ 行的字符串构成一个 `01` 矩阵。\n", "outputFormat": "如果 Cuazyoxi 迟早会被抓到，输出他被抓到的时间，否则输出 `inf`。", "hint": "**样例说明**\n\n对于样例 $1$，Cuazyoxi 的最优策略显然是呆在原地不动，$2$ 秒后 Happybob 可以抓到他。\n\n对于样例 $2$，无论如何 Happybob 都抓不到 Cuazyoxi。\n\n**数据范围**\n\n$2\\le n\\le 10$ 且 $1 \\le x_1, x_2, y_1, y_2 \\le n$。保证 $(x_1,y_1),(x_2,y_2)$ 上的数字是 `0` 且 $x_1\\ne x_2$ 或 $y_1\\ne y_2$。保证输入的 $n$ 个字符串长度都是 $n$ 且只含字符 `0` 与 `1`（可能只含 `1` 或只含 `0`）。", "locale": "zh-CN"}}}
{"pid": "P10924", "type": "P", "difficulty": 4, "samples": [["2 10\n29 5\n7 2\n1 2 3\n2 1 3\n3\n1 1 1\n1 2 1\n2 1 1\n2 2 1\n3\n2 1 2\n3", "3\n-1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "堆", "O2优化"], "title": "Happybob's Game (UBC001D)", "background": "", "description": "**注：本题中所有 $i,j$ 均默认 $1\\le i,j\\le n$ 且 $i\\not = j$。**\n\nHappybob 的游戏角色正在进行战争。\n\n他有 $n$ 个部队，每个部队有 $a_i$ 个人，并且有消耗值 $m_i$，表示每过 $1$ 分钟第 $i$ 个部队的人会变成 $⌊\\frac{a_i}{m_i}⌋$，一旦其中一支部队人数变成 $0$，Happybob 就失败了。设一开始为第 $0$ 分钟，定义存活时间为 Happybob 的其中一支部队人数变成 $0$ 的上一分钟。**可参考样例解释。**\n\n但是 Happybob 不甘就这样就被消灭，他想到了好办法：他可以在**任意不是整数分钟**的时间将一个部队的人调一部分到另一个部队。形式化来说，取两支军队 $a_i, a_j$ 以及一个调换人数 $x$ 满足 $1\\le x\\le a_i$，使 $a_i,a_j$ 分别变成 $a_i-x,a_j+x$。注意，在两个整数分钟间，他可以调换任意多次。\n\nHappybob 发现，这样可以有效地提升部队存活时间。现在你作为 Happybob 最信任的参谋长，你可以帮他调兵遣将。\n\n接下来给你 $q$ 次操作，每次操作是以下操作中的一个：\n\n- 操作 $1$，形如 `1 i x`，表示 Happybob 的第 $i$ 支部队的人数 $a_i$ 变成了 $x$ （$1\\le x\\le 10^9$）。\n- 操作 $2$，形如 `2 i x`，表示 Happybob 的第 $i$ 支部队的消耗值 $m_i$ 变成了 $x$（$1\\le x\\le 10^6$）。\n- 操作 $3$，形如 `3`，表示让你输出 Happybob 理论上通过上述调兵遣将法最久的存活时间。注意，此操作**不会**改变 $a_i$ 或 $m_i$ 的值。\n", "inputFormat": "第一行，两个正整数 $n,q$。\n\n接下来两行，每行 $n$ 个正整数，分别表示 $a$ 数组与 $m$ 数组。\n\n接下来 $q$ 行，每行都是上述三种操作之一。\n", "outputFormat": "假设共有 $opt$ 次操作 $3$，那么你的答案应该有 $opt$ 行，每行表示当前状态下 Happybob 的最长可能存活时间。如果 Happybob 的军队可以无限地活下去，输出 `-1`。\n", "hint": "### 样例说明\n\n对于第一个操作 $3$，Happybob 可以这样调动军队：\n\n| 时刻（分） | 第一支军队人数 | 第二支军队人数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $29$ | $3$ |\n| $0.5$ | $10$ | $22$ |\n| $1$ | $3$ | $11$ |\n| $1.5$ | $6$ | $8$ |\n| $2$ | $2$ | $4$ |\n| $2.5$ | $3$ | $3$ |\n| $3$ | $1$ | $1$ |\n| $3.5$ | $1$ | $1$ |\n| $4$ | $0$ | $0$ |\n\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le n \\le 5\\times 10^6$，$1\\le q \\le 10^5$。保证对于所有 $a_i,m_i$，$1\\le a_i\\le 10^9$，$1\\le m_i\\le 10^6$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Happybob's Game (UBC001D)", "background": "", "description": "**注：本题中所有 $i,j$ 均默认 $1\\le i,j\\le n$ 且 $i\\not = j$。**\n\nHappybob 的游戏角色正在进行战争。\n\n他有 $n$ 个部队，每个部队有 $a_i$ 个人，并且有消耗值 $m_i$，表示每过 $1$ 分钟第 $i$ 个部队的人会变成 $⌊\\frac{a_i}{m_i}⌋$，一旦其中一支部队人数变成 $0$，Happybob 就失败了。设一开始为第 $0$ 分钟，定义存活时间为 Happybob 的其中一支部队人数变成 $0$ 的上一分钟。**可参考样例解释。**\n\n但是 Happybob 不甘就这样就被消灭，他想到了好办法：他可以在**任意不是整数分钟**的时间将一个部队的人调一部分到另一个部队。形式化来说，取两支军队 $a_i, a_j$ 以及一个调换人数 $x$ 满足 $1\\le x\\le a_i$，使 $a_i,a_j$ 分别变成 $a_i-x,a_j+x$。注意，在两个整数分钟间，他可以调换任意多次。\n\nHappybob 发现，这样可以有效地提升部队存活时间。现在你作为 Happybob 最信任的参谋长，你可以帮他调兵遣将。\n\n接下来给你 $q$ 次操作，每次操作是以下操作中的一个：\n\n- 操作 $1$，形如 `1 i x`，表示 Happybob 的第 $i$ 支部队的人数 $a_i$ 变成了 $x$ （$1\\le x\\le 10^9$）。\n- 操作 $2$，形如 `2 i x`，表示 Happybob 的第 $i$ 支部队的消耗值 $m_i$ 变成了 $x$（$1\\le x\\le 10^6$）。\n- 操作 $3$，形如 `3`，表示让你输出 Happybob 理论上通过上述调兵遣将法最久的存活时间。注意，此操作**不会**改变 $a_i$ 或 $m_i$ 的值。\n", "inputFormat": "第一行，两个正整数 $n,q$。\n\n接下来两行，每行 $n$ 个正整数，分别表示 $a$ 数组与 $m$ 数组。\n\n接下来 $q$ 行，每行都是上述三种操作之一。\n", "outputFormat": "假设共有 $opt$ 次操作 $3$，那么你的答案应该有 $opt$ 行，每行表示当前状态下 Happybob 的最长可能存活时间。如果 Happybob 的军队可以无限地活下去，输出 `-1`。\n", "hint": "### 样例说明\n\n对于第一个操作 $3$，Happybob 可以这样调动军队：\n\n| 时刻（分） | 第一支军队人数 | 第二支军队人数 |\n| :----------: | :----------: | :----------: |\n| $0$ | $29$ | $3$ |\n| $0.5$ | $10$ | $22$ |\n| $1$ | $3$ | $11$ |\n| $1.5$ | $6$ | $8$ |\n| $2$ | $2$ | $4$ |\n| $2.5$ | $3$ | $3$ |\n| $3$ | $1$ | $1$ |\n| $3.5$ | $1$ | $1$ |\n| $4$ | $0$ | $0$ |\n\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le n \\le 5\\times 10^6$，$1\\le q \\le 10^5$。保证对于所有 $a_i,m_i$，$1\\le a_i\\le 10^9$，$1\\le m_i\\le 10^6$。\n\n", "locale": "zh-CN"}}}
{"pid": "P10925", "type": "P", "difficulty": 4, "samples": [["3\n5 1\n6 2\n8 2", "9\n20\n32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "Happybob's Pancake (UBC001E)", "background": "", "description": "Happybob 想做一块煎饼，他决定在一个 $n$ 行 $n$ 列的斜正方形的锅里做一个煎饼，所以煎饼的大小不能超过斜正方形的大小。\n\n由于原料有限，因此 Happybob 的煎饼必须是 $m$ 个长方形覆盖而成的。\n\nHappybob 想知道，他能制作出的最大的煎饼的面积是多少。\n\n---\n\n**形式化题意：**\n\n用 $m$ 个长方形覆盖大小为 $n$ 的斜正方形，最多覆盖多少个格子？\n\n**斜正方形和覆盖的定义见说明/提示**。\n", "inputFormat": "第一行，一个整数 $T$，表示询问数。\n\n接下来 $T$ 行，每行两个整数 $n,m$，表示一次询问。\n", "outputFormat": "$T$ 行，每一行表示一个询问的答案。\n", "hint": "### 样例说明\n\n三次询问的方案是：\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/m8uup5uc.png)\n\n![4](https://cdn.luogu.com.cn/upload/image_hosting/70a01fpj.png)\n\n![5](https://cdn.luogu.com.cn/upload/image_hosting/lypuap4t.png)\n\n（方案不唯一）\n\n### 数据范围\n\n$1\\le T\\le 50$，$1\\le n\\le 2\\times 10^9$，$1\\le m\\le\\lceil\\dfrac{n}{2}\\rceil$。\n\n---\n\n### 形式化定义\n\n**斜正方形的定义：**\n\n更形式化地，建立直角坐标系，定义一个大小为 $n$ 的**斜正方形**的**中心**为原点。\n\n若 $n$ 为奇数，则该**斜正方形**可以描述为所有以 $\\big\\{(x, y) \\big | |x| + |y| \\le \\lfloor \\frac{n}{2} \\rfloor \\text{ and } x, y \\in \\Z\\big\\}$ 中的点为**正方形**中心的边长为 $1$ 的**正方形格子**组成的组合图形。\n\n若 $n$ 为偶数，则该**斜正方形**可以描述为所有以 $\\big\\{(x, y) \\big | |x| + |y| \\le \\frac{n}{2} \\text{ and } (x + \\frac{1}{2}), (y + \\frac{1}{2}) \\in \\Z\\big\\}$ 中的点为**正方形**中心的边长为 $1$ 的**正方形格子**组成的组合图形。\n\n一个 $n=5$ 的斜正方形（淡蓝色为格子中心）：\n\n![1](https://cdn.luogu.com.cn/upload/image_hosting/b633qef0.png)\n\n一个 $n=6$ 的斜正方形（淡蓝色为格子中心）：\n\n![2](https://cdn.luogu.com.cn/upload/image_hosting/bzq2por3.png)\n\n**覆盖方法的定义：**\n\n定义一个长方形 $R$ 覆盖该**斜正方形**，当且仅当 $R$ 为由若干**格子**组成的长方形。\n\n下面是一个覆盖斜正方形的长方形：\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/7d0jsymo.png)\n\n下面则**不是**覆盖斜正方形的长方形：\n\n![4](https://cdn.luogu.com.cn/upload/image_hosting/2e2374s3.png)\n\n![5](https://cdn.luogu.com.cn/upload/image_hosting/5j8wnvgb.png)\n\n![6](https://cdn.luogu.com.cn/upload/image_hosting/rrxxe2ps.png)\n\n定义一个**格子**被覆盖，当且仅当选择的 $m$ 个覆盖**斜正方形**的长方形中有至少一个完全包含该格子。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Happybob's Pancake (UBC001E)", "background": "", "description": "Happybob 想做一块煎饼，他决定在一个 $n$ 行 $n$ 列的斜正方形的锅里做一个煎饼，所以煎饼的大小不能超过斜正方形的大小。\n\n由于原料有限，因此 Happybob 的煎饼必须是 $m$ 个长方形覆盖而成的。\n\nHappybob 想知道，他能制作出的最大的煎饼的面积是多少。\n\n---\n\n**形式化题意：**\n\n用 $m$ 个长方形覆盖大小为 $n$ 的斜正方形，最多覆盖多少个格子？\n\n**斜正方形和覆盖的定义见说明/提示**。\n", "inputFormat": "第一行，一个整数 $T$，表示询问数。\n\n接下来 $T$ 行，每行两个整数 $n,m$，表示一次询问。\n", "outputFormat": "$T$ 行，每一行表示一个询问的答案。\n", "hint": "### 样例说明\n\n三次询问的方案是：\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/m8uup5uc.png)\n\n![4](https://cdn.luogu.com.cn/upload/image_hosting/70a01fpj.png)\n\n![5](https://cdn.luogu.com.cn/upload/image_hosting/lypuap4t.png)\n\n（方案不唯一）\n\n### 数据范围\n\n$1\\le T\\le 50$，$1\\le n\\le 2\\times 10^9$，$1\\le m\\le\\lceil\\dfrac{n}{2}\\rceil$。\n\n---\n\n### 形式化定义\n\n**斜正方形的定义：**\n\n更形式化地，建立直角坐标系，定义一个大小为 $n$ 的**斜正方形**的**中心**为原点。\n\n若 $n$ 为奇数，则该**斜正方形**可以描述为所有以 $\\big\\{(x, y) \\big | |x| + |y| \\le \\lfloor \\frac{n}{2} \\rfloor \\text{ and } x, y \\in \\Z\\big\\}$ 中的点为**正方形**中心的边长为 $1$ 的**正方形格子**组成的组合图形。\n\n若 $n$ 为偶数，则该**斜正方形**可以描述为所有以 $\\big\\{(x, y) \\big | |x| + |y| \\le \\frac{n}{2} \\text{ and } (x + \\frac{1}{2}), (y + \\frac{1}{2}) \\in \\Z\\big\\}$ 中的点为**正方形**中心的边长为 $1$ 的**正方形格子**组成的组合图形。\n\n一个 $n=5$ 的斜正方形（淡蓝色为格子中心）：\n\n![1](https://cdn.luogu.com.cn/upload/image_hosting/b633qef0.png)\n\n一个 $n=6$ 的斜正方形（淡蓝色为格子中心）：\n\n![2](https://cdn.luogu.com.cn/upload/image_hosting/bzq2por3.png)\n\n**覆盖方法的定义：**\n\n定义一个长方形 $R$ 覆盖该**斜正方形**，当且仅当 $R$ 为由若干**格子**组成的长方形。\n\n下面是一个覆盖斜正方形的长方形：\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/7d0jsymo.png)\n\n下面则**不是**覆盖斜正方形的长方形：\n\n![4](https://cdn.luogu.com.cn/upload/image_hosting/2e2374s3.png)\n\n![5](https://cdn.luogu.com.cn/upload/image_hosting/5j8wnvgb.png)\n\n![6](https://cdn.luogu.com.cn/upload/image_hosting/rrxxe2ps.png)\n\n定义一个**格子**被覆盖，当且仅当选择的 $m$ 个覆盖**斜正方形**的长方形中有至少一个完全包含该格子。\n", "locale": "zh-CN"}}}
{"pid": "P10926", "type": "P", "difficulty": 7, "samples": [["3 10 6\n0 1 0 1 0 1 0 0\nBDBDBDDBBD\n1 0 1 5\n1 0 8 10\n1 0 6 8\n2 2 4\n2 3 4\n3 1 3", "7\n8\n0\n1\n0\n2"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "Happybob's Magic (UBC001F)", "background": "", "description": "Happybob 正在游戏里研究一排灯，总共 $2^n$ 个，编号为 $0\\sim 2^n-1$。Happybob 有两个技能。\n\n一技能（按下 `B` 释放）释放一次，所有的灯亮变成灭，灭变成亮。\n\n二技能（按下 `D` 释放）就厉害了，每释放一次，假设释放前的所有亮着的灯的编号组成的集合是 $X$，那么对于 $X$ 的**所有 $2^{|X|}$ 个子集（包含空集）** $Y$，Happybob 会把第 $\\bigoplus(Y)$ 盏灯点亮。这里的 $|X|$ 表示 $X$ 集合的大小，$\\bigoplus(Y)$ 表示将集合 $Y$ 的所有元素进行二进制按位异或得到的结果。特别地，$\\bigoplus(\\varnothing) = 0$。\n\n现在有一个 `B`，`D` 构成的施法序列 $S(|S|=m)$（意义如上），一个灯的初始状态序列（第 $0$ 个版本）$a_0,a_1,\\cdots,a_{2^n-1}$，以及一个变量 $vid=0$。Happybob 有 $q$ 次询问，每次询问可能是：\n\n1. `1 v l r`：将 $vid$ 加 $1$，对第 $v$ 个版本依次执行 $S_l$ 到 $S_r$ 的施法操作，将结果存入第 $vid$ 个版本中，并问第 $vid$ 个版本中有多少盏灯是亮的。\n2. `2 v k`：问第 $v$ 个版本的第 $k$ 盏灯是不是亮的。是输出 $1$，否则输出 $0$。\n3. `3 v k`：设第 $v$ 个版本是从第 $v'$ 个版本执行了 $t$ 次施法操作变过来的，问有多少次施法操作之后，第 $k$ 盏灯是亮的（原来是亮的不算）。\n\n对于第三种询问，这里的 $v'$ 和 $t$ 具体定义如下：假设进行某一次第一种询问后 $vid = v$，则 $v'$ 等于那一次询问给定的 $v$，$t$ 即那一次询问给定的操作序列 $S_{l\\cdots r}$ 的长度。\n\n保证 $0\\le v\\le vid$（如果是第一个操作，则是加 $1$ 前的 $vid$；如果是第三个操作，还保证 $v>0$）。", "inputFormat": "第 $1$ 行，$3$ 个整数 $n,m,q$；\n\n第 $2$ 行，$2^n$ 个整数 $a_0,a_1,\\cdots,a_{2^n-1}$；\n\n第 $3$ 行，$1$ 个字符串 $S$（下标从 $1$ 开始），对于每个满足 $1\\le i\\le m$ 的整数 $i$，如果 $S_i$ 是 `B`，那么表示 Happybob 释放了一次一技能，否则他释放了一次二技能；\n\n接下来 $q$ 行，每行 $3$ 个或 $4$ 个非负整数，表示一个询问。", "outputFormat": "$q$ 行，第 $i$ 行一个整数，表示第 $i$ 个询问的结果。", "hint": "### 样例说明\n\n| 版本编号 | 灯的状态 |\n| --- | --- | \n| $0$ | $01010100$ | \n| $1$ | $01111111$ | \n| $2$ | $11111111$ |\n| $3$ | $00000000$ |\n\n对于最后一次询问，每次施法操作后的状态如下：\n\n| 操作 | 灯的状态 |\n| --- | --- | \n| 初始值 | $01010100$ | \n| `B` | $10101011$ | \n| `BD` | $111\\red11111$ | \n| `BDB` | $00000000$ |\n| `BDBD` | $10000000$ |\n| `BDBDB` | $011\\red11111$ |\n\n第 $3$ 盏灯亮了 $2$ 次。\n\n### 数据范围\n\n对于 $100\\%$ 的数据， $1\\le n\\le 18$，$1\\le q\\le 2\\times 10^5$，$a_i\\in\\{0, 1\\}$，$1\\le l\\le r\\le m\\le 2\\times 10^5$，$0\\le k<2^n$。保证 $S$ 中只含字符 `B` 与 `D`（可能不含 `B` 或不含 `D`），且 $S$ 的长度为 $m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Happybob's Magic (UBC001F)", "background": "", "description": "Happybob 正在游戏里研究一排灯，总共 $2^n$ 个，编号为 $0\\sim 2^n-1$。Happybob 有两个技能。\n\n一技能（按下 `B` 释放）释放一次，所有的灯亮变成灭，灭变成亮。\n\n二技能（按下 `D` 释放）就厉害了，每释放一次，假设释放前的所有亮着的灯的编号组成的集合是 $X$，那么对于 $X$ 的**所有 $2^{|X|}$ 个子集（包含空集）** $Y$，Happybob 会把第 $\\bigoplus(Y)$ 盏灯点亮。这里的 $|X|$ 表示 $X$ 集合的大小，$\\bigoplus(Y)$ 表示将集合 $Y$ 的所有元素进行二进制按位异或得到的结果。特别地，$\\bigoplus(\\varnothing) = 0$。\n\n现在有一个 `B`，`D` 构成的施法序列 $S(|S|=m)$（意义如上），一个灯的初始状态序列（第 $0$ 个版本）$a_0,a_1,\\cdots,a_{2^n-1}$，以及一个变量 $vid=0$。Happybob 有 $q$ 次询问，每次询问可能是：\n\n1. `1 v l r`：将 $vid$ 加 $1$，对第 $v$ 个版本依次执行 $S_l$ 到 $S_r$ 的施法操作，将结果存入第 $vid$ 个版本中，并问第 $vid$ 个版本中有多少盏灯是亮的。\n2. `2 v k`：问第 $v$ 个版本的第 $k$ 盏灯是不是亮的。是输出 $1$，否则输出 $0$。\n3. `3 v k`：设第 $v$ 个版本是从第 $v'$ 个版本执行了 $t$ 次施法操作变过来的，问有多少次施法操作之后，第 $k$ 盏灯是亮的（原来是亮的不算）。\n\n对于第三种询问，这里的 $v'$ 和 $t$ 具体定义如下：假设进行某一次第一种询问后 $vid = v$，则 $v'$ 等于那一次询问给定的 $v$，$t$ 即那一次询问给定的操作序列 $S_{l\\cdots r}$ 的长度。\n\n保证 $0\\le v\\le vid$（如果是第一个操作，则是加 $1$ 前的 $vid$；如果是第三个操作，还保证 $v>0$）。", "inputFormat": "第 $1$ 行，$3$ 个整数 $n,m,q$；\n\n第 $2$ 行，$2^n$ 个整数 $a_0,a_1,\\cdots,a_{2^n-1}$；\n\n第 $3$ 行，$1$ 个字符串 $S$（下标从 $1$ 开始），对于每个满足 $1\\le i\\le m$ 的整数 $i$，如果 $S_i$ 是 `B`，那么表示 Happybob 释放了一次一技能，否则他释放了一次二技能；\n\n接下来 $q$ 行，每行 $3$ 个或 $4$ 个非负整数，表示一个询问。", "outputFormat": "$q$ 行，第 $i$ 行一个整数，表示第 $i$ 个询问的结果。", "hint": "### 样例说明\n\n| 版本编号 | 灯的状态 |\n| --- | --- | \n| $0$ | $01010100$ | \n| $1$ | $01111111$ | \n| $2$ | $11111111$ |\n| $3$ | $00000000$ |\n\n对于最后一次询问，每次施法操作后的状态如下：\n\n| 操作 | 灯的状态 |\n| --- | --- | \n| 初始值 | $01010100$ | \n| `B` | $10101011$ | \n| `BD` | $111\\red11111$ | \n| `BDB` | $00000000$ |\n| `BDBD` | $10000000$ |\n| `BDBDB` | $011\\red11111$ |\n\n第 $3$ 盏灯亮了 $2$ 次。\n\n### 数据范围\n\n对于 $100\\%$ 的数据， $1\\le n\\le 18$，$1\\le q\\le 2\\times 10^5$，$a_i\\in\\{0, 1\\}$，$1\\le l\\le r\\le m\\le 2\\times 10^5$，$0\\le k<2^n$。保证 $S$ 中只含字符 `B` 与 `D`（可能不含 `B` 或不含 `D`），且 $S$ 的长度为 $m$。", "locale": "zh-CN"}}}
{"pid": "P10927", "type": "P", "difficulty": 5, "samples": [["5 7\n1 4 1\n1 3 300\n3 1 10\n1 2 16\n2 3 100\n2 5 15\n5 3 20", "1 3 5 2\n"], ["4 3\n1 2 10\n1 3 20\n1 4 30", "No solution."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge"], "title": "Sightseeing trip", "background": "", "description": "There is a travel agency in Adelton town on Zanzibar island. It has decided to offer its clients, besides many other attractions, sightseeing the town. To earn as much as possible from this attraction, the agency has accepted a shrewd decision: it is necessary to find the shortest route which begins and ends at the same place.  Your task is to write a program which finds such a route.\n\nIn the town there are $N$ crossing points numbered from $1$ to $N$ and $M$ two-way roads numbered from $1$ to $M$.  Two crossing points can be connected by multipleroads, but no road connects a crossing point with itself.  Each sightseeingroute is a sequence of road numbers $y_1$, ..., $y_k$, $k>2$. The road $y_i(1\\le i\\le k-1)$ connects crossing points $x_i$ and $x_{i+1}$, the road $y_k$ connectscrossing points $x_k$ and $x_1$. All the numbers $x_1$,...,$x_k$ should be different.The length of the sightseeing route is the sum of the lengths of all roads onthe sightseeing route, i.e. $L(y_1)+L(y_2)+$...$+L(y_k)$ where $L(y_i)$ is thelength of the road $y_i (1\\le i\\le k)$.  Your program has to find such a sightseeingroute, the length of which is minimal, or to specify that it is not possible, because there is no sightseeing route in the town.\n", "inputFormat": "The first line of input file TRIP. IN contains two positive integers: the number of crossing points $N \\le 100$ and the number of roads $M\\le 10000$. Each of the next $M$ lines describes one road. It contains 3 positive integers: the number of its first crossing point, the number of the second one, and the length of the road (a positive integer less than $500$).", "outputFormat": "There is only one line in output file TRIP.OUT. It contains either a string 'No solution.' in case there isn't any sightseeing route, or it contains the numbers of all crossing points on the shortest sightseeing route in the order how to pass them (i.e. the numbers $x_1$ to $x_k$ from our definition of a sightseeing route), separated by single spaces. If there are multiple sightseeing routes of the minimal length, you can output any one of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "Sightseeing trip", "background": "", "description": "There is a travel agency in Adelton town on Zanzibar island. It has decided to offer its clients, besides many other attractions, sightseeing the town. To earn as much as possible from this attraction, the agency has accepted a shrewd decision: it is necessary to find the shortest route which begins and ends at the same place.  Your task is to write a program which finds such a route.\n\nIn the town there are $N$ crossing points numbered from $1$ to $N$ and $M$ two-way roads numbered from $1$ to $M$.  Two crossing points can be connected by multipleroads, but no road connects a crossing point with itself.  Each sightseeingroute is a sequence of road numbers $y_1$, ..., $y_k$, $k>2$. The road $y_i(1\\le i\\le k-1)$ connects crossing points $x_i$ and $x_{i+1}$, the road $y_k$ connectscrossing points $x_k$ and $x_1$. All the numbers $x_1$,...,$x_k$ should be different.The length of the sightseeing route is the sum of the lengths of all roads onthe sightseeing route, i.e. $L(y_1)+L(y_2)+$...$+L(y_k)$ where $L(y_i)$ is thelength of the road $y_i (1\\le i\\le k)$.  Your program has to find such a sightseeingroute, the length of which is minimal, or to specify that it is not possible, because there is no sightseeing route in the town.\n", "inputFormat": "The first line of input file TRIP. IN contains two positive integers: the number of crossing points $N \\le 100$ and the number of roads $M\\le 10000$. Each of the next $M$ lines describes one road. It contains 3 positive integers: the number of its first crossing point, the number of the second one, and the length of the road (a positive integer less than $500$).", "outputFormat": "There is only one line in output file TRIP.OUT. It contains either a string 'No solution.' in case there isn't any sightseeing route, or it contains the numbers of all crossing points on the shortest sightseeing route in the order how to pass them (i.e. the numbers $x_1$ to $x_k$ from our definition of a sightseeing route), separated by single spaces. If there are multiple sightseeing routes of the minimal length, you can output any one of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "Sightseeing trip", "background": "", "description": "在桑给巴尔岛的阿德尔顿镇，有一家旅行社。除了许多其他景点外，这家旅行社决定为其客户提供该镇的观光旅游。为了从这个项目中获得尽可能多的收益，旅行社做出了一个精明的决定：需要找到一条始于同一地点并结束于同一地点的最短路线。你的任务是编写一个程序来找到这样的一条路线。\n\n在该镇有 $N$ 个编号为 1 到 $N$ 的交叉点，以及 $M$ 条编号为 1 到 $M$ 的双向道路。两个交叉点可以通过多条道路连接，但没有道路连接同一个交叉点。每条观光路线是由道路编号 $y_1$, ..., $y_k$ 组成的序列，其中 $k > 2$。道路 $y_i (1 \\le i \\le k-1)$ 连接交叉点 $x_i$ 和 $x_{i+1}$，道路 $y_k$ 连接交叉点 $x_k$ 和 $x_1$。所有的交叉点编号 $x_1$, ..., $x_k$ 应该是不同的。观光路线的长度是该路线所有道路长度的总和，即 $L(y_1)+L(y_2)+...+L(y_k)$，其中 $L(y_i)$ 是道路 $y_i (1 \\le i \\le k)$ 的长度。你的程序需要找到这样一条观光路线，使其长度最小，或者指明不可能找到这样的路线，因为该镇中没有任何观光路线。", "inputFormat": "输入第一行包含两个正整数：交叉点的数量 $N \\le 100$ 和道路的数量 $M \\le 10000$。接下来的 $M$ 行每行描述一条道路。每行包含三个正整数：第一个交叉点的编号，第二个交叉点的编号，以及道路的长度（小于 500 的正整数）。", "outputFormat": "输出只有一行。如果没有任何观光路线，则输出字符串 “No solution.”；否则，输出最短观光路线中所有交叉点的编号，按通过的顺序排列（即从定义中的 $x_1$ 到 $x_k$），编号之间用单个空格分隔。如果有多个长度相同的观光路线，可以输出其中任意一条。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10928", "type": "P", "difficulty": 4, "samples": [["2\n3\n1 2 2\n1 3 3\n4\n1 2 3\n2 3 4\n3 4 5 ", "4\n17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "并查集", "生成树"], "title": "走廊泼水节", "background": "", "description": "给定一棵 $N$ 个节点的树，要求增加若干条边，把这棵树扩充为完全图，并满足图的唯一最小生成树仍然是这棵树。\n\n求增加的边的权值总和最小是多少。\n\n**注意：** 树中的所有边权均为整数，且新加的所有边权也必须为整数。", "inputFormat": "第一行包含整数 $t$，表示共有 $t$ 组测试数据。\n\n对于每组测试数据，第一行包含整数 $N$。\n\n接下来 $N-1$ 行，每行三个整数 $X,Y,Z$，表示 $X$ 节点与 $Y$ 节点之间存在一条边，长度为 $Z$。", "outputFormat": "每组数据输出一个整数，表示权值总和最小值。\n\n每个结果占一行。", "hint": "数据保证，$1\\leq t\\leq 10$，$1 \\le N \\le 6000$，$1 \\le Z \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "走廊泼水节", "background": "", "description": "给定一棵 $N$ 个节点的树，要求增加若干条边，把这棵树扩充为完全图，并满足图的唯一最小生成树仍然是这棵树。\n\n求增加的边的权值总和最小是多少。\n\n**注意：** 树中的所有边权均为整数，且新加的所有边权也必须为整数。", "inputFormat": "第一行包含整数 $t$，表示共有 $t$ 组测试数据。\n\n对于每组测试数据，第一行包含整数 $N$。\n\n接下来 $N-1$ 行，每行三个整数 $X,Y,Z$，表示 $X$ 节点与 $Y$ 节点之间存在一条边，长度为 $Z$。", "outputFormat": "每组数据输出一个整数，表示权值总和最小值。\n\n每个结果占一行。", "hint": "数据保证，$1\\leq t\\leq 10$，$1 \\le N \\le 6000$，$1 \\le Z \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10929", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2 2\n1 3 1\n2 3 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "最短路"], "title": "黑暗城堡", "background": "", "description": "在顺利攻破 Lord lsp 的防线之后，lqr 一行人来到了 Lord lsp 的城堡下方。\n\nLord lsp 黑化之后虽然拥有了强大的超能力，能够用意念力制造建筑物，但是智商水平却没怎么增加。\n\n现在 lqr 已经搞清楚黑暗城堡有 $N$ 个房间，$M$ 条可以制造的双向通道，以及每条通道的长度。\n\nlqr 深知 Lord lsp 的想法，为了避免每次都要琢磨两个房间之间的最短路径，Lord lsp 一定会把城堡修建成树形的。\n\n但是，为了尽量提高自己的移动效率，Lord lsp 一定会使得城堡满足下面的条件：\n\n设 $D[i]$ 为如果所有的通道都被修建，第 $i$ 号房间与第 $1$ 号房间的最短路径长度；而 $S[i]$ 为实际修建的树形城堡中第 $i$ 号房间与第 $1$ 号房间的路径长度；要求对于所有整数 $i$，有 $S[i]=D[i]$ 成立。\n\n为了打败 Lord lsp，lqr 想知道有多少种不同的城堡修建方案。\n\n保证至少存在一种可行的城堡修建方案。\n\n你需要输出答案对 $2^{31}–1$ 取模之后的结果。", "inputFormat": "第一行有两个整数 $N$ 和 $M$。\n\n之后 $M$ 行，每行三个整数 $X，Y$ 和 $L$，表示可以修建 $X$ 和 $Y$ 之间的一条长度为 $L$ 的通道。", "outputFormat": "一个整数，表示答案对 $2^{31}–1$ 取模之后的结果。\n", "hint": "数据保证，$2 \\le N \\le 1000$，$N-1 \\le M \\le N(N-1)/2$，$1 \\le L \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "黑暗城堡", "background": "", "description": "在顺利攻破 Lord lsp 的防线之后，lqr 一行人来到了 Lord lsp 的城堡下方。\n\nLord lsp 黑化之后虽然拥有了强大的超能力，能够用意念力制造建筑物，但是智商水平却没怎么增加。\n\n现在 lqr 已经搞清楚黑暗城堡有 $N$ 个房间，$M$ 条可以制造的双向通道，以及每条通道的长度。\n\nlqr 深知 Lord lsp 的想法，为了避免每次都要琢磨两个房间之间的最短路径，Lord lsp 一定会把城堡修建成树形的。\n\n但是，为了尽量提高自己的移动效率，Lord lsp 一定会使得城堡满足下面的条件：\n\n设 $D[i]$ 为如果所有的通道都被修建，第 $i$ 号房间与第 $1$ 号房间的最短路径长度；而 $S[i]$ 为实际修建的树形城堡中第 $i$ 号房间与第 $1$ 号房间的路径长度；要求对于所有整数 $i$，有 $S[i]=D[i]$ 成立。\n\n为了打败 Lord lsp，lqr 想知道有多少种不同的城堡修建方案。\n\n保证至少存在一种可行的城堡修建方案。\n\n你需要输出答案对 $2^{31}–1$ 取模之后的结果。", "inputFormat": "第一行有两个整数 $N$ 和 $M$。\n\n之后 $M$ 行，每行三个整数 $X，Y$ 和 $L$，表示可以修建 $X$ 和 $Y$ 之间的一条长度为 $L$ 的通道。", "outputFormat": "一个整数，表示答案对 $2^{31}–1$ 取模之后的结果。\n", "hint": "数据保证，$2 \\le N \\le 1000$，$N-1 \\le M \\le N(N-1)/2$，$1 \\le L \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10930", "type": "P", "difficulty": 6, "samples": [["6\n1 2 1\n1 3 5\n4 1 7\n4 5 3\n6 4 2\n10\n+ 3\n+ 1\n?\n+ 6\n?\n+ 5\n?\n- 6\n- 3\n?", "5\n14\n17\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["最近公共祖先 LCA"], "title": "异象石", "background": "", "description": "Adera 是 Microsoft 应用商店中的一款解谜游戏。\n\n异象石是进入 Adera 中异时空的引导物，在 Adera 的异时空中有一张地图。\n\n这张地图上有 $N$ 个点，有 $N-1$ 条双向边把它们连通起来。\n\n起初地图上没有任何异象石，在接下来的 $M$ 个时刻中，每个时刻会发生以下三种类型的事件之一：\n\n  1. 地图的某个点上出现了异象石（已经出现的不会再次出现）；\n  2. 地图某个点上的异象石被摧毁（不会摧毁没有异象石的点）；\n  3. 向玩家询问使所有异象石所在的点连通的边集的总长度最小是多少。\n\n请你作为玩家回答这些问题。", "inputFormat": "第一行有一个整数 $N$，表示点的个数。\n\n接下来 $N-1$ 行每行三个整数 $x,y,z$，表示点 $x$ 和 $y$ 之间有一条长度为 $z$ 的双向边。\n\n第 $N+1$ 行有一个正整数 $M$。\n\n接下来 $M$ 行每行是一个事件，事件是以下三种格式之一：\n\n  * `+ x` 表示点 $x$ 上出现了异象石\n  * `- x` 表示点 $x$ 上的异象石被摧毁\n  * `?` 表示询问使当前所有异象石所在的点连通所需的边集的总长度最小是多少。", "outputFormat": "对于每个 `?` 事件，输出一个整数表示答案。\n", "hint": "数据保证，$1 \\le N,M \\le 10^5$，$1 \\le x,y \\le N$，$x \\neq y$，$1 \\le z \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "异象石", "background": "", "description": "Adera 是 Microsoft 应用商店中的一款解谜游戏。\n\n异象石是进入 Adera 中异时空的引导物，在 Adera 的异时空中有一张地图。\n\n这张地图上有 $N$ 个点，有 $N-1$ 条双向边把它们连通起来。\n\n起初地图上没有任何异象石，在接下来的 $M$ 个时刻中，每个时刻会发生以下三种类型的事件之一：\n\n  1. 地图的某个点上出现了异象石（已经出现的不会再次出现）；\n  2. 地图某个点上的异象石被摧毁（不会摧毁没有异象石的点）；\n  3. 向玩家询问使所有异象石所在的点连通的边集的总长度最小是多少。\n\n请你作为玩家回答这些问题。", "inputFormat": "第一行有一个整数 $N$，表示点的个数。\n\n接下来 $N-1$ 行每行三个整数 $x,y,z$，表示点 $x$ 和 $y$ 之间有一条长度为 $z$ 的双向边。\n\n第 $N+1$ 行有一个正整数 $M$。\n\n接下来 $M$ 行每行是一个事件，事件是以下三种格式之一：\n\n  * `+ x` 表示点 $x$ 上出现了异象石\n  * `- x` 表示点 $x$ 上的异象石被摧毁\n  * `?` 表示询问使当前所有异象石所在的点连通所需的边集的总长度最小是多少。", "outputFormat": "对于每个 `?` 事件，输出一个整数表示答案。\n", "hint": "数据保证，$1 \\le N,M \\le 10^5$，$1 \\le x,y \\le N$，$x \\neq y$，$1 \\le z \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10931", "type": "P", "difficulty": 4, "samples": [["4 1\n1 2\n2 3\n1 4\n3 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["最近公共祖先 LCA", "树链剖分", "差分"], "title": "闇の連鎖", "background": "", "description": "传说中的暗之连锁被人们称为 Dark。\n\nDark 是人类内心的黑暗的产物，古今中外的勇者们都试图打倒它。\n\n经过研究，你发现 Dark 呈现无向图的结构，图中有 $N$ 个节点和两类边，一类边被称为主要边，而另一类被称为附加边。\n\nDark 有 $N - 1$ 条主要边，并且 Dark 的任意两个节点之间都存在一条只由主要边构成的路径。\n\n另外，Dark 还有 $M$ 条附加边。 \n\n你的任务是把 Dark 斩为不连通的两部分。\n\n一开始 Dark 的附加边都处于无敌状态，你只能选择一条主要边切断。\n\n一旦你切断了一条主要边，Dark 就会进入防御模式，主要边会变为无敌的而附加边可以被切断。\n\n但是你的能力只能再切断 Dark 的一条附加边。\n\n现在你想要知道，一共有多少种方案可以击败 Dark。\n\n注意，就算你第一步切断主要边之后就已经把 Dark 斩为两截，你也需要切断一条附加边才算击败了 Dark。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。 \n\n之后 $N - 1$ 行，每行包括两个整数 $A$ 和 $B$，表示 $A$ 和 $B$ 之间有一条主要边。 \n\n之后 $M$ 行以同样的格式给出附加边。", "outputFormat": "输出一个整数表示答案。", "hint": "数据保证，$1\\le N \\le 100000$，$1\\le M \\le 200000$，数据保证答案不超过 $2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "闇の連鎖", "background": "", "description": "传说中的暗之连锁被人们称为 Dark。\n\nDark 是人类内心的黑暗的产物，古今中外的勇者们都试图打倒它。\n\n经过研究，你发现 Dark 呈现无向图的结构，图中有 $N$ 个节点和两类边，一类边被称为主要边，而另一类被称为附加边。\n\nDark 有 $N - 1$ 条主要边，并且 Dark 的任意两个节点之间都存在一条只由主要边构成的路径。\n\n另外，Dark 还有 $M$ 条附加边。 \n\n你的任务是把 Dark 斩为不连通的两部分。\n\n一开始 Dark 的附加边都处于无敌状态，你只能选择一条主要边切断。\n\n一旦你切断了一条主要边，Dark 就会进入防御模式，主要边会变为无敌的而附加边可以被切断。\n\n但是你的能力只能再切断 Dark 的一条附加边。\n\n现在你想要知道，一共有多少种方案可以击败 Dark。\n\n注意，就算你第一步切断主要边之后就已经把 Dark 斩为两截，你也需要切断一条附加边才算击败了 Dark。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。 \n\n之后 $N - 1$ 行，每行包括两个整数 $A$ 和 $B$，表示 $A$ 和 $B$ 之间有一条主要边。 \n\n之后 $M$ 行以同样的格式给出附加边。", "outputFormat": "输出一个整数表示答案。", "hint": "数据保证，$1\\le N \\le 100000$，$1\\le M \\le 200000$，数据保证答案不超过 $2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P10932", "type": "P", "difficulty": 6, "samples": [["5 4 2\n1 2 1\n1 3 1\n2 4 1\n2 5 1\n3 5\n2 1", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["圆方树"], "title": "Freda的传呼机", "background": "", "description": "为了随时与 rainbow 快速交流，Freda 制造了两部传呼机。\n\nFreda 和 rainbow 所在的地方有 $N$ 座房屋、$M$ 条双向光缆。\n\n每条光缆连接两座房屋，传呼机发出的信号只能沿着光缆传递，并且传呼机的信号从光缆的其中一端传递到另一端需要花费 $t$ 单位时间。\n\n现在 Freda 要进行 $Q$ 次试验，每次选取两座房屋，并想知道传呼机的信号在这两座房屋之间传递至少需要多长时间。\n\n$N$ 座房屋通过光缆一定是连通的，并且这 $M$ 条光缆有以下三类连接情况：\n\n  * $A$：光缆不形成环，也就是光缆仅有 $N-1$ 条。\n  * $B$：光缆只形成一个环，也就是光缆仅有 $N$ 条。\n  * $C$：每条光缆仅在一个环中。\n\n请你帮帮他们。", "inputFormat": "第一行包含三个用空格隔开的整数，$N、M$ 和 $Q$。\n\n接下来 $M$ 行每行三个整数 $x、y、t$，表示房屋 $x$ 和 $y$ 之间有一条传递时间为 $t$ 的光缆。\n\n最后 $Q$ 行每行两个整数 $x、y$，表示 Freda 想知道在 $x$ 和 $y$ 之间传呼最少需要多长时间。", "outputFormat": "输出 $Q$ 行，每行一个整数，表示 Freda 每次试验的结果。\n", "hint": "数据保证，$2 \\le N \\le 10000$，$N-1 \\le M \\le 12000$，$Q = 10000$，$1 \\le x,y \\le N$，$1 \\le t < 32768$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Freda的传呼机", "background": "", "description": "为了随时与 rainbow 快速交流，Freda 制造了两部传呼机。\n\nFreda 和 rainbow 所在的地方有 $N$ 座房屋、$M$ 条双向光缆。\n\n每条光缆连接两座房屋，传呼机发出的信号只能沿着光缆传递，并且传呼机的信号从光缆的其中一端传递到另一端需要花费 $t$ 单位时间。\n\n现在 Freda 要进行 $Q$ 次试验，每次选取两座房屋，并想知道传呼机的信号在这两座房屋之间传递至少需要多长时间。\n\n$N$ 座房屋通过光缆一定是连通的，并且这 $M$ 条光缆有以下三类连接情况：\n\n  * $A$：光缆不形成环，也就是光缆仅有 $N-1$ 条。\n  * $B$：光缆只形成一个环，也就是光缆仅有 $N$ 条。\n  * $C$：每条光缆仅在一个环中。\n\n请你帮帮他们。", "inputFormat": "第一行包含三个用空格隔开的整数，$N、M$ 和 $Q$。\n\n接下来 $M$ 行每行三个整数 $x、y、t$，表示房屋 $x$ 和 $y$ 之间有一条传递时间为 $t$ 的光缆。\n\n最后 $Q$ 行每行两个整数 $x、y$，表示 Freda 想知道在 $x$ 和 $y$ 之间传呼最少需要多长时间。", "outputFormat": "输出 $Q$ 行，每行一个整数，表示 Freda 每次试验的结果。\n", "hint": "数据保证，$2 \\le N \\le 10000$，$N-1 \\le M \\le 12000$，$Q = 10000$，$1 \\le x,y \\le N$，$1 \\le t < 32768$。", "locale": "zh-CN"}}}
{"pid": "P10933", "type": "P", "difficulty": 5, "samples": [["6\n2 3 1 3 6 5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形 DP", "基环树"], "title": "创世纪", "background": "", "description": "上帝手中有 $N$ 种世界元素，每种元素可以限制另外 $1$ 种元素，把第 $i$ 种世界元素能够限制的那种世界元素记为 $A[i]$。\n\n现在，上帝要把它们中的一部分投放到一个新的空间中去建造世界。\n\n为了世界的和平与安宁，上帝希望所有被投放的世界元素都至少有一个能够限制它的世界元素没有被投放。\n\n上帝希望知道，在此前提下，他最多可以投放多少种世界元素？", "inputFormat": "第一行是一个整数 $N$，表示世界元素的数目。\n\n第二行有 $N$ 个整数 $A[1], A[2], \\dots, A[N]$。$A[i]$ 表示第 $i$ 个世界元素能够限制的世界元素的编号。", "outputFormat": "一个整数，表示最多可以投放的世界元素的数目。\n", "hint": "数据保证，$1\\le N \\le 10^6$，$1 \\le A[i] \\le N$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "创世纪", "background": "", "description": "上帝手中有 $N$ 种世界元素，每种元素可以限制另外 $1$ 种元素，把第 $i$ 种世界元素能够限制的那种世界元素记为 $A[i]$。\n\n现在，上帝要把它们中的一部分投放到一个新的空间中去建造世界。\n\n为了世界的和平与安宁，上帝希望所有被投放的世界元素都至少有一个能够限制它的世界元素没有被投放。\n\n上帝希望知道，在此前提下，他最多可以投放多少种世界元素？", "inputFormat": "第一行是一个整数 $N$，表示世界元素的数目。\n\n第二行有 $N$ 个整数 $A[1], A[2], \\dots, A[N]$。$A[i]$ 表示第 $i$ 个世界元素能够限制的世界元素的编号。", "outputFormat": "一个整数，表示最多可以投放的世界元素的数目。\n", "hint": "数据保证，$1\\le N \\le 10^6$，$1 \\le A[i] \\le N$", "locale": "zh-CN"}}}
{"pid": "P10934", "type": "P", "difficulty": 3, "samples": [["9 4\n1 4 2\n4 6 2\n8 9 2\n3 5 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "差分约束"], "title": "西瓜种植", "background": "笨笨：小西瓜，小西瓜~\n\n路人甲：不会呀，这西瓜明明就大着啊……\n\n笨笨：那……大西瓜，大西瓜~\n\n路人甲：这么快就改口了……\n\n笨笨：西瓜西瓜~可爱的西瓜~", "description": "笨笨种了一块西瓜地，但这块西瓜地的种植范围是一条直线的……\n  \n  笨笨在一番研究过后，得出了 $m$ 个结论，这 $m$ 个结论可以使他收获的西瓜最多。\n  \n  笨笨的结论是这样的：\n  \n  从西瓜地 $b$ 处到 $e$ 处至少要种植 $t$ 个西瓜，这个范围的收获就可以最大化。\n  \n  笨笨不想那么辛苦，所以他想种植的西瓜尽量少，而又满足每一个所得的结论。", "inputFormat": "第一行两个数 $n$, $m$（$0<n \\le 5000$，$0 \\le m\\le 3000$），表示笨笨的西瓜地长 $n$，笨笨得出 $m$ 个结论。\n\n接下来 $m$ 行表示笨笨的 $m$ 个结论，每行三个数 $b$, $e$, $t$（$1 \\le b\\le e\\le n$，$0 \\le t\\le e-b+1$）。", "outputFormat": "输出笨笨最少需种植多少西瓜。", "hint": "基本上来说，笨笨的西瓜地就是一条壮观的线……", "locale": "zh-CN", "translations": {"zh-CN": {"title": "西瓜种植", "background": "笨笨：小西瓜，小西瓜~\n\n路人甲：不会呀，这西瓜明明就大着啊……\n\n笨笨：那……大西瓜，大西瓜~\n\n路人甲：这么快就改口了……\n\n笨笨：西瓜西瓜~可爱的西瓜~", "description": "笨笨种了一块西瓜地，但这块西瓜地的种植范围是一条直线的……\n  \n  笨笨在一番研究过后，得出了 $m$ 个结论，这 $m$ 个结论可以使他收获的西瓜最多。\n  \n  笨笨的结论是这样的：\n  \n  从西瓜地 $b$ 处到 $e$ 处至少要种植 $t$ 个西瓜，这个范围的收获就可以最大化。\n  \n  笨笨不想那么辛苦，所以他想种植的西瓜尽量少，而又满足每一个所得的结论。", "inputFormat": "第一行两个数 $n$, $m$（$0<n \\le 5000$，$0 \\le m\\le 3000$），表示笨笨的西瓜地长 $n$，笨笨得出 $m$ 个结论。\n\n接下来 $m$ 行表示笨笨的 $m$ 个结论，每行三个数 $b$, $e$, $t$（$1 \\le b\\le e\\le n$，$0 \\le t\\le e-b+1$）。", "outputFormat": "输出笨笨最少需种植多少西瓜。", "hint": "基本上来说，笨笨的西瓜地就是一条壮观的线……", "locale": "zh-CN"}}}
{"pid": "P10935", "type": "P", "difficulty": 5, "samples": [["5 7 \n1 1 2 \n2 3 2 \n4 4 1 \n3 4 5 \n5 4 5 \n2 3 5 \n4 5 1 ", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "拓扑排序", "最短路", "Tarjan", "差分约束"], "title": "银河", "background": "", "description": "银河中的恒星浩如烟海，但是我们只关注那些最亮的恒星。\n\n我们用一个正整数来表示恒星的亮度，数值越大则恒星就越亮，恒星的亮度最暗是 $1$。\n\n现在对于 $N$ 颗我们关注的恒星，有 $M$ 对亮度之间的相对关系已经判明。\n\n你的任务就是求出这 $N$ 颗恒星的亮度值总和至少有多大。", "inputFormat": "第一行给出两个整数 $N$ 和 $M$。 \n\n之后 $M$ 行，每行三个整数 $T, A, B$，表示一对恒星 $(A, B)$ 之间的亮度关系。恒星的编号从 $1$ 开始。 \n\n如果 $T = 1$，说明 $A$ 和 $B$ 亮度相等。  \n如果 $T = 2$，说明 $A$ 的亮度小于 $B$ 的亮度。  \n如果 $T = 3$，说明 $A$ 的亮度不小于 $B$ 的亮度。  \n如果 $T = 4$，说明 $A$ 的亮度大于 $B$ 的亮度。  \n如果 $T = 5$，说明 $A$ 的亮度不大于 $B$ 的亮度。", "outputFormat": "输出一个整数表示结果。\n\n若无解，则输出 $-1$。", "hint": "数据保证，$1\\le N \\le 100000$，$1\\le M \\le 100000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "银河", "background": "", "description": "银河中的恒星浩如烟海，但是我们只关注那些最亮的恒星。\n\n我们用一个正整数来表示恒星的亮度，数值越大则恒星就越亮，恒星的亮度最暗是 $1$。\n\n现在对于 $N$ 颗我们关注的恒星，有 $M$ 对亮度之间的相对关系已经判明。\n\n你的任务就是求出这 $N$ 颗恒星的亮度值总和至少有多大。", "inputFormat": "第一行给出两个整数 $N$ 和 $M$。 \n\n之后 $M$ 行，每行三个整数 $T, A, B$，表示一对恒星 $(A, B)$ 之间的亮度关系。恒星的编号从 $1$ 开始。 \n\n如果 $T = 1$，说明 $A$ 和 $B$ 亮度相等。  \n如果 $T = 2$，说明 $A$ 的亮度小于 $B$ 的亮度。  \n如果 $T = 3$，说明 $A$ 的亮度不小于 $B$ 的亮度。  \n如果 $T = 4$，说明 $A$ 的亮度大于 $B$ 的亮度。  \n如果 $T = 5$，说明 $A$ 的亮度不大于 $B$ 的亮度。", "outputFormat": "输出一个整数表示结果。\n\n若无解，则输出 $-1$。", "hint": "数据保证，$1\\le N \\le 100000$，$1\\le M \\le 100000$。", "locale": "zh-CN"}}}
{"pid": "P10936", "type": "P", "difficulty": 6, "samples": [["3 3 30 20 1\n0 0\n0 50\n50 0\n50 50\n0 1000\n1000 0", "91.500000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "Special Judge", "图论建模", "二分图"], "title": "导弹防御塔", "background": "", "description": "Freda 的城堡遭受了 $M$ 个入侵者的攻击！\n\nFreda 控制着 $N$ 座导弹防御塔，每座塔都有足够数量的导弹，但是每次只能发射一枚。\n\n在发射导弹时，导弹需要 $T_1$ 秒才能从防御塔中射出，而在发射导弹后，发射这枚导弹的防御塔需要 $T_2$ 分钟来冷却。\n\n所有导弹都有相同的匀速飞行速度 $V$，并且会沿着距离最短的路径去打击目标。\n\n计算防御塔到目标的距离 $Distance$ 时，你只需要计算水平距离，而忽略导弹飞行的高度。\n\n导弹在空中飞行的时间就是 $Distance/V$ 分钟，导弹到达目标后可以立即将它击毁。\n\n现在，给出 $N$ 座导弹防御塔的坐标，$M$ 个入侵者的坐标，$T_1,T_2$ 和 $V$。\n\n因为 Freda 的小伙伴 Rainbow 就要来拜访城堡了，你需要求出至少多少分钟才能击退所有的入侵者。", "inputFormat": "第一行五个正整数 $N,M,T_1,T_2,V$。\n\n接下来 $M$ 行每行两个整数，代表入侵者的坐标。\n\n接下来 $N$ 行每行两个整数，代表防御塔的坐标。", "outputFormat": "输出一个实数，表示最少需要多少分钟才能击中所有的入侵者，四舍五入保留六位小数。与标准答案的差距相差不超过 $10^{-5}$ 即认为答案正确。", "hint": "数据保证 $1 \\le N,M \\le 50$，坐标绝对值不超过 $10000$，$T_1,T_2,V$ 为不超过 $2000$ 的正整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "导弹防御塔", "background": "", "description": "Freda 的城堡遭受了 $M$ 个入侵者的攻击！\n\nFreda 控制着 $N$ 座导弹防御塔，每座塔都有足够数量的导弹，但是每次只能发射一枚。\n\n在发射导弹时，导弹需要 $T_1$ 秒才能从防御塔中射出，而在发射导弹后，发射这枚导弹的防御塔需要 $T_2$ 分钟来冷却。\n\n所有导弹都有相同的匀速飞行速度 $V$，并且会沿着距离最短的路径去打击目标。\n\n计算防御塔到目标的距离 $Distance$ 时，你只需要计算水平距离，而忽略导弹飞行的高度。\n\n导弹在空中飞行的时间就是 $Distance/V$ 分钟，导弹到达目标后可以立即将它击毁。\n\n现在，给出 $N$ 座导弹防御塔的坐标，$M$ 个入侵者的坐标，$T_1,T_2$ 和 $V$。\n\n因为 Freda 的小伙伴 Rainbow 就要来拜访城堡了，你需要求出至少多少分钟才能击退所有的入侵者。", "inputFormat": "第一行五个正整数 $N,M,T_1,T_2,V$。\n\n接下来 $M$ 行每行两个整数，代表入侵者的坐标。\n\n接下来 $N$ 行每行两个整数，代表防御塔的坐标。", "outputFormat": "输出一个实数，表示最少需要多少分钟才能击中所有的入侵者，四舍五入保留六位小数。与标准答案的差距相差不超过 $10^{-5}$ 即认为答案正确。", "hint": "数据保证 $1 \\le N,M \\le 50$，坐标绝对值不超过 $10000$，$T_1,T_2,V$ 为不超过 $2000$ 的正整数。", "locale": "zh-CN"}}}
{"pid": "P10937", "type": "P", "difficulty": 5, "samples": [["8 8 0", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["二分图"], "title": "車的放置", "background": "", "description": "给定一个 $N$ 行 $M$ 列的棋盘，已知某些格子禁止放置。\n\n问棋盘上最多能放多少个不能互相攻击的車。\n\n車放在格子里，攻击范围与中国象棋的“車”一致。", "inputFormat": "第一行包含三个整数 $N,M,T$，其中 $T$ 表示禁止放置的格子的数量。\n\n接下来 $T$ 行每行包含两个整数 $x$ 和 $y$，表示位于第 $x$ 行第 $y$ 列的格子禁止放置，行列数从 $1$ 开始。\n\n保证禁止放置的格子互不相同。", "outputFormat": "输出一个整数，表示结果。\n", "hint": "数据保证，$1 \\le N,M \\le 200$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "車的放置", "background": "", "description": "给定一个 $N$ 行 $M$ 列的棋盘，已知某些格子禁止放置。\n\n问棋盘上最多能放多少个不能互相攻击的車。\n\n車放在格子里，攻击范围与中国象棋的“車”一致。", "inputFormat": "第一行包含三个整数 $N,M,T$，其中 $T$ 表示禁止放置的格子的数量。\n\n接下来 $T$ 行每行包含两个整数 $x$ 和 $y$，表示位于第 $x$ 行第 $y$ 列的格子禁止放置，行列数从 $1$ 开始。\n\n保证禁止放置的格子互不相同。", "outputFormat": "输出一个整数，表示结果。\n", "hint": "数据保证，$1 \\le N,M \\le 200$。", "locale": "zh-CN"}}}
{"pid": "P10938", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2\n3 2\n3 4\n4 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "二分图"], "title": "Vani和Cl2捉迷藏", "background": "", "description": "Vani 和 cl2 在一片树林里捉迷藏。\n\n这片树林里有 $N$ 座房子，$M$ 条有向道路，组成了一张有向无环图。\n\n树林里的树非常茂密，足以遮挡视线，但是沿着道路望去，却是视野开阔。\n\n如果从房子 $A$ 沿着路走下去能够到达 $B$，那么在 $A$ 和 $B$ 里的人是能够相互望见的。\n\n现在 cl2 要在这 $N$ 座房子里选择 $K$ 座作为藏身点，同时 Vani 也专挑 cl2 作为藏身点的房子进去寻找，为了避免被 Vani 看见，cl2 要求这 $K$ 个藏身点的任意两个之间都没有路径相连。\n\n为了让 Vani 更难找到自己，cl2 想知道最多能选出多少个藏身点。", "inputFormat": "输入数据的第一行是两个整数 $N$ 和 $M$。\n\n接下来 $M$ 行，每行两个整数 $x,y$，表示一条从 $x$ 到 $y$ 的有向道路。", "outputFormat": "输出一个整数，表示最多能选取的藏身点个数。\n", "hint": "- 对于 $20\\%$ 的数据，$1\\leq N\\leq 10$，$1\\leq M\\leq 20$。\n- 对于 $60\\%$ 的数据，$1\\leq N\\leq 100$，$1\\leq M\\leq 1000$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 200$，$1\\leq M\\leq 30000$，$1\\leq x,y\\leq N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Vani和Cl2捉迷藏", "background": "", "description": "Vani 和 cl2 在一片树林里捉迷藏。\n\n这片树林里有 $N$ 座房子，$M$ 条有向道路，组成了一张有向无环图。\n\n树林里的树非常茂密，足以遮挡视线，但是沿着道路望去，却是视野开阔。\n\n如果从房子 $A$ 沿着路走下去能够到达 $B$，那么在 $A$ 和 $B$ 里的人是能够相互望见的。\n\n现在 cl2 要在这 $N$ 座房子里选择 $K$ 座作为藏身点，同时 Vani 也专挑 cl2 作为藏身点的房子进去寻找，为了避免被 Vani 看见，cl2 要求这 $K$ 个藏身点的任意两个之间都没有路径相连。\n\n为了让 Vani 更难找到自己，cl2 想知道最多能选出多少个藏身点。", "inputFormat": "输入数据的第一行是两个整数 $N$ 和 $M$。\n\n接下来 $M$ 行，每行两个整数 $x,y$，表示一条从 $x$ 到 $y$ 的有向道路。", "outputFormat": "输出一个整数，表示最多能选取的藏身点个数。\n", "hint": "- 对于 $20\\%$ 的数据，$1\\leq N\\leq 10$，$1\\leq M\\leq 20$。\n- 对于 $60\\%$ 的数据，$1\\leq N\\leq 100$，$1\\leq M\\leq 1000$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 200$，$1\\leq M\\leq 30000$，$1\\leq x,y\\leq N$。", "locale": "zh-CN"}}}
{"pid": "P10939", "type": "P", "difficulty": 5, "samples": [["2 3 0", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "网络流", "二分图"], "title": "骑士放置", "background": "", "description": "给定一个 $N \\times M$ 的棋盘，有一些格子禁止放棋子。\n\n问棋盘上最多能放多少个不能互相攻击的骑士（国际象棋的“骑士”，类似于中国象棋的“马”，按照“日”字攻击，但没有中国象棋“别马腿”的规则）。", "inputFormat": "第一行包含三个整数 $N,M,T$，其中 $T$ 表示禁止放置的格子的数量。\n\n接下来 $T$ 行每行包含两个整数 $x$ 和 $y$，表示位于第 $x$ 行第 $y$ 列的格子禁止放置，行列数从 $1$ 开始。", "outputFormat": "输出一个整数表示结果。\n", "hint": "$1 \\le N,M \\le 100$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "骑士放置", "background": "", "description": "给定一个 $N \\times M$ 的棋盘，有一些格子禁止放棋子。\n\n问棋盘上最多能放多少个不能互相攻击的骑士（国际象棋的“骑士”，类似于中国象棋的“马”，按照“日”字攻击，但没有中国象棋“别马腿”的规则）。", "inputFormat": "第一行包含三个整数 $N,M,T$，其中 $T$ 表示禁止放置的格子的数量。\n\n接下来 $T$ 行每行包含两个整数 $x$ 和 $y$，表示位于第 $x$ 行第 $y$ 列的格子禁止放置，行列数从 $1$ 开始。", "outputFormat": "输出一个整数表示结果。\n", "hint": "$1 \\le N,M \\le 100$", "locale": "zh-CN"}}}
{"pid": "P10940", "type": "P", "difficulty": 6, "samples": [["3 3 6\n1 1\n2 1\n2 2\n3 1\n3 2\n3 3", "3\n2 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "舞动的夜晚", "background": "", "description": "$L$ 公司和 $H$ 公司举办了一次联谊晚会。\n\n晚会上，$L$ 公司的 $N$ 位员工和 $H$ 公司的 $M$ 位员工打算进行一场交际舞。\n\n在这些领导中，一些 $L$ 公司的员工和 $H$ 公司的员工之间是互相认识的，这样的认识关系一共有 $T$ 对。\n\n舞会上，每位员工会尝试选择一名 Ta 认识的对方公司的员工作为舞伴，并且每位员工至多跳一支舞。\n\n完成的交际舞的数量越多，晚会的气氛就越热烈。\n\n顾及到晚会的气氛，员工们希望知道，哪些员工之间如果进行了交际舞，就会使整场晚会能够完成的交际舞的最大数量减小。", "inputFormat": "第一行三个整数 $N、M、T$。\n\n接下来 $T$ 行每行两个整数 $x、y$，表示 $L$ 公司的员工 $x$ 和 $H$ 公司的员工 $y$ 互相认识。", "outputFormat": "第一行一个整数 $cnt$，表示进行了交际舞后会使整场晚会能够完成的交际舞的最大数量减小的员工有多少对。\n\n第二行 $cnt$ 个整数，升序输出这样的一对员工的认识关系的编号（他们的认识关系是在输入数据中读入的第几条认识关系）。\n\n如果 $cnt=0$，输出一个空行。", "hint": "数据保证，$1 \\le N,M \\le 10000$，$1 \\le T \\le 100000$，$1 \\le x \\le N$，$1 \\le y \\le M$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "舞动的夜晚", "background": "", "description": "$L$ 公司和 $H$ 公司举办了一次联谊晚会。\n\n晚会上，$L$ 公司的 $N$ 位员工和 $H$ 公司的 $M$ 位员工打算进行一场交际舞。\n\n在这些领导中，一些 $L$ 公司的员工和 $H$ 公司的员工之间是互相认识的，这样的认识关系一共有 $T$ 对。\n\n舞会上，每位员工会尝试选择一名 Ta 认识的对方公司的员工作为舞伴，并且每位员工至多跳一支舞。\n\n完成的交际舞的数量越多，晚会的气氛就越热烈。\n\n顾及到晚会的气氛，员工们希望知道，哪些员工之间如果进行了交际舞，就会使整场晚会能够完成的交际舞的最大数量减小。", "inputFormat": "第一行三个整数 $N、M、T$。\n\n接下来 $T$ 行每行两个整数 $x、y$，表示 $L$ 公司的员工 $x$ 和 $H$ 公司的员工 $y$ 互相认识。", "outputFormat": "第一行一个整数 $cnt$，表示进行了交际舞后会使整场晚会能够完成的交际舞的最大数量减小的员工有多少对。\n\n第二行 $cnt$ 个整数，升序输出这样的一对员工的认识关系的编号（他们的认识关系是在输入数据中读入的第几条认识关系）。\n\n如果 $cnt=0$，输出一个空行。", "hint": "数据保证，$1 \\le N,M \\le 10000$，$1 \\le T \\le 100000$，$1 \\le x \\le N$，$1 \\le y \\le M$。", "locale": "zh-CN"}}}
{"pid": "P10941", "type": "P", "difficulty": 5, "samples": [["1 \n1 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 \n5\n0\n23\n22\n1\n10", "1"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2000", "O2优化", "差分约束", "ICPC"], "title": "[ICPC-Tehran 2000] Cashier Employment", "background": null, "description": "A supermarket in Tehran is open 24 hours a day every day and needs a number of cashiers to fit its need. The supermarket manager has hired you to help him, solve his problem. The problem is that the supermarket needs different number of cashiers at different times of each day (for example, a few cashiers after midnight, and many in the afternoon) to provide good service to its customers, and he wants to hire the least number of cashiers for this job.\n\nThe manager has provided you with the least number of cashiers needed for every one-hour slot of the day. This data is given as R(0), R(1), ..., R(23): R(0) represents the least number of cashiers needed from midnight to 1:00 A.M., R(1) shows this number for duration of 1:00 A.M. to 2:00 A.M., and so on. Note that these numbers are the same every day. There are N qualified applicants for this job. Each applicant i works non-stop once each 24 hours in a shift of exactly 8 hours starting from a specified hour, say ti (0 <= ti <= 23), exactly from the start of the hour mentioned. That is, if the ith applicant is hired, he/she will work starting from ti o'clock sharp for 8 hours. Cashiers do not replace one another and work exactly as scheduled, and there are enough cash registers and counters for those who are hired.\n\nYou are to write a program to read the R(i) 's for i=0..23 and ti 's for i=1..N that are all, non-negative integer numbers and compute the least number of cashiers needed to be employed to meet the mentioned constraints. Note that there can be more cashiers than the least number needed for a specific slot.", "inputFormat": "The first line of input is the number of test cases for this problem (at most 20). Each test case starts with 24 integer numbers representing the R(0), R(1), ..., R(23) in one line (R(i) can be at most 1000). Then there is N, number of applicants in another line (0 <= N <= 1000), after which come N lines each containing one ti (0 <= ti <= 23). There are no blank lines between test cases.", "outputFormat": "For each test case, the output should be written in one line, which is the least number of cashiers needed. If there is no solution for the test case, you should write No Solution for that case.", "hint": null, "locale": "en", "translations": {"en": {"title": "[ICPC-Tehran 2000] Cashier Employment", "background": null, "description": "A supermarket in Tehran is open 24 hours a day every day and needs a number of cashiers to fit its need. The supermarket manager has hired you to help him, solve his problem. The problem is that the supermarket needs different number of cashiers at different times of each day (for example, a few cashiers after midnight, and many in the afternoon) to provide good service to its customers, and he wants to hire the least number of cashiers for this job.\n\nThe manager has provided you with the least number of cashiers needed for every one-hour slot of the day. This data is given as R(0), R(1), ..., R(23): R(0) represents the least number of cashiers needed from midnight to 1:00 A.M., R(1) shows this number for duration of 1:00 A.M. to 2:00 A.M., and so on. Note that these numbers are the same every day. There are N qualified applicants for this job. Each applicant i works non-stop once each 24 hours in a shift of exactly 8 hours starting from a specified hour, say ti (0 <= ti <= 23), exactly from the start of the hour mentioned. That is, if the ith applicant is hired, he/she will work starting from ti o'clock sharp for 8 hours. Cashiers do not replace one another and work exactly as scheduled, and there are enough cash registers and counters for those who are hired.\n\nYou are to write a program to read the R(i) 's for i=0..23 and ti 's for i=1..N that are all, non-negative integer numbers and compute the least number of cashiers needed to be employed to meet the mentioned constraints. Note that there can be more cashiers than the least number needed for a specific slot.", "inputFormat": "The first line of input is the number of test cases for this problem (at most 20). Each test case starts with 24 integer numbers representing the R(0), R(1), ..., R(23) in one line (R(i) can be at most 1000). Then there is N, number of applicants in another line (0 <= N <= 1000), after which come N lines each containing one ti (0 <= ti <= 23). There are no blank lines between test cases.", "outputFormat": "For each test case, the output should be written in one line, which is the least number of cashiers needed. If there is no solution for the test case, you should write No Solution for that case.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[ICPC-Tehran 2000] Cashier Employment", "background": null, "description": "德黑兰的一家超市每天都营业 $24$ 小时，需要一些收银员来满足需求。超市经理雇佣了你来帮助他解决他的问题。问题是，这个超市在不同时间需要不同数量的收银员（比如，午夜的时候需要较少的收银员，而在正午时分需要很多）来给他的客户提供很好的服务，并且他需要雇佣尽量少的收银员。\n\n经理给你提供了对于一天中每个小时所需要的最少的收银员数量。数据由 $24$ 个整数 $R(0),R(1),\\dots,R(23)$ 表示：$R(0)$ 代表从午夜到凌晨 $1:00$ 需要的最少收银员数量，$R(1)$ 表示从 $1:00$ 到 $2:00$ 所需要的，以此类推。注意这些数字在每一天都是相同的。这个工作有 $N$ 个合格的申请者，第 $i$ 个申请者每天从约定的时间 $t_i$（代表 $t_i:00$ 时刻，$0 \\le t_i \\le 23$）开始每天连续不间断地工作 $8$ 小时。收银员不会代替别人工作，并且会严格按照计划执行，并且有足够的收银机和柜台供他们使用。\n\n你需要写一个程序，对于所有 $i=0\\dots 23$ 输入 $R(i)$ 并且对于所有 $i=1\\dots N$ 输入 $t_i$（都是非负整数），计算满足上述条件所需要的所需要雇佣的最少收银员数量。注意，实际上在某一时刻在工作的收银员数量可能超过限制条件，此时也是合法的。", "inputFormat": "输入的第一行是这个题目的测试用例数量（最多 $20$）。每个测试的第一行有 $24$ 个数字，分别代表 $R(0),R(1),\\dots,R(23)$（$R(i)$ 最多 $100$）。第二行有一个数字 $N$（$0 \\le N \\le 1000$），即应聘者数量。之后的 $N$ 行，第 $i$ 行代表 $t_i$（$0 \\le t_i \\le 23$）。各组测试用例之间没有空行。", "outputFormat": "对于每个测试用例，输出一行代表所需要雇佣的最少应聘者数量。\n\n如果无解，输出 `No Solution`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10942", "type": "P", "difficulty": 3, "samples": [["6 6\n1 2\n1 6\n2 4\n6 5\n4 3\n5 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "GF和猫咪的玩具", "background": "", "description": "GF 同学和猫咪得到了一个特别的玩具，这个玩具由 $n$ 个金属环（编号为 $1 \\sim n$）和 $m$ 条绳索组成，每条绳索连接两个不同的金属环，并且长度相同。GF 左手拿起金属环 $L$，猫咪右手(或者说:爪)拿起金属环 $R\\ (L \\ne R)$，然后尽量的向两边拉，他希望选择合适的 $L$ 和 $R$，使得被拉紧的绳索尽量的多。 \n\n注：如果像样例那样 $1 \\to 2 \\to 4 \\to 3 \\to 5 \\to 6 \\to 1$ 构成了一个环，我们认为拉 $1$ 和 $3$ 时只能拉紧一边（$1 \\to 2 \\to 4 \\to 3$ 或 $3 \\to 5 \\to 6 \\to 1$）而不算全部拉紧。通俗地说，也就是当两个环之间有几个绳索数相等的连接方法时，只算其中一条连接方法拉紧，不算全部拉紧。\n", "inputFormat": "第一行包含两个正整数 $n,m$（$n \\le 100$）；\n\n接下来的 $m$ 行包含两个正整数 $a,b$，表示有一条绳索连接了 $a$ 和 $b$ 的绳索。\n", "outputFormat": "仅包含一个整数，表示最多能拉紧的绳索数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "GF和猫咪的玩具", "background": "", "description": "GF 同学和猫咪得到了一个特别的玩具，这个玩具由 $n$ 个金属环（编号为 $1 \\sim n$）和 $m$ 条绳索组成，每条绳索连接两个不同的金属环，并且长度相同。GF 左手拿起金属环 $L$，猫咪右手(或者说:爪)拿起金属环 $R\\ (L \\ne R)$，然后尽量的向两边拉，他希望选择合适的 $L$ 和 $R$，使得被拉紧的绳索尽量的多。 \n\n注：如果像样例那样 $1 \\to 2 \\to 4 \\to 3 \\to 5 \\to 6 \\to 1$ 构成了一个环，我们认为拉 $1$ 和 $3$ 时只能拉紧一边（$1 \\to 2 \\to 4 \\to 3$ 或 $3 \\to 5 \\to 6 \\to 1$）而不算全部拉紧。通俗地说，也就是当两个环之间有几个绳索数相等的连接方法时，只算其中一条连接方法拉紧，不算全部拉紧。\n", "inputFormat": "第一行包含两个正整数 $n,m$（$n \\le 100$）；\n\n接下来的 $m$ 行包含两个正整数 $a,b$，表示有一条绳索连接了 $a$ 和 $b$ 的绳索。\n", "outputFormat": "仅包含一个整数，表示最多能拉紧的绳索数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10943", "type": "P", "difficulty": 6, "samples": [["2 2\n.m\nH.\n5 5 \nHH..m \n..... \n.....\n.....\nmm..H\n7 8\n...H....\n...H....\n...H.... \nmmmHmmmm \n...H.... \n...H.... \n...H.... \n0 0", "2\n10\n28"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2004", "O2优化", "ICPC"], "title": "Going Home", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/dqo3q5sa.png)", "inputFormat": "There are one or more test cases in the input. Each case starts with a line giving two integers N and M, where N is the number of rows of the map, and M is the number of columns. The rest of the input will be N lines describing the map. You may assume both N and M are between 2 and 100, inclusive. There will be the same number of 'H's and\n'm's on the map; and there will be at most 100 houses. Input will terminate with 0 0 for N and M.", "outputFormat": "For each test case, output one line with the single integer, which is the minimum amount, in dollars, you need to pay. ", "hint": "", "locale": "en", "translations": {"en": {"title": "Going Home", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/dqo3q5sa.png)", "inputFormat": "There are one or more test cases in the input. Each case starts with a line giving two integers N and M, where N is the number of rows of the map, and M is the number of columns. The rest of the input will be N lines describing the map. You may assume both N and M are between 2 and 100, inclusive. There will be the same number of 'H's and\n'm's on the map; and there will be at most 100 houses. Input will terminate with 0 0 for N and M.", "outputFormat": "For each test case, output one line with the single integer, which is the minimum amount, in dollars, you need to pay. ", "hint": "", "locale": "en"}, "zh-CN": {"title": "Going Home", "background": "", "description": "# 回家\n\n在网格地图上有 $n$ 个人和 $n$ 个房子。在每个单位时间里，每个人都可以在相邻的点上水平或垂直移动一个单位步。对于每个人，你需要为他每走一步支付 $1$ 美元的旅行费，直到他进入一所房子。由于每栋房子只能容纳一个人，这项任务很复杂。  \n你的任务是计算你需要支付的最低金额，以便将这 $n$ 个人送到那 $n$ 个不同的房子里。输入是场景的地图，`.` 表示空白空间，`H`表示该点上的房子，`m`表示在该点上有一个人。  \n你可以把网格地图上的每个点想象成一个相当大的正方形，所以它可以同时容纳 $n$ 个人物；此外，如果一个人在没有进入房子的情况下踩在有房子的网格上，也没关系。", "inputFormat": "输入中有一个或多个测试用例。每种情况都以一行给出两个整数 $N$ 和 $M$ 开始，其中 $N$ 是映射的行数，$M$ 是列数。其余的输入将是描述地图的 $N$ 行。你可以假设 $N$ 和 $M$ 都在 $2$ 到 $100$ 之间，包括 $2$ 和 $100$。将有相同数量的 $H$ 和 $m$ 在地图上；最多有 $100$ 栋房子。$N$ 和 $M$ 的输入将以`0 0`终止。", "outputFormat": "对于每个测试用例，输出一行带有单个整数的代码，这是您需要支付的最小金额（美元）。\n\n---\n翻译提供者：[csyc5586](https://www.luogu.com/user/668156)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10944", "type": "P", "difficulty": 4, "samples": [["1 \n3 3 \n1 2 \n2 3 \n3 1", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["深度优先搜索 DFS", "拓扑排序", "Tarjan", "bitset", "Floyd 算法"], "title": "Going from u to v or from v to u?", "background": "", "description": "In order to make their sons brave, Jiajia and Wind take them to a big cave. The cave has n rooms, and one-way corridors connecting some rooms. Each time, Wind choose two rooms x and y, and ask one of their little sons go from one to the other. The son can either go from x to y, or from y to x. Wind promised that her tasks are all possible, but she actually doesn't know how to decide if a task is possible. To make her life easier, Jiajia decided to choose a cave in which every pair of rooms is a possible task. Given a cave, can you tell Jiajia whether Wind can randomly choose two rooms without worrying about anything?", "inputFormat": "\nThe first line contains a single integer T, the number of test cases. And followed T cases.\nThe first line for each case contains two integers n, m(0 < n < 1001,m < 6000), the number of rooms and corridors in the cave. The next m lines each contains two integers u and v, indicating that there is a corridor connecting room u and room v directly.", "outputFormat": "The output should contain T lines. Write 'Yes' if the cave has the property stated above, or 'No' otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "Going from u to v or from v to u?", "background": "", "description": "In order to make their sons brave, Jiajia and Wind take them to a big cave. The cave has n rooms, and one-way corridors connecting some rooms. Each time, Wind choose two rooms x and y, and ask one of their little sons go from one to the other. The son can either go from x to y, or from y to x. Wind promised that her tasks are all possible, but she actually doesn't know how to decide if a task is possible. To make her life easier, Jiajia decided to choose a cave in which every pair of rooms is a possible task. Given a cave, can you tell Jiajia whether Wind can randomly choose two rooms without worrying about anything?", "inputFormat": "\nThe first line contains a single integer T, the number of test cases. And followed T cases.\nThe first line for each case contains two integers n, m(0 < n < 1001,m < 6000), the number of rooms and corridors in the cave. The next m lines each contains two integers u and v, indicating that there is a corridor connecting room u and room v directly.", "outputFormat": "The output should contain T lines. Write 'Yes' if the cave has the property stated above, or 'No' otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "Going from u to v or from v to u?", "background": null, "description": "为了让儿子们变得勇敢，Jiajia 和 Wind 带他们去了一个大山洞。这个山洞有 $n$ 个房间，还有一些连接两个房间的单向走廊。每次，Wind 都会选择两个房间 $x$ 和 $y$，并让他们的一个小儿子从一个房间走到另一个房间。儿子应该可以从 $x$ 到 $y$，或者可以从 $y$ 到 $x$。Wind 承诺她的任务都是可完成的，但她实际上不知道如何决定一个任务是否可能。为了让她的生活更轻松，Jiajia 决定选择一个山洞，使得这个山洞中每一对房间都能构成一个可以完成的任务。给定一个山洞的构造，你能告诉 Jiajia 和 Wind 是否可以随意选择两个房间作为任务而不必担心其是否可能完成？", "inputFormat": "第一行包含一个整数 $T$（$1\\le T \\le 3$），即测试用例的数量。  \n每种情况的第一行包含两个整数 $n,m$（$1 \\le n \\le 1000 ,1 \\le m \\le 5999$），即山洞中的房间和走廊数量。接下来的 $m$ 行各包含两个整数 $u$ 和 $v$，表示有一条走廊直接连接房间 $u$ 和房间 $v$。", "outputFormat": "输出应包含 $T$ 行。如果这个山洞具有上述属性，请输出 `Yes`，否则输出 `No`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10945", "type": "P", "difficulty": 6, "samples": [["2\n4 4\no*** \n*### \noo#o \n***o \n4 4 \n#ooo \no#oo \noo#o \n***#", "Case :1 \n3\nCase :2 \n5"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["O2优化", "二分图"], "title": "Place the Robots", "background": "", "description": "Robert is a famous engineer. One day he was given a task by his boss. The background of the task was the following:\n\nGiven a map consisting of square blocks. There were three kinds of blocks: Wall, Grass, and Empty. His boss wanted to place as many robots as possible in the map. Each robot held a laser weapon which could shoot to four directions (north, east, south, west) simultaneously. A robot had to stay at the block where it was initially placed all the time and to keep firing all the time. The laser beams certainly could pass the grid of Grass, but could not pass the grid of Wall. A robot could only be placed in an Empty block. Surely the boss would not want to see one robot hurting another. In other words, two robots must not be placed in one line (horizontally or vertically) unless there is a Wall between them.\n\nNow that you are such a smart programmer and one of Robert's best friends, He is asking you to help him solving this problem. That is, given the description of a map, compute the maximum number of robots that can be placed in the map.\n", "inputFormat": "The first line contains an integer T (<= 11) which is the number of test cases.\n\nFor each test case, the first line contains two integers m and n (1<= m, n <=50) which are the row and column sizes of the map. Then m lines follow, each contains n characters of '#', '*', or 'o' which represent Wall, Grass, and Empty, respectively.\n", "outputFormat": "For each test case, first output the case number in one line, in the format: \"Case :id\" where id is the test case number, counting from 1. In the second line just output the maximum number of robots that can be placed in that map.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "Place the Robots", "background": "", "description": "Robert is a famous engineer. One day he was given a task by his boss. The background of the task was the following:\n\nGiven a map consisting of square blocks. There were three kinds of blocks: Wall, Grass, and Empty. His boss wanted to place as many robots as possible in the map. Each robot held a laser weapon which could shoot to four directions (north, east, south, west) simultaneously. A robot had to stay at the block where it was initially placed all the time and to keep firing all the time. The laser beams certainly could pass the grid of Grass, but could not pass the grid of Wall. A robot could only be placed in an Empty block. Surely the boss would not want to see one robot hurting another. In other words, two robots must not be placed in one line (horizontally or vertically) unless there is a Wall between them.\n\nNow that you are such a smart programmer and one of Robert's best friends, He is asking you to help him solving this problem. That is, given the description of a map, compute the maximum number of robots that can be placed in the map.\n", "inputFormat": "The first line contains an integer T (<= 11) which is the number of test cases.\n\nFor each test case, the first line contains two integers m and n (1<= m, n <=50) which are the row and column sizes of the map. Then m lines follow, each contains n characters of '#', '*', or 'o' which represent Wall, Grass, and Empty, respectively.\n", "outputFormat": "For each test case, first output the case number in one line, in the format: \"Case :id\" where id is the test case number, counting from 1. In the second line just output the maximum number of robots that can be placed in that map.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "Place the Robots", "background": "", "description": "罗伯特是一位著名的工程师。一天，他的老板给了他一个任务。任务的背景如下：给定一个方格地图。地图上有三种可以放置的方块：墙方块、草方块和空地。老板希望在地图上可以尽可能多地放置机器人。每个机器人都配备了激光武器，可以同时向四个方向（东南西北，可以理解为上下左右）发射激光。机器人必须待在同一位置（也就是一开始放置的位置）且只能放在空地上不断地发射激光。激光束可以穿过草方块，但不能穿过墙方块。显然，老板不希望看到一个机器人伤害另一个机器人。换句话说，两个机器人不能放置在同一行或同一列上，除非它们之间有一堵墙。作为罗伯特的好朋友和聪明的程序员，他请你帮忙解决这个问题。也就是请你根据给定地图的描述，计算在地图上可以放置的最大机器人数量。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例，第一行包含两个整数 $m$ 和 $n$，分别表示地图的行数和列数。接下来是 $m$ 行，每行包含 $n$ 个字符，分别是 ‘#’, ‘*’, 或 ‘o’，表示墙方块、草方块和空地。", "outputFormat": "对于每个测试用例，首先输出一行，格式为：```Case :id```，其中 $\\text{id}$ 是测试用例编号，从 $1$ 开始计数。\n\n第二行输出在该地图上可以放置的最大机器人数量。", "hint": "对于所有的数据，满足 $T \\leq 11$，$1 \\leq m , n \\leq 50$。", "locale": "zh-CN"}}}
{"pid": "P10947", "type": "P", "difficulty": 5, "samples": [["\n2\n5 8 \n1 2 3 \n1 3 2 \n1 4 5 \n2 3 1 \n2 5 3 \n3 4 2 \n3 5 4 \n4 5 3 \n1 5\n5 6\n2 3 1\n3 2 1\n3 1 10\n4 5 2 \n5 2 7 \n5 2 7 \n4 1", "3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2006", "O2优化", "最短路", "ICPC"], "title": "[BAPC 2006 Qualification] Sightseeing", "background": null, "description": "Tour operator Your Personal Holiday organises guided bus trips across the Benelux. Every day the bus moves from one city S to another city F. On this way, the tourists in the bus can see the sights alongside the route travelled. Moreover, the bus makes a number of stops (zero or more) at some beautiful cities, where the tourists get out to see the local sights.\n\nDifferent groups of tourists may have different preferences for the sights they want to see, and thus for the route to be taken from S to F. Therefore, Your Personal Holiday wants to offer its clients a choice from many different routes. As hotels have been booked in advance, the starting city S and the final city F, though, are fixed. Two routes from S to F are considered different if there is at least one road from a city A to a city B which is part of one route, but not of the other route.\n\nThere is a restriction on the routes that the tourists may choose from. To leave enough time for the sightseeing at the stops (and to avoid using too much fuel), the bus has to take a short route from S to F. It has to be either a route with minimal distance, or a route which is one distance unit longer than the minimal distance. Indeed, by allowing routes that are one distance unit longer, the tourists may have more choice than by restricting them to exactly the minimal routes. This enhances the impression of a personal holiday.\n\nFor example, for the above road map, there are two minimal routes from S = 1 to F = 5: 1 → 2 → 5 and 1 → 3 → 5, both of length 6. There is one route that is one distance unit longer: 1 → 3 → 4 → 5, of length 7.\n\nNow, given a (partial) road map of the Benelux and two cities S and F, tour operator Your Personal Holiday likes to know how many different routes it can offer to its clients, under the above restriction on the route length.", "inputFormat": "The first line of the input file contains a single number: the number of test cases to follow. Each test case has the following format:\n\n- One line with two integers N and M, separated by a single space, with 2 ≤ N ≤ 1,000 and 1 ≤ M ≤ 10, 000: the number of cities and the number of roads in the road map. \n- M lines, each with three integers A, B and L, separated by single spaces, with 1 ≤ A, B ≤ N, A ≠ B and 1 ≤ L ≤ 1,000, describing a road from city A to city B with length L.The roads are unidirectional. Hence, if there is a road from A to B, then there is not necessarily also a road from B to A. There may be different roads from a city A to a city B.\n\n- One line with two integers S and F, separated by a single space, with 1 ≤ S, F ≤ N and S ≠ F: the starting city and the final city of the route. There will be at least one route from S to F.", "outputFormat": "For every test case in the input file, the output should contain a single number, on a single line: the number of routes of minimal length or one distance unit longer. Test cases are such, that this number is at most 109 = 1,000,000,000.", "hint": null, "locale": "en", "translations": {"en": {"title": "[BAPC 2006 Qualification] Sightseeing", "background": null, "description": "Tour operator Your Personal Holiday organises guided bus trips across the Benelux. Every day the bus moves from one city S to another city F. On this way, the tourists in the bus can see the sights alongside the route travelled. Moreover, the bus makes a number of stops (zero or more) at some beautiful cities, where the tourists get out to see the local sights.\n\nDifferent groups of tourists may have different preferences for the sights they want to see, and thus for the route to be taken from S to F. Therefore, Your Personal Holiday wants to offer its clients a choice from many different routes. As hotels have been booked in advance, the starting city S and the final city F, though, are fixed. Two routes from S to F are considered different if there is at least one road from a city A to a city B which is part of one route, but not of the other route.\n\nThere is a restriction on the routes that the tourists may choose from. To leave enough time for the sightseeing at the stops (and to avoid using too much fuel), the bus has to take a short route from S to F. It has to be either a route with minimal distance, or a route which is one distance unit longer than the minimal distance. Indeed, by allowing routes that are one distance unit longer, the tourists may have more choice than by restricting them to exactly the minimal routes. This enhances the impression of a personal holiday.\n\nFor example, for the above road map, there are two minimal routes from S = 1 to F = 5: 1 → 2 → 5 and 1 → 3 → 5, both of length 6. There is one route that is one distance unit longer: 1 → 3 → 4 → 5, of length 7.\n\nNow, given a (partial) road map of the Benelux and two cities S and F, tour operator Your Personal Holiday likes to know how many different routes it can offer to its clients, under the above restriction on the route length.", "inputFormat": "The first line of the input file contains a single number: the number of test cases to follow. Each test case has the following format:\n\n- One line with two integers N and M, separated by a single space, with 2 ≤ N ≤ 1,000 and 1 ≤ M ≤ 10, 000: the number of cities and the number of roads in the road map. \n- M lines, each with three integers A, B and L, separated by single spaces, with 1 ≤ A, B ≤ N, A ≠ B and 1 ≤ L ≤ 1,000, describing a road from city A to city B with length L.The roads are unidirectional. Hence, if there is a road from A to B, then there is not necessarily also a road from B to A. There may be different roads from a city A to a city B.\n\n- One line with two integers S and F, separated by a single space, with 1 ≤ S, F ≤ N and S ≠ F: the starting city and the final city of the route. There will be at least one route from S to F.", "outputFormat": "For every test case in the input file, the output should contain a single number, on a single line: the number of routes of minimal length or one distance unit longer. Test cases are such, that this number is at most 109 = 1,000,000,000.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[BAPC 2006 资格赛] Sightseeing", "background": null, "description": "中文标题：观光旅游\n\n\n旅游运营商 Your Personal Holiday 组织比荷卢经济联盟的导游巴士旅行。每天，巴士都会从一个城市 $S$ 行驶到另一个城市 $F$。在这条路上，巴士上的游客可以看到沿途的景点。此外，公共汽车在一些美丽的城市停靠了几站（零站或更多站），游客们可以在那里下车欣赏当地的风景。\n\n不同的游客群体可能对他们想看的景点有不同的偏好，因此对从 $S$ 到 $F$ 的路线也有不同的喜好。因此，Your Personal Holiday 希望为客户提供许多不同路线的选择。由于酒店已提前预订，出发城市 $S$ 和最终城市 $F$ 是固定的。如果从城市 $A$ 到城市 $B$ 至少有一条道路是一条路线的一部分，而不是另一条路线，则认为从 $S$ 到 $F$ 的两条路线是不同的。\n\n游客可以选择的路线有限制。为了在车站有足够的时间观光（并避免使用过多的燃料），公共汽车必须从 $S$ 到 $F$ 走一条短途路线。它必须是一条距离最小的路线，或者是一条比最小距离长一个距离单位的路线。事实上，通过允许延长一个距离单位的路线，游客可能比将他们限制在最短的路线上有更多的选择。这增强了个人假期的印象。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gi7my5nd.png)\n\n例如，对于上述路线图，从 $S=1$ 到 $F=5$ 有两条最小路线：$1→2→5$ 和 $1→3→5$，长度均为 $6$ 。有一条路线长一个距离单位：$1→3→4→5$，长度为 $7$。\n\n现在，给定比荷卢经济联盟和两个城市 $S$ 和 $F$ 的部分路线图，旅游运营商 Your Personal Holiday 想知道在上述路线长度限制下，它可以为客户提供多少条不同的路线。", "inputFormat": "输入文件的第一行包含一个数字：要遵循的测试用例的数量。每个测试用例都有以下格式：\n\n- 一条由两个整数 $N$ 和 $M$ 组成的线，用一个空格隔开，$2≤N≤1000$，$1≤M≤10000$：路线图中的城市数量和道路数量。\n- $M$ 条线，每条线有三个整数 $A$、$B$ 和 $L$，由单个空格分隔，$1≤A,B≤N$，$A \\ne B$，$1≤L≤1000$，描述了一条从 $A$ 市到 $B$ 市的长度为 $L$ 的道路。这些道路是单向的。因此，如果有一条从 $A$ 到 $B$ 的路，那么从 $B$ 到 $A$ 就不一定也有路。从 $A$ 市到 $B$ 市可能有不同的路。\n\n- 一条有两个整数 $S$ 和 $F$ 的线，用一个空格隔开，$1≤S,F≤N$，$S \\ne F$ ：路线的起点城市和终点城市。从 $S$ 到 $F$ 至少有一条路线。", "outputFormat": "对于输入文件中的每个测试用例，输出应该在一行上包含一个数字：最小长度或更长一个距离单位的路由数量。测试用例是这样的，这个数字最多为 $10^9=1000000000$。\n\n---\n翻译提供者：[csyc5586](https://www.luogu.com/user/668156)", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10948", "type": "P", "difficulty": 4, "samples": [["6 3\n-1 0 2", "19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "O2优化", "最短路"], "title": "升降梯上", "background": "", "description": "开启了升降梯的动力之后，探险队员们进入了升降梯运行的那条竖直的隧道，映入眼帘的是一条直通塔顶的轨道、一辆停在轨道底部的电梯、和电梯内一杆控制电梯升降的巨大手柄。\n\n$Nescafé$ 之塔一共有 $N$ 层，升降梯在每层都有一个停靠点。\n\n手柄有 $M$ 个控制槽，第 $i$ 个控制槽旁边标着一个数 $C_i$，满足 $C_1 < C_2 < C_3 <\\dots< C_M$。\n\n如果 $C_i>0$，表示手柄扳动到该槽时，电梯将上升 $C_i$ 层；如果 $C_i<0$，表示手柄扳动到该槽时，电梯将下降 $-C_i$ 层；并且一定存在一个 $C_i=0$，手柄最初就位于此槽中。\n\n注意升降梯只能在 $1 \\sim N$ 层间移动，因此扳动到使升降梯移动到 $1$ 层以下、$N$ 层以上的控制槽是不允许的。\n\n电梯每移动一层，需要花费 $2$ 秒钟时间，而手柄从一个控制槽扳到相邻的槽，需要花费 $1$ 秒钟时间。\n\n探险队员现在在 $1$ 层，并且想尽快到达 $N$ 层，他们想知道从 $1$ 层到 $N$ 层至少需要多长时间？", "inputFormat": "第一行两个正整数 $N、M$。\n\n第二行 $M$ 个整数 $C_1,C_2,\\dots C_M$。", "outputFormat": "输出一个整数表示答案，即至少需要多长时间。\n\n若不可能到达输出 $-1$。", "hint": "数据保证，$1 \\le N \\le 1000$，$2 \\le M \\le 20$，$-N < C_1 < C_2 < ...< C_M < N $。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "升降梯上", "background": "", "description": "开启了升降梯的动力之后，探险队员们进入了升降梯运行的那条竖直的隧道，映入眼帘的是一条直通塔顶的轨道、一辆停在轨道底部的电梯、和电梯内一杆控制电梯升降的巨大手柄。\n\n$Nescafé$ 之塔一共有 $N$ 层，升降梯在每层都有一个停靠点。\n\n手柄有 $M$ 个控制槽，第 $i$ 个控制槽旁边标着一个数 $C_i$，满足 $C_1 < C_2 < C_3 <\\dots< C_M$。\n\n如果 $C_i>0$，表示手柄扳动到该槽时，电梯将上升 $C_i$ 层；如果 $C_i<0$，表示手柄扳动到该槽时，电梯将下降 $-C_i$ 层；并且一定存在一个 $C_i=0$，手柄最初就位于此槽中。\n\n注意升降梯只能在 $1 \\sim N$ 层间移动，因此扳动到使升降梯移动到 $1$ 层以下、$N$ 层以上的控制槽是不允许的。\n\n电梯每移动一层，需要花费 $2$ 秒钟时间，而手柄从一个控制槽扳到相邻的槽，需要花费 $1$ 秒钟时间。\n\n探险队员现在在 $1$ 层，并且想尽快到达 $N$ 层，他们想知道从 $1$ 层到 $N$ 层至少需要多长时间？", "inputFormat": "第一行两个正整数 $N、M$。\n\n第二行 $M$ 个整数 $C_1,C_2,\\dots C_M$。", "outputFormat": "输出一个整数表示答案，即至少需要多长时间。\n\n若不可能到达输出 $-1$。", "hint": "数据保证，$1 \\le N \\le 1000$，$2 \\le M \\le 20$，$-N < C_1 < C_2 < ...< C_M < N $。", "locale": "zh-CN"}}}
{"pid": "P10949", "type": "P", "difficulty": 6, "samples": [["3 3\n50 -20 -30\n0 1 10\n1 2 20\n0 2 100", "30\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "状压 DP"], "title": "四叶草魔杖", "background": null, "description": "魔杖护法 Freda 融合了四件武器，于是魔杖顶端缓缓地生出了一棵四叶草，四片叶子幻发着淡淡的七色光。\n\n圣剑护法 rainbow 取出了一个圆盘，圆盘上镶嵌着 $N$ 颗宝石，编号为 $0 \\sim N-1$。第 $i$ 颗宝石的能量是 $A_i$。\n\n如果 $A_i > 0$，表示这颗宝石能量过高，需要把 $A_i$ 的能量传给其它宝石；如果 $A_i < 0$，表示这颗宝石的能量过低，需要从其它宝石处获取 $-A_i$ 的能量。\n\n保证 $\\sum A_i = 0$。\n\n只有当所有宝石的能量均相同时，把四叶草魔杖插入圆盘中央，才能开启超自然之界的通道。\n\n不过，只有 $M$ 对宝石之间可以互相传递能量，其中第 $i$ 对宝石之间无论传递多少能量，都要花费 $T_i$ 的代价。\n\n探险队员们想知道，最少需要花费多少代价才能使所有宝石的能量都相同？", "inputFormat": "第一行两个整数 $N,M$。\n\n第二行 $N$ 个整数 $A_i$。\n\n接下来 $M$ 行每行三个整数 $p_i,q_i,T_i$，表示在编号为 $p_i$ 和 $q_i$ 的宝石之间传递能量需要花费 $T_i$ 的代价。\n\n数据保证每对 $p_i,q_i$ 最多出现一次。", "outputFormat": "输出一个整数表示答案，无解输出 `Impossible`。", "hint": "$2 \\le N \\le 16$,  \n$0 \\le M \\le \\dfrac{N(N-1)}{2}$,  \n$0 \\le p_i,q_i < N$,  \n$-1000 \\le A_i \\le 1000$,  \n$0 \\le T_i \\le 1000$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "四叶草魔杖", "background": null, "description": "魔杖护法 Freda 融合了四件武器，于是魔杖顶端缓缓地生出了一棵四叶草，四片叶子幻发着淡淡的七色光。\n\n圣剑护法 rainbow 取出了一个圆盘，圆盘上镶嵌着 $N$ 颗宝石，编号为 $0 \\sim N-1$。第 $i$ 颗宝石的能量是 $A_i$。\n\n如果 $A_i > 0$，表示这颗宝石能量过高，需要把 $A_i$ 的能量传给其它宝石；如果 $A_i < 0$，表示这颗宝石的能量过低，需要从其它宝石处获取 $-A_i$ 的能量。\n\n保证 $\\sum A_i = 0$。\n\n只有当所有宝石的能量均相同时，把四叶草魔杖插入圆盘中央，才能开启超自然之界的通道。\n\n不过，只有 $M$ 对宝石之间可以互相传递能量，其中第 $i$ 对宝石之间无论传递多少能量，都要花费 $T_i$ 的代价。\n\n探险队员们想知道，最少需要花费多少代价才能使所有宝石的能量都相同？", "inputFormat": "第一行两个整数 $N,M$。\n\n第二行 $N$ 个整数 $A_i$。\n\n接下来 $M$ 行每行三个整数 $p_i,q_i,T_i$，表示在编号为 $p_i$ 和 $q_i$ 的宝石之间传递能量需要花费 $T_i$ 的代价。\n\n数据保证每对 $p_i,q_i$ 最多出现一次。", "outputFormat": "输出一个整数表示答案，无解输出 `Impossible`。", "hint": "$2 \\le N \\le 16$,  \n$0 \\le M \\le \\dfrac{N(N-1)}{2}$,  \n$0 \\le p_i,q_i < N$,  \n$-1000 \\le A_i \\le 1000$,  \n$0 \\le T_i \\le 1000$", "locale": "zh-CN"}}}
{"pid": "P10950", "type": "P", "difficulty": 4, "samples": [["3", "8 00010111"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "太鼓达人", "background": "", "description": "太鼓达人的鼓坏了，现在 vani 来修鼓。\n\n鼓的主要元件是 $M$ 个围成一圈的传感器。\n\n每个传感器都有开和关两种工作状态，分别用 $1$ 和 $0$ 表示。\n\n显然，从不同的位置出发沿顺时针方向连续检查 $K$ 个传感器可以得到 $M$ 个长度为 $K$ 的 $01$ 串。\n\nVani 知道这 $M$ 个 $01$ 串应该是互不相同的。\n\n而且鼓的设计很精密，$M$ 会取到可能的最大值。\n\n现在 Vani 已经了解到了 $K$ 的值，他希望你求出 $M$ 的值，并给出字典序最小的传感器排布方案。", "inputFormat": "一个整数 $K$。", "outputFormat": "一个整数和一个二进制串，由一个空格分隔，分别表示可能的最大的 $M$ 以及字典序最小的排布方案。\n\n字符 $0$ 表示关，$1$ 表示开，你输出的串的第一个字和最后一个字是相邻的。", "hint": "$2\\le K\\le 11$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "太鼓达人", "background": "", "description": "太鼓达人的鼓坏了，现在 vani 来修鼓。\n\n鼓的主要元件是 $M$ 个围成一圈的传感器。\n\n每个传感器都有开和关两种工作状态，分别用 $1$ 和 $0$ 表示。\n\n显然，从不同的位置出发沿顺时针方向连续检查 $K$ 个传感器可以得到 $M$ 个长度为 $K$ 的 $01$ 串。\n\nVani 知道这 $M$ 个 $01$ 串应该是互不相同的。\n\n而且鼓的设计很精密，$M$ 会取到可能的最大值。\n\n现在 Vani 已经了解到了 $K$ 的值，他希望你求出 $M$ 的值，并给出字典序最小的传感器排布方案。", "inputFormat": "一个整数 $K$。", "outputFormat": "一个整数和一个二进制串，由一个空格分隔，分别表示可能的最大的 $M$ 以及字典序最小的排布方案。\n\n字符 $0$ 表示关，$1$ 表示开，你输出的串的第一个字和最后一个字是相邻的。", "hint": "$2\\le K\\le 11$。", "locale": "zh-CN"}}}
{"pid": "P10951", "type": "P", "difficulty": 5, "samples": [["3\nT120-D135-S1\nS1-G12\nG12-K856-T120", "1283"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "二分", "O2优化", "分数规划"], "title": "最优高铁环", "background": "幻影国建成了当今世界上最先进的高铁，该国高铁分为以下几类：\n\n  * $S$&mdash;高速光子动力列车&mdash;时速 $1000\\,km\\cdot h^{-1}$\n  * $G$&mdash;高速动车&mdash;时速 $500\\,km\\cdot h^{-1}$\n  * $D$&mdash;动车组&mdash;时速 $300\\,km\\cdot h^{-1}$\n  * $T$&mdash;特快&mdash;时速 $200\\,km\\cdot h^{-1}$\n  * $K$&mdash;快速&mdash;时速 $150\\,km\\cdot h^{-1}$\n\n该国列车车次标号由上述字母开头，后面跟着一个正整数 $(\\le 1000)$ 构成。", "description": "由于该国地形起伏不平，各地铁路的适宜运行速度不同。\n\n因此该国的每一条行车路线都由 $K$ 列车次构成。\n\n例如：$K=5$ 的一条路线为：$T120-D135-S1-G12-K856$。\n\n当某一条路线的末尾车次与另一条路线的开头车次相同时，这两条路线可以连接起来变为一条更长的行车路线。\n\n显然若干条路线连接起来有可能构成一个环。\n\n若有 $3$ 条行车路线分别为:\n\n$x_1-x_2-x_3$  \n$x_3-x_4$  \n$x_4-x_5-x_1$\n\n$x_1 \\sim x_5$ 车次的速度分别为 $v_1 \\sim v_5$。\n\n定义高铁环的值为（环上各条行车路线速度和）的平均值，即：\n\n$\\dfrac{(v_1+v_2+v_3)+(v_3+v_4)+(v_4+v_5+v_1)}3$\n\n所有高铁环的值的最大值称为最优高铁环的值。\n\n给出 $M$ 条行车路线，求最优高铁环的值。", "inputFormat": "第一行为行车路线条数 $M$。\n\n接下来 $M$ 行每行一条行车路线，由若干车次构成，各车次之间用 `-` 号隔开，车次的标号方式如上所述。\n\n数据保证输入的合法性。", "outputFormat": "输出最优高铁环的值，四舍五入到最接近的整数。\n\n若不存在这样的环，输出 $-1$。", "hint": "**样例解释**\n\n$\\dfrac{(200+300+1000)+(1000+500)+(500+150+200)}3=1283$\n\n**数据范围**\n\n对于 $50\\%$ 的数据，$0<M\\le1000$。\n\n对于 $100\\%$ 的数据，$0<M\\le50000$\n 且每条行车路线车次个数不超过 $20$。\n\n输入数据较大，请使用 `read` 和 `scanf`，数据不保证使用 `cin` 者不超时。\n\n为避免精度问题，请使用 `double`类型，数据保证结果不超过 $2147483647$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "最优高铁环", "background": "幻影国建成了当今世界上最先进的高铁，该国高铁分为以下几类：\n\n  * $S$&mdash;高速光子动力列车&mdash;时速 $1000\\,km\\cdot h^{-1}$\n  * $G$&mdash;高速动车&mdash;时速 $500\\,km\\cdot h^{-1}$\n  * $D$&mdash;动车组&mdash;时速 $300\\,km\\cdot h^{-1}$\n  * $T$&mdash;特快&mdash;时速 $200\\,km\\cdot h^{-1}$\n  * $K$&mdash;快速&mdash;时速 $150\\,km\\cdot h^{-1}$\n\n该国列车车次标号由上述字母开头，后面跟着一个正整数 $(\\le 1000)$ 构成。", "description": "由于该国地形起伏不平，各地铁路的适宜运行速度不同。\n\n因此该国的每一条行车路线都由 $K$ 列车次构成。\n\n例如：$K=5$ 的一条路线为：$T120-D135-S1-G12-K856$。\n\n当某一条路线的末尾车次与另一条路线的开头车次相同时，这两条路线可以连接起来变为一条更长的行车路线。\n\n显然若干条路线连接起来有可能构成一个环。\n\n若有 $3$ 条行车路线分别为:\n\n$x_1-x_2-x_3$  \n$x_3-x_4$  \n$x_4-x_5-x_1$\n\n$x_1 \\sim x_5$ 车次的速度分别为 $v_1 \\sim v_5$。\n\n定义高铁环的值为（环上各条行车路线速度和）的平均值，即：\n\n$\\dfrac{(v_1+v_2+v_3)+(v_3+v_4)+(v_4+v_5+v_1)}3$\n\n所有高铁环的值的最大值称为最优高铁环的值。\n\n给出 $M$ 条行车路线，求最优高铁环的值。", "inputFormat": "第一行为行车路线条数 $M$。\n\n接下来 $M$ 行每行一条行车路线，由若干车次构成，各车次之间用 `-` 号隔开，车次的标号方式如上所述。\n\n数据保证输入的合法性。", "outputFormat": "输出最优高铁环的值，四舍五入到最接近的整数。\n\n若不存在这样的环，输出 $-1$。", "hint": "**样例解释**\n\n$\\dfrac{(200+300+1000)+(1000+500)+(500+150+200)}3=1283$\n\n**数据范围**\n\n对于 $50\\%$ 的数据，$0<M\\le1000$。\n\n对于 $100\\%$ 的数据，$0<M\\le50000$\n 且每条行车路线车次个数不超过 $20$。\n\n输入数据较大，请使用 `read` 和 `scanf`，数据不保证使用 `cin` 者不超时。\n\n为避免精度问题，请使用 `double`类型，数据保证结果不超过 $2147483647$。", "locale": "zh-CN"}}}
{"pid": "P10953", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2\n1 3\n2 4\n3 4\n4 5\n2\n1 4\n2 5", "0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "双连通分量", "最近公共祖先 LCA"], "title": "逃不掉的路", "background": "", "description": "现代社会，路是必不可少的。\n\n共有 $n$ 个城镇，$m$ 条道路，任意两个城镇都有路相连，而且往往不止一条。\n\n但有些路年久失修，走着很不爽。\n\n按理说条条大路通罗马，大不了绕行其他路呗——可小撸却发现：从 $a$ 城到 $b$ 城不管怎么走，总有一些逃不掉的必经之路。\n\n他想请你计算一下，$a$ 到 $b$ 的所有路径中，有几条路是逃不掉的？", "inputFormat": "第一行是 $n$ 和 $m$，用空格隔开。\n\n接下来 $m$ 行，每行两个整数 $x$ 和 $y$，用空格隔开，表示 $x$ 城和 $y$ 城之间有一条长为 $1$ 的双向路。\n\n第 $m+2$ 行是 $q$。\n\n接下来 $q$ 行，每行两个整数 $a$ 和 $b$，用空格隔开，表示一次询问。", "outputFormat": "对于每次询问，输出一个正整数，表示 $a$ 城到 $b$ 城必须经过几条路。\n\n每个输出占一行。", "hint": "$1\\le n \\le 10^5$，$1\\le m \\le 2\\times 10^5$，$1\\le q \\le 10^5$  \n对于全部的数据，$1 \\le x,y,a,b \\le n$；对于任意的道路，两端的城市编号之差不超过 $10^4$；  \n任意两个城镇都有路径相连；同一条道路不会出现两次；道路的起终点不会相同;查询的两个城市不会相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "逃不掉的路", "background": "", "description": "现代社会，路是必不可少的。\n\n共有 $n$ 个城镇，$m$ 条道路，任意两个城镇都有路相连，而且往往不止一条。\n\n但有些路年久失修，走着很不爽。\n\n按理说条条大路通罗马，大不了绕行其他路呗——可小撸却发现：从 $a$ 城到 $b$ 城不管怎么走，总有一些逃不掉的必经之路。\n\n他想请你计算一下，$a$ 到 $b$ 的所有路径中，有几条路是逃不掉的？", "inputFormat": "第一行是 $n$ 和 $m$，用空格隔开。\n\n接下来 $m$ 行，每行两个整数 $x$ 和 $y$，用空格隔开，表示 $x$ 城和 $y$ 城之间有一条长为 $1$ 的双向路。\n\n第 $m+2$ 行是 $q$。\n\n接下来 $q$ 行，每行两个整数 $a$ 和 $b$，用空格隔开，表示一次询问。", "outputFormat": "对于每次询问，输出一个正整数，表示 $a$ 城到 $b$ 城必须经过几条路。\n\n每个输出占一行。", "hint": "$1\\le n \\le 10^5$，$1\\le m \\le 2\\times 10^5$，$1\\le q \\le 10^5$  \n对于全部的数据，$1 \\le x,y,a,b \\le n$；对于任意的道路，两端的城市编号之差不超过 $10^4$；  \n任意两个城镇都有路径相连；同一条道路不会出现两次；道路的起终点不会相同;查询的两个城市不会相同。", "locale": "zh-CN"}}}
{"pid": "P10954", "type": "P", "difficulty": 4, "samples": [["4\n2 2 1 3\n2 1 2 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP"], "title": "LCIS", "background": "", "description": "熊大妈的奶牛在小沐沐的熏陶下开始研究信息题目。小沐沐先让奶牛研究了最长上升子序列，再让他们研究了最长公共子序列，现在又让他们要研究最长公共上升子序列了。\n\n小沐沐说，对于两个串 $A$，$B$，如果它们都包含一段位置不一定连续的数字，且数字是严格递增的，那么称这一段数字是两个串的公共上升子序列，而所有的公共上升子序列中最长的就是最长公共上升子序列了。\n    \n奶牛半懂不懂，小沐沐要你来告诉奶牛什么是最长公共上升子序列。不过，只要告诉奶牛它的长度就可以了。", "inputFormat": "第一行 $N$，表示 $A$，$B$ 的长度。\n\n第二行，串 $A$。\n\n第三行，串 $B$。", "outputFormat": "输出最长公共上升子序列的长度。", "hint": "$1\\le N \\le 3000$，$0\\leq |A_i|,|B_i| \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "LCIS", "background": "", "description": "熊大妈的奶牛在小沐沐的熏陶下开始研究信息题目。小沐沐先让奶牛研究了最长上升子序列，再让他们研究了最长公共子序列，现在又让他们要研究最长公共上升子序列了。\n\n小沐沐说，对于两个串 $A$，$B$，如果它们都包含一段位置不一定连续的数字，且数字是严格递增的，那么称这一段数字是两个串的公共上升子序列，而所有的公共上升子序列中最长的就是最长公共上升子序列了。\n    \n奶牛半懂不懂，小沐沐要你来告诉奶牛什么是最长公共上升子序列。不过，只要告诉奶牛它的长度就可以了。", "inputFormat": "第一行 $N$，表示 $A$，$B$ 的长度。\n\n第二行，串 $A$。\n\n第三行，串 $B$。", "outputFormat": "输出最长公共上升子序列的长度。", "hint": "$1\\le N \\le 3000$，$0\\leq |A_i|,|B_i| \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10955", "type": "P", "difficulty": 2, "samples": [["7", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "背包 DP"], "title": "正整数拆分", "background": "", "description": "给定一个正整数 $N$，要求把 $N$ 拆分成若干个正整数相加的形式，参与加法运算的数可以重复。\n\n**注意**:\n\n  * 拆分方案不考虑顺序；\n  * 至少拆分成 $2$ 个数的和。\n\n求拆分的方案数 $\\bmod 2147483648$ 的结果。", "inputFormat": "一个正整数 $N$。", "outputFormat": "输出一个整数，表示结果。", "hint": "$1 \\le N \\le 4000$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "正整数拆分", "background": "", "description": "给定一个正整数 $N$，要求把 $N$ 拆分成若干个正整数相加的形式，参与加法运算的数可以重复。\n\n**注意**:\n\n  * 拆分方案不考虑顺序；\n  * 至少拆分成 $2$ 个数的和。\n\n求拆分的方案数 $\\bmod 2147483648$ 的结果。", "inputFormat": "一个正整数 $N$。", "outputFormat": "输出一个整数，表示结果。", "hint": "$1 \\le N \\le 4000$", "locale": "zh-CN"}}}
{"pid": "P10956", "type": "P", "difficulty": 4, "samples": [["ABABABA\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "枚举", "深度优先搜索 DFS", "区间 DP"], "title": "金字塔", "background": null, "description": "虽然探索金字塔是极其老套的剧情，但是有一队探险家还是到了某金字塔脚下。\n\n经过多年的研究，科学家对这座金字塔的内部结构已经有所了解。\n\n首先，金字塔由若干房间组成，房间之间连有通道。\n\n如果把房间看作节点，通道看作边的话，整个金字塔呈现一个有根树结构，节点的子树之间有序，金字塔有唯一的一个入口通向树根。\n\n并且，每个房间的墙壁都涂有若干种颜色的一种。\n\n探险队员打算进一步了解金字塔的结构，为此，他们使用了一种特殊设计的机器人。\n\n这种机器人会从入口进入金字塔，之后对金字塔进行深度优先遍历。\n\n机器人每进入一个房间（无论是第一次进入还是返回），都会记录这个房间的颜色。\n\n最后，机器人会从入口退出金字塔。\n\n显然，机器人会访问每个房间至少一次，并且穿越每条通道恰好两次（两个方向各一次）， 然后，机器人会得到一个颜色序列。\n\n但是，探险队员发现这个颜色序列并不能唯一确定金字塔的结构。\n\n现在他们想请你帮助他们计算，对于一个给定的颜色序列，有多少种可能的结构会得到这个序列。\n\n因为结果可能会非常大，你只需要输出答案对 $10^9$ 取模之后的值。", "inputFormat": "输入仅一行，包含一个字符串 $S$，长度不超过 $300$，表示机器人得到的颜色序列。", "outputFormat": "输出一个整数表示答案。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "金字塔", "background": null, "description": "虽然探索金字塔是极其老套的剧情，但是有一队探险家还是到了某金字塔脚下。\n\n经过多年的研究，科学家对这座金字塔的内部结构已经有所了解。\n\n首先，金字塔由若干房间组成，房间之间连有通道。\n\n如果把房间看作节点，通道看作边的话，整个金字塔呈现一个有根树结构，节点的子树之间有序，金字塔有唯一的一个入口通向树根。\n\n并且，每个房间的墙壁都涂有若干种颜色的一种。\n\n探险队员打算进一步了解金字塔的结构，为此，他们使用了一种特殊设计的机器人。\n\n这种机器人会从入口进入金字塔，之后对金字塔进行深度优先遍历。\n\n机器人每进入一个房间（无论是第一次进入还是返回），都会记录这个房间的颜色。\n\n最后，机器人会从入口退出金字塔。\n\n显然，机器人会访问每个房间至少一次，并且穿越每条通道恰好两次（两个方向各一次）， 然后，机器人会得到一个颜色序列。\n\n但是，探险队员发现这个颜色序列并不能唯一确定金字塔的结构。\n\n现在他们想请你帮助他们计算，对于一个给定的颜色序列，有多少种可能的结构会得到这个序列。\n\n因为结果可能会非常大，你只需要输出答案对 $10^9$ 取模之后的值。", "inputFormat": "输入仅一行，包含一个字符串 $S$，长度不超过 $300$，表示机器人得到的颜色序列。", "outputFormat": "输出一个整数表示答案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10957", "type": "P", "difficulty": 4, "samples": [["5\n1 8 6 2 5", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "单调队列", "线性 DP"], "title": "环路运输", "background": "", "description": "在一条环形公路旁均匀地分布着 $N$ 座仓库，编号为 $1 \\sim N$，编号为 $i$ 的仓库与编号为 $j$ 的仓库之间的距离定义为 $dist(i,j)=\\min⁡(|i-j|,N-|i-j|)$，也就是逆时针或顺时针从 $i$ 到 $j$ 中较近的一种。\n\n每座仓库都存有货物，其中编号为 $i$ 的仓库库存量为 $A_i$。\n\n在 $i$ 和 $j$ 两座仓库之间运送货物需要的代价为 $A_i+A_j+dist(i,j)$。\n\n求在哪两座仓库之间运送货物需要的代价最大。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个整数 $A_1 \\sim A_N$。", "outputFormat": "输出一个整数，表示最大代价。\n", "hint": "数据保证，$2 \\le N \\le 10^6$，$1 \\le A_i \\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "环路运输", "background": "", "description": "在一条环形公路旁均匀地分布着 $N$ 座仓库，编号为 $1 \\sim N$，编号为 $i$ 的仓库与编号为 $j$ 的仓库之间的距离定义为 $dist(i,j)=\\min⁡(|i-j|,N-|i-j|)$，也就是逆时针或顺时针从 $i$ 到 $j$ 中较近的一种。\n\n每座仓库都存有货物，其中编号为 $i$ 的仓库库存量为 $A_i$。\n\n在 $i$ 和 $j$ 两座仓库之间运送货物需要的代价为 $A_i+A_j+dist(i,j)$。\n\n求在哪两座仓库之间运送货物需要的代价最大。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个整数 $A_1 \\sim A_N$。", "outputFormat": "输出一个整数，表示最大代价。\n", "hint": "数据保证，$2 \\le N \\le 10^6$，$1 \\le A_i \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P10958", "type": "P", "difficulty": 5, "samples": [["3\n2\n3\n187", "1666\n2666\n66666"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数位 DP"], "title": "启示录", "background": null, "description": "古代人认为 $666$ 是属于魔鬼的数。\n\n不但如此，只要某数字的十进制表示中有三个连续的 $6$，古代人也认为这是个魔鬼的数，比如 $666,1666,6663,16666,6660666$ 等等。\n\n古代典籍中经常用“第 $X$ 小的魔鬼的数”来指代这些数，这给研究人员带来了极大的不便。\n\n现在请编写一个程序，可以实现输入 $X$，输出对应的魔鬼数。", "inputFormat": "第一行包含整数 $T$，表示共有 $T$ 组测试数据。\n\n每组测试数据占一行，包含一个整数 $X$。", "outputFormat": "每组测试数据占一行，输出一个魔鬼数。", "hint": "$1 \\le T \\le 1000$，$1 \\le X \\le 5 \\times 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "启示录", "background": null, "description": "古代人认为 $666$ 是属于魔鬼的数。\n\n不但如此，只要某数字的十进制表示中有三个连续的 $6$，古代人也认为这是个魔鬼的数，比如 $666,1666,6663,16666,6660666$ 等等。\n\n古代典籍中经常用“第 $X$ 小的魔鬼的数”来指代这些数，这给研究人员带来了极大的不便。\n\n现在请编写一个程序，可以实现输入 $X$，输出对应的魔鬼数。", "inputFormat": "第一行包含整数 $T$，表示共有 $T$ 组测试数据。\n\n每组测试数据占一行，包含一个整数 $X$。", "outputFormat": "每组测试数据占一行，输出一个魔鬼数。", "hint": "$1 \\le T \\le 1000$，$1 \\le X \\le 5 \\times 10^7$。", "locale": "zh-CN"}}}
{"pid": "P10959", "type": "P", "difficulty": 5, "samples": [["1 100 \n", "33"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "搜索", "记忆化搜索", "数位 DP"], "title": "月之谜", "background": "", "description": "如果一个十进制数能够被它的各位数字之和整除，则称这个数为“月之数”。\n\n给定整数 $L$ 和 $R$，你需要计算闭区间 $[L,R]$ 中有多少个“月之数”。", "inputFormat": "多组测试数据，每组输入占一行，包含两个整数 $L$ 和 $R$。\n", "outputFormat": "每组数据输出一行一个整数，表示月之数的个数。", "hint": "数据保证，$1 \\le L,R < 2^{31}$，单个测试点内不超过 $3000$ 组数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "月之谜", "background": "", "description": "如果一个十进制数能够被它的各位数字之和整除，则称这个数为“月之数”。\n\n给定整数 $L$ 和 $R$，你需要计算闭区间 $[L,R]$ 中有多少个“月之数”。", "inputFormat": "多组测试数据，每组输入占一行，包含两个整数 $L$ 和 $R$。\n", "outputFormat": "每组数据输出一行一个整数，表示月之数的个数。", "hint": "数据保证，$1 \\le L,R < 2^{31}$，单个测试点内不超过 $3000$ 组数据。", "locale": "zh-CN"}}}
{"pid": "P10960", "type": "P", "difficulty": 5, "samples": [["5 4\n12\n10\n4\n3\n5", "2\n3\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "Special Judge", "O2优化", "背包 DP", "构造"], "title": "SUBSTRACT", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/7iy6ncb0.png)![](https://cdn.luogu.com.cn/upload/image_hosting/4g4yijww.png)", "inputFormat": "![](https://cdn.luogu.com.cn/upload/image_hosting/kgtenidc.png)", "outputFormat": "![](https://cdn.luogu.com.cn/upload/image_hosting/5gdc86t2.png)", "hint": "Special Judge by @[w9095](luogu://user/569235)", "locale": "en", "translations": {"en": {"title": "SUBSTRACT", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/7iy6ncb0.png)![](https://cdn.luogu.com.cn/upload/image_hosting/4g4yijww.png)", "inputFormat": "![](https://cdn.luogu.com.cn/upload/image_hosting/kgtenidc.png)", "outputFormat": "![](https://cdn.luogu.com.cn/upload/image_hosting/5gdc86t2.png)", "hint": "Special Judge by @[w9095](luogu://user/569235)", "locale": "en"}, "zh-CN": {"title": "SUBSTRACT", "background": null, "description": "现有一个由 $n$ 个整数组成的序列 $a=[a_1,a_2,...,a_n]$，你需要对它进行 $n-1$ 次操作。其中第 $i$ 次操作是：\n\n1. 选择一个正整数 $t\\ (1 \\le t \\le n-i)$；\n2. 计算 $d=a_t-a_{t+1}$；\n3. 删除 $a_t,a_{t+1}$ 两项；\n4. 在原来 $a_t$ 的位置插入一项 $d$。\n\n试构造一种操作方案，使得 $n-1$ 次操作后序列中剩下的那个数恰好等于给定的数 $T\\ (|T| \\le 10^4)$（保证有解）。", "inputFormat": "第一行输入包含两个由空格分隔的整数：整数 $n$（原始序列中整数的个数，满足 $1 \\le n \\le 100$ ），以及目标整数 $T$（满足 $-10000 \\le T \\le 10000 $ ）。  \n接下来的 $n$ 行包含原始序列：对于每个 $i \\  (1 \\le i \\le n)$ ，输入文件的第 $i+1$ 行即为整数 $a_i$（满足 $1 \\le a_i \\le 100$ ）。", "outputFormat": "输出应包含 $n-1$ 行，描述将原始序列转换为仅包含数字 $T$ 的单元素序列的操作方案。输出文件的第 $i$ 行应包含一个整数，表示第 $i$ 次操作所选择的 $t$。  \n保证对于给定的输入，至少存在一个这样的操作方案。", "hint": "**样例解释：**\n\n| 操作次数 | 数列 |\n| :----------: | :----------: |\n| $0$ | $\\{12,10,4,3,5\\}$ |\n| $1$ | $\\{12,6,3,5\\}$ |\n| $2$ | $\\{12,6,-2\\}$ |\n| $3$ | $\\{12,8\\}$ |\n| $4$ | $\\{4\\}$ |", "locale": "zh-CN"}}}
{"pid": "P10961", "type": "P", "difficulty": 4, "samples": [["4 7 4 5 9 1\n9 8 1 7 2 4\n6 6 8 5 9 2\n1 6 6 1 0 7\n5 9 3 8 8 4\n0 0 0 0 0 0", "Can't\nCan\nCan't\nCan't\nCan"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "背包 DP", "动态规划优化"], "title": "划分大理石", "background": "", "description": "有价值分别为 $1,2,\\dots,6$ 的大理石各 $a_1,a_2,\\dots,a_6$ 块，现要将它们分成两部分，使得两部分价值之和相等，问是否可以实现。其中大理石的总数不超过 $20000$。 ", "inputFormat": "本题有多组数据，每组数据以单独的一行 $6$ 个整数呈现，分别表示 $a_1,a_2,\\dots,a_6$。如果一行中 $6$ 个整数均为 $0$，表示输入文件结束。\n\n对于每一个测试点，有效测试数据组数不超过 $100$ 组。", "outputFormat": "对于每一组数据，如果划分成功，输出 `Can`，否则输出 `Can't`。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "划分大理石", "background": "", "description": "有价值分别为 $1,2,\\dots,6$ 的大理石各 $a_1,a_2,\\dots,a_6$ 块，现要将它们分成两部分，使得两部分价值之和相等，问是否可以实现。其中大理石的总数不超过 $20000$。 ", "inputFormat": "本题有多组数据，每组数据以单独的一行 $6$ 个整数呈现，分别表示 $a_1,a_2,\\dots,a_6$。如果一行中 $6$ 个整数均为 $0$，表示输入文件结束。\n\n对于每一个测试点，有效测试数据组数不超过 $100$ 组。", "outputFormat": "对于每一组数据，如果划分成功，输出 `Can`，否则输出 `Can't`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10962", "type": "P", "difficulty": 4, "samples": [["5\n1 1\n2 1\n3 1\n1 1", "3\n2\n3\n4\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形 DP"], "title": "Computer", "background": "", "description": "A school bought the first computersome time ago(so this computer's id is 1). During the recent years the schol bought N-1 new computers. ach new computer wasconnected to one ofsetled eartier. Managers ofschool are anxious about slow finctioning ofthe net and want to know the maximum distance si for which i-thcomputer needs to send signal (i.e. length of cable to the most distant computer). You need to provide this information.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dycu3sg.png)\n\nHint: he example input is coresponding to this graph. And from the graph, you can se that the computer 4 is farthest one from 1, so S1 =3. Computer 4 and 5 are the farthest ones from 2, so S2=2. Computer 5 is the farthest one from3.so S3=3. We also get S4=4，S5-4.\n", "inputFormat": "Input file contains multiple test cases.in each case there is natural number N (N<=10000) in the first line, folowed by (N-1) lines with descriptions of computers. ithline contains two natural numbers - number of computer.to which i-th computer is conected and leneth ofcable used for connection. \"otaleneth of cable doe notexceed 10^9. Numbers in lines ofinput are separated by a space.\n", "outputFormat": "For each case output N lines. i-th line must contain number Si for i-th computer (1<-i<=N)\n", "hint": "", "locale": "en", "translations": {"en": {"title": "Computer", "background": "", "description": "A school bought the first computersome time ago(so this computer's id is 1). During the recent years the schol bought N-1 new computers. ach new computer wasconnected to one ofsetled eartier. Managers ofschool are anxious about slow finctioning ofthe net and want to know the maximum distance si for which i-thcomputer needs to send signal (i.e. length of cable to the most distant computer). You need to provide this information.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dycu3sg.png)\n\nHint: he example input is coresponding to this graph. And from the graph, you can se that the computer 4 is farthest one from 1, so S1 =3. Computer 4 and 5 are the farthest ones from 2, so S2=2. Computer 5 is the farthest one from3.so S3=3. We also get S4=4，S5-4.\n", "inputFormat": "Input file contains multiple test cases.in each case there is natural number N (N<=10000) in the first line, folowed by (N-1) lines with descriptions of computers. ithline contains two natural numbers - number of computer.to which i-th computer is conected and leneth ofcable used for connection. \"otaleneth of cable doe notexceed 10^9. Numbers in lines ofinput are separated by a space.\n", "outputFormat": "For each case output N lines. i-th line must contain number Si for i-th computer (1<-i<=N)\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "Computer", "background": "", "description": "某学校在一段时间前购买了第一台计算机（因此这台计算机的编号是 1）。在最近几年中，学校又购买了 $N-1$ 台新计算机。每台新计算机都连接到之前已经安装的计算机之一。学校的管理人员对网络运行缓慢感到担忧，想知道每台计算机需要发送信号的最大距离 $S_i$（即到最远计算机的电缆长度）。你需要提供这些信息。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dycu3sg.png)\n\n提示：示例输入对应于此图。从图中可以看到，计算机 4 是距离计算机 1 最远的，因此 $S_1 = 3$。计算机 4 和 5 是距离计算机 2 最远的，因此 $S_2 = 2$。计算机 5 是距离计算机 3 最远的，因此 $S_3 = 3$。我们还得到 $S_4 = 4$，$S_5 = 4$。", "inputFormat": "输入文件包含多个测试用例。每个用例的第一行是自然数 $N$（$N \\leq 10000$），接下来的 $N-1$ 行描述了计算机的连接情况。第 $i$ 行包含两个自然数——第 $i$ 台计算机连接的计算机编号和用于连接的电缆长度。电缆的总长度不超过 $10^9$。输入行中的数字由空格分隔。\n", "outputFormat": "对于每个用例，输出 $N$ 行。第 $i$ 行必须包含第 $i$ 台计算机的数值 $S_i$（$1 \\leq i \\leq N$）。\n", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10963", "type": "P", "difficulty": 5, "samples": [["2\n3 3\n2 2 2\n1 2\n2 3\n3 1 \n4 6\n1 2 3 4\n1 2\n1 3\n1 4\n2 3\n2 4\n3 4", "22 3\n69 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "上海", "ICPC"], "title": "[ICPC-Shanghai 2004] Islands and Bridges", "background": null, "description": "Given a map of islands and bridges that connect these islands, a Hamilton path, as we all know, is a path along the bridges such that it visits each island exactly once. On our map, there is also a positive integer value associated with each island. We call a Hamilton path the best triangular Hamilton path if it maximizes the value described below.\n\nSuppose there are $n$ islands. The value of a Hamilton path $C_1 C_2 \\dots C_n $ is calculated as the sum of three parts. Let Vi be the value for the island $C_i$. As the first part, we sum over all the Vi values for each island in the path. For the second part, for each edge $C_i C_{i+1}$ in the path, we add the product $V_i \\times V_{i+1}$. And for the third part, whenever three consecutive islands $C_i,C_{i+1},C_{i+2}$ in the path forms a triangle in the map, i.e. there is a bridge between $C_i$ and $C_{i+2}$, we add the product $V_i \\times V_{i+1} \\times V_{i+2}$.\n\nMost likely but not necessarily, the best triangular Hamilton path you are going to find contains many triangles. It is quite possible that there might be more than one best triangular Hamilton paths; your second task is to find the number of such paths.", "inputFormat": "The input file starts with a number $ q  (q \\le 20)$ on the first line, which is the number of test cases. Each test case starts with a line with two integers $n$ and $m$, which are the number of islands and the number of bridges in the map, respectively. The next line contains $n$ positive integers, the $i$-th number being the $V_i$ value of island $i$. Each value is no more than $100$. The following $m$ lines are in the form $x\\ y$, which indicates there is a (two way) bridge between island $x$ and island $y$. Islands are numbered from $1$ to $n$. You may assume there will be no more than $13$ islands.", "outputFormat": "For each test case, output a line with two numbers, separated by a space. The first number is the maximum value of a best triangular Hamilton path; the second number should be the number of different best triangular Hamilton paths. If the test case does not contain a Hamilton path, the output must be $0\\ 0$.\n\nNote: A path may be written down in the reversed order. We still think it is the same path.", "hint": null, "locale": "en", "translations": {"en": {"title": "[ICPC-Shanghai 2004] Islands and Bridges", "background": null, "description": "Given a map of islands and bridges that connect these islands, a Hamilton path, as we all know, is a path along the bridges such that it visits each island exactly once. On our map, there is also a positive integer value associated with each island. We call a Hamilton path the best triangular Hamilton path if it maximizes the value described below.\n\nSuppose there are $n$ islands. The value of a Hamilton path $C_1 C_2 \\dots C_n $ is calculated as the sum of three parts. Let Vi be the value for the island $C_i$. As the first part, we sum over all the Vi values for each island in the path. For the second part, for each edge $C_i C_{i+1}$ in the path, we add the product $V_i \\times V_{i+1}$. And for the third part, whenever three consecutive islands $C_i,C_{i+1},C_{i+2}$ in the path forms a triangle in the map, i.e. there is a bridge between $C_i$ and $C_{i+2}$, we add the product $V_i \\times V_{i+1} \\times V_{i+2}$.\n\nMost likely but not necessarily, the best triangular Hamilton path you are going to find contains many triangles. It is quite possible that there might be more than one best triangular Hamilton paths; your second task is to find the number of such paths.", "inputFormat": "The input file starts with a number $ q  (q \\le 20)$ on the first line, which is the number of test cases. Each test case starts with a line with two integers $n$ and $m$, which are the number of islands and the number of bridges in the map, respectively. The next line contains $n$ positive integers, the $i$-th number being the $V_i$ value of island $i$. Each value is no more than $100$. The following $m$ lines are in the form $x\\ y$, which indicates there is a (two way) bridge between island $x$ and island $y$. Islands are numbered from $1$ to $n$. You may assume there will be no more than $13$ islands.", "outputFormat": "For each test case, output a line with two numbers, separated by a space. The first number is the maximum value of a best triangular Hamilton path; the second number should be the number of different best triangular Hamilton paths. If the test case does not contain a Hamilton path, the output must be $0\\ 0$.\n\nNote: A path may be written down in the reversed order. We still think it is the same path.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[ICPC-Shanghai 2004] Islands and Bridges", "background": null, "description": "给定一张由岛屿和连接这些岛屿的桥梁构成的地图，众所周知，哈密顿路径是沿着桥梁的路径，能够恰好访问每个岛屿一次。在我们的地图中，每个岛屿还关联一个正整数值。我们定义一种哈密顿路径为 **最佳三角形哈密顿路径**，其最大化以下描述的值。\n\n假设有 $n$ 个岛屿。哈密顿路径 $C_1,C_2,\\dots,C_n$ 的值分为三部分计算。设 $V_i$ 为岛屿 $C_i$ 的值。第一部分为路径中每个岛屿的 $V_i$ 值的总和。第二部分，对于路径中的每条边 $C_i C_{i+1}$，加上 $V_i \\times V_{i+1}$ 的积。第三部分，对于路径中的每三个连续岛屿 $C_i, C_{i+1}, C_{i+2}$，如果它们在地图中形成一个三角形（即 $C_i$ 和 $C_{i+2}$ 之间有桥），加上 $V_i \\times V_{i+1} \\times V_{i+2}$ 的积。\n\n最佳三角形哈密顿路径很可能（但不一定）包含多个三角形。可能会存在多个最佳三角形哈密顿路径。你的第二个任务是找出这样的路径的数量。\n\n---", "inputFormat": "输入文件的第一行是一个整数 $q\\ (q \\le 20)$，表示测试用例的数量。\n\n每个测试用例的第一行有两个整数 $n$ 和 $m$，分别表示地图中岛屿的数量和桥梁的数量。\n\n接下来的第一行包含 $n$ 个正整数，第 $i$ 个数是岛屿 $i$ 的 $V_i$ 值。每个值不超过 $100$。\n\n接下来的 $m$ 行，每行的格式为 $x\\ y$，表示岛屿 $x$ 和岛屿 $y$ 之间有一座双向桥。岛屿从 $1$ 到 $n$ 编号。可以假设岛屿总数不超过 $13$。\n\n---", "outputFormat": "对于每个测试用例，输出一行，包含两个用空格分隔的数。第一个数是最佳三角形哈密顿路径的最大值；第二个数是不同最佳三角形哈密顿路径的数量。如果测试用例中不存在哈密顿路径，则输出 $0\\ 0$。\n\n注意：如果一条路径的顺序反转，仍认为它是相同的路径。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10964", "type": "P", "difficulty": 5, "samples": [["4 0\n-2 1\n-1 2\n-3 0\n-2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "颜色段均摊（珂朵莉树 ODT）", "动态规划优化", "线性 DP"], "title": "Fence Obstacle Course", "background": "与原题相比，$N$ 的数据范围调整为了 $1\\leq N\\leq 100000$，其他数据范围并无变化。", "description": "Farmer John has constructed an obstacle course for the cow's enjoyment. The course consists of a sequence of $N$ fences ($1\\le N \\le 100000$) of varying lengths, each parallel to the x axis. Fence i's y coordinate is i.\n\nThe door to FJ's barn is at the origin (marked '`*`' below). The starting point of the course lies at coordinate ($S$,$N$).\n\n```\n   +--S--+-+-+\n+--+--+--+\n    ...\n   +--+--+-+\n      +--+-+-+\n|==|==|==*=|=|=|\n-3 -2 -1 0 1 2 3\n```\n\nFJ's original intention was for the cows to jump over the fences, but cows are much more comfortable keeping all four hooves on the ground. Thus, they will walk along the fence and, when the fence ends, they will turn towards the x axis and continue walking in a straight line until the hit another fence segment or the side of the barn. Then they decide to go left or right until they reach the end of the fence segment, and so on, until they finally reach the side of the barn and then, potentially after a short walk, the ending point.\n\nNaturally, the cows want to walk as little as possible. Find the minimum distance the cows have to travel back and forth to get from the starting point to the door of the barn.\n", "inputFormat": "- Line 1: Two space-separated integers: $N$ and $S$. ($-100000\\le S \\le 100000$)\n- Line 2~N+1: Each line contains two space-separated integers : $A_i$ and $B_i$ ($-100000\\le A_i < B_i \\le 100000 $) , the starting and ending x-coordinates of fence segment i. Line 2 describes fence #2; line 3 describes fence #2; and so on. The starting position will satisfy $A_N \\le S \\le B_N$. Note that the fences will be traversed in reverse order of the input sequence.\n", "outputFormat": "- Line 1: The minimum distance back and forth in the x direction required to get from the starting point to the ending point by walking around the fences. The distance in the y direction is not counted, since it is always precisely $N$.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "Fence Obstacle Course", "background": "与原题相比，$N$ 的数据范围调整为了 $1\\leq N\\leq 100000$，其他数据范围并无变化。", "description": "Farmer John has constructed an obstacle course for the cow's enjoyment. The course consists of a sequence of $N$ fences ($1\\le N \\le 100000$) of varying lengths, each parallel to the x axis. Fence i's y coordinate is i.\n\nThe door to FJ's barn is at the origin (marked '`*`' below). The starting point of the course lies at coordinate ($S$,$N$).\n\n```\n   +--S--+-+-+\n+--+--+--+\n    ...\n   +--+--+-+\n      +--+-+-+\n|==|==|==*=|=|=|\n-3 -2 -1 0 1 2 3\n```\n\nFJ's original intention was for the cows to jump over the fences, but cows are much more comfortable keeping all four hooves on the ground. Thus, they will walk along the fence and, when the fence ends, they will turn towards the x axis and continue walking in a straight line until the hit another fence segment or the side of the barn. Then they decide to go left or right until they reach the end of the fence segment, and so on, until they finally reach the side of the barn and then, potentially after a short walk, the ending point.\n\nNaturally, the cows want to walk as little as possible. Find the minimum distance the cows have to travel back and forth to get from the starting point to the door of the barn.\n", "inputFormat": "- Line 1: Two space-separated integers: $N$ and $S$. ($-100000\\le S \\le 100000$)\n- Line 2~N+1: Each line contains two space-separated integers : $A_i$ and $B_i$ ($-100000\\le A_i < B_i \\le 100000 $) , the starting and ending x-coordinates of fence segment i. Line 2 describes fence #2; line 3 describes fence #2; and so on. The starting position will satisfy $A_N \\le S \\le B_N$. Note that the fences will be traversed in reverse order of the input sequence.\n", "outputFormat": "- Line 1: The minimum distance back and forth in the x direction required to get from the starting point to the ending point by walking around the fences. The distance in the y direction is not counted, since it is always precisely $N$.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "Fence Obstacle Course", "background": null, "description": "农夫约翰为奶牛们建造了一条障碍赛道。赛道由一系列 $N$ 个长度不一的栅栏组成（$1 \\le N \\le 100000$），每个栅栏都与 x 轴平行。栅栏 $i$ 的 y 坐标为 $i$。\n\nFJ 的谷仓门位于原点（如下图中的 '`*`' 处）。赛道的起点位于坐标 ($S$,$N$)。\n\n```\n   +--S--+-+-+\n+--+--+--+\n    ...\n   +--+--+-+\n      +--+-+-+\n|==|==|==*=|=|=|\n-3 -2 -1 0 1 2 3\n```\n\nFJ 原本的意图是让奶牛跳过栅栏，但奶牛更喜欢四蹄着地。因此，它们会沿着栅栏行走，当栅栏结束时，它们会转向 x 轴并继续直线行走，直到碰到另一个栅栏段或谷仓的侧面。然后它们决定向左或向右走，直到到达栅栏段的末端，依此类推，直到最终到达谷仓的侧面，然后可能经过短暂的步行，达到终点。\n\n自然地，奶牛们希望尽可能少地行走。找出奶牛们从起点到谷仓门来回行走的最短距离。", "inputFormat": "- 第 1 行：两个用空格分隔的整数：$N$ 和 $S$。($-100000 \\le S \\le 100000$)\n- 第 2 行到第 $N+1$ 行：每行包含两个用空格分隔的整数：$A_i$ 和 $B_i$ ($-100000 \\le A_i < B_i \\le 100000$)，分别表示栅栏段 $i$ 的起始和结束 x 坐标。第 2 行描述栅栏 #1；第 3 行描述栅栏 #2；依此类推。起始位置将满足 $A_N \\le S \\le B_N$。注意，栅栏将按照输入序列的逆序遍历。", "outputFormat": "- 第 1 行：从起点到终点绕过栅栏所需的最小 x 方向来回距离。y 方向的距离不计入，因为它始终为 $N$。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P10965", "type": "P", "difficulty": 5, "samples": [["2 4\nabcw\nwxyz", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "单调栈"], "title": "Largest Submatrix", "background": "", "description": "Now here is a matrix with letter 'a','b','c','w','x','y','z' and you can change 'w' to 'a' or 'b', change 'x' to 'b' or 'c', change 'y' to 'a' or 'c', and change 'z' to 'a', 'b' or 'c'. After you changed it, what's the largest submatrix with the same letters you can make?", "inputFormat": "The input contains multiple test cases. Each test case begins with $m$ and $n (1 <m,n< 1000)$ on line. Then come the elements of a matrix in row-major order on m lines each with n letters. The input ends once EOF is met.", "outputFormat": "For each test case, output one line containing the number of elements of the largest submatrix of all same letters.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "Largest Submatrix", "background": "", "description": "Now here is a matrix with letter 'a','b','c','w','x','y','z' and you can change 'w' to 'a' or 'b', change 'x' to 'b' or 'c', change 'y' to 'a' or 'c', and change 'z' to 'a', 'b' or 'c'. After you changed it, what's the largest submatrix with the same letters you can make?", "inputFormat": "The input contains multiple test cases. Each test case begins with $m$ and $n (1 <m,n< 1000)$ on line. Then come the elements of a matrix in row-major order on m lines each with n letters. The input ends once EOF is met.", "outputFormat": "For each test case, output one line containing the number of elements of the largest submatrix of all same letters.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "Largest Submatrix", "background": null, "description": "现在你有一个有 $n$ 行，$m$ 列的矩阵，它的每个元素都是 `a`，`b`，`c`，`w`，`x`，`y`，`z`，中的一个。现在你可以进行无限次如下操作：\n\n- 将 `w` 替换为 `a` 或 `b`。\n- 将 `x` 替换为 `b` 或 `c`。\n- 将 `y` 替换为 `a` 或 `c`。\n- 将 `z` 替换为 `a` 或 `b` 或 `c`。\n\n在你操作结束后，这个矩阵最大的全部元素都相同的子矩阵的元素个数最多是多少？", "inputFormat": "**本题有多组测试数据。**\n\n对于每组测试数据，第一行是两个整数 $n,m  (1 <m,n< 1000) $，分别代表初始矩阵的行、列数。\n\n之后的 $n$ 行，每行 $m$ 个字符，表示初始的矩阵。", "outputFormat": "对于每组测试数据，输出一行，表示你操作结束后这个矩阵最大的全部元素都相同的子矩阵的元素个数的最大值。\n\n### 样例解释\n\n操作后的矩阵可以是这个样子：\n\n```\nabcw\nwccc\n```", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10966", "type": "P", "difficulty": 6, "samples": [["2\n7 3\n2 2 3 4 4 5 5\n6 2\n0 3 3 4 8 9", "3\n5"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["动态规划 DP", "O2优化", "动态规划优化", "斜率优化", "四边形不等式", "线性 DP"], "title": "K-Anonymous Sequence", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/orua22pd.png)", "inputFormat": "![](https://cdn.luogu.com.cn/upload/image_hosting/lbo5vs9c.png)", "outputFormat": "For each test, output one line containing a single integer-the minimal cost", "hint": "", "locale": "en", "translations": {"en": {"title": "K-Anonymous Sequence", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/orua22pd.png)", "inputFormat": "![](https://cdn.luogu.com.cn/upload/image_hosting/lbo5vs9c.png)", "outputFormat": "For each test, output one line containing a single integer-the minimal cost", "hint": "", "locale": "en"}, "zh-CN": {"title": "K-Anonymous Sequence", "background": "", "description": "各种应用领域中爆炸式增长的网络数据引发了相关个人的隐私问题。最近的研究表明，在发布图形/社交网络数据之前简单地删除节点的身份并不能保证隐私。图本身的结构及其基本形式——节点度，可以揭示个体的身份。\n\n为了解决这个问题，我们研究了一个特定的图匿名化问题。如果对于每个节点 $v$，图中至少存在 $k-1$ 个与 $v$ 具有相同度数的其他节点，则称这个图为 $k$-anonymous。我们感兴趣的是在图上进行最少修改操作后实现 $k$-anonymous。  \n\n我们简化了这个问题。从整个图 $G$ 中选取 $n$ 个节点，并按升序列出它们的度数。我们定义一个序列是 $k$-anonymous，当且仅当对于每个元素 $s$，序列中至少存在 $k-1$ 个等于 $s$ 的其他元素。要让给定的序列 $k$-anonymous，你只能做一种操作——减少序列中的一些数字。我们定义修改的成本为你修改的所有数字的差值。例如，$k=3$ 的序列 $2,2,3,4,4,5,5$ 可以修改为 $2,2,2,4,4,4,4$，满足 $3$-anonymous，修改的成本为 $|3-2|+|5-4|+|5-4|=3$。  \n\n给出一个长为 $n$ 的按升序排列的序列和 $k$，我们想知道在所有使序列变为 $k$-anonymous 的修改方式中成本最小的一个。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$（$1\\le T\\le20$），表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$（$2\\le k\\le n\\le5\\times10^5$）。\n\n第二行 $n$ 个整数，即按升序排列的度数序列。序列中的每个数字 $s$ 都在 $\\left[0,5\\times10^5\\right]$ 范围内。", "outputFormat": "对于每个测试，输出一行一个整数，表示最小成本。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10967", "type": "P", "difficulty": 4, "samples": [["10 5\n1 2 3 6 7 9 11 22 44 50", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "递推", "2000", "IOI", "O2优化", "前缀和"], "title": "[IOI 2000] 邮局（原始版）", "background": null, "description": "高速公路旁边有一些村庄。高速公路表示为整数轴，每个村庄的位置用单个整数坐标表示。没有两个在同样地方的村庄。两个位置之间的距离是其整数坐标差的绝对值。\n\n邮局将建在一些，但不一定是所有的村庄中。为了建立邮局，应选择他们建造的位置，使每个村庄与其最近的邮局之间的距离总和最小。\n\n你要编写一个程序，已知村庄的位置和邮局的数量，计算每个村庄和最近的邮局之间所有距离的最小可能的总和。", "inputFormat": "第一行包含两个整数：第一个是村庄 $V$ 的数量，第二个是邮局的数量 $P$。\n\n第二行包含 $V$ 个整数。这些整数是村庄的位置。", "outputFormat": "第一行包含一个整数 $S$，它是每个村庄与其最近的邮局之间的所有距离的总和。", "hint": "数据保证，$1 \\le V \\le 300$，$1 \\le P \\le 30$，$P \\le V$，$1 \\le X \\le 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2000] 邮局（原始版）", "background": null, "description": "高速公路旁边有一些村庄。高速公路表示为整数轴，每个村庄的位置用单个整数坐标表示。没有两个在同样地方的村庄。两个位置之间的距离是其整数坐标差的绝对值。\n\n邮局将建在一些，但不一定是所有的村庄中。为了建立邮局，应选择他们建造的位置，使每个村庄与其最近的邮局之间的距离总和最小。\n\n你要编写一个程序，已知村庄的位置和邮局的数量，计算每个村庄和最近的邮局之间所有距离的最小可能的总和。", "inputFormat": "第一行包含两个整数：第一个是村庄 $V$ 的数量，第二个是邮局的数量 $P$。\n\n第二行包含 $V$ 个整数。这些整数是村庄的位置。", "outputFormat": "第一行包含一个整数 $S$，它是每个村庄与其最近的邮局之间的所有距离的总和。", "hint": "数据保证，$1 \\le V \\le 300$，$1 \\le P \\le 30$，$P \\le V$，$1 \\le X \\le 10000$。", "locale": "zh-CN"}}}
{"pid": "P10968", "type": "P", "difficulty": 5, "samples": [["5\n1 TC\n2 TC TS\n5 2C AD AC JC JH\n4 AC KC QC JC\n6 AC AD AS JC JD KD", "Case #1: 1 \nCase #2: 0 \nCase #3: 48 \nCase #4: 24 \nCase #5: 120"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["动态规划 DP"], "title": "扑克牌", "background": null, "description": "一副不含王的扑克牌由 $52$ 张牌组成，由红桃、黑桃、梅花、方块 $4$ 组牌组成，每组 $13$ 张不同的面值。现在给定 $52$ 张牌中的若干张，请计算将它们排成一列，相邻的牌面值不同的方案数。\n\n牌的表示方法为 $\\texttt{XY}$，其中 $\\texttt{X}$ 为面值，为 $\\texttt{2},\\texttt{3},\\texttt{4},\\texttt{5},\\texttt{6},\\texttt{7},\\texttt{8},\\texttt{9},\\texttt{T},\\texttt{J},\\texttt{Q},\\texttt{K},\\texttt{A}$ 中的一个。$\\texttt{Y}$ 为花色，为 $\\texttt{S},\\texttt{H},\\texttt{D},\\texttt{C}$ 中的一个。如 $\\texttt{2S},\\texttt{2H},\\texttt{TD}$ 等。", "inputFormat": "第一行为一个整数 $T$，为数据组数。\n\n之后每组数据占一行。这一行首先包含一个整数 $N$，表示给定的牌的张数，接下来 $N$ 个由空格分隔的字符串，每个字符串长度为 $2$，表示一张牌。每组数据中的扑克牌各不相同。", "outputFormat": "对于每组数据输出一行，形如 `Case #X: Y`。$X$ 为数据组数，从 $1$ 开始。$Y$ 为可能的方案数，由于答案可能很大，请输出模 $2^{64}$ 之后的值。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "扑克牌", "background": null, "description": "一副不含王的扑克牌由 $52$ 张牌组成，由红桃、黑桃、梅花、方块 $4$ 组牌组成，每组 $13$ 张不同的面值。现在给定 $52$ 张牌中的若干张，请计算将它们排成一列，相邻的牌面值不同的方案数。\n\n牌的表示方法为 $\\texttt{XY}$，其中 $\\texttt{X}$ 为面值，为 $\\texttt{2},\\texttt{3},\\texttt{4},\\texttt{5},\\texttt{6},\\texttt{7},\\texttt{8},\\texttt{9},\\texttt{T},\\texttt{J},\\texttt{Q},\\texttt{K},\\texttt{A}$ 中的一个。$\\texttt{Y}$ 为花色，为 $\\texttt{S},\\texttt{H},\\texttt{D},\\texttt{C}$ 中的一个。如 $\\texttt{2S},\\texttt{2H},\\texttt{TD}$ 等。", "inputFormat": "第一行为一个整数 $T$，为数据组数。\n\n之后每组数据占一行。这一行首先包含一个整数 $N$，表示给定的牌的张数，接下来 $N$ 个由空格分隔的字符串，每个字符串长度为 $2$，表示一张牌。每组数据中的扑克牌各不相同。", "outputFormat": "对于每组数据输出一行，形如 `Case #X: Y`。$X$ 为数据组数，从 $1$ 开始。$Y$ 为可能的方案数，由于答案可能很大，请输出模 $2^{64}$ 之后的值。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10969", "type": "P", "difficulty": 5, "samples": [["4 4\n0 1 1 AND\n1 2 1 OR\n3 2 0 AND\n3 0 0 XOR", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2-SAT"], "title": "Katu Puzzle", "background": "", "description": "Katu Puzzle 以一个有向图 $G(V, E)$ 的形式给出，其中每条边 $e(a, b)$ 都被标记为一个布尔运算符 $\\text{op}$（AND, OR, XOR 之一）以及一个整数 $c$（$0 \\leq c \\leq 1$）。如果可以为每个顶点 $V_i$ 找到一个值 $X_i$（$0 \\leq X_i \\leq 1$），使得对于每条边 $e(a, b)$ 由 $\\text{op}$ 和 $c$ 标记的情况下，以下公式成立：\n\n$$X_a \\ \\text{op} \\ X_b = c$$\n\n那么这个 Katu 是可解的。\n\n给定一个 Katu Puzzle，你的任务是确定它是否可解。", "inputFormat": "第一行包含两个整数 $N$（$1 \\leq N \\leq 100$）和 $M$（$0 \\leq M \\leq 10,000$），分别表示顶点的数量和边的数量。\n\n接下来的 $M$ 行中，每行包含三个整数 $a$（$0 \\leq a < N$），$b$（$0 \\leq b < N$），$c$ 以及一个操作符 $\\text{op}$，描述这条边。", "outputFormat": "输出一行，包含 $\\texttt{YES}$ 或 $\\texttt{NO}$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Katu Puzzle", "background": "", "description": "Katu Puzzle 以一个有向图 $G(V, E)$ 的形式给出，其中每条边 $e(a, b)$ 都被标记为一个布尔运算符 $\\text{op}$（AND, OR, XOR 之一）以及一个整数 $c$（$0 \\leq c \\leq 1$）。如果可以为每个顶点 $V_i$ 找到一个值 $X_i$（$0 \\leq X_i \\leq 1$），使得对于每条边 $e(a, b)$ 由 $\\text{op}$ 和 $c$ 标记的情况下，以下公式成立：\n\n$$X_a \\ \\text{op} \\ X_b = c$$\n\n那么这个 Katu 是可解的。\n\n给定一个 Katu Puzzle，你的任务是确定它是否可解。", "inputFormat": "第一行包含两个整数 $N$（$1 \\leq N \\leq 100$）和 $M$（$0 \\leq M \\leq 10,000$），分别表示顶点的数量和边的数量。\n\n接下来的 $M$ 行中，每行包含三个整数 $a$（$0 \\leq a < N$），$b$（$0 \\leq b < N$），$c$ 以及一个操作符 $\\text{op}$，描述这条边。", "outputFormat": "输出一行，包含 $\\texttt{YES}$ 或 $\\texttt{NO}$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10971", "type": "P", "difficulty": 5, "samples": [["3 20\n1 2 3", "2\n2 9 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "Special Judge"], "title": "Cookies", "background": "", "description": "圣诞老人共有 $M$ 个饼干，准备全部分给 $N$ 个孩子。\n\n每个孩子有一个贪婪度，第 $i$ 个孩子的贪婪度为 $g_i$。\n\n如果有 $a_i$ 个孩子拿到的饼干数比第 $i$ 个孩子多，那么第 $i$ 个孩子会产生 $g_i\\times a_i$ 的怨气。\n\n给定 $N$、$M$ 和序列 $g$，圣诞老人请你帮他安排一种分配方式，使得每个孩子至少分到一块饼干，并且所有孩子的怨气总和最小。", "inputFormat": "第一行包含两个整数 $N,M$。\n\n第二行包含 $N$ 个整数表示 $g_1,g_2,\\dots,g_n$。", "outputFormat": "第一行一个整数表示最小怨气总和。\n\n第二行 $N$ 个空格隔开的整数表示每个孩子分到的饼干数，若有多种方案，输出任意一种均可。", "hint": "数据保证，$1\\leq N\\leq 30$，$N\\leq M\\leq 5000$，$1\\leq g_i\\leq 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Cookies", "background": "", "description": "圣诞老人共有 $M$ 个饼干，准备全部分给 $N$ 个孩子。\n\n每个孩子有一个贪婪度，第 $i$ 个孩子的贪婪度为 $g_i$。\n\n如果有 $a_i$ 个孩子拿到的饼干数比第 $i$ 个孩子多，那么第 $i$ 个孩子会产生 $g_i\\times a_i$ 的怨气。\n\n给定 $N$、$M$ 和序列 $g$，圣诞老人请你帮他安排一种分配方式，使得每个孩子至少分到一块饼干，并且所有孩子的怨气总和最小。", "inputFormat": "第一行包含两个整数 $N,M$。\n\n第二行包含 $N$ 个整数表示 $g_1,g_2,\\dots,g_n$。", "outputFormat": "第一行一个整数表示最小怨气总和。\n\n第二行 $N$ 个空格隔开的整数表示每个孩子分到的饼干数，若有多种方案，输出任意一种均可。", "hint": "数据保证，$1\\leq N\\leq 30$，$N\\leq M\\leq 5000$，$1\\leq g_i\\leq 10^7$。", "locale": "zh-CN"}}}
{"pid": "P10972", "type": "P", "difficulty": 5, "samples": [["2 3 4\n10 20 30\n40 2 3", "Oil : 100\n1 1\n1 2\n1 3\n2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "Special Judge", "线性 DP"], "title": "I-Country", "background": "", "description": "根据绝密的 A 国计划，I 国被划分为 $N\\times M$ 个相等的正方形，每个正方形包含一些石油资源。他们希望占领整个 I 国的领土，但联合国只允许他们占领 $K$ 个正方形。\n\n当然，A 国希望控制尽可能多的石油，但是他们必须守卫他们的全部领土。因此，他们需要他们的领土易于控制，即从任何一个正方形到另一个正方形只能沿着两个方向移动（从下列列表中选择：左、右、上、下；对于不同的正方形对，方向可能不同）。\n\n你需要编写一个程序，确定 A 国将占领哪些正方形。如果有多个解决方案，你可以输出任意一个。", "inputFormat": "输入的第一行包含 3 个整数 $N$、$M$、$K$（$1≤N, M≤15$，$0≤K≤N\\times M$）。\n\n接下来的 $N$ 行包含每行 $M$ 个整数，表示该正方形上的石油资源数量。每个数字的范围在 $0$ 到 $1000$ 之间。", "outputFormat": "输出的第一行是字符串 Oil : X，其中 $X$ 是 A 国可以控制的最大石油数量。\n\n接下来，你应该输出 $K$ 对数字，表示 A 国将占领的正方形的坐标。第一个坐标是行号（从上到下，从 $1$ 开始），第二个是列号（从左到右，从 $1$ 开始）。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "I-Country", "background": "", "description": "根据绝密的 A 国计划，I 国被划分为 $N\\times M$ 个相等的正方形，每个正方形包含一些石油资源。他们希望占领整个 I 国的领土，但联合国只允许他们占领 $K$ 个正方形。\n\n当然，A 国希望控制尽可能多的石油，但是他们必须守卫他们的全部领土。因此，他们需要他们的领土易于控制，即从任何一个正方形到另一个正方形只能沿着两个方向移动（从下列列表中选择：左、右、上、下；对于不同的正方形对，方向可能不同）。\n\n你需要编写一个程序，确定 A 国将占领哪些正方形。如果有多个解决方案，你可以输出任意一个。", "inputFormat": "输入的第一行包含 3 个整数 $N$、$M$、$K$（$1≤N, M≤15$，$0≤K≤N\\times M$）。\n\n接下来的 $N$ 行包含每行 $M$ 个整数，表示该正方形上的石油资源数量。每个数字的范围在 $0$ 到 $1000$ 之间。", "outputFormat": "输出的第一行是字符串 Oil : X，其中 $X$ 是 A 国可以控制的最大石油数量。\n\n接下来，你应该输出 $K$ 对数字，表示 A 国将占领的正方形的坐标。第一个坐标是行号（从上到下，从 $1$ 开始），第二个是列号（从左到右，从 $1$ 开始）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10973", "type": "P", "difficulty": 4, "samples": [["3 10\n1 2 4 2 1 1\n2 5\n1 4 2 1\n0 0", "8\n4"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["动态规划 DP", "背包 DP"], "title": "Coins", "background": "", "description": "银国的人们使用硬币。他们有面值分别为 $A_1, A_2, A_3, \\dots, A_n$ 的硬币。有一天，托尼打开了他的储蓄罐，发现里面有一些硬币。他决定去附近的商店购买一块非常漂亮的手表。他想要支付准确的价格（不找零），而他知道手表的价格不会超过 $m$ 。但他不知道手表的确切价格。\n\n你需要编写一个程序，读取 $n$、$m$、$A_1, A_2, A_3, \\dots, A_n$ 以及对应的数量 $C_1, C_2, C_3, \\dots, C_n$ （表示托尼拥有的每种面值的硬币数量），然后计算托尼可以用这些硬币支付的价格数量（从 1 到 $m$ 的所有价格）。", "inputFormat": "输入包含多个测试用例（不超过 $25$ 组）。每个测试用例的第一行包含两个整数 $n (1 ≤ n ≤ 100)$ 和 $m (m ≤ 100000)$。第二行包含 $2n$ 个整数，分别表示 $A_1, A_2, A_3, \\dots, A_n$ 和 $C_1, C_2, C_3, \\dots, C_n (1 ≤ A_i ≤ 100000, 1 ≤ C_i ≤ 1000)$。最后一个测试用例以两个零结尾。\n", "outputFormat": "对于每个测试用例，在单独的一行输出答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Coins", "background": "", "description": "银国的人们使用硬币。他们有面值分别为 $A_1, A_2, A_3, \\dots, A_n$ 的硬币。有一天，托尼打开了他的储蓄罐，发现里面有一些硬币。他决定去附近的商店购买一块非常漂亮的手表。他想要支付准确的价格（不找零），而他知道手表的价格不会超过 $m$ 。但他不知道手表的确切价格。\n\n你需要编写一个程序，读取 $n$、$m$、$A_1, A_2, A_3, \\dots, A_n$ 以及对应的数量 $C_1, C_2, C_3, \\dots, C_n$ （表示托尼拥有的每种面值的硬币数量），然后计算托尼可以用这些硬币支付的价格数量（从 1 到 $m$ 的所有价格）。", "inputFormat": "输入包含多个测试用例（不超过 $25$ 组）。每个测试用例的第一行包含两个整数 $n (1 ≤ n ≤ 100)$ 和 $m (m ≤ 100000)$。第二行包含 $2n$ 个整数，分别表示 $A_1, A_2, A_3, \\dots, A_n$ 和 $C_1, C_2, C_3, \\dots, C_n (1 ≤ A_i ≤ 100000, 1 ≤ C_i ≤ 1000)$。最后一个测试用例以两个零结尾。\n", "outputFormat": "对于每个测试用例，在单独的一行输出答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10974", "type": "P", "difficulty": 5, "samples": [["1\n5\n1 2 11\n1 4 13\n3 4 5\n4 5 10", "26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2008", "树形 DP", "ICPC"], "title": "Accumulation Degree", "background": "树木是自然景观的重要组成部分，因为它们可以防止土壤侵蚀，并在其树叶中及其下方提供特定的气候庇护生态系统。研究表明，树木在生产氧气和减少大气中的二氧化碳方面起着重要作用，还可以调节地面温度。它们在园林设计和农业中也是重要的元素，既因为它们的美学吸引力，也因为它们的果园作物（如苹果）。木材也是常见的建筑材料。", "description": "树在许多世界神话中也扮演着亲密的角色。许多学者对树的一些特殊属性感兴趣，例如树的中心、树的计数、树的着色等。树的累积度 $A(x)$ 就是其中的一种属性。\n\n我们这么定义 $A(x)$：\n\n- 树的每一条边都有一个正容量。\n- 树中度为 $1$ 的节点被称为终端节点。\n- 每条边的流量不能超过其容量。\n- $A(x)$ 是节点 $x$ 可以流向其他终端节点的最大流量。\n\n树的累积度是指其节点中最大累积度的值。你的任务是找到给定树的累积度。", "inputFormat": "输入的第一行是一个整数 $T$，表示测试用例的数量。每个测试用例的第一行是一个正整数 $n$。接下来的 $n - 1$ 行中的每一行包含三个整数 $x,y,z$，用空格分隔，表示节点 $x$ 和节点 $y$ 之间有一条边，并且这条边的容量为 $z$。节点编号从 $1$ 到 $n$。所有元素都是不超过 $200000$ 的非负整数。可以假设测试数据都是树。", "outputFormat": "对于每个测试用例，在单独的一行输出结果。", "hint": "原题中没有提到的数据范围：$T \\le 4$，$\\sum n \\le 2\\times 10 ^ 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Accumulation Degree", "background": "树木是自然景观的重要组成部分，因为它们可以防止土壤侵蚀，并在其树叶中及其下方提供特定的气候庇护生态系统。研究表明，树木在生产氧气和减少大气中的二氧化碳方面起着重要作用，还可以调节地面温度。它们在园林设计和农业中也是重要的元素，既因为它们的美学吸引力，也因为它们的果园作物（如苹果）。木材也是常见的建筑材料。", "description": "树在许多世界神话中也扮演着亲密的角色。许多学者对树的一些特殊属性感兴趣，例如树的中心、树的计数、树的着色等。树的累积度 $A(x)$ 就是其中的一种属性。\n\n我们这么定义 $A(x)$：\n\n- 树的每一条边都有一个正容量。\n- 树中度为 $1$ 的节点被称为终端节点。\n- 每条边的流量不能超过其容量。\n- $A(x)$ 是节点 $x$ 可以流向其他终端节点的最大流量。\n\n树的累积度是指其节点中最大累积度的值。你的任务是找到给定树的累积度。", "inputFormat": "输入的第一行是一个整数 $T$，表示测试用例的数量。每个测试用例的第一行是一个正整数 $n$。接下来的 $n - 1$ 行中的每一行包含三个整数 $x,y,z$，用空格分隔，表示节点 $x$ 和节点 $y$ 之间有一条边，并且这条边的容量为 $z$。节点编号从 $1$ 到 $n$。所有元素都是不超过 $200000$ 的非负整数。可以假设测试数据都是树。", "outputFormat": "对于每个测试用例，在单独的一行输出结果。", "hint": "原题中没有提到的数据范围：$T \\le 4$，$\\sum n \\le 2\\times 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P10975", "type": "P", "difficulty": 5, "samples": [["1 2\n1 3\n1 4\n2 2\n2 3\n2 4\n2 11\n4 11\n0 0", "1\n0\n1\n2\n3\n5\n144\n51205"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["轮廓线 DP", "状压 DP"], "title": "Mondriaan's Dream", "background": "", "description": "荷兰著名画家皮特·蒙德里安对正方形和矩形非常着迷。有一天晚上，在创作完他的“厕所系列”画作后（他不得不用厕纸画画，因为他所有的画纸都用完了），他梦见用宽度为 $2$、高度为 $1$ 的小矩形以不同的方式填充一个大矩形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5b9lwj6n.png)\n\n作为这方面的专家，他一眼就看出需要使用计算机来计算填充这个大矩形的不同方式。请帮助他，以免他的梦想变成噩梦！", "inputFormat": "输入包含多个测试用例。每个测试用例由两个整数构成：大矩形的高度 $h$ 和宽度 $w$。当 $h = w = 0$ 时输入结束。否则，$1 \\leq h, w \\leq 11$。\n", "outputFormat": "对于每个测试用例，输出使用大小为 $2\\times 1$ 的小矩形填充给定大矩形的不同方式的数量。假设给定的大矩形是定向的，即对称的铺砌方式应多次计算。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mondriaan's Dream", "background": "", "description": "荷兰著名画家皮特·蒙德里安对正方形和矩形非常着迷。有一天晚上，在创作完他的“厕所系列”画作后（他不得不用厕纸画画，因为他所有的画纸都用完了），他梦见用宽度为 $2$、高度为 $1$ 的小矩形以不同的方式填充一个大矩形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5b9lwj6n.png)\n\n作为这方面的专家，他一眼就看出需要使用计算机来计算填充这个大矩形的不同方式。请帮助他，以免他的梦想变成噩梦！", "inputFormat": "输入包含多个测试用例。每个测试用例由两个整数构成：大矩形的高度 $h$ 和宽度 $w$。当 $h = w = 0$ 时输入结束。否则，$1 \\leq h, w \\leq 11$。\n", "outputFormat": "对于每个测试用例，输出使用大小为 $2\\times 1$ 的小矩形填充给定大矩形的不同方式的数量。假设给定的大矩形是定向的，即对称的铺砌方式应多次计算。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10976", "type": "P", "difficulty": 4, "samples": [["ab 2\nacb 4\nacb 1\nacb 1", "2\n1"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "倍增", "动态规划优化", "线性 DP"], "title": "统计重复个数", "background": "", "description": "定义 $str = [s, n]$ 表示 $str$ 由 $n$ 个字符串 $s$ 连接构成。\n\n例如，$str == [\\texttt{abc}, 3] == \\texttt{abcabcabc}$。\n如果可以从 $s_2$ 中删除某些字符使其变为 $s_1$，则称字符串 $s_1$ 可以从字符串 $s_2$ 获得。\n\n例如，根据定义，$s1 = \\tt{abc}$ 可以从 $s2 = \\tt{ab\\red{dbe}c}$ 获得，仅需要删除红色标识的字符。\n\n现在给你两个字符串 $s_1$ 和 $s_2$ 和两个整数 $n_1$ 和 $n_2$。由此构造得到两个字符串，其中 $str_1 = [s_1, n_1]$、$str_2 = [s_2, n_2]$。\n\n请你找出一个最大整数 $m$，以满足 $str = [str_2, m]$ 可以从 $str_1$ 获得。", "inputFormat": "本题有多组测试数据。测试数据不超过 $100$ 组。\n\n对于每组测试数据，分为两行：\n- 第一行输入字符串 $s_2$ 和整数 $n_2$；\n- 第二行输入字符串 $s_1$ 和整数 $n_1$；", "outputFormat": "对于每组测试数据，输出整数 $m$ 表示答案。", "hint": "数据保证，$s_1,s_2$ 全为小写字母构成，且 $1\\leq |s_1|,|s_2| \\leq 100$，$0\\leq n_1,n_2\\leq 10^6$，每个测试点的测试数据不超过 $100$ 组。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "统计重复个数", "background": "", "description": "定义 $str = [s, n]$ 表示 $str$ 由 $n$ 个字符串 $s$ 连接构成。\n\n例如，$str == [\\texttt{abc}, 3] == \\texttt{abcabcabc}$。\n如果可以从 $s_2$ 中删除某些字符使其变为 $s_1$，则称字符串 $s_1$ 可以从字符串 $s_2$ 获得。\n\n例如，根据定义，$s1 = \\tt{abc}$ 可以从 $s2 = \\tt{ab\\red{dbe}c}$ 获得，仅需要删除红色标识的字符。\n\n现在给你两个字符串 $s_1$ 和 $s_2$ 和两个整数 $n_1$ 和 $n_2$。由此构造得到两个字符串，其中 $str_1 = [s_1, n_1]$、$str_2 = [s_2, n_2]$。\n\n请你找出一个最大整数 $m$，以满足 $str = [str_2, m]$ 可以从 $str_1$ 获得。", "inputFormat": "本题有多组测试数据。测试数据不超过 $100$ 组。\n\n对于每组测试数据，分为两行：\n- 第一行输入字符串 $s_2$ 和整数 $n_2$；\n- 第二行输入字符串 $s_1$ 和整数 $n_1$；", "outputFormat": "对于每组测试数据，输出整数 $m$ 表示答案。", "hint": "数据保证，$s_1,s_2$ 全为小写字母构成，且 $1\\leq |s_1|,|s_2| \\leq 100$，$0\\leq n_1,n_2\\leq 10^6$，每个测试点的测试数据不超过 $100$ 组。", "locale": "zh-CN"}}}
{"pid": "P10977", "type": "P", "difficulty": 5, "samples": [["8 17\n2 2 2 8 1 8 2 1", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "单调队列", "动态规划优化", "线性 DP", "STL"], "title": "Cut the Sequence", "background": null, "description": "给定一个长度为 $N$ 的整数序列 $\\{a_N\\}$，你需要将这个序列划分成若干部分，满足每一部分都是原序列的一个连续子序列，且每个部分的整数之和均不超过 $M$。你的任务是求出在所有合法的划分方式中，每一部分的最大值之和的最小值。", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $M$（$1 \\le N \\le 10^5$，$1\\le M < 2^{31}$）。第二行包含 $N$ 个整数，依次为 $a_1,a_2,\\dots,a_N$（$0\\le a_i\\le 10^6$）。", "outputFormat": "输出一个整数，表示每一部分的最大值之和的最小值。如果不存在合法的划分方式，输出 $-1$。", "hint": "样例解释：\n\n将序列划分为三个部分：$\\{2,2,2\\},\\{8,1,8\\},\\{2,1\\}$，此时每一部分的最大值之和为 $2+8+2=12$。可以证明，不存在更优的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Cut the Sequence", "background": null, "description": "给定一个长度为 $N$ 的整数序列 $\\{a_N\\}$，你需要将这个序列划分成若干部分，满足每一部分都是原序列的一个连续子序列，且每个部分的整数之和均不超过 $M$。你的任务是求出在所有合法的划分方式中，每一部分的最大值之和的最小值。", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $M$（$1 \\le N \\le 10^5$，$1\\le M < 2^{31}$）。第二行包含 $N$ 个整数，依次为 $a_1,a_2,\\dots,a_N$（$0\\le a_i\\le 10^6$）。", "outputFormat": "输出一个整数，表示每一部分的最大值之和的最小值。如果不存在合法的划分方式，输出 $-1$。", "hint": "样例解释：\n\n将序列划分为三个部分：$\\{2,2,2\\},\\{8,1,8\\},\\{2,1\\}$，此时每一部分的最大值之和为 $2+8+2=12$。可以证明，不存在更优的方案。", "locale": "zh-CN"}}}
{"pid": "P10978", "type": "P", "difficulty": 5, "samples": [["8 4\n3 2 2\n3 2 3\n3 3 5\n1 1 7 ", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "单调队列", "动态规划优化"], "title": "Fence", "background": null, "description": "一组由 $k$（$1 \\leq k \\leq 100$） 名工人组成的团队需要粉刷一堵包含 $N$ 个木板的围栏，这些木板从左到右编号为 $1$ 到 $N$（$1 \\leq N \\leq 16,000$）。每个工人 $i$（$1 \\leq i \\leq k$）应该坐在木板 $S_i$ 前，他只能粉刷一个连续的区间（这意味着区间内的木板应该是连续的）。这个区间必须包含木板 $S_i$（**特别地，这个区间也可以为空，即一个工人可以不工作**）。此外，每个工人粉刷的木板数量不能超过 $L_i$ 个，并且每粉刷一个木板他会得到 $P_i$ 美元（$1 \\leq P_i \\leq 10,000$）。每个木板最多只能由一个工人粉刷。所有的 $S_i$ 都是不同的。\n\n作为团队的领导者，你需要为每个工人确定他们应该粉刷的区间，并且确保总收入最大化。总收入代表工人个人收入的总和。\n\n编写一个程序来确定 $k$ 名工人获得的总最大收入。\n\n**注意：你不必粉刷整个木板。**", "inputFormat": "输入的第一行是是两个正整数 $N,k$。\n\n接下来 $k$ 行，每行三个正整数 $L_i,P_i,S_i$。", "outputFormat": "输出一个整数，表示总最大收入。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "Fence", "background": null, "description": "一组由 $k$（$1 \\leq k \\leq 100$） 名工人组成的团队需要粉刷一堵包含 $N$ 个木板的围栏，这些木板从左到右编号为 $1$ 到 $N$（$1 \\leq N \\leq 16,000$）。每个工人 $i$（$1 \\leq i \\leq k$）应该坐在木板 $S_i$ 前，他只能粉刷一个连续的区间（这意味着区间内的木板应该是连续的）。这个区间必须包含木板 $S_i$（**特别地，这个区间也可以为空，即一个工人可以不工作**）。此外，每个工人粉刷的木板数量不能超过 $L_i$ 个，并且每粉刷一个木板他会得到 $P_i$ 美元（$1 \\leq P_i \\leq 10,000$）。每个木板最多只能由一个工人粉刷。所有的 $S_i$ 都是不同的。\n\n作为团队的领导者，你需要为每个工人确定他们应该粉刷的区间，并且确保总收入最大化。总收入代表工人个人收入的总和。\n\n编写一个程序来确定 $k$ 名工人获得的总最大收入。\n\n**注意：你不必粉刷整个木板。**", "inputFormat": "输入的第一行是是两个正整数 $N,k$。\n\n接下来 $k$ 行，每行三个正整数 $L_i,P_i,S_i$。", "outputFormat": "输出一个整数，表示总最大收入。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10979", "type": "P", "difficulty": 6, "samples": [["5\n1\n1 3\n3 2\n4 3\n2 3\n1 4", "153"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "斜率优化"], "title": "任务安排 2", "background": "本题是 P2365 强化版，是 P5785 弱化版，用于让学生循序渐进地了解斜率优化 DP。", "description": "机器上有 $n$ 个需要处理的任务，它们构成了一个序列。这些任务被标号为 $1$ 到 $n$，因此序列的排列为 $1 , 2 , 3 \\cdots n$。这 $n$ 个任务被分成若干批，每批包含相邻的若干任务。从时刻 $0$ 开始，这些任务被分批加工，第 $i$ 个任务单独完成所需的时间是 $T_i$。在每批任务开始前，机器需要启动时间 $s$，而完成这批任务所需的时间是各个任务需要时间的总和。\n\n**注意，同一批任务将在同一时刻完成**。每个任务的费用是它的完成时刻乘以一个费用系数 $C_i$。\n\n请确定一个分组方案，使得总费用最小。", "inputFormat": "第一行一个整数 $n$。第二行一个整数 $s$。\n\n接下来 $n$ 行，每行有一对整数，分别为 $T_i$ 和 $C_i$，表示第 $i$ 个任务单独完成所需的时间是 $T_i$ 及其费用系数 $C_i$。", "outputFormat": "一行，一个整数，表示最小的总费用。", "hint": "对于 $100\\%$ 数据，$1 \\le n \\le 3 \\times 10^5$，$1 \\le s \\le 2^8$，$1\\le T_i \\le 2^8$，$0 \\le C_i \\le 2^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "任务安排 2", "background": "本题是 P2365 强化版，是 P5785 弱化版，用于让学生循序渐进地了解斜率优化 DP。", "description": "机器上有 $n$ 个需要处理的任务，它们构成了一个序列。这些任务被标号为 $1$ 到 $n$，因此序列的排列为 $1 , 2 , 3 \\cdots n$。这 $n$ 个任务被分成若干批，每批包含相邻的若干任务。从时刻 $0$ 开始，这些任务被分批加工，第 $i$ 个任务单独完成所需的时间是 $T_i$。在每批任务开始前，机器需要启动时间 $s$，而完成这批任务所需的时间是各个任务需要时间的总和。\n\n**注意，同一批任务将在同一时刻完成**。每个任务的费用是它的完成时刻乘以一个费用系数 $C_i$。\n\n请确定一个分组方案，使得总费用最小。", "inputFormat": "第一行一个整数 $n$。第二行一个整数 $s$。\n\n接下来 $n$ 行，每行有一对整数，分别为 $T_i$ 和 $C_i$，表示第 $i$ 个任务单独完成所需的时间是 $T_i$ 及其费用系数 $C_i$。", "outputFormat": "一行，一个整数，表示最小的总费用。", "hint": "对于 $100\\%$ 数据，$1 \\le n \\le 3 \\times 10^5$，$1 \\le s \\le 2^8$，$1\\le T_i \\le 2^8$，$0 \\le C_i \\le 2^8$。", "locale": "zh-CN"}}}
{"pid": "P10982", "type": "P", "difficulty": 5, "samples": [["3", "4"], ["4", "38"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["组合数学", "容斥原理"], "title": "Connected Graph", "background": "本题是 P4841 [集训队作业2013] 城市规划 的弱化版，去除了原题中的多项式部分。", "description": "求 $n$ 个结点的有标号无向连通图个数。", "inputFormat": "输入一个正整数 $n$。", "outputFormat": "输出答案对 $1004535809$ ( $479 \\times 2 ^{21} + 1$ ) 取模的值。", "hint": "数据保证 $1\\leq n \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Connected Graph", "background": "本题是 P4841 [集训队作业2013] 城市规划 的弱化版，去除了原题中的多项式部分。", "description": "求 $n$ 个结点的有标号无向连通图个数。", "inputFormat": "输入一个正整数 $n$。", "outputFormat": "输出答案对 $1004535809$ ( $479 \\times 2 ^{21} + 1$ ) 取模的值。", "hint": "数据保证 $1\\leq n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10983", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "2023", "枚举", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 跑步计划", "background": "", "description": "小蓝计划在某天的日期中出现 $1$ 时跑 $5$ 千米，否则只跑 $1$ 千米。注意日期中出现 $1$ 不仅指年月日也指星期。\n\n请问按照小蓝的计划，$2023$ 年小蓝总共会跑步锻炼多少千米？\n\n例如，$5$ 月 $1$ 日、$1$ 月 $13$ 日、$11$ 月 $5$ 日、$4$ 月 $3$ 日（星期一）小蓝会跑 $5$ 千米，而 $5$ 月 $23$ 日小蓝会跑 $1$ 千米。\n\n（示例日期均为 $2023$ 年）", "inputFormat": "无。", "outputFormat": "一行一个整数，表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 跑步计划", "background": "", "description": "小蓝计划在某天的日期中出现 $1$ 时跑 $5$ 千米，否则只跑 $1$ 千米。注意日期中出现 $1$ 不仅指年月日也指星期。\n\n请问按照小蓝的计划，$2023$ 年小蓝总共会跑步锻炼多少千米？\n\n例如，$5$ 月 $1$ 日、$1$ 月 $13$ 日、$11$ 月 $5$ 日、$4$ 月 $3$ 日（星期一）小蓝会跑 $5$ 千米，而 $5$ 月 $23$ 日小蓝会跑 $1$ 千米。\n\n（示例日期均为 $2023$ 年）", "inputFormat": "无。", "outputFormat": "一行一个整数，表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10984", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2023", "枚举", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A/Java A] 残缺的数字", "background": "", "description": "七段码显示器是一种常见的显示数字的电子元件，它有七个发光管组成：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pwjpl23s.png)\n\n上图依次展示了数字 $0\\sim 9$ 用七段码来显示的状态，其中灯管为黄色表示点亮，灰色表示熄灭。根据灯管的亮暗状态，我们可以用一个状态码（状态码是一个 $7$ 位的二进制数字）来表示一个七段码，令灯管点亮时状态为 $1$，灯管熄灭时状态为 $0$，按照灯管 $\\rm ABCDEFG$ 的顺序标识一个七段码，则数字 $0 \\sim 9$ 的状态码为：\n\n|数字|状态码|数字|状态码|\n|:-:|:-:|:-:|:-:|\n|$0$|$1111110$|$5$|$1011011$|\n|$1$|$0110000$|$6$|$1011111$|\n|$2$|$1101101$|$7$|$1110000$|\n|$3$|$1111001$|$8$|$1111111$|\n|$4$|$0110011$|$9$|$1111011$|\n\n小蓝有一个喜爱的数字，长度为 $18$ 位，每一位用一个七段码显示器来展示\n（每位只能是 $0 \\sim 9$，可以包含前导零），由于灯管故障，一些本该点亮的灯管\n处于了熄灭状态。例如，对于一个长度为 $2$ 的数字来说，当两个七段码对应的\n状态码分别为：$1011111$（高位）、$1110011$（低位）时，原本的数字可能会是：\n$68$、$69$、$88$、$89$，有 4 种可能的值。\n\n$18$ 个七段码显示器对应的状态码分别为：\n\n$0000011$，$1001011$，$0000001$，$0100001$，$0101011$，$0110110$，\n$1111111$，$0010110$，\n$0101001$，$0010110$，\n$1011100$，$0100110$，\n$1010000$，$0010011$，\n$0001111$，$0101101$，\n$0110101$，$1101010$。\n\n其中每个表示一个七段码对应的的状态码（按照数字的高位到低位给出）。请你\n判断下小蓝喜爱的数字有多少种可能的值。\n\n", "inputFormat": "", "outputFormat": "一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A/Java A] 残缺的数字", "background": "", "description": "七段码显示器是一种常见的显示数字的电子元件，它有七个发光管组成：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pwjpl23s.png)\n\n上图依次展示了数字 $0\\sim 9$ 用七段码来显示的状态，其中灯管为黄色表示点亮，灰色表示熄灭。根据灯管的亮暗状态，我们可以用一个状态码（状态码是一个 $7$ 位的二进制数字）来表示一个七段码，令灯管点亮时状态为 $1$，灯管熄灭时状态为 $0$，按照灯管 $\\rm ABCDEFG$ 的顺序标识一个七段码，则数字 $0 \\sim 9$ 的状态码为：\n\n|数字|状态码|数字|状态码|\n|:-:|:-:|:-:|:-:|\n|$0$|$1111110$|$5$|$1011011$|\n|$1$|$0110000$|$6$|$1011111$|\n|$2$|$1101101$|$7$|$1110000$|\n|$3$|$1111001$|$8$|$1111111$|\n|$4$|$0110011$|$9$|$1111011$|\n\n小蓝有一个喜爱的数字，长度为 $18$ 位，每一位用一个七段码显示器来展示\n（每位只能是 $0 \\sim 9$，可以包含前导零），由于灯管故障，一些本该点亮的灯管\n处于了熄灭状态。例如，对于一个长度为 $2$ 的数字来说，当两个七段码对应的\n状态码分别为：$1011111$（高位）、$1110011$（低位）时，原本的数字可能会是：\n$68$、$69$、$88$、$89$，有 4 种可能的值。\n\n$18$ 个七段码显示器对应的状态码分别为：\n\n$0000011$，$1001011$，$0000001$，$0100001$，$0101011$，$0110110$，\n$1111111$，$0010110$，\n$0101001$，$0010110$，\n$1011100$，$0100110$，\n$1010000$，$0010011$，\n$0001111$，$0101101$，\n$0110101$，$1101010$。\n\n其中每个表示一个七段码对应的的状态码（按照数字的高位到低位给出）。请你\n判断下小蓝喜爱的数字有多少种可能的值。\n\n", "inputFormat": "", "outputFormat": "一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10985", "type": "P", "difficulty": 1, "samples": [["23", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A/Java A] 整数变换", "background": "Python 选手建议使用 PyPy3 提交本题。", "description": "小蓝有一个整数 $n$。每分钟，小蓝的数都会发生变化，变为上一分钟的数减去上一分钟的数的各个数位和。\n\n例如，如果小蓝开始时的数为 $23$，则下一分钟变为 $23 - (2 + 3) = 18$，再下一分钟变为 $18 - (1 + 8) = 9$，再下一分钟变为 $9 - 9 = 0$，共经过了 $3$ 分钟变为 $0$。\n\n给定一个正整数，请问这个数多少分钟后变为 $0$。\n", "inputFormat": "输入一行包含一个整数 $n$。", "outputFormat": "输出一个整数，表示答案。", "hint": "对于 $30\\%$ 的评测用例，$1 \\le n \\le 1000$；\n\n对于 $60\\%$ 的评测用例，$1 \\le n \\le 10^6$；\n\n对于所有评测用例，$1 \\le n \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A/Java A] 整数变换", "background": "Python 选手建议使用 PyPy3 提交本题。", "description": "小蓝有一个整数 $n$。每分钟，小蓝的数都会发生变化，变为上一分钟的数减去上一分钟的数的各个数位和。\n\n例如，如果小蓝开始时的数为 $23$，则下一分钟变为 $23 - (2 + 3) = 18$，再下一分钟变为 $18 - (1 + 8) = 9$，再下一分钟变为 $9 - 9 = 0$，共经过了 $3$ 分钟变为 $0$。\n\n给定一个正整数，请问这个数多少分钟后变为 $0$。\n", "inputFormat": "输入一行包含一个整数 $n$。", "outputFormat": "输出一个整数，表示答案。", "hint": "对于 $30\\%$ 的评测用例，$1 \\le n \\le 1000$；\n\n对于 $60\\%$ 的评测用例，$1 \\le n \\le 10^6$；\n\n对于所有评测用例，$1 \\le n \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10986", "type": "P", "difficulty": 5, "samples": [["5 1", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "组合数学", "容斥原理", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 2023", "background": "建议使用 PyPy3 提交本题。", "description": "给定 $n, m$，请求出所有 $n$ 位十进制整数中有多少个数中恰好出现了 $m$ 个 $2023$。\n\n例如 $00202312023$ 是一个 $11$ 位的出现了 $2$ 个 $2023$ 的十进制整数。\n\n由于结果可能很大，请输出答案对 $998,244,353$ 取模的结果。\n\n\n", "inputFormat": "输入一行包含两个整数 $n,m$，用一个空格分隔。\n\n", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $40\\%$ 的评测用例，$n \\le 10^5,m \\le 10$；\n\n对于所有评测用例，$4 \\le n \\le 10^5,0 \\le 4m \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 2023", "background": "建议使用 PyPy3 提交本题。", "description": "给定 $n, m$，请求出所有 $n$ 位十进制整数中有多少个数中恰好出现了 $m$ 个 $2023$。\n\n例如 $00202312023$ 是一个 $11$ 位的出现了 $2$ 个 $2023$ 的十进制整数。\n\n由于结果可能很大，请输出答案对 $998,244,353$ 取模的结果。\n\n\n", "inputFormat": "输入一行包含两个整数 $n,m$，用一个空格分隔。\n\n", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "对于 $40\\%$ 的评测用例，$n \\le 10^5,m \\le 10$；\n\n对于所有评测用例，$4 \\le n \\le 10^5,0 \\le 4m \\le n$。", "locale": "zh-CN"}}}
{"pid": "P10987", "type": "P", "difficulty": 3, "samples": [["3 10 8\n8 9 1\n", "18"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "背包 DP", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 火车运输", "background": "为照顾 Python 语言的效率，本题时限较大。建议使用 PyPy3 提交本题。", "description": "钢厂有一辆用于运送废旧钢材的火车，它具有两节车厢，其中车厢 1 的最大载重量为 $A$，车厢 2 的最大载重量为 $B$。现在一共有 $N$ 件废旧钢材需要被运输，其中第 $i$ 件钢材的重量为 $w_i$，为了最大化运输效率，车长想要一次性运输走重量尽可能多的钢材，请你帮助车长计算出一次运输最多可以带走多大重量的钢材。\n\n每件钢材都是独立的不可分割的，只能被放置在某一节车厢中。在装载钢材时只需要考虑重量条件即可。\n", "inputFormat": "输入的第一行包含三个整数 $N ,A,B$，用一个空格分隔，分别表示钢材的数目以及两节车厢的最大载重。\n\n第二行包含 $N$ 个整数，分别表示 $w_1,w_2, \\cdots,w_n$，相邻两个整数之间使用一个空格分隔。", "outputFormat": "输出一个整数表示答案。\n", "hint": "对于 $30\\%$ 的评测用例，$1 \\le N \\le 10$；\n\n对于所有评测用例，$1 \\le N \\le 200,1 \\le w_i\n,A,B \\le 1000$。\n\n#### 样例解释\n\n车厢 1 装入第 $2$ 件和第 $3$ 件钢材，车厢 2 装入第 $1$ 件钢材。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 火车运输", "background": "为照顾 Python 语言的效率，本题时限较大。建议使用 PyPy3 提交本题。", "description": "钢厂有一辆用于运送废旧钢材的火车，它具有两节车厢，其中车厢 1 的最大载重量为 $A$，车厢 2 的最大载重量为 $B$。现在一共有 $N$ 件废旧钢材需要被运输，其中第 $i$ 件钢材的重量为 $w_i$，为了最大化运输效率，车长想要一次性运输走重量尽可能多的钢材，请你帮助车长计算出一次运输最多可以带走多大重量的钢材。\n\n每件钢材都是独立的不可分割的，只能被放置在某一节车厢中。在装载钢材时只需要考虑重量条件即可。\n", "inputFormat": "输入的第一行包含三个整数 $N ,A,B$，用一个空格分隔，分别表示钢材的数目以及两节车厢的最大载重。\n\n第二行包含 $N$ 个整数，分别表示 $w_1,w_2, \\cdots,w_n$，相邻两个整数之间使用一个空格分隔。", "outputFormat": "输出一个整数表示答案。\n", "hint": "对于 $30\\%$ 的评测用例，$1 \\le N \\le 10$；\n\n对于所有评测用例，$1 \\le N \\le 200,1 \\le w_i\n,A,B \\le 1000$。\n\n#### 样例解释\n\n车厢 1 装入第 $2$ 件和第 $3$ 件钢材，车厢 2 装入第 $1$ 件钢材。", "locale": "zh-CN"}}}
{"pid": "P10988", "type": "P", "difficulty": 4, "samples": [["4\n0 1 9 3\n2 9 3 7\n8 4 8 9\n9 8 0 7\n", "5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广度优先搜索 BFS", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 走方格", "background": "", "description": "给定一个 $N$ 行 $N$ 列的方格，第 $i$ 行第 $j$ 列的方格坐标为 $(i, j)$，高度为\n$H_{i,j}$。小蓝从左上角坐标 $(0, 0)$ 出发，目的地是右下角坐标 $(N − 1, N − 1)$。\n当小蓝位于第 $r$ 行第 $c$ 列时，他有如下的移动方式：\n1. 若 $r + 1 < N$，可以移动到 $(r + 1, c)$，花费 $1$ 秒；\n1. 若 $c + 1 < N$，可以移动到 $(r, c + 1)$，花费 $1$ 秒；\n1. 对于任意整数 $L$，若 $H_{r,c} > H_{r,c+1} > \\cdots > H_{r,c+L}$，可以移动到 $(r, c + L)$，花费 $1$ 秒；\n1. 对于任意整数 $L$，若 $H_{r,c} > H_{r,c−1} > \\cdots > H_{r,c−L}$，可以移动到 $(r, c − L)$，花费 $1$ 秒。\n\n现在给出方格，请问小蓝从 $(0, 0)$ 移动到 $(N − 1, N − 1)$ 最少需要多少秒？\n", "inputFormat": "输入的第一行包含一个整数 $N$ 表示方格大小。\n接下来 $N$ 行，每行包含 $N$ 个整数，表示每个方格上的数字。\n", "outputFormat": "输出一个整数表示答案。", "hint": "对于 $20\\%$ 的评测用例，$1 \\le N \\le 10$；\n\n对于 $50\\%$ 的评测用例，$1 \\le N \\le 100$；\n\n对于所有评测用例，$1 \\le N \\le 1000,0 \\le H_{i, j} \\le 100$。\n\n#### 样例解释\n移动顺序为：$(0, 0)\\rightarrow (1, 0)\\rightarrow(2, 0)\\rightarrow(3, 0)\\rightarrow(3, 2)\\rightarrow(3, 3)$，其中坐标 $(3, 0),(3, 1),(3, 2)$ 处的数字分别为 $9 > 8 > 0$，所以可以花费 $1$ 秒从 $(3, 0)$\n移动到 $(3, 2)$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 走方格", "background": "", "description": "给定一个 $N$ 行 $N$ 列的方格，第 $i$ 行第 $j$ 列的方格坐标为 $(i, j)$，高度为\n$H_{i,j}$。小蓝从左上角坐标 $(0, 0)$ 出发，目的地是右下角坐标 $(N − 1, N − 1)$。\n当小蓝位于第 $r$ 行第 $c$ 列时，他有如下的移动方式：\n1. 若 $r + 1 < N$，可以移动到 $(r + 1, c)$，花费 $1$ 秒；\n1. 若 $c + 1 < N$，可以移动到 $(r, c + 1)$，花费 $1$ 秒；\n1. 对于任意整数 $L$，若 $H_{r,c} > H_{r,c+1} > \\cdots > H_{r,c+L}$，可以移动到 $(r, c + L)$，花费 $1$ 秒；\n1. 对于任意整数 $L$，若 $H_{r,c} > H_{r,c−1} > \\cdots > H_{r,c−L}$，可以移动到 $(r, c − L)$，花费 $1$ 秒。\n\n现在给出方格，请问小蓝从 $(0, 0)$ 移动到 $(N − 1, N − 1)$ 最少需要多少秒？\n", "inputFormat": "输入的第一行包含一个整数 $N$ 表示方格大小。\n接下来 $N$ 行，每行包含 $N$ 个整数，表示每个方格上的数字。\n", "outputFormat": "输出一个整数表示答案。", "hint": "对于 $20\\%$ 的评测用例，$1 \\le N \\le 10$；\n\n对于 $50\\%$ 的评测用例，$1 \\le N \\le 100$；\n\n对于所有评测用例，$1 \\le N \\le 1000,0 \\le H_{i, j} \\le 100$。\n\n#### 样例解释\n移动顺序为：$(0, 0)\\rightarrow (1, 0)\\rightarrow(2, 0)\\rightarrow(3, 0)\\rightarrow(3, 2)\\rightarrow(3, 3)$，其中坐标 $(3, 0),(3, 1),(3, 2)$ 处的数字分别为 $9 > 8 > 0$，所以可以花费 $1$ 秒从 $(3, 0)$\n移动到 $(3, 2)$。\n", "locale": "zh-CN"}}}
{"pid": "P10989", "type": "P", "difficulty": 6, "samples": [["5\n3 3 5 7 7\n", "3\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "三分", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A/Java A] 等腰三角形", "background": "Python 用户建议使用 PyPy3 提交本题。", "description": "给定一个包含 $n$ 个数的序列 $A_i$，每次操作可以选择其中任意一个数将其\n$+1$ 或 $−1$。\n\n我们要让这个序列满足能够从中任选三个数，这三个数对应长度的三条边总能组成一个等腰三角形。问最少需要多少次操作才能让序列满足条件。\n", "inputFormat": "输入的第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \\cdots, A_n$，相邻两个整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数，表示最少的操作次数。\n", "hint": "对于 $40\\%$ 的评测用例，$n \\le 5000,A_i \\le5000$；\n\n对于 $70\\%$ 的评测用例，$n \\le 2 \\times 10^5,A_i \\le 10^6$；\n\n对于所有评测用例，$1 \\le n \\le 2 \\times 10^5,1 \\le A_i \\le 10^9$。\n\n#### 样例解释\n\n将原序列修改为 $4, 4, 4, 7, 7$ 即可。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A/Java A] 等腰三角形", "background": "Python 用户建议使用 PyPy3 提交本题。", "description": "给定一个包含 $n$ 个数的序列 $A_i$，每次操作可以选择其中任意一个数将其\n$+1$ 或 $−1$。\n\n我们要让这个序列满足能够从中任选三个数，这三个数对应长度的三条边总能组成一个等腰三角形。问最少需要多少次操作才能让序列满足条件。\n", "inputFormat": "输入的第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \\cdots, A_n$，相邻两个整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数，表示最少的操作次数。\n", "hint": "对于 $40\\%$ 的评测用例，$n \\le 5000,A_i \\le5000$；\n\n对于 $70\\%$ 的评测用例，$n \\le 2 \\times 10^5,A_i \\le 10^6$；\n\n对于所有评测用例，$1 \\le n \\le 2 \\times 10^5,1 \\le A_i \\le 10^9$。\n\n#### 样例解释\n\n将原序列修改为 $4, 4, 4, 7, 7$ 即可。\n", "locale": "zh-CN"}}}
{"pid": "P10990", "type": "P", "difficulty": 4, "samples": [["6 6\n1 1 1 1\n2 3\n1 5 2 2\n2 4\n2 1\n2 3\n\n", "1\n2\n2\n1\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432, 786432]}, "tags": ["2023", "枚举", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 彩色二叉树", "background": "建议使用 PyPy3 提交本题。", "description": "给定包含 $n$ 个结点的完全二叉树，如下图是一棵包含 $n = 6$ 个结点的完全二叉树。\n\n**树上的所有节点开始时没有被染色，颜色为 $0$。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7zry2bbp.png)\n\n给定 $q$ 次操作，操作可以是：\n1. $x_i\\ y_i\\ z_i$，表示将与结点 $x_i$ 距离小于等于 $y_i$ 的结点的颜色全部染成 $z_i$；\n1. $x_i$，表示查询结点 $x_i$ 的颜色。", "inputFormat": "输入的第一行包含两个整数 $n, q$，用一个空格分隔。\n\n接下来 $q$ 行，每行包含 $1$ 个操作，相邻的整数之间使用一个空格分隔。保证每个操作都是合法的。", "outputFormat": "对于每个查询操作，输出一行包含一个整数表示对应的答案。", "hint": "对于 $40\\%$ 的评测用例，$n, q \\le 5000$；\n\n对于所有评测用例，$1 \\le n \\le 10^6,1\\le q \\le 2 \\times 10^5,1 \\le x_i \\le n,1 \\le y_i \\le 10^6,1 \\le z_i\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 彩色二叉树", "background": "建议使用 PyPy3 提交本题。", "description": "给定包含 $n$ 个结点的完全二叉树，如下图是一棵包含 $n = 6$ 个结点的完全二叉树。\n\n**树上的所有节点开始时没有被染色，颜色为 $0$。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7zry2bbp.png)\n\n给定 $q$ 次操作，操作可以是：\n1. $x_i\\ y_i\\ z_i$，表示将与结点 $x_i$ 距离小于等于 $y_i$ 的结点的颜色全部染成 $z_i$；\n1. $x_i$，表示查询结点 $x_i$ 的颜色。", "inputFormat": "输入的第一行包含两个整数 $n, q$，用一个空格分隔。\n\n接下来 $q$ 行，每行包含 $1$ 个操作，相邻的整数之间使用一个空格分隔。保证每个操作都是合法的。", "outputFormat": "对于每个查询操作，输出一行包含一个整数表示对应的答案。", "hint": "对于 $40\\%$ 的评测用例，$n, q \\le 5000$；\n\n对于所有评测用例，$1 \\le n \\le 10^6,1\\le q \\le 2 \\times 10^5,1 \\le x_i \\le n,1 \\le y_i \\le 10^6,1 \\le z_i\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10991", "type": "P", "difficulty": 4, "samples": [["5 1 4\n4 5 3 3 1\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "排序", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 选段排序", "background": "", "description": "给定一个长度为 $n$ 的序列 $A_i$ 以及两个下标 $p, q(p < q)$。你可以选择任意一个区间 $[L, R]$ 并将序列的这个范围内的元素 $A_L \\sim A_R$ 从小到大排序。\n\n求选择一个区间排序后 $A_q − A_p$ 的值最大可以是多少。\n", "inputFormat": "输入的第一行包含三个整数 $n, p, q$，相邻两个整数之间使用一个空格分隔。\n\n第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \\cdots, A_n$，相邻两个整数之间使用一个空格分隔。\n", "outputFormat": "输出一行，包含一个整数表示 $A_q − A_p$ 的最大值。", "hint": "对于 $20\\%$ 的评测用例，$n \\le 100 ,A_i \\le 200$；\n\n对于 $40\\%$ 的评测用例，$n \\le 2000 ,A_i \\le 3000$；\n\n对于所有评测用例，$1 \\le p \\le q \\le n \\le 2 \\times 10^5,1 \\le A_i \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 选段排序", "background": "", "description": "给定一个长度为 $n$ 的序列 $A_i$ 以及两个下标 $p, q(p < q)$。你可以选择任意一个区间 $[L, R]$ 并将序列的这个范围内的元素 $A_L \\sim A_R$ 从小到大排序。\n\n求选择一个区间排序后 $A_q − A_p$ 的值最大可以是多少。\n", "inputFormat": "输入的第一行包含三个整数 $n, p, q$，相邻两个整数之间使用一个空格分隔。\n\n第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \\cdots, A_n$，相邻两个整数之间使用一个空格分隔。\n", "outputFormat": "输出一行，包含一个整数表示 $A_q − A_p$ 的最大值。", "hint": "对于 $20\\%$ 的评测用例，$n \\le 100 ,A_i \\le 200$；\n\n对于 $40\\%$ 的评测用例，$n \\le 2000 ,A_i \\le 3000$；\n\n对于所有评测用例，$1 \\le p \\le q \\le n \\le 2 \\times 10^5,1 \\le A_i \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10992", "type": "P", "difficulty": 6, "samples": [["aaaba\nyxyy\n", "3\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2023", "哈希 hashing", "蓝桥杯国赛"], "title": "[蓝桥杯 2023 国 Python A] 最长同类子串", "background": "", "description": "对于两个等长的字符串 $A, B$，如果对于任意 $i, j$，都有 $A_i = A_j$ 和 $B_i = B_j$\n同时满足或同时不满足，那么我们称 $A, B$ 是一对同类串。例如，`aabab` 和 `xxkxk` 是一对同类串，而 `abcde` 和  `abcdd` 则不是。\n\n给定 $S, T$，找出一个尽可能大的 $k$ 使得 $S, T$ 分别含有一个长度为 $k$ 的子\n串 $S', T'$，且 $S',T'$ 是同类串。\n", "inputFormat": "输入两行，每行包含一个字符串，分别表示 $S, T$。\n", "outputFormat": "输出一行包含一个整数 $k$ 表示答案。\n", "hint": "对于 $40\\%$ 的评测用例，$|S |, |T| \\le 500$；\n\n对于 $50\\%$ 的评测用例，$|S |, |T| \\le 2000$；\n\n对于所有评测用例，$1 \\le |S |, |T| \\le 10^5$，$S, T$ 中仅包含小写英文字母。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 国 Python A] 最长同类子串", "background": "", "description": "对于两个等长的字符串 $A, B$，如果对于任意 $i, j$，都有 $A_i = A_j$ 和 $B_i = B_j$\n同时满足或同时不满足，那么我们称 $A, B$ 是一对同类串。例如，`aabab` 和 `xxkxk` 是一对同类串，而 `abcde` 和  `abcdd` 则不是。\n\n给定 $S, T$，找出一个尽可能大的 $k$ 使得 $S, T$ 分别含有一个长度为 $k$ 的子\n串 $S', T'$，且 $S',T'$ 是同类串。\n", "inputFormat": "输入两行，每行包含一个字符串，分别表示 $S, T$。\n", "outputFormat": "输出一行包含一个整数 $k$ 表示答案。\n", "hint": "对于 $40\\%$ 的评测用例，$|S |, |T| \\le 500$；\n\n对于 $50\\%$ 的评测用例，$|S |, |T| \\le 2000$；\n\n对于所有评测用例，$1 \\le |S |, |T| \\le 10^5$，$S, T$ 中仅包含小写英文字母。\n", "locale": "zh-CN"}}}
{"pid": "P10993", "type": "P", "difficulty": 1, "samples": [["6\n", "Yes"], ["33\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "梦熊比赛"], "title": "【MX-J3-T0】 37", "background": "原题链接：<https://oier.team/problems/J3A>。", "description": "输入自然数 $a$，判断 $37\\times a$ 是否各个数位都相等。", "inputFormat": "输入含一行一个自然数 $a$。", "outputFormat": "如果 $37a$ 各个数位都相等，则输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n$37\\times 6 = 222$，其三个数位都是 $2$，符合题意。\n\n**【样例解释 #2】**\n\n$37\\times 33 = 1221$，有的数位不相等（如千位和百位），不符合题意。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n保证 $0\\le a \\le 3737$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J3-T0】 37", "background": "原题链接：<https://oier.team/problems/J3A>。", "description": "输入自然数 $a$，判断 $37\\times a$ 是否各个数位都相等。", "inputFormat": "输入含一行一个自然数 $a$。", "outputFormat": "如果 $37a$ 各个数位都相等，则输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n$37\\times 6 = 222$，其三个数位都是 $2$，符合题意。\n\n**【样例解释 #2】**\n\n$37\\times 33 = 1221$，有的数位不相等（如千位和百位），不符合题意。\n\n**【数据范围】**\n\n本题共 $20$ 个测试点，每个 $5$ 分。\n\n保证 $0\\le a \\le 3737$。", "locale": "zh-CN"}}}
{"pid": "P10994", "type": "P", "difficulty": 1, "samples": [["3 4\nSTTSTTTT\n", "1\n"], ["100 100\nSSTT\n", "-1\n"], ["33 24\nSSTTTTSSTSTSTSSTSTSTTTSSSTSSTTSTSSTTTTSTSTTTTSSTTTTTSTTTTSTSSSSS\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "梦熊比赛"], "title": "【MX-J3-T1】 Seats", "background": "原题链接：<https://oier.team/problems/J3B>。", "description": "**注意：题面中所有数组下标都从 $1$ 开始。**\n\n现有一次讲座，有 $a$ 个学生和 $b$ 个老师报名。主办方准备了若干座位，并用一个字符串 $s$ 表示每个座位的类型。对于从左到右的第 $i$ 个座位，$s_i=\\texttt{T}$ 表示这是教师座位，$s_i=\\texttt{S}$ 表示这是学生座位。\n\n教师座位只能给老师坐，学生座位只能给学生坐，且每个座位只能坐一个人。\n\n然而根据目前的安排方式，并不是所有老师和学生都有自己的座位坐。为此主办方打算进行一些修改。**一次修改**可以选择一个教师座位，将其改成学生座位，或者选择一个学生座位，将其改成教师座位。\n\n请判断至少要多少次修改才能让老师和学生都够坐。特别地，如果无论怎么修改，都无法让所有人有座位，输出 $-1$。", "inputFormat": "第一行有两个正整数 $a,b$，分别表示学生和老师人数。\n\n第二行有一个字符串，表示主办方每个座位的类型。", "outputFormat": "输出一行一个整数表示答案，见题目描述。", "hint": "**【样例解释 #1】**\n\n有 $3$ 位学生和 $4$ 位老师报名。如果把第 $2$ 个座位调成学生座位，那么学生可以坐第 $1,2,4$ 个座位，教师可以坐第 $3,5,6,7,8$ 个座位中的任意四个。\n\n显然，如果不调整座位，那么学生是不够坐的。\n\n**【样例解释 #2】**\n\n无论如何修改，$100$ 名学生和 $100$ 名老师显然不可能只坐在 $4$ 个座位里，因此输出 $-1$。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。设 $n$ 为字符串 $s$ 的字符个数。\n\n|测试点编号|$a,b,n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$100$|$a=b=100$|\n|$2\\sim 8$|$100$|$a+b=n$|\n|$9\\sim 11$|$100$|$s$ 内全是 `S`|\n|$12\\sim 14$|$100$|$s$ 内全是 `T`|\n|$15\\sim 21$|$100$|无特殊性质|\n|$22\\sim 25$|$10^5$|无特殊性质|\n\n\n对于全体数据，保证 $1\\le a,b,n\\le 10^5$，字符串 $s$ 内只有大写字母 `S` 或 `T`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J3-T1】 Seats", "background": "原题链接：<https://oier.team/problems/J3B>。", "description": "**注意：题面中所有数组下标都从 $1$ 开始。**\n\n现有一次讲座，有 $a$ 个学生和 $b$ 个老师报名。主办方准备了若干座位，并用一个字符串 $s$ 表示每个座位的类型。对于从左到右的第 $i$ 个座位，$s_i=\\texttt{T}$ 表示这是教师座位，$s_i=\\texttt{S}$ 表示这是学生座位。\n\n教师座位只能给老师坐，学生座位只能给学生坐，且每个座位只能坐一个人。\n\n然而根据目前的安排方式，并不是所有老师和学生都有自己的座位坐。为此主办方打算进行一些修改。**一次修改**可以选择一个教师座位，将其改成学生座位，或者选择一个学生座位，将其改成教师座位。\n\n请判断至少要多少次修改才能让老师和学生都够坐。特别地，如果无论怎么修改，都无法让所有人有座位，输出 $-1$。", "inputFormat": "第一行有两个正整数 $a,b$，分别表示学生和老师人数。\n\n第二行有一个字符串，表示主办方每个座位的类型。", "outputFormat": "输出一行一个整数表示答案，见题目描述。", "hint": "**【样例解释 #1】**\n\n有 $3$ 位学生和 $4$ 位老师报名。如果把第 $2$ 个座位调成学生座位，那么学生可以坐第 $1,2,4$ 个座位，教师可以坐第 $3,5,6,7,8$ 个座位中的任意四个。\n\n显然，如果不调整座位，那么学生是不够坐的。\n\n**【样例解释 #2】**\n\n无论如何修改，$100$ 名学生和 $100$ 名老师显然不可能只坐在 $4$ 个座位里，因此输出 $-1$。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点，每个 $4$ 分。设 $n$ 为字符串 $s$ 的字符个数。\n\n|测试点编号|$a,b,n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$100$|$a=b=100$|\n|$2\\sim 8$|$100$|$a+b=n$|\n|$9\\sim 11$|$100$|$s$ 内全是 `S`|\n|$12\\sim 14$|$100$|$s$ 内全是 `T`|\n|$15\\sim 21$|$100$|无特殊性质|\n|$22\\sim 25$|$10^5$|无特殊性质|\n\n\n对于全体数据，保证 $1\\le a,b,n\\le 10^5$，字符串 $s$ 内只有大写字母 `S` 或 `T`。", "locale": "zh-CN"}}}
{"pid": "P10995", "type": "P", "difficulty": 3, "samples": [["3 6\n3 1 2\n1\n2\n3\n4\n5\n6\n", "2 2\n2 3\n3 3\n1 1\n1 2\n1 3\n"], ["50 25\n42 22 27 8 44 11 14 31 37 10 48 15 12 40 13 4 25 9 19 5 2 18 6 1 32 3 38 33 43 34 46 47 23 35 21 20 45 39 50 7 36 17 24 29 16 30 49 26 28 41\n1178\n991\n755\n1094\n689\n132\n671\n635\n421\n659\n448\n334\n327\n213\n1206\n453\n1160\n583\n388\n781\n150\n692\n23\n1162\n62\n", "37 48\n27 44\n3 28\n1 46\n43 47\n20 34\n33 37\n2 19\n15 44\n2 43\n7 27\n6 31\n6 24\n4 29\n32 37\n7 32\n5 44\n19 47\n13 47\n44 45\n23 24\n43 50\n24 46\n5 46\n26 30\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "梦熊比赛"], "title": "【MX-J3-T2】 Substring", "background": "原题链接：<https://oier.team/problems/J3C>。", "description": "你有一个数列 $a$，**其中 $1\\sim n$ 各出现了一次**。\n\n当你任意选一对 $1\\le l\\le r\\le n$，并将 $a_l,a_{l+1},\\ldots,a_r$ 排成一行，你就得到了 $a$ 的一个子串，记为 $a_{l\\sim r}$，称 $l$ 为左端点，$r$ 为右端点。\n\n你需要把 $a$ 所有子串按字典序从小到大排序。但是为了避免输出量过大，我会给出 $q$ 个问题，每次给出一个 $k$，求字典序第 $k$ 小的子串左右端点。\n\n---\n\n如果你不知道什么是字典序，看这里：\n\n对于两个数列 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个数相同且 $p_{k+1}<q_{k+1}$。\n\n特别地，若 $p$ 是 $q$ 的前缀且 $p\\ne q$，也认为 $p$ 的字典序小于 $q$。\n\n例如：\n- $[1,2]<[3,2]$（当 $k=0$）\n- $[3,1,100]<[3,2,1]$（当 $k=1$）\n- $[3,4]<[3,4,6]$（$p$ 是 $q$ 前缀）", "inputFormat": "输入的第一行有两个正整数 $n,q$ 表示序列长度和询问个数。\n\n第二行有 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$，表示这个数列。\n\n之后有 $q$ 行，每行有一个正整数 $k$，表示要求的子串的排名。", "outputFormat": "对于每个问题，输出一行两个整数 $l,r$，表示字典序第 $k$ 小的子串是 $a_{l\\sim r}$。", "hint": "**【样例解释 #1】**\n\n数列 $3,1,2$ 共有 $6$ 个子串，从小到大排序的结果为：$[1],[1,2],[2],[3],[3,1],[3,1,2]$。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|$q\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 3$|$200$|$200$||\n|$4\\sim 7$|$1000$|$3\\times 10^5$||\n|$8\\sim 9$|$3000$|$3\\times 10^5$||\n|$10\\sim 13$|$3\\times 10^5$|$10$||\n|$14\\sim 15$|$3\\times 10^5$|$3\\times 10^5$|$a_i=i$|\n|$16\\sim 20$|$3\\times 10^5$|$3\\times 10^5$||\n\n对于全体数据，保证 $1\\le n,q\\le 3\\times 10^5$，$1\\le k\\le \\dfrac{n(n+1)}{2}$，$a_i$ 中 $1\\sim n$ 各有一个，输入皆为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J3-T2】 Substring", "background": "原题链接：<https://oier.team/problems/J3C>。", "description": "你有一个数列 $a$，**其中 $1\\sim n$ 各出现了一次**。\n\n当你任意选一对 $1\\le l\\le r\\le n$，并将 $a_l,a_{l+1},\\ldots,a_r$ 排成一行，你就得到了 $a$ 的一个子串，记为 $a_{l\\sim r}$，称 $l$ 为左端点，$r$ 为右端点。\n\n你需要把 $a$ 所有子串按字典序从小到大排序。但是为了避免输出量过大，我会给出 $q$ 个问题，每次给出一个 $k$，求字典序第 $k$ 小的子串左右端点。\n\n---\n\n如果你不知道什么是字典序，看这里：\n\n对于两个数列 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个数相同且 $p_{k+1}<q_{k+1}$。\n\n特别地，若 $p$ 是 $q$ 的前缀且 $p\\ne q$，也认为 $p$ 的字典序小于 $q$。\n\n例如：\n- $[1,2]<[3,2]$（当 $k=0$）\n- $[3,1,100]<[3,2,1]$（当 $k=1$）\n- $[3,4]<[3,4,6]$（$p$ 是 $q$ 前缀）", "inputFormat": "输入的第一行有两个正整数 $n,q$ 表示序列长度和询问个数。\n\n第二行有 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$，表示这个数列。\n\n之后有 $q$ 行，每行有一个正整数 $k$，表示要求的子串的排名。", "outputFormat": "对于每个问题，输出一行两个整数 $l,r$，表示字典序第 $k$ 小的子串是 $a_{l\\sim r}$。", "hint": "**【样例解释 #1】**\n\n数列 $3,1,2$ 共有 $6$ 个子串，从小到大排序的结果为：$[1],[1,2],[2],[3],[3,1],[3,1,2]$。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|$q\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 3$|$200$|$200$||\n|$4\\sim 7$|$1000$|$3\\times 10^5$||\n|$8\\sim 9$|$3000$|$3\\times 10^5$||\n|$10\\sim 13$|$3\\times 10^5$|$10$||\n|$14\\sim 15$|$3\\times 10^5$|$3\\times 10^5$|$a_i=i$|\n|$16\\sim 20$|$3\\times 10^5$|$3\\times 10^5$||\n\n对于全体数据，保证 $1\\le n,q\\le 3\\times 10^5$，$1\\le k\\le \\dfrac{n(n+1)}{2}$，$a_i$ 中 $1\\sim n$ 各有一个，输入皆为整数。", "locale": "zh-CN"}}}
{"pid": "P10996", "type": "P", "difficulty": 3, "samples": [["7 11\n1 2 3\n2 3 4\n1 3 4\n1 2 4\n3 4 5\n4 5 6\n3 5 6\n3 4 6\n1 2 7\n2 3 7\n1 3 7\n", "3\n"], ["9 30\n1 2 3\n1 2 5\n1 2 6\n1 3 4\n1 3 5\n1 3 6\n1 3 7\n1 3 8\n1 3 9\n1 4 5\n1 4 6\n1 4 9\n1 7 9\n2 3 4\n2 3 5\n2 3 6\n2 3 7\n2 3 8\n2 3 9\n2 4 9\n2 5 8\n2 6 7\n2 7 9\n3 4 5\n3 4 8\n3 4 9\n3 5 9\n3 7 8\n3 7 9\n3 8 9\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["枚举", "梦熊比赛"], "title": "【MX-J3-T3】 Tuple", "background": "原题链接：<https://oier.team/problems/J3D>。", "description": "你有 $m$ 个三元组 $(u_i,v_i,w_i)$，保证 $1\\le u_i<v_i<w_i\\le n$ 且三元组两两不同。有多少组 $(a,b,c,d)$ 满足 $1\\le a<b<c<d\\le n$，且在这 $m$ 个三元组当中，存在四个三元组 $(a,b,c),\\allowbreak (a,b,d),\\allowbreak (a,c,d),\\allowbreak (b,c,d)$？", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示三元组数字范围和三元组个数。\n\n之后 $m$ 行，每行一组 $u_i,v_i,w_i$ 表示一个三元组。", "outputFormat": "输出一行一个自然数表示答案。", "hint": "**【样例解释 #1】**\n\n有 $(1,2,3,4),(3,4,5,6),(1,2,3,7)$ 符合题意。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|$m\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1,2$|$20$|$100$||\n|$3\\sim 5$|$80$|$10^3$||\n|$6\\sim 8$|$2000$|$10^4$||\n|$9\\sim 12$|$300$|$5\\times 10^4$|三元组随机均匀生成|\n|$13\\sim 17$|$300$|$5\\times 10^4$||\n|$18$|$2000$|$5\\times 10^4$|$u_i=1$|\n|$19\\sim 25$|$2000$|$5\\times 10^4$||\n\n对于全体数据，保证 $4\\le n\\le 2000$，$4\\le m\\le 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J3-T3】 Tuple", "background": "原题链接：<https://oier.team/problems/J3D>。", "description": "你有 $m$ 个三元组 $(u_i,v_i,w_i)$，保证 $1\\le u_i<v_i<w_i\\le n$ 且三元组两两不同。有多少组 $(a,b,c,d)$ 满足 $1\\le a<b<c<d\\le n$，且在这 $m$ 个三元组当中，存在四个三元组 $(a,b,c),\\allowbreak (a,b,d),\\allowbreak (a,c,d),\\allowbreak (b,c,d)$？", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示三元组数字范围和三元组个数。\n\n之后 $m$ 行，每行一组 $u_i,v_i,w_i$ 表示一个三元组。", "outputFormat": "输出一行一个自然数表示答案。", "hint": "**【样例解释 #1】**\n\n有 $(1,2,3,4),(3,4,5,6),(1,2,3,7)$ 符合题意。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|$m\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1,2$|$20$|$100$||\n|$3\\sim 5$|$80$|$10^3$||\n|$6\\sim 8$|$2000$|$10^4$||\n|$9\\sim 12$|$300$|$5\\times 10^4$|三元组随机均匀生成|\n|$13\\sim 17$|$300$|$5\\times 10^4$||\n|$18$|$2000$|$5\\times 10^4$|$u_i=1$|\n|$19\\sim 25$|$2000$|$5\\times 10^4$||\n\n对于全体数据，保证 $4\\le n\\le 2000$，$4\\le m\\le 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10997", "type": "P", "difficulty": 5, "samples": [["3 4\n8 -2 -5 7\n-4 6 -1 -3\n5 1 4 3\n", "87\n"], ["10 10\n-607544439 -979004727 -312554064 -699869702 666983975 -320873934 -942207367 -178682386 275703899 -502153774\n410971617 -76369893 -359278237 275932972 -86448038 714539457 -54215653 -250390633 -543539625 929531007\n718862112 -158262990 482471050 -836696543 791951750 239968249 -766605973 -759094194 -19007257 907151693\n-348361375 170949857 -285590070 402599195 469840858 288238039 410877678 179198841 60474475 813298551\n-49654250 -340449178 -818518909 981342312 -472457171 144738808 -78496024 119951006 719889194 589539617\n-343916789 -102845130 647967162 178223670 -520096558 -701610878 769986590 -306817394 776077393 891533714\n-652884066 743855180 513738054 837511580 -206701878 751808326 -442751338 507912998 -51199158 -548890634\n-19583239 -517604006 -564570564 -853892671 738975088 851320757 -595055422 852889648 213674342 -548020267\n779798717 -323958612 577597457 -318242425 57184511 189209789 347708858 891010501 322410555 -669564400\n623568486 123756685 -925342948 -864544839 -83746874 680094424 335536285 -977426931 -724040964 -337707402\n", "26663074561\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "梦熊比赛"], "title": "【MX-J3-T4】 Partition", "background": "原题链接：<https://oier.team/problems/J3E>。", "description": "你有 $n$ 行 $m$ 列的一个矩阵，第 $i$ 行第 $j$ 列的格子（记作 $(i,j)$）上写有一个整数 $a_{i,j}$。\n\n- 称 $(a,b)$ 在 $(c,d)$ 的**下方**，当且仅当 $b=d,a>c$，即**同一列中，行编号更大**。\n- 称 $(a,b)$ 在 $(c,d)$ 的**上方**，当且仅当 $(c,d)$ 在 $(a,b)$ 的**下方**。\n- 称 $(a,b)$ 在 $(c,d)$ 的**右边**，当且仅当 $a=c,b>d$，即**同一行中，列编号更大**。\n- 称 $(a,b)$ 在 $(c,d)$ 的**左边**，当且仅当 $(c,d)$ 在 $(a,b)$ 的**右边**。\n\n如图，$A(2,2)$ 下方有 $D(3,2),E(4,2)$，右边有 $B(2,3),C(2,4)​$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/183z78z1.png)\n\n为了让矩阵更加美观，你想要给每个格子涂上红、橙、黄、绿四种颜色之一，有很多种方案，但是如果一个方案满足如下要求，就称这个方案是**简单**的：\n\n- 红色格子的**上方**只能是红色格子，**左边**只能是红色或黄色格子，**右边**只能是红色或橙色格子。\n- 橙色格子的**右边**只能是橙色格子，**上方**只能是橙色或红色格子，**下方**只能是橙色或绿色格子。\n- 绿色格子的**下方**只能是绿色格子，**右边**只能是绿色或橙色格子，**左边**只能是绿色或黄色格子。\n- 黄色格子的**左边**只能是黄色格子，**下方**只能是黄色或绿色格子，**上方**只能是黄色或红色格子。\n\n\n\n上图中展示了一些可能的染色方案，其中：\n\n- 第一幅图是简单的。\n- 第二幅图也是简单的。注意如果一种颜色的格子不存在，那么可以直接忽略对应要求。\n- 第三幅图不是简单的，因为 $F(3,2)$ 绿色格子下方有 $G(4,2)$ 是黄色，不符合第四条要求。\n\n若 $(i,j)$ 的颜色为红、橙、黄、绿，则这个格子的权值 $w_{i,j}$ 分别为 $1,2,3,4$。计算所有简单的方案中，$\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_{i,j} w_{i,j}$ 的最大值。", "inputFormat": "输入的第一行是两个正整数 $n,m$，表示矩阵的行数和列数。\n\n之后有 $n$ 行，每行 $m$ 个整数。第 $i$ 行第 $j$ 个整数表示 $a_{i,j}$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zzc58sfc.png)\n\n染色方案如上图所示。\n\n**【数据范围】**\n\n|测试点编号|$n,m\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 3$|$4$||\n|$4\\sim 6$|$10$||\n|$7\\sim 11$|$500$||\n|$12$|$2000$|$a_{i,j}\\ge 0$|\n|$13\\sim 14$ |$1400$|$\\vert a_{i,j}\\vert \\le 250$|\n|$15\\sim 20$|$2000$||\n\n对于全体数据，保证 $1\\le n,m\\le 2000$，$|a_{i,j}|\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J3-T4】 Partition", "background": "原题链接：<https://oier.team/problems/J3E>。", "description": "你有 $n$ 行 $m$ 列的一个矩阵，第 $i$ 行第 $j$ 列的格子（记作 $(i,j)$）上写有一个整数 $a_{i,j}$。\n\n- 称 $(a,b)$ 在 $(c,d)$ 的**下方**，当且仅当 $b=d,a>c$，即**同一列中，行编号更大**。\n- 称 $(a,b)$ 在 $(c,d)$ 的**上方**，当且仅当 $(c,d)$ 在 $(a,b)$ 的**下方**。\n- 称 $(a,b)$ 在 $(c,d)$ 的**右边**，当且仅当 $a=c,b>d$，即**同一行中，列编号更大**。\n- 称 $(a,b)$ 在 $(c,d)$ 的**左边**，当且仅当 $(c,d)$ 在 $(a,b)$ 的**右边**。\n\n如图，$A(2,2)$ 下方有 $D(3,2),E(4,2)$，右边有 $B(2,3),C(2,4)​$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/183z78z1.png)\n\n为了让矩阵更加美观，你想要给每个格子涂上红、橙、黄、绿四种颜色之一，有很多种方案，但是如果一个方案满足如下要求，就称这个方案是**简单**的：\n\n- 红色格子的**上方**只能是红色格子，**左边**只能是红色或黄色格子，**右边**只能是红色或橙色格子。\n- 橙色格子的**右边**只能是橙色格子，**上方**只能是橙色或红色格子，**下方**只能是橙色或绿色格子。\n- 绿色格子的**下方**只能是绿色格子，**右边**只能是绿色或橙色格子，**左边**只能是绿色或黄色格子。\n- 黄色格子的**左边**只能是黄色格子，**下方**只能是黄色或绿色格子，**上方**只能是黄色或红色格子。\n\n\n\n上图中展示了一些可能的染色方案，其中：\n\n- 第一幅图是简单的。\n- 第二幅图也是简单的。注意如果一种颜色的格子不存在，那么可以直接忽略对应要求。\n- 第三幅图不是简单的，因为 $F(3,2)$ 绿色格子下方有 $G(4,2)$ 是黄色，不符合第四条要求。\n\n若 $(i,j)$ 的颜色为红、橙、黄、绿，则这个格子的权值 $w_{i,j}$ 分别为 $1,2,3,4$。计算所有简单的方案中，$\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_{i,j} w_{i,j}$ 的最大值。", "inputFormat": "输入的第一行是两个正整数 $n,m$，表示矩阵的行数和列数。\n\n之后有 $n$ 行，每行 $m$ 个整数。第 $i$ 行第 $j$ 个整数表示 $a_{i,j}$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zzc58sfc.png)\n\n染色方案如上图所示。\n\n**【数据范围】**\n\n|测试点编号|$n,m\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 3$|$4$||\n|$4\\sim 6$|$10$||\n|$7\\sim 11$|$500$||\n|$12$|$2000$|$a_{i,j}\\ge 0$|\n|$13\\sim 14$ |$1400$|$\\vert a_{i,j}\\vert \\le 250$|\n|$15\\sim 20$|$2000$||\n\n对于全体数据，保证 $1\\le n,m\\le 2000$，$|a_{i,j}|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10998", "type": "P", "difficulty": 5, "samples": [["7 11\n1 2 3\n2 3 4\n1 3 4\n1 2 4\n3 4 5\n4 5 6\n3 5 6\n3 4 6\n1 2 7\n2 3 7\n1 3 7\n", "3\n"], ["9 30\n1 2 3\n1 2 5\n1 2 6\n1 3 4\n1 3 5\n1 3 6\n1 3 7\n1 3 8\n1 3 9\n1 4 5\n1 4 6\n1 4 9\n1 7 9\n2 3 4\n2 3 5\n2 3 6\n2 3 7\n2 3 8\n2 3 9\n2 4 9\n2 5 8\n2 6 7\n2 7 9\n3 4 5\n3 4 8\n3 4 9\n3 5 9\n3 7 8\n3 7 9\n3 8 9\n", "7\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["暴力数据结构", "枚举", "根号分治", "梦熊比赛"], "title": "【MX-J3-T3+】Tuple+", "background": "原题链接：<https://oier.team/problems/J3F>。", "description": "你有 $m$ 个三元组 $(u_i,v_i,w_i)$，保证 $1\\le u_i<v_i<w_i\\le n$ 且三元组两两不同。有多少组 $(a,b,c,d)$ 满足 $1\\le a<b<c<d\\le n$，且在这 $m$ 个三元组当中，存在四个三元组 $(a,b,c),\\allowbreak (a,b,d),\\allowbreak (a,c,d),\\allowbreak (b,c,d)$？", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示三元组数字范围和三元组个数。\n\n之后 $m$ 行，每行一组 $u_i,v_i,w_i$ 表示一个三元组。", "outputFormat": "输出一行一个自然数表示答案。", "hint": "**【样例解释 #1】**\n\n有 $(1,2,3,4),(3,4,5,6),(1,2,3,7)$ 符合题意。\n\n**【数据范围】**\n\n保证 $4\\le n \\le 3\\times 10^5$，$4\\le m\\le 3\\times 10^5$。\n\n本题没有部分分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J3-T3+】Tuple+", "background": "原题链接：<https://oier.team/problems/J3F>。", "description": "你有 $m$ 个三元组 $(u_i,v_i,w_i)$，保证 $1\\le u_i<v_i<w_i\\le n$ 且三元组两两不同。有多少组 $(a,b,c,d)$ 满足 $1\\le a<b<c<d\\le n$，且在这 $m$ 个三元组当中，存在四个三元组 $(a,b,c),\\allowbreak (a,b,d),\\allowbreak (a,c,d),\\allowbreak (b,c,d)$？", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示三元组数字范围和三元组个数。\n\n之后 $m$ 行，每行一组 $u_i,v_i,w_i$ 表示一个三元组。", "outputFormat": "输出一行一个自然数表示答案。", "hint": "**【样例解释 #1】**\n\n有 $(1,2,3,4),(3,4,5,6),(1,2,3,7)$ 符合题意。\n\n**【数据范围】**\n\n保证 $4\\le n \\le 3\\times 10^5$，$4\\le m\\le 3\\times 10^5$。\n\n本题没有部分分。", "locale": "zh-CN"}}}
{"pid": "P10999", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["模拟", "2024", "进制", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 穿越时空之门", "background": "", "description": "随着 $2024$ 年的钟声回荡，传说中的时空之门再次敞开。这扇门是一条神秘\n的通道，它连接着二进制和四进制两个不同的数码领域，等待着勇者们的探索。\n在二进制的领域里，勇者的力量被转换成了力量数值的二进制表示中各数\n位之和。\n\n在四进制的领域里，力量的转换规则相似，变成了力量数值的四进制表示中各数位之和。\n\n穿越这扇时空之门的条件是严苛的：当且仅当勇者在二进制领域的力量等同于四进制领域的力量时，他才能够成功地穿越。\n\n国王选定了小蓝作为领路人，带领着力量值从 $1$ 到 $2024$ 的勇者们踏上了这段探索未知的旅程。作为小蓝的助手，你的任务是帮助小蓝计算出，在这 $2024$ 位勇者中，有多少人符合穿越时空之门的条件。\n", "inputFormat": "", "outputFormat": "一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 穿越时空之门", "background": "", "description": "随着 $2024$ 年的钟声回荡，传说中的时空之门再次敞开。这扇门是一条神秘\n的通道，它连接着二进制和四进制两个不同的数码领域，等待着勇者们的探索。\n在二进制的领域里，勇者的力量被转换成了力量数值的二进制表示中各数\n位之和。\n\n在四进制的领域里，力量的转换规则相似，变成了力量数值的四进制表示中各数位之和。\n\n穿越这扇时空之门的条件是严苛的：当且仅当勇者在二进制领域的力量等同于四进制领域的力量时，他才能够成功地穿越。\n\n国王选定了小蓝作为领路人，带领着力量值从 $1$ 到 $2024$ 的勇者们踏上了这段探索未知的旅程。作为小蓝的助手，你的任务是帮助小蓝计算出，在这 $2024$ 位勇者中，有多少人符合穿越时空之门的条件。\n", "inputFormat": "", "outputFormat": "一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P11000", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2024", "容斥原理", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 数字串个数", "background": "", "description": "小蓝想要构造出一个长度为 $10000$ 的数字字符串，有以下要求：\n\n1. 小蓝不喜欢数字 $0$，所以数字字符串中不可以出现 $0$；\n\n1. 小蓝喜欢数字 $3$ 和 $7$，所以数字字符串中必须要有 $3$ 和 $7$ 这两个数字。\n\n请问满足题意的数字字符串有多少个？这个数字会很大，你只需要输出其\n对 $10^9 + 7$ 取余后的结果。\n", "inputFormat": "", "outputFormat": "一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 数字串个数", "background": "", "description": "小蓝想要构造出一个长度为 $10000$ 的数字字符串，有以下要求：\n\n1. 小蓝不喜欢数字 $0$，所以数字字符串中不可以出现 $0$；\n\n1. 小蓝喜欢数字 $3$ 和 $7$，所以数字字符串中必须要有 $3$ 和 $7$ 这两个数字。\n\n请问满足题意的数字字符串有多少个？这个数字会很大，你只需要输出其\n对 $10^9 + 7$ 取余后的结果。\n", "inputFormat": "", "outputFormat": "一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P11001", "type": "P", "difficulty": 2, "samples": [["3 2 \n1 2 \n2 3 \n3 2\n", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 连连看", "background": "", "description": "小蓝正在和朋友们玩一种新的连连看游戏。在一个 $n \\times m$ 的矩形网格中，每个格子中都有一个整数，第 $i$ 行第 $j$ 列上的整数为 $A_{i,j}$。玩家需要在这个网格中寻找一对格子 $(a,b)$ 和 $(c,d)$ 使得这两个格子中的整数 $A_{a,b}$ 和 $A_{c,d}$ 相等，且它们的位置满足 $|a-c| = |b-d| > 0$。请问在这个 $n \\times m$ 的矩形网格中有多少对这样的格子满足条件。\n", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$，用一个空格分隔。\n\n接下来是 $n$ 行，第 $i$ 行包含 $m$ 个正整数 $A_{i,1}, A_{i,2}, \\dots, A_{i,m}$，相邻整数之间用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "一共有以下 6 对格子：$(1,2)−(2,1)$，$(2,2)−(3,1)$，$(2,1)−(3,2)$，$(2,1)−(1,2)$，$(3,1)−(2,2)$，$(3,2)−(2,1)$。\n\n### 数据范围\n\n对于 $20\\%$ 的评测用例，$1 \\leq n, m \\leq 50$；\n\n对于所有评测用例，$1 \\leq n, m \\leq 1000$，$1 \\leq A_{i,j} \\leq 1000$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 连连看", "background": "", "description": "小蓝正在和朋友们玩一种新的连连看游戏。在一个 $n \\times m$ 的矩形网格中，每个格子中都有一个整数，第 $i$ 行第 $j$ 列上的整数为 $A_{i,j}$。玩家需要在这个网格中寻找一对格子 $(a,b)$ 和 $(c,d)$ 使得这两个格子中的整数 $A_{a,b}$ 和 $A_{c,d}$ 相等，且它们的位置满足 $|a-c| = |b-d| > 0$。请问在这个 $n \\times m$ 的矩形网格中有多少对这样的格子满足条件。\n", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$，用一个空格分隔。\n\n接下来是 $n$ 行，第 $i$ 行包含 $m$ 个正整数 $A_{i,1}, A_{i,2}, \\dots, A_{i,m}$，相邻整数之间用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "一共有以下 6 对格子：$(1,2)−(2,1)$，$(2,2)−(3,1)$，$(2,1)−(3,2)$，$(2,1)−(1,2)$，$(3,1)−(2,2)$，$(3,2)−(2,1)$。\n\n### 数据范围\n\n对于 $20\\%$ 的评测用例，$1 \\leq n, m \\leq 50$；\n\n对于所有评测用例，$1 \\leq n, m \\leq 1000$，$1 \\leq A_{i,j} \\leq 1000$。\n", "locale": "zh-CN"}}}
{"pid": "P11002", "type": "P", "difficulty": 2, "samples": [["2\n2016-09-07 18:24:33 10\n2037-01-05 01:40:43 30\n", "2016-09-07 18:20:00\n2037-01-05 01:30:00\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 神奇闹钟", "background": "", "description": "小蓝发现了一个神奇的闹钟，从纪元时间（$1970$ 年 $1$ 月 $1$ 日 $00:00:00$）开始，每经过 $x$ 分钟，这个闹钟便会触发一次闹铃（纪元时间也会响铃）。这引起了小蓝的兴趣，他想要好好研究下这个闹钟。\n\n对于给出的任意一个格式为 `yyyy-MM-dd HH:mm:ss` 的时间，小蓝想要知道在这个时间点之前（包含这个时间点）的最近的一次闹铃时间是哪个时间？\n\n注意，你不必考虑时区问题。\n", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每组数据一行，包含一个时间（格式为 `yyyy-MM-dd HH:mm:ss`）和一\n个整数 $x$，其中 $x$ 表示闹铃时间间隔（单位为分钟）。", "outputFormat": "输出 $T$ 行，每行包含一个时间（格式为 `yyyy-MM-dd HH:mm:ss`），依\n次表示每组数据的答案。", "hint": "对于所有评测用例，$1 \\le T \\le 10，1 \\le x \\le 1000$，保证所有的时间格式都是合法的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 神奇闹钟", "background": "", "description": "小蓝发现了一个神奇的闹钟，从纪元时间（$1970$ 年 $1$ 月 $1$ 日 $00:00:00$）开始，每经过 $x$ 分钟，这个闹钟便会触发一次闹铃（纪元时间也会响铃）。这引起了小蓝的兴趣，他想要好好研究下这个闹钟。\n\n对于给出的任意一个格式为 `yyyy-MM-dd HH:mm:ss` 的时间，小蓝想要知道在这个时间点之前（包含这个时间点）的最近的一次闹铃时间是哪个时间？\n\n注意，你不必考虑时区问题。\n", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每组数据一行，包含一个时间（格式为 `yyyy-MM-dd HH:mm:ss`）和一\n个整数 $x$，其中 $x$ 表示闹铃时间间隔（单位为分钟）。", "outputFormat": "输出 $T$ 行，每行包含一个时间（格式为 `yyyy-MM-dd HH:mm:ss`），依\n次表示每组数据的答案。", "hint": "对于所有评测用例，$1 \\le T \\le 10，1 \\le x \\le 1000$，保证所有的时间格式都是合法的。", "locale": "zh-CN"}}}
{"pid": "P11003", "type": "P", "difficulty": 2, "samples": [["2\n3\n3\n", "6\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 蓝桥村的真相", "background": "", "description": "在风景如画的蓝桥村，$n$ 名村民围坐在一张古老的圆桌旁，参与一场思想\n的较量。这些村民，每一位都有着鲜明的身份：要么是誉满乡野的诚实者，要么是无可救药的说谎者。\n\n当会议的钟声敲响，一场关于真理与谬误的辩论随之展开。每位村民轮流发言，编号为 $i$ 的村民提出了这样的断言：坐在他之后的两位村民——也就是\n编号 $i + 1$ 和 $i + 2$（注意，编号是环形的，所以如果 $i$ 是最后一个，则 $i + 1$ 是\n第一个，以此类推）之中，一个说的是真话，而另一个说的是假话。\n\n在所有摇曳不定的陈述中，有多少真言隐藏在谎言的面纱之后？\n\n请你探索每一种可能的真假排列组合，并计算在所有可能的真假组合中，\n说谎者的总数。\n", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每个数据一行包含一个整数 $n$，表示村落的人数。", "outputFormat": "输出 $T$ 行，每行包含一个整数，依次表示每组数据的答案。\n", "hint": "对于 $10\\%$ 的评测用例，$T = 1，3 \\le n \\le 10$。\n\n对于 $40\\%$ 的评测用例，$1 \\le T \\le 10^2，3 \\le n \\le 3 \\times10^3$。\n\n对于所有评测用例，$1 \\le T \\le 10^5，3 \\le n \\le 10^{18}$。\n\n#### 样例解释\n在样例中，可能的组合有「假，假，假」「真，真，假」「真，假，真」「假，\n真，真」，说谎者的总数为 $3 + 1 + 1 + 1 = 6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 蓝桥村的真相", "background": "", "description": "在风景如画的蓝桥村，$n$ 名村民围坐在一张古老的圆桌旁，参与一场思想\n的较量。这些村民，每一位都有着鲜明的身份：要么是誉满乡野的诚实者，要么是无可救药的说谎者。\n\n当会议的钟声敲响，一场关于真理与谬误的辩论随之展开。每位村民轮流发言，编号为 $i$ 的村民提出了这样的断言：坐在他之后的两位村民——也就是\n编号 $i + 1$ 和 $i + 2$（注意，编号是环形的，所以如果 $i$ 是最后一个，则 $i + 1$ 是\n第一个，以此类推）之中，一个说的是真话，而另一个说的是假话。\n\n在所有摇曳不定的陈述中，有多少真言隐藏在谎言的面纱之后？\n\n请你探索每一种可能的真假排列组合，并计算在所有可能的真假组合中，\n说谎者的总数。\n", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每个数据一行包含一个整数 $n$，表示村落的人数。", "outputFormat": "输出 $T$ 行，每行包含一个整数，依次表示每组数据的答案。\n", "hint": "对于 $10\\%$ 的评测用例，$T = 1，3 \\le n \\le 10$。\n\n对于 $40\\%$ 的评测用例，$1 \\le T \\le 10^2，3 \\le n \\le 3 \\times10^3$。\n\n对于所有评测用例，$1 \\le T \\le 10^5，3 \\le n \\le 10^{18}$。\n\n#### 样例解释\n在样例中，可能的组合有「假，假，假」「真，真，假」「真，假，真」「假，\n真，真」，说谎者的总数为 $3 + 1 + 1 + 1 = 6$。", "locale": "zh-CN"}}}
{"pid": "P11004", "type": "P", "difficulty": 2, "samples": [["5\n126 393 581 42 44\n204 990 240 46 52\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 魔法巡游", "background": "本题题意存在很大歧义。以下为洛谷与蓝桥杯官网数据对比：\n- 洛谷：仅要求存在数字 $0,2,4$ 即可共鸣；\n- 蓝桥杯官网：需要两个数字存在一对的 $0,2,4$ 才能共鸣；\n\n由于题面存在歧义，本题数据仅供参考。", "description": "在蓝桥王国中，两位魔法使者，小蓝与小桥，肩负着维护时空秩序的使命。他们每人分别持有 $N$ 个符文石，这些石头被赋予了强大的力量，每一块上都刻\n有一个介于 $1$ 到 $10^9$ 之间的数字符号。小蓝的符文石集合标记为 $s_1, s_2, \\cdots , s_N$，小桥的则为 $t_1, t_2, \\cdots , t_N$。\n\n两位魔法使者的任务是通过使用符文石，在各个时空结点间巡游。每次巡游遵循这样一条法则：当小蓝使用了符文石 $s_i$ 到达新的结点后，小桥必须选用一个序号更大的符文石（即某个 $t_j$ 满足 $j > i$）前往下一个结点。同理，小桥抵达之后，小蓝需要选择一个序号 $k > j$ 的符文石 $s_k$ 继续他们的巡游。\n\n为了成功地穿梭时空，两个连续使用的符文石上的数字符号必须有共鸣，这种共鸣只有当数字符号中至少包含一个特定的元素——星火（数字 $0$）、水波（数字 $2$）或者风语（数字 $4$）时，才会发生。例如，符号序列 $126, 552, 24, 4$ 中的每对连续符文都包含了至少一个共鸣元素，则它们是一系列成功的巡游；而如果是 $15, 51, 5$，则不成立，因为它们之间的共鸣元素不包含星火、水波或风语\n中的任意一个。\n\n小蓝总是先启程，使用他的符文石开启巡游。\n\n你的任务是计算这对魔法使者能够执行的最长时空巡游序列的长度。这样\n的序列形式为 $s_{i_1}, t_{i_2}, s_{i_3}, t_{i_4}, \\cdots$，其中序列索引满足 $i_1 < i_2 < i_3 < i_4 < \\cdots$，并且序列中每一对相邻的符文石都至少包含一个共鸣元素。\n", "inputFormat": "输入的第一行包含一个整数 $N$，表示每位魔法使者持有的符文石数量。\n\n第二行包含 $N$ 个整数 $s_1, s_2, \\cdots , s_N$，相邻整数之间使用一个空格分隔，表示小蓝的符文石上刻有的数字符号。\n\n第三行包含 $N$ 个整数 $t_1, t_2, \\cdots , t_N$ ，相邻整数之间使用一个空格分隔，表示小桥的符文石上刻有的数字符号。\n\n", "outputFormat": "输出一行包含一个整数，表示小蓝和小桥在遵守所有规则的情况下，最多能进行多少次时空巡游。\n", "hint": "对于 $30\\%$ 的评测用例，$1 \\le N \\le 10^3,1 \\le s_i\n, t_i \\le 10^5$。\n\n对于所有评测用例，$1 \\le N \\le 10^5,1 ≤ s_i\n, t_i \\le 10^9$。\n#### 样例解释\n这里，数字 $2$ 作为共鸣元素连接了 $s_1$ 和 $t_3$、$s_4$ 和 $t_5$，数字 $2$、$4$ 作为共鸣元素\n连接了 $t_3$ 和 $s_4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 魔法巡游", "background": "本题题意存在很大歧义。以下为洛谷与蓝桥杯官网数据对比：\n- 洛谷：仅要求存在数字 $0,2,4$ 即可共鸣；\n- 蓝桥杯官网：需要两个数字存在一对的 $0,2,4$ 才能共鸣；\n\n由于题面存在歧义，本题数据仅供参考。", "description": "在蓝桥王国中，两位魔法使者，小蓝与小桥，肩负着维护时空秩序的使命。他们每人分别持有 $N$ 个符文石，这些石头被赋予了强大的力量，每一块上都刻\n有一个介于 $1$ 到 $10^9$ 之间的数字符号。小蓝的符文石集合标记为 $s_1, s_2, \\cdots , s_N$，小桥的则为 $t_1, t_2, \\cdots , t_N$。\n\n两位魔法使者的任务是通过使用符文石，在各个时空结点间巡游。每次巡游遵循这样一条法则：当小蓝使用了符文石 $s_i$ 到达新的结点后，小桥必须选用一个序号更大的符文石（即某个 $t_j$ 满足 $j > i$）前往下一个结点。同理，小桥抵达之后，小蓝需要选择一个序号 $k > j$ 的符文石 $s_k$ 继续他们的巡游。\n\n为了成功地穿梭时空，两个连续使用的符文石上的数字符号必须有共鸣，这种共鸣只有当数字符号中至少包含一个特定的元素——星火（数字 $0$）、水波（数字 $2$）或者风语（数字 $4$）时，才会发生。例如，符号序列 $126, 552, 24, 4$ 中的每对连续符文都包含了至少一个共鸣元素，则它们是一系列成功的巡游；而如果是 $15, 51, 5$，则不成立，因为它们之间的共鸣元素不包含星火、水波或风语\n中的任意一个。\n\n小蓝总是先启程，使用他的符文石开启巡游。\n\n你的任务是计算这对魔法使者能够执行的最长时空巡游序列的长度。这样\n的序列形式为 $s_{i_1}, t_{i_2}, s_{i_3}, t_{i_4}, \\cdots$，其中序列索引满足 $i_1 < i_2 < i_3 < i_4 < \\cdots$，并且序列中每一对相邻的符文石都至少包含一个共鸣元素。\n", "inputFormat": "输入的第一行包含一个整数 $N$，表示每位魔法使者持有的符文石数量。\n\n第二行包含 $N$ 个整数 $s_1, s_2, \\cdots , s_N$，相邻整数之间使用一个空格分隔，表示小蓝的符文石上刻有的数字符号。\n\n第三行包含 $N$ 个整数 $t_1, t_2, \\cdots , t_N$ ，相邻整数之间使用一个空格分隔，表示小桥的符文石上刻有的数字符号。\n\n", "outputFormat": "输出一行包含一个整数，表示小蓝和小桥在遵守所有规则的情况下，最多能进行多少次时空巡游。\n", "hint": "对于 $30\\%$ 的评测用例，$1 \\le N \\le 10^3,1 \\le s_i\n, t_i \\le 10^5$。\n\n对于所有评测用例，$1 \\le N \\le 10^5,1 ≤ s_i\n, t_i \\le 10^9$。\n#### 样例解释\n这里，数字 $2$ 作为共鸣元素连接了 $s_1$ 和 $t_3$、$s_4$ 和 $t_5$，数字 $2$、$4$ 作为共鸣元素\n连接了 $t_3$ 和 $s_4$。", "locale": "zh-CN"}}}
{"pid": "P11005", "type": "P", "difficulty": 3, "samples": [["5 5 1 2\n1 2 2\n1 3 5\n1 4 1\n2 4 5\n2 5 4\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 缴纳过路费", "background": "", "description": "在繁华的商业王国中，$N$ 座城市被 $M$ 条商路巧妙地连接在一起，形成了一个错综复杂的无向图网络。每条商路是双向通行的，并且任意两座城市之间最多只有一条直接的商路。每条商路都有它的规则，其中最引人注目的就是穿过\n商路，需要缴纳过路费。因此，商人们在选择商路时必须格外认真。\n\n有一位名叫小蓝的商人，他对于商路的花费有着自己独到的见解。在小蓝眼中，一条路线包含一条或多条商路，但路线的成本并不是沿途累积的过路费总和，而是这条路线上最贵的那一次收费。这个标准简单而直接，让他能迅速评估出一条路线是否划算。\n\n于是，他设立了一个目标，即找出所有城市对，这些城市之间的最低路线成本介于他心中预设的两个数 $L$ 和 $R$ 之间。他相信，这样的路线既不会太廉价，以至于路况糟糕；也不会过于昂贵，伤害他精打细算的荷包。\n\n作为小蓝的助手，请你帮助小蓝统计出所有满足条件的城市对数量。\n", "inputFormat": "输入的第一行包含四个整数 $N, M, L, R$，表示有 $N$ 座城市和 $M$ 条双向通行的商路，以及小蓝心中预设的最高过路费的下限 $L$ 和上限 $R$。\n\n接下来 $M$ 行，每行包含三个整数 $u, v,w$，表示城市 $u$ 和城市 $v$ 之间有一条双向通行的商路，过路费为 $w$。保证每对城市之间最多只有一条直接的商路。", "outputFormat": "输出一行包含一个整数，表示满足条件的城市对数量。\n", "hint": "对于 30% 的评测用例，$1 \\le N \\le 10^3,1 \\le M \\le \\min(2 \\times 10^3,\\frac{N×(N−1)}{2}),\n1 \\le L \\le R \\le 10^5，1 \\le u, v \\le N, u \\ne v,1 \\le w \\le 10^5$。\n\n对于所有评测用例，$1 \\le N \\le 10^5,1 \\le M \\le \\min(2 \\times 10^5,\\frac{N×(N−1)}{2}),1 \\le L \\le\nR \\le 10^9,1 \\le u, v \\le N, u \\ne v，1 \\le w \\le 10^9$。\n#### 样例解释\n在样例中，满足条件的城市对有 $(1, 2),(1, 4),(2, 4)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 缴纳过路费", "background": "", "description": "在繁华的商业王国中，$N$ 座城市被 $M$ 条商路巧妙地连接在一起，形成了一个错综复杂的无向图网络。每条商路是双向通行的，并且任意两座城市之间最多只有一条直接的商路。每条商路都有它的规则，其中最引人注目的就是穿过\n商路，需要缴纳过路费。因此，商人们在选择商路时必须格外认真。\n\n有一位名叫小蓝的商人，他对于商路的花费有着自己独到的见解。在小蓝眼中，一条路线包含一条或多条商路，但路线的成本并不是沿途累积的过路费总和，而是这条路线上最贵的那一次收费。这个标准简单而直接，让他能迅速评估出一条路线是否划算。\n\n于是，他设立了一个目标，即找出所有城市对，这些城市之间的最低路线成本介于他心中预设的两个数 $L$ 和 $R$ 之间。他相信，这样的路线既不会太廉价，以至于路况糟糕；也不会过于昂贵，伤害他精打细算的荷包。\n\n作为小蓝的助手，请你帮助小蓝统计出所有满足条件的城市对数量。\n", "inputFormat": "输入的第一行包含四个整数 $N, M, L, R$，表示有 $N$ 座城市和 $M$ 条双向通行的商路，以及小蓝心中预设的最高过路费的下限 $L$ 和上限 $R$。\n\n接下来 $M$ 行，每行包含三个整数 $u, v,w$，表示城市 $u$ 和城市 $v$ 之间有一条双向通行的商路，过路费为 $w$。保证每对城市之间最多只有一条直接的商路。", "outputFormat": "输出一行包含一个整数，表示满足条件的城市对数量。\n", "hint": "对于 30% 的评测用例，$1 \\le N \\le 10^3,1 \\le M \\le \\min(2 \\times 10^3,\\frac{N×(N−1)}{2}),\n1 \\le L \\le R \\le 10^5，1 \\le u, v \\le N, u \\ne v,1 \\le w \\le 10^5$。\n\n对于所有评测用例，$1 \\le N \\le 10^5,1 \\le M \\le \\min(2 \\times 10^5,\\frac{N×(N−1)}{2}),1 \\le L \\le\nR \\le 10^9,1 \\le u, v \\le N, u \\ne v，1 \\le w \\le 10^9$。\n#### 样例解释\n在样例中，满足条件的城市对有 $(1, 2),(1, 4),(2, 4)$。", "locale": "zh-CN"}}}
{"pid": "P11006", "type": "P", "difficulty": 3, "samples": [["2\n3 2\n1 3\n2 3\n3 3\n3 5\n1 3\n2 3\n3 3\n", "8\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Python B] 纯职业小组", "background": null, "description": "在蓝桥王国，国王统治着一支由 $n$ 个小队组成的强大军队。每个小队都由\n相同职业的士兵组成。具体地，第 $i$ 个小队包含了 $b_i$ 名职业为 $a_i$ 的士兵。\n\n近日，国王计划在王宫广场举行一场盛大的士兵检阅仪式，以庆祝王国的繁荣昌盛。然而，在士兵们入场的过程中，一场突如其来的风暴打乱了他们的行列，使得不同小队的士兵混杂在一起，次序乱成一团，\n\n尽管国王无法知道每个士兵的具体职业，但为了确保仪式能顺利进行，国王打算从这些混乱的士兵中选出一部分，组成 $k$ 个“纯职业小组”进行检阅。一个“纯职业小组”定义为由 $3$ 名同职业的士兵组成的队伍。\n\n请问，国王至少需要选择多少名士兵，才能确保这些士兵可以组成 $k$ 个“纯职业小组”？", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每组数据的第一行包含两个整数 $n_t$ 和 $k$ ，用一个空格分隔，表示小队的数量和要组成的纯职业小组的数量。\n\n接下来的 $n_t$ 行，每行包含两个整数 $a_i$ 和 $b_i$，用一个空格分隔，表示第 $i$ 个小队中士兵的职业和数量。", "outputFormat": "输出 $T$ 行，每行包含一个整数，依次表示每组数据的答案，即为了组成 $k$\n个“纯职业小组”，国王至少需要选择的士兵数量。如果无论如何也无法组成 $k$ 个“纯职业小组”，则输出 $-1$。", "hint": "对于 $50\\%$ 的评测用例，$1\\le T \\le 10，1 \\le\n\\sum_{t=1}^Tn_t \\le 2 \\times 10^3,1 \\le a_i\n, b_i \\le 10^5,1 \\le k \\le 10^7$。\n\n对于所有评测用例，$1\\le T \\le 100，1 \\le\n\\sum_{t=1}^Tn_t \\le 2 \\times 10^5,1 \\le a_i\n, b_i \\le 10^9,1 \\le k \\le 10^{13}$。\n\n#### 样例解释\n在第一个样例中，要想组成 $2$ 个“纯职业小组”，国王至少需要选择 $8$ 名\n士兵。若只选择了 $7$ 名士兵，则这 7 名士兵的职业可能为 $1, 1, 1, 2, 2, 3, 3$，无法组成 $2$ 个“纯职业小组”。\n\n在第二个样例中，即使选择了所有士兵，也无法组成 $5$ 个“纯职业小组”，\n因此输出 $−1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Python B] 纯职业小组", "background": null, "description": "在蓝桥王国，国王统治着一支由 $n$ 个小队组成的强大军队。每个小队都由\n相同职业的士兵组成。具体地，第 $i$ 个小队包含了 $b_i$ 名职业为 $a_i$ 的士兵。\n\n近日，国王计划在王宫广场举行一场盛大的士兵检阅仪式，以庆祝王国的繁荣昌盛。然而，在士兵们入场的过程中，一场突如其来的风暴打乱了他们的行列，使得不同小队的士兵混杂在一起，次序乱成一团，\n\n尽管国王无法知道每个士兵的具体职业，但为了确保仪式能顺利进行，国王打算从这些混乱的士兵中选出一部分，组成 $k$ 个“纯职业小组”进行检阅。一个“纯职业小组”定义为由 $3$ 名同职业的士兵组成的队伍。\n\n请问，国王至少需要选择多少名士兵，才能确保这些士兵可以组成 $k$ 个“纯职业小组”？", "inputFormat": "输入的第一行包含一个整数 $T$，表示每次输入包含 $T$ 组数据。\n\n接下来依次描述 $T$ 组数据。\n\n每组数据的第一行包含两个整数 $n_t$ 和 $k$ ，用一个空格分隔，表示小队的数量和要组成的纯职业小组的数量。\n\n接下来的 $n_t$ 行，每行包含两个整数 $a_i$ 和 $b_i$，用一个空格分隔，表示第 $i$ 个小队中士兵的职业和数量。", "outputFormat": "输出 $T$ 行，每行包含一个整数，依次表示每组数据的答案，即为了组成 $k$\n个“纯职业小组”，国王至少需要选择的士兵数量。如果无论如何也无法组成 $k$ 个“纯职业小组”，则输出 $-1$。", "hint": "对于 $50\\%$ 的评测用例，$1\\le T \\le 10，1 \\le\n\\sum_{t=1}^Tn_t \\le 2 \\times 10^3,1 \\le a_i\n, b_i \\le 10^5,1 \\le k \\le 10^7$。\n\n对于所有评测用例，$1\\le T \\le 100，1 \\le\n\\sum_{t=1}^Tn_t \\le 2 \\times 10^5,1 \\le a_i\n, b_i \\le 10^9,1 \\le k \\le 10^{13}$。\n\n#### 样例解释\n在第一个样例中，要想组成 $2$ 个“纯职业小组”，国王至少需要选择 $8$ 名\n士兵。若只选择了 $7$ 名士兵，则这 7 名士兵的职业可能为 $1, 1, 1, 2, 2, 3, 3$，无法组成 $2$ 个“纯职业小组”。\n\n在第二个样例中，即使选择了所有士兵，也无法组成 $5$ 个“纯职业小组”，\n因此输出 $−1$。", "locale": "zh-CN"}}}
{"pid": "P11007", "type": "P", "difficulty": 2, "samples": [["100 5000", "2\n50 50"], ["0 5000", "2\n50 -50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造"], "title": "『STA - R7』Odtlcsu", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/m38cxgmq.png)", "description": "给定整数 $x,y$，构造一个长度不超过 $10^6$ 的整数序列使得其和为 $x$、平方和为 $y$。保证有解。", "inputFormat": "一行两个整数 $x,y$。", "outputFormat": "第一行一个非负整数 $n$ 表示你构造的序列长度。需要满足 $n\\le 10^6$。\n\n第二行 $n$ 个整数表示你构造出的序列。如果有多解输出任意一种即可。输出的序列所有元素必须是绝对值不大于 $10^6$ 的整数。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$y\\le 10$。\n- Subtask 2 (40pts)：$x=0$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$0\\le |x|,y\\le10^6$，保证有解。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R7』Odtlcsu", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/m38cxgmq.png)", "description": "给定整数 $x,y$，构造一个长度不超过 $10^6$ 的整数序列使得其和为 $x$、平方和为 $y$。保证有解。", "inputFormat": "一行两个整数 $x,y$。", "outputFormat": "第一行一个非负整数 $n$ 表示你构造的序列长度。需要满足 $n\\le 10^6$。\n\n第二行 $n$ 个整数表示你构造出的序列。如果有多解输出任意一种即可。输出的序列所有元素必须是绝对值不大于 $10^6$ 的整数。", "hint": "**本题采用捆绑测试。**\n\n数据范围：\n- Subtask 1 (10pts)：$y\\le 10$。\n- Subtask 2 (40pts)：$x=0$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$0\\le |x|,y\\le10^6$，保证有解。", "locale": "zh-CN"}}}
{"pid": "P11008", "type": "P", "difficulty": 4, "samples": [["2\n4\n1 2 5\n6\n1 7 3 2 5\n", "2 3 1 4\n3 2 5 6 4 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "位运算", "构造"], "title": "『STA - R7』异或生成序列", "background": "", "description": "对于一个 $1 \\sim n$ 的排列 $\\{p_n\\}$，定义其异或生成序列为一个长度为 $n - 1$ 的非负整数序列 $\\{b_{n - 1}\\}$，按如下方式生成：\n\n$$b_i = p_i \\operatorname{xor} p_{i + 1}$$\n\n其中 $\\operatorname{xor}$ 代表按位异或运算。在 C++ 语言中由 `^` 运算符表示。\n\n给定 $n, \\{b_{n - 1}\\}$，你需要构造一个对应的排列 $\\{p_n\\}$。\n\n输入数据保证有解，如果存在多个解，输出任意一个即可。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行一个正整数 $T$，代表测试数据组数。\n\n对于每组测试数据，\n\n- 第一行一个正整数 $n$。\n\n- 第二行 $n - 1$ 个非负整数，代表异或生成序列 $\\{b_{n - 1}\\}$。", "outputFormat": "对于每组测试数据，输出一行 $n$ 个正整数，代表一个对应的排列 $\\{p_n\\}$。如果存在多个解，输出任意一个即可。", "hint": "**【样例解释】**\n\n对于第一组测试数据，我们有：\n\n- $b_1 = p_1 \\operatorname{xor} p_2 = 2 \\operatorname{xor} 3 = 1$\n- $b_2 = p_2 \\operatorname{xor} p_3 = 3 \\operatorname{xor} 1 = 2$\n- $b_3 = p_3 \\operatorname{xor} p_4 = 1 \\operatorname{xor} 4 = 5$\n\n因此得到的 $b$ 序列和输入中的相同，进而该排列符合要求。\n\n对于第二组测试数据，$[4,5,2,1,3,6]$ 也是一个符合要求的排列。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le n \\le 2 \\times 10^6$；\n- $1 \\le T \\le 10^6$；\n- $\\sum n \\le 2 \\times 10^6$;\n- 保证至少存在一个合法的解。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$\\sum n^2 \\le 2 \\times 10^6$|$17$|\n|2|$2 \\nmid n$|$23$|\n|3|$4 \\mid n$|$26$|\n|4|无特殊限制|$34$|\n\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R7』异或生成序列", "background": "", "description": "对于一个 $1 \\sim n$ 的排列 $\\{p_n\\}$，定义其异或生成序列为一个长度为 $n - 1$ 的非负整数序列 $\\{b_{n - 1}\\}$，按如下方式生成：\n\n$$b_i = p_i \\operatorname{xor} p_{i + 1}$$\n\n其中 $\\operatorname{xor}$ 代表按位异或运算。在 C++ 语言中由 `^` 运算符表示。\n\n给定 $n, \\{b_{n - 1}\\}$，你需要构造一个对应的排列 $\\{p_n\\}$。\n\n输入数据保证有解，如果存在多个解，输出任意一个即可。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行一个正整数 $T$，代表测试数据组数。\n\n对于每组测试数据，\n\n- 第一行一个正整数 $n$。\n\n- 第二行 $n - 1$ 个非负整数，代表异或生成序列 $\\{b_{n - 1}\\}$。", "outputFormat": "对于每组测试数据，输出一行 $n$ 个正整数，代表一个对应的排列 $\\{p_n\\}$。如果存在多个解，输出任意一个即可。", "hint": "**【样例解释】**\n\n对于第一组测试数据，我们有：\n\n- $b_1 = p_1 \\operatorname{xor} p_2 = 2 \\operatorname{xor} 3 = 1$\n- $b_2 = p_2 \\operatorname{xor} p_3 = 3 \\operatorname{xor} 1 = 2$\n- $b_3 = p_3 \\operatorname{xor} p_4 = 1 \\operatorname{xor} 4 = 5$\n\n因此得到的 $b$ 序列和输入中的相同，进而该排列符合要求。\n\n对于第二组测试数据，$[4,5,2,1,3,6]$ 也是一个符合要求的排列。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le n \\le 2 \\times 10^6$；\n- $1 \\le T \\le 10^6$；\n- $\\sum n \\le 2 \\times 10^6$;\n- 保证至少存在一个合法的解。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$\\sum n^2 \\le 2 \\times 10^6$|$17$|\n|2|$2 \\nmid n$|$23$|\n|3|$4 \\mid n$|$26$|\n|4|无特殊限制|$34$|\n\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。", "locale": "zh-CN"}}}
{"pid": "P11009", "type": "P", "difficulty": 5, "samples": [["7\n1\n10\n1000000\n10000000\n1000000000\n1000000000000\n1000000000000000000\n", "0\n16\n922782102\n752337093\n360487662\n955916859\n689020696\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化"], "title": "『STA - R7』求和", "background": "", "description": "Lloyd 有一个正整数 $t$，初始 $t=2$ 或 $t=3$。每次他可以令 $t$ 加上 $2^t$ 或者 $\\lfloor\\log_2(t-1)\\rfloor$。\n\n令 $f(x)$ 是操作得到 $t=x$ 的最小操作次数，若无法操作得到 $x$ 则 $f(x)=0$。\n\n现在给定一个正整数 $n$，你需要求 $\\sum_{i=1}^nf(i)$ 的值。答案可能很大，对 $998244353$ 取模。", "inputFormat": "**本题有多组测试。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n后 $T$ 行一行一个正整数 $n$ 描述一组询问。", "outputFormat": "$T$ 行，每行回答一个询问。答案对 $998244353$ 取模。", "hint": "数据范围：\n- Subtask 1 (10pts)：$n\\le 10^7$。\n- Subtask 2 (30pts)：$T=1$。\n- Subtask 3 (30pts)：$n\\le2^{40}$。\n- Subtask 4 (30pts)：无特殊限制。\n\n对于全部数据，$1\\le T\\le 10^4$，$1\\le n\\le2^{60}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R7』求和", "background": "", "description": "Lloyd 有一个正整数 $t$，初始 $t=2$ 或 $t=3$。每次他可以令 $t$ 加上 $2^t$ 或者 $\\lfloor\\log_2(t-1)\\rfloor$。\n\n令 $f(x)$ 是操作得到 $t=x$ 的最小操作次数，若无法操作得到 $x$ 则 $f(x)=0$。\n\n现在给定一个正整数 $n$，你需要求 $\\sum_{i=1}^nf(i)$ 的值。答案可能很大，对 $998244353$ 取模。", "inputFormat": "**本题有多组测试。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n后 $T$ 行一行一个正整数 $n$ 描述一组询问。", "outputFormat": "$T$ 行，每行回答一个询问。答案对 $998244353$ 取模。", "hint": "数据范围：\n- Subtask 1 (10pts)：$n\\le 10^7$。\n- Subtask 2 (30pts)：$T=1$。\n- Subtask 3 (30pts)：$n\\le2^{40}$。\n- Subtask 4 (30pts)：无特殊限制。\n\n对于全部数据，$1\\le T\\le 10^4$，$1\\le n\\le2^{60}$。", "locale": "zh-CN"}}}
{"pid": "P11010", "type": "P", "difficulty": 5, "samples": [["2\n4 4\n8 3\n", "Bob\nAlice"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "素数判断,质数,筛法"], "title": "『STA - R7』Divide and Merge Game", "background": "", "description": "给定两个正整数 $n, k(2 \\le k \\le n)$，Alice 和 Bob 将进行如下游戏：\n\n- Alice 需要给出一个长度为 $k$ 的**正整数**序列 $a$，满足 $\\sum\\limits_{i = 1}^{k} a_i = n$。\n\n- Bob 需要尝试给出一个不小于 $2$ 的正整数 $m$，满足可以将 Alice 给出的正整数序列 $a$ 划分为 $m$ 个**非空可重**集合，且其元素之和均相同。若 Bob 可以给出一个符合条件的正整数则 Bob 胜利，反之 Alice 胜利。\n\n在两人均采取最优策略的情况下，问谁可以获胜。你需要回答 $T$ 次询问。", "inputFormat": "**本题单个测试点内含有多组询问。**\n\n第一行一个正整数 $T$，代表询问次数。\n\n对于每组询问：一行两个正整数 $n, k$，含义见【题目描述】。", "outputFormat": "对于每组询问，输出一行 `Alice` 或 `Bob`，表示谁会获胜。", "hint": "**【样例解释】**\n\n对于第一组测试数据，Alice 只能给出正整数序列 $\\left\\{1,1,1,1\\right\\}$，那么此时 Bob 给出 $m = 4$，并将这个正整数序列划分为 $\\left\\{\\left\\{1\\right\\},\\left\\{1\\right\\},\\left\\{1\\right\\},\\left\\{1\\right\\}\\right\\}$。Bob 也可以给出 $m = 2$，并将正整数序列划分为 $\\left\\{\\left\\{1, 1\\right\\}, \\left\\{1, 1\\right\\}\\right\\}$ 进而得到两个元素之和均为 $2$ 的集合， 同样满足要求。\n\n对于第二组测试数据，Alice 可以给出正整数序列 $\\left\\{3, 2, 3\\right\\}$，可以证明此时 Bob 不存在符合要求的划分方案，因此 Alice 胜利。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le T \\le 2 \\times 10^5$；\n- $2 \\le k \\le n \\le 10^8$。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$n \\le 10$|$16$|\n|2|$k^2 \\le n$|$27$|\n|3|$2 \\nmid n$|$27$|\n|4|无特殊限制|$30$|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R7』Divide and Merge Game", "background": "", "description": "给定两个正整数 $n, k(2 \\le k \\le n)$，Alice 和 Bob 将进行如下游戏：\n\n- Alice 需要给出一个长度为 $k$ 的**正整数**序列 $a$，满足 $\\sum\\limits_{i = 1}^{k} a_i = n$。\n\n- Bob 需要尝试给出一个不小于 $2$ 的正整数 $m$，满足可以将 Alice 给出的正整数序列 $a$ 划分为 $m$ 个**非空可重**集合，且其元素之和均相同。若 Bob 可以给出一个符合条件的正整数则 Bob 胜利，反之 Alice 胜利。\n\n在两人均采取最优策略的情况下，问谁可以获胜。你需要回答 $T$ 次询问。", "inputFormat": "**本题单个测试点内含有多组询问。**\n\n第一行一个正整数 $T$，代表询问次数。\n\n对于每组询问：一行两个正整数 $n, k$，含义见【题目描述】。", "outputFormat": "对于每组询问，输出一行 `Alice` 或 `Bob`，表示谁会获胜。", "hint": "**【样例解释】**\n\n对于第一组测试数据，Alice 只能给出正整数序列 $\\left\\{1,1,1,1\\right\\}$，那么此时 Bob 给出 $m = 4$，并将这个正整数序列划分为 $\\left\\{\\left\\{1\\right\\},\\left\\{1\\right\\},\\left\\{1\\right\\},\\left\\{1\\right\\}\\right\\}$。Bob 也可以给出 $m = 2$，并将正整数序列划分为 $\\left\\{\\left\\{1, 1\\right\\}, \\left\\{1, 1\\right\\}\\right\\}$ 进而得到两个元素之和均为 $2$ 的集合， 同样满足要求。\n\n对于第二组测试数据，Alice 可以给出正整数序列 $\\left\\{3, 2, 3\\right\\}$，可以证明此时 Bob 不存在符合要求的划分方案，因此 Alice 胜利。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le T \\le 2 \\times 10^5$；\n- $2 \\le k \\le n \\le 10^8$。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$n \\le 10$|$16$|\n|2|$k^2 \\le n$|$27$|\n|3|$2 \\nmid n$|$27$|\n|4|无特殊限制|$30$|\n", "locale": "zh-CN"}}}
{"pid": "P11011", "type": "P", "difficulty": 2, "samples": [["3 1 5 6 1\n2 3\n2 4\n4 2", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「ALFR Round 4」A 点的覆盖", "background": "", "description": "在平面直角坐标系中，若一个点的横坐标和纵坐标均为整数，则我们称之为整数点。给定一个顶点均为整数点且各边与一条坐标轴平行的矩形 $A$ 和矩形内（可能在其边缘上）的 $n$ 个整数点 $p_1,p_2,p_3,\\cdots,p_n$，请问 $A$ 有多少个子矩形满足：\n\n- 顶点均为整数点；\n\n- 四边均与一条坐标轴平行；\n\n- 能全部覆盖（允许在边缘上） $p_1,p_2,p_3,\\cdots,p_n$。\n\n本题中矩阵长或宽可以为 $0$。", "inputFormat": "第一行五个整数，分别表示给定整数点的个数 $n$，矩形 $A$ 的左上端点的横坐标，左上端点的纵坐标，右下端点的横坐标和右下端点的纵坐标。\n\n第 $2$ 到第 $n+1$ 行，第 $i$ 行两个整数分别表示 $p_{i-1}$ 的横坐标和纵坐标。", "outputFormat": "一行一个整数表示答案对 $10^9+7$ 取模的结果。", "hint": "| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $n\\le10^2$，所有点的坐标小于 $10^2$ |\n| $1$ | $20$ | 除 $A$ 的顶点外的所有点的横坐标相等 |\n| $2$ | $60$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，所有点的坐标为正整数且小于 $10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 4」A 点的覆盖", "background": "", "description": "在平面直角坐标系中，若一个点的横坐标和纵坐标均为整数，则我们称之为整数点。给定一个顶点均为整数点且各边与一条坐标轴平行的矩形 $A$ 和矩形内（可能在其边缘上）的 $n$ 个整数点 $p_1,p_2,p_3,\\cdots,p_n$，请问 $A$ 有多少个子矩形满足：\n\n- 顶点均为整数点；\n\n- 四边均与一条坐标轴平行；\n\n- 能全部覆盖（允许在边缘上） $p_1,p_2,p_3,\\cdots,p_n$。\n\n本题中矩阵长或宽可以为 $0$。", "inputFormat": "第一行五个整数，分别表示给定整数点的个数 $n$，矩形 $A$ 的左上端点的横坐标，左上端点的纵坐标，右下端点的横坐标和右下端点的纵坐标。\n\n第 $2$ 到第 $n+1$ 行，第 $i$ 行两个整数分别表示 $p_{i-1}$ 的横坐标和纵坐标。", "outputFormat": "一行一个整数表示答案对 $10^9+7$ 取模的结果。", "hint": "| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $n\\le10^2$，所有点的坐标小于 $10^2$ |\n| $1$ | $20$ | 除 $A$ 的顶点外的所有点的横坐标相等 |\n| $2$ | $60$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^6$，所有点的坐标为正整数且小于 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P11012", "type": "P", "difficulty": 4, "samples": [["10 6\n2 3 4 3 3 4 2 4 9 2", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "O2优化", "双指针 two-pointer"], "title": "「ALFR Round 4」B 颜料", "background": "在小山的观念里，画展因色彩不同而绚丽。", "description": "小山一共有 $n$ 副画作，每副画作都有其主要的颜料。具体的，第 $i$ 副画作的主要颜料的种类为 $a_i$。小山可以选择一段**编号连续**的画作组成一个画展，而画展的绚丽程度为（设该画展由第 $l$ 到第 $r$ 副画组成）：$\\sum_{i=1}^W\\sum_{j=i+1}^W\\min(c_i,c_j)$，其中 $c_i$ 表示种类为 $i$ 的颜料在画展中出现的次数，$W$ 为所有颜料种类的值域。\n\n现在小山想知道，若要画展的绚丽程度至少为 $k$，应至少选出多少副连续的画作？若无绚丽程度至少为 $k$ 的画展，则答案为 $-1$。", "inputFormat": "共两行，第一行两个整数 $n,k$，含义见**题目描述**。\n\n第二行 $n$ 个整数，第 $i$ 个数为 $a_i$，表示第 $i$ 副画的主要颜料的种类。", "outputFormat": "一行一个整数表示答案。", "hint": "### 样例解释\n\n选择第 $5$ 至第 $9$ 副画作组成画展，则 $c_1=0,c_2=1,c_3=1,c_4=2,c_5=0,c_6=0,c_7=0,c_8=0,c_9=1,\\sum_{i=1}^9\\sum_{j=i+1}^9\\min(c_i,c_j)=6$。容易得知 $5$ 是符合要求的区间的最短长度。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | 所有的 $a_i(1\\le i\\le n)$ 都相同 |\n| $1$ | $20$ | $n,a_i\\le10^2$ |\n| $2$ | $70$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n,a_i\\le2\\times10^6$，$1\\le k\\le 10^{15}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 4」B 颜料", "background": "在小山的观念里，画展因色彩不同而绚丽。", "description": "小山一共有 $n$ 副画作，每副画作都有其主要的颜料。具体的，第 $i$ 副画作的主要颜料的种类为 $a_i$。小山可以选择一段**编号连续**的画作组成一个画展，而画展的绚丽程度为（设该画展由第 $l$ 到第 $r$ 副画组成）：$\\sum_{i=1}^W\\sum_{j=i+1}^W\\min(c_i,c_j)$，其中 $c_i$ 表示种类为 $i$ 的颜料在画展中出现的次数，$W$ 为所有颜料种类的值域。\n\n现在小山想知道，若要画展的绚丽程度至少为 $k$，应至少选出多少副连续的画作？若无绚丽程度至少为 $k$ 的画展，则答案为 $-1$。", "inputFormat": "共两行，第一行两个整数 $n,k$，含义见**题目描述**。\n\n第二行 $n$ 个整数，第 $i$ 个数为 $a_i$，表示第 $i$ 副画的主要颜料的种类。", "outputFormat": "一行一个整数表示答案。", "hint": "### 样例解释\n\n选择第 $5$ 至第 $9$ 副画作组成画展，则 $c_1=0,c_2=1,c_3=1,c_4=2,c_5=0,c_6=0,c_7=0,c_8=0,c_9=1,\\sum_{i=1}^9\\sum_{j=i+1}^9\\min(c_i,c_j)=6$。容易得知 $5$ 是符合要求的区间的最短长度。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | 所有的 $a_i(1\\le i\\le n)$ 都相同 |\n| $1$ | $20$ | $n,a_i\\le10^2$ |\n| $2$ | $70$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n,a_i\\le2\\times10^6$，$1\\le k\\le 10^{15}$。", "locale": "zh-CN"}}}
{"pid": "P11013", "type": "P", "difficulty": 5, "samples": [["4\n8\n1 3 3 1 2 1 2 2\n8\n3 2 2 1 2 1 2 1\n6\n1 2 1 2 1 2\n6\n1 2 3 4 5 6", "8\n7\n6\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "O2优化"], "title": "「ALFR Round 4」C 粉碎", "background": "", "description": "斌宝在玩纸牌。起初，他有 $n$ 张牌，第 $i$ 张牌的点数为 $A_i$。\n\n斌宝会重复执行 $n$ 轮以下操作，第 $i$ 轮操作如下：\n\n1. 斌宝需要选择将第 $i$ 张牌置于牌堆的最左边或者最右边；\n2. 若牌堆中存在两张点数相同的牌，则斌宝会**立即**将两张牌之间的所有牌从牌堆取出，扔进碎纸机（包括这两张牌本身）。\n\n总是会先执行插入操作再执行粉碎操作。\n\n牌堆初始为空。\n\n你需要告诉斌宝他最多能粉碎多少张牌。", "inputFormat": "第一行，一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $n$。\n\n第二行 $n$ 个数表示 $A_1,A_2,A_3,\\cdots,A_n$。", "outputFormat": "对于每组数据，输出斌宝最多能粉碎多少张牌。", "hint": "### 样例解释\n\n初始牌堆：$\\{\\}$\n\n放入 $1$：$\\{1\\}$；\n\n放入 $3$：$\\{1,3\\}$；\n\n放入 $3$：$\\{3,1,3\\}$，然后粉碎：$\\{\\}$；\n\n放入 $1$：$\\{1\\}$；\n\n放入 $2$：$\\{1,2\\}$；\n\n放入 $1$：$\\{1,2,1\\}$，然后粉碎：$\\{\\}$；\n\n放入 $2$：$\\{2\\}$；\n\n放入 $2$：$\\{2,2\\}$，然后粉碎：$\\{\\}$；\n\n所有牌均被粉碎。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $n\\le 20$|\n| $1$ | $20$ | $T=1,n=10^3$ 且 $A_i$ 在 $[1,n]$ 内随机生成 |\n| $2$ | $40$ | $n\\le10^3$ |\n| $3$ | $20$ | - |\n\n对于 $100\\%$ 的数据，$1\\le T\\le5$，$1\\le n\\le5\\times10^5$，$1\\le A_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 4」C 粉碎", "background": "", "description": "斌宝在玩纸牌。起初，他有 $n$ 张牌，第 $i$ 张牌的点数为 $A_i$。\n\n斌宝会重复执行 $n$ 轮以下操作，第 $i$ 轮操作如下：\n\n1. 斌宝需要选择将第 $i$ 张牌置于牌堆的最左边或者最右边；\n2. 若牌堆中存在两张点数相同的牌，则斌宝会**立即**将两张牌之间的所有牌从牌堆取出，扔进碎纸机（包括这两张牌本身）。\n\n总是会先执行插入操作再执行粉碎操作。\n\n牌堆初始为空。\n\n你需要告诉斌宝他最多能粉碎多少张牌。", "inputFormat": "第一行，一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $n$。\n\n第二行 $n$ 个数表示 $A_1,A_2,A_3,\\cdots,A_n$。", "outputFormat": "对于每组数据，输出斌宝最多能粉碎多少张牌。", "hint": "### 样例解释\n\n初始牌堆：$\\{\\}$\n\n放入 $1$：$\\{1\\}$；\n\n放入 $3$：$\\{1,3\\}$；\n\n放入 $3$：$\\{3,1,3\\}$，然后粉碎：$\\{\\}$；\n\n放入 $1$：$\\{1\\}$；\n\n放入 $2$：$\\{1,2\\}$；\n\n放入 $1$：$\\{1,2,1\\}$，然后粉碎：$\\{\\}$；\n\n放入 $2$：$\\{2\\}$；\n\n放入 $2$：$\\{2,2\\}$，然后粉碎：$\\{\\}$；\n\n所有牌均被粉碎。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $n\\le 20$|\n| $1$ | $20$ | $T=1,n=10^3$ 且 $A_i$ 在 $[1,n]$ 内随机生成 |\n| $2$ | $40$ | $n\\le10^3$ |\n| $3$ | $20$ | - |\n\n对于 $100\\%$ 的数据，$1\\le T\\le5$，$1\\le n\\le5\\times10^5$，$1\\le A_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11014", "type": "P", "difficulty": 6, "samples": [["4 4 7\n7 10 16 8", "28.047619"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "Special Judge", "O2优化", "李超线段树"], "title": "「ALFR Round 4」D 罪人的终幕", "background": "> 而我承诺你，一切都将在一场盛大的，如同戏剧般的审判中结束……  \n> 小小地旋转，轻轻地跳跃，然后便是「罪人」的谢幕。", "description": "定义函数 $a(x)$ 表示自然数 $x$ 的不同的质因子的和。\n\n若 $x=\\prod\\limits_{p_i\\in\\mathbb{P}}p_i^{d_i}$，则 $a(x)=\\sum\\limits_{p_i\\in \\mathbb{P}}p_i\\times[d_i\\ge1]$，其中 $\\mathbb{P}$ 是质数集，$a(1)=0$。\n\n从诞生的第一天开始，Furina 便有了一个期待值 $m_1$。\n\n在最终的审判来临前，她每天都会选择整理自己的心情，具体的方法如下：\n\n假设今天是第 $i$ 天，Furina 会把今天的期待值 $m_i$ 定为 $\\max\\{\\dfrac{m_j}{a(\\operatorname{lcm}(w_i,w_j))+a(\\gcd(w_i,w_j))}+k\\}$，其中 $2\\le i\\le n$，$1\\le j<i$，$k$ 是观看审判所获得的期待值。\n\n请你求出 $\\sum\\limits_{i=1}^nm_i$。", "inputFormat": "第一行三个整数 $n,m_1,k$ 分别表示第一天距最终的审判（包括第一天）的天数，第一天的期待值和观看审判能获得的期待值。\n \n第二行共 $n$ 个整数表示 $w_1,w_2,w_3,\\cdots,w_n$。", "outputFormat": "一行一个实数表示 $\\sum\\limits_{i=1}^nm_i$。**答案与正确答案的绝对误差不超过 $10^{-6}$ 即判为正确**。", "hint": "### 样例解释\n\n这 $4$ 天的期待值分别是 $4,7.285714,7.809524,8.952381$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $30$ | $n,m_1,k\\le10^3$，$w_i\\le29$ |\n| $1$ | $70$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le182376$，$1\\le m_1\\le10^7$，$0\\le k\\le10^6$，$2\\le w_i\\le182376$。\n\n本题数据可能偏弱，欢迎大家提供对于错误做法的 hack。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「ALFR Round 4」D 罪人的终幕", "background": "> 而我承诺你，一切都将在一场盛大的，如同戏剧般的审判中结束……  \n> 小小地旋转，轻轻地跳跃，然后便是「罪人」的谢幕。", "description": "定义函数 $a(x)$ 表示自然数 $x$ 的不同的质因子的和。\n\n若 $x=\\prod\\limits_{p_i\\in\\mathbb{P}}p_i^{d_i}$，则 $a(x)=\\sum\\limits_{p_i\\in \\mathbb{P}}p_i\\times[d_i\\ge1]$，其中 $\\mathbb{P}$ 是质数集，$a(1)=0$。\n\n从诞生的第一天开始，Furina 便有了一个期待值 $m_1$。\n\n在最终的审判来临前，她每天都会选择整理自己的心情，具体的方法如下：\n\n假设今天是第 $i$ 天，Furina 会把今天的期待值 $m_i$ 定为 $\\max\\{\\dfrac{m_j}{a(\\operatorname{lcm}(w_i,w_j))+a(\\gcd(w_i,w_j))}+k\\}$，其中 $2\\le i\\le n$，$1\\le j<i$，$k$ 是观看审判所获得的期待值。\n\n请你求出 $\\sum\\limits_{i=1}^nm_i$。", "inputFormat": "第一行三个整数 $n,m_1,k$ 分别表示第一天距最终的审判（包括第一天）的天数，第一天的期待值和观看审判能获得的期待值。\n \n第二行共 $n$ 个整数表示 $w_1,w_2,w_3,\\cdots,w_n$。", "outputFormat": "一行一个实数表示 $\\sum\\limits_{i=1}^nm_i$。**答案与正确答案的绝对误差不超过 $10^{-6}$ 即判为正确**。", "hint": "### 样例解释\n\n这 $4$ 天的期待值分别是 $4,7.285714,7.809524,8.952381$。\n\n### 数据范围\n\n| 子任务 | 分值 | 限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $30$ | $n,m_1,k\\le10^3$，$w_i\\le29$ |\n| $1$ | $70$ | - |\n\n对于 $100\\%$ 的数据，$1\\le n\\le182376$，$1\\le m_1\\le10^7$，$0\\le k\\le10^6$，$2\\le w_i\\le182376$。\n\n本题数据可能偏弱，欢迎大家提供对于错误做法的 hack。", "locale": "zh-CN"}}}
{"pid": "P11015", "type": "P", "difficulty": 2, "samples": [["3 2\n3 1 2\n1 3\n2 2", "1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "O2优化", "前缀和"], "title": "Inversion Pair", "background": "", "description": "对于一个序列 $p$，我们定义：$p$ 中的逆序对个数为 $\\mathrm{W}(p)$。\n\n注：这里的逆序对即为满足 $p_i>p_j$ 且 $i<j$ 的一对数。\n\n现在，给定一个序列 $a$，其为整数 $1\\sim n$ 的排列。也就是说，对于任意的 $1\\le i\\le  n$，都有 $1\\le a_i\\le n$，$a_i$ 均为整数且互不相同。\n\n现有一张图，上有 $n$ 个节点，编号为整数 $1\\sim n$。对于任意的两个编号为 $i,j(1\\le i< j\\le n)$ 的节点，我们将在它们之间连一条权值为 $\\mathrm{W}([a_i,a_{i+1},\\dots,a_{j-1},a_j])$ 的无向边。\n\n现有 $q$ 次询问。每次询问给出两个编号为 $x,y$ 节点，求它们之间的最短路径。\n", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 整数表示序列 $a$。\n\n接下来 $q$ 行，每行两个整数表示一次询问的 $x,y$。", "outputFormat": "对于每一次询问：\n\n一个整数表示所求的最短路径。", "hint": "对于全部数据，保证：$2\\le n\\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$，$1\\le x,y\\le n$。\n\n| $\\text{Subtask}$ | $n\\le$ | $q\\le$ | 分数 | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $0$ | $100$ | $100$ | $30$ | 无 |\n| $1$ | $3\\times 10^5$ | $3\\times 10^5$ | $70$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Inversion Pair", "background": "", "description": "对于一个序列 $p$，我们定义：$p$ 中的逆序对个数为 $\\mathrm{W}(p)$。\n\n注：这里的逆序对即为满足 $p_i>p_j$ 且 $i<j$ 的一对数。\n\n现在，给定一个序列 $a$，其为整数 $1\\sim n$ 的排列。也就是说，对于任意的 $1\\le i\\le  n$，都有 $1\\le a_i\\le n$，$a_i$ 均为整数且互不相同。\n\n现有一张图，上有 $n$ 个节点，编号为整数 $1\\sim n$。对于任意的两个编号为 $i,j(1\\le i< j\\le n)$ 的节点，我们将在它们之间连一条权值为 $\\mathrm{W}([a_i,a_{i+1},\\dots,a_{j-1},a_j])$ 的无向边。\n\n现有 $q$ 次询问。每次询问给出两个编号为 $x,y$ 节点，求它们之间的最短路径。\n", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 整数表示序列 $a$。\n\n接下来 $q$ 行，每行两个整数表示一次询问的 $x,y$。", "outputFormat": "对于每一次询问：\n\n一个整数表示所求的最短路径。", "hint": "对于全部数据，保证：$2\\le n\\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$，$1\\le x,y\\le n$。\n\n| $\\text{Subtask}$ | $n\\le$ | $q\\le$ | 分数 | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $0$ | $100$ | $100$ | $30$ | 无 |\n| $1$ | $3\\times 10^5$ | $3\\times 10^5$ | $70$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P11016", "type": "P", "difficulty": 4, "samples": [["6 4\n1 1 4 5 1 4\n1 2\n4 3\n5 2\n6 5", "9\n10\n10\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "位运算"], "title": "XOR Pairs", "background": "CT 每天只知道在伦敦哼哼蓝调，在校领导面前溜达，懒惰而浪荡的生活使他非常的潦倒，于是，他决定痛改前非学习数学……\n", "description": "CT 在做数学题。\n\nCT 手里一个长度为 $n$ 的序列 $a$，现在给定 CT $q$ 次操作，对于每次操作：\n- 把 $a_x$ 改成 $y$ 。\n- 求修改后数组中合法二元组的个数。\n\n**注：** 对于一对满足 $a_i\\oplus a_j > \\max\\{a_i,a_j\\}$ 的 $(a_i,a_j)(i<j)$ 二元组，我们称其为合法二元组。其中 $\\oplus $ 表示按位异或，$\\max\\{x,y\\}$ 表示 $x,y$ 中的较大值。\n\n", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数，表示序列 $a$。\n\n接下来 $q$ 行，每行两个整数 $x,y$，代表一次把 $a_x$ 改成 $y$ 的操作。", "outputFormat": "对于每一次操作：\n\n一个整数表示所求的答案。", "hint": "#### 【数据范围】\n\n对于全部数据，保证 $1\\le n \\le 10^6$，$1\\le q\\le 10^5$，$1\\le a_i\\le 10^6$，$1\\le x \\le n$，$1\\le y \\le 10^6$。\n\n|$\\text{Subtask}$|$n\\leq$|$q\\leq$|分值| 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$10^2$|$10^2$|$13$|无|\n|$1$|$10^6$|$10^5$|$87$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "XOR Pairs", "background": "CT 每天只知道在伦敦哼哼蓝调，在校领导面前溜达，懒惰而浪荡的生活使他非常的潦倒，于是，他决定痛改前非学习数学……\n", "description": "CT 在做数学题。\n\nCT 手里一个长度为 $n$ 的序列 $a$，现在给定 CT $q$ 次操作，对于每次操作：\n- 把 $a_x$ 改成 $y$ 。\n- 求修改后数组中合法二元组的个数。\n\n**注：** 对于一对满足 $a_i\\oplus a_j > \\max\\{a_i,a_j\\}$ 的 $(a_i,a_j)(i<j)$ 二元组，我们称其为合法二元组。其中 $\\oplus $ 表示按位异或，$\\max\\{x,y\\}$ 表示 $x,y$ 中的较大值。\n\n", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数，表示序列 $a$。\n\n接下来 $q$ 行，每行两个整数 $x,y$，代表一次把 $a_x$ 改成 $y$ 的操作。", "outputFormat": "对于每一次操作：\n\n一个整数表示所求的答案。", "hint": "#### 【数据范围】\n\n对于全部数据，保证 $1\\le n \\le 10^6$，$1\\le q\\le 10^5$，$1\\le a_i\\le 10^6$，$1\\le x \\le n$，$1\\le y \\le 10^6$。\n\n|$\\text{Subtask}$|$n\\leq$|$q\\leq$|分值| 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$10^2$|$10^2$|$13$|无|\n|$1$|$10^6$|$10^5$|$87$|无|", "locale": "zh-CN"}}}
{"pid": "P11017", "type": "P", "difficulty": 5, "samples": [["2\n3 1 3\n1 2\n2 3\n5 2 4\n1 2\n1 3\n1 4\n1 5", "hgcnxn\nhgcnxn"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "Special Judge", "O2优化"], "title": "Hide And Seek", "background": "", "description": "Drifty 在和 hgcnxn 玩躲猫猫。\n\n整个地图有 $n$ 个房间，由 $n-1$ 条走廊连接（保证对于任意的两个房间都能互相抵达）。\n\n对于游戏的每一回合，hgcnxn 先走一步，Drifty 后走一步（特别的，hgcnxn 必须走一步，而 Drifty 可以不动）。\n\nhgcnxn 从编号为 $p$ 的房间开始，任务是要抓到 Drifty，hgcnxn 通过雷达，得知了 Drifty 一开始所在的房间编号 $q$，hgcnxn 会预先设计一条尽可能优的抓捕方案，并按照计划抓捕 Drifty。**但 hgcnxn 并不知道接下来的回合中 Drifty 的位置。**\n\n但是，Drifty 更加狡猾，他提前预知了 hgcnxn 的整个计划，并采用了最优的方案尝试去避开 hgcnxn。但是鉴于地图的原因，Drifty 可能还是会被抓到。\n\n特别的，hgcnxn 并不知道 Drifty 能够提前知道他的整个计划。\n\n现在给你 $n, p, q$ 和地图，问你在 $10^{100}$ 回合内，hgcnxn 是否可能抓到 Drifty。\n", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行三个整数 $n, p, q$。\n\n接下来 $n-1$ 行，每行两个节点 $u, v$，表示一条走廊连接的两个房间。", "outputFormat": "对于每组数据：\n\n一个字符串，若 hgcnxn 可能抓到 Drifty，输出 `hgcnxn`，若 hgcnxn 不可能抓到 Drifty，输出 `Drifty`。\n\n特别的，对于答案的判定，我们不区分大小写。\n\n如果应输出 `Drifty`，但您输出了 `driFtY`，您将被判定作正确。", "hint": "#### 【数据范围】\n\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于 $100\\%$ 的数据，保证：\n\n- $3\\le \\sum n\\le 2\\times 10^5$\n- $1\\le p,q\\le n$\n- $1\\le T\\le 10^3$。\n\n以下是部分分的具体分配：\n\n|$\\text{Subtask}$|$\\sum n\\leq$|分值| 特殊性质 |\n|:-:|:-:|:-:|:-:|\n|$0$|$2\\times 10^5$|$1$| A |\n|$1$|$2\\times 10^5$|$2$| B |\n|$2$|$7$|$3$| 无 |\n|$3$|$2\\times 10^5$|$9$| C |\n|$4$|$2\\times 10^5$|$85$| 无 |\n\n- 特殊性质 A：保证所有给定的地图的形态均为一条链。\n- 特殊性质 B：保证所有给定的地图的形态均为菊花图（即地图中 $n-1$ 个房间度数为 $1$）。\n- 特殊性质 C：保证地图中只存在一个度数为 $3$ 的房间，且其余的房间度数均 $\\le 2$。\n\n其中，一个房间的度数被定义为连接该房间的走廊数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Hide And Seek", "background": "", "description": "Drifty 在和 hgcnxn 玩躲猫猫。\n\n整个地图有 $n$ 个房间，由 $n-1$ 条走廊连接（保证对于任意的两个房间都能互相抵达）。\n\n对于游戏的每一回合，hgcnxn 先走一步，Drifty 后走一步（特别的，hgcnxn 必须走一步，而 Drifty 可以不动）。\n\nhgcnxn 从编号为 $p$ 的房间开始，任务是要抓到 Drifty，hgcnxn 通过雷达，得知了 Drifty 一开始所在的房间编号 $q$，hgcnxn 会预先设计一条尽可能优的抓捕方案，并按照计划抓捕 Drifty。**但 hgcnxn 并不知道接下来的回合中 Drifty 的位置。**\n\n但是，Drifty 更加狡猾，他提前预知了 hgcnxn 的整个计划，并采用了最优的方案尝试去避开 hgcnxn。但是鉴于地图的原因，Drifty 可能还是会被抓到。\n\n特别的，hgcnxn 并不知道 Drifty 能够提前知道他的整个计划。\n\n现在给你 $n, p, q$ 和地图，问你在 $10^{100}$ 回合内，hgcnxn 是否可能抓到 Drifty。\n", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行三个整数 $n, p, q$。\n\n接下来 $n-1$ 行，每行两个节点 $u, v$，表示一条走廊连接的两个房间。", "outputFormat": "对于每组数据：\n\n一个字符串，若 hgcnxn 可能抓到 Drifty，输出 `hgcnxn`，若 hgcnxn 不可能抓到 Drifty，输出 `Drifty`。\n\n特别的，对于答案的判定，我们不区分大小写。\n\n如果应输出 `Drifty`，但您输出了 `driFtY`，您将被判定作正确。", "hint": "#### 【数据范围】\n\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于 $100\\%$ 的数据，保证：\n\n- $3\\le \\sum n\\le 2\\times 10^5$\n- $1\\le p,q\\le n$\n- $1\\le T\\le 10^3$。\n\n以下是部分分的具体分配：\n\n|$\\text{Subtask}$|$\\sum n\\leq$|分值| 特殊性质 |\n|:-:|:-:|:-:|:-:|\n|$0$|$2\\times 10^5$|$1$| A |\n|$1$|$2\\times 10^5$|$2$| B |\n|$2$|$7$|$3$| 无 |\n|$3$|$2\\times 10^5$|$9$| C |\n|$4$|$2\\times 10^5$|$85$| 无 |\n\n- 特殊性质 A：保证所有给定的地图的形态均为一条链。\n- 特殊性质 B：保证所有给定的地图的形态均为菊花图（即地图中 $n-1$ 个房间度数为 $1$）。\n- 特殊性质 C：保证地图中只存在一个度数为 $3$ 的房间，且其余的房间度数均 $\\le 2$。\n\n其中，一个房间的度数被定义为连接该房间的走廊数。", "locale": "zh-CN"}}}
{"pid": "P11018", "type": "P", "difficulty": 5, "samples": [["6\n0 1 1 1 0 0\n1 2\n1 3\n2 5\n5 4\n5 6", "3"], ["7\n0 0 1 0 0 1 1\n6 4\n3 4\n3 5\n1 5\n7 3\n2 7\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP"], "title": "Monochrome Tree", "background": "", "description": "给定你一棵根节点为 $1$ 的树，对于任意的节点 $u$ 都只能有两种颜色：黑或白。每个节点 $u$ 的起始颜色都是已知的，记为 $\\mathrm{color}_u$。\n\n现在你有两种操作：\n- 操作 $1$：把任意一个节点 $u$ 到根节点的路径上节点的颜色全部翻转（路径包括 $u$ 和根节点）。\n- 操作 $2$：把任意一个以 $u$ 为根节点的子树上的节点颜色全部翻转（$u$ 的子树包括 $u$）。\n\n现在问你，最少需要几次操作才能把整棵树变成黑色。", "inputFormat": "第一行一个整数 $n$ 表示节点个数。\n\n第二行 $n$ 个整数表示 $\\mathrm{color}_i$，$\\mathrm{color}_i=0$ 代表 $i$ 节点初始为白色，$\\mathrm{color}_i=1$ 代表 $i$ 节点初始为黑色。\n\n接下来 $n-1$ 行，每行两个整数，表示一条边连接的两个节点。", "outputFormat": "一个整数，表示最少的操作次数。", "hint": "#### 【数据范围】\n\n对于全部数据，保证：$1 \\le n \\le 2\\times 10^5$， $0\\le \\mathrm{color}_i\\le 1$。\n\n|$\\text{Subtask}$|$n\\leq$|分值|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$0$|$5$|$3$|无|\n|$1$|$10$|$7$|无|\n|$2$|$2\\times 10^3$|$29$|无|\n|$3$|$2\\times 10^5$|$61$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Monochrome Tree", "background": "", "description": "给定你一棵根节点为 $1$ 的树，对于任意的节点 $u$ 都只能有两种颜色：黑或白。每个节点 $u$ 的起始颜色都是已知的，记为 $\\mathrm{color}_u$。\n\n现在你有两种操作：\n- 操作 $1$：把任意一个节点 $u$ 到根节点的路径上节点的颜色全部翻转（路径包括 $u$ 和根节点）。\n- 操作 $2$：把任意一个以 $u$ 为根节点的子树上的节点颜色全部翻转（$u$ 的子树包括 $u$）。\n\n现在问你，最少需要几次操作才能把整棵树变成黑色。", "inputFormat": "第一行一个整数 $n$ 表示节点个数。\n\n第二行 $n$ 个整数表示 $\\mathrm{color}_i$，$\\mathrm{color}_i=0$ 代表 $i$ 节点初始为白色，$\\mathrm{color}_i=1$ 代表 $i$ 节点初始为黑色。\n\n接下来 $n-1$ 行，每行两个整数，表示一条边连接的两个节点。", "outputFormat": "一个整数，表示最少的操作次数。", "hint": "#### 【数据范围】\n\n对于全部数据，保证：$1 \\le n \\le 2\\times 10^5$， $0\\le \\mathrm{color}_i\\le 1$。\n\n|$\\text{Subtask}$|$n\\leq$|分值|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$0$|$5$|$3$|无|\n|$1$|$10$|$7$|无|\n|$2$|$2\\times 10^3$|$29$|无|\n|$3$|$2\\times 10^5$|$61$|无|", "locale": "zh-CN"}}}
{"pid": "P11019", "type": "P", "difficulty": 1, "samples": [["[TaiYang]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng", "/ty"], ["[LiuLei]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng", "/ll"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「LAOI-6」[太阳]] 请使用最新版手机 QQ 体验新功能", "background": "「」\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/05xcfhr8.png)", "description": "你的 QQ 收到了一条新消息！但是你很生气，因为你看不到别人发送的超级表情。\n\n消息形如一个字符串 $S$，包含且仅包含一个超级表情。具体地，$S$ 的拼音被采用驼峰命名法处理，因此其形如：\n\n```plain\n[AaaBbbCcc......]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng\n```\n\n也就是说，将 $\\texttt [w\\texttt{]]请使用最新版手机QQ体验新功能}$ 中的每个汉字替换为其拼音，其中 $w$ 为表情的实际中文名称，保证其包含至少一个音节，**其中每个音节包含一个大写英文字母和至少一个小写英文字母**。\n\n你想在电脑上也能发出这个表情。为此，你需要键入一个正斜杠（$\\texttt /$）加它的「拼音缩写」。**具体地，表情 $\\bm w$ 的「拼音缩写」即为 $\\bm w$ 的每个音节的首字母转为小写后拼接的结果**。例如，`TaiYang` 的「拼音缩写」为 $\\texttt{/ty}$，而 `YueLiang` 的「拼音缩写」为 $\\texttt{/yl}$。\n\n请你输出在电脑端表示发送这个表情的字符串。\n\n请注意：这个字符串可能在 QQ 中实际上不能表示这个表情，例如 `NiZhenBangBang`（一个超级表情） 不能在 QQ 中用 $\\texttt{/nzbb}$ 来打出，但是在本题中，我们认为其是合法的。", "inputFormat": "输入仅一行：一个字符串 $S$。", "outputFormat": "输出一行一个字符串，表示答案。", "hint": "**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证给出的字符串 $S$ 满足题目中所写的 `[AaaBbbCcc......]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng` 的格式，且保证 $\\lvert S\\rvert \\leq 100$；给出的 $S$ 描述一个真实存在的 QQ 超级表情。", "locale": "zh-CN", "translations": {"en": {"title": "「LAOI-6」:sun:", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/05xcfhr8.png)\n\n> [SUN]]PleaseUseLastestMobileQQToDisplayTheMessage", "description": "You have received a new message on QQ! But you are not very happy, since you can't see the *super emoji* sent by others.\n\nThe message can be viewed as a string, namely $S$, containing a *super emoji*. Specifically, $S$ is processed by the Camelcase method, therefore it is in the form of:\n\n```plain\n[AaaBbbCcc......]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng\n```\n\nThat is, the replacement result of changing each syllable to its corresponding written form in the message $\\texttt{[}w\\texttt{]]请使用最新版手机QQ体验新功能}$, where $w$ denotes the *actual Chinese name* of the emoji, containing at least one syllable, **each of which is made up of one uppercase letter and at least one lowercase letter**.\n\nYou want to send this *super emoji* on your computer too. Therefore, you are to type a slash ($\\texttt /$) followed by the abbreviation of its *actual Chinese name*. **which is exactly the concatenation of the first letter in lowercase of each syllable in $\\bm w$**. For example, $\\texttt{/ty}$ is short for `TaiYang`, while $\\texttt{/yl}$ is short for `YueLiang`. \n\nPlease output the message representing the *super emoji* to send it on your computer.", "inputFormat": "The first and only line of input contains a string $S$.\n\nIt's guaranteed that $\\lvert S\\rvert \\leq 100$, and $S$ is valid, i.e. in the form of `[AaaBbbCcc......]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng`.", "outputFormat": "Output a single line containing a string.", "hint": "No additional constraints are provided.", "locale": "en"}, "zh-CN": {"title": "「LAOI-6」[太阳]] 请使用最新版手机 QQ 体验新功能", "background": "「」\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/05xcfhr8.png)", "description": "你的 QQ 收到了一条新消息！但是你很生气，因为你看不到别人发送的超级表情。\n\n消息形如一个字符串 $S$，包含且仅包含一个超级表情。具体地，$S$ 的拼音被采用驼峰命名法处理，因此其形如：\n\n```plain\n[AaaBbbCcc......]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng\n```\n\n也就是说，将 $\\texttt [w\\texttt{]]请使用最新版手机QQ体验新功能}$ 中的每个汉字替换为其拼音，其中 $w$ 为表情的实际中文名称，保证其包含至少一个音节，**其中每个音节包含一个大写英文字母和至少一个小写英文字母**。\n\n你想在电脑上也能发出这个表情。为此，你需要键入一个正斜杠（$\\texttt /$）加它的「拼音缩写」。**具体地，表情 $\\bm w$ 的「拼音缩写」即为 $\\bm w$ 的每个音节的首字母转为小写后拼接的结果**。例如，`TaiYang` 的「拼音缩写」为 $\\texttt{/ty}$，而 `YueLiang` 的「拼音缩写」为 $\\texttt{/yl}$。\n\n请你输出在电脑端表示发送这个表情的字符串。\n\n请注意：这个字符串可能在 QQ 中实际上不能表示这个表情，例如 `NiZhenBangBang`（一个超级表情） 不能在 QQ 中用 $\\texttt{/nzbb}$ 来打出，但是在本题中，我们认为其是合法的。", "inputFormat": "输入仅一行：一个字符串 $S$。", "outputFormat": "输出一行一个字符串，表示答案。", "hint": "**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证给出的字符串 $S$ 满足题目中所写的 `[AaaBbbCcc......]]QingShiYongZuiXinBanShouJiQQTiYanXinGongNeng` 的格式，且保证 $\\lvert S\\rvert \\leq 100$；给出的 $S$ 描述一个真实存在的 QQ 超级表情。", "locale": "zh-CN"}}}
{"pid": "P11020", "type": "P", "difficulty": 2, "samples": [["2\n3 5 2\n5 4 7", "S....\n....S\n.....\nS..S\n...S\nS.S.\n...S\n.S.."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「LAOI-6」Radiation", "background": "", "description": "小 T 和 小 U 在一个 $n \\times m$ 的初始为空的棋盘上玩游戏。小 T 先在上面摆 $k$ 个石头，然后小 U 会使用宇宙射线毁掉所有石头。但是小 U 的宇宙射线威力有限，只能每次销毁一行或一列的石头。\n\n小 U 不想过多用他的宇宙射线发射器，所以他会按照最优策略销毁石头。反之，小 T 偏偏想让小 U 发射最多的宇宙射线，所以他会摆放石头以做到这一点。问题来了：小 T 不会摆放了。你能够找到一种方法帮助小 T 达到目标吗？", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$。\n\n然后 $T$ 行，每行 $n,m,k$ 三个整数，表示这组数据的游戏设定。", "outputFormat": "对于每组数据，输出 $n$ 行 $m$ 列共 $nm$ 个字符，第 $i$ 行第 $j$ 个字符如果为 `S` 那么代表棋盘的第 $i$ 行第 $j$ 列有石头；如果为 `.` 那么代表棋盘的第 $i$ 行第 $j$ 列没石头。\n\n你需要保证每组数据中输出的字符 `S` 的个数为 $k$。", "hint": "**本题采用捆绑测试。**\n\n子任务 1（$20$ 分）：保证 $k \\leq \\min(n,m)$。\n\n子任务 2（$12$ 分）：保证 $n = 2$。\n\n子任务 3（$18$ 分）：保证 $T,n,m \\leq 10$。\n\n子任务 4（$20$ 分）：保证 $T \\leq 10$，$n,m \\leq 300$。依赖子任务 $3$。\n\n子任务 5（$30$ 分）：无特殊限制。依赖子任务 $1 \\sim 4$。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^4$，$1 \\leq n,m \\leq 2 \\times 10^3$，$0 \\leq k \\leq nm$，$\\sum nm \\leq 5 \\times 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "「LAOI-6」Radiation", "background": "", "description": "Tom_nik and Uurist are playing a game on an $n\\times m$ board. Initially the board is empty. First, Uurist places $k$ stones on the board, and then Tom_nik will destroy all the stones. **However, for one operation, Tom_nik can only destroy stones that share a row or column**.\n\nUurist will destroy the stones using the minimum number of operations. However, Tom_nik wants to maximize the number of operations Uurist will take by placing the stone in a proper way. You need to give him a specific placement such that Tom_nik's goal will be achieved.\n\nNote that Uurist has to destroy **all** of the stones.", "inputFormat": "**This task contains multiple testcases.** For each test, the first line of the input contains an integer $T$, indicating the number of testcases.\n\nThen $T$ lines follow, each line containing three integers $n,m,k$.", "outputFormat": "For each test case, output $n$ lines containing $nm$ characters, indicating your answer: the character on the $i$-th line and $j$-th column should be \"$\\texttt S$\" (withut quotes), if you think you should place a stone on this grid; otherwise it should be \"$\\texttt .$\" (without quotes).\n\nYou should guarantee that the number of grids with $\\texttt S$ on it is $k$. If there are multiple answers, print any.", "hint": "Subtasks are used in this problem.\n\nSubtask 1 ($20$ points): it is guaranteed that $k \\leq \\min(n,m)$.  \nSubtask 2 ($12$ points): it is guaranteed that $n = 2$.  \nSubtask 3 ($18$ points): it is guaranteed that $T,n,m \\leq 10$.  \nSubtask 4 ($20$ points): it is guaranteed that $T \\leq 10$, $n,m \\leq 300$.  \nSubtask 5 ($30$ points): No special constraint.  \n\nFor all tests, it is guaranteed that $1 \\leq T \\leq 10^4$, $1 \\leq n,m \\leq 2 \\times 10^3$, $0 \\leq k \\leq nm$, the sum of $nm$ over all test cases does not exceed $5\\times 10^6$.", "locale": "en"}, "zh-CN": {"title": "「LAOI-6」Radiation", "background": "", "description": "小 T 和 小 U 在一个 $n \\times m$ 的初始为空的棋盘上玩游戏。小 T 先在上面摆 $k$ 个石头，然后小 U 会使用宇宙射线毁掉所有石头。但是小 U 的宇宙射线威力有限，只能每次销毁一行或一列的石头。\n\n小 U 不想过多用他的宇宙射线发射器，所以他会按照最优策略销毁石头。反之，小 T 偏偏想让小 U 发射最多的宇宙射线，所以他会摆放石头以做到这一点。问题来了：小 T 不会摆放了。你能够找到一种方法帮助小 T 达到目标吗？", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$。\n\n然后 $T$ 行，每行 $n,m,k$ 三个整数，表示这组数据的游戏设定。", "outputFormat": "对于每组数据，输出 $n$ 行 $m$ 列共 $nm$ 个字符，第 $i$ 行第 $j$ 个字符如果为 `S` 那么代表棋盘的第 $i$ 行第 $j$ 列有石头；如果为 `.` 那么代表棋盘的第 $i$ 行第 $j$ 列没石头。\n\n你需要保证每组数据中输出的字符 `S` 的个数为 $k$。", "hint": "**本题采用捆绑测试。**\n\n子任务 1（$20$ 分）：保证 $k \\leq \\min(n,m)$。\n\n子任务 2（$12$ 分）：保证 $n = 2$。\n\n子任务 3（$18$ 分）：保证 $T,n,m \\leq 10$。\n\n子任务 4（$20$ 分）：保证 $T \\leq 10$，$n,m \\leq 300$。依赖子任务 $3$。\n\n子任务 5（$30$ 分）：无特殊限制。依赖子任务 $1 \\sim 4$。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^4$，$1 \\leq n,m \\leq 2 \\times 10^3$，$0 \\leq k \\leq nm$，$\\sum nm \\leq 5 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11021", "type": "P", "difficulty": 4, "samples": [["5 3\n10 3\n-10 1\n0 5\n-5 0\n10 7\n1 2\n2 2\n3 100", "20\n20\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "二分", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「LAOI-6」区间测速", "background": "", "description": "小 A 正在一条笔直的公路上行驶（可以随时掉头，掉头的时间和路程忽略不计），这条公路可以被抽象为一条数轴。\n\n你现在得到了 $n$ 个监控的信息，第 $i$ 条信息记录到：小 A 在 $t_i$ 时刻经过了坐标为 $x_i$ 之处。\n\n有 $m$ 次询问，第 $i$ 次询问给定 $u_i$ 和 $v_i$，表示：假如将第 $u_i$ 个监控记录到小 A 经过 $x_i$ 的时间改为 $v_i$，小 A 所有可能的行驶过程中，最快时速的最小值是多少（答案向下取整）？**询问之间互相独立，即每次询问的改动是暂时的**。\n\n### 形式化题意\n\n给定 $n,m$，有长度为 $n$ 的数组 $x$ 与 $t$。进行 $m$ 次独立的修改，第 $i$ 次会将 $t_{u_i}$ 修改为 $v_i$，并询问：\n\n$$\\max_{i=1}^{n}\\max_{j=i+1}^n \\left\\lfloor\\frac{|x_i-x_j|}{|t_i-t_j|}\\right\\rfloor$$\n\n**前一次修改不会影响后一次修改，即询问结束后会撤销修改**。", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $x_i,t_i$。\n\n接下来 $m$ 行，每行两个整数 $u_i,v_i$。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "样例解释：\n\n第 $1$ 次询问：\n\n小 A 第 $0$ 时刻位于 $-5$，第 $1$ 时刻位于 $-10$，第 $2$ 时刻位于 $10$，第 $5$ 时刻位于 $0$，第 $7$ 时刻位于 $10$，最快时速最慢是 $20$（$1$ 时刻到 $2$ 时刻，从 $-10$ 移动到 $10$ 的时候）。\n\n---\n\n本题共有 $10$ 个测试点，每个测试点分值均为 $10$ 分。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1 \\sim 3$ | $n,m\\leq 10^3$ |\n| $4 \\sim 5$ | $-10^5\\leq x_i\\leq 10^5$ |\n| $6 \\sim 7$ | $m\\leq 100$ |\n| $8 \\sim 10$ | N/A |\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$，$-10^9\\leq x_i\\leq 10^9$，$0\\leq t_i,v_i\\leq 10^9$，$1\\leq u_i\\leq n$，保证任意时刻不存在两个监控记录的时间相同。", "locale": "zh-CN", "translations": {"en": {"title": "「LAOI-6」Speed Measurement Between Checkpoints", "background": "", "description": "Little A is driving on a straight highway (can make U-turns instantly, ignoring time and distance), abstracted as a number line.\n\nYou are given information from $n$ surveillance records. The $i$-th record indicates Little A was at coordinate $x_i$ at time $t_i$.\n\nThere are $m$ queries. The $i$-th query provides $u_i$ and $v_i$: if the time of the $u_i$-th record is temporarily changed to $v_i$, what is the minimal possible value of the maximum speed (floor to integer) in any valid driving path? **Queries are independent; modifications are reverted after each query.**\n\n### Formal Description\n\nGiven $n$, $m$, arrays $x$, and $t$ of length $n$. For each of $m$ independent modifications (changing $t_{u_i}$ to $v_i$), compute:\n\n$$\\left\\lfloor \\max_{1 \\le i < j \\le n} \\frac{|x_i - x_j|}{|t_i - t_j|} \\right\\rfloor$$", "inputFormat": "First line: Two integers $n$, $m$.\n\nNext $n$ lines: Two integers $x_i$, $t_i$.\n\nNext $m$ lines: Two integers $u_i$, $v_i$.", "outputFormat": "For each query, output the floor of the maximum speed.", "hint": "### Sample Explanation\n\nAfter the first query:\n\n- Little A's positions: $(-5, 0)$, $(-10, 1)$, $(10, 2)$, $(0, 5)$, $(10, 7)$.\n- The minimal maximum speed is $20$ (from $t=1$ to $t=2$, moving $-10$ to $10$).\n\n---\n\n**Constraints:**\n\n- $2 \\leq n \\leq 10^5$, $1 \\leq m \\leq 10^5$.\n- $-10^9 \\leq x_i \\leq 10^9$, $0 \\leq t_i, v_i \\leq 10^9$.\n- $1 \\leq u_i \\leq n$.\n- **All $t_i$ (after modifications) are distinct.**\n\n### Test Cases\n\n| Test Case | Special Properties |\n| :-------: | :----------------: |\n| 1~3      | $n, m \\leq 10^3$   |\n| 4~5      | $-10^5 \\leq x_i \\leq 10^5$ |\n| 6~7      | $m \\leq 100$       |\n| 8~10     | None               |", "locale": "en"}, "zh-CN": {"title": "「LAOI-6」区间测速", "background": "", "description": "小 A 正在一条笔直的公路上行驶（可以随时掉头，掉头的时间和路程忽略不计），这条公路可以被抽象为一条数轴。\n\n你现在得到了 $n$ 个监控的信息，第 $i$ 条信息记录到：小 A 在 $t_i$ 时刻经过了坐标为 $x_i$ 之处。\n\n有 $m$ 次询问，第 $i$ 次询问给定 $u_i$ 和 $v_i$，表示：假如将第 $u_i$ 个监控记录到小 A 经过 $x_i$ 的时间改为 $v_i$，小 A 所有可能的行驶过程中，最快时速的最小值是多少（答案向下取整）？**询问之间互相独立，即每次询问的改动是暂时的**。\n\n### 形式化题意\n\n给定 $n,m$，有长度为 $n$ 的数组 $x$ 与 $t$。进行 $m$ 次独立的修改，第 $i$ 次会将 $t_{u_i}$ 修改为 $v_i$，并询问：\n\n$$\\max_{i=1}^{n}\\max_{j=i+1}^n \\left\\lfloor\\frac{|x_i-x_j|}{|t_i-t_j|}\\right\\rfloor$$\n\n**前一次修改不会影响后一次修改，即询问结束后会撤销修改**。", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，每行两个整数 $x_i,t_i$。\n\n接下来 $m$ 行，每行两个整数 $u_i,v_i$。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "样例解释：\n\n第 $1$ 次询问：\n\n小 A 第 $0$ 时刻位于 $-5$，第 $1$ 时刻位于 $-10$，第 $2$ 时刻位于 $10$，第 $5$ 时刻位于 $0$，第 $7$ 时刻位于 $10$，最快时速最慢是 $20$（$1$ 时刻到 $2$ 时刻，从 $-10$ 移动到 $10$ 的时候）。\n\n---\n\n本题共有 $10$ 个测试点，每个测试点分值均为 $10$ 分。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1 \\sim 3$ | $n,m\\leq 10^3$ |\n| $4 \\sim 5$ | $-10^5\\leq x_i\\leq 10^5$ |\n| $6 \\sim 7$ | $m\\leq 100$ |\n| $8 \\sim 10$ | N/A |\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$，$-10^9\\leq x_i\\leq 10^9$，$0\\leq t_i,v_i\\leq 10^9$，$1\\leq u_i\\leq n$，保证任意时刻不存在两个监控记录的时间相同。", "locale": "zh-CN"}}}
{"pid": "P11022", "type": "P", "difficulty": 4, "samples": [["3\n4 5\n1 2\n1 3\n1 4\n2 3\n3 4\n5 6\n1 2\n1 3\n1 5\n2 3\n2 4\n3 4\n6 10\n1 2\n1 3\n1 5\n2 3\n2 4\n2 5\n2 6\n3 5\n3 6\n4 6", "BWBW\nBBWWB\nBWBWBW"], ["1\n4 3\n1 2\n1 3\n2 3", "-1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "Special Judge", "O2优化", "深度优先搜索 DFS", "拓扑排序", "Tarjan", "双连通分量", "构造", "洛谷月赛", "圆方树"], "title": "「LAOI-6」Yet Another Graph Coloration Problem", "background": "", "description": "小 R 有一张 $n$ 个节点和 $m$ 条的边简单无向图，节点的编号依次为 $1 \\sim n$。她想要为图中的每个节点分配黑色或白色的颜色，使得：\n\n- 有至少 $1$ 个黑色节点；\n- 有至少 $1$ 个白色节点；\n- 对于任何一对点对 $(u, v)$，只要 $u$ 和 $v$ 的颜色不同，就存在至少 $2$ 条从 $u$ 到 $v$ 的不同的简单路径。\n\t- 简单路径是图上指不重复经过同一点的路径。\n\t- 若两条简单路径不同，要么其长度不同，要么至少存在一个正整数 $i$ 使两条路径经过的第 $i$ 个点不同。\n\n或者，报告解不存在。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, m$，表示图的节点数和边数。\n- 接下来 $m$ 行，每行两个整数 $u, v$，表示有一条 $u, v$ 之间的边。\n\n保证给出的图无重边、无自环。", "outputFormat": "对于每组数据：\n\n- 若有解，输出一行长为 $n$ 的字符串，第 $i$ 个字符为 `B` 表示 $i$ 号节点为黑色，为 `W` 表示 $i$ 号节点为白色；\n- 若无解，仅输出一行一个整数 $-1$。\n\n如果有多种合法的解，你只需要输出任意一种即可。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 0（15 pts）：$\\sum 2^n \\leq 2^{16}$。\n- Subtask 1（25 pts）：$n \\leq 3\\times 10^3$，$m \\leq 3\\times 10^3$，$\\sum n \\leq 10^4$，$\\sum m \\leq 2\\times 10^4$。\n- Subtask 2（5 pts）：保证图不连通。\n- Subtask 3（10 pts）：保证每个点的度数均为 $2$。\n- Subtask 4（20 pts）：保证 $n = m$。\n- Subtask 5（25 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^5$，$2 \\leq n \\leq 2 \\times 10^5$，$0 \\leq m \\leq 2 \\times 10^5$，$\\sum n \\leq 2\\times 10^6$，$\\sum m \\leq 2\\times 10^6$，保证给出的图无重边、无自环。", "locale": "zh-CN", "translations": {"en": {"title": "「LAOI-6」Yet Another Graph Coloration Problem", "background": "", "description": "Little R has a simple undirected graph with $n$ nodes and $m$ edges, in which the nodes are numbered $1 \\sim n$. She wants to assign a black or white color to each node in the graph, so that:\n\n- There is at least one black node.\n- There is at least one white node.\n- For each pair of nodes $(u, v)$, if the color of nodes $u$ and $v$ are different, there are at least two different simple paths from $u$ to $v$.\n   - A simple path is a path that does not go through the same node repeatedly on the graph.\n   - Two simple paths are considered different, if and only if, either their lengths are different, or there exists at least one positive integer $i$ such that the $i$-th node that the two paths pass through are different.\n\nAlternatively, report that there is no solution.", "inputFormat": "**Each test contains multiple testcases.**\n\nThe first line of the input contains an integer $T$ — the number of test cases. The description of test cases follows.\n\n- The first line of each test case contains two integers $n, m$ — the number of nodes and edges.\n- Then, $m$ lines follow, each line contains two integers $u, v$, describing the edges.\n\nIt is guaranteed that there are no multiple edges or self-loops in the graph.", "outputFormat": "For each test case:\n\n- If there exists a way to assign the colors, output a string of length $n$ consisting of characters `BW` only, where the $i$-th node is black if the $i$-th character is `B`, and white if it is `W`;\n- If there is no solution, output a single line containing an integer $-1$.", "hint": "**Subtasks are used in this problem**.\n\n- Subtask 0 (15 pts):&emsp;$\\sum 2^n \\leq 2^{16}$.\n- Subtask 1 (25 pts):&emsp;$n \\leq 3\\times 10^3$, $m \\leq 3\\times 10^3$, $\\sum n \\leq 10^4$, $\\sum m \\leq 2\\times 10^4$.  \n- Subtask 2 (5 pts):&emsp;It is guaranteed that the given graph is not connected.\n- Subtask 3 (10 pts):&emsp;It is guaranteed that the degree of each node is $2$.\n- Subtask 4 (20 pts):&emsp;It is guaranteed that $n = m$.\n- Subtask 5 (25 pts):&emsp;No additional constraint.\n\nFor all tests, $1 \\leq T \\leq 10^5$, $2 \\leq n \\leq 2 \\times 10^5$, $0 \\leq m \\leq 2 \\times 10^5$. It is guaranteed that $\\sum n \\leq 2\\times 10^6$, $\\sum m \\leq 2\\times 10^6$, and there are no multiple edges or self-loops in the graph.", "locale": "en"}, "zh-CN": {"title": "「LAOI-6」Yet Another Graph Coloration Problem", "background": "", "description": "小 R 有一张 $n$ 个节点和 $m$ 条的边简单无向图，节点的编号依次为 $1 \\sim n$。她想要为图中的每个节点分配黑色或白色的颜色，使得：\n\n- 有至少 $1$ 个黑色节点；\n- 有至少 $1$ 个白色节点；\n- 对于任何一对点对 $(u, v)$，只要 $u$ 和 $v$ 的颜色不同，就存在至少 $2$ 条从 $u$ 到 $v$ 的不同的简单路径。\n\t- 简单路径是图上指不重复经过同一点的路径。\n\t- 若两条简单路径不同，要么其长度不同，要么至少存在一个正整数 $i$ 使两条路径经过的第 $i$ 个点不同。\n\n或者，报告解不存在。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, m$，表示图的节点数和边数。\n- 接下来 $m$ 行，每行两个整数 $u, v$，表示有一条 $u, v$ 之间的边。\n\n保证给出的图无重边、无自环。", "outputFormat": "对于每组数据：\n\n- 若有解，输出一行长为 $n$ 的字符串，第 $i$ 个字符为 `B` 表示 $i$ 号节点为黑色，为 `W` 表示 $i$ 号节点为白色；\n- 若无解，仅输出一行一个整数 $-1$。\n\n如果有多种合法的解，你只需要输出任意一种即可。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 0（15 pts）：$\\sum 2^n \\leq 2^{16}$。\n- Subtask 1（25 pts）：$n \\leq 3\\times 10^3$，$m \\leq 3\\times 10^3$，$\\sum n \\leq 10^4$，$\\sum m \\leq 2\\times 10^4$。\n- Subtask 2（5 pts）：保证图不连通。\n- Subtask 3（10 pts）：保证每个点的度数均为 $2$。\n- Subtask 4（20 pts）：保证 $n = m$。\n- Subtask 5（25 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^5$，$2 \\leq n \\leq 2 \\times 10^5$，$0 \\leq m \\leq 2 \\times 10^5$，$\\sum n \\leq 2\\times 10^6$，$\\sum m \\leq 2\\times 10^6$，保证给出的图无重边、无自环。", "locale": "zh-CN"}}}
{"pid": "P11023", "type": "P", "difficulty": 6, "samples": [["6 4\n0 0\n9 0\n2 8\n6 5\n2 -7\n8 -7", "67.5"], ["5 3\n0 0\n10 0\n5 0\n5 5\n5 -5", "25"], ["8 5\n0 0\n15 0\n2 -2\n4 12\n10 -14\n6 -12\n2 -10\n13 10", "238"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "斜率优化", "四边形不等式", "凸包", "COTS（克罗地亚）"], "title": "[COTS 2020] 王国 Kraljevstvo", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定二维平面上的 $N$ 个点。选择 $K$ 个点，最大化这 $K$ 个点的凸包面积。\n\n此外，要求必须选择平面上 $x$ 坐标最小/最大的两个点。保证这两个点所在的与 $y$ 轴平行的直线上没有其他点，且这两个点的 $y$ 坐标为 $0$。\n\n只需要输出最大的面积。\n", "inputFormat": "\n第一行，两个正整数 $N,K$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n", "outputFormat": "\n输出一行一个实数，表示凸包的最大面积。\n\n输出不应有多余的前导零或后导零。", "hint": "####\n\n- 样例 $1$ 解释：选择 $(0, 0), (2, −7),(2, 8) , (9, 0) $ 即可。\n- 样例 $2$ 解释：选择 $(0, 0), (10, 0) ,\n(5, −5) $ 即可。\n\n亦可参阅下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jp2ibsfe.png)\n\n\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $3\\le K\\le N\\le 3\\, 000$；\n- $|x_i|,|y_i|\\le 10^9$；\n- 给出的点不重合；\n- $x$ 坐标最小/最大的点唯一，且对应的点的 $y$ 坐标为 $0$。\n\n\n| 子任务编号 | $N\\le $ | 得分 |  \n| :--: | :--: | :--: |\n| $ 1 $    | $20$ |$ 11 $   |  \n| $ 2 $    | $100$ | $ 25 $   |  \n| $ 3 $    | $500$ | $ 15 $   |  \n| $ 4 $    | $3\\, 000$ | $ 49 $   |  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 王国 Kraljevstvo", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T1。$\\texttt{1s,0.5G}$。\n", "description": "\n给定二维平面上的 $N$ 个点。选择 $K$ 个点，最大化这 $K$ 个点的凸包面积。\n\n此外，要求必须选择平面上 $x$ 坐标最小/最大的两个点。保证这两个点所在的与 $y$ 轴平行的直线上没有其他点，且这两个点的 $y$ 坐标为 $0$。\n\n只需要输出最大的面积。\n", "inputFormat": "\n第一行，两个正整数 $N,K$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述一个点。\n", "outputFormat": "\n输出一行一个实数，表示凸包的最大面积。\n\n输出不应有多余的前导零或后导零。", "hint": "####\n\n- 样例 $1$ 解释：选择 $(0, 0), (2, −7),(2, 8) , (9, 0) $ 即可。\n- 样例 $2$ 解释：选择 $(0, 0), (10, 0) ,\n(5, −5) $ 即可。\n\n亦可参阅下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jp2ibsfe.png)\n\n\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证：\n\n- $3\\le K\\le N\\le 3\\, 000$；\n- $|x_i|,|y_i|\\le 10^9$；\n- 给出的点不重合；\n- $x$ 坐标最小/最大的点唯一，且对应的点的 $y$ 坐标为 $0$。\n\n\n| 子任务编号 | $N\\le $ | 得分 |  \n| :--: | :--: | :--: |\n| $ 1 $    | $20$ |$ 11 $   |  \n| $ 2 $    | $100$ | $ 25 $   |  \n| $ 3 $    | $500$ | $ 15 $   |  \n| $ 4 $    | $3\\, 000$ | $ 49 $   |  ", "locale": "zh-CN"}}}
{"pid": "P11024", "type": "P", "difficulty": 6, "samples": [["6 5\n3 5 5\n1 1 6\n1 3 2\n1 4 7\n4 6 6\n6 2 5 5 5 6", "DA\n4 5 3 1 2\n"], ["14 6\n6 9 4\n12 13 6\n2 3 5\n1 14 3\n5 6 9\n9 12 8\n3 5 5 3 9 4 4 4 8 8 8 6 6 3", "DA\n4 5 1 6 2 3"], ["15 5\n7 8 3\n10 14 5\n4 7 2\n3 12 1\n5 9 4\n0 0 1 2 4 4 3 3 4 5 1 1 5 5 0", "NE"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "线段树", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 定序 Redoslijed", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T2。$\\texttt{4s,0.5G}$。\n\n鸣谢：SPJ by @[mygr](https://www.luogu.com.cn/user/739552)", "description": "在一块长 $N\\,\\mathrm{m}$ 的木板上画画。木板被从左往右划分成 $N$ 个格子，每个格子长 $1\\,\\mathrm{m}$。\n\n现在已知在木板上涂了 $M$ 笔，第 $i$ 笔将第 $l_i\\sim r_i$ 个格子涂成颜色 $c_i$。\n\n给定最后涂色后木板的状态，试构造一种操作顺序使得一次操作后木板的状态为给定状态，或报告无解。\n", "inputFormat": "第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个整数 $l_i,r_i,c_i$，描述一个涂色操作。\n\n接下来一行，$N$ 个整数，第 $i$ 个整数表示第 $i$ 个格子最后的颜色 $b_i$。**特别地，若 $b_i=0$，代表 $b_i$ 未被着色。**", "outputFormat": "如果无解，输出 $\\texttt{NE}$（克罗地亚语「否」）。\n\n否则第一行输出 $\\texttt{DA}$（克罗地亚语「是」）；第二行输出一个 $1\\sim M$ 的排列表示涂色顺序。\n\n若有多解，任意均可。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $1\\le l_i\\le r_i\\le N$；\n- $1\\le c_i\\le 5\\times 10^5$；\n- $0\\le b_i\\le 5\\times 10^5$。\n\n\n| 子任务编号 | $N\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $9$ |  |$ 5 $   | \n| $ 2 $    | $5\\,000$ | A |$ 10 $   |  \n| $ 3 $    | $5\\times 10^5$ | A |$ 25 $   |  \n| $ 4 $    | $5\\, 000$ || $ 12 $   |\n| $ 5 $    | $5\\times 10^5$ | B| $ 16 $   |\n| $ 6 $    | $5\\times 10^5$ || $ 32 $   |\n\n- 特殊性质 A：$c_i$ 两两不同。\n- 特殊性质 B：$1\\le c_i\\le 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 定序 Redoslijed", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T2。$\\texttt{4s,0.5G}$。\n\n鸣谢：SPJ by @[mygr](https://www.luogu.com.cn/user/739552)", "description": "在一块长 $N\\,\\mathrm{m}$ 的木板上画画。木板被从左往右划分成 $N$ 个格子，每个格子长 $1\\,\\mathrm{m}$。\n\n现在已知在木板上涂了 $M$ 笔，第 $i$ 笔将第 $l_i\\sim r_i$ 个格子涂成颜色 $c_i$。\n\n给定最后涂色后木板的状态，试构造一种操作顺序使得一次操作后木板的状态为给定状态，或报告无解。\n", "inputFormat": "第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个整数 $l_i,r_i,c_i$，描述一个涂色操作。\n\n接下来一行，$N$ 个整数，第 $i$ 个整数表示第 $i$ 个格子最后的颜色 $b_i$。**特别地，若 $b_i=0$，代表 $b_i$ 未被着色。**", "outputFormat": "如果无解，输出 $\\texttt{NE}$（克罗地亚语「否」）。\n\n否则第一行输出 $\\texttt{DA}$（克罗地亚语「是」）；第二行输出一个 $1\\sim M$ 的排列表示涂色顺序。\n\n若有多解，任意均可。", "hint": "\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $1\\le l_i\\le r_i\\le N$；\n- $1\\le c_i\\le 5\\times 10^5$；\n- $0\\le b_i\\le 5\\times 10^5$。\n\n\n| 子任务编号 | $N\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $9$ |  |$ 5 $   | \n| $ 2 $    | $5\\,000$ | A |$ 10 $   |  \n| $ 3 $    | $5\\times 10^5$ | A |$ 25 $   |  \n| $ 4 $    | $5\\, 000$ || $ 12 $   |\n| $ 5 $    | $5\\times 10^5$ | B| $ 16 $   |\n| $ 6 $    | $5\\times 10^5$ || $ 32 $   |\n\n- 特殊性质 A：$c_i$ 两两不同。\n- 特殊性质 B：$1\\le c_i\\le 5$。", "locale": "zh-CN"}}}
{"pid": "P11025", "type": "P", "difficulty": 6, "samples": [["2 2", "o--o  o\n|     |\no  o--o\n|     |\no--o--o"], ["2 2", "o--o--o\n|\no  o--o\n|     |\no--o--o"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 辣椒 Sadnice", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T3。$\\texttt{3s,0.5G}$。", "description": "花园里种了辣椒。花园可以被描述为一张 $(N+1)\\times (M+1)$ 的网格图，其中辣椒被种在格点上。她还用 $[(N+1)\\times (M+1)-1]$ 条绳索连接相邻的格点，使得任意两株辣椒都能通过绳索互相到达。换句话说，绳索构成了这个网格图的生成树上的边。\n\n定义两棵辣椒**连通**，当且仅当它们通过绳索直接或间接相连。\n\n晚上有人要来搞破坏。破坏者会在水平方向或者竖直方向划一刀，将划过的绳索全部切断。切断后，辣椒植株会被分成几个连通块。**破坏者会让连通块的数量尽量多。**\n\n怎么安排绳索，才能使得被切断后连通块的数量最小？", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "输出 $(2N+1)$ 行，每行 $(3M+1)$ 个字符。\n\n其中，第 $(2i-1)$ 行的第 $(3j-2)$ 个字符代表点 $(i,j)$（第 $i$ 行第 $j$ 列的植株），用 `o`（ASCII 111）表示。\n\n对于同一行的两个点 $(i,j),(i,j+1)$，若有边，则用 `--`（ASCII 45）填充它们之间的两个空格；否则不填充。\n\n对于同一列的两个点 $(i,j),(i+1,j)$，若有边，则用 `|`（ASCII 124）填充它们之间的一个空格；否则不填充。\n\n未填充的区域均用空格补齐。不要输出多余的空格和空行。\n\n可参阅样例输出。", "hint": "\n#### 评分方式\n\n若你输出的解是最优解，得该测试点的满分。\n\n否则，按照如下方式计算得分倍数：\n\n$$K=0.75\\times \\max\\left\\{\\left(\\frac{A-1}{B-1}\\right)^4,1-\\left(1-\\frac{1}{(B-A)^2}\\right)^6\\right\\}$$\n\n其中 $A$ 为最优的答案，$B$ 为你构造方案的答案。\n\n你将获得 $K$ 倍测试点得分的分数。子任务得分为子任务内测试点得分最小值。\n\n例如，样例 $1$ 输出得满分。样例 $2$ 输出得 $75\\%$ 的分数。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le M\\le 1\\, 000$。\n\n\n| 子任务编号 | $N,M\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $1\\,000$ | A |$ 15 $   | \n| $ 2 $    | $1\\,000$ | B |$ 15 $   |  \n| $ 3 $    | $3$ |  |$ 5 $   |  \n| $ 4 $    | $10$ || $ 10 $   |\n| $ 5 $    | $100$ | | $ 20 $   |\n| $ 6 $    | $1\\, 000$ || $ 35 $   |\n\n- 特殊性质 A：$N=M$。\n- 特殊性质 B：$2N=M$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 辣椒 Sadnice", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D1T3。$\\texttt{3s,0.5G}$。", "description": "花园里种了辣椒。花园可以被描述为一张 $(N+1)\\times (M+1)$ 的网格图，其中辣椒被种在格点上。她还用 $[(N+1)\\times (M+1)-1]$ 条绳索连接相邻的格点，使得任意两株辣椒都能通过绳索互相到达。换句话说，绳索构成了这个网格图的生成树上的边。\n\n定义两棵辣椒**连通**，当且仅当它们通过绳索直接或间接相连。\n\n晚上有人要来搞破坏。破坏者会在水平方向或者竖直方向划一刀，将划过的绳索全部切断。切断后，辣椒植株会被分成几个连通块。**破坏者会让连通块的数量尽量多。**\n\n怎么安排绳索，才能使得被切断后连通块的数量最小？", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "输出 $(2N+1)$ 行，每行 $(3M+1)$ 个字符。\n\n其中，第 $(2i-1)$ 行的第 $(3j-2)$ 个字符代表点 $(i,j)$（第 $i$ 行第 $j$ 列的植株），用 `o`（ASCII 111）表示。\n\n对于同一行的两个点 $(i,j),(i,j+1)$，若有边，则用 `--`（ASCII 45）填充它们之间的两个空格；否则不填充。\n\n对于同一列的两个点 $(i,j),(i+1,j)$，若有边，则用 `|`（ASCII 124）填充它们之间的一个空格；否则不填充。\n\n未填充的区域均用空格补齐。不要输出多余的空格和空行。\n\n可参阅样例输出。", "hint": "\n#### 评分方式\n\n若你输出的解是最优解，得该测试点的满分。\n\n否则，按照如下方式计算得分倍数：\n\n$$K=0.75\\times \\max\\left\\{\\left(\\frac{A-1}{B-1}\\right)^4,1-\\left(1-\\frac{1}{(B-A)^2}\\right)^6\\right\\}$$\n\n其中 $A$ 为最优的答案，$B$ 为你构造方案的答案。\n\n你将获得 $K$ 倍测试点得分的分数。子任务得分为子任务内测试点得分最小值。\n\n例如，样例 $1$ 输出得满分。样例 $2$ 输出得 $75\\%$ 的分数。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le M\\le 1\\, 000$。\n\n\n| 子任务编号 | $N,M\\le $ | 特殊性质 | 得分 |  \n| :--: | :--: | :--: | :--: |\n| $ 1 $    | $1\\,000$ | A |$ 15 $   | \n| $ 2 $    | $1\\,000$ | B |$ 15 $   |  \n| $ 3 $    | $3$ |  |$ 5 $   |  \n| $ 4 $    | $10$ || $ 10 $   |\n| $ 5 $    | $100$ | | $ 20 $   |\n| $ 6 $    | $1\\, 000$ || $ 35 $   |\n\n- 特殊性质 A：$N=M$。\n- 特殊性质 B：$2N=M$。\n", "locale": "zh-CN"}}}
{"pid": "P11026", "type": "P", "difficulty": 6, "samples": [["6 6\n3 4\n1 2\n2 3\n5 4\n4 1\n4 6", "0\n1"], ["4 2\n1 4\n2 3", "2\n4"], ["8 9\n1 4\n2 3\n6 7\n8 5\n2 4\n7 8\n5 6\n6 8\n4 3", "1\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 抗疫 Autoritet", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "有 $N$ 个国家，$M$ 条双向航线连接不同的国家。需要注意的是，两个国家之间可能有多条航线连接。\n\n疫情当下，欲举全球之力共同抗疫，需要将世界联结。定义世界是**联结的**，当且仅当任意两个国家都通过航线直接或间接相连。\n\n\n\n我们记 $V=\\{1,2,\\cdots,N\\}$。在一次操作中：\n\n- 任意选择 $u\\in V$；\n- 令集合 $S$ 为国家 $u$ 通过**恰好一条**航线能够到达的国家的集合；令集合 $T=V\\backslash \\{u\\}\\backslash S$。\n- $\\forall v\\in S$，将连接 $u,v$ 的航线删除；$\\forall w\\in T$，添加连接 $u,w$ 的航线。\n\n可以证明，添加足够多的航线后，一定能够使世界联结。\n\n欲通过最少的操作次数使世界联结。\n\n求出：\n- 最少的操作次数 $k$；\n- 在最小化操作次数的前提下，不同的操作序列数量。只需要求出对 $(10^9+7)$ 取模后的结果。\n\n定义两个操作序列是不同的，当且仅当存在 $i\\in [1,k]$，使得在这两个操作序列中第 $i$ 次选择的国家 $u$ 不同。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，第 $i$ 行两个正整数 $a_i,b_i$，描述一条航线 $(a_i,b_i)$。\n", "outputFormat": "\n输出两行，每行一个整数，表示对应的答案。\n\n其中第二问的答案需要对 $(10^9+7)$ 取模。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：存在不需要执行任何操作的情况。\n- 样例 $2$ 解释：所有的操作序列有 $[1,4],[4,1],[2,3],[3,2]$。\n\n#### 评分方式\n\n如果回答对了第一问，可以获得 $15\\%$ 的分数。\n\n如果不打算回答第二问，也要任意输出一个 $\\in [0,10^9+7)$ 的整数，否则不保证得分符合预期。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $a_i\\neq b_i$。\n\n\n| 子任务编号 | $N,M\\le $  | 得分 |  \n| :--: | :--: | :--: |  \n| $ 1 $    | $18$ |  $ 5 $   |  \n| $ 2 $    | $300$ |$ 9 $   |  \n| $ 3 $    | $3\\, 000$ |  $ 16 $   |  \n| $ 4 $    | $5\\times 10^5$ | $ 70 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 抗疫 Autoritet", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T1。$\\texttt{2s,0.5G}$。\n", "description": "有 $N$ 个国家，$M$ 条双向航线连接不同的国家。需要注意的是，两个国家之间可能有多条航线连接。\n\n疫情当下，欲举全球之力共同抗疫，需要将世界联结。定义世界是**联结的**，当且仅当任意两个国家都通过航线直接或间接相连。\n\n\n\n我们记 $V=\\{1,2,\\cdots,N\\}$。在一次操作中：\n\n- 任意选择 $u\\in V$；\n- 令集合 $S$ 为国家 $u$ 通过**恰好一条**航线能够到达的国家的集合；令集合 $T=V\\backslash \\{u\\}\\backslash S$。\n- $\\forall v\\in S$，将连接 $u,v$ 的航线删除；$\\forall w\\in T$，添加连接 $u,w$ 的航线。\n\n可以证明，添加足够多的航线后，一定能够使世界联结。\n\n欲通过最少的操作次数使世界联结。\n\n求出：\n- 最少的操作次数 $k$；\n- 在最小化操作次数的前提下，不同的操作序列数量。只需要求出对 $(10^9+7)$ 取模后的结果。\n\n定义两个操作序列是不同的，当且仅当存在 $i\\in [1,k]$，使得在这两个操作序列中第 $i$ 次选择的国家 $u$ 不同。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $M$ 行，第 $i$ 行两个正整数 $a_i,b_i$，描述一条航线 $(a_i,b_i)$。\n", "outputFormat": "\n输出两行，每行一个整数，表示对应的答案。\n\n其中第二问的答案需要对 $(10^9+7)$ 取模。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：存在不需要执行任何操作的情况。\n- 样例 $2$ 解释：所有的操作序列有 $[1,4],[4,1],[2,3],[3,2]$。\n\n#### 评分方式\n\n如果回答对了第一问，可以获得 $15\\%$ 的分数。\n\n如果不打算回答第二问，也要任意输出一个 $\\in [0,10^9+7)$ 的整数，否则不保证得分符合预期。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 5\\times 10^5$；\n- $a_i\\neq b_i$。\n\n\n| 子任务编号 | $N,M\\le $  | 得分 |  \n| :--: | :--: | :--: |  \n| $ 1 $    | $18$ |  $ 5 $   |  \n| $ 2 $    | $300$ |$ 9 $   |  \n| $ 3 $    | $3\\, 000$ |  $ 16 $   |  \n| $ 4 $    | $5\\times 10^5$ | $ 70 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11027", "type": "P", "difficulty": 6, "samples": [["2 1\n1 3\n2 3\nPOREDAK", "7\n1 2 1 2"], ["1 4\n4 3\nDOLAZI 3 8\nDOLAZI 5 2\nODLAZI 1\nODLAZI 3", "7\n14\n16\n13\n11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COTS（克罗地亚）"], "title": "[COTS 2020] 餐厅 Restoran", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T2。$\\texttt{2s,0.5G}$。\n\n", "description": "\n苏联餐厅前有 $N$ 个人在排队，按顺序标号 $1\\sim N$。\n\n餐厅内只有一种菜，同时也是招牌菜——煎蛋。餐厅内没有厨师，所以食物由客人自己烹饪。\n\n由于设备有限，**同一时刻最多有一个人可以烹饪，同一时刻最多有一个人可以用餐。** \n\n定义：「用餐总时间」为从第一个人开始准备食物，到最后一个人用完餐，需要的时间。\n\n烹饪和用餐不一定按顺序，先烹饪的客人可以后用餐。\n\n第 $i$ 个人的烹饪时间为 $a_i$，用餐时间为 $b_i$。你需要求出最优情况下，用餐总时间的最小值。\n\n\n\n此外，还有 $M$ 个事件：\n\n- $\\texttt{DOLAZI a b}$：新来了一位新客人，他的烹饪时间为 $a$，用餐时间为 $b$。设这是第 $i$ 位新来的客人，则标号为 $(N+i)$。\n- $\\texttt{ODLAZI x}$：第 $x$ 位客人离开队伍。\n- $\\texttt{POREDAK}$：客人很不耐烦，想要知道最优的策略，使得用餐总时间最短。\n\n对于前两个类型的事件，你需要求出这个事件结束后，用餐总时间的最小值；\n\n对于第三个类型的事件，你需要求出此时最佳的烹饪、用餐顺序。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $a_i,b_i$。\n\n接下来 $M$ 行，每行描述一个事件。\n\n数据保证事件合法，且每一时刻至少存在一名客人。\n", "outputFormat": "\n输出 $(M+1)$ 行。\n\n第一行，输出初始时用餐总时间的最小值。\n\n接下来 $M$ 行，对于第 $i$ 行：\n- 若第 $i$ 个事件为 $\\texttt{DOLAZI}$ 或 $\\texttt{ODLAZI}$ ，输出一个整数，表示这个事件结束后，用餐总时间的最小值；\n- 否则，设当前有 $k$ 个客人，输出 $2k$ 个整数，描述最优策略：前 $k$ 个整数表示烹饪的顺序，后 $k$ 个整数表示用餐的顺序。", "hint": "\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 2\\times 10^5$；\n- $1\\le a_i,b_i,a,b\\le 10^9$；\n- 事件合法，且每一时刻至少存在一名客人；\n- **$\\texttt{POREDAK}$ 事件最多只有 $\\bf 10$ 个。**\n\n\n| 子任务编号 | $N\\le $ | $M\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 1 $    |  A  | $ 5 $   |  \n| $ 2 $    | $20$ | $1$   |  A | $ 13 $   |  \n| $ 3 $    | $2\\times 10^5$ | $1$ | A  | $ 21 $   |  \n| $ 4 $    | $2\\times 10^5$ | $2\\times 10^5$  |  B | $ 29 $   |  \n| $ 5 $    | $2\\times 10^5$ | $2\\times 10^5$  |   | $ 32 $   |  \n\n- 特殊性质 A：只有 $\\texttt{POREDAK}$ 事件。\n- 特殊性质 B：没有 $\\texttt{POREDAK}$ 事件。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 餐厅 Restoran", "background": "译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T2。$\\texttt{2s,0.5G}$。\n\n", "description": "\n苏联餐厅前有 $N$ 个人在排队，按顺序标号 $1\\sim N$。\n\n餐厅内只有一种菜，同时也是招牌菜——煎蛋。餐厅内没有厨师，所以食物由客人自己烹饪。\n\n由于设备有限，**同一时刻最多有一个人可以烹饪，同一时刻最多有一个人可以用餐。** \n\n定义：「用餐总时间」为从第一个人开始准备食物，到最后一个人用完餐，需要的时间。\n\n烹饪和用餐不一定按顺序，先烹饪的客人可以后用餐。\n\n第 $i$ 个人的烹饪时间为 $a_i$，用餐时间为 $b_i$。你需要求出最优情况下，用餐总时间的最小值。\n\n\n\n此外，还有 $M$ 个事件：\n\n- $\\texttt{DOLAZI a b}$：新来了一位新客人，他的烹饪时间为 $a$，用餐时间为 $b$。设这是第 $i$ 位新来的客人，则标号为 $(N+i)$。\n- $\\texttt{ODLAZI x}$：第 $x$ 位客人离开队伍。\n- $\\texttt{POREDAK}$：客人很不耐烦，想要知道最优的策略，使得用餐总时间最短。\n\n对于前两个类型的事件，你需要求出这个事件结束后，用餐总时间的最小值；\n\n对于第三个类型的事件，你需要求出此时最佳的烹饪、用餐顺序。", "inputFormat": "\n第一行，两个正整数 $N,M$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $a_i,b_i$。\n\n接下来 $M$ 行，每行描述一个事件。\n\n数据保证事件合法，且每一时刻至少存在一名客人。\n", "outputFormat": "\n输出 $(M+1)$ 行。\n\n第一行，输出初始时用餐总时间的最小值。\n\n接下来 $M$ 行，对于第 $i$ 行：\n- 若第 $i$ 个事件为 $\\texttt{DOLAZI}$ 或 $\\texttt{ODLAZI}$ ，输出一个整数，表示这个事件结束后，用餐总时间的最小值；\n- 否则，设当前有 $k$ 个客人，输出 $2k$ 个整数，描述最优策略：前 $k$ 个整数表示烹饪的顺序，后 $k$ 个整数表示用餐的顺序。", "hint": "\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le N,M\\le 2\\times 10^5$；\n- $1\\le a_i,b_i,a,b\\le 10^9$；\n- 事件合法，且每一时刻至少存在一名客人；\n- **$\\texttt{POREDAK}$ 事件最多只有 $\\bf 10$ 个。**\n\n\n| 子任务编号 | $N\\le $ | $M\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 1 $    |  A  | $ 5 $   |  \n| $ 2 $    | $20$ | $1$   |  A | $ 13 $   |  \n| $ 3 $    | $2\\times 10^5$ | $1$ | A  | $ 21 $   |  \n| $ 4 $    | $2\\times 10^5$ | $2\\times 10^5$  |  B | $ 29 $   |  \n| $ 5 $    | $2\\times 10^5$ | $2\\times 10^5$  |   | $ 32 $   |  \n\n- 特殊性质 A：只有 $\\texttt{POREDAK}$ 事件。\n- 特殊性质 B：没有 $\\texttt{POREDAK}$ 事件。\n", "locale": "zh-CN"}}}
{"pid": "P11028", "type": "P", "difficulty": 6, "samples": [["1 3\n2 3 1", "333333337"], ["2 5\n4 2 1 3 5\n2 5 4 3 1", "5"], ["1 9\n3 4 5 6 7 8 1 9 2", "300000017"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "群论", "置换", "COTS（克罗地亚）"], "title": "[COTS 2020] 龙猫 Totoro", "background": "\n译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T3。$\\texttt{1s,0.5G}$。", "description": "给定 $K$ 个 $1\\sim N$ 的排列 $\\pi_1,\\pi_2,\\cdots,\\pi_K$。\n\n求出排列群 $G(S,\\circ)$ 中的排列的逆序对期望值。其中二元运算 $\\circ$ 为**置换**，$\\forall 1\\le i\\le K$，都有 $\\pi_i\\in S$。\n\n具体地说，我们定义 $(\\pi\\circ \\tau)(i)=\\pi(\\tau(i))$。\n\n群 $G(S,\\circ)$ 是满足如下性质的代数结构：\n\n- 封闭性：$\\forall a,b\\in S$，都有 $a\\circ b\\in S$；\n- 结合律：$\\forall a,b,c\\in S$，都有 $(a\\circ b)\\circ c=a\\circ (b\\circ c)$；\n- 幺元：存在 $e\\in S$，对于 $\\forall a\\in S$，都有 $a\\circ e=e\\circ a=a$；\n- 逆元：$\\forall a\\in S$，存在 $b\\in S$，使得 $a\\circ b=b\\circ a=e$。\n\n\n定义 $\\mathcal{L}(\\pi)$ 为 $\\pi$ 的逆序对数，即 $\\displaystyle \\mathcal{L}(\\pi)=\\sum_{1\\le i\\lt j\\le n}[\\pi(i)\\gt \\pi(j)]$，求出 $\\displaystyle \\frac{1}{|S|}\\sum_{\\pi \\in S} \\mathcal{L}(\\pi)$。\n\n答案对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，两个正整数 $K,N$。\n\n接下来 $K$ 行，第 $i$ 行 $N$ 个正整数描述 $\\pi_i$。\n", "outputFormat": "\n输出一行一个整数，即答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：$S=\\{[2,3,1],[3,1,2],[1,2,3]\\}$。逆序对期望值为 $\\frac{1+2+0}{3}=\\frac{4}{3}$。\n- 样例 $2$ 解释：可以证明 $|S|=5!$，即 $S$ 中包含了 $1\\sim 5$ 的所有排列。\n- 样例 $3$ 解释：此时 $|S|=20$，答案真实值为 $\\frac{149}{10}$。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le K\\le 10$；\n- $1\\le N\\le 2\\, 500$；\n- $\\pi_i$ 是 $1\\sim N$ 的排列。\n\n\n| 子任务编号 | $N\\le $ | $K\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 10 $    |  无  | $ 7 $   |  \n| $ 2 $    | $2\\,500$ | $1$   |  有 | $ 8 $   |  \n| $ 3 $    | $2\\, 500$ | $1$ | 无  | $ 25 $   |  \n| $ 4 $    | $2\\, 500$ | $10$  |  无 | $ 60 $   |  \n\n特殊性质：$\\forall 1\\le i\\le K$，存在 $1\\sim N$ 的排列 $a$，使得 $\\pi_i(a_1)=a_2,\\pi_{i}(a_2)=a_3,\\cdots,\\pi_i(a_n)=a_1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2020] 龙猫 Totoro", "background": "\n译自 [Izborne Pripreme 2020 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2020/) D2T3。$\\texttt{1s,0.5G}$。", "description": "给定 $K$ 个 $1\\sim N$ 的排列 $\\pi_1,\\pi_2,\\cdots,\\pi_K$。\n\n求出排列群 $G(S,\\circ)$ 中的排列的逆序对期望值。其中二元运算 $\\circ$ 为**置换**，$\\forall 1\\le i\\le K$，都有 $\\pi_i\\in S$。\n\n具体地说，我们定义 $(\\pi\\circ \\tau)(i)=\\pi(\\tau(i))$。\n\n群 $G(S,\\circ)$ 是满足如下性质的代数结构：\n\n- 封闭性：$\\forall a,b\\in S$，都有 $a\\circ b\\in S$；\n- 结合律：$\\forall a,b,c\\in S$，都有 $(a\\circ b)\\circ c=a\\circ (b\\circ c)$；\n- 幺元：存在 $e\\in S$，对于 $\\forall a\\in S$，都有 $a\\circ e=e\\circ a=a$；\n- 逆元：$\\forall a\\in S$，存在 $b\\in S$，使得 $a\\circ b=b\\circ a=e$。\n\n\n定义 $\\mathcal{L}(\\pi)$ 为 $\\pi$ 的逆序对数，即 $\\displaystyle \\mathcal{L}(\\pi)=\\sum_{1\\le i\\lt j\\le n}[\\pi(i)\\gt \\pi(j)]$，求出 $\\displaystyle \\frac{1}{|S|}\\sum_{\\pi \\in S} \\mathcal{L}(\\pi)$。\n\n答案对 $(10^9+7)$ 取模。", "inputFormat": "\n第一行，两个正整数 $K,N$。\n\n接下来 $K$ 行，第 $i$ 行 $N$ 个正整数描述 $\\pi_i$。\n", "outputFormat": "\n输出一行一个整数，即答案对 $(10^9+7)$ 取模后的结果。", "hint": "\n#### 样例解释\n\n- 样例 $1$ 解释：$S=\\{[2,3,1],[3,1,2],[1,2,3]\\}$。逆序对期望值为 $\\frac{1+2+0}{3}=\\frac{4}{3}$。\n- 样例 $2$ 解释：可以证明 $|S|=5!$，即 $S$ 中包含了 $1\\sim 5$ 的所有排列。\n- 样例 $3$ 解释：此时 $|S|=20$，答案真实值为 $\\frac{149}{10}$。\n\n\n#### 数据范围\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $1\\le K\\le 10$；\n- $1\\le N\\le 2\\, 500$；\n- $\\pi_i$ 是 $1\\sim N$ 的排列。\n\n\n| 子任务编号 | $N\\le $ | $K\\le $ |  特殊性质   | 得分 |  \n| :--: | :--: | :--: | :--: | :--: |  \n| $ 1 $    | $9$ | $ 10 $    |  无  | $ 7 $   |  \n| $ 2 $    | $2\\,500$ | $1$   |  有 | $ 8 $   |  \n| $ 3 $    | $2\\, 500$ | $1$ | 无  | $ 25 $   |  \n| $ 4 $    | $2\\, 500$ | $10$  |  无 | $ 60 $   |  \n\n特殊性质：$\\forall 1\\le i\\le K$，存在 $1\\sim N$ 的排列 $a$，使得 $\\pi_i(a_1)=a_2,\\pi_{i}(a_2)=a_3,\\cdots,\\pi_i(a_n)=a_1$。", "locale": "zh-CN"}}}
{"pid": "P11029", "type": "P", "difficulty": 2, "samples": [["3", "1728"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化"], "title": "『DABOI Round 1』A Simple Problem", "background": "> 红题令人红温。", "description": "求 $\\prod \\limits_{i=1}^{n} \\prod\\limits_{j=1}^{i} \\prod \\limits_{k=1}^{j} k^k$ 对 $998244353$ 取模后的值。", "inputFormat": "输入共 $1$ 行 $1$ 个整数，表示 $n$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq5\\times10^2$；\n- 对于 $50\\%$ 的数据，$n\\leq5\\times10^3$;\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq1.8\\times10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』A Simple Problem", "background": "> 红题令人红温。", "description": "求 $\\prod \\limits_{i=1}^{n} \\prod\\limits_{j=1}^{i} \\prod \\limits_{k=1}^{j} k^k$ 对 $998244353$ 取模后的值。", "inputFormat": "输入共 $1$ 行 $1$ 个整数，表示 $n$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【数据范围】**\n\n- 对于 $20\\%$ 的数据，$n\\leq5\\times10^2$；\n- 对于 $50\\%$ 的数据，$n\\leq5\\times10^3$;\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq1.8\\times10^6$。", "locale": "zh-CN"}}}
{"pid": "P11030", "type": "P", "difficulty": 5, "samples": [["2\nstocyhorz\ncyh", "4"], ["4\nc\nccc", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "矩阵加速", "组合数学"], "title": "『DABOI Round 1』Blessings Repeated", "background": "@[cyh20100812](https://www.luogu.com.cn/user/1051692) 因其很有实力被尊称为圣母。\n\n> 圣母好闪，拜谢圣母！", "description": "圣母是一名辩论家，即 ENTP。\n\n她在进行一次辩论时的观点是字符串 $S$，她为了让对方信服她的观点她会强调 $k$ 次，所以她的辩词即为 $k$ 个字符串 $S$ 依次首尾相接。\n\n你作为反驳的人可能不能听清楚她说的所有话，所以你只能抓取关键词 $T$，你需要求出 $k$ 个首尾相接的 $S$ 中有多少个子序列（不一定连续）为 $T$，答案对 $998244353$ 取模。\n\n---\n\n**【形式化题意】**\n\n给定一个正整数 $k$ 和两个字符串 $S,T$。\n\n设字符串 $s$ 为 $k$ 个字符串 $S$ 首尾相接得到的字符串，$n=\\vert s \\vert , m=\\vert T \\vert$。\n\n设答案集合 $P=\\{ (i_0,i_1,\\dots,i_{m-1})  \\mid 0\\le i_0 < i_1 < \\dots < i_{m-1} < n, \\forall~0 \\le j < m, s_{i_j}=T_j \\}$，请求出 $\\vert P \\vert \\bmod 998244353$。", "inputFormat": "输入共 $3$ 行。\n\n第 $1$ 行 $1$ 个整数，表示 $k$。\n\n第 $2$ 行 $1$ 个字符串，表示 $S$。\n\n第 $3$ 行 $1$ 个字符串，表示 $T$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n将 $S$ 重复 $2$ 次得到 $\\texttt{stocyhorzstocyhorz}$。\n\n答案集合 $P=\\{(3,4,5),(3,4,14),(3,13,14),(12,13,14) \\}$，因此 $\\vert P\\vert=4$。\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$0<k\\le10^{18}$，$0 < \\vert S \\vert \\le 5 \\times 10^3$，$0 < \\vert T \\vert \\le 10$，字符串 $S,T$ 均由小写英文字母组成。\n\n| $\\text{Point}$ | $k\\le$ | $\\vert S\\vert\\le$ | $\\vert T\\vert\\le$ |\n| :-: | :-: | :-: | :-: |\n| $1\\sim2$        | $10^{18}$ | $5 \\times 10^3$     | $1$                 |\n| $3$          | $1$       | $5 \\times 10^3$     | $2$                 |\n| $4\\sim5$        | $100$     | $5 \\times 10 ^3$    | $2$                 |\n| $6\\sim7$        | $1$       | $50$                | $4$                 |\n| $8\\sim10$     | $10$      | $5 \\times 10^3$     | $10$                |\n| $11\\sim20$ | $10^{18}$ | $5 \\times 10^3$     | $10$                |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』Blessings Repeated", "background": "@[cyh20100812](https://www.luogu.com.cn/user/1051692) 因其很有实力被尊称为圣母。\n\n> 圣母好闪，拜谢圣母！", "description": "圣母是一名辩论家，即 ENTP。\n\n她在进行一次辩论时的观点是字符串 $S$，她为了让对方信服她的观点她会强调 $k$ 次，所以她的辩词即为 $k$ 个字符串 $S$ 依次首尾相接。\n\n你作为反驳的人可能不能听清楚她说的所有话，所以你只能抓取关键词 $T$，你需要求出 $k$ 个首尾相接的 $S$ 中有多少个子序列（不一定连续）为 $T$，答案对 $998244353$ 取模。\n\n---\n\n**【形式化题意】**\n\n给定一个正整数 $k$ 和两个字符串 $S,T$。\n\n设字符串 $s$ 为 $k$ 个字符串 $S$ 首尾相接得到的字符串，$n=\\vert s \\vert , m=\\vert T \\vert$。\n\n设答案集合 $P=\\{ (i_0,i_1,\\dots,i_{m-1})  \\mid 0\\le i_0 < i_1 < \\dots < i_{m-1} < n, \\forall~0 \\le j < m, s_{i_j}=T_j \\}$，请求出 $\\vert P \\vert \\bmod 998244353$。", "inputFormat": "输入共 $3$ 行。\n\n第 $1$ 行 $1$ 个整数，表示 $k$。\n\n第 $2$ 行 $1$ 个字符串，表示 $S$。\n\n第 $3$ 行 $1$ 个字符串，表示 $T$。", "outputFormat": "输出共 $1$ 行 $1$ 个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n将 $S$ 重复 $2$ 次得到 $\\texttt{stocyhorzstocyhorz}$。\n\n答案集合 $P=\\{(3,4,5),(3,4,14),(3,13,14),(12,13,14) \\}$，因此 $\\vert P\\vert=4$。\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$0<k\\le10^{18}$，$0 < \\vert S \\vert \\le 5 \\times 10^3$，$0 < \\vert T \\vert \\le 10$，字符串 $S,T$ 均由小写英文字母组成。\n\n| $\\text{Point}$ | $k\\le$ | $\\vert S\\vert\\le$ | $\\vert T\\vert\\le$ |\n| :-: | :-: | :-: | :-: |\n| $1\\sim2$        | $10^{18}$ | $5 \\times 10^3$     | $1$                 |\n| $3$          | $1$       | $5 \\times 10^3$     | $2$                 |\n| $4\\sim5$        | $100$     | $5 \\times 10 ^3$    | $2$                 |\n| $6\\sim7$        | $1$       | $50$                | $4$                 |\n| $8\\sim10$     | $10$      | $5 \\times 10^3$     | $10$                |\n| $11\\sim20$ | $10^{18}$ | $5 \\times 10^3$     | $10$                |", "locale": "zh-CN"}}}
{"pid": "P11031", "type": "P", "difficulty": 5, "samples": [["2\n3 3\n1 2\n2 3\n1 3\n3 2\n1 2\n2 3", "Yes\nNo"], ["1\n4 5\n1 2\n2 3\n3 4\n4 1\n1 3", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "『DABOI Round 1』Completely Unrelated", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpqb8n7w.png)", "description": "我们知道，在平面几何中，三角形是稳定的图形。\n\n小 L 在纸上画了一个图形，他告诉你了这个图形的点数以及哪两个点之间有连边。他想知道这个图形是否具有稳定性。\n\n我们称一个图形具有稳定性当且仅当：确定任意一条边，使其固定住不能移动，则其它的所有边、点都不能移动。注意这里移动仅限在平面内，即不能作轴对称变换。特殊的，一个点具有稳定性。\n\n例如，一条线段或一个三角形，都具有稳定性的，而四边形则不具有稳定性。\n\n请注意，你可以认为稳定性跟边的长度并没有什么关系。所以只要有一组边长使得这个图形稳定，它就是稳定的。而如果没有这样的一组边长满足条件，它就是不稳定的。", "inputFormat": "输入共若干行。\n\n第 $1$ 行 $1$ 个正整数，表示数据组数 $T$。\n\n接下来，对于每组数据，输入共 $m+1$ 行：\n\n- 第 $1$ 行 $2$ 个整数，表示顶点的数量 $n$ 和边的数量 $m$；\n- 第 $2$ 至 $m+1$ 行，每行 $2$ 个整数，分别表示一条边连接的两个顶点的编号。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据，输出共 $1$ 行 $1$ 个字符串，其中 $\\tt Yes$ 表示图形具有稳定性，反之 $\\tt No$ 表示图形不具有稳定性。特别的，若给出的信息无法构成图形，则输出 $\\tt No$。", "hint": "**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$n\\le50$，$m\\le2\\times10^3$；\n- 对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n\\le2\\times10^2$，$0\\le m\\le2\\times10^4$。保证无自环，但可能出现重边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』Completely Unrelated", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpqb8n7w.png)", "description": "我们知道，在平面几何中，三角形是稳定的图形。\n\n小 L 在纸上画了一个图形，他告诉你了这个图形的点数以及哪两个点之间有连边。他想知道这个图形是否具有稳定性。\n\n我们称一个图形具有稳定性当且仅当：确定任意一条边，使其固定住不能移动，则其它的所有边、点都不能移动。注意这里移动仅限在平面内，即不能作轴对称变换。特殊的，一个点具有稳定性。\n\n例如，一条线段或一个三角形，都具有稳定性的，而四边形则不具有稳定性。\n\n请注意，你可以认为稳定性跟边的长度并没有什么关系。所以只要有一组边长使得这个图形稳定，它就是稳定的。而如果没有这样的一组边长满足条件，它就是不稳定的。", "inputFormat": "输入共若干行。\n\n第 $1$ 行 $1$ 个正整数，表示数据组数 $T$。\n\n接下来，对于每组数据，输入共 $m+1$ 行：\n\n- 第 $1$ 行 $2$ 个整数，表示顶点的数量 $n$ 和边的数量 $m$；\n- 第 $2$ 至 $m+1$ 行，每行 $2$ 个整数，分别表示一条边连接的两个顶点的编号。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据，输出共 $1$ 行 $1$ 个字符串，其中 $\\tt Yes$ 表示图形具有稳定性，反之 $\\tt No$ 表示图形不具有稳定性。特别的，若给出的信息无法构成图形，则输出 $\\tt No$。", "hint": "**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$n\\le50$，$m\\le2\\times10^3$；\n- 对于 $100\\%$ 的数据，$1\\le T\\le10$，$1\\le n\\le2\\times10^2$，$0\\le m\\le2\\times10^4$。保证无自环，但可能出现重边。", "locale": "zh-CN"}}}
{"pid": "P11032", "type": "P", "difficulty": 4, "samples": [["6 1\n1 3\n1 5\n1 6\n2 5\n3 4\n998244353 998244353 998244353 998244353 998244353 998244353", "9 0 1 0 1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "树形 DP"], "title": "『DABOI Round 1』Develop a Tree", "background": "小 Z 看不惯树，所以他总想在树上随机添加一些边。他认为二分图是很和谐的，所以他想知道将一棵树变为二分图的方案数。你能否回答他的询问？", "description": "对于一颗无向有根树，定义 $f(i,k)$ 表示在以 $i$ 为根的子树中，在其内部连 $k$ 条边，使得这颗子树变为一个二分图的方案数。请注意，加边时允许与原树边重边，但任意两条新加的边都不能重合。\n\n给定一棵 $n$ 个点的无向有根树，根节点为 $1$ 号点。对于每个 $i\\in [1,n]$，求 $f(i,k)$ 对 $p_i$ 取模的值。", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行 $2$ 个整数，分别表示树的点数 $n$ 和参数 $k$。\n\n接下来，第 $2$ 至 $n$ 行，每行 $2$ 个正整数，分别表示一条边连接的两个点的编号 $u_i$ 与 $v_i$。\n\n第 $n+1$ 行 $n$ 个整数，分别表示每次询问时的模数 $p_i$。", "outputFormat": "输出共 $1$ 行 $n$ 个整数，分别表示每次询问的答案。", "hint": "**【样例 1 解释】**\n\n在这棵树上，连接 $(u,v)\\in\\{(1,3),(1,5),(1,6),(2,3),(2,5),(2,6),(3,4),(4,5),(4,6)\\}$ 即可使树变为二分图。\n\n---\n\n**【数据范围】**\n\n**本题开启捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$1\\le k\\le 20$，$1\\le u_i,v_i\\le n$，$2\\le p_i\\le2\\times10^9$，$p_i$ 为素数。最多有 $99$ 个大小不同的 $p_i$。保证 $p_i>k$。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Special}$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times10^5$ | $\\text{A}$ | $10$ |\n| $2$ | $10^3$ | $\\text{No}$ | $15$ |\n| $3$ | $5\\times10^5$ | $\\text{B}$ | $15$ |\n| $4$ | $5\\times10^5$ | $\\text{No}$ | $60$ |\n\n- $\\text{Special A}$：保证 $k=1$；\n- $\\text{Special B}$：保证 $v_i=u_i+1$。\n\n---\n\n**【提示】**\n\n本题 IO 量较大，请使用较快速的 IO 方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『DABOI Round 1』Develop a Tree", "background": "小 Z 看不惯树，所以他总想在树上随机添加一些边。他认为二分图是很和谐的，所以他想知道将一棵树变为二分图的方案数。你能否回答他的询问？", "description": "对于一颗无向有根树，定义 $f(i,k)$ 表示在以 $i$ 为根的子树中，在其内部连 $k$ 条边，使得这颗子树变为一个二分图的方案数。请注意，加边时允许与原树边重边，但任意两条新加的边都不能重合。\n\n给定一棵 $n$ 个点的无向有根树，根节点为 $1$ 号点。对于每个 $i\\in [1,n]$，求 $f(i,k)$ 对 $p_i$ 取模的值。", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行 $2$ 个整数，分别表示树的点数 $n$ 和参数 $k$。\n\n接下来，第 $2$ 至 $n$ 行，每行 $2$ 个正整数，分别表示一条边连接的两个点的编号 $u_i$ 与 $v_i$。\n\n第 $n+1$ 行 $n$ 个整数，分别表示每次询问时的模数 $p_i$。", "outputFormat": "输出共 $1$ 行 $n$ 个整数，分别表示每次询问的答案。", "hint": "**【样例 1 解释】**\n\n在这棵树上，连接 $(u,v)\\in\\{(1,3),(1,5),(1,6),(2,3),(2,5),(2,6),(3,4),(4,5),(4,6)\\}$ 即可使树变为二分图。\n\n---\n\n**【数据范围】**\n\n**本题开启捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^5$，$1\\le k\\le 20$，$1\\le u_i,v_i\\le n$，$2\\le p_i\\le2\\times10^9$，$p_i$ 为素数。最多有 $99$ 个大小不同的 $p_i$。保证 $p_i>k$。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Special}$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5\\times10^5$ | $\\text{A}$ | $10$ |\n| $2$ | $10^3$ | $\\text{No}$ | $15$ |\n| $3$ | $5\\times10^5$ | $\\text{B}$ | $15$ |\n| $4$ | $5\\times10^5$ | $\\text{No}$ | $60$ |\n\n- $\\text{Special A}$：保证 $k=1$；\n- $\\text{Special B}$：保证 $v_i=u_i+1$。\n\n---\n\n**【提示】**\n\n本题 IO 量较大，请使用较快速的 IO 方式。", "locale": "zh-CN"}}}
{"pid": "P11033", "type": "P", "difficulty": 1, "samples": [["1 1 0 1 1\n1 1 0 1 1\n0 0 0 0 0\n1 1 0 1 1\n1 1 0 1 1", "No"], ["1 1 1 1 0\n1 1 1 0 1\n1 1 0 1 1\n1 0 1 1 1\n0 1 1 1 1", "No"], ["1 1 1 1 1\n0 1 0 1 1\n1 0 1 0 1\n0 1 0 1 1\n1 0 1 0 1", "Yes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "梦熊比赛"], "title": "【MX-X3-T0】「RiOI-4」宾果游戏", "background": "原题链接：<https://oier.team/problems/X3A>。\n\n---\n\n第**五**市。第**五**音。\n\n在一个似乎处处都是「**五**」的世界。\n\n如果，能再次将时序绚乱的**五**人连成**一线**的话——\n\n那就会是将自己带出黑暗的**一线**阳光吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wi8fqmqx.png)\n\n（图片来自[妄想症：Deliver Me](https://store.steampowered.com/app/779640/Deliver_Me/)，侵删。）", "description": "有一个 $5$ 行 $5$ 列的棋盘，棋盘上的 $25$ 个格子可能有棋子也可能没有。\n\n有如下图左侧所示的 $12$ 条线，我们称一个棋盘是**宾果的**当且仅当**至少**有一条线上的每个格子都有棋子。试判断给定的棋盘是否是宾果的。下图右侧给出了一些示例。（深色表示有棋子，浅色表示没有）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/no9qur52.png)\n\n你可以前往[这个链接](https://www.desmos.com/calculator/zq45krhafo?lang=zh-CN)来自己测试不同的情况。", "inputFormat": "共 $5$ 行，每行 $5$ 个数，如果第 $i$ 行第 $j$ 列有棋子，则第 $i$ 行第 $j$ 个数为 $1$，否则第 $i$ 行第 $j$ 个数为 $0$。", "outputFormat": "如果有至少一条线上有 $5$ 个棋子，输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n这个样例给出的棋盘是图中左上角的棋盘，它不是宾果的。\n\n**【样例解释 #3】**\n\n这个样例给出的棋盘是图中左下角的棋盘，它是宾果的。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证输入的数都是 $0$ 或 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T0】「RiOI-4」宾果游戏", "background": "原题链接：<https://oier.team/problems/X3A>。\n\n---\n\n第**五**市。第**五**音。\n\n在一个似乎处处都是「**五**」的世界。\n\n如果，能再次将时序绚乱的**五**人连成**一线**的话——\n\n那就会是将自己带出黑暗的**一线**阳光吧。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wi8fqmqx.png)\n\n（图片来自[妄想症：Deliver Me](https://store.steampowered.com/app/779640/Deliver_Me/)，侵删。）", "description": "有一个 $5$ 行 $5$ 列的棋盘，棋盘上的 $25$ 个格子可能有棋子也可能没有。\n\n有如下图左侧所示的 $12$ 条线，我们称一个棋盘是**宾果的**当且仅当**至少**有一条线上的每个格子都有棋子。试判断给定的棋盘是否是宾果的。下图右侧给出了一些示例。（深色表示有棋子，浅色表示没有）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/no9qur52.png)\n\n你可以前往[这个链接](https://www.desmos.com/calculator/zq45krhafo?lang=zh-CN)来自己测试不同的情况。", "inputFormat": "共 $5$ 行，每行 $5$ 个数，如果第 $i$ 行第 $j$ 列有棋子，则第 $i$ 行第 $j$ 个数为 $1$，否则第 $i$ 行第 $j$ 个数为 $0$。", "outputFormat": "如果有至少一条线上有 $5$ 个棋子，输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n这个样例给出的棋盘是图中左上角的棋盘，它不是宾果的。\n\n**【样例解释 #3】**\n\n这个样例给出的棋盘是图中左下角的棋盘，它是宾果的。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，保证输入的数都是 $0$ 或 $1$。", "locale": "zh-CN"}}}
{"pid": "P11034", "type": "P", "difficulty": 1, "samples": [["RiOI\nKDOI", "RiOI for sure!"], ["RiOIroundfour\nRiOIroundnegtiveone", "Either is ok!"], ["majsoul\ndigdigio", "Try again!"], ["GoInForNOI\nGoInForIOI", "GoInForIOI for sure!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "O2优化", "梦熊比赛"], "title": "【MX-X3-T1】「RiOI-4」What beats RiOI", "background": "原题链接：<https://oier.team/problems/X3B>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tb8chlhk.png)\n\n但是众所周知 RiOI 是从 KDOI 里面裂出来的，所以这个只是整活……（小声）  \nKDOI 对不起喵！", "description": "定义一个字符串是**好闪**的，当且仅当这个字符串包含子串 `RiOI`（大小写均可，例如含有 `rioi`，`RIOI`，`rIoI` 均算作含有）。\n\n给定两个只包含大小写英文字母的非空字符串 $s,t$：\n\n- 如果两个字符串都是好闪的，那么输出 `Either is ok!`。\n- 否则，如果 $s$ 是好闪的，输出 $s$ `for sure!`。\n- 否则，如果 $t$ 是好闪的，输出 $t$ `for sure!`。\n- 如果两个字符串都不是好闪的，请输出 `Try again!`。", "inputFormat": "两行各一个只包含大小写英文字母的非空字符串，分别表示 $s,t$。", "outputFormat": "一行一个字符串，表示你的答案。", "hint": "**【样例解释 #1】**\n\n`RiOI` 含有 `RiOI` 子串，而 `KDOI` 不含，所以输出 `RiOI for sure!`。\n\n**【样例解释 #2】**\n\n`RiOIroundfour` 和 `RiOIroundnegtiveone` 都含有 `RiOI` 子串，所以输出 `Either is ok!`。\n\n**【样例解释 #4】**\n\n`GoInForIOI` 含有 `rIOI` 子串，而 `GoInForNOI` 不含有，所以输出 `GoInForIOI for sure!`。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $s,t$ 只包含小写英文字母。  \n对于 $100\\%$ 的数据，保证 $s,t$ 的长度都不超过 $1\\ 000$，且均为仅由大小写英文字母组成的非空字符串。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T1】「RiOI-4」What beats RiOI", "background": "原题链接：<https://oier.team/problems/X3B>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tb8chlhk.png)\n\n但是众所周知 RiOI 是从 KDOI 里面裂出来的，所以这个只是整活……（小声）  \nKDOI 对不起喵！", "description": "定义一个字符串是**好闪**的，当且仅当这个字符串包含子串 `RiOI`（大小写均可，例如含有 `rioi`，`RIOI`，`rIoI` 均算作含有）。\n\n给定两个只包含大小写英文字母的非空字符串 $s,t$：\n\n- 如果两个字符串都是好闪的，那么输出 `Either is ok!`。\n- 否则，如果 $s$ 是好闪的，输出 $s$ `for sure!`。\n- 否则，如果 $t$ 是好闪的，输出 $t$ `for sure!`。\n- 如果两个字符串都不是好闪的，请输出 `Try again!`。", "inputFormat": "两行各一个只包含大小写英文字母的非空字符串，分别表示 $s,t$。", "outputFormat": "一行一个字符串，表示你的答案。", "hint": "**【样例解释 #1】**\n\n`RiOI` 含有 `RiOI` 子串，而 `KDOI` 不含，所以输出 `RiOI for sure!`。\n\n**【样例解释 #2】**\n\n`RiOIroundfour` 和 `RiOIroundnegtiveone` 都含有 `RiOI` 子串，所以输出 `Either is ok!`。\n\n**【样例解释 #4】**\n\n`GoInForIOI` 含有 `rIOI` 子串，而 `GoInForNOI` 不含有，所以输出 `GoInForIOI for sure!`。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $s,t$ 只包含小写英文字母。  \n对于 $100\\%$ 的数据，保证 $s,t$ 的长度都不超过 $1\\ 000$，且均为仅由大小写英文字母组成的非空字符串。", "locale": "zh-CN"}}}
{"pid": "P11035", "type": "P", "difficulty": 2, "samples": [["6 3\n1 1 -4 5 1 -4", "11"], ["7 4\n1 -9 -1 -9 8 -1 0", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛"], "title": "【MX-X3-T2】「RiOI-4」消えた夏の夢", "background": "原题链接：<https://oier.team/problems/X3C>。\n\n---\n\n> いつまでも二人語り合おう\\\n終わった夏を\t\\\n探してた夢をそっと\\\n終わらせよう戻らないように\\\nお別れだね\\\n君へ届けと願った声が\\\n風になって心の隙間を\\\n通り抜けた\\\n——《消えた夏の夢》\n\n小 T 不会出题。", "description": "小 T 手中有一个数 $x$，初始时为 $p$。而小 ⊥ 手中有一个长为 $n$ 的序列 $a$。一次操作中，小 T 需要依次进行如下的修改：\n\n- 选中 $a$ 中的一个数 $a_i$。\n- 将 $x$ 加上 $a_i$。\n- 让 $a_i$ 变为自身的相反数，即 $-a_i$。\n\n小 T 想知道，在若干次操作（可以不进行操作，同一个位置可以选中多次）之后，小 T 手中的数 $x$ 最大是多少。", "inputFormat": "第一行两个整数 $n,p$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "输出一行仅一个整数，表示 $x$ 最大是多少。", "hint": "**【样例解释 #1】**\n\n对于样例，你可以依次执行以下操作：\n\n- 选中 $a_5=1$，$x$ 变为 $3+1=4$，$a_5$ 变为 $-1$。\n- 选中 $a_1=1$，$x$ 变为 $4+1=5$，$a_1$ 变为 $-1$。\n- 选中 $a_3=-4$，$x$ 变为 $5-4=1$，$a_3$ 变为 $4$。\n- 选中 $a_4=5$，$x$ 变为 $1+5=6$，$a_4$ 变为 $-5$。\n- 选中 $a_2=1$，$x$ 变为 $6+1=7$，$a_2$ 变为 $-1$。\n- 选中 $a_3=4$，$x$ 变为 $7+4=11$，$a_3$ 变为 $-4$。\n\n可以证明 $x$ 的最大值为 $11$。注意，并不是只有样例中展示的方案可以达到这个最大值。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$20$||\n|$4\\sim5$|$10^5$|$a_i<0$|\n|$6\\sim7$|$10^5$|$a_i\\ge0$|\n|$8\\sim10$|$10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$|a_i|,|p|\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T2】「RiOI-4」消えた夏の夢", "background": "原题链接：<https://oier.team/problems/X3C>。\n\n---\n\n> いつまでも二人語り合おう\\\n終わった夏を\t\\\n探してた夢をそっと\\\n終わらせよう戻らないように\\\nお別れだね\\\n君へ届けと願った声が\\\n風になって心の隙間を\\\n通り抜けた\\\n——《消えた夏の夢》\n\n小 T 不会出题。", "description": "小 T 手中有一个数 $x$，初始时为 $p$。而小 ⊥ 手中有一个长为 $n$ 的序列 $a$。一次操作中，小 T 需要依次进行如下的修改：\n\n- 选中 $a$ 中的一个数 $a_i$。\n- 将 $x$ 加上 $a_i$。\n- 让 $a_i$ 变为自身的相反数，即 $-a_i$。\n\n小 T 想知道，在若干次操作（可以不进行操作，同一个位置可以选中多次）之后，小 T 手中的数 $x$ 最大是多少。", "inputFormat": "第一行两个整数 $n,p$。\n\n第二行 $n$ 个整数 $a_i$。", "outputFormat": "输出一行仅一个整数，表示 $x$ 最大是多少。", "hint": "**【样例解释 #1】**\n\n对于样例，你可以依次执行以下操作：\n\n- 选中 $a_5=1$，$x$ 变为 $3+1=4$，$a_5$ 变为 $-1$。\n- 选中 $a_1=1$，$x$ 变为 $4+1=5$，$a_1$ 变为 $-1$。\n- 选中 $a_3=-4$，$x$ 变为 $5-4=1$，$a_3$ 变为 $4$。\n- 选中 $a_4=5$，$x$ 变为 $1+5=6$，$a_4$ 变为 $-5$。\n- 选中 $a_2=1$，$x$ 变为 $6+1=7$，$a_2$ 变为 $-1$。\n- 选中 $a_3=4$，$x$ 变为 $7+4=11$，$a_3$ 变为 $-4$。\n\n可以证明 $x$ 的最大值为 $11$。注意，并不是只有样例中展示的方案可以达到这个最大值。\n\n**【数据范围】**\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$20$||\n|$4\\sim5$|$10^5$|$a_i<0$|\n|$6\\sim7$|$10^5$|$a_i\\ge0$|\n|$8\\sim10$|$10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$|a_i|,|p|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11036", "type": "P", "difficulty": 4, "samples": [["4\n1\n2\n3\n20120712", "7 9 2\n9 6 8\n5 9 2\n8065343 8750 6446"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "Special Judge", "O2优化", "构造", "Ad-hoc", "梦熊比赛"], "title": "【MX-X3-T3】「RiOI-4」GCD 与 LCM 问题", "background": "原题链接：<https://oier.team/problems/X3D>。\n\n---\n\n「既然你说你不了解她，为什么又可以断言她一定是因为……」\n\n是呀，自己对零羽还了解的确实不够多……泠珞这样想着。\n\n在残缺的记忆当中，她只能想起，她和零羽的最大公约数，就是「音乐」。\n\n还缺了什么呢？泠珞不知道。她只知道，那所缺失的，和「音乐」加起来，就是她的一切。一切的总和。\n\n**滴答，滴答**。叮咚，叮咚。如果把长短不一、断断续续的钢琴声拼接在一起，能够回忆起什么吗。", "description": "给定一个正整数 $a$，请你构造三个正整数 $b,c,d$ 使得 $a+b+c+d=\\gcd(a,b)+\\operatorname{lcm}(c,d)$。一个测试点内有多组数据。\n\n由于出题人想把自己 QQ 号写题目里，你需要保证 $b,c,d\\le 1\\,634\\,826\\,193$。\n\n**如有多种可能的答案，输出任意一个均可。**", "inputFormat": "**第一行一个正整数 $t$ 表示数据组数。**\n\n接下来 $t$ 行每行一个正整数 $a$。", "outputFormat": "输出 $t$ 行，每行三个正整数 $b,c,d$。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**【样例解释】**\n\n样例的构造为：\n\n$1+7+9+2=19=\\gcd(1,7)+\\operatorname{lcm}(9,2)$  \n$2+9+6+8=25=\\gcd(2,9)+\\operatorname{lcm}(6,8)$  \n$3+5+9+2=19=\\gcd(3,5)+\\operatorname{lcm}(9,2)$  \n$20\\,120\\,712+8\\,065\\,343+8\\,750+6\\,446=28\\,201\\,251=\\gcd(20\\,120\\,712,8\\,065\\,343)+\\operatorname{lcm}(8\\,750,6\\,446)$\n\n容易验证均满足要求。\n\n**【数据范围】**\n\n|测试点|分数|$t\\le$|$a\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$10$|$10$||\n|$2$|$5$|$50$|$50$||\n|$3$|$17$|$10^6$|$5\\times10^8$||\n|$4$|$29$|$10^6$|$10^9-1$|$a$ 为奇数|\n|$5$|$47$|$2\\times10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le t\\le2\\times10^6$，$1\\le a\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T3】「RiOI-4」GCD 与 LCM 问题", "background": "原题链接：<https://oier.team/problems/X3D>。\n\n---\n\n「既然你说你不了解她，为什么又可以断言她一定是因为……」\n\n是呀，自己对零羽还了解的确实不够多……泠珞这样想着。\n\n在残缺的记忆当中，她只能想起，她和零羽的最大公约数，就是「音乐」。\n\n还缺了什么呢？泠珞不知道。她只知道，那所缺失的，和「音乐」加起来，就是她的一切。一切的总和。\n\n**滴答，滴答**。叮咚，叮咚。如果把长短不一、断断续续的钢琴声拼接在一起，能够回忆起什么吗。", "description": "给定一个正整数 $a$，请你构造三个正整数 $b,c,d$ 使得 $a+b+c+d=\\gcd(a,b)+\\operatorname{lcm}(c,d)$。一个测试点内有多组数据。\n\n由于出题人想把自己 QQ 号写题目里，你需要保证 $b,c,d\\le 1\\,634\\,826\\,193$。\n\n**如有多种可能的答案，输出任意一个均可。**", "inputFormat": "**第一行一个正整数 $t$ 表示数据组数。**\n\n接下来 $t$ 行每行一个正整数 $a$。", "outputFormat": "输出 $t$ 行，每行三个正整数 $b,c,d$。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**【样例解释】**\n\n样例的构造为：\n\n$1+7+9+2=19=\\gcd(1,7)+\\operatorname{lcm}(9,2)$  \n$2+9+6+8=25=\\gcd(2,9)+\\operatorname{lcm}(6,8)$  \n$3+5+9+2=19=\\gcd(3,5)+\\operatorname{lcm}(9,2)$  \n$20\\,120\\,712+8\\,065\\,343+8\\,750+6\\,446=28\\,201\\,251=\\gcd(20\\,120\\,712,8\\,065\\,343)+\\operatorname{lcm}(8\\,750,6\\,446)$\n\n容易验证均满足要求。\n\n**【数据范围】**\n\n|测试点|分数|$t\\le$|$a\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$10$|$10$||\n|$2$|$5$|$50$|$50$||\n|$3$|$17$|$10^6$|$5\\times10^8$||\n|$4$|$29$|$10^6$|$10^9-1$|$a$ 为奇数|\n|$5$|$47$|$2\\times10^6$|$10^9$||\n\n对于 $100\\%$ 的数据，$1\\le t\\le2\\times10^6$，$1\\le a\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11037", "type": "P", "difficulty": 5, "samples": [["3 3\n1 3\n2 3\n3 5\n6\n9\n11", "665496236\n0\n554580197"], ["4 3\n1 4\n11 12\n3 9\n6 10\n21\n29\n26", "811073551\n811073543\n748683272"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛"], "title": "【MX-X3-T4】「RiOI-4」上课", "background": "原题链接：<https://oier.team/problems/X3E>。\n\n---\n\n一天，小 M 在宿舍 $6:53$ 起床，而早自习 $7:00$ 开始。", "description": "给定正整数 $n,q$ 和 $n$ 个区间 $[l_i,r_i]$。\n\n有 $q$ 组询问，每次询问给定一个整数 $x$。在每个区间内选择一个整数 $a_i$（$l_i\\leq a_i\\leq r_i$），使得所选整数的总和等于 $x$，并使得选出的 $a$ 序列的方差最小。输出方差最小值，对 $998\\,244\\,353$ 取模。保证存在至少一种合法的选取方案。\n\n关于方差的有关定义参照此[云剪切板](https://www.luogu.com.cn/paste/dpptrubn)，有理数取模参照[【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来的 $n$ 行，每行两个自然数 $l_i,r_i$。\n\n最后 $q$ 行，每行一个整数 $x$，表示一次询问。保证存在至少一种合法的选取方案。", "outputFormat": "$q$ 行，每行一个整数，表示最小方差对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n询问一方差最小的选择方案为 ${1,2,3}$，最小方差为 $\\frac{2}{3}$，有 $665\\,496\\,236\\times3\\equiv 2\\pmod{998\\,244\\,353}$，故输出 $665\\,496\\,236$。\n\n询问二方差最小的选择方案为 ${3,3,3}$，最小方差为 $0$，有 $0\\times1\\equiv 0\\pmod {998\\,244\\,353}$，故输出 $0$。\n\n询问三方差最小的选择方案为 ${3,3,5}$，最小方差为 $\\frac{8}{9}$，有 $554\\,580\\,197\\times9\\equiv 8\\pmod{998\\,244\\,353}$，故输出 $554\\,580\\,197$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$9$|$\\le5$|$\\le5$|$r_i\\le5$|\n|$2$|$13$|$\\le2\\times10^3$|$\\le2\\times10^3$|$r_i\\le2\\times10^3$|\n|$3$|$16$|$\\le10^6$|$=1$||\n|$4$|$25$|$\\le10^5$|$\\le10^5$|$r_i\\le10^5$|\n|$5$|$37$|$\\le10^6$|$\\le10^6$||\n\n对于所有数据，满足 $1\\leq n,q\\leq 10^6$，$0\\leq l_i\\leq r_i\\leq 10^{6}$，对于每个 $x$ 保证存在一种合法的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T4】「RiOI-4」上课", "background": "原题链接：<https://oier.team/problems/X3E>。\n\n---\n\n一天，小 M 在宿舍 $6:53$ 起床，而早自习 $7:00$ 开始。", "description": "给定正整数 $n,q$ 和 $n$ 个区间 $[l_i,r_i]$。\n\n有 $q$ 组询问，每次询问给定一个整数 $x$。在每个区间内选择一个整数 $a_i$（$l_i\\leq a_i\\leq r_i$），使得所选整数的总和等于 $x$，并使得选出的 $a$ 序列的方差最小。输出方差最小值，对 $998\\,244\\,353$ 取模。保证存在至少一种合法的选取方案。\n\n关于方差的有关定义参照此[云剪切板](https://www.luogu.com.cn/paste/dpptrubn)，有理数取模参照[【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来的 $n$ 行，每行两个自然数 $l_i,r_i$。\n\n最后 $q$ 行，每行一个整数 $x$，表示一次询问。保证存在至少一种合法的选取方案。", "outputFormat": "$q$ 行，每行一个整数，表示最小方差对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n询问一方差最小的选择方案为 ${1,2,3}$，最小方差为 $\\frac{2}{3}$，有 $665\\,496\\,236\\times3\\equiv 2\\pmod{998\\,244\\,353}$，故输出 $665\\,496\\,236$。\n\n询问二方差最小的选择方案为 ${3,3,3}$，最小方差为 $0$，有 $0\\times1\\equiv 0\\pmod {998\\,244\\,353}$，故输出 $0$。\n\n询问三方差最小的选择方案为 ${3,3,5}$，最小方差为 $\\frac{8}{9}$，有 $554\\,580\\,197\\times9\\equiv 8\\pmod{998\\,244\\,353}$，故输出 $554\\,580\\,197$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$9$|$\\le5$|$\\le5$|$r_i\\le5$|\n|$2$|$13$|$\\le2\\times10^3$|$\\le2\\times10^3$|$r_i\\le2\\times10^3$|\n|$3$|$16$|$\\le10^6$|$=1$||\n|$4$|$25$|$\\le10^5$|$\\le10^5$|$r_i\\le10^5$|\n|$5$|$37$|$\\le10^6$|$\\le10^6$||\n\n对于所有数据，满足 $1\\leq n,q\\leq 10^6$，$0\\leq l_i\\leq r_i\\leq 10^{6}$，对于每个 $x$ 保证存在一种合法的方案。", "locale": "zh-CN"}}}
{"pid": "P11038", "type": "P", "difficulty": 6, "samples": [["5\n1 2 1\n1 3 1\n2 4 1\n2 5 1\n", "2 1 0 0 0"], ["24\n15 4 25\n5 11 8\n23 13 14\n15 6 12\n21 14 22\n21 12 5\n1 9 30\n6 19 20\n18 7 4\n4 5 16\n9 23 5\n6 22 9\n12 20 23\n2 24 18\n6 2 5\n16 21 9\n14 18 9\n14 8 5\n23 17 18\n1 16 22\n15 3 26\n1 10 3\n10 15 9", "66 28 20 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "], ["10\n4 8 407414868\n3 9 875245582\n10 3 548046335\n2 8 163333320\n7 5 320544242\n5 3 504767824\n6 7 431834202\n9 4 639504669\n9 1 968451452\n", "3100843302 639504669 0 0 0 0 0 0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP", "虚树", "梦熊比赛"], "title": "【MX-X3-T5】「RiOI-4」Countless J-Light Decomposition", "background": "原题链接：<https://oier.team/problems/X3F>。\n\n---\n\n「如果，如果，如果真的可以是那样的话，就好了啊。」\n\n回想起自己做出的一个个选择，泠珞有时会想，自己是否有过更好的机会。\n\n但是既然一切已经如此了，除了前进，别无他法。\n\n无论结果是如何，接受结果，习得教训，然后……去争取更美好的未来。\n\n那么，现在应该做的就是，尽可能避免，之后会走到的最坏结果了吧。\n\n「规避风险。脚踏实地。做最可能实现的选择。」\n\n「一定是的。」", "description": "给定一棵有根**带权**树，结点以 $1\\sim n$ 编号。根结点编号为 $1$，边权均为正整数。\n\n定义这棵树的**剖分**为对于每个结点，选择一些儿子（可以都选或都不选）为**重儿子**的方案。重儿子和其父亲的边称为**重边**。不是重边的边称为**轻边**。\n\n定义一个剖分是 $\\textbf{\\textit{i--}}$**重的**，当且仅当对于每个结点，其重儿子数量不超过 $i$。\n\n定义一个剖分是 $\\textbf{\\textit{j--}}$**轻的**，当且仅当对于每条从根（编号为 $1$ 的结点）出发的简单路径，其经过的轻边的边权和不超过 $j$。\n\n对于 $i=0,1,\\cdots,n-1$，请求出最小的 $j$，使得存在一个 $\\textit{i--}$重的剖分是 $\\textit{j--}$轻的。", "inputFormat": "第一行一个正整数 $n$，表示树的大小。\n\n接下来 $n-1$ 行，每行三个正整数 $u_i,v_i,w_i$，表示编号为 $u_i,v_i$ 的结点间有一条边权为 $w_i$ 的边。", "outputFormat": "一行 $n$ 个整数，表示 $i=0,1,2,\\cdots,n-1$ 时的答案。", "hint": "**【样例解释 #1】**\n\n对于样例 1，其中的树如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tox3t3d4.png)\n\n当 $i=0$ 时，只存在一种剖分，不存在任何重儿子或重边。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}4$，边权和为 $2$。\n\n当 $i=1$ 时，可以采用如图所示的剖分，加粗结点（根除外）为重儿子。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}5$，经过轻边的边权和为 $1$。\n\n当 $i\\ge 2$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n**【样例解释 #2】**\n\n当 $i\\ge 3$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n当 $i=0,1,2$ 时，我有一个很简洁的解释，但是这里空白太小写不下。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$10$|$10^3$||\n|$2$|$18$|$4\\times10^4$||\n|$3$|$16$|$10^5$|$w_i\\le100$|\n|$4$|$21$|$10^5$|$w_i\\le10^5$|\n|$5$|$35$|$2\\times10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le2\\times10^5$，$1\\le w_i\\le 10^9$，保证输入是一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T5】「RiOI-4」Countless J-Light Decomposition", "background": "原题链接：<https://oier.team/problems/X3F>。\n\n---\n\n「如果，如果，如果真的可以是那样的话，就好了啊。」\n\n回想起自己做出的一个个选择，泠珞有时会想，自己是否有过更好的机会。\n\n但是既然一切已经如此了，除了前进，别无他法。\n\n无论结果是如何，接受结果，习得教训，然后……去争取更美好的未来。\n\n那么，现在应该做的就是，尽可能避免，之后会走到的最坏结果了吧。\n\n「规避风险。脚踏实地。做最可能实现的选择。」\n\n「一定是的。」", "description": "给定一棵有根**带权**树，结点以 $1\\sim n$ 编号。根结点编号为 $1$，边权均为正整数。\n\n定义这棵树的**剖分**为对于每个结点，选择一些儿子（可以都选或都不选）为**重儿子**的方案。重儿子和其父亲的边称为**重边**。不是重边的边称为**轻边**。\n\n定义一个剖分是 $\\textbf{\\textit{i--}}$**重的**，当且仅当对于每个结点，其重儿子数量不超过 $i$。\n\n定义一个剖分是 $\\textbf{\\textit{j--}}$**轻的**，当且仅当对于每条从根（编号为 $1$ 的结点）出发的简单路径，其经过的轻边的边权和不超过 $j$。\n\n对于 $i=0,1,\\cdots,n-1$，请求出最小的 $j$，使得存在一个 $\\textit{i--}$重的剖分是 $\\textit{j--}$轻的。", "inputFormat": "第一行一个正整数 $n$，表示树的大小。\n\n接下来 $n-1$ 行，每行三个正整数 $u_i,v_i,w_i$，表示编号为 $u_i,v_i$ 的结点间有一条边权为 $w_i$ 的边。", "outputFormat": "一行 $n$ 个整数，表示 $i=0,1,2,\\cdots,n-1$ 时的答案。", "hint": "**【样例解释 #1】**\n\n对于样例 1，其中的树如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tox3t3d4.png)\n\n当 $i=0$ 时，只存在一种剖分，不存在任何重儿子或重边。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}4$，边权和为 $2$。\n\n当 $i=1$ 时，可以采用如图所示的剖分，加粗结点（根除外）为重儿子。一条从根出发经过轻边边权和最大的简单路径为 $1\\textit{---}2\\textit{---}5$，经过轻边的边权和为 $1$。\n\n当 $i\\ge 2$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n**【样例解释 #2】**\n\n当 $i\\ge 3$ 时，可以令所有的非根结点为重儿子，因此任何从根出发经过最多轻边的简单路径只能经过 $0$ 条轻边，故轻边最大边权和为 $0$。\n\n当 $i=0,1,2$ 时，我有一个很简洁的解释，但是这里空白太小写不下。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$10$|$10^3$||\n|$2$|$18$|$4\\times10^4$||\n|$3$|$16$|$10^5$|$w_i\\le100$|\n|$4$|$21$|$10^5$|$w_i\\le10^5$|\n|$5$|$35$|$2\\times10^5$||\n\n对于 $100\\%$ 的数据，$1\\le n\\le2\\times10^5$，$1\\le w_i\\le 10^9$，保证输入是一棵树。", "locale": "zh-CN"}}}
{"pid": "P11039", "type": "P", "difficulty": 6, "samples": [["5 3\n1 1 2 2\n3 4 5\n", "1"], ["5 3\n1 1 2 2\n2 3 4", "8"], ["20 10\n20 8 7 16 3 15 1 10 17 3 13 15 1 17 1 14 14 8 4\n3 7 10 19 15 13 4 6 18 5", "553508927"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "虚树", "组合数学", "Prüfer 序列", "梦熊比赛"], "title": "【MX-X3-T6】「RiOI-4」TECHNOPOLIS 2085", "background": "原题链接：<https://oier.team/problems/X3G>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/931ql7zi.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n啊～啊～啊咦～啊咦～哦→啊↑啊↓啊～嗯～哎哎↑哎哦哎嗯～哦啊~爱↖爱↑爱↗爱↑爱↑啊～啊～啊咦～啊咦～啊→啊↑啊↓啊～嗯嗯↓嗯↓滴嘚滴嘚唔↑～～嘟←嘟↖️嘟↑嘟↗️嘟→嘟↘️嘟↓\n\n你说得对，但是这里是梦熊周赛题，不是出题人用来发电的地方，所以你需要做一道图论题。", "description": "约定 $\\operatorname{lca}_G(u,v)$ 表示编号为 $u,v$ 的结点在有标号有根树 $G$ 上的最近共同祖先。给定一棵根编号为 $1$，大小为 $n$ ，结点编号为 $1\\sim n$ 的有根树 $T$ 与一个大小为 $m$ 的点集 $S$。你需要求出有多少个**不同的**大小为 $n$ 的结点编号为 $1\\sim n$ 的有根树 $T'$，满足对于任意 $u,v\\in S$，有 $\\operatorname{lca}_T(u,v)=\\operatorname{lca}_{T'}(u,v)$。\n\n答案对 $998\\,244\\,353$ 取模。\n\n我们称两颗大小为 $n$ 的有标号有根树是**不同的**，当且仅当以下二者至少一个成立：\n\n- 它们的根节点不同。\n- 存在一条边，在一棵树中未出现，而在另一棵树中出现。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$ 表示编号为 $2\\sim n$ 的结点的父亲编号。\n\n最后一行 $m$ 个正整数，表示选出的集合 $S$ 中结点的编号。", "outputFormat": "一行一个整数，表示答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n只有与 $T$ 完全相同的树满足要求。\n\n**【样例解释 #2】**\n\n对于样例 2，满足要求的树的所有 $8$ 种 $p$ 数组如下（根的 $p_i$ 为 $0$）：\n\n$\\{0,1,1,2,1\\},\\{0,1,1,2,2\\},\\{0,1,1,2,3\\},\\{0,1,1,2,4\\},$  \n$\\{0,1,1,5,2\\},\\{0,5,1,2,1\\},\\{0,1,5,2,1\\},\\{5,1,1,2,0\\}$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|$10$|$10$|\n|$2$|$18$|$200$|$200$|\n|$3$|$22$|$10^5$|$10^5$|\n|$4$|$17$|$10^6$|$10$|\n|$5$|$36$|$10^6$|$10^6$|\n\n对于 $100\\%$ 的数据，$2\\le m\\le n\\le 10^6$，保证输入的 $p$ 对应了一棵有标号有根树，$S$ 描述了一个结点组成的集合。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T6】「RiOI-4」TECHNOPOLIS 2085", "background": "原题链接：<https://oier.team/problems/X3G>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/931ql7zi.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n啊～啊～啊咦～啊咦～哦→啊↑啊↓啊～嗯～哎哎↑哎哦哎嗯～哦啊~爱↖爱↑爱↗爱↑爱↑啊～啊～啊咦～啊咦～啊→啊↑啊↓啊～嗯嗯↓嗯↓滴嘚滴嘚唔↑～～嘟←嘟↖️嘟↑嘟↗️嘟→嘟↘️嘟↓\n\n你说得对，但是这里是梦熊周赛题，不是出题人用来发电的地方，所以你需要做一道图论题。", "description": "约定 $\\operatorname{lca}_G(u,v)$ 表示编号为 $u,v$ 的结点在有标号有根树 $G$ 上的最近共同祖先。给定一棵根编号为 $1$，大小为 $n$ ，结点编号为 $1\\sim n$ 的有根树 $T$ 与一个大小为 $m$ 的点集 $S$。你需要求出有多少个**不同的**大小为 $n$ 的结点编号为 $1\\sim n$ 的有根树 $T'$，满足对于任意 $u,v\\in S$，有 $\\operatorname{lca}_T(u,v)=\\operatorname{lca}_{T'}(u,v)$。\n\n答案对 $998\\,244\\,353$ 取模。\n\n我们称两颗大小为 $n$ 的有标号有根树是**不同的**，当且仅当以下二者至少一个成立：\n\n- 它们的根节点不同。\n- 存在一条边，在一棵树中未出现，而在另一棵树中出现。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$ 表示编号为 $2\\sim n$ 的结点的父亲编号。\n\n最后一行 $m$ 个正整数，表示选出的集合 $S$ 中结点的编号。", "outputFormat": "一行一个整数，表示答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n只有与 $T$ 完全相同的树满足要求。\n\n**【样例解释 #2】**\n\n对于样例 2，满足要求的树的所有 $8$ 种 $p$ 数组如下（根的 $p_i$ 为 $0$）：\n\n$\\{0,1,1,2,1\\},\\{0,1,1,2,2\\},\\{0,1,1,2,3\\},\\{0,1,1,2,4\\},$  \n$\\{0,1,1,5,2\\},\\{0,5,1,2,1\\},\\{0,1,5,2,1\\},\\{5,1,1,2,0\\}$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$m\\le$|\n|:-:|:-:|:-:|:-:|\n|$1$|$7$|$10$|$10$|\n|$2$|$18$|$200$|$200$|\n|$3$|$22$|$10^5$|$10^5$|\n|$4$|$17$|$10^6$|$10$|\n|$5$|$36$|$10^6$|$10^6$|\n\n对于 $100\\%$ 的数据，$2\\le m\\le n\\le 10^6$，保证输入的 $p$ 对应了一棵有标号有根树，$S$ 描述了一个结点组成的集合。", "locale": "zh-CN"}}}
{"pid": "P11040", "type": "P", "difficulty": 7, "samples": [["3 4\n0 0\n0 1\n0 2\n2", "2"], ["20 15\n0 1\n0 2\n0 21\n0 5\n2\n0 15\n1 18\n0 7\n0 8\n0 25\n2\n1 22\n0 12\n0 13\n2", "313288290\n39181640\n134388812"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "平衡树", "O2优化", "组合数学", "梦熊比赛"], "title": "【MX-X3-T7】「RiOI-4」Re：End of a Dream", "background": "原题链接：<https://oier.team/problems/X3H>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwohziu8.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n还是来谈点现实的吧。\n\n身边的同学 NOI 拿了 Ag，APIO 捧了杯，省选啥的也比小 $\\iiint$ 好。小 $\\iiint$ 说，他的时间花在游戏上了。可看看隔壁提前招进高中的，florr 号里都有 Super Ant Egg 了。小 $\\iiint$ 说，他网不好，实力发挥不出来。可再看隔壁 i wanna 大神，都开始速通 i wanna be the guy 了。小 $\\iiint$ 争道，他也没打多久游戏，只是在专心文化课。但是成绩一拉出来，成了信竞班垫底。小 $\\iiint$ 又说，可能是时间花在社交上了吧。大家都觉得他很幽默，因为他在班里一个朋友都没有。\n\n小 $\\iiint$ 不明白为什么会这样。\n\n今年对于小 $\\iiint$ 来说，可能就是他 OI 生涯的最后一年了。一年太短，能补救多少？能挽回多少？当年他刚学 OI 时，就暗暗地下定决心，要成为大家口中的“神犇”。三年过去，前途仍是一片昏暗。\n\n这或许就是，$\\color{#CD0000}\\overset{\\text{End of a Dream}}{\\text{梦\\ 的\\ 终\\ 结}}$。\n\n也许，**梦是反着的吧。**\n\n……\n\n但是这里是梦熊周赛题目，不是出题人拿来写批话的地方，所以小 $\\iiint$ 需要你做一道计数题。", "description": "给定 $n,q$。现有一个初始为 $0$ 的整数 $m$。你需要支持以下操作：\n\n- `0 x`：将 $m$ 加上 $2^x$。\n- `1 x`：将 $m$ 减去 $2^x$。若 $m<2^x$，则忽略此操作。\n- `2`：查询有多少长度为 $n$、每个数都在 $1\\sim m$ 中的严格递增正整数序列，使得其前缀异或和与后缀异或和均严格递增。答案对 $998\\,244\\,353$ 取模。\n\n其中，一个序列 $a_1,a_2,\\cdots,a_n$ 的**前缀异或和**是指序列 $s_1,s_2,\\cdots,s_n$，满足 $s_i=\\begin{cases}a_1&i=1\\\\a_{i}\\oplus s_{i-1}&i\\ge2\\end{cases}$，而其**后缀异或和**是指序列 $t_1,t_2,\\cdots,t_n$，满足 $t_i=\\begin{cases}a_n&i=1\\\\a_{n-i+1}\\oplus t_{i-1}&i\\ge2\\end{cases}$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的按位异或。", "inputFormat": "第一行两个正整数，表示 $n,q$。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对于每个 `2` 操作，输出对应的答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n查询时 $m=7$，满足要求的序列为 $\\{1,2,4\\}$ 和 $\\{1,3,5\\}$，可以证明不存在其他解。\n\n注意，序列 $\\{1,3,1\\}$ 是不满足要求的，尽管其前、后缀异或和均为严格递增数列 $\\{1,2,3\\}$，该序列本身并不满足严格递增的限制。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$q\\le$|$x\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$5$|$5$|$10$|$10$||\n|$2$|$10$|$10^3$|$10^3$|$10^3$||\n|$3$|$11$|$10^3$|$2\\times10^5$|$10^5$|AB|\n|$4$|$14$|$10^5$|$2\\times10^5$|$10^5$|AB|\n|$5$|$16$|$10^7$|$10^2$|$10^7$|B|\n|$6$|$19$|$10^7$|$2\\times10^5$|$10^7$|B|\n|$7$|$25$|$10^7$|$2\\times10^5$|$10^7$||\n\n特殊性质 A：仅有最后一次操作为 `2` 操作。  \n特殊性质 B：不包含 `1` 操作。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^7$，$1\\le q\\le 2\\times10^5$，$0\\le x\\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X3-T7】「RiOI-4」Re：End of a Dream", "background": "原题链接：<https://oier.team/problems/X3H>。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dwohziu8.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n还是来谈点现实的吧。\n\n身边的同学 NOI 拿了 Ag，APIO 捧了杯，省选啥的也比小 $\\iiint$ 好。小 $\\iiint$ 说，他的时间花在游戏上了。可看看隔壁提前招进高中的，florr 号里都有 Super Ant Egg 了。小 $\\iiint$ 说，他网不好，实力发挥不出来。可再看隔壁 i wanna 大神，都开始速通 i wanna be the guy 了。小 $\\iiint$ 争道，他也没打多久游戏，只是在专心文化课。但是成绩一拉出来，成了信竞班垫底。小 $\\iiint$ 又说，可能是时间花在社交上了吧。大家都觉得他很幽默，因为他在班里一个朋友都没有。\n\n小 $\\iiint$ 不明白为什么会这样。\n\n今年对于小 $\\iiint$ 来说，可能就是他 OI 生涯的最后一年了。一年太短，能补救多少？能挽回多少？当年他刚学 OI 时，就暗暗地下定决心，要成为大家口中的“神犇”。三年过去，前途仍是一片昏暗。\n\n这或许就是，$\\color{#CD0000}\\overset{\\text{End of a Dream}}{\\text{梦\\ 的\\ 终\\ 结}}$。\n\n也许，**梦是反着的吧。**\n\n……\n\n但是这里是梦熊周赛题目，不是出题人拿来写批话的地方，所以小 $\\iiint$ 需要你做一道计数题。", "description": "给定 $n,q$。现有一个初始为 $0$ 的整数 $m$。你需要支持以下操作：\n\n- `0 x`：将 $m$ 加上 $2^x$。\n- `1 x`：将 $m$ 减去 $2^x$。若 $m<2^x$，则忽略此操作。\n- `2`：查询有多少长度为 $n$、每个数都在 $1\\sim m$ 中的严格递增正整数序列，使得其前缀异或和与后缀异或和均严格递增。答案对 $998\\,244\\,353$ 取模。\n\n其中，一个序列 $a_1,a_2,\\cdots,a_n$ 的**前缀异或和**是指序列 $s_1,s_2,\\cdots,s_n$，满足 $s_i=\\begin{cases}a_1&i=1\\\\a_{i}\\oplus s_{i-1}&i\\ge2\\end{cases}$，而其**后缀异或和**是指序列 $t_1,t_2,\\cdots,t_n$，满足 $t_i=\\begin{cases}a_n&i=1\\\\a_{n-i+1}\\oplus t_{i-1}&i\\ge2\\end{cases}$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的按位异或。", "inputFormat": "第一行两个正整数，表示 $n,q$。\n\n接下来 $q$ 行，每行表示一个操作。", "outputFormat": "对于每个 `2` 操作，输出对应的答案对 $998\\,244\\,353$ 取模的值。", "hint": "**【样例解释 #1】**\n\n查询时 $m=7$，满足要求的序列为 $\\{1,2,4\\}$ 和 $\\{1,3,5\\}$，可以证明不存在其他解。\n\n注意，序列 $\\{1,3,1\\}$ 是不满足要求的，尽管其前、后缀异或和均为严格递增数列 $\\{1,2,3\\}$，该序列本身并不满足严格递增的限制。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n|子任务|分数|$n\\le$|$q\\le$|$x\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$5$|$5$|$10$|$10$||\n|$2$|$10$|$10^3$|$10^3$|$10^3$||\n|$3$|$11$|$10^3$|$2\\times10^5$|$10^5$|AB|\n|$4$|$14$|$10^5$|$2\\times10^5$|$10^5$|AB|\n|$5$|$16$|$10^7$|$10^2$|$10^7$|B|\n|$6$|$19$|$10^7$|$2\\times10^5$|$10^7$|B|\n|$7$|$25$|$10^7$|$2\\times10^5$|$10^7$||\n\n特殊性质 A：仅有最后一次操作为 `2` 操作。  \n特殊性质 B：不包含 `1` 操作。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^7$，$1\\le q\\le 2\\times10^5$，$0\\le x\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P11041", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["数学", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 报数游戏", "background": "", "description": "小蓝和朋友们在玩一个报数游戏。由于今年是 $2024$ 年，他们决定要从小到大轮流报出是 $20$ 或 $24$ 倍数的正整数。前 $10$ 个被报出的数是：$20,24,40,48,60,72,80,96,100,120$。请问第 $202420242024$ 个被报出的数是多少？\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。", "inputFormat": "本题无输入。", "outputFormat": "一行一个整数，表示你算出的答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 报数游戏", "background": "", "description": "小蓝和朋友们在玩一个报数游戏。由于今年是 $2024$ 年，他们决定要从小到大轮流报出是 $20$ 或 $24$ 倍数的正整数。前 $10$ 个被报出的数是：$20,24,40,48,60,72,80,96,100,120$。请问第 $202420242024$ 个被报出的数是多少？\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。", "inputFormat": "本题无输入。", "outputFormat": "一行一个整数，表示你算出的答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P11042", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2024", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 类斐波那契循环数", "background": "", "description": "\n对于一个有 $n$ 位的十进制数 $N = d_1d_2d_3\\dots d_n$，可以生成一个类斐波那契数列 $S$，数列 $S$ 的前 $n$ 个数为 $\\{S_1=d_1,S_2=d_2,S_3=d_3,\\dots,S_n=d_n\\}$，数列 $S$ 的第 $k(k>n)$ 个数为 $\\sum^{k−1}_{i=k−n} S_i$。如果这个数 $N$ 会出现在对应的类斐波那契数列 $S$ 中，那么 $N$ 就是一个类斐波那契循环数。\n\n例如对于 $197$，对应的数列 $S$ 为 $\\{1, 9, 7, 17, 33, 57, 107, 197, \\dots \\}$，$197$ 出现在 $S$ 中，所以 $197$ 是一个类斐波那契循环数。\n\n\n请问在 $0$ 至 $10^7$ 中，最大的类斐波那契循环数是多少？\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。", "inputFormat": "本题无输入。", "outputFormat": "一行一个整数，表示你算出的答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 类斐波那契循环数", "background": "", "description": "\n对于一个有 $n$ 位的十进制数 $N = d_1d_2d_3\\dots d_n$，可以生成一个类斐波那契数列 $S$，数列 $S$ 的前 $n$ 个数为 $\\{S_1=d_1,S_2=d_2,S_3=d_3,\\dots,S_n=d_n\\}$，数列 $S$ 的第 $k(k>n)$ 个数为 $\\sum^{k−1}_{i=k−n} S_i$。如果这个数 $N$ 会出现在对应的类斐波那契数列 $S$ 中，那么 $N$ 就是一个类斐波那契循环数。\n\n例如对于 $197$，对应的数列 $S$ 为 $\\{1, 9, 7, 17, 33, 57, 107, 197, \\dots \\}$，$197$ 出现在 $S$ 中，所以 $197$ 是一个类斐波那契循环数。\n\n\n请问在 $0$ 至 $10^7$ 中，最大的类斐波那契循环数是多少？\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。", "inputFormat": "本题无输入。", "outputFormat": "一行一个整数，表示你算出的答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P11043", "type": "P", "difficulty": 2, "samples": [["3\nadd 1\nadd 2\nquery\nadd 1\nsync 1\nsync 1\nsync 2\nquery\nsync 1\nquery\nsync 2\nsync 2\nsync 1\nquery", "0\n1\n1\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "队列", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 分布式队列", "background": "", "description": "小蓝最近学习了一种神奇的队列：分布式队列。简单来说，分布式队列包含 $N$ 个节点（编号为 $0$ 至 $N−1$，其中 $0$ 号为主节点），其中只有一个主节点，其余为副节点。主、副节点中都各自维护着一个队列，当往分布式队列中添加元素时都是由主节点完成的（每次都会添加元素到队列尾部）；副节点只负责同步主节点中的队列。可以认为主/副节点中的队列是一个长度无限的一维数组，下标为 $0,1,2,3,\\dots$，同时副节点中的元素的同步顺序和主节点中的元素添加顺序保持一致。\n\n由于副本的同步速度各异，因此为了保障数据的一致性，元素添加到主节点后，需要同步到所有的副节点后，才具有可见性。\n\n给出一个分布式队列的运行状态，所有的操作都按输入顺序执行。你需要回答在某个时刻，队列中有多少个元素具有可见性。", "inputFormat": "第一行包含一个整数 $N$，表示节点个数。\n\n\n接下来包含多行输入，每一行包含一个操作，操作类型共有以下三个：add、sync 和 query，各自的输入格式如下：\n\n1. `add element`：表示这是一个添加操作，将元素 $element$ 添加到队列中；\n\n2. `sync follower_id`：表示这是一个同步操作，$follower\\_id$ 号副节点会从主节点中同步下一个自己缺失的元素；\n\n3. `query`：查询操作，询问当前分布式队列中有多少个元素具有可见性。", "outputFormat": "对于每一个 query 操作，输出一行，包含一个整数表示答案。", "hint": "**【样例说明】**\n\n执行到第一个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2]$\n- 节点 $1$：$[]$\n- 节点 $2$：$[]$\n\n两个副节点中都无元素，因此答案为 $0$。\n \n执行到第二个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2,1]$\n- 节点 $1$：$[1,2]$\n- 节点 $2$：$[1]$\n\n只有下标为 $0$ 的元素被所有节点同步，因此答案为 $1$。\n\n执行到第三个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2,1]$\n- 节点 $1$：$[1,2,1]$\n- 节点 $2$：$[1]$\n\n只有下标为 $0$ 的元素被所有节点同步，因此答案为 $1$。\n\n执行到第四个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2,1]$\n- 节点 $1$：$[1,2,1]$\n- 节点 $2$：$[1,2,1]$\n\n三个元素都被所有节点同步，因此答案为 $3$。\n\n**【评测用例规模与约定】**\n\n设输入的操作数为 $q$。\n\n对于 $30\\%$ 的评测用例：$1\\leq q \\leq 100$。\n\n对于 $100\\%$ 的评测用例：$1\\leq q\\leq 2000$，$1\\leq N\\leq 10$，$1\\leq follower\\_id<N$，$0\\leq element\\leq10^5$。\n\n**数据保证执行同步操作时，$follower\\_id$ 号副节点一定缺失元素**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 分布式队列", "background": "", "description": "小蓝最近学习了一种神奇的队列：分布式队列。简单来说，分布式队列包含 $N$ 个节点（编号为 $0$ 至 $N−1$，其中 $0$ 号为主节点），其中只有一个主节点，其余为副节点。主、副节点中都各自维护着一个队列，当往分布式队列中添加元素时都是由主节点完成的（每次都会添加元素到队列尾部）；副节点只负责同步主节点中的队列。可以认为主/副节点中的队列是一个长度无限的一维数组，下标为 $0,1,2,3,\\dots$，同时副节点中的元素的同步顺序和主节点中的元素添加顺序保持一致。\n\n由于副本的同步速度各异，因此为了保障数据的一致性，元素添加到主节点后，需要同步到所有的副节点后，才具有可见性。\n\n给出一个分布式队列的运行状态，所有的操作都按输入顺序执行。你需要回答在某个时刻，队列中有多少个元素具有可见性。", "inputFormat": "第一行包含一个整数 $N$，表示节点个数。\n\n\n接下来包含多行输入，每一行包含一个操作，操作类型共有以下三个：add、sync 和 query，各自的输入格式如下：\n\n1. `add element`：表示这是一个添加操作，将元素 $element$ 添加到队列中；\n\n2. `sync follower_id`：表示这是一个同步操作，$follower\\_id$ 号副节点会从主节点中同步下一个自己缺失的元素；\n\n3. `query`：查询操作，询问当前分布式队列中有多少个元素具有可见性。", "outputFormat": "对于每一个 query 操作，输出一行，包含一个整数表示答案。", "hint": "**【样例说明】**\n\n执行到第一个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2]$\n- 节点 $1$：$[]$\n- 节点 $2$：$[]$\n\n两个副节点中都无元素，因此答案为 $0$。\n \n执行到第二个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2,1]$\n- 节点 $1$：$[1,2]$\n- 节点 $2$：$[1]$\n\n只有下标为 $0$ 的元素被所有节点同步，因此答案为 $1$。\n\n执行到第三个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2,1]$\n- 节点 $1$：$[1,2,1]$\n- 节点 $2$：$[1]$\n\n只有下标为 $0$ 的元素被所有节点同步，因此答案为 $1$。\n\n执行到第四个 query 时，队列内容如下：\n\n- 节点 $0$：$[1,2,1]$\n- 节点 $1$：$[1,2,1]$\n- 节点 $2$：$[1,2,1]$\n\n三个元素都被所有节点同步，因此答案为 $3$。\n\n**【评测用例规模与约定】**\n\n设输入的操作数为 $q$。\n\n对于 $30\\%$ 的评测用例：$1\\leq q \\leq 100$。\n\n对于 $100\\%$ 的评测用例：$1\\leq q\\leq 2000$，$1\\leq N\\leq 10$，$1\\leq follower\\_id<N$，$0\\leq element\\leq10^5$。\n\n**数据保证执行同步操作时，$follower\\_id$ 号副节点一定缺失元素**。", "locale": "zh-CN"}}}
{"pid": "P11044", "type": "P", "difficulty": 3, "samples": [["2\n3 0 1 0 1\n0 2 2 1 1", "6\n10"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 食堂", "background": "", "description": "S 学校里一共有 $a_2$ 个两人寝、$a_3$ 个三人寝，$a_4$ 个四人寝，而食堂里有 $b_4$ 个四人桌和 $b_6$ 个六人桌。学校想要安排学生们在食堂用餐，并且满足每个寝室里的同学都在同一桌就坐，请问这个食堂最多同时满足多少同学用餐？", "inputFormat": "**本题采用多组数据输入。**\n\n输入共 $q+1$ 行。\n\n第一行为一个正整数 $q$ 表示数据组数。\n\n后面 $q$ 行，每行五个非负整数 $a_2,a_3,a_4,b_4,b_6$ 表示一组数据。", "outputFormat": "输出共 $q$ 行，每行一个整数表示对应输入数据的答案。", "hint": "**【样例说明】**\n\n对于第一组数据，只有一个六人桌，因此最多安排三个两人寝的同学就餐，答案为 $(2+2+2)=6$。\n\n对于第二组数据，用一个六人桌安排两个三人寝的同学，用一个四人桌安排一个四人寝的同学，答案为 $(3+3)+(4)=10$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $a_2+a_3+a_4\\leq 8$。\n\n对于 $100\\%$ 的评测用例，保证 $q\\leq 100$，$b_4+b_6\\leq a_2+a_3+a_4\\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 食堂", "background": "", "description": "S 学校里一共有 $a_2$ 个两人寝、$a_3$ 个三人寝，$a_4$ 个四人寝，而食堂里有 $b_4$ 个四人桌和 $b_6$ 个六人桌。学校想要安排学生们在食堂用餐，并且满足每个寝室里的同学都在同一桌就坐，请问这个食堂最多同时满足多少同学用餐？", "inputFormat": "**本题采用多组数据输入。**\n\n输入共 $q+1$ 行。\n\n第一行为一个正整数 $q$ 表示数据组数。\n\n后面 $q$ 行，每行五个非负整数 $a_2,a_3,a_4,b_4,b_6$ 表示一组数据。", "outputFormat": "输出共 $q$ 行，每行一个整数表示对应输入数据的答案。", "hint": "**【样例说明】**\n\n对于第一组数据，只有一个六人桌，因此最多安排三个两人寝的同学就餐，答案为 $(2+2+2)=6$。\n\n对于第二组数据，用一个六人桌安排两个三人寝的同学，用一个四人桌安排一个四人寝的同学，答案为 $(3+3)+(4)=10$。\n\n**【评测用例规模与约定】**\n\n对于 $20\\%$ 的评测用例，保证 $a_2+a_3+a_4\\leq 8$。\n\n对于 $100\\%$ 的评测用例，保证 $q\\leq 100$，$b_4+b_6\\leq a_2+a_3+a_4\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P11045", "type": "P", "difficulty": 4, "samples": [["1000\n0.05", "5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "枚举", "期望", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 最优分组", "background": "", "description": "小蓝开了一家宠物店，最近有一种 X 病毒在动物之间进行传染，小蓝为了以防万一打算购买测试剂对自己的宠物进行病毒感染测试。\n\n为了减少使用的测试剂数目，小蓝想到了一个好方法：将 $N$ 个宠物平均分为若干组，使得每组恰好有 $K$ 只宠物，这样对同一组的宠物进行采样并混合后用一个试剂进行检测，如果测试结果为阴性则说明组内宠物都未感染 X 病毒；如果是阳性的话则需要对组内所有 $K$ 只宠物单独检测，需要再消耗 $K$ 支测试剂（当 $K=1$ 时，就没必要再次进行单独检测了，因为组内只有一只宠物，一次检测便能确认答案）。\n\n现在我们已知小蓝的宠物被感染的概率为 $p$，请问 $K$ 应该取值为多少，才能使得期望的测试剂的消耗数目最少？如果有多个答案，请输出最小的 $K$。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，一个浮点数 $p$。", "outputFormat": "输出一行，一个整数 $K$ 表示答案。", "hint": "**【评测用例规模与约定】**\n\n对于 $30\\%$ 的评测用例：$1\\leq N\\leq 10$。\n\n对于 $60\\%$ 的评测用例：$1\\leq N\\leq 1000$。\n\n对于 $100\\%$ 的评测用例：$1\\leq N\\leq 10^6$，$0\\leq p\\leq 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 最优分组", "background": "", "description": "小蓝开了一家宠物店，最近有一种 X 病毒在动物之间进行传染，小蓝为了以防万一打算购买测试剂对自己的宠物进行病毒感染测试。\n\n为了减少使用的测试剂数目，小蓝想到了一个好方法：将 $N$ 个宠物平均分为若干组，使得每组恰好有 $K$ 只宠物，这样对同一组的宠物进行采样并混合后用一个试剂进行检测，如果测试结果为阴性则说明组内宠物都未感染 X 病毒；如果是阳性的话则需要对组内所有 $K$ 只宠物单独检测，需要再消耗 $K$ 支测试剂（当 $K=1$ 时，就没必要再次进行单独检测了，因为组内只有一只宠物，一次检测便能确认答案）。\n\n现在我们已知小蓝的宠物被感染的概率为 $p$，请问 $K$ 应该取值为多少，才能使得期望的测试剂的消耗数目最少？如果有多个答案，请输出最小的 $K$。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，一个浮点数 $p$。", "outputFormat": "输出一行，一个整数 $K$ 表示答案。", "hint": "**【评测用例规模与约定】**\n\n对于 $30\\%$ 的评测用例：$1\\leq N\\leq 10$。\n\n对于 $60\\%$ 的评测用例：$1\\leq N\\leq 1000$。\n\n对于 $100\\%$ 的评测用例：$1\\leq N\\leq 10^6$，$0\\leq p\\leq 1$。", "locale": "zh-CN"}}}
{"pid": "P11046", "type": "P", "difficulty": 3, "samples": [["3 2 3\n1 2\n2 3\n2 1\n2 0\n1 1", "2.00"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广度优先搜索 BFS", "概率论", "期望", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 星际旅行", "background": "备注：原题（Java）时间限制 3.0s，空间限制 512 MB。", "description": "小明国庆节准备去某星系进行星际旅行，这个星系里一共有 $n$ 个星球，其中布置了 $m$ 道双向传送门，第 $i$ 道传送门可以连接 $a_i$，$b_i$ 两颗星球（$a_i \\neq b_i$ 且任意两颗星球之间最多只有一个传送门）。\n\n他看中了一款 “旅游盲盒”，一共有 $Q$ 个盲盒，第 $i$ 个盲盒里的旅行方案规定了旅行的起始星球 $x_i$ 和最多可以使用传送门的次数 $y_i$。只要从起始星球出发，使用传送门不超过规定次数能到达的所有星球都可以去旅行。\n\n小明关心在每个方案中有多少个星球可以旅行到。小明只能在这些盲盒里随机选一个购买，他想知道能旅行到的不同星球的数量的期望是多少。", "inputFormat": "输入共 $m + Q + 1$ 行。\n\n第一行为三个正整数 $n, m, Q$。\n\n后面 $m$ 行，每行两个正整数 $a_i$，$b_i$。\n\n后面 $Q$ 行，每行两个整数 $x_i$，$y_i$。", "outputFormat": "输出共一行，一个浮点数（四舍五入保留两位小数）。", "hint": "【样例解释】\n\n- 第一个盲盒可以旅行到 $1, 2, 3$。\n- 第二个盲盒可以旅行到 $2$。\n- 第三个盲盒可以旅行到 $1, 2$。\n\n所以期望是 $(3 + 1 + 2) / 3 = 2.00$。\n\n【数据范围】\n\n- 对于 $20 \\%$ 的评测用例，保证 $n \\leq 300$。\n- 对于 $100 \\%$ 的评测用例，保证 $n \\leq 1000$，$m \\leq \\min \\left\\{\\dfrac{n(n - 1)}{2}, 5n\\right\\}$，$Q \\leq 50000$，$0 \\leq y_i \\leq n$，$1 \\leq x_i \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 星际旅行", "background": "备注：原题（Java）时间限制 3.0s，空间限制 512 MB。", "description": "小明国庆节准备去某星系进行星际旅行，这个星系里一共有 $n$ 个星球，其中布置了 $m$ 道双向传送门，第 $i$ 道传送门可以连接 $a_i$，$b_i$ 两颗星球（$a_i \\neq b_i$ 且任意两颗星球之间最多只有一个传送门）。\n\n他看中了一款 “旅游盲盒”，一共有 $Q$ 个盲盒，第 $i$ 个盲盒里的旅行方案规定了旅行的起始星球 $x_i$ 和最多可以使用传送门的次数 $y_i$。只要从起始星球出发，使用传送门不超过规定次数能到达的所有星球都可以去旅行。\n\n小明关心在每个方案中有多少个星球可以旅行到。小明只能在这些盲盒里随机选一个购买，他想知道能旅行到的不同星球的数量的期望是多少。", "inputFormat": "输入共 $m + Q + 1$ 行。\n\n第一行为三个正整数 $n, m, Q$。\n\n后面 $m$ 行，每行两个正整数 $a_i$，$b_i$。\n\n后面 $Q$ 行，每行两个整数 $x_i$，$y_i$。", "outputFormat": "输出共一行，一个浮点数（四舍五入保留两位小数）。", "hint": "【样例解释】\n\n- 第一个盲盒可以旅行到 $1, 2, 3$。\n- 第二个盲盒可以旅行到 $2$。\n- 第三个盲盒可以旅行到 $1, 2$。\n\n所以期望是 $(3 + 1 + 2) / 3 = 2.00$。\n\n【数据范围】\n\n- 对于 $20 \\%$ 的评测用例，保证 $n \\leq 300$。\n- 对于 $100 \\%$ 的评测用例，保证 $n \\leq 1000$，$m \\leq \\min \\left\\{\\dfrac{n(n - 1)}{2}, 5n\\right\\}$，$Q \\leq 50000$，$0 \\leq y_i \\leq n$，$1 \\leq x_i \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P11047", "type": "P", "difficulty": 5, "samples": [["2\n5\n1 1 1 1 1\n1 0 1 1 0\n1 0 0 0 1\n1 0 1 0 1\n1 1 1 1 1\n5\n1 0 0 1 1\n1 1 1 1 1\n1 1 1 1 0\n1 1 1 0 1\n0 1 1 1 1", "No\nYes"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2024", "剪枝", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] LITS 游戏", "background": "备注：原题（Java）时间限制 3.0s，空间限制 512 MB。", "description": "俄罗斯方块是一款风靡全球的游戏，在游戏中有多种方格图案，我们只关注这四个经典的方块图案：**LITS**，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/run4pn8d.png)\n\nLITS 这四种方块都是由四个相同大小的小方块组成的。 \n现在给出一副大小为 $N \\times N$ 的格子图，每个格子上都有一个数字 $0/1$，如果格子处的数字为 $1$ 说明这个格子上有一个小方块，数字为 $0$ 则没有。 \n你需要判断从这个格子图上是否可以找出 LITS 四个方块图案（每个方块图案之间都是独立的，不存在不同的图案公用同一个小方块的情况）。其中 LITS 方块的形状旋转任意个 $90^\\circ$ 都是合法的，但不允许翻转。", "inputFormat": "第一行一个整数 $T$，表示有 $T$ 组数据。 \n每组数据的第一行包含一个整数 $N$，表示格子图大小。 \n接下来输入 $N$ 行，每行 $N$ 个值为 $0/1$ 的整数，表示格子布局。", "outputFormat": "对于每组数据，输出一行包含一个字符串。如果此组数据满足题意则输出 `Yes`，否则输出 `No`。", "hint": "【样例解释】\n\n对于样例中的第二个格子图，一种 LITS 的摆放方案如下：\n\n```txt\n1 0 0 1 1\nL S T T T\nL S S T 0\nL L S 0 1\n0 I I I I\n```\n\n【数据范围】\n\n- 对于 $30 \\%$ 的评测用例：$1 \\leq N \\leq 5$。\n- 对于 $60 \\%$ 的评测用例：$1 \\leq N \\leq 10$。\n- 对于 $100 \\%$ 的评测用例：$1 \\leq T \\leq 10$，$1 \\leq N \\leq 50$。\n\n【特别备注】\n\n由于讨论情况较多，本题部分其他平台的题解可能存在错误。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] LITS 游戏", "background": "备注：原题（Java）时间限制 3.0s，空间限制 512 MB。", "description": "俄罗斯方块是一款风靡全球的游戏，在游戏中有多种方格图案，我们只关注这四个经典的方块图案：**LITS**，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/run4pn8d.png)\n\nLITS 这四种方块都是由四个相同大小的小方块组成的。 \n现在给出一副大小为 $N \\times N$ 的格子图，每个格子上都有一个数字 $0/1$，如果格子处的数字为 $1$ 说明这个格子上有一个小方块，数字为 $0$ 则没有。 \n你需要判断从这个格子图上是否可以找出 LITS 四个方块图案（每个方块图案之间都是独立的，不存在不同的图案公用同一个小方块的情况）。其中 LITS 方块的形状旋转任意个 $90^\\circ$ 都是合法的，但不允许翻转。", "inputFormat": "第一行一个整数 $T$，表示有 $T$ 组数据。 \n每组数据的第一行包含一个整数 $N$，表示格子图大小。 \n接下来输入 $N$ 行，每行 $N$ 个值为 $0/1$ 的整数，表示格子布局。", "outputFormat": "对于每组数据，输出一行包含一个字符串。如果此组数据满足题意则输出 `Yes`，否则输出 `No`。", "hint": "【样例解释】\n\n对于样例中的第二个格子图，一种 LITS 的摆放方案如下：\n\n```txt\n1 0 0 1 1\nL S T T T\nL S S T 0\nL L S 0 1\n0 I I I I\n```\n\n【数据范围】\n\n- 对于 $30 \\%$ 的评测用例：$1 \\leq N \\leq 5$。\n- 对于 $60 \\%$ 的评测用例：$1 \\leq N \\leq 10$。\n- 对于 $100 \\%$ 的评测用例：$1 \\leq T \\leq 10$，$1 \\leq N \\leq 50$。\n\n【特别备注】\n\n由于讨论情况较多，本题部分其他平台的题解可能存在错误。", "locale": "zh-CN"}}}
{"pid": "P11048", "type": "P", "difficulty": 4, "samples": [["5\n1 10 0\n6 6 0\n8 6 1\n6 10 0\n1 2 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形数据结构", "树状数组", "2024", "蓝桥杯省赛"], "title": "[蓝桥杯 2024 省 Java B] 拼十字", "background": "备注：原题（Java）时间限制 3.0s，空间限制 512 MB。", "description": "在 LQ 国神秘的古老森林，有一座被称为 “拼十字” 的神秘遗迹。据传， “拼十字” 是由古代文明建造的，它是一个巨大的石头结构，由两个巨大的矩形交叉叠放在一起，形成了一个庄严而神秘的十字形状。这个遗迹被认为是连接人类和神灵之间的通道，拥有神秘的力量和能量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qn9sqnae.png)\n\n现在给出 $N$ 个矩形，其中第 $i$ 个矩形的长度和宽度分别为 $l_i$，$w_i$，并且矩形的颜色 $c_i$ 为红 $(0)$、黄 $(1)$、蓝 $(2)$ 中的一种。现在小蓝想知道在这 $N$ 个矩形中有多少对可以“拼十字”？\n\n两个矩形可以“拼十字”的充要条件是：\n\n1. 两个矩形的颜色不同；\n2. 矩形 $1$ 的长度严格大于矩形 $2$ 的长度并且矩形 $1$ 的宽度严格小于矩形 $2$ 的宽度。\n\n注意，矩形长度和宽度属性是固定的，是不可以通过旋转矩形而发生转变的。", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 个矩形。\n\n接下来 $N$ 行，每行输入三个整数 $l$、$w$、$c$ 表示一个矩形的长、宽和颜色。", "outputFormat": "输出一个整数表示答案。由于答案可能会很大，所以你需要将答案对 $10^9 + 7$ 取模之后输出。", "hint": "【样例解释】\n\n第 $3$ 个矩形可以和第 $1$ 个矩形拼十字，第 $3$ 个矩形也可以和第 $4$ 个矩形拼十字。所以一共有两对矩形可以拼十字，答案为 $2$。\n\n【数据范围】\n\n- 对于 $30\\%$ 的评测用例：$1 \\leq N \\leq 5000$。\n- 对于 $100 \\%$ 的评测用例：$1 \\leq N \\leq 10^5$，$1 \\leq l,w \\leq 10^5$，$0 \\leq c \\leq 2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2024 省 Java B] 拼十字", "background": "备注：原题（Java）时间限制 3.0s，空间限制 512 MB。", "description": "在 LQ 国神秘的古老森林，有一座被称为 “拼十字” 的神秘遗迹。据传， “拼十字” 是由古代文明建造的，它是一个巨大的石头结构，由两个巨大的矩形交叉叠放在一起，形成了一个庄严而神秘的十字形状。这个遗迹被认为是连接人类和神灵之间的通道，拥有神秘的力量和能量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qn9sqnae.png)\n\n现在给出 $N$ 个矩形，其中第 $i$ 个矩形的长度和宽度分别为 $l_i$，$w_i$，并且矩形的颜色 $c_i$ 为红 $(0)$、黄 $(1)$、蓝 $(2)$ 中的一种。现在小蓝想知道在这 $N$ 个矩形中有多少对可以“拼十字”？\n\n两个矩形可以“拼十字”的充要条件是：\n\n1. 两个矩形的颜色不同；\n2. 矩形 $1$ 的长度严格大于矩形 $2$ 的长度并且矩形 $1$ 的宽度严格小于矩形 $2$ 的宽度。\n\n注意，矩形长度和宽度属性是固定的，是不可以通过旋转矩形而发生转变的。", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 个矩形。\n\n接下来 $N$ 行，每行输入三个整数 $l$、$w$、$c$ 表示一个矩形的长、宽和颜色。", "outputFormat": "输出一个整数表示答案。由于答案可能会很大，所以你需要将答案对 $10^9 + 7$ 取模之后输出。", "hint": "【样例解释】\n\n第 $3$ 个矩形可以和第 $1$ 个矩形拼十字，第 $3$ 个矩形也可以和第 $4$ 个矩形拼十字。所以一共有两对矩形可以拼十字，答案为 $2$。\n\n【数据范围】\n\n- 对于 $30\\%$ 的评测用例：$1 \\leq N \\leq 5000$。\n- 对于 $100 \\%$ 的评测用例：$1 \\leq N \\leq 10^5$，$1 \\leq l,w \\leq 10^5$，$0 \\leq c \\leq 2$。", "locale": "zh-CN"}}}
{"pid": "P11049", "type": "P", "difficulty": 5, "samples": [["5\n15 5 1\n12 4 2\n2 5 2\n10 6 3\n21 3 2\n3\n5\n9\n1\n", "16\n11\n23\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000, 2048000]}, "tags": ["线段树", "2024", "IOI", "交互题", "矩阵乘法", "分块"], "title": "[IOI 2024] 尼罗河船运", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。但请勿使用 C++14 (GCC 9)", "description": "你想通过尼罗河来运输 $N$ 件手工艺品。这些手工艺品从 $0$ 到 $N-1$ 编号。第 $i$（$0 \\leq i < N$）件手工艺品的重量是 $W[i]$。\n\n\n\n为了运输这些手工艺品，你使用了特制的船。每艘船**最多**可以运**两件**手工艺品。\n\n\n* 如果你决定将单件手工艺品放在一艘船上，那么这件手工艺品的重量可以是任意的。\n* 如果你想把两件手工艺品一起放在同一艘船上，你必须保证这艘船的平衡。具体来说，如果手工艺品 $p$ 和 $q$（$0 \\leq p < q < N$）的重量差的绝对值不超过 $D$，即满足 $|W[p] - W[q]| \\leq D$，那么你可以将它们一起放在同一艘船上。\n\n\n\n你必须付费来运一件手工艺品，其运费取决于同一艘船上所运载的手工艺品数量。手工艺品 $i$（$0 \\leq i < N$）的运费是：\n\n* $A[i]$，如果你把手工艺品 $i$ 单独放在船上，或者\n* $B[i]$，如果你把手工艺品 $i$ 和另一件手工艺品一起放在船上。\n\n\n注意在第二种情况中，你要为船上两件手工艺品都支付运费。具体来说，如果你决定用同一艘船运输手工艺品 $p$ 和 $q$（$0 \\leq p < q < N$），你需要支付 $B[p] + B[q]$。\n\n\n\n一件手工艺品单独用一艘船运输的费用，总是比与其他手工艺品合用一艘船时的费用要高，所以对任意满足 $0 \\leq i < N$ 的 $i$，都有 $B[i] < A[i]$。\n\n\n麻烦的是，由于尼罗河变化莫测，导致 $D$ 的值经常改变。你的任务是回答 $Q$ 个问题，从 $0$ 到 $Q-1$ 编号。这些问题用一个长度为 $Q$ 的数组 $E$ 来描述。问题 $j$（$0 \\leq j < Q$）的答案，是在 $D$ 的值等于 $E[j]$ 时运输所有 $N$ 件手工艺品的最小总代价。", "inputFormat": "评测程序按如下顺序读取输入数据：\n\n```plain\nN\nW[0] A[0] B[0]\nW[1] A[1] B[1]\n...\nW[N-1] A[N-1] B[N-1]\nQ\nE[0]\nE[1]\n...\nE[Q-1]\n```", "outputFormat": "评测程序按如下顺序输出：\n\n\n\n```plain\nR[0]\nR[1]\n...\nR[S-1]\n```\n\n这里，$S$ 是 `calculate_costs` 所返回的数组 $R$ 的长度。", "hint": "## 实现细节\n\n\n你需要实现以下函数。\n\n```\nstd::vector<long long> calculate_costs(\n    std::vector<int> W, std::vector<int> A, \n    std::vector<int> B, std::vector<int> E)\n```\n\n* $W$，$A$，$B$：长度均为 $N$ 的整数数组，分别给出手工艺品的重量和运费。\n* $E$：长度为 $Q$ 的整数数组，给出每个问题中的 $D$ 值。\n* 该函数应该返回一个包含 $Q$ 个整数的数组 $R$，给出运输手工艺品的最小总代价，其中 $R[j]$ 对应 $D$ 等于 $E[j]$（对每个满足 $0 \\leq j < Q$ 的 $j$）时的运费。\n* 对于每个测试用例，该函数恰好被调用一次。\n\n\n## 约束条件\n\n* $1 \\leq N \\leq 100\\,000$。\n* $1 \\leq Q \\leq 100\\,000$。\n* 对每个满足 $0 \\leq i < N$ 的 $i$，都有 $1 \\leq W[i] \\leq 10^{9}$。\n* 对每个满足 $0 \\leq i < N$ 的 $i$，都有 $1 \\leq B[i] < A[i] \\leq 10^{9}$。\n* 对每个满足 $0 \\leq j < Q$ 的 $j$，都有 $1 \\leq E[j] \\leq 10^{9}$。\n\n\n## 子任务\n\n| 子任务 | 分数 | 额外的约束条件                                               |\n| :----: | :--: | ------------------------------------------------------------ |\n|   1    | $6$  | $Q \\leq 5$；$N \\leq 2000$；对每个满足 $0 \\leq i < N$ 的 $i$，都有 $W[i] = 1$ |\n|   2    | $13$ | $Q \\leq 5$；对每个满足  $0 \\leq i < N$ 的 $i$，都有 $W[i] = i+1$ |\n|   3    | $17$ | $Q \\leq 5$；对每个满足  $0 \\leq i < N$ 的 $i$，都有 $A[i] = 2$ 且 $B[i] = 1$ |\n|   4    | $11$ | $Q \\leq 5$；$N \\leq 2000$                                    |\n|   5    | $20$ | $Q \\leq 5$                                                   |\n|   6    | $15$ | 对每个满足 $0 \\leq i < N$ 的 $i$，都有 $A[i] = 2$ 且 $B[i] = 1$ |\n|   7    | $18$ | 没有额外的约束条件。                                         |\n\n\n## 例子\n\n\n考虑以下调用。\n\n```\ncalculate_costs([15, 12, 2, 10, 21],\n                [5, 4, 5, 6, 3],\n                [1, 2, 2, 3, 2],\n                [5, 9, 1])\n```\n\n\n在该例子中，我们有 $N=5$ 件手工艺品和 $Q=3$ 个问题。\n\n\n\n在第一个问题中，$D = 5$。你可以把手工艺品 $0$ 和手工艺品 $3$ 放在同一艘船上（因为 $|15 - 10| \\leq 5$），而其他手工艺品都各自放在不同的船上。这使得运输所有手工艺品的总代价最小，即 $1+4+5+3+3 = 16$。\n\n\n在第二个问题中，$D = 9$。你可以把手工艺品 $0$ 和手工艺品 $1$ 放在同一艘船上（因为 $|15 - 12| \\leq 9$），而把手工艺品 $2$ 和手工艺品 $3$ 放在同一艘船上（因为 $|2 - 10| \\leq 9$）。剩下的手工艺品单独用一艘船运输。这使得运输所有手工艺品的总代价最小，即 $1+2+2+3+3 = 11$。\n\n\n在最后一个问题中，$D = 1$。你需要把每件手工艺品都单独用一艘船运输。这使得运输所有手工艺品的总代价最小，即 $5+4+5+6+3 = 23$。\n\n因此，该函数应该返回 $[16, 11, 23]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2024] 尼罗河船运", "background": "这是一道交互题，你只需要实现代码中要求的函数。\n\n你的代码不需要引用任何额外的头文件，也不需要实现 `main` 函数。\n\n本题仅支持 C++ 语言提交。但请勿使用 C++14 (GCC 9)", "description": "你想通过尼罗河来运输 $N$ 件手工艺品。这些手工艺品从 $0$ 到 $N-1$ 编号。第 $i$（$0 \\leq i < N$）件手工艺品的重量是 $W[i]$。\n\n\n\n为了运输这些手工艺品，你使用了特制的船。每艘船**最多**可以运**两件**手工艺品。\n\n\n* 如果你决定将单件手工艺品放在一艘船上，那么这件手工艺品的重量可以是任意的。\n* 如果你想把两件手工艺品一起放在同一艘船上，你必须保证这艘船的平衡。具体来说，如果手工艺品 $p$ 和 $q$（$0 \\leq p < q < N$）的重量差的绝对值不超过 $D$，即满足 $|W[p] - W[q]| \\leq D$，那么你可以将它们一起放在同一艘船上。\n\n\n\n你必须付费来运一件手工艺品，其运费取决于同一艘船上所运载的手工艺品数量。手工艺品 $i$（$0 \\leq i < N$）的运费是：\n\n* $A[i]$，如果你把手工艺品 $i$ 单独放在船上，或者\n* $B[i]$，如果你把手工艺品 $i$ 和另一件手工艺品一起放在船上。\n\n\n注意在第二种情况中，你要为船上两件手工艺品都支付运费。具体来说，如果你决定用同一艘船运输手工艺品 $p$ 和 $q$（$0 \\leq p < q < N$），你需要支付 $B[p] + B[q]$。\n\n\n\n一件手工艺品单独用一艘船运输的费用，总是比与其他手工艺品合用一艘船时的费用要高，所以对任意满足 $0 \\leq i < N$ 的 $i$，都有 $B[i] < A[i]$。\n\n\n麻烦的是，由于尼罗河变化莫测，导致 $D$ 的值经常改变。你的任务是回答 $Q$ 个问题，从 $0$ 到 $Q-1$ 编号。这些问题用一个长度为 $Q$ 的数组 $E$ 来描述。问题 $j$（$0 \\leq j < Q$）的答案，是在 $D$ 的值等于 $E[j]$ 时运输所有 $N$ 件手工艺品的最小总代价。", "inputFormat": "评测程序按如下顺序读取输入数据：\n\n```plain\nN\nW[0] A[0] B[0]\nW[1] A[1] B[1]\n...\nW[N-1] A[N-1] B[N-1]\nQ\nE[0]\nE[1]\n...\nE[Q-1]\n```", "outputFormat": "评测程序按如下顺序输出：\n\n\n\n```plain\nR[0]\nR[1]\n...\nR[S-1]\n```\n\n这里，$S$ 是 `calculate_costs` 所返回的数组 $R$ 的长度。", "hint": "## 实现细节\n\n\n你需要实现以下函数。\n\n```\nstd::vector<long long> calculate_costs(\n    std::vector<int> W, std::vector<int> A, \n    std::vector<int> B, std::vector<int> E)\n```\n\n* $W$，$A$，$B$：长度均为 $N$ 的整数数组，分别给出手工艺品的重量和运费。\n* $E$：长度为 $Q$ 的整数数组，给出每个问题中的 $D$ 值。\n* 该函数应该返回一个包含 $Q$ 个整数的数组 $R$，给出运输手工艺品的最小总代价，其中 $R[j]$ 对应 $D$ 等于 $E[j]$（对每个满足 $0 \\leq j < Q$ 的 $j$）时的运费。\n* 对于每个测试用例，该函数恰好被调用一次。\n\n\n## 约束条件\n\n* $1 \\leq N \\leq 100\\,000$。\n* $1 \\leq Q \\leq 100\\,000$。\n* 对每个满足 $0 \\leq i < N$ 的 $i$，都有 $1 \\leq W[i] \\leq 10^{9}$。\n* 对每个满足 $0 \\leq i < N$ 的 $i$，都有 $1 \\leq B[i] < A[i] \\leq 10^{9}$。\n* 对每个满足 $0 \\leq j < Q$ 的 $j$，都有 $1 \\leq E[j] \\leq 10^{9}$。\n\n\n## 子任务\n\n| 子任务 | 分数 | 额外的约束条件                                               |\n| :----: | :--: | ------------------------------------------------------------ |\n|   1    | $6$  | $Q \\leq 5$；$N \\leq 2000$；对每个满足 $0 \\leq i < N$ 的 $i$，都有 $W[i] = 1$ |\n|   2    | $13$ | $Q \\leq 5$；对每个满足  $0 \\leq i < N$ 的 $i$，都有 $W[i] = i+1$ |\n|   3    | $17$ | $Q \\leq 5$；对每个满足  $0 \\leq i < N$ 的 $i$，都有 $A[i] = 2$ 且 $B[i] = 1$ |\n|   4    | $11$ | $Q \\leq 5$；$N \\leq 2000$                                    |\n|   5    | $20$ | $Q \\leq 5$                                                   |\n|   6    | $15$ | 对每个满足 $0 \\leq i < N$ 的 $i$，都有 $A[i] = 2$ 且 $B[i] = 1$ |\n|   7    | $18$ | 没有额外的约束条件。                                         |\n\n\n## 例子\n\n\n考虑以下调用。\n\n```\ncalculate_costs([15, 12, 2, 10, 21],\n                [5, 4, 5, 6, 3],\n                [1, 2, 2, 3, 2],\n                [5, 9, 1])\n```\n\n\n在该例子中，我们有 $N=5$ 件手工艺品和 $Q=3$ 个问题。\n\n\n\n在第一个问题中，$D = 5$。你可以把手工艺品 $0$ 和手工艺品 $3$ 放在同一艘船上（因为 $|15 - 10| \\leq 5$），而其他手工艺品都各自放在不同的船上。这使得运输所有手工艺品的总代价最小，即 $1+4+5+3+3 = 16$。\n\n\n在第二个问题中，$D = 9$。你可以把手工艺品 $0$ 和手工艺品 $1$ 放在同一艘船上（因为 $|15 - 12| \\leq 9$），而把手工艺品 $2$ 和手工艺品 $3$ 放在同一艘船上（因为 $|2 - 10| \\leq 9$）。剩下的手工艺品单独用一艘船运输。这使得运输所有手工艺品的总代价最小，即 $1+2+2+3+3 = 11$。\n\n\n在最后一个问题中，$D = 1$。你需要把每件手工艺品都单独用一艘船运输。这使得运输所有手工艺品的总代价最小，即 $5+4+5+6+3 = 23$。\n\n因此，该函数应该返回 $[16, 11, 23]$。", "locale": "zh-CN"}}}
{"pid": "P11050", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "IOI", "交互题", "Special Judge", "通信题"], "title": "[IOI 2024] 消息篡改者", "background": "不要 $\\texttt{\\#include \"message.h\"}$。\n\n请使用 C++ 20 提交，并在文件头粘贴如下的内容：\n\n```cpp\n#include <vector>\n\nstd::vector<bool> send_packet(std::vector<bool>);\nvoid send_message(std::vector<bool>, std::vector<bool>);\nstd::vector<bool> receive_message(std::vector<std::vector<bool>>);\n```", "description": "## 任务描述\n\nAisha 和 Basma 是两位互相通信的朋友。Aisha 有一条消息 $M$ 想要发给 Basma，该消息是由 $S$ 个比特（即若干 0 或 1）组成的序列。Aisha 通过发送**数据包**来跟 Basma 通信。一个数据包是由 $31$ 个比特组成的序列，对应的位置从 $0$ 到 $30$ 编号。Aisha 想向 Basma 发送消息 $M$ 时，会发送若干数据包。\n\n然而第三个人 Cleopatra 在破坏 Aisha 和 Basma 之间的通信，能够**篡改**发送的数据包。在每个数据包中，Cleopatra 可以修改恰好 $15$ 个位置的比特。具体来说，给定长度为 $31$ 的数组 $C$，其中每个元素为 $0$ 或 $1$，含义如下：\n\n* $C[i] = 1$ 表示位置为 $i$ 的比特可以被 Cleopatra 修改。我们称此类位置是被 Cleopatra **控制**的。\n* $C[i] = 0$ 表示位置为 $i$ 的比特不能被 Cleopatra 修改。\n\n数组 $C$ 恰好包含 $15$ 个 $1$ 和 $16$ 个 $0$。当发送消息 $M$ 时，Cleopatra 控制的位置集合对于所有数据包都是相同的。Aisha 清楚地知道哪 $15$ 个位置被 Cleopatra 控制。Basma 只知道有 $15$ 个位置被 Cleopatra 控制，但不知道是哪些位置。\n\n令 $A$ 为 Aisha 决定要发送的数据包（称之为**原始数据包**）。令 $B$ 为 Basma 收到的数据包（称之为**篡改数据包**）。对每个在 $0 \\leq i < 31$ 的 $i$ 都有：\n\n* 如果 Cleopatra 不能控制位置为 $i$ 的比特（$C[i]=0$），那么 Basma 将能收到 Aisha 发送的第 $i$ 个比特（$B[i]=A[i]$），\n* 否则，如果 Cleopatra 控制了位置为 $i$ 的比特（$C[i]=1$），那么 $B[i]$ 的值由 Cleopatra 决定。\n\n每个数据包发送后，Aisha 会立刻知道被篡改后的数据包内容。\n\n当 Aisha 发送完所有数据包后，Basma **按照发送顺序**接收到所有被篡改的数据包，她必须重建原始消息 $M$。\n\n你的任务是制定并实现某种策略，使得 Aisha 给 Basma 发送消息 $M$ 时，Basma 能够从篡改数据包中恢复 $M$。具体来说，你要实现两个函数，第一个函数进行 Aisha 的动作：给定消息 $M$ 和数组 $C$，给 Basma 发送若干数据包来传输消息。第二个函数进行 Basma 的动作：给定若干篡改数据包，恢复原始消息 $M$。\n\n## 实现细节\n\n你要实现的第一个函数是：\n\n```\nvoid send_message(std::vector<bool> M, std::vector<bool> C)\n```\n\n* $M$：长度为 $S$ 的数组，描述 Aisha 想要发给 Basma 的消息。\n* $C$：长度为 $31$ 的数组，标记 Cleopatra 控制的数据包中的位置。\n* 每个测试用例中，该函数**最多**可被调用**2100次**。\n\n该函数调用以下函数来发送数据包：\n\n```\nstd::vector<bool> send_packet(std::vector<bool> A)\n```\n\n* $A$：原始数据包（长度为 $31$ 的数组），表示 Aisha 发送的比特。\n* 此函数返回篡改数据包 $B$，表示 Basma 接收到的比特。\n* 此函数在 `send_message` 的一次调用过程中最多被调用 $100$ 次。\n\n你要实现的第二个函数是：\n\n```\nstd::vector<bool> receive_message(std::vector<std::vector<bool>> R)\n```\n\n* $R$：描述若干篡改数据包的数组。这些数据包源自 Aisha 在一次 `send_message` 调用时发送的若干数据包，且按照 Aisha 的发送顺序排列。$R$ 的每个元素是长度为 $31$ 的数组，表示一个篡改数据包。\n* 该函数应返回包含 $S$ 个比特的数组，且与原始消息 $M$ 相同。\n* 每个测试用例中，该函数可能被调用**多次**。对于每次 `send_message` 的调用，对应地该函数要有**恰好一次**调用。函数 `receive_message` 的**调用顺序**不必与对应的 `send_message` 调用顺序一致。\n\n注意在评测系统中，`send_message` 和 `receive_message` 两个函数是在**不同的程序**中来调用的。", "inputFormat": "", "outputFormat": "", "hint": "## 约束条件\n\n* $1 \\leq S \\leq 1024$\n* $C$ 恰好有 $31$ 个元素，且其中 $16$ 个为 $0$，$15$ 个为 $1$。\n\n## 子任务与评分\n\n如果在任意的测试用例中，函数 ``send_packet`` 的调用不符合上述规则，或者某个函数 `receive_message` 的调用的返回值不正确，你的解答在该测试用例上得 $0$ 分。\n\n否则，令 $Q$ 为所有测试用例中，每次 `send_message` 调用时调用函数 `send_packet` 的次数的最大值。令 $X$ 等于：\n\n- $1$，如果 $Q \\leq 66$\n- $0.95 ^ {Q - 66}$，如果 $66 < Q \\leq 100$\n- $0$，如果 $100 < Q$\n\n那么，得分将由以下式子计算获得：\n\n| 子任务 |     分数     | 额外的约束条件       |\n| :----: | :----------: | -------------------- |\n|   1    | $10 \\cdot X$ | $S \\leq 64$          |\n|   2    | $90 \\cdot X$ | 没有额外的约束条件。 |\n\n注意在某些测试用例中，评测程序的行为是**自适应的**。这意味着 `send_packet` 的返回值可能取决于它的输入参数和以前调用该函数的返回值。\n\n## 例子\n\n考虑以下调用。\n\n```\nsend_message([0, 1, 1, 0],\n             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, \n              1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n```\n\nAisha 试图发给 Basma 的消息是 $[0, 1, 1, 0]$。数据包的第 $0$ 至第 $15$ 个比特不能被 Cleopatra 修改，而第 $16$ 至第 $30$ 个比特可以被 Cleopatra 修改。\n\n为便于解释这个例子，我们假设 Cleopatra 的行为是确定性的：她交替地用 $0$ 和 $1$ 填充所控制的比特，也就是她把她控制的第一个位置赋 $0$（例子中的第 $16$ 位），把她控制的第二个位置赋 $1$（第 $17$ 位），把她控制的第三个位置赋 $0$（第 $18$ 位），以此类推。\n\nAisha 可以做出的一种决定是在一个数据包中发送原始消息中的两个比特，例如她是这样做的：通过她控制的前 $8$ 个位置来发送第一个比特，通过她控制的接下来 $8$ 个位置来发送第二个比特。\n\n于是 Aisha 发送以下数据包：\n\n```\nsend_packet([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,\n             0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n```\n\n由于 Cleopatra 可以更改最后 $15$ 个比特，所以 Aisha 决定随意设置它们，因为它们可能会被覆盖。使用前面假定的 Cleopatra 的策略，该函数返回：\n\n$[0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]$。\n\nAisha 决定在第二个数据包中发送 $M$ 的最后两个比特，与之前类似：\n\n```\nsend_packet([1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,\n             0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n```\n\n根据假定的 Cleopatra 的策略，该函数返回：\n\n$[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]$。\n\nAisha 还可以发送更多的数据包，但她没有这样做。\n\n然后评测程序进行以下函数调用：\n\n```\nreceive_message([[0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,\n                  0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],\n                 [1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,\n                  0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]])\n```\n\nBasma 按照如下方式恢复消息 $M$。她从每个数据包中提取出第一个连续出现两次的比特，以及最后一个连续出现两次的比特。也就是说，她从第一个数据包提取出两个比特 $[0, 1]$ ，从第二个数据包中提取出两个比特 $[1, 0]$。把它们放在一起，她恢复了消息 $[0, 1, 1, 0]$，这是对 `receive_message` 调用的正确返回值。\n\n可以证明，在假设的 Cleopatra 的策略下，对于长度为 $4$ 的消息，不管 $C$ 的值是多少，Basma 这样做能够正确恢复 $M$。然而，一般情况下这并不正确。\n\n## 评测程序示例\n\n评测程序示例不具备自适应性，Cleopatra 的行为是确定性的，她交替地用 $0$ 和 $1$ 来填充她控制的比特，就像她在例子中所做的那样。\n\n输入格式：**输入第一行包含一个整数 $T$，指定测试用例的数量。**接下来有 $T$ 组测试用例，每组测试用例都按以下格式描述：\n\n```\nS\nM[0]  M[1]  ...  M[S-1]\nC[0]  C[1]  ...  C[30]\n```\n\n输出格式：评测程序示例按照输入的顺序，用以下格式输出 $T$ 组测试用例的结果：\n\n```\nK L\nD[0]  D[1]  ...  D[L-1]\n```\n\n这里， $K$ 是 `send_packet` 的调用次数，$D$ 是 `receive_message` 返回的消息，$L$ 是它的长度。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2024] 消息篡改者", "background": "不要 $\\texttt{\\#include \"message.h\"}$。\n\n请使用 C++ 20 提交，并在文件头粘贴如下的内容：\n\n```cpp\n#include <vector>\n\nstd::vector<bool> send_packet(std::vector<bool>);\nvoid send_message(std::vector<bool>, std::vector<bool>);\nstd::vector<bool> receive_message(std::vector<std::vector<bool>>);\n```", "description": "## 任务描述\n\nAisha 和 Basma 是两位互相通信的朋友。Aisha 有一条消息 $M$ 想要发给 Basma，该消息是由 $S$ 个比特（即若干 0 或 1）组成的序列。Aisha 通过发送**数据包**来跟 Basma 通信。一个数据包是由 $31$ 个比特组成的序列，对应的位置从 $0$ 到 $30$ 编号。Aisha 想向 Basma 发送消息 $M$ 时，会发送若干数据包。\n\n然而第三个人 Cleopatra 在破坏 Aisha 和 Basma 之间的通信，能够**篡改**发送的数据包。在每个数据包中，Cleopatra 可以修改恰好 $15$ 个位置的比特。具体来说，给定长度为 $31$ 的数组 $C$，其中每个元素为 $0$ 或 $1$，含义如下：\n\n* $C[i] = 1$ 表示位置为 $i$ 的比特可以被 Cleopatra 修改。我们称此类位置是被 Cleopatra **控制**的。\n* $C[i] = 0$ 表示位置为 $i$ 的比特不能被 Cleopatra 修改。\n\n数组 $C$ 恰好包含 $15$ 个 $1$ 和 $16$ 个 $0$。当发送消息 $M$ 时，Cleopatra 控制的位置集合对于所有数据包都是相同的。Aisha 清楚地知道哪 $15$ 个位置被 Cleopatra 控制。Basma 只知道有 $15$ 个位置被 Cleopatra 控制，但不知道是哪些位置。\n\n令 $A$ 为 Aisha 决定要发送的数据包（称之为**原始数据包**）。令 $B$ 为 Basma 收到的数据包（称之为**篡改数据包**）。对每个在 $0 \\leq i < 31$ 的 $i$ 都有：\n\n* 如果 Cleopatra 不能控制位置为 $i$ 的比特（$C[i]=0$），那么 Basma 将能收到 Aisha 发送的第 $i$ 个比特（$B[i]=A[i]$），\n* 否则，如果 Cleopatra 控制了位置为 $i$ 的比特（$C[i]=1$），那么 $B[i]$ 的值由 Cleopatra 决定。\n\n每个数据包发送后，Aisha 会立刻知道被篡改后的数据包内容。\n\n当 Aisha 发送完所有数据包后，Basma **按照发送顺序**接收到所有被篡改的数据包，她必须重建原始消息 $M$。\n\n你的任务是制定并实现某种策略，使得 Aisha 给 Basma 发送消息 $M$ 时，Basma 能够从篡改数据包中恢复 $M$。具体来说，你要实现两个函数，第一个函数进行 Aisha 的动作：给定消息 $M$ 和数组 $C$，给 Basma 发送若干数据包来传输消息。第二个函数进行 Basma 的动作：给定若干篡改数据包，恢复原始消息 $M$。\n\n## 实现细节\n\n你要实现的第一个函数是：\n\n```\nvoid send_message(std::vector<bool> M, std::vector<bool> C)\n```\n\n* $M$：长度为 $S$ 的数组，描述 Aisha 想要发给 Basma 的消息。\n* $C$：长度为 $31$ 的数组，标记 Cleopatra 控制的数据包中的位置。\n* 每个测试用例中，该函数**最多**可被调用**2100次**。\n\n该函数调用以下函数来发送数据包：\n\n```\nstd::vector<bool> send_packet(std::vector<bool> A)\n```\n\n* $A$：原始数据包（长度为 $31$ 的数组），表示 Aisha 发送的比特。\n* 此函数返回篡改数据包 $B$，表示 Basma 接收到的比特。\n* 此函数在 `send_message` 的一次调用过程中最多被调用 $100$ 次。\n\n你要实现的第二个函数是：\n\n```\nstd::vector<bool> receive_message(std::vector<std::vector<bool>> R)\n```\n\n* $R$：描述若干篡改数据包的数组。这些数据包源自 Aisha 在一次 `send_message` 调用时发送的若干数据包，且按照 Aisha 的发送顺序排列。$R$ 的每个元素是长度为 $31$ 的数组，表示一个篡改数据包。\n* 该函数应返回包含 $S$ 个比特的数组，且与原始消息 $M$ 相同。\n* 每个测试用例中，该函数可能被调用**多次**。对于每次 `send_message` 的调用，对应地该函数要有**恰好一次**调用。函数 `receive_message` 的**调用顺序**不必与对应的 `send_message` 调用顺序一致。\n\n注意在评测系统中，`send_message` 和 `receive_message` 两个函数是在**不同的程序**中来调用的。", "inputFormat": "", "outputFormat": "", "hint": "## 约束条件\n\n* $1 \\leq S \\leq 1024$\n* $C$ 恰好有 $31$ 个元素，且其中 $16$ 个为 $0$，$15$ 个为 $1$。\n\n## 子任务与评分\n\n如果在任意的测试用例中，函数 ``send_packet`` 的调用不符合上述规则，或者某个函数 `receive_message` 的调用的返回值不正确，你的解答在该测试用例上得 $0$ 分。\n\n否则，令 $Q$ 为所有测试用例中，每次 `send_message` 调用时调用函数 `send_packet` 的次数的最大值。令 $X$ 等于：\n\n- $1$，如果 $Q \\leq 66$\n- $0.95 ^ {Q - 66}$，如果 $66 < Q \\leq 100$\n- $0$，如果 $100 < Q$\n\n那么，得分将由以下式子计算获得：\n\n| 子任务 |     分数     | 额外的约束条件       |\n| :----: | :----------: | -------------------- |\n|   1    | $10 \\cdot X$ | $S \\leq 64$          |\n|   2    | $90 \\cdot X$ | 没有额外的约束条件。 |\n\n注意在某些测试用例中，评测程序的行为是**自适应的**。这意味着 `send_packet` 的返回值可能取决于它的输入参数和以前调用该函数的返回值。\n\n## 例子\n\n考虑以下调用。\n\n```\nsend_message([0, 1, 1, 0],\n             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, \n              1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n```\n\nAisha 试图发给 Basma 的消息是 $[0, 1, 1, 0]$。数据包的第 $0$ 至第 $15$ 个比特不能被 Cleopatra 修改，而第 $16$ 至第 $30$ 个比特可以被 Cleopatra 修改。\n\n为便于解释这个例子，我们假设 Cleopatra 的行为是确定性的：她交替地用 $0$ 和 $1$ 填充所控制的比特，也就是她把她控制的第一个位置赋 $0$（例子中的第 $16$ 位），把她控制的第二个位置赋 $1$（第 $17$ 位），把她控制的第三个位置赋 $0$（第 $18$ 位），以此类推。\n\nAisha 可以做出的一种决定是在一个数据包中发送原始消息中的两个比特，例如她是这样做的：通过她控制的前 $8$ 个位置来发送第一个比特，通过她控制的接下来 $8$ 个位置来发送第二个比特。\n\n于是 Aisha 发送以下数据包：\n\n```\nsend_packet([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,\n             0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n```\n\n由于 Cleopatra 可以更改最后 $15$ 个比特，所以 Aisha 决定随意设置它们，因为它们可能会被覆盖。使用前面假定的 Cleopatra 的策略，该函数返回：\n\n$[0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]$。\n\nAisha 决定在第二个数据包中发送 $M$ 的最后两个比特，与之前类似：\n\n```\nsend_packet([1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,\n             0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n```\n\n根据假定的 Cleopatra 的策略，该函数返回：\n\n$[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]$。\n\nAisha 还可以发送更多的数据包，但她没有这样做。\n\n然后评测程序进行以下函数调用：\n\n```\nreceive_message([[0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,\n                  0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],\n                 [1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,\n                  0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]])\n```\n\nBasma 按照如下方式恢复消息 $M$。她从每个数据包中提取出第一个连续出现两次的比特，以及最后一个连续出现两次的比特。也就是说，她从第一个数据包提取出两个比特 $[0, 1]$ ，从第二个数据包中提取出两个比特 $[1, 0]$。把它们放在一起，她恢复了消息 $[0, 1, 1, 0]$，这是对 `receive_message` 调用的正确返回值。\n\n可以证明，在假设的 Cleopatra 的策略下，对于长度为 $4$ 的消息，不管 $C$ 的值是多少，Basma 这样做能够正确恢复 $M$。然而，一般情况下这并不正确。\n\n## 评测程序示例\n\n评测程序示例不具备自适应性，Cleopatra 的行为是确定性的，她交替地用 $0$ 和 $1$ 来填充她控制的比特，就像她在例子中所做的那样。\n\n输入格式：**输入第一行包含一个整数 $T$，指定测试用例的数量。**接下来有 $T$ 组测试用例，每组测试用例都按以下格式描述：\n\n```\nS\nM[0]  M[1]  ...  M[S-1]\nC[0]  C[1]  ...  C[30]\n```\n\n输出格式：评测程序示例按照输入的顺序，用以下格式输出 $T$ 组测试用例的结果：\n\n```\nK L\nD[0]  D[1]  ...  D[L-1]\n```\n\n这里， $K$ 是 `send_packet` 的调用次数，$D$ 是 `receive_message` 返回的消息，$L$ 是它的长度。", "locale": "zh-CN"}}}
{"pid": "P11051", "type": "P", "difficulty": 7, "samples": [["3\n0 0\n1 1 1\n2\n1 1\n1 2\n", "3\n2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "IOI", "交互题"], "title": "[IOI 2024] 树上代价", "background": "提交时请不要引用 `tree.h`。\n\n请不要使用 C++14 (GCC 9) 提交。", "description": "有一棵包括 $N$ 个**结点**的**树**，结点从 $0$ 到 $N-1$ 编号。结点 $0$ 是树的**根**。除根以外的每个结点都有唯一的**父结点**。对所有满足 $1 \\leq i < N$ 的 $i$，结点 $i$ 的父结点为 $P[i]$，这里有 $P[i] < i$。我们约定 $P[0] = -1$。\n\n对所有结点 $i$（$0 \\leq i < N$），$i$ 的**子树**是如下结点组成的集合：\n * $i$，以及\n * 所有父结点为 $i$ 的结点，以及\n * 所有父结点的父结点为 $i$ 的结点，以及\n * 所有父结点的父结点的父结点为 $i$ 的结点，以及\n * 以此类推。\n\n下图给出了一个包含 $N = 6$ 个结点的树的例子。每个箭头都从某个结点连向它的父结点（根结点除外，因为它没有父结点）。结点 $2$ 的子树包括结点 $2, 3, 4$ 和 $5$。结点 $0$ 的子树包括树中的全部 $6$ 个结点，而结点 $4$ 的子树仅包括结点 $4$ 自己。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vg5uaueo.png \"150\")\n\n每个结点都被赋以非负整数的**权重**。我们将结点 $i$（$0 \\leq i < N$）的权重记为 $W[i]$。\n\n你的任务是写一个程序来回答 $Q$ 个询问，其中每个询问都用一对正整数 $(L, R)$ 来表示。对于询问的回答，应按照如下要求进行计算。\n\n对树中的每个结点，都指派一个整数，称为**系数**。这样的指派结果被描述成一个序列 $C[0], \\ldots, C[N-1]$，这里 $C[i]$（$0 \\leq i < N$）是指派给结点 $i$ 的系数。我们称该序列为一个**系数序列**。注意，系数序列中的元素可以取负值、$0$ 或正值。\n\n对某个询问 $(L, R)$，一个系数序列被称为是**有效的**，如果对于每个结点 $i$（$0 \\leq i < N$）都有如下条件成立：结点 $i$ 的子树中的系数之和不小于 $L$ 且不大于 $R$。\n\n对于一个给定的系数序列 $C[0], \\ldots, C[N-1]$，结点 $i$ 的**代价**为 $|C[i]| \\cdot W[i]$，这里 $|C[i]|$ 表示 $C[i]$ 的绝对值。最后，**总体代价**为所有结点的代价之和。你的任务是，对于每个询问，计算出可以由某个有效系数序列达到的**最小总体代价**。\n\n可以证明，对于任意询问，都至少存在一个有效的系数序列。\n\n### 实现细节\n\n你需要实现如下两个函数：\n\n```\nvoid init(std::vector<int> P, std::vector<int> W)\n```\n\n* $P$，$W$：两个长度为 $N$ 的整数数组，记录了结点的父结点和权重。\n* 对于每个测试样例，在评测程序与你的程序开始交互时，该函数将被恰好调用一次。\n\n```\nlong long query(int L, int R)\n```\n* $L$，$R$：两个整数，描述一次询问。\n* 对于每个测试样例，在 `init` 被调用后，该函数将被调用 $Q$ 次。\n* 该函数应该返回对给定询问的答案。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n```\nN\nP[1]  P[2] ...  P[N-1]\nW[0]  W[1] ...  W[N-2] W[N-1]\nQ\nL[0]  R[0]\nL[1]  R[1]\n...\nL[Q-1]  R[Q-1]\n```\n\n这里的 $L[j]$ 和 $R[j]$（$0 \\leq j < Q$），是对 `query` 的第 $j$ 次调用的输入参数。注意，输入数据中的第二行中**仅包括 $N-1$ 个整数**，因为评测程序示例并不读取 $P[0]$ 的值。", "outputFormat": "评测程序示例按照如下格式打印你的答案：\n\n```\nA[0]\nA[1]\n...\nA[Q-1]\n```\n\n这里的 $A[j]$（$0 \\leq j < Q$），是第 $j$ 次调用 `query` 时返回的值。", "hint": "考虑如下调用：\n\n```\ninit([-1, 0, 0], [1, 1, 1])\n```\n这棵树包含 $3$ 个结点：根结点以及它的 $2$ 个子结点。所有结点的权重均为 $1$。\n\n```\nquery(1, 1)\n```\n\n本次询问有 $L = R = 1$，这意味着每个子树中的系数之和都必须等于 $1$。考虑系数序列 $[-1, 1, 1]$。这棵树以及相应的系数（在阴影矩形中）图示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fg1hjoze.png \"150\")\n\n对每个结点 $i$（$0 \\leq i < 3$），$i$ 的子树中全部结点的系数之和均为 $1$。因此，系数序列是有效的。总体代价的计算如下：\n\n\n| 结点 | 权重 | 系数 |            代价            |\n| :----: | :----: | :---------: | :------------------------: |\n|   $0$    |   $1$    |     $-1$      | $\\mid -1 \\mid \\cdot 1 = 1$ |\n|   $1$    |   $1$    |      $1$      | $\\mid 1 \\mid \\cdot 1 = 1$  |\n|   $2$    |   $1$    |      $1$      | $\\mid 1 \\mid \\cdot 1 = 1$  |\n\n因此总体代价为 $3$。这是唯一的有效系数序列，因此调用应该返回 $3$。\n\n```\nquery(1, 2)\n```\n对于该询问的最小总体代价为 $2$，可以在系数序列为 $[0, 1, 1]$ 时达到。\n\n### 约束条件\n\n* $1 \\leq N \\leq 200\\,000$\n* $1 \\leq Q \\leq 100\\,000$\n* $P[0] = -1$\n* 对所有满足 $1 \\leq i < N$ 的 $i$，都有 $0 \\leq P[i] < i$\n* 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $0 \\leq W[i] \\leq 1\\,000\\,000$\n* 在每次询问中，都有 $1 \\leq L \\leq R \\leq 1\\,000\\,000$\n\n| 子任务 | 分数 | 额外的约束条件                                     |\n| :-----: | :---: | ------------------------------------------------------------ |\n|    1    | $10$  | $Q \\leq 10$；对所有满足 $1 \\leq i < N$ 的 $i$，都有 $W[P[i]] \\leq W[i]$ |\n|    2    | $13$  | $Q \\leq 10$；$N \\leq 2\\,000$                                 |\n|    3    | $18$  | $Q \\leq 10$；$N \\leq 60\\,000$                                |\n|    4    |  $7$  | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $W[i] = 1$              |\n|    5    | $11$  | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $W[i] \\leq 1$           |\n|    6    | $22$  | $L = 1$                                                      |\n|    7    | $19$  | 没有额外的约束条件。                                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2024] 树上代价", "background": "提交时请不要引用 `tree.h`。\n\n请不要使用 C++14 (GCC 9) 提交。", "description": "有一棵包括 $N$ 个**结点**的**树**，结点从 $0$ 到 $N-1$ 编号。结点 $0$ 是树的**根**。除根以外的每个结点都有唯一的**父结点**。对所有满足 $1 \\leq i < N$ 的 $i$，结点 $i$ 的父结点为 $P[i]$，这里有 $P[i] < i$。我们约定 $P[0] = -1$。\n\n对所有结点 $i$（$0 \\leq i < N$），$i$ 的**子树**是如下结点组成的集合：\n * $i$，以及\n * 所有父结点为 $i$ 的结点，以及\n * 所有父结点的父结点为 $i$ 的结点，以及\n * 所有父结点的父结点的父结点为 $i$ 的结点，以及\n * 以此类推。\n\n下图给出了一个包含 $N = 6$ 个结点的树的例子。每个箭头都从某个结点连向它的父结点（根结点除外，因为它没有父结点）。结点 $2$ 的子树包括结点 $2, 3, 4$ 和 $5$。结点 $0$ 的子树包括树中的全部 $6$ 个结点，而结点 $4$ 的子树仅包括结点 $4$ 自己。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vg5uaueo.png \"150\")\n\n每个结点都被赋以非负整数的**权重**。我们将结点 $i$（$0 \\leq i < N$）的权重记为 $W[i]$。\n\n你的任务是写一个程序来回答 $Q$ 个询问，其中每个询问都用一对正整数 $(L, R)$ 来表示。对于询问的回答，应按照如下要求进行计算。\n\n对树中的每个结点，都指派一个整数，称为**系数**。这样的指派结果被描述成一个序列 $C[0], \\ldots, C[N-1]$，这里 $C[i]$（$0 \\leq i < N$）是指派给结点 $i$ 的系数。我们称该序列为一个**系数序列**。注意，系数序列中的元素可以取负值、$0$ 或正值。\n\n对某个询问 $(L, R)$，一个系数序列被称为是**有效的**，如果对于每个结点 $i$（$0 \\leq i < N$）都有如下条件成立：结点 $i$ 的子树中的系数之和不小于 $L$ 且不大于 $R$。\n\n对于一个给定的系数序列 $C[0], \\ldots, C[N-1]$，结点 $i$ 的**代价**为 $|C[i]| \\cdot W[i]$，这里 $|C[i]|$ 表示 $C[i]$ 的绝对值。最后，**总体代价**为所有结点的代价之和。你的任务是，对于每个询问，计算出可以由某个有效系数序列达到的**最小总体代价**。\n\n可以证明，对于任意询问，都至少存在一个有效的系数序列。\n\n### 实现细节\n\n你需要实现如下两个函数：\n\n```\nvoid init(std::vector<int> P, std::vector<int> W)\n```\n\n* $P$，$W$：两个长度为 $N$ 的整数数组，记录了结点的父结点和权重。\n* 对于每个测试样例，在评测程序与你的程序开始交互时，该函数将被恰好调用一次。\n\n```\nlong long query(int L, int R)\n```\n* $L$，$R$：两个整数，描述一次询问。\n* 对于每个测试样例，在 `init` 被调用后，该函数将被调用 $Q$ 次。\n* 该函数应该返回对给定询问的答案。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n```\nN\nP[1]  P[2] ...  P[N-1]\nW[0]  W[1] ...  W[N-2] W[N-1]\nQ\nL[0]  R[0]\nL[1]  R[1]\n...\nL[Q-1]  R[Q-1]\n```\n\n这里的 $L[j]$ 和 $R[j]$（$0 \\leq j < Q$），是对 `query` 的第 $j$ 次调用的输入参数。注意，输入数据中的第二行中**仅包括 $N-1$ 个整数**，因为评测程序示例并不读取 $P[0]$ 的值。", "outputFormat": "评测程序示例按照如下格式打印你的答案：\n\n```\nA[0]\nA[1]\n...\nA[Q-1]\n```\n\n这里的 $A[j]$（$0 \\leq j < Q$），是第 $j$ 次调用 `query` 时返回的值。", "hint": "考虑如下调用：\n\n```\ninit([-1, 0, 0], [1, 1, 1])\n```\n这棵树包含 $3$ 个结点：根结点以及它的 $2$ 个子结点。所有结点的权重均为 $1$。\n\n```\nquery(1, 1)\n```\n\n本次询问有 $L = R = 1$，这意味着每个子树中的系数之和都必须等于 $1$。考虑系数序列 $[-1, 1, 1]$。这棵树以及相应的系数（在阴影矩形中）图示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fg1hjoze.png \"150\")\n\n对每个结点 $i$（$0 \\leq i < 3$），$i$ 的子树中全部结点的系数之和均为 $1$。因此，系数序列是有效的。总体代价的计算如下：\n\n\n| 结点 | 权重 | 系数 |            代价            |\n| :----: | :----: | :---------: | :------------------------: |\n|   $0$    |   $1$    |     $-1$      | $\\mid -1 \\mid \\cdot 1 = 1$ |\n|   $1$    |   $1$    |      $1$      | $\\mid 1 \\mid \\cdot 1 = 1$  |\n|   $2$    |   $1$    |      $1$      | $\\mid 1 \\mid \\cdot 1 = 1$  |\n\n因此总体代价为 $3$。这是唯一的有效系数序列，因此调用应该返回 $3$。\n\n```\nquery(1, 2)\n```\n对于该询问的最小总体代价为 $2$，可以在系数序列为 $[0, 1, 1]$ 时达到。\n\n### 约束条件\n\n* $1 \\leq N \\leq 200\\,000$\n* $1 \\leq Q \\leq 100\\,000$\n* $P[0] = -1$\n* 对所有满足 $1 \\leq i < N$ 的 $i$，都有 $0 \\leq P[i] < i$\n* 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $0 \\leq W[i] \\leq 1\\,000\\,000$\n* 在每次询问中，都有 $1 \\leq L \\leq R \\leq 1\\,000\\,000$\n\n| 子任务 | 分数 | 额外的约束条件                                     |\n| :-----: | :---: | ------------------------------------------------------------ |\n|    1    | $10$  | $Q \\leq 10$；对所有满足 $1 \\leq i < N$ 的 $i$，都有 $W[P[i]] \\leq W[i]$ |\n|    2    | $13$  | $Q \\leq 10$；$N \\leq 2\\,000$                                 |\n|    3    | $18$  | $Q \\leq 10$；$N \\leq 60\\,000$                                |\n|    4    |  $7$  | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $W[i] = 1$              |\n|    5    | $11$  | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $W[i] \\leq 1$           |\n|    6    | $22$  | $L = 1$                                                      |\n|    7    | $19$  | 没有额外的约束条件。                                   |", "locale": "zh-CN"}}}
{"pid": "P11052", "type": "P", "difficulty": 7, "samples": [["6 5\n0 0 1 0 1 2\n2 0 1 0 2\n", "4\n0 1 0 2\n"], ["3 2\n0 0 2\n1 1\n", "0\n\n"], ["3 3\n0 1 0\n1 0 1\n", "1\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "IOI", "交互题"], "title": "[IOI 2024] 象形文字序列", "background": "请在提交时不要引用 `hieroglyphs.h`。\n\n请勿用 C++14 (GCC 9) 提交。", "description": "一个研究团队正在研究象形文字序列之间的相似性。他们将每个象形文字表示成一个非负整数。为了开展研究，他们采用了关于序列的如下概念。\n\n对于一个给定的序列 $A$，某个序列 $S$ 被称为是 $A$ 的**子序列**，当且仅当 $S$ 能够通过移除 $A$ 中的某些（也可能零个）元素而得到。\n\n下表给出了序列 $A = [3, 2, 1, 2]$ 的子序列的一部分例子。\n\n| 子序列  | 由 $A$ 得到子序列的方式                          |\n| ------------ | -------------------------------------------------------- |\n| [3, 2, 1, 2] | 不移除任何元素。                                 |\n| [2, 1, 2]    | [~~3~~, 2, 1, 2]                                      |\n| [3, 2, 2]    | [3, 2, ~~1~~, 2]                                      |\n| [3, 2]       | [3, ~~2~~, ~~1~~, 2] 或者 [3, 2, ~~1~~, ~~2~~] |\n| [3]          | [3, ~~2~~, ~~1~~, ~~2~~]                        |\n| [ ]          | [~~3~~, ~~2~~, ~~1~~, ~~2~~]                 |\n\n另一方面，$[3, 3]$ 或 $[1, 3]$ 不是 $A$ 的子序列。\n\n考虑有两个象形文字序列 $A$ 和 $B$。某个序列 $S$ 被称为是 $A$ 和 $B$ 的**公共子序列**，当且仅当 $S$ 同时是 $A$ 和 $B$ 的子序列。此外，我们说某个序列 $U$ 是 $A$ 和 $B$ 的一个**最全公共子序列**，当且仅当如下两个条件成立：\n* $U$ 是 $A$ 和 $B$ 的一个公共子序列。\n* $A$ 和 $B$ 的任意公共子序列，都是 $U$ 的一个子序列。\n\n可以证明，任意两个序列 $A$ 和 $B$ 都至多有一个最全公共子序列。\n\n研究人员发现了两个象形文字序列 $A$ 和  $B$。序列 $A$ 包含 $N$ 个象形文字，而序列 $B$ 包含 $M$ 个象形文字。请帮助研究人员为序列 $A$ 和 $B$ 找到一个最全公共子序列，或者判定这样的序列并不存在。", "inputFormat": "```\nN  M\nA[0]  A[1]  ...  A[N-1]\nB[0]  B[1]  ...  B[M-1]\n```", "outputFormat": "```\nT\nR[0]  R[1]  ...  R[T-1]\n```\n\n这里 $R$ 是 `ucs` 所返回的数组，而 $T$ 为其长度。", "hint": "## 实现细节\n\n你要实现以下函数。\n\n```\nstd::vector<int> ucs(std::vector<int> A, std::vector<int> B)\n```\n\n* $A$：长度为 $N$ 的数组，给出第一个序列。\n* $B$：长度为 $M$ 的数组，给出第二个序列。\n* 如果 $A$ 和 $B$ 有一个最全公共子序列，该函数应当返回一个包含该序列的数组。否则，该函数应当返回 $[-1]$（一个长度为 $1$ 的数组，其唯一元素为 $-1$）。\n* 对每个测试用例，该函数恰好被调用一次。\n\n## 约束条件\n\n* $1 \\leq N \\leq 100\\,000$\n* $1 \\leq M \\leq 100\\,000$\n* 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $0 \\leq A[i] \\leq 200\\,000$\n* 对所有满足 $0 \\leq j < M$ 的 $j$，都有 $0 \\leq B[j] \\leq 200\\,000$\n\n## 子任务\n\n| 子任务 | 分数 | 额外的约束条件                                       |\n| :-----: | :---: | ------------------------------------------------------------ |\n|    1    |  $3$  | $N = M$；$A$ 和 $B$ 均由 $N$ 个**不同的**整数构成，取自 $0$ 到 $N-1$（包括这两个值） |\n|    2    | $15$  | 对任意整数 $k$，$k$ 在 $A$ 和 $B$ 中的出现次数，加起来至多等于 $3$。 |\n|    3    | $10$  | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $A[i] \\leq 1$；对所有满足 $0 \\leq j < M$ 的 $j$，都有 $B[j] \\leq 1$ |\n|    4    | $16$  | $A$ 和 $B$ 存在最全公共子序列。  |\n|    5    | $14$  | $N \\leq 3000$；$M \\leq 3000$                                 |\n|    6    | $42$  | 没有额外的约束条件。                                   |\n\n## 例子\n\n### 例 1\n\n考虑以下函数调用。\n\n```\nucs([0, 0, 1, 0, 1, 2], [2, 0, 1, 0, 2])\n```\n\n此时，$A$ 和 $B$ 的公共子序列为：$[\\ ]$，$[0]$，$[1]$，$[2]$，$[0, 0]$，$[0, 1]$，$[0, 2]$，$[1, 0]$，$[1, 2]$，$[0, 0, 2]$，$[0, 1, 0]$，$[0, 1, 2]$，$[1, 0, 2]$ 和 $[0, 1, 0, 2]$。\n\n由于 $[0, 1, 0, 2]$ 是 $A$ 和 $B$ 的一个公共子序列，而 $A$ 和 $B$ 的所有公共子序列又都是 $[0, 1, 0, 2]$ 的子序列，因此函数应该返回 $[0, 1, 0, 2]$。\n\n### 例 2\n\n考虑以下函数调用。\n\n```\nucs([0, 0, 2], [1, 1])\n```\n\n此时，$A$ 和 $B$ 唯一的公共子序列为空序列 $[\\ ]$。因此函数应该返回一个空数组 $[\\ ]$。\n\n### 例 3\n\n考虑以下函数调用。\n\n```\nucs([0, 1, 0], [1, 0, 1])\n```\n\n此时，$A$ 和 $B$ 的公共子序列为 $[\\ ]$，$[0]$，$[1]$，$[0, 1]$ 和 $[1, 0]$，可以看出两者并不存在最全公共子序列。因此，函数应该返回 $[-1]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2024] 象形文字序列", "background": "请在提交时不要引用 `hieroglyphs.h`。\n\n请勿用 C++14 (GCC 9) 提交。", "description": "一个研究团队正在研究象形文字序列之间的相似性。他们将每个象形文字表示成一个非负整数。为了开展研究，他们采用了关于序列的如下概念。\n\n对于一个给定的序列 $A$，某个序列 $S$ 被称为是 $A$ 的**子序列**，当且仅当 $S$ 能够通过移除 $A$ 中的某些（也可能零个）元素而得到。\n\n下表给出了序列 $A = [3, 2, 1, 2]$ 的子序列的一部分例子。\n\n| 子序列  | 由 $A$ 得到子序列的方式                          |\n| ------------ | -------------------------------------------------------- |\n| [3, 2, 1, 2] | 不移除任何元素。                                 |\n| [2, 1, 2]    | [~~3~~, 2, 1, 2]                                      |\n| [3, 2, 2]    | [3, 2, ~~1~~, 2]                                      |\n| [3, 2]       | [3, ~~2~~, ~~1~~, 2] 或者 [3, 2, ~~1~~, ~~2~~] |\n| [3]          | [3, ~~2~~, ~~1~~, ~~2~~]                        |\n| [ ]          | [~~3~~, ~~2~~, ~~1~~, ~~2~~]                 |\n\n另一方面，$[3, 3]$ 或 $[1, 3]$ 不是 $A$ 的子序列。\n\n考虑有两个象形文字序列 $A$ 和 $B$。某个序列 $S$ 被称为是 $A$ 和 $B$ 的**公共子序列**，当且仅当 $S$ 同时是 $A$ 和 $B$ 的子序列。此外，我们说某个序列 $U$ 是 $A$ 和 $B$ 的一个**最全公共子序列**，当且仅当如下两个条件成立：\n* $U$ 是 $A$ 和 $B$ 的一个公共子序列。\n* $A$ 和 $B$ 的任意公共子序列，都是 $U$ 的一个子序列。\n\n可以证明，任意两个序列 $A$ 和 $B$ 都至多有一个最全公共子序列。\n\n研究人员发现了两个象形文字序列 $A$ 和  $B$。序列 $A$ 包含 $N$ 个象形文字，而序列 $B$ 包含 $M$ 个象形文字。请帮助研究人员为序列 $A$ 和 $B$ 找到一个最全公共子序列，或者判定这样的序列并不存在。", "inputFormat": "```\nN  M\nA[0]  A[1]  ...  A[N-1]\nB[0]  B[1]  ...  B[M-1]\n```", "outputFormat": "```\nT\nR[0]  R[1]  ...  R[T-1]\n```\n\n这里 $R$ 是 `ucs` 所返回的数组，而 $T$ 为其长度。", "hint": "## 实现细节\n\n你要实现以下函数。\n\n```\nstd::vector<int> ucs(std::vector<int> A, std::vector<int> B)\n```\n\n* $A$：长度为 $N$ 的数组，给出第一个序列。\n* $B$：长度为 $M$ 的数组，给出第二个序列。\n* 如果 $A$ 和 $B$ 有一个最全公共子序列，该函数应当返回一个包含该序列的数组。否则，该函数应当返回 $[-1]$（一个长度为 $1$ 的数组，其唯一元素为 $-1$）。\n* 对每个测试用例，该函数恰好被调用一次。\n\n## 约束条件\n\n* $1 \\leq N \\leq 100\\,000$\n* $1 \\leq M \\leq 100\\,000$\n* 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $0 \\leq A[i] \\leq 200\\,000$\n* 对所有满足 $0 \\leq j < M$ 的 $j$，都有 $0 \\leq B[j] \\leq 200\\,000$\n\n## 子任务\n\n| 子任务 | 分数 | 额外的约束条件                                       |\n| :-----: | :---: | ------------------------------------------------------------ |\n|    1    |  $3$  | $N = M$；$A$ 和 $B$ 均由 $N$ 个**不同的**整数构成，取自 $0$ 到 $N-1$（包括这两个值） |\n|    2    | $15$  | 对任意整数 $k$，$k$ 在 $A$ 和 $B$ 中的出现次数，加起来至多等于 $3$。 |\n|    3    | $10$  | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $A[i] \\leq 1$；对所有满足 $0 \\leq j < M$ 的 $j$，都有 $B[j] \\leq 1$ |\n|    4    | $16$  | $A$ 和 $B$ 存在最全公共子序列。  |\n|    5    | $14$  | $N \\leq 3000$；$M \\leq 3000$                                 |\n|    6    | $42$  | 没有额外的约束条件。                                   |\n\n## 例子\n\n### 例 1\n\n考虑以下函数调用。\n\n```\nucs([0, 0, 1, 0, 1, 2], [2, 0, 1, 0, 2])\n```\n\n此时，$A$ 和 $B$ 的公共子序列为：$[\\ ]$，$[0]$，$[1]$，$[2]$，$[0, 0]$，$[0, 1]$，$[0, 2]$，$[1, 0]$，$[1, 2]$，$[0, 0, 2]$，$[0, 1, 0]$，$[0, 1, 2]$，$[1, 0, 2]$ 和 $[0, 1, 0, 2]$。\n\n由于 $[0, 1, 0, 2]$ 是 $A$ 和 $B$ 的一个公共子序列，而 $A$ 和 $B$ 的所有公共子序列又都是 $[0, 1, 0, 2]$ 的子序列，因此函数应该返回 $[0, 1, 0, 2]$。\n\n### 例 2\n\n考虑以下函数调用。\n\n```\nucs([0, 0, 2], [1, 1])\n```\n\n此时，$A$ 和 $B$ 唯一的公共子序列为空序列 $[\\ ]$。因此函数应该返回一个空数组 $[\\ ]$。\n\n### 例 3\n\n考虑以下函数调用。\n\n```\nucs([0, 1, 0], [1, 0, 1])\n```\n\n此时，$A$ 和 $B$ 的公共子序列为 $[\\ ]$，$[0]$，$[1]$，$[0, 1]$ 和 $[1, 0]$，可以看出两者并不存在最全公共子序列。因此，函数应该返回 $[-1]$。", "locale": "zh-CN"}}}
{"pid": "P11053", "type": "P", "difficulty": 6, "samples": [["4\n1 0 1 0\n1 1 0 1\n2\n0 3 0 3\n2 3 0 2\n", "7\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "IOI", "交互题"], "title": "[IOI 2024] 马赛克上色", "background": "提交时请不要引用 `mosaic.h`。\n\n请不要使用 C++14 (GCC 9) 提交。", "description": "Salma 想给墙上的粘土马赛克上色。该马赛克由 $N \\times N$ 片正方形瓷砖组成，共有 $N^2$ 片瓷砖；每片瓷砖的尺寸为 $1 \\times 1$，都还没有上色。马赛克从上到下每行瓷砖的行编号从 $0$ 到 $N-1$，从左到右每列瓷砖的列编号从 $0$ 到 $N-1$。位于第 $i$ 行第 $j$ 列（$0 \\leq i < N$，$0 \\leq j < N$）的瓷砖记为 $(i,j)$。每片瓷砖要么涂成白色（记为 $0$），要么涂成黑色（记为 $1$）。\n\n为了给马赛克上色，Salma 首先选取两个长度为 $N$ 的数组 $X$ 和 $Y$，每个数组都由 $0$ 和 $1$ 组成，并且 $X[0] = Y[0]$。她按照数组 $X$ 对最上面的行（第 $0$ 行）的瓷砖进行上色，使得瓷砖 $(0,j)$ 的颜色为 $X[j]$（$0 \\leq j < N$）。她按照数组 $Y$ 对最左边的列（第 $0$ 列）的瓷砖进行上色，使得瓷砖 $(i,0)$ 的颜色为 $Y[i]$（$0 \\leq i < N$）。\n\n然后她重复以下步骤直至所有瓷砖都上色完成：\n* 她找到任意一片**没有上色**的瓷砖 $(i,j)$，其上方相邻的瓷砖 $(i-1, j)$ 和左边相邻的瓷砖 $(i, j-1)$ 都**已经上色**。\n* 然后，如果这两片相邻的瓷砖都是白色，她会把瓷砖 $(i,j)$ 涂成黑色；否则，涂成白色。\n\n可以证明，瓷砖最终的颜色不依赖于 Salma 的上色顺序。\n\nYasmin 对马赛克瓷砖的颜色非常好奇。她向 Salma 提出 $Q$ 个问题，从 $0$ 到 $Q-1$ 编号。在问题 $k$（$0 \\leq k < Q$）中，Yasmin 通过以下信息指定马赛克中的一个长方形：\n* 最上面的行 $T[k]$ 和最下面的行 $B[k]$（$0 \\leq T[k] \\leq B[k] < N$）；\n* 最左边的列 $L[k]$ 和最右边的列 $R[k]$（$0 \\leq L[k] \\leq R[k] < N$）。\n\n问题的答案是该长方形中黑色瓷砖的数量。具体来说，Salma 应当找出有多少片瓷砖 $(i,j)$ 满足  $T[k] \\leq i \\leq B[k]$，$L[k] \\leq j \\leq R[k]$，且颜色为黑色。\n\n请编写程序回答 Yasmin 的问题。\n\n### 实现细节\n\n你要实现以下函数。\n\n```\nstd::vector<long long> mosaic(\n\tstd::vector<int> X, std::vector<int> Y,\n    std::vector<int> T, std::vector<int> B,\n    std::vector<int> L, std::vector<int> R)\n```\n\n* $X$，$Y$：长度为 $N$ 的数组，分别描述最上方行和最左边列的瓷砖的颜色。\n* $T$，$B$，$L$，$R$：长度为 $Q$ 的数组，分别描述 Yasmin 所提出的问题。\n* 该函数应返回一个长度为 $Q$ 的数组 $C$，使得 $C[k]$ 给出问题 $k$（$0 \\leq k < Q$）的答案。\n* 对每个测试用例，该函数恰好被调用一次。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n```\nN\nX[0]  X[1]  ...  X[N-1]\nY[0]  Y[1]  ...  Y[N-1]\nQ\nT[0]  B[0]  L[0]  R[0]\nT[1]  B[1]  L[1]  R[1]\n...\nT[Q-1]  B[Q-1]  L[Q-1]  R[Q-1]\n```", "outputFormat": "评测程序示例按照如下格式打印你的答案：\n\n```\nC[0]\nC[1]\n...\nC[S-1]\n```\n\n其中 $S$ 是  `mosaic` 所返回的数组 $C$ 的长度。", "hint": "考虑以下函数调用。\n\n```\nmosaic([1, 0, 1, 0], [1, 1, 0, 1], [0, 2], [3, 3], [0, 0], [3, 2])\n```\n\n该例子如下图所示。左边的图展示了马赛克中瓷砖的颜色，中间和右边的图分别展示了 Yasmin 的第一个问题和第二个问题中的长方形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dhy83fvl.png \"550\")\n\n这两个问题的答案（即阴影长方形中 1 的个数）分别是 7 和 3。因此，函数应该返回 $[7, 3]$。\n\n### 约束条件\n\n* $1 \\leq N \\leq 200\\,000$\n* $1 \\leq Q \\leq 200\\,000$\n* 对所有满足  $0 \\leq i < N$ 的 $i$，都有 $X[i] \\in \\{0, 1\\}$，且 $Y[i] \\in \\{0, 1\\}$\n* $X[0] = Y[0]$\n* 对所有满足 $0 \\leq k < Q$ 的 $k$，都有 $0 \\leq T[k] \\leq B[k] < N$，且 $0 \\leq L[k] \\leq R[k] < N$\n\n| 子任务 | 分数 | 额外的约束条件 |\n| :-----: | :----: | ---------------------- |\n| 1       | $5$    | $N \\leq 2; Q \\leq 10$\n| 2       | $7$    | $N \\leq 200; Q \\leq 200$\n| 3       | $7$    | 对所有满足  $0 \\leq k < Q$ 的 $k$，都有 $T[k] = B[k] = 0$\n| 4       | $10$   | $N \\leq 5000$\n| 5       | $8$    | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $X[i] = Y[i] = 0$\n| 6       | $22$   | 对所有满足 $0 \\leq k < Q$ 的 $k$，都有 $T[k] = B[k]$，且 $L[k] = R[k]$\n| 7       | $19$   | 对所有满足 $0 \\leq k < Q$ 的 $k$，都有 $T[k] = B[k]$ \n| 8       | $22$   | 没有额外的约束条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2024] 马赛克上色", "background": "提交时请不要引用 `mosaic.h`。\n\n请不要使用 C++14 (GCC 9) 提交。", "description": "Salma 想给墙上的粘土马赛克上色。该马赛克由 $N \\times N$ 片正方形瓷砖组成，共有 $N^2$ 片瓷砖；每片瓷砖的尺寸为 $1 \\times 1$，都还没有上色。马赛克从上到下每行瓷砖的行编号从 $0$ 到 $N-1$，从左到右每列瓷砖的列编号从 $0$ 到 $N-1$。位于第 $i$ 行第 $j$ 列（$0 \\leq i < N$，$0 \\leq j < N$）的瓷砖记为 $(i,j)$。每片瓷砖要么涂成白色（记为 $0$），要么涂成黑色（记为 $1$）。\n\n为了给马赛克上色，Salma 首先选取两个长度为 $N$ 的数组 $X$ 和 $Y$，每个数组都由 $0$ 和 $1$ 组成，并且 $X[0] = Y[0]$。她按照数组 $X$ 对最上面的行（第 $0$ 行）的瓷砖进行上色，使得瓷砖 $(0,j)$ 的颜色为 $X[j]$（$0 \\leq j < N$）。她按照数组 $Y$ 对最左边的列（第 $0$ 列）的瓷砖进行上色，使得瓷砖 $(i,0)$ 的颜色为 $Y[i]$（$0 \\leq i < N$）。\n\n然后她重复以下步骤直至所有瓷砖都上色完成：\n* 她找到任意一片**没有上色**的瓷砖 $(i,j)$，其上方相邻的瓷砖 $(i-1, j)$ 和左边相邻的瓷砖 $(i, j-1)$ 都**已经上色**。\n* 然后，如果这两片相邻的瓷砖都是白色，她会把瓷砖 $(i,j)$ 涂成黑色；否则，涂成白色。\n\n可以证明，瓷砖最终的颜色不依赖于 Salma 的上色顺序。\n\nYasmin 对马赛克瓷砖的颜色非常好奇。她向 Salma 提出 $Q$ 个问题，从 $0$ 到 $Q-1$ 编号。在问题 $k$（$0 \\leq k < Q$）中，Yasmin 通过以下信息指定马赛克中的一个长方形：\n* 最上面的行 $T[k]$ 和最下面的行 $B[k]$（$0 \\leq T[k] \\leq B[k] < N$）；\n* 最左边的列 $L[k]$ 和最右边的列 $R[k]$（$0 \\leq L[k] \\leq R[k] < N$）。\n\n问题的答案是该长方形中黑色瓷砖的数量。具体来说，Salma 应当找出有多少片瓷砖 $(i,j)$ 满足  $T[k] \\leq i \\leq B[k]$，$L[k] \\leq j \\leq R[k]$，且颜色为黑色。\n\n请编写程序回答 Yasmin 的问题。\n\n### 实现细节\n\n你要实现以下函数。\n\n```\nstd::vector<long long> mosaic(\n\tstd::vector<int> X, std::vector<int> Y,\n    std::vector<int> T, std::vector<int> B,\n    std::vector<int> L, std::vector<int> R)\n```\n\n* $X$，$Y$：长度为 $N$ 的数组，分别描述最上方行和最左边列的瓷砖的颜色。\n* $T$，$B$，$L$，$R$：长度为 $Q$ 的数组，分别描述 Yasmin 所提出的问题。\n* 该函数应返回一个长度为 $Q$ 的数组 $C$，使得 $C[k]$ 给出问题 $k$（$0 \\leq k < Q$）的答案。\n* 对每个测试用例，该函数恰好被调用一次。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n```\nN\nX[0]  X[1]  ...  X[N-1]\nY[0]  Y[1]  ...  Y[N-1]\nQ\nT[0]  B[0]  L[0]  R[0]\nT[1]  B[1]  L[1]  R[1]\n...\nT[Q-1]  B[Q-1]  L[Q-1]  R[Q-1]\n```", "outputFormat": "评测程序示例按照如下格式打印你的答案：\n\n```\nC[0]\nC[1]\n...\nC[S-1]\n```\n\n其中 $S$ 是  `mosaic` 所返回的数组 $C$ 的长度。", "hint": "考虑以下函数调用。\n\n```\nmosaic([1, 0, 1, 0], [1, 1, 0, 1], [0, 2], [3, 3], [0, 0], [3, 2])\n```\n\n该例子如下图所示。左边的图展示了马赛克中瓷砖的颜色，中间和右边的图分别展示了 Yasmin 的第一个问题和第二个问题中的长方形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dhy83fvl.png \"550\")\n\n这两个问题的答案（即阴影长方形中 1 的个数）分别是 7 和 3。因此，函数应该返回 $[7, 3]$。\n\n### 约束条件\n\n* $1 \\leq N \\leq 200\\,000$\n* $1 \\leq Q \\leq 200\\,000$\n* 对所有满足  $0 \\leq i < N$ 的 $i$，都有 $X[i] \\in \\{0, 1\\}$，且 $Y[i] \\in \\{0, 1\\}$\n* $X[0] = Y[0]$\n* 对所有满足 $0 \\leq k < Q$ 的 $k$，都有 $0 \\leq T[k] \\leq B[k] < N$，且 $0 \\leq L[k] \\leq R[k] < N$\n\n| 子任务 | 分数 | 额外的约束条件 |\n| :-----: | :----: | ---------------------- |\n| 1       | $5$    | $N \\leq 2; Q \\leq 10$\n| 2       | $7$    | $N \\leq 200; Q \\leq 200$\n| 3       | $7$    | 对所有满足  $0 \\leq k < Q$ 的 $k$，都有 $T[k] = B[k] = 0$\n| 4       | $10$   | $N \\leq 5000$\n| 5       | $8$    | 对所有满足 $0 \\leq i < N$ 的 $i$，都有 $X[i] = Y[i] = 0$\n| 6       | $22$   | 对所有满足 $0 \\leq k < Q$ 的 $k$，都有 $T[k] = B[k]$，且 $L[k] = R[k]$\n| 7       | $19$   | 对所有满足 $0 \\leq k < Q$ 的 $k$，都有 $T[k] = B[k]$ \n| 8       | $22$   | 没有额外的约束条件。", "locale": "zh-CN"}}}
{"pid": "P11054", "type": "P", "difficulty": 7, "samples": [["4 4\n2 0 0 0\n0 1\n1 2\n0 2\n0 3", "4 3\n2 0 0 0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "IOI", "交互题", "Special Judge"], "title": "[IOI 2024] 斯芬克斯的谜题", "background": "请在提交时不要引用 `sphinx.h`，并在代码开头加入如下内容：\n\n```cpp\n#include <vector>\nint perform_experiment(std::vector<int> E);\n```\n\n请勿用 C++14 (GCC 9) 提交。", "description": "斯芬克斯为你准备了一个谜题。给定 $N$ 个顶点的图，顶点从 $0$ 到 $N-1$ 编号。图中有 $M$ 条边，从 $0$ 到 $M-1$ 编号。每条边连接两个不同的顶点，且边是双向的。具体来说，对从 $0$ 到 $M-1$ 的每个 $j$，边 $j$ 连接顶点 $X[j]$ 和 $Y[j]$。任意两个顶点之间最多有一条边。若两个顶点被一条边连接，则它们是**相邻的**。\n\n对顶点序列 $v_0, v_1, \\ldots, v_k$（对 $k \\ge 0$），若每两个连续顶点 $v_l$ 和 $v_{l+1}$（对所有满足 $0 \\le l \\lt k$ 的 $l$）是相邻的，则称其为一条**路径**。路径 $v_0, v_1, \\ldots, v_k$ **连接**顶点 $v_0$ 和 $v_k$。在给定的图中，每对顶点被某条路径连接。\n\n现在有 $N + 1$ 种颜色，从 $0$ 到 $N$ 编号。其中，颜色 $N$ 是特殊的，称为**斯芬克斯之色**。一开始每个顶点都有一种颜色，顶点 $i$（$0 \\le i \\lt N$）的颜色是 $C[i]$。多个顶点可以是同一种颜色的，有的颜色可能没有对应的顶点，且不会有顶点的颜色是斯芬克斯之色。也就是说，$0 \\le C[i] \\lt N$（$0 \\le i \\lt N$）。\n\n若一条路径 $v_0, v_1, \\ldots, v_k$（对 $k \\ge 0$）上的所有顶点都是相同颜色的，则称其是**单色**的。也就是说，满足 $C[v_l] = C[v_{l+1}]$（对所有满足 $0 \\le l \\lt k$ 的 $l$）。此外，两个顶点 $p$ 和 $q$（$0 \\le p \\lt N$，$0 \\le q \\lt N$）在同一个**单色分支**中，当且仅当它们被某条单色路径连接。\n\n你知道图中顶点和边的关系，但是你不知道每个顶点的颜色。你希望通过**重新着色实验**来弄清楚顶点的颜色。\n\n在一次重新着色实验中，你可以对任意多的顶点进行重新着色。具体来说，在一次重新着色实验中，你先给出一个长度为 $N$ 的数组 $E$，对每个 $i$（$0 \\le i \\lt N$），$E[i]$ 的值在 $-1$ 和 $N$ 之间（**包括** $-1$ 和 $N$）。重新着色后，每个顶点 $i$ 的颜色变成了 $S[i]$，其中 $S[i]$ 的值：\n* 若 $E[i] = -1$，则是 $C[i]$，也就是重新着色前顶点 $i$ 的颜色；\n* 否则，是 $E[i]$。\n\n注意：你可以在重新着色的过程中使用斯芬克斯之色。\n\n在将每个顶点 $i$ 的颜色设为 $S[i]$（$0 \\le i \\lt N$）之后，斯芬克斯会宣布图中单色分支的数量。新的着色情况仅在本次重新着色实验中有效，因此**当本次实验结束后，所有顶点的颜色会恢复成最初的情况**。\n\n你的任务是至多通过 $2\\,750$ 次重新着色实验来确定图中顶点的颜色。如果正确给出了每对相邻顶点是否具有相同颜色，那么也会获得部分分数。\n\n### 实现细节\n\n你要实现以下函数。\n\n```\nstd::vector<int> find_colours(int N,\n    std::vector<int> X, std::vector<int> Y)\n```\n\n* $N$：图中顶点的数量。\n* $X$，$Y$：两个长度为 $M$ 的数组，描述图中的边。\n* 该函数应该返回一个长度为 $N$ 的数组 $G$，表示图中顶点的颜色。\n* 对每个测试用例，该函数恰好被调用一次。\n\n以上函数可以通过调用下面的函数来进行重新着色实验：\n\n```\nint perform_experiment(std::vector<int> E)\n```\n\n* $E$：长度为 $N$ 的数组，指定顶点重新着色的方式。\n* 该函数返回根据 $E$ 所给出的方式进行重新着色后单色分支的数量。\n* 该函数至多只能调用 $2\\,750$ 次。\n\n评测程序**不是自适应的**。也就是说，顶点的颜色在调用 `find_colours` 之前就已经固定下来了。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n```\nN  M\nC[0]  C[1] ... C[N-1]\nX[0]  Y[0]\nX[1]  Y[1]\n...\nX[M-1]  Y[M-1]\n```", "outputFormat": "评测程序示例按照如下格式打印你的答案：\n\n```\nL  Q\nG[0]  G[1] ... G[L-1]\n```\n\n这里，$L$ 是 `find_colours` 返回的数组 $G$ 的长度，$Q$ 是调用 `perform_experiment` 的次数。", "hint": "考虑以下函数调用。\n\n```\nfind_colours(4, [0, 1, 0, 0], [1, 2, 2, 3])\n```\n\n在这个例子中，假设顶点的（隐藏的）颜色是 $C = [2, 0, 0, 0]$，如下图所示。顶点的颜色同时也用数字标注在顶点右上角的标签里。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ih99ftw2.png \"230\")\n\n假设该函数以下列方式调用 `perform_experiment`。\n\n```\nperform_experiment([-1, -1, -1, -1])\n```\n\n这次调用没有重新着色任何顶点，因此所有顶点都保持它们原来的颜色。\n\n顶点 $1$ 和顶点 $2$ 都是颜色 $0$ 的。因此路径 $1, 2$ 是单色路径，从而顶点 $1$ 和顶点 $2$ 在同一个单色分支中。\n\n顶点 $1$ 和顶点 $3$ 都是颜色 $0$ 的。但是由于不存在连接它们的单色路径，因此它们在不同的单色分支中。\n\n总共有 $3$ 个单色分支，分别是顶点集合 $\\{0\\}$、$\\{1, 2\\}$ 和 $\\{3\\}$。因此，本次函数调用返回 $3$。\n\n再假设该函数以下列方式调用 `perform_experiment`。\n\n```\nperform_experiment([0, -1, -1, -1])\n```\n\n这次调用只把顶点 $0$ 重新着色成颜色 $0$，结果如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0qub0o1.png \"230\")\n\n此时所有顶点都属于同一个单色分支，因此本次函数调用返回 $1$。由此可以推断顶点 $1$、$2$ 和 $3$ 都是颜色 $0$ 的。\n\n假设该函数还以下列方式调用 `perform_experiment`。\n\n```\nperform_experiment([-1, -1, -1, 2])\n```\n\n这次调用把顶点 $3$ 重新着色成颜色 $2$，结果如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ds6xl13a.png \"230\")\n\n这时有 $2$ 个单色分支，分别是顶点集合 $\\{0, 3\\}$ 和 $\\{1, 2\\}$，因此本次函数调用返回 $2$。由此可以推断顶点 $0$ 是颜色 $2$ 的。\n\n然后函数 `find_colours` 返回数组 $[2, 0, 0, 0]$。由于 $C = [2, 0, 0, 0]$，因此可以获得满分。\n\n此外，也还有多种返回值，例如 $[1, 2, 2, 2]$ 或 $[1, 2, 2, 3]$，可以获得 $50\\%$ 的分数。\n\n### 约束条件\n\n* $2 \\le N \\le 250$\n* $N - 1 \\le M \\le \\frac{N \\cdot (N - 1)}{2}$\n* 对所有满足 $0 \\le j \\lt M$ 的 $j$，都有 $0 \\le X[j] \\lt Y[j] \\lt N$。\n* 对所有满足 $0 \\le j \\lt k \\lt M$ 的 $j$ 和 $k$，都有 $X[j] \\neq X[k]$ 或 $Y[j] \\neq Y[k]$。\n* 每对顶点被某条路径连接。\n* 对所有满足 $0 \\le i \\lt N$ 的 $i$，都有 $0 \\le C[i] \\lt N$。\n\n| 子任务 | 分数  | 额外的约束条件 |\n| :-----: | :----: | ---------------------- |\n| 1       | $3$    | $N = 2$|\n| 2       | $7$    | $N \\le 50$|\n| 3       | $33$   | 给定的图是一条路径：$M = N - 1$，且顶点 $j$ 和 $j+1$ 是相邻的（$0 \\leq j < M$）。 |\n| 4       | $21$   | 给定的图是完全图：$M = \\frac{N \\cdot (N - 1)}{2}$，且任意两个顶点是相邻的。 |\n| 5       | $36$   | 没有额外的约束条件。 |\n\n在每个子任务中，如果你的程序正确给出了每对相邻顶点是否具有相同颜色，那么也会获得部分分数。\n\n更准确地说，如果在所有测试用例中 `find_colours` 返回的数组 $G$ 与数组 $C$ 完全一样（也就是对所有满足 $0 \\le i \\lt N$ 的 $i$，都有 $G[i] = C[i]$），你会获得该子任务的全部分数。否则，如果在某个子任务的所有测试样例中满足下列条件，你会获得该子任务 $50\\%$ 的分数：\n\n* 对所有满足 $0 \\le i \\lt N$ 的 $i$，都有 $0 \\le G[i] \\lt N$；\n* 对所有满足 $0 \\le j \\lt M$ 的 $j$，都有：\n  * $G[X[j]] = G[Y[j]]$ 当且仅当 $C[X[j]] = C[Y[j]]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2024] 斯芬克斯的谜题", "background": "请在提交时不要引用 `sphinx.h`，并在代码开头加入如下内容：\n\n```cpp\n#include <vector>\nint perform_experiment(std::vector<int> E);\n```\n\n请勿用 C++14 (GCC 9) 提交。", "description": "斯芬克斯为你准备了一个谜题。给定 $N$ 个顶点的图，顶点从 $0$ 到 $N-1$ 编号。图中有 $M$ 条边，从 $0$ 到 $M-1$ 编号。每条边连接两个不同的顶点，且边是双向的。具体来说，对从 $0$ 到 $M-1$ 的每个 $j$，边 $j$ 连接顶点 $X[j]$ 和 $Y[j]$。任意两个顶点之间最多有一条边。若两个顶点被一条边连接，则它们是**相邻的**。\n\n对顶点序列 $v_0, v_1, \\ldots, v_k$（对 $k \\ge 0$），若每两个连续顶点 $v_l$ 和 $v_{l+1}$（对所有满足 $0 \\le l \\lt k$ 的 $l$）是相邻的，则称其为一条**路径**。路径 $v_0, v_1, \\ldots, v_k$ **连接**顶点 $v_0$ 和 $v_k$。在给定的图中，每对顶点被某条路径连接。\n\n现在有 $N + 1$ 种颜色，从 $0$ 到 $N$ 编号。其中，颜色 $N$ 是特殊的，称为**斯芬克斯之色**。一开始每个顶点都有一种颜色，顶点 $i$（$0 \\le i \\lt N$）的颜色是 $C[i]$。多个顶点可以是同一种颜色的，有的颜色可能没有对应的顶点，且不会有顶点的颜色是斯芬克斯之色。也就是说，$0 \\le C[i] \\lt N$（$0 \\le i \\lt N$）。\n\n若一条路径 $v_0, v_1, \\ldots, v_k$（对 $k \\ge 0$）上的所有顶点都是相同颜色的，则称其是**单色**的。也就是说，满足 $C[v_l] = C[v_{l+1}]$（对所有满足 $0 \\le l \\lt k$ 的 $l$）。此外，两个顶点 $p$ 和 $q$（$0 \\le p \\lt N$，$0 \\le q \\lt N$）在同一个**单色分支**中，当且仅当它们被某条单色路径连接。\n\n你知道图中顶点和边的关系，但是你不知道每个顶点的颜色。你希望通过**重新着色实验**来弄清楚顶点的颜色。\n\n在一次重新着色实验中，你可以对任意多的顶点进行重新着色。具体来说，在一次重新着色实验中，你先给出一个长度为 $N$ 的数组 $E$，对每个 $i$（$0 \\le i \\lt N$），$E[i]$ 的值在 $-1$ 和 $N$ 之间（**包括** $-1$ 和 $N$）。重新着色后，每个顶点 $i$ 的颜色变成了 $S[i]$，其中 $S[i]$ 的值：\n* 若 $E[i] = -1$，则是 $C[i]$，也就是重新着色前顶点 $i$ 的颜色；\n* 否则，是 $E[i]$。\n\n注意：你可以在重新着色的过程中使用斯芬克斯之色。\n\n在将每个顶点 $i$ 的颜色设为 $S[i]$（$0 \\le i \\lt N$）之后，斯芬克斯会宣布图中单色分支的数量。新的着色情况仅在本次重新着色实验中有效，因此**当本次实验结束后，所有顶点的颜色会恢复成最初的情况**。\n\n你的任务是至多通过 $2\\,750$ 次重新着色实验来确定图中顶点的颜色。如果正确给出了每对相邻顶点是否具有相同颜色，那么也会获得部分分数。\n\n### 实现细节\n\n你要实现以下函数。\n\n```\nstd::vector<int> find_colours(int N,\n    std::vector<int> X, std::vector<int> Y)\n```\n\n* $N$：图中顶点的数量。\n* $X$，$Y$：两个长度为 $M$ 的数组，描述图中的边。\n* 该函数应该返回一个长度为 $N$ 的数组 $G$，表示图中顶点的颜色。\n* 对每个测试用例，该函数恰好被调用一次。\n\n以上函数可以通过调用下面的函数来进行重新着色实验：\n\n```\nint perform_experiment(std::vector<int> E)\n```\n\n* $E$：长度为 $N$ 的数组，指定顶点重新着色的方式。\n* 该函数返回根据 $E$ 所给出的方式进行重新着色后单色分支的数量。\n* 该函数至多只能调用 $2\\,750$ 次。\n\n评测程序**不是自适应的**。也就是说，顶点的颜色在调用 `find_colours` 之前就已经固定下来了。", "inputFormat": "评测程序示例读取如下格式的输入：\n\n```\nN  M\nC[0]  C[1] ... C[N-1]\nX[0]  Y[0]\nX[1]  Y[1]\n...\nX[M-1]  Y[M-1]\n```", "outputFormat": "评测程序示例按照如下格式打印你的答案：\n\n```\nL  Q\nG[0]  G[1] ... G[L-1]\n```\n\n这里，$L$ 是 `find_colours` 返回的数组 $G$ 的长度，$Q$ 是调用 `perform_experiment` 的次数。", "hint": "考虑以下函数调用。\n\n```\nfind_colours(4, [0, 1, 0, 0], [1, 2, 2, 3])\n```\n\n在这个例子中，假设顶点的（隐藏的）颜色是 $C = [2, 0, 0, 0]$，如下图所示。顶点的颜色同时也用数字标注在顶点右上角的标签里。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ih99ftw2.png \"230\")\n\n假设该函数以下列方式调用 `perform_experiment`。\n\n```\nperform_experiment([-1, -1, -1, -1])\n```\n\n这次调用没有重新着色任何顶点，因此所有顶点都保持它们原来的颜色。\n\n顶点 $1$ 和顶点 $2$ 都是颜色 $0$ 的。因此路径 $1, 2$ 是单色路径，从而顶点 $1$ 和顶点 $2$ 在同一个单色分支中。\n\n顶点 $1$ 和顶点 $3$ 都是颜色 $0$ 的。但是由于不存在连接它们的单色路径，因此它们在不同的单色分支中。\n\n总共有 $3$ 个单色分支，分别是顶点集合 $\\{0\\}$、$\\{1, 2\\}$ 和 $\\{3\\}$。因此，本次函数调用返回 $3$。\n\n再假设该函数以下列方式调用 `perform_experiment`。\n\n```\nperform_experiment([0, -1, -1, -1])\n```\n\n这次调用只把顶点 $0$ 重新着色成颜色 $0$，结果如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n0qub0o1.png \"230\")\n\n此时所有顶点都属于同一个单色分支，因此本次函数调用返回 $1$。由此可以推断顶点 $1$、$2$ 和 $3$ 都是颜色 $0$ 的。\n\n假设该函数还以下列方式调用 `perform_experiment`。\n\n```\nperform_experiment([-1, -1, -1, 2])\n```\n\n这次调用把顶点 $3$ 重新着色成颜色 $2$，结果如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ds6xl13a.png \"230\")\n\n这时有 $2$ 个单色分支，分别是顶点集合 $\\{0, 3\\}$ 和 $\\{1, 2\\}$，因此本次函数调用返回 $2$。由此可以推断顶点 $0$ 是颜色 $2$ 的。\n\n然后函数 `find_colours` 返回数组 $[2, 0, 0, 0]$。由于 $C = [2, 0, 0, 0]$，因此可以获得满分。\n\n此外，也还有多种返回值，例如 $[1, 2, 2, 2]$ 或 $[1, 2, 2, 3]$，可以获得 $50\\%$ 的分数。\n\n### 约束条件\n\n* $2 \\le N \\le 250$\n* $N - 1 \\le M \\le \\frac{N \\cdot (N - 1)}{2}$\n* 对所有满足 $0 \\le j \\lt M$ 的 $j$，都有 $0 \\le X[j] \\lt Y[j] \\lt N$。\n* 对所有满足 $0 \\le j \\lt k \\lt M$ 的 $j$ 和 $k$，都有 $X[j] \\neq X[k]$ 或 $Y[j] \\neq Y[k]$。\n* 每对顶点被某条路径连接。\n* 对所有满足 $0 \\le i \\lt N$ 的 $i$，都有 $0 \\le C[i] \\lt N$。\n\n| 子任务 | 分数  | 额外的约束条件 |\n| :-----: | :----: | ---------------------- |\n| 1       | $3$    | $N = 2$|\n| 2       | $7$    | $N \\le 50$|\n| 3       | $33$   | 给定的图是一条路径：$M = N - 1$，且顶点 $j$ 和 $j+1$ 是相邻的（$0 \\leq j < M$）。 |\n| 4       | $21$   | 给定的图是完全图：$M = \\frac{N \\cdot (N - 1)}{2}$，且任意两个顶点是相邻的。 |\n| 5       | $36$   | 没有额外的约束条件。 |\n\n在每个子任务中，如果你的程序正确给出了每对相邻顶点是否具有相同颜色，那么也会获得部分分数。\n\n更准确地说，如果在所有测试用例中 `find_colours` 返回的数组 $G$ 与数组 $C$ 完全一样（也就是对所有满足 $0 \\le i \\lt N$ 的 $i$，都有 $G[i] = C[i]$），你会获得该子任务的全部分数。否则，如果在某个子任务的所有测试样例中满足下列条件，你会获得该子任务 $50\\%$ 的分数：\n\n* 对所有满足 $0 \\le i \\lt N$ 的 $i$，都有 $0 \\le G[i] \\lt N$；\n* 对所有满足 $0 \\le j \\lt M$ 的 $j$，都有：\n  * $G[X[j]] = G[Y[j]]$ 当且仅当 $C[X[j]] = C[Y[j]]$。", "locale": "zh-CN"}}}
{"pid": "P11055", "type": "P", "difficulty": 4, "samples": [["4 3\n1 2\n3 4\n1 2", "2\n1 4\n2 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Special Judge", "O2优化"], "title": "Yet another ZP problem", "background": "", "description": "从左到右排列着 $n$ 个点，编号分别为 $1,2,\\dots,n$。\n\n你要在他们之间连一些边，记边集为 $E=\\{(x,y)\\ |\\ 1\\leq x<y\\leq n\\}$。\n\n我们称边集 $E$ 满足限制 $[l,r]$，当且仅当存在 $(x,y)\\in E$ 使得 $[x\\in[l,r]]+[y\\in[l,r]]=1$。\n\n基础地，我们希望对所有 $1\\leq i\\leq n$ 满足限制 $[i,i]$。\n\n在此基础上，输入还给定了额外的 $m$ 个限制 $[l_i,r_i]$（$1\\leq l_i<r_i\\leq n$ 并且 $[l_i,r_i]\\neq [1,n]$）。\n\n请问 $|E|$ 最小是多少，在此基础上给出一组合法构造。可以证明，合法的 $E$ 总是存在的。\n\n对于形如 $[P]$ 的表达式，当且仅当命题 $P$ 为真时其取值为 $1$，否则取值为 $0$。", "inputFormat": "第一行输入两个整数 $n,m$。\n\n接下来 $m$ 行每行两个正整数 $l_i,r_i$。", "outputFormat": "第一行输出一个数代表 $|E|$。\n\n接下来 $|E|$ 行，每行两个数 $x,y$ 代表一条边，**注意你需要保证 $1\\le x<y\\le n$**。", "hint": "### 样例解释\n\n对于限制 $[1, 1]$，存在边 $(1, 4)$ 使得 $[1 \\in [1, 1]] + [4 \\in [1, 1]] = 1$。\n\n对于限制 $[3, 4]$，存在边 $(1, 4)$ 使得 $[1 \\in [3, 4]] + [4 \\in [3, 4]] = 1$。\n\n对于限制 $[2, 2]$，存在边 $(2, 3)$ 使得 $[2 \\in [2, 2]] + [3 \\in [2, 2]] = 1$。\n\n### 数据范围\n\n对于所有数据，保证 $3\\leq n\\leq 10^4$，$0\\leq m\\leq 10^5$，$1\\le l_i<r_i\\le n$，$[l_i,r_i]\\ne [1,n]$。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim 5$ | $n,m\\le 5$ |\n| $6\\sim 7$ | $m=0$ |\n| $8\\sim 11$ | $r_i<l_{i+1}$ |\n| $12\\sim 14$ | $l_i=1$ |\n| $15\\sim 20$ | 无 |\n\n**对于第 $i$ 个测试点，保证 $n$ 的奇偶性与 $i$ 的奇偶性相同，$m$ 的奇偶性与 $\\lfloor\\frac{i}{2}\\rfloor+1$ 的奇偶性相同。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Yet another ZP problem", "background": "", "description": "从左到右排列着 $n$ 个点，编号分别为 $1,2,\\dots,n$。\n\n你要在他们之间连一些边，记边集为 $E=\\{(x,y)\\ |\\ 1\\leq x<y\\leq n\\}$。\n\n我们称边集 $E$ 满足限制 $[l,r]$，当且仅当存在 $(x,y)\\in E$ 使得 $[x\\in[l,r]]+[y\\in[l,r]]=1$。\n\n基础地，我们希望对所有 $1\\leq i\\leq n$ 满足限制 $[i,i]$。\n\n在此基础上，输入还给定了额外的 $m$ 个限制 $[l_i,r_i]$（$1\\leq l_i<r_i\\leq n$ 并且 $[l_i,r_i]\\neq [1,n]$）。\n\n请问 $|E|$ 最小是多少，在此基础上给出一组合法构造。可以证明，合法的 $E$ 总是存在的。\n\n对于形如 $[P]$ 的表达式，当且仅当命题 $P$ 为真时其取值为 $1$，否则取值为 $0$。", "inputFormat": "第一行输入两个整数 $n,m$。\n\n接下来 $m$ 行每行两个正整数 $l_i,r_i$。", "outputFormat": "第一行输出一个数代表 $|E|$。\n\n接下来 $|E|$ 行，每行两个数 $x,y$ 代表一条边，**注意你需要保证 $1\\le x<y\\le n$**。", "hint": "### 样例解释\n\n对于限制 $[1, 1]$，存在边 $(1, 4)$ 使得 $[1 \\in [1, 1]] + [4 \\in [1, 1]] = 1$。\n\n对于限制 $[3, 4]$，存在边 $(1, 4)$ 使得 $[1 \\in [3, 4]] + [4 \\in [3, 4]] = 1$。\n\n对于限制 $[2, 2]$，存在边 $(2, 3)$ 使得 $[2 \\in [2, 2]] + [3 \\in [2, 2]] = 1$。\n\n### 数据范围\n\n对于所有数据，保证 $3\\leq n\\leq 10^4$，$0\\leq m\\leq 10^5$，$1\\le l_i<r_i\\le n$，$[l_i,r_i]\\ne [1,n]$。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim 5$ | $n,m\\le 5$ |\n| $6\\sim 7$ | $m=0$ |\n| $8\\sim 11$ | $r_i<l_{i+1}$ |\n| $12\\sim 14$ | $l_i=1$ |\n| $15\\sim 20$ | 无 |\n\n**对于第 $i$ 个测试点，保证 $n$ 的奇偶性与 $i$ 的奇偶性相同，$m$ 的奇偶性与 $\\lfloor\\frac{i}{2}\\rfloor+1$ 的奇偶性相同。**", "locale": "zh-CN"}}}
{"pid": "P11056", "type": "P", "difficulty": 5, "samples": [["5 2\n1 2 3 4 5", "FFBFF"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536, 524288, 65536]}, "tags": ["O2优化"], "title": "Fire and Big", "background": null, "description": "小 F 要和其他人玩游戏，但他不想输，所以来找你帮他研究策略。\n\n有 $m$ 个石子，小 F 和小 B 轮流取石子，小 F 先开始取，不能取的人输。\n\n给定正整数 $n$，每次取石子的个数 $k$（$k$ 是正整数） 必须满足如下两个条件**之一**：\n\n- $k$ 是 $n$ 的倍数。\n- $k$ 是 $<n$ 的完全平方数。\n\n他们要玩 $T$ 局游戏，不过每一局游戏的 $n$ 不变，只有石子个数 $m$ 会变。\n\n对于每一局，假设两人足够聪明，问谁有必胜策略。", "inputFormat": "第一行，两个正整数 $T,n$。\n\n第二行，$T$ 个正整数 $m$，表示每一局游戏的石子个数。", "outputFormat": "输出一行一个长为 $T$ 的字符串，每个字符为 `F` 或者 `B`，分别表示这一局游戏先手必胜与后手必胜。", "hint": "### 样例解释\n\n以下将说明当 $n = 2, m = 3$ 时，后手必胜。对先手第一次取走的石子的数量进行讨论：\n\n- 若先手取走 $1$ 个石子，则后手可以取完剩下 $2$ 个石子；\n- 若先手取走 $2$ 个石子，则后手可以取完剩下 $1$ 个石子。\n\n因此无论如何，后手总会赢得胜利。\n\n### 数据范围\n\n| 测试点编号 | $n$ | $m\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $\\le 5\\times 10^5$ | $1$ |\n| $2\\sim 3$ | $\\le 5$ | $5$ |\n| $4\\sim 6$ | $\\le 10^5$ | $n$ |\n| $7\\sim 8$ | $=2$ | $10^9$ |\n| $9\\sim 11$ | $\\le 5$ | $10^9$ |\n| $12\\sim 14$ | $\\le 10^3$ | $10^9$ |\n| $15\\sim 17$ | $\\le 10^5$ | $10^9$ |\n| $18\\sim 20$ | $\\le 5\\times 10^5$ | $10^9$ |\n\n对于所有数据，保证 $1\\le T,n\\le 5\\times 10^5$，$1\\le m\\le 10^9$。\n\n**对于奇数编号测试点，内存限制为 $512\\ \\text{MB}$；对于偶数编号测试点，内存限制为 $64\\ \\text{MB}$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Fire and Big", "background": null, "description": "小 F 要和其他人玩游戏，但他不想输，所以来找你帮他研究策略。\n\n有 $m$ 个石子，小 F 和小 B 轮流取石子，小 F 先开始取，不能取的人输。\n\n给定正整数 $n$，每次取石子的个数 $k$（$k$ 是正整数） 必须满足如下两个条件**之一**：\n\n- $k$ 是 $n$ 的倍数。\n- $k$ 是 $<n$ 的完全平方数。\n\n他们要玩 $T$ 局游戏，不过每一局游戏的 $n$ 不变，只有石子个数 $m$ 会变。\n\n对于每一局，假设两人足够聪明，问谁有必胜策略。", "inputFormat": "第一行，两个正整数 $T,n$。\n\n第二行，$T$ 个正整数 $m$，表示每一局游戏的石子个数。", "outputFormat": "输出一行一个长为 $T$ 的字符串，每个字符为 `F` 或者 `B`，分别表示这一局游戏先手必胜与后手必胜。", "hint": "### 样例解释\n\n以下将说明当 $n = 2, m = 3$ 时，后手必胜。对先手第一次取走的石子的数量进行讨论：\n\n- 若先手取走 $1$ 个石子，则后手可以取完剩下 $2$ 个石子；\n- 若先手取走 $2$ 个石子，则后手可以取完剩下 $1$ 个石子。\n\n因此无论如何，后手总会赢得胜利。\n\n### 数据范围\n\n| 测试点编号 | $n$ | $m\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $\\le 5\\times 10^5$ | $1$ |\n| $2\\sim 3$ | $\\le 5$ | $5$ |\n| $4\\sim 6$ | $\\le 10^5$ | $n$ |\n| $7\\sim 8$ | $=2$ | $10^9$ |\n| $9\\sim 11$ | $\\le 5$ | $10^9$ |\n| $12\\sim 14$ | $\\le 10^3$ | $10^9$ |\n| $15\\sim 17$ | $\\le 10^5$ | $10^9$ |\n| $18\\sim 20$ | $\\le 5\\times 10^5$ | $10^9$ |\n\n对于所有数据，保证 $1\\le T,n\\le 5\\times 10^5$，$1\\le m\\le 10^9$。\n\n**对于奇数编号测试点，内存限制为 $512\\ \\text{MB}$；对于偶数编号测试点，内存限制为 $64\\ \\text{MB}$。**", "locale": "zh-CN"}}}
{"pid": "P11057", "type": "P", "difficulty": 6, "samples": [["2 2", "2 3\n3 16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "诈骗题", "background": "这是一道诈骗题。", "description": "定义 $f(n,m)$ 为下列问题的答案。\n\n> 考虑一个 $n\\times m$ 黑白网格图，初始全是白色的。每次操作如下：\n> - 选择一个白格子 $(x,y)$，将其所在行全染黑，这个操作叫 $(x,y,\\text{R})$。\n> - 选择一个白格子 $(x,y)$，将其所在列全染黑，这个操作叫 $(x,y,\\text{C})$。\n> \n> 假设最多能操作 $k$ 次。问：\n> \n> - 对于所有操作 $k$ 次的方案，有多少种本质不同的 **操作集合** 。操作集合是一个大小为 $k$ 的集合，代表操作过的 $k$ 种操作。（注意，顺序不同但操作集合相同的 $2$ 种方案只会被计算 $1$ 次）\n\n称两个操作集合 $A, B$ 本质不同，当且仅当存在某种操作 $opt$，满足 $[opt \\in A] + [opt \\in B] = 1$。\n\n现在给定 $n,m$，请你对于所有 $1\\le i\\le n,\\ 1\\le j\\le m$ 求出 $f(i,j)$ 的取值。\n\n由于答案可能有点大，因此你只需要输出其取模 $998244353$ 的结果。", "inputFormat": "输入一行两个正整数 $n,m$。", "outputFormat": "输出一个 $n$ 行 $m$ 列的矩阵，第 $i$ 行第 $j$ 个数表示 $f(i,j)\\bmod 998244353$。", "hint": "### 样例解释\n\n对于 $f(1, 2)$，此时 $k = 2$，一共有以下 $3$ 个可能的操作集合：\n\n- $\\{(1, 1, \\text R), (1, 2, \\text C)\\}$\n- $\\{(1, 1, \\text C), (1, 2, \\text R)\\}$\n- $\\{(1, 1, \\text C), (1, 2, \\text C)\\}$\n\n注意到对于最后一个集合，有不止一种操作顺序，但是由于它们对应的操作集合相同，因此只被记入答案一次。\n\n### 数据范围\n\n**洛谷代码长度限制为 $\\textbf{50\\ KB}$。**\n\n| 测试点编号 | $n=$ | $m=$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $2$ | $2$ |\n| $2$ | $3$ | $3$ |\n| $3$ | $5$ | $5$ |\n| $4$ | $10$ | $10$ |\n| $5$ | $20$ | $20$ |\n| $6$ | $50$ | $50$ |\n| $7$ | $100$ | $100$ |\n| $8$ | $1$ | $200$ |\n| $9$ | $2$ | $200$ |\n| $10$ | $300$ | $300$ |\n\n对于所有数据，保证 $1\\le n,m\\le 300$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "诈骗题", "background": "这是一道诈骗题。", "description": "定义 $f(n,m)$ 为下列问题的答案。\n\n> 考虑一个 $n\\times m$ 黑白网格图，初始全是白色的。每次操作如下：\n> - 选择一个白格子 $(x,y)$，将其所在行全染黑，这个操作叫 $(x,y,\\text{R})$。\n> - 选择一个白格子 $(x,y)$，将其所在列全染黑，这个操作叫 $(x,y,\\text{C})$。\n> \n> 假设最多能操作 $k$ 次。问：\n> \n> - 对于所有操作 $k$ 次的方案，有多少种本质不同的 **操作集合** 。操作集合是一个大小为 $k$ 的集合，代表操作过的 $k$ 种操作。（注意，顺序不同但操作集合相同的 $2$ 种方案只会被计算 $1$ 次）\n\n称两个操作集合 $A, B$ 本质不同，当且仅当存在某种操作 $opt$，满足 $[opt \\in A] + [opt \\in B] = 1$。\n\n现在给定 $n,m$，请你对于所有 $1\\le i\\le n,\\ 1\\le j\\le m$ 求出 $f(i,j)$ 的取值。\n\n由于答案可能有点大，因此你只需要输出其取模 $998244353$ 的结果。", "inputFormat": "输入一行两个正整数 $n,m$。", "outputFormat": "输出一个 $n$ 行 $m$ 列的矩阵，第 $i$ 行第 $j$ 个数表示 $f(i,j)\\bmod 998244353$。", "hint": "### 样例解释\n\n对于 $f(1, 2)$，此时 $k = 2$，一共有以下 $3$ 个可能的操作集合：\n\n- $\\{(1, 1, \\text R), (1, 2, \\text C)\\}$\n- $\\{(1, 1, \\text C), (1, 2, \\text R)\\}$\n- $\\{(1, 1, \\text C), (1, 2, \\text C)\\}$\n\n注意到对于最后一个集合，有不止一种操作顺序，但是由于它们对应的操作集合相同，因此只被记入答案一次。\n\n### 数据范围\n\n**洛谷代码长度限制为 $\\textbf{50\\ KB}$。**\n\n| 测试点编号 | $n=$ | $m=$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $2$ | $2$ |\n| $2$ | $3$ | $3$ |\n| $3$ | $5$ | $5$ |\n| $4$ | $10$ | $10$ |\n| $5$ | $20$ | $20$ |\n| $6$ | $50$ | $50$ |\n| $7$ | $100$ | $100$ |\n| $8$ | $1$ | $200$ |\n| $9$ | $2$ | $200$ |\n| $10$ | $300$ | $300$ |\n\n对于所有数据，保证 $1\\le n,m\\le 300$。", "locale": "zh-CN"}}}
{"pid": "P11058", "type": "P", "difficulty": 6, "samples": [["3\n1 10\n27 3\n32 2", "1 2\n4 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["提交答案", "Special Judge", "O2优化"], "title": "合并香蕉", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xi3q8vw1.png)", "description": "有 $n$ 条大香蕉，第 $i$ 条大香蕉可简化为一个正整数二元组 $(a_i,k_i)$，其中 $2\\le k_i\\le 10$。\n\n初始时有 $n$ 堆大香蕉，第 $i$ 堆只包含第 $i$ 条大香蕉。\n\n每次可以选择不同的两堆合并，合并时会损耗香蕉的大小。\n\n具体地，如果第 $i$ 条香蕉**参与了合并**，则其大小 $a_i$ 会变为原来的 $\\frac{1}{k_i}$ 倍。\n\n**参与了合并**：合并前在两堆香蕉中的某一堆中。\n\n你想把大香蕉们合为一堆，由于香蕉越大越好，你需要让操作结束后所有的 $a_i$ 之和**越大越好**。\n\n考虑到求出最优解可能会比较困难，你只需要**尽可能接近标准答案**即可，具体参见**评分标准**。\n\n为了防止你乱输出一个数，你还需要**输出方案**，具体参见**输出格式**。", "inputFormat": "第一行一个正整数代表 $n$。\n\n接下来 $n$ 行，每行两个正整数代表 $a_i,k_i$。", "outputFormat": "输出 $n-1$ 行，每行两个数 $x,y$ 代表合并第 $x$ 堆和第 $y$ 堆。\n\n对于第 $i$ 次合并，我们记新形成的香蕉堆是第 $n+i$ 堆，而原来的两个香蕉堆（第 $x$ 堆、第 $y$ 堆）从此将**被视为不存在** ，所以之后的合并中不允许调用 $x$ 和 $y$，否则你将会爆零。", "hint": "### 样例解释\n\n该样例输出对应的操作结束后满足 $a=(0.01,3,16)$，对应的 $a_i$ 之和为 $19.01$。\n\n另外，如果输出如下，则操作结束后满足 $a=(0.01,9,8)$，对应的 $a_i$ 之和为 $17.01$，可以获得 $4$ 分。\n```\n1 3\n2 4\n```\n### 评分标准\n\n对于每个测试点，我们采用如下方式评分：\n\n- 如果你的输出不合法，得 $0$ 分。\n- 否则设你输出的方案对应的操作结束后的 $a_i$ 之和为 $f$，标准答案输出的方案对应的操作结束后的 $a_i$ 之和为 $ans$，则你的得分 $s=\\lfloor \\max\\{0,10-\\log_{10} \\max\\{1,\\frac{ans-f}{\\epsilon}\\}\\}\\rfloor$ 分，其中 $\\epsilon=10^{-5}$。\n\n### 数据范围\n\n本题共有 $10$ 个测试点，每个测试点 $10$ 分。\n\n| 测试点编号 | $n=$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | 无 |\n| $2$ | $5$ | 无 |\n| $3$ | $10$ | 无 |\n| $4$ | $20$ | 无 |\n| $5$ | $100$ | 无 |\n| $6$ | $10^3$ | 无 |\n| $7$ | $10^5-3$ | $a_i=1$ 且 $k_i=2$ |\n| $8$ | $10^5-2$ | $a_i=1$ |\n| $9$ | $10^5-1$ | $k_i=2$ |\n| $10$ | $10^5$ | 无 |\n\n对于所有数据，保证 $3\\le n\\le 10^5$，$1\\le a_i\\le 10^5$，$2\\le k_i\\le 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "合并香蕉", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/xi3q8vw1.png)", "description": "有 $n$ 条大香蕉，第 $i$ 条大香蕉可简化为一个正整数二元组 $(a_i,k_i)$，其中 $2\\le k_i\\le 10$。\n\n初始时有 $n$ 堆大香蕉，第 $i$ 堆只包含第 $i$ 条大香蕉。\n\n每次可以选择不同的两堆合并，合并时会损耗香蕉的大小。\n\n具体地，如果第 $i$ 条香蕉**参与了合并**，则其大小 $a_i$ 会变为原来的 $\\frac{1}{k_i}$ 倍。\n\n**参与了合并**：合并前在两堆香蕉中的某一堆中。\n\n你想把大香蕉们合为一堆，由于香蕉越大越好，你需要让操作结束后所有的 $a_i$ 之和**越大越好**。\n\n考虑到求出最优解可能会比较困难，你只需要**尽可能接近标准答案**即可，具体参见**评分标准**。\n\n为了防止你乱输出一个数，你还需要**输出方案**，具体参见**输出格式**。", "inputFormat": "第一行一个正整数代表 $n$。\n\n接下来 $n$ 行，每行两个正整数代表 $a_i,k_i$。", "outputFormat": "输出 $n-1$ 行，每行两个数 $x,y$ 代表合并第 $x$ 堆和第 $y$ 堆。\n\n对于第 $i$ 次合并，我们记新形成的香蕉堆是第 $n+i$ 堆，而原来的两个香蕉堆（第 $x$ 堆、第 $y$ 堆）从此将**被视为不存在** ，所以之后的合并中不允许调用 $x$ 和 $y$，否则你将会爆零。", "hint": "### 样例解释\n\n该样例输出对应的操作结束后满足 $a=(0.01,3,16)$，对应的 $a_i$ 之和为 $19.01$。\n\n另外，如果输出如下，则操作结束后满足 $a=(0.01,9,8)$，对应的 $a_i$ 之和为 $17.01$，可以获得 $4$ 分。\n```\n1 3\n2 4\n```\n### 评分标准\n\n对于每个测试点，我们采用如下方式评分：\n\n- 如果你的输出不合法，得 $0$ 分。\n- 否则设你输出的方案对应的操作结束后的 $a_i$ 之和为 $f$，标准答案输出的方案对应的操作结束后的 $a_i$ 之和为 $ans$，则你的得分 $s=\\lfloor \\max\\{0,10-\\log_{10} \\max\\{1,\\frac{ans-f}{\\epsilon}\\}\\}\\rfloor$ 分，其中 $\\epsilon=10^{-5}$。\n\n### 数据范围\n\n本题共有 $10$ 个测试点，每个测试点 $10$ 分。\n\n| 测试点编号 | $n=$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | 无 |\n| $2$ | $5$ | 无 |\n| $3$ | $10$ | 无 |\n| $4$ | $20$ | 无 |\n| $5$ | $100$ | 无 |\n| $6$ | $10^3$ | 无 |\n| $7$ | $10^5-3$ | $a_i=1$ 且 $k_i=2$ |\n| $8$ | $10^5-2$ | $a_i=1$ |\n| $9$ | $10^5-1$ | $k_i=2$ |\n| $10$ | $10^5$ | 无 |\n\n对于所有数据，保证 $3\\le n\\le 10^5$，$1\\le a_i\\le 10^5$，$2\\le k_i\\le 10$。", "locale": "zh-CN"}}}
{"pid": "P11059", "type": "P", "difficulty": 2, "samples": [["3 8", "107"], ["1 1", "1"], ["5 3", "10002"], ["2 7", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "语言月赛"], "title": "[入门赛 #27] 数字 (Hard Ver.)", "background": "> 如果我说不吻你不罢休\\\n> 谁能逼我将就\\\n> ——李荣浩《不将就》\n\n人生不能将就，是否做出了最好的选择，取决于每个人自己。", "description": "你需要求出一个 $n$ 位数 $x$，满足以下两个条件：\n\n- 1. $x$ 的**各位数字之和**除以 $p$ 的**余数**尽可能小。\n- 2. 在**已经满足 1** 的情况下，$x$ 的值尽可能小。\n\n各位数字之和：一个数的每个位置上的数字加起来的总和。例如，$123$ 的各位数字之和为 $1+2+3=6$", "inputFormat": "输入共一行，两个整数 $n,p$。", "outputFormat": "输出一个整数，表示上述问题的答案。", "hint": "#### 样例解释 #1\n\n三位数包含 $100,101,\\dots,999$。其中 $107$ 的各位数字之和为 $1+0+7=8$，$8$ 除以 $8$ 的余数为 $0$。\n\n#### 数据范围\n\n\n对于 $30\\%$ 的数据，$1\\le n\\le 18$，$1\\le p\\le 200$；\\\n对于 $100\\%$ 的数据，$1\\le n \\le 10^6$，\n$ 1 \\le p \\le 10^9 $；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #27] 数字 (Hard Ver.)", "background": "> 如果我说不吻你不罢休\\\n> 谁能逼我将就\\\n> ——李荣浩《不将就》\n\n人生不能将就，是否做出了最好的选择，取决于每个人自己。", "description": "你需要求出一个 $n$ 位数 $x$，满足以下两个条件：\n\n- 1. $x$ 的**各位数字之和**除以 $p$ 的**余数**尽可能小。\n- 2. 在**已经满足 1** 的情况下，$x$ 的值尽可能小。\n\n各位数字之和：一个数的每个位置上的数字加起来的总和。例如，$123$ 的各位数字之和为 $1+2+3=6$", "inputFormat": "输入共一行，两个整数 $n,p$。", "outputFormat": "输出一个整数，表示上述问题的答案。", "hint": "#### 样例解释 #1\n\n三位数包含 $100,101,\\dots,999$。其中 $107$ 的各位数字之和为 $1+0+7=8$，$8$ 除以 $8$ 的余数为 $0$。\n\n#### 数据范围\n\n\n对于 $30\\%$ 的数据，$1\\le n\\le 18$，$1\\le p\\le 200$；\\\n对于 $100\\%$ 的数据，$1\\le n \\le 10^6$，\n$ 1 \\le p \\le 10^9 $；", "locale": "zh-CN"}}}
{"pid": "P11060", "type": "P", "difficulty": 1, "samples": [["0\n", "YES\n"], ["3\n", "NO\n"], ["6\n", "NO\n"], ["7\n", "YES\n"], ["15\n", "YES\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X4-T0】「Jason-1」x!", "background": "原题链接：<https://oier.team/problems/X4A>。", "description": "给定一个非负整数 $n$，判断 $n!$ 是否是 $n+1$ 的倍数，如果是则输出 `YES`，否则输出 `NO`。\n\n其中 $n!$ 表示 $n$ 的阶乘，其值为所有小于等于 $n$ 的正整数的乘积。例如 $3! = 1 \\times 2 \\times 3 = 6$。并额外规定 $0! = 1$。", "inputFormat": "仅一行，一个非负整数 $n$。", "outputFormat": "仅一行一个字符串 `YES` 或 `NO`，表示 $n!$ 是否是 $n+1$ 的倍数。", "hint": "**【样例解释 #1】**\n\n$0! = 1$，而 $1$ 是 $1$ 的倍数，故输出 `YES`。\n\n**【样例解释 #2】**\n\n$3! = 1 \\times 2 \\times 3 = 6$，而 $6$ 不是 $4$ 的倍数，故输出 `NO`。\n\n**【样例解释 #3】**\n\n$6! = 1 \\times 2 \\times 3 \\times 4 \\times 5 \\times 6 = 720$，而 $720$ 不是 $7$ 的倍数，故输出 `NO`。\n\n**【样例解释 #4】**\n\n$7! = 1 \\times 2 \\times 3 \\times 4 \\times 5 \\times 6 \\times 7= 5040$，而 $5040$ 是 $8$ 的倍数，故输出 `YES`。\n\n**【样例解释 #5】**\n\n$15! = 1 \\times 2 \\times 3 \\times 4 \\times 5 \\times 6 \\times 7 \\times 8 \\times 9 \\times 10 \\times 11 \\times 12 \\times 13 \\times 14 \\times 15 = 1{,}3076{,}7436{,}8000$，而 $1{,}3076{,}7436{,}8000$ 是 $16$ 的倍数，故输出 `YES`。\n\n**【数据范围】**\n\n本题共有 $20$ 个测试点，第 $i$ 个测试点的 $n$ 为 $i-1$。\n\n对于 $100\\%$ 的数据，$0 \\le n \\le 19$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T0】「Jason-1」x!", "background": "原题链接：<https://oier.team/problems/X4A>。", "description": "给定一个非负整数 $n$，判断 $n!$ 是否是 $n+1$ 的倍数，如果是则输出 `YES`，否则输出 `NO`。\n\n其中 $n!$ 表示 $n$ 的阶乘，其值为所有小于等于 $n$ 的正整数的乘积。例如 $3! = 1 \\times 2 \\times 3 = 6$。并额外规定 $0! = 1$。", "inputFormat": "仅一行，一个非负整数 $n$。", "outputFormat": "仅一行一个字符串 `YES` 或 `NO`，表示 $n!$ 是否是 $n+1$ 的倍数。", "hint": "**【样例解释 #1】**\n\n$0! = 1$，而 $1$ 是 $1$ 的倍数，故输出 `YES`。\n\n**【样例解释 #2】**\n\n$3! = 1 \\times 2 \\times 3 = 6$，而 $6$ 不是 $4$ 的倍数，故输出 `NO`。\n\n**【样例解释 #3】**\n\n$6! = 1 \\times 2 \\times 3 \\times 4 \\times 5 \\times 6 = 720$，而 $720$ 不是 $7$ 的倍数，故输出 `NO`。\n\n**【样例解释 #4】**\n\n$7! = 1 \\times 2 \\times 3 \\times 4 \\times 5 \\times 6 \\times 7= 5040$，而 $5040$ 是 $8$ 的倍数，故输出 `YES`。\n\n**【样例解释 #5】**\n\n$15! = 1 \\times 2 \\times 3 \\times 4 \\times 5 \\times 6 \\times 7 \\times 8 \\times 9 \\times 10 \\times 11 \\times 12 \\times 13 \\times 14 \\times 15 = 1{,}3076{,}7436{,}8000$，而 $1{,}3076{,}7436{,}8000$ 是 $16$ 的倍数，故输出 `YES`。\n\n**【数据范围】**\n\n本题共有 $20$ 个测试点，第 $i$ 个测试点的 $n$ 为 $i-1$。\n\n对于 $100\\%$ 的数据，$0 \\le n \\le 19$。", "locale": "zh-CN"}}}
{"pid": "P11061", "type": "P", "difficulty": 2, "samples": [["5\n0 0 0 1 2\n", "4\n"], ["7\n0 0 1 0 3 1 3\n", "7\n"], ["7\n0 1 0 0 2 1 0\n", "5\n"], ["4\n0 0 0 0\n", "0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X4-T1】「Jason-1」IO++", "background": "原题链接：<https://oier.team/problems/X4B>。", "description": "有一类只有输入语句与输出语句的程序，我们用一个非负整数序列 $[a_1, a_2, \\ldots]$ 描述它。\n\n该程序将从前往后依次执行，对于第 $i$ 个元素 $a_i$：\n\n- 若 $a_i = 0$，表示一条输入语句：\n\t- 程序将从输入中读取一个整数。\n- 否则，表示一条输出语句：\n\t- 程序将输出第 $a_i$ 次输入读取到的整数。\n\t- 对于给出的程序，保证执行本语句前，程序至少进行了 $a_i$ 次输入。对于你编写的程序，你同样需要保证这一点。\n\n特别地，一个长度为 $0$ 的空程序也是合法的。\n\n给定一个长度为 $n$ 的程序 $[b_1, \\ldots, b_n]$，你需要求出能够实现相同的功能的程序所需的最短长度。\n\n两个程序能实现相同功能，当且仅当对于任意的长度为 $10^{10^{10}}$、值为 $[1, 10^{10^{10}}]$ 之内整数的输入，两个程序执行的输出语句次数相同，且每一次输出的结果均一致。", "inputFormat": "第一行，一个正整数 $n$，表示程序的长度。\n\n第二行，$n$ 个非负整数 $b_1, \\ldots, b_n$，描述了一个程序。", "outputFormat": "仅一行一个整数，表示要实现相同功能的程序所需要的最小长度。", "hint": "**【样例解释 #1】**\n\n长度为 $4$ 的程序 $[0,0,1,2]$，$[0,1,0,2]$ 均可以实现相同的功能。可以证明不存在长度 $\\leq 3$ 且实现了相同功能的程序，所以答案为 $4$。\n\n- 对于输入 $[2, 3, 4, \\ldots]$，程序 $[0, 0, 0, 1, 2]$ 和 $[0, 0, 1, 2]$ 和 $[0, 1, 0, 2]$ 的输出均为 $[2, 3]$，符合题意。\n- 可以验证，对于任意的长度为 $10^{10^{10}}$、值为 $[1, 10^{10^{10}}]$ 之内整数的输入，两个程序执行的输出语句次数相同，且每一次输出的结果均一致。\n\n但是，程序 $[0,1,1]$ 无法实现相同的功能，因为对于输入 $[2, 3, 4, \\ldots]$，该程序的输出为 $[2, 2]$，与原程序的 $[2, 3]$ 不相同，故不能实现相同功能。\n\n程序 $[0,1,2]$ 是不合法的程序，因为运行第 $3$ 条指令（即一条输出语句 $a_i = 2$）时，只执行了 $1$ 次输入语句。\n\n**【样例解释 #2】**\n\n不存在更短的程序能实现相同功能。\n\n**【样例解释 #3】**\n\n长度为 $5$ 的程序 $[0,1,0,2,1]$ 可以实现相同功能。\n\n**【样例解释 #4】**\n\n由于没有输出语句，因此长度为 $0$ 的空程序即可实现相同功能。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $b_1, \\ldots, b_n$ 非严格单调递增，即对于任意 $2 \\le i \\le n$ 均有 $b_{i-1} \\le b_i$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le b_i \\le n$，且保证执行任何输出语句 $b_i$ 前，程序至少进行了 $b_i$ 次输入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T1】「Jason-1」IO++", "background": "原题链接：<https://oier.team/problems/X4B>。", "description": "有一类只有输入语句与输出语句的程序，我们用一个非负整数序列 $[a_1, a_2, \\ldots]$ 描述它。\n\n该程序将从前往后依次执行，对于第 $i$ 个元素 $a_i$：\n\n- 若 $a_i = 0$，表示一条输入语句：\n\t- 程序将从输入中读取一个整数。\n- 否则，表示一条输出语句：\n\t- 程序将输出第 $a_i$ 次输入读取到的整数。\n\t- 对于给出的程序，保证执行本语句前，程序至少进行了 $a_i$ 次输入。对于你编写的程序，你同样需要保证这一点。\n\n特别地，一个长度为 $0$ 的空程序也是合法的。\n\n给定一个长度为 $n$ 的程序 $[b_1, \\ldots, b_n]$，你需要求出能够实现相同的功能的程序所需的最短长度。\n\n两个程序能实现相同功能，当且仅当对于任意的长度为 $10^{10^{10}}$、值为 $[1, 10^{10^{10}}]$ 之内整数的输入，两个程序执行的输出语句次数相同，且每一次输出的结果均一致。", "inputFormat": "第一行，一个正整数 $n$，表示程序的长度。\n\n第二行，$n$ 个非负整数 $b_1, \\ldots, b_n$，描述了一个程序。", "outputFormat": "仅一行一个整数，表示要实现相同功能的程序所需要的最小长度。", "hint": "**【样例解释 #1】**\n\n长度为 $4$ 的程序 $[0,0,1,2]$，$[0,1,0,2]$ 均可以实现相同的功能。可以证明不存在长度 $\\leq 3$ 且实现了相同功能的程序，所以答案为 $4$。\n\n- 对于输入 $[2, 3, 4, \\ldots]$，程序 $[0, 0, 0, 1, 2]$ 和 $[0, 0, 1, 2]$ 和 $[0, 1, 0, 2]$ 的输出均为 $[2, 3]$，符合题意。\n- 可以验证，对于任意的长度为 $10^{10^{10}}$、值为 $[1, 10^{10^{10}}]$ 之内整数的输入，两个程序执行的输出语句次数相同，且每一次输出的结果均一致。\n\n但是，程序 $[0,1,1]$ 无法实现相同的功能，因为对于输入 $[2, 3, 4, \\ldots]$，该程序的输出为 $[2, 2]$，与原程序的 $[2, 3]$ 不相同，故不能实现相同功能。\n\n程序 $[0,1,2]$ 是不合法的程序，因为运行第 $3$ 条指令（即一条输出语句 $a_i = 2$）时，只执行了 $1$ 次输入语句。\n\n**【样例解释 #2】**\n\n不存在更短的程序能实现相同功能。\n\n**【样例解释 #3】**\n\n长度为 $5$ 的程序 $[0,1,0,2,1]$ 可以实现相同功能。\n\n**【样例解释 #4】**\n\n由于没有输出语句，因此长度为 $0$ 的空程序即可实现相同功能。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $b_1, \\ldots, b_n$ 非严格单调递增，即对于任意 $2 \\le i \\le n$ 均有 $b_{i-1} \\le b_i$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le b_i \\le n$，且保证执行任何输出语句 $b_i$ 前，程序至少进行了 $b_i$ 次输入。", "locale": "zh-CN"}}}
{"pid": "P11062", "type": "P", "difficulty": 3, "samples": [["5\n1 1\n3 7\n-4 1\n-5 -8\n4 0\n", "0\n3\n0\n3\n0\n"], ["2\n-6 9\n34 -51\n", "0\n0\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X4-T2】「Jason-1」加法", "background": "原题链接：<https://oier.team/problems/X4C>。", "description": "给定两个整数 $a, b$（可能为负），你可以进行任意多次操作（也可以不操作），每次操作你需要在如下两种形式中进行选择：\n\n- 操作 1：将 $a$ 赋值为 $a$ 与 $b$ 的和，即 $a \\gets a + b$。\n- 操作 2：将 $b$ 赋值为 $a$ 与 $b$ 的和，即 $b \\gets a + b$。\n\n你的目标是最小化 $a$ 与 $b$ 的差的绝对值 $\\lvert a-b \\rvert$，请输出最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个整数 $a, b$。", "outputFormat": "对于每组数据：\n\n- 仅一行一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n对于第 1 组数据，一种可行的操作方案是：不进行任何操作，$\\lvert a-b \\rvert=0$。\n\n对于第 2 组数据，一种可行的操作方案是：先使用操作 2，$b$ 被赋值为 $10$；再使用操作 1，$a$ 被赋值为 $13$，此时 $\\lvert a-b \\rvert=3$，可以证明这是能够达到的最小值。\n\n对于第 3 组数据，一种可行的操作方案是：连续使用 $5$ 次操作 1，$a$ 依次被赋值为 $-3,-2,-1,0,1$，此时 $a$ 和 $b$ 相等，$\\lvert a-b \\rvert=0$。\n\n对于第 4 组数据，一种可行的操作方案是：不进行任何操作，此时 $\\lvert a-b \\rvert=3$。\n\n对于第 5 组数据，一种可行的操作方案是：使用操作 2，$b$ 被赋值为 $4$，此时 $\\lvert a-b \\rvert=0$。\n\n**【样例解释 #2】**\n\n对该样例中的两组数据，均可先使用 $1$ 次操作 2，再使用 $3$ 次操作 1，使得差的绝对值为 $0$。\n\n**【数据范围】**\n\n| 测试点编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | A | $27$ |\n| 2 | B | $31$ |\n| 3 | 无 | $42$ |\n\n- 特殊性质 A：保证 $\\lvert a \\rvert, \\lvert b \\rvert \\le 10$。\n- 特殊性质 B：保证 $a,b \\ge 1$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T2】「Jason-1」加法", "background": "原题链接：<https://oier.team/problems/X4C>。", "description": "给定两个整数 $a, b$（可能为负），你可以进行任意多次操作（也可以不操作），每次操作你需要在如下两种形式中进行选择：\n\n- 操作 1：将 $a$ 赋值为 $a$ 与 $b$ 的和，即 $a \\gets a + b$。\n- 操作 2：将 $b$ 赋值为 $a$ 与 $b$ 的和，即 $b \\gets a + b$。\n\n你的目标是最小化 $a$ 与 $b$ 的差的绝对值 $\\lvert a-b \\rvert$，请输出最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个整数 $a, b$。", "outputFormat": "对于每组数据：\n\n- 仅一行一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n对于第 1 组数据，一种可行的操作方案是：不进行任何操作，$\\lvert a-b \\rvert=0$。\n\n对于第 2 组数据，一种可行的操作方案是：先使用操作 2，$b$ 被赋值为 $10$；再使用操作 1，$a$ 被赋值为 $13$，此时 $\\lvert a-b \\rvert=3$，可以证明这是能够达到的最小值。\n\n对于第 3 组数据，一种可行的操作方案是：连续使用 $5$ 次操作 1，$a$ 依次被赋值为 $-3,-2,-1,0,1$，此时 $a$ 和 $b$ 相等，$\\lvert a-b \\rvert=0$。\n\n对于第 4 组数据，一种可行的操作方案是：不进行任何操作，此时 $\\lvert a-b \\rvert=3$。\n\n对于第 5 组数据，一种可行的操作方案是：使用操作 2，$b$ 被赋值为 $4$，此时 $\\lvert a-b \\rvert=0$。\n\n**【样例解释 #2】**\n\n对该样例中的两组数据，均可先使用 $1$ 次操作 2，再使用 $3$ 次操作 1，使得差的绝对值为 $0$。\n\n**【数据范围】**\n\n| 测试点编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | A | $27$ |\n| 2 | B | $31$ |\n| 3 | 无 | $42$ |\n\n- 特殊性质 A：保证 $\\lvert a \\rvert, \\lvert b \\rvert \\le 10$。\n- 特殊性质 B：保证 $a,b \\ge 1$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P11063", "type": "P", "difficulty": 5, "samples": [["7\n1 1 1 1\n1 2 1 1\n2 2 1 2\n10 10 2 50\n5 5 4 10\n80 43 52 64\n987654321 123456789 313814116 388538872\n", "0\n-1\n3\n1 2\n2 3\n1 2\n1\n1 5\n-1\n2\n1 3\n2 2\n2\n1 31415\n2 9982\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X4-T3】「Jason-1」数对变换", "background": "原题链接：<https://oier.team/problems/X4D>。", "description": "对于一个**正整数**数对 $(x, y)$，定义一次变换为：选择其中一个数 $a$，记另一个数为 $b$，同时选择一个正整数 $k \\leq a$，然后将 $a$ 除以 $k$ 向下取整，同时将 $b$ 乘以 $k$。\n\n形式化地说，对于数对 $(x,y)$，你可以执行以下两种变换：\n\n- 类型 1：取 $1 \\le k \\le x$，令 $(x,y) \\gets (\\lfloor \\frac{x}{k} \\rfloor, y \\cdot k)$。\n- 类型 2：取 $1 \\le k \\le y$，令 $(x,y) \\gets (x \\cdot k, \\lfloor \\frac{y}{k} \\rfloor)$。\n\n显然，变换后的数对仍然是正整数数对。\n\n给出两组正整数数对 $(a, b)$ 与 $(c, d)$，你需要执行**不超过 $\\bm{65}$ 次**变换将 $(a, b)$ 变为 $(c, d)$，或者报告无解。**注意：你不需要最小化执行变换的次数**。\n\n需要注意数对是有序的，即若 $x \\neq y$，则 $(x,y) \\neq (y,x)$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，四个正整数 $a, b, c, d$，表示两组数对。", "outputFormat": "对于每组数据：\n\n- 若无解，\n\t- 仅一行一个字符串 `-1`。\n- 否则，\n\t- 第一行，一个非负整数 $m$，表示你执行变换的次数。**你需要保证 $\\bm{0 \\le m \\le 65}$，但不需要最小化 $\\bm m$**。\n\t- 接下来 $m$ 行，第 $i$ 行两个整数 $\\mathit{op}, k$，表示你执行的第 $i$ 次变换。其中 $\\mathit{op} \\in \\{1, 2\\}$ 表示变换类型，$k$ 即为本次变换中选择的 $k$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释】**\n\n对于第 1 组数据，不需要进行任何操作，因为初始时 $a = c$ 且 $b = d$。\n\n对于第 2 组数据，可以证明无解。\n\n对于第 3 组数据，第一次变换后 $(a,b)=(1,4)$，第二次变换后 $(a,b)=(3,1)$，第三次变换后 $(a,b)=(1,2)$。\n\n对于第 4 组数据，一次变换即可使 $a = c$ 且 $b = d$。\n\n对于第 5 组数据，可以证明无解。\n\n对于第 6 组数据，第一次变换后 $(a,b)=(26,129)$，第二次变换后 $(a,b)=(52,64)$。\n\n对于第 7 组数据，第一次变换后 $(a,b)=(31438,3878395026435)$，第二次变换后 $(a,b)=(313814116,388538872)$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a,b,c,d)$。\n\n| 子任务 | $n\\le$| 特殊性质 | 分值 |\n| :--------------: | :-----: |:-----:| :--------: |\n| 1 | $6$ | 无 | $7$ |\n| 2 | $10^5$ | A | $11$ |\n| 3 | $10^5$ | C | $13$ |\n| 4 | $10^6$ | B | $23$ |\n| 5 | $10^9$ | C | $19$ |\n| 6 | $10^9$ | 无 | $27$ |\n\n- 特殊性质 A：保证 $\\dfrac{a}{c}=\\dfrac{d}{b}$。\n- 特殊性质 B：保证 $a=b$ 且 $c=d$。\n- 特殊性质 C：保证 $a,b,c,d$ 在值域内独立均匀随机生成。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le a,b,c,d \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T3】「Jason-1」数对变换", "background": "原题链接：<https://oier.team/problems/X4D>。", "description": "对于一个**正整数**数对 $(x, y)$，定义一次变换为：选择其中一个数 $a$，记另一个数为 $b$，同时选择一个正整数 $k \\leq a$，然后将 $a$ 除以 $k$ 向下取整，同时将 $b$ 乘以 $k$。\n\n形式化地说，对于数对 $(x,y)$，你可以执行以下两种变换：\n\n- 类型 1：取 $1 \\le k \\le x$，令 $(x,y) \\gets (\\lfloor \\frac{x}{k} \\rfloor, y \\cdot k)$。\n- 类型 2：取 $1 \\le k \\le y$，令 $(x,y) \\gets (x \\cdot k, \\lfloor \\frac{y}{k} \\rfloor)$。\n\n显然，变换后的数对仍然是正整数数对。\n\n给出两组正整数数对 $(a, b)$ 与 $(c, d)$，你需要执行**不超过 $\\bm{65}$ 次**变换将 $(a, b)$ 变为 $(c, d)$，或者报告无解。**注意：你不需要最小化执行变换的次数**。\n\n需要注意数对是有序的，即若 $x \\neq y$，则 $(x,y) \\neq (y,x)$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，四个正整数 $a, b, c, d$，表示两组数对。", "outputFormat": "对于每组数据：\n\n- 若无解，\n\t- 仅一行一个字符串 `-1`。\n- 否则，\n\t- 第一行，一个非负整数 $m$，表示你执行变换的次数。**你需要保证 $\\bm{0 \\le m \\le 65}$，但不需要最小化 $\\bm m$**。\n\t- 接下来 $m$ 行，第 $i$ 行两个整数 $\\mathit{op}, k$，表示你执行的第 $i$ 次变换。其中 $\\mathit{op} \\in \\{1, 2\\}$ 表示变换类型，$k$ 即为本次变换中选择的 $k$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释】**\n\n对于第 1 组数据，不需要进行任何操作，因为初始时 $a = c$ 且 $b = d$。\n\n对于第 2 组数据，可以证明无解。\n\n对于第 3 组数据，第一次变换后 $(a,b)=(1,4)$，第二次变换后 $(a,b)=(3,1)$，第三次变换后 $(a,b)=(1,2)$。\n\n对于第 4 组数据，一次变换即可使 $a = c$ 且 $b = d$。\n\n对于第 5 组数据，可以证明无解。\n\n对于第 6 组数据，第一次变换后 $(a,b)=(26,129)$，第二次变换后 $(a,b)=(52,64)$。\n\n对于第 7 组数据，第一次变换后 $(a,b)=(31438,3878395026435)$，第二次变换后 $(a,b)=(313814116,388538872)$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a,b,c,d)$。\n\n| 子任务 | $n\\le$| 特殊性质 | 分值 |\n| :--------------: | :-----: |:-----:| :--------: |\n| 1 | $6$ | 无 | $7$ |\n| 2 | $10^5$ | A | $11$ |\n| 3 | $10^5$ | C | $13$ |\n| 4 | $10^6$ | B | $23$ |\n| 5 | $10^9$ | C | $19$ |\n| 6 | $10^9$ | 无 | $27$ |\n\n- 特殊性质 A：保证 $\\dfrac{a}{c}=\\dfrac{d}{b}$。\n- 特殊性质 B：保证 $a=b$ 且 $c=d$。\n- 特殊性质 C：保证 $a,b,c,d$ 在值域内独立均匀随机生成。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le a,b,c,d \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11064", "type": "P", "difficulty": 5, "samples": [["5\n5\n1 -1 1 -1 1\n5\n2 -2 2 -1 2\n6\n3 1 -4 1 -5 9 \n13\n1 1 -4 5 -1 -4 1 9 1 9 -8 1 0\n16\n1 -8 2 -7 3 -6 4 -5 5 -4 4 -3 3 -2 2 -1\n", "1 2 3 3 3\n1 1 1 1 1\n3 5 5 5 5\n3 3 3 3 3\n9 13 14 14 14 14\n9 13 14 14 14 14\n20 25 27 28 28 28 28 28 28 28 28 28 28\n20 22 23 23 23 23 23 23 23 23 23 23 23\n5 9 13 16 19 21 23 24 24 24 24 24 24 24 24 24\n5 9 12 14 15 15 15 15 15 15 15 15 15 15 15 15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "单调栈", "梦熊比赛"], "title": "【MX-X4-T4】「Jason-1」一步最优", "background": "原题链接：<https://oier.team/problems/X4E>。", "description": "对于如下问题：\n\n- 给定长度为 $n$ 的数列 $a_1, \\ldots, a_n$（其中 $a_i$ 可能为负数）以及一个正整数 $m$。\n- 你需要选择不超过 $m$ 个数列 $a$ 的下标区间 $[l_j, r_j]$，且确保它们互不相交。\n- 你需要最大化选择的区间中的元素之和的总和，即最大化 $\\sum_j \\sum_{i = l_j}^{r_j} a_i$。\n\n考虑该贪心算法（并不正确）：\n\n- 重复如下过程 $m$ 次：\n- 在所有与当前已选择的区间不相交的区间（包括空区间）中，选择一个元素之和最大的区间。\n  - **如果有多个元素之和最大的区间，从中任意选择一个。**\n  - 注：若选择了空区间，等价于中止过程，即选择的区间数量不超过 $m$ 个。\n- 将如上过程中选择的所有非空区间中的元素之和作为答案。\n\n现给定 $n$ 和数列 $a_1, \\ldots, a_n$，对于每个 $m \\in [1, n]$，请求出该算法可能得到的答案（即区间和的总和）的最大值和最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，一个正整数 $n$。\n- 第二行，$n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组数据：\n\n- 第一行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最大值**；\n- 第二行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最小值**。\n", "hint": "**【样例解释】**\n\n对于第一组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[1,1],[3,3],[5,5],\\varnothing, \\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n对于第二组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[3,5],[1,1],\\varnothing,\\varnothing,\\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n需要注意：在第一次更新时，无法选择区间 $[1,1],[1,3],[3,3]$ 等，因为它们不满足区间和在所有 $S$ 中的区间内最大（即 $= 3$）。在任意一次更新时，都无法选择区间 $[2,2]$，因为其区间和为 $-2$，而 $-2 < 0$（即空区间的区间和）。\n\n对于第三组数据，只有唯一的选择方案，即依次选择区间 $[6,6],[1,2],[4,4],\\varnothing,\\varnothing,\\varnothing$。\n\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $\\sum n \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $10$ | $50$ | $17$ |\n| 2 | $100$ | $500$ | $24$ |\n| 3 | $2000$ | $10^4$ | $13$ |\n| 4 | $10^4$ | $5 \\times 10^4$ | $9$ |\n| 5 | $10^5$ | $5 \\times 10^5$ | $37$ |\n\n对于 $100 \\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le n \\le 10^5$，$\\sum n \\le 5 \\times 10^{5}$，$|a_i| \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T4】「Jason-1」一步最优", "background": "原题链接：<https://oier.team/problems/X4E>。", "description": "对于如下问题：\n\n- 给定长度为 $n$ 的数列 $a_1, \\ldots, a_n$（其中 $a_i$ 可能为负数）以及一个正整数 $m$。\n- 你需要选择不超过 $m$ 个数列 $a$ 的下标区间 $[l_j, r_j]$，且确保它们互不相交。\n- 你需要最大化选择的区间中的元素之和的总和，即最大化 $\\sum_j \\sum_{i = l_j}^{r_j} a_i$。\n\n考虑该贪心算法（并不正确）：\n\n- 重复如下过程 $m$ 次：\n- 在所有与当前已选择的区间不相交的区间（包括空区间）中，选择一个元素之和最大的区间。\n  - **如果有多个元素之和最大的区间，从中任意选择一个。**\n  - 注：若选择了空区间，等价于中止过程，即选择的区间数量不超过 $m$ 个。\n- 将如上过程中选择的所有非空区间中的元素之和作为答案。\n\n现给定 $n$ 和数列 $a_1, \\ldots, a_n$，对于每个 $m \\in [1, n]$，请求出该算法可能得到的答案（即区间和的总和）的最大值和最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，一个正整数 $n$。\n- 第二行，$n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组数据：\n\n- 第一行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最大值**；\n- 第二行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最小值**。\n", "hint": "**【样例解释】**\n\n对于第一组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[1,1],[3,3],[5,5],\\varnothing, \\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n对于第二组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[3,5],[1,1],\\varnothing,\\varnothing,\\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n需要注意：在第一次更新时，无法选择区间 $[1,1],[1,3],[3,3]$ 等，因为它们不满足区间和在所有 $S$ 中的区间内最大（即 $= 3$）。在任意一次更新时，都无法选择区间 $[2,2]$，因为其区间和为 $-2$，而 $-2 < 0$（即空区间的区间和）。\n\n对于第三组数据，只有唯一的选择方案，即依次选择区间 $[6,6],[1,2],[4,4],\\varnothing,\\varnothing,\\varnothing$。\n\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $\\sum n \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $10$ | $50$ | $17$ |\n| 2 | $100$ | $500$ | $24$ |\n| 3 | $2000$ | $10^4$ | $13$ |\n| 4 | $10^4$ | $5 \\times 10^4$ | $9$ |\n| 5 | $10^5$ | $5 \\times 10^5$ | $37$ |\n\n对于 $100 \\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le n \\le 10^5$，$\\sum n \\le 5 \\times 10^{5}$，$|a_i| \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11065", "type": "P", "difficulty": 6, "samples": [["4 4 6\n1 2 3 2\n2 3 2 3\n3 3 2 2\n4 3 2 1\n2 1 1 1\n0 1 1 0\n1 1 0 1\n0 0 1 2\n1 1 1 2\n1 1 2 1\n2 2 4 4\n2 3 3 1\n4 4 2 1\n1 4 4 1\n", "3\n4\n3\n3\n4\n3\n"], ["1 3 3\n1 1 1\n1 0 0\n1 1 1 2\n1 1 1 3\n1 2 1 3\n", "1\n-1\n-1\n"], ["8 8 10\n5 6 6 5 6 7 8 9\n5 6 6 5 6 6 7 8\n4 5 5 4 5 5 6 7\n3 4 5 4 5 6 6 7\n4 5 5 5 5 6 7 6\n5 4 5 5 4 5 6 7\n4 3 4 5 4 5 6 6\n5 4 4 4 3 4 5 5\n0 0 0 0 1 0 2 0\n0 0 0 0 0 0 0 0\n0 1 0 2 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 1 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 1 0\n6 3 7 7\n1 5 2 2\n7 7 6 7\n4 3 7 7\n7 6 8 2\n3 2 8 7\n1 6 8 6\n1 6 7 4\n4 5 4 4\n5 4 1 1\n", "5\n5\n6\n5\n5\n5\n6\n5\n8\n-1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X4-T5】「Jason-1」占领高地", "background": "原题链接：<https://oier.team/problems/X4F>。", "description": "有一张 $n$ 行 $m$ 列的地图，其第 $i$ 行 $j$ 列的位置的**高度**为 $h_{i,j}$ 且**军事化程度**为 $p_{i,j}$，且满足**任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。  \n（两个位置 $(a, b)$、$(c, d)$ 四连通相邻，当且仅当 $\\lvert a - c\\rvert + \\lvert b - d\\rvert = 1$。）\n\n你可以选择若干个位置建立补给站。若在位置 $(i,j)$ 建立了补给站，定义其**运输范围**为所有满足 $h_{i,j} - h_{x,y} + p_{i,j} \\geq \\lvert i - x\\rvert + \\lvert j - y\\rvert$ 的位置 $(x, y)$。每个补给站都可以在其运输范围中任意移动物资的位置。\n\n定义若干个补给站 $(x, y)$ 的安全程度为其中 $h_{x,y}$ 的最小值。\n\n有 $q$ 次询问，每次给出四个整数 $a, b, c, d$，询问：若要建立若干个补给站，以将物资从位置 $(a, b)$ 运输至位置 $(c, d)$，则建立补给站的安全程度最大值是多少？或报告不可能完成运输任务。\n\n**注意：物资可以通过多个补给站间接运输。不一定必须在 $(a, b)$ 和 $(c, d)$ 两点建立补给站。**\n\n**本题数据保证 $\\bm{p_{i, j} \\le 9}$。**", "inputFormat": "第一行，三个正整数 $n,m,q$，表示地图的行数、列数，和询问个数。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示高度 $h_{i,j}$。**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示军事化程度 $p_{i,j}$。**保证 $\\bm{p_{i, j} \\le 9}$**。\n\n接下来 $q$ 行，每行四个正整数 $a, b, c, d$，表示询问。", "outputFormat": "$q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问的答案，即能让物资从 $(a,b)$ 运输至 $(c,d)$ 时，最大的安全程度。如果无论建立多少补给站都无法实现运输任务，则认为答案是 $-1$。", "hint": "**【样例解释 #1】**\n\n第一个询问可以在 $(1,3)$ 建立补给站，安全程度为 $3$。\n\n第二个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第三个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第四个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第五个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第六个询问可以在 $(4,1),(1,3)$ 建立补给站，安全程度为 $3$。\n\n**【样例解释 #2】**\n\n仅有在 $(1,1)$ 建立的补给站可以将物资在 $(1,1)$、$(1,2)$ 间任意移动，在其它位置建立的补给站都将无法移动任何物资。\n\n故仅有询问 $1$ 可以达成目标，只需在 $(1,1)$ 建立补给站，安全程度为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $q \\le$ | $n,m \\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $20$ | $10$ | A | $23$ |\n| 2 | $10^5$ | $300$ | B | $19$ |\n| 3 | $10^5$ | $100$ | 无 | $27$ |\n| 4 | $2 \\times 10^5$ | $300$ | 无 | $31$ |\n\n- 特殊性质 A：$p_{i, j} \\le 4$。\n- 特殊性质 B：$p_{i, j} = 0$。\n\n对于 $100 \\%$ 的数据，$1 \\le n,m \\le 300$，$0 \\le h_{i,j} \\le 10^9$，$\\bm{0 \\le p_{i,j} \\le 9}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le a,c \\le n$，$1 \\le b,d \\le m$，$(a,b) \\neq (c,d)$，**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T5】「Jason-1」占领高地", "background": "原题链接：<https://oier.team/problems/X4F>。", "description": "有一张 $n$ 行 $m$ 列的地图，其第 $i$ 行 $j$ 列的位置的**高度**为 $h_{i,j}$ 且**军事化程度**为 $p_{i,j}$，且满足**任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。  \n（两个位置 $(a, b)$、$(c, d)$ 四连通相邻，当且仅当 $\\lvert a - c\\rvert + \\lvert b - d\\rvert = 1$。）\n\n你可以选择若干个位置建立补给站。若在位置 $(i,j)$ 建立了补给站，定义其**运输范围**为所有满足 $h_{i,j} - h_{x,y} + p_{i,j} \\geq \\lvert i - x\\rvert + \\lvert j - y\\rvert$ 的位置 $(x, y)$。每个补给站都可以在其运输范围中任意移动物资的位置。\n\n定义若干个补给站 $(x, y)$ 的安全程度为其中 $h_{x,y}$ 的最小值。\n\n有 $q$ 次询问，每次给出四个整数 $a, b, c, d$，询问：若要建立若干个补给站，以将物资从位置 $(a, b)$ 运输至位置 $(c, d)$，则建立补给站的安全程度最大值是多少？或报告不可能完成运输任务。\n\n**注意：物资可以通过多个补给站间接运输。不一定必须在 $(a, b)$ 和 $(c, d)$ 两点建立补给站。**\n\n**本题数据保证 $\\bm{p_{i, j} \\le 9}$。**", "inputFormat": "第一行，三个正整数 $n,m,q$，表示地图的行数、列数，和询问个数。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示高度 $h_{i,j}$。**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示军事化程度 $p_{i,j}$。**保证 $\\bm{p_{i, j} \\le 9}$**。\n\n接下来 $q$ 行，每行四个正整数 $a, b, c, d$，表示询问。", "outputFormat": "$q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问的答案，即能让物资从 $(a,b)$ 运输至 $(c,d)$ 时，最大的安全程度。如果无论建立多少补给站都无法实现运输任务，则认为答案是 $-1$。", "hint": "**【样例解释 #1】**\n\n第一个询问可以在 $(1,3)$ 建立补给站，安全程度为 $3$。\n\n第二个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第三个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第四个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第五个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第六个询问可以在 $(4,1),(1,3)$ 建立补给站，安全程度为 $3$。\n\n**【样例解释 #2】**\n\n仅有在 $(1,1)$ 建立的补给站可以将物资在 $(1,1)$、$(1,2)$ 间任意移动，在其它位置建立的补给站都将无法移动任何物资。\n\n故仅有询问 $1$ 可以达成目标，只需在 $(1,1)$ 建立补给站，安全程度为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $q \\le$ | $n,m \\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $20$ | $10$ | A | $23$ |\n| 2 | $10^5$ | $300$ | B | $19$ |\n| 3 | $10^5$ | $100$ | 无 | $27$ |\n| 4 | $2 \\times 10^5$ | $300$ | 无 | $31$ |\n\n- 特殊性质 A：$p_{i, j} \\le 4$。\n- 特殊性质 B：$p_{i, j} = 0$。\n\n对于 $100 \\%$ 的数据，$1 \\le n,m \\le 300$，$0 \\le h_{i,j} \\le 10^9$，$\\bm{0 \\le p_{i,j} \\le 9}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le a,c \\le n$，$1 \\le b,d \\le m$，$(a,b) \\neq (c,d)$，**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。", "locale": "zh-CN"}}}
{"pid": "P11066", "type": "P", "difficulty": 7, "samples": [["2\n2 4 2 12\n1 2\n2 1\n1 10 5 30\n5 4 3 2 1", "0\n\n9\n3 4 0 0 1 0 2 0 0\n16\n6 6 6 6 6 0 1 0 2 0 3 0 4 0 5 0"], ["1\n1 6 5 30\n5 4 3 2 1\n", "16\n6 6 6 6 6 0 1 0 2 0 3 0 4 0 5 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X4-T6】「Jason-1」电梯", "background": "原题链接：<https://oier.team/problems/X4G>。", "description": "一栋 $n$ 层的楼有 $m$ 部电梯，每部电梯有静止与运动两种状态。\n\n初始时，第 $i$ 部电梯静止于第 $i$ 层。给定一个 $1 \\sim m$ 的排列 $p$，你希望最终第 $i$ 部电梯位于 $p_i$ 层。\n\n你可以进行以下两种操作：\n\n- `0`：让时间向后运动一个时刻。\n- `x`：其中 $x$ 为不超过 $n$ 的正整数。\n\t- 执行该操作时，需要满足：$x$ 层不存在静止的电梯；距离 $x$ 层距离最近的$^\\dagger$ 静止的电梯存在且唯一。\n\t- 令 $y$ 为最近的静止的电梯编号，$z$ 为其位置。则电梯 $y$ **立刻**变为运动的电梯，并在 $\\lvert x - z\\rvert$ 时刻后的**所有操作前**到达楼层 $x$ 并变为静止的电梯。\n\n$^\\dagger$：位于 $a$ 层的一部电梯与楼层 $x$ 的距离为 $\\lvert a - x\\rvert$。\n\n**注意：你需要保证，任何时刻不存在两个静止的电梯位于同一楼层。**\n\n对于每组数据，有一个评分参数 $o$，你需要构造出总操作次数不超过 $o$ 的方案才能通过该组数据。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，四个正整数 $Q, n, m, o$，分别表示询问组数、楼层数、电梯数、与评分参数。\n- 接下来 $Q$ 行，每行 $m$ 个整数 $p_1, \\ldots, p_m$，表示电梯的目标位置。", "outputFormat": "对于每组数据：\n\n- 共 $2 Q$ 行。对于每个询问，输出两行：\n- 第一行，一个非负整数 $k$，表示你的方案的操作步数；\n- 第二行，$k$ 个 $[0, n]$ 中的整数，表示你的具体操作方案。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释 #1】**\n\n该样例满足子任务 2 的限制。\n\n对于第一组数据的第一组询问，不需要操作。\n\n对于第一组数据的第二组询问：\n\n| 操作 | 时刻 | 电梯 $1$ 位置 | 电梯 $2$ 位置 |\n| :----------: | :----------: | :----------: | :----------: |\n| 初始状态 | $0$ | $1$ | $2$ |\n| $3$ | $0$ | $1$ | 运动 |\n| $4$ | $0$ | 运动 | 运动 |\n| $0$ | $1$ | 运动 | $3$ |\n| $0$ | $2$ | 运动 | $3$ |\n| $1$ | $2$ | 运动 | 运动 |\n| $0$ | $3$ | $4$ | 运动 |\n| $2$ | $3$ | 运动 | 运动 |\n| $0$ | $4$ | 运动 | $1$ |\n| $0$ | $5$ | $2$ | $1$ |\n\n**【样例解释 #2】**\n\n该样例满足子任务 7 的限制。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $m =$ | $o = $ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $3$ | $2$ | $7$ | $7$ |\n| 2 | $100$ | $\\lfloor \\frac{n}{2} \\rfloor$ | $2\\times(m+n)$ | $11$ |\n| 3 | $40$ | $n-1$ | $3 \\times n^3$ | $17$ |\n| 4 | $200$ | $n-1$ | $5 \\times n^2$ | $19$ |\n| 5 | $4000$ | $n-1$ | $50 \\times n$ | $17$ |\n| 6 | $5 \\times 10^{4}$ | $n-1$ | $6 \\times n$ | $16$ |\n| 7 | $5 \\times 10^{4}$ | $n-1$ | $5 \\times n$ | $13$ |\n\n对于所有数据，$1 \\le T \\le 20$，$2 \\le m < n \\le 5 \\times 10^{4}$，保证 $n, m, o$ 同时满足上述某个子任务的限制，$p$ 为 $1 \\sim m$ 的排列，$1 \\le Q \\le 2\\times 10^6$，$\\sum o Q \\le 2 \\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T6】「Jason-1」电梯", "background": "原题链接：<https://oier.team/problems/X4G>。", "description": "一栋 $n$ 层的楼有 $m$ 部电梯，每部电梯有静止与运动两种状态。\n\n初始时，第 $i$ 部电梯静止于第 $i$ 层。给定一个 $1 \\sim m$ 的排列 $p$，你希望最终第 $i$ 部电梯位于 $p_i$ 层。\n\n你可以进行以下两种操作：\n\n- `0`：让时间向后运动一个时刻。\n- `x`：其中 $x$ 为不超过 $n$ 的正整数。\n\t- 执行该操作时，需要满足：$x$ 层不存在静止的电梯；距离 $x$ 层距离最近的$^\\dagger$ 静止的电梯存在且唯一。\n\t- 令 $y$ 为最近的静止的电梯编号，$z$ 为其位置。则电梯 $y$ **立刻**变为运动的电梯，并在 $\\lvert x - z\\rvert$ 时刻后的**所有操作前**到达楼层 $x$ 并变为静止的电梯。\n\n$^\\dagger$：位于 $a$ 层的一部电梯与楼层 $x$ 的距离为 $\\lvert a - x\\rvert$。\n\n**注意：你需要保证，任何时刻不存在两个静止的电梯位于同一楼层。**\n\n对于每组数据，有一个评分参数 $o$，你需要构造出总操作次数不超过 $o$ 的方案才能通过该组数据。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，四个正整数 $Q, n, m, o$，分别表示询问组数、楼层数、电梯数、与评分参数。\n- 接下来 $Q$ 行，每行 $m$ 个整数 $p_1, \\ldots, p_m$，表示电梯的目标位置。", "outputFormat": "对于每组数据：\n\n- 共 $2 Q$ 行。对于每个询问，输出两行：\n- 第一行，一个非负整数 $k$，表示你的方案的操作步数；\n- 第二行，$k$ 个 $[0, n]$ 中的整数，表示你的具体操作方案。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释 #1】**\n\n该样例满足子任务 2 的限制。\n\n对于第一组数据的第一组询问，不需要操作。\n\n对于第一组数据的第二组询问：\n\n| 操作 | 时刻 | 电梯 $1$ 位置 | 电梯 $2$ 位置 |\n| :----------: | :----------: | :----------: | :----------: |\n| 初始状态 | $0$ | $1$ | $2$ |\n| $3$ | $0$ | $1$ | 运动 |\n| $4$ | $0$ | 运动 | 运动 |\n| $0$ | $1$ | 运动 | $3$ |\n| $0$ | $2$ | 运动 | $3$ |\n| $1$ | $2$ | 运动 | 运动 |\n| $0$ | $3$ | $4$ | 运动 |\n| $2$ | $3$ | 运动 | 运动 |\n| $0$ | $4$ | 运动 | $1$ |\n| $0$ | $5$ | $2$ | $1$ |\n\n**【样例解释 #2】**\n\n该样例满足子任务 7 的限制。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $m =$ | $o = $ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $3$ | $2$ | $7$ | $7$ |\n| 2 | $100$ | $\\lfloor \\frac{n}{2} \\rfloor$ | $2\\times(m+n)$ | $11$ |\n| 3 | $40$ | $n-1$ | $3 \\times n^3$ | $17$ |\n| 4 | $200$ | $n-1$ | $5 \\times n^2$ | $19$ |\n| 5 | $4000$ | $n-1$ | $50 \\times n$ | $17$ |\n| 6 | $5 \\times 10^{4}$ | $n-1$ | $6 \\times n$ | $16$ |\n| 7 | $5 \\times 10^{4}$ | $n-1$ | $5 \\times n$ | $13$ |\n\n对于所有数据，$1 \\le T \\le 20$，$2 \\le m < n \\le 5 \\times 10^{4}$，保证 $n, m, o$ 同时满足上述某个子任务的限制，$p$ 为 $1 \\sim m$ 的排列，$1 \\le Q \\le 2\\times 10^6$，$\\sum o Q \\le 2 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11067", "type": "P", "difficulty": 7, "samples": [["见附件 down.zip 中的 sample 文件夹", "见附件 down.zip 中的 sample 文件夹"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["提交答案", "Special Judge", "梦熊比赛"], "title": "【MX-X4-T7】「Jason-1」Ball", "background": "原题链接：<https://oier.team/problems/X4H>。", "description": "**这是一道提交答案题。**\n\n你有 $10$ 个盒子，每个任务会给出一个 $n$，初始时前 $n$ 个盒子内**可能**有一些球，后 $10-n$ 个盒子为空。\n\n用小写字母表示每种颜色的球，初始时最多只有三种颜色的球，分别用 $\\tt a, b, c$ 表示。而在程序中，你可以使用**任何小写字母**表示对应颜色的球。\n\n定义一个盒子**包含**一个字符串，表示对于每种颜色的球，盒子中出现的个数不小于字符串中出现的个数。\n\n从一个盒子中**删除**一个字符串，表示对于字符串中每一个小写字母代表的球，从盒子中取走一个相同颜色的球。删除的前提是需要满足此盒子包含该字符串。\n\n向一个盒子中**放入**一个字符串，表示对于字符串中每一个小写字母代表的每个球，向盒子中放入一个相同颜色的球。\n\n你需要写一个程序完成一些任务，程序包含下面几种语句可供使用：\n\n- `change x s y t`，其中 $x, y$ 是不超过 $10$ 的非负整数，$s, t$ 是仅由小写字母或单个字符 `@` 组成的**非空**字符串（**如果为 `@` 则表示将该字符串视作空串**）。如果 $x$ 为 $0$，则将 $k$ 由 $1$ 遍历到 $10$，否则 $k = x$。如果盒子 $k$ 中包含字符串 $s$，从其中删除 $s$，并在盒子 $y$ 中放入字符串 $t$，如果 $y=0$ 则在当前的 $k$ 中（原地）放入，这样就视为成功执行命令。每当成功执行命令后，立刻回到上一个断点，无论 $k$ 是否完全遍历。如果没有成功执行命令，跳转到下一条语句。\n- `#` 表示一个断点。**你必须以一行断点结束整个程序**。认为第 $0$ 行也是一个断点，此断点不计入代价。\n\n**语句数**可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n**断点数**可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n你不能使用超过 $100$ 条语句，超过 $10$ 的盒子或是非小写字母的球，任意一个盒子中某种颜色的球的个数均不能超过 $10^{8}$，程序中的单个字符串长度不能超过 $200$，你的程序单组数据实际遍历的语句条数不能超过 $4 \\times 10^5$，单组数据实际判断包含的字符集大小之和不能超过 $10^7$（参考下发的检验器）。\n\n约定 $n$ 表示输入至多使用的盒子数，$mx$ 表示初始时每个盒子中每种颜色球个数的最大值，$max$ 表示初始时所有盒子中球总数的最大值，$sum$ 表示初始时所有盒子中球的总数。**任务中未提及的盒子必须保持原状**，你需要分别完成下面 $10$ 个任务。\n\n1. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色球放入盒子 $1$，所有 $\\tt b$ 颜色球放入盒子 $2$，所有 $\\tt c$ 颜色球放入盒子 $3$。\n\n2. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色的球改为 $\\tt b$ 颜色的球，将所有 $\\tt b$ 颜色的球改为 $\\tt c$ 颜色的球，将所有 $\\tt c$ 颜色的球改为 $\\tt a$ 颜色的球，这三个操作应同时完成。\n\n3. $n=10, sum \\le 100$，你需要将所有不包含 $\\tt a$ 颜色球的盒子清空。\n\n4. $n=10, sum \\le 100$，你需要给所有非空的，不包含 $\\tt a$ 颜色球的盒子放入一个 $\\tt a$ 颜色球。\n\n5. $n=5, sum \\le 5$，你需要将所有球按照颜色从小到大（${\\tt a} < {\\tt b} < {\\tt c}$）依次放入盒子 $1$ 到 $sum$，每个盒子恰好只放一个球，初始的球不保留。\n\n6. $n=10, sum \\le 100$，对于每个盒子，只保留一个出现次数最多的颜色的球，如果有多种颜色出现次数最多，将其变为空集。\n\n7. $n=10, sum \\le 100$，对于每个盒子，只保留出现次数最多的颜色的球，如果有多种颜色出现次数最多，保留颜色最小的（${\\tt a} < {\\tt b} < {\\tt c}$）。\n\n8. $n=1, mx \\le 10$，记 $\\tt a, b, c$ 颜色的球的个数为 $A, B, C$，你需要对于满足 $1 \\le x \\le 5$ 的整数 $x$ 使得盒子 $x$ 在最终恰好有 $A+Bx+Cx^2$ 个 $\\tt a$ 颜色球，不能有其它颜色球。\n\n9. $n=5, max \\le 10$，所有 $n$ 个盒子中球总数相等。将每个盒子中的球按从小到大排序，组成一个字符串，保证字符串两两不同。你需要对于每个字符串求出其字典序排名，按字典序从小到大依次将盒子改为 $\\tt a, b, c, d, e$。\n\n10. $n=5, max \\le 10$，你需要对 $n$ 个盒子求前缀和，即将前面所有盒子的球复制一份放入自己。\n\n**注：子任务按某种规则排序，与难度无关。**", "inputFormat": "该题为提交答案型试题，每个测试点对应的任务见【题目描述】。", "outputFormat": "针对给定的 $10$ 个任务，你需要分别将你的程序命名为 `1.out`∼`10.out`，并将这 $10$ 个文件直接压缩为 `zip` 文件提交。\n\n每个文件中需要包含若干行。\n\n第一行一个非负整数 $L$，代表你使用的语句数。\n\n接下来 $L$ 行，每行一个语句。\n\n**你必须以一个断点结尾。**", "hint": "**【自定义校验器数据格式】**\n\n第一行，两个整数 $T, V$，分别表示数据组数与评分参数。\n\n对于接下来每组数据：\n\n第一行，两个整数 $n,m$，表示需要描述的输入盒子数与输出盒子数。\n\n第二行，$n$ 个字符串，描述输入时前 $n$ 个盒子的状态。\n\n第三行，$m$ 个字符串，描述输出时前 $m$ 个盒子的状态，**你仍然需要保证其它盒子为空**。\n\n**同样地，使用 `@` 表示空串**。\n\n**【自定义校验器使用方法】**\n\n将 `checker.cpp` 编译后，在命令行执行\n\n```\nchecker [in] [out] [ans]\n```\n\n其中 `[in]` 为测试数据，`[out]` 为你需要测试的程序，`[ans]` 输入和 `[in]` 相同的内容。\n\n例如你需要测试第一个样例，且你的程序名为 `1.out`，需先将 `1.in` 复制到当前目录，并执行\n\n```\nchecker 1.in 1.out 1.in\n```\n\n**【评分标准】**\n\n对于每个测试点，其内部会评测若干组测试数据。\n\n若你的输出出现下列情况，那么该测试点不得分：\n\n- 输出与要求不符。\n- 出现无法识别或不合法的语句。\n- 某个盒子中某种颜色的球数量超过 $10^8$。\n- 使用超过 $100$ 条语句。\n- 程序中单个字符串长度超过 $200$。\n- 使用不在 $1$ 到 $10$ 之间的盒子。\n- 使用非小写字母颜色的球。\n- 单组数据实际语句遍历次数大于 $4 \\times 10^5$。\n- 单组数据实际判断包含的字符集大小之和超过 $10^7$（参考下发的检验器）。\n\n语句数可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n断点数可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n一个程序的代价是你给出的断点数量乘以程序的语句数，记作 $val$。\n\n否则设对应子任务的评分标准为 $V$，那么你的得分为：\n\n$$\\mathrm{score}=\\begin{cases}11&V>val\\\\\\Big\\lfloor\\frac{10}{\\exp\\left(1-\\frac {V}{val}\\right)}\\Big\\rfloor&\\text{otherwise.}\\end{cases}$$\n\n下面给出各个任务对应的评分标准 $V$:\n\n| 编号 | $1$ | $2$ | $3$ | $4$ | $5$| $6$ | $7$ | $8$ | $9$ | $10$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |  :-: | :-: | :-: | :-: | :-: |\n| $V$ | $16$ | $16$ | $16$ | $16$ | $26$ | $8$ | $10$ | $18$ | $20$ | $30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T7】「Jason-1」Ball", "background": "原题链接：<https://oier.team/problems/X4H>。", "description": "**这是一道提交答案题。**\n\n你有 $10$ 个盒子，每个任务会给出一个 $n$，初始时前 $n$ 个盒子内**可能**有一些球，后 $10-n$ 个盒子为空。\n\n用小写字母表示每种颜色的球，初始时最多只有三种颜色的球，分别用 $\\tt a, b, c$ 表示。而在程序中，你可以使用**任何小写字母**表示对应颜色的球。\n\n定义一个盒子**包含**一个字符串，表示对于每种颜色的球，盒子中出现的个数不小于字符串中出现的个数。\n\n从一个盒子中**删除**一个字符串，表示对于字符串中每一个小写字母代表的球，从盒子中取走一个相同颜色的球。删除的前提是需要满足此盒子包含该字符串。\n\n向一个盒子中**放入**一个字符串，表示对于字符串中每一个小写字母代表的每个球，向盒子中放入一个相同颜色的球。\n\n你需要写一个程序完成一些任务，程序包含下面几种语句可供使用：\n\n- `change x s y t`，其中 $x, y$ 是不超过 $10$ 的非负整数，$s, t$ 是仅由小写字母或单个字符 `@` 组成的**非空**字符串（**如果为 `@` 则表示将该字符串视作空串**）。如果 $x$ 为 $0$，则将 $k$ 由 $1$ 遍历到 $10$，否则 $k = x$。如果盒子 $k$ 中包含字符串 $s$，从其中删除 $s$，并在盒子 $y$ 中放入字符串 $t$，如果 $y=0$ 则在当前的 $k$ 中（原地）放入，这样就视为成功执行命令。每当成功执行命令后，立刻回到上一个断点，无论 $k$ 是否完全遍历。如果没有成功执行命令，跳转到下一条语句。\n- `#` 表示一个断点。**你必须以一行断点结束整个程序**。认为第 $0$ 行也是一个断点，此断点不计入代价。\n\n**语句数**可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n**断点数**可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n你不能使用超过 $100$ 条语句，超过 $10$ 的盒子或是非小写字母的球，任意一个盒子中某种颜色的球的个数均不能超过 $10^{8}$，程序中的单个字符串长度不能超过 $200$，你的程序单组数据实际遍历的语句条数不能超过 $4 \\times 10^5$，单组数据实际判断包含的字符集大小之和不能超过 $10^7$（参考下发的检验器）。\n\n约定 $n$ 表示输入至多使用的盒子数，$mx$ 表示初始时每个盒子中每种颜色球个数的最大值，$max$ 表示初始时所有盒子中球总数的最大值，$sum$ 表示初始时所有盒子中球的总数。**任务中未提及的盒子必须保持原状**，你需要分别完成下面 $10$ 个任务。\n\n1. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色球放入盒子 $1$，所有 $\\tt b$ 颜色球放入盒子 $2$，所有 $\\tt c$ 颜色球放入盒子 $3$。\n\n2. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色的球改为 $\\tt b$ 颜色的球，将所有 $\\tt b$ 颜色的球改为 $\\tt c$ 颜色的球，将所有 $\\tt c$ 颜色的球改为 $\\tt a$ 颜色的球，这三个操作应同时完成。\n\n3. $n=10, sum \\le 100$，你需要将所有不包含 $\\tt a$ 颜色球的盒子清空。\n\n4. $n=10, sum \\le 100$，你需要给所有非空的，不包含 $\\tt a$ 颜色球的盒子放入一个 $\\tt a$ 颜色球。\n\n5. $n=5, sum \\le 5$，你需要将所有球按照颜色从小到大（${\\tt a} < {\\tt b} < {\\tt c}$）依次放入盒子 $1$ 到 $sum$，每个盒子恰好只放一个球，初始的球不保留。\n\n6. $n=10, sum \\le 100$，对于每个盒子，只保留一个出现次数最多的颜色的球，如果有多种颜色出现次数最多，将其变为空集。\n\n7. $n=10, sum \\le 100$，对于每个盒子，只保留出现次数最多的颜色的球，如果有多种颜色出现次数最多，保留颜色最小的（${\\tt a} < {\\tt b} < {\\tt c}$）。\n\n8. $n=1, mx \\le 10$，记 $\\tt a, b, c$ 颜色的球的个数为 $A, B, C$，你需要对于满足 $1 \\le x \\le 5$ 的整数 $x$ 使得盒子 $x$ 在最终恰好有 $A+Bx+Cx^2$ 个 $\\tt a$ 颜色球，不能有其它颜色球。\n\n9. $n=5, max \\le 10$，所有 $n$ 个盒子中球总数相等。将每个盒子中的球按从小到大排序，组成一个字符串，保证字符串两两不同。你需要对于每个字符串求出其字典序排名，按字典序从小到大依次将盒子改为 $\\tt a, b, c, d, e$。\n\n10. $n=5, max \\le 10$，你需要对 $n$ 个盒子求前缀和，即将前面所有盒子的球复制一份放入自己。\n\n**注：子任务按某种规则排序，与难度无关。**", "inputFormat": "该题为提交答案型试题，每个测试点对应的任务见【题目描述】。", "outputFormat": "针对给定的 $10$ 个任务，你需要分别将你的程序命名为 `1.out`∼`10.out`，并将这 $10$ 个文件直接压缩为 `zip` 文件提交。\n\n每个文件中需要包含若干行。\n\n第一行一个非负整数 $L$，代表你使用的语句数。\n\n接下来 $L$ 行，每行一个语句。\n\n**你必须以一个断点结尾。**", "hint": "**【自定义校验器数据格式】**\n\n第一行，两个整数 $T, V$，分别表示数据组数与评分参数。\n\n对于接下来每组数据：\n\n第一行，两个整数 $n,m$，表示需要描述的输入盒子数与输出盒子数。\n\n第二行，$n$ 个字符串，描述输入时前 $n$ 个盒子的状态。\n\n第三行，$m$ 个字符串，描述输出时前 $m$ 个盒子的状态，**你仍然需要保证其它盒子为空**。\n\n**同样地，使用 `@` 表示空串**。\n\n**【自定义校验器使用方法】**\n\n将 `checker.cpp` 编译后，在命令行执行\n\n```\nchecker [in] [out] [ans]\n```\n\n其中 `[in]` 为测试数据，`[out]` 为你需要测试的程序，`[ans]` 输入和 `[in]` 相同的内容。\n\n例如你需要测试第一个样例，且你的程序名为 `1.out`，需先将 `1.in` 复制到当前目录，并执行\n\n```\nchecker 1.in 1.out 1.in\n```\n\n**【评分标准】**\n\n对于每个测试点，其内部会评测若干组测试数据。\n\n若你的输出出现下列情况，那么该测试点不得分：\n\n- 输出与要求不符。\n- 出现无法识别或不合法的语句。\n- 某个盒子中某种颜色的球数量超过 $10^8$。\n- 使用超过 $100$ 条语句。\n- 程序中单个字符串长度超过 $200$。\n- 使用不在 $1$ 到 $10$ 之间的盒子。\n- 使用非小写字母颜色的球。\n- 单组数据实际语句遍历次数大于 $4 \\times 10^5$。\n- 单组数据实际判断包含的字符集大小之和超过 $10^7$（参考下发的检验器）。\n\n语句数可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n断点数可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n一个程序的代价是你给出的断点数量乘以程序的语句数，记作 $val$。\n\n否则设对应子任务的评分标准为 $V$，那么你的得分为：\n\n$$\\mathrm{score}=\\begin{cases}11&V>val\\\\\\Big\\lfloor\\frac{10}{\\exp\\left(1-\\frac {V}{val}\\right)}\\Big\\rfloor&\\text{otherwise.}\\end{cases}$$\n\n下面给出各个任务对应的评分标准 $V$:\n\n| 编号 | $1$ | $2$ | $3$ | $4$ | $5$| $6$ | $7$ | $8$ | $9$ | $10$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |  :-: | :-: | :-: | :-: | :-: |\n| $V$ | $16$ | $16$ | $16$ | $16$ | $26$ | $8$ | $10$ | $18$ | $20$ | $30$ |", "locale": "zh-CN"}}}
{"pid": "P11068", "type": "P", "difficulty": 2, "samples": [["3 2\n0 1 0", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「QMSOI R1」 转转楼梯", "background": "题目描述就是最好的题目背景（）。", "description": "同学们每天都要做操，而做操会经过转转楼梯。\n\n转转楼梯有 $n+1$ 阶楼梯，对于第 $i(1\\le i\\le n+1)$ 阶转转楼梯，其有一个转转值 $a_i$ 且 $a_i\\in\\{0,1\\}$，特别的，$a_{n+1}=0$。\n\n对于一阶转转楼梯，如果其下一阶楼梯的转转值与之相同（即 $a_{i+1}=a_i$）那么我们可以直接走下去，耗费一秒。否则我们需要耗费一秒转一圈以改变目前这阶楼梯的转转值为 $1-a_i$。然后再耗费一秒走下去。\n\n我们需要做 $k$ 天课间操。每天要从第 $1$ 阶楼梯走到第 $n+1$ 阶楼梯。\n\n请求出这 $k$ 天同学们经过转转楼梯的总时间。", "inputFormat": "输入共 $2$ 行。\n\n第一行两个数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i(1\\leq i\\leq n)$ 个数代表 $a_i$。", "outputFormat": "一行一个整数，代表这 $k$ 天我们一共会花费多少时间在转转楼梯上。", "hint": "### 样例解释\n第一天数列 $a=\\{0,1,0\\}$，走三步，转两圈，时间为 $5$。\n\n第二天数列 $a=\\{1,0,0\\}$，走三步，转一圈，时间为 $4$。\n\n### 数据范围\n\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,k\\le 2\\times 10^3$ | $30$ |\n| $1$ | $1\\le n,k\\le 2\\times 10^6$ | $70$ |\n\n对于所有数据，满足 $1\\le n,k\\le2\\times10^6$，$a_i\\in\\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 转转楼梯", "background": "题目描述就是最好的题目背景（）。", "description": "同学们每天都要做操，而做操会经过转转楼梯。\n\n转转楼梯有 $n+1$ 阶楼梯，对于第 $i(1\\le i\\le n+1)$ 阶转转楼梯，其有一个转转值 $a_i$ 且 $a_i\\in\\{0,1\\}$，特别的，$a_{n+1}=0$。\n\n对于一阶转转楼梯，如果其下一阶楼梯的转转值与之相同（即 $a_{i+1}=a_i$）那么我们可以直接走下去，耗费一秒。否则我们需要耗费一秒转一圈以改变目前这阶楼梯的转转值为 $1-a_i$。然后再耗费一秒走下去。\n\n我们需要做 $k$ 天课间操。每天要从第 $1$ 阶楼梯走到第 $n+1$ 阶楼梯。\n\n请求出这 $k$ 天同学们经过转转楼梯的总时间。", "inputFormat": "输入共 $2$ 行。\n\n第一行两个数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i(1\\leq i\\leq n)$ 个数代表 $a_i$。", "outputFormat": "一行一个整数，代表这 $k$ 天我们一共会花费多少时间在转转楼梯上。", "hint": "### 样例解释\n第一天数列 $a=\\{0,1,0\\}$，走三步，转两圈，时间为 $5$。\n\n第二天数列 $a=\\{1,0,0\\}$，走三步，转一圈，时间为 $4$。\n\n### 数据范围\n\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,k\\le 2\\times 10^3$ | $30$ |\n| $1$ | $1\\le n,k\\le 2\\times 10^6$ | $70$ |\n\n对于所有数据，满足 $1\\le n,k\\le2\\times10^6$，$a_i\\in\\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P11069", "type": "P", "difficulty": 4, "samples": [["2 100000 5 114514", "3765807592"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "搜索", "二分", "O2优化", "背包 DP", "前缀和"], "title": "「QMSOI R1」 生熏鱼", "background": "一切起源于一个叫神荀彧的武将...\n\n[那这道题与神荀彧的关系在哪里呢？](https://www.luogu.com.cn/paste/pk12x8vh)\n\n![](https://patchwiki.biligame.com/images/msgs/thumb/e/eb/1d6q6kksj6krwhaoqdoh3029glw4ypn.jpg/376px-%E7%A5%9E%E8%8D%80%E5%BD%A7-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.jpg)\n\n", "description": "一共有 $n$ 种攻击，第 $i$ 种攻击会先让你得到 $a_i$ 点经验，然后让你失去 $b_i$ 点血量。\n\n你将**依次**受到 $k$ 次攻击，其中，第 $i$ 次攻击的种类是 $c_i$，你的初始血量为 $m$。\n\n为了获得更多的经验，你可以选择 $n$ 种攻击中的任意种，并防止你受到的第一次这种攻击，防止后既不会损失血量，也不会增加经验值。\n\n现在你想知道的是在你的血量降到 $0$ 及以下前，最多能获得多少点经验。", "inputFormat": "一行 4 个整数，分别代表 $n,m,k,s$，其中，$s$ 为随机种子，其它变量含义与题目描述相同。\n\n因为本题输入数据过大，选手需要使用如下方式获取数据：\n~~~cpp\nconst int M=1e9,C=1e5+5;\nvoid read(){\n    cin>>n>>m>>k>>s;\n    mt19937 rand(s);\n    for(int i=1;i<=n;i++)  a[i]=rand()%M+1,b[i]=rand()%C+1;\n    for(int i=1;i<=k;i++)  c[i]=rand()%n+1;\n}\n~~~\n数组含义与题目描述中相同。", "outputFormat": "输出一行一个整数，表示你最多能获得多少点经验。", "hint": "### 样例解释\n\n样例 $1$ 的数据中 $a=\\{953888980,904140652\\},b=\\{6583,80624\\},c=\\{1,2,1,1,2\\}$。\n\n此时显然可以不防止任何攻击或者防止第一次类型 $2$ 的攻击获得 $953888980\\times 3+904140652=3765807592$ 的经验值。\n\n可以证明，不存在获得经验值更多的方案。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | $n$ | $k$  | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 10$ | $\\le 10^3$ | $20$ |\n| $1$ | $\\le 20$ | $\\le 10^7$ |$30$ |\n| $2$ | $\\le 24$ | $\\le 2\\times 10^7$ |$50$ |\n\n对于所有数据，满足 $1\\le n \\le 24$，$1 \\le k \\le 2\\times 10^7$，$1\\le s,m\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 生熏鱼", "background": "一切起源于一个叫神荀彧的武将...\n\n[那这道题与神荀彧的关系在哪里呢？](https://www.luogu.com.cn/paste/pk12x8vh)\n\n![](https://patchwiki.biligame.com/images/msgs/thumb/e/eb/1d6q6kksj6krwhaoqdoh3029glw4ypn.jpg/376px-%E7%A5%9E%E8%8D%80%E5%BD%A7-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.jpg)\n\n", "description": "一共有 $n$ 种攻击，第 $i$ 种攻击会先让你得到 $a_i$ 点经验，然后让你失去 $b_i$ 点血量。\n\n你将**依次**受到 $k$ 次攻击，其中，第 $i$ 次攻击的种类是 $c_i$，你的初始血量为 $m$。\n\n为了获得更多的经验，你可以选择 $n$ 种攻击中的任意种，并防止你受到的第一次这种攻击，防止后既不会损失血量，也不会增加经验值。\n\n现在你想知道的是在你的血量降到 $0$ 及以下前，最多能获得多少点经验。", "inputFormat": "一行 4 个整数，分别代表 $n,m,k,s$，其中，$s$ 为随机种子，其它变量含义与题目描述相同。\n\n因为本题输入数据过大，选手需要使用如下方式获取数据：\n~~~cpp\nconst int M=1e9,C=1e5+5;\nvoid read(){\n    cin>>n>>m>>k>>s;\n    mt19937 rand(s);\n    for(int i=1;i<=n;i++)  a[i]=rand()%M+1,b[i]=rand()%C+1;\n    for(int i=1;i<=k;i++)  c[i]=rand()%n+1;\n}\n~~~\n数组含义与题目描述中相同。", "outputFormat": "输出一行一个整数，表示你最多能获得多少点经验。", "hint": "### 样例解释\n\n样例 $1$ 的数据中 $a=\\{953888980,904140652\\},b=\\{6583,80624\\},c=\\{1,2,1,1,2\\}$。\n\n此时显然可以不防止任何攻击或者防止第一次类型 $2$ 的攻击获得 $953888980\\times 3+904140652=3765807592$ 的经验值。\n\n可以证明，不存在获得经验值更多的方案。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | $n$ | $k$  | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 10$ | $\\le 10^3$ | $20$ |\n| $1$ | $\\le 20$ | $\\le 10^7$ |$30$ |\n| $2$ | $\\le 24$ | $\\le 2\\times 10^7$ |$50$ |\n\n对于所有数据，满足 $1\\le n \\le 24$，$1 \\le k \\le 2\\times 10^7$，$1\\le s,m\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11070", "type": "P", "difficulty": 5, "samples": [["2 2 1 1 2\n0.2 0.8", "1.670000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "Special Judge", "O2优化", "概率论", "期望"], "title": "「QMSOI R1」 三服同构", "background": "前不久，三国杀上线了一位三服同构的赛事专属武将...\n\n[那这道题与SP孙策的关系呢？](https://www.luogu.com.cn/paste/g68kquaa)\n\n![](https://patchwiki.biligame.com/images/sgs/thumb/4/46/ekgr28n00suo1zkuksp047802wfl4a6.png/401px-SP%E5%AD%99%E7%AD%96-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.png)", "description": "现在有 $4$ 种扑克牌：红桃 A，红桃 K，黑桃 A，黑桃 K，小 Q 的手上现在有 $n$ 张黑桃牌，$m$ 张红桃牌，其中有 $u$ 张黑桃 A，$v$ 张红桃 A，而对手有 $k$ 张牌。\n\n现在小 Q 知道对手第 $i$ 张牌点数为 A 的概率为 $a_i$，接下来他将持续执行以下操作，直到他的回合结束。\n\n1. 若你手中有至少 $1$ 张红桃 A 或红桃 K，则你**必须**等概率随机弃置 $1$ 张花色为红桃的牌，并与对手进行决斗。\n2. 否则，你结束你的回合。\n\n决斗的流程如下：\n\n从对手开始，双方交替进行以下操作：\n\n1. 若其手上有至少 $1$ 张红桃 A 或黑桃 A，则其**必须**等概率随机弃置 $1$ 张点数为 A 的牌。\n2. 否则，其受到 $1$ 点伤害,并结束此次决斗。\n\n现在你想要知道在你的回合结束前，对手期望会受到多少点伤害。", "inputFormat": "第一行 $5$ 个整数分别表示 $n,m,u,v,k$。\n\n第二行 $k$ 个实数，依次表示 $a_1,a_2,\\cdots,a_k$。", "outputFormat": "输出一行一个实数，表示期望伤害。\n\n**本题使用 Special Judge 进行评测**，只要你的答案与标准输出**绝对误差**在 $10^{-6}$ 以内，则判定答案正确。", "hint": "### 样例解释\n\n可以得出对手牌中有 $0,1,2$ 张 A 的概率分别为 $0.16,0.68,0.16$。\n\n当对手牌中有 $0$ 张 A 时，无论小 Q 每次耗费的哪张红色牌，都能对对手造成伤害，所以这种情况期望伤害为 $0.16*2=0.32$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手没 A 了就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*2=0.68$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 K 进行决斗，那对手打出 A 后，小 Q 打出黑桃 A 或红桃 A 的概率就是相等的，然后对手没 A 了就会受到伤害，但是如果打出的是红桃 A 就无法再进行决斗了，而打出黑桃 A 另一张红桃 A 依然被耗费，进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*0.5*1+0.68*0.5*0.5*2=0.51$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手再打出 A 后，小 Q 就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.16*0.5*1=0.08$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 K 进行决斗，双方就会各打出两张 A，然后敌人受到伤害，小 Q 就不能再进行决斗了，所以这种情况期望伤害同样为 $0.16*0.5*1=0.08$。\n\n所以对手受到的期望伤害就是 $0.32+0.68+0.51+0.08+0.08=1.67$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,m\\le 10$ | $30$ |\n| $1$ | $1\\le n,m\\le 2000$ | $70$ |\n\n对于所有的数据，满足 $1 \\leq n,m,k \\leq 2000,1\\le u<n,1\\le v <m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 三服同构", "background": "前不久，三国杀上线了一位三服同构的赛事专属武将...\n\n[那这道题与SP孙策的关系呢？](https://www.luogu.com.cn/paste/g68kquaa)\n\n![](https://patchwiki.biligame.com/images/sgs/thumb/4/46/ekgr28n00suo1zkuksp047802wfl4a6.png/401px-SP%E5%AD%99%E7%AD%96-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.png)", "description": "现在有 $4$ 种扑克牌：红桃 A，红桃 K，黑桃 A，黑桃 K，小 Q 的手上现在有 $n$ 张黑桃牌，$m$ 张红桃牌，其中有 $u$ 张黑桃 A，$v$ 张红桃 A，而对手有 $k$ 张牌。\n\n现在小 Q 知道对手第 $i$ 张牌点数为 A 的概率为 $a_i$，接下来他将持续执行以下操作，直到他的回合结束。\n\n1. 若你手中有至少 $1$ 张红桃 A 或红桃 K，则你**必须**等概率随机弃置 $1$ 张花色为红桃的牌，并与对手进行决斗。\n2. 否则，你结束你的回合。\n\n决斗的流程如下：\n\n从对手开始，双方交替进行以下操作：\n\n1. 若其手上有至少 $1$ 张红桃 A 或黑桃 A，则其**必须**等概率随机弃置 $1$ 张点数为 A 的牌。\n2. 否则，其受到 $1$ 点伤害,并结束此次决斗。\n\n现在你想要知道在你的回合结束前，对手期望会受到多少点伤害。", "inputFormat": "第一行 $5$ 个整数分别表示 $n,m,u,v,k$。\n\n第二行 $k$ 个实数，依次表示 $a_1,a_2,\\cdots,a_k$。", "outputFormat": "输出一行一个实数，表示期望伤害。\n\n**本题使用 Special Judge 进行评测**，只要你的答案与标准输出**绝对误差**在 $10^{-6}$ 以内，则判定答案正确。", "hint": "### 样例解释\n\n可以得出对手牌中有 $0,1,2$ 张 A 的概率分别为 $0.16,0.68,0.16$。\n\n当对手牌中有 $0$ 张 A 时，无论小 Q 每次耗费的哪张红色牌，都能对对手造成伤害，所以这种情况期望伤害为 $0.16*2=0.32$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手没 A 了就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*2=0.68$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 K 进行决斗，那对手打出 A 后，小 Q 打出黑桃 A 或红桃 A 的概率就是相等的，然后对手没 A 了就会受到伤害，但是如果打出的是红桃 A 就无法再进行决斗了，而打出黑桃 A 另一张红桃 A 依然被耗费，进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*0.5*1+0.68*0.5*0.5*2=0.51$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手再打出 A 后，小 Q 就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.16*0.5*1=0.08$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 K 进行决斗，双方就会各打出两张 A，然后敌人受到伤害，小 Q 就不能再进行决斗了，所以这种情况期望伤害同样为 $0.16*0.5*1=0.08$。\n\n所以对手受到的期望伤害就是 $0.32+0.68+0.51+0.08+0.08=1.67$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,m\\le 10$ | $30$ |\n| $1$ | $1\\le n,m\\le 2000$ | $70$ |\n\n对于所有的数据，满足 $1 \\leq n,m,k \\leq 2000,1\\le u<n,1\\le v <m$。", "locale": "zh-CN"}}}
{"pid": "P11071", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 3\n2 1 3\n1 1 2 2\n2 1 3", "7\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 524288, 102400]}, "tags": ["线段树", "O2优化"], "title": "「QMSOI R1」 Distorted Fate", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/oeu0ft9d.png)\n**O Fortuna velut luna statu variabilis……**\n\n（图片来自 Phigros 曲绘，侵删。）\n\n加强版 [T512613](https://www.luogu.com.cn/problem/T512613)。", "description": "Geopelia 需要捕捉到一种特殊的，不同于黑洞的引力波。\n\n第 $i$ 个引力波有着一个频率 $A_i$，而多个引力波会互相影响，叠加，形成一个频率更快的引力波。\n\n具体的，对于一个长度为 $n$ 的序列 $A$，$A$ 中所有引力波叠加起来的频率 $f(A)$ 为：$\\bigcup\\limits_{i=1}^n A_i$。其中 $\\bigcup$ 表示按位或。\n\n现在，Geopelia 需要知道几段以同一引力波开始的区间的频率之和。\n\n也就是说，Geopelia 要向你询问：\n$$\n\\sum_{i=l}^rf(A[l,i])\n$$\n的值，其中 $A[l,r]$ 为 $A_l,A_{l+1},\\cdots,A_{r-1},A_r$ 组成的序列。\n\n但不幸的是，由于幽蓝边界的引力影响，某一个区间 $[l,r]$ 中所有引力波的频率可能会异或上一个值 $x$。\n\nGeopelia 想实时更新她的数据，你可以帮帮她吗？\n\n她知道引力波的频率可能很高，所以你只需要告诉她答案 $\\bmod \\ 2^{30}$ 的值就可以了。\n\n## 形式化题意\n\n给定一个长度为 $n$ 的数组 $A$，你需要完成以下 $q$ 次操作。\n\n1. ```1 l r x``` 将 $A_i(l\\le i\\le r)$ 异或上 $x$。\n\n2. ```2 l r``` 求：\n$$(\\sum_{i=l}^r\\bigcup_{j=l}^i A_j) \\bmod 2^{30}$$\n其中 $\\bigcup$ 表示按位或。", "inputFormat": "第一行输入两个数 $n$ 和 $q$，代表引力波的数量和操作的次数。\n\n第二行输入 $n$ 个整数，第 $i$ 个数代表引力波 $i$ 初始的频率 $A_i$。\n\n接下来 $q$ 行，每行输入三个整数 $opt,l,r$。\n\n若 $opt=1$，则再输入一个整数 $x$ 表示将区间 $[l,r]$ 中引力波的频率异或上 $x$。\n\n若 $opt=2$，则代表这是一次查询。", "outputFormat": "对于每个查询，输出一行一个整数代表所求式子的值 $\\bmod  \\ 2^{30}$ 的结果。 ", "hint": "### 样例解释\n\n对于第一组询问：此时 $A=\\{1,2,3\\}$，所以答案为 $1+1\\cup 2+1\\cup 2\\cup 3=1+3+3=7$。\n\n对于第二组询问：此时 $A=\\{3,0,3\\}$，所以答案为 $3+3\\cup 0+3\\cup 0\\cup 3=3+3+3=9$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n\n| 子任务 | $n$ | $q$ | 时间 | 空间 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |:----------:|\n| $0$ | $\\le 100$ | $\\le 100$ | $1s$ | $512MB$ | $20$ |\n| $1$ | $\\le 2\\times 10^4$ | $\\le 2\\times 10^4$ | $1s$ | $512MB$ |$20$ |\n| $2$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $512MB$ |$20$ |\n| $3$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $\\color{red}100MB$ |$40$ |\n\n对于所有数据，满足 $0\\le a_i,x< 2^{30}$，$1\\le l\\le r\\le n$。\n\n```\nINITALIZING……\nSCANING……\nCONNECTING……__PhigrOS Client Login\nTIME_OUT!\nCONNECTING……__Unknown\nSUCCESS!\n————————\n……九……鸟……\n……鸠……！\n……喂？\n…听得到吗？\n鸠?![SIGNAL LOST]\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 Distorted Fate", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/oeu0ft9d.png)\n**O Fortuna velut luna statu variabilis……**\n\n（图片来自 Phigros 曲绘，侵删。）\n\n加强版 [T512613](https://www.luogu.com.cn/problem/T512613)。", "description": "Geopelia 需要捕捉到一种特殊的，不同于黑洞的引力波。\n\n第 $i$ 个引力波有着一个频率 $A_i$，而多个引力波会互相影响，叠加，形成一个频率更快的引力波。\n\n具体的，对于一个长度为 $n$ 的序列 $A$，$A$ 中所有引力波叠加起来的频率 $f(A)$ 为：$\\bigcup\\limits_{i=1}^n A_i$。其中 $\\bigcup$ 表示按位或。\n\n现在，Geopelia 需要知道几段以同一引力波开始的区间的频率之和。\n\n也就是说，Geopelia 要向你询问：\n$$\n\\sum_{i=l}^rf(A[l,i])\n$$\n的值，其中 $A[l,r]$ 为 $A_l,A_{l+1},\\cdots,A_{r-1},A_r$ 组成的序列。\n\n但不幸的是，由于幽蓝边界的引力影响，某一个区间 $[l,r]$ 中所有引力波的频率可能会异或上一个值 $x$。\n\nGeopelia 想实时更新她的数据，你可以帮帮她吗？\n\n她知道引力波的频率可能很高，所以你只需要告诉她答案 $\\bmod \\ 2^{30}$ 的值就可以了。\n\n## 形式化题意\n\n给定一个长度为 $n$ 的数组 $A$，你需要完成以下 $q$ 次操作。\n\n1. ```1 l r x``` 将 $A_i(l\\le i\\le r)$ 异或上 $x$。\n\n2. ```2 l r``` 求：\n$$(\\sum_{i=l}^r\\bigcup_{j=l}^i A_j) \\bmod 2^{30}$$\n其中 $\\bigcup$ 表示按位或。", "inputFormat": "第一行输入两个数 $n$ 和 $q$，代表引力波的数量和操作的次数。\n\n第二行输入 $n$ 个整数，第 $i$ 个数代表引力波 $i$ 初始的频率 $A_i$。\n\n接下来 $q$ 行，每行输入三个整数 $opt,l,r$。\n\n若 $opt=1$，则再输入一个整数 $x$ 表示将区间 $[l,r]$ 中引力波的频率异或上 $x$。\n\n若 $opt=2$，则代表这是一次查询。", "outputFormat": "对于每个查询，输出一行一个整数代表所求式子的值 $\\bmod  \\ 2^{30}$ 的结果。 ", "hint": "### 样例解释\n\n对于第一组询问：此时 $A=\\{1,2,3\\}$，所以答案为 $1+1\\cup 2+1\\cup 2\\cup 3=1+3+3=7$。\n\n对于第二组询问：此时 $A=\\{3,0,3\\}$，所以答案为 $3+3\\cup 0+3\\cup 0\\cup 3=3+3+3=9$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n\n| 子任务 | $n$ | $q$ | 时间 | 空间 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |:----------:|\n| $0$ | $\\le 100$ | $\\le 100$ | $1s$ | $512MB$ | $20$ |\n| $1$ | $\\le 2\\times 10^4$ | $\\le 2\\times 10^4$ | $1s$ | $512MB$ |$20$ |\n| $2$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $512MB$ |$20$ |\n| $3$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $\\color{red}100MB$ |$40$ |\n\n对于所有数据，满足 $0\\le a_i,x< 2^{30}$，$1\\le l\\le r\\le n$。\n\n```\nINITALIZING……\nSCANING……\nCONNECTING……__PhigrOS Client Login\nTIME_OUT!\nCONNECTING……__Unknown\nSUCCESS!\n————————\n……九……鸟……\n……鸠……！\n……喂？\n…听得到吗？\n鸠?![SIGNAL LOST]\n```", "locale": "zh-CN"}}}
{"pid": "P11072", "type": "P", "difficulty": 3, "samples": [["4\n2\n2 1\n2\n2 0\n3\n1 2 3\n3\n0 1 1", "Bob\nAlice\nBob\nBob"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化"], "title": "Alice and Bob", "background": "", "description": "Alice 和 Bob 在一起玩游戏。\n\n初始时给定一个值域在 $0$ 到 $n$ 之间的整数序列 $a$，然后他（她）们轮流进行如下操作，Alice 先操作。\n\n- 操作：任意重排 $a_{1\\sim a_1}$。\n\n如果某一个人操作前 $a_1=0$，则他（她）立刻输，因为他（她）无法进行操作。\n\n如果某次操作结束后某一个人存在两次**他（她）的**操作满足**操作结束后**的 $a_1$ 相同，则他（她）立刻输。\n\n现在给定非负整数序列 $a$，假设两人足够聪明，问谁有必胜策略。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，第一行输入一个正整数 $n$，第二行输入 $n$ 个非负整数 $a_i$。", "outputFormat": "对于每一组数据，输出一行一个字符串 `Alice` 或者 `Bob`，分别表示先手必胜与后手必胜。", "hint": "| 测试点编号 $id$ | $n=$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 20$ | $id$ | 无 |\n| $21$ | $20$ | $a_1=0$ |\n| $22$ | $20$ | $a_1=1$ |\n| $23$ | $20$ | $a_i$ 全相同 |\n| $24\\sim 25$ | $20$ | $a_i$ 两两不同 |\n\n对于所有数据，保证 $1\\le T,n\\le 20$，$0\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Alice and Bob", "background": "", "description": "Alice 和 Bob 在一起玩游戏。\n\n初始时给定一个值域在 $0$ 到 $n$ 之间的整数序列 $a$，然后他（她）们轮流进行如下操作，Alice 先操作。\n\n- 操作：任意重排 $a_{1\\sim a_1}$。\n\n如果某一个人操作前 $a_1=0$，则他（她）立刻输，因为他（她）无法进行操作。\n\n如果某次操作结束后某一个人存在两次**他（她）的**操作满足**操作结束后**的 $a_1$ 相同，则他（她）立刻输。\n\n现在给定非负整数序列 $a$，假设两人足够聪明，问谁有必胜策略。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，第一行输入一个正整数 $n$，第二行输入 $n$ 个非负整数 $a_i$。", "outputFormat": "对于每一组数据，输出一行一个字符串 `Alice` 或者 `Bob`，分别表示先手必胜与后手必胜。", "hint": "| 测试点编号 $id$ | $n=$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 20$ | $id$ | 无 |\n| $21$ | $20$ | $a_1=0$ |\n| $22$ | $20$ | $a_1=1$ |\n| $23$ | $20$ | $a_i$ 全相同 |\n| $24\\sim 25$ | $20$ | $a_i$ 两两不同 |\n\n对于所有数据，保证 $1\\le T,n\\le 20$，$0\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11073", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2\n1 3\n2 4\n3 4", "2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化"], "title": "Game King", "background": "", "description": "你穿越到了游戏王的世界，现在你正在和你的对手——一张 $n$ 个点 $m$ 条边的有向图决斗。\n\n中间忘了。\n\n真正的决斗者，一切都是必然。为了更好的应对面前的决斗，你需要知道有多少个点 $x$ 满足如下条件。\n\n- 对于任意一个点 $y$，均满足 $x$ 能到达 $y$ 或 $y$ 能到达 $x$（我们认为一个点能到达它自己本身）。", "inputFormat": "第一行输入两个正整数 $n,m$，分别表示给定有向图的点数与边数。\n\n接下来 $m$ 行每行输入两个正整数 $x,y$，表示一条有向边 $x\\to y$。", "outputFormat": "输出一行一个整数表示答案，即有多少个点满足所有点均能到达它或被它到达。", "hint": "### 样例一解释\n\n可以证明，只有点 $1,4$ 满足要求。\n\n由于点 $3$ 无法到达点 $2$ 且无法被点 $2$ 到达，故点 $2,3$ 不满足要求。\n\n### 样例二\n\n见下发文件下的 `gameh2.in` 与 `gameh2.ans`。\n\n该样例约束与测试点 $2$ 一致。\n\n### 样例三\n\n见下发文件下的 `gameh3.in` 与 `gameh3.ans`。\n\n该样例约束与测试点 $3$ 一致。\n\n### 数据范围\n\n本题共有 $10$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n=$|$m=$|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 2$|$5$|$10$|$20$|\n|$3\\sim 4$|$5$|$100$|$10^3$|\n|$5\\sim 6$|$5$|$10^3$|$10^4$|\n|$7\\sim 8$|$15$|$5\\times 10^4$|$5\\times 10^5$|\n|$9\\sim 10$|$20$|$10^6$|$3\\times 10^6$|\n\n对于所有数据，保证 $10\\le n\\le 10^6$，$20\\le m\\le 3\\times 10^6$。\n\n对于奇数编号测试点，保证给定的图没有**不同点数 $\\mathbf{>1}$** 的环。\n\n### 提示\n\n**本题输入输出规模较大，请使用较为快速的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Game King", "background": "", "description": "你穿越到了游戏王的世界，现在你正在和你的对手——一张 $n$ 个点 $m$ 条边的有向图决斗。\n\n中间忘了。\n\n真正的决斗者，一切都是必然。为了更好的应对面前的决斗，你需要知道有多少个点 $x$ 满足如下条件。\n\n- 对于任意一个点 $y$，均满足 $x$ 能到达 $y$ 或 $y$ 能到达 $x$（我们认为一个点能到达它自己本身）。", "inputFormat": "第一行输入两个正整数 $n,m$，分别表示给定有向图的点数与边数。\n\n接下来 $m$ 行每行输入两个正整数 $x,y$，表示一条有向边 $x\\to y$。", "outputFormat": "输出一行一个整数表示答案，即有多少个点满足所有点均能到达它或被它到达。", "hint": "### 样例一解释\n\n可以证明，只有点 $1,4$ 满足要求。\n\n由于点 $3$ 无法到达点 $2$ 且无法被点 $2$ 到达，故点 $2,3$ 不满足要求。\n\n### 样例二\n\n见下发文件下的 `gameh2.in` 与 `gameh2.ans`。\n\n该样例约束与测试点 $2$ 一致。\n\n### 样例三\n\n见下发文件下的 `gameh3.in` 与 `gameh3.ans`。\n\n该样例约束与测试点 $3$ 一致。\n\n### 数据范围\n\n本题共有 $10$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n=$|$m=$|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 2$|$5$|$10$|$20$|\n|$3\\sim 4$|$5$|$100$|$10^3$|\n|$5\\sim 6$|$5$|$10^3$|$10^4$|\n|$7\\sim 8$|$15$|$5\\times 10^4$|$5\\times 10^5$|\n|$9\\sim 10$|$20$|$10^6$|$3\\times 10^6$|\n\n对于所有数据，保证 $10\\le n\\le 10^6$，$20\\le m\\le 3\\times 10^6$。\n\n对于奇数编号测试点，保证给定的图没有**不同点数 $\\mathbf{>1}$** 的环。\n\n### 提示\n\n**本题输入输出规模较大，请使用较为快速的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P11074", "type": "P", "difficulty": 7, "samples": [["5\n1 1\n2 2\n3 3\n4 100\n100 5", "0\n0 1\n0 2 1\n1 50 99 30\nfire big"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化"], "title": "火大", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/bp0nfbj7.png)", "description": "给定两个正整数 $n,m$，求一个长为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，满足如下两个要求。\n\n- 对于任意整数 $i$ ，其中 $1\\le i\\le n$，满足 $0\\le a_i<m$ 且 $a_i$ 为整数。\n- 对于任意整数 $i,j$，其中 $1\\le i\\le j\\le n$，存在整数 $k$，其中 $1\\le k\\le j$，满足 $a_k\\in [\\frac{m(i-1)}{j},\\frac{mi}{j})$。\n\n若存在序列 $a$ 满足要求，请给出构造，否则请输出 `fire big`。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，输入两个正整数 $n,m$，其意义如题目中所描述。", "outputFormat": "对于每组数据，若存在序列 $a$ 满足要求，输出一行 $n$ 个数表示序列 $a$，否则输出一行 `fire big`。", "hint": "**洛谷代码长度限制为 $\\textbf{50\\ KB}$。**\n\n### 评分标准\n\n对于某一个测试点，若你的输出有无解均判断正确，则你至少可以获得 $40\\%$ 的分数。\n\n特别的，如果你的输出的格式不合法，你可能会获得 $0$ 分，一种格式合法的输出是每行输出 $n$ 个 $0$。\n\n### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 10^3$，$1\\le T\\le 4.4\\times 10^4$，$1\\le \\sum n<10^6$，$1\\le m\\le 10^8$。\n\n本题共有 $12$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n$|$m$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$\\le 3$|$=n$|\n|$2$|$5$|$\\le 5$|$\\le 5$|\n|$3$|$5$|$\\le 5$|$=10^8$|\n|$4$|$5$|$\\le 5$|$\\le 10^8$|\n|$5$|$5$|$\\le 10$|$=n$|\n|$6$|$5$|$\\le 10$|$\\le 10^8$|\n|$7$|$5$|$\\le 10^3$|$<n$|\n|$8$|$10$|$\\le 15$|$\\le 100$|\n|$9$|$10$|$\\le 15$|$\\le 10^8$|\n|$10$|$15$|$\\le 44$|$\\le 10^3$|\n|$11$|$15$|$\\le 10^3$|$=10^8$|\n|$12$|$15$|$\\le 100$|$\\le 10^8$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "火大", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/bp0nfbj7.png)", "description": "给定两个正整数 $n,m$，求一个长为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，满足如下两个要求。\n\n- 对于任意整数 $i$ ，其中 $1\\le i\\le n$，满足 $0\\le a_i<m$ 且 $a_i$ 为整数。\n- 对于任意整数 $i,j$，其中 $1\\le i\\le j\\le n$，存在整数 $k$，其中 $1\\le k\\le j$，满足 $a_k\\in [\\frac{m(i-1)}{j},\\frac{mi}{j})$。\n\n若存在序列 $a$ 满足要求，请给出构造，否则请输出 `fire big`。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，输入两个正整数 $n,m$，其意义如题目中所描述。", "outputFormat": "对于每组数据，若存在序列 $a$ 满足要求，输出一行 $n$ 个数表示序列 $a$，否则输出一行 `fire big`。", "hint": "**洛谷代码长度限制为 $\\textbf{50\\ KB}$。**\n\n### 评分标准\n\n对于某一个测试点，若你的输出有无解均判断正确，则你至少可以获得 $40\\%$ 的分数。\n\n特别的，如果你的输出的格式不合法，你可能会获得 $0$ 分，一种格式合法的输出是每行输出 $n$ 个 $0$。\n\n### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 10^3$，$1\\le T\\le 4.4\\times 10^4$，$1\\le \\sum n<10^6$，$1\\le m\\le 10^8$。\n\n本题共有 $12$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n$|$m$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$\\le 3$|$=n$|\n|$2$|$5$|$\\le 5$|$\\le 5$|\n|$3$|$5$|$\\le 5$|$=10^8$|\n|$4$|$5$|$\\le 5$|$\\le 10^8$|\n|$5$|$5$|$\\le 10$|$=n$|\n|$6$|$5$|$\\le 10$|$\\le 10^8$|\n|$7$|$5$|$\\le 10^3$|$<n$|\n|$8$|$10$|$\\le 15$|$\\le 100$|\n|$9$|$10$|$\\le 15$|$\\le 10^8$|\n|$10$|$15$|$\\le 44$|$\\le 10^3$|\n|$11$|$15$|$\\le 10^3$|$=10^8$|\n|$12$|$15$|$\\le 100$|$\\le 10^8$|", "locale": "zh-CN"}}}
{"pid": "P11075", "type": "P", "difficulty": 2, "samples": [["1", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "不等关系 加强版", "background": "本题是[不等关系](https://loj.ac/p/575)的加强版，建议大家先做原题后再来挑战加强版。", "description": "对于一个字符串 $s_1,s_2,\\cdots ,s_n$，仅包含 `<` 和 `>` 两种字符。\n\n设 $f(s)$ 为「使得 $p_i<p_{i+1}$ 当且仅当 $s_i$ 为 `<` 的排列 $p_1,p_2,\\cdots ,p_{n+1}$」的数量。\n\n现在请你求出，对于所有 $2^n$ 种长度为 $n$ 的字符串 $s$，$f(s)$ 之和是多少。\n\n由于答案可能有点大，因此你只需要输出它对 $998244353$ 取模的结果。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "输出一行一个整数，表示满足要求的排列数量对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n对于字符串 $s1=$ `<`，有且仅有一个排列 $(1,2)$ 满足要求，即 $f(s1)=1$。\n\n对于字符串 $s2=$ `>`，有且仅有一个排列 $(2,1)$ 满足要求，即 $f(s2)=1$。\n\n故答案即为 $f(s1)+f(s2)=2$。\n\n### 数据范围\n\n| 测试点编号 | $n=$ |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $5$ |\n| $5$ | $10$ |\n| $6$ | $15$ |\n| $7$ | $20$ |\n| $8$ | $30$ |\n| $9$ | $50$ |\n| $10$ | $100$ |\n\n对于所有数据，保证 $1\\le n\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不等关系 加强版", "background": "本题是[不等关系](https://loj.ac/p/575)的加强版，建议大家先做原题后再来挑战加强版。", "description": "对于一个字符串 $s_1,s_2,\\cdots ,s_n$，仅包含 `<` 和 `>` 两种字符。\n\n设 $f(s)$ 为「使得 $p_i<p_{i+1}$ 当且仅当 $s_i$ 为 `<` 的排列 $p_1,p_2,\\cdots ,p_{n+1}$」的数量。\n\n现在请你求出，对于所有 $2^n$ 种长度为 $n$ 的字符串 $s$，$f(s)$ 之和是多少。\n\n由于答案可能有点大，因此你只需要输出它对 $998244353$ 取模的结果。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "输出一行一个整数，表示满足要求的排列数量对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n对于字符串 $s1=$ `<`，有且仅有一个排列 $(1,2)$ 满足要求，即 $f(s1)=1$。\n\n对于字符串 $s2=$ `>`，有且仅有一个排列 $(2,1)$ 满足要求，即 $f(s2)=1$。\n\n故答案即为 $f(s1)+f(s2)=2$。\n\n### 数据范围\n\n| 测试点编号 | $n=$ |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $5$ |\n| $5$ | $10$ |\n| $6$ | $15$ |\n| $7$ | $20$ |\n| $8$ | $30$ |\n| $9$ | $50$ |\n| $10$ | $100$ |\n\n对于所有数据，保证 $1\\le n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P11076", "type": "P", "difficulty": 1, "samples": [["1\n5 6 4\nSFSFS\n", "4\n"], ["1\n3 7 3\nFFF\n", "2\n"], ["1\n29 1000 20\nFFFSFFFFSFFFFFSFFFSFFFFFFSFFF\n", "66\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「FSLOI Round I」单挑", "background": "小 F 和小 S 经常进行篮球单挑，但小 S 总是被盖帽。", "description": "每次单挑的结果一定是小 F 获胜或者小 S 获胜，不存在平局的情况。\n\n由于小 F 和小 S 实力不均衡，于是他们制定规则如下：\n\n给定两个整数 $x,y$，若小 F 先赢 $x$ 场，则小 F 获胜。若小 S 先赢 $y$ 场，则小 S 获胜。\n\n现在已经进行了 $n$ 场单挑，这 $n$ 场单挑的结果由一个字符串 $s$ 给出。若 $s$ 的第 $i$ 位为 `F`，则小 F 赢了第 $i$ 场。若 $s$ 的第 $i$ 位为 `S`，则小 S 赢了第 $i$ 场。\n\n小 F 想知道，为了取得胜利，后续的比赛中他**最多连续胜利的场数最少是多少**。\n\n你总共需要回答 $T$ 组询问。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行三个整数 $n,x,y$，含义与题目描述一致。\n\n第二行一个长度为 $n$ 的字符串 $s$，含义与题目描述一致。", "outputFormat": "共 $T$ 行。\n\n每行一个整数，表示小 F 在后续的比赛中最多连续胜利的场数的最小值。", "hint": "**【样例 1 解释】**\n\n为了让小 F 获胜，后续的比赛结果只能为 $ \\texttt {FFFF}$，此时最多连续胜利场数为 $4$。\n\n**【样例 2 解释】**\n\n为了让小 F 获胜，一种可能的后续的比赛结果为 $ \\texttt {FFSFSF}$，此时最多连续胜利场数为 $2$。\n\n请注意，您只需考虑**后续**的比赛中的最多连续胜场数，而不需要考虑前 $n$ 场。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 20$\n- $1 \\leq n \\leq 2\\times10^5$\n- $1 \\leq x,y \\leq 10^9$\n- $\\forall i \\leq n$，保证第 $i$ 场比赛结束后小 S 没有获胜。\n- $\\forall i < n$，保证第 $i$ 场比赛结束后小 F 没有获胜。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n=1$|\n|$2$|$15$|$x,y\\leq n$|\n|$3$|$15$|$A$|\n|$4$|$30$|$T=1$|\n|$5$|$30$|无|\n\n- 特殊性质 $A$：第 $n$ 场比赛结束后，小 S 总共获胜 $y-1$ 场。", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」One-On-One", "background": "FL_sleake and SnowTrace often play basketball one-on-one, but SnowTrace always gets blocked.", "description": "Exactly one of FL_sleake and SnowTrace will win a single one-on-one round. There is no situation of a tie.\n\nDue to the uneven strength between FL_sleake and SnowTrace, they have made the rules as follow:\n\nGiven two positive integers $x$ and $y$. If FL_sleake wins $x$ rounds before SnowTrace wins $y$ rounds, FL_sleake wins. Otherwise SnowTrace wins.\n\nThere have already been $n$ one-on-one rounds, and their results is given as a string $s$ of length $n$. If the $i$-th character of $s$ is `F`, it means FL_sleake has won the $i$-th round. If the $i$-th character of $s$ is `S`, it means SnowTrace has won the $i$-th round.\n\nFL_sleake wants to find **the minimum number of the maximum winning streak in the following rounds** of himself if he wins at last.", "inputFormat": "Each test contains $T$ test cases.\n\nThe first line contains a single integer $T$ — the number of test cases. The description of test cases follows.\n\nThe first line of each test case contains three integers $n,x$ and $y$.\n\nThe second line of each test case contains the string $s$ of length $n$.", "outputFormat": "For each test case, output one line containing a single integer, which is the answer of the test case.", "hint": "**Example Explanation**\n\nIn the first example, in  order for FL_sleake to win, he must win all of the following rounds until he wins a total of $6$ rounds. So, he has to win $4$ times in a row.\n\nIn the second example, $\\texttt{FFSFSF}$ is a possible result of the following rounds. In this case, the maximum winning streak of FL_sleake is $2$.\n\nNote that you only needs to consider the maximum winning streak in the **following** rounds until he wins. The streak in the first $n$ rounds doesn't matter.\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\leq T \\leq 20$\n- $1 \\leq n \\leq 2\\times10^5$\n- $1 \\leq x,y \\leq 10^9$\n- $\\forall i \\leq n$，SnowTrace doesn't win after the $i$-th round.\n- $\\forall i < n$，FL_sleake doesn't win after the $i$-th round.\n\n| Subtask Id | Score | Special Property   |\n| :----: | :--: | :---------: |\n|  $1$   | $10$ |    $n=1$    |\n|  $2$   | $15$ | $x,y\\leq n$ |\n|  $3$   | $15$ |     $A$     |\n|  $4$   | $30$ |    $T=1$    |\n|  $5$   | $30$ |     -      |\n\n- Special property $A$: SnowTrace wins $y-1$ rounds after the $n$-th round.", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」单挑", "background": "小 F 和小 S 经常进行篮球单挑，但小 S 总是被盖帽。", "description": "每次单挑的结果一定是小 F 获胜或者小 S 获胜，不存在平局的情况。\n\n由于小 F 和小 S 实力不均衡，于是他们制定规则如下：\n\n给定两个整数 $x,y$，若小 F 先赢 $x$ 场，则小 F 获胜。若小 S 先赢 $y$ 场，则小 S 获胜。\n\n现在已经进行了 $n$ 场单挑，这 $n$ 场单挑的结果由一个字符串 $s$ 给出。若 $s$ 的第 $i$ 位为 `F`，则小 F 赢了第 $i$ 场。若 $s$ 的第 $i$ 位为 `S`，则小 S 赢了第 $i$ 场。\n\n小 F 想知道，为了取得胜利，后续的比赛中他**最多连续胜利的场数最少是多少**。\n\n你总共需要回答 $T$ 组询问。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行三个整数 $n,x,y$，含义与题目描述一致。\n\n第二行一个长度为 $n$ 的字符串 $s$，含义与题目描述一致。", "outputFormat": "共 $T$ 行。\n\n每行一个整数，表示小 F 在后续的比赛中最多连续胜利的场数的最小值。", "hint": "**【样例 1 解释】**\n\n为了让小 F 获胜，后续的比赛结果只能为 $ \\texttt {FFFF}$，此时最多连续胜利场数为 $4$。\n\n**【样例 2 解释】**\n\n为了让小 F 获胜，一种可能的后续的比赛结果为 $ \\texttt {FFSFSF}$，此时最多连续胜利场数为 $2$。\n\n请注意，您只需考虑**后续**的比赛中的最多连续胜场数，而不需要考虑前 $n$ 场。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 20$\n- $1 \\leq n \\leq 2\\times10^5$\n- $1 \\leq x,y \\leq 10^9$\n- $\\forall i \\leq n$，保证第 $i$ 场比赛结束后小 S 没有获胜。\n- $\\forall i < n$，保证第 $i$ 场比赛结束后小 F 没有获胜。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n=1$|\n|$2$|$15$|$x,y\\leq n$|\n|$3$|$15$|$A$|\n|$4$|$30$|$T=1$|\n|$5$|$30$|无|\n\n- 特殊性质 $A$：第 $n$ 场比赛结束后，小 S 总共获胜 $y-1$ 场。", "locale": "zh-CN"}}}
{"pid": "P11077", "type": "P", "difficulty": 2, "samples": [["1\n5 2\n1 5 7 9 13", "L"], ["2\n6 3\n4 7 5 3 1 16\n7 2\n2 6 4 8 12 4 6\n", "Draw\nL"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「FSLOI Round I」石子", "background": "小 F 和小 L 正在玩一种古老的博弈游戏的改版。", "description": "给定 $n$ 堆石子，第 $i$ 堆有 $a_i$ 个石子。设序列 $a_1,a_2,\\cdots,a_n$ 的平均数为 $x$。此外，还会给定一个不大于 $x$ 的数字 $k$。小 F 和小 L 将轮流进行以下操作直至一方胜出，小 F 先手：\n\n- 选定两堆石子 $i,j$，满足 $a_i < x < a_j$。若无法选出这样的两堆石子，则对方获胜。\n\n- 从第 $j$ 堆石子中拿出 $k$ 个石子放到第 $i$ 堆中。\n\n小 F 和小 L 都将用最优策略进行操作。\n\n若游戏会无限进行下去，输出 `Draw`。若小 F 将获胜，输出 `F`。否则，输出 `L`。\n\n小 F 一共会进行 $T$ 场游戏，你需要告诉他每场游戏的结果。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "共 $T$ 行。\n\n每行应为 `Draw`，`F`，`L` 中的一种。", "hint": "**【样例 1 解释】**\n\n平均数为 $7$。\n\n小 F 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $3,5,7,9,11$。\n\n小 L 可以选择 $i=1,j=4$ 进行操作，使得石子数分别为 $5,5,7,7,11$。\n\n小 F 可以选择 $i=2,j=5$ 进行操作，使得石子数分别为 $5,7,7,7,9$。\n\n小 L 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $7,7,7,7,7$。\n\n小 F 无法进行操作。小 L 获胜。可以证明无论小 F 如何操作，小 L 都有必胜策略。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n设 $x$ 为序列 $a$ 的平均值。\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 10$\n- $1 \\leq n \\leq 2\\times10^5$\n- $0 \\leq a_i \\leq 10^9$\n- $1 \\leq k \\leq x$\n- $x$ 为整数\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$A$|\n|$2$|$10$|$k = 1$|\n|$3$|$15$|$n \\leq 5, T =1$|\n|$4$|$25$|$n \\leq 1000$|\n|$5$|$45$|无|\n\n特殊性质 $A$：$a_1=a_2=a_3=\\cdots=a_n$。", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」Stone", "background": "Frank and Louis are playing a modified version of an ancient game.", "description": "Frank and Louis are playing a game with $n$ piles of stones, where the $i$-th pile has $a_i$ stones. Denote the average of sequence $a_1,a_2,\\dots,a_n$ as $x$.\n\nBefore the game starts, a positive integer not greater than $x$ is given. Frank and Louis take turns making the following moves with Frank going first:\n\n- Choose the $i$-th and the $j$-th piles of stones $(i \\neq j)$ satisfying $a_i<x<a_j.$\n\n- Take out $k$ stones from the $j$-th pile and put them into the $i$-th pile of stones.\n\nThe player who is unable to make a move loses.\n\nDetermine who will win if both players play optimally.", "inputFormat": "Each test contains multiple test cases.\n\nThe first line of the input contains a single integer $T$, the number of test cases. The description of test cases follows.\n\nThe first line of each test case contains two integers $n$ and $k$.\n\nThe second line of each test case contains $n$ integers: $a_1,a_2,\\dots,a_n$.", "outputFormat": "For each test case, output `F` if Frank wins, `L` if Louis wins, and `Draw` if the game will never end.", "hint": "**Example Explanation**\n\nIn the first example, $a$ is initially $\\{1,5,7,9,13\\}$, and the average value $x$ of the sequence $a$ is $7$.\n\nOne possible game process follows:\n\n1. Frank chooses $i=1,j=5$, and $a$ becomes $\\{3,5,7,9,11\\}$.\n\n2. Louis chooses $i=1,j=4$, and $a$ becomes $\\{5,5,7,7,11\\}$.\n\n3. Frank chooses $i=2,j=5$, and $a$ becomes $\\{5,7,7,7,9\\}$.\n\n4. Louis chooses $i=1,j=5$, and $a$ becomes $\\{7,7,7,7,7\\}$.\n\n5. Frank is unable to make a move, so Louis wins.\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\le T \\le 10$\n- $1 \\le n \\le 2 \\times 10^5$\n- $0 \\le a_i \\le 10^9$\n- $1 \\le k \\le x$\n- $x$ is an integer.\n\n| Subtask Id | Score | Special Property   |\n| :----: | :--: | :---------: |\n|  $1$   | $5$ |$A$|\n|  $2$   | $10$ | $k=1$ |\n|  $3$   | $15$ | $n \\le 5, T=1$|\n|  $4$   | $25$ |    $n \\le 1000$    |\n|  $5$   | $45$ |     -      |\n\nSpecial Property A: $a_1=a_2=\\dots=a_n$.", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」石子", "background": "小 F 和小 L 正在玩一种古老的博弈游戏的改版。", "description": "给定 $n$ 堆石子，第 $i$ 堆有 $a_i$ 个石子。设序列 $a_1,a_2,\\cdots,a_n$ 的平均数为 $x$。此外，还会给定一个不大于 $x$ 的数字 $k$。小 F 和小 L 将轮流进行以下操作直至一方胜出，小 F 先手：\n\n- 选定两堆石子 $i,j$，满足 $a_i < x < a_j$。若无法选出这样的两堆石子，则对方获胜。\n\n- 从第 $j$ 堆石子中拿出 $k$ 个石子放到第 $i$ 堆中。\n\n小 F 和小 L 都将用最优策略进行操作。\n\n若游戏会无限进行下去，输出 `Draw`。若小 F 将获胜，输出 `F`。否则，输出 `L`。\n\n小 F 一共会进行 $T$ 场游戏，你需要告诉他每场游戏的结果。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "共 $T$ 行。\n\n每行应为 `Draw`，`F`，`L` 中的一种。", "hint": "**【样例 1 解释】**\n\n平均数为 $7$。\n\n小 F 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $3,5,7,9,11$。\n\n小 L 可以选择 $i=1,j=4$ 进行操作，使得石子数分别为 $5,5,7,7,11$。\n\n小 F 可以选择 $i=2,j=5$ 进行操作，使得石子数分别为 $5,7,7,7,9$。\n\n小 L 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $7,7,7,7,7$。\n\n小 F 无法进行操作。小 L 获胜。可以证明无论小 F 如何操作，小 L 都有必胜策略。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n设 $x$ 为序列 $a$ 的平均值。\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 10$\n- $1 \\leq n \\leq 2\\times10^5$\n- $0 \\leq a_i \\leq 10^9$\n- $1 \\leq k \\leq x$\n- $x$ 为整数\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$A$|\n|$2$|$10$|$k = 1$|\n|$3$|$15$|$n \\leq 5, T =1$|\n|$4$|$25$|$n \\leq 1000$|\n|$5$|$45$|无|\n\n特殊性质 $A$：$a_1=a_2=a_3=\\cdots=a_n$。", "locale": "zh-CN"}}}
{"pid": "P11078", "type": "P", "difficulty": 3, "samples": [["3 3 4 1\n..X\n.XX\nXXX\nD 1 2\nR 1 2\nD 2 0\nL 1 0\n", "1 3\n"], ["10 10 8 2\nXX.XX.X...\nXXX..XXX.X\nXXX.X.XXXX\nXXXXXXX.X.\n.XX...XX.X\n.XXX.X.X.X\n...XXX.XXX\nXX...XX...\nX..XX....X\nXXXXX...XX\nU 2 1\nL 1 3\nR 3 1\nL 1 2\nD 2 1\nR 5 1\nL 4 0\nD 3 0\n", "1 10\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "差分", "洛谷月赛"], "title": "「FSLOI Round I」迷雾", "background": "小 F 来到了迷雾之森。", "description": "整个迷雾之森可以由一个 $n \\times m$ 的矩阵表示，`X` 代表有迷雾的地块，`.` 代表空地。从上到下给每行标号为 $1,2,\\cdots,n$，从左到右给每列标号为 $1,2,\\cdots,m$。除此之外，还会给定一个迷雾系数 $k$。\n\n小 F 进行了 $q$ 次移动。第 $i$ 次移动由一个字符 $c_i$，两个数字 $a_i,b_i$ 描述，更具体地说：\n\n- $c_i$ 为 `U` 时，向上走 $a_i$ 步。\n- $c_i$ 为 `D` 时，向下走 $a_i$ 步。\n- $c_i$ 为 `L` 时，向左走 $a_i$ 步。\n- $c_i$ 为 `R` 时，向右走 $a_i$ 步。\n\n当然，小 F 不可以走出这个 $ n \\times m $ 的范围。换句话说，若走到边界处，立即结束此次移动。\n\n若第 $i$ 次移动**结束**后小 F 停留在有迷雾的地块上，则小 F 会对从 $i+k$ 开始，之后每 $k$ 次移动的 $c$ 进行一次修改，一共修改 $b_i$ 个移动。也就是说，小 F 会对 $c_{i+k},c_{i+2\\times k},\\cdots,c_{i+b_i \\times k}$ 进行一次**修改**（保证 $i+b_i\\times k \\leq q$）。若 $b_i=0$ 则相当于不做修改。**注意所有操作的 $k$ 是一样的**。\n\n修改 $c_x$ 即为按照以下规则替换 $c_x$：\n\n- 若 $c_x$ 为 `U`，则替换为 `D`。\n- 若 $c_x$ 为 `D`，则替换为 `U`。\n- 若 $c_x$ 为 `R`，则替换为 `L`。\n- 若 $c_x$ 为 `L`，则替换为 `R`。\n\n初始时小 F 在点 $(1,1)$ 处，请输出 $q$ 次移动后小 F 所在的位置 $(x,y)$。", "inputFormat": "第一行四个整数 $n,m,q,k$。\n\n接下来 $n$ 行，每行一个长度为 $m$，由 `.` 和 `X` 构成的字符串，描述整个迷雾之森。\n\n接下来 $q$ 行，每行先是一个字符 $c_i$，然后依次是两个整数 $a_i,b_i$，描述每次移动。", "outputFormat": "共一行。\n\n两个整数 $x,y$，表示小 F 最终的位置。", "hint": "**【样例 1 解释】**\n\n小 F 的位置变化如下：\n\n$(1,1) \\rightarrow (2,1) \\rightarrow (2,2)\\rightarrow (1,2) \\rightarrow (1,3)$\n\n序列 $c$ 的变化如下：\n\n$ \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace$\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n,m \\leq 500$\n- $1 \\leq k \\leq 20$\n- $1\\leq q \\leq 2 \\times 10^5$\n- $1 \\leq a_i,b_i \\leq 10^6$\n- $c_i$ 为 `L`，`R`，`U`，`D` 四个字符中的一个。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$q=1$|\n|$2$|$15$|$n,m,q\\leq 100$|\n|$3$|$20$|$k=1$|\n|$4$|$30$|$n=1$|\n|$5$|$30$|无|", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」Fog", "background": "FL_sleake has come to the Misty Forest.", "description": "The Misty Forest can be represented as a grid of size $n \\times m$, where cells with character `X` have dense fog, while cells with character `.` are empty.\n\nDenote the cell in the $i$-th row from the top and the $j$-th column from the left as $(i,j)$.\n\nA fog constant $k$ is given.\n\nFL_sleake made $q$ moves. The $i$-th move consists of one character $c_i$ and two integers $a_i$ and $b_i$. Specifically:\n\n- If $c_i$ is `U`, take $a_i$ steps upwards.\n- If $c_i$ is `D`, take $a_i$ steps downwards.\n- If $c_i$ is `L`, take $a_i$ steps to the left.\n- If $c_i$ is `R`, take $a_i$ steps to the right.\n\nIn each step, he will go by exactly one cell towards the given direction. However, if he will move outside of the forest after the step, he just stays in the current cell instead.\n\nIf FL_sleake stays in a cell with fog after he performs the $i$-th move, he will perform an operation on $c_{i+k},c_{i+2\\times k},\\dots, c_{i+b_i\\times k}$. If $b_i=0$, No operations will be performed.\n\nAn operation on a character $c$ is replacing it with another character representing the opposite direction of $c$. That is:\n\n- If $c$ is `U`, replace it with `D`.\n- If $c$ is `D`, replace it with `U`.\n- If $c$ is `L`, replace it with `R`.\n- If $c$ is `R`, replace it with `L`.\n\nInitially FL_sleake is at $(1,1)$, please find his position after the $q$ moves.\n\nRecall that $k$ is the same for all moves.", "inputFormat": "The first line of the input contains four integers $n,m,q,k$.\n\nIn the following $n$ lines, each line contains a string of length $m$, representing the Misty Forest.\n\nIn the following $q$ lines, the $i$-th line contains one character $c_i$, and two integers $a_i$ and $b_i$, representing the $i$-th move.", "outputFormat": "Output a single line containing two integers $x$ and $y$, representing that FL_sleake's position after the $q$ moves is $(x,y)$.", "hint": "**Example Explanation**\n\nIn the first example, FL_sleake's position at the beginning and after each move is as follow:\n\n$(1,1) \\rightarrow (2,1) \\rightarrow (2,2)\\rightarrow (1,2) \\rightarrow (1,3)$\n\nThe sequence $c_1,c_2,\\dots,c_q$ at the beginning and after each move is as follow:\n\n$ \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace$\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\leq n,m \\leq 500$\n- $1 \\leq k \\leq 20$\n- $1\\leq q \\leq 2 \\times 10^5$\n- $1 \\leq a_i,b_i \\leq 10^6$\n- $c_i \\in \\{\\texttt{L,R,U,D}\\}$\n\n|Subtask Id|Score|Special Property|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$q=1$|\n|$2$|$15$|$n,m,q\\leq 100$|\n|$3$|$20$|$k=1$|\n|$4$|$30$|$n=1$|\n|$5$|$30$|-|", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」迷雾", "background": "小 F 来到了迷雾之森。", "description": "整个迷雾之森可以由一个 $n \\times m$ 的矩阵表示，`X` 代表有迷雾的地块，`.` 代表空地。从上到下给每行标号为 $1,2,\\cdots,n$，从左到右给每列标号为 $1,2,\\cdots,m$。除此之外，还会给定一个迷雾系数 $k$。\n\n小 F 进行了 $q$ 次移动。第 $i$ 次移动由一个字符 $c_i$，两个数字 $a_i,b_i$ 描述，更具体地说：\n\n- $c_i$ 为 `U` 时，向上走 $a_i$ 步。\n- $c_i$ 为 `D` 时，向下走 $a_i$ 步。\n- $c_i$ 为 `L` 时，向左走 $a_i$ 步。\n- $c_i$ 为 `R` 时，向右走 $a_i$ 步。\n\n当然，小 F 不可以走出这个 $ n \\times m $ 的范围。换句话说，若走到边界处，立即结束此次移动。\n\n若第 $i$ 次移动**结束**后小 F 停留在有迷雾的地块上，则小 F 会对从 $i+k$ 开始，之后每 $k$ 次移动的 $c$ 进行一次修改，一共修改 $b_i$ 个移动。也就是说，小 F 会对 $c_{i+k},c_{i+2\\times k},\\cdots,c_{i+b_i \\times k}$ 进行一次**修改**（保证 $i+b_i\\times k \\leq q$）。若 $b_i=0$ 则相当于不做修改。**注意所有操作的 $k$ 是一样的**。\n\n修改 $c_x$ 即为按照以下规则替换 $c_x$：\n\n- 若 $c_x$ 为 `U`，则替换为 `D`。\n- 若 $c_x$ 为 `D`，则替换为 `U`。\n- 若 $c_x$ 为 `R`，则替换为 `L`。\n- 若 $c_x$ 为 `L`，则替换为 `R`。\n\n初始时小 F 在点 $(1,1)$ 处，请输出 $q$ 次移动后小 F 所在的位置 $(x,y)$。", "inputFormat": "第一行四个整数 $n,m,q,k$。\n\n接下来 $n$ 行，每行一个长度为 $m$，由 `.` 和 `X` 构成的字符串，描述整个迷雾之森。\n\n接下来 $q$ 行，每行先是一个字符 $c_i$，然后依次是两个整数 $a_i,b_i$，描述每次移动。", "outputFormat": "共一行。\n\n两个整数 $x,y$，表示小 F 最终的位置。", "hint": "**【样例 1 解释】**\n\n小 F 的位置变化如下：\n\n$(1,1) \\rightarrow (2,1) \\rightarrow (2,2)\\rightarrow (1,2) \\rightarrow (1,3)$\n\n序列 $c$ 的变化如下：\n\n$ \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace$\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n,m \\leq 500$\n- $1 \\leq k \\leq 20$\n- $1\\leq q \\leq 2 \\times 10^5$\n- $1 \\leq a_i,b_i \\leq 10^6$\n- $c_i$ 为 `L`，`R`，`U`，`D` 四个字符中的一个。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$q=1$|\n|$2$|$15$|$n,m,q\\leq 100$|\n|$3$|$20$|$k=1$|\n|$4$|$30$|$n=1$|\n|$5$|$30$|无|", "locale": "zh-CN"}}}
{"pid": "P11079", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2 1", "2"], ["7\n2 4 3 1 5 2 1", "35"], ["20\n2 3 5 6 8 7 6 5 6 7 8 8 8 8 4 3 5 6 7 4", "15085"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「FSLOI Round I」山峦", "background": "山峦是造物主弃的酒杯。", "description": "如果一个长度至少为三的序列 $a$ 满足以下条件，则称其为一个**山峰**：\n\n- 设其长度为 $m$。存在一个 $x$，满足 $2\\leq x \\leq m-1$，并且使得 $a_1,a_2,\\cdots,a_x$ 严格单调递增，$a_x,a_{x+1},\\cdots,a_m$ 严格单调递减。\n\n特别地，称 $a_x$ 为这个山峰的高度。\n\n如果一个序列 $b$ 满足以下任一条件，则称其为一个**山峦**：\n\n- $b$ 序列是一个**山峰**。\n\n- 可以拆成至少两个连续的子序列，使得每个子序列都是**山峰**，且从左到右**山峰的高度**严格单调递增。\n\n比如，序列 $\\lbrace 2,4,3,1,5,2,1 \\rbrace$ 是山峦，因为其可以拆分为 $\\lbrace 2,4,3 \\rbrace,\\lbrace 1,5,2,1 \\rbrace$ 两个山峰，且山峰高度严格递增。而序列 $\\lbrace 2,4,3,5,2,1 \\rbrace$ 不是山峦，因为其无法拆分成至少两个连续的子序列，使得每个子序列都是山峰。\n\n现在给定一个长度为 $n$ 的序列 $a$，小 F 想知道，在 $a$ 的所有子序列中，有多少个是**山峦**。由于答案可能很大，请输出其对 $998244353$ 取余后的结果。\n\n请注意，在本题中，即使子序列的元素相同，只要子序列的元素在 $a$ 中的位置不同，仍算作不同的子序列。", "inputFormat": "共两行。\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示 $a$ 序列。", "outputFormat": "共一行。\n\n一个整数，表示是山峦的子序列数量对 $998244353$ 取余的结果。", "hint": "**【样例 1 解释】**\n\n由 $a_1,a_2,a_4$ 构成的子序列是山峦，由 $a_1,a_3,a_4$ 构成的子序列是山峦。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n \\leq 500$\n- $1 \\leq a_i \\leq 10^6$\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n \\leq 18$|\n|$2$|$15$|$n \\leq 80$|\n|$3$|$15$|$A$|\n|$4$|$20$|$B$|\n|$5$|$40$|无|\n\n特殊性质 $A$：序列 $a$ 是山峰。\n\n特殊性质 $B$：序列 $a$ 中的元素互不相同。", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」Mountain", "background": "Mountains are wineglasses discarded by the Creator.", "description": "An integer sequence $a$ of length $m(m \\ge 3)$ is called a **peak** if and only if it satisfies the following condition:\n\n- There exists an integer $x(2 \\le x \\le m-1)$ where $a_1<a_2<\\dots<a_x>a_{x+1}>\\dots>a_m$. We call $a_x$ as the **height** of the peak.\n\nAn integer sequence $b$ is called a **mountain** if and only if it satisfies one of the following conditions:\n\n- $b$ is a **peak**.\n\n- $b$ can be split into at least two continuous subsequences, where each subsequence is a **peak** and the **heights** of the **peaks** are strictly increasing from left to right.\n\nFor example, the sequence $\\{2,4,3,1,5,2,1\\}$ is a **mountain**, because it can be split into two **peaks**: $\\{2,4,3\\}$ and $\\{1,5,2,1\\}$, and the **heights** of the peaks $(\\{4,5\\})$ are strictly increasing. $\\{2,4,3,5,2,1\\}$ is not a **peak** because it itself isn't a **peak** and it cannot be split into multiple **peaks**.\n\nYou are given a sequence $a$ of length $n$. You need to find out the number of **mountains** among all the subsequences of $a$.\n\nThe answer may be very large, so please print the answer modulo $998{,}244{,}353$.\n\nNote that, for two subsequences $s=\\{a_{i_1},a_{i_2},\\dots,a_{i_p}\\}$ and $t=\\{a_{j_1},a_{j_2},\\dots,a_{j_q}\\}$, they are different if and only if $\\{i_1,i_2,\\dots,i_p\\}\\neq\\{j_1,j_2,\\dots,j_q\\}$. In other words, even if two subsequences have the same elements, they are distinguished as long as the positions of the elements are different.", "inputFormat": "The first line of the input contains a single integer $n$ representing the length of the given sequence.\n\nThe second line contains $n$ integers $a_1,a_2,\\dots,a_n$, representing the sequence $a$.", "outputFormat": "Output a single integer, representing the answer modulo $998{,}244{,}353$.", "hint": "**Example Explanation**\n\nIn the first example, $\\{a_1,a_2,a_4\\}$ and $\\{a_1,a_3,a_4\\}$ are **mountains**.\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\leq n \\leq 500$\n- $1 \\leq a_i \\leq 10^6$\n\n|Subtask Id|Score|Special Property|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n \\leq 18$|\n|$2$|$15$|$n \\leq 80$|\n|$3$|$15$|$A$|\n|$4$|$20$|$B$|\n|$5$|$40$|-|\n\nSpecial Property $A$: $a$ is a **peak**.\n\nSpecial Property $B$: $a_1,a_2,\\dots,a_n$ are pairwise distinct.", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」山峦", "background": "山峦是造物主弃的酒杯。", "description": "如果一个长度至少为三的序列 $a$ 满足以下条件，则称其为一个**山峰**：\n\n- 设其长度为 $m$。存在一个 $x$，满足 $2\\leq x \\leq m-1$，并且使得 $a_1,a_2,\\cdots,a_x$ 严格单调递增，$a_x,a_{x+1},\\cdots,a_m$ 严格单调递减。\n\n特别地，称 $a_x$ 为这个山峰的高度。\n\n如果一个序列 $b$ 满足以下任一条件，则称其为一个**山峦**：\n\n- $b$ 序列是一个**山峰**。\n\n- 可以拆成至少两个连续的子序列，使得每个子序列都是**山峰**，且从左到右**山峰的高度**严格单调递增。\n\n比如，序列 $\\lbrace 2,4,3,1,5,2,1 \\rbrace$ 是山峦，因为其可以拆分为 $\\lbrace 2,4,3 \\rbrace,\\lbrace 1,5,2,1 \\rbrace$ 两个山峰，且山峰高度严格递增。而序列 $\\lbrace 2,4,3,5,2,1 \\rbrace$ 不是山峦，因为其无法拆分成至少两个连续的子序列，使得每个子序列都是山峰。\n\n现在给定一个长度为 $n$ 的序列 $a$，小 F 想知道，在 $a$ 的所有子序列中，有多少个是**山峦**。由于答案可能很大，请输出其对 $998244353$ 取余后的结果。\n\n请注意，在本题中，即使子序列的元素相同，只要子序列的元素在 $a$ 中的位置不同，仍算作不同的子序列。", "inputFormat": "共两行。\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示 $a$ 序列。", "outputFormat": "共一行。\n\n一个整数，表示是山峦的子序列数量对 $998244353$ 取余的结果。", "hint": "**【样例 1 解释】**\n\n由 $a_1,a_2,a_4$ 构成的子序列是山峦，由 $a_1,a_3,a_4$ 构成的子序列是山峦。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n \\leq 500$\n- $1 \\leq a_i \\leq 10^6$\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n \\leq 18$|\n|$2$|$15$|$n \\leq 80$|\n|$3$|$15$|$A$|\n|$4$|$20$|$B$|\n|$5$|$40$|无|\n\n特殊性质 $A$：序列 $a$ 是山峰。\n\n特殊性质 $B$：序列 $a$ 中的元素互不相同。", "locale": "zh-CN"}}}
{"pid": "P11080", "type": "P", "difficulty": 4, "samples": [["7 10\n10 5 5 10 4 2 4", "5\n4 1 7\n7 2 4\n10 1 4\n5 2 3\n2 6 6"], ["5 2\n1 2 1 2 1", "-1"], ["6 5\n1 1 4 5 1 4", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 拍照 (Day 1)", "background": "翻译自 [ROI 2019 D1T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n参加奥林匹克竞赛的学生来自 $n$ 个地区，每个地区的代表团由 $m$ 名学生组成。每个代表团的学生穿着有自己地区特色的衣服，第 $i$ 个代表团穿的衣服颜色编号为 $i$。\n\n摄影师决定给所有参赛者拍一张照片。为了组织拍摄照片，摄影师计划按以下方式进行操作：\n\n舞台上有一排学生站立的位置，他们沿着舞台从 $1$ 到 $m$ 进行编号。摄影师计划轮流找一些代表团的领队，要求该代表团的几名学生上台。摄影师指定 $L$ 和 $R$ 的值，选中的代表团的学生上台并站在从第 $L$ 个到第 $R$ 个（包括 $L$ 和 $R$）的所有位置上。如果这个位置上已经站了一名学生，则将这名学生请下台，让新的学生站上来。每个代表团的领队只能被摄影师找一次。", "description": "为了在照片上的色彩更加和谐，摄影师希望照片上应该有 $m$ 名学生，而且穿着的衣服颜色必须按照给定的顺序排列。现在他想知道如何才能得到所需的照片。\n\n编写一个程序，根据给定的颜色顺序，确定摄影师要找的代表团编号以及他们应该占据的位置的顺序，以制作期望中的照片。如果不可能，输出 `-1`。", "inputFormat": "第一行包含两个整数 $m$ 和 $n$。\n\n第二行包含 $m$ 个整数 $a_1,a_2,\\dots,a_m$（$1\\le a_i\\le n$），表示摄影师希望照片上的学生衣服颜色的顺序。", "outputFormat": "输出的第一行应包含一个整数 $k$。如果无法拍出期望的照片，则此数字应为 $-1$。否则，它应该是摄影师需要找的代表团的数量，以便拍出期望的照片。\n\n当 $k\\ne-1$ 时，接下来的 $k$ 行应按照它们应该进行的顺序输出摄影师的请求。第 $i$ 个请求由三个整数 $c_i,L_i,R_i$ 表示，其中 $c_i$ 是代表团的编号，$L_i$ 和 $R_i$ 分别是代表团 $c_i$ 的学生应该占据的舞台上第一个和最后一个位置的编号。所有 $c_i$ 必须不同。\n\n如果有多个解决方案，可以输出其中任意一个。", "hint": "样例 $1$ 解释：\n\n如果按照输出中的顺序让代表团的学生上台，那么每让一个代表团的学生上台后，舞台上的学生应该是这样排列的：\n\n1. $4\\ 4\\ 4\\ 4\\ 4\\ 4\\ 4$；\n2. $4\\ 7\\ 7\\ 7\\ 4\\ 4\\ 4$；\n3. $10\\ 10\\ 10\\ 10\\ 4\\ 4\\ 4$；\n4. $10\\ 5\\ 5\\ 10\\ 4\\ 4\\ 4$；\n5. $10\\ 5\\ 5\\ 10\\ 4\\ 2\\ 4$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ | $100$ |\n| $2$ | $15$ | $10^4$ | $10^4$ |\n| $3$ | $5$ | $3\\times10^5$ | $2$ |\n| $4$ | $5$ | $3\\times10^5$ | $3$ |\n| $5$ | $20$ | $3\\times10^5$ | $10$ |\n| $6$ | $40$ | $3\\times10^5$ | $3\\times10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 拍照 (Day 1)", "background": "翻译自 [ROI 2019 D1T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n参加奥林匹克竞赛的学生来自 $n$ 个地区，每个地区的代表团由 $m$ 名学生组成。每个代表团的学生穿着有自己地区特色的衣服，第 $i$ 个代表团穿的衣服颜色编号为 $i$。\n\n摄影师决定给所有参赛者拍一张照片。为了组织拍摄照片，摄影师计划按以下方式进行操作：\n\n舞台上有一排学生站立的位置，他们沿着舞台从 $1$ 到 $m$ 进行编号。摄影师计划轮流找一些代表团的领队，要求该代表团的几名学生上台。摄影师指定 $L$ 和 $R$ 的值，选中的代表团的学生上台并站在从第 $L$ 个到第 $R$ 个（包括 $L$ 和 $R$）的所有位置上。如果这个位置上已经站了一名学生，则将这名学生请下台，让新的学生站上来。每个代表团的领队只能被摄影师找一次。", "description": "为了在照片上的色彩更加和谐，摄影师希望照片上应该有 $m$ 名学生，而且穿着的衣服颜色必须按照给定的顺序排列。现在他想知道如何才能得到所需的照片。\n\n编写一个程序，根据给定的颜色顺序，确定摄影师要找的代表团编号以及他们应该占据的位置的顺序，以制作期望中的照片。如果不可能，输出 `-1`。", "inputFormat": "第一行包含两个整数 $m$ 和 $n$。\n\n第二行包含 $m$ 个整数 $a_1,a_2,\\dots,a_m$（$1\\le a_i\\le n$），表示摄影师希望照片上的学生衣服颜色的顺序。", "outputFormat": "输出的第一行应包含一个整数 $k$。如果无法拍出期望的照片，则此数字应为 $-1$。否则，它应该是摄影师需要找的代表团的数量，以便拍出期望的照片。\n\n当 $k\\ne-1$ 时，接下来的 $k$ 行应按照它们应该进行的顺序输出摄影师的请求。第 $i$ 个请求由三个整数 $c_i,L_i,R_i$ 表示，其中 $c_i$ 是代表团的编号，$L_i$ 和 $R_i$ 分别是代表团 $c_i$ 的学生应该占据的舞台上第一个和最后一个位置的编号。所有 $c_i$ 必须不同。\n\n如果有多个解决方案，可以输出其中任意一个。", "hint": "样例 $1$ 解释：\n\n如果按照输出中的顺序让代表团的学生上台，那么每让一个代表团的学生上台后，舞台上的学生应该是这样排列的：\n\n1. $4\\ 4\\ 4\\ 4\\ 4\\ 4\\ 4$；\n2. $4\\ 7\\ 7\\ 7\\ 4\\ 4\\ 4$；\n3. $10\\ 10\\ 10\\ 10\\ 4\\ 4\\ 4$；\n4. $10\\ 5\\ 5\\ 10\\ 4\\ 4\\ 4$；\n5. $10\\ 5\\ 5\\ 10\\ 4\\ 2\\ 4$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ | $100$ |\n| $2$ | $15$ | $10^4$ | $10^4$ |\n| $3$ | $5$ | $3\\times10^5$ | $2$ |\n| $4$ | $5$ | $3\\times10^5$ | $3$ |\n| $5$ | $20$ | $3\\times10^5$ | $10$ |\n| $6$ | $40$ | $3\\times10^5$ | $3\\times10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11081", "type": "P", "difficulty": 6, "samples": [["4 3 9\n3 2 1 3 3 1\n3 2 1 3 3 1\n2 1\n2 3\n1 1\n3 2 1 3 3 3\n3 2 1 3 3 3\n2 2\n3 2 1 3 3 6", "3\n-1\n5\n-1\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 自动驾驶 (Day 1)", "background": "翻译自 [ROI 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n今天，需要在因诺波利斯的主广场上，展示最新试验的自动驾驶出租车的功能。广场是一个长 $n$ 米、宽 $m$ 米的矩形区域，被划分成 $n\\times m$ 个单位方块。矩形的行从 $1$ 到 $n$ 编号，列从 $1$ 到 $m$ 编号。因此，每个方块可以由两个正整数 $r$ 和 $c$ 表示，分别代表所在行和列的编号。自动驾驶出租车可以在相邻的方块之间移动，每一步可以从当前方块移动到与之相邻的四个方块之一。\n\n今年冬天下了很多雪，所以在展示自动驾驶出租车功能的过程中会用自动除雪机清理广场上的雪。由于自动驾驶交通系统正在测试阶段，因此广场上同一时间只能同时存在一辆自动驾驶交通工具（自动除雪机或自动驾驶出租车）。\n\n由于整个展示期间一直在下雪，自动驾驶出租车的工程师决定借机发挥，展示出租车克服雪堆的能力。", "description": "每个时刻广场上每个单位方块的雪深可以由一个非负整数表示，自动驾驶出租车的最大可通过雪深也由一个非负整数表示。在移动时，出租车只能停留在雪深不超过最大可通过雪深的方块上。每次展示自动驾驶出租车时，工程师可以设置出租车的最大可通过雪深。\n\n初始状态下，广场上所有方块的雪深为零。每个小时开始时，每个方块的雪深增加一。随后，自动驾驶交通系统可以执行以下三个操作之一，每个操作需要一小时：\n1) 沿着某一行启动除雪机，然后该行的所有方块的雪深变为零；\n2) 沿着某一列启动除雪机，然后该列的所有方块的雪深变为零；\n3) 展示自动驾驶出租车的功能：设置出租车的最大可通过雪深，选择起始和目标方格，并让出租车从起始方块到达目标方块。  \n   只有当存在一个以起始方块开始、以目标方块结束的单位方块序列，其中任意相邻的两个方块有共同的边界，并且序列中每个方块的雪深都不超过出租车的最大可通过雪深时，才可以从起始方块到达目标方块。如果设置的最大可通过雪深允许完成旅行，则出租车应选择步数最少的路径。\n\n每次展示自动驾驶出租车时，需要确定是否可以顺利完成这次的展示（是否有从起始方块到目标方块的路径），如果可以，则需要知道完成此次旅行所需的最少步数。", "inputFormat": "第一行包含三个整数 $n,m,q$，分别表示区域的大小和无人驾驶出租车的操作数。\n\n接下来的 $q$ 行，每行输入一种操作，其中第 $i$ 行有以下三种操作类型之一：\n- `1 ri`：在第 $r_i$ 行启动除雪机。\n- `2 ci`：在第 $c_i$ 列启动除雪机。\n- `3 ri1 ci1 ri2 ci2 ki`：设置出租车的最大可通过雪深为 $k_i$，并尝试从起始方格 $(r_{i1}, c_{i1})$ 开始行驶到结束方格 $(r_{i2}, c_{i2})$。\n\n保证输入数据中至少存在一个类型为 $3$ 的操作。", "outputFormat": "对于每个类型为 $3$ 的操作，需要输出一行一个整数。如果从起始方格到结束方格的行程是可行的，则输出需要实现该行程的最小步数。如果行程不可行，则输出 `-1`。", "hint": "### 样例解释：\n\n图中显示了每次操作前广场上的雪层深度以及每次成功尝试从一个方块到另一个方块的出租车最佳路线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tk6qhip.png)\n\n### 数据范围：\n\n| 子任务 | $n,m\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $50$ | $4000$ |  |\n| $2$ | $10^4$ | $10^4$ |  |\n| $3$ | $10^6$ | $10^4$ |  |\n| $4$ | $10^5$ | $10^5$ |  |\n| $5$ | $10^6$ | $3\\times10^5$ | 输入中没有操作 $2$ |\n| $6$ | $10^6$ | $3\\times10^5$ | 操作 $3$ 中的 $k_i$ 均相同 |\n| $7$ | $10^6$ | $3\\times10^5$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 自动驾驶 (Day 1)", "background": "翻译自 [ROI 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n今天，需要在因诺波利斯的主广场上，展示最新试验的自动驾驶出租车的功能。广场是一个长 $n$ 米、宽 $m$ 米的矩形区域，被划分成 $n\\times m$ 个单位方块。矩形的行从 $1$ 到 $n$ 编号，列从 $1$ 到 $m$ 编号。因此，每个方块可以由两个正整数 $r$ 和 $c$ 表示，分别代表所在行和列的编号。自动驾驶出租车可以在相邻的方块之间移动，每一步可以从当前方块移动到与之相邻的四个方块之一。\n\n今年冬天下了很多雪，所以在展示自动驾驶出租车功能的过程中会用自动除雪机清理广场上的雪。由于自动驾驶交通系统正在测试阶段，因此广场上同一时间只能同时存在一辆自动驾驶交通工具（自动除雪机或自动驾驶出租车）。\n\n由于整个展示期间一直在下雪，自动驾驶出租车的工程师决定借机发挥，展示出租车克服雪堆的能力。", "description": "每个时刻广场上每个单位方块的雪深可以由一个非负整数表示，自动驾驶出租车的最大可通过雪深也由一个非负整数表示。在移动时，出租车只能停留在雪深不超过最大可通过雪深的方块上。每次展示自动驾驶出租车时，工程师可以设置出租车的最大可通过雪深。\n\n初始状态下，广场上所有方块的雪深为零。每个小时开始时，每个方块的雪深增加一。随后，自动驾驶交通系统可以执行以下三个操作之一，每个操作需要一小时：\n1) 沿着某一行启动除雪机，然后该行的所有方块的雪深变为零；\n2) 沿着某一列启动除雪机，然后该列的所有方块的雪深变为零；\n3) 展示自动驾驶出租车的功能：设置出租车的最大可通过雪深，选择起始和目标方格，并让出租车从起始方块到达目标方块。  \n   只有当存在一个以起始方块开始、以目标方块结束的单位方块序列，其中任意相邻的两个方块有共同的边界，并且序列中每个方块的雪深都不超过出租车的最大可通过雪深时，才可以从起始方块到达目标方块。如果设置的最大可通过雪深允许完成旅行，则出租车应选择步数最少的路径。\n\n每次展示自动驾驶出租车时，需要确定是否可以顺利完成这次的展示（是否有从起始方块到目标方块的路径），如果可以，则需要知道完成此次旅行所需的最少步数。", "inputFormat": "第一行包含三个整数 $n,m,q$，分别表示区域的大小和无人驾驶出租车的操作数。\n\n接下来的 $q$ 行，每行输入一种操作，其中第 $i$ 行有以下三种操作类型之一：\n- `1 ri`：在第 $r_i$ 行启动除雪机。\n- `2 ci`：在第 $c_i$ 列启动除雪机。\n- `3 ri1 ci1 ri2 ci2 ki`：设置出租车的最大可通过雪深为 $k_i$，并尝试从起始方格 $(r_{i1}, c_{i1})$ 开始行驶到结束方格 $(r_{i2}, c_{i2})$。\n\n保证输入数据中至少存在一个类型为 $3$ 的操作。", "outputFormat": "对于每个类型为 $3$ 的操作，需要输出一行一个整数。如果从起始方格到结束方格的行程是可行的，则输出需要实现该行程的最小步数。如果行程不可行，则输出 `-1`。", "hint": "### 样例解释：\n\n图中显示了每次操作前广场上的雪层深度以及每次成功尝试从一个方块到另一个方块的出租车最佳路线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tk6qhip.png)\n\n### 数据范围：\n\n| 子任务 | $n,m\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $50$ | $4000$ |  |\n| $2$ | $10^4$ | $10^4$ |  |\n| $3$ | $10^6$ | $10^4$ |  |\n| $4$ | $10^5$ | $10^5$ |  |\n| $5$ | $10^6$ | $3\\times10^5$ | 输入中没有操作 $2$ |\n| $6$ | $10^6$ | $3\\times10^5$ | 操作 $3$ 中的 $k_i$ 均相同 |\n| $7$ | $10^6$ | $3\\times10^5$ |  |", "locale": "zh-CN"}}}
{"pid": "P11082", "type": "P", "difficulty": 7, "samples": [["2\n3 3 5 20\n1 2 20\n2 3 1\n1 3 10\n2 19\n2 20\n3 20\n3 21\n3 9\n7 10 5 5\n1 2 15\n1 3 10\n2 4 21\n3 4 30\n2 5 14\n3 5 31\n4 6 3\n5 6 14\n1 7 39\n5 7 13\n7 42\n7 43\n7 44\n5 39\n6 44", "11110\n10111"], ["1\n4 6 5 2\n1 2 1\n2 3 1\n3 4 1\n1 2 70\n2 3 120\n3 4 4\n4 90\n4 2\n4 10\n4 37\n2 34", "11010"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "Special Judge", "拓扑排序", "Ad-hoc", "ROI（俄罗斯）", "离线处理"], "title": "[ROI 2019] 高速电车 (Day 1)", "background": "翻译自 [ROI 2019 D1T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\nFlatland 的首都需要与邻近的城市之间建立铁路联系，而现有的铁路系统已经过时。为了优化铁路系统，需要开通一列从首都到另一个城市的高速电车。Flatland 铁路网络总共有 $n$ 个站点，从 $1$ 到 $n$ 进行编号，首都的编号是 $1$。在各个站点之间存在 $m$ 条单向线路，每条线路的行驶时间已知。", "description": "计划部门打算考虑几个不同的高速电车路线方案。每个方案由一个目标站点和预计行驶时间来定义。然而，部门知道实际的行驶时间可能无法完全符合预期。因此，他们使用参数 $p$ 来评估路线的可行性：对于给定的预计时间 $r$，如果 $r\\le x\\le\\frac{p}{p-1}\\times r$，其中 $x$ 是行驶时间的总和，则认为路线是可行的。\n\n编写一个程序，根据 Flatland 铁路网络的描述和各个路线方案，确定每个方案是否存在可行的高速电车路线。", "inputFormat": "第一行包含一个整数 $t$，表示测试数据的组数。\n\n接下来的若干行描述每组测试数据。\n\n每组测试数据的第一行包含四个整数 $n,m,q,p$，分别表示站点数量、线路数量、要考虑的路线方案数量和允许的时间偏差参数。\n\n接下来的 $m$ 行描述每条线路，每行包含三个整数 $v_i,u_i,d_i$，分别表示起始站点、终点站点和行驶时间。\n\n接下来的 $q$ 行描述每个路线方案，每行包含两个整数 $f_i$ 和 $r_i$，分别表示目标站点和预计行驶时间。", "outputFormat": "对于每个测试用例，输出一行长度为 $q$ 的字符串 $s$，其中第 $i$ 个字符 $s_i$ 等于 $1$ 表示存在可行的高速电车路线，行驶时间在区间 $[r_i,\\frac{p}{p-1}\\times r_i]$ 内；否则，$s_i$ 等于 $0$ 表示不存在可行的高速电车路线。", "hint": "### 样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m08fbash.png)\n\n### 样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pr2q9k2f.png)\n\n第一个查询的路线时间为 $1 + 120 + 1 = 122$，符合预期。\n\n第二个查询的路线时间为 $1 + 1 + 1 = 3$，符合预期。\n\n第四个查询的路线时间为 $70 + 1 + 1 = 72$，符合预期。 \n\n对于第三个和第五个查询，没有可行的路线符合预期。\n\n### 数据范围：\n\n对于 $100\\%$ 的数据，$1\\le t\\le1000,1\\le v_i<u_i\\le n\\le500000,1\\le m\\le500000,1\\le q\\le500000,2\\le p\\le20,1\\le d_i\\le10^{11},2\\le f_i\\le n,1\\le r_i\\le10^{17}$。\n\n各个 Subtask 分值及特殊性质：\n\n| Subtask | 分值 | $n$ | $m$ | $q$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $n\\le10$ | $m\\le10$ | $q\\le10$ |  |\n| $2$ | $24$ | $\\sum n\\le5000$ | $\\sum m\\le5000$ | $\\sum q\\le5000$ | $r_i\\le5000$ |\n| $3$ | $17$ |  | $m=2n-2$ | $q\\le10$ | $p=2$，且对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $4$ | $11$ |  | $m=2n-2$ |  | 对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $5$ | $11$ | $\\sum n\\le1000$ | $\\sum m\\le2000$ |  | 所有 $r_i$ 值相等 |\n| $6$ | $11$ |  |  |  | 所有 $r_i$ 值相等 |\n| $7$ | $11$ |  |  |  |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 高速电车 (Day 1)", "background": "翻译自 [ROI 2019 D1T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\nFlatland 的首都需要与邻近的城市之间建立铁路联系，而现有的铁路系统已经过时。为了优化铁路系统，需要开通一列从首都到另一个城市的高速电车。Flatland 铁路网络总共有 $n$ 个站点，从 $1$ 到 $n$ 进行编号，首都的编号是 $1$。在各个站点之间存在 $m$ 条单向线路，每条线路的行驶时间已知。", "description": "计划部门打算考虑几个不同的高速电车路线方案。每个方案由一个目标站点和预计行驶时间来定义。然而，部门知道实际的行驶时间可能无法完全符合预期。因此，他们使用参数 $p$ 来评估路线的可行性：对于给定的预计时间 $r$，如果 $r\\le x\\le\\frac{p}{p-1}\\times r$，其中 $x$ 是行驶时间的总和，则认为路线是可行的。\n\n编写一个程序，根据 Flatland 铁路网络的描述和各个路线方案，确定每个方案是否存在可行的高速电车路线。", "inputFormat": "第一行包含一个整数 $t$，表示测试数据的组数。\n\n接下来的若干行描述每组测试数据。\n\n每组测试数据的第一行包含四个整数 $n,m,q,p$，分别表示站点数量、线路数量、要考虑的路线方案数量和允许的时间偏差参数。\n\n接下来的 $m$ 行描述每条线路，每行包含三个整数 $v_i,u_i,d_i$，分别表示起始站点、终点站点和行驶时间。\n\n接下来的 $q$ 行描述每个路线方案，每行包含两个整数 $f_i$ 和 $r_i$，分别表示目标站点和预计行驶时间。", "outputFormat": "对于每个测试用例，输出一行长度为 $q$ 的字符串 $s$，其中第 $i$ 个字符 $s_i$ 等于 $1$ 表示存在可行的高速电车路线，行驶时间在区间 $[r_i,\\frac{p}{p-1}\\times r_i]$ 内；否则，$s_i$ 等于 $0$ 表示不存在可行的高速电车路线。", "hint": "### 样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m08fbash.png)\n\n### 样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pr2q9k2f.png)\n\n第一个查询的路线时间为 $1 + 120 + 1 = 122$，符合预期。\n\n第二个查询的路线时间为 $1 + 1 + 1 = 3$，符合预期。\n\n第四个查询的路线时间为 $70 + 1 + 1 = 72$，符合预期。 \n\n对于第三个和第五个查询，没有可行的路线符合预期。\n\n### 数据范围：\n\n对于 $100\\%$ 的数据，$1\\le t\\le1000,1\\le v_i<u_i\\le n\\le500000,1\\le m\\le500000,1\\le q\\le500000,2\\le p\\le20,1\\le d_i\\le10^{11},2\\le f_i\\le n,1\\le r_i\\le10^{17}$。\n\n各个 Subtask 分值及特殊性质：\n\n| Subtask | 分值 | $n$ | $m$ | $q$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $n\\le10$ | $m\\le10$ | $q\\le10$ |  |\n| $2$ | $24$ | $\\sum n\\le5000$ | $\\sum m\\le5000$ | $\\sum q\\le5000$ | $r_i\\le5000$ |\n| $3$ | $17$ |  | $m=2n-2$ | $q\\le10$ | $p=2$，且对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $4$ | $11$ |  | $m=2n-2$ |  | 对于每个 $i<n$，恰有两条从 $i$ 出发到 $i+1$ 的线路 |\n| $5$ | $11$ | $\\sum n\\le1000$ | $\\sum m\\le2000$ |  | 所有 $r_i$ 值相等 |\n| $6$ | $11$ |  |  |  | 所有 $r_i$ 值相等 |\n| $7$ | $11$ |  |  |  |  |", "locale": "zh-CN"}}}
{"pid": "P11083", "type": "P", "difficulty": 7, "samples": [["2\n\nYes\n\nNo\n\nYes\n\nCorrect\n\nNo\n\nNo\n\nDone", "\n? 2\n\n? 2\n\n? 2\n\n! 2\n\n? 2\n\n? 2\n\n! 1"], ["3\n\nYes\n\nYes\n\nNo\n\nYes\n\nNo\n\nDone", "\n? 2\n\n? 2\n\n? 3\n\n? 3\n\n? 3\n\n! 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "交互题", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 黑洞 (Day 1)", "background": "翻译自 [ROI 2019 D1T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n**这是一道 IO 交互题**。\n\n科学家计划测量一系列黑洞的辐射等级。黑洞的辐射等级由一个从 $1$ 到 $n$ 的整数表示。为了测量每个黑洞的辐射等级，使用一个特殊的轨道探测器，上面安装有辐射传感器。安装在探测器上的传感器可以回答以下查询：根据给定的 $x$ 值，确定辐射等级是否大于或等于 $x$。不幸的是，由于软件错误，传感器的回复可能是错误的。不过，在第一个错误回复之后，该探测器的状态就会改变，对所有后续的查询只给出正确的回复。\n\n科学家想要通过向其导向的探测器提出尽可能少的查询来确定几个黑洞的辐射等级。", "description": "编写一个程序与模拟探测器传感器的交互库进行交互，并确定每个黑洞的辐射等级。\n\n对于每次运行的解决方案程序，必须解决 $n$ 相同的多个黑洞的问题（即，需要确认多个黑洞的辐射等级，这些黑洞的辐射等级都在 $1$ 和 $n$ 之间）。每次的黑洞数量不超过 $100$。\n\n对于每个测试点，交互库记录了 $q$ 的值，也就是允许对一个黑洞进行的最大查询次数。保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。此数字不会被告知给你的程序。如果你的程序对一个黑洞进行了超过 $q$ 个查询，则这个测试点将会返回 WA。\n\n注：在上述 WA 的情况下，该测试点可能显示为 TLE，有可能是因为交互库已经结束并返回，但程序仍在等待该查询的回复。TLE 时可以查看该测试点返回的详细信息，以确认是程序超时还是询问次数超出限制导致的。", "inputFormat": "首先输入一个数 $n$，也就是黑洞的最大辐射强度。这个数字对于本次运行中的所有黑洞是相同的。读取 $n$ 后，你的程序应与交互库进行交互并逐步确定一个或多个黑洞的辐射等级。\n\n在输出完你对一个黑洞辐射等级的回答后，程序应另外读取一行。如果需要继续对下一个黑洞进行研究，则从交互库读入的字符串为 `Correct`；如果所有的黑洞都已经研究完成，则字符串应该为 `Done`。", "outputFormat": "要进行查询，程序必须输出格式为 `? x` 的字符串，其中 $x$ 是一个正整数。作为回答，交互库将给你的程序一个字符串，要么是 `Yes`（如果传感器的回复没有出错，就代表该黑洞的辐射等级大于或等于查询中指定的 $x$ 值），要么是 `No`（如果传感器的回复没有出错，就代表该黑洞的辐射等级小于查询中指定的 $x$ 值）。\n\n如果你的程序确定了问题的答案，则它应该输出一行 `! x`，其中 $x$ 是要查找的黑洞的辐射等级。如果 $x$ 是唯一那个与不多于一个交互库的回复相冲突的辐射水平值，则该答案被视为正确的。如果给出了错误答案，程序将被强制终止，并且该测试点的结果将会变为 WA。", "hint": "### 样例解释：\n\n在第一个示例中，对于第一个黑洞，在前两次查询之后不知道传感器的答案错误在哪一个上面，因此需要进行第三个查询。\n\n在第二个示例中，展示了 $n = 3$ 的一个可能的交互情况，程序可以在 $5$ 次查询内找到答案。可以证明，在 $4$ 次查询内无法确定答案。\n\n在这两个样例中，交互库确定的 $q=30$，明显的，这两个样例都没有超出界限。\n\n请注意，交互库可能给出不同的答案，即使程序输出与样例中完全相同的查询。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $q$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $1000$ | $q=30$ |\n| $2$ | $8$ | $1000$ | $q=21$ |\n| $3$ | $6$ | $4$ |  |\n| $4$ | $9$ | $7$ |  |\n| $5$ | $5$ | $12$ |  |\n| $6$ | $6$ | $25$ |  |\n| $7$ | $4$ | $40$ |  |\n| $8$ | $5$ | $80$ |  |\n| $9$ | $5$ | $150$ |  |\n| $10$ | $8$ | $300$ |  |\n| $11$ | $7$ | $500$ |  |\n| $12$ | $5$ | $1000$ |  |\n| $13$ | $5$ | $2000$ |  |\n| $14$ | $5$ | $4000$ |  |\n| $15$ | $5$ | $8000$ |  |\n| $16$ | $5$ | $15000$ |  |\n| $17$ | $5$ | $30000$ |  |\n\n对于 $100\\%$ 的数据，$n\\le30000$。每个测试中的 $q$ 值都保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。\n\n保证在交互库给出的每个答案之后，都一定存在一个辐射水平值，满足所有先前查询的答案（除了那次错误的）。交互库可以调整自己的行为，包括选择哪个已知答案是错误的，以及根据解决方案程序提出的查询来确定正在研究的黑洞的辐射水平。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 黑洞 (Day 1)", "background": "翻译自 [ROI 2019 D1T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n**这是一道 IO 交互题**。\n\n科学家计划测量一系列黑洞的辐射等级。黑洞的辐射等级由一个从 $1$ 到 $n$ 的整数表示。为了测量每个黑洞的辐射等级，使用一个特殊的轨道探测器，上面安装有辐射传感器。安装在探测器上的传感器可以回答以下查询：根据给定的 $x$ 值，确定辐射等级是否大于或等于 $x$。不幸的是，由于软件错误，传感器的回复可能是错误的。不过，在第一个错误回复之后，该探测器的状态就会改变，对所有后续的查询只给出正确的回复。\n\n科学家想要通过向其导向的探测器提出尽可能少的查询来确定几个黑洞的辐射等级。", "description": "编写一个程序与模拟探测器传感器的交互库进行交互，并确定每个黑洞的辐射等级。\n\n对于每次运行的解决方案程序，必须解决 $n$ 相同的多个黑洞的问题（即，需要确认多个黑洞的辐射等级，这些黑洞的辐射等级都在 $1$ 和 $n$ 之间）。每次的黑洞数量不超过 $100$。\n\n对于每个测试点，交互库记录了 $q$ 的值，也就是允许对一个黑洞进行的最大查询次数。保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。此数字不会被告知给你的程序。如果你的程序对一个黑洞进行了超过 $q$ 个查询，则这个测试点将会返回 WA。\n\n注：在上述 WA 的情况下，该测试点可能显示为 TLE，有可能是因为交互库已经结束并返回，但程序仍在等待该查询的回复。TLE 时可以查看该测试点返回的详细信息，以确认是程序超时还是询问次数超出限制导致的。", "inputFormat": "首先输入一个数 $n$，也就是黑洞的最大辐射强度。这个数字对于本次运行中的所有黑洞是相同的。读取 $n$ 后，你的程序应与交互库进行交互并逐步确定一个或多个黑洞的辐射等级。\n\n在输出完你对一个黑洞辐射等级的回答后，程序应另外读取一行。如果需要继续对下一个黑洞进行研究，则从交互库读入的字符串为 `Correct`；如果所有的黑洞都已经研究完成，则字符串应该为 `Done`。", "outputFormat": "要进行查询，程序必须输出格式为 `? x` 的字符串，其中 $x$ 是一个正整数。作为回答，交互库将给你的程序一个字符串，要么是 `Yes`（如果传感器的回复没有出错，就代表该黑洞的辐射等级大于或等于查询中指定的 $x$ 值），要么是 `No`（如果传感器的回复没有出错，就代表该黑洞的辐射等级小于查询中指定的 $x$ 值）。\n\n如果你的程序确定了问题的答案，则它应该输出一行 `! x`，其中 $x$ 是要查找的黑洞的辐射等级。如果 $x$ 是唯一那个与不多于一个交互库的回复相冲突的辐射水平值，则该答案被视为正确的。如果给出了错误答案，程序将被强制终止，并且该测试点的结果将会变为 WA。", "hint": "### 样例解释：\n\n在第一个示例中，对于第一个黑洞，在前两次查询之后不知道传感器的答案错误在哪一个上面，因此需要进行第三个查询。\n\n在第二个示例中，展示了 $n = 3$ 的一个可能的交互情况，程序可以在 $5$ 次查询内找到答案。可以证明，在 $4$ 次查询内无法确定答案。\n\n在这两个样例中，交互库确定的 $q=30$，明显的，这两个样例都没有超出界限。\n\n请注意，交互库可能给出不同的答案，即使程序输出与样例中完全相同的查询。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $q$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $1000$ | $q=30$ |\n| $2$ | $8$ | $1000$ | $q=21$ |\n| $3$ | $6$ | $4$ |  |\n| $4$ | $9$ | $7$ |  |\n| $5$ | $5$ | $12$ |  |\n| $6$ | $6$ | $25$ |  |\n| $7$ | $4$ | $40$ |  |\n| $8$ | $5$ | $80$ |  |\n| $9$ | $5$ | $150$ |  |\n| $10$ | $8$ | $300$ |  |\n| $11$ | $7$ | $500$ |  |\n| $12$ | $5$ | $1000$ |  |\n| $13$ | $5$ | $2000$ |  |\n| $14$ | $5$ | $4000$ |  |\n| $15$ | $5$ | $8000$ |  |\n| $16$ | $5$ | $15000$ |  |\n| $17$ | $5$ | $30000$ |  |\n\n对于 $100\\%$ 的数据，$n\\le30000$。每个测试中的 $q$ 值都保证无论选择的交互程序如何回答，$q$ 个查询足以解决问题。\n\n保证在交互库给出的每个答案之后，都一定存在一个辐射水平值，满足所有先前查询的答案（除了那次错误的）。交互库可以调整自己的行为，包括选择哪个已知答案是错误的，以及根据解决方案程序提出的查询来确定正在研究的黑洞的辐射水平。", "locale": "zh-CN"}}}
{"pid": "P11084", "type": "P", "difficulty": 4, "samples": [["10\n0100100000", "7\n0001000"], ["3\n111", "3\n111"], ["7\n0100101", "5\n01010"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 灯串 (Day 2)", "background": "翻译自 [ROI 2019 D2T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n对于一个由 `0` 和 `1` 组成的序列，“美丽的”的定义是：如果这个序列的第一个 `1` 前面 `0` 的数量和最后一个 `1` 后面 `0` 的数量相等，且每两个 `1` 之间的 `0` 的数量也等于这个数值，则称这个序列是“美丽的”。\n\n例如，`0101010` 和 `11111` 是“美丽的”，而 `10101` 和 `010100001000001010000` 就不是“美丽的”。", "description": "给定一串由 `0` 和 `1` 组成的序列（保证 `1` 的数量不为 $0$），需要删除其中任意位置的一些元素，使得剩下的序列构成最长的美丽的串。", "inputFormat": "第一行输入一个数 $n$，表示这个序列的长度。\n\n第二行输入一个字符串 $s$，只由 `0` 和 `1` 组成，表示这个序列。", "outputFormat": "第一行输出一个数 $m$，表示删除后剩下的序列长度。\n\n第二行输出通过删除操作后剩下的这个“美丽的”序列。\n\n如果有多种方案，输出任意一种。**注意：全为 `0` 的串不是“美丽的”**。", "hint": "设原串有 $k$ 个 $1$。\n\n| 子任务 | 分值 | $1\\le n\\le$ | $1\\le k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $15$ | $n$ |\n| $2$ | $20$ | $1000$ | $2$ |\n| $3$ | $20$ | $1000$ | $15$ |\n| $4$ | $16$ | $1000$ | $n$ |\n| $5$ | $10$ | $100000$ | $50$ |\n| $6$ | $14$ | $500000$ | $n$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 灯串 (Day 2)", "background": "翻译自 [ROI 2019 D2T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n对于一个由 `0` 和 `1` 组成的序列，“美丽的”的定义是：如果这个序列的第一个 `1` 前面 `0` 的数量和最后一个 `1` 后面 `0` 的数量相等，且每两个 `1` 之间的 `0` 的数量也等于这个数值，则称这个序列是“美丽的”。\n\n例如，`0101010` 和 `11111` 是“美丽的”，而 `10101` 和 `010100001000001010000` 就不是“美丽的”。", "description": "给定一串由 `0` 和 `1` 组成的序列（保证 `1` 的数量不为 $0$），需要删除其中任意位置的一些元素，使得剩下的序列构成最长的美丽的串。", "inputFormat": "第一行输入一个数 $n$，表示这个序列的长度。\n\n第二行输入一个字符串 $s$，只由 `0` 和 `1` 组成，表示这个序列。", "outputFormat": "第一行输出一个数 $m$，表示删除后剩下的序列长度。\n\n第二行输出通过删除操作后剩下的这个“美丽的”序列。\n\n如果有多种方案，输出任意一种。**注意：全为 `0` 的串不是“美丽的”**。", "hint": "设原串有 $k$ 个 $1$。\n\n| 子任务 | 分值 | $1\\le n\\le$ | $1\\le k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $15$ | $n$ |\n| $2$ | $20$ | $1000$ | $2$ |\n| $3$ | $20$ | $1000$ | $15$ |\n| $4$ | $16$ | $1000$ | $n$ |\n| $5$ | $10$ | $100000$ | $50$ |\n| $6$ | $14$ | $500000$ | $n$ |", "locale": "zh-CN"}}}
{"pid": "P11085", "type": "P", "difficulty": 6, "samples": [["1 2 2\n5 25\n50 90\n60 5 10 40", "10"], ["2 3 3\n200 400\n300 500\n100 600\n300 330 440 40 30 300\n150 250 350 450 550 300", "130"], ["1 3 4\n10 100\n200 200\n10 100\n300 1000\n5 10 20 15 200 90", "105"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 学生座位 (Day 2)", "background": "翻译自 [ROI 2019 D2T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n学校要购买 $n$ 张双人桌用于新的功能教室。这些桌子有 $k$ 种类型，每种类型具有不同的尺寸。第 $i$ 种类型的桌子适合身高范围在 $L_i$ 到 $R_i$ 之间（包括边界）的学生坐，而对于其他学生来说，坐在这种桌子后是不舒服的，不舒服程度定义为学生身高与桌子适合的身高范围边界（即 $L_i$ 或 $R_i$）的差的绝对值。如果桌子适合学生，不舒服程度为零。\n\n例如，如果 $L_i = 100,R_i = 120$，那么身高为 $80$ 的学生的不舒服程度为 $20$，身高为 $130$ 的学生的不舒服程度为 $10$，而身高为 $114$ 的学生的不舒服程度为 $0$。\n\n$m$ 个班的学生将轮流进入功能教室上课，每个班级恰好有 $2n$ 名学生。购买的桌子将被摆放在教室中，每张桌子坐两名学生。", "description": "已知每个学生在每个班中的身高，需要购买 $n$ 张桌子并安排每个班的学生的座位，以使得在教室中学习的所有学生的总不舒服程度最小。\n\n请编写一个程序，根据每个桌子类型的信息和每个班中学生的身高值，确定通过购买桌子并以最优方式安排学生座位所能实现的不舒服程度之和的最小值。", "inputFormat": "输入的第一行包含三个整数 $m,n,k$，分别表示将在教室中学习的班级数量、需要购买的桌子数量以及不同桌子类型的数量。\n\n接下来的 $k$ 行中，每行包含两个整数 $L_i$ 和 $R_i$，表示适合第 $i$ 种桌子的学生身高范围。\n\n接下来的 $m$ 行中，每行包含 $2n$ 个整数 $h_1,h_2,\\dots,h_{2n}$，表示这个班中每个学生的身高。", "outputFormat": "输出一个数 $P$，表示通过购买桌子并以最优方式安排学生座位后，能实现的不舒服程度之和的最小值。", "hint": "样例 $1$ 解释：在第一个样例中，只有一个班在教室里上课。应该购买每种类型的桌子一张，然后将身高为 $5$ 和 $10$ 的学生安排坐在第一种类型的桌子上，将身高为 $40$ 和 $60$ 的学生安排坐在第二种类型的桌子上。这样，只有身高为 $40$ 的学生会感到不舒服，不舒服程度为 $10$。\n\n| 子任务 | 分值 | 特殊性质 $m$ | 特殊性质 $n$ | 特殊性质 $k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le100$ | $=1$ | $\\le50$ |  |\n| $2$ | $10$ | $=1$ | $\\le1000$ | $\\le50$ |  |\n| $3$ | $10$ | $\\le50$ | $\\le5$ | $\\le3$ |  |\n| $4$ | $10$ | $\\le100$ | $\\le1000$ | $=2$ |  |\n| $5$ | $10$ | $\\le100$ | $\\le1000$ | $\\le3$ |  |\n| $6$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ | $L_i=R_i$ |\n| $7$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ |  |\n| $8$ | $8$ |  |  |  | $L_i=R_i$ |\n| $9$ | $8$ | $\\le100$ |  |  |  |\n| $10$ | $10$ |  |$\\le100$ |  |  |\n| $11$ | $4$ |  |  |  |  |\n\n对于 $100\\%$ 的数据，$1 \\le m\\times n \\le 200000,2 \\le k \\le 200000,1 \\le L_i \\le R_i \\le 10^9,1 \\le h_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 学生座位 (Day 2)", "background": "翻译自 [ROI 2019 D2T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n学校要购买 $n$ 张双人桌用于新的功能教室。这些桌子有 $k$ 种类型，每种类型具有不同的尺寸。第 $i$ 种类型的桌子适合身高范围在 $L_i$ 到 $R_i$ 之间（包括边界）的学生坐，而对于其他学生来说，坐在这种桌子后是不舒服的，不舒服程度定义为学生身高与桌子适合的身高范围边界（即 $L_i$ 或 $R_i$）的差的绝对值。如果桌子适合学生，不舒服程度为零。\n\n例如，如果 $L_i = 100,R_i = 120$，那么身高为 $80$ 的学生的不舒服程度为 $20$，身高为 $130$ 的学生的不舒服程度为 $10$，而身高为 $114$ 的学生的不舒服程度为 $0$。\n\n$m$ 个班的学生将轮流进入功能教室上课，每个班级恰好有 $2n$ 名学生。购买的桌子将被摆放在教室中，每张桌子坐两名学生。", "description": "已知每个学生在每个班中的身高，需要购买 $n$ 张桌子并安排每个班的学生的座位，以使得在教室中学习的所有学生的总不舒服程度最小。\n\n请编写一个程序，根据每个桌子类型的信息和每个班中学生的身高值，确定通过购买桌子并以最优方式安排学生座位所能实现的不舒服程度之和的最小值。", "inputFormat": "输入的第一行包含三个整数 $m,n,k$，分别表示将在教室中学习的班级数量、需要购买的桌子数量以及不同桌子类型的数量。\n\n接下来的 $k$ 行中，每行包含两个整数 $L_i$ 和 $R_i$，表示适合第 $i$ 种桌子的学生身高范围。\n\n接下来的 $m$ 行中，每行包含 $2n$ 个整数 $h_1,h_2,\\dots,h_{2n}$，表示这个班中每个学生的身高。", "outputFormat": "输出一个数 $P$，表示通过购买桌子并以最优方式安排学生座位后，能实现的不舒服程度之和的最小值。", "hint": "样例 $1$ 解释：在第一个样例中，只有一个班在教室里上课。应该购买每种类型的桌子一张，然后将身高为 $5$ 和 $10$ 的学生安排坐在第一种类型的桌子上，将身高为 $40$ 和 $60$ 的学生安排坐在第二种类型的桌子上。这样，只有身高为 $40$ 的学生会感到不舒服，不舒服程度为 $10$。\n\n| 子任务 | 分值 | 特殊性质 $m$ | 特殊性质 $n$ | 特殊性质 $k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $\\le100$ | $=1$ | $\\le50$ |  |\n| $2$ | $10$ | $=1$ | $\\le1000$ | $\\le50$ |  |\n| $3$ | $10$ | $\\le50$ | $\\le5$ | $\\le3$ |  |\n| $4$ | $10$ | $\\le100$ | $\\le1000$ | $=2$ |  |\n| $5$ | $10$ | $\\le100$ | $\\le1000$ | $\\le3$ |  |\n| $6$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ | $L_i=R_i$ |\n| $7$ | $10$ | $\\le100$ | $\\le1000$ | $\\le50$ |  |\n| $8$ | $8$ |  |  |  | $L_i=R_i$ |\n| $9$ | $8$ | $\\le100$ |  |  |  |\n| $10$ | $10$ |  |$\\le100$ |  |  |\n| $11$ | $4$ |  |  |  |  |\n\n对于 $100\\%$ 的数据，$1 \\le m\\times n \\le 200000,2 \\le k \\le 200000,1 \\le L_i \\le R_i \\le 10^9,1 \\le h_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11086", "type": "P", "difficulty": 6, "samples": [["3 3 3\n2 3 -2\n3 1 3\n1 2 1", "998244352"], ["2 4 3\n1 2 2\n2 4 -3\n2 1 1", "998244348"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 机器人高尔夫 (Day 2)", "background": "翻译自 [ROI 2019 D2T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n在“机器人奥林匹克运动会”中，有一个“机器人高尔夫比赛”。比赛场地是一个由 $n \\times m$ 个单位方块组成的矩形。场地的行用数字 $1$ 到 $n$ 编号，列用数字 $1$ 到 $m$ 编号。每个单位方块由两个正整数 $r$ 和 $c$ 表示，分别代表它所在的行和列的编号。\n\n两个机器人轮流在场地上移动一个特殊的“高尔夫球”，场地的某些方块上可能有洞。如果“高尔夫球”位于方块 $(r, c)$ 上，执行当前操作的机器人可以将其移动到方块 $(r + 1, c)$ 或方块 $(r, c + 1)$。如果“高尔夫球”位于最后一行或最后一列，机器人可以将其移动到场地的边界外。游戏会在以下两种情况下结束：“高尔夫球”超出了场地的边界，或者“高尔夫球”落到一个洞里。\n\n每个洞对应一个整数 $v_i$，表示它的价值。游戏的结果等于游戏结束时“高尔夫球”所在洞的价值，如果“高尔夫球”超出了场地的边界，则结果为 $0$。先手机器人的目标是最小化游戏结果，而后手机器人的目标是最大化游戏结果。", "description": "假设 $g(r, c)$ 表示当“高尔夫球”初始位于方块 $(r, c)$ 时，先手机器人不论对手怎么行动都可以达到的最小游戏结果。由于比赛开始前不知道初始方块，机器人开发者想要计算出所有格子对应的 $g(r, c)$ 的总和，即 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)$。", "inputFormat": "第一行包含三个整数 $n,m,k$，分别表示行数、列数和洞的个数。\n\n接下来的 $k$ 行，每行包含三个整数 $r_i,c_i,v_i$，分别表示洞所在的行、列编号和洞的价值。没有两个洞会位于同一个方块上。", "outputFormat": "输出一个整数，表示 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)\\bmod998244353$。注意：输出的结果应该在 $0$ 和 $998244352$ 之间，而不是在 $-998244352$ 和 $998244352$ 之间。", "hint": "### 样例解释：\n\n第一个样例中，所有方格的 $g(r,c)$ 如下（灰色的格子有洞）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/389eac6h.png)\n\n总结果求和为：$1 + 1 - 2 + 0 - 2 - 2 + 3 + 0 + 0 = -1$。答案为 $(-1) \\bmod 998 244 353 = (-1 + 998 244 353) = 998 244 352$。\n\n第二个样例中，所有方格的 $g(r,c)$ 如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl8p4qbc.png)\n\n总结果求和为：$1 + 2 + 0 - 3 + 1 + 0 - 3 - 3 = -5$。答案为 $(-5) \\bmod 998 244 353 = 998 244 348$。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n,m,k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n,m\\le1000$ |  |\n| $2$ | $14$ | $n\\le5,m\\le10^9$ |  |\n| $3$ | $14$ | $n,m\\le100000,k=n+m-1$ | A |\n| $4$ | $10$ |  | B |\n| $5$ | $6$ | $n,m\\le100000$ | C |\n| $6$ | $6$ |  | C |\n| $7$ | $10$ | $n,m\\le100000$ |  |\n| $8$ | $10$ | $k\\le1000$ |  |\n| $9$ | $10$ |  |  |\n\n特殊性质 A：对于任意 $i$，$r_i=n$ 或 $c_i=m$。\n\n特殊性质 B：对于任意 $i$，$r_i\\ge n-1000$ 且 $c_i\\ge m-1000$。\n\n特殊性质 C：对于任意 $i$，$v_i=1$。\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^9,1\\le k\\le\\min(n\\times m,10^5),1\\le r_i\\le n,1\\le c_i\\le m,|v_i|\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 机器人高尔夫 (Day 2)", "background": "翻译自 [ROI 2019 D2T3](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n在“机器人奥林匹克运动会”中，有一个“机器人高尔夫比赛”。比赛场地是一个由 $n \\times m$ 个单位方块组成的矩形。场地的行用数字 $1$ 到 $n$ 编号，列用数字 $1$ 到 $m$ 编号。每个单位方块由两个正整数 $r$ 和 $c$ 表示，分别代表它所在的行和列的编号。\n\n两个机器人轮流在场地上移动一个特殊的“高尔夫球”，场地的某些方块上可能有洞。如果“高尔夫球”位于方块 $(r, c)$ 上，执行当前操作的机器人可以将其移动到方块 $(r + 1, c)$ 或方块 $(r, c + 1)$。如果“高尔夫球”位于最后一行或最后一列，机器人可以将其移动到场地的边界外。游戏会在以下两种情况下结束：“高尔夫球”超出了场地的边界，或者“高尔夫球”落到一个洞里。\n\n每个洞对应一个整数 $v_i$，表示它的价值。游戏的结果等于游戏结束时“高尔夫球”所在洞的价值，如果“高尔夫球”超出了场地的边界，则结果为 $0$。先手机器人的目标是最小化游戏结果，而后手机器人的目标是最大化游戏结果。", "description": "假设 $g(r, c)$ 表示当“高尔夫球”初始位于方块 $(r, c)$ 时，先手机器人不论对手怎么行动都可以达到的最小游戏结果。由于比赛开始前不知道初始方块，机器人开发者想要计算出所有格子对应的 $g(r, c)$ 的总和，即 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)$。", "inputFormat": "第一行包含三个整数 $n,m,k$，分别表示行数、列数和洞的个数。\n\n接下来的 $k$ 行，每行包含三个整数 $r_i,c_i,v_i$，分别表示洞所在的行、列编号和洞的价值。没有两个洞会位于同一个方块上。", "outputFormat": "输出一个整数，表示 $\\sum\\limits_{i=1}^{n}\\sum\\limits_{j=1}^{m}g(i,j)\\bmod998244353$。注意：输出的结果应该在 $0$ 和 $998244352$ 之间，而不是在 $-998244352$ 和 $998244352$ 之间。", "hint": "### 样例解释：\n\n第一个样例中，所有方格的 $g(r,c)$ 如下（灰色的格子有洞）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/389eac6h.png)\n\n总结果求和为：$1 + 1 - 2 + 0 - 2 - 2 + 3 + 0 + 0 = -1$。答案为 $(-1) \\bmod 998 244 353 = (-1 + 998 244 353) = 998 244 352$。\n\n第二个样例中，所有方格的 $g(r,c)$ 如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl8p4qbc.png)\n\n总结果求和为：$1 + 2 + 0 - 3 + 1 + 0 - 3 - 3 = -5$。答案为 $(-5) \\bmod 998 244 353 = 998 244 348$。\n\n### 数据范围：\n\n| 子任务 | 分值 | $n,m,k$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n,m\\le1000$ |  |\n| $2$ | $14$ | $n\\le5,m\\le10^9$ |  |\n| $3$ | $14$ | $n,m\\le100000,k=n+m-1$ | A |\n| $4$ | $10$ |  | B |\n| $5$ | $6$ | $n,m\\le100000$ | C |\n| $6$ | $6$ |  | C |\n| $7$ | $10$ | $n,m\\le100000$ |  |\n| $8$ | $10$ | $k\\le1000$ |  |\n| $9$ | $10$ |  |  |\n\n特殊性质 A：对于任意 $i$，$r_i=n$ 或 $c_i=m$。\n\n特殊性质 B：对于任意 $i$，$r_i\\ge n-1000$ 且 $c_i\\ge m-1000$。\n\n特殊性质 C：对于任意 $i$，$v_i=1$。\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^9,1\\le k\\le\\min(n\\times m,10^5),1\\le r_i\\le n,1\\le c_i\\le m,|v_i|\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P11087", "type": "P", "difficulty": 7, "samples": [["3 4\naba\n1 ab\n2 1 3\n2 3 3\n2 1 8", "6"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 考古 (Day 2)", "background": "翻译自 [ROI 2019 D2T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n三〇一九年，在对古城市 Innopolis 进行挖掘时，考古学家发现了一件古代遗物——一个硬盘，里面存有一个文件，据推测，该文件包含了所有 ROI 题目的文本。\n\n经过对文件的研究，发现其中的信息被编码成了一个由英文字母组成的字符串 $t$。题目文本相当长，并且包含了许多重复的内容，因此文件以压缩形式存储在硬盘上。解压缩文件使用以下算法：\n\n在解压缩过程中，将生成一个由小写英文字母组成的字符串 $t$。初始时，字符串 $t$ 为空。压缩文件包含 $n$ 个块，必须按顺序处理每个块。每个块具有两种类型之一。\n- 块 `1 w`，其中 $w$ 是一个字符串。处理此类块时，在字符串 $t$ 的末尾添加字符串 $w$。\n- 块 `2 pos len`，其中 $pos$ 和 $len$ 是正整数。假设字符串 $t$ 中的字符从 $1$ 开始编号。处理此类块时，将字符串 $t$ 中从位置 $pos$ 开始的 $len$ 个连续字符依次添加到字符串 $t$ 的末尾。如果 $len$ 的值足够大，刚刚添加的一些字符可能会在处理同一块时再次使用。", "description": "考古学家们决定统计一个算法在 ROI 中考察的次数。为此，他们构建了一个由小写英文字母组成的字符串 $p$，并希望找出这个字符串在解压缩后的字符串 $t$ 中的出现次数。\n\n如果长度为 $m$ 的字符串 $p$ 作为子串从位置 $i$ 开始出现，那么从第 $i$ 个字符开始的连续 $m$ 个字符串将是字符串 $p$。例如，字符串 `aba` 在字符串 `ababaaba` 中作为子串出现三次，分别从第 $1,3,6$ 个字符开始。\n\n请编写一个程序，确定给定字符串 $p$ 在解压缩后的字符串 $t$ 中出现的次数。", "inputFormat": "第一行包含两个自然数 $m$ 和 $n$，分别表示字符串 $p$ 的长度和压缩文本中的块数。\n\n第二行包含一个非空字符串 $p$，由小写英文字母组成。\n\n接下来的 $n$ 行，包含按照题目背景的格式给出的块的描述。", "outputFormat": "输出一个整数，表示字符串 $p$ 在文本中出现的次数。", "hint": "### 样例解释：\n\n$t$ 的解压缩过程是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/62t2xa29.png)\n\n`aba` 在 `ababaabaababaaba` 中出现了 $6$ 次。\n\n### 数据范围：\n\n设将前 $i$ 块解压缩后字符串的长度为 $L_i$，第 $i$ 块的类型为 $type_i$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ | $L_n\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $2000$ | $1$ | $1000$ |  |\n| $2$ | $10$ | $10^5$ | $2000$ | $10^6$ |  |\n| $3$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $\\forall i>1,type_i=2,pos_i=1,L_1\\mid len_i$ |\n| $4$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=L_{i-1}$ |\n| $5$ | $10$ | $20$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $6$ | $4$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $7$ | $10$ | $20$ | $20$ | $10^{10}$ | $p$ 只含字母 `a`，$pos_i+len_i-1\\le L_{i-1}$ |\n| $8$ | $6$ | $20$ | $20$ | $10^{10}$ | $pos_i+len_i-1\\le L_{i-1}$ |\n| $9$ | $2$ | $1$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $10$ | $4$ | $20$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $11$ | $5$ | $20$ | $2000$ | $10^{10}$ |  |\n| $12$ | $14$ | $10^5$ | $2000$ | $10^{10}$ |  |\n| $13$ | $9$ | $2\\times10^5$ | $10000$ | $10^{15}$ |  |\n\n对于 $100\\%$ 的数据，$\\sum w\\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 考古 (Day 2)", "background": "翻译自 [ROI 2019 D2T4](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day2.pdf)。\n\n三〇一九年，在对古城市 Innopolis 进行挖掘时，考古学家发现了一件古代遗物——一个硬盘，里面存有一个文件，据推测，该文件包含了所有 ROI 题目的文本。\n\n经过对文件的研究，发现其中的信息被编码成了一个由英文字母组成的字符串 $t$。题目文本相当长，并且包含了许多重复的内容，因此文件以压缩形式存储在硬盘上。解压缩文件使用以下算法：\n\n在解压缩过程中，将生成一个由小写英文字母组成的字符串 $t$。初始时，字符串 $t$ 为空。压缩文件包含 $n$ 个块，必须按顺序处理每个块。每个块具有两种类型之一。\n- 块 `1 w`，其中 $w$ 是一个字符串。处理此类块时，在字符串 $t$ 的末尾添加字符串 $w$。\n- 块 `2 pos len`，其中 $pos$ 和 $len$ 是正整数。假设字符串 $t$ 中的字符从 $1$ 开始编号。处理此类块时，将字符串 $t$ 中从位置 $pos$ 开始的 $len$ 个连续字符依次添加到字符串 $t$ 的末尾。如果 $len$ 的值足够大，刚刚添加的一些字符可能会在处理同一块时再次使用。", "description": "考古学家们决定统计一个算法在 ROI 中考察的次数。为此，他们构建了一个由小写英文字母组成的字符串 $p$，并希望找出这个字符串在解压缩后的字符串 $t$ 中的出现次数。\n\n如果长度为 $m$ 的字符串 $p$ 作为子串从位置 $i$ 开始出现，那么从第 $i$ 个字符开始的连续 $m$ 个字符串将是字符串 $p$。例如，字符串 `aba` 在字符串 `ababaaba` 中作为子串出现三次，分别从第 $1,3,6$ 个字符开始。\n\n请编写一个程序，确定给定字符串 $p$ 在解压缩后的字符串 $t$ 中出现的次数。", "inputFormat": "第一行包含两个自然数 $m$ 和 $n$，分别表示字符串 $p$ 的长度和压缩文本中的块数。\n\n第二行包含一个非空字符串 $p$，由小写英文字母组成。\n\n接下来的 $n$ 行，包含按照题目背景的格式给出的块的描述。", "outputFormat": "输出一个整数，表示字符串 $p$ 在文本中出现的次数。", "hint": "### 样例解释：\n\n$t$ 的解压缩过程是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/62t2xa29.png)\n\n`aba` 在 `ababaabaababaaba` 中出现了 $6$ 次。\n\n### 数据范围：\n\n设将前 $i$ 块解压缩后字符串的长度为 $L_i$，第 $i$ 块的类型为 $type_i$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ | $L_n\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $2000$ | $1$ | $1000$ |  |\n| $2$ | $10$ | $10^5$ | $2000$ | $10^6$ |  |\n| $3$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $\\forall i>1,type_i=2,pos_i=1,L_1\\mid len_i$ |\n| $4$ | $10$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=L_{i-1}$ |\n| $5$ | $10$ | $20$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $6$ | $4$ | $2000$ | $2000$ | $10^{10}$ | $pos_i=1,len_i\\le10^7$ |\n| $7$ | $10$ | $20$ | $20$ | $10^{10}$ | $p$ 只含字母 `a`，$pos_i+len_i-1\\le L_{i-1}$ |\n| $8$ | $6$ | $20$ | $20$ | $10^{10}$ | $pos_i+len_i-1\\le L_{i-1}$ |\n| $9$ | $2$ | $1$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $10$ | $4$ | $20$ | $2000$ | $10^{10}$ | $p$ 只含字母 `a` |\n| $11$ | $5$ | $20$ | $2000$ | $10^{10}$ |  |\n| $12$ | $14$ | $10^5$ | $2000$ | $10^{10}$ |  |\n| $13$ | $9$ | $2\\times10^5$ | $10000$ | $10^{15}$ |  |\n\n对于 $100\\%$ 的数据，$\\sum w\\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P11088", "type": "P", "difficulty": 5, "samples": [["1 1\na\n1 1 a", "1"], ["3 4\nglhf\n3 1 r 3 h 4 i\n3 1 r 2 l 3 o\n2 1 g 4 f", "3 1 2"], ["2 2\naa\n2 1 a 2 b\n2 1 b 2 a", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 穿孔卡片 (Day 1)", "background": "翻译自 [ROI 2021 D1T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "穿孔卡片是一条由 $m$ 个小方格组成的带状物，每个小方格要么包含一个小写英文字母，要么是一个孔洞。\n\n有 $n$ 张这样的穿孔卡片。给定一个长度为 $m$ 的字符串 $s$，将所有的穿孔卡片按照一定顺序排列，使得将它们从上到下依次叠放后可以变成 $s$。换句话说，要确定穿孔卡片的顺序，它们将叠放在一起，并考虑任意位置 $i(1 \\le i \\le m)$，字符串 $s$ 的第 $i$ 个字符必须与第 $i$ 个位置上第一个包含字母的那张穿孔卡片上的字符相同。\n\n如果对于某个 $i$，不存在任何一个穿孔卡片上的这个位置有字母，那么就无法得到目标字符串 $s$。", "inputFormat": "第一行包含两个整数 $n,m(1 \\le n,m \\le 10^5)$，分别表示穿孔卡片的数量和格子的数量。\n\n第二行包含一个长度为 $m$ 的字符串 $s$，由小写英文字母组成。\n\n接下来的 $n$ 行中，每行输入一张穿孔卡片的信息。\n\n先输入一个整数 $k_i(0\\le k_i\\le m)$，表示该穿孔卡片上有多少个带字母的位置。保证所有 $k_i$ 的总和不超过 $2\\times 10^5$。\n\n然后是该穿孔卡片上字母的描述：对于每个整数 $j(1 \\le j \\le k_i)$，有一个整数 $a_{i,j}$ 和一个字符 $c_{i,j}$（$1 \\le a_{i,j} \\le m$，$c_{i,j}$ 是一个小写英文字母），表示位置 $a_{i,j}$ 上的字符是 $c_{i,j}$。其余位置都是孔洞。保证每张穿孔卡片上的带字母的位置按升序排列，即 $\\forall1 \\le j < k_,a_{i,j} < a_{i,{j+1}}$。", "outputFormat": "如果存在一种正确排列穿孔卡片的方法，输出 $n$ 个整数 $p_1,p_2,\\dots,p_n(1 \\le pi \\le n)$，其中 $p_1$ 表示最上面的卡片编号，$p_2$ 表示第二张卡片编号，依此类推，$p_n$ 表示最下面的卡片编号。\n\n如果存在多个可能的答案，可以输出任意一个。如果不存在一种正确排列穿孔卡片的方法，输出 `-1`。", "hint": "样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxrg57pf.png)\n\n数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $8$ | $100$ |\n| $2$ | $35$ | $100$ | $100$ |\n| $3$ | $50$ | $10^5$ | $10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 穿孔卡片 (Day 1)", "background": "翻译自 [ROI 2021 D1T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "穿孔卡片是一条由 $m$ 个小方格组成的带状物，每个小方格要么包含一个小写英文字母，要么是一个孔洞。\n\n有 $n$ 张这样的穿孔卡片。给定一个长度为 $m$ 的字符串 $s$，将所有的穿孔卡片按照一定顺序排列，使得将它们从上到下依次叠放后可以变成 $s$。换句话说，要确定穿孔卡片的顺序，它们将叠放在一起，并考虑任意位置 $i(1 \\le i \\le m)$，字符串 $s$ 的第 $i$ 个字符必须与第 $i$ 个位置上第一个包含字母的那张穿孔卡片上的字符相同。\n\n如果对于某个 $i$，不存在任何一个穿孔卡片上的这个位置有字母，那么就无法得到目标字符串 $s$。", "inputFormat": "第一行包含两个整数 $n,m(1 \\le n,m \\le 10^5)$，分别表示穿孔卡片的数量和格子的数量。\n\n第二行包含一个长度为 $m$ 的字符串 $s$，由小写英文字母组成。\n\n接下来的 $n$ 行中，每行输入一张穿孔卡片的信息。\n\n先输入一个整数 $k_i(0\\le k_i\\le m)$，表示该穿孔卡片上有多少个带字母的位置。保证所有 $k_i$ 的总和不超过 $2\\times 10^5$。\n\n然后是该穿孔卡片上字母的描述：对于每个整数 $j(1 \\le j \\le k_i)$，有一个整数 $a_{i,j}$ 和一个字符 $c_{i,j}$（$1 \\le a_{i,j} \\le m$，$c_{i,j}$ 是一个小写英文字母），表示位置 $a_{i,j}$ 上的字符是 $c_{i,j}$。其余位置都是孔洞。保证每张穿孔卡片上的带字母的位置按升序排列，即 $\\forall1 \\le j < k_,a_{i,j} < a_{i,{j+1}}$。", "outputFormat": "如果存在一种正确排列穿孔卡片的方法，输出 $n$ 个整数 $p_1,p_2,\\dots,p_n(1 \\le pi \\le n)$，其中 $p_1$ 表示最上面的卡片编号，$p_2$ 表示第二张卡片编号，依此类推，$p_n$ 表示最下面的卡片编号。\n\n如果存在多个可能的答案，可以输出任意一个。如果不存在一种正确排列穿孔卡片的方法，输出 `-1`。", "hint": "样例 $2$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxrg57pf.png)\n\n数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $8$ | $100$ |\n| $2$ | $35$ | $100$ | $100$ |\n| $3$ | $50$ | $10^5$ | $10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11089", "type": "P", "difficulty": 6, "samples": [["3 7\n010\n001\n100\nabacaba", "aac"], ["3 5\n010\n001\n100\nbcacb", "bacb"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 手机游戏 (Day 1)", "background": "翻译自 [ROI 2021 D1T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "给定一个由 $n$ 个水晶组成的序列，从左到右排列。每个水晶属于 $k$ 种类型之一，用前 $k$ 个英文字母表示。因此，水晶序列可以用一串英文字母表示。\n\n在游戏的一步中，可以从序列中移除一个水晶。玩家的目标是通过用允许的删除方式，得到字典序最小的字符串。\n\n允许的删除方式由大小为 $k\\times k$ 的表 $A$ 定义，表中的元素只包含 $0$ 和 $1$。如果 $A_{i,j} = 1$，则表示当前面紧邻它的水晶是类型 $i$ 时，允许删除类型 $j$ 的水晶。这些操作可以按任意顺序执行。\n\n字符串 $x$ 在字典序上小于字符串 $y$，需要满足以下条件之一：\n- 存在一个位置 $m$，在两个字符串中都存在，且在该位置之前，两个字符串的字符是相同的，但是 $x$ 的第 $m$ 个字符小于 $y$ 的第 $m$ 个字符，\n- 字符串 $x$ 是字符串 $y$ 的严格前缀（即从字符串 $y$ 末尾删除一个或多个字符得到）。\n\n举个例子，`ccf` 的字典序小于 `cff`，因为 `ccf` 的第 $2$ 位（`c`）小于 `cff` 的第 $2$ 位（`f`）；而 `noi` 的字典序小于 `noip`，因为 `noi` 是 `noip` 的严格前缀。", "inputFormat": "第一行给出两个整数 $k$ 和 $n$（$1 \\le k \\le 26,1 \\le n \\le 500000$），分别表示水晶的种类数量和初始水晶序列的长度。\n\n接下来的 $k$ 行给出表 $A$，第 $i$ 行包含 $k$ 个字符，都是 $0$ 或 $1$。第 $i$ 行第 $j$ 列的字符为 $A_{ij}$。\n\n最后一行是由 $n$ 个小写英文字母组成的字符串，表示初始水晶序列。保证字符串中只包含前 $k$ 个英文字母（如前七个英文字母分别是 `a`，`b`，`c`，`d`，`e`，`f`，`g`），第 $i$ 个字母代表第 $i$ 种类型的水晶。", "outputFormat": "输出可以通过操作得到的字典顺序最小的字符串。", "hint": "### 样例解释：\n\n这两个样例的 $A$ 是相同的，它们都只允许这三种类型的删除（下划线的是它的前面一个字符，删除线的是被删除的字符）：$\\underline{\\text{a}}\\xcancel{\\text{b}},\\underline{\\text{b}}\\xcancel{\\text{c}},\\underline{\\text{c}}\\xcancel{\\text{a}}$。\n\n样例 $1$ 中可以这样删除：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hpls8z9t.png)\n\n样例 $2$ 中可以这样删除：\n\n- $\\text{bcacb}$\n- $\\underline{\\text{b}}\\xcancel{\\text{c}}\\text{acb}$\n- $\\text{bacb}$\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $20$ | $26$ |\n| $2$ | $12$ | $50$ | $5$ |\n| $3$ | $16$ | $300$ | $5$ |\n| $4$ | $17$ | $500$ | $26$ |\n| $5$ | $10$ | $2000$ | $26$ |\n| $6$ | $9$ | $10000$ | $26$ |\n| $7$ | $8$ | $100000$ | $26$ |\n| $8$ | $11$ | $500000$ | $2$ |\n| $9$ | $7$ | $500000$ | $26$ |\n\n对于 $100\\%$ 的数据，$n\\le500000$，$k\\le26$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 手机游戏 (Day 1)", "background": "翻译自 [ROI 2021 D1T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。", "description": "给定一个由 $n$ 个水晶组成的序列，从左到右排列。每个水晶属于 $k$ 种类型之一，用前 $k$ 个英文字母表示。因此，水晶序列可以用一串英文字母表示。\n\n在游戏的一步中，可以从序列中移除一个水晶。玩家的目标是通过用允许的删除方式，得到字典序最小的字符串。\n\n允许的删除方式由大小为 $k\\times k$ 的表 $A$ 定义，表中的元素只包含 $0$ 和 $1$。如果 $A_{i,j} = 1$，则表示当前面紧邻它的水晶是类型 $i$ 时，允许删除类型 $j$ 的水晶。这些操作可以按任意顺序执行。\n\n字符串 $x$ 在字典序上小于字符串 $y$，需要满足以下条件之一：\n- 存在一个位置 $m$，在两个字符串中都存在，且在该位置之前，两个字符串的字符是相同的，但是 $x$ 的第 $m$ 个字符小于 $y$ 的第 $m$ 个字符，\n- 字符串 $x$ 是字符串 $y$ 的严格前缀（即从字符串 $y$ 末尾删除一个或多个字符得到）。\n\n举个例子，`ccf` 的字典序小于 `cff`，因为 `ccf` 的第 $2$ 位（`c`）小于 `cff` 的第 $2$ 位（`f`）；而 `noi` 的字典序小于 `noip`，因为 `noi` 是 `noip` 的严格前缀。", "inputFormat": "第一行给出两个整数 $k$ 和 $n$（$1 \\le k \\le 26,1 \\le n \\le 500000$），分别表示水晶的种类数量和初始水晶序列的长度。\n\n接下来的 $k$ 行给出表 $A$，第 $i$ 行包含 $k$ 个字符，都是 $0$ 或 $1$。第 $i$ 行第 $j$ 列的字符为 $A_{ij}$。\n\n最后一行是由 $n$ 个小写英文字母组成的字符串，表示初始水晶序列。保证字符串中只包含前 $k$ 个英文字母（如前七个英文字母分别是 `a`，`b`，`c`，`d`，`e`，`f`，`g`），第 $i$ 个字母代表第 $i$ 种类型的水晶。", "outputFormat": "输出可以通过操作得到的字典顺序最小的字符串。", "hint": "### 样例解释：\n\n这两个样例的 $A$ 是相同的，它们都只允许这三种类型的删除（下划线的是它的前面一个字符，删除线的是被删除的字符）：$\\underline{\\text{a}}\\xcancel{\\text{b}},\\underline{\\text{b}}\\xcancel{\\text{c}},\\underline{\\text{c}}\\xcancel{\\text{a}}$。\n\n样例 $1$ 中可以这样删除：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hpls8z9t.png)\n\n样例 $2$ 中可以这样删除：\n\n- $\\text{bcacb}$\n- $\\underline{\\text{b}}\\xcancel{\\text{c}}\\text{acb}$\n- $\\text{bacb}$\n\n### 数据范围：\n\n| 子任务 | 分值 | $n\\le$ | $k\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $20$ | $26$ |\n| $2$ | $12$ | $50$ | $5$ |\n| $3$ | $16$ | $300$ | $5$ |\n| $4$ | $17$ | $500$ | $26$ |\n| $5$ | $10$ | $2000$ | $26$ |\n| $6$ | $9$ | $10000$ | $26$ |\n| $7$ | $8$ | $100000$ | $26$ |\n| $8$ | $11$ | $500000$ | $2$ |\n| $9$ | $7$ | $500000$ | $26$ |\n\n对于 $100\\%$ 的数据，$n\\le500000$，$k\\le26$。", "locale": "zh-CN"}}}
{"pid": "P11091", "type": "P", "difficulty": 7, "samples": [["6\n1 3 5 4 6\n2 3 10 61 60\n2 2 80 20\n2 2 40 70\n1 2 3 2\n2 4 30 90 91 92", "Yes\n5 6 4\n10\n20\n40\n2 3\n30"], ["3\n1 2 2 3\n2 1 1\n2 1 2", "Yes"], ["5\n1 2 2 3\n2 1 2\n1 2 4 5\n2 1 1\n2 1 3", "No"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 工作报告 (Day 1)", "background": null, "description": "翻译自 [ROI 2021 D1T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。\n\n公司中有 $n$ 个员工，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司的创始人，其他员工都有且只有一个直接上级。公司的组织结构形成了一棵树，每个节点的父节点是它的上级，而子节点是它的下属。拥有下属的员工被称为经理，其他员工被称为顾问。公司的结构保证每个经理最多有 $8$ 个下属，包括创始人。\n\n创始人决定向投资者们汇报最近产品改进的情况。每个改进都是来自公司的某个顾问的工作成果。所有改进按照它们发生的时间顺序进行编号。\n\n每个顾问需要选择一个改进并向他的经理汇报。因此，每个顾问的报告仅包含一个改进。\n\n每个经理，包括创始人在内，需要汇总他们下属的报告，并按照报告的顺序将它们直接连续地组合起来。例如，如果第一个经理的报告包含改进 $[1, 3]$，而第二个经理的报告包含改进 $[2, 4, 10]$，那么可以得到两种组合结果：$[2, 4, 10, 1, 3]$ 或者 $[1, 3, 2, 4, 10]$，其他组合是不可能的。\n\n创始人希望以尽可能合理的方式讲述这些改进，因此他希望在他的报告中改进按照编号的升序排列。请帮助每个顾问选择要汇报的改进，并帮助每个经理选择组合下属报告的顺序，以使得创始人的报告中的改进能够按照时间顺序排列。", "inputFormat": "第一行包含一个整数 $n $（$2 \\le n \\le 100000$），表示公司的员工数量。接下来的 $n$ 行描述每个员工，每行包含以下内容之一：\n- 如果员工是经理或创始人，则以数字 $1$ 开头，接下来是数字 $k_i $（$1 \\le k_i \\le 8$），表示该经理的下属数量，然后是 $k_i$ 个不同的数字，范围在 $2$ 到 $n$，表示是其下属的员工编号。\n- 如果员工是顾问，则以数字 $2$ 开头，接下来是数字 $m_i$，表示他可以汇报的改进数量，然后是 $m_i$ 个不同的整数，范围在 $1$ 到 $100000$，表示对应改进的编号。\n\n保证每个改进都仅被一个顾问提及，即所有顾问提到的改进都是不同的。", "outputFormat": "如果无法组合报告，输出 `No`。\n\n如果能够组合报告，输出 `Yes`，然后你可以按照员工编号的顺序输出以下内容：\n- 如果员工是经理，则输出他的下属在组合报告中的顺序。\n- 如果员工是顾问，则输出他需要汇报的改进编号。\n\n注：如果不输出组合报告的方式但正确判断了是否能够组合报告，将会得到 $10\\%$ 的部分分。", "hint": "### 样例解释：\n\n在样例二中，没有输出具体的组合方法，所以只能得到部分分。正确的输出应该是这样的：\n```text\nYes\n2 3\n1\n2\n```\n在样例三中，每个顾问都只能选择那唯一的改进编号。第三位经理有两种可能的报告方式：$[1, 3]$ 或 $[3, 1]$。第一位经理有四种可能的报告方式，考虑到第三位经理的所有报告可能性：$[1, 3] + [2] = [1, 3, 2],[2] + [1, 3] = [2, 1, 3],[3, 1 ] + [2] = [3, 1, 2],[2] + [3, 1] = [2, 3, 1]$，但是在这些报告中没有一个改进是按照时间顺序排序的。\n\n### 数据范围：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mchn5bpr.png)\n\n对于 $100\\%$ 的数据，$n,\\sum m_i \\le 100 000$ 且 $\\max k_i\\le8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 工作报告 (Day 1)", "background": null, "description": "翻译自 [ROI 2021 D1T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day1.pdf)。\n\n公司中有 $n$ 个员工，编号从 $1$ 到 $n$。编号为 $1$ 的员工是公司的创始人，其他员工都有且只有一个直接上级。公司的组织结构形成了一棵树，每个节点的父节点是它的上级，而子节点是它的下属。拥有下属的员工被称为经理，其他员工被称为顾问。公司的结构保证每个经理最多有 $8$ 个下属，包括创始人。\n\n创始人决定向投资者们汇报最近产品改进的情况。每个改进都是来自公司的某个顾问的工作成果。所有改进按照它们发生的时间顺序进行编号。\n\n每个顾问需要选择一个改进并向他的经理汇报。因此，每个顾问的报告仅包含一个改进。\n\n每个经理，包括创始人在内，需要汇总他们下属的报告，并按照报告的顺序将它们直接连续地组合起来。例如，如果第一个经理的报告包含改进 $[1, 3]$，而第二个经理的报告包含改进 $[2, 4, 10]$，那么可以得到两种组合结果：$[2, 4, 10, 1, 3]$ 或者 $[1, 3, 2, 4, 10]$，其他组合是不可能的。\n\n创始人希望以尽可能合理的方式讲述这些改进，因此他希望在他的报告中改进按照编号的升序排列。请帮助每个顾问选择要汇报的改进，并帮助每个经理选择组合下属报告的顺序，以使得创始人的报告中的改进能够按照时间顺序排列。", "inputFormat": "第一行包含一个整数 $n $（$2 \\le n \\le 100000$），表示公司的员工数量。接下来的 $n$ 行描述每个员工，每行包含以下内容之一：\n- 如果员工是经理或创始人，则以数字 $1$ 开头，接下来是数字 $k_i $（$1 \\le k_i \\le 8$），表示该经理的下属数量，然后是 $k_i$ 个不同的数字，范围在 $2$ 到 $n$，表示是其下属的员工编号。\n- 如果员工是顾问，则以数字 $2$ 开头，接下来是数字 $m_i$，表示他可以汇报的改进数量，然后是 $m_i$ 个不同的整数，范围在 $1$ 到 $100000$，表示对应改进的编号。\n\n保证每个改进都仅被一个顾问提及，即所有顾问提到的改进都是不同的。", "outputFormat": "如果无法组合报告，输出 `No`。\n\n如果能够组合报告，输出 `Yes`，然后你可以按照员工编号的顺序输出以下内容：\n- 如果员工是经理，则输出他的下属在组合报告中的顺序。\n- 如果员工是顾问，则输出他需要汇报的改进编号。\n\n注：如果不输出组合报告的方式但正确判断了是否能够组合报告，将会得到 $10\\%$ 的部分分。", "hint": "### 样例解释：\n\n在样例二中，没有输出具体的组合方法，所以只能得到部分分。正确的输出应该是这样的：\n```text\nYes\n2 3\n1\n2\n```\n在样例三中，每个顾问都只能选择那唯一的改进编号。第三位经理有两种可能的报告方式：$[1, 3]$ 或 $[3, 1]$。第一位经理有四种可能的报告方式，考虑到第三位经理的所有报告可能性：$[1, 3] + [2] = [1, 3, 2],[2] + [1, 3] = [2, 1, 3],[3, 1 ] + [2] = [3, 1, 2],[2] + [3, 1] = [2, 3, 1]$，但是在这些报告中没有一个改进是按照时间顺序排序的。\n\n### 数据范围：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mchn5bpr.png)\n\n对于 $100\\%$ 的数据，$n,\\sum m_i \\le 100 000$ 且 $\\max k_i\\le8$。", "locale": "zh-CN"}}}
{"pid": "P11092", "type": "P", "difficulty": 4, "samples": [["4\nBBBC\n????\nA?B?C?D\nYYYYY?", "-5\nBBBC\n20000000000000\nZZZZ\n15000000000034\nAZBZCZD\n6000000000000\nYYYYYY"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 莫斯科数字 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n你可能熟悉罗马数字，并且也听说过莫斯科是第三个罗马的说法，所以我们隆重推出莫斯科数字。这是罗马数字的进阶版本，与之类似。在莫斯科数字系统中，数字由大写英文字母 `A` 到 `Z` 表示。每个数字对应一个特定的值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6k4lffzg.png)\n\n莫斯科数字规则如下：每个数字的值等于由它构成的各个数字的总和。数字可以有正负之分。如果一个数字右侧没有比它更大的数字，则该数字的值等于它本身；否则，该数字的值等于其本身取负。例如：\n\n- 「`BBA`」的值为 $5 + 5 + 1 = 11$；\n- 「`BBBC`」的值为 $-5 + (-5) + (-5) + 10 = -5$；\n- 「`ABC`」的值为 $-1 + (-5) + 10 = 4$；\n- 「`BAC`」的值为 $-5 + (-1) + 10 = 4$；\n- 「`ACA`」的值为 $-1 + 10 + 1 = 10$；\n- 「`CFF`」的值为 $-10 + 500 + 500 = 990$。\n\n给定了一些数字，每个数字由大写英文字母组成（即莫斯科数字），但是一部分被替换成了问号。对于每个数字，需要确定在将问号替换为莫斯科数字字母后，可以得到的最大数字。", "inputFormat": "第一行是一个整数 $t$，表示数据组数，即数字的数量（$1 \\le t \\le 50000$）。\n\n接下来的 $t$ 行，每行一个字符串 $s_i$，由大写英文字母和问号组成。所有字符串的长度之和不超过 $300000$。", "outputFormat": "对于每个输入，输出两行，都表示的是将问号替换为莫斯科数字字母后可以得到的最大数字。第一行是以十进制表示的最大数字值，第二行就是替换后的这个最大莫斯科数字。", "hint": "设 $S=\\sum\\limits^{t}_{i=1}|s_i|$。\n\n| 子任务 | 分值 | $S\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $1000$ | $s_i$ 中不包含 `?` |\n| $2$ | $9$ | $3\\times10^5$ | $s_i$ 中不包含 `?` |\n| $3$ | $40$ | $1000$ | $s_i$ 中不包含超过三个 `?` |\n| $4$ | $20$ | $1000$ |  |\n| $5$ | $25$ | $3\\times10^5$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 莫斯科数字 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T1](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n你可能熟悉罗马数字，并且也听说过莫斯科是第三个罗马的说法，所以我们隆重推出莫斯科数字。这是罗马数字的进阶版本，与之类似。在莫斯科数字系统中，数字由大写英文字母 `A` 到 `Z` 表示。每个数字对应一个特定的值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6k4lffzg.png)\n\n莫斯科数字规则如下：每个数字的值等于由它构成的各个数字的总和。数字可以有正负之分。如果一个数字右侧没有比它更大的数字，则该数字的值等于它本身；否则，该数字的值等于其本身取负。例如：\n\n- 「`BBA`」的值为 $5 + 5 + 1 = 11$；\n- 「`BBBC`」的值为 $-5 + (-5) + (-5) + 10 = -5$；\n- 「`ABC`」的值为 $-1 + (-5) + 10 = 4$；\n- 「`BAC`」的值为 $-5 + (-1) + 10 = 4$；\n- 「`ACA`」的值为 $-1 + 10 + 1 = 10$；\n- 「`CFF`」的值为 $-10 + 500 + 500 = 990$。\n\n给定了一些数字，每个数字由大写英文字母组成（即莫斯科数字），但是一部分被替换成了问号。对于每个数字，需要确定在将问号替换为莫斯科数字字母后，可以得到的最大数字。", "inputFormat": "第一行是一个整数 $t$，表示数据组数，即数字的数量（$1 \\le t \\le 50000$）。\n\n接下来的 $t$ 行，每行一个字符串 $s_i$，由大写英文字母和问号组成。所有字符串的长度之和不超过 $300000$。", "outputFormat": "对于每个输入，输出两行，都表示的是将问号替换为莫斯科数字字母后可以得到的最大数字。第一行是以十进制表示的最大数字值，第二行就是替换后的这个最大莫斯科数字。", "hint": "设 $S=\\sum\\limits^{t}_{i=1}|s_i|$。\n\n| 子任务 | 分值 | $S\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | $1000$ | $s_i$ 中不包含 `?` |\n| $2$ | $9$ | $3\\times10^5$ | $s_i$ 中不包含 `?` |\n| $3$ | $40$ | $1000$ | $s_i$ 中不包含超过三个 `?` |\n| $4$ | $20$ | $1000$ |  |\n| $5$ | $25$ | $3\\times10^5$ |  |", "locale": "zh-CN"}}}
{"pid": "P11093", "type": "P", "difficulty": 0, "samples": [["5 6\n1 2\n2 1\n1 5\n2 3\n2 4\n4 2", "Yes\n1 2 2 3\n2 1 1 5\n2 4 4 2"], ["4 4\n2 1\n2 3\n2 4\n4 2", "No"], ["4 4\n1 2\n2 1\n3 4\n4 3", "Yes\n1 2 2 1\n3 4 4 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 树制游戏 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nVasya 最近想到了一种新的娱乐方式。他想让一个有 $n$ 个顶点和 $2\\times(n−1)$ 条边的有向连通图成为他的玩具。这个图满足以下条件：对于图中的每条边 $(u, v)$，都存在一条反向的边 $(v, u)$。换句话说，这个图是由一棵树转化而来的，其中每条无向边都被分成两个方向相反的边。\n\nVasya 将这样一对边 $(e_1, e_2)$ 称为“gadget”，其中 $e_1$ 的终点与 $e_2$ 的起点相同，或者 $e_2$ 的终点与 $e_1$ 的起点相同（特别地，两条方向相反的边也是一种“gadget”）。简单来说，“gadget”就是一条长度为 $2$ 的路径。Vasya 的娱乐方式是将图中的边划分为互不相交的“gadget”。当然，对于原始图来说，这很容易做到。\n\n但是，Vasya 的好朋友 Petya 从树中删除了 $2k$ 条有向边，使得图中剩下 $m = 2\\times (n - 1) - 2\\times k$ 条有向边。\n\n现在 Vasya 想知道是否可以将剩下的边划分为互不相交的“gadget”，如果可能的话，还要找出这种划分的方法。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示顶点数和剩余边数。保证 $m$ 是偶数。\n\n接下来的 $m$ 行，每行包含两个整数 $u_i$ 和 $v_i$，表示剩余边的起点和终点。", "outputFormat": "如果无法将边分成“gadget”，则输出 `No`。\n\n否则，输出 `Yes`，然后输出 $\\frac{m}{2}$ 行，每行包含 $4$ 个数字，表示每个“gadget”中的两对边。每条边由起点和终点两个数字表示。", "hint": "第一个示例中的“gadget”划分如下图所示，同一个类型的两条线组成了一个“gadget”。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lrmoulud.png)\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 150000,2 \\le m \\le 2\\times n - 2,1 \\le u_i, v_i \\le n$。\n\n| 子任务 | 分值 | $n\\le$ | $m$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $10$ | $m\\le20$ |\n| $2$ | $10$ | $200$ | 无 |\n| $3$ | $11$ | $3000$ | $m=2\\times n-4$ |\n| $4$ | $29$ | $3000$ | 无 |\n| $5$ | $11$ | $150000$ | $m=2\\times n-4$ |\n| $6$ | $32$ | $150000$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 树制游戏 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T2](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nVasya 最近想到了一种新的娱乐方式。他想让一个有 $n$ 个顶点和 $2\\times(n−1)$ 条边的有向连通图成为他的玩具。这个图满足以下条件：对于图中的每条边 $(u, v)$，都存在一条反向的边 $(v, u)$。换句话说，这个图是由一棵树转化而来的，其中每条无向边都被分成两个方向相反的边。\n\nVasya 将这样一对边 $(e_1, e_2)$ 称为“gadget”，其中 $e_1$ 的终点与 $e_2$ 的起点相同，或者 $e_2$ 的终点与 $e_1$ 的起点相同（特别地，两条方向相反的边也是一种“gadget”）。简单来说，“gadget”就是一条长度为 $2$ 的路径。Vasya 的娱乐方式是将图中的边划分为互不相交的“gadget”。当然，对于原始图来说，这很容易做到。\n\n但是，Vasya 的好朋友 Petya 从树中删除了 $2k$ 条有向边，使得图中剩下 $m = 2\\times (n - 1) - 2\\times k$ 条有向边。\n\n现在 Vasya 想知道是否可以将剩下的边划分为互不相交的“gadget”，如果可能的话，还要找出这种划分的方法。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示顶点数和剩余边数。保证 $m$ 是偶数。\n\n接下来的 $m$ 行，每行包含两个整数 $u_i$ 和 $v_i$，表示剩余边的起点和终点。", "outputFormat": "如果无法将边分成“gadget”，则输出 `No`。\n\n否则，输出 `Yes`，然后输出 $\\frac{m}{2}$ 行，每行包含 $4$ 个数字，表示每个“gadget”中的两对边。每条边由起点和终点两个数字表示。", "hint": "第一个示例中的“gadget”划分如下图所示，同一个类型的两条线组成了一个“gadget”。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lrmoulud.png)\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 150000,2 \\le m \\le 2\\times n - 2,1 \\le u_i, v_i \\le n$。\n\n| 子任务 | 分值 | $n\\le$ | $m$ 的特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $7$ | $10$ | $m\\le20$ |\n| $2$ | $10$ | $200$ | 无 |\n| $3$ | $11$ | $3000$ | $m=2\\times n-4$ |\n| $4$ | $29$ | $3000$ | 无 |\n| $5$ | $11$ | $150000$ | $m=2\\times n-4$ |\n| $6$ | $32$ | $150000$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11094", "type": "P", "difficulty": 6, "samples": [["3 3\n1 3\n3 1\n4 2\n1 1\n2 3\n1 3", "0\n2\n3"], ["5 3\n1 5\n3 1\n4 2\n5 3\n6 1\n1 5\n5 5\n1 1", "5\n1\n0"], ["1 1\n100 100\n1 1", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2021] 砍树 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T3](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n“2D”组织负责发放伐木许可证。他们收到了沿公路的伐木申请。\n\n公路上有 $n$ 棵树，其中第 $i$ 棵树生长在坐标为 $x_i$ 的点上，高度为 $h_i$。关于这些树的信息被排序，满足 $x_1 < x_2 < \\dots < x_{n-1} < x_n$。\n\n可以按以下方式逐个砍伐树木：将树砍倒，并让它向左或向右倒下。为了防止树木在倒下时受损，它不应碰到距离它自身高度以内的未砍伐的树木。换句话说，如果位于坐标为 $x_i$，高度为 $h_i$ 的树木向右倒下，则不应该存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i < x_j < x_i + h_i$。如果同一树木向左倒下，则不应存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i − h_i < x_j < x_i$。\n\n左边界 $x_1$ 处的树木和右边界 $x_n$ 处的树木旁边有重要的建筑物，因此不允许倒掉的树木落在区间 $[x_1, x_n]$ 之外。换句话说，如果 $x_i − h_i < x_1$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向左倒下；如果 $x_i + h_i > x_n$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向右倒下。\n\n组织收到了 $q$ 个伐木申请。每个申请由两个数字 $l_i$ 和 $r_i$ 组成，表示申请者希望砍伐第 $l_i$ 到第 $r_i$ 个树木（包括边界）。\n\n在执行申请的过程中，只允许砍伐从 $l_i$ 到 $r_i$ 编号的树木。被砍伐的树木可以倒到 $l_i$ 的左边或 $r_i$ 的右边的区域，但不能超出 $[x_1, x_n]$ 范围，也不允许触碰 $l_i$ 到 $r_i$ 范围之外的其它树木。\n\n对于每个申请，需要计算在不损坏任何树木的情况下可以砍倒的最大树木数量。每个申请都应独立处理（只是申请了，树没有真的被砍掉）。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n接下来的 $n$ 行描述每棵树，每行包含两个整数 $x_i$ 和 $h_i$。保证 $x_1 < x_2 < \\dots < x_n$。\n\n然后是 $q$ 个伐木申请的描述，每个占一行。其中第 $i$ 行包含两个整数 $l_i$ 和 $r_i$。", "outputFormat": "对于每个申请，输出可以砍伐的最大树木数量。", "hint": "样例一最后一个询问可以这样砍：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ituaka9n.png)\n\n对于 $100\\%$ 的数据，$1 \\le n, q \\le 500000,1 \\le x_i, h_i \\le 10^9,1 \\le l_i \\le r_i \\le n$。\n\n| 子任务 | 分值 | $n,q\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ |\n| $2$ | $15$ | $500$ |\n| $3$ | $15$ | $5000$ |\n| $4$ | $5$ | $10000$ |\n| $5$ | $10$ | $100000$ |\n| $6$ | $10$ | $200000$ |\n| $7$ | $30$ | $500000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 砍树 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T3](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\n“2D”组织负责发放伐木许可证。他们收到了沿公路的伐木申请。\n\n公路上有 $n$ 棵树，其中第 $i$ 棵树生长在坐标为 $x_i$ 的点上，高度为 $h_i$。关于这些树的信息被排序，满足 $x_1 < x_2 < \\dots < x_{n-1} < x_n$。\n\n可以按以下方式逐个砍伐树木：将树砍倒，并让它向左或向右倒下。为了防止树木在倒下时受损，它不应碰到距离它自身高度以内的未砍伐的树木。换句话说，如果位于坐标为 $x_i$，高度为 $h_i$ 的树木向右倒下，则不应该存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i < x_j < x_i + h_i$。如果同一树木向左倒下，则不应存在坐标为 $x_j$ 的未砍伐的树木，使得 $x_i − h_i < x_j < x_i$。\n\n左边界 $x_1$ 处的树木和右边界 $x_n$ 处的树木旁边有重要的建筑物，因此不允许倒掉的树木落在区间 $[x_1, x_n]$ 之外。换句话说，如果 $x_i − h_i < x_1$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向左倒下；如果 $x_i + h_i > x_n$，坐标为 $x_i$，高度为 $h_i$ 的树木不能向右倒下。\n\n组织收到了 $q$ 个伐木申请。每个申请由两个数字 $l_i$ 和 $r_i$ 组成，表示申请者希望砍伐第 $l_i$ 到第 $r_i$ 个树木（包括边界）。\n\n在执行申请的过程中，只允许砍伐从 $l_i$ 到 $r_i$ 编号的树木。被砍伐的树木可以倒到 $l_i$ 的左边或 $r_i$ 的右边的区域，但不能超出 $[x_1, x_n]$ 范围，也不允许触碰 $l_i$ 到 $r_i$ 范围之外的其它树木。\n\n对于每个申请，需要计算在不损坏任何树木的情况下可以砍倒的最大树木数量。每个申请都应独立处理（只是申请了，树没有真的被砍掉）。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n接下来的 $n$ 行描述每棵树，每行包含两个整数 $x_i$ 和 $h_i$。保证 $x_1 < x_2 < \\dots < x_n$。\n\n然后是 $q$ 个伐木申请的描述，每个占一行。其中第 $i$ 行包含两个整数 $l_i$ 和 $r_i$。", "outputFormat": "对于每个申请，输出可以砍伐的最大树木数量。", "hint": "样例一最后一个询问可以这样砍：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ituaka9n.png)\n\n对于 $100\\%$ 的数据，$1 \\le n, q \\le 500000,1 \\le x_i, h_i \\le 10^9,1 \\le l_i \\le r_i \\le n$。\n\n| 子任务 | 分值 | $n,q\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ |\n| $2$ | $15$ | $500$ |\n| $3$ | $15$ | $5000$ |\n| $4$ | $5$ | $10000$ |\n| $5$ | $10$ | $100000$ |\n| $6$ | $10$ | $200000$ |\n| $7$ | $30$ | $500000$ |", "locale": "zh-CN"}}}
{"pid": "P11095", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 2\n1 3 1\n2 3 1", "2\n2"], ["7 10\n1 2 2\n1 2 8\n2 3 3\n3 4 5\n3 5 4\n4 5 4\n6 5 7\n6 4 4\n1 7 6\n6 7 9", "4\n5\n6\n6\n6\n10"], ["4 4\n1 2 2\n3 2 0\n2 4 3\n4 3 1", "3\n2\n2"]], "limits": {"time": [1000, 3000, 1000, 3000, 3000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "并查集", "2021", "Special Judge", "生成树", "双连通分量", "ROI（俄罗斯）"], "title": "[ROI 2021] 旅行 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nSky 决定成为旅行 up 主，发布在全国各个城市旅行的视频。这个国家有 $n$ 个城市，编号从 $1$ 到 $n$。城市 $1$ 是国家的首都。城市之间有 $m$ 条双向道路，编号从 $1$ 到 $m$，每条道路连接两个不同的城市。同时，同一对城市可以通过多条不同的道路连接。从任何一个城市都能够通过道路到达其他任何一个城市。\n\nSky 和 Aqua 不能分开，所以 Sky 计划和 Aqua 一起从首都出发前往另一个城市，但目前尚未选择具体是哪个城市。到达城市 $k$ 的旅行路线将由城市 $s_1, s_2,\\dots,s_q$ 和道路 $r_1,r_2,\\dots,r_{q-1}$ 组成，其中：\n- $s_1 = 1,s_q = k$；\n- 道路 $r_i$ 连接城市 $s_i$ 和 $s_{i+1}$；\n- Sky 和 Aqua 不会两次经过同一条道路，因此所有的 $r_i$ 都是不同的。可以多次经过同一个城市，包括旅行起始城市 $1$ 和旅行结束城市 $k$。\n\n对于每条道路，Sky 都计算了在该道路上进行旅行拍摄的视频时长，第 $i$ 条道路的视频时长为 $t_i$。\n\n在旅行过程中，Sky 和 Aqua 都会选择旅行路线中的其中一条道路并拍摄与该道路相关的视频。Sky 喜欢拍短视频，因此 Sky 会选择 $t_i$ 最小的道路；而 Aqua 喜欢拍长视频，因此 Aqua 会选择 $t_i$ 最大的道路。\n\n两个视频的总时长为 $\\min\\limits_{1\\le i \\le q-1}t_{r_{i}} + \\max\\limits_{1\\le i \\le q-1}t_{r_{i}}$。\n\nSky 不愿意浪费素材，于是想把两个视频拼到一起，并发布到某知名视频网站上。因为现在短视频更受欢迎，所以 Sky 希望尽量减少两个视频的总时长。为了选择旅行的目的地和路线，需要计算出每个目的地 $k$ 在从城市 $1$ 到城市 $k$ 的所有可能路线中两个视频的最小总时长。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 300000$，$1 \\le m \\le 300000$），分别表示城市和道路的数量。\n\n接下来的 $m$ 行包含道路的描述。第 $i$ 行包含三个整数 $u_i,v_i,t_i$（$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$0 \\le t_i \\le 10^9$），分别表示连接该道路的城市编号以及在该道路上拍摄视频的时长。\n\n保证通过现有的道路可以从任何一个城市到达任何其他城市。", "outputFormat": "对于每个 $2 \\le k \\le n$，输出从城市 $1$ 到城市 $k$ 的旅行中 Sky 和 Aqua 的视频总时长的最小值。", "hint": "数据范围见输入格式。\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $9$ | $300000$ | $300000$ | $m=n-1$ |\n| $2$ | $17$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=0$ |\n| $3$ | $12$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=10^9$ |\n| $4$ | $9$ | $10$ | $10$ | 每对城市的连接不超过一条道路 |\n| $5$ | $6$ | $20$ | $20$ | 每对城市的连接不超过一条道路 |\n| $6$ | $6$ | $2000$ | $2000$ | 对于所有道路 $i$，$\\lvert u_i-v_i\\rvert=1$ |\n| $7$ | $9$ | $2000$ | $2000$ |  |\n| $8$ | $8$ | $5000$ | $300000$ |  |\n| $9$ | $10$ | $300000$ | $300000$ | 对于所有的 $a$，城市 $a$ 和 $a + 1$ 之间存在一条道路；对于任意一对道路 $i$ 和 $j$，如果 $\\lvert u_i − v_i\\rvert = 1$ 且 $\\lvert u_j − v_j\\rvert > 1$，则 $t_i \\le t_j$。 |\n| $10$ | $14$ | $300000$ | $300000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2021] 旅行 (Day 2)", "background": null, "description": "翻译自 [ROI 2021 D2T4](https://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-roi-2021-day2.pdf)。\n\nSky 决定成为旅行 up 主，发布在全国各个城市旅行的视频。这个国家有 $n$ 个城市，编号从 $1$ 到 $n$。城市 $1$ 是国家的首都。城市之间有 $m$ 条双向道路，编号从 $1$ 到 $m$，每条道路连接两个不同的城市。同时，同一对城市可以通过多条不同的道路连接。从任何一个城市都能够通过道路到达其他任何一个城市。\n\nSky 和 Aqua 不能分开，所以 Sky 计划和 Aqua 一起从首都出发前往另一个城市，但目前尚未选择具体是哪个城市。到达城市 $k$ 的旅行路线将由城市 $s_1, s_2,\\dots,s_q$ 和道路 $r_1,r_2,\\dots,r_{q-1}$ 组成，其中：\n- $s_1 = 1,s_q = k$；\n- 道路 $r_i$ 连接城市 $s_i$ 和 $s_{i+1}$；\n- Sky 和 Aqua 不会两次经过同一条道路，因此所有的 $r_i$ 都是不同的。可以多次经过同一个城市，包括旅行起始城市 $1$ 和旅行结束城市 $k$。\n\n对于每条道路，Sky 都计算了在该道路上进行旅行拍摄的视频时长，第 $i$ 条道路的视频时长为 $t_i$。\n\n在旅行过程中，Sky 和 Aqua 都会选择旅行路线中的其中一条道路并拍摄与该道路相关的视频。Sky 喜欢拍短视频，因此 Sky 会选择 $t_i$ 最小的道路；而 Aqua 喜欢拍长视频，因此 Aqua 会选择 $t_i$ 最大的道路。\n\n两个视频的总时长为 $\\min\\limits_{1\\le i \\le q-1}t_{r_{i}} + \\max\\limits_{1\\le i \\le q-1}t_{r_{i}}$。\n\nSky 不愿意浪费素材，于是想把两个视频拼到一起，并发布到某知名视频网站上。因为现在短视频更受欢迎，所以 Sky 希望尽量减少两个视频的总时长。为了选择旅行的目的地和路线，需要计算出每个目的地 $k$ 在从城市 $1$ 到城市 $k$ 的所有可能路线中两个视频的最小总时长。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 300000$，$1 \\le m \\le 300000$），分别表示城市和道路的数量。\n\n接下来的 $m$ 行包含道路的描述。第 $i$ 行包含三个整数 $u_i,v_i,t_i$（$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$0 \\le t_i \\le 10^9$），分别表示连接该道路的城市编号以及在该道路上拍摄视频的时长。\n\n保证通过现有的道路可以从任何一个城市到达任何其他城市。", "outputFormat": "对于每个 $2 \\le k \\le n$，输出从城市 $1$ 到城市 $k$ 的旅行中 Sky 和 Aqua 的视频总时长的最小值。", "hint": "数据范围见输入格式。\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $9$ | $300000$ | $300000$ | $m=n-1$ |\n| $2$ | $17$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=0$ |\n| $3$ | $12$ | $300000$ | $300000$ | 所有连接到城市 $1$ 的道路 $i$ 满足 $t_i=10^9$ |\n| $4$ | $9$ | $10$ | $10$ | 每对城市的连接不超过一条道路 |\n| $5$ | $6$ | $20$ | $20$ | 每对城市的连接不超过一条道路 |\n| $6$ | $6$ | $2000$ | $2000$ | 对于所有道路 $i$，$\\lvert u_i-v_i\\rvert=1$ |\n| $7$ | $9$ | $2000$ | $2000$ |  |\n| $8$ | $8$ | $5000$ | $300000$ |  |\n| $9$ | $10$ | $300000$ | $300000$ | 对于所有的 $a$，城市 $a$ 和 $a + 1$ 之间存在一条道路；对于任意一对道路 $i$ 和 $j$，如果 $\\lvert u_i − v_i\\rvert = 1$ 且 $\\lvert u_j − v_j\\rvert > 1$，则 $t_i \\le t_j$。 |\n| $10$ | $14$ | $300000$ | $300000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11096", "type": "P", "difficulty": 3, "samples": [["5\n5 2 4 1 3", "35"], ["10\n2 1 6 8 3 5 9 10 7 4", "256"], ["2\n2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 体育课 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在体育课前，一个由 $n$ 名学生组成的班级排成了一列。班级中的所有学生身高不同。在队列的第 $i(1\\le i\\le n)$ 个位置上站着一个身高为 $p_i(1\\le p_i\\le n)$ 的学生。\n\n体育老师在课堂开始时可能想要改变学生在队列中的顺序。为此，他可以执行以下操作一次：选择从第 $l$ 到第 $r$ 位置（$1 \\le l \\le r \\le n$）的一段队列，并将这段队列中的学生按照从左到右的升序进行排序。例如，如果 $n = 5$，并且最初学生们的顺序是 $[5, 2, 4, 1, 3]$，而老师选择 $l = 1,r = 4$，则在排序后学生们的顺序将变为 $[1, 2, 4, 5, 3]$。\n\n老师想要使得两个特定的学生尽可能远离彼此。学生之间的距离等于他们所站位置的编号之差。对于每对学生，老师想要知道在执行一次排序操作后他们可以达到的最大距离。请帮助老师算出这些值的总和。\n\n如果用 $d(i, j)$ 表示老师通过选择一段队列并进行排序可以达到的刚开始在位置 $i$ 和 $j$ 上的学生之间的最大距离，需要计算的就是 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "inputFormat": "第一行包含一个整数 $n$，表示班级中的学生数量（$2 \\le n \\le 3,000$）。\n\n第二行包含 $n$ 个整数 $p_1,\\dots , p_n$，表示队列中每个学生的身高（$1 \\le p_i \\le n$）。\n\n保证所有 $p_i$ 都是不同的。", "outputFormat": "输出一个整数，表示问题的答案，即 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "hint": "在样例一中，答案是以下数字之和：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/il74fp66.png)\n\n例如，为了使最初位于位置 $4$ 和 $5$ 上且身高分别为 $1$ 和 $3$ 的学生之间的距离为 $4$，老师可以选择 $l = 1,r = 4$，然后，学生序列将从 $[\\underline{5, 2, 4, 1}, 3]$ 变为 $[\\underline{1, 2, 4, 5}, 3]$。被选择的段已经用下划线标注出来。\n\n| Subtask | 分值 | $n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $10$ |\n| $2$ | $28$ | $50$ |\n| $3$ | $15$ | $100$ |\n| $4$ | $23$ | $600$ |\n| $5$ | $18$ | $3000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 体育课 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在体育课前，一个由 $n$ 名学生组成的班级排成了一列。班级中的所有学生身高不同。在队列的第 $i(1\\le i\\le n)$ 个位置上站着一个身高为 $p_i(1\\le p_i\\le n)$ 的学生。\n\n体育老师在课堂开始时可能想要改变学生在队列中的顺序。为此，他可以执行以下操作一次：选择从第 $l$ 到第 $r$ 位置（$1 \\le l \\le r \\le n$）的一段队列，并将这段队列中的学生按照从左到右的升序进行排序。例如，如果 $n = 5$，并且最初学生们的顺序是 $[5, 2, 4, 1, 3]$，而老师选择 $l = 1,r = 4$，则在排序后学生们的顺序将变为 $[1, 2, 4, 5, 3]$。\n\n老师想要使得两个特定的学生尽可能远离彼此。学生之间的距离等于他们所站位置的编号之差。对于每对学生，老师想要知道在执行一次排序操作后他们可以达到的最大距离。请帮助老师算出这些值的总和。\n\n如果用 $d(i, j)$ 表示老师通过选择一段队列并进行排序可以达到的刚开始在位置 $i$ 和 $j$ 上的学生之间的最大距离，需要计算的就是 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "inputFormat": "第一行包含一个整数 $n$，表示班级中的学生数量（$2 \\le n \\le 3,000$）。\n\n第二行包含 $n$ 个整数 $p_1,\\dots , p_n$，表示队列中每个学生的身高（$1 \\le p_i \\le n$）。\n\n保证所有 $p_i$ 都是不同的。", "outputFormat": "输出一个整数，表示问题的答案，即 $\\sum\\limits_{i=1}^{n-1}\\sum\\limits_{j=i+1}^{n}d(i,j)$。", "hint": "在样例一中，答案是以下数字之和：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/il74fp66.png)\n\n例如，为了使最初位于位置 $4$ 和 $5$ 上且身高分别为 $1$ 和 $3$ 的学生之间的距离为 $4$，老师可以选择 $l = 1,r = 4$，然后，学生序列将从 $[\\underline{5, 2, 4, 1}, 3]$ 变为 $[\\underline{1, 2, 4, 5}, 3]$。被选择的段已经用下划线标注出来。\n\n| Subtask | 分值 | $n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $10$ |\n| $2$ | $28$ | $50$ |\n| $3$ | $15$ | $100$ |\n| $4$ | $23$ | $600$ |\n| $5$ | $18$ | $3000$ |", "locale": "zh-CN"}}}
{"pid": "P11097", "type": "P", "difficulty": 6, "samples": [["2\n3\n1 1\n3 1 2\n5 7\n1 2\n2 4\n2\n1\n5 5\n0 1\n2 2", "8\n0 2 3\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 采购优化 (Day 1)", "background": "翻译自 [ROI 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。", "description": "租赁滑雪设备的网点网络是一棵根节点为 $1$ 的树，由 $n$ 个节点组成，编号从 $1$ 到 $n$。每个节点上都有一个租赁点。位于第 $i$ 个节点的租赁点需要以 $c_i$ 卢布的价格购买设备套件。\n\n设 $a_i$ 表示在位于节点 $i$ **子树的所有租赁点中**将要购买的滑雪设备套件的总数。根据市场调研，这个值必须要满足 $l_i\\le a_i\\le r_i$。\n\n需要确定在赛季开始时每个租赁点需要购买多少套设备，以便对于网络中任何一个子树，设备套件的总数量都在市场营销人员指定的范围内，并且购买的所有设备套件的总成本最小，或是否不可能满足所有市场营销条件。", "inputFormat": "每个测试点包含多个测试数据。第一行给出一个整数 $t$，表示测试数据的数量。接下来是 $t$ 个测试数据。\n\n每个测试数据的第一行给出一个整数 $n$（$1\\le n\\le10^5$），表示树中的节点数量。\n\n接下来一行给出 $n-1$ 个整数 $p_2,p_3,\\dots,p_n$（$1\\le p_i<i$），表示节点 $i$ 的父节点为节点 $p_i$。\n\n接下来一行给出 $n$ 个整数 $c_1,\\dots,c_n$（$1\\le c_i\\le10^9$），其中 $c_i$ 表示 $i$ 号租赁点购买一个设备套件的价格。\n\n接下来 $n$ 行，每行给出两个整数 $l_i$ 和 $r_i$（$0\\le l_i\\le r_i\\le10^9$），表示对位于节点编号为 $i$ 的租赁点的子树中设备套件的总数的限制。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^5$。", "outputFormat": "对于每个测试数据，以下面的格式输出答案。\n\n如果无法满足所有市场营销条件，请输出 `-1`。\n\n否则，在第一行中输出购买整个网络的滑雪设备需要花费的最小卢布数。在第二行中，输出 $n$ 个整数 $b_i$，其中 $b_i$ 表示编号为 $i$ 的租赁点需要购买的设备套件的数量。如果有多种方式以最小的成本满足所有市场营销条件，可以输出其中一种。", "hint": "样例输入的第一组数据说明：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1g6vs9v8.png)\n\n$c_1  b_1 + c_2  b_2 + c_3  b_3 = 0 + 2 + 6 = 8$。\n\n数据范围：\n\n设节点 $i$ 的子树中的节点数量为 $s_i$。\n\n| Subtask | 分值 | $\\sum n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $24$ | $500$ | $r_i\\le1000$ |\n| $2$ | $22$ | $5000$ | $r_i\\le s_i$ |\n| $3$ | $18$ | $10^5$ | $l_i\\le100\\times s_i$，$r_i=10^9$ |\n| $4$ | $21$ | $5000$ |  |\n| $5$ | $15$ | $10^5$ |  |\n\n全部数据范围见输入格式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 采购优化 (Day 1)", "background": "翻译自 [ROI 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。", "description": "租赁滑雪设备的网点网络是一棵根节点为 $1$ 的树，由 $n$ 个节点组成，编号从 $1$ 到 $n$。每个节点上都有一个租赁点。位于第 $i$ 个节点的租赁点需要以 $c_i$ 卢布的价格购买设备套件。\n\n设 $a_i$ 表示在位于节点 $i$ **子树的所有租赁点中**将要购买的滑雪设备套件的总数。根据市场调研，这个值必须要满足 $l_i\\le a_i\\le r_i$。\n\n需要确定在赛季开始时每个租赁点需要购买多少套设备，以便对于网络中任何一个子树，设备套件的总数量都在市场营销人员指定的范围内，并且购买的所有设备套件的总成本最小，或是否不可能满足所有市场营销条件。", "inputFormat": "每个测试点包含多个测试数据。第一行给出一个整数 $t$，表示测试数据的数量。接下来是 $t$ 个测试数据。\n\n每个测试数据的第一行给出一个整数 $n$（$1\\le n\\le10^5$），表示树中的节点数量。\n\n接下来一行给出 $n-1$ 个整数 $p_2,p_3,\\dots,p_n$（$1\\le p_i<i$），表示节点 $i$ 的父节点为节点 $p_i$。\n\n接下来一行给出 $n$ 个整数 $c_1,\\dots,c_n$（$1\\le c_i\\le10^9$），其中 $c_i$ 表示 $i$ 号租赁点购买一个设备套件的价格。\n\n接下来 $n$ 行，每行给出两个整数 $l_i$ 和 $r_i$（$0\\le l_i\\le r_i\\le10^9$），表示对位于节点编号为 $i$ 的租赁点的子树中设备套件的总数的限制。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^5$。", "outputFormat": "对于每个测试数据，以下面的格式输出答案。\n\n如果无法满足所有市场营销条件，请输出 `-1`。\n\n否则，在第一行中输出购买整个网络的滑雪设备需要花费的最小卢布数。在第二行中，输出 $n$ 个整数 $b_i$，其中 $b_i$ 表示编号为 $i$ 的租赁点需要购买的设备套件的数量。如果有多种方式以最小的成本满足所有市场营销条件，可以输出其中一种。", "hint": "样例输入的第一组数据说明：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1g6vs9v8.png)\n\n$c_1  b_1 + c_2  b_2 + c_3  b_3 = 0 + 2 + 6 = 8$。\n\n数据范围：\n\n设节点 $i$ 的子树中的节点数量为 $s_i$。\n\n| Subtask | 分值 | $\\sum n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $24$ | $500$ | $r_i\\le1000$ |\n| $2$ | $22$ | $5000$ | $r_i\\le s_i$ |\n| $3$ | $18$ | $10^5$ | $l_i\\le100\\times s_i$，$r_i=10^9$ |\n| $4$ | $21$ | $5000$ |  |\n| $5$ | $15$ | $10^5$ |  |\n\n全部数据范围见输入格式。", "locale": "zh-CN"}}}
{"pid": "P11098", "type": "P", "difficulty": 6, "samples": [["3\n2 3 1\n5\n3 3 3 0\n2 2 2 1\n1 0 3 1\n3 1 3 2\n2 2 2 2", "0 0\n1 1\n0 0\n2 1\n2 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 滑梯 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n佩奇和她的弟弟乔治来到水上公园。乔治喜欢从滑梯上滑行，这个滑梯可以用三角网格的一部分来描述，其中的顶点是滑梯的节点。在每个节点上，可以选择继续沿着哪个管道前进——向左下或向右下。滑梯从上到下编号，从 $0$ 层开始。在第 $0$ 层，滑梯只有一个节点，在第 $1$ 层有两个节点，在第 $i$ 层有 $i + 1$ 个节点。总共有 $n + 1$ 层。每次从上到下滑都要经过恰好 $n$ 个管道。每个节点都有坐标，用两个数字 $(r, c)$ 表示在第 $r$ 层中从左边开始数的第 $c$ 个节点 ($0 \\le c \\le r \\le n$)。请注意，每层和每层上的节点都是从 $0$ 开始编号的。如果乔治位于节点 $(r, c)$ 并向左下滑，他将进入节点 $(r + 1, c)$，如果他向右下滑，他将进入节点 $(r + 1, c + 1)$。\n\n这是一个有 $5$ 层（$n=4$）的滑梯：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8lsit5mv.png)\n\n乔治想要从滑坡上滑下 $n + 1$ 次。在每次下滑之前，佩奇会给他一个指令，告诉他如何沿着滑坡滑行。每个指令由恰好 $n$ 个命令组成，要么是“向左下”，要么是“向右下”。乔治根据佩奇的命令从当前节点去往下一个节点。第一条指令只有“向右下”的命令。佩奇懒得想出新的指令，因此相邻两次下滑的指令只有一条命令不同：为了从第 $i$ 条指令得到第 $i + 1$ 条指令，需要将第 $a_i$ 个（不是第 $i$ 个）命令从“向右下”更改为“向左下”。每个命令只会被更改一次。到最后，第 $n+1$ 条指令将只包含“向左下”命令。可以证明，在这 $n+1$ 次下滑中，乔治会经过滑梯的每个节点（但不是每个管道）。\n\n在从水上乐园返回的途中，乔治遇到了以下问题。首先，考虑所有他滑过的管道的集合。给出两个节点的坐标：$(r_1, c_1)$ 和 $(r_2, c_2)$。你需要确定一个节点的坐标 $(r_3, c_3)$，使得从这个节点开始，通过这些他滑过的管道可以访问到节点 $(r_1, c_1)$ 和节点 $(r_2, c_2)$，并且在所有这样的节点中，它是最低的，即 $r_3$ 的值最大。可以证明，这样的节点总是存在且唯一。\n\n乔治有很多个问题，但是因为他已经离开了水上乐园，所以他不能碰这个滑梯。他需要你帮忙回答他的所有问题！", "inputFormat": "第一行给出一个整数 $n$（$1 \\le n \\le 500 000$）。\n\n在第二行中，给出 $n$ 个整数 $a_1, a_2, \\dots, a_n $（$1 \\le a_i \\le n$），其中 $a_i$ 是第 $i$ 次下滑后将要更改的命令的编号。保证所有的 $a_i$ 都是不同的。\n\n在第三行中给出一个整数 $q $（$1 \\le q \\le 500 000$），表示乔治的问题数量。\n\n在接下来的 $q$ 行中，每行给出四个整数 $r_{i,1}, c_{i,1}, r_{i,2},c_{i,2} $（$0 \\le r_{i,1}, r_{i,2} \\le n$，$0 \\le c_{i,1} \\le r_{i,1}$，$0 \\le c_{i,2} \\le r_{i,2}$），表示第 $i$ 个问题的两个节点的坐标。", "outputFormat": "输出 $q$ 行，每行输出两个整数 $r_{i,3}$ 和 $c_{i,3}$，作为第 $i$ 个问题的答案的节点坐标。", "hint": "### 样例解释：\n\n乔治四次滑滑梯的路线是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkmgi1s8.png)\n\n所以所有他经过的管道的集合是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5yo3n0mt.png)\n\n五个问题的答案看图易得。\n\n### 数据范围：\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $14$ | $300$ | $300$ |  |\n| $2$ | $23$ | $3000$ | $3000$ |  |\n| $3$ | $10$ | $100000$ | $100000$ | 对于所有 $i$，$a_i=i$ |\n| $4$ | $13$ | $100000$ | $100000$ | 数组 $a$ 有特殊形式 |\n| $5$ | $15$ | $100000$ | $100000$ |  |\n| $6$ | $14$ | $300000$ | $300000$ |  |\n| $7$ | $11$ | $500000$ | $500000$ |  |\n\nSubtask 4 中，数组 $a$ 形如 $1,2,3,\\dots,k,n,n-1,n-2,\\dots,k+1$，其中 $0\\le k\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 滑梯 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n佩奇和她的弟弟乔治来到水上公园。乔治喜欢从滑梯上滑行，这个滑梯可以用三角网格的一部分来描述，其中的顶点是滑梯的节点。在每个节点上，可以选择继续沿着哪个管道前进——向左下或向右下。滑梯从上到下编号，从 $0$ 层开始。在第 $0$ 层，滑梯只有一个节点，在第 $1$ 层有两个节点，在第 $i$ 层有 $i + 1$ 个节点。总共有 $n + 1$ 层。每次从上到下滑都要经过恰好 $n$ 个管道。每个节点都有坐标，用两个数字 $(r, c)$ 表示在第 $r$ 层中从左边开始数的第 $c$ 个节点 ($0 \\le c \\le r \\le n$)。请注意，每层和每层上的节点都是从 $0$ 开始编号的。如果乔治位于节点 $(r, c)$ 并向左下滑，他将进入节点 $(r + 1, c)$，如果他向右下滑，他将进入节点 $(r + 1, c + 1)$。\n\n这是一个有 $5$ 层（$n=4$）的滑梯：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8lsit5mv.png)\n\n乔治想要从滑坡上滑下 $n + 1$ 次。在每次下滑之前，佩奇会给他一个指令，告诉他如何沿着滑坡滑行。每个指令由恰好 $n$ 个命令组成，要么是“向左下”，要么是“向右下”。乔治根据佩奇的命令从当前节点去往下一个节点。第一条指令只有“向右下”的命令。佩奇懒得想出新的指令，因此相邻两次下滑的指令只有一条命令不同：为了从第 $i$ 条指令得到第 $i + 1$ 条指令，需要将第 $a_i$ 个（不是第 $i$ 个）命令从“向右下”更改为“向左下”。每个命令只会被更改一次。到最后，第 $n+1$ 条指令将只包含“向左下”命令。可以证明，在这 $n+1$ 次下滑中，乔治会经过滑梯的每个节点（但不是每个管道）。\n\n在从水上乐园返回的途中，乔治遇到了以下问题。首先，考虑所有他滑过的管道的集合。给出两个节点的坐标：$(r_1, c_1)$ 和 $(r_2, c_2)$。你需要确定一个节点的坐标 $(r_3, c_3)$，使得从这个节点开始，通过这些他滑过的管道可以访问到节点 $(r_1, c_1)$ 和节点 $(r_2, c_2)$，并且在所有这样的节点中，它是最低的，即 $r_3$ 的值最大。可以证明，这样的节点总是存在且唯一。\n\n乔治有很多个问题，但是因为他已经离开了水上乐园，所以他不能碰这个滑梯。他需要你帮忙回答他的所有问题！", "inputFormat": "第一行给出一个整数 $n$（$1 \\le n \\le 500 000$）。\n\n在第二行中，给出 $n$ 个整数 $a_1, a_2, \\dots, a_n $（$1 \\le a_i \\le n$），其中 $a_i$ 是第 $i$ 次下滑后将要更改的命令的编号。保证所有的 $a_i$ 都是不同的。\n\n在第三行中给出一个整数 $q $（$1 \\le q \\le 500 000$），表示乔治的问题数量。\n\n在接下来的 $q$ 行中，每行给出四个整数 $r_{i,1}, c_{i,1}, r_{i,2},c_{i,2} $（$0 \\le r_{i,1}, r_{i,2} \\le n$，$0 \\le c_{i,1} \\le r_{i,1}$，$0 \\le c_{i,2} \\le r_{i,2}$），表示第 $i$ 个问题的两个节点的坐标。", "outputFormat": "输出 $q$ 行，每行输出两个整数 $r_{i,3}$ 和 $c_{i,3}$，作为第 $i$ 个问题的答案的节点坐标。", "hint": "### 样例解释：\n\n乔治四次滑滑梯的路线是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pkmgi1s8.png)\n\n所以所有他经过的管道的集合是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5yo3n0mt.png)\n\n五个问题的答案看图易得。\n\n### 数据范围：\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $14$ | $300$ | $300$ |  |\n| $2$ | $23$ | $3000$ | $3000$ |  |\n| $3$ | $10$ | $100000$ | $100000$ | 对于所有 $i$，$a_i=i$ |\n| $4$ | $13$ | $100000$ | $100000$ | 数组 $a$ 有特殊形式 |\n| $5$ | $15$ | $100000$ | $100000$ |  |\n| $6$ | $14$ | $300000$ | $300000$ |  |\n| $7$ | $11$ | $500000$ | $500000$ |  |\n\nSubtask 4 中，数组 $a$ 形如 $1,2,3,\\dots,k,n,n-1,n-2,\\dots,k+1$，其中 $0\\le k\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11099", "type": "P", "difficulty": 7, "samples": [["1\n1\n1\n4 6 4\n3 3\n1 2\n4 1\n5 0", "13"], ["2\n1 2\n1\n4 9 7\n3 0\n0 5\n4 4\n1 2", "55"], ["2\n1 3\n1\n5 6 11\n4 2\n2 7\n1 10\n3 8\n5 4", "57"], ["3\n1 2 3\n1\n5 7 10\n1 9\n5 5\n3 4\n2 6\n4 3", "63"], ["4\n1 2 3 4\n1\n3 8 6\n2 2\n4 5\n6 1", "44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 照明 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在平面直角坐标系上有一个矩形区域，它的四个角分别在 $(0, 0), (w, 0), (w, h) , (0, h)$。该区域上有 $n$ 个照明灯，第 $i$ 个照明灯位于坐标点 $(x_i, y_i)$。\n\n每个照明灯照亮一个 $90$ 度的角，这个角的边与坐标轴平行，顶点为照明灯所在位置。因此，每个照明灯有四个可能的照亮方向:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nhl1d2iq.png)\n\n给定一个允许的角度方向的集合（对于所有照明灯都相同）。对于每个照明灯，选择其中一个允许的方向。需要照亮尽可能大的区域。如果一个点至少被一个照明灯照到，则认为该点被照亮。\n\n计算使用照明灯可以照亮的区域的最大可能面积，其中每个照明灯都向其中一个允许的方向上照。", "inputFormat": "每个测试点包含多组数据。\n\n第一行给出一个整数 $k (1 \\le k \\le 4)$，表示每组数据中允许的角度方向的数量。\n\n第二行给出 $k$ 个整数，表示允许的方向编号（如当灯光允许向右上或左下照时，输入为 `1 3`）。所有 $k$ 个数字是不同的，并按升序排列。\n\n第三行给出一个整数 $t (1 \\le t \\le 10000)$，表示数据的组数。接下来输入 $t$ 组数据。\n\n每个数据集的第一行给出三个整数 $n,w,h (1 \\le n \\le 100000, 1 \\le w, h \\le 10^9)$，表示区域上的照明灯数量和区域的大小。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i (0 \\le x_i \\le w, 0 \\le y_i \\le h)$，表示第 $i$ 个照明灯的坐标。保证任意两个照明灯不在同一点上。", "outputFormat": "对于每组数据，输出一个整数，表示可以使用照明灯照亮的区域的最大可能面积。", "hint": "### 样例解释：\n\n样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pt0zscz6.png)\n\n样例 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gxap7oqs.png)\n\n样例 $3$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bsi6lme.png)\n\n样例 $4$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdgimd7c.png)\n\n样例 $5$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/44phd4mh.png)\n\n### 数据范围：\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $\\sum n\\le$ | 允许的方向 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $13$ | $10^5$ | $1$ |\n| $2$ | $11$ | $5000$ | $1,2$ |\n| $3$ | $14$ | $10^5$ | $1,2$ |\n| $4$ | $22$ | $5000$ | $1,3$ |\n| $5$ | $14$ | $10^5$ | $1,3$ |\n| $6$ | $15$ | $2000$ | $1,2,3$ |\n| $7$ | $11$ | $10^5$ | $1,2,3,4$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 照明 (Day 1)", "background": null, "description": "翻译自 [ROI 2022 D1T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day1.pdf)。\n\n在平面直角坐标系上有一个矩形区域，它的四个角分别在 $(0, 0), (w, 0), (w, h) , (0, h)$。该区域上有 $n$ 个照明灯，第 $i$ 个照明灯位于坐标点 $(x_i, y_i)$。\n\n每个照明灯照亮一个 $90$ 度的角，这个角的边与坐标轴平行，顶点为照明灯所在位置。因此，每个照明灯有四个可能的照亮方向:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nhl1d2iq.png)\n\n给定一个允许的角度方向的集合（对于所有照明灯都相同）。对于每个照明灯，选择其中一个允许的方向。需要照亮尽可能大的区域。如果一个点至少被一个照明灯照到，则认为该点被照亮。\n\n计算使用照明灯可以照亮的区域的最大可能面积，其中每个照明灯都向其中一个允许的方向上照。", "inputFormat": "每个测试点包含多组数据。\n\n第一行给出一个整数 $k (1 \\le k \\le 4)$，表示每组数据中允许的角度方向的数量。\n\n第二行给出 $k$ 个整数，表示允许的方向编号（如当灯光允许向右上或左下照时，输入为 `1 3`）。所有 $k$ 个数字是不同的，并按升序排列。\n\n第三行给出一个整数 $t (1 \\le t \\le 10000)$，表示数据的组数。接下来输入 $t$ 组数据。\n\n每个数据集的第一行给出三个整数 $n,w,h (1 \\le n \\le 100000, 1 \\le w, h \\le 10^9)$，表示区域上的照明灯数量和区域的大小。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i (0 \\le x_i \\le w, 0 \\le y_i \\le h)$，表示第 $i$ 个照明灯的坐标。保证任意两个照明灯不在同一点上。", "outputFormat": "对于每组数据，输出一个整数，表示可以使用照明灯照亮的区域的最大可能面积。", "hint": "### 样例解释：\n\n样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pt0zscz6.png)\n\n样例 $2$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gxap7oqs.png)\n\n样例 $3$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bsi6lme.png)\n\n样例 $4$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdgimd7c.png)\n\n样例 $5$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/44phd4mh.png)\n\n### 数据范围：\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $\\sum n\\le$ | 允许的方向 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $13$ | $10^5$ | $1$ |\n| $2$ | $11$ | $5000$ | $1,2$ |\n| $3$ | $14$ | $10^5$ | $1,2$ |\n| $4$ | $22$ | $5000$ | $1,3$ |\n| $5$ | $14$ | $10^5$ | $1,3$ |\n| $6$ | $15$ | $2000$ | $1,2,3$ |\n| $7$ | $11$ | $10^5$ | $1,2,3,4$ |", "locale": "zh-CN"}}}
{"pid": "P11100", "type": "P", "difficulty": 5, "samples": [["170\n15", "710"], ["170\n600", "170"], ["314599\n17713", "931459"], ["001\n1000", "001"], ["3327\n114", "7332"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 交换 (Day 2)", "background": "翻译自 [ROI 2022 D2T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n给定一个 $n$ 位十进制数 $x$。可以任意多次交换相邻的两个数位，每次交换会产生一个代价 $y$。如果通过 $k$ 次这样的交换得到了数字 $x_{new}$，则收益等于 $x_{new}-k\\times y$。\n\n定义：如果通过交换从 $x$ 得到了数字 $x_{new}$，并且在此过程中达到了最大可能的收益，则称数字 $x_{new}$ 为最优数字。\n\n例如，当 $y=114$ 时，可以通过交换 $3$ 次将数字 $3327$ 中的 $7$ 移到最前面，得到最大的收益 $7332-3\\times114=6990$。此时就称 $7332$ 为最优数字。", "description": "众所周知，这样的最优数字可能不止一个（对于同一个 $x$，它的所有最优数字获得的收益是相等的，但它们的值不相等）。对于给定的 $x$ 和 $y$，需要确定最优数字中的最大值。", "inputFormat": "第一行包含一个由 $n$ 个十进制数位组成的整数 $x$（$1\\le n\\le10^5$），数字 $x$ 可能有前导零。\n\n第二行包含一个整数 $y$，表示一次交换的代价（$1\\le y\\le10^{16}$）。", "outputFormat": "输出一个整数 $x_{new}$，表示最优数字中的最大值。数字 $x_{new}$ 的长度为 $n$，并且可能包含前导零。", "hint": "| Subtask | 分值 | $n\\le$ | $y\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $27$ | $9$ | $10^8$ |  |\n| $2$ | $13$ | $20$ | $10^8$ |  |\n| $3$ | $19$ | $10^5$ | $1$ |  |\n| $4$ | $25$ | $10^5$ | $10^8$ | $x$ 由 `1` 或 `2` 组成 |\n| $5$ | $8$ | $10^5$ | $10^8$ |  |\n| $6$ | $8$ | $10^5$ | $10^{16}$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 交换 (Day 2)", "background": "翻译自 [ROI 2022 D2T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n给定一个 $n$ 位十进制数 $x$。可以任意多次交换相邻的两个数位，每次交换会产生一个代价 $y$。如果通过 $k$ 次这样的交换得到了数字 $x_{new}$，则收益等于 $x_{new}-k\\times y$。\n\n定义：如果通过交换从 $x$ 得到了数字 $x_{new}$，并且在此过程中达到了最大可能的收益，则称数字 $x_{new}$ 为最优数字。\n\n例如，当 $y=114$ 时，可以通过交换 $3$ 次将数字 $3327$ 中的 $7$ 移到最前面，得到最大的收益 $7332-3\\times114=6990$。此时就称 $7332$ 为最优数字。", "description": "众所周知，这样的最优数字可能不止一个（对于同一个 $x$，它的所有最优数字获得的收益是相等的，但它们的值不相等）。对于给定的 $x$ 和 $y$，需要确定最优数字中的最大值。", "inputFormat": "第一行包含一个由 $n$ 个十进制数位组成的整数 $x$（$1\\le n\\le10^5$），数字 $x$ 可能有前导零。\n\n第二行包含一个整数 $y$，表示一次交换的代价（$1\\le y\\le10^{16}$）。", "outputFormat": "输出一个整数 $x_{new}$，表示最优数字中的最大值。数字 $x_{new}$ 的长度为 $n$，并且可能包含前导零。", "hint": "| Subtask | 分值 | $n\\le$ | $y\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $27$ | $9$ | $10^8$ |  |\n| $2$ | $13$ | $20$ | $10^8$ |  |\n| $3$ | $19$ | $10^5$ | $1$ |  |\n| $4$ | $25$ | $10^5$ | $10^8$ | $x$ 由 `1` 或 `2` 组成 |\n| $5$ | $8$ | $10^5$ | $10^8$ |  |\n| $6$ | $8$ | $10^5$ | $10^{16}$ |  |", "locale": "zh-CN"}}}
{"pid": "P11101", "type": "P", "difficulty": 4, "samples": [["6 6\n5 4 4 2 2 2\n1 0\n1 1\n1 2\n2 1\n2 2\n3 1 5", "3\n2\n1\n8\n11\n4"], ["5 4\n0 3 5 4 2\n1 0\n1 1\n2 1\n3 1 1", "5\n2\n10\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "树状数组", "2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 天狼星探险队 (Day 2)", "background": "翻译自 [ROI 2022 D2T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n“天狼星探险队”游戏中有 $n$ 个玩家，编号从 $1$ 到 $n$。每个玩家在之前的任务中积累了 $c_i$ 点经验。如果两个玩家具有相同的经验值，我们称他们具有相同的等级。经验更高的玩家具有更高的等级。\n\n游戏由多个回合组成。在每个回合结束时，每个玩家都会获得经验，该经验为其他玩家中比他更高的**级别的数量**。例如，如果玩家的经验值为 $[2, 5, 5, 1, 2, 10]$，那么第一个玩家的经验将增加 $2$：存在两种更高级别的玩家——经验值分别为 $5$ 和 $10$ 的玩家。这个例子中最后一个玩家的经验不会增加。玩家的经验会同时改变，比如在这个例子中，回合结束时玩家的经验将变为 $[4, 6, 6, 4, 4, 10]$。", "description": "需要回答几个问题。每个问题可以是以下三种类型之一：\n1. 在进行 $k$ 个回合后，玩家将拥有多少不同的级别？\n2. 在前 $k$ 个回合中，所有玩家共添加了多少经验？\n3. 在第 $k$ 个回合结束时，玩家编号 $i$ 将拥有多少经验？", "inputFormat": "第一行包含两个整数 $n$ 和 $q$（$1\\le n,q\\le300,000$），分别表示玩家数量和需要回答的问题数量。\n\n第二行包含 $n$ 个整数 $c_i$（$0\\le c_i\\le10^{12}$），表示当前游戏开始时每个玩家的经验值。\n\n接下来有 $q$ 行问题。每行以整数 $t$（$t\\in\\{1，2，3\\}$）开头，表示问题类型。\n- 如果 $t=1$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=2$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=3$，则后面是两个整数 $k$ 和 $i$（$0\\le k\\le10^{12}，1\\le i\\le n$），表示回合数和玩家编号。\n\n在所有问题中，$k=0$ 表示游戏开始时到进行第一轮之前的时刻。", "outputFormat": "对于每个问题，输出一行一个数字表示其答案。", "hint": "下图是两个样例中游戏进行时玩家的经验值变化。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1o9jl04.png)\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | $c,k\\le$ | $t$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $5000$ | $5000$ | $10^4$ |  |\n| $2$ | $16$ | $5000$ | $5000$ | $10^7$ |  |\n| $3$ | $14$ | $5000$ | $5000$ | $10^{12}$ |  |\n| $4$ | $7$ | $3\\times10^5$ | $3\\times10^5$ | $10^7$ |  |\n| $5$ | $12$ | $5000$ | $3\\times10^5$ | $10^{12}$ |  |\n| $6$ | $14$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t=1$ |\n| $7$ | $10$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t\\in\\{1,2\\}$ |\n| $8$ | $9$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 天狼星探险队 (Day 2)", "background": "翻译自 [ROI 2022 D2T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n“天狼星探险队”游戏中有 $n$ 个玩家，编号从 $1$ 到 $n$。每个玩家在之前的任务中积累了 $c_i$ 点经验。如果两个玩家具有相同的经验值，我们称他们具有相同的等级。经验更高的玩家具有更高的等级。\n\n游戏由多个回合组成。在每个回合结束时，每个玩家都会获得经验，该经验为其他玩家中比他更高的**级别的数量**。例如，如果玩家的经验值为 $[2, 5, 5, 1, 2, 10]$，那么第一个玩家的经验将增加 $2$：存在两种更高级别的玩家——经验值分别为 $5$ 和 $10$ 的玩家。这个例子中最后一个玩家的经验不会增加。玩家的经验会同时改变，比如在这个例子中，回合结束时玩家的经验将变为 $[4, 6, 6, 4, 4, 10]$。", "description": "需要回答几个问题。每个问题可以是以下三种类型之一：\n1. 在进行 $k$ 个回合后，玩家将拥有多少不同的级别？\n2. 在前 $k$ 个回合中，所有玩家共添加了多少经验？\n3. 在第 $k$ 个回合结束时，玩家编号 $i$ 将拥有多少经验？", "inputFormat": "第一行包含两个整数 $n$ 和 $q$（$1\\le n,q\\le300,000$），分别表示玩家数量和需要回答的问题数量。\n\n第二行包含 $n$ 个整数 $c_i$（$0\\le c_i\\le10^{12}$），表示当前游戏开始时每个玩家的经验值。\n\n接下来有 $q$ 行问题。每行以整数 $t$（$t\\in\\{1，2，3\\}$）开头，表示问题类型。\n- 如果 $t=1$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=2$，则后面是整数 $k$（$0\\le k\\le10^{12}$），表示回合数。\n- 如果 $t=3$，则后面是两个整数 $k$ 和 $i$（$0\\le k\\le10^{12}，1\\le i\\le n$），表示回合数和玩家编号。\n\n在所有问题中，$k=0$ 表示游戏开始时到进行第一轮之前的时刻。", "outputFormat": "对于每个问题，输出一行一个数字表示其答案。", "hint": "下图是两个样例中游戏进行时玩家的经验值变化。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1o9jl04.png)\n\n全部数据范围见输入格式。\n\n| Subtask | 分值 | $n\\le$ | $q\\le$ | $c,k\\le$ | $t$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $18$ | $5000$ | $5000$ | $10^4$ |  |\n| $2$ | $16$ | $5000$ | $5000$ | $10^7$ |  |\n| $3$ | $14$ | $5000$ | $5000$ | $10^{12}$ |  |\n| $4$ | $7$ | $3\\times10^5$ | $3\\times10^5$ | $10^7$ |  |\n| $5$ | $12$ | $5000$ | $3\\times10^5$ | $10^{12}$ |  |\n| $6$ | $14$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t=1$ |\n| $7$ | $10$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ | $t\\in\\{1,2\\}$ |\n| $8$ | $9$ | $3\\times10^5$ | $3\\times10^5$ | $10^{12}$ |  |", "locale": "zh-CN"}}}
{"pid": "P11102", "type": "P", "difficulty": 6, "samples": [["4\n4 4\n1 2\n2 3\n3 4\n4 1\n5 5\n1 2\n2 3\n3 4\n4 5\n5 1\n5 6\n1 2\n3 2\n1 3\n3 5\n5 4\n3 4\n9 12\n1 2\n2 3\n3 1\n4 5\n5 6\n6 4\n7 8\n8 9\n9 7\n3 6\n6 9\n9 3", "-1 2 -1\n4 2 2 4\n2 2 4 4\n2 2 6 6 4 6 6 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 搬货 (Day 2)", "background": "翻译自 [ROI 2022 D2T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n仓库操作员需要使用特殊叉车移动重箱。可以将仓库简化为 $n$ 个房间，通过 $m$ 条走廊连接。可以通过走廊从任意一个房间到达任意其他房间。房间编号从 $1$ 到 $n$。走廊 $i$ 直接连接房间 $u_i$ 和 $v_i$，可以双向移动。\n\n叉车可以升降货物，如果不携带货物，可以在空房间和走廊之间移动。最初，叉车位于房间 $1$，并携带着升起的货物。叉车可以执行以下操作：\n\n1. 如果叉车位于房间 $a$ 并且携带升起的货物，则可以将货物放置在房间 $b$，前提是房间 $a$ 和 $b$ 直接相连。完成此操作后，叉车不再携带货物并可以移动。\n2. 如果叉车位于房间 $a$，货物放置在房间 $b$，并且房间 $a$ 和 $b$ 直接相连，则叉车可以在不移动的情况下升起货物。完成此操作后，叉车仍然位于房间 $a$ 并携带升起的货物，直到放下货物之前不能移动。\n3. 如果叉车没有携带货物，则可以在走廊和房间之间移动，但不能通过放有货物的房间。", "description": "空车在房间之间移动非常快，比升降货物的速度快得多。因此，我们假设叉车执行第一或第二操作需要一单位时间，而第三个操作是瞬时完成的。对于每个房间 $p(2 \\le p \\le n)$，需要确定叉车从初始位置（在第一个房间且携带升起的货物）到达房间 $p$ 并继续携带升起的货物所需的最短时间，或者确定这是不可能的。", "inputFormat": "每个测试由多组数据组成。第一行给出一个整数 $t$（$1 \\le t \\le 100,000$），即数据的组数。接下来是每组数据的描述。\n\n每组数据的第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 500,000,1 \\le m \\le 500,000$），即仓库中房间和走廊的数量。\n\n接下来的 $m$ 行每行包含两个整数 $u_i$ 和 $v_i$（$1 \\le u_i,v_i \\le n,u_i \\ne v_i$），表示第 $i$ 条走廊连接的两个房间编号。保证每对通过走廊连接的房间只会出现一次（或者说每个走廊只输入一次）。保证如果所有房间都是空闲的，则可以通过走廊从任意房间到达任意其他房间，即由仓库简化成的图是联通的。\n\n用 $\\sum n$ 表示每一组数据中 $n$ 的总和，用 $\\sum m$ 表示 $m$ 的总和，保证 $\\sum n \\le 500,000,\\sum m \\le 500,000$。", "outputFormat": "对于每组输入，输出 $n - 1$ 个数字，其中第 $i$ 个数字应该等于叉车从房间 $1$ 开始到房间 $i+1$（同时继续携带升起的货物）需要升降货物的最小次数（也就是最短时间）。如果无法实现，则第 $i$ 个数字应为 $-1$。", "hint": "部分样例解释：\n\n在第四组数据中，为了使叉车从房间 $1$ 开始（携带升起的货物）尽快到达房间 $4$（并继续携带升起的货物），可以执行以下操作：\n\n- 将货物放置在房间 $2$。需要花费一单位时间。\n- 移动到房间 $3$。不需要花费时间。\n- 从房间 $2$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $9$。需要花费一单位时间。\n- 移动到房间 $6$。不需要花费时间。\n- 从房间 $9$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $5$。需要花费一单位时间。\n- 移动到房间 $4$。不需要花费时间。\n- 从房间 $5$ 中升起货物。需要花费一单位时间。\n\n总共需要花费 $6$ 个单位时间。\n\n| Subtask | 分值 | $\\sum n\\le$ | $\\sum m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $16$ | $1000$ | $2000$ |  |\n| $2$ | $18$ | $1000$ | $100000$ |  |\n| $3$ | $14$ | $5000$ | $500000$ |  |\n| $4$ | $17$ | $500000$ | $500000$ | 对于任意 $1\\le i\\le n-1$，存在一条走廊连接 $i$ 和 $i+1$ 号房间，且 $1$ 和 $n$ 号房间也有走廊连接 |\n| $5$ | $12$ | $500000$ | $500000$ | 每个房间最多有 $3$ 条走廊 |\n| $6$ | $23$ | $500000$ | $500000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 搬货 (Day 2)", "background": "翻译自 [ROI 2022 D2T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n仓库操作员需要使用特殊叉车移动重箱。可以将仓库简化为 $n$ 个房间，通过 $m$ 条走廊连接。可以通过走廊从任意一个房间到达任意其他房间。房间编号从 $1$ 到 $n$。走廊 $i$ 直接连接房间 $u_i$ 和 $v_i$，可以双向移动。\n\n叉车可以升降货物，如果不携带货物，可以在空房间和走廊之间移动。最初，叉车位于房间 $1$，并携带着升起的货物。叉车可以执行以下操作：\n\n1. 如果叉车位于房间 $a$ 并且携带升起的货物，则可以将货物放置在房间 $b$，前提是房间 $a$ 和 $b$ 直接相连。完成此操作后，叉车不再携带货物并可以移动。\n2. 如果叉车位于房间 $a$，货物放置在房间 $b$，并且房间 $a$ 和 $b$ 直接相连，则叉车可以在不移动的情况下升起货物。完成此操作后，叉车仍然位于房间 $a$ 并携带升起的货物，直到放下货物之前不能移动。\n3. 如果叉车没有携带货物，则可以在走廊和房间之间移动，但不能通过放有货物的房间。", "description": "空车在房间之间移动非常快，比升降货物的速度快得多。因此，我们假设叉车执行第一或第二操作需要一单位时间，而第三个操作是瞬时完成的。对于每个房间 $p(2 \\le p \\le n)$，需要确定叉车从初始位置（在第一个房间且携带升起的货物）到达房间 $p$ 并继续携带升起的货物所需的最短时间，或者确定这是不可能的。", "inputFormat": "每个测试由多组数据组成。第一行给出一个整数 $t$（$1 \\le t \\le 100,000$），即数据的组数。接下来是每组数据的描述。\n\n每组数据的第一行包含两个整数 $n$ 和 $m$（$2 \\le n \\le 500,000,1 \\le m \\le 500,000$），即仓库中房间和走廊的数量。\n\n接下来的 $m$ 行每行包含两个整数 $u_i$ 和 $v_i$（$1 \\le u_i,v_i \\le n,u_i \\ne v_i$），表示第 $i$ 条走廊连接的两个房间编号。保证每对通过走廊连接的房间只会出现一次（或者说每个走廊只输入一次）。保证如果所有房间都是空闲的，则可以通过走廊从任意房间到达任意其他房间，即由仓库简化成的图是联通的。\n\n用 $\\sum n$ 表示每一组数据中 $n$ 的总和，用 $\\sum m$ 表示 $m$ 的总和，保证 $\\sum n \\le 500,000,\\sum m \\le 500,000$。", "outputFormat": "对于每组输入，输出 $n - 1$ 个数字，其中第 $i$ 个数字应该等于叉车从房间 $1$ 开始到房间 $i+1$（同时继续携带升起的货物）需要升降货物的最小次数（也就是最短时间）。如果无法实现，则第 $i$ 个数字应为 $-1$。", "hint": "部分样例解释：\n\n在第四组数据中，为了使叉车从房间 $1$ 开始（携带升起的货物）尽快到达房间 $4$（并继续携带升起的货物），可以执行以下操作：\n\n- 将货物放置在房间 $2$。需要花费一单位时间。\n- 移动到房间 $3$。不需要花费时间。\n- 从房间 $2$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $9$。需要花费一单位时间。\n- 移动到房间 $6$。不需要花费时间。\n- 从房间 $9$ 中升起货物。需要花费一单位时间。\n- 将货物放置在房间 $5$。需要花费一单位时间。\n- 移动到房间 $4$。不需要花费时间。\n- 从房间 $5$ 中升起货物。需要花费一单位时间。\n\n总共需要花费 $6$ 个单位时间。\n\n| Subtask | 分值 | $\\sum n\\le$ | $\\sum m\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $16$ | $1000$ | $2000$ |  |\n| $2$ | $18$ | $1000$ | $100000$ |  |\n| $3$ | $14$ | $5000$ | $500000$ |  |\n| $4$ | $17$ | $500000$ | $500000$ | 对于任意 $1\\le i\\le n-1$，存在一条走廊连接 $i$ 和 $i+1$ 号房间，且 $1$ 和 $n$ 号房间也有走廊连接 |\n| $5$ | $12$ | $500000$ | $500000$ | 每个房间最多有 $3$ 条走廊 |\n| $6$ | $23$ | $500000$ | $500000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11103", "type": "P", "difficulty": 7, "samples": [["1\n4 3\n3 3 2 2\n1 2 2 0\n3 3 3 0\n2 2 4 1", "8 7 7 8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2022] 挑战 (Day 2)", "background": "翻译自 [ROI 2022 D2T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n在天狼星教育中心的设计班中，一个团队的成员设计了一种工业机器人。这种机器人将把零件放入标号从 $1$ 到 $n$ 的 $n$ 个容器中。每个容器最多可以放置 $a_i$ 个零件。\n\n一共有 $m$ 台机器人。初始时，第 $j$ 台机器人有 $c_j$ 个零件。此外，第 $j$ 台机器人有一个工作范围，由两个数字 $l_j$ 和 $r_j$ 确定，表示机器人只能将零件放入编号从 $l_j$ 到 $r_j$ 的容器中（包括边界）。机器人试图尽可能多地将零件放入容器。\n\n机器人分为两种类型。如果机器人的类型 $t_j = 0$，则其工作范围始终保持不变。而机器人类型 $t_j = 1$ 可以改变它的工作范围。如果将编号为 $x$ 的容器指定为最重要的容器，则每个类型为 $1$ 的机器人的工作范围将扩大，来使这个范围包含容器 $x$。或者说，具有类型 $1$ 的机器人 $j$ 的工作范围将改变为 $[\\min(l_j,x),\\max(r_j,x)]$。", "description": "对于从 $1$ 到 $n$ 的每个 $x$，计算在容器 $x$ 被视为最重要的容器时，机器人们最多能够将多少零件放入容器中。", "inputFormat": "本题有多组数据。第一行给出一个整数 $t$，表示数据的组数。\n\n每组输入数据的第一行给出两个整数 $n$ 和 $m$，分别表示容器和机器人的数量。\n\n接下来一行给出 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示容器的容量。\n\n接下来的 $m$ 行中的每一行都包含四个整数 $l_j，r_j，c_j，t_j$，表示机器人的工作范围、刚开始携带的零件数量和机器人类型。", "outputFormat": "对于每组输入数据，输出 $n$ 个整数，表示对于从 $1$ 到 $n$ 的所有 $x$ 的问题的答案。", "hint": "对于 $100\\%$ 的数据，$1 \\le t \\le 200000$，$1 \\le n,m \\le 200000$，$0 \\le a_i \\le 10^9$，$1 \\le l_j \\le r_j \\le n$，$0 \\le c_j \\le 10^9$，$t_j \\in \\{0, 1\\}$。\n\n| Subtask | 分值 | $\\sum n\\le$ | $\\sum m\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $100$ | $100$ | $m=1$ |\n| $2$ | $7$ | $100$ | $100$ |  |\n| $3$ | $6$ | $2000$ | $2000$ |  |\n| $4$ | $6$ | $20000$ | $200$ |  |\n| $5$ | $12$ | $10^5$ | $2000$ |  |\n| $6$ | $17$ | $20000$ | $20000$ | $t_i=1$ |\n| $7$ | $8$ | $10^5$ | $10^5$ | $l_i\\le l_{i+1},r_i\\le r_{i+1},t_i=1$ |\n| $8$ | $8$ | $10^5$ | $10^5$ | $t_i=1$ |\n| $9$ | $13$ | $10^5$ | $10^5$ | 对于所有 $t_i=0$ 的机器人，$r_i\\le50$ 或 $l_i>n-50$ |\n| $10$ | $4$ | $10^5$ | $10^5$ | $a_i=1$ |\n| $11$ | $6$ | $10^5$ | $10^5$ |  |\n| $12$ | $3$ | $2\\times10^5$ | $2\\times10^5$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2022] 挑战 (Day 2)", "background": "翻译自 [ROI 2022 D2T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-roi-2022-day2.pdf)。\n\n在天狼星教育中心的设计班中，一个团队的成员设计了一种工业机器人。这种机器人将把零件放入标号从 $1$ 到 $n$ 的 $n$ 个容器中。每个容器最多可以放置 $a_i$ 个零件。\n\n一共有 $m$ 台机器人。初始时，第 $j$ 台机器人有 $c_j$ 个零件。此外，第 $j$ 台机器人有一个工作范围，由两个数字 $l_j$ 和 $r_j$ 确定，表示机器人只能将零件放入编号从 $l_j$ 到 $r_j$ 的容器中（包括边界）。机器人试图尽可能多地将零件放入容器。\n\n机器人分为两种类型。如果机器人的类型 $t_j = 0$，则其工作范围始终保持不变。而机器人类型 $t_j = 1$ 可以改变它的工作范围。如果将编号为 $x$ 的容器指定为最重要的容器，则每个类型为 $1$ 的机器人的工作范围将扩大，来使这个范围包含容器 $x$。或者说，具有类型 $1$ 的机器人 $j$ 的工作范围将改变为 $[\\min(l_j,x),\\max(r_j,x)]$。", "description": "对于从 $1$ 到 $n$ 的每个 $x$，计算在容器 $x$ 被视为最重要的容器时，机器人们最多能够将多少零件放入容器中。", "inputFormat": "本题有多组数据。第一行给出一个整数 $t$，表示数据的组数。\n\n每组输入数据的第一行给出两个整数 $n$ 和 $m$，分别表示容器和机器人的数量。\n\n接下来一行给出 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示容器的容量。\n\n接下来的 $m$ 行中的每一行都包含四个整数 $l_j，r_j，c_j，t_j$，表示机器人的工作范围、刚开始携带的零件数量和机器人类型。", "outputFormat": "对于每组输入数据，输出 $n$ 个整数，表示对于从 $1$ 到 $n$ 的所有 $x$ 的问题的答案。", "hint": "对于 $100\\%$ 的数据，$1 \\le t \\le 200000$，$1 \\le n,m \\le 200000$，$0 \\le a_i \\le 10^9$，$1 \\le l_j \\le r_j \\le n$，$0 \\le c_j \\le 10^9$，$t_j \\in \\{0, 1\\}$。\n\n| Subtask | 分值 | $\\sum n\\le$ | $\\sum m\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $100$ | $100$ | $m=1$ |\n| $2$ | $7$ | $100$ | $100$ |  |\n| $3$ | $6$ | $2000$ | $2000$ |  |\n| $4$ | $6$ | $20000$ | $200$ |  |\n| $5$ | $12$ | $10^5$ | $2000$ |  |\n| $6$ | $17$ | $20000$ | $20000$ | $t_i=1$ |\n| $7$ | $8$ | $10^5$ | $10^5$ | $l_i\\le l_{i+1},r_i\\le r_{i+1},t_i=1$ |\n| $8$ | $8$ | $10^5$ | $10^5$ | $t_i=1$ |\n| $9$ | $13$ | $10^5$ | $10^5$ | 对于所有 $t_i=0$ 的机器人，$r_i\\le50$ 或 $l_i>n-50$ |\n| $10$ | $4$ | $10^5$ | $10^5$ | $a_i=1$ |\n| $11$ | $6$ | $10^5$ | $10^5$ |  |\n| $12$ | $3$ | $2\\times10^5$ | $2\\times10^5$ |  |", "locale": "zh-CN"}}}
{"pid": "P11104", "type": "P", "difficulty": 3, "samples": [["1 10 3\n1 5\n1 7\n1 2", "6 0"], ["3 4 3\n1 1\n3 4\n1 4", "4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] 监控 (Day 1)", "background": "翻译自 [ROI 2023 D1T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n商场大楼的安全由视频监控系统提供保障。\n\n安保人员的电脑上有一个程序，该程序在屏幕上显示出多个摄像头的视频。该程序的工作原理如下：\n\n屏幕上显示一个由 $h$ 行 $w$ 列组成的矩形网格。每个单元格可以为空，也可以显示来自某个摄像头的图像。为了控制程序中图像的位置，安保人员可以使用“左”、“右”、“上”和“下”按钮。\n\n- 按下“左”按钮会将每个单元格中的图像向左移动到其左边的单元格。最左边一行的图像会被移动到最右边一行的对应单元格中。\n- 按下“右”按钮会将每个单元格中的图像向右移动到其右边的单元格。最右边一行的图像会被移动到最左边一行的对应单元格中。\n- 按下“上”按钮会将每个单元格中的图像向上移动到其上方的单元格。最上面一行的图像会被移动到最下面一行的对应单元格中。\n- 按下“下”按钮会将每个单元格中的图像向下移动到其下方的单元格。最下面一行的图像会被移动到最上面一行的对应单元格中。\n\n网格的行由上至下编号，列由左至右编号。$(r, c)$ 表示第 $r$ 行第 $c$ 列的单元格。\n\n下面是一个有 $3$ 行 $4$ 列和三个包含图像的单元格的网格示例，其坐标分别为 $(1, 1),(2, 4),(3, 3)$，还显示了按下四个按钮后图像的新位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6a027tt.png)", "description": "安保人员希望屏幕上显示图像的单元格尽可能紧凑。图像的紧凑性可以用网格中包含所有显示的图像所需的最小矩形的面积来衡量。通过按下按钮可以改变图像的紧凑性。例如，下图刚开始的图像布局紧凑性为 $12$，按下一次“右”按钮和一次“上”按钮后，图像的紧凑性变为 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z3etvoy5.png)\n\n给定一个包含 $k$ 个图像的网格，计算通过使用“左”、“右”、“上”和“下”按钮可以达到的最小紧凑性，并计算达到最小紧凑性所需的最小按钮点击次数。", "inputFormat": "第一行输入三个整数 $h,w,k$，分别表示网格的尺寸和包含图像的单元格数量（$1 \\le h, w \\le 10^9;1 \\le k \\le 100,000$）。\n\n接下来的 $k$ 行中，每行包含两个整数 $r_i$ 和 $c_i$，表示包含图像的单元格的坐标（$1 \\le r_i \\le h；1 \\le c_i \\le w$）。保证所有 $k$ 个单元格坐标均不相同。", "outputFormat": "输出两个整数，分别表示使用按钮所能达到的最小图像紧凑性和实现该紧凑性所需的最小按钮点击次数。", "hint": "| Subtask | 分数 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $k=1$ |\n| $2$ | $10$ | $k=2$ |\n| $3$ | $29$ | $h=1$ |\n| $4$ | $11$ | $h,w\\le50$ |\n| $5$ | $15$ | $h,w\\le1000$ |\n| $6$ | $6$ | $h,w\\le200000$ |\n| $7$ | $24$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 监控 (Day 1)", "background": "翻译自 [ROI 2023 D1T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n商场大楼的安全由视频监控系统提供保障。\n\n安保人员的电脑上有一个程序，该程序在屏幕上显示出多个摄像头的视频。该程序的工作原理如下：\n\n屏幕上显示一个由 $h$ 行 $w$ 列组成的矩形网格。每个单元格可以为空，也可以显示来自某个摄像头的图像。为了控制程序中图像的位置，安保人员可以使用“左”、“右”、“上”和“下”按钮。\n\n- 按下“左”按钮会将每个单元格中的图像向左移动到其左边的单元格。最左边一行的图像会被移动到最右边一行的对应单元格中。\n- 按下“右”按钮会将每个单元格中的图像向右移动到其右边的单元格。最右边一行的图像会被移动到最左边一行的对应单元格中。\n- 按下“上”按钮会将每个单元格中的图像向上移动到其上方的单元格。最上面一行的图像会被移动到最下面一行的对应单元格中。\n- 按下“下”按钮会将每个单元格中的图像向下移动到其下方的单元格。最下面一行的图像会被移动到最上面一行的对应单元格中。\n\n网格的行由上至下编号，列由左至右编号。$(r, c)$ 表示第 $r$ 行第 $c$ 列的单元格。\n\n下面是一个有 $3$ 行 $4$ 列和三个包含图像的单元格的网格示例，其坐标分别为 $(1, 1),(2, 4),(3, 3)$，还显示了按下四个按钮后图像的新位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6a027tt.png)", "description": "安保人员希望屏幕上显示图像的单元格尽可能紧凑。图像的紧凑性可以用网格中包含所有显示的图像所需的最小矩形的面积来衡量。通过按下按钮可以改变图像的紧凑性。例如，下图刚开始的图像布局紧凑性为 $12$，按下一次“右”按钮和一次“上”按钮后，图像的紧凑性变为 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z3etvoy5.png)\n\n给定一个包含 $k$ 个图像的网格，计算通过使用“左”、“右”、“上”和“下”按钮可以达到的最小紧凑性，并计算达到最小紧凑性所需的最小按钮点击次数。", "inputFormat": "第一行输入三个整数 $h,w,k$，分别表示网格的尺寸和包含图像的单元格数量（$1 \\le h, w \\le 10^9;1 \\le k \\le 100,000$）。\n\n接下来的 $k$ 行中，每行包含两个整数 $r_i$ 和 $c_i$，表示包含图像的单元格的坐标（$1 \\le r_i \\le h；1 \\le c_i \\le w$）。保证所有 $k$ 个单元格坐标均不相同。", "outputFormat": "输出两个整数，分别表示使用按钮所能达到的最小图像紧凑性和实现该紧凑性所需的最小按钮点击次数。", "hint": "| Subtask | 分数 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $k=1$ |\n| $2$ | $10$ | $k=2$ |\n| $3$ | $29$ | $h=1$ |\n| $4$ | $11$ | $h,w\\le50$ |\n| $5$ | $15$ | $h,w\\le1000$ |\n| $6$ | $6$ | $h,w\\le200000$ |\n| $7$ | $24$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11105", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2023", "交互题", "Special Judge", "通信题", "Ad-hoc", "ROI（俄罗斯）"], "title": "[ROI 2023] 解密（数据有误） (Day 1)", "background": "**本题目前数据有误**。\n\n翻译自 [ROI 2023 D1T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n这是一道**通信题**。洛谷无法实现通信，所以这道题会使用**函数交互**的形式进行评测。\n\n**不要使用 `C++14 (GCC 9)` 语言提交**。\n\nAlesya 和 Boris 在计算机课上学习密码学。他们决定发明自己的一种加密消息的方法——BASE23（Boris-Alesya Super Encoding 2023）。\n\nAlesya 从 $1$ 到 $n$ 选择了 $k$ 个不同的整数，并将得到的集合称为 $T$。\n\nAlesya 想要以加密形式将集合 $T$ 作为消息传递给 Boris。为此，根据集合 $T$，Alesya 将构建另一个集合 $R$，并将其传递给 Boris，该集合也由整数组成，范围在 $1$ 到 $n$ 之间。\n\nAlesya 和 Boris 不希望加密后的消息大小发生变化（不像 BASE64 一样密文比明文长约 $\\frac13$），因此 $R$ 也必须恰好包含 $k$ 个数字。而且，他们认为如果 $T$ 和 $R$ 至少包含一个相同的数，则加密将不够可靠。因此，不应该存在一个既属于 $T$ 又属于 $R$ 的数字，即 $T \\cap R = \\varnothing$。保证 $k\\le \\frac{n}{2}$，因此始终可以根据集合 $T$ 构建至少一个集合 $R$。\n\n当 Boris 收到加密消息 $R$ 时，他将需要对其进行解密并获得原始消息 $T$。", "description": "帮助 Alesya 和 Boris 设计和实现 BASE23 的加密和解密算法。\n\n在本题中，你的程序需要实现下面两个函数（**不需要编写 main 函数**）：\n\n```cpp\nstd::vector<int> Encode(int n, int k, std::vector<int> T){\n\t// 加密过程\n\treturn R;\n}\nstd::vector<int> Decode(int n, int k, std::vector<int> R){\n\t// 解密过程\n\treturn T;\n}\n```\n\n你的 `Encode` 函数将扮演 Alesya 的角色，对数组进行加密。而 `Decode` 函数则将扮演 Boris 的角色，通过解密来得到原来的数组。**$T$ 和 $R$ 都按照递增顺序排列**。\n\n刚开始，交互库会根据该数据点的数据调用你编写的 `Encode` 函数，根据它的返回值判断该加密算法是否合法。接着，交互库调用 `Decode` 函数，判断它的返回值是否与原来的数据相同。如果相同，则认为这一份 BASE23 加解密代码是正确的。\n\n交互库会多次调用这两个函数，对应了原题中有多组数据。交互库会先将每组数据的 $T$ 全部加密，接着再按随机顺序把它们解密。具体的数据范围限制见“说明/提示”部分。", "inputFormat": "使用函数交互，程序不需要进行输入。", "outputFormat": "使用函数交互，程序不需要进行输出。", "hint": "交互库调用两个函数的次数（即数据组数）都不超过 $300000$。对于每一组数据，$2\\le n\\le 10^9,1\\le k\\le300000,k\\le\\frac n2$。对于每一个测试点，$\\sum k\\le300000$。\n\n原题的加、解密时间限制均为 $1\\text{s}$，空间限制均为 $512\\text{MB}$，不过由于在洛谷实现通信题的方式特殊，本题由特殊的时空限制。（目前的时空限制可能无法通过本题 qwq）\n\n如果你在本题莫名 CE，你可以尝试换一个语言提交。\n\n当你 UKE 时，查看你的错误提示。如果提示中含有“timeout”，应该是超时了。\n\n交互库编写：@[cff_0102](/user/542457)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 解密（数据有误） (Day 1)", "background": "**本题目前数据有误**。\n\n翻译自 [ROI 2023 D1T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n这是一道**通信题**。洛谷无法实现通信，所以这道题会使用**函数交互**的形式进行评测。\n\n**不要使用 `C++14 (GCC 9)` 语言提交**。\n\nAlesya 和 Boris 在计算机课上学习密码学。他们决定发明自己的一种加密消息的方法——BASE23（Boris-Alesya Super Encoding 2023）。\n\nAlesya 从 $1$ 到 $n$ 选择了 $k$ 个不同的整数，并将得到的集合称为 $T$。\n\nAlesya 想要以加密形式将集合 $T$ 作为消息传递给 Boris。为此，根据集合 $T$，Alesya 将构建另一个集合 $R$，并将其传递给 Boris，该集合也由整数组成，范围在 $1$ 到 $n$ 之间。\n\nAlesya 和 Boris 不希望加密后的消息大小发生变化（不像 BASE64 一样密文比明文长约 $\\frac13$），因此 $R$ 也必须恰好包含 $k$ 个数字。而且，他们认为如果 $T$ 和 $R$ 至少包含一个相同的数，则加密将不够可靠。因此，不应该存在一个既属于 $T$ 又属于 $R$ 的数字，即 $T \\cap R = \\varnothing$。保证 $k\\le \\frac{n}{2}$，因此始终可以根据集合 $T$ 构建至少一个集合 $R$。\n\n当 Boris 收到加密消息 $R$ 时，他将需要对其进行解密并获得原始消息 $T$。", "description": "帮助 Alesya 和 Boris 设计和实现 BASE23 的加密和解密算法。\n\n在本题中，你的程序需要实现下面两个函数（**不需要编写 main 函数**）：\n\n```cpp\nstd::vector<int> Encode(int n, int k, std::vector<int> T){\n\t// 加密过程\n\treturn R;\n}\nstd::vector<int> Decode(int n, int k, std::vector<int> R){\n\t// 解密过程\n\treturn T;\n}\n```\n\n你的 `Encode` 函数将扮演 Alesya 的角色，对数组进行加密。而 `Decode` 函数则将扮演 Boris 的角色，通过解密来得到原来的数组。**$T$ 和 $R$ 都按照递增顺序排列**。\n\n刚开始，交互库会根据该数据点的数据调用你编写的 `Encode` 函数，根据它的返回值判断该加密算法是否合法。接着，交互库调用 `Decode` 函数，判断它的返回值是否与原来的数据相同。如果相同，则认为这一份 BASE23 加解密代码是正确的。\n\n交互库会多次调用这两个函数，对应了原题中有多组数据。交互库会先将每组数据的 $T$ 全部加密，接着再按随机顺序把它们解密。具体的数据范围限制见“说明/提示”部分。", "inputFormat": "使用函数交互，程序不需要进行输入。", "outputFormat": "使用函数交互，程序不需要进行输出。", "hint": "交互库调用两个函数的次数（即数据组数）都不超过 $300000$。对于每一组数据，$2\\le n\\le 10^9,1\\le k\\le300000,k\\le\\frac n2$。对于每一个测试点，$\\sum k\\le300000$。\n\n原题的加、解密时间限制均为 $1\\text{s}$，空间限制均为 $512\\text{MB}$，不过由于在洛谷实现通信题的方式特殊，本题由特殊的时空限制。（目前的时空限制可能无法通过本题 qwq）\n\n如果你在本题莫名 CE，你可以尝试换一个语言提交。\n\n当你 UKE 时，查看你的错误提示。如果提示中含有“timeout”，应该是超时了。\n\n交互库编写：@[cff_0102](/user/542457)。", "locale": "zh-CN"}}}
{"pid": "P11106", "type": "P", "difficulty": 6, "samples": [["4\n5\n4 1 2 3 5\n10\n3 8 10 4 1 2 7 9 5 6\n3\n1 2 3\n6\n4 2 5 1 6 3", "5\n6\n3\n5"]], "limits": {"time": [1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] 峰值 (Day 1)", "background": "翻译自 [ROI 2023 D1T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n如果对于所有 $1 \\le j < i$，都有 $a_j < a_i$，则称 $a_i$ 为峰值。\n\n如果对于所有 $1 \\le j < i$，都有 $a_j > a_i$，则称 $a_i$ 为反峰值。", "description": "给定大小为 $n$ 的排列 $p_1,p_2,\\dots,p_n$。需要将其分为两个非空子序列 $q$ 和 $r$。每个元素 $p$ 必须恰好被分到一个子序列中。你需要最大化 $q$ 中的峰值数量和 $r$ 中的反峰值数量之和。", "inputFormat": "每个测试点由多组数据组成。第一行包含一个整数 $t(1 \\le t \\le 100,000)$，表示数据组数。接下来的 $2t$ 行，每两行是一组数据。\n\n每组数据的第一行包含一个整数 $n(2 \\le n \\le 200,000)$，表示排列的大小。\n\n每个输入数据集的第二行包含 $n$ 个整数 $p_1,p_2,\\dots,p_n$，表示原始排列。保证 $p$ 中的每个数字都恰好出现一次。\n\n每组数据中 $n$ 的总和不超过 $200,000$。", "outputFormat": "对于每组数据，输出一个整数，表示将 $p$ 拆分后，$q$ 中的峰值数量和 $r$ 中的反峰值数量之和的最大值。", "hint": "前两个样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eojr7qgz.png)\n\n设 $N=\\sum n$。\n\n| Subtask | 分值 | $n,N$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $n\\le16$ | $t\\le120$ |\n| $2$ | $22$ | $n\\le200,N\\le2000$ |  |\n| $3$ | $14$ | $N\\le2000$ |  |\n| $4$ | $10$ | $N\\le20000$ |  |\n| $5$ | $13$ | $N\\le200000$ | $p$ 的最大递减子序列的长度不超过 $2$ |\n| $6$ | $20$ | $N\\le200000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 峰值 (Day 1)", "background": "翻译自 [ROI 2023 D1T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n如果对于所有 $1 \\le j < i$，都有 $a_j < a_i$，则称 $a_i$ 为峰值。\n\n如果对于所有 $1 \\le j < i$，都有 $a_j > a_i$，则称 $a_i$ 为反峰值。", "description": "给定大小为 $n$ 的排列 $p_1,p_2,\\dots,p_n$。需要将其分为两个非空子序列 $q$ 和 $r$。每个元素 $p$ 必须恰好被分到一个子序列中。你需要最大化 $q$ 中的峰值数量和 $r$ 中的反峰值数量之和。", "inputFormat": "每个测试点由多组数据组成。第一行包含一个整数 $t(1 \\le t \\le 100,000)$，表示数据组数。接下来的 $2t$ 行，每两行是一组数据。\n\n每组数据的第一行包含一个整数 $n(2 \\le n \\le 200,000)$，表示排列的大小。\n\n每个输入数据集的第二行包含 $n$ 个整数 $p_1,p_2,\\dots,p_n$，表示原始排列。保证 $p$ 中的每个数字都恰好出现一次。\n\n每组数据中 $n$ 的总和不超过 $200,000$。", "outputFormat": "对于每组数据，输出一个整数，表示将 $p$ 拆分后，$q$ 中的峰值数量和 $r$ 中的反峰值数量之和的最大值。", "hint": "前两个样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eojr7qgz.png)\n\n设 $N=\\sum n$。\n\n| Subtask | 分值 | $n,N$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $21$ | $n\\le16$ | $t\\le120$ |\n| $2$ | $22$ | $n\\le200,N\\le2000$ |  |\n| $3$ | $14$ | $N\\le2000$ |  |\n| $4$ | $10$ | $N\\le20000$ |  |\n| $5$ | $13$ | $N\\le200000$ | $p$ 的最大递减子序列的长度不超过 $2$ |\n| $6$ | $20$ | $N\\le200000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11107", "type": "P", "difficulty": 7, "samples": [["998244353\n6\n3 2 1\n3 2 2\n3 2 3\n3 2 4\n3 5 1\n4 6 1", "6\n1\n0\n0\n29\n2461"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] Ultra mex (Day 1)", "background": "翻译自 [ROI 2023 D1T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n假设 $A$ 是一个非负整数的集合。将 $A$ 中不存在的最小非负整数记为 $\\operatorname{mex}(A)$。例如，$\\operatorname{mex}(\\{0, 1, 2, 4, 5, 9\\}) = 3$。\n\n我们还定义了一种在含有 $0$ 的集合 $A$ 上的操作，称为 $\\operatorname{Ultra}$。假设 $m = \\operatorname{mex}(A)$，因为 $0\\in A$，显然 $m > 0$。按照以下方法构建新的集合 $\\operatorname{Ultra}(A)$：对 $A$ 中的每个元素异或 $m-1$。例如，$\\operatorname{Ultra}(\\{0, 1, 2, 4, 5, 9\\}) = \\{0\\oplus2, 1\\oplus2, 2\\oplus2, 4\\oplus2, 5\\oplus2, 9\\oplus2\\} = \\{2, 3, 0, 6, 7, 11\\} = \\{0, 2, 3, 6, 7, 11\\}$。\n\n不难发现，如果集合 $A$ 包含 $0$，则集合 $\\operatorname{Ultra}(A)$ 也包含 $0$。\n\n我们选择由 $0$ 到 $2^{k}-1$ 之间的整数组成的集合 $A_0$，且 $0$ 在 $A_0$ 中。考虑以下序列：\n\n- $m_0 = \\operatorname{mex}(A_0),A_1 = \\operatorname{Ultra}(A_0)$。\n- $m_1 = \\operatorname{mex}(A_1),A_2 = \\operatorname{Ultra}(A_1)$。\n- $\\dots$\n- $m_i = \\operatorname{mex}(A_i),A_{i+1} = \\operatorname{Ultra}(A_i)$。\n\n如果从某个数 $l$ 开始，数字 $m_i$ 不再变化，也就是说，对于所有 $i \\ge l$，$m_i = m_l$，则称集合 $A_0$ 是 mex-stable 的，将 $m_l$ 称为集合 $A_0$ 的 mex-limit。", "description": "给定整数 $k,n,p$，计算满足以下条件的集合 $A_0$ 的数量：\n\n- 它包含从 $0$ 到 $2^{k}-1$ 的 $n$ 个不同整数（其中 $0$ 必须包含在 $A_0$ 中）；\n- 它是 mex-stable 的；\n- 它的 mex-limit 等于 $p$。\n\n由于答案可能很大，输出答案对 $M$ 取模后的结果。保证 $M - 1$ 能被 $2^{18}$（$262144$）整除。", "inputFormat": "第一行包含一个整数 $M$，表示要对其取模的模数（$3 \\le M \\le 10^9$ 且 $M - 1$ 可被 $2^{18}$ 整除）（所以 $M$ 实际上不可能小于 $2^{18}+1$）。保证 $M$ 是一个质数。\n\n第二行包含一个整数 $t$，表示输入数据的组数（$1 \\le t \\le 100000$）。\n\n对于每组输入数据，包含三个整数 $k,n,p$（$1 \\le k \\le 17$，$ 1 \\le n, p \\le 2^k$）。", "outputFormat": "对于每组输入数据，输出一行，包含一个整数，表示满足条件的集合 $A$ 的数量对 $M$ 取模后的结果。", "hint": "除样例外，本题有三十个子任务，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g4vi73zu.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] Ultra mex (Day 1)", "background": "翻译自 [ROI 2023 D1T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day1.pdf)。\n\n假设 $A$ 是一个非负整数的集合。将 $A$ 中不存在的最小非负整数记为 $\\operatorname{mex}(A)$。例如，$\\operatorname{mex}(\\{0, 1, 2, 4, 5, 9\\}) = 3$。\n\n我们还定义了一种在含有 $0$ 的集合 $A$ 上的操作，称为 $\\operatorname{Ultra}$。假设 $m = \\operatorname{mex}(A)$，因为 $0\\in A$，显然 $m > 0$。按照以下方法构建新的集合 $\\operatorname{Ultra}(A)$：对 $A$ 中的每个元素异或 $m-1$。例如，$\\operatorname{Ultra}(\\{0, 1, 2, 4, 5, 9\\}) = \\{0\\oplus2, 1\\oplus2, 2\\oplus2, 4\\oplus2, 5\\oplus2, 9\\oplus2\\} = \\{2, 3, 0, 6, 7, 11\\} = \\{0, 2, 3, 6, 7, 11\\}$。\n\n不难发现，如果集合 $A$ 包含 $0$，则集合 $\\operatorname{Ultra}(A)$ 也包含 $0$。\n\n我们选择由 $0$ 到 $2^{k}-1$ 之间的整数组成的集合 $A_0$，且 $0$ 在 $A_0$ 中。考虑以下序列：\n\n- $m_0 = \\operatorname{mex}(A_0),A_1 = \\operatorname{Ultra}(A_0)$。\n- $m_1 = \\operatorname{mex}(A_1),A_2 = \\operatorname{Ultra}(A_1)$。\n- $\\dots$\n- $m_i = \\operatorname{mex}(A_i),A_{i+1} = \\operatorname{Ultra}(A_i)$。\n\n如果从某个数 $l$ 开始，数字 $m_i$ 不再变化，也就是说，对于所有 $i \\ge l$，$m_i = m_l$，则称集合 $A_0$ 是 mex-stable 的，将 $m_l$ 称为集合 $A_0$ 的 mex-limit。", "description": "给定整数 $k,n,p$，计算满足以下条件的集合 $A_0$ 的数量：\n\n- 它包含从 $0$ 到 $2^{k}-1$ 的 $n$ 个不同整数（其中 $0$ 必须包含在 $A_0$ 中）；\n- 它是 mex-stable 的；\n- 它的 mex-limit 等于 $p$。\n\n由于答案可能很大，输出答案对 $M$ 取模后的结果。保证 $M - 1$ 能被 $2^{18}$（$262144$）整除。", "inputFormat": "第一行包含一个整数 $M$，表示要对其取模的模数（$3 \\le M \\le 10^9$ 且 $M - 1$ 可被 $2^{18}$ 整除）（所以 $M$ 实际上不可能小于 $2^{18}+1$）。保证 $M$ 是一个质数。\n\n第二行包含一个整数 $t$，表示输入数据的组数（$1 \\le t \\le 100000$）。\n\n对于每组输入数据，包含三个整数 $k,n,p$（$1 \\le k \\le 17$，$ 1 \\le n, p \\le 2^k$）。", "outputFormat": "对于每组输入数据，输出一行，包含一个整数，表示满足条件的集合 $A$ 的数量对 $M$ 取模后的结果。", "hint": "除样例外，本题有三十个子任务，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g4vi73zu.png)", "locale": "zh-CN"}}}
{"pid": "P11108", "type": "P", "difficulty": 3, "samples": [["7 1 4\n2 2 4\n0\n2 6 5\n2 3 7\n0\n0\n0\n1\n4\n3\n5", "3\n2\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] 蜗牛与富士山 (Day 2)", "background": "翻译自 [ROI 2023 D2T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n在爬上富士山的山顶后，蜗牛想要下山。在山坡上有一个类似二叉树的小径。\n\n该树包含 $n$ 个被 $n-1$ 个小径连接的节点。树的根位于山顶。一些节点处的小径到头了，它们是树的叶子节点。除了叶子节点外，每个节点向下山坡延伸两条小径，其中一条向左，另一条向右。\n\n蜗牛希望从根部开始沿着树向下爬并到达其中一个叶子节点。在路径上，蜗牛可以选择两个方向之一进行进一步下降：向左或向右。\n\n刚开始在山顶，蜗牛可以往任意方向（左或右）开始下降。在每个后续节点中，如果它选择与前一个节点选择的方向不同的方向，则它要进行转弯。\n\n由于蜗牛转弯不太方便，所以在从根到叶子的整个路径上，蜗牛最多只准备转弯 $k$ 次。", "description": "将树的节点从 $1$ 到 $n$ 编号，其中根节点编号为 $1$。给定 $q$ 个查询。每个查询给出一个节点 $u_i$，要求找出蜗牛在从根开始下降时，最多转弯 $k$ 次，且通过节点 $u_i$ 的路径上能到达的叶子节点数量。", "inputFormat": "第一行给出三个整数 $n,k,q$，分别表示树中节点的数量、蜗牛准备转动的最大次数，以及查询的数量。\n\n接下来的 $n$ 行描述了树的结构。第 $i$ 行的第一个整数 $t_i$ 表示节点 $i$ 的小径（子树）数量（$t_i = 0$ 或 $2$）。如果 $t_i = 2$，则在同一行中给出两个整数 $l_i$ 和 $r_i$，分别表示从节点 $i$ 出发的左侧和右侧小径连接到的节点编号（$1 \\le l_i,r_i \\le n$）。保证输入符合要求。\n\n接下来的 $q$ 行给出了查询。第 $i$ 行给出一个整数 $u_i$，表示蜗牛路径经过的节点编号（$1 \\le u_i \\le n$）。", "outputFormat": "对于每一次询问，输出一行一个整数表示答案。", "hint": "样例的树长这样。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tqrsn5y6.png)\n\n第一次询问（灰色为可到达的叶子节点，虚线为不可到达的节点）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3415ax74.png)\n\n第二次询问：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pojddavc.png)\n\n第三次询问：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0zoj4nas.png)\n\n第四次询问（因为最多转一次弯，所以并没有合法的路线，故输出 $0$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ib954xz.png)\n\n对于 $100\\%$ 的数据，$3 \\le n \\le 200000$，$0 \\le k \\le n$，$1 \\le q \\le 200000$。\n\n| Subtask | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $11$ | $n\\le500,q\\le500$，所有 $u_i$ 均为叶子节点 |\n| $2$ | $12$ | $n\\le500,q\\le500$ |\n| $3$ | $10$ | $k=n$ |\n| $4$ | $14$ | $k=0$ |\n| $5$ | $19$ | 所有 $u_i$ 均为叶子节点 |\n| $6$ | $34$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 蜗牛与富士山 (Day 2)", "background": "翻译自 [ROI 2023 D2T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n在爬上富士山的山顶后，蜗牛想要下山。在山坡上有一个类似二叉树的小径。\n\n该树包含 $n$ 个被 $n-1$ 个小径连接的节点。树的根位于山顶。一些节点处的小径到头了，它们是树的叶子节点。除了叶子节点外，每个节点向下山坡延伸两条小径，其中一条向左，另一条向右。\n\n蜗牛希望从根部开始沿着树向下爬并到达其中一个叶子节点。在路径上，蜗牛可以选择两个方向之一进行进一步下降：向左或向右。\n\n刚开始在山顶，蜗牛可以往任意方向（左或右）开始下降。在每个后续节点中，如果它选择与前一个节点选择的方向不同的方向，则它要进行转弯。\n\n由于蜗牛转弯不太方便，所以在从根到叶子的整个路径上，蜗牛最多只准备转弯 $k$ 次。", "description": "将树的节点从 $1$ 到 $n$ 编号，其中根节点编号为 $1$。给定 $q$ 个查询。每个查询给出一个节点 $u_i$，要求找出蜗牛在从根开始下降时，最多转弯 $k$ 次，且通过节点 $u_i$ 的路径上能到达的叶子节点数量。", "inputFormat": "第一行给出三个整数 $n,k,q$，分别表示树中节点的数量、蜗牛准备转动的最大次数，以及查询的数量。\n\n接下来的 $n$ 行描述了树的结构。第 $i$ 行的第一个整数 $t_i$ 表示节点 $i$ 的小径（子树）数量（$t_i = 0$ 或 $2$）。如果 $t_i = 2$，则在同一行中给出两个整数 $l_i$ 和 $r_i$，分别表示从节点 $i$ 出发的左侧和右侧小径连接到的节点编号（$1 \\le l_i,r_i \\le n$）。保证输入符合要求。\n\n接下来的 $q$ 行给出了查询。第 $i$ 行给出一个整数 $u_i$，表示蜗牛路径经过的节点编号（$1 \\le u_i \\le n$）。", "outputFormat": "对于每一次询问，输出一行一个整数表示答案。", "hint": "样例的树长这样。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tqrsn5y6.png)\n\n第一次询问（灰色为可到达的叶子节点，虚线为不可到达的节点）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3415ax74.png)\n\n第二次询问：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pojddavc.png)\n\n第三次询问：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0zoj4nas.png)\n\n第四次询问（因为最多转一次弯，所以并没有合法的路线，故输出 $0$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ib954xz.png)\n\n对于 $100\\%$ 的数据，$3 \\le n \\le 200000$，$0 \\le k \\le n$，$1 \\le q \\le 200000$。\n\n| Subtask | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $11$ | $n\\le500,q\\le500$，所有 $u_i$ 均为叶子节点 |\n| $2$ | $12$ | $n\\le500,q\\le500$ |\n| $3$ | $10$ | $k=n$ |\n| $4$ | $14$ | $k=0$ |\n| $5$ | $19$ | 所有 $u_i$ 均为叶子节点 |\n| $6$ | $34$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11109", "type": "P", "difficulty": 6, "samples": [["2\n8\n12 14\n1 3\n2 4\n1 10\n5 6\n7 9\n8 10\n11 13\n6\n1 2\n2 4\n1 2\n1 4\n5 7\n6 8", "2 5 3 4\n1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] 会议 (Day 2)", "background": "翻译自 [ROI 2023 D2T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n秘鲁科学和教育协会正在组织一次会议，计划进行 $n$ 个活动，编号从 $1$ 到 $n$。$l_i$ 和 $r_i$ 分别表示第 $i$ 个活动的开始和结束时间。由于某些活动可能冲突，一个人不一定能参加所有会议活动。如果 $r_i < l_j$ 或者 $r_j < l_i$，则认为活动 $i$ 和 $j$ 不冲突。\n\n如果在同一个集合中任意两个不同的活动不冲突，则称该集合为相互兼容的。假设会议中最大相互兼容集合的大小为 $m$。则将会议的饱和度定义为 $\\frac{n}{m}$。由于资金减少，会议组织者决定减少一半数量的会议活动。同时，他们希望会议的饱和度保持不变，因此在减少的会议活动中，最大相互兼容集合的大小也必须减少一半。\n\n本题保证在原始会议计划中，会议活动的数量 $n$ 和最大兼容集合的大小 $m$ 恰好都是偶数。", "description": "请帮助组织者选择 $\\frac{n}{2}$ 个计划中的会议活动，以使所选活动的最大兼容集合的大小为 $\\frac{m}{2}$。", "inputFormat": "每个测试点包含多组数据。\n\n第一行包含一个整数 $t$，即输入数据集的数量（$1 \\le t \\le 50000$）。\n\n每组数据的第一行包含一个整数 $n$，即原始计划中的活动数量（$2 \\le n \\le 100000$，$n$ 是偶数）。\n\n在接下来的 $n$ 行中，对于每个数据集的描述，给出了活动的描述。每行包含两个整数 $l_i$ 和 $r_i$，分别是第 $i$ 个活动的开始和结束时间（$1 \\le l_i < r_i \\le 10^9$）。\n\n保证原始计划的最大兼容集合的大小 $m$ 是偶数，且 $\\sum n\\le100000$。", "outputFormat": "对于每组数据，在一行中输出 $\\frac{n}{2}$ 个不同活动的编号，即保留下来的应该进行的活动编号。如果有多个合适的答案，可以输出任意一个。所选择的活动的最大相互兼容集合的大小应为 $\\frac{m}{2}$。", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7qt38uep.png)\n\n上图是第一组输入数据中的初始活动集合。其中一种可能的最大相互兼容集合用粗虚线标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m7k9p90a.png)\n\n上图是第一组输入数据的答案的活动集合。其中一种可能的最大相互兼容集合用粗虚线标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4o9mevq.png)\n\n第二组输入数据初始时的活动集合。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bu7gii0j.png)\n\n第二组输入数据答案中的活动集合。\n\n设 $N=\\sum n$。我们称活动 $i$ 完全覆盖活动 $j$，当且仅当 $l_i\\le l_j<r_j\\le r_i$。\n\n| Subtask | 分值 | $N\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $100000$ | 任意两项会议活动不冲突 |\n| $2$ | $20$ | $20$ |  |\n| $3$ | $7$ | $30$ |  |\n| $4$ | $15$ | $500$ | 对于任意两项活动 $i$ 和 $j$，它们要么不冲突，要么其中一项完全覆盖另一项活动；且有一项活动完全覆盖其它所有活动 |\n| $5$ | $15$ | $100000$ | 对于任意两项活动 $i$ 和 $j$，它们要么不冲突，要么其中一项完全覆盖另一项活动 |\n| $6$ | $13$ | $500$ |  |\n| $7$ | $13$ | $5000$ |  |\n| $8$ | $12$ | $100000$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 会议 (Day 2)", "background": "翻译自 [ROI 2023 D2T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n秘鲁科学和教育协会正在组织一次会议，计划进行 $n$ 个活动，编号从 $1$ 到 $n$。$l_i$ 和 $r_i$ 分别表示第 $i$ 个活动的开始和结束时间。由于某些活动可能冲突，一个人不一定能参加所有会议活动。如果 $r_i < l_j$ 或者 $r_j < l_i$，则认为活动 $i$ 和 $j$ 不冲突。\n\n如果在同一个集合中任意两个不同的活动不冲突，则称该集合为相互兼容的。假设会议中最大相互兼容集合的大小为 $m$。则将会议的饱和度定义为 $\\frac{n}{m}$。由于资金减少，会议组织者决定减少一半数量的会议活动。同时，他们希望会议的饱和度保持不变，因此在减少的会议活动中，最大相互兼容集合的大小也必须减少一半。\n\n本题保证在原始会议计划中，会议活动的数量 $n$ 和最大兼容集合的大小 $m$ 恰好都是偶数。", "description": "请帮助组织者选择 $\\frac{n}{2}$ 个计划中的会议活动，以使所选活动的最大兼容集合的大小为 $\\frac{m}{2}$。", "inputFormat": "每个测试点包含多组数据。\n\n第一行包含一个整数 $t$，即输入数据集的数量（$1 \\le t \\le 50000$）。\n\n每组数据的第一行包含一个整数 $n$，即原始计划中的活动数量（$2 \\le n \\le 100000$，$n$ 是偶数）。\n\n在接下来的 $n$ 行中，对于每个数据集的描述，给出了活动的描述。每行包含两个整数 $l_i$ 和 $r_i$，分别是第 $i$ 个活动的开始和结束时间（$1 \\le l_i < r_i \\le 10^9$）。\n\n保证原始计划的最大兼容集合的大小 $m$ 是偶数，且 $\\sum n\\le100000$。", "outputFormat": "对于每组数据，在一行中输出 $\\frac{n}{2}$ 个不同活动的编号，即保留下来的应该进行的活动编号。如果有多个合适的答案，可以输出任意一个。所选择的活动的最大相互兼容集合的大小应为 $\\frac{m}{2}$。", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7qt38uep.png)\n\n上图是第一组输入数据中的初始活动集合。其中一种可能的最大相互兼容集合用粗虚线标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m7k9p90a.png)\n\n上图是第一组输入数据的答案的活动集合。其中一种可能的最大相互兼容集合用粗虚线标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4o9mevq.png)\n\n第二组输入数据初始时的活动集合。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bu7gii0j.png)\n\n第二组输入数据答案中的活动集合。\n\n设 $N=\\sum n$。我们称活动 $i$ 完全覆盖活动 $j$，当且仅当 $l_i\\le l_j<r_j\\le r_i$。\n\n| Subtask | 分值 | $N\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $100000$ | 任意两项会议活动不冲突 |\n| $2$ | $20$ | $20$ |  |\n| $3$ | $7$ | $30$ |  |\n| $4$ | $15$ | $500$ | 对于任意两项活动 $i$ 和 $j$，它们要么不冲突，要么其中一项完全覆盖另一项活动；且有一项活动完全覆盖其它所有活动 |\n| $5$ | $15$ | $100000$ | 对于任意两项活动 $i$ 和 $j$，它们要么不冲突，要么其中一项完全覆盖另一项活动 |\n| $6$ | $13$ | $500$ |  |\n| $7$ | $13$ | $5000$ |  |\n| $8$ | $12$ | $100000$ |  |", "locale": "zh-CN"}}}
{"pid": "P11110", "type": "P", "difficulty": 6, "samples": [["8 5\n17 1 3 2 100 5 6 1\n0\n6 15 3\n9 4 4\n5 15 3\n17 34 1\n16 33 2", "Yes\nNo\nNo\nYes\nNo"], ["8 5\n17 1 3 2 100 5 6 1\n1\n6 15 3\n10 5 5\n6 16 4\n18 35 2\n21 38 7", "Yes\nNo\nNo\nYes\nNo"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] 陶陶装苹果 (Day 2)", "background": "翻译自 [ROI 2023 D2T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n淘淘有 $n$ 个整数重量的苹果，它们分别为 $w_1,w_2,\\dots,w_n$，这些苹果放在桌子上，同时有两个容量足够大的篮子。\n\n淘淘选择一个整数 $k$，他可以将每个重量 $w_i \\le k$ 的苹果放入其中一个篮子，也可以将其留在桌子上。重量大于 $k$ 的苹果将始终留在桌子上。\n\n如果淘淘能够将重量不超过 $k$ 的苹果放入篮子中，使得第一个篮子中苹果的重量之和等于 $x$，而第二个篮子中苹果的重量之和等于 $y$，则称 $(x, y)$ 是 $k$ 的可达到对。如果对于所有满足 $0 \\le x \\le a$ 和 $0 \\le y \\le b$ 的 $x$ 和 $y$，$(x, y)$ 都是 $k$ 可达到的，则称 $(a, b)$ 是 $k-\\!$ 完美的。", "description": "淘淘会询问你 $q$ 次，请你判断对于每个 $(k,a,b)$ 三元组，$(a, b)$ 是否是 $k-\\!$ 完美的。", "inputFormat": "第一行给出两个整数 $n$ 和 $q$，表示淘淘拥有的苹果数量和要处理的查询数量（$1 \\le n, q \\le 300,000$）。\n\n第二行给出 $n$ 个整数 $w_1,w_2,\\dots,w_n$，表示陶陶拥有的苹果的重量（$1 \\le w_i \\le 10^{12}$）。\n\n第三行给出一个整数 $z$，在接下来的输入中会用到（$0 \\le z \\le 10^6$）。\n\n接下来的 $q$ 行给出查询的描述。查询编号从 $1$ 到 $q$。每行包含三个整数 $j,c,d$（$0 \\le j, c, d \\le 10^{18}$），表示这个查询中的 $k = j - v \\times z,a = c - v \\times z,b = d - v \\times z$，其中 $v$ 是在这个查询前答案为 `Yes` 的询问的编号和。保证 $k,a,b \\ge 0$。\n\n在本题中，大多数测试点的 $z$ 都等于 $0$，此时 $k,a,b$ 的值分别等于 $j,c,d$。", "outputFormat": "对于每个查询，如果在该查询中 $(a, b)$ 对是 $k-\\!$ 完美的，则输出 `Yes`，否则输出 `No`。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/5kde4c21.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 陶陶装苹果 (Day 2)", "background": "翻译自 [ROI 2023 D2T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n淘淘有 $n$ 个整数重量的苹果，它们分别为 $w_1,w_2,\\dots,w_n$，这些苹果放在桌子上，同时有两个容量足够大的篮子。\n\n淘淘选择一个整数 $k$，他可以将每个重量 $w_i \\le k$ 的苹果放入其中一个篮子，也可以将其留在桌子上。重量大于 $k$ 的苹果将始终留在桌子上。\n\n如果淘淘能够将重量不超过 $k$ 的苹果放入篮子中，使得第一个篮子中苹果的重量之和等于 $x$，而第二个篮子中苹果的重量之和等于 $y$，则称 $(x, y)$ 是 $k$ 的可达到对。如果对于所有满足 $0 \\le x \\le a$ 和 $0 \\le y \\le b$ 的 $x$ 和 $y$，$(x, y)$ 都是 $k$ 可达到的，则称 $(a, b)$ 是 $k-\\!$ 完美的。", "description": "淘淘会询问你 $q$ 次，请你判断对于每个 $(k,a,b)$ 三元组，$(a, b)$ 是否是 $k-\\!$ 完美的。", "inputFormat": "第一行给出两个整数 $n$ 和 $q$，表示淘淘拥有的苹果数量和要处理的查询数量（$1 \\le n, q \\le 300,000$）。\n\n第二行给出 $n$ 个整数 $w_1,w_2,\\dots,w_n$，表示陶陶拥有的苹果的重量（$1 \\le w_i \\le 10^{12}$）。\n\n第三行给出一个整数 $z$，在接下来的输入中会用到（$0 \\le z \\le 10^6$）。\n\n接下来的 $q$ 行给出查询的描述。查询编号从 $1$ 到 $q$。每行包含三个整数 $j,c,d$（$0 \\le j, c, d \\le 10^{18}$），表示这个查询中的 $k = j - v \\times z,a = c - v \\times z,b = d - v \\times z$，其中 $v$ 是在这个查询前答案为 `Yes` 的询问的编号和。保证 $k,a,b \\ge 0$。\n\n在本题中，大多数测试点的 $z$ 都等于 $0$，此时 $k,a,b$ 的值分别等于 $j,c,d$。", "outputFormat": "对于每个查询，如果在该查询中 $(a, b)$ 对是 $k-\\!$ 完美的，则输出 `Yes`，否则输出 `No`。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/5kde4c21.png)", "locale": "zh-CN"}}}
{"pid": "P11111", "type": "P", "difficulty": 6, "samples": [["1\n9 3\n4 7 15\n1 2\n2 4\n2 5\n1 3\n3 6\n3 7\n6 8\n6 9\n4 4\n2 2\n5 5\n3 3\n2 2\n6 6\n3 3\n4 4\n3 3\n18 19 20\n\n1\n\n2\n\n3\n\n0", "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n-1 10 -1\n\n-1\n\n4 2 5 3 2 6 3 4 3\n\n-1\n"], ["3\n3 4\n3 4 11\n1 2\n2 3\n0 1\n0 1\n0 1\n0 1 2 3\n\n2\n\n0\n4 6\n1 2 11\n1 2\n2 3\n3 4\n0 2\n1 1\n1 1\n1 2\n0 1 2 3 4 5\n\n5\n\n2\n\n3\n\n0\n5 7\n11 31 101\n1 2\n2 3\n2 4\n3 5\n1 2\n1 5\n0 4\n1 4\n4 6\n13 12 11 10 9 8 6\n\n3\n\n5\n\n7\n\n0", "\n\n\n\n\n\n\n\n\n12 8 3 -1\n\n1 0 0\n\n\n\n\n\n\n\n\n\n\n\n-1 -1 4 14 9 -1\n\n2 1 1 2\n\n-1\n\n1 1 1 1\n\n\n\n\n\n\n\n\n\n\n\n\n\n-1 127 23 58 13 90 91\n\n2 5 4 1 6\n\n2 4 4 3 4\n\n1 1 0 1 4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "交互题", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2023] 生产计划 (Day 2)", "background": "翻译自 [ROI 2023 D2T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n**这是一道 IO 交互题**。\n\n某个国家准备制定汽车的生产计划。\n\n该国总共有 $n$ 个城市，每个城市中有一个工厂，它们要参与汽车的生产。第 $i$ 个城市的工厂可以雇佣 $l_i$ 到 $r_i$ 个人。\n\n一些城市之间通过双向道路相连，且道路网络呈树状结构。因此，如果要从一个城市到另一个城市，在不重复经过同一个城市的情况下，只有一种路径。\n\n生产计划被定义为一个整数序列 $[a_1, a_2, \\dots , a_n]$，其中 $a_i$ 表示在第 $i$ 个工厂工作的人数，满足 $l_i\\le a_i\\le r_i$。在制定生产计划后，一些工厂将被选为装配工厂，这些工厂负责装配汽车，而其它工厂则负责生产零部件。如果没有两个装配工厂所在的城市被一条道路直接连接，那么这个生产计划就是合理的。在所有可能的合理的计划中，会选择装配工厂的工人总数最大的一个计划。这个数就被称为计划 $[a_1, a_2, \\dots , a_n]$ 的效率。", "description": "你需要确定是否存在效率为 $v_i$ 的计划。如果存在这样的计划，则可能需要输出这样一个计划。\n\n制定计划的过程包括两个阶段。\n\n在第一阶段，你将获得 $v_1,v_2,\\dots,v_q$ 的值。你需要确定是否存在效率为 $v_i$ 的计划，如果不存在，输出 `-1`；如果存在，输出一个非负整数 $k_i$。\n\n对 $k$ 的定义如下：给定三个整数 $x,y,m$，定义计划 $[a_1, a_2, \\dots , a_n]$ 的 $k = \\bigoplus\\limits^n_{j=1} ( (x\\times j + y\\times a_j^2) \\bmod m )$，其中 $\\oplus$ 为按位异或。\n\n因为符合要求的计划可能不止一个，所以 $k_i$ 也有很多种可能，你需要输出其中一种可能的 $k_i$。\n\n在第二阶段，某些计划的可行性将被检查。在每个查询中，你的程序会得到一个整数 $i$（$1\\le i\\le q$）。对于这个查询，如果不能制定效率为 $v_i$ 的计划，你需要输出 `-1`；否则，你需要输出 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$l_i\\le a_i\\le r_i$），表示一个制定的计划。这个计划计算出来的 $k$ 值应该等于你先前输出的 $k_i$，效率应该等于 $v_i$。\n\n在程序输出每个 $k$ 之前，无法知道哪些计划会被检查。因此，你需要保证在第一阶段中输出的 $k_i$ 是正确的。", "inputFormat": "本题多测，第一行输入一个整数 $t$（$1\\le t\\le10^4$），表示数据组数。\n\n在每组数据中：\n\n第一行包含两个整数 $n,q$（$2 \\le n \\le 2 \\times 10^5$，$1 \\le q \\le 2 \\times 10^5$），分别表示城市的数量和要制定的计划的数量。\n\n第二行包含三个整数 $x,y,m$（$11 \\le m \\le 2^{30}$，$0 \\le x,y < m$），即计算 $k$ 的参数。\n\n接下来的 $n-1$ 行描述了城市之间的道路网络。在这 $n-1$ 行中，第 $i$ 行包含两个整数 $s_i,f_i$（$1 \\le s_i,f_i \\le n$，$s_i \\ne f_i$），表示第 $i$ 条道路连接城市 $s_i$ 和 $f_i$ 的双向道路。保证这些道路能够构成一棵树。\n\n接下来的 $n$ 行中的第 $i$ 行包含两个整数 $l_i,r_i$（$0 \\le l_i \\le r_i \\le 10^9$），表示第 $i$ 个城市的工人数量限制。\n\n接下来的一行包含 $q$ 个整数 $v_1,v_2,\\dots,v_q$（$0 \\le v_i \\le \\sum\\limits^n_{i=1}r_i$），表示需要制定的计划的效率值。保证所有的 $v_i$ 都是不同的。\n\n接下来，你需要输出第一部分中你需要输出的内容（具体方式见“输出格式”）。输出完成后，才可以读入第二部分的数据。\n\n接下来若干行，每行输入一个数 $i$（$0\\le i\\le q$）。当 $i\\ne0$ 时，$i$ 表示要检查的计划的编号。在按照输出格式的要求输出后，交互库才会继续给你下一个 $i$。当 $i=0$ 时，表示第二部分的检查结束，即这一组数据输入完成。如果这不是最后一组数据，你的程序应该立即开始读入下一组数据。\n\n保证 $\\sum n,\\sum q\\le2\\times10^5$，且每组数据中检查计划次数 $c$ 的总和不超过 $10^4$，$\\sum n\\times c\\le10^6$。", "outputFormat": "读取完每组输入的第一部分后，需要输出 $q$ 个整数 $k_1,k_2,\\dots,k_q$（$-1 \\le k_i < 2^{30}$），如果 $k_i = -1$ 则表示无法制定效率值为 $v_i$ 的计划。输出后，交互库才会给你第二部分的数据。\n\n在读入第二部分检查的计划编号 $i$（且 $i\\ne0$）后，如果第 $i$ 个计划无法制定，即 $k_i=-1$ 时，则输出 `-1`。否则，需要输出 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$l_i \\le a_i \\le r_i$），表示所制定的计划。该计划的 $k$ 应等于 $k_i$，并且效率应等于 $v_i$。\n\nIO 交互题在输出后应刷新缓冲区。\n\n如果在 C++ 中使用了 `cout << ... << endl`，在 Java 中使用了 `System.out.println`，在 Python 中使用了 `print`，在 Pascal 中使用了 `writeln`，那么输出缓冲区会自动刷新，不需要额外操作。\n\n如果使用了其他输出方法，建议手动刷新输出缓冲区。在刷新输出缓冲区时，可以使用 C 和 C++ 中的 `fflush(stdout)`，Pascal 中的 `flush(output)`，Java 中的 `System.out.flush()`，Python 中的 `sys.stdout.flush()`。", "hint": "在样例中，程序与交互库的交互用空行分隔。这样做是为了便于理解，清楚地知道哪个消息是对哪个消息的回应。在实际测试中，不会有多余的空行（当然，会有换行）。\n\n第一个样例只有一种制定计划的方法，即 $a = [4, 2, 5, 3, 2, 6, 3, 4, 3]$。它的效率为 $19$，计算出来的 $k$ 为 $10$。\n\n第二个样例有三组数据。\n\n- 在第一组数据中：\n  - 存在唯一一个效率为 $0$ 的计划，$a = [0, 0, 0]$。该计划的 $k$ 为 $12$。\n  - 存在效率为 $1$ 的计划，例如 $a = [1, 0, 0]$。该计划的 $k$ 为 $8$。\n  - 存在效率为 $2$ 的计划，例如 $a = [1, 0, 1]$。该计划的 $k$ 为 $3$。\n  - 不存在效率为 $3$ 的计划。\n  - 在这四个请求的计划中，检查了计划编号 $i = 2$（$v_2 = 1$）。\n- 在第二组数据中：\n  - 不存在效率为 $0$ 的计划。\n  - 不存在效率为 $1$ 的计划。\n  - 存在效率为 $2$ 的计划，例如 $a = [1, 1, 1, 1]$。该计划的 $k$ 为 $4$。\n  - 存在效率为 $3$ 的计划，例如 $a = [2, 1, 1, 1]$。该计划的 $k$ 为 $14$。\n  - 存在唯一的效率为 $4$ 的计划 $a = [2, 1, 1, 2]$。该计划的 $k$ 为 $9$。\n  - 不存在效率为 $5$ 的计划。\n  - 在这六个请求的计划中，检查了计划编号 $i = 5$（$v_5 = 4$），$i = 2$（$v_2 = 1$）和 $i = 3$（$v_3 = 2$）。\n- 在第三组数据的第一个部分中，请求了以下计划（从第二个开始，因为效率为 $v_1 = 13$ 的计划不存在）：$[2, 5, 4, 4, 6]$；$[2, 5, 4, 1, 6]$；$[2, 4, 4, 4, 4]$；$[2, 4, 4, 3, 4]$；$[2, 4, 4, 2, 4]$；$[1, 1, 0, 1, 4]$。\n\n| 子任务 | 分值 | $n,\\sum n$ | $\\sum q$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $11$ |  |  | $l_i=r_i$ |\n| $2$ | $9$ |  |  | $c=0$ |\n| $3$ | $12$ |  |  | $l_i=0,r_i\\le1$ |\n| $4$ | $4$ |  |  | $l_i=0$ |\n| $5$ | $8$ |  |  | $s_i=1,f_i=i+1$ |\n| $6$ | $5$ | $n\\le10,\\sum n\\le1000$ | $Q\\le1000$ | $c=q,r_i\\le10,r_i-l_i\\le2$ |\n| $7$ | $2$ | $n\\le10,\\sum n\\le1000$ | $Q\\le1000$ | $c=q,r_i\\le10$ |\n| $8$ | $13$ | $\\sum n\\le1000$ | $Q\\le1000$ | $c=q,\\sum\\limits^{n}_{i=1}r_i-l_i\\le10^4$ |\n| $9$ | $11$ | $\\sum n\\le1000$ | $Q\\le1000$ | $c=q$ |\n| $10$ | $6$ |  |  | $c=q$ |\n| $11$ | $5$ | $\\sum n\\le1000$ |  |  |\n| $12$ | $5$ | $\\sum n\\le8000$ |  |  |\n| $13$ | $9$ |  |  |  |\n\n保证 $\\sum n,\\sum q\\le2\\times10^5$，且每组数据中检查计划次数 $c$ 的总和不超过 $10^4$，$\\sum n\\times c\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2023] 生产计划 (Day 2)", "background": "翻译自 [ROI 2023 D2T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-roi-2023-day2.pdf)。\n\n**这是一道 IO 交互题**。\n\n某个国家准备制定汽车的生产计划。\n\n该国总共有 $n$ 个城市，每个城市中有一个工厂，它们要参与汽车的生产。第 $i$ 个城市的工厂可以雇佣 $l_i$ 到 $r_i$ 个人。\n\n一些城市之间通过双向道路相连，且道路网络呈树状结构。因此，如果要从一个城市到另一个城市，在不重复经过同一个城市的情况下，只有一种路径。\n\n生产计划被定义为一个整数序列 $[a_1, a_2, \\dots , a_n]$，其中 $a_i$ 表示在第 $i$ 个工厂工作的人数，满足 $l_i\\le a_i\\le r_i$。在制定生产计划后，一些工厂将被选为装配工厂，这些工厂负责装配汽车，而其它工厂则负责生产零部件。如果没有两个装配工厂所在的城市被一条道路直接连接，那么这个生产计划就是合理的。在所有可能的合理的计划中，会选择装配工厂的工人总数最大的一个计划。这个数就被称为计划 $[a_1, a_2, \\dots , a_n]$ 的效率。", "description": "你需要确定是否存在效率为 $v_i$ 的计划。如果存在这样的计划，则可能需要输出这样一个计划。\n\n制定计划的过程包括两个阶段。\n\n在第一阶段，你将获得 $v_1,v_2,\\dots,v_q$ 的值。你需要确定是否存在效率为 $v_i$ 的计划，如果不存在，输出 `-1`；如果存在，输出一个非负整数 $k_i$。\n\n对 $k$ 的定义如下：给定三个整数 $x,y,m$，定义计划 $[a_1, a_2, \\dots , a_n]$ 的 $k = \\bigoplus\\limits^n_{j=1} ( (x\\times j + y\\times a_j^2) \\bmod m )$，其中 $\\oplus$ 为按位异或。\n\n因为符合要求的计划可能不止一个，所以 $k_i$ 也有很多种可能，你需要输出其中一种可能的 $k_i$。\n\n在第二阶段，某些计划的可行性将被检查。在每个查询中，你的程序会得到一个整数 $i$（$1\\le i\\le q$）。对于这个查询，如果不能制定效率为 $v_i$ 的计划，你需要输出 `-1`；否则，你需要输出 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$l_i\\le a_i\\le r_i$），表示一个制定的计划。这个计划计算出来的 $k$ 值应该等于你先前输出的 $k_i$，效率应该等于 $v_i$。\n\n在程序输出每个 $k$ 之前，无法知道哪些计划会被检查。因此，你需要保证在第一阶段中输出的 $k_i$ 是正确的。", "inputFormat": "本题多测，第一行输入一个整数 $t$（$1\\le t\\le10^4$），表示数据组数。\n\n在每组数据中：\n\n第一行包含两个整数 $n,q$（$2 \\le n \\le 2 \\times 10^5$，$1 \\le q \\le 2 \\times 10^5$），分别表示城市的数量和要制定的计划的数量。\n\n第二行包含三个整数 $x,y,m$（$11 \\le m \\le 2^{30}$，$0 \\le x,y < m$），即计算 $k$ 的参数。\n\n接下来的 $n-1$ 行描述了城市之间的道路网络。在这 $n-1$ 行中，第 $i$ 行包含两个整数 $s_i,f_i$（$1 \\le s_i,f_i \\le n$，$s_i \\ne f_i$），表示第 $i$ 条道路连接城市 $s_i$ 和 $f_i$ 的双向道路。保证这些道路能够构成一棵树。\n\n接下来的 $n$ 行中的第 $i$ 行包含两个整数 $l_i,r_i$（$0 \\le l_i \\le r_i \\le 10^9$），表示第 $i$ 个城市的工人数量限制。\n\n接下来的一行包含 $q$ 个整数 $v_1,v_2,\\dots,v_q$（$0 \\le v_i \\le \\sum\\limits^n_{i=1}r_i$），表示需要制定的计划的效率值。保证所有的 $v_i$ 都是不同的。\n\n接下来，你需要输出第一部分中你需要输出的内容（具体方式见“输出格式”）。输出完成后，才可以读入第二部分的数据。\n\n接下来若干行，每行输入一个数 $i$（$0\\le i\\le q$）。当 $i\\ne0$ 时，$i$ 表示要检查的计划的编号。在按照输出格式的要求输出后，交互库才会继续给你下一个 $i$。当 $i=0$ 时，表示第二部分的检查结束，即这一组数据输入完成。如果这不是最后一组数据，你的程序应该立即开始读入下一组数据。\n\n保证 $\\sum n,\\sum q\\le2\\times10^5$，且每组数据中检查计划次数 $c$ 的总和不超过 $10^4$，$\\sum n\\times c\\le10^6$。", "outputFormat": "读取完每组输入的第一部分后，需要输出 $q$ 个整数 $k_1,k_2,\\dots,k_q$（$-1 \\le k_i < 2^{30}$），如果 $k_i = -1$ 则表示无法制定效率值为 $v_i$ 的计划。输出后，交互库才会给你第二部分的数据。\n\n在读入第二部分检查的计划编号 $i$（且 $i\\ne0$）后，如果第 $i$ 个计划无法制定，即 $k_i=-1$ 时，则输出 `-1`。否则，需要输出 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$l_i \\le a_i \\le r_i$），表示所制定的计划。该计划的 $k$ 应等于 $k_i$，并且效率应等于 $v_i$。\n\nIO 交互题在输出后应刷新缓冲区。\n\n如果在 C++ 中使用了 `cout << ... << endl`，在 Java 中使用了 `System.out.println`，在 Python 中使用了 `print`，在 Pascal 中使用了 `writeln`，那么输出缓冲区会自动刷新，不需要额外操作。\n\n如果使用了其他输出方法，建议手动刷新输出缓冲区。在刷新输出缓冲区时，可以使用 C 和 C++ 中的 `fflush(stdout)`，Pascal 中的 `flush(output)`，Java 中的 `System.out.flush()`，Python 中的 `sys.stdout.flush()`。", "hint": "在样例中，程序与交互库的交互用空行分隔。这样做是为了便于理解，清楚地知道哪个消息是对哪个消息的回应。在实际测试中，不会有多余的空行（当然，会有换行）。\n\n第一个样例只有一种制定计划的方法，即 $a = [4, 2, 5, 3, 2, 6, 3, 4, 3]$。它的效率为 $19$，计算出来的 $k$ 为 $10$。\n\n第二个样例有三组数据。\n\n- 在第一组数据中：\n  - 存在唯一一个效率为 $0$ 的计划，$a = [0, 0, 0]$。该计划的 $k$ 为 $12$。\n  - 存在效率为 $1$ 的计划，例如 $a = [1, 0, 0]$。该计划的 $k$ 为 $8$。\n  - 存在效率为 $2$ 的计划，例如 $a = [1, 0, 1]$。该计划的 $k$ 为 $3$。\n  - 不存在效率为 $3$ 的计划。\n  - 在这四个请求的计划中，检查了计划编号 $i = 2$（$v_2 = 1$）。\n- 在第二组数据中：\n  - 不存在效率为 $0$ 的计划。\n  - 不存在效率为 $1$ 的计划。\n  - 存在效率为 $2$ 的计划，例如 $a = [1, 1, 1, 1]$。该计划的 $k$ 为 $4$。\n  - 存在效率为 $3$ 的计划，例如 $a = [2, 1, 1, 1]$。该计划的 $k$ 为 $14$。\n  - 存在唯一的效率为 $4$ 的计划 $a = [2, 1, 1, 2]$。该计划的 $k$ 为 $9$。\n  - 不存在效率为 $5$ 的计划。\n  - 在这六个请求的计划中，检查了计划编号 $i = 5$（$v_5 = 4$），$i = 2$（$v_2 = 1$）和 $i = 3$（$v_3 = 2$）。\n- 在第三组数据的第一个部分中，请求了以下计划（从第二个开始，因为效率为 $v_1 = 13$ 的计划不存在）：$[2, 5, 4, 4, 6]$；$[2, 5, 4, 1, 6]$；$[2, 4, 4, 4, 4]$；$[2, 4, 4, 3, 4]$；$[2, 4, 4, 2, 4]$；$[1, 1, 0, 1, 4]$。\n\n| 子任务 | 分值 | $n,\\sum n$ | $\\sum q$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $11$ |  |  | $l_i=r_i$ |\n| $2$ | $9$ |  |  | $c=0$ |\n| $3$ | $12$ |  |  | $l_i=0,r_i\\le1$ |\n| $4$ | $4$ |  |  | $l_i=0$ |\n| $5$ | $8$ |  |  | $s_i=1,f_i=i+1$ |\n| $6$ | $5$ | $n\\le10,\\sum n\\le1000$ | $Q\\le1000$ | $c=q,r_i\\le10,r_i-l_i\\le2$ |\n| $7$ | $2$ | $n\\le10,\\sum n\\le1000$ | $Q\\le1000$ | $c=q,r_i\\le10$ |\n| $8$ | $13$ | $\\sum n\\le1000$ | $Q\\le1000$ | $c=q,\\sum\\limits^{n}_{i=1}r_i-l_i\\le10^4$ |\n| $9$ | $11$ | $\\sum n\\le1000$ | $Q\\le1000$ | $c=q$ |\n| $10$ | $6$ |  |  | $c=q$ |\n| $11$ | $5$ | $\\sum n\\le1000$ |  |  |\n| $12$ | $5$ | $\\sum n\\le8000$ |  |  |\n| $13$ | $9$ |  |  |  |\n\n保证 $\\sum n,\\sum q\\le2\\times10^5$，且每组数据中检查计划次数 $c$ 的总和不超过 $10^4$，$\\sum n\\times c\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P11112", "type": "P", "difficulty": 4, "samples": [["2 3 2 6\n1 2\n2 3\n1 1\n2 6\n2 2", "4"], ["1 3 1 5\n2 2\n2 1\n1 9\n2 1", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 机器人物流 (Day 1)", "background": "翻译自 [ROI 2024 D1T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。\n\n在 ROI 2224 举办之时，一群能够克隆自身的机器人负责送货。人们不用出门，可以直接通过窗户拿到货物。\n\n最开始只有一个送货机器人。在任何时候，最上面的机器人可以在自己上方克隆出一个或多个新的机器人，形成一个“机器人柱”。每个机器人的高度等于一层楼。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wwgg5y12.png)\n\n在送货过程中，机器人柱会沿着宿舍楼从左到右移动。机器人的数据库中包含了订单列表，每个订单都指定了一个需要送货的窗户。当机器人队列经过一个窗户时，如果队列中有机器人位于窗户所在的高度，则可以直接完成送货。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eefsp33h.png)\n\n在移动过程中，机器人柱可能会碰到障碍物。碰到障碍物后，只有位于障碍物高度上方的机器人能够继续移动。这些机器人在经过障碍物后会立刻重新排成一个机器人柱，并且可以继续移动、克隆和完成送货任务。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9arqsmr6.png)\n\n障碍物和窗户之间的距离足够大，因此机器人在经过障碍物时不会同时经过窗户。", "description": "每完成一个订单，机器人公司会获得 $p$ 个虚拟货币，而克隆一个新机器人的成本是 $c$ 个虚拟货币。最终利润等于订单配送的总收入减去所有机器人克隆的总成本。公司希望最大化利润。请你确定公司可以获得的最大利润。\n\n公司不需要完成所有订单，且机器人可以在任何时候停止送货。", "inputFormat": "第一行包含四个整数 $n, m, c, p$（$0 \\le n, m \\le 100000$，$1 \\le c, p \\le 1000000$），分别表示障碍物的数量、订单的数量、克隆一个机器人的成本和每个订单的配送收入。\n\n接下来的 $n + m$ 行描述了障碍物和窗户的详细信息，按从左到右的顺序给出。每行包含两个整数 $t_i$ 和 $h_i$（$1 \\le t_i \\le 2$，$1 \\le h_i \\le 1000000$），其中 $t_i$ 表示对象的类型（$1$ 为障碍物，$2$ 为窗户），$h_i$ 表示障碍物的高度或窗户所在的楼层。\n\n保证有 $n$ 个障碍物，剩余 $m$ 个为窗户。", "outputFormat": "输出一个整数，表示可以获得的最大利润。", "hint": "样例 $1$ 解释：\n\n以下是订单配送的最佳策略之一，如果选择配送到第二个窗户，不会增加公司的利润。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/utimy7f3.png)\n\n样例 $2$ 解释：\n\n只需要克隆一次机器人，用来配送到第一个窗户，因为这个新克隆的机器人可以继续用来配送到第二个窗户。为了配送到第三个窗户而进行额外的克隆在经济上是不划算的。\n\n下面是各个子任务的分值和特殊性质表格。全部数据范围见输入格式。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $24$ | $n\\le100,m\\le100,h_i\\le100$ |\n| $2$ | $12$ | $n=0$ |\n| $3$ | $14$ | $n=1$ |\n| $4$ | $15$ | $m=1$ |\n| $5$ | $17$ | $c=1,p=10^6$ 且障碍物高度均为 $1$ |\n| $6$ | $18$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 机器人物流 (Day 1)", "background": "翻译自 [ROI 2024 D1T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。\n\n在 ROI 2224 举办之时，一群能够克隆自身的机器人负责送货。人们不用出门，可以直接通过窗户拿到货物。\n\n最开始只有一个送货机器人。在任何时候，最上面的机器人可以在自己上方克隆出一个或多个新的机器人，形成一个“机器人柱”。每个机器人的高度等于一层楼。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wwgg5y12.png)\n\n在送货过程中，机器人柱会沿着宿舍楼从左到右移动。机器人的数据库中包含了订单列表，每个订单都指定了一个需要送货的窗户。当机器人队列经过一个窗户时，如果队列中有机器人位于窗户所在的高度，则可以直接完成送货。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eefsp33h.png)\n\n在移动过程中，机器人柱可能会碰到障碍物。碰到障碍物后，只有位于障碍物高度上方的机器人能够继续移动。这些机器人在经过障碍物后会立刻重新排成一个机器人柱，并且可以继续移动、克隆和完成送货任务。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9arqsmr6.png)\n\n障碍物和窗户之间的距离足够大，因此机器人在经过障碍物时不会同时经过窗户。", "description": "每完成一个订单，机器人公司会获得 $p$ 个虚拟货币，而克隆一个新机器人的成本是 $c$ 个虚拟货币。最终利润等于订单配送的总收入减去所有机器人克隆的总成本。公司希望最大化利润。请你确定公司可以获得的最大利润。\n\n公司不需要完成所有订单，且机器人可以在任何时候停止送货。", "inputFormat": "第一行包含四个整数 $n, m, c, p$（$0 \\le n, m \\le 100000$，$1 \\le c, p \\le 1000000$），分别表示障碍物的数量、订单的数量、克隆一个机器人的成本和每个订单的配送收入。\n\n接下来的 $n + m$ 行描述了障碍物和窗户的详细信息，按从左到右的顺序给出。每行包含两个整数 $t_i$ 和 $h_i$（$1 \\le t_i \\le 2$，$1 \\le h_i \\le 1000000$），其中 $t_i$ 表示对象的类型（$1$ 为障碍物，$2$ 为窗户），$h_i$ 表示障碍物的高度或窗户所在的楼层。\n\n保证有 $n$ 个障碍物，剩余 $m$ 个为窗户。", "outputFormat": "输出一个整数，表示可以获得的最大利润。", "hint": "样例 $1$ 解释：\n\n以下是订单配送的最佳策略之一，如果选择配送到第二个窗户，不会增加公司的利润。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/utimy7f3.png)\n\n样例 $2$ 解释：\n\n只需要克隆一次机器人，用来配送到第一个窗户，因为这个新克隆的机器人可以继续用来配送到第二个窗户。为了配送到第三个窗户而进行额外的克隆在经济上是不划算的。\n\n下面是各个子任务的分值和特殊性质表格。全部数据范围见输入格式。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $24$ | $n\\le100,m\\le100,h_i\\le100$ |\n| $2$ | $12$ | $n=0$ |\n| $3$ | $14$ | $n=1$ |\n| $4$ | $15$ | $m=1$ |\n| $5$ | $17$ | $c=1,p=10^6$ 且障碍物高度均为 $1$ |\n| $6$ | $18$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11113", "type": "P", "difficulty": 6, "samples": [["4\n4 4\n.a.b\n..e.\n....\n.cd.\nLRU\n1 1\n.\nUULLRRDD\n1 6\n.a.aa.\nLLURDDD\n5 7\n.ba.b..\nac..c.d\ne......\n....da.\nd.eae..\nDLDDRULRRR", "..ab\n..ce\n...d\n....\n.\n...aaa\ndceebab\n...aeac\n.....ad\n......d\n......."]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 2026 (Day 1)", "background": "翻译自 [ROI 2024 D1T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。\n\n一款新的游戏《2026》在一个 $m$ 行 $n$ 列的矩形盘面上进行。盘面被划分为 $m \\times n$ 个 $1 \\times 1$ 的小格子。在一些格子上放置了大小为 $1 \\times 1$ 的方块，每个方块上写有一个英文字母。\n\n你需要进行 $q$ 次操作，每次操作都是将所有方块向一个方向移动到底。因此，操作序列由一个长度为 $q$ 的字符串 $s$ 给出，字符串中每个字符表示一个方向：`L` 表示向左移，`R` 表示向右移，`U` 表示向上移，`D` 表示向下移。\n\n具体操作与游戏《2048》相类似：在棋盘上，只要有一个方块在指定方向上相邻的格子是空的，该方块就会移动到该空格子上，包括它后面的那些方块也会连带着向那个方向一起移动，直到前方没有空格。", "description": "给出棋盘的初始状态和操作序列，请确定所有操作执行完成后盘面的状态。", "inputFormat": "输入包含多组数据。\n\n- 第一行输入一个整数 $t$ ，表示测试数据的组数（$1 \\le t \\le 200 000$）。\n- 对于每组数据：\n  - 第一行输入整数 $m$ 和 $n$，代表盘面的大小（$1 \\le m, n \\le 10^6$，$1 \\le m \\times n \\le 10^6$）。\n  - 接下来的 $m$ 行，输入盘面的初始状态：\n    - 其中的第 $i$ 行（$1 \\le i \\le m$）包含一个长度为 $n$ 的字符串 $a_{i1}a_{i2}\\dots a_{in}$，表示第 $i$ 行的盘面状态。\n    - 每个字符 $a_{ij}$ 要么是小写英文字母（从 `a` 到 `z`），要么是点号 `.`。如果 $a_{ij}$ 是 `.`，则表示第 $i$ 行第 $j$ 列的格子为空，否则表示该格子上有一个标有字母 $a_{ij}$ 的方块。\n  - 最后一行输入一个字符串 $s$，由 $q$ 个字符组成，表示操作的序列（$1 \\le q \\le 10^6$）。每个字符都是 `L`，`R`，`U`，`D` 之一。\n\n所有测试数据中 $m \\times n$ 的总和不超过 $2 \\times 10^6$，$q$ 的总和不超过 $2 \\times 10^6$。", "outputFormat": "对于每组数据，输出执行完所有操作后的盘面，格式与输入相同。", "hint": "样例解释：\n\n在第一组输入数据中，盘面最初看起来是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/74l670ch.png)\n\n第一次操作将所有方块向左移动。接着，盘面会变成这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zj8ivsbl.png)\n\n第二次操作将所有方块向右移动。接着，盘面会变成这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4crenzj.png)\n\n第三次，也是最后一次操作将所有方块向上移动。所有操作结束后，盘面会变成这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/85uoz27h.png)\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $t=1,q=1,n,m\\le100$ |\n| $2$ | $7$ | $s_i$ 只可能为 `L` 或 `R` |\n| $3$ | $13$ | $\\sum mnq\\le10^7$ |\n| $4$ | $14$ | $s_i$ 只可能为 `L` 或 `R` 或 `U` |\n| $5$ | $12$ | 棋盘上所有字母都是 `a`，$\\sum mq\\le10^7$ |\n| $6$ | $11$ | 棋盘上所有字母都是 `a` |\n| $7$ | $9$ | 棋盘初始状态是“阶梯状”的，具体地，第 $i$ 行仅最左侧恰有 $i-1$ 个字母 |\n| $8$ | $14$ | $s$ 是重复若干次的 `LURD` |\n| $9$ | $11$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 2026 (Day 1)", "background": "翻译自 [ROI 2024 D1T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。\n\n一款新的游戏《2026》在一个 $m$ 行 $n$ 列的矩形盘面上进行。盘面被划分为 $m \\times n$ 个 $1 \\times 1$ 的小格子。在一些格子上放置了大小为 $1 \\times 1$ 的方块，每个方块上写有一个英文字母。\n\n你需要进行 $q$ 次操作，每次操作都是将所有方块向一个方向移动到底。因此，操作序列由一个长度为 $q$ 的字符串 $s$ 给出，字符串中每个字符表示一个方向：`L` 表示向左移，`R` 表示向右移，`U` 表示向上移，`D` 表示向下移。\n\n具体操作与游戏《2048》相类似：在棋盘上，只要有一个方块在指定方向上相邻的格子是空的，该方块就会移动到该空格子上，包括它后面的那些方块也会连带着向那个方向一起移动，直到前方没有空格。", "description": "给出棋盘的初始状态和操作序列，请确定所有操作执行完成后盘面的状态。", "inputFormat": "输入包含多组数据。\n\n- 第一行输入一个整数 $t$ ，表示测试数据的组数（$1 \\le t \\le 200 000$）。\n- 对于每组数据：\n  - 第一行输入整数 $m$ 和 $n$，代表盘面的大小（$1 \\le m, n \\le 10^6$，$1 \\le m \\times n \\le 10^6$）。\n  - 接下来的 $m$ 行，输入盘面的初始状态：\n    - 其中的第 $i$ 行（$1 \\le i \\le m$）包含一个长度为 $n$ 的字符串 $a_{i1}a_{i2}\\dots a_{in}$，表示第 $i$ 行的盘面状态。\n    - 每个字符 $a_{ij}$ 要么是小写英文字母（从 `a` 到 `z`），要么是点号 `.`。如果 $a_{ij}$ 是 `.`，则表示第 $i$ 行第 $j$ 列的格子为空，否则表示该格子上有一个标有字母 $a_{ij}$ 的方块。\n  - 最后一行输入一个字符串 $s$，由 $q$ 个字符组成，表示操作的序列（$1 \\le q \\le 10^6$）。每个字符都是 `L`，`R`，`U`，`D` 之一。\n\n所有测试数据中 $m \\times n$ 的总和不超过 $2 \\times 10^6$，$q$ 的总和不超过 $2 \\times 10^6$。", "outputFormat": "对于每组数据，输出执行完所有操作后的盘面，格式与输入相同。", "hint": "样例解释：\n\n在第一组输入数据中，盘面最初看起来是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/74l670ch.png)\n\n第一次操作将所有方块向左移动。接着，盘面会变成这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zj8ivsbl.png)\n\n第二次操作将所有方块向右移动。接着，盘面会变成这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4crenzj.png)\n\n第三次，也是最后一次操作将所有方块向上移动。所有操作结束后，盘面会变成这样：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/85uoz27h.png)\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $9$ | $t=1,q=1,n,m\\le100$ |\n| $2$ | $7$ | $s_i$ 只可能为 `L` 或 `R` |\n| $3$ | $13$ | $\\sum mnq\\le10^7$ |\n| $4$ | $14$ | $s_i$ 只可能为 `L` 或 `R` 或 `U` |\n| $5$ | $12$ | 棋盘上所有字母都是 `a`，$\\sum mq\\le10^7$ |\n| $6$ | $11$ | 棋盘上所有字母都是 `a` |\n| $7$ | $9$ | 棋盘初始状态是“阶梯状”的，具体地，第 $i$ 行仅最左侧恰有 $i-1$ 个字母 |\n| $8$ | $14$ | $s$ 是重复若干次的 `LURD` |\n| $9$ | $11$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11114", "type": "P", "difficulty": 6, "samples": [["5 2 2 1\n1\n1 2 1 2 1", "14"], ["8 3 2 2\n2\n1 1 1 1 1 2 2 2", "17"], ["8 3 3 2\n3\n1 2 2 3 2 3 2 1", "15"], ["8 6 6 2\n2\n1 2 3 4 3 5 6 1", "9"], ["7 3 3 1\n3\n1 2 3 2 2 1 3", "16"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 小推车 (Day 1)", "background": "翻译自 [ROI 2024 D1T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。", "description": "航空公司提供了一种新型的商务舱，飞机上的座位沿着过道排列。假设座位总数为 $n$，座位的坐标从 $1$ 到 $n$。\n\n每个乘客都有一个饮料偏好，饮料的种类共有 $k$ 种，编号从 $1$ 到 $k$。每个乘客只能选择一种饮料。在飞机上，饮料需要从一辆小推车上分给乘客。\n\n饮料装在一个瓶子里，每个瓶子的饮料可以服务 $p$ 个乘客。也就是说，一个瓶子的容量为 $p$。小推车最多可以装载 $m$ 个瓶子。保证 $k\\le m$。\n\n乘客按照座位号从 $1$ 到 $n$ 依次接受服务。小推车从座位前方的起点（坐标为 $0$）开始移动，并最终到达终点（坐标为 $n + 1$）。在小推车服务乘客的过程中，它可能需要去往储藏室中装载新的饮料。储藏室可能位于飞机前部的起点处，也可能位于后部的终点处，也有可能两侧都有。\n\n如果小推车在座位 $i$ 的位置，它需要移动到起点处的储藏室的距离是 $i$，而到达终点处的储藏室的距离是 $n + 1 - i$。小推车在行进过程中可能需要补充饮料，如果小推车到达储藏室，它可以卸下空的瓶子，并装载新的饮料。不可以卸下还装有饮料的瓶子。在补充饮料后，小推车应该回到第一个未提供饮料的乘客的位置，再继续向后为乘客提供服务。\n\n你需要计算小推车从 $0$ 移动到 $n + 1$ 的最小总移动距离，以便为所有乘客提供所需的饮料。", "inputFormat": "第一行包含四个整数 $n$，$m$，$k$ 和 $p$，分别表示座位数量、小推车所装瓶子的容量、饮料种类数量和每个瓶子所装饮料的容量。\n\n第二行包含一个整数 $c$，表示储藏室的位置，$c$ 的取值范围是 $1$ 到 $3$。$c=1$ 表示储藏室只在终点位置；$c=2$ 表示储藏室只在起点位置；$c=3$ 表示储藏室在起点和终点都有。\n\n第三行包含 $n$ 个整数 $a_i$，表示第 $i$ 个座位的乘客需要的饮料的类型。", "outputFormat": "输出一个整数，表示小推车在服务所有乘客的过程中所需的最小移动距离。", "hint": "在第一个样例中，小推车可以装载 $m = 2$ 个瓶子，每瓶含 $p = 1$ 份饮料。储藏室位于客舱的尽头。\n- 首先，小推车需要装上饮料 $1$ 和 $2$，这些饮料将分发给座位 $1$ 和 $2$ 的乘客，小推车需要行驶 $2$ 的距离从起点 $0$ 到点 $2$，即 $d_1=2$。\n- 接着，小推车需要前往客舱尽头的储藏室（距离为 $4$），装上饮料 $1$ 和 $2$，然后返回到座位 $3$（小推车需要移动 $3$ 的距离）。$d_2=4+3=7$。\n- 然后，小推车要为座位 $3$ 和 $4$ 的乘客提供饮料 $1$ 和 $2$（小推车在座位 $3$ 和 $4$ 之间移动 $1$ 的距离）。$d_3=1$。\n- 最后，小推车需要再次前往储藏室（从座位 $4$ 到储藏室的距离为 $2$），装上饮料 $1$，从储藏室返回到座位 $5$（距离为 $1$），服务完该乘客后再移动 $1$ 的距离到客舱尽头。$d_4=2+1+1=4$。\n\n总距离为 $d_1+d_2+d_3+d_4=2+7+1+4=14$。\n\n在第二个样例中，小推车可以装载 $m = 3$ 个瓶子，每瓶含 $p = 2$ 份饮料。储藏室位于客舱的前端。小推车需要装满 $3$ 瓶饮料 $1$，服务座位 $1$ 到 $4$ 的乘客。之后，$2$ 瓶饮料 $1$ 将被用完，需要立刻前往储藏室装满 $2$ 瓶饮料 $2$，然后服务座位 $5$ 到 $8$ 的乘客（如果在服务完乘客 $5$ 后再回储藏室补充饮料，则要移动更长的距离）。\n\n在第三个样例中，小推车可以装载 $m = 3$ 个瓶子，每瓶含 $p = 2$ 份饮料，储藏室分别位于客舱的两端。为了服务乘客，需要 $2$ 瓶饮料 $2$，以及饮料 $1$ 和 $3$ 各 $1$ 瓶，因此需要去储藏室更换空瓶。最好的方案是在服务完座位 $3$ 的乘客后，再去客舱前端的储藏室换取饮料 $2$。\n\n在第四个样例中，小推车需要装载每种饮料各 $1$ 瓶，并且由于每瓶含 $2$ 份饮料，这样可以在不额外补充的情况下服务所有乘客。\n\n在第五个样例中，需要进行两次补充，小推车在服务完乘客 $3$ 后需要第一次返回客舱开头的储藏室，第二次则是在服务完乘客 $6$ 后去到客舱尽头的储藏室。\n\n原题目有十二个子任务，由于洛谷限制这里不能全部上传。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^6,1\\le p\\le 10^6,1\\le a_i\\le k\\le m\\le 10^6,1\\le c\\le3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 小推车 (Day 1)", "background": "翻译自 [ROI 2024 D1T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。", "description": "航空公司提供了一种新型的商务舱，飞机上的座位沿着过道排列。假设座位总数为 $n$，座位的坐标从 $1$ 到 $n$。\n\n每个乘客都有一个饮料偏好，饮料的种类共有 $k$ 种，编号从 $1$ 到 $k$。每个乘客只能选择一种饮料。在飞机上，饮料需要从一辆小推车上分给乘客。\n\n饮料装在一个瓶子里，每个瓶子的饮料可以服务 $p$ 个乘客。也就是说，一个瓶子的容量为 $p$。小推车最多可以装载 $m$ 个瓶子。保证 $k\\le m$。\n\n乘客按照座位号从 $1$ 到 $n$ 依次接受服务。小推车从座位前方的起点（坐标为 $0$）开始移动，并最终到达终点（坐标为 $n + 1$）。在小推车服务乘客的过程中，它可能需要去往储藏室中装载新的饮料。储藏室可能位于飞机前部的起点处，也可能位于后部的终点处，也有可能两侧都有。\n\n如果小推车在座位 $i$ 的位置，它需要移动到起点处的储藏室的距离是 $i$，而到达终点处的储藏室的距离是 $n + 1 - i$。小推车在行进过程中可能需要补充饮料，如果小推车到达储藏室，它可以卸下空的瓶子，并装载新的饮料。不可以卸下还装有饮料的瓶子。在补充饮料后，小推车应该回到第一个未提供饮料的乘客的位置，再继续向后为乘客提供服务。\n\n你需要计算小推车从 $0$ 移动到 $n + 1$ 的最小总移动距离，以便为所有乘客提供所需的饮料。", "inputFormat": "第一行包含四个整数 $n$，$m$，$k$ 和 $p$，分别表示座位数量、小推车所装瓶子的容量、饮料种类数量和每个瓶子所装饮料的容量。\n\n第二行包含一个整数 $c$，表示储藏室的位置，$c$ 的取值范围是 $1$ 到 $3$。$c=1$ 表示储藏室只在终点位置；$c=2$ 表示储藏室只在起点位置；$c=3$ 表示储藏室在起点和终点都有。\n\n第三行包含 $n$ 个整数 $a_i$，表示第 $i$ 个座位的乘客需要的饮料的类型。", "outputFormat": "输出一个整数，表示小推车在服务所有乘客的过程中所需的最小移动距离。", "hint": "在第一个样例中，小推车可以装载 $m = 2$ 个瓶子，每瓶含 $p = 1$ 份饮料。储藏室位于客舱的尽头。\n- 首先，小推车需要装上饮料 $1$ 和 $2$，这些饮料将分发给座位 $1$ 和 $2$ 的乘客，小推车需要行驶 $2$ 的距离从起点 $0$ 到点 $2$，即 $d_1=2$。\n- 接着，小推车需要前往客舱尽头的储藏室（距离为 $4$），装上饮料 $1$ 和 $2$，然后返回到座位 $3$（小推车需要移动 $3$ 的距离）。$d_2=4+3=7$。\n- 然后，小推车要为座位 $3$ 和 $4$ 的乘客提供饮料 $1$ 和 $2$（小推车在座位 $3$ 和 $4$ 之间移动 $1$ 的距离）。$d_3=1$。\n- 最后，小推车需要再次前往储藏室（从座位 $4$ 到储藏室的距离为 $2$），装上饮料 $1$，从储藏室返回到座位 $5$（距离为 $1$），服务完该乘客后再移动 $1$ 的距离到客舱尽头。$d_4=2+1+1=4$。\n\n总距离为 $d_1+d_2+d_3+d_4=2+7+1+4=14$。\n\n在第二个样例中，小推车可以装载 $m = 3$ 个瓶子，每瓶含 $p = 2$ 份饮料。储藏室位于客舱的前端。小推车需要装满 $3$ 瓶饮料 $1$，服务座位 $1$ 到 $4$ 的乘客。之后，$2$ 瓶饮料 $1$ 将被用完，需要立刻前往储藏室装满 $2$ 瓶饮料 $2$，然后服务座位 $5$ 到 $8$ 的乘客（如果在服务完乘客 $5$ 后再回储藏室补充饮料，则要移动更长的距离）。\n\n在第三个样例中，小推车可以装载 $m = 3$ 个瓶子，每瓶含 $p = 2$ 份饮料，储藏室分别位于客舱的两端。为了服务乘客，需要 $2$ 瓶饮料 $2$，以及饮料 $1$ 和 $3$ 各 $1$ 瓶，因此需要去储藏室更换空瓶。最好的方案是在服务完座位 $3$ 的乘客后，再去客舱前端的储藏室换取饮料 $2$。\n\n在第四个样例中，小推车需要装载每种饮料各 $1$ 瓶，并且由于每瓶含 $2$ 份饮料，这样可以在不额外补充的情况下服务所有乘客。\n\n在第五个样例中，需要进行两次补充，小推车在服务完乘客 $3$ 后需要第一次返回客舱开头的储藏室，第二次则是在服务完乘客 $6$ 后去到客舱尽头的储藏室。\n\n原题目有十二个子任务，由于洛谷限制这里不能全部上传。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^6,1\\le p\\le 10^6,1\\le a_i\\le k\\le m\\le 10^6,1\\le c\\le3$。", "locale": "zh-CN"}}}
{"pid": "P11115", "type": "P", "difficulty": 7, "samples": [["4\n2\n2 2 3 3\n3 3 4 4\n2\n2 1 2 3\n1 2 3 2\n4\n2 2 4 5\n3 4 9 7\n2 9 9 10\n7 1 9 7\n7\n2 1 2 9\n5 1 6 8\n4 5 7 6\n1 8 4 10\n1 6 3 6\n1 2 7 3\n4 1 7 1", "3\n2 3 1 1\n2 4 1 1\n3 4 1 1\n2\n1 3 1 1\n2 2 2 1\n4\n2 4 2 2\n2 9 4 2\n3 9 2 2\n7 9 3 3\n6\n1 4 2 2\n1 6 1 1\n1 7 3 2\n2 2 4 2\n4 7 2 1\n5 6 2 1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2024", "Special Judge", "扫描线", "ROI（俄罗斯）"], "title": "[ROI 2024] 白菜 (Day 1)", "background": "翻译自 [ROI 2024 D1T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。\n\n拉马赞决定从事一个重要的业务——种植白菜。种植白菜的场地是一个无限大的网格场地。每个网格单元可以种植一个白菜。拉马赞只种植了场地的一部分。他计划利用其中的几个矩形区域，这些矩形可能会相交。如果一个网格单元位于至少一个矩形内，则该单元被认为种植了白菜。\n\n具体地，拉马赞选择了 $n$ 个矩形区域，矩形的坐标为 $(x_{L_i}, y_{L_i}, x_{R_i}, y_{R_i})$ (其中 $x_{L_i} \\le x_{R_i}$，$y_{L_i} \\le y_{R_i}$，$1 \\le i \\le n$)。如果存在至少一个矩形 $i$ ($1 \\le i \\le n$)，使得 $x_{L_i} \\le x \\le x_{R_i}$ 且 $y_{L_i} \\le y \\le y_{R_i}$，则认为网格单元 $(x, y)$ 被种植了白菜。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1ssdqjt.png)\n\n拉马赞曾经是一个程序员（并且还是一个获奖者），因此他决定使用人工智能机器人定期处理种植。一个机器人可以服务于任意的水平区域 $(x_{\\text{robot}_1}, x_{\\text{robot}_2}, y_{\\text{robot}})$，即所有满足 $x_{\\text{robot}_1} \\le x \\le x_{\\text{robot}_2}$ 且 $y = y_{\\text{robot}}$ 的网格单元 $(x, y)$。\n\n重要的是，机器人只能在种植的区域内移动。他明白，为了最小化机器人的数量，需要使用那些不能进一步扩展的水平区域。如果满足以下条件，拉马赞将使用机器人在网格单元 $(x_{\\text{robot}_1}, x_{\\text{robot}_2}, y_{\\text{robot}})$ 上工作：\n\n- 所有满足 $x_{\\text{robot}_1} \\le x \\le x_{\\text{robot}_2}$ 且 $y = y_{\\text{robot}}$ 的网格单元 $(x, y)$ 都属于种植区域；\n- 网格单元 $(x_{\\text{robot}_1} - 1, y_{\\text{robot}})$ 不属于种植区域；\n- 网格单元 $(x_{\\text{robot}_2} + 1, y_{\\text{robot}})$ 不属于种植区域。", "description": "你需要收集有关机器人在种植区域工作的统计信息。如果存在一个机器人恰好在网格段 $(x_1, x_2, y)$ 上工作，我们说 $(x_1, x_2)$ 在行 $y$ 上被服务。具体地，你需要：\n\n- 找出所有在某一行中被服务的 $(x_1, x_2)$ 对。\n- 对于每一对这样的 $(x_1, x_2)$，找出它被服务的行数。\n- 对于每一对这样的 $(x_1, x_2)$，找出它被服务的最大连续行数。换句话说，找出最大值 $k$，使得存在一个长度为 $k$ 的连续行区间 $[y_1, y_2]$（其中 $y_2 - y_1 + 1 = k$），使得在任意行 $y_1 \\le y \\le y_2$ 中，该对 $(x_1, x_2)$ 都被服务。", "inputFormat": "输入包含多组数据。第一行给出一个整数 $t$（$1 \\le t \\le 200000$），表示测试数据的组数。\n\n每组数据的第一行给出一个整数 $n$（$1 \\le n \\le 200000$），表示矩形区域的数量。\n\n接下来的 $n$ 行中，每行包含四个整数 $x_{L_i}$，$y_{L_i}$，$x_{R_i}$，$y_{R_i}$（$1 \\le x_{L_i} \\le x_{R_i} \\le 10^9$，$1 \\le y_{L_i} \\le y_{R_i} \\le 10^9$），表示一个矩形区域。\n\n令 $N$ 表示所有数据集中的 $n$ 总和，保证 $N \\le 200000$。", "outputFormat": "对于每组数据，首先输出一个整数 $p$（$p \\ge 1$），表示在某一行中被服务的 $(x_1, x_2)$ 对的数量。接下来 $p$ 行中，每行输出四个整数 $x_1$，$x_2$，$cnt$，$k$（$1 \\le x_1 \\le x_2 \\le 10^9$，$0 \\le cnt, k \\le 10^9$）。其中，$cnt$ 是该对 $(x_1, x_2)$ 被服务的行数，$k$ 是它被服务的最大连续行数。\n\n每一对 $(x_1, x_2)$ 必须是不同的。每一对在某一行中被服务的 $(x_1,x_2)$ 对，必须输出且只能输出一次。输出顺序可以是任意的。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/agobgb4r.png)\n\n在第一组数据中，机器人在以下区段进行服务：$(2, 3, 2)$，$(2, 4, 3)$ 和 $(3, 4, 4)$。因此，对 $(2, 3)$，$(2, 4)$ 和 $(3, 4)$ 在某一行中得到服务，并且每对都只在一行中被服务。\n\n在第二组数据中，机器人在以下区段进行服务：$(2, 2, 1)$，$(2, 4, 2)$ 和 $(2, 2, 3)$。因此，对 $(2, 2)$ 和 $(2, 4)$ 在某一行中得到服务。对 $(2, 2)$ 在第 $1$ 行和第 $3$ 行中得到服务，而对 $(2, 4)$ 在第 $2$ 行中被服务。\n\n下面是第三和第四组数据的图片。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bvgka8d.png)\n\n- 如果你的程序错误地找出了在某一行中被服务的对 $(x_1, x_2)$ 的集合，该测试点将获得零分。\n- 如果你的程序：\n  - 能够正确找出该集合，但不是所有的 $cnt$ 都正确，该测试点将获得 $50\\%$ 的分数。\n  - 能够正确找出该集合和所有 $cnt$，但不是所有的 $k$ 都正确，该测试点将获得 $75\\%$ 的分数。\n  - 能够正确找出该集合、所有 $cnt$ 和所有 $k$，该测试点将获得 $100\\%$ 的分数。\n\n请注意，如果你想获得获得部分分，仍需为每对配对 $(x_1, x_2)$ 输出一些 $cnt$ 和 $k$ 值，但不必全部正确。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 白菜 (Day 1)", "background": "翻译自 [ROI 2024 D1T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day1.pdf)。\n\n拉马赞决定从事一个重要的业务——种植白菜。种植白菜的场地是一个无限大的网格场地。每个网格单元可以种植一个白菜。拉马赞只种植了场地的一部分。他计划利用其中的几个矩形区域，这些矩形可能会相交。如果一个网格单元位于至少一个矩形内，则该单元被认为种植了白菜。\n\n具体地，拉马赞选择了 $n$ 个矩形区域，矩形的坐标为 $(x_{L_i}, y_{L_i}, x_{R_i}, y_{R_i})$ (其中 $x_{L_i} \\le x_{R_i}$，$y_{L_i} \\le y_{R_i}$，$1 \\le i \\le n$)。如果存在至少一个矩形 $i$ ($1 \\le i \\le n$)，使得 $x_{L_i} \\le x \\le x_{R_i}$ 且 $y_{L_i} \\le y \\le y_{R_i}$，则认为网格单元 $(x, y)$ 被种植了白菜。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e1ssdqjt.png)\n\n拉马赞曾经是一个程序员（并且还是一个获奖者），因此他决定使用人工智能机器人定期处理种植。一个机器人可以服务于任意的水平区域 $(x_{\\text{robot}_1}, x_{\\text{robot}_2}, y_{\\text{robot}})$，即所有满足 $x_{\\text{robot}_1} \\le x \\le x_{\\text{robot}_2}$ 且 $y = y_{\\text{robot}}$ 的网格单元 $(x, y)$。\n\n重要的是，机器人只能在种植的区域内移动。他明白，为了最小化机器人的数量，需要使用那些不能进一步扩展的水平区域。如果满足以下条件，拉马赞将使用机器人在网格单元 $(x_{\\text{robot}_1}, x_{\\text{robot}_2}, y_{\\text{robot}})$ 上工作：\n\n- 所有满足 $x_{\\text{robot}_1} \\le x \\le x_{\\text{robot}_2}$ 且 $y = y_{\\text{robot}}$ 的网格单元 $(x, y)$ 都属于种植区域；\n- 网格单元 $(x_{\\text{robot}_1} - 1, y_{\\text{robot}})$ 不属于种植区域；\n- 网格单元 $(x_{\\text{robot}_2} + 1, y_{\\text{robot}})$ 不属于种植区域。", "description": "你需要收集有关机器人在种植区域工作的统计信息。如果存在一个机器人恰好在网格段 $(x_1, x_2, y)$ 上工作，我们说 $(x_1, x_2)$ 在行 $y$ 上被服务。具体地，你需要：\n\n- 找出所有在某一行中被服务的 $(x_1, x_2)$ 对。\n- 对于每一对这样的 $(x_1, x_2)$，找出它被服务的行数。\n- 对于每一对这样的 $(x_1, x_2)$，找出它被服务的最大连续行数。换句话说，找出最大值 $k$，使得存在一个长度为 $k$ 的连续行区间 $[y_1, y_2]$（其中 $y_2 - y_1 + 1 = k$），使得在任意行 $y_1 \\le y \\le y_2$ 中，该对 $(x_1, x_2)$ 都被服务。", "inputFormat": "输入包含多组数据。第一行给出一个整数 $t$（$1 \\le t \\le 200000$），表示测试数据的组数。\n\n每组数据的第一行给出一个整数 $n$（$1 \\le n \\le 200000$），表示矩形区域的数量。\n\n接下来的 $n$ 行中，每行包含四个整数 $x_{L_i}$，$y_{L_i}$，$x_{R_i}$，$y_{R_i}$（$1 \\le x_{L_i} \\le x_{R_i} \\le 10^9$，$1 \\le y_{L_i} \\le y_{R_i} \\le 10^9$），表示一个矩形区域。\n\n令 $N$ 表示所有数据集中的 $n$ 总和，保证 $N \\le 200000$。", "outputFormat": "对于每组数据，首先输出一个整数 $p$（$p \\ge 1$），表示在某一行中被服务的 $(x_1, x_2)$ 对的数量。接下来 $p$ 行中，每行输出四个整数 $x_1$，$x_2$，$cnt$，$k$（$1 \\le x_1 \\le x_2 \\le 10^9$，$0 \\le cnt, k \\le 10^9$）。其中，$cnt$ 是该对 $(x_1, x_2)$ 被服务的行数，$k$ 是它被服务的最大连续行数。\n\n每一对 $(x_1, x_2)$ 必须是不同的。每一对在某一行中被服务的 $(x_1,x_2)$ 对，必须输出且只能输出一次。输出顺序可以是任意的。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/agobgb4r.png)\n\n在第一组数据中，机器人在以下区段进行服务：$(2, 3, 2)$，$(2, 4, 3)$ 和 $(3, 4, 4)$。因此，对 $(2, 3)$，$(2, 4)$ 和 $(3, 4)$ 在某一行中得到服务，并且每对都只在一行中被服务。\n\n在第二组数据中，机器人在以下区段进行服务：$(2, 2, 1)$，$(2, 4, 2)$ 和 $(2, 2, 3)$。因此，对 $(2, 2)$ 和 $(2, 4)$ 在某一行中得到服务。对 $(2, 2)$ 在第 $1$ 行和第 $3$ 行中得到服务，而对 $(2, 4)$ 在第 $2$ 行中被服务。\n\n下面是第三和第四组数据的图片。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8bvgka8d.png)\n\n- 如果你的程序错误地找出了在某一行中被服务的对 $(x_1, x_2)$ 的集合，该测试点将获得零分。\n- 如果你的程序：\n  - 能够正确找出该集合，但不是所有的 $cnt$ 都正确，该测试点将获得 $50\\%$ 的分数。\n  - 能够正确找出该集合和所有 $cnt$，但不是所有的 $k$ 都正确，该测试点将获得 $75\\%$ 的分数。\n  - 能够正确找出该集合、所有 $cnt$ 和所有 $k$，该测试点将获得 $100\\%$ 的分数。\n\n请注意，如果你想获得获得部分分，仍需为每对配对 $(x_1, x_2)$ 输出一些 $cnt$ 和 $k$ 值，但不必全部正确。\n", "locale": "zh-CN"}}}
{"pid": "P11116", "type": "P", "difficulty": 3, "samples": [["3\n0 1 -1\n1 1 1\n2 1 -1", "1"], ["2\n0 1 1\n4 2 -1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 割草 (Day 2)", "background": "翻译自 [ROI 2024 D2T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n\n草坪需要由电动割草机器人割草。我们认为草坪是一个数轴上的线段，其中在某些点上有割草机器人。机器人的大小可以忽略不计。一个机器人位于草坪的起点（起点左侧没有草坪），另一个机器人位于终点（终点右侧没有草坪）。每个机器人最初朝一个方向行驶：要么向右，要么向左。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bkcc3h4z.png)\n\n第 $i$ 个机器人的电量足够处理 $p_i$ 米的草坪。所有机器人在夜间充电后同时启动，并以相同的速度移动。每个机器人沿直线朝其方向移动。机器人在以下三种情况下停止：\n1. 如果机器人的电量耗尽。换句话说，若第 $i$ 个机器人从起点行驶了 $p_i$ 米。\n2. 如果机器人到达了草坪的起始点或终点。\n3. 如果机器人在某处遇到了另一个朝相反方向行驶或停在此处的机器人。", "description": "在启动机器人之前，可以将某些机器人的方向更改为相反方向。为了割光整个草坪，你需要确定最少需要改变方向的机器人数量，使得最终整个草坪都能被割光。如果无论如何都无法使得整个草坪被割完，输出 `-1`。", "inputFormat": "第一行包含一个整数 $n$（$2 \\leq n \\leq 10^5$），表示机器人的数量。  \n\n接下来的 $n$ 行，每行描述一个机器人，按从左到右的顺序给出。每个机器人由三个整数 $x_i$, $p_i$, $d_i$ 描述，它们分别是机器人的初始位置、它可以行驶的距离以及行驶方向（$0 = x_1 < x_2 < \\cdots < x_n \\leq 10^9$，$1 \\leq p_i \\leq 10^9$，$d_i = -1$ 表示向左行驶，$d_i = 1$ 表示向右行驶）。草坪的起始点和终点分别位于点 $x_1 = 0$ 和 $x_n$。", "outputFormat": "无法割光整个草坪，输出 `-1`。否则，输出一个数字，表示需要更改方向的机器人的数量，使得草坪能被割光。", "hint": "样例 $1$ 与题目背景中图片的情形一致，可以通过改变中间机器人的方向来使得所有草坪都被割完。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $23$ | $n\\le10$ |\n| $2$ | $16$ | $d_i=1$ |\n| $3$ | $17$ | $n\\le1000$ |\n| $4$ | $13$ | $x_i=i-1,p_i=1$ |\n| $5$ | $14$ | $p_i=10^9$ |\n| $6$ | $17$ | 无 |\n\n对于 $100\\%$ 的数据，范围见输入格式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 割草 (Day 2)", "background": "翻译自 [ROI 2024 D2T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n\n草坪需要由电动割草机器人割草。我们认为草坪是一个数轴上的线段，其中在某些点上有割草机器人。机器人的大小可以忽略不计。一个机器人位于草坪的起点（起点左侧没有草坪），另一个机器人位于终点（终点右侧没有草坪）。每个机器人最初朝一个方向行驶：要么向右，要么向左。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bkcc3h4z.png)\n\n第 $i$ 个机器人的电量足够处理 $p_i$ 米的草坪。所有机器人在夜间充电后同时启动，并以相同的速度移动。每个机器人沿直线朝其方向移动。机器人在以下三种情况下停止：\n1. 如果机器人的电量耗尽。换句话说，若第 $i$ 个机器人从起点行驶了 $p_i$ 米。\n2. 如果机器人到达了草坪的起始点或终点。\n3. 如果机器人在某处遇到了另一个朝相反方向行驶或停在此处的机器人。", "description": "在启动机器人之前，可以将某些机器人的方向更改为相反方向。为了割光整个草坪，你需要确定最少需要改变方向的机器人数量，使得最终整个草坪都能被割光。如果无论如何都无法使得整个草坪被割完，输出 `-1`。", "inputFormat": "第一行包含一个整数 $n$（$2 \\leq n \\leq 10^5$），表示机器人的数量。  \n\n接下来的 $n$ 行，每行描述一个机器人，按从左到右的顺序给出。每个机器人由三个整数 $x_i$, $p_i$, $d_i$ 描述，它们分别是机器人的初始位置、它可以行驶的距离以及行驶方向（$0 = x_1 < x_2 < \\cdots < x_n \\leq 10^9$，$1 \\leq p_i \\leq 10^9$，$d_i = -1$ 表示向左行驶，$d_i = 1$ 表示向右行驶）。草坪的起始点和终点分别位于点 $x_1 = 0$ 和 $x_n$。", "outputFormat": "无法割光整个草坪，输出 `-1`。否则，输出一个数字，表示需要更改方向的机器人的数量，使得草坪能被割光。", "hint": "样例 $1$ 与题目背景中图片的情形一致，可以通过改变中间机器人的方向来使得所有草坪都被割完。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $23$ | $n\\le10$ |\n| $2$ | $16$ | $d_i=1$ |\n| $3$ | $17$ | $n\\le1000$ |\n| $4$ | $13$ | $x_i=i-1,p_i=1$ |\n| $5$ | $14$ | $p_i=10^9$ |\n| $6$ | $17$ | 无 |\n\n对于 $100\\%$ 的数据，范围见输入格式。", "locale": "zh-CN"}}}
{"pid": "P11117", "type": "P", "difficulty": 5, "samples": [["5\n4 4\n1 2 0\n2 3 1\n3 4 0\n2 4 1\n0 1 0 0\n4 4\n1 2 0\n2 3 1\n3 4 0\n4 1 1\n0 1 0 1\n1 0\n1\n1 0\n0\n2 1\n1 2 0\n0 0", "YES\n5\n4 1\n3 1\n2 1\n3 0\n4 0\nNO\nYES\n1\n1 1\nYES\n1\n1 0\nYES\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 交互式通道 (Day 2)", "background": "翻译自 [ROI 2024 D2T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n\nROI 的举办地 Innopolis 大学由 $n$ 个建筑物和 $m$ 条通道组成。每条通道连接两个不同的建筑物，任何两个建筑物之间不会有多于一条通道。\n\n已知每个建筑物都有一个可以打开或关闭的灯光。最初，所有建筑物的灯光都是关闭的。校园管理员可以在一个操作中打开或关闭任何一个建筑物的灯光。管理员还可以在灯光已经打开的情况下按下开灯按钮，或在灯光已经关闭的情况下按下关灯按钮。这些操作不会改变建筑物的灯光状态。\n\n类似地，每条通道也有一个可以打开或关闭的灯光。最初，所有通道的灯光也都是关闭的。但与建筑物的灯光不同，通道的灯光会自动变化：如果在管理员的操作后，该通道连接的两所建筑物的灯光状态相同，那么通道的灯光也会变为相同的状态，否则它不会改变。\n\n换句话说，如果在管理员的操作后，连接的两个建筑物的灯光都关闭，则通道的灯光也会关闭。如果连接的两个建筑物的灯光都打开，则通道的灯光也会打开。如果一个建筑物的灯光打开而另一个关闭，则通道的灯光状态不变。", "description": "在 ROI 开始之前，校园主任为每个建筑物和每条通道确定了它们是否应该被照亮。请你检查管理员是否可以通过任意数量的操作来实现主任的要求。如果可以，请找到任何一种满足要求的操作序列。能够正确判断是否可以得到期望的灯光状态，即使未提供操作序列的解决方案，也能获得该测试点一半的分数。", "inputFormat": "输入包含多组数据。第一行包含一个整数 $t$，表示测试数据的组数（$1 \\leq t \\leq 50000$）。\n\n在每组数据中：\n\n第一行输入两个整数 $n$ 和 $m$，分别表示建筑物的数量和通道的数量（$1 \\leq n \\leq 10^5$, $0 \\leq m \\leq 2 \\times 10^5$）。\n\n接下来的 $m$ 行是通道的描述。在第 $i$ 行中有三个整数 $a_i$, $b_i$, $c_i$ ，分别是由第 $i$ 个通道连接的两个建筑物编号，以及第 $i$ 个通道要求的灯光状态（$1 \\leq a_i, b_i \\leq n$, $a_i \\ne b_i$, $0 \\leq c_i \\leq 1$）。如果 $c_i = 0$，则第 $i$ 个通道的灯光状态最终应该是关闭的，如果 $c_i = 1$，则应该是开启的。\n\n最后一行给出 $n$ 个整数 $d_1, d_2, \\dots, d_n$，表示各建筑物要求的灯光状态（$0 \\leq d_i \\leq 1$）。如果 $d_v = 0$，则建筑物 $v$ 的灯光状态最终应该是关闭的，如果 $d_v = 1$，则应该是开启的。\n\n所有 $n$ 值的总和不超过 $10^5$，$m$ 值的总和不超过 $2 \\times 10^5$。", "outputFormat": "对于每组输入：\n- 如果不存在一种操作序列能使得建筑物和通道的灯光状态达到要求，则输出 `NO`。\n- 如果存在操作序列，则输出 `YES`。如果不展示具体的操作序列（只拿部分分），则在下一行输出数字 $-1$ 并继续输出下一组数据（如果有的话）。如果展示操作序列，则在下一行输出整数 $s$，表示操作的数量（$0 \\leq s \\leq 10^6$，所有 $s$ 值的总和不超过 $10^6$），然后在接下来的 $s$ 行中输出下列具体操作：  \n  - 在第 $i$ 行（$1 \\leq i \\leq s$）中，输出两个整数 $v_i,x_i$，分别是改变灯光状态的建筑物编号，以及新的灯光状态（$1 \\leq v_i \\leq n$，$0 \\leq x_i \\leq 1$；如果 $x_i = 0$，则表示需要关闭建筑物 $v_i$ 的灯光，如果 $x_i = 1$，则表示需要打开建筑物 $v_i$ 的灯光）。", "hint": "样例解释：\n\n第一组数据包含 $4$ 个建筑物（用圆圈表示）和 $4$ 条通道（用线表示）。机房或通道的灯光状态通过加粗的线表示（如果加粗则表示开灯）。要达到所需的灯光状态，需要 $5$ 步操作。下图展示了初始灯光状态及每一步操作后的状态：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0cssyxju.png)\n\n第二组数据需要达到下列机房和通道的配置，但这是不可能的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x0ftqnxw.png)\n\n第三组数据中有一个建筑物需要开启灯光。这可以通过一步操作完成。\n\n第四组数据中有一个建筑物需要关闭灯光。一个可行的操作序列是一步操作，关闭该机房的灯光。尽管灯光已经是关闭状态，这样的操作依然是有效的。\n\n第五组数据中有两个建筑物和一条通道，所有的灯光都需要关闭。空的操作序列也是一种可行的解决方案。\n\n数据范围见输入格式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 交互式通道 (Day 2)", "background": "翻译自 [ROI 2024 D2T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n\nROI 的举办地 Innopolis 大学由 $n$ 个建筑物和 $m$ 条通道组成。每条通道连接两个不同的建筑物，任何两个建筑物之间不会有多于一条通道。\n\n已知每个建筑物都有一个可以打开或关闭的灯光。最初，所有建筑物的灯光都是关闭的。校园管理员可以在一个操作中打开或关闭任何一个建筑物的灯光。管理员还可以在灯光已经打开的情况下按下开灯按钮，或在灯光已经关闭的情况下按下关灯按钮。这些操作不会改变建筑物的灯光状态。\n\n类似地，每条通道也有一个可以打开或关闭的灯光。最初，所有通道的灯光也都是关闭的。但与建筑物的灯光不同，通道的灯光会自动变化：如果在管理员的操作后，该通道连接的两所建筑物的灯光状态相同，那么通道的灯光也会变为相同的状态，否则它不会改变。\n\n换句话说，如果在管理员的操作后，连接的两个建筑物的灯光都关闭，则通道的灯光也会关闭。如果连接的两个建筑物的灯光都打开，则通道的灯光也会打开。如果一个建筑物的灯光打开而另一个关闭，则通道的灯光状态不变。", "description": "在 ROI 开始之前，校园主任为每个建筑物和每条通道确定了它们是否应该被照亮。请你检查管理员是否可以通过任意数量的操作来实现主任的要求。如果可以，请找到任何一种满足要求的操作序列。能够正确判断是否可以得到期望的灯光状态，即使未提供操作序列的解决方案，也能获得该测试点一半的分数。", "inputFormat": "输入包含多组数据。第一行包含一个整数 $t$，表示测试数据的组数（$1 \\leq t \\leq 50000$）。\n\n在每组数据中：\n\n第一行输入两个整数 $n$ 和 $m$，分别表示建筑物的数量和通道的数量（$1 \\leq n \\leq 10^5$, $0 \\leq m \\leq 2 \\times 10^5$）。\n\n接下来的 $m$ 行是通道的描述。在第 $i$ 行中有三个整数 $a_i$, $b_i$, $c_i$ ，分别是由第 $i$ 个通道连接的两个建筑物编号，以及第 $i$ 个通道要求的灯光状态（$1 \\leq a_i, b_i \\leq n$, $a_i \\ne b_i$, $0 \\leq c_i \\leq 1$）。如果 $c_i = 0$，则第 $i$ 个通道的灯光状态最终应该是关闭的，如果 $c_i = 1$，则应该是开启的。\n\n最后一行给出 $n$ 个整数 $d_1, d_2, \\dots, d_n$，表示各建筑物要求的灯光状态（$0 \\leq d_i \\leq 1$）。如果 $d_v = 0$，则建筑物 $v$ 的灯光状态最终应该是关闭的，如果 $d_v = 1$，则应该是开启的。\n\n所有 $n$ 值的总和不超过 $10^5$，$m$ 值的总和不超过 $2 \\times 10^5$。", "outputFormat": "对于每组输入：\n- 如果不存在一种操作序列能使得建筑物和通道的灯光状态达到要求，则输出 `NO`。\n- 如果存在操作序列，则输出 `YES`。如果不展示具体的操作序列（只拿部分分），则在下一行输出数字 $-1$ 并继续输出下一组数据（如果有的话）。如果展示操作序列，则在下一行输出整数 $s$，表示操作的数量（$0 \\leq s \\leq 10^6$，所有 $s$ 值的总和不超过 $10^6$），然后在接下来的 $s$ 行中输出下列具体操作：  \n  - 在第 $i$ 行（$1 \\leq i \\leq s$）中，输出两个整数 $v_i,x_i$，分别是改变灯光状态的建筑物编号，以及新的灯光状态（$1 \\leq v_i \\leq n$，$0 \\leq x_i \\leq 1$；如果 $x_i = 0$，则表示需要关闭建筑物 $v_i$ 的灯光，如果 $x_i = 1$，则表示需要打开建筑物 $v_i$ 的灯光）。", "hint": "样例解释：\n\n第一组数据包含 $4$ 个建筑物（用圆圈表示）和 $4$ 条通道（用线表示）。机房或通道的灯光状态通过加粗的线表示（如果加粗则表示开灯）。要达到所需的灯光状态，需要 $5$ 步操作。下图展示了初始灯光状态及每一步操作后的状态：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0cssyxju.png)\n\n第二组数据需要达到下列机房和通道的配置，但这是不可能的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x0ftqnxw.png)\n\n第三组数据中有一个建筑物需要开启灯光。这可以通过一步操作完成。\n\n第四组数据中有一个建筑物需要关闭灯光。一个可行的操作序列是一步操作，关闭该机房的灯光。尽管灯光已经是关闭状态，这样的操作依然是有效的。\n\n第五组数据中有两个建筑物和一条通道，所有的灯光都需要关闭。空的操作序列也是一种可行的解决方案。\n\n数据范围见输入格式。", "locale": "zh-CN"}}}
{"pid": "P11118", "type": "P", "difficulty": 7, "samples": [["3 3\n1 2 3\n1 3 6", "0\n4\n11"], ["3 3\n3 2 1\n1 3 6", "0\n5\n13"], ["2 5\n2 1\n1 3 4 6 7", "0\n6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 无人机比赛 (Day 2)", "background": "翻译自 [ROI 2024 D2T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n  \n有 $n$ 架无人机报名参加一个无人机比赛，第 $i$ 架无人机飞过一单位距离需要 $t_i$ 秒。  \n\n比赛在一条直线上进行，该直线上有 $m$ 个门，编号从 $1$ 到 $m$，第 $i$ 个门位于距离比赛起点 $s_i$ 的位置。  \n\n因为赛道大小的限制，第一场比赛只会有前 $k$ 架无人机参与，编号从 $1$ 到 $k$。$k$ 的值由裁判在比赛开始前宣布，因此此时你需要对 $k$ 从 $1$ 到 $n$ 的比赛情况进行分析。  \n\n比赛的进行方式如下：  \n\n无人机从 $0$ 号点开始向门移动，每架无人机的速度不同。每架无人机都有一个存档点，即最后一个它进行了存档操作的门。最初，每架无人机的存档点都是 $0$ 号点。\n\n在比赛中，所有无人机从其存档点开始移动，直到有一架或多架无人机到达一个门（有可能是不同无人机同时到达不同的门）。此时，在所有到达门的无人机中，选择编号最小的无人机，对该无人机进行存档操作，将其存档点设置为当前的位置。其他无人机立即传送到其存档点。然后，比赛继续进行。  \n\n如果一架无人机在最后一个编号为 $m$ 的门上进行存档操作，那么它就完成了比赛。尚未完成的无人机将传送到其存档点继续比赛。当所有无人机都完赛时，比赛结束。  ", "description": "传送是一个非常耗能的过程。为了准备比赛，你需要了解所有无人机在比赛结束之前一共将进行多少次传送。设 $c_k$ 表示当前 $k$ 架无人机参与比赛时，所有无人机的总传送次数，则你需要求出 $c_1, c_2, \\dots, c_n$ 的值。  ", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示无人机的数量和门的数量（$2 \\leq n \\leq 150000$，$1 \\leq m \\leq 150000$）。\n\n第二行包含 $n$ 个正整数 $t_1, t_2, \\dots, t_n$，$t_i$ 表示第 $i$ 架无人机飞过一单位距离所需的秒数（$1 \\leq t_i \\leq 10^9$）。\n\n第三行包含 $m$ 个正整数 $s_1, s_2, \\dots, s_m$，$s_i$ 表示第 $i$ 个门的位置（$1 \\leq s_1 < s_2 < \\dots < s_m \\leq 150000$）。", "outputFormat": "输出 $n$ 个整数 $c_1, c_2, \\dots, c_n$，意义见题目描述。", "hint": "样例 $1$ 解释：\n\n当 $k=1$，无需任何传送，因为只有一架无人机参加，只有它在一直存档。\n\n当 $k=2$ 时，整个比赛的过程如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tkvspecj.png)\n\n当 $k=3$ 时，整个比赛的过程如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j1pegbo0.png)\n\n各子任务特殊性质表格：\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ | $t_i\\le$ | $s_i\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $2$ | $50$ | $100000$ | $100000$ |  |\n| $2$ | $7$ | $50$ | $50$ | $100000$ | $100000$ |  |\n| $3$ | $13$ | $1000$ | $5$ | $100000$ | $100000$ |  |\n| $4$ | $9$ | $100000$ | $100000$ | $100000$ | $100000$ | $s_{i+1}-s_i=s_1$ |\n| $5$ | $8$ | $100000$ | $100000$ | $100000$ | $100000$ | 所有 $t_i$ 相等 |\n| $6$ | $10$ | $100$ | $100000$ | $100000$ | $100000$ |  |\n| $7$ | $5$ | $100000$ | $100000$ | $2$ | $100000$ |  |\n| $8$ | $7$ | $100000$ | $m=2$ | $100000$ | $100000$ |  |\n| $9$ | $6$ | $10000$ | $100000$ | $100000$ | $100000$ |  |\n| $10$ | $6$ | $50000$ | $100000$ | $100000$ | $100000$ |  |\n| $11$ | $8$ | $100000$ | $100000$ | $100000$ | $100000$ |  |\n| $12$ | $8$ | $100000$ |  |  |  |  |\n| $13$ | $8$ |  |  |  |  |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 无人机比赛 (Day 2)", "background": "翻译自 [ROI 2024 D2T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n  \n有 $n$ 架无人机报名参加一个无人机比赛，第 $i$ 架无人机飞过一单位距离需要 $t_i$ 秒。  \n\n比赛在一条直线上进行，该直线上有 $m$ 个门，编号从 $1$ 到 $m$，第 $i$ 个门位于距离比赛起点 $s_i$ 的位置。  \n\n因为赛道大小的限制，第一场比赛只会有前 $k$ 架无人机参与，编号从 $1$ 到 $k$。$k$ 的值由裁判在比赛开始前宣布，因此此时你需要对 $k$ 从 $1$ 到 $n$ 的比赛情况进行分析。  \n\n比赛的进行方式如下：  \n\n无人机从 $0$ 号点开始向门移动，每架无人机的速度不同。每架无人机都有一个存档点，即最后一个它进行了存档操作的门。最初，每架无人机的存档点都是 $0$ 号点。\n\n在比赛中，所有无人机从其存档点开始移动，直到有一架或多架无人机到达一个门（有可能是不同无人机同时到达不同的门）。此时，在所有到达门的无人机中，选择编号最小的无人机，对该无人机进行存档操作，将其存档点设置为当前的位置。其他无人机立即传送到其存档点。然后，比赛继续进行。  \n\n如果一架无人机在最后一个编号为 $m$ 的门上进行存档操作，那么它就完成了比赛。尚未完成的无人机将传送到其存档点继续比赛。当所有无人机都完赛时，比赛结束。  ", "description": "传送是一个非常耗能的过程。为了准备比赛，你需要了解所有无人机在比赛结束之前一共将进行多少次传送。设 $c_k$ 表示当前 $k$ 架无人机参与比赛时，所有无人机的总传送次数，则你需要求出 $c_1, c_2, \\dots, c_n$ 的值。  ", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示无人机的数量和门的数量（$2 \\leq n \\leq 150000$，$1 \\leq m \\leq 150000$）。\n\n第二行包含 $n$ 个正整数 $t_1, t_2, \\dots, t_n$，$t_i$ 表示第 $i$ 架无人机飞过一单位距离所需的秒数（$1 \\leq t_i \\leq 10^9$）。\n\n第三行包含 $m$ 个正整数 $s_1, s_2, \\dots, s_m$，$s_i$ 表示第 $i$ 个门的位置（$1 \\leq s_1 < s_2 < \\dots < s_m \\leq 150000$）。", "outputFormat": "输出 $n$ 个整数 $c_1, c_2, \\dots, c_n$，意义见题目描述。", "hint": "样例 $1$ 解释：\n\n当 $k=1$，无需任何传送，因为只有一架无人机参加，只有它在一直存档。\n\n当 $k=2$ 时，整个比赛的过程如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tkvspecj.png)\n\n当 $k=3$ 时，整个比赛的过程如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j1pegbo0.png)\n\n各子任务特殊性质表格：\n\n| 子任务 | 分值 | $n\\le$ | $m\\le$ | $t_i\\le$ | $s_i\\le$ | 其它特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $2$ | $50$ | $100000$ | $100000$ |  |\n| $2$ | $7$ | $50$ | $50$ | $100000$ | $100000$ |  |\n| $3$ | $13$ | $1000$ | $5$ | $100000$ | $100000$ |  |\n| $4$ | $9$ | $100000$ | $100000$ | $100000$ | $100000$ | $s_{i+1}-s_i=s_1$ |\n| $5$ | $8$ | $100000$ | $100000$ | $100000$ | $100000$ | 所有 $t_i$ 相等 |\n| $6$ | $10$ | $100$ | $100000$ | $100000$ | $100000$ |  |\n| $7$ | $5$ | $100000$ | $100000$ | $2$ | $100000$ |  |\n| $8$ | $7$ | $100000$ | $m=2$ | $100000$ | $100000$ |  |\n| $9$ | $6$ | $10000$ | $100000$ | $100000$ | $100000$ |  |\n| $10$ | $6$ | $50000$ | $100000$ | $100000$ | $100000$ |  |\n| $11$ | $8$ | $100000$ | $100000$ | $100000$ | $100000$ |  |\n| $12$ | $8$ | $100000$ |  |  |  |  |\n| $13$ | $8$ |  |  |  |  |  |", "locale": "zh-CN"}}}
{"pid": "P11119", "type": "P", "difficulty": 6, "samples": [["3 1\n1 0 0", "0"], ["5 0\n2 1 0 0 1", "6"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2024] 保持连接 (Day 2)", "background": "翻译自 [ROI 2024 D2T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n\n在一条进行无人驾驶卡车测试的直路上，有 $n$ 个城市，第 $i$ 个城市位于坐标为 $i$ 的位置。第 $i$ 个城市安装了一个功率为 $a_i$ 的天线，覆盖从 $L_i = \\max(1, i - a_i)$ 到 $R_i = \\min(n, i + a_i)$ 的所有城市。\n\n无人驾驶卡车沿着这条路从城市 $s$ 移动到城市 $t$，其中 $s < t$。卡车在经过的每个城市都会连接到覆盖该城市的某个天线。连接天线的规则如下：\n1. 在起始城市，卡车连接到覆盖该城市的天线中 $R_i$ 最大的一个。如果有多个这样的天线，可以选择其中任何一个。\n2. 当卡车从城市 $v$ 移动到城市 $v + 1$ 时，如果之前连接的天线仍覆盖城市 $v + 1$，卡车将继续连接到该天线。否则，如果之前连接的天线不再覆盖城市 $v + 1$，卡车将重新连接到覆盖城市 $v + 1$ 的天线中 $R_i$ 最大的一个。如果有多个这样的天线，可以选择其中任何一个。\n\n我们用 $f(s, t)$ 表示从城市 $s$ 到城市 $t$ 的卡车在途中进行的天线重新连接的次数（$s < t$）。在城市 $s$ 进行的初次连接不算作重新连接。", "description": "定义天线覆盖道路的不稳定性 $F$ 为 $f(s, t)$ 的总和，即：\n\n$$F = \\sum_{s=1}^{n-1} \\sum_{t=s+1}^{n} f(s, t)$$\n\n道路运营商有一个备用天线，功率为 $x$。为了降低天线覆盖的不稳定性，可以用备用天线替换任意一个现有天线。你需要确定，如果最多替换一个天线为功率 $x$ 的备用天线，不稳定性 $F$ 值最小可能是多少。", "inputFormat": "第一行包含两个整数 $n$ 和 $x$（$1 \\leq n \\leq 10^6$，$0 \\leq x \\leq n$），分别为城市的数量和备用天线的功率。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$（$0 \\leq a_i \\leq n$），即每个城市天线的功率。", "outputFormat": "输出在最多用一个备用天线替换现有天线后，$F$ 的最小可能值。", "hint": "在第一个样例中，可以将第二个天线替换为备用天线。这样，卡车从任何位置出发，都会连接到备用天线，避免了任何重新连接。\n\n在第二个样例中，不需要使用备用天线。所有从前 $3$ 个城市出发且到达最后 $2$ 个城市的卡车，都需要重新连接到最后一个天线，因此不稳定性总和为 $6$。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $7$ | $n\\le100$ |\n| $2$ | $8$ | $n\\le500$ |\n| $3$ | $6$ | $n\\le5000$ |\n| $4$ | $12$ | $x=0$ |\n| $5$ | $5$ | $a_i=0$ |\n| $6$ | $16$ | $a_i\\le1$ |\n| $7$ | $14$ | $a_i\\ge\\frac n{20}$ |\n| $8$ | $32$ | 无 |\n\n全部数据范围见输入格式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2024] 保持连接 (Day 2)", "background": "翻译自 [ROI 2024 D2T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-roi-2024-day2.pdf)。\n\n在一条进行无人驾驶卡车测试的直路上，有 $n$ 个城市，第 $i$ 个城市位于坐标为 $i$ 的位置。第 $i$ 个城市安装了一个功率为 $a_i$ 的天线，覆盖从 $L_i = \\max(1, i - a_i)$ 到 $R_i = \\min(n, i + a_i)$ 的所有城市。\n\n无人驾驶卡车沿着这条路从城市 $s$ 移动到城市 $t$，其中 $s < t$。卡车在经过的每个城市都会连接到覆盖该城市的某个天线。连接天线的规则如下：\n1. 在起始城市，卡车连接到覆盖该城市的天线中 $R_i$ 最大的一个。如果有多个这样的天线，可以选择其中任何一个。\n2. 当卡车从城市 $v$ 移动到城市 $v + 1$ 时，如果之前连接的天线仍覆盖城市 $v + 1$，卡车将继续连接到该天线。否则，如果之前连接的天线不再覆盖城市 $v + 1$，卡车将重新连接到覆盖城市 $v + 1$ 的天线中 $R_i$ 最大的一个。如果有多个这样的天线，可以选择其中任何一个。\n\n我们用 $f(s, t)$ 表示从城市 $s$ 到城市 $t$ 的卡车在途中进行的天线重新连接的次数（$s < t$）。在城市 $s$ 进行的初次连接不算作重新连接。", "description": "定义天线覆盖道路的不稳定性 $F$ 为 $f(s, t)$ 的总和，即：\n\n$$F = \\sum_{s=1}^{n-1} \\sum_{t=s+1}^{n} f(s, t)$$\n\n道路运营商有一个备用天线，功率为 $x$。为了降低天线覆盖的不稳定性，可以用备用天线替换任意一个现有天线。你需要确定，如果最多替换一个天线为功率 $x$ 的备用天线，不稳定性 $F$ 值最小可能是多少。", "inputFormat": "第一行包含两个整数 $n$ 和 $x$（$1 \\leq n \\leq 10^6$，$0 \\leq x \\leq n$），分别为城市的数量和备用天线的功率。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$（$0 \\leq a_i \\leq n$），即每个城市天线的功率。", "outputFormat": "输出在最多用一个备用天线替换现有天线后，$F$ 的最小可能值。", "hint": "在第一个样例中，可以将第二个天线替换为备用天线。这样，卡车从任何位置出发，都会连接到备用天线，避免了任何重新连接。\n\n在第二个样例中，不需要使用备用天线。所有从前 $3$ 个城市出发且到达最后 $2$ 个城市的卡车，都需要重新连接到最后一个天线，因此不稳定性总和为 $6$。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $7$ | $n\\le100$ |\n| $2$ | $8$ | $n\\le500$ |\n| $3$ | $6$ | $n\\le5000$ |\n| $4$ | $12$ | $x=0$ |\n| $5$ | $5$ | $a_i=0$ |\n| $6$ | $16$ | $a_i\\le1$ |\n| $7$ | $14$ | $a_i\\ge\\frac n{20}$ |\n| $8$ | $32$ | 无 |\n\n全部数据范围见输入格式。", "locale": "zh-CN"}}}
{"pid": "P11120", "type": "P", "difficulty": 2, "samples": [["1 0\nX.XX.X", "X.XX.X"], ["2 1\nX.XX.X\n..X...", "X.XX.X\n..XX.."], ["3 2\nX.XX.X\n......\nX..X.X", "Impossible"], ["1 103\n.X.XXX", "Impossible"], ["6 7\nX.....\n......\n....X.\nX.....\n......\n..XX..", "X....X\nX....X\n.X..X.\nX....X\n..XX..\n..XX.."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "2024", "Special Judge", "枚举", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 登机 (Day 1)", "background": "翻译自 [ROIR 2024 D1T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。\n\n飞机上一共有 $n$ 排座位，每排有六个位置，其中第三和第四个位置之间有过道。一些乘客在线上已经提前订好位置，其他乘客则在机场的登记台购买机票。在线上购买机票时，乘客可以选择任何座位，且不能更改。例如，当 $n = 6$ 时，在线上已经订好的座位可能如下（用叉号标记已占用的座位）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bei2tmfa.png)\n\n有 $m$ 名乘客在登记台购买机票。根据航空公司的规定，在工作人员帮他们选好位置后，最终的座位安排相对于过道应该是对称的。即，如果某一排的第一个座位有乘客，那么同一排的第六个座位也必须有乘客。同样，第二和第五、第三和第四个座位也必须相应对称。同时，在线上购买的乘客的座位不能改变。在上图的初始座位中，可以添加七名乘客以满足对称性，如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vkk729ne.png)", "description": "给定在线购买的乘客选定的座位，你需要安排 $m$ 名乘客，使得最终的座位安排相对于过道是对称的。如果不可能做到，输出 `Impossible`。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示飞机座位的排数和在机场登记台购买机票的乘客数量（$1 \\leq n \\leq 1000$，$0 \\leq m \\leq 6000$）。\n\n接下来的 $n$ 行描述了在线购买的乘客选定好的座位。每行包含六个字符，其中第 $j$ 行的第 $i$ 个字符表示第 $j$ 排的第 $i$ 个座位的状态，如果第 $i$ 个座位被占用，则为 `X`，否则为 `.`。", "outputFormat": "如果无法找到满足要求的座位安排，输出 `Impossible`。\n\n否则，输出 $n$ 行，每行六个字符，即飞机的最终座位安排，其中第 $j$ 行的第 $i$ 个字符表示第 $j$ 排的第 $i$ 个座位的状态。如果座位被占用则为 `X`，否则为 `.`。如果存在多个方案，可以输出其中任意一个。", "hint": "| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $15$ | $m=0$ |\n| $2$ | $16$ | 刚开始飞机上所有座位都是空的 |\n| $3$ | $17$ | $m=1$ |\n| $4$ | $18$ | 刚开始飞机上只有一个座位 |\n| $5$ | $34$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 1000$，$0 \\leq m \\leq 6000$。\n\nSubtask 5 的最后两个测试点是原数据中没有的 hack。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 登机 (Day 1)", "background": "翻译自 [ROIR 2024 D1T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。\n\n飞机上一共有 $n$ 排座位，每排有六个位置，其中第三和第四个位置之间有过道。一些乘客在线上已经提前订好位置，其他乘客则在机场的登记台购买机票。在线上购买机票时，乘客可以选择任何座位，且不能更改。例如，当 $n = 6$ 时，在线上已经订好的座位可能如下（用叉号标记已占用的座位）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bei2tmfa.png)\n\n有 $m$ 名乘客在登记台购买机票。根据航空公司的规定，在工作人员帮他们选好位置后，最终的座位安排相对于过道应该是对称的。即，如果某一排的第一个座位有乘客，那么同一排的第六个座位也必须有乘客。同样，第二和第五、第三和第四个座位也必须相应对称。同时，在线上购买的乘客的座位不能改变。在上图的初始座位中，可以添加七名乘客以满足对称性，如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vkk729ne.png)", "description": "给定在线购买的乘客选定的座位，你需要安排 $m$ 名乘客，使得最终的座位安排相对于过道是对称的。如果不可能做到，输出 `Impossible`。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示飞机座位的排数和在机场登记台购买机票的乘客数量（$1 \\leq n \\leq 1000$，$0 \\leq m \\leq 6000$）。\n\n接下来的 $n$ 行描述了在线购买的乘客选定好的座位。每行包含六个字符，其中第 $j$ 行的第 $i$ 个字符表示第 $j$ 排的第 $i$ 个座位的状态，如果第 $i$ 个座位被占用，则为 `X`，否则为 `.`。", "outputFormat": "如果无法找到满足要求的座位安排，输出 `Impossible`。\n\n否则，输出 $n$ 行，每行六个字符，即飞机的最终座位安排，其中第 $j$ 行的第 $i$ 个字符表示第 $j$ 排的第 $i$ 个座位的状态。如果座位被占用则为 `X`，否则为 `.`。如果存在多个方案，可以输出其中任意一个。", "hint": "| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $15$ | $m=0$ |\n| $2$ | $16$ | 刚开始飞机上所有座位都是空的 |\n| $3$ | $17$ | $m=1$ |\n| $4$ | $18$ | 刚开始飞机上只有一个座位 |\n| $5$ | $34$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 1000$，$0 \\leq m \\leq 6000$。\n\nSubtask 5 的最后两个测试点是原数据中没有的 hack。", "locale": "zh-CN"}}}
{"pid": "P11121", "type": "P", "difficulty": 2, "samples": [["5\n1 1 2 3 1", "11"], ["3\n1 1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "Special Judge", "枚举", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 双调序列 (Day 1)", "background": "翻译自 [ROIR 2024 D1T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。\n\n称一个序列 $[b_1, b_2, \\dots, b_k]$ 为双调序列（Bitonic Sequence），当且仅当存在一个 $1 \\leq i \\leq k$ 使得 $ b_1 < b_2 < \\dots < b_i > \\dots > b_k $。\n\n例如，序列 $[1]$，$[2,4,5,7,5,4]$，$[1, 4, 10]$，$[3, 2]$ 都是双调序列，而序列 $[1, 1]$，$[5,4,2,4,5,7]$，$[1,1,4,5,1,4]$ 都不是。", "description": "给定一个序列 $[a_1, a_2, \\dots, a_n]$。要求计算满足条件的 $(l, r)$ 对的数量，其中 $1 \\leq l \\leq r \\leq n$ 并且序列 $[a_l, a_{l+1}, \\dots, a_r]$ 是双调序列。", "inputFormat": "第一行输入一个整数 $n$（$1 \\leq n \\leq 300000$）。\n\n第二行输入 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq n$）。", "outputFormat": "输出一个整数，即满足 $1 \\leq l \\leq r \\leq n$ 且序列 $[a_l, a_{l+1}, \\dots, a_r]$ 是双调序列的 $(l, r)$ 对的数量。", "hint": "在样例一中，满足条件的 $(l, r)$ 对如下：\n- $(1, 1)$，对应序列 $[1]$；\n- $(2, 2)$，对应序列 $[1]$；\n- $(2, 3)$，对应序列 $[1, 2]$；\n- $(2, 4)$，对应序列 $[1, 2, 3]$；\n- $(2, 5)$，对应序列 $[1, 2, 3, 1]$；\n- $(3, 3)$，对应序列 $[2]$；\n- $(3, 4)$，对应序列 $[2, 3]$；\n- $(3, 5)$，对应序列 $[2, 3, 1]$；\n- $(4, 4)$，对应序列 $[3]$；\n- $(4, 5)$，对应序列 $[3, 1]$；\n- $(5, 5)$，对应序列 $[1]$。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $27$ | $n\\le500$ |\n| $2$ | $14$ | $n\\le5000$ |\n| $3$ | $20$ | 所有 $a_i$ 互不相等 |\n| $4$ | $39$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq a_i \\leq n \\leq 300000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 双调序列 (Day 1)", "background": "翻译自 [ROIR 2024 D1T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。\n\n称一个序列 $[b_1, b_2, \\dots, b_k]$ 为双调序列（Bitonic Sequence），当且仅当存在一个 $1 \\leq i \\leq k$ 使得 $ b_1 < b_2 < \\dots < b_i > \\dots > b_k $。\n\n例如，序列 $[1]$，$[2,4,5,7,5,4]$，$[1, 4, 10]$，$[3, 2]$ 都是双调序列，而序列 $[1, 1]$，$[5,4,2,4,5,7]$，$[1,1,4,5,1,4]$ 都不是。", "description": "给定一个序列 $[a_1, a_2, \\dots, a_n]$。要求计算满足条件的 $(l, r)$ 对的数量，其中 $1 \\leq l \\leq r \\leq n$ 并且序列 $[a_l, a_{l+1}, \\dots, a_r]$ 是双调序列。", "inputFormat": "第一行输入一个整数 $n$（$1 \\leq n \\leq 300000$）。\n\n第二行输入 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq n$）。", "outputFormat": "输出一个整数，即满足 $1 \\leq l \\leq r \\leq n$ 且序列 $[a_l, a_{l+1}, \\dots, a_r]$ 是双调序列的 $(l, r)$ 对的数量。", "hint": "在样例一中，满足条件的 $(l, r)$ 对如下：\n- $(1, 1)$，对应序列 $[1]$；\n- $(2, 2)$，对应序列 $[1]$；\n- $(2, 3)$，对应序列 $[1, 2]$；\n- $(2, 4)$，对应序列 $[1, 2, 3]$；\n- $(2, 5)$，对应序列 $[1, 2, 3, 1]$；\n- $(3, 3)$，对应序列 $[2]$；\n- $(3, 4)$，对应序列 $[2, 3]$；\n- $(3, 5)$，对应序列 $[2, 3, 1]$；\n- $(4, 4)$，对应序列 $[3]$；\n- $(4, 5)$，对应序列 $[3, 1]$；\n- $(5, 5)$，对应序列 $[1]$。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $27$ | $n\\le500$ |\n| $2$ | $14$ | $n\\le5000$ |\n| $3$ | $20$ | 所有 $a_i$ 互不相等 |\n| $4$ | $39$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq a_i \\leq n \\leq 300000$。", "locale": "zh-CN"}}}
{"pid": "P11122", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 3\n2 3 1\n3 1 2\n8", "YES\n2\n1 3\n2 3"], ["2 3\n2 2 2\n2 2 2\n5", "NO"], ["5 5\n1 2 1 4 5\n2 5 4 1 2\n4 2 4 3 1\n5 5 3 2 4\n1 2 4 5 2\n34", "YES\n3\n1 4\n1 5\n2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "折半搜索 meet in the middle", "状压 DP", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 表格游戏 (Day 1)", "background": "翻译自 [ROIR 2024 D1T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。", "description": "给定一个有 $h$ 行和 $w$ 列的表格 $A$，每个单元格内含有一个整数。行从上到下编号为 $1$ 到 $h$，列从左到右编号为 $1$ 到 $w$。允许对这个表格进行以下操作：\n\n- 选择一列并删除它（删除的列左边和右边的列变为相邻的列）；\n- 选择一行并删除它（删除的行上边和下边的行变为相邻的行）。\n\n这些操作可以按任意顺序执行任意多次。\n\n你需要确定是否可以通过这些操作将表格变为一个数字之和为 $s$ 的表格。如果可以，请给出具体的操作。", "inputFormat": "第一行包含两个数字 $h$ 和 $w$，表示表格的大小（$1 \\leq h, w \\leq 15$）。\n\n接下来 $h$ 行，每行包含 $w$ 个整数，其中第 $i$ 行第 $j$ 列为 $A_{i,j}$（$0 \\leq A_{i,j} \\leq 10^9$）。\n\n最后一行输入数字 $s$，即需要通过操作达到的和（$1 \\leq s \\leq 10^{18}$）。", "outputFormat": "如果从原始表格中无法得到一个数字之和为 $s$ 的表格，输出 `NO`。\n\n否则：\n- 第一行输出 `YES`。\n- 第二行输出一个数字 $k$ ，表示需要进行的操作次数。\n- 接下来的 $k$ 行，每行输出两个整数 $t_j$，$i_j$，其中 $t_j = 1$ 表示操作是对行进行的，$t_j = 2$ 表示操作是对列进行的。数字 $i_j$ 应为操作所针对的行或列的初始编号。", "hint": "在样例 $1$ 中，最初给定的表格是：\n\n$$\n\\begin{matrix}\n1 & 2 & 3 \\\\\n2 & 3 & 1 \\\\\n3 & 1 & 2 \\\\\n\\end{matrix}\n$$\n\n删除第三行和第三列后，我们得到以下表格，其元素总和为 $8$：\n\n$$\n\\begin{matrix}\n1 & 2 & 3 \\\\\n2 & 3 & 1 \\\\\n3 & 1 & 2 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 & 3 \\\\\n2 & 3 & 1 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 \\\\\n2 & 3 \\\\\n\\end{matrix}\n$$\n\n在样例 $2$ 中，显然无法通过操作从初始表格中得到元素总和为 $5$ 的表格，因为初始表格全部都是 $2$，而 $5$ 是一个奇数。\n\n在样例 $3$ 中，最初给定的表格是：\n\n$$\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n5 & 5 & 3 & 2 & 4 \\\\\n1 & 2 & 4 & 5 & 2 \\\\\n\\end{matrix}\n$$\n\n删除最后两行和第一列后，我们得到以下表格，其元素总和为 $34$：\n\n$$\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n5 & 5 & 3 & 2 & 4 \\\\\n1 & 2 & 4 & 5 & 2 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n1 & 2 & 4 & 5 & 2 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n2 & 1 & 4 & 5 \\\\\n5 & 4 & 1 & 2 \\\\\n2 & 4 & 3 & 1 \\\\\n\\end{matrix}\n$$\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $17$ | $h=1$ |\n| $2$ | $6$ | 第 $i$ 行中的数字和不超过 $i$ |\n| $3$ | $10$ | $h\\le3$ |\n| $4$ | $13$ | $h,w\\le10$ |\n| $5$ | $13$ | $h,w\\le12$ |\n| $6$ | $12$ | $A_{i,j}\\le6$ |\n| $7$ | $29$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq h, w \\leq 15$，$0 \\leq A_{i,j} \\leq 10^9$，$1 \\leq s \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 表格游戏 (Day 1)", "background": "翻译自 [ROIR 2024 D1T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。", "description": "给定一个有 $h$ 行和 $w$ 列的表格 $A$，每个单元格内含有一个整数。行从上到下编号为 $1$ 到 $h$，列从左到右编号为 $1$ 到 $w$。允许对这个表格进行以下操作：\n\n- 选择一列并删除它（删除的列左边和右边的列变为相邻的列）；\n- 选择一行并删除它（删除的行上边和下边的行变为相邻的行）。\n\n这些操作可以按任意顺序执行任意多次。\n\n你需要确定是否可以通过这些操作将表格变为一个数字之和为 $s$ 的表格。如果可以，请给出具体的操作。", "inputFormat": "第一行包含两个数字 $h$ 和 $w$，表示表格的大小（$1 \\leq h, w \\leq 15$）。\n\n接下来 $h$ 行，每行包含 $w$ 个整数，其中第 $i$ 行第 $j$ 列为 $A_{i,j}$（$0 \\leq A_{i,j} \\leq 10^9$）。\n\n最后一行输入数字 $s$，即需要通过操作达到的和（$1 \\leq s \\leq 10^{18}$）。", "outputFormat": "如果从原始表格中无法得到一个数字之和为 $s$ 的表格，输出 `NO`。\n\n否则：\n- 第一行输出 `YES`。\n- 第二行输出一个数字 $k$ ，表示需要进行的操作次数。\n- 接下来的 $k$ 行，每行输出两个整数 $t_j$，$i_j$，其中 $t_j = 1$ 表示操作是对行进行的，$t_j = 2$ 表示操作是对列进行的。数字 $i_j$ 应为操作所针对的行或列的初始编号。", "hint": "在样例 $1$ 中，最初给定的表格是：\n\n$$\n\\begin{matrix}\n1 & 2 & 3 \\\\\n2 & 3 & 1 \\\\\n3 & 1 & 2 \\\\\n\\end{matrix}\n$$\n\n删除第三行和第三列后，我们得到以下表格，其元素总和为 $8$：\n\n$$\n\\begin{matrix}\n1 & 2 & 3 \\\\\n2 & 3 & 1 \\\\\n3 & 1 & 2 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 & 3 \\\\\n2 & 3 & 1 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 \\\\\n2 & 3 \\\\\n\\end{matrix}\n$$\n\n在样例 $2$ 中，显然无法通过操作从初始表格中得到元素总和为 $5$ 的表格，因为初始表格全部都是 $2$，而 $5$ 是一个奇数。\n\n在样例 $3$ 中，最初给定的表格是：\n\n$$\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n5 & 5 & 3 & 2 & 4 \\\\\n1 & 2 & 4 & 5 & 2 \\\\\n\\end{matrix}\n$$\n\n删除最后两行和第一列后，我们得到以下表格，其元素总和为 $34$：\n\n$$\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n5 & 5 & 3 & 2 & 4 \\\\\n1 & 2 & 4 & 5 & 2 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n1 & 2 & 4 & 5 & 2 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n1 & 2 & 1 & 4 & 5 \\\\\n2 & 5 & 4 & 1 & 2 \\\\\n4 & 2 & 4 & 3 & 1 \\\\\n\\end{matrix}\n\\rightarrow\n\\begin{matrix}\n2 & 1 & 4 & 5 \\\\\n5 & 4 & 1 & 2 \\\\\n2 & 4 & 3 & 1 \\\\\n\\end{matrix}\n$$\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $17$ | $h=1$ |\n| $2$ | $6$ | 第 $i$ 行中的数字和不超过 $i$ |\n| $3$ | $10$ | $h\\le3$ |\n| $4$ | $13$ | $h,w\\le10$ |\n| $5$ | $13$ | $h,w\\le12$ |\n| $6$ | $12$ | $A_{i,j}\\le6$ |\n| $7$ | $29$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq h, w \\leq 15$，$0 \\leq A_{i,j} \\leq 10^9$，$1 \\leq s \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11123", "type": "P", "difficulty": 6, "samples": [["5 2 1\n1 2\n1 3\n2 4\n2 5", "1 1 2 2 2"], ["3 1 0\n1 2\n2 3", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 树根 (Day 1)", "background": "翻译自 [ROIR 2024 D1T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。\n\n给定一棵由 $n$ 个节点构成的树和一个数 $k$。固定树中的某个节点 $s$，并令其为根。\n\n将树的边定向从树根出发。换句话说，将边 $(u, v)$ 定向为 $u \\to v$，如果在以 $s$ 为根时，节点 $u$ 是节点 $v$ 的父节点。在这种定向下，每个节点都可以从根到达。\n\n定义节点 $v$ 到节点 $s$ 的距离为从 $s$ 到 $v$ 的最短路径上边的数量。定义节点 $s$ 的可达性为所有节点到节点 $s$ 的距离中的最大值。", "description": "允许在树中增加不超过 $k$ 条额外的有向边。对于树中的每个节点 $s$，确定如果选择节点 $s$ 作为树根，能够达到的最小可达性是多少。\n\n注意，在某些子任务中，只需要输出顶点编号为 $1$ 的答案。", "inputFormat": "第一行包含三个整数 $n$，$k$ 和 $t$ （$2 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k \\leq n - 1$，$n \\times k \\leq 2 \\times 10^5$，$0 \\leq t \\leq 1$），分别表示树的顶点数量、额外添加的有向边的最大数量限制和一个整数 $t$，如果 $t$ 为 $0$，则只需输出顶点编号为 $1$ 的答案；如果 $t$ 为 $1$，则输出所有顶点的答案。\n\n接下来的 $n - 1$ 行每行包含两个整数 $u_i$ 和 $v_i$ （$1 \\leq u_i, v_i \\leq n$），表示树的一条边。\n\n保证所给的边构成一棵树。", "outputFormat": "如果 $t = 0$，输出一个整数，即选择顶点编号为 $1$ 作为树根，并且增加不超过 $k$ 条额外的有向边时，可以达到的最小可达性。\n\n如果 $t = 1$，输出 $n$ 个数，第 $i$ 个数表示选择顶点 $i$ 作为树根，并且增加不超过 $k$ 条额外的有向边时，可以达到的最小可达性。", "hint": "下图给出了第一个样例的图片。虚线表示添加的边。对于顶点 $1$ 和 $2$，最小可达性为 $1$；对于顶点 $3$，$4$ 和 $5$，最小可达性为 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ubpdvqtn.png)\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $u_i=i,v_i=i+1,t=0$ |\n| $2$ | $5$ | $k=1,n\\le2000,t=0$ |\n| $3$ | $10$ | $k=1,t=0$ |\n| $4$ | $5$ | $u_i=i,v_i=i+1$ |\n| $5$ | $5$ | $n\\le16$ |\n| $6$ | $10$ | $n\\le50$ |\n| $7$ | $10$ | $n\\le400$ |\n| $8$ | $10$ | $n\\le2000$ |\n| $9$ | $25$ | $n\\times k\\le50000$ |\n| $10$ | $15$ | 无 |\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k \\leq n - 1$，$n \\times k \\leq 2 \\times 10^5$，$0 \\leq t \\leq 1$，$1 \\leq u_i, v_i \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 树根 (Day 1)", "background": "翻译自 [ROIR 2024 D1T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day1.pdf)。\n\n给定一棵由 $n$ 个节点构成的树和一个数 $k$。固定树中的某个节点 $s$，并令其为根。\n\n将树的边定向从树根出发。换句话说，将边 $(u, v)$ 定向为 $u \\to v$，如果在以 $s$ 为根时，节点 $u$ 是节点 $v$ 的父节点。在这种定向下，每个节点都可以从根到达。\n\n定义节点 $v$ 到节点 $s$ 的距离为从 $s$ 到 $v$ 的最短路径上边的数量。定义节点 $s$ 的可达性为所有节点到节点 $s$ 的距离中的最大值。", "description": "允许在树中增加不超过 $k$ 条额外的有向边。对于树中的每个节点 $s$，确定如果选择节点 $s$ 作为树根，能够达到的最小可达性是多少。\n\n注意，在某些子任务中，只需要输出顶点编号为 $1$ 的答案。", "inputFormat": "第一行包含三个整数 $n$，$k$ 和 $t$ （$2 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k \\leq n - 1$，$n \\times k \\leq 2 \\times 10^5$，$0 \\leq t \\leq 1$），分别表示树的顶点数量、额外添加的有向边的最大数量限制和一个整数 $t$，如果 $t$ 为 $0$，则只需输出顶点编号为 $1$ 的答案；如果 $t$ 为 $1$，则输出所有顶点的答案。\n\n接下来的 $n - 1$ 行每行包含两个整数 $u_i$ 和 $v_i$ （$1 \\leq u_i, v_i \\leq n$），表示树的一条边。\n\n保证所给的边构成一棵树。", "outputFormat": "如果 $t = 0$，输出一个整数，即选择顶点编号为 $1$ 作为树根，并且增加不超过 $k$ 条额外的有向边时，可以达到的最小可达性。\n\n如果 $t = 1$，输出 $n$ 个数，第 $i$ 个数表示选择顶点 $i$ 作为树根，并且增加不超过 $k$ 条额外的有向边时，可以达到的最小可达性。", "hint": "下图给出了第一个样例的图片。虚线表示添加的边。对于顶点 $1$ 和 $2$，最小可达性为 $1$；对于顶点 $3$，$4$ 和 $5$，最小可达性为 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ubpdvqtn.png)\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $u_i=i,v_i=i+1,t=0$ |\n| $2$ | $5$ | $k=1,n\\le2000,t=0$ |\n| $3$ | $10$ | $k=1,t=0$ |\n| $4$ | $5$ | $u_i=i,v_i=i+1$ |\n| $5$ | $5$ | $n\\le16$ |\n| $6$ | $10$ | $n\\le50$ |\n| $7$ | $10$ | $n\\le400$ |\n| $8$ | $10$ | $n\\le2000$ |\n| $9$ | $25$ | $n\\times k\\le50000$ |\n| $10$ | $15$ | 无 |\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k \\leq n - 1$，$n \\times k \\leq 2 \\times 10^5$，$0 \\leq t \\leq 1$，$1 \\leq u_i, v_i \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P11124", "type": "P", "difficulty": 3, "samples": [["4\n1 2 3 4", "2 1 1 2"], ["1\n20", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 数组划分 (Day 2)", "background": "翻译自 [ROIR 2024 D2T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。", "description": "给定一个数组 $A = [a_1, a_2, \\dots, a_n]$，其中包含 $n$ 个正整数。\n\n需要将数组元素涂成两种颜色，使得任意两个同一颜色的元素 $x$ 和 $y$ 不满足以下条件：\n- $x=p\\times y$，其中 $p$ 是一个素数。\n\n保证存在这样的涂色方案。", "inputFormat": "第一行包含一个整数 $n$（$1 \\leq n \\leq 10^5$），表示数组的元素个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq 10^6$），即数组中的元素。", "outputFormat": "输出数组的划分方案。具体地，输出一行 $n$ 个整数，如果第 $i$ 个数字为 $1$，表示第 $i$ 个元素应涂成第一种颜色；如果为 $2$，则表示第 $i$ 个元素应涂成第二种颜色。\n\n如果存在多个合适的划分方案，可以输出其中任何一个。", "hint": "| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $9$ | $a_i\\le2$ |\n| $2$ | $19$ | $a_i=p^k$，其中 $p$ 是素数 |\n| $3$ | $12$ | $a_i\\le3$ |\n| $4$ | $13$ | $a_i\\le4$ |\n| $5$ | $21$ | $n\\le10$ |\n| $6$ | $26$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 数组划分 (Day 2)", "background": "翻译自 [ROIR 2024 D2T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。", "description": "给定一个数组 $A = [a_1, a_2, \\dots, a_n]$，其中包含 $n$ 个正整数。\n\n需要将数组元素涂成两种颜色，使得任意两个同一颜色的元素 $x$ 和 $y$ 不满足以下条件：\n- $x=p\\times y$，其中 $p$ 是一个素数。\n\n保证存在这样的涂色方案。", "inputFormat": "第一行包含一个整数 $n$（$1 \\leq n \\leq 10^5$），表示数组的元素个数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq 10^6$），即数组中的元素。", "outputFormat": "输出数组的划分方案。具体地，输出一行 $n$ 个整数，如果第 $i$ 个数字为 $1$，表示第 $i$ 个元素应涂成第一种颜色；如果为 $2$，则表示第 $i$ 个元素应涂成第二种颜色。\n\n如果存在多个合适的划分方案，可以输出其中任何一个。", "hint": "| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $9$ | $a_i\\le2$ |\n| $2$ | $19$ | $a_i=p^k$，其中 $p$ 是素数 |\n| $3$ | $12$ | $a_i\\le3$ |\n| $4$ | $13$ | $a_i\\le4$ |\n| $5$ | $21$ | $n\\le10$ |\n| $6$ | $26$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11125", "type": "P", "difficulty": 4, "samples": [["4 11\n3 5 1 10\n2 9 2 13", "5"], ["13 124\n5 6 8 8 1 6 4 6 4 7 10 3 9\n5 2 10 5 2 1 1 4 8 3 4 1 9", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2024", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 细菌 (Day 2)", "background": "翻译自 [ROIR 2024 D2T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。\n\n生物实验室中正在进行实验。开始时，有 $n$ 个冷冻的细菌，编号从 $1$ 到 $n$。根据实验计划，编号为 $i$ 的细菌将在实验开始后的 $a_i$ 秒进入培养皿。如果有多个细菌的 $a$ 相等，它们会同时进入。\n\n一旦冷冻的细菌进入培养皿，它们会被解冻并开始成熟。编号为 $i$ 的细菌成熟需要 $t_i$ 秒。一旦细菌成熟，它们会开始繁殖：立即分裂成两个成熟的细菌，然后在接下来的每一秒钟，每个成熟细菌都会再次分裂成两个成熟的细菌。", "description": "培养菌落的规模指的是培养皿中细菌的总数。实验的目标是确定多长时间后，培养菌落的规模首次恰好等于 $m$。请帮助科学家确定这个时间秒数，或者判断培养群体的规模是否永远不会恰好等于 $m$。", "inputFormat": "第一行给出两个整数 $n$ 和 $m$（$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m \\leq 10^9$），分别表示细菌的数量和期望的培养菌落规模。\n\n第二行给出 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq 10^9$），表示细菌进入培养皿的时间。\n\n第三行给出 $n$ 个整数 $t_1, t_2, \\dots, t_n$（$1 \\leq t_i \\leq 10^9$），表示冷冻的细菌成熟所需的时间。", "outputFormat": "如果培养菌落的规模永远不会等于 $m$，则输出 `-1`。否则，输出在实验开始后多少秒，培养群体的规模首次恰好等于 $m$。", "hint": "下表是样例 $1$ 的实验进展：\n\n| 时间 | 细菌 $1$ | 细菌 $2$ | 细菌 $3$ | 细菌 $4$ | 总数 |\n|:------:|:--------:|:--------:|:--------:|:--------:|:------:|\n| $0$    | 冷冻   | 冷冻   | 冷冻   | 冷冻   | $0$    |\n| $1$    | 冷冻   | 冷冻   | 在培养皿中，成熟中 | 冷冻   | $1$    |\n| $2$    | 冷冻   | 冷冻   | 在培养皿中，成熟中 | 冷冻   | $1$    |\n| $3$    | 在培养皿中，成熟中 | 冷冻   | 在培养皿中，成熟，$2$ 只细菌 | 冷冻 | $3$    |\n| $4$    | 在培养皿中，成熟中 | 冷冻   | 在培养皿中，成熟，$4$ 只细菌 | 冷冻 | $5$    |\n| $5$    | 在培养皿中，成熟，$2$ 只细菌 | 在培养皿中，成熟中 | 在培养皿中，成熟，$8$ 只细菌 | 冷冻 | $11$   |\n\n注意：细菌的繁殖过程会导致每秒钟细菌数目翻倍。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $13$ | $m\\le n,a_i\\le10^5,t_i=10^9$ |\n| $2$ | $14$ | $a_i=i$，所有 $t_i$ 相等 |\n| $3$ | $17$ | $n,a_i,t_i\\le3000$ |\n| $4$ | $23$ | $a_i=1$ |\n| $5$ | $33$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m \\leq 10^9$，$1 \\leq a_i,t_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 细菌 (Day 2)", "background": "翻译自 [ROIR 2024 D2T2](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。\n\n生物实验室中正在进行实验。开始时，有 $n$ 个冷冻的细菌，编号从 $1$ 到 $n$。根据实验计划，编号为 $i$ 的细菌将在实验开始后的 $a_i$ 秒进入培养皿。如果有多个细菌的 $a$ 相等，它们会同时进入。\n\n一旦冷冻的细菌进入培养皿，它们会被解冻并开始成熟。编号为 $i$ 的细菌成熟需要 $t_i$ 秒。一旦细菌成熟，它们会开始繁殖：立即分裂成两个成熟的细菌，然后在接下来的每一秒钟，每个成熟细菌都会再次分裂成两个成熟的细菌。", "description": "培养菌落的规模指的是培养皿中细菌的总数。实验的目标是确定多长时间后，培养菌落的规模首次恰好等于 $m$。请帮助科学家确定这个时间秒数，或者判断培养群体的规模是否永远不会恰好等于 $m$。", "inputFormat": "第一行给出两个整数 $n$ 和 $m$（$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m \\leq 10^9$），分别表示细菌的数量和期望的培养菌落规模。\n\n第二行给出 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq 10^9$），表示细菌进入培养皿的时间。\n\n第三行给出 $n$ 个整数 $t_1, t_2, \\dots, t_n$（$1 \\leq t_i \\leq 10^9$），表示冷冻的细菌成熟所需的时间。", "outputFormat": "如果培养菌落的规模永远不会等于 $m$，则输出 `-1`。否则，输出在实验开始后多少秒，培养群体的规模首次恰好等于 $m$。", "hint": "下表是样例 $1$ 的实验进展：\n\n| 时间 | 细菌 $1$ | 细菌 $2$ | 细菌 $3$ | 细菌 $4$ | 总数 |\n|:------:|:--------:|:--------:|:--------:|:--------:|:------:|\n| $0$    | 冷冻   | 冷冻   | 冷冻   | 冷冻   | $0$    |\n| $1$    | 冷冻   | 冷冻   | 在培养皿中，成熟中 | 冷冻   | $1$    |\n| $2$    | 冷冻   | 冷冻   | 在培养皿中，成熟中 | 冷冻   | $1$    |\n| $3$    | 在培养皿中，成熟中 | 冷冻   | 在培养皿中，成熟，$2$ 只细菌 | 冷冻 | $3$    |\n| $4$    | 在培养皿中，成熟中 | 冷冻   | 在培养皿中，成熟，$4$ 只细菌 | 冷冻 | $5$    |\n| $5$    | 在培养皿中，成熟，$2$ 只细菌 | 在培养皿中，成熟中 | 在培养皿中，成熟，$8$ 只细菌 | 冷冻 | $11$   |\n\n注意：细菌的繁殖过程会导致每秒钟细菌数目翻倍。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $13$ | $m\\le n,a_i\\le10^5,t_i=10^9$ |\n| $2$ | $14$ | $a_i=i$，所有 $t_i$ 相等 |\n| $3$ | $17$ | $n,a_i,t_i\\le3000$ |\n| $4$ | $23$ | $a_i=1$ |\n| $5$ | $33$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m \\leq 10^9$，$1 \\leq a_i,t_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11126", "type": "P", "difficulty": 5, "samples": [["9 4\n3 4 2 4 4 2 3 3 2", "2"], ["6 3\n1 2 3 1 2 1", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 三等分的数组 (Day 2)", "background": "翻译自 [ROIR 2024 D2T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。\n\n在生日那天，玛莎像往常一样收到了一个由 $n$ 个数组成的数组 $a$，其中每个数字都在 $1$ 到 $m$ 之间。玛莎非常喜欢数字 $3$，因此数组的长度能被 $3$ 整除。\n\n玛莎决定将这些数字分组为三元组：每个三元组要么由三个相同的数字组成，要么由三个连续的数字组成。换句话说，每个三元组的形式要么是 $(x, x, x)$，要么是 $(x, x + 1, x + 2)$，其中 $x$ 是一个正整数。\n\n玛莎想要研究这个礼物中的数组，她想知道将数组中的数字分成这样的三元组的方式有多少种。如果不能为第一个分组中的每个三元组与第二个分组中的每个三元组建立一一对应关系，使得对应三元组中的数字相等，则两个分组方式被认为是不同的。由于分组方式可能非常多，玛莎只需知道其模 $10^9 + 7$ 的余数。", "description": "帮助玛莎计算将数组中的数字分成三元组的方式的数量，对 $10^9 + 7$ 取模。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$1 \\leq n \\leq 5000$，$1 \\leq m \\leq 5000$，$n$ 是 $3$ 的倍数）。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示数组中的数字（$1 \\leq a_i \\leq m$）。", "outputFormat": "输出一行一个整数，即将数组中的数字分成三元组的方式的数量，对 $10^9 + 7$ 取模。", "hint": "在第一个样例中，数字可以分成三元组的两种方式为 $\\{(2, 2, 2), (3, 3, 3), (4, 4, 4)\\}$ 和 $\\{ (2, 3, 4), (2, 3, 4), (2, 3, 4)\\}$。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $10$ | $m\\le3$ |\n| $2$ | $8$ | $m\\le4$ |\n| $3$ | $10$ | 每个数字最多出现两次 |\n| $4$ | $12$ | $a$ 不含 $4$ 的倍数 |\n| $5$ | $29$ | $n,m\\le500$ |\n| $6$ | $31$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5000$，$1 \\leq a_i \\leq m \\leq 5000$，$n$ 是 $3$ 的倍数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 三等分的数组 (Day 2)", "background": "翻译自 [ROIR 2024 D2T3](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。\n\n在生日那天，玛莎像往常一样收到了一个由 $n$ 个数组成的数组 $a$，其中每个数字都在 $1$ 到 $m$ 之间。玛莎非常喜欢数字 $3$，因此数组的长度能被 $3$ 整除。\n\n玛莎决定将这些数字分组为三元组：每个三元组要么由三个相同的数字组成，要么由三个连续的数字组成。换句话说，每个三元组的形式要么是 $(x, x, x)$，要么是 $(x, x + 1, x + 2)$，其中 $x$ 是一个正整数。\n\n玛莎想要研究这个礼物中的数组，她想知道将数组中的数字分成这样的三元组的方式有多少种。如果不能为第一个分组中的每个三元组与第二个分组中的每个三元组建立一一对应关系，使得对应三元组中的数字相等，则两个分组方式被认为是不同的。由于分组方式可能非常多，玛莎只需知道其模 $10^9 + 7$ 的余数。", "description": "帮助玛莎计算将数组中的数字分成三元组的方式的数量，对 $10^9 + 7$ 取模。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$（$1 \\leq n \\leq 5000$，$1 \\leq m \\leq 5000$，$n$ 是 $3$ 的倍数）。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示数组中的数字（$1 \\leq a_i \\leq m$）。", "outputFormat": "输出一行一个整数，即将数组中的数字分成三元组的方式的数量，对 $10^9 + 7$ 取模。", "hint": "在第一个样例中，数字可以分成三元组的两种方式为 $\\{(2, 2, 2), (3, 3, 3), (4, 4, 4)\\}$ 和 $\\{ (2, 3, 4), (2, 3, 4), (2, 3, 4)\\}$。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n| $1$ | $10$ | $m\\le3$ |\n| $2$ | $8$ | $m\\le4$ |\n| $3$ | $10$ | 每个数字最多出现两次 |\n| $4$ | $12$ | $a$ 不含 $4$ 的倍数 |\n| $5$ | $29$ | $n,m\\le500$ |\n| $6$ | $31$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5000$，$1 \\leq a_i \\leq m \\leq 5000$，$n$ 是 $3$ 的倍数。", "locale": "zh-CN"}}}
{"pid": "P11127", "type": "P", "difficulty": 6, "samples": [["5 5\n3 4\n0 0\n5 2\n0 0\n0 0\n2 2\n1 1 3 1\n2 5\n1 3 3 0\n2 3", "4\n1\n2"]], "limits": {"time": [1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666, 1666], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2024] 二叉树的遍历 (Day 2)", "background": "翻译自 [ROIR 2024 D2T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。\n\n二叉树有三种基本遍历方式：前序遍历（pre-order）、中序遍历（in-order）和后序遍历（post-order）。我们可以将这三种遍历方式进行概括：假设每个节点上记录一个整数 $x$（取值范围为 $-1$ 到 $1$），表示在遍历中输出该节点的时机，具体如下：\n- $x = -1$：在遍历其左右子树之前；\n- $x = 0$：在遍历其左子树之后，遍历其右子树之前；\n- $x = 1$：在遍历其左右子树之后。\n\n因此，如果所有节点的 $x$ 值都是 $-1$，则遍历为前序遍历；如果都是 $0$，则为中序遍历；如果都是 $1$，则为后序遍历。", "description": "考虑一棵有 $n$ 个节点的二叉树，节点编号从 $1$ 到 $n$。树的根节点为 $1$。最初，所有节点上的值都是 $-1$。\n\n你需要处理 $q$ 个操作，操作类型如下：\n1. 将节点 $l, l + 1, \\dots, r$ 上的值更改为 $x$（$x$ 取值为 $-1$，$0$ 或 $1$）。\n2. 查询节点 $i$ 在当前遍历方式中的位置。\n\n需要输出所有第二种类型的操作的结果。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$（$1 \\leq n, q \\leq 100000$）。\n\n接下来 $n$ 行，每行包含两个整数 $L_i$ 和 $R_i$（$0 \\leq L_i, R_i \\leq n$），分别表示节点 $i$ 的左子树和右子树的编号，若某个子树不存在则为 $0$。\n\n保证 $L_i$ 和 $R_i$ 描述了一个有效的二叉树。\n\n接下来的 $q$ 行中包含操作。每行的第一个整数 $t$（$t \\in \\{1, 2\\}$）表示操作类型。\n- 对于第一种类型的操作，后面有三个整数 $l$，$r$ 和 $x$（$1 \\leq l \\leq r \\leq n$，$x$ 为 $-1$，$0$ 或 $1$），表示节点范围和新的值。\n- 对于第二种类型的操作，后面有一个整数 $i$（$1 \\leq i \\leq n$），表示询问其在遍历中的位置的节点编号。", "outputFormat": "对于每个第二种类型的操作，输出一个整数，表示对应节点在遍历中的位置。", "hint": "样例中的树是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/keaqqiat.png)\n\n刚开始，所有节点的 $x$ 值都是 $-1$，因此第一次查询时遍历得到的数组为 $[1,3,5,2,4]$，$2$ 在第四个位置。\n\n在将节点 $1,2,3$ 的遍历方式 $x$ 改为 $1$ 后，再次查询时遍历得到的数组为 $[5,2,3,4,1]$，$5$ 在第一个位置。\n\n接着把节点 $3$ 的遍历方式 $x$ 改为 $0$，此时再进行查询，遍历得到的数组为 $[5,3,2,4,1]$，$3$ 在第二个位置。\n\n设 $q_1$ 为操作 $1$ 的数量。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n|$1$ | $10$ | $n, q \\leq 5000$ |\n|$2$ | $5$ | $q_1 \\leq 10$ |\n|$3$ | $10$ | 所有操作一在所有操作二之前 |\n|$4$ | $10$ | 所有叶子节点都与根节点距离相同，没有具有一个子节点的节点 |\n|$5$ | $10$ | 对于所有操作一，$l = r$ |\n|$6$ | $20$ | 对于所有操作一，$x \\in \\{-1, 1\\}$，每个节点最多有一个子节点 |\n|$7$ | $10$ | 对于所有操作一，$x \\in \\{-1, 1\\}$ |\n|$8$ | $10$ | 每个节点最多有一个子节点 |\n|$9$ | $15$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 100000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2024] 二叉树的遍历 (Day 2)", "background": "翻译自 [ROIR 2024 D2T4](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。\n\n二叉树有三种基本遍历方式：前序遍历（pre-order）、中序遍历（in-order）和后序遍历（post-order）。我们可以将这三种遍历方式进行概括：假设每个节点上记录一个整数 $x$（取值范围为 $-1$ 到 $1$），表示在遍历中输出该节点的时机，具体如下：\n- $x = -1$：在遍历其左右子树之前；\n- $x = 0$：在遍历其左子树之后，遍历其右子树之前；\n- $x = 1$：在遍历其左右子树之后。\n\n因此，如果所有节点的 $x$ 值都是 $-1$，则遍历为前序遍历；如果都是 $0$，则为中序遍历；如果都是 $1$，则为后序遍历。", "description": "考虑一棵有 $n$ 个节点的二叉树，节点编号从 $1$ 到 $n$。树的根节点为 $1$。最初，所有节点上的值都是 $-1$。\n\n你需要处理 $q$ 个操作，操作类型如下：\n1. 将节点 $l, l + 1, \\dots, r$ 上的值更改为 $x$（$x$ 取值为 $-1$，$0$ 或 $1$）。\n2. 查询节点 $i$ 在当前遍历方式中的位置。\n\n需要输出所有第二种类型的操作的结果。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$（$1 \\leq n, q \\leq 100000$）。\n\n接下来 $n$ 行，每行包含两个整数 $L_i$ 和 $R_i$（$0 \\leq L_i, R_i \\leq n$），分别表示节点 $i$ 的左子树和右子树的编号，若某个子树不存在则为 $0$。\n\n保证 $L_i$ 和 $R_i$ 描述了一个有效的二叉树。\n\n接下来的 $q$ 行中包含操作。每行的第一个整数 $t$（$t \\in \\{1, 2\\}$）表示操作类型。\n- 对于第一种类型的操作，后面有三个整数 $l$，$r$ 和 $x$（$1 \\leq l \\leq r \\leq n$，$x$ 为 $-1$，$0$ 或 $1$），表示节点范围和新的值。\n- 对于第二种类型的操作，后面有一个整数 $i$（$1 \\leq i \\leq n$），表示询问其在遍历中的位置的节点编号。", "outputFormat": "对于每个第二种类型的操作，输出一个整数，表示对应节点在遍历中的位置。", "hint": "样例中的树是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/keaqqiat.png)\n\n刚开始，所有节点的 $x$ 值都是 $-1$，因此第一次查询时遍历得到的数组为 $[1,3,5,2,4]$，$2$ 在第四个位置。\n\n在将节点 $1,2,3$ 的遍历方式 $x$ 改为 $1$ 后，再次查询时遍历得到的数组为 $[5,2,3,4,1]$，$5$ 在第一个位置。\n\n接着把节点 $3$ 的遍历方式 $x$ 改为 $0$，此时再进行查询，遍历得到的数组为 $[5,3,2,4,1]$，$3$ 在第二个位置。\n\n设 $q_1$ 为操作 $1$ 的数量。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 同样例 |\n|$1$ | $10$ | $n, q \\leq 5000$ |\n|$2$ | $5$ | $q_1 \\leq 10$ |\n|$3$ | $10$ | 所有操作一在所有操作二之前 |\n|$4$ | $10$ | 所有叶子节点都与根节点距离相同，没有具有一个子节点的节点 |\n|$5$ | $10$ | 对于所有操作一，$l = r$ |\n|$6$ | $20$ | 对于所有操作一，$x \\in \\{-1, 1\\}$，每个节点最多有一个子节点 |\n|$7$ | $10$ | 对于所有操作一，$x \\in \\{-1, 1\\}$ |\n|$8$ | $10$ | 每个节点最多有一个子节点 |\n|$9$ | $15$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 100000$。", "locale": "zh-CN"}}}
{"pid": "P11128", "type": "P", "difficulty": 1, "samples": [["10 4\n1 3 2 4 3 5 4 6 5 7", "Yes"], ["10 11\n1 3 2 4 3 5 4 6 5 7", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "梦熊比赛"], "title": "【MX-X5-T0】「GFOI Round 1」Hypnotize", "background": "原题链接：<https://oier.team/problems/X5A>。\n\n---\n\n> [$\\small\\text{The absolute catastrophe of \\textbf{I\\&“Ī྄”} .}$](https://music.163.com/#/song?id=2610328481)", "description": "Arcaea 中有 $n$ 张谱面，第 $i$ 张谱面的难度为一个正整数 $a_i$。\n\n有一个正整数 $k$，你希望打两张难度差**恰好**为 $k$ 的谱面。\n\n你需要判断是否存在满足条件的两张谱面。如果存在则输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行包含两个正整数 $n,k$。\n\n第二行包含 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "如果存在满足条件的两张谱面，输出 `Yes`；否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n第一组样例中，取第 $1$ 张和第 $6$ 张谱面，由于 $a_6-a_1=4$，输出 `Yes`。\n\n**【样例解释 #2】**\n\n第二组样例中，不存在两张谱面难度差为 $11$ 的谱面，输出 `No`。\n\n**【数据范围】**\n\n本题数据包含 $20$ 个测试点，每个测试点分值相等。\n\n对于所有数据，满足 $1\\le n\\le 100$，$1\\le k,a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T0】「GFOI Round 1」Hypnotize", "background": "原题链接：<https://oier.team/problems/X5A>。\n\n---\n\n> [$\\small\\text{The absolute catastrophe of \\textbf{I\\&“Ī྄”} .}$](https://music.163.com/#/song?id=2610328481)", "description": "Arcaea 中有 $n$ 张谱面，第 $i$ 张谱面的难度为一个正整数 $a_i$。\n\n有一个正整数 $k$，你希望打两张难度差**恰好**为 $k$ 的谱面。\n\n你需要判断是否存在满足条件的两张谱面。如果存在则输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行包含两个正整数 $n,k$。\n\n第二行包含 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "如果存在满足条件的两张谱面，输出 `Yes`；否则输出 `No`。", "hint": "**【样例解释 #1】**\n\n第一组样例中，取第 $1$ 张和第 $6$ 张谱面，由于 $a_6-a_1=4$，输出 `Yes`。\n\n**【样例解释 #2】**\n\n第二组样例中，不存在两张谱面难度差为 $11$ 的谱面，输出 `No`。\n\n**【数据范围】**\n\n本题数据包含 $20$ 个测试点，每个测试点分值相等。\n\n对于所有数据，满足 $1\\le n\\le 100$，$1\\le k,a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11129", "type": "P", "difficulty": 2, "samples": [["3\n2 1 2\n3 2 5\n11451 41 91981", "3\n4\n32787076"]], "limits": {"time": [2000, 2000, 2000], "memory": [524288, 524288, 524288]}, "tags": ["数学", "O2优化", "梦熊比赛"], "title": "【MX-X5-T1】「GFOI Round 1」Inverted World", "background": "原题链接：<https://oier.team/problems/X5B>。\n\n---\n\n> [Inverted World - ARForest](https://music.163.com/#/song?id=2099631232)", "description": "给定一个长度为 $n$ 的正整数序列 $(a_1, \\ldots, a_n)$，**保证该序列是等差数列**。  \n（如果你不知道等差数列的定义，请参阅题目末尾处的提示。）\n\n请求出该序列中满足如下条件的连续非空子串 $(a_l, \\ldots, a_r)$（$1 \\le l \\le r \\le n$）的数量：\n- 该子串中的元素的平均值是整数。  \n  （即 $(a_l + \\cdots + a_r) \\div (r - l + 1)$ 是整数。）\n\n该序列可能很长，即 $n$ 可能很大，故不会给出该序列的每一项，而是只给出长度 $n$、首项 $k$ 和公差 $d$。**保证 $\\bm{k, d}$ 都是正整数**。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含三个正整数 $n, k, d$。", "outputFormat": "对于每组数据，输出一行一个非负整数，表示平均数为整数的子段个数。", "hint": "**【样例解释】**\n\n在第一组数据中，$a = [1, 3]$。共有 $3$ 个连续非空子串满足要求：\n\n- $[1]$，其平均值为 $1$；\n- $[3]$，其平均值为 $3$；\n- $[1, 3]$，其平均值为 $2$。\n\n在第二组数据中，$a = [2, 7, 12]$。共有 $4$ 个连续非空子串满足要求：\n\n- $[2]$，其平均值为 $2$；\n- $[7]$，其平均值为 $7$；\n- $[12]$，其平均值为 $12$；\n- $[2, 7, 12]$，其平均值为 $7$。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $k \\le$ | $d \\le$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $10$ | $28$ |\n| $2$ | $10^9$ | $10^9$ | $1$ | $35$ |\n| $3$ | $10^9$ | $10^9$ | $10^9$ | $37$ |\n\n对于所有数据，满足 $1 \\le T \\le 10^3$，$1 \\le n, k, d \\le 10^9$。\n\n**【提示】**\n\n长度为 $n$、首项为 $k$、公差为 $d$ 的等差数列定义为 $a_1 = k$ 且 $a_i = a_{i - 1} + d$（对每个 $2 \\le i \\le n$）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T1】「GFOI Round 1」Inverted World", "background": "原题链接：<https://oier.team/problems/X5B>。\n\n---\n\n> [Inverted World - ARForest](https://music.163.com/#/song?id=2099631232)", "description": "给定一个长度为 $n$ 的正整数序列 $(a_1, \\ldots, a_n)$，**保证该序列是等差数列**。  \n（如果你不知道等差数列的定义，请参阅题目末尾处的提示。）\n\n请求出该序列中满足如下条件的连续非空子串 $(a_l, \\ldots, a_r)$（$1 \\le l \\le r \\le n$）的数量：\n- 该子串中的元素的平均值是整数。  \n  （即 $(a_l + \\cdots + a_r) \\div (r - l + 1)$ 是整数。）\n\n该序列可能很长，即 $n$ 可能很大，故不会给出该序列的每一项，而是只给出长度 $n$、首项 $k$ 和公差 $d$。**保证 $\\bm{k, d}$ 都是正整数**。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含三个正整数 $n, k, d$。", "outputFormat": "对于每组数据，输出一行一个非负整数，表示平均数为整数的子段个数。", "hint": "**【样例解释】**\n\n在第一组数据中，$a = [1, 3]$。共有 $3$ 个连续非空子串满足要求：\n\n- $[1]$，其平均值为 $1$；\n- $[3]$，其平均值为 $3$；\n- $[1, 3]$，其平均值为 $2$。\n\n在第二组数据中，$a = [2, 7, 12]$。共有 $4$ 个连续非空子串满足要求：\n\n- $[2]$，其平均值为 $2$；\n- $[7]$，其平均值为 $7$；\n- $[12]$，其平均值为 $12$；\n- $[2, 7, 12]$，其平均值为 $7$。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $k \\le$ | $d \\le$ | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $10$ | $28$ |\n| $2$ | $10^9$ | $10^9$ | $1$ | $35$ |\n| $3$ | $10^9$ | $10^9$ | $10^9$ | $37$ |\n\n对于所有数据，满足 $1 \\le T \\le 10^3$，$1 \\le n, k, d \\le 10^9$。\n\n**【提示】**\n\n长度为 $n$、首项为 $k$、公差为 $d$ 的等差数列定义为 $a_1 = k$ 且 $a_i = a_{i - 1} + d$（对每个 $2 \\le i \\le n$）。", "locale": "zh-CN"}}}
{"pid": "P11130", "type": "P", "difficulty": 3, "samples": [["6\n1 1\n2 4\n2 6\n12 288\n30 144000\n114 5141919810", "0\n1\n-1\n2\n3\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "O2优化", "梦熊比赛"], "title": "【MX-X5-T2】「GFOI Round 1」Interstellar", "background": "原题链接：<https://oier.team/problems/X5C>。\n\n---\n\n> [Interstellar - PIKASONIC](https://music.163.com/#/song?id=1900207101)", "description": "你有一个正整数 $x$，你可以对它进行如下操作：\n- 选择一个正整数 $y$，把 $x$ 变为它的 $\\gcd(x, y)$ 倍，即 $x \\gets x \\times \\gcd(x, y)$。  \n  （$\\gcd(x, y)$ 表示 $x, y$ 的最大公因数。）\n\n$x$ 的初始值为 $n$，你想通过若干次操作（也可不操作）将它变为 $m$。你想知道至少要多少次操作才能达成目标，或报告无解。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n, m$。", "outputFormat": "对于每组数据：\n\n- 若无解，即 $x$ 无论如何操作都不能变成 $m$，输出 $-1$。\n- 否则输出一行一个非负整数，表示最小的操作次数。", "hint": "**【样例解释】**\n\n对于第一组数据，无需进行任何操作，答案是 $0$。\n\n对于第二组数据，可以选择 $y = 6$，那么 $x$ 会变成 $2 \\times \\gcd(2, 6) = 4$。\n\n对于第三组数据，容易证明无论如何进行操作都不可能达成目标，所以输出 $-1$。\n\n对于第四组数据，可以：\n\n- 选择 $y = 16$，那么 $x$ 会变成 $12 \\times \\gcd(12, 16) = 48$；\n- 选择 $y = 6$，那么 $x$ 会变成 $48 \\times \\gcd(48, 6) = 288$。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $m \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $100$ | $2 \\times 10^3$ | $21$ |\n| $2$ | $2$ | $10^{18}$ | $17$ |\n| $3$ | $10^5$ | $10^5$ | $14$ |\n| $4$ | $10^7$ | $10^7$ | $16$ |\n| $5$ | $10^{18}$ | $10^{18}$ | $32$ |\n\n对于所有数据，满足 $1 \\le T \\le 2 \\times 10^5$，$1 \\le n \\le m \\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T2】「GFOI Round 1」Interstellar", "background": "原题链接：<https://oier.team/problems/X5C>。\n\n---\n\n> [Interstellar - PIKASONIC](https://music.163.com/#/song?id=1900207101)", "description": "你有一个正整数 $x$，你可以对它进行如下操作：\n- 选择一个正整数 $y$，把 $x$ 变为它的 $\\gcd(x, y)$ 倍，即 $x \\gets x \\times \\gcd(x, y)$。  \n  （$\\gcd(x, y)$ 表示 $x, y$ 的最大公因数。）\n\n$x$ 的初始值为 $n$，你想通过若干次操作（也可不操作）将它变为 $m$。你想知道至少要多少次操作才能达成目标，或报告无解。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n, m$。", "outputFormat": "对于每组数据：\n\n- 若无解，即 $x$ 无论如何操作都不能变成 $m$，输出 $-1$。\n- 否则输出一行一个非负整数，表示最小的操作次数。", "hint": "**【样例解释】**\n\n对于第一组数据，无需进行任何操作，答案是 $0$。\n\n对于第二组数据，可以选择 $y = 6$，那么 $x$ 会变成 $2 \\times \\gcd(2, 6) = 4$。\n\n对于第三组数据，容易证明无论如何进行操作都不可能达成目标，所以输出 $-1$。\n\n对于第四组数据，可以：\n\n- 选择 $y = 16$，那么 $x$ 会变成 $12 \\times \\gcd(12, 16) = 48$；\n- 选择 $y = 6$，那么 $x$ 会变成 $48 \\times \\gcd(48, 6) = 288$。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $m \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $100$ | $2 \\times 10^3$ | $21$ |\n| $2$ | $2$ | $10^{18}$ | $17$ |\n| $3$ | $10^5$ | $10^5$ | $14$ |\n| $4$ | $10^7$ | $10^7$ | $16$ |\n| $5$ | $10^{18}$ | $10^{18}$ | $32$ |\n\n对于所有数据，满足 $1 \\le T \\le 2 \\times 10^5$，$1 \\le n \\le m \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11131", "type": "P", "difficulty": 4, "samples": [["3 3 1\n1 2 3\n4 5 6\n7 8 9\n2 2", "5"], ["3 3 2\n1 2 3\n4 5 6\n7 8 9\n2 2\n3 3", "15"], ["3 3 3\n1 4 -3\n4 -1 4\n7 8 9\n1 1\n2 2\n3 3", "10"], ["3 3 9\n1 4 -3\n4 -1 4\n7 8 9\n1 1\n1 2\n1 3\n2 1\n2 2\n2 3\n3 1\n3 2\n3 3", "11"], ["3 3 3\n-1 4 4\n4 -1 4\n7 8 -1\n1 1\n1 1\n1 1 ", "-1"], ["3 3 3\n1 4 -5\n4 -1 4\n7 8 9\n1 1\n2 2\n3 3", "No"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "最短路", "梦熊比赛"], "title": "【MX-X5-T3】「GFOI Round 1」Cthugha", "background": "原题链接：<https://oier.team/problems/X5D>。\n\n---\n\n> [Cthugha - USAO](https://music.163.com/#/song?id=1833853372)", "description": "给定一张 $n \\times m$ 的网格图，行编号为 $1,2,\\dots ,n$，列编号为 $1,2,\\dots ,m$。我们用 $(i, j)$ 来描述第 $i$ 行第 $j$ 列的格子。每个格子有一个整数权值 $a_{i,j}$，**注意格子的权值可以是负数**。\n\n给定 $q$ 个人位于网格图上，第 $i$ 个人的初始位置在 $(x_i, y_i)$，**注意不保证每个人初始位置互不相同**。\n\n定义某人**走一步**为：若这个人当前坐标在 $(x,y)$，则将该人移动至 $(x+1,y),(x-1,y),(x,y+1),(x,y-1)$ 其中之一。设移动后到达 $(x^{\\prime},y^{\\prime})$，此时需要满足 $1\\leq x^{\\prime}\\leq n,1\\leq y^{\\prime}\\leq m$。\n\n在任意时刻，允许任意两个人位于同一个格子。\n\n定义一个人的**权值**为其走若干步后所有经过的格子的权值和（包括起点和终点），注意若一个格子被经过 $k$ 次则其权值需要被累加 $k$ 次。\n\n特别地，若一个人没有走，则其**权值**为其初始位置格子的权值。\n\n定义**总权值**为每个人走若干步数，所有人权值的最大值。\n\n求最终所有人都走到同一个格子的最小**总权值**，或报告不存在最小**总权值**（即最小总权值为负无穷）。", "inputFormat": "第一行包含三个正整数 $n, m, q$。\n\n接下来 $n$ 行的第 $i$ 行包含 $m$ 个整数 $a_{i, 1}, a_{i, 2}, \\ldots, a_{i, m}$。\n\n接下来 $q$ 行的第 $i$ 行包含两个正整数 $x_i, y_i$，表示第 $i$ 个人的初始位置在 $(x _ i, y _ i)$。", "outputFormat": "若最小总权值不存在（即最小总权值为负无穷），输出 `No`；否则输出一行一个整数表示最小总权值。", "hint": "**【样例解释 #1】**\n\n总权值最小的情况是第一个人不走，此时经过点只有 $(2,2)$，所以答案为 $a_{2,2}=5$。\n\n**【样例解释 #2】**\n\n总权值最小的情况是两个人走到 $(2,3)$，路线分别为 $(2,2)\\rightarrow (2,3)$ 和 $(3,3) \\rightarrow (2,3)$，答案为 $\\max(a_{2,2}+a_{2,3},a_{3,3}+a_{2,3}) = \\max(11, 15) = 15$。\n\n**【样例解释 #5】**\n\n总权值最小的情况是三个人都没有走，权值都为 $a_{1,1}=-1$，答案即为 $-1$。\n\n**【样例解释 #6】**\n\n容易证明最小总权值为负无穷，所以输出 `No`。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n\\times m \\leq $| $q\\leq $ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $9$ | $9$ | 无 | $11$ |\n| $2$ | $10^5$ | $1$ | 无 | $3$ |\n| $3$ | $10^5$ | $50$ | A | $24$ |\n| $4$ | $10^3$ | $50$ | 无  | $21$ |\n| $5$ | $10^5$ | $50$ | 无 | $41$ |\n\n- 特殊性质 A：$a_{i,j} \\geq 1$。\n\n对于所有数据，满足 \n$1\\leq n,m\\leq 10^5$，$1\\leq n\\times m\\leq 10^5$，$1\\leq q\\leq 50$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，$1\\leq |a_{i,j}|\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T3】「GFOI Round 1」Cthugha", "background": "原题链接：<https://oier.team/problems/X5D>。\n\n---\n\n> [Cthugha - USAO](https://music.163.com/#/song?id=1833853372)", "description": "给定一张 $n \\times m$ 的网格图，行编号为 $1,2,\\dots ,n$，列编号为 $1,2,\\dots ,m$。我们用 $(i, j)$ 来描述第 $i$ 行第 $j$ 列的格子。每个格子有一个整数权值 $a_{i,j}$，**注意格子的权值可以是负数**。\n\n给定 $q$ 个人位于网格图上，第 $i$ 个人的初始位置在 $(x_i, y_i)$，**注意不保证每个人初始位置互不相同**。\n\n定义某人**走一步**为：若这个人当前坐标在 $(x,y)$，则将该人移动至 $(x+1,y),(x-1,y),(x,y+1),(x,y-1)$ 其中之一。设移动后到达 $(x^{\\prime},y^{\\prime})$，此时需要满足 $1\\leq x^{\\prime}\\leq n,1\\leq y^{\\prime}\\leq m$。\n\n在任意时刻，允许任意两个人位于同一个格子。\n\n定义一个人的**权值**为其走若干步后所有经过的格子的权值和（包括起点和终点），注意若一个格子被经过 $k$ 次则其权值需要被累加 $k$ 次。\n\n特别地，若一个人没有走，则其**权值**为其初始位置格子的权值。\n\n定义**总权值**为每个人走若干步数，所有人权值的最大值。\n\n求最终所有人都走到同一个格子的最小**总权值**，或报告不存在最小**总权值**（即最小总权值为负无穷）。", "inputFormat": "第一行包含三个正整数 $n, m, q$。\n\n接下来 $n$ 行的第 $i$ 行包含 $m$ 个整数 $a_{i, 1}, a_{i, 2}, \\ldots, a_{i, m}$。\n\n接下来 $q$ 行的第 $i$ 行包含两个正整数 $x_i, y_i$，表示第 $i$ 个人的初始位置在 $(x _ i, y _ i)$。", "outputFormat": "若最小总权值不存在（即最小总权值为负无穷），输出 `No`；否则输出一行一个整数表示最小总权值。", "hint": "**【样例解释 #1】**\n\n总权值最小的情况是第一个人不走，此时经过点只有 $(2,2)$，所以答案为 $a_{2,2}=5$。\n\n**【样例解释 #2】**\n\n总权值最小的情况是两个人走到 $(2,3)$，路线分别为 $(2,2)\\rightarrow (2,3)$ 和 $(3,3) \\rightarrow (2,3)$，答案为 $\\max(a_{2,2}+a_{2,3},a_{3,3}+a_{2,3}) = \\max(11, 15) = 15$。\n\n**【样例解释 #5】**\n\n总权值最小的情况是三个人都没有走，权值都为 $a_{1,1}=-1$，答案即为 $-1$。\n\n**【样例解释 #6】**\n\n容易证明最小总权值为负无穷，所以输出 `No`。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n\\times m \\leq $| $q\\leq $ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $9$ | $9$ | 无 | $11$ |\n| $2$ | $10^5$ | $1$ | 无 | $3$ |\n| $3$ | $10^5$ | $50$ | A | $24$ |\n| $4$ | $10^3$ | $50$ | 无  | $21$ |\n| $5$ | $10^5$ | $50$ | 无 | $41$ |\n\n- 特殊性质 A：$a_{i,j} \\geq 1$。\n\n对于所有数据，满足 \n$1\\leq n,m\\leq 10^5$，$1\\leq n\\times m\\leq 10^5$，$1\\leq q\\leq 50$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，$1\\leq |a_{i,j}|\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11132", "type": "P", "difficulty": 4, "samples": [["4\n2 2\n4 2\n7 5\n10 3", "1 2\n1 2 4 3\n5 3 6 7 1 2 4\n6 3 5 8 1 2 4 10 9 7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "Ad-hoc", "梦熊比赛"], "title": "【MX-X5-T4】「GFOI Round 1」epitaxy", "background": "原题链接：<https://oier.team/problems/X5E>。\n\n---\n\n> [epitaxy - かめりあ](https://music.163.com/#/song?id=2600753558)", "description": "给你两个正整数 $n, m$。\n\n定义一个 $1 \\sim n$ 的排列 $p$ 的**价值**为所有的 $n - m + 1$ 个长度为 $m$ 的连续子串内最大值的最大公因数。  \n（规定单个数的最大公因数为其自身。）\n\n请你求出一个在所有 $1 \\sim n$ 的排列中价值最大的排列，如果有多个，求出任意一个均可。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即输出任意一个价值最大的排列都会被认为通过。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n, m$。", "outputFormat": "对于每组数据，输出一行 $n$ 个正整数，表示符合要求的排列 $p_1, p_2, \\ldots, p_n$。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即输出任意一个价值最大的排列都会被认为通过。", "hint": "**【样例解释】**\n\n在第一组数据中，当 $n = 2, m = 2$ 时排列 $p = [1, 2]$ 具有最大价值，为 $2$。并且可以证明当 $n = 2, m = 2$ 时不存在价值 $> 2$ 的排列。\n\n在第二组数据中，当 $n = 4, m = 2$ 时排列 $p = [1, 2, 4, 3]$ 具有最大价值，为 $2$，因为所有长度为 $2$ 的子段最大值分别为 $2, 4, 4$，其最大公因数为 $2$，并且可以证明当 $n = 4, m = 2$ 时不存在价值 $> 2$ 的排列。\n\n**【数据范围】**\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $8$ | $100$ | 无 | 无 | $28$ |\n| $2$ | $10^6$ | $10^6$ | A | 无 | $23$ |\n| $3$ | $10^6$ | $10^6$ | B | 无 | $7$ |\n| $4$ | $10^6$ | $10^6$ | 无 | $1, 2, 3$ | $42$ |\n\n- 特殊性质 A：$m = 2$。\n- 特殊性质 B：$m = n$。\n\n对于所有数据，满足 $1 \\le T \\le 10^5$，$1 \\le m \\le 10^6$，$2 \\le n, \\sum n \\le 10^6$，$m \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T4】「GFOI Round 1」epitaxy", "background": "原题链接：<https://oier.team/problems/X5E>。\n\n---\n\n> [epitaxy - かめりあ](https://music.163.com/#/song?id=2600753558)", "description": "给你两个正整数 $n, m$。\n\n定义一个 $1 \\sim n$ 的排列 $p$ 的**价值**为所有的 $n - m + 1$ 个长度为 $m$ 的连续子串内最大值的最大公因数。  \n（规定单个数的最大公因数为其自身。）\n\n请你求出一个在所有 $1 \\sim n$ 的排列中价值最大的排列，如果有多个，求出任意一个均可。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即输出任意一个价值最大的排列都会被认为通过。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含两个正整数 $n, m$。", "outputFormat": "对于每组数据，输出一行 $n$ 个正整数，表示符合要求的排列 $p_1, p_2, \\ldots, p_n$。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即输出任意一个价值最大的排列都会被认为通过。", "hint": "**【样例解释】**\n\n在第一组数据中，当 $n = 2, m = 2$ 时排列 $p = [1, 2]$ 具有最大价值，为 $2$。并且可以证明当 $n = 2, m = 2$ 时不存在价值 $> 2$ 的排列。\n\n在第二组数据中，当 $n = 4, m = 2$ 时排列 $p = [1, 2, 4, 3]$ 具有最大价值，为 $2$，因为所有长度为 $2$ 的子段最大值分别为 $2, 4, 4$，其最大公因数为 $2$，并且可以证明当 $n = 4, m = 2$ 时不存在价值 $> 2$ 的排列。\n\n**【数据范围】**\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $8$ | $100$ | 无 | 无 | $28$ |\n| $2$ | $10^6$ | $10^6$ | A | 无 | $23$ |\n| $3$ | $10^6$ | $10^6$ | B | 无 | $7$ |\n| $4$ | $10^6$ | $10^6$ | 无 | $1, 2, 3$ | $42$ |\n\n- 特殊性质 A：$m = 2$。\n- 特殊性质 B：$m = n$。\n\n对于所有数据，满足 $1 \\le T \\le 10^5$，$1 \\le m \\le 10^6$，$2 \\le n, \\sum n \\le 10^6$，$m \\le n$。", "locale": "zh-CN"}}}
{"pid": "P11133", "type": "P", "difficulty": 5, "samples": [["2 0\n10\n1 1 4 5 1 4 1 9 1 9\n2\n1 1\n", "AC\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "交互题", "Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X5-T5】「GFOI Round 1」World Ender", "background": "原题链接：<https://oier.team/problems/X5F>。\n\n---\n\n> [$\\small\\text{The Border of \\textbf{Divinity}}.$](https://music.163.com/#/song?id=1962519608)", "description": "**这是一道交互题，仅支持 C++ 语言提交，且不支持 C++14（GCC 9）。**\n\nHikari 和 Tairitsu 用她们的玻璃渣子发明了新的游戏。\n\n有 $n$ 堆碎片，编号为 $0\\sim n-1$。\n\n$a$ 为一个长度为 $n$，下标为 $0\\sim n-1$ 的正整数序列，表示第 $i$ 堆碎片的数量为 $a_i$。\n\n她们轮流进行操作，每轮操作如下：\n\n- 选择一堆碎片 $i$，拿出不少于一个碎片并丢弃；\n- 然后将 $i$ 这一堆中剩下的碎片随意分配到所有非空的堆中，**特别地，可以放回原来的堆**。\n\nHikari 先手，不能操作者输。\n\n你将会成为 Hikari 或者 Tairitsu 中的一个，和另一个进行游戏。\n\n具体地，给定 $a_0, a_1, \\ldots, a_{n-1}$，你需要选定先后手并在 $a_0, a_1, \\ldots, a_{n-1}$ 上和交互库进行游戏。\n\n### 交互格式\n\n**本题使用多组测试数据且采用捆绑测试**。\n\n你的程序不需要，也不应该包含 `main` 函数。\n\n然后你只需要实现如下 $3$ 个函数：\n\n`bool Init(int n, int op, std::vector<int> a);`\n\n- 这个函数用于你的程序的初始化与预处理。\n- 其中 $n$ 为题意所述的碎片堆数，$op$ 为子任务编号。\n- $a$ 为一个长度为 $n$，下标为 $0\\sim n-1$ 的 `std::vector<int>`，表示上述的序列。\n- 你需要返回一个 $\\{0,1\\}$ 中的数。返回 $0$ 表示在游戏中你选择先手 Hikari，返回 $1$ 表示你选择后手 Tairitsu。\n\n`void Get(std::vector<int> a);`\n\n- 这个函数用于你的程序**接收**交互库操作后的序列。\n- $a$ 为一个长度为 $n$ 的 `std::vector<int>`，表示交互库操作后所给出的序列。\n\n`std::vector<int> Play();` \n\n- 这个函数用于你的程序**返回**你操作后的序列。\n- 你需要返回一个长度为 $n$ 的 `std::vector<int>` $a$，表示你操作后所给出的序列。\n\n**本题每个测试点有多组测试数据**。在每个测试点中，对于每组数据，交互库的交互格式如下：\n\n- 先调用一次 `Init()`。\n- 当选手程序选择了先手，调用 `Play()`；否则跳过这一步。\n- 交互库对 $a$ 进行一次操作后调用 `Get()`。\n- 接下来交互库交替调用 `Play()` 和 `Get()`，保证每连续两次调用中操作恰好调用一次 `Play()` 和一次 `Get()`。\n- 特别地，如果某次调用 `Play()` 后交互库将 $a$ 操作至终止状态，或者交互库无法操作时，交互库会得出结果并终止这组测试数据的调用过程，跳到下一组测试数据。也就是最后交互库并不会再调用一次 `Get()`。\n\n本题将使用**自定义校验器**对你的交互过程进行评分，具体见 **【评分方式】**。", "inputFormat": "见 **【说明/提示】**。", "outputFormat": "见 **【说明/提示】**。", "hint": "**本题使用多组测试数据。**\n\n**【样例解释】**\n\n该样例由两个测试数据构成。\n\n第一个测试数据，选择先手 Hikari 必胜。\n\n第二个测试数据，选择后手 Tairitsu 必胜。\n\n**【说明/提示】**\n\n本题附件中提供了 `grader.cpp` 文件和 `sample.cpp` 文件。`sample.cpp` 是选手示例程序，你可以在此基础上实现。`grader.cpp` 是下发交互库，其中下发交互库的策略不是最终交互库的策略，因此你的实现不应依赖于交互库的实现。\n\n你需要将你的程序 `game.cpp` 和 `grader.cpp` 放置在同一目录下，并在该目录下使用如下编译命令得到可执行程序 `game(.exe)`：\n\n`g++ -o game grader.cpp game.cpp -O2 -std=c++14`\n\n可执行程序从标准输入读入以下格式的数据：\n\n- 第一行两个正整数 $T$ 和 $op$，$T$ 为测试数据组数，$op$ 为子任务编号。有且仅有样例满足 $op=0$。\n- 接下来每组测试数据，输入格式如下：\n  - 第一行输入一个正整数 $n$，表示序列 $a$ 的长度。\n  - 第二行输入 $n$ 个正整数，表示 $a_0,a_1,\\ldots,a_{n-1}$。\n\n在本地测试时，请务必保证你的输入与交互格式符合要求，否则我们不保证交互库会正常运行。\n\n如果你的输入与交互格式合法且没有运行错误，下发的交互库将会根据你的调用输出如下信息：\n\n- 若你成功打赢了交互库，交互库输出 `AC`。\n- 否则交互库输出 `WA`。\n\n你的程序不应该操作标准输入输出，否则视为攻击交互库。\n\n**【评分方式】**\n\n本题将使用**自定义校验器**对你的交互过程进行评分。在每个测试点中，如果你超出了时间限制，超出了空间限制，或发生了运行时错误，则你的得分为 $0$。否则你的分数取决于你的程序在交互过程中的表现：\n\n- 参数 $S$ 与你的程序在交互过程中的表现有关：\n  - 若你在测试点中的每个测试数据中，均选择了正确的先后手并且均打赢了交互库，则 $S=1$。\n  - 若你在测试点中的每个测试数据中，均选择了正确的先后手但是有不合法操作或者打输了交互库，则 $S=0.2$。\n  - 若你在测试点中的每个测试数据中，至少一次选择了错误的先后手但是均打赢了交互库，则若 $op\\in \\{4,5\\}$，$S=1$；否则 $S=0.6$。\n  - 否则 $S=0$。\n- 最终你在该测试点的得分为 $S\\times score$，$score$ 为测试点所在子任务的分数。\n- 最终你在某个子任务的得分为你在子任务内所有测试点的得分的最小值。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n| 子任务编号（$op =$） | $n\\le$ | $a_i\\le$ | 特殊性质 | 分值 |\n| :--------: | :----: | :------: | :------: | :--: |\n|    $1$     |  $3$   |   $2$    |    无    | $5$  |\n|    $2$     |  $10$  |   $2$    |    无    | $15$ |\n|    $3$     | $100$  |  $100$   |    无    | $10$ |\n|    $4$     | $2000$ |  $2000$  |    A     | $15$ |\n|    $5$     | $2000$ |  $2000$  |    B     | $20$ |\n|    $6$     | $2000$ |  $2000$  |    无    | $35$ |\n\n- 特殊性质 A：交互库的策略为选择一个非空的堆，拿走若干个碎片并将剩余的碎片放回原堆中。\n- 特殊性质 B：交互库的策略为选择一个非空的堆，拿走若干个碎片并将剩余的碎片全部放到一个堆中（可能为原堆）。\n\n对于所有数据，满足 $1 \\le T\\le 2000$，$1 \\le op \\le 6$，$1 \\le n\\le 2000$，$1 \\le a_i\\le 2000$，$1 \\le \\sum a_i \\le 4000$，$1 \\le\\sum n\\le 2000$，$1 \\le \\sum\\sum a_i\\le 4000$。\n\n保证每个测试点中 `Init()` 的调用次数不超过 `2000` 次，`Get()` 和 `Play()` 的调用次数总和不超过 `4000` 次。当选手交互格式正确时，交互库运行所占用的时间始终不超过 500ms。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T5】「GFOI Round 1」World Ender", "background": "原题链接：<https://oier.team/problems/X5F>。\n\n---\n\n> [$\\small\\text{The Border of \\textbf{Divinity}}.$](https://music.163.com/#/song?id=1962519608)", "description": "**这是一道交互题，仅支持 C++ 语言提交，且不支持 C++14（GCC 9）。**\n\nHikari 和 Tairitsu 用她们的玻璃渣子发明了新的游戏。\n\n有 $n$ 堆碎片，编号为 $0\\sim n-1$。\n\n$a$ 为一个长度为 $n$，下标为 $0\\sim n-1$ 的正整数序列，表示第 $i$ 堆碎片的数量为 $a_i$。\n\n她们轮流进行操作，每轮操作如下：\n\n- 选择一堆碎片 $i$，拿出不少于一个碎片并丢弃；\n- 然后将 $i$ 这一堆中剩下的碎片随意分配到所有非空的堆中，**特别地，可以放回原来的堆**。\n\nHikari 先手，不能操作者输。\n\n你将会成为 Hikari 或者 Tairitsu 中的一个，和另一个进行游戏。\n\n具体地，给定 $a_0, a_1, \\ldots, a_{n-1}$，你需要选定先后手并在 $a_0, a_1, \\ldots, a_{n-1}$ 上和交互库进行游戏。\n\n### 交互格式\n\n**本题使用多组测试数据且采用捆绑测试**。\n\n你的程序不需要，也不应该包含 `main` 函数。\n\n然后你只需要实现如下 $3$ 个函数：\n\n`bool Init(int n, int op, std::vector<int> a);`\n\n- 这个函数用于你的程序的初始化与预处理。\n- 其中 $n$ 为题意所述的碎片堆数，$op$ 为子任务编号。\n- $a$ 为一个长度为 $n$，下标为 $0\\sim n-1$ 的 `std::vector<int>`，表示上述的序列。\n- 你需要返回一个 $\\{0,1\\}$ 中的数。返回 $0$ 表示在游戏中你选择先手 Hikari，返回 $1$ 表示你选择后手 Tairitsu。\n\n`void Get(std::vector<int> a);`\n\n- 这个函数用于你的程序**接收**交互库操作后的序列。\n- $a$ 为一个长度为 $n$ 的 `std::vector<int>`，表示交互库操作后所给出的序列。\n\n`std::vector<int> Play();` \n\n- 这个函数用于你的程序**返回**你操作后的序列。\n- 你需要返回一个长度为 $n$ 的 `std::vector<int>` $a$，表示你操作后所给出的序列。\n\n**本题每个测试点有多组测试数据**。在每个测试点中，对于每组数据，交互库的交互格式如下：\n\n- 先调用一次 `Init()`。\n- 当选手程序选择了先手，调用 `Play()`；否则跳过这一步。\n- 交互库对 $a$ 进行一次操作后调用 `Get()`。\n- 接下来交互库交替调用 `Play()` 和 `Get()`，保证每连续两次调用中操作恰好调用一次 `Play()` 和一次 `Get()`。\n- 特别地，如果某次调用 `Play()` 后交互库将 $a$ 操作至终止状态，或者交互库无法操作时，交互库会得出结果并终止这组测试数据的调用过程，跳到下一组测试数据。也就是最后交互库并不会再调用一次 `Get()`。\n\n本题将使用**自定义校验器**对你的交互过程进行评分，具体见 **【评分方式】**。", "inputFormat": "见 **【说明/提示】**。", "outputFormat": "见 **【说明/提示】**。", "hint": "**本题使用多组测试数据。**\n\n**【样例解释】**\n\n该样例由两个测试数据构成。\n\n第一个测试数据，选择先手 Hikari 必胜。\n\n第二个测试数据，选择后手 Tairitsu 必胜。\n\n**【说明/提示】**\n\n本题附件中提供了 `grader.cpp` 文件和 `sample.cpp` 文件。`sample.cpp` 是选手示例程序，你可以在此基础上实现。`grader.cpp` 是下发交互库，其中下发交互库的策略不是最终交互库的策略，因此你的实现不应依赖于交互库的实现。\n\n你需要将你的程序 `game.cpp` 和 `grader.cpp` 放置在同一目录下，并在该目录下使用如下编译命令得到可执行程序 `game(.exe)`：\n\n`g++ -o game grader.cpp game.cpp -O2 -std=c++14`\n\n可执行程序从标准输入读入以下格式的数据：\n\n- 第一行两个正整数 $T$ 和 $op$，$T$ 为测试数据组数，$op$ 为子任务编号。有且仅有样例满足 $op=0$。\n- 接下来每组测试数据，输入格式如下：\n  - 第一行输入一个正整数 $n$，表示序列 $a$ 的长度。\n  - 第二行输入 $n$ 个正整数，表示 $a_0,a_1,\\ldots,a_{n-1}$。\n\n在本地测试时，请务必保证你的输入与交互格式符合要求，否则我们不保证交互库会正常运行。\n\n如果你的输入与交互格式合法且没有运行错误，下发的交互库将会根据你的调用输出如下信息：\n\n- 若你成功打赢了交互库，交互库输出 `AC`。\n- 否则交互库输出 `WA`。\n\n你的程序不应该操作标准输入输出，否则视为攻击交互库。\n\n**【评分方式】**\n\n本题将使用**自定义校验器**对你的交互过程进行评分。在每个测试点中，如果你超出了时间限制，超出了空间限制，或发生了运行时错误，则你的得分为 $0$。否则你的分数取决于你的程序在交互过程中的表现：\n\n- 参数 $S$ 与你的程序在交互过程中的表现有关：\n  - 若你在测试点中的每个测试数据中，均选择了正确的先后手并且均打赢了交互库，则 $S=1$。\n  - 若你在测试点中的每个测试数据中，均选择了正确的先后手但是有不合法操作或者打输了交互库，则 $S=0.2$。\n  - 若你在测试点中的每个测试数据中，至少一次选择了错误的先后手但是均打赢了交互库，则若 $op\\in \\{4,5\\}$，$S=1$；否则 $S=0.6$。\n  - 否则 $S=0$。\n- 最终你在该测试点的得分为 $S\\times score$，$score$ 为测试点所在子任务的分数。\n- 最终你在某个子任务的得分为你在子任务内所有测试点的得分的最小值。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n| 子任务编号（$op =$） | $n\\le$ | $a_i\\le$ | 特殊性质 | 分值 |\n| :--------: | :----: | :------: | :------: | :--: |\n|    $1$     |  $3$   |   $2$    |    无    | $5$  |\n|    $2$     |  $10$  |   $2$    |    无    | $15$ |\n|    $3$     | $100$  |  $100$   |    无    | $10$ |\n|    $4$     | $2000$ |  $2000$  |    A     | $15$ |\n|    $5$     | $2000$ |  $2000$  |    B     | $20$ |\n|    $6$     | $2000$ |  $2000$  |    无    | $35$ |\n\n- 特殊性质 A：交互库的策略为选择一个非空的堆，拿走若干个碎片并将剩余的碎片放回原堆中。\n- 特殊性质 B：交互库的策略为选择一个非空的堆，拿走若干个碎片并将剩余的碎片全部放到一个堆中（可能为原堆）。\n\n对于所有数据，满足 $1 \\le T\\le 2000$，$1 \\le op \\le 6$，$1 \\le n\\le 2000$，$1 \\le a_i\\le 2000$，$1 \\le \\sum a_i \\le 4000$，$1 \\le\\sum n\\le 2000$，$1 \\le \\sum\\sum a_i\\le 4000$。\n\n保证每个测试点中 `Init()` 的调用次数不超过 `2000` 次，`Get()` 和 `Play()` 的调用次数总和不超过 `4000` 次。当选手交互格式正确时，交互库运行所占用的时间始终不超过 500ms。", "locale": "zh-CN"}}}
{"pid": "P11134", "type": "P", "difficulty": 6, "samples": [["4\n5\n1 7 1 3\n2 4 2 6\n3 5 3 5\n6 7 2 9\n3 4 1 4\n5\n2 7 3 3\n1 3 5 6\n4 5 3 5\n6 7 1 9\n1 1 5 4\n4\n1 4 1 3\n1 2 2 1\n3 4 3 5\n1 4 4 4\n3\n1 3 1 1\n2 3 1 3\n4 5 1 8", "22\n41\n17\n-1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "梦熊比赛"], "title": "【MX-X5-T6】「GFOI Round 1」Abiogenesis", "background": "原题链接：<https://oier.team/problems/X5G>。\n\n---\n\n> [Abiogenesis - Juggernaut.](https://music.163.com/#/song?id=1416321652)\n\n本题为 [Codeforces 1981 E. Turtle and Intersected Segments](https://codeforces.com/contest/1981/problem/E) 改编。", "description": "给 $n$ 条线段 $[l_i, r_i]$，第 $i$ 条线段有一组权值 $a_i, b_i$。\n\n有一个无向图 $G$，其初始有 $n$ 个结点，$0$ 条边。对于每一对正整数 $i, j$ 满足 $1 \\le i < j \\le n$，若编号为 $i, j$ 的线段相交，就在 $G$ 中连一条两个端点分别为 $i, j$，边权为 $a_i + a_j + |b_i - b_j|$ 的边。\n\n求 $G$ 最小生成树边权之和，或报告 $G$ 不连通。\n\n如果两条线段 $[l_1, r_1]$ 和 $[l_2, r_2]$ 满足 $\\max(l_1, l_2) \\le \\min(r_1, r_2)$，就认为它们是相交的。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$，表示线段的个数。\n\n之后的 $n$ 行中的第 $i$ 行包含四个正整数 $l_i, r_i, a_i, b_i$。", "outputFormat": "对于每组数据，输出一行一个整数，表示 $G$ 最小生成树边权之和。特别地，若 $G$ 不连通，输出 $-1$。", "hint": "**【样例解释】**\n\n对于第一组数据，$G$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sozig2ub.png)\n\n$G$ 的其中一个最小生成树形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2ymd3s7z.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $100$ | $10^5$ | 无 | 无 | $11$ |\n| $2$ | $10^5$ | $10^5$ | AC | 无 | $5$ |\n| $3$ | $10^5$ | $10^5$ | A | $2$ | $14$ |\n| $4$ | $10^5$ | $10^5$ | B | 无 | $14$ |\n| $5$ | $10^5$ | $10^5$ | C | $2$ | $14$ |\n| $6$ | $10^5$ | $10^5$ | D | 无 | $14$ |\n| $7$ | $10^5$ | $10^5$ | 无 | $1, 2, 3, 4, 5, 6$ | $28$ |\n\n- 特殊性质 A：$\\forall i \\in [1, n], l_i = 1$。\n- 特殊性质 B：$\\forall i \\in [1, n - 1], l_i \\le l_{i + 1}, r_i \\le r_{i + 1}$。\n- 特殊性质 C：$\\forall i \\in [1, n], b_i = 1$。\n- 特殊性质 D：$\\forall i \\in [1, n], a_i = b_i$。\n\n对于所有数据，满足 $1 \\le T \\le 10^4$，$1 \\le n, \\sum n \\le 10^5$，$1 \\le l_i, r_i, a_i, b_i \\le 10^8$，$l_i \\le r_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T6】「GFOI Round 1」Abiogenesis", "background": "原题链接：<https://oier.team/problems/X5G>。\n\n---\n\n> [Abiogenesis - Juggernaut.](https://music.163.com/#/song?id=1416321652)\n\n本题为 [Codeforces 1981 E. Turtle and Intersected Segments](https://codeforces.com/contest/1981/problem/E) 改编。", "description": "给 $n$ 条线段 $[l_i, r_i]$，第 $i$ 条线段有一组权值 $a_i, b_i$。\n\n有一个无向图 $G$，其初始有 $n$ 个结点，$0$ 条边。对于每一对正整数 $i, j$ 满足 $1 \\le i < j \\le n$，若编号为 $i, j$ 的线段相交，就在 $G$ 中连一条两个端点分别为 $i, j$，边权为 $a_i + a_j + |b_i - b_j|$ 的边。\n\n求 $G$ 最小生成树边权之和，或报告 $G$ 不连通。\n\n如果两条线段 $[l_1, r_1]$ 和 $[l_2, r_2]$ 满足 $\\max(l_1, l_2) \\le \\min(r_1, r_2)$，就认为它们是相交的。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$，表示线段的个数。\n\n之后的 $n$ 行中的第 $i$ 行包含四个正整数 $l_i, r_i, a_i, b_i$。", "outputFormat": "对于每组数据，输出一行一个整数，表示 $G$ 最小生成树边权之和。特别地，若 $G$ 不连通，输出 $-1$。", "hint": "**【样例解释】**\n\n对于第一组数据，$G$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sozig2ub.png)\n\n$G$ 的其中一个最小生成树形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2ymd3s7z.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试且开启子任务依赖。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 子任务依赖 | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $1$ | $100$ | $10^5$ | 无 | 无 | $11$ |\n| $2$ | $10^5$ | $10^5$ | AC | 无 | $5$ |\n| $3$ | $10^5$ | $10^5$ | A | $2$ | $14$ |\n| $4$ | $10^5$ | $10^5$ | B | 无 | $14$ |\n| $5$ | $10^5$ | $10^5$ | C | $2$ | $14$ |\n| $6$ | $10^5$ | $10^5$ | D | 无 | $14$ |\n| $7$ | $10^5$ | $10^5$ | 无 | $1, 2, 3, 4, 5, 6$ | $28$ |\n\n- 特殊性质 A：$\\forall i \\in [1, n], l_i = 1$。\n- 特殊性质 B：$\\forall i \\in [1, n - 1], l_i \\le l_{i + 1}, r_i \\le r_{i + 1}$。\n- 特殊性质 C：$\\forall i \\in [1, n], b_i = 1$。\n- 特殊性质 D：$\\forall i \\in [1, n], a_i = b_i$。\n\n对于所有数据，满足 $1 \\le T \\le 10^4$，$1 \\le n, \\sum n \\le 10^5$，$1 \\le l_i, r_i, a_i, b_i \\le 10^8$，$l_i \\le r_i$。", "locale": "zh-CN"}}}
{"pid": "P11135", "type": "P", "difficulty": 7, "samples": [["5 998244353\n5 1\n6 1\n6 2\n6 3\n10 20\n", "4 1 5 3 2\n5 4 3 2 1 6\n3 6 2 5 1 4\n-1\n5 10 4 3 2 9 8 7 1 6\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "Special Judge", "O2优化", "剪枝", "状压 DP", "梦熊比赛"], "title": "【MX-X5-T7】「GFOI Round 1」Der Richter", "background": "原题链接：<https://oier.team/problems/X5H>。\n\n---\n\n> [Der Richter - Ωμεγα](https://www.bilibili.com/video/BV11SpberEjC/)", "description": "我们首先给出关于本题的一些定义。\n\n定义一个 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$ 是**好的**，当且仅当 $\\exists k \\in [1, n - 1], \\max\\limits_{i = 1}^k p_i = k$。\n\n定义一个序列 $x_1, x_2, \\ldots, x_k$ 是一个排列 $p_1, p_2, \\ldots, p_n$ 的**交换方案**，当且仅当：\n\n- $\\forall 1 \\le i \\le k$，$1 \\le x_i \\le n - 1$ 且 $x_i$ 是整数；\n- 对所有 $i = 1 \\sim k$ **依次**执行交换 $p$ 中 $x_i$ 和 $x_i + 1$ 位置上的数的操作之后，$p$ 是**好的**。\n\n特别地，序列 $x$ 可以为空，代表不进行任何交换操作。\n\n定义一个序列 $x_1, x_2, \\ldots, x_k$ 是一个排列 $p_1, p_2, \\ldots, p_n$ 的**关键交换方案**，当且仅当：\n\n- $x$ 是 $p$ 的一个**交换方案**；\n- $x$ 是 $p$ 的所有**交换方案**中长度最小的。\n\n定义 $f(p)$ 为排列 $p$ 的不同的**关键交换方案**的个数。\n\n定义一个排列 $q$ 是另一个排列 $p$ 的一个**终态**，当且仅当：\n\n- $p$ 的长度与 $q$ 相等；\n- $q$ 是**好的**；\n- 存在一个 $p$ 的**关键交换方案** $x_1, x_2, \\ldots, x_k$，使得对所有 $i = 1 \\sim k$ **依次**执行交换 $p$ 中 $x_i$ 和 $x_i + 1$ 位置上的数的操作之后，$p$ 与 $q$ 相同（即 $\\forall 1 \\le i \\le |p|, p_i = q_i$）。\n\n定义一个排列 $p$ 是**极好的**，当且仅当只存在**一个**排列 $q$，使得 $q$ 是 $p$ 的**终态**。\n\n给定一个**质数** $P$ 和 $q$ 次询问，每次询问给定两个整数 $n, m$，你需要构造任意一个**极好的**长度为 $n$ 且 $f(p) \\equiv m \\pmod P$ 的 $1 \\sim n$ 的排列 $p$，或报告无解。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即若有解输出任意一个满足要求的排列都会被认为通过。", "inputFormat": "第一行输入两个正整数 $q, P$，表示询问次数和模数。\n\n接下来 $q$ 行，每行包含两个整数 $n, m$。", "outputFormat": "对于每次询问：\n\n- 若无解输出一行一个整数 $-1$；\n- 否则输出一行 $n$ 个整数，表示任意一个符合要求的 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即若有解输出任意一个满足要求的排列都会被认为通过。", "hint": "**【样例解释】**\n\n对于第一次询问，排列 $p = [4, 1, 5, 3, 2]$ 的**关键交换方案**只有 $x = [1]$，且因为 $p$ 的**终态**只有 $q = [1, 4, 5, 3, 2]$ 所以 $p$ 是**极好的**。\n\n对于第二次询问，排列 $p = [5, 4, 3, 2, 1, 6]$ 的**关键交换方案**只有 $x = []$，且因为 $p$ 的**终态**只有 $q = [5, 4, 3, 2, 1, 6]$ 所以 $p$ 是**极好的**。\n\n对于第三次询问，排列 $p = [3, 6, 2, 5, 1, 4]$ 的**关键交换方案**有 $x = [2, 4, 3]$ 和 $x = [4, 2, 3]$，且因为 $p$ 的**终态**只有 $q = [3, 2, 1, 6, 5, 4]$ 所以 $p$ 是**极好的**。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $8$ | 无 | $17$ |\n| $2$ | $50$ | A | $3$ |\n| $3$ | $50$ | B | $3$ |\n| $4$ | $18$ | 无 | $19$ |\n| $5$ | $40$ | 无 | $16$ |\n| $6$ | $50$ | 无 | $9$ |\n| $7$ | $60$ | 无 | $10$ |\n| $8$ | $70$ | 无 | $11$ |\n| $9$ | $80$ | 无 | $12$ |\n\n- 特殊性质 A：$m = 0$。\n- 特殊性质 B：$m = 1$。\n\n对于所有数据，满足 $1 \\le q \\le 10^4$，$9 \\times 10^8 < P < 10^9$，$2 \\le n \\le 80$，$0 \\le m < P$，$P$ 是**质数**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X5-T7】「GFOI Round 1」Der Richter", "background": "原题链接：<https://oier.team/problems/X5H>。\n\n---\n\n> [Der Richter - Ωμεγα](https://www.bilibili.com/video/BV11SpberEjC/)", "description": "我们首先给出关于本题的一些定义。\n\n定义一个 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$ 是**好的**，当且仅当 $\\exists k \\in [1, n - 1], \\max\\limits_{i = 1}^k p_i = k$。\n\n定义一个序列 $x_1, x_2, \\ldots, x_k$ 是一个排列 $p_1, p_2, \\ldots, p_n$ 的**交换方案**，当且仅当：\n\n- $\\forall 1 \\le i \\le k$，$1 \\le x_i \\le n - 1$ 且 $x_i$ 是整数；\n- 对所有 $i = 1 \\sim k$ **依次**执行交换 $p$ 中 $x_i$ 和 $x_i + 1$ 位置上的数的操作之后，$p$ 是**好的**。\n\n特别地，序列 $x$ 可以为空，代表不进行任何交换操作。\n\n定义一个序列 $x_1, x_2, \\ldots, x_k$ 是一个排列 $p_1, p_2, \\ldots, p_n$ 的**关键交换方案**，当且仅当：\n\n- $x$ 是 $p$ 的一个**交换方案**；\n- $x$ 是 $p$ 的所有**交换方案**中长度最小的。\n\n定义 $f(p)$ 为排列 $p$ 的不同的**关键交换方案**的个数。\n\n定义一个排列 $q$ 是另一个排列 $p$ 的一个**终态**，当且仅当：\n\n- $p$ 的长度与 $q$ 相等；\n- $q$ 是**好的**；\n- 存在一个 $p$ 的**关键交换方案** $x_1, x_2, \\ldots, x_k$，使得对所有 $i = 1 \\sim k$ **依次**执行交换 $p$ 中 $x_i$ 和 $x_i + 1$ 位置上的数的操作之后，$p$ 与 $q$ 相同（即 $\\forall 1 \\le i \\le |p|, p_i = q_i$）。\n\n定义一个排列 $p$ 是**极好的**，当且仅当只存在**一个**排列 $q$，使得 $q$ 是 $p$ 的**终态**。\n\n给定一个**质数** $P$ 和 $q$ 次询问，每次询问给定两个整数 $n, m$，你需要构造任意一个**极好的**长度为 $n$ 且 $f(p) \\equiv m \\pmod P$ 的 $1 \\sim n$ 的排列 $p$，或报告无解。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即若有解输出任意一个满足要求的排列都会被认为通过。", "inputFormat": "第一行输入两个正整数 $q, P$，表示询问次数和模数。\n\n接下来 $q$ 行，每行包含两个整数 $n, m$。", "outputFormat": "对于每次询问：\n\n- 若无解输出一行一个整数 $-1$；\n- 否则输出一行 $n$ 个整数，表示任意一个符合要求的 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$。\n\n本题将使用**自定义校验器**检查你构造的排列是否正确，即若有解输出任意一个满足要求的排列都会被认为通过。", "hint": "**【样例解释】**\n\n对于第一次询问，排列 $p = [4, 1, 5, 3, 2]$ 的**关键交换方案**只有 $x = [1]$，且因为 $p$ 的**终态**只有 $q = [1, 4, 5, 3, 2]$ 所以 $p$ 是**极好的**。\n\n对于第二次询问，排列 $p = [5, 4, 3, 2, 1, 6]$ 的**关键交换方案**只有 $x = []$，且因为 $p$ 的**终态**只有 $q = [5, 4, 3, 2, 1, 6]$ 所以 $p$ 是**极好的**。\n\n对于第三次询问，排列 $p = [3, 6, 2, 5, 1, 4]$ 的**关键交换方案**有 $x = [2, 4, 3]$ 和 $x = [4, 2, 3]$，且因为 $p$ 的**终态**只有 $q = [3, 2, 1, 6, 5, 4]$ 所以 $p$ 是**极好的**。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $8$ | 无 | $17$ |\n| $2$ | $50$ | A | $3$ |\n| $3$ | $50$ | B | $3$ |\n| $4$ | $18$ | 无 | $19$ |\n| $5$ | $40$ | 无 | $16$ |\n| $6$ | $50$ | 无 | $9$ |\n| $7$ | $60$ | 无 | $10$ |\n| $8$ | $70$ | 无 | $11$ |\n| $9$ | $80$ | 无 | $12$ |\n\n- 特殊性质 A：$m = 0$。\n- 特殊性质 B：$m = 1$。\n\n对于所有数据，满足 $1 \\le q \\le 10^4$，$9 \\times 10^8 < P < 10^9$，$2 \\le n \\le 80$，$0 \\le m < P$，$P$ 是**质数**。", "locale": "zh-CN"}}}
{"pid": "P11136", "type": "P", "difficulty": 1, "samples": [["1 1 4 5", "324"], ["100 100 100 0", "1000000"], ["114 51 419 198", "47933496"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[APC001] A - CT", "background": "Compressed Towel.\n\n~~什么，这不是公开赛，这是压缩毛巾，遇水变大变高~~。", "description": "这是一个有魔力的压缩毛巾，可以无限变大。\n\n压缩毛巾的初始长、宽、高分别为 $a, b, h$ 厘米。它遇到水 $k$ 次，每次遇到水，长宽高增加 $1$ 厘米。请输出最后压缩毛巾的体积。单位为立方厘米。\n\n但是某人觉得这题太简单了，懒惰的他把这题丢给了你，所以你需要做出这道题。", "inputFormat": "四个数，分别为 $a,b,h,k$。", "outputFormat": "一个数表示答案，由于答案可能过大，输出其 $\\bmod~988444333$ 的值。\n\n**请注意本题的模数**。", "hint": "### 样例解释 $1$\n\n计算可得 $(1+5)\\times(1+5)\\times(4+5)=6\\times6\\times9=324$。\n\n### 样例解释 $2$\n\n请注意压缩毛巾可以不遇到水。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq a,b,h\\leq 500$，$0\\leq k\\leq 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] A - CT", "background": "Compressed Towel.\n\n~~什么，这不是公开赛，这是压缩毛巾，遇水变大变高~~。", "description": "这是一个有魔力的压缩毛巾，可以无限变大。\n\n压缩毛巾的初始长、宽、高分别为 $a, b, h$ 厘米。它遇到水 $k$ 次，每次遇到水，长宽高增加 $1$ 厘米。请输出最后压缩毛巾的体积。单位为立方厘米。\n\n但是某人觉得这题太简单了，懒惰的他把这题丢给了你，所以你需要做出这道题。", "inputFormat": "四个数，分别为 $a,b,h,k$。", "outputFormat": "一个数表示答案，由于答案可能过大，输出其 $\\bmod~988444333$ 的值。\n\n**请注意本题的模数**。", "hint": "### 样例解释 $1$\n\n计算可得 $(1+5)\\times(1+5)\\times(4+5)=6\\times6\\times9=324$。\n\n### 样例解释 $2$\n\n请注意压缩毛巾可以不遇到水。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq a,b,h\\leq 500$，$0\\leq k\\leq 500$。", "locale": "zh-CN"}}}
{"pid": "P11137", "type": "P", "difficulty": 1, "samples": [["3\nchachong\nabcabcat\nchocolat\nnoiprp++", "0\nGood job!"], ["10\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b\napc001_b", "10\nMake persistent efforts."], ["25\na\nb\nc\nd\ne\nf\ng\nh\ni\nj\nk\nl\nm\nn\no\np\nq\nr\ns\nt\nu\nv\nw\nx\ny\nz", "0\nGood job!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[APC001] B - Checker", "background": "小 K 正在出公开赛。他有一个 idea，但他担心重题，因此，他需要确认这题是不是重题。不过他还有很多事情要做，因此他把这个任务交给了你。", "description": "题库里共有 $ n $ 道题目，每道题目的名称都是一个**长度不足 $ 10 $** 的字符串。设题目名称长度为 $k$，我们定义两道题为**重题**当且仅当两道题题目名称有 $\\ge \\left\\lceil\\frac{k}{2} \\right\\rceil$ 的相同位置的字符相同。\n\n现在小 K 把这道题交给了你，希望你帮他查重（即，将自己的题目与其他的题目进行一一比对，判断是否为重题）。", "inputFormat": "先输入一个正整数 $ n $ 表示题库中的题目数量，之后输入一个字符串 $ s $ 表示小 K 出的题目的名称。\n\n之后 $ n $ 行每行一个字符串表示这些题目的名称。\n\n**输入的每个字符串长度相同。**", "outputFormat": "两行，第一行输出重题数量，若没有重题则第二行输出 `Good job!`，否则输出 `Make persistent efforts.`。", "hint": "**【样例解释 #1】**\n\n题目名为 `chachong`，与第一题中的 $ 0 $ 个字符相同，与第二题中的 $ 3 $ 个字符相同，与第三题中的 $0$ 个字符相同，而每题都有 $ 8 $ 个字符，没有与小 K 出的题目有大于等于 $ 8 \\times 50\\% = 4 $ 个字符相同的题目。\n\n**【样例解释 #2】**\n\n请注意有可能在题库中也包含重题。\n\n**【数据规模】**\n\n对于 $100\\%$ 的数据，保证 $ 1 \\le n \\le 10^4 ,1\\le k\\le10$，每个字符串长度相同，且不含不可见字符。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] B - Checker", "background": "小 K 正在出公开赛。他有一个 idea，但他担心重题，因此，他需要确认这题是不是重题。不过他还有很多事情要做，因此他把这个任务交给了你。", "description": "题库里共有 $ n $ 道题目，每道题目的名称都是一个**长度不足 $ 10 $** 的字符串。设题目名称长度为 $k$，我们定义两道题为**重题**当且仅当两道题题目名称有 $\\ge \\left\\lceil\\frac{k}{2} \\right\\rceil$ 的相同位置的字符相同。\n\n现在小 K 把这道题交给了你，希望你帮他查重（即，将自己的题目与其他的题目进行一一比对，判断是否为重题）。", "inputFormat": "先输入一个正整数 $ n $ 表示题库中的题目数量，之后输入一个字符串 $ s $ 表示小 K 出的题目的名称。\n\n之后 $ n $ 行每行一个字符串表示这些题目的名称。\n\n**输入的每个字符串长度相同。**", "outputFormat": "两行，第一行输出重题数量，若没有重题则第二行输出 `Good job!`，否则输出 `Make persistent efforts.`。", "hint": "**【样例解释 #1】**\n\n题目名为 `chachong`，与第一题中的 $ 0 $ 个字符相同，与第二题中的 $ 3 $ 个字符相同，与第三题中的 $0$ 个字符相同，而每题都有 $ 8 $ 个字符，没有与小 K 出的题目有大于等于 $ 8 \\times 50\\% = 4 $ 个字符相同的题目。\n\n**【样例解释 #2】**\n\n请注意有可能在题库中也包含重题。\n\n**【数据规模】**\n\n对于 $100\\%$ 的数据，保证 $ 1 \\le n \\le 10^4 ,1\\le k\\le10$，每个字符串长度相同，且不含不可见字符。", "locale": "zh-CN"}}}
{"pid": "P11138", "type": "P", "difficulty": 3, "samples": [["5\nPAAAAPPPCA\nCAPPCPCAPAPA\nPPAAAACCAAAAAAAAC\nCAPPCAAPA\nAPPAACPPAPPPAPAAAA", "PAAAPPA\n1\n5 6 9\nCPPCAPAPA\n1\n2 4 5\nPPAAAACCAAAAAAAAC\n0\nCPAAPA\n1\n2 3 5\nPAAPPAPPPAPAAAA\n1\n1 2 6"], ["1\nAPC\n", "Perfect\n1\n1 2 3"], ["10\nPPCPAPAAACPAPACPPCPC\nAPPAPPAPPCPAPPCCCPPA\nAPPCCPPAPPAACCPPPPPP\nPACPPCAPCPPCPPPAAAAC\nPPPCPPCCPACAAACCCCAC\nACAAPCPAPAAAAPPACPPC\nACACPPCCPPAACPAAAAAC\nAPPCPCCCAPCACPAACACC\nAACPCAPACPPPCAAPCCPC\nPPACPPPCCAPAAAPCPAPA\n", "PPCPAAPP\n4\n5 6 10\n7 11 15\n8 13 18\n9 16 20\nPPPPPPPA\n4\n1 2 10\n4 5 15\n7 8 16\n12 13 17\nPCPPPAACPPPPPP\n2\n1 2 4\n8 9 13\nPCPPPCPPPAAAAC\n2\n2 4 6\n7 8 9\nPPPCPPCCPACAAACCCCAC\n0\nCAAAAAPPAPP\n3\n1 5 6\n3 7 17\n4 9 20\nCCPPACAAAAA\n3\n1 5 7\n3 6 8\n11 14 20\nPPCCCCAAACC\n3\n1 2 4\n9 10 11\n12 14 17\nCP\n6\n1 4 5\n2 7 9\n6 10 13\n8 11 17\n14 16 18\n15 19 20\nPPCPPCAAAPPAPA\n2\n3 5 8\n10 11 16\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["Special Judge", "O2优化", "队列"], "title": "[APC001] C - Not APC", "background": "这题并没有什么有趣的题目背景，祝您愉快。", "description": "小 A 有一个**仅由 `A`、`P`、`C` 构成**的字符串 $S$。\n\n小 A 需要**尽可能地**不断在这个字符串中消除形如 `APC` 这样的**子序列**，直到无法消除。\n\n最后，小 A 需要输出消除后的字符串。如果字符串可以被消除成空串，则输出 `Perfect`。\n\n然而小 A 不会这个题，所以来找你帮忙。", "inputFormat": "第一行一个数 $T$ 表示数据组数。\n\n接下来 $T$ 行每行一个字符串 $S$.", "outputFormat": "**本题使用 Special Judge。**\n\n请输出最短的答案字符串，并给出一种删除的方案。\n\n对于每组数据，第一行输出一个最短的答案字符串。如果可能的最短答案字符串或生成最短答案字符串的方案有多种，请输出任意一个。\n\n接下来一行输出一个整数 $q$，表示你的删除次数。\n\n接下来 $q$ 行每行三个整数，分别表示你在一次操作中删除的字符 `A`、`P`、`C` **在原字符串中**的位置，**下标从 $1$ 开始**。", "hint": "**样例解释 #1：**  \n对于第一组数据，字符串为 `PAAAAPPPCA`，下标为 $\\{5,6,9\\}$ 的字符串被删除，最终得到 `PAAAPPA`。\n\n对于第二组数据，字符串为 `CAPPCPCAPAPA`，下标为 $\\{2,4,5\\}$ 的字符被消除，得到 `CPPCAPAPA`。\n\n**样例解释 #2：**  \n唯一的一组数据中，字符串为 `APC`，显然能被全部消除，方案也显然。\n\n$1\\leq T\\leq 10$，$1\\leq \\sum |S|\\leq 3\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] C - Not APC", "background": "这题并没有什么有趣的题目背景，祝您愉快。", "description": "小 A 有一个**仅由 `A`、`P`、`C` 构成**的字符串 $S$。\n\n小 A 需要**尽可能地**不断在这个字符串中消除形如 `APC` 这样的**子序列**，直到无法消除。\n\n最后，小 A 需要输出消除后的字符串。如果字符串可以被消除成空串，则输出 `Perfect`。\n\n然而小 A 不会这个题，所以来找你帮忙。", "inputFormat": "第一行一个数 $T$ 表示数据组数。\n\n接下来 $T$ 行每行一个字符串 $S$.", "outputFormat": "**本题使用 Special Judge。**\n\n请输出最短的答案字符串，并给出一种删除的方案。\n\n对于每组数据，第一行输出一个最短的答案字符串。如果可能的最短答案字符串或生成最短答案字符串的方案有多种，请输出任意一个。\n\n接下来一行输出一个整数 $q$，表示你的删除次数。\n\n接下来 $q$ 行每行三个整数，分别表示你在一次操作中删除的字符 `A`、`P`、`C` **在原字符串中**的位置，**下标从 $1$ 开始**。", "hint": "**样例解释 #1：**  \n对于第一组数据，字符串为 `PAAAAPPPCA`，下标为 $\\{5,6,9\\}$ 的字符串被删除，最终得到 `PAAAPPA`。\n\n对于第二组数据，字符串为 `CAPPCPCAPAPA`，下标为 $\\{2,4,5\\}$ 的字符被消除，得到 `CPPCAPAPA`。\n\n**样例解释 #2：**  \n唯一的一组数据中，字符串为 `APC`，显然能被全部消除，方案也显然。\n\n$1\\leq T\\leq 10$，$1\\leq \\sum |S|\\leq 3\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11139", "type": "P", "difficulty": 3, "samples": [["5\n1 2 10\n2 2 5\n4 2\n3\n4 2", "5\n1"], ["4\n1 1000000000 1000000000\n1 1000000000 1000000000\n1 1000000000 1000000000\n4 1000000000", "3000000000"], ["20\n4 95002957\n2 384405322 255642125\n2 384405322 174926753\n2 384405322 51265222\n1 384405322 311383201\n4 384405322\n1 384405322 5464229\n4 22438767\n4 17075617\n1 384405322 153189933\n1 230228188 148299369\n1 7168162 387115701\n1 384405322 154480360\n1 384405322 438458686\n3\n1 7961090 98996809\n4 153074129\n1 975025351 171484003\n1 384405322 650527951\n4 384405322", "0\n311383201\n0\n0\n0\n650527952"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "线段树", "O2优化", "STL"], "title": "[APC001] D - Array Again", "background": "", "description": "你需要维护一个数列，支持 $4$ 种操作：\n\n1. `1 x y`：连续向数列中插入 $y$ 个数 $x$。\n2. `2 x y`：连续在数列中删除 $y$ 次 $x$。如果在某一次删除中 $x$ 已经不存在于数列中，则忽略此操作。\n3. `3`：对数列进行去重，即，对于每个在数列中出现过的不同的正整数 $x$，如果它在数列中出现了大于 $1$ 次，则只在数列中保留一个 $x$，其余全部删除。\n4. `4 x`：查询数列中 $x$ 的出现次数。\n\n对于每个操作 $4$，请求出其答案。", "inputFormat": "第一行一个整数 $q$，表示询问次数。\n\n接下来 $q$ 行，每行若干个整数，表示一次操作。", "outputFormat": "对于每次操作 $4$ 输出一行，表示其答案。\n\n数据保证至少有一次操作 $4$。", "hint": "### 样例解释 $1$\n\n第 $1$ 次操作：插入 $10$ 个 $2$。\n\n第 $2$ 次操作：删除 $5$ 个 $2$。此后数列中只包含 $5$ 个 $2$。\n\n第 $3$ 次操作：查询 $2$ 的出现次数，共 $5$ 次。\n\n第 $4$ 次操作：对数列进行去重。此后数列中只包含一个 $2$。\n\n第 $5$ 次操作：查询 $2$ 的出现次数，共 $1$ 次。\n\n### 样例解释 $2$\n\n请注意答案可能会超过 `int` 的范围。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le q\\le 10^5$，$1\\le x,y\\le 10^9$。\n\n请注意：由于本题所在比赛没有部分分，故只有通过所有的测试点才可以获得满分，否则会获得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] D - Array Again", "background": "", "description": "你需要维护一个数列，支持 $4$ 种操作：\n\n1. `1 x y`：连续向数列中插入 $y$ 个数 $x$。\n2. `2 x y`：连续在数列中删除 $y$ 次 $x$。如果在某一次删除中 $x$ 已经不存在于数列中，则忽略此操作。\n3. `3`：对数列进行去重，即，对于每个在数列中出现过的不同的正整数 $x$，如果它在数列中出现了大于 $1$ 次，则只在数列中保留一个 $x$，其余全部删除。\n4. `4 x`：查询数列中 $x$ 的出现次数。\n\n对于每个操作 $4$，请求出其答案。", "inputFormat": "第一行一个整数 $q$，表示询问次数。\n\n接下来 $q$ 行，每行若干个整数，表示一次操作。", "outputFormat": "对于每次操作 $4$ 输出一行，表示其答案。\n\n数据保证至少有一次操作 $4$。", "hint": "### 样例解释 $1$\n\n第 $1$ 次操作：插入 $10$ 个 $2$。\n\n第 $2$ 次操作：删除 $5$ 个 $2$。此后数列中只包含 $5$ 个 $2$。\n\n第 $3$ 次操作：查询 $2$ 的出现次数，共 $5$ 次。\n\n第 $4$ 次操作：对数列进行去重。此后数列中只包含一个 $2$。\n\n第 $5$ 次操作：查询 $2$ 的出现次数，共 $1$ 次。\n\n### 样例解释 $2$\n\n请注意答案可能会超过 `int` 的范围。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\le q\\le 10^5$，$1\\le x,y\\le 10^9$。\n\n请注意：由于本题所在比赛没有部分分，故只有通过所有的测试点才可以获得满分，否则会获得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P11140", "type": "P", "difficulty": 4, "samples": [["453", "4"], ["3333", "5"], ["9475739582850286", "9360"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化"], "title": "[APC001] E - Linear Map", "background": "**请注意本题的特殊时间限制，并酌情使用较快的输入输出方式**。\n\n在广阔的 florr 世界中，有一个不为人知的角落，它的建立是为了方便快速测试新 mob，而现在它被废弃了，但没有消失。\n\n冒险者 MF 找到了这里，并发现其名字为：Linear map。", "description": "Linear map 可看作一个字符串，每个字符都是一个 $0\\sim 9$ 的数字。\n\nMF 认为，如果一个字符串存在两段长度均 $>1$ 的不同区间的和相同，那么该字符串是无趣的。\n\n比如，$3421$ 就是无趣的字符串，因为 $3+4=4+2+1$，而 $5023$ 也是无趣的字符串，因为 $5+0=2+3$。相反，$13$ 和 $285$ 都不是无趣的字符串。\n\nMF 打算将 Linear map 划分为若干非空连续且不重复的子段，这些子段包含了整个字符串的所有字符，且满足每个子段都不是无趣的字符串。\n\nMF 是一个有趣的人，于是它想算出划分的方案数，并对 $998244353$ 取模。", "inputFormat": "一行一个字符串 $s$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模后的结果。", "hint": "### 样例解释\n\n- 样例 $\\tt\\#1$\n\t\n所有划分均合法：$\\{453\\},\\{45,3\\},\\{4,53\\},\\{4,5,3\\}$。\n\n- 样例 $\\tt\\#2$\n\t\n合法方案为：$\\{33,33\\},\\{33,3,3\\},\\{3,33,3\\},\\{3,3,33\\},\\{3,3,3,3\\}$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，满足 $1\\le |s|\\le 1.5\\times 10^7$，且 $s$ 中仅包含数字。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] E - Linear Map", "background": "**请注意本题的特殊时间限制，并酌情使用较快的输入输出方式**。\n\n在广阔的 florr 世界中，有一个不为人知的角落，它的建立是为了方便快速测试新 mob，而现在它被废弃了，但没有消失。\n\n冒险者 MF 找到了这里，并发现其名字为：Linear map。", "description": "Linear map 可看作一个字符串，每个字符都是一个 $0\\sim 9$ 的数字。\n\nMF 认为，如果一个字符串存在两段长度均 $>1$ 的不同区间的和相同，那么该字符串是无趣的。\n\n比如，$3421$ 就是无趣的字符串，因为 $3+4=4+2+1$，而 $5023$ 也是无趣的字符串，因为 $5+0=2+3$。相反，$13$ 和 $285$ 都不是无趣的字符串。\n\nMF 打算将 Linear map 划分为若干非空连续且不重复的子段，这些子段包含了整个字符串的所有字符，且满足每个子段都不是无趣的字符串。\n\nMF 是一个有趣的人，于是它想算出划分的方案数，并对 $998244353$ 取模。", "inputFormat": "一行一个字符串 $s$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模后的结果。", "hint": "### 样例解释\n\n- 样例 $\\tt\\#1$\n\t\n所有划分均合法：$\\{453\\},\\{45,3\\},\\{4,53\\},\\{4,5,3\\}$。\n\n- 样例 $\\tt\\#2$\n\t\n合法方案为：$\\{33,33\\},\\{33,3,3\\},\\{3,33,3\\},\\{3,3,33\\},\\{3,3,3,3\\}$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，满足 $1\\le |s|\\le 1.5\\times 10^7$，且 $s$ 中仅包含数字。", "locale": "zh-CN"}}}
{"pid": "P11141", "type": "P", "difficulty": 4, "samples": [["3 1\n1 2\n1 3\n2\n2 6\n2 1", "2\n2"], ["4 1\n2 1\n3 2\n4 3\n3\n2 2\n2 5\n4 2", "1\n1\n2"], ["20 11\n2 8\n16 4\n6 7\n11 8\n10 13\n7 10\n17 7\n15 13\n10 14\n18 19\n1 2\n6 3\n12 1\n1 5\n1 4\n2 3\n9 5\n14 20\n5 18\n15\n9 269\n1 522\n6 327\n13 726\n14 8\n17 2\n18 4\n15 64\n9 5\n13 3\n18 1\n19 664\n5 3\n20 5\n6 4", "2\n2\n2\n2\n2\n3\n2\n2\n2\n3\n5\n2\n2\n3\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[APC001] F - Extend", "background": "~~**本题输入输出量较大，请酌情使用较快的输入输出方式**~~。已扩大时限从 $1s\\to 1.5s$。", "description": "对于一棵有 $n$ 个节点，根为 $k$ 的树，最开始有且仅有一个“可扩展的”节点 $z$，我们有两种扩展形式：\n\n- $\\text{I}$ 类扩展：从一个“可扩展的”节点 $u$ 开始扩展，把 $u$ 的子树中所有节点和所有满足与 $u$ 距离 $\\leq p$ 且是 $u$ 祖先的节点标记为“可扩展的”。\n- $\\text{II}$ 类扩展：从一个“可扩展的”节点 $u$ 开始扩展，把所有与 $u$ 深度相等的节点标记为“可扩展的”。\n\n你需要将所有结点都标记为“可扩展的”，求最小进行扩展的次数。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示存在一条无向边连接 $u,v$。\n\n接下来一行一个整数 $t$，表示询问次数。\n\n接下来 $t$ 行，每行两个整数 $z,p$，意义如上。", "outputFormat": "$t$ 行，对于每次询问：\n\n- 若无法将所有节点都标记为“可扩展的”，输出 `-1`。\n\n- 否则一行一个整数，表示答案。", "hint": "样例 $1$ 解释：两次询问都可以先对 $2$ 节点进行 $\\text{II}$ 类扩展，然后对 $3$ 进行 $\\text{I}$ 类扩展。可以保证对于两次询问，这样操作都是最优的。\n\n对于所有数据，$1\\leq z,k,u,v\\leq n\\leq 10^5,1\\leq t\\leq 2\\times 10^6,0\\leq p\\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] F - Extend", "background": "~~**本题输入输出量较大，请酌情使用较快的输入输出方式**~~。已扩大时限从 $1s\\to 1.5s$。", "description": "对于一棵有 $n$ 个节点，根为 $k$ 的树，最开始有且仅有一个“可扩展的”节点 $z$，我们有两种扩展形式：\n\n- $\\text{I}$ 类扩展：从一个“可扩展的”节点 $u$ 开始扩展，把 $u$ 的子树中所有节点和所有满足与 $u$ 距离 $\\leq p$ 且是 $u$ 祖先的节点标记为“可扩展的”。\n- $\\text{II}$ 类扩展：从一个“可扩展的”节点 $u$ 开始扩展，把所有与 $u$ 深度相等的节点标记为“可扩展的”。\n\n你需要将所有结点都标记为“可扩展的”，求最小进行扩展的次数。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示存在一条无向边连接 $u,v$。\n\n接下来一行一个整数 $t$，表示询问次数。\n\n接下来 $t$ 行，每行两个整数 $z,p$，意义如上。", "outputFormat": "$t$ 行，对于每次询问：\n\n- 若无法将所有节点都标记为“可扩展的”，输出 `-1`。\n\n- 否则一行一个整数，表示答案。", "hint": "样例 $1$ 解释：两次询问都可以先对 $2$ 节点进行 $\\text{II}$ 类扩展，然后对 $3$ 进行 $\\text{I}$ 类扩展。可以保证对于两次询问，这样操作都是最优的。\n\n对于所有数据，$1\\leq z,k,u,v\\leq n\\leq 10^5,1\\leq t\\leq 2\\times 10^6,0\\leq p\\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11142", "type": "P", "difficulty": 6, "samples": [["1\n1 2 2 5 1\n1\n2\n3 4", "6\n2 0\n-1 -1"], ["1\n1 1 1 5 1\n1\n2\n3 4", "0\n1 0\n2 1\n-1 -1"], ["4\n1 1 2 5 1\n1\n2\n3 4\n1 1 4 8 2\n1\n2\n5 8\n2 2 3 9 9\n1 2\n2 1\n3 7\n5\n1 1 2 8 4\n1\n3\n1 2 3", "3\n2 0\n-1 -1\n9\n5 0\n-1 -1\n24\n-3 0\n-1 -1\n4\n-3 0\n-2 1\n-1 -1"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "斜率优化"], "title": "[APC001] Ex - Separation", "background": "", "description": "小 I 有 $n$ 个工厂，坐落在 $A$ 地到 $B$ 地，第 $i$ 个工厂距离 $A$ 地的距离为 $a_i$ 千米。加工厂位于 $B$ 地，距离 $A$ 地 $x$ 千米，小 I 要把这些工厂里的货物运送到 $B$ 地的加工厂。\n\n但是这天下了暴雨，仓库里的货物受潮了，每份货物每在仓库中或小 I 的背包中存放 $1$ 分钟，价值就会减少 $m$ 元钱。已知今天晚上每个工厂会生产出 $b_i$ 份货物，也知道每份货物会在暴雨来临几分钟后生产出来。\n\n小 I 的初始体力为 $c$，速度为每分钟 $1$ 千米，但是他每行走 $1$ 千米就会减少一点体力（当体力为 $0$ 时不允许行走）。每次出发小 I 都要从 $A$ 地前往 $B$ 地，再返回 $A$ 地，他**只**在从 $A$ 地前往 $B$ 地时会带走沿途的工厂的仓库内所有被生产出的货物。他到达 $A$ 地后可以立刻再次出发。特别的，他可以在**负数时间点**出发，假定他的背包是无限大的，且货物重量与体力消耗无关。\n\n小 I 为了亏损更少，制造了一个分身制造器。这个机器可以制造无数个他的分身，但是每一次出发最多只能制造一个分身，制造的分身与本体共用体力，**完全遵循第 $3$ 段所描述的操作**。小 I 需要保证在任何时候，现有体力都能支持每一个分身（包括本体）返回 $A$ 地的家。\n\n小 I 做完准备工作后，发现暴雨已经下了 $k$ 分钟了，他迫切想要知道他最少要亏损（即货物减少的价值）多少元。他不会这个问题，于是他向你求助，想让你给出一种方案。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行一个整数 $t$，表示数据组数。\n\n接下来，对于每组数据：\n\n第一行五个整数 $n,m,x,c,k$。\n\n接下来一行 $n$ 个整数 $a_1\\sim a_n$。\n\n接下来一行 $n$ 个整数 $b_1\\sim b_n$。\n\n接下 $n$ 行，每行 $b_i$ 个整数，表示第 $i$ 个工厂内的货物在第 $t_{i,j}$ 分钟后生产。", "outputFormat": "对于每组数据：\n\n若小 I 不可能将所有货物运送至加工厂并回家，输出一行一个 `-1`。\n\n否则第一行一个整数，表示小 I 最少要亏损多少元。\n\n接下来若干行，每行两个数，对于第 $i$ 行：\n\n- 第一个数表示小 I 第 $i$ 次出发的时间（从他向你求助时计算），必须从小到大输出，时间可以为负。\n\n- 第二个数表示这次出发是否需要制造一个新的分身，如果需要，输出 $1$，否则输出 $0$。\n\n如果存在方案且方案输出完后，输出一行 `-1 -1`，表示方案结束。", "hint": "**【样例解释】**\n\n对于样例 $3$ 的第一组数据解释：\n\n小 I 在暴雨来临后 $1$ 分钟向你求助，你给出的方案是在暴雨来临后 $3$ 分钟，小 I 出门，在 $4$ 分钟到达 $1$ 号仓库，在 $5$ 分钟到达 $B$ 地，在 $7$ 分钟回到家，亏损 $3$ 元。\n\n**【数据范围】**\n\n对于全部数据，保证 $1\\leq t\\leq 10$，$1\\leq n\\leq 2\\times 10^5,1\\leq m,k,x\\leq 10^6$，$1\\le a_i\\le x$，$0\\leq c\\leq 200$，$1\\leq b_i\\leq 10^5$，$\\sum b_i\\leq 2\\times 10^5$，$0\\leq t_{i,j}\\leq 10^6$。\n\n**本题输入量较大，请使用较快的读入方式。**\n\n本题题面已更新，[赛时原题面](https://www.luogu.com.cn/paste/iebvx9ko)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APC001] Ex - Separation", "background": "", "description": "小 I 有 $n$ 个工厂，坐落在 $A$ 地到 $B$ 地，第 $i$ 个工厂距离 $A$ 地的距离为 $a_i$ 千米。加工厂位于 $B$ 地，距离 $A$ 地 $x$ 千米，小 I 要把这些工厂里的货物运送到 $B$ 地的加工厂。\n\n但是这天下了暴雨，仓库里的货物受潮了，每份货物每在仓库中或小 I 的背包中存放 $1$ 分钟，价值就会减少 $m$ 元钱。已知今天晚上每个工厂会生产出 $b_i$ 份货物，也知道每份货物会在暴雨来临几分钟后生产出来。\n\n小 I 的初始体力为 $c$，速度为每分钟 $1$ 千米，但是他每行走 $1$ 千米就会减少一点体力（当体力为 $0$ 时不允许行走）。每次出发小 I 都要从 $A$ 地前往 $B$ 地，再返回 $A$ 地，他**只**在从 $A$ 地前往 $B$ 地时会带走沿途的工厂的仓库内所有被生产出的货物。他到达 $A$ 地后可以立刻再次出发。特别的，他可以在**负数时间点**出发，假定他的背包是无限大的，且货物重量与体力消耗无关。\n\n小 I 为了亏损更少，制造了一个分身制造器。这个机器可以制造无数个他的分身，但是每一次出发最多只能制造一个分身，制造的分身与本体共用体力，**完全遵循第 $3$ 段所描述的操作**。小 I 需要保证在任何时候，现有体力都能支持每一个分身（包括本体）返回 $A$ 地的家。\n\n小 I 做完准备工作后，发现暴雨已经下了 $k$ 分钟了，他迫切想要知道他最少要亏损（即货物减少的价值）多少元。他不会这个问题，于是他向你求助，想让你给出一种方案。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行一个整数 $t$，表示数据组数。\n\n接下来，对于每组数据：\n\n第一行五个整数 $n,m,x,c,k$。\n\n接下来一行 $n$ 个整数 $a_1\\sim a_n$。\n\n接下来一行 $n$ 个整数 $b_1\\sim b_n$。\n\n接下 $n$ 行，每行 $b_i$ 个整数，表示第 $i$ 个工厂内的货物在第 $t_{i,j}$ 分钟后生产。", "outputFormat": "对于每组数据：\n\n若小 I 不可能将所有货物运送至加工厂并回家，输出一行一个 `-1`。\n\n否则第一行一个整数，表示小 I 最少要亏损多少元。\n\n接下来若干行，每行两个数，对于第 $i$ 行：\n\n- 第一个数表示小 I 第 $i$ 次出发的时间（从他向你求助时计算），必须从小到大输出，时间可以为负。\n\n- 第二个数表示这次出发是否需要制造一个新的分身，如果需要，输出 $1$，否则输出 $0$。\n\n如果存在方案且方案输出完后，输出一行 `-1 -1`，表示方案结束。", "hint": "**【样例解释】**\n\n对于样例 $3$ 的第一组数据解释：\n\n小 I 在暴雨来临后 $1$ 分钟向你求助，你给出的方案是在暴雨来临后 $3$ 分钟，小 I 出门，在 $4$ 分钟到达 $1$ 号仓库，在 $5$ 分钟到达 $B$ 地，在 $7$ 分钟回到家，亏损 $3$ 元。\n\n**【数据范围】**\n\n对于全部数据，保证 $1\\leq t\\leq 10$，$1\\leq n\\leq 2\\times 10^5,1\\leq m,k,x\\leq 10^6$，$1\\le a_i\\le x$，$0\\leq c\\leq 200$，$1\\leq b_i\\leq 10^5$，$\\sum b_i\\leq 2\\times 10^5$，$0\\leq t_{i,j}\\leq 10^6$。\n\n**本题输入量较大，请使用较快的读入方式。**\n\n本题题面已更新，[赛时原题面](https://www.luogu.com.cn/paste/iebvx9ko)", "locale": "zh-CN"}}}
