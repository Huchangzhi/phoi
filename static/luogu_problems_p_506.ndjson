{"pid": "P11264", "type": "P", "difficulty": 6, "samples": [["4\n4 4\n-4 4\n-4 -4\n4 -4", "4"], ["3\n3 0\n-3 1\n-3 -1", "9.617692030835672"], ["2\n1 1\n0 1", "-1"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2018", "二分", "Special Judge", "半平面交", "COTS（克罗地亚）"], "title": "[COTS 2018] 逃遁 Bijeg", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D2T2。$\\texttt{10s,1G}$。\n", "description": "\n考虑一个二维笛卡尔坐标系。\n\n劫匪初始时在原点，此外有 $n$ 个警察分布在平面上。\n\n他们的**速率**均为 $v$（一个正实数），且只会沿着一个特定的方向做**匀速直线**运动（每个人运动的方向可能不同）。\n\n劫匪可以任意选定自己逃跑的方向，而警察会选择最优的方式追捕劫匪。当警察和劫匪的位置重合时，劫匪即被逮捕。\n\n试判断：\n\n- 劫匪是否可以成功逃跑，也就是，是否存在一个方向，使得劫匪不被逮捕。\n\n如果无法逃跑，还需要求出劫匪被逮捕时，离原点的欧几里得距离的最大值。\n\n数据保证这 $(n+1)$ 个人的位置两两不同。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，描述警察的位置。\n\n\n数据保证 $(n+1)$ 个人的位置两两不同。", "outputFormat": "\n如果劫匪可以成功逃跑，输出 $-1$。\n\n否则，输出一个实数，表示劫匪被逮捕时距离的最大值。\n\n当且仅当你的答案与标准答案的绝对或相对误差不大于 $10^{-5}$ 时，认为你的答案正确。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdrlttoq.png)\n\n#### 子任务\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^5$，$|x|,|y|\\le 10^3$，所有人的位置均不同。\n\n\n| 子任务编号 | $n\\le $ |  $\\vert x\\vert ,\\vert y\\vert \\le $ |  得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 100 $    |  $10$ | $ 20 $   |  \n| $ 2 $    | $ 3\\, 000 $   |  $100$ | $ 30 $   |  \n| $ 3 $    | $ 10^5$ | $1\\, 000$ |  $ 50 $   |  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COTS 2018] 逃遁 Bijeg", "background": "\n译自 [Izborne Pripreme 2018 (Croatian IOI/CEOI Team Selection)](https://hsin.hr/pripreme2018/) D2T2。$\\texttt{10s,1G}$。\n", "description": "\n考虑一个二维笛卡尔坐标系。\n\n劫匪初始时在原点，此外有 $n$ 个警察分布在平面上。\n\n他们的**速率**均为 $v$（一个正实数），且只会沿着一个特定的方向做**匀速直线**运动（每个人运动的方向可能不同）。\n\n劫匪可以任意选定自己逃跑的方向，而警察会选择最优的方式追捕劫匪。当警察和劫匪的位置重合时，劫匪即被逮捕。\n\n试判断：\n\n- 劫匪是否可以成功逃跑，也就是，是否存在一个方向，使得劫匪不被逮捕。\n\n如果无法逃跑，还需要求出劫匪被逮捕时，离原点的欧几里得距离的最大值。\n\n数据保证这 $(n+1)$ 个人的位置两两不同。\n", "inputFormat": "\n第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，描述警察的位置。\n\n\n数据保证 $(n+1)$ 个人的位置两两不同。", "outputFormat": "\n如果劫匪可以成功逃跑，输出 $-1$。\n\n否则，输出一个实数，表示劫匪被逮捕时距离的最大值。\n\n当且仅当你的答案与标准答案的绝对或相对误差不大于 $10^{-5}$ 时，认为你的答案正确。", "hint": "\n#### 样例解释\n\n样例 $1$ 解释如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fdrlttoq.png)\n\n#### 子任务\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^5$，$|x|,|y|\\le 10^3$，所有人的位置均不同。\n\n\n| 子任务编号 | $n\\le $ |  $\\vert x\\vert ,\\vert y\\vert \\le $ |  得分 |  \n| :--: | :--: | :--: | :--: |  \n| $ 1 $    | $ 100 $    |  $10$ | $ 20 $   |  \n| $ 2 $    | $ 3\\, 000 $   |  $100$ | $ 30 $   |  \n| $ 3 $    | $ 10^5$ | $1\\, 000$ |  $ 50 $   |  \n", "locale": "zh-CN"}}}
{"pid": "P11265", "type": "P", "difficulty": 5, "samples": [["3 3 13148274 0\n87 75 218 205", "0"], ["10 10 1145141919810 0\n1 0 6 4", "2028"], ["200000 1000000 61884 100\n5 3 0 7", "45263464"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "分块", "模板题"], "title": "【模板】静态区间半群查询", "background": "", "description": "给定一个序列 $a_1,a_2,\\cdots,a_n$，其中的每个元素都是一个 $2\\times2$ 的矩阵。你需要处理 $m$ 次查询，每次查询给定一个区间 $[l,r]$，你需要求出 $\\prod_{i=l}^ra_i$，其中 $\\times$ 符号代表 $(\\min,+)$ 矩阵积。\n\n**注意：本题时限极其宽松，主要作正确性测试使用和不准确的效率对比使用。请不要过分滥用本题评测资源。**", "inputFormat": "由于本题数据范围较大，测试点将在程序内生成。如果你不想看这一部分，我们也在题目最后提供了一份可以得到 $10\\%$ 分数的 C++ 代码，可以直接拉到主函数改实现。\n\n第一行四个非负整数 $n,m,sd,b$，代表序列长度，查询数目，你的随机数种子（64 位无符号二进制数），以及查询的随机参数。你需要将 $sd$ 重赋值为对其调用 `splitmix64` 得到的值。\n\n第二行四个非负整数 $kv_{0,0},kv_{0,1},kv_{1,0},kv_{1,1}$。\n\n接下来你需要调用 $n$ 次 `rnd`。设第 $i$ 次 `rnd` 的结果为 $(\\overline{qwrxsytz})_{256}$，则 $a_i=\\begin{pmatrix}z&y\\\\x&w\\end{pmatrix}$。\n\n接下来你需要生成 $m$ 次查询。对于每一次查询，先调用一次 `rnd`。若 $b>0$ 且结果为奇数，你调用一次 `rnd` 并记结果对 $n-b$ 取余的值 $c$，调用一次 `rnd` 并记结果对 $n-c$ 取模的值加一作为询问左端点 $l$，取 $l+c$ 作为询问右端点 $r$；否则，你调用两次 `rnd` 生成两个结果并将其分别对 $n$ 取余，取其中较小的余数加一作为询问左端点 $l$，较大的余数加一作为询问右端点 $r$。\n\n以上提到的两个函数实现如下：\n\n```cpp\nuint64_t splitmix64(uint64_t x) {\n  x += 0x9e3779b97f4a7c15;\n  x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n  x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n  return x ^ (x >> 31);\n}\nuint64_t rnd() {\n  sd ^= sd << 13, sd ^= sd >> 7;\n  return sd ^= sd << 17;\n}\n```", "outputFormat": "设你某次查询得到的矩阵为 $res$，则这次查询的结果视为 $\\sum_{0\\le i,j\\le1}(res_{i,j}\\oplus kv_{i,j})$，其中 $\\oplus$ 代表按位异或。输出所有 $m$ 个结果的异或值。", "hint": "**本题采用捆绑测试。**\n\n|Subtask 编号|$n$|$m$|$b$|分值|时限|\n|-|-|-|-|-|-|\n|0|$10^3$|$10^3$|$0$|$10$|$\\texttt{1s}$|\n|1|$5\\times10^4$|$5\\times10^4$|$0$|$10$|$\\texttt{1s}$|\n|2|$2\\times10^5$|$2\\times10^5$|$0$|$10$|$\\texttt{1s}$|\n|3|$10^6$|$2\\times10^5$|$0$|$10$|$\\texttt{3s}$|\n|4|$2\\times10^5$|$10^6$|$0$|$20$|$\\texttt{3s}$|\n|5|$10^6$|$10^6$|$0$|$10$|$\\texttt{3s}$|\n|6|$10^6$|$10^6$|$n-300$|$10$|$\\texttt{3s}$|\n|7|$10^6$|$10^6$|$n-500$|$10$|$\\texttt{3s}$|\n|8|$10^6$|$10^6$|$n-1000$|$10$|$\\texttt{3s}$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 10^6$，$0\\le b\\le n-1$，$0\\le sd\\le2^{64}-1$，$0\\le kv_{i,j}\\le2\\times10^8$（$0\\le i,j\\le1$）。\n\n---\n\n样例 1 解释：我们有 $a_1=\\begin{pmatrix}202&50\\\\51&238\\end{pmatrix}\n$，$a_2=\n\\begin{pmatrix}167&154\\\\37&25\\end{pmatrix}$，$a_3=\\begin{pmatrix}164&145\\\\208&27\\end{pmatrix}$，三组查询分别是 $[1,3]$，$[1,3]$ 和 $[1,2]$。前两组的答案矩阵均为 $\\begin{pmatrix}251&102\\\\382&232\\end{pmatrix}\n$，而第三组的答案矩阵为 $\\begin{pmatrix}87&75\\\\218&205\\end{pmatrix}\n$。根据题意模拟计算，最终输出为 $0$。\n\n以下是一份可以得到 $10\\%$ 分数的 C++ 代码。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct mat {\n  int a[2][2];\n  mat() {\n    a[0][0] = a[1][1] = 0;\n    a[1][0] = a[0][1] = 0x3f3f3f3f;\n  }\n  mat(int x, int y, int z, int w) {\n    a[0][0] = x, a[0][1] = y, a[1][0] = z, a[1][1] = w;\n  }\n};\nmat mul(const mat& x, const mat& y) {\n  return {min(x.a[0][0] + y.a[0][0], x.a[0][1] + y.a[1][0]),\n          min(x.a[0][0] + y.a[0][1], x.a[0][1] + y.a[1][1]),\n          min(x.a[1][0] + y.a[0][0], x.a[1][1] + y.a[1][0]),\n          min(x.a[1][0] + y.a[0][1], x.a[1][1] + y.a[1][1])};\n}\nstruct random {\n  static uint64_t splitmix64(uint64_t x) {\n    x += 0x9e3779b97f4a7c15;\n    x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n    x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n    return x ^ (x >> 31);\n  }\n  uint64_t rnd() {\n    sd ^= sd << 13, sd ^= sd >> 7;\n    return sd ^= sd << 17;\n  }\n  void init() { cin >> sd >> b, sd = splitmix64(sd); }\n  void genmat(mat& res) {\n    uint64_t val = rnd();\n    for (int i : {0, 1})\n      for (int j : {0, 1}) res.a[i][j] = val >> ((i << 1 | j) << 4) & 0xff;\n  }\n  void genqry(int& l, int& r, int n) {\n    if ((rnd() & 1) && b) {\n      int c = rnd() % (n - b);\n      l = rnd() % (n - c) + 1, r = l + c;\n    } else {\n      l = rnd() % n + 1, r = rnd() % n + 1;\n      if (l > r) swap(l, r);\n    }\n  }\n  uint64_t sd;\n  int b;\n} rnd;\nstruct output {\n  int ans, kv[2][2];\n  void init() {\n    for (int i : {0, 1})\n      for (int j : {0, 1}) cin >> kv[i][j];\n  }\n  void setres(mat res) {\n    int tmp = 0;\n    for (int i : {0, 1})\n      for (int j : {0, 1}) tmp += res.a[i][j] ^ kv[i][j];\n    ans ^= tmp;\n  }\n} out;\nconstexpr int N = 1e6 + 9;\nint n, m, ans;\nmat a[N];\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  cin >> n >> m, rnd.init(), out.init();\n  for (int i = 1; i <= n; ++i) rnd.genmat(a[i]);\n  // 你可以在这里进行你所需要的初始化。\n  for (int l, r; m; --m) {\n    rnd.genqry(l, r, n);\n    out.setres(accumulate(a + l, a + r + 1, mat(), mul));\n    // 你可以把上面这个 accumulate 改成自己的查询函数。\n  }\n  return cout << out.ans << endl, 0;\n}\n```\n\n**注意：观察代码可以发现，你实际上可以以任意顺序调用这 $m$ 次 `setres`。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】静态区间半群查询", "background": "", "description": "给定一个序列 $a_1,a_2,\\cdots,a_n$，其中的每个元素都是一个 $2\\times2$ 的矩阵。你需要处理 $m$ 次查询，每次查询给定一个区间 $[l,r]$，你需要求出 $\\prod_{i=l}^ra_i$，其中 $\\times$ 符号代表 $(\\min,+)$ 矩阵积。\n\n**注意：本题时限极其宽松，主要作正确性测试使用和不准确的效率对比使用。请不要过分滥用本题评测资源。**", "inputFormat": "由于本题数据范围较大，测试点将在程序内生成。如果你不想看这一部分，我们也在题目最后提供了一份可以得到 $10\\%$ 分数的 C++ 代码，可以直接拉到主函数改实现。\n\n第一行四个非负整数 $n,m,sd,b$，代表序列长度，查询数目，你的随机数种子（64 位无符号二进制数），以及查询的随机参数。你需要将 $sd$ 重赋值为对其调用 `splitmix64` 得到的值。\n\n第二行四个非负整数 $kv_{0,0},kv_{0,1},kv_{1,0},kv_{1,1}$。\n\n接下来你需要调用 $n$ 次 `rnd`。设第 $i$ 次 `rnd` 的结果为 $(\\overline{qwrxsytz})_{256}$，则 $a_i=\\begin{pmatrix}z&y\\\\x&w\\end{pmatrix}$。\n\n接下来你需要生成 $m$ 次查询。对于每一次查询，先调用一次 `rnd`。若 $b>0$ 且结果为奇数，你调用一次 `rnd` 并记结果对 $n-b$ 取余的值 $c$，调用一次 `rnd` 并记结果对 $n-c$ 取模的值加一作为询问左端点 $l$，取 $l+c$ 作为询问右端点 $r$；否则，你调用两次 `rnd` 生成两个结果并将其分别对 $n$ 取余，取其中较小的余数加一作为询问左端点 $l$，较大的余数加一作为询问右端点 $r$。\n\n以上提到的两个函数实现如下：\n\n```cpp\nuint64_t splitmix64(uint64_t x) {\n  x += 0x9e3779b97f4a7c15;\n  x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n  x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n  return x ^ (x >> 31);\n}\nuint64_t rnd() {\n  sd ^= sd << 13, sd ^= sd >> 7;\n  return sd ^= sd << 17;\n}\n```", "outputFormat": "设你某次查询得到的矩阵为 $res$，则这次查询的结果视为 $\\sum_{0\\le i,j\\le1}(res_{i,j}\\oplus kv_{i,j})$，其中 $\\oplus$ 代表按位异或。输出所有 $m$ 个结果的异或值。", "hint": "**本题采用捆绑测试。**\n\n|Subtask 编号|$n$|$m$|$b$|分值|时限|\n|-|-|-|-|-|-|\n|0|$10^3$|$10^3$|$0$|$10$|$\\texttt{1s}$|\n|1|$5\\times10^4$|$5\\times10^4$|$0$|$10$|$\\texttt{1s}$|\n|2|$2\\times10^5$|$2\\times10^5$|$0$|$10$|$\\texttt{1s}$|\n|3|$10^6$|$2\\times10^5$|$0$|$10$|$\\texttt{3s}$|\n|4|$2\\times10^5$|$10^6$|$0$|$20$|$\\texttt{3s}$|\n|5|$10^6$|$10^6$|$0$|$10$|$\\texttt{3s}$|\n|6|$10^6$|$10^6$|$n-300$|$10$|$\\texttt{3s}$|\n|7|$10^6$|$10^6$|$n-500$|$10$|$\\texttt{3s}$|\n|8|$10^6$|$10^6$|$n-1000$|$10$|$\\texttt{3s}$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 10^6$，$0\\le b\\le n-1$，$0\\le sd\\le2^{64}-1$，$0\\le kv_{i,j}\\le2\\times10^8$（$0\\le i,j\\le1$）。\n\n---\n\n样例 1 解释：我们有 $a_1=\\begin{pmatrix}202&50\\\\51&238\\end{pmatrix}\n$，$a_2=\n\\begin{pmatrix}167&154\\\\37&25\\end{pmatrix}$，$a_3=\\begin{pmatrix}164&145\\\\208&27\\end{pmatrix}$，三组查询分别是 $[1,3]$，$[1,3]$ 和 $[1,2]$。前两组的答案矩阵均为 $\\begin{pmatrix}251&102\\\\382&232\\end{pmatrix}\n$，而第三组的答案矩阵为 $\\begin{pmatrix}87&75\\\\218&205\\end{pmatrix}\n$。根据题意模拟计算，最终输出为 $0$。\n\n以下是一份可以得到 $10\\%$ 分数的 C++ 代码。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct mat {\n  int a[2][2];\n  mat() {\n    a[0][0] = a[1][1] = 0;\n    a[1][0] = a[0][1] = 0x3f3f3f3f;\n  }\n  mat(int x, int y, int z, int w) {\n    a[0][0] = x, a[0][1] = y, a[1][0] = z, a[1][1] = w;\n  }\n};\nmat mul(const mat& x, const mat& y) {\n  return {min(x.a[0][0] + y.a[0][0], x.a[0][1] + y.a[1][0]),\n          min(x.a[0][0] + y.a[0][1], x.a[0][1] + y.a[1][1]),\n          min(x.a[1][0] + y.a[0][0], x.a[1][1] + y.a[1][0]),\n          min(x.a[1][0] + y.a[0][1], x.a[1][1] + y.a[1][1])};\n}\nstruct random {\n  static uint64_t splitmix64(uint64_t x) {\n    x += 0x9e3779b97f4a7c15;\n    x = (x ^ (x >> 30)) * 0xbf58476d1ce4e5b9;\n    x = (x ^ (x >> 27)) * 0x94d049bb133111eb;\n    return x ^ (x >> 31);\n  }\n  uint64_t rnd() {\n    sd ^= sd << 13, sd ^= sd >> 7;\n    return sd ^= sd << 17;\n  }\n  void init() { cin >> sd >> b, sd = splitmix64(sd); }\n  void genmat(mat& res) {\n    uint64_t val = rnd();\n    for (int i : {0, 1})\n      for (int j : {0, 1}) res.a[i][j] = val >> ((i << 1 | j) << 4) & 0xff;\n  }\n  void genqry(int& l, int& r, int n) {\n    if ((rnd() & 1) && b) {\n      int c = rnd() % (n - b);\n      l = rnd() % (n - c) + 1, r = l + c;\n    } else {\n      l = rnd() % n + 1, r = rnd() % n + 1;\n      if (l > r) swap(l, r);\n    }\n  }\n  uint64_t sd;\n  int b;\n} rnd;\nstruct output {\n  int ans, kv[2][2];\n  void init() {\n    for (int i : {0, 1})\n      for (int j : {0, 1}) cin >> kv[i][j];\n  }\n  void setres(mat res) {\n    int tmp = 0;\n    for (int i : {0, 1})\n      for (int j : {0, 1}) tmp += res.a[i][j] ^ kv[i][j];\n    ans ^= tmp;\n  }\n} out;\nconstexpr int N = 1e6 + 9;\nint n, m, ans;\nmat a[N];\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  cin >> n >> m, rnd.init(), out.init();\n  for (int i = 1; i <= n; ++i) rnd.genmat(a[i]);\n  // 你可以在这里进行你所需要的初始化。\n  for (int l, r; m; --m) {\n    rnd.genqry(l, r, n);\n    out.setres(accumulate(a + l, a + r + 1, mat(), mul));\n    // 你可以把上面这个 accumulate 改成自己的查询函数。\n  }\n  return cout << out.ans << endl, 0;\n}\n```\n\n**注意：观察代码可以发现，你实际上可以以任意顺序调用这 $m$ 次 `setres`。**", "locale": "zh-CN"}}}
{"pid": "P11266", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 4\n2 4 5\n3 4 5 3\n1 4\n0 4 5\n1 4", "3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["可并堆", "模板题"], "title": "【模板】可并堆 2", "background": "感谢 @[Spasmodic](https://www.luogu.com.cn/user/121027) 提供初版数据生成器。\n\n[gen](https://www.luogu.com.cn/paste/4vk36jsp)。", "description": "给定正整数 $n$ 和 $m$ 以及一个长为 $n$ 的整数序列 $a_{1,\\dots,n}$。\n\n你需要维护序列 $a_{1,\\dots,n}$ 以及 $n$ 个集合 $S_{1,\\dots,n}$，初始时 $S_i=\\{i\\}$。\n\n接下来要进行以下四种操作共 $m$ 次，每次操作形如：\n\n- `0 x y`：表示将元素 $y$ 从集合 $S_x$ 中删去。保证此时元素 $y$ 在集合 $S_x$ 中。\n- `1 x`：表示询问 $\\min_{i\\in S_x} a_i$，保证此时集合 $S_x$ 非空。\n- `2 x y`：将集合 $S_y$ 中并入 $S_x$ 并清空集合 $S_y$。保证此时集合 $S_x,S_y$ 均非空，且此次操作后不会再出现涉及集合 $S_y$ 的操作。\n- `3 x y z`：表示将 $a_y$ 赋值为 $z$。保证此时元素 $y$ 在集合 $S_x$ 中，且 $z<a_y$。\n\n不难发现这是一道堆的模板题，所以现在请你完成它。", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $m$ 行每行一个操作如题。", "outputFormat": "对于每个 `1` 操作一行整数（注意不保证依然为正）表示答案。", "hint": "对于 $20\\%$ 的数据，$n=m=10$；\n\n对于 $80\\%$ 的数据，$n=m=10^5$；\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^6$，$1\\le a_i\\le2\\times10^9$，保证任意时刻任意堆中元素绝对值不超过 $10^{15}$（人话：保证每次 `3` 操作最多单点减 $5\\times10^8$）。\n\n---\n\n最后两个点出题人的手写堆和 pbds 的配对堆都跑到了几百毫秒，如果有被卡常的可私。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】可并堆 2", "background": "感谢 @[Spasmodic](https://www.luogu.com.cn/user/121027) 提供初版数据生成器。\n\n[gen](https://www.luogu.com.cn/paste/4vk36jsp)。", "description": "给定正整数 $n$ 和 $m$ 以及一个长为 $n$ 的整数序列 $a_{1,\\dots,n}$。\n\n你需要维护序列 $a_{1,\\dots,n}$ 以及 $n$ 个集合 $S_{1,\\dots,n}$，初始时 $S_i=\\{i\\}$。\n\n接下来要进行以下四种操作共 $m$ 次，每次操作形如：\n\n- `0 x y`：表示将元素 $y$ 从集合 $S_x$ 中删去。保证此时元素 $y$ 在集合 $S_x$ 中。\n- `1 x`：表示询问 $\\min_{i\\in S_x} a_i$，保证此时集合 $S_x$ 非空。\n- `2 x y`：将集合 $S_y$ 中并入 $S_x$ 并清空集合 $S_y$。保证此时集合 $S_x,S_y$ 均非空，且此次操作后不会再出现涉及集合 $S_y$ 的操作。\n- `3 x y z`：表示将 $a_y$ 赋值为 $z$。保证此时元素 $y$ 在集合 $S_x$ 中，且 $z<a_y$。\n\n不难发现这是一道堆的模板题，所以现在请你完成它。", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $m$ 行每行一个操作如题。", "outputFormat": "对于每个 `1` 操作一行整数（注意不保证依然为正）表示答案。", "hint": "对于 $20\\%$ 的数据，$n=m=10$；\n\n对于 $80\\%$ 的数据，$n=m=10^5$；\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^6$，$1\\le a_i\\le2\\times10^9$，保证任意时刻任意堆中元素绝对值不超过 $10^{15}$（人话：保证每次 `3` 操作最多单点减 $5\\times10^8$）。\n\n---\n\n最后两个点出题人的手写堆和 pbds 的配对堆都跑到了几百毫秒，如果有被卡常的可私。", "locale": "zh-CN"}}}
{"pid": "P11267", "type": "P", "difficulty": 4, "samples": [["8 3 2\n10001011\n1 2\n4 3", "5\n10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "O2优化", "梦熊比赛"], "title": "【MX-S5-T1】王国边缘", "background": "原题链接：<https://oier.team/problems/S5A>。\n\n---\n\n> 纷飞白雪零碎了异客的心，在无数的高山外，故人是否还在记忆的流水中，细嗅往年往月的百花？\n> \n> 只是他们在旧地的怀抱中，但有一个人却在海的那一端，潸然泪下……\n> \n> 人都有归属，只是某些人看不到罢了……\n\n**约定记号 $S^c$ 表示字符串 $S$ 循环 $c$ 次拼接而成的字符串。特别地，若 $c = \\infty$，则表示字符串 $S$ 无限循环拼接而成的字符串。**", "description": "异客在一个无限循环的 $\\texttt{01}$ 字符串 $T=S^\\infty$ 上进行着他的旅程，其中 $S$ 的长度为 $n$，$T$ 的第 $i$ 个字符为 $T_i$。\n\n异客的视野有限，只能看到后面 $m$ 个字符。\n\n异客会进行 $q$ 次旅程，每次起点不同，移动次数也不同。\n\n当异客在 $T_i$ 上时：\n\n- 若 $T_{i+1\\dots i+m}$ 中存在 $\\texttt{1}$，则异客下一次会移动到其中最远的一个 $\\texttt{1}$ 上。\n- 否则，异客下一次会移动到下一个字符 $T_{i+1}$ 上。\n\n你需要告诉异客，他会在哪里停下。由于答案会很大，你只需要告诉他对 $10^9+7$ 取模后的结果。\n\n", "inputFormat": "第一行，三个正整数 $n,m,q$。\n\n第二行，一个长度为 $n$ 的 $\\texttt{01}$ 字符串 $S$。\n\n接下来 $q$ 行，每行两个整数 $s, k$，表示起点在 $T_s$，移动 $k$ 次。", "outputFormat": "$q$ 行，每行一个整数，表示停下的位置对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n$T$ 的前 $16$ 位为 $\\texttt{1000101110001011}$。\n\n第一次询问，位置移动为 $1 \\to 2 \\to 5$。\n\n第二次询问，位置移动为 $4 \\to 7 \\to 9 \\to 10$。\n\n**【样例 #2】**\n\n见附件中的 `kingdom/kingdom2.in` 与 `kingdom/kingdom2.ans`。\n\n**【样例 #3】**\n\n见附件中的 `kingdom/kingdom3.in` 与 `kingdom/kingdom3.ans`。\n\n该组样例满足测试点 $5$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `kingdom/kingdom4.in` 与 `kingdom/kingdom4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `kingdom/kingdom5.in` 与 `kingdom/kingdom5.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n \\le 2 \\times 10^{5}$，$1 \\le m \\le 10^{18}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le s \\le 10^{18}$，$0 \\le k \\le 10^{18}$。\n\n|  测试点编号  |    $n \\le$     |  $m \\le$  |    $q \\le$     |  $s \\le$  |    $k \\le$     |    特殊性质    |\n| :----------: | :------------: | :-------: | :------------: | :-------: | :------------: | :------------: |\n|     $1$      | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |      $0$       |       无       |\n|     $2$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $0$       |       无       |\n|  $3\\sim 4$   | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|     $5$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|  $6\\sim 8$   |     $10^2$     |   $ n $   |     $10^2$     |    $n$    |     $10^2$     |       无       |\n|  $9\\sim 10$  | $3\\times 10^3$ |   $ n $   | $3\\times 10^3$ |    $n$    | $3\\times 10^3$ |       无       |\n| $11\\sim 12$  | $2\\times 10^5$ |    $n$    | $2\\times 10^5$ |    $n$    |      $1$       |       无       |\n| $13\\sim 14$  | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $1$       |       无       |\n| $15\\sim 17$  | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     |       无       |\n| $18 \\sim 20$ | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    |       无       |\n\n\n\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T1】王国边缘", "background": "原题链接：<https://oier.team/problems/S5A>。\n\n---\n\n> 纷飞白雪零碎了异客的心，在无数的高山外，故人是否还在记忆的流水中，细嗅往年往月的百花？\n> \n> 只是他们在旧地的怀抱中，但有一个人却在海的那一端，潸然泪下……\n> \n> 人都有归属，只是某些人看不到罢了……\n\n**约定记号 $S^c$ 表示字符串 $S$ 循环 $c$ 次拼接而成的字符串。特别地，若 $c = \\infty$，则表示字符串 $S$ 无限循环拼接而成的字符串。**", "description": "异客在一个无限循环的 $\\texttt{01}$ 字符串 $T=S^\\infty$ 上进行着他的旅程，其中 $S$ 的长度为 $n$，$T$ 的第 $i$ 个字符为 $T_i$。\n\n异客的视野有限，只能看到后面 $m$ 个字符。\n\n异客会进行 $q$ 次旅程，每次起点不同，移动次数也不同。\n\n当异客在 $T_i$ 上时：\n\n- 若 $T_{i+1\\dots i+m}$ 中存在 $\\texttt{1}$，则异客下一次会移动到其中最远的一个 $\\texttt{1}$ 上。\n- 否则，异客下一次会移动到下一个字符 $T_{i+1}$ 上。\n\n你需要告诉异客，他会在哪里停下。由于答案会很大，你只需要告诉他对 $10^9+7$ 取模后的结果。\n\n", "inputFormat": "第一行，三个正整数 $n,m,q$。\n\n第二行，一个长度为 $n$ 的 $\\texttt{01}$ 字符串 $S$。\n\n接下来 $q$ 行，每行两个整数 $s, k$，表示起点在 $T_s$，移动 $k$ 次。", "outputFormat": "$q$ 行，每行一个整数，表示停下的位置对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n$T$ 的前 $16$ 位为 $\\texttt{1000101110001011}$。\n\n第一次询问，位置移动为 $1 \\to 2 \\to 5$。\n\n第二次询问，位置移动为 $4 \\to 7 \\to 9 \\to 10$。\n\n**【样例 #2】**\n\n见附件中的 `kingdom/kingdom2.in` 与 `kingdom/kingdom2.ans`。\n\n**【样例 #3】**\n\n见附件中的 `kingdom/kingdom3.in` 与 `kingdom/kingdom3.ans`。\n\n该组样例满足测试点 $5$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `kingdom/kingdom4.in` 与 `kingdom/kingdom4.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `kingdom/kingdom5.in` 与 `kingdom/kingdom5.ans`。\n\n该组样例满足测试点 $18\\sim 20$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n \\le 2 \\times 10^{5}$，$1 \\le m \\le 10^{18}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le s \\le 10^{18}$，$0 \\le k \\le 10^{18}$。\n\n|  测试点编号  |    $n \\le$     |  $m \\le$  |    $q \\le$     |  $s \\le$  |    $k \\le$     |    特殊性质    |\n| :----------: | :------------: | :-------: | :------------: | :-------: | :------------: | :------------: |\n|     $1$      | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |      $0$       |       无       |\n|     $2$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $0$       |       无       |\n|  $3\\sim 4$   | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|     $5$      | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    | $S$ 为 $\\texttt{0}^n$ 或 $\\texttt{1}^n$ |\n|  $6\\sim 8$   |     $10^2$     |   $ n $   |     $10^2$     |    $n$    |     $10^2$     |       无       |\n|  $9\\sim 10$  | $3\\times 10^3$ |   $ n $   | $3\\times 10^3$ |    $n$    | $3\\times 10^3$ |       无       |\n| $11\\sim 12$  | $2\\times 10^5$ |    $n$    | $2\\times 10^5$ |    $n$    |      $1$       |       无       |\n| $13\\sim 14$  | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |      $1$       |       无       |\n| $15\\sim 17$  | $2\\times 10^5$ |  $10^9$   | $2\\times 10^5$ |  $10^9$   |     $10^9$     |       无       |\n| $18 \\sim 20$ | $2\\times 10^5$ | $10^{18}$ | $2\\times 10^5$ | $10^{18}$ |   $10^{18}$    |       无       |\n\n\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P11268", "type": "P", "difficulty": 5, "samples": [["5 4\n7 5\n4 2\n5 2\n6 4\n6 3\n5 1\n7 4\n5 4\n3 2", "12"], ["3 4\n3 2\n5 1\n5 5\n5 5\n3 3\n4 2\n2 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "梦熊比赛", "反悔贪心"], "title": "【MX-S5-T2】买东西题", "background": "原题链接：<https://oier.team/problems/S5B>。\n\n---\n\n**此题题意与关联的现实生活情景略有不同，请认真阅读题目描述。**", "description": "你要买 $n$ 个物品，第 $i$ 个物品原价 $a_i$ 元，折扣价 $b_i$ 元（保证 $b_i \\le a_i$）。\n\n你还有 $m$ 个满减优惠券，第 $j$ 个优惠券形如**原价**满 $w_j$ 减 $v_j$（保证 $v_j \\le w_j$）。\n\n对于第 $i$ 个物品，你可以选择以下三种购买方式之一：\n\n1. 使用**原价** $a_i$ 购买。\n2. 使用**折扣价** $b_i$ 购买。\n3. 选择**一个未使用过的优惠券** $j$，要求满足 $a_i \\ge w_j$，使用优惠券 $j$，以 $a_i - v_j$ 的价格购买。注意每个优惠券 $j$ 只能被**最多一个** $i$ 使用。\n\n求购买所有物品最少用钱。", "inputFormat": "第一行，两个正整数 $n,m$，表示物品数量和优惠券数量。\n\n接下来 $n$ 行，每行两个正整数 $a_i,b_i$，表示第 $i$ 个物品的原价和折扣价。\n\n接下来 $m$ 行，每行两个正整数 $w_j,v_j$，表示第 $j$ 个优惠券是满 $w_j$ 减 $v_j$ 的。", "outputFormat": "仅一行，一个整数，表示最少用钱。", "hint": "**【样例解释 #1】**\n\n因为满足 $w_2\\le a_1$ 即 $7\\le 7$，所以可以使用原价和第 $2$ 个优惠券购买第 $1$ 个物品，花费 $7-4=3$ 元。\n\n因为满足 $w_4\\le a_2$ 即 $3\\le 4$，所以可以使用原价和第 $4$ 个优惠券购买第 $2$ 个物品，花费 $4-2=2$ 元。\n\n使用折扣价购买第 $3$ 个物品，花费 $2$ 元。\n\n使用原价和第 $3$ 个优惠券购买第 $4$ 个物品，花费 $6-4=2$ 元。\n\n使用折扣价购买第 $5$ 个物品，花费 $3$ 元。\n\n共 $3+2+2+2+3=12$ 元。可以证明这是最少用钱方案。\n\n**【样例解释 #2】**\n\n使用原价和第 $2$ 个优惠券购买第 $1$ 个物品。\n\n使用折扣价购买第 $2$ 个物品。\n\n使用原价和第 $1$ 个优惠券购买第 $3$ 个物品。\n\n共 $0+1+0=1$ 元。\n\n**【样例 #3】**\n\n见附件中的 `buy/buy3.in` 与 `buy/buy3.ans`。\n\n该组样例满足测试点 $3$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `buy/buy4.in` 与 `buy/buy4.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `buy/buy5.in` 与 `buy/buy5.ans`。\n\n该组样例满足测试点 $8$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `buy/buy6.in` 与 `buy/buy6.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n,m \\le 10^6$，$1 \\le a_i,b_i,w_j,v_j \\le 10^9$，$b_i\\le a_i$，$v_j\\le w_j$。\n\n| 测试点编号 |    $n\\le$    |    $m\\le$    | $a_i,w_j\\le$ | 特殊性质 |\n| :--------: | :-------: | :-------: | :-------: | :------: |\n|    $1$     |  $10$  |  $10$  |  $10$  |    无    |\n|    $2$     | $10^5$ | $10^5$ | $10^4$ |    $a_i=b_i$     |\n|    $3$     | $10^5$ | $10^5$ | $10^9$ |    $a_i=b_i$     |\n|    $4$     | $10^5$ | $10^5$ | $10^4$ |    $\\max_j w_j\\le\\min_i a_i$     |\n| $5\\sim 6$  | $10^5$ | $10^5$ | $10^9$ |    $\\max_j w_j\\le\\min_i a_i$     |\n|    $7$     | $10^3$ | $10^3$ | $10^6$ |    无    |\n|    $8$     | $10^3$ | $10^3$ | $10^9$ |    无    |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $10^9$ |    无    |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T2】买东西题", "background": "原题链接：<https://oier.team/problems/S5B>。\n\n---\n\n**此题题意与关联的现实生活情景略有不同，请认真阅读题目描述。**", "description": "你要买 $n$ 个物品，第 $i$ 个物品原价 $a_i$ 元，折扣价 $b_i$ 元（保证 $b_i \\le a_i$）。\n\n你还有 $m$ 个满减优惠券，第 $j$ 个优惠券形如**原价**满 $w_j$ 减 $v_j$（保证 $v_j \\le w_j$）。\n\n对于第 $i$ 个物品，你可以选择以下三种购买方式之一：\n\n1. 使用**原价** $a_i$ 购买。\n2. 使用**折扣价** $b_i$ 购买。\n3. 选择**一个未使用过的优惠券** $j$，要求满足 $a_i \\ge w_j$，使用优惠券 $j$，以 $a_i - v_j$ 的价格购买。注意每个优惠券 $j$ 只能被**最多一个** $i$ 使用。\n\n求购买所有物品最少用钱。", "inputFormat": "第一行，两个正整数 $n,m$，表示物品数量和优惠券数量。\n\n接下来 $n$ 行，每行两个正整数 $a_i,b_i$，表示第 $i$ 个物品的原价和折扣价。\n\n接下来 $m$ 行，每行两个正整数 $w_j,v_j$，表示第 $j$ 个优惠券是满 $w_j$ 减 $v_j$ 的。", "outputFormat": "仅一行，一个整数，表示最少用钱。", "hint": "**【样例解释 #1】**\n\n因为满足 $w_2\\le a_1$ 即 $7\\le 7$，所以可以使用原价和第 $2$ 个优惠券购买第 $1$ 个物品，花费 $7-4=3$ 元。\n\n因为满足 $w_4\\le a_2$ 即 $3\\le 4$，所以可以使用原价和第 $4$ 个优惠券购买第 $2$ 个物品，花费 $4-2=2$ 元。\n\n使用折扣价购买第 $3$ 个物品，花费 $2$ 元。\n\n使用原价和第 $3$ 个优惠券购买第 $4$ 个物品，花费 $6-4=2$ 元。\n\n使用折扣价购买第 $5$ 个物品，花费 $3$ 元。\n\n共 $3+2+2+2+3=12$ 元。可以证明这是最少用钱方案。\n\n**【样例解释 #2】**\n\n使用原价和第 $2$ 个优惠券购买第 $1$ 个物品。\n\n使用折扣价购买第 $2$ 个物品。\n\n使用原价和第 $1$ 个优惠券购买第 $3$ 个物品。\n\n共 $0+1+0=1$ 元。\n\n**【样例 #3】**\n\n见附件中的 `buy/buy3.in` 与 `buy/buy3.ans`。\n\n该组样例满足测试点 $3$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `buy/buy4.in` 与 `buy/buy4.ans`。\n\n该组样例满足测试点 $5\\sim 6$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `buy/buy5.in` 与 `buy/buy5.ans`。\n\n该组样例满足测试点 $8$ 的约束条件。\n\n**【样例 #6】**\n\n见附件中的 `buy/buy6.in` 与 `buy/buy6.ans`。\n\n该组样例满足测试点 $9\\sim 10$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le n,m \\le 10^6$，$1 \\le a_i,b_i,w_j,v_j \\le 10^9$，$b_i\\le a_i$，$v_j\\le w_j$。\n\n| 测试点编号 |    $n\\le$    |    $m\\le$    | $a_i,w_j\\le$ | 特殊性质 |\n| :--------: | :-------: | :-------: | :-------: | :------: |\n|    $1$     |  $10$  |  $10$  |  $10$  |    无    |\n|    $2$     | $10^5$ | $10^5$ | $10^4$ |    $a_i=b_i$     |\n|    $3$     | $10^5$ | $10^5$ | $10^9$ |    $a_i=b_i$     |\n|    $4$     | $10^5$ | $10^5$ | $10^4$ |    $\\max_j w_j\\le\\min_i a_i$     |\n| $5\\sim 6$  | $10^5$ | $10^5$ | $10^9$ |    $\\max_j w_j\\le\\min_i a_i$     |\n|    $7$     | $10^3$ | $10^3$ | $10^6$ |    无    |\n|    $8$     | $10^3$ | $10^3$ | $10^9$ |    无    |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $10^9$ |    无    |", "locale": "zh-CN"}}}
{"pid": "P11269", "type": "P", "difficulty": 6, "samples": [["7\n110121\n120202\n1202\n1121212\n000\n010101110\n0112210112\n", "1 31589928355420248\n1 31587559229276557\n2 177728893\n2 15233797274127957404\n0 13332\n1 4098728445451629840\n1 892964726593242284\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-S5-T3】IMAWANOKIWA (Construction ver.)", "background": "原题链接：<https://oier.team/problems/S5C>。\n\n---\n\n[IMAWANOKIWA - いよわ / 初音ミク](https://www.bilibili.com/video/BV1iE411Y7bf)\n\n> あなたの未来が見たかった。", "description": "给你一个初始长度为 $n$，**只包含** $\\boldsymbol{0, 1, 2}$ 的序列 $a_{1 \\sim n}$，你可以执行以下操作：\n\n- 选择相邻的两个位置 $j$ 和 $j + 1$，删去 $a_j, a_{j + 1}$，并在原位置插入 $\\mathrm{popc}(a_j + a_{j + 1})$，后半部分序列因此向前移动一位。其中，$\\mathrm{popc}(x)$ 表示 $x$ 在二进制表示下 $1$ 的个数。\n\n显然每次操作后序列长度都会减少 $1$，所以执行 $n - 1$ 次操作后，这个序列会恰好剩下一个数。\n\n记在所有可能的 $n-1$ 次操作之后剩下的数的最小值为 $t$，定义一个好的操作序列 $p$ 为一个长度为 $n - 1$ 的正整数序列，其中 $p_i$ 表示第 $i$ 次操作所选择的 $j$（显然 $1 \\le p_i \\le n - i$），且满足按照这个操作序列操作之后剩下的数为 $t$，你需要求出 $t$ 与**字典序最小**的好的操作序列。\n\n**如果你不会求出字典序最小的好的操作序列也可以获得部分分数**，详见【评分方式】。\n\n为了避免输出量过大，你只需要输出字典序最小的好的操作序列按照某种哈希方式得到的哈希值即可，详见【输出格式】。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 仅一行，一个长度为 $n$ 的字符串，其中第 $i$ 个字符表示 $a_i$。", "outputFormat": "对于每组测试数据：\n- 输出一行，两个自然数 $t, \\mathrm{Hash}(p')$，其中\n  - 第一个数表示剩下的数的最小值；\n  - 第二个数表示字典序最小的好的操作序列 $p'$ 的哈希值 $\\mathrm{Hash}(p')$，定义见下。\n  - 如果你输出的**第二个数不正确，也可以获得部分分数**，本题将使用**自定义校验器**做到这一点，详见【评分方式】。\n\n> 令 $B = 13331$，$M = 2^{64}$，我们定义一个正整数序列 $c_{1 \\sim l}$ 的哈希值 $\\mathrm{Hash}(c)$ 为 $\\sum_{i = 1}^l B^{l - i}c_i$ 对 $M$ 取模的结果。\n>\n> 提示：代码实现时可以使用 C++ 的 `unsigned long long` 类型的自然溢出来实现对 $2^{64}$ 取模的效果。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，字典序最小的好的操作序列 $p$ 为 $[1, 3, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 1, 0, 1, 2, 1]\\\\\n[1, 0, 1, 2, 1]\\\\\n[1, 0, 2, 1]\\\\\n[1, 1, 1]\\\\\n[1, 1]\\\\\n[1]\n$$\n\n所以你应输出的哈希值为 $\\mathrm{Hash}([1, 3, 2, 1, 1]) = (1 \\times 13331^4 + 3 \\times 13331^3 + 2 \\times 13331^2 + 1 \\times 13331^1 + 1 \\times 13331^0) \\bmod 2^{64} = 31589928355420248$。\n\n对于第二组数据，字典序最小的好的操作序列 $p$ 为 $[1, 2, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 2, 0, 2, 0, 2]\\\\\n[2, 0, 2, 0, 2]\\\\\n[2, 1, 0, 2]\\\\\n[2, 1, 2]\\\\\n[2, 2]\\\\\n[1]\n$$\n\n**【样例 #2】**\n\n见附件中的 `popc/popc2.in` 与 `popc/popc2.ans`。\n\n该组样例共有十组测试数据，所有测试数据均满足 $n = 10^5$，其中测试数据 $1 \\sim 5$ 满足序列 $a$ 中不存在 $0$，$6 \\sim 10$ 满足序列 $a$ 中不存在 $1$。\n\n**【样例 #3】**\n\n见附件中的 `popc/popc3.in` 与 `popc/popc3.ans`。\n\n该组样例共有四十组测试数据，其中测试数据 $1 \\sim 10$ 满足 $n = 300$，$11 \\sim 20$ 满足 $n = 3000$，$21 \\sim 30$ 满足 $n = 3 \\times 10^4$，$31 \\sim 40$ 满足 $n = 10^5$。\n\n**【评分方式】**\n\n本题将使用**自定义校验器**计算你获得的部分分数。\n\n对于一个测试点，如果你存在数据输出的最小值不正确，那么无法获得该测试点的分数。\n\n对于一个测试点，如果你每组数据输出的最小值正确，但是存在数据求出的字典序最小的好的操作序列的哈希值不正确，那么可以获得该测试点 $25\\%$ 的分数（即 $1$ 分，见【数据范围】）。**注意你仍需输出任意一个 $\\boldsymbol{[0, 2^{64})}$ 内的整数表示你的方案的哈希值。**\n\n对于一个测试点，如果你每组数据输出的最小值正确，且求出的字典序最小的好的操作序列的哈希值正确，那么可以获得该测试点的全部分数。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le T \\le 200$，$2 \\le n \\le 10^5$，序列 $a$ **只包含** $\\boldsymbol{0, 1, 2}$。\n\n| 测试点编号 | $T\\le$ | $n\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $10$ | $10$ | 无 |\n| $4 \\sim 6$ | $10$ | $300$ | 无 |\n| $7 \\sim 9$ | $10$ | $3000$ | 无 |\n| $10 \\sim 12$ | $10$ | $3 \\times 10^4$ | 无 |\n| $13 \\sim 15$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $0$ |\n| $16 \\sim 19$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $1$ |\n| $20 \\sim 21$ | $10$ | $10^5$ | 无 |\n| $22 \\sim 23$ | $50$ | $10^5$ | 无 |\n| $24 \\sim 25$ | $200$ | $10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T3】IMAWANOKIWA (Construction ver.)", "background": "原题链接：<https://oier.team/problems/S5C>。\n\n---\n\n[IMAWANOKIWA - いよわ / 初音ミク](https://www.bilibili.com/video/BV1iE411Y7bf)\n\n> あなたの未来が見たかった。", "description": "给你一个初始长度为 $n$，**只包含** $\\boldsymbol{0, 1, 2}$ 的序列 $a_{1 \\sim n}$，你可以执行以下操作：\n\n- 选择相邻的两个位置 $j$ 和 $j + 1$，删去 $a_j, a_{j + 1}$，并在原位置插入 $\\mathrm{popc}(a_j + a_{j + 1})$，后半部分序列因此向前移动一位。其中，$\\mathrm{popc}(x)$ 表示 $x$ 在二进制表示下 $1$ 的个数。\n\n显然每次操作后序列长度都会减少 $1$，所以执行 $n - 1$ 次操作后，这个序列会恰好剩下一个数。\n\n记在所有可能的 $n-1$ 次操作之后剩下的数的最小值为 $t$，定义一个好的操作序列 $p$ 为一个长度为 $n - 1$ 的正整数序列，其中 $p_i$ 表示第 $i$ 次操作所选择的 $j$（显然 $1 \\le p_i \\le n - i$），且满足按照这个操作序列操作之后剩下的数为 $t$，你需要求出 $t$ 与**字典序最小**的好的操作序列。\n\n**如果你不会求出字典序最小的好的操作序列也可以获得部分分数**，详见【评分方式】。\n\n为了避免输出量过大，你只需要输出字典序最小的好的操作序列按照某种哈希方式得到的哈希值即可，详见【输出格式】。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：\n- 仅一行，一个长度为 $n$ 的字符串，其中第 $i$ 个字符表示 $a_i$。", "outputFormat": "对于每组测试数据：\n- 输出一行，两个自然数 $t, \\mathrm{Hash}(p')$，其中\n  - 第一个数表示剩下的数的最小值；\n  - 第二个数表示字典序最小的好的操作序列 $p'$ 的哈希值 $\\mathrm{Hash}(p')$，定义见下。\n  - 如果你输出的**第二个数不正确，也可以获得部分分数**，本题将使用**自定义校验器**做到这一点，详见【评分方式】。\n\n> 令 $B = 13331$，$M = 2^{64}$，我们定义一个正整数序列 $c_{1 \\sim l}$ 的哈希值 $\\mathrm{Hash}(c)$ 为 $\\sum_{i = 1}^l B^{l - i}c_i$ 对 $M$ 取模的结果。\n>\n> 提示：代码实现时可以使用 C++ 的 `unsigned long long` 类型的自然溢出来实现对 $2^{64}$ 取模的效果。", "hint": "**【样例解释 #1】**\n\n对于第一组数据，字典序最小的好的操作序列 $p$ 为 $[1, 3, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 1, 0, 1, 2, 1]\\\\\n[1, 0, 1, 2, 1]\\\\\n[1, 0, 2, 1]\\\\\n[1, 1, 1]\\\\\n[1, 1]\\\\\n[1]\n$$\n\n所以你应输出的哈希值为 $\\mathrm{Hash}([1, 3, 2, 1, 1]) = (1 \\times 13331^4 + 3 \\times 13331^3 + 2 \\times 13331^2 + 1 \\times 13331^1 + 1 \\times 13331^0) \\bmod 2^{64} = 31589928355420248$。\n\n对于第二组数据，字典序最小的好的操作序列 $p$ 为 $[1, 2, 2, 1, 1]$，按照该操作序列操作时，$a$ 序列的变化过程如下：\n\n$$\n[1, 2, 0, 2, 0, 2]\\\\\n[2, 0, 2, 0, 2]\\\\\n[2, 1, 0, 2]\\\\\n[2, 1, 2]\\\\\n[2, 2]\\\\\n[1]\n$$\n\n**【样例 #2】**\n\n见附件中的 `popc/popc2.in` 与 `popc/popc2.ans`。\n\n该组样例共有十组测试数据，所有测试数据均满足 $n = 10^5$，其中测试数据 $1 \\sim 5$ 满足序列 $a$ 中不存在 $0$，$6 \\sim 10$ 满足序列 $a$ 中不存在 $1$。\n\n**【样例 #3】**\n\n见附件中的 `popc/popc3.in` 与 `popc/popc3.ans`。\n\n该组样例共有四十组测试数据，其中测试数据 $1 \\sim 10$ 满足 $n = 300$，$11 \\sim 20$ 满足 $n = 3000$，$21 \\sim 30$ 满足 $n = 3 \\times 10^4$，$31 \\sim 40$ 满足 $n = 10^5$。\n\n**【评分方式】**\n\n本题将使用**自定义校验器**计算你获得的部分分数。\n\n对于一个测试点，如果你存在数据输出的最小值不正确，那么无法获得该测试点的分数。\n\n对于一个测试点，如果你每组数据输出的最小值正确，但是存在数据求出的字典序最小的好的操作序列的哈希值不正确，那么可以获得该测试点 $25\\%$ 的分数（即 $1$ 分，见【数据范围】）。**注意你仍需输出任意一个 $\\boldsymbol{[0, 2^{64})}$ 内的整数表示你的方案的哈希值。**\n\n对于一个测试点，如果你每组数据输出的最小值正确，且求出的字典序最小的好的操作序列的哈希值正确，那么可以获得该测试点的全部分数。\n\n**【数据范围】**\n\n对于所有测试数据，保证：$1 \\le T \\le 200$，$2 \\le n \\le 10^5$，序列 $a$ **只包含** $\\boldsymbol{0, 1, 2}$。\n\n| 测试点编号 | $T\\le$ | $n\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $10$ | $10$ | 无 |\n| $4 \\sim 6$ | $10$ | $300$ | 无 |\n| $7 \\sim 9$ | $10$ | $3000$ | 无 |\n| $10 \\sim 12$ | $10$ | $3 \\times 10^4$ | 无 |\n| $13 \\sim 15$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $0$ |\n| $16 \\sim 19$ | $10$ | $10^5$ | 序列 $a$ 中不存在 $1$ |\n| $20 \\sim 21$ | $10$ | $10^5$ | 无 |\n| $22 \\sim 23$ | $50$ | $10^5$ | 无 |\n| $24 \\sim 25$ | $200$ | $10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P11270", "type": "P", "difficulty": 7, "samples": [["0\n1 2 6\n(\n()\n())", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "容斥原理", "根号分治", "梦熊比赛"], "title": "【MX-S5-T4】魔法少女们", "background": "原题链接：<https://oier.team/problems/S5D>。\n\n---\n\n> 祈祷着今后的你的人生，永远都有幸福的“魔法”相伴。\n\n**以下是本题所用记号的约定。**\n\n字符串下标均从 $1$ 开始。\n\n$|S|$ 表示字符串 $S$ 的长度。\n\n$S_i$ 表示字符串 $S$ 的第 $i$ 个字符。\n\n记字符串 $S$ 为 $T$ 的前缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_i=T_i$。\n\n记字符串 $S$ 为 $T$ 的后缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_{|S|-i+1}=T_{|T|-i+1}$。\n\n合法括号序列的定义如下：\n\n- 空串是合法括号序列。\n- 若 $A$ 为合法括号序列，则 $(A)$ 为合法括号序列。\n- 若 $A,B$ 为合法括号序列，则 $AB$ 为合法括号序列。", "description": "千和有 $n$ 个**括号序列**，分别是 $S_1,S_2,S_3,\\dots,S_n$。\n\n小黑有 $m$ 个**括号序列**，分别是 $T_1,T_2,T_3,\\dots,T_m$。\n\n对一个括号序列 $A$，$f(A)$ 为满足以下条件的正整数对 $(i,j)$ 对数：\n\n- $i\\in[1,n]$，$j\\in [1,m]$；\n- $S_i$ 是 $A$ 的**前缀**且 $T_j$ 是 $A$ 的**后缀**。\n\n她们想知道对于所有长度为偶数 $k$ 的**合法括号序列** $S$，$f(S)$ 的和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行，一个正整数 $c$，表示测试点编号。特殊地，对样例，$c=0$。\n\n第二行，三个正整数 $n,m,k$，其中 $k$ 为偶数。\n\n接下来 $n$ 行，每行一个字符串 $S_i$。\n\n接下来 $m$ 行，每行一个字符串 $T_j$。", "outputFormat": "仅一行，一个自然数，表示答案对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n长度为 $6$ 的合法括号序列有 `()()()`、`()(())`、`(())()`、`(()())`、`((()))`，分别记作 $S_1,S_2,S_3,S_4,S_5$，答案为 $f(S_1)+f(S_2)+f(S_3)+f(S_4)+f(S_5)=1+1+1+1+0=4$。\n\n**【样例 #2】**\n\n见附件中的 `bracket/bracket2.in` 与 `bracket/bracket2.ans`。\n\n该组样例满足测试点 $1\\sim 2$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `bracket/bracket3.in` 与 `bracket/bracket3.ans`。\n\n该组样例满足测试点 $3\\sim 4$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `bracket/bracket4.in` 与 `bracket/bracket4.ans`。\n\n该组样例满足测试点 $14\\sim 15$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `bracket/bracket5.in` 与 `bracket/bracket5.ans`。\n\n该组样例满足测试点 $20\\sim 21$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证 $1\\leq n,m\\leq 2\\times 10^5$，$1\\leq \\vert S_i\\vert,\\vert T_j\\vert\\leq \\min(k,5\\times 10^5)$，$1\\leq \\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq 10^7$，$2\\leq k\\leq 10^6$，$k$ 为偶数。\n\n| 测试点编号 | $n,m\\leq$      | $\\vert S_i\\vert,\\vert T_j\\vert\\leq$ | $\\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq$ | $k\\leq$       | 特殊性质 |\n| :----------: | :--------------: | :-----------------------------------: | :---------------------------------------------: | :-------------: | :--------: |\n| $1\\sim2$   | $10$           | $10$                                | $100$                                         | $15$          | 无       |\n| $3\\sim4$   | $50$           | $100$                               | $5\\times10^3$                                 | $100$         | 无       |\n| $5\\sim8$   | $250$          | $5\\times10^3$                       | $5\\times10^5$                                 | $5\\times10^3$ | 无       |\n| $9\\sim11$  | $5\\times 10^3$ | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | 无       |\n| $12\\sim13$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | A        |\n| $14\\sim15$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | B        |\n| $16\\sim17$ | $10^5$         | $2\\times10^3$                       | $10^6$                                        | $2\\times10^5$ | C        |\n| $18\\sim19$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | C        |\n| $20\\sim21$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | 无       |\n| $22\\sim23$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | C        |\n| $24\\sim25$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | 无       |\n\n* 特殊性质 A：$k<\\min\\vert S_i\\vert+\\min\\vert T_j\\vert$；\n* 特殊性质 B：保证 $S_i,T_j$ 是合法的括号序列；\n* 特殊性质 C：$k\\geq\\max\\vert S_i\\vert+\\max\\vert T_j\\vert$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-S5-T4】魔法少女们", "background": "原题链接：<https://oier.team/problems/S5D>。\n\n---\n\n> 祈祷着今后的你的人生，永远都有幸福的“魔法”相伴。\n\n**以下是本题所用记号的约定。**\n\n字符串下标均从 $1$ 开始。\n\n$|S|$ 表示字符串 $S$ 的长度。\n\n$S_i$ 表示字符串 $S$ 的第 $i$ 个字符。\n\n记字符串 $S$ 为 $T$ 的前缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_i=T_i$。\n\n记字符串 $S$ 为 $T$ 的后缀，当且仅当：\n\n- $|S|\\leq |T|$，\n- $\\forall i\\in[1,|S|]$，$S_{|S|-i+1}=T_{|T|-i+1}$。\n\n合法括号序列的定义如下：\n\n- 空串是合法括号序列。\n- 若 $A$ 为合法括号序列，则 $(A)$ 为合法括号序列。\n- 若 $A,B$ 为合法括号序列，则 $AB$ 为合法括号序列。", "description": "千和有 $n$ 个**括号序列**，分别是 $S_1,S_2,S_3,\\dots,S_n$。\n\n小黑有 $m$ 个**括号序列**，分别是 $T_1,T_2,T_3,\\dots,T_m$。\n\n对一个括号序列 $A$，$f(A)$ 为满足以下条件的正整数对 $(i,j)$ 对数：\n\n- $i\\in[1,n]$，$j\\in [1,m]$；\n- $S_i$ 是 $A$ 的**前缀**且 $T_j$ 是 $A$ 的**后缀**。\n\n她们想知道对于所有长度为偶数 $k$ 的**合法括号序列** $S$，$f(S)$ 的和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行，一个正整数 $c$，表示测试点编号。特殊地，对样例，$c=0$。\n\n第二行，三个正整数 $n,m,k$，其中 $k$ 为偶数。\n\n接下来 $n$ 行，每行一个字符串 $S_i$。\n\n接下来 $m$ 行，每行一个字符串 $T_j$。", "outputFormat": "仅一行，一个自然数，表示答案对 $10^9+7$ 取模后的值。", "hint": "**【样例解释 #1】**\n\n长度为 $6$ 的合法括号序列有 `()()()`、`()(())`、`(())()`、`(()())`、`((()))`，分别记作 $S_1,S_2,S_3,S_4,S_5$，答案为 $f(S_1)+f(S_2)+f(S_3)+f(S_4)+f(S_5)=1+1+1+1+0=4$。\n\n**【样例 #2】**\n\n见附件中的 `bracket/bracket2.in` 与 `bracket/bracket2.ans`。\n\n该组样例满足测试点 $1\\sim 2$ 的约束条件。\n\n**【样例 #3】**\n\n见附件中的 `bracket/bracket3.in` 与 `bracket/bracket3.ans`。\n\n该组样例满足测试点 $3\\sim 4$ 的约束条件。\n\n**【样例 #4】**\n\n见附件中的 `bracket/bracket4.in` 与 `bracket/bracket4.ans`。\n\n该组样例满足测试点 $14\\sim 15$ 的约束条件。\n\n**【样例 #5】**\n\n见附件中的 `bracket/bracket5.in` 与 `bracket/bracket5.ans`。\n\n该组样例满足测试点 $20\\sim 21$ 的约束条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证 $1\\leq n,m\\leq 2\\times 10^5$，$1\\leq \\vert S_i\\vert,\\vert T_j\\vert\\leq \\min(k,5\\times 10^5)$，$1\\leq \\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq 10^7$，$2\\leq k\\leq 10^6$，$k$ 为偶数。\n\n| 测试点编号 | $n,m\\leq$      | $\\vert S_i\\vert,\\vert T_j\\vert\\leq$ | $\\sum \\vert S_i\\vert,\\sum \\vert T_j\\vert\\leq$ | $k\\leq$       | 特殊性质 |\n| :----------: | :--------------: | :-----------------------------------: | :---------------------------------------------: | :-------------: | :--------: |\n| $1\\sim2$   | $10$           | $10$                                | $100$                                         | $15$          | 无       |\n| $3\\sim4$   | $50$           | $100$                               | $5\\times10^3$                                 | $100$         | 无       |\n| $5\\sim8$   | $250$          | $5\\times10^3$                       | $5\\times10^5$                                 | $5\\times10^3$ | 无       |\n| $9\\sim11$  | $5\\times 10^3$ | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | 无       |\n| $12\\sim13$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | A        |\n| $14\\sim15$ | $5\\times10^4$  | $10^5$                              | $5\\times10^5$                                 | $2\\times10^5$ | B        |\n| $16\\sim17$ | $10^5$         | $2\\times10^3$                       | $10^6$                                        | $2\\times10^5$ | C        |\n| $18\\sim19$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | C        |\n| $20\\sim21$ | $10^5$         | $10^5$                              | $10^6$                                        | $2\\times10^5$ | 无       |\n| $22\\sim23$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | C        |\n| $24\\sim25$ | $2\\times10^5$  | $5\\times 10^5$                      | $10^7$                                        | $10^6$        | 无       |\n\n* 特殊性质 A：$k<\\min\\vert S_i\\vert+\\min\\vert T_j\\vert$；\n* 特殊性质 B：保证 $S_i,T_j$ 是合法的括号序列；\n* 特殊性质 C：$k\\geq\\max\\vert S_i\\vert+\\max\\vert T_j\\vert$。\n\n", "locale": "zh-CN"}}}
{"pid": "P11271", "type": "P", "difficulty": 1, "samples": [["10 5 3 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "「Diligent-OI R1 A」DlgtPattern", "background": "", "description": "现有一个水杯放在一个不透明的盒子中。水杯的底面可以看成一个圆形。盒子可以看成一个长方体，其厚度忽略不计。\n\n现将盒子的底面放在一个平面直角坐标系中，它的四个顶点分别位于 $(0,0)$，$(x,0)$，$(0,y)$ 和 $(x,y)$。\n\n你只知道水杯底面的圆心位于 $(p,q)$。那水杯底面的半径最大可以是多少呢？", "inputFormat": "只输入一行，四个整数 $x,y,p,q$。", "outputFormat": "只输出一个数，水杯底面半径的最大值。", "hint": "#### 样例 #1 解释\n\n水杯半径最大的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gpbwxjuj.png)\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$0<p<x\\le100$，$0<q<y\\le100$。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim 4$ | AB |\n| $5\\sim 6$ | B |\n| $7\\sim 10$ | 无 |\n\n特殊性质 A：$x=y$。\n\n特殊性质 B：$x=2p,y=2q$。即水杯底面的圆心在盒子底面的几何中心。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 A」DlgtPattern", "background": "", "description": "现有一个水杯放在一个不透明的盒子中。水杯的底面可以看成一个圆形。盒子可以看成一个长方体，其厚度忽略不计。\n\n现将盒子的底面放在一个平面直角坐标系中，它的四个顶点分别位于 $(0,0)$，$(x,0)$，$(0,y)$ 和 $(x,y)$。\n\n你只知道水杯底面的圆心位于 $(p,q)$。那水杯底面的半径最大可以是多少呢？", "inputFormat": "只输入一行，四个整数 $x,y,p,q$。", "outputFormat": "只输出一个数，水杯底面半径的最大值。", "hint": "#### 样例 #1 解释\n\n水杯半径最大的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gpbwxjuj.png)\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$0<p<x\\le100$，$0<q<y\\le100$。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim 4$ | AB |\n| $5\\sim 6$ | B |\n| $7\\sim 10$ | 无 |\n\n特殊性质 A：$x=y$。\n\n特殊性质 B：$x=2p,y=2q$。即水杯底面的圆心在盒子底面的几何中心。", "locale": "zh-CN"}}}
{"pid": "P11272", "type": "P", "difficulty": 2, "samples": [["5 4\n0 0 1 0 1\n1 3 2\n2 4 0\n3 5 2\n1 1 1", "1\n1\n0 \n-1"], ["8 3\n1 1 1 1 1 1 1 1\n2 6 2\n5 8 2\n1 8 7", "3\n2\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "前缀和", "洛谷月赛"], "title": "「Diligent-OI R1 B」DlgtArray", "background": "", "description": "现给定一个长为 $n$ 的序列 $a_1\\sim a_n$，其中 $a_i\\in\\{0,1\\}$。\n\n$q$ 次询问，每次给定 $l,r,k$，要你更改一些位置上的数值（只能改为 $0$ 或 $1$）使得 $\\sum\\limits_{i=l}^ra_i=k+\\prod\\limits_{i=l}^ra_i$。也就是说要让 $a_l\\sim a_r$ 的和要恰好等于 $a_l\\sim a_r$ 的乘积再加上 $k$。你需要求出最少的修改次数。如果无解，输出 $-1$。\n\n**请注意每次的更改不会对后续询问产生影响。**", "inputFormat": "第一行输入 $n,q$。\n\n接下来一行 $n$ 个整数 $a_1\\sim a_n$。\n\n接下来 $q$ 行，每行三个整数 $l,r,k$。", "outputFormat": "输出 $q$ 行，每行一个整数表示最少的修改次数。如果无解请输出 `-1`。", "hint": "#### 样例 #1 解释\n\n$a=\\{0,0,1,0,1\\}$。\n\n第一个询问只需将 $a_1$ 或 $a_2$ 改为 $1$。此时和为 $2$，积为 $0$。\n\n第二个询问只需将 $a_3$ 改为 $0$。此时和为 $0$，积为 $0$。\n\n第三个询问不需进行更改，和为 $2$，积为 $0$。\n\n第四个询问，因为只有一个数，所以和与积相等，所以不可能做到。\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$1\\le n,q\\le10^6$，$0\\le k\\le10^6$，$1\\le l\\le r\\le n$，$a_i\\in\\{0,1\\}$。\n\n| Subtask 编号 | $n,q\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | 无 | $10$ |\n| $1$ | $10^3$ | A | $7$ |\n| $2$ | $10^3$ | BC | $7$ |\n| $3$ | $10^3$ | B | $13$ |\n| $4$ | $10^3$ | C | $13$ |\n| $5$ | $10^3$ | 无 | $20$ |\n| $6$ | $10^5$ | B | $9$ |\n| $7$ | $10^5$ | C | $9$ |\n| $8$ | $10^6$ | 无 | $12$ |\n\n特殊性质 A：$k=n$。\n\n特殊性质 B：$\\forall 1\\le i\\le n,a_i=0$。\n\n特殊性质 C：$k=0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 B」DlgtArray", "background": "", "description": "现给定一个长为 $n$ 的序列 $a_1\\sim a_n$，其中 $a_i\\in\\{0,1\\}$。\n\n$q$ 次询问，每次给定 $l,r,k$，要你更改一些位置上的数值（只能改为 $0$ 或 $1$）使得 $\\sum\\limits_{i=l}^ra_i=k+\\prod\\limits_{i=l}^ra_i$。也就是说要让 $a_l\\sim a_r$ 的和要恰好等于 $a_l\\sim a_r$ 的乘积再加上 $k$。你需要求出最少的修改次数。如果无解，输出 $-1$。\n\n**请注意每次的更改不会对后续询问产生影响。**", "inputFormat": "第一行输入 $n,q$。\n\n接下来一行 $n$ 个整数 $a_1\\sim a_n$。\n\n接下来 $q$ 行，每行三个整数 $l,r,k$。", "outputFormat": "输出 $q$ 行，每行一个整数表示最少的修改次数。如果无解请输出 `-1`。", "hint": "#### 样例 #1 解释\n\n$a=\\{0,0,1,0,1\\}$。\n\n第一个询问只需将 $a_1$ 或 $a_2$ 改为 $1$。此时和为 $2$，积为 $0$。\n\n第二个询问只需将 $a_3$ 改为 $0$。此时和为 $0$，积为 $0$。\n\n第三个询问不需进行更改，和为 $2$，积为 $0$。\n\n第四个询问，因为只有一个数，所以和与积相等，所以不可能做到。\n\n#### 数据范围\n\n对于 $100\\%$ 数据，$1\\le n,q\\le10^6$，$0\\le k\\le10^6$，$1\\le l\\le r\\le n$，$a_i\\in\\{0,1\\}$。\n\n| Subtask 编号 | $n,q\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | 无 | $10$ |\n| $1$ | $10^3$ | A | $7$ |\n| $2$ | $10^3$ | BC | $7$ |\n| $3$ | $10^3$ | B | $13$ |\n| $4$ | $10^3$ | C | $13$ |\n| $5$ | $10^3$ | 无 | $20$ |\n| $6$ | $10^5$ | B | $9$ |\n| $7$ | $10^5$ | C | $9$ |\n| $8$ | $10^6$ | 无 | $12$ |\n\n特殊性质 A：$k=n$。\n\n特殊性质 B：$\\forall 1\\le i\\le n,a_i=0$。\n\n特殊性质 C：$k=0$。", "locale": "zh-CN"}}}
{"pid": "P11273", "type": "P", "difficulty": 3, "samples": [["3 1\n1 3 4", "1 1 0"], ["6 2\n1 2 5 6 7 8", "4 3 3 2 1 0"], ["8 10\n1 14 5 14 19 19 8 10", "5 1 4 1 0 0 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "排序", "洛谷月赛"], "title": "「Diligent-OI R1 C」DlgtRank", "background": "", "description": "给你一个长为 $n$ 的序列 $a_1\\sim a_n$。这里定义 $a_i$ 的**排名**为 $a$ 中**严格大于** $a_i$ 的数的个数 $+1$。\n\n现有一些操作来更改 $a$ 中的元素。所有操作之前会事先给你一个常量 $k$。每次操作前，定义 $a_i$ 是**可移动**的，当且仅当**仅将 $a_i$ 的值加上 $k$，其他值不变**后，$a_i$ 的排名不变。否则 $a_i$ 在这次操作是不可移动的。然后这次操作为：将序列中所有可移动的数加上 $k$。\n\n可以证明经过若干次操作后，$a$ 中所有值都会变成可移动的，并且第一次达到这种状态时，后面的操作也会是这种状态。也就是说，无论做多少次操作，$a$ 中每个值为**不可移动**状态的次数是有限的。\n\n现在询问，做足够多次这个操作后，$a$ 中每个值为**不可移动**状态的次数是多少。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n接下来一行，输入 $n$ 个整数 $a_1\\sim a_n$ 表示初始时的 $a$ 数列。", "outputFormat": "输出一行 $n$ 个整数。第 $i$ 个整数表示 $a_i$ 在操作过程中为**不可移动**状态的次数。", "hint": "#### 样例 #1 解释\n\n初始的 $a_1=1,a_2=3,a_3=4$。\n\n操作一次后 $a_1=2,a_2=3,a_3=5$。$a_2$ 不可移动，是因为如果仅将 $a_2$ 加上 $1$，它的排名会由 $2$ 变成 $1$。\n\n操作两次后 $a_1=2,a_2=4,a_3=6$。$a_1$ 不可移动，是因为如果仅将 $a_1$ 加上 $1$，它的排名会由 $3$ 变成 $2$。\n\n操作三次后 $a_1=3,a_2=5,a_3=7$。这次操作所有值都是可移动的了。可以证明再操作任意多次也不会再出现不可移动的状态了。\n\n因此过程中 $a_1$ 有一次不可移动，$a_2$ 有一次不可移动，$a_3$ 没有不可移动的时候。\n\n#### 数据范围与约定\n\n对于 $100\\%$ 数据，$1\\le n\\le2\\times10^5$，$1\\le k,a_i\\le10^9$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $1$ | ABC | $4$ |\n| $1$ | $100$ | C | $14$ |\n| $2$ | $100$ | 无 | $13$ |\n| $3$ | $3000$ | C | $18$ |\n| $4$ | $3000$ | 无 | $16$ |\n| $5$ | $2\\times10^5$ | A | $6$ |\n| $6$ | $2\\times10^5$ | BC | $8$ |\n| $7$ | $2\\times10^5$ | C | $7$ |\n| $8$ | $2\\times10^5$ | 无 | $14$ |\n\n特殊性质 A：所有的 $a_i$ 都相等。\n\n特殊性质 B：对于任意的 $i<n$ 满足 $a_{i+1}=a_i+k$。\n\n特殊性质 C：对于任意的 $i\\neq j$ 满足 $a_i\\neq a_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 C」DlgtRank", "background": "", "description": "给你一个长为 $n$ 的序列 $a_1\\sim a_n$。这里定义 $a_i$ 的**排名**为 $a$ 中**严格大于** $a_i$ 的数的个数 $+1$。\n\n现有一些操作来更改 $a$ 中的元素。所有操作之前会事先给你一个常量 $k$。每次操作前，定义 $a_i$ 是**可移动**的，当且仅当**仅将 $a_i$ 的值加上 $k$，其他值不变**后，$a_i$ 的排名不变。否则 $a_i$ 在这次操作是不可移动的。然后这次操作为：将序列中所有可移动的数加上 $k$。\n\n可以证明经过若干次操作后，$a$ 中所有值都会变成可移动的，并且第一次达到这种状态时，后面的操作也会是这种状态。也就是说，无论做多少次操作，$a$ 中每个值为**不可移动**状态的次数是有限的。\n\n现在询问，做足够多次这个操作后，$a$ 中每个值为**不可移动**状态的次数是多少。", "inputFormat": "第一行输入两个整数 $n,k$。\n\n接下来一行，输入 $n$ 个整数 $a_1\\sim a_n$ 表示初始时的 $a$ 数列。", "outputFormat": "输出一行 $n$ 个整数。第 $i$ 个整数表示 $a_i$ 在操作过程中为**不可移动**状态的次数。", "hint": "#### 样例 #1 解释\n\n初始的 $a_1=1,a_2=3,a_3=4$。\n\n操作一次后 $a_1=2,a_2=3,a_3=5$。$a_2$ 不可移动，是因为如果仅将 $a_2$ 加上 $1$，它的排名会由 $2$ 变成 $1$。\n\n操作两次后 $a_1=2,a_2=4,a_3=6$。$a_1$ 不可移动，是因为如果仅将 $a_1$ 加上 $1$，它的排名会由 $3$ 变成 $2$。\n\n操作三次后 $a_1=3,a_2=5,a_3=7$。这次操作所有值都是可移动的了。可以证明再操作任意多次也不会再出现不可移动的状态了。\n\n因此过程中 $a_1$ 有一次不可移动，$a_2$ 有一次不可移动，$a_3$ 没有不可移动的时候。\n\n#### 数据范围与约定\n\n对于 $100\\%$ 数据，$1\\le n\\le2\\times10^5$，$1\\le k,a_i\\le10^9$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $1$ | ABC | $4$ |\n| $1$ | $100$ | C | $14$ |\n| $2$ | $100$ | 无 | $13$ |\n| $3$ | $3000$ | C | $18$ |\n| $4$ | $3000$ | 无 | $16$ |\n| $5$ | $2\\times10^5$ | A | $6$ |\n| $6$ | $2\\times10^5$ | BC | $8$ |\n| $7$ | $2\\times10^5$ | C | $7$ |\n| $8$ | $2\\times10^5$ | 无 | $14$ |\n\n特殊性质 A：所有的 $a_i$ 都相等。\n\n特殊性质 B：对于任意的 $i<n$ 满足 $a_{i+1}=a_i+k$。\n\n特殊性质 C：对于任意的 $i\\neq j$ 满足 $a_i\\neq a_j$。", "locale": "zh-CN"}}}
{"pid": "P11274", "type": "P", "difficulty": 5, "samples": [["6\n1 1 4 5 1 4\n1 0 0 2 1 1", "4\n1 2 3 4\n9"], ["13\n-1 1 4 -5 -1 -4 1 9 -1 9 -8 -1 0\n1 0 2 1 3 0 0 2 0 0 2 0 1", "5\n1 2 7 8 10 \n19"], ["3\n-1 -1 0\n0 1 2", "0\n\n0"], ["6\n1 1 4 5 1 4\n1 1 1 3 0 1", "2\n4 5\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "Special Judge", "背包 DP", "洛谷月赛"], "title": "「Diligent-OI R1 D」DlgtTemplate", "background": "棋盘是用板子做成的。这题是棋盘的题，所以……", "description": "有一个 $1$ 行 $n$ 个格子的棋盘编号 $1\\sim n$，上面每个格子写着一个得分 $a_i$。\n\n现在你需要**从左到右**依次地选择一些格子，可以不选。有些格子选了之后，会将当前选的最靠前的 $b_i$ 个格子清除为未选格子，但你**不能**回去把这些格子重新选上。特殊地，如果该格子之前的已选格子不到 $b_i$ 个，那么该格子以及该格子以后的格子**不会**被清除为未选格子。\n\n请你找出一种从左到右选择的方案，使得已选格子的得分之和最大。", "inputFormat": "第一行输入 $n$，表示棋盘有 $n$ 个格子。\n\n接下来一行 $n$ 个整数，依次表示第 $1\\sim n$ 个格子的得分 $a_1\\sim a_n$。\n\n接下来一行 $n$ 个非负整数，依次表示第 $1\\sim n$ 个格子的清除个数 $b_1\\sim b_n$。", "outputFormat": "你需要给出具体方案。\n\n第一行输出非负整数 $k$，表示你选了 $k$ 个格子。\n\n第二行 $k$ 个从小到大排列的正整数，表示你从左到右依次选择的格子编号。如果不选格子输出一个空行。\n\n第三行输出 $ans$，表示你的最终答案。\n\nNs6 是很善良的。如果你不会求方案但答案正确，你也能得到测试点 $40\\%$ 的分数。但这种情况下你也需要输出 $k$ 和 $k$ 个从小到大排列的正整数。", "hint": "#### 【样例 #1 解释】\n\n先选择第一个数 $1$，这时虽然 $b_1=1$，但是因为前面没有数，所以不会清除。\n\n再选择第二个数 $1$，这时因为 $b_2=0$，所以不会清除。\n\n再选择第三个数 $4$，这时因为 $b_3=0$，所以不会清除。\n\n再选择第四个数 $5$，这时因为 $b_4=2$，所以选择的第一个数和第二个数会被清除为未选的数。\n\n此时答案 $4+5=9$。方法不唯一。\n\n#### 【数据范围与约定】\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le3000$，$|a_i|\\le10^8$，$0\\le b_i\\le n$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $20$ | 无 | $25$ |\n| $1$ | $500$ | 无 | $20$ |\n| $2$ | $3000$ | $b_i>0$ | $5$ |\n| $3$ | $3000$ | $b_i=0$ | $5$ |\n| $4$ | $3000$ | $a_i=1$ | $15$ |\n| $5$ | $3000$ | 无 | $30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Diligent-OI R1 D」DlgtTemplate", "background": "棋盘是用板子做成的。这题是棋盘的题，所以……", "description": "有一个 $1$ 行 $n$ 个格子的棋盘编号 $1\\sim n$，上面每个格子写着一个得分 $a_i$。\n\n现在你需要**从左到右**依次地选择一些格子，可以不选。有些格子选了之后，会将当前选的最靠前的 $b_i$ 个格子清除为未选格子，但你**不能**回去把这些格子重新选上。特殊地，如果该格子之前的已选格子不到 $b_i$ 个，那么该格子以及该格子以后的格子**不会**被清除为未选格子。\n\n请你找出一种从左到右选择的方案，使得已选格子的得分之和最大。", "inputFormat": "第一行输入 $n$，表示棋盘有 $n$ 个格子。\n\n接下来一行 $n$ 个整数，依次表示第 $1\\sim n$ 个格子的得分 $a_1\\sim a_n$。\n\n接下来一行 $n$ 个非负整数，依次表示第 $1\\sim n$ 个格子的清除个数 $b_1\\sim b_n$。", "outputFormat": "你需要给出具体方案。\n\n第一行输出非负整数 $k$，表示你选了 $k$ 个格子。\n\n第二行 $k$ 个从小到大排列的正整数，表示你从左到右依次选择的格子编号。如果不选格子输出一个空行。\n\n第三行输出 $ans$，表示你的最终答案。\n\nNs6 是很善良的。如果你不会求方案但答案正确，你也能得到测试点 $40\\%$ 的分数。但这种情况下你也需要输出 $k$ 和 $k$ 个从小到大排列的正整数。", "hint": "#### 【样例 #1 解释】\n\n先选择第一个数 $1$，这时虽然 $b_1=1$，但是因为前面没有数，所以不会清除。\n\n再选择第二个数 $1$，这时因为 $b_2=0$，所以不会清除。\n\n再选择第三个数 $4$，这时因为 $b_3=0$，所以不会清除。\n\n再选择第四个数 $5$，这时因为 $b_4=2$，所以选择的第一个数和第二个数会被清除为未选的数。\n\n此时答案 $4+5=9$。方法不唯一。\n\n#### 【数据范围与约定】\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le3000$，$|a_i|\\le10^8$，$0\\le b_i\\le n$。\n\n| Subtask 编号 | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $20$ | 无 | $25$ |\n| $1$ | $500$ | 无 | $20$ |\n| $2$ | $3000$ | $b_i>0$ | $5$ |\n| $3$ | $3000$ | $b_i=0$ | $5$ |\n| $4$ | $3000$ | $a_i=1$ | $15$ |\n| $5$ | $3000$ | 无 | $30$ |", "locale": "zh-CN"}}}
{"pid": "P11275", "type": "P", "difficulty": 2, "samples": [["4\n3 6\n1 4\n2 5\n314652 314652", "6\n4\n7\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "微观戏剧", "background": "$$\n\\begin{array}{cr}\n\\text{不　我不会说　那愚蠢的诅咒}\\\\\n\\text{因为你和我　都不被神明保佑}\\\\\n\\text{跃动着右心而降生的我}\\\\\n\\text{将一切标为}\\overset{\\text{Unaccepted}}{\\text{不接受}}\\\\\n&\\text{——《微观戏剧》}\n\\end{array}\n$$\n\n![](bilibili:BV1DY4y1q7S4)\n\n---\n\n在数不尽层数的世界中，迷失在回忆中的少女，寻找着不知是否存在的「真实」。\n\n决定了起点和终点后，你能帮助泠珞，找出如何最快地追寻她想要知道的真相呢？", "description": "有一个 $10^{100}$ 个结点的无向图，结点从 $1$ 到 $10^{100}$ 编号，每对结点 $u$ 与结点 $v$ 之间都有一条长度为 $\\operatorname{lcm}(u,v)$ 的边连接。$\\operatorname{lcm}(u,v)$ 是指 $u$ 和 $v$ 的最小公倍数，即最小的能被 $u$ 和 $v$ 同时整除的正整数。\n\n有 $q$ 次询问，每次给定 $x,y$，问结点 $x$ 到结点 $y$ 的最短路径长度是多少。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $x,y$。", "outputFormat": "对于每组询问，一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组数据，最优路径是 $3\\to 6$，路径长度为 $\\operatorname{lcm}(3,6)=6$。可以证明**不存在**更短的路径。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le q\\le 2\\times10^5$，$1\\le x,y\\le 1\\times10^{18}$。\n\n| 子任务编号 | 分值 | $q\\le $ | $x,y\\le $ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $2$ | $1$ | $5$ |\n| $2$ | $5$ | $1$ | $3\\times10^3$ |\n| $3$ | $17$ | $100$ | $2\\times10^5$ |\n| $4$ | $29$ | $2\\times10^5$ | $1\\times10^9$ |\n| $5$ | $47$ | $2\\times10^5$ | $1\\times10^{18}$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "微观戏剧", "background": "$$\n\\begin{array}{cr}\n\\text{不　我不会说　那愚蠢的诅咒}\\\\\n\\text{因为你和我　都不被神明保佑}\\\\\n\\text{跃动着右心而降生的我}\\\\\n\\text{将一切标为}\\overset{\\text{Unaccepted}}{\\text{不接受}}\\\\\n&\\text{——《微观戏剧》}\n\\end{array}\n$$\n\n![](bilibili:BV1DY4y1q7S4)\n\n---\n\n在数不尽层数的世界中，迷失在回忆中的少女，寻找着不知是否存在的「真实」。\n\n决定了起点和终点后，你能帮助泠珞，找出如何最快地追寻她想要知道的真相呢？", "description": "有一个 $10^{100}$ 个结点的无向图，结点从 $1$ 到 $10^{100}$ 编号，每对结点 $u$ 与结点 $v$ 之间都有一条长度为 $\\operatorname{lcm}(u,v)$ 的边连接。$\\operatorname{lcm}(u,v)$ 是指 $u$ 和 $v$ 的最小公倍数，即最小的能被 $u$ 和 $v$ 同时整除的正整数。\n\n有 $q$ 次询问，每次给定 $x,y$，问结点 $x$ 到结点 $y$ 的最短路径长度是多少。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $x,y$。", "outputFormat": "对于每组询问，一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组数据，最优路径是 $3\\to 6$，路径长度为 $\\operatorname{lcm}(3,6)=6$。可以证明**不存在**更短的路径。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n对于 $100\\%$ 的数据，$1\\le q\\le 2\\times10^5$，$1\\le x,y\\le 1\\times10^{18}$。\n\n| 子任务编号 | 分值 | $q\\le $ | $x,y\\le $ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $2$ | $1$ | $5$ |\n| $2$ | $5$ | $1$ | $3\\times10^3$ |\n| $3$ | $17$ | $100$ | $2\\times10^5$ |\n| $4$ | $29$ | $2\\times10^5$ | $1\\times10^9$ |\n| $5$ | $47$ | $2\\times10^5$ | $1\\times10^{18}$ |\n", "locale": "zh-CN"}}}
{"pid": "P11276", "type": "P", "difficulty": 4, "samples": [["qwq", "qwqwq"], ["lingyu", "lingyulingyu"], ["aaaaaaabaa", "aaaaaaabaaaaaaabaa"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷原创", "Special Judge", "O2优化", "KMP 算法", "洛谷月赛"], "title": "第一首歌", "background": "$$\n\\begin{array}{cr}\n\\text{在燥热的黑暗中}\\\\\n\\text{折叠陈旧的心}\\\\\n\\text{不禁开始自我怀疑}\\\\\n\\text{布满}\\overset{\\text{Wrong Answer}}{\\text{谬误}}\\text{的曾经}\\\\\n&\\text{——《第一首歌》}\n\\end{array}\n$$\n\n![](bilibili:62989560)\n\n---\n\n那个绝对不能忘却的人，如今还能在回忆中找到些许线索吗？\n\n她的名字，即使只记得一部分，泠珞也想要请你帮忙还原呢。", "description": "给定一个字符串 $s$，请求出一个最短的字符串 $t$，满足 $s$ 是 $t$ 的**最长** border。\n\n称字符串 $s$ 是字符串 $t$ 的 border，当且仅当 $s$ 是满足以下三者皆成立的字符串：\n\n- $s$ 为 $t$ 的前缀。\n- $s$ 为 $t$ 的后缀。\n- $s$ 不为 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "inputFormat": "一行一个只由小写英文字母组成的的字符串 $s$。", "outputFormat": "一行一个只由小写英文字母组成的的字符串 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "hint": "**【样例 #1 解释】**\n\n$t=\\texttt{qwqwq}$ 的最长 border 为 $s=\\texttt{qwq}$，且可以证明**不存在**更小的符合要求的 $t$，所以输出是正确的。\n\n$t=\\texttt{qwqaqwq}$ 符合条件，但是它不是最短的，所以不是可能的输出。\n\n$t=\\texttt{qwqwqwq}$ 不符合条件，因为它的最长 border 为 $\\texttt{qwqwq}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le |s|\\le 1\\times10^6$，$s$ 仅由小写英文字母构成。其中，$|s|$ 表示 $s$ 的长度。 \n\n| 子任务编号 | 分值 | $\\vert s\\vert\\le $ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $17$ | $4$ | 无 |\n| $2$ | $29$ | $3\\times10^3$ | 无 |\n| $3$ | $11$ | $1\\times10^6$ | $s$ 仅由一种字符组成 |\n| $4$ | $43$ | $1\\times10^6$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "第一首歌", "background": "$$\n\\begin{array}{cr}\n\\text{在燥热的黑暗中}\\\\\n\\text{折叠陈旧的心}\\\\\n\\text{不禁开始自我怀疑}\\\\\n\\text{布满}\\overset{\\text{Wrong Answer}}{\\text{谬误}}\\text{的曾经}\\\\\n&\\text{——《第一首歌》}\n\\end{array}\n$$\n\n![](bilibili:62989560)\n\n---\n\n那个绝对不能忘却的人，如今还能在回忆中找到些许线索吗？\n\n她的名字，即使只记得一部分，泠珞也想要请你帮忙还原呢。", "description": "给定一个字符串 $s$，请求出一个最短的字符串 $t$，满足 $s$ 是 $t$ 的**最长** border。\n\n称字符串 $s$ 是字符串 $t$ 的 border，当且仅当 $s$ 是满足以下三者皆成立的字符串：\n\n- $s$ 为 $t$ 的前缀。\n- $s$ 为 $t$ 的后缀。\n- $s$ 不为 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "inputFormat": "一行一个只由小写英文字母组成的的字符串 $s$。", "outputFormat": "一行一个只由小写英文字母组成的的字符串 $t$。\n\n如果有多个可能的最短的 $t$，输出任意一个均可。", "hint": "**【样例 #1 解释】**\n\n$t=\\texttt{qwqwq}$ 的最长 border 为 $s=\\texttt{qwq}$，且可以证明**不存在**更小的符合要求的 $t$，所以输出是正确的。\n\n$t=\\texttt{qwqaqwq}$ 符合条件，但是它不是最短的，所以不是可能的输出。\n\n$t=\\texttt{qwqwqwq}$ 不符合条件，因为它的最长 border 为 $\\texttt{qwqwq}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le |s|\\le 1\\times10^6$，$s$ 仅由小写英文字母构成。其中，$|s|$ 表示 $s$ 的长度。 \n\n| 子任务编号 | 分值 | $\\vert s\\vert\\le $ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $17$ | $4$ | 无 |\n| $2$ | $29$ | $3\\times10^3$ | 无 |\n| $3$ | $11$ | $1\\times10^6$ | $s$ 仅由一种字符组成 |\n| $4$ | $43$ | $1\\times10^6$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P11277", "type": "P", "difficulty": 5, "samples": [["6 8", "3 6 1 4 2 5"], ["3 3", "5 5 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "世界沉睡童话", "background": "$$\n\\begin{array}{cr}\n\\text{时针停在相互拥抱的前一秒}\\\\\n\\text{凝视每件事的空白}\\\\\n\\text{等待缝隙}\\overset{\\text{Memory Limit Exceeded}}{\\text{被缺失章节填满}}\\\\\n\\text{等}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{某个人}}\\text{回来}}\\\\\n&\\text{——《世界沉睡童话》}\n\\end{array}\n$$\n\n![](bilibili:34574689)\n\n---\n\n在不断变化着的世界中，找出彼此的所属。\n\n压缩成一个数的记忆，泠珞又能否还原呢？", "description": "给定正整数 $n$ 和非负整数 $k$，请构造一个正整数序列 $a_1,a_2,\\cdots,a_n$，满足恰有 $k$ 组正整数对 $(i,j)$  $(1\\le i<j\\le n)$，满足 $\\max(a_i,a_j)$ 是 $\\min(a_i,a_j)$ 的倍数。\n\n输入保证有解。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。", "inputFormat": "第一行两个非负整数 $n,k$。输入保证有解。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示你构造的 $a_i$。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。\n\n输出任意一组可行解均可。", "hint": "**【样例 #1 解释】**\n\n符合要求的数对有 $(1,2),(1,3),(2,3),(2,5),(3,4),(3,5),(3,6),(4,5)$ 共 $k=8$ 组。\n\n**【数据范围】**\n\n**本题采用捆绑测试和子任务依赖。**\n\n本题中，**RE 会显示为 UKE，这是正常现象**。\n\n具体地，部分测试点可能属于多个子任务。因此，子任务不会显式地显示出来。以下表格表示了每个测试点属于的子任务情况：\n\n| 测试点编号 | 所属子任务 |\n| :----------: | :----------: |\n| $1,2,4,8$ | $1,2,3,4,5$ |\n| $22$ | $2,3,4,5$ |\n| $43$ | $3,4,5$ |\n| $3,5,6,9\\sim11,15\\sim18$ | $1,2,4,5$ |\n| $7,12\\sim 14,19\\sim 21$ | $1,2,5$ |\n| $23\\sim25,33,39$ | $2,4,5$ |\n| $26\\sim 32,34\\sim 38,40\\sim 42$ | $2,5$ |\n| $44\\sim 54$ | $4,5$ |\n| $55\\sim 100$ | $5$ |\n\n不保证**不存在**某些数据符合它不在的 Subtask 的条件。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2.5\\times10^5$，$0\\le k\\le \\dfrac{n(n-1)}{2}$，本题的数据保证有解。\n\n对于每个子任务，如果你保证了 $a_i\\le 4n$，你将获得 $p_1$ 的分数。如果你保证了 $a_i\\le 3n$，你将获得 $p_2$ 的分数。如果你保证了 $a_i\\le 2n-1$，你将获得 $p_3$ 的分数，即满分。\n\n对于每个子任务，你只有保证了**所有**属于它的测试点都保证了以上的条件，你才能获得对应的分数。\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n因此，您无法直接知道每个子任务的 $p_1,p_2$ 部分分数的获取情况。你可以通过在程序内进行 `assert`（用法：`assert(表达式)`，若表达式为 `0` / `false` 则会 RE）确认自己的通过情况。\n\n| 子任务编号 | $p_1$ | $p_2$ | $p_3$ | $n\\le $ | $k\\le $ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $5$ | $5$ | $\\dfrac{n(n-1)}{2}$ |\n| $2$ | $5$ | $11$ | $17$ | $10^4$ | $\\dfrac{n(n-1)}{2}$ |\n| $3$ | $1$ | $1$ | $2$ | $2.5\\times10^5$ | $0$ |\n| $4$ | $7$ | $13$ | $29$ | $2.5\\times10^5$ | $n-1$ |\n| $5$ | $11$ | $23$ | $47$ | $2.5\\times10^5$ | $\\dfrac{n(n-1)}{2}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "世界沉睡童话", "background": "$$\n\\begin{array}{cr}\n\\text{时针停在相互拥抱的前一秒}\\\\\n\\text{凝视每件事的空白}\\\\\n\\text{等待缝隙}\\overset{\\text{Memory Limit Exceeded}}{\\text{被缺失章节填满}}\\\\\n\\text{等}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{某个人}}\\text{回来}}\\\\\n&\\text{——《世界沉睡童话》}\n\\end{array}\n$$\n\n![](bilibili:34574689)\n\n---\n\n在不断变化着的世界中，找出彼此的所属。\n\n压缩成一个数的记忆，泠珞又能否还原呢？", "description": "给定正整数 $n$ 和非负整数 $k$，请构造一个正整数序列 $a_1,a_2,\\cdots,a_n$，满足恰有 $k$ 组正整数对 $(i,j)$  $(1\\le i<j\\le n)$，满足 $\\max(a_i,a_j)$ 是 $\\min(a_i,a_j)$ 的倍数。\n\n输入保证有解。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。", "inputFormat": "第一行两个非负整数 $n,k$。输入保证有解。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示你构造的 $a_i$。\n\n为了获得满分，你需要保证 $a_i\\le 2n-1$。\n\n输出任意一组可行解均可。", "hint": "**【样例 #1 解释】**\n\n符合要求的数对有 $(1,2),(1,3),(2,3),(2,5),(3,4),(3,5),(3,6),(4,5)$ 共 $k=8$ 组。\n\n**【数据范围】**\n\n**本题采用捆绑测试和子任务依赖。**\n\n本题中，**RE 会显示为 UKE，这是正常现象**。\n\n具体地，部分测试点可能属于多个子任务。因此，子任务不会显式地显示出来。以下表格表示了每个测试点属于的子任务情况：\n\n| 测试点编号 | 所属子任务 |\n| :----------: | :----------: |\n| $1,2,4,8$ | $1,2,3,4,5$ |\n| $22$ | $2,3,4,5$ |\n| $43$ | $3,4,5$ |\n| $3,5,6,9\\sim11,15\\sim18$ | $1,2,4,5$ |\n| $7,12\\sim 14,19\\sim 21$ | $1,2,5$ |\n| $23\\sim25,33,39$ | $2,4,5$ |\n| $26\\sim 32,34\\sim 38,40\\sim 42$ | $2,5$ |\n| $44\\sim 54$ | $4,5$ |\n| $55\\sim 100$ | $5$ |\n\n不保证**不存在**某些数据符合它不在的 Subtask 的条件。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2.5\\times10^5$，$0\\le k\\le \\dfrac{n(n-1)}{2}$，本题的数据保证有解。\n\n对于每个子任务，如果你保证了 $a_i\\le 4n$，你将获得 $p_1$ 的分数。如果你保证了 $a_i\\le 3n$，你将获得 $p_2$ 的分数。如果你保证了 $a_i\\le 2n-1$，你将获得 $p_3$ 的分数，即满分。\n\n对于每个子任务，你只有保证了**所有**属于它的测试点都保证了以上的条件，你才能获得对应的分数。\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n因此，您无法直接知道每个子任务的 $p_1,p_2$ 部分分数的获取情况。你可以通过在程序内进行 `assert`（用法：`assert(表达式)`，若表达式为 `0` / `false` 则会 RE）确认自己的通过情况。\n\n| 子任务编号 | $p_1$ | $p_2$ | $p_3$ | $n\\le $ | $k\\le $ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $5$ | $5$ | $\\dfrac{n(n-1)}{2}$ |\n| $2$ | $5$ | $11$ | $17$ | $10^4$ | $\\dfrac{n(n-1)}{2}$ |\n| $3$ | $1$ | $1$ | $2$ | $2.5\\times10^5$ | $0$ |\n| $4$ | $7$ | $13$ | $29$ | $2.5\\times10^5$ | $n-1$ |\n| $5$ | $11$ | $23$ | $47$ | $2.5\\times10^5$ | $\\dfrac{n(n-1)}{2}$ |", "locale": "zh-CN"}}}
{"pid": "P11278", "type": "P", "difficulty": 7, "samples": [["6 6\n3 6 1 4 2 5\n2 2 5\n3 1 4\n1 5 5\n2 1 6\n1 1 3\n3 5 6\n", "1\n14\n6\n8"], ["10 10\n1234567890 130113 3614258193 1000000007 3146527164 3141592653 2147483648 998244353 2346886432 20151114\n2 1 10\n3 5 8\n1 2 9\n3 1 4\n1 5 8\n1 3 10\n2 1 9\n3 1 8\n1 1 4\n2 8 8", "2499610911\n9433847818\n4602641167\n4258698016\n17656837678\n704481058"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n2 1 10\n3 1 4\n2 2 5\n3 1 8\n3 1 4\n2 5 6\n2 8 9\n3 3 7\n3 1 10\n2 1 5", "29\n85\n32\n112\n85\n13\n6\n59\n137\n4"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 1 10\n2 1 4\n1 2 5\n2 1 8\n2 1 4\n2 5 6\n2 8 9\n1 3 7\n1 1 10\n2 1 5", "12\n21\n22\n14\n5\n9"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 5 5\n3 1 4\n2 2 5\n3 1 8\n1 9 9\n2 5 6\n1 9 9\n3 3 7\n3 1 10\n2 1 5", "85\n39\n109\n10\n56\n133\n3"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 1 10\n3 1 4\n2 2 5\n3 1 8\n1 1 10\n2 5 6\n1 1 10\n3 3 7\n3 1 10\n2 1 5", "112\n52\n139\n14\n76\n179\n7"], ["10 10\n36 14 35 0 13 0 11 3 5 20\n1 3 8\n1 1 6\n1 2 10\n3 1 4\n2 2 5\n3 1 8\n2 5 6\n3 3 7\n3 1 10\n2 1 5", "119\n61\n139\n8\n73\n176\n15"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "位运算"], "title": "绝世丑角", "background": "$$\n\\begin{array}{cr}\n\\text{我好恨　恨这固执到厚颜无耻的人}\\\\\n\\text{竟和曾经快乐的我同个模样}\\\\\n\\text{即使信仰和记忆都}\\overset{\\text{Runtime Error}}{\\text{遍体鳞伤}}\\\\\n\\text{仍在深渊妄想得到}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{你}}\\text{的回望}}\\\\\n&\\text{——《绝世丑角》}\n\\end{array}\n$$\n\n![](bilibili:BV12i4y1976j)\n\n---\n\n在被修改的、破碎不堪的回忆中取出仅有的连续片段。\n\n泠珞还是想知道，能否从中提取出，有意义的回忆呢。", "description": "对于两个非负整数 $a,b$，定义它们的 Nim 积为 $a\\otimes b=\\operatorname{mex}(\\{(a\\otimes d)\\oplus(c\\otimes b)\\oplus (c\\otimes d)|0\\le c<a,0\\le d<b\\})$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的二进制异或和，$\\operatorname{mex}(S)$ 表示**不存在**于 $S$ 中的最小的非负整数。\n\n给定一个长度为 $n$ 的非负整数序列 $a_1,a_2,\\cdots,a_n$，给定 $q$ 次操作，每次操作有三个参数 $(t,\\ell,r)$。\n\n- 若 $t=1$，表示对于 $i=\\ell,\\ell+1,\\cdots,r$，令 $a_i\\gets a_i\\otimes a_i$。\n- 若 $t=2$，表示查询 $a_\\ell\\oplus a_{\\ell+1}\\oplus\\cdots\\oplus a_r$。\n- 若 $t=3$，表示查询 $a_\\ell+ a_{\\ell+1}+\\cdots+ a_r$。\n\n你需要输出每次查询的结果。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个表示 $a_i$。\n\n接下来 $q$ 行，每行三个正整数 $t,\\ell,r$ 表示当前操作的参数。", "outputFormat": "对于每次查询操作，输出一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n第一次操作是查询，输出 $6\\oplus 1\\oplus 4\\oplus 2=1$。\n\n第二次操作是查询，输出 $3+6+1+4=14$。\n\n第三次操作是修改，序列变为 $[3,6,1,4,3,5]$。\n\n第四次操作是查询，输出 $3\\oplus6\\oplus1\\oplus4\\oplus3\\oplus5=6$。\n\n第五次操作是修改，序列变为 $[2,5,1,4,3,5]$。\n\n第六次操作是查询，输出 $3+5=8$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le2.5\\times10^5$，$0\\le a_i<2^{32}$，$1\\le q\\le 1\\times10^5$，$1\\le t\\le 3$，$1\\le \\ell\\le r\\le n$。保证最后一次操作是查询操作。\n\n| 子任务编号 | 分值 | $n\\le $ | $q\\le $ | $a_i<$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 1$ |\n| $2$ | $11$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=r$ |\n| $3$ | $19$ | $2.5\\times10^5$ | $1\\times10^5$ | $64$ | 无|\n| $4$ | $13$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | $t\\neq 3$ |\n| $5$ | $17$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 3$ |\n| $6$ | $7$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=1,r=n$ |\n| $7$ | $23$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 所有 $t=1$ 的操作在 $t\\neq 1$ 前 |\n| $8$ | $3$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | 无 |\n| $9$ | $5$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "绝世丑角", "background": "$$\n\\begin{array}{cr}\n\\text{我好恨　恨这固执到厚颜无耻的人}\\\\\n\\text{竟和曾经快乐的我同个模样}\\\\\n\\text{即使信仰和记忆都}\\overset{\\text{Runtime Error}}{\\text{遍体鳞伤}}\\\\\n\\text{仍在深渊妄想得到}\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{你}}\\text{的回望}}\\\\\n&\\text{——《绝世丑角》}\n\\end{array}\n$$\n\n![](bilibili:BV12i4y1976j)\n\n---\n\n在被修改的、破碎不堪的回忆中取出仅有的连续片段。\n\n泠珞还是想知道，能否从中提取出，有意义的回忆呢。", "description": "对于两个非负整数 $a,b$，定义它们的 Nim 积为 $a\\otimes b=\\operatorname{mex}(\\{(a\\otimes d)\\oplus(c\\otimes b)\\oplus (c\\otimes d)|0\\le c<a,0\\le d<b\\})$，其中 $x\\oplus y$ 表示 $x$ 与 $y$ 的二进制异或和，$\\operatorname{mex}(S)$ 表示**不存在**于 $S$ 中的最小的非负整数。\n\n给定一个长度为 $n$ 的非负整数序列 $a_1,a_2,\\cdots,a_n$，给定 $q$ 次操作，每次操作有三个参数 $(t,\\ell,r)$。\n\n- 若 $t=1$，表示对于 $i=\\ell,\\ell+1,\\cdots,r$，令 $a_i\\gets a_i\\otimes a_i$。\n- 若 $t=2$，表示查询 $a_\\ell\\oplus a_{\\ell+1}\\oplus\\cdots\\oplus a_r$。\n- 若 $t=3$，表示查询 $a_\\ell+ a_{\\ell+1}+\\cdots+ a_r$。\n\n你需要输出每次查询的结果。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个表示 $a_i$。\n\n接下来 $q$ 行，每行三个正整数 $t,\\ell,r$ 表示当前操作的参数。", "outputFormat": "对于每次查询操作，输出一行一个非负整数表示答案。", "hint": "**【样例 #1 解释】**\n\n第一次操作是查询，输出 $6\\oplus 1\\oplus 4\\oplus 2=1$。\n\n第二次操作是查询，输出 $3+6+1+4=14$。\n\n第三次操作是修改，序列变为 $[3,6,1,4,3,5]$。\n\n第四次操作是查询，输出 $3\\oplus6\\oplus1\\oplus4\\oplus3\\oplus5=6$。\n\n第五次操作是修改，序列变为 $[2,5,1,4,3,5]$。\n\n第六次操作是查询，输出 $3+5=8$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le2.5\\times10^5$，$0\\le a_i<2^{32}$，$1\\le q\\le 1\\times10^5$，$1\\le t\\le 3$，$1\\le \\ell\\le r\\le n$。保证最后一次操作是查询操作。\n\n| 子任务编号 | 分值 | $n\\le $ | $q\\le $ | $a_i<$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 1$ |\n| $2$ | $11$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=r$ |\n| $3$ | $19$ | $2.5\\times10^5$ | $1\\times10^5$ | $64$ | 无|\n| $4$ | $13$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | $t\\neq 3$ |\n| $5$ | $17$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | $t\\neq 3$ |\n| $6$ | $7$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 若 $t=1$，则 $\\ell=1,r=n$ |\n| $7$ | $23$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 所有 $t=1$ 的操作在 $t\\neq 1$ 前 |\n| $8$ | $3$ | $1\\times10^5$ | $3\\times10^4$ | $2^{32}$ | 无 |\n| $9$ | $5$ | $2.5\\times10^5$ | $1\\times10^5$ | $2^{32}$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P11279", "type": "P", "difficulty": 2, "samples": [["9\ncbbccxxxx", "godfather"], ["26\nabcdefghijklmnopqrstuvwxyz", "abcdefghijklmnopqrstuvwxyz"], ["28\naabcdefghijklmnopqrstuvwxyzz", "cybcdefghijklmnopqrstuvwxycy"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "「GFOI Round 2」Abstract String Basic", "background": "**[English statement](https://www.luogu.com.cn/problem/T533480). You must submit your code at the Chinese version of the statement.**", "description": "Charlie 正在上一门叫做《抽象字符串基础》的课。\n\n> **定义 3.1：** 对于两个长度相同的小写字母串 $S$ 和 $T$，定义它们的**相似度**为它们相同的对应位置个数。形式化地，设 $|S|=|T|=n$，则 $S$ 和 $T$ 的相似度 $\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i=j][S_i=T_j]$。  \n>\n> **引理 3.1：** 对于任意小写字母串 $S$，存在唯一的小写字母串 $T$，使得 $\\psi(S,T)$ 最大化。  \n>\n> **引理 3.1 的证明：**……\n\nCharlie 逐渐开始神游，在纸上写写画画。忽然，他想到定义 $S$ 和 $T$ 的**不相似度**为有几对不同位置上的字符不同，即 $\\tilde\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i\\neq j][S_i\\neq T_j]$。这个清奇的定义让 Charlie 一下子清醒了，他想到，什么样的小写字母串 $T$ 能够最大化 $S$ 和 $T$ 的**不相似度**呢？\n\n注：$[x]$ 的方括号为艾弗森括号，其定义为：若条件表达式 $x$ 为真则 $[x]$ 取值为 $1$，否则 $[x]$ 取值为 $0$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含一个长度为 $n$ 的字符串 $S$，保证 $S$ 中仅含小写字母。", "outputFormat": "输出一行小写字母字符串 $T$，表示你的答案。你需要使得 $S$ 与 $T$ 的**不相似度**最大化。如果有多种答案，输出任意一种均可。", "hint": "#### 【样例解释 #1】\n\n当 $T=\\texttt{godfather}$ 时，$\\tilde\\psi(S,T)=72$，取到最大值。注意答案可能不止一种。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n|子任务编号  |$n\\le$  |特殊性质|分值|\n| :-----------: | :-----------: |:----:|:----:|\n|$0$  |$28$  | 是样例 | $0$ |\n|$1$  |$4$  | 无 |$20$  |\n|$2$  |$10^6$  | $S$ 中不包含字符 `z` |$20$  |\n|$3$  |$10^3$  | 无 |$20$  |\n|$4$  |$10^6$  | 无 |$40$  |\n\n对于所有数据，满足：\n\n- $1 \\leq n \\leq 10^6$；\n- $S$ 中仅包含小写字母。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Abstract String Basic", "background": "", "description": "Charlie is taking a course called *Basics of Abstract Strings*. \n\n> **Definition 3.1:** For two lowercase strings $S$ and $T$ of the same length, their **similarity** is defined as the number of matching characters in corresponding positions. Formally, if $|S| = |T| = n$, then the similarity between $S$ and $T$ is given by $\\psi(S, T) = \\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^n [i = j][S_i = T_j]$.\n> \n> **Lemma 3.1:** For any lowercase string $S$, there exists a unique lowercase string $T$ that maximizes $\\psi(S, T)$.  \n> \n> **Proof of Lemma 3.1:** ...\n\nCharlie’s mind begins to wander, and he starts scribbling aimlessly on his paper. Suddenly, he comes up with a new idea: what if he defines the **dissimilarity** between $S$ and $T$ as the number of pairs where both the position and the character are different? Formally, this similarity can be defined as $\\tilde{\\psi}(S, T) = \\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^n [i \\neq j][S_i \\neq T_j]$. This whimsical definition snaps Charlie out of his daydream. Now, he wonders: what kind of lowercase string $T$ would maximize the dissimilarity between $S$ and $T$?\n\n**Note:** The square brackets $[x]$ represent Iverson brackets, which evaluate to $1$ if the condition $x$ is true, and $0$ otherwise.", "inputFormat": "The first line contains a positive integer $n$.  \n\nThe second line contains a string $S$ of length $n$, consisting only of lowercase letters.", "outputFormat": "Output a single line containing a lowercase string $T$, representing your answer. You need to maximize the **dissimilarity** between $S$ and $T$. If there are multiple answers, output any.", "hint": "#### Sample $1$ Explanation\n\nWhen $T = \\texttt{godfather}$, $\\tilde{\\psi}(S, T) = 72$, reaching the maximum value. Note that there may be more than one valid answer.\n\n#### Subtasks and Constraints\n\n| Subtask ID |$n\\le$  | Special Properties | Score |\n| :-----------: | :-----------: |:----:|:----:|\n|$0$  |$28$  | Tests are samples | $0$ |\n|$1$  |$4$  | No |$20$  |\n|$2$  |$10^6$  | $S$ doesn't contain the character `z` |$20$  |\n|$3$  |$10^3$  | No |$20$  |\n|$4$  |$10^6$  | No |$40$  |\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le n \\le 10^6$;\n- $S$ consists only of lowercase letters.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Abstract String Basic", "background": "**[English statement](https://www.luogu.com.cn/problem/T533480). You must submit your code at the Chinese version of the statement.**", "description": "Charlie 正在上一门叫做《抽象字符串基础》的课。\n\n> **定义 3.1：** 对于两个长度相同的小写字母串 $S$ 和 $T$，定义它们的**相似度**为它们相同的对应位置个数。形式化地，设 $|S|=|T|=n$，则 $S$ 和 $T$ 的相似度 $\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i=j][S_i=T_j]$。  \n>\n> **引理 3.1：** 对于任意小写字母串 $S$，存在唯一的小写字母串 $T$，使得 $\\psi(S,T)$ 最大化。  \n>\n> **引理 3.1 的证明：**……\n\nCharlie 逐渐开始神游，在纸上写写画画。忽然，他想到定义 $S$ 和 $T$ 的**不相似度**为有几对不同位置上的字符不同，即 $\\tilde\\psi(S,T)=\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^n[i\\neq j][S_i\\neq T_j]$。这个清奇的定义让 Charlie 一下子清醒了，他想到，什么样的小写字母串 $T$ 能够最大化 $S$ 和 $T$ 的**不相似度**呢？\n\n注：$[x]$ 的方括号为艾弗森括号，其定义为：若条件表达式 $x$ 为真则 $[x]$ 取值为 $1$，否则 $[x]$ 取值为 $0$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含一个长度为 $n$ 的字符串 $S$，保证 $S$ 中仅含小写字母。", "outputFormat": "输出一行小写字母字符串 $T$，表示你的答案。你需要使得 $S$ 与 $T$ 的**不相似度**最大化。如果有多种答案，输出任意一种均可。", "hint": "#### 【样例解释 #1】\n\n当 $T=\\texttt{godfather}$ 时，$\\tilde\\psi(S,T)=72$，取到最大值。注意答案可能不止一种。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n|子任务编号  |$n\\le$  |特殊性质|分值|\n| :-----------: | :-----------: |:----:|:----:|\n|$0$  |$28$  | 是样例 | $0$ |\n|$1$  |$4$  | 无 |$20$  |\n|$2$  |$10^6$  | $S$ 中不包含字符 `z` |$20$  |\n|$3$  |$10^3$  | 无 |$20$  |\n|$4$  |$10^6$  | 无 |$40$  |\n\n对于所有数据，满足：\n\n- $1 \\leq n \\leq 10^6$；\n- $S$ 中仅包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P11280", "type": "P", "difficulty": 3, "samples": [["5 4 3\n4 3\n3 2\n1 5\n1 2\n2\n1 2\n5 4", "I'm here!\nJom\nJom"], ["5 5 4\n1 4\n4 3\n3 2\n4 5\n5 3\n2\n3 1\n5 1", "I'm here!\nTerry\nTerry"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "图遍历", "最短路", "洛谷月赛"], "title": "「GFOI Round 2」Jom & Terry", "background": "我在做 [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)……\n\n你说得对，但是：\n> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.\n> \n> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.\n>\n> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.", "description": "Terry 和 Jom 在一个 $n$ 个点 $m$ 条边的有“根”无向连通图上博弈（图的根为 $r$），遵循以下规则：\n\n- Terry 先手；\n- 两人轮流在图上移动，每次只能走一条边（也可以睡觉，啥都不干）；\n- Terry 不能走到 Jom 所在的结点（我们认为只有 Terry 自投罗网时才会被抓到，即如果 Terry 先移动到结点 $u$ 后 Jom 在同一回合也移动到 $u$ 是合法的）。\n\n给定 $q$ 次询问，每次询问给定 Terry 和 Jom 的起点 $a, b$，你需要回答 Terry 能否到达根（即点 $r$）。", "inputFormat": "第一行包含三个整数 $n, m, r$，表示点数、边数和根的编号；\n\n接下来 $m$ 行，每行包含两个整数 $(u, v)$ 表示一条边（注意可能存在重边或自环）；\n\n接下来一行包含一个整数 $q$，表示询问数；\n\n接下来 $q$ 行，每行包含两个整数 $a, b$，表示 Terry 和 Jom 的起点。", "outputFormat": "因为这是签到题，所以你应该在开头输出 `I'm here!`。\n\n接下来 $q$ 行的第 $i$ 行，如果在第 $i$ 次询问中 Terry 能到达根就输出 `Terry`，否则输出 `Jom`。", "hint": "#### 【提示】\n\n本题 IO 量较大，请选手使用较快的读入输出方式。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n, m, q \\le$ |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--------: |\n|    $0$     |       $10^6$       | A |    $1$     |\n|    $1$     |     $10$      |        无        |    $9$     |\n|    $2$     |       $10^6$       |  B  |    $15$    |\n|    $3$     |       $10^6$       | C |    $15$    |\n|    $4$     |       $10^6$       |        无        |    $60$    |\n\n- 特殊性质 A：$q = 0$。\n- 特殊性质 B：保证图是一条链。\n- 特殊性质 C：保证图是一个菊花。\n\n对于所有数据，满足：\n\n- $1 \\le n, m \\le 10^6$；\n- $0 \\le q \\le 10^6$；\n- $1 \\le r, u, v, a, b \\le n$；\n- 给定的图是一个无向连通图。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Jom & Terry", "background": "I am solving [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)......\n\nYou are right, but:\n\n> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.\n> \n> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.\n>\n> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.", "description": "Terry and Jom are playing a game on an undirected connected graph with $n$ nodes and $m$ edges, which has a designated \"root\" node $r$. The game follows these rules:\n\n- Terry moves first.  \n- The two players take turns moving along the edges of the graph, with each move traversing one edge (or they can choose to \"rest\" and do nothing).  \n- Terry cannot move to the node where Jom is currently located (Terry is only considered \"caught\" if he voluntarily moves to the same node as Jom; it is allowed for both to move to the same node $u$ within the same turn, as long as Terry goes there first).\n\nGiven $q$ queries, each specifying the starting positions $a$ and $b$ of Terry and Jom respectively, determine whether Terry can reach the root node $r$.", "inputFormat": "The first line contains three integers $n$, $m$, and $r$, representing the number of nodes, the number of edges, and the index of the root, respectively.\n\nThe next $m$ lines each contain two integers $(u, v)$, representing an edge between nodes $u$ and $v$ (Note that there may contain multiple edges and self-loops).\n\nThe following line contains a single integer $q$, representing the number of queries.\n\nThe next $q$ lines each contain two integers $a$ and $b$, representing the starting positions of Terry and Jom, respectively.", "outputFormat": "Since this is a warm-up problem, you should print `I'm here!` at the beginning.\n\nFor the $i$-th line of the next $q$ lines, print `Terry` if Terry can reach the root in the $i$-th query; otherwise, print `Jom`.", "hint": "#### Subtasks and Constraints\n\n| Subtask ID | $n, m, q \\le$ |     Special Properties     | Score |\n| :--------: | :-----------: | :--------------: | :--------: |\n|    $0$     |       $10^6$       | A |    $1$     |\n|    $1$     |     $10$      |        No        |    $9$     |\n|    $2$     |       $10^6$       |  B  |    $15$    |\n|    $3$     |       $10^6$       | C |    $15$    |\n|    $4$     |       $10^6$       |        No        |    $60$    |\n\n- Special Property A: $q = 0$.\n- Special Property B: The graph is a chain.\n- Special Property C: The graph is a star graph.\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le n, m \\le 10^6$;\n- $0 \\le q \\le 10^6$;\n- $1 \\le r, u, v, a, b \\le n$;\n- The given graph is an undirected connected graph.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Jom & Terry", "background": "我在做 [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)……\n\n你说得对，但是：\n> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.\n> \n> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.\n>\n> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.", "description": "Terry 和 Jom 在一个 $n$ 个点 $m$ 条边的有“根”无向连通图上博弈（图的根为 $r$），遵循以下规则：\n\n- Terry 先手；\n- 两人轮流在图上移动，每次只能走一条边（也可以睡觉，啥都不干）；\n- Terry 不能走到 Jom 所在的结点（我们认为只有 Terry 自投罗网时才会被抓到，即如果 Terry 先移动到结点 $u$ 后 Jom 在同一回合也移动到 $u$ 是合法的）。\n\n给定 $q$ 次询问，每次询问给定 Terry 和 Jom 的起点 $a, b$，你需要回答 Terry 能否到达根（即点 $r$）。", "inputFormat": "第一行包含三个整数 $n, m, r$，表示点数、边数和根的编号；\n\n接下来 $m$ 行，每行包含两个整数 $(u, v)$ 表示一条边（注意可能存在重边或自环）；\n\n接下来一行包含一个整数 $q$，表示询问数；\n\n接下来 $q$ 行，每行包含两个整数 $a, b$，表示 Terry 和 Jom 的起点。", "outputFormat": "因为这是签到题，所以你应该在开头输出 `I'm here!`。\n\n接下来 $q$ 行的第 $i$ 行，如果在第 $i$ 次询问中 Terry 能到达根就输出 `Terry`，否则输出 `Jom`。", "hint": "#### 【提示】\n\n本题 IO 量较大，请选手使用较快的读入输出方式。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n, m, q \\le$ |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--------: |\n|    $0$     |       $10^6$       | A |    $1$     |\n|    $1$     |     $10$      |        无        |    $9$     |\n|    $2$     |       $10^6$       |  B  |    $15$    |\n|    $3$     |       $10^6$       | C |    $15$    |\n|    $4$     |       $10^6$       |        无        |    $60$    |\n\n- 特殊性质 A：$q = 0$。\n- 特殊性质 B：保证图是一条链。\n- 特殊性质 C：保证图是一个菊花。\n\n对于所有数据，满足：\n\n- $1 \\le n, m \\le 10^6$；\n- $0 \\le q \\le 10^6$；\n- $1 \\le r, u, v, a, b \\le n$；\n- 给定的图是一个无向连通图。", "locale": "zh-CN"}}}
{"pid": "P11281", "type": "P", "difficulty": 5, "samples": [["3\n0 2 0", "2"], ["7\n0 3 2 0 5 7 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「GFOI Round 2」Aob & Blice", "background": "", "description": "Aob 和 Blice 在玩游戏。\n\n现在有一个长为 $n$ 的排列 $p$，且 Aob 和 Blice 手里分别有一个初始为空的**不可重**集合 $S_A,S_B$。定义一轮游戏过程如下：\n\n- 首先 Aob 会**随机**选取两个满足 $1 \\leq x < y \\leq n$ 且 $p_x>p_y$ 的数 $x,y$ ，然后从 $(x,y)$ 和 $(p_x,p_y)$ 这两个**有序二元组**中**随机选取一个**放入自己的集合 $S_A$ 中。\n\n- 在这之后，Blice 会从 $(y,x)$ 和 $(p_y,p_x)$ 中选择一个放入自己的集合 $S_B$ 中。**注意这里的 $x,y$ 均为上一步中 Aob 选择的**。\n\n在无限轮游戏之后 $^{\\dagger}$，Aob 和 Blice 会比较他们手里的集合。虽然 Aob 只会随机，Blice 看起来更聪明些，但是 Blice 想要最终他们两个的集合完全相等，这样平局就不会有任何一个人伤心啦！\n\n不幸的是，这个排列中的某些数消失了，于是 Blice 找到了你，想知道有多少种可能的原排列，使得他们两个人能够在无限轮后达成平局。为了方便，你只需要求出答案对 $998244353$ 取模的值。\n\n$^{\\dagger}$ 在“无限轮”之后 Blice 能达到平局，定义为对于任意 $\\varepsilon>0$，存在一个正整数 $N$，使得对于任意 $n>N$，Blice 存在一种策略使得他在 $n$ 轮结束之后**不**平局的概率 $<\\varepsilon$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个整数 $p_i$。对于每个 $i$，若 $p_i=0$，则表示第 $i$ 位上的数消失了；否则表示原排列中第 $i$ 位上的数。", "outputFormat": "输出一行一个整数，表示答案对 $998244353$ 取模的值。", "hint": "#### 【样例解释 #1】\n\n两种排列都是合法的：$\\{1,2,3\\},\\{3,2,1\\}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $9$ | 无 | $20$ |\n| 2 | $2000$ | A | $15$ |\n| 3 | $2000$ | 无 | $10$ |\n| 4 | $10^6$ | A | $15$ |\n| 5 | $10^6$ | B | $10$ |\n| 6 | $10^6$ | 无 | $30$ |\n\n- 特殊性质 A：$p_i \\ne 0$。\n- 特殊性质 B：$p_i = 0$。\n\n对于所有数据，满足：\n\n- $1 \\le n \\le 10^6$；\n- $0 \\le p_i \\le n$；\n- 对于任意 $1 \\le i < j \\le n$，若 $p_i \\ne 0$ 且 $p_j \\ne 0$，则 $p_i \\ne p_j$。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Aob & Blice", "background": "", "description": "Aob and Blice are playing a game.\n\nThere is a permutation $p$ of length $n$, and both Aob and Blice each hold an initially empty **distinct** set, denoted as $S_A$ and $S_B$ respectively. The rules for one round of the game are as follows:\n\n- First, Aob **randomly** selects two integers $x$ and $y$ such that $1 \\leq x < y \\leq n$ and $p_x > p_y$. Then, Aob **randomly** chooses one of the two **ordered pairs** $(x, y)$ or $(p_x, p_y)$ to add to his set $S_A$.\n\n- After that, Blice must choose one of the pairs $(y, x)$ or $(p_y, p_x)$ to add to her set $S_B$. **Note that $x$ and $y$ are the same as those chosen by Aob in the previous step.**\n\nAfter infinitely many rounds $^{\\dagger}$, Aob and Blice will compare their sets. Although Aob plays randomly, Blice is smarter and hopes to make both sets exactly the same in the end, so the game will end in a tie—this way, neither of them will be upset!\n\nUnfortunately, some elements in the permutation have disappeared. Blice has asked for your help to determine how many possible original permutations could allow them to achieve a tie after infinitely many rounds. For convenience, you only need to compute the answer modulo $998244353$.  \n\n---\n\n$^{\\dagger}$ A tie after infinitely many rounds is defined as follows: for any $\\varepsilon > 0$, there exists a positive integer $N$ such that for all $n > N$, Blice can adopt a strategy ensuring that the probability of not achieving a tie after $n$ rounds is less than $\\varepsilon$.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ integers $p_i$. For each $i$, if $p_i = 0$, it indicates that the number at the $i$-th position has disappeared; otherwise, it represents the number that was originally at the $i$-th position in the permutation.", "outputFormat": "Output a single line containing an integer that represents the answer modulo $998244353$.", "hint": "#### Sample $1$ Explanation\n\nExactly two permutations are valid: $\\{1,2,3\\},\\{3,2,1\\}$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\leq$ | Special Properties | Score |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $9$ | No | $20$ |\n| 2 | $2000$ | A | $15$ |\n| 3 | $2000$ | No | $10$ |\n| 4 | $10^6$ | A | $15$ |\n| 5 | $10^6$ | B | $10$ |\n| 6 | $10^6$ | No | $30$ |\n\n- Special Property A: $p_i \\ne 0$.\n- Special Property B: $p_i = 0$.\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le n \\le 10^6$;\n- $0 \\le p_i \\le n$;\n- For all $1 \\le i < j \\le n$, if $p_i \\ne 0$ and $p_j \\ne 0$, then $p_i \\ne p_j$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Aob & Blice", "background": "", "description": "Aob 和 Blice 在玩游戏。\n\n现在有一个长为 $n$ 的排列 $p$，且 Aob 和 Blice 手里分别有一个初始为空的**不可重**集合 $S_A,S_B$。定义一轮游戏过程如下：\n\n- 首先 Aob 会**随机**选取两个满足 $1 \\leq x < y \\leq n$ 且 $p_x>p_y$ 的数 $x,y$ ，然后从 $(x,y)$ 和 $(p_x,p_y)$ 这两个**有序二元组**中**随机选取一个**放入自己的集合 $S_A$ 中。\n\n- 在这之后，Blice 会从 $(y,x)$ 和 $(p_y,p_x)$ 中选择一个放入自己的集合 $S_B$ 中。**注意这里的 $x,y$ 均为上一步中 Aob 选择的**。\n\n在无限轮游戏之后 $^{\\dagger}$，Aob 和 Blice 会比较他们手里的集合。虽然 Aob 只会随机，Blice 看起来更聪明些，但是 Blice 想要最终他们两个的集合完全相等，这样平局就不会有任何一个人伤心啦！\n\n不幸的是，这个排列中的某些数消失了，于是 Blice 找到了你，想知道有多少种可能的原排列，使得他们两个人能够在无限轮后达成平局。为了方便，你只需要求出答案对 $998244353$ 取模的值。\n\n$^{\\dagger}$ 在“无限轮”之后 Blice 能达到平局，定义为对于任意 $\\varepsilon>0$，存在一个正整数 $N$，使得对于任意 $n>N$，Blice 存在一种策略使得他在 $n$ 轮结束之后**不**平局的概率 $<\\varepsilon$。", "inputFormat": "第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个整数 $p_i$。对于每个 $i$，若 $p_i=0$，则表示第 $i$ 位上的数消失了；否则表示原排列中第 $i$ 位上的数。", "outputFormat": "输出一行一个整数，表示答案对 $998244353$ 取模的值。", "hint": "#### 【样例解释 #1】\n\n两种排列都是合法的：$\\{1,2,3\\},\\{3,2,1\\}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $9$ | 无 | $20$ |\n| 2 | $2000$ | A | $15$ |\n| 3 | $2000$ | 无 | $10$ |\n| 4 | $10^6$ | A | $15$ |\n| 5 | $10^6$ | B | $10$ |\n| 6 | $10^6$ | 无 | $30$ |\n\n- 特殊性质 A：$p_i \\ne 0$。\n- 特殊性质 B：$p_i = 0$。\n\n对于所有数据，满足：\n\n- $1 \\le n \\le 10^6$；\n- $0 \\le p_i \\le n$；\n- 对于任意 $1 \\le i < j \\le n$，若 $p_i \\ne 0$ 且 $p_j \\ne 0$，则 $p_i \\ne p_j$。", "locale": "zh-CN"}}}
{"pid": "P11282", "type": "P", "difficulty": 5, "samples": [["4\n3\n3 2 1\n5\n1 3 5 2 4\n5\n5 4 3 1 2\n9\n4 7 3 6 1 2 5 8 9", "101\n11111\n11101\n111111101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "「GFOI Round 2」Colors", "background": "> 世界が鮮やかに 染まって", "description": "有 $n$ 个球排成一排，从左到右依次编号为 $1 \\sim n$。每个球初始都是红色的。第 $i$ 个球的初始权值为 $p_i$。**保证 $\\bm{n}$ 为奇数且 $\\bm{p}$ 是一个 $\\bm{1 \\sim n}$ 的排列。**\n\n你需要恰好进行 $\\frac{n - 1}{2}$ 次操作。在一次操作中，你需要：\n\n- 选择一个**红色**的球 $i$，使得 $1 \\sim i - 1$ 中至少有一个红球且 $i + 1 \\sim n$ 中至少有一个红球。\n- 设 $j$ 为最大的整数使得 $j < i$ 且球 $j$ 为红球，$k$ 为最小的整数使得 $k > i$ 且球 $k$ 为红球。你要将球 $i$ 和球 $k$ 都染成蓝色。\n- 然后进行以下两种操作的**恰好一个**：\n\t- 将 $p_j$（即球 $j$ 的权值）修改为 $\\max(p_i, p_j, p_k)$；\n    - 将 $p_j$（即球 $j$ 的权值）修改为 $\\min(p_i, p_j, p_k)$。\n\n容易发现进行了 $\\frac{n - 1}{2}$ 次操作后恰好剩下一个红球。\n\n你需要对于每个 $1 \\sim n$ 的正整数 $x$，求出是否能合理地进行操作，使得最后剩下的红球的权值为 $x$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $p_1, p_2, \\ldots, p_n$。", "outputFormat": "对于每组数据，输出一行一个 $01$ 串。对于每个 $1 \\sim n$ 的正整数 $i$，若能合理地进行操作使得最后剩下的红球的权值为 $i$，那么这个 $01$ 串的第 $i$ 位为 $1$，否则为 $0$。", "hint": "#### 【样例解释】\n\n对于第一组数据，初始的球的状态（颜色和权值）依次为 $\\color{red}{3\\ 2\\ 1}$。\n\n你需要进行 $1$ 次操作。在这次操作中你只能选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色。\n\n- 若你选择将 $p_1$ 修改为 $\\max(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{3}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $3$；\n- 若你选择将 $p_1$ 修改为 $\\min(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{1}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $1$。\n\n所以你输出一个 $01$ 串需要使得第 $1$ 和第 $3$ 位为 $1$，其余位为 $0$。\n\n对于第二组数据，容易证明最后剩下的红球权值可以取 $1 \\sim n$ 之间的所有正整数。下面给出一个能使得最后剩下的红球权值为 $2$ 的操作过程：\n\n- 初始的球的状态为 $\\color{red}{1\\ 3\\ 5\\ 2\\ 4}$。\n- 选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色，并将 $p_1$ 赋值为 $\\max(p_1, p_2, p_3) = 5$。操作后球的状态变为 $\\color{red}{5}\\ \\color{blue}{3\\ 5}\\ \\color{red}{2\\ 4}$。\n- 选择球 $4$，将球 $4$ 和球 $5$ 染成蓝色，并将 $p_1$ 赋值为 $\\min(p_1, p_4, p_5) = 2$。操作后球的状态变为 $\\color{red}{2}\\ \\color{blue}{3\\ 5\\ 2\\ 4}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $5$ | $10^4$ | 无 | $16$ |\n| $2$ | $19$ | $10^4$ | 无 | $19$ |\n| $3$ | $99$ | $10^6$ | 无 | $19$ |\n| $4$ | $10^6 - 1$ | $10^6$ | A | $3$ |\n| $5$ | $10^6 - 1$ | $10^6$ | 无 | $43$ |\n\n- 特殊性质 A：$p_i = i$。\n\n对于所有数据，满足：\n\n- $1 \\le T \\le 10^5$；\n- $3 \\le n \\le 10^6 - 1$ 且 $n$ 是奇数；\n- $\\sum n \\le 10^6$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Colors", "background": "> 世界が鮮やかに 染まって", "description": "There are $n$ balls arranged in a row, numbered from $1$ to $n$ from left to right. Initially, each ball is red. The initial weight of the $i$-th ball is $p_i$. **It is guaranteed that $\\bm{n}$ is an odd number and that $\\bm{p}$ is a permutation of $\\bm{1 \\sim n}$.**\n\nYou need to perform exactly $\\frac{n - 1}{2}$ operations. In one operation, you must:\n\n- Choose a **red** ball $i$ such that there is at least one red ball in the range $1 \\sim i - 1$ and at least one red ball in the range $i + 1 \\sim n$.\n- Let $j$ be the largest integer such that $j < i$ and the ball at position $j$ is red, and let $k$ be the smallest integer such that $k > i$ and the ball at position $k$ is red. You will paint both balls $i$ and $k$ blue.\n- Then, perform exactly one of the following two operations:\n  - Modify $p_j$ (the weight of ball $j$) to $\\max(p_i, p_j, p_k)$;\n  - Modify $p_j$ (the weight of ball $j$) to $\\min(p_i, p_j, p_k)$.\n\nAfter performing $\\frac{n - 1}{2}$ operations, there will be exactly one red ball left.\n\nYou need to determine for each positive integer $x$ in the range $1$ to $n$ whether it is possible to perform the operations in such a way that the weight of the remaining red ball is $x$.", "inputFormat": "**This problem has multiple test cases in a single test.**\n\nThe first line contains a positive integer $T$, indicating the number of test cases.\n\nFor each test case:\n\n- The first line contains a positive integer $n$.\n- The second line contains $n$ positive integers $p_1, p_2, \\ldots, p_n$.", "outputFormat": "For each test case, output a line containing a $01$ string. For each positive integer $i$ in the range $1 \\sim n$, if it is possible to perform the operations in such a way that the weight of the remaining red ball is $i$, then the $i$-th position of this $01$ string will be $1$; otherwise, it will be $0$.", "hint": "#### Sample Explanation\n\nFor the first test case, the initial state of the balls (color and weight) is $\\color{red}{3\\ 2\\ 1}$.\n\nYou need to perform $1$ operation. In this operation, you can only choose ball $2$ and paint both balls $2$ and $3$ blue.\n\n- If you choose to modify $p_1$ to $\\max(p_1, p_2, p_3)$, then after the operation, the state of the balls will be $\\color{red}{3}\\ \\color{blue}{2\\ 1}$, and the weight of the remaining red ball will be $3$;\n- If you choose to modify $p_1$ to $\\min(p_1, p_2, p_3)$, then after the operation, the state of the balls will be $\\color{red}{1}\\ \\color{blue}{2\\ 1}$, and the weight of the remaining red ball will be $1$.\n\nThus, you will output a $01$ string that has $1$s at the $1$st and $3$rd positions, and $0$s in the other positions.\n\nFor the second test case, it can be easily proven that the weight of the remaining red ball can take all positive integers from $1$ to $n$. Here is an example of a sequence of operations that results in the remaining red ball having a weight of $2$:\n\n- The initial state of the balls is $\\color{red}{1\\ 3\\ 5\\ 2\\ 4}$.\n- Choose ball $2$, paint both balls $2$ and $3$ blue, and set $p_1$ to $\\max(p_1, p_2, p_3) = 5$. After this operation, the state of the balls becomes $\\color{red}{5}\\ \\color{blue}{3\\ 5}\\ \\color{red}{2\\ 4}$.\n- Choose ball $4$, paint both balls $4$ and $5$ blue, and set $p_1$ to $\\min(p_1, p_4, p_5) = 2$. After this operation, the state of the balls becomes $\\color{red}{2}\\ \\color{blue}{3\\ 5\\ 2\\ 4}$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\le$ | $\\sum n \\le$ | Special Properties | Score |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $5$ | $10^4$ | No | $16$ |\n| $2$ | $19$ | $10^4$ | No | $19$ |\n| $3$ | $99$ | $10^6$ | No | $19$ |\n| $4$ | $10^6 - 1$ | $10^6$ | A | $3$ |\n| $5$ | $10^6 - 1$ | $10^6$ | No | $43$ |\n\n- Special Property A: $p_i = i$.\n\nFor all tests, it is guaranteed that:\n\n- $1 \\le T \\le 10^5$;\n- $3 \\le n \\le 10^6 - 1$ and $n$ is an odd number;\n- $\\sum n \\le 10^6$;\n- $p$ is a permutation of $1 \\sim n$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Colors", "background": "> 世界が鮮やかに 染まって", "description": "有 $n$ 个球排成一排，从左到右依次编号为 $1 \\sim n$。每个球初始都是红色的。第 $i$ 个球的初始权值为 $p_i$。**保证 $\\bm{n}$ 为奇数且 $\\bm{p}$ 是一个 $\\bm{1 \\sim n}$ 的排列。**\n\n你需要恰好进行 $\\frac{n - 1}{2}$ 次操作。在一次操作中，你需要：\n\n- 选择一个**红色**的球 $i$，使得 $1 \\sim i - 1$ 中至少有一个红球且 $i + 1 \\sim n$ 中至少有一个红球。\n- 设 $j$ 为最大的整数使得 $j < i$ 且球 $j$ 为红球，$k$ 为最小的整数使得 $k > i$ 且球 $k$ 为红球。你要将球 $i$ 和球 $k$ 都染成蓝色。\n- 然后进行以下两种操作的**恰好一个**：\n\t- 将 $p_j$（即球 $j$ 的权值）修改为 $\\max(p_i, p_j, p_k)$；\n    - 将 $p_j$（即球 $j$ 的权值）修改为 $\\min(p_i, p_j, p_k)$。\n\n容易发现进行了 $\\frac{n - 1}{2}$ 次操作后恰好剩下一个红球。\n\n你需要对于每个 $1 \\sim n$ 的正整数 $x$，求出是否能合理地进行操作，使得最后剩下的红球的权值为 $x$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数 $p_1, p_2, \\ldots, p_n$。", "outputFormat": "对于每组数据，输出一行一个 $01$ 串。对于每个 $1 \\sim n$ 的正整数 $i$，若能合理地进行操作使得最后剩下的红球的权值为 $i$，那么这个 $01$ 串的第 $i$ 位为 $1$，否则为 $0$。", "hint": "#### 【样例解释】\n\n对于第一组数据，初始的球的状态（颜色和权值）依次为 $\\color{red}{3\\ 2\\ 1}$。\n\n你需要进行 $1$ 次操作。在这次操作中你只能选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色。\n\n- 若你选择将 $p_1$ 修改为 $\\max(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{3}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $3$；\n- 若你选择将 $p_1$ 修改为 $\\min(p_1, p_2, p_3)$，那么操作后球的状态变为 $\\color{red}{1}\\ \\color{blue}{2\\ 1}$，最后剩下的红球的权值为 $1$。\n\n所以你输出一个 $01$ 串需要使得第 $1$ 和第 $3$ 位为 $1$，其余位为 $0$。\n\n对于第二组数据，容易证明最后剩下的红球权值可以取 $1 \\sim n$ 之间的所有正整数。下面给出一个能使得最后剩下的红球权值为 $2$ 的操作过程：\n\n- 初始的球的状态为 $\\color{red}{1\\ 3\\ 5\\ 2\\ 4}$。\n- 选择球 $2$，将球 $2$ 和球 $3$ 染成蓝色，并将 $p_1$ 赋值为 $\\max(p_1, p_2, p_3) = 5$。操作后球的状态变为 $\\color{red}{5}\\ \\color{blue}{3\\ 5}\\ \\color{red}{2\\ 4}$。\n- 选择球 $4$，将球 $4$ 和球 $5$ 染成蓝色，并将 $p_1$ 赋值为 $\\min(p_1, p_4, p_5) = 2$。操作后球的状态变为 $\\color{red}{2}\\ \\color{blue}{3\\ 5\\ 2\\ 4}$。\n\n#### 【数据范围】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $\\sum n \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $5$ | $10^4$ | 无 | $16$ |\n| $2$ | $19$ | $10^4$ | 无 | $19$ |\n| $3$ | $99$ | $10^6$ | 无 | $19$ |\n| $4$ | $10^6 - 1$ | $10^6$ | A | $3$ |\n| $5$ | $10^6 - 1$ | $10^6$ | 无 | $43$ |\n\n- 特殊性质 A：$p_i = i$。\n\n对于所有数据，满足：\n\n- $1 \\le T \\le 10^5$；\n- $3 \\le n \\le 10^6 - 1$ 且 $n$ 是奇数；\n- $\\sum n \\le 10^6$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P11283", "type": "P", "difficulty": 6, "samples": [["4 4 114 514 1919 810\n1 3 4 2\n", "1\n"], ["10 100 123456 789123 456789 123456789\n3 9 5 7 6 4 10 8 2 1\n", "142\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "ST 表", "洛谷月赛", "单调栈"], "title": "「GFOI Round 2」Turtle and Nediam", "background": "", "description": "对一个元素互不相同的长度 $\\ge 3$ 的正整数序列 $a$，定义 $a$ 的“肿胃数（nediam）”$f(a)$ 为：\n\n- 当 $|a| = 3$ 时，$f(a)$ 为 $a$ 的中位数；\n- 当 $|a| > 3$ 时，取 $a$ 的任意一个长度为 $3$ 的子段 $[a_i, a_{i + 1}, a_{i + 2}]$，记这个子段的中位数为 $x$，$a$ 删掉 $x$ 后的序列为 $b$，$f(a)$ 为所有 $b$ 中 $f(b)$ 的最大值。\n\n乌龟给你一个 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$ 和 $m$ 次询问，每次询问给定 $l, r$，你需要求出 $[p_l, p_{l + 1}, \\ldots, p_r]$ 的“肿胃数（nediam）”，即 $f([p_l, p_{l + 1}, \\ldots, p_r])$。", "inputFormat": "为了加快读入速度，我们采用以下读入方法。\n\n第一行包含六个正整数 $n, m, seed, A, B, C$。\n\n第二行包含一个排列 $p_1, p_2, \\ldots, p_n$。\n\n接下来的 $m$ 组询问，每组询问你要按照如下的方式生成 $(l, r)$：\n\n```cpp\nunsigned seed, A, B, C;\n\ninline unsigned rnd() {\n\tseed = A * seed * seed + B * seed + C;\n\tseed = seed ^ (seed << 27);\n\tseed = seed ^ (seed >> 19);\n\treturn seed;\n}\n\ninline std::pair<int, int> gen() {\n\tint l, r;\n\tdo {\n\t\tl = rnd() % n + 1;\n\t\tr = rnd() % n + 1;\n\t} while (abs(l - r) < 2);\n\tif (l > r) {\n\t\tstd::swap(l, r);\n\t}\n\treturn std::make_pair(l, r);\n}\n```\n\n每组询问调用一次 `gen()` 生成这组询问的 $(l, r)$。", "outputFormat": "为了加快输出速度，我们采用以下输出方法。\n\n设第 $i$ 组询问的答案为 $ans_i$，你需要输出 $(1 \\times ans_1) \\oplus (2 \\times ans_2) \\oplus \\cdots \\oplus (m \\times ans_m)$，其中 $\\oplus$ 为按位异或。", "hint": "#### 【样例解释 #1】\n\n生成的四组询问分别为 $(1, 4), (1, 3), (1, 3), (2, 4)$，答案分别为 $2, 3, 3, 3$，所以你需要输出 $(1 \\times 2) \\oplus (2 \\times 3) \\oplus (3 \\times 3) \\oplus (4 \\times 3) = 2 \\oplus 6 \\oplus 9 \\oplus 12 = 1$。\n\n对于第一组询问，选择子段 $[1, 3, 4]$ 或 $[3, 4, 2]$ 都会使得 $3$ 被删除。删除 $3$ 后的序列为 $[1, 4, 2]$，中位数为 $2$。\n\n#### 【数据范围】\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $100$ | 无 | $9$ |\n| $2$ | $10^6$ | $5 \\times 10^6$ | A | $5$ |\n| $3$ | $10^3$ | $10^4$ | 无 | $19$ |\n| $4$ | $10^5$ | $10^5$ | 无 | $17$ |\n| $5$ | $10^6$ | $10^6$ | B | $15$ |\n| $6$ | $10^6$ | $10^6$ | 无 | $13$ |\n| $7$ | $10^6$ | $5 \\times 10^6$ | 无 | $22$ |\n\n- 特殊性质 A：$p_i = i$；\n- 特殊性质 B：$p$ 从所有 $1 \\sim n$ 的排列中等概率随机生成。\n\n对于所有数据，满足：\n\n- $3 \\le n \\le 10^6$；\n- $1 \\le m \\le 5 \\times 10^6$；\n- $0 \\le seed, A, B, C < 2^{32}$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「GFOI Round 2」Turtle and Nediam", "background": "", "description": "For a sequence $a$ of distinct positive integers with length $|a| \\geq 3$, the \"nediam\" $f(a)$ is defined as follows:\n\n- When $|a| = 3$, $f(a)$ is the median of $a$;\n- When $|a| > 3$, for any contiguous subsequence of length $3$ denoted as $[a_i, a_{i + 1}, a_{i + 2}]$, let the median of this subsequence be $x$. The sequence obtained by removing $x$ from $a$ is denoted as $b$, and $f(a)$ is the maximum value of $f(b)$ over all such subsequences.\n\nTurtle gives you a permutation $p_1, p_2, \\ldots, p_n$ of the integers from $1$ to $n$ and $m$ queries. For each query, given $l$ and $r$, you need to calculate the \"nediam\" $f([p_l, p_{l + 1}, \\ldots, p_r])$.", "inputFormat": "To speed up the input process, we will use the following method.\n\nThe first line contains six positive integers $n, m, seed, A, B, C$.\n\nThe second line contains a permutation $p_1, p_2, \\ldots, p_n$.\n\nFor the next $m$ queries, you will generate the pair $(l, r)$ as follows:\n\n```cpp\nunsigned seed, A, B, C;\n\ninline unsigned rnd() {\n\tseed = A * seed * seed + B * seed + C;\n\tseed = seed ^ (seed << 27);\n\tseed = seed ^ (seed >> 19);\n\treturn seed;\n}\n\ninline std::pair<int, int> gen() {\n\tint l, r;\n\tdo {\n\t\tl = rnd() % n + 1;\n\t\tr = rnd() % n + 1;\n\t} while (abs(l - r) < 2);\n\tif (l > r) {\n\t\tstd::swap(l, r);\n\t}\n\treturn std::make_pair(l, r);\n}\n```\n\nFor each query, call `gen()` once to generate the pair $(l, r)$ for that query.", "outputFormat": "To speed up the output process, we will use the following method.\n\nLet the answer for the $i$-th query be $ans_i$. You need to output $(1 \\times ans_1) \\oplus (2 \\times ans_2) \\oplus \\cdots \\oplus (m \\times ans_m)$, where $\\oplus$ denotes the bitwise XOR operation.", "hint": "#### Sample $1$ Explanation\n\nThe generated four queries are $(1, 4), (1, 3), (1, 3), (2, 4)$, with answers $2, 3, 3, 3$ respectively. Therefore, you need to output $(1 \\times 2) \\oplus (2 \\times 3) \\oplus (3 \\times 3) \\oplus (4 \\times 3) = 2 \\oplus 6 \\oplus 9 \\oplus 12 = 1$.\n\nFor the first query, choosing the contiguous subsequence $[1, 3, 4]$ or $[3, 4, 2]$ will result in the deletion of $3$. After removing $3$, the remaining sequence is $[1, 4, 2]$, and the median is $2$.\n\n#### Subtasks and Constraints\n\n| Subtask ID | $n \\le$ | $m \\le$ | Special Properties | Score |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $100$ | No | $9$ |\n| $2$ | $10^6$ | $5 \\times 10^6$ | A | $5$ |\n| $3$ | $10^3$ | $10^4$ | No | $19$ |\n| $4$ | $10^5$ | $10^5$ | No | $17$ |\n| $5$ | $10^6$ | $10^6$ | B | $15$ |\n| $6$ | $10^6$ | $10^6$ | No | $13$ |\n| $7$ | $10^6$ | $5 \\times 10^6$ | No | $22$ |\n\n- Special Property A: $p_i = i$.\n- Special Property B: $p$ is randomly generated with equal probability from all permutations of $1 \\sim n$.\n\nFor all tests, it is guaranteed that:\n\n- $3 \\le n \\le 10^6$;\n- $1 \\le m \\le 5 \\times 10^6$;\n- $0 \\le seed, A, B, C < 2^{32}$;\n- $p$ is a permutation of $1 \\sim n$.", "locale": "en"}, "zh-CN": {"title": "「GFOI Round 2」Turtle and Nediam", "background": "", "description": "对一个元素互不相同的长度 $\\ge 3$ 的正整数序列 $a$，定义 $a$ 的“肿胃数（nediam）”$f(a)$ 为：\n\n- 当 $|a| = 3$ 时，$f(a)$ 为 $a$ 的中位数；\n- 当 $|a| > 3$ 时，取 $a$ 的任意一个长度为 $3$ 的子段 $[a_i, a_{i + 1}, a_{i + 2}]$，记这个子段的中位数为 $x$，$a$ 删掉 $x$ 后的序列为 $b$，$f(a)$ 为所有 $b$ 中 $f(b)$ 的最大值。\n\n乌龟给你一个 $1 \\sim n$ 的排列 $p_1, p_2, \\ldots, p_n$ 和 $m$ 次询问，每次询问给定 $l, r$，你需要求出 $[p_l, p_{l + 1}, \\ldots, p_r]$ 的“肿胃数（nediam）”，即 $f([p_l, p_{l + 1}, \\ldots, p_r])$。", "inputFormat": "为了加快读入速度，我们采用以下读入方法。\n\n第一行包含六个正整数 $n, m, seed, A, B, C$。\n\n第二行包含一个排列 $p_1, p_2, \\ldots, p_n$。\n\n接下来的 $m$ 组询问，每组询问你要按照如下的方式生成 $(l, r)$：\n\n```cpp\nunsigned seed, A, B, C;\n\ninline unsigned rnd() {\n\tseed = A * seed * seed + B * seed + C;\n\tseed = seed ^ (seed << 27);\n\tseed = seed ^ (seed >> 19);\n\treturn seed;\n}\n\ninline std::pair<int, int> gen() {\n\tint l, r;\n\tdo {\n\t\tl = rnd() % n + 1;\n\t\tr = rnd() % n + 1;\n\t} while (abs(l - r) < 2);\n\tif (l > r) {\n\t\tstd::swap(l, r);\n\t}\n\treturn std::make_pair(l, r);\n}\n```\n\n每组询问调用一次 `gen()` 生成这组询问的 $(l, r)$。", "outputFormat": "为了加快输出速度，我们采用以下输出方法。\n\n设第 $i$ 组询问的答案为 $ans_i$，你需要输出 $(1 \\times ans_1) \\oplus (2 \\times ans_2) \\oplus \\cdots \\oplus (m \\times ans_m)$，其中 $\\oplus$ 为按位异或。", "hint": "#### 【样例解释 #1】\n\n生成的四组询问分别为 $(1, 4), (1, 3), (1, 3), (2, 4)$，答案分别为 $2, 3, 3, 3$，所以你需要输出 $(1 \\times 2) \\oplus (2 \\times 3) \\oplus (3 \\times 3) \\oplus (4 \\times 3) = 2 \\oplus 6 \\oplus 9 \\oplus 12 = 1$。\n\n对于第一组询问，选择子段 $[1, 3, 4]$ 或 $[3, 4, 2]$ 都会使得 $3$ 被删除。删除 $3$ 后的序列为 $[1, 4, 2]$，中位数为 $2$。\n\n#### 【数据范围】\n\n**本题使用捆绑测试。**\n\n| 子任务编号 | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $18$ | $100$ | 无 | $9$ |\n| $2$ | $10^6$ | $5 \\times 10^6$ | A | $5$ |\n| $3$ | $10^3$ | $10^4$ | 无 | $19$ |\n| $4$ | $10^5$ | $10^5$ | 无 | $17$ |\n| $5$ | $10^6$ | $10^6$ | B | $15$ |\n| $6$ | $10^6$ | $10^6$ | 无 | $13$ |\n| $7$ | $10^6$ | $5 \\times 10^6$ | 无 | $22$ |\n\n- 特殊性质 A：$p_i = i$；\n- 特殊性质 B：$p$ 从所有 $1 \\sim n$ 的排列中等概率随机生成。\n\n对于所有数据，满足：\n\n- $3 \\le n \\le 10^6$；\n- $1 \\le m \\le 5 \\times 10^6$；\n- $0 \\le seed, A, B, C < 2^{32}$；\n- $p$ 是一个 $1 \\sim n$ 的排列。", "locale": "zh-CN"}}}
