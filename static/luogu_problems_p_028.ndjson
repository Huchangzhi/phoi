{"pid": "P8092", "type": "P", "difficulty": 3, "samples": [["5\n3\n8 10 5\n6\n4 6 4 4 6 4\n3\n0 1 0\n2\n1 2\n3\n10 9 9", "14\n16\n-1\n-1\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2022"], "title": "[USACO22JAN] Drought B", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，Farmer John 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为 $h_i$（$0 \\leq h_i \\leq 10^9$）。由于奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。请帮助 FJ 求出他喂奶牛达到上述状态所需的最少玉米袋数，或者如果不可能达到，输出 $-1$。", "inputFormat": "每个测试用例包含多个独立的子测试用例，必须全部回答正确才能通过整个测试用例。\n\n输入的第一行包含 $T$（$1\\le T\\le 100$），为你需要求解的子测试用例的数量。\n\n以下是 $T$ 个子测试用例，每个子测试用例包含两行。\n\n第一行包含 $N$，第二行包含 $h_1,h_2,\\ldots,h_N$。输入保证所有子测试用例的 $N$ 之和不超过 $10^5$。\n\n每个子测试用例的 $N$ 的值可能不同。\n", "outputFormat": "输出 $T$ 行，每个测试用例输出一行。", "hint": "【样例解释】\n\n对于第一个子测试用例，给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n对于第二个子测试用例，给奶牛 $1$ 和 $2$ 各两袋玉米，奶牛 $2$ 和 $3$ 各两袋玉米，奶牛 $4$ 和 $5$ 各两袋玉米，奶牛 $5$ 和 $6$ 各两袋玉米，可以使得所有奶牛的饥饿度均为 $2$。\n\n对于余下的子测试用例，均不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n- 测试点 2 的所有子测试用例满足 $N \\leq 3$ 以及 $h_i\\le 100$。\n\n- 测试点 3-8 的所有子测试用例满足 $N\\le 100$ 以及 $h_i\\le 100$。\n\n- 测试点 9-14 的所有子测试用例满足 $N\\le 100$。\n\n- 测试点 15 没有额外限制。\n\n- 此外，测试点 3-5 和 9-11 中的 $N$ 均为偶数，测试点 6-8 和 12-14 中的 $N$ 均为奇数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Drought B", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，Farmer John 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为 $h_i$（$0 \\leq h_i \\leq 10^9$）。由于奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。请帮助 FJ 求出他喂奶牛达到上述状态所需的最少玉米袋数，或者如果不可能达到，输出 $-1$。", "inputFormat": "每个测试用例包含多个独立的子测试用例，必须全部回答正确才能通过整个测试用例。\n\n输入的第一行包含 $T$（$1\\le T\\le 100$），为你需要求解的子测试用例的数量。\n\n以下是 $T$ 个子测试用例，每个子测试用例包含两行。\n\n第一行包含 $N$，第二行包含 $h_1,h_2,\\ldots,h_N$。输入保证所有子测试用例的 $N$ 之和不超过 $10^5$。\n\n每个子测试用例的 $N$ 的值可能不同。\n", "outputFormat": "输出 $T$ 行，每个测试用例输出一行。", "hint": "【样例解释】\n\n对于第一个子测试用例，给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n对于第二个子测试用例，给奶牛 $1$ 和 $2$ 各两袋玉米，奶牛 $2$ 和 $3$ 各两袋玉米，奶牛 $4$ 和 $5$ 各两袋玉米，奶牛 $5$ 和 $6$ 各两袋玉米，可以使得所有奶牛的饥饿度均为 $2$。\n\n对于余下的子测试用例，均不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n- 测试点 2 的所有子测试用例满足 $N \\leq 3$ 以及 $h_i\\le 100$。\n\n- 测试点 3-8 的所有子测试用例满足 $N\\le 100$ 以及 $h_i\\le 100$。\n\n- 测试点 9-14 的所有子测试用例满足 $N\\le 100$。\n\n- 测试点 15 没有额外限制。\n\n- 此外，测试点 3-5 和 9-11 中的 $N$ 均为偶数，测试点 6-8 和 12-14 中的 $N$ 均为奇数。", "locale": "zh-CN"}}}
{"pid": "P8093", "type": "P", "difficulty": 4, "samples": [["6\n31 13\n12 8\n25 6\n10 24\n1 1\n997 120", "8\n3\n8\n3\n0\n20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2022", "进制"], "title": "[USACO22JAN] Searching for Soulmates S", "background": "", "description": "Farmer John 的每头奶牛都想找到她们的灵魂伴侣——另一头具有相似特点的奶牛，与她们最大程度地相容。每头奶牛的性格由一个整数 $p_i$（$1 \\leq p_i \\leq 10^{18}$）描述。两头性格相同的奶牛就是灵魂伴侣。奶牛可以通过「改变操作」，对她的性格乘以 $2$，除以 $2$（当 $p_i$ 是偶数时），或者加上 $1$。\n\nFarmer John 最初以任意方式配对了他的奶牛。他很好奇为使每对奶牛成为灵魂伴侣需要进行多少次改变操作。对于每对奶牛，求配对中的第一头奶牛所必须进行的最小改变操作次数，从而可以与第二头奶牛成为灵魂伴侣。", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 10$），为奶牛配对的数量。以下 $N$ 行每行描述了一对奶牛，包含两个整数，为她们的性格值。第一个整数是需要被改变与另一头奶牛相匹配的奶牛的性格。", "outputFormat": "输出 $N$ 行。对于每一对奶牛，输出第一头奶牛需要进行的最小操作次数，使得她的性格与第二头奶牛相匹配。", "hint": "【样例解释】\n\n对于第一个子测试用例，一个最优的操作序列为 $31 \\implies 32 \\implies 16 \\implies 8 \\implies 9 \\implies 10 \\implies 11 \\implies 12 \\implies 13$。\n\n对于第二个子测试用例，一个最优的操作序列为 $12 \\implies 6 \\implies 7 \\implies 8$.\n\n【数据范围】\n\n- 测试点 1-4 满足 $p_i \\le 10^5$。\n- 测试点 5-12 没有额外限制。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Searching for Soulmates S", "background": "", "description": "Farmer John 的每头奶牛都想找到她们的灵魂伴侣——另一头具有相似特点的奶牛，与她们最大程度地相容。每头奶牛的性格由一个整数 $p_i$（$1 \\leq p_i \\leq 10^{18}$）描述。两头性格相同的奶牛就是灵魂伴侣。奶牛可以通过「改变操作」，对她的性格乘以 $2$，除以 $2$（当 $p_i$ 是偶数时），或者加上 $1$。\n\nFarmer John 最初以任意方式配对了他的奶牛。他很好奇为使每对奶牛成为灵魂伴侣需要进行多少次改变操作。对于每对奶牛，求配对中的第一头奶牛所必须进行的最小改变操作次数，从而可以与第二头奶牛成为灵魂伴侣。", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 10$），为奶牛配对的数量。以下 $N$ 行每行描述了一对奶牛，包含两个整数，为她们的性格值。第一个整数是需要被改变与另一头奶牛相匹配的奶牛的性格。", "outputFormat": "输出 $N$ 行。对于每一对奶牛，输出第一头奶牛需要进行的最小操作次数，使得她的性格与第二头奶牛相匹配。", "hint": "【样例解释】\n\n对于第一个子测试用例，一个最优的操作序列为 $31 \\implies 32 \\implies 16 \\implies 8 \\implies 9 \\implies 10 \\implies 11 \\implies 12 \\implies 13$。\n\n对于第二个子测试用例，一个最优的操作序列为 $12 \\implies 6 \\implies 7 \\implies 8$.\n\n【数据范围】\n\n- 测试点 1-4 满足 $p_i \\le 10^5$。\n- 测试点 5-12 没有额外限制。\n\n", "locale": "zh-CN"}}}
{"pid": "P8094", "type": "P", "difficulty": 3, "samples": [["7\n4 3 1 2 5 6 7", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "单调栈"], "title": "[USACO22JAN] Cow Frisbee S", "background": null, "description": "Farmer John 的 $N\\ (N\\le 3\\times 10^5)$ 头奶牛的高度为 $1, 2, \\ldots, N$。一天，奶牛以某个顺序排成一行玩飞盘；令 $h_1 \\ldots h_N$ 表示此顺序下奶牛们的高度（因此 $h$ 是 $1 \\ldots N$ 的一个排列）。\n\n队伍中位于位置 $i$ 和 $j$ 的两头奶牛可以成功地来回扔飞盘当且仅当她们之间的每头奶牛的高度都低于 $\\min(h_i, h_j)$。\n\n请计算所有可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。位置 $i$ 和 $j$ 之间的距离为 $j-i+1$。", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $h_1 \\ldots h_N$，用空格分隔。", "outputFormat": "输出可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C 或 C++ 中的 \"long long\"）。", "hint": "【样例解释】\n\n这个例子中可以成功的位置对如下：\n\n```\n(1, 2), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (4, 5), (5, 6), (6, 7)\n```\n\n【数据范围】\n\n- 测试点 1-3 满足 $N\\le 5000$。\n\n- 测试点 4-11 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Cow Frisbee S", "background": null, "description": "Farmer John 的 $N\\ (N\\le 3\\times 10^5)$ 头奶牛的高度为 $1, 2, \\ldots, N$。一天，奶牛以某个顺序排成一行玩飞盘；令 $h_1 \\ldots h_N$ 表示此顺序下奶牛们的高度（因此 $h$ 是 $1 \\ldots N$ 的一个排列）。\n\n队伍中位于位置 $i$ 和 $j$ 的两头奶牛可以成功地来回扔飞盘当且仅当她们之间的每头奶牛的高度都低于 $\\min(h_i, h_j)$。\n\n请计算所有可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。位置 $i$ 和 $j$ 之间的距离为 $j-i+1$。", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $h_1 \\ldots h_N$，用空格分隔。", "outputFormat": "输出可以成功地来回扔飞盘的奶牛所在的位置对 $i<j$ 之间的距离总和。注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C 或 C++ 中的 \"long long\"）。", "hint": "【样例解释】\n\n这个例子中可以成功的位置对如下：\n\n```\n(1, 2), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (4, 5), (5, 6), (6, 7)\n```\n\n【数据范围】\n\n- 测试点 1-3 满足 $N\\le 5000$。\n\n- 测试点 4-11 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8095", "type": "P", "difficulty": 5, "samples": [["8 10\n2 1\n3 4\n2 3\n6 5\n7 8\n6 7\n7 5\n5 8", "1\n1\n3\n2\n8\n4\n6\n5\n7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "网络流", "Special Judge", "图论建模", "构造"], "title": "[USACO22JAN] Cereal 2 S", "background": "", "description": "Farmer John 的奶牛们的早餐最爱当然是麦片了！事实上，奶牛们的胃口是如此之大，每头奶牛一顿饭可以吃掉整整一箱麦片。\n\n最近农场收到了一份快递，内有 $M$ 种不同种类的麦片（$2\\le M\\le 10^5$）。不幸的是，每种麦片只有一箱！$N$ 头奶牛（$1\\le N\\le 10^5$）中的每头都有她最爱的麦片和第二喜爱的麦片。给定一些可选的麦片，奶牛会执行如下的过程：\n\n- 如果她最爱的麦片还在，取走并离开。\n\n- 否则，如果她第二喜爱的麦片还在，取走并离开。\n\n- 否则，她会失望地哞叫一声然后不带走一片麦片地离开。\n\n当你最优地排列这些奶牛时，求饥饿的奶牛的最小数量。同时，求出任意一个可以达到此最小值的 $N$ 头奶牛的排列。\n", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $M$。\n\n对于每一个 $1\\le i\\le N$，第 $i$ 行包含两个空格分隔的整数 $f_i$ 和 $s_i$（$1\\le f_i,s_i\\le M$，且 $f_i\\neq s_i$），为第 $i$ 头奶牛最喜爱和第二喜爱的麦片。", "outputFormat": "输出饥饿的奶牛的最小数量，并输出任意一个可以达到此最小值的 $1\\ldots N$ 的排列。如果有多个符合要求的排列，输出任意一个。", "hint": "【样例解释】\n\n在这个例子中，有 $8$ 头奶牛和 $10$ 种麦片。\n\n注意我们对前三头奶牛独立于后五头奶牛求解，因为她们没有共同喜欢的麦片。\n\n如果前三头奶牛按顺序 $[1,2,3]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $2$ 会选择麦片 $3$，奶牛 $3$ 会饥饿。\n\n如果前三头奶牛按顺序 $[1,3,2]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $3$ 会选择麦片 $3$，奶牛 $2$ 会选择麦片 $4$；没有奶牛会饥饿。\n\n当然，还存在其他排列使得前三头奶牛均不饥饿。例如，如果前三头奶牛按顺序 $[3,1,2]$ 选择，则奶牛 $3$ 会选择麦片 $2$，奶牛 $1$ 会选择麦片 $1$，奶牛 $2$ 会选择麦片 $3$；同样，奶牛 $[1,2,3]$ 均不会饥饿。\n\n可以证明在后五头奶牛中，至少一头会饥饿。\n\n【数据范围】\n\n- $14$ 个测试点中的 $4$ 个测试点满足 $N,M\\le 100$。\n\n- $14$ 个测试点中的 $10$ 个测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/hi36jkwh)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8095)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Cereal 2 S", "background": "", "description": "Farmer John 的奶牛们的早餐最爱当然是麦片了！事实上，奶牛们的胃口是如此之大，每头奶牛一顿饭可以吃掉整整一箱麦片。\n\n最近农场收到了一份快递，内有 $M$ 种不同种类的麦片（$2\\le M\\le 10^5$）。不幸的是，每种麦片只有一箱！$N$ 头奶牛（$1\\le N\\le 10^5$）中的每头都有她最爱的麦片和第二喜爱的麦片。给定一些可选的麦片，奶牛会执行如下的过程：\n\n- 如果她最爱的麦片还在，取走并离开。\n\n- 否则，如果她第二喜爱的麦片还在，取走并离开。\n\n- 否则，她会失望地哞叫一声然后不带走一片麦片地离开。\n\n当你最优地排列这些奶牛时，求饥饿的奶牛的最小数量。同时，求出任意一个可以达到此最小值的 $N$ 头奶牛的排列。\n", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $M$。\n\n对于每一个 $1\\le i\\le N$，第 $i$ 行包含两个空格分隔的整数 $f_i$ 和 $s_i$（$1\\le f_i,s_i\\le M$，且 $f_i\\neq s_i$），为第 $i$ 头奶牛最喜爱和第二喜爱的麦片。", "outputFormat": "输出饥饿的奶牛的最小数量，并输出任意一个可以达到此最小值的 $1\\ldots N$ 的排列。如果有多个符合要求的排列，输出任意一个。", "hint": "【样例解释】\n\n在这个例子中，有 $8$ 头奶牛和 $10$ 种麦片。\n\n注意我们对前三头奶牛独立于后五头奶牛求解，因为她们没有共同喜欢的麦片。\n\n如果前三头奶牛按顺序 $[1,2,3]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $2$ 会选择麦片 $3$，奶牛 $3$ 会饥饿。\n\n如果前三头奶牛按顺序 $[1,3,2]$ 进行选择，则奶牛 $1$ 会选择麦片 $2$，奶牛 $3$ 会选择麦片 $3$，奶牛 $2$ 会选择麦片 $4$；没有奶牛会饥饿。\n\n当然，还存在其他排列使得前三头奶牛均不饥饿。例如，如果前三头奶牛按顺序 $[3,1,2]$ 选择，则奶牛 $3$ 会选择麦片 $2$，奶牛 $1$ 会选择麦片 $1$，奶牛 $2$ 会选择麦片 $3$；同样，奶牛 $[1,2,3]$ 均不会饥饿。\n\n可以证明在后五头奶牛中，至少一头会饥饿。\n\n【数据范围】\n\n- $14$ 个测试点中的 $4$ 个测试点满足 $N,M\\le 100$。\n\n- $14$ 个测试点中的 $10$ 个测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/hi36jkwh)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8095)。", "locale": "zh-CN"}}}
{"pid": "P8096", "type": "P", "difficulty": 5, "samples": [["3\n9 11 7", "241"], ["4\n6 8 5 9", "137"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022", "动态规划优化", "前缀和"], "title": "[USACO22JAN] Drought G", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，FJ 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 100$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为一个非负整数 $h_i$。由于 FJ 的奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。尽管他不知道他的奶牛们具体的饥饿度，他知道每一头奶牛的饥饿度上界；具体地说，第 $i$ 头奶牛的饥饿度 $h_i$ 至多为 $H_i$（$0\\le H_i\\le 1000$）。\n\n你的工作是计算符合上述上界的 $N$ 元组 $[h_1,h_2,\\ldots,h_N]$ 的数量，使得 FJ 有可能达到他的目标，答案对 $10^9+7$ 取模。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $H_1,H_2,\\ldots,H_N$。", "outputFormat": "输出符合条件的饥饿度的 $N$ 元组数量，对 $10^9+7$ 取模。", "hint": "【样例解释】\n\n共有 $(9+1)\\cdot (11+1)\\cdot (7+1)$ 个 $3$ 元组 $h$ 与 $H$ 相符合。\n\n$h=[8,10,5]$ 是其中一个元组。在这个情况中，有可能使得所有的奶牛具有相同的饥饿度：给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n$h=[0,1,0]$ 是另一个元组。在这个情况中，不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n\n- 编号为偶数的测试点中的 $N$ 均为偶数，编号为奇数的测试点中的 $N$ 均为奇数。\n\n- 测试点 3-4 满足 $N\\le 6$ 以及 $H_i \\le 10$。\n\n- 测试点 5-10 满足 $N\\le 50$ 以及 $H_i \\le 100$。\n\n- 测试点 11-20 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Drought G", "background": "", "description": "Farmer John 的草地里的草在一场大旱中都干死了。经过数小时的绝望和沉思，FJ 想到了一个绝妙的主意，购买玉米来喂养他宝贵的奶牛。\n\nFJ 的 $N$ 头奶牛（$1 \\leq N \\leq 100$）排成一行，队伍中的第 $i$ 头奶牛的饥饿度为一个非负整数 $h_i$。由于 FJ 的奶牛是社会性动物，她们坚持一起进食，FJ 降低奶牛饥饿度的唯一方法是选择两头相邻的奶牛 $i$ 和 $i+1$ 并分别喂她们一袋玉米，令她们的饥饿度各减少 1。\n\nFJ 想将他的奶牛喂至所有的奶牛都具有相同的非负饥饿度。尽管他不知道他的奶牛们具体的饥饿度，他知道每一头奶牛的饥饿度上界；具体地说，第 $i$ 头奶牛的饥饿度 $h_i$ 至多为 $H_i$（$0\\le H_i\\le 1000$）。\n\n你的工作是计算符合上述上界的 $N$ 元组 $[h_1,h_2,\\ldots,h_N]$ 的数量，使得 FJ 有可能达到他的目标，答案对 $10^9+7$ 取模。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $H_1,H_2,\\ldots,H_N$。", "outputFormat": "输出符合条件的饥饿度的 $N$ 元组数量，对 $10^9+7$ 取模。", "hint": "【样例解释】\n\n共有 $(9+1)\\cdot (11+1)\\cdot (7+1)$ 个 $3$ 元组 $h$ 与 $H$ 相符合。\n\n$h=[8,10,5]$ 是其中一个元组。在这个情况中，有可能使得所有的奶牛具有相同的饥饿度：给奶牛 $2$ 和 $3$ 各两袋玉米，然后给奶牛 $1$ 和 $2$ 各五袋玉米，可以使得所有奶牛的饥饿度均为 $3$。\n\n$h=[0,1,0]$ 是另一个元组。在这个情况中，不可能使得奶牛们的饥饿度相等。\n\n【数据范围】\n\n\n- 编号为偶数的测试点中的 $N$ 均为偶数，编号为奇数的测试点中的 $N$ 均为奇数。\n\n- 测试点 3-4 满足 $N\\le 6$ 以及 $H_i \\le 10$。\n\n- 测试点 5-10 满足 $N\\le 50$ 以及 $H_i \\le 100$。\n\n- 测试点 11-20 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P8097", "type": "P", "difficulty": 4, "samples": [["5 9\nA 1 2\nA 2 3\nD 1\nD 3\nA 2 4\nD 2\nR 2\nR 1\nR 3", "7\n8\n6\n9\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "USACO", "并查集", "2022"], "title": "[USACO22JAN] Farm Updates G", "background": "", "description": "Farmer John 经营着总共 $N$ 个农场（$1\\le N\\le 10^5$），编号为 $1\\ldots N$。最初，这些农场之间没有道路连接，并且每个农场都在活跃地生产牛奶。\n\n由于经济的动态性，Farmer John 需要根据 $Q$ 次更新操作（$0\\le Q\\le 2\\cdot 10^5$）对他的农场进行改造。更新操作有三种可能的形式：\n\n- `(D x)` 停用一个活跃的农场 $x$，使其不再生产牛奶。\n\n- `(A x y)` 在两个活跃的农场 $x$ 和 $y$ 之间添加一条道路。\n\n- `(R e)` 删除之前添加的第 $e$ 条道路（$e = 1$ 是添加的第一条道路）。\n\n一个农场 $x$ 如果正在活跃地生产牛奶，或者可以通过一系列道路到达另一个活跃的农场，则称之为一个「有关的」农场。对于每个农场 $x$，计算最大的 $i$（$0\\le i\\le Q$），使得农场 $x$ 在第 $i$ 次更新后是有关的。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。以下 $Q$ 行每行包含如下格式之一的一次更新操作：\n\n```\nD x\nA x y\nR e\n```\n\n输入保证对于 R 类更新，$e$ 不超过已经添加的道路的数量，并且没有两次 R 类更新具有相等的 $e$ 值。", "outputFormat": "输出 $N$ 行，每行包含一个 $0\\ldots Q$ 范围内的整数。", "hint": "【样例解释】\n\n在这个例子中，道路以顺序 $(2,3), (1,2), (2,4)$ 被删除。\n\n- 农场 $1$ 在道路 $(1,2)$ 被删除之前是有关的。\n\n- 农场 $2$ 在道路 $(2,4)$ 被删除之前是有关的。\n\n- 农场 $3$ 在道路 $(2,3)$ 被删除之前是有关的。\n\n- 农场 $4$ 和 $5$ 在所有更新结束后仍然是活跃的。所以它们一直保持为有关的，两者的输出均应为 $Q$。\n\n【数据范围】\n\n- 测试点 2-5 满足 $N\\le 10^3$，$Q\\le 2\\cdot 10^3$。\n\n- 测试点 6-20 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Farm Updates G", "background": "", "description": "Farmer John 经营着总共 $N$ 个农场（$1\\le N\\le 10^5$），编号为 $1\\ldots N$。最初，这些农场之间没有道路连接，并且每个农场都在活跃地生产牛奶。\n\n由于经济的动态性，Farmer John 需要根据 $Q$ 次更新操作（$0\\le Q\\le 2\\cdot 10^5$）对他的农场进行改造。更新操作有三种可能的形式：\n\n- `(D x)` 停用一个活跃的农场 $x$，使其不再生产牛奶。\n\n- `(A x y)` 在两个活跃的农场 $x$ 和 $y$ 之间添加一条道路。\n\n- `(R e)` 删除之前添加的第 $e$ 条道路（$e = 1$ 是添加的第一条道路）。\n\n一个农场 $x$ 如果正在活跃地生产牛奶，或者可以通过一系列道路到达另一个活跃的农场，则称之为一个「有关的」农场。对于每个农场 $x$，计算最大的 $i$（$0\\le i\\le Q$），使得农场 $x$ 在第 $i$ 次更新后是有关的。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。以下 $Q$ 行每行包含如下格式之一的一次更新操作：\n\n```\nD x\nA x y\nR e\n```\n\n输入保证对于 R 类更新，$e$ 不超过已经添加的道路的数量，并且没有两次 R 类更新具有相等的 $e$ 值。", "outputFormat": "输出 $N$ 行，每行包含一个 $0\\ldots Q$ 范围内的整数。", "hint": "【样例解释】\n\n在这个例子中，道路以顺序 $(2,3), (1,2), (2,4)$ 被删除。\n\n- 农场 $1$ 在道路 $(1,2)$ 被删除之前是有关的。\n\n- 农场 $2$ 在道路 $(2,4)$ 被删除之前是有关的。\n\n- 农场 $3$ 在道路 $(2,3)$ 被删除之前是有关的。\n\n- 农场 $4$ 和 $5$ 在所有更新结束后仍然是活跃的。所以它们一直保持为有关的，两者的输出均应为 $Q$。\n\n【数据范围】\n\n- 测试点 2-5 满足 $N\\le 10^3$，$Q\\le 2\\cdot 10^3$。\n\n- 测试点 6-20 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P8098", "type": "P", "difficulty": 6, "samples": [["6\n2 2 4 5 6 6", "6\n1\n6\n17\n22\n27\n32"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2022", "Special Judge", "构造"], "title": "[USACO22JAN] Tests for Haybales G", "background": "", "description": "Farmer John 的奶牛们决定为 Farmer Nhoj 农场的奶牛们举办一场编程竞赛。为了使问题尽可能有趣，他们花费了大量时间来构造具有挑战性的测试用例。特别是对于一个问题，「Haybales」，奶牛们需要你的帮助来设计具有挑战性的测试用例。这有关解决以下这个有些奇妙的问题：\n\n有一个有序整数数组 $x_1 \\leq x_2 \\leq \\dotsb \\leq x_N$（$1 \\leq N \\leq 10^5$），和一个整数 $K$。你不知道这个数组以及 $K$，但你知道对于每个索引 $i$ 使得 $x_{j_i} \\leq x_i + K$ 的最大索引 $j_i$。保证有 $i\\le j_i$ 以及 $j_1\\le j_2\\le \\cdots \\le j_N\\le N$。\n\n给定这些信息，Farmer John 的奶牛需要构造任意一个数组以及整数 $K$ 与该信息一致。构造需要满足对于所有 $i$ 有 $0 \\leq x_i \\leq 10^{18}$，并且 $1 \\leq K \\leq 10^{18}$。\n\n可以证明这一定是可行的。请帮助 Farmer John 的奶牛们解决这一问题！", "inputFormat": "输入的第一行包含 $N$。第二行包含 $j_1,j_2,\\ldots,j_N$。", "outputFormat": "输出 $K$，然后在下一行输出 $x_1,\\ldots,x_N$。任何合法的输出均正确。", "hint": "【样例解释】\n\n输出样例为数组 $a=[1,6,17,22,27,32]$ 以及 $K=6$。 $j_1=2$ 被满足是由于 $a_2=6 \\le 1+6=a_1+K$ 而 $a_3=17>1+6=a_1+K$，从而 $a_2$ 是最大的不超过 $a_1+K$ 的元素。类似地：\n\n- $j_2=2$ 被满足是由于 $a_2=6 \\le 6+6$ 而 $a_3=17>6+6$；\n- $j_3=4$ 被满足是由于 $a_4=22 \\le 17+6$ 而 $a_5=27>17+6$；\n- $j_4=5$ 被满足是由于 $a_5=27 \\le 22+6$ 而 $a_5=32>22+6$；\n- $j_5=6$ 被满足是由于 $a_6=32 \\le 27+6$ 且 $a_6$ 是数组的最后一个元素；\n- $j_6=6$ 被满足是由于 $a_6=32 \\le 32+6$ 且 $a_6$ 是数组的最后一个元素。\n\n对于输入样例，这并不是唯一正确的输出。例如，你也可以输出数组 $[1,2,4,5,6,7]$ 和 $K=1$。\n\n【数据范围】\n\n- 所有测试点的 $50\\%$ 满足 $N \\le 5000$。\n- 其余测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/kzgvkesl)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8098)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Tests for Haybales G", "background": "", "description": "Farmer John 的奶牛们决定为 Farmer Nhoj 农场的奶牛们举办一场编程竞赛。为了使问题尽可能有趣，他们花费了大量时间来构造具有挑战性的测试用例。特别是对于一个问题，「Haybales」，奶牛们需要你的帮助来设计具有挑战性的测试用例。这有关解决以下这个有些奇妙的问题：\n\n有一个有序整数数组 $x_1 \\leq x_2 \\leq \\dotsb \\leq x_N$（$1 \\leq N \\leq 10^5$），和一个整数 $K$。你不知道这个数组以及 $K$，但你知道对于每个索引 $i$ 使得 $x_{j_i} \\leq x_i + K$ 的最大索引 $j_i$。保证有 $i\\le j_i$ 以及 $j_1\\le j_2\\le \\cdots \\le j_N\\le N$。\n\n给定这些信息，Farmer John 的奶牛需要构造任意一个数组以及整数 $K$ 与该信息一致。构造需要满足对于所有 $i$ 有 $0 \\leq x_i \\leq 10^{18}$，并且 $1 \\leq K \\leq 10^{18}$。\n\n可以证明这一定是可行的。请帮助 Farmer John 的奶牛们解决这一问题！", "inputFormat": "输入的第一行包含 $N$。第二行包含 $j_1,j_2,\\ldots,j_N$。", "outputFormat": "输出 $K$，然后在下一行输出 $x_1,\\ldots,x_N$。任何合法的输出均正确。", "hint": "【样例解释】\n\n输出样例为数组 $a=[1,6,17,22,27,32]$ 以及 $K=6$。 $j_1=2$ 被满足是由于 $a_2=6 \\le 1+6=a_1+K$ 而 $a_3=17>1+6=a_1+K$，从而 $a_2$ 是最大的不超过 $a_1+K$ 的元素。类似地：\n\n- $j_2=2$ 被满足是由于 $a_2=6 \\le 6+6$ 而 $a_3=17>6+6$；\n- $j_3=4$ 被满足是由于 $a_4=22 \\le 17+6$ 而 $a_5=27>17+6$；\n- $j_4=5$ 被满足是由于 $a_5=27 \\le 22+6$ 而 $a_5=32>22+6$；\n- $j_5=6$ 被满足是由于 $a_6=32 \\le 27+6$ 且 $a_6$ 是数组的最后一个元素；\n- $j_6=6$ 被满足是由于 $a_6=32 \\le 32+6$ 且 $a_6$ 是数组的最后一个元素。\n\n对于输入样例，这并不是唯一正确的输出。例如，你也可以输出数组 $[1,2,4,5,6,7]$ 和 $K=1$。\n\n【数据范围】\n\n- 所有测试点的 $50\\%$ 满足 $N \\le 5000$。\n- 其余测试点没有额外限制。\n\n【说明】\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/kzgvkesl)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8098)。", "locale": "zh-CN"}}}
{"pid": "P8099", "type": "P", "difficulty": 6, "samples": [["5 3\n7\n7\n3\n6\n2", "6\n7\n7\n2\n3"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "USACO", "2022", "拓扑排序"], "title": "[USACO22JAN] Minimizing Haybales P", "background": "", "description": "Bessie 感到无聊，于是又在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 10^5$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n- 如果两个相邻的草堆的高度相差不超过 $K$（$1 \\le K \\le 10^9$），她可以交换这两堆草堆。\n\nBessie 在一系列这样的操作之后可以得到的的字典序最小的高度序列是什么？", "inputFormat": "输入的第一行包含 $N$ 和 $K$。第 $i+1$ 行包含第 $i$ 堆草堆的高度。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含答案中第 $i$ 堆草堆的高度。", "hint": "【样例解释】\n\n一种 Bessie 可以交换草堆的方式如下：\n\n```plain\n   7 7 3 6 2\n-> 7 7 6 3 2\n-> 7 7 6 2 3\n-> 7 6 7 2 3\n-> 6 7 7 2 3\n```\n\n【数据范围】\n\n- 所有测试点的 $10\\%$ 满足 $N \\le 100$。\n- 所有测试点的另外 $20\\%$ 满足 $N \\le 5000$。\n- 其余 $70\\%$ 的测试点没有额外限制。\n\n供题：Daniel Zhang，Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Minimizing Haybales P", "background": "", "description": "Bessie 感到无聊，于是又在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 10^5$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n- 如果两个相邻的草堆的高度相差不超过 $K$（$1 \\le K \\le 10^9$），她可以交换这两堆草堆。\n\nBessie 在一系列这样的操作之后可以得到的的字典序最小的高度序列是什么？", "inputFormat": "输入的第一行包含 $N$ 和 $K$。第 $i+1$ 行包含第 $i$ 堆草堆的高度。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含答案中第 $i$ 堆草堆的高度。", "hint": "【样例解释】\n\n一种 Bessie 可以交换草堆的方式如下：\n\n```plain\n   7 7 3 6 2\n-> 7 7 6 3 2\n-> 7 7 6 2 3\n-> 7 6 7 2 3\n-> 6 7 7 2 3\n```\n\n【数据范围】\n\n- 所有测试点的 $10\\%$ 满足 $N \\le 100$。\n- 所有测试点的另外 $20\\%$ 满足 $N \\le 5000$。\n- 其余 $70\\%$ 的测试点没有额外限制。\n\n供题：Daniel Zhang，Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P8100", "type": "P", "difficulty": 6, "samples": [["7\n4\n2 2 2 3\n4\n3 3 1 2\n4\n5 3 4 2\n6\n3 3 1 1 2 2\n6\n1 3 3 4 1 2\n6\n4 1 2 3 5 4\n10\n1 5 6 6 6 4 2 3 2 5", "4\n4\n5\n15\n9\n8\n19"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022"], "title": "[USACO22JAN] Counting Haybales P", "background": "", "description": "如同往常一样，奶牛 Bessie 正在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 5000$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n如果两个相邻的草堆的高度相差恰好为 $1$，她可以将较高的草堆中最上方的草移到较低的草堆之上。\n\n执行有限多次上述操作后，可以得到多少种不同的高度序列，对 $10^9+7$ 取模？两个高度序列被认为是相同的，如果对于所有 $i$，第 $i$ 堆草堆在两者中具有相同数量的草。", "inputFormat": "输入的第一行包含 $T$，为独立的子测试用例的数量，必须全部回答正确才能通过整个测试用例。\n\n每个子测试用例包含 $N$，以及一个 $N$ 个高度的序列。输入保证所有子测试用例的 $N$ 之和不超过 $5000$。", "outputFormat": "输出 $T$ 行，每行输出一个子测试用例的答案。", "hint": "【样例解释】\n\n对于第一个子测试用例，四个可能的高度序列为：\n\n$(2,2,2,3),(2,2,3,2),(2,3,2,2),(3,2,2,2)$\n\n对于第二个子测试用例，四个可能的高度序列为：\n\n$(2,3,3,1),(3,2,3,1),(3,3,2,1),(3,3,1,2)$\n\n【数据范围】\n\n- 测试点 1-3 满足 $N \\le 10$。\n- 测试点 4 满足对于所有 $i$，有 $1 \\le h_i \\le 3$。\n- 测试点 5-7 满足对于所有 $i$，有 $|h_i-i| \\le 1$。\n- 测试点 8-10 满足对于所有 $i$，有 $1 \\le h_i \\le 4$，且 $N \\le 100$。\n- 测试点 11-13 满足 $N \\le 100$。\n- 测试点 14-17 满足 $N \\le 1000$。\n- 测试点 18-21 没有额外限制。\n\n供题：Daniel Zhang", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Counting Haybales P", "background": "", "description": "如同往常一样，奶牛 Bessie 正在 Farmer John 的牛棚里制造麻烦。FJ 有 $N$（$1 \\le N \\le 5000$）堆草堆。对于每个 $i \\in [1,N]$，第 $i$ 堆草堆有 $h_i$（$1 \\le h_i \\le 10^9$）的草。Bessie 不想让任何的草倒下来，所以她唯一可以执行的操作为：\n\n如果两个相邻的草堆的高度相差恰好为 $1$，她可以将较高的草堆中最上方的草移到较低的草堆之上。\n\n执行有限多次上述操作后，可以得到多少种不同的高度序列，对 $10^9+7$ 取模？两个高度序列被认为是相同的，如果对于所有 $i$，第 $i$ 堆草堆在两者中具有相同数量的草。", "inputFormat": "输入的第一行包含 $T$，为独立的子测试用例的数量，必须全部回答正确才能通过整个测试用例。\n\n每个子测试用例包含 $N$，以及一个 $N$ 个高度的序列。输入保证所有子测试用例的 $N$ 之和不超过 $5000$。", "outputFormat": "输出 $T$ 行，每行输出一个子测试用例的答案。", "hint": "【样例解释】\n\n对于第一个子测试用例，四个可能的高度序列为：\n\n$(2,2,2,3),(2,2,3,2),(2,3,2,2),(3,2,2,2)$\n\n对于第二个子测试用例，四个可能的高度序列为：\n\n$(2,3,3,1),(3,2,3,1),(3,3,2,1),(3,3,1,2)$\n\n【数据范围】\n\n- 测试点 1-3 满足 $N \\le 10$。\n- 测试点 4 满足对于所有 $i$，有 $1 \\le h_i \\le 3$。\n- 测试点 5-7 满足对于所有 $i$，有 $|h_i-i| \\le 1$。\n- 测试点 8-10 满足对于所有 $i$，有 $1 \\le h_i \\le 4$，且 $N \\le 100$。\n- 测试点 11-13 满足 $N \\le 100$。\n- 测试点 14-17 满足 $N \\le 1000$。\n- 测试点 18-21 没有额外限制。\n\n供题：Daniel Zhang", "locale": "zh-CN"}}}
{"pid": "P8101", "type": "P", "difficulty": 6, "samples": [["3\n\n2\n-2 0\n1 0\n\n2\n0 -2\n0 1\n\n3\n-5 -5\n5 1\n10 10", "242"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "凸包", "极角排序", "闵可夫斯基和 Minkowski sum"], "title": "[USACO22JAN] Multiple Choice Test P", "background": "", "description": "奶牛们正在参加一个选择题测试。在通常的测试中，对每个问题你的选项会被单独评分然后累加，而在此测试中，你的选项在累加之后再评分。\n\n具体地说，你被给定二维平面上的 $N$（$2 \\le N \\le 10^5$）组整数向量，其中每个向量用一个有序对 $(x,y)$ 表示。从每组中选择一个向量，使向量的总和尽可能远离原点。\n\n输入保证向量的总数不超过 $2 \\times 10^5$。每组至少包含 $2$ 个向量，并且一组内所有向量各不相同。输入同时保证每个 $x$ 和 $y$ 坐标的绝对值不超过 $\\dfrac{10^9}{N}$。", "inputFormat": "输入的第一行包含 $N$，为向量的组数。\n\n每一组的第一行包含 $G$，为组中的向量数。以下 $G$ 行包含组中的向量。相邻组之间用空行分隔。", "outputFormat": "输出最大可能的欧几里得距离的平方。", "hint": "【样例解释】\n\n最优方案是从第一组选择 $(1,0)$，从第二组中选择 $(0,1)$，从第三组选择 $(10,10)$。这些向量之和等于 $(11,11)$，与原点的距离平方等于 $11^2+11^2=242$。\n\n【数据范围】\n\n- 测试点 1-5 中，向量的总数不超过 $10^3$。\n- 测试点 6-9 中，每一组恰好包含 $2$ 个向量。\n- 测试点 10-17 没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Multiple Choice Test P", "background": "", "description": "奶牛们正在参加一个选择题测试。在通常的测试中，对每个问题你的选项会被单独评分然后累加，而在此测试中，你的选项在累加之后再评分。\n\n具体地说，你被给定二维平面上的 $N$（$2 \\le N \\le 10^5$）组整数向量，其中每个向量用一个有序对 $(x,y)$ 表示。从每组中选择一个向量，使向量的总和尽可能远离原点。\n\n输入保证向量的总数不超过 $2 \\times 10^5$。每组至少包含 $2$ 个向量，并且一组内所有向量各不相同。输入同时保证每个 $x$ 和 $y$ 坐标的绝对值不超过 $\\dfrac{10^9}{N}$。", "inputFormat": "输入的第一行包含 $N$，为向量的组数。\n\n每一组的第一行包含 $G$，为组中的向量数。以下 $G$ 行包含组中的向量。相邻组之间用空行分隔。", "outputFormat": "输出最大可能的欧几里得距离的平方。", "hint": "【样例解释】\n\n最优方案是从第一组选择 $(1,0)$，从第二组中选择 $(0,1)$，从第三组选择 $(10,10)$。这些向量之和等于 $(11,11)$，与原点的距离平方等于 $11^2+11^2=242$。\n\n【数据范围】\n\n- 测试点 1-5 中，向量的总数不超过 $10^3$。\n- 测试点 6-9 中，每一组恰好包含 $2$ 个向量。\n- 测试点 10-17 没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P8102", "type": "P", "difficulty": 4, "samples": [["3 2 50\n60 100 70", "270"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["单调队列", "2022", "O2优化"], "title": "「LCOI2022」 Cow Insertion", "background": "Farmer John 迎来了新奶牛——Bessie。每个奶牛都会有一定的开心值，Farmer John 希望 Bessie 能更幸福的生活在这里。", "description": "牛棚里原来有 $n$ 头奶牛，开心值的感染距离 $m$，并且 $a_i$ 表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。并且，Bessie 同样拥有一个开心值 $A$。\n\n整个牛棚的开心值是 $\\sum\\limits_{i=1}^{n-m+1}\\ \\max\\limits_{i\\le j\\le i+m-1}\\ a_j$，Bessie 可以住在任意两头牛的中间或起始以及最后。Farmer John 想知道：Bessie 来这里之后，整个牛棚的开心值最大为多少。", "inputFormat": "第一行包含三个整数 $n,m,A$。分别表示为奶牛个数，开心值的感染距离，以及 Bessie 的开心值。\n\n接下来一行，包含 $n$ 个数 $a_i$，表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。", "outputFormat": "仅一行，表示 Bessie 来这里之后，整个牛棚的开心值的最大值。", "hint": "【样例解释】\n- 当 Bessie 在第一个位置时（$50,60,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{60,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第二个位置时（$60,50,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{50,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第三个位置时（$60,100,50,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,50}+\\max\\cases{50,70}$，即 $100+100+70=270$。\n- 当 Bessie 在第四个位置时（$60,100,70,50$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,70}+\\max\\cases{70,50}$，即 $70+100+100=270$。\n\n显然，整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{260,260,270,270}=270$。\n\n【数据范围与约定】\n\n|subtask|$n\\le$|分值|\n|:-:|:-:|:-:|\n|$1$|$5\\times10^2$|$10$|\n|$2$|$5\\times10^3$|$20$|\n|$3$|$5\\times10^6$|$70$|\n\n对于 $100\\%$ 的数据，$1\\le m\\le n$，$0\\le a_i, A\\le100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Insertion", "background": "Farmer John 迎来了新奶牛——Bessie。每个奶牛都会有一定的开心值，Farmer John 希望 Bessie 能更幸福的生活在这里。", "description": "牛棚里原来有 $n$ 头奶牛，开心值的感染距离 $m$，并且 $a_i$ 表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。并且，Bessie 同样拥有一个开心值 $A$。\n\n整个牛棚的开心值是 $\\sum\\limits_{i=1}^{n-m+1}\\ \\max\\limits_{i\\le j\\le i+m-1}\\ a_j$，Bessie 可以住在任意两头牛的中间或起始以及最后。Farmer John 想知道：Bessie 来这里之后，整个牛棚的开心值最大为多少。", "inputFormat": "第一行包含三个整数 $n,m,A$。分别表示为奶牛个数，开心值的感染距离，以及 Bessie 的开心值。\n\n接下来一行，包含 $n$ 个数 $a_i$，表示原来牛棚中第 $i(1\\le i\\le n)$ 头牛的开心值。", "outputFormat": "仅一行，表示 Bessie 来这里之后，整个牛棚的开心值的最大值。", "hint": "【样例解释】\n- 当 Bessie 在第一个位置时（$50,60,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{60,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第二个位置时（$60,50,100,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,50}+\\max\\cases{50,100}+\\max\\cases{100,70}$，即 $60+100+100=260$。\n- 当 Bessie 在第三个位置时（$60,100,50,70$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,50}+\\max\\cases{50,70}$，即 $100+100+70=270$。\n- 当 Bessie 在第四个位置时（$60,100,70,50$），整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{60,100}+\\max\\cases{100,70}+\\max\\cases{70,50}$，即 $70+100+100=270$。\n\n显然，整个牛棚的开心值的最大值为 $\\newcommand{\\cases}[1]{\\{#1\\}}\\max\\cases{260,260,270,270}=270$。\n\n【数据范围与约定】\n\n|subtask|$n\\le$|分值|\n|:-:|:-:|:-:|\n|$1$|$5\\times10^2$|$10$|\n|$2$|$5\\times10^3$|$20$|\n|$3$|$5\\times10^6$|$70$|\n\n对于 $100\\%$ 的数据，$1\\le m\\le n$，$0\\le a_i, A\\le100$。", "locale": "zh-CN"}}}
{"pid": "P8103", "type": "P", "difficulty": 4, "samples": [["3\n4\n1 2 3 2\n5\n3 9 6 18 12\n5\n2 3 5 7 11", "YES\n4\n3 1\n1 2\n3 4\n2 4\nYES\n6\n2 1\n1 2\n4 3\n2 3\n4 5\n3 5\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge"], "title": "「LCOI2022」 Cow Merger", "background": "Bessie 来到她的新家之后，Farmer John 突然意识到自己农场的大小不够了！\n\n所以，Farmer John 需要把所有的奶牛合并到一个牛棚里。", "description": "Farmer John 的农场里本来有 $n$ 个牛棚，第 $i$ 个牛棚里住着 $a_i$ 只牛。\n\n我们定义一次合并 $i,j(a_i\\ge a_j)$ 两个牛棚的操作为：从 $i$ 号牛棚中拿出 $a_j$ 头牛，放入 $j$ 号牛棚中。如果在合并结束后 $a_i=0$，那么可以看做 $a_i$ 被合并了，接下来的操作也与 $a_i$ 无关。\n\n由于时间不够了，他决定最多你 $1$ 秒的时间。", "inputFormat": "第一行包含一个整数 $T$，表示数据组数。  \n\n对于第 $t$ 组数据:\n\n第 $2t$ 行包含一个整数 $n$。\n\n第 $2t+1$ 行包含 $n$ 个整数，第 $i$ 个整数为 $a_i$。 ", "outputFormat": "对于每组数据：  \n\n如果你发现自己不可能达到目标，输出 `NO`，否则输出 `YES`。\n\n接下来一行，输出一个整数 $m$ 表示操作次数。\n\n接下来 $m$ 行，每行输出两个数 $i$ 和 $j$（注意操作时应满足 $a_i \\ge a_j$）。\n\n**有多解时可输出任意一组解。**", "hint": "【数据范围与约定】\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 5$，$1 \\leq n \\leq  10^5$，$0 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Merger", "background": "Bessie 来到她的新家之后，Farmer John 突然意识到自己农场的大小不够了！\n\n所以，Farmer John 需要把所有的奶牛合并到一个牛棚里。", "description": "Farmer John 的农场里本来有 $n$ 个牛棚，第 $i$ 个牛棚里住着 $a_i$ 只牛。\n\n我们定义一次合并 $i,j(a_i\\ge a_j)$ 两个牛棚的操作为：从 $i$ 号牛棚中拿出 $a_j$ 头牛，放入 $j$ 号牛棚中。如果在合并结束后 $a_i=0$，那么可以看做 $a_i$ 被合并了，接下来的操作也与 $a_i$ 无关。\n\n由于时间不够了，他决定最多你 $1$ 秒的时间。", "inputFormat": "第一行包含一个整数 $T$，表示数据组数。  \n\n对于第 $t$ 组数据:\n\n第 $2t$ 行包含一个整数 $n$。\n\n第 $2t+1$ 行包含 $n$ 个整数，第 $i$ 个整数为 $a_i$。 ", "outputFormat": "对于每组数据：  \n\n如果你发现自己不可能达到目标，输出 `NO`，否则输出 `YES`。\n\n接下来一行，输出一个整数 $m$ 表示操作次数。\n\n接下来 $m$ 行，每行输出两个数 $i$ 和 $j$（注意操作时应满足 $a_i \\ge a_j$）。\n\n**有多解时可输出任意一组解。**", "hint": "【数据范围与约定】\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 5$，$1 \\leq n \\leq  10^5$，$0 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8104", "type": "P", "difficulty": 7, "samples": [["30", "1\n48\n108\n27\n0\n0\n0\n0"], ["114514", "1\n32826\n344727\n1199826\n1504818\n538731\n25515\n0\n"]], "limits": {"time": [500, 500, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "数论", "O2优化", "素数判断,质数,筛法"], "title": "「LCOI2022」 Cow Function", "background": "Bessie 和大家正坐在刚刚合并完成的牛棚里，跟着 Farmer John 在一起学习循环展开。\n\nFarmer John 说，如果一个循环展开的步长为 $8$，会对程序效率有很大的提升。\n\n课后，Farmer John 布置了一道题，要求在 $1$ 秒内算出 $f(x)=\\sum\\limits_{i=1}^x3^{\\omega(i)}$。Bessie 用 $20$ 分钟打了一个 $Θ(n\\log_2 n\\sqrt n)$ 代码，一交直接 TLE。于是，Bessie 来向你求助。", "description": "她想要求出对于 $k\\in\\{0,1,\\dots,7\\}$，$f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k\\pmod 8]3^{\\omega(i)}$ 的值。\n\n上面的算式中，$\\omega(i)$ 表示 $i$ 含有几种质因子，例如 $\\omega(12)=\\omega(6)=2,\\omega(114514)=3$。", "inputFormat": "仅一行，包含一个整数 $n$。", "outputFormat": "共 $8$ 行，分别输出 $k=0,1,2,3,4,5,6,7$ 时 $f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k \\pmod 8]3^{\\omega(i)}$ 的值。", "hint": "【数据规模与约定】\n|subtask|$n\\le$|所占分值|时间限制|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$10$|$500\\texttt{ms}$|\n|$2$|$2\\times10^6$|$20$|$1000\\texttt{ms}$|\n|$3$|$3\\times10^7$|$20$|$1000\\texttt{ms}$|\n|$4$|$10^9$|$20$|$4000\\texttt{ms}$|\n|$5$|$10^{10}$|$30$|$4000\\texttt{ms}$|\n\n\n\n如果你需要循环展开生成器，请前往附件下载。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Function", "background": "Bessie 和大家正坐在刚刚合并完成的牛棚里，跟着 Farmer John 在一起学习循环展开。\n\nFarmer John 说，如果一个循环展开的步长为 $8$，会对程序效率有很大的提升。\n\n课后，Farmer John 布置了一道题，要求在 $1$ 秒内算出 $f(x)=\\sum\\limits_{i=1}^x3^{\\omega(i)}$。Bessie 用 $20$ 分钟打了一个 $Θ(n\\log_2 n\\sqrt n)$ 代码，一交直接 TLE。于是，Bessie 来向你求助。", "description": "她想要求出对于 $k\\in\\{0,1,\\dots,7\\}$，$f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k\\pmod 8]3^{\\omega(i)}$ 的值。\n\n上面的算式中，$\\omega(i)$ 表示 $i$ 含有几种质因子，例如 $\\omega(12)=\\omega(6)=2,\\omega(114514)=3$。", "inputFormat": "仅一行，包含一个整数 $n$。", "outputFormat": "共 $8$ 行，分别输出 $k=0,1,2,3,4,5,6,7$ 时 $f(n)=\\sum_{i=1}\\limits^n[\\omega(i)\\equiv k \\pmod 8]3^{\\omega(i)}$ 的值。", "hint": "【数据规模与约定】\n|subtask|$n\\le$|所占分值|时间限制|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$10$|$500\\texttt{ms}$|\n|$2$|$2\\times10^6$|$20$|$1000\\texttt{ms}$|\n|$3$|$3\\times10^7$|$20$|$1000\\texttt{ms}$|\n|$4$|$10^9$|$20$|$4000\\texttt{ms}$|\n|$5$|$10^{10}$|$30$|$4000\\texttt{ms}$|\n\n\n\n如果你需要循环展开生成器，请前往附件下载。", "locale": "zh-CN"}}}
{"pid": "P8105", "type": "P", "difficulty": 5, "samples": [["3 7\n1 1\n1 3\n3 1\n1 1 2 1 -2\n4 1 3\n2 1 3 2 0 270\n4 1 2\n3 1 2 2 2 2 1\n4 1 3\n4 3 3", "2.3333333333 0.3333333333\n2.0000000000 0.0000000000\n1.6666666667 -1.0000000000\n1.0000000000 1.0000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2022", "Special Judge", "O2优化"], "title": "「LCOI2022」 Cow Dance", "background": "Bessie 带着他的奶牛姐妹们来跳舞了。\n\n她们已经规划好了跳舞的步骤，但是为了更加美观，她们需要知道其中一些头奶牛在某时的平均位置，已达到更完美的表演效果。\n\n不幸的是，由于 Bessie 的姐妹太多了，最多会有 $8\\times 10^4$ 只奶牛同时来跳舞。她没有什么方便且快速的方法算这些平均位置，所以向你求助。", "description": "Bessie 和她的姐妹们已经排好了位置，第 $i$ 头奶牛的坐标为 $(x_i,y_i)$。其中，$x_i$ 是 $x$ 轴坐标，$y_i$ 是 $y$ 轴坐标。\n\n她们的舞蹈队形会有这几种变换方式：\n1. 移动：$x$ 到 $y$ 号奶牛的 $x_i\\to x_i+a$，$y_i\\to y_i+b$。\n1. 旋转：$x$ 到 $y$ 号奶牛以 $(a,b)$ 为旋转中心顺时针旋转 $g°$。\n1. 散开: $x$ 到 $y$ 号奶牛以 $(a,b)$ 为中心散开为 $\\dfrac{p}{q}$ 倍。即设之前奶牛坐标为 $A$，散开后坐标为 $B$，$(a,b)$ 为 $G$，$\\overrightarrow{GB}=\\dfrac{p}{q}\\overrightarrow{GA}$。\n\nBessie 想知道：对于 $x$ 到 $y$ 号奶牛，他们的平均位置 $(\\frac{\\sum\\limits^y_{i=x}x_i}{y-x+1},\\frac{\\sum\\limits^y_{i=x}y_i}{y-x+1})$。\n\n舞会就要开始了，所以她只能给你 $\\texttt{1s}$ 的时间。", "inputFormat": "第一行两个整数，$n,m$。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$，表示第 $i(1\\le i\\le n)$ 个点的坐标\n\n接下来 $m$ 行，每行第一个整数为 $opt$。\n\n若 $opt=1$，则接下来包含四个整数 $x,y,a,b$，进行一次移动操作。\n\n若 $opt=2$，则接下来包含五个整数 $x,y,a,b,g$，进行一次旋转操作。\n\n若 $opt=3$，则接下来包含六个整数 $x,y,a,b,p,q$，进行一次散开操作。\n\n若 $opt=4$，则接下来包含两个整数 $x,y$，表示询问编号为 $x \\sim y$ 的奶牛的平均位置。", "outputFormat": "即询问结果，以换行隔开，答案误差允许在 $10^{-4}$ 的范围内。", "hint": "【样例解释】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3jt6apa4.png)\n\n$0$ 为初始情况。$1$ 为进行样例中 `1 1 2 1 -2` 操作后结果。$2$ 为进行样例中 `2 1 3 2 0 270` 操作后结果。$3$ 为进行样例中 `3 1 2 2 2 2 1` 操作后结果。\n\n【数据范围与约定】\n\n保证运算时所有数的绝对值小于或等于 $10^{15}$。\n\n|subtask|特殊限制|分数|\n|:-:|:-:|:-:|\n|$1$|$1\\le n,m\\le10^3$|$8$|\n|$2$|只有旋转操作且都按奶牛为旋转中心|$18$|\n|$3$|只有散开操作且都按奶牛为位似中心|$18$|\n|$4$|没有旋转和散开操作|$8$|\n|$5$|对于所有操作和询问 $x=y$|$18$|\n|$6$|旋转中心和散开中心都是奶牛|$8$|\n|$7$|$1\\le n,m\\le 8\\times10^4$|$10$|\n|$8$|没有特殊限制|$12$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le3\\times10^5$，$1\\le x\\le y\\le n$，$-32768\\le a,b<32768$，$0< \\dfrac{p}{q}\\le 233333$，$0\\le g\\le359$，初始坐标限制同 $a,b$。\n\n### **注：**\n- **请注意常数因子优化。**\n- **此题输入输出量较大，建议使用 `scanf` 和 `printf`。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LCOI2022」 Cow Dance", "background": "Bessie 带着他的奶牛姐妹们来跳舞了。\n\n她们已经规划好了跳舞的步骤，但是为了更加美观，她们需要知道其中一些头奶牛在某时的平均位置，已达到更完美的表演效果。\n\n不幸的是，由于 Bessie 的姐妹太多了，最多会有 $8\\times 10^4$ 只奶牛同时来跳舞。她没有什么方便且快速的方法算这些平均位置，所以向你求助。", "description": "Bessie 和她的姐妹们已经排好了位置，第 $i$ 头奶牛的坐标为 $(x_i,y_i)$。其中，$x_i$ 是 $x$ 轴坐标，$y_i$ 是 $y$ 轴坐标。\n\n她们的舞蹈队形会有这几种变换方式：\n1. 移动：$x$ 到 $y$ 号奶牛的 $x_i\\to x_i+a$，$y_i\\to y_i+b$。\n1. 旋转：$x$ 到 $y$ 号奶牛以 $(a,b)$ 为旋转中心顺时针旋转 $g°$。\n1. 散开: $x$ 到 $y$ 号奶牛以 $(a,b)$ 为中心散开为 $\\dfrac{p}{q}$ 倍。即设之前奶牛坐标为 $A$，散开后坐标为 $B$，$(a,b)$ 为 $G$，$\\overrightarrow{GB}=\\dfrac{p}{q}\\overrightarrow{GA}$。\n\nBessie 想知道：对于 $x$ 到 $y$ 号奶牛，他们的平均位置 $(\\frac{\\sum\\limits^y_{i=x}x_i}{y-x+1},\\frac{\\sum\\limits^y_{i=x}y_i}{y-x+1})$。\n\n舞会就要开始了，所以她只能给你 $\\texttt{1s}$ 的时间。", "inputFormat": "第一行两个整数，$n,m$。\n\n接下来 $n$ 行，每行两个整数 $x_i,y_i$，表示第 $i(1\\le i\\le n)$ 个点的坐标\n\n接下来 $m$ 行，每行第一个整数为 $opt$。\n\n若 $opt=1$，则接下来包含四个整数 $x,y,a,b$，进行一次移动操作。\n\n若 $opt=2$，则接下来包含五个整数 $x,y,a,b,g$，进行一次旋转操作。\n\n若 $opt=3$，则接下来包含六个整数 $x,y,a,b,p,q$，进行一次散开操作。\n\n若 $opt=4$，则接下来包含两个整数 $x,y$，表示询问编号为 $x \\sim y$ 的奶牛的平均位置。", "outputFormat": "即询问结果，以换行隔开，答案误差允许在 $10^{-4}$ 的范围内。", "hint": "【样例解释】\n![](https://cdn.luogu.com.cn/upload/image_hosting/3jt6apa4.png)\n\n$0$ 为初始情况。$1$ 为进行样例中 `1 1 2 1 -2` 操作后结果。$2$ 为进行样例中 `2 1 3 2 0 270` 操作后结果。$3$ 为进行样例中 `3 1 2 2 2 2 1` 操作后结果。\n\n【数据范围与约定】\n\n保证运算时所有数的绝对值小于或等于 $10^{15}$。\n\n|subtask|特殊限制|分数|\n|:-:|:-:|:-:|\n|$1$|$1\\le n,m\\le10^3$|$8$|\n|$2$|只有旋转操作且都按奶牛为旋转中心|$18$|\n|$3$|只有散开操作且都按奶牛为位似中心|$18$|\n|$4$|没有旋转和散开操作|$8$|\n|$5$|对于所有操作和询问 $x=y$|$18$|\n|$6$|旋转中心和散开中心都是奶牛|$8$|\n|$7$|$1\\le n,m\\le 8\\times10^4$|$10$|\n|$8$|没有特殊限制|$12$|\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le3\\times10^5$，$1\\le x\\le y\\le n$，$-32768\\le a,b<32768$，$0< \\dfrac{p}{q}\\le 233333$，$0\\le g\\le359$，初始坐标限制同 $a,b$。\n\n### **注：**\n- **请注意常数因子优化。**\n- **此题输入输出量较大，建议使用 `scanf` 和 `printf`。**", "locale": "zh-CN"}}}
{"pid": "P8106", "type": "P", "difficulty": 4, "samples": [["3", "2"], ["6", "10"], ["65535", "459810767"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "O2优化", "组合数学"], "title": "[Cnoi2021] 数学练习", "background": "「Cnoi2021」Cirno's Easy Round II 热身赛开始了。", "description": "为了让选手们重视文化课，Cirno 特意加入了一道 Kamishirasawa Keine 老师的数学练习：\n\n> 求将一个集合 $\\texttt{U}=\\{1,2,3,\\cdots,n\\}$ 划分成两个子集 $S,T$，使得 $|S|\\notin S,|T|\\notin T$ 的方案数。\n\n由于选手都不会高精度，所以答案只需要对 $998244353$ 取模即可。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "**样例解释** \n\n#1: 两种合法的划分方案为 $\\{1,3\\},\\{2\\}$ 与 $\\{2\\},\\{1,3\\}$ 。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^5$。\n\n重收录自 XDUCPC 2021 网络赛 B。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 数学练习", "background": "「Cnoi2021」Cirno's Easy Round II 热身赛开始了。", "description": "为了让选手们重视文化课，Cirno 特意加入了一道 Kamishirasawa Keine 老师的数学练习：\n\n> 求将一个集合 $\\texttt{U}=\\{1,2,3,\\cdots,n\\}$ 划分成两个子集 $S,T$，使得 $|S|\\notin S,|T|\\notin T$ 的方案数。\n\n由于选手都不会高精度，所以答案只需要对 $998244353$ 取模即可。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "一行，一个整数，表示答案。", "hint": "**样例解释** \n\n#1: 两种合法的划分方案为 $\\{1,3\\},\\{2\\}$ 与 $\\{2\\},\\{1,3\\}$ 。\n\n**数据范围**\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^5$。\n\n重收录自 XDUCPC 2021 网络赛 B。", "locale": "zh-CN"}}}
{"pid": "P8107", "type": "P", "difficulty": 5, "samples": [["4 5", "166374059 166374059 457528662 748683265 457528662"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["动态规划 DP", "2021", "O2优化"], "title": "[Cnoi2021] 未来试题", "background": "在 Cnoi2021 验题查重环节中，Cirno 发现在遥远的未来，2077 年蚯蚓科技大学（某不知名外界学校）的新生赛中的一道题竟然意外地与这套试题的某题有着 $9\\%$ 的相似度。\n\n>给你一个正整数 $n$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序对数量的期望在$\\bmod 10^9+7$ 的意义下的答案。（2077-xidian-freshman-online Problem.D）\n\n答案显然是 $\\frac{n(n-1)}{4}$。\n\n作为算术天才，Cirno 一眼就看了出来。\n\n但无需担忧，与未来试题相撞不算撞题，所以这道题便出现在了你的面前。", "description": "给你两个正整数 $n,k$。\n\n对 $\\forall i \\in [0,k)$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序的个数对 $k$ 取模后，余数为 $i$ 的概率，答案对 $998244353$ 取模。\n", "inputFormat": "一行，输入两个整数 $n,k$。", "outputFormat": "一行，$k$ 个整数，用空格隔开，第 $i$ 个表示全排列中逆序的个数对 $k$ 取模后，余数为 $i-1$ 的概率。", "hint": "\n\n**样例解释**\n\n|逆序对数|排列|\n|-----|-----|\n|0|$(1,2,3,4)$|\n|1|$(1,2,4,3)(1,3,2,4)(2,1,3,4)$|\n|2|$(1,3,4,2)(1,4,2,3)(2,1,4,3)(2,3,1,4)(3,1,2,4)$|\n|3|$(1,4,3,2)(2,3,4,1)(2,4,1,3)(3,1,4,2)(3,2,1,4)(4,1,2,3)$|\n|4|$(2,4,3,1)(3,2,4,1)(3,4,1,2)(4,1,3,2)(4,2,1,3)$|\n|5|$(3,4,2,1)(4,2,3,1)(4,3,1,2)$|\n|6|$(4,3,2,1)$|\n\n**数据范围**\n\n对于 $100\\%$ 的数据保证 $1\\le n\\le 10^5$，$2\\le k\\le1000$。\n\n重收录自 XDUCPC 2021 现场赛 F。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 未来试题", "background": "在 Cnoi2021 验题查重环节中，Cirno 发现在遥远的未来，2077 年蚯蚓科技大学（某不知名外界学校）的新生赛中的一道题竟然意外地与这套试题的某题有着 $9\\%$ 的相似度。\n\n>给你一个正整数 $n$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序对数量的期望在$\\bmod 10^9+7$ 的意义下的答案。（2077-xidian-freshman-online Problem.D）\n\n答案显然是 $\\frac{n(n-1)}{4}$。\n\n作为算术天才，Cirno 一眼就看了出来。\n\n但无需担忧，与未来试题相撞不算撞题，所以这道题便出现在了你的面前。", "description": "给你两个正整数 $n,k$。\n\n对 $\\forall i \\in [0,k)$，求等概率生成一个长度为 $n$ 的全排列时，全排列中逆序的个数对 $k$ 取模后，余数为 $i$ 的概率，答案对 $998244353$ 取模。\n", "inputFormat": "一行，输入两个整数 $n,k$。", "outputFormat": "一行，$k$ 个整数，用空格隔开，第 $i$ 个表示全排列中逆序的个数对 $k$ 取模后，余数为 $i-1$ 的概率。", "hint": "\n\n**样例解释**\n\n|逆序对数|排列|\n|-----|-----|\n|0|$(1,2,3,4)$|\n|1|$(1,2,4,3)(1,3,2,4)(2,1,3,4)$|\n|2|$(1,3,4,2)(1,4,2,3)(2,1,4,3)(2,3,1,4)(3,1,2,4)$|\n|3|$(1,4,3,2)(2,3,4,1)(2,4,1,3)(3,1,4,2)(3,2,1,4)(4,1,2,3)$|\n|4|$(2,4,3,1)(3,2,4,1)(3,4,1,2)(4,1,3,2)(4,2,1,3)$|\n|5|$(3,4,2,1)(4,2,3,1)(4,3,1,2)$|\n|6|$(4,3,2,1)$|\n\n**数据范围**\n\n对于 $100\\%$ 的数据保证 $1\\le n\\le 10^5$，$2\\le k\\le1000$。\n\n重收录自 XDUCPC 2021 现场赛 F。", "locale": "zh-CN"}}}
{"pid": "P8108", "type": "P", "difficulty": 6, "samples": [["3\n1 1 2\n2 3 1\n3 2 3", "5"], ["5\n2 1 4 4 2\n2 5 5 1 3\n4 1 3 5 1\n3 2 5 3 5\n1 4 4 2 3", "15"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "树状数组", "2021", "O2优化"], "title": "[Cnoi2021] 绀珠传说", "background": "Cirno 编写了一款新的游戏「绀珠传说 ~ Tales of Cyansis Pearl」。\n\n\n游戏示例（样例 #1）:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxvo35po.png)", "description": "游戏规则如下:\n\n初始有一个 $n\\times n$ 的网格，每个格子内有一颗绀珠。\n\n绀珠共有 $n$ 种颜色，每种颜色的恰有 $n$ 颗，**均匀随机**地分布在 $n\\times n$ 的网格中。\n\n每次玩家可以在网格的底端一行选取若干个连续相同颜色的绀珠并将其消除。\n\n消除后，上层绀珠会受重力影响下落。\n\n玩家重复上述操作直至绀珠全部被消除。游戏结束。\n\n现在，Cirno 给定你游戏绀珠传说的一个**均匀随机**的初始局面，求完成游戏的最小步数。", "inputFormat": "第一行，一个整数 $n$。\n\n以下 $n$ 行，每行 $n$ 个整数，整数的范围为 $[1,n]$。\n\n保证每个整数出现次数恰好为 $n$。", "outputFormat": "一行，一个整数表示最小步数。", "hint": "对于 $100\\%$ 的数据保证 $1 \\le n \\le 1000$。保证数据**随机生成**。\n\n重收录自 XDUCPC 2021 现场赛 J。", "locale": "zh-CN", "translations": {"en": {"title": "[Cnoi2021] Tales of Cyansis Pearl", "background": "Cirno made a new game called “Tales of Cyansis Pearl”.\n\nGame example (Sample #1):\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxvo35po.png)", "description": "The rules are as follows:\n\nAt the beginning, there is an $n \\times n$ grid, and each cell contains one Cyansis Pearl.\n\nThere are $n$ colors in total. For each color, there are exactly $n$ pearls, distributed **uniformly at random** in the $n \\times n$ grid.\n\nEach time, the player may choose several consecutive pearls of the same color on the bottom row of the grid and remove them.\n\nAfter removal, the pearls above will fall down due to gravity.\n\nThe player repeats the above operation until all pearls are removed. Then the game ends.\n\nNow, Cirno gives you a **uniformly random** initial board of the game Tales of Cyansis Pearl. Find the minimum number of moves to finish the game.", "inputFormat": "The first line contains an integer $n$.\n\nThe following $n$ lines each contain $n$ integers, each in the range $[1, n]$.\n\nIt is guaranteed that each integer appears exactly $n$ times.", "outputFormat": "Output one line containing an integer, the minimum number of moves.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 1000$. The input is guaranteed to be **randomly generated**.\n\nReprinted from XDUCPC 2021 Onsite Contest J.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Cnoi2021] 绀珠传说", "background": "Cirno 编写了一款新的游戏「绀珠传说 ~ Tales of Cyansis Pearl」。\n\n\n游戏示例（样例 #1）:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pxvo35po.png)", "description": "游戏规则如下:\n\n初始有一个 $n\\times n$ 的网格，每个格子内有一颗绀珠。\n\n绀珠共有 $n$ 种颜色，每种颜色的恰有 $n$ 颗，**均匀随机**地分布在 $n\\times n$ 的网格中。\n\n每次玩家可以在网格的底端一行选取若干个连续相同颜色的绀珠并将其消除。\n\n消除后，上层绀珠会受重力影响下落。\n\n玩家重复上述操作直至绀珠全部被消除。游戏结束。\n\n现在，Cirno 给定你游戏绀珠传说的一个**均匀随机**的初始局面，求完成游戏的最小步数。", "inputFormat": "第一行，一个整数 $n$。\n\n以下 $n$ 行，每行 $n$ 个整数，整数的范围为 $[1,n]$。\n\n保证每个整数出现次数恰好为 $n$。", "outputFormat": "一行，一个整数表示最小步数。", "hint": "对于 $100\\%$ 的数据保证 $1 \\le n \\le 1000$。保证数据**随机生成**。\n\n重收录自 XDUCPC 2021 现场赛 J。", "locale": "zh-CN"}}}
{"pid": "P8109", "type": "P", "difficulty": 3, "samples": [["5\n1 2 3 4 5\n2 3 3 3 3", "12"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "O2优化"], "title": "[Cnoi2021] 幻想乡程序设计大赛", "background": "幻想乡，春。\n\n新年的土地吐出稚嫩的幼芽，第一届幻想乡程序设计大赛(Inner-Gensokyo Programming Contest, IGPC)拉开帷幕。作为举办者， Cirno 却有些不得不考虑的事情。\n\n那就是气球的分配问题。\n\n", "description": "本场比赛共有 $n$ 道题，Cirno 已经精确预测了每道题目的 AC 队伍数 $a_1,a_2,a_3,\\cdots,a_n$。但由于经费限制，主办方 $n$ 种颜色的气球分别只准备了 $b_1,b_2,b_3,\\cdots,b_n$ 个。\n\n而 Cirno 需要合理地安排每道题目对应的气球颜色，使得能派发的气球尽可能多。\n\n显然地，每道题目只能对应一种颜色的气球，每种颜色的气球只能对应一道题目，如果一道题有队伍通过但该种颜色的气球已经发完了，则很遗憾，该队拿不到这种气球了。\n\n由于这个问题过于 trival，于是 Cirno 决定将这个任务分配给你。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，$n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行，$n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。\n", "outputFormat": "一行，一个整数，表示最多能派发的气球数。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0 \\le a_i,b_i \\le 10^4$，且 $\\{a_n\\},\\{b_n\\}$ 单调不降。\n\n**子任务**\n\nSubtask1（$60$ points）：$n \\le 8$。\n\nSubtask2（$40$ points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 幻想乡程序设计大赛", "background": "幻想乡，春。\n\n新年的土地吐出稚嫩的幼芽，第一届幻想乡程序设计大赛(Inner-Gensokyo Programming Contest, IGPC)拉开帷幕。作为举办者， Cirno 却有些不得不考虑的事情。\n\n那就是气球的分配问题。\n\n", "description": "本场比赛共有 $n$ 道题，Cirno 已经精确预测了每道题目的 AC 队伍数 $a_1,a_2,a_3,\\cdots,a_n$。但由于经费限制，主办方 $n$ 种颜色的气球分别只准备了 $b_1,b_2,b_3,\\cdots,b_n$ 个。\n\n而 Cirno 需要合理地安排每道题目对应的气球颜色，使得能派发的气球尽可能多。\n\n显然地，每道题目只能对应一种颜色的气球，每种颜色的气球只能对应一道题目，如果一道题有队伍通过但该种颜色的气球已经发完了，则很遗憾，该队拿不到这种气球了。\n\n由于这个问题过于 trival，于是 Cirno 决定将这个任务分配给你。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，$n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行，$n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。\n", "outputFormat": "一行，一个整数，表示最多能派发的气球数。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0 \\le a_i,b_i \\le 10^4$，且 $\\{a_n\\},\\{b_n\\}$ 单调不降。\n\n**子任务**\n\nSubtask1（$60$ points）：$n \\le 8$。\n\nSubtask2（$40$ points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8110", "type": "P", "difficulty": 4, "samples": [["3 0\n1 2 3\n4 5 6", "3"], ["3 3\n1 2 3\n4 5 6", "92160"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "O2优化", "线性代数"], "title": "[Cnoi2021] 矩阵", "background": "Rumia 喜欢矩阵快速幂，而 Cirno 觉得这是平凡的。\n\n为了说服 Rumia，Cirno 提出了这样一个问题。", "description": "给定两个长度为 $n$ 的序列 $\\{a_n\\}$，$\\{b_n\\}$ 与一个整数 $k$。\n\n设矩阵 $A$ 满足 $A_{ij}=a_i\\times b_j$，求 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n第二行 $n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。", "outputFormat": "一行，一个整数，表示 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "hint": "**数据范围**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0\\le k < 998244353$，$|a_i|,|b_i| \\le 10^9$。\n\n**子任务**\n\nSubtask1（10 points）：$n, k \\le 50$。\n\nSubtask2（20 points）：$n \\le 100$。\n\nSubtask3（20 points）：$n \\le 1000$。\n\nSubtask4（50 points）：无特殊限制。\n\n**提示**\n\n矩阵乘法的定义参考[百度百科](https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/5446029?fr=aladdin)页面。\n\n本题中 $A^0$ 表示[单位矩阵](https://baike.baidu.com/item/%E5%8D%95%E4%BD%8D%E7%9F%A9%E9%98%B5/8540268?fr=aladdin)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 矩阵", "background": "Rumia 喜欢矩阵快速幂，而 Cirno 觉得这是平凡的。\n\n为了说服 Rumia，Cirno 提出了这样一个问题。", "description": "给定两个长度为 $n$ 的序列 $\\{a_n\\}$，$\\{b_n\\}$ 与一个整数 $k$。\n\n设矩阵 $A$ 满足 $A_{ij}=a_i\\times b_j$，求 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "inputFormat": "第一行两个整数 $n$，$k$。\n\n第二行 $n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，用空格隔开，表示 $\\{b_n\\}$。", "outputFormat": "一行，一个整数，表示 $A^k$ 的所有元素的和在模 $998244353$ 意义下的结果。", "hint": "**数据范围**\n\n对于 $100\\%$ 的数据保证 $1 \\le n \\le 10^5$，$0\\le k < 998244353$，$|a_i|,|b_i| \\le 10^9$。\n\n**子任务**\n\nSubtask1（10 points）：$n, k \\le 50$。\n\nSubtask2（20 points）：$n \\le 100$。\n\nSubtask3（20 points）：$n \\le 1000$。\n\nSubtask4（50 points）：无特殊限制。\n\n**提示**\n\n矩阵乘法的定义参考[百度百科](https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/5446029?fr=aladdin)页面。\n\n本题中 $A^0$ 表示[单位矩阵](https://baike.baidu.com/item/%E5%8D%95%E4%BD%8D%E7%9F%A9%E9%98%B5/8540268?fr=aladdin)。", "locale": "zh-CN"}}}
{"pid": "P8111", "type": "P", "difficulty": 5, "samples": [["5 2 3 5", "2 3 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2021", "交互题", "Special Judge"], "title": "[Cnoi2021] 区间", "background": "Cirno 有一个区间 $[a,b](1\\le a \\le b \\le n)$，而你的任务是在规定的次数内帮 Rumia 猜出这个区间。\n\n每次，你可向 Cirno 询问一个数字 $k$，而 Cirno 会告诉你这个数字与区间 $[a,b]$ 的关系。", "description": "为了猜到这个区间，你需要实现一个函数 `std::pair<int,int> Guess(int n,int c)`，这个函数的作用是在不超过 $c$ 次询问中猜对 $[1,n]$ 中的一个子闭区间 $[a,b]$，返回值为你最终确定的区间，以 `std::pair<int,int>` 的形式返回。\n\n你可以调用交互库中一个叫做 `Query` 的函数，其原型为 `int Query(int x)`，返回值为：\n\n - 若 $x < a$，返回 $-1$。\n - 若 $x \\in [a,b]$，返回 $0$。\n - 若 $x > b$，返回 $1$。\n\n你调用 `Query` 函数的次数不超过 $c$ 才能得到这个点的分数，否则这个点为 $0$ 分。有关该函数的调用请参考「说明/提示」部分。\n\n在一个测试点中，你的 `Guess` 函数可能被调用多次，最多不超过 $5000$ 次。为了保证你的程序不会超时，你需要额外实现一个函数 `void init()`，这个函数只会在开始时被交互库调用一次。当然，它的实现可以为空。\n\n由于 Rumia 的编译器只支持 C++，所以你只能使用 C++ 语言（包括 C++，C++11，C++14，C++17）来解决本题。", "inputFormat": "样例中输入四个数字 $n$，$a$，$b$，$c$。这些数字你无法读取。", "outputFormat": "样例中给输出三个数字 $l$，$r$，$q$。分别表示你猜的区间与 `Query` 调用测次数。这些你不用输出。", "hint": "**样例解释**\n\n需要求的区间是 $[2,3]$，区间左右端点可能的范围是 $[1,5]$，你最多猜 $5$ 次。\n\n**数据范围与约定**\n\n对于所有数据保证 $1 \\le a \\le b \\le n$；除 SubtaskExtra 外，保证 $1\\le n\\le1500$。\n\n**子任务**\n\nSubtask1（$10$ points）：$c=n$。\n\nSubtask2（$30$ points）：$c=30$。\n\nSubtask3（$30$ points）：$c=22$。\n\nSubtask4（$30$ points）：$c=20$。\n\n**附加任务**\n\nSubtaskExtra（$1$ point）：$1\\le n\\le 10^6$，$c=\\lfloor\\log_2 n\\rfloor+\\lfloor\\log_2 \\frac{4n}{3}\\rfloor$。\n\n本题使用 Special Judge，$100$ 与 $101$ 分均视作 Accepted.\n\n**提示**\n\n如果你不知道怎么解决交互题，可以参考[这题](https://www.luogu.com.cn/problem/P1947)。\n\n本题模板程序与模板交互库见附件中的 `SampleProgram.cpp` 与 `SampleInteractor.cpp`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 区间", "background": "Cirno 有一个区间 $[a,b](1\\le a \\le b \\le n)$，而你的任务是在规定的次数内帮 Rumia 猜出这个区间。\n\n每次，你可向 Cirno 询问一个数字 $k$，而 Cirno 会告诉你这个数字与区间 $[a,b]$ 的关系。", "description": "为了猜到这个区间，你需要实现一个函数 `std::pair<int,int> Guess(int n,int c)`，这个函数的作用是在不超过 $c$ 次询问中猜对 $[1,n]$ 中的一个子闭区间 $[a,b]$，返回值为你最终确定的区间，以 `std::pair<int,int>` 的形式返回。\n\n你可以调用交互库中一个叫做 `Query` 的函数，其原型为 `int Query(int x)`，返回值为：\n\n - 若 $x < a$，返回 $-1$。\n - 若 $x \\in [a,b]$，返回 $0$。\n - 若 $x > b$，返回 $1$。\n\n你调用 `Query` 函数的次数不超过 $c$ 才能得到这个点的分数，否则这个点为 $0$ 分。有关该函数的调用请参考「说明/提示」部分。\n\n在一个测试点中，你的 `Guess` 函数可能被调用多次，最多不超过 $5000$ 次。为了保证你的程序不会超时，你需要额外实现一个函数 `void init()`，这个函数只会在开始时被交互库调用一次。当然，它的实现可以为空。\n\n由于 Rumia 的编译器只支持 C++，所以你只能使用 C++ 语言（包括 C++，C++11，C++14，C++17）来解决本题。", "inputFormat": "样例中输入四个数字 $n$，$a$，$b$，$c$。这些数字你无法读取。", "outputFormat": "样例中给输出三个数字 $l$，$r$，$q$。分别表示你猜的区间与 `Query` 调用测次数。这些你不用输出。", "hint": "**样例解释**\n\n需要求的区间是 $[2,3]$，区间左右端点可能的范围是 $[1,5]$，你最多猜 $5$ 次。\n\n**数据范围与约定**\n\n对于所有数据保证 $1 \\le a \\le b \\le n$；除 SubtaskExtra 外，保证 $1\\le n\\le1500$。\n\n**子任务**\n\nSubtask1（$10$ points）：$c=n$。\n\nSubtask2（$30$ points）：$c=30$。\n\nSubtask3（$30$ points）：$c=22$。\n\nSubtask4（$30$ points）：$c=20$。\n\n**附加任务**\n\nSubtaskExtra（$1$ point）：$1\\le n\\le 10^6$，$c=\\lfloor\\log_2 n\\rfloor+\\lfloor\\log_2 \\frac{4n}{3}\\rfloor$。\n\n本题使用 Special Judge，$100$ 与 $101$ 分均视作 Accepted.\n\n**提示**\n\n如果你不知道怎么解决交互题，可以参考[这题](https://www.luogu.com.cn/problem/P1947)。\n\n本题模板程序与模板交互库见附件中的 `SampleProgram.cpp` 与 `SampleInteractor.cpp`。", "locale": "zh-CN"}}}
{"pid": "P8112", "type": "P", "difficulty": 5, "samples": [["3 5\naba\nabaab", "2"], ["3 5\naba\nababa", "2"], ["3 5\naba\nabbaa", "Fake"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "动态规划 DP", "贪心", "2021", "O2优化", "KMP 算法"], "title": "[Cnoi2021] 符文破译", "background": "Cirno 想要解读一本古老的魔法书。", "description": "为了保护魔法书中记载的禁忌的魔法，撰写者将符咒的魔法词缀不加空格地连接在一起，形成一个符文串，记作 $\\texttt{S}$。\n\n而构成符文串的所有魔法词缀都被记载在更远古的先知所编写的魔法辞典中，记作 $\\texttt{T}$。具体地，$\\texttt{T}$ 的所有非空前缀均是一个合法的魔法词缀。\n\n简洁是魔法书撰写的第一要务，所以使用的魔法词缀应该尽可能少。所以在破译魔法书时，将 $\\texttt{S}$ 分解成的魔法词缀数越少，破译正确的可能性就越高。\n\nCirno 想知道，这本魔法书最少的魔法词缀划分段数是多少。\n\n特别地，如果不存在一种合法的划分方案，则表明这本魔法书是假的。Cirno 将得到一个字符串 `Fake`。", "inputFormat": "第一行，两个整数，表示 $|\\texttt{T}|$，$|\\texttt{S}|$。\n\n第二行，一个字符串 $\\texttt{T}$。\n\n第三行，一个字符串 $\\texttt{S}$。", "outputFormat": "一行，一个整数或一个字符串 `Fake`，表示答案。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据，保证 $1\\le |\\texttt{S}|,|\\texttt{T}|\\le 10^7$，$\\texttt{S}_x,\\texttt{T}_x \\in [\\texttt{a},\\texttt{z}]$。\n\n**子任务**\n\nSubtask1（$10$ points）：$\\texttt{T}_x=\\texttt{a}$。\n\nSubtask2（$20$ points）：$|\\texttt{S}|\\le1000$。\n\nSubtask3（$30$ points）：$|\\texttt{S}|\\le 10^6$。\n\nSubtask4（$40$ points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 符文破译", "background": "Cirno 想要解读一本古老的魔法书。", "description": "为了保护魔法书中记载的禁忌的魔法，撰写者将符咒的魔法词缀不加空格地连接在一起，形成一个符文串，记作 $\\texttt{S}$。\n\n而构成符文串的所有魔法词缀都被记载在更远古的先知所编写的魔法辞典中，记作 $\\texttt{T}$。具体地，$\\texttt{T}$ 的所有非空前缀均是一个合法的魔法词缀。\n\n简洁是魔法书撰写的第一要务，所以使用的魔法词缀应该尽可能少。所以在破译魔法书时，将 $\\texttt{S}$ 分解成的魔法词缀数越少，破译正确的可能性就越高。\n\nCirno 想知道，这本魔法书最少的魔法词缀划分段数是多少。\n\n特别地，如果不存在一种合法的划分方案，则表明这本魔法书是假的。Cirno 将得到一个字符串 `Fake`。", "inputFormat": "第一行，两个整数，表示 $|\\texttt{T}|$，$|\\texttt{S}|$。\n\n第二行，一个字符串 $\\texttt{T}$。\n\n第三行，一个字符串 $\\texttt{S}$。", "outputFormat": "一行，一个整数或一个字符串 `Fake`，表示答案。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据，保证 $1\\le |\\texttt{S}|,|\\texttt{T}|\\le 10^7$，$\\texttt{S}_x,\\texttt{T}_x \\in [\\texttt{a},\\texttt{z}]$。\n\n**子任务**\n\nSubtask1（$10$ points）：$\\texttt{T}_x=\\texttt{a}$。\n\nSubtask2（$20$ points）：$|\\texttt{S}|\\le1000$。\n\nSubtask3（$30$ points）：$|\\texttt{S}|\\le 10^6$。\n\nSubtask4（$40$ points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8113", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 5", "4.00 2.00"], ["7 114\n23 75 35 17 101 55 73", "81.43 32.57"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "二分", "2021", "O2优化"], "title": "[Cnoi2021] 自我主义的平衡者", "background": "「流浪月球 ~ The Wandering Moon」在幻想乡上映了。\n\n正如一千个人心中有一千个哈姆雷特，关于它的争议也在悄然蔓延。\n\n不知何时起，一个叫做「花瓣」的平台出现，慢慢取代了市井之中的讨论声，成为了争议的主战场——因为它具有评分功能。平台上旁征博引、各抒己见的评分帖成为了幻想乡的居民们日常，一切看起来岁月静好。\n\n直到平衡者的出现。\n\n起初没有人在意在意这缕杂音，这只不过是一种无心的叛逆，一点无奈的情感，一次无聊的宣泄。直到平衡的思想深入人心，自我主义的狂潮达到顶峰，评分系统的秩序几近崩溃。\n\nCirno 觉得自己该做些什么了。", "description": "Cirno 决定通过计算来说服与拯救被自我主义裹挟的众人。\n\n参与评分的共有 $n$ 位居民，平台限制的最高分为 $m$。\n\n每个居民在评分前都有一个心理预期分数 $a_i(a_i\\in[0,m]\\cap\\mathbb{Z})$。\n\n但人们并不会按照心理预期分数直接评分，而是当当前平台上的平均分严格高于自己的心理预期分数时，便评分道「分数太高了，打个 $0$ 分平衡一下」，反之则说「分数太低了，打个满分（$m$分）平衡一下」。\n\n初始时平台上的平均分为 $0$。\n\n为了证明这种评分方式对公平的破坏性，Cirno 希望你计算出这 $n$ 位居民在不同的排列顺序下评分，平台上最终平均分可能的最大值与最小值。", "inputFormat": "第一行，两个整数，用空格隔开，表示 $n$，$m$。\n\n第二行，$n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。", "outputFormat": "一行，两个实数，保留两位小数，分别表示平均分最大值和最小值。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据保证，$1 < n,m\\le 10^5$，$a_i \\in [0,m]$。\n\n**子任务**\n\nSubtask1（10 points）：$n \\le 8$。\n\nSubtask2（10 points）：$n \\le 20$。\n\nSubtask3（30 points）：$n \\le 10^3$。\n\nSubtask4（50 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 自我主义的平衡者", "background": "「流浪月球 ~ The Wandering Moon」在幻想乡上映了。\n\n正如一千个人心中有一千个哈姆雷特，关于它的争议也在悄然蔓延。\n\n不知何时起，一个叫做「花瓣」的平台出现，慢慢取代了市井之中的讨论声，成为了争议的主战场——因为它具有评分功能。平台上旁征博引、各抒己见的评分帖成为了幻想乡的居民们日常，一切看起来岁月静好。\n\n直到平衡者的出现。\n\n起初没有人在意在意这缕杂音，这只不过是一种无心的叛逆，一点无奈的情感，一次无聊的宣泄。直到平衡的思想深入人心，自我主义的狂潮达到顶峰，评分系统的秩序几近崩溃。\n\nCirno 觉得自己该做些什么了。", "description": "Cirno 决定通过计算来说服与拯救被自我主义裹挟的众人。\n\n参与评分的共有 $n$ 位居民，平台限制的最高分为 $m$。\n\n每个居民在评分前都有一个心理预期分数 $a_i(a_i\\in[0,m]\\cap\\mathbb{Z})$。\n\n但人们并不会按照心理预期分数直接评分，而是当当前平台上的平均分严格高于自己的心理预期分数时，便评分道「分数太高了，打个 $0$ 分平衡一下」，反之则说「分数太低了，打个满分（$m$分）平衡一下」。\n\n初始时平台上的平均分为 $0$。\n\n为了证明这种评分方式对公平的破坏性，Cirno 希望你计算出这 $n$ 位居民在不同的排列顺序下评分，平台上最终平均分可能的最大值与最小值。", "inputFormat": "第一行，两个整数，用空格隔开，表示 $n$，$m$。\n\n第二行，$n$ 个整数，用空格隔开，表示 $\\{a_n\\}$。", "outputFormat": "一行，两个实数，保留两位小数，分别表示平均分最大值和最小值。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据保证，$1 < n,m\\le 10^5$，$a_i \\in [0,m]$。\n\n**子任务**\n\nSubtask1（10 points）：$n \\le 8$。\n\nSubtask2（10 points）：$n \\le 20$。\n\nSubtask3（30 points）：$n \\le 10^3$。\n\nSubtask4（50 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8114", "type": "P", "difficulty": 7, "samples": [["1 1 1", "2"], ["3 4 3", "4116"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "LGV 引理", "O2优化", "组合数学", "线性代数", "行列式"], "title": "[Cnoi2021] 六边形战士", "background": "在 Cirno 的精心照料下，六边形成长为一只可爱的平行六边形。\n\n现在，Cirno 很想知道它的战斗力是多少。", "description": "可爱的平行六边形所有边的夹角均为 $\\frac{2\\pi}{3}$，三组对边的长度分别为 $a$，$b$，$c$ 个单位。如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aa8i6soa.png)\n\n在战斗力鉴定时，鉴定师会以六边形的每一条边所在的直线，间隔 $\\frac{\\sqrt{3}}{2}$ 个单位建立平行直线系。这样六边形战士会被划分成若干个正三角形。如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mbkn807n.png)\n\n鉴定师会将所有有公共边的正三角形连边。由于没有奇环，很容易知道这是一个二分图。然后鉴定师会试图构造该二分图的完美匹配。如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/in7c6cf7.png)\n\n该六边形战士的战斗力为上述**二分图的完美匹配**可能的种类数。作为见习鉴定师，你需要帮 Cirno 求出该六边形的战斗力。\n\n由于答案可能过大，仅需输出它对 $998244353$ 取模的结果即可。", "inputFormat": "一行，三个整数，用空格隔开，表示 $a$，$b$，$c$。", "outputFormat": "一行，一个整数，表示六边形战士的战斗力对 $998244353$ 取模后的结果。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据，保证 $1\\le a,b,c\\le 10^6$。\n\n**子任务**\n\nSubtask1（$10$ points）：$a,b,c\\le 3$。\n\nSubtask2（$10$ points）：$a,b,c\\le 8$。\n\nSubtask3（$70$ points）：$a,b,c\\le 100$。\n\nSubtask4（$10$ points）：无特殊限制。\n\n**提示**\n\n - **Krattenthaler’s formula**  \n $\\displaystyle\\det\\left(\\prod\\limits_{k=2}^j(x_i+a_k)\\prod\\limits_{k=j+1}^n(x_i+b_k)\\right)_{i,j=1}^{n}=\\prod\\limits_{1\\le i<j\\le n}{(x_i-x_j)}\\prod\\limits_{2<i\\le j\\le n}(a_i-b_j)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Cnoi2021] 六边形战士", "background": "在 Cirno 的精心照料下，六边形成长为一只可爱的平行六边形。\n\n现在，Cirno 很想知道它的战斗力是多少。", "description": "可爱的平行六边形所有边的夹角均为 $\\frac{2\\pi}{3}$，三组对边的长度分别为 $a$，$b$，$c$ 个单位。如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aa8i6soa.png)\n\n在战斗力鉴定时，鉴定师会以六边形的每一条边所在的直线，间隔 $\\frac{\\sqrt{3}}{2}$ 个单位建立平行直线系。这样六边形战士会被划分成若干个正三角形。如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mbkn807n.png)\n\n鉴定师会将所有有公共边的正三角形连边。由于没有奇环，很容易知道这是一个二分图。然后鉴定师会试图构造该二分图的完美匹配。如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/in7c6cf7.png)\n\n该六边形战士的战斗力为上述**二分图的完美匹配**可能的种类数。作为见习鉴定师，你需要帮 Cirno 求出该六边形的战斗力。\n\n由于答案可能过大，仅需输出它对 $998244353$ 取模的结果即可。", "inputFormat": "一行，三个整数，用空格隔开，表示 $a$，$b$，$c$。", "outputFormat": "一行，一个整数，表示六边形战士的战斗力对 $998244353$ 取模后的结果。", "hint": "**数据范围与约定**\n\n对于 $100\\%$ 的数据，保证 $1\\le a,b,c\\le 10^6$。\n\n**子任务**\n\nSubtask1（$10$ points）：$a,b,c\\le 3$。\n\nSubtask2（$10$ points）：$a,b,c\\le 8$。\n\nSubtask3（$70$ points）：$a,b,c\\le 100$。\n\nSubtask4（$10$ points）：无特殊限制。\n\n**提示**\n\n - **Krattenthaler’s formula**  \n $\\displaystyle\\det\\left(\\prod\\limits_{k=2}^j(x_i+a_k)\\prod\\limits_{k=j+1}^n(x_i+b_k)\\right)_{i,j=1}^{n}=\\prod\\limits_{1\\le i<j\\le n}{(x_i-x_j)}\\prod\\limits_{2<i\\le j\\le n}(a_i-b_j)$。", "locale": "zh-CN"}}}
{"pid": "P8115", "type": "P", "difficulty": 2, "samples": [["{1,314159,3141592653589793}", "{1,314159,0xB29430A256D21}\n"], ["{}", "{}"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "进制", "洛谷月赛"], "title": "「RdOI R3.5」Table", "background": "小 A 想要打表过题，但是代码长度过长。他想到了把数字用十六进制表示有时比用十进制表示更短，决定把答案表用十六进制进行改写。", "description": "我们定义下文中的「十六进制」均用数字 $0\\sim 9$ 和大写英文字母 $\\tt A\\sim F$ 表示，且每个十六进制数字都包含前缀 $\\colorbox{#ddd}{\\tt 0x}$。\n\n给出若干个用大括号包裹，用逗号分隔的十进制整数，代表小 A 的答案表。你需要对答案表内的每个数字进行改写：\n\n- 若该整数使用十六进制表示所占字符数小于或等于十进制表示，则将该数改写为十六进制。\n- 否则，该数保留十进制不变。\n\n输出改写后的答案表。\n", "inputFormat": "- 输入一行一个字符串，字符串中仅包含大括号、逗号和数字，不包含空格和其他字符等。具体格式可以参考 C++ 语言的数组定义格式。代表小 A 的答案表，保证答案表格式正确。", "outputFormat": "- 输出一行一个字符串，表示改写后的答案表。\n", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- $1$ 用十六进制表示为 $\\tt 0x1$，共 $3$ 个字符，长度大于十进制的 $1$ 个字符。\n- $314159$ 用十六进制表示为 $\\tt 0x4CB2F$，共 $7$ 个字符，长度大于十进制的 $6$ 个字符。\n- $3141592653589793$ 用十六进制表示为 $\\tt 0xB29430A256D21$，共 $15$ 个字符，长度小于十进制的 $16$ 个字符。\n\n#### 样例 \\#2\n\n输入为空数组，所以输出也应为空数组。\n\n### 数据范围及约定\n\n本题共五个测试点，每个测试点 20 分，总分数为各测试点分数之和。\n\n记答案表中共有 $n$ 个整数，这些整数分别为 $a_1,a_2,\\cdots,a_n$。则对于 $100\\%$ 的数据，$0\\le n\\le10^3$，$0\\le a_i < 2^{64}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R3.5」Table", "background": "小 A 想要打表过题，但是代码长度过长。他想到了把数字用十六进制表示有时比用十进制表示更短，决定把答案表用十六进制进行改写。", "description": "我们定义下文中的「十六进制」均用数字 $0\\sim 9$ 和大写英文字母 $\\tt A\\sim F$ 表示，且每个十六进制数字都包含前缀 $\\colorbox{#ddd}{\\tt 0x}$。\n\n给出若干个用大括号包裹，用逗号分隔的十进制整数，代表小 A 的答案表。你需要对答案表内的每个数字进行改写：\n\n- 若该整数使用十六进制表示所占字符数小于或等于十进制表示，则将该数改写为十六进制。\n- 否则，该数保留十进制不变。\n\n输出改写后的答案表。\n", "inputFormat": "- 输入一行一个字符串，字符串中仅包含大括号、逗号和数字，不包含空格和其他字符等。具体格式可以参考 C++ 语言的数组定义格式。代表小 A 的答案表，保证答案表格式正确。", "outputFormat": "- 输出一行一个字符串，表示改写后的答案表。\n", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- $1$ 用十六进制表示为 $\\tt 0x1$，共 $3$ 个字符，长度大于十进制的 $1$ 个字符。\n- $314159$ 用十六进制表示为 $\\tt 0x4CB2F$，共 $7$ 个字符，长度大于十进制的 $6$ 个字符。\n- $3141592653589793$ 用十六进制表示为 $\\tt 0xB29430A256D21$，共 $15$ 个字符，长度小于十进制的 $16$ 个字符。\n\n#### 样例 \\#2\n\n输入为空数组，所以输出也应为空数组。\n\n### 数据范围及约定\n\n本题共五个测试点，每个测试点 20 分，总分数为各测试点分数之和。\n\n记答案表中共有 $n$ 个整数，这些整数分别为 $a_1,a_2,\\cdots,a_n$。则对于 $100\\%$ 的数据，$0\\le n\\le10^3$，$0\\le a_i < 2^{64}$。", "locale": "zh-CN"}}}
{"pid": "P8116", "type": "P", "difficulty": 4, "samples": [["3\n4 2\n5 3\n12 99", "3\n3\n19503"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-1.5」魔理沙的计算器", "background": "魔理沙是普通而平凡的魔法使。在解决了大大小小的异变后，她终于攒足了足够多的钱在香霖堂里购置了一台 $\\verb!Carno!$ 计算器，用来计算魔女之汤各种配料的含量之比。\n\n魔理沙早就听闻灵梦通过河童重工网络[入手了一部 $\\verb!Casio!$ 计算器](https://www.luogu.com.cn/problem/P5515)，来计算神社的香火钱，却买到了假货，最多只能显示整数部分（下取整）。而魔理沙的这部可以精确到小数点后面若干位（下取整）的计算器。更高级的是，这部计算器还可以支持其他的进制，其强大的功能高出了灵梦一大截。因此作为灵梦真挚的朋友，魔理沙希望向灵梦表达真挚的遗憾之情。\n\n正当魔理沙打算出发之时，她发现虽然 $\\verb!Carno!$ 计算器不会导致一些特别大的误差，但是在计算除法时仍然会出现一定的问题。考虑将计算器的进制调整为 $10$ 进制，而计算器屏幕上最多可以显示 $5$ 位数字（小数点不计入显示位数）。比如，魔理沙希望计算 $1\\div 3$ 的值，那么真正显示在屏幕上的则是：\n\n$$\n0.3333\n$$\n\n按照道理上来讲，$1\\div(1\\div 3)$ 结果应当等于 $3$。但出乎意料的是，当魔理沙输入 $1\\div 0.3333$ 后，得到的结果却是：\n\n$$\n3.0003\n$$\n\n这当然只是一个个例。当魔理沙计算 $1\\div(1\\div 4)$ 时，屏幕上显示出了正确的数字。\n\n为了防止在表达遗憾之情的时候自己的计算器也出了漏子，魔理沙希望找到有多少个数字使得计算出的结果是正确的，因此她向你求助了。", "description": "魔理沙的计算器可以进行 $b$ 进制的运算，屏幕上可以显示 $k$ 个数字（不包含小数点）。进行计算后，若某个数字超出了屏幕，就会被**直接舍去**（例如 $b=10$ 时 $1\\div 7=0.142857\\cdots$，若屏幕大小为 $4$，那么最终显示为 $0.142$）。\n\n魔理沙用计算器计算了 $1\\div n=n'$，再计算 $1\\div n'=n''$（$n'$ 和 $n''$ 均为显示在屏幕上的结果）。魔理沙希望知道，有多少个正整数 $n$ 使得 $n=n''$。你只需要输出这个答案对 $998,244,353$ 取模后的结果即可。", "inputFormat": "- 第一行有一个正整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行有两个正整数 $b,k$，分别表示计算器的进制、屏幕上能显示的数字个数。", "outputFormat": "- 输出共 $T$ 行。\n- 每行输出一个整数。第 $i$ 行的整数表示第 $i$ 组数据中合法的 $n$ 的总数对 $998,244,353$ 取模后的结果。", "hint": "### 样例解释\n\n- 对于第一组询问，符合条件的数（转换成十进制）为 $1,2,4$。\n- 对于第二组询问，符合条件的数（转换成十进制）为 $1,5,25$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{subtask}&\\textbf{分值} & \\bm{b\\le} & \\bm {k\\le } & \\textbf{特殊性质} & \\textbf{subtask 依赖} \\cr\\hline\n1 & 20 & 10 & 7 & - &-\\cr\\hline\n2 & 20 & 10^5 & 2 & k=2&-\\cr\\hline\n3 & 10 & 10^5 & 3 & k=3&- \\cr\\hline\n4 & 50& 10^5 & 500 & -&1,2,3\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10$，$2\\le b\\le 10^5$，$1\\le k\\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-1.5」魔理沙的计算器", "background": "魔理沙是普通而平凡的魔法使。在解决了大大小小的异变后，她终于攒足了足够多的钱在香霖堂里购置了一台 $\\verb!Carno!$ 计算器，用来计算魔女之汤各种配料的含量之比。\n\n魔理沙早就听闻灵梦通过河童重工网络[入手了一部 $\\verb!Casio!$ 计算器](https://www.luogu.com.cn/problem/P5515)，来计算神社的香火钱，却买到了假货，最多只能显示整数部分（下取整）。而魔理沙的这部可以精确到小数点后面若干位（下取整）的计算器。更高级的是，这部计算器还可以支持其他的进制，其强大的功能高出了灵梦一大截。因此作为灵梦真挚的朋友，魔理沙希望向灵梦表达真挚的遗憾之情。\n\n正当魔理沙打算出发之时，她发现虽然 $\\verb!Carno!$ 计算器不会导致一些特别大的误差，但是在计算除法时仍然会出现一定的问题。考虑将计算器的进制调整为 $10$ 进制，而计算器屏幕上最多可以显示 $5$ 位数字（小数点不计入显示位数）。比如，魔理沙希望计算 $1\\div 3$ 的值，那么真正显示在屏幕上的则是：\n\n$$\n0.3333\n$$\n\n按照道理上来讲，$1\\div(1\\div 3)$ 结果应当等于 $3$。但出乎意料的是，当魔理沙输入 $1\\div 0.3333$ 后，得到的结果却是：\n\n$$\n3.0003\n$$\n\n这当然只是一个个例。当魔理沙计算 $1\\div(1\\div 4)$ 时，屏幕上显示出了正确的数字。\n\n为了防止在表达遗憾之情的时候自己的计算器也出了漏子，魔理沙希望找到有多少个数字使得计算出的结果是正确的，因此她向你求助了。", "description": "魔理沙的计算器可以进行 $b$ 进制的运算，屏幕上可以显示 $k$ 个数字（不包含小数点）。进行计算后，若某个数字超出了屏幕，就会被**直接舍去**（例如 $b=10$ 时 $1\\div 7=0.142857\\cdots$，若屏幕大小为 $4$，那么最终显示为 $0.142$）。\n\n魔理沙用计算器计算了 $1\\div n=n'$，再计算 $1\\div n'=n''$（$n'$ 和 $n''$ 均为显示在屏幕上的结果）。魔理沙希望知道，有多少个正整数 $n$ 使得 $n=n''$。你只需要输出这个答案对 $998,244,353$ 取模后的结果即可。", "inputFormat": "- 第一行有一个正整数 $T$，表示数据组数。\n- 接下来 $T$ 行，每行有两个正整数 $b,k$，分别表示计算器的进制、屏幕上能显示的数字个数。", "outputFormat": "- 输出共 $T$ 行。\n- 每行输出一个整数。第 $i$ 行的整数表示第 $i$ 组数据中合法的 $n$ 的总数对 $998,244,353$ 取模后的结果。", "hint": "### 样例解释\n\n- 对于第一组询问，符合条件的数（转换成十进制）为 $1,2,4$。\n- 对于第二组询问，符合条件的数（转换成十进制）为 $1,5,25$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{subtask}&\\textbf{分值} & \\bm{b\\le} & \\bm {k\\le } & \\textbf{特殊性质} & \\textbf{subtask 依赖} \\cr\\hline\n1 & 20 & 10 & 7 & - &-\\cr\\hline\n2 & 20 & 10^5 & 2 & k=2&-\\cr\\hline\n3 & 10 & 10^5 & 3 & k=3&- \\cr\\hline\n4 & 50& 10^5 & 500 & -&1,2,3\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 10$，$2\\le b\\le 10^5$，$1\\le k\\le 500$。", "locale": "zh-CN"}}}
{"pid": "P8117", "type": "P", "difficulty": 7, "samples": [["4 4 5 1 4\n1 2 1 2 2\n1 3 4 5 1\n2 4 2 3 1\n3 4 3 5 2", "5"], ["10 19 5 6 1\n2 1 1 3 592\n6 8 3 5 488\n10 9 4 4 548\n10 4 1 4 442\n6 5 1 3 422\n9 7 1 4 529\n5 8 1 1 559\n5 9 1 5 560\n5 8 2 3 434\n5 9 3 3 592\n4 7 2 2 594\n7 9 5 5 595\n4 1 4 4 501\n3 9 1 2 410\n10 6 2 4 509\n6 10 4 5 455\n2 4 2 5 444\n4 3 4 5 541\n8 7 1 1 463\n", "2295\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "最短路", "洛谷月赛", "状压 DP"], "title": "「Wdoi-1.5」旅人 1977", "background": "深邃的星空中划出了一道灿烂的弧线，而后又同这广袤境界溶为一体，二十世纪的旅行者，承载着期待与不安向着外太空飞去。这是一份来自一个遥远的小小世界的礼物。上面记载着我们的声音、我们的科学、我们的影像、我们的音乐、我们的思想和感情。我们正努力生活过我们的时代，进入你们的时代。或许人类将失去对它的联系，它也将像一个漂流瓶一样，向着宇宙深处孤独的走下去，直到被「另一个人」所捡起。而它为我们留下的最后一张「自拍」，也只是一个 $0.12$ 像素大的、淡蓝色的光点 —— 这是我们迄今所知的唯一家园。\n\n$\\kern{80pt}$![](https://cdn.luogu.com.cn/upload/image_hosting/qbelj85l.png)  \n$$\\scriptscriptstyle\\text{暗淡蓝点，旅行者 1 号，1990年 2 月 14 日}$$\n「已经分不清现实与梦境了呢。」  \n「或许，梦与现之间的境界，本就没有那么明晰。」\n\n……\n\n「真是的，莲子你不是自称亲近星光与月亮的嘛，怎么也不抬头看看。」\n\n正欲向笔记本上添加几行，借以目视的月光陡然暗淡。眼前垂落的金色长发挡住了我的视线。轻咳了一声，抬起手在面前挥舞，把他们从视野中赶走，我转头看着后背。\n眼前戴着白色帽子的少女便是我的同伴梅莉。我常常打趣她有着奇异的眼睛，可以看到我们所看不到的「境界」。尽管我自己的眼睛也十分特殊——我有着通过星光与月亮就知道我们现处何时何地的能力。忘了说了，我们是学生秘密社团『秘封俱乐部』，专门探寻科学世纪下的隐藏结界。  \n在这个夏夜，我本着履行对她承诺的想法，来到野外，观察天体的运行。\n\n「在想什么呢？」  \n这个问题不好回答呢。不过，既然今天和梅莉约好出来观赏星空，那么，思路被引向人们曾经的探索和求知，便是十分自然的了。  \n「唔，我在想，我们现今，科学世纪的起源。」  \n「嗯？莲子你不是研究物理的吗，怎么突然思考其这种问题了？」  \n梅莉把头朝右侧一歪，我指指天空，她随即坐在了一旁，把目光投向灿烂的星海。  \n「唔，我在想，我们现今，科学世纪的起源。还记得我和你说过的那两位旅人吗？」  \n「旅行者一号与旅行者二号？」  \n「没错。直到如今都没有人为任何深空计划取名为旅行者。带着如此诗意而感性名称的它们代表的是人们对未来的期许与对真理的渴望。面对未知与迷茫，义无反顾冲向了星海。」 \n\n梅莉站了起来，举起了双筒望远镜。她的身影在暗淡而幽静的夜色中来回移动，皎白得似有彩色光晕的月光从穹顶透过树叶与树枝的缝隙在她身上落下光斑，看着让人心醉。  \n\n超新星爆发是恒星生命的终点，也是新生恒星生命的起点。谁能说科学已经到了尽头，无法解释的事物不存在呢？科学的核心在于那些被视为空花阳焰，藏在迷雾中的东西，而绝非那些狂妄自大的老头们所说，科学是我们掌握的一切已知。  \n对我们而言，这是不言而喻的。我们追随那位初代社长的脚步，探寻遍布四处的结界，寻求隐藏在未知背后真理的一角，正是出于这样的信念。\n\n晷刻渐移，点点星尘围绕着北极星作着圆周运动。仔细看的话，北极星也在微微运动。在我的视线前方，梅莉兴奋地对着从英仙座辐射而出，偶尔划过天穹的流星发出惊叹。我不禁思索起来，现在勾陈一作为最接近北天极的恒星行使着为旅人指点方向的责任，但在永恒的运动中，永远会有新的谜题，新的未知，新的探索等着我们去发现。  \n\n物如此，事犹是，人亦然。前路永远有着未知的事物等着我们去探索。如果解明了所有的秘密，之后就会什么都不剩。知晓万物什么的，只不过是空空如也的虚无罢了。未知，才是驱动人类的原动力 $\\scriptscriptstyle{}^{[{\\color{grey}{1}}]}$。我们希冀着如同那两位先行者一般，作为开拓者，唤起根植于人们心中对未知的好奇与探索精神，并将它薪火相传。  \n身虽位于苍穹一粟，心亦向往若尘繁星。  \n身旁的梅莉靠在一棵树下，已经发出规律的鼾声，身体规律地微微起伏着。我伸手拨开她的手掌，撩开她垂下的头发，拿出她的笔记本。\n>从夜晚走向清晨。  \n从清晨走向夜晚。  \n从现实走向梦境。  \n从梦境走向现实。  \n终有一天，我们会在梦中，邂逅那片未经观测的星空。$\\scriptscriptstyle{}^{[{\\color{grey}{2}}]}$\n\n$\\scriptscriptstyle{[1],[2]}\\text{：引用自 }$ [here](https://bbs.nyasama.com/forum.php?mod=viewthread&tid=308054&page=2)", "description": "深邃的星空可以被视作一张有向图，图上的节点就是点点恒星。点无点权，边有边权。图的点数为 $n$，边数为 $m$，图可能有重边自环。但保证至少有一条路径可以从 $s$ 走到 $t$（$s$、$t$ 在输入中给定）。第 $i$ 条有向边起点为 $u_i$，终点为 $v_i$，它的权值用一个有序三元组 $(l_i,r_i,w_i)$ 表示。\n\n莲子要从点 $s$ 出发，经过了若干条边到达点 $t$。她带有一个初始值均为 $0$ 的长度为 $k$ 的数组 $a$，每次经过编号为 $i$ 的边，就会执行将 $a$ 数组的区间 $[l_i,r_i]$ 加 $w_i$ 的操作。她使用了一棵**带懒标记**的线段树来维护这一操作。线段树的写法会在接下来给出。\n\n你需要构造一条从 $s$ 到 $t$ 的路径，满足达到结点 $t$ 时，其线段树上所有标记的和的最小。输出这个最小值。\n\n以下是线段树的伪代码：（为了方便选手阅读，题目附件中给出了线段树的 C++ 源代码）\n\n$$\n\\begin{array}{l}\\hline\\hline\\\\[-0.8em]\n\\textbf{Algorithm: }\\text{SegTree}\\\\\\hline\\\\[-0.5em]\n\\begin{array}{rl}\n1& \\mathbf{Input.} \\text{ 长度为 $k$ 的 $a$ 数组，初始全为 $0$}\\\\\n2& \\mathbf{Output.} \\text{ $a$ 数组进行若干次区间加操作后得到的结果}\\\\\n3& \\mathbf{Method.}\\\\\n4& \\mathrm{Add}(L,R,x)\\\\\n5& \\quad\\mathrm{Add0}(L,R,x,root,1,k)\\\\\n6& \\mathrm{Add0}(L,R,x,u,l,r)\\\\\n7& \\quad\\mathbf{if}\\ L \\le l\\ \\mathbf{and}\\ r\\le R\\\\\n8& \\quad\\quad \\mathrm{tag}(u) \\gets \\mathrm{tag}(u) + x\\\\\n9& \\quad\\quad \\mathbf{return}\\\\\n10& \\quad mid \\gets \\lfloor\\frac{l+r} 2\\rfloor\\\\\n11& \\quad \\mathrm{tag}(\\mathrm{lson}(u)) \\gets \\mathrm{tag}(\\mathrm{lson}(u))+\\mathrm{tag}(u)\\\\\n12& \\quad \\mathrm{tag}(\\mathrm{rson}(u)) \\gets \\mathrm{tag}(\\mathrm{rson}(u))+\\mathrm{tag}(u)\\\\\n13& \\quad \\mathrm{tag}(u) \\gets 0\\\\\n14& \\quad\\mathbf{if}\\ L \\le mid\\\\\n15& \\quad\\quad\\mathrm{Add0}(L,R,x,\\mathrm{lson}(u),l,mid)\\\\\n16& \\quad\\mathbf{if}\\ mid < R\\\\\n17& \\quad\\quad\\mathrm{Add0}(L,R,x,\\mathrm{rson}(u),mid+1,r)\\\\\n\\end{array}\\\\\\hline\\hline\n\\end{array}\n$$", "inputFormat": "- 第一行五个整数 $n,m,k,s,t$。\n- 接下来 $m$ 行，每行五个整数 $u_i,v_i,l_i,r_i,w_i$。", "outputFormat": "- 共一行一个整数，表示沿着你构造的路径从 $s$ 到达 $t$ 后线段树上所有懒标记的权值之和。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/npzajpom.png)\n\n容易发现，样例 $1$ 中有且仅有两条可能的路径：$1\\to 2\\to 4$ 与 $1\\to 3\\to 4$。下面分别计算这两条路径最终 $\\text{tag}$ 的权值和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2fq7okad.png)\n\n考虑画出这棵 $k=5$ 的线段树。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ys42i046.png)\n\n走了边 $1\\to 2$ 后，$[1,2]$ 节点被打上了权值为 $2$ 的 $\\text{tag}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/02sqysh5.png)\n\n走了 $2\\to 4$ 后，$[2,2]$ 节点和 $[3,3]$ 节点被打上了值为 $1$ 的 $\\text{tag}$；但是 $[1,2]$ 节点的标记进行了下推（因为使 $[2,3]$ 区间 $+1$ 的时候会访问到 $[1,2]$ 节点，而 $[1,2]\\nsubseteq[2,3]$，故而发生标记下推），因此 $[1,1]$ 节点和 $[2,2]$ 节点的 $\\text{tag}$ 分别加上了 $2$，最终成了如图所示的模样。\n\n因此走到 $4$ 之后所有结点的 $\\text{tag}$ 之和为 $2+3+1=6$。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3va7fa03.png)\n\n对于另外一条路径，首先对 $[4,5]$ 加上 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o1cw3s03.png)\n\n接着对 $[3,5]$ 加上 $2$。未发生带有 $\\text{tag}$ 的节点的标记下推，因此最终的权值为 $2+3=5$。\n\n由于 $6>5$，因而最终的答案为 $5$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{subtask}& \\textbf{分值}& {\\bm n\\le} & {\\bm m\\le} & {\\bm k\\le} & \\textbf{特殊性质} & \\textbf{subtask 依赖}\\cr\\hline\n1 & 10& 10 & 30 & 5 & - & -\\cr\\hline\n2 & 5&30 & 30 & 12 & \\textbf{AB} &-\\cr\\hline\n3 & 20&30 & 500 & 12 & \\textbf{B} &2 \\cr\\hline\n4 & 15&200 & 3\\times 10^3 & 25 & \\textbf{B}&3\\cr\\hline\n5 & 50&200 & 3\\times 10^3 & 25 & - &4\\cr\\hline\n\\end{array}\n$$\n\n- **特殊性质** $\\textbf{A}$：保证有且仅有一条从 $s$ 到 $t$ 的路径。\n- **特殊性质** $\\textbf{B}$：保证图中不存在环。\n\n对于 $100\\%$ 的数据，有 $1 \\le s,t,u_i,v_i \\leq n \\leq 200$，$1 \\leq m \\leq 3\\times 10^3$，$1 \\leq l_i\\le r_i \\leq k \\leq 25$，$1 \\leq w_i \\leq 10^3$。\n\n### 提示\n\n在附件中有两个版本的线段树。$\\text{Lite}$ 版本**仅**包含了在本题中你会用到的下推标记的操作，而标准版则较为完整地支持区间加、区间求和。选手可根据自己的喜好使用。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-1.5」旅人 1977", "background": "深邃的星空中划出了一道灿烂的弧线，而后又同这广袤境界溶为一体，二十世纪的旅行者，承载着期待与不安向着外太空飞去。这是一份来自一个遥远的小小世界的礼物。上面记载着我们的声音、我们的科学、我们的影像、我们的音乐、我们的思想和感情。我们正努力生活过我们的时代，进入你们的时代。或许人类将失去对它的联系，它也将像一个漂流瓶一样，向着宇宙深处孤独的走下去，直到被「另一个人」所捡起。而它为我们留下的最后一张「自拍」，也只是一个 $0.12$ 像素大的、淡蓝色的光点 —— 这是我们迄今所知的唯一家园。\n\n$\\kern{80pt}$![](https://cdn.luogu.com.cn/upload/image_hosting/qbelj85l.png)  \n$$\\scriptscriptstyle\\text{暗淡蓝点，旅行者 1 号，1990年 2 月 14 日}$$\n「已经分不清现实与梦境了呢。」  \n「或许，梦与现之间的境界，本就没有那么明晰。」\n\n……\n\n「真是的，莲子你不是自称亲近星光与月亮的嘛，怎么也不抬头看看。」\n\n正欲向笔记本上添加几行，借以目视的月光陡然暗淡。眼前垂落的金色长发挡住了我的视线。轻咳了一声，抬起手在面前挥舞，把他们从视野中赶走，我转头看着后背。\n眼前戴着白色帽子的少女便是我的同伴梅莉。我常常打趣她有着奇异的眼睛，可以看到我们所看不到的「境界」。尽管我自己的眼睛也十分特殊——我有着通过星光与月亮就知道我们现处何时何地的能力。忘了说了，我们是学生秘密社团『秘封俱乐部』，专门探寻科学世纪下的隐藏结界。  \n在这个夏夜，我本着履行对她承诺的想法，来到野外，观察天体的运行。\n\n「在想什么呢？」  \n这个问题不好回答呢。不过，既然今天和梅莉约好出来观赏星空，那么，思路被引向人们曾经的探索和求知，便是十分自然的了。  \n「唔，我在想，我们现今，科学世纪的起源。」  \n「嗯？莲子你不是研究物理的吗，怎么突然思考其这种问题了？」  \n梅莉把头朝右侧一歪，我指指天空，她随即坐在了一旁，把目光投向灿烂的星海。  \n「唔，我在想，我们现今，科学世纪的起源。还记得我和你说过的那两位旅人吗？」  \n「旅行者一号与旅行者二号？」  \n「没错。直到如今都没有人为任何深空计划取名为旅行者。带着如此诗意而感性名称的它们代表的是人们对未来的期许与对真理的渴望。面对未知与迷茫，义无反顾冲向了星海。」 \n\n梅莉站了起来，举起了双筒望远镜。她的身影在暗淡而幽静的夜色中来回移动，皎白得似有彩色光晕的月光从穹顶透过树叶与树枝的缝隙在她身上落下光斑，看着让人心醉。  \n\n超新星爆发是恒星生命的终点，也是新生恒星生命的起点。谁能说科学已经到了尽头，无法解释的事物不存在呢？科学的核心在于那些被视为空花阳焰，藏在迷雾中的东西，而绝非那些狂妄自大的老头们所说，科学是我们掌握的一切已知。  \n对我们而言，这是不言而喻的。我们追随那位初代社长的脚步，探寻遍布四处的结界，寻求隐藏在未知背后真理的一角，正是出于这样的信念。\n\n晷刻渐移，点点星尘围绕着北极星作着圆周运动。仔细看的话，北极星也在微微运动。在我的视线前方，梅莉兴奋地对着从英仙座辐射而出，偶尔划过天穹的流星发出惊叹。我不禁思索起来，现在勾陈一作为最接近北天极的恒星行使着为旅人指点方向的责任，但在永恒的运动中，永远会有新的谜题，新的未知，新的探索等着我们去发现。  \n\n物如此，事犹是，人亦然。前路永远有着未知的事物等着我们去探索。如果解明了所有的秘密，之后就会什么都不剩。知晓万物什么的，只不过是空空如也的虚无罢了。未知，才是驱动人类的原动力 $\\scriptscriptstyle{}^{[{\\color{grey}{1}}]}$。我们希冀着如同那两位先行者一般，作为开拓者，唤起根植于人们心中对未知的好奇与探索精神，并将它薪火相传。  \n身虽位于苍穹一粟，心亦向往若尘繁星。  \n身旁的梅莉靠在一棵树下，已经发出规律的鼾声，身体规律地微微起伏着。我伸手拨开她的手掌，撩开她垂下的头发，拿出她的笔记本。\n>从夜晚走向清晨。  \n从清晨走向夜晚。  \n从现实走向梦境。  \n从梦境走向现实。  \n终有一天，我们会在梦中，邂逅那片未经观测的星空。$\\scriptscriptstyle{}^{[{\\color{grey}{2}}]}$\n\n$\\scriptscriptstyle{[1],[2]}\\text{：引用自 }$ [here](https://bbs.nyasama.com/forum.php?mod=viewthread&tid=308054&page=2)", "description": "深邃的星空可以被视作一张有向图，图上的节点就是点点恒星。点无点权，边有边权。图的点数为 $n$，边数为 $m$，图可能有重边自环。但保证至少有一条路径可以从 $s$ 走到 $t$（$s$、$t$ 在输入中给定）。第 $i$ 条有向边起点为 $u_i$，终点为 $v_i$，它的权值用一个有序三元组 $(l_i,r_i,w_i)$ 表示。\n\n莲子要从点 $s$ 出发，经过了若干条边到达点 $t$。她带有一个初始值均为 $0$ 的长度为 $k$ 的数组 $a$，每次经过编号为 $i$ 的边，就会执行将 $a$ 数组的区间 $[l_i,r_i]$ 加 $w_i$ 的操作。她使用了一棵**带懒标记**的线段树来维护这一操作。线段树的写法会在接下来给出。\n\n你需要构造一条从 $s$ 到 $t$ 的路径，满足达到结点 $t$ 时，其线段树上所有标记的和的最小。输出这个最小值。\n\n以下是线段树的伪代码：（为了方便选手阅读，题目附件中给出了线段树的 C++ 源代码）\n\n$$\n\\begin{array}{l}\\hline\\hline\\\\[-0.8em]\n\\textbf{Algorithm: }\\text{SegTree}\\\\\\hline\\\\[-0.5em]\n\\begin{array}{rl}\n1& \\mathbf{Input.} \\text{ 长度为 $k$ 的 $a$ 数组，初始全为 $0$}\\\\\n2& \\mathbf{Output.} \\text{ $a$ 数组进行若干次区间加操作后得到的结果}\\\\\n3& \\mathbf{Method.}\\\\\n4& \\mathrm{Add}(L,R,x)\\\\\n5& \\quad\\mathrm{Add0}(L,R,x,root,1,k)\\\\\n6& \\mathrm{Add0}(L,R,x,u,l,r)\\\\\n7& \\quad\\mathbf{if}\\ L \\le l\\ \\mathbf{and}\\ r\\le R\\\\\n8& \\quad\\quad \\mathrm{tag}(u) \\gets \\mathrm{tag}(u) + x\\\\\n9& \\quad\\quad \\mathbf{return}\\\\\n10& \\quad mid \\gets \\lfloor\\frac{l+r} 2\\rfloor\\\\\n11& \\quad \\mathrm{tag}(\\mathrm{lson}(u)) \\gets \\mathrm{tag}(\\mathrm{lson}(u))+\\mathrm{tag}(u)\\\\\n12& \\quad \\mathrm{tag}(\\mathrm{rson}(u)) \\gets \\mathrm{tag}(\\mathrm{rson}(u))+\\mathrm{tag}(u)\\\\\n13& \\quad \\mathrm{tag}(u) \\gets 0\\\\\n14& \\quad\\mathbf{if}\\ L \\le mid\\\\\n15& \\quad\\quad\\mathrm{Add0}(L,R,x,\\mathrm{lson}(u),l,mid)\\\\\n16& \\quad\\mathbf{if}\\ mid < R\\\\\n17& \\quad\\quad\\mathrm{Add0}(L,R,x,\\mathrm{rson}(u),mid+1,r)\\\\\n\\end{array}\\\\\\hline\\hline\n\\end{array}\n$$", "inputFormat": "- 第一行五个整数 $n,m,k,s,t$。\n- 接下来 $m$ 行，每行五个整数 $u_i,v_i,l_i,r_i,w_i$。", "outputFormat": "- 共一行一个整数，表示沿着你构造的路径从 $s$ 到达 $t$ 后线段树上所有懒标记的权值之和。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/npzajpom.png)\n\n容易发现，样例 $1$ 中有且仅有两条可能的路径：$1\\to 2\\to 4$ 与 $1\\to 3\\to 4$。下面分别计算这两条路径最终 $\\text{tag}$ 的权值和。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2fq7okad.png)\n\n考虑画出这棵 $k=5$ 的线段树。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ys42i046.png)\n\n走了边 $1\\to 2$ 后，$[1,2]$ 节点被打上了权值为 $2$ 的 $\\text{tag}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/02sqysh5.png)\n\n走了 $2\\to 4$ 后，$[2,2]$ 节点和 $[3,3]$ 节点被打上了值为 $1$ 的 $\\text{tag}$；但是 $[1,2]$ 节点的标记进行了下推（因为使 $[2,3]$ 区间 $+1$ 的时候会访问到 $[1,2]$ 节点，而 $[1,2]\\nsubseteq[2,3]$，故而发生标记下推），因此 $[1,1]$ 节点和 $[2,2]$ 节点的 $\\text{tag}$ 分别加上了 $2$，最终成了如图所示的模样。\n\n因此走到 $4$ 之后所有结点的 $\\text{tag}$ 之和为 $2+3+1=6$。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3va7fa03.png)\n\n对于另外一条路径，首先对 $[4,5]$ 加上 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o1cw3s03.png)\n\n接着对 $[3,5]$ 加上 $2$。未发生带有 $\\text{tag}$ 的节点的标记下推，因此最终的权值为 $2+3=5$。\n\n由于 $6>5$，因而最终的答案为 $5$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{subtask}& \\textbf{分值}& {\\bm n\\le} & {\\bm m\\le} & {\\bm k\\le} & \\textbf{特殊性质} & \\textbf{subtask 依赖}\\cr\\hline\n1 & 10& 10 & 30 & 5 & - & -\\cr\\hline\n2 & 5&30 & 30 & 12 & \\textbf{AB} &-\\cr\\hline\n3 & 20&30 & 500 & 12 & \\textbf{B} &2 \\cr\\hline\n4 & 15&200 & 3\\times 10^3 & 25 & \\textbf{B}&3\\cr\\hline\n5 & 50&200 & 3\\times 10^3 & 25 & - &4\\cr\\hline\n\\end{array}\n$$\n\n- **特殊性质** $\\textbf{A}$：保证有且仅有一条从 $s$ 到 $t$ 的路径。\n- **特殊性质** $\\textbf{B}$：保证图中不存在环。\n\n对于 $100\\%$ 的数据，有 $1 \\le s,t,u_i,v_i \\leq n \\leq 200$，$1 \\leq m \\leq 3\\times 10^3$，$1 \\leq l_i\\le r_i \\leq k \\leq 25$，$1 \\leq w_i \\leq 10^3$。\n\n### 提示\n\n在附件中有两个版本的线段树。$\\text{Lite}$ 版本**仅**包含了在本题中你会用到的下推标记的操作，而标准版则较为完整地支持区间加、区间求和。选手可根据自己的喜好使用。", "locale": "zh-CN"}}}
{"pid": "P8118", "type": "P", "difficulty": 6, "samples": [["5 2\n2 3 4 5 6\n0", "0\n1\n2\n4\n6"], ["6 2\n1 1 4 5 6 8\n0", "0\n2\n2\n3\n4\n5\n"], ["6 2\n1 1 4 5 6 8\n1", "5"], ["20 4\n4 6 7 9 19 21 30 32 33 35 49 50 58 67 75 77 78 89 91 91\n0", "0\n2\n5\n10\n10\n12\n12\n14\n17\n22\n22\n25\n25\n25\n25\n27\n30\n30\n32\n36"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "堆", "O2优化", "优先队列", "洛谷月赛"], "title": "「RdOI R3.5」Mystery", "background": "", "description": "给出一个长度为 $n$ 的单调不降整数数列 $\\{a_i\\}$ 和一个整数 $k$。\n\n我们定义两个长度均为 $p$ 的序列 $\\{x_i\\},\\{y_i\\}$ 的「差异度」$F(x,y,p)=\\sum_{i=1}^p |x_i-y_i|$。\n\n现在对于每个整数 $l \\in [1,n]$，你都需要构造一个长度为 $l$ 的序列 $\\{b_{l,i}\\}$。满足对于任意 $1\\le i <l$，$b_{l,i+1}\\ge b_{l,i}+k$；且 $F(a_{[1\\cdots l]},b_l,l)$ 最小。其中 $a_{[1\\cdots l]}$ 表示 $\\{a_i\\}$ 的长度为 $l$ 的前缀，即 $\\{a_1,a_2,\\cdots,a_l\\}$。注意，$b_{l,i}$ 没必要是整数。\n", "inputFormat": "第一行输入两个整数 $n,k$。  \n第二行输入 $n$ 个整数，代表 $\\{a_i\\}$。  \n第三行输入一个整数 $T$，代表答案输出方式。具体解释请参考「输出格式」。", "outputFormat": "- 若 $T=0$，则输出 $n$ 个整数，每个整数单独占一行。第 $l$ 行的整数代表 $F(a_{[1\\cdots l]},b_l,l)$。\n- 若 $T=1$，则你仅需输出一行一个整数，表示 $F(a,b_n,n)$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n如下是一种可能的构造方案：\n\n$$\n\\begin{aligned}\nb_1&=\\{2\\}\\\\\nb_2&=\\{2,4\\}\\\\\nb_3&=\\{1,3,5\\}\\\\\nb_4&=\\{1,3,5,7\\}\\\\\nb_5&=\\{0,2,4,6,8\\}\\\\\n\\end{aligned}\n$$\n\n#### 样例 \\#2\n\n如下是一种可能的构造方案：\n\n$$\n\\begin{aligned}\nb_1&=\\{1\\}\\\\\nb_2&=\\{0,2\\}\\\\\nb_3&=\\{0,2,4\\}\\\\\nb_4&=\\{0,2,4,6\\}\\\\\nb_5&=\\{-1,1,3,5,7\\}\\\\\nb_6&=\\{-1,1,3,5,7,9\\}\\\\\n\\end{aligned}\n$$\n\n#### 样例 \\#3\n\n同样例 \\#2，只不过 $T=1$，你只需要输出 $F(a,b_6,6)=5$ 即可。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|} \\hline\n\\textbf{subtask} & \\textbf{分值} & \\bm{{n\\le}} & \\bm{{T=}} & \\bm{{k,a_i\\le}} & \\textbf{subtask 依赖}\\cr\\hline\n1 & 30 & 100 & 0 & 100 & -\\cr\\hline\n2 & 30 & 10^5 & 0 & 10^6 & 1\\cr\\hline\n3 & 40 & 10^6 & 1 & 10^6 & -\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^6$，$1\\le k,a_i\\le 10^6$，$T\\in\\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R3.5」Mystery", "background": "", "description": "给出一个长度为 $n$ 的单调不降整数数列 $\\{a_i\\}$ 和一个整数 $k$。\n\n我们定义两个长度均为 $p$ 的序列 $\\{x_i\\},\\{y_i\\}$ 的「差异度」$F(x,y,p)=\\sum_{i=1}^p |x_i-y_i|$。\n\n现在对于每个整数 $l \\in [1,n]$，你都需要构造一个长度为 $l$ 的序列 $\\{b_{l,i}\\}$。满足对于任意 $1\\le i <l$，$b_{l,i+1}\\ge b_{l,i}+k$；且 $F(a_{[1\\cdots l]},b_l,l)$ 最小。其中 $a_{[1\\cdots l]}$ 表示 $\\{a_i\\}$ 的长度为 $l$ 的前缀，即 $\\{a_1,a_2,\\cdots,a_l\\}$。注意，$b_{l,i}$ 没必要是整数。\n", "inputFormat": "第一行输入两个整数 $n,k$。  \n第二行输入 $n$ 个整数，代表 $\\{a_i\\}$。  \n第三行输入一个整数 $T$，代表答案输出方式。具体解释请参考「输出格式」。", "outputFormat": "- 若 $T=0$，则输出 $n$ 个整数，每个整数单独占一行。第 $l$ 行的整数代表 $F(a_{[1\\cdots l]},b_l,l)$。\n- 若 $T=1$，则你仅需输出一行一个整数，表示 $F(a,b_n,n)$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n如下是一种可能的构造方案：\n\n$$\n\\begin{aligned}\nb_1&=\\{2\\}\\\\\nb_2&=\\{2,4\\}\\\\\nb_3&=\\{1,3,5\\}\\\\\nb_4&=\\{1,3,5,7\\}\\\\\nb_5&=\\{0,2,4,6,8\\}\\\\\n\\end{aligned}\n$$\n\n#### 样例 \\#2\n\n如下是一种可能的构造方案：\n\n$$\n\\begin{aligned}\nb_1&=\\{1\\}\\\\\nb_2&=\\{0,2\\}\\\\\nb_3&=\\{0,2,4\\}\\\\\nb_4&=\\{0,2,4,6\\}\\\\\nb_5&=\\{-1,1,3,5,7\\}\\\\\nb_6&=\\{-1,1,3,5,7,9\\}\\\\\n\\end{aligned}\n$$\n\n#### 样例 \\#3\n\n同样例 \\#2，只不过 $T=1$，你只需要输出 $F(a,b_6,6)=5$ 即可。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|} \\hline\n\\textbf{subtask} & \\textbf{分值} & \\bm{{n\\le}} & \\bm{{T=}} & \\bm{{k,a_i\\le}} & \\textbf{subtask 依赖}\\cr\\hline\n1 & 30 & 100 & 0 & 100 & -\\cr\\hline\n2 & 30 & 10^5 & 0 & 10^6 & 1\\cr\\hline\n3 & 40 & 10^6 & 1 & 10^6 & -\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^6$，$1\\le k,a_i\\le 10^6$，$T\\in\\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P8119", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2\n2 3\n1 3", "1 5\nRan 2\nChen 3\nSwap\nRan 1\nChen 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-1.5」幻想乡游览计划", "background": "（此为背景，可以跳过）\n\n自从姬虫百百世开挖了妖怪之山山顶的虹龙洞后，一成不变的幻想乡又多了可以探索的地方。充满心机的、监视着幻想乡一切动静的八云紫自然需要对其内部了如指掌，以此来掌握对幻想乡的绝对控制权。作为八云紫的式神的八云蓝，则奉命探索这块区域。随行的还有八云蓝的式神，橙。\n\n虹龙洞开采的目的是为了获取其中的龙珠，而龙珠分布在虹龙洞内的各个角落。为了能够滴水不漏地得到更多的龙珠，百百世挖出了纵横交错的矿道，连接着各处的龙珠采集点。矿道之间相互交错，构成了一张层层叠叠的网。八云蓝和橙的任务则是分别到达过虹龙洞内所有的龙珠采集点，采集足够多的信息，以完成八云紫对虹龙洞彻底的监控目标。\n\n然而，身处于黑暗的洞穴内，诺大的虹龙洞的环境十分险恶。极度缺氧的环境使得探索虹龙洞并不是一件容易的事情，因此八云蓝与橙不可能在虹龙洞内探索过长的时间。所幸的是，八云蓝可以联系到八云紫；而拥有操控境界能力的紫，则可以利用隙间交换蓝和橙的位置。\n\n八云紫已经私通菅牧典从大天狗那里得到了虹龙洞的内部结构图。为了尽量减少在虹龙洞内滞留的时间，八云一家需要设计出一套可行的方案。", "description": "虹龙洞内可以抽象成一张有 $n$ 个点和 $m$ 条的无向连通图，图可能有自环和重边。\n\n紫会用隙间的能力，将蓝和橙传送到虹龙洞的某一结点上。此处使用隙间所花费的时间忽略不计。输出格式中的 $S$ 即代表初始传送到的结点。\n\n接下来橙和蓝将会分别进行移动。每单位时间，蓝或者橙可以移动到与她们所在结点**直接相连**的结点上，或者紫使用隙间能力交换蓝和橙的位置。请注意：在这一单位时间内**只有一个人（蓝或者橙或者紫）可以行动**，并且此处的交换操作也是花费时间的。\n\n现在，八云蓝请你构造出一个方案，使得橙和蓝**各自都**能经过虹龙洞的每个结点至少 $1$ 次，并且最后**都**回到一开始所在的结点 $S$ 以结束此次游览。在「输出格式」中蓝说明了构造方案的格式，你只要按格式输出构造方案告诉蓝就行了。", "inputFormat": "第一行两个整数 $n,m$，表示该图有 $n$ 个节点，$m$ 条边。\n\n接下来 $m$ 行，每行两个整数 $u,v$，表示有一条连接 $u,v$ 的无向边。", "outputFormat": "第一行输出两个整数 $S$ 和 $k$。其中 $S$ 的含义见题目描述，$k$ 表示你的方案的操作次数。\n\n接下来 $k$ 行，你可以输出三种操作中的一种指导八云一家行动：\n- 输出 `Ran u`，表示让蓝移动到结点 $u$；\n- 输出 `Chen u`，表示让橙移动到结点 $u$；\n- 输出 `Swap` 表示让紫交换橙和蓝的位置。\n\n你需要保证你的构造方案合法。\n\n容易发现，你的操作次数 $k$ 等于进行所有操作所花费的单位时间数。", "hint": "### 样例解释\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{操作次数} & \\textbf{蓝的位置} &\\textbf{橙的位置} \\cr\\hline\n0 & 1 & 1 \\cr\\hline\n1 & 2 & 1 \\cr\\hline\n2 & 2 & 3 \\cr\\hline\n3 & 3 & 2 \\cr\\hline\n4 & 1 & 2 \\cr\\hline\n5 & 1 & 1 \\cr\\hline\n\\end{array}\n$$\n\n### 判分方式\n\n**本题使用 Special Judge。**\n\n对于每组数据，若你输出的方案不合法（含不合法的移动操作，或者蓝或橙没有经过每个结点至少 $1$ 次，或者最后蓝和橙没有在 $S$ 点），你的分数为零分。否则你的分数将这样计算：\n\n- 当 $k \\leq 4\\cdot n$ 时，你将获得该测试点 $20\\%$ 的分数；\n- 当 $k \\leq 3\\cdot n$ 时，你将获得该测试点 $40\\%$ 的分数；\n- 当 $k \\le \\lfloor\\frac{11}{4} \\cdot n\\rfloor$ 时，你将获得该测试点 $70\\%$ 的分数；\n- 当 $k \\le \\lfloor\\frac{8}{3} \\cdot n\\rfloor$ 时，你将获得该测试点所有的分数。\n\n### 数据范围\n\n**本题采用捆绑测试，且仅有一个 subtask，总成绩取各测试点最低分。**\n\n对于 $100\\%$ 的数据，$3\\leq n,m \\leq 5\\times 10^5$。\n\n### 校验器\n\n为了方便选手测试，在附件中我们下发了 `checker.cpp` 文件，选手可以编译该程序，并使用它校验自己的输出文件。但请注意它与最终评测时所使用的校验器并不完全一致。你也不需要关心其代码的具体内容。\n\n编译命令为：`g++ checker.cpp −o checker -std=c++14`。\n\nchecker 的使用方式为：`./checker <inputfile> <outputfile>`，参数依次表示输入文件与你的输出文件。\n\n若你输出的数字大小范围不合法，则校验器会给出相应提示。若你的输出数字大小范围正确，但方案错误，则校验器会给出简要的错误信息：\n\n1. `A x`，表示进行到第 $x$ 个操作时不合法。\n2. `B x`，表示操作执行完毕后蓝/橙没有经过每个节点至少一次，其中 $x=0$ 表示蓝，$x=1$ 表示橙。\n3. `C x`，表示操作执行完毕后蓝/橙没有回到 $S$ 点。其中 $x=0$ 表示蓝，$x=1$ 表示橙。\n4. `Illeagl Output`，表示你输出了错误的操作。\n\n若你的方案正确，校验器会给出 `OK`。\n\n保证在输入正确、方案合法的情况下 checker 的运行时间小于 1s。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-1.5」幻想乡游览计划", "background": "（此为背景，可以跳过）\n\n自从姬虫百百世开挖了妖怪之山山顶的虹龙洞后，一成不变的幻想乡又多了可以探索的地方。充满心机的、监视着幻想乡一切动静的八云紫自然需要对其内部了如指掌，以此来掌握对幻想乡的绝对控制权。作为八云紫的式神的八云蓝，则奉命探索这块区域。随行的还有八云蓝的式神，橙。\n\n虹龙洞开采的目的是为了获取其中的龙珠，而龙珠分布在虹龙洞内的各个角落。为了能够滴水不漏地得到更多的龙珠，百百世挖出了纵横交错的矿道，连接着各处的龙珠采集点。矿道之间相互交错，构成了一张层层叠叠的网。八云蓝和橙的任务则是分别到达过虹龙洞内所有的龙珠采集点，采集足够多的信息，以完成八云紫对虹龙洞彻底的监控目标。\n\n然而，身处于黑暗的洞穴内，诺大的虹龙洞的环境十分险恶。极度缺氧的环境使得探索虹龙洞并不是一件容易的事情，因此八云蓝与橙不可能在虹龙洞内探索过长的时间。所幸的是，八云蓝可以联系到八云紫；而拥有操控境界能力的紫，则可以利用隙间交换蓝和橙的位置。\n\n八云紫已经私通菅牧典从大天狗那里得到了虹龙洞的内部结构图。为了尽量减少在虹龙洞内滞留的时间，八云一家需要设计出一套可行的方案。", "description": "虹龙洞内可以抽象成一张有 $n$ 个点和 $m$ 条的无向连通图，图可能有自环和重边。\n\n紫会用隙间的能力，将蓝和橙传送到虹龙洞的某一结点上。此处使用隙间所花费的时间忽略不计。输出格式中的 $S$ 即代表初始传送到的结点。\n\n接下来橙和蓝将会分别进行移动。每单位时间，蓝或者橙可以移动到与她们所在结点**直接相连**的结点上，或者紫使用隙间能力交换蓝和橙的位置。请注意：在这一单位时间内**只有一个人（蓝或者橙或者紫）可以行动**，并且此处的交换操作也是花费时间的。\n\n现在，八云蓝请你构造出一个方案，使得橙和蓝**各自都**能经过虹龙洞的每个结点至少 $1$ 次，并且最后**都**回到一开始所在的结点 $S$ 以结束此次游览。在「输出格式」中蓝说明了构造方案的格式，你只要按格式输出构造方案告诉蓝就行了。", "inputFormat": "第一行两个整数 $n,m$，表示该图有 $n$ 个节点，$m$ 条边。\n\n接下来 $m$ 行，每行两个整数 $u,v$，表示有一条连接 $u,v$ 的无向边。", "outputFormat": "第一行输出两个整数 $S$ 和 $k$。其中 $S$ 的含义见题目描述，$k$ 表示你的方案的操作次数。\n\n接下来 $k$ 行，你可以输出三种操作中的一种指导八云一家行动：\n- 输出 `Ran u`，表示让蓝移动到结点 $u$；\n- 输出 `Chen u`，表示让橙移动到结点 $u$；\n- 输出 `Swap` 表示让紫交换橙和蓝的位置。\n\n你需要保证你的构造方案合法。\n\n容易发现，你的操作次数 $k$ 等于进行所有操作所花费的单位时间数。", "hint": "### 样例解释\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{操作次数} & \\textbf{蓝的位置} &\\textbf{橙的位置} \\cr\\hline\n0 & 1 & 1 \\cr\\hline\n1 & 2 & 1 \\cr\\hline\n2 & 2 & 3 \\cr\\hline\n3 & 3 & 2 \\cr\\hline\n4 & 1 & 2 \\cr\\hline\n5 & 1 & 1 \\cr\\hline\n\\end{array}\n$$\n\n### 判分方式\n\n**本题使用 Special Judge。**\n\n对于每组数据，若你输出的方案不合法（含不合法的移动操作，或者蓝或橙没有经过每个结点至少 $1$ 次，或者最后蓝和橙没有在 $S$ 点），你的分数为零分。否则你的分数将这样计算：\n\n- 当 $k \\leq 4\\cdot n$ 时，你将获得该测试点 $20\\%$ 的分数；\n- 当 $k \\leq 3\\cdot n$ 时，你将获得该测试点 $40\\%$ 的分数；\n- 当 $k \\le \\lfloor\\frac{11}{4} \\cdot n\\rfloor$ 时，你将获得该测试点 $70\\%$ 的分数；\n- 当 $k \\le \\lfloor\\frac{8}{3} \\cdot n\\rfloor$ 时，你将获得该测试点所有的分数。\n\n### 数据范围\n\n**本题采用捆绑测试，且仅有一个 subtask，总成绩取各测试点最低分。**\n\n对于 $100\\%$ 的数据，$3\\leq n,m \\leq 5\\times 10^5$。\n\n### 校验器\n\n为了方便选手测试，在附件中我们下发了 `checker.cpp` 文件，选手可以编译该程序，并使用它校验自己的输出文件。但请注意它与最终评测时所使用的校验器并不完全一致。你也不需要关心其代码的具体内容。\n\n编译命令为：`g++ checker.cpp −o checker -std=c++14`。\n\nchecker 的使用方式为：`./checker <inputfile> <outputfile>`，参数依次表示输入文件与你的输出文件。\n\n若你输出的数字大小范围不合法，则校验器会给出相应提示。若你的输出数字大小范围正确，但方案错误，则校验器会给出简要的错误信息：\n\n1. `A x`，表示进行到第 $x$ 个操作时不合法。\n2. `B x`，表示操作执行完毕后蓝/橙没有经过每个节点至少一次，其中 $x=0$ 表示蓝，$x=1$ 表示橙。\n3. `C x`，表示操作执行完毕后蓝/橙没有回到 $S$ 点。其中 $x=0$ 表示蓝，$x=1$ 表示橙。\n4. `Illeagl Output`，表示你输出了错误的操作。\n\n若你的方案正确，校验器会给出 `OK`。\n\n保证在输入正确、方案合法的情况下 checker 的运行时间小于 1s。", "locale": "zh-CN"}}}
{"pid": "P8120", "type": "P", "difficulty": 7, "samples": [["4 6 6 1\n1 2 3 4\n1 2 3 2 3 4\n1 3\n2 7\n1 7\n0 7\n0 4\n2 5", "3\n3\n2\n2\n3\n4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720, 1310720]}, "tags": ["洛谷原创", "O2优化", "分块", "洛谷月赛"], "title": "「RdOI R3.5」RMSQ", "background": "", "description": "给出一个长度为 $m$ 的**排列** $b$ 和一个长度为 $n$ 的**序列** $a$。\n\n如果一个序列 $S$，满足其按位置从左到右依次匹配 $b$ 的一个区间从左到右的位置，那么我们说 $S$ 是一个「优美序列」。\n\n给出 $q$ 次询问。每次询问给出两个整数 $l$ 和 $r$。你需要找到一个 $a$ 的 $[l,r]$ 子区间中的一个最长的满足「优美序列」条件的子序列长度。注意子序列可以不连续。", "inputFormat": "- 第一行输入四个整数 $m,n,q,T$，其中 $n,m,q$ 的含义见「题目描述」，$T$ 表示是否强制在线。\n- 第二行输入 $m$ 个整数 $b_1,b_2,\\cdots,b_m$。\n- 第三行输入 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n- 接下来 $q$ 行每行输入两个整数 $l',r'$。若 $T=1$，则你需要将 $l'$ 和 $r'$ 按位异或 $\\mathit{lastans}$ 来得到真正的 $l,r$。其定义为上一次询问操作得到的答案，若之前没有询问操作，则为 $0$。否则若 $T=0$，则 $l=l',r=r'$。", "outputFormat": "- 输出共 $q$ 行。\n- 第 $i$ 行输出一个整数，表示第 $i$ 次询问的答案。", "hint": "### 样例解释\n\n$\\mathit{lastans}$ 解密后的询问为：\n\n```plain\n1 3\n1 4\n2 4\n2 5\n2 6\n1 6\n```\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|} \\hline\n\\textbf{Subtask} & \\textbf{分值} & \\bm{{n,m\\le}} &\\bm{{q\\le}} & \\bm{{T=}} & \\textbf{特殊性质} & \\textbf{Subtask 依赖}\\cr\\hline\n1 & 10 & 100 & 10^4 & 1 & \\textbf{A} & -\\cr\\hline\n2 & 15 & 10^5 & 10^5 & 1 & \\textbf{A} & 1\\cr\\hline\n3 & 30 & 3\\times 10^5 & 10^6 & 0 & - & -\\cr\\hline\n4 & 45 & 3\\times 10^5 & 10^6 & 1 & - & 2,3\\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\textbf{A}$：保证 $a_i,b_i,l,r$ 在数据范围内均匀随机。\n\n对于 $100\\%$ 的数据，$1\\le l\\le r\\le n\\le 3\\times 10^5$，$1\\le a_i\\le m\\le 3\\times 10^5$，$1\\le q \\le 1\\times 10^6$，$T \\in \\{0,1\\}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R3.5」RMSQ", "background": "", "description": "给出一个长度为 $m$ 的**排列** $b$ 和一个长度为 $n$ 的**序列** $a$。\n\n如果一个序列 $S$，满足其按位置从左到右依次匹配 $b$ 的一个区间从左到右的位置，那么我们说 $S$ 是一个「优美序列」。\n\n给出 $q$ 次询问。每次询问给出两个整数 $l$ 和 $r$。你需要找到一个 $a$ 的 $[l,r]$ 子区间中的一个最长的满足「优美序列」条件的子序列长度。注意子序列可以不连续。", "inputFormat": "- 第一行输入四个整数 $m,n,q,T$，其中 $n,m,q$ 的含义见「题目描述」，$T$ 表示是否强制在线。\n- 第二行输入 $m$ 个整数 $b_1,b_2,\\cdots,b_m$。\n- 第三行输入 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n- 接下来 $q$ 行每行输入两个整数 $l',r'$。若 $T=1$，则你需要将 $l'$ 和 $r'$ 按位异或 $\\mathit{lastans}$ 来得到真正的 $l,r$。其定义为上一次询问操作得到的答案，若之前没有询问操作，则为 $0$。否则若 $T=0$，则 $l=l',r=r'$。", "outputFormat": "- 输出共 $q$ 行。\n- 第 $i$ 行输出一个整数，表示第 $i$ 次询问的答案。", "hint": "### 样例解释\n\n$\\mathit{lastans}$ 解密后的询问为：\n\n```plain\n1 3\n1 4\n2 4\n2 5\n2 6\n1 6\n```\n\n### 数据范围\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|} \\hline\n\\textbf{Subtask} & \\textbf{分值} & \\bm{{n,m\\le}} &\\bm{{q\\le}} & \\bm{{T=}} & \\textbf{特殊性质} & \\textbf{Subtask 依赖}\\cr\\hline\n1 & 10 & 100 & 10^4 & 1 & \\textbf{A} & -\\cr\\hline\n2 & 15 & 10^5 & 10^5 & 1 & \\textbf{A} & 1\\cr\\hline\n3 & 30 & 3\\times 10^5 & 10^6 & 0 & - & -\\cr\\hline\n4 & 45 & 3\\times 10^5 & 10^6 & 1 & - & 2,3\\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\textbf{A}$：保证 $a_i,b_i,l,r$ 在数据范围内均匀随机。\n\n对于 $100\\%$ 的数据，$1\\le l\\le r\\le n\\le 3\\times 10^5$，$1\\le a_i\\le m\\le 3\\times 10^5$，$1\\le q \\le 1\\times 10^6$，$T \\in \\{0,1\\}$。\n", "locale": "zh-CN"}}}
{"pid": "P8121", "type": "P", "difficulty": 0, "samples": [["1 1 3 100 1 5\n1 1 1 2 3\n1 100 0 0 1 0\n1 100 1 0 0 0\n2 3 0 1 0 0\n", "34\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "动态规划 DP", "搜索", "贪心", "高精度", "2022", "洛谷原创", "Special Judge", "O2优化", "枚举", "最短路", "高斯消元", "位运算", "洛谷月赛"], "title": "「RdOI R3.5 附加」ACP-II", "background": "在 1951 年，第 -32 届全国青少年信息学奥林匹克冬令营结束后，打了一上午比赛的小 A 疲惫不堪，想放松一下。于是他又借助时空传输接口（**T**ime **T**ransport **I**nterface）连接了一台 2015 年的计算机，获取到了最新的游戏「**AC** **P**roject 15 / Legacy of DWT AKing IOI」来游玩。\n", "description": "**这是一道传统题。**\n\n你需要控制机器人玩躲避子弹的游戏。游戏的画面是一个在第一象限，坐标范围从 $(0,0)$ 至 $(n,m)$ 的矩形。机器人初始生成在坐标 $(0,0)$。你可以通过以下几种指令来控制这个机器人：\n\n$$\n\\begin{array}{|c|l|}\\hline\n\\textsf{\\textbf{指令}} & \\textsf{\\textbf{描述}} \\cr\\hline\n\\bm 0 & \\textsf{机器人静止不动} \\cr\\hline\n\\bm 1 & \\textsf{机器人向左移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x-1,y)$} \\cr\\hline\n\\bm 2 & \\textsf{机器人向下移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x,y-1)$} \\cr\\hline\n\\bm 3 & \\textsf{机器人向上移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x,y+1)$} \\cr\\hline\n\\bm 4 & \\textsf{机器人向右移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x+1,y)$} \\cr\\hline\n\\end{array}\n$$\n\n你构造的指令用一个数字串 $C'$ 表示。每种指令都会耗费一定的费用。具体来讲，你构造的**原始指令** $C'$ 中每包含一个 $i$ 号命令，就会耗费 $P_i$ 的费用。\n\n你的指令会被重复 $k$ 遍，作为机器人的移动指令 $C$。例如当 $C'=1123$，$k=3$ 时，机器人收到的指令 $C= 112311231123$。\n\n游戏中会生成 $b$ 个子弹，每个子弹用一个有序六元组 $(l_i,r_i,x_i,y_i,p_i,q_i)$ 表示。它的意思是这颗子弹在 $l_i$ 秒生成，第 $r_i$ 秒销毁。生成时的坐标为 $(x_i,y_i)$。每秒沿着 $x$ 轴正方向移动 $p_i$ 单位长度，沿着 $y$ 轴正方向移动 $q_i$ 单位长度。\n\n游戏共进行 $d$ 秒，若 $d$ 秒内机器人碰撞到子弹或者移动到画面以外，机器人就会爆炸，游戏失败。如果在第 $d$ 秒结束时机器人没有爆炸，则游戏胜利。\n\n游戏中的每一秒分为五个阶段，每个阶段结束后才会执行下一个阶段：\n\n1. 机器人移动阶段。机器人会在第 $i$ 秒执行 $C_i$ 指令。若 $C$ 的长度 $< i$，也就是说所有指令都执行完了，则静止不动。\n1. 子弹移动阶段，所有已经生成且还未销毁的子弹会进行一次移动。具体来讲，设当前是第 $c$ 秒，对于满足 $l_i<c\\le r_i$ 的每个子弹 $(l_i,r_i,x_i,y_i,p_i,q_i)$，它的坐标会变为 $(x_i+(c-l_i)p_i,y_i+(c-l_i)q_i)$。\n1. 子弹生成阶段。设当前是第 $c$ 秒，对于所有 $l_i=c$ 的子弹，将它们生成进画面，放置各自的初始位置 $(x_i,y_i)$ 上。\n1. 判定阶段。若此时机器人的位置超出了画面，或者碰撞到了任意一颗已经被生成且尚未销毁的子弹，则机器人就会受击爆炸。具体来说，对于每一颗在画面上的子弹，设这颗子弹在这一秒初的位置为 $P=(x',y')$，当前的位置为 $Q=(x'',y'')$。若子弹是在这一秒内刚生成的则 $P=Q$。连接线段 $PQ$，若当前机器人的坐标在这条线段上（包括在线段的端点上），则视为机器人碰撞到了子弹。\n1. 子弹销毁阶段。设当前是第 $c$ 秒，对于所有 $r_i=c$ 的子弹，将它们销毁。\n", "inputFormat": "- 第一行输入六个整数 $n,m,b,d,k,maxc$。\n- 第二行输入五个整数 $P_0,P_1,P_2,P_3,P_4$。\n- 第三行至第 $b+2$ 行，每行输入六个整数。其中第 $i+2$ 行输入的整数分别代表 $l_i,r_i,x_i,y_i,p_i,q_i$。\n", "outputFormat": "- 若 $maxc\\ge 0$，则你需要输出一行一个字符串，表示你构造的指令，你需要保证指令费用 $\\le maxc$。\n- 否则，你需要输出一行一个整数，表示在所有可以成功完成游戏的指令中费用最少的指令的费用是多少。\n", "hint": "### 样例解释\n\n示意图里用 `0` 表示子弹，`1` 表示机器人，`.` 表示空位。\n\n第 $1$ 秒钟：机器人移动到了 $(0,1)$；在 $(0,0)$ 和 $(1,0)$ 分别生成了一颗子弹。\n\n```\n1.\n00\n```\n\n第 $2$ 秒钟：机器人移动到了 $(1,1)$；在 $(0,0)$ 处的子弹移动到了 $(0,1)$；在 $(0,1)$ 生成了一颗子弹。所以现在在 $(0,1)$ 处有两颗子弹（在下图中因为子弹重合只标出了一颗）。\n\n```\n01\n.0\n```\n\n第 $3$ 秒钟：机器人位置不变；其中一颗位于 $(0,1)$ 的子弹飞出了画面；另外一颗位于 $(0,1)$ 的子弹被销毁。\n\n```\n.1\n.0\n```\n\n第 $4$ 秒至第 $100$ 秒：机器人没有移动；位于画面外的子弹移动后仍然在画面之外，在画面内的那颗子弹没有移动，画面情况同第三秒的情况。\n\n综上所述，这个指令可以成功完成游戏，费用为 $1\\times 3+ 1 \\times2=5$。\n\n---\n\n### 数据范围及限制\n\n**本题采用捆绑测试。**\n\n$$\n\\begin{array}{|c|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{subtask} & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8\\cr\\hline\n\\textbf{分值} & 10 & 10 & 10 & 10 & 15 & 15 & 15 & 15\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $n,m,b,d,P_i\\ge0$，$k\\ge 1$，$1\\le l \\le r$，$maxc\\ge-1$。\n\n你可能会想，这算什么数据范围？怎么没有上界？而且表格里怎么没有 subtask 的特殊限制？实际上，出题人也不知道数据的上界和特殊限制。\n\n由于出题人的误操作，数据生成器源代码意外丢失，只剩下可执行程序。下发文件中提供了在 Windows / Linux / Mac 下编译的可执行程序。不同操作系统下编译的文件名如下：\n\n- 对于 Windows 系统（文件名 genX-w32）：`g++ genX.cpp -o genX -O3 -std=c++14`，在 Windows10，Dev-C++ 5.50，TDM-GCC 4.9.2 32bit 下编译。\n- 对于 Linux/Mac 系统（32 位，文件名 genX-l32）：`g++ genX.cpp -o genX -O3 -std=c++14 -m32`，在 NOI Linux 2.0，GCC 9.3.0 下编译。\n- 对于 Linux/Mac 系统（64 位，文件名 genX-l64）：`g++ genX.cpp -o genX -O3 -std=c++14 -m64`，在 NOI Linux 2.0，GCC 9.3.0 下编译。\n\n数据生成器需要在运行后输入一个 $[1,2^{30})$ 范围内的整数作为随机数种子，它会生成一份输入至 `0.in` 中。出题人无法保证生成的数据范围，但是可以保证：\n\n- 同一个生成器所生成出的数据拥有同一个特殊限制。\n- 所有生成器在 NOI Linux 2.0，处理器 i5-4200m 下运行，所用时间不超过 3s，内存占用不超过 2G。\n- 生成出来的数据只与你输入的种子有关，与当前时间、操作系统等其它可变因素无关。\n- 部分数据生成器会有极小概率生成一个无解数据，但保证 OJ 上的所有数据均有解。\n- 你输入的种子只会当作随机数的种子使用，生成器不会出现特判种子生成干扰数据等行为。\n\n数据中的每个 subtask 分别对应一个数据生成器所生成的数据。编号为 $X$ 的 subtask 对应的生成器是 `genX`。\n\n**注意：由于输入格式中没有要求输入「subtask 编号」，你需要自己判断当前数据所对应的 subtask。且本题的 subtask 为乱序排布，你需要自己判断每个 subtask 的难易程度。**\n\n同时，在下发文件分发有 `checker.cpp`。使用 `g++ checker.cpp -o checker -std=c++14` 将 `checker.cpp` 编译为可执行文件后运行 `./checker <inputfile> <outputfile>`，`checker` 就会给出游戏的输赢情况。其中 `<inputfile>` 为数据生成器生成的 `.in` 文件；`<outputfile>` 中存放你的输出。**本 checker 仅供理解游戏规则使用，和实际使用的 checker 有所不同，且不保证 checker 的时间复杂度正确。**\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R3.5 附加」ACP-II", "background": "在 1951 年，第 -32 届全国青少年信息学奥林匹克冬令营结束后，打了一上午比赛的小 A 疲惫不堪，想放松一下。于是他又借助时空传输接口（**T**ime **T**ransport **I**nterface）连接了一台 2015 年的计算机，获取到了最新的游戏「**AC** **P**roject 15 / Legacy of DWT AKing IOI」来游玩。\n", "description": "**这是一道传统题。**\n\n你需要控制机器人玩躲避子弹的游戏。游戏的画面是一个在第一象限，坐标范围从 $(0,0)$ 至 $(n,m)$ 的矩形。机器人初始生成在坐标 $(0,0)$。你可以通过以下几种指令来控制这个机器人：\n\n$$\n\\begin{array}{|c|l|}\\hline\n\\textsf{\\textbf{指令}} & \\textsf{\\textbf{描述}} \\cr\\hline\n\\bm 0 & \\textsf{机器人静止不动} \\cr\\hline\n\\bm 1 & \\textsf{机器人向左移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x-1,y)$} \\cr\\hline\n\\bm 2 & \\textsf{机器人向下移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x,y-1)$} \\cr\\hline\n\\bm 3 & \\textsf{机器人向上移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x,y+1)$} \\cr\\hline\n\\bm 4 & \\textsf{机器人向右移动 $1$ 单位长度，即从 $(x,y)$ 移动到 $(x+1,y)$} \\cr\\hline\n\\end{array}\n$$\n\n你构造的指令用一个数字串 $C'$ 表示。每种指令都会耗费一定的费用。具体来讲，你构造的**原始指令** $C'$ 中每包含一个 $i$ 号命令，就会耗费 $P_i$ 的费用。\n\n你的指令会被重复 $k$ 遍，作为机器人的移动指令 $C$。例如当 $C'=1123$，$k=3$ 时，机器人收到的指令 $C= 112311231123$。\n\n游戏中会生成 $b$ 个子弹，每个子弹用一个有序六元组 $(l_i,r_i,x_i,y_i,p_i,q_i)$ 表示。它的意思是这颗子弹在 $l_i$ 秒生成，第 $r_i$ 秒销毁。生成时的坐标为 $(x_i,y_i)$。每秒沿着 $x$ 轴正方向移动 $p_i$ 单位长度，沿着 $y$ 轴正方向移动 $q_i$ 单位长度。\n\n游戏共进行 $d$ 秒，若 $d$ 秒内机器人碰撞到子弹或者移动到画面以外，机器人就会爆炸，游戏失败。如果在第 $d$ 秒结束时机器人没有爆炸，则游戏胜利。\n\n游戏中的每一秒分为五个阶段，每个阶段结束后才会执行下一个阶段：\n\n1. 机器人移动阶段。机器人会在第 $i$ 秒执行 $C_i$ 指令。若 $C$ 的长度 $< i$，也就是说所有指令都执行完了，则静止不动。\n1. 子弹移动阶段，所有已经生成且还未销毁的子弹会进行一次移动。具体来讲，设当前是第 $c$ 秒，对于满足 $l_i<c\\le r_i$ 的每个子弹 $(l_i,r_i,x_i,y_i,p_i,q_i)$，它的坐标会变为 $(x_i+(c-l_i)p_i,y_i+(c-l_i)q_i)$。\n1. 子弹生成阶段。设当前是第 $c$ 秒，对于所有 $l_i=c$ 的子弹，将它们生成进画面，放置各自的初始位置 $(x_i,y_i)$ 上。\n1. 判定阶段。若此时机器人的位置超出了画面，或者碰撞到了任意一颗已经被生成且尚未销毁的子弹，则机器人就会受击爆炸。具体来说，对于每一颗在画面上的子弹，设这颗子弹在这一秒初的位置为 $P=(x',y')$，当前的位置为 $Q=(x'',y'')$。若子弹是在这一秒内刚生成的则 $P=Q$。连接线段 $PQ$，若当前机器人的坐标在这条线段上（包括在线段的端点上），则视为机器人碰撞到了子弹。\n1. 子弹销毁阶段。设当前是第 $c$ 秒，对于所有 $r_i=c$ 的子弹，将它们销毁。\n", "inputFormat": "- 第一行输入六个整数 $n,m,b,d,k,maxc$。\n- 第二行输入五个整数 $P_0,P_1,P_2,P_3,P_4$。\n- 第三行至第 $b+2$ 行，每行输入六个整数。其中第 $i+2$ 行输入的整数分别代表 $l_i,r_i,x_i,y_i,p_i,q_i$。\n", "outputFormat": "- 若 $maxc\\ge 0$，则你需要输出一行一个字符串，表示你构造的指令，你需要保证指令费用 $\\le maxc$。\n- 否则，你需要输出一行一个整数，表示在所有可以成功完成游戏的指令中费用最少的指令的费用是多少。\n", "hint": "### 样例解释\n\n示意图里用 `0` 表示子弹，`1` 表示机器人，`.` 表示空位。\n\n第 $1$ 秒钟：机器人移动到了 $(0,1)$；在 $(0,0)$ 和 $(1,0)$ 分别生成了一颗子弹。\n\n```\n1.\n00\n```\n\n第 $2$ 秒钟：机器人移动到了 $(1,1)$；在 $(0,0)$ 处的子弹移动到了 $(0,1)$；在 $(0,1)$ 生成了一颗子弹。所以现在在 $(0,1)$ 处有两颗子弹（在下图中因为子弹重合只标出了一颗）。\n\n```\n01\n.0\n```\n\n第 $3$ 秒钟：机器人位置不变；其中一颗位于 $(0,1)$ 的子弹飞出了画面；另外一颗位于 $(0,1)$ 的子弹被销毁。\n\n```\n.1\n.0\n```\n\n第 $4$ 秒至第 $100$ 秒：机器人没有移动；位于画面外的子弹移动后仍然在画面之外，在画面内的那颗子弹没有移动，画面情况同第三秒的情况。\n\n综上所述，这个指令可以成功完成游戏，费用为 $1\\times 3+ 1 \\times2=5$。\n\n---\n\n### 数据范围及限制\n\n**本题采用捆绑测试。**\n\n$$\n\\begin{array}{|c|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{subtask} & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8\\cr\\hline\n\\textbf{分值} & 10 & 10 & 10 & 10 & 15 & 15 & 15 & 15\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $n,m,b,d,P_i\\ge0$，$k\\ge 1$，$1\\le l \\le r$，$maxc\\ge-1$。\n\n你可能会想，这算什么数据范围？怎么没有上界？而且表格里怎么没有 subtask 的特殊限制？实际上，出题人也不知道数据的上界和特殊限制。\n\n由于出题人的误操作，数据生成器源代码意外丢失，只剩下可执行程序。下发文件中提供了在 Windows / Linux / Mac 下编译的可执行程序。不同操作系统下编译的文件名如下：\n\n- 对于 Windows 系统（文件名 genX-w32）：`g++ genX.cpp -o genX -O3 -std=c++14`，在 Windows10，Dev-C++ 5.50，TDM-GCC 4.9.2 32bit 下编译。\n- 对于 Linux/Mac 系统（32 位，文件名 genX-l32）：`g++ genX.cpp -o genX -O3 -std=c++14 -m32`，在 NOI Linux 2.0，GCC 9.3.0 下编译。\n- 对于 Linux/Mac 系统（64 位，文件名 genX-l64）：`g++ genX.cpp -o genX -O3 -std=c++14 -m64`，在 NOI Linux 2.0，GCC 9.3.0 下编译。\n\n数据生成器需要在运行后输入一个 $[1,2^{30})$ 范围内的整数作为随机数种子，它会生成一份输入至 `0.in` 中。出题人无法保证生成的数据范围，但是可以保证：\n\n- 同一个生成器所生成出的数据拥有同一个特殊限制。\n- 所有生成器在 NOI Linux 2.0，处理器 i5-4200m 下运行，所用时间不超过 3s，内存占用不超过 2G。\n- 生成出来的数据只与你输入的种子有关，与当前时间、操作系统等其它可变因素无关。\n- 部分数据生成器会有极小概率生成一个无解数据，但保证 OJ 上的所有数据均有解。\n- 你输入的种子只会当作随机数的种子使用，生成器不会出现特判种子生成干扰数据等行为。\n\n数据中的每个 subtask 分别对应一个数据生成器所生成的数据。编号为 $X$ 的 subtask 对应的生成器是 `genX`。\n\n**注意：由于输入格式中没有要求输入「subtask 编号」，你需要自己判断当前数据所对应的 subtask。且本题的 subtask 为乱序排布，你需要自己判断每个 subtask 的难易程度。**\n\n同时，在下发文件分发有 `checker.cpp`。使用 `g++ checker.cpp -o checker -std=c++14` 将 `checker.cpp` 编译为可执行文件后运行 `./checker <inputfile> <outputfile>`，`checker` 就会给出游戏的输赢情况。其中 `<inputfile>` 为数据生成器生成的 `.in` 文件；`<outputfile>` 中存放你的输出。**本 checker 仅供理解游戏规则使用，和实际使用的 checker 有所不同，且不保证 checker 的时间复杂度正确。**\n", "locale": "zh-CN"}}}
{"pid": "P8122", "type": "P", "difficulty": 5, "samples": [["15 3 42 8", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "交互题", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2021] A Difficulty Choice (Day1)", "background": "**本题为交互题。**\n\n感谢交互库与 checker 的提供者 [Hi_chocolate](https://www.luogu.com.cn/user/193198) 为本题做出的巨大贡献。\n\n### 特别提示\n\n**在洛谷提交本题时的一些注意事项（与原题面不同之处请以此处为准）：**\n\n1. 提交时请在程序里加入以下函数声明语句：\n\n```cpp\nextern \"C\" long long skim (int i);\nextern \"C\" void answer (std::vector<int> v);\nextern \"C\" void impossible ();\n```\n\n你实现的 `solve` 函数应为：\n\n```cpp\nextern \"C\" void solve (int N, int K, long long A, int S);\n```\n\n2. 程序开头不用，也不应该包含 `books.h` 头文件。\n3. 仅支持 `C++`（含 `C++`，`C++11`，`C++14`，`C++17`）提交。", "description": "您致力于 AK BalticOI，而 AK BalticOI 的方式就是学习。您走进了一家书店，架子上有 $N$ 本书，编号为 $1$ 到 $N$，第 $i$ 本的难度为 $x_i$。您要从这 $N$ 本书中挑选出 $K$ 本书用来学习，您不希望学到太简单或太难的东西，所以您想要保证这 $K$ 本书的难度之和位于 $[A,2A]$ 的区间内。\n\n可惜的是，您并不知道 $x_i$ 的具体数值，所以您要浏览这些书籍以得知他们的难度。书店老板有洁癖，他不希望您浏览太多的书籍，所以他规定您最多只能浏览 $S$ 本书，然后确定这些书的难度。幸运的是，您被告知这 $N$ 本书按照编号的增加，难度呈单调递增。\n\n请编写一个程序，通过浏览书籍，购买您需要的书籍，或者指出无解。\n\n### 交互格式\n\n本题为交互题，您需要编写 `void solve (int N, int K, long long A, int S)` 函数，$N,K,A,S$ 在上面已经定义，并且保证 $x_1<x_2<\\cdots<x_n$，该函数只被调用一次。\n\n您还可以调用如下的函数：\n\n- `long long skim (int i)` 浏览第 $i$ 本书以获取他的难度 $x_i$。\n- `void answer (vector<int> v)` 买您所需要的书。其中 $v=\\{i_1,i_2,\\cdots,i_K\\}$，并且需要满足：\n$$A \\le \\sum\\limits_{j=1}^K x_{i_j} \\le 2A$$\n- `void impossible ()` 指出不可能按照要求买下 $K$ 本书。\n\n如果存在满足要求的 $K$ 本书，您必须准确地调用 `answer` 函数一次；否则您需要准确地调用 `impossible` 函数一次。调用过后，程序会自动停止。\n\n如果您的函数调用不符合上面的格式，或者调用了超过 $S$ 次 `skim` 函数，程序会自动停止，这个测试点会判为 **Not correct**；你不能在标准输出中输出任何东西，否则会被判为 **Security violation**。\n\n如果您使用 C++ 编码，请调用 `books.h` 头文件，如果您想检验您的程序的正确性，可以在下方附件中下载 `sample_grader.cpp` 与 `books_sample.cpp`，分别为您提供检验正确性和示例说明的作用。\n\n如果您使用 Python 编码，可以在下方附件中下载 `books_sample.py` 检验。\n\n交互库希望标准输入里有两行：\n\n- 第一行四个整数，$N,K,A,S$。\n- 第二行 $N$ 个整数，$x_1,x_2,\\cdots,x_N$。\n\n随后，交互库会调用您的程序，最后，交互库会在标准输出中返回信息：\n\n|信息|意义|\n|:-:|:-:|\n|**Invalid input.**|标准输入的格式错误|\n|**Invalid skim.**|`skim` 函数调用无效|\n|**Out of books to skim.**|`skim` 函数调用超过 $S$ 次|\n|**Invalid answer.**|`answer` 函数调用无效|\n|**Wrong answer.**|`answer` 函数调用的 $v$ 不满足要求|\n|**No answer.**|`solve` 函数没有调用 `answer` 函数和 `impossible` 函数中的任意一个|\n|**Impossible (not checked): s book(s) skimmed.**|上述事件都没有发生，调用了 $S$ 次 `skim` 函数，并在有答案的时候调用了 `impossible` 函数|\n|**Correct: s book(s) skimmed.**|上述事件都没有发生，调用了 $S$ 次 `skim` 函数|\n\n针对上面若干个错误的情况，交互库仅会返回 **Not correct**，或者正确的时候返回 **Correct**。每当出现上面的若干个错误，或者您的程序调用了 `answer` 或 `impossible` 函数时，程序会被自动停止。", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "#### 样例 1 解释\n\n$N=15$，$K=3$，$A=42$，$S=8$，下面是可能的两种会被判为通过的调用结果：\n\n示例 1：\n\n|你的程序|返回值|\n|:-:|:-:|\n|`skim(1)`|$1337$|\n|`impossible`|-|\n\n示例 2：\n\n|你的程序|返回值|\n|:-:|:-:|\n|`skim(1)`|$7$|\n|`skim(15)`|$21$|\n|`answer({11,15,7})`|-|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$S=N$，$170 \\le N \\le 1000$，$K=3$。\n- Subtask 2（15 pts）：$S=N$，$N \\ge 170$。\n- Subtask 3（10 pts）：$S \\ge 170$，$x_{i+1}-x_i \\le \\frac A K$。\n- Subtask 4（15 pts）：$S \\ge 170$，$x_{i+1}-x_i \\le A$。\n- Subtask 5（15 pts）：$S \\ge 170$。\n- Subtask 6（20 pts）：$S \\ge 40$，$x_{i+1}-x_i \\le A$。\n- Subtask 7（20 pts）：$S \\ge 40$。\n\n对于 $100\\%$ 的数据，$K \\le N$，$3 \\le N,S \\le 10^5$，$1 \\le A,x_i \\le 10^{17}$，$3 \\le K \\le 10$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day1 A A Difficulty Choice](https://boi.cses.fi/files/boi2021_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2021] A Difficulty Choice (Day1)", "background": "**本题为交互题。**\n\n感谢交互库与 checker 的提供者 [Hi_chocolate](https://www.luogu.com.cn/user/193198) 为本题做出的巨大贡献。\n\n### 特别提示\n\n**在洛谷提交本题时的一些注意事项（与原题面不同之处请以此处为准）：**\n\n1. 提交时请在程序里加入以下函数声明语句：\n\n```cpp\nextern \"C\" long long skim (int i);\nextern \"C\" void answer (std::vector<int> v);\nextern \"C\" void impossible ();\n```\n\n你实现的 `solve` 函数应为：\n\n```cpp\nextern \"C\" void solve (int N, int K, long long A, int S);\n```\n\n2. 程序开头不用，也不应该包含 `books.h` 头文件。\n3. 仅支持 `C++`（含 `C++`，`C++11`，`C++14`，`C++17`）提交。", "description": "您致力于 AK BalticOI，而 AK BalticOI 的方式就是学习。您走进了一家书店，架子上有 $N$ 本书，编号为 $1$ 到 $N$，第 $i$ 本的难度为 $x_i$。您要从这 $N$ 本书中挑选出 $K$ 本书用来学习，您不希望学到太简单或太难的东西，所以您想要保证这 $K$ 本书的难度之和位于 $[A,2A]$ 的区间内。\n\n可惜的是，您并不知道 $x_i$ 的具体数值，所以您要浏览这些书籍以得知他们的难度。书店老板有洁癖，他不希望您浏览太多的书籍，所以他规定您最多只能浏览 $S$ 本书，然后确定这些书的难度。幸运的是，您被告知这 $N$ 本书按照编号的增加，难度呈单调递增。\n\n请编写一个程序，通过浏览书籍，购买您需要的书籍，或者指出无解。\n\n### 交互格式\n\n本题为交互题，您需要编写 `void solve (int N, int K, long long A, int S)` 函数，$N,K,A,S$ 在上面已经定义，并且保证 $x_1<x_2<\\cdots<x_n$，该函数只被调用一次。\n\n您还可以调用如下的函数：\n\n- `long long skim (int i)` 浏览第 $i$ 本书以获取他的难度 $x_i$。\n- `void answer (vector<int> v)` 买您所需要的书。其中 $v=\\{i_1,i_2,\\cdots,i_K\\}$，并且需要满足：\n$$A \\le \\sum\\limits_{j=1}^K x_{i_j} \\le 2A$$\n- `void impossible ()` 指出不可能按照要求买下 $K$ 本书。\n\n如果存在满足要求的 $K$ 本书，您必须准确地调用 `answer` 函数一次；否则您需要准确地调用 `impossible` 函数一次。调用过后，程序会自动停止。\n\n如果您的函数调用不符合上面的格式，或者调用了超过 $S$ 次 `skim` 函数，程序会自动停止，这个测试点会判为 **Not correct**；你不能在标准输出中输出任何东西，否则会被判为 **Security violation**。\n\n如果您使用 C++ 编码，请调用 `books.h` 头文件，如果您想检验您的程序的正确性，可以在下方附件中下载 `sample_grader.cpp` 与 `books_sample.cpp`，分别为您提供检验正确性和示例说明的作用。\n\n如果您使用 Python 编码，可以在下方附件中下载 `books_sample.py` 检验。\n\n交互库希望标准输入里有两行：\n\n- 第一行四个整数，$N,K,A,S$。\n- 第二行 $N$ 个整数，$x_1,x_2,\\cdots,x_N$。\n\n随后，交互库会调用您的程序，最后，交互库会在标准输出中返回信息：\n\n|信息|意义|\n|:-:|:-:|\n|**Invalid input.**|标准输入的格式错误|\n|**Invalid skim.**|`skim` 函数调用无效|\n|**Out of books to skim.**|`skim` 函数调用超过 $S$ 次|\n|**Invalid answer.**|`answer` 函数调用无效|\n|**Wrong answer.**|`answer` 函数调用的 $v$ 不满足要求|\n|**No answer.**|`solve` 函数没有调用 `answer` 函数和 `impossible` 函数中的任意一个|\n|**Impossible (not checked): s book(s) skimmed.**|上述事件都没有发生，调用了 $S$ 次 `skim` 函数，并在有答案的时候调用了 `impossible` 函数|\n|**Correct: s book(s) skimmed.**|上述事件都没有发生，调用了 $S$ 次 `skim` 函数|\n\n针对上面若干个错误的情况，交互库仅会返回 **Not correct**，或者正确的时候返回 **Correct**。每当出现上面的若干个错误，或者您的程序调用了 `answer` 或 `impossible` 函数时，程序会被自动停止。", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "#### 样例 1 解释\n\n$N=15$，$K=3$，$A=42$，$S=8$，下面是可能的两种会被判为通过的调用结果：\n\n示例 1：\n\n|你的程序|返回值|\n|:-:|:-:|\n|`skim(1)`|$1337$|\n|`impossible`|-|\n\n示例 2：\n\n|你的程序|返回值|\n|:-:|:-:|\n|`skim(1)`|$7$|\n|`skim(15)`|$21$|\n|`answer({11,15,7})`|-|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$S=N$，$170 \\le N \\le 1000$，$K=3$。\n- Subtask 2（15 pts）：$S=N$，$N \\ge 170$。\n- Subtask 3（10 pts）：$S \\ge 170$，$x_{i+1}-x_i \\le \\frac A K$。\n- Subtask 4（15 pts）：$S \\ge 170$，$x_{i+1}-x_i \\le A$。\n- Subtask 5（15 pts）：$S \\ge 170$。\n- Subtask 6（20 pts）：$S \\ge 40$，$x_{i+1}-x_i \\le A$。\n- Subtask 7（20 pts）：$S \\ge 40$。\n\n对于 $100\\%$ 的数据，$K \\le N$，$3 \\le N,S \\le 10^5$，$1 \\le A,x_i \\le 10^{17}$，$3 \\le K \\le 10$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day1 A A Difficulty Choice](https://boi.cses.fi/files/boi2021_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8123", "type": "P", "difficulty": 6, "samples": [["6 9\nS 1 2\nS 1 3\nS 3 4\nQ 5 1\nS 4 5\nS 1 6\nQ 5 1\nQ 1 5\nC 1\nC 2\nC 3\nC 4\nC 5\nC 6", "no\nyes\nno\n6\n6\n5\n3\n2\n2"], ["4 4\nS 1 2\nS 1 3\nS 3 4\nQ 2 1\nQ 2 2\nQ 2 3\nQ 2 4", "yes\nyes\nno\nno"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["点分治", "2021", "可持久化线段树", "分块", "BalticOI（波罗的海）", "线段树合并"], "title": "[BalticOI 2021] Inside information (Day1)", "background": "", "description": "有 $N$ 个服务器，第 $i$ 个服务器存储着第 $i$ 块数据，现在有若干种操作：\n\n- `S a b` 第 $a$ 个服务器与第 $b$ 个服务器共享数据，即这两个服务器同时拥有这两个服务器本身拥有的数据块的和，并自动去重（可以理解为数据块之并）。\n- `Q a d` 查询第 $a$ 个服务器是否拥有第 $d$ 块数据。\n- `C a` 查询存储数据块 $a$ 的服务器数量。\n\nS 操作有 $N-1$ 次，如果把共享看做连边，那么最后将形成以 $N$ 个服务器为点的一棵树；Q 操作和 C 操作一共有 $K$ 次。\n\n求对于每个 Q 操作和 C 操作返回的结果。", "inputFormat": "第一行两个整数 $N,K$ 代表服务器个数和操作个数。\n\n接下来 $N+K-1$ 行每行代表一个操作。", "outputFormat": "$K$ 行：\n\n- 对于 Q 操作，输出 `yes` 或 `no` 代表是否拥有第 $d$ 块数据；\n- 对于 C 操作，输出一个整数代表服务器数量。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 4000$。\n- Subtask 2（5 pts）：第 $1$ 个服务器与第 $2,3,\\cdots,N$ 个服务器共享数据。\n- Subtask 3（10 pts）：如果 $|A-B|=1$，那么第 $A$ 个服务器和第 $B$ 个服务器共享数据。\n- Subtask 4（20 pts）：如果 $A<B$ 且 $2A=B$ 或 $2A+1=B$，那么第 $A$ 个服务器和第 $B$ 个服务器共享数据。\n- Subtask 5（25 pts）：每个服务器最多与 $5$ 个服务器共享数据。\n- Subtask 6（35 pts）：无特殊限制。\n\n对于 $100\\%$  的数据，$1 \\le N,K \\le 1.2 \\times 10^5$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day1 B Inside information](https://boi.cses.fi/files/boi2021_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2021] Inside information (Day1)", "background": "", "description": "有 $N$ 个服务器，第 $i$ 个服务器存储着第 $i$ 块数据，现在有若干种操作：\n\n- `S a b` 第 $a$ 个服务器与第 $b$ 个服务器共享数据，即这两个服务器同时拥有这两个服务器本身拥有的数据块的和，并自动去重（可以理解为数据块之并）。\n- `Q a d` 查询第 $a$ 个服务器是否拥有第 $d$ 块数据。\n- `C a` 查询存储数据块 $a$ 的服务器数量。\n\nS 操作有 $N-1$ 次，如果把共享看做连边，那么最后将形成以 $N$ 个服务器为点的一棵树；Q 操作和 C 操作一共有 $K$ 次。\n\n求对于每个 Q 操作和 C 操作返回的结果。", "inputFormat": "第一行两个整数 $N,K$ 代表服务器个数和操作个数。\n\n接下来 $N+K-1$ 行每行代表一个操作。", "outputFormat": "$K$ 行：\n\n- 对于 Q 操作，输出 `yes` 或 `no` 代表是否拥有第 $d$ 块数据；\n- 对于 C 操作，输出一个整数代表服务器数量。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 4000$。\n- Subtask 2（5 pts）：第 $1$ 个服务器与第 $2,3,\\cdots,N$ 个服务器共享数据。\n- Subtask 3（10 pts）：如果 $|A-B|=1$，那么第 $A$ 个服务器和第 $B$ 个服务器共享数据。\n- Subtask 4（20 pts）：如果 $A<B$ 且 $2A=B$ 或 $2A+1=B$，那么第 $A$ 个服务器和第 $B$ 个服务器共享数据。\n- Subtask 5（25 pts）：每个服务器最多与 $5$ 个服务器共享数据。\n- Subtask 6（35 pts）：无特殊限制。\n\n对于 $100\\%$  的数据，$1 \\le N,K \\le 1.2 \\times 10^5$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day1 B Inside information](https://boi.cses.fi/files/boi2021_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8124", "type": "P", "difficulty": 7, "samples": [["6 6\n1 2\n2 3\n3 4\n4 5\n5 2\n5 6\n1\n4 3 2 5 4", "4"], ["6 6\n1 2\n2 3\n3 4\n4 5\n5 2\n5 6\n1\n4 4 5 2 3", "5"], ["11 13\n1 2\n2 3\n3 4\n4 2\n3 5\n5 6\n6 7\n7 5\n6 8\n8 9\n9 10\n10 8\n9 11\n3\n3 4 2 3\n3 7 6 5\n3 10 8 9", "impossible"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "BalticOI（波罗的海）"], "title": "[BalticOI 2021] From Hacks to Snitches (Day1)", "background": "", "description": "给定一个 $N$ 个点 $M$ 条边的无向图，有 $K$ 个守卫第 $i$ 个守卫会经过 $\\ell_i$ 个节点，这 $\\ell_i$ 个节点分别为 $v_1,v_2,\\cdots,v_{\\ell_i}$，运行机制为守卫刚开始位于第 $v_1$ 个节点，设其为第 $0$ 分钟，$1$ 分钟时从第 $v_1$ 个节点走到第 $v_2$ 个节点，$2$ 分钟时从第 $v_2$ 个节点走到第 $v_3$ 个节点，……，$\\ell_i-1$ 分钟时从第 $v_{\\ell_i-1}$ 个节点走到第 $v_{\\ell_i}$ 个节点，$\\ell_i$ 分钟时从第 $v_{\\ell_i}$ 个节点走到第 $v_1$ 个节点，以此类推，无限循环。\n\n您是一个小偷，您要从第 $1$ 个节点到达第 $N$ 个节点，即 $0$ 分钟时您位于 $1$ 号节点，您可以一个节点直接到另一个节点，但是要经过这两个节点之间的路径，您要保证这条路径上没有一个节点上有守卫，且守卫也不经过这些组成路径的边。您经过每一条边的时间都是一分钟。保证任意两个守卫的路径不相交，并且起点和终点均不在任意守卫的路径上。\n\n您想知道不被守卫发现的情况下需要最短多少分钟或者提出无解。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。\n\n接下来 $M$ 行每行两个整数 $u,v$ 代表一条边。\n\n第 $M+2$ 行一个整数 $K$ 代表守卫个数。\n\n接下来 $K$ 行首先一个整数 $\\ell_i$ 代表守卫的路径长度，接下来 $\\ell_i$ 个整数 $v_1,v_2,\\cdots,v_{\\ell_i}$ 描述路径。", "outputFormat": "一行一个整数代表最少需要多少分钟或者无解时输出 `impossible`。", "hint": "#### 样例 1 解释\n\n第 $1$ 个守卫的路径如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0p8adii9.png)\n\n一种可行方式是：\n\n- $0$ 分钟时，开始在节点 $1$；\n- $1$ 分钟时，在节点 $1$ 等待；\n- $2$ 分钟时，移动到节点 $2$；\n- $3$ 分钟时，移动到节点 $5$；\n- $4$ 分钟时，移动到节点 $6$。\n\n#### 样例 2 解释\n\n图和路径与样例 1 一样，只是起点和终点不同。\n\n一种可行方式是，没有等待，直接按照 $1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6$ 走。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N,M \\le 10^5$，$K=1$，$ ℓ_1 \\le 125$。\n- Subtask 2（10 pts）：$N,M \\le 10^5$，$\\sum  ℓ_i \\le 125$，满足性质 A。\n- Subtask 3（10 pts）：$ ℓ_i \\le 200$，$\\sum  ℓ_i \\le 350$，满足性质 A。\n- Subtask 4（10 pts）：满足性质 A。\n- Subtask 5（25 pts）：$\\sum  ℓ_i \\le 125$。\n- Subtask 6（20 pts）：$ ℓ_i \\le 200$，$\\sum  ℓ_i \\le 350$。\n- Subtask 7（20 pts）：无特殊限制。\n- Subtask Ex（0 pts）：Extra Subtask。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 2.5 \\times 10^5$，$1 \\le M \\le 3 \\times 10^6$，$3 \\le  ℓ_i \\le 1500$，$\\sum  ℓ_i \\le 2750$。\n\n性质 A 为没有一条边连接任意两个守卫的路径。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day1 C From Hacks to Snitches](https://boi.cses.fi/files/boi2021_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2021] From Hacks to Snitches (Day1)", "background": "", "description": "给定一个 $N$ 个点 $M$ 条边的无向图，有 $K$ 个守卫第 $i$ 个守卫会经过 $\\ell_i$ 个节点，这 $\\ell_i$ 个节点分别为 $v_1,v_2,\\cdots,v_{\\ell_i}$，运行机制为守卫刚开始位于第 $v_1$ 个节点，设其为第 $0$ 分钟，$1$ 分钟时从第 $v_1$ 个节点走到第 $v_2$ 个节点，$2$ 分钟时从第 $v_2$ 个节点走到第 $v_3$ 个节点，……，$\\ell_i-1$ 分钟时从第 $v_{\\ell_i-1}$ 个节点走到第 $v_{\\ell_i}$ 个节点，$\\ell_i$ 分钟时从第 $v_{\\ell_i}$ 个节点走到第 $v_1$ 个节点，以此类推，无限循环。\n\n您是一个小偷，您要从第 $1$ 个节点到达第 $N$ 个节点，即 $0$ 分钟时您位于 $1$ 号节点，您可以一个节点直接到另一个节点，但是要经过这两个节点之间的路径，您要保证这条路径上没有一个节点上有守卫，且守卫也不经过这些组成路径的边。您经过每一条边的时间都是一分钟。保证任意两个守卫的路径不相交，并且起点和终点均不在任意守卫的路径上。\n\n您想知道不被守卫发现的情况下需要最短多少分钟或者提出无解。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。\n\n接下来 $M$ 行每行两个整数 $u,v$ 代表一条边。\n\n第 $M+2$ 行一个整数 $K$ 代表守卫个数。\n\n接下来 $K$ 行首先一个整数 $\\ell_i$ 代表守卫的路径长度，接下来 $\\ell_i$ 个整数 $v_1,v_2,\\cdots,v_{\\ell_i}$ 描述路径。", "outputFormat": "一行一个整数代表最少需要多少分钟或者无解时输出 `impossible`。", "hint": "#### 样例 1 解释\n\n第 $1$ 个守卫的路径如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0p8adii9.png)\n\n一种可行方式是：\n\n- $0$ 分钟时，开始在节点 $1$；\n- $1$ 分钟时，在节点 $1$ 等待；\n- $2$ 分钟时，移动到节点 $2$；\n- $3$ 分钟时，移动到节点 $5$；\n- $4$ 分钟时，移动到节点 $6$。\n\n#### 样例 2 解释\n\n图和路径与样例 1 一样，只是起点和终点不同。\n\n一种可行方式是，没有等待，直接按照 $1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6$ 走。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N,M \\le 10^5$，$K=1$，$ ℓ_1 \\le 125$。\n- Subtask 2（10 pts）：$N,M \\le 10^5$，$\\sum  ℓ_i \\le 125$，满足性质 A。\n- Subtask 3（10 pts）：$ ℓ_i \\le 200$，$\\sum  ℓ_i \\le 350$，满足性质 A。\n- Subtask 4（10 pts）：满足性质 A。\n- Subtask 5（25 pts）：$\\sum  ℓ_i \\le 125$。\n- Subtask 6（20 pts）：$ ℓ_i \\le 200$，$\\sum  ℓ_i \\le 350$。\n- Subtask 7（20 pts）：无特殊限制。\n- Subtask Ex（0 pts）：Extra Subtask。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 2.5 \\times 10^5$，$1 \\le M \\le 3 \\times 10^6$，$3 \\le  ℓ_i \\le 1500$，$\\sum  ℓ_i \\le 2750$。\n\n性质 A 为没有一条边连接任意两个守卫的路径。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day1 C From Hacks to Snitches](https://boi.cses.fi/files/boi2021_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8125", "type": "P", "difficulty": 6, "samples": [["5 1 42\n13 37 47 11 42", "4"], ["5 2 5\n1 9 4 6 7", "2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "BalticOI（波罗的海）"], "title": "[BalticOI 2021] The short shank (Day2)", "background": null, "description": "你入狱了，你现在正在洛谷第一监狱里。\n\n监狱共有 $N$ 个牢房，从左到右编号为 $1 \\sim N$。你和你的狱友们准备策划一场造反，第 $i$ 个牢房里的罪犯准备在第 $t_i$ 个时刻点造反，如果第 $i$ 个牢房的罪犯造反后，第 $i+1$ 个牢房的罪犯会无视他在第 $t_{i+1}$ 个时间点造反的规矩，在第 $t'_i+1$ 个时间点就会造反，其中 $t'_i$ 是第 $i$ 个牢房的罪犯实际造反的时刻。\n\n狱警提前预知了一切，所以他们会放置 $D$ 个床垫，如果在第 $i$ 个牢房和第 $i+1$ 个牢房中间放置一个床垫，那么当第 $i$ 个牢房的罪犯造反时，第 $i+1$ 个牢房的罪犯不会立即造反，而会等到第 $t_{i+1}$ 个时间点。\n\n你想知道，狱警合理安排床垫后，在第 $T$ 个时间点及以前最少会有多少个罪犯造反。", "inputFormat": "第一行三个整数 $N,D,T$ 代表罪犯个数，床垫个数和希望的时间点。\n\n第二行 $N$ 个整数 $t_i$ 代表第 $i$ 个罪犯造反的时间点。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n最优解是在第 $2$ 个牢房和第 $3$ 个牢房之间放入床垫，造反的是第 $1,2,4,5$ 个牢房里的罪犯。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（15 pts）：$N \\le 500$。\n- Subtask 2（10 pts）：$N \\le 5 \\times 10^5$，$D=1$。\n- Subtask 3（20 pts）：$N \\le 4000$。\n- Subtask 4（10 pts）：$N \\le 7.5 \\times 10^4$，$D \\le 15$。\n- Subtask 5（25 pts）：$N \\le 7.5 \\times 10^4$。\n- Subtask 6（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le D<N \\le 2 \\times 10^6$，$1 \\le T,t_i \\le 10^9$。\n\n另有 Subtask 0 为样例。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day2 A The short shank](https://boi.cses.fi/files/boi2021_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2021] The short shank (Day2)", "background": null, "description": "你入狱了，你现在正在洛谷第一监狱里。\n\n监狱共有 $N$ 个牢房，从左到右编号为 $1 \\sim N$。你和你的狱友们准备策划一场造反，第 $i$ 个牢房里的罪犯准备在第 $t_i$ 个时刻点造反，如果第 $i$ 个牢房的罪犯造反后，第 $i+1$ 个牢房的罪犯会无视他在第 $t_{i+1}$ 个时间点造反的规矩，在第 $t'_i+1$ 个时间点就会造反，其中 $t'_i$ 是第 $i$ 个牢房的罪犯实际造反的时刻。\n\n狱警提前预知了一切，所以他们会放置 $D$ 个床垫，如果在第 $i$ 个牢房和第 $i+1$ 个牢房中间放置一个床垫，那么当第 $i$ 个牢房的罪犯造反时，第 $i+1$ 个牢房的罪犯不会立即造反，而会等到第 $t_{i+1}$ 个时间点。\n\n你想知道，狱警合理安排床垫后，在第 $T$ 个时间点及以前最少会有多少个罪犯造反。", "inputFormat": "第一行三个整数 $N,D,T$ 代表罪犯个数，床垫个数和希望的时间点。\n\n第二行 $N$ 个整数 $t_i$ 代表第 $i$ 个罪犯造反的时间点。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n最优解是在第 $2$ 个牢房和第 $3$ 个牢房之间放入床垫，造反的是第 $1,2,4,5$ 个牢房里的罪犯。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（15 pts）：$N \\le 500$。\n- Subtask 2（10 pts）：$N \\le 5 \\times 10^5$，$D=1$。\n- Subtask 3（20 pts）：$N \\le 4000$。\n- Subtask 4（10 pts）：$N \\le 7.5 \\times 10^4$，$D \\le 15$。\n- Subtask 5（25 pts）：$N \\le 7.5 \\times 10^4$。\n- Subtask 6（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le D<N \\le 2 \\times 10^6$，$1 \\le T,t_i \\le 10^9$。\n\n另有 Subtask 0 为样例。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day2 A The short shank](https://boi.cses.fi/files/boi2021_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8126", "type": "P", "difficulty": 6, "samples": [["4 50", ""]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "交互题", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2021] The Collection Game (Day2)", "background": "**本题是交互题。**\n\n你的代码不需要也不应该包含 `swaps.h` 头文件，但应包含以下声明：\n\n```cpp\nextern \"C\" void schedule(int i, int j);\nextern \"C\" std::vector<int> visit();\nextern \"C\" void answer(std::vector<int> r);\nextern \"C\" void solve(int N, int Q) {\n  // Code Here\n}\n```", "description": "您要参观博物馆的 $N$ 个展馆，因为您之前有入狱史（BalticOI 2021 Day2 A），所以博物馆官方仅允许您参观小于等于 $V$ 次。每一次参观您可以浏览多次，每一次浏览您可以浏览 **一对** 展馆 $(i,j)$，然后您就可以得知这两个展馆哪个展馆的艺术价值最高。为了不浪费您的时间，每一次参观每个展馆只能浏览最多一次。\n\n不幸的是，因为您的入狱史，博物馆 **可能** 会交换您要浏览的一对展馆里的展品，这样您得到的艺术价值关系就是反过来的，您最后对这 $N$ 个展馆中的其中一个的排名也应基于 **最后一次** 对这个展馆的浏览。\n\n现在请通过浏览来确定这 $N$ 个展馆的艺术价值的排列。\n\n### 交互格式\n\n您需要实现函数 `void solve (int N, int V)`，其中 $N $ 和 $V$ 为展馆数量和最多参观次数。\n\n`solve` 函数只被调用一次，并且可以在 `solve` 函数里面调用：\n\n- `void schedule (int i, int j)` 浏览一对展馆 $(i,j)$，博物馆有可能交换展品。\n- `vector <int> visit ()` 整理浏览结果，返回的序列按照浏览的展馆对数 $(i,j)$ 顺序返回若干个 $k$，如果第 $i$ 个展馆的艺术价值高于第 $j$ 个展馆，$k=1$，否则 $k=0$。\n- `void answer (vector <int> r)` $r$ 是一个长度为 $N$ 的序列，并且是一个 $1 \\sim N$ 的排列，$r_i=p$ 代表第 $i$ 个展馆在这 $N$ 个展馆的艺术价值排序中排第 $p$ 个。\n\n如果您函数的调用不满足要求，一次参观一个展馆浏览了超过 $1$ 次，或者参观了超过 $V$ 次，您的程序都会立即停止然后判为 `Not correct`。请不要在标准输出中输出任何东西，否则会被判为 `Security violation!`。\n\n如果您使用 C++ 编码，请调用 swaps.h 头文件，如果您想检验您的程序的正确性，可以在下方附件中下载 sample_grader.cpp 与 swaps_sample.cpp，分别为您提供检验正确性和示例说明的作用。\n\n如果您使用 Python 编码，可以在下方附件中下载 swaps_sample.py 检验。\n\n交互库希望标准输入里有一行：\n\n- 一行两个整数 $N,V$。\n\n随后，交互库会调用您的程序，最后，交互库会在标准输出中返回信息：\n\n|信息|意义|\n|:-:|:-:|\n|**Invalid input.**|标准输入的格式错误|\n|**Invalid schedule.**|`schedule` 函数调用无效|\n|**Out of visits.**|`visit` 函数调用超过 $V$ 次|\n|**Invalid answer.**|`answer` 函数调用无效|\n|**Wrong answer.**|`answer` 函数调用的 $r$ 错误|\n|**No answer.**|`solve` 函数没有调用 `answer` 函数|\n|**Correct: v visit(s) used.**|上述事件都没有发生，调用了 $V$ 次 `visit` 函数|\n\n针对上面若干个错误的情况，交互库仅会返回 **Not correct**，或者正确的时候返回 **Correct**。每当出现上面的若干个错误，或者您的程序调用了 `answer` 函数时，程序会被自动停止。", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "#### 样例 1 解释\n\n$N=4$，$V=50$，下面是一种合法的调用：\n\n|你的程序|返回值|博物馆是否交换\n|:-:|:-:|:-:|\n|`schedule(1,2)`|-|否|\n|`schedule(3,4)`|-|是|\n|`visit()`|`{1,0}`|-|\n|`schedule(2,4)`|-|否|\n|`visit()`|`{1}`|-|\n|`answer({1,2,4,3})`|-|-|\n\n对于上表，$r=\\{2,1,4,3\\}$ 也满足要求。如果第三次 `visit` 交换了，那么 $r=\\{4,1,2,3\\}$ 满足要求。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$V=5000$，博物馆永远不会交换展品。\n- Subtask 2（10 pts）：$V \\ge 1000$，博物馆永远不会交换展品。\n- Subtask 3（5 pts）：$N \\le 100$，$V=5000$。\n- Subtask 4（15 pts）：$V=5000$。\n- Subtask 5（15 pts）：$V\\ge 500$。\n- Subtask 6（35 pts）：$V \\ge 100$。\n- Subtask 7（15 pts）：$V \\ge 50$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 500$，$50 \\le V \\le 5000$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day2 B The Collection Game](https://boi.cses.fi/files/boi2021_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2021] The Collection Game (Day2)", "background": "**本题是交互题。**\n\n你的代码不需要也不应该包含 `swaps.h` 头文件，但应包含以下声明：\n\n```cpp\nextern \"C\" void schedule(int i, int j);\nextern \"C\" std::vector<int> visit();\nextern \"C\" void answer(std::vector<int> r);\nextern \"C\" void solve(int N, int Q) {\n  // Code Here\n}\n```", "description": "您要参观博物馆的 $N$ 个展馆，因为您之前有入狱史（BalticOI 2021 Day2 A），所以博物馆官方仅允许您参观小于等于 $V$ 次。每一次参观您可以浏览多次，每一次浏览您可以浏览 **一对** 展馆 $(i,j)$，然后您就可以得知这两个展馆哪个展馆的艺术价值最高。为了不浪费您的时间，每一次参观每个展馆只能浏览最多一次。\n\n不幸的是，因为您的入狱史，博物馆 **可能** 会交换您要浏览的一对展馆里的展品，这样您得到的艺术价值关系就是反过来的，您最后对这 $N$ 个展馆中的其中一个的排名也应基于 **最后一次** 对这个展馆的浏览。\n\n现在请通过浏览来确定这 $N$ 个展馆的艺术价值的排列。\n\n### 交互格式\n\n您需要实现函数 `void solve (int N, int V)`，其中 $N $ 和 $V$ 为展馆数量和最多参观次数。\n\n`solve` 函数只被调用一次，并且可以在 `solve` 函数里面调用：\n\n- `void schedule (int i, int j)` 浏览一对展馆 $(i,j)$，博物馆有可能交换展品。\n- `vector <int> visit ()` 整理浏览结果，返回的序列按照浏览的展馆对数 $(i,j)$ 顺序返回若干个 $k$，如果第 $i$ 个展馆的艺术价值高于第 $j$ 个展馆，$k=1$，否则 $k=0$。\n- `void answer (vector <int> r)` $r$ 是一个长度为 $N$ 的序列，并且是一个 $1 \\sim N$ 的排列，$r_i=p$ 代表第 $i$ 个展馆在这 $N$ 个展馆的艺术价值排序中排第 $p$ 个。\n\n如果您函数的调用不满足要求，一次参观一个展馆浏览了超过 $1$ 次，或者参观了超过 $V$ 次，您的程序都会立即停止然后判为 `Not correct`。请不要在标准输出中输出任何东西，否则会被判为 `Security violation!`。\n\n如果您使用 C++ 编码，请调用 swaps.h 头文件，如果您想检验您的程序的正确性，可以在下方附件中下载 sample_grader.cpp 与 swaps_sample.cpp，分别为您提供检验正确性和示例说明的作用。\n\n如果您使用 Python 编码，可以在下方附件中下载 swaps_sample.py 检验。\n\n交互库希望标准输入里有一行：\n\n- 一行两个整数 $N,V$。\n\n随后，交互库会调用您的程序，最后，交互库会在标准输出中返回信息：\n\n|信息|意义|\n|:-:|:-:|\n|**Invalid input.**|标准输入的格式错误|\n|**Invalid schedule.**|`schedule` 函数调用无效|\n|**Out of visits.**|`visit` 函数调用超过 $V$ 次|\n|**Invalid answer.**|`answer` 函数调用无效|\n|**Wrong answer.**|`answer` 函数调用的 $r$ 错误|\n|**No answer.**|`solve` 函数没有调用 `answer` 函数|\n|**Correct: v visit(s) used.**|上述事件都没有发生，调用了 $V$ 次 `visit` 函数|\n\n针对上面若干个错误的情况，交互库仅会返回 **Not correct**，或者正确的时候返回 **Correct**。每当出现上面的若干个错误，或者您的程序调用了 `answer` 函数时，程序会被自动停止。", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "#### 样例 1 解释\n\n$N=4$，$V=50$，下面是一种合法的调用：\n\n|你的程序|返回值|博物馆是否交换\n|:-:|:-:|:-:|\n|`schedule(1,2)`|-|否|\n|`schedule(3,4)`|-|是|\n|`visit()`|`{1,0}`|-|\n|`schedule(2,4)`|-|否|\n|`visit()`|`{1}`|-|\n|`answer({1,2,4,3})`|-|-|\n\n对于上表，$r=\\{2,1,4,3\\}$ 也满足要求。如果第三次 `visit` 交换了，那么 $r=\\{4,1,2,3\\}$ 满足要求。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$V=5000$，博物馆永远不会交换展品。\n- Subtask 2（10 pts）：$V \\ge 1000$，博物馆永远不会交换展品。\n- Subtask 3（5 pts）：$N \\le 100$，$V=5000$。\n- Subtask 4（15 pts）：$V=5000$。\n- Subtask 5（15 pts）：$V\\ge 500$。\n- Subtask 6（35 pts）：$V \\ge 100$。\n- Subtask 7（15 pts）：$V \\ge 50$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 500$，$50 \\le V \\le 5000$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day2 B The Collection Game](https://boi.cses.fi/files/boi2021_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8127", "type": "P", "difficulty": 5, "samples": [["5\n1 2\n1 3\n2 4\n2 5\n0 1 0 1 1", "4"], ["5\n1 2\n2 3\n3 4\n4 5\n0 1 1 1 1", "impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "树形 DP", "BalticOI（波罗的海）"], "title": "[BalticOI 2021] The Xana coup (Day2)", "background": "", "description": "给定一棵点数为 $N$ 个树，第 $i$ 个点有点权 $a_i$，$a_i \\in \\{0,1\\}$。\n\n你可以进行切换操作：\n\n- 对点 $i$ 进行切换操作会使得点 $i$ 及与其 **直接相连** 的点的点权取反。\n\n其中直接相连指两点之间恰好只有一条边。\n\n求至少需要多少次切换操作才能使得所有点的点权变为 $0$。", "inputFormat": "第一行一个整数 $N$ 代表树的点数。\n\n接下来 $N-1$ 行每行两个整数代表树的一条边。\n\n第 $N+1$ 行 $N$ 个整数 $a_i$ 代表第 $i$ 个点的点权。", "outputFormat": "如果有解，一行一个整数代表答案。\n\n如果无解，输出 `impossible`。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qyej3711.png)\n\n$a_i=0$ 为黑色，$a_i=1$ 为白色。\n\n可以对点 $4,5,3,1$ 进行切换操作使得所有点的点权为 $0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 20$。\n- Subtask 2（15 pts）：$N \\le 40$。\n- Subtask 3（10 pts）：如果点 $u$ 和点 $v$ 满足 $|u-v|=1$，那么他们有边相连。\n- Subtask 4（40 pts）：一个点最多与 $3$ 个点相连。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3 \\le N \\le 10^5$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day2 C The Xana coup](https://boi.cses.fi/files/boi2021_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2021] The Xana coup (Day2)", "background": "", "description": "给定一棵点数为 $N$ 个树，第 $i$ 个点有点权 $a_i$，$a_i \\in \\{0,1\\}$。\n\n你可以进行切换操作：\n\n- 对点 $i$ 进行切换操作会使得点 $i$ 及与其 **直接相连** 的点的点权取反。\n\n其中直接相连指两点之间恰好只有一条边。\n\n求至少需要多少次切换操作才能使得所有点的点权变为 $0$。", "inputFormat": "第一行一个整数 $N$ 代表树的点数。\n\n接下来 $N-1$ 行每行两个整数代表树的一条边。\n\n第 $N+1$ 行 $N$ 个整数 $a_i$ 代表第 $i$ 个点的点权。", "outputFormat": "如果有解，一行一个整数代表答案。\n\n如果无解，输出 `impossible`。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qyej3711.png)\n\n$a_i=0$ 为黑色，$a_i=1$ 为白色。\n\n可以对点 $4,5,3,1$ 进行切换操作使得所有点的点权为 $0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 20$。\n- Subtask 2（15 pts）：$N \\le 40$。\n- Subtask 3（10 pts）：如果点 $u$ 和点 $v$ 满足 $|u-v|=1$，那么他们有边相连。\n- Subtask 4（40 pts）：一个点最多与 $3$ 个点相连。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3 \\le N \\le 10^5$。\n\n#### 说明\n\n翻译自 [BalticOI 2021 Day2 C The Xana coup](https://boi.cses.fi/files/boi2021_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P8128", "type": "P", "difficulty": 0, "samples": [["7 3", "2 4 2 3"], ["8 3\n", "1 1 1 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Cardiology", "background": "ICPC2020 WF A", "description": "The Great Cardoni, Master Prestidigitator, has a deck of 21 numbered cards which he uses in a\ntrick as follows:\n\n> A spectator secretly selects a number between $1$ and $21$, inclusive, after which\n> Cardoni deals the $21$ cards, face-up, row by row in order from $1$ to $21$,\n> into a\n> $3$-column grid. The spectator then indicates which of the three\n> columns contains the selected card, at which point the magician picks up\n> the cards by columns, picking up the specified column second (the\n> order of collecting the other two columns is unimportant).\n> Cards are collected face up, beginning with the top card in each column and\n> placing each succeeding card immediately beneath the previously collected card.\n> The cards are then redealt by rows into a $3$-column grid, starting from the\n> top of the face-up deck. The process is\n> repeated two more times; each time, the column indicated by the spectator\n> is the second column picked up by the magician. After three such\n> iterations, Cardoni announces, \"I have penetrated to the heart of your\n> mind; your card lies at the heart of this display.\" And it's true---the\n> selected card is located at the \"heart\" of the array (row four, column\n> two). Moreover, the selected card will always remain in this stable\n> location for any further iterations of the column indication and card\n> redealing process.\n\nThe process always works, no matter the number selected, provided that\nthe column containing the secret number is the second column to be\npicked up and redealt.\n\nCardoni would like to expand his trick to use different numbers of\ncards, rows, and columns, and to experiment with different orderings\nof picking up the columns after the spectator indicates a\ncolumn. However, it is not a trivial problem. For instance, when using $24$\ncards in $8$ rows and $3$ columns, and always picking up the indicated\ncolumn as the second one to redeal, the number $5$ eventually\nends up in stable location row $4$, column $3$, while the number $20$\nends up in stable location row $5$, column $1$. Also, neither location\nis one of the two \"heart\" positions in column $2$ of rows $4$ or\n$5$.  Moreover, Cardoni is uncertain of how many iterations of the\n\"indicate column and redeal\" process are needed before a\nselected card reaches a stable location.\n\nGiven the number of rows and columns of cards, help Cardoni set up his\ntrick in such a way that there is a unique stable location that is as\nclose to the center as possible.", "inputFormat": "The input consists of a single line with two integers $r$ and $c$ ($2 \\le r, c \\le 10^6$), the number of rows and columns used in the trick.\nThe cards are numbered from $1$ to $r \\cdot c$ and are initially dealt row by row in increasing order.", "outputFormat": "Output a line containing four integers $p$, $i$, $j$, and $s$, where:\n\n- the column indicated by the spectator should be picked up as the $p^{\\text{th}}$ column,\n- using this value of $p$ causes all cards to eventually end up in the stable location at row $i$ column $j$, and\n- $s$ is the maximum number of iterations required for any card to reach the stable location.\n\nThe value of $p$ should be chosen so that the stable location $(i, j)$\nis as close as possible to any of the one, two or four central\npositions in the grid, where the distance between locations $(i, j)$\nand $(i', j')$ is $|i-i'| + |j-j'|$.  If more than one value of $p$\nresults in the same minimum distance, choose the smallest such $p$.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Cardiology", "background": "ICPC2020 WF A", "description": "The Great Cardoni, Master Prestidigitator, has a deck of 21 numbered cards which he uses in a\ntrick as follows:\n\n> A spectator secretly selects a number between $1$ and $21$, inclusive, after which\n> Cardoni deals the $21$ cards, face-up, row by row in order from $1$ to $21$,\n> into a\n> $3$-column grid. The spectator then indicates which of the three\n> columns contains the selected card, at which point the magician picks up\n> the cards by columns, picking up the specified column second (the\n> order of collecting the other two columns is unimportant).\n> Cards are collected face up, beginning with the top card in each column and\n> placing each succeeding card immediately beneath the previously collected card.\n> The cards are then redealt by rows into a $3$-column grid, starting from the\n> top of the face-up deck. The process is\n> repeated two more times; each time, the column indicated by the spectator\n> is the second column picked up by the magician. After three such\n> iterations, Cardoni announces, \"I have penetrated to the heart of your\n> mind; your card lies at the heart of this display.\" And it's true---the\n> selected card is located at the \"heart\" of the array (row four, column\n> two). Moreover, the selected card will always remain in this stable\n> location for any further iterations of the column indication and card\n> redealing process.\n\nThe process always works, no matter the number selected, provided that\nthe column containing the secret number is the second column to be\npicked up and redealt.\n\nCardoni would like to expand his trick to use different numbers of\ncards, rows, and columns, and to experiment with different orderings\nof picking up the columns after the spectator indicates a\ncolumn. However, it is not a trivial problem. For instance, when using $24$\ncards in $8$ rows and $3$ columns, and always picking up the indicated\ncolumn as the second one to redeal, the number $5$ eventually\nends up in stable location row $4$, column $3$, while the number $20$\nends up in stable location row $5$, column $1$. Also, neither location\nis one of the two \"heart\" positions in column $2$ of rows $4$ or\n$5$.  Moreover, Cardoni is uncertain of how many iterations of the\n\"indicate column and redeal\" process are needed before a\nselected card reaches a stable location.\n\nGiven the number of rows and columns of cards, help Cardoni set up his\ntrick in such a way that there is a unique stable location that is as\nclose to the center as possible.", "inputFormat": "The input consists of a single line with two integers $r$ and $c$ ($2 \\le r, c \\le 10^6$), the number of rows and columns used in the trick.\nThe cards are numbered from $1$ to $r \\cdot c$ and are initially dealt row by row in increasing order.", "outputFormat": "Output a line containing four integers $p$, $i$, $j$, and $s$, where:\n\n- the column indicated by the spectator should be picked up as the $p^{\\text{th}}$ column,\n- using this value of $p$ causes all cards to eventually end up in the stable location at row $i$ column $j$, and\n- $s$ is the maximum number of iterations required for any card to reach the stable location.\n\nThe value of $p$ should be chosen so that the stable location $(i, j)$\nis as close as possible to any of the one, two or four central\npositions in the grid, where the distance between locations $(i, j)$\nand $(i', j')$ is $|i-i'| + |j-j'|$.  If more than one value of $p$\nresults in the same minimum distance, choose the smallest such $p$.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Cardiology", "background": "", "description": "伟大的魔术师 Cardoni 拥有一副编号为 1 到 21 的牌，他用这副牌进行一个魔术表演。观众秘密选择一个 1 到 21 之间的数字，然后 Cardoni 将 21 张牌面朝上按顺序从 1 到 21 逐行发到一个 3 列的网格中。观众随后指出三列中的哪一列包含所选的牌，此时魔术师按列收起牌，第二个收起观众指定的列（收集其他两列的顺序不重要）。牌是面朝上收集的，从每列的顶部牌开始，每张后续的牌立即放在前一张牌的下面。然后从面朝上的牌堆顶部开始逐行重新发牌到一个 3 列的网格中。这个过程重复两次；每次观众指定的列都是魔术师第二个收起的列。经过三次这样的迭代后，Cardoni 宣布：“我已经洞察了你的心灵；你的牌就在这个展示的中心。”这是真的——所选的牌位于数组的“中心”（第 4 行，第 2 列）。而且，对于任何进一步的列指示和重新发牌过程，所选的牌将始终保持在这个稳定的位置。这个过程总是有效的，无论选择的数字是多少，只要包含秘密数字的列是第二个被收起和重新发牌的列。Cardoni 希望扩展他的魔术，使用不同数量的牌、行和列，并尝试在观众指示列后以不同的顺序收起列。然而，这不是一个简单的问题。例如，当使用 24 张牌在 8 行 3 列中，并且始终将指示的列作为第二个重新发牌的列时，数字 5 最终会在稳定位置第 4 行第 3 列，而数字 20 最终会在稳定位置第 5 行第 1 列。此外，这两个位置都不是第 4 行或第 5 行第 2 列的两个“中心”位置之一。此外，Cardoni 不确定在选定的牌到达稳定位置之前需要多少次“指示列和重新发牌”过程的迭代。给定卡牌的行数和列数，帮助 Cardoni 设置他的魔术，使得有一个唯一的稳定位置尽可能靠近中心。", "inputFormat": "输入由一行包含两个整数 $r$ 和 $c$（$2 \\le r, c \\le 10^6$）组成，表示魔术中使用的行数和列数。牌从 1 到 $r \\cdot c$ 编号，最初按行按升序发牌。", "outputFormat": "输出一行包含四个整数 $p$、$i$、$j$ 和 $s$，其中：\n\n- 观众指示的列应作为第 $p$ 列收起，\n- 使用这个 $p$ 值会导致所有牌最终到达第 $i$ 行第 $j$ 列的稳定位置，\n- $s$ 是任何牌到达稳定位置所需的最大迭代次数。\n\n$p$ 的值应选择使得稳定位置 $(i, j)$ 尽可能接近网格中的一个、两个或四个中心位置，其中位置 $(i, j)$ 和 $(i', j')$ 之间的距离为 $|i-i'| + |j-j'|$。如果多个 $p$ 值导致相同的最小距离，则选择最小的 $p$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8129", "type": "P", "difficulty": 5, "samples": [["5 2\n1 2 10\n1 3 5\n1 4 7\n2 5 9", "7"], ["5 100\n1 2 10\n1 3 5\n1 4 7\n2 5 9", "9"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] The Cost of Speed Limits", "background": "ICPC2020 WF B", "description": "By the year 3031, the ICPC has become so popular that a whole new town has to be built to house all the\nWorld Finals teams.\nThe town is beautifully designed, complete with a road network.\nUnfortunately, when preparing the budget, the town planners forgot to take into account the cost of speed-limit signs.\nThey have asked you to help them determine the minimum additional funds they will need.\n\nThe ICPC road network consists of roads, each connecting two intersections. Each road is two-way\nand has already been assigned a speed limit, valid for both directions.\nTo save money, the minimum possible number of roads was used. In other words, there is exactly\none route from any intersection to any other intersection.\n\nThe speed-limit signs need to be installed\nin all places where the speed limit may change for any driver that follows any route.\nMore precisely, if there exists an intersection where at least two roads meet with different speed limits,\nthen *all* of the roads going from that intersection need a speed-limit sign installed at that intersection. \nNote that some roads might need two speed-limit signs, one at each end.\n\nIt costs $c$ dollars to install one speed-limit sign. It is also possible to improve the safety and quality of\nany road so that its speed limit can be increased, which may in turn reduce the number of speed-limit signs required.\nIt costs $x$ dollars to increase the speed limit of one road by $x$ km/h (in both directions).\nTo avoid complaints, the town council does not allow decreasing any of the already-assigned speed limits.\n\nFigure B.1 illustrates the situation given in both Sample Input 1 and Sample Input 2.\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4kx82pq4.png)", "inputFormat": "The first line of input contains two integers $n$ and $c$, where $n$ ($1 \\le n \\le 20\\,000$) is the number of intersections\nand $c$ ($1 \\le c \\le 10^5$) is the cost of installing one sign.\nEach of the remaining $n-1$ lines contains three integers $u$, $v$, and $s$, where $u$ and $v$ ($1 \\le u, v \\le n; u \\ne v$)\nare the intersections at the ends of a road, and $s$ ($1 \\le s \\le 10^5$) is the current speed limit of that\nroad in kilometers per hour.", "outputFormat": "Output the minimum cost to upgrade roads and install speed-limit signs such that the town\nplan satisfies all the rules above.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] The Cost of Speed Limits", "background": "ICPC2020 WF B", "description": "By the year 3031, the ICPC has become so popular that a whole new town has to be built to house all the\nWorld Finals teams.\nThe town is beautifully designed, complete with a road network.\nUnfortunately, when preparing the budget, the town planners forgot to take into account the cost of speed-limit signs.\nThey have asked you to help them determine the minimum additional funds they will need.\n\nThe ICPC road network consists of roads, each connecting two intersections. Each road is two-way\nand has already been assigned a speed limit, valid for both directions.\nTo save money, the minimum possible number of roads was used. In other words, there is exactly\none route from any intersection to any other intersection.\n\nThe speed-limit signs need to be installed\nin all places where the speed limit may change for any driver that follows any route.\nMore precisely, if there exists an intersection where at least two roads meet with different speed limits,\nthen *all* of the roads going from that intersection need a speed-limit sign installed at that intersection. \nNote that some roads might need two speed-limit signs, one at each end.\n\nIt costs $c$ dollars to install one speed-limit sign. It is also possible to improve the safety and quality of\nany road so that its speed limit can be increased, which may in turn reduce the number of speed-limit signs required.\nIt costs $x$ dollars to increase the speed limit of one road by $x$ km/h (in both directions).\nTo avoid complaints, the town council does not allow decreasing any of the already-assigned speed limits.\n\nFigure B.1 illustrates the situation given in both Sample Input 1 and Sample Input 2.\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4kx82pq4.png)", "inputFormat": "The first line of input contains two integers $n$ and $c$, where $n$ ($1 \\le n \\le 20\\,000$) is the number of intersections\nand $c$ ($1 \\le c \\le 10^5$) is the cost of installing one sign.\nEach of the remaining $n-1$ lines contains three integers $u$, $v$, and $s$, where $u$ and $v$ ($1 \\le u, v \\le n; u \\ne v$)\nare the intersections at the ends of a road, and $s$ ($1 \\le s \\le 10^5$) is the current speed limit of that\nroad in kilometers per hour.", "outputFormat": "Output the minimum cost to upgrade roads and install speed-limit signs such that the town\nplan satisfies all the rules above.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] The Cost of Speed Limits", "background": "", "description": "到了 3031 年，ICPC 变得如此受欢迎，以至于需要建造一个全新的小镇来容纳所有的世界总决赛队伍。小镇设计得非常漂亮，配备了道路网络。不幸的是，在准备预算时，城镇规划者忘记考虑限速标志的成本。他们请你帮助他们确定所需的最小额外资金。\n\nICPC 的道路网络由连接两个交叉路口的道路组成。每条道路都是双向的，并且已经分配了一个速度限制，该限制对两个方向都有效。为了节省资金，使用了最少可能数量的道路。换句话说，从任何一个交叉路口到另一个交叉路口只有一条路线。\n\n限速标志需要安装在任何驾驶员沿任何路线行驶时限速可能发生变化的所有地方。更准确地说，如果存在一个交叉路口，至少有两条道路的限速不同，那么从该交叉路口出发的所有道路都需要在该交叉路口安装限速标志。注意，有些道路可能需要在两端各安装一个限速标志。\n\n安装一个限速标志的成本是 $c$ 美元。也可以提高任何道路的安全性和质量，以便可以提高其限速，这可能会减少所需的限速标志数量。将一条道路的限速提高 $x$ 公里/小时（在两个方向上）需要花费 $x$ 美元。为了避免投诉，市议会不允许降低任何已经分配的限速。\n\n图 B.1 展示了样例输入 1 和样例输入 2 中给出的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4kx82pq4.png)", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $c$，其中 $n$ ($1 \\le n \\le 20,000$) 是交叉路口的数量，$c$ ($1 \\le c \\le 10^5$) 是安装一个标志的成本。接下来的 $n-1$ 行中的每一行包含三个整数 $u$，$v$ 和 $s$，其中 $u$ 和 $v$ ($1 \\le u, v \\le n; u \ne v$) 是道路两端的交叉路口，$s$ ($1 \\le s \\le 10^5$) 是该道路当前的限速（以公里/小时为单位）。", "outputFormat": "输出升级道路和安装限速标志的最低成本，以使城镇计划满足上述所有规则。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8130", "type": "P", "difficulty": 6, "samples": [["100 100 5\n30 70\n50 60\n50 40\n30 30\n20 50\n4 3 5 2 1", "450.000000"], ["100 100 5\n30 70\n50 60\n50 40\n30 30\n20 50\n1 2 5 4 3", "0.000000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Domes", "background": "ICPC2020 WF C", "description": "Saint Basil's Cathedral is the best-known landmark of Moscow and maybe even of all of Russia. Built under Ivan the Terrible in the $16$$^{\\text {th }}$ century, the cathedral is known for its colorful domes. No visit to the city is complete without taking a photo of the former church in Red Square.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0s8tbi50.png)\n\nThe Moscow Tourism Board (MTB) wants to make it as safe as possible for tourists to take the perfect shot of the cathedral. Depending on where you stand when you take a picture, the relative positions of the domes will be different (see Figure C.1). The MTB is concerned that for some desired configurations of domes the region in Red Square where such a photo is possible will be so small as to lead to a dangerous overcrowding of photographers. Wanting to avoid the inevitable pushing, shoving, injury, and Covid that this could cause, the MTB would like to find the area of the region where a photo is possible for any desired ordering of the domes.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a5pgv6kt.png)\n\nFor simplicity, assume that cameras have a $180$-degree viewing angle. As an illustration consider Figure C.2, which shows the location of the domes (labeled $1$$\\sim$$5$) and the photographer (green dot) in the plane. If the photographer shoots a picture aiming the camera straight towards the left (directly at dome $5$), then everything in the shaded area will be visible in the photograph. Note that in this photograph, the domes will appear in order $4, 3, 5, 2, 1$ from the left to the right.\n\nGiven the location of the domes within Red Square and a desired left-to-right order of the domes in the photograph, MTB wants to know the area of the region within Red Square from which such a photograph can be taken. You can assume that the domes are points, so that they do not block each other unless they are in a straight line from the photographer's view.\n", "inputFormat": "The first line of input contains three integers $d_x$, $d_y$, and $n$, where $d_x$ and $d_y$ $(2 \\leq d_x, d_y \\leq 10^5)$ are the dimensions of Red Square, and $n$ $(1 \\leq n \\leq 100)$ is the number of domes. The bottom-left corner of Red Square is at the origin $(0,0)$ and the top-right corner is at coordinate $(d_x,d_y)$.\n\nEach of the next $n$ lines contains two integers $x_i$ and $y_i$ $(0 < x_i < d_x, 0 < y_i < d_y)$, giving the locations $(x_i, y_i)$ of the domes. The $i^{\\text {th }}$ line describes dome number $i$. No two domes are in the same location.\n\nThe last line contains a permutation of the numbers $\\{1, \\ldots, n\\}$ specifying the desired left-to-right viewing order of the domes in the picture.", "outputFormat": "Output the area of the region within Red Square from which one can take a photo that shows the domes in the requested order.  Note that the area may be $0$ if there is no position from which to take the requested photo.  Your answer should have an absolute or relative error of at most $10^{-3}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Domes", "background": "ICPC2020 WF C", "description": "Saint Basil's Cathedral is the best-known landmark of Moscow and maybe even of all of Russia. Built under Ivan the Terrible in the $16$$^{\\text {th }}$ century, the cathedral is known for its colorful domes. No visit to the city is complete without taking a photo of the former church in Red Square.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0s8tbi50.png)\n\nThe Moscow Tourism Board (MTB) wants to make it as safe as possible for tourists to take the perfect shot of the cathedral. Depending on where you stand when you take a picture, the relative positions of the domes will be different (see Figure C.1). The MTB is concerned that for some desired configurations of domes the region in Red Square where such a photo is possible will be so small as to lead to a dangerous overcrowding of photographers. Wanting to avoid the inevitable pushing, shoving, injury, and Covid that this could cause, the MTB would like to find the area of the region where a photo is possible for any desired ordering of the domes.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a5pgv6kt.png)\n\nFor simplicity, assume that cameras have a $180$-degree viewing angle. As an illustration consider Figure C.2, which shows the location of the domes (labeled $1$$\\sim$$5$) and the photographer (green dot) in the plane. If the photographer shoots a picture aiming the camera straight towards the left (directly at dome $5$), then everything in the shaded area will be visible in the photograph. Note that in this photograph, the domes will appear in order $4, 3, 5, 2, 1$ from the left to the right.\n\nGiven the location of the domes within Red Square and a desired left-to-right order of the domes in the photograph, MTB wants to know the area of the region within Red Square from which such a photograph can be taken. You can assume that the domes are points, so that they do not block each other unless they are in a straight line from the photographer's view.\n", "inputFormat": "The first line of input contains three integers $d_x$, $d_y$, and $n$, where $d_x$ and $d_y$ $(2 \\leq d_x, d_y \\leq 10^5)$ are the dimensions of Red Square, and $n$ $(1 \\leq n \\leq 100)$ is the number of domes. The bottom-left corner of Red Square is at the origin $(0,0)$ and the top-right corner is at coordinate $(d_x,d_y)$.\n\nEach of the next $n$ lines contains two integers $x_i$ and $y_i$ $(0 < x_i < d_x, 0 < y_i < d_y)$, giving the locations $(x_i, y_i)$ of the domes. The $i^{\\text {th }}$ line describes dome number $i$. No two domes are in the same location.\n\nThe last line contains a permutation of the numbers $\\{1, \\ldots, n\\}$ specifying the desired left-to-right viewing order of the domes in the picture.", "outputFormat": "Output the area of the region within Red Square from which one can take a photo that shows the domes in the requested order.  Note that the area may be $0$ if there is no position from which to take the requested photo.  Your answer should have an absolute or relative error of at most $10^{-3}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Domes", "background": "", "description": "圣瓦西里大教堂是莫斯科乃至全俄罗斯最著名的地标。这座教堂建于 16 世纪伊凡雷帝时期，以其色彩斑斓的圆顶而闻名。到访这座城市时，如果不在红场拍摄这座前教堂的照片，旅程就不算完整。\n\n莫斯科旅游局（MTB）希望游客能够尽可能安全地拍摄到教堂的完美照片。根据拍摄时所站的位置，圆顶的相对位置会有所不同（见图 C.1）。MTB 担心对于某些期望的圆顶排列，红场中可以拍摄到这种照片的区域会非常小，导致摄影师过度拥挤。为了避免可能导致的推搡、受伤以及新冠病毒传播，MTB 希望找到可以拍摄到任何期望圆顶排列的区域面积。\n\n为了简化问题，假设相机具有 180 度的视角。作为说明，考虑图 C.2，其中显示了圆顶（标记为 1 到 5）和摄影师（绿色点）在平面上的位置。如果摄影师将相机直接对准左侧（直接对准圆顶 5）拍摄照片，则阴影区域内的所有内容都将在照片中可见。注意，在这张照片中，圆顶从左到右的顺序为 4, 3, 5, 2, 1。\n\n给定红场内圆顶的位置以及照片中期望的圆顶从左到右的顺序，MTB 想知道在红场内可以拍摄到这种照片的区域面积。可以假设圆顶是点，因此除非在摄影师视角中成一条直线，否则它们不会相互遮挡。", "inputFormat": "输入的第一行包含三个整数 $d_x$、$d_y$ 和 $n$，其中 $d_x$ 和 $d_y$ $(2 \\leq d_x, d_y \\leq 10^5)$ 是红场的尺寸，$n$ $(1 \\leq n \\leq 100)$ 是圆顶的数量。红场的左下角位于原点 $(0,0)$，右上角位于坐标 $(d_x,d_y)$。\n\n接下来的 $n$ 行中的每一行包含两个整数 $x_i$ 和 $y_i$ $(0 < x_i < d_x, 0 < y_i < d_y)$，给出圆顶的位置 $(x_i, y_i)$。第 $i$ 行描述了第 $i$ 个圆顶。没有两个圆顶位于同一位置。\n\n最后一行包含数字 $\\{1, \\ldots, n\\}$ 的一个排列，指定照片中圆顶从左到右的期望顺序。", "outputFormat": "输出红场内可以拍摄到圆顶按请求顺序排列的照片的区域面积。注意，如果没有位置可以拍摄到请求的照片，则面积可能为 $0$。你的答案的绝对误差或相对误差应不超过 $10^{-3}$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8131", "type": "P", "difficulty": 5, "samples": [["ATTACC", "3"], ["AAAAGAATTAA", "5"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "Manacher 算法", "ICPC", "WF"], "title": "[ICPC 2020 WF] Gene Folding", "background": "ICPC2020 WF D", "description": "International Cell Processing Company (ICPC) is a world leader in the analysis of genetic\nsequences. A genetic sequence is a sequence of nucleotides, which in this problem is\nrepresented by a string containing only the letters $\\texttt{A}$, $\\texttt{C}$, $\\texttt{G}$, and $\\texttt{T}$ \nin some combination, each letter representing a single nucleotide \n($\\textbf{A}$denine, $\\textbf{C}$ytosine, $\\textbf{G}$uanine, and $\\textbf{T}$hymine, respectively).\n\nOne of the key discoveries made by ICPC is that through a process called Genetically Optimized\nOrganic Folding (GOOF), they can take a genetic sequence and transform it into a simpler one,\nwhile preserving many of the properties of the sequence that ICPC wants to analyze.\n\nA single application of GOOF works as follows. Find a point between two adjacent \nnucleotides in the nucleotide sequence, such that the sequence reads the same from that point in\nboth directions, up until the nearer end of the sequence. For instance, in the sequence $\\texttt{ATTACC}$,\nthere are two such points: $\\texttt{AT-TACC}$ and $\\texttt{ATTAC-C}$. Then pick one of these points\n(say, the first one), and fold the genetic sequence at that point, merging the identical nucleotides (so, in this\ncase the $\\texttt{AT}$ and $\\texttt{TA}$ would become merged, and the resulting sequence would be $\\texttt{CCAT}$\nor $\\texttt{TACC}$).\n\nThrough repeated application of GOOF, a nucleotide can potentially be made much shorter.\nHowever, manually searching for the appropriate folding points is very time-consuming.  ICPC\nreached out to you to write a program that would automate the process of finding the folding\npoints and choosing them so as to obtain the shortest possible genetic sequence from a given\ninput sequence.\n", "inputFormat": "The input contains a single string $s$ representing the nucleotide sequence to be analyzed. \nThe string consists of characters $\\texttt{A}$, $\\texttt{C}$, $\\texttt{G}$, and $\\texttt{T}$ only. \nThe length of $s$ is between $1$ and $4 \\cdot 10^6$, inclusive.", "outputFormat": "Output the smallest possible length of a sequence obtained from\nthe input by applying GOOF zero or more times.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Gene Folding", "background": "ICPC2020 WF D", "description": "International Cell Processing Company (ICPC) is a world leader in the analysis of genetic\nsequences. A genetic sequence is a sequence of nucleotides, which in this problem is\nrepresented by a string containing only the letters $\\texttt{A}$, $\\texttt{C}$, $\\texttt{G}$, and $\\texttt{T}$ \nin some combination, each letter representing a single nucleotide \n($\\textbf{A}$denine, $\\textbf{C}$ytosine, $\\textbf{G}$uanine, and $\\textbf{T}$hymine, respectively).\n\nOne of the key discoveries made by ICPC is that through a process called Genetically Optimized\nOrganic Folding (GOOF), they can take a genetic sequence and transform it into a simpler one,\nwhile preserving many of the properties of the sequence that ICPC wants to analyze.\n\nA single application of GOOF works as follows. Find a point between two adjacent \nnucleotides in the nucleotide sequence, such that the sequence reads the same from that point in\nboth directions, up until the nearer end of the sequence. For instance, in the sequence $\\texttt{ATTACC}$,\nthere are two such points: $\\texttt{AT-TACC}$ and $\\texttt{ATTAC-C}$. Then pick one of these points\n(say, the first one), and fold the genetic sequence at that point, merging the identical nucleotides (so, in this\ncase the $\\texttt{AT}$ and $\\texttt{TA}$ would become merged, and the resulting sequence would be $\\texttt{CCAT}$\nor $\\texttt{TACC}$).\n\nThrough repeated application of GOOF, a nucleotide can potentially be made much shorter.\nHowever, manually searching for the appropriate folding points is very time-consuming.  ICPC\nreached out to you to write a program that would automate the process of finding the folding\npoints and choosing them so as to obtain the shortest possible genetic sequence from a given\ninput sequence.\n", "inputFormat": "The input contains a single string $s$ representing the nucleotide sequence to be analyzed. \nThe string consists of characters $\\texttt{A}$, $\\texttt{C}$, $\\texttt{G}$, and $\\texttt{T}$ only. \nThe length of $s$ is between $1$ and $4 \\cdot 10^6$, inclusive.", "outputFormat": "Output the smallest possible length of a sequence obtained from\nthe input by applying GOOF zero or more times.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Gene Folding", "background": null, "description": "国际细胞加工公司(ICPC)在基因序列分析方面处于世界领先地位。遗传序列是核苷酸的序列，在这个问题中，它由一个只包含字母 $\\texttt{A}$、$\\texttt{C}$、$\\texttt{G}$ 和 $\\texttt{T}$ 的某种组合的字符串来表示，每个字母分别代表一个核苷酸腺嘌呤（$\\textbf{A}$denine）、胞嘧啶（$\\textbf{C}$ytosine）、鸟嘌呤（$\\textbf{G}$uanine）和胸腺嘧啶（$\\textbf{T}$hymine）。\n\nICPC 的一个重要发现是，通过一种被称为基因优化有机折叠（GOOF）的过程，他们可以将一个基因序列转化为一个更简单的序列，同时保留ICPC想要分析的序列的许多属性。\n\n以下是 GOOF 的一个应用。在核苷酸序列中两个相邻核苷酸之间找到一个点，使从该点开始的序列在两个方向上都是相同的，直到序列的最后一个点。例如，在序列 $\\texttt{ATTACC}$ 中，有两个这样的点：$\\texttt{AT-TACC}$ 和 $\\texttt{ATTAC-C}$。然后选择其中一个点(比如第一个点)，在那个点折叠基因序列，合并相同的核苷酸（因此，在这种情况下，$\\texttt{AT}$ 和 $\\texttt{TA}$ 会合并，得到的序列将是 $\\texttt{CCAT}$ 或 $\\texttt{TACC}$）。\n\n通过重复使用 GOOF，可以使核苷酸变得更短。但是，手工寻找合适的折叠点非常耗时。ICPC 找到你，让你写一个程序来自动找到折叠点并选择它们，从而从给定的输入序列中获得尽可能短的基因序列。", "inputFormat": "输入包含一个表示要分析的核苷酸序列的字符串。只包含 $\\texttt{A}$、$\\texttt{C}$、$\\texttt{G}$ 和 $\\texttt{T}$。$s$ 长度在 $1 \\sim 4\\cdot10^6$ 之间。", "outputFormat": "输出从输入中应用零次或多次 GOOF 得到的序列的最小可能长度。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P8132", "type": "P", "difficulty": 0, "samples": [["20 13\nH 12 13\nD 5 18\nR 13 14\nR 8 16\nH 2 3\nV 10 19\nV 3 13\nR 8 13\nV 3 10\nD 5 18\nV 11 12\nR 1 6\nR 14 19", "1\n2\n0\n-3\n-7\n-9\n-11\n-9\n-7\n-6\n-6\n-5\n-3\n-4\n-5\n-4\n-4\n-3\n0\n0"], ["7 1\nH 1 6", "1\n2\n3\n3\n2\n1\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Landscape Generator", "background": "ICPC2020 WF E", "description": "Interactive Creative Players Collective (ICPC) is working on a new computer game for which they want to generate realistic landscapes.\nOne of the ICPC engineers proposed an algorithm inspired by geological processes.\nThe algorithm starts with a flat landscape and repeatedly modifies it by lifting or lowering continuous blocks, thus forming *horsts* (lifted blocks) and *grabens* (lowered blocks).\nThe blocks to be lifted or lowered are selected at random.\nICPC hopes to obtain realistic landscapes this way.\n\nYour task is to interpret any sequence of such modifications and output the resulting landscape.\nThe landscape is represented by a sequence of $n$ integer height values, one for each integer point from $1$ to $n$ on the $x$-axis.\nFigure E.1 illustrates an example by connecting the height values with line segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8catonw.png)\n\nInitially the height is $0$ at all $n$ points.\nThis flat shape is subjected to a sequence of modifications.\nEach modification applies one of the following four operations with two integer parameters $x_1 \\leq x_2$:\n\n- $\\texttt{R}$: Raise -- increase the height by $1$ at all points between $x_1$ and $x_2$ inclusive.\n- $\\texttt{D}$: Depress -- decrease the height by $1$ at all points between $x_1$ and $x_2$ inclusive.\n- $\\texttt{H}$: Hill -- add a new linearly shaped hill between $x_1$ and $x_2$.\n- $\\texttt{V}$: Valley -- add a new linearly shaped valley between $x_1$ and $x_2$.\n\nAdding a hill to the current landscape works as follows.\nThe heights at points $x_1$ and $x_2$ are increased by $1$.\nIf $x_2 - x_1 > 1$, the heights at points $x_1 + 1$ and $x_2 - 1$ are increased by $2$.\nIf $x_2 - x_1 > 3$, the heights at points $x_1 + 2$ and $x_2 - 2$ are increased by $3$, and so on.\nFigure E.2 shows an example.\nAdding a valley works in the same way except the heights are decreased instead.\nThe maximal change of height happens in the middle between $x_1$ and $x_2$.\nIf $x_2 - x_1$ is odd, there will be two neighboring points with maximal change, otherwise just one.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rl890ge2.png)", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$ ($1 \\leq n \\leq 200\\,000$) is the number of points, and $k$ ($0 \\leq k \\leq 200\\,000$) is the number of modifications.\nThe $n$ points along the $x$-axis are numbered from $1$ to $n$.\nThe next $k$ lines describe the modifications.\nEach line contains one character $c$ and two integers $x_1$ and $x_2$, where $c$ (one of $\\texttt{R}$, $\\texttt{D}$, $\\texttt{H}$ or $\\texttt{V}$) designates the operation and $x_1$ and $x_2$ ($1 \\leq x_1 \\leq x_2 \\leq n$) specify its parameters.\n", "outputFormat": "Output $n$ lines, where the $i^{\\text{th}}$ line contains the height at point $i$ after applying all modifications in the given order.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Landscape Generator", "background": "ICPC2020 WF E", "description": "Interactive Creative Players Collective (ICPC) is working on a new computer game for which they want to generate realistic landscapes.\nOne of the ICPC engineers proposed an algorithm inspired by geological processes.\nThe algorithm starts with a flat landscape and repeatedly modifies it by lifting or lowering continuous blocks, thus forming *horsts* (lifted blocks) and *grabens* (lowered blocks).\nThe blocks to be lifted or lowered are selected at random.\nICPC hopes to obtain realistic landscapes this way.\n\nYour task is to interpret any sequence of such modifications and output the resulting landscape.\nThe landscape is represented by a sequence of $n$ integer height values, one for each integer point from $1$ to $n$ on the $x$-axis.\nFigure E.1 illustrates an example by connecting the height values with line segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8catonw.png)\n\nInitially the height is $0$ at all $n$ points.\nThis flat shape is subjected to a sequence of modifications.\nEach modification applies one of the following four operations with two integer parameters $x_1 \\leq x_2$:\n\n- $\\texttt{R}$: Raise -- increase the height by $1$ at all points between $x_1$ and $x_2$ inclusive.\n- $\\texttt{D}$: Depress -- decrease the height by $1$ at all points between $x_1$ and $x_2$ inclusive.\n- $\\texttt{H}$: Hill -- add a new linearly shaped hill between $x_1$ and $x_2$.\n- $\\texttt{V}$: Valley -- add a new linearly shaped valley between $x_1$ and $x_2$.\n\nAdding a hill to the current landscape works as follows.\nThe heights at points $x_1$ and $x_2$ are increased by $1$.\nIf $x_2 - x_1 > 1$, the heights at points $x_1 + 1$ and $x_2 - 1$ are increased by $2$.\nIf $x_2 - x_1 > 3$, the heights at points $x_1 + 2$ and $x_2 - 2$ are increased by $3$, and so on.\nFigure E.2 shows an example.\nAdding a valley works in the same way except the heights are decreased instead.\nThe maximal change of height happens in the middle between $x_1$ and $x_2$.\nIf $x_2 - x_1$ is odd, there will be two neighboring points with maximal change, otherwise just one.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rl890ge2.png)", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$ ($1 \\leq n \\leq 200\\,000$) is the number of points, and $k$ ($0 \\leq k \\leq 200\\,000$) is the number of modifications.\nThe $n$ points along the $x$-axis are numbered from $1$ to $n$.\nThe next $k$ lines describe the modifications.\nEach line contains one character $c$ and two integers $x_1$ and $x_2$, where $c$ (one of $\\texttt{R}$, $\\texttt{D}$, $\\texttt{H}$ or $\\texttt{V}$) designates the operation and $x_1$ and $x_2$ ($1 \\leq x_1 \\leq x_2 \\leq n$) specify its parameters.\n", "outputFormat": "Output $n$ lines, where the $i^{\\text{th}}$ line contains the height at point $i$ after applying all modifications in the given order.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Landscape Generator", "background": "", "description": "### 题目背景\nICPC2020 WF E\nInteractive Creative Players Collective (ICPC)正在创作一款游戏，他们想为它生成真实的地形。一位ICPC工程师受地质过程启发，提出了一种算法，该算法从一个平地开始，重复地通过上升或下降一些连续的区块来改变地形，这样就会形成地垒（即上升的区块）和地堑（即下降的区块）。上升或下降的区块是随机选择的。ICPC希望通过这种方法获得真实的地形。\n\n你的任务是根据所有的更改地形指令输出得到的地形，地形可表示为一个由$n$个整数组成的数组，每个整数代表$x$轴上的点$1$到$n$的海拔高度值。图表E.1是将这些值用折线连接起来的一个例子。\n\n![图表E.1：由样例输入#1生成的地形](https://cdn.luogu.com.cn/upload/image_hosting/t8catonw.png)\n\n最初，这$n$个点的海拔都是0，接下来这个图形会受到一系列的修改，每条修改指令是以下四条之一，并且有两个参数$x_1 \\le x_2$ ：\n\n- $\\texttt{R}$: Raise（上升）——将$x_1$到$x_2$的所有点的海拔均增加$1$。\n- $\\texttt{D}$: Depress（下降）——将$x_1$到$x_2$的所有点的海拔均减少$1$。\n- $\\texttt{H}$: Hill（山丘）——在$x_1$到$x_2$之间形成一座“山丘”。\n- $\\texttt{V}$: Valley（峡谷）——在$x_1$到$x_2$之间形成一条“峡谷”。\n\n向现有地形添加一座“山丘”的原理如下：点$x_1$和$x_2$的海拔增加1；如果$x_2-x_1>1$，那么点$x_1+1$和$x_2-1$的海拔增加2；如果$x_2-x_1>3$，那么点$x_1+2$和$x_2-2$的海拔增加3；以此类推。图表E.2是一个例子。添加一条“峡谷”与上述原理相同，只是海拔是减少而非增加。海拔改变最大的点在$x_1$和$x_2$的中间，如果$x_2-x_1$是偶数，就会有两个相邻的点海拔改变最大，否则只有一个点。\n\n![图表E.2：样例输入#2生成的地形](https://cdn.luogu.com.cn/upload/image_hosting/rl890ge2.png)", "inputFormat": "输入的第一行包含两个整数$n$和$k$，其中$n$ ($1 \\le n \\le 2\\times10^5$)代表点的数量，$k$ ($0 \\le k \\le 2\\times10^5$)代表修改指令的数量。$x$轴上的$n$个点被编号为$1$到$n$。\n\n接下来的$k$行描述修改。每行包含一个字符$c$和两个整数$x_1$和$x_2$，其中$c$ (为$\\texttt{R}$, $\\texttt{D}$, $\\texttt{H}$, $\\texttt{V}$之一)代表操作种类，$x_1$和$x_2$ ($1 \\le x_1 \\le x_2 \\le n$)是具体参数。", "outputFormat": "输出共$n$行，其中第$i$行为所有修改完成后点$i$的海拔。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8133", "type": "P", "difficulty": 6, "samples": [["4 2\n0 0\n2 4\n4 9\n3 1", "3"], ["3 1\n0 10\n2000 10\n1000 12", "2"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Ley Lines", "background": "ICPC2020 WF F", "description": "In 1921, the amateur archaeologist Alfred Watkins coined the term\n\"ley lines\" to refer to straight lines between numerous places of\ngeographical and historical interest. These lines have often been\nassociated with mysterious and mystical theories, many of which still\npersist.\n\nOne of the common criticisms of ley lines is that lines one draws on a\nmap are actually of non-zero width, and finding \"lines\" that connect\nmultiple places is trivial, given a sufficient density of points and a\nsufficiently thick pencil. In this problem you will explore that\ncriticism.\n\nFor simplicity, we will ignore the curvature of the earth, and just assume\nwe are dealing with a set of points on a plane, each of which has a\nunique $(x, y)$ coordinate, and no three of which lie on a single\nstraight line. Given such a set, and the thickness of your pencil,\nwhat is the largest number of points through which you can draw a\nsingle line?", "inputFormat": "The first line of input consists of two integers $n$ and $t$, where\n$n$ ($3 \\le n \\le 3\\,000$) is the number of points in the set\nand $t$ ($0 \\le t \\le 10^9$) is the thickness of the pencil.\nThen follow $n$ lines,\neach containing two integers $x$ and $y$ ($-10^9 \\le x, y \\le 10^9$),\nindicating the coordinates of a point in the set.\n\nYou may assume that the input is such that the answer would not change\nif the thickness $t$ was increased or decreased by $10^{-2}$, and that no\nthree input points are collinear.", "outputFormat": "Output the maximum number of points that lie on a single \"line\" of\nthickness $t$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Ley Lines", "background": "ICPC2020 WF F", "description": "In 1921, the amateur archaeologist Alfred Watkins coined the term\n\"ley lines\" to refer to straight lines between numerous places of\ngeographical and historical interest. These lines have often been\nassociated with mysterious and mystical theories, many of which still\npersist.\n\nOne of the common criticisms of ley lines is that lines one draws on a\nmap are actually of non-zero width, and finding \"lines\" that connect\nmultiple places is trivial, given a sufficient density of points and a\nsufficiently thick pencil. In this problem you will explore that\ncriticism.\n\nFor simplicity, we will ignore the curvature of the earth, and just assume\nwe are dealing with a set of points on a plane, each of which has a\nunique $(x, y)$ coordinate, and no three of which lie on a single\nstraight line. Given such a set, and the thickness of your pencil,\nwhat is the largest number of points through which you can draw a\nsingle line?", "inputFormat": "The first line of input consists of two integers $n$ and $t$, where\n$n$ ($3 \\le n \\le 3\\,000$) is the number of points in the set\nand $t$ ($0 \\le t \\le 10^9$) is the thickness of the pencil.\nThen follow $n$ lines,\neach containing two integers $x$ and $y$ ($-10^9 \\le x, y \\le 10^9$),\nindicating the coordinates of a point in the set.\n\nYou may assume that the input is such that the answer would not change\nif the thickness $t$ was increased or decreased by $10^{-2}$, and that no\nthree input points are collinear.", "outputFormat": "Output the maximum number of points that lie on a single \"line\" of\nthickness $t$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Ley Lines", "background": "", "description": "1921 年，业余考古学家阿尔弗雷德·沃特金斯创造了“能量线”一词，用来指代连接多个地理和历史兴趣点的直线。这些线常常与神秘和神秘的理论联系在一起，其中许多理论至今仍然存在。\n\n关于能量线的一个常见批评是，人们在地图上画的线实际上是有非零宽度的，给定足够密集的点和足够粗的铅笔，找到连接多个地方的“线”是微不足道的。在这个问题中，你将探讨这一批评。\n\n为简单起见，我们将忽略地球的曲率，只假设我们处理的是平面上的一组点，每个点都有唯一的 $(x, y)$ 坐标，并且没有三个点在同一条直线上。给定这样的一组点和铅笔的厚度，你可以通过多少个点画出一条线？", "inputFormat": "输入的第一行由两个整数 $n$ 和 $t$ 组成，其中 $n$ ($3 \\le n \\le 3,000$) 是集合中点的数量，$t$ ($0 \\le t \\le 10^9$) 是铅笔的厚度。接下来是 $n$ 行，每行包含两个整数 $x$ 和 $y$ ($-10^9 \\le x, y \\le 10^9$)，表示集合中一个点的坐标。\n\n你可以假设输入是这样的：如果铅笔的厚度 $t$ 增加或减少 $10^{-2}$，答案不会改变，并且没有三个输入点共线。", "outputFormat": "输出位于厚度为 $t$ 的单条“线”上的最大点数。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8134", "type": "P", "difficulty": 4, "samples": [["4\n20 5 5\n5 20 5\n5 5 20\n10 10 10", "10 4\n"], ["4\n15 15 5\n5 15 15\n15 5 15\n10 10 10", "10 1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Opportunity Cost", "background": "ICPC2020 WF G", "description": "As with most types of products, buying a new phone can be difficult.\nOne of the main challenges is that there are a lot of different\naspects of the phone that you might care about, such as its price, its\nperformance, and how user-friendly the phone is.\nTypically, there will be no single phone that is simultaneously the\nbest at all of these things: the cheapest phone, the most powerful\nphone, and the most user-friendly phone will likely be different phones.\n\nThus when buying a phone, you are forced to make some sacrifices by\nbalancing the different aspects you care about against each other and\nchoosing the phone that achieves the best compromise (where \"best\"\nof course depends on what your priorities happen to be).  One way of\nmeasuring this sacrifice is known as the *opportunity cost*,\nwhich (for the purposes of this problem) we define as follows.\n\nSuppose that you have bought a phone with price $x$, performance $y$,\nand user-friendliness $z$. For simplicity, we assume that these three\nvalues are measured on a comparable numeric scale where higher is\nbetter. If there are $n$ available phones, and the values\n$(x_i,y_i,z_i)$ represent the (price, performance, user-friendliness)\nof the $i^{\\text{th}}$ phone, then the opportunity cost of your phone\nis defined as\n\n$$\\max _{1 \\leq i \\leq n}\\left(\\max \\left(x_{i}-x, 0\\right)+\\max \\left(y_{i}-y, 0\\right)+\\max \\left(z_{i}-z, 0\\right)\\right)$$\n\n\nWrite a program that, given the list of available phones, finds a\nphone with the minimum opportunity cost.", "inputFormat": "The first line of input contains an integer $n$ ($2 \\leq n \\leq\n200\\,000$), the number of phones considered. Following that are $n$ lines.\nThe $i^{\\text{th}}$ of these lines contains three integers $x_i$, $y_i$, and $z_i$,\nwhere $x_i$ is the price, $y_i$ is the performance, and $z_i$ is the\nuser-friendliness of the $i^{\\text{th}}$ phone ($1 \\leq x_i, y_i, z_i \\leq\n10^9$).", "outputFormat": "Output a single line containing two integers: the smallest possible\nopportunity cost and an integer between $1$ and $n$ indicating the\nphone achieving that opportunity cost. If there are multiple such\nphones, output the one with the smallest index.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Opportunity Cost", "background": "ICPC2020 WF G", "description": "As with most types of products, buying a new phone can be difficult.\nOne of the main challenges is that there are a lot of different\naspects of the phone that you might care about, such as its price, its\nperformance, and how user-friendly the phone is.\nTypically, there will be no single phone that is simultaneously the\nbest at all of these things: the cheapest phone, the most powerful\nphone, and the most user-friendly phone will likely be different phones.\n\nThus when buying a phone, you are forced to make some sacrifices by\nbalancing the different aspects you care about against each other and\nchoosing the phone that achieves the best compromise (where \"best\"\nof course depends on what your priorities happen to be).  One way of\nmeasuring this sacrifice is known as the *opportunity cost*,\nwhich (for the purposes of this problem) we define as follows.\n\nSuppose that you have bought a phone with price $x$, performance $y$,\nand user-friendliness $z$. For simplicity, we assume that these three\nvalues are measured on a comparable numeric scale where higher is\nbetter. If there are $n$ available phones, and the values\n$(x_i,y_i,z_i)$ represent the (price, performance, user-friendliness)\nof the $i^{\\text{th}}$ phone, then the opportunity cost of your phone\nis defined as\n\n$$\\max _{1 \\leq i \\leq n}\\left(\\max \\left(x_{i}-x, 0\\right)+\\max \\left(y_{i}-y, 0\\right)+\\max \\left(z_{i}-z, 0\\right)\\right)$$\n\n\nWrite a program that, given the list of available phones, finds a\nphone with the minimum opportunity cost.", "inputFormat": "The first line of input contains an integer $n$ ($2 \\leq n \\leq\n200\\,000$), the number of phones considered. Following that are $n$ lines.\nThe $i^{\\text{th}}$ of these lines contains three integers $x_i$, $y_i$, and $z_i$,\nwhere $x_i$ is the price, $y_i$ is the performance, and $z_i$ is the\nuser-friendliness of the $i^{\\text{th}}$ phone ($1 \\leq x_i, y_i, z_i \\leq\n10^9$).", "outputFormat": "Output a single line containing two integers: the smallest possible\nopportunity cost and an integer between $1$ and $n$ indicating the\nphone achieving that opportunity cost. If there are multiple such\nphones, output the one with the smallest index.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Opportunity Cost", "background": "", "description": "正如大多数类型的产品一样，购买新手机可能是困难的。主要的挑战之一是手机有很多不同的方面可能会影响你的选择，比如价格、性能和用户友好性。通常情况下，不会有一款手机在所有这些方面都是最好的：最便宜的手机、最强大的手机和最用户友好的手机可能是不同的手机。\n\n因此，在购买手机时，你必须在你关心的不同方面之间做出一些妥协，选择一款在这些方面达到最佳平衡的手机（当然，“最佳”取决于你的优先级是什么）。衡量这种妥协的一种方法被称为*机会成本*，在这个问题中，我们将其定义如下。\n\n假设你购买了一款价格为 $x$、性能为 $y$、用户友好性为 $z$ 的手机。为了简化问题，我们假设这三个值是在一个可比较的数值尺度上测量的，数值越高越好。如果有 $n$ 款可用的手机，并且 $(x_i, y_i, z_i)$ 表示第 $i$ 款手机的（价格、性能、用户友好性），那么你手机的机会成本定义为\n\n$$\\max _{1 \\leq i \\leq n}\\left(\\max \\left(x_{i}-x, 0\\right)+\\max \\left(y_{i}-y, 0\\right)+\\max \\left(z_{i}-z, 0\\right)\\right)$$\n\n编写一个程序，给定可用手机的列表，找到机会成本最小的手机。", "inputFormat": "输入的第一行包含一个整数 $n$ ($2 \\leq n \\leq 200,000$)，表示考虑的手机数量。接下来的 $n$ 行中，第 $i$ 行包含三个整数 $x_i$、$y_i$ 和 $z_i$，其中 $x_i$ 是价格，$y_i$ 是性能，$z_i$ 是第 $i$ 款手机的用户友好性（$1 \\leq x_i, y_i, z_i \\leq 10^9$）。", "outputFormat": "输出一行，包含两个整数：最小可能的机会成本和一个介于 $1$ 到 $n$ 之间的整数，表示实现该机会成本的手机。如果有多部这样的手机，输出索引最小的那一部。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8135", "type": "P", "difficulty": 7, "samples": [["1\n5\n10101\n01110\n10101\n10101\n10101\n", "test 5 4 2 1 3\ntest 4 5 1 3 2\ntest 2 3 4 5 1\ntest 3 1 5 2 4\nanswer 10101"], ["2\n4\n1111\n7\n0001100\n----11-", "test 2 3 4 1\nanswer 1111\ntest 2 3 4 5 6 7 1\ntest 0 0 0 0 2 4 0\nanswer 0101110"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "交互题", "Special Judge", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] QC QC", "background": "ICPC2020 WF H", "description": "\nInnovative Computable Quality Control (ICQC) has developed a ground-breaking\nnew machine for performing, well, quality control. Thanks to\nits novel Deep Intelligence technology, an ICQC quality control (QC)\nmachine can automatically, with $100\\%$ accuracy, detect manufacturing\nerrors in any machine in existence, whether it is a coffee machine, an\nintergalactic space ship, or a quantum computer.\n\nICQC is now setting up its factory for producing these QC\nmachines. Like any other manufacturing process, some fraction of\nthe produced machines will suffer from malfunctions and these need to\nbe found and discarded. Fortunately, ICQC has just the product\nfor detecting malfunctioning machines!\n\nObviously, ICQC should not simply use a QC machine on itself, since\na malfunctioning machine might incorrectly classify itself as working\ncorrectly. Instead, ICQC will take each batch of $n$ machines\nproduced during a day and have them test each other overnight.\nIn particular, during every hour of the night, each of the $n$ QC\nmachines can run a check on one of the other QC machines, and\nsimultaneously be checked by one other QC machine.\n\nIf the machine running the check is correct, it will correctly report\nwhether the tested machine is correct or malfunctioning, but if the\nmachine running the check is malfunctioning, it may report either result.\nIf a machine A is used to test a machine B multiple times it will return the same result every time, even if machine A is malfunctioning.\nThe exact testing schedule does not have to be fixed in advance,\nso the choice of which machines should check which other machines during\nthe second hour of the night may be based on the result of the tests\nfrom the first hour, and so on.\n\nICQC are $100\\%$ confident that strictly more than a half of the $n$ QC\nmachines in each batch are working correctly, but the night is only $12$\nhours long, so there is only time to do a small number of test rounds.\nCan you help ICQC determine which QC machines are malfunctioning?\n\nFor example, consider Sample Interaction 1 below. After the fourth hour,\nevery machine has tested every other machine. For machine $1$,\nonly one other machine claimed that it was malfunctioning, and if it\nwas truly malfunctioning then at least $3$ of the other machines would\nclaim this. For machine $4$, only one other machine claims that it\nis working, which implies that machine $2$ must be malfunctioning since\nmore than half of the machines are supposed to be working. Note that\neven though machine $4$ is malfunctioning, it still happened to produce\nthe correct responses in these specific test rounds.\n\n\n\n", "inputFormat": "## Interaction\n\n\nThe first line of input contains a single integer $b$ ($1 \\le b \\le 500$),\nthe number of batches to follow. Each batch is independent.\nYou should process each batch\ninteractively, which means the input you receive\nwill depend on the previous output of your program.\n\nThe first line of input for each batch contains a single integer $n$\n($1 \\le n \\le 100$), the number of QC machines in the batch.\nThe interaction then proceeds in rounds. In each round, your program can\nschedule tests for the next hour, by writing a line of\nthe form\n\"$\\texttt{test}$ $\\ x_1\\ x_2\\ \\ldots\\ x_n$\"\nindicating that each machine $i$ should run a test on machine $x_i$.\nIf $x_i=0$, then machine $i$ is idle in that round and performs no test.\nAll positive numbers in the sequence must be distinct.\n\nAfter writing this line, there will be a result to read from the\ninput. The result is one line containing a string of length\n$n$, having a '$\\texttt{1}$' in position $i$ if machine $i$ says that machine $x_i$\nis working correctly, '$\\texttt{0}$' if machine $i$ says that machine $x_i$ is\nmalfunctioning, and '$\\texttt{-}$' (dash) if machine $i$ was idle in the round.\n\nWhen your program has determined which machines are malfunctioning,\nbut no later than after $12$ rounds of tests,\nit must write a line of the form\n\"$\\texttt{answer}$ $S$\"\nwhere $S$ is a binary string of length $n$, having a '$\\texttt{1}$' in position $i$\nif machine $i$ is working correctly, and a '$\\texttt{0}$' if it is malfunctioning.\n\nAfter writing the answer line, your program should start processing\nthe next batch by reading its number $n$. When all $b$ batches have been\nprocessed, the interaction ends and your program should exit.\n\n\n*Notes on interactive judging:*\n\n- *The evaluation is non-adversarial, meaning that the result of each\nmachine testing each other machine is chosen in advance rather than in\nresponse to your queries.*\n- *Do not forget to flush output buffers after writing. See the Addendum to Judging Notes for details.*\n- *You are provided with a command-line tool for local testing, together with input files\ncorresponding to the sample interactions.\nThe tool has comments at the top to explain its use.*\n\n\n", "outputFormat": "", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] QC QC", "background": "ICPC2020 WF H", "description": "\nInnovative Computable Quality Control (ICQC) has developed a ground-breaking\nnew machine for performing, well, quality control. Thanks to\nits novel Deep Intelligence technology, an ICQC quality control (QC)\nmachine can automatically, with $100\\%$ accuracy, detect manufacturing\nerrors in any machine in existence, whether it is a coffee machine, an\nintergalactic space ship, or a quantum computer.\n\nICQC is now setting up its factory for producing these QC\nmachines. Like any other manufacturing process, some fraction of\nthe produced machines will suffer from malfunctions and these need to\nbe found and discarded. Fortunately, ICQC has just the product\nfor detecting malfunctioning machines!\n\nObviously, ICQC should not simply use a QC machine on itself, since\na malfunctioning machine might incorrectly classify itself as working\ncorrectly. Instead, ICQC will take each batch of $n$ machines\nproduced during a day and have them test each other overnight.\nIn particular, during every hour of the night, each of the $n$ QC\nmachines can run a check on one of the other QC machines, and\nsimultaneously be checked by one other QC machine.\n\nIf the machine running the check is correct, it will correctly report\nwhether the tested machine is correct or malfunctioning, but if the\nmachine running the check is malfunctioning, it may report either result.\nIf a machine A is used to test a machine B multiple times it will return the same result every time, even if machine A is malfunctioning.\nThe exact testing schedule does not have to be fixed in advance,\nso the choice of which machines should check which other machines during\nthe second hour of the night may be based on the result of the tests\nfrom the first hour, and so on.\n\nICQC are $100\\%$ confident that strictly more than a half of the $n$ QC\nmachines in each batch are working correctly, but the night is only $12$\nhours long, so there is only time to do a small number of test rounds.\nCan you help ICQC determine which QC machines are malfunctioning?\n\nFor example, consider Sample Interaction 1 below. After the fourth hour,\nevery machine has tested every other machine. For machine $1$,\nonly one other machine claimed that it was malfunctioning, and if it\nwas truly malfunctioning then at least $3$ of the other machines would\nclaim this. For machine $4$, only one other machine claims that it\nis working, which implies that machine $2$ must be malfunctioning since\nmore than half of the machines are supposed to be working. Note that\neven though machine $4$ is malfunctioning, it still happened to produce\nthe correct responses in these specific test rounds.\n\n\n\n", "inputFormat": "## Interaction\n\n\nThe first line of input contains a single integer $b$ ($1 \\le b \\le 500$),\nthe number of batches to follow. Each batch is independent.\nYou should process each batch\ninteractively, which means the input you receive\nwill depend on the previous output of your program.\n\nThe first line of input for each batch contains a single integer $n$\n($1 \\le n \\le 100$), the number of QC machines in the batch.\nThe interaction then proceeds in rounds. In each round, your program can\nschedule tests for the next hour, by writing a line of\nthe form\n\"$\\texttt{test}$ $\\ x_1\\ x_2\\ \\ldots\\ x_n$\"\nindicating that each machine $i$ should run a test on machine $x_i$.\nIf $x_i=0$, then machine $i$ is idle in that round and performs no test.\nAll positive numbers in the sequence must be distinct.\n\nAfter writing this line, there will be a result to read from the\ninput. The result is one line containing a string of length\n$n$, having a '$\\texttt{1}$' in position $i$ if machine $i$ says that machine $x_i$\nis working correctly, '$\\texttt{0}$' if machine $i$ says that machine $x_i$ is\nmalfunctioning, and '$\\texttt{-}$' (dash) if machine $i$ was idle in the round.\n\nWhen your program has determined which machines are malfunctioning,\nbut no later than after $12$ rounds of tests,\nit must write a line of the form\n\"$\\texttt{answer}$ $S$\"\nwhere $S$ is a binary string of length $n$, having a '$\\texttt{1}$' in position $i$\nif machine $i$ is working correctly, and a '$\\texttt{0}$' if it is malfunctioning.\n\nAfter writing the answer line, your program should start processing\nthe next batch by reading its number $n$. When all $b$ batches have been\nprocessed, the interaction ends and your program should exit.\n\n\n*Notes on interactive judging:*\n\n- *The evaluation is non-adversarial, meaning that the result of each\nmachine testing each other machine is chosen in advance rather than in\nresponse to your queries.*\n- *Do not forget to flush output buffers after writing. See the Addendum to Judging Notes for details.*\n- *You are provided with a command-line tool for local testing, together with input files\ncorresponding to the sample interactions.\nThe tool has comments at the top to explain its use.*\n\n\n", "outputFormat": "", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] QC QC", "background": "", "description": "创新可计算质量控制（ICQC）开发了一种突破性的机器，用于执行质量控制。得益于其新颖的深度智能技术，ICQC 质量控制（QC）机器可以以 $100\\%$ 的准确率自动检测任何现有机器的制造错误，无论是咖啡机、星际飞船还是量子计算机。\n\nICQC 现在正在建立其工厂以生产这些 QC 机器。与任何其他制造过程一样，生产的机器中会有一部分出现故障，这些需要被发现并丢弃。幸运的是，ICQC 恰好有产品可以检测故障机器！\n\n显然，ICQC 不应该简单地让 QC 机器自检，因为故障机器可能会错误地将自己分类为正常工作。相反，ICQC 将在夜间让每天生产的 $n$ 台机器相互测试。特别是，在夜间的每个小时，每台 QC 机器可以检查另一台 QC 机器，同时被另一台 QC 机器检查。\n\n如果执行检查的机器是正常的，它将正确报告被测试机器是正常还是故障，但如果执行检查的机器是故障的，它可能报告任一结果。如果机器 A 多次用于测试机器 B，它每次都会返回相同的结果，即使机器 A 是故障的。具体的测试计划不需要提前固定，因此第二小时夜间的机器检查安排可以基于第一小时测试的结果进行。\n\nICQC 确信每批 $n$ 台 QC 机器中有严格超过一半的机器正常工作，但夜晚只有 $12$ 小时，因此只能进行少量的测试轮次。你能帮助 ICQC 确定哪些 QC 机器出现故障吗？\n\n例如，考虑下面的示例交互 1。在第四个小时后，每台机器都测试了其他所有机器。对于机器 $1$，只有一台其他机器声称它故障，如果它真的故障，那么至少有 $3$ 台其他机器会声称这一点。对于机器 $4$，只有一台其他机器声称它正常，这意味着机器 $2$ 必定是故障的，因为应该有超过一半的机器正常工作。注意，即使机器 $4$ 是故障的，它在这些特定的测试轮次中仍然恰好产生了正确的响应。", "inputFormat": "## 交互\n\n输入的第一行包含一个整数 $b$ ($1 \\le b \\le 500$)，表示接下来的批次数量。每批是独立的。你应该以交互方式处理每批，这意味着你收到的输入将取决于程序的先前输出。\n\n每批的输入第一行包含一个整数 $n$ ($1 \\le n \\le 100$)，表示该批中的 QC 机器数量。然后交互以轮次进行。在每轮中，你的程序可以通过写一行形式为“$\\texttt{test}$ $x_1\\ x_2\\ \\ldots\\ x_n$”来安排下一小时的测试，表示每台机器 $i$ 应该对机器 $x_i$ 进行测试。如果 $x_i=0$，则机器 $i$ 在该轮中闲置，不执行测试。序列中的所有正数必须是不同的。\n\n写完这一行后，将有一个结果从输入中读取。结果是一行，包含一个长度为 $n$ 的字符串，在位置 $i$ 上有一个 '$\\texttt{1}$' 表示机器 $i$ 认为机器 $x_i$ 正常工作，'$0$' 表示机器 $i$ 认为机器 $x_i$ 故障，和 '-'（破折号）表示机器 $i$ 在该轮中闲置。\n\n当你的程序确定哪些机器故障时，但不晚于 $12$ 轮测试后，它必须写一行形式为“$\\texttt{answer}$ $S$”，其中 $S$ 是一个长度为 $n$ 的二进制字符串，位置 $i$ 上有一个 '$\\texttt{1}$' 表示机器 $i$ 正常工作，'$0$' 表示它故障。\n\n写完答案行后，你的程序应开始处理下一批，读取其数量 $n$。当所有 $b$ 批次处理完毕后，交互结束，程序应退出。\n\n*交互评估注意事项：*\n\n- *评估是非对抗性的，这意味着每台机器测试其他机器的结果是预先选择的，而不是响应你的查询。*\n- *写完后不要忘记刷新输出缓冲区。有关详细信息，请参阅评估说明附录。*\n- *为本地测试提供了一个命令行工具，以及对应于示例交互的输入文件。该工具顶部有注释以解释其使用。*", "outputFormat": "", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8136", "type": "P", "difficulty": 6, "samples": [["3 10 2\n15 1\n2 2\n9 1", "43"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "O2优化", "背包 DP", "ICPC", "bitset", "WF"], "title": "[ICPC 2020 WF] Quests", "background": "ICPC2020 WF I", "description": "To relax before competing in the ICPC World Finals, you have decided to play a\ncomputer game called *Quests*. You have played it a\nnumber of times already, and now you want to achieve a perfect\nplaythrough---to prepare for your perfect playthrough of the finals!\n\nIn the game, you have to complete a number\nof quests, and you earn experience points (XPs) for completing each one. The\ntotal number of XPs you have earned at any time determines your current level. You\nreach a new level for every $v$ XPs that you earn. Formally, your level at\nany time is the largest integer $L$ such that you have at least $L \\cdot v$\nXPs.\n\nEach quest is assigned a number $x$ of XPs and a target\ndifficulty level $d$. If you complete the quest when your level is at least\n$d$, you earn $x$ XPs. However, if you complete the quest when your level is\nless than $d$, you will earn $c \\cdot x$ XPs. The constant  $c$ is an XP multiplier\nthat results in a bonus for completing a\nquest when you are at a lower level than the recommended level $d$.\n\nYou know all the $n$ quests and their respective $x$ and $d$ numbers by heart\n(and you know the numbers $v$ and $c$ as well---you have played this game a lot).\nYou are also skilled enough to\ncomplete any quest, regardless of its target difficulty level and your level.\nYou want to complete all the quests in an order that will allow you\nto earn the largest possible number of XPs.\n\nFor example in the sample input, the maximum XPs you can earn is 43, which\nis done as follows. First complete the second quest (you earn $4$ XPs,\nbecause you are at level $0$, and you completed a quest with target difficulty\nlevel $2$). Then complete the first quest (you earn $30$ XPs, because you are\nstill at level $0$, and the target difficulty level is $1$). With $34$ XPs, you\nare now level $3$. Finally, complete the third quest (for which you earn $9$\nXPs, without the multiplier, since you are already at level $3$).", "inputFormat": "The first line of input contains three integers $n$, $v$, and $c$, where\n$n$ $(1 \\leq n \\leq 2\\,000)$ is the number of quests in the game, $v$\n$(1 \\leq v \\leq 2\\,000)$ is the number of XPs required to reach each level,\nand $c$ $(2 \\leq c \\leq 2\\,000)$ is the XP multiplier for completing a quest\nbefore reaching its target difficulty level.\n\nFollowing that are $n$ lines, each of which contains two integers $x$ and $d$\ndescribing one quest, where $x$ $(1 \\leq x \\leq 2\\,000)$ is the number of XPs\nyou earn for completing that quest if you are at or above its target difficulty\nlevel and $d$ $(1 \\leq d_i \\leq 10^6)$ is the target difficulty level for that\nquest.", "outputFormat": "Output the maximum possible number of XPs you could earn by finishing all the\nquests.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Quests", "background": "ICPC2020 WF I", "description": "To relax before competing in the ICPC World Finals, you have decided to play a\ncomputer game called *Quests*. You have played it a\nnumber of times already, and now you want to achieve a perfect\nplaythrough---to prepare for your perfect playthrough of the finals!\n\nIn the game, you have to complete a number\nof quests, and you earn experience points (XPs) for completing each one. The\ntotal number of XPs you have earned at any time determines your current level. You\nreach a new level for every $v$ XPs that you earn. Formally, your level at\nany time is the largest integer $L$ such that you have at least $L \\cdot v$\nXPs.\n\nEach quest is assigned a number $x$ of XPs and a target\ndifficulty level $d$. If you complete the quest when your level is at least\n$d$, you earn $x$ XPs. However, if you complete the quest when your level is\nless than $d$, you will earn $c \\cdot x$ XPs. The constant  $c$ is an XP multiplier\nthat results in a bonus for completing a\nquest when you are at a lower level than the recommended level $d$.\n\nYou know all the $n$ quests and their respective $x$ and $d$ numbers by heart\n(and you know the numbers $v$ and $c$ as well---you have played this game a lot).\nYou are also skilled enough to\ncomplete any quest, regardless of its target difficulty level and your level.\nYou want to complete all the quests in an order that will allow you\nto earn the largest possible number of XPs.\n\nFor example in the sample input, the maximum XPs you can earn is 43, which\nis done as follows. First complete the second quest (you earn $4$ XPs,\nbecause you are at level $0$, and you completed a quest with target difficulty\nlevel $2$). Then complete the first quest (you earn $30$ XPs, because you are\nstill at level $0$, and the target difficulty level is $1$). With $34$ XPs, you\nare now level $3$. Finally, complete the third quest (for which you earn $9$\nXPs, without the multiplier, since you are already at level $3$).", "inputFormat": "The first line of input contains three integers $n$, $v$, and $c$, where\n$n$ $(1 \\leq n \\leq 2\\,000)$ is the number of quests in the game, $v$\n$(1 \\leq v \\leq 2\\,000)$ is the number of XPs required to reach each level,\nand $c$ $(2 \\leq c \\leq 2\\,000)$ is the XP multiplier for completing a quest\nbefore reaching its target difficulty level.\n\nFollowing that are $n$ lines, each of which contains two integers $x$ and $d$\ndescribing one quest, where $x$ $(1 \\leq x \\leq 2\\,000)$ is the number of XPs\nyou earn for completing that quest if you are at or above its target difficulty\nlevel and $d$ $(1 \\leq d_i \\leq 10^6)$ is the target difficulty level for that\nquest.", "outputFormat": "Output the maximum possible number of XPs you could earn by finishing all the\nquests.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Quests", "background": "", "description": "为了在参加 ICPC 世界总决赛前放松一下，你决定玩一款名为 *Quests* 的电脑游戏。你已经玩过很多次了，现在你想要实现完美通关——为总决赛的完美表现做准备！\n\n在游戏中，你需要完成多个任务，并且每完成一个任务都会获得经验值（XP）。你在任何时候获得的总 XP 数量决定了你的当前等级。每当你获得 $v$ 个 XP 时，你就能达到一个新的等级。正式地说，你在任何时候的等级是最大的整数 $L$，使得你至少有 $L \\cdot v$ 个 XP。\n\n每个任务都有一个 XP 数量 $x$ 和一个目标难度等级 $d$。如果你在等级至少为 $d$ 时完成任务，你将获得 $x$ 个 XP。然而，如果你在等级低于 $d$ 时完成任务，你将获得 $c \\cdot x$ 个 XP。常数 $c$ 是一个 XP 倍增器，当你在低于推荐等级 $d$ 时完成任务时会获得奖励。\n\n你已经熟记所有 $n$ 个任务及其各自的 $x$ 和 $d$ 数字（你也知道数字 $v$ 和 $c$——你玩这个游戏很多次了）。你也有足够的技巧来完成任何任务，无论其目标难度等级和你的等级如何。你想要以一种能让你获得最大可能 XP 的顺序完成所有任务。\n\n例如，在示例输入中，你能获得的最大 XP 是 43，具体如下。首先完成第二个任务（你获得 4 个 XP，因为你在等级 0 时完成了一个目标难度等级为 2 的任务）。然后完成第一个任务（你获得 30 个 XP，因为你仍然在等级 0，目标难度等级为 1）。有了 34 个 XP，你现在是等级 3。最后，完成第三个任务（你获得 9 个 XP，没有倍增器，因为你已经在等级 3）。", "inputFormat": "输入的第一行包含三个整数 $n$、$v$ 和 $c$，其中 $n$ $(1 \\leq n \\leq 2\\,000)$ 是游戏中的任务数量，$v$ $(1 \\leq v \\leq 2\\,000)$ 是达到每个等级所需的 XP 数量，$c$ $(2 \\leq c \\leq 2\\,000)$ 是在达到目标难度等级之前完成任务的 XP 倍增器。\n\n接下来是 $n$ 行，每行包含两个整数 $x$ 和 $d$ 描述一个任务，其中 $x$ $(1 \\leq x \\leq 2\\,000)$ 是如果你在或高于其目标难度等级时完成该任务所获得的 XP 数量，$d$ $(1 \\leq d_i \\leq 10^6)$ 是该任务的目标难度等级。", "outputFormat": "输出通过完成所有任务可以获得的最大可能 XP 数量。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8137", "type": "P", "difficulty": 5, "samples": [["7\n1 4 2\n2 4 3\n3 4 1\n4 5 1\n5 6 2\n5 7 4", "15"], ["4\n1 2 1\n2 3 2\n3 4 3", "6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] 'S No Problem", "background": "ICPC2020 WF J", "description": "The Yllihc Engineering and Technological Institute (YETI),\nlocated in upper northern Snowblovia, has two problems: snow\nand money. Specifically, they have too much of the former and not\nenough of the latter. Every winter (and fall and spring for that matter)\nthe campus is covered with blankets of snow. The maintenance staff\nmust clear all the sidewalks connecting the campus buildings, but they\nhave only two snow blowers and have been told in no uncertain\nterms that they cannot expect to obtain any more in the near future.\n\nTo preserve the longevity of these two precious machines,\nthe staff has decided on the following snow removal procedure.\nEach machine is assigned a fixed route connecting two of the\nbuildings on campus. Whenever snow must be removed, each snow blower\nis taken from the building at one end of its route and used to clear snow,\nending up in the building at the other end of its route, where it is\nstored until the next snowfall.\nThe reverse movement will occur during the next snow removal event---each\nmachine will trace its assigned route in the opposite direction.\nThis process cycles throughout the eleven-month snow season.\nNote that a route might involve doubling back over sidewalks that\nhave already been cleared. Also, it is\npossible that the same building might be an endpoint for both\nsnow blower routes.\n\nThe campus sidewalks are laid out in the form of a tree.\nTo run the machines as little as possible, the staff wants\nto minimize the total distance\nthat the snow blowers must travel as they are guided along their routes.\nFigure J.1 shows an optimal\nsolution for the sidewalk layout of the first sample input.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xu2fv7az.png)\n\nThe YETI maintenance crew would ask the Computer Science Department\nat YETI to figure this out, but they were wiped out in the Great\nBlizzard of '$06$, so they have come to you for help.", "inputFormat": "The first line of input contains an integer $n$ ($4\\leq n\\leq 100\\,000$),\nthe number of buildings on the YETI campus. Buildings are numbered from $1$\nto $n$.\nEach of the remaining $n-1$ lines contains three integers\n$a$, $b$, and $d$\nindicating that a two-way sidewalk exists between buildings $a$ and $b$\n($1 \\leq a, b \\leq n$; $a\\ne b$) of length $d$ ($1\\leq d\\leq 500$).", "outputFormat": "Output the minimum total distance the two machines must travel in\nany snow removal event.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] 'S No Problem", "background": "ICPC2020 WF J", "description": "The Yllihc Engineering and Technological Institute (YETI),\nlocated in upper northern Snowblovia, has two problems: snow\nand money. Specifically, they have too much of the former and not\nenough of the latter. Every winter (and fall and spring for that matter)\nthe campus is covered with blankets of snow. The maintenance staff\nmust clear all the sidewalks connecting the campus buildings, but they\nhave only two snow blowers and have been told in no uncertain\nterms that they cannot expect to obtain any more in the near future.\n\nTo preserve the longevity of these two precious machines,\nthe staff has decided on the following snow removal procedure.\nEach machine is assigned a fixed route connecting two of the\nbuildings on campus. Whenever snow must be removed, each snow blower\nis taken from the building at one end of its route and used to clear snow,\nending up in the building at the other end of its route, where it is\nstored until the next snowfall.\nThe reverse movement will occur during the next snow removal event---each\nmachine will trace its assigned route in the opposite direction.\nThis process cycles throughout the eleven-month snow season.\nNote that a route might involve doubling back over sidewalks that\nhave already been cleared. Also, it is\npossible that the same building might be an endpoint for both\nsnow blower routes.\n\nThe campus sidewalks are laid out in the form of a tree.\nTo run the machines as little as possible, the staff wants\nto minimize the total distance\nthat the snow blowers must travel as they are guided along their routes.\nFigure J.1 shows an optimal\nsolution for the sidewalk layout of the first sample input.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xu2fv7az.png)\n\nThe YETI maintenance crew would ask the Computer Science Department\nat YETI to figure this out, but they were wiped out in the Great\nBlizzard of '$06$, so they have come to you for help.", "inputFormat": "The first line of input contains an integer $n$ ($4\\leq n\\leq 100\\,000$),\nthe number of buildings on the YETI campus. Buildings are numbered from $1$\nto $n$.\nEach of the remaining $n-1$ lines contains three integers\n$a$, $b$, and $d$\nindicating that a two-way sidewalk exists between buildings $a$ and $b$\n($1 \\leq a, b \\leq n$; $a\\ne b$) of length $d$ ($1\\leq d\\leq 500$).", "outputFormat": "Output the minimum total distance the two machines must travel in\nany snow removal event.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] 'S No Problem", "background": "", "description": "位于斯诺布洛维亚北部的 某·工程技术学院 (YETI) 面临两个问题：雪和金钱。具体来说，他们有太多的前者而没有足够的后者。每年冬天（以及秋天和春天），校园都覆盖着雪毯。维护人员必须清理连接校园建筑的所有人行道，但他们只有两台吹雪机，并且已经明确告知他们在不久的将来不能再获得更多。\n\n为了保持这两台珍贵机器的使用寿命，工作人员决定采用以下除雪程序。每台机器都被分配了一条连接校园内两座建筑物的固定路线。每当必须除雪时，每台吹雪机都会从其路线一端的建筑物中取出并用于清除积雪，最终进入其路线另一端的建筑物中，并存放在那里直到下一次降雪。在下一次除雪活动期间将发生反向运动——每台机器将沿相反方向追踪其分配的路线。这个过程在整个 1 个月的雪季循环。请注意，路线可能涉及翻过已清理的人行道。此外，同一建筑物可能是两条吹雪机路线的终点。\n\n校园人行道以树的形式布置。为了尽可能少地运行机器，工作人员希望尽量减少吹雪机在沿路线引导时必须行驶的总距离。图 J.1 显示了第一个样本输入的人行道布局的最佳解决方案。\n\nYETI 维护人员会要求 YETI 的计算机科学系解决这个问题，但他们在 06 年的大暴雪中失败了，所以他们来找你帮忙。", "inputFormat": "输入的第一行包含一个整数 n(4≤n≤100000)，即 YETI 校园内的建筑物数量。 建筑物的编号从 1 到 n。其余n−1 行中的每一行包含三个整数 a、b和d，表示建筑物 a和 b之间存在双向人行道 (1≤a,b≤n) 长度为 d(1≤d≤500)。", "outputFormat": "输出两台机器在任何除雪事件中必须行驶的最小总距离。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8138", "type": "P", "difficulty": 7, "samples": [["9 2\n1 1 1 7 7 7\n0 0 0 3 3 3\n5 0 0 8 3 3\n0 5 0 3 8 3\n0 0 5 3 3 8\n5 5 0 8 8 3\n5 0 5 8 3 8\n0 5 5 3 8 8\n5 5 5 8 8 8\n0 1 0 z- x+\n3 5 1 z- y+", "44"], ["1 3\n0 0 0 1 1 1\n0 0 0 x+ z+\n0 0 0 y+ x+\n0 0 0 z- y+", "ok"], ["1 2\n0 0 0 2 1 1\n0 0 0 y+ x+\n1 0 0 y+ x-", "0"]], "limits": {"time": [14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500, 14500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Space Walls", "background": "ICPC2020 WF K", "description": "Place-Y Technology Corp. plans to launch a new space station soon. The company\nCEO is known for being obsessed with perfection. For example, he insists that all\nthe outer surfaces of the space station are regularly polished and cleaned of\nwhat he calls ``space debris,'' mainly for the station to appear good in photos.\nThe engineering team tried but failed to convince the CEO that this was not needed. So instead they\ndeveloped an innovative technology to maintain the surfaces while minimizing human\noperations outside the station. The maintenance is performed by several\nsmall robots moving over the space station surface, just like robotic\nvacuum cleaners. Before their first flight, Place-Y needs to assess the risks of\ncollision during the operation of the robots. And this is exactly where you step\nin.\n\nFor the purposes of this problem, we model the space station as a collection of\naxis-aligned unit cubes (not necessarily connected). Each robot starts at time $t=0$ in the center of an exposed face\nof one of the station's unit cubes (that is, a face which is not shared by a second station\ncube). The robot is oriented in one of the four directions parallel to an edge of the cube face.\nEvery time unit, the robot moves straight ahead to another cube face, possibly\npivoting $90$ degrees across the space station edges so that it always maintains\ncontact with the station.  Note that if two cubes share an edge, the robot cannot\nslip between them (there is no gap).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sh28cno8.png)\n\nGiven the layout of the station and starting\npositions of all the cleaning robots, determine the time of the earliest collision (if any).  The time a collision occurs is either the time unit when two or more robots are on the interior of the same cube\nface or the time unit when two robots attempt to swap locations (see Sample Input 3 for the\nlatter case).", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$\n($1 \\le n \\le 100$) is the number of regions describing the space station shape,\nand $k$ ($0 \\le k \\le 100$) is the number of robots on the surface.\n\nEach of the following $n$ lines contains six integer coordinates $x_1$, $y_1$, $z_1$,\n$x_2$, $y_2$, and $z_2$ ($0 \\le x_1 < x_2 \\le 10^6$, $0 \\le y_1 < y_2 \\le 10^6$,\n$0 \\le z_1 < z_2 \\le 10^6$) describing one region and denoting that all the points\n$x,y,z$ satisfying $x_1 \\le x \\le x_2$, $y_1 \\le y \\le y_2$,\n$z_1 \\le z \\le z_2$ are part of the space station. Note that some\nunit cubes may be included in more than one region.\n\nThen follow $k$ lines, each describing the starting position of one robot.  Such\na line contains three coordinates $x$, $y$, and $z$, and two directions $\\vec{f}$\nand $\\vec{d}$. The coordinates specify that the robot starts at a face of the\nunit cube $(x,y,z) - (x+1,y+1,z+1)$. The particular face is determined by\n$\\vec{f}$ and the initial direction of movement is determined by $\\vec{d}$.\nBoth $\\vec{f}$ and $\\vec{d}$ are specified by one of the six strings $\\tt x+$, $\\tt x-$, $\\tt y+$,\n$\\tt y-$, $\\tt z+$, or $\\tt z-$, where $\\tt x+$ designates the positive direction\nof the x-axis $(1,0,0)$, and so on. The axis letter in $\\vec{f}$ will be different\nfrom the axis letter in $\\vec{d}$. It is guaranteed that the starting cube\nbelongs to the space station and the given face is an exposed face.", "outputFormat": "Output the time of the first collision. If there will never be a collision,\noutput $\\tt ok$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Space Walls", "background": "ICPC2020 WF K", "description": "Place-Y Technology Corp. plans to launch a new space station soon. The company\nCEO is known for being obsessed with perfection. For example, he insists that all\nthe outer surfaces of the space station are regularly polished and cleaned of\nwhat he calls ``space debris,'' mainly for the station to appear good in photos.\nThe engineering team tried but failed to convince the CEO that this was not needed. So instead they\ndeveloped an innovative technology to maintain the surfaces while minimizing human\noperations outside the station. The maintenance is performed by several\nsmall robots moving over the space station surface, just like robotic\nvacuum cleaners. Before their first flight, Place-Y needs to assess the risks of\ncollision during the operation of the robots. And this is exactly where you step\nin.\n\nFor the purposes of this problem, we model the space station as a collection of\naxis-aligned unit cubes (not necessarily connected). Each robot starts at time $t=0$ in the center of an exposed face\nof one of the station's unit cubes (that is, a face which is not shared by a second station\ncube). The robot is oriented in one of the four directions parallel to an edge of the cube face.\nEvery time unit, the robot moves straight ahead to another cube face, possibly\npivoting $90$ degrees across the space station edges so that it always maintains\ncontact with the station.  Note that if two cubes share an edge, the robot cannot\nslip between them (there is no gap).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sh28cno8.png)\n\nGiven the layout of the station and starting\npositions of all the cleaning robots, determine the time of the earliest collision (if any).  The time a collision occurs is either the time unit when two or more robots are on the interior of the same cube\nface or the time unit when two robots attempt to swap locations (see Sample Input 3 for the\nlatter case).", "inputFormat": "The first line of input contains two integers $n$ and $k$, where $n$\n($1 \\le n \\le 100$) is the number of regions describing the space station shape,\nand $k$ ($0 \\le k \\le 100$) is the number of robots on the surface.\n\nEach of the following $n$ lines contains six integer coordinates $x_1$, $y_1$, $z_1$,\n$x_2$, $y_2$, and $z_2$ ($0 \\le x_1 < x_2 \\le 10^6$, $0 \\le y_1 < y_2 \\le 10^6$,\n$0 \\le z_1 < z_2 \\le 10^6$) describing one region and denoting that all the points\n$x,y,z$ satisfying $x_1 \\le x \\le x_2$, $y_1 \\le y \\le y_2$,\n$z_1 \\le z \\le z_2$ are part of the space station. Note that some\nunit cubes may be included in more than one region.\n\nThen follow $k$ lines, each describing the starting position of one robot.  Such\na line contains three coordinates $x$, $y$, and $z$, and two directions $\\vec{f}$\nand $\\vec{d}$. The coordinates specify that the robot starts at a face of the\nunit cube $(x,y,z) - (x+1,y+1,z+1)$. The particular face is determined by\n$\\vec{f}$ and the initial direction of movement is determined by $\\vec{d}$.\nBoth $\\vec{f}$ and $\\vec{d}$ are specified by one of the six strings $\\tt x+$, $\\tt x-$, $\\tt y+$,\n$\\tt y-$, $\\tt z+$, or $\\tt z-$, where $\\tt x+$ designates the positive direction\nof the x-axis $(1,0,0)$, and so on. The axis letter in $\\vec{f}$ will be different\nfrom the axis letter in $\\vec{d}$. It is guaranteed that the starting cube\nbelongs to the space station and the given face is an exposed face.", "outputFormat": "Output the time of the first collision. If there will never be a collision,\noutput $\\tt ok$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Space Walls", "background": "", "description": "", "inputFormat": "每个机器人每次启动一开始t=0\n每次机器人到另一个面，可能会旋转90°两个立方体共享一条边时，机器人无法在之间走动。\n\n第一行输入n,k,n是空间站形状的区域数,k是机器人的数量。\n\n接下来n行6个数据分别是：($0 \\le x_1 < x_2 \\le 10^6$, $0 \\le y_1 < y_2 \\le 10^6$,\n$0 \\le z_1 < z_2 \\le 10^6$) \n\n是一个区域中的所有点。满足$x_1 \\le x \\le x_2$, $y_1 \\le y \\le y_2$,\n$z_1 \\le z \\le z_2$\n请注意，一些立方体可能包含在多个区域中。\n\n接下来k行，每一行代表机器人的位置。有x,y,z以及两个方向f,d,指定面由f确定,初始移动方向由d确定.六种操作x+,x-,y+,y-,z+,z-.\nx+表示（1,0,0）的方向，依此类推。f不等于d.\n\n保证起始立方体属于空间站，并且给定的初始面是外面。", "outputFormat": "输出第一次碰撞的时间。如果永远不会发生冲突，则输出ok", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8139", "type": "P", "difficulty": 7, "samples": [["2 2 1 2\n0.05 0.05\n0.05 0.05\n1 1 1\n2 2 1 1 2", "0.75 0.25\n0.5 0.5 0"], ["3 4 3 4\n0.02 0.04 0.06\n0.005 0.07 0.035 0.09\n1 3 2\n3 1 4 2 4 3 4\n4 1 2 2 3 3 1 1 4\n8 1 1 1 2 1 3 2 1 2 3 3 1 3 2 3 3", "0.649469772 0.350530228\n0.219607636 0.527423751 0.237646792 0.015321822\n0.267615440 0.516222318 0.201611812 0.014550429 0\n0.054047935 0.364731941 0.461044157 0.120175967 0 0 0 0 0"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "Special Judge", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Sweep Stakes", "background": "ICPC2020 WF L", "description": "You may have already won! In fact, you did already win! You won your very own\nisland, in the deepest reaches of the unexplored ocean! Well, mostly unexplored.\nAs it happens, there was a small military base there before you, and when they\npacked up and flew out they left behind an assortment of scraps, munitions,\ntunnels, $\\ldots$ and unexploded defensive ordnance. That's right: You now possess\nyour very own minefield.\n\nThe minefield consists of an $m\\times n$ grid, with any square of the grid holding\n0 or 1 mines. Fortunately, you were able to recover the engineers' plans from when\nthey deployed the mines. Unfortunately, the exact locations of the mines were never\nwritten down: the engineers had a preselected independent probability of deploying\na mine in each square. However, you do know how many mines were placed in total.\n\nYou would like to estimate how safe various parts of your island are. Write a\nprogram to compute the probability of mine counts over various subsets of the\nminefield.", "inputFormat": "The first line of input contains four integers $m$, $n$, $t$, and $q$, where $m$\nand $n$ ($1 \\leq m,n \\leq 500$) are the dimensions of the minefield, $t$ \n($0 \\leq t \\leq mn$) is the total number of mines, and $q$ ($0 \\leq q \\leq 500$)\nis the number of queries. The second line contains $m$ real numbers \n$p_1, p_2, \\ldots, p_m$ ($0 \\leq p_i \\leq 0.1$ for all $i$, with at most six digits\nafter the decimal point specified), and the third line\ncontains $n$ real numbers $q_1, q_2, \\ldots, q_n$ ($0 \\leq q_j \\leq 0.1$ for all\n$j$, with at most six digits after the decimal point specified).\nThe preselected probability of the engineers placing a mine on square $(i, j)$\nis $p_i + q_j$. All choices of whether to place a mine on a given square were made\nindependently, and the value of $t$ is chosen so that the probability of deploying\nexactly $t$ mines is at least $10^{-5}$. \n\nEach of the remaining $q$ lines describes a single query. Each of those lines\nbegins with an integer $s$ ($0 \\leq s \\leq 500$), followed by $s$ pairs of integers\n$i$ and $j$ ($1 \\leq i \\leq m$, $1 \\leq j \\leq n$), which are the coordinates of $s$\ndistinct squares in the grid.", "outputFormat": "For each query with $s$ squares, output $s+1$ real numbers, which are the\nprobabilities of the $s$ given squares containing $0, 1, \\ldots, s$ mines. Your\nanswer should have an absolute error of at most $10^{-6}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Sweep Stakes", "background": "ICPC2020 WF L", "description": "You may have already won! In fact, you did already win! You won your very own\nisland, in the deepest reaches of the unexplored ocean! Well, mostly unexplored.\nAs it happens, there was a small military base there before you, and when they\npacked up and flew out they left behind an assortment of scraps, munitions,\ntunnels, $\\ldots$ and unexploded defensive ordnance. That's right: You now possess\nyour very own minefield.\n\nThe minefield consists of an $m\\times n$ grid, with any square of the grid holding\n0 or 1 mines. Fortunately, you were able to recover the engineers' plans from when\nthey deployed the mines. Unfortunately, the exact locations of the mines were never\nwritten down: the engineers had a preselected independent probability of deploying\na mine in each square. However, you do know how many mines were placed in total.\n\nYou would like to estimate how safe various parts of your island are. Write a\nprogram to compute the probability of mine counts over various subsets of the\nminefield.", "inputFormat": "The first line of input contains four integers $m$, $n$, $t$, and $q$, where $m$\nand $n$ ($1 \\leq m,n \\leq 500$) are the dimensions of the minefield, $t$ \n($0 \\leq t \\leq mn$) is the total number of mines, and $q$ ($0 \\leq q \\leq 500$)\nis the number of queries. The second line contains $m$ real numbers \n$p_1, p_2, \\ldots, p_m$ ($0 \\leq p_i \\leq 0.1$ for all $i$, with at most six digits\nafter the decimal point specified), and the third line\ncontains $n$ real numbers $q_1, q_2, \\ldots, q_n$ ($0 \\leq q_j \\leq 0.1$ for all\n$j$, with at most six digits after the decimal point specified).\nThe preselected probability of the engineers placing a mine on square $(i, j)$\nis $p_i + q_j$. All choices of whether to place a mine on a given square were made\nindependently, and the value of $t$ is chosen so that the probability of deploying\nexactly $t$ mines is at least $10^{-5}$. \n\nEach of the remaining $q$ lines describes a single query. Each of those lines\nbegins with an integer $s$ ($0 \\leq s \\leq 500$), followed by $s$ pairs of integers\n$i$ and $j$ ($1 \\leq i \\leq m$, $1 \\leq j \\leq n$), which are the coordinates of $s$\ndistinct squares in the grid.", "outputFormat": "For each query with $s$ squares, output $s+1$ real numbers, which are the\nprobabilities of the $s$ given squares containing $0, 1, \\ldots, s$ mines. Your\nanswer should have an absolute error of at most $10^{-6}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Sweep Stakes", "background": "", "description": "你可能已经赢了！事实上，你确实赢了！你赢得了属于你自己的岛屿，位于未被探索的海洋最深处！嗯，几乎未被探索。事实是，在你之前那里有一个小型军事基地，当他们打包飞走时，留下了一些废料、弹药、隧道，等等，当然还有未爆炸的防御军火。没错：你现在拥有了你自己的雷区。\n\n雷区由一个 $m \\times n$ 的网格组成，网格的任意方格上可能有 0 或 1 个地雷。幸运的是，你找到了工程师们布雷时的计划。不幸的是，地雷的具体位置从未被记录下来：工程师们在每个方格上布雷的概率是预先独立选择的。然而，你知道总共放置了多少个地雷。\n\n你想估计你岛屿各个部分的安全性。编写一个程序来计算雷区各个子集上的地雷数量的概率。", "inputFormat": "输入的第一行包含四个整数 $m$、$n$、$t$ 和 $q$，其中 $m$ 和 $n$（$1 \\leq m,n \\leq 500$）是雷区的维度，$t$（$0 \\leq t \\leq mn$）是地雷的总数，$q$（$0 \\leq q \\leq 500$）是查询的数量。第二行包含 $m$ 个实数 $p_1, p_2, \\ldots, p_m$（对于所有 $i$，$0 \\leq p_i \\leq 0.1$，小数点后最多六位），第三行包含 $n$ 个实数 $q_1, q_2, \\ldots, q_n$（对于所有 $j$，$0 \\leq q_j \\leq 0.1$，小数点后最多六位）。工程师在方格 $(i, j)$ 上放置地雷的预选概率是 $p_i + q_j$。是否在给定方格上放置地雷的选择是独立进行的，并且 $t$ 的值是选择的，使得恰好布置 $t$ 个地雷的概率至少为 $10^{-5}$。\n\n接下来的每一行描述一个查询。每行以一个整数 $s$（$0 \\leq s \\leq 500$）开始，后面是 $s$ 对整数 $i$ 和 $j$（$1 \\leq i \\leq m$，$1 \\leq j \\leq n$），它们是网格中 $s$ 个不同方格的坐标。", "outputFormat": "对于每个包含 $s$ 个方格的查询，输出 $s+1$ 个实数，表示 $s$ 个给定方格中包含 $0, 1, \\ldots, s$ 个地雷的概率。你的答案的绝对误差应不超过 $10^{-6}$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8140", "type": "P", "difficulty": 6, "samples": [["57 9 1000", "2"], ["57 4 40000", "3"], ["57 4 39000", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Trailing Digits", "background": "ICPC2020 WF M", "description": "A large shipment of doodads has just arrived, and each doodad has a suggested retail price of $b$ cents. You've noticed that consumers are much more likely to purchase goods when most of the trailing digits are the same. For example, items are more likely to be priced at $99$ cents rather than $57$ cents. So to make your goods more appealing, you've decided to sell your goods in bundles. To make a bundle, you choose a positive integer $k$, and sell $k$ doodads for $k \\times b$ cents. With an appropriate choice of $k$ you can have a more pleasing price. For example, selling $57$-cent doodads in bundles of size $7$ means that each bundle sells for $399$ cents, which has two trailing $9$s, rather than no trailing $9$s of $57$. This idea of trailing $9$s can be generalized to any other trailing digit: bundles of $692$ $57$-cent doodads sell for $39\\,444$ cents (three trailing $4$s) and bundles of one million doodads sell for $57\\,000\\,000$ cents (six trailing $0$s).\n\nAfter a little thought, you realize that you do not want to make your bundles too large---not only can the price be excessive, but who really needs several million doodads? For any type of doodad, your marketing department has a maximum bundle price of $a$.\n\nGiven the price of a doodad, the desired trailing digit, and the maximum price of a bundle, write a program that optimizes the trailing digits.", "inputFormat": "Input consists of a single line containing three integers $b$, $d$, and $a$, where $b$ ($1 \\leq b < 10^{6}$) is the price of a doodad in cents, $d$ ($0 \\leq d \\leq 9$) is the desired trailing digit, and $a$ ($b \\leq a < 10^{10\\,000}$) is the maximum price of a bundle.", "outputFormat": "Output the maximum number of consecutive occurrences of $d$ that can appear at the end of a bundle price, given that the price of the bundle cannot exceed $a$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Trailing Digits", "background": "ICPC2020 WF M", "description": "A large shipment of doodads has just arrived, and each doodad has a suggested retail price of $b$ cents. You've noticed that consumers are much more likely to purchase goods when most of the trailing digits are the same. For example, items are more likely to be priced at $99$ cents rather than $57$ cents. So to make your goods more appealing, you've decided to sell your goods in bundles. To make a bundle, you choose a positive integer $k$, and sell $k$ doodads for $k \\times b$ cents. With an appropriate choice of $k$ you can have a more pleasing price. For example, selling $57$-cent doodads in bundles of size $7$ means that each bundle sells for $399$ cents, which has two trailing $9$s, rather than no trailing $9$s of $57$. This idea of trailing $9$s can be generalized to any other trailing digit: bundles of $692$ $57$-cent doodads sell for $39\\,444$ cents (three trailing $4$s) and bundles of one million doodads sell for $57\\,000\\,000$ cents (six trailing $0$s).\n\nAfter a little thought, you realize that you do not want to make your bundles too large---not only can the price be excessive, but who really needs several million doodads? For any type of doodad, your marketing department has a maximum bundle price of $a$.\n\nGiven the price of a doodad, the desired trailing digit, and the maximum price of a bundle, write a program that optimizes the trailing digits.", "inputFormat": "Input consists of a single line containing three integers $b$, $d$, and $a$, where $b$ ($1 \\leq b < 10^{6}$) is the price of a doodad in cents, $d$ ($0 \\leq d \\leq 9$) is the desired trailing digit, and $a$ ($b \\leq a < 10^{10\\,000}$) is the maximum price of a bundle.", "outputFormat": "Output the maximum number of consecutive occurrences of $d$ that can appear at the end of a bundle price, given that the price of the bundle cannot exceed $a$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Trailing Digits", "background": "", "description": "有一批货，每个价值 $b$ 元，可以把 $n$ 个货打包出售，价格是 $b \\times n$ 元（前提是$b \\times n\\le a$），使末尾含有尽可能多的数字 $d$ ，求最多的 $d$ 数量。", "inputFormat": "一行三个整数，$b$ , $d$ 和 $a$。", "outputFormat": "一个整数，最多的 $d$ 数量。", "hint": "对于全部数据，有 $1 \\le b < 10^6$ , $0 \\le d \\le 9$ , $b \\le a < 10^{10000}$", "locale": "zh-CN"}}}
{"pid": "P8141", "type": "P", "difficulty": 7, "samples": [["2 3\n0 0 2.5\n3 0 2.5\n1.5 0.5 2.5", "1.5 -2"], ["2 2\n0 0 2\n4 -4 6", "1.414213562373 1.414213562373"], ["4 3\n0 1 2 3 2\n1 2 -1 7 5\n1 0.3 3.4 1.2 3.3", "1 2 3 4"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "O2优化", "线性代数", "ICPC", "WF"], "title": "[ICPC 2020 WF] What's Our Vector, Victor?", "background": "ICPC2020 WF N", "description": "Vector embeddings are a common tool in machine learning systems.\nComplex real-world concepts (for instance, words in a dictionary) are mapped onto vectors of real numbers.\nIf embeddings are trained properly, related concepts remain close together in the vector space, so questions like \"are these two words synonyms?\" can be reduced to straightforward mathematical tests.\n\nYou have been hired by Ye Olde Ice Cream Shoppe to create an embedding model for flavors, so that when they are out of an ice cream flavor they can recommend related flavors to customers.\nAfter training your embedding on six cloud datacenters for four months, you finally had the perfect flavor model!\nYou were ready to revolutionize the ice cream industry on your street and, dare we say it, your neighborhood!\nWell, until you accidentally dripped some free ice cream on your keyboard and deleted half the data.\nThe Shoppe cannot afford the 30 billion rubles needed to retrain the model, so you are in trouble.\n\nFortunately, you still have various training results lying around.\nFor a given deleted vector, the training data tells you how close it was to some known flavor vectors.\nThe closeness of vectors $A$ and $B$ is just the standard Euclidean distance metric (that is, the length of the vector $A - B$).\nWrite a tool that reconstructs embeddings which are consistent with the training results.", "inputFormat": "The first line contains two integers $d$ and $n$, where $d$ ($1 \\leq d \\leq 500$) is the number of dimensions of the\nvectors, and $n$ ($1 \\leq n \\leq 500$) is the number of training results for a deleted embedding vector you want to reconstruct.\nEach of the next $n$ lines describes a training result using $d + 1$ numbers $x_1, \\dots, x_d$ and $e$.\nIn a training result, $x_1, \\dots, x_d$ ($-100 \\leq x_i \\leq 100$) are the coordinates of a known vector, and \n$e$ ($0 \\leq e \\leq 5\\,000$) is the Euclidean distance from that vector to the deleted one.\n\nYour submission will be tested only with the sample inputs given below and inputs generated according to the following procedure.\nFirst, $d$ and $n$ are chosen.\nThen, $n$ input vectors and $1$ output vector, each with dimension $d$, are chosen at random.\nThe $d \\cdot (n + 1)$ coordinates are independent and uniformly distributed in the interval $[-100,100]$.\nNext, the Euclidean distance from each input vector to the output vector is computed.\nFinally, the output vector is discarded.\nCalculations use double-precision floating-point numbers.\nNumbers obtained using this procedure appear in the input with $17$ digits after the decimal point.", "outputFormat": "Output $d$ values, the coordinates of any vector that has the given distance to each training vector with an absolute or relative error of at most $10^{-5}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] What's Our Vector, Victor?", "background": "ICPC2020 WF N", "description": "Vector embeddings are a common tool in machine learning systems.\nComplex real-world concepts (for instance, words in a dictionary) are mapped onto vectors of real numbers.\nIf embeddings are trained properly, related concepts remain close together in the vector space, so questions like \"are these two words synonyms?\" can be reduced to straightforward mathematical tests.\n\nYou have been hired by Ye Olde Ice Cream Shoppe to create an embedding model for flavors, so that when they are out of an ice cream flavor they can recommend related flavors to customers.\nAfter training your embedding on six cloud datacenters for four months, you finally had the perfect flavor model!\nYou were ready to revolutionize the ice cream industry on your street and, dare we say it, your neighborhood!\nWell, until you accidentally dripped some free ice cream on your keyboard and deleted half the data.\nThe Shoppe cannot afford the 30 billion rubles needed to retrain the model, so you are in trouble.\n\nFortunately, you still have various training results lying around.\nFor a given deleted vector, the training data tells you how close it was to some known flavor vectors.\nThe closeness of vectors $A$ and $B$ is just the standard Euclidean distance metric (that is, the length of the vector $A - B$).\nWrite a tool that reconstructs embeddings which are consistent with the training results.", "inputFormat": "The first line contains two integers $d$ and $n$, where $d$ ($1 \\leq d \\leq 500$) is the number of dimensions of the\nvectors, and $n$ ($1 \\leq n \\leq 500$) is the number of training results for a deleted embedding vector you want to reconstruct.\nEach of the next $n$ lines describes a training result using $d + 1$ numbers $x_1, \\dots, x_d$ and $e$.\nIn a training result, $x_1, \\dots, x_d$ ($-100 \\leq x_i \\leq 100$) are the coordinates of a known vector, and \n$e$ ($0 \\leq e \\leq 5\\,000$) is the Euclidean distance from that vector to the deleted one.\n\nYour submission will be tested only with the sample inputs given below and inputs generated according to the following procedure.\nFirst, $d$ and $n$ are chosen.\nThen, $n$ input vectors and $1$ output vector, each with dimension $d$, are chosen at random.\nThe $d \\cdot (n + 1)$ coordinates are independent and uniformly distributed in the interval $[-100,100]$.\nNext, the Euclidean distance from each input vector to the output vector is computed.\nFinally, the output vector is discarded.\nCalculations use double-precision floating-point numbers.\nNumbers obtained using this procedure appear in the input with $17$ digits after the decimal point.", "outputFormat": "Output $d$ values, the coordinates of any vector that has the given distance to each training vector with an absolute or relative error of at most $10^{-5}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] What's Our Vector, Victor?", "background": "", "description": "向量嵌入是机器学习系统中的一种常用工具。现实世界中的某些复杂的概念（例如词典中的单词）通过这种方法可以映射到一个实向量上。如果能让机器正确地训练向量嵌入，由于相关概念在向量空间中保持着紧密的联系，因此像“这两个单词是同义词吗？”这种问题可以简化为简单的数学测试了。\n\n你最近被 Ye Olde 冰淇淋专柜受雇，专门负责为冰淇淋口味创建一个向量嵌入式模型，这样当一种口味的冰淇淋卖完以后，这个嵌入式模型就可以像顾客推荐其它味道相近的冰淇淋。在六个云数据中心里训练了四个月以后，你终于拥有了一个完美的模型，正准备好改变你所在街区的冰淇淋行业，乃至整个街区时，你不小心把一些免费的冰淇淋滴到了键盘上，导致一半的数据被删除。重新训练模型需要花费 300 亿卢布，而专柜显然承受不了这么高的价格，因此你陷入了巨大的麻烦之中。幸运的是，你可以通过剩下的数据来还原出被删除的向量。具体地，对于一个给定的被删除的向量，数据会告诉你它与某些已知的味道向量的接近程度。两个向量 $A,B$ 的接近程度即为这两个向量之间的标准欧几里得距离（即向量 $A-B$ 的长度）。\n\n现在，给定向量所处的空间维度 $d$ 和已知向量个数 $n$，并给定所有 $n$ 个向量的坐标 $(x_{i,1},x_{i,2},\\cdots,x_{i,d})$ 和到同一个被删除的向量的标准欧几里得距离 $e_i$，请你编写一个程序，求出被删除的向量的坐标。", "inputFormat": "第一行输入两个整数 $d,n$，分别表示向量空间的维度和向量个数。  \n随后 $n$ 行，每行 $d+1$ 个实数 $x_{i,1},x_{i,2},\\cdots,x_{i,d},e_i$，其中前 $d$ 个实数描述了第 $i$ 个向量的坐标，第 $d+1$ 个实数则表示第 $i$ 个向量与被删除的向量之间的标准欧几里得距离。\n\n你提交的代码只会在样例输入数据和按以下方式生成的输入数据上进行测试：\n\n- 在区间 $[1,500]$ 中选出两个整数作为 $d,n$。\n- 随机生成 $n$ 个 $d$ 维输入向量和一个 $d$ 维输出向量。这 $d\\cdot(n+1)$ 个坐标在区间 $[-100,100]$ 中独立且均匀地生成。\n- 对于每个输入向量，计算其与输出向量之间的标准欧几里得距离。\n- 忽略输出向量。\n\n所有在上述过程中的计算使用双精度浮点数，用这种方式生成的所有实数均保留到小数点后 $17$ 位。", "outputFormat": "输出 $d$ 个整数，描述被删除向量的坐标。你需要保证你输出的答案和标准答案之间的误差不会超过 $10^{-5}$。\n\n**【样例】**\n\n见『输入输出样例』部分。", "hint": "对于所有数据：\n\n- $1\\leqslant d,n\\leqslant 500$。\n- $-100\\leqslant x_{i,j}\\leqslant 100$。\n- $0\\leqslant e_i\\leqslant 5000$。\n\nTranslated by Eason_AC", "locale": "zh-CN"}}}
{"pid": "P8142", "type": "P", "difficulty": 5, "samples": [["4\n0.0000 0.0000\n30.0000 90.0000\n-45.0000 -30.0000\n30.0000 60.0000\n30.0000 150.0000\n30.0000 120.0000\n0.0000 60.0000\n-45.0000 30.0000", "Same"], ["3\n0.0000 0.0000\n30.0000 0.0000\n30.0000 90.0000\n0.0000 0.0000\n30.0000 0.0000\n30.0000 -90.0000", "Different"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "ICPC", "WF"], "title": "[ICPC 2020 WF] Which Planet is This?!", "background": "ICPC2020 WF O", "description": "It's the year 2521, and interstellar probes have reached planets in distant\nsolar systems. The Interstellar Consortium of Planet Cartographers (ICPC) has\ncreated detailed maps of these planets, and they seem to indicate the\nexistence of alien life! On each map, the ICPC has recorded the locations of\nwhat appear to be alien dwellings.\n\nThe ICPC was planning to release this exciting news to the public, but at the\nlast moment, disaster struck. One of the ICPC's interns deleted all\nmeta-data associated with the maps. So while the maps themselves are safe, the\nICPC does not know which maps belong to which planets. For this, they have come back\nin time to ask for your help. Given two maps, can you determine whether they describe the same planet?\nHopefully, a 500-year head start will be enough time to solve this important\nproblem!\n\nThe planetary maps consist of sets of points on the (spherical) planet\nsurface. They are specified in terms of latitude (the angle north or south of\nthe equator) and longitude (the angle west or east of the noon meridian, which\nis the location of the sun when the map's data was collected). Two maps for\nthe same planet always agree on the latitudes of the points, since the\nplanet's axis does not change. However, the longitudes of the points might\ndiffer, because the planet rotates between measurements.", "inputFormat": "The first line of input contains an integer $n$ ($1 \\le n \\le 400\\,000$), the\nnumber of points in each of the two maps to be compared. Then follow $n$ lines\ndescribing the first map. Each of these lines contains two real numbers $a$\nand $b$, where $a$ ($-90 < a < 90$) is the latitude and $b$ ($-180 < b \\le\n180$) is the longitude. Coordinates are expressed in degrees and have at most\nfour digits after the decimal point. No two points on the map will\nhave the same coordinates. The remaining $n$ lines describe the second map in the same format as the\nfirst.", "outputFormat": "Output $\\texttt{Same}$ if there is a rotation around the planet's axis that transforms one map into\nthe other. Otherwise, output $\\texttt{Different}$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2020 WF] Which Planet is This?!", "background": "ICPC2020 WF O", "description": "It's the year 2521, and interstellar probes have reached planets in distant\nsolar systems. The Interstellar Consortium of Planet Cartographers (ICPC) has\ncreated detailed maps of these planets, and they seem to indicate the\nexistence of alien life! On each map, the ICPC has recorded the locations of\nwhat appear to be alien dwellings.\n\nThe ICPC was planning to release this exciting news to the public, but at the\nlast moment, disaster struck. One of the ICPC's interns deleted all\nmeta-data associated with the maps. So while the maps themselves are safe, the\nICPC does not know which maps belong to which planets. For this, they have come back\nin time to ask for your help. Given two maps, can you determine whether they describe the same planet?\nHopefully, a 500-year head start will be enough time to solve this important\nproblem!\n\nThe planetary maps consist of sets of points on the (spherical) planet\nsurface. They are specified in terms of latitude (the angle north or south of\nthe equator) and longitude (the angle west or east of the noon meridian, which\nis the location of the sun when the map's data was collected). Two maps for\nthe same planet always agree on the latitudes of the points, since the\nplanet's axis does not change. However, the longitudes of the points might\ndiffer, because the planet rotates between measurements.", "inputFormat": "The first line of input contains an integer $n$ ($1 \\le n \\le 400\\,000$), the\nnumber of points in each of the two maps to be compared. Then follow $n$ lines\ndescribing the first map. Each of these lines contains two real numbers $a$\nand $b$, where $a$ ($-90 < a < 90$) is the latitude and $b$ ($-180 < b \\le\n180$) is the longitude. Coordinates are expressed in degrees and have at most\nfour digits after the decimal point. No two points on the map will\nhave the same coordinates. The remaining $n$ lines describe the second map in the same format as the\nfirst.", "outputFormat": "Output $\\texttt{Same}$ if there is a rotation around the planet's axis that transforms one map into\nthe other. Otherwise, output $\\texttt{Different}$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2020 WF] Which Planet is This?!", "background": "", "description": "这是2521年，星际探测器已经到达了遥远的太阳系的行星。星际行星制图者联盟(ICPC)已经绘制了这些行星的详细地图，它们似乎表明外星生命的存在!ICPC在每张地图上都记录了疑似外星人住所的位置。\n\nICPC本打算向公众公布这一激动人心的消息，但在最后一刻，灾难发生了。ICPC的一名实习生删除了所有与地图相关的元数据。因此，虽然地图本身是安全的，但ICPC并不知道哪些地图属于哪些行星。为此，他们及时回来请求您的帮助。给定两幅地图，你能确定它们是否描述的是同一颗行星吗?希望领先500年的时间足以解决这个重要的问题!\n\n行星图由(球面)行星表面的点集组成。它们是根据纬度(赤道南北的夹角)和经度(正午子午线的西半球或东半球的夹角，这是地图数据采集时太阳的位置)来指定的。同一颗行星的两幅地图在纬度上总是一致的，因为行星的轴是不变的。然而，这两个点的经度可能不同，因为行星在两次测量之间会旋转。", "inputFormat": "输入的第一行包含一个整数$n$ ($1 \\le n \\le 400000=4\\times10^5$)，这是要比较的两个地图射中每个地图中的点数。然后跟随描述第一张地图的$n$条线。每条线包含两个实数$a$和$b$，其中$a$($-90<a<90$)是纬度，$b$($-180<a<180$)是经度。坐标以度表示，小数点后最多有四位数字。地图上没有两个点的坐标是相同的。其余的$n$行以与第一个相同的格式描述第二个映射。", "outputFormat": "如果有一种围绕行星轴旋转的方式使得地图1和地图2相同，输出`Same`，否则输出`Different`", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8143", "type": "P", "difficulty": 3, "samples": [["3", "3"], ["114514", "430461019"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "洛谷原创"], "title": "[JRKSJ R4] Stirling", "background": "可能对您无用的提示：\n\n$$f(n)=\\sum_{i=0}^n \\begin{Bmatrix} n\\\\i\\end{Bmatrix}g(i) \\leftrightarrow g(n)=\\sum_{i=0}^n (-1)^{n-i} \\begin{bmatrix} n\\\\i\\end{bmatrix} f(i)$$", "description": "对于 $[1,n]$ 的排列 $p$，定义其“生成图”为：该图有 $n$ 个点，且 $\\forall 1\\le i\\le n$，无向边 $(i,p_i)$ 存在且仅存在这些边。\n\n给定 $n$，求有多少个 $[1,n]$ 的排列满足其生成图恰有偶数个环（自环同样计入）。", "inputFormat": "一个整数 $n$。", "outputFormat": "一个整数，表示答案。答案对 $998244353$ 取模。", "hint": "### 样例 $1$ 解释\n\n这些排列满足条件：\n\n$$\\{1,3,2\\}$$\n$$\\{2,1,3\\}$$\n$$\\{3,2,1\\}$$\n\n### 数据规模\n\n对于 $20\\%$ 的数据，$n\\le 10$。\\\n对于 $50\\%$ 的数据，$n\\le 500$。\\\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R4] Stirling", "background": "可能对您无用的提示：\n\n$$f(n)=\\sum_{i=0}^n \\begin{Bmatrix} n\\\\i\\end{Bmatrix}g(i) \\leftrightarrow g(n)=\\sum_{i=0}^n (-1)^{n-i} \\begin{bmatrix} n\\\\i\\end{bmatrix} f(i)$$", "description": "对于 $[1,n]$ 的排列 $p$，定义其“生成图”为：该图有 $n$ 个点，且 $\\forall 1\\le i\\le n$，无向边 $(i,p_i)$ 存在且仅存在这些边。\n\n给定 $n$，求有多少个 $[1,n]$ 的排列满足其生成图恰有偶数个环（自环同样计入）。", "inputFormat": "一个整数 $n$。", "outputFormat": "一个整数，表示答案。答案对 $998244353$ 取模。", "hint": "### 样例 $1$ 解释\n\n这些排列满足条件：\n\n$$\\{1,3,2\\}$$\n$$\\{2,1,3\\}$$\n$$\\{3,2,1\\}$$\n\n### 数据规模\n\n对于 $20\\%$ 的数据，$n\\le 10$。\\\n对于 $50\\%$ 的数据，$n\\le 500$。\\\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P8144", "type": "P", "difficulty": 4, "samples": [["2\nB 1 3 4 6 8 9\nW 1 3 4 6 8 9", "No\nYes"]], "limits": {"time": [1000, 1000], "memory": [131072, 131072]}, "tags": ["博弈论", "2022", "洛谷原创"], "title": "[JRKSJ R4] BBWWBB", "background": "", "description": "数轴上有 $6$ 个棋子。初始，第 $i$ 个棋子摆在 $a_i$，$a$ 单调递增。\n\n其中第 $1,2,5,6$ 个棋子是黑色的，第 $3,4$ 个棋子是白色的。\n\n游戏过程中，同一个位置上可以同时存在任意个同样颜色的棋子。\n\n有两方：黑方和白方。两方轮流进行操作：\n\n* 选择己方颜色的棋子，向左或向右移动一步。\n* 若准备移动到的位置上存在另一方的棋子且仅存在 $1$ 个，那么可以移动同时将该棋子移除。\n* 若准备移动到的位置上存在多个另一方的棋子，那么不可以移动到这个位置。\n* 当一方不存在可以移动的棋子，该方被判输，游戏结束。\n\n两方的目标都是在己方不输的前提下，尽可能的令对方输。两方均采取最优策略。\n\n给定一方作为先手和每个棋子的位置，请判断，游戏是否会无限进行下去。", "inputFormat": "**本题多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n下面 $T$ 行，每行一组数据。\n\n每组数据首先一个字符 $c$，为 $\\texttt B$ 或者 $\\texttt W$。$c=\\texttt B$ 表示黑方先手，$c=\\texttt W$ 表示白方先手。然后 $6$ 个整数表示 $a_{1\\dots 6}$。", "outputFormat": "对于每组询问，每行回答一个 `Yes` 或 `No`。`Yes` 表示游戏会无限进行下去，`No` 反之。", "hint": "### 数据规模\n\n对于 $15\\%$ 的数据，$c=\\texttt B$。\\\n对于 $100\\%$ 的数据，$T\\le10^5$，$|a_i| \\le 10^9$，$c\\in\\{\\texttt B,\\texttt W\\}$。保证 $a$ 单调递增。\n\n### 样例解释\n\n对于第 $1$ 组数据，其中一种局面变化如下：\n\n```cpp\nB:\n1 4 6 8 9\nB B W B B\nW:\n1 4 5 8 9\nB B W B B\nB:\n1 5 8 9\nB B B B\n```\n对于第 $2$ 组数据，其中一种局面变化如下：\n\n```cpp\nW:\n1 3 6 8 9\nB W W B B\nB:\n1 3 6 8 8\nB W W B B\nW:\n1 3 5 8 8\nB W W B B\nB:\n1 3 5 7 8\nB W W B B\nW:\n1 3 4 7 8\nB W W B B\nB:\n1 3 4 7 7\nB W W B B\nW:\n1 3 3 7 7\nB W W B B\nB:\n1 3 3 6 7\nB W W B B\nW:\n1 2 3 6 7\nB W W B B\nB:\n2 3 6 7\nB W B B\nW:\n2 6 7\nW B B\n```\n此后白方每一步均控制 `W` 往左边走一步。无论黑方如何操作，游戏均可以无限进行下去。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R4] BBWWBB", "background": "", "description": "数轴上有 $6$ 个棋子。初始，第 $i$ 个棋子摆在 $a_i$，$a$ 单调递增。\n\n其中第 $1,2,5,6$ 个棋子是黑色的，第 $3,4$ 个棋子是白色的。\n\n游戏过程中，同一个位置上可以同时存在任意个同样颜色的棋子。\n\n有两方：黑方和白方。两方轮流进行操作：\n\n* 选择己方颜色的棋子，向左或向右移动一步。\n* 若准备移动到的位置上存在另一方的棋子且仅存在 $1$ 个，那么可以移动同时将该棋子移除。\n* 若准备移动到的位置上存在多个另一方的棋子，那么不可以移动到这个位置。\n* 当一方不存在可以移动的棋子，该方被判输，游戏结束。\n\n两方的目标都是在己方不输的前提下，尽可能的令对方输。两方均采取最优策略。\n\n给定一方作为先手和每个棋子的位置，请判断，游戏是否会无限进行下去。", "inputFormat": "**本题多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n下面 $T$ 行，每行一组数据。\n\n每组数据首先一个字符 $c$，为 $\\texttt B$ 或者 $\\texttt W$。$c=\\texttt B$ 表示黑方先手，$c=\\texttt W$ 表示白方先手。然后 $6$ 个整数表示 $a_{1\\dots 6}$。", "outputFormat": "对于每组询问，每行回答一个 `Yes` 或 `No`。`Yes` 表示游戏会无限进行下去，`No` 反之。", "hint": "### 数据规模\n\n对于 $15\\%$ 的数据，$c=\\texttt B$。\\\n对于 $100\\%$ 的数据，$T\\le10^5$，$|a_i| \\le 10^9$，$c\\in\\{\\texttt B,\\texttt W\\}$。保证 $a$ 单调递增。\n\n### 样例解释\n\n对于第 $1$ 组数据，其中一种局面变化如下：\n\n```cpp\nB:\n1 4 6 8 9\nB B W B B\nW:\n1 4 5 8 9\nB B W B B\nB:\n1 5 8 9\nB B B B\n```\n对于第 $2$ 组数据，其中一种局面变化如下：\n\n```cpp\nW:\n1 3 6 8 9\nB W W B B\nB:\n1 3 6 8 8\nB W W B B\nW:\n1 3 5 8 8\nB W W B B\nB:\n1 3 5 7 8\nB W W B B\nW:\n1 3 4 7 8\nB W W B B\nB:\n1 3 4 7 7\nB W W B B\nW:\n1 3 3 7 7\nB W W B B\nB:\n1 3 3 6 7\nB W W B B\nW:\n1 2 3 6 7\nB W W B B\nB:\n2 3 6 7\nB W B B\nW:\n2 6 7\nW B B\n```\n此后白方每一步均控制 `W` 往左边走一步。无论黑方如何操作，游戏均可以无限进行下去。", "locale": "zh-CN"}}}
{"pid": "P8145", "type": "P", "difficulty": 6, "samples": [["10 6 3\n5 7 4 3 6 2 10 8 9 1", "38"], ["2 5 2\n1 2", "8"], ["2 114514 1\n2 1", "171771"], ["3 1000000000000000000 3\n2 1 3", "2065039361"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "动态规划优化"], "title": "[JRKSJ R4] kth", "background": "> 时刻记住自己是人类，不是动物。\n\n在吃玉米番茄炖山羊肉之前，你需要回答一个问题。", "description": "给定 $n,m$，称一个“合法”的整数序列为（设该序列为 $s$）：\n\n* $s$ 长度为 $m$。\n* $\\forall i\\in[1,m],s_i\\in[1,n]$。\n* $\\forall i\\in[2,m],|s_i-s_{i-1}|=1$。\n\n给定一个 $[1,n]$ 的排列 $p$，并定义一个整数序列 $s$ 的“对应序列” $s'$：$s'$ 的长度和 $s$ 相同；设其长度为 $l$，那么 $\\forall i\\in [1,l],s'_i=p_{s_i}$。\n\n再给定 $k$，求所有不同的合法的整数序列的对应序列中，字典序第 $k$ 小的对应序列中所有元素的和对 $2^{32}$ 取模的值。\n\n若不存在第 $k$ 小的对应序列，输出 $-1$。", "inputFormat": "第一行三个整数 $n,m,k$。\\\n第二行 $n$ 个整数表示 $p$。", "outputFormat": "一个整数，表示答案。", "hint": "**本题输入文件较大，请使用恰当的读入方式。**\n\n### 样例解释\n对于样例 $1$，所有不同的合法的整数序列的对应序列中，字典序前三小的分别是：\n\n$$\\{1,9,1,9,1,9\\}$$\n$$\\{1,9,1,9,8,9\\}$$\n$$\\{1,9,1,9,8,10\\}$$\n\n所以答案为 $1+9+1+9+8+10=38$。\n\n对于样例 $2$，所有不同的合法的整数序列的对应序列中，字典序前二小的分别是：\n\n$$\\{1,2,1,2,1\\}$$\n$$\\{2,1,2,1,2\\}$$\n\n所以答案为 $2+1+2+1+2=8$。\n### 数据规模\n| $\\text{Subtask}$ | $n\\le$ | $m\\le$ | $k\\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $10$ | $10^{18}$ | $5$ |\n| $2$ | $70$ | $70$ | $10^{18}$ | $15$ |\n| $3$ | $100$ | $300$ | $10^{18}$ | $20$ |\n| $4$ | $10^4$ | $10^4$ | $10^{18}$ | $15$ |\n| $5$ | $10^4$ | $10^{18}$ | $10^{18}$ | $10$ |\n| $6$ | $10^6$ | $10^{18}$ | $1$ | $5$ |\n| $7$ |$2\\times10^7$| $10^{18}$ | $10^{18}$ | $30$ |\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times10^7$，$2\\le m\\le 10^{18}$，$1\\le k\\le 10^{18}$。\n### 特殊计分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{1,6\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $i\\in\\{2,3,4,5,7\\}$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R4] kth", "background": "> 时刻记住自己是人类，不是动物。\n\n在吃玉米番茄炖山羊肉之前，你需要回答一个问题。", "description": "给定 $n,m$，称一个“合法”的整数序列为（设该序列为 $s$）：\n\n* $s$ 长度为 $m$。\n* $\\forall i\\in[1,m],s_i\\in[1,n]$。\n* $\\forall i\\in[2,m],|s_i-s_{i-1}|=1$。\n\n给定一个 $[1,n]$ 的排列 $p$，并定义一个整数序列 $s$ 的“对应序列” $s'$：$s'$ 的长度和 $s$ 相同；设其长度为 $l$，那么 $\\forall i\\in [1,l],s'_i=p_{s_i}$。\n\n再给定 $k$，求所有不同的合法的整数序列的对应序列中，字典序第 $k$ 小的对应序列中所有元素的和对 $2^{32}$ 取模的值。\n\n若不存在第 $k$ 小的对应序列，输出 $-1$。", "inputFormat": "第一行三个整数 $n,m,k$。\\\n第二行 $n$ 个整数表示 $p$。", "outputFormat": "一个整数，表示答案。", "hint": "**本题输入文件较大，请使用恰当的读入方式。**\n\n### 样例解释\n对于样例 $1$，所有不同的合法的整数序列的对应序列中，字典序前三小的分别是：\n\n$$\\{1,9,1,9,1,9\\}$$\n$$\\{1,9,1,9,8,9\\}$$\n$$\\{1,9,1,9,8,10\\}$$\n\n所以答案为 $1+9+1+9+8+10=38$。\n\n对于样例 $2$，所有不同的合法的整数序列的对应序列中，字典序前二小的分别是：\n\n$$\\{1,2,1,2,1\\}$$\n$$\\{2,1,2,1,2\\}$$\n\n所以答案为 $2+1+2+1+2=8$。\n### 数据规模\n| $\\text{Subtask}$ | $n\\le$ | $m\\le$ | $k\\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $10$ | $10^{18}$ | $5$ |\n| $2$ | $70$ | $70$ | $10^{18}$ | $15$ |\n| $3$ | $100$ | $300$ | $10^{18}$ | $20$ |\n| $4$ | $10^4$ | $10^4$ | $10^{18}$ | $15$ |\n| $5$ | $10^4$ | $10^{18}$ | $10^{18}$ | $10$ |\n| $6$ | $10^6$ | $10^{18}$ | $1$ | $5$ |\n| $7$ |$2\\times10^7$| $10^{18}$ | $10^{18}$ | $30$ |\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times10^7$，$2\\le m\\le 10^{18}$，$1\\le k\\le 10^{18}$。\n### 特殊计分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{1,6\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $i\\in\\{2,3,4,5,7\\}$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN"}}}
{"pid": "P8146", "type": "P", "difficulty": 6, "samples": [["5 10 2\n5 4 3 2 1\n2 1 5 1\n2 1 5 2\n1 2 3 1\n1 2 3 2\n2 1 4 1\n2 1 4 2\n1 1 4 1\n1 1 4 2\n2 1 5 1\n2 3 5 2", "0\n0\n2\n2\n4\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "颜色段均摊（珂朵莉树 ODT）", "洛谷原创", "O2优化", "分块", "扫描线", "根号分治"], "title": "[JRKSJ R4] risrqnis", "background": "", "description": "给你一个长度为 $n$ 的序列 $a_{1\\sim n}$，有 $q$ 次操作，初始有 $m$ 个空集 $S_{1\\sim m}$，共有两种操作，如下：\n\n- `1 l r k`，将 $l\\sim r$ 加入集合 $S_k$，即 $S_k\\gets S_k\\cup\\{x|x\\in[l,r]\\cap \\N\\}$；\n- `2 l r k`，查询对于所有 $l\\le i\\le r$ 的 $a_i$ 中有多少个在集合 $S_k$ 中，即查询 $\\displaystyle\\sum_{i=l}^r[a_i\\in S_k]$。", "inputFormat": "输入均为非负整数。\n\n第一行 $3$ 个数 $n,q,m$。\\\n第二行 $n$ 个数，其中第 $i$ 个数表示 $a_i$。\\\n接下来 $q$ 行，每行 $4$ 个数表示一次操作。", "outputFormat": "输出均为非负整数。\n\n对于每个 `2` 操作，输出一行表示答案。", "hint": "### 数据规模\n| $\\text{Subtask}$ | $n,q\\le$ | $m\\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^6$ | $1$ | $30$ |\n| $2$ | $5\\times 10^3$ | $3\\times 10^5$ | $15$ |\n| $3$ | $10^5$ | $10^5$ | $15$ |\n| $4$ | $3\\times 10^5$ | $10^9$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^6$，$1\\le m\\le 10^9$，$1\\le a_i\\le 10^9$。\n\n操作 $1$ 中 $1\\le l\\le r\\le 10^9$，操作 $2$ 中 $1\\le l\\le r\\le n$。所有操作中 $1\\le k\\le m$。\n\n**没有一个 $\\text{Subtask}$ 取到所有数据范围的最大值，各个 $\\text{Subtask}$ 都有自己的限制。请阅读数据范围表。**\n\n**本题输入文件较大，请使用恰当的读入方式。**\n****\n\n深夜，上条当麻的手机响起了收信声。随即，他来到了邮件所写的地方。第七学区的铁桥。\n\n上条到达的时候，发信人早已经等在那了。\n\n「御坂吗……？」\n\n「你忘记的东西。」\n\n她说着丢了什么过来。上条单手接住，发现那是个青娃的手机挂件。他沉入北水洋的时候这东西就应该不见了啊。它用来系到手机上的挂绳当初都粉碎了，现在却换成了其他颜色的绳子。\n\n「好不容易找回来的，别再弄丢了哦。」\n\n「不好意思。」\n\n上条道了声谢，将它再次系到了手机上。\n\n见状，美琴微微一笑。\n\n那是似乎终于把什么东西回归原状而松了一口气的表情。\n\n「我想你这个家伙应该不会一直呆在一个地方的吧…接下来该不会你又要去哪？」 \n\n「算是吧。」\n\n上条叹了口气。\n\n「老实说虽然我一副淡定的表情，但实际上我也对究竟发生了什么一头雾水，只知道元凶的名字而已。不过这场骚动已经波及到了学园都市，而正在追查学园都市的我也被卷入其中，被我追查的学园都市同样被卷入……所以我也没办法置之不理了。」\n\n美琴找他似乎就只是为了送挂饰而已。上条将手机放进了口袋。\n\n既然没有了话题，那也只能分别了。\n\n「再见了。」上条说道。\n\n转身背对着美琴，准备离开铁桥，\n\n准备离开这个由科学常识构筑的学园都市，大步迈向外面的领域，而少年的手，却被美琴抓住了。 \n\n确确实实地，紧紧拉住想要飘然离开的少年。\n\n在静止的上条耳边，传来了美琴的声音。\n\n「但，这次你不会是一个人了。」 \n\n![114514](https://cdn.luogu.com.cn/upload/image_hosting/0rezlv6r.png?x-oss-process=image/resize,m_lfit,h_510,w_675)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R4] risrqnis", "background": "", "description": "给你一个长度为 $n$ 的序列 $a_{1\\sim n}$，有 $q$ 次操作，初始有 $m$ 个空集 $S_{1\\sim m}$，共有两种操作，如下：\n\n- `1 l r k`，将 $l\\sim r$ 加入集合 $S_k$，即 $S_k\\gets S_k\\cup\\{x|x\\in[l,r]\\cap \\N\\}$；\n- `2 l r k`，查询对于所有 $l\\le i\\le r$ 的 $a_i$ 中有多少个在集合 $S_k$ 中，即查询 $\\displaystyle\\sum_{i=l}^r[a_i\\in S_k]$。", "inputFormat": "输入均为非负整数。\n\n第一行 $3$ 个数 $n,q,m$。\\\n第二行 $n$ 个数，其中第 $i$ 个数表示 $a_i$。\\\n接下来 $q$ 行，每行 $4$ 个数表示一次操作。", "outputFormat": "输出均为非负整数。\n\n对于每个 `2` 操作，输出一行表示答案。", "hint": "### 数据规模\n| $\\text{Subtask}$ | $n,q\\le$ | $m\\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^6$ | $1$ | $30$ |\n| $2$ | $5\\times 10^3$ | $3\\times 10^5$ | $15$ |\n| $3$ | $10^5$ | $10^5$ | $15$ |\n| $4$ | $3\\times 10^5$ | $10^9$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^6$，$1\\le m\\le 10^9$，$1\\le a_i\\le 10^9$。\n\n操作 $1$ 中 $1\\le l\\le r\\le 10^9$，操作 $2$ 中 $1\\le l\\le r\\le n$。所有操作中 $1\\le k\\le m$。\n\n**没有一个 $\\text{Subtask}$ 取到所有数据范围的最大值，各个 $\\text{Subtask}$ 都有自己的限制。请阅读数据范围表。**\n\n**本题输入文件较大，请使用恰当的读入方式。**\n****\n\n深夜，上条当麻的手机响起了收信声。随即，他来到了邮件所写的地方。第七学区的铁桥。\n\n上条到达的时候，发信人早已经等在那了。\n\n「御坂吗……？」\n\n「你忘记的东西。」\n\n她说着丢了什么过来。上条单手接住，发现那是个青娃的手机挂件。他沉入北水洋的时候这东西就应该不见了啊。它用来系到手机上的挂绳当初都粉碎了，现在却换成了其他颜色的绳子。\n\n「好不容易找回来的，别再弄丢了哦。」\n\n「不好意思。」\n\n上条道了声谢，将它再次系到了手机上。\n\n见状，美琴微微一笑。\n\n那是似乎终于把什么东西回归原状而松了一口气的表情。\n\n「我想你这个家伙应该不会一直呆在一个地方的吧…接下来该不会你又要去哪？」 \n\n「算是吧。」\n\n上条叹了口气。\n\n「老实说虽然我一副淡定的表情，但实际上我也对究竟发生了什么一头雾水，只知道元凶的名字而已。不过这场骚动已经波及到了学园都市，而正在追查学园都市的我也被卷入其中，被我追查的学园都市同样被卷入……所以我也没办法置之不理了。」\n\n美琴找他似乎就只是为了送挂饰而已。上条将手机放进了口袋。\n\n既然没有了话题，那也只能分别了。\n\n「再见了。」上条说道。\n\n转身背对着美琴，准备离开铁桥，\n\n准备离开这个由科学常识构筑的学园都市，大步迈向外面的领域，而少年的手，却被美琴抓住了。 \n\n确确实实地，紧紧拉住想要飘然离开的少年。\n\n在静止的上条耳边，传来了美琴的声音。\n\n「但，这次你不会是一个人了。」 \n\n![114514](https://cdn.luogu.com.cn/upload/image_hosting/0rezlv6r.png?x-oss-process=image/resize,m_lfit,h_510,w_675)", "locale": "zh-CN"}}}
{"pid": "P8147", "type": "P", "difficulty": 7, "samples": [["4 2\nab 2\na 2\nba 2\nb 1\nbbaba 2\naab 1", "4\n4"], ["15 4\nba 18\ncbc 74\naac 54\nba 77\na 66\nc 96\ncdb 47\ndc 45\ncb 62\ndb 88\ndda 93\ndb 34\nb 81\nacd 100\nda 80\nbcaacbbdcbabcda 4\nbccac 3\nabdbaca 5\ncbdaaaacaaca 3", "124\n66\n77\n108"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "2022", "洛谷原创", "O2优化", "可持久化线段树", "虚树", "AC 自动机"], "title": "[JRKSJ R4] Salieri", "background": "![a358071f95cad1c8ccd29cc83a3e6709c83d518e.jpg](https://s2.loli.net/2021/12/24/Oi251TnFP7SflQp.jpg)  \n\n~~【记得到番里面去把“萨列里谱不出莫扎特的曲子”这句话找到】~~ 最终还是没能找到，哪位看过《命运石之门0》的兄弟能帮我找找？", "description": "Salieri 发现了 $n$ 种制作音乐的模式，他将第 $i$ 种模式表示为一个字符串 $s_i$，这种模式所带来的初始优美度为 $v_i$。  \nSalieri 现在想制作 $m$ 首乐曲，每次他的灵感可以被表示成一个字符串 $S$。设 $cnt_i$ 为 $s_i$ 在 $S$ 中的出现次数，则采用 $i$ 模式制作的乐曲最终的优美度 $w_i=cnt_i\\times v_i$。  \nSalieri 当然希望制作出来的乐曲最终优美度越大越好，但是他发现此灵感下前 $k-1$ 优美的乐曲已经被 Mozart 制作过了，他只能制作第 $k$ 优美的乐曲。请你求出这个最终优美度。  \n\n形式化题意：给出 $n$ 个字符串 $s_i$，每个字符串有一个权值 $v_i$。$m$ 次询问每次给出一个字符串 $S$ 和一个常数 $k$。设 $cnt_i$ 为 $s_i$ 在 $S$ 中的出现次数，求 $cnt_i\\times v_i$ 第 $k$ 大的值。", "inputFormat": "第一行两个数，$n,m$。  \n接下来 $n$ 行每行一个字符串 $s_i$ 和一个数 $v_i$。  \n接下来 $m$ 行每行一个字符串 $S$ 和一个数 $k$。", "outputFormat": "每行一个数，代表答案。", "hint": "设 $L$ 为 $s$ 长度总和。\n\n| $\\text{Subtask}$|$n,m\\le$|$L\\le$|特殊性质| 分值 |\n|:-:|:-:|:-:|:-:| :-: |\n|$1$|$10^3$|$5\\times10^3$|无| $10$ |\n|$2$|$10^3$|$10^5$|无| $20$ |\n|$3$|$10^5$|$5\\times10^5$|$k=1$| $10$ |\n|$4$|$3\\times10^4$|$2\\times10^5$|$k\\le5$| $20$ |\n|$5$|$3\\times10^4$|$2\\times10^5$|无|  $20$ | \n|$6$|$10^5$|$5\\times10^5$|无|  $20$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^5$，$L\\le5\\times10^5$。\n\n无论何时 $\\sum |S|$ 与 $L$ 同阶，$s$ 和 $S$ 中只会出现 $\\texttt a,\\texttt b,\\texttt c,\\texttt d$ 四种字符，$v_i\\le10^3$，$k\\le n$。\n\n\n![QQ截图20220128131353.png](https://s2.loli.net/2022/01/28/MJchEuxsF1QI46V.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R4] Salieri", "background": "![a358071f95cad1c8ccd29cc83a3e6709c83d518e.jpg](https://s2.loli.net/2021/12/24/Oi251TnFP7SflQp.jpg)  \n\n~~【记得到番里面去把“萨列里谱不出莫扎特的曲子”这句话找到】~~ 最终还是没能找到，哪位看过《命运石之门0》的兄弟能帮我找找？", "description": "Salieri 发现了 $n$ 种制作音乐的模式，他将第 $i$ 种模式表示为一个字符串 $s_i$，这种模式所带来的初始优美度为 $v_i$。  \nSalieri 现在想制作 $m$ 首乐曲，每次他的灵感可以被表示成一个字符串 $S$。设 $cnt_i$ 为 $s_i$ 在 $S$ 中的出现次数，则采用 $i$ 模式制作的乐曲最终的优美度 $w_i=cnt_i\\times v_i$。  \nSalieri 当然希望制作出来的乐曲最终优美度越大越好，但是他发现此灵感下前 $k-1$ 优美的乐曲已经被 Mozart 制作过了，他只能制作第 $k$ 优美的乐曲。请你求出这个最终优美度。  \n\n形式化题意：给出 $n$ 个字符串 $s_i$，每个字符串有一个权值 $v_i$。$m$ 次询问每次给出一个字符串 $S$ 和一个常数 $k$。设 $cnt_i$ 为 $s_i$ 在 $S$ 中的出现次数，求 $cnt_i\\times v_i$ 第 $k$ 大的值。", "inputFormat": "第一行两个数，$n,m$。  \n接下来 $n$ 行每行一个字符串 $s_i$ 和一个数 $v_i$。  \n接下来 $m$ 行每行一个字符串 $S$ 和一个数 $k$。", "outputFormat": "每行一个数，代表答案。", "hint": "设 $L$ 为 $s$ 长度总和。\n\n| $\\text{Subtask}$|$n,m\\le$|$L\\le$|特殊性质| 分值 |\n|:-:|:-:|:-:|:-:| :-: |\n|$1$|$10^3$|$5\\times10^3$|无| $10$ |\n|$2$|$10^3$|$10^5$|无| $20$ |\n|$3$|$10^5$|$5\\times10^5$|$k=1$| $10$ |\n|$4$|$3\\times10^4$|$2\\times10^5$|$k\\le5$| $20$ |\n|$5$|$3\\times10^4$|$2\\times10^5$|无|  $20$ | \n|$6$|$10^5$|$5\\times10^5$|无|  $20$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le10^5$，$L\\le5\\times10^5$。\n\n无论何时 $\\sum |S|$ 与 $L$ 同阶，$s$ 和 $S$ 中只会出现 $\\texttt a,\\texttt b,\\texttt c,\\texttt d$ 四种字符，$v_i\\le10^3$，$k\\le n$。\n\n\n![QQ截图20220128131353.png](https://s2.loli.net/2022/01/28/MJchEuxsF1QI46V.png)", "locale": "zh-CN"}}}
{"pid": "P8148", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3 4 6 7", "1 2 4"], ["5\n1 3 4 7 8 9 10 11 15 17 18 19 24 27 28", "1 3 7 8 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "O2优化", "排序"], "title": "声海 | Sea of Voices", "background": "「真是，如梦似幻呢。」\n\n“怎么？”\n\n「我看见你从开始到现在的一切记忆；看见你，从一次次或欢喜或失落中走来。那些场景在我眼前浮现，像梦，却又那么模糊——我只听见那些声音，只感到那片声音的海洋将我环围… 你听得见吗？」\n\n“当然。毕竟，它们是我的记忆啊。”\n\n「或许，一次生命，便是一场发声的历程吧。我们诞生时的啼哭，便在向世界发出宣告降临的声音；在一次次挑战的过程中，我们向一切阻碍我们的事物唱出不屈的战歌；在日常的点滴中，我们向所珍视之人倾诉内心深处的话语… 这样的声音，这样的感情，是不是就是我们所生存世界的本质呢？」\n\n“或许就是这样吧。纵使一路走来，我们看见了无尽的景色，但只有那些与我们内心共鸣的声音——或来自于自然、或来自于他人的灵魂——才会真正地改变我们自己。”\n\n「是啊… 但愿，在这片声音的海洋里，你不会迷失你的方向。我期许着听见更多，关于你的声音。怀揣着这种信念，向前走下去吧。」\n\n“你也一样。”\n\n> We'll see creation come undone\n>\n> 我们会见证自己存在的印记被世界拂去\n>\n> These bones that bound us will be gone\n>\n> 而那些既有的束缚将不再留存\n>\n> We'll stir our spirits till we're one\n>\n> 我们会洗涤自己的灵魂直至合为一体\n>\n> Then soft as shadows we'll become\n>\n> 然后成为掠影，散失在虚无之中", "description": "“但是… 曾有一些人，在我的生命里留下了重要的声音，我却无法回忆起了…”\n\n「为什么呢？」\n\n“不妨让我们把问题变得形式化一点。我想回忆起的声音有 $n$ 个，它们的共鸣度——非负整数 $a_i$，是单调不降的。最初它们互不干涉，但随着时间的推移，多个相邻的声音会交织在一起形成新的声音——也就是说，对于任意的 $1\\le l\\le r\\le n$，第 $l$ 一直到第 $r$ 个声音会交织在一起形成新的声音，而这个声音的共鸣度便是这些声音共鸣度的总和。”\n\n「也就是说，例如 $n=3$，$a=[1,2,4]$，那么最终 $\\dfrac{3\\times(3+1)}2=6$ 个声音的共鸣度分别是 $1,2,4,3,6,7$？」\n\n“没错。现在我把最终所有声音的共鸣度无序地告诉你，你能帮我还原最开始 $n$ 个声音的共鸣度吗？”\n\n「乐意之至。」\n\n### 简要题意\n\n$a$ 为长度为 $n$ 的非负整数序列，满足 $\\forall 1<i\\le n,a_{i-1}\\le a_i$。现 **无序** 地给出 **可重集** $S=\\left\\{\\sum_{k=l}^r a_k|1\\le l\\le r\\le n\\right\\}$，试还原 $a$。", "inputFormat": "第一行一个正整数 $n$，代表最初声音的个数。\n\n接下来一行 $\\dfrac{n\\times(n+1)}2$ 个非负整数，表示现在所有声音的共鸣度（输入无序）。", "outputFormat": "一行 $n$ 个非负整数，表示最初 $n$ 个声音共鸣度 $a_i$。", "hint": "对于全部数据，有 $1\\le n\\le 2000$，$0\\le a_i\\le 10^5$。\n\nSubtask 1（5 pts）：保证 $n=2$。\n\nSubtask 2（15 pts）：保证 $n=3$。\n\nSubtask 3（30 pts）：保证 $n\\le 100$。\n\nSubtask 4（50 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "声海 | Sea of Voices", "background": "「真是，如梦似幻呢。」\n\n“怎么？”\n\n「我看见你从开始到现在的一切记忆；看见你，从一次次或欢喜或失落中走来。那些场景在我眼前浮现，像梦，却又那么模糊——我只听见那些声音，只感到那片声音的海洋将我环围… 你听得见吗？」\n\n“当然。毕竟，它们是我的记忆啊。”\n\n「或许，一次生命，便是一场发声的历程吧。我们诞生时的啼哭，便在向世界发出宣告降临的声音；在一次次挑战的过程中，我们向一切阻碍我们的事物唱出不屈的战歌；在日常的点滴中，我们向所珍视之人倾诉内心深处的话语… 这样的声音，这样的感情，是不是就是我们所生存世界的本质呢？」\n\n“或许就是这样吧。纵使一路走来，我们看见了无尽的景色，但只有那些与我们内心共鸣的声音——或来自于自然、或来自于他人的灵魂——才会真正地改变我们自己。”\n\n「是啊… 但愿，在这片声音的海洋里，你不会迷失你的方向。我期许着听见更多，关于你的声音。怀揣着这种信念，向前走下去吧。」\n\n“你也一样。”\n\n> We'll see creation come undone\n>\n> 我们会见证自己存在的印记被世界拂去\n>\n> These bones that bound us will be gone\n>\n> 而那些既有的束缚将不再留存\n>\n> We'll stir our spirits till we're one\n>\n> 我们会洗涤自己的灵魂直至合为一体\n>\n> Then soft as shadows we'll become\n>\n> 然后成为掠影，散失在虚无之中", "description": "“但是… 曾有一些人，在我的生命里留下了重要的声音，我却无法回忆起了…”\n\n「为什么呢？」\n\n“不妨让我们把问题变得形式化一点。我想回忆起的声音有 $n$ 个，它们的共鸣度——非负整数 $a_i$，是单调不降的。最初它们互不干涉，但随着时间的推移，多个相邻的声音会交织在一起形成新的声音——也就是说，对于任意的 $1\\le l\\le r\\le n$，第 $l$ 一直到第 $r$ 个声音会交织在一起形成新的声音，而这个声音的共鸣度便是这些声音共鸣度的总和。”\n\n「也就是说，例如 $n=3$，$a=[1,2,4]$，那么最终 $\\dfrac{3\\times(3+1)}2=6$ 个声音的共鸣度分别是 $1,2,4,3,6,7$？」\n\n“没错。现在我把最终所有声音的共鸣度无序地告诉你，你能帮我还原最开始 $n$ 个声音的共鸣度吗？”\n\n「乐意之至。」\n\n### 简要题意\n\n$a$ 为长度为 $n$ 的非负整数序列，满足 $\\forall 1<i\\le n,a_{i-1}\\le a_i$。现 **无序** 地给出 **可重集** $S=\\left\\{\\sum_{k=l}^r a_k|1\\le l\\le r\\le n\\right\\}$，试还原 $a$。", "inputFormat": "第一行一个正整数 $n$，代表最初声音的个数。\n\n接下来一行 $\\dfrac{n\\times(n+1)}2$ 个非负整数，表示现在所有声音的共鸣度（输入无序）。", "outputFormat": "一行 $n$ 个非负整数，表示最初 $n$ 个声音共鸣度 $a_i$。", "hint": "对于全部数据，有 $1\\le n\\le 2000$，$0\\le a_i\\le 10^5$。\n\nSubtask 1（5 pts）：保证 $n=2$。\n\nSubtask 2（15 pts）：保证 $n=3$。\n\nSubtask 3（30 pts）：保证 $n\\le 100$。\n\nSubtask 4（50 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8149", "type": "P", "difficulty": 5, "samples": [["2 2\n2 1 2\n3 1 2", "entangled"], ["5 7\n1 1 2 3 4\n3 1 2\n2 1 2\n3 1 2\n3 3 4\n4 1\n4 2", "separate\nentangled\nentangled\n2\n2"], ["7 6\n1 1 2 3 4\n1 3 5 6 7\n2 4 5\n3 6 7\n2 1 2\n3 6 7", "separate\nentangled"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["并查集", "2022", "O2优化"], "title": "泪光 | Tears", "background": "「为什么哭呢？」\n\n“因为自己的期许和现实相去甚远。”\n\n「哭能改变什么呢？」\n\n“什么都不能。正如同既成事实的过去一样。”\n\n「那么为何不抹去泪水向前迈进呢？」\n\n“… 我在等我的灵魂追上时间。”\n\n> After night\n>\n> 长夜之后\n>\n> In boundless light\n>\n> 无垠光中\n>\n> He calls my name\n>\n> 他呼唤着我\n>\n> I do the same\n>\n> 我望向彼方，回应", "description": "「不想回忆的事，就别再去想了吧。为了分散你的注意力，正好我有一道与人的感情相关的题目，你看看怎么样？」\n\n“… 真是令人想吐槽呢。怎么，又是那个人在支配吗？”\n\n「什么嘛，令人不快… 你以前对这种事不是有很大的热情吗？」\n\n“… 说不准。”\n\n「咳咳… 那么听好了。现在共有 $n$ 个人，每个人都有一个情绪值：用 **实数** $v_i$ 表示。现在由于一些特殊的变化，使得这些人的情感发生了纠缠…」\n\n“嗯哼？”\n\n「第一种纠缠有四个参数 $a,b,c,d$，表示：现在已知存在无穷个 $f:\\R\\rightarrow\\R$，使得 $\\frac{f(v_a)}{f(v_b)}=\\frac{v_c}{v_d}$。」\n\n“等等等等一下！这数学公式是怎么说出来的啊？！还有什么 $f:\\R\\rightarrow\\R$ 是什么意思啊！”\n\n「你瞧，你不也说出来了吗？」\n\n“… 可恶，果然是你吗，那个人…”\n\n「简单来说，$f:\\R\\rightarrow\\R$ 就是代表一个定义域和值域都是实数的函数。如果这都不能理解的话，我要开始怀疑你作为高中生的身份了哦…」\n\n“好吧… 继续吧。”\n\n「第二种纠缠有两个参数 $a,b$，表示：现在已知存在有穷个 $f:\\R\\rightarrow\\R$，使得 $f(v_a)\\ne f(v_b)$。」\n\n“什么叫‘有穷个’？”\n\n「就是有一个确切的数目啦… 只要有一个自然数 $k$ 能表示这样函数的数目，那么就叫‘存在有穷个函数’哦？」\n\n“嗯…”\n\n「接下来，在纠缠不断增加的过程中，你也需要回答一些问题。第一种是，给出 $a,b$，你需要判断 $v_a$ 是否总是等于 $v_b$；第二种是，给出 $a$，你需要计算有多少个 $b$（$1\\le b\\le n$，$b$ 可以等于 $a$）使得 $v_a=v_b$ 恒成立。」\n\n“… 题目我明白了，但是这跟人的情感有什么关系吗？”\n\n「哈哈… 就是想逗你开心嘛，别那么严肃。」\n\n“… 无聊。”\n\n### 简要题意\n\n有 $n$ 个 **正实数** 变量 $v_1,\\dots,v_n$。你需要根据当前已知的条件作出判断。每次给出两种条件之一：\n\n- 给出常数 $a,b,c,d$：表示现在已知存在无穷个 $f:\\R\\rightarrow\\R$，使得 $\\frac{f(v_a)}{f(v_b)}=\\frac{v_c}{v_d}$。\n\n- 给出常数 $a,b$：表示现在已知存在有穷个 $f:\\R\\rightarrow\\R$，使得 $f(v_a)\\ne f(v_b)$。\n\n或者两种询问之一：\n\n- 给出常数 $a,b$：询问 $v_a=v_b$ 是否恒成立。\n\n- 给出常数 $a$：询问有多少个 $b$（$1\\le b\\le n$，$b$ 可以等于 $a$）使得 $v_a=v_b$ 恒成立。", "inputFormat": "第一行两个正整数 $n,m$，分别表示变量的数量和操作的次数。\n\n接下来 $m$ 行，每行表示一次操作，有四种可能：\n\n- `1 a b c d`：表示现在已知存在无穷个 $f:\\R\\rightarrow\\R$，使得 $\\frac{f(v_a)}{f(v_b)}=\\frac{v_c}{v_d}$。\n\n- `2 a b`：表示现在已知存在有穷个 $f:\\R\\rightarrow\\R$，使得 $f(v_a)\\ne f(v_b)$。\n\n- `3 a b`：询问 $v_a=v_b$ 是否恒成立。\n\n- `4 a`：询问有多少个 $b$（$1\\le b\\le n$，$b$ 可以等于 $a$）使得 $v_a=v_b$ 恒成立。", "outputFormat": "对于每次操作三，输出一行字符串 `entangled` 表示 $v_a=v_b$ 恒成立；反之输出一行字符串 `separate`。\n\n对于每次操作四，输出一行一个整数表示符合条件的 $b$ 的数目。", "hint": "对于全部数据，有 $1\\le n,m\\le 6\\times 10^5$。保证操作一中 $a\\ne b,c\\ne d$，操作二中 $a\\ne b$，操作三中 $a\\ne b$。\n\nSubtask 1（5 pts）：保证不出现操作一和操作二。\n\nSubtask 2（10 pts）：保证不出现操作一。\n\nSubtask 3（35 pts）：保证 $n\\le 5000$。\n\nSubtask 4（50 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "泪光 | Tears", "background": "「为什么哭呢？」\n\n“因为自己的期许和现实相去甚远。”\n\n「哭能改变什么呢？」\n\n“什么都不能。正如同既成事实的过去一样。”\n\n「那么为何不抹去泪水向前迈进呢？」\n\n“… 我在等我的灵魂追上时间。”\n\n> After night\n>\n> 长夜之后\n>\n> In boundless light\n>\n> 无垠光中\n>\n> He calls my name\n>\n> 他呼唤着我\n>\n> I do the same\n>\n> 我望向彼方，回应", "description": "「不想回忆的事，就别再去想了吧。为了分散你的注意力，正好我有一道与人的感情相关的题目，你看看怎么样？」\n\n“… 真是令人想吐槽呢。怎么，又是那个人在支配吗？”\n\n「什么嘛，令人不快… 你以前对这种事不是有很大的热情吗？」\n\n“… 说不准。”\n\n「咳咳… 那么听好了。现在共有 $n$ 个人，每个人都有一个情绪值：用 **实数** $v_i$ 表示。现在由于一些特殊的变化，使得这些人的情感发生了纠缠…」\n\n“嗯哼？”\n\n「第一种纠缠有四个参数 $a,b,c,d$，表示：现在已知存在无穷个 $f:\\R\\rightarrow\\R$，使得 $\\frac{f(v_a)}{f(v_b)}=\\frac{v_c}{v_d}$。」\n\n“等等等等一下！这数学公式是怎么说出来的啊？！还有什么 $f:\\R\\rightarrow\\R$ 是什么意思啊！”\n\n「你瞧，你不也说出来了吗？」\n\n“… 可恶，果然是你吗，那个人…”\n\n「简单来说，$f:\\R\\rightarrow\\R$ 就是代表一个定义域和值域都是实数的函数。如果这都不能理解的话，我要开始怀疑你作为高中生的身份了哦…」\n\n“好吧… 继续吧。”\n\n「第二种纠缠有两个参数 $a,b$，表示：现在已知存在有穷个 $f:\\R\\rightarrow\\R$，使得 $f(v_a)\\ne f(v_b)$。」\n\n“什么叫‘有穷个’？”\n\n「就是有一个确切的数目啦… 只要有一个自然数 $k$ 能表示这样函数的数目，那么就叫‘存在有穷个函数’哦？」\n\n“嗯…”\n\n「接下来，在纠缠不断增加的过程中，你也需要回答一些问题。第一种是，给出 $a,b$，你需要判断 $v_a$ 是否总是等于 $v_b$；第二种是，给出 $a$，你需要计算有多少个 $b$（$1\\le b\\le n$，$b$ 可以等于 $a$）使得 $v_a=v_b$ 恒成立。」\n\n“… 题目我明白了，但是这跟人的情感有什么关系吗？”\n\n「哈哈… 就是想逗你开心嘛，别那么严肃。」\n\n“… 无聊。”\n\n### 简要题意\n\n有 $n$ 个 **正实数** 变量 $v_1,\\dots,v_n$。你需要根据当前已知的条件作出判断。每次给出两种条件之一：\n\n- 给出常数 $a,b,c,d$：表示现在已知存在无穷个 $f:\\R\\rightarrow\\R$，使得 $\\frac{f(v_a)}{f(v_b)}=\\frac{v_c}{v_d}$。\n\n- 给出常数 $a,b$：表示现在已知存在有穷个 $f:\\R\\rightarrow\\R$，使得 $f(v_a)\\ne f(v_b)$。\n\n或者两种询问之一：\n\n- 给出常数 $a,b$：询问 $v_a=v_b$ 是否恒成立。\n\n- 给出常数 $a$：询问有多少个 $b$（$1\\le b\\le n$，$b$ 可以等于 $a$）使得 $v_a=v_b$ 恒成立。", "inputFormat": "第一行两个正整数 $n,m$，分别表示变量的数量和操作的次数。\n\n接下来 $m$ 行，每行表示一次操作，有四种可能：\n\n- `1 a b c d`：表示现在已知存在无穷个 $f:\\R\\rightarrow\\R$，使得 $\\frac{f(v_a)}{f(v_b)}=\\frac{v_c}{v_d}$。\n\n- `2 a b`：表示现在已知存在有穷个 $f:\\R\\rightarrow\\R$，使得 $f(v_a)\\ne f(v_b)$。\n\n- `3 a b`：询问 $v_a=v_b$ 是否恒成立。\n\n- `4 a`：询问有多少个 $b$（$1\\le b\\le n$，$b$ 可以等于 $a$）使得 $v_a=v_b$ 恒成立。", "outputFormat": "对于每次操作三，输出一行字符串 `entangled` 表示 $v_a=v_b$ 恒成立；反之输出一行字符串 `separate`。\n\n对于每次操作四，输出一行一个整数表示符合条件的 $b$ 的数目。", "hint": "对于全部数据，有 $1\\le n,m\\le 6\\times 10^5$。保证操作一中 $a\\ne b,c\\ne d$，操作二中 $a\\ne b$，操作三中 $a\\ne b$。\n\nSubtask 1（5 pts）：保证不出现操作一和操作二。\n\nSubtask 2（10 pts）：保证不出现操作一。\n\nSubtask 3（35 pts）：保证 $n\\le 5000$。\n\nSubtask 4（50 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8150", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "交互题", "Special Judge"], "title": "再会 | Sayounara", "background": "「过去的都已经无所谓了吗？」\n\n“还没有达到那种地步。”\n\n「想做的事都已经完成了吗？」\n\n“如今的自己，也好像只能在取舍中前行。”\n\n「道过再会了吗？」\n\n“… 还没有，但我正尝试着。”\n\n> I have\n>\n> 我仍有\n>\n> plenty want to say\n>\n> 无数未道尽的言语\n>\n> Before\n>\n> 在离开之前\n>\n> I leave this world\n>\n> 在再会之前", "description": "「这是…？」\n\n“啊… 我自己写的日记管理程序。”\n\n「噗… ‘正常人谁写日记啊’，平时的你应该会这样说吧？」\n\n“… 别拿我说笑。”\n\n「好吧好吧。不过看上去你不记得密码了呢？」\n\n“…… 我自有手段。”\n\n「咦…？这什么，恢复软件吗？」\n\n“嗯… 密码可以被表示为一个长为 $n$ 的非负整数序列，**其中每个元素都互不相同** 。这个软件可以执行两种操作：一是，询问一个连续区间的总和减去这个区间最小值的结果；二是，询问一个位置的值。现在我需要找回密码的话…”\n\n「欸？为什么不直接用 $n$ 次第二种操作呢？」\n\n“这是试用版… 所以第二种操作只有两次使用的体验权限… 而且第一种操作似乎也有一定的限制，所以…”\n\n「这… 话说为什么恢复个密码这么麻烦啊？不应该会有‘找回密码’之类方便的机制吗？」\n\n“… 多半还是那个人的安排吧。”\n\n### 简要题意\n\n有一个元素互不相同的非负整数序列 $a$，其长度为 $n$。你可以多次进行以下两种询问之一：\n\n- 给出 $l,r$，得到 $\\left(\\sum_{k=l}^r a_k\\right)-\\left(\\min_{k=l}^r a_k\\right)$。\n\n- 给出 $k$，得到 $a_k$ 的值。这种询问最多只能进行两次。\n\n你需要在尽可能少的询问次数内推断出该序列的内容。\n\n**本题询问均以 $1$ 为初始下标，但你返回答案时需要返回以 $0$ 为初始下标的 `vector`，请留意。**\n\n### 交互说明\n\n本题仅限 C++11 / C++17 提交。你需要实现以下的函数：\n\n```cpp\n#include <cstdint>\n#include <vector>\n\nstd::vector<uint32_t> recover(int n);\n```\n\n该函数接收密码长度 $n$，返回还原的密码（返回值应该是一个大小为 $n$ 的 `vector`）。你可以使用以下两个函数\n\n```cpp\n#include <cstdint>\n\nuint64_t query(int l, int r);\nuint32_t get(int x);\n```\n\n其中 `query` 对应题目中的第一种操作，`get` 对应题目中的第二种操作。\n\n下面是一个示例程序（仅演示交互库操作）：\n\n```cpp\n#include <cstdint>\n#include <vector>\n\nuint64_t query(int l, int r);\nuint32_t get(int x);\n\nstd::vector<uint32_t> recover(int n) {\n\tstd::vector<uint32_t> ans(n);\n\tint what = query(1, n), hey = get(1);\n\tfor (int i = 0; i < n; ++i) ans[i] = i + 1;\n\treturn ans;\n}\n```\n\n题目提供了示例交互库 `lib.cpp`（并非交互库真实实现）。你可以在本地使用命令 `g++ -o code code.cpp lib.cpp` 来编译运行。", "inputFormat": "**这是交互库的输入格式，选手不需要，也无法从标准输入中读取任何信息。**\n\n第一行，一个正整数 $n$ 表示密码长度。\n\n第二行，$n$ 个非负整数表示密码。", "outputFormat": "**这是交互库的输出格式，选手不需要，也无法向标准输出中写入任何信息。**\n\n输出有四种：\n\n- `0 A B`：选手答案正确。其中 `A` 代表操作一的使用次数，`B` 代表操作二的使用次数。\n\n- `-1`：选手函数成功执行，但答案不正确。\n\n- `-2`：选手在调用操作一时传入的 $l,r$ 不满足要求。\n\n- `-3`：选手调用了超过 $2n$ 次操作一。\n\n- `-4`：选手调用了超过两次操作二。", "hint": "### 得分细则\n\n本题没有子任务。所有测试点保证 $n=10^6$。\n\n如果你在任何一个测试点中答案错误或超出询问限制，则本题你会得到 0 分的好成绩。\n\n如果你成功通过了所有测试点，记你在所有数据中调用操作一最多一次的次数为 $x$，则你本题的分数为：\n\n$$\n\\begin{cases}\n\\frac{60}{e^7-1}\\left(e^{10-\\max\\left\\{\\frac{x-10^6}{100},3\\right\\}}-1\\right)+40,&x\\le 1001000\\\\\n25,&\\mathrm{otherwise.}\n\\end{cases}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "再会 | Sayounara", "background": "「过去的都已经无所谓了吗？」\n\n“还没有达到那种地步。”\n\n「想做的事都已经完成了吗？」\n\n“如今的自己，也好像只能在取舍中前行。”\n\n「道过再会了吗？」\n\n“… 还没有，但我正尝试着。”\n\n> I have\n>\n> 我仍有\n>\n> plenty want to say\n>\n> 无数未道尽的言语\n>\n> Before\n>\n> 在离开之前\n>\n> I leave this world\n>\n> 在再会之前", "description": "「这是…？」\n\n“啊… 我自己写的日记管理程序。”\n\n「噗… ‘正常人谁写日记啊’，平时的你应该会这样说吧？」\n\n“… 别拿我说笑。”\n\n「好吧好吧。不过看上去你不记得密码了呢？」\n\n“…… 我自有手段。”\n\n「咦…？这什么，恢复软件吗？」\n\n“嗯… 密码可以被表示为一个长为 $n$ 的非负整数序列，**其中每个元素都互不相同** 。这个软件可以执行两种操作：一是，询问一个连续区间的总和减去这个区间最小值的结果；二是，询问一个位置的值。现在我需要找回密码的话…”\n\n「欸？为什么不直接用 $n$ 次第二种操作呢？」\n\n“这是试用版… 所以第二种操作只有两次使用的体验权限… 而且第一种操作似乎也有一定的限制，所以…”\n\n「这… 话说为什么恢复个密码这么麻烦啊？不应该会有‘找回密码’之类方便的机制吗？」\n\n“… 多半还是那个人的安排吧。”\n\n### 简要题意\n\n有一个元素互不相同的非负整数序列 $a$，其长度为 $n$。你可以多次进行以下两种询问之一：\n\n- 给出 $l,r$，得到 $\\left(\\sum_{k=l}^r a_k\\right)-\\left(\\min_{k=l}^r a_k\\right)$。\n\n- 给出 $k$，得到 $a_k$ 的值。这种询问最多只能进行两次。\n\n你需要在尽可能少的询问次数内推断出该序列的内容。\n\n**本题询问均以 $1$ 为初始下标，但你返回答案时需要返回以 $0$ 为初始下标的 `vector`，请留意。**\n\n### 交互说明\n\n本题仅限 C++11 / C++17 提交。你需要实现以下的函数：\n\n```cpp\n#include <cstdint>\n#include <vector>\n\nstd::vector<uint32_t> recover(int n);\n```\n\n该函数接收密码长度 $n$，返回还原的密码（返回值应该是一个大小为 $n$ 的 `vector`）。你可以使用以下两个函数\n\n```cpp\n#include <cstdint>\n\nuint64_t query(int l, int r);\nuint32_t get(int x);\n```\n\n其中 `query` 对应题目中的第一种操作，`get` 对应题目中的第二种操作。\n\n下面是一个示例程序（仅演示交互库操作）：\n\n```cpp\n#include <cstdint>\n#include <vector>\n\nuint64_t query(int l, int r);\nuint32_t get(int x);\n\nstd::vector<uint32_t> recover(int n) {\n\tstd::vector<uint32_t> ans(n);\n\tint what = query(1, n), hey = get(1);\n\tfor (int i = 0; i < n; ++i) ans[i] = i + 1;\n\treturn ans;\n}\n```\n\n题目提供了示例交互库 `lib.cpp`（并非交互库真实实现）。你可以在本地使用命令 `g++ -o code code.cpp lib.cpp` 来编译运行。", "inputFormat": "**这是交互库的输入格式，选手不需要，也无法从标准输入中读取任何信息。**\n\n第一行，一个正整数 $n$ 表示密码长度。\n\n第二行，$n$ 个非负整数表示密码。", "outputFormat": "**这是交互库的输出格式，选手不需要，也无法向标准输出中写入任何信息。**\n\n输出有四种：\n\n- `0 A B`：选手答案正确。其中 `A` 代表操作一的使用次数，`B` 代表操作二的使用次数。\n\n- `-1`：选手函数成功执行，但答案不正确。\n\n- `-2`：选手在调用操作一时传入的 $l,r$ 不满足要求。\n\n- `-3`：选手调用了超过 $2n$ 次操作一。\n\n- `-4`：选手调用了超过两次操作二。", "hint": "### 得分细则\n\n本题没有子任务。所有测试点保证 $n=10^6$。\n\n如果你在任何一个测试点中答案错误或超出询问限制，则本题你会得到 0 分的好成绩。\n\n如果你成功通过了所有测试点，记你在所有数据中调用操作一最多一次的次数为 $x$，则你本题的分数为：\n\n$$\n\\begin{cases}\n\\frac{60}{e^7-1}\\left(e^{10-\\max\\left\\{\\frac{x-10^6}{100},3\\right\\}}-1\\right)+40,&x\\le 1001000\\\\\n25,&\\mathrm{otherwise.}\n\\end{cases}\n$$", "locale": "zh-CN"}}}
{"pid": "P8151", "type": "P", "difficulty": 7, "samples": [["2 2", "4"], ["3 4", "26"], ["10 20", "2096384"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "O2优化"], "title": "彼岸 | To See the Next Part of the Dream", "background": "「“看见梦境的下一个部分”…？」\n\n“是啊… ‘尽管身体已是成年人，但内心却依旧是那个不切实际的小孩，依旧是那个相信自己有着无尽可能的小孩——即使是在认清了现实和理想的鸿沟后，还仍是如此。年少时那个成为摇滚巨星的梦，如今已显得分外不可及，只能在一次次前行中看见梦的下一个部分’… 不觉得作者和我很像吗？”\n\n“曾经年少的自己对一切的未知都怀揣着好奇与欣喜，但如今仿佛只是在如同抓住救命稻草一般抓住自己背离现实的梦想，然后在生活的洋流中逐渐看见梦的下一个部分… 明知自己的失败，却仍在仿佛为了看见什么、达成什么一样向上登攀，这样一来，和作者所描述的‘active loser’也没什么两样吧…”\n\n「所以，你所期望看见的、期望达成的，究竟是什么呢？」\n\n“…”\n\n“现在的我，已经不知道了。”\n\n> 나의 어리고 멍청했던 날들은 사라져줬으면\n>\n> 如果那些年少无知的日子消失掉就好了\n>\n> 나의 소중한 인연들 이제는 추억속으로만\n>\n> 珍贵的感情 现在仅仅存在于在记忆中\n>\n> 만약 이 세상이 전부 누군가의 또다른 꿈이었다면\n>\n> 如果这个世界 只是别人的梦\n>\n> 언젠가 깨어나게 될때 나는 지금과는 달라져있을까\n>\n> 某天醒来时 我会变得不一样吗", "description": "「那么，你相信宿命吗？」\n\n“那种东西，顶多只是什么励志故事里的抒情工具吧。”\n\n「是吗… 那么要玩玩塔罗牌吗？」\n\n“谁会对那种事情感兴趣…”\n\n「真是的，你要再一副对什么事情都漠不关心的态度我要生气了…！」\n\n“好好好… 所以呢？塔罗牌呢？”\n\n「这个嘛… 嘿嘿，自己想象咯～」\n\n“什么毛病…”\n\n「现在有 $n$ 叠塔罗牌放在桌上，每一叠都有 $2^n$ 张，从桌面向上分别是 $1$ 号、$2$ 号… $n$ 号。现在作为宿命的管理者的我们——要洗一遍这些塔罗牌！」\n\n“怎么… 中二病开始传染了吗…”\n\n「那么，洗牌的过程是，将牌均匀地分成两半，下面一半和上面一半分别放在左右手；接着，右手从底部放下一张牌，左手从底部放下一张牌，右手又从底部放下一张牌… 这样交错重复，于是一次洗牌就完成了！」\n\n“例如 $n=2$ 时，假设原来的牌从下往上看是 $[1,2,3,4]$，洗一次牌后就会变成 $[3,1,4,2]$——是这样吗？”\n\n「是的！然后对于这 $n$ 叠初始时都按顺序从下到上摆放的塔罗牌，我会不操作第一叠牌，然后洗一次第二叠牌，洗两次第三叠牌… 洗 $n-1$ 次第 $n$ 叠牌。接下来，我会把这 $n$ 叠牌都从下到上地发给 $2^n$ 个人——也就是说第一个人会拿到每叠牌的第一张，第二个人会拿到每叠牌的第二张… 每一个人都恰好会拿到 $n$ 张牌。」\n\n「现在，定义一个人拿到和自己号码相同的牌的张数为这个人的幸运值。你能算出这 $n$ 个人幸运值的总和是多少吗？」\n\n“嗯… 撇开你粗制滥造的题面不谈，这个题目还是很有趣的。”\n\n「适可而止啊喂！」\n\n“… 我想了想，好像还挺简单的。不妨让我们记 $n=k$ 的时候的幸运值总和为 $f(k)$。现在你需要对 $l\\le k\\le r$ 的 $f(k)$ 求和，你看怎么样？”\n\n「… 不是很会了…」\n\n### 简要题意\n\n对于长度为 $2k$ 的序列 $a$，定义函数 $S_q(a)$，其中\n\n$$\nS_q(a)=\n\\begin{cases}\na,&q=0\\\\\n[a_{k+1},a_1,a_{k+2},a_2,\\dots,a_{2k},a_k],&q=1\\\\\nS_{q-1}(S_1(a)),&\\text{otherwise.}\n\\end{cases}\n$$\n\n现在给定正整数 $l,r$，求 $\\sum_{k=l}^r f(k)$，其中\n\n$$\nf(n)=\\sum_{q=0}^{n-1}\\sum_{k=1}^{2^n}\\left[S_q([1,2,3,\\dots,2^n])_k=k\\right]\n$$", "inputFormat": "一行两个正整数 $l,r$，代表求和的起始和终点。", "outputFormat": "输出一行一个正整数，代表 $\\sum_{k=l}^rf(k)$。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n以样例一中计算 $f(2)$ 为例。最初有 $2$ 叠牌，从下到上的牌都是 $[1,2,3,4]$。然后现在对第一叠牌不操作，第二叠牌洗一次，于是第二叠牌从下到上变成了 $[3,1,4,2]$。现在把两叠牌发给 $4$ 个人。第一个人拿到 $[1,3]$，第二个人拿到 $[2,1]$，第三个人拿到 $[3,4]$，第四个人拿到 $[4,2]$。发现每个人的幸运值都为 $1$（都恰好拿到了一张和自己号码相同的牌），于是幸运值总和就是 $4$，继而 $f(2)=4$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le l\\le r\\le 10^{10}$。\n\nSubtask 1（10 pts）：保证 $l=r$ 且 $r\\le 12$。\n\nSubtask 2（35 pts）：保证 $l=r$。\n\nSubtask 3（15 pts）：保证 $1\\le l\\le r\\le 10^6$。\n\nSubtask 4（40 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "彼岸 | To See the Next Part of the Dream", "background": "「“看见梦境的下一个部分”…？」\n\n“是啊… ‘尽管身体已是成年人，但内心却依旧是那个不切实际的小孩，依旧是那个相信自己有着无尽可能的小孩——即使是在认清了现实和理想的鸿沟后，还仍是如此。年少时那个成为摇滚巨星的梦，如今已显得分外不可及，只能在一次次前行中看见梦的下一个部分’… 不觉得作者和我很像吗？”\n\n“曾经年少的自己对一切的未知都怀揣着好奇与欣喜，但如今仿佛只是在如同抓住救命稻草一般抓住自己背离现实的梦想，然后在生活的洋流中逐渐看见梦的下一个部分… 明知自己的失败，却仍在仿佛为了看见什么、达成什么一样向上登攀，这样一来，和作者所描述的‘active loser’也没什么两样吧…”\n\n「所以，你所期望看见的、期望达成的，究竟是什么呢？」\n\n“…”\n\n“现在的我，已经不知道了。”\n\n> 나의 어리고 멍청했던 날들은 사라져줬으면\n>\n> 如果那些年少无知的日子消失掉就好了\n>\n> 나의 소중한 인연들 이제는 추억속으로만\n>\n> 珍贵的感情 现在仅仅存在于在记忆中\n>\n> 만약 이 세상이 전부 누군가의 또다른 꿈이었다면\n>\n> 如果这个世界 只是别人的梦\n>\n> 언젠가 깨어나게 될때 나는 지금과는 달라져있을까\n>\n> 某天醒来时 我会变得不一样吗", "description": "「那么，你相信宿命吗？」\n\n“那种东西，顶多只是什么励志故事里的抒情工具吧。”\n\n「是吗… 那么要玩玩塔罗牌吗？」\n\n“谁会对那种事情感兴趣…”\n\n「真是的，你要再一副对什么事情都漠不关心的态度我要生气了…！」\n\n“好好好… 所以呢？塔罗牌呢？”\n\n「这个嘛… 嘿嘿，自己想象咯～」\n\n“什么毛病…”\n\n「现在有 $n$ 叠塔罗牌放在桌上，每一叠都有 $2^n$ 张，从桌面向上分别是 $1$ 号、$2$ 号… $n$ 号。现在作为宿命的管理者的我们——要洗一遍这些塔罗牌！」\n\n“怎么… 中二病开始传染了吗…”\n\n「那么，洗牌的过程是，将牌均匀地分成两半，下面一半和上面一半分别放在左右手；接着，右手从底部放下一张牌，左手从底部放下一张牌，右手又从底部放下一张牌… 这样交错重复，于是一次洗牌就完成了！」\n\n“例如 $n=2$ 时，假设原来的牌从下往上看是 $[1,2,3,4]$，洗一次牌后就会变成 $[3,1,4,2]$——是这样吗？”\n\n「是的！然后对于这 $n$ 叠初始时都按顺序从下到上摆放的塔罗牌，我会不操作第一叠牌，然后洗一次第二叠牌，洗两次第三叠牌… 洗 $n-1$ 次第 $n$ 叠牌。接下来，我会把这 $n$ 叠牌都从下到上地发给 $2^n$ 个人——也就是说第一个人会拿到每叠牌的第一张，第二个人会拿到每叠牌的第二张… 每一个人都恰好会拿到 $n$ 张牌。」\n\n「现在，定义一个人拿到和自己号码相同的牌的张数为这个人的幸运值。你能算出这 $n$ 个人幸运值的总和是多少吗？」\n\n“嗯… 撇开你粗制滥造的题面不谈，这个题目还是很有趣的。”\n\n「适可而止啊喂！」\n\n“… 我想了想，好像还挺简单的。不妨让我们记 $n=k$ 的时候的幸运值总和为 $f(k)$。现在你需要对 $l\\le k\\le r$ 的 $f(k)$ 求和，你看怎么样？”\n\n「… 不是很会了…」\n\n### 简要题意\n\n对于长度为 $2k$ 的序列 $a$，定义函数 $S_q(a)$，其中\n\n$$\nS_q(a)=\n\\begin{cases}\na,&q=0\\\\\n[a_{k+1},a_1,a_{k+2},a_2,\\dots,a_{2k},a_k],&q=1\\\\\nS_{q-1}(S_1(a)),&\\text{otherwise.}\n\\end{cases}\n$$\n\n现在给定正整数 $l,r$，求 $\\sum_{k=l}^r f(k)$，其中\n\n$$\nf(n)=\\sum_{q=0}^{n-1}\\sum_{k=1}^{2^n}\\left[S_q([1,2,3,\\dots,2^n])_k=k\\right]\n$$", "inputFormat": "一行两个正整数 $l,r$，代表求和的起始和终点。", "outputFormat": "输出一行一个正整数，代表 $\\sum_{k=l}^rf(k)$。答案对 $998244353$ 取模。", "hint": "### 样例解释\n\n以样例一中计算 $f(2)$ 为例。最初有 $2$ 叠牌，从下到上的牌都是 $[1,2,3,4]$。然后现在对第一叠牌不操作，第二叠牌洗一次，于是第二叠牌从下到上变成了 $[3,1,4,2]$。现在把两叠牌发给 $4$ 个人。第一个人拿到 $[1,3]$，第二个人拿到 $[2,1]$，第三个人拿到 $[3,4]$，第四个人拿到 $[4,2]$。发现每个人的幸运值都为 $1$（都恰好拿到了一张和自己号码相同的牌），于是幸运值总和就是 $4$，继而 $f(2)=4$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le l\\le r\\le 10^{10}$。\n\nSubtask 1（10 pts）：保证 $l=r$ 且 $r\\le 12$。\n\nSubtask 2（35 pts）：保证 $l=r$。\n\nSubtask 3（15 pts）：保证 $1\\le l\\le r\\le 10^6$。\n\nSubtask 4（40 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8152", "type": "P", "difficulty": 1, "samples": [["2 2", "7"], ["5 3", "73"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「PMOI-5」破译", "background": "2077 年，穿越的 Lanuxhem 为与 2021 年的 Silver187 联系，发明了一种图形转数字的密码。", "description": "lhm 现在有一个边长为 $1$ 的正方形，现在要进行 $k$ 次分割，每次分割需要把位于图形中右下角的矩形继续分割成 $n \\times n$ 的矩形。分割完成后所有矩形的个数即为破译后的答案。lhm 需要聪明的你帮助他解决这个问题。\n\n注：由于题面形容比较困难，请移步至样例解释便于理解题意。", "inputFormat": "输入数据共一行。      \n一行两个整数 $n,k$，含义如题目所示。", "outputFormat": "输出格式共一行。  \n一行一个整数，表示最终答案。   \n由于答案可能过大，请把答案取模 $998244353$ 后输出。", "hint": "### 样例解释\n\n对于样例 #1，进行 $2$ 次分割，每次将右下角矩形分割为 $2\\times 2$ 的矩形。\n\n第一次分割，由于只有一个矩形，所以右下角矩形即为此矩形。分割前后如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdlnmb52.png)\n\n变为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cyemqw87.png)\n\n接下来进行第二次分割，将右下角矩形进行分割，分割为如下图形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9n3c3te2.png)\n\n此图形包含 $7$ 个矩形，因此答案为 $7$。\n\n### 数据规模与约定\n\n对于 $10\\%$ 的数据，$k=1$。          \n对于另 $20\\%$ 的数据，$1 \\leq n,k \\leq 10$。   \n对于 $100\\%$ 的数据，$1 \\leq n,k \\leq 10^9$。\n\n---\n\n$2022.7.10$：新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」破译", "background": "2077 年，穿越的 Lanuxhem 为与 2021 年的 Silver187 联系，发明了一种图形转数字的密码。", "description": "lhm 现在有一个边长为 $1$ 的正方形，现在要进行 $k$ 次分割，每次分割需要把位于图形中右下角的矩形继续分割成 $n \\times n$ 的矩形。分割完成后所有矩形的个数即为破译后的答案。lhm 需要聪明的你帮助他解决这个问题。\n\n注：由于题面形容比较困难，请移步至样例解释便于理解题意。", "inputFormat": "输入数据共一行。      \n一行两个整数 $n,k$，含义如题目所示。", "outputFormat": "输出格式共一行。  \n一行一个整数，表示最终答案。   \n由于答案可能过大，请把答案取模 $998244353$ 后输出。", "hint": "### 样例解释\n\n对于样例 #1，进行 $2$ 次分割，每次将右下角矩形分割为 $2\\times 2$ 的矩形。\n\n第一次分割，由于只有一个矩形，所以右下角矩形即为此矩形。分割前后如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdlnmb52.png)\n\n变为\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cyemqw87.png)\n\n接下来进行第二次分割，将右下角矩形进行分割，分割为如下图形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9n3c3te2.png)\n\n此图形包含 $7$ 个矩形，因此答案为 $7$。\n\n### 数据规模与约定\n\n对于 $10\\%$ 的数据，$k=1$。          \n对于另 $20\\%$ 的数据，$1 \\leq n,k \\leq 10$。   \n对于 $100\\%$ 的数据，$1 \\leq n,k \\leq 10^9$。\n\n---\n\n$2022.7.10$：新增加一组 $\\text{Hack}$ 数据。", "locale": "zh-CN"}}}
{"pid": "P8153", "type": "P", "difficulty": 4, "samples": [["1\n1100", "4"], ["5\n10010\n10000\n01110\n111111\n000000", "48 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "2022"], "title": "「PMOI-5」送分题/Yet Another Easy Strings Merging", "background": "**本题征集假做法和 hack 数据，如果您用假做法 AC 了，欢迎私信出题人提供 hack。**\n\n> 信息可能有冗余。\n\n——command_block 《考前小贴士》\n\ndjy 在看 P8001，看错题了，很自闭，然后就有了这个题。", "description": "给定 $n$ 个 01 串，每次你可以从某个串开头移除一个字符并把**剩下的字符串**加入一个新串 $S$ 的末尾。最大化 $S$ 中相邻两个字符相同的对数。\n\n例如你有 `1010 111` 两个串，如果你移除第一个串的第一个字符，则 `010` 被加入到 $S$ 中。\n\n**串可以重复使用。**", "inputFormat": "第一行一个正整数 $n$ 表示串的个数。\n\n接下来 $n$ 行，每行一个 01 字符串。", "outputFormat": "一行一个整数表示答案。\n\n", "hint": "【样例解释】\n\n依次取走第一个字符，$S$ 的变化过程为 `100->10000->100000`，答案为 $4$。\n\n【数据范围】\n\n记 $|s|$ 为字符串 $s$ 的长度，$s_i$ 为第 $i$ 个字符串  。    \n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$n,\\sum|s_i|\\le 11$；\n- Subtask 2（30 pts）：$n,\\sum|s_i|\\le 10^3$；\n- Subtask 3（30 pts）：$n,\\sum|s_i|\\le 10^5$；\n- Subtask 4（10 pts）：无特殊限制。   \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$n\\le \\sum |s_i|\\le 10^6$，$\\forall i\\in [1,n]$，$|s_i|\\ge 1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」送分题/Yet Another Easy Strings Merging", "background": "**本题征集假做法和 hack 数据，如果您用假做法 AC 了，欢迎私信出题人提供 hack。**\n\n> 信息可能有冗余。\n\n——command_block 《考前小贴士》\n\ndjy 在看 P8001，看错题了，很自闭，然后就有了这个题。", "description": "给定 $n$ 个 01 串，每次你可以从某个串开头移除一个字符并把**剩下的字符串**加入一个新串 $S$ 的末尾。最大化 $S$ 中相邻两个字符相同的对数。\n\n例如你有 `1010 111` 两个串，如果你移除第一个串的第一个字符，则 `010` 被加入到 $S$ 中。\n\n**串可以重复使用。**", "inputFormat": "第一行一个正整数 $n$ 表示串的个数。\n\n接下来 $n$ 行，每行一个 01 字符串。", "outputFormat": "一行一个整数表示答案。\n\n", "hint": "【样例解释】\n\n依次取走第一个字符，$S$ 的变化过程为 `100->10000->100000`，答案为 $4$。\n\n【数据范围】\n\n记 $|s|$ 为字符串 $s$ 的长度，$s_i$ 为第 $i$ 个字符串  。    \n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$n,\\sum|s_i|\\le 11$；\n- Subtask 2（30 pts）：$n,\\sum|s_i|\\le 10^3$；\n- Subtask 3（30 pts）：$n,\\sum|s_i|\\le 10^5$；\n- Subtask 4（10 pts）：无特殊限制。   \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$n\\le \\sum |s_i|\\le 10^6$，$\\forall i\\in [1,n]$，$|s_i|\\ge 1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8154", "type": "P", "difficulty": 5, "samples": [["1", "NO"], ["7", "YES\n2 4\n2 6\n4 6\n5 4\n6 4\n6 2\n4 2\n0 6\n2 8\n6 6\n8 2\n6 0\n3 0\n2 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["计算几何", "Special Judge", "枚举", "构造"], "title": "「PMOI-5」棋盘", "background": "", "description": "给定一个无限大的棋盘（可以看做平面直角坐标系）和黑白子各 $n$ 颗，要求将黑白子不重叠地摆在棋盘的整点上，使得**恰好**存在 $n$ 条直线使得：\n\n- 其穿过且**仅**穿过黑白子**共** 4 颗。\n\n- 其按顺序穿过黑，白，白，黑子。\n\n给出任意一种方案即可。", "inputFormat": "输入数据仅一行，为题目中所述的 $n$。", "outputFormat": "如果无法构造出方案，则输出 `NO`。\n\n否则输出 $2n+1$ 行：第一行输出 `YES`。第 $2\\sim n+1$ 行每行两个整数，为白子坐标 $x_i,y_i$。第 $n+2\\sim 2n+1$ 行每行两个整数，为黑子坐标 $x_j,y_j$。\n\n你需要保证 $-5\\times 10^5\\le x_i,y_i,x_j,y_j\\le 5\\times 10^5$。", "hint": "【样例解释】\n\n样例 2 解释：（输出按顺序为点 $A\\sim N$（点 $A\\sim G$ 为白子，点 $H\\sim N$ 为黑子），直线如图所示）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zyo823p8.png)\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n\\equiv 0 \\pmod{7}$；\n- Subtask 2（20 pts）：$40\\le n\\le 400$；\n- Subtask 3（30 pts）：$1\\le n\\le 9$；\n- Subtask 4（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^3$。\n\n[SPJ地址](https://www.luogu.com.cn/paste/eamtmrw5)\n\n使用方法：编译为 `checker.exe` 后命令行同一目录下输入 ```checker.exe chessboard.in chessboard.out chessboard.ans```\n\n需要搭配 `testlib.h` 一起使用，[testlib下载地址](https://github.com/MikeMirzayanov/testlib)。\n\n如果发现 SPJ 出锅了请找出题人。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」棋盘", "background": "", "description": "给定一个无限大的棋盘（可以看做平面直角坐标系）和黑白子各 $n$ 颗，要求将黑白子不重叠地摆在棋盘的整点上，使得**恰好**存在 $n$ 条直线使得：\n\n- 其穿过且**仅**穿过黑白子**共** 4 颗。\n\n- 其按顺序穿过黑，白，白，黑子。\n\n给出任意一种方案即可。", "inputFormat": "输入数据仅一行，为题目中所述的 $n$。", "outputFormat": "如果无法构造出方案，则输出 `NO`。\n\n否则输出 $2n+1$ 行：第一行输出 `YES`。第 $2\\sim n+1$ 行每行两个整数，为白子坐标 $x_i,y_i$。第 $n+2\\sim 2n+1$ 行每行两个整数，为黑子坐标 $x_j,y_j$。\n\n你需要保证 $-5\\times 10^5\\le x_i,y_i,x_j,y_j\\le 5\\times 10^5$。", "hint": "【样例解释】\n\n样例 2 解释：（输出按顺序为点 $A\\sim N$（点 $A\\sim G$ 为白子，点 $H\\sim N$ 为黑子），直线如图所示）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zyo823p8.png)\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n\\equiv 0 \\pmod{7}$；\n- Subtask 2（20 pts）：$40\\le n\\le 400$；\n- Subtask 3（30 pts）：$1\\le n\\le 9$；\n- Subtask 4（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^3$。\n\n[SPJ地址](https://www.luogu.com.cn/paste/eamtmrw5)\n\n使用方法：编译为 `checker.exe` 后命令行同一目录下输入 ```checker.exe chessboard.in chessboard.out chessboard.ans```\n\n需要搭配 `testlib.h` 一起使用，[testlib下载地址](https://github.com/MikeMirzayanov/testlib)。\n\n如果发现 SPJ 出锅了请找出题人。", "locale": "zh-CN"}}}
{"pid": "P8155", "type": "P", "difficulty": 5, "samples": [["5 5\n5 4 3 2 1", "4"], ["10 6154\n1 3 6 4 2 5 7 8 1 2\n", "263"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化"], "title": "「PMOI-5」公约数变换", "background": "", "description": "给出一个常数 $m$ 和长度为 $n$ 的序列 $a$。\n\n定义一次「公约数变换」为：   \n先令 $b_i\\leftarrow a_i+\\gcd(m,a_1,...,a_i)$，最后令 $a_i\\leftarrow b_i$。（注意是先把每个 $b_i$ 都算出来再一一赋值，而不是边算边赋值）\n\n请问最少做几次「公约数变换」使得 $\\forall i \\in[1,n]$，$m|a_i$。\n\n**可以证明一定有解。**", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示序列长度和给出的常数。   \n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "【样例解释 1】  \n\n第一次「公约数变换」后的序列为 $10,5,4,3,2$。    \n第二次「公约数变换」后的序列为 $15,10,5,4,3$。   \n第三次「公约数变换」后的序列为 $20,15,10,5,4$。   \n第四次「公约数变换」后的序列为 $25,20,15,10,5$。   \n可以得出答案为 $4$。\n\n【数据范围】   \n**本题采用捆绑测试。**\n\n- Subtask1（5pts）：$m=1$；\n- Subtask2（10pts）：$m=2$；\n- Subtask3（10pts）：$n=1$ 且 $m\\le 500$；\n- Subtask4（15pts）：$n=1$；\n- Subtask5（10pts）：$n\\le 5000$；\n- Subtask6（20pts）：$n\\le 5\\times 10^4$；\n- Subtask7（10pts）：$m,a_i\\le 10^{9}$；\n- Subtask8（20pts）：无特殊限制；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{5}$，$1\\le m\\le 10^{14}$，$1\\le a_i\\le 10^{18}$。保证答案在 `long long` 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」公约数变换", "background": "", "description": "给出一个常数 $m$ 和长度为 $n$ 的序列 $a$。\n\n定义一次「公约数变换」为：   \n先令 $b_i\\leftarrow a_i+\\gcd(m,a_1,...,a_i)$，最后令 $a_i\\leftarrow b_i$。（注意是先把每个 $b_i$ 都算出来再一一赋值，而不是边算边赋值）\n\n请问最少做几次「公约数变换」使得 $\\forall i \\in[1,n]$，$m|a_i$。\n\n**可以证明一定有解。**", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示序列长度和给出的常数。   \n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "【样例解释 1】  \n\n第一次「公约数变换」后的序列为 $10,5,4,3,2$。    \n第二次「公约数变换」后的序列为 $15,10,5,4,3$。   \n第三次「公约数变换」后的序列为 $20,15,10,5,4$。   \n第四次「公约数变换」后的序列为 $25,20,15,10,5$。   \n可以得出答案为 $4$。\n\n【数据范围】   \n**本题采用捆绑测试。**\n\n- Subtask1（5pts）：$m=1$；\n- Subtask2（10pts）：$m=2$；\n- Subtask3（10pts）：$n=1$ 且 $m\\le 500$；\n- Subtask4（15pts）：$n=1$；\n- Subtask5（10pts）：$n\\le 5000$；\n- Subtask6（20pts）：$n\\le 5\\times 10^4$；\n- Subtask7（10pts）：$m,a_i\\le 10^{9}$；\n- Subtask8（20pts）：无特殊限制；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^{5}$，$1\\le m\\le 10^{14}$，$1\\le a_i\\le 10^{18}$。保证答案在 `long long` 范围内。", "locale": "zh-CN"}}}
{"pid": "P8156", "type": "P", "difficulty": 6, "samples": [["1\n5 17\n8 10 12 8 45\n16 17 18 18 14\n3 2\n4 3\n6 3\n7 2\n8 2\n10 2\n11 2\n12 4\n13 2\n14 3\n18 3\n19 2\n21 9\n22 9\n23 9\n24 9\n25 9", "OK\n1 1 2 3 1 3 2 2 1 2 2 4 2 3 1 1 1 3 2 1 9 9 9 9 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "「PMOI-5」奇怪的方程", "background": "", "description": "给出一个 $n$，现在有 $n\\times n$ 个未知数 $a_{1},a_{2},\\cdots,a_{n\\times n}$。\n\n给出 $2\\times n$ 个方程，方程共有两种，每种分别有 $n$ 个。\n\n第一种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{(i-1)\\times n+j}=A_i$。   \n第二种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{i+(j-1)\\times n}=B_i$。\n\n可这太简单了，给出 $m$ 个限制，你需要保证 $a_{p_i}=q_i$。\n\n请求出任意一组合法的解。无解输出 `No Solution`，否则先输出 `OK`，接着给出解，其中 $\\forall i\\in[1,n^2]$，$a_i \\in[-2^{63},2^{63})$ 且是个整数。", "inputFormat": "**本题多组数据。**\n\n第一行一个整数 $T$，表示数据组数。  \n对于每组数据：  \n第一行两个整数 $n$ 和 $m$。   \n第二行 $n$ 个整数，第 $i$ 个整数表示 $A_i$。     \n第三行 $n$ 个整数，第 $i$ 个整数表示 $B_i$。   \n接下来 $m$ 行，每行两个整数，表示 $p_i,q_i$。", "outputFormat": "对于每组数据：      \n第一行一个字符串，表示是否有解。   \n如果有解，接下来一行 $n\\times n$ 个整数，第 $i$ 个整数表示 $a_i$。", "hint": "**本题采用捆绑测试。**\n\n- Subtask1（1pts）：$n=1$；\n- Subtask2（4pts）：$n\\le3$；\n- Subtask3（10pts）：$n\\le 10$；\n- Subtask4（15pts）：$n\\le 100$；\n- Subtask5（20pts）：$m\\le n-1$；\n- Subtask6（10pts）：$m=0$；\n- Subtask7（20pts）：$T\\le 10$，$n\\le 500$；\n- Subtask8（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n \\le 2000$，$1\\le \\sum n^2\\le 4\\times 10^6$，$-5\\times 10^{12}\\le A_i,B_i\\le 5\\times 10^{12}$，$0\\le m\\le n^2$，$1\\le p_i\\le n^2$，$-10^9\\le q_i\\le 10^9$。保证 $p_i$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」奇怪的方程", "background": "", "description": "给出一个 $n$，现在有 $n\\times n$ 个未知数 $a_{1},a_{2},\\cdots,a_{n\\times n}$。\n\n给出 $2\\times n$ 个方程，方程共有两种，每种分别有 $n$ 个。\n\n第一种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{(i-1)\\times n+j}=A_i$。   \n第二种方程的 $i$ 个方程为 $\\sum_{j=1}^na_{i+(j-1)\\times n}=B_i$。\n\n可这太简单了，给出 $m$ 个限制，你需要保证 $a_{p_i}=q_i$。\n\n请求出任意一组合法的解。无解输出 `No Solution`，否则先输出 `OK`，接着给出解，其中 $\\forall i\\in[1,n^2]$，$a_i \\in[-2^{63},2^{63})$ 且是个整数。", "inputFormat": "**本题多组数据。**\n\n第一行一个整数 $T$，表示数据组数。  \n对于每组数据：  \n第一行两个整数 $n$ 和 $m$。   \n第二行 $n$ 个整数，第 $i$ 个整数表示 $A_i$。     \n第三行 $n$ 个整数，第 $i$ 个整数表示 $B_i$。   \n接下来 $m$ 行，每行两个整数，表示 $p_i,q_i$。", "outputFormat": "对于每组数据：      \n第一行一个字符串，表示是否有解。   \n如果有解，接下来一行 $n\\times n$ 个整数，第 $i$ 个整数表示 $a_i$。", "hint": "**本题采用捆绑测试。**\n\n- Subtask1（1pts）：$n=1$；\n- Subtask2（4pts）：$n\\le3$；\n- Subtask3（10pts）：$n\\le 10$；\n- Subtask4（15pts）：$n\\le 100$；\n- Subtask5（20pts）：$m\\le n-1$；\n- Subtask6（10pts）：$m=0$；\n- Subtask7（20pts）：$T\\le 10$，$n\\le 500$；\n- Subtask8（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n \\le 2000$，$1\\le \\sum n^2\\le 4\\times 10^6$，$-5\\times 10^{12}\\le A_i,B_i\\le 5\\times 10^{12}$，$0\\le m\\le n^2$，$1\\le p_i\\le n^2$，$-10^9\\le q_i\\le 10^9$。保证 $p_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P8157", "type": "P", "difficulty": 6, "samples": [["5 2\n2 3 1 3 2\n2\n6", "5\n4"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「PMOI-5」肥宅快乐水", "background": "lhm 喝肥宅快乐水的时候想到了这个 idea，于是就叫它肥宅快乐水。\n\n~~此题为弱化版，强化版敬请期待 Ynoi。~~\n\n特别感谢：验题人 双管荧光灯 吊打了此题的 std！", "description": "lhm 的手中有 $n$ 个宽度为 $1$ 的矩形水平排列组成的多边形，其中第 $i$ 个矩形的高度为 $a_i$。现在他会进行 $k$ 次操作，每次使一个宽度为 $1$ 的矩形高度减 $1$，求他每次操作后的最大子矩形面积（显然，子矩形必须是连续的一块）。\n\n**注意任何情况高度都大于等于 $0$。**\n\n由于 lhm 太菜了，所以想要请聪明的你来帮他解决。", "inputFormat": "输入数据共 $k+2$ 行。   \n第一行两个整数 $n,k$，含义如题所示。    \n第二行 $n$ 个整数 $a_i$，第 $i$ 个整数表示第 $i$ 个矩形的高度。    \n接下来 $k$ 行，每行一个整数 $\\operatorname{id}'$，操作编号 $\\operatorname{id}=\\operatorname{id}'\\bigoplus \\operatorname{lastans}$。其中 $\\operatorname{lastans}$ 为上一次询问的答案，最开始 $\\operatorname{lastans}=0$。", "outputFormat": "输出数据共 $k$ 行。   \n每行一个整数，表示每次询问所求答案。", "hint": "**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | $n, k$ |\n| :-----------: | :---:| :-----------: |\n| 1 | 10 | $\\leq 500$ |\n| 2 | 10 | $\\leq 5000$ |\n| 3 | 40 | $\\leq 10^5$ |\n| 4 | 40 | $\\leq 5\\times10^5$ |\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le 5\\times 10^5$，$1\\leq a_i\\leq 10^9$。保证 $\\operatorname{id}'$ 在 `long long` 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」肥宅快乐水", "background": "lhm 喝肥宅快乐水的时候想到了这个 idea，于是就叫它肥宅快乐水。\n\n~~此题为弱化版，强化版敬请期待 Ynoi。~~\n\n特别感谢：验题人 双管荧光灯 吊打了此题的 std！", "description": "lhm 的手中有 $n$ 个宽度为 $1$ 的矩形水平排列组成的多边形，其中第 $i$ 个矩形的高度为 $a_i$。现在他会进行 $k$ 次操作，每次使一个宽度为 $1$ 的矩形高度减 $1$，求他每次操作后的最大子矩形面积（显然，子矩形必须是连续的一块）。\n\n**注意任何情况高度都大于等于 $0$。**\n\n由于 lhm 太菜了，所以想要请聪明的你来帮他解决。", "inputFormat": "输入数据共 $k+2$ 行。   \n第一行两个整数 $n,k$，含义如题所示。    \n第二行 $n$ 个整数 $a_i$，第 $i$ 个整数表示第 $i$ 个矩形的高度。    \n接下来 $k$ 行，每行一个整数 $\\operatorname{id}'$，操作编号 $\\operatorname{id}=\\operatorname{id}'\\bigoplus \\operatorname{lastans}$。其中 $\\operatorname{lastans}$ 为上一次询问的答案，最开始 $\\operatorname{lastans}=0$。", "outputFormat": "输出数据共 $k$ 行。   \n每行一个整数，表示每次询问所求答案。", "hint": "**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | $n, k$ |\n| :-----------: | :---:| :-----------: |\n| 1 | 10 | $\\leq 500$ |\n| 2 | 10 | $\\leq 5000$ |\n| 3 | 40 | $\\leq 10^5$ |\n| 4 | 40 | $\\leq 5\\times10^5$ |\n\n对于 $100\\%$ 的数据，$1\\le n,k\\le 5\\times 10^5$，$1\\leq a_i\\leq 10^9$。保证 $\\operatorname{id}'$ 在 `long long` 范围内。", "locale": "zh-CN"}}}
{"pid": "P8158", "type": "P", "difficulty": 6, "samples": [["2 2", "1 0"], ["5 15", "815216641 0"], ["114 514", "636199406 569855248"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "快速傅里叶变换 FFT"], "title": "「PMOI-5」分力", "background": "", "description": "平面直角坐标系上有一个半径为 $1$、圆心在 $(0,0)$ 的圆。\n\n这个圆上等距标记了 $n$ 个红点，存在一个点落在 $x$ 正半轴上。\n\nNaCly\\_Fish 也站在 $(0,0)$ 上，等概率随机对着一个红点，用 $1 \\text N$ 的力去推。\n\n设她的推力在 $x$ 和 $y$ 轴上的分力分别为 $F_x$、$F_y$，她想知道这两个随机变量的 $k$ 阶中心矩分别是多少。\n\n对于随机变量 $x$，其 $k$ 阶中心矩定义为 $E((x-E(x))^k)$，$E(x)$ 为 $x$ 的期望值。\n\n可以证明答案**一定是有理数**，所以将答案要对 $998244353$ 取模。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行两个整数，分别表示 $F_x$ 和 $F_y$ 的 $k$ 阶中心矩的值。", "hint": "【样例一解释】  \n二阶中心矩就是方差。由于只能朝着 $x$ 的正负方向推，$F_y$ 总是零，方差也就是零；$F_x$ 可以是 $\\pm 1$，概率相等，方差就是 $1$。 \n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$2\\le n,k \\le 20$；  \n- Subtask 2（14 pts）：$2\\le n \\le 100$；  \n- Subtask 3（19 pts）：$2\\le n \\le 10^3$；  \n- Subtask 4（23 pts）：$2\\le k \\le 10^7$；     \n- Subtask 5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3 \\times 10^4$，$2\\le k \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」分力", "background": "", "description": "平面直角坐标系上有一个半径为 $1$、圆心在 $(0,0)$ 的圆。\n\n这个圆上等距标记了 $n$ 个红点，存在一个点落在 $x$ 正半轴上。\n\nNaCly\\_Fish 也站在 $(0,0)$ 上，等概率随机对着一个红点，用 $1 \\text N$ 的力去推。\n\n设她的推力在 $x$ 和 $y$ 轴上的分力分别为 $F_x$、$F_y$，她想知道这两个随机变量的 $k$ 阶中心矩分别是多少。\n\n对于随机变量 $x$，其 $k$ 阶中心矩定义为 $E((x-E(x))^k)$，$E(x)$ 为 $x$ 的期望值。\n\n可以证明答案**一定是有理数**，所以将答案要对 $998244353$ 取模。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行两个整数，分别表示 $F_x$ 和 $F_y$ 的 $k$ 阶中心矩的值。", "hint": "【样例一解释】  \n二阶中心矩就是方差。由于只能朝着 $x$ 的正负方向推，$F_y$ 总是零，方差也就是零；$F_x$ 可以是 $\\pm 1$，概率相等，方差就是 $1$。 \n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$2\\le n,k \\le 20$；  \n- Subtask 2（14 pts）：$2\\le n \\le 100$；  \n- Subtask 3（19 pts）：$2\\le n \\le 10^3$；  \n- Subtask 4（23 pts）：$2\\le k \\le 10^7$；     \n- Subtask 5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3 \\times 10^4$，$2\\le k \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8159", "type": "P", "difficulty": 7, "samples": [["2 3 5 2\n1 3 2 2\n2 3 1 1", "13"], ["3 89 1000000 4\n2 222 19 2\n4 66666 1 9\n5 114514 8 10\n", "299126098"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「PMOI-5」一道防不住 AK 的水题", "background": "本题加强版在[这](https://www.luogu.com.cn/problem/U203487)。", "description": "有 $m$ 个盒子和 $n$ 个操作，盒子编号为 $0\\dots m-1$。第 $i$ 个操作一共会进行 $r_i-l_i+1$ 轮，第 $j$ 轮会在编号为 $(k(j-1+l_i)+b_i)\\bmod m$ 的盒子里放 $a_i$ 个球（$j$ 从 $1$ 开始枚举）。\n\n在所有操作完成后，你需要选出 $p$ 个不同的且编号不相邻的盒子，定义一次选择的价值为 $p$ 个盒子里面球个数的乘积。求所有选择方案的价值和模 $10^9+7$。", "inputFormat": "第一行四个整数 $n,k,m,p$，表示操作个数，两种关于操作参数和选出的盒子个数。  \n接下来 $n$ 行，第 $i$ 行四个非负整数 $l_i,r_i,b_i,a_i$ 表示一次操作的参数。", "outputFormat": "一个整数表示价值和对 $10^9+7$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（10pts）：$m\\le 10^6$;\n- Subtask 2（5pts）：$p=1$;\n- Subtask 3（30pts）：$n\\le 10$，$m\\le 10^9$;\n- Subtask 4（30pts）：保证 $k$ 和 $m$ 互质;\n- Subtask 5（25pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 7000$，$1\\le m\\le 10^{18}$，$1\\le p\\le 4$，$0\\le b_i< m$，$0<k<m$，$0\\le l_i\\le r_i< m$，$0\\le a_i<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-5」一道防不住 AK 的水题", "background": "本题加强版在[这](https://www.luogu.com.cn/problem/U203487)。", "description": "有 $m$ 个盒子和 $n$ 个操作，盒子编号为 $0\\dots m-1$。第 $i$ 个操作一共会进行 $r_i-l_i+1$ 轮，第 $j$ 轮会在编号为 $(k(j-1+l_i)+b_i)\\bmod m$ 的盒子里放 $a_i$ 个球（$j$ 从 $1$ 开始枚举）。\n\n在所有操作完成后，你需要选出 $p$ 个不同的且编号不相邻的盒子，定义一次选择的价值为 $p$ 个盒子里面球个数的乘积。求所有选择方案的价值和模 $10^9+7$。", "inputFormat": "第一行四个整数 $n,k,m,p$，表示操作个数，两种关于操作参数和选出的盒子个数。  \n接下来 $n$ 行，第 $i$ 行四个非负整数 $l_i,r_i,b_i,a_i$ 表示一次操作的参数。", "outputFormat": "一个整数表示价值和对 $10^9+7$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（10pts）：$m\\le 10^6$;\n- Subtask 2（5pts）：$p=1$;\n- Subtask 3（30pts）：$n\\le 10$，$m\\le 10^9$;\n- Subtask 4（30pts）：保证 $k$ 和 $m$ 互质;\n- Subtask 5（25pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 7000$，$1\\le m\\le 10^{18}$，$1\\le p\\le 4$，$0\\le b_i< m$，$0<k<m$，$0\\le l_i\\le r_i< m$，$0\\le a_i<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P8160", "type": "P", "difficulty": 2, "samples": [["4\n14\n9\n8\n12\n6\n2\n3\n5\n7\n11\n13\n", "7\n9\n1\n1\n1\n3\n"], ["13\n1\n4\n1\n4\n2\n1\n3\n5\n6\n2\n3\n7\n3\n8\n2\n10\n11\n13\n15\n17\n18\n20\n", "1\n1\n1\n1\n5\n3\n1\n3\n"], ["16\n536870912\n402653184\n536870912\n536870912\n134217728\n536870912\n671088640\n536870912\n536870912\n536870912\n939524096\n805306368\n536870912\n956301312\n536870912\n536870912\n5\n2500000000\n3355443201\n4294967296\n5111111111\n6190792704\n", "5\n1\n7\n57\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888]}, "tags": ["二分", "2022", "O2优化", "前缀和", "JOI（日本）"], "title": "[JOI 2022 Final] 星际蛋糕 / Intercastellar", "background": "在 30XX 年，由于科学家和工程师的不断努力，不同星球之间的互动变得非常活跃。比太郎是一只河狸，他现在是一项交流项目的大使。他的任务是向不同星球的居民介绍地球上的食物。他将在下午 1 点出发去 JOI 星球。\n\n现在，比太郎正计划向 JOI 星球的居民介绍 castella。castella 已经被切成了若干段。castella 是一种由面粉、鸡蛋、糖和淀粉糖浆制成的烘烤海绵蛋糕。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/krpqlhl4.png)", "description": "castella 的形状是一个在水平方向上很长的长方体。它被切成了 $N$ 段，其中从左往右的第 $i$ 段的长度为整数 $A_i$。\n\n几分钟前，我们得知 JOI 星球的居民不喜欢偶数。为了解决此问题，你需要不断执行下列操作，直到不存在长度为偶数的段。\n\n1. 在长度为偶数的段中，你选择最靠右的一段。\n2. 你将选中的这一段切成两个长度相等的段。也就是说，假设选中的这一段的长度是 $k$，你将其切成长度为 $\\displaystyle \\frac{k}{2}$ 的两段。你不改变其他段的位置。\n\n为了确认操作是否被正确地执行了，比太郎让你回答 $Q$ 个询问。第 $j$ 个询问如下：\n\n- 当所有操作执行完毕后，从左往右的第 $X_j$ 段的长度为多少？\n\n给定 castella 的信息与询问，请写一个程序回答所有询问。", "inputFormat": "第一行，一个正整数 $N$。\n\n接下来 $N$ 行，第 $i$ 行一个正整数 $A_i$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $j$ 行一个正整数 $X_j$。", "outputFormat": "输出 $Q$ 行，第 $j$ 行一个数，表示第 $j$ 个询问的答案。", "hint": "**【样例解释 \\#1】**\n\n一开始，castella 从左到右的段的长度分别为 $14, 9, 8, 12$。\n\n当所有操作执行完毕后，castella 被切成了 $15$ 段。从左到右的段的长度分别为 $7, 7, 9, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3, 3, 3$。\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N, Q \\le 2 \\times {10}^5$，$1 \\le A_i \\le {10}^9$，$1 \\le X_j \\le {10}^{15}$，$X_j \\le X_{j + 1}$，保证当所有操作执行完毕后，castella 被切成了至少 $X_Q$ 段。\n\n- 子任务 $1$（$25$ 分）：$A_i \\le 8$。\n- 子任务 $2$（$35$ 分）：$N, Q \\le 1000$。\n- 子任务 $3$（$40$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T1「[インターカステラー](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1.pdf) / [Intercastellar](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 星际蛋糕 / Intercastellar", "background": "在 30XX 年，由于科学家和工程师的不断努力，不同星球之间的互动变得非常活跃。比太郎是一只河狸，他现在是一项交流项目的大使。他的任务是向不同星球的居民介绍地球上的食物。他将在下午 1 点出发去 JOI 星球。\n\n现在，比太郎正计划向 JOI 星球的居民介绍 castella。castella 已经被切成了若干段。castella 是一种由面粉、鸡蛋、糖和淀粉糖浆制成的烘烤海绵蛋糕。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/krpqlhl4.png)", "description": "castella 的形状是一个在水平方向上很长的长方体。它被切成了 $N$ 段，其中从左往右的第 $i$ 段的长度为整数 $A_i$。\n\n几分钟前，我们得知 JOI 星球的居民不喜欢偶数。为了解决此问题，你需要不断执行下列操作，直到不存在长度为偶数的段。\n\n1. 在长度为偶数的段中，你选择最靠右的一段。\n2. 你将选中的这一段切成两个长度相等的段。也就是说，假设选中的这一段的长度是 $k$，你将其切成长度为 $\\displaystyle \\frac{k}{2}$ 的两段。你不改变其他段的位置。\n\n为了确认操作是否被正确地执行了，比太郎让你回答 $Q$ 个询问。第 $j$ 个询问如下：\n\n- 当所有操作执行完毕后，从左往右的第 $X_j$ 段的长度为多少？\n\n给定 castella 的信息与询问，请写一个程序回答所有询问。", "inputFormat": "第一行，一个正整数 $N$。\n\n接下来 $N$ 行，第 $i$ 行一个正整数 $A_i$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $j$ 行一个正整数 $X_j$。", "outputFormat": "输出 $Q$ 行，第 $j$ 行一个数，表示第 $j$ 个询问的答案。", "hint": "**【样例解释 \\#1】**\n\n一开始，castella 从左到右的段的长度分别为 $14, 9, 8, 12$。\n\n当所有操作执行完毕后，castella 被切成了 $15$ 段。从左到右的段的长度分别为 $7, 7, 9, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3, 3, 3$。\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $2, 3$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N, Q \\le 2 \\times {10}^5$，$1 \\le A_i \\le {10}^9$，$1 \\le X_j \\le {10}^{15}$，$X_j \\le X_{j + 1}$，保证当所有操作执行完毕后，castella 被切成了至少 $X_Q$ 段。\n\n- 子任务 $1$（$25$ 分）：$A_i \\le 8$。\n- 子任务 $2$（$35$ 分）：$N, Q \\le 1000$。\n- 子任务 $3$（$40$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T1「[インターカステラー](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1.pdf) / [Intercastellar](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t1-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8161", "type": "P", "difficulty": 3, "samples": [["3 3\n19 4 5\n2 6 2\n", "18\n"], ["2 1\n9 7\n2 6\n", "7\n"], ["5 60000\n630510219 369411957 874325200 990002527 567203997\n438920902 634940661 593780254 315929832 420627496\n", "41397427274960\n"], ["4 25\n1 2 3 4\n1 2 3 4\n", "48\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888]}, "tags": ["贪心", "二分", "2022", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 自学 / Self Study", "background": "", "description": "在 JOI 高中高一的第三个学期的 $M$ 个星期的时间内，有 $N$ 门课，编号为 $1 \\sim N$。每个星期有 $N$ 个课时，第 $i$ 个课时上课程 $i$ 的一节课。\n\n比太郎是一位高一学生。对于 $N \\times M$ 个课时中的每一个，他会选择如下行动中的一个：\n\n- 行动 1：比太郎去上课。如果他去上了课程 $i$ 的一节课，那么他对课程 $i$ 的理解程度会增加 $A_i$。\n- 行动 2：比太郎不去上课。他转而选择任意一门课，并且自学选中的那门课。如果他选中了课程 $i$ 进行了时长为一课时的自学，那么他对课程 $i$ 的理解程度会增加 $B_i$。\n\n一开始，对每门课的理解程度都为 $0$。由于比太郎想要在课后练习算法竞赛，他在非上课时间内不会学习。当第三个学期的所有课时结束后，期末考就会举行。\n\n比太郎不想挂科。所以他想要最大化在期末考时对每门课的理解程度的最小值。\n\n给定学期的长度，课程的数量，以及对理解程度的提升数值，请写一个程序计算在期末考时对每门课的理解程度的最小值的最大可能值。", "inputFormat": "第一行，两个正整数 $N, M$。\n\n第二行，$N$ 个正整数 $A_1, A_2, \\ldots, A_N$。\n\n第三行，$N$ 个正整数 $B_1, B_2, \\ldots, B_N$。", "outputFormat": "输出一行，一个数，表示在期末考时对每门课的理解程度的最小值的最大可能值。", "hint": "**【样例解释 \\#1】**\n\n举个例子，如果比太郎按如下方式学习，则他对课程 $1, 2, 3$ 的理解程度将分别为 $19, 18, 19$。\n\n- 第一周课程 $1$ 的课：自学课程 $2$；\n- 第一周课程 $2$ 的课：自学课程 $2$；\n- 第一周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第二周课程 $1$ 的课：去上课程 $1$ 的课；\n- 第二周课程 $2$ 的课：自学课程 $3$；\n- 第二周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第三周课程 $1$ 的课：自学课程 $3$；\n- 第三周课程 $2$ 的课：自学课程 $2$；\n- 第三周课程 $3$ 的课：去上课程 $3$ 的课。\n\n由于对每门课的最小的理解程度不能大于等于 $19$，输出 $18$。\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 3, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N \\le 3 \\times {10}^5$，$1 \\le M \\le {10}^9$，$1 \\le A_i, B_i \\le {10}^9$。\n\n- 子任务 $1$（$10$ 分）：$M = 1$。\n- 子任务 $2$（$25$ 分）：$N \\cdot M \\le 3 \\times {10}^5$，$A_i = B_i$。\n- 子任务 $3$（$27$ 分）：$N \\cdot M \\le 3 \\times {10}^5$。\n- 子任务 $4$（$29$ 分）：$A_i = B_i$。\n- 子任务 $5$（$9$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T2「[自習](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2.pdf) / [Self Study](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 自学 / Self Study", "background": "", "description": "在 JOI 高中高一的第三个学期的 $M$ 个星期的时间内，有 $N$ 门课，编号为 $1 \\sim N$。每个星期有 $N$ 个课时，第 $i$ 个课时上课程 $i$ 的一节课。\n\n比太郎是一位高一学生。对于 $N \\times M$ 个课时中的每一个，他会选择如下行动中的一个：\n\n- 行动 1：比太郎去上课。如果他去上了课程 $i$ 的一节课，那么他对课程 $i$ 的理解程度会增加 $A_i$。\n- 行动 2：比太郎不去上课。他转而选择任意一门课，并且自学选中的那门课。如果他选中了课程 $i$ 进行了时长为一课时的自学，那么他对课程 $i$ 的理解程度会增加 $B_i$。\n\n一开始，对每门课的理解程度都为 $0$。由于比太郎想要在课后练习算法竞赛，他在非上课时间内不会学习。当第三个学期的所有课时结束后，期末考就会举行。\n\n比太郎不想挂科。所以他想要最大化在期末考时对每门课的理解程度的最小值。\n\n给定学期的长度，课程的数量，以及对理解程度的提升数值，请写一个程序计算在期末考时对每门课的理解程度的最小值的最大可能值。", "inputFormat": "第一行，两个正整数 $N, M$。\n\n第二行，$N$ 个正整数 $A_1, A_2, \\ldots, A_N$。\n\n第三行，$N$ 个正整数 $B_1, B_2, \\ldots, B_N$。", "outputFormat": "输出一行，一个数，表示在期末考时对每门课的理解程度的最小值的最大可能值。", "hint": "**【样例解释 \\#1】**\n\n举个例子，如果比太郎按如下方式学习，则他对课程 $1, 2, 3$ 的理解程度将分别为 $19, 18, 19$。\n\n- 第一周课程 $1$ 的课：自学课程 $2$；\n- 第一周课程 $2$ 的课：自学课程 $2$；\n- 第一周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第二周课程 $1$ 的课：去上课程 $1$ 的课；\n- 第二周课程 $2$ 的课：自学课程 $3$；\n- 第二周课程 $3$ 的课：去上课程 $3$ 的课；\n- 第三周课程 $1$ 的课：自学课程 $3$；\n- 第三周课程 $2$ 的课：自学课程 $2$；\n- 第三周课程 $3$ 的课：去上课程 $3$ 的课。\n\n由于对每门课的最小的理解程度不能大于等于 $19$，输出 $18$。\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 3, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $3, 5$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le N \\le 3 \\times {10}^5$，$1 \\le M \\le {10}^9$，$1 \\le A_i, B_i \\le {10}^9$。\n\n- 子任务 $1$（$10$ 分）：$M = 1$。\n- 子任务 $2$（$25$ 分）：$N \\cdot M \\le 3 \\times {10}^5$，$A_i = B_i$。\n- 子任务 $3$（$27$ 分）：$N \\cdot M \\le 3 \\times {10}^5$。\n- 子任务 $4$（$29$ 分）：$A_i = B_i$。\n- 子任务 $5$（$9$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T2「[自習](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2.pdf) / [Self Study](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8162", "type": "P", "difficulty": 5, "samples": [["3\n3\n1 5\n2 3\n4 5\n", "5.500000000000000\n"], ["7\n4\n4 -1\n11 -1\n6 -1\n12 -1\n36 -1\n11 -1\n20 -1\n", "32.000000000000000\n"], ["5\n3\n4 -1\n5 -1\n6 -1\n7 7\n8 8\n", "11.500000000000000\n"], ["7\n5\n28 36\n11 57\n20 35\n19 27\n31 33\n25 56\n38 51\n", "62.166666666666664\n"], ["20\n14\n106 277\n175 217\n170 227\n164 245\n118 254\n139 261\n142 270\n185 200\n162 241\n153 239\n128 264\n103 299\n147 248\n158 236\n160 232\n183 205\n194 197\n135 260\n153 234\n128 260\n", "644.203571428571422\n"]], "limits": {"time": [1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600, 1600], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "2022", "Special Judge", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 让我们赢得选举 / Let's Win the Election", "background": "", "description": "JOI 共和国有 $N$ 个州，编号为 $1 \\sim N$。在 2022 年，JOI 共和国将举行总统大选。选举将在每个州分别举行。每个州的获胜者将赢得该州的一张选票。\n\nRie 将竞选总统，她正计划赢得选举。她决定以发表演讲的方式来提高自己的可靠程度。在她发表演讲后，下列事件可能会发生。\n\n- 如果在第 $i$ 个州的总演讲时间达到了 $A_i$ 小时，她将赢得该州的一张选票。\n- 如果在第 $i$ 个州的总演讲时间达到了 $B_i$ 小时，她将获得一名来自该州的协作者。\n- 有可能 Rie 在第 $i$ 个州无法获得协作者。此种情况下，$B_i = -1$，否则保证 $B_i > A_i$。\n\n来自第 $i$ 个州的协作者可以在第 $i$ 个州外发表演讲。多个人可以同时在同一个州发表演讲。举个例子，如果两个人在某个州同时发表了 $x$ 小时的演讲，则该州的总演讲时间将增加 $2 x$ 小时。演讲的时间不必是整数个小时。我们可以忽略在两州之间的交通耗时。\n\n大选日快到了，Rie 想要尽快得到 $K$ 张选票。\n\n给定州的数量和每个州的信息，写一个程序计算得到 $K$ 张选票的最小耗时（以小时为单位）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，一个正整数 $K$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $A_i, B_i$。", "outputFormat": "输出一行，一个数，表示得到 $K$ 张选票的最小耗时（以小时为单位）。\n\n如果你的输出与正确答案的差值的绝对值不超过 $0.01$ 则你的提交将被判断为正确。你的输出应使用如下格式：\n\n- 一个整数（例：`123`，`0`，`-2022`）。\n- 一个依次包含一个整数，一个句点，和一个仅包含 $0 \\sim 9$ 的数位的字符串的序列。其不应当包含分隔符。对小数点后的数位长度无限制（例：`123.4`，`-123.00`，`0.00288`）。\n\n输出不应使用指数表示法。举个例子，`1.23456e+05` 和 `1.23456e5` 不被允许。", "hint": "**【样例解释 \\#1】**\n\n按照如下方案进行演讲，Rie 将在 $5.5$ 小时内赢得每个州的选票。\n\n- 在第 $2$ 个州演讲 $2$ 个小时，赢得一张选票。\n- 在第 $2$ 个州再演讲 $1$ 个小时，获得一个协作者。\n- 在第 $3$ 个州与协作者一起演讲 $2$ 个小时，赢得一张选票。\n- 在第 $1$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $3, 4, 5, 6, 7$ 的性质。\n\n**【样例解释 \\#2】**\n\n按照如下方案进行演讲，Rie 将在 $32$ 小时内赢得 $4$ 张选票。\n\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。\n- 在第 $2$ 个州演讲 $11$ 个小时，赢得一张选票。\n- 在第 $3$ 个州演讲 $6$ 个小时，赢得一张选票。\n- 在第 $6$ 个州演讲 $11$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $1, 2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#3】**\n\n按照如下方案进行演讲，Rie 将在 $11.5$ 小时内赢得 $3$ 张选票。\n\n- 在第 $4$ 个州演讲 $7$ 个小时，赢得一张选票，并获得一个协作者。\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。与此同时，协作者在第 $2$ 个州演讲 $4$ 个小时。\n- 在第 $2$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#5】**\n\n这个样例满足子任务 $4, 5, 7$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le K \\le N \\le 500$，$1 \\le A_i \\le 1000$，$A_i \\le B_i \\le 1000$ 或 $B_i = -1$。\n\n- 子任务 $1$（$5$ 分）：$B_i = -1$。\n- 子任务 $2$（$5$ 分）：$B_i = -1$ 或 $B_i = A_i$。\n- 子任务 $3$（$11$ 分）：$N \\le 7$。\n- 子任务 $4$（$12$ 分）：$N \\le 20$。\n- 子任务 $5$（$33$ 分）：$N \\le 100$。\n- 子任务 $6$（$11$ 分）：$K = N$。\n- 子任务 $7$（$23$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T3「[選挙で勝とう](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3.pdf) / [Let's Win the Election](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 让我们赢得选举 / Let's Win the Election", "background": "", "description": "JOI 共和国有 $N$ 个州，编号为 $1 \\sim N$。在 2022 年，JOI 共和国将举行总统大选。选举将在每个州分别举行。每个州的获胜者将赢得该州的一张选票。\n\nRie 将竞选总统，她正计划赢得选举。她决定以发表演讲的方式来提高自己的可靠程度。在她发表演讲后，下列事件可能会发生。\n\n- 如果在第 $i$ 个州的总演讲时间达到了 $A_i$ 小时，她将赢得该州的一张选票。\n- 如果在第 $i$ 个州的总演讲时间达到了 $B_i$ 小时，她将获得一名来自该州的协作者。\n- 有可能 Rie 在第 $i$ 个州无法获得协作者。此种情况下，$B_i = -1$，否则保证 $B_i > A_i$。\n\n来自第 $i$ 个州的协作者可以在第 $i$ 个州外发表演讲。多个人可以同时在同一个州发表演讲。举个例子，如果两个人在某个州同时发表了 $x$ 小时的演讲，则该州的总演讲时间将增加 $2 x$ 小时。演讲的时间不必是整数个小时。我们可以忽略在两州之间的交通耗时。\n\n大选日快到了，Rie 想要尽快得到 $K$ 张选票。\n\n给定州的数量和每个州的信息，写一个程序计算得到 $K$ 张选票的最小耗时（以小时为单位）。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，一个正整数 $K$。\n\n接下来 $N$ 行，第 $i$ 行两个正整数 $A_i, B_i$。", "outputFormat": "输出一行，一个数，表示得到 $K$ 张选票的最小耗时（以小时为单位）。\n\n如果你的输出与正确答案的差值的绝对值不超过 $0.01$ 则你的提交将被判断为正确。你的输出应使用如下格式：\n\n- 一个整数（例：`123`，`0`，`-2022`）。\n- 一个依次包含一个整数，一个句点，和一个仅包含 $0 \\sim 9$ 的数位的字符串的序列。其不应当包含分隔符。对小数点后的数位长度无限制（例：`123.4`，`-123.00`，`0.00288`）。\n\n输出不应使用指数表示法。举个例子，`1.23456e+05` 和 `1.23456e5` 不被允许。", "hint": "**【样例解释 \\#1】**\n\n按照如下方案进行演讲，Rie 将在 $5.5$ 小时内赢得每个州的选票。\n\n- 在第 $2$ 个州演讲 $2$ 个小时，赢得一张选票。\n- 在第 $2$ 个州再演讲 $1$ 个小时，获得一个协作者。\n- 在第 $3$ 个州与协作者一起演讲 $2$ 个小时，赢得一张选票。\n- 在第 $1$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $3, 4, 5, 6, 7$ 的性质。\n\n**【样例解释 \\#2】**\n\n按照如下方案进行演讲，Rie 将在 $32$ 小时内赢得 $4$ 张选票。\n\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。\n- 在第 $2$ 个州演讲 $11$ 个小时，赢得一张选票。\n- 在第 $3$ 个州演讲 $6$ 个小时，赢得一张选票。\n- 在第 $6$ 个州演讲 $11$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $1, 2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#3】**\n\n按照如下方案进行演讲，Rie 将在 $11.5$ 小时内赢得 $3$ 张选票。\n\n- 在第 $4$ 个州演讲 $7$ 个小时，赢得一张选票，并获得一个协作者。\n- 在第 $1$ 个州演讲 $4$ 个小时，赢得一张选票。与此同时，协作者在第 $2$ 个州演讲 $4$ 个小时。\n- 在第 $2$ 个州与协作者一起演讲 $0.5$ 个小时，赢得一张选票。\n\n这个样例满足子任务 $2, 3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $3, 4, 5, 7$ 的限制。\n\n**【样例解释 \\#5】**\n\n这个样例满足子任务 $4, 5, 7$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le K \\le N \\le 500$，$1 \\le A_i \\le 1000$，$A_i \\le B_i \\le 1000$ 或 $B_i = -1$。\n\n- 子任务 $1$（$5$ 分）：$B_i = -1$。\n- 子任务 $2$（$5$ 分）：$B_i = -1$ 或 $B_i = A_i$。\n- 子任务 $3$（$11$ 分）：$N \\le 7$。\n- 子任务 $4$（$12$ 分）：$N \\le 20$。\n- 子任务 $5$（$33$ 分）：$N \\le 100$。\n- 子任务 $6$（$11$ 分）：$K = N$。\n- 子任务 $7$（$23$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T3「[選挙で勝とう](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3.pdf) / [Let's Win the Election](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8163", "type": "P", "difficulty": 6, "samples": [["5 2\n2\n5 1\n3 5\n3\n5 3\n3 2\n2 1\n", "1\n2\n-1\n"], ["6 3\n2\n1 6\n5 1\n4\n5 1\n6 3\n3 6\n2 1\n", "1\n-1\n1\n2\n"], ["6 5\n4\n3 1\n2 4\n5 3\n4 6\n5\n1 5\n3 2\n2 6\n6 3\n5 4\n", "-1\n1\n2\n-1\n1\n"], ["12 1\n5\n1 7\n10 12\n3 5\n8 10\n5 9\n7\n2 11\n5 8\n3 12\n4 6\n1 9\n9 10\n1 4\n", "-1\n1\n4\n-1\n2\n-1\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888, 549888]}, "tags": ["倍增", "2022", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 铁路旅行 2 / Railway Trip 2", "background": null, "description": "IOI 铁路公司在一条铁轨上运营线路。铁轨为一条直线，该铁轨上有 $N$ 个车站，编号为 $1 \\sim N$。车站 $i$ 与车站 $i + 1$ 之间由一条铁轨直接连接。\n\nIOI 铁路公司正在运营 $M$ 条线路，编号为 $1 \\sim M$。线路 $j$ 的起点为 $A_j$，终点为 $B_j$，列车在每一站均会停靠，即如果 $A_j < B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j + 1, \\ldots, B_j$ 停靠。如果 $A_j > B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j - 1, \\ldots, B_j$ 停靠。\n\nJOI 君是一个旅行者。他有 $Q$ 个旅行计划。在第 $k$ 个旅行计划中他计划从车站 $S_k$ 通过乘坐列车前往车站 $T_k$。\n\n然而，JOI 君因长途跋涉而疲惫不堪。他希望他乘坐的列车均有空座以便休息。因此 JOI 君只会在线路起点起的 $K$ 站范围内（含起点）上车。换句话说，对于线路 $j$，如果 $A_j < B_j$，那么他只会在车站 $A_j, A_j + 1, \\ldots, \\min \\{ A_j + K - 1, B_j - 1 \\}$ 乘上线路 $j$ 的列车。如果 $A_j > B_j$，那么他只会在车站 $A_j, A_j - 1, \\ldots, \\max \\{ A_j - K + 1, B_j + 1 \\}$ 乘上线路 $j$ 的列车。\n\n在这些条件下，JOI 君希望尽量减少乘坐火车的次数。\n\n给出 IOI 铁路公司的线路信息和 JOI 君的计划，写一个程序计算对于 JOI 君的每一个计划，他所需的最小乘车次数。", "inputFormat": "第一行，两个正整数 $N, K$。\n\n第二行，一个正整数 $M$。\n\n接下来 $M$ 行，第 $j$ 行两个正整数 $A_j, B_j$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $k$ 行两个正整数 $S_k, T_k$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行一个数，表示对于 JOI 君的第 $k$ 个计划，他实现该计划所需的最小乘车次数。如果无论如何无法实现第 $k$ 个计划，则输出 `-1`。", "hint": "**【样例解释 \\#1】**\n\n对于第一个计划，JOI 君要从车站 $5$ 前往车站 $3$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $5$ 乘上 $1$ 号线的列车，并在车站 $3$ 下车。JOI 君总共乘坐了一次列车。由于不可能花费比 $1$ 更少的乘车次数实现该计划，在第一行输出 $1$。\n\n对于第二个计划，JOI 君要从车站 $3$ 前往车站 $2$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $3$ 乘上 $2$ 号线的列车，并在车站 $4$ 下车；然后在车站 $4$ 乘上 $1$ 号线的列车，并在车站 $2$ 下车。JOI 君总共乘坐了两次列车。由于不可能花费比 $2$ 更少的乘车次数实现该计划，在第二行输出 $2$。\n\n对于第一个计划，JOI 君要从车站 $2$ 前往车站 $1$。由于无论如何无法实现该计划，在第三行输出 `-1`。\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $1, 2, 4, 6$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $1, 2, 5, 6$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$2 \\le N \\le {10}^5$，$1 \\le K \\le N - 1$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le Q \\le 5 \\times {10}^4$，$1 \\le A_j, B_j, S_k, T_k \\le N$，$A_j \\ne B_j$，$S_k \\ne T_k$，$(A_j, B_j) \\ne (A_k, B_k)$（$j \\ne k$），$(S_k, T_k) \\ne (S_l, T_l)$（$k \\ne l$）。\n\n- 子任务 $1$（$8$ 分）：$N, M, Q \\le 300$。\n- 子任务 $2$（$8$ 分）：$N, M, Q \\le 2000$。\n- 子任务 $3$（$11$ 分）：$Q = 1$。\n- 子任务 $4$（$25$ 分）：$K = N - 1$。\n- 子任务 $5$（$35$ 分）：$A_j < B_j$，$S_k < T_k$。\n- 子任务 $6$（$13$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T4「[鉄道旅行 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4.pdf) / [Railway Trip 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 铁路旅行 2 / Railway Trip 2", "background": null, "description": "IOI 铁路公司在一条铁轨上运营线路。铁轨为一条直线，该铁轨上有 $N$ 个车站，编号为 $1 \\sim N$。车站 $i$ 与车站 $i + 1$ 之间由一条铁轨直接连接。\n\nIOI 铁路公司正在运营 $M$ 条线路，编号为 $1 \\sim M$。线路 $j$ 的起点为 $A_j$，终点为 $B_j$，列车在每一站均会停靠，即如果 $A_j < B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j + 1, \\ldots, B_j$ 停靠。如果 $A_j > B_j$，一列 $j$ 号线的列车会按顺序在车站 $A_j, A_j - 1, \\ldots, B_j$ 停靠。\n\nJOI 君是一个旅行者。他有 $Q$ 个旅行计划。在第 $k$ 个旅行计划中他计划从车站 $S_k$ 通过乘坐列车前往车站 $T_k$。\n\n然而，JOI 君因长途跋涉而疲惫不堪。他希望他乘坐的列车均有空座以便休息。因此 JOI 君只会在线路起点起的 $K$ 站范围内（含起点）上车。换句话说，对于线路 $j$，如果 $A_j < B_j$，那么他只会在车站 $A_j, A_j + 1, \\ldots, \\min \\{ A_j + K - 1, B_j - 1 \\}$ 乘上线路 $j$ 的列车。如果 $A_j > B_j$，那么他只会在车站 $A_j, A_j - 1, \\ldots, \\max \\{ A_j - K + 1, B_j + 1 \\}$ 乘上线路 $j$ 的列车。\n\n在这些条件下，JOI 君希望尽量减少乘坐火车的次数。\n\n给出 IOI 铁路公司的线路信息和 JOI 君的计划，写一个程序计算对于 JOI 君的每一个计划，他所需的最小乘车次数。", "inputFormat": "第一行，两个正整数 $N, K$。\n\n第二行，一个正整数 $M$。\n\n接下来 $M$ 行，第 $j$ 行两个正整数 $A_j, B_j$。\n\n接下来一行，一个正整数 $Q$。\n\n接下来 $Q$ 行，第 $k$ 行两个正整数 $S_k, T_k$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行一个数，表示对于 JOI 君的第 $k$ 个计划，他实现该计划所需的最小乘车次数。如果无论如何无法实现第 $k$ 个计划，则输出 `-1`。", "hint": "**【样例解释 \\#1】**\n\n对于第一个计划，JOI 君要从车站 $5$ 前往车站 $3$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $5$ 乘上 $1$ 号线的列车，并在车站 $3$ 下车。JOI 君总共乘坐了一次列车。由于不可能花费比 $1$ 更少的乘车次数实现该计划，在第一行输出 $1$。\n\n对于第二个计划，JOI 君要从车站 $3$ 前往车站 $2$。具体地，此计划可以通过如下方式实现：JOI 君在车站 $3$ 乘上 $2$ 号线的列车，并在车站 $4$ 下车；然后在车站 $4$ 乘上 $1$ 号线的列车，并在车站 $2$ 下车。JOI 君总共乘坐了两次列车。由于不可能花费比 $2$ 更少的乘车次数实现该计划，在第二行输出 $2$。\n\n对于第一个计划，JOI 君要从车站 $2$ 前往车站 $1$。由于无论如何无法实现该计划，在第三行输出 `-1`。\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#2】**\n\n这个样例满足子任务 $1, 2, 6$ 的限制。\n\n**【样例解释 \\#3】**\n\n这个样例满足子任务 $1, 2, 4, 6$ 的限制。\n\n**【样例解释 \\#4】**\n\n这个样例满足子任务 $1, 2, 5, 6$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$2 \\le N \\le {10}^5$，$1 \\le K \\le N - 1$，$1 \\le M \\le 2 \\times {10}^5$，$1 \\le Q \\le 5 \\times {10}^4$，$1 \\le A_j, B_j, S_k, T_k \\le N$，$A_j \\ne B_j$，$S_k \\ne T_k$，$(A_j, B_j) \\ne (A_k, B_k)$（$j \\ne k$），$(S_k, T_k) \\ne (S_l, T_l)$（$k \\ne l$）。\n\n- 子任务 $1$（$8$ 分）：$N, M, Q \\le 300$。\n- 子任务 $2$（$8$ 分）：$N, M, Q \\le 2000$。\n- 子任务 $3$（$11$ 分）：$Q = 1$。\n- 子任务 $4$（$25$ 分）：$K = N - 1$。\n- 子任务 $5$（$35$ 分）：$A_j < B_j$，$S_k < T_k$。\n- 子任务 $6$（$13$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T4「[鉄道旅行 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4.pdf) / [Railway Trip 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t4-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8164", "type": "P", "difficulty": 7, "samples": [["1 5\n2 4 7 1 5\n", "10\n"], ["3 2\n18 10\n19 12\n17 13\n", "15\n"], ["3 5\n83 47 36 38 40\n13 10 26 68 67\n15 19 20 70 90\n", "65\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304, 1122304]}, "tags": ["2022", "O2优化", "JOI（日本）"], "title": "[JOI 2022 Final] 沙堡 2 / Sandcastle 2", "background": "", "description": "JOI 君在沙滩上玩耍。他建造了一座沙堡。这座由 JOI 君建造的沙堡位于沙滩上的一个矩形区域内。这个矩形区域有 $H$ 行 $W$ 列。位于从上往下的第 $i$ 行、从左往右的第 $j$ 列的格子的高度为 $A_{i, j}$。**注意所有 $\\boldsymbol{A_{i, j}}$ 的值互不相同。**\n\n在沙堡上，JOI 君执行了下列动作。\n\n1. 首先，JOI 君选择一个格子，他从该格子开始移动。\n2. 然后，他从当前格子出发朝上下左右四个方向之一移动到相邻的格子上。他必须移动到低于当前格子的格子上。他可以重复此动作零次或更多次。\n\n最终，如果我们从上往下看，他经过的格子将形成一个矩形。\n\n给定每个格子的高度信息 $A_{i, j}$，写一个程序计算所有可能的由 JOI 君经过的格子组成的矩形的数量。", "inputFormat": "第一行，两个正整数 $H, W$。\n\n接下来 $H$ 行，第 $i$ 行 $W$ 个正整数 $A_{i, 1}, A_{i, 2}, \\ldots, A_{i, W}$。", "outputFormat": "输出一行，一个数，表示所有可能的由 JOI 君经过的格子组成的矩形的数量。", "hint": "**【样例解释 \\#1】**\n\n由于有 $10$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ctry6t23.png)\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#2】**\n\n由于有 $15$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $15$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2zaim5fy.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n举个例子，如下矩形可以由 JOI 君经过的格子组成。由于总共有 $65$ 个可能的矩形，输出 $65$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q6y9c6d5.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le H, W, H \\cdot W \\le 5 \\times {10}^4$，$1 \\le A_{i, j} \\le {10}^7$，$A_{i_1, j_1} \\ne A_{i_2, j_2}$（$(i_1, j_1) \\ne (i_2, j_2)$）。\n\n- 子任务 $1$（$9$ 分）：$H = 1$。\n- 子任务 $2$（$10$ 分）：$H \\cdot W \\le 100$。\n- 子任务 $3$（$5$ 分）：$H \\cdot W \\le 1500$。\n- 子任务 $4$（$56$ 分）：$H \\cdot W \\le 7000$。\n- 子任务 $5$（$20$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T5「[砂の城 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5.pdf) / [Sandcastle 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5-en.pdf)」**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2022 Final] 沙堡 2 / Sandcastle 2", "background": "", "description": "JOI 君在沙滩上玩耍。他建造了一座沙堡。这座由 JOI 君建造的沙堡位于沙滩上的一个矩形区域内。这个矩形区域有 $H$ 行 $W$ 列。位于从上往下的第 $i$ 行、从左往右的第 $j$ 列的格子的高度为 $A_{i, j}$。**注意所有 $\\boldsymbol{A_{i, j}}$ 的值互不相同。**\n\n在沙堡上，JOI 君执行了下列动作。\n\n1. 首先，JOI 君选择一个格子，他从该格子开始移动。\n2. 然后，他从当前格子出发朝上下左右四个方向之一移动到相邻的格子上。他必须移动到低于当前格子的格子上。他可以重复此动作零次或更多次。\n\n最终，如果我们从上往下看，他经过的格子将形成一个矩形。\n\n给定每个格子的高度信息 $A_{i, j}$，写一个程序计算所有可能的由 JOI 君经过的格子组成的矩形的数量。", "inputFormat": "第一行，两个正整数 $H, W$。\n\n接下来 $H$ 行，第 $i$ 行 $W$ 个正整数 $A_{i, 1}, A_{i, 2}, \\ldots, A_{i, W}$。", "outputFormat": "输出一行，一个数，表示所有可能的由 JOI 君经过的格子组成的矩形的数量。", "hint": "**【样例解释 \\#1】**\n\n由于有 $10$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $10$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ctry6t23.png)\n\n这个样例满足所有子任务的限制。\n\n**【样例解释 \\#2】**\n\n由于有 $15$ 个可能的由 JOI 君经过的格子组成的矩形，输出 $15$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2zaim5fy.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n**【样例解释 \\#3】**\n\n举个例子，如下矩形可以由 JOI 君经过的格子组成。由于总共有 $65$ 个可能的矩形，输出 $65$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q6y9c6d5.png)\n\n这个样例满足子任务 $2, 3, 4, 5$ 的限制。\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$1 \\le H, W, H \\cdot W \\le 5 \\times {10}^4$，$1 \\le A_{i, j} \\le {10}^7$，$A_{i_1, j_1} \\ne A_{i_2, j_2}$（$(i_1, j_1) \\ne (i_2, j_2)$）。\n\n- 子任务 $1$（$9$ 分）：$H = 1$。\n- 子任务 $2$（$10$ 分）：$H \\cdot W \\le 100$。\n- 子任务 $3$（$5$ 分）：$H \\cdot W \\le 1500$。\n- 子任务 $4$（$56$ 分）：$H \\cdot W \\le 7000$。\n- 子任务 $5$（$20$ 分）：无特殊限制。\n\n----\n\n**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T5「[砂の城 2 ](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5.pdf) / [Sandcastle 2](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t5-en.pdf)」**", "locale": "zh-CN"}}}
{"pid": "P8165", "type": "P", "difficulty": 4, "samples": [["8 3\n7 2 5 1 9 3 4 6\n3\n2 2 7 4\n1 2 5 8\n2 2 7 3", "52\n50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] AddK", "background": "", "description": "给定一个包含 $N$ 个整数 $A_1,\\dots,A_N$ 的数组 $A$ 和一个整数 $K$。你需要进行 $Q$ 次操作，包括下列两种类型：\n\n- $1$ $i_1$ $i_2$ $\\dots$ $i_K$：将 $A_{i_1},A_{i_2},\\dots,A_{i_{K-1}},A_{i_K}$ 的值依次替换为 $A_{i_2},A_{i_3},\\dots,A_{i_K},A_{i_1}$ 的值。其中，$i_1,\\dots,i_k$ 互不相同。\n- $2$ $l$ $r$ $m$：输出 $[l,r]$ 区间内所有长度为 $m$ 的连续子序列的元素和。", "inputFormat": "第一行两个整数 $N,K$。\n\n第二行 $N$ 个整数，表示数组 $A$ 的 $N$ 个整数。\n\n第三行一个整数 $Q$，表示操作次数。\n\n接下来 $Q$ 行，每行若干个整数，表示一次操作。", "outputFormat": "输出包含若干行整数，即为所有操作 $2$ 的结果。", "hint": "#### 样例解释\n\n第一次询问需要求出 $\\{2,5,1,9,3,4\\}$ 中所有长度为 $4$ 的连续子序列的元素和。这些子序列包括 $\\{2,5,1,9\\},\\{5,1,9,3\\},\\{1,9,3,4\\}$。因此答案为 $52$。\n\n第二次询问需要将 $A_2,A_5,A_8$ 依次替换为 $A_5,A_8,A_2$ 的值。替换后数组变为 $\\{7,9,5,1,6,3,4,2\\}$。\n\n第三次询问需要求出 $\\{9,5,1,6,3,4\\}$ 中所有长度为 $3$ 的连续子序列的元素和。这些子序列包括 $\\{9,5,1\\},\\{5,1,6\\},\\{1,6,3\\},\\{6,3,4\\}$。因此答案为 $50$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（36 pts）：$1 \\le N,Q \\le 10^4$ 且 $K=1$。\n- Subtask 2（56 pts）：$10001 \\le N,Q \\le 10^5$ 且 $K=1$。\n- Subtask 3（8 pts）：$1 \\le N,Q \\le 10^5$ 且 $2 \\le K \\le 10$。\n\n对于 $100\\%$ 的数据，$0 \\le A_i \\le 10^6$，$1 \\le l \\le r \\le N$，$1 \\le m \\le r-l+1$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 A AddK。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] AddK", "background": "", "description": "给定一个包含 $N$ 个整数 $A_1,\\dots,A_N$ 的数组 $A$ 和一个整数 $K$。你需要进行 $Q$ 次操作，包括下列两种类型：\n\n- $1$ $i_1$ $i_2$ $\\dots$ $i_K$：将 $A_{i_1},A_{i_2},\\dots,A_{i_{K-1}},A_{i_K}$ 的值依次替换为 $A_{i_2},A_{i_3},\\dots,A_{i_K},A_{i_1}$ 的值。其中，$i_1,\\dots,i_k$ 互不相同。\n- $2$ $l$ $r$ $m$：输出 $[l,r]$ 区间内所有长度为 $m$ 的连续子序列的元素和。", "inputFormat": "第一行两个整数 $N,K$。\n\n第二行 $N$ 个整数，表示数组 $A$ 的 $N$ 个整数。\n\n第三行一个整数 $Q$，表示操作次数。\n\n接下来 $Q$ 行，每行若干个整数，表示一次操作。", "outputFormat": "输出包含若干行整数，即为所有操作 $2$ 的结果。", "hint": "#### 样例解释\n\n第一次询问需要求出 $\\{2,5,1,9,3,4\\}$ 中所有长度为 $4$ 的连续子序列的元素和。这些子序列包括 $\\{2,5,1,9\\},\\{5,1,9,3\\},\\{1,9,3,4\\}$。因此答案为 $52$。\n\n第二次询问需要将 $A_2,A_5,A_8$ 依次替换为 $A_5,A_8,A_2$ 的值。替换后数组变为 $\\{7,9,5,1,6,3,4,2\\}$。\n\n第三次询问需要求出 $\\{9,5,1,6,3,4\\}$ 中所有长度为 $3$ 的连续子序列的元素和。这些子序列包括 $\\{9,5,1\\},\\{5,1,6\\},\\{1,6,3\\},\\{6,3,4\\}$。因此答案为 $50$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（36 pts）：$1 \\le N,Q \\le 10^4$ 且 $K=1$。\n- Subtask 2（56 pts）：$10001 \\le N,Q \\le 10^5$ 且 $K=1$。\n- Subtask 3（8 pts）：$1 \\le N,Q \\le 10^5$ 且 $2 \\le K \\le 10$。\n\n对于 $100\\%$ 的数据，$0 \\le A_i \\le 10^6$，$1 \\le l \\le r \\le N$，$1 \\le m \\le r-l+1$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 A AddK。", "locale": "zh-CN"}}}
{"pid": "P8166", "type": "P", "difficulty": 5, "samples": [["2\n7\n7 3 5 1 3 3 5\n6\n1 2 3 5 8 3", "2 4 6\n2 3 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] Kpart", "background": null, "description": "当一个只包含正整数的数组 $A$ 的所有长度为 $K$ 的连续子序列都能够被分成元素和相等的两部分时，数组 $A$ 就被称为 $K$ 数组。例如，$\\{1,2,1,3\\}$ 是一个 $3$ 数组，因为 $\\{1,2,1\\}$ 可被分为 $\\{1,1\\}$ 和 $\\{2\\}$ 且和均为 $2$，而 $\\{2,1,3\\}$ 可被分为 $\\{1,2\\}$ 和 $\\{3\\}$ 且和均为 $3$。但该数组不是 $2$ 数组，因为 $\\{1,2\\}$ 不能分成元素和相等的两个部分。\n\n给定 $T$ 个只包含正整数的数组，分别求每个数组为 $K$ 数组时所有 $K$ 的取值。", "inputFormat": "第一行一个整数 $T$。\n\n接下来将描述 $T$ 个数组。其中第一行包含整数 $N$，第二行 $N$ 个整数，表示数组的元素。", "outputFormat": "输出 $T$ 行，每行先输出符合要求的 $K$ 的个数，然后从小到大输出所有符合要求的 $K$ 的值。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le N \\le 30$。\n- Subtask 2（20 pts）：$31 \\le N \\le 120$。\n- Subtask 3（70 pts）：$121 \\le N \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 20$，每个数组的元素和均不超过 $10^5$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 B Kpart。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] Kpart", "background": null, "description": "当一个只包含正整数的数组 $A$ 的所有长度为 $K$ 的连续子序列都能够被分成元素和相等的两部分时，数组 $A$ 就被称为 $K$ 数组。例如，$\\{1,2,1,3\\}$ 是一个 $3$ 数组，因为 $\\{1,2,1\\}$ 可被分为 $\\{1,1\\}$ 和 $\\{2\\}$ 且和均为 $2$，而 $\\{2,1,3\\}$ 可被分为 $\\{1,2\\}$ 和 $\\{3\\}$ 且和均为 $3$。但该数组不是 $2$ 数组，因为 $\\{1,2\\}$ 不能分成元素和相等的两个部分。\n\n给定 $T$ 个只包含正整数的数组，分别求每个数组为 $K$ 数组时所有 $K$ 的取值。", "inputFormat": "第一行一个整数 $T$。\n\n接下来将描述 $T$ 个数组。其中第一行包含整数 $N$，第二行 $N$ 个整数，表示数组的元素。", "outputFormat": "输出 $T$ 行，每行先输出符合要求的 $K$ 的个数，然后从小到大输出所有符合要求的 $K$ 的值。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le N \\le 30$。\n- Subtask 2（20 pts）：$31 \\le N \\le 120$。\n- Subtask 3（70 pts）：$121 \\le N \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 20$，每个数组的元素和均不超过 $10^5$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 B Kpart。", "locale": "zh-CN"}}}
{"pid": "P8167", "type": "P", "difficulty": 6, "samples": [["3 3", "5 4 6\n1 0 2\n9 8 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2021] XCopy", "background": "", "description": "给定正整数 $N,M$。\n\n请构造一个 $N \\times M$ 的只包含非负整数的矩阵，使得每个元素互不相同且相邻（上下左右）元素在二进制下只有一位不同，同时保证矩阵的最大元素最小。", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "一个 $N \\times M$ 的只包含非负整数的矩阵。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n本题采用部分分计分，分数取决于输出答案和正确答案的大小。其中「答案」指的是矩阵中的最大元素。\n\n设 $S$ 为该测试点的总分，$O$ 为正确答案。那么当 $G$ 为输出答案时，得分为：\n\n$$S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0)$$\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果，即 $\\lfloor S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0) \\rfloor$。例如，当 $S=7,G=15,O=10$ 时，按上式得分约为 $4.14$ ，但在洛谷上得分为 $4$。\n\n如果输出矩阵不满足要求（即元素互不相同且相邻元素在二进制下只有一位不同），那么该测试点计 $0$ 分。\n\n注意，由于 Special Judge 对于格式要求较高，请在输出答案时**不要在每行末尾添加多余空格**，否则对应测试点会被计为 $0$ 分。另外，请不要输出超出 $[0,2^{63})$ 范围（long long）的整数，否则会被判为格式错误，计 $0$ 分。\n\n#### 样例解释\n\n样例矩阵如下：\n\n|$0101_2=5_{10}$|$0100_2=4_{10}$|$0110_2=6_{10}$|\n| :----------: | :----------: | :----------: |\n|$0001_2=1_{10}$|$0000_2=0_{10}$|$0010_2=2_{10}$|\n|$1001_2=9_{10}$|$1000_2=8_{10}$|$1010_2=10_{10}$|\n\n通过观察不难发现，每两个相邻元素在二进制下都只有一位不同。这种做法的答案为 $10$（即最大元素），是所有做法中最小的。当然，其它的最大元素为 $10$ 的矩阵也是符合题意的（例如将输入矩阵进行翻转操作等）。\n\n一种可以获得部分分的做法是：\n\n|$0110_2$|$0111_2$|$0101_2$|\n| :----------: | :----------: | :----------: |\n|$1110_2$|$1111_2$|$1101_2$|\n|$1010_2$|$1011_2$|$1001_2$|\n\n该矩阵的最大元素为 $15$。根据评分规则，这种做法在下取整前可以获得对应测试点 $\\max(1-\\sqrt{\\dfrac{\\frac{15}{10}-1}{3}},0)=1-\\dfrac{\\sqrt{6}}{6} \\approx 59\\%$ 的分数。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$N=1$。\n- Subtask 2（9 pts）：$N,M$ 是 $2$ 的整数幂。\n- Subtask 3（14 pts）：$N$ 是 $2$ 的整数幂。\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2000$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 C XCopy。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/cbrnaqp0) 进行 hack。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] XCopy", "background": "", "description": "给定正整数 $N,M$。\n\n请构造一个 $N \\times M$ 的只包含非负整数的矩阵，使得每个元素互不相同且相邻（上下左右）元素在二进制下只有一位不同，同时保证矩阵的最大元素最小。", "inputFormat": "一行两个正整数 $N,M$。", "outputFormat": "一个 $N \\times M$ 的只包含非负整数的矩阵。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n本题采用部分分计分，分数取决于输出答案和正确答案的大小。其中「答案」指的是矩阵中的最大元素。\n\n设 $S$ 为该测试点的总分，$O$ 为正确答案。那么当 $G$ 为输出答案时，得分为：\n\n$$S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0)$$\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果，即 $\\lfloor S \\times \\max(1-\\sqrt{\\dfrac{\\frac{G}{O}-1}{3}},0) \\rfloor$。例如，当 $S=7,G=15,O=10$ 时，按上式得分约为 $4.14$ ，但在洛谷上得分为 $4$。\n\n如果输出矩阵不满足要求（即元素互不相同且相邻元素在二进制下只有一位不同），那么该测试点计 $0$ 分。\n\n注意，由于 Special Judge 对于格式要求较高，请在输出答案时**不要在每行末尾添加多余空格**，否则对应测试点会被计为 $0$ 分。另外，请不要输出超出 $[0,2^{63})$ 范围（long long）的整数，否则会被判为格式错误，计 $0$ 分。\n\n#### 样例解释\n\n样例矩阵如下：\n\n|$0101_2=5_{10}$|$0100_2=4_{10}$|$0110_2=6_{10}$|\n| :----------: | :----------: | :----------: |\n|$0001_2=1_{10}$|$0000_2=0_{10}$|$0010_2=2_{10}$|\n|$1001_2=9_{10}$|$1000_2=8_{10}$|$1010_2=10_{10}$|\n\n通过观察不难发现，每两个相邻元素在二进制下都只有一位不同。这种做法的答案为 $10$（即最大元素），是所有做法中最小的。当然，其它的最大元素为 $10$ 的矩阵也是符合题意的（例如将输入矩阵进行翻转操作等）。\n\n一种可以获得部分分的做法是：\n\n|$0110_2$|$0111_2$|$0101_2$|\n| :----------: | :----------: | :----------: |\n|$1110_2$|$1111_2$|$1101_2$|\n|$1010_2$|$1011_2$|$1001_2$|\n\n该矩阵的最大元素为 $15$。根据评分规则，这种做法在下取整前可以获得对应测试点 $\\max(1-\\sqrt{\\dfrac{\\frac{15}{10}-1}{3}},0)=1-\\dfrac{\\sqrt{6}}{6} \\approx 59\\%$ 的分数。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$N=1$。\n- Subtask 2（9 pts）：$N,M$ 是 $2$ 的整数幂。\n- Subtask 3（14 pts）：$N$ 是 $2$ 的整数幂。\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2000$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 1 C XCopy。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/cbrnaqp0) 进行 hack。", "locale": "zh-CN"}}}
{"pid": "P8168", "type": "P", "difficulty": 4, "samples": [["4\n3\n111\n7\n1111111\n3\n000\n7\n0000000", "1 2 3\n1 2 3 4 5 6 7\n3 2 1\n7 6 5 4 3 2 1"], ["2\n3\n010\n7\n0010110", "3 2 1\n7 3 1 5 2 4 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2021] BinSearch", "background": "", "description": "```cpp\nbool binary_search(int n, int p[], int target){\n    int left = 1, right = n;\n    while(left < right){\n        int mid = (left + right) / 2;\n        if(p[mid] == target)\n            return true;\n        else if(p[mid] < target)\n            left = mid + 1;\n        else\n            right = mid - 1;\n    }\n    if(p[left] == target) return true;\n    else return false;\n}\n```\n\n众所周知，当上述函数在传入一个单调不递减的数组 $\\texttt p$ 且 $\\texttt{target}$ 在数组 $\\texttt p$ 中出现过，那么会返回 $\\texttt{true}$。然而，当 $\\texttt p$ 不存在单调性时则不然。\n\n给定正整数 $n$ 和一个数组 $b_1,\\dots,b_n \\in \\{\\texttt{true},\\texttt{false}\\}$。数据保证存在一个正整数 $k$，使得 $n=2^k-1$。\n\n规定 $S(p)$ 为 $i \\in \\{1,\\dots,n\\}$ 时 $\\texttt{binary\\_search(n, p, i)}$ 返回值不为 $b_i$ 的个数。你的任务是求一个 $\\{1,\\dots,n\\}$ 的排列 $p$，使得 $S(p)$ 尽可能小（具体请见评分规则）。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n每组数据的第一行包含一个正整数 $n$。第二行包含一个长度为 $n$ 的字符串（只含有字符 `0` 和 `1` 且无空格）。其中当第 $i$ 个字符为 `1` 时，则 $b_i=\\texttt{true}$，否则 $b_i=\\texttt{false}$。", "outputFormat": "输出 $T$ 行，每行输出求得的排列 $p$。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n- 当一个子任务中的所有排列 $p$ 均满足 $S(p) \\le 1$ 时，得分为该子任务总分的 $100\\%$。\n- 否则当一个子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为该子任务总分的 $50\\%$。\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果。例如，当该子任务的总分为 $3$ 且该子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为 $1$ 而不是 $1.5$。\n\n#### 样例 1 解释\n\n前两组数据满足 $S(p)=0$。\n\n第三组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 2)}=\\texttt{true} \\neq b_2$。\n\n第四组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 4)}=\\texttt{true} \\neq b_4$。\n\n#### 样例 2 解释\n\n两组数据均满足 $S(p)=0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（3 pts）：$b_i=\\texttt{true}$。\n- Subtask 2（4 pts）：$b_i=\\texttt{false}$。\n- Subtask 3（16 pts）：$1 \\le n \\le 7$。\n- Subtask 4（25 pts）：$1 \\le n \\le 15$。\n- Subtask 5（22 pts）：$n=2^{16}-1$ 且 $b_i$ 数据随机。\n- Subtask 6（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 7000$，$1 \\le \\sum n \\le 10^5$，$\\forall n \\in \\{n|n=2^k-1,k \\in \\N^*\\}$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 A BinSearch。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/5fdi0fvc) 进行 hack。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] BinSearch", "background": "", "description": "```cpp\nbool binary_search(int n, int p[], int target){\n    int left = 1, right = n;\n    while(left < right){\n        int mid = (left + right) / 2;\n        if(p[mid] == target)\n            return true;\n        else if(p[mid] < target)\n            left = mid + 1;\n        else\n            right = mid - 1;\n    }\n    if(p[left] == target) return true;\n    else return false;\n}\n```\n\n众所周知，当上述函数在传入一个单调不递减的数组 $\\texttt p$ 且 $\\texttt{target}$ 在数组 $\\texttt p$ 中出现过，那么会返回 $\\texttt{true}$。然而，当 $\\texttt p$ 不存在单调性时则不然。\n\n给定正整数 $n$ 和一个数组 $b_1,\\dots,b_n \\in \\{\\texttt{true},\\texttt{false}\\}$。数据保证存在一个正整数 $k$，使得 $n=2^k-1$。\n\n规定 $S(p)$ 为 $i \\in \\{1,\\dots,n\\}$ 时 $\\texttt{binary\\_search(n, p, i)}$ 返回值不为 $b_i$ 的个数。你的任务是求一个 $\\{1,\\dots,n\\}$ 的排列 $p$，使得 $S(p)$ 尽可能小（具体请见评分规则）。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n每组数据的第一行包含一个正整数 $n$。第二行包含一个长度为 $n$ 的字符串（只含有字符 `0` 和 `1` 且无空格）。其中当第 $i$ 个字符为 `1` 时，则 $b_i=\\texttt{true}$，否则 $b_i=\\texttt{false}$。", "outputFormat": "输出 $T$ 行，每行输出求得的排列 $p$。**Special Judge 对输出格式要求非常严格，每行行末不能有空格等多余字符。**", "hint": "#### 评分规则\n\n- 当一个子任务中的所有排列 $p$ 均满足 $S(p) \\le 1$ 时，得分为该子任务总分的 $100\\%$。\n- 否则当一个子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为该子任务总分的 $50\\%$。\n\n由于洛谷评分机制，每个测试点的实际得分为上式下取整的结果。例如，当该子任务的总分为 $3$ 且该子任务中的所有排列 $p$ 均满足 $0 \\le S(p) \\le \\lceil \\log_2 n \\rceil$ 时，得分为 $1$ 而不是 $1.5$。\n\n#### 样例 1 解释\n\n前两组数据满足 $S(p)=0$。\n\n第三组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 2)}=\\texttt{true} \\neq b_2$。\n\n第四组数据中 $S(p)=1$，因为 $\\texttt{binary\\_search(n, p, 4)}=\\texttt{true} \\neq b_4$。\n\n#### 样例 2 解释\n\n两组数据均满足 $S(p)=0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（3 pts）：$b_i=\\texttt{true}$。\n- Subtask 2（4 pts）：$b_i=\\texttt{false}$。\n- Subtask 3（16 pts）：$1 \\le n \\le 7$。\n- Subtask 4（25 pts）：$1 \\le n \\le 15$。\n- Subtask 5（22 pts）：$n=2^{16}-1$ 且 $b_i$ 数据随机。\n- Subtask 6（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 7000$，$1 \\le \\sum n \\le 10^5$，$\\forall n \\in \\{n|n=2^k-1,k \\in \\N^*\\}$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 A BinSearch。欢迎通过私信或发帖的方式对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/5fdi0fvc) 进行 hack。", "locale": "zh-CN"}}}
{"pid": "P8169", "type": "P", "difficulty": 6, "samples": [["3 7\n#######\n#Soooo#\n#######", "4"], ["3 8\n########\n#SoXooS#\n########", "1"], ["7 18\n##################\n#................#\n#.o...SX.......o.#\n#.o...X..X.....o.#\n#.o.....XS.....o.#\n#................#\n##################", "0"], ["7 18\n##################\n#....#...........#\n#.o...SX.......o.#\n#.o...X..X.....o.#\n#.o.....XS.....o.#\n#.........#......#\n##################", "6"], ["7 18\n##################\n#......X..S....oo#\n##################\n#..o..S.X......o.#\n##########X#######\n#o.....S...X.....#\n##################", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] Dungeons", "background": null, "description": "你需要在一个 $N \\times M$ 的地图进行游戏。地图的每个位置包括下列类型：\n\n- $\\texttt .$：空地。\n- $\\texttt \\#$：墙壁。\n- $\\texttt o$：金币。\n- $\\texttt X$：炸弹。\n- $\\texttt S$：起始位置。\n\n每张地图包含一个或多个 $\\texttt S$。当游戏开始时，你的起点将会被选定为任意一个 $\\texttt S$。由于地图视野较暗，因此你只能看到以自身为中心的 $3 \\times 3$ 正方形内的位置。同时，$\\texttt X$ 和 $\\texttt S$ 在视野中会被视为是空地（$\\texttt .$）。注意，你不可以进入墙壁（$\\texttt \\#$）。\n\n你每一步可以向上下左右四个方向进行移动。当你进入 $\\texttt o$ 格时，你会获得 $1$ 枚金币，同时该格的 $\\texttt o$ 消失。当你进入 $\\texttt X$ 格时，你失去所有金币且游戏结束。\n\n在游戏开始前，你已经获得了完整的地图（尽管你不知道你会以哪个 $\\texttt S$ 作为起点）。如果你以最优策略进行游戏，求最坏情况下能够保证获得的金币数量。", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来的 $N$ 行用来描述地图。数据保证地图外围（即第一行、最后一行、第一列、最后一列）都是 `#` 字符。", "outputFormat": "一个整数，表示最坏情况下能够保证获得的金币数量。", "hint": "#### 样例 1 解释\n\n由于 $\\texttt S$ 只有一个，因此起点固定，可以获得所有金币。\n\n#### 样例 2 解释\n\n分别以左侧和右侧 $\\texttt S$ 为起点时的初始视野（$\\texttt @$ 为起点）：\n\n$$\\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#} \\\\ \\texttt{\\#@o\\,\\,\\,\\,\\,\\,\\,\\,o@\\#} \\\\ \\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#}$$\n\n以左侧的 $\\texttt S$ 为起点时可获得 $1$ 枚金币，以右侧的为起点时可获得 $2$ 枚。因此在最坏情况下最多可获得 $\\min(1,2)=1$ 枚金币。\n\n#### 样例 3 解释\n\n无论起点是哪一个 $\\texttt S$，初始视野均为：\n\n$$\\texttt{...} \\\\ \\texttt{.@.} \\\\ \\texttt{...}$$\n\n由于不知道当前位置具体在地图上是哪里，因此最坏情况是踏入起点旁边的 $\\texttt X$（视野中为 $\\texttt .$）。这种情况下不能获得任何金币，答案为 $0$。\n\n#### 样例 4 解释\n\n分别以左上和右下的 $\\texttt S$ 为起点时的初始视野：\n\n$$\\texttt{\\#..\\,\\,\\,\\,\\,\\,\\,\\,...} \\\\ \\texttt{.@.\\,\\,\\,\\,\\,\\,\\,\\,.@.} \\\\ \\texttt{...\\,\\,\\,\\,\\,\\,\\,\\,..\\#}$$\n\n由于初始视野不同，因此可以通过 $\\texttt \\#$ 位置的不同判断在地图上的具体位置。因此可以获得所有金币，答案为 $6$。\n\n#### 样例 5 解释\n\n不妨先向左走 $2$ 步。如果能够看到 $\\texttt o$，那么可以判断出位于第四行，同时捡起左侧的金币。\n\n否则仍无法判断位于第二行还是第六行。因此可以在向左 $2$ 步的基础上往右 $4$ 步（即走到起点右侧 $2$ 步的位置）。如果视野右上是 $\\texttt .$（在地图中为 $\\texttt X$），那么可以判断位于第六行。这时可以安全地一直向左获得第二列的金币。如果视野不是 $\\texttt .$，那么只需一直向右即可获得第十六列和第十七列的金币。\n\n按这种方案得到的答案是最优的，为 $\\min\\{1,1,2\\}=1$。\n\n不难发现，如果直接向右，那么可能直接进入 $\\texttt X$——这种方案得到的答案为 $0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n设地图中 $\\texttt S$ 的数量为 $S$。\n\n- Subtask 1（3 pts）：$S=1$，不存在 $\\texttt X$ 且只有地图外围有 $\\texttt \\#$。\n- Subtask 2（7 pts）：$N=3$。\n- Subtask 3（12 pts）：$S=1$。\n- Subtask 4（23 pts）：$S=2$。\n- Subtask 5（41 pts）：$1 \\le N,M \\le 250$，$1 \\le S \\le 12$。\n- Subtask 6（14 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 400$，$1 \\le S \\le 60$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 B Dungeons。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] Dungeons", "background": null, "description": "你需要在一个 $N \\times M$ 的地图进行游戏。地图的每个位置包括下列类型：\n\n- $\\texttt .$：空地。\n- $\\texttt \\#$：墙壁。\n- $\\texttt o$：金币。\n- $\\texttt X$：炸弹。\n- $\\texttt S$：起始位置。\n\n每张地图包含一个或多个 $\\texttt S$。当游戏开始时，你的起点将会被选定为任意一个 $\\texttt S$。由于地图视野较暗，因此你只能看到以自身为中心的 $3 \\times 3$ 正方形内的位置。同时，$\\texttt X$ 和 $\\texttt S$ 在视野中会被视为是空地（$\\texttt .$）。注意，你不可以进入墙壁（$\\texttt \\#$）。\n\n你每一步可以向上下左右四个方向进行移动。当你进入 $\\texttt o$ 格时，你会获得 $1$ 枚金币，同时该格的 $\\texttt o$ 消失。当你进入 $\\texttt X$ 格时，你失去所有金币且游戏结束。\n\n在游戏开始前，你已经获得了完整的地图（尽管你不知道你会以哪个 $\\texttt S$ 作为起点）。如果你以最优策略进行游戏，求最坏情况下能够保证获得的金币数量。", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来的 $N$ 行用来描述地图。数据保证地图外围（即第一行、最后一行、第一列、最后一列）都是 `#` 字符。", "outputFormat": "一个整数，表示最坏情况下能够保证获得的金币数量。", "hint": "#### 样例 1 解释\n\n由于 $\\texttt S$ 只有一个，因此起点固定，可以获得所有金币。\n\n#### 样例 2 解释\n\n分别以左侧和右侧 $\\texttt S$ 为起点时的初始视野（$\\texttt @$ 为起点）：\n\n$$\\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#} \\\\ \\texttt{\\#@o\\,\\,\\,\\,\\,\\,\\,\\,o@\\#} \\\\ \\texttt{\\#\\#\\#\\,\\,\\,\\,\\,\\,\\,\\,\\#\\#\\#}$$\n\n以左侧的 $\\texttt S$ 为起点时可获得 $1$ 枚金币，以右侧的为起点时可获得 $2$ 枚。因此在最坏情况下最多可获得 $\\min(1,2)=1$ 枚金币。\n\n#### 样例 3 解释\n\n无论起点是哪一个 $\\texttt S$，初始视野均为：\n\n$$\\texttt{...} \\\\ \\texttt{.@.} \\\\ \\texttt{...}$$\n\n由于不知道当前位置具体在地图上是哪里，因此最坏情况是踏入起点旁边的 $\\texttt X$（视野中为 $\\texttt .$）。这种情况下不能获得任何金币，答案为 $0$。\n\n#### 样例 4 解释\n\n分别以左上和右下的 $\\texttt S$ 为起点时的初始视野：\n\n$$\\texttt{\\#..\\,\\,\\,\\,\\,\\,\\,\\,...} \\\\ \\texttt{.@.\\,\\,\\,\\,\\,\\,\\,\\,.@.} \\\\ \\texttt{...\\,\\,\\,\\,\\,\\,\\,\\,..\\#}$$\n\n由于初始视野不同，因此可以通过 $\\texttt \\#$ 位置的不同判断在地图上的具体位置。因此可以获得所有金币，答案为 $6$。\n\n#### 样例 5 解释\n\n不妨先向左走 $2$ 步。如果能够看到 $\\texttt o$，那么可以判断出位于第四行，同时捡起左侧的金币。\n\n否则仍无法判断位于第二行还是第六行。因此可以在向左 $2$ 步的基础上往右 $4$ 步（即走到起点右侧 $2$ 步的位置）。如果视野右上是 $\\texttt .$（在地图中为 $\\texttt X$），那么可以判断位于第六行。这时可以安全地一直向左获得第二列的金币。如果视野不是 $\\texttt .$，那么只需一直向右即可获得第十六列和第十七列的金币。\n\n按这种方案得到的答案是最优的，为 $\\min\\{1,1,2\\}=1$。\n\n不难发现，如果直接向右，那么可能直接进入 $\\texttt X$——这种方案得到的答案为 $0$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n设地图中 $\\texttt S$ 的数量为 $S$。\n\n- Subtask 1（3 pts）：$S=1$，不存在 $\\texttt X$ 且只有地图外围有 $\\texttt \\#$。\n- Subtask 2（7 pts）：$N=3$。\n- Subtask 3（12 pts）：$S=1$。\n- Subtask 4（23 pts）：$S=2$。\n- Subtask 5（41 pts）：$1 \\le N,M \\le 250$，$1 \\le S \\le 12$。\n- Subtask 6（14 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 400$，$1 \\le S \\le 60$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 B Dungeons。", "locale": "zh-CN"}}}
{"pid": "P8170", "type": "P", "difficulty": 5, "samples": [["4 3 4 3\n2 5\n3 2\n0 4\n2 8", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "eJOI（欧洲）"], "title": "[eJOI 2021] Waterfront", "background": "", "description": "现有 $N$ 丛初始高度为 $\\textit{height}_i$ 的灌木。每丛灌木每天都会生长 $\\textit{dailyGrowth}_i$ 的高度。\n\n每天在**灌木生长完毕后**，园丁将对灌木剪枝 $k$ 次。每次可以将任意一丛高度不小于 $x$ 的灌木剪短 $x$ 个单位。\n\n求 $M$ 天后最高的一丛灌木的高度的最小值。", "inputFormat": "第一行四个正整数 $N,M,k,x$。\n\n接下来的 $N$ 行，每行两个非负整数 $\\textit{height}_i,\\textit{dailyGrowth}_i$。", "outputFormat": "一个非负整数，表示 $M$ 天后最高的一丛灌木的高度的最小值。", "hint": "#### 样例解释\n\n|天数|灌木编号|高度变化量|\n| :----------: | :----------: | :----------: |\n|$1$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$2 \\overset{+5}{\\to} 7 \\overset{-3}{\\to} 4 \\\\ 3 \\overset{+2}{\\to} 5 \\\\ 0 \\overset{+4}{\\to} 4 \\\\ 2 \\overset{+8}{\\to} 10 \\overset{-3}{\\to} 7 \\overset{-3}{\\to} 4 \\overset{-3}{\\to} 1$|\n|$2$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$4 \\overset{+5}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3 \\\\ 5 \\overset{+2}{\\to} 7 \\\\ 4 \\overset{+4}{\\to} 8 \\\\ 1 \\overset{+8}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3$|\n|$3$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$3 \\overset{+5}{\\to} 8 \\\\ 7 \\overset{+2}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 8 \\overset{+4}{\\to} 12 \\overset{-3}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 3 \\overset{+8}{\\to} 11 \\overset{-3}{\\to} 8$|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 100$，$M=k=x=1$，$\\textit{height}_i \\ge 1$，$\\textit{dailyGrowth}_i=0$。\n- Subtask 2（22 pts）：$1 \\le N,M \\le 500$。\n- Subtask 3（43 pts）：$1 \\le N,M \\le 5000$。\n- Subtask 4（27 pts）：$1 \\le N,M \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 1000$，$1 \\le x \\le 10^4$，$0 \\le \\textit{height}_i,\\textit{dailyGrowth}_i \\le 10^4$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 C Waterfront。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2021] Waterfront", "background": "", "description": "现有 $N$ 丛初始高度为 $\\textit{height}_i$ 的灌木。每丛灌木每天都会生长 $\\textit{dailyGrowth}_i$ 的高度。\n\n每天在**灌木生长完毕后**，园丁将对灌木剪枝 $k$ 次。每次可以将任意一丛高度不小于 $x$ 的灌木剪短 $x$ 个单位。\n\n求 $M$ 天后最高的一丛灌木的高度的最小值。", "inputFormat": "第一行四个正整数 $N,M,k,x$。\n\n接下来的 $N$ 行，每行两个非负整数 $\\textit{height}_i,\\textit{dailyGrowth}_i$。", "outputFormat": "一个非负整数，表示 $M$ 天后最高的一丛灌木的高度的最小值。", "hint": "#### 样例解释\n\n|天数|灌木编号|高度变化量|\n| :----------: | :----------: | :----------: |\n|$1$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$2 \\overset{+5}{\\to} 7 \\overset{-3}{\\to} 4 \\\\ 3 \\overset{+2}{\\to} 5 \\\\ 0 \\overset{+4}{\\to} 4 \\\\ 2 \\overset{+8}{\\to} 10 \\overset{-3}{\\to} 7 \\overset{-3}{\\to} 4 \\overset{-3}{\\to} 1$|\n|$2$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$4 \\overset{+5}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3 \\\\ 5 \\overset{+2}{\\to} 7 \\\\ 4 \\overset{+4}{\\to} 8 \\\\ 1 \\overset{+8}{\\to} 9 \\overset{-3}{\\to} 6 \\overset{-3}{\\to} 3$|\n|$3$|$1 \\\\ 2 \\\\ 3 \\\\ 4$|$3 \\overset{+5}{\\to} 8 \\\\ 7 \\overset{+2}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 8 \\overset{+4}{\\to} 12 \\overset{-3}{\\to} 9 \\overset{-3}{\\to} 6 \\\\ 3 \\overset{+8}{\\to} 11 \\overset{-3}{\\to} 8$|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$1 \\le N \\le 100$，$M=k=x=1$，$\\textit{height}_i \\ge 1$，$\\textit{dailyGrowth}_i=0$。\n- Subtask 2（22 pts）：$1 \\le N,M \\le 500$。\n- Subtask 3（43 pts）：$1 \\le N,M \\le 5000$。\n- Subtask 4（27 pts）：$1 \\le N,M \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 1000$，$1 \\le x \\le 10^4$，$0 \\le \\textit{height}_i,\\textit{dailyGrowth}_i \\le 10^4$。\n\n#### 说明\n\n本题译自 [eJOI2021](https://sepi.ro/ejoi/2021) Day 2 C Waterfront。", "locale": "zh-CN"}}}
{"pid": "P8171", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 3\n1 3", "10"], ["4 2\n1 1 1 1\n1 2\n2 4", "3\n6"], ["5 3\n1 2 1 3 2\n2 5\n1 3\n3 4", "16\n8\n4"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "莫队", "2021", "排序", "CEOI（中欧）"], "title": "[CEOI 2021] Diversity", "background": "译自 CEOI2021 Day1 T1. [Diversity](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。  \n", "description": "定义一个序列的 _多样性_ 为其不同的元素个数，一个序列的 _总多样性_ 为其所有子区间的 _多样性_ 的和。\n\n例如，序列 $(1,1,2)$ 的 _多样性_ 为 $2$ ，因为其有两种元素；它的 _总多样性_ 为序列 $(1),(1),(2),(1,1),(1,2),(1,1,2)$ 的 _多样性_ 之和，即 $1+1+1+1+2+2=8$。\n\n给出长为 $N$ 的序列 $\\{a _i\\}$ 与 $Q$ 个**互相独立**的询问，每个询问给出 $[l,r]$。求将原序列 $[l,r]$ 内的数重排可以得到的该区间最小的 _总多样性_。", "inputFormat": "输入第一行包含两个整数 $N$ 和 $Q$，表示序列长度和询问数量。\n\n第二行 $N$ 个整数，表示序列 $\\{a_i\\}$。\n\n接下来 $Q$ 行，每行两个整数 $l_i,r_i$，表示第 $i$ 次询问的区间。", "outputFormat": "输出应包含 $Q$ 行整数，第 $i$ 行的整数表示第 $i$ 个询问的答案。", "hint": "#### 样例解释\n\n对于第一组样例，无论怎样重排，询问区间的 _总多样性_ 总是 $10$。\n\n对于第二组样例，序列所有元素都为 $1$，故无需重排。区间 $[1,2]$ 的 _总多样性_ 为 $3$，区间 $[2,4]$ 的 _总多样性_ 为 $6$。\n\n对于第三组样例，第一个询问可将序列重排为 $(1,2,2,3)$，它的 _总多样性_ 为 $1+1+1+1+2+1+2+2+2+3=16$；第二个询问可将序列重排为 $(1,1,2)$，它的 _总多样性_ 为 $1+1+1+1+2+2=8$；第三个询问可将序列重排为 $(1,3)$，它的 _总多样性_ 为 $1+1+2=4$。\n\n#### 子任务\n\n所有测试点均满足 $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$。\n\n各子任务的约束条件如下：\n| 子任务编号 | 分值 |                             约束                             |\n| :--------: | :--: | :----------------------------------------------------------: |\n|    $1$     | $4$  | $1\\leq N\\leq 11$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $2$     | $10$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 11$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $3$     | $8$  | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 23$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $4$     | $16$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 1000$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $5$     | $26$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $6$     | $36$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] Diversity", "background": "译自 CEOI2021 Day1 T1. [Diversity](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。  \n", "description": "定义一个序列的 _多样性_ 为其不同的元素个数，一个序列的 _总多样性_ 为其所有子区间的 _多样性_ 的和。\n\n例如，序列 $(1,1,2)$ 的 _多样性_ 为 $2$ ，因为其有两种元素；它的 _总多样性_ 为序列 $(1),(1),(2),(1,1),(1,2),(1,1,2)$ 的 _多样性_ 之和，即 $1+1+1+1+2+2=8$。\n\n给出长为 $N$ 的序列 $\\{a _i\\}$ 与 $Q$ 个**互相独立**的询问，每个询问给出 $[l,r]$。求将原序列 $[l,r]$ 内的数重排可以得到的该区间最小的 _总多样性_。", "inputFormat": "输入第一行包含两个整数 $N$ 和 $Q$，表示序列长度和询问数量。\n\n第二行 $N$ 个整数，表示序列 $\\{a_i\\}$。\n\n接下来 $Q$ 行，每行两个整数 $l_i,r_i$，表示第 $i$ 次询问的区间。", "outputFormat": "输出应包含 $Q$ 行整数，第 $i$ 行的整数表示第 $i$ 个询问的答案。", "hint": "#### 样例解释\n\n对于第一组样例，无论怎样重排，询问区间的 _总多样性_ 总是 $10$。\n\n对于第二组样例，序列所有元素都为 $1$，故无需重排。区间 $[1,2]$ 的 _总多样性_ 为 $3$，区间 $[2,4]$ 的 _总多样性_ 为 $6$。\n\n对于第三组样例，第一个询问可将序列重排为 $(1,2,2,3)$，它的 _总多样性_ 为 $1+1+1+1+2+1+2+2+2+3=16$；第二个询问可将序列重排为 $(1,1,2)$，它的 _总多样性_ 为 $1+1+1+1+2+2=8$；第三个询问可将序列重排为 $(1,3)$，它的 _总多样性_ 为 $1+1+2=4$。\n\n#### 子任务\n\n所有测试点均满足 $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$。\n\n各子任务的约束条件如下：\n| 子任务编号 | 分值 |                             约束                             |\n| :--------: | :--: | :----------------------------------------------------------: |\n|    $1$     | $4$  | $1\\leq N\\leq 11$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $2$     | $10$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 11$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $3$     | $8$  | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 23$，$Q=1$，$l_1=1$，$r_1=N$  |\n|    $4$     | $16$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 1000$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $5$     | $26$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$Q=1$，$l_1=1$，$r_1=N$ |\n|    $6$     | $36$ | $1\\leq N\\leq 3\\times 10^5$，$1\\leq a_i\\leq 3\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$ |", "locale": "zh-CN"}}}
{"pid": "P8172", "type": "P", "difficulty": 6, "samples": [["4 3 3\n1 1\n1 3\n4 3", "YES"], ["5 2 4\n1 2\n2 1\n5 1\n5 2", "NO"], ["2 3 0", "YES"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "CEOI（中欧）"], "title": "[CEOI 2021] L-triominoes", "background": "译自 CEOI2021 Day1 T2. [L-triominoes](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。", "description": "给出一个 $H\\times W$ 的矩形，我们称其中 $1\\times 1$ 的最小矩形为单元格。这个矩形现在有 $K$ 个单元格遗失了。现在请问能否用形如下图的纸片完全覆盖整个矩形。\n\n![捕获3.PNG](https://cdn.luogu.com.cn/upload/image_hosting/ylltjsyr.png)\n\n我们认为一个矩形能被覆盖，当且仅当其所有未遗失的单元格恰好被纸片覆盖一次且没有纸片超出矩形或覆盖在遗失的单元格上。当然，纸片可以垂直或 $90°$ 旋转。", "inputFormat": "输入的第一行包含三个非负整数，分别是 $W,H,K$，表示矩形的列数，行数和遗失的单元格数量。\n\n接下来 $K$ 行，每行两个正整数 $x_i,y_i$ 表示一个遗失单元格的坐标。保证给出的单元格坐标互不相同。", "outputFormat": "若能刚好覆盖则输出一行一个字符串 `YES`，否则输出一行一个字符串 `NO`。", "hint": "#### 样例解释\n\n对于样例一，如图是一种合法的覆盖：\n\n![捕获4.PNG](https://cdn.luogu.com.cn/upload/image_hosting/xgj9bfbw.png)\n\n对于样例二，你永远无法覆盖 $(1,1)$ 上的单元格。 \n\n![捕获5.PNG](https://cdn.luogu.com.cn/upload/image_hosting/hrrzvyjx.png)\n\n对于样例三，如图是一种合法的覆盖： \n\n![捕获6.PNG](https://cdn.luogu.com.cn/upload/image_hosting/p5awynm4.png)\n\n#### 子任务\n\n所有测试点均满足 $1\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$0\\leq K\\leq 250$，$1\\leq x_i\\leq W$，$1\\leq y_i\\leq H$。\n\n| 子任务编号 | 分值 |                    约束                     |\n| :--------: | :--: | :-----------------------------------------: |\n|    $1$     | $10$ | $2\\leq W\\leq 13$，$2\\leq H\\leq 10^3$，$K\\leq 250$ |\n|    $2$     | $7$  | $2\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$K=0$    |\n|    $3$     | $11$ |  $2\\leq W\\leq3$，$2\\leq H\\leq 10^9$，$K\\leq 250$  |\n|    $4$     | $17$ | $4\\leq W\\leq 6$，$2\\leq H\\leq 10^9$，$K\\leq 250$  |\n|    $5$     | $35$ | $7\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$K\\leq 250$ |\n|    $6$     | $20$ | $2\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$K\\leq 250$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] L-triominoes", "background": "译自 CEOI2021 Day1 T2. [L-triominoes](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。", "description": "给出一个 $H\\times W$ 的矩形，我们称其中 $1\\times 1$ 的最小矩形为单元格。这个矩形现在有 $K$ 个单元格遗失了。现在请问能否用形如下图的纸片完全覆盖整个矩形。\n\n![捕获3.PNG](https://cdn.luogu.com.cn/upload/image_hosting/ylltjsyr.png)\n\n我们认为一个矩形能被覆盖，当且仅当其所有未遗失的单元格恰好被纸片覆盖一次且没有纸片超出矩形或覆盖在遗失的单元格上。当然，纸片可以垂直或 $90°$ 旋转。", "inputFormat": "输入的第一行包含三个非负整数，分别是 $W,H,K$，表示矩形的列数，行数和遗失的单元格数量。\n\n接下来 $K$ 行，每行两个正整数 $x_i,y_i$ 表示一个遗失单元格的坐标。保证给出的单元格坐标互不相同。", "outputFormat": "若能刚好覆盖则输出一行一个字符串 `YES`，否则输出一行一个字符串 `NO`。", "hint": "#### 样例解释\n\n对于样例一，如图是一种合法的覆盖：\n\n![捕获4.PNG](https://cdn.luogu.com.cn/upload/image_hosting/xgj9bfbw.png)\n\n对于样例二，你永远无法覆盖 $(1,1)$ 上的单元格。 \n\n![捕获5.PNG](https://cdn.luogu.com.cn/upload/image_hosting/hrrzvyjx.png)\n\n对于样例三，如图是一种合法的覆盖： \n\n![捕获6.PNG](https://cdn.luogu.com.cn/upload/image_hosting/p5awynm4.png)\n\n#### 子任务\n\n所有测试点均满足 $1\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$0\\leq K\\leq 250$，$1\\leq x_i\\leq W$，$1\\leq y_i\\leq H$。\n\n| 子任务编号 | 分值 |                    约束                     |\n| :--------: | :--: | :-----------------------------------------: |\n|    $1$     | $10$ | $2\\leq W\\leq 13$，$2\\leq H\\leq 10^3$，$K\\leq 250$ |\n|    $2$     | $7$  | $2\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$K=0$    |\n|    $3$     | $11$ |  $2\\leq W\\leq3$，$2\\leq H\\leq 10^9$，$K\\leq 250$  |\n|    $4$     | $17$ | $4\\leq W\\leq 6$，$2\\leq H\\leq 10^9$，$K\\leq 250$  |\n|    $5$     | $35$ | $7\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$K\\leq 250$ |\n|    $6$     | $20$ | $2\\leq W\\leq 13$，$2\\leq H\\leq 10^9$，$K\\leq 250$ |", "locale": "zh-CN"}}}
{"pid": "P8173", "type": "P", "difficulty": 7, "samples": [["7 6\n1 2\n1 3\n1 4\n1 5\n1 6\n1 7\n", "YES\n2\n1 1\n"], ["6 6\n1 2\n2 3\n3 1\n1 4\n2 5\n3 6\n", "NO\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "CEOI（中欧）", "构造", "Ad-hoc"], "title": "[CEOI 2021] Newspapers", "background": "译自 CEOI2021 Day1 T3. [Newspapers](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。", "description": "Ankica 和 Branko 在一张无向连通图上玩追逐游戏，游戏分为若干个回合，每一回合有如下两步：\n\n- **Ankica 猜测 Branko 现在在哪个结点**。具体地，她将猜测 Branko 在某个特定的结点，如果正确，Branko 被抓住，游戏将会结束，否则：\n- **Branko 穿过一条边**。换句话说，Branko将移动到一个相邻的结点，注意他**不能**不移动。\n\n给出这张图，请求出 Ankica 是否总能在有限步内抓到 Branko 且不论 Branko 初始位置在哪以及如何移动。\n\n更形式化地，我们把 Ankica 猜测的策略用 $A=(a_1,a_2,\\dots,a_k)$ 表示，其中 $a_i$ 代表她第 $i$ 次猜测 Branko 在 $a_i$ 结点。\n\n相似地，我们把 Branko 的移动也用 $B=(b_1,b_2,\\dots,b_k)$ 表示，其中 $b_i$ 代表他在第 $i$ 回合前的位置。此外，对于 $B$ 中任意两个相邻的元素 $b_i$ 和 $b_{i+1}$（$1\\leq i<k$），$b_i$ 和 $b_{i+1}$ 之间必定有一条边。注意对于 $A$ 没有这样的限制。\n\n我们认为 Ankica 的猜测策略 $A$ 是成功的，当且仅当对于任意合法的 $B$ ，都存在 $i\\in[1,k]$ 使得 $a_i=b_i$。\n\n如果存在这样的策略，请输出使得 $k$ 最小的一组策略。", "inputFormat": "输入第一行包含两个整数 $N$ 和 $M$，代表这张图的点数和边数。\n\n接下来 $M$ 行两个整数 $u_i$，$v_i$，表示图上有一条连接 $u_i$，$v_i$ 的边。\n\n输入保证图上无重边、无自环。", "outputFormat": "如果不存在成功的策略 $A$，仅输出一行一个字符串 `NO`。\n\n否则，第一行应输出一个字符串 `YES`。\n\n第二行应输出该策略最小的 $k$。\n\n第三行应包含 $k$ 个整数，其中第 $i$ 个整数表示 $a_i$。", "hint": "#### 样例解释1\n\n![捕获1.PNG](https://cdn.luogu.com.cn/upload/image_hosting/kajahhgy.png)\n\n如果 Branko 初始位于 $1$ 号结点，则他会被抓住，否则他必定会移动到 $1$ 号结点，然后被抓住。\n\n#### 样例解释2\n\n![捕获2.PNG](https://cdn.luogu.com.cn/upload/image_hosting/rtcfz96j.png)\n\n若 Branko 初始在环 $(1,2,3)$ 上且不与 $a_1$ 相同，则根据之后的 $a$ 必定能构造出使 $A$ 不合法的 $B$。\n\n#### 子任务\n\n所有测试点均满足 $1\\leq N\\leq 1000$，$N-1\\leq M\\leq \\frac{N\\times (N-1)}{2}$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 |                             限制                             |\n| :--------: | :--: | :----------------------------------------------------------: |\n|     $1$      |  $12$  |                       $1\\leq N\\leq 20$                       |\n|     $2$      |  $8$   | $1\\leq N\\leq 1000$，$M=N-1$，且每个结点 $u\\in[1，N-1]$ 都与 $u+1$ 有边 |\n|     $3$      |  $80$  |                      $1\\leq N\\leq 1000$                      |\n\n#### 评分细则\n\n如果你仅能正确回答第一行，则你将得到该测试点 $50\\%$ 的分数。\n\n如果对于所有回答 `YES` 的测试点，你能提供一组 $k$ 非最小但正确的策略，你将得到该测试点 $75\\%$ 的分数。注意，你提供的策略不能超过 $5N$ 轮，可以证明，任何一组最优策略都不会超出这个限制。\n\n每个子任务的得分等于该子任务内得分最小的测试点得分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] Newspapers", "background": "译自 CEOI2021 Day1 T3. [Newspapers](https://hsin.hr/ceoi/competition/ceoi2021_day1_tasks.pdf)。", "description": "Ankica 和 Branko 在一张无向连通图上玩追逐游戏，游戏分为若干个回合，每一回合有如下两步：\n\n- **Ankica 猜测 Branko 现在在哪个结点**。具体地，她将猜测 Branko 在某个特定的结点，如果正确，Branko 被抓住，游戏将会结束，否则：\n- **Branko 穿过一条边**。换句话说，Branko将移动到一个相邻的结点，注意他**不能**不移动。\n\n给出这张图，请求出 Ankica 是否总能在有限步内抓到 Branko 且不论 Branko 初始位置在哪以及如何移动。\n\n更形式化地，我们把 Ankica 猜测的策略用 $A=(a_1,a_2,\\dots,a_k)$ 表示，其中 $a_i$ 代表她第 $i$ 次猜测 Branko 在 $a_i$ 结点。\n\n相似地，我们把 Branko 的移动也用 $B=(b_1,b_2,\\dots,b_k)$ 表示，其中 $b_i$ 代表他在第 $i$ 回合前的位置。此外，对于 $B$ 中任意两个相邻的元素 $b_i$ 和 $b_{i+1}$（$1\\leq i<k$），$b_i$ 和 $b_{i+1}$ 之间必定有一条边。注意对于 $A$ 没有这样的限制。\n\n我们认为 Ankica 的猜测策略 $A$ 是成功的，当且仅当对于任意合法的 $B$ ，都存在 $i\\in[1,k]$ 使得 $a_i=b_i$。\n\n如果存在这样的策略，请输出使得 $k$ 最小的一组策略。", "inputFormat": "输入第一行包含两个整数 $N$ 和 $M$，代表这张图的点数和边数。\n\n接下来 $M$ 行两个整数 $u_i$，$v_i$，表示图上有一条连接 $u_i$，$v_i$ 的边。\n\n输入保证图上无重边、无自环。", "outputFormat": "如果不存在成功的策略 $A$，仅输出一行一个字符串 `NO`。\n\n否则，第一行应输出一个字符串 `YES`。\n\n第二行应输出该策略最小的 $k$。\n\n第三行应包含 $k$ 个整数，其中第 $i$ 个整数表示 $a_i$。", "hint": "#### 样例解释1\n\n![捕获1.PNG](https://cdn.luogu.com.cn/upload/image_hosting/kajahhgy.png)\n\n如果 Branko 初始位于 $1$ 号结点，则他会被抓住，否则他必定会移动到 $1$ 号结点，然后被抓住。\n\n#### 样例解释2\n\n![捕获2.PNG](https://cdn.luogu.com.cn/upload/image_hosting/rtcfz96j.png)\n\n若 Branko 初始在环 $(1,2,3)$ 上且不与 $a_1$ 相同，则根据之后的 $a$ 必定能构造出使 $A$ 不合法的 $B$。\n\n#### 子任务\n\n所有测试点均满足 $1\\leq N\\leq 1000$，$N-1\\leq M\\leq \\frac{N\\times (N-1)}{2}$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 |                             限制                             |\n| :--------: | :--: | :----------------------------------------------------------: |\n|     $1$      |  $12$  |                       $1\\leq N\\leq 20$                       |\n|     $2$      |  $8$   | $1\\leq N\\leq 1000$，$M=N-1$，且每个结点 $u\\in[1，N-1]$ 都与 $u+1$ 有边 |\n|     $3$      |  $80$  |                      $1\\leq N\\leq 1000$                      |\n\n#### 评分细则\n\n如果你仅能正确回答第一行，则你将得到该测试点 $50\\%$ 的分数。\n\n如果对于所有回答 `YES` 的测试点，你能提供一组 $k$ 非最小但正确的策略，你将得到该测试点 $75\\%$ 的分数。注意，你提供的策略不能超过 $5N$ 轮，可以证明，任何一组最优策略都不会超出这个限制。\n\n每个子任务的得分等于该子任务内得分最小的测试点得分。", "locale": "zh-CN"}}}
{"pid": "P8174", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "交互题", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2021] Stones", "background": "译自 CEOI2021 Day2 T1. [Stones](https://hsin.hr/ceoi/competition/ceoi2021_day2_tasks.pdf)。", "description": "Ankica 终于抓住 Branko，但他拒绝给 Ankica 买报纸并且要求自己提出一个新的游戏因为上一个是不公平的。Ankica 故作天真地提出了另一个石子游戏，但 Branko 内心存疑，并决定完全改变它的规则。\n\n游戏包含 $N$ 堆石子，其中第 $i$ 堆有 $a_i$ 个石子，玩家轮流移除一堆石子中的若干个，取到最后一个石子的玩家获胜。\n\n但在该游戏中每个玩家从哪堆石子中取石子是由另一名玩家固定的。\n\n具体来说，游戏的回合数从 $1$ 开始每次递增，增量为 $1$，而游戏将会以如下方式进行：\n\n- 在奇数回合，Branko 将指定一个非空石子堆。Ankica 将移除这堆石子至少一个，至多所有石子。\n- 在偶数回合，Ankica 将指定一个非空石子堆。Branko 将移除这堆石子至少一个，至多所有石子。\n\n作为专业的游戏玩家，在 Branko 摆完石子后，Ankica 很快意识到这个游戏对她有必胜策略。\n\n如果你是 Ankica，你能否获胜呢？\n\n#### 交互方式\n\n这是一道交互题，你的程序必须与官方给出的扮演 Branko 的程序交换信息。当然，你的程序应该扮演 Ankica 的角色并确保她能获胜。\n\n你的程序应先从标准输入读入游戏的初始状态。初始状态有两行，第一行包含一个整数 $N$ ，第二行包含 $N$ 个空格隔开的整数，其中第 $i$ 个表示 $a_i$，含义如题面所示。\n\n你的程序应根据现在是奇数或偶数轮给出不同的输出，具体地：\n\n**在奇数轮：**\n\n- 你的程序应先读入一个整数 $k$。如果此时所有的石子堆都是空的，$k=-1$，你应结束程序因为你已经输了。否则 $k\\in[1,N]$ ，代表你现在必须从第 $k$ 堆石子取走至少一个至多所有石子。保证第 $k$ 堆石子此时不为空。令当前第 $k$ 堆石子有 $s_k$ 个石子。\n- 你的程序应输出一行一个 $[1,s_k]$ 中的整数，代表你从第 $k$ 堆石子希望取走的石子个数，**然后刷新缓冲区**。\n\n**在偶数轮：**\n\n- 你的程序应先输出一个整数 $k$，**然后刷新缓冲区**。如果此时所有的石子堆都是空的，$k$ 应为 $-1$，你应结束程序因为你已经赢了。否则 $k\\in[1,N]$，代表你希望 Branko 从第 $k$ 堆石子取石子。你应保证第 $k$ 堆石子此时不为空。令当前第 $k$ 堆石子有 $s_k$ 个石子。\n- 你的程序应读入一行一个 $[1,s_k]$ 中的整数，代表 Branko 从第 $k$ 堆石子取走的石子个数。\n\n保证给出的初始状态使得无论 Branko 怎么操作你都有必胜策略。\n\n#### 交互样例1\n\n|    输出     |     输入     |                 解释                  |\n| :---------: | :----------: | :-----------------------------------: |\n|             | $\\texttt{1}$ |          游戏只有一堆石子           |\n|             | $\\texttt{4}$ |      这一堆石子堆包含 $4$ 个石子      |\n|             |  $\\texttt1$  | Branko 只能指定 Ankica 从第一堆取石子 |\n| $\\texttt4$  |              |       Ankica 拿走第一堆所有石子       |\n| $\\texttt-1$ |              |    现在没有剩余的石子，Ankica 获胜    |\n\n#### 交互样例2\n\n|     输出      |       输入       |               解释                |\n| :-----------: | :--------------: | :-------------------------------: |\n|               |   $\\texttt{3}$   |         游戏有三堆石子          |\n|               | $\\texttt{1 1 5}$ |  三堆石子依次包含 $1,1,5$ 个石子  |\n|               |   $\\texttt{3}$   | Branko 指定 Ankica 从第三堆取石子 |\n| $\\texttt{5}$  |                  |     Ankica 拿走第三堆所有石子     |\n| $\\texttt{1}$  |                  | Ankica 指定 Branko 从第一堆取石子 |\n|               |   $\\texttt{1}$   |   Branko 只能拿走第一堆所有石子   |\n|               |   $\\texttt{2}$   | Branko 指定 Ankica 从第二堆取石子 |\n| $\\texttt{1}$  |                  |     Ankica 拿走第二堆所有石子     |\n| $\\texttt{-1}$ |                  |  现在没有剩余的石子，Ankica 获胜  |\n", "inputFormat": "", "outputFormat": "", "hint": "#### 子任务\n\n令 $M=\\max\\{a_1,a_2,\\dots,a_N\\}$。\n\n所有测试点均满足 $1\\leq N,M\\leq 500$。\n\n各子任务的约束条件如下：\n\n| 子任务 | 分值 |                         约束                          |\n| :----: | :--: | :---------------------------------------------------: |\n|  $1$   | $12$ |                   $1\\leq N,M\\leq 7$                   |\n|  $2$   | $13$ |           $1\\leq N\\leq 12$，$1\\leq M\\leq 500$            |\n|  $3$   | $15$ | $1\\leq N,M\\leq 500$，且 $\\forall i,j\\in[1,N],a_i=a_j$ |\n|  $4$   | $60$ |                 $1\\leq N,M\\leq 500$                 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] Stones", "background": "译自 CEOI2021 Day2 T1. [Stones](https://hsin.hr/ceoi/competition/ceoi2021_day2_tasks.pdf)。", "description": "Ankica 终于抓住 Branko，但他拒绝给 Ankica 买报纸并且要求自己提出一个新的游戏因为上一个是不公平的。Ankica 故作天真地提出了另一个石子游戏，但 Branko 内心存疑，并决定完全改变它的规则。\n\n游戏包含 $N$ 堆石子，其中第 $i$ 堆有 $a_i$ 个石子，玩家轮流移除一堆石子中的若干个，取到最后一个石子的玩家获胜。\n\n但在该游戏中每个玩家从哪堆石子中取石子是由另一名玩家固定的。\n\n具体来说，游戏的回合数从 $1$ 开始每次递增，增量为 $1$，而游戏将会以如下方式进行：\n\n- 在奇数回合，Branko 将指定一个非空石子堆。Ankica 将移除这堆石子至少一个，至多所有石子。\n- 在偶数回合，Ankica 将指定一个非空石子堆。Branko 将移除这堆石子至少一个，至多所有石子。\n\n作为专业的游戏玩家，在 Branko 摆完石子后，Ankica 很快意识到这个游戏对她有必胜策略。\n\n如果你是 Ankica，你能否获胜呢？\n\n#### 交互方式\n\n这是一道交互题，你的程序必须与官方给出的扮演 Branko 的程序交换信息。当然，你的程序应该扮演 Ankica 的角色并确保她能获胜。\n\n你的程序应先从标准输入读入游戏的初始状态。初始状态有两行，第一行包含一个整数 $N$ ，第二行包含 $N$ 个空格隔开的整数，其中第 $i$ 个表示 $a_i$，含义如题面所示。\n\n你的程序应根据现在是奇数或偶数轮给出不同的输出，具体地：\n\n**在奇数轮：**\n\n- 你的程序应先读入一个整数 $k$。如果此时所有的石子堆都是空的，$k=-1$，你应结束程序因为你已经输了。否则 $k\\in[1,N]$ ，代表你现在必须从第 $k$ 堆石子取走至少一个至多所有石子。保证第 $k$ 堆石子此时不为空。令当前第 $k$ 堆石子有 $s_k$ 个石子。\n- 你的程序应输出一行一个 $[1,s_k]$ 中的整数，代表你从第 $k$ 堆石子希望取走的石子个数，**然后刷新缓冲区**。\n\n**在偶数轮：**\n\n- 你的程序应先输出一个整数 $k$，**然后刷新缓冲区**。如果此时所有的石子堆都是空的，$k$ 应为 $-1$，你应结束程序因为你已经赢了。否则 $k\\in[1,N]$，代表你希望 Branko 从第 $k$ 堆石子取石子。你应保证第 $k$ 堆石子此时不为空。令当前第 $k$ 堆石子有 $s_k$ 个石子。\n- 你的程序应读入一行一个 $[1,s_k]$ 中的整数，代表 Branko 从第 $k$ 堆石子取走的石子个数。\n\n保证给出的初始状态使得无论 Branko 怎么操作你都有必胜策略。\n\n#### 交互样例1\n\n|    输出     |     输入     |                 解释                  |\n| :---------: | :----------: | :-----------------------------------: |\n|             | $\\texttt{1}$ |          游戏只有一堆石子           |\n|             | $\\texttt{4}$ |      这一堆石子堆包含 $4$ 个石子      |\n|             |  $\\texttt1$  | Branko 只能指定 Ankica 从第一堆取石子 |\n| $\\texttt4$  |              |       Ankica 拿走第一堆所有石子       |\n| $\\texttt-1$ |              |    现在没有剩余的石子，Ankica 获胜    |\n\n#### 交互样例2\n\n|     输出      |       输入       |               解释                |\n| :-----------: | :--------------: | :-------------------------------: |\n|               |   $\\texttt{3}$   |         游戏有三堆石子          |\n|               | $\\texttt{1 1 5}$ |  三堆石子依次包含 $1,1,5$ 个石子  |\n|               |   $\\texttt{3}$   | Branko 指定 Ankica 从第三堆取石子 |\n| $\\texttt{5}$  |                  |     Ankica 拿走第三堆所有石子     |\n| $\\texttt{1}$  |                  | Ankica 指定 Branko 从第一堆取石子 |\n|               |   $\\texttt{1}$   |   Branko 只能拿走第一堆所有石子   |\n|               |   $\\texttt{2}$   | Branko 指定 Ankica 从第二堆取石子 |\n| $\\texttt{1}$  |                  |     Ankica 拿走第二堆所有石子     |\n| $\\texttt{-1}$ |                  |  现在没有剩余的石子，Ankica 获胜  |\n", "inputFormat": "", "outputFormat": "", "hint": "#### 子任务\n\n令 $M=\\max\\{a_1,a_2,\\dots,a_N\\}$。\n\n所有测试点均满足 $1\\leq N,M\\leq 500$。\n\n各子任务的约束条件如下：\n\n| 子任务 | 分值 |                         约束                          |\n| :----: | :--: | :---------------------------------------------------: |\n|  $1$   | $12$ |                   $1\\leq N,M\\leq 7$                   |\n|  $2$   | $13$ |           $1\\leq N\\leq 12$，$1\\leq M\\leq 500$            |\n|  $3$   | $15$ | $1\\leq N,M\\leq 500$，且 $\\forall i,j\\in[1,N],a_i=a_j$ |\n|  $4$   | $60$ |                 $1\\leq N,M\\leq 500$                 |", "locale": "zh-CN"}}}
{"pid": "P8175", "type": "P", "difficulty": 7, "samples": [["5\n-1 1 1 1 1", "2"], ["8\n-1 1 0 0 -1 0 0 3", "1"], ["8\n2 -1 2 -1 2 -1 2 -1", "1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "CEOI（中欧）"], "title": "[CEOI 2021] Tortoise", "background": "译自 CEOI2021 Day2 T2. [Tortoise](https://hsin.hr/ceoi/competition/ceoi2021_day2_tasks.pdf)。\n", "description": "Wilco 想购买糖果，为此它将访问 Nakamise 商店街。\n\nTom 想让 Wilco 少吃点糖果，为此它将在 Wilco 前购买一些糖果。商店街上共有 $N$ 个等距离的地点，它们要么是商店要么是空地。\n\n每家商店都有一定数量的糖果（可能为 $0$） Wilco 将会从第一个地点走到最后一个，顺序访问所有地点。每当它到达一家商店时它会买走所有糖果。Tom 每一刻的移动速度是 Wilco 的两倍，且可以朝两个方向移动。但是，Tom 每一刻只能携带最多一颗糖果。一旦 Tom 拿到一颗糖果，它就会把它带走直到把它交给在空地上玩的小孩。假设购买和给出糖果均不消耗时间。\n\nTom 的目标是最小化 Wilco 能拿到的糖果。初始时它们均在第一个地点，Tom 任何时刻先于 Wilco 行动。即如果第一个地点是商店，Tom 可以先于 Wilco 购买一颗糖果。\n\n那么在 Tom 的干扰下 Wilco 能拿到多少糖果呢？", "inputFormat": "输入的第一行包含一个整数 $N$，含义如题目描述。  \n\n第二行有 $N$ 个整数 $a_1,a_2,\\dots,a_N$ 表示商店街上的 $N$ 个地点，其中 $a_i=-1$ 时第 $i$ 个地点为空地，否则它为商店且有 $a_i$ 颗糖果出售。有可能一家商店没有糖果（即 $a_i=0$）\n\n保证至少有一个地点是空地。", "outputFormat": "输出 Wilco 将会买到的糖果数量。", "hint": "#### 数据范围与约定\n\n对于 $100\\%$ 的数据：$1\\leq n \\leq 5\\times 10^5$，$-1\\leq a_i \\leq 10^4$。\n\n| 子任务 | 分值 |                       约束                        |\n| :----: | :--: | :-----------------------------------------------: |\n|  $1$   | $8$  |          $1\\leq N\\leq 20$，$-1\\leq a_i\\leq 1$          |\n|  $2$   | $10$ |         $1\\leq N\\leq 300$，$-1\\leq a_i\\leq 1$          |\n|  $3$   | $30$ |     $1\\leq N\\leq 300$，$-1\\leq a_i\\leq 10^4$      |\n|  $4$   | $25$ | $1\\leq N\\leq 5\\times 10^3$，$-1\\leq a_i\\leq 10^4$ |\n|  $5$   | $27$ | $1\\leq N\\leq 5\\times 10^5$，$-1\\leq a_i\\leq 10^4$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] Tortoise", "background": "译自 CEOI2021 Day2 T2. [Tortoise](https://hsin.hr/ceoi/competition/ceoi2021_day2_tasks.pdf)。\n", "description": "Wilco 想购买糖果，为此它将访问 Nakamise 商店街。\n\nTom 想让 Wilco 少吃点糖果，为此它将在 Wilco 前购买一些糖果。商店街上共有 $N$ 个等距离的地点，它们要么是商店要么是空地。\n\n每家商店都有一定数量的糖果（可能为 $0$） Wilco 将会从第一个地点走到最后一个，顺序访问所有地点。每当它到达一家商店时它会买走所有糖果。Tom 每一刻的移动速度是 Wilco 的两倍，且可以朝两个方向移动。但是，Tom 每一刻只能携带最多一颗糖果。一旦 Tom 拿到一颗糖果，它就会把它带走直到把它交给在空地上玩的小孩。假设购买和给出糖果均不消耗时间。\n\nTom 的目标是最小化 Wilco 能拿到的糖果。初始时它们均在第一个地点，Tom 任何时刻先于 Wilco 行动。即如果第一个地点是商店，Tom 可以先于 Wilco 购买一颗糖果。\n\n那么在 Tom 的干扰下 Wilco 能拿到多少糖果呢？", "inputFormat": "输入的第一行包含一个整数 $N$，含义如题目描述。  \n\n第二行有 $N$ 个整数 $a_1,a_2,\\dots,a_N$ 表示商店街上的 $N$ 个地点，其中 $a_i=-1$ 时第 $i$ 个地点为空地，否则它为商店且有 $a_i$ 颗糖果出售。有可能一家商店没有糖果（即 $a_i=0$）\n\n保证至少有一个地点是空地。", "outputFormat": "输出 Wilco 将会买到的糖果数量。", "hint": "#### 数据范围与约定\n\n对于 $100\\%$ 的数据：$1\\leq n \\leq 5\\times 10^5$，$-1\\leq a_i \\leq 10^4$。\n\n| 子任务 | 分值 |                       约束                        |\n| :----: | :--: | :-----------------------------------------------: |\n|  $1$   | $8$  |          $1\\leq N\\leq 20$，$-1\\leq a_i\\leq 1$          |\n|  $2$   | $10$ |         $1\\leq N\\leq 300$，$-1\\leq a_i\\leq 1$          |\n|  $3$   | $30$ |     $1\\leq N\\leq 300$，$-1\\leq a_i\\leq 10^4$      |\n|  $4$   | $25$ | $1\\leq N\\leq 5\\times 10^3$，$-1\\leq a_i\\leq 10^4$ |\n|  $5$   | $27$ | $1\\leq N\\leq 5\\times 10^5$，$-1\\leq a_i\\leq 10^4$ |", "locale": "zh-CN"}}}
{"pid": "P8176", "type": "P", "difficulty": 7, "samples": [["4 2\n3 4\n3 1\n2 3\n", "YES \n2\n"], ["8 3\n7 3\n1 3\n7 8\n5 1\n4 6\n7 2\n3 6\n", "NO\n0\n"], ["6 5\n4 1\n4 2\n3 6\n5 2\n4 6\n", "YES\n10\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "CEOI（中欧）"], "title": "[CEOI 2021] Wells", "background": "译自 CEOI2021 Day2 T3. [Wells](https://hsin.hr/ceoi/competition/ceoi2021_day2_tasks.pdf)。\n\n**滥用评测资源将被封号。**", "description": "给出一个有 $N$ 个结点的树和一个正整数 $K$，确定是否存在一个顶点子集，使得任意恰好包含 $K$ 个顶点的路径都**恰好**有一个来自该子集的顶点。此外，您需要找到模 $10^9+7$ 的此类子集的数量（不存在则为 $0$）。", "inputFormat": "第一行两个整数 $N$ 和 $K$。\n\n接下来 $N-1$ 行，每行两个整数 $u$ 和 $v$，表示节点 $u$ 和节点 $v$ 之间存在一条无向边。\n\n", "outputFormat": "第一行一个字符串，如果存在输出 `YES`，否则输出 `NO`。\n\n第二行输出一个整数，表示满足条件的子集个数，如果不存在，输出 $0$。\n\n", "hint": "#### 样例解释1\n![](https://cdn.luogu.com.cn/upload/image_hosting/5v4lswx9.png)\n\n满足条件的子集有：$\\{3\\}$，$\\{1,2,4\\}$。\n\n#### 样例解释2\n![](https://cdn.luogu.com.cn/upload/image_hosting/hgp8ggz4.png)\n\n#### 样例解释3\n![](https://cdn.luogu.com.cn/upload/image_hosting/xv206wxg.png)\n\n只有一条长度为 $5$ 的路径，该路径包含节点 $3,6,4,2,5$。这些节点中必须恰好有一个在子集中，并且节点 $1$ 是否在子集中没有区别。\n\n因此所有满足条件的子集有：$\\{3\\}$，$\\{1,3\\}$，$\\{6\\}$，$\\{1,6\\}$，$\\{4\\}$，$\\{1,4\\}$，$\\{2\\}$，$\\{1,2\\}$，$\\{5\\}$，$\\{1,5\\}$。\n\n#### 数据范围与约定\n\n对于 $100\\%$ 的数据：$2\\leq K\\leq N\\le 1.5\\times 10^6$。\n\n| 子任务 | 分值 |                         约束                          |\n| :----: | :--: | :---------------------------------------------------: |\n|  $1$   | $30$ |                   $2\\leq K\\leq N\\le 200$                   |\n|  $2$   | $20$ |           $2\\leq K\\leq N\\le 10^4$            |\n|  $3$   | $20$ | $2\\leq K\\leq N\\le 5\\times 10^5$ |\n|  $4$   | $30$|                 $2\\leq K\\leq N\\le 1.5\\times 10^6$                  |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2021] Wells", "background": "译自 CEOI2021 Day2 T3. [Wells](https://hsin.hr/ceoi/competition/ceoi2021_day2_tasks.pdf)。\n\n**滥用评测资源将被封号。**", "description": "给出一个有 $N$ 个结点的树和一个正整数 $K$，确定是否存在一个顶点子集，使得任意恰好包含 $K$ 个顶点的路径都**恰好**有一个来自该子集的顶点。此外，您需要找到模 $10^9+7$ 的此类子集的数量（不存在则为 $0$）。", "inputFormat": "第一行两个整数 $N$ 和 $K$。\n\n接下来 $N-1$ 行，每行两个整数 $u$ 和 $v$，表示节点 $u$ 和节点 $v$ 之间存在一条无向边。\n\n", "outputFormat": "第一行一个字符串，如果存在输出 `YES`，否则输出 `NO`。\n\n第二行输出一个整数，表示满足条件的子集个数，如果不存在，输出 $0$。\n\n", "hint": "#### 样例解释1\n![](https://cdn.luogu.com.cn/upload/image_hosting/5v4lswx9.png)\n\n满足条件的子集有：$\\{3\\}$，$\\{1,2,4\\}$。\n\n#### 样例解释2\n![](https://cdn.luogu.com.cn/upload/image_hosting/hgp8ggz4.png)\n\n#### 样例解释3\n![](https://cdn.luogu.com.cn/upload/image_hosting/xv206wxg.png)\n\n只有一条长度为 $5$ 的路径，该路径包含节点 $3,6,4,2,5$。这些节点中必须恰好有一个在子集中，并且节点 $1$ 是否在子集中没有区别。\n\n因此所有满足条件的子集有：$\\{3\\}$，$\\{1,3\\}$，$\\{6\\}$，$\\{1,6\\}$，$\\{4\\}$，$\\{1,4\\}$，$\\{2\\}$，$\\{1,2\\}$，$\\{5\\}$，$\\{1,5\\}$。\n\n#### 数据范围与约定\n\n对于 $100\\%$ 的数据：$2\\leq K\\leq N\\le 1.5\\times 10^6$。\n\n| 子任务 | 分值 |                         约束                          |\n| :----: | :--: | :---------------------------------------------------: |\n|  $1$   | $30$ |                   $2\\leq K\\leq N\\le 200$                   |\n|  $2$   | $20$ |           $2\\leq K\\leq N\\le 10^4$            |\n|  $3$   | $20$ | $2\\leq K\\leq N\\le 5\\times 10^5$ |\n|  $4$   | $30$|                 $2\\leq K\\leq N\\le 1.5\\times 10^6$                  |\n", "locale": "zh-CN"}}}
{"pid": "P8177", "type": "P", "difficulty": 2, "samples": [["2\n3 1 1\n2 2 2", "0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "洛谷月赛"], "title": "「EZEC-11」等差数列", "background": "", "description": "给你一个长为 $n$，首项为 $a$，公差为 $d$ 的等差数列 $x$。\n\n从 $x$ 中任选两个数 $x_i,x_j$（$i\\neq j$），同时满足：\n\n- $x_i+x_j$ 为偶数。\n- $x$ 中没有 $\\frac{x_i+x_j}{2}$。\n\n那么你就可以将 $\\frac{x_i+x_j}{2}$ 加入 $x$ 中，称为一次操作。\n\n**注意：新加入的数也可被选择。**\n\n问你最多能进行几次操作？", "inputFormat": "**本题有多组测试数据**。\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，一行三个整数 $n,a,d$。", "outputFormat": "对于每组测试数据，一行一个整数表示最多的操作次数。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，$x=[1,2,3]$，无法进行任何操作。\n\n对于第二组数据，$x=[2,4]$，可以选择 $2$ 和 $4$，将 $\\frac{2+4}{2}=3$ 加入数列中。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（10 points）：$d=1$。\n-  Subtask 2（10 points）：$n=2$。\n-  Subtask 3（30 points）：$T\\le 10$，$n\\times d\\le 10^3$，$a=0$。\n-  Subtask 4（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$2\\le n\\le 10^9$，$-10^9\\le a\\le 10^9$，$1\\le d\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-11」等差数列", "background": "", "description": "给你一个长为 $n$，首项为 $a$，公差为 $d$ 的等差数列 $x$。\n\n从 $x$ 中任选两个数 $x_i,x_j$（$i\\neq j$），同时满足：\n\n- $x_i+x_j$ 为偶数。\n- $x$ 中没有 $\\frac{x_i+x_j}{2}$。\n\n那么你就可以将 $\\frac{x_i+x_j}{2}$ 加入 $x$ 中，称为一次操作。\n\n**注意：新加入的数也可被选择。**\n\n问你最多能进行几次操作？", "inputFormat": "**本题有多组测试数据**。\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，一行三个整数 $n,a,d$。", "outputFormat": "对于每组测试数据，一行一个整数表示最多的操作次数。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，$x=[1,2,3]$，无法进行任何操作。\n\n对于第二组数据，$x=[2,4]$，可以选择 $2$ 和 $4$，将 $\\frac{2+4}{2}=3$ 加入数列中。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（10 points）：$d=1$。\n-  Subtask 2（10 points）：$n=2$。\n-  Subtask 3（30 points）：$T\\le 10$，$n\\times d\\le 10^3$，$a=0$。\n-  Subtask 4（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$2\\le n\\le 10^9$，$-10^9\\le a\\le 10^9$，$1\\le d\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8178", "type": "P", "difficulty": 5, "samples": [["2\n3\n1 1 1\n2 2 2\n3 5 7\n3\n1 1 1\n2 2 2\n3 3 3", "Yes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数论", "O2优化", "中国剩余定理 CRT", "逆元", "洛谷月赛"], "title": "「EZEC-11」Sequence", "background": "", "description": "已知数列 $f$ 满足 $f_n=a_nf_{n-1}+b_n\\ (n\\ge 1)$。\n\n问是否存在非负整数 $f_0$，使得 $\\forall 1\\le i\\le k$，$f_i$ 为**质数** $p_i$ 的倍数。", "inputFormat": "**本题有多组测试数据**。\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行一个整数 $k$。\n- 第二行 $k$ 个整数 $a_1,a_2,\\dots,a_k$。\n- 第三行 $k$ 个整数 $b_1,b_2,\\dots,b_k$。\n- 第四行 $k$ 个整数 $p_1,p_2,\\dots,p_k$，**保证 $p$ 为质数**。", "outputFormat": "对于每组测试数据：\n\n- 一行一个字符串，若存在满足条件的 $f_0$ 则输出 `Yes`，否则输出 `No`。", "hint": "**【样例 1 解释】**\n\n对于第一组测试数据，一个可行的解为 $f_0=1$，此时 $f_1=3,f_2=5,f_3=7$。\n\n对于第二组测试数据，没有满足条件的 $f_0$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（10 points）：$k=1$。\n-  Subtask 2（20 points）：$k\\le 2$。\n-  Subtask 3（20 points）：$k\\le 5$，$p_i\\le 20$。\n-  Subtask 4（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$1\\le k\\le 10^3$，$0\\le a_i,b_i\\le 10^9$，$2\\le p_i\\le 10^9$，**$p$ 为质数**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-11」Sequence", "background": "", "description": "已知数列 $f$ 满足 $f_n=a_nf_{n-1}+b_n\\ (n\\ge 1)$。\n\n问是否存在非负整数 $f_0$，使得 $\\forall 1\\le i\\le k$，$f_i$ 为**质数** $p_i$ 的倍数。", "inputFormat": "**本题有多组测试数据**。\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行一个整数 $k$。\n- 第二行 $k$ 个整数 $a_1,a_2,\\dots,a_k$。\n- 第三行 $k$ 个整数 $b_1,b_2,\\dots,b_k$。\n- 第四行 $k$ 个整数 $p_1,p_2,\\dots,p_k$，**保证 $p$ 为质数**。", "outputFormat": "对于每组测试数据：\n\n- 一行一个字符串，若存在满足条件的 $f_0$ 则输出 `Yes`，否则输出 `No`。", "hint": "**【样例 1 解释】**\n\n对于第一组测试数据，一个可行的解为 $f_0=1$，此时 $f_1=3,f_2=5,f_3=7$。\n\n对于第二组测试数据，没有满足条件的 $f_0$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（10 points）：$k=1$。\n-  Subtask 2（20 points）：$k\\le 2$。\n-  Subtask 3（20 points）：$k\\le 5$，$p_i\\le 20$。\n-  Subtask 4（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$1\\le k\\le 10^3$，$0\\le a_i,b_i\\le 10^9$，$2\\le p_i\\le 10^9$，**$p$ 为质数**。", "locale": "zh-CN"}}}
{"pid": "P8179", "type": "P", "difficulty": 6, "samples": [["2 4 50\n10 100\n100 1", "365"], ["6 6 10\n90 200\n90 200\n90 200\n92 200\n92 200\n94 200", "598"], ["3 10 30\n1000 8\n1050 3\n1100 1", "10607"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "O2优化", "枚举", "洛谷月赛"], "title": "「EZEC-11」Tyres", "background": "这道题曾经有有趣的题目背景。", "description": "有 $n$ 套轮胎，滴叉需要用这些轮胎跑 $m$ 圈。\n\n使用第 $i$ 套轮胎跑的第 $j$ 圈（对每套轮胎单独计数）需要 $a_i+b_i(j-1)^2$ 秒。在本题中，你不需要担心爆胎，安全车，红旗或者不同的比赛策略。\n\n滴叉需要进入维修站来更换轮胎，所消耗的时间为 $t$ 秒。特别地，滴叉使用的**第一套**轮胎不需要进站更换。\n\n为了帮助滴叉拿下 WDC，你需要最小化总时间，总时间等于每圈的时间之和加上进站所花费的时间。", "inputFormat": "第一行输入三个整数 $n,m,t$。\n\n接下来 $n$ 行，每行输入两个整数 $a_i,b_i$。", "outputFormat": "输出一个整数，代表总时间的最小值。", "hint": "**【样例解释】**\n\n对于第一个样例：\n\n* 你先让滴叉用第一套轮胎跑一圈，消耗 $10$ 秒。\n* 然后进站更换第二套轮胎，消耗 $50$ 秒。\n* 然后用第二套轮胎跑三圈。第一圈消耗 $100$ 秒，第二圈消耗 $100+1\\times 1^2=101$ 秒，第三圈消耗 $100+1\\times 2^2=104$ 秒。\n* 总时间为 $10+50+100+101+104=365$ 秒。\n\n对于第二个样例，滴叉每圈更换一次新轮胎。\n\n注意一套轮胎被卸下后并不会重置它跑的圈数。\n\n对于第三个样例，滴叉先使用第一套轮胎跑 $4$ 圈，然后更换第二套轮胎跑 $6$ 圈。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 1（7 pts）：$n=1$。\n- Subtask 2（9 pts）：$n\\leq10$，$m\\leq 100$。\n- Subtask 3（13 pts）：$t=0$。\n- Subtask 4（21 pts）：保证 $a_i,b_i$ 随机生成。\n- Subtask 5（50 pts）：无特殊限制。\n\n对于前 $100\\%$ 的数据，$1\\leq n,b_i\\leq 500$，$0\\leq t\\leq 500$，$1\\leq m\\leq 2 \\times 10^5$，$1\\leq a_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-11」Tyres", "background": "这道题曾经有有趣的题目背景。", "description": "有 $n$ 套轮胎，滴叉需要用这些轮胎跑 $m$ 圈。\n\n使用第 $i$ 套轮胎跑的第 $j$ 圈（对每套轮胎单独计数）需要 $a_i+b_i(j-1)^2$ 秒。在本题中，你不需要担心爆胎，安全车，红旗或者不同的比赛策略。\n\n滴叉需要进入维修站来更换轮胎，所消耗的时间为 $t$ 秒。特别地，滴叉使用的**第一套**轮胎不需要进站更换。\n\n为了帮助滴叉拿下 WDC，你需要最小化总时间，总时间等于每圈的时间之和加上进站所花费的时间。", "inputFormat": "第一行输入三个整数 $n,m,t$。\n\n接下来 $n$ 行，每行输入两个整数 $a_i,b_i$。", "outputFormat": "输出一个整数，代表总时间的最小值。", "hint": "**【样例解释】**\n\n对于第一个样例：\n\n* 你先让滴叉用第一套轮胎跑一圈，消耗 $10$ 秒。\n* 然后进站更换第二套轮胎，消耗 $50$ 秒。\n* 然后用第二套轮胎跑三圈。第一圈消耗 $100$ 秒，第二圈消耗 $100+1\\times 1^2=101$ 秒，第三圈消耗 $100+1\\times 2^2=104$ 秒。\n* 总时间为 $10+50+100+101+104=365$ 秒。\n\n对于第二个样例，滴叉每圈更换一次新轮胎。\n\n注意一套轮胎被卸下后并不会重置它跑的圈数。\n\n对于第三个样例，滴叉先使用第一套轮胎跑 $4$ 圈，然后更换第二套轮胎跑 $6$ 圈。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 1（7 pts）：$n=1$。\n- Subtask 2（9 pts）：$n\\leq10$，$m\\leq 100$。\n- Subtask 3（13 pts）：$t=0$。\n- Subtask 4（21 pts）：保证 $a_i,b_i$ 随机生成。\n- Subtask 5（50 pts）：无特殊限制。\n\n对于前 $100\\%$ 的数据，$1\\leq n,b_i\\leq 500$，$0\\leq t\\leq 500$，$1\\leq m\\leq 2 \\times 10^5$，$1\\leq a_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8180", "type": "P", "difficulty": 6, "samples": [["5\n3 1 0 0 4\n6 3 6 3 6\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "「EZEC-11」Unmemorable", "background": "", "description": "Unputdownable 手中有一个长度为 $n$ 的排列 $a$。\n\n他在练习单调栈的时候用程序对于每一个 $i$ 求出了最大的 $l_i$ 使得 $a_{l_i} < a_i$ 且 $l_i<i$，以及最小的 $r_i$ 使得 $a_{r_i}<a_i$ 且 $r_i>i$。\n\n特别的，若这样的 $l_i$ 不存在，则定义为 $0$，不存在的 $r_i$ 则定义为 $n+1$。\n\n某日 Unputdownable 忘记了排列 $a$，而且只剩余**分别重排**后的 $l$ 和 $r$ 数组了，你能帮助他还原原来的排列 $a$ 吗？\n\n随后由于他发现无法还原 $a$，你只要告诉他有多少种可能的原排列 $a$。 \n\n答案对于 $998244353$ 取模，数据保证至少存在一种方案。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个整数，表示重排后的 $l$。\n\n第三行输入 $n$ 个整数，表示重排后的 $r$。", "outputFormat": "输出一行，包含一个整数，表示可能的排列数量对 $998244353$ 取模后的值。", "hint": "**样例解释 1**\n\n一种可能的排列是 $\\{2,5,1,3,4\\}$，$l$ 数组是 $\\{0,1,0,3,4\\}$，$r$ 数组是 $\\{3,3,6,6,6\\}$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n\\leq 8$。\n- Subtask 2（15 pts）：$r_i\\geq n$。\n- Subtask 3（15 pts）：$n\\leq 2000$，保证存在一个排列 $a$ 满足排列 $a$ 所求出的 $l,r$ 即为给定的。 \n- Subtask 4（25 pts）：$n\\leq 10^6$，保证存在一个排列 $a$ 满足排列 $a$ 所求出的 $l,r$ 即为给定的。 \n- Subtask 5（40 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$，$0 \\leq l_i,r_i \\leq n+1$，**数据保证至少存在一种方案**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-11」Unmemorable", "background": "", "description": "Unputdownable 手中有一个长度为 $n$ 的排列 $a$。\n\n他在练习单调栈的时候用程序对于每一个 $i$ 求出了最大的 $l_i$ 使得 $a_{l_i} < a_i$ 且 $l_i<i$，以及最小的 $r_i$ 使得 $a_{r_i}<a_i$ 且 $r_i>i$。\n\n特别的，若这样的 $l_i$ 不存在，则定义为 $0$，不存在的 $r_i$ 则定义为 $n+1$。\n\n某日 Unputdownable 忘记了排列 $a$，而且只剩余**分别重排**后的 $l$ 和 $r$ 数组了，你能帮助他还原原来的排列 $a$ 吗？\n\n随后由于他发现无法还原 $a$，你只要告诉他有多少种可能的原排列 $a$。 \n\n答案对于 $998244353$ 取模，数据保证至少存在一种方案。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个整数，表示重排后的 $l$。\n\n第三行输入 $n$ 个整数，表示重排后的 $r$。", "outputFormat": "输出一行，包含一个整数，表示可能的排列数量对 $998244353$ 取模后的值。", "hint": "**样例解释 1**\n\n一种可能的排列是 $\\{2,5,1,3,4\\}$，$l$ 数组是 $\\{0,1,0,3,4\\}$，$r$ 数组是 $\\{3,3,6,6,6\\}$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n\\leq 8$。\n- Subtask 2（15 pts）：$r_i\\geq n$。\n- Subtask 3（15 pts）：$n\\leq 2000$，保证存在一个排列 $a$ 满足排列 $a$ 所求出的 $l,r$ 即为给定的。 \n- Subtask 4（25 pts）：$n\\leq 10^6$，保证存在一个排列 $a$ 满足排列 $a$ 所求出的 $l,r$ 即为给定的。 \n- Subtask 5（40 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$，$0 \\leq l_i,r_i \\leq n+1$，**数据保证至少存在一种方案**。", "locale": "zh-CN"}}}
{"pid": "P8181", "type": "P", "difficulty": 7, "samples": [["4\n2 1 4\n3 3 7\n8 12 64\n2 1 1048976\n", "6\n17\n1149\n148359175\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "洛谷月赛"], "title": "「EZEC-11」Circle", "background": "", "description": "有 $n$ 个人，编号为 $1$ 到 $n$，坐在环上玩约瑟夫。\n\n他们从 $1$ 到 $m$ 循环报数，与正常约瑟夫不同的是，没有报到 $1$ 的人都会被淘汰，直至只有一个人活下来为止。\n\n设活下来的人编号为 $x$，则记 $J_m(n)=x$。\n\n给定 $m,l,r$，求 $\\sum_{i=l}^{r}J_m(i)$，输出对 $998244353$ 取模。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行三个整数，依次为 $m,l,r$。", "outputFormat": "对于每组数据：\n\n输出一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（4 pts）：$T=1$，$m \\leq 10$，$r \\leq 200$。\n- Subtask 2（8 pts）：$T=1$，$m \\leq 10^6$，$r\\leq 10^7$。 \n- Subtask 3（8 pts）：$\\sum (r-l+1) \\leq 2 \\times 10^6$。\n- Subtask 4（10 pts）：$m=2$。\n- Subtask 5（25 pts）：$T \\leq 5$，$m \\leq 10^6$。 \n- Subtask 6（45 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^4$，$2 \\leq m \\leq 10^{12}$，$1 \\leq l \\leq r \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-11」Circle", "background": "", "description": "有 $n$ 个人，编号为 $1$ 到 $n$，坐在环上玩约瑟夫。\n\n他们从 $1$ 到 $m$ 循环报数，与正常约瑟夫不同的是，没有报到 $1$ 的人都会被淘汰，直至只有一个人活下来为止。\n\n设活下来的人编号为 $x$，则记 $J_m(n)=x$。\n\n给定 $m,l,r$，求 $\\sum_{i=l}^{r}J_m(i)$，输出对 $998244353$ 取模。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行三个整数，依次为 $m,l,r$。", "outputFormat": "对于每组数据：\n\n输出一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（4 pts）：$T=1$，$m \\leq 10$，$r \\leq 200$。\n- Subtask 2（8 pts）：$T=1$，$m \\leq 10^6$，$r\\leq 10^7$。 \n- Subtask 3（8 pts）：$\\sum (r-l+1) \\leq 2 \\times 10^6$。\n- Subtask 4（10 pts）：$m=2$。\n- Subtask 5（25 pts）：$T \\leq 5$，$m \\leq 10^6$。 \n- Subtask 6（45 pts）：无特殊限制。 \n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^4$，$2 \\leq m \\leq 10^{12}$，$1 \\leq l \\leq r \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8182", "type": "P", "difficulty": 7, "samples": [["5 4 1\n1 1 2 1 1\n1 5", "2"], ["10 3 3\n4 8 1 2 9 7 4 1 3 5\n1 10\n3 8\n5 5", "22\n10\n9"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "O2优化", "分治", "线性规划", "分块", "整体二分", "洛谷月赛"], "title": "「EZEC-11」雪的魔法", "background": "Muxii 是一个雪魔法师。只要他挥起魔法棒，念出神秘的咒语，雪花就会从天而降，在地面上一点一点地积累起厚厚的雪层。正因 Muxii 魔力高超，上帝任命 Muxii 掌管整个世界的雪。\n\n某天，上帝给 Muxii 下达了一个任务：他需要让一个长为 $n$ 的地面上下雪。其中，第 $i$ 个位置的积雪厚度需要达到 $a_i$（$a_i\\ge0$，“达到 $a_i$” 指不能低于也不能超过 $a_i$）。然而，上帝不知道的是，Muxii 的能力有限，他每次施法只能让长度 $\\le m$ 的区间内下雪 1s，使得这个区间内的积雪厚度增加 $1$。由于任务急迫，Muxii 想要知道，若要完成某些区间的任务，他至少要施法多少次。", "description": "定义初始数列为每个数字都为 $0$ 的数列。\n\n定义一次操作为将数列的一个区间中每一个数的值增加 $1$，规定该区间的长度不能超过 $m$。\n\n给定一个长度为 $n$ 的数列 $a$，第 $i$ 个数为 $a_i$。\n\n你需要回答 $q$ 次询问。每次询问给定 $l,r$，你需要回答将一个长度为 $r-l+1$ 的初始数列变为 $a$ 中的 $[l,r]$（即数列 $a_l$, $a_{l+1}$, $\\cdots$, $a_r$）至少需要多少次操作。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $q$ 行，每行两个整数，表示 $l,r$。", "outputFormat": "$q$ 行，每行一个整数，表示至少需要的操作次数。", "hint": "**「样例 1 说明」**\n\n一个长度为 $5$ 的初始数列为 $0$ $0$ $0$ $0$ $0$。\n\n第一次操作为，将区间 $[1,3]$ 中每一个数，即第 $1$、$2$、$3$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $1$ $0$ $0$。\n\n第二次操作为，将区间 $[3,5]$ 中每一个数，即第 $3$、$4$、$5$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $2$ $1$ $1$。\n\n**「数据范围与约定」**\n\n- Subtask 1（1 point）：$m=1$。\n- Subtask 2（4 points）：$m=n$。\n- Subtask 3（10 points）：$n,q\\le300$。\n- Subtask 4（10 points）：$n,q\\le5\\times10^3$。\n- Subtask 5（15 points）：$m\\le5$。\n- Subtask 6（15 points）：$m\\le100$。\n- Subtask 7（20 points）：$n,q\\le5\\times10^4$。\n- Subtask 8（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le10^5$，$1\\le q\\le10^5$，$0\\le a_i\\le10^9$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-11」雪的魔法", "background": "Muxii 是一个雪魔法师。只要他挥起魔法棒，念出神秘的咒语，雪花就会从天而降，在地面上一点一点地积累起厚厚的雪层。正因 Muxii 魔力高超，上帝任命 Muxii 掌管整个世界的雪。\n\n某天，上帝给 Muxii 下达了一个任务：他需要让一个长为 $n$ 的地面上下雪。其中，第 $i$ 个位置的积雪厚度需要达到 $a_i$（$a_i\\ge0$，“达到 $a_i$” 指不能低于也不能超过 $a_i$）。然而，上帝不知道的是，Muxii 的能力有限，他每次施法只能让长度 $\\le m$ 的区间内下雪 1s，使得这个区间内的积雪厚度增加 $1$。由于任务急迫，Muxii 想要知道，若要完成某些区间的任务，他至少要施法多少次。", "description": "定义初始数列为每个数字都为 $0$ 的数列。\n\n定义一次操作为将数列的一个区间中每一个数的值增加 $1$，规定该区间的长度不能超过 $m$。\n\n给定一个长度为 $n$ 的数列 $a$，第 $i$ 个数为 $a_i$。\n\n你需要回答 $q$ 次询问。每次询问给定 $l,r$，你需要回答将一个长度为 $r-l+1$ 的初始数列变为 $a$ 中的 $[l,r]$（即数列 $a_l$, $a_{l+1}$, $\\cdots$, $a_r$）至少需要多少次操作。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $q$ 行，每行两个整数，表示 $l,r$。", "outputFormat": "$q$ 行，每行一个整数，表示至少需要的操作次数。", "hint": "**「样例 1 说明」**\n\n一个长度为 $5$ 的初始数列为 $0$ $0$ $0$ $0$ $0$。\n\n第一次操作为，将区间 $[1,3]$ 中每一个数，即第 $1$、$2$、$3$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $1$ $0$ $0$。\n\n第二次操作为，将区间 $[3,5]$ 中每一个数，即第 $3$、$4$、$5$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $2$ $1$ $1$。\n\n**「数据范围与约定」**\n\n- Subtask 1（1 point）：$m=1$。\n- Subtask 2（4 points）：$m=n$。\n- Subtask 3（10 points）：$n,q\\le300$。\n- Subtask 4（10 points）：$n,q\\le5\\times10^3$。\n- Subtask 5（15 points）：$m\\le5$。\n- Subtask 6（15 points）：$m\\le100$。\n- Subtask 7（20 points）：$n,q\\le5\\times10^4$。\n- Subtask 8（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le10^5$，$1\\le q\\le10^5$，$0\\le a_i\\le10^9$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8183", "type": "P", "difficulty": 3, "samples": [["3\n6\n1 2 3 1 1 1\n3\n2 2 3\n5\n0 0 0 0 0", "3\n2\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2022", "数论"], "title": "[USACO22FEB] Sleeping in Class B", "background": "", "description": "Bessie the cow was excited to recently return to in-person learning! Unfortunately, her instructor, Farmer John, is a very boring lecturer, and so she ends up falling asleep in class often.\nFarmer John has noticed that Bessie has not been paying attention in class. He has asked another student in class, Elsie, to keep track of the number of times Bessie falls asleep in a given class. There are $N$ class periods $(1\\le N\\le 10^5)$, and Elsie logs that Bessie fell asleep $a_i$ times $(0\\le a_i\\le 10^6)$ in the $i$-th class period. The total number of times Bessie fell asleep across all class periods is at most $10^6$.\n\nElsie, feeling very competitive with Bessie, wants to make Farmer John feel like Bessie is consistently falling asleep the same number of times in every class -- making it appear that the issue is entirely Bessie's fault, with no dependence on Farmer John's sometimes-boring lectures. The only way Elsie may modify the log is by combining two adjacent class periods. For example, if $a=[1,2,3,4,5]$, then if Elsie combines the second and third class periods the log will become $[1,5,4,5]$.\n\nHelp Elsie compute the minimum number of modifications to the log that she needs to make so that she can make all the numbers in the log equal.", "inputFormat": "Each input will contain $T$ $(1\\le T\\le 10)$ test cases that should be solved independently.\n\nThe first line contains $T$, the number of test cases to be solved. The $T$ test cases follow, each described by a pair of lines. The first line of each pair contains $N$, and the second contains $a_1,a_2,\\ldots,a_N$. \n\nIt is guaranteed that within each test case, the sum of all values in $a$ is at most $10^6$. It is also guaranteed that the sum of $N$ over all test cases is at most $10^5$.", "outputFormat": "Please write $T$ lines of output, giving the minimum number of modifications Elsie could perform to make all the log entries equal for each case.", "hint": "【样例解释】\n\nFor the first test case in this example, Elsie can change her log to consist solely of 3s with 3 modifications.\n```\n   1 2 3 1 1 1\n-> 3 3 1 1 1\n-> 3 3 2 1\n-> 3 3 3\n```\nFor the second test case, Elsie can change her log to 7 with 2 modifications.\n```\n   2 2 3\n-> 2 5\n-> 7\n```\nFor the last test case, Elsie doesn’t need to perform any operations; the log already consists of equal entries.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Sleeping in Class B", "background": "", "description": "Bessie the cow was excited to recently return to in-person learning! Unfortunately, her instructor, Farmer John, is a very boring lecturer, and so she ends up falling asleep in class often.\nFarmer John has noticed that Bessie has not been paying attention in class. He has asked another student in class, Elsie, to keep track of the number of times Bessie falls asleep in a given class. There are $N$ class periods $(1\\le N\\le 10^5)$, and Elsie logs that Bessie fell asleep $a_i$ times $(0\\le a_i\\le 10^6)$ in the $i$-th class period. The total number of times Bessie fell asleep across all class periods is at most $10^6$.\n\nElsie, feeling very competitive with Bessie, wants to make Farmer John feel like Bessie is consistently falling asleep the same number of times in every class -- making it appear that the issue is entirely Bessie's fault, with no dependence on Farmer John's sometimes-boring lectures. The only way Elsie may modify the log is by combining two adjacent class periods. For example, if $a=[1,2,3,4,5]$, then if Elsie combines the second and third class periods the log will become $[1,5,4,5]$.\n\nHelp Elsie compute the minimum number of modifications to the log that she needs to make so that she can make all the numbers in the log equal.", "inputFormat": "Each input will contain $T$ $(1\\le T\\le 10)$ test cases that should be solved independently.\n\nThe first line contains $T$, the number of test cases to be solved. The $T$ test cases follow, each described by a pair of lines. The first line of each pair contains $N$, and the second contains $a_1,a_2,\\ldots,a_N$. \n\nIt is guaranteed that within each test case, the sum of all values in $a$ is at most $10^6$. It is also guaranteed that the sum of $N$ over all test cases is at most $10^5$.", "outputFormat": "Please write $T$ lines of output, giving the minimum number of modifications Elsie could perform to make all the log entries equal for each case.", "hint": "【样例解释】\n\nFor the first test case in this example, Elsie can change her log to consist solely of 3s with 3 modifications.\n```\n   1 2 3 1 1 1\n-> 3 3 1 1 1\n-> 3 3 2 1\n-> 3 3 3\n```\nFor the second test case, Elsie can change her log to 7 with 2 modifications.\n```\n   2 2 3\n-> 2 5\n-> 7\n```\nFor the last test case, Elsie doesn’t need to perform any operations; the log already consists of equal entries.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Sleeping in Class B", "background": "", "description": "奶牛 Bessie 最近很高兴能够重返线下课堂！不幸的是，她的老师 Farmer John 讲课非常无聊，因此她经常在课堂上睡着。  \nFarmer John 注意到 Bessie 在课堂上没有专心听讲。他让班上的另一位学生 Elsie 记录 Bessie 在每节课上睡着的次数。总共有 $N$ 节课（$1 \\leq N \\leq 10^5$），Elsie 记录到 Bessie 在第 $i$ 节课上睡着了 $a_i$ 次（$0 \\leq a_i \\leq 10^6$）。所有课程中 Bessie 睡着的总次数不超过 $10^6$。\n\nElsie 对 Bessie 感到非常竞争，她希望让 Farmer John 觉得 Bessie 在每节课上睡着的次数是一致的——让问题看起来完全是 Bessie 的错，而与 Farmer John 有时无聊的讲课无关。Elsie 修改记录的唯一方式是将两节相邻的课合并。例如，如果 $a = [1,2,3,4,5]$，那么如果 Elsie 合并第二和第三节课，记录将变为 $[1,5,4,5]$。\n\n请帮助 Elsie 计算她需要对记录进行的最少修改次数，以使记录中的所有数字相等。", "inputFormat": "每个输入包含 $T$（$1 \\leq T \\leq 10$）个需要独立解决的测试用例。\n\n第一行包含 $T$，表示测试用例的数量。接下来的 $T$ 组测试用例，每组由两行描述。每组的第一行包含 $N$，第二行包含 $a_1, a_2, \\ldots, a_N$。\n\n保证每个测试用例中，$a$ 的所有值之和不超过 $10^6$。同时，所有测试用例的 $N$ 之和不超过 $10^5$。", "outputFormat": "请输出 $T$ 行，每行表示 Elsie 为使记录中的所有数字相等所需的最少修改次数。", "hint": "对于第一个测试用例，Elsie 可以通过 3 次修改将记录改为全为 $3$：\n```\n   1 2 3 1 1 1\n-> 3 3 1 1 1\n-> 3 3 2 1\n-> 3 3 3\n```\n\n对于第二个测试用例，Elsie 可以通过 2 次修改将记录改为全为 $7$：\n```\n   2 2 3\n-> 2 5\n-> 7\n```\n\n对于最后一个测试用例，Elsie 不需要进行任何操作，因为记录已经由相同的数字组成。", "locale": "zh-CN"}}}
{"pid": "P8184", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 4 5\n1 2 3 4 5", "0"], ["5\n5 1 3 2 4\n4 5 2 1 3", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "排序"], "title": "[USACO22FEB]  Photoshoot 2 B", "background": "", "description": "In what seems to be a familiar occurrence, Farmer John is lining up his $N$ cows $(1\\le N\\le 10^5)$, conveniently numbered $1\\cdots N$, for a photograph.\nInitially, the cows are lined up in the order $a_1,a_2,\\cdots ,a_N$ from left to right. Farmer John's goal is to line up the cows in the order $b_1,\\cdots ,b_N$ from left to right. To accomplish this, he may perform a series of modifications to the ordering. Each modification consists of choosing a single cow and moving it some number of positions to the left.\n\nPlease count the minimum number of modifications required in order for Farmer John to line up his cows in the desired order.", "inputFormat": "The first line of input contains $N$. The second line contains $a_1,a_2,\\cdots ,a_N$. The third line contains $b_1,\\cdots ,b_N$.", "outputFormat": "Print the minimum number of modifications required to produce Farmer John's desired ordering.", "hint": "【样例解释 1】\n\nIn this example, the cows are already in the desired order, so no modifications are required.\n\n【样例解释 2】\n\nIn this example, two modifications suffice. Here is one way Farmer John can rearrange his cows:\n\n- Choose cow $4$ and move it four positions to the left.\n- Choose cow $2$ and move it two positions to the left.\n```\n   5 1 3 2 4\n-> 4 5 1 3 2\n-> 4 5 2 1 3\n```\n\n【数据范围】\n\n- Test cases 3-6 satisfy $N≤100$.\n- Test cases 7-10 satisfy $N≤5000$.\n- Test cases 11-14 satisfy no additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB]  Photoshoot 2 B", "background": "", "description": "In what seems to be a familiar occurrence, Farmer John is lining up his $N$ cows $(1\\le N\\le 10^5)$, conveniently numbered $1\\cdots N$, for a photograph.\nInitially, the cows are lined up in the order $a_1,a_2,\\cdots ,a_N$ from left to right. Farmer John's goal is to line up the cows in the order $b_1,\\cdots ,b_N$ from left to right. To accomplish this, he may perform a series of modifications to the ordering. Each modification consists of choosing a single cow and moving it some number of positions to the left.\n\nPlease count the minimum number of modifications required in order for Farmer John to line up his cows in the desired order.", "inputFormat": "The first line of input contains $N$. The second line contains $a_1,a_2,\\cdots ,a_N$. The third line contains $b_1,\\cdots ,b_N$.", "outputFormat": "Print the minimum number of modifications required to produce Farmer John's desired ordering.", "hint": "【样例解释 1】\n\nIn this example, the cows are already in the desired order, so no modifications are required.\n\n【样例解释 2】\n\nIn this example, two modifications suffice. Here is one way Farmer John can rearrange his cows:\n\n- Choose cow $4$ and move it four positions to the left.\n- Choose cow $2$ and move it two positions to the left.\n```\n   5 1 3 2 4\n-> 4 5 1 3 2\n-> 4 5 2 1 3\n```\n\n【数据范围】\n\n- Test cases 3-6 satisfy $N≤100$.\n- Test cases 7-10 satisfy $N≤5000$.\n- Test cases 11-14 satisfy no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB]  Photoshoot 2 B", "background": "", "description": "在一个熟悉的情景中，Farmer John 正在为他的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$，编号为 $1 \\cdots N$）排队拍照。  \n初始时，奶牛从左到右的排列顺序为 $a_1, a_2, \\cdots , a_N$。Farmer John 的目标是将奶牛从左到右排列成 $b_1, \\cdots , b_N$ 的顺序。为了实现这一目标，他可以对排列顺序进行一系列修改。每次修改包括选择一头奶牛并将其向左移动若干位置。\n\n请计算 Farmer John 将奶牛排列成目标顺序所需的最少修改次数。", "inputFormat": "输入的第一行包含 $N$。第二行包含 $a_1, a_2, \\cdots , a_N$。第三行包含 $b_1, \\cdots , b_N$。", "outputFormat": "输出将奶牛排列成目标顺序所需的最少修改次数。\n\n### 样例解释 1\n\n在这个例子中，奶牛已经处于目标顺序，因此不需要任何修改。\n\n### 样例解释 2\n\n在这个例子中，两次修改即可满足要求。以下是 Farmer John 重新排列奶牛的一种方式：\n\n- 选择奶牛 $4$ 并将其向左移动四个位置。\n- 选择奶牛 $2$ 并将其向左移动两个位置。\n```\n   5 1 3 2 4\n-> 4 5 1 3 2\n-> 4 5 2 1 3\n```", "hint": "- 测试用例 3-6 满足 $N \\leq 100$。\n- 测试用例 7-10 满足 $N \\leq 5000$。\n- 测试用例 11-14 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8185", "type": "P", "difficulty": 2, "samples": [["6\nMOOOOO\nOOOOOO\nABCDEF\nUVWXYZ\nCOW\nMOO\nZOO\nMOVE\nCODE\nFARM", "YES\nNO\nYES\nYES\nNO\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "USACO", "2022", "枚举"], "title": "[USACO22FEB] Blocks B", "background": "", "description": "In an effort to improve her vocabulary, Bessie the cow has obtained a set of four wooden blocks, each one a cube with a letter of the alphabet written on each of its six sides. She is learning how to spell by arranging the blocks in a row so the letters on top of the blocks spell words.\n\nGiven the letters on each of Bessie's four blocks, and a list of words she would like to spell, please determine which of words on her list she will be able to spell successfully using the blocks.", "inputFormat": "The first line of input contains $N$ $(1\\le N\\le 10)$, the number of words that Bessie would like to spell. The next four lines each contain a string with six uppercase letters, representing the letters on the six sides of one of Bessie's blocks. The next $N$ lines contain the $N$ words Bessie would like to spell. Each of these is between 1 and 4 uppercase letters long.", "outputFormat": "For each word on Bessie's list, output YES if she is able to spell it using the blocks and NO otherwise.", "hint": "【样例解释】\n\nIn this example, Bessie can spell COW, ZOO, and MOVE. Sadly, she cannot spell MOO, since the only block with an M cannot also be used for an O. She cannot spell FARM since there is no block with a letter R. She cannot spell CODE since the C, D, and E all belong to the same block.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Blocks B", "background": "", "description": "In an effort to improve her vocabulary, Bessie the cow has obtained a set of four wooden blocks, each one a cube with a letter of the alphabet written on each of its six sides. She is learning how to spell by arranging the blocks in a row so the letters on top of the blocks spell words.\n\nGiven the letters on each of Bessie's four blocks, and a list of words she would like to spell, please determine which of words on her list she will be able to spell successfully using the blocks.", "inputFormat": "The first line of input contains $N$ $(1\\le N\\le 10)$, the number of words that Bessie would like to spell. The next four lines each contain a string with six uppercase letters, representing the letters on the six sides of one of Bessie's blocks. The next $N$ lines contain the $N$ words Bessie would like to spell. Each of these is between 1 and 4 uppercase letters long.", "outputFormat": "For each word on Bessie's list, output YES if she is able to spell it using the blocks and NO otherwise.", "hint": "【样例解释】\n\nIn this example, Bessie can spell COW, ZOO, and MOVE. Sadly, she cannot spell MOO, since the only block with an M cannot also be used for an O. She cannot spell FARM since there is no block with a letter R. She cannot spell CODE since the C, D, and E all belong to the same block.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Blocks B", "background": null, "description": "为了提高词汇量，母牛贝西得到了一套四块木块，其中每块都是一个立方体，六面各写着一个字母。她正在通过将木块排成一排使得木块顶部的字母拼出单词来学习拼写。\n\n给定 Bessie 的四个木块上的字母，以及她想拼写的单词列表，请确定列表中哪些单词可被她使用木块成功拼写。", "inputFormat": "输入的第一行包含 $N (1\\leq N\\leq 10)$，为 Bessie 想要拼写的单词数。接下来的四行每行包含一个带有六个大写字母的字符串，表示 Bessie 的一个块的六个侧面上的字母。接下来的 $N$ 行包含 Bessie 想要拼写的 $N$ 个单词。其中每一个的长度在 $1$ 到 $4$ 个大写字母之间。", "outputFormat": "对于 Bessie 列表中的每个单词，如果她能够使用木块拼写，则输出 YES，否则输出 NO。", "hint": "#### 样例解释\n\n在本例中，Bessie 可以拼写 COW、ZOO 和 MOVE。 不幸的是，她不能拼写 MOO，因为唯一带有 M 的木块也不能用于 O。她不能拼写 FARM，因为没有字母 R 的木块。她不能拼写 CODE，因为 C、D 和 E 都属于同一个木块。", "locale": "zh-CN"}}}
{"pid": "P8186", "type": "P", "difficulty": 4, "samples": [["4\n1 2 3 4\n1 3 2 4\n1 2 3 4\n1 2 3 4", "1\n3\n2\n4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "USACO", "2022", "图论建模", "二分图", "bitset", "Floyd 算法"], "title": "[USACO22FEB] Redistributing Gifts S", "background": "", "description": "Farmer John has $N$ gifts labeled $1\\cdots N$ for his $N$ cows, also labeled $1\\cdots N$ $(1\\le N\\le 500)$. Each cow has a wishlist, which is a permutation of all $N$ gifts such that the cow prefers gifts that appear earlier in the list over gifts that appear later in the list.\n\nFJ was lazy and just assigned gift $i$ to cow $i$ for all $i$. Now, the cows have gathered amongst themselves and decided to reassign the gifts such that after reassignment, every cow ends up with the same gift as she did originally, or a gift that she prefers over the one she was originally assigned.\n\nFor each $i$ from $1$ to $N$, compute the most preferred gift cow $i$ could hope to receive after reassignment.", "inputFormat": "The first line contains $N$. The next $N$ lines each contain the preference list of a cow. It is guaranteed that each line forms a permutation of $1\\cdots N$.", "outputFormat": "Please output $N$ lines, the $i$-th of which contains the most preferred gift cow $i$ could hope to receive after reassignment.", "hint": "【样例解释】\n\nIn this example, there are two possible reassignments:\n\n- The original assignment: cow 1 receives gift 1, cow 2 receives gift 2, cow 3 receives gift 3, and cow 4 receives gift 4.\n- Cow 1 receives gift 1, cow 2 receives gift 3, cow 3 receives gift 2, and cow 4 receives gift 4.\nObserve that both cows 1 and 4 cannot hope to receive better gifts than they were originally assigned. However, both cows 2 and 3 can.\n\n【数据范围】\n\n- Test cases 2-3 satisfy $N\\le 8$.\n\n- Test cases 4-11 satisfy no additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Redistributing Gifts S", "background": "", "description": "Farmer John has $N$ gifts labeled $1\\cdots N$ for his $N$ cows, also labeled $1\\cdots N$ $(1\\le N\\le 500)$. Each cow has a wishlist, which is a permutation of all $N$ gifts such that the cow prefers gifts that appear earlier in the list over gifts that appear later in the list.\n\nFJ was lazy and just assigned gift $i$ to cow $i$ for all $i$. Now, the cows have gathered amongst themselves and decided to reassign the gifts such that after reassignment, every cow ends up with the same gift as she did originally, or a gift that she prefers over the one she was originally assigned.\n\nFor each $i$ from $1$ to $N$, compute the most preferred gift cow $i$ could hope to receive after reassignment.", "inputFormat": "The first line contains $N$. The next $N$ lines each contain the preference list of a cow. It is guaranteed that each line forms a permutation of $1\\cdots N$.", "outputFormat": "Please output $N$ lines, the $i$-th of which contains the most preferred gift cow $i$ could hope to receive after reassignment.", "hint": "【样例解释】\n\nIn this example, there are two possible reassignments:\n\n- The original assignment: cow 1 receives gift 1, cow 2 receives gift 2, cow 3 receives gift 3, and cow 4 receives gift 4.\n- Cow 1 receives gift 1, cow 2 receives gift 3, cow 3 receives gift 2, and cow 4 receives gift 4.\nObserve that both cows 1 and 4 cannot hope to receive better gifts than they were originally assigned. However, both cows 2 and 3 can.\n\n【数据范围】\n\n- Test cases 2-3 satisfy $N\\le 8$.\n\n- Test cases 4-11 satisfy no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Redistributing Gifts S", "background": null, "description": "FJ 有 $N$ 个礼物给他的 $N$ 头奶牛，这 $N$ 个礼物和 $N$ 头奶牛都分别按顺序被标记为从 $1$ 到 $N$ 的整数。每头奶牛都有一个愿望单，记录着一个含有 $N$ 个礼物的排列。比起在愿望单中出现更晚的礼物，奶牛更喜欢先出现在愿望单中的礼物。\n\n因为 FJ 太懒了，他直接把 $i$ 号礼物分配给了 $i$ 号奶牛。现在，奶牛们聚在了一起，决定重新分配礼物，以便在重新分配后，每头奶牛都能得到跟原来一样，或是它更喜欢的礼物。\n\n对于每个 $i$（$1\\le i\\le N$），计算出重新分配后， $i$ 号奶牛可能拿到的最好的礼物（这个奶牛经过重新分配后能拿到的最喜欢的礼物）。", "inputFormat": "第一行输入 $N$。之后 $N$ 行每行包含一个奶牛的愿望单。保证这 $N$ 行都是从 $1$ 到 $N$ 的排列，即每一行都不按顺序不重不漏地包含 $1$ 到 $N$ 中的每个整数。", "outputFormat": "输出 $N$ 行，第 $i$ 行输出重新分配后 $i$ 号奶牛可能得到的最好礼物。", "hint": "**【样例解释】**\n\n在这个例子中，有两种可能的分配方案：\n- 最初的方案：一号奶牛得到一号礼物，二号奶牛得到二号礼物，三号奶牛得到三号礼物，四号奶牛得到四号礼物。\n- 重新分配后的方案：一号奶牛得到一号礼物，二号奶牛得到三号礼物，三号奶牛得到二号礼物，四号奶牛得到四号礼物。可以发现一号和四号奶牛都拿不到比 FJ 分配的更好的礼物，不过二号和三号都可以。\n\n**【数据范围】**\n\n$2 \\sim 3$ 号测试点满足 $N \\le 8$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P8187", "type": "P", "difficulty": 5, "samples": [["7\n5 10\n-2 0\n3 0\n4 0\n5 0\n0 10\n0 -10\n0 10", "0\n2\n0\n3\n0\n1\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["USACO", "2022", "折半搜索 meet in the middle"], "title": "[USACO22FEB]  Robot Instructions S", "background": "", "description": "Bessie is learning how to control a robot she has recently received as a gift.\nThe robot begins at point $(0,0)$ on the coordinate plane and Bessie wants the robot to end at point $(x_g,y_g)$. Bessie initially has a list of $N$ $(1\\le N\\le 40)$ instructions to give to the robot, the $i$-th of which will move the robot $x_i$ units right and $y_i$ units up (or left or down when $x_i$ and $y_i$ are negative, respectively).\n\nFor each $K$ from $1$ to $N$, help Bessie count the number of ways she can select $K$ instructions from the original $N$ such that after the $K$ instructions are executed, the robot will end at point $(x_g,y_g)$.\n\n**Note: the time and memory limits for this problem are 4s and 512MB, twice the defaults.**", "inputFormat": "The first line contains $N$. The next line contains $x_g$ and $y_g$, each in the range $−10^9\\cdots 10^9$. The final $N$ lines describe the instructions. Each line has two integers $x_i$ and $y_i$, also in the range $−10^9\\cdots 10^9$.\n\nIt is guaranteed that $(x_g,y_g)\\neq (0,0)$ and $(x_i,y_i)\\neq (0,0)$ for all $i$.", "outputFormat": "Print $N$ lines, the number of ways Bessie can select $K$ instructions from the original $N$ for each $K$ from $1$ to $N$.", "hint": "【样例解释】\n\nIn this example, there are six ways Bessie can select the instructions:\n```\n(-2,0) (3,0) (4,0) (0,10) (0,-10) (0,10) (1 2 3 5 6 7)\n(-2,0) (3,0) (4,0) (0,10) (1 2 3 5)\n(-2,0) (3,0) (4,0) (0,10) (1 2 3 7)\n(5,0) (0,10) (0,-10) (0,10) (4 5 6 7)\n(5,0) (0,10) (4 5)\n(5,0) (0,10) (4 7)\n```\nFor the first way, the robot's path looks as follows:\n```\n(0,0) -> (-2,0) -> (1,0) -> (5,0) -> (5,10) -> (5,0) -> (5,10)\n```\n\n【数据范围】\n\n- Test cases 2-4 satisfy $N\\le 20$.\n- Test cases 5-16 satisfy no additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB]  Robot Instructions S", "background": "", "description": "Bessie is learning how to control a robot she has recently received as a gift.\nThe robot begins at point $(0,0)$ on the coordinate plane and Bessie wants the robot to end at point $(x_g,y_g)$. Bessie initially has a list of $N$ $(1\\le N\\le 40)$ instructions to give to the robot, the $i$-th of which will move the robot $x_i$ units right and $y_i$ units up (or left or down when $x_i$ and $y_i$ are negative, respectively).\n\nFor each $K$ from $1$ to $N$, help Bessie count the number of ways she can select $K$ instructions from the original $N$ such that after the $K$ instructions are executed, the robot will end at point $(x_g,y_g)$.\n\n**Note: the time and memory limits for this problem are 4s and 512MB, twice the defaults.**", "inputFormat": "The first line contains $N$. The next line contains $x_g$ and $y_g$, each in the range $−10^9\\cdots 10^9$. The final $N$ lines describe the instructions. Each line has two integers $x_i$ and $y_i$, also in the range $−10^9\\cdots 10^9$.\n\nIt is guaranteed that $(x_g,y_g)\\neq (0,0)$ and $(x_i,y_i)\\neq (0,0)$ for all $i$.", "outputFormat": "Print $N$ lines, the number of ways Bessie can select $K$ instructions from the original $N$ for each $K$ from $1$ to $N$.", "hint": "【样例解释】\n\nIn this example, there are six ways Bessie can select the instructions:\n```\n(-2,0) (3,0) (4,0) (0,10) (0,-10) (0,10) (1 2 3 5 6 7)\n(-2,0) (3,0) (4,0) (0,10) (1 2 3 5)\n(-2,0) (3,0) (4,0) (0,10) (1 2 3 7)\n(5,0) (0,10) (0,-10) (0,10) (4 5 6 7)\n(5,0) (0,10) (4 5)\n(5,0) (0,10) (4 7)\n```\nFor the first way, the robot's path looks as follows:\n```\n(0,0) -> (-2,0) -> (1,0) -> (5,0) -> (5,10) -> (5,0) -> (5,10)\n```\n\n【数据范围】\n\n- Test cases 2-4 satisfy $N\\le 20$.\n- Test cases 5-16 satisfy no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB]  Robot Instructions S", "background": "", "description": "Bessie 正在学习如何控制她最近收到的一个机器人。机器人从坐标平面上的点 $(0,0)$ 开始，Bessie 希望机器人最终停在点 $(x_g,y_g)$。Bessie 最初有一个包含 $N$ 条指令的列表（$1 \\le N \\le 40$），第 $i$ 条指令会将机器人向右移动 $x_i$ 个单位，向上移动 $y_i$ 个单位（当 $x_i$ 和 $y_i$ 为负数时，分别向左和向下移动）。对于每一个从 $1$ 到 $N$ 的 $K$，帮助 Bessie 计算她可以从原始 $N$ 条指令中选择 $K$ 条指令的方式数，使得在执行完这 $K$ 条指令后，机器人将停在点 $(x_g,y_g)$。注意：本题的时间和内存限制为 4 秒和 512MB，是默认值的两倍。", "inputFormat": "第一行包含 $N$。下一行包含 $x_g$ 和 $y_g$，范围为 $-10^9 \\cdots 10^9$。接下来的 $N$ 行描述了指令。每行有两个整数 $x_i$ 和 $y_i$，范围也为 $-10^9 \\cdots 10^9$。保证 $(x_g,y_g) \neq (0,0)$ 且对所有 $i$，$(x_i,y_i) \neq (0,0)$。", "outputFormat": "输出 $N$ 行，对于每个从 $1$ 到 $N$ 的 $K$，Bessie 可以从原始 $N$ 条指令中选择 $K$ 条指令的方式数。", "hint": "【样例解释】在这个例子中，有六种方式 Bessie 可以选择指令：\n```\n(-2,0) (3,0) (4,0) (0,10) (0,-10) (0,10) (1 2 3 5 6 7)\n(-2,0) (3,0) (4,0) (0,10) (1 2 3 5)\n(-2,0) (3,0) (4,0) (0,10) (1 2 3 7)\n(5,0) (0,10) (0,-10) (0,10) (4 5 6 7)\n(5,0) (0,10) (4 5)\n(5,0) (0,10) (4 7)\n```\n对于第一种方式，机器人的路径如下：\n```\n(0,0) -> (-2,0) -> (1,0) -> (5,0) -> (5,10) -> (5,0) -> (5,10)\n```\n\n【数据范围】\n\n- 测试用例 2-4 满足 $N \\le 20$。\n- 测试用例 5-16 不满足额外的约束条件。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P8188", "type": "P", "difficulty": 4, "samples": [["6\n5 5 1\n1 2 3 4 5\n5 5 1\n1 2 3 5 4\n5 5 1\n1 2 4 5 3\n5 5 2\n1 2 4 5 3\n3 10 2\n1 3 2 1 3 2 1 3 2 1\n3 10 1\n1 3 2 1 3 2 1 3 2 1", "YES\nYES\nNO\nYES\nYES\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "贪心", "线性数据结构", "USACO", "2022"], "title": "[USACO22FEB] Email Filing S", "background": "", "description": "Farmer John has fallen behind on organizing his inbox. The way his screen is organized, there is a vertical list of folders on the left side of the screen and a vertical list of emails on the right side of the screen. There are $M$ total folders, numbered $1 \\ldots M$ $(1 \\le M \\le 10^4)$. His inbox currently contains $N$ emails numbered $1\\ldots N$ $(1 \\le N \\le 10^5)$; the $i$th email needs to be filed into folder $f_i$ $(1\\le f_i\\le M)$. \n\nFJ's screen is rather small, so he can only view $K$ $(1\\le K\\le \\min(N,M))$ folders and $K$ emails at once.  Initially, his screen starts out displaying folders\n$1 \\ldots K$ on the left and emails $1 \\ldots K$ on the right. To access other folders and emails, he needs to scroll through these respective lists. For example, if he scrolls down one position in the list of folders, his screen will display folders $2 \\ldots K+1$, and then scrolling down one position further it will display folders $3 \\ldots K+2$.  When FJ drags an email into a folder, the email disappears from the email list, and the emails after the one that disappeared shift up by one position.  For example, if emails $1, 2, 3, 4, 5$ are currently displayed and FJ drags email 3 into its appropriate folder, the email list will now show emails $1, 2, 4, 5, 6$. FJ can only drag an email into the folder to which it needs to be filled.\n\nUnfortunately, the scroll wheel on FJ's mouse is broken, and he can only scroll downwards, not upwards.  The only way he can achieve some semblance of upward scrolling is if he is viewing the last set of $K$ emails in his email list, and\nhe files one of these.  In this case, the email list will again show the last $K$ emails that haven't yet been filed, effectively scrolling the top email up by one. If there are fewer than $K$ emails remaining, then all of them will be\ndisplayed. \n\nPlease help FJ determine if it is possible to file all of his emails.", "inputFormat": "The first line of input contains $T$ $(1≤T≤10)$, the number of subcases in this input, all of which must be solved correctly to solve the input case. The $T$ subcases then follow. For each subcase, the first line of input contains $M,N$ and $K$. The next line contains $f_1\\cdots f_N$.\n\nIt is guaranteed that the sum of $M$ over all subcases does not exceed $10^4$, and that the sum of $N$ over all subcases does not exceed $10^5$.", "outputFormat": "Output $T$ lines, each one either containing either YES or NO, specifying whether FJ can successfully file all his emails in each of the $T$ subcases.", "hint": "【数据范围】\n\n- In inputs 2-10, the sum of $M$ over all subcases does not exceed $10^3$.\n- In inputs 11-12, no additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Email Filing S", "background": "", "description": "Farmer John has fallen behind on organizing his inbox. The way his screen is organized, there is a vertical list of folders on the left side of the screen and a vertical list of emails on the right side of the screen. There are $M$ total folders, numbered $1 \\ldots M$ $(1 \\le M \\le 10^4)$. His inbox currently contains $N$ emails numbered $1\\ldots N$ $(1 \\le N \\le 10^5)$; the $i$th email needs to be filed into folder $f_i$ $(1\\le f_i\\le M)$. \n\nFJ's screen is rather small, so he can only view $K$ $(1\\le K\\le \\min(N,M))$ folders and $K$ emails at once.  Initially, his screen starts out displaying folders\n$1 \\ldots K$ on the left and emails $1 \\ldots K$ on the right. To access other folders and emails, he needs to scroll through these respective lists. For example, if he scrolls down one position in the list of folders, his screen will display folders $2 \\ldots K+1$, and then scrolling down one position further it will display folders $3 \\ldots K+2$.  When FJ drags an email into a folder, the email disappears from the email list, and the emails after the one that disappeared shift up by one position.  For example, if emails $1, 2, 3, 4, 5$ are currently displayed and FJ drags email 3 into its appropriate folder, the email list will now show emails $1, 2, 4, 5, 6$. FJ can only drag an email into the folder to which it needs to be filled.\n\nUnfortunately, the scroll wheel on FJ's mouse is broken, and he can only scroll downwards, not upwards.  The only way he can achieve some semblance of upward scrolling is if he is viewing the last set of $K$ emails in his email list, and\nhe files one of these.  In this case, the email list will again show the last $K$ emails that haven't yet been filed, effectively scrolling the top email up by one. If there are fewer than $K$ emails remaining, then all of them will be\ndisplayed. \n\nPlease help FJ determine if it is possible to file all of his emails.", "inputFormat": "The first line of input contains $T$ $(1≤T≤10)$, the number of subcases in this input, all of which must be solved correctly to solve the input case. The $T$ subcases then follow. For each subcase, the first line of input contains $M,N$ and $K$. The next line contains $f_1\\cdots f_N$.\n\nIt is guaranteed that the sum of $M$ over all subcases does not exceed $10^4$, and that the sum of $N$ over all subcases does not exceed $10^5$.", "outputFormat": "Output $T$ lines, each one either containing either YES or NO, specifying whether FJ can successfully file all his emails in each of the $T$ subcases.", "hint": "【数据范围】\n\n- In inputs 2-10, the sum of $M$ over all subcases does not exceed $10^3$.\n- In inputs 11-12, no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Email Filing S", "background": "", "description": "Farmer John 在整理他的收件箱时落后了。他的屏幕布局如下：屏幕左侧是文件夹的垂直列表，右侧是邮件的垂直列表。总共有 $M$ 个文件夹，编号为 $1 \\ldots M$（$1 \\leq M \\leq 10^4$）。他的收件箱目前包含 $N$ 封邮件，编号为 $1 \\ldots N$（$1 \\leq N \\leq 10^5$）；第 $i$ 封邮件需要归档到文件夹 $f_i$（$1 \\leq f_i \\leq M$）。\n\nFJ 的屏幕很小，因此他一次只能查看 $K$ 个文件夹和 $K$ 封邮件（$1 \\leq K \\leq \\min(N, M)$）。初始时，他的屏幕显示左侧的文件夹 $1 \\ldots K$ 和右侧的邮件 $1 \\ldots K$。为了访问其他文件夹和邮件，他需要滚动这些列表。例如，如果他在文件夹列表中向下滚动一个位置，屏幕将显示文件夹 $2 \\ldots K+1$，再向下滚动一个位置则显示文件夹 $3 \\ldots K+2$。当 FJ 将一封邮件拖入文件夹时，该邮件会从邮件列表中消失，其后的邮件会向前移动一个位置。例如，如果当前显示的邮件是 $1, 2, 3, 4, 5$，而 FJ 将邮件 $3$ 拖入其对应的文件夹，邮件列表将显示 $1, 2, 4, 5, 6$。FJ 只能将邮件拖入其需要归档的文件夹。\n\n不幸的是，FJ 的鼠标滚轮坏了，他只能向下滚动，不能向上滚动。唯一能实现类似向上滚动的效果是，当他查看邮件列表的最后 $K$ 封邮件时，如果他归档了其中一封邮件，邮件列表将再次显示尚未归档的最后 $K$ 封邮件，从而将最上面的邮件向上滚动一个位置。如果剩余的邮件少于 $K$ 封，则显示所有剩余的邮件。\n\n请帮助 FJ 判断是否能够归档所有邮件。", "inputFormat": "输入的第一行包含 $T$（$1 \\leq T \\leq 10$），表示输入中的子用例数量，所有子用例都必须正确解决才能解决整个输入用例。接下来的 $T$ 行是每个子用例的输入。对于每个子用例，第一行包含 $M$、$N$ 和 $K$。第二行包含 $f_1 \\cdots f_N$。\n\n保证所有子用例的 $M$ 之和不超过 $10^4$，所有子用例的 $N$ 之和不超过 $10^5$。", "outputFormat": "输出 $T$ 行，每行包含 `YES` 或 `NO`，表示 FJ 是否能够成功归档所有邮件。", "hint": "- 在输入 2-10 中，所有子用例的 $M$ 之和不超过 $10^3$。\n- 在输入 11-12 中，没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8189", "type": "P", "difficulty": 6, "samples": [["4\n1 2 3 4\n1 3 2 4\n1 2 3 4\n1 2 3 4\n5\nHHHH\nHHGG\nGHGH\nHGGG\nGHHG", "2\n1\n1\n2\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "组合数学", "状压 DP"], "title": "[USACO22FEB] Redistributing Gifts G", "background": "", "description": "Farmer John has $N$ gifts labeled $1…N$ for his $N$ cows, also labeled $1…N$ $(1≤N≤18)$. Each cow has a wishlist, which is a permutation of all $N$ gifts such that the cow prefers gifts that appear earlier in the list over gifts that appear later in the list.\n\nFJ was lazy and just assigned gift $i$ to cow $i$ for all $i$. Now, the cows have gathered amongst themselves and decided to reassign the gifts such that after reassignment, every cow ends up with the same gift as she did originally, or a gift that she prefers over the one she was originally assigned.\n\nThere is also an additional constraint: a gift may only be reassigned to a cow if it was originally assigned to a cow of the same type (each cow is either a Holstein or a Guernsey). Given $Q$ $(1≤Q≤min(10^5,2^N))$ length-$N$ breed strings, for each one count the number of reassignments that are consistent with it.", "inputFormat": "The first line contains $N$.\nThe next $N$ lines each contain the preference list of a cow. It is guaranteed that each line forms a permutation of $1…N$.\n\nThe next line contains $Q$.\n\nThe final $Q$ lines each contain a breed string, each $N$ characters long and consisting only of the characters G and H. No breed string occurs more than once.", "outputFormat": "For each breed string, print the number of reassignments that are consistent with it on a new line.", "hint": "【样例解释】\n\nIn this example, for the first breed string, there are two possible reassignments:\n\n- The original assignment: cow $1$ receives gift $1$, cow $2$ receives gift $2$, cow $3$ receives gift $3$, and cow $4$ receives gift $4$.\n- Cow $1$ receives gift $1$, cow $2$ receives gift $3$, cow $3$ receives gift\n$2$, and cow $4$ receives gift $4$.\n\n【数据范围】\n\n- For $T=2,\\cdots ,13$, test case T satisfies $N=T+4$.\n- Test cases 14-18 satisfy $N=18$.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Redistributing Gifts G", "background": "", "description": "Farmer John has $N$ gifts labeled $1…N$ for his $N$ cows, also labeled $1…N$ $(1≤N≤18)$. Each cow has a wishlist, which is a permutation of all $N$ gifts such that the cow prefers gifts that appear earlier in the list over gifts that appear later in the list.\n\nFJ was lazy and just assigned gift $i$ to cow $i$ for all $i$. Now, the cows have gathered amongst themselves and decided to reassign the gifts such that after reassignment, every cow ends up with the same gift as she did originally, or a gift that she prefers over the one she was originally assigned.\n\nThere is also an additional constraint: a gift may only be reassigned to a cow if it was originally assigned to a cow of the same type (each cow is either a Holstein or a Guernsey). Given $Q$ $(1≤Q≤min(10^5,2^N))$ length-$N$ breed strings, for each one count the number of reassignments that are consistent with it.", "inputFormat": "The first line contains $N$.\nThe next $N$ lines each contain the preference list of a cow. It is guaranteed that each line forms a permutation of $1…N$.\n\nThe next line contains $Q$.\n\nThe final $Q$ lines each contain a breed string, each $N$ characters long and consisting only of the characters G and H. No breed string occurs more than once.", "outputFormat": "For each breed string, print the number of reassignments that are consistent with it on a new line.", "hint": "【样例解释】\n\nIn this example, for the first breed string, there are two possible reassignments:\n\n- The original assignment: cow $1$ receives gift $1$, cow $2$ receives gift $2$, cow $3$ receives gift $3$, and cow $4$ receives gift $4$.\n- Cow $1$ receives gift $1$, cow $2$ receives gift $3$, cow $3$ receives gift\n$2$, and cow $4$ receives gift $4$.\n\n【数据范围】\n\n- For $T=2,\\cdots ,13$, test case T satisfies $N=T+4$.\n- Test cases 14-18 satisfy $N=18$.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Redistributing Gifts G", "background": "", "description": "Farmer John 有 $N$ 个礼物，编号为 $1 \\ldots N$，准备分给他的 $N$ 头奶牛，奶牛也编号为 $1 \\ldots N$（$1 \\leq N \\leq 18$）。每头奶牛有一个愿望清单，清单是 $N$ 个礼物的一个排列，奶牛更喜欢清单中靠前的礼物。\n\nFJ 很懒，直接将礼物 $i$ 分配给了奶牛 $i$。现在，奶牛们聚集在一起，决定重新分配礼物，使得重新分配后，每头奶牛最终得到的礼物要么与原来相同，要么是她更喜欢的礼物。\n\n还有一个额外的限制：一个礼物只能重新分配给与它原主人同类型的奶牛（每头奶牛要么是荷斯坦牛，要么是根西牛）。给定 $Q$（$1 \\leq Q \\leq \\min(10^5, 2^N)$）个长度为 $N$ 的品种字符串，对于每个字符串，计算符合该字符串的重新分配方案的数量。", "inputFormat": "第一行包含 $N$。  \n接下来的 $N$ 行，每行包含一头奶牛的愿望清单。保证每行是 $1 \\ldots N$ 的一个排列。  \n接下来一行包含 $Q$。  \n最后的 $Q$ 行，每行包含一个品种字符串，长度为 $N$，仅由字符 `G` 和 `H` 组成。每个品种字符串只出现一次。", "outputFormat": "对于每个品种字符串，输出一行，表示符合该字符串的重新分配方案的数量。\n\n### 样例解释\n\n在这个例子中，对于第一个品种字符串，有两种可能的重新分配方案：\n\n1. 原始分配：奶牛 $1$ 得到礼物 $1$，奶牛 $2$ 得到礼物 $2$，奶牛 $3$ 得到礼物 $3$，奶牛 $4$ 得到礼物 $4$。\n2. 奶牛 $1$ 得到礼物 $1$，奶牛 $2$ 得到礼物 $3$，奶牛 $3$ 得到礼物 $2$，奶牛 $4$ 得到礼物 $4$。", "hint": "- 对于 $T = 2, \\cdots ,13$，测试用例 $T$ 满足 $N = T + 4$。\n- 测试用例 14-18 满足 $N = 18$。", "locale": "zh-CN"}}}
{"pid": "P8190", "type": "P", "difficulty": 5, "samples": [["2 3", "1.875"], ["4 2", "2.8750000000000000000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022", "Special Judge", "期望", "矩阵乘法"], "title": "[USACO22FEB] Cow Camp G", "background": "", "description": "To qualify for cow camp, Bessie needs to earn a good score on the last problem of the USACOW Open contest. This problem has $T$ distinct test cases $(2≤T≤10^3)$ weighted equally, with the first test case being the sample case. Her final score will equal the number of test cases that her last submission passes.\nUnfortunately, Bessie is way too tired to think about the problem, but since the answer to each test case is either \"yes\" or \"no,\" she has a plan! Precisely, she decides to repeatedly submit the following nondeterministic solution:\n```\nif input == sample_input:\n  print sample_output\nelse:\n  print \"yes\" or \"no\" each with probability 1/2, independently for each test case\n```\nNote that for all test cases besides the sample, this program may produce a different output when resubmitted, so the number of test cases that it passes will vary.\n\nBessie knows that she cannot submit more than $K$ $(1≤K≤10^9)$ times in total because then she will certainly be disqualified. What is the maximum possible expected value of Bessie's final score, assuming that she follows the optimal strategy?", "inputFormat": "The only line of input contains two space-separated integers $T$ and $K$.", "outputFormat": "The answer as a decimal that differs by at most $10^{−6}$ absolute or relative error from the actual answer.", "hint": "【样例解释 1】\n\nIn this example, Bessie should keep resubmitting until she has reached 3 submissions or she receives full credit. Bessie will receive full credit with probability $\\frac 78$ and half credit with probability $\\frac 18$, so the expected value of Bessie's final score under this strategy is $\\frac 78\\cdot 2+\\frac 18\\cdot 1=\\frac {15}{8}=1.875$. As we see from this formula, the expected value of Bessie's score can be calculated by taking the sum over $x$ of $p(x)\\cdot x$, where $p(x)$ is the probability of receiving a score of $x$.\n\n【样例解释 2】\n\nHere, Bessie should only submit twice if she passes fewer than 3 test cases on her first try.\n\n【数据范围】\n\n- Test cases 3-6 satisfy $T≤25$ and $K≤100$.\n- Test cases 7-9 satisfy $K≤10^6$.\n- Test cases 10-17 satisfy no additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Cow Camp G", "background": "", "description": "To qualify for cow camp, Bessie needs to earn a good score on the last problem of the USACOW Open contest. This problem has $T$ distinct test cases $(2≤T≤10^3)$ weighted equally, with the first test case being the sample case. Her final score will equal the number of test cases that her last submission passes.\nUnfortunately, Bessie is way too tired to think about the problem, but since the answer to each test case is either \"yes\" or \"no,\" she has a plan! Precisely, she decides to repeatedly submit the following nondeterministic solution:\n```\nif input == sample_input:\n  print sample_output\nelse:\n  print \"yes\" or \"no\" each with probability 1/2, independently for each test case\n```\nNote that for all test cases besides the sample, this program may produce a different output when resubmitted, so the number of test cases that it passes will vary.\n\nBessie knows that she cannot submit more than $K$ $(1≤K≤10^9)$ times in total because then she will certainly be disqualified. What is the maximum possible expected value of Bessie's final score, assuming that she follows the optimal strategy?", "inputFormat": "The only line of input contains two space-separated integers $T$ and $K$.", "outputFormat": "The answer as a decimal that differs by at most $10^{−6}$ absolute or relative error from the actual answer.", "hint": "【样例解释 1】\n\nIn this example, Bessie should keep resubmitting until she has reached 3 submissions or she receives full credit. Bessie will receive full credit with probability $\\frac 78$ and half credit with probability $\\frac 18$, so the expected value of Bessie's final score under this strategy is $\\frac 78\\cdot 2+\\frac 18\\cdot 1=\\frac {15}{8}=1.875$. As we see from this formula, the expected value of Bessie's score can be calculated by taking the sum over $x$ of $p(x)\\cdot x$, where $p(x)$ is the probability of receiving a score of $x$.\n\n【样例解释 2】\n\nHere, Bessie should only submit twice if she passes fewer than 3 test cases on her first try.\n\n【数据范围】\n\n- Test cases 3-6 satisfy $T≤25$ and $K≤100$.\n- Test cases 7-9 satisfy $K≤10^6$.\n- Test cases 10-17 satisfy no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Cow Camp G", "background": "", "description": "为了获得参加奶牛训练营的资格，Bessie 需要在 USACOW 公开赛的最后一题中取得好成绩。这道题有 $T$ 个独立的测试用例（$2 \\leq T \\leq 10^3$），权重相同，其中第一个测试用例是样例。她的最终得分将等于她最后一次提交通过的测试用例数量。\n\n不幸的是，Bessie 太累了，无法思考这个问题，但由于每个测试用例的答案要么是“yes”，要么是“no”，她想到了一个计划！具体来说，她决定反复提交以下非确定性解决方案：\n\n```\nif input == sample_input:\n    print sample_output\nelse:\n    print \"yes\" or \"no\" each with probability 1/2, independently for each test case\n```\n\n注意，对于除样例之外的所有测试用例，这个程序在重新提交时可能会产生不同的输出，因此它通过的测试用例数量会有所不同。\n\nBessie 知道她总共不能提交超过 $K$ 次（$1 \\leq K \\leq 10^9$），否则她肯定会被取消资格。假设 Bessie 遵循最优策略，她的最终得分的最大可能期望值是多少？", "inputFormat": "输入只有一行，包含两个用空格分隔的整数 $T$ 和 $K$。", "outputFormat": "输出一个十进制数，表示答案，与实际答案的绝对误差或相对误差不超过 $10^{-6}$。\n\n### 样例解释 1\n\n在这个例子中，Bessie 应该继续重新提交，直到她提交了 3 次或获得了满分。Bessie 获得满分的概率是 $\\frac{7}{8}$，获得一半分数的概率是 $\\frac{1}{8}$，因此在这种策略下，Bessie 的最终得分的期望值是 $\\frac{7}{8} \\cdot 2 + \\frac{1}{8} \\cdot 1 = \\frac{15}{8} = 1.875$。从这个公式可以看出，Bessie 得分的期望值可以通过对所有可能的得分 $x$ 求和 $p(x) \\cdot x$ 来计算，其中 $p(x)$ 是获得得分 $x$ 的概率。\n\n### 样例解释 2\n\n在这里，Bessie 应该只在第一次尝试通过少于 3 个测试用例时才提交第二次。", "hint": "- 测试用例 3-6 满足 $T \\leq 25$ 且 $K \\leq 100$。\n- 测试用例 7-9 满足 $K \\leq 10^6$。\n- 测试用例 10-17 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8191", "type": "P", "difficulty": 4, "samples": [["10\n83 10\n77 2\n93 4\n86 6\n49 1\n62 7\n90 3\n63 4\n40 10\n72 0", "660"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2022", "生成树"], "title": "[USACO22FEB] Moo Network G", "background": "", "description": "Farmer John's $N$ cows $(1≤N≤10^5)$ are spread far apart on his farm and would like to build a communication network so they can more easily exchange electronic text messages (all of which of course contain variations of \"moo\").\n\nThe ith cow is located at a distinct location $(x_i,y_i)$ where $0≤x_i≤10^6$ and $0≤y_i≤10$. The cost of building a communication link between cows $i$ and $j$ is the squared distance between them: $(x_i-x_j)^2+(y_i-y_j)^2$.\n\nPlease calculate the minimum cost required to build a communication network across which all the cows can communicate. Two cows can communicate if they are directly connected by a link, or if there is a sequence of links along which their message can travel.\n\n**Note: the time limit for this problem is 4s, twice the default.**", "inputFormat": "The first line of input contains $N$, and the next $N$ lines each describe the $x$ and $y$ coordinates of a cow, all integers.", "outputFormat": "Please output the minimum cost of a network that will allow all cows to communicate. Note that this cost might be too large to fit into a 32-bit integer and may require use of 64-bit integers (e.g., \"long long\" integers in C++).", "hint": "【数据范围】\n\n- Test cases 2-3 satisfy $N≤1000$.\n- Test cases 4-15 satisfy no additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO22FEB] Moo Network G", "background": "", "description": "Farmer John's $N$ cows $(1≤N≤10^5)$ are spread far apart on his farm and would like to build a communication network so they can more easily exchange electronic text messages (all of which of course contain variations of \"moo\").\n\nThe ith cow is located at a distinct location $(x_i,y_i)$ where $0≤x_i≤10^6$ and $0≤y_i≤10$. The cost of building a communication link between cows $i$ and $j$ is the squared distance between them: $(x_i-x_j)^2+(y_i-y_j)^2$.\n\nPlease calculate the minimum cost required to build a communication network across which all the cows can communicate. Two cows can communicate if they are directly connected by a link, or if there is a sequence of links along which their message can travel.\n\n**Note: the time limit for this problem is 4s, twice the default.**", "inputFormat": "The first line of input contains $N$, and the next $N$ lines each describe the $x$ and $y$ coordinates of a cow, all integers.", "outputFormat": "Please output the minimum cost of a network that will allow all cows to communicate. Note that this cost might be too large to fit into a 32-bit integer and may require use of 64-bit integers (e.g., \"long long\" integers in C++).", "hint": "【数据范围】\n\n- Test cases 2-3 satisfy $N≤1000$.\n- Test cases 4-15 satisfy no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO22FEB] Moo Network G", "background": "", "description": "农夫约翰有 $N$ 头牛（$1\\le N\\le10^5$） 它们在农场里分布的极其的远，因此希望你建立一个通讯网络，便于它们更容易地交换电子短信（当然，这些短信都包含 `moo` 的变形体，即数字）\n\n第 $i$ 头牛位于位置 $(x_i，y_i)$ 其中 $0\\le x\\le 10^6$, $0\\le y\\le 10$. 在牛 $i$ 与牛 $j$ 之间建立通信链路的成本是它们之间的欧几里德距离的平方，即 $(x_i-x_j)^2+(y_i-y_j)^2$\n\n\n请聪明的你构建一个所有奶牛都能交流的最低成本的通信网络。如果两头奶牛通过一条链接直接连接或者它们的信息可以沿着一条链接传播，那么认为他们可以通信。\n\n#### 注意 此问题时间限制为4秒", "inputFormat": "第一行输入为 $N$，接下来 $N$ 行分别描述奶牛的位置 $(x,y)$ 均为整数", "outputFormat": "请输出允许所有奶牛通信的网络的最低成本。请注意，此开销可能太大，无法放入 32 位整数中，并且可能需要使用 64 位整数（例如，C++中的“long long”）。", "hint": "测试点 2~3 满足 $N\\le1000$。\n\n测试点 4~15 没有特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8192", "type": "P", "difficulty": 7, "samples": [["2 1\n1 1 3 3\n2 2 4 4 ", "4"], ["5 2\n1 5 3 6\n5 4 7 9\n4 1 8 3\n9 8 10 10\n2 2 6 7", "4 5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "USACO", "2022", "平面图欧拉公式", "扫描线"], "title": "[USACO22FEB]  Paint by Rectangles P", "background": "翻译来自 @wlzhouzhuan。", "description": "在她之前的作品受到好评后，Bessie 得到了一份设计绘画套装的工作。她通过在平面中选择 $N\\ (1\\le N\\le 10^5)$ 个平行于坐标轴的矩形来设计该画作，没有两条边是共线的。这些矩形的边界定义了绘画着色区域的边界。\n\n作为一名先锋艺术家，Bessie 觉得这幅画应该像一头荷斯坦奶牛。更具体地，由矩形构成的每个区域都被着色为黑色或白色，没有两个相邻区域具有相同的颜色，并且所有矩形之外的区域都被着色为白色。\n\n选完矩形后，Bessie 想根据参数 $T$ 让你输出：\n\n- 若 $T=1$，则输出区域总数；\n- 若 $T=2$，则依次输出白色区域数量和黑色区域数量。\n\n**注意：本题的时间限制为 4s，是默认的 2 倍。**", "inputFormat": "第一行，输入 $N$ 和 $T$。\n\n接下来 $N$ 行，每行读入 $x_1,y_1,x_2,y_2$，表示一个左下角为 $(x_1,y_1)$，右上角为 $(x_2,y_2)$ 的矩形。\n\n数据保证 $x_i$ 形成了一个 $1\\sim 2N$ 的排列，$y_i$ 同理。", "outputFormat": "若 $T=1$，输出一个整数；否则输出两个整数，用空格隔开。", "hint": "**【样例解释 #1】**\n\n有 $2$ 个白色区域和 $2$ 个黑色区域，共有 $4$ 个区域。所有矩形的边界连通，因此该输入满足 subtask 3。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v34kpbhi.png)\n\n**【样例解释 #2】**\n\n右上方的矩形不与其余的矩形连通，因此该输入不满足 subtask 4。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/boqnrha0.png)\n\n**【数据范围】**\n\n- subtask 1：数据 $3\\sim 4$ 满足 $N\\le 10^3$；\n- subtask 2：数据 $5\\sim 7$ 满足不存在两个矩形相交；\n- subtask 3：数据 $8\\sim 10$ 满足 $T=1$，且所有矩形的边界连通；\n- subtask 4：数据 $11\\sim 13$ 满足 $T=2$，且所有矩形的边界连通；\n- subtask 5：数据 $14\\sim 18$ 满足 $T=1$；\n- subtask 6：数据 $19\\sim 23$ 满足 $T=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22FEB]  Paint by Rectangles P", "background": "翻译来自 @wlzhouzhuan。", "description": "在她之前的作品受到好评后，Bessie 得到了一份设计绘画套装的工作。她通过在平面中选择 $N\\ (1\\le N\\le 10^5)$ 个平行于坐标轴的矩形来设计该画作，没有两条边是共线的。这些矩形的边界定义了绘画着色区域的边界。\n\n作为一名先锋艺术家，Bessie 觉得这幅画应该像一头荷斯坦奶牛。更具体地，由矩形构成的每个区域都被着色为黑色或白色，没有两个相邻区域具有相同的颜色，并且所有矩形之外的区域都被着色为白色。\n\n选完矩形后，Bessie 想根据参数 $T$ 让你输出：\n\n- 若 $T=1$，则输出区域总数；\n- 若 $T=2$，则依次输出白色区域数量和黑色区域数量。\n\n**注意：本题的时间限制为 4s，是默认的 2 倍。**", "inputFormat": "第一行，输入 $N$ 和 $T$。\n\n接下来 $N$ 行，每行读入 $x_1,y_1,x_2,y_2$，表示一个左下角为 $(x_1,y_1)$，右上角为 $(x_2,y_2)$ 的矩形。\n\n数据保证 $x_i$ 形成了一个 $1\\sim 2N$ 的排列，$y_i$ 同理。", "outputFormat": "若 $T=1$，输出一个整数；否则输出两个整数，用空格隔开。", "hint": "**【样例解释 #1】**\n\n有 $2$ 个白色区域和 $2$ 个黑色区域，共有 $4$ 个区域。所有矩形的边界连通，因此该输入满足 subtask 3。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v34kpbhi.png)\n\n**【样例解释 #2】**\n\n右上方的矩形不与其余的矩形连通，因此该输入不满足 subtask 4。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/boqnrha0.png)\n\n**【数据范围】**\n\n- subtask 1：数据 $3\\sim 4$ 满足 $N\\le 10^3$；\n- subtask 2：数据 $5\\sim 7$ 满足不存在两个矩形相交；\n- subtask 3：数据 $8\\sim 10$ 满足 $T=1$，且所有矩形的边界连通；\n- subtask 4：数据 $11\\sim 13$ 满足 $T=2$，且所有矩形的边界连通；\n- subtask 5：数据 $14\\sim 18$ 满足 $T=1$；\n- subtask 6：数据 $19\\sim 23$ 满足 $T=2$。", "locale": "zh-CN"}}}
{"pid": "P8193", "type": "P", "difficulty": 6, "samples": [["6\n1 2 3 1 1 4\n7\n1\n2\n3\n4\n5\n6\n12", "6\n6\n4\n5\n-1\n4\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2022", "数论", "素数判断,质数,筛法", "前缀和"], "title": "[USACO22FEB] Sleeping in Class P", "background": null, "description": "最近终于线下授课了，奶牛 Bessie 十分兴奋！不幸的是，Farmer John 是一个非常无聊的讲师，因此她经常课堂上睡觉。\n\nFarmer John 注意到了 Bessie 上课走神。他要求班上的另一个学生 Elsie 跟踪记录给定课上 Bessie 睡觉的次数。一共有 $N$ 堂课，Elsie 记录下了 Bessie 在第 $i$ 堂课睡了 $a_i$ 次。所有课上 Bessie 一共睡觉的次数最多为 $10^{18}$。\n\nElsie 认为自己是 Bessie 的竞争对手，所以她想让 FJ 觉得在每堂课上 Bessie 都一直睡了同样多次——让 FJ 觉得这个问题显然完全是 Bessie 的错，而不是 FJ 有时上课很无聊的问题。\n\nElsie 修改记录只有以下两种方式：把相邻的两堂课的记录合起来，或者把一堂课的记录分成两堂课。例如，如果 $a=[1,2,3,4,5]$，那么如果 Elsie 将第二堂和第三堂课的记录合起来，记录就会变为 $[1,5,4,5]$。如果 Elsie 继续选择让第三堂课的记录分为两堂，记录就可能变为 $[1,5,0,4,5],[1,5,1,3,5],[1,5,2,2,5],[1,5,3,1,5]$ 或 $[1,5,4,0,5]$。\n\n给定 $Q$ 个候选的 Bessie 最不喜欢的数字 $q_1,\\ldots,q_Q$，对于每个数字，请帮助 Elsie 计算她至少要操作多少次，才能让记录里的所有数字都变成这个数字。", "inputFormat": "第一行一个整数 $N$（$1\\le N\\le 10^5$）。\n\n第二行 $N$ 个整数 $a_1,a_2,\\ldots, a_N$（$1\\le a_i\\le 10^{18}$）。\n\n第三行一个整数 $Q$（$1\\le Q\\le 10^5$）。\n\n接下来 $Q$ 行，每行一个整数 $q_i$（$1\\le q_i\\le 10^{18}$），表示 Bessie 最不喜欢的数字。", "outputFormat": "对于每个 $q_i$，计算 Elsie 把记录里的每个数都变成 $q_i$ 所需要的最小操作次数。如果不能把所有数都变成 $q_i$，输出 $-1$。", "hint": "**【样例解释】**\n\nElsie 需要至少 $4$ 次修改才能让记录里的所有数都变成 $3$。\n\n$$\n\\begin{aligned}\n&\\ 1\\ 2\\ 3\\ 1\\ 1\\ 4\\\\\n\\rightarrow&\\ 3\\ 3\\ 1\\ 1\\ 4\\\\\n\\rightarrow&\\ 3\\ 3\\ 1\\ 5\\\\\n\\rightarrow&\\ 3\\ 3\\ 6\\\\\n\\rightarrow&\\ 3\\ 3\\ 3\\ 3\\\\\n\\end{aligned}\n$$\n\nElsie 不可能把记录中的所有数都变成 $5$，因此输出 $-1$。这是正确的。\n\n**【数据范围】**\n\n- 对于第 $2\\sim 4$ 组数据，$N,Q\\le 5000$。\n- 对于第 $5\\sim 7$ 组数据，所有 $a_i$ 最多为 $10^9$。\n- 对于第 $8\\sim 26$ 组数据，无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22FEB] Sleeping in Class P", "background": null, "description": "最近终于线下授课了，奶牛 Bessie 十分兴奋！不幸的是，Farmer John 是一个非常无聊的讲师，因此她经常课堂上睡觉。\n\nFarmer John 注意到了 Bessie 上课走神。他要求班上的另一个学生 Elsie 跟踪记录给定课上 Bessie 睡觉的次数。一共有 $N$ 堂课，Elsie 记录下了 Bessie 在第 $i$ 堂课睡了 $a_i$ 次。所有课上 Bessie 一共睡觉的次数最多为 $10^{18}$。\n\nElsie 认为自己是 Bessie 的竞争对手，所以她想让 FJ 觉得在每堂课上 Bessie 都一直睡了同样多次——让 FJ 觉得这个问题显然完全是 Bessie 的错，而不是 FJ 有时上课很无聊的问题。\n\nElsie 修改记录只有以下两种方式：把相邻的两堂课的记录合起来，或者把一堂课的记录分成两堂课。例如，如果 $a=[1,2,3,4,5]$，那么如果 Elsie 将第二堂和第三堂课的记录合起来，记录就会变为 $[1,5,4,5]$。如果 Elsie 继续选择让第三堂课的记录分为两堂，记录就可能变为 $[1,5,0,4,5],[1,5,1,3,5],[1,5,2,2,5],[1,5,3,1,5]$ 或 $[1,5,4,0,5]$。\n\n给定 $Q$ 个候选的 Bessie 最不喜欢的数字 $q_1,\\ldots,q_Q$，对于每个数字，请帮助 Elsie 计算她至少要操作多少次，才能让记录里的所有数字都变成这个数字。", "inputFormat": "第一行一个整数 $N$（$1\\le N\\le 10^5$）。\n\n第二行 $N$ 个整数 $a_1,a_2,\\ldots, a_N$（$1\\le a_i\\le 10^{18}$）。\n\n第三行一个整数 $Q$（$1\\le Q\\le 10^5$）。\n\n接下来 $Q$ 行，每行一个整数 $q_i$（$1\\le q_i\\le 10^{18}$），表示 Bessie 最不喜欢的数字。", "outputFormat": "对于每个 $q_i$，计算 Elsie 把记录里的每个数都变成 $q_i$ 所需要的最小操作次数。如果不能把所有数都变成 $q_i$，输出 $-1$。", "hint": "**【样例解释】**\n\nElsie 需要至少 $4$ 次修改才能让记录里的所有数都变成 $3$。\n\n$$\n\\begin{aligned}\n&\\ 1\\ 2\\ 3\\ 1\\ 1\\ 4\\\\\n\\rightarrow&\\ 3\\ 3\\ 1\\ 1\\ 4\\\\\n\\rightarrow&\\ 3\\ 3\\ 1\\ 5\\\\\n\\rightarrow&\\ 3\\ 3\\ 6\\\\\n\\rightarrow&\\ 3\\ 3\\ 3\\ 3\\\\\n\\end{aligned}\n$$\n\nElsie 不可能把记录中的所有数都变成 $5$，因此输出 $-1$。这是正确的。\n\n**【数据范围】**\n\n- 对于第 $2\\sim 4$ 组数据，$N,Q\\le 5000$。\n- 对于第 $5\\sim 7$ 组数据，所有 $a_i$ 最多为 $10^9$。\n- 对于第 $8\\sim 26$ 组数据，无附加限制。", "locale": "zh-CN"}}}
{"pid": "P8194", "type": "P", "difficulty": 7, "samples": [["5\n1478\n4455\n5968\n31313211\n123659874", "5\n2\n24\n3\n255"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022", "动态规划优化", "状态合并"], "title": "[USACO22FEB] Phone Numbers P", "background": "", "description": "Bessie 获得了一个九键的新手机，键位如下所示：\n\n```\n123\n456\n789\n```\n\nBessie 正在匆忙中尝试打出一个给定的电话号码，所以她决定通过用她的其中一个蹄子一次按下多个按钮的方式来节省时间。具体来说，Bessie 的蹄子可能按下一个键，两个共用一条边的键（总共有 $12$ 种可能），或者形成一个正方形的四个键（$1245$，$2356$，$4578$，$5689$）\n\n例如，如果 Bessie 要打的电话号码是 $123659874$，她可能通过如下方法按键来尝试节省时间：\n\n1. 同时按下 $1$ 和 $2$。\n2. 按下 $3$。\n3. 同时按下 $6,5,9,8$。\n4. 同时按下 $7$ 和 $4$。\n\n不幸的是，Bessie 大大高估了她执行这项任务的技能——如果 Bessie 的蹄子同时按下多个按键，那么所有这些按键会以任意顺序输入。所以如果 Bessie 尝试按上述按键顺序，结束时她输入的电话号码可能是 $123596847$ 或 $213659874$（或者其他可能的序列）。\n\n给定一个 Bessie 已经输入的序列，请计算她可能想输入的电话号码的数量对 $10^9+7$ 取模后的值。", "inputFormat": "第一行一个整数 $T$（$1\\le T\\le 10$），表示要求解的独立测试数据组数。\n\n接下来 $T$ 行，每行一个非空且只包含 $1$ 到 $9$ 的数字串。保证输入中所有的数字串总长度不超过 $10^5$。", "outputFormat": "对于每组数据，输出 Bessie 可能想输入的电话号码个数对 $10^9+7$ 取模后的值。", "hint": "**【样例解释】**\n\n对于第一组数据。Bessie 可能想输入如下五个电话号码之一：\n\n```plain\n1478\n1487\n4178\n4187\n1748\n```\n\n例如，如果 Bessie 想输入 $4187$，她可能会尝试同时按下 $1$ 和 $4$，然后同时按下 $7$ 和 $8$。\n\n对于第三组数据，因为这些数字组成了一个正方形，Bessie 可能想输入的电话是输入序列的任何排列。\n\n**【数据范围】**\n\n- 对于第 $2\\sim 3$ 组数据，所有电话号码的长度最多为 $8$。\n- 对于第 $4\\sim 5$ 组数据，电话号码只包含 $1,2$ 和 $3$。\n- 对于第 $6\\sim 7$ 组数据，电话号码不包含 $5$。\n- 对于第 $8\\sim 9$ 组数据，电话号码只包含 $5,6,8,9$。\n- 对于第 $10\\sim 12$ 组数据，电话号码总长度不超过 $10^2$。\n- 对于第 $13\\sim 15$ 组数据，电话号码总长度不超过 $10^3$。\n- 对于第 $16\\sim 18$ 组数据，电话号码总长度不超过 $10^4$。\n- 对于第 $19\\sim 21$ 组数据，无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22FEB] Phone Numbers P", "background": "", "description": "Bessie 获得了一个九键的新手机，键位如下所示：\n\n```\n123\n456\n789\n```\n\nBessie 正在匆忙中尝试打出一个给定的电话号码，所以她决定通过用她的其中一个蹄子一次按下多个按钮的方式来节省时间。具体来说，Bessie 的蹄子可能按下一个键，两个共用一条边的键（总共有 $12$ 种可能），或者形成一个正方形的四个键（$1245$，$2356$，$4578$，$5689$）\n\n例如，如果 Bessie 要打的电话号码是 $123659874$，她可能通过如下方法按键来尝试节省时间：\n\n1. 同时按下 $1$ 和 $2$。\n2. 按下 $3$。\n3. 同时按下 $6,5,9,8$。\n4. 同时按下 $7$ 和 $4$。\n\n不幸的是，Bessie 大大高估了她执行这项任务的技能——如果 Bessie 的蹄子同时按下多个按键，那么所有这些按键会以任意顺序输入。所以如果 Bessie 尝试按上述按键顺序，结束时她输入的电话号码可能是 $123596847$ 或 $213659874$（或者其他可能的序列）。\n\n给定一个 Bessie 已经输入的序列，请计算她可能想输入的电话号码的数量对 $10^9+7$ 取模后的值。", "inputFormat": "第一行一个整数 $T$（$1\\le T\\le 10$），表示要求解的独立测试数据组数。\n\n接下来 $T$ 行，每行一个非空且只包含 $1$ 到 $9$ 的数字串。保证输入中所有的数字串总长度不超过 $10^5$。", "outputFormat": "对于每组数据，输出 Bessie 可能想输入的电话号码个数对 $10^9+7$ 取模后的值。", "hint": "**【样例解释】**\n\n对于第一组数据。Bessie 可能想输入如下五个电话号码之一：\n\n```plain\n1478\n1487\n4178\n4187\n1748\n```\n\n例如，如果 Bessie 想输入 $4187$，她可能会尝试同时按下 $1$ 和 $4$，然后同时按下 $7$ 和 $8$。\n\n对于第三组数据，因为这些数字组成了一个正方形，Bessie 可能想输入的电话是输入序列的任何排列。\n\n**【数据范围】**\n\n- 对于第 $2\\sim 3$ 组数据，所有电话号码的长度最多为 $8$。\n- 对于第 $4\\sim 5$ 组数据，电话号码只包含 $1,2$ 和 $3$。\n- 对于第 $6\\sim 7$ 组数据，电话号码不包含 $5$。\n- 对于第 $8\\sim 9$ 组数据，电话号码只包含 $5,6,8,9$。\n- 对于第 $10\\sim 12$ 组数据，电话号码总长度不超过 $10^2$。\n- 对于第 $13\\sim 15$ 组数据，电话号码总长度不超过 $10^3$。\n- 对于第 $16\\sim 18$ 组数据，电话号码总长度不超过 $10^4$。\n- 对于第 $19\\sim 21$ 组数据，无附加限制。", "locale": "zh-CN"}}}
{"pid": "P8195", "type": "P", "difficulty": 1, "samples": [["welcometochuanzhicupchuanzhi", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "传智杯"], "title": "[传智杯 #4 决赛] 小智的疑惑", "background": "", "description": "传智专修学院给了小智一个仅包含小写字母的字符串 $s$，他想知道，里面出现了多少次子串 `chuanzhi` 呢。\n\n我们称一个字符串 $t$ 是 $s$ 的子串，当且仅当将 $s$ 的开头若干个（可以为 0 个）连续字符和结尾若干个（可以为 0 个）连续字符删去后，剩下的字符串和 $t$ 相同。例如，我们称 `ab` 是 `abc` 的子串，但 `ac` 不是 `abc` 的子串。", "inputFormat": "输入只有一行一个字符串，表示字符串 $s$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq |s| \\leq 4 \\times 10^5$，$|s|$ 表示 $s$ 的长度，且 $s$ 中只有小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] 小智的疑惑", "background": "", "description": "传智专修学院给了小智一个仅包含小写字母的字符串 $s$，他想知道，里面出现了多少次子串 `chuanzhi` 呢。\n\n我们称一个字符串 $t$ 是 $s$ 的子串，当且仅当将 $s$ 的开头若干个（可以为 0 个）连续字符和结尾若干个（可以为 0 个）连续字符删去后，剩下的字符串和 $t$ 相同。例如，我们称 `ab` 是 `abc` 的子串，但 `ac` 不是 `abc` 的子串。", "inputFormat": "输入只有一行一个字符串，表示字符串 $s$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq |s| \\leq 4 \\times 10^5$，$|s|$ 表示 $s$ 的长度，且 $s$ 中只有小写字母。", "locale": "zh-CN"}}}
{"pid": "P8196", "type": "P", "difficulty": 1, "samples": [["2\n3\n1 2 3\n5\n1 2 3 4 5\n", "2\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "传智杯"], "title": "[传智杯 #4 决赛] 三元组", "background": "", "description": "给定一个长度为 $n$ 的数列 $a$，对于一个有序整数三元组 $(i, j, k)$，若其满足 $1 \\leq i \\leq j \\leq k \\leq n$ 并且 $a_i +a_j  = a_k$，则我们称这个三元组是「传智的」。\n\n现在请你计算，有多少有序整数三元组是传智的。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行是一个整数，表示数列的长度 $n$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n对于第一组数据，因为 $a_1 + a_1 = a_2$，$a_1 + a_2 = a_3$，故共 $(1, 1, 2)$ 和 $(1, 2, 3)$ 两个三元组。  \n对于第二组数据六个三元组分别是：\n- $(1, 1, 2)$\n- $(1, 2, 3)$\n- $(1, 3, 4)$\n- $(1, 4, 5)$\n- $(2, 2, 4)$\n- $(2, 3, 5)$\n\n### 数据规模与约定\n\n对于全部测试点，保证 $1 \\leq T \\leq 100$，$1 \\leq n , a_i \\leq 100$，且各个测试点的 $n$ 之和不超过 $100$，即 $\\sum n \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] 三元组", "background": "", "description": "给定一个长度为 $n$ 的数列 $a$，对于一个有序整数三元组 $(i, j, k)$，若其满足 $1 \\leq i \\leq j \\leq k \\leq n$ 并且 $a_i +a_j  = a_k$，则我们称这个三元组是「传智的」。\n\n现在请你计算，有多少有序整数三元组是传智的。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n输入的第一行是一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行是一个整数，表示数列的长度 $n$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n对于第一组数据，因为 $a_1 + a_1 = a_2$，$a_1 + a_2 = a_3$，故共 $(1, 1, 2)$ 和 $(1, 2, 3)$ 两个三元组。  \n对于第二组数据六个三元组分别是：\n- $(1, 1, 2)$\n- $(1, 2, 3)$\n- $(1, 3, 4)$\n- $(1, 4, 5)$\n- $(2, 2, 4)$\n- $(2, 3, 5)$\n\n### 数据规模与约定\n\n对于全部测试点，保证 $1 \\leq T \\leq 100$，$1 \\leq n , a_i \\leq 100$，且各个测试点的 $n$ 之和不超过 $100$，即 $\\sum n \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P8197", "type": "P", "difficulty": 3, "samples": [["3\n4\n1 2 2 3\n3 2 2 1\n3\n1 2 3\n1 2 4\n1\n1\n1\n", "YES\n4 3\n2 3\n1 2\n3 2\n3 4\n0 0\nNO\nYES\n0 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "排序", "构造", "传智杯"], "title": "[传智杯 #4 决赛] 排排队", "background": "", "description": "\ncyq 在 tsyz 担任了体育老师，负责排队一事。\n\n在 tsyz 中，每个人都有一个身高 $a_{i}$，并且只有**相邻**的两个人可以交换位置。cyq 带领的队伍有 $n$ 个人,他现在要给大家排队形。\n\n给定一个长度为 $n$ 的序列 $b$，一个队形被认为美观，当且仅当对于所有的 $i = 1, 2, 3, \\dots n$，$a_{i} =b_{i}$。cyq 想知道，他能否让大家的队形变得美观，并且交换相邻两个人的次数不超过 $n^2$ 次。这个问题把 $cyq$ 难住了，请你帮他来解决这个问题，如果存在合法的交换方案，输出 `YES`，并给出一组方案；否则，输出 `NO`。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行是一个整数 $T$，表示数据组数，对于每组数据：  \n第一行是一个整数，表示队伍的长度 $n$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个人的身高 $a_i$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示美观队形里第 $i$ 个人的身高 $b_i$。", "outputFormat": "对每组数据依次分别输出答案。\n\n对于每组数据，若存在一种方案，则在第一行输出一个 `YES`，否则输出一个 `NO`。\n\n如果输出 `YES`，下面则输出若干行每行两个整数 $i,j$，表示第 $i$ 个同学和第 $j$ 个同学交换位置，显然 $|i-j|=1$。在交换完成后，你还需要输出一行 `0 0` 表示你的操作结束了，请注意数组的下标从 1 开始编号至 $n$。\n\n如果输出 `NO`，则接下来什么都不需要输出。\n\n**请特别注意，对于每组数据，你的操作次数不能超过 $n^2$（不包括 `0 0` 一行），否则将得到 WA(Wrong Answer) 的结果**。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1\\leq T \\leq 10$，$1\\leq n \\leq 10^3$，$1\\leq a_{i},b_{i}\\leq 10^9$，且各个测试点 $n$ 之和不超过 $1000$，即 $\\sum n\\leq 10^3$。\n\n### 提示\n- 请注意大量的输出输出对程序效率造成的影响，不要频繁刷新缓冲区。例如，对于使用 `std::cout` 的 C++ 选手，请使用 `'\\n'` 而不是 `std::endl` 来换行；对于 java 选手，请选择高效率的输出方式，如使用 PrintWriter；python 选手可以正常的使用 print 而无需考虑效率问题。\n- 请按照输出格式的要求输出您的答案，如果格式不符合要求，返回的评测信息将可能是 TLE、RE、WA、UKE 等任何结果。\n\n### C++ 语言的高效输出样例\n```cpp\n#include <iostream>\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(0);\n  for (int i = 1; i <= 5; ++i) {\n    std::cout << i << '\\n'; // 注意这里不能使用 std::endl\n  }\n}\n```\n\n### Java 语言的高效输出样例\n```java\nimport java.io.PrintWriter;\n\npublic class Main {\n  public static void main(String[] args) {\n    PrintWriter ot = new PrintWriter(System.out);\n    for (int i = 1; i <= 5; ++i) {\n      ot.println(i);\n    }\n    ot.flush(); // 请务必保证在程序结束时运行本条语句，否则在缓冲区的内容无法输出\n  }\n}", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] 排排队", "background": "", "description": "\ncyq 在 tsyz 担任了体育老师，负责排队一事。\n\n在 tsyz 中，每个人都有一个身高 $a_{i}$，并且只有**相邻**的两个人可以交换位置。cyq 带领的队伍有 $n$ 个人,他现在要给大家排队形。\n\n给定一个长度为 $n$ 的序列 $b$，一个队形被认为美观，当且仅当对于所有的 $i = 1, 2, 3, \\dots n$，$a_{i} =b_{i}$。cyq 想知道，他能否让大家的队形变得美观，并且交换相邻两个人的次数不超过 $n^2$ 次。这个问题把 $cyq$ 难住了，请你帮他来解决这个问题，如果存在合法的交换方案，输出 `YES`，并给出一组方案；否则，输出 `NO`。", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行是一个整数 $T$，表示数据组数，对于每组数据：  \n第一行是一个整数，表示队伍的长度 $n$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个人的身高 $a_i$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示美观队形里第 $i$ 个人的身高 $b_i$。", "outputFormat": "对每组数据依次分别输出答案。\n\n对于每组数据，若存在一种方案，则在第一行输出一个 `YES`，否则输出一个 `NO`。\n\n如果输出 `YES`，下面则输出若干行每行两个整数 $i,j$，表示第 $i$ 个同学和第 $j$ 个同学交换位置，显然 $|i-j|=1$。在交换完成后，你还需要输出一行 `0 0` 表示你的操作结束了，请注意数组的下标从 1 开始编号至 $n$。\n\n如果输出 `NO`，则接下来什么都不需要输出。\n\n**请特别注意，对于每组数据，你的操作次数不能超过 $n^2$（不包括 `0 0` 一行），否则将得到 WA(Wrong Answer) 的结果**。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1\\leq T \\leq 10$，$1\\leq n \\leq 10^3$，$1\\leq a_{i},b_{i}\\leq 10^9$，且各个测试点 $n$ 之和不超过 $1000$，即 $\\sum n\\leq 10^3$。\n\n### 提示\n- 请注意大量的输出输出对程序效率造成的影响，不要频繁刷新缓冲区。例如，对于使用 `std::cout` 的 C++ 选手，请使用 `'\\n'` 而不是 `std::endl` 来换行；对于 java 选手，请选择高效率的输出方式，如使用 PrintWriter；python 选手可以正常的使用 print 而无需考虑效率问题。\n- 请按照输出格式的要求输出您的答案，如果格式不符合要求，返回的评测信息将可能是 TLE、RE、WA、UKE 等任何结果。\n\n### C++ 语言的高效输出样例\n```cpp\n#include <iostream>\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(0);\n  for (int i = 1; i <= 5; ++i) {\n    std::cout << i << '\\n'; // 注意这里不能使用 std::endl\n  }\n}\n```\n\n### Java 语言的高效输出样例\n```java\nimport java.io.PrintWriter;\n\npublic class Main {\n  public static void main(String[] args) {\n    PrintWriter ot = new PrintWriter(System.out);\n    for (int i = 1; i <= 5; ++i) {\n      ot.println(i);\n    }\n    ot.flush(); // 请务必保证在程序结束时运行本条语句，否则在缓冲区的内容无法输出\n  }\n}", "locale": "zh-CN"}}}
{"pid": "P8199", "type": "P", "difficulty": 4, "samples": [["3 3 60 8\n1 1\n14 300\n15 30\n5 1\n10 1\n17 11 10\n17 10 10\n17 10 10\n15 10\n4\n4\n2\n3\n3\n2\n4\n4\n", "1\n0\n14 254\n10 1\n15 12\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "O2优化", "传智杯"], "title": "[传智杯 #4 决赛] 游戏", "background": "小智正在看 B 站非著名 up 主脚踢喷火幼儿园（下称喷火）和他的朋友 ATA_Radio_STN 和 sltheen 正在游玩著名游戏《PLAYERUNKNOWN’S BATTLEGROUNDS》（绝地求生：大逃杀）。", "description": "喷火刚刚跳伞落地，周围危机四伏，他的手中有一个初始背包，他捡到的所有物资都会装在这个背包里，游戏地图被简化为一个 $n \\times m$ 的网格图，每个格子里要么是物资，要么是敌人。\n\n物资分为主/副武器和弹药，其中弹药又分为子弹与投掷物。每种武器会对应使用某种子弹。例如：Beryl M762 突击步枪使用 7.62mm 子弹，M416 突击步枪使用 5.56mm 子弹，而 AKM 突击步枪也使用 7.62mm 子弹。\n\n当喷火走到一个含有物资的格子的时候，他会拾起地上的物资并放入背包。但背包容量有限，因此当背包装满的时候，他将会扔掉一部分物资以装下新的物资。他将按照以下规则丢弃物资：\n1.\t如果捡到的是武器，那么按照霰弹枪>突击步枪>射手步枪>栓动步枪>空手的优先级进行替换。优先替换主武器，且主武器优先级必须严格高于副武器。如果替换主武器，那么替换下来的主武器被**直接丢弃**，不再用其替换副武器。\n2.\t若有不需要的子弹（指主副武器均不使用的子弹），最优先丢掉这些子弹，直至空间足够装下新的物资。\n3.\t若丢掉全部不需要子弹后空间仍旧不足，或有多种不需要的子弹，优先丢掉最晚拾取时间最早的弹药（包括主副武器使用的子弹和投掷物），直至空间足够装下新的物资（需要注意的是，即使新物资是「不需要的子弹」，在丢掉所有原有的「不需要的子弹」后如果背包空间还是不够，则喷火依然会丢掉其他弹药直到捡起所有「不需要的子弹」）。\n4.\t无论捡到的是新物资，还是已经有的物资，该物资的最晚拾取时间都将被更新为当前时间点。\n5.\t武器最多同时持有两种，即主/副武器，同优先级的主/副武器不进行替换。\n\n每个格子的物资只会拾取一次。当第二次进入某个格子的时候，物品不会刷新，即不会捡起上次在这个格子丢掉的物品，也不会再次捡到初始时的物品。\n\n当喷火走到含有敌人的格子的时候，他会与敌人进行战斗，他的战斗力很强悍，只需要有足够的子弹即可消灭敌人。每个敌人有两个参数 $a,b$，代表需要消耗 $a$ 发主武器子弹，若主武器子弹不够，则不消耗主武器子弹，而消耗 $b$ 发副武器子弹。若主副武器均没有足够子弹，则喷火被敌人反杀，然后敌人会在喷火的盒子上做蹲起嘲讽他。\n\n每个格子的敌人只会出现一次。如果第二次进入某一个有敌人的格子，则什么都不会发生。\n\n现在，喷火跳在了第一行第一列的格子上，ATA_Radio_STN 已经为喷火摸清了地图形势，而 sltheen 会给喷火下指示，喷火想知道，当他执行完最后一条指示之后，他是否还存活，若存活，按照最晚拾取时间时间从早到晚，输出背包内物品种类和数量，若死亡，输出他死亡格子的坐标。\n\n下附可能出现的物资、物资类别、物资使用的子弹种类、物资所需空间以及物资对应编号。\n\n武器：\n| 武器名称 | 武器类型| 使用的子弹类型 | 编号 |\n| --- | --- | ---  | ---|\n| 空手 | 空手 | N/A | 0|\n|BerylM762|突击步枪|7.62mm子弹|1|\n|AKM|突击步枪|7.62mm子弹|2|\n|SKS|射手步枪|7.62mm子弹|3|\n|Kar98K|栓动步枪|7.62mm子弹|4|\n|M416|突击步枪|5.56mm子弹|5|\n|MK12|射手步枪|5.56mm子弹|6|\n|Mini14|射手步枪|5.56mm子弹|7|\n|S686|霰弹枪|12号霰弹|8|\n|DBS|霰弹枪|12号霰弹|9|\n\n弹药\n|弹药名称| 类型 | 占用空间 | 编号 |\n| - | - | - | - |\n|FragGrenade|投掷物| 5  |   10|\n|SmokeGrenade| 投掷物 |    4|    11|\n|MolotovCocktail |投掷物  | 3 |    12|\n|Flashbang |投掷物        | 2    | 13|\n|7.62mm |子弹 |0.2|                14|\n|5.56mm| 子弹| 0.1                |15|\n|3in（12号霰弹）| 子弹| 0.5|                     16|\n\n请注意，上表中子弹的「占用空间」表示一发子弹所占用的空间。\n\n另外，敌人在地图上的编号为 17。\n\n", "inputFormat": "第一行有四个整数，依次表示地图行数 $n$，列数 $m$，背包容量 $k$，和 sltheen 会下达的指令条数 $t$。  \n接下来的 $n\\times m$ 行中，第 $i$ 行代表第 $\\lfloor\\frac{i - 1}{n}\\rfloor+1$ 行，第 $(i - 1)\\%n+1$ 列的地图情况，其中 $i \\% n$ 表示 $i$ 除以 $n$ 的余数：\n- 此处若是物资，则本行有两个空格隔开的整数，为物资编号 $x$ 和物资数量 $y$，物资编号见「题目描述」中表格的最后一列（如果该物资是枪，则保证 $y = 1$）；\n- 若此处是敌人，则本行有三个空格隔开的整数，第一个整数为 $17$，代表敌人，接下来两个整数依次表示敌人的 $a, b$ 两个参数。\n\n接下来 $t$ 行，每行一个整数 $op$，表示 sltheen 为喷火下达的指令的移动方向：1 代表向上，2 代表向下，3 代表向左，4 代表向右。（第一行第一列是地图的左上角，最后一行第一列是地图的左下角）\n", "outputFormat": "如果喷火死亡，则输出两个数 $u, v$，代表喷火在第 $u$ 行第 $v$ 列死亡。\n\n若喷火未死亡，先输出两行，第一行为主武器编号，第二行为副武器编号，之后输出若干行，每行为两个整数整数，中间用空格隔开，第一个整数为物资名称，第二个整数为其数量，按照最后捡到时间从早到晚排序。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证：\n- $1 \\leq n, m \\leq 100$，且 $1 \\leq  n \\times m \\leq 100$。\n- $1 \\leq k \\leq 500$，$1 \\leq t,a,b  \\leq 200$。\n- $1 \\leq x \\leq 16$，$1 \\leq y \\leq 5000$。\n- $1 \\leq op \\leq 4$。\n- 数据保证每个格子内只有一种物资（或一个敌人），且背包能够装下任意一格的物资。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] 游戏", "background": "小智正在看 B 站非著名 up 主脚踢喷火幼儿园（下称喷火）和他的朋友 ATA_Radio_STN 和 sltheen 正在游玩著名游戏《PLAYERUNKNOWN’S BATTLEGROUNDS》（绝地求生：大逃杀）。", "description": "喷火刚刚跳伞落地，周围危机四伏，他的手中有一个初始背包，他捡到的所有物资都会装在这个背包里，游戏地图被简化为一个 $n \\times m$ 的网格图，每个格子里要么是物资，要么是敌人。\n\n物资分为主/副武器和弹药，其中弹药又分为子弹与投掷物。每种武器会对应使用某种子弹。例如：Beryl M762 突击步枪使用 7.62mm 子弹，M416 突击步枪使用 5.56mm 子弹，而 AKM 突击步枪也使用 7.62mm 子弹。\n\n当喷火走到一个含有物资的格子的时候，他会拾起地上的物资并放入背包。但背包容量有限，因此当背包装满的时候，他将会扔掉一部分物资以装下新的物资。他将按照以下规则丢弃物资：\n1.\t如果捡到的是武器，那么按照霰弹枪>突击步枪>射手步枪>栓动步枪>空手的优先级进行替换。优先替换主武器，且主武器优先级必须严格高于副武器。如果替换主武器，那么替换下来的主武器被**直接丢弃**，不再用其替换副武器。\n2.\t若有不需要的子弹（指主副武器均不使用的子弹），最优先丢掉这些子弹，直至空间足够装下新的物资。\n3.\t若丢掉全部不需要子弹后空间仍旧不足，或有多种不需要的子弹，优先丢掉最晚拾取时间最早的弹药（包括主副武器使用的子弹和投掷物），直至空间足够装下新的物资（需要注意的是，即使新物资是「不需要的子弹」，在丢掉所有原有的「不需要的子弹」后如果背包空间还是不够，则喷火依然会丢掉其他弹药直到捡起所有「不需要的子弹」）。\n4.\t无论捡到的是新物资，还是已经有的物资，该物资的最晚拾取时间都将被更新为当前时间点。\n5.\t武器最多同时持有两种，即主/副武器，同优先级的主/副武器不进行替换。\n\n每个格子的物资只会拾取一次。当第二次进入某个格子的时候，物品不会刷新，即不会捡起上次在这个格子丢掉的物品，也不会再次捡到初始时的物品。\n\n当喷火走到含有敌人的格子的时候，他会与敌人进行战斗，他的战斗力很强悍，只需要有足够的子弹即可消灭敌人。每个敌人有两个参数 $a,b$，代表需要消耗 $a$ 发主武器子弹，若主武器子弹不够，则不消耗主武器子弹，而消耗 $b$ 发副武器子弹。若主副武器均没有足够子弹，则喷火被敌人反杀，然后敌人会在喷火的盒子上做蹲起嘲讽他。\n\n每个格子的敌人只会出现一次。如果第二次进入某一个有敌人的格子，则什么都不会发生。\n\n现在，喷火跳在了第一行第一列的格子上，ATA_Radio_STN 已经为喷火摸清了地图形势，而 sltheen 会给喷火下指示，喷火想知道，当他执行完最后一条指示之后，他是否还存活，若存活，按照最晚拾取时间时间从早到晚，输出背包内物品种类和数量，若死亡，输出他死亡格子的坐标。\n\n下附可能出现的物资、物资类别、物资使用的子弹种类、物资所需空间以及物资对应编号。\n\n武器：\n| 武器名称 | 武器类型| 使用的子弹类型 | 编号 |\n| --- | --- | ---  | ---|\n| 空手 | 空手 | N/A | 0|\n|BerylM762|突击步枪|7.62mm子弹|1|\n|AKM|突击步枪|7.62mm子弹|2|\n|SKS|射手步枪|7.62mm子弹|3|\n|Kar98K|栓动步枪|7.62mm子弹|4|\n|M416|突击步枪|5.56mm子弹|5|\n|MK12|射手步枪|5.56mm子弹|6|\n|Mini14|射手步枪|5.56mm子弹|7|\n|S686|霰弹枪|12号霰弹|8|\n|DBS|霰弹枪|12号霰弹|9|\n\n弹药\n|弹药名称| 类型 | 占用空间 | 编号 |\n| - | - | - | - |\n|FragGrenade|投掷物| 5  |   10|\n|SmokeGrenade| 投掷物 |    4|    11|\n|MolotovCocktail |投掷物  | 3 |    12|\n|Flashbang |投掷物        | 2    | 13|\n|7.62mm |子弹 |0.2|                14|\n|5.56mm| 子弹| 0.1                |15|\n|3in（12号霰弹）| 子弹| 0.5|                     16|\n\n请注意，上表中子弹的「占用空间」表示一发子弹所占用的空间。\n\n另外，敌人在地图上的编号为 17。\n\n", "inputFormat": "第一行有四个整数，依次表示地图行数 $n$，列数 $m$，背包容量 $k$，和 sltheen 会下达的指令条数 $t$。  \n接下来的 $n\\times m$ 行中，第 $i$ 行代表第 $\\lfloor\\frac{i - 1}{n}\\rfloor+1$ 行，第 $(i - 1)\\%n+1$ 列的地图情况，其中 $i \\% n$ 表示 $i$ 除以 $n$ 的余数：\n- 此处若是物资，则本行有两个空格隔开的整数，为物资编号 $x$ 和物资数量 $y$，物资编号见「题目描述」中表格的最后一列（如果该物资是枪，则保证 $y = 1$）；\n- 若此处是敌人，则本行有三个空格隔开的整数，第一个整数为 $17$，代表敌人，接下来两个整数依次表示敌人的 $a, b$ 两个参数。\n\n接下来 $t$ 行，每行一个整数 $op$，表示 sltheen 为喷火下达的指令的移动方向：1 代表向上，2 代表向下，3 代表向左，4 代表向右。（第一行第一列是地图的左上角，最后一行第一列是地图的左下角）\n", "outputFormat": "如果喷火死亡，则输出两个数 $u, v$，代表喷火在第 $u$ 行第 $v$ 列死亡。\n\n若喷火未死亡，先输出两行，第一行为主武器编号，第二行为副武器编号，之后输出若干行，每行为两个整数整数，中间用空格隔开，第一个整数为物资名称，第二个整数为其数量，按照最后捡到时间从早到晚排序。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证：\n- $1 \\leq n, m \\leq 100$，且 $1 \\leq  n \\times m \\leq 100$。\n- $1 \\leq k \\leq 500$，$1 \\leq t,a,b  \\leq 200$。\n- $1 \\leq x \\leq 16$，$1 \\leq y \\leq 5000$。\n- $1 \\leq op \\leq 4$。\n- 数据保证每个格子内只有一种物资（或一个敌人），且背包能够装下任意一格的物资。", "locale": "zh-CN"}}}
{"pid": "P8200", "type": "P", "difficulty": 4, "samples": [["5 3\n1 2 2\n1 3 6 \n2 4 8\n2 5 1\n1 2 4\n2 3 12\n1 4 10", "nO\nNo\nYeS"], ["5 10\n2 1 63\n3 1 57\n4 2 2\n5 2 84\n5 2 84\n4 1 9977404983223574764\n2 5 84\n2 1 15996060349666123522\n5 4 86\n3 1 8428615422876116375\n5 1 107\n2 3 6\n2 3 6\n4 2 2", "yeS\nnO\nYEs\nNo\nYEs\nnO\nYEs\nyeS\nyeS\nYEs"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形数据结构", "Special Judge", "O2优化", "深度优先搜索 DFS", "前缀和", "传智杯"], "title": "[传智杯 #4 决赛] 生活在树上（easy version）", "background": "**本题是 P8201 的简单版本，两道题目的解法略有不同。本题和 P8201 在题意上的区别在于本题给定树上的边权，而不是点权。**\n\n小智生活在「传智国」，这是一个有 $n$ 个城市的国家，各个城市由 $n-1$ 条道路相连。\n\n每个道路都有长度 $w_i$ ，我们定义，小智从城市 $a$ 走到城市 $b$ 的代价是 $\\mathrm{dis}_{a, b} = \\bigoplus \\limits_{e \\in \\mathrm{path}\\left(a, b\\right)} w_e$，其中 $\\bigoplus$ 表示**按位异或**（如果你不知道什么是**按位异或**，请参见题目下方的提示/说明），$\\mathrm{path}\\left(a,b\\right)$ 表示 $a$ 到 $b$ 的简单路径上的边集。也即 $\\mathrm{dis}_{a, b}$ 表示将 $a$ 与 $b$ 的简单路径上所有边写作 $e_1, e_2, e_3, \\dots$ 后，求 $w_{e_1} \\bigoplus w_{e_2}\\bigoplus w_{e_3} \\dots$ 的结果。\n\n有一天，小智获得了去参加传智杯的机会，他在前往比赛地的路上想到了一个问题，但他好像不会做，于是他把这个题告诉了你。聪明的同学，你可以帮帮他吗？", "description": "小智说：「由于我们的国家只有 $n$ 个城市和 $n-1$ 条道路，那么我们的国家就相当于是一棵树。我在想，在我们的国家中，是否有城市满足『到城市 $a$ 的代价和到城市 $b$ 的代价的异或等于 $k$』。好难哦，我想不出来，你能帮帮我吗？」\n\n也就是说，给定城市 $a, b$ 和整数 $k$，请你计算是否存在城市 $t$ 满足 $\\mathrm{dis}_{t, a} \\bigoplus \\mathrm{dis}_{t, b} = k$。", "inputFormat": "第一行有两个整数 $n$，$m$，表示国家的城市数和询问的个数。\n\n\n接下来 $n-1$ 行，每行有两个整数 $x, y, l$，表示城市 $x$ 与城市 $y$ 有一条长度为 $l$ 的边。\n\n接下来 $m$ 行，每行有三个整数 $a, b, k$，表示小智从城市 $a$ 走到城市 $b$，$k$ 的含义与题目描述一致。", "outputFormat": "共 $m$ 行，每行一个整数。\n\n对于第 $i$ 个询问，如果存在至少一个城市 $t$ 满足要求，则输出 `Yes`。\n\n如果不存在任何一个城市满足条件，则输出 `No`。\n\n输出字符串大小写不敏感，例如，`Yes`、`yES`、`YES`、`yes` 等都算作 `Yes`。", "hint": "### 相关概念解释\n「树」：树是一个有 $n$ 个结点和 $n-1$ 条边的无向简单连通图。\n\n「按位异或」：按位异或即 C++、python、java 语言中的 「^」 运算。它是一个二元运算，步骤是将两个数的二进制位按位比较，相同为 $0$，不同为 $1$。例如：$3 \\bigoplus 5 = (011)_2 \\bigoplus (101)_2 = (110)_2 = 6$。**请注意，这是一个按位运算，不是一个逻辑运算**。\n### 样例 1 解释\n下图为传智国的地图。\n\n$\\forall t \\in \\{1, 2, 3, 4, 5\\}$，都不可能有 $\\mathrm{dis} _{t,1} \\bigoplus \\mathrm{dis}_{t, 2} = 4$，$\\mathrm{dis}_{t, 2} \\bigoplus \\mathrm{dis}_{t, 3} = 12$，于是输出 `No`；\n\n而取 $t = 5$，有 $\\mathrm{dis}_{t, 1} \\bigoplus \\mathrm{dis}_{t, 4} = 10$，于是输出 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ikzjfh3.png)\n### 数据规模与约定\n对于所有测试点，保证 $1 < n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 5 \\times 10^5$，$0 \\leq w_i < 2^{64}$。\n\n对于每次询问，保证 $1 \\leq a, b \\leq n$ 且 $a \\neq b$，$0 \\leq k < 2^{64}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] 生活在树上（easy version）", "background": "**本题是 P8201 的简单版本，两道题目的解法略有不同。本题和 P8201 在题意上的区别在于本题给定树上的边权，而不是点权。**\n\n小智生活在「传智国」，这是一个有 $n$ 个城市的国家，各个城市由 $n-1$ 条道路相连。\n\n每个道路都有长度 $w_i$ ，我们定义，小智从城市 $a$ 走到城市 $b$ 的代价是 $\\mathrm{dis}_{a, b} = \\bigoplus \\limits_{e \\in \\mathrm{path}\\left(a, b\\right)} w_e$，其中 $\\bigoplus$ 表示**按位异或**（如果你不知道什么是**按位异或**，请参见题目下方的提示/说明），$\\mathrm{path}\\left(a,b\\right)$ 表示 $a$ 到 $b$ 的简单路径上的边集。也即 $\\mathrm{dis}_{a, b}$ 表示将 $a$ 与 $b$ 的简单路径上所有边写作 $e_1, e_2, e_3, \\dots$ 后，求 $w_{e_1} \\bigoplus w_{e_2}\\bigoplus w_{e_3} \\dots$ 的结果。\n\n有一天，小智获得了去参加传智杯的机会，他在前往比赛地的路上想到了一个问题，但他好像不会做，于是他把这个题告诉了你。聪明的同学，你可以帮帮他吗？", "description": "小智说：「由于我们的国家只有 $n$ 个城市和 $n-1$ 条道路，那么我们的国家就相当于是一棵树。我在想，在我们的国家中，是否有城市满足『到城市 $a$ 的代价和到城市 $b$ 的代价的异或等于 $k$』。好难哦，我想不出来，你能帮帮我吗？」\n\n也就是说，给定城市 $a, b$ 和整数 $k$，请你计算是否存在城市 $t$ 满足 $\\mathrm{dis}_{t, a} \\bigoplus \\mathrm{dis}_{t, b} = k$。", "inputFormat": "第一行有两个整数 $n$，$m$，表示国家的城市数和询问的个数。\n\n\n接下来 $n-1$ 行，每行有两个整数 $x, y, l$，表示城市 $x$ 与城市 $y$ 有一条长度为 $l$ 的边。\n\n接下来 $m$ 行，每行有三个整数 $a, b, k$，表示小智从城市 $a$ 走到城市 $b$，$k$ 的含义与题目描述一致。", "outputFormat": "共 $m$ 行，每行一个整数。\n\n对于第 $i$ 个询问，如果存在至少一个城市 $t$ 满足要求，则输出 `Yes`。\n\n如果不存在任何一个城市满足条件，则输出 `No`。\n\n输出字符串大小写不敏感，例如，`Yes`、`yES`、`YES`、`yes` 等都算作 `Yes`。", "hint": "### 相关概念解释\n「树」：树是一个有 $n$ 个结点和 $n-1$ 条边的无向简单连通图。\n\n「按位异或」：按位异或即 C++、python、java 语言中的 「^」 运算。它是一个二元运算，步骤是将两个数的二进制位按位比较，相同为 $0$，不同为 $1$。例如：$3 \\bigoplus 5 = (011)_2 \\bigoplus (101)_2 = (110)_2 = 6$。**请注意，这是一个按位运算，不是一个逻辑运算**。\n### 样例 1 解释\n下图为传智国的地图。\n\n$\\forall t \\in \\{1, 2, 3, 4, 5\\}$，都不可能有 $\\mathrm{dis} _{t,1} \\bigoplus \\mathrm{dis}_{t, 2} = 4$，$\\mathrm{dis}_{t, 2} \\bigoplus \\mathrm{dis}_{t, 3} = 12$，于是输出 `No`；\n\n而取 $t = 5$，有 $\\mathrm{dis}_{t, 1} \\bigoplus \\mathrm{dis}_{t, 4} = 10$，于是输出 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ikzjfh3.png)\n### 数据规模与约定\n对于所有测试点，保证 $1 < n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 5 \\times 10^5$，$0 \\leq w_i < 2^{64}$。\n\n对于每次询问，保证 $1 \\leq a, b \\leq n$ 且 $a \\neq b$，$0 \\leq k < 2^{64}$。", "locale": "zh-CN"}}}
{"pid": "P8201", "type": "P", "difficulty": 5, "samples": [["5 3\n2 6 8 1 5\n1 2\n1 3\n2 4\n2 5\n1 2 4\n2 3 12\n2 3 10", "nO\nNo\nYeS"], ["5 10\n93 97 100 93 93\n2 1\n3 2\n4 3\n5 1\n5 2 93\n4 1 93\n3 2 100\n3 2 100\n2 3 9999998\n1 2 93\n2 3 97\n1 2 93\n2 3 97\n4 3 93", "no\nnO\nyEs\nyEs\nNo\nyEs\nyeS\nYES\nyES\nyes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形数据结构", "Special Judge", "O2优化", "最近公共祖先 LCA", "前缀和", "差分", "传智杯", "离线处理"], "title": "[传智杯 #4 决赛] [yLOI2021] 生活在树上（hard version）", "background": "**本题是 P8200 的较难版本，两道题目的解法略有不同。本题和 P8200 在题意上的区别在于本题给定树上的点权，而不是边权。**\n\n小智生活在「传智国」，这是一个有 $n$ 个城市的国家，各个城市由 $n-1$ 条道路相连。\n\n每个城市都有一个财富指数 $w_i$ ，我们定义，小智从城市 $a$ 走到城市 $b$ 的代价是 $\\mathrm{dis}_{a, b} = \\bigoplus \\limits_{u \\in \\mathrm{path}\\left(a, b\\right)} w_u$，其中 $\\bigoplus$ 表示**按位异或**（如果你不知道什么是**按位异或**，请参见题目下方的提示/说明），$\\mathrm{path}\\left(a,b\\right)$ 表示 $a$ 到 $b$ 的简单路径上的点集（包括 $a$ 和 $b$）。也即 $\\mathrm{dis}_{a, b}$ 表示将 $a$ 与 $b$ 的简单路径上所有点写作 $u_1, u_2, u_3, \\dots$ 后，求 $w_{u_1} \\bigoplus w_{u_2}\\bigoplus w_{u_3} \\dots$ 的结果。\n\n有一天，小智获得了去参加传智杯的机会，他在前往比赛地的路上想到了一个问题，但他好像不会做，于是他把这个题告诉了你。聪明的同学，你可以帮帮他吗？", "description": "小智说：「由于我们的国家只有 $n$ 个城市和 $n-1$ 条道路，那么我们的国家就相当于是一棵树。我在想，在我们的国家中，是否存在城市满足『到城市 $a$ 的代价和到城市 $b$ 的代价的异或等于 $k$』。好难哦，我想不出来，你能帮帮我吗？」\n\n也就是说，给定城市 $a, b$ 和整数 $k$，请你计算是否存在城市 $t$ 满足 $\\mathrm{dis}_{t, a} \\bigoplus \\mathrm{dis}_{t, b} = k$。", "inputFormat": "第一行有两个整数 $n$，$m$，表示国家的城市数和询问的个数。\n\n第二行有 $n$ 个整数 $w_i$，表示 $i$ 号城市的财富指数。\n\n接下来 $n-1$ 行，每行有两个整数 $x, y$，表示城市 $x$ 与城市 $y$ 有一条边相连。\n\n接下来 $m$ 行，每行有三个整数 $a, b, k$，表示小智从城市 $a$ 走到城市 $b$，$k$ 的含义与题目描述一致。", "outputFormat": "输出共 $m$ 行。\n\n对于第 $i$ 个询问，如果存在至少一个城市 $t$ 满足要求，则输出 `Yes`。\n\n如果不存在任何一个城市满足条件，则输出 `No`。\n\n输出字符串大小写不敏感，例如，`Yes`、`yES`、`YES`、`yes` 等都算作 `Yes`。", "hint": "### 相关概念解释\n「树」：树是一个有 $n$ 个结点和 $n-1$ 条边的无向简单连通图。\n\n「按位异或」：按位异或是一个二元运算，步骤是将两个数的二进制位按位比较，相同为 $0$，不同为 $1$ 。例如：$3 \\bigoplus 5 = (011)_2 \\bigoplus (101)_2 = (110)_2 = 6$。\n### 样例 1 解释\n下图为传智国的地图。\n\n$\\forall t \\in \\{1, 2, 3, 4, 5\\}$，都不可能有 $\\mathrm{dis} _{t,1} \\bigoplus \\mathrm{dis}_{t, 2} = 4$，$\\mathrm{dis}_{t, 2} \\bigoplus \\mathrm{dis}_{t, 3} = 12$，于是输出 `No`；\n\n而取 $t=4$，有 $\\mathrm{dis}_{t, 2} \\bigoplus \\mathrm{dis}_{t, 3} = 10$，于是输出 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d3phj9di.png)\n### 数据规模与约定\n对于所有测试点，保证 $1 < n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 5 \\times 10^5$，$0 \\leq w_i \\leq 1\\times 10^7$。\n\n对于每次询问，保证 $1 \\leq a,b \\leq n$ 且 $a \\neq b$，$0 \\leq k \\leq 1\\times 10^7$。\n### 提示\n- 请注意常数因子对程序效率造成的影响。\n- 对于两个 $x, y \\leq 10^7$，$x \\bigoplus y$ 可能大于 $10^7$，请特别注意这一点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] [yLOI2021] 生活在树上（hard version）", "background": "**本题是 P8200 的较难版本，两道题目的解法略有不同。本题和 P8200 在题意上的区别在于本题给定树上的点权，而不是边权。**\n\n小智生活在「传智国」，这是一个有 $n$ 个城市的国家，各个城市由 $n-1$ 条道路相连。\n\n每个城市都有一个财富指数 $w_i$ ，我们定义，小智从城市 $a$ 走到城市 $b$ 的代价是 $\\mathrm{dis}_{a, b} = \\bigoplus \\limits_{u \\in \\mathrm{path}\\left(a, b\\right)} w_u$，其中 $\\bigoplus$ 表示**按位异或**（如果你不知道什么是**按位异或**，请参见题目下方的提示/说明），$\\mathrm{path}\\left(a,b\\right)$ 表示 $a$ 到 $b$ 的简单路径上的点集（包括 $a$ 和 $b$）。也即 $\\mathrm{dis}_{a, b}$ 表示将 $a$ 与 $b$ 的简单路径上所有点写作 $u_1, u_2, u_3, \\dots$ 后，求 $w_{u_1} \\bigoplus w_{u_2}\\bigoplus w_{u_3} \\dots$ 的结果。\n\n有一天，小智获得了去参加传智杯的机会，他在前往比赛地的路上想到了一个问题，但他好像不会做，于是他把这个题告诉了你。聪明的同学，你可以帮帮他吗？", "description": "小智说：「由于我们的国家只有 $n$ 个城市和 $n-1$ 条道路，那么我们的国家就相当于是一棵树。我在想，在我们的国家中，是否存在城市满足『到城市 $a$ 的代价和到城市 $b$ 的代价的异或等于 $k$』。好难哦，我想不出来，你能帮帮我吗？」\n\n也就是说，给定城市 $a, b$ 和整数 $k$，请你计算是否存在城市 $t$ 满足 $\\mathrm{dis}_{t, a} \\bigoplus \\mathrm{dis}_{t, b} = k$。", "inputFormat": "第一行有两个整数 $n$，$m$，表示国家的城市数和询问的个数。\n\n第二行有 $n$ 个整数 $w_i$，表示 $i$ 号城市的财富指数。\n\n接下来 $n-1$ 行，每行有两个整数 $x, y$，表示城市 $x$ 与城市 $y$ 有一条边相连。\n\n接下来 $m$ 行，每行有三个整数 $a, b, k$，表示小智从城市 $a$ 走到城市 $b$，$k$ 的含义与题目描述一致。", "outputFormat": "输出共 $m$ 行。\n\n对于第 $i$ 个询问，如果存在至少一个城市 $t$ 满足要求，则输出 `Yes`。\n\n如果不存在任何一个城市满足条件，则输出 `No`。\n\n输出字符串大小写不敏感，例如，`Yes`、`yES`、`YES`、`yes` 等都算作 `Yes`。", "hint": "### 相关概念解释\n「树」：树是一个有 $n$ 个结点和 $n-1$ 条边的无向简单连通图。\n\n「按位异或」：按位异或是一个二元运算，步骤是将两个数的二进制位按位比较，相同为 $0$，不同为 $1$ 。例如：$3 \\bigoplus 5 = (011)_2 \\bigoplus (101)_2 = (110)_2 = 6$。\n### 样例 1 解释\n下图为传智国的地图。\n\n$\\forall t \\in \\{1, 2, 3, 4, 5\\}$，都不可能有 $\\mathrm{dis} _{t,1} \\bigoplus \\mathrm{dis}_{t, 2} = 4$，$\\mathrm{dis}_{t, 2} \\bigoplus \\mathrm{dis}_{t, 3} = 12$，于是输出 `No`；\n\n而取 $t=4$，有 $\\mathrm{dis}_{t, 2} \\bigoplus \\mathrm{dis}_{t, 3} = 10$，于是输出 `Yes`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d3phj9di.png)\n### 数据规模与约定\n对于所有测试点，保证 $1 < n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 5 \\times 10^5$，$0 \\leq w_i \\leq 1\\times 10^7$。\n\n对于每次询问，保证 $1 \\leq a,b \\leq n$ 且 $a \\neq b$，$0 \\leq k \\leq 1\\times 10^7$。\n### 提示\n- 请注意常数因子对程序效率造成的影响。\n- 对于两个 $x, y \\leq 10^7$，$x \\bigoplus y$ 可能大于 $10^7$，请特别注意这一点。", "locale": "zh-CN"}}}
{"pid": "P8202", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2\n1 3\n3 4\n", "108"], ["3 3\n1 2\n1 3\n", "12"], ["5 5\n1 2\n1 3\n2 4\n3 5\n", "1200"], ["5 5\n1 2\n1 3\n2 4\n2 5", "1140"], ["7 8\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n", "929376"], ["6 6\n1 2\n1 3\n3 4\n4 5\n3 6", "18750"], ["10 20\n1 2\n1 3\n2 4\n2 5\n2 6\n2 7\n3 8\n5 9\n9 10\n", "688946281"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP", "容斥原理", "传智杯"], "title": "[传智杯 #4 决赛] [yLOI2021] 染色", "background": "传智杯 2021 决赛 G 题。", "description": "传智专修学院的老师给小智布置了一项任务。\n\n老师给了小智一张纸，上面画着一棵有 $n$ 个节点的树（如果你不知道什么是树，可以参考上一题对此的解释）。老师还给了小智 $m$ 支彩色笔，每支笔的颜色都是不同的。老师想要让小智用这 $m$ 种颜色给树的节点涂色，使得这棵树满足如下约束：\n\n1. 每个节点都被涂上了这 $m$ 个颜色之一的**一种**颜色。\n2. 相邻两个节点（若存在一条边直接连接 $u$ 和 $v$，则我们称 $u,v$ 相邻）的颜色是不同的。\n3. 任何一种颜色被使用的次数都不能超过 $\\lfloor\\frac{n}{3}\\rfloor + 1$。\n\n需要指出的是，虽然每个节点都必须被涂上一种颜色，但是每个颜色并不必须被使用。\n\n如此简单的任务难不倒小智，所以小智提出了一个更困难的问题：他想知道一共有多少种染色的方案满足老师的要求。小智不会解答这个问题，所以来求助你，请你帮他解决他的问题。\n\n因为方案数可能非常大，你只需要输出这个方案数除以 $998,244,353$ 的余数。两种染色方案不同当且仅当存在一个节点 $u$，使得 $u$ 在两种方案种被染上的颜色不同。", "inputFormat": "第一行是两个整数，依次表示树的节点数 $n$ 和颜色的个数 $m$。  \n接下来 $(n - 1)$ 行，每行两个整数 $u, v$，表示树上有一条连接 $u, v$ 的边。", "outputFormat": "输出一行一个整数，表示方案数除以 $998,244,353$ 的余数。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq u, v \\leq n\\leq 100$，$n \\leq m \\leq 10^6$，保证给出的是一棵树。\n\n### 提示\n\n**请注意常数因子对程序效率造成的影响**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] [yLOI2021] 染色", "background": "传智杯 2021 决赛 G 题。", "description": "传智专修学院的老师给小智布置了一项任务。\n\n老师给了小智一张纸，上面画着一棵有 $n$ 个节点的树（如果你不知道什么是树，可以参考上一题对此的解释）。老师还给了小智 $m$ 支彩色笔，每支笔的颜色都是不同的。老师想要让小智用这 $m$ 种颜色给树的节点涂色，使得这棵树满足如下约束：\n\n1. 每个节点都被涂上了这 $m$ 个颜色之一的**一种**颜色。\n2. 相邻两个节点（若存在一条边直接连接 $u$ 和 $v$，则我们称 $u,v$ 相邻）的颜色是不同的。\n3. 任何一种颜色被使用的次数都不能超过 $\\lfloor\\frac{n}{3}\\rfloor + 1$。\n\n需要指出的是，虽然每个节点都必须被涂上一种颜色，但是每个颜色并不必须被使用。\n\n如此简单的任务难不倒小智，所以小智提出了一个更困难的问题：他想知道一共有多少种染色的方案满足老师的要求。小智不会解答这个问题，所以来求助你，请你帮他解决他的问题。\n\n因为方案数可能非常大，你只需要输出这个方案数除以 $998,244,353$ 的余数。两种染色方案不同当且仅当存在一个节点 $u$，使得 $u$ 在两种方案种被染上的颜色不同。", "inputFormat": "第一行是两个整数，依次表示树的节点数 $n$ 和颜色的个数 $m$。  \n接下来 $(n - 1)$ 行，每行两个整数 $u, v$，表示树上有一条连接 $u, v$ 的边。", "outputFormat": "输出一行一个整数，表示方案数除以 $998,244,353$ 的余数。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq u, v \\leq n\\leq 100$，$n \\leq m \\leq 10^6$，保证给出的是一棵树。\n\n### 提示\n\n**请注意常数因子对程序效率造成的影响**。", "locale": "zh-CN"}}}
{"pid": "P8203", "type": "P", "difficulty": 7, "samples": [["3 2 1\na\nb\nc\nab\nbac\n1 2\n", "2"], ["3 3 3\naaba\nbaba\naba\nababa\naabab\nbabaa\n1 2\n1 3\n2 3\n", "1\n2\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "虚树", "AC 自动机", "根号分治", "传智杯"], "title": "[传智杯 #4 决赛] DDOSvoid 的馈赠", "background": "", "description": "小智马上就要 AK（All killed，指使本场比赛的全部题目 AC）本场“传智杯”全国大学生 IT 技能大赛（决赛）然后离场了。临走前，DDOSvoid 打算给小智 $n$ 个字符串 $s_1, s_2, \\dots, s_n$ 作为纪念。在本题中，我们将这 $n$ 个字符串称作「模板串」。\n\n小智本身有 $m$ 个字符串 $t_1, t_2, \\dots t_m$。在本题中，我们将这 $m$ 个字符串称为「查询串」。\n\nDDOSvoid 的礼物不是无条件的，他有 $q$ 个问题，每个问题给定两个参数 $x, y$，要求小智回答他：一共有多少个模板串 $s_i$，满足 $s_i$ 既是 $t_x$ 的子串，也是 $t_y$ 的子串？\n\n只有回答对这 $q$ 个问题，小智才能得到 DDOSvoid 馈赠的礼物。请你帮帮小智，回他 DDOSvoid 的问题。\n\n我们称一个字符串 $t$ 是 $s$ 的子串，当且仅当将 $s$ 的开头若干个（可以为 0 个）连续字符和结尾若干个（可以为 0 个）连续字符删去后，剩下的字符串和 $t$ 相同。例如，我们称 `ab` 是 `abc` 的子串，但 `ac` 不是 `abc` 的子串。", "inputFormat": "第一行有三个整数，依次表示模板串个数 $n$，查询串个数 $m$，以及询问的个数 $q$。  \n接下来 $n$ 行，每行一个字符串，依次表示模板串 $s_1,s_2, \\dots s_n$。  \n接下来 $m$ 行，每行一个字符串，依次表示查询串 $t_1, t_2, \\dots t_m$。  \n接下来 $q$ 行，每行两个整数 $x, y$，表示一个询问。", "outputFormat": "对于每次询问，输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部测试点，保证 $1\\leq n,m,q,|s_i|,|t_i| \\leq 10^5$，且模板串的长度之和、查询串的长度之和均不超过 $10^5$，即 $\\sum\\limits_{i = 1}^n |s_i|,\\sum\\limits_{i = 1}^m|t_i| \\leq 10^5$，其中 $|x|$ 表示字符串 $x$ 的长度。保证输入的字符串只含有小写字母，$1 \\leq x\\neq y \\leq m$。\n\n### 提示\n\n**请注意常数因子对程序效率造成的影响**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[传智杯 #4 决赛] DDOSvoid 的馈赠", "background": "", "description": "小智马上就要 AK（All killed，指使本场比赛的全部题目 AC）本场“传智杯”全国大学生 IT 技能大赛（决赛）然后离场了。临走前，DDOSvoid 打算给小智 $n$ 个字符串 $s_1, s_2, \\dots, s_n$ 作为纪念。在本题中，我们将这 $n$ 个字符串称作「模板串」。\n\n小智本身有 $m$ 个字符串 $t_1, t_2, \\dots t_m$。在本题中，我们将这 $m$ 个字符串称为「查询串」。\n\nDDOSvoid 的礼物不是无条件的，他有 $q$ 个问题，每个问题给定两个参数 $x, y$，要求小智回答他：一共有多少个模板串 $s_i$，满足 $s_i$ 既是 $t_x$ 的子串，也是 $t_y$ 的子串？\n\n只有回答对这 $q$ 个问题，小智才能得到 DDOSvoid 馈赠的礼物。请你帮帮小智，回他 DDOSvoid 的问题。\n\n我们称一个字符串 $t$ 是 $s$ 的子串，当且仅当将 $s$ 的开头若干个（可以为 0 个）连续字符和结尾若干个（可以为 0 个）连续字符删去后，剩下的字符串和 $t$ 相同。例如，我们称 `ab` 是 `abc` 的子串，但 `ac` 不是 `abc` 的子串。", "inputFormat": "第一行有三个整数，依次表示模板串个数 $n$，查询串个数 $m$，以及询问的个数 $q$。  \n接下来 $n$ 行，每行一个字符串，依次表示模板串 $s_1,s_2, \\dots s_n$。  \n接下来 $m$ 行，每行一个字符串，依次表示查询串 $t_1, t_2, \\dots t_m$。  \n接下来 $q$ 行，每行两个整数 $x, y$，表示一个询问。", "outputFormat": "对于每次询问，输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部测试点，保证 $1\\leq n,m,q,|s_i|,|t_i| \\leq 10^5$，且模板串的长度之和、查询串的长度之和均不超过 $10^5$，即 $\\sum\\limits_{i = 1}^n |s_i|,\\sum\\limits_{i = 1}^m|t_i| \\leq 10^5$，其中 $|x|$ 表示字符串 $x$ 的长度。保证输入的字符串只含有小写字母，$1 \\leq x\\neq y \\leq m$。\n\n### 提示\n\n**请注意常数因子对程序效率造成的影响**。", "locale": "zh-CN"}}}
{"pid": "P8204", "type": "P", "difficulty": 6, "samples": [["8 4\n1 1 1 2 2 2 5\n2 1\n1 1\n6 0\n1 2", "16\n1 2 1\n3 1\n2\n1 6 0\n3 3\n2\n1 1 1\n1 1 1\n3 2\n2\n1 1 2\n1 1 2\n3 4\n2\n2\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2005] tdnmo", "background": "", "description": "给定一棵 $n$ 个顶点的有根树，顶点编号为 $1,2,\\dots,n$，$1$ 号顶点为根。定义有向邻域 $N(x,y)$ 为以 $x$ 为根的子树中，距离 $x$ 小于 $y$ 的顶点构成的集合，其中 $1\\le x\\le n,\\;0\\le y\\le n$，$x,y$ 为整数。\n\n给出 $m$ 个有向邻域 $N(x_i,y_i)_{i=1}^m$，你可以从 $N(1,0)$ 出发，经过不超过 $5m$ 次操作到达每个给出的有向邻域，可以使用的操作有：\n\n1. 从有向邻域 $N(x,y)$ 移动到 $N(x',y')$，满足 $N(x,y)\\subseteq N(x',y')$；\n2. 撤销一次 $1$ 操作，即回到之前最后一次未撤销的 $1$ 操作前的位置，并将这次 $1$ 操作标为已撤销；\n3. 声明当前到达了有向邻域 $N(x_i,y_i)$，满足当前所在邻域是 $N(x_i,y_i)$；\n\n其中操作1的代价为移动前后两个有向邻域的元素个数之差，操作2和3不计代价，要求操作2执行时必须存在未撤销的操作1，操作3必须对每个 $1\\le i\\le m$ 恰好各执行一次。\n\n你需要保证操作的总代价不超过 $2.5\\times{10}^{9}$。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来一行，共 $n-1$ 个整数，依次表示编号为 $2,3,\\dots,n$ 的顶点的父亲 $f_2,\\dots,f_n$，保证父亲的编号小于孩子的编号；\n\n接下来的 $m$ 行中，第 $i$ 行两个整数 $x_i\\ y_i$，表示给出的每个有向邻域。", "outputFormat": "第一行一个整数 $m'$，表示你进行的操作次数；\n\n接下来 $m'$ 行，依次表示每个操作；\n\n操作 $1$ 表示为 $1\\ x'\\ y'$；\n\n操作 $2$ 表示为 $2$；\n\n操作 $3$ 表示为 $3\\ i$。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078，SPJ：nalemy\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$1\\le x_i\\le n,\\;0\\le y_i\\le n$，所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] tdnmo", "background": "", "description": "给定一棵 $n$ 个顶点的有根树，顶点编号为 $1,2,\\dots,n$，$1$ 号顶点为根。定义有向邻域 $N(x,y)$ 为以 $x$ 为根的子树中，距离 $x$ 小于 $y$ 的顶点构成的集合，其中 $1\\le x\\le n,\\;0\\le y\\le n$，$x,y$ 为整数。\n\n给出 $m$ 个有向邻域 $N(x_i,y_i)_{i=1}^m$，你可以从 $N(1,0)$ 出发，经过不超过 $5m$ 次操作到达每个给出的有向邻域，可以使用的操作有：\n\n1. 从有向邻域 $N(x,y)$ 移动到 $N(x',y')$，满足 $N(x,y)\\subseteq N(x',y')$；\n2. 撤销一次 $1$ 操作，即回到之前最后一次未撤销的 $1$ 操作前的位置，并将这次 $1$ 操作标为已撤销；\n3. 声明当前到达了有向邻域 $N(x_i,y_i)$，满足当前所在邻域是 $N(x_i,y_i)$；\n\n其中操作1的代价为移动前后两个有向邻域的元素个数之差，操作2和3不计代价，要求操作2执行时必须存在未撤销的操作1，操作3必须对每个 $1\\le i\\le m$ 恰好各执行一次。\n\n你需要保证操作的总代价不超过 $2.5\\times{10}^{9}$。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来一行，共 $n-1$ 个整数，依次表示编号为 $2,3,\\dots,n$ 的顶点的父亲 $f_2,\\dots,f_n$，保证父亲的编号小于孩子的编号；\n\n接下来的 $m$ 行中，第 $i$ 行两个整数 $x_i\\ y_i$，表示给出的每个有向邻域。", "outputFormat": "第一行一个整数 $m'$，表示你进行的操作次数；\n\n接下来 $m'$ 行，依次表示每个操作；\n\n操作 $1$ 表示为 $1\\ x'\\ y'$；\n\n操作 $2$ 表示为 $2$；\n\n操作 $3$ 表示为 $3\\ i$。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078，SPJ：nalemy\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$1\\le x_i\\le n,\\;0\\le y_i\\le n$，所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P8205", "type": "P", "difficulty": 7, "samples": [["5\n1 1\n2 2\n3 4\n1 3\n3\n1 1\n2 1 3\n3 3 4 5", "0\n1\n3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "O2优化", "Ynoi"], "title": "[Ynoi2005] vti", "background": "", "description": "给定一棵包含 $n$ 个结点的树，边的编号从 $1$ 到 $n-1$，第 $i$ 条边有一个权值 $b_i$，树的根节点为 $1$ 号节点；\n\n定义两条边 $x,y$ 构成祖先关系，当且仅当构成边 $x$ 的两个节点中深度最深的一个，是构成边 $y$ 的两个节点中深度最深的一个的祖先。\n\n共 $m$ 次询问，第 $i$ 次询问给出 $t_i$ 个可能相同的点，考虑这些点两两之间简单路径经过的边的并集，问无序地选出两条编号不同的边 $x,y$，使得 $x$ 为 $y$ 祖先，且 $b_x<b_y$ 的方案数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $a_i,b_i$，表示 $i+1$ 和 $a_i$ 之间有一条边，权值为 $b_i$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行 $t_i+1$ 个整数，第一个整数为 $t_i$，之后 $t_i$ 个整数表示这次询问的点的集合。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le m\\le 10^6$，$1\\le a_i\\le i-1$，$1\\le b_i\\le n$，$1\\le t_i$，$t_1+\\dots+t_m\\le 10^6$，以上所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] vti", "background": "", "description": "给定一棵包含 $n$ 个结点的树，边的编号从 $1$ 到 $n-1$，第 $i$ 条边有一个权值 $b_i$，树的根节点为 $1$ 号节点；\n\n定义两条边 $x,y$ 构成祖先关系，当且仅当构成边 $x$ 的两个节点中深度最深的一个，是构成边 $y$ 的两个节点中深度最深的一个的祖先。\n\n共 $m$ 次询问，第 $i$ 次询问给出 $t_i$ 个可能相同的点，考虑这些点两两之间简单路径经过的边的并集，问无序地选出两条编号不同的边 $x,y$，使得 $x$ 为 $y$ 祖先，且 $b_x<b_y$ 的方案数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $a_i,b_i$，表示 $i+1$ 和 $a_i$ 之间有一条边，权值为 $b_i$。\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行 $t_i+1$ 个整数，第一个整数为 $t_i$，之后 $t_i$ 个整数表示这次询问的点的集合。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le m\\le 10^6$，$1\\le a_i\\le i-1$，$1\\le b_i\\le n$，$1\\le t_i$，$t_1+\\dots+t_m\\le 10^6$，以上所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P8207", "type": "P", "difficulty": 5, "samples": [["3 12", "126"], ["6022 14076", "66140507445"], ["13063 77883", "3692727018161"], ["325735 425533", "1483175252352926"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "图论建模", "生成树", "THUPC"], "title": "[THUPC 2022 初赛] 最小公倍树", "background": "听说有人嫌题面描述都太长了。", "description": "对于任意 $V\\subset\\mathbb{N}^*$，$|V|<+\\infty$，构造一张无向完全图 $G=(V,E)$，其中 $(u, v)$ 的边权为 $u,v$ 的最小公倍数 $\\mathrm{lcm}(u, v)$。称 $G$ 的最小生成树为 $V$ 的最小公倍树（LCT, Lowest Common Tree）。\n\n现在给出 $L, R$，请你求出 $V={L, L+1, \\cdots, R}$ 的最小公倍树 $LCT(V)$。", "inputFormat": "输入仅一行，包括两个正整数 $L, R$。", "outputFormat": "输出一个正整数，表示 $LCT(V)$ 的边权和。", "hint": "【样例解释】\n\n其中一种最小公倍树上的边为 $(3, 4), (3, 5), (3, 6), (3, 7), (4, 8), (3, 9), (5, 10), (3, 11), (3, 12)$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，保证 $1\\le L\\le R\\le 10^6$，且 $R-L\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 最小公倍树", "background": "听说有人嫌题面描述都太长了。", "description": "对于任意 $V\\subset\\mathbb{N}^*$，$|V|<+\\infty$，构造一张无向完全图 $G=(V,E)$，其中 $(u, v)$ 的边权为 $u,v$ 的最小公倍数 $\\mathrm{lcm}(u, v)$。称 $G$ 的最小生成树为 $V$ 的最小公倍树（LCT, Lowest Common Tree）。\n\n现在给出 $L, R$，请你求出 $V={L, L+1, \\cdots, R}$ 的最小公倍树 $LCT(V)$。", "inputFormat": "输入仅一行，包括两个正整数 $L, R$。", "outputFormat": "输出一个正整数，表示 $LCT(V)$ 的边权和。", "hint": "【样例解释】\n\n其中一种最小公倍树上的边为 $(3, 4), (3, 5), (3, 6), (3, 7), (4, 8), (3, 9), (5, 10), (3, 11), (3, 12)$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，保证 $1\\le L\\le R\\le 10^6$，且 $R-L\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8208", "type": "P", "difficulty": 5, "samples": [["5 1 2\n3 2 3 4\n2 1 5\n2 1 5\n2 1 5\n3 2 3 4", "499122178"], ["7 1 4\n6 2 3 4 5 6 7\n6 1 3 4 5 6 7\n6 1 2 4 5 6 7\n6 1 2 3 5 6 7\n6 1 2 3 4 6 7\n6 1 2 3 4 5 7\n6 1 2 3 4 5 6", "274979351"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "O2优化", "期望", "THUPC"], "title": "[THUPC 2022 初赛] 骰子旅行", "background": "", "description": "在乐队 f 开巡演之前，按照惯例是要先组织乐队成员进行骰子旅行放松身心的。一次骰子旅行包括 $N$ 个地点，这些地点分别标号为 $1, 2, \\cdots, N$。乐队成员们事先约好在 $s_0$ 处集合；而到了骰子旅行当天，大家都来到了集合地点 $s_0$，骰子旅行就算正式开始了。\n\n骰子旅行的一大乐趣就是由骰子决定旅行的下一个目的地。当然，这个骰子不一定非得是六面的。我们可以认为，如果当前乐队成员们位于地点 $i$，那么下一个目的地会等概率地从 $m_i$ 个互不相同的候选地点中产生，这些候选地点分别是 $l_{i, 1}, l_{i, 2}, \\cdots, l_{i, m_i}$。我们记第 $t$ 次投掷的结果是 $s_t$，那么第 $(t+1)$ 次将会前往 $s_t$ 处掷骰子。第 1 次投掷在起点 $s_0$ 处进行；而由于乐队之后还需要为了巡演排练，事先约定无论前往了哪些地点，投掷完第 $T$ 次骰子，前往 $s_T$ 后骰子旅行都得结束。\n\n当然，享受 $s_0, s_1, \\cdots, s_T$ 这些景点也是骰子旅行的一大乐趣。无论是否之前来过，每次到一个地点 $s_t$，乐队成员们都会尽情地浏览美景，品尝美食。只是如果之前来过 $s_t$，负责掷骰子的键盘手 S 在掷这第 $(t+1)$ 次骰子之前一定会说：“上次来到 $s_t$ 仿佛还是上一次 $t'$，上一次在这里掷出了 $s_{t'+1}$，不知道这一次会掷出什么结果。”鼓手 Y 特别喜欢废话梗，所以每次 S 说这句话时，他都会把 $s_{t'+1}$ 记下来。特别地，如果 $s_T$ 是之前经过的地点，那么 S 会说：“上次来到 $s_t$ 仿佛还是上一次 $t'$，上一次在这里掷出了 $s_{t'+1}$，不过这一次就不投掷了，因为骰子旅行到这里就要告一段落了。”当然，Y 也会把这个 $s_{t'+1}$ 记下来。\n\n作为这次骰子旅行的总结，Y 会把所有记录下来的 $s_{t'+1}$ 加起来，作为 S 的废话指数。\n\nf 的下一次巡演马上就要开始了，于是 S 又盘算着带大家去参加骰子旅行。听说你是 f 的粉丝，S 找到了你，希望你能帮他算一下他这次骰子旅行的废话指数的期望值。", "inputFormat": "输入的第一行包括三个正整数 $N, s_0, T$，分别表示可能涉及地点的个数，骰子旅行的起点和骰子旅行中投掷骰子的次数。\n\n接下来 $N$ 行，第 $i\\ (1\\le i\\le N)$ 行先输入一个正整数 $m_i$，表示地点 $i$ 的下一个目的地的候选地点数；接着输入 $m_i$ 个正整数，表示这 $m_i$ 个地点 $l_{i, 1}, l_{i, 2}, \\cdots, l_{i, m_i}$。保证对于任意 $i$，$m_i$ 个输入的地点互不相同。", "outputFormat": "输出一个数表示废话指数的期望。假设废话指数的期望化为最简分式后的形式为 $p/q$（即其中 $p, q$ 互质），请输出 $x$ 使得 $qx\\equiv p \\pmod{998,244,353}$ 且 $0\\le x<998,244,353$。可以证明，在本题数据范围下，$x$ 存在且唯一。", "hint": "【样例解释 1】\n\n对答案有贡献的方案为：从点 $1$ 出发走到 $2, 3, 4$ 中的任意一个点并返回点 $1$。对于某个点 $i (i=2, 3, 4)$，走到点 $i$ 并返回点 $1$ 的概率为 $1/6$，而贡献为 $i$，故期望为 \n\n$$\\frac{1}{6} \\times (2+3+4) = \\frac{3}{2} .$$\n\n由 $499122178 \\times 2 = 998244356 \\equiv 3 \\pmod {998244353}$ 可知 $3/2$ 在模 $998,244,353$ 意义下为 $499,122,178$，所以正确输出为 $499,122,178$。\n\n【样例解释 2】\n\n转换前的答案为 $1625/432\\approx 3.761574$，而 $432\\times 274979351 = 118791079632 \\equiv 1625 \\pmod{998244353}$，所以模意义下的答案为 $274979351$。\n\n【样例 3】\n\n见附件。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 100$，$1\\le T\\le 100$，$1\\le s_0\\le N$，$1\\le m_i\\le N$，$\\sum_{i=1}^N m_i\\le 5000$，$1\\le l_{i, j}\\le N$，且 $\\forall 1\\le i\\le N, \\forall 1\\le j_1<j_2\\le m_i, l_{i, j_1}\\ne l_{i, j_2}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 骰子旅行", "background": "", "description": "在乐队 f 开巡演之前，按照惯例是要先组织乐队成员进行骰子旅行放松身心的。一次骰子旅行包括 $N$ 个地点，这些地点分别标号为 $1, 2, \\cdots, N$。乐队成员们事先约好在 $s_0$ 处集合；而到了骰子旅行当天，大家都来到了集合地点 $s_0$，骰子旅行就算正式开始了。\n\n骰子旅行的一大乐趣就是由骰子决定旅行的下一个目的地。当然，这个骰子不一定非得是六面的。我们可以认为，如果当前乐队成员们位于地点 $i$，那么下一个目的地会等概率地从 $m_i$ 个互不相同的候选地点中产生，这些候选地点分别是 $l_{i, 1}, l_{i, 2}, \\cdots, l_{i, m_i}$。我们记第 $t$ 次投掷的结果是 $s_t$，那么第 $(t+1)$ 次将会前往 $s_t$ 处掷骰子。第 1 次投掷在起点 $s_0$ 处进行；而由于乐队之后还需要为了巡演排练，事先约定无论前往了哪些地点，投掷完第 $T$ 次骰子，前往 $s_T$ 后骰子旅行都得结束。\n\n当然，享受 $s_0, s_1, \\cdots, s_T$ 这些景点也是骰子旅行的一大乐趣。无论是否之前来过，每次到一个地点 $s_t$，乐队成员们都会尽情地浏览美景，品尝美食。只是如果之前来过 $s_t$，负责掷骰子的键盘手 S 在掷这第 $(t+1)$ 次骰子之前一定会说：“上次来到 $s_t$ 仿佛还是上一次 $t'$，上一次在这里掷出了 $s_{t'+1}$，不知道这一次会掷出什么结果。”鼓手 Y 特别喜欢废话梗，所以每次 S 说这句话时，他都会把 $s_{t'+1}$ 记下来。特别地，如果 $s_T$ 是之前经过的地点，那么 S 会说：“上次来到 $s_t$ 仿佛还是上一次 $t'$，上一次在这里掷出了 $s_{t'+1}$，不过这一次就不投掷了，因为骰子旅行到这里就要告一段落了。”当然，Y 也会把这个 $s_{t'+1}$ 记下来。\n\n作为这次骰子旅行的总结，Y 会把所有记录下来的 $s_{t'+1}$ 加起来，作为 S 的废话指数。\n\nf 的下一次巡演马上就要开始了，于是 S 又盘算着带大家去参加骰子旅行。听说你是 f 的粉丝，S 找到了你，希望你能帮他算一下他这次骰子旅行的废话指数的期望值。", "inputFormat": "输入的第一行包括三个正整数 $N, s_0, T$，分别表示可能涉及地点的个数，骰子旅行的起点和骰子旅行中投掷骰子的次数。\n\n接下来 $N$ 行，第 $i\\ (1\\le i\\le N)$ 行先输入一个正整数 $m_i$，表示地点 $i$ 的下一个目的地的候选地点数；接着输入 $m_i$ 个正整数，表示这 $m_i$ 个地点 $l_{i, 1}, l_{i, 2}, \\cdots, l_{i, m_i}$。保证对于任意 $i$，$m_i$ 个输入的地点互不相同。", "outputFormat": "输出一个数表示废话指数的期望。假设废话指数的期望化为最简分式后的形式为 $p/q$（即其中 $p, q$ 互质），请输出 $x$ 使得 $qx\\equiv p \\pmod{998,244,353}$ 且 $0\\le x<998,244,353$。可以证明，在本题数据范围下，$x$ 存在且唯一。", "hint": "【样例解释 1】\n\n对答案有贡献的方案为：从点 $1$ 出发走到 $2, 3, 4$ 中的任意一个点并返回点 $1$。对于某个点 $i (i=2, 3, 4)$，走到点 $i$ 并返回点 $1$ 的概率为 $1/6$，而贡献为 $i$，故期望为 \n\n$$\\frac{1}{6} \\times (2+3+4) = \\frac{3}{2} .$$\n\n由 $499122178 \\times 2 = 998244356 \\equiv 3 \\pmod {998244353}$ 可知 $3/2$ 在模 $998,244,353$ 意义下为 $499,122,178$，所以正确输出为 $499,122,178$。\n\n【样例解释 2】\n\n转换前的答案为 $1625/432\\approx 3.761574$，而 $432\\times 274979351 = 118791079632 \\equiv 1625 \\pmod{998244353}$，所以模意义下的答案为 $274979351$。\n\n【样例 3】\n\n见附件。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 100$，$1\\le T\\le 100$，$1\\le s_0\\le N$，$1\\le m_i\\le N$，$\\sum_{i=1}^N m_i\\le 5000$，$1\\le l_{i, j}\\le N$，且 $\\forall 1\\le i\\le N, \\forall 1\\le j_1<j_2\\le m_i, l_{i, j_1}\\ne l_{i, j_2}$。", "locale": "zh-CN"}}}
{"pid": "P8209", "type": "P", "difficulty": 6, "samples": [["2 1 1\n1 10 100\n1 2 3", "12.0"], ["3 1 3\n1 2 3\n5 6 12\n1 5 6", "14.0"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 初赛] 赛程制定", "background": "", "description": "Lewis 热爱打拳，因此他组建了一家拳击俱乐部，希望通过举办表演赛卖票以筹集自己训练的资金，但是，很遗憾，Lewis 人缘并不好，因此这个俱乐部只有两个成员——Lewis 和他的好基友 Valtteri，而观众们很快就厌倦了每晚都是他们两人出场的表演赛，票卖不出去了，拳击俱乐部濒临倒闭。穷则思变，Lewis 决定通过请外援的方式，尝试拯救自己的俱乐部。\n\n通过支票攻势，Lewis 很快就请到了两个拳坛明星——Max 和 Checo，他们将作为飞行嘉宾加入 Lewis 的俱乐部。在接下来的一个赛季里，Lewis 总共会安排 $n$ $(1 \\le n \\le 2*10^5)$ 场比赛，每场比赛会从现有的4个成员中选出2人比赛，对于第 $i$ $(1 \\le i \\le n)$ 场比赛，如果是 Lewis 和 Valtteri 的比赛，只能卖出 $a_{i}$ 元的门票，如果是他们中一人和一个明星的比赛，能卖出 $b_i$ 元的门票，如果是两个明星 Max 和 Checo 之间的比赛，能卖出 $c_i$ 元的门票。观众们喜欢看明星之间的高水平比赛，而不是 Lewis 和 Valtteri 的菜鸡互啄，因此有 $1 \\le a_{i} < b_{i} < c_{i} \\le 10^9$ 。除此之外，安排比赛时还有如下要求——\n\n因为明星都是日理万机的，他们只同意分别在Lewis的俱乐部停留最多 $t_m, t_c$ 场比赛的时间。设Max出席的第一场比赛是第 $p_m$ 场，最后一场是 $q_{m}$ 场，Checo出席的第一场比赛是第 $p_c$ 场，最后一场是 $q_c$ 场，则需要满足 $q_m - p_m +1 \\le t_m$ 且 $q_c - p_c +1 \\le t_c$ ；\nLewis 深知自己不会是两个明星的对手，他不会愿意自己被打得鼻青脸肿直接 KO，因此，他不会安排自己与两位明星的比赛（言下之意，挨打的工作就被 Lewis 偷偷安排给了自己的好基友 Valterri，让我们为可怜的工具人 Valterri 默哀）；\n同时，Lewis 希望最大化自己的总收入，但是，他不太聪明，因此，如果一种方案满足以下条件，他就认为此方案满足”收入最大“——\n\n定义 (“Lewis 的最优方案”)：对于一种方案，可以看作一个长度为 $2n$ 的序列，序列的第 $(2i-1)$ 和 $2i$ 项为第 $i$ 场比赛的对阵双方，如果通过修改序列的任意 $1$ 个位置，都无法得到一个收入严格大于当前收入的合法方案，则称此方案为“Lewis 的最优方案”。\n\n聪明的你很快就发现了，“Lewis 的最优方案”不一定能最大化总收入且可能不唯一。已知 Lewis 会从所有“Lewis 的最优方案”（两个方案相同，当且仅当每一天的对阵均相同，注意，Max vs Valtteri 和 Checo vs Valtteri 虽然卖出门票相当，但视为两种不同的方案）等概率随机选一个方案执行，那么，请问在 Lewis 可能最终选择的所有方案中，门票收入的中位数是多少呢？（答案保留一位小数输出）", "inputFormat": "第 $1$ 行：3个正整数 $n,t_m, t_c$ ，意义见题面；\n\n接下来 $n$ 行：每行3个正整数 $a_i, b_i, c_i$ 表示三种情况下卖出的门票价格。", "outputFormat": "一行一个正整数表示在 Lewis 最终选择的所有方案中，门票收入的中位数。", "hint": "【样例解释】\n\nLewis的“收入最大方案”总共有以下 $4$ 种：\n\n- Max vs Checo, Lewis vs Valtteri，门票收入为 $100+1=101$；\n- Valtteri vs Max, Valtteri vs Checo，门票收入为 $10+2=12$；\n- Valtteri vs Checo, Valtteri vs Max，门票收入为 $10+2=12$；\n- Lewis vs Valterri, Max vs Checo，门票收入为 $1+3=4$。\n\n中位数为 $\\frac{12+12}{2} = 12$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n, t_m, t_c \\le 2*10^5$ , $1 \\le a_{i} < b_{i} < c_{i} \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 赛程制定", "background": "", "description": "Lewis 热爱打拳，因此他组建了一家拳击俱乐部，希望通过举办表演赛卖票以筹集自己训练的资金，但是，很遗憾，Lewis 人缘并不好，因此这个俱乐部只有两个成员——Lewis 和他的好基友 Valtteri，而观众们很快就厌倦了每晚都是他们两人出场的表演赛，票卖不出去了，拳击俱乐部濒临倒闭。穷则思变，Lewis 决定通过请外援的方式，尝试拯救自己的俱乐部。\n\n通过支票攻势，Lewis 很快就请到了两个拳坛明星——Max 和 Checo，他们将作为飞行嘉宾加入 Lewis 的俱乐部。在接下来的一个赛季里，Lewis 总共会安排 $n$ $(1 \\le n \\le 2*10^5)$ 场比赛，每场比赛会从现有的4个成员中选出2人比赛，对于第 $i$ $(1 \\le i \\le n)$ 场比赛，如果是 Lewis 和 Valtteri 的比赛，只能卖出 $a_{i}$ 元的门票，如果是他们中一人和一个明星的比赛，能卖出 $b_i$ 元的门票，如果是两个明星 Max 和 Checo 之间的比赛，能卖出 $c_i$ 元的门票。观众们喜欢看明星之间的高水平比赛，而不是 Lewis 和 Valtteri 的菜鸡互啄，因此有 $1 \\le a_{i} < b_{i} < c_{i} \\le 10^9$ 。除此之外，安排比赛时还有如下要求——\n\n因为明星都是日理万机的，他们只同意分别在Lewis的俱乐部停留最多 $t_m, t_c$ 场比赛的时间。设Max出席的第一场比赛是第 $p_m$ 场，最后一场是 $q_{m}$ 场，Checo出席的第一场比赛是第 $p_c$ 场，最后一场是 $q_c$ 场，则需要满足 $q_m - p_m +1 \\le t_m$ 且 $q_c - p_c +1 \\le t_c$ ；\nLewis 深知自己不会是两个明星的对手，他不会愿意自己被打得鼻青脸肿直接 KO，因此，他不会安排自己与两位明星的比赛（言下之意，挨打的工作就被 Lewis 偷偷安排给了自己的好基友 Valterri，让我们为可怜的工具人 Valterri 默哀）；\n同时，Lewis 希望最大化自己的总收入，但是，他不太聪明，因此，如果一种方案满足以下条件，他就认为此方案满足”收入最大“——\n\n定义 (“Lewis 的最优方案”)：对于一种方案，可以看作一个长度为 $2n$ 的序列，序列的第 $(2i-1)$ 和 $2i$ 项为第 $i$ 场比赛的对阵双方，如果通过修改序列的任意 $1$ 个位置，都无法得到一个收入严格大于当前收入的合法方案，则称此方案为“Lewis 的最优方案”。\n\n聪明的你很快就发现了，“Lewis 的最优方案”不一定能最大化总收入且可能不唯一。已知 Lewis 会从所有“Lewis 的最优方案”（两个方案相同，当且仅当每一天的对阵均相同，注意，Max vs Valtteri 和 Checo vs Valtteri 虽然卖出门票相当，但视为两种不同的方案）等概率随机选一个方案执行，那么，请问在 Lewis 可能最终选择的所有方案中，门票收入的中位数是多少呢？（答案保留一位小数输出）", "inputFormat": "第 $1$ 行：3个正整数 $n,t_m, t_c$ ，意义见题面；\n\n接下来 $n$ 行：每行3个正整数 $a_i, b_i, c_i$ 表示三种情况下卖出的门票价格。", "outputFormat": "一行一个正整数表示在 Lewis 最终选择的所有方案中，门票收入的中位数。", "hint": "【样例解释】\n\nLewis的“收入最大方案”总共有以下 $4$ 种：\n\n- Max vs Checo, Lewis vs Valtteri，门票收入为 $100+1=101$；\n- Valtteri vs Max, Valtteri vs Checo，门票收入为 $10+2=12$；\n- Valtteri vs Checo, Valtteri vs Max，门票收入为 $10+2=12$；\n- Lewis vs Valterri, Max vs Checo，门票收入为 $1+3=4$。\n\n中位数为 $\\frac{12+12}{2} = 12$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，$1 \\le n, t_m, t_c \\le 2*10^5$ , $1 \\le a_{i} < b_{i} < c_{i} \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8210", "type": "P", "difficulty": 4, "samples": [["2\n2 1", "2 5\n3 4\n1 3\n2 4\n1 4\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "O2优化", "构造", "THUPC"], "title": "[THUPC 2022 初赛] 造计算机", "background": "", "description": "小R和小C听说贵系有一门造计算机的课之后吓得连夜提交了退学申请。\n\n开玩笑的啦！正处于大一的他们对这门课不但不害怕，甚至有些想笑。他们超强的动手能力甚至驱使他们想造一个玩意玩玩。\n\n当然由于他们毕竟才大一，计算机专业课基本上都没上过，经过长时间的艰苦奋战，他们终于造出了一个奇怪的玩意：\n\n这台计算机只有 $n$ 个内存单元，反而有足够多个寄存器。内存单元的编号从 $1$ 到 $n$ ，寄存器从 $n+1$ 开始往上编号。每个内存单元和寄存器可以存储一个整数。\n\n目前他们已经设计好了一类指令：`swap i, j`，表示交换编号为 $i$ 和 $j$ 的单元里的数，其中 $i$ 和 $j$ 均为正整数且 $i \\neq j$ 。他们打算写一段程序来测试这条指令。\n\n最开始， $n$ 个内存单元中乱序存放着 $1\\thicksim n$ 这些数，且每个数恰好出现一次。而每个寄存器里存放的是它的编号。\n\n两人打算设计一段指令序列，使得计算机依次执行完这些指令后，所有内存和寄存器中的数都归位，也就是恰好等于它自己的编号。\n\n虽然没学过计算机专业课，小R和小C还是懂一点皮毛的，因此他们规定每条 `swap` 指令操作的两个位置至少有一个需要是寄存器，也就是 $i$ 和 $j$ 至少有一者应当大于 $n$。\n\n然而，正当他们写完程序开始运行时，却发现系统崩溃了！在查找了半天原因后，他们发现了一个奇怪的 bug：他们设计出来的计算机不能运行两条相同的指令！也就是说，他们不能在一段程序里出现两条相同的 `swap i, j` 指令。更进一步他们发现即使出现一条 `swap i, j` 一条 `swap j, i` 也不行，因为计算机会自动将这两条指令视为同一条。\n\n然后可怜的小R和小C就斯巴达了。不过他们在弃疗之前还是打算利用现有的架构把程序写出来。不仅如此，他们还希望用到的寄存器数量尽可能少。你能帮帮他们吗？", "inputFormat": "第一行：一个正整数 $n\\ (1 \\leq n \\leq 10^5)$ 表示内存单元的数量。\n\n第二行： $n$ 个正整数$a_i$ 依次表示第 $i$ 个内存单元中的初始值，保证所有 $a_i$ 构成一个 $1 \\thicksim n$ 的排列。", "outputFormat": "第一行：两个非负整数 $m,k$，分别表示你用到的寄存器数量和指令的条数。\n\n接下来 $k$ 行，每行输出两个正整数 $i, j$，依次表示你设计的每一条指令中交换的两个位置。你需要保证 $1 \\leq i,j \\leq n+m$，并且满足题目中对于指令的限制条件。\n\n如果有多种设计指令的方案满足题目所需，输出任意一种即可。\n\n你需要最小化 $m$ 而无需最小化 $k$，但需要保证 $k \\leq 10^6$。输入数据保证符合要求的解存在。", "hint": "【样例解释】\n\n最初，前 $4$ 个单元的值依次为 $(2,1,3,4)$ 。\n\n执行指令 `swap 3, 4`，各单元的值变为 $(2,1,4,3)$ 。\n\n执行指令 `swap 1, 3`，各单元的值变为 $(4,1,2,3)$ 。\n\n执行指令 `swap 2, 4`，各单元的值变为 $(4,3,2,1)$ 。\n\n执行指令 `swap 1, 4`，各单元的值变为 $(1,3,2,4)$ 。\n\n执行指令 `swap 2, 3`，各单元的值变为 $(1,2,3,4)$ 。\n\n可以证明 $m=1$ 是不行的。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 造计算机", "background": "", "description": "小R和小C听说贵系有一门造计算机的课之后吓得连夜提交了退学申请。\n\n开玩笑的啦！正处于大一的他们对这门课不但不害怕，甚至有些想笑。他们超强的动手能力甚至驱使他们想造一个玩意玩玩。\n\n当然由于他们毕竟才大一，计算机专业课基本上都没上过，经过长时间的艰苦奋战，他们终于造出了一个奇怪的玩意：\n\n这台计算机只有 $n$ 个内存单元，反而有足够多个寄存器。内存单元的编号从 $1$ 到 $n$ ，寄存器从 $n+1$ 开始往上编号。每个内存单元和寄存器可以存储一个整数。\n\n目前他们已经设计好了一类指令：`swap i, j`，表示交换编号为 $i$ 和 $j$ 的单元里的数，其中 $i$ 和 $j$ 均为正整数且 $i \\neq j$ 。他们打算写一段程序来测试这条指令。\n\n最开始， $n$ 个内存单元中乱序存放着 $1\\thicksim n$ 这些数，且每个数恰好出现一次。而每个寄存器里存放的是它的编号。\n\n两人打算设计一段指令序列，使得计算机依次执行完这些指令后，所有内存和寄存器中的数都归位，也就是恰好等于它自己的编号。\n\n虽然没学过计算机专业课，小R和小C还是懂一点皮毛的，因此他们规定每条 `swap` 指令操作的两个位置至少有一个需要是寄存器，也就是 $i$ 和 $j$ 至少有一者应当大于 $n$。\n\n然而，正当他们写完程序开始运行时，却发现系统崩溃了！在查找了半天原因后，他们发现了一个奇怪的 bug：他们设计出来的计算机不能运行两条相同的指令！也就是说，他们不能在一段程序里出现两条相同的 `swap i, j` 指令。更进一步他们发现即使出现一条 `swap i, j` 一条 `swap j, i` 也不行，因为计算机会自动将这两条指令视为同一条。\n\n然后可怜的小R和小C就斯巴达了。不过他们在弃疗之前还是打算利用现有的架构把程序写出来。不仅如此，他们还希望用到的寄存器数量尽可能少。你能帮帮他们吗？", "inputFormat": "第一行：一个正整数 $n\\ (1 \\leq n \\leq 10^5)$ 表示内存单元的数量。\n\n第二行： $n$ 个正整数$a_i$ 依次表示第 $i$ 个内存单元中的初始值，保证所有 $a_i$ 构成一个 $1 \\thicksim n$ 的排列。", "outputFormat": "第一行：两个非负整数 $m,k$，分别表示你用到的寄存器数量和指令的条数。\n\n接下来 $k$ 行，每行输出两个正整数 $i, j$，依次表示你设计的每一条指令中交换的两个位置。你需要保证 $1 \\leq i,j \\leq n+m$，并且满足题目中对于指令的限制条件。\n\n如果有多种设计指令的方案满足题目所需，输出任意一种即可。\n\n你需要最小化 $m$ 而无需最小化 $k$，但需要保证 $k \\leq 10^6$。输入数据保证符合要求的解存在。", "hint": "【样例解释】\n\n最初，前 $4$ 个单元的值依次为 $(2,1,3,4)$ 。\n\n执行指令 `swap 3, 4`，各单元的值变为 $(2,1,4,3)$ 。\n\n执行指令 `swap 1, 3`，各单元的值变为 $(4,1,2,3)$ 。\n\n执行指令 `swap 2, 4`，各单元的值变为 $(4,3,2,1)$ 。\n\n执行指令 `swap 1, 4`，各单元的值变为 $(1,3,2,4)$ 。\n\n执行指令 `swap 2, 3`，各单元的值变为 $(1,2,3,4)$ 。\n\n可以证明 $m=1$ 是不行的。\n", "locale": "zh-CN"}}}
{"pid": "P8211", "type": "P", "difficulty": 6, "samples": [["5\n1 6 1\n1 3 0\n1 9 2\n2 3\n2 4", "3\n4\n"], ["4\n1 2 1\n2 2\n1 2 1\n2 2", "2\n1"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "根号分治", "THUPC"], "title": "[THUPC 2022 初赛] 搬砖", "background": "张华考上了北京大学；李萍进了中等技术学校；小 E 在工地搬砖：他们都有光明的前途。", "description": "**温馨提示：请不要模仿小 E 的搬砖方式，那样很累。**\n\n为了能够快乐地搬砖，小 E 有一种特殊的搬砖方式。\n\n假设他的面前有 $n$ 摞砖，他会在一个小时内搬走每一摞砖最上面的 $d$ 块。其中 $d$ 是小 E 当前的精力值。如果一摞砖不够 $d$ 块，小 E 会把这一摞砖剩下的所有砖搬走。\n\n当小 E 工作完一个小时后发现自己搬完了至少一摞砖，那么他会觉得很快乐，并且继续工作一个小时；但是由于完成了一部分工作，小 E 可能会产生懈怠的心理，导致精力值有所下降。具体地，对于每一摞砖都有一个属性 $b$，当小 E 搬完这一摞砖后，精力值就会下降 $b$。\n\n如果没有任何一摞砖被搬完，小 E 就会停止工作。如果精力值下降到 $0$ 或以下，小 E 也会停止工作。如果小 E 发现自己需要工作但是所有的砖已被搬完，他会用别的方式来度过这一小时，但这一小时仍算作小 E 的工作时间。\n\n工地的砖在不停增加，问如果小 E 初始的精力值为 $d$，那么他可以连续工作几个小时？", "inputFormat": "第一行一个正整数 $T$，表示事件总数。\n\n接下来 $T$ 行，每行若干个整数，其中第一个整数为 $op$ 表示事件类型。\n\n若 $op=1$，则后面跟着两个整数 $a,b$，表示新增了一摞砖，砖有 $a$ 块，搬完后小 E 的精力值会下降 $b$。\n\n若 $op=2$，则后面跟着一个正整数 $d$，询问若小 E 初始的精力值为 $d$，那么他可以连续工作几个小时。\n\n注意 $op=2$ 的操作**不会**改变任何一摞砖的数量。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "【样例解释】\n\n第一组询问：\n\n初始有 $3$ 摞砖，数量分别为 $(6,3,9)$，小 E 的初始精力是 $3$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $3$ 块，数量变成 $(3,0,6)$。其中第二摞砖被搬完，小 E 的精力因此下降 $0$ 并且继续工作一个小时。\n\n第二个小时，小 E 在每一摞砖中各搬了 $3$ 块，数量变成 $(0,0,3)$。其中第一摞砖被搬完，小 E 的精力因此下降 $1$ 并且继续工作一个小时。\n\n第三个小时，小 E 在每一摞砖中各搬了 $2$ 块，数量变成 $(0,0,1)$。由于没有新的砖摞被搬完，小 E 停止工作。\n\n第二组询问：\n\n初始有 $3$ 摞砖，数量分别为 $(6,3,9)$，小 E 的初始精力是 $4$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $4$ 块（第二摞砖由于只有 $3$ 块就只搬了 $3$ 块，以下省略），数量变成 $(2,0,5)$。其中第二摞砖被搬完，小 E 的精力因此下降 $0$ 并且继续工作一个小时。\n\n第二个小时，小 E 在每一摞砖中各搬了 $4$ 块，数量变成 $(0,0,1)$。其中第一摞砖被搬完，小 E 的精力因此下降 $1$ 并且继续工作一个小时。\n\n第三个小时，小 E 在每一摞砖中各搬了 $3$ 块，数量变成 $(0,0,0)$。其中第三摞砖被搬完，小 E 的精力因此下降 $2$ 并且继续工作一个小时。\n\n第四个小时，小 E 在每一摞砖中各搬了 $1$ 块，但其实此时已经没有砖了，不过这一小时仍然算进小 E 的工作时间。由于没有新的砖摞被搬完，小 E 停止工作。\n\n【样例解释 2】\n\n第一组询问：\n\n初始有 $1$ 摞砖，数量为 $2$，小 E 的初始精力是 $2$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $2$ 块，数量变成 $0$。这一摞砖被搬完，小 E 的精力因此下降 $1$ 并且继续工作一个小时。\n\n第二个小时，小 E 在每一摞砖中各搬了 $1$ 块，但其实此时已经没有砖了，不过这一小时仍然算进小 E 的工作时间。由于没有新的砖摞被搬完，小 E 停止工作。\n\n第二组询问：\n\n初始有 $2$ 摞砖，数量为 $(2,2)$，小 E 的初始精力是 $2$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $2$ 块， 数量变成 $(0,0)$。两摞砖都被搬完，小 E 的精力因此下降 $1+1=2$。由于小 E 的精力下降到 $0$，他停止工作。\n\n【数据范围】\n\n保证 $T\\le 351493,1\\le op\\le 2,1\\le a\\le 100000,0\\le b\\le 100000,1\\le d \\le 100000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 搬砖", "background": "张华考上了北京大学；李萍进了中等技术学校；小 E 在工地搬砖：他们都有光明的前途。", "description": "**温馨提示：请不要模仿小 E 的搬砖方式，那样很累。**\n\n为了能够快乐地搬砖，小 E 有一种特殊的搬砖方式。\n\n假设他的面前有 $n$ 摞砖，他会在一个小时内搬走每一摞砖最上面的 $d$ 块。其中 $d$ 是小 E 当前的精力值。如果一摞砖不够 $d$ 块，小 E 会把这一摞砖剩下的所有砖搬走。\n\n当小 E 工作完一个小时后发现自己搬完了至少一摞砖，那么他会觉得很快乐，并且继续工作一个小时；但是由于完成了一部分工作，小 E 可能会产生懈怠的心理，导致精力值有所下降。具体地，对于每一摞砖都有一个属性 $b$，当小 E 搬完这一摞砖后，精力值就会下降 $b$。\n\n如果没有任何一摞砖被搬完，小 E 就会停止工作。如果精力值下降到 $0$ 或以下，小 E 也会停止工作。如果小 E 发现自己需要工作但是所有的砖已被搬完，他会用别的方式来度过这一小时，但这一小时仍算作小 E 的工作时间。\n\n工地的砖在不停增加，问如果小 E 初始的精力值为 $d$，那么他可以连续工作几个小时？", "inputFormat": "第一行一个正整数 $T$，表示事件总数。\n\n接下来 $T$ 行，每行若干个整数，其中第一个整数为 $op$ 表示事件类型。\n\n若 $op=1$，则后面跟着两个整数 $a,b$，表示新增了一摞砖，砖有 $a$ 块，搬完后小 E 的精力值会下降 $b$。\n\n若 $op=2$，则后面跟着一个正整数 $d$，询问若小 E 初始的精力值为 $d$，那么他可以连续工作几个小时。\n\n注意 $op=2$ 的操作**不会**改变任何一摞砖的数量。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "【样例解释】\n\n第一组询问：\n\n初始有 $3$ 摞砖，数量分别为 $(6,3,9)$，小 E 的初始精力是 $3$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $3$ 块，数量变成 $(3,0,6)$。其中第二摞砖被搬完，小 E 的精力因此下降 $0$ 并且继续工作一个小时。\n\n第二个小时，小 E 在每一摞砖中各搬了 $3$ 块，数量变成 $(0,0,3)$。其中第一摞砖被搬完，小 E 的精力因此下降 $1$ 并且继续工作一个小时。\n\n第三个小时，小 E 在每一摞砖中各搬了 $2$ 块，数量变成 $(0,0,1)$。由于没有新的砖摞被搬完，小 E 停止工作。\n\n第二组询问：\n\n初始有 $3$ 摞砖，数量分别为 $(6,3,9)$，小 E 的初始精力是 $4$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $4$ 块（第二摞砖由于只有 $3$ 块就只搬了 $3$ 块，以下省略），数量变成 $(2,0,5)$。其中第二摞砖被搬完，小 E 的精力因此下降 $0$ 并且继续工作一个小时。\n\n第二个小时，小 E 在每一摞砖中各搬了 $4$ 块，数量变成 $(0,0,1)$。其中第一摞砖被搬完，小 E 的精力因此下降 $1$ 并且继续工作一个小时。\n\n第三个小时，小 E 在每一摞砖中各搬了 $3$ 块，数量变成 $(0,0,0)$。其中第三摞砖被搬完，小 E 的精力因此下降 $2$ 并且继续工作一个小时。\n\n第四个小时，小 E 在每一摞砖中各搬了 $1$ 块，但其实此时已经没有砖了，不过这一小时仍然算进小 E 的工作时间。由于没有新的砖摞被搬完，小 E 停止工作。\n\n【样例解释 2】\n\n第一组询问：\n\n初始有 $1$ 摞砖，数量为 $2$，小 E 的初始精力是 $2$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $2$ 块，数量变成 $0$。这一摞砖被搬完，小 E 的精力因此下降 $1$ 并且继续工作一个小时。\n\n第二个小时，小 E 在每一摞砖中各搬了 $1$ 块，但其实此时已经没有砖了，不过这一小时仍然算进小 E 的工作时间。由于没有新的砖摞被搬完，小 E 停止工作。\n\n第二组询问：\n\n初始有 $2$ 摞砖，数量为 $(2,2)$，小 E 的初始精力是 $2$。\n\n第一个小时，小 E 在每一摞砖中各搬了 $2$ 块， 数量变成 $(0,0)$。两摞砖都被搬完，小 E 的精力因此下降 $1+1=2$。由于小 E 的精力下降到 $0$，他停止工作。\n\n【数据范围】\n\n保证 $T\\le 351493,1\\le op\\le 2,1\\le a\\le 100000,0\\le b\\le 100000,1\\le d \\le 100000$。", "locale": "zh-CN"}}}
{"pid": "P8212", "type": "P", "difficulty": 6, "samples": [["5 4\n0 0\n1 0\n2 1\n2 2\n0 2", "1.9892766953"], ["3 3\n0 0\n1 0\n0 1", "0.1226170434"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2022", "Special Judge", "O2优化", "模拟退火", "THUPC"], "title": "[THUPC 2022 初赛] 喵喵花園", "background": "", "description": "喵喵是一只非常富有的猫咪，他在海淀区拥有一个大花园。\n\n这个大花园是由一些旧栅栏为边界所形成的 $N$-gon（即具有 $N$ 边的多边形）。\n\n由于圣诞节快到了，喵喵想用 $K$ 棵圣诞树来装饰一下花园。 同时，喵喵坚信找到一些好的位置来种树会给他带来好运。\n\n作为一只好猫咪，他决定寻找最佳位置如下：\n\n- 所有的树都应该在花园的边界上。\n- 这些 $K$ 树应该平均划分花园的周长。\n- 由树木形成的新凸面$K$-gon 的面积应尽可能小。\n\n虽然喵喵比你有钱，但他没有你那么聪明。 因此，他给了你一些钱，让你帮他找出凸$K$-gon 的最小面积。", "inputFormat": "第一行包含两个整数，$N$ 和 $K$，代表原本花园边界的顶点数和树的数量。\n\n接下来的每行 $N$ 行包含两个整数 $x_i$ 和 $y_i$，表示花园边界顶点的坐标。\n\n所有座标均为逆时针给出的。", "outputFormat": "输出凸面 $K$-gon 的最小面积。 如果相对或绝对误差不超过 $10^{-8}$，则您的答案被认为是正确的。", "hint": "【数据范围】\n\n- $3 \\le N, K \\le 1000$；\n- $-10^5 \\le x_i, y_i \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 喵喵花園", "background": "", "description": "喵喵是一只非常富有的猫咪，他在海淀区拥有一个大花园。\n\n这个大花园是由一些旧栅栏为边界所形成的 $N$-gon（即具有 $N$ 边的多边形）。\n\n由于圣诞节快到了，喵喵想用 $K$ 棵圣诞树来装饰一下花园。 同时，喵喵坚信找到一些好的位置来种树会给他带来好运。\n\n作为一只好猫咪，他决定寻找最佳位置如下：\n\n- 所有的树都应该在花园的边界上。\n- 这些 $K$ 树应该平均划分花园的周长。\n- 由树木形成的新凸面$K$-gon 的面积应尽可能小。\n\n虽然喵喵比你有钱，但他没有你那么聪明。 因此，他给了你一些钱，让你帮他找出凸$K$-gon 的最小面积。", "inputFormat": "第一行包含两个整数，$N$ 和 $K$，代表原本花园边界的顶点数和树的数量。\n\n接下来的每行 $N$ 行包含两个整数 $x_i$ 和 $y_i$，表示花园边界顶点的坐标。\n\n所有座标均为逆时针给出的。", "outputFormat": "输出凸面 $K$-gon 的最小面积。 如果相对或绝对误差不超过 $10^{-8}$，则您的答案被认为是正确的。", "hint": "【数据范围】\n\n- $3 \\le N, K \\le 1000$；\n- $-10^5 \\le x_i, y_i \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8213", "type": "P", "difficulty": 5, "samples": [["3\n3 3 3\n1 2 3", "1.000000000000000000"], ["3\n2 3 3\n1 2 3", "0.250000000000000000"], ["10\n2 1 4 7 4 8 3 6 4 8\n3 1 4 1 5 9 2 6 5 3", "0.833333333333333333\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "Special Judge", "O2优化", "THUPC"], "title": "[THUPC 2022 初赛] 挑战", "background": "", "description": "**足够聪明**的 Alice 和 Bob 在玩一种棋盘游戏。这个游戏需要用到一个有 $(n+1)$ 个格子的长条棋盘，按从左到右的顺序给每个格子编号 $0, 1, \\cdots, n$。除了编号为 $n$ 的格以外，每一格都有两个数 $p_i, q_i$。游戏开始前，将一个棋子放在第 $0$ 格。游戏由二人轮流操作，这里我们不妨假设 Alice 先手。\n\n轮到其中一位玩家进行操作时，这位玩家可以根据当前格子的 $p$ 值决定前进的步数。具体地说，假设当前棋子位于第 $k$ 格，那么当前进行操作的玩家可以将棋子向前移动 $x$ 格，其中 $x$ 可以是满足 $1\\le x\\le p_k$ 的任意整数。如果玩家没有走满 $p_k$ 格，即 $x<p_k$，那么该玩家可以在完成移动后选择是否进行一次挑战。如果选择不进行挑战，那么由另一位玩家进行下一轮操作。否则，如果当前玩家选择挑战，那么系统将会产生两个随机**整数** $u$ 和 $v$，其中：$u$ 表示挑战的能量，它在 $\\left[1, p_k-x\\right]$ 中等概率产生；$v$ 表示挑战所需的活化能，它在 $\\left[0, q_k + q_{k+x}\\right]$ 中等概率产生。根据 $u$ 和 $v$ 的值，系统会根据以下规则自动判定挑战结果：\n\n如果 $u>v$，则挑战成功，对方玩家的操作被跳过一轮，由当前玩家继续操作；\n如果 $u=v$，则挑战结果为平手，什么事情都不会发生，由对方玩家进行操作；\n如果 $u<v$，则挑战失败，当前玩家下一轮操作将会被跳过，即对方玩家可以连续操作两轮。\n为了防止其中一方玩家一直被跳过，规定：\n\n如果当前玩家通过自身的挑战获得额外操作机会，则该玩家在该额外操作机会中不能进行第二次挑战；\n如果当前玩家通过对方玩家的挑战获得额外操作机会，则该玩家不能在其第一次操作结束时发起挑战，只能在第二次操作结束时选择是否进行挑战，并且当且仅当挑战成功时可以进行第三次操作。\n需要注意的是，无论连续进行多少次操作，每次操作都需要将棋子向前移动至少 $1$ 格。同大多数游戏一样，谁将棋子移动到终点（即编号为 $n$ 的格）谁就获胜。\n\nAlice 和 Bob 都足够聪明，可以心算出对于当前棋子的位置，能使自己获胜概率最大的操作。作为一名旁观者，你没有他们那么强的心算能力；但是你也想通过自己编程的能力，计算出当 Alice 先手从第 $0$ 格开始进行操作时，Alice 的胜率。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示棋盘包含 $(n+1)$ 格，分别标号 $0, 1, \\cdots, n$。\n\n输入的第二行包含 $n$ 个正整数 $p_0, p_1, \\cdots, p_{n-1}$，分别表示第 $0$ 格至第 $(n-1)$ 格的 $p$ 值。\n\n输入的第三行包含 $n$ 个正整数 $q_0, q_1, \\cdots, q_{n-1}$，分别表示第 $0$ 格至第 $(n-1)$ 格的 $q$ 值。", "outputFormat": "输出一个实数，表示 Alice 先手开始游戏的胜率。当你的输出与标准输出的绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "【样例解释 1】\n\nAlice 先手，由于可以直接从第 $0$ 格移动到终点的第 $3$ 格，Alice 会直接将棋子移动到第 $3$ 格，故 Alice 必胜。\n\n【样例解释 2】\n\nAlice 先手，但是不能直接移动到第 $3$ 格，并且无论结束操作时棋子在第 $1$ 格还是第 $2$ 格，Bob 都可以直接将其移动到终点的第 $3$ 格，因此 Alice 必须尝试挑战。将棋子移动到第 $1$ 格并发动挑战，挑战成功的概率为 $1/4$，故 Alice 的胜率为 $1/4$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 100000$，$1\\le p_i, q_i\\le 333$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 挑战", "background": "", "description": "**足够聪明**的 Alice 和 Bob 在玩一种棋盘游戏。这个游戏需要用到一个有 $(n+1)$ 个格子的长条棋盘，按从左到右的顺序给每个格子编号 $0, 1, \\cdots, n$。除了编号为 $n$ 的格以外，每一格都有两个数 $p_i, q_i$。游戏开始前，将一个棋子放在第 $0$ 格。游戏由二人轮流操作，这里我们不妨假设 Alice 先手。\n\n轮到其中一位玩家进行操作时，这位玩家可以根据当前格子的 $p$ 值决定前进的步数。具体地说，假设当前棋子位于第 $k$ 格，那么当前进行操作的玩家可以将棋子向前移动 $x$ 格，其中 $x$ 可以是满足 $1\\le x\\le p_k$ 的任意整数。如果玩家没有走满 $p_k$ 格，即 $x<p_k$，那么该玩家可以在完成移动后选择是否进行一次挑战。如果选择不进行挑战，那么由另一位玩家进行下一轮操作。否则，如果当前玩家选择挑战，那么系统将会产生两个随机**整数** $u$ 和 $v$，其中：$u$ 表示挑战的能量，它在 $\\left[1, p_k-x\\right]$ 中等概率产生；$v$ 表示挑战所需的活化能，它在 $\\left[0, q_k + q_{k+x}\\right]$ 中等概率产生。根据 $u$ 和 $v$ 的值，系统会根据以下规则自动判定挑战结果：\n\n如果 $u>v$，则挑战成功，对方玩家的操作被跳过一轮，由当前玩家继续操作；\n如果 $u=v$，则挑战结果为平手，什么事情都不会发生，由对方玩家进行操作；\n如果 $u<v$，则挑战失败，当前玩家下一轮操作将会被跳过，即对方玩家可以连续操作两轮。\n为了防止其中一方玩家一直被跳过，规定：\n\n如果当前玩家通过自身的挑战获得额外操作机会，则该玩家在该额外操作机会中不能进行第二次挑战；\n如果当前玩家通过对方玩家的挑战获得额外操作机会，则该玩家不能在其第一次操作结束时发起挑战，只能在第二次操作结束时选择是否进行挑战，并且当且仅当挑战成功时可以进行第三次操作。\n需要注意的是，无论连续进行多少次操作，每次操作都需要将棋子向前移动至少 $1$ 格。同大多数游戏一样，谁将棋子移动到终点（即编号为 $n$ 的格）谁就获胜。\n\nAlice 和 Bob 都足够聪明，可以心算出对于当前棋子的位置，能使自己获胜概率最大的操作。作为一名旁观者，你没有他们那么强的心算能力；但是你也想通过自己编程的能力，计算出当 Alice 先手从第 $0$ 格开始进行操作时，Alice 的胜率。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示棋盘包含 $(n+1)$ 格，分别标号 $0, 1, \\cdots, n$。\n\n输入的第二行包含 $n$ 个正整数 $p_0, p_1, \\cdots, p_{n-1}$，分别表示第 $0$ 格至第 $(n-1)$ 格的 $p$ 值。\n\n输入的第三行包含 $n$ 个正整数 $q_0, q_1, \\cdots, q_{n-1}$，分别表示第 $0$ 格至第 $(n-1)$ 格的 $q$ 值。", "outputFormat": "输出一个实数，表示 Alice 先手开始游戏的胜率。当你的输出与标准输出的绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "【样例解释 1】\n\nAlice 先手，由于可以直接从第 $0$ 格移动到终点的第 $3$ 格，Alice 会直接将棋子移动到第 $3$ 格，故 Alice 必胜。\n\n【样例解释 2】\n\nAlice 先手，但是不能直接移动到第 $3$ 格，并且无论结束操作时棋子在第 $1$ 格还是第 $2$ 格，Bob 都可以直接将其移动到终点的第 $3$ 格，因此 Alice 必须尝试挑战。将棋子移动到第 $1$ 格并发动挑战，挑战成功的概率为 $1/4$，故 Alice 的胜率为 $1/4$。\n\n【数据范围】\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 100000$，$1\\le p_i, q_i\\le 333$。", "locale": "zh-CN"}}}
{"pid": "P8215", "type": "P", "difficulty": 6, "samples": [["2 1\n8 6 7\n5 2 8\n7 1 5\n6 5 8\n1 4 4 3", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "最小割", "THUPC"], "title": "[THUPC 2022 初赛] 分组作业", "background": "", "description": "老师布置了分组作业。在此之前，老师将班上 $2n$ 个学生分成了 $n$ 组，每组两个人。其中 $1$ 号和 $2$ 号为一组，$3$ 号和 $4$ 号为一组，……，$2n-1$ 号和 $2n$ 号为一组。\n\n老师让每个队伍自行安排分工。这样是否合作就成了一个大问题。大家决定用表决的方式来确定。首先每个人决定是否愿意和队友合作。不同的人因为自己的原因和分配的队友的原因，对合作的意愿不一样，对于第 $i$ 个学生，选择“愿意”会产生 $c_i$ 的不满，选择“不愿意”会产生 $d_i$ 的不满。\n\n如果两名队友都选择“愿意”，那么根据实际情况他们可以合作或者不合作。但是如果有一名队友选择“不愿意”，那么他们只能不合作。\n\n学生中还有 $m$ 个单向的喜欢关系，一个关系形如“$A$ 喜欢 $B$”。在这样一个关系中，如果 $A$ 没有和队友合作，且 $B$ 选择了“愿意”，$A$ 会有略微沮丧，产生 $a_i$ 的不满；如果 $A$ 表决了“不愿意”，但 $B$ 成功与队友合作，那么 $A$ 会羡慕嫉妒恨并产生 $b_i$ 的不满。（由于当 $A$ 和 $B$ 在同一组时这种设定会变得很奇怪，所以题目保证不会有这种情况）其中 $i$ 表示第 $i$ 个关系。\n\n如果一个学生 $i$ 选择了“愿意”但是他的队友选择了“不愿意”，那么他会因为队友产生 $e_i$ 的不满。\n\n问所有情况下最小的不满之和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $2n$ 行，每行三个整数 $c_i,d_i,e_i$。\n\n接下来 $m$ 行，每行四个正整数 $A,B,a_i,b_i$ 。", "outputFormat": "一行一个整数表示答案。", "hint": "【数据范围】\n\n保证 $1\\le n \\le 5000$，$0\\le m \\le 10000$，$1\\le a_i,b_i,c_i,d_i,e_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 分组作业", "background": "", "description": "老师布置了分组作业。在此之前，老师将班上 $2n$ 个学生分成了 $n$ 组，每组两个人。其中 $1$ 号和 $2$ 号为一组，$3$ 号和 $4$ 号为一组，……，$2n-1$ 号和 $2n$ 号为一组。\n\n老师让每个队伍自行安排分工。这样是否合作就成了一个大问题。大家决定用表决的方式来确定。首先每个人决定是否愿意和队友合作。不同的人因为自己的原因和分配的队友的原因，对合作的意愿不一样，对于第 $i$ 个学生，选择“愿意”会产生 $c_i$ 的不满，选择“不愿意”会产生 $d_i$ 的不满。\n\n如果两名队友都选择“愿意”，那么根据实际情况他们可以合作或者不合作。但是如果有一名队友选择“不愿意”，那么他们只能不合作。\n\n学生中还有 $m$ 个单向的喜欢关系，一个关系形如“$A$ 喜欢 $B$”。在这样一个关系中，如果 $A$ 没有和队友合作，且 $B$ 选择了“愿意”，$A$ 会有略微沮丧，产生 $a_i$ 的不满；如果 $A$ 表决了“不愿意”，但 $B$ 成功与队友合作，那么 $A$ 会羡慕嫉妒恨并产生 $b_i$ 的不满。（由于当 $A$ 和 $B$ 在同一组时这种设定会变得很奇怪，所以题目保证不会有这种情况）其中 $i$ 表示第 $i$ 个关系。\n\n如果一个学生 $i$ 选择了“愿意”但是他的队友选择了“不愿意”，那么他会因为队友产生 $e_i$ 的不满。\n\n问所有情况下最小的不满之和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $2n$ 行，每行三个整数 $c_i,d_i,e_i$。\n\n接下来 $m$ 行，每行四个正整数 $A,B,a_i,b_i$ 。", "outputFormat": "一行一个整数表示答案。", "hint": "【数据范围】\n\n保证 $1\\le n \\le 5000$，$0\\le m \\le 10000$，$1\\le a_i,b_i,c_i,d_i,e_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8216", "type": "P", "difficulty": 5, "samples": [["17\n1 0 5 2\n0 0 3 5\n0 3 4 5\n1 2 7 7\n1 2 7 10\n0 7 10 4\n0 11 13 1\n1 1 7 11\n1 1 7 13\n1 0 6 15\n0 15 16 5\n0 15 16 6\n1 5 6 16\n1 3 6 18\n1 4 7 18\n0 18 21 3\n0 18 21 7", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "THUPC"], "title": "[THUPC 2022 初赛] 画图", "background": "", "description": "一年两度的THUPC又要来了，小C和小Z作为参赛无数届的老选手，自然也要来凑一番热闹。不过因为已经是老年人了，参赛自然是免谈了，但是他们对THUPC几年不换的logo产生了审美疲劳，为了更好地吸引大家报名，他们打算重画一个更花里胡哨的。\n\n笑死，你怎么可能指望两个宅男码农有丝毫的艺术细菌？\n\n他们深知这件事不在自己的能力范围之内，于是打算写一个人工智障来帮自己来画logo！\n\n经过不懈的努力，他们的人工智障终于能跑起来了，不过他们很快就发现这个人工智障比自己还没有艺术细菌——它只会在平面上画水平和竖直的线段来拼成“THUPC”字样！\n\n不过程序写都写了，不用白不用。小C和小Z针对程序的这一特性进行深入研究后制定了这样的规则：\n\n对于每一条水平线段，设其横坐标区间为 $[l_i,r_i]$ ，纵坐标为 $y_i$； 对于每一条竖直线段，设其纵坐标区间为 $[d_i,u_i]$ ，横坐标为 $x_i$ 。上述所有数值均为整数，且满足$r_i > l_i,u_i > d_i$。\n\n“THUPC”字样应当由 $15$ 条线段拼成，设其编号为 $1 \\thicksim 15$ 。对于每一个字母，规则如下：\n\n字母\"T\"由 $1$ 号水平线段和 $2$ 号竖直线段组成，满足 $d_2<y_1=u_2,l_1<x_2<r_1$ 。\n\n字母\"H\"由 $3$ 号竖直线段、$4$ 号水平线段和 $5$ 号竖直线段组成，满足 $d_3=d_5<y_4<u_3=u_5,x_3=l_4<r_4=x_5$ 。\n\n字母\"U\"由 $6$ 号竖直线段、$7$ 号水平线段和 $8$ 号竖直线段组成，满足 $d_6=d_8=y_7<u_6=u_8,x_6=l_7<r_7=x_8$ 。\n\n字母\"P\"由 $9$ 号竖直线段、$10$ 号水平线段、$11$ 号水平线段和 $12$ 号竖直线段组成，满足 $d_9<y_{11}=d_{12}<u_9=y_{10}=u_{12},x_9=l_{10}=l_{11}<r_{10}=r_{11}=x_{12}$ 。\n\n字母\"C\"由 $13$ 号竖直线段、$14$ 号水平线段和 $15$ 号水平线段组成，满足 $d_{13}=y_{15}<u_{13}=y_{14},x_{13}=l_{14}=l_{15}<r_{14}=r_{15}$ 。\n\n生成的这 $5$ 个字母可以排布在平面的任何地方而无需从左到右排列，但是组成任意两个不同字母的任意两条线段不得相交。\n\n需要注意的是，人工智障给出的线段顺序可能并不按照上述编号顺序；另外，给出的线段可能出现同方向线段的首尾相连、重叠或包含，此时应将其视为连续的一整条线段。\n\n只有生成的线段在连接和排序后符合上述规范，才认为人工智障生成了一幅正确的logo；否则，如果出现多余的线段、缺少某条线段或坐标不满足要求等情况均为不正确的。\n\n最后，小C和小Z要写一个程序来检验人工智障的每一份输出结果是否符合上述规范，不过熬夜连肝三天的他们终于累得爬不起来了，于是他们请你来帮忙。", "inputFormat": "第 $1$ 行：一个正整数 $n$ 表示线段的个数，保证 $1 \\leq n \\leq 10^5$ 。\n\n接下来 $n$ 行，每行先输入一个整数 $op_i$ ，必定为 $0$ 或 $1$ ：如果 $op_i=0$ ，表示第 $i$ 条线段为水平线段，接下来输入 $3$ 个整数 $l_i,r_i,y_i$ 描述这条线段，保证 $l_i<r_i$ ；如果 $op_i=1$ ，表示第 $i$ 条线段为竖直线段，接下来输入 $3$ 个整数 $d_i,u_i,x_i$ 描述这条线段，保证 $d_i<u_i$ 。\n\n保证输入的坐标均在 $[-10^9,10^9]$ 范围内。", "outputFormat": "如果符合规范，输出一个字符串 `Yes`，否则输出一个字符串`No`。", "hint": "【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oomfukad.png)\n\n这组样例中，字母 `T` 的水平线段和 `C` 的竖直线段分别是由两条线段拼成的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 画图", "background": "", "description": "一年两度的THUPC又要来了，小C和小Z作为参赛无数届的老选手，自然也要来凑一番热闹。不过因为已经是老年人了，参赛自然是免谈了，但是他们对THUPC几年不换的logo产生了审美疲劳，为了更好地吸引大家报名，他们打算重画一个更花里胡哨的。\n\n笑死，你怎么可能指望两个宅男码农有丝毫的艺术细菌？\n\n他们深知这件事不在自己的能力范围之内，于是打算写一个人工智障来帮自己来画logo！\n\n经过不懈的努力，他们的人工智障终于能跑起来了，不过他们很快就发现这个人工智障比自己还没有艺术细菌——它只会在平面上画水平和竖直的线段来拼成“THUPC”字样！\n\n不过程序写都写了，不用白不用。小C和小Z针对程序的这一特性进行深入研究后制定了这样的规则：\n\n对于每一条水平线段，设其横坐标区间为 $[l_i,r_i]$ ，纵坐标为 $y_i$； 对于每一条竖直线段，设其纵坐标区间为 $[d_i,u_i]$ ，横坐标为 $x_i$ 。上述所有数值均为整数，且满足$r_i > l_i,u_i > d_i$。\n\n“THUPC”字样应当由 $15$ 条线段拼成，设其编号为 $1 \\thicksim 15$ 。对于每一个字母，规则如下：\n\n字母\"T\"由 $1$ 号水平线段和 $2$ 号竖直线段组成，满足 $d_2<y_1=u_2,l_1<x_2<r_1$ 。\n\n字母\"H\"由 $3$ 号竖直线段、$4$ 号水平线段和 $5$ 号竖直线段组成，满足 $d_3=d_5<y_4<u_3=u_5,x_3=l_4<r_4=x_5$ 。\n\n字母\"U\"由 $6$ 号竖直线段、$7$ 号水平线段和 $8$ 号竖直线段组成，满足 $d_6=d_8=y_7<u_6=u_8,x_6=l_7<r_7=x_8$ 。\n\n字母\"P\"由 $9$ 号竖直线段、$10$ 号水平线段、$11$ 号水平线段和 $12$ 号竖直线段组成，满足 $d_9<y_{11}=d_{12}<u_9=y_{10}=u_{12},x_9=l_{10}=l_{11}<r_{10}=r_{11}=x_{12}$ 。\n\n字母\"C\"由 $13$ 号竖直线段、$14$ 号水平线段和 $15$ 号水平线段组成，满足 $d_{13}=y_{15}<u_{13}=y_{14},x_{13}=l_{14}=l_{15}<r_{14}=r_{15}$ 。\n\n生成的这 $5$ 个字母可以排布在平面的任何地方而无需从左到右排列，但是组成任意两个不同字母的任意两条线段不得相交。\n\n需要注意的是，人工智障给出的线段顺序可能并不按照上述编号顺序；另外，给出的线段可能出现同方向线段的首尾相连、重叠或包含，此时应将其视为连续的一整条线段。\n\n只有生成的线段在连接和排序后符合上述规范，才认为人工智障生成了一幅正确的logo；否则，如果出现多余的线段、缺少某条线段或坐标不满足要求等情况均为不正确的。\n\n最后，小C和小Z要写一个程序来检验人工智障的每一份输出结果是否符合上述规范，不过熬夜连肝三天的他们终于累得爬不起来了，于是他们请你来帮忙。", "inputFormat": "第 $1$ 行：一个正整数 $n$ 表示线段的个数，保证 $1 \\leq n \\leq 10^5$ 。\n\n接下来 $n$ 行，每行先输入一个整数 $op_i$ ，必定为 $0$ 或 $1$ ：如果 $op_i=0$ ，表示第 $i$ 条线段为水平线段，接下来输入 $3$ 个整数 $l_i,r_i,y_i$ 描述这条线段，保证 $l_i<r_i$ ；如果 $op_i=1$ ，表示第 $i$ 条线段为竖直线段，接下来输入 $3$ 个整数 $d_i,u_i,x_i$ 描述这条线段，保证 $d_i<u_i$ 。\n\n保证输入的坐标均在 $[-10^9,10^9]$ 范围内。", "outputFormat": "如果符合规范，输出一个字符串 `Yes`，否则输出一个字符串`No`。", "hint": "【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oomfukad.png)\n\n这组样例中，字母 `T` 的水平线段和 `C` 的竖直线段分别是由两条线段拼成的。", "locale": "zh-CN"}}}
{"pid": "P8217", "type": "P", "difficulty": 4, "samples": [["14 17\n....+---+---+....\n.../   /   /|....\n..+---+---+ |....\n./   /|   | +---+\n+---+ |   |/   /|\n|   | +---+---+ |\n|   |/   /|   | +\n+---+---+ |   |/|\n|   |   | +---+ |\n|   |   |/   /| +\n+---+---+---+ |/.\n|   |   |   | +..\n|   |   |   |/...\n+---+---+---+....", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "其它技巧", "THUPC"], "title": "[THUPC 2022 初赛] 数正方体", "background": "", "description": "小 E 有一块面积为 $n\\times m$ 的矩形区域，上面有 $n\\times m$ 个边长为 $1$ 的格子，第 $i$ 行 $j$ 列的格子上堆了 $ A_{i,j}$ 个同样大小的正方体积木。小 E 做了某道题之后，突发奇想把这些正方体画成了字符画，然后让你帮他数一数他一共有多少个正方体。我们定义每个正方体为如下格式，并且不会做任何旋转，只会严格以这一种形式摆放：\n\n```\n..+---+\n./   /| 高\n+---+ |\n|   | +\n|   |/.宽\n+---+..\n长\n```\n\n每个顶点用 $1$ 个 + 表示，长用 $3$ 个 - 表示，宽用 $1$ 个 / 表示，高用两个 | 表示。字符 . 作为背景。中间的空白是空格（ASCII 码为 $32$ ）。\n\n若两个正方体左右相邻，图示为\n\n```\n..+---+---+\n./   /   /|\n+---+---+ |\n|   |   | +\n|   |   |/.\n+---+---+..\n```\n\n若两个正方体积木上下相邻，图示为\n\n```\n..+---+\n./   /|\n+---+ |\n|   | +\n|   |/|\n+---+ |\n|   | +\n|   |/.\n+---+..\n```\n\n若两个正方体前后相邻，图示为\n\n```\n....+---+\n.../   /|\n..+---+ |\n./   /| +\n+---+ |/.\n|   | +..\n|   |/...\n+---+....\n```\n\n位于前面的正方体的面会遮挡住位于后面的正方体的面。为了让你看得清楚，没有整列正方体被挡在后面，小E保证了 $1\\le A_{ij} \\le A_{i-1,j}$，$1\\le A_{ij}\\le A_{i,j-1}$。并且图中没有整行或者整列的 . 。所以，一个字符画对应唯一的矩阵 $A$，一个矩阵 $A$ 也对应一个唯一的字符画。", "inputFormat": "第一行两个正整数 $r,c$，表示图的高度和宽度。（注意不是 $n$ 和 $m$）\n\n接下来是一个 $r$ 行 $c$ 列的字符画，表示小E堆叠的正方体。", "outputFormat": "一行一个整数，表示正方体的数量。", "hint": "【样例解释】\n\n此时 $A$ 矩阵为 \n\n$$\\begin{bmatrix}3 & 3 & 2 \\\\ 3 & 2 & 1\\end{bmatrix}$$\n\n，因为 $3+3+3+2+2+1=14$，所以图中共有 $14$ 个正方体。\n\n【数据范围】\n\n保证 $1\\le n,m \\le 50$，$1\\le A_{ij}\\le 100$。（注意这里是 $n$ 和 $m$ 不是 $r$ 和 $c$）\n\n保证 $\\forall 1<i\\le n$, $A_{ij}\\le A_{i-1,j}$。\n\n保证 $\\forall 1<j<m$, $A_{ij}\\le A_{i,j-1}$。\n\n保证字符画中没有一整行或者一整列是 . 。\n\n小 E 的话：做出这题并不难。不过还是建议在 AC 本题之后看一看题解。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2022 初赛] 数正方体", "background": "", "description": "小 E 有一块面积为 $n\\times m$ 的矩形区域，上面有 $n\\times m$ 个边长为 $1$ 的格子，第 $i$ 行 $j$ 列的格子上堆了 $ A_{i,j}$ 个同样大小的正方体积木。小 E 做了某道题之后，突发奇想把这些正方体画成了字符画，然后让你帮他数一数他一共有多少个正方体。我们定义每个正方体为如下格式，并且不会做任何旋转，只会严格以这一种形式摆放：\n\n```\n..+---+\n./   /| 高\n+---+ |\n|   | +\n|   |/.宽\n+---+..\n长\n```\n\n每个顶点用 $1$ 个 + 表示，长用 $3$ 个 - 表示，宽用 $1$ 个 / 表示，高用两个 | 表示。字符 . 作为背景。中间的空白是空格（ASCII 码为 $32$ ）。\n\n若两个正方体左右相邻，图示为\n\n```\n..+---+---+\n./   /   /|\n+---+---+ |\n|   |   | +\n|   |   |/.\n+---+---+..\n```\n\n若两个正方体积木上下相邻，图示为\n\n```\n..+---+\n./   /|\n+---+ |\n|   | +\n|   |/|\n+---+ |\n|   | +\n|   |/.\n+---+..\n```\n\n若两个正方体前后相邻，图示为\n\n```\n....+---+\n.../   /|\n..+---+ |\n./   /| +\n+---+ |/.\n|   | +..\n|   |/...\n+---+....\n```\n\n位于前面的正方体的面会遮挡住位于后面的正方体的面。为了让你看得清楚，没有整列正方体被挡在后面，小E保证了 $1\\le A_{ij} \\le A_{i-1,j}$，$1\\le A_{ij}\\le A_{i,j-1}$。并且图中没有整行或者整列的 . 。所以，一个字符画对应唯一的矩阵 $A$，一个矩阵 $A$ 也对应一个唯一的字符画。", "inputFormat": "第一行两个正整数 $r,c$，表示图的高度和宽度。（注意不是 $n$ 和 $m$）\n\n接下来是一个 $r$ 行 $c$ 列的字符画，表示小E堆叠的正方体。", "outputFormat": "一行一个整数，表示正方体的数量。", "hint": "【样例解释】\n\n此时 $A$ 矩阵为 \n\n$$\\begin{bmatrix}3 & 3 & 2 \\\\ 3 & 2 & 1\\end{bmatrix}$$\n\n，因为 $3+3+3+2+2+1=14$，所以图中共有 $14$ 个正方体。\n\n【数据范围】\n\n保证 $1\\le n,m \\le 50$，$1\\le A_{ij}\\le 100$。（注意这里是 $n$ 和 $m$ 不是 $r$ 和 $c$）\n\n保证 $\\forall 1<i\\le n$, $A_{ij}\\le A_{i-1,j}$。\n\n保证 $\\forall 1<j<m$, $A_{ij}\\le A_{i,j-1}$。\n\n保证字符画中没有一整行或者一整列是 . 。\n\n小 E 的话：做出这题并不难。不过还是建议在 AC 本题之后看一看题解。", "locale": "zh-CN"}}}
{"pid": "P8218", "type": "P", "difficulty": 2, "samples": [["4\n4 3 2 1\n2\n1 4\n2 3", "10\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["前缀和"], "title": "【深进1.例1】求区间和", "background": null, "description": "给定由 $n$ 个正整数组成的序列 $a_1, a_2, \\cdots, a_n$ 和 $m$ 个区间 $[l_i,r_i]$，分别求这 $m$ 个区间的区间和。", "inputFormat": "第一行包含一个正整数 $n$，表示序列的长度。\n\n第二行包含 $n$ 个正整数 $a_1,a_2, \\cdots ,a_n$。\n\n第三行包含一个正整数 $m$，表示区间的数量。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i,r_i$，满足 $1\\le l_i\\le r_i\\le n$。", "outputFormat": "共 $m$ 行，其中第 $i$ 行包含一个正整数，表示第 $i$ 组答案的询问。", "hint": "### 样例解释\n\n第 $1$ 到第 $4$ 个数加起来和为 $10$。第 $2$ 个数到第 $3$ 个数加起来和为 $5$。\n\n### 数据范围\n\n对于 $50 \\%$ 的数据：$n,m\\le 1000$；\n\n对于 $100 \\%$ 的数据：$1 \\le n, m\\le 10^5$，$1 \\le a_i\\le 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【深进1.例1】求区间和", "background": null, "description": "给定由 $n$ 个正整数组成的序列 $a_1, a_2, \\cdots, a_n$ 和 $m$ 个区间 $[l_i,r_i]$，分别求这 $m$ 个区间的区间和。", "inputFormat": "第一行包含一个正整数 $n$，表示序列的长度。\n\n第二行包含 $n$ 个正整数 $a_1,a_2, \\cdots ,a_n$。\n\n第三行包含一个正整数 $m$，表示区间的数量。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i,r_i$，满足 $1\\le l_i\\le r_i\\le n$。", "outputFormat": "共 $m$ 行，其中第 $i$ 行包含一个正整数，表示第 $i$ 组答案的询问。", "hint": "### 样例解释\n\n第 $1$ 到第 $4$ 个数加起来和为 $10$。第 $2$ 个数到第 $3$ 个数加起来和为 $5$。\n\n### 数据范围\n\n对于 $50 \\%$ 的数据：$n,m\\le 1000$；\n\n对于 $100 \\%$ 的数据：$1 \\le n, m\\le 10^5$，$1 \\le a_i\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P8219", "type": "P", "difficulty": 1, "samples": [["12 17", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[WFOI - 02] I wanna a feasitor（化验器）", "background": "> 比赛时在做什么？有没有空？可以来开 longlong 吗？\n\nkid 一脸疑惑地看着 Elgo87，Elgo87 说，通关就告诉你 ...", "description": "kid 发现了一个函数 $f(x)$，它表示**除 $x$ 本身之外，$x$ 的最大约数**（$x$ 为大于 $1$ 正整数）。\n\n下面是一些例子：\n\n- $f(8)=4$，因为 $8$ 的约数有 $1,2,4,8$，除 $8$ 本身之外显然最大的约数为 $4$，所以 $f(8)=4$；\n- $f(15)=5$，因为 $15$ 的约数有 $1,3,5,15$，除 $15$ 本身之外显然最大的约数为 $5$，所以 $f(15)=5$；\n\nkid 还发现了两个数 $L,R$，你需要帮他求对于 $L\\sim R$ 中的每一个数 $x$，$f(x)$ 的**最大值**，作为通关密码。\n\n注意，$L\\sim R$ 包括 $L$ 和 $R$。\n\n你只需要告诉他答案，剩下的操作就交给 Elgo87 吧！", "inputFormat": "一行两个整数 $L,R$，意义如题目描述。", "outputFormat": "一行，表示对于 $L\\sim R$ 中每个数 $x$，$f(x)$ 的最大值。", "hint": "**【样例解释】**\n\n在 $12\\sim17$，也就是 $12,13,14,15,16,17$ 这几个数中，除这些数本身之外的最大因数分别是 $6,1,7,5,8,1$，故最大值为 $8$。\n\n**【数据范围】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。** 即你需要通过一个 $\\tt Subtask$ 中的所有测试点才能得到这部分的分数。\n\n- $\\texttt{Subtask \\#0 (10pts)}$：$2\\le L< R\\le 100$；\n- $\\texttt{Subtask \\#1 (30pts)}$：$2\\le L< R\\le10^4$；\n- $\\texttt{Subtask \\#2 (30pts)}$：$2\\le L < R\\le 10^9$，$R-L\\le 10^6$；\n- $\\texttt{Subtask \\#3 (30pts)}$：$2\\le L < R \\le 10^{18}$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna a feasitor（化验器）", "background": "> 比赛时在做什么？有没有空？可以来开 longlong 吗？\n\nkid 一脸疑惑地看着 Elgo87，Elgo87 说，通关就告诉你 ...", "description": "kid 发现了一个函数 $f(x)$，它表示**除 $x$ 本身之外，$x$ 的最大约数**（$x$ 为大于 $1$ 正整数）。\n\n下面是一些例子：\n\n- $f(8)=4$，因为 $8$ 的约数有 $1,2,4,8$，除 $8$ 本身之外显然最大的约数为 $4$，所以 $f(8)=4$；\n- $f(15)=5$，因为 $15$ 的约数有 $1,3,5,15$，除 $15$ 本身之外显然最大的约数为 $5$，所以 $f(15)=5$；\n\nkid 还发现了两个数 $L,R$，你需要帮他求对于 $L\\sim R$ 中的每一个数 $x$，$f(x)$ 的**最大值**，作为通关密码。\n\n注意，$L\\sim R$ 包括 $L$ 和 $R$。\n\n你只需要告诉他答案，剩下的操作就交给 Elgo87 吧！", "inputFormat": "一行两个整数 $L,R$，意义如题目描述。", "outputFormat": "一行，表示对于 $L\\sim R$ 中每个数 $x$，$f(x)$ 的最大值。", "hint": "**【样例解释】**\n\n在 $12\\sim17$，也就是 $12,13,14,15,16,17$ 这几个数中，除这些数本身之外的最大因数分别是 $6,1,7,5,8,1$，故最大值为 $8$。\n\n**【数据范围】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。** 即你需要通过一个 $\\tt Subtask$ 中的所有测试点才能得到这部分的分数。\n\n- $\\texttt{Subtask \\#0 (10pts)}$：$2\\le L< R\\le 100$；\n- $\\texttt{Subtask \\#1 (30pts)}$：$2\\le L< R\\le10^4$；\n- $\\texttt{Subtask \\#2 (30pts)}$：$2\\le L < R\\le 10^9$，$R-L\\le 10^6$；\n- $\\texttt{Subtask \\#3 (30pts)}$：$2\\le L < R \\le 10^{18}$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8220", "type": "P", "difficulty": 2, "samples": [["5\n2 4 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[WFOI - 02] I wanna win the race（比赛）", "background": "> best is yet to come\n\nkid 不小心进入了联机模式，他需要比他的对手更快通关才能取得胜利……", "description": "kid 走进了一个场地，若干名选手在进行比赛，场地可以抽象为一个坐标系。\n\n选手们要从 $\\left(1,1\\right)$ 跑到 $\\left(n,n\\right)$，若当前选手处在 $\\left(x,y\\right)$，则他们下一步可以移动到 $\\left(x\\pm1,y\\right)$ 或 $\\left(x,y\\pm1\\right)$，注意，他们**仅可以在第一象限活动**，即任何时候 $x>0,y>0$。\n\n所有点最开始都是 $\\texttt{A}$ 类点，主办方选择了一个三元组 $\\left(a,b,c\\right)$，将所有满足 $a\\leq x\\leq b$ 且 $y\\leq c$ 的点 $\\left(x,y\\right)$ 变为 $\\texttt{B}$ 类点，选手每经过一个 $\\texttt{A}$ 类需要耗时 $1$ 秒，每经过一个 $\\texttt{B}$ 类需要耗时 $2$ 秒。请注意，**起始点和终点也要纳入计算。**\n\nkid 想要赢得这场比赛，他想知道**最少**需要多少秒能到达终点。\n\n**请注意，在【数据范围】中有重要的约束条件。**", "inputFormat": "共两行，第一行一个整数 $n$，第二行三个整数 $a,b,c$。", "outputFormat": "输出一个整数表示 kid 通关所需要的的最少秒数。", "hint": "**【样例解释】**\n\n下图是其中一种可行的方案，紫色点为 $\\texttt{A}$ 类点，红色点为 $\\texttt{B}$ 类点：\n\n![](https://s1.ax1x.com/2022/03/06/bBvQPJ.png)\n\n**【数据规模与约定】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。**\n\n对于 $30\\%$ 的数据，$1<a<b<n\\leq 10^3，0<c\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1<a<b<n\\leq 10^9，0<c\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna win the race（比赛）", "background": "> best is yet to come\n\nkid 不小心进入了联机模式，他需要比他的对手更快通关才能取得胜利……", "description": "kid 走进了一个场地，若干名选手在进行比赛，场地可以抽象为一个坐标系。\n\n选手们要从 $\\left(1,1\\right)$ 跑到 $\\left(n,n\\right)$，若当前选手处在 $\\left(x,y\\right)$，则他们下一步可以移动到 $\\left(x\\pm1,y\\right)$ 或 $\\left(x,y\\pm1\\right)$，注意，他们**仅可以在第一象限活动**，即任何时候 $x>0,y>0$。\n\n所有点最开始都是 $\\texttt{A}$ 类点，主办方选择了一个三元组 $\\left(a,b,c\\right)$，将所有满足 $a\\leq x\\leq b$ 且 $y\\leq c$ 的点 $\\left(x,y\\right)$ 变为 $\\texttt{B}$ 类点，选手每经过一个 $\\texttt{A}$ 类需要耗时 $1$ 秒，每经过一个 $\\texttt{B}$ 类需要耗时 $2$ 秒。请注意，**起始点和终点也要纳入计算。**\n\nkid 想要赢得这场比赛，他想知道**最少**需要多少秒能到达终点。\n\n**请注意，在【数据范围】中有重要的约束条件。**", "inputFormat": "共两行，第一行一个整数 $n$，第二行三个整数 $a,b,c$。", "outputFormat": "输出一个整数表示 kid 通关所需要的的最少秒数。", "hint": "**【样例解释】**\n\n下图是其中一种可行的方案，紫色点为 $\\texttt{A}$ 类点，红色点为 $\\texttt{B}$ 类点：\n\n![](https://s1.ax1x.com/2022/03/06/bBvQPJ.png)\n\n**【数据规模与约定】**\n\n**本题采用 $\\tt Subtask$ 捆绑测试。**\n\n对于 $30\\%$ 的数据，$1<a<b<n\\leq 10^3，0<c\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$1<a<b<n\\leq 10^9，0<c\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8221", "type": "P", "difficulty": 4, "samples": [["2 4\n1 2 3 4\n4 3 2 1", "YES\n1\n0 2"], ["2 4\n1 2 3 4\n4 1 3 2", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "[WFOI - 02] I wanna reverse to reserve（翻转）", "background": "> 君子不器\n\n“我最擅长解谜了，你说是吧，kid。”\n\n“嗯...”", "description": "kid 走进了一个 $n$ 行 $m$ 列的矩阵，**不**保证矩阵中有 $n$ 个数字 $1$，$n$ 个数字 $2$，$\\dots$ , $n$ 个数字 $m$ 但 $n,m$ 均为偶数。\n\n现有两种改变矩阵的方式：\n\n- 选择任意一行，将这一行上的数翻转；\n- 选择任意一列，将这一列上的数翻转。\n\n每次操作可以选择任意一种方式。\n\n现在需要通过若干次操作，将矩阵变为：\n\n$$\nn\\;行\\left\\{\n\\begin{array}{l}\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\n\\\\\n\\cdots\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\end{array}\n\\right.\n\n$$\n\n这样才会出现下一个存档点。\n\n你需要帮 kid 解决这个问题。\n\n你只需要给出答案，剩下的操作就交给 Uvocde 吧！", "inputFormat": "第一行两个正整数 $n$ 和 $m$，以下 $n$ 行，每行 $m$ 个正整数，表示该矩阵。", "outputFormat": "第一行一个字符串，若不可能有可行的操作方式，则输出 `NO`，否则输出 `YES`；\n\n如果输出 `YES`，下一行输出一个非负整数 $ans$，表示一种共需要 $ans$ 次操作。接下来输出 $ans$ 行，每行一个字符和一个数 $k$（中间有空格），这个字符表示这一次操作是翻转行还是翻转列，若是对某一行进行翻转则为 `0`，若翻转某一列则为 `1`，$k$ 表示翻转第几行或是第几列。\n\n若存在可行方案，则只需输出一组可行解即可（不需要使 $ans$ 最小），但你要使 $ans \\le n \\times m$。\n\n本题采用 $\\text{SPJ}$，只要翻转操作正确即可给分。\n\n", "hint": "**【数据范围】**\n\n**本题采用 Subtask 捆绑测试**。\n\n- $\\texttt{Subtask \\#0 (20pts)}$：最多只有 $2$ 个数不在规定位置上；\n- $\\texttt{Subtask \\#1 (20pts)}$：$n=2$；\n- $\\texttt{Subtask \\#2 (20pts)}$：$m=2$；\n- $\\texttt{Subtask \\#3 (40pts)}$：$1\\le n\\le 100$，$1\\le m\\le 100$；\n\n全部数据满足 $1\\le n\\le 100$，$1\\le m\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna reverse to reserve（翻转）", "background": "> 君子不器\n\n“我最擅长解谜了，你说是吧，kid。”\n\n“嗯...”", "description": "kid 走进了一个 $n$ 行 $m$ 列的矩阵，**不**保证矩阵中有 $n$ 个数字 $1$，$n$ 个数字 $2$，$\\dots$ , $n$ 个数字 $m$ 但 $n,m$ 均为偶数。\n\n现有两种改变矩阵的方式：\n\n- 选择任意一行，将这一行上的数翻转；\n- 选择任意一列，将这一列上的数翻转。\n\n每次操作可以选择任意一种方式。\n\n现在需要通过若干次操作，将矩阵变为：\n\n$$\nn\\;行\\left\\{\n\\begin{array}{l}\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\n\\\\\n\\cdots\\\\\n\\\\\n1\\quad2\\quad3\\quad\\cdots\\quad m\\\\\n\\end{array}\n\\right.\n\n$$\n\n这样才会出现下一个存档点。\n\n你需要帮 kid 解决这个问题。\n\n你只需要给出答案，剩下的操作就交给 Uvocde 吧！", "inputFormat": "第一行两个正整数 $n$ 和 $m$，以下 $n$ 行，每行 $m$ 个正整数，表示该矩阵。", "outputFormat": "第一行一个字符串，若不可能有可行的操作方式，则输出 `NO`，否则输出 `YES`；\n\n如果输出 `YES`，下一行输出一个非负整数 $ans$，表示一种共需要 $ans$ 次操作。接下来输出 $ans$ 行，每行一个字符和一个数 $k$（中间有空格），这个字符表示这一次操作是翻转行还是翻转列，若是对某一行进行翻转则为 `0`，若翻转某一列则为 `1`，$k$ 表示翻转第几行或是第几列。\n\n若存在可行方案，则只需输出一组可行解即可（不需要使 $ans$ 最小），但你要使 $ans \\le n \\times m$。\n\n本题采用 $\\text{SPJ}$，只要翻转操作正确即可给分。\n\n", "hint": "**【数据范围】**\n\n**本题采用 Subtask 捆绑测试**。\n\n- $\\texttt{Subtask \\#0 (20pts)}$：最多只有 $2$ 个数不在规定位置上；\n- $\\texttt{Subtask \\#1 (20pts)}$：$n=2$；\n- $\\texttt{Subtask \\#2 (20pts)}$：$m=2$；\n- $\\texttt{Subtask \\#3 (40pts)}$：$1\\le n\\le 100$，$1\\le m\\le 100$；\n\n全部数据满足 $1\\le n\\le 100$，$1\\le m\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P8222", "type": "P", "difficulty": 6, "samples": [["1\n3\n0 0\n0 2\n-1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "凸包", "旋转卡壳", "其它技巧", "洛谷月赛", "双指针 two-pointer"], "title": "[WFOI - 02] I wanna escape the shadow（阴影）", "background": "> Define adventure with death\n>\n> You are the shadow to my life\n\n背景突然阴沉了下来，但是 kid 清楚，这是最黑暗的时刻，也是黎明之前...", "description": "现在 kid 身处一个**圆心为 $(0,0)$，半径为 $r$ 的**圆中，并且学会了一种新的操作 `mklig(X,Y,Z)` 来消除黑暗，具体如下：\n\n$X,Y,Z$ 是三个不同的点，作射线 $XY,ZY$，设两条射线与圆周交于 $d_1,d_2$，那么将 弧 $d_1d_2$，线段 $Yd_1,Yd_2$ 围成的区域照亮。\n\n现在圆内有一些点，记 $S_{光}$ 是圆的半径为 $r$ 的时候被照亮的总面积，现在 kid 想知道在使 $\\lim\\limits_{r \\to \\infty} \\dfrac{S_{光}}{\\pi r^2}$ （可以理解为 r 无穷大时）最大时，最少需要多少次 `mklig` 操作。你只需要给出答案，剩下的操作就交给 €€£ 吧！\n\n数据保证不存在三点共线。", "inputFormat": "**本题有多组数据**\n\n第一行一个整数 $T$，表示数据组数；\n\n对于每组数据：\n\n第一行一个正整数 $n$；\n\n接下来 $n$ 行，每行两个整数，分别表示一个点的横纵坐标。", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。", "hint": "- ####  样例解释\n\n![](https://s1.ax1x.com/2022/03/14/bXTM01.png)\n\n**本题采用 Subtask 捆绑测试。**\n\n- $\\texttt{Subtask \\#0 (30pts)}$：$n = 10^3$ 且数据随机；\n- $\\texttt{Subtask \\#1 (30pts)}$：$n \\le 5$ ；\n- $\\texttt{Subtask \\#2 (40pts)}$：$n \\le 10^6$；\n\n对于每个测试点，保证 $T \\le 5 ，\\sum n\\le 10^6$，点的坐标的绝对值不超过 $10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna escape the shadow（阴影）", "background": "> Define adventure with death\n>\n> You are the shadow to my life\n\n背景突然阴沉了下来，但是 kid 清楚，这是最黑暗的时刻，也是黎明之前...", "description": "现在 kid 身处一个**圆心为 $(0,0)$，半径为 $r$ 的**圆中，并且学会了一种新的操作 `mklig(X,Y,Z)` 来消除黑暗，具体如下：\n\n$X,Y,Z$ 是三个不同的点，作射线 $XY,ZY$，设两条射线与圆周交于 $d_1,d_2$，那么将 弧 $d_1d_2$，线段 $Yd_1,Yd_2$ 围成的区域照亮。\n\n现在圆内有一些点，记 $S_{光}$ 是圆的半径为 $r$ 的时候被照亮的总面积，现在 kid 想知道在使 $\\lim\\limits_{r \\to \\infty} \\dfrac{S_{光}}{\\pi r^2}$ （可以理解为 r 无穷大时）最大时，最少需要多少次 `mklig` 操作。你只需要给出答案，剩下的操作就交给 €€£ 吧！\n\n数据保证不存在三点共线。", "inputFormat": "**本题有多组数据**\n\n第一行一个整数 $T$，表示数据组数；\n\n对于每组数据：\n\n第一行一个正整数 $n$；\n\n接下来 $n$ 行，每行两个整数，分别表示一个点的横纵坐标。", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。", "hint": "- ####  样例解释\n\n![](https://s1.ax1x.com/2022/03/14/bXTM01.png)\n\n**本题采用 Subtask 捆绑测试。**\n\n- $\\texttt{Subtask \\#0 (30pts)}$：$n = 10^3$ 且数据随机；\n- $\\texttt{Subtask \\#1 (30pts)}$：$n \\le 5$ ；\n- $\\texttt{Subtask \\#2 (40pts)}$：$n \\le 10^6$；\n\n对于每个测试点，保证 $T \\le 5 ，\\sum n\\le 10^6$，点的坐标的绝对值不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P8223", "type": "P", "difficulty": 7, "samples": [["3\n2 3 1", "2\n2\n2 0\n1 0"], ["5\n4 2 3 5 1", "3\n3\n3 1\n1 1\n2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "随机化", "构造", "洛谷月赛"], "title": "[WFOI - 02] I wanna moqueve（位移序列）", "background": "> It's my fiesta.\n>\n> 一场前，kid 在 WFOIR1 的地图上，折戟沉沙；一场后，kid 从倒下的地方爬起。\n> \n> kid 成功了，他不再是从前那个他了。\n\n简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/dlxx9pm0)\n\n为什么做完这题你不去做做[这题](https://www.luogu.com.cn/problem/P7999)呢", "description": "kid 需要在一台奇怪的电脑上排序一个 $1\\sim n$ 的排列，下一个存档点才会出现。\n\nkid 可以选择一个数 $x$，然后接下来的每次操作，kid 可以向左或向右循环位移一段长为 $x$ 的序列（最左/右边的会平移至最右/左边）（位移量是 $1$）。\n\n如果 kid 的操作次数超过了 $23\\times n$，排列就会爆炸，kid 将会再次倒下。所以，请告诉 kid 一种还原序列的方案，剩下的操作就交给 €€£ 吧！", "inputFormat": "输入共 $2$ 行：\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数，表示序列 $a$。", "outputFormat": "输出共 $m + 2$ 行。\n\n前两行每行 $1$ 个数，分别是 $x,m$。$m$ 表示操作次数。\n\n接下来 $m$ 行，每行两个数，前一个数表示平移区间左端点，后一个数表示方向，$0$ 为向左，$1$ 为向右；\n\n本题采用 $\\text{SPJ}$，只要循环位移操作正确即可给分。", "hint": "- **样例 $1$ 解释：**\n\t\n    左移 $(2,3)$ 序列变成 $2,1,3$；\n    \n    左移 $(1,2)$ 序列变成 $1,2,3$；\n    \n- **样例 $2$ 解释：** \n\n    右移 $(3,5)$ 序列变成 $4,2,1,3,5$；\n\n\t右移 $(1,3)$ 序列变成 $1,4,2,3,5$；\n    \n    左移 $(2,4)$ 序列变成 $1,2,3,4,5$；\n    \n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0** ($\\texttt{1 pts}$) | $n=1$\n**Subtask #1** ($\\texttt{2 pts}$) | $n=2$\n**Subtask #2** ($\\texttt{3 pts}$) | $n=3$\n**Subtask #3** ($\\texttt{4 pts}$) | $n=4$\n**Subtask #4** ($\\texttt{20 pts}$) | $1\\le n\\le 50$\n**Subtask #5** ($\\texttt{20 pts}$) | $1\\le n\\le 100$\n**Subtask #6** ($\\texttt{50 pts}$) | $1\\le n\\le 10^3$\n\n对于 $100\\%$ 的数据，$1\\le n,a_i\\le 10^3$，数据保证 $a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna moqueve（位移序列）", "background": "> It's my fiesta.\n>\n> 一场前，kid 在 WFOIR1 的地图上，折戟沉沙；一场后，kid 从倒下的地方爬起。\n> \n> kid 成功了，他不再是从前那个他了。\n\n简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/dlxx9pm0)\n\n为什么做完这题你不去做做[这题](https://www.luogu.com.cn/problem/P7999)呢", "description": "kid 需要在一台奇怪的电脑上排序一个 $1\\sim n$ 的排列，下一个存档点才会出现。\n\nkid 可以选择一个数 $x$，然后接下来的每次操作，kid 可以向左或向右循环位移一段长为 $x$ 的序列（最左/右边的会平移至最右/左边）（位移量是 $1$）。\n\n如果 kid 的操作次数超过了 $23\\times n$，排列就会爆炸，kid 将会再次倒下。所以，请告诉 kid 一种还原序列的方案，剩下的操作就交给 €€£ 吧！", "inputFormat": "输入共 $2$ 行：\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数，表示序列 $a$。", "outputFormat": "输出共 $m + 2$ 行。\n\n前两行每行 $1$ 个数，分别是 $x,m$。$m$ 表示操作次数。\n\n接下来 $m$ 行，每行两个数，前一个数表示平移区间左端点，后一个数表示方向，$0$ 为向左，$1$ 为向右；\n\n本题采用 $\\text{SPJ}$，只要循环位移操作正确即可给分。", "hint": "- **样例 $1$ 解释：**\n\t\n    左移 $(2,3)$ 序列变成 $2,1,3$；\n    \n    左移 $(1,2)$ 序列变成 $1,2,3$；\n    \n- **样例 $2$ 解释：** \n\n    右移 $(3,5)$ 序列变成 $4,2,1,3,5$；\n\n\t右移 $(1,3)$ 序列变成 $1,4,2,3,5$；\n    \n    左移 $(2,4)$ 序列变成 $1,2,3,4,5$；\n    \n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0** ($\\texttt{1 pts}$) | $n=1$\n**Subtask #1** ($\\texttt{2 pts}$) | $n=2$\n**Subtask #2** ($\\texttt{3 pts}$) | $n=3$\n**Subtask #3** ($\\texttt{4 pts}$) | $n=4$\n**Subtask #4** ($\\texttt{20 pts}$) | $1\\le n\\le 50$\n**Subtask #5** ($\\texttt{20 pts}$) | $1\\le n\\le 100$\n**Subtask #6** ($\\texttt{50 pts}$) | $1\\le n\\le 10^3$\n\n对于 $100\\%$ 的数据，$1\\le n,a_i\\le 10^3$，数据保证 $a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P8224", "type": "P", "difficulty": 7, "samples": [["5 4 2 3 2 2 2 15\n3 1", "YES\n15\n2 2\n2 3\n3 3\n3 2\n4 2\n4 3\n5 3\n5 2\n5 1\n4 1\n3 1\n2 1\n1 1\n1 2\n1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "提交答案", "Special Judge", "O2优化", "模拟退火", "随机调整", "其它技巧", "构造", "洛谷月赛"], "title": "[WFOI - 02] I wanna cross the grid（穿越网格）", "background": ">  相信奇迹的人，本身比奇迹更伟大吧\n\n突然，存档点落到了一个巨大的网格中，只有走过所有必经区域，才能出现下一个存档点...", "description": "给定一张 $n$ 行 $m$ 列的网格图，行和列从 $1$ 开始编号，定义二元组 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子，每一行的第 $L$ 到第 $R$ 列的格子是必经区域，形式化地，设 $D$ 是必经区域集合，则 $D=\\{(x,y)|1\\leq x\\leq n,L\\leq y\\leq R,x,y\\in N_+\\}$。\n\n每次 kid 可以向上下左右四个方向走一步，且不能超过边界。形式化地，若现在 kid 现在在 $(x,y)$，则 kid 可以走到 $(x+1,y),(x,y+1),(x-1,y),(x,y-1)$。\n\n初始时 kid 在 $(S_x,S_y)$（保证 $S_y=L$），他需要走过所有的必经区域，且任何一个格子最多只经过一次。形式化地，kid 走的路径形如一个二元组序列 $P=(x_1,y_1),(x_2,y_2)...(x_k,y_k)$，需要满足 $\\forall (x_0,y_0)\\in D，\\exist i\\in[1,k]，(x_0,y_0)=(x_i,y_i)$，且 $\\forall i\\not= j，(x_i,y_i)\\not= (x_j,y_j)$。\n\n同时，kid 还要记录一个通关序列 $p$，当 kid 第一次进入某一行的必经区域之后，就要把行号写在当前序列的后面，且立刻经过本行所有的必经区域。同时，$p$ 必须包含一个长度为 $L_q$ 的子序列 $q$ 才是一个合法的通关序列，从而真正通关。形式化地，$p$ 合法当且仅当存在长度为 $L_q$ 的序列 $c$ 满足 $p_{c_i}=q_i$，且 $c$ 单调上升。\n\n同时，为了给 lindongli2004 降低操作难度，lindongli2004 希望 kid 走的步数越少越好。\n\n给定 $n,m,L,R,S_x,S_y,q$，请你为 kid 规划一条通关路线，或者告诉他不存在一条路线。剩下的操作就交给 lindongli2004 吧！", "inputFormat": "第一行 $8$ 个正整数 $n,m,L,R,S_x,S_y,L_q,s$，分别表示矩阵的行数和列数，必经区域的左边界和右边界，起点的 $x$ 坐标和 $y$ 坐标，序列 $q$ 的长度和评分参数。\n\n第二行 $L_q$ 个不重复的正整数，表示序列 $q$ 。", "outputFormat": "第一行一个字符串 `YES` 或者 `NO` 表示是否存在一条路径（不包含引号）。\n\n若存在一条路径，第二行一个正整数 $cnt$ 表示路径长度，接下来 $cnt$ 行每行两个正整数 $x,y$ 表示路径的坐标。", "hint": "#### 数据范围：\n\n$1\\leq L\\leq R\\leq m$，$1\\leq S_x\\leq n$，其他详见下发文件。\n\n#### 评分规则：\n\n下发文件中第一行的最后一个数为 $s$，设你的操作步数为 $cnt$。那么\n - 若 $cnt\\leq s$，你将获得 $10$ 分。\n - 若 $cnt> s$ 且能通关，你将获得 $9- \\frac{cnt-s}{\\lfloor\\frac{n}{2}\\rfloor}$ 分。\n - 若你不能通关，你将获得 $0$ 分。\n \n#### checker：\n\n[自取](/paste/c4omcrf2)\n\n使用方法：在同一目录下，把下发的数据放到 data.in 中，把你的答案放到 data.out 中，编译运行即可。\n\n注意事项：\n - 此 checker 默认存在一组方案，并 check 该方案是否合法。\n - 此 checker 的最大方案容量为 $2.5 \\times 10^{8}$ ，也就是说，你的方案中不能有超过 $2.5 \\times 10^{8}$ 个数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 02] I wanna cross the grid（穿越网格）", "background": ">  相信奇迹的人，本身比奇迹更伟大吧\n\n突然，存档点落到了一个巨大的网格中，只有走过所有必经区域，才能出现下一个存档点...", "description": "给定一张 $n$ 行 $m$ 列的网格图，行和列从 $1$ 开始编号，定义二元组 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子，每一行的第 $L$ 到第 $R$ 列的格子是必经区域，形式化地，设 $D$ 是必经区域集合，则 $D=\\{(x,y)|1\\leq x\\leq n,L\\leq y\\leq R,x,y\\in N_+\\}$。\n\n每次 kid 可以向上下左右四个方向走一步，且不能超过边界。形式化地，若现在 kid 现在在 $(x,y)$，则 kid 可以走到 $(x+1,y),(x,y+1),(x-1,y),(x,y-1)$。\n\n初始时 kid 在 $(S_x,S_y)$（保证 $S_y=L$），他需要走过所有的必经区域，且任何一个格子最多只经过一次。形式化地，kid 走的路径形如一个二元组序列 $P=(x_1,y_1),(x_2,y_2)...(x_k,y_k)$，需要满足 $\\forall (x_0,y_0)\\in D，\\exist i\\in[1,k]，(x_0,y_0)=(x_i,y_i)$，且 $\\forall i\\not= j，(x_i,y_i)\\not= (x_j,y_j)$。\n\n同时，kid 还要记录一个通关序列 $p$，当 kid 第一次进入某一行的必经区域之后，就要把行号写在当前序列的后面，且立刻经过本行所有的必经区域。同时，$p$ 必须包含一个长度为 $L_q$ 的子序列 $q$ 才是一个合法的通关序列，从而真正通关。形式化地，$p$ 合法当且仅当存在长度为 $L_q$ 的序列 $c$ 满足 $p_{c_i}=q_i$，且 $c$ 单调上升。\n\n同时，为了给 lindongli2004 降低操作难度，lindongli2004 希望 kid 走的步数越少越好。\n\n给定 $n,m,L,R,S_x,S_y,q$，请你为 kid 规划一条通关路线，或者告诉他不存在一条路线。剩下的操作就交给 lindongli2004 吧！", "inputFormat": "第一行 $8$ 个正整数 $n,m,L,R,S_x,S_y,L_q,s$，分别表示矩阵的行数和列数，必经区域的左边界和右边界，起点的 $x$ 坐标和 $y$ 坐标，序列 $q$ 的长度和评分参数。\n\n第二行 $L_q$ 个不重复的正整数，表示序列 $q$ 。", "outputFormat": "第一行一个字符串 `YES` 或者 `NO` 表示是否存在一条路径（不包含引号）。\n\n若存在一条路径，第二行一个正整数 $cnt$ 表示路径长度，接下来 $cnt$ 行每行两个正整数 $x,y$ 表示路径的坐标。", "hint": "#### 数据范围：\n\n$1\\leq L\\leq R\\leq m$，$1\\leq S_x\\leq n$，其他详见下发文件。\n\n#### 评分规则：\n\n下发文件中第一行的最后一个数为 $s$，设你的操作步数为 $cnt$。那么\n - 若 $cnt\\leq s$，你将获得 $10$ 分。\n - 若 $cnt> s$ 且能通关，你将获得 $9- \\frac{cnt-s}{\\lfloor\\frac{n}{2}\\rfloor}$ 分。\n - 若你不能通关，你将获得 $0$ 分。\n \n#### checker：\n\n[自取](/paste/c4omcrf2)\n\n使用方法：在同一目录下，把下发的数据放到 data.in 中，把你的答案放到 data.out 中，编译运行即可。\n\n注意事项：\n - 此 checker 默认存在一组方案，并 check 该方案是否合法。\n - 此 checker 的最大方案容量为 $2.5 \\times 10^{8}$ ，也就是说，你的方案中不能有超过 $2.5 \\times 10^{8}$ 个数。", "locale": "zh-CN"}}}
{"pid": "P8225", "type": "P", "difficulty": 1, "samples": [["2\n1 999\n2 999", "aya\nbaka"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数论", "洛谷原创", "洛谷月赛"], "title": "「Wdoi-5」天才⑨与天才拆分", "background": "$\\kern{75pt}$![](https://cdn.luogu.com.cn/upload/image_hosting/ghy90htm.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n萌萌琪露诺在寺子屋的教室里面见到了哆来咪·苏伊特。心怀好意的哆来咪告诉了她期末考试的题目，只要解出这些题目就能免于被慧音老师头槌。兴奋的琪露诺告别了哆来咪，猛然发现自己已经身处在期末考试的考场之上！但是琪露诺实在是太笨了，醒来就把哆来咪告诉她的题目忘得一干二净，只记得试卷上有大量的⑨。\n\n现在琪露诺已经在考试啦，你可以使用⑨的妖精链接回答她的问题，以平复她忘记了考试答案的悲痛。你能帮帮她吗？\n\n温馨提示：考试作弊是不对的哦。", "description": "琪露诺定义一个十进制正整数为「$k$ 阶天才数」，当且仅当该整数的**位数**为 $k$ 的倍数，且**每一个数位**均为 $9$。例如，$9999$ 是 $2$ 阶天才数，而 $999$ 不是 $2$ 阶天才数，但是它是 $1$ 阶天才数，也是 $3$ 阶天才数。\n\n琪露诺给定你 $t$ 个询问，每个询问有两个整数 $n$ 和 $k$，希望你能帮帮她，告诉她能不能把 $n$ 拆分成若干个 $k$ 阶天才数的和。", "inputFormat": "- 第一行是一个整数 $t$，代表询问的个数。\n- 接下来 $t$ 行，每行两个整数 $k$ 和 $n$，代表一个询问。", "outputFormat": "- 输出共 $t$ 行。如果对应的询问答案是可以，输出一行一个字符串 `aya`，否则输出一行一个字符串 `baka`。", "hint": "本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\n{\\text{无特殊限制}}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm t= & \\bm {n_i \\le} & \\bm {k_i \\le} \\cr\\hline\n1 & 1 & 233 & 1 \\cr\\hline\n2\\sim 6 & 1 & 10^3 & 1 \\cr\\hline\n7\\sim 8 & 10 & 10^9 & 1 \\cr\\hline\n9 & 10^3 & 10^9 & 1 \\cr\\hline\n10 & 10^3 & 10^{18} & 1 \\cr\\hline\n11\\sim 20 & 10^3 &  10^{18} & 10 \\cr\\hline\n\\end{array}\n$$\n\n对于全部数据，满足 $1\\le t\\le 10^3$，$1\\le n_i\\le 10^{18}$，$1\\le k_i\\le 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」天才⑨与天才拆分", "background": "$\\kern{75pt}$![](https://cdn.luogu.com.cn/upload/image_hosting/ghy90htm.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n萌萌琪露诺在寺子屋的教室里面见到了哆来咪·苏伊特。心怀好意的哆来咪告诉了她期末考试的题目，只要解出这些题目就能免于被慧音老师头槌。兴奋的琪露诺告别了哆来咪，猛然发现自己已经身处在期末考试的考场之上！但是琪露诺实在是太笨了，醒来就把哆来咪告诉她的题目忘得一干二净，只记得试卷上有大量的⑨。\n\n现在琪露诺已经在考试啦，你可以使用⑨的妖精链接回答她的问题，以平复她忘记了考试答案的悲痛。你能帮帮她吗？\n\n温馨提示：考试作弊是不对的哦。", "description": "琪露诺定义一个十进制正整数为「$k$ 阶天才数」，当且仅当该整数的**位数**为 $k$ 的倍数，且**每一个数位**均为 $9$。例如，$9999$ 是 $2$ 阶天才数，而 $999$ 不是 $2$ 阶天才数，但是它是 $1$ 阶天才数，也是 $3$ 阶天才数。\n\n琪露诺给定你 $t$ 个询问，每个询问有两个整数 $n$ 和 $k$，希望你能帮帮她，告诉她能不能把 $n$ 拆分成若干个 $k$ 阶天才数的和。", "inputFormat": "- 第一行是一个整数 $t$，代表询问的个数。\n- 接下来 $t$ 行，每行两个整数 $k$ 和 $n$，代表一个询问。", "outputFormat": "- 输出共 $t$ 行。如果对应的询问答案是可以，输出一行一个字符串 `aya`，否则输出一行一个字符串 `baka`。", "hint": "本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\n{\\text{无特殊限制}}\n\\def\\arraystretch{1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm t= & \\bm {n_i \\le} & \\bm {k_i \\le} \\cr\\hline\n1 & 1 & 233 & 1 \\cr\\hline\n2\\sim 6 & 1 & 10^3 & 1 \\cr\\hline\n7\\sim 8 & 10 & 10^9 & 1 \\cr\\hline\n9 & 10^3 & 10^9 & 1 \\cr\\hline\n10 & 10^3 & 10^{18} & 1 \\cr\\hline\n11\\sim 20 & 10^3 &  10^{18} & 10 \\cr\\hline\n\\end{array}\n$$\n\n对于全部数据，满足 $1\\le t\\le 10^3$，$1\\le n_i\\le 10^{18}$，$1\\le k_i\\le 10$。", "locale": "zh-CN"}}}
{"pid": "P8226", "type": "P", "difficulty": 3, "samples": [["4 3 2\n1 3 4\n1 1 2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "数论", "洛谷原创", "洛谷月赛"], "title": "「Wdoi-5」樱点收集", "background": "119 季 5 月，明明本应是樱花盛开的春天，幻想乡却依然下着大雪。异变的主谋**西行寺幽幽子**在古书上看到，只要使妖樱西行妖满开便会有什么人复活，便出于兴趣命令妖梦收集幻想乡中的春度，一手策划成了这场异变。在收集春度的过程中散落的能量在西行妖的影响下化为**樱点**，散落在幻想乡各处。\n\n出发解决**春雪异变**的灵梦将前往冥界旅途划分为了若干段，每一段都可以收集到一定的樱点。收集齐一定程度的樱点，就会立即开出樱之结界。开出樱之结界后可以短暂地屏蔽一切攻击，并且获得相应的增益。\n\n但是樱之结界何时开放仅由樱点的收集情况所决定，她不得不对樱点进行「规划」。通过某些途径规避某一段路上樱点的收集，借此使得在将来的某几段路程里，灵梦得以恰好在该段的末尾开放樱之结界。  \n\n但是现实往往不尽人意。也就是说，可能有某些要求无法达成。灵梦希望找出一个方案，使得她可以达成的要求最多。灵梦委托八云紫帮忙决策，于是这个重任就被一条懒紫交给了式神八云蓝。尽管八云蓝擅长计算，但是八云紫睡觉去了没有给她编程，因而现在这个任务就落到了你的手上。", "description": "灵梦当前拥有的樱点可以使用一个**变量** $c$ 存储，初始时为 $0$。当樱点在某个瞬间**恰好**变为了 $k$，灵梦就会展开樱之结界，同时 $c$ 变为 $0$。\n\n现在她把路程**依次**划分为了 $n$ 个关卡，其中第 $i$ 关上，灵梦一共可以获得 $a_i$ 点樱点。这些樱点是均匀分布在这关的路程上的。也就是说，随着这段路程的进行，灵梦的樱点个数会依次增加，每次增加 $1$ 个单位（$c\\gets c+1$），恰好在这段路程结束的瞬间会收集到这关中第 $a_i$ 点樱点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3yuiywt0.png)\n\n**【需要注意的是，这只是图示参考，不满足实际的数据限制。】**\n\n在这个例子里，灵梦将路径划分为了四个关卡。这四个关卡的樱点个数分别为 $2,0,3,1$。\n\n灵梦提出了 $m$ 个要求。第 $i$ 个要求 $b_i$ 表示灵梦希望在第 $b_i$ 段路程结束的瞬间，**恰好**展开樱之结界（如果在这段路程的中途展开但是结束的瞬间没有展开，那就不算达成了要求）。\n\n灵梦可以选择在某个关卡开头放 bomb，**跳过**整个关卡的樱点收集。这样的机会**有且仅有**一次（当然，灵梦可以选择不使用 bomb）。\n\n现在需要求出，在最优的选择下，灵梦**最多**可以达成多少个要求。", "inputFormat": "- 第一行共有三个整数 $n,m,k$，分别表示关卡数、要求个数，以及常量 $k$。\n- 第二行 $m$ 个整数 $b_1,b_2,\\cdots b_m$，描述了灵梦的 $m$ 个要求。**保证 $\\bm{b_i}$ 单调递增**。\n- 第三行 $n$ 个整数 $a_1,a_2,\\cdots a_n$，描述了第 $i$ 关可以获得的樱点个数。", "outputFormat": "- 共一行一个整数，表示答案。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{sukura2.in/sakura2.ans}}$。该样例约束与测试点 $1\\sim 8$ 一致。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{sukura3.in/sakura3.ans}}$。该样例约束与测试点 $9\\sim 14$ 一致。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{sukura4.in/sakura4.ans}}$。该样例约束与测试点 $15\\sim 20$ 一致。\n\n#### 样例 1 解释\n\n- 在不使用 bomb 时，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $1$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $2$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $3$ 关使用 bomb，灵梦会在第 $2$ 关开出樱之结界，且第 $2$ 关不在统计序列中，满足要求数为 $0$。\n- 在第 $4$ 关使用 bomb，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在序列中，满足要求数为 $1$。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{k\\le} \\cr\\hline\n1\\sim 8 & 200 & 10^3 \\cr\\hline\n9\\sim 14 & 2\\times 10^3 & 10^5 \\cr\\hline\n15\\sim 20 & 3\\times 10^5 & 10^6 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le 3\\times 10^5$，$1\\le k\\le 10^6$，$1\\le a_i\\le 10^9$，$1 \\le b_i \\le n$，$b$ 序列递增。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」樱点收集", "background": "119 季 5 月，明明本应是樱花盛开的春天，幻想乡却依然下着大雪。异变的主谋**西行寺幽幽子**在古书上看到，只要使妖樱西行妖满开便会有什么人复活，便出于兴趣命令妖梦收集幻想乡中的春度，一手策划成了这场异变。在收集春度的过程中散落的能量在西行妖的影响下化为**樱点**，散落在幻想乡各处。\n\n出发解决**春雪异变**的灵梦将前往冥界旅途划分为了若干段，每一段都可以收集到一定的樱点。收集齐一定程度的樱点，就会立即开出樱之结界。开出樱之结界后可以短暂地屏蔽一切攻击，并且获得相应的增益。\n\n但是樱之结界何时开放仅由樱点的收集情况所决定，她不得不对樱点进行「规划」。通过某些途径规避某一段路上樱点的收集，借此使得在将来的某几段路程里，灵梦得以恰好在该段的末尾开放樱之结界。  \n\n但是现实往往不尽人意。也就是说，可能有某些要求无法达成。灵梦希望找出一个方案，使得她可以达成的要求最多。灵梦委托八云紫帮忙决策，于是这个重任就被一条懒紫交给了式神八云蓝。尽管八云蓝擅长计算，但是八云紫睡觉去了没有给她编程，因而现在这个任务就落到了你的手上。", "description": "灵梦当前拥有的樱点可以使用一个**变量** $c$ 存储，初始时为 $0$。当樱点在某个瞬间**恰好**变为了 $k$，灵梦就会展开樱之结界，同时 $c$ 变为 $0$。\n\n现在她把路程**依次**划分为了 $n$ 个关卡，其中第 $i$ 关上，灵梦一共可以获得 $a_i$ 点樱点。这些樱点是均匀分布在这关的路程上的。也就是说，随着这段路程的进行，灵梦的樱点个数会依次增加，每次增加 $1$ 个单位（$c\\gets c+1$），恰好在这段路程结束的瞬间会收集到这关中第 $a_i$ 点樱点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3yuiywt0.png)\n\n**【需要注意的是，这只是图示参考，不满足实际的数据限制。】**\n\n在这个例子里，灵梦将路径划分为了四个关卡。这四个关卡的樱点个数分别为 $2,0,3,1$。\n\n灵梦提出了 $m$ 个要求。第 $i$ 个要求 $b_i$ 表示灵梦希望在第 $b_i$ 段路程结束的瞬间，**恰好**展开樱之结界（如果在这段路程的中途展开但是结束的瞬间没有展开，那就不算达成了要求）。\n\n灵梦可以选择在某个关卡开头放 bomb，**跳过**整个关卡的樱点收集。这样的机会**有且仅有**一次（当然，灵梦可以选择不使用 bomb）。\n\n现在需要求出，在最优的选择下，灵梦**最多**可以达成多少个要求。", "inputFormat": "- 第一行共有三个整数 $n,m,k$，分别表示关卡数、要求个数，以及常量 $k$。\n- 第二行 $m$ 个整数 $b_1,b_2,\\cdots b_m$，描述了灵梦的 $m$ 个要求。**保证 $\\bm{b_i}$ 单调递增**。\n- 第三行 $n$ 个整数 $a_1,a_2,\\cdots a_n$，描述了第 $i$ 关可以获得的樱点个数。", "outputFormat": "- 共一行一个整数，表示答案。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{sukura2.in/sakura2.ans}}$。该样例约束与测试点 $1\\sim 8$ 一致。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{sukura3.in/sakura3.ans}}$。该样例约束与测试点 $9\\sim 14$ 一致。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{sukura4.in/sakura4.ans}}$。该样例约束与测试点 $15\\sim 20$ 一致。\n\n#### 样例 1 解释\n\n- 在不使用 bomb 时，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $1$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $2$ 关使用 bomb，灵梦会在第 $4$ 关开出樱之结界，且第 $4$ 关在统计序列中，满足要求数为 $1$。\n- 在第 $3$ 关使用 bomb，灵梦会在第 $2$ 关开出樱之结界，且第 $2$ 关不在统计序列中，满足要求数为 $0$。\n- 在第 $4$ 关使用 bomb，灵梦会在第 $2$、$3$ 关开出樱之结界，其中第 $3$ 关在序列中，满足要求数为 $1$。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{k\\le} \\cr\\hline\n1\\sim 8 & 200 & 10^3 \\cr\\hline\n9\\sim 14 & 2\\times 10^3 & 10^5 \\cr\\hline\n15\\sim 20 & 3\\times 10^5 & 10^6 \\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le 3\\times 10^5$，$1\\le k\\le 10^6$，$1\\le a_i\\le 10^9$，$1 \\le b_i \\le n$，$b$ 序列递增。", "locale": "zh-CN"}}}
{"pid": "P8227", "type": "P", "difficulty": 6, "samples": [["14\n((()())(()()))\n()()()()()()()", "6"], ["14\n((()())(()()))\n(()())(()())()", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "递归", "洛谷原创", "树形 DP", "洛谷月赛", "双指针 two-pointer"], "title": "「Wdoi-5」建立与摧毁的结界", "background": "八云紫拥有操控境界程度的能力。作为其式神的八云蓝，同样拥有一定程度的操作境界的能力，而作为八云蓝的式神橙，却因为功力尚且不足，而无法对境界进行过多的干预了。\n\n于是八云蓝打算教教橙，境界的用法。境界可以被抽象成一层一层的括号，操作境界本质上就是对括号序列进行修改。由于橙的能力尚且不足，因此只能进行一些简单的境界的建立与摧毁。\n\n尽管如此，通过简单的操作，亦可以把一个境界转换为另外一个境界。为了给橙作为练习，蓝找来了两个境界的范本。将其中一个境界转换为另外一个境界的难度，就是橙需要施用能力的最小次数。但是由于境界实在太长，蓝决定写一个程序（？）来帮帮她计算出境界的难度。", "description": "境界可以被抽象为由圆括号组成的括号序列。现做出如下定义：\n\n- 定义 $D_i$ 为**嵌套括号序列**。其中 $D_0$ 为零阶嵌套括号序列，被定义为单组括号 $\\verb!()!$；而 $D_k$ 则为 $k$ 阶嵌套括号序列（$k \\geq 1$）定义为 $\\verb!(!D_{k-1}\\verb!)!$，即在 $D_{k-1}$ 的外层增添了一层括号。\n- 定义 $F_i$ 为**平铺括号序列**。其中 $F_0$ 为零阶平铺括号序列，被定义为单组括号 $\\verb!()!$；而 $F_k$ 则为 $k$ 阶平铺括号序列（$k \\geq 1$），定义为 $\\verb!()!F_{k-1}$，即在 $F_{k-1}$ 的左侧增添了一对括号。\n\n例如，$\\verb!((()))!$ 为 $D_2$，$\\verb!()()()()!$ 为 $F_{3}$。\n\n现在蓝给出了两个长度为 $n$ 的**合法**括号序列 $A$ 和 $B$。橙可以用以下操作对序列 $A$ 进行变换：\n\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶嵌套括号序列，然后将其变为 $k$ 阶平铺括号序列。\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶平铺括号序列，然后将其变为 $k$ 阶嵌套括号序列。\n\n**提示说明**处有「合法括号序列」与「子串」的定义。\n\n现在需要求出将序列 $A$ 变换为序列 $B$ 所需的最少操作数。可以证明，总存在一种操作方案能将序列 $A$ 变换为序列 $B$。", "inputFormat": "- 第一行共有一个整数 $n$，表示 $A$ 与 $B$ 括号序列的长度。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $A$。保证序列 $A$ 合法。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $B$。保证序列 $B$ 合法。", "outputFormat": "- 共一行，一个整数，表示将 $A$ 转换为 $B$ 需要的最少步数（可能为 $0$，也就是不进行任何操作）。", "hint": "样例 $3$ 见下发的附件  $\\textbf{\\textit{border3.in/border3.ans}}$。  \n样例 $4$ 见下发的附件  $\\textbf{\\textit{border4.in/border4.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $5$ 见下发的附件  $\\textbf{\\textit{border5.in/border5.ans}}$。  \n\n#### 样例 1 解释\n\n- 第一步：$\\texttt{((\\underline{()()})(()()))}\\to\\texttt{((\\underline{(())})(()()))}$。\n- 第二步：$\\texttt{(((()))(\\underline{()()}))}\\to\\texttt{(((()))(\\underline{(())}))}$。\n- 第三步：$\\texttt{(((()))\\underline{((()))})}\\to\\texttt{(((()))\\underline{()()()})}$。\n- 第四步：$\\texttt{(\\underline{((()))}()()())}\\to\\texttt{(\\underline{()()()}()()())}$。\n- 第五步：$\\texttt{(\\underline{()()()()()()})}\\to\\texttt{(\\underline{(((((())))))})}$。\n- 第六步：$\\texttt{\\underline{((((((()))))))}}\\to\\texttt{\\underline{()()()()()()()}}$。\n\n可以证明，不存在更短的方案。\n\n#### 提示\n\n**合法括号序列**通过这样一个形式定义：\n\n- $\\verb!()!$ 是合法括号序列。\n- 若 $A$ 是合法括号序列，那么 $\\verb!(!A\\verb!)!$ 是合法括号序列。\n- 若 $A,B$ 均为合法括号序列，那么 $AB$ 是合法括号序列。\n\n我们称 $A$ 是 $B$ 的**子串**，当且仅当删除 $B$ 开头若干个字符（可以不删除），再删除 $B$ 末尾若干个字符（可以不删除），剩下来的字符序列与 $A$ 完全相同。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\textbf{特殊性质} \\cr\\hline\n1\\sim 4 & 10 & - \\cr\\hline\n5\\sim 7 & 2\\times 10^3 & \\text{A} \\cr\\hline\n8\\sim 10 & 2\\times 10^3 & - \\cr\\hline\n11\\sim 15 & 10^6 & \\text{A} \\cr\\hline\n16\\sim 20 & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $B$ 是 $(n\\div 2-1)$ 阶平铺括号序列。\n\n#### 友情提醒\n\n考虑到选手可能会用不同的方式进行字符串的读入，这里保证输入文件**每行末尾没有多余空格**，并且每行都以 `\\n` 结尾（也就是说，不会出现多余的 `\\r`）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」建立与摧毁的结界", "background": "八云紫拥有操控境界程度的能力。作为其式神的八云蓝，同样拥有一定程度的操作境界的能力，而作为八云蓝的式神橙，却因为功力尚且不足，而无法对境界进行过多的干预了。\n\n于是八云蓝打算教教橙，境界的用法。境界可以被抽象成一层一层的括号，操作境界本质上就是对括号序列进行修改。由于橙的能力尚且不足，因此只能进行一些简单的境界的建立与摧毁。\n\n尽管如此，通过简单的操作，亦可以把一个境界转换为另外一个境界。为了给橙作为练习，蓝找来了两个境界的范本。将其中一个境界转换为另外一个境界的难度，就是橙需要施用能力的最小次数。但是由于境界实在太长，蓝决定写一个程序（？）来帮帮她计算出境界的难度。", "description": "境界可以被抽象为由圆括号组成的括号序列。现做出如下定义：\n\n- 定义 $D_i$ 为**嵌套括号序列**。其中 $D_0$ 为零阶嵌套括号序列，被定义为单组括号 $\\verb!()!$；而 $D_k$ 则为 $k$ 阶嵌套括号序列（$k \\geq 1$）定义为 $\\verb!(!D_{k-1}\\verb!)!$，即在 $D_{k-1}$ 的外层增添了一层括号。\n- 定义 $F_i$ 为**平铺括号序列**。其中 $F_0$ 为零阶平铺括号序列，被定义为单组括号 $\\verb!()!$；而 $F_k$ 则为 $k$ 阶平铺括号序列（$k \\geq 1$），定义为 $\\verb!()!F_{k-1}$，即在 $F_{k-1}$ 的左侧增添了一对括号。\n\n例如，$\\verb!((()))!$ 为 $D_2$，$\\verb!()()()()!$ 为 $F_{3}$。\n\n现在蓝给出了两个长度为 $n$ 的**合法**括号序列 $A$ 和 $B$。橙可以用以下操作对序列 $A$ 进行变换：\n\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶嵌套括号序列，然后将其变为 $k$ 阶平铺括号序列。\n- 选择任意非负整数 $k$，选择括号序列的一个子串满足其为一个 $k$ 阶平铺括号序列，然后将其变为 $k$ 阶嵌套括号序列。\n\n**提示说明**处有「合法括号序列」与「子串」的定义。\n\n现在需要求出将序列 $A$ 变换为序列 $B$ 所需的最少操作数。可以证明，总存在一种操作方案能将序列 $A$ 变换为序列 $B$。", "inputFormat": "- 第一行共有一个整数 $n$，表示 $A$ 与 $B$ 括号序列的长度。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $A$。保证序列 $A$ 合法。\n- 接下来一行，共有 $n$ 个字符，描述括号序列 $B$。保证序列 $B$ 合法。", "outputFormat": "- 共一行，一个整数，表示将 $A$ 转换为 $B$ 需要的最少步数（可能为 $0$，也就是不进行任何操作）。", "hint": "样例 $3$ 见下发的附件  $\\textbf{\\textit{border3.in/border3.ans}}$。  \n样例 $4$ 见下发的附件  $\\textbf{\\textit{border4.in/border4.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $5$ 见下发的附件  $\\textbf{\\textit{border5.in/border5.ans}}$。  \n\n#### 样例 1 解释\n\n- 第一步：$\\texttt{((\\underline{()()})(()()))}\\to\\texttt{((\\underline{(())})(()()))}$。\n- 第二步：$\\texttt{(((()))(\\underline{()()}))}\\to\\texttt{(((()))(\\underline{(())}))}$。\n- 第三步：$\\texttt{(((()))\\underline{((()))})}\\to\\texttt{(((()))\\underline{()()()})}$。\n- 第四步：$\\texttt{(\\underline{((()))}()()())}\\to\\texttt{(\\underline{()()()}()()())}$。\n- 第五步：$\\texttt{(\\underline{()()()()()()})}\\to\\texttt{(\\underline{(((((())))))})}$。\n- 第六步：$\\texttt{\\underline{((((((()))))))}}\\to\\texttt{\\underline{()()()()()()()}}$。\n\n可以证明，不存在更短的方案。\n\n#### 提示\n\n**合法括号序列**通过这样一个形式定义：\n\n- $\\verb!()!$ 是合法括号序列。\n- 若 $A$ 是合法括号序列，那么 $\\verb!(!A\\verb!)!$ 是合法括号序列。\n- 若 $A,B$ 均为合法括号序列，那么 $AB$ 是合法括号序列。\n\n我们称 $A$ 是 $B$ 的**子串**，当且仅当删除 $B$ 开头若干个字符（可以不删除），再删除 $B$ 末尾若干个字符（可以不删除），剩下来的字符序列与 $A$ 完全相同。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\textbf{特殊性质} \\cr\\hline\n1\\sim 4 & 10 & - \\cr\\hline\n5\\sim 7 & 2\\times 10^3 & \\text{A} \\cr\\hline\n8\\sim 10 & 2\\times 10^3 & - \\cr\\hline\n11\\sim 15 & 10^6 & \\text{A} \\cr\\hline\n16\\sim 20 & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $B$ 是 $(n\\div 2-1)$ 阶平铺括号序列。\n\n#### 友情提醒\n\n考虑到选手可能会用不同的方式进行字符串的读入，这里保证输入文件**每行末尾没有多余空格**，并且每行都以 `\\n` 结尾（也就是说，不会出现多余的 `\\r`）。", "locale": "zh-CN"}}}
{"pid": "P8228", "type": "P", "difficulty": 4, "samples": [["4 3\n0 1 1 3 4\n3 0 3 3 3\n1 0 0 2 2", "4 4 4 0 4 4 4 4 3 4 4 4 4 7 3 0 4 4 6 9 3 3 0 4 6 6 5 3 0 0 2 2 3 0 0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创", "O2优化", "差分", "洛谷月赛"], "title": "「Wdoi-5」模块化核熔炉", "background": "为了通过使用核聚变获得能源，守矢神社在旧地狱修建了巨大的核融合控制中心。控制中心形如双层八卦炉，通过各种电路紧密地调控着核融合的精密运行。获得了八咫鸟力量的阿空会在核反应炉的中心点燃神火。\n\n但是正八边形的八卦炉并不利于进行拓展与维护。为了方便地实现电路，河童打算对核控制中心进行模块化改造，以实现核熔炉的维护。具体而言，河童打算将核控制中心设计成由若干个正六边形组成的巨大结构。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ohyfxv02.png)\n\n被赋予了神力的阿空可以依次激发其中的一些模块，而这些被激发的模块会快速影响到一定范围内的其他的模块。通过模块间的链接实现能量的产生。\n\n但是因为阿空脑袋空空，由于它已经激发了多次模块，它已经记不清每个模块当中产生的核融合程度了。你能帮帮它吗？", "description": "核控制中心可以看作由若干个正六边形模块组成的六边形阵列。阵列当中每个模块都可以储存核融合能量（一个非负整数）。左图就是一个核控制中心示意图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/78y7b98x.png)\n\n我们使用如下方式对控制中心中每个模块进行标号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ffz2m5o.png)\n\n以阵列中心为原点延伸出三根射线作为三根轴，每两根轴之间的夹角为 $120\\degree$。这三根轴将平面划分为了三个部分。每个模块都可以使用一个三元组 $(x,y,z)$ 描述它的坐标，表示从原点开始按如图所示的 $x,y,z$ 方向各走若干步之后到达的地方。为了防止出现多个坐标表示同一个模块的情况，做出如下规定：原点的坐标为 $(0,0,0)$；对于中心在坐标轴上的模块，它的坐标就是从原点向所在轴走过的距离；对于其他情况，我们将平面划分为了三个区域（如第二张图的红蓝绿三个区域），一个模块的坐标就是沿着它两侧的轴分别需要走的距离。例如模块 $P$ 的坐标为 $(2,4,0)$。容易发现，每个坐标唯一对应一个模块，一个模块唯一对应一个坐标。\n\n同时定义，两个模块的**距离**为从一个模块到另一个模块需要经过模块（包括起点和终点）的最少个数。在第一张图中，红色部分的模块到其中心距离均不超过 $3$，绿色部分的模块到其中心距离均不超过 $3$，而蓝色部分的模块到其中心距离均不超过 $2$。\n\n核控制中心可以视为到达原点距离不超过 $n$ 的模块组成的阵列。现在阿空会执行以下操作 $m$ 次：\n\n- $\\colorbox{f0f0f0}{\\verb!x y z r k!}$ ：激活坐标为 $(x,y,z)$ 的模块。它会使控制中心中到它距离不超过 $r$ 的**所有**的模块的核融合能量增加 $k$。保证 $(x,y,z)$ 在控制中心当中。\n\n现在需要求出，执行完 $m$ 个操作后，每个模块里核融合能量值。", "inputFormat": "- 第一行共两个正整数 $n,m$，分别表示控制中心的大小、操作个数。\n- 接下来 $m$ 行，每行有五个整数 $x_i,y_i,z_i,r_i,k_i$，表示将距离 $(x_i,y_i,z_i)$ 不超过 $r$ 的所有模块的核融合能量增加 $k_i$。", "outputFormat": "- 共一行，若干个整数。按照从左往右从上往下的顺序，依次输出每个模块当中核融合能量值。每两个值之间使用空格隔开。\n\n下图当中的红色箭头展示了「从左往右从上往下」的顺序。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vziqfo7l.png)", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{nuclear2.in/nuclear2.ans}}$。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{nuclear3.in/nuclear3.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{nuclear4.in/nuclear4.ans}}$。满足特殊性质 $\\text{B}$（见下文）。  \n样例 $5$ 见下发的附件 $\\textbf{\\textit{nuclear5.in/nuclear5.ans}}$。\n\n#### 样例 1 解释\n\n如图所示（所有未标出数字的模块的核融合能量值均为 $0$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6y7bm2eb.png)\n\n\n\n按照从左往右、从上往下的顺序依次输出每个数值，即可得到答案。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{特殊性质} \\cr\\hline\n1\\sim 3 & 10 & 10 & \\text{A} \\cr\\hline\n4\\sim 7 & 100 & 300 & - \\cr\\hline\n8\\sim 10 & 800 & 3\\times 10^5 & \\text{B} \\cr\\hline\n11\\sim 14 & 800 & 3\\times 10^5 & \\text{A} \\cr\\hline\n15\\sim 20 & 800 & 3\\times 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证对于第 $i$ 次操作，被激活的模块到控制中心边缘上的模块的距离不小于 $r_i$。  \n**特殊性质** $\\textbf{B}$：保证对于第 $i$ 次操作，被激活的模块均为 $(0,0,0)$。\n\n对于全部数据，保证 $n\\le 800$，$m\\le 3\\times 10^5$，$1\\le k_i\\le 5\\times 10^3$，$1\\le r_i\\le 10^9$。每次激活的模块都在控制中心里。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-5」模块化核熔炉", "background": "为了通过使用核聚变获得能源，守矢神社在旧地狱修建了巨大的核融合控制中心。控制中心形如双层八卦炉，通过各种电路紧密地调控着核融合的精密运行。获得了八咫鸟力量的阿空会在核反应炉的中心点燃神火。\n\n但是正八边形的八卦炉并不利于进行拓展与维护。为了方便地实现电路，河童打算对核控制中心进行模块化改造，以实现核熔炉的维护。具体而言，河童打算将核控制中心设计成由若干个正六边形组成的巨大结构。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ohyfxv02.png)\n\n被赋予了神力的阿空可以依次激发其中的一些模块，而这些被激发的模块会快速影响到一定范围内的其他的模块。通过模块间的链接实现能量的产生。\n\n但是因为阿空脑袋空空，由于它已经激发了多次模块，它已经记不清每个模块当中产生的核融合程度了。你能帮帮它吗？", "description": "核控制中心可以看作由若干个正六边形模块组成的六边形阵列。阵列当中每个模块都可以储存核融合能量（一个非负整数）。左图就是一个核控制中心示意图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/78y7b98x.png)\n\n我们使用如下方式对控制中心中每个模块进行标号。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ffz2m5o.png)\n\n以阵列中心为原点延伸出三根射线作为三根轴，每两根轴之间的夹角为 $120\\degree$。这三根轴将平面划分为了三个部分。每个模块都可以使用一个三元组 $(x,y,z)$ 描述它的坐标，表示从原点开始按如图所示的 $x,y,z$ 方向各走若干步之后到达的地方。为了防止出现多个坐标表示同一个模块的情况，做出如下规定：原点的坐标为 $(0,0,0)$；对于中心在坐标轴上的模块，它的坐标就是从原点向所在轴走过的距离；对于其他情况，我们将平面划分为了三个区域（如第二张图的红蓝绿三个区域），一个模块的坐标就是沿着它两侧的轴分别需要走的距离。例如模块 $P$ 的坐标为 $(2,4,0)$。容易发现，每个坐标唯一对应一个模块，一个模块唯一对应一个坐标。\n\n同时定义，两个模块的**距离**为从一个模块到另一个模块需要经过模块（包括起点和终点）的最少个数。在第一张图中，红色部分的模块到其中心距离均不超过 $3$，绿色部分的模块到其中心距离均不超过 $3$，而蓝色部分的模块到其中心距离均不超过 $2$。\n\n核控制中心可以视为到达原点距离不超过 $n$ 的模块组成的阵列。现在阿空会执行以下操作 $m$ 次：\n\n- $\\colorbox{f0f0f0}{\\verb!x y z r k!}$ ：激活坐标为 $(x,y,z)$ 的模块。它会使控制中心中到它距离不超过 $r$ 的**所有**的模块的核融合能量增加 $k$。保证 $(x,y,z)$ 在控制中心当中。\n\n现在需要求出，执行完 $m$ 个操作后，每个模块里核融合能量值。", "inputFormat": "- 第一行共两个正整数 $n,m$，分别表示控制中心的大小、操作个数。\n- 接下来 $m$ 行，每行有五个整数 $x_i,y_i,z_i,r_i,k_i$，表示将距离 $(x_i,y_i,z_i)$ 不超过 $r$ 的所有模块的核融合能量增加 $k_i$。", "outputFormat": "- 共一行，若干个整数。按照从左往右从上往下的顺序，依次输出每个模块当中核融合能量值。每两个值之间使用空格隔开。\n\n下图当中的红色箭头展示了「从左往右从上往下」的顺序。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vziqfo7l.png)", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{nuclear2.in/nuclear2.ans}}$。  \n样例 $3$ 见下发的附件 $\\textbf{\\textit{nuclear3.in/nuclear3.ans}}$。满足特殊性质 $\\text{A}$（见下文）。  \n样例 $4$ 见下发的附件 $\\textbf{\\textit{nuclear4.in/nuclear4.ans}}$。满足特殊性质 $\\text{B}$（见下文）。  \n样例 $5$ 见下发的附件 $\\textbf{\\textit{nuclear5.in/nuclear5.ans}}$。\n\n#### 样例 1 解释\n\n如图所示（所有未标出数字的模块的核融合能量值均为 $0$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6y7bm2eb.png)\n\n\n\n按照从左往右、从上往下的顺序依次输出每个数值，即可得到答案。\n\n#### 数据范围及约定\n\n本题共有 $20$ 个测试点，每个测试点 $5$ 分。最终分数为所有测试点分数之和。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Task} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{特殊性质} \\cr\\hline\n1\\sim 3 & 10 & 10 & \\text{A} \\cr\\hline\n4\\sim 7 & 100 & 300 & - \\cr\\hline\n8\\sim 10 & 800 & 3\\times 10^5 & \\text{B} \\cr\\hline\n11\\sim 14 & 800 & 3\\times 10^5 & \\text{A} \\cr\\hline\n15\\sim 20 & 800 & 3\\times 10^5 & - \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证对于第 $i$ 次操作，被激活的模块到控制中心边缘上的模块的距离不小于 $r_i$。  \n**特殊性质** $\\textbf{B}$：保证对于第 $i$ 次操作，被激活的模块均为 $(0,0,0)$。\n\n对于全部数据，保证 $n\\le 800$，$m\\le 3\\times 10^5$，$1\\le k_i\\le 5\\times 10^3$，$1\\le r_i\\le 10^9$。每次激活的模块都在控制中心里。", "locale": "zh-CN"}}}
{"pid": "P8229", "type": "P", "difficulty": 5, "samples": [["4\n1 2 499122177\n3 2 499122177\n10 2 499122177\n1000000000000000000 100 16235235", "499122177\n748683267\n748683281\n565383148"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 抛硬币", "background": "", "description": "伊利找到了一个魔法数字 $K$，一个装满草莓的魔法篮子，还有一个魔法硬币。\n\n伊利注意到，当抛硬币时，它有 $P$ 的概率概率朝上。随后她抛了 $n$ 次硬币，如果硬币朝上篮子里的草莓会变成原来的 $K$ 倍。否则，她会吃掉篮子里的所有草莓，吃完后篮子会神奇地变出一颗新的草莓。\n\n伊利现在很好奇她在抛 $n$ 次硬币后期望会吃多少草莓。请你告诉她答案在 $\\bmod\\ 998244353$ 意义下的答案。", "inputFormat": "第一行一个数 $T$，表示数据组数。\n\n接下来 $T$ 行，每一行三个数表示 $n,K,P$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，满足 $1\\leq T\\leq 10^5$，$1\\leq n \\leq 10^{18}$，$0\\leq K,P<998244353$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round A CoinFlip](https://judge.agm-contest.com/public/problems/21/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 抛硬币", "background": "", "description": "伊利找到了一个魔法数字 $K$，一个装满草莓的魔法篮子，还有一个魔法硬币。\n\n伊利注意到，当抛硬币时，它有 $P$ 的概率概率朝上。随后她抛了 $n$ 次硬币，如果硬币朝上篮子里的草莓会变成原来的 $K$ 倍。否则，她会吃掉篮子里的所有草莓，吃完后篮子会神奇地变出一颗新的草莓。\n\n伊利现在很好奇她在抛 $n$ 次硬币后期望会吃多少草莓。请你告诉她答案在 $\\bmod\\ 998244353$ 意义下的答案。", "inputFormat": "第一行一个数 $T$，表示数据组数。\n\n接下来 $T$ 行，每一行三个数表示 $n,K,P$。", "outputFormat": "$T$ 行，每行一个正整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，满足 $1\\leq T\\leq 10^5$，$1\\leq n \\leq 10^{18}$，$0\\leq K,P<998244353$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round A CoinFlip](https://judge.agm-contest.com/public/problems/21/text)。", "locale": "zh-CN"}}}
{"pid": "P8230", "type": "P", "difficulty": 3, "samples": [["1 5 5\n0 0 0 0 1\n0 0 0 0 0\n0 0 1 0 0\n0 0 0 0 1\n5 0 0 0 0", "4\n"], ["2 5 5\n0 0 -9 0 1\n0 0 -9 -9 -9\n0 0 1 0 0\n0 0 -1 0 1\n4 0 0 0 0\n0 0 0 0 1\n0 0 0 0 0\n0 0 3 0 0\n0 0 0 0 1\n5 0 0 0 0", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 地牢", "background": "", "description": "丹尼是 Dungeon Crawlers 的狂热粉丝。最近，他想知道电脑是否可以玩这个游戏，而他想让你帮他试一试。\n\n游戏分为 $L$ 个关卡，每个关卡都有 $N\\times M$ 个单元格。单元格有以下几种：\n\n* `0` 代表一个空单元格。\n\n* `-1` 代表通往下一个关卡的出口，进入下一关后初始位置在这个出口的位置，除了最后一关没有出口，每个关卡都只有一个出口。\n\n* `-9` 代表无法通过的障碍物。\n\n* `x` 一个整数 $x(1\\leq x\\leq 10^9)$ ，代表敌人的能力值。\n\n为了击败敌人，你的能力值需要大于或等于它的能力值。打败它后，你自己的能力值就会增加与被击败的敌人的能力值相等的值。你可以走上下左右四个单元格，有敌人的格子必须击败才能通过。出口是强制传送的，不能经过出口而不传送。\n\n假设初始的能力值为 $1$，你从地牢第一层左上角的 $(1,1)$ 开始，在最后一层的任意位置结束游戏。那么你能达到的最大能力值是多少？数据保证始终存在一条通往最后一关的路径。", "inputFormat": "第一行三个整数 $L,N,M$。\n\n接下来 $L$ 个矩阵，每个矩阵有 $N$ 行 $M$ 列共 $N\\times M$ 个整数表示单元格的种类。\n\n保证 $(1,1)$ 位置上数为 $0$。", "outputFormat": "一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq L\\times N\\times M\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round B Dungeon](https://judge.agm-contest.com/public/problems/7/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 地牢", "background": "", "description": "丹尼是 Dungeon Crawlers 的狂热粉丝。最近，他想知道电脑是否可以玩这个游戏，而他想让你帮他试一试。\n\n游戏分为 $L$ 个关卡，每个关卡都有 $N\\times M$ 个单元格。单元格有以下几种：\n\n* `0` 代表一个空单元格。\n\n* `-1` 代表通往下一个关卡的出口，进入下一关后初始位置在这个出口的位置，除了最后一关没有出口，每个关卡都只有一个出口。\n\n* `-9` 代表无法通过的障碍物。\n\n* `x` 一个整数 $x(1\\leq x\\leq 10^9)$ ，代表敌人的能力值。\n\n为了击败敌人，你的能力值需要大于或等于它的能力值。打败它后，你自己的能力值就会增加与被击败的敌人的能力值相等的值。你可以走上下左右四个单元格，有敌人的格子必须击败才能通过。出口是强制传送的，不能经过出口而不传送。\n\n假设初始的能力值为 $1$，你从地牢第一层左上角的 $(1,1)$ 开始，在最后一层的任意位置结束游戏。那么你能达到的最大能力值是多少？数据保证始终存在一条通往最后一关的路径。", "inputFormat": "第一行三个整数 $L,N,M$。\n\n接下来 $L$ 个矩阵，每个矩阵有 $N$ 行 $M$ 列共 $N\\times M$ 个整数表示单元格的种类。\n\n保证 $(1,1)$ 位置上数为 $0$。", "outputFormat": "一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq L\\times N\\times M\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round B Dungeon](https://judge.agm-contest.com/public/problems/7/text)。", "locale": "zh-CN"}}}
{"pid": "P8231", "type": "P", "difficulty": 6, "samples": [["5 6\n1 1 1 1 1 1\n1 1 1 1 1 1\n1 1 1 1 1 1\n1 1 1 1 1 1\n1 1 1 1 1 1\n5\n2 1 2 3 10\n2 2 5 6 15\n3 4 4 5 1\n1 2 5 4 13\n5 1 5 6 6\n4\n2\n5 6 1\n5 4 1\n3\n1 3 1\n2 2 1\n2 3 1\n1\n3 3 1\n2\n4 6 1\n1 1 1\n", "0 3 -1 1 0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2022", "O2优化", "整体二分", "AGM"], "title": "[AGM 2022 资格赛] 农场", "background": "", "description": "你是一个资本家，你经营着一块大小为 $n\\times m$ 的方格形状的田地，第 $i$ 行第 $j$ 列上初始有 $a_{i,j}$ 数量的小麦。\n\n在这个田地上，你圈了 $Q$ 块矩形，每块矩形表示一个农场（农场之间可能有重叠的格子）。每一个农场的小麦数量等于这个农场内每个格子的小麦的数量之和，一个农场盈利当且仅当这个农场上的小麦数量大于等于这个农场盈利所需要的小麦数 $b_i$。\n\n不幸的是，接下来连续 $T$ 天都有强降雨，每一天都会有一些格子上的小麦数量变少。\n\n你需要对于每个农场，确定它能盈利几天，如果 $T$ 天后仍然盈利则输出 $-1$。\n\n", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个整数 $a_{i,j}$。\n\n下一行一个整数 $Q$。接下来 $Q$ 行，每行五个数 $l,r,L,R,b$ 表示第 $i$ 个农场的左上角坐标，右下角坐标以及盈利所需的小麦数。\n\n下一行一个整数 $T$。接下来 $T$ 段输入，每一段先输入一个 $p$ 表示这一天发生的事件，接下来 $p$ 行每一行三个整数 $x,y,z$ 表示 $(x,y)$ 格子上的小麦减少了 $z$。\n\n\n", "outputFormat": "一行 $Q$ 个整数，表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 500$，$1\\leq Q \\leq 50000$，$0\\leq a_{i,j}\\leq 10^9$，$1\\leq l<L\\leq n$，$1<r<R\\leq m$，$0\\leq b_i\\leq 10^{18}$，$1\\leq T \\leq 50000$，$1\\leq x\\leq n$，$1\\leq y\\leq m$，$1\\leq z\\leq 10^9$，$1\\leq \\sum p\\leq 10^5$。保证任何时刻 $z\\leq a_{x,y}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round C TimeToFarm](https://judge.agm-contest.com/team/problems/10/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 农场", "background": "", "description": "你是一个资本家，你经营着一块大小为 $n\\times m$ 的方格形状的田地，第 $i$ 行第 $j$ 列上初始有 $a_{i,j}$ 数量的小麦。\n\n在这个田地上，你圈了 $Q$ 块矩形，每块矩形表示一个农场（农场之间可能有重叠的格子）。每一个农场的小麦数量等于这个农场内每个格子的小麦的数量之和，一个农场盈利当且仅当这个农场上的小麦数量大于等于这个农场盈利所需要的小麦数 $b_i$。\n\n不幸的是，接下来连续 $T$ 天都有强降雨，每一天都会有一些格子上的小麦数量变少。\n\n你需要对于每个农场，确定它能盈利几天，如果 $T$ 天后仍然盈利则输出 $-1$。\n\n", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个整数 $a_{i,j}$。\n\n下一行一个整数 $Q$。接下来 $Q$ 行，每行五个数 $l,r,L,R,b$ 表示第 $i$ 个农场的左上角坐标，右下角坐标以及盈利所需的小麦数。\n\n下一行一个整数 $T$。接下来 $T$ 段输入，每一段先输入一个 $p$ 表示这一天发生的事件，接下来 $p$ 行每一行三个整数 $x,y,z$ 表示 $(x,y)$ 格子上的小麦减少了 $z$。\n\n\n", "outputFormat": "一行 $Q$ 个整数，表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 500$，$1\\leq Q \\leq 50000$，$0\\leq a_{i,j}\\leq 10^9$，$1\\leq l<L\\leq n$，$1<r<R\\leq m$，$0\\leq b_i\\leq 10^{18}$，$1\\leq T \\leq 50000$，$1\\leq x\\leq n$，$1\\leq y\\leq m$，$1\\leq z\\leq 10^9$，$1\\leq \\sum p\\leq 10^5$。保证任何时刻 $z\\leq a_{x,y}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round C TimeToFarm](https://judge.agm-contest.com/team/problems/10/text)。", "locale": "zh-CN"}}}
{"pid": "P8232", "type": "P", "difficulty": 4, "samples": [["4 4 1\n1 2 3 4\n1 2 3 4\n1 1 3 5\n1 1 4 0\n4 4 2\n0 0 0 0\n0 0 0 0\n0 0 0 0\n0 0 0 0", "6\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 2048 花园", "background": "", "description": "这是一个类似 2048 的游戏，你有一个 $n$ 行 $m$ 列的方格，每个方格上有一个数 $a_{i,j}$。\n\n你总共可以操作 $K$ 次魔法，每次操作之前，系统都会将行号最小的前提下最靠左的空格子的 $a$ 值变为 $1$，如果不存在这样的空格子，那么这次魔法被停止执行并且游戏结束。\n\n操作如下：你可以将每个格子向上/下/左/右“移动”。向一个方向移动的定义是，先将所有格子向那个方向移动直到不能移动，然后从对应的方向边界处开始不断合并两个值相同的格子然后生成一个新的值为原来的值 $+1$ 的格子。如下图即为一次完整的操作（包括操作前系统的改动）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ycplqbpz.png)\n\n现在你想最大化 $K$ 次魔法后（假设游戏中途结束你的分数依然可以结算）你的每个格子上的最大值，请你求出这个值。", "inputFormat": "输入有若干组数据，每组数据第一行三个数 $n,m,K$。\n\n接下来 $n$ 行每行 $m$ 个数 $a_{i,j}$。", "outputFormat": "对于每组数据，输出答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 2500$，$1\\leq \\sum (n\\times m)\\leq 2500$，$1\\leq K\\times K \\leq \\min(n,m)$，$0\\leq a_{i,j}\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round D Rainy Garden](https://judge.agm-contest.com/public/problems/18/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 2048 花园", "background": "", "description": "这是一个类似 2048 的游戏，你有一个 $n$ 行 $m$ 列的方格，每个方格上有一个数 $a_{i,j}$。\n\n你总共可以操作 $K$ 次魔法，每次操作之前，系统都会将行号最小的前提下最靠左的空格子的 $a$ 值变为 $1$，如果不存在这样的空格子，那么这次魔法被停止执行并且游戏结束。\n\n操作如下：你可以将每个格子向上/下/左/右“移动”。向一个方向移动的定义是，先将所有格子向那个方向移动直到不能移动，然后从对应的方向边界处开始不断合并两个值相同的格子然后生成一个新的值为原来的值 $+1$ 的格子。如下图即为一次完整的操作（包括操作前系统的改动）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ycplqbpz.png)\n\n现在你想最大化 $K$ 次魔法后（假设游戏中途结束你的分数依然可以结算）你的每个格子上的最大值，请你求出这个值。", "inputFormat": "输入有若干组数据，每组数据第一行三个数 $n,m,K$。\n\n接下来 $n$ 行每行 $m$ 个数 $a_{i,j}$。", "outputFormat": "对于每组数据，输出答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,m\\leq 2500$，$1\\leq \\sum (n\\times m)\\leq 2500$，$1\\leq K\\times K \\leq \\min(n,m)$，$0\\leq a_{i,j}\\leq 10^6$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round D Rainy Garden](https://judge.agm-contest.com/public/problems/18/text)。", "locale": "zh-CN"}}}
{"pid": "P8233", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2\n2 1 5\n1 3 5\n2 1 5", "1\n10"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 区间", "background": "", "description": "给你一个一行无限列的方格，刚开始每个格子都是白色。\n\n你需要维护以下两种操作：\n\n* `1 l r`：将 $l$ 到 $r$ 中每个格子都填成黑色。\n\n* `2 l r`：查询 $[l,r]$ 有多少个子区间满足区间内格子都是黑色。 \n", "inputFormat": "第一行一个整数 $n$ 表示操作次数。\n\n接下来 $n$ 行，每行三个数 $opt,l,r$ 表示操作种类和区间。", "outputFormat": "对于每个 $2$ 操作输出一行一个整数表示答案在 $\\bmod\\ 1000000007$ 意义下的值。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6$，$1\\leq opt\\leq 2$，$1\\leq l\\leq r\\leq 10^{18}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round E Intervals](https://judge.agm-contest.com/public/problems/4/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 区间", "background": "", "description": "给你一个一行无限列的方格，刚开始每个格子都是白色。\n\n你需要维护以下两种操作：\n\n* `1 l r`：将 $l$ 到 $r$ 中每个格子都填成黑色。\n\n* `2 l r`：查询 $[l,r]$ 有多少个子区间满足区间内格子都是黑色。 \n", "inputFormat": "第一行一个整数 $n$ 表示操作次数。\n\n接下来 $n$ 行，每行三个数 $opt,l,r$ 表示操作种类和区间。", "outputFormat": "对于每个 $2$ 操作输出一行一个整数表示答案在 $\\bmod\\ 1000000007$ 意义下的值。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6$，$1\\leq opt\\leq 2$，$1\\leq l\\leq r\\leq 10^{18}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round E Intervals](https://judge.agm-contest.com/public/problems/4/text)。", "locale": "zh-CN"}}}
{"pid": "P8234", "type": "P", "difficulty": 6, "samples": [["4\n0\n5\n5 4 3 0\n0 1 2 5\n0 2 3 5\n5 1 4 0\n0 1 5\n0 2 5\n5 3 0\n0 4 5", "5\n1 2 3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 拼图", "background": "", "description": "你有一张形状为正 $n$ 边形的柱形拼图，它由一个中间块，$n$ 个边缘块和 $n$ 个角块拼成，正 $n$ 边形的每条边上有两个角块和一个边缘块。（如下图即为 $n=5$ 时拼图的俯视图，蓝色为角块，红色为边缘块，灰色为中间块）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k83mqxkd.png)\n\n每个边缘块有顶部底部和向外裸露的面总共三个面上是有颜色的，每个面上的颜色不一定相同。而每个角块上向外裸露的面有两个，所以总共四个面上是有颜色的，每个面上的颜色也不一定相同。而中间块只有顶部和底部是有颜色的。\n\n我们将角块与边缘块逆时针标号，正 $n$ 边形的第 $i(i<n)$ 条边的侧面由第 $i$ 块角块的逆时针方向侧面，第 $i$ 块边缘块与第 $i+1$ 块的角块的顺时针方向侧面组成。特别地，第 $n$ 条边的侧面由第 $n$ 块角块的逆时针方向侧面，第 $n$ 块边缘块与第 $1$ 块的角块的顺时针方向侧面组成。\n\n接着，你可以执行如下的操作：选择拼图的一条边并将两边的角块交换后上下反转（注意此时两个侧面会互换）并且边上的边缘块也上下反转。\n\n我们称一个平面是整齐的当且仅当平面上颜色均相同，现在你要通过若干次操作，来使得这个拼图上的每个面都是整齐的。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来两个正整数 $col_{tp},col_{bt}$ 分别表示中间块顶部的颜色和底部的颜色。\n\n接下来 $n$ 行，每行四个整数 $ct_i,cl_i,cr_i,cb_i$ 分别表示第 $i$ 个角块的顶部颜色，逆时针方向侧面颜色，顺时针方向侧面颜色以及底部颜色。\n\n接下来 $n$ 行，每行三个整数 $et_i,es_i,eb_i$ 分别表示第 $i$ 个边缘块的顶部颜色，侧面颜色以及底部颜色。\n\n\n", "outputFormat": "如果无解，输出 $-1$。\n\n否则先输出一行一个整数表示操作次数 $m$，接下来一行 $m$ 个整数表示第 $i$ 操作的边编号。\n\n你需要保证操作次数不超过 $100000$，多解输出任意一种即可。", "hint": "#### 样例解释\n\n如下图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/958k6wj3.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $4\\leq n \\leq 100$，$0\\leq ct_i,cl_i,cr_i,cb_i\\leq n+1$，$\\{es_1,es_2,...,es_n,col_{tp},col_{bt}\\}$ 构成一个 $0\\sim n+1$ 的排列。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round F Kube](https://judge.agm-contest.com/public/problems/20/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 拼图", "background": "", "description": "你有一张形状为正 $n$ 边形的柱形拼图，它由一个中间块，$n$ 个边缘块和 $n$ 个角块拼成，正 $n$ 边形的每条边上有两个角块和一个边缘块。（如下图即为 $n=5$ 时拼图的俯视图，蓝色为角块，红色为边缘块，灰色为中间块）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k83mqxkd.png)\n\n每个边缘块有顶部底部和向外裸露的面总共三个面上是有颜色的，每个面上的颜色不一定相同。而每个角块上向外裸露的面有两个，所以总共四个面上是有颜色的，每个面上的颜色也不一定相同。而中间块只有顶部和底部是有颜色的。\n\n我们将角块与边缘块逆时针标号，正 $n$ 边形的第 $i(i<n)$ 条边的侧面由第 $i$ 块角块的逆时针方向侧面，第 $i$ 块边缘块与第 $i+1$ 块的角块的顺时针方向侧面组成。特别地，第 $n$ 条边的侧面由第 $n$ 块角块的逆时针方向侧面，第 $n$ 块边缘块与第 $1$ 块的角块的顺时针方向侧面组成。\n\n接着，你可以执行如下的操作：选择拼图的一条边并将两边的角块交换后上下反转（注意此时两个侧面会互换）并且边上的边缘块也上下反转。\n\n我们称一个平面是整齐的当且仅当平面上颜色均相同，现在你要通过若干次操作，来使得这个拼图上的每个面都是整齐的。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来两个正整数 $col_{tp},col_{bt}$ 分别表示中间块顶部的颜色和底部的颜色。\n\n接下来 $n$ 行，每行四个整数 $ct_i,cl_i,cr_i,cb_i$ 分别表示第 $i$ 个角块的顶部颜色，逆时针方向侧面颜色，顺时针方向侧面颜色以及底部颜色。\n\n接下来 $n$ 行，每行三个整数 $et_i,es_i,eb_i$ 分别表示第 $i$ 个边缘块的顶部颜色，侧面颜色以及底部颜色。\n\n\n", "outputFormat": "如果无解，输出 $-1$。\n\n否则先输出一行一个整数表示操作次数 $m$，接下来一行 $m$ 个整数表示第 $i$ 操作的边编号。\n\n你需要保证操作次数不超过 $100000$，多解输出任意一种即可。", "hint": "#### 样例解释\n\n如下图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/958k6wj3.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $4\\leq n \\leq 100$，$0\\leq ct_i,cl_i,cr_i,cb_i\\leq n+1$，$\\{es_1,es_2,...,es_n,col_{tp},col_{bt}\\}$ 构成一个 $0\\sim n+1$ 的排列。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round F Kube](https://judge.agm-contest.com/public/problems/20/text)。", "locale": "zh-CN"}}}
{"pid": "P8235", "type": "P", "difficulty": 3, "samples": [["3\n1 2\n1 3", "())"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 括号", "background": "", "description": "给你一棵 $n$ 个节点的树，其中一号点填了一个左括号，你需要给其余每个点填上 `(` 或 `)`，使得树上合法括号路径数量最多，保证答案唯一。", "inputFormat": "第一行一个数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$ 表示 $x$ 与 $y$ 有一条边相连。", "outputFormat": "一行一个长度为 $n$ 的括号串。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n\\leq 10^5$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round G Parenthesis](https://judge.agm-contest.com/public/problems/5/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 括号", "background": "", "description": "给你一棵 $n$ 个节点的树，其中一号点填了一个左括号，你需要给其余每个点填上 `(` 或 `)`，使得树上合法括号路径数量最多，保证答案唯一。", "inputFormat": "第一行一个数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$ 表示 $x$ 与 $y$ 有一条边相连。", "outputFormat": "一行一个长度为 $n$ 的括号串。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n\\leq 10^5$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round G Parenthesis](https://judge.agm-contest.com/public/problems/5/text)。", "locale": "zh-CN"}}}
{"pid": "P8236", "type": "P", "difficulty": 4, "samples": [["5\n3 1 2 6 3", "38.5000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 魔法的力量", "background": "", "description": "你有 $n$ 堆石子，第 $i$ 堆石子有 $a_i$ 个石子。你会执行 $n-1$ 次操作，每次可以选择两堆石子将它们合并成一堆，得分为两堆石子大小之和。\n\n现在问你，如果你每次随机选择两堆石子合并，期望得分为多少。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $n$ 个数 $a_i$。", "outputFormat": "一行一个实数，表示答案。\n\n答案误差不超过 $10^{-6}$ 即视为正确。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $2\\leq n\\leq 500$，$1\\leq a_i\\leq 10^9$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round H Magic Powers](https://judge.agm-contest.com/public/problems/22/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 魔法的力量", "background": "", "description": "你有 $n$ 堆石子，第 $i$ 堆石子有 $a_i$ 个石子。你会执行 $n-1$ 次操作，每次可以选择两堆石子将它们合并成一堆，得分为两堆石子大小之和。\n\n现在问你，如果你每次随机选择两堆石子合并，期望得分为多少。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $n$ 个数 $a_i$。", "outputFormat": "一行一个实数，表示答案。\n\n答案误差不超过 $10^{-6}$ 即视为正确。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $2\\leq n\\leq 500$，$1\\leq a_i\\leq 10^9$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round H Magic Powers](https://judge.agm-contest.com/public/problems/22/text)。", "locale": "zh-CN"}}}
{"pid": "P8237", "type": "P", "difficulty": 6, "samples": [["8\n1 1 4 10\n4 2 5 10\n2 3 5 1\n3 2 4 1\n2 1 3 1\n5 1 3 1\n6 1 2 10\n6 2 3 10", "4"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 过河", "background": "", "description": "有一个人前来过河。\n\n河可以抽象为一个二维坐标系上的图形。人所在的河的左岸即为 $y$ 轴，河的右岸为 $x=10^9+5$ 的直线。 \n\n河上有 $n$ 个横着的木头，第 $i$ 个木头的横坐标为 $x_i$，覆盖的点纵坐标范围为 $y_{i,1}$ 到 $y_{i,2}$。\n\n人可以在木头与岸之间反复横跳，第 $i$ 根木头能跳到第 $j$ 根木头上，当且仅当 $x_i \\not= x_j$ 且存在一个实数 $y$ 满足 $y_{i,1}<y<y_{i,2},y_{j,1}<y<y_{j,2}$ 且不存在一个木头 $k$ 满足 $\\min(x_i,x_j)<x_k<\\max(x_i,x_j)$ 且 $y_{k,1}<y<y_{k,2}$。同理如果一根木头想跳到岸上，把岸覆盖的 $y$ 坐标看成 $(-inf,inf)$ 也要满足这个条件。 \n\n从第 $i$ 根木头跳到别处的花费是 $c_i$，从岸上跳到别处不需要花费。左岸不能直接跳到右岸。\n\n这个人想知道他跳到右岸最小的花费是多少。\n\n", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行四个整数 $x_i,y_{i,1},y_{i,2},c_i$。\n", "outputFormat": "一个数表示答案。保证存在一种方法使得他跳到右岸。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 2.5\\times 10^5$，$1\\leq x_i,c_i\\leq 10^9$，$1\\leq y_{i,1}\\leq y_{i,2}\\leq 10^9$。\n\n数据保证木头之间没有重叠，即不存在 $i,j$ 满足 $x_i=x_j$ 且 $y_{i,2}>y_{j,1}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round I River](https://judge.agm-contest.com/public/problems/14/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 过河", "background": "", "description": "有一个人前来过河。\n\n河可以抽象为一个二维坐标系上的图形。人所在的河的左岸即为 $y$ 轴，河的右岸为 $x=10^9+5$ 的直线。 \n\n河上有 $n$ 个横着的木头，第 $i$ 个木头的横坐标为 $x_i$，覆盖的点纵坐标范围为 $y_{i,1}$ 到 $y_{i,2}$。\n\n人可以在木头与岸之间反复横跳，第 $i$ 根木头能跳到第 $j$ 根木头上，当且仅当 $x_i \\not= x_j$ 且存在一个实数 $y$ 满足 $y_{i,1}<y<y_{i,2},y_{j,1}<y<y_{j,2}$ 且不存在一个木头 $k$ 满足 $\\min(x_i,x_j)<x_k<\\max(x_i,x_j)$ 且 $y_{k,1}<y<y_{k,2}$。同理如果一根木头想跳到岸上，把岸覆盖的 $y$ 坐标看成 $(-inf,inf)$ 也要满足这个条件。 \n\n从第 $i$ 根木头跳到别处的花费是 $c_i$，从岸上跳到别处不需要花费。左岸不能直接跳到右岸。\n\n这个人想知道他跳到右岸最小的花费是多少。\n\n", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行四个整数 $x_i,y_{i,1},y_{i,2},c_i$。\n", "outputFormat": "一个数表示答案。保证存在一种方法使得他跳到右岸。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 2.5\\times 10^5$，$1\\leq x_i,c_i\\leq 10^9$，$1\\leq y_{i,1}\\leq y_{i,2}\\leq 10^9$。\n\n数据保证木头之间没有重叠，即不存在 $i,j$ 满足 $x_i=x_j$ 且 $y_{i,2}>y_{j,1}$。\n\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round I River](https://judge.agm-contest.com/public/problems/14/text)。", "locale": "zh-CN"}}}
{"pid": "P8238", "type": "P", "difficulty": 5, "samples": [["4 6\n1 2\n2 3\n3 4\n1 1 1 1\n1 2 2\n2 4\n2 2\n1 4 10\n2 4\n2 2", "5\n4\n1\n1\n1\n14"], ["9 15\n1 2\n1 3\n3 4\n3 5\n4 6\n3 7\n7 8\n7 9\n5 65 70 8 1 500 18 21 180\n2 7\n1 3 200\n2 3\n1 6 300\n2 6\n1 9 100\n2 7\n2 6\n1 4 20\n2 2\n2 3\n1 2 9\n1 7 0\n2 3\n2 2", "649\n779\n70\n70\n70\n70\n70\n70\n70\n5\n665\n665\n647\n5\n14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 避难所", "background": "", "description": "U 国有 $n$ 栋建筑，其中第一栋是避难所，它们被 $n-1$ 条道路相连通着。建筑中都分别有一定数量的难民，初始，第 $i$ 个建筑中的难民数量为 $a_i$。\n\n在战争进行过程中，发生了 $q$ 次事件，有以下两种事件：\n\n* `1 x y`：第 $x$ 栋建筑中难民数量变为 $y$。\n\n* `2 x`：第 $x$ 栋建筑通往避难所的最近的那条道路改变了状态，如果原来通畅现在就封堵，反之通畅。刚开始每条道路都是通畅的。保证 $x \\neq 1$。\n\n每次事件之后你都需要输出有多少难民能够顺着通畅的道路到达避难所。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示有一条边连接 $u,v$。\n\n接下来一行 $n$ 个整数 $a_i$。\n\n\n下面 $q$ 行，每行两个或三个整数表示一次事件。", "outputFormat": "$q$ 行，每一行一个数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,q\\leq 10^5$，$0\\leq a_i,y\\leq 10^9$。\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round J Shelters](https://judge.agm-contest.com/public/problems/6/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 避难所", "background": "", "description": "U 国有 $n$ 栋建筑，其中第一栋是避难所，它们被 $n-1$ 条道路相连通着。建筑中都分别有一定数量的难民，初始，第 $i$ 个建筑中的难民数量为 $a_i$。\n\n在战争进行过程中，发生了 $q$ 次事件，有以下两种事件：\n\n* `1 x y`：第 $x$ 栋建筑中难民数量变为 $y$。\n\n* `2 x`：第 $x$ 栋建筑通往避难所的最近的那条道路改变了状态，如果原来通畅现在就封堵，反之通畅。刚开始每条道路都是通畅的。保证 $x \\neq 1$。\n\n每次事件之后你都需要输出有多少难民能够顺着通畅的道路到达避难所。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$ 表示有一条边连接 $u,v$。\n\n接下来一行 $n$ 个整数 $a_i$。\n\n\n下面 $q$ 行，每行两个或三个整数表示一次事件。", "outputFormat": "$q$ 行，每一行一个数表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,q\\leq 10^5$，$0\\leq a_i,y\\leq 10^9$。\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round J Shelters](https://judge.agm-contest.com/public/problems/6/text)。", "locale": "zh-CN"}}}
{"pid": "P8239", "type": "P", "difficulty": 5, "samples": [["10 3\n2 6 10 1 5 9 7 2 1 8\n3 1 2\n", "1079"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 分裂", "background": "", "description": "你有一个长度为 $n$ 的数组 $a$，你需要将其分成 $K$ 个非空子段，最终的得分为 $\\sum_{i=1}^K mx_i^{b_i}-mn_i^{b_i}$，$b_i$ 是给定常数，$mx_i$ 是第 $i$ 段中的最大值，$mn_i$ 为第 $i$ 中的最小值。\n\n你能获得的最大得分为多少？\n", "inputFormat": "第一行两个正整数 $n,K$。\n\n接下来一行 $n$ 个整数表示 $a_i$。\n\n接下来一行 $K$ 个整数表示 $b_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq K\\leq n\\leq 5000$，$1\\leq a_i\\leq 10^5$，$1\\leq b_i\\leq 3$。\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round K Split](https://judge.agm-contest.com/public/problems/11/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 分裂", "background": "", "description": "你有一个长度为 $n$ 的数组 $a$，你需要将其分成 $K$ 个非空子段，最终的得分为 $\\sum_{i=1}^K mx_i^{b_i}-mn_i^{b_i}$，$b_i$ 是给定常数，$mx_i$ 是第 $i$ 段中的最大值，$mn_i$ 为第 $i$ 中的最小值。\n\n你能获得的最大得分为多少？\n", "inputFormat": "第一行两个正整数 $n,K$。\n\n接下来一行 $n$ 个整数表示 $a_i$。\n\n接下来一行 $K$ 个整数表示 $b_i$。", "outputFormat": "一行一个整数，表示答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq K\\leq n\\leq 5000$，$1\\leq a_i\\leq 10^5$，$1\\leq b_i\\leq 3$。\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round K Split](https://judge.agm-contest.com/public/problems/11/text)。", "locale": "zh-CN"}}}
{"pid": "P8240", "type": "P", "difficulty": 5, "samples": [["5 6\n1 2 1\n2 3 3\n3 4 3\n2 4 4\n1 5 1\n4 5 1\n1\n2\n3\n1 3\n5 3\n4 3", "0\n1\n2"], ["9 10\n1 2 1\n2 3 4\n2 4 2\n4 5 5\n5 9 10\n5 6 10\n6 7 2\n6 9 5\n9 8 8\n8 7 3\n2\n4 9\n5\n1 3\n1 6\n5 7\n6 9\n7 8", "1\n0\n4\n0\n6"]], "limits": {"time": [1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "AGM"], "title": "[AGM 2022 资格赛] 偷铀计划", "background": "", "description": "你是一个小偷，你决定偷点铀来让自己在 Digdig.io 游戏中能够迅速变大。\n\n你有一张地图，这个矿洞是一张 $n$ 个点 $m$ 条边的无向图。有 $K$ 个守卫保护着矿洞的安全，第 $i$ 个守卫守在第 $P_i$ 个点上。\n\n你偷了 $x$ 千克铀，准备选一条路径从 $S$ 点转移到 $T$ 点。如果 $x>0$，那么在转移过程中，你需要保证在任意时刻与每个守卫的距离都大于 $x$。不然就会被发现！\n\n显然，你不会只偷一次，你需要偷 $Q$ 次铀，每次给定 $S$ 和 $T$，询问你最多能偷多少千克的铀。", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $m$ 行，每一行三个数 $x,y,z$ 表示 $x$ 和 $y$ 有一条长度为 $z$ 的无向边。\n\n下一行一个整数 $K$。接下来一行 $K$ 个整数 $P_i$。\n\n接下来一个正整数 $Q$。紧接着 $Q$ 行每行两个数 $S,T$。", "outputFormat": "$Q$ 行，每行一个数表示答案。如果无法完成偷窃任务输出 $0$。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,K,Q\\leq 10^5$，$1\\leq m\\leq 2\\times 10^5$，$1\\leq x,y,P_i\\leq n$，$1\\leq z\\leq 10^9$，$S\\neq T$。\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round L Uranium](https://judge.agm-contest.com/public/problems/13/text)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2022 资格赛] 偷铀计划", "background": "", "description": "你是一个小偷，你决定偷点铀来让自己在 Digdig.io 游戏中能够迅速变大。\n\n你有一张地图，这个矿洞是一张 $n$ 个点 $m$ 条边的无向图。有 $K$ 个守卫保护着矿洞的安全，第 $i$ 个守卫守在第 $P_i$ 个点上。\n\n你偷了 $x$ 千克铀，准备选一条路径从 $S$ 点转移到 $T$ 点。如果 $x>0$，那么在转移过程中，你需要保证在任意时刻与每个守卫的距离都大于 $x$。不然就会被发现！\n\n显然，你不会只偷一次，你需要偷 $Q$ 次铀，每次给定 $S$ 和 $T$，询问你最多能偷多少千克的铀。", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $m$ 行，每一行三个数 $x,y,z$ 表示 $x$ 和 $y$ 有一条长度为 $z$ 的无向边。\n\n下一行一个整数 $K$。接下来一行 $K$ 个整数 $P_i$。\n\n接下来一个正整数 $Q$。紧接着 $Q$ 行每行两个数 $S,T$。", "outputFormat": "$Q$ 行，每行一个数表示答案。如果无法完成偷窃任务输出 $0$。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n,K,Q\\leq 10^5$，$1\\leq m\\leq 2\\times 10^5$，$1\\leq x,y,P_i\\leq n$，$1\\leq z\\leq 10^9$，$S\\neq T$。\n#### 说明\n\n翻译自 [AGM 2022 Qualification Round L Uranium](https://judge.agm-contest.com/public/problems/13/text)。", "locale": "zh-CN"}}}
{"pid": "P8241", "type": "P", "difficulty": 1, "samples": [["1", "0 1"], ["4", "2 3"], ["10", "34 55"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #3] RIJEČI", "background": "", "description": "一天，Mirko 发现了一个非常大的屏幕，这个屏幕上一开始只有一个字母 $\\texttt{A}$。Mirko 在这个屏幕旁边找到了一个按钮。当他按一次时，屏幕上的字母变成了 $\\texttt B$。随后他又按了若干次，屏幕上依次显示 $\\texttt{BA}$、$\\texttt{BAB}$、$\\texttt{BABBA}$、……这时他才发现，每当他按一次按钮，屏幕上的字母 $\\texttt B$ 变为 $\\texttt{BA}$，而字母 $\\texttt A$ 变为 $\\texttt{B}$。\n\n现在，Mirko 已经按了 $k$ 次按钮，他想知道屏幕上分别有多少个字母 $\\texttt A$ 和字母 $\\texttt B$。", "inputFormat": "输入一个整数 $k$，表示 Mirko 按下按钮的次数。", "outputFormat": "输出两个整数，以空格间隔，分别表示字母 $\\texttt A$ 的个数和字母 $\\texttt B$ 的个数。", "hint": "**【数据范围与限制】**\n\n对于 $20\\%$ 的数据，保证 $k\\leqslant 10$。  \n对于所有数据，$1\\leqslant k\\leqslant 45$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T1 RIJEČI_**，按照原题数据配置，满分 $50$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #3] RIJEČI", "background": "", "description": "一天，Mirko 发现了一个非常大的屏幕，这个屏幕上一开始只有一个字母 $\\texttt{A}$。Mirko 在这个屏幕旁边找到了一个按钮。当他按一次时，屏幕上的字母变成了 $\\texttt B$。随后他又按了若干次，屏幕上依次显示 $\\texttt{BA}$、$\\texttt{BAB}$、$\\texttt{BABBA}$、……这时他才发现，每当他按一次按钮，屏幕上的字母 $\\texttt B$ 变为 $\\texttt{BA}$，而字母 $\\texttt A$ 变为 $\\texttt{B}$。\n\n现在，Mirko 已经按了 $k$ 次按钮，他想知道屏幕上分别有多少个字母 $\\texttt A$ 和字母 $\\texttt B$。", "inputFormat": "输入一个整数 $k$，表示 Mirko 按下按钮的次数。", "outputFormat": "输出两个整数，以空格间隔，分别表示字母 $\\texttt A$ 的个数和字母 $\\texttt B$ 的个数。", "hint": "**【数据范围与限制】**\n\n对于 $20\\%$ 的数据，保证 $k\\leqslant 10$。  \n对于所有数据，$1\\leqslant k\\leqslant 45$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T1 RIJEČI_**，按照原题数据配置，满分 $50$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8242", "type": "P", "difficulty": 1, "samples": [["4 4\n2 2 2 2\nhoni\noker\nnera\nirak", "#.#.#.#.\n.#.#.#.#\n#.honi#.\n.#oker.#\n#.nera#.\n.#irak.#\n#.#.#.#.\n.#.#.#.#"], ["2 4\n1 0 3 1\nrima\nmama", "#.#.#.#\nrima.#.\nmama#.#\n.#.#.#."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #3] OKVIR", "background": "", "description": "Mirko 制作出了一个绝妙的纵横字谜，现在他想把这个纵横字谜用边框给框起来。\n\nMirko 的纵横字谜可以看作是一个 $m\\times n$ 的网格图，每个格子上都有一个小写字母。他希望上面、左边、右边和下面的边框的宽度分别为 $u,l,r,d$。边框上也被分割成若干个网格，每个网格上要么是 `#`，要么是 `.`。他还希望，如果框架扩展到整个字谜上，那么左上角的网格必定是 `#`，且相邻网格上的字符不能相同。当然，如果该网格原来是纵横字谜上的，那么最终制作边框时应当保留字谜网格上的原有字母，而不是 `#` 或 `.`。\n\n现在，请你帮 Mirko 得到最终框起来的字谜的所有网格上的字符。\n\n如果你不能很好地理解题意，请参考本题的样例。", "inputFormat": "第一行输入两个整数 $m,n$，分别表示行数和列数。  \n第二行输入四个整数 $u,l,r,d$，分别表示上面、左边、右边和下面的边框的宽度。  \n随后 $m$ 行，每行输入 $n$ 个字符，描述字谜的所有网格上的字符。", "outputFormat": "输出 $u+m+d$ 行，每行输出 $l+n+r$ 个字符，表示框起来的字谜的所有网格上的字符。", "hint": "**【数据范围与限制】**\n\n对于所有数据，$1\\leqslant m,n\\leqslant 10$，$0\\leqslant u,l,r,d\\leqslant 5$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T2 OKVIR_**，按照原题数据配置，满分 $80$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #3] OKVIR", "background": "", "description": "Mirko 制作出了一个绝妙的纵横字谜，现在他想把这个纵横字谜用边框给框起来。\n\nMirko 的纵横字谜可以看作是一个 $m\\times n$ 的网格图，每个格子上都有一个小写字母。他希望上面、左边、右边和下面的边框的宽度分别为 $u,l,r,d$。边框上也被分割成若干个网格，每个网格上要么是 `#`，要么是 `.`。他还希望，如果框架扩展到整个字谜上，那么左上角的网格必定是 `#`，且相邻网格上的字符不能相同。当然，如果该网格原来是纵横字谜上的，那么最终制作边框时应当保留字谜网格上的原有字母，而不是 `#` 或 `.`。\n\n现在，请你帮 Mirko 得到最终框起来的字谜的所有网格上的字符。\n\n如果你不能很好地理解题意，请参考本题的样例。", "inputFormat": "第一行输入两个整数 $m,n$，分别表示行数和列数。  \n第二行输入四个整数 $u,l,r,d$，分别表示上面、左边、右边和下面的边框的宽度。  \n随后 $m$ 行，每行输入 $n$ 个字符，描述字谜的所有网格上的字符。", "outputFormat": "输出 $u+m+d$ 行，每行输出 $l+n+r$ 个字符，表示框起来的字谜的所有网格上的字符。", "hint": "**【数据范围与限制】**\n\n对于所有数据，$1\\leqslant m,n\\leqslant 10$，$0\\leqslant u,l,r,d\\leqslant 5$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T2 OKVIR_**，按照原题数据配置，满分 $80$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8243", "type": "P", "difficulty": 2, "samples": [["5\nthis\nsentence\nhas\n$\nletters", "this sentence has thirtyone letters"], ["7\n$\nis\nthe\nnumber\nof\nletters\nhere", "thirty is the number of letters here"], ["5\nthe\nletters\nare\n$\npotato", "the letters are twentynine potato"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #3] REČENICE", "background": "", "description": "很久以前，在一个只有数学学生居住的遥远国度里，Iva 和 Vedran 正在讨论一种特殊的句子。这些句子中正好有一个单词表示一个数字，并且这个数字等于句子中字母的总数。例如 `This sentence has thirtyone\nletters.` 和 `Blah Blah seventeen`。\n\nJurica 无意中听到了朋友们的谈话，决定用他背诵的大量特殊的句子给他们留下深刻印象。他急忙回家，写了一个程序，给定一个句子，求出使得句子变得特殊的能放进去的最小数字。\n\n不幸的是，他的电脑坏了，现在他需要你的帮助。写一个程序来帮助 Jurica！\n\n以下是一些补充说明：\n\n- 句子的形式是：$\\textit{word}_1~\\textit{word}_2~\\textit{word}_3~\\cdots~\\textit{word}_{n-1}~\\textit{word}_n$。这 $n$ 个单词中恰好有一个 `$`，表示需要填入的表示一个数字的单词。例如，`this sentence has thirtyone letters` 将变为 `this sentence has $ letters`。\n- 用来表示数字的单词遵循如下规则：\n    - 对于所有 $1\\sim 19$ 的整数，表示它们的单词从小到大依次为 `one`、`two`、`three`、`four`、`five`、`six`、`seven`、`eight`、`nine`、`ten`、`eleven`、`twelve`、`thirteen`、`fourteen`、`fifteen`、`sixteen`、`seventeen`、`eighteen` 和 `nineteen`。\n    - 对于所有 $20\\sim 90$ 的整十数，表示它们的单词从小到大依次为 `twenty`、`thirty`、`forty`、`fifty`、`sixty`、`seventy`、`eighty`、`ninety`。\n    - 对于所有 $100\\sim 900$ 的整百数，表示它们的单词从小到大依次为 `onehundred`、`twohundred`、`threehundred`、`fourhundred`、\n    `fivehundred`、\n    `sixhundred`、\n    `sevenhundred`、\n    `eighthundred`、\n    `ninehundred`。\n    - 对于其它所有的两位数，先在开头放入表示不超过该数的最大的整十数的单词，再在后面拼接表示该两位数的个位数的单词。例如，表示整数 $68$ 的单词为 `sixtyeight`。\n    - 对于其它所有的三位数，先在开头放入表示不超过该数的最大的整百数的单词，再在后面拼接表示其后两位数的单词（按照前面的规则）。例如，表示整数 $319,530,971$ 的单词分别为 `threehundrednineteen`、`fivehundredthirty` 和 `ninehundredseventyone`。", "inputFormat": "第一行输入一个整数 $n$，表示句子中的单词个数。  \n随后 $n$ 行，每行一个字符串，表示句子中的所有单词。保证 `$` 在其中恰好出现一次。", "outputFormat": "输出一行 $n$ 个字符串，表示将 `$` 替换为使得句子特殊的表示最小数字的单词后的句子。", "hint": "**【样例 2 解释】**\n\n`$` 填入表示整数 $30$ 的单词 `thirty`，此时所有单词的字母总数为 $6+2+3+6+2+7+4=30$。\n\n**【样例 3 解释】**\n\n请注意本题中的句子可能并不满足英语语法要求。\n\n**【数据范围与限制】**\n\n**本题开启捆绑测试**。各个子任务的分值和特殊限制如下所述：\n\n- Subtask 1（40 pts）：`$` 中填入的单词所对应的数字不超过 $50$。\n- Subtask 2（60 pts）：无特殊限制。\n\n对于所有数据，$1\\leqslant n\\leqslant 20$，`$` 中填入的单词所对应的数字不超过 $1000$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T3 REČENICE_**，按照原题数据配置，满分 $100$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #3] REČENICE", "background": "", "description": "很久以前，在一个只有数学学生居住的遥远国度里，Iva 和 Vedran 正在讨论一种特殊的句子。这些句子中正好有一个单词表示一个数字，并且这个数字等于句子中字母的总数。例如 `This sentence has thirtyone\nletters.` 和 `Blah Blah seventeen`。\n\nJurica 无意中听到了朋友们的谈话，决定用他背诵的大量特殊的句子给他们留下深刻印象。他急忙回家，写了一个程序，给定一个句子，求出使得句子变得特殊的能放进去的最小数字。\n\n不幸的是，他的电脑坏了，现在他需要你的帮助。写一个程序来帮助 Jurica！\n\n以下是一些补充说明：\n\n- 句子的形式是：$\\textit{word}_1~\\textit{word}_2~\\textit{word}_3~\\cdots~\\textit{word}_{n-1}~\\textit{word}_n$。这 $n$ 个单词中恰好有一个 `$`，表示需要填入的表示一个数字的单词。例如，`this sentence has thirtyone letters` 将变为 `this sentence has $ letters`。\n- 用来表示数字的单词遵循如下规则：\n    - 对于所有 $1\\sim 19$ 的整数，表示它们的单词从小到大依次为 `one`、`two`、`three`、`four`、`five`、`six`、`seven`、`eight`、`nine`、`ten`、`eleven`、`twelve`、`thirteen`、`fourteen`、`fifteen`、`sixteen`、`seventeen`、`eighteen` 和 `nineteen`。\n    - 对于所有 $20\\sim 90$ 的整十数，表示它们的单词从小到大依次为 `twenty`、`thirty`、`forty`、`fifty`、`sixty`、`seventy`、`eighty`、`ninety`。\n    - 对于所有 $100\\sim 900$ 的整百数，表示它们的单词从小到大依次为 `onehundred`、`twohundred`、`threehundred`、`fourhundred`、\n    `fivehundred`、\n    `sixhundred`、\n    `sevenhundred`、\n    `eighthundred`、\n    `ninehundred`。\n    - 对于其它所有的两位数，先在开头放入表示不超过该数的最大的整十数的单词，再在后面拼接表示该两位数的个位数的单词。例如，表示整数 $68$ 的单词为 `sixtyeight`。\n    - 对于其它所有的三位数，先在开头放入表示不超过该数的最大的整百数的单词，再在后面拼接表示其后两位数的单词（按照前面的规则）。例如，表示整数 $319,530,971$ 的单词分别为 `threehundrednineteen`、`fivehundredthirty` 和 `ninehundredseventyone`。", "inputFormat": "第一行输入一个整数 $n$，表示句子中的单词个数。  \n随后 $n$ 行，每行一个字符串，表示句子中的所有单词。保证 `$` 在其中恰好出现一次。", "outputFormat": "输出一行 $n$ 个字符串，表示将 `$` 替换为使得句子特殊的表示最小数字的单词后的句子。", "hint": "**【样例 2 解释】**\n\n`$` 填入表示整数 $30$ 的单词 `thirty`，此时所有单词的字母总数为 $6+2+3+6+2+7+4=30$。\n\n**【样例 3 解释】**\n\n请注意本题中的句子可能并不满足英语语法要求。\n\n**【数据范围与限制】**\n\n**本题开启捆绑测试**。各个子任务的分值和特殊限制如下所述：\n\n- Subtask 1（40 pts）：`$` 中填入的单词所对应的数字不超过 $50$。\n- Subtask 2（60 pts）：无特殊限制。\n\n对于所有数据，$1\\leqslant n\\leqslant 20$，`$` 中填入的单词所对应的数字不超过 $1000$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T3 REČENICE_**，按照原题数据配置，满分 $100$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8244", "type": "P", "difficulty": 3, "samples": [["3\n7 1\n3 2\n10 0", "10.5"], ["3\n2 1\n4 0\n0 3", "-1"], ["5\n15 4\n6 7\n12 5\n9 6\n1 7", "87"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #3] KOLINJE", "background": "", "description": "在一年一度的生猪屠宰会上，屠夫 Bajs 正在进行活动的最后一个环节——将自己那条屡获殊荣的火腿拿出一部分，分给参加活动的所有人。\n\n今年的生猪屠宰会一共有 $n$ 个人参加，其中第 $i$ 个人目前已经吃了 $a_i$ 千克火腿。Bajs 将自己的火腿按照 $b_1:b_2:\\cdots:b_n$ 的比例分给所有人，换句话说，令 $S=\\sum\\limits_{j=1}^nb_j$，则第 $i$ 个人将分到总火腿重量的 $\\dfrac{b_i}S$。\n\n但是，直到现在，Bajs 也没能确定他要拿出的火腿总量，因为在给每个人分完火腿并吃完以后，现场将根据每个人吃的火腿的千克数从大到小列出一个排名表（如果有两个人吃的肉的千克数相同，则按照两个人的编号从小到大排序），并宣布本次生猪屠宰会的年度人物，即排名表的第一位。虽然 Bajs 曾多次受到他人贿赂，但是他仍旧不愿改变分配的比例，并说他很诚实并且心地善良。Bajs 是个重度强迫症患者，因此他希望排名表上的人的编号从前往后依次为 $1,2,\\cdots,n$。请你帮助 Bajs 确定他要拿出的火腿总量，以满足 Bajs 的要求。", "inputFormat": "第一行输入一个整数 $n$，表示参加生猪屠宰会的人数。  \n随后 $n$ 行，每行输入两个整数 $a_i,b_i$，分别表示第 $i$ 个人已经吃的火腿的千克数和在火腿的分配中所占的比重（具体见『题目描述』部分）。", "outputFormat": "如果无论 Bajs 拿出多少火腿都不能满足要求，输出 `-1`。\n\n否则，输出一个**实数** $x$，表示 Bajs 拿出的火腿千克数。你需要保证：\n\n- $0\\leqslant x\\leqslant 10^7$。\n- $x$ 的小数点后不得超过 $12$ 个数位。建议自行对答案四舍五入后再输出。\n\n上面两点中若有至少一点不满足，均会被判定为 `WA`。\n\n如有多解，输出任意一个解即可。即**你不需要保证 Bajs 拿出的火腿千克数最小**。", "hint": "**【样例 1 解释】**\n\nBajs 拿出了 $10.5$ 千克火腿，由于分配的比例为 $1:2:0$，因此三个人依次分配到 $3.5$ 千克、$7$ 千克和 $0$ 千克火腿，最终三个人依次共吃了 $10.5$ 千克、$10$ 千克和 $10$ 千克火腿。这满足 Bajs 的要求。\n\n**【数据范围与限制】**\n\n对于所有数据，$2\\leqslant n\\leqslant 1000$，$0\\leqslant a_i,b_i\\leqslant 10^6$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T4 KOLINJE_**，按照原题数据配置，满分 $120$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。\n\n欢迎对[本题 checker](https://www.luogu.com.cn/paste/7p24epxh) 提出改进意见。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #3] KOLINJE", "background": "", "description": "在一年一度的生猪屠宰会上，屠夫 Bajs 正在进行活动的最后一个环节——将自己那条屡获殊荣的火腿拿出一部分，分给参加活动的所有人。\n\n今年的生猪屠宰会一共有 $n$ 个人参加，其中第 $i$ 个人目前已经吃了 $a_i$ 千克火腿。Bajs 将自己的火腿按照 $b_1:b_2:\\cdots:b_n$ 的比例分给所有人，换句话说，令 $S=\\sum\\limits_{j=1}^nb_j$，则第 $i$ 个人将分到总火腿重量的 $\\dfrac{b_i}S$。\n\n但是，直到现在，Bajs 也没能确定他要拿出的火腿总量，因为在给每个人分完火腿并吃完以后，现场将根据每个人吃的火腿的千克数从大到小列出一个排名表（如果有两个人吃的肉的千克数相同，则按照两个人的编号从小到大排序），并宣布本次生猪屠宰会的年度人物，即排名表的第一位。虽然 Bajs 曾多次受到他人贿赂，但是他仍旧不愿改变分配的比例，并说他很诚实并且心地善良。Bajs 是个重度强迫症患者，因此他希望排名表上的人的编号从前往后依次为 $1,2,\\cdots,n$。请你帮助 Bajs 确定他要拿出的火腿总量，以满足 Bajs 的要求。", "inputFormat": "第一行输入一个整数 $n$，表示参加生猪屠宰会的人数。  \n随后 $n$ 行，每行输入两个整数 $a_i,b_i$，分别表示第 $i$ 个人已经吃的火腿的千克数和在火腿的分配中所占的比重（具体见『题目描述』部分）。", "outputFormat": "如果无论 Bajs 拿出多少火腿都不能满足要求，输出 `-1`。\n\n否则，输出一个**实数** $x$，表示 Bajs 拿出的火腿千克数。你需要保证：\n\n- $0\\leqslant x\\leqslant 10^7$。\n- $x$ 的小数点后不得超过 $12$ 个数位。建议自行对答案四舍五入后再输出。\n\n上面两点中若有至少一点不满足，均会被判定为 `WA`。\n\n如有多解，输出任意一个解即可。即**你不需要保证 Bajs 拿出的火腿千克数最小**。", "hint": "**【样例 1 解释】**\n\nBajs 拿出了 $10.5$ 千克火腿，由于分配的比例为 $1:2:0$，因此三个人依次分配到 $3.5$ 千克、$7$ 千克和 $0$ 千克火腿，最终三个人依次共吃了 $10.5$ 千克、$10$ 千克和 $10$ 千克火腿。这满足 Bajs 的要求。\n\n**【数据范围与限制】**\n\n对于所有数据，$2\\leqslant n\\leqslant 1000$，$0\\leqslant a_i,b_i\\leqslant 10^6$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T4 KOLINJE_**，按照原题数据配置，满分 $120$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。\n\n欢迎对[本题 checker](https://www.luogu.com.cn/paste/7p24epxh) 提出改进意见。", "locale": "zh-CN"}}}
{"pid": "P8245", "type": "P", "difficulty": 5, "samples": [["1 5", "40"], ["288 291", "76"], ["1000000 10000000", "581093400"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #3] PAROVI", "background": "", "description": "定义两个整数 $A,B$ 之间的**距离**为这两个整数所有对应位上的数的差的绝对值之和，记为 $\\operatorname{dist}(A,B)$。特别地，如果 $A,B$ 两数的位数不相同，则在位数较小的数前补足前导 $0$。例如：\n\n- $\\operatorname{dist}(4561,3278)=\\left|4-3\\right|+\\left|5-2\\right|+\\left|6-7\\right|+\\left|1-8\\right|=12$。\n- $\\operatorname{dist}(32,5678)=\\left|0-5\\right|+\\left|0-6\\right|+\\left|3-7\\right|+\\left|2-8\\right|=21$。\n\n现在，给定两个整数 $L,R$，请你求出所有在区间 $[L,R]$ 内的整数对的距离和。由于答案可能很大，因此**请对 $\\bf 10^9+7$ 取模**。", "inputFormat": "输入仅一行，包含两个整数 $L,R$。", "outputFormat": "输出一行一个整数，表示所有在区间 $[L,R]$ 内的整数对的距离和对 $\\bf 10^9+7$ 取模之后的值。", "hint": "**【样例 2 解释】**\n\n所有在区间 $[288,291]$ 内的整数对的距离如下：\n\n- $\\operatorname{dist}(288,289)=\\operatorname{dist}(289,288)=1$。\n- $\\operatorname{dist}(288,290)=\\operatorname{dist}(290,288)=9$。\n- $\\operatorname{dist}(288,291)=\\operatorname{dist}(291,288)=8$。\n- $\\operatorname{dist}(289,290)=\\operatorname{dist}(290,289)=10$。\n- $\\operatorname{dist}(289,291)=\\operatorname{dist}(291,289)=9$。\n- $\\operatorname{dist}(290,291)=\\operatorname{dist}(291,290)=1$。\n\n因此距离和为 $2\\times (1+9+8+10+9+1)=76$。\n\n**【数据范围与限制】**\n\n对于 $20\\%$ 的数据，满足 $A,B\\leqslant 10^4$。  \n对于 $40\\%$ 的数据，满足 $A,B\\leqslant 10^{100}$。  \n对于所有数据，$1\\leqslant A\\leqslant B\\leqslant 10^{50000}$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T5 PAROVI_**，按照原题数据配置，满分 $140$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #3] PAROVI", "background": "", "description": "定义两个整数 $A,B$ 之间的**距离**为这两个整数所有对应位上的数的差的绝对值之和，记为 $\\operatorname{dist}(A,B)$。特别地，如果 $A,B$ 两数的位数不相同，则在位数较小的数前补足前导 $0$。例如：\n\n- $\\operatorname{dist}(4561,3278)=\\left|4-3\\right|+\\left|5-2\\right|+\\left|6-7\\right|+\\left|1-8\\right|=12$。\n- $\\operatorname{dist}(32,5678)=\\left|0-5\\right|+\\left|0-6\\right|+\\left|3-7\\right|+\\left|2-8\\right|=21$。\n\n现在，给定两个整数 $L,R$，请你求出所有在区间 $[L,R]$ 内的整数对的距离和。由于答案可能很大，因此**请对 $\\bf 10^9+7$ 取模**。", "inputFormat": "输入仅一行，包含两个整数 $L,R$。", "outputFormat": "输出一行一个整数，表示所有在区间 $[L,R]$ 内的整数对的距离和对 $\\bf 10^9+7$ 取模之后的值。", "hint": "**【样例 2 解释】**\n\n所有在区间 $[288,291]$ 内的整数对的距离如下：\n\n- $\\operatorname{dist}(288,289)=\\operatorname{dist}(289,288)=1$。\n- $\\operatorname{dist}(288,290)=\\operatorname{dist}(290,288)=9$。\n- $\\operatorname{dist}(288,291)=\\operatorname{dist}(291,288)=8$。\n- $\\operatorname{dist}(289,290)=\\operatorname{dist}(290,289)=10$。\n- $\\operatorname{dist}(289,291)=\\operatorname{dist}(291,289)=9$。\n- $\\operatorname{dist}(290,291)=\\operatorname{dist}(291,290)=1$。\n\n因此距离和为 $2\\times (1+9+8+10+9+1)=76$。\n\n**【数据范围与限制】**\n\n对于 $20\\%$ 的数据，满足 $A,B\\leqslant 10^4$。  \n对于 $40\\%$ 的数据，满足 $A,B\\leqslant 10^{100}$。  \n对于所有数据，$1\\leqslant A\\leqslant B\\leqslant 10^{50000}$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T5 PAROVI_**，按照原题数据配置，满分 $140$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8246", "type": "P", "difficulty": 5, "samples": [["3 10\n1 2 6\n0 4 3\n0 8 2", "6.000000"], ["5 15\n0 4 3\n1 5 5\n1 6 6\n0 9 2\n0 10 3", "8.500000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #3] ODAŠILJAČI", "background": null, "description": "一个二维平面中有一条长度为 $d$ ，以原点为最左端，且与 $x$ 轴重合的线段 $L$。另有 $n$ 条垂直于 $x$ 轴，垂足在线段 $L$ 上，且在 $x$ 轴上方的线段 $l_1,l_2,\\cdots,l_n$，其中第 $i$ 条线段到原点的距离为 $x_i$，其长度为 $h_i$。\n\n除了线段 $L$ 之外，若干条线段的最上端装有一个大小可忽略的发光点，可以向其左右发射激光。激光只能够沿着一条直线传播，且不能够穿过任意一条线段（包括线段 $L$）。我们称线段 $L$ 中的一个点 $A$ 是被覆盖的，当且仅当存在某个发光点，使得其向某个方向发射激光，最终会落在点 $A$ 上。\n\n现在请求出线段 $L$ 上所有被覆盖的部分的总长度。\n\n请前往样例及样例解释以更好地理解题面。", "inputFormat": "第一行输入两个整数 $n,d$，分别表示**除线段 $L$ 外**的线段的条数和线段 $L$ 的长度。\n\n随后 $n$ 行，每行输入三个整数 $op_i,x_i,h_i$，分别表示第 $i$ 条线段最上端是否有发光点，第 $i$ 条线段到原点的距离和其长度。具体地，如果 $op_i=0$，则表示第 $i$ 条线段最上端没有发光点，否则表示第 $i$ 条线段最上端有发光点。", "outputFormat": "输出一个**实数**，表示线段 $L$ 上所有被覆盖的部分的总长度。你需要保证你输出的答案和标准答案的相对误差不超过 $10^{-3}$。", "hint": "**【样例 2 解释】**\n\n下图为对应样例 2 的图片，其中加粗部分为**未被覆盖的区域**。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f0ft9cq.png)\n\n**【数据范围与限制】**\n\n**本题开启捆绑测试**。各个子任务的分值和特殊限制如下所述：\n- Subtask 1（48 pts）：$n\\leqslant 10^3$。\n- Subtask 2（112 pts）：无特殊限制。\n\n对于所有数据，$1\\leqslant n\\leqslant 3\\times 10^5$，$1\\leqslant d\\leqslant 10^9$，$op_i\\in\\{0,1\\}$，$0\\leqslant x_i\\leqslant d$，$1\\leqslant h_i\\leqslant 10^9$。保证 $\\forall i\\neq j$，$x_i\\neq x_j$。保证 $x_i$ 单调递增。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T6 ODAŠILJAČI_**，按照原题数据配置，满分 $160$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #3] ODAŠILJAČI", "background": null, "description": "一个二维平面中有一条长度为 $d$ ，以原点为最左端，且与 $x$ 轴重合的线段 $L$。另有 $n$ 条垂直于 $x$ 轴，垂足在线段 $L$ 上，且在 $x$ 轴上方的线段 $l_1,l_2,\\cdots,l_n$，其中第 $i$ 条线段到原点的距离为 $x_i$，其长度为 $h_i$。\n\n除了线段 $L$ 之外，若干条线段的最上端装有一个大小可忽略的发光点，可以向其左右发射激光。激光只能够沿着一条直线传播，且不能够穿过任意一条线段（包括线段 $L$）。我们称线段 $L$ 中的一个点 $A$ 是被覆盖的，当且仅当存在某个发光点，使得其向某个方向发射激光，最终会落在点 $A$ 上。\n\n现在请求出线段 $L$ 上所有被覆盖的部分的总长度。\n\n请前往样例及样例解释以更好地理解题面。", "inputFormat": "第一行输入两个整数 $n,d$，分别表示**除线段 $L$ 外**的线段的条数和线段 $L$ 的长度。\n\n随后 $n$ 行，每行输入三个整数 $op_i,x_i,h_i$，分别表示第 $i$ 条线段最上端是否有发光点，第 $i$ 条线段到原点的距离和其长度。具体地，如果 $op_i=0$，则表示第 $i$ 条线段最上端没有发光点，否则表示第 $i$ 条线段最上端有发光点。", "outputFormat": "输出一个**实数**，表示线段 $L$ 上所有被覆盖的部分的总长度。你需要保证你输出的答案和标准答案的相对误差不超过 $10^{-3}$。", "hint": "**【样例 2 解释】**\n\n下图为对应样例 2 的图片，其中加粗部分为**未被覆盖的区域**。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f0ft9cq.png)\n\n**【数据范围与限制】**\n\n**本题开启捆绑测试**。各个子任务的分值和特殊限制如下所述：\n- Subtask 1（48 pts）：$n\\leqslant 10^3$。\n- Subtask 2（112 pts）：无特殊限制。\n\n对于所有数据，$1\\leqslant n\\leqslant 3\\times 10^5$，$1\\leqslant d\\leqslant 10^9$，$op_i\\in\\{0,1\\}$，$0\\leqslant x_i\\leqslant d$，$1\\leqslant h_i\\leqslant 10^9$。保证 $\\forall i\\neq j$，$x_i\\neq x_j$。保证 $x_i$ 单调递增。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T6 ODAŠILJAČI_**，按照原题数据配置，满分 $160$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8247", "type": "P", "difficulty": 3, "samples": [["3 5\nK...K\n.K.K.\n..S..", "2"], ["3 5\nKKKKK\nKKSKK\nKKKKK", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "皇室战争", "background": "", "description": "训练场可以看作成一个 $n \\times m$ 的字符矩阵，每个单元为`S`，`K`或`.`。\n\n`S`为神箭游侠，`K`为骷髅。众所周知，神箭游侠的箭是可以穿透的。（我们把他的箭的射程看作是一条射线，且无限长）。由于骷髅很脆，所以打一下就死。已知骷髅都不会动，问你他最少射几箭才能使所有的骷髅都死亡？\n\n假设所有的人物都站在点上，且无限小。", "inputFormat": "第 1 行 2 个数，$n$ 和 $m$。\n\n第 2 至第 $n+1$ 行，每行 $m$ 个字符，代表骷髅`K`，空地`.`和神箭游侠`S`，神箭游侠只会有一个。", "outputFormat": "一个数，即最少射的箭数。", "hint": "* Subtask 1（15 分）：$1 \\le n,m \\le 10$；\n* Subtask 2（20 分）：$1 \\le n,m \\le 400$；\n* Subtask 3（35 分）：$1 \\le n,m \\le 10^3$；\n* Subtask 4（30 分）：$1 \\le n\\times m \\le 10^6$。\n\n$n,m$ 均为正整数。\n\n样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9vabxn60.png)\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "皇室战争", "background": "", "description": "训练场可以看作成一个 $n \\times m$ 的字符矩阵，每个单元为`S`，`K`或`.`。\n\n`S`为神箭游侠，`K`为骷髅。众所周知，神箭游侠的箭是可以穿透的。（我们把他的箭的射程看作是一条射线，且无限长）。由于骷髅很脆，所以打一下就死。已知骷髅都不会动，问你他最少射几箭才能使所有的骷髅都死亡？\n\n假设所有的人物都站在点上，且无限小。", "inputFormat": "第 1 行 2 个数，$n$ 和 $m$。\n\n第 2 至第 $n+1$ 行，每行 $m$ 个字符，代表骷髅`K`，空地`.`和神箭游侠`S`，神箭游侠只会有一个。", "outputFormat": "一个数，即最少射的箭数。", "hint": "* Subtask 1（15 分）：$1 \\le n,m \\le 10$；\n* Subtask 2（20 分）：$1 \\le n,m \\le 400$；\n* Subtask 3（35 分）：$1 \\le n,m \\le 10^3$；\n* Subtask 4（30 分）：$1 \\le n\\times m \\le 10^6$。\n\n$n,m$ 均为正整数。\n\n样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9vabxn60.png)\n", "locale": "zh-CN"}}}
{"pid": "P8248", "type": "P", "difficulty": 3, "samples": [["3", "1 2 3"], ["6", "1 2 3 4 1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge"], "title": "简单数列", "background": "", "description": "给你一个数 $n$，你需要求出一个长度为 $n$ 的数组 $a$，（下标从 $1$ 开始，且元素都为 $1,2,3$ 或 $4$），使得：\n\n* 对于第 $i$ 个数，对于所有的 $1 \\le len \\le \\lfloor\\frac{i}{2}\\rfloor$, $a_{i-len+1\\dots i}$ 与 $a_{i-len\\times2+1\\dots i-len}$ 不相同。（$\\lfloor x \\rfloor$ 表示对 $x$ 下取整）\n\n* 说人话，就是没有任何连续的连续子串相同。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行，$n$ 个正整数，数组 $a$。", "hint": "对于 $20\\%$ 的数据，满足 $1 \\le n \\le 10$；\n\n对于 $40\\%$ 的数据，满足 $1 \\le n \\le 30$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le n \\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "简单数列", "background": "", "description": "给你一个数 $n$，你需要求出一个长度为 $n$ 的数组 $a$，（下标从 $1$ 开始，且元素都为 $1,2,3$ 或 $4$），使得：\n\n* 对于第 $i$ 个数，对于所有的 $1 \\le len \\le \\lfloor\\frac{i}{2}\\rfloor$, $a_{i-len+1\\dots i}$ 与 $a_{i-len\\times2+1\\dots i-len}$ 不相同。（$\\lfloor x \\rfloor$ 表示对 $x$ 下取整）\n\n* 说人话，就是没有任何连续的连续子串相同。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行，$n$ 个正整数，数组 $a$。", "hint": "对于 $20\\%$ 的数据，满足 $1 \\le n \\le 10$；\n\n对于 $40\\%$ 的数据，满足 $1 \\le n \\le 30$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le n \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P8249", "type": "P", "difficulty": 3, "samples": [["5 7\n4\n1 5\n5 7\n33 34\n34 35", "8\n7\n10\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "模法问题", "background": "简单题，无背景。", "description": "你有两个正整数 $a,b$。\n\n你还有一个正整数 $q$，你要执行 $q$ 次询问。\n\n对于每一次询问，你得到两个正整数 $l,r$。\n\n你需要求出求 $\\max\\{(i \\bmod a)+(i \\bmod b) \\}$，其中 $i$ 是正整数且 $i \\in [l,r] $。", "inputFormat": "第一行两个正整数 $a,b$。\n\n第二行一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$。", "outputFormat": "对于每一次询问，输出一行，包含一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，满足 $1\\le q\\le10^3$，$1 \\le l \\le r \\le 10^3$；\n\n对于 $70\\%$ 的数据，满足 $1\\le q\\le10^3$，$1 \\le l \\le r \\le 10^9$；\n\n对于 $100\\%$ 的数据，满足 $1\\le a,b\\le 10^3$，$1\\le q\\le10^5$，$1 \\le l \\le r \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "模法问题", "background": "简单题，无背景。", "description": "你有两个正整数 $a,b$。\n\n你还有一个正整数 $q$，你要执行 $q$ 次询问。\n\n对于每一次询问，你得到两个正整数 $l,r$。\n\n你需要求出求 $\\max\\{(i \\bmod a)+(i \\bmod b) \\}$，其中 $i$ 是正整数且 $i \\in [l,r] $。", "inputFormat": "第一行两个正整数 $a,b$。\n\n第二行一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$。", "outputFormat": "对于每一次询问，输出一行，包含一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，满足 $1\\le q\\le10^3$，$1 \\le l \\le r \\le 10^3$；\n\n对于 $70\\%$ 的数据，满足 $1\\le q\\le10^3$，$1 \\le l \\le r \\le 10^9$；\n\n对于 $100\\%$ 的数据，满足 $1\\le a,b\\le 10^3$，$1\\le q\\le10^5$，$1 \\le l \\le r \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8250", "type": "P", "difficulty": 5, "samples": [["6 7 8\n5 1\n1 4\n1 6\n5 6\n5 4\n1 2\n5 3\n5 3\n1 1\n3 6\n1 5\n5 6\n1 4\n5 2\n2 6", "3\n0\n0\n1\n2\n2\n3\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "根号分治", "bitset"], "title": "交友问题", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pu73hyh9.png)", "description": "洛谷上有 $n$ 位用户，这些用户组成了一个双向的网络。\n\n洛谷的图片分享机制如下：如果第 $i$ 个用户向他的好友 $j$ 分享了一张照片，那么，$j$ 的所有好友 $k$ 就能看到这张照片。**$j$ 也可以看到这张照片。**\n\n现在，用户 $u_i$ 想分享一张照片，但是TA不想让用户 $v_i$ 看到这张照片。在不发送给自己的情况下，TA想知道，他最多可以发送给多少位好友？", "inputFormat": "第一行三个正整数 $n,m,q$，分别代表用户数，边数，询问数。\n\n接下来 $m$ 行，每行两个数 $x_i,y_i$，表示用户 $x_i$ 与 $y_i$ 之间有一条双向边。\n\n接下来 $q$ 行，每行两个数 $u_i,v_i$，表示第 $i$ 次询问。", "outputFormat": "对于每一次询问，输出一行，包含一个数，答案。", "hint": "对于 $20\\%$ 的数据，满足 $1 \\le n,q \\le 2\\times10^3$，$1\\le m \\le 8\\times 10^3$；\n\n对于 $60\\%$ 的数据，满足 $1 \\le n,q \\le 2\\times10^4$，$1\\le m \\le 5\\times 10^4$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le n,q \\le 2\\times10^5$，$1\\le m \\le 7\\times 10^5$。\n\n**保证没有重边和自环**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "交友问题", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pu73hyh9.png)", "description": "洛谷上有 $n$ 位用户，这些用户组成了一个双向的网络。\n\n洛谷的图片分享机制如下：如果第 $i$ 个用户向他的好友 $j$ 分享了一张照片，那么，$j$ 的所有好友 $k$ 就能看到这张照片。**$j$ 也可以看到这张照片。**\n\n现在，用户 $u_i$ 想分享一张照片，但是TA不想让用户 $v_i$ 看到这张照片。在不发送给自己的情况下，TA想知道，他最多可以发送给多少位好友？", "inputFormat": "第一行三个正整数 $n,m,q$，分别代表用户数，边数，询问数。\n\n接下来 $m$ 行，每行两个数 $x_i,y_i$，表示用户 $x_i$ 与 $y_i$ 之间有一条双向边。\n\n接下来 $q$ 行，每行两个数 $u_i,v_i$，表示第 $i$ 次询问。", "outputFormat": "对于每一次询问，输出一行，包含一个数，答案。", "hint": "对于 $20\\%$ 的数据，满足 $1 \\le n,q \\le 2\\times10^3$，$1\\le m \\le 8\\times 10^3$；\n\n对于 $60\\%$ 的数据，满足 $1 \\le n,q \\le 2\\times10^4$，$1\\le m \\le 5\\times 10^4$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le n,q \\le 2\\times10^5$，$1\\le m \\le 7\\times 10^5$。\n\n**保证没有重边和自环**", "locale": "zh-CN"}}}
{"pid": "P8251", "type": "P", "difficulty": 5, "samples": [["10 4\n3 1 3 1 2 3 3 2 1 1\n10 10 2 9 7 5 4 7 6 1\n1 4\n7 8\n7 10\n1 8", "3\n2\n2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "树状数组", "2022", "O2优化", "NOI Online", "单调栈"], "title": "[NOI Online 2022 提高组] 丹钓战", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@Froggy。", "description": "有 $n$ 个二元组 $(a_i, b_i)$，编号为 $1$ 到 $n$。\n\n有一个初始为空的栈 $S$，向其中加入元素 $(a_i, b_i)$ 时，先不断弹出栈顶元素直至栈空或栈顶元素 $(a_j , b_j)$ 满足 $a_i \\neq a_j$ 且 $b_i < b_j$，然后再将其加入栈中。\n\n如果一个二元组入栈后栈内只有这一个元素，则称该二元组是“成功的”。\n\n有 $q$ 个询问 $[l_i, r_i]$，表示若将编号在 $[l_i, r_i]$ 中的二元组按编号从小到大依次入栈，会有多少个二元组是“成功的”。\n\n询问之间相互独立。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个正整数表示 $a_i$。\n\n第三行 $n$ 个正整数表示 $b_i$。\n\n接下来 $q$ 行，每行两个正整数 $l_i, r_i$，表示一组询问。", "outputFormat": "$q$ 行，每行一个自然数表示一组询问的答案。", "hint": "**【样例解释】**\n\n以第一次询问 $[1, 4]$ 为例。\n\n一开始栈为 $\\{\\}$。\n\n加入 $1$ 号二元组后栈为 $\\{(3, 10)\\}$，栈中只有一个元素，该二元组是“成功的”。\n\n加入 $2$ 号二元组 $(1, 10)$ 时，栈顶的 $(3, 10)$ 的 $b$ 值不大于 $2$ 号二元组的，因此弹栈。此时栈空，$2$\n号二元组入栈，栈为 $\\{(1, 10)\\}$，该二元组是“成功的”。\n\n加入 $3$ 号二元组 $(3, 2)$，此时栈顶元素与之 $a$ 值不同，$b$ 值比它更大，因而不需要弹栈，直接将 $3$ 号二元组入栈，栈为 $\\{(1, 10),(3, 2)\\}$，栈中有多个元素，该二元组不是“成功的”。\n\n加入 $4$ 号二元组 $(1, 9)$，此时栈顶元素 $(3, 2)$ 的 $b$ 值比它小，弹栈。弹栈后栈顶元素 $(1, 10)$ 与\n$(1, 9)$ 的 $a$ 值相同，继续弹栈。此时栈空，$4$ 号二元组入栈，栈为 $\\{(1, 9)\\}$，该二元组是“成功的”。共有 $3$ 个二元组是“成功的”，因而答案为 $3$。\n\n**【样例 2,3,4】**\n\n见附件 $\\texttt{stack/stack*.in}$ 与 $\\texttt{stack/stack*.ans}$。\n\n链接：<https://pan.baidu.com/s/14XxLN63bxvpJAod81foGOg> \n提取码：gugu\n\n**【数据范围与提示】**\n\n对于所有测试点：$1 \\leq n, q \\leq 5 \\times 10^5$，$1 \\leq a_i, b_i \\leq n$，$1 \\leq l_i \\leq r_i \\leq n$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号   | 特殊性质        |\n| ------------ | --------------- |\n| $1 \\sim 3$   | $n,q \\leq 1000$ |\n| $4 \\sim 6$   | $n \\leq 5000$   |\n| $7 \\sim 10$  | $n,q \\leq 10^5$ |\n| $11 \\sim 12$ | $b_i=n-i+1$     |\n| $13 \\sim 15$ | $a_i=i$         |\n| $16 \\sim 20$ | 无              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2022 提高组] 丹钓战", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@Froggy。", "description": "有 $n$ 个二元组 $(a_i, b_i)$，编号为 $1$ 到 $n$。\n\n有一个初始为空的栈 $S$，向其中加入元素 $(a_i, b_i)$ 时，先不断弹出栈顶元素直至栈空或栈顶元素 $(a_j , b_j)$ 满足 $a_i \\neq a_j$ 且 $b_i < b_j$，然后再将其加入栈中。\n\n如果一个二元组入栈后栈内只有这一个元素，则称该二元组是“成功的”。\n\n有 $q$ 个询问 $[l_i, r_i]$，表示若将编号在 $[l_i, r_i]$ 中的二元组按编号从小到大依次入栈，会有多少个二元组是“成功的”。\n\n询问之间相互独立。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个正整数表示 $a_i$。\n\n第三行 $n$ 个正整数表示 $b_i$。\n\n接下来 $q$ 行，每行两个正整数 $l_i, r_i$，表示一组询问。", "outputFormat": "$q$ 行，每行一个自然数表示一组询问的答案。", "hint": "**【样例解释】**\n\n以第一次询问 $[1, 4]$ 为例。\n\n一开始栈为 $\\{\\}$。\n\n加入 $1$ 号二元组后栈为 $\\{(3, 10)\\}$，栈中只有一个元素，该二元组是“成功的”。\n\n加入 $2$ 号二元组 $(1, 10)$ 时，栈顶的 $(3, 10)$ 的 $b$ 值不大于 $2$ 号二元组的，因此弹栈。此时栈空，$2$\n号二元组入栈，栈为 $\\{(1, 10)\\}$，该二元组是“成功的”。\n\n加入 $3$ 号二元组 $(3, 2)$，此时栈顶元素与之 $a$ 值不同，$b$ 值比它更大，因而不需要弹栈，直接将 $3$ 号二元组入栈，栈为 $\\{(1, 10),(3, 2)\\}$，栈中有多个元素，该二元组不是“成功的”。\n\n加入 $4$ 号二元组 $(1, 9)$，此时栈顶元素 $(3, 2)$ 的 $b$ 值比它小，弹栈。弹栈后栈顶元素 $(1, 10)$ 与\n$(1, 9)$ 的 $a$ 值相同，继续弹栈。此时栈空，$4$ 号二元组入栈，栈为 $\\{(1, 9)\\}$，该二元组是“成功的”。共有 $3$ 个二元组是“成功的”，因而答案为 $3$。\n\n**【样例 2,3,4】**\n\n见附件 $\\texttt{stack/stack*.in}$ 与 $\\texttt{stack/stack*.ans}$。\n\n链接：<https://pan.baidu.com/s/14XxLN63bxvpJAod81foGOg> \n提取码：gugu\n\n**【数据范围与提示】**\n\n对于所有测试点：$1 \\leq n, q \\leq 5 \\times 10^5$，$1 \\leq a_i, b_i \\leq n$，$1 \\leq l_i \\leq r_i \\leq n$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号   | 特殊性质        |\n| ------------ | --------------- |\n| $1 \\sim 3$   | $n,q \\leq 1000$ |\n| $4 \\sim 6$   | $n \\leq 5000$   |\n| $7 \\sim 10$  | $n,q \\leq 10^5$ |\n| $11 \\sim 12$ | $b_i=n-i+1$     |\n| $13 \\sim 15$ | $a_i=i$         |\n| $16 \\sim 20$ | 无              |", "locale": "zh-CN"}}}
{"pid": "P8252", "type": "P", "difficulty": 5, "samples": [["2\n5\n4 1 2 3 5\n3 1 2 3\n2 1 2\n1 1\n1 4\n4\n3 1 2 3\n3 2 3 4\n0\n4 1 2 3 4", "NO\nYES\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "O2优化", "NOI Online"], "title": "[NOI Online 2022 提高组] 讨论", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@AutumnKite，由 @tiger2005 进行加强。", "description": "有 $n$ 个人正在打模拟赛，模拟赛有 $n$ 道题目。  \n有两人都会的题目并且没有人会的题目包含另一个人时，两者之间才会讨论。  \n（定义第 $i$ 个人会的题目的集合为 $S_i$ ，即当 $S_x\\cap S_y\\neq\\varnothing\\land S_x\\not\\subseteq S_y\\land S_y\\not\\subseteq S_x$ 时，第 $x$ 人和第 $y$ 人会讨论）  \n为了让模拟赛的效果更好，希望你可以找出一对会讨论的人或判断不存在。", "inputFormat": "第一行一个正整数 $T$ 表示数据组数，对于每组数据：  \n第一行一个正整数 $n$ 表示人数和题目数量。  \n接下来 $n$ 行，第 $i$ 行第一个自然数 $k_i$ 表示第 $i$ 个人会 $k_i$ 道题。接下来 $k_i$ 个正整数，每个数 $x$ 表示第 $i$ 个人会第 $x$ 道题。", "outputFormat": "对于每组数据：  \n如果没有会讨论的人，输出 `NO`。  \n否则第一行输出 `YES`，第二行输出两个正整数 $x$ 和 $y$，表示第 $x$ 人和第 $y$ 人会讨论。  \n如果有多种方案，输出任意一种即可。", "hint": "**【样例 2】**\n\n见附件中的 `discuss/discuss2.in` 与 `discuss/discuss2.ans`。\n\n**【数据范围与提示】**\n\n对于所有测试点：令一组数据中 $m=\\sum k_i$，则 $1\\le T\\le 5$，$1\\le \\sum n\\le {10}^6$，$1\\le \\sum m\\le 2\\times {10}^6$，$0\\le k_i\\le n$。\n\n每个测试点的具体限制见下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zmkoxviw.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2022 提高组] 讨论", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@AutumnKite，由 @tiger2005 进行加强。", "description": "有 $n$ 个人正在打模拟赛，模拟赛有 $n$ 道题目。  \n有两人都会的题目并且没有人会的题目包含另一个人时，两者之间才会讨论。  \n（定义第 $i$ 个人会的题目的集合为 $S_i$ ，即当 $S_x\\cap S_y\\neq\\varnothing\\land S_x\\not\\subseteq S_y\\land S_y\\not\\subseteq S_x$ 时，第 $x$ 人和第 $y$ 人会讨论）  \n为了让模拟赛的效果更好，希望你可以找出一对会讨论的人或判断不存在。", "inputFormat": "第一行一个正整数 $T$ 表示数据组数，对于每组数据：  \n第一行一个正整数 $n$ 表示人数和题目数量。  \n接下来 $n$ 行，第 $i$ 行第一个自然数 $k_i$ 表示第 $i$ 个人会 $k_i$ 道题。接下来 $k_i$ 个正整数，每个数 $x$ 表示第 $i$ 个人会第 $x$ 道题。", "outputFormat": "对于每组数据：  \n如果没有会讨论的人，输出 `NO`。  \n否则第一行输出 `YES`，第二行输出两个正整数 $x$ 和 $y$，表示第 $x$ 人和第 $y$ 人会讨论。  \n如果有多种方案，输出任意一种即可。", "hint": "**【样例 2】**\n\n见附件中的 `discuss/discuss2.in` 与 `discuss/discuss2.ans`。\n\n**【数据范围与提示】**\n\n对于所有测试点：令一组数据中 $m=\\sum k_i$，则 $1\\le T\\le 5$，$1\\le \\sum n\\le {10}^6$，$1\\le \\sum m\\le 2\\times {10}^6$，$0\\le k_i\\le n$。\n\n每个测试点的具体限制见下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zmkoxviw.png)", "locale": "zh-CN"}}}
{"pid": "P8253", "type": "P", "difficulty": 6, "samples": [["3 5\n1 7 2 2 7\n9 10 4 10 3\n7 7 8 10 2", "564"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "NOI Online"], "title": "[NOI Online 2022 提高组] 如何正确地排序", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@QwQcOrZ。", "description": "有一个 $m\\times n$ 的数组 $a_{i,j}$。  \n定义：\n\n$$f(i,j)=\\min\\limits_{k=1}^m(a_{k,i}+a_{k,j})+\\max\\limits_{k=1}^m(a_{k,i}+a_{k,j})$$\n\n你需要求出 $\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^nf(i,j)$。", "inputFormat": "第一行两个正整数 $m,n$。\n\n接下来 $m$ 行，每行 $n$ 个正整数表示 $a_{i,j}$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "**【样例 1 解释】**\n\n以 $f(3,5)$ 为例：\n\n$$\\begin{aligned}f(3,5)&=\\max(a_{1,3}+a_{1,5},a_{2,3}+a_{2,5},a_{3,3}+a_{3,5})+\\min(a_{1,3}+a_{1,5},a_{2,3}+a_{2,5},a_{3,3}+a_{3,5})\\\\&=\\max(9,7,10)+\\min(9,7,10)\\\\&=10+7\\\\&=17\\end{aligned}$$\n\n下面给出 $f(i,j)$ 的数表，第 $i$ 行第 $j$ 列表示 $f(i,j)$：\n\n$$\\begin{array}{|c|c|c|c|c|}\\hline20&27&18&22&20\\\\\\hline27&34&24&29&23\\\\\\hline18&24&20&22&17\\\\\\hline22&29&22&24&22\\\\\\hline20&23&17&22&18\\\\\\hline\\end{array}$$\n\n它们的和是答案 $564$。\n\n**【样例 2, 3, 4】**\n\n见选手目录下的 `sort/sort*.in` 与 `sort/sort*.ans`。\n\n**【数据范围与提示】**\n\n对于所有测试点：$2\\le m\\le 4$，$1\\le n\\le 2\\times {10}^5$，$1\\le a_{i,j}\\le 2\\times 10^5$。\n\n每个测试点的具体限制见下表\n\n\n::cute-table{tuack}\n\n| 测试点编号 | $m =$ | $n \\le$ |\n| :-: | :-: | :-: |\n| $1$ | $4$ | $3000$ |\n| $2$ | $2$ | $10^5$ |\n| $3 \\sim 5$ | $3$ | ^ |\n| $6 \\sim 7$ | $4$ | $5 \\times 10^4$ |\n| $8 \\sim 9$ | ^ | $10^5$ |\n| $10$ | ^ | $2 \\times 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2022 提高组] 如何正确地排序", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@QwQcOrZ。", "description": "有一个 $m\\times n$ 的数组 $a_{i,j}$。  \n定义：\n\n$$f(i,j)=\\min\\limits_{k=1}^m(a_{k,i}+a_{k,j})+\\max\\limits_{k=1}^m(a_{k,i}+a_{k,j})$$\n\n你需要求出 $\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^nf(i,j)$。", "inputFormat": "第一行两个正整数 $m,n$。\n\n接下来 $m$ 行，每行 $n$ 个正整数表示 $a_{i,j}$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "**【样例 1 解释】**\n\n以 $f(3,5)$ 为例：\n\n$$\\begin{aligned}f(3,5)&=\\max(a_{1,3}+a_{1,5},a_{2,3}+a_{2,5},a_{3,3}+a_{3,5})+\\min(a_{1,3}+a_{1,5},a_{2,3}+a_{2,5},a_{3,3}+a_{3,5})\\\\&=\\max(9,7,10)+\\min(9,7,10)\\\\&=10+7\\\\&=17\\end{aligned}$$\n\n下面给出 $f(i,j)$ 的数表，第 $i$ 行第 $j$ 列表示 $f(i,j)$：\n\n$$\\begin{array}{|c|c|c|c|c|}\\hline20&27&18&22&20\\\\\\hline27&34&24&29&23\\\\\\hline18&24&20&22&17\\\\\\hline22&29&22&24&22\\\\\\hline20&23&17&22&18\\\\\\hline\\end{array}$$\n\n它们的和是答案 $564$。\n\n**【样例 2, 3, 4】**\n\n见选手目录下的 `sort/sort*.in` 与 `sort/sort*.ans`。\n\n**【数据范围与提示】**\n\n对于所有测试点：$2\\le m\\le 4$，$1\\le n\\le 2\\times {10}^5$，$1\\le a_{i,j}\\le 2\\times 10^5$。\n\n每个测试点的具体限制见下表\n\n\n::cute-table{tuack}\n\n| 测试点编号 | $m =$ | $n \\le$ |\n| :-: | :-: | :-: |\n| $1$ | $4$ | $3000$ |\n| $2$ | $2$ | $10^5$ |\n| $3 \\sim 5$ | $3$ | ^ |\n| $6 \\sim 7$ | $4$ | $5 \\times 10^4$ |\n| $8 \\sim 9$ | ^ | $10^5$ |\n| $10$ | ^ | $2 \\times 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P8254", "type": "P", "difficulty": 1, "samples": [["3 3\n1 0 1\n0 1 1\n0 1 0\n1 1 1", "2"], ["6 5\n1 0 1 1 1 0\n0 1 0 1 1 1\n0 0 1 0 1 0\n1 0 1 0 1 0\n0 1 0 1 0 0\n1 0 1 0 1 0", "4"], ["见附件中的 kingdom3.in", "见附件中的 kingdom3.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "NOI Online"], "title": "[NOI Online 2022 入门组] 王国比赛", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n民间数据提供者：@一扶苏一。", "description": "智慧之王 Kri 统治着一座王国。  \n\n这天 Kri 决定举行一场比赛，来检验自己大臣的智慧。  \n\n比赛由 $n$ 道判断题组成，有 $m$ 位大臣参加。现在你已经知道了所有大臣的答题情况，但尚未拿到答案，于是你决定先行预测。  \n\n具体来说，对于第 $i$ 道题，有 $x$ 个大臣选对，$y$ 个大臣选错（显然有 $x+y=m$），如果 $x>y$，那么你预测这题答案为对，否则为错。为了方便，我们保证 $m$ 是奇数。\n\n在统计完成后，你拿到了答案，你想知道通过你的预测方式你最后有几道题预测正确。", "inputFormat": "第一行两个正整数 $n,m$，保证 $m$ 是奇数。\n\n接下来 $m$ 行，每行 $n$ 个整数，第 $i$ 行第 $j$ 个整数代表第 $i$ 位大臣对第 $j$ 道题的答案，$1$ 表示他选对，$0$ 表示他选错。\n\n接下来 $1$ 行 $n$ 个整数， 表示比赛答案，第 $i$ 个数 $b_i$ 若为 $1$ 表示第 $i$ 道题答案是对，若为 $0$ 表示答案是错。", "outputFormat": "输出一个整数，表示你最后有几题预测正确。", "hint": "**【样例 1 解释】**\n\n- 第一题 $x=1,y=2$ 你预测答案为错（即 $0$），实际答案为1，预测错误。\n- 第二题 $x=2,y=1$ 你预测答案为对（即 $1$），实际答案为1，预测正确。\n- 第三题 $x=2,y=1$ 你预测答案为对（即 $1$），实际答案为1，预测正确。\n\n所以预测正确的题数为 $2$。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n\\le 5$，$m=1$。\n\n对于 $50\\%$ 的数据，$n\\le 10$，$m\\le 10$。\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 1000$，$1 \\le m\\le 1000$，$m$ 为奇数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2022 入门组] 王国比赛", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n民间数据提供者：@一扶苏一。", "description": "智慧之王 Kri 统治着一座王国。  \n\n这天 Kri 决定举行一场比赛，来检验自己大臣的智慧。  \n\n比赛由 $n$ 道判断题组成，有 $m$ 位大臣参加。现在你已经知道了所有大臣的答题情况，但尚未拿到答案，于是你决定先行预测。  \n\n具体来说，对于第 $i$ 道题，有 $x$ 个大臣选对，$y$ 个大臣选错（显然有 $x+y=m$），如果 $x>y$，那么你预测这题答案为对，否则为错。为了方便，我们保证 $m$ 是奇数。\n\n在统计完成后，你拿到了答案，你想知道通过你的预测方式你最后有几道题预测正确。", "inputFormat": "第一行两个正整数 $n,m$，保证 $m$ 是奇数。\n\n接下来 $m$ 行，每行 $n$ 个整数，第 $i$ 行第 $j$ 个整数代表第 $i$ 位大臣对第 $j$ 道题的答案，$1$ 表示他选对，$0$ 表示他选错。\n\n接下来 $1$ 行 $n$ 个整数， 表示比赛答案，第 $i$ 个数 $b_i$ 若为 $1$ 表示第 $i$ 道题答案是对，若为 $0$ 表示答案是错。", "outputFormat": "输出一个整数，表示你最后有几题预测正确。", "hint": "**【样例 1 解释】**\n\n- 第一题 $x=1,y=2$ 你预测答案为错（即 $0$），实际答案为1，预测错误。\n- 第二题 $x=2,y=1$ 你预测答案为对（即 $1$），实际答案为1，预测正确。\n- 第三题 $x=2,y=1$ 你预测答案为对（即 $1$），实际答案为1，预测正确。\n\n所以预测正确的题数为 $2$。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n\\le 5$，$m=1$。\n\n对于 $50\\%$ 的数据，$n\\le 10$，$m\\le 10$。\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 1000$，$1 \\le m\\le 1000$，$m$ 为奇数。", "locale": "zh-CN"}}}
{"pid": "P8255", "type": "P", "difficulty": 5, "samples": [["1\n10 240", "12"], ["3\n5 30\n4 8\n11 11", "6\n-1\n1"], ["见附件中的 math3.in", "见附件中的 math3.out"], ["见附件中的 math4.in", "见附件中的 math4.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "最大公约数 gcd", "NOI Online"], "title": "[NOI Online 2022 入门组] 数学游戏", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n民间数据提供者：@一扶苏一。本题不保证民间数据强度，详见[这个帖子](https://www.luogu.com.cn/discuss/422596)。", "description": "Kri 喜欢玩数字游戏。\n\n一天，他在草稿纸上写下了 $t$ 对正整数 $(x,y)$，并对于每一对正整数计算出了 $z=x\\times y\\times\\gcd(x,y)$。\n\n可是调皮的 Zay 找到了 Kri 的草稿纸，并把每一组的 $y$ 都擦除了，还可能改动了一些 $z$。\n\n现在 Kri 想请你帮忙还原每一组的 $y$，具体地，对于每一组中的 $x$ 和 $z$，你需要输出最小的正整数 $y$，使得 $z=x\\times y\\times\\gcd(x,y)$。如果这样的 $y$ 不存在，也就是 Zay 一定改动了 $z$，那么请输出 $-1$。\n\n注：$\\gcd(x,y)$ 表示 $x$ 和 $y$ 的最大公约数，也就是最大的正整数 $d$，满足 $d$ 既是 $x$ 的约数，又是 $y$ 的约数。", "inputFormat": "第一行一个整数 ，表示有 $t$ 对正整数 $x$ 和 $z$。\n\n接下来 $t$ 行，每行两个正整数 $x$ 和 $z$，含义见题目描述。", "outputFormat": "对于每对数字输出一行，如果不存在满足条件的正整数 $y$，请输出 $-1$，否则输出满足条件的最小正整数 $y$。", "hint": "**【样例 1 解释】**\n\n$x\\times y\\times \\gcd(x,y)=10\\times 12\\times\\gcd(10,12)=240$。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$t, x, z \\le {10}^3$。\n\n对于 $40\\%$ 的数据，$t \\le {10}^3$，$x \\le {10}^6$，$z \\le {10}^9$。\n\n对于另 $30\\%$ 的数据，$t \\le {10}^4$。\n\n对于另 $20\\%$ 的数据，$x \\le {10}^6$。\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 5 \\times {10}^5$，$1 \\le x \\le {10}^9$，$1 \\le z < 2^{63}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2022 入门组] 数学游戏", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n民间数据提供者：@一扶苏一。本题不保证民间数据强度，详见[这个帖子](https://www.luogu.com.cn/discuss/422596)。", "description": "Kri 喜欢玩数字游戏。\n\n一天，他在草稿纸上写下了 $t$ 对正整数 $(x,y)$，并对于每一对正整数计算出了 $z=x\\times y\\times\\gcd(x,y)$。\n\n可是调皮的 Zay 找到了 Kri 的草稿纸，并把每一组的 $y$ 都擦除了，还可能改动了一些 $z$。\n\n现在 Kri 想请你帮忙还原每一组的 $y$，具体地，对于每一组中的 $x$ 和 $z$，你需要输出最小的正整数 $y$，使得 $z=x\\times y\\times\\gcd(x,y)$。如果这样的 $y$ 不存在，也就是 Zay 一定改动了 $z$，那么请输出 $-1$。\n\n注：$\\gcd(x,y)$ 表示 $x$ 和 $y$ 的最大公约数，也就是最大的正整数 $d$，满足 $d$ 既是 $x$ 的约数，又是 $y$ 的约数。", "inputFormat": "第一行一个整数 ，表示有 $t$ 对正整数 $x$ 和 $z$。\n\n接下来 $t$ 行，每行两个正整数 $x$ 和 $z$，含义见题目描述。", "outputFormat": "对于每对数字输出一行，如果不存在满足条件的正整数 $y$，请输出 $-1$，否则输出满足条件的最小正整数 $y$。", "hint": "**【样例 1 解释】**\n\n$x\\times y\\times \\gcd(x,y)=10\\times 12\\times\\gcd(10,12)=240$。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$t, x, z \\le {10}^3$。\n\n对于 $40\\%$ 的数据，$t \\le {10}^3$，$x \\le {10}^6$，$z \\le {10}^9$。\n\n对于另 $30\\%$ 的数据，$t \\le {10}^4$。\n\n对于另 $20\\%$ 的数据，$x \\le {10}^6$。\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 5 \\times {10}^5$，$1 \\le x \\le {10}^9$，$1 \\le z < 2^{63}$。", "locale": "zh-CN"}}}
{"pid": "P8256", "type": "P", "difficulty": 5, "samples": [["3\n6 2\n10-01-\n01\n7 3\n010-1-1\n101\n6 4\n111-00\n1100", "2\n1\n2"], ["见附件中的 string2.in", "见附件中的 string2.out"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "O2优化", "NOI Online"], "title": "[NOI Online 2022 入门组] 字符串", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@tiger2005。", "description": "Kri 非常喜欢字符串，所以他准备找 $t$ 组字符串研究。\n\n第 $i$ 次研究中，Kri 准备了两个字符串 $S$ 和 $R$ ，其中 $S$ 长度为 $n$，且只由 `0`, `1`, `-` 三种字符构成（注：这里的第三种字符是减号），$R$ 初始时为空。\n\n每次研究，Zay 会带着一个美丽的长度为 $m$ 的字符串 $T$ 来找 Kri 玩，Kri 非常羡慕 Zay 拥有如此美丽的字符串，便也想用字符串 $S$ 和 $R$ 变出字符串 $T$。\n\n具体地，Kri 将会进行 $n$ 次操作。每次操作中，Kri 会取出 $S$ 的第一个字符（记为 $c$），并将其从 $S$ 中删去。如果 $c = \\texttt{-}$，则 Kri 要删去 $R$ 的开头字符或结尾字符（数据保证删去后 $R$ 不为空）。否则，Kri 会将 $c$ 加入到 $R$ 的末尾。\n\n当进行完所有操作后，Kri 会检查 $R$ 是否和 $T$ 相等。如果 $R = T$，Kri 就会感到开心；否则，Kri 会感到难受。\n\n请问在每次研究中，Kri 有多少种操作方式使自己最后感到开心？我们定义两种方案不同，当且仅当在某种方案的某次操作中， Kri 删去了 $R$ 的开头字符。而在另一种方案的这次操作中， Kri 删去了 $R$ 的结尾字符。\n\n由于答案可能很大，你只需要输出答案除以 $1,000,000,007$（即 $10^9+7$）的余数。", "inputFormat": "第一行一个正整数 $t$。\n\n接下来有 $t$ 组数据分别表示 $t$ 次字符串的研究，对于每组数据：\n\n第一行有两个正整数 $n,m$，分别表示字符串 $S,T$ 的长度。\n\n第二行是字符串 $S$。\n\n第三行是字符串 $T$。", "outputFormat": "共 $t$ 行，第 $i$ 行表示第 $i$ 组研究的答案。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，有以下两种方案：\n\n- 第一个 `-` 删 $R$ 的开头，第二个 `-` 删 $R$ 的开头。\n- 第一个 `-` 删 $R$ 的结尾，第二个 `-` 删 $R$ 的开头。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n,m\\le 15$。\n\n对于 $30\\%$ 的数据，$n,m\\le 30$。\n\n对于 $70\\%$ 的数据，$n,m\\le 80$。\n\n对于另 $10\\%$ 的数据，保证答案不超过 $1$。\n\n对于 $100\\%$ 的数据，$1\\le t\\le 5$，$1\\le n,m\\le 400$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online 2022 入门组] 字符串", "background": "**经过管理员的考虑，我们打算将民间数据单独存放在最后一个 Subtask 中。这些测试点分数均为 0 分，但是没有通过其中的任何测试点将会视为此题不通过。**\n\n**这一题中出现了评测记录测试点编号错乱的问题，是民间数据命名方式冲突导致的。但是我们保证其相对顺序没有混乱。**\n\n民间数据提供者：@tiger2005。", "description": "Kri 非常喜欢字符串，所以他准备找 $t$ 组字符串研究。\n\n第 $i$ 次研究中，Kri 准备了两个字符串 $S$ 和 $R$ ，其中 $S$ 长度为 $n$，且只由 `0`, `1`, `-` 三种字符构成（注：这里的第三种字符是减号），$R$ 初始时为空。\n\n每次研究，Zay 会带着一个美丽的长度为 $m$ 的字符串 $T$ 来找 Kri 玩，Kri 非常羡慕 Zay 拥有如此美丽的字符串，便也想用字符串 $S$ 和 $R$ 变出字符串 $T$。\n\n具体地，Kri 将会进行 $n$ 次操作。每次操作中，Kri 会取出 $S$ 的第一个字符（记为 $c$），并将其从 $S$ 中删去。如果 $c = \\texttt{-}$，则 Kri 要删去 $R$ 的开头字符或结尾字符（数据保证删去后 $R$ 不为空）。否则，Kri 会将 $c$ 加入到 $R$ 的末尾。\n\n当进行完所有操作后，Kri 会检查 $R$ 是否和 $T$ 相等。如果 $R = T$，Kri 就会感到开心；否则，Kri 会感到难受。\n\n请问在每次研究中，Kri 有多少种操作方式使自己最后感到开心？我们定义两种方案不同，当且仅当在某种方案的某次操作中， Kri 删去了 $R$ 的开头字符。而在另一种方案的这次操作中， Kri 删去了 $R$ 的结尾字符。\n\n由于答案可能很大，你只需要输出答案除以 $1,000,000,007$（即 $10^9+7$）的余数。", "inputFormat": "第一行一个正整数 $t$。\n\n接下来有 $t$ 组数据分别表示 $t$ 次字符串的研究，对于每组数据：\n\n第一行有两个正整数 $n,m$，分别表示字符串 $S,T$ 的长度。\n\n第二行是字符串 $S$。\n\n第三行是字符串 $T$。", "outputFormat": "共 $t$ 行，第 $i$ 行表示第 $i$ 组研究的答案。", "hint": "**【样例 1 解释】**\n\n对于第一组数据，有以下两种方案：\n\n- 第一个 `-` 删 $R$ 的开头，第二个 `-` 删 $R$ 的开头。\n- 第一个 `-` 删 $R$ 的结尾，第二个 `-` 删 $R$ 的开头。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n,m\\le 15$。\n\n对于 $30\\%$ 的数据，$n,m\\le 30$。\n\n对于 $70\\%$ 的数据，$n,m\\le 80$。\n\n对于另 $10\\%$ 的数据，保证答案不超过 $1$。\n\n对于 $100\\%$ 的数据，$1\\le t\\le 5$，$1\\le n,m\\le 400$。", "locale": "zh-CN"}}}
{"pid": "P8257", "type": "P", "difficulty": 7, "samples": [["5 2\n1 1 1 2 4\n1 5\n3 5\n", "3\n2"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "CTSC/CTS"], "title": "[CTS2022] 普罗霍洛夫卡", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次询问，每次询问给出 $l,r$，查询所有满足 $l\\le L\\le R\\le r$ 的 $(L,R)$ 的权值的按位异或和，二元组 $(L,R)$ 的权值是 $|\\{a_i\\mid L\\le i\\le R\\}|$。", "inputFormat": "从标准输入读入数据。\n\n第一行两个整数 $n\\ m$；\n\n接下来一行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行两个整数 $l\\ r$ 表示一次查询。", "outputFormat": "输出到标准输出。\n\n输出 $m$ 行，依次表示每个询问的答案。", "hint": "对于 $5\\%$ 的数据，满足 $1\\le n,m\\le 100$。\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 5000$。\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $30\\%$ 的数据，满足 $1\\le n,m\\le 2\\times 10^5$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n,m\\le 3\\times 10^5$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 3.5\\times 10^5$。\n\n对于另外 $10\\%$ 的数据，满足 $m=n^2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 4\\times 10^5$，$1\\le a_i\\le n$，所有数值为整数。\n\n每类数据构成子任务。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2022] 普罗霍洛夫卡", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次询问，每次询问给出 $l,r$，查询所有满足 $l\\le L\\le R\\le r$ 的 $(L,R)$ 的权值的按位异或和，二元组 $(L,R)$ 的权值是 $|\\{a_i\\mid L\\le i\\le R\\}|$。", "inputFormat": "从标准输入读入数据。\n\n第一行两个整数 $n\\ m$；\n\n接下来一行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行两个整数 $l\\ r$ 表示一次查询。", "outputFormat": "输出到标准输出。\n\n输出 $m$ 行，依次表示每个询问的答案。", "hint": "对于 $5\\%$ 的数据，满足 $1\\le n,m\\le 100$。\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 5000$。\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $30\\%$ 的数据，满足 $1\\le n,m\\le 2\\times 10^5$。\n\n对于 $40\\%$ 的数据，满足 $1\\le n,m\\le 3\\times 10^5$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 3.5\\times 10^5$。\n\n对于另外 $10\\%$ 的数据，满足 $m=n^2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 2$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=1\\cdots n$，$a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 4\\times 10^5$，$1\\le a_i\\le n$，所有数值为整数。\n\n每类数据构成子任务。", "locale": "zh-CN"}}}
{"pid": "P8258", "type": "P", "difficulty": 7, "samples": [["4\n-1 2 3 4\n1 1 1\n", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "树形 DP", "CTSC/CTS"], "title": "[CTS2022] 独立集问题", "background": "", "description": "小 E 喜欢出最大权独立集问题。\n\n接下来，他还想了 $n$ 道最大权独立集问题。\n\n但是和之前不一样，这回他想把 $n$ 道题整合成一道题出出来。\n\n小 E 有 $n$ 个 AI，编号为 $1\\sim n$ 。\n\n开始第 $i$ 个 AI 里面存有一道小 E 事先出好的一道难度为 $d_i$ 的最大权独立集问题。\n\n有些 AI 之间可以互相通信，对于所有的 $2 \\le i \\le n$ ，第 $i$ 个 AI 可以和第 $c_i$ 个 AI 互相通信。其中 $c_i<i$。所以，这些 AI 连成了一个树的形状。此外，其他对 AI 不可以互相通信。\n\n小 E 每次可以选择一个存有一道最大权独立集问题的 AI，结合它能够直接互相通信的所有 AI 中的问题，变成一道新的最大权独立集问题。整合问题时总有难度损失，不可能是把所有问题的难度直接相加。这道新的最大权独立集问题的难度是那些能够直接互相通信的 AI 中的题目难度和减去原本存在该 AI 上的问题的难度。然后那些能够直接互相通信的 AI 中的问题难度会变成 $0$。\n\n小 E 希望通过若干次操作，把 $n-1$ 个 AI 中的题目难度都变成 $0$，然后把最后一个 AI 中的题目出出来。\n\n由于出题人的丧病心理，小 E 想要出出来的最大权独立集问题的难度尽量大。\n\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在出那道最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $d_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个表示 $c_{i+1}$。", "outputFormat": "一行一个整数表示答案。", "hint": "保证 $1\\le n\\le 351493$。\n\n保证 $1\\le c_i <i$。\n\n保证 $|d_i|\\le 10^9$。\n\n\n\n子任务 1（13 分）：$c_i=i-1$。\n\n子任务 2（6 分）：$d_i>0$。\n\n子任务 3（11 分）：$n\\le 7$。\n\n子任务 4（13 分）：$n\\le 16$。\n\n子任务 5（22 分）：$n\\le 100$。\n\n子任务 6（35 分）：无特殊性质。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2022] 独立集问题", "background": "", "description": "小 E 喜欢出最大权独立集问题。\n\n接下来，他还想了 $n$ 道最大权独立集问题。\n\n但是和之前不一样，这回他想把 $n$ 道题整合成一道题出出来。\n\n小 E 有 $n$ 个 AI，编号为 $1\\sim n$ 。\n\n开始第 $i$ 个 AI 里面存有一道小 E 事先出好的一道难度为 $d_i$ 的最大权独立集问题。\n\n有些 AI 之间可以互相通信，对于所有的 $2 \\le i \\le n$ ，第 $i$ 个 AI 可以和第 $c_i$ 个 AI 互相通信。其中 $c_i<i$。所以，这些 AI 连成了一个树的形状。此外，其他对 AI 不可以互相通信。\n\n小 E 每次可以选择一个存有一道最大权独立集问题的 AI，结合它能够直接互相通信的所有 AI 中的问题，变成一道新的最大权独立集问题。整合问题时总有难度损失，不可能是把所有问题的难度直接相加。这道新的最大权独立集问题的难度是那些能够直接互相通信的 AI 中的题目难度和减去原本存在该 AI 上的问题的难度。然后那些能够直接互相通信的 AI 中的问题难度会变成 $0$。\n\n小 E 希望通过若干次操作，把 $n-1$ 个 AI 中的题目难度都变成 $0$，然后把最后一个 AI 中的题目出出来。\n\n由于出题人的丧病心理，小 E 想要出出来的最大权独立集问题的难度尽量大。\n\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在出那道最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $d_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个表示 $c_{i+1}$。", "outputFormat": "一行一个整数表示答案。", "hint": "保证 $1\\le n\\le 351493$。\n\n保证 $1\\le c_i <i$。\n\n保证 $|d_i|\\le 10^9$。\n\n\n\n子任务 1（13 分）：$c_i=i-1$。\n\n子任务 2（6 分）：$d_i>0$。\n\n子任务 3（11 分）：$n\\le 7$。\n\n子任务 4（13 分）：$n\\le 16$。\n\n子任务 5（22 分）：$n\\le 100$。\n\n子任务 6（35 分）：无特殊性质。\n\n", "locale": "zh-CN"}}}
{"pid": "P8259", "type": "P", "difficulty": 7, "samples": [["5\n1 3 4 5 1\n2 1 4 3 5\n1 2 4 2 2\n2 4 5 3 5\n1 4 4 4 8", "46\n21"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "CTSC/CTS"], "title": "[CTS2022] 回", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 $0$，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $|X-x|<d,|Y-y|<d$ 的整点 $(X,Y)$ 的点权增加 $w\\cdot(d-\\max(|X-x|,|Y-y|))$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "从标准输入读入数据。\n\n第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "输出到标准输出。\n\n对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "对于 $23\\%$ 的数据，满足 $1\\le m\\le 10^3$。\n\n对于 $31\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^4$。\n\n对于 $39\\%$ 的数据，满足 $1\\le m\\le 4\\times 10^4$。\n\n对于 $47\\%$ 的数据，满足 $1\\le m\\le 6\\times 10^4$。\n\n对于 $55\\%$ 的数据，满足 $1\\le m\\le 8\\times 10^4$。\n\n对于另外 $15\\%$ 的数据，满足对任意询问操作，不存在一个修改操作，该修改操作在该询问操作之后。\n\n对于另外 $10\\%$ 的数据，满足 $x_2-x_1\\le 5$，$y_2-y_1\\le 5$，$d\\le 5$。\n\n对于另外 $10\\%$ 的数据，满足 $d\\le 5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。\n\n每类数据构成子任务。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2022] 回", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 $0$，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $|X-x|<d,|Y-y|<d$ 的整点 $(X,Y)$ 的点权增加 $w\\cdot(d-\\max(|X-x|,|Y-y|))$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "从标准输入读入数据。\n\n第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "输出到标准输出。\n\n对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "对于 $23\\%$ 的数据，满足 $1\\le m\\le 10^3$。\n\n对于 $31\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^4$。\n\n对于 $39\\%$ 的数据，满足 $1\\le m\\le 4\\times 10^4$。\n\n对于 $47\\%$ 的数据，满足 $1\\le m\\le 6\\times 10^4$。\n\n对于 $55\\%$ 的数据，满足 $1\\le m\\le 8\\times 10^4$。\n\n对于另外 $15\\%$ 的数据，满足对任意询问操作，不存在一个修改操作，该修改操作在该询问操作之后。\n\n对于另外 $10\\%$ 的数据，满足 $x_2-x_1\\le 5$，$y_2-y_1\\le 5$，$d\\le 5$。\n\n对于另外 $10\\%$ 的数据，满足 $d\\le 5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。\n\n每类数据构成子任务。", "locale": "zh-CN"}}}
{"pid": "P8260", "type": "P", "difficulty": 7, "samples": [["5 4\n1 2 3 3\n3 5\n2 2\n5 2\n2 5\n", "7\n"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2022", "CTSC/CTS"], "title": "[CTS2022] 燃烧的呐球", "background": "**警告：滥用本题卡评测者将被封号。**", "description": "已知 $n$ 个顶点的有根树，以及 $m$ 个二元组 $(x_i,y_i)$，其中 $x_i,y_i$ 是树的顶点。\n\n对于树的顶点 $a,b$，定义 $D(a,b)$ 为：在以 $a$ 为根的子树中，但不在以 $b$ 为根的子树中的顶点个数。\n\n你需要求出以这些二元组为顶点的完全图的最小生成树，其中 $(x_i,y_i)$ 和 $(x_j,y_j)$ 之间的边权是 $D(x_i,x_j)+D(x_j,x_i)+D(y_i,y_j)+D(y_j,y_i)$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n-1$ 个数，其中第 $i$ 个数表示编号为 $i+1$ 的节点的父亲 $f_{i+1}$，保证 $f_{i+1}< i+1$。\n\n之后 $m$ 行，第 $i$ 行两个数 $x_i,y_i$，表示一个给定的二元组。", "outputFormat": "输出一个整数，表示最小生成树的边权和。", "hint": "样例解释：\n\n最小生成树包含边 $(1,4,1),(2,3,3),(2,4,3)$，三元组表示第一个二元组的编号，第二个二元组的编号，边权。边权和为 $7$。\n\n数据范围：\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 1000$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^4$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le m\\le 5\\times 10^4$。\n\n对于另外 $20\\%$ 的数据，满足 $m=n^2$，且每个二元组互不相同。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=2\\cdots n$，$f_i=i-1$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=2\\cdots n$，$f_i=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6,1\\le m\\le 10^5$。对任意 $i=1,2,\\dots n-1$，满足 $1\\le f_{i+1}<i+1$。对任意 $i=1,2,\\dots m$，满足 $1\\le x_i,y_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2022] 燃烧的呐球", "background": "**警告：滥用本题卡评测者将被封号。**", "description": "已知 $n$ 个顶点的有根树，以及 $m$ 个二元组 $(x_i,y_i)$，其中 $x_i,y_i$ 是树的顶点。\n\n对于树的顶点 $a,b$，定义 $D(a,b)$ 为：在以 $a$ 为根的子树中，但不在以 $b$ 为根的子树中的顶点个数。\n\n你需要求出以这些二元组为顶点的完全图的最小生成树，其中 $(x_i,y_i)$ 和 $(x_j,y_j)$ 之间的边权是 $D(x_i,x_j)+D(x_j,x_i)+D(y_i,y_j)+D(y_j,y_i)$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n-1$ 个数，其中第 $i$ 个数表示编号为 $i+1$ 的节点的父亲 $f_{i+1}$，保证 $f_{i+1}< i+1$。\n\n之后 $m$ 行，第 $i$ 行两个数 $x_i,y_i$，表示一个给定的二元组。", "outputFormat": "输出一个整数，表示最小生成树的边权和。", "hint": "样例解释：\n\n最小生成树包含边 $(1,4,1),(2,3,3),(2,4,3)$，三元组表示第一个二元组的编号，第二个二元组的编号，边权。边权和为 $7$。\n\n数据范围：\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 1000$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le m\\le 2\\times 10^4$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le m\\le 5\\times 10^4$。\n\n对于另外 $20\\%$ 的数据，满足 $m=n^2$，且每个二元组互不相同。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=2\\cdots n$，$f_i=i-1$。\n\n对于另外 $10\\%$ 的数据，满足对任意 $i=2\\cdots n$，$f_i=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6,1\\le m\\le 10^5$。对任意 $i=1,2,\\dots n-1$，满足 $1\\le f_{i+1}<i+1$。对任意 $i=1,2,\\dots m$，满足 $1\\le x_i,y_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8261", "type": "P", "difficulty": 7, "samples": [["5 2\n2 -1 1\n0 -3 5\n1 -3 2\n1 3 5\n3 2 2\n1 2 4\n1 -2 -9\n", "2\n9\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "根号分治", "CTSC/CTS"], "title": "[CTS2022] 袜子", "background": "", "description": "给定 $n$ 个点 $(x_i,y_i,c_i)$，$i=1,2,\\dots,n$，共有 $m$ 次查询操作，每次查询给定 $A,B,C$，问满足 $Ax_i+By_i+C<0$，$Ax_j+By_j+C<0$，$c_i=c_j$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来 $n$ 行，每行三个整数 $x_i\\ y_i\\ c_i$，$i=1,2,\\dots,n$；\n\n接下来 $m$ 行，每行三个整数 $A\\ B\\ C$。", "outputFormat": "共 $m$ 行，每行一个整数，表示答案。", "hint": "样例解释：\n\n第一个查询对应 $(2,2)(3,3)$；\n\n第二个查询对应 $(1,1)(2,2)(2,4)(3,3)(3,5)(4,2)(4,4)(5,3)(5,5)$。\n\n数据范围：\n\n对 $5\\%$ 的数据，$n,m\\le 10^3$；\n\n对另外 $10\\%$ 的数据，$c_i\\le 2$；\n\n对另外 $15\\%$ 的数据，$c_i\\le 100$；\n\n对另外 $15\\%$ 的数据，$\\max(|x_i|,|y_i|)=10^6$；\n\n对另外 $15\\%$ 的数据，$|A|=|B|=1$；\n\n对另外 $10\\%$ 的数据，$n\\le 20000,\\;m\\le 200000$；\n\n对于其余数据，无特殊约束。\n\n每部分数据构成子任务，无依赖关系。\n\n所有数据满足：\n\n$1\\le n\\le 50000$；\n\n$1\\le m\\le 500000$；\n\n$A^2+B^2>0$；\n\n$-10^9\\le x_i,y_i,A,B,C\\le 10^9$；\n\n$1\\le c_i\\le n$；\n\n所有数值为整数；\n\n当 $i\\ne j$ 时，$x_i\\ne x_j$ 或 $y_i\\ne y_j$。\n\n对于除了子任务 4 以外的数据，满足 $n$ 个点的 $x,y$ 坐标分别在某个预设的区间内均匀随机选取，并保证没有重复的点，且对于第 $i$ 个点，$c_i$ 和 $x_i,y_i$ 是分别独立地随机选取的，但 $c_i$ 的分布没有特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2022] 袜子", "background": "", "description": "给定 $n$ 个点 $(x_i,y_i,c_i)$，$i=1,2,\\dots,n$，共有 $m$ 次查询操作，每次查询给定 $A,B,C$，问满足 $Ax_i+By_i+C<0$，$Ax_j+By_j+C<0$，$c_i=c_j$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个整数 $n\\ m$；\n\n接下来 $n$ 行，每行三个整数 $x_i\\ y_i\\ c_i$，$i=1,2,\\dots,n$；\n\n接下来 $m$ 行，每行三个整数 $A\\ B\\ C$。", "outputFormat": "共 $m$ 行，每行一个整数，表示答案。", "hint": "样例解释：\n\n第一个查询对应 $(2,2)(3,3)$；\n\n第二个查询对应 $(1,1)(2,2)(2,4)(3,3)(3,5)(4,2)(4,4)(5,3)(5,5)$。\n\n数据范围：\n\n对 $5\\%$ 的数据，$n,m\\le 10^3$；\n\n对另外 $10\\%$ 的数据，$c_i\\le 2$；\n\n对另外 $15\\%$ 的数据，$c_i\\le 100$；\n\n对另外 $15\\%$ 的数据，$\\max(|x_i|,|y_i|)=10^6$；\n\n对另外 $15\\%$ 的数据，$|A|=|B|=1$；\n\n对另外 $10\\%$ 的数据，$n\\le 20000,\\;m\\le 200000$；\n\n对于其余数据，无特殊约束。\n\n每部分数据构成子任务，无依赖关系。\n\n所有数据满足：\n\n$1\\le n\\le 50000$；\n\n$1\\le m\\le 500000$；\n\n$A^2+B^2>0$；\n\n$-10^9\\le x_i,y_i,A,B,C\\le 10^9$；\n\n$1\\le c_i\\le n$；\n\n所有数值为整数；\n\n当 $i\\ne j$ 时，$x_i\\ne x_j$ 或 $y_i\\ne y_j$。\n\n对于除了子任务 4 以外的数据，满足 $n$ 个点的 $x,y$ 坐标分别在某个预设的区间内均匀随机选取，并保证没有重复的点，且对于第 $i$ 个点，$c_i$ 和 $x_i,y_i$ 是分别独立地随机选取的，但 $c_i$ 的分布没有特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8262", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "交互题", "Special Judge", "O2优化", "CTSC/CTS"], "title": "[CTS2022] 隆", "background": "这是一道交互题。\n\n本地测试需 #include <long.h>\n提交时请采用以下模板，而不 include long.h，具体方法就是直接把这个模板放在自己代码里面，然后需要完善题目中要求的函数。\n\n```cpp\nstruct sethash{\n\tint val;\n\tvoid encode();\n\tvoid decode();\n\tvoid operator=(int x);\n};\nstruct infoset{\n\tsethash sum;\n\tint sz;\n\tint size()const{\n\t\treturn sz;\n\t}\n};\nextern const infoset emptyset;\ninfoset merge(const infoset&a,const infoset&b);\nvoid report(infoset p);\nvoid init(int id,int n,int q,vector<int>dad,vector<infoset>ve);\nvoid modify(int x,int y);\nvoid ask(int x,int y);\n```\n***\n\n伟大的科学家欣准备建造强人工智能隆统治世界。在输入一些越南的算法竞赛题作为训练集后，她发现隆自动生成了一个新的问题，并给出了一份解答。同时隆还将测试集中30%的输入数据归约到了这个问题。\n欣连忙将这个问题抄录如下：\n给定一棵有根树，你需要支持两种操作\n\n* 查询树链元素和\n* 将一个点的父亲改成另一个点\n\n“这个问题并不强啊，为什么能解决测试集中30%的问题呢？”欣心里想。\n在关闭训练结果页面前，欣突然发现，隆给出的这个问题中，信息合并的代价并不是 $O(1)$ 的。\n欣陷入了沉思，发现自己并不会这道题。\n为了知道这题有多难，欣将这题放到了您的面前。", "description": "你需要维护一棵以 $1$ 为根的有根树。这棵树有 $n$ 个点。初始时对于所有 $2 \\le i \\le n$，点 $i$ 有个父亲 $p_i$，保证 $p_i \\lt i$。\n\n一开始你有 $n$ 个集合 $\\{1\\},\\{2\\},\\cdots,\\{n\\}  $。对于任意两个集合 $A$ 和 $B$，如果 $A \\cap B=\\empty$，那么你可以通过一次操作，消耗 $|A|+|B|$ 的代价，获得集合 $A \\cup B$。\n\n之后有 $q$ 次操作。每次操作有两种类型\n\n* `0 a b` 记树上 $a$ 到 $b$ 之间的路径上的点构成的点集为 $S$。你需要将 $S$ 表示为 $\\cup_{i=1}^{k}A_i$，需要满足 $A_i$ 是你已经获得的集合，且 $\\forall i \\neq j,A_i \\cap A_j=\\empty$。用 $(A_1,A_2,\\cdots,A_k) $ 回答一次询问的代价为 $k$。\n* `1 a b` 表示将点 $a$ 的父亲改为 $b$，保证 $a \\gt 1$，且修改后这 $n$ 个点仍构成一棵树，但不保证 $a \\gt b$ 。你可以在这次操作中新生成一些集合用以应对之后的询问。\n\n记你整个程序运行过程中消耗的总代价为 $C_1$，单次操作消耗代价最大值为 $C_2$。每个子任务会根据 $C_1,C_2$ 的大小按照一定方式给分。", "inputFormat": "### 实现细节\n\n\n头文件中定义了数据类型 `infoset`，用于存储你获得的集合。\n\n该类型包括成员函数 `size()`，表示集合大小。**头文件还为你提供了表示空集的常量 `emptyset`**。\n\n此外你还可以调用如下函数：\n\n`infoset merge(const infoset&A,const infoset&B);`\n\n* 以一定代价生成一个新集合 $A \\cup B$\n* 注意你可以多次重复生成同一个集合，并且需要多次计入代价\n\n`void report(infoset A);`\n\n* 你仅可以在查询操作过程中调用该函数，表示你需要消耗 $1$ 的代价在最终的并中添加一个集合 $A$\n\n你不需要，也不应该实现主函数。你需要实现如下几个函数：\n\n`void init(int id,int n,int q,vector<int>dad,vector<infoset>ve);`\n\n* 你可以在 $q$ 次操作开始前预处理一些信息\n* 在该函数中消耗的代价不会计入**单次操作消耗代价最大值**，但会计入**整个程序运行过程中消耗的总代价**\n* `id` 表示子任务编号，`n` 表示总点数，`q`表示总操作数\n* `dad` 的大小为  $n-1$，`dad[i]` 表示初始时刻点 $i+2$ 的父亲\n* `ve` 的大小为 $n$，`ve[i]` 表示初始集合 $\\{i+1\\}$\n\n`void modify(int x,int y);`\n\n* 执行一次修改操作，将点 $x$ 的父亲置为点 $y$\n\n`void ask(int x,int y);`\n\n* 执行一次查询操作，询问 $x$ 到 $y$ 的树链信息\n* 你需要调用若干次 `report` 来回答询问，本次询问结束时交互库会检查你汇报的所有集合 $A$ 是否满足条件\n\n评测时，交互库会先调用 `init` 一次，然后调用 `modify` 和 `ask` 总共 $q$ 次。\n\n本题保证树的形态与执行的操作在交互开始之前已经完全确定，不会根据和你的程序的交互过程动态构造，因此题目中的交互操作都是确定性的，你不需要关心这些操作在交互库中的具体实现。\n\n评测时交互库会使用特殊的实现方式，单个 `infoset` 类型的变量会恒定消耗 $8$ 字节内存，请保证你的程序运行过程中没有过多的 `infoset` 类型变量同时存在。\n\n保证在调用次数限制下，交互库运行所需的时间不超过 2s；交互库本身所消耗的内存不超过16MB。", "outputFormat": "### 测试程序方式\n\n下发文件中的 `grader.cpp` 是我们提供的交互库参考实现，最终测试时所用的交互库实现与该参考实现有所不同，因此选手的解法不应该依赖交互库实现。\n\n你需要使用如下命令编译得到可执行程序：\n`g++ grader.cpp long.cpp -o long -static -O2 -std=c++14`\n\n对于编译得到的可执行程序：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行包含一个整数 $id$ ，表示子任务编号\n  - 第二行包含两个整数 $n,q$，表示总点数和总操作数\n  - 第三行包含 $n-1$ 个整数，分别表示第 $2$ 至$n$ 个点的父亲节点编号\n  - 接下来 $q$ 行，每行三个整数 $op,x,y$，描述一次操作。$op=0$ 表示这是一次询问操作，$op=1$ 表示这是一次修改操作\n- 读入完成之后，交互库将调用恰好一次函数 `init` 和 $q$ 次 `modify` 或 `ask` ，用输入的数据测试你的函数。程序正常运行后会输出若干行，每行若干个数表示你对每次询问操作给出的回答；最后一行会包括两个整数 $W_1,W_2$，分别表示你程序运行消耗的总代价和单次操作消耗代价的最大值。\n\n**下发文件中包括四组样例文件，其中第四组样例满足子任务二的特殊性质**。测试样例时请忽略输出文件最后一行的比较情况，因为交互库输出的最后一行为程序运行代价而不是询问操作的查询结果。", "hint": "### 评分方式\n\n**本题首先会受到和传统题相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 $0$ 分等。你只能访问自己定义的和交互库给出的变量及其对应的内存空间，尝试访问其他空间将可能导致编译错误或运行错误。\n\n在上述条件基础上，在一个测试点中，若程序执行了非法的函数调用、没有正常结束运行或询问操作给出了错误回答，该测试点将会获得 $0$ 分。否则，将根据你程序消耗的代价，有两种评分方式：\n\n* 评测方式一：若 $W_1 \\gt 6 \\cdot 10^8$，则该测试点得 $0$ 分；否则该测试点得分为 $\\frac{\\frac{1.5 \\cdot 10^8}{max(W_1,1.5 \\cdot 10^8)} \\cdot 7+3}{10} \\times 该测试点所属子任务分值 $ \n* 评测方式二：若 $W_2 \\gt 2 \\cdot 10^4$，则该测试点得 $0$ 分；否则该测试点得分为 $\\frac{5000}{max(W_2,5000)} \\times 该测试点所属子任务分值$\n\n不同的子任务会使用不同的评测方式。一个子任务的得分为其中所有测试点得分的最小值。\n\n### 限制与约定\n\n保证对于所有测试点均有 $1 \\le n,q \\le 10^5$。\n\n| 子任务编号 | $n,q \\le$ | 特殊性质 | 评测方式 | 分值 |\n| ---------- | --------- | -------- | -------- | ---- |\n| $1$        | $100$     | 无       | 一       | $10$ |\n| $2$        | $10^5$    | 有       | 一       | $20$ |\n| $3$        | $10^5$    | 有       | 二       | $20$ |\n| $4$        | $10^5$    | 无       | 一       | $30$ |\n| $5$        | $10^5$    | 无       | 二       | $20$ |\n\n特殊性质：保证每个时刻除了 $1$ 号节点外每个节点至多只有一个儿子。\n\n### 后记\n\n欣发现您五个小时还是没有做出本题，对隆的能力感到非常满意。然而第二天早上起来后，欣突然发现隆做法的复杂度证明是错的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2022] 隆", "background": "这是一道交互题。\n\n本地测试需 #include <long.h>\n提交时请采用以下模板，而不 include long.h，具体方法就是直接把这个模板放在自己代码里面，然后需要完善题目中要求的函数。\n\n```cpp\nstruct sethash{\n\tint val;\n\tvoid encode();\n\tvoid decode();\n\tvoid operator=(int x);\n};\nstruct infoset{\n\tsethash sum;\n\tint sz;\n\tint size()const{\n\t\treturn sz;\n\t}\n};\nextern const infoset emptyset;\ninfoset merge(const infoset&a,const infoset&b);\nvoid report(infoset p);\nvoid init(int id,int n,int q,vector<int>dad,vector<infoset>ve);\nvoid modify(int x,int y);\nvoid ask(int x,int y);\n```\n***\n\n伟大的科学家欣准备建造强人工智能隆统治世界。在输入一些越南的算法竞赛题作为训练集后，她发现隆自动生成了一个新的问题，并给出了一份解答。同时隆还将测试集中30%的输入数据归约到了这个问题。\n欣连忙将这个问题抄录如下：\n给定一棵有根树，你需要支持两种操作\n\n* 查询树链元素和\n* 将一个点的父亲改成另一个点\n\n“这个问题并不强啊，为什么能解决测试集中30%的问题呢？”欣心里想。\n在关闭训练结果页面前，欣突然发现，隆给出的这个问题中，信息合并的代价并不是 $O(1)$ 的。\n欣陷入了沉思，发现自己并不会这道题。\n为了知道这题有多难，欣将这题放到了您的面前。", "description": "你需要维护一棵以 $1$ 为根的有根树。这棵树有 $n$ 个点。初始时对于所有 $2 \\le i \\le n$，点 $i$ 有个父亲 $p_i$，保证 $p_i \\lt i$。\n\n一开始你有 $n$ 个集合 $\\{1\\},\\{2\\},\\cdots,\\{n\\}  $。对于任意两个集合 $A$ 和 $B$，如果 $A \\cap B=\\empty$，那么你可以通过一次操作，消耗 $|A|+|B|$ 的代价，获得集合 $A \\cup B$。\n\n之后有 $q$ 次操作。每次操作有两种类型\n\n* `0 a b` 记树上 $a$ 到 $b$ 之间的路径上的点构成的点集为 $S$。你需要将 $S$ 表示为 $\\cup_{i=1}^{k}A_i$，需要满足 $A_i$ 是你已经获得的集合，且 $\\forall i \\neq j,A_i \\cap A_j=\\empty$。用 $(A_1,A_2,\\cdots,A_k) $ 回答一次询问的代价为 $k$。\n* `1 a b` 表示将点 $a$ 的父亲改为 $b$，保证 $a \\gt 1$，且修改后这 $n$ 个点仍构成一棵树，但不保证 $a \\gt b$ 。你可以在这次操作中新生成一些集合用以应对之后的询问。\n\n记你整个程序运行过程中消耗的总代价为 $C_1$，单次操作消耗代价最大值为 $C_2$。每个子任务会根据 $C_1,C_2$ 的大小按照一定方式给分。", "inputFormat": "### 实现细节\n\n\n头文件中定义了数据类型 `infoset`，用于存储你获得的集合。\n\n该类型包括成员函数 `size()`，表示集合大小。**头文件还为你提供了表示空集的常量 `emptyset`**。\n\n此外你还可以调用如下函数：\n\n`infoset merge(const infoset&A,const infoset&B);`\n\n* 以一定代价生成一个新集合 $A \\cup B$\n* 注意你可以多次重复生成同一个集合，并且需要多次计入代价\n\n`void report(infoset A);`\n\n* 你仅可以在查询操作过程中调用该函数，表示你需要消耗 $1$ 的代价在最终的并中添加一个集合 $A$\n\n你不需要，也不应该实现主函数。你需要实现如下几个函数：\n\n`void init(int id,int n,int q,vector<int>dad,vector<infoset>ve);`\n\n* 你可以在 $q$ 次操作开始前预处理一些信息\n* 在该函数中消耗的代价不会计入**单次操作消耗代价最大值**，但会计入**整个程序运行过程中消耗的总代价**\n* `id` 表示子任务编号，`n` 表示总点数，`q`表示总操作数\n* `dad` 的大小为  $n-1$，`dad[i]` 表示初始时刻点 $i+2$ 的父亲\n* `ve` 的大小为 $n$，`ve[i]` 表示初始集合 $\\{i+1\\}$\n\n`void modify(int x,int y);`\n\n* 执行一次修改操作，将点 $x$ 的父亲置为点 $y$\n\n`void ask(int x,int y);`\n\n* 执行一次查询操作，询问 $x$ 到 $y$ 的树链信息\n* 你需要调用若干次 `report` 来回答询问，本次询问结束时交互库会检查你汇报的所有集合 $A$ 是否满足条件\n\n评测时，交互库会先调用 `init` 一次，然后调用 `modify` 和 `ask` 总共 $q$ 次。\n\n本题保证树的形态与执行的操作在交互开始之前已经完全确定，不会根据和你的程序的交互过程动态构造，因此题目中的交互操作都是确定性的，你不需要关心这些操作在交互库中的具体实现。\n\n评测时交互库会使用特殊的实现方式，单个 `infoset` 类型的变量会恒定消耗 $8$ 字节内存，请保证你的程序运行过程中没有过多的 `infoset` 类型变量同时存在。\n\n保证在调用次数限制下，交互库运行所需的时间不超过 2s；交互库本身所消耗的内存不超过16MB。", "outputFormat": "### 测试程序方式\n\n下发文件中的 `grader.cpp` 是我们提供的交互库参考实现，最终测试时所用的交互库实现与该参考实现有所不同，因此选手的解法不应该依赖交互库实现。\n\n你需要使用如下命令编译得到可执行程序：\n`g++ grader.cpp long.cpp -o long -static -O2 -std=c++14`\n\n对于编译得到的可执行程序：\n\n- 可执行文件将从标准输入读入以下格式的数据：\n  - 第一行包含一个整数 $id$ ，表示子任务编号\n  - 第二行包含两个整数 $n,q$，表示总点数和总操作数\n  - 第三行包含 $n-1$ 个整数，分别表示第 $2$ 至$n$ 个点的父亲节点编号\n  - 接下来 $q$ 行，每行三个整数 $op,x,y$，描述一次操作。$op=0$ 表示这是一次询问操作，$op=1$ 表示这是一次修改操作\n- 读入完成之后，交互库将调用恰好一次函数 `init` 和 $q$ 次 `modify` 或 `ask` ，用输入的数据测试你的函数。程序正常运行后会输出若干行，每行若干个数表示你对每次询问操作给出的回答；最后一行会包括两个整数 $W_1,W_2$，分别表示你程序运行消耗的总代价和单次操作消耗代价的最大值。\n\n**下发文件中包括四组样例文件，其中第四组样例满足子任务二的特殊性质**。测试样例时请忽略输出文件最后一行的比较情况，因为交互库输出的最后一行为程序运行代价而不是询问操作的查询结果。", "hint": "### 评分方式\n\n**本题首先会受到和传统题相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 $0$ 分等。你只能访问自己定义的和交互库给出的变量及其对应的内存空间，尝试访问其他空间将可能导致编译错误或运行错误。\n\n在上述条件基础上，在一个测试点中，若程序执行了非法的函数调用、没有正常结束运行或询问操作给出了错误回答，该测试点将会获得 $0$ 分。否则，将根据你程序消耗的代价，有两种评分方式：\n\n* 评测方式一：若 $W_1 \\gt 6 \\cdot 10^8$，则该测试点得 $0$ 分；否则该测试点得分为 $\\frac{\\frac{1.5 \\cdot 10^8}{max(W_1,1.5 \\cdot 10^8)} \\cdot 7+3}{10} \\times 该测试点所属子任务分值 $ \n* 评测方式二：若 $W_2 \\gt 2 \\cdot 10^4$，则该测试点得 $0$ 分；否则该测试点得分为 $\\frac{5000}{max(W_2,5000)} \\times 该测试点所属子任务分值$\n\n不同的子任务会使用不同的评测方式。一个子任务的得分为其中所有测试点得分的最小值。\n\n### 限制与约定\n\n保证对于所有测试点均有 $1 \\le n,q \\le 10^5$。\n\n| 子任务编号 | $n,q \\le$ | 特殊性质 | 评测方式 | 分值 |\n| ---------- | --------- | -------- | -------- | ---- |\n| $1$        | $100$     | 无       | 一       | $10$ |\n| $2$        | $10^5$    | 有       | 一       | $20$ |\n| $3$        | $10^5$    | 有       | 二       | $20$ |\n| $4$        | $10^5$    | 无       | 一       | $30$ |\n| $5$        | $10^5$    | 无       | 二       | $20$ |\n\n特殊性质：保证每个时刻除了 $1$ 号节点外每个节点至多只有一个儿子。\n\n### 后记\n\n欣发现您五个小时还是没有做出本题，对隆的能力感到非常满意。然而第二天早上起来后，欣突然发现隆做法的复杂度证明是错的。", "locale": "zh-CN"}}}
{"pid": "P8263", "type": "P", "difficulty": 6, "samples": [["11\n11011100010\n5\n3 2 3\n2 6 8 5\n1 2 5 3\n4 8\n4 100", "10\n-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2020] TEST_8", "background": "", "description": "给出一个长度为 $n$ 的 $01$ 串 $S$（一个由 $0$ 和 $1$ 组成的序列，下标为 $1$ 到 $n$ 的整数）。\n\n支持以下几种操作：\n\n操作1：给出 $l,r,k$，将 $01$ 串下标为 $l$ 到 $r$ 的一段重复 $k$ 次并放回原位；\n\n操作2：给出 $l,r,k$，将 $01$ 串下标为 $l$ 到 $r$ 的一段带翻转地重复 $k$ 次（具体地说，第 $i$（$1\\leq i\\leq k$）次重复时，若 $i-1$ 的二进制表示中有奇数个 $1$，则这次重复时要左右反转，否则不变），最后放回原位；\n\n操作3：给出 $l,r$，将 $01$ 串下标为 $l$ 到 $r$ 的一段删除；\n\n操作4：给出 $k$，求 $01$ 串中从左到右第 $k$ 个 $1$ 的位置，若 $k$ 超过 $01$ 串中 $1$ 的个数，则输出 $-1$。\n\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行，一个长度为 $n$ 的 $01$ 串。\n\n接下来一行，一个整数 $m$。\n\n接下来 $m$ 行，每行第一个整数 $op$ 表示操作类型。\n\n若 $op=1$ 或 $op=2$，这一行接下来有三个整数 $l,r,k$。\n\n若 $op=3$，这一行接下来有两个整数 $l,r$。\n\n若 $op=4$，这一行接下来有一个整数 $k$。", "outputFormat": "对每个操作4，输出一行，表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n保证$1\\leq l\\leq r\\leq $ $01$串在操作前的长度；\n\n在操作 $1,2,4$ 中，$1\\leq k\\leq 10^8$。\n\n对于 $20\\%$ 的数据，$n,m$ 以及 $01$ 串的长度始终不超过 $20$；\n\n对于 $40\\%$ 的数据，只有一次操作4，且没有操作2。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$01$ 串的长度始终不超过 $10^8$；\n\n样例解释：\n\n第1次操作：1[10]11100010->111100010，删除了10、\n\n第2次操作：11110[001]0->11110[001,100,100,001,100]0->111100011001000011000，将001重复了5次，其中第2,3,5次是翻转的、\n\n第3次操作：1[1110]0011001000011000->1[1110,1110,1110]0011001000011000->11110111011100011001000011000，将1110重复了3次、\n\n第4次操作：111101110[1]1100011001000011000，第8个1在01串中的第10个位置、\n\n第5次操作：不存在100个1，输出-1、", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2020] TEST_8", "background": "", "description": "给出一个长度为 $n$ 的 $01$ 串 $S$（一个由 $0$ 和 $1$ 组成的序列，下标为 $1$ 到 $n$ 的整数）。\n\n支持以下几种操作：\n\n操作1：给出 $l,r,k$，将 $01$ 串下标为 $l$ 到 $r$ 的一段重复 $k$ 次并放回原位；\n\n操作2：给出 $l,r,k$，将 $01$ 串下标为 $l$ 到 $r$ 的一段带翻转地重复 $k$ 次（具体地说，第 $i$（$1\\leq i\\leq k$）次重复时，若 $i-1$ 的二进制表示中有奇数个 $1$，则这次重复时要左右反转，否则不变），最后放回原位；\n\n操作3：给出 $l,r$，将 $01$ 串下标为 $l$ 到 $r$ 的一段删除；\n\n操作4：给出 $k$，求 $01$ 串中从左到右第 $k$ 个 $1$ 的位置，若 $k$ 超过 $01$ 串中 $1$ 的个数，则输出 $-1$。\n\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行，一个长度为 $n$ 的 $01$ 串。\n\n接下来一行，一个整数 $m$。\n\n接下来 $m$ 行，每行第一个整数 $op$ 表示操作类型。\n\n若 $op=1$ 或 $op=2$，这一行接下来有三个整数 $l,r,k$。\n\n若 $op=3$，这一行接下来有两个整数 $l,r$。\n\n若 $op=4$，这一行接下来有一个整数 $k$。", "outputFormat": "对每个操作4，输出一行，表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n保证$1\\leq l\\leq r\\leq $ $01$串在操作前的长度；\n\n在操作 $1,2,4$ 中，$1\\leq k\\leq 10^8$。\n\n对于 $20\\%$ 的数据，$n,m$ 以及 $01$ 串的长度始终不超过 $20$；\n\n对于 $40\\%$ 的数据，只有一次操作4，且没有操作2。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$01$ 串的长度始终不超过 $10^8$；\n\n样例解释：\n\n第1次操作：1[10]11100010->111100010，删除了10、\n\n第2次操作：11110[001]0->11110[001,100,100,001,100]0->111100011001000011000，将001重复了5次，其中第2,3,5次是翻转的、\n\n第3次操作：1[1110]0011001000011000->1[1110,1110,1110]0011001000011000->11110111011100011001000011000，将1110重复了3次、\n\n第4次操作：111101110[1]1100011001000011000，第8个1在01串中的第10个位置、\n\n第5次操作：不存在100个1，输出-1、", "locale": "zh-CN"}}}
{"pid": "P8264", "type": "P", "difficulty": 6, "samples": [["5 5\n4 5 2 5 3\n3 5 3\n3 3 0\n5 0 6\n5 0 5\n6 0 4", "1\n4\n4\n5\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2020", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2020] TEST_100", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，每个位置是一个变换 $x=|x-a_i|$，每次查询给出一个区间 $[l,r]$ 和一个值 $v$，依次令 $i$ 从 $l$ 到 $r$ ，访问每个元素 $a_i$，将 $v$ 变为 $|v-a_i|$，求结束后的 $v$ 的值。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个用空格隔开的数表示序列 $a$。\n\n之后 $m$ 行，每行三个用空格隔开的数 $l,r,v$ 表示一次询问。\n\n本题强制在线，所有输入的 $l,r,v$ 均需要异或上次询问的答案，若之前没有询问操作，则为 $0$。", "outputFormat": "对每个询问操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477&ccz181078，Code：nzhtl1477，Data：nzhtl1477&\t\nFutaRimeWoawaSete\n\n样例解释：\n\n第一次询问中，$3$ 依次经过值为 $2,5,3$ 的变化，变为 $1,4,1$，答案为 $1$。\n\n经过解密，第二次询问为区间 $[2,2]$，值为 $1$。\n\n第二次询问中，$1$ 依次经过值为 $5$ 的变化，变为 $4$，答案为 $4$。\n\n经过解密，第三次询问为区间 $[1,4]$，值为 $2$。\n\n第三次询问中，$2$ 依次经过值为 $4,5,2,5$ 的变化，变为 $2,3,1,4$，答案为 $4$。\n\n经过解密，第四次询问为区间 $[1,4]$，值为 $1$。\n\n第四次询问中，$1$ 依次经过值为 $4,5,2,5$ 的变化，变为 $3,2,0,5$，答案为 $5$。\n\n经过解密，第五次询问为区间 $[3,5]$，值为 $1$。\n\n第五次询问中，$1$ 依次经过值为 $2,5,3$ 的变化，变为 $1,4,1$，答案为 $1$。\n\n数据范围：\n\n对于 $100\\%$ 的数据 $1\\le n,m,a_i,v \\le10^5$，$1\\le l,r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2020] TEST_100", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，每个位置是一个变换 $x=|x-a_i|$，每次查询给出一个区间 $[l,r]$ 和一个值 $v$，依次令 $i$ 从 $l$ 到 $r$ ，访问每个元素 $a_i$，将 $v$ 变为 $|v-a_i|$，求结束后的 $v$ 的值。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个用空格隔开的数表示序列 $a$。\n\n之后 $m$ 行，每行三个用空格隔开的数 $l,r,v$ 表示一次询问。\n\n本题强制在线，所有输入的 $l,r,v$ 均需要异或上次询问的答案，若之前没有询问操作，则为 $0$。", "outputFormat": "对每个询问操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477&ccz181078，Code：nzhtl1477，Data：nzhtl1477&\t\nFutaRimeWoawaSete\n\n样例解释：\n\n第一次询问中，$3$ 依次经过值为 $2,5,3$ 的变化，变为 $1,4,1$，答案为 $1$。\n\n经过解密，第二次询问为区间 $[2,2]$，值为 $1$。\n\n第二次询问中，$1$ 依次经过值为 $5$ 的变化，变为 $4$，答案为 $4$。\n\n经过解密，第三次询问为区间 $[1,4]$，值为 $2$。\n\n第三次询问中，$2$ 依次经过值为 $4,5,2,5$ 的变化，变为 $2,3,1,4$，答案为 $4$。\n\n经过解密，第四次询问为区间 $[1,4]$，值为 $1$。\n\n第四次询问中，$1$ 依次经过值为 $4,5,2,5$ 的变化，变为 $3,2,0,5$，答案为 $5$。\n\n经过解密，第五次询问为区间 $[3,5]$，值为 $1$。\n\n第五次询问中，$1$ 依次经过值为 $2,5,3$ 的变化，变为 $1,4,1$，答案为 $1$。\n\n数据范围：\n\n对于 $100\\%$ 的数据 $1\\le n,m,a_i,v \\le10^5$，$1\\le l,r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8265", "type": "P", "difficulty": 7, "samples": [["5 10\n1 4 2 5\n1 1 4 2\n1 2 5 3\n0 4 2 3\n1 4 3 4\n1 1 5 3\n0 1 5 4\n0 5 2 4\n0 1 4 1\n1 5 2 3\n", "1\n5\n2\n7\n7\n6\n7\n2\n1\n7\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2020] TEST_63", "background": "", "description": "给定一棵包含 $n$ 个点的由有根树构成的森林（初始没有边，每个顶点是一棵有根树的根），顶点由 $1$ 到 $n$ 的整数编号表示。\n你需要维护森林的轻重链剖分结构，具体如下：\n\n对每个顶点 $w\\;(1\\le w\\le n)$，记其孩子构成的集合为 $\\mathrm{children}(w)$，对 $w$ 若 $w$ 不是根则记其父亲为 $\\mathrm{father}(w)$；\n\n一个顶点 $w$ 的子树规模 $\\mathrm{size(w)}$ 定义为 $1+\\sum\\limits_{u\\in\\mathrm{children}(w)}\\mathrm{size(u)}$；\n\n一个顶点 $w$ 如果不是叶子（即 $\\mathrm{children}(w)\\ne\\varnothing$），则它的重孩子 $\\mathrm{hc}(w)$ 被定义为 $\\mathrm{arg}\\max_{u\\in\\mathrm{children}(w)}size(u)\\cdot n+\\max(u,\\mathrm{hc}(u),\\mathrm{hc}(\\mathrm{hc}(u)),\\dots)$，即子树规模最大的孩子（若有多个孩子 $u$ 的子树规模相同则取以 $u$ 为根的子树中，$u$ 所在重链中最大的编号最大）；\n\n重链是一个由顶点构成的序列 $w_1,w_2,\\dots,w_k\\;(k>0)$，满足条件：\n\n- $w_1$ 是根或 $w_1\\ne \\mathrm{hc}(\\mathrm{father}(w_1))$\n- $w_i=\\mathrm{hc}(w_{i-1})\\;(2\\le i\\le k)$\n\n对一棵树，每个顶点恰好属于一条重链。\n重链的权值为 $w_1\\oplus w_2\\oplus\\dots\\oplus w_k$，即序列中顶点编号的按位异或和。\n\n需要依次进行 $2m$ 次操作，操作类型如下：\n\n- 加边：给出两个顶点 $a,b$，令 $b$ 成为 $b$ 所在有根树的根（设顶点构成的序列 $t_1,t_2,\\dots,t_l$ 满足 $t_l=b$，且 $t_1$ 为根，$(t_i,t_{i+1}),\\;1\\le i<l$ 是 $b$ 所在有根树上的有向边，将这些边的方向反转为 $(t_{i+1},t_i)$ 即可令 $b$ 成为根），然后加入 $a$ 到 $b$ 的有向边 $(a,b)$，保证操作前 $a,b$ 在不同的有根树上；\n- 删边：给出两个顶点 $a,b$，删除 $a,b$ 间的有向边（可能为 $(a,b)$ 或 $(b,a)$ ），保证这条边之前存在；\n- 查询：给出一个整数 $k$，设当前共有 $N$ 条重链，询问将当前存在的所有重链按权值从小到大排序后，第 $((k-1) \\mod N)+1$ 小的权值。", "inputFormat": "第 $1$ 行有两个整数 `n m` ；\n\n接下来 $m$ 行，每行四个整数 `o a b k` ，若 $o=1$ 则表示先加边 $a,b$，然后查询 $k$，若 $o=0$ 则表示先删边 $a,b$，然后查询 $k$。", "outputFormat": "共 $m$ 行，每行一个整数，依次为每次查询操作的结果。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n本题采用子任务评测。\n\n共 $31$ 个测试点，所有测试点满足 $1\\le n\\le 10^5$，$1\\le m\\le 5\\times 10^5$，$0\\le o\\le 1$，$1\\le a\\le n$，$1\\le b \\le n$，$1\\le k\\le n$，$n,m,o,a,b,k$ 均为整数；\n\n测试点可能具有以下性质：\n\n- 性质1：操作使用以下策略随机生成，重复直到生成了 $m$ 行的操作序列：\n\n- 在 $[1,n]$ 中等概率选取三个整数 $x,y,k$，若 $x,y$ 在不同的有根树上，则生成一行 `1 x y k`，否则若 $x$ 不是根，等概率地生成一行 `0 x father(x) k` 或 `0 father(x) x k` 之一，否则不进行操作。\n\n- 性质2：$m=n-1$，且对 $2\\le i\\le n$，数据的第 $i$ 行为 `1 a i k`，其中 $a$ 在 $[1,i-1]$ 中的整数等概率选取；\n- 性质3：$m=n-1$，且对 $2\\le i\\le n$，数据的第 $i$ 行为 `1 i b k`，其中 $b$ 在 $[1,i-1]$ 中的整数等概率选取；\n- 其它对 $n,m$ 的限制。\n\n每个测试点的性质如下：\n\n第1个测试点，$n=10,\\;m=50$，满足性质1，共10分；\n\n第2个测试点，$n=100,\\;m=500$，满足性质1，共10分；\n\n第3个测试点，$n=1000,\\;m=5000$，满足性质1，共10分；\n\n第4个测试点，满足性质2，共15分；\n\n第5个测试点，满足性质3，共15分；\n\n第6~10个测试点，满足性质1，共20分；\n\n第11~31个测试点没有特殊限制，共20分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2020] TEST_63", "background": "", "description": "给定一棵包含 $n$ 个点的由有根树构成的森林（初始没有边，每个顶点是一棵有根树的根），顶点由 $1$ 到 $n$ 的整数编号表示。\n你需要维护森林的轻重链剖分结构，具体如下：\n\n对每个顶点 $w\\;(1\\le w\\le n)$，记其孩子构成的集合为 $\\mathrm{children}(w)$，对 $w$ 若 $w$ 不是根则记其父亲为 $\\mathrm{father}(w)$；\n\n一个顶点 $w$ 的子树规模 $\\mathrm{size(w)}$ 定义为 $1+\\sum\\limits_{u\\in\\mathrm{children}(w)}\\mathrm{size(u)}$；\n\n一个顶点 $w$ 如果不是叶子（即 $\\mathrm{children}(w)\\ne\\varnothing$），则它的重孩子 $\\mathrm{hc}(w)$ 被定义为 $\\mathrm{arg}\\max_{u\\in\\mathrm{children}(w)}size(u)\\cdot n+\\max(u,\\mathrm{hc}(u),\\mathrm{hc}(\\mathrm{hc}(u)),\\dots)$，即子树规模最大的孩子（若有多个孩子 $u$ 的子树规模相同则取以 $u$ 为根的子树中，$u$ 所在重链中最大的编号最大）；\n\n重链是一个由顶点构成的序列 $w_1,w_2,\\dots,w_k\\;(k>0)$，满足条件：\n\n- $w_1$ 是根或 $w_1\\ne \\mathrm{hc}(\\mathrm{father}(w_1))$\n- $w_i=\\mathrm{hc}(w_{i-1})\\;(2\\le i\\le k)$\n\n对一棵树，每个顶点恰好属于一条重链。\n重链的权值为 $w_1\\oplus w_2\\oplus\\dots\\oplus w_k$，即序列中顶点编号的按位异或和。\n\n需要依次进行 $2m$ 次操作，操作类型如下：\n\n- 加边：给出两个顶点 $a,b$，令 $b$ 成为 $b$ 所在有根树的根（设顶点构成的序列 $t_1,t_2,\\dots,t_l$ 满足 $t_l=b$，且 $t_1$ 为根，$(t_i,t_{i+1}),\\;1\\le i<l$ 是 $b$ 所在有根树上的有向边，将这些边的方向反转为 $(t_{i+1},t_i)$ 即可令 $b$ 成为根），然后加入 $a$ 到 $b$ 的有向边 $(a,b)$，保证操作前 $a,b$ 在不同的有根树上；\n- 删边：给出两个顶点 $a,b$，删除 $a,b$ 间的有向边（可能为 $(a,b)$ 或 $(b,a)$ ），保证这条边之前存在；\n- 查询：给出一个整数 $k$，设当前共有 $N$ 条重链，询问将当前存在的所有重链按权值从小到大排序后，第 $((k-1) \\mod N)+1$ 小的权值。", "inputFormat": "第 $1$ 行有两个整数 `n m` ；\n\n接下来 $m$ 行，每行四个整数 `o a b k` ，若 $o=1$ 则表示先加边 $a,b$，然后查询 $k$，若 $o=0$ 则表示先删边 $a,b$，然后查询 $k$。", "outputFormat": "共 $m$ 行，每行一个整数，依次为每次查询操作的结果。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n本题采用子任务评测。\n\n共 $31$ 个测试点，所有测试点满足 $1\\le n\\le 10^5$，$1\\le m\\le 5\\times 10^5$，$0\\le o\\le 1$，$1\\le a\\le n$，$1\\le b \\le n$，$1\\le k\\le n$，$n,m,o,a,b,k$ 均为整数；\n\n测试点可能具有以下性质：\n\n- 性质1：操作使用以下策略随机生成，重复直到生成了 $m$ 行的操作序列：\n\n- 在 $[1,n]$ 中等概率选取三个整数 $x,y,k$，若 $x,y$ 在不同的有根树上，则生成一行 `1 x y k`，否则若 $x$ 不是根，等概率地生成一行 `0 x father(x) k` 或 `0 father(x) x k` 之一，否则不进行操作。\n\n- 性质2：$m=n-1$，且对 $2\\le i\\le n$，数据的第 $i$ 行为 `1 a i k`，其中 $a$ 在 $[1,i-1]$ 中的整数等概率选取；\n- 性质3：$m=n-1$，且对 $2\\le i\\le n$，数据的第 $i$ 行为 `1 i b k`，其中 $b$ 在 $[1,i-1]$ 中的整数等概率选取；\n- 其它对 $n,m$ 的限制。\n\n每个测试点的性质如下：\n\n第1个测试点，$n=10,\\;m=50$，满足性质1，共10分；\n\n第2个测试点，$n=100,\\;m=500$，满足性质1，共10分；\n\n第3个测试点，$n=1000,\\;m=5000$，满足性质1，共10分；\n\n第4个测试点，满足性质2，共15分；\n\n第5个测试点，满足性质3，共15分；\n\n第6~10个测试点，满足性质1，共20分；\n\n第11~31个测试点没有特殊限制，共20分。", "locale": "zh-CN"}}}
{"pid": "P8266", "type": "P", "difficulty": 4, "samples": [["14\nGGGHGHHGHHHGHG", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2022"], "title": "[USACO22OPEN] Photoshoot B", "background": "", "description": "迫切希望在郡县集市上赢得最佳奶牛摄影师的 Farmer John 正在尝试为他的 $N$ 头奶牛拍摄一张完美的照片（$2 \\leq N \\leq 2\\cdot 10^5$，$N$ 为偶数）。\n\nFarmer John 拥有两种品种的奶牛：更赛牛（Guernsey）和荷斯坦牛（Holstein）。为了使他的照片尽可能地艺术，他想把他的奶牛排成一排，使得尽可能多的更赛牛处于队列中的偶数位置（队列中的第一个位置是奇数位置，下一个是偶数位置，以此类推）。由于他与他的奶牛缺乏有效的沟通，他可以达到目的的唯一方法是让他的奶牛的偶数长的「前缀」进行反转（一个前缀指的是对于某个位置 $j$，从第一头奶牛到第 $j$ 头奶牛范围内的所有奶牛）。\n\n请计算 Farmer John 达到目的所需要的最小反转次数。\n", "inputFormat": "输入的第一行包含 $N$ 的值。\n\n第二行包含一个长为 $N$ 的字符串，给出初始时所有奶牛从左到右的排列方式。每个 'H' 代表一头荷斯坦牛，每个 'G' 代表一头更赛牛。", "outputFormat": "输出一行，包含达到目的所需要的最小反转次数。", "hint": "【样例解释】\n\n在这个例子中，只需反转由前六头奶牛组成的前缀即可。\n```\n   GGGHGHHGHHHGHG （反转前）\n-> HGHGGGHGHHHGHG （反转后）\n```\n在反转之前，四头更赛牛处于偶数位置。反转后，六头更赛牛处于偶数位置。不可能使得超过六头更赛牛处于偶数位置。\n\n【测试点性质】\n\n- 测试点 2-6 满足 $N\\le 1000$。\n- 测试点 7-11 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Photoshoot B", "background": "", "description": "迫切希望在郡县集市上赢得最佳奶牛摄影师的 Farmer John 正在尝试为他的 $N$ 头奶牛拍摄一张完美的照片（$2 \\leq N \\leq 2\\cdot 10^5$，$N$ 为偶数）。\n\nFarmer John 拥有两种品种的奶牛：更赛牛（Guernsey）和荷斯坦牛（Holstein）。为了使他的照片尽可能地艺术，他想把他的奶牛排成一排，使得尽可能多的更赛牛处于队列中的偶数位置（队列中的第一个位置是奇数位置，下一个是偶数位置，以此类推）。由于他与他的奶牛缺乏有效的沟通，他可以达到目的的唯一方法是让他的奶牛的偶数长的「前缀」进行反转（一个前缀指的是对于某个位置 $j$，从第一头奶牛到第 $j$ 头奶牛范围内的所有奶牛）。\n\n请计算 Farmer John 达到目的所需要的最小反转次数。\n", "inputFormat": "输入的第一行包含 $N$ 的值。\n\n第二行包含一个长为 $N$ 的字符串，给出初始时所有奶牛从左到右的排列方式。每个 'H' 代表一头荷斯坦牛，每个 'G' 代表一头更赛牛。", "outputFormat": "输出一行，包含达到目的所需要的最小反转次数。", "hint": "【样例解释】\n\n在这个例子中，只需反转由前六头奶牛组成的前缀即可。\n```\n   GGGHGHHGHHHGHG （反转前）\n-> HGHGGGHGHHHGHG （反转后）\n```\n在反转之前，四头更赛牛处于偶数位置。反转后，六头更赛牛处于偶数位置。不可能使得超过六头更赛牛处于偶数位置。\n\n【测试点性质】\n\n- 测试点 2-6 满足 $N\\le 1000$。\n- 测试点 7-11 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8267", "type": "P", "difficulty": 2, "samples": [["2\nG 3\nL 5", "0"], ["2\nG 3\nL 2", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2022", "排序"], "title": "[USACO22OPEN] Counting Liars B", "background": "", "description": "奶牛 Bessie 躲在数轴上的某处。Farmer John 的 $N$ 头奶牛（$1\\le N\\le 1000$）中的每头奶牛都有一条信息要分享：第 $i$ 头奶牛说 Bessie 躲在小于或等于 $p_i$ 的某个位置，或者说 Bessie 躲在大于或等于 $p_i$ 的某个位置（$0\\le p_i\\le 10^9$）。\n\n不幸的是，可能不存在躲藏位置与所有奶牛的回答均一致，这意味着并非所有奶牛都在说真话。计算在撒谎的奶牛的最小数量。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含字符 L 或 G，之后是一个整数 $p_i$。L 表示第 $i$ 头奶牛说 Bessie 的躲藏位置小于或等于 $p_i$，而 G 表示第 $i$ 头奶牛说 Bessie 的躲藏位置大于或等于 $p_i$。", "outputFormat": "输出在撒谎的奶牛的最小数量。", "hint": "【样例解释 1】\n\n有可能没有奶牛在撒谎。\n\n【样例解释 2】\n\n至少一头奶牛在撒谎。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Counting Liars B", "background": "", "description": "奶牛 Bessie 躲在数轴上的某处。Farmer John 的 $N$ 头奶牛（$1\\le N\\le 1000$）中的每头奶牛都有一条信息要分享：第 $i$ 头奶牛说 Bessie 躲在小于或等于 $p_i$ 的某个位置，或者说 Bessie 躲在大于或等于 $p_i$ 的某个位置（$0\\le p_i\\le 10^9$）。\n\n不幸的是，可能不存在躲藏位置与所有奶牛的回答均一致，这意味着并非所有奶牛都在说真话。计算在撒谎的奶牛的最小数量。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含字符 L 或 G，之后是一个整数 $p_i$。L 表示第 $i$ 头奶牛说 Bessie 的躲藏位置小于或等于 $p_i$，而 G 表示第 $i$ 头奶牛说 Bessie 的躲藏位置大于或等于 $p_i$。", "outputFormat": "输出在撒谎的奶牛的最小数量。", "hint": "【样例解释 1】\n\n有可能没有奶牛在撒谎。\n\n【样例解释 2】\n\n至少一头奶牛在撒谎。", "locale": "zh-CN"}}}
{"pid": "P8268", "type": "P", "difficulty": 3, "samples": [["5\n2 0 0 1 0\n3\n5 2 3 4\n2 1 1\n3 1 2", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "递归", "2022"], "title": "[USACO22OPEN] Alchemy B", "background": "", "description": "总是热衷于培养新的爱好的奶牛 Bessie 正在学习如何转化金属。对于 $1 \\le i \\le N \\le 100$，她有 $a_i$（$0 \\le a_i \\le 10^4$）单位的金属 $i$。此外，她知道 $K$（$1\\le K< N$）个配方，她可以融合若干种金属各一单位，制造一单位编号大于所有被融合金属的金属。另外保证，对于每种金属，Bessie 最多知道一种制造该金属的配方。\n\n计算经过一系列转化后，Bessie 可能拥有的金属 $N$ 的最大单位数。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $a_i$。\n\n第三行包含 $K$。\n\n以下 $K$ 行每行包含两个整数 $L$ 和 $M$（$M\\ge 1$），随后是 $M$ 个整数。后 $M$ 个整数表示配方中用于制造一单位金属 $L$ 所需要被融合的金属。输入保证 $L$ 大于这 $M$ 个数。", "outputFormat": "输出在应用一系列零次或多次转化后，Bessie 可能拥有的金属 $N$ 的最大单位数。", "hint": "【样例解释】\n\n在这个例子中，以下是一种最优的转化方式：\n\n- 将一单位金属 1 转化为金属 2。\n- 将一单位金属 2 转化为金属 3。\n- 将一单位金属 3 和金属 4 转化为金属 5。\n\n现在 Bessie 还有一单位金属 1 和一单位金属 5。她无法再制造更多的金属 5。\n\n【测试点性质】\n\n- 测试点 2 中，对于 $1\\le i< N$，一单位金属 $i$ 可以被转化为一单位金属 $i+1$；\n\n- 测试点 3-4 中，每个配方均将一单位的一种金属转化为另一种金属；\n\n- 测试点 5-11 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Alchemy B", "background": "", "description": "总是热衷于培养新的爱好的奶牛 Bessie 正在学习如何转化金属。对于 $1 \\le i \\le N \\le 100$，她有 $a_i$（$0 \\le a_i \\le 10^4$）单位的金属 $i$。此外，她知道 $K$（$1\\le K< N$）个配方，她可以融合若干种金属各一单位，制造一单位编号大于所有被融合金属的金属。另外保证，对于每种金属，Bessie 最多知道一种制造该金属的配方。\n\n计算经过一系列转化后，Bessie 可能拥有的金属 $N$ 的最大单位数。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $a_i$。\n\n第三行包含 $K$。\n\n以下 $K$ 行每行包含两个整数 $L$ 和 $M$（$M\\ge 1$），随后是 $M$ 个整数。后 $M$ 个整数表示配方中用于制造一单位金属 $L$ 所需要被融合的金属。输入保证 $L$ 大于这 $M$ 个数。", "outputFormat": "输出在应用一系列零次或多次转化后，Bessie 可能拥有的金属 $N$ 的最大单位数。", "hint": "【样例解释】\n\n在这个例子中，以下是一种最优的转化方式：\n\n- 将一单位金属 1 转化为金属 2。\n- 将一单位金属 2 转化为金属 3。\n- 将一单位金属 3 和金属 4 转化为金属 5。\n\n现在 Bessie 还有一单位金属 1 和一单位金属 5。她无法再制造更多的金属 5。\n\n【测试点性质】\n\n- 测试点 2 中，对于 $1\\le i< N$，一单位金属 $i$ 可以被转化为一单位金属 $i+1$；\n\n- 测试点 3-4 中，每个配方均将一单位的一种金属转化为另一种金属；\n\n- 测试点 5-11 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8269", "type": "P", "difficulty": 4, "samples": [["4\n2 10\n3 20\n4 30\n1 40", "90"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "拓扑排序", "连通块", "强连通分量", "基环树"], "title": "[USACO22OPEN] Visits S", "background": "", "description": "Bessie 的 $N$（$2\\le N\\le 10^5$）个奶牛伙伴（编号为 $1\\cdots N$）每一个都拥有自己的农场。对于每个 $1\\le i\\le N$，伙伴 i 想要访问伙伴 $a_i$（$a_i\\neq i$）。\n\n给定 $1\\ldots N$ 的一个排列 $(p_1,p_2,\\ldots, p_N)$，访问按以下方式发生。\n\n对于 $1$ 到 $N$ 的每一个 $i$：\n\n- 如果伙伴 $a_{p_i}$ 已经离开了她的农场，则伙伴 $p_i$ 仍然留在她的农场。\n- 否则，伙伴 $p_i$ 离开她的农场去访问伙伴 $a_{p_i}$ 的农场。这次访问会产生快乐的哞叫 $v_{p_i}$ 次（$0\\le v_{p_i}\\le 10^9$）。\n\n\n对于所有可能的排列 $p$，计算所有访问结束后可能得到的最大哞叫次数。", "inputFormat": "输入的第一行包含 $N$。\n\n对于每一个 $1\\le i\\le N$，第 $i+1$ 行包含两个空格分隔的整数 $a_i$ 和 $v_i$。", "outputFormat": "输出一个整数，为所求的答案。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "hint": "【样例解释】\n\n\n如果 $p=(1,4,3,2)$，则\n\n- 伙伴 $1$ 访问伙伴 $2$ 的农场，产生 $10$ 次哞叫。\n- 伙伴 $4$ 看到伙伴 $1$ 已经离开了农场，所以无事发生。\n- 伙伴 $3$ 访问伙伴 $4$ 的农场，又产生 $30$ 次哞叫。\n- 伙伴 $2$ 看到伙伴 $3$ 已经离开了农场，所以无事发生。\n\n这样总计得到了 $10+30=40$ 次哞叫。\n\n另一方面，如果 $p=(2,3,4,1)$，则\n\n- 伙伴 $2$ 访问伙伴 $3$ 的农场，产生 $20$ 次哞叫。\n- 伙伴 $3$ 访问伙伴 $4$ 的农场，产生 $30$ 次哞叫。\n- 伙伴 $4$ 访问伙伴 $1$ 的农场，产生 $40$ 次哞叫。\n- 伙伴 $1$ 看到伙伴 $2$ 已经离开了农场，所以无事发生。\n\n这样总计得到了 $20+30+40=90$ 次哞叫。可以证明这是所有可能的排列 $p$ 中访问结束后得到的最大可能的哞叫次数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Visits S", "background": "", "description": "Bessie 的 $N$（$2\\le N\\le 10^5$）个奶牛伙伴（编号为 $1\\cdots N$）每一个都拥有自己的农场。对于每个 $1\\le i\\le N$，伙伴 i 想要访问伙伴 $a_i$（$a_i\\neq i$）。\n\n给定 $1\\ldots N$ 的一个排列 $(p_1,p_2,\\ldots, p_N)$，访问按以下方式发生。\n\n对于 $1$ 到 $N$ 的每一个 $i$：\n\n- 如果伙伴 $a_{p_i}$ 已经离开了她的农场，则伙伴 $p_i$ 仍然留在她的农场。\n- 否则，伙伴 $p_i$ 离开她的农场去访问伙伴 $a_{p_i}$ 的农场。这次访问会产生快乐的哞叫 $v_{p_i}$ 次（$0\\le v_{p_i}\\le 10^9$）。\n\n\n对于所有可能的排列 $p$，计算所有访问结束后可能得到的最大哞叫次数。", "inputFormat": "输入的第一行包含 $N$。\n\n对于每一个 $1\\le i\\le N$，第 $i+1$ 行包含两个空格分隔的整数 $a_i$ 和 $v_i$。", "outputFormat": "输出一个整数，为所求的答案。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "hint": "【样例解释】\n\n\n如果 $p=(1,4,3,2)$，则\n\n- 伙伴 $1$ 访问伙伴 $2$ 的农场，产生 $10$ 次哞叫。\n- 伙伴 $4$ 看到伙伴 $1$ 已经离开了农场，所以无事发生。\n- 伙伴 $3$ 访问伙伴 $4$ 的农场，又产生 $30$ 次哞叫。\n- 伙伴 $2$ 看到伙伴 $3$ 已经离开了农场，所以无事发生。\n\n这样总计得到了 $10+30=40$ 次哞叫。\n\n另一方面，如果 $p=(2,3,4,1)$，则\n\n- 伙伴 $2$ 访问伙伴 $3$ 的农场，产生 $20$ 次哞叫。\n- 伙伴 $3$ 访问伙伴 $4$ 的农场，产生 $30$ 次哞叫。\n- 伙伴 $4$ 访问伙伴 $1$ 的农场，产生 $40$ 次哞叫。\n- 伙伴 $1$ 看到伙伴 $2$ 已经离开了农场，所以无事发生。\n\n这样总计得到了 $20+30+40=90$ 次哞叫。可以证明这是所有可能的排列 $p$ 中访问结束后得到的最大可能的哞叫次数。", "locale": "zh-CN"}}}
{"pid": "P8270", "type": "P", "difficulty": 5, "samples": [["aabcd\ncaabd\n4\na\nac\nabd\nabcd", "YNYN"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "枚举", "Ad-hoc"], "title": "[USACO22OPEN] Subset Equality S", "background": "", "description": "奶牛们正在尝试一种相互交换编码信息的新方法，她们在相关的字母中混入不相关的字母，使信息难以解码。\n\n奶牛们传输两个字符串 $s$ 和 $t$，每个字符串的长度不超过 $10^5$，仅由小写字母 'a' 到 'r' 组成。为了尝试理解这条编码消息，你将被给定 $Q$ 个询问（$1 \\leq Q \\leq 10^5$）。\n\n每个询问给定小写字母 'a' 到 'r' 的一个子集。你需要对每个询问判断 $s$ 和 $t$ 在仅包含询问中给定的字母时是否相等。\n", "inputFormat": "输入的第一行包含 $s$。\n\n第二行包含 $t$。\n\n第三行包含 $Q$。\n\n以下 $Q$ 行每行包含一个询问字符串。在一个询问字符串中，所有字母均不相同。此外，所有询问字符串均已排序，且没有一个询问字符串出现超过一次。", "outputFormat": "对每个询问，如果 $s$ 和 $t$ 在仅包含询问中给定的字母时相等则输出 'Y'，否则输出 'N'。", "hint": "【样例解释】\n\n对于第一个询问，当仅包含字符 'a' 时，两个字符串均变为 \"aa\"。\n\n对于第二个询问，第一个字符串变为 \"aac\" 而第二个字符串变为 \"caa\"。\n\n【测试点性质】\n\n- 测试点 2 满足 $|s|,|t|,Q\\le 1000$。\n- 测试点 3-11 没有额外限制。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Subset Equality S", "background": "", "description": "奶牛们正在尝试一种相互交换编码信息的新方法，她们在相关的字母中混入不相关的字母，使信息难以解码。\n\n奶牛们传输两个字符串 $s$ 和 $t$，每个字符串的长度不超过 $10^5$，仅由小写字母 'a' 到 'r' 组成。为了尝试理解这条编码消息，你将被给定 $Q$ 个询问（$1 \\leq Q \\leq 10^5$）。\n\n每个询问给定小写字母 'a' 到 'r' 的一个子集。你需要对每个询问判断 $s$ 和 $t$ 在仅包含询问中给定的字母时是否相等。\n", "inputFormat": "输入的第一行包含 $s$。\n\n第二行包含 $t$。\n\n第三行包含 $Q$。\n\n以下 $Q$ 行每行包含一个询问字符串。在一个询问字符串中，所有字母均不相同。此外，所有询问字符串均已排序，且没有一个询问字符串出现超过一次。", "outputFormat": "对每个询问，如果 $s$ 和 $t$ 在仅包含询问中给定的字母时相等则输出 'Y'，否则输出 'N'。", "hint": "【样例解释】\n\n对于第一个询问，当仅包含字符 'a' 时，两个字符串均变为 \"aa\"。\n\n对于第二个询问，第一个字符串变为 \"aac\" 而第二个字符串变为 \"caa\"。\n\n【测试点性质】\n\n- 测试点 2 满足 $|s|,|t|,Q\\le 1000$。\n- 测试点 3-11 没有额外限制。\n\n", "locale": "zh-CN"}}}
{"pid": "P8271", "type": "P", "difficulty": 4, "samples": [["COW\n6\n1 1\n1 2\n1 3\n2 2\n2 3\n3 3", "YNNNYN"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "前缀和"], "title": "[USACO22OPEN] COW Operations S", "background": "", "description": "Bessie 找到了一个长度不超过 $2 \\cdot 10^5$ 且仅包含字符 'C'，'O' 和 'W' 的字符串 $s$。她想知道是否可以使用以下操作将该字符串变为单个字母 'C'（她最喜欢的字母）：\n\n1. 选择两个相邻相等的字母并将其删除。\n\n2. 选择一个字母，将其替换为另外两个字母的任一排列。\n\n求出这个字符串本身的答案对 Bessie 而言并不足够，所以她想要知道 $s$ 的 $Q$（$1\\le Q\\le 2\\cdot 10^5$）个子串的答案。\n", "inputFormat": "输入的第一行包含 $s$。\n\n第二行包含 $Q$。\n\n以下 $Q$ 行每行包含两个整数 $l$ 和 $r$（$1\\le l\\le r\\le |s|$，其中 $|s|$ 表示 $s$ 的长度）。\n", "outputFormat": "输出一个长为 $Q$ 的字符串，如果第 $i$ 个子串可以被转变则第 $i$ 个字符为 'Y'，否则为 'N'。", "hint": "【样例解释】\n\n第一个询问的答案是「是」，因为 s 的第一个字符已经等于 'C'。\n\n第五个询问的答案是「是」，因为 s 的第二到第三个字符组成的子串 OW 可以通过两步操作变为 'C'：\n\n```\n   OW\n-> CWW\n-> C\n```\n\n这个样例字符串 COW 的其他子串均不能被转变为 'C'。\n\n【测试点性质】\n\n- 测试点 2-4 满足 $|s|\\le 5000$ 以及 $Q\\le 5000$。\n- 测试点 5-11 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] COW Operations S", "background": "", "description": "Bessie 找到了一个长度不超过 $2 \\cdot 10^5$ 且仅包含字符 'C'，'O' 和 'W' 的字符串 $s$。她想知道是否可以使用以下操作将该字符串变为单个字母 'C'（她最喜欢的字母）：\n\n1. 选择两个相邻相等的字母并将其删除。\n\n2. 选择一个字母，将其替换为另外两个字母的任一排列。\n\n求出这个字符串本身的答案对 Bessie 而言并不足够，所以她想要知道 $s$ 的 $Q$（$1\\le Q\\le 2\\cdot 10^5$）个子串的答案。\n", "inputFormat": "输入的第一行包含 $s$。\n\n第二行包含 $Q$。\n\n以下 $Q$ 行每行包含两个整数 $l$ 和 $r$（$1\\le l\\le r\\le |s|$，其中 $|s|$ 表示 $s$ 的长度）。\n", "outputFormat": "输出一个长为 $Q$ 的字符串，如果第 $i$ 个子串可以被转变则第 $i$ 个字符为 'Y'，否则为 'N'。", "hint": "【样例解释】\n\n第一个询问的答案是「是」，因为 s 的第一个字符已经等于 'C'。\n\n第五个询问的答案是「是」，因为 s 的第二到第三个字符组成的子串 OW 可以通过两步操作变为 'C'：\n\n```\n   OW\n-> CWW\n-> C\n```\n\n这个样例字符串 COW 的其他子串均不能被转变为 'C'。\n\n【测试点性质】\n\n- 测试点 2-4 满足 $|s|\\le 5000$ 以及 $Q\\le 5000$。\n- 测试点 5-11 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8272", "type": "P", "difficulty": 5, "samples": [["5\n2 5 10 100\n2 6 0 3\n2 8 10 7\n1 2 4 5\n1 4 7 6", "10"], ["5\n2 5 10 100\n2 6 0 3\n2 8 11 7\n1 2 4 5\n1 4 7 6", "9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2022", "排序"], "title": "[USACO22OPEN] Apple Catching G", "background": "", "description": "天上下苹果了！在某些时刻，一定数量的苹果会落到数轴上。在某些时刻，Farmer John 的一些奶牛将到达数轴并开始接苹果。\n\n如果一个苹果在没有奶牛接住的情况下落到数轴上，它就会永远消失。如果一头奶牛和一个苹果同时到达，奶牛就会接住苹果。每头奶牛每秒可以移动一单位距离。一旦一头奶牛接住了一个苹果，她就会离开数轴。\n\n如果 FJ 的奶牛以最优方式合作，她们总共能接住多少个苹果？", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 2\\cdot 10^5$），为苹果落到数轴上的次数或 FJ 的奶牛出现的次数。\n\n以下 $N$ 行每行包含四个整数 $q_i$，$t_i$，$x_i$ 和 $n_i$（$q_i\\in \\{1,2\\}, 0\\le t_i\\le 10^9, 0\\le x_i\\le 10^9, 1\\le n_i\\le 10^3$）。\n\n- 如果 $q_i=1$，意味着 FJ 的 $n_i$ 头奶牛在 $t_i$ 时刻来到数轴上的 $x_i$ 位置。\n- 如果 $q_i=2$，意味着 $n_i$ 个苹果在 $t_i$ 时刻落到了数轴上的 $x_i$ 位置。\n\n输入保证所有有序对 $(t_i,x_i)$ 各不相同。", "outputFormat": "输出 FJ 的奶牛总计能接住的苹果的最大数量。", "hint": "【样例解释 1】\n\n在这个例子中，在 $t=5$ 时刻落地的 $100$ 个苹果均不能被接住。以下是一种接住 $10$ 个苹果的方式：\n\n- FJ 的所有六头 $t=4$ 时刻到达的奶牛各接一个 $t=8$ 时刻落地的苹果。\n- FJ 的一头 $t=2$ 时刻到达的奶牛接一个 $t=8$ 时刻落地的苹果。\n- 余下三头 $t=2$ 时刻到达的奶牛各接一个 $t=6$ 时刻落地的苹果。\n\n【样例解释 2】\n\n再一次地，在 $t=5$ 时刻落地的苹果均不能被接住。除此之外，在 $t=2$ 时刻到达的奶牛均不能接住 $t=8$ 时刻落地的苹果。以下是一种接住 $9$ 个苹果的方式：\n\n- FJ 的所有六头 $t=4$ 时刻到达的奶牛各接一个 $t=8$ 时刻落地的苹果。\n- 余下三头 $t=2$ 时刻到达的奶牛各接一个 $t=6$ 时刻落地的苹果。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Apple Catching G", "background": "", "description": "天上下苹果了！在某些时刻，一定数量的苹果会落到数轴上。在某些时刻，Farmer John 的一些奶牛将到达数轴并开始接苹果。\n\n如果一个苹果在没有奶牛接住的情况下落到数轴上，它就会永远消失。如果一头奶牛和一个苹果同时到达，奶牛就会接住苹果。每头奶牛每秒可以移动一单位距离。一旦一头奶牛接住了一个苹果，她就会离开数轴。\n\n如果 FJ 的奶牛以最优方式合作，她们总共能接住多少个苹果？", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 2\\cdot 10^5$），为苹果落到数轴上的次数或 FJ 的奶牛出现的次数。\n\n以下 $N$ 行每行包含四个整数 $q_i$，$t_i$，$x_i$ 和 $n_i$（$q_i\\in \\{1,2\\}, 0\\le t_i\\le 10^9, 0\\le x_i\\le 10^9, 1\\le n_i\\le 10^3$）。\n\n- 如果 $q_i=1$，意味着 FJ 的 $n_i$ 头奶牛在 $t_i$ 时刻来到数轴上的 $x_i$ 位置。\n- 如果 $q_i=2$，意味着 $n_i$ 个苹果在 $t_i$ 时刻落到了数轴上的 $x_i$ 位置。\n\n输入保证所有有序对 $(t_i,x_i)$ 各不相同。", "outputFormat": "输出 FJ 的奶牛总计能接住的苹果的最大数量。", "hint": "【样例解释 1】\n\n在这个例子中，在 $t=5$ 时刻落地的 $100$ 个苹果均不能被接住。以下是一种接住 $10$ 个苹果的方式：\n\n- FJ 的所有六头 $t=4$ 时刻到达的奶牛各接一个 $t=8$ 时刻落地的苹果。\n- FJ 的一头 $t=2$ 时刻到达的奶牛接一个 $t=8$ 时刻落地的苹果。\n- 余下三头 $t=2$ 时刻到达的奶牛各接一个 $t=6$ 时刻落地的苹果。\n\n【样例解释 2】\n\n再一次地，在 $t=5$ 时刻落地的苹果均不能被接住。除此之外，在 $t=2$ 时刻到达的奶牛均不能接住 $t=8$ 时刻落地的苹果。以下是一种接住 $9$ 个苹果的方式：\n\n- FJ 的所有六头 $t=4$ 时刻到达的奶牛各接一个 $t=8$ 时刻落地的苹果。\n- 余下三头 $t=2$ 时刻到达的奶牛各接一个 $t=6$ 时刻落地的苹果。", "locale": "zh-CN"}}}
{"pid": "P8273", "type": "P", "difficulty": 5, "samples": [["4\n1\n0\n1\n3\n12+\n+02\n3\n0++\n++9\n4\n5+++\n+6+1", "1\n3\n9\n9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022"], "title": "[USACO22OPEN] Pair Programming G", "background": "由于题目数据问题，在本题中，你**无需考虑**非平凡的（都有 0 或者只差若干个 1 或者仅顺序不同时称为平凡的）、两组不同的数乘积一样的情况，例如 $t\\times2\\times3=t\\times6$；或者，你应当把题面中的 $\\times 2,3,4,5,6,7,8,9$ 分别视为 $\\times 2,3,5,7,11,13,17,19$ 处理。", "description": "一个程序由一系列指令组成，每条指令都具有以下形式之一：\n\n- $\\times d$，其中 $d$ 是一个 $[0,9]$ 范围内的一位数；\n- $+s$，其中 $s$ 是一个表示变量名称的字符串。一个程序中出现的所有的变量名均不相同。\n\n程序执行的结果定义对表达式 $0$ 依次应用每条指令后得到的表达式。例如，执行程序 $[\\times 3,+x,+y,\\times 2,+z]$ 得到的结果是表达式 $(0\\times 3+x+y)\\times 2+z=2 \\times x+2\\times y+z$。不同的程序执行后可能会得到相同的表达式；例如，执行 $[+w,\\times 0,+y,+x,\\times 2,+z,\\times 1]$ 也会得到表达式 $2\\times x+2\\times y+z$。\n\nBessie 和 Elsie 各有一个 $N$（$1\\le N\\le 2000$）条指令的程序。他们将交错这些程序的指令以制造一个 $2N$ 条指令的新程序。注意有 $\\frac{(2N)!}{N!\\times N!}$ 种方法可以做到这一点，但并非所有这样的程序在执行后都会得到不同的表达式。\n\n计算执行 Bessie 和 Elsie 的交错程序可能得到的不同表达式的数量，对 $10^9+7$ 取模。\n\n每个测试用例包含 $T$（$1\\le T\\le 10$）个需要独立求解的子测试用例。输入保证所有子测试用例中的 $N$ 之和不超过 $2000$。", "inputFormat": "输入的第一行包含 $T$，为子测试用例的数量。\n\n每个子测试用例的第一行包含 $N$。\n\n每个子测试用例的第二行包含 Bessie 的程序，用一个长为 $N$ 的字符串表示。每个字符是一个一位数 $d\\in [0,9]$，表示类型 1 的一条指令，或字符 $+$，表示类型 2 的一条指令。\n\n每个子测试用例的第三行包含 Elsie 的程序，格式与 Bessie 的程序相同。\n\n在一个子测试用例中，所有指令内的变量名均不相同。注意在这里没有给出它们的实际名称，这是由于它们并不会影响答案。", "outputFormat": "输出通过执行 Bessie 和 Elsie 的交错程序可能得到的不同表达式的数量，对 $10^9+7$ 取模。", "hint": "【样例解释】\n\n对于第一个子测试用例，两个可以制造的交错程序为 $[\\times 1, \\times 0]$ 和 $[\\times 0,\\times 1]$。它们执行后均会得到表达式 $0$。\n\n对于第二个子测试用例，执行 $[\\times 1,\\times 2, +x]$ 和 $[+y, \\times 0,\\times 2]$ 的交错程序可以得到表达式 $0$，$x$ 和 $2\\times x$ 之一。\n\n【测试点性质】\n\n- 测试点 2 满足 $N\\le 6$。\n- 测试点 3-5 中，所有 $N$ 之和不超过 $100$。\n- 测试点 6-8 中，所有 $N$ 之和不超过 $500$。\n- 测试点 9-16 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Pair Programming G", "background": "由于题目数据问题，在本题中，你**无需考虑**非平凡的（都有 0 或者只差若干个 1 或者仅顺序不同时称为平凡的）、两组不同的数乘积一样的情况，例如 $t\\times2\\times3=t\\times6$；或者，你应当把题面中的 $\\times 2,3,4,5,6,7,8,9$ 分别视为 $\\times 2,3,5,7,11,13,17,19$ 处理。", "description": "一个程序由一系列指令组成，每条指令都具有以下形式之一：\n\n- $\\times d$，其中 $d$ 是一个 $[0,9]$ 范围内的一位数；\n- $+s$，其中 $s$ 是一个表示变量名称的字符串。一个程序中出现的所有的变量名均不相同。\n\n程序执行的结果定义对表达式 $0$ 依次应用每条指令后得到的表达式。例如，执行程序 $[\\times 3,+x,+y,\\times 2,+z]$ 得到的结果是表达式 $(0\\times 3+x+y)\\times 2+z=2 \\times x+2\\times y+z$。不同的程序执行后可能会得到相同的表达式；例如，执行 $[+w,\\times 0,+y,+x,\\times 2,+z,\\times 1]$ 也会得到表达式 $2\\times x+2\\times y+z$。\n\nBessie 和 Elsie 各有一个 $N$（$1\\le N\\le 2000$）条指令的程序。他们将交错这些程序的指令以制造一个 $2N$ 条指令的新程序。注意有 $\\frac{(2N)!}{N!\\times N!}$ 种方法可以做到这一点，但并非所有这样的程序在执行后都会得到不同的表达式。\n\n计算执行 Bessie 和 Elsie 的交错程序可能得到的不同表达式的数量，对 $10^9+7$ 取模。\n\n每个测试用例包含 $T$（$1\\le T\\le 10$）个需要独立求解的子测试用例。输入保证所有子测试用例中的 $N$ 之和不超过 $2000$。", "inputFormat": "输入的第一行包含 $T$，为子测试用例的数量。\n\n每个子测试用例的第一行包含 $N$。\n\n每个子测试用例的第二行包含 Bessie 的程序，用一个长为 $N$ 的字符串表示。每个字符是一个一位数 $d\\in [0,9]$，表示类型 1 的一条指令，或字符 $+$，表示类型 2 的一条指令。\n\n每个子测试用例的第三行包含 Elsie 的程序，格式与 Bessie 的程序相同。\n\n在一个子测试用例中，所有指令内的变量名均不相同。注意在这里没有给出它们的实际名称，这是由于它们并不会影响答案。", "outputFormat": "输出通过执行 Bessie 和 Elsie 的交错程序可能得到的不同表达式的数量，对 $10^9+7$ 取模。", "hint": "【样例解释】\n\n对于第一个子测试用例，两个可以制造的交错程序为 $[\\times 1, \\times 0]$ 和 $[\\times 0,\\times 1]$。它们执行后均会得到表达式 $0$。\n\n对于第二个子测试用例，执行 $[\\times 1,\\times 2, +x]$ 和 $[+y, \\times 0,\\times 2]$ 的交错程序可以得到表达式 $0$，$x$ 和 $2\\times x$ 之一。\n\n【测试点性质】\n\n- 测试点 2 满足 $N\\le 6$。\n- 测试点 3-5 中，所有 $N$ 之和不超过 $100$。\n- 测试点 6-8 中，所有 $N$ 之和不超过 $500$。\n- 测试点 9-16 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8274", "type": "P", "difficulty": 5, "samples": [["3 0\n3\n1 1\n0 100\n1 1\n6 7\n5\n1 2 3 4\n6 6\n1 6\n1 6\n1 6\n5 5\n3\n1 1\n0 10\n0 1\n9 10", "3\n1\n4\n"], ["3 1\n3\n1 1\n0 100\n1 1\n6 7\n5\n1 2 3 4\n6 6\n1 6\n1 6\n1 6\n5 5\n3\n1 1\n0 10\n0 1\n9 10", "3\n3 1 6\n1\n6 5 5 5 5\n4\n5 1 9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "二分", "USACO", "2022", "Special Judge", "构造"], "title": "[USACO22OPEN] Balancing a Tree G", "background": "感谢 @tiger2005 配置 SPJ。", "description": "Farmer John 对不同奶牛品种的进化进行了广泛的研究。所得到的结果形成一棵 $N$（$2\\le N\\le 10^5$）个结点的有根树，编号为 $1\\ldots N$，每个结点对应一个奶牛品种。对于每一个 $i\\in [2,N]$，结点 $i$ 的父结点是结点 $p_i$（$1\\le p_i< i$），意味着品种 $i$ 是由品种 $p_i$ 进化而来的。称结点 $j$ 为结点 $i$ 的祖先，如果 $j=p_i$ 或者 $j$ 是 $p_i$ 的祖先。\n\n树中的结点 $i$ 所关联的品种具有整数 $s_i$ 数量的斑点。定义树的「不平衡度」为所有结点对 $(i,j)$ 中 $|s_i-s_j|$ 的最大值，其中 $j$ 是 $i$ 的祖先。\n\nFarmer John 不知道每个品种的 $s_i$ 的确切数值，但他知道这些值的下界和上界。你的任务是为每个结点分配一个整数值 $s_i \\in [l_i,r_i]$（$0\\le l_i\\le r_i\\le 10^9$），以最小化树的不平衡度。", "inputFormat": "输入的第一行包含 $T$（$1\\le T\\le 10$），为需要独立求解的子测试用例的数量，以及一个整数 $B\\in \\{0,1\\}$。\n\n每个子测试用例的第一行包含 $N$，第二行包含 $N-1$ 个整数 $p_2,p_3,\\ldots,p_N$。\n\n以下 $N$ 行每行包含两个整数 $l_i$ 和 $r_i$。\n\n输入保证所有子测试用例的 $N$ 之和不超过 $10^5$。", "outputFormat": "对每个子测试用例，根据 $B$ 的值输出一行或两行。\n\n每个子测试用例的第一行包含最小不平衡度。\n\n如果 $B=1$，则再输出一行，包含 $N$ 个空格分隔的整数 $s_1,s_2,\\ldots, s_N$，为达到以上不平衡度的一种斑点数量的分配方式。任何合法的分配方式均正确。\n", "hint": "【样例解释 1】\n\n对于第一个子测试用例，最小不平衡度为 $3$。一种达到不平衡度 $3$ 的方式是令 $[s_1,s_2,s_3]=[4,1,7]$。\n\n【样例解释 2】\n\n这个测试用例除了 $B$ 的值之外与第一个测试用例完全相同。另一种达到不平衡度 $3$ 的方式是令 $[s_1,s_2,s_3]=[3,1,6]$。\n\n【数据范围】\n\n- 测试点 3-4 对于所有的 $i$ 满足 $l_i=r_i$。\n- 测试点 5-6 对于所有的 $i$ 满足 $p_i=i-1$。\n- 测试点 7-16 没有额外限制。\n\n在每一部分子任务中，前一半的测试点满足 $B=0$，后一半测试点满足 $B=1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Balancing a Tree G", "background": "感谢 @tiger2005 配置 SPJ。", "description": "Farmer John 对不同奶牛品种的进化进行了广泛的研究。所得到的结果形成一棵 $N$（$2\\le N\\le 10^5$）个结点的有根树，编号为 $1\\ldots N$，每个结点对应一个奶牛品种。对于每一个 $i\\in [2,N]$，结点 $i$ 的父结点是结点 $p_i$（$1\\le p_i< i$），意味着品种 $i$ 是由品种 $p_i$ 进化而来的。称结点 $j$ 为结点 $i$ 的祖先，如果 $j=p_i$ 或者 $j$ 是 $p_i$ 的祖先。\n\n树中的结点 $i$ 所关联的品种具有整数 $s_i$ 数量的斑点。定义树的「不平衡度」为所有结点对 $(i,j)$ 中 $|s_i-s_j|$ 的最大值，其中 $j$ 是 $i$ 的祖先。\n\nFarmer John 不知道每个品种的 $s_i$ 的确切数值，但他知道这些值的下界和上界。你的任务是为每个结点分配一个整数值 $s_i \\in [l_i,r_i]$（$0\\le l_i\\le r_i\\le 10^9$），以最小化树的不平衡度。", "inputFormat": "输入的第一行包含 $T$（$1\\le T\\le 10$），为需要独立求解的子测试用例的数量，以及一个整数 $B\\in \\{0,1\\}$。\n\n每个子测试用例的第一行包含 $N$，第二行包含 $N-1$ 个整数 $p_2,p_3,\\ldots,p_N$。\n\n以下 $N$ 行每行包含两个整数 $l_i$ 和 $r_i$。\n\n输入保证所有子测试用例的 $N$ 之和不超过 $10^5$。", "outputFormat": "对每个子测试用例，根据 $B$ 的值输出一行或两行。\n\n每个子测试用例的第一行包含最小不平衡度。\n\n如果 $B=1$，则再输出一行，包含 $N$ 个空格分隔的整数 $s_1,s_2,\\ldots, s_N$，为达到以上不平衡度的一种斑点数量的分配方式。任何合法的分配方式均正确。\n", "hint": "【样例解释 1】\n\n对于第一个子测试用例，最小不平衡度为 $3$。一种达到不平衡度 $3$ 的方式是令 $[s_1,s_2,s_3]=[4,1,7]$。\n\n【样例解释 2】\n\n这个测试用例除了 $B$ 的值之外与第一个测试用例完全相同。另一种达到不平衡度 $3$ 的方式是令 $[s_1,s_2,s_3]=[3,1,6]$。\n\n【数据范围】\n\n- 测试点 3-4 对于所有的 $i$ 满足 $l_i=r_i$。\n- 测试点 5-6 对于所有的 $i$ 满足 $p_i=i-1$。\n- 测试点 7-16 没有额外限制。\n\n在每一部分子任务中，前一半的测试点满足 $B=0$，后一半测试点满足 $B=1$。\n", "locale": "zh-CN"}}}
{"pid": "P8275", "type": "P", "difficulty": 7, "samples": [["6\n1 3 1 2 1 10", "115"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2022", "区间 DP", "动态规划优化"], "title": "[USACO22OPEN] 262144 Revisited P", "background": "", "description": "Bessie 喜欢在她的手机上下载游戏玩，尽管她确实发现对于她的大蹄子来说使用小触摸屏相当麻烦。\n\n她对目前正在玩的游戏特别着迷。游戏从 $N$ 个 $1\\ldots 10^6$ 范围内的正整数组成的序列 $a_1,a_2,\\ldots,a_N$（$2\\le N\\le 262,144$）开始。在一次行动中，Bessie 可以取两个相邻的数字并将它们替换为一个大于两数最大值的数字（例如，她可以将相邻的一对数 $(5,7)$ 替换为 $8$）。游戏在 $N-1$ 次行动后结束，此时只剩下一个数字。游戏目标是**最小化**这个最终的数字。\n\nBessie 知道这个游戏对你来说太容易了。所以你的任务不仅仅是在 $a$ 上以最优方式玩游戏，而是在 $a$ 的每个连续子段上玩游戏。\n\n输出 $a$ 的所有 $\\frac{N(N+1)}{2}$ 个连续子段的最小最终数字之和。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数，表示输入的序列。", "outputFormat": "输出一行，包含所求的和。", "hint": "共有 $\\frac{6\\cdot 7}{2}=21$ 个连续子段。例如，连续子段 $[1,3,1,2,1]$ 的最小可能的最终数字是 $5$，可以通过以下操作序列达到：\n```\n初始     -> [1,3,1,2,1]\n合并 1&3 -> [4,1,2,1]\n合并 2&1 -> [4,1,3]\n合并 1&3 -> [4,4]\n合并 4&4 -> [5]\n```\n\n以下是每个连续子段的最小可能的最终数字：\n\n```\nfinal(1:1) = 1\nfinal(1:2) = 4\nfinal(1:3) = 5\nfinal(1:4) = 5\nfinal(1:5) = 5\nfinal(1:6) = 11\nfinal(2:2) = 3\nfinal(2:3) = 4\nfinal(2:4) = 4\nfinal(2:5) = 5\nfinal(2:6) = 11\nfinal(3:3) = 1\nfinal(3:4) = 3\nfinal(3:5) = 4\nfinal(3:6) = 11\nfinal(4:4) = 2\nfinal(4:5) = 3\nfinal(4:6) = 11\nfinal(5:5) = 1\nfinal(5:6) = 11\nfinal(6:6) = 10\n```\n\n【测试点性质】\n\n- 测试点 2-3 满足 $N\\le 300$。\n- 测试点 4-5 满足 $N\\le 3000$。\n- 测试点 6-8 中，输入的序列中所有数的值不超过 $40$。\n- 测试点 9-11 中，输入的序列是不下降的。\n- 测试点 12-23 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] 262144 Revisited P", "background": "", "description": "Bessie 喜欢在她的手机上下载游戏玩，尽管她确实发现对于她的大蹄子来说使用小触摸屏相当麻烦。\n\n她对目前正在玩的游戏特别着迷。游戏从 $N$ 个 $1\\ldots 10^6$ 范围内的正整数组成的序列 $a_1,a_2,\\ldots,a_N$（$2\\le N\\le 262,144$）开始。在一次行动中，Bessie 可以取两个相邻的数字并将它们替换为一个大于两数最大值的数字（例如，她可以将相邻的一对数 $(5,7)$ 替换为 $8$）。游戏在 $N-1$ 次行动后结束，此时只剩下一个数字。游戏目标是**最小化**这个最终的数字。\n\nBessie 知道这个游戏对你来说太容易了。所以你的任务不仅仅是在 $a$ 上以最优方式玩游戏，而是在 $a$ 的每个连续子段上玩游戏。\n\n输出 $a$ 的所有 $\\frac{N(N+1)}{2}$ 个连续子段的最小最终数字之和。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数，表示输入的序列。", "outputFormat": "输出一行，包含所求的和。", "hint": "共有 $\\frac{6\\cdot 7}{2}=21$ 个连续子段。例如，连续子段 $[1,3,1,2,1]$ 的最小可能的最终数字是 $5$，可以通过以下操作序列达到：\n```\n初始     -> [1,3,1,2,1]\n合并 1&3 -> [4,1,2,1]\n合并 2&1 -> [4,1,3]\n合并 1&3 -> [4,4]\n合并 4&4 -> [5]\n```\n\n以下是每个连续子段的最小可能的最终数字：\n\n```\nfinal(1:1) = 1\nfinal(1:2) = 4\nfinal(1:3) = 5\nfinal(1:4) = 5\nfinal(1:5) = 5\nfinal(1:6) = 11\nfinal(2:2) = 3\nfinal(2:3) = 4\nfinal(2:4) = 4\nfinal(2:5) = 5\nfinal(2:6) = 11\nfinal(3:3) = 1\nfinal(3:4) = 3\nfinal(3:5) = 4\nfinal(3:6) = 11\nfinal(4:4) = 2\nfinal(4:5) = 3\nfinal(4:6) = 11\nfinal(5:5) = 1\nfinal(5:6) = 11\nfinal(6:6) = 10\n```\n\n【测试点性质】\n\n- 测试点 2-3 满足 $N\\le 300$。\n- 测试点 4-5 满足 $N\\le 3000$。\n- 测试点 6-8 中，输入的序列中所有数的值不超过 $40$。\n- 测试点 9-11 中，输入的序列是不下降的。\n- 测试点 12-23 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P8276", "type": "P", "difficulty": 7, "samples": [["9 10\n1 2\n2 3\n3 4\n4 7\n3 5\n1 6\n6 8\n8 9\n9 6\n7 2\n4\n1 5\n1 2\n1 6\n2 4", "BHHB"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "拓扑排序", "启发式合并"], "title": "[USACO22OPEN] Hoof and Brain P", "background": "", "description": "给定一个包含 $N$ 个结点和 $M$ 条边的有向图（$2 \\leq N \\leq 10^5$, $1 \\leq M \\leq 2 \\cdot 10^5$），Farmer John 的奶牛们喜欢玩以下的双人游戏。\n\n在图中的不同结点上放置两个指示物（可以用一些与奶牛相关的物品代替指示物）。每一回合，一名玩家，脑，选择一个需要沿某一条出边移动的指示物。另一名玩家，蹄，选择沿着哪条出边移动该指示物。两个指示物在任何时刻不允许处于同一个结点上。如果在某些时刻蹄不能做出合法的行动，则脑获胜。如果游戏可以无限进行下去，则蹄获胜。\n\n给定 $Q$ 个询问（$1 \\leq Q \\leq 10^5$），包含两个指示物所在的初始结点。对于每个询问，输出哪名玩家获胜。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n以下 $M$ 行每行包含两个整数 $a$ 和 $b$，表示一条从 $a$ 连向 $b$ 的边。\n\n图中不包含自环或重边。\n\n下一行包含 $Q$。\n\n最后 $Q$ 行每行包含两个整数 $x$ 和 $y$，满足 $1\\le x,y\\le N$ 以及 $x\\neq y$，表示指示物所在的初始结点。\n", "outputFormat": "输出一个长为 $Q$ 的字符串，其中字符 B 表示脑获胜，H 表示蹄获胜。\n\n**注意：本题的时间限制为 4 秒，通常限制的两倍。**", "hint": "【数据范围】\n\n脑可以通过选择结点 $5$ 赢得第一局游戏；此时蹄将没有合法的行动。\n\n脑可以通过选择结点 $4$ 然后选择结点 $7$ 赢得最后一局游戏；此时蹄没有合法的行动。\n\n蹄赢得其他局游戏。\n\n【测试点性质】\n\n- 测试点 2-3 满足 $N\\le 100$，$M\\le 200$。\n- 测试点 4-9 满足 $N\\le 5000$。\n- 测试点 10-21 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Hoof and Brain P", "background": "", "description": "给定一个包含 $N$ 个结点和 $M$ 条边的有向图（$2 \\leq N \\leq 10^5$, $1 \\leq M \\leq 2 \\cdot 10^5$），Farmer John 的奶牛们喜欢玩以下的双人游戏。\n\n在图中的不同结点上放置两个指示物（可以用一些与奶牛相关的物品代替指示物）。每一回合，一名玩家，脑，选择一个需要沿某一条出边移动的指示物。另一名玩家，蹄，选择沿着哪条出边移动该指示物。两个指示物在任何时刻不允许处于同一个结点上。如果在某些时刻蹄不能做出合法的行动，则脑获胜。如果游戏可以无限进行下去，则蹄获胜。\n\n给定 $Q$ 个询问（$1 \\leq Q \\leq 10^5$），包含两个指示物所在的初始结点。对于每个询问，输出哪名玩家获胜。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n以下 $M$ 行每行包含两个整数 $a$ 和 $b$，表示一条从 $a$ 连向 $b$ 的边。\n\n图中不包含自环或重边。\n\n下一行包含 $Q$。\n\n最后 $Q$ 行每行包含两个整数 $x$ 和 $y$，满足 $1\\le x,y\\le N$ 以及 $x\\neq y$，表示指示物所在的初始结点。\n", "outputFormat": "输出一个长为 $Q$ 的字符串，其中字符 B 表示脑获胜，H 表示蹄获胜。\n\n**注意：本题的时间限制为 4 秒，通常限制的两倍。**", "hint": "【数据范围】\n\n脑可以通过选择结点 $5$ 赢得第一局游戏；此时蹄将没有合法的行动。\n\n脑可以通过选择结点 $4$ 然后选择结点 $7$ 赢得最后一局游戏；此时蹄没有合法的行动。\n\n蹄赢得其他局游戏。\n\n【测试点性质】\n\n- 测试点 2-3 满足 $N\\le 100$，$M\\le 200$。\n- 测试点 4-9 满足 $N\\le 5000$。\n- 测试点 10-21 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P8277", "type": "P", "difficulty": 6, "samples": [["5\n1 5 3 4 2\nUDUD", "4"], ["5\n1 5 3 4 2\nUUDD", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "树状数组", "2022", "动态规划优化"], "title": "[USACO22OPEN] Up Down Subsequence P", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$2 \\leq N \\leq 3\\cdot 10^5$），编号为 $1 \\ldots N$，排列成 $1\\ldots N$ 的一个排列 $p_1,p_2,\\ldots,p_N$。另外给定一个长为 $N-1$ 的字符串，由字母 U 和 D 组成。请求出最大的 $K\\le N-1$，使得存在 $p$ 的一个子序列 $a_0,a_1,\\ldots,a_{K}$，满足对于所有 $1\\le j\\le K$，当字符串中第 $j$ 个字母是 U 时 $a_{j - 1} < a_j$，当字符串中的第 $j$ 个字母是 D 时 $a_{j - 1} > a_j$。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $p_1,p_2,\\ldots,p_N$。\n\n最后一行包含给定的字符串。", "outputFormat": "输出 $K$ 的最大可能值。", "hint": "【样例解释 1】\n\n我们可以选择 $[a_0,a_1,a_2,a_3,a_4]=[p_1,p_2,p_3,p_4,p_5]$；整个排列与给定的字符串相一致。\n\n【样例解释 2】\n\n我们可以选择 $[a_0,a_1,a_2,a_3]=[p_1,p_3,p_4,p_5]$。\n\n【测试点性质】\n\n- 测试点 3-4 满足 $N\\le 500$。\n- 测试点 5-8 满足 $N\\le 5000$。\n- 测试点 9-12 中，字符串中的 U 均在 D 之前。\n- 测试点 13-22 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22OPEN] Up Down Subsequence P", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$2 \\leq N \\leq 3\\cdot 10^5$），编号为 $1 \\ldots N$，排列成 $1\\ldots N$ 的一个排列 $p_1,p_2,\\ldots,p_N$。另外给定一个长为 $N-1$ 的字符串，由字母 U 和 D 组成。请求出最大的 $K\\le N-1$，使得存在 $p$ 的一个子序列 $a_0,a_1,\\ldots,a_{K}$，满足对于所有 $1\\le j\\le K$，当字符串中第 $j$ 个字母是 U 时 $a_{j - 1} < a_j$，当字符串中的第 $j$ 个字母是 D 时 $a_{j - 1} > a_j$。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $p_1,p_2,\\ldots,p_N$。\n\n最后一行包含给定的字符串。", "outputFormat": "输出 $K$ 的最大可能值。", "hint": "【样例解释 1】\n\n我们可以选择 $[a_0,a_1,a_2,a_3,a_4]=[p_1,p_2,p_3,p_4,p_5]$；整个排列与给定的字符串相一致。\n\n【样例解释 2】\n\n我们可以选择 $[a_0,a_1,a_2,a_3]=[p_1,p_3,p_4,p_5]$。\n\n【测试点性质】\n\n- 测试点 3-4 满足 $N\\le 500$。\n- 测试点 5-8 满足 $N\\le 5000$。\n- 测试点 9-12 中，字符串中的 U 均在 D 之前。\n- 测试点 13-22 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P8278", "type": "P", "difficulty": 2, "samples": [["2\n5\n10 -1 20 -1 30\n6\n-1 -1 -1 -1 -1 -1", "10 5 5 5 5\n1 1 4 5 1 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "前缀和", "洛谷月赛"], "title": "「MCOI-08」Fill In", "background": "$$\\begin{aligned}\\text{sdjvlajdiofjoiw{\\color{1f1e33}n}eglaj}\\\\\\text{pcji{\\color{1f1e33}2}gweiruitowoeuri}\\\\\\text{cnvak{\\color{1f1e33}5}jflkjweirqoiru}\\\\\\text{rrrwei{\\color{1f1e33}f}dlskfjqfafdfaff}\\\\\\text{nmslfjwiejfijlxkjfq{\\color{1f1e33}b}el}\\\\\\text{mmm{\\color{1f1e33}b}fsfmkdfmksld}\\\\\\text{erjf{\\color{1f1e33}n}kerjkwerjkwjeri}\\\\\\text{sdfafafaf{\\color{1f1e33}r}fxvzxvzvzx}\\end{aligned}$$", "description": "Dream 有一个长度为 $n$（$1\\le n\\le 10^5$）的正整数数组 $a_1,a_2,\\dots,a_n$，其中对于 $i=1,2,\\dots,n$，满足 $1\\le a_i\\le 1000$。\n\n他计算了前缀和数组 $p_i=a_1+a_2+\\dots+a_i$，保证对于 **原前缀和数组** 有任意 $1 \\le i <n$ 都有 $p_i<p_{i+1}$。\n\n现在 Tommy 偷走了这个数组以及将 $p$ 的若干个元素替代为 $-1$。给定当前的 $p$ 数组，请恢复任意一组合法 $a_1,a_2,\\dots,a_n$，可证明一定存在一个数组 $a_i$ 满足要求。", "inputFormat": "本题有多组数据，第一行一个正整数 $t$，为数据组数。接下来 $t$ 组数据，其中对于每一组数据：\n\n第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $p_i$ 代表前缀和序列。", "outputFormat": "对于每一组数据：\n\n一行 $n$ 个整数代表一组满足要求的 $a_i$。\n", "hint": "#### 样例 1 解释\n\n输出的序列 $a_i$ 一定满足要求：\n\n- $p_1=10=a_1$；\n- $p_3=20=a_1+a_2+a_3$；\n- $p_5=30=a_1+a_2+a_3+a_4+a_5$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le 10^5$，并保证存在至少一个合法 $a$ 数组。\n\n - Subtask 1（50 pts）：对于 $i=1,2,\\dots,n$，$p_i\\neq -1$；\n - Subtask 2（30 pts）：保证不存在 $i$ 使得 $p_i=p_{i+1}=-1$；\n - Subtask 3（20 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-08」Fill In", "background": "$$\\begin{aligned}\\text{sdjvlajdiofjoiw{\\color{1f1e33}n}eglaj}\\\\\\text{pcji{\\color{1f1e33}2}gweiruitowoeuri}\\\\\\text{cnvak{\\color{1f1e33}5}jflkjweirqoiru}\\\\\\text{rrrwei{\\color{1f1e33}f}dlskfjqfafdfaff}\\\\\\text{nmslfjwiejfijlxkjfq{\\color{1f1e33}b}el}\\\\\\text{mmm{\\color{1f1e33}b}fsfmkdfmksld}\\\\\\text{erjf{\\color{1f1e33}n}kerjkwerjkwjeri}\\\\\\text{sdfafafaf{\\color{1f1e33}r}fxvzxvzvzx}\\end{aligned}$$", "description": "Dream 有一个长度为 $n$（$1\\le n\\le 10^5$）的正整数数组 $a_1,a_2,\\dots,a_n$，其中对于 $i=1,2,\\dots,n$，满足 $1\\le a_i\\le 1000$。\n\n他计算了前缀和数组 $p_i=a_1+a_2+\\dots+a_i$，保证对于 **原前缀和数组** 有任意 $1 \\le i <n$ 都有 $p_i<p_{i+1}$。\n\n现在 Tommy 偷走了这个数组以及将 $p$ 的若干个元素替代为 $-1$。给定当前的 $p$ 数组，请恢复任意一组合法 $a_1,a_2,\\dots,a_n$，可证明一定存在一个数组 $a_i$ 满足要求。", "inputFormat": "本题有多组数据，第一行一个正整数 $t$，为数据组数。接下来 $t$ 组数据，其中对于每一组数据：\n\n第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $p_i$ 代表前缀和序列。", "outputFormat": "对于每一组数据：\n\n一行 $n$ 个整数代表一组满足要求的 $a_i$。\n", "hint": "#### 样例 1 解释\n\n输出的序列 $a_i$ 一定满足要求：\n\n- $p_1=10=a_1$；\n- $p_3=20=a_1+a_2+a_3$；\n- $p_5=30=a_1+a_2+a_3+a_4+a_5$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le 10^5$，并保证存在至少一个合法 $a$ 数组。\n\n - Subtask 1（50 pts）：对于 $i=1,2,\\dots,n$，$p_i\\neq -1$；\n - Subtask 2（30 pts）：保证不存在 $i$ 使得 $p_i=p_{i+1}=-1$；\n - Subtask 3（20 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8279", "type": "P", "difficulty": 4, "samples": [["1\n4\n-1 34 367 -1\n3178 -1 -1 3333", "3 33 333 3333"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "位运算", "构造", "洛谷月赛"], "title": "「MCOI-08」Fill In REMATCH", "background": "", "description": "Dream 有一个长度为 $n$（$1\\le n\\le 10^5$）的整数数组 $a_1,a_2,\\dots,a_n$，其中对于 $i=1,2,\\dots,n$，满足 $0\\le a_i<2^{60}$。\n\n他计算了前缀异或数组 $p_i=a_1\\oplus a_2\\oplus\\dots\\oplus a_i$ 以及后缀异或数组 $s_i=a_i\\oplus a_{i+1}\\oplus\\dots\\oplus a_n$。\n\n现在 Tommy **一共**将 $p$ 和 $s$ 的 $n$ 个元素换成 $-1$。给定当前的 $p$ 与 $s$ 数组，请恢复任意一组可能为原数组的 $a_1,a_2,\\dots,a_n$。\n\n保证存在一组合法解。", "inputFormat": "本题有多组数据，第一行一个正整数 $t$，为数据组数。接下来 $t$ 组数据，其中对于每一组数据：\n\n第一行一个正整数 $n$（$1\\le n\\le 10^5$）。 \n\n接下来 $n$ 个整数 $p_1,p_2,\\dots,p_n$。  \n\n接下来 $n$ 个整数 $s_1,s_2,\\dots,s_n$。  ", "outputFormat": "对于每一组数据：\n\n输出 $n$ 个非负整数 $a_1,a_2,\\dots,a_n$，满足以上条件。", "hint": "对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le 10^5$，$\\sum [p_i=-1]+\\sum [s_i=-1]=n$，**保证有合法解。**\n\n - Subtask 1（10 pts）：$n\\le 4$，$p_i,s_i<2$；\n - Subtask 2（10 pts）：$n\\le 100$；\n - Subtask 3（20 pts）：$p_i,s_i<2$；\n - Subtask 4（60 pts）：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-08」Fill In REMATCH", "background": "", "description": "Dream 有一个长度为 $n$（$1\\le n\\le 10^5$）的整数数组 $a_1,a_2,\\dots,a_n$，其中对于 $i=1,2,\\dots,n$，满足 $0\\le a_i<2^{60}$。\n\n他计算了前缀异或数组 $p_i=a_1\\oplus a_2\\oplus\\dots\\oplus a_i$ 以及后缀异或数组 $s_i=a_i\\oplus a_{i+1}\\oplus\\dots\\oplus a_n$。\n\n现在 Tommy **一共**将 $p$ 和 $s$ 的 $n$ 个元素换成 $-1$。给定当前的 $p$ 与 $s$ 数组，请恢复任意一组可能为原数组的 $a_1,a_2,\\dots,a_n$。\n\n保证存在一组合法解。", "inputFormat": "本题有多组数据，第一行一个正整数 $t$，为数据组数。接下来 $t$ 组数据，其中对于每一组数据：\n\n第一行一个正整数 $n$（$1\\le n\\le 10^5$）。 \n\n接下来 $n$ 个整数 $p_1,p_2,\\dots,p_n$。  \n\n接下来 $n$ 个整数 $s_1,s_2,\\dots,s_n$。  ", "outputFormat": "对于每一组数据：\n\n输出 $n$ 个非负整数 $a_1,a_2,\\dots,a_n$，满足以上条件。", "hint": "对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le 10^5$，$\\sum [p_i=-1]+\\sum [s_i=-1]=n$，**保证有合法解。**\n\n - Subtask 1（10 pts）：$n\\le 4$，$p_i,s_i<2$；\n - Subtask 2（10 pts）：$n\\le 100$；\n - Subtask 3（20 pts）：$p_i,s_i<2$；\n - Subtask 4（60 pts）：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P8280", "type": "P", "difficulty": 5, "samples": [["2\n5 2\n1 2\n2 1\n1 2 1 4\n5 2\n1 2\n1 1\n1 2 1 4", "4\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "树形 DP", "洛谷月赛", "状压 DP"], "title": "「MCOI-08」Photoelectric Effect", "background": "", "description": "有一棵 $n$（$1\\le n\\le 10^5$）个点的树以及 $k$（$2\\le k\\le 5$）个颜色，根节点为 $1$。同时，给定一个颜色合并函数 $a\\otimes b$，满足当 $1\\le a,b\\le k$，有 $1\\le a\\otimes b\\le k$。\n\n请问有多少个方案对所有点染色，使得当点对 $u,v$ 之间没有祖先关系，有：\n\n - $u$ 和 $v$ 最近公共祖先的颜色为点 $u$ 的颜色和点 $v$ 的颜色之并。\n\n答案对 $10^9+7$ 取模。\n", "inputFormat": "本题有多组数据，第一行一个正整数 $t$（$1\\le t\\le 10^3$），为数据组数。接下来 $t$ 组数据，其中对于每一组数据：\n\n第一行两个正整数 $n,k$。  \n\n接下来 $k$ 行，每行 $k$ 个正整数。第 $i$ 行第 $j$ 个数为 $i\\otimes j$ 的值。\n\n接下来 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，其中 $f_i$ 是 $i$ 的父亲节点。", "outputFormat": "对于每一组数据：\n\n输出一个整数，表示答案。", "hint": "#### 样例 1 解释\n\n树的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twht22a6.png)\n\n设 $w_i$ 为第 $i$ 个点的点权，则有如下 $4$ 种分配方式：\n\n- $w_i=\\{1,1,1,1,1\\}$；\n- $w_i=\\{2,2,2,1,1\\}$；\n- $w_i=\\{2,1,1,2,2\\}$；\n- $w_i=\\{1,2,2,2,2\\}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le10^5$，$2\\le k\\le 5$，$1\\le f_i<i$。\n\n对于 $100\\%$ 的数据，$1\\le t\\le 1000$。\n\n - Subtask 1（5 pts）：$n\\le5$；\n - Subtask 2（11 pts）：树上任何节点孩子个数至多为 $2$；\n - Subtask 3（23 pts）：树上任何节点孩子个数至多为 $3$；\n - Subtask 4（13 pts）：$k=2$；\n - Subtask 5（17 pts）：$k\\le3$； \n - Subtask 6（31 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-08」Photoelectric Effect", "background": "", "description": "有一棵 $n$（$1\\le n\\le 10^5$）个点的树以及 $k$（$2\\le k\\le 5$）个颜色，根节点为 $1$。同时，给定一个颜色合并函数 $a\\otimes b$，满足当 $1\\le a,b\\le k$，有 $1\\le a\\otimes b\\le k$。\n\n请问有多少个方案对所有点染色，使得当点对 $u,v$ 之间没有祖先关系，有：\n\n - $u$ 和 $v$ 最近公共祖先的颜色为点 $u$ 的颜色和点 $v$ 的颜色之并。\n\n答案对 $10^9+7$ 取模。\n", "inputFormat": "本题有多组数据，第一行一个正整数 $t$（$1\\le t\\le 10^3$），为数据组数。接下来 $t$ 组数据，其中对于每一组数据：\n\n第一行两个正整数 $n,k$。  \n\n接下来 $k$ 行，每行 $k$ 个正整数。第 $i$ 行第 $j$ 个数为 $i\\otimes j$ 的值。\n\n接下来 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，其中 $f_i$ 是 $i$ 的父亲节点。", "outputFormat": "对于每一组数据：\n\n输出一个整数，表示答案。", "hint": "#### 样例 1 解释\n\n树的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twht22a6.png)\n\n设 $w_i$ 为第 $i$ 个点的点权，则有如下 $4$ 种分配方式：\n\n- $w_i=\\{1,1,1,1,1\\}$；\n- $w_i=\\{2,2,2,1,1\\}$；\n- $w_i=\\{2,1,1,2,2\\}$；\n- $w_i=\\{1,2,2,2,2\\}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n,\\sum n\\le10^5$，$2\\le k\\le 5$，$1\\le f_i<i$。\n\n对于 $100\\%$ 的数据，$1\\le t\\le 1000$。\n\n - Subtask 1（5 pts）：$n\\le5$；\n - Subtask 2（11 pts）：树上任何节点孩子个数至多为 $2$；\n - Subtask 3（23 pts）：树上任何节点孩子个数至多为 $3$；\n - Subtask 4（13 pts）：$k=2$；\n - Subtask 5（17 pts）：$k\\le3$； \n - Subtask 6（31 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8281", "type": "P", "difficulty": 7, "samples": [["3 3\n1 2\n2 3\n3 1", "1 2 3"], ["4 6\n1 3\n1 4\n2 1\n2 3\n3 4\n4 2", "1 3 4 2"], ["5 8\n1 2\n2 3\n3 4\n4 1\n2 5\n4 5\n5 1\n5 3", "1 2 3 4 5\n1 2 5 3 4"], ["5 10\n1 2\n1 3\n2 3\n2 4\n3 4\n3 5\n4 1\n4 5\n5 1\n5 2", "1 2 3 4 5\n1 3 5 2 4"], ["6 15\n1 3\n1 4\n1 5\n2 1\n2 3\n2 4\n3 1\n3 4\n4 2\n4 6\n5 2\n5 3\n6 1\n6 2\n6 3", "1 5 2 3 4 6\n1 5 2 4 6 3\n1 5 3 4 6 2"], ["6 15\n1 3\n1 5\n2 1\n2 4\n3 1\n3 2\n3 4\n3 5\n3 6\n4 6\n5 1\n5 4\n5 6\n6 3\n6 5", "1 3 2 4 6 5\n1 5 4 6 3 2"], ["6 16\n1 3\n1 6\n2 3\n2 4\n2 6\n3 1\n3 6\n4 2\n4 3\n4 5\n4 6\n5 2\n5 6\n6 1\n6 3\n6 5", "1 6 5 2 4 3"], ["6 21\n1 2\n1 5\n1 6\n2 1\n2 3\n2 4\n2 5\n3 1\n3 2\n3 4\n3 6\n4 1\n4 2\n4 6\n5 1\n5 2\n5 4\n5 6\n6 2\n6 3\n6 4", "1 2 5 4 6 3\n1 2 5 6 3 4\n1 5 2 3 6 4\n1 5 2 4 6 3\n1 5 4 6 2 3\n1 5 4 6 3 2\n1 5 6 2 3 4\n1 5 6 3 2 4\n1 5 6 3 4 2\n1 5 6 4 2 3\n1 6 3 2 5 4\n1 6 3 4 2 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "洛谷原创", "O2优化", "剪枝", "洛谷月赛"], "title": "「MCOI-08」Fast Enumeration", "background": "", "description": "Technoblade 将 Skyblock 抽象为一张 $n$（$n\\le 50$）节点 $m$ 条边的简单有向图。他需要求出该图 **所有** 哈密尔顿回路，即所有排列 $p_1,p_2,\\dots,p_n$ 使得 $p_1=1$ 并且 $p_1\\to p_2\\to \\dots\\to p_{n-1}\\to p_n\\to p_1$ 为一个合法路径。\n\n**数据保证哈密尔顿回路数量非零并小于 $10^4$**。\n\n**数据从所有合法数据随机采样。**", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$。", "outputFormat": "输出若干行；每行输出 $n$ 个正整数，为一个哈密尔顿回路。按照递增字典序输出。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lth4lrb1.png)\n\n有 $1$ 个哈密尔顿回路：\n\n - $1\\to2\\to3\\to1$。\n\n#### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/if0vz8gm.png)\n\n有 $1$ 个哈密尔顿回路：\n\n - $1\\to3\\to4\\to2\\to1$。\n\n#### 样例 3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dv1tul62.png)\n\n有 $2$ 个哈密尔顿回路：\n\n - $1\\to2\\to3\\to4\\to5\\to1$；\n - $1\\to2\\to5\\to3\\to4\\to1$。\n\n#### 样例 4 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wggv2mfd.png)\n\n有 $2$ 个哈密尔顿回路：\n\n - $1\\to2\\to3\\to4\\to5\\to1$；\n - $1\\to3\\to5\\to2\\to4\\to1$。\n\n#### 样例 5 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfi80wob.png)\n\n有 $3$ 个哈密尔顿回路：\n\n - $1\\to5\\to2\\to3\\to4\\to6\\to1$；\n - $1\\to5\\to2\\to4\\to6\\to3\\to1$；\n - $1\\to5\\to3\\to4\\to6\\to2\\to1$。\n\n#### 样例 6 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqd9tpl8.png)\n\n有 $2$ 个哈密尔顿回路：\n\n - $1\\to3\\to2\\to4\\to6\\to5\\to1$；\n - $1\\to5\\to4\\to6\\to3\\to2\\to1$。\n\n#### 样例 7 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jff0k373.png)\n\n有 $1$ 个哈密尔顿回路：\n\n - $1\\to6\\to5\\to2\\to4\\to3\\to1$。\n\n#### 样例 8 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2j19zoc.png)\n\n有 $12$ 个哈密尔顿回路：\n\n - $1\\to2\\to5\\to4\\to6\\to3\\to1$；\n - $1\\to2\\to5\\to6\\to3\\to4\\to1$；\n - $1\\to5\\to2\\to3\\to6\\to4\\to1$；\n - $1\\to5\\to2\\to4\\to6\\to3\\to1$；\n - $1\\to5\\to4\\to6\\to2\\to3\\to1$；\n - $1\\to5\\to4\\to6\\to3\\to2\\to1$；\n - $1\\to5\\to6\\to2\\to3\\to4\\to1$；\n - $1\\to5\\to6\\to3\\to2\\to4\\to1$；\n - $1\\to5\\to6\\to3\\to4\\to2\\to1$；\n - $1\\to5\\to6\\to4\\to2\\to3\\to1$；\n - $1\\to6\\to3\\to2\\to5\\to4\\to1$；\n - $1\\to6\\to3\\to4\\to2\\to5\\to1$。\n\n#### 数据规模与约定\n\n对于固定 $n$ 和 $P$，任意一张 $m$ 条边的图权重为 $\\left(\\frac{1}{P}\\right)^m\\left(\\frac{P-1}{P}\\right)^{n^2-n-m}$。\n\n - Subtask 1（1 pts）：为样例。\n - Subtask 2（16 pts）：$n=15$。\n - Subtask 3（20 pts）：$n=30$。\n - Subtask 4（26 pts）：$n=40$。\n - Subtask 5（37 pts）：$n=50$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-08」Fast Enumeration", "background": "", "description": "Technoblade 将 Skyblock 抽象为一张 $n$（$n\\le 50$）节点 $m$ 条边的简单有向图。他需要求出该图 **所有** 哈密尔顿回路，即所有排列 $p_1,p_2,\\dots,p_n$ 使得 $p_1=1$ 并且 $p_1\\to p_2\\to \\dots\\to p_{n-1}\\to p_n\\to p_1$ 为一个合法路径。\n\n**数据保证哈密尔顿回路数量非零并小于 $10^4$**。\n\n**数据从所有合法数据随机采样。**", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数 $u,v$。", "outputFormat": "输出若干行；每行输出 $n$ 个正整数，为一个哈密尔顿回路。按照递增字典序输出。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lth4lrb1.png)\n\n有 $1$ 个哈密尔顿回路：\n\n - $1\\to2\\to3\\to1$。\n\n#### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/if0vz8gm.png)\n\n有 $1$ 个哈密尔顿回路：\n\n - $1\\to3\\to4\\to2\\to1$。\n\n#### 样例 3 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dv1tul62.png)\n\n有 $2$ 个哈密尔顿回路：\n\n - $1\\to2\\to3\\to4\\to5\\to1$；\n - $1\\to2\\to5\\to3\\to4\\to1$。\n\n#### 样例 4 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wggv2mfd.png)\n\n有 $2$ 个哈密尔顿回路：\n\n - $1\\to2\\to3\\to4\\to5\\to1$；\n - $1\\to3\\to5\\to2\\to4\\to1$。\n\n#### 样例 5 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfi80wob.png)\n\n有 $3$ 个哈密尔顿回路：\n\n - $1\\to5\\to2\\to3\\to4\\to6\\to1$；\n - $1\\to5\\to2\\to4\\to6\\to3\\to1$；\n - $1\\to5\\to3\\to4\\to6\\to2\\to1$。\n\n#### 样例 6 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqd9tpl8.png)\n\n有 $2$ 个哈密尔顿回路：\n\n - $1\\to3\\to2\\to4\\to6\\to5\\to1$；\n - $1\\to5\\to4\\to6\\to3\\to2\\to1$。\n\n#### 样例 7 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jff0k373.png)\n\n有 $1$ 个哈密尔顿回路：\n\n - $1\\to6\\to5\\to2\\to4\\to3\\to1$。\n\n#### 样例 8 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2j19zoc.png)\n\n有 $12$ 个哈密尔顿回路：\n\n - $1\\to2\\to5\\to4\\to6\\to3\\to1$；\n - $1\\to2\\to5\\to6\\to3\\to4\\to1$；\n - $1\\to5\\to2\\to3\\to6\\to4\\to1$；\n - $1\\to5\\to2\\to4\\to6\\to3\\to1$；\n - $1\\to5\\to4\\to6\\to2\\to3\\to1$；\n - $1\\to5\\to4\\to6\\to3\\to2\\to1$；\n - $1\\to5\\to6\\to2\\to3\\to4\\to1$；\n - $1\\to5\\to6\\to3\\to2\\to4\\to1$；\n - $1\\to5\\to6\\to3\\to4\\to2\\to1$；\n - $1\\to5\\to6\\to4\\to2\\to3\\to1$；\n - $1\\to6\\to3\\to2\\to5\\to4\\to1$；\n - $1\\to6\\to3\\to4\\to2\\to5\\to1$。\n\n#### 数据规模与约定\n\n对于固定 $n$ 和 $P$，任意一张 $m$ 条边的图权重为 $\\left(\\frac{1}{P}\\right)^m\\left(\\frac{P-1}{P}\\right)^{n^2-n-m}$。\n\n - Subtask 1（1 pts）：为样例。\n - Subtask 2（16 pts）：$n=15$。\n - Subtask 3（20 pts）：$n=30$。\n - Subtask 4（26 pts）：$n=40$。\n - Subtask 5（37 pts）：$n=50$。\n", "locale": "zh-CN"}}}
{"pid": "P8282", "type": "P", "difficulty": 7, "samples": [["5 4 4000000 9000000 13 0\n3000000 0\n1000000 1000000\n2000000 4000000\n6000000 8000000\n7000000 10000000\n5000000 0\n4000000 2000000\n6000000 6000000\n10000000 10000000", "1\n4\n4000000.0000000000 0.0000000000\n3000000.0000000000 2000000.0000000000\n4000000.0000000000 6000000.0000000000\n9000000.0000000000 10000000.0000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "凸包", "洛谷月赛"], "title": "「MCOI-08 / AC6-M12」Weapons of Mass Destruction", "background": "Garuda Team, I've got some good news. \n\nThe chemical agent used as a catalyst for their WMD is being transported to our shores from the Estovakian mainland. \n\nThis catalyst has already been carried into the outskirts of Gracemeria. \n\nAs a measure of caution against any attempts to destroy it, it has been concealed at Fort Norton in Gracemeria's north. \n\nIf we start advancing again, the enemy will most likely bring the catalyst into Gracemeria at a faster pace. \n\nIf in fact weapons of mass destruction are used on the population of Gracemeria, the resulting devastation can't be expressed in enough words. \n\nIt will lead to unspeakable tragedies. \n\nWe've used this intelligence to come up with a solid proposal on how to prevent this scorched earth policy from being executed in our capital.\n\nJust a minute ago, we received a letter of approval for our prevention plan from the Joint Chiefs of Staff. \n\nThe proposal we put on the table for our scorched earth prevention policy is really quite simple. \n\nWhile the enemy transport unit is stationed at Fort Norton, **we'll ambush them.** \n\nWe like to call it our tactic for pre-emptive victory. \n\nThe enemy has loaded this catalyst into their transport vehicles and is able to send them into Gracemeria at any time. \n\nThis plan will be carried out by a handful of our top pilots under absolute secrecy. \n\n**Fly through Fort Norton's canyon at an extremely low altitude to avoid radar detection, and take out those transport vehicles.** \n\nWe've determined that a high-risk mission of this magnitude could not be executed by anyone other than Garuda Team. \n\nWe're counting on a flawless execution here.\n\n$$_{{\\frac{\\large\\text{ACE COMBAT }\\Large6}{\\tiny{\\text{F i r e s\\quad O f\\quad L i b e r a t i o n}}}}}\\\\ \\text{Mission 12} \\\\\\Large\\text{Weapons of Mass Destruction}\\\\\\tiny -\\textit{ Boiling Point }-$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3e1iqxjw.png)", "description": "为了摧毁敌方装载有 WMD 催化剂的车队，你需要在超低空穿过 Fort Norton 的峡谷以接近他们。\n\nFort Norton 抽象为**平面上两个关于 $y$（$y\\in[0,10^7]$）的线性分段函数** $A(y):y\\mapsto x$ 以及 $B(y):y\\mapsto x$，其中对于任意实数 $y\\in [0,10^7]$，**满足 $A(y) \\le B(y)$**。\n\n你和你的 F-15E 抽象为一质点，**初始位置是 $(X_1,0)$**，保证 $A(0)\\leq X_1\\leq B(0)$；**同时具有初速度 $(v_0,\\theta_0)$，表示初速的大小和方向**。\n\n为了避免敌方发现，你不能大功率开动发动机。你的动力刚好足够在保持平飞的时候保持匀速。\n\n当然你可以转向。由于你是 Ace Combat 的主角，你的转向全部用 PSM 完成。具体来说，你的飞行轨迹应为一条由若干线段组成的折线。但是在转向中会受到阻力。**如果方向改变后的角与改变前的角的差的绝对值为 $\\alpha$，则速度大小会减小 $\\alpha$**。如果你不改变方向，那么你会一直做匀速直线运动。\n\n由于 Ghost Eye 很着急完成任务，所以**你的 $y$ 坐标必须随时间递增**。\n\n同时，你需要保证在任意时刻，你所在的位置 $(x,y)$ 满足 $A(y)\\le x\\le B(y)$。\n\nPSM 转向的过载很大，因此你需要保证**转向次数不超过 $\\bf 3\\times 10^6$**。~~否则你就会像 Prez 一样 g-LOC 并一头栽在仪表盘上。~~\n\n求任何一个转向方案，使得你运动到 $(X_2,10^7)$ 上（**即，速度不能在运动过程中变为 $\\bf0$ 或负数**），同时转向次数不超过 $3\\times 10^6$。类似的，保证 $A(10^7)\\leq X_2\\leq B(10^7)$。", "inputFormat": "第一行四个整数 $n,m,X_1,X_2$ 和两个实数 $v_0,\\theta_0$。\n\n**保证 $v_0\\pm 10^{-6}$ 范围内解存在性不变。**\n\n接下来 $n$ 行，每行两个整数 $x,y$，保证 $y$ 递增，第一个 $y$ 是 $0$，最后一个 $y$ 是 $10^7$。把这些点依次用线段连接起来即得到函数 $A$。\n\n接下来 $m$ 行，每行两个整数 $p,q$ 表示函数 $B$，与 $A$ 的输入方式同理。", "outputFormat": "先输出一行 `1`。\n\n然后由于这个点的运动轨迹一定是一条折线，所以你需要在下一行输出端点数 $K$；接下来输出 $K$ 行，每行两个实数表示这个端点的坐标。假设你给出的点列是 $C:\\{(s_1,t_1),(s_2,t_2),\\cdots,(s_K,t_K)\\}$，那么表示 $\\forall i\\in [1,K)$，$C_iC_{i+1}$ 之间连线，得到的折线就是你给出的运动轨迹。\n\n你需要保证：\n\n- $C_1$ 与 $X_1$ 重合，$C_K$ 与 $X_2$ 重合；\n- **$C$ 中 $y$ 坐标单调；**\n- 对于任意 $1\\leq i<K$，有 $t_i<t_{i+1}$；\n- 对于任意折线上的点 $(x,y)$，满足 $A(y)-10^{-6}\\leq x\\leq B(y)+10^{-6}$；\n- 运动过程中速度大于 $0$；\n- $K\\leq 3\\times10^6$。\n\n如果你正确输出了一种符合上述要求的方案，即被判为 Accepted。否则判为 Wrong Answer。如果有不止一种方案，输出任意一种皆可。\n\n**本题开启 Special Judge。**", "hint": "样例解释（缩小 $10^6$ 倍）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5g98x901.png)\n\n**注意质点在运动过程中可以碰到边界，也可以沿着边界运动一段。**\n\n---\n\n对于 $100\\%$ 的数据，保证 $2\\leq n,m\\leq 10^6$，$0\\leq x,y,p,q\\leq 10^7$，$x_1\\leq X_1\\leq p_1$，$x_n\\leq X_2\\leq p_m$，$0\\leq \\theta_0<\\pi$，$0\\leq v_0\\leq 10^9$。\n\n对于 $100\\%$ 的数据，实数精度不超过 $12$ 位。\n\n对于 $100\\%$ 的数据，**保 证 有 解**。\n\n\n- Subtask 1（3 pts）：$n,m\\leq 6$；$v_0\\ge 50$。\n- Subtask 2（8 pts）：$n,m\\leq 6$。\n- Subtask 3（17 pts）：$n,m\\leq 200$。\n- Subtask 4（13 pts）：$n,m\\leq 1500$。\n- Subtask 5（17 pts）：$n,m\\leq 5000$。\n- Subtask 6（19 pts）：$n,m\\leq 10^5$。\n- Subtask 7（23 pts）：无特殊限制。\n\n**请注意浮点数输出效率。**\n\n---\n\nidea：Sol1，solution：Sol1 & w33z8kqrqk8zzzx33，code：Sol1，data：w33z8kqrqk8zzzx33", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-08 / AC6-M12」Weapons of Mass Destruction", "background": "Garuda Team, I've got some good news. \n\nThe chemical agent used as a catalyst for their WMD is being transported to our shores from the Estovakian mainland. \n\nThis catalyst has already been carried into the outskirts of Gracemeria. \n\nAs a measure of caution against any attempts to destroy it, it has been concealed at Fort Norton in Gracemeria's north. \n\nIf we start advancing again, the enemy will most likely bring the catalyst into Gracemeria at a faster pace. \n\nIf in fact weapons of mass destruction are used on the population of Gracemeria, the resulting devastation can't be expressed in enough words. \n\nIt will lead to unspeakable tragedies. \n\nWe've used this intelligence to come up with a solid proposal on how to prevent this scorched earth policy from being executed in our capital.\n\nJust a minute ago, we received a letter of approval for our prevention plan from the Joint Chiefs of Staff. \n\nThe proposal we put on the table for our scorched earth prevention policy is really quite simple. \n\nWhile the enemy transport unit is stationed at Fort Norton, **we'll ambush them.** \n\nWe like to call it our tactic for pre-emptive victory. \n\nThe enemy has loaded this catalyst into their transport vehicles and is able to send them into Gracemeria at any time. \n\nThis plan will be carried out by a handful of our top pilots under absolute secrecy. \n\n**Fly through Fort Norton's canyon at an extremely low altitude to avoid radar detection, and take out those transport vehicles.** \n\nWe've determined that a high-risk mission of this magnitude could not be executed by anyone other than Garuda Team. \n\nWe're counting on a flawless execution here.\n\n$$_{{\\frac{\\large\\text{ACE COMBAT }\\Large6}{\\tiny{\\text{F i r e s\\quad O f\\quad L i b e r a t i o n}}}}}\\\\ \\text{Mission 12} \\\\\\Large\\text{Weapons of Mass Destruction}\\\\\\tiny -\\textit{ Boiling Point }-$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3e1iqxjw.png)", "description": "为了摧毁敌方装载有 WMD 催化剂的车队，你需要在超低空穿过 Fort Norton 的峡谷以接近他们。\n\nFort Norton 抽象为**平面上两个关于 $y$（$y\\in[0,10^7]$）的线性分段函数** $A(y):y\\mapsto x$ 以及 $B(y):y\\mapsto x$，其中对于任意实数 $y\\in [0,10^7]$，**满足 $A(y) \\le B(y)$**。\n\n你和你的 F-15E 抽象为一质点，**初始位置是 $(X_1,0)$**，保证 $A(0)\\leq X_1\\leq B(0)$；**同时具有初速度 $(v_0,\\theta_0)$，表示初速的大小和方向**。\n\n为了避免敌方发现，你不能大功率开动发动机。你的动力刚好足够在保持平飞的时候保持匀速。\n\n当然你可以转向。由于你是 Ace Combat 的主角，你的转向全部用 PSM 完成。具体来说，你的飞行轨迹应为一条由若干线段组成的折线。但是在转向中会受到阻力。**如果方向改变后的角与改变前的角的差的绝对值为 $\\alpha$，则速度大小会减小 $\\alpha$**。如果你不改变方向，那么你会一直做匀速直线运动。\n\n由于 Ghost Eye 很着急完成任务，所以**你的 $y$ 坐标必须随时间递增**。\n\n同时，你需要保证在任意时刻，你所在的位置 $(x,y)$ 满足 $A(y)\\le x\\le B(y)$。\n\nPSM 转向的过载很大，因此你需要保证**转向次数不超过 $\\bf 3\\times 10^6$**。~~否则你就会像 Prez 一样 g-LOC 并一头栽在仪表盘上。~~\n\n求任何一个转向方案，使得你运动到 $(X_2,10^7)$ 上（**即，速度不能在运动过程中变为 $\\bf0$ 或负数**），同时转向次数不超过 $3\\times 10^6$。类似的，保证 $A(10^7)\\leq X_2\\leq B(10^7)$。", "inputFormat": "第一行四个整数 $n,m,X_1,X_2$ 和两个实数 $v_0,\\theta_0$。\n\n**保证 $v_0\\pm 10^{-6}$ 范围内解存在性不变。**\n\n接下来 $n$ 行，每行两个整数 $x,y$，保证 $y$ 递增，第一个 $y$ 是 $0$，最后一个 $y$ 是 $10^7$。把这些点依次用线段连接起来即得到函数 $A$。\n\n接下来 $m$ 行，每行两个整数 $p,q$ 表示函数 $B$，与 $A$ 的输入方式同理。", "outputFormat": "先输出一行 `1`。\n\n然后由于这个点的运动轨迹一定是一条折线，所以你需要在下一行输出端点数 $K$；接下来输出 $K$ 行，每行两个实数表示这个端点的坐标。假设你给出的点列是 $C:\\{(s_1,t_1),(s_2,t_2),\\cdots,(s_K,t_K)\\}$，那么表示 $\\forall i\\in [1,K)$，$C_iC_{i+1}$ 之间连线，得到的折线就是你给出的运动轨迹。\n\n你需要保证：\n\n- $C_1$ 与 $X_1$ 重合，$C_K$ 与 $X_2$ 重合；\n- **$C$ 中 $y$ 坐标单调；**\n- 对于任意 $1\\leq i<K$，有 $t_i<t_{i+1}$；\n- 对于任意折线上的点 $(x,y)$，满足 $A(y)-10^{-6}\\leq x\\leq B(y)+10^{-6}$；\n- 运动过程中速度大于 $0$；\n- $K\\leq 3\\times10^6$。\n\n如果你正确输出了一种符合上述要求的方案，即被判为 Accepted。否则判为 Wrong Answer。如果有不止一种方案，输出任意一种皆可。\n\n**本题开启 Special Judge。**", "hint": "样例解释（缩小 $10^6$ 倍）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5g98x901.png)\n\n**注意质点在运动过程中可以碰到边界，也可以沿着边界运动一段。**\n\n---\n\n对于 $100\\%$ 的数据，保证 $2\\leq n,m\\leq 10^6$，$0\\leq x,y,p,q\\leq 10^7$，$x_1\\leq X_1\\leq p_1$，$x_n\\leq X_2\\leq p_m$，$0\\leq \\theta_0<\\pi$，$0\\leq v_0\\leq 10^9$。\n\n对于 $100\\%$ 的数据，实数精度不超过 $12$ 位。\n\n对于 $100\\%$ 的数据，**保 证 有 解**。\n\n\n- Subtask 1（3 pts）：$n,m\\leq 6$；$v_0\\ge 50$。\n- Subtask 2（8 pts）：$n,m\\leq 6$。\n- Subtask 3（17 pts）：$n,m\\leq 200$。\n- Subtask 4（13 pts）：$n,m\\leq 1500$。\n- Subtask 5（17 pts）：$n,m\\leq 5000$。\n- Subtask 6（19 pts）：$n,m\\leq 10^5$。\n- Subtask 7（23 pts）：无特殊限制。\n\n**请注意浮点数输出效率。**\n\n---\n\nidea：Sol1，solution：Sol1 & w33z8kqrqk8zzzx33，code：Sol1，data：w33z8kqrqk8zzzx33", "locale": "zh-CN"}}}
{"pid": "P8283", "type": "P", "difficulty": 7, "samples": [["5 10 2\n0000000001000020000300004", "4834712607666044912"], ["20 100 16500242824326557842\n0000500006000070000800000000010000200003000040000000001000020000300004000090000:0000;0000<0000=0000>", "5449866856465492064"]], "limits": {"time": [1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370, 1370], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "线性基", "洛谷月赛"], "title": "「MCOI-08」Dantalion", "background": "And thus it is Tairitsu's turn to gain  the upper hand.", "description": "给定一个长为 $n$（$1\\le n\\le 6\\times 10^5$）的非负整数序列 $a_0,a_1,\\dots,a_{n-1}$（$0\\le a_i<2^{30}$）。\n\n有 $q$ 个问询（$1\\le q\\le 10^6$）。\n\n每次问询两个整数 $l,r$（$0\\le l\\le r<n$），有多少对整数 $x,y$ 满足：\n\n - $l\\le x\\le y\\le r$；\n - $\\forall i,j\\in S\\ :i\\oplus j\\in S$，其中 $S:=\\{a_k\\}_{k=x}^y$。\n \nTip: 本题总时限较大，故请减少无意义提交量（如高复杂度暴力或是直接提交所给尚需完善的代码等）。", "inputFormat": "由于本题数据较多，您不需要输入输出，请完善以下程序中的 `init(int, int, vector<int>)` 和 `solve(int, int)` 函数，并提交。正解不依赖于其模板。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid init(int n, int q, vector<int> a) {\n  // implement...\n}\n\nlong long solve(int l, int r) {\n  // implement...\n}\n\nint main() {\n  int n, q;\n  uint64_t s;\n  cin >> n >> q >> s;\n  string r;\n  cin >> r;\n  vector<int> a(n);\n  for (int i = 0; i < n; i++)\n    for (int s = 5 * i; s < 5 * i + 5; s++)\n      a[i] = (a[i] * 64 + (int)(r[s]) - (int)('0'));\n  init(n, q, a);\n  uint64_t state = 0;\n  auto splitmix64 = [&](uint64_t v) {\n    uint64_t z = (v + 0x9e3779b97f4a7c15);\n    z = (z ^ (z >> 30)) * 0xbf58476d1ce4e5b9;\n    z = (z ^ (z >> 27)) * 0x94d049bb133111eb;\n    return z ^ (z >> 31);\n  };\n  mt19937_64 rng(s);\n  for (int i = 0; i < q; i++) {\n    int l = (rng() ^ state) % n;\n    int r = (rng() ^ state) % n;\n    long long ans = solve(min(l, r), max(l, r));\n    state = splitmix64(state + ans);\n    if ((i + 1) % (1 << 15) == 0)\n      cout << state << endl;\n  }\n  cout << state << endl;\n}\n```\n", "outputFormat": "", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$，$0 \\le a_i < 2^{30}$，$0 \\le l \\le r < n$。\n\n对于 $100\\%$ 的数据，输入合法。\n\n- Subtask 1（5 pts,~~Tutorial~~）：$1\\le n,q\\le 10^2$。\n- Subtask 2（7 pts,~~Tutorial~~）：$1\\leq n,q\\leq 10^3$\n- Subtask 3（11 pts,~~PST 5.0~~）：$1\\leq n,q\\leq 10^4$。\n- Subtask 4（17 pts,~~PRS 8.2~~）：$1\\leq n,q\\leq 10^5$。\n- Subtask 5（61 pts,~~FTR 10.8~~）：$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$。\n\n为什么要多个 $1$ 分呢，因为谱师打本曲时性了 $1$ Lost.\n\nIdea: Powerless; Solution: ccz181078&noip&w33z; Code: w33z; Data: w33z\n\nThis problem was added on 2022.4.10. Thanks for their help.\n\nThe data was strengthened on 2022.4.27 by w33z.\n\n2022.4.10 - 2022.5.4 : 25 days 1st kill (水军带你飞).\n\n2022.4.10 - 2022.5.17 : 38 days 2nd kill (WhisperingSnowflakes).\n\n2022.4.10 - 2022.6.9 : 61 days 3rd kill (Verdandi).", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-08」Dantalion", "background": "And thus it is Tairitsu's turn to gain  the upper hand.", "description": "给定一个长为 $n$（$1\\le n\\le 6\\times 10^5$）的非负整数序列 $a_0,a_1,\\dots,a_{n-1}$（$0\\le a_i<2^{30}$）。\n\n有 $q$ 个问询（$1\\le q\\le 10^6$）。\n\n每次问询两个整数 $l,r$（$0\\le l\\le r<n$），有多少对整数 $x,y$ 满足：\n\n - $l\\le x\\le y\\le r$；\n - $\\forall i,j\\in S\\ :i\\oplus j\\in S$，其中 $S:=\\{a_k\\}_{k=x}^y$。\n \nTip: 本题总时限较大，故请减少无意义提交量（如高复杂度暴力或是直接提交所给尚需完善的代码等）。", "inputFormat": "由于本题数据较多，您不需要输入输出，请完善以下程序中的 `init(int, int, vector<int>)` 和 `solve(int, int)` 函数，并提交。正解不依赖于其模板。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid init(int n, int q, vector<int> a) {\n  // implement...\n}\n\nlong long solve(int l, int r) {\n  // implement...\n}\n\nint main() {\n  int n, q;\n  uint64_t s;\n  cin >> n >> q >> s;\n  string r;\n  cin >> r;\n  vector<int> a(n);\n  for (int i = 0; i < n; i++)\n    for (int s = 5 * i; s < 5 * i + 5; s++)\n      a[i] = (a[i] * 64 + (int)(r[s]) - (int)('0'));\n  init(n, q, a);\n  uint64_t state = 0;\n  auto splitmix64 = [&](uint64_t v) {\n    uint64_t z = (v + 0x9e3779b97f4a7c15);\n    z = (z ^ (z >> 30)) * 0xbf58476d1ce4e5b9;\n    z = (z ^ (z >> 27)) * 0x94d049bb133111eb;\n    return z ^ (z >> 31);\n  };\n  mt19937_64 rng(s);\n  for (int i = 0; i < q; i++) {\n    int l = (rng() ^ state) % n;\n    int r = (rng() ^ state) % n;\n    long long ans = solve(min(l, r), max(l, r));\n    state = splitmix64(state + ans);\n    if ((i + 1) % (1 << 15) == 0)\n      cout << state << endl;\n  }\n  cout << state << endl;\n}\n```\n", "outputFormat": "", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$，$0 \\le a_i < 2^{30}$，$0 \\le l \\le r < n$。\n\n对于 $100\\%$ 的数据，输入合法。\n\n- Subtask 1（5 pts,~~Tutorial~~）：$1\\le n,q\\le 10^2$。\n- Subtask 2（7 pts,~~Tutorial~~）：$1\\leq n,q\\leq 10^3$\n- Subtask 3（11 pts,~~PST 5.0~~）：$1\\leq n,q\\leq 10^4$。\n- Subtask 4（17 pts,~~PRS 8.2~~）：$1\\leq n,q\\leq 10^5$。\n- Subtask 5（61 pts,~~FTR 10.8~~）：$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$。\n\n为什么要多个 $1$ 分呢，因为谱师打本曲时性了 $1$ Lost.\n\nIdea: Powerless; Solution: ccz181078&noip&w33z; Code: w33z; Data: w33z\n\nThis problem was added on 2022.4.10. Thanks for their help.\n\nThe data was strengthened on 2022.4.27 by w33z.\n\n2022.4.10 - 2022.5.4 : 25 days 1st kill (水军带你飞).\n\n2022.4.10 - 2022.5.17 : 38 days 2nd kill (WhisperingSnowflakes).\n\n2022.4.10 - 2022.6.9 : 61 days 3rd kill (Verdandi).", "locale": "zh-CN"}}}
{"pid": "P8284", "type": "P", "difficulty": 2, "samples": [["4\n1 1\n97 0\n17 1\n5 2", "5 or more\n1\n2\n3\n4\n5\nImpossible\nImpossible\nImpossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学"], "title": "「DAOI R1」Concert", "background": "> $ \\texttt{I want to be an artist.} $", "description": "$ \\texttt{Erinyes} $ 的学校将举办一场音乐会，但是他若想加入其中就必须经过一场考核，试题如下：\n\n给定两个整数 $ n,k $，表示有 $ n $ 个同学，你需要给每位同学分发一个数字，即对于整数 $ n $ 构造一个序列 $ a $。\n\n同学得到的数字必须满足如下性质：\n\n- 对于每个 $ i\\;(1 \\leq i \\leq n-1) $，满足 $ a_i=\\gcd(a_{i+1},a_{i+2},\\dots,a_{n-1},a_n) $。\n- 对于每个 $ i\\;(1 \\leq i \\leq n) $，满足 $ 1 \\leq a_i \\leq 10^5 $。\n- 对于每个 $ i\\;(1 \\leq i \\leq 10^5) $，$ a_i $ 至多在序列中出现 $ k $ 次。\n\n但这对 $ \\texttt{Erinyes} $ 来说太简单了，所以他决定专心准备节目，而这个问题则将交给你。\n\n你的任务是输出这样的序列的个数 $ l $ 以及所有这样的序列。但是由于答案可能会很大，所以我们对输出做了如下规定：\n\n- 对于 $ l=0 $，输出 ```Impossible```。\n- 对于 $ 1 \\leq l \\leq 4 $，输出序列实际个数，接下来 $ l $ 行，每行一个序列，表示你所构造的序列。\n- 对于 $ l \\geq 5 $，输出 ```5 or more```，接下来五行，每行一个序列，表示你所构造的序列中字典序最小的五个。\n- 你必须按照字典序输出。", "inputFormat": "第一行读入一个整数 $ t $，表示有 $ t $ 组数据。\n\n对于每组数据，读入两个整数 $ n,k $。", "outputFormat": "对于每组数据，第一行输出一个整数或一个字符串。倘若可以构造，接下来每行输出一个你所构造的字符串。", "hint": "### 样例解释\n对于第一组数据，可以发现此方案是最优解。\n\n对于第二组数据，无论如何也无法构造出正确的序列。\n\n对于第三组数据，无论如何也无法构造出正确的序列。\n\n对于第四组数据，无论如何也无法构造出正确的序列。\n\n### 数据规模\n对于 $ 100\\% $ 的数据，$ 1 \\leq t \\leq 100,1 \\leq n \\leq 10^5,0 \\leq k \\leq 10^5 $", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DAOI R1」Concert", "background": "> $ \\texttt{I want to be an artist.} $", "description": "$ \\texttt{Erinyes} $ 的学校将举办一场音乐会，但是他若想加入其中就必须经过一场考核，试题如下：\n\n给定两个整数 $ n,k $，表示有 $ n $ 个同学，你需要给每位同学分发一个数字，即对于整数 $ n $ 构造一个序列 $ a $。\n\n同学得到的数字必须满足如下性质：\n\n- 对于每个 $ i\\;(1 \\leq i \\leq n-1) $，满足 $ a_i=\\gcd(a_{i+1},a_{i+2},\\dots,a_{n-1},a_n) $。\n- 对于每个 $ i\\;(1 \\leq i \\leq n) $，满足 $ 1 \\leq a_i \\leq 10^5 $。\n- 对于每个 $ i\\;(1 \\leq i \\leq 10^5) $，$ a_i $ 至多在序列中出现 $ k $ 次。\n\n但这对 $ \\texttt{Erinyes} $ 来说太简单了，所以他决定专心准备节目，而这个问题则将交给你。\n\n你的任务是输出这样的序列的个数 $ l $ 以及所有这样的序列。但是由于答案可能会很大，所以我们对输出做了如下规定：\n\n- 对于 $ l=0 $，输出 ```Impossible```。\n- 对于 $ 1 \\leq l \\leq 4 $，输出序列实际个数，接下来 $ l $ 行，每行一个序列，表示你所构造的序列。\n- 对于 $ l \\geq 5 $，输出 ```5 or more```，接下来五行，每行一个序列，表示你所构造的序列中字典序最小的五个。\n- 你必须按照字典序输出。", "inputFormat": "第一行读入一个整数 $ t $，表示有 $ t $ 组数据。\n\n对于每组数据，读入两个整数 $ n,k $。", "outputFormat": "对于每组数据，第一行输出一个整数或一个字符串。倘若可以构造，接下来每行输出一个你所构造的字符串。", "hint": "### 样例解释\n对于第一组数据，可以发现此方案是最优解。\n\n对于第二组数据，无论如何也无法构造出正确的序列。\n\n对于第三组数据，无论如何也无法构造出正确的序列。\n\n对于第四组数据，无论如何也无法构造出正确的序列。\n\n### 数据规模\n对于 $ 100\\% $ 的数据，$ 1 \\leq t \\leq 100,1 \\leq n \\leq 10^5,0 \\leq k \\leq 10^5 $", "locale": "zh-CN"}}}
{"pid": "P8285", "type": "P", "difficulty": 5, "samples": [["2\n4\n2 0 2 2\n3\n5 0 7", "YES\nNO"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["数学", "排序", "分类讨论"], "title": "「DAOI R1」Magic", "background": "> $ \\text{-1,-1,+2} $", "description": "乔木 来到了大魔王的面前，他决定使用魔法击败魔王。\n\n给定一个整数 $n$，表示有 $n$ 个魔法阵，在每个魔法阵上都存在着一定的魔力值 $a_i$。\n\n你每次可以选择三个魔法阵 $i,j,k\\;(i,j,k$ 互不相同且 $a_i>0$，$a_j>0)$，然后 乔木 将会让第 $i$ 个魔法阵和第 $j$ 个魔法阵上的魔力值 $a_i,a_j$ 分别减 $1$，并让第 $k$ 个魔法阵上的魔力值 $a_k$ 加 $2$，我们将这称之为一次操作。\n\n乔木 想要将所有的魔力汇聚到一起以发挥最大的威力。他想知道在经过若干次操作后，能否让其中 $n-1$ 个魔法阵上的魔力值为 $0$，并使汇聚的那一个魔法阵的魔力值为原魔法阵的所有魔力值之和。", "inputFormat": "**本题包含多组数据。**\n\n一行输入一个数 $T$，表示数据组数。\n\n接下来对于每组数据，先输入一个正整数 $n$，然后依次输入 $n$ 个整数，第 $i$ 个整数代表 $a_i$。", "outputFormat": "对于每组数据输出一行，若可以实现，则输出 `YES`，否则输出 `NO`。", "hint": "### 样例解释\n- 对于第一组数据，可以将 $a_1$ 和 $a_3$ 对 $a_4$ 进行两次操作。\n- 对于第二组数据，可以证明不行。\n\n### 数据范围\n- 对于 $5\\%$ 的数据：$1\\le n\\le2$，$0\\le a_i\\le10^3$。\n- 对于 $20\\%$ 的数据：$1\\le n\\le10$，$0\\le a_i\\le10^3$。\n- 对于 $100\\%$ 的数据：$1\\le \\sum{n}\\le2\\times10^{6}$，$0\\le a_i\\le10^{9}$。\n\n对于所有数据，保证 $1\\le T\\le100$ 且 $\\sum\\limits_{i=1}^{n} a_i \\ge1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DAOI R1」Magic", "background": "> $ \\text{-1,-1,+2} $", "description": "乔木 来到了大魔王的面前，他决定使用魔法击败魔王。\n\n给定一个整数 $n$，表示有 $n$ 个魔法阵，在每个魔法阵上都存在着一定的魔力值 $a_i$。\n\n你每次可以选择三个魔法阵 $i,j,k\\;(i,j,k$ 互不相同且 $a_i>0$，$a_j>0)$，然后 乔木 将会让第 $i$ 个魔法阵和第 $j$ 个魔法阵上的魔力值 $a_i,a_j$ 分别减 $1$，并让第 $k$ 个魔法阵上的魔力值 $a_k$ 加 $2$，我们将这称之为一次操作。\n\n乔木 想要将所有的魔力汇聚到一起以发挥最大的威力。他想知道在经过若干次操作后，能否让其中 $n-1$ 个魔法阵上的魔力值为 $0$，并使汇聚的那一个魔法阵的魔力值为原魔法阵的所有魔力值之和。", "inputFormat": "**本题包含多组数据。**\n\n一行输入一个数 $T$，表示数据组数。\n\n接下来对于每组数据，先输入一个正整数 $n$，然后依次输入 $n$ 个整数，第 $i$ 个整数代表 $a_i$。", "outputFormat": "对于每组数据输出一行，若可以实现，则输出 `YES`，否则输出 `NO`。", "hint": "### 样例解释\n- 对于第一组数据，可以将 $a_1$ 和 $a_3$ 对 $a_4$ 进行两次操作。\n- 对于第二组数据，可以证明不行。\n\n### 数据范围\n- 对于 $5\\%$ 的数据：$1\\le n\\le2$，$0\\le a_i\\le10^3$。\n- 对于 $20\\%$ 的数据：$1\\le n\\le10$，$0\\le a_i\\le10^3$。\n- 对于 $100\\%$ 的数据：$1\\le \\sum{n}\\le2\\times10^{6}$，$0\\le a_i\\le10^{9}$。\n\n对于所有数据，保证 $1\\le T\\le100$ 且 $\\sum\\limits_{i=1}^{n} a_i \\ge1$。", "locale": "zh-CN"}}}
{"pid": "P8286", "type": "P", "difficulty": 5, "samples": [["5 3\n9 7 2 5 6\n1 2 1\n2 6 8\n3 3 4", "3\n16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "堆", "O2优化"], "title": "「DAOI R1」Ciky", "background": "> \n> She is Mine.\n>\n", "description": "深秋，落叶纷纷，瞳可开心了。\n\n$ \\texttt{Augen} $ 带着小朋友们一起在树林里捡了很多金黄的叶子。\n\n他们捡的所有叶子都是正多边形，现在 $ \\texttt{Augen} $ 准备把它们制作成标本装订成册送给瞳。\n\n制作一个标本，需要沿一片叶子的边缘画上颜色，每一片叶子边缘的颜色不能相同。同时，每一个标本都有相对应的美丽程度。\n\n将标本装订成册时，需满足以下条件：\n\n- 第 $i$ 片叶子的周长不能大于第 $i+1$ 片叶子；\n- 第 $i$ 片叶子的美丽程度不能大于第 $i+1$ 片叶子。\n\n $ \\texttt{Augen} $ 拥有 $n$ 支不同颜色的笔，每支还可以画 $a_i$ 的长度。\n\n$m$ 片叶子，第 $i$ 片叶子为正 $k_i$ 边形，每条边长 $b_i$ ，每片叶子的美丽程度$c_i$ 。\n\n更简单地说，即，只有满足 $k_i*b_i \\leq a_j$ 的情况下，可以用第 $j$ 支画笔，画第 $i$ 片叶子。\n\n特别地，在一片叶子被第 $i$ 支画笔画完过后，它的周长会变成 $a_i$。一个画笔最多画一片叶子。\n\n $ \\texttt{Augen} $ 希望能更多的送出标本或者使得制作出来的标本美丽程度总和最大。\n \n **注意：两个小问相互独立。**\n \n ", "inputFormat": "第一行两个整数，$n,m$ 。\n\n第二行共 $n$ 个整数，第 $i$ 个整数表示 $a_i$ 。\n\n第三行共 $m$ 个整数，第 $i$ 个整数表示 $b_i$ 。\n\n第四行共 $m$ 个整数，第 $i$ 个整数表示 $c_i$ 。\n\n第五行共 $m$ 个整数，第 $i$ 个整数表示 $k_i$ 。\n", "outputFormat": "共两行 。\n\n第一行，一个整数，表示册子中标本的个数的最大值 。\n\n第二行，一个整数，表示制作出来的标本美丽程度的最大值 。\n\n**注意：第二问并未要求将标本装入册子。**", "hint": "#### 样例解释\n对于第一个问题，用第 $4$ 个画笔画第 $1$ 个叶子，用第 $5$ 个画笔画第 $2$ 个叶子，用第 $1$ 个画笔画第 $3$ 个叶子，画出的叶子周长为 $5,6,9$，可画 $3$ 片。\n\n对于第二问，可以用同样的方法画，美丽度为 $2+6+8=16$\n\n### 数据规模\n**本题采用捆绑测试**\n\n| Subtask | $n$ | $m$  | 分值 |\n| :----------: | :----------:  | :----------: | :----------: |\n| $0$ | $\\le10$ | $\\le10$ | $10$ |\n| $1$ | $\\le10^3$ | $\\le10^3$  | $20$ |\n| $2$ | $\\le10^6$ | $\\leq 10^6$  | $70$ |\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^6,3\\leq k_i \\leq 10^6,1 \\leq a_i \\leq 10^9,1 \\leq b_i,c_i \\leq 10^6$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DAOI R1」Ciky", "background": "> \n> She is Mine.\n>\n", "description": "深秋，落叶纷纷，瞳可开心了。\n\n$ \\texttt{Augen} $ 带着小朋友们一起在树林里捡了很多金黄的叶子。\n\n他们捡的所有叶子都是正多边形，现在 $ \\texttt{Augen} $ 准备把它们制作成标本装订成册送给瞳。\n\n制作一个标本，需要沿一片叶子的边缘画上颜色，每一片叶子边缘的颜色不能相同。同时，每一个标本都有相对应的美丽程度。\n\n将标本装订成册时，需满足以下条件：\n\n- 第 $i$ 片叶子的周长不能大于第 $i+1$ 片叶子；\n- 第 $i$ 片叶子的美丽程度不能大于第 $i+1$ 片叶子。\n\n $ \\texttt{Augen} $ 拥有 $n$ 支不同颜色的笔，每支还可以画 $a_i$ 的长度。\n\n$m$ 片叶子，第 $i$ 片叶子为正 $k_i$ 边形，每条边长 $b_i$ ，每片叶子的美丽程度$c_i$ 。\n\n更简单地说，即，只有满足 $k_i*b_i \\leq a_j$ 的情况下，可以用第 $j$ 支画笔，画第 $i$ 片叶子。\n\n特别地，在一片叶子被第 $i$ 支画笔画完过后，它的周长会变成 $a_i$。一个画笔最多画一片叶子。\n\n $ \\texttt{Augen} $ 希望能更多的送出标本或者使得制作出来的标本美丽程度总和最大。\n \n **注意：两个小问相互独立。**\n \n ", "inputFormat": "第一行两个整数，$n,m$ 。\n\n第二行共 $n$ 个整数，第 $i$ 个整数表示 $a_i$ 。\n\n第三行共 $m$ 个整数，第 $i$ 个整数表示 $b_i$ 。\n\n第四行共 $m$ 个整数，第 $i$ 个整数表示 $c_i$ 。\n\n第五行共 $m$ 个整数，第 $i$ 个整数表示 $k_i$ 。\n", "outputFormat": "共两行 。\n\n第一行，一个整数，表示册子中标本的个数的最大值 。\n\n第二行，一个整数，表示制作出来的标本美丽程度的最大值 。\n\n**注意：第二问并未要求将标本装入册子。**", "hint": "#### 样例解释\n对于第一个问题，用第 $4$ 个画笔画第 $1$ 个叶子，用第 $5$ 个画笔画第 $2$ 个叶子，用第 $1$ 个画笔画第 $3$ 个叶子，画出的叶子周长为 $5,6,9$，可画 $3$ 片。\n\n对于第二问，可以用同样的方法画，美丽度为 $2+6+8=16$\n\n### 数据规模\n**本题采用捆绑测试**\n\n| Subtask | $n$ | $m$  | 分值 |\n| :----------: | :----------:  | :----------: | :----------: |\n| $0$ | $\\le10$ | $\\le10$ | $10$ |\n| $1$ | $\\le10^3$ | $\\le10^3$  | $20$ |\n| $2$ | $\\le10^6$ | $\\leq 10^6$  | $70$ |\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^6,3\\leq k_i \\leq 10^6,1 \\leq a_i \\leq 10^9,1 \\leq b_i,c_i \\leq 10^6$", "locale": "zh-CN"}}}
{"pid": "P8287", "type": "P", "difficulty": 4, "samples": [["3 3 1\n1 2\n2 3\n3 1\n1\n", "1\n"], ["5 4 2\n1 2\n2 3\n3 4\n2 5\n1 5\n", "Poor D!\n"], ["15 15 2\n2 1\n2 3\n2 9\n5 9\n4 5\n5 7\n6 7\n7 8\n7 11\n11 10\n10 9\n10 14\n14 15\n11 12\n12 13\n4 15\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "并查集", "O2优化", "广度优先搜索 BFS", "Tarjan"], "title": "「DAOI R1」Flame", "background": ">尝尝天堂里的苹果有什么了不起，我要尝尝地狱里的苹果。", "description": "黑暗里有黑色的火焰，只有目光敏锐的人才可以捕捉到,\n\n借着这点卑微之光,走进地狱深处......\n\n欢迎来到地狱的审判之地。\n\n$ \\texttt{hhpq.} $ 将 D 押入了地狱的审判之地，D 必须在业火之城成功生成一座业火监狱之前逃离，所以他想知道还有多少秒时间。\n\n在这座业火之城中，共有 $n$ 个祭坛，共有 $m$ 条可以蔓延火苗的业火之路，且业火之路是双向连通。\n\n已知在这一座业火之城共有 $k$ 个火种已被点燃的业火祭坛，且从第一秒开始，火种将开始从被点燃的业火祭坛向可以蔓延且未被点燃的业火祭坛蔓延。\n\n当祭坛被点燃后，则会瞬间激活，和与之有路的祭坛连接业火圣壁。\n\n当存在一片由业火圣壁构成的封闭图形时，则业火监狱生成成功。\n\n### 简化题意\n给出一个 $n$ 个点，$m$ 条边的无向图，每一个点有一个标记，初始有 $k$ 个点的标记为 `1`（将给出这 $k$ 个点的编号），其余的点标记为 `0`。\n\n每一秒，对于每个标记为 `1` 的点，与它**有边相连**的点的标记都会变成 `1`。\n\n求最少需要多少秒，图中标记为 `1` 的点与其相邻的边可以构成一个简单环。\n\n**换言之，求最少多少秒后存在一个由 `1` 构成的集合形成简单环。**", "inputFormat": "第一行三个正整数：$n,m,k$；\n\n下面 $m$ 行，每行两个正整数：$x,y$（第 $x$ 座业火祭坛与第 $y$ 座业火祭坛有业火之路连接）；\n\n最后一行 $k$ 个正整数：已被点燃（拥有火种）的祭坛编号。", "outputFormat": "若可以逃离，输出 D 还有多少时间。\n\n反之若无法生成业火监狱，输出 ``` Poor D! ```。\n", "hint": "### 样例解释\n\n#### 样例1解释\n\n当时间到第一秒时，祭坛 $1$ 的火焰将蔓延到祭坛 $2$ 和 $3$，此时已经构成一个封闭图形了，故答案为 $1$。\n\n#### 样例2解释\n\n可以证明到此时是无法产生简单环的。\n\n### 数据规模\n\n| Subtask | $n\\leq$ | $m\\leq$ | $k\\leq$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10^6$ | $n-1$ | $10^4$ | $5$ |\n| $1$ | $10^6$ | $2\\times10^6$ | $1$ | $10$|\n| $2$ | $10$ | $45$ | $1$ | $5$ |\n| $3$ | $200$ | $500$ | $10$ | $10$ |\n| $4$| $2\\times 10^3$ | $5\\times 10^3$ | $50$ | $10$ |\n| $5$ | $5\\times10^5$ | $6\\times10^5$ | $500$ | $30$ |\n| $6$ | $10^6$ | $2\\times10^6$ | $10^4$ | $30$ |\n\n### 保证与约定\n\n保证数据无重边和自环；\n\n保证数据给定的图是一张无向连通图。\n\n### 帮助\n\n输入量较大，建议使用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DAOI R1」Flame", "background": ">尝尝天堂里的苹果有什么了不起，我要尝尝地狱里的苹果。", "description": "黑暗里有黑色的火焰，只有目光敏锐的人才可以捕捉到,\n\n借着这点卑微之光,走进地狱深处......\n\n欢迎来到地狱的审判之地。\n\n$ \\texttt{hhpq.} $ 将 D 押入了地狱的审判之地，D 必须在业火之城成功生成一座业火监狱之前逃离，所以他想知道还有多少秒时间。\n\n在这座业火之城中，共有 $n$ 个祭坛，共有 $m$ 条可以蔓延火苗的业火之路，且业火之路是双向连通。\n\n已知在这一座业火之城共有 $k$ 个火种已被点燃的业火祭坛，且从第一秒开始，火种将开始从被点燃的业火祭坛向可以蔓延且未被点燃的业火祭坛蔓延。\n\n当祭坛被点燃后，则会瞬间激活，和与之有路的祭坛连接业火圣壁。\n\n当存在一片由业火圣壁构成的封闭图形时，则业火监狱生成成功。\n\n### 简化题意\n给出一个 $n$ 个点，$m$ 条边的无向图，每一个点有一个标记，初始有 $k$ 个点的标记为 `1`（将给出这 $k$ 个点的编号），其余的点标记为 `0`。\n\n每一秒，对于每个标记为 `1` 的点，与它**有边相连**的点的标记都会变成 `1`。\n\n求最少需要多少秒，图中标记为 `1` 的点与其相邻的边可以构成一个简单环。\n\n**换言之，求最少多少秒后存在一个由 `1` 构成的集合形成简单环。**", "inputFormat": "第一行三个正整数：$n,m,k$；\n\n下面 $m$ 行，每行两个正整数：$x,y$（第 $x$ 座业火祭坛与第 $y$ 座业火祭坛有业火之路连接）；\n\n最后一行 $k$ 个正整数：已被点燃（拥有火种）的祭坛编号。", "outputFormat": "若可以逃离，输出 D 还有多少时间。\n\n反之若无法生成业火监狱，输出 ``` Poor D! ```。\n", "hint": "### 样例解释\n\n#### 样例1解释\n\n当时间到第一秒时，祭坛 $1$ 的火焰将蔓延到祭坛 $2$ 和 $3$，此时已经构成一个封闭图形了，故答案为 $1$。\n\n#### 样例2解释\n\n可以证明到此时是无法产生简单环的。\n\n### 数据规模\n\n| Subtask | $n\\leq$ | $m\\leq$ | $k\\leq$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10^6$ | $n-1$ | $10^4$ | $5$ |\n| $1$ | $10^6$ | $2\\times10^6$ | $1$ | $10$|\n| $2$ | $10$ | $45$ | $1$ | $5$ |\n| $3$ | $200$ | $500$ | $10$ | $10$ |\n| $4$| $2\\times 10^3$ | $5\\times 10^3$ | $50$ | $10$ |\n| $5$ | $5\\times10^5$ | $6\\times10^5$ | $500$ | $30$ |\n| $6$ | $10^6$ | $2\\times10^6$ | $10^4$ | $30$ |\n\n### 保证与约定\n\n保证数据无重边和自环；\n\n保证数据给定的图是一张无向连通图。\n\n### 帮助\n\n输入量较大，建议使用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P8288", "type": "P", "difficulty": 6, "samples": [["3 0\n2 2 1\n2 3 1\n2 1 1\n", "3"], ["4 1\n3 2 1\n3 1 3\n3 4 2\n3 3 2\n1 2 1 3\n", "7"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["并查集", "树形 DP", "拓扑排序", "基环树"], "title": "「DAOI R1」Fireworks", "background": "> 俯首，满城灯火交辉。\n> \n> 回眸，漫天流星逆飞。", "description": "人们以前通常会放烟花，而每个烟花都有它本身的美观度。\n\n$ \\texttt{Iratis} $ 想要在户外放烟花，但是有烟花之间有一些关系：\n\n- 关系一：对于烟花 $ x $ ，有一个对应烟花 $ a_x $ ，若烟花 $ x $ 与烟花 $ a_x $ 一起燃放，就会使烟花 $ x $ 的美观度减少 $ b_x $ 。\n\n- 关系二：有一些烟花是一个系列，必须同时燃放，其中有一个是主烟花，**每个烟花只会属于一个系列**。\n\n特别地，若有一系列 $ S_1 $ （主烟花为 $ p_1 $ ） 。 $ p_1 $ 关系一所对应的烟花为系列 $ S_2 $ 中的烟花。而 $ S_1 $ 系列中的其他烟花与非 $ S_1,S_2 $ 系列中的烟花形成关系一。**那么对于这条关系一，它不会降低美观度。**\n\n$ \\texttt{Iratis} $ 家里有 $ n $ 个烟花，他希望选择其中的一些烟花燃放，使得这些**烟花的美观度总和**最大。", "inputFormat": "第一行包含两个整数 $ n,m $，分别描述烟花的个数和和关系二的个数。\n\n接下来 $ n $ 行，每行三个整数 $ v_i,a_i,b_i $ ，分别是这个烟花的美观度、关系一对应的烟花、关系一降低的美观度。\n\n最后 $ m $ 行，每行先读入两个数 $ p_i,k_i $，然后是 $ k_i $ 个数，表示这 $ k_i $ 个烟花是一个系列，编号为 $ p_i $ 的烟花为主烟花。", "outputFormat": "输出一行一个整数，表示烟花的美观度总和。", "hint": "### 样例解释\n#### 样例1解释\n\n烟花 $ 1,2,3 $ 一起燃放，最大美观度为 $ 2+2+2-1-1-1=3 $ 。\n\n#### 样例2解释\n\n烟花 $ 1,3,4 $ 一起燃放。\n\n由于 $ 1,3 $ 为同一系列且 $ 1 $ 为主烟花，所以 $ 3 $ 烟花的关系一不会生效。\n\n故总的美观度为 $ 3 \\times 3-2=7 $ 。\n\n### 数据规模\n\n**本题采用捆绑测试**\n\n| Subtask | $ m $  | 分值 |\n| :----------: | :----------: | :----------: |\n| $ 0 $ | $ =0 $ | $ 30 $ |\n| $ 1 $ | 无特殊限制 | $ 70 $ |\n\n对于 $ 100\\% $ 的数据，满足 $ 0 \\leq m \\leq n \\leq 5 \\times 10^5,0 \\leq b_i \\leq v_i \\leq 10^{12},1 \\leq a_i \\leq n,a_i \\neq i $ 。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DAOI R1」Fireworks", "background": "> 俯首，满城灯火交辉。\n> \n> 回眸，漫天流星逆飞。", "description": "人们以前通常会放烟花，而每个烟花都有它本身的美观度。\n\n$ \\texttt{Iratis} $ 想要在户外放烟花，但是有烟花之间有一些关系：\n\n- 关系一：对于烟花 $ x $ ，有一个对应烟花 $ a_x $ ，若烟花 $ x $ 与烟花 $ a_x $ 一起燃放，就会使烟花 $ x $ 的美观度减少 $ b_x $ 。\n\n- 关系二：有一些烟花是一个系列，必须同时燃放，其中有一个是主烟花，**每个烟花只会属于一个系列**。\n\n特别地，若有一系列 $ S_1 $ （主烟花为 $ p_1 $ ） 。 $ p_1 $ 关系一所对应的烟花为系列 $ S_2 $ 中的烟花。而 $ S_1 $ 系列中的其他烟花与非 $ S_1,S_2 $ 系列中的烟花形成关系一。**那么对于这条关系一，它不会降低美观度。**\n\n$ \\texttt{Iratis} $ 家里有 $ n $ 个烟花，他希望选择其中的一些烟花燃放，使得这些**烟花的美观度总和**最大。", "inputFormat": "第一行包含两个整数 $ n,m $，分别描述烟花的个数和和关系二的个数。\n\n接下来 $ n $ 行，每行三个整数 $ v_i,a_i,b_i $ ，分别是这个烟花的美观度、关系一对应的烟花、关系一降低的美观度。\n\n最后 $ m $ 行，每行先读入两个数 $ p_i,k_i $，然后是 $ k_i $ 个数，表示这 $ k_i $ 个烟花是一个系列，编号为 $ p_i $ 的烟花为主烟花。", "outputFormat": "输出一行一个整数，表示烟花的美观度总和。", "hint": "### 样例解释\n#### 样例1解释\n\n烟花 $ 1,2,3 $ 一起燃放，最大美观度为 $ 2+2+2-1-1-1=3 $ 。\n\n#### 样例2解释\n\n烟花 $ 1,3,4 $ 一起燃放。\n\n由于 $ 1,3 $ 为同一系列且 $ 1 $ 为主烟花，所以 $ 3 $ 烟花的关系一不会生效。\n\n故总的美观度为 $ 3 \\times 3-2=7 $ 。\n\n### 数据规模\n\n**本题采用捆绑测试**\n\n| Subtask | $ m $  | 分值 |\n| :----------: | :----------: | :----------: |\n| $ 0 $ | $ =0 $ | $ 30 $ |\n| $ 1 $ | 无特殊限制 | $ 70 $ |\n\n对于 $ 100\\% $ 的数据，满足 $ 0 \\leq m \\leq n \\leq 5 \\times 10^5,0 \\leq b_i \\leq v_i \\leq 10^{12},1 \\leq a_i \\leq n,a_i \\neq i $ 。 ", "locale": "zh-CN"}}}
{"pid": "P8289", "type": "P", "difficulty": 4, "samples": [["5\n#define BEGIN {\n#define END }\n#define INTEGER int\nclass C BEGIN INTEGER x; END;\nINTEGER main() BEGIN C c; END\n", "\n\n\nclass C { int x; };\nint main() { C c; }\n"], ["见附件中的 preprocessor/preprocessor2.in", "见附件中的 preprocessor/preprocessor2.ans"], ["见附件中的 preprocessor/preprocessor3.in", "见附件中的 preprocessor/preprocessor3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "搜索", "各省省选", "2022", "O2优化", "深度优先搜索 DFS"], "title": "[省选联考 2022] 预处理器", "background": "", "description": "宏是 C/C++ 语言的一项特性，它根据预先定义的规则进行文本替换（也被称为 “宏展开”），能够实现定义常量、简化代码重复输入等功能。例如：\n\n```cpp\n#define PI 3.14159\ndouble area = PI * r * r;\n```\n\n以上代码经过宏展开后变为：\n\n```cpp\n\ndouble area = 3.14159 * r * r;\n```\n\n其中，宏定义命令变成了空行，而其他行中的宏被展开成了规则定义的文本。\n\nC/C++ 语言代码在编译时对宏的处理由**预处理器**完成。你的任务是实现一个简化版的预处理器，要求如下：\n\n- 代码由**行**组成，每行除行末的换行符外，均由可打印 ASCII 字符（ASCII 码范围 $32\\sim 126$）组成。每行要么是**预处理命令**（以 `#` 开头），要么是**普通文本**（其他情况）。\n\n- 预处理器逐行处理代码，\n\t- 如果是预处理命令，执行该命令，并输出一个空行。\n    - 如果是普通文本，对其进行宏展开并输出结果。\n- 预处理命令有两种，分别是宏定义命令 `#define` 和取消宏定义命令 `#undef`。\n\t- 宏定义命令的格式为 `#define <name> <content>`，其中第一部分 `#define` 是命令名，第二部分 `<name>` 是要定义的宏的名字，第三部分 `<content>` 是要定义的宏的展开内容。\n    - 取消宏定义命令的格式为 `#undef <name>`，其中第一部分 `#undef` 是命令名，第二部分 `<name>` 是要取消的宏的名字。\n    \n    以上两种预处理命令中，相邻两部分之间都严格用一个空格分隔。`<name>` 是由大小写字母和数字以及下划线组成的**标识符**（一个或多个字符），`<content>` 可以包含任意可打印 ASCII 字符（零个或多个字符）。一个宏定义的**有效范围**是从它定义所在行开始到后续最近的宏名匹配的取消定义所在行为止（如果没有对应的取消定义，则有效范围一直覆盖到文件结束）。\n    \n对普通文本进行宏展开时，将一行文本中每段**连续极长**的大小写字母和数字以及下划线视为标识符（而不是其中一部分），其余为**其他字符**。从左到右依次对文本中的标识符进行宏展开：\n    \n1. 如果该标识符是有效的宏名，则用对应的展开内容替换它，此时该宏名进入正在展开的状态，直到本流程结束；否则原样保留宏名。例如，若宏 `A` 定义为 `b`，则文本 `A` 展开结果为 `b`（发生替换），文本 `B` 展开结果仍然为 `B`（未定义，不替换），文本 `AA` 展开结果仍然为 `AA`（`AA` 是不同于 `A` 的另一个标识符，未定义），而文本 `A*B` 展开结果为 `b*B`。\n    \n2. 替换发生后，如果展开内容中包含标识符，重复应用以上的展开操作，称为 “多次展开”。例如，若宏 `A` 定义为 `B`，宏 `B` 定义为 `c`，则文本 `A` 的展开结果为 `c`。\n    \n3. 如果待展开的宏名与正在进行展开的某个宏名相同，称为 “递归展开”，此时该宏名不再展开。本规则用来防止无限递归展开。例如，若宏 `A` 定义为 `B+a`，宏 `B` 定义为 `A+b`，则文本 `A` 展开结果为 `A+b+a`，由于最初的 `A` 处于正在展开状态，因此 `A+b+a` 里的 `A` 不再展开。\n\n4. 其他字符原样保留。\n\n注意：出于简化的目的，本题的要求与 C/C++ 语言标准里的描述不完全一致，请以上面的要求为准。最明显的区别是本题只有标识符和其他字符两类词法单元，没有数值、字符串、注释等。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示要处理的代码行数。\n\n接下来的 $n$ 行是要处理的代码。", "outputFormat": "输出 $n$ 行，为输入逐行预处理后的结果。", "hint": "**【数据范围】**\n\n对 $20\\%$ 的数据，不会出现宏定义命令 `#define` 和宏取消定义命令 `#undef`。\n\n对另外 $20\\%$ 的数据，不会出现多次展开的情况，且不会出现宏取消定义命令 `#undef`。\n\n对另外 $20\\%$ 的数据，不会出现多次展开的情况。\n\n对另外 $20\\%$ 的数据，不会出现递归展开的情况。\n\n对其余数据，无特殊限制。\n\n对 $100\\%$ 的数据，$n \\leq 100$，输入的每行字符数都不超过 $100$，且保证输出的每行字符数都不超过 $1000$（字符数均不计行末换行符）。保证输入数据中的预处理命令都是合法的，包含但不限于：\n\n- `#` 字符只会出现在预处理命令所在行的第一个字符的位置，其他任何位置（包括预处理命令和普通文本）都不会出现 `#` 字符。\n- 宏定义和取消定义命令的格式是正确的，严格遵循题面所描述的格式。\n- 同一个宏在取消定义之前不会被再次定义。\n- 要取消定义的宏在之前被定义过且还没有被取消过。\n\n也就是说，**你不需要做任何语法和语义的错误检查**。\n\n**【提示】**\n\n本题进行输入时建议使用 C++ 语言的按行读入字符串功能，示例如下：\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nstring line;\n// 从 cin 读入一行，放入 line 中（换行符被舍弃）\ngetline(cin, line);\n```\n\n也可以使用 C 语言提供的 `fgets` 函数，示例如下：\n\n```cpp\n#include <stdio.h>\n#define MAX_LEN 200\nchar line[MAX_LEN];\n// 从 stdin 读入一行，放入 line 中（包含换行符）\nfgets(line, MAX_LEN, stdin);\n```\n\n**注意**：在读取行数 $n$ 之后可能需要额外读取一行以忽略其后的换行符。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2022] 预处理器", "background": "", "description": "宏是 C/C++ 语言的一项特性，它根据预先定义的规则进行文本替换（也被称为 “宏展开”），能够实现定义常量、简化代码重复输入等功能。例如：\n\n```cpp\n#define PI 3.14159\ndouble area = PI * r * r;\n```\n\n以上代码经过宏展开后变为：\n\n```cpp\n\ndouble area = 3.14159 * r * r;\n```\n\n其中，宏定义命令变成了空行，而其他行中的宏被展开成了规则定义的文本。\n\nC/C++ 语言代码在编译时对宏的处理由**预处理器**完成。你的任务是实现一个简化版的预处理器，要求如下：\n\n- 代码由**行**组成，每行除行末的换行符外，均由可打印 ASCII 字符（ASCII 码范围 $32\\sim 126$）组成。每行要么是**预处理命令**（以 `#` 开头），要么是**普通文本**（其他情况）。\n\n- 预处理器逐行处理代码，\n\t- 如果是预处理命令，执行该命令，并输出一个空行。\n    - 如果是普通文本，对其进行宏展开并输出结果。\n- 预处理命令有两种，分别是宏定义命令 `#define` 和取消宏定义命令 `#undef`。\n\t- 宏定义命令的格式为 `#define <name> <content>`，其中第一部分 `#define` 是命令名，第二部分 `<name>` 是要定义的宏的名字，第三部分 `<content>` 是要定义的宏的展开内容。\n    - 取消宏定义命令的格式为 `#undef <name>`，其中第一部分 `#undef` 是命令名，第二部分 `<name>` 是要取消的宏的名字。\n    \n    以上两种预处理命令中，相邻两部分之间都严格用一个空格分隔。`<name>` 是由大小写字母和数字以及下划线组成的**标识符**（一个或多个字符），`<content>` 可以包含任意可打印 ASCII 字符（零个或多个字符）。一个宏定义的**有效范围**是从它定义所在行开始到后续最近的宏名匹配的取消定义所在行为止（如果没有对应的取消定义，则有效范围一直覆盖到文件结束）。\n    \n对普通文本进行宏展开时，将一行文本中每段**连续极长**的大小写字母和数字以及下划线视为标识符（而不是其中一部分），其余为**其他字符**。从左到右依次对文本中的标识符进行宏展开：\n    \n1. 如果该标识符是有效的宏名，则用对应的展开内容替换它，此时该宏名进入正在展开的状态，直到本流程结束；否则原样保留宏名。例如，若宏 `A` 定义为 `b`，则文本 `A` 展开结果为 `b`（发生替换），文本 `B` 展开结果仍然为 `B`（未定义，不替换），文本 `AA` 展开结果仍然为 `AA`（`AA` 是不同于 `A` 的另一个标识符，未定义），而文本 `A*B` 展开结果为 `b*B`。\n    \n2. 替换发生后，如果展开内容中包含标识符，重复应用以上的展开操作，称为 “多次展开”。例如，若宏 `A` 定义为 `B`，宏 `B` 定义为 `c`，则文本 `A` 的展开结果为 `c`。\n    \n3. 如果待展开的宏名与正在进行展开的某个宏名相同，称为 “递归展开”，此时该宏名不再展开。本规则用来防止无限递归展开。例如，若宏 `A` 定义为 `B+a`，宏 `B` 定义为 `A+b`，则文本 `A` 展开结果为 `A+b+a`，由于最初的 `A` 处于正在展开状态，因此 `A+b+a` 里的 `A` 不再展开。\n\n4. 其他字符原样保留。\n\n注意：出于简化的目的，本题的要求与 C/C++ 语言标准里的描述不完全一致，请以上面的要求为准。最明显的区别是本题只有标识符和其他字符两类词法单元，没有数值、字符串、注释等。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示要处理的代码行数。\n\n接下来的 $n$ 行是要处理的代码。", "outputFormat": "输出 $n$ 行，为输入逐行预处理后的结果。", "hint": "**【数据范围】**\n\n对 $20\\%$ 的数据，不会出现宏定义命令 `#define` 和宏取消定义命令 `#undef`。\n\n对另外 $20\\%$ 的数据，不会出现多次展开的情况，且不会出现宏取消定义命令 `#undef`。\n\n对另外 $20\\%$ 的数据，不会出现多次展开的情况。\n\n对另外 $20\\%$ 的数据，不会出现递归展开的情况。\n\n对其余数据，无特殊限制。\n\n对 $100\\%$ 的数据，$n \\leq 100$，输入的每行字符数都不超过 $100$，且保证输出的每行字符数都不超过 $1000$（字符数均不计行末换行符）。保证输入数据中的预处理命令都是合法的，包含但不限于：\n\n- `#` 字符只会出现在预处理命令所在行的第一个字符的位置，其他任何位置（包括预处理命令和普通文本）都不会出现 `#` 字符。\n- 宏定义和取消定义命令的格式是正确的，严格遵循题面所描述的格式。\n- 同一个宏在取消定义之前不会被再次定义。\n- 要取消定义的宏在之前被定义过且还没有被取消过。\n\n也就是说，**你不需要做任何语法和语义的错误检查**。\n\n**【提示】**\n\n本题进行输入时建议使用 C++ 语言的按行读入字符串功能，示例如下：\n\n```cpp\n#include <iostream>\n#include <string>\nusing namespace std;\nstring line;\n// 从 cin 读入一行，放入 line 中（换行符被舍弃）\ngetline(cin, line);\n```\n\n也可以使用 C 语言提供的 `fgets` 函数，示例如下：\n\n```cpp\n#include <stdio.h>\n#define MAX_LEN 200\nchar line[MAX_LEN];\n// 从 stdin 读入一行，放入 line 中（包含换行符）\nfgets(line, MAX_LEN, stdin);\n```\n\n**注意**：在读取行数 $n$ 之后可能需要额外读取一行以忽略其后的换行符。", "locale": "zh-CN"}}}
{"pid": "P8290", "type": "P", "difficulty": 6, "samples": [["3 1\n2 3\n3 5\n4 6\n1 2\n1 3\n", "14\n78\n"], ["见附件中的 tree/tree2.in", "见附件中的 tree/tree2.ans"], ["见附件中的 tree/tree3.in", "见附件中的 tree/tree3.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "各省省选", "2022", "Special Judge", "O2优化", "树形 DP", "拉格朗日插值法"], "title": "[省选联考 2022] 填树", "background": "原题时限为 2s。", "description": "有一棵 $n$ 个节点的无根树，刚开始树上每个节点的权值均为 $0$。KK 想对这棵树进行一些修改，他会任选一个节点作为初始的当前节点，然后重复以下动作：\n\n1. 将当前节点 $i$ 的权值修改为一个**正整数** $x$，需满足 $l_i \\leq x \\leq r_i$。其中 $l_i, r_i$ 是输入中给出的两个正整数。\n2. 结束修改过程，或移动到一个与当前节点相邻的权值为 $0$ 的节点（如果不存在这样的节点，则必须结束修改过程）。\n\n现在 KK 有两个问题：\n\n1. 在修改结束后，可以得到多少棵不同的树，满足树上**非零权值**的最大值和最小值的差小于等于 $K$？其中 $K$ 是输入中给出的一个正整数。\n\n2. 这些满足条件的树的权值之和为多少？（树的权值定义为这棵树上所有节点的权值之和）\n\n你需要输出这两个问题的答案模 $10^9 + 7$。我们认为两棵树不同当且仅当至少存在一个节点的权值不同。\n\n温馨提示：\n\n1. KK 至少会修改一个节点（初始节点）。\n2. 实质上 KK 会修改树上的任意一条路径，最后需要满足这条路径上的点的权值最大值和最小值之差小于等于 $K$。", "inputFormat": "第一行两个正整数 $n, K$，表示节点数和权值差的最大值。\n\n接下来 $n$ 行，每行两个正整数 $l_i, r_i$，表示第 $i$ 个节点修改后权值的最小值和最大值。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示节点 $u_i$ 和 $v_i$ 之间有一条边。数据保证形成一棵树。", "outputFormat": "输出两行，每行一个整数，分别表示第一问和第二问的答案模 $10^9 + 7$ 的值。注意，如果你不打算回答第二问，请在第二行任意输出一个整数。如果输出文件只有一行，则可能会因格式不符合要求被判 $0$ 分。", "hint": "**【样例解释 #1】**\n\n| | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ | $9$ | $10$ | $11$ | $12$ | $13$ | $14$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| 节点 $1$ | $2$ | $3$ | $2$ | $3$ | $3$ | $3$ | $3$ | $3$ | $0$ | $0$ | $0$ | $0$ | $0$ | $0$ |\n| 节点 $2$ | $0$ | $0$ | $3$ | $3$ | $4$ | $0$ | $4$ | $3$ | $3$ | $4$ | $5$ | $0$ | $0$ | $0$ |\n| 节点 $3$ | $0$ | $0$ | $0$ | $0$ | $0$ | $4$ | $4$ | $4$ | $0$ | $0$ | $0$ | $4$ | $5$ | $6$ |\n\n表格中列出了全部 $14$ 棵满足条件的树，将这些树的权值加起来为 $78$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 200$，$1 \\leq l_i \\leq r_i \\leq {10}^9$，$1 \\leq K \\leq {10}^9$。\n\n| 测试点 | $n \\leq $ | $r_i, K \\leq$ | 其他限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $5$ | $10$ | 无 |\n| $2$ | $30$ | $10^9$ | 无 |\n| $3$ | $30$ | $10^9$ | 无 |\n| $4$ | $30$ | $500$ | 无 |\n| $5$ | $200$ | $200000$ | 无 |\n| $6$ | $200$ | $200000$ | 无 |\n| $7$ | $200$ | $10^9$ | A |\n| $8$ | $200$ | $10^9$ | A |\n| $9$ | $200$ | $10^9$ | 无 |\n| $10$ | $200$ | $10^9$ | 无 |\n\n特殊限制 A：所有点构成一条链, 编号为 $i$ 的点和编号为 $i + 1$ 的点之间有连边\n\n**【评分方式】**\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。其中回答正确第一问可得 $7$ 分，回答正确第二问可得 $3$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2022] 填树", "background": "原题时限为 2s。", "description": "有一棵 $n$ 个节点的无根树，刚开始树上每个节点的权值均为 $0$。KK 想对这棵树进行一些修改，他会任选一个节点作为初始的当前节点，然后重复以下动作：\n\n1. 将当前节点 $i$ 的权值修改为一个**正整数** $x$，需满足 $l_i \\leq x \\leq r_i$。其中 $l_i, r_i$ 是输入中给出的两个正整数。\n2. 结束修改过程，或移动到一个与当前节点相邻的权值为 $0$ 的节点（如果不存在这样的节点，则必须结束修改过程）。\n\n现在 KK 有两个问题：\n\n1. 在修改结束后，可以得到多少棵不同的树，满足树上**非零权值**的最大值和最小值的差小于等于 $K$？其中 $K$ 是输入中给出的一个正整数。\n\n2. 这些满足条件的树的权值之和为多少？（树的权值定义为这棵树上所有节点的权值之和）\n\n你需要输出这两个问题的答案模 $10^9 + 7$。我们认为两棵树不同当且仅当至少存在一个节点的权值不同。\n\n温馨提示：\n\n1. KK 至少会修改一个节点（初始节点）。\n2. 实质上 KK 会修改树上的任意一条路径，最后需要满足这条路径上的点的权值最大值和最小值之差小于等于 $K$。", "inputFormat": "第一行两个正整数 $n, K$，表示节点数和权值差的最大值。\n\n接下来 $n$ 行，每行两个正整数 $l_i, r_i$，表示第 $i$ 个节点修改后权值的最小值和最大值。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示节点 $u_i$ 和 $v_i$ 之间有一条边。数据保证形成一棵树。", "outputFormat": "输出两行，每行一个整数，分别表示第一问和第二问的答案模 $10^9 + 7$ 的值。注意，如果你不打算回答第二问，请在第二行任意输出一个整数。如果输出文件只有一行，则可能会因格式不符合要求被判 $0$ 分。", "hint": "**【样例解释 #1】**\n\n| | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ | $9$ | $10$ | $11$ | $12$ | $13$ | $14$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| 节点 $1$ | $2$ | $3$ | $2$ | $3$ | $3$ | $3$ | $3$ | $3$ | $0$ | $0$ | $0$ | $0$ | $0$ | $0$ |\n| 节点 $2$ | $0$ | $0$ | $3$ | $3$ | $4$ | $0$ | $4$ | $3$ | $3$ | $4$ | $5$ | $0$ | $0$ | $0$ |\n| 节点 $3$ | $0$ | $0$ | $0$ | $0$ | $0$ | $4$ | $4$ | $4$ | $0$ | $0$ | $0$ | $4$ | $5$ | $6$ |\n\n表格中列出了全部 $14$ 棵满足条件的树，将这些树的权值加起来为 $78$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 200$，$1 \\leq l_i \\leq r_i \\leq {10}^9$，$1 \\leq K \\leq {10}^9$。\n\n| 测试点 | $n \\leq $ | $r_i, K \\leq$ | 其他限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $5$ | $10$ | 无 |\n| $2$ | $30$ | $10^9$ | 无 |\n| $3$ | $30$ | $10^9$ | 无 |\n| $4$ | $30$ | $500$ | 无 |\n| $5$ | $200$ | $200000$ | 无 |\n| $6$ | $200$ | $200000$ | 无 |\n| $7$ | $200$ | $10^9$ | A |\n| $8$ | $200$ | $10^9$ | A |\n| $9$ | $200$ | $10^9$ | 无 |\n| $10$ | $200$ | $10^9$ | 无 |\n\n特殊限制 A：所有点构成一条链, 编号为 $i$ 的点和编号为 $i + 1$ 的点之间有连边\n\n**【评分方式】**\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。其中回答正确第一问可得 $7$ 分，回答正确第二问可得 $3$ 分。", "locale": "zh-CN"}}}
{"pid": "P8291", "type": "P", "difficulty": 7, "samples": [["2\n4 15\nbuiltin_clz\nbuiltin_ctz\njinkela\nOrzTourist\nbuiltin_clz MengXin QiuZhu\nbuiltin_ctz builtin_clz louxia\njinkela builtin_ctz louxia\nbuiltin_ctz builtin_clz loushang\nbuiltin_clz BieMoZheng YaoXueShu\nOrzTourist builtin_clz louxia\nOrzTourist OrzTourist louxia\nbuiltin_clz Iam Angry!\nbuiltin_clz builtin_clz loushang\nbuiltin_clz builtin_clz louxia\nbuiltin_clz builtin_clz loushang\nbuiltin_clz builtin_clz louxia\nbuiltin_ctz Xue Shu\njinkela Xue Shu\nOrzTourist Xue Shu\n1 9\nbuiltin_clz\nbuiltin_clz builtin_clz loushang\nbuiltin_clz builtin_clz loushang\nbuiltin_clz builtin_clz louxia\nbuiltin_clz builtin_clz Loushang\nbuiltin_clz builtin_clz LOUSHANG\nbuiltin_clz Builtin_clz loushang\nbuiltin_clz loushang louxia\nbuiltin_clz builtin_clz builtin_clz\nbuiltin_clz loushang builtin_clz\n", "9\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n3\n8 1 2 7 9 3 6 4 5\n"], ["见附件中的 community/community2.in", "见附件中的 community/community2.ans"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "网络流", "Special Judge", "O2优化"], "title": "[省选联考 2022] 学术社区", "background": "**小 I 的温馨提示：在题目描述中有形式化的题面，你可以选择跳过题目背景。同时请仔细将本题的除题目背景以外的所有内容进行完整阅读后再进行做题。**\n\n小 I 是一个喜欢 OI 的选手，不过，与其说小 I 喜欢 OI，不如说小 I 喜欢的是他最经常使用的 OJ——FCCOJ——上的趣味功能：学术社区。虽说名字叫学术社区，但小 I 和网友们能够谈论的东西远不止学术。每天学术社区里总会出现不少吸引小 I 注意的帖子。今天小 I 在学术社区冲浪时发现了一个这样的帖子：\n\n> `builtin_clz`：萌新求助，学术社区这题，本机 AC 提交 RE\n> \n> `builtin_ctz`：`builtin_clz` 楼下\n> \n> `jinkela`：`builtin_ctz` 楼下\n> \n> `builtin_ctz`：`builtin_clz` 楼上\n> \n> `builtin_clz`：能不能别魔怔了，大家正经回答问题\n> \n> `OrzTourist`：`builtin_clz` 楼下\n> \n> `OrzTourist`：`OrzTourist` 楼下\n> \n> `builtin_clz`：怎么没有人回答问题，我生气了！\n> \n> `builtin_clz`：`builtin_clz` 楼上\n> \n> `builtin_clz`：`builtin_clz` 楼下\n> \n> `builtin_clz`：`builtin_clz` 楼上\n> \n> `builtin_clz`：`builtin_clz` 楼下\n> \n> ……\n\n虽然这个名叫 `builtin_clz` 的网友因为没有人回答他的学术问题被激怒了，但这个有趣的发言方式让小 I 乐呵了许久，这说明人类的悲欢并不相通。不过当小 I 刷新界面想要往下浏览大家的回复时，却发现学术社区的管理员因为这个帖子过于灌水把它删除了。\n\n为了恢复这个有趣的帖子，小 I 对着网页缓存倒腾了许久，还原出了这个帖子的每条消息。然而因为神秘原因，消息的顺序被打乱了，且缓存中没有每条消息发送的时间，因而小 I 没有办法还原原始帖子中消息的顺序。\n\n秉承 “遇到困难睡大觉” 精神的小 I 决定随便给帖子里的消息排个顺序，不过深受 “`XXX` 楼上” “`XXX` 楼下” 这种发言形式吸引的小 I 还是希望重排之后有尽可能多的这种形式的消息的表达是符合帖子的实际情况的。然而小 I 是一个只会水社区不会做题的 OI 选手，所以小 I 求助于你。\n\n当然了，小 I 知道直接将帖子中的原始信息丢给你对你来说是不方便的，所以他对信息进行了一些规范化处理，详见题目描述中的形式化题意。**同时由于学术社区的特殊规定，帖子中的消息满足一定特殊限制，详见题目描述最后。**", "description": "**以下涉及的所有字符串判等操作都对大小写敏感，例如 `1oushang`、`Loushang`、`LOUSHANG` 是互不相同的字符串。**\n\n小 I 正在整理学术社区中的一个帖子。帖子中一共有 $N$ 个网友发过消息，他们的网名分别为 $n_1, n_2, \\ldots, n_N$。帖子中总共有 $M$ 条消息，对于第 $i$ 条消息，我们用三个字符串 $s_{i,1}, s_{i,2}, s_{i,3}$ 构成的三元组描述它，其中 $s_{i,1}$ 表示这条消息发出者的网名，而 $s_{i,2}$ 和 $s_{i,3}$ 描述这条消息的内容。\n\n对于第 $i$ 条消息，我们通过如下方式定义其属于**楼下型消息**、**楼上型消息**、**学术型消息**中的哪一种：\n\n- 若字符串 $s_{i, 3}$ 为 `louxia`，且 $s_{i, 2}$ 恰好与给出的某个网名相同（注意 $s_{i,2} = s_{i,1}$ 是允许的），则称这条消息是**楼下型消息**，$s_{i,2}$ 对应这条消息提到的网友；\n- 若字符串 $s_{i,3}$ 为 `loushang`，且 $s_{i,2}$ 恰好与给出的某个网名相同（注意 $s_{i,2} = s_{i,1}$ 是允许的），则称这条消息是**楼上型消息**，$s_{i,2}$ 对应这条消息提到的网友；\n- 若以上两个条件都不满足，则称这条消息是**学术消息**。\n\n定义一个对所有消息的重排方案为一个 $1$ 到 $M$ 的排列 $a_1, a_2, a_3, \\ldots, a_M$，表示第一条消息是 $(s_{a_1,1}, s_{a_1,2}, s_{a_1,3})$，第二条消息是 $(s_{a_2,1}, s_{a_2,2}, s_{a_2,3})$，依此类推。\n\n对于一个重排方案 $a_1, a_2, a_3, \\ldots, a_M$ 中的第 $i$（$1 \\le i \\le M$）条消息 $(s_{a_i,1}, s_{a_i,2}, s_{a_i,3})$，如下定义其是否是**符合实际情况的**：\n\n- 若这条消息是**楼下型消息**，则这条消息是**符合实际情况的**当且仅当 $i \\ne 1$ 且 $s_{a_{i - 1}, 1} = s_{a_i, 2}$，即上一条消息存在且它的发出者与这条消息提到的网友一致。\n- 若这条消息是**楼上型消息**，则这条消息是**符合实际情况的**当且仅当 $i \\ne M$ 且 $s_{a_{i + 1}, 1} = s_{a_i, 2}$，即下一条消息存在且它的发出者与这条消息提到的网友一致。\n- 若这条消息是**学术消息**，则无论如何这条消息一定不是符合实际情况的，这是因为小 I 只想灌水不想学术。\n\n在以上定义下，小 I 希望找到一个重排方案，使得该重排方案中符合实际情况的消息数量最多。你需要帮他找到这个方案以及这个方案中符合实际情况的消息数量。\n\n**为了方便你的解题，小 I 还告诉了你帖子中消息的一个特殊限制：因为学术社区会禁言在社区中只灌水不学术的人，所以在小 I 给出的帖子里，每一个在帖子中发过言的人都一定会在帖子中发出至少一条学术消息。**", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T$ 表示测试数据组数，接下来分别输入 $T$ 组数据。\n\n对于每组测试数据，第一行两个整数 $N, M$ 分别表示帖子中发过消息的网友数量以及帖子的消息数量。\n\n接下来 $N$ 行每行一个字符串 $n$ 表示在帖子中发过消息的一个网友的网名。保证每个测试数据中输入的 $N$ 个网友的网名两两不同。\n\n接下来 $M$ 行每行三个字符串 $s_1, s_2, s_3$ 描述一条消息，相邻的字符串之间用一个空格分隔，其中 $s_1$ 一定与输入中某个网友的网名相等。\n\n输入的所有字符串仅由大小写英文字母、下划线（`_`）、英文问号（`?`）、英文感叹号（`!`）和英文句号（`.`）构成，且长度不超过 $12$。\n\n对于每组测试数据，保证输入的 $N$ 个网名都发出过至少一条消息，**且至少发出过一条学术消息**。\n\n同一组测试数据中可能存在多条消息内容完全一致，此时应将他们视为**多条**消息。", "outputFormat": "对于每组测试数据输出两行。\n\n第一行输出一个非负整数表示所有重排方案中最大的符合实际情况的消息数量。\n\n第二行输出 $M$ 个整数 $a_1, a_2, \\ldots, a_m$，表示符合实际情况的消息最多的重排方案。\n\n若有多种合法的重排方案，**输出任意一个即可**。", "hint": "**【样例解释 #1】**\n\n第一个测试数据与题目背景中给出的例子基本一致，而不同的点在于：为了满足每个人至少发出一条学术消息的要求，在该组数据输入的最后有几条额外的学术消息。\n\n第二个测试数据中，输入的前两条消息是楼上型消息，第三条消息是楼下型消息，其他消息是学术消息。\n\n**【样例 #3】**\n\n见附件中的 `community/community3.in` 与 `community/community3.ans`。\n\n该组样例满足数据范围中的特殊性质 A、特殊性质 B、特殊性质 C。\n\n**【样例 #4】**\n\n见附件中的 `community/community4.in` 与 `community/community4.ans`。\n\n该组样例满足数据范围中的特殊性质 C。\n\n**【数据范围】**\n\n设 $\\sum M$ 为单个测试点中所有测试数据的 $M$ 的和。\n\n对于所有测试点，$1 \\le T \\le 100$，$1 \\le N \\le M \\le 77777$，$1 \\le \\sum M \\le 2.5 \\times {10}^5$。\n\n| $T \\le$ | $M \\le$ | $\\sum M \\le$ | 测试点编号 | 特殊性质 A | 特殊性质 B | 特殊性质 C |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| $5$ | $10$ | $50$ | $1$ | 无 | 无 | 无 |\n| $10$ | $16$ | $160$ | $2$ | 无 | 无 | 无 |\n| $30$ | $2222$ | $15000$ | $3 \\sim 4$ | 有 | 有 | 有 |\n| $30$ | $2222$ | $15000$ | $5 \\sim 6$ | 有 | 无 | 有 |\n| $30$ | $2222$ | $15000$ | $7 \\sim 9$ | 无 | 有 | 有 |\n| $30$ | $2222$ | $15000$ | $10 \\sim 11$ | 无 | 无 | 有 |\n| $30$ | $2222$ | $15000$ | $12 \\sim 13$ | 无 | 无 | 无 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $14 \\sim 15$ | 有 | 有 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $16$ | 有 | 无 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $17 \\sim 19$ | 无 | 有 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $20 \\sim 22$ | 无 | 无 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $23 \\sim 25$ | 无 | 无 | 无 |\n\n**注意：为了阅读方便，测试点编号在表格中的第四列。**\n\n特殊性质 A：没有楼上型消息。**注意：这不意味着 $\\bm{s_3}$ 不等于 `loushang`。**\n\n特殊性质 B：对于每组测试数据，存在一个重排方案，使得每一条楼上型消息和楼下型消息都是符合实际情况的。\n\n特殊性质 C：对于每组测试数据，若存在一条消息是 $s_1$ $s_2$ `loushang`，其中 $s_1, s_2$ 为任意字符串，则该组数据中一定不存在一条消息是 $s_2$ $s_1$ `louxia`。\n\n**【评分方式】**\n\n若一个测试点内所有测试数据的符合实际情况的消息数量都正确，你将获得该测试点 $50 \\%$ 的分数；在此基础上，若一个测试点内所有测试数据的重排方案都正确，你将获得该测试点的所有分数。需要注意的是，**如果你只希望获得 $\\bm{50 \\%}$ 的分数，你也要保证在每组测试数据的第二行输出一个 $\\bm{1}$ 到 $\\bm{M}$ 的排列，否则实际分数与期望分数可能出现偏差**。\n\n**【提示】**\n\n因为这对你可能很重要，所以小 I 再一次强调：**因为学术社区会禁言在社区中只灌水不学术的人，所以在小 I 给出的帖子里，每一个在帖子中发过言的人都一定会在帖子中发出至少一条学术消息**。\n\n本题输入规模较大，请使用较为快速的输入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2022] 学术社区", "background": "**小 I 的温馨提示：在题目描述中有形式化的题面，你可以选择跳过题目背景。同时请仔细将本题的除题目背景以外的所有内容进行完整阅读后再进行做题。**\n\n小 I 是一个喜欢 OI 的选手，不过，与其说小 I 喜欢 OI，不如说小 I 喜欢的是他最经常使用的 OJ——FCCOJ——上的趣味功能：学术社区。虽说名字叫学术社区，但小 I 和网友们能够谈论的东西远不止学术。每天学术社区里总会出现不少吸引小 I 注意的帖子。今天小 I 在学术社区冲浪时发现了一个这样的帖子：\n\n> `builtin_clz`：萌新求助，学术社区这题，本机 AC 提交 RE\n> \n> `builtin_ctz`：`builtin_clz` 楼下\n> \n> `jinkela`：`builtin_ctz` 楼下\n> \n> `builtin_ctz`：`builtin_clz` 楼上\n> \n> `builtin_clz`：能不能别魔怔了，大家正经回答问题\n> \n> `OrzTourist`：`builtin_clz` 楼下\n> \n> `OrzTourist`：`OrzTourist` 楼下\n> \n> `builtin_clz`：怎么没有人回答问题，我生气了！\n> \n> `builtin_clz`：`builtin_clz` 楼上\n> \n> `builtin_clz`：`builtin_clz` 楼下\n> \n> `builtin_clz`：`builtin_clz` 楼上\n> \n> `builtin_clz`：`builtin_clz` 楼下\n> \n> ……\n\n虽然这个名叫 `builtin_clz` 的网友因为没有人回答他的学术问题被激怒了，但这个有趣的发言方式让小 I 乐呵了许久，这说明人类的悲欢并不相通。不过当小 I 刷新界面想要往下浏览大家的回复时，却发现学术社区的管理员因为这个帖子过于灌水把它删除了。\n\n为了恢复这个有趣的帖子，小 I 对着网页缓存倒腾了许久，还原出了这个帖子的每条消息。然而因为神秘原因，消息的顺序被打乱了，且缓存中没有每条消息发送的时间，因而小 I 没有办法还原原始帖子中消息的顺序。\n\n秉承 “遇到困难睡大觉” 精神的小 I 决定随便给帖子里的消息排个顺序，不过深受 “`XXX` 楼上” “`XXX` 楼下” 这种发言形式吸引的小 I 还是希望重排之后有尽可能多的这种形式的消息的表达是符合帖子的实际情况的。然而小 I 是一个只会水社区不会做题的 OI 选手，所以小 I 求助于你。\n\n当然了，小 I 知道直接将帖子中的原始信息丢给你对你来说是不方便的，所以他对信息进行了一些规范化处理，详见题目描述中的形式化题意。**同时由于学术社区的特殊规定，帖子中的消息满足一定特殊限制，详见题目描述最后。**", "description": "**以下涉及的所有字符串判等操作都对大小写敏感，例如 `1oushang`、`Loushang`、`LOUSHANG` 是互不相同的字符串。**\n\n小 I 正在整理学术社区中的一个帖子。帖子中一共有 $N$ 个网友发过消息，他们的网名分别为 $n_1, n_2, \\ldots, n_N$。帖子中总共有 $M$ 条消息，对于第 $i$ 条消息，我们用三个字符串 $s_{i,1}, s_{i,2}, s_{i,3}$ 构成的三元组描述它，其中 $s_{i,1}$ 表示这条消息发出者的网名，而 $s_{i,2}$ 和 $s_{i,3}$ 描述这条消息的内容。\n\n对于第 $i$ 条消息，我们通过如下方式定义其属于**楼下型消息**、**楼上型消息**、**学术型消息**中的哪一种：\n\n- 若字符串 $s_{i, 3}$ 为 `louxia`，且 $s_{i, 2}$ 恰好与给出的某个网名相同（注意 $s_{i,2} = s_{i,1}$ 是允许的），则称这条消息是**楼下型消息**，$s_{i,2}$ 对应这条消息提到的网友；\n- 若字符串 $s_{i,3}$ 为 `loushang`，且 $s_{i,2}$ 恰好与给出的某个网名相同（注意 $s_{i,2} = s_{i,1}$ 是允许的），则称这条消息是**楼上型消息**，$s_{i,2}$ 对应这条消息提到的网友；\n- 若以上两个条件都不满足，则称这条消息是**学术消息**。\n\n定义一个对所有消息的重排方案为一个 $1$ 到 $M$ 的排列 $a_1, a_2, a_3, \\ldots, a_M$，表示第一条消息是 $(s_{a_1,1}, s_{a_1,2}, s_{a_1,3})$，第二条消息是 $(s_{a_2,1}, s_{a_2,2}, s_{a_2,3})$，依此类推。\n\n对于一个重排方案 $a_1, a_2, a_3, \\ldots, a_M$ 中的第 $i$（$1 \\le i \\le M$）条消息 $(s_{a_i,1}, s_{a_i,2}, s_{a_i,3})$，如下定义其是否是**符合实际情况的**：\n\n- 若这条消息是**楼下型消息**，则这条消息是**符合实际情况的**当且仅当 $i \\ne 1$ 且 $s_{a_{i - 1}, 1} = s_{a_i, 2}$，即上一条消息存在且它的发出者与这条消息提到的网友一致。\n- 若这条消息是**楼上型消息**，则这条消息是**符合实际情况的**当且仅当 $i \\ne M$ 且 $s_{a_{i + 1}, 1} = s_{a_i, 2}$，即下一条消息存在且它的发出者与这条消息提到的网友一致。\n- 若这条消息是**学术消息**，则无论如何这条消息一定不是符合实际情况的，这是因为小 I 只想灌水不想学术。\n\n在以上定义下，小 I 希望找到一个重排方案，使得该重排方案中符合实际情况的消息数量最多。你需要帮他找到这个方案以及这个方案中符合实际情况的消息数量。\n\n**为了方便你的解题，小 I 还告诉了你帖子中消息的一个特殊限制：因为学术社区会禁言在社区中只灌水不学术的人，所以在小 I 给出的帖子里，每一个在帖子中发过言的人都一定会在帖子中发出至少一条学术消息。**", "inputFormat": "**本题有多组测试数据**。第一行一个整数 $T$ 表示测试数据组数，接下来分别输入 $T$ 组数据。\n\n对于每组测试数据，第一行两个整数 $N, M$ 分别表示帖子中发过消息的网友数量以及帖子的消息数量。\n\n接下来 $N$ 行每行一个字符串 $n$ 表示在帖子中发过消息的一个网友的网名。保证每个测试数据中输入的 $N$ 个网友的网名两两不同。\n\n接下来 $M$ 行每行三个字符串 $s_1, s_2, s_3$ 描述一条消息，相邻的字符串之间用一个空格分隔，其中 $s_1$ 一定与输入中某个网友的网名相等。\n\n输入的所有字符串仅由大小写英文字母、下划线（`_`）、英文问号（`?`）、英文感叹号（`!`）和英文句号（`.`）构成，且长度不超过 $12$。\n\n对于每组测试数据，保证输入的 $N$ 个网名都发出过至少一条消息，**且至少发出过一条学术消息**。\n\n同一组测试数据中可能存在多条消息内容完全一致，此时应将他们视为**多条**消息。", "outputFormat": "对于每组测试数据输出两行。\n\n第一行输出一个非负整数表示所有重排方案中最大的符合实际情况的消息数量。\n\n第二行输出 $M$ 个整数 $a_1, a_2, \\ldots, a_m$，表示符合实际情况的消息最多的重排方案。\n\n若有多种合法的重排方案，**输出任意一个即可**。", "hint": "**【样例解释 #1】**\n\n第一个测试数据与题目背景中给出的例子基本一致，而不同的点在于：为了满足每个人至少发出一条学术消息的要求，在该组数据输入的最后有几条额外的学术消息。\n\n第二个测试数据中，输入的前两条消息是楼上型消息，第三条消息是楼下型消息，其他消息是学术消息。\n\n**【样例 #3】**\n\n见附件中的 `community/community3.in` 与 `community/community3.ans`。\n\n该组样例满足数据范围中的特殊性质 A、特殊性质 B、特殊性质 C。\n\n**【样例 #4】**\n\n见附件中的 `community/community4.in` 与 `community/community4.ans`。\n\n该组样例满足数据范围中的特殊性质 C。\n\n**【数据范围】**\n\n设 $\\sum M$ 为单个测试点中所有测试数据的 $M$ 的和。\n\n对于所有测试点，$1 \\le T \\le 100$，$1 \\le N \\le M \\le 77777$，$1 \\le \\sum M \\le 2.5 \\times {10}^5$。\n\n| $T \\le$ | $M \\le$ | $\\sum M \\le$ | 测试点编号 | 特殊性质 A | 特殊性质 B | 特殊性质 C |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| $5$ | $10$ | $50$ | $1$ | 无 | 无 | 无 |\n| $10$ | $16$ | $160$ | $2$ | 无 | 无 | 无 |\n| $30$ | $2222$ | $15000$ | $3 \\sim 4$ | 有 | 有 | 有 |\n| $30$ | $2222$ | $15000$ | $5 \\sim 6$ | 有 | 无 | 有 |\n| $30$ | $2222$ | $15000$ | $7 \\sim 9$ | 无 | 有 | 有 |\n| $30$ | $2222$ | $15000$ | $10 \\sim 11$ | 无 | 无 | 有 |\n| $30$ | $2222$ | $15000$ | $12 \\sim 13$ | 无 | 无 | 无 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $14 \\sim 15$ | 有 | 有 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $16$ | 有 | 无 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $17 \\sim 19$ | 无 | 有 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $20 \\sim 22$ | 无 | 无 | 有 |\n| $100$ | $77777$ | $2.5 \\times {10}^5$ | $23 \\sim 25$ | 无 | 无 | 无 |\n\n**注意：为了阅读方便，测试点编号在表格中的第四列。**\n\n特殊性质 A：没有楼上型消息。**注意：这不意味着 $\\bm{s_3}$ 不等于 `loushang`。**\n\n特殊性质 B：对于每组测试数据，存在一个重排方案，使得每一条楼上型消息和楼下型消息都是符合实际情况的。\n\n特殊性质 C：对于每组测试数据，若存在一条消息是 $s_1$ $s_2$ `loushang`，其中 $s_1, s_2$ 为任意字符串，则该组数据中一定不存在一条消息是 $s_2$ $s_1$ `louxia`。\n\n**【评分方式】**\n\n若一个测试点内所有测试数据的符合实际情况的消息数量都正确，你将获得该测试点 $50 \\%$ 的分数；在此基础上，若一个测试点内所有测试数据的重排方案都正确，你将获得该测试点的所有分数。需要注意的是，**如果你只希望获得 $\\bm{50 \\%}$ 的分数，你也要保证在每组测试数据的第二行输出一个 $\\bm{1}$ 到 $\\bm{M}$ 的排列，否则实际分数与期望分数可能出现偏差**。\n\n**【提示】**\n\n因为这对你可能很重要，所以小 I 再一次强调：**因为学术社区会禁言在社区中只灌水不学术的人，所以在小 I 给出的帖子里，每一个在帖子中发过言的人都一定会在帖子中发出至少一条学术消息**。\n\n本题输入规模较大，请使用较为快速的输入方式。", "locale": "zh-CN"}}}
{"pid": "P8292", "type": "P", "difficulty": 6, "samples": [["5\n10 2 10 5 46\n4\n2 2 5\n2 2 23\n1 3\n1 23", "27\n16\n0\n16"], ["见附件中的 card/card2.in", "见附件中的 card/card2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "O2优化", "容斥原理", "快速沃尔什变换 FWT"], "title": "[省选联考 2022] 卡牌", "background": "", "description": "小 A 有 $n$ 张卡牌，编号为 $1, 2, \\ldots, n$。每张卡牌上写着一个正整数，第 $i$ 张卡牌上的正整数为 $s_i$。\n\n现在有 $m$ 轮游戏，第 $i$ 轮游戏会给出 $c_i$ 个质数，小 A 需要选择任意多张卡牌，使得这些卡牌上面的正整数的乘积能被该轮游戏给出的每个质数整除。\n\n这当然难不倒小 A，于是他开始思考一个更难的问题，对于每一轮游戏，他有多少种卡牌的选法。\n\n这给小 A 整不会了，于是他只能来求助你，你只需要告诉他答案模 $998244353$ 的值即可。两种选法 A 和 B 互不相同当且仅当存在一张卡牌在 A 中被选择但在 B 中未被选择或者存在一张卡牌在 B 中被选择但在 A 中未被选择。注意：牌面上的数字相同但编号不相同的两张卡牌被视为不同的卡牌。", "inputFormat": "第一行一个正整数 $n$，表示卡牌数量。\n\n第二行 $n$ 个正整数 $s_i$，表示每张卡牌上写的数字。\n\n第三行一个正整数 $m$，表示游戏轮数。\n\n接下来 $m$ 行，每行第一个正整数 $c_i$，表示该轮游戏给出的质数个数，接下来 $c_i$ 个质数 $p_{i, j}$，表示该轮游戏给出的所有质数。数据保证 $\\sum_i c_i \\le 18000$，即所有 $c_i$ 之和不超过 $18000$。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行表示第 $i$ 轮游戏的方案数模 $998244353$ 的值。", "hint": "**【样例解释 #1】**\n\n第一轮游戏：除了以下 $5$ 种方案外其它方案都可行：什么都不选、选 $2$、选 $5$、选 $46$、选 $2$ 和 $46$。所以答案为 $2^5 - 5 = 27$。\n\n第二轮游戏：只要选了 $46$，其它卡牌选不选均可，所以答案为 $2^4 = 16$。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le s_i \\le 2000$，$1 \\le m \\le 1500$，$1 \\le c_i, \\sum_i c_i \\le 18000$，$2 \\le p_{i, j} \\le 2000$。\n\n| 测试点 | $n \\le$ | $m \\le$ | $\\sum_i c_i \\le$ | 其他限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | $10$ | $20$ | $s_i \\le 30$ |\n| $3 \\sim 5$ | $10$ | $20$ | $50$ | 无 |\n| $6 \\sim 8$ | ${10}^6$ | $1500$ | $10000$ | $s_i \\le 30$ |\n| $9 \\sim 11$ | $10000$ | $1000$ | $5000$ | $s_i \\le 500$ |\n| $12 \\sim 13$ | $1000$ | $100$ | $1000$ | 无 |\n| $14 \\sim 17$ | $5000$ | $600$ | $7000$ | 无 |\n| $18 \\sim 20$ | ${10}^6$ | $1500$ | $18000$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2022] 卡牌", "background": "", "description": "小 A 有 $n$ 张卡牌，编号为 $1, 2, \\ldots, n$。每张卡牌上写着一个正整数，第 $i$ 张卡牌上的正整数为 $s_i$。\n\n现在有 $m$ 轮游戏，第 $i$ 轮游戏会给出 $c_i$ 个质数，小 A 需要选择任意多张卡牌，使得这些卡牌上面的正整数的乘积能被该轮游戏给出的每个质数整除。\n\n这当然难不倒小 A，于是他开始思考一个更难的问题，对于每一轮游戏，他有多少种卡牌的选法。\n\n这给小 A 整不会了，于是他只能来求助你，你只需要告诉他答案模 $998244353$ 的值即可。两种选法 A 和 B 互不相同当且仅当存在一张卡牌在 A 中被选择但在 B 中未被选择或者存在一张卡牌在 B 中被选择但在 A 中未被选择。注意：牌面上的数字相同但编号不相同的两张卡牌被视为不同的卡牌。", "inputFormat": "第一行一个正整数 $n$，表示卡牌数量。\n\n第二行 $n$ 个正整数 $s_i$，表示每张卡牌上写的数字。\n\n第三行一个正整数 $m$，表示游戏轮数。\n\n接下来 $m$ 行，每行第一个正整数 $c_i$，表示该轮游戏给出的质数个数，接下来 $c_i$ 个质数 $p_{i, j}$，表示该轮游戏给出的所有质数。数据保证 $\\sum_i c_i \\le 18000$，即所有 $c_i$ 之和不超过 $18000$。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行表示第 $i$ 轮游戏的方案数模 $998244353$ 的值。", "hint": "**【样例解释 #1】**\n\n第一轮游戏：除了以下 $5$ 种方案外其它方案都可行：什么都不选、选 $2$、选 $5$、选 $46$、选 $2$ 和 $46$。所以答案为 $2^5 - 5 = 27$。\n\n第二轮游戏：只要选了 $46$，其它卡牌选不选均可，所以答案为 $2^4 = 16$。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^6$，$1 \\le s_i \\le 2000$，$1 \\le m \\le 1500$，$1 \\le c_i, \\sum_i c_i \\le 18000$，$2 \\le p_{i, j} \\le 2000$。\n\n| 测试点 | $n \\le$ | $m \\le$ | $\\sum_i c_i \\le$ | 其他限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | $10$ | $20$ | $s_i \\le 30$ |\n| $3 \\sim 5$ | $10$ | $20$ | $50$ | 无 |\n| $6 \\sim 8$ | ${10}^6$ | $1500$ | $10000$ | $s_i \\le 30$ |\n| $9 \\sim 11$ | $10000$ | $1000$ | $5000$ | $s_i \\le 500$ |\n| $12 \\sim 13$ | $1000$ | $100$ | $1000$ | 无 |\n| $14 \\sim 17$ | $5000$ | $600$ | $7000$ | 无 |\n| $18 \\sim 20$ | ${10}^6$ | $1500$ | $18000$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8293", "type": "P", "difficulty": 7, "samples": [["2 0 1\n()()\n1 3\n", "1\n"], ["2 1 0\n()()\n1 3\n", "1\n"], ["见附件中的 bracket/bracket3.in", "见附件中的 bracket/bracket3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "树形数据结构", "各省省选", "2022", "O2优化"], "title": "[省选联考 2022] 序列变换", "background": "", "description": "你手里有一个长度为 $2 n$ 的合法括号序列 $s$。$s$ 的每一个左括号有一个权值。\n\n在你眼中，不同的括号序列带来的视觉美感不尽相同。因此，你对具有某一种结构的括号序列特别喜欢，而讨厌具有其他一些结构的括号序列。你希望对 $s$ 进行一些变换，以消除掉一些自己不喜欢的结构。\n\n具体而言，形如 $\\texttt{(A()B)}$（其中 $\\texttt{A}$、$\\texttt{B}$ 均为合法括号序列，下同）的结构是你喜欢的，\n而形如 $\\texttt{(A)(B)}$ 的结构是你不喜欢的。你有两种操作来改变括号之间的位置。\n\n这两种操作如下：\n- 操作 1：交换形如 $\\texttt{p(A)(B)q}$ 的串中 $\\texttt{A}$ 和 $\\texttt{B}$ 之间的两个括号，变换为 $\\texttt{p(A()B)q}$（其中 $\\texttt{p}$、$\\texttt{q}$ 为任意串，可以为空，但不一定分别为合法括号序列，下同），它的代价为 $x$ 乘 $\\texttt{(A)}$ 中第一个左括号的权值加上 $y$ 乘 $\\texttt{(B)}$ 中第一个左括号的权值，其中 $x, y \\in \\{0, 1\\}$；\n- 操作 2：交换形如 $\\texttt{pABq}$ 的串中的 $\\texttt{A}$ 和 $\\texttt{B}$，变换为 $\\texttt{pBAq}$，这个操作不需要代价。\n\n注意：交换的时候所有左括号的权值是跟着这个括号一起交换的。\n\n你现在想知道的是，将 $s$ 变换为一个不包含你不喜欢的结构的括号序列至少需要多少代价？", "inputFormat": "第一行三个整数 $n, x, y$。\n\n第二行一个长度为 $2n$ 的合法括号序列，表示 $s$。\n\n第三行 $n$ 个正整数，其中第 $i$ 个表示左数第 $i$ 个左括号的权值。", "outputFormat": "一行一个整数，表示把 $s$ 变换为一个不包含你不喜欢的结构的括号序列至少需要的代价。", "hint": "**【样例解释 #1】**\n\n最优方案是先使用操作 2 交换两对括号，然后使用操作 1（此时 $\\texttt{A}$、$\\texttt{B}$、$\\texttt{p}$、$\\texttt{q}$ 都是空串）交换中间的两个括号，代价为 $\\texttt{B}$ 左边那个括号的权值，也就是 $1$。最后得到括号序列 $\\texttt{(())}$，不包含你不喜欢的结构。\n\n**【样例解释 #2】**\n\n最优方案是直接使用操作 1，因为此时计算代价的方式不同了，这次只算 $\\texttt{A}$ 左边的那个括号的权值作为代价。\n\n**【数据范围】**\n\n保证 $2 \\le n \\le 400000$，$0 \\le x, y \\le 1$。\n\n保证所有的权值在 $[1, {10}^7]$ 之内。\n\n| 测试点编号 | 特殊限制 |\n|:-:|:-:|\n| $1 \\sim 3$ | $n \\leq 8$ |\n| $4 \\sim 5$ | 所有权值均相等 |\n| $6 \\sim 8$ | $n \\leq 20$ |\n| $9 \\sim 12$ | $x = 0$，$y = 1$ |\n| $13 \\sim 16$ | $n \\le 2000$ |\n| $17 \\sim 25$ | 无特殊限制 |\n\n**【提示】**\n\n称一个字符串 $s$ 为合法括号序列，当且仅当 $s$ 仅由数量相等的字符 $\\texttt{(}$ 和 $\\texttt{)}$ 组成，且对于 $s$ 的每一个前缀而言，其中 $\\texttt{(}$ 的数量均不少于 $\\texttt{)}$ 的数量。特别地，空串也是合法括号序列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2022] 序列变换", "background": "", "description": "你手里有一个长度为 $2 n$ 的合法括号序列 $s$。$s$ 的每一个左括号有一个权值。\n\n在你眼中，不同的括号序列带来的视觉美感不尽相同。因此，你对具有某一种结构的括号序列特别喜欢，而讨厌具有其他一些结构的括号序列。你希望对 $s$ 进行一些变换，以消除掉一些自己不喜欢的结构。\n\n具体而言，形如 $\\texttt{(A()B)}$（其中 $\\texttt{A}$、$\\texttt{B}$ 均为合法括号序列，下同）的结构是你喜欢的，\n而形如 $\\texttt{(A)(B)}$ 的结构是你不喜欢的。你有两种操作来改变括号之间的位置。\n\n这两种操作如下：\n- 操作 1：交换形如 $\\texttt{p(A)(B)q}$ 的串中 $\\texttt{A}$ 和 $\\texttt{B}$ 之间的两个括号，变换为 $\\texttt{p(A()B)q}$（其中 $\\texttt{p}$、$\\texttt{q}$ 为任意串，可以为空，但不一定分别为合法括号序列，下同），它的代价为 $x$ 乘 $\\texttt{(A)}$ 中第一个左括号的权值加上 $y$ 乘 $\\texttt{(B)}$ 中第一个左括号的权值，其中 $x, y \\in \\{0, 1\\}$；\n- 操作 2：交换形如 $\\texttt{pABq}$ 的串中的 $\\texttt{A}$ 和 $\\texttt{B}$，变换为 $\\texttt{pBAq}$，这个操作不需要代价。\n\n注意：交换的时候所有左括号的权值是跟着这个括号一起交换的。\n\n你现在想知道的是，将 $s$ 变换为一个不包含你不喜欢的结构的括号序列至少需要多少代价？", "inputFormat": "第一行三个整数 $n, x, y$。\n\n第二行一个长度为 $2n$ 的合法括号序列，表示 $s$。\n\n第三行 $n$ 个正整数，其中第 $i$ 个表示左数第 $i$ 个左括号的权值。", "outputFormat": "一行一个整数，表示把 $s$ 变换为一个不包含你不喜欢的结构的括号序列至少需要的代价。", "hint": "**【样例解释 #1】**\n\n最优方案是先使用操作 2 交换两对括号，然后使用操作 1（此时 $\\texttt{A}$、$\\texttt{B}$、$\\texttt{p}$、$\\texttt{q}$ 都是空串）交换中间的两个括号，代价为 $\\texttt{B}$ 左边那个括号的权值，也就是 $1$。最后得到括号序列 $\\texttt{(())}$，不包含你不喜欢的结构。\n\n**【样例解释 #2】**\n\n最优方案是直接使用操作 1，因为此时计算代价的方式不同了，这次只算 $\\texttt{A}$ 左边的那个括号的权值作为代价。\n\n**【数据范围】**\n\n保证 $2 \\le n \\le 400000$，$0 \\le x, y \\le 1$。\n\n保证所有的权值在 $[1, {10}^7]$ 之内。\n\n| 测试点编号 | 特殊限制 |\n|:-:|:-:|\n| $1 \\sim 3$ | $n \\leq 8$ |\n| $4 \\sim 5$ | 所有权值均相等 |\n| $6 \\sim 8$ | $n \\leq 20$ |\n| $9 \\sim 12$ | $x = 0$，$y = 1$ |\n| $13 \\sim 16$ | $n \\le 2000$ |\n| $17 \\sim 25$ | 无特殊限制 |\n\n**【提示】**\n\n称一个字符串 $s$ 为合法括号序列，当且仅当 $s$ 仅由数量相等的字符 $\\texttt{(}$ 和 $\\texttt{)}$ 组成，且对于 $s$ 的每一个前缀而言，其中 $\\texttt{(}$ 的数量均不少于 $\\texttt{)}$ 的数量。特别地，空串也是合法括号序列。", "locale": "zh-CN"}}}
{"pid": "P8294", "type": "P", "difficulty": 7, "samples": [["3\n2 1 3\n1 1", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["各省省选", "2022", "O2优化", "树形 DP", "凸完全单调性（wqs 二分）"], "title": "[省选联考 2022] 最大权独立集问题", "background": "", "description": "小 E 喜欢出最大权独立集问题。\n\n接下来，他还想了 $n$ 道最大权独立集问题。\n\n小 E 有 $n$ 个 AI，编号为 $1 \\sim n$。\n\n开始时第 $i$ 个 AI 里面存有 $d_i$ 道小 E 事先出好的最大权独立集问题。\n\n有些 AI 之间可以互相通信，对于所有的 $2 \\leq i \\leq n$ ，第 $i$ 个 AI 可以和第 $c_i$ 个 AI 互相通信。其中 $c_i < i$，且相同的 $c_i$ 出现不超过 $2$ 次。所以，这些 AI 连成了一个二叉树的形状。此外，其他对 AI 不可以互相通信。\n\n小 E 需要暂时断开这些 AI 之间的连接。他只能逐一断开 AI 之间的连接。两个原本能够互相通信的 AI 在断开它们之间的连接之前，会互相交换存在里面的所有题目，具体请见样例。\n\n小 E 希望在断掉所有连接之后，参与交换的题目数量最少。\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在出那些最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $d_i$。\n\n第三行 $n - 1$ 个正整数，第 $i$ 个表示 $c_{i+1}$。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n一种最优的方案是：断开 $1$ 号与 $2$ 号 AI 之间的连接，这样需要交换 $2 + 1 = 3$ 道题；然后断开 $1$ 号与 $3$ 号 AI 之间的连接，这样需要交换 $1 + 3 = 4$ 道题。所以答案是 $7$。\n\n**【数据范围】**\n\n保证 $1 \\le c_i \\le i$，且相同的 $c_i$ 最多出现两次。\n\n保证 $1 \\le d_i \\le {10}^9$。\n\n| 测试点编号 | $n \\leq$ |\n|:-:|:-:|\n| $1 \\sim 3$ | $10$ |\n| $4 \\sim 7$ | $100$ |\n| $8 \\sim 11$ | $500$ |\n| $12 \\sim 16$ | $1000$ |\n| $17 \\sim 25$ | $5000$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2022] 最大权独立集问题", "background": "", "description": "小 E 喜欢出最大权独立集问题。\n\n接下来，他还想了 $n$ 道最大权独立集问题。\n\n小 E 有 $n$ 个 AI，编号为 $1 \\sim n$。\n\n开始时第 $i$ 个 AI 里面存有 $d_i$ 道小 E 事先出好的最大权独立集问题。\n\n有些 AI 之间可以互相通信，对于所有的 $2 \\leq i \\leq n$ ，第 $i$ 个 AI 可以和第 $c_i$ 个 AI 互相通信。其中 $c_i < i$，且相同的 $c_i$ 出现不超过 $2$ 次。所以，这些 AI 连成了一个二叉树的形状。此外，其他对 AI 不可以互相通信。\n\n小 E 需要暂时断开这些 AI 之间的连接。他只能逐一断开 AI 之间的连接。两个原本能够互相通信的 AI 在断开它们之间的连接之前，会互相交换存在里面的所有题目，具体请见样例。\n\n小 E 希望在断掉所有连接之后，参与交换的题目数量最少。\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在出那些最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $d_i$。\n\n第三行 $n - 1$ 个正整数，第 $i$ 个表示 $c_{i+1}$。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n一种最优的方案是：断开 $1$ 号与 $2$ 号 AI 之间的连接，这样需要交换 $2 + 1 = 3$ 道题；然后断开 $1$ 号与 $3$ 号 AI 之间的连接，这样需要交换 $1 + 3 = 4$ 道题。所以答案是 $7$。\n\n**【数据范围】**\n\n保证 $1 \\le c_i \\le i$，且相同的 $c_i$ 最多出现两次。\n\n保证 $1 \\le d_i \\le {10}^9$。\n\n| 测试点编号 | $n \\leq$ |\n|:-:|:-:|\n| $1 \\sim 3$ | $10$ |\n| $4 \\sim 7$ | $100$ |\n| $8 \\sim 11$ | $500$ |\n| $12 \\sim 16$ | $1000$ |\n| $17 \\sim 25$ | $5000$ |", "locale": "zh-CN"}}}
{"pid": "P8295", "type": "P", "difficulty": 1, "samples": [["5 100\n3\n4 100\n3 100\n7 100", "30.00"], ["13 6\n5\n56 679\n35 120\n99 999\n56 73\n37 532", "69.55"], ["100 5\n3\n99 8\n65 14\n78 10", "4642.86"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2012", "COCI（克罗地亚）"], "title": "[COCI 2012/2013 #2] MORTADELA", "background": "**本题分值按 COCI 原题设置，满分 $50$。**", "description": "全国连锁超市（NSC）喜欢吹嘘它们的意式肉肠是全国最低的。\n\n实际上，如果顾客打算在其他连锁超市里找到更便宜的肉肠，那么 NSC 会向其补上差价。\n\nMatej 和 Filip 决定接受这个挑战。他们将会挨个走访 $N$ 家不同连锁店，来找到不仅比 NSC 便宜的熟香肠，而且在市场上最便宜的。如果他们成功了，他们就可以在他们学校附近的 NSC 分店买到最便宜的香肠。\n\nNSC 希望没有人能找到更便宜的香肠，因为所有所有连锁超市（包括 NSC）都以一种复杂的方式表示香肠的价格：$X$ 元 $Y$ 克香肠。\n\n请编写一个程序，给定 NSC 与其余 $N$ 家连锁店中的香肠价格，求 Matej 和 Filip 必须为靠近学校的 NSC 中的 $1000$ 克熟香肠支付的价格。", "inputFormat": "第一行两个正整数 $X_{\\textrm{NSC}}\\ (1\\le X_{\\textrm{NSC}} \\le 100)$ 和 $Y_{\\textrm{NSC}}\\ (1\\le Y_{\\textrm{NSC}} \\le 10^3)$，表示 $X_{\\textrm{NSC}}$ 是在 NSC 连锁店中 $Y_{\\textrm{NSC}}$ 克香肠的价格。\n\n第二行一个正整数 $N\\ (1\\le N\\le 100)$，表示连锁店的数目（不包括 NSC）。\n\n接下来 $N$ 行，每行两个正整数 $X_i,Y_i\\ (X_i\\le 100, Y_i\\le 10^3)$，表示 $X_i$ 是在第 $i$ 家连锁店中 $Y_i$ 克香肠的价格。\n\n\n", "outputFormat": "输出仅一行，一个实数，表示结果，保留 $2$ 位小数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2012/2013 #2] MORTADELA", "background": "**本题分值按 COCI 原题设置，满分 $50$。**", "description": "全国连锁超市（NSC）喜欢吹嘘它们的意式肉肠是全国最低的。\n\n实际上，如果顾客打算在其他连锁超市里找到更便宜的肉肠，那么 NSC 会向其补上差价。\n\nMatej 和 Filip 决定接受这个挑战。他们将会挨个走访 $N$ 家不同连锁店，来找到不仅比 NSC 便宜的熟香肠，而且在市场上最便宜的。如果他们成功了，他们就可以在他们学校附近的 NSC 分店买到最便宜的香肠。\n\nNSC 希望没有人能找到更便宜的香肠，因为所有所有连锁超市（包括 NSC）都以一种复杂的方式表示香肠的价格：$X$ 元 $Y$ 克香肠。\n\n请编写一个程序，给定 NSC 与其余 $N$ 家连锁店中的香肠价格，求 Matej 和 Filip 必须为靠近学校的 NSC 中的 $1000$ 克熟香肠支付的价格。", "inputFormat": "第一行两个正整数 $X_{\\textrm{NSC}}\\ (1\\le X_{\\textrm{NSC}} \\le 100)$ 和 $Y_{\\textrm{NSC}}\\ (1\\le Y_{\\textrm{NSC}} \\le 10^3)$，表示 $X_{\\textrm{NSC}}$ 是在 NSC 连锁店中 $Y_{\\textrm{NSC}}$ 克香肠的价格。\n\n第二行一个正整数 $N\\ (1\\le N\\le 100)$，表示连锁店的数目（不包括 NSC）。\n\n接下来 $N$ 行，每行两个正整数 $X_i,Y_i\\ (X_i\\le 100, Y_i\\le 10^3)$，表示 $X_i$ 是在第 $i$ 家连锁店中 $Y_i$ 克香肠的价格。\n\n\n", "outputFormat": "输出仅一行，一个实数，表示结果，保留 $2$ 位小数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8296", "type": "P", "difficulty": 3, "samples": [["ANA\nANA\nDAR\nDAR\nRAD\nRAD", "DAR\nANA\nRAD"], ["EVO\nHEP\nHIR\nIVA\nPAD\nROD", "HEP\nIVA\nROD"], ["AKO\nCES\nDOC\nDON\nESI\nKES", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2012", "COCI（克罗地亚）"], "title": "[COCI 2012/2013 #2] KRIZALJKA", "background": "**本题分值按 COCI 原题设置，满分 $80$。**", "description": "你喜欢玩填字游戏吗？如果是，你可能会知道传统的初学游戏，如下所示：\n\n***\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pi8lxkai.png)\n\n- 水平方向上：\n\n  1. 用于冷却电脑的设备\n\n  2. 固态水\n\n  3. 用来获得\n\n- 垂直方向上：\n\n  1. 又小又软又甜的水果\n  \n  2. 强力纸牌\n  \n  3. 渔夫的工具\n***\n\n给定六个有三个字母的单词，你需要把它们放在 $3\\times 3$ 的方格上，使得水平与垂直均出现这几个单词。\n", "inputFormat": "输入共 $6$ 行，每行一个有三个大写字母的单词。保证按字典序给出。", "outputFormat": "如果不存在解法，输出 $0$。否则输出三行三列的字母矩阵。\n\n如果存在多解，输出每行头尾相接形成的九个字符的字典序最小的方案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2012/2013 #2] KRIZALJKA", "background": "**本题分值按 COCI 原题设置，满分 $80$。**", "description": "你喜欢玩填字游戏吗？如果是，你可能会知道传统的初学游戏，如下所示：\n\n***\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pi8lxkai.png)\n\n- 水平方向上：\n\n  1. 用于冷却电脑的设备\n\n  2. 固态水\n\n  3. 用来获得\n\n- 垂直方向上：\n\n  1. 又小又软又甜的水果\n  \n  2. 强力纸牌\n  \n  3. 渔夫的工具\n***\n\n给定六个有三个字母的单词，你需要把它们放在 $3\\times 3$ 的方格上，使得水平与垂直均出现这几个单词。\n", "inputFormat": "输入共 $6$ 行，每行一个有三个大写字母的单词。保证按字典序给出。", "outputFormat": "如果不存在解法，输出 $0$。否则输出三行三列的字母矩阵。\n\n如果存在多解，输出每行头尾相接形成的九个字符的字典序最小的方案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8297", "type": "P", "difficulty": 4, "samples": [["2\n3 3", "1"], ["3\n1 1 1", "1"], ["5\n4 3 5 7 9", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["贪心", "2012", "COCI（克罗地亚）"], "title": "[COCI 2012/2013 #2] LANCI", "background": "**本题分值按 COCI 原题设置，满分 $100$。**", "description": "Mirko 在阁楼里发现了 $N$ 个链。每个链由一些节组成，其中每个节最多有两个相邻节。每个节都可以打开或合上，因此可以将链分开或连成更长的链。\n\nMirko 希望把所有链连成一条巨大的链，并且打开或合上尽可能少的节。\n\n例如，假设 Mirko 只有 $3$ 个链，每个链只有一个节，他可以打开其中一个，并且连上另外两个再合上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/he62ksg3.png)\n\n给定链的数量以及每个链的长度，找到 Mirko 必须打开和关闭的最小节数，使它们全部在一个长链上。", "inputFormat": "第一行一个整数 $N\\ (2\\le N\\le 5\\times 10^5)$，表示链的数量。\n\n第二行 $N$ 个正整数 $L_i\\ (1\\le L_i\\le 10^6)$，表示第 $i$ 个链的长度。", "outputFormat": "输出仅一行一个整数，表示最少要打开的节数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2012/2013 #2] LANCI", "background": "**本题分值按 COCI 原题设置，满分 $100$。**", "description": "Mirko 在阁楼里发现了 $N$ 个链。每个链由一些节组成，其中每个节最多有两个相邻节。每个节都可以打开或合上，因此可以将链分开或连成更长的链。\n\nMirko 希望把所有链连成一条巨大的链，并且打开或合上尽可能少的节。\n\n例如，假设 Mirko 只有 $3$ 个链，每个链只有一个节，他可以打开其中一个，并且连上另外两个再合上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/he62ksg3.png)\n\n给定链的数量以及每个链的长度，找到 Mirko 必须打开和关闭的最小节数，使它们全部在一个长链上。", "inputFormat": "第一行一个整数 $N\\ (2\\le N\\le 5\\times 10^5)$，表示链的数量。\n\n第二行 $N$ 个正整数 $L_i\\ (1\\le L_i\\le 10^6)$，表示第 $i$ 个链的长度。", "outputFormat": "输出仅一行一个整数，表示最少要打开的节数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8298", "type": "P", "difficulty": 4, "samples": [["3\n10 5\n9 3\n10 5", "9\n13\n18"], ["2\n100 1\n1 100", "1\n2"], ["5\n1000000000 1000000000\n1000000000 1000000000\n1000000000 1000000000\n1000000000 1000000000\n1000000000 1000000000", "1000000000\n2000000000\n3000000000\n4000000000\n5000000000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [32768, 32768, 32768, 32768, 32768]}, "tags": ["贪心", "2012", "COCI（克罗地亚）"], "title": "[COCI 2012/2013 #2] POPUST", "background": "**本题分值按 COCI 原题设置，满分 $120$。**", "description": "Mirko 像熊一样饥饿，发现了一家当地餐馆。这家餐厅提供 $N$ 顿饭，并且有一个有趣的定价政策：每顿饭都有两个指定价格，$A_i$ 和 $B_i$。Mirko 点的第一道菜只需要付 $A$ 元，其他菜都需要付 $B$ 元。\n\nMirko 无法决定点多少菜。为了更简单地作出决定，他向你求助。对于任意 $k\\in[1,N]$，点 $k$ 道菜最少要付的钱。Mirko 不在乎他点了哪些特别的饭菜，也不管他点菜的顺序，但他不会点两道同样的菜。", "inputFormat": "第一行一个正整数 $N\\ (2\\le N\\le 5\\times 10^5)$，表示菜品数量。\n\n接下来 $N$ 行，每行两个正整数 $A_i,B_i\\ (1\\le A_i,B_i\\le 10^9)$，题目已经描述。", "outputFormat": "输出包含 $N$ 行，第 $k$ 行表示点 $k$ 道互不相同的菜最少需要花多少钱。", "hint": "#### 样例#1 解释/说明\n\n- $k=1$: Mirko 开始点第 $2$ 道菜，共花费 $A_2=9$ 元。\n\n- $k=2$: Mirko 开始点第 $1$ 道菜，接着点第 $2$ 道菜，共花费 $A_1+B_2=13$ 元。\n\n- $k=3$: Mirko 开始点第 $1$ 道菜，接着点第 $2,3$ 道菜，共花费 $A_1+B_2+B_3=18$ 元。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2012/2013 #2] POPUST", "background": "**本题分值按 COCI 原题设置，满分 $120$。**", "description": "Mirko 像熊一样饥饿，发现了一家当地餐馆。这家餐厅提供 $N$ 顿饭，并且有一个有趣的定价政策：每顿饭都有两个指定价格，$A_i$ 和 $B_i$。Mirko 点的第一道菜只需要付 $A$ 元，其他菜都需要付 $B$ 元。\n\nMirko 无法决定点多少菜。为了更简单地作出决定，他向你求助。对于任意 $k\\in[1,N]$，点 $k$ 道菜最少要付的钱。Mirko 不在乎他点了哪些特别的饭菜，也不管他点菜的顺序，但他不会点两道同样的菜。", "inputFormat": "第一行一个正整数 $N\\ (2\\le N\\le 5\\times 10^5)$，表示菜品数量。\n\n接下来 $N$ 行，每行两个正整数 $A_i,B_i\\ (1\\le A_i,B_i\\le 10^9)$，题目已经描述。", "outputFormat": "输出包含 $N$ 行，第 $k$ 行表示点 $k$ 道互不相同的菜最少需要花多少钱。", "hint": "#### 样例#1 解释/说明\n\n- $k=1$: Mirko 开始点第 $2$ 道菜，共花费 $A_2=9$ 元。\n\n- $k=2$: Mirko 开始点第 $1$ 道菜，接着点第 $2$ 道菜，共花费 $A_1+B_2=13$ 元。\n\n- $k=3$: Mirko 开始点第 $1$ 道菜，接着点第 $2,3$ 道菜，共花费 $A_1+B_2+B_3=18$ 元。\n", "locale": "zh-CN"}}}
{"pid": "P8299", "type": "P", "difficulty": 5, "samples": [["3 2\n1 1 1 1\n2 2 2 2", "1 2 3"], ["4 2\n1 1 1 1\n2 3 4 1", "-1"], ["5 2\n1 2 3 3\n2 4 5 4\n", "1 2 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["图论", "2012", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2012/2013 #2] INFORMACIJE", "background": "**本题分值按 COCI 原题设置，满分 $140$。**", "description": "Mirko 很无聊，所以他拿起一张纸，写下了一个含有 $N$ 个元素的序列 $A$，$1\\sim N$ 的所有正整数在其中恰好仅出现一次。然后，他拿了另外一张纸，写下了 $M$ 个关于 $A$ 的描述。\n\n每个描述有两种方式：\n\n- `1 x y v`：表示 $[x,y]$ 区间中最大的数为 $v$。\n\n- `2 x y v`：表示 $[x,y]$ 区间中最小的数为 $v$。\n\n随后 Slavko 来偷走了他的第一张纸。Mirko 感到绝望，他想要你找到满足这些描述的序列，不需要跟原序列完全相同。", "inputFormat": "第一行两个整数 $N,M\\ (1\\le N\\le 200, 0\\le M\\le 4\\times 10^4)$，分别表示序列长度以及描述的数量。\n\n接下来 $M$ 行每行一个描述。", "outputFormat": "输出仅一行，一个满足所有描述的长为 $N$ 的序列，并且 $1\\sim N$ 在其中出现并仅出现一次，用空格隔开。如无解，输出 $-1$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2012/2013 #2] INFORMACIJE", "background": "**本题分值按 COCI 原题设置，满分 $140$。**", "description": "Mirko 很无聊，所以他拿起一张纸，写下了一个含有 $N$ 个元素的序列 $A$，$1\\sim N$ 的所有正整数在其中恰好仅出现一次。然后，他拿了另外一张纸，写下了 $M$ 个关于 $A$ 的描述。\n\n每个描述有两种方式：\n\n- `1 x y v`：表示 $[x,y]$ 区间中最大的数为 $v$。\n\n- `2 x y v`：表示 $[x,y]$ 区间中最小的数为 $v$。\n\n随后 Slavko 来偷走了他的第一张纸。Mirko 感到绝望，他想要你找到满足这些描述的序列，不需要跟原序列完全相同。", "inputFormat": "第一行两个整数 $N,M\\ (1\\le N\\le 200, 0\\le M\\le 4\\times 10^4)$，分别表示序列长度以及描述的数量。\n\n接下来 $M$ 行每行一个描述。", "outputFormat": "输出仅一行，一个满足所有描述的长为 $N$ 的序列，并且 $1\\sim N$ 在其中出现并仅出现一次，用空格隔开。如无解，输出 $-1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8300", "type": "P", "difficulty": 6, "samples": [["2 4\n1 1 1 2 4\n1 2 2 3 2\n2 5 1 2\n2 7 1 2\n", "12\n17\n"], ["3 6\n1 1 1 4 -2\n1 2 2 2 6\n2 3 3 1\n2 4 3 1\n1 5 3 -6 20\n2 6 2 3", "8\n10\n14"], ["5 9\n1 1 5 4 -5\n2 2 3 5\n1 3 4 6 9\n2 4 1 2\n1 6 2 2 3\n2 8 2 1\n1 9 4 0 17\n2 10 5 5\n2 11 1 4", "-1\nnema\n7\n31\n17"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2012", "COCI（克罗地亚）"], "title": "[COCI 2012/2013 #2] INSPEKTOR", "background": "**本题分值按 COCI 原题设置，满分 $160$。**", "description": "一个新城镇刚刚在一个小国家落成。 像往常一样，Mirko 获得了首席税务监察员的职位。 他的职责是确保镇上所有不同公司的充分会计处理。\n\n沿大街有 $N$ 个营业厅，从左到右编号为 $1\\sim N$。一开始所有的办公室都是空的； 随着时间的推移，公司将进出这些办公室。 不时，Mirko 会经过一些办公室，只检查这些办公室中目前最富有的一家。\n\n搬入的公司用四个整数来描述：\n\n- $T$：搬入的日期。此处设小镇建成当天为 $1$。\n\n- $K$：办公室序号。\n\n- $Z$：公司的每日利润（如果公司亏损，则可能为负数）。\n\n- $S$：搬入当天公司账户余额。\n\n如果办公室 $K$ 中已经有一家公司，则当新公司搬入时，该公司搬出。\n\n新公司直到搬入后的第二天才开始营业（或赚取利润）。\n\n米尔科的巡视由三个整数描述：\n\n- $T$：巡视的日期。小镇建成当天为 $1$。\n\n- $A,B$：Mirko 将会经过 $[A,B]$ 内所有办公室。\n\n由于 Mirko 只在一天结束时工作，所以到 Mirko 散步时，所有公司都已经完成了当天的业务并公布了当天的利润。\n\n帮助 Mirko 编写一个程序，在每次闲逛时查找 Mirko 路过的当前最富有的公司的账户余额。", "inputFormat": "输入的第一行包含两个正整数，$N\\ (1 ≤ N ≤ 10^5)$ 和 $M \\ (1 ≤ M ≤ 3\\times 10^5)$，\n分别表示办公室和巡视的数量。\n\n接下来 $M$ 行，每一行包含一个事件的描述，格式为 `1 T K Z S`（公司搬入）或 `2 T A B`（Mirko 的巡视）。\n\n所有事件都按时间顺序给出，每天最多发生一个事件（即 $T$ 将是严格递增）。 最后一个事件的天数将小于 $10^6$, 所有 $Z$ 和 $S$ 数字的绝对值\n值将小于 $10^6$。", "outputFormat": "对于 Mirko 的每一次巡视，输出一行包含 Mirko 检查的公司的账户余额，或者如果他将经过的所有办公室都是空的，则输出单词 `nema`。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2012/2013 #2] INSPEKTOR", "background": "**本题分值按 COCI 原题设置，满分 $160$。**", "description": "一个新城镇刚刚在一个小国家落成。 像往常一样，Mirko 获得了首席税务监察员的职位。 他的职责是确保镇上所有不同公司的充分会计处理。\n\n沿大街有 $N$ 个营业厅，从左到右编号为 $1\\sim N$。一开始所有的办公室都是空的； 随着时间的推移，公司将进出这些办公室。 不时，Mirko 会经过一些办公室，只检查这些办公室中目前最富有的一家。\n\n搬入的公司用四个整数来描述：\n\n- $T$：搬入的日期。此处设小镇建成当天为 $1$。\n\n- $K$：办公室序号。\n\n- $Z$：公司的每日利润（如果公司亏损，则可能为负数）。\n\n- $S$：搬入当天公司账户余额。\n\n如果办公室 $K$ 中已经有一家公司，则当新公司搬入时，该公司搬出。\n\n新公司直到搬入后的第二天才开始营业（或赚取利润）。\n\n米尔科的巡视由三个整数描述：\n\n- $T$：巡视的日期。小镇建成当天为 $1$。\n\n- $A,B$：Mirko 将会经过 $[A,B]$ 内所有办公室。\n\n由于 Mirko 只在一天结束时工作，所以到 Mirko 散步时，所有公司都已经完成了当天的业务并公布了当天的利润。\n\n帮助 Mirko 编写一个程序，在每次闲逛时查找 Mirko 路过的当前最富有的公司的账户余额。", "inputFormat": "输入的第一行包含两个正整数，$N\\ (1 ≤ N ≤ 10^5)$ 和 $M \\ (1 ≤ M ≤ 3\\times 10^5)$，\n分别表示办公室和巡视的数量。\n\n接下来 $M$ 行，每一行包含一个事件的描述，格式为 `1 T K Z S`（公司搬入）或 `2 T A B`（Mirko 的巡视）。\n\n所有事件都按时间顺序给出，每天最多发生一个事件（即 $T$ 将是严格递增）。 最后一个事件的天数将小于 $10^6$, 所有 $Z$ 和 $S$ 数字的绝对值\n值将小于 $10^6$。", "outputFormat": "对于 Mirko 的每一次巡视，输出一行包含 Mirko 检查的公司的账户余额，或者如果他将经过的所有办公室都是空的，则输出单词 `nema`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P8301", "type": "P", "difficulty": 1, "samples": [["3\n110\n101\n", "0"], ["5\n10010\n00100", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "[CoE R4 A/Stoi2041] 娘子", "background": "![](bilibili:BV1fx411N7bU?page=4)", "description": "给定两个长度均为 $n$ 的 $0$，$1$ 序列 $a$，$b$，**首先**，你可以选择一些 $a_i$ 取反，即 $0$ 变为 $1$，$1$ 变为 $0$，**然后**，任意排列序列 $a$。\n\n要求上述过程结束后 $a_i$ **等于** $b_i$，求取反的最少次数。", "inputFormat": "第一行一个正整数 $n$。第二行 $n$ 个数字表示序列 $a$。第三行 $n$ 个数字表示序列 $b$。", "outputFormat": "一个整数表示答案。", "hint": "### 样例解释\n\n输入 #1：将 $a = 110$ 重排为 $a = 101$ 即可达到题目要求，故取反的最少次数为 $0$。\n\n输入 #2：将 $a = 10010$ 的第四位取反（从左往右计数），得 $a=10000$，然后再重排得到 $a=00100$ 即可达到题目要求，故取反的最少次数为 $1$。 \n\n---\n\n### 数据规模\n\n- 对于 $10\\%$ 的数据，$n = 1$；\n- 对于另外 $20\\%$ 的数据，$b_i = 0$；\n- 对于另外 $20\\%$ 的数据，$b_i = 1$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^3$，$a_i \\in \\{0, 1\\}$，$b_i \\in \\{0, 1\\}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R4 A/Stoi2041] 娘子", "background": "![](bilibili:BV1fx411N7bU?page=4)", "description": "给定两个长度均为 $n$ 的 $0$，$1$ 序列 $a$，$b$，**首先**，你可以选择一些 $a_i$ 取反，即 $0$ 变为 $1$，$1$ 变为 $0$，**然后**，任意排列序列 $a$。\n\n要求上述过程结束后 $a_i$ **等于** $b_i$，求取反的最少次数。", "inputFormat": "第一行一个正整数 $n$。第二行 $n$ 个数字表示序列 $a$。第三行 $n$ 个数字表示序列 $b$。", "outputFormat": "一个整数表示答案。", "hint": "### 样例解释\n\n输入 #1：将 $a = 110$ 重排为 $a = 101$ 即可达到题目要求，故取反的最少次数为 $0$。\n\n输入 #2：将 $a = 10010$ 的第四位取反（从左往右计数），得 $a=10000$，然后再重排得到 $a=00100$ 即可达到题目要求，故取反的最少次数为 $1$。 \n\n---\n\n### 数据规模\n\n- 对于 $10\\%$ 的数据，$n = 1$；\n- 对于另外 $20\\%$ 的数据，$b_i = 0$；\n- 对于另外 $20\\%$ 的数据，$b_i = 1$；\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^3$，$a_i \\in \\{0, 1\\}$，$b_i \\in \\{0, 1\\}$。\n", "locale": "zh-CN"}}}
{"pid": "P8302", "type": "P", "difficulty": 5, "samples": [["2\n2 3\n3 4\n", "0\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "数学", "数论", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "[CoE R4 B/Stoi2041] 龙拳", "background": "![](bilibili:BV1fx411N7bU?page=28)", "description": "对于 $n \\in \\mathbb{Z_{\\ge 2}}$，设 $g(n)$ 为 $n$ 的小于 $n$ 的最大约数，如 $g(7) = 1, g(12) = 6$。\n\n定义 $f(n) = n + g(n)$。记 $f^{(0)}(n)=n$，且对 $m \\in \\mathbb{Z_{\\ge 0}}$ 有 $f^{(m+1)}(n)=f(f^{(m)}(n))$。\n\n多次询问，每次询问给定正整数 $n,k$，求最小的自然数 $m_0$，使得对于任意 $m \\ge m_0$，均有 $f^{(m)}(n) \\mid f^{(m+k)}(n)$。\n\n若不存在这样的 $m_0$，则令 $m_0=-1$。", "inputFormat": "第一行一个正整数 $T$ 表示询问次数。\n\n接下来 $T$ 行，每行两个正整数 $n,k$，表示一次询问。", "outputFormat": "对于每组询问输出一个整数表示答案。", "hint": "### 样例解释\n\n当 $n=2,k=3$ 时，$m_0=0$。\n\n当 $n=3,k=4$ 时不存在满足条件的 $m_0$。\n\n---\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n- 子任务 $1$（$1$ 分）：$T=k=1$；\n- 子任务 $2$（$12$ 分）：$T,n,k \\le 10$；\n- 子任务 $3$（$24$ 分）：$T \\le 10,n \\le 10^5$；\n- 子任务 $4$（$36$ 分）：$T \\le 10^3$；\n- 子任务 $5$（$27$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 2 \\times 10^6$，$2 \\le n \\le 3 \\times 10^7$，$1 \\le k \\le 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R4 B/Stoi2041] 龙拳", "background": "![](bilibili:BV1fx411N7bU?page=28)", "description": "对于 $n \\in \\mathbb{Z_{\\ge 2}}$，设 $g(n)$ 为 $n$ 的小于 $n$ 的最大约数，如 $g(7) = 1, g(12) = 6$。\n\n定义 $f(n) = n + g(n)$。记 $f^{(0)}(n)=n$，且对 $m \\in \\mathbb{Z_{\\ge 0}}$ 有 $f^{(m+1)}(n)=f(f^{(m)}(n))$。\n\n多次询问，每次询问给定正整数 $n,k$，求最小的自然数 $m_0$，使得对于任意 $m \\ge m_0$，均有 $f^{(m)}(n) \\mid f^{(m+k)}(n)$。\n\n若不存在这样的 $m_0$，则令 $m_0=-1$。", "inputFormat": "第一行一个正整数 $T$ 表示询问次数。\n\n接下来 $T$ 行，每行两个正整数 $n,k$，表示一次询问。", "outputFormat": "对于每组询问输出一个整数表示答案。", "hint": "### 样例解释\n\n当 $n=2,k=3$ 时，$m_0=0$。\n\n当 $n=3,k=4$ 时不存在满足条件的 $m_0$。\n\n---\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n- 子任务 $1$（$1$ 分）：$T=k=1$；\n- 子任务 $2$（$12$ 分）：$T,n,k \\le 10$；\n- 子任务 $3$（$24$ 分）：$T \\le 10,n \\le 10^5$；\n- 子任务 $4$（$36$ 分）：$T \\le 10^3$；\n- 子任务 $5$（$27$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 2 \\times 10^6$，$2 \\le n \\le 3 \\times 10^7$，$1 \\le k \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P8303", "type": "P", "difficulty": 6, "samples": [["1\n6\n\n0 2 2 3 1 1\n\n2 0 2 1 1 3\n\n2 2 0 1 1 1\n\n3 1 1 0 2 2\n\n1 1 1 2 0 2\n\n1 3 1 2 2 0", "\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n0\n2 3\n2 5 1\n4 3 6"], ["2\n1\n\n\n\n2\n\n1 0", "\n\n0\n1 1\n1\n\n2\n\n0\n2 1\n1\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "[CoE R4 C] 网格", "background": "", "description": "**这是一道交互题。**\n\n有一张 $n$ 个点的无向无权图。\n\n这张图有一个特殊性质：存在一个点 $u \\ (1 \\leq u \\leq n)$ 到正整数对 $(x, y) \\ (1 \\leq x \\leq l, 1 \\leq y \\leq c)$ 的**一一对应**关系，使得 $n = l \\cdot c$，且点 $u, v$ 间存在边当且仅当 $u, v$ 对应的数对 $(x_u, y_u), (x_v, y_v)$ 满足 $|x_u - x_v| + |y_u - y_v| = 1$。换而言之，这张图和 $l$ 行 $c$ 列的网格图同构。\n\n现在，你要通过一些询问还原这张图的结构。每次询问时，你需要给定一个点 $u \\ (1 \\leq u \\leq n)$。询问的返回值是一个长为 $n$ 的数组 $\\{d_i\\} \\ (1 \\leq i \\leq n)$，表示点 $u, i$ 间的最短路径所经过的边数。\n\n请你使用不超过 $q$ 次询问，还原出这张图的结构。\n\n---\n\n### 交互格式\n\n**本题有多组数据。**\n\n首先输入一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 首先输入一个整数 $n$，表示图的点数。\n- 接下来，你可以执行一些询问。对于每次询问，输出一个整数 $u$，为你询问的点。然后，输入 $n$ 个整数 $\\{d_i\\}$，为询问的返回值。\n- 当你确定答案后，输出一个整数 $0$，然后输出答案。\n\n在输出答案时：\n\n- 第一行输出两个整数 $l, c$；\n- 接下来，输出 $l$ 行 $c$ 列整数，为你还原的对应关系。第 $i$ 行 $j$ 列的数为 $(i, j)$ 对应的编号。\n\n如果有多个答案，你可以输出任意一个。一个答案是正确的，当且仅当它和标准答案无法被任何询问区分：也就是，在这两个答案对应的网格图中，任意点对间的最短路径所经过的边数都是相同的。\n\n---\n\n请注意：**在每次执行询问或者输出答案后，你应该清空缓冲区：**\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Java 中，使用 `System.out.flush()`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "### 样例 $1$ 解释\n\n对于样例，以下 $3$ 行 $2$ 列的网格图也是正确的输出。\n\n```\n3 2\n4 2\n3 5\n6 1\n```\n\n左边是样例对应的网格图，右边是以上输出对应的网格图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jy23v0au.png)\n\n---\n\n### 评分标准\n\n对于一个子任务，令 $q_{\\max}$ 为你在这个子任务的所有测试数据中的最大询问次数。\n\n如果交互的格式不合法，运行超出了时间限制，或者你的答案不正确，或者 $q_{\\max} > q$，你的得分为 $0$。\n\n否则，对于子任务 $1 \\sim 3$，你得满分；对于子任务 $4$，你的分数由下表给出：\n\n| 条件 | 分数 |\n| :-: | :-: |\n| $q_{\\max} \\leq 3$ | $61$ |\n| $q_{\\max} = 4$ | $41$ |\n| $q_{\\max} = 5$ | $31$ |\n| $q_{\\max} = 6$ | $21$ |\n| $q_{\\max} \\geq 7$ | $11$ |\n\n---\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n| 子任务 | 分值 | $n \\leq$ | $q = $  | 特殊性质 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $3$ | $4$ | $4$ | 无 |\n| $2$ | $13$ | $10^5$ | $4$ | 存在解使得 $l = 1$ |\n| $3$ | $23$ | $36$ | $36$ | 存在解使得 $2 \\leq l, c \\leq 6$ |\n| $4$ | $61$ | $10^5$ | $12$ | 无 |\n\n对于所有数据，保证 $1 \\leq T \\leq 10^3$，$1 \\leq n \\leq 10^5$，$\\sum n \\leq 3 \\times 10^5$。\n\n在部分测试数据中，交互器是自适应的。也就是，图的结构可能会根据你的询问而变化。但是可以保证：在每次询问之后，存在至少一个答案符合当前所有询问的返回值。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R4 C] 网格", "background": "", "description": "**这是一道交互题。**\n\n有一张 $n$ 个点的无向无权图。\n\n这张图有一个特殊性质：存在一个点 $u \\ (1 \\leq u \\leq n)$ 到正整数对 $(x, y) \\ (1 \\leq x \\leq l, 1 \\leq y \\leq c)$ 的**一一对应**关系，使得 $n = l \\cdot c$，且点 $u, v$ 间存在边当且仅当 $u, v$ 对应的数对 $(x_u, y_u), (x_v, y_v)$ 满足 $|x_u - x_v| + |y_u - y_v| = 1$。换而言之，这张图和 $l$ 行 $c$ 列的网格图同构。\n\n现在，你要通过一些询问还原这张图的结构。每次询问时，你需要给定一个点 $u \\ (1 \\leq u \\leq n)$。询问的返回值是一个长为 $n$ 的数组 $\\{d_i\\} \\ (1 \\leq i \\leq n)$，表示点 $u, i$ 间的最短路径所经过的边数。\n\n请你使用不超过 $q$ 次询问，还原出这张图的结构。\n\n---\n\n### 交互格式\n\n**本题有多组数据。**\n\n首先输入一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 首先输入一个整数 $n$，表示图的点数。\n- 接下来，你可以执行一些询问。对于每次询问，输出一个整数 $u$，为你询问的点。然后，输入 $n$ 个整数 $\\{d_i\\}$，为询问的返回值。\n- 当你确定答案后，输出一个整数 $0$，然后输出答案。\n\n在输出答案时：\n\n- 第一行输出两个整数 $l, c$；\n- 接下来，输出 $l$ 行 $c$ 列整数，为你还原的对应关系。第 $i$ 行 $j$ 列的数为 $(i, j)$ 对应的编号。\n\n如果有多个答案，你可以输出任意一个。一个答案是正确的，当且仅当它和标准答案无法被任何询问区分：也就是，在这两个答案对应的网格图中，任意点对间的最短路径所经过的边数都是相同的。\n\n---\n\n请注意：**在每次执行询问或者输出答案后，你应该清空缓冲区：**\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Java 中，使用 `System.out.flush()`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "### 样例 $1$ 解释\n\n对于样例，以下 $3$ 行 $2$ 列的网格图也是正确的输出。\n\n```\n3 2\n4 2\n3 5\n6 1\n```\n\n左边是样例对应的网格图，右边是以上输出对应的网格图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jy23v0au.png)\n\n---\n\n### 评分标准\n\n对于一个子任务，令 $q_{\\max}$ 为你在这个子任务的所有测试数据中的最大询问次数。\n\n如果交互的格式不合法，运行超出了时间限制，或者你的答案不正确，或者 $q_{\\max} > q$，你的得分为 $0$。\n\n否则，对于子任务 $1 \\sim 3$，你得满分；对于子任务 $4$，你的分数由下表给出：\n\n| 条件 | 分数 |\n| :-: | :-: |\n| $q_{\\max} \\leq 3$ | $61$ |\n| $q_{\\max} = 4$ | $41$ |\n| $q_{\\max} = 5$ | $31$ |\n| $q_{\\max} = 6$ | $21$ |\n| $q_{\\max} \\geq 7$ | $11$ |\n\n---\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n| 子任务 | 分值 | $n \\leq$ | $q = $  | 特殊性质 |\n| :-: | :-: | :-: | :-: | :-: |\n| $1$ | $3$ | $4$ | $4$ | 无 |\n| $2$ | $13$ | $10^5$ | $4$ | 存在解使得 $l = 1$ |\n| $3$ | $23$ | $36$ | $36$ | 存在解使得 $2 \\leq l, c \\leq 6$ |\n| $4$ | $61$ | $10^5$ | $12$ | 无 |\n\n对于所有数据，保证 $1 \\leq T \\leq 10^3$，$1 \\leq n \\leq 10^5$，$\\sum n \\leq 3 \\times 10^5$。\n\n在部分测试数据中，交互器是自适应的。也就是，图的结构可能会根据你的询问而变化。但是可以保证：在每次询问之后，存在至少一个答案符合当前所有询问的返回值。\n", "locale": "zh-CN"}}}
{"pid": "P8304", "type": "P", "difficulty": 6, "samples": [["10 4\n0100101011\n1 1\n1 5\n2 9\n1 10", "-1\n3\n7\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "线段树", "洛谷原创", "O2优化", "前缀和", "洛谷月赛"], "title": "[CoE R4 D] 01 串", "background": "", "description": "定义一个好的 $01$ 串 $\\mathcal{S}$ 满足以下条件：\n\n+ $\\mathcal{S}$ 非空。\n\n+ $\\mathcal{S}$ 的任意一个前缀 $\\mathcal {S} [1\\dots p](p\\in [1,|\\mathcal S|])$ 中，$0$ 的数量都不多于 $1$ 的数量。\n+ $\\mathcal{S}$ 的任意一个后缀 $\\mathcal S[p\\dots |\\mathcal{S}|](p\\in [1,|\\mathcal S|])$ 中，$0$ 的数量都不多于 $1$ 的数量。\n\n现在你得到了一个长度为 $n$ 的 $01$ 串 $\\mathcal{T}$，有 $q$ 次询问，每次询问给定一对 $l,r$，求 $\\mathcal{T}[l\\dots r]$ 中的最长的好的 $01$ **子序列** 的长度。若没有好的 $01$ 子序列，则输出 $-1$。\n\n注意：**子序列** 是指去除某些元素但不破坏余下元素的相对位置而形成的新序列。", "inputFormat": "第一行两个整数 $n,q$，分别表示 $01$ 串的长度和询问次数。\n\n第二行一个长度为 $n$ 的 $01$ 串，表示 $\\mathcal{T}$。\n\n接下来 $q$ 行，每行两个整数 $l,r$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行一个整数，依次表示每次询问的答案。", "hint": "### 样例解释\n\n第一次询问中，询问的串为 $0$，没有任何的子序列是好的，所以答案是 $-1$。\n\n第二次询问中，询问的串为 $01001$，子序列 $101$ 是好的且是最长的，所以答案是 $3$。\n\n第三次询问中，询问的串为 $10010101$，子序列 $1010101$ 是好的且是最长的，所以答案是 $7$。\n\n第四次询问中，询问的串为 $0100101011$，子序列 $10101011$ 是好的且是最长的，所以答案是 $8$。\n\n---\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n| 子任务 | 分值 | $n \\le$ | $q \\le$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $10$ |\n| $2$ | $20$ | $2000$ | $2000$ |\n| $3$ | $30$ | $8\\times 10^4$ | $8\\times 10^4$ |\n| $4$ | $10$ | $10^5$ | $1$ |\n| $5$ | $30$ | $5\\times 10^5$ | $5\\times 10^5$ |\n\n对于 $100\\%$ 的数据，$1 \\leq l \\leq r \\leq n \\leq 5 \\times 10^5$，$1 \\leq q \\leq 5 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R4 D] 01 串", "background": "", "description": "定义一个好的 $01$ 串 $\\mathcal{S}$ 满足以下条件：\n\n+ $\\mathcal{S}$ 非空。\n\n+ $\\mathcal{S}$ 的任意一个前缀 $\\mathcal {S} [1\\dots p](p\\in [1,|\\mathcal S|])$ 中，$0$ 的数量都不多于 $1$ 的数量。\n+ $\\mathcal{S}$ 的任意一个后缀 $\\mathcal S[p\\dots |\\mathcal{S}|](p\\in [1,|\\mathcal S|])$ 中，$0$ 的数量都不多于 $1$ 的数量。\n\n现在你得到了一个长度为 $n$ 的 $01$ 串 $\\mathcal{T}$，有 $q$ 次询问，每次询问给定一对 $l,r$，求 $\\mathcal{T}[l\\dots r]$ 中的最长的好的 $01$ **子序列** 的长度。若没有好的 $01$ 子序列，则输出 $-1$。\n\n注意：**子序列** 是指去除某些元素但不破坏余下元素的相对位置而形成的新序列。", "inputFormat": "第一行两个整数 $n,q$，分别表示 $01$ 串的长度和询问次数。\n\n第二行一个长度为 $n$ 的 $01$ 串，表示 $\\mathcal{T}$。\n\n接下来 $q$ 行，每行两个整数 $l,r$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行一个整数，依次表示每次询问的答案。", "hint": "### 样例解释\n\n第一次询问中，询问的串为 $0$，没有任何的子序列是好的，所以答案是 $-1$。\n\n第二次询问中，询问的串为 $01001$，子序列 $101$ 是好的且是最长的，所以答案是 $3$。\n\n第三次询问中，询问的串为 $10010101$，子序列 $1010101$ 是好的且是最长的，所以答案是 $7$。\n\n第四次询问中，询问的串为 $0100101011$，子序列 $10101011$ 是好的且是最长的，所以答案是 $8$。\n\n---\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n| 子任务 | 分值 | $n \\le$ | $q \\le$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $10$ |\n| $2$ | $20$ | $2000$ | $2000$ |\n| $3$ | $30$ | $8\\times 10^4$ | $8\\times 10^4$ |\n| $4$ | $10$ | $10^5$ | $1$ |\n| $5$ | $30$ | $5\\times 10^5$ | $5\\times 10^5$ |\n\n对于 $100\\%$ 的数据，$1 \\leq l \\leq r \\leq n \\leq 5 \\times 10^5$，$1 \\leq q \\leq 5 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8305", "type": "P", "difficulty": 6, "samples": [["见下发文件的 sample.in", "见下发文件的 sample.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "[CoE R4 E] 伪随机", "background": "", "description": "很久很久以前，小明生成了一些数据。\n\n他的数据生成器使用了以下两个函数生成随机数：\n\n```plain\n定义函数 srand(32 位无符号整数 seed)\n\t将 x 赋值为 seed\n\n定义函数 rand()\n\t将 x 赋值为 x 异或 (x 左移 13 位)\n\t将 x 赋值为 x 异或 (x 右移 17 位)\n\t将 x 赋值为 x 异或 (x 左移 5 位)\n\t返回 x\n```\n\n小明在调用 $\\text{srand(seed)}$ 后，连续调用了 $n$ 次 $\\text{rand()}$，并且记录下了每次 $\\text{rand()}$ 的返回值对 $p$ 取模时得到的余数 $a_i$。\n\n很久很久以后，只有数据生成器依然残存（实现见下发文件的 `generator.cpp`），但生成器的参数 $\\text{seed}$ 和 $p$ 已经消失。\n\n小明想要从数据中恢复这两个参数。即给定序列 $a_i$，需要找到任意一组 $\\text{seed}$ 和 $p$ 的可能的值。你能帮帮他吗？\n\n---\n\n**简要描述**\n\n小明的数据生成器是下发文件的 `generator.cpp`。你需要根据生成器的输出，反推出生成器的输入。\n", "inputFormat": "输入的第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个 $32$ 位无符号整数 $a_1, a_2, \\cdots, a_n$，为小明生成的数据。\n", "outputFormat": "输出仅包含两个 $32$ 位无符号整数 $\\text{seed}$ 和 $p$，为你的答案。你需要保证 $0 < \\text{seed}, p < 2^{32}$。\n\n如果有多组解，你可以输出任意一组。\n", "hint": "### 数据规模\n\n本题共有 $50$ 个测试点，每个测试点 $2$ 分。\n\n对于所有数据，保证 $n = 10^5$，$\\text{seed}$ 是随机选取的，且至少存在一组解。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CoE R4 E] 伪随机", "background": "", "description": "很久很久以前，小明生成了一些数据。\n\n他的数据生成器使用了以下两个函数生成随机数：\n\n```plain\n定义函数 srand(32 位无符号整数 seed)\n\t将 x 赋值为 seed\n\n定义函数 rand()\n\t将 x 赋值为 x 异或 (x 左移 13 位)\n\t将 x 赋值为 x 异或 (x 右移 17 位)\n\t将 x 赋值为 x 异或 (x 左移 5 位)\n\t返回 x\n```\n\n小明在调用 $\\text{srand(seed)}$ 后，连续调用了 $n$ 次 $\\text{rand()}$，并且记录下了每次 $\\text{rand()}$ 的返回值对 $p$ 取模时得到的余数 $a_i$。\n\n很久很久以后，只有数据生成器依然残存（实现见下发文件的 `generator.cpp`），但生成器的参数 $\\text{seed}$ 和 $p$ 已经消失。\n\n小明想要从数据中恢复这两个参数。即给定序列 $a_i$，需要找到任意一组 $\\text{seed}$ 和 $p$ 的可能的值。你能帮帮他吗？\n\n---\n\n**简要描述**\n\n小明的数据生成器是下发文件的 `generator.cpp`。你需要根据生成器的输出，反推出生成器的输入。\n", "inputFormat": "输入的第一行包含一个整数 $n$。\n\n第二行包含 $n$ 个 $32$ 位无符号整数 $a_1, a_2, \\cdots, a_n$，为小明生成的数据。\n", "outputFormat": "输出仅包含两个 $32$ 位无符号整数 $\\text{seed}$ 和 $p$，为你的答案。你需要保证 $0 < \\text{seed}, p < 2^{32}$。\n\n如果有多组解，你可以输出任意一组。\n", "hint": "### 数据规模\n\n本题共有 $50$ 个测试点，每个测试点 $2$ 分。\n\n对于所有数据，保证 $n = 10^5$，$\\text{seed}$ 是随机选取的，且至少存在一组解。\n", "locale": "zh-CN"}}}
{"pid": "P8306", "type": "P", "difficulty": 3, "samples": [["3\n3 3\nfusufusu\nfusu\nanguei\nfusu\nanguei\nkkksc\n5 2\nfusu\nFusu\nAFakeFusu\nafakefusu\nfusuisnotfake\nFusu\nfusu\n1 1\n998244353\n9", "2\n1\n0\n1\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "O2优化", "字典树 Trie", "模板题"], "title": "【模板】字典树", "background": null, "description": "给定 $n$ 个模式串 $s_1, s_2, \\dots, s_n$ 和 $q$ 次询问，每次询问给定一个文本串 $t_i$，请回答 $s_1 \\sim s_n$ 中有多少个字符串 $s_j$ 满足 $t_i$ 是 $s_j$ 的**前缀**。\n\n一个字符串 $t$ 是 $s$ 的前缀当且仅当从 $s$ 的末尾删去若干个（可以为 $0$ 个）连续的字符后与 $t$ 相同。\n\n输入的字符串大小敏感。例如，字符串 `Fusu` 和字符串 `fusu` 不同。", "inputFormat": "**本题单测试点内有多组测试数据**。  \n\n输入的第一行是一个整数，表示数据组数 $T$。\n\n对于每组数据，格式如下：  \n第一行是两个整数，分别表示模式串的个数 $n$ 和询问的个数 $q$。  \n接下来 $n$ 行，每行一个字符串，表示一个模式串。  \n接下来 $q$ 行，每行一个字符串，表示一次询问。", "outputFormat": "按照输入的顺序依次输出各测试数据的答案。  \n对于每次询问，输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq T, n, q\\leq 10^5$，且输入字符串的总长度不超过 $3 \\times 10^6$。输入的字符串只含大小写字母和数字，且不含空串。\n\n### 说明\nstd 的 IO 使用的是关闭同步后的 cin/cout，本题不卡常。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】字典树", "background": null, "description": "给定 $n$ 个模式串 $s_1, s_2, \\dots, s_n$ 和 $q$ 次询问，每次询问给定一个文本串 $t_i$，请回答 $s_1 \\sim s_n$ 中有多少个字符串 $s_j$ 满足 $t_i$ 是 $s_j$ 的**前缀**。\n\n一个字符串 $t$ 是 $s$ 的前缀当且仅当从 $s$ 的末尾删去若干个（可以为 $0$ 个）连续的字符后与 $t$ 相同。\n\n输入的字符串大小敏感。例如，字符串 `Fusu` 和字符串 `fusu` 不同。", "inputFormat": "**本题单测试点内有多组测试数据**。  \n\n输入的第一行是一个整数，表示数据组数 $T$。\n\n对于每组数据，格式如下：  \n第一行是两个整数，分别表示模式串的个数 $n$ 和询问的个数 $q$。  \n接下来 $n$ 行，每行一个字符串，表示一个模式串。  \n接下来 $q$ 行，每行一个字符串，表示一次询问。", "outputFormat": "按照输入的顺序依次输出各测试数据的答案。  \n对于每次询问，输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq T, n, q\\leq 10^5$，且输入字符串的总长度不超过 $3 \\times 10^6$。输入的字符串只含大小写字母和数字，且不含空串。\n\n### 说明\nstd 的 IO 使用的是关闭同步后的 cin/cout，本题不卡常。", "locale": "zh-CN"}}}
{"pid": "P8307", "type": "P", "difficulty": 4, "samples": [["3", "665496236"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["博弈论", "O2优化", "概率论", "逆元"], "title": "〈 TREEのOI 2022 Spring 〉Absolutely Simple Game", "background": "rin 和 len 在玩一个绝对简单的游戏，pcq 为裁判。", "description": "初始时给定范围 $[l,r]=[1,n]$，pcq 从中均匀随机选出一个自然数 $t$，之后 rin 和 len 两人轮流进行操作，rin 先行。\n\n每次操作方猜测一个整数 $x\\in[l,r]$，若 $x=t$，则游戏结束，该方负；若 $x<t$，则调整范围 $[l,r]$ 为 $[x+1,r]$；若 $x>t$，则调整范围 $[l,r]$ 为 $[l,x-1]$。\n\nrin 和 len 两人均充分了解规则且无比可爱聪明（都会最大化自己的胜率），过程中谁都知道场上除了 $t$ 以外的一切信息，求 rin 的胜率。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "一行一个整数，表示 rin 的胜率，按分数 $\\bmod~998244353$ 输出。", "hint": "**样例解释1：**  \n\nrin 的胜率为 $\\dfrac 23$（一开始猜 $2$），$\\bmod~998244353$ 后输出为 $665496236$。\n\n***\n\n**本题采用 SubTask 捆绑测试。**\n\n| SubTask 编号 | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $10$ | $n\\equiv 0\\ \\pmod 2$ |\n| $1$ | $20$ | $n\\le 100$ |\n| $2$ | $30$ | $n\\le 10^9$ |\n|$3$|$40$|$n\\le 10^{18}$|\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^{18}$。\n\n---\n**如何对有理数取模？**  \n\n$\\dfrac {x}{y} \\bmod m$ 定义为 $xy^{m-2}\\bmod~m$。\n\n$m$ 必须为质数。  \n\n保证答案约分后分母不为 $998244353$ 的倍数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "〈 TREEのOI 2022 Spring 〉Absolutely Simple Game", "background": "rin 和 len 在玩一个绝对简单的游戏，pcq 为裁判。", "description": "初始时给定范围 $[l,r]=[1,n]$，pcq 从中均匀随机选出一个自然数 $t$，之后 rin 和 len 两人轮流进行操作，rin 先行。\n\n每次操作方猜测一个整数 $x\\in[l,r]$，若 $x=t$，则游戏结束，该方负；若 $x<t$，则调整范围 $[l,r]$ 为 $[x+1,r]$；若 $x>t$，则调整范围 $[l,r]$ 为 $[l,x-1]$。\n\nrin 和 len 两人均充分了解规则且无比可爱聪明（都会最大化自己的胜率），过程中谁都知道场上除了 $t$ 以外的一切信息，求 rin 的胜率。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "一行一个整数，表示 rin 的胜率，按分数 $\\bmod~998244353$ 输出。", "hint": "**样例解释1：**  \n\nrin 的胜率为 $\\dfrac 23$（一开始猜 $2$），$\\bmod~998244353$ 后输出为 $665496236$。\n\n***\n\n**本题采用 SubTask 捆绑测试。**\n\n| SubTask 编号 | 分值 | 特殊限制 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $10$ | $n\\equiv 0\\ \\pmod 2$ |\n| $1$ | $20$ | $n\\le 100$ |\n| $2$ | $30$ | $n\\le 10^9$ |\n|$3$|$40$|$n\\le 10^{18}$|\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^{18}$。\n\n---\n**如何对有理数取模？**  \n\n$\\dfrac {x}{y} \\bmod m$ 定义为 $xy^{m-2}\\bmod~m$。\n\n$m$ 必须为质数。  \n\n保证答案约分后分母不为 $998244353$ 的倍数。", "locale": "zh-CN"}}}
{"pid": "P8308", "type": "P", "difficulty": 4, "samples": [["9 1", "4"], ["27 1", "6"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["数学", "递推", "O2优化", "前缀和", "分块"], "title": "〈 TREEのOI 2022 Spring 〉Counting By Ternary", "background": "黑土地上，一棵小苗破土而出。\n\n几个月里，它吮吸着甘甜的雨露，享受着温暖的阳光，愈发翠绿了起来。\n\n![](https://cdn.pixabay.com/photo/2019/03/05/12/52/plant-4036131_960_720.jpg)\n\n它越长越高，越长越壮，似乎要突破云霄。\n\n它长成了一棵大树，渴望着去天空中，看一看这美丽的世界。\n\n![](https://cdn.pixabay.com/photo/2015/02/24/15/41/wolf-647528_960_720.jpg)", "description": "**请留意本题并不寻常的时空限制。**\n\n给定一个数 $x$，用如下规则建立一棵有根树：\n\n- 根节点为 $\\lang0,x\\rang$。  \n\n- 对于一个节点 $\\lang i,j\\rang$，若 $j < 3$，则它是叶子节点，否则它的子节点为对于任意 $1 \\le k$ 且 $j$ 的位数 $\\ge k$， $\\lang j_k, k\\rang$，其中 $j_k$ 为它三进制表示从左向右的第 $k$ 位。  \n\n求这棵树的叶子节点的数目。", "inputFormat": "一行两个整数 $p, q$，表示 $x = p^q$。", "outputFormat": "一行一个整数，即为所求。  \n\n题目保证答案在 $\\tt int64$ 范围内。", "hint": "\n\n**本题采用 SubTask 捆绑测试。**\n\n| SubTask 编号 | 分值 | 特殊性质 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $10$ | $p\\le 3^{15}$，$q=1$ |\n| $1$ | $10$ | $p\\le 3^{35}$，$q=1$ |\n| $2$ | $20$ | $p=3$，$q\\le 3^{15}$ |\n| $3$ | $60$ | $p=3$，$q\\le 3^{35}$ |\n\n\n对于 $100\\%$ 的数据，$p^q \\le 3^{3^{35}}$（$10^{10^9} \\lt 3^{3^{35} } \\lt 10^{2.5 \\times 10^9}$），保证 $p = 3^l(l\\in \\mathbb N^+)$。 \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "〈 TREEのOI 2022 Spring 〉Counting By Ternary", "background": "黑土地上，一棵小苗破土而出。\n\n几个月里，它吮吸着甘甜的雨露，享受着温暖的阳光，愈发翠绿了起来。\n\n![](https://cdn.pixabay.com/photo/2019/03/05/12/52/plant-4036131_960_720.jpg)\n\n它越长越高，越长越壮，似乎要突破云霄。\n\n它长成了一棵大树，渴望着去天空中，看一看这美丽的世界。\n\n![](https://cdn.pixabay.com/photo/2015/02/24/15/41/wolf-647528_960_720.jpg)", "description": "**请留意本题并不寻常的时空限制。**\n\n给定一个数 $x$，用如下规则建立一棵有根树：\n\n- 根节点为 $\\lang0,x\\rang$。  \n\n- 对于一个节点 $\\lang i,j\\rang$，若 $j < 3$，则它是叶子节点，否则它的子节点为对于任意 $1 \\le k$ 且 $j$ 的位数 $\\ge k$， $\\lang j_k, k\\rang$，其中 $j_k$ 为它三进制表示从左向右的第 $k$ 位。  \n\n求这棵树的叶子节点的数目。", "inputFormat": "一行两个整数 $p, q$，表示 $x = p^q$。", "outputFormat": "一行一个整数，即为所求。  \n\n题目保证答案在 $\\tt int64$ 范围内。", "hint": "\n\n**本题采用 SubTask 捆绑测试。**\n\n| SubTask 编号 | 分值 | 特殊性质 |\n| :-----------: | :-----------: | :-----------: |\n| $0$ | $10$ | $p\\le 3^{15}$，$q=1$ |\n| $1$ | $10$ | $p\\le 3^{35}$，$q=1$ |\n| $2$ | $20$ | $p=3$，$q\\le 3^{15}$ |\n| $3$ | $60$ | $p=3$，$q\\le 3^{35}$ |\n\n\n对于 $100\\%$ 的数据，$p^q \\le 3^{3^{35}}$（$10^{10^9} \\lt 3^{3^{35} } \\lt 10^{2.5 \\times 10^9}$），保证 $p = 3^l(l\\in \\mathbb N^+)$。 \n", "locale": "zh-CN"}}}
{"pid": "P8309", "type": "P", "difficulty": 4, "samples": [["1\n235 423\n544 345\n563 645\n453 435", "380.43769007 531.90429895\n395.56394564 543.23089701\n406.89054360 528.10464158\n391.76428803 516.77804352"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化"], "title": "〈 TREEのOI 2022 Spring 〉Dimension-2 Square", "background": "# 本题可能轻微卡精度，建议改用 $\\tt long\\ double$\n\n\n正月十五夜空中。\n\n一行人望着一棵树，一棵飘在天上的树，期待着它变成一个环。\n\n这棵树有 $4$ 个节点。  \n\n“它变成环了！”有人大喊。  \n我顿时向天上望去……  \n\n多么标准的正方形啊！无论哪个天文学家过来测量，它的角都是标准的 $90^{\\circ}$，它的边都是完美的 $1:1:1:1$……  \n\n只见那棵树，不，那标致而又完美的环，缓缓飞过，恰巧嵌在了那轮明月中心……\n\n![](https://cdn.pixabay.com/photo/2016/11/29/13/14/full-moon-1869760_960_720.jpg)", "description": "给定平面直角坐标系上 $4$ 个点的坐标。\n\n你需要使用 ~~%法~~ 魔法，做一个正方形，使得这 $4$ 个点分别在正方形每条边的**直线**上。", "inputFormat": "**本题采用多组数据评测。**\n\n第一行，输入一个数 $T$，表示数据组数。\n\n对于每组数据，共 $4$ 行，每行两个整数 $x_i,y_i$，表示点的坐标。", "outputFormat": "对于每组数据，输出共 $4$ 行，每行两个实数，表示正方形上的四个点的坐标。你需要保证给出的第 $i$ 个点位于正方形的第 $i$ 个和第 $i\\ \\text{mod}\\ 4+1 $ 个顶点形成的边上，且给出的第 $i$ 个点和第 $i\\ \\text{mod}\\ 4+1$ 个点所在的边为邻边。", "hint": "**本题采用 $\\tt SPJ$。**\n\n如答案不唯一，输出一种即可。   \n四边长度的之差 $\\le 10^{-2}$ 且相邻两边夹角在 $\\frac{\\pi}{2}\\pm10^{-2}$ 内且设给定的点为 $(p,q)$，则存在一点 $(p,q+k)\\ (|k|\\leq1)$ 在对应边所在直线上即可 $\\tt \\green {AC}$。\n\n对于 $30\\%$ 的数据，$T=1,|x_i|,|y_i|\\le10^3$。\n\n对于 $70\\%$ 的数据，$1\\leq T\\leq 5\\times 10^4,|x_i|,|y_i|\\le10^6$。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 5\\times 10^5,|x_i|,|y_i|\\le10^9$。\n\n数据保证任意两点连成的 $6$ 直线两两之间互不垂直，且没有平行于轴的直线，任意三点不共线。保证不存在一组解的边与轴平行。保证有解。\n\n**为了数据的精确性，您输出时至少需要保留 $8$ 位小数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "〈 TREEのOI 2022 Spring 〉Dimension-2 Square", "background": "# 本题可能轻微卡精度，建议改用 $\\tt long\\ double$\n\n\n正月十五夜空中。\n\n一行人望着一棵树，一棵飘在天上的树，期待着它变成一个环。\n\n这棵树有 $4$ 个节点。  \n\n“它变成环了！”有人大喊。  \n我顿时向天上望去……  \n\n多么标准的正方形啊！无论哪个天文学家过来测量，它的角都是标准的 $90^{\\circ}$，它的边都是完美的 $1:1:1:1$……  \n\n只见那棵树，不，那标致而又完美的环，缓缓飞过，恰巧嵌在了那轮明月中心……\n\n![](https://cdn.pixabay.com/photo/2016/11/29/13/14/full-moon-1869760_960_720.jpg)", "description": "给定平面直角坐标系上 $4$ 个点的坐标。\n\n你需要使用 ~~%法~~ 魔法，做一个正方形，使得这 $4$ 个点分别在正方形每条边的**直线**上。", "inputFormat": "**本题采用多组数据评测。**\n\n第一行，输入一个数 $T$，表示数据组数。\n\n对于每组数据，共 $4$ 行，每行两个整数 $x_i,y_i$，表示点的坐标。", "outputFormat": "对于每组数据，输出共 $4$ 行，每行两个实数，表示正方形上的四个点的坐标。你需要保证给出的第 $i$ 个点位于正方形的第 $i$ 个和第 $i\\ \\text{mod}\\ 4+1 $ 个顶点形成的边上，且给出的第 $i$ 个点和第 $i\\ \\text{mod}\\ 4+1$ 个点所在的边为邻边。", "hint": "**本题采用 $\\tt SPJ$。**\n\n如答案不唯一，输出一种即可。   \n四边长度的之差 $\\le 10^{-2}$ 且相邻两边夹角在 $\\frac{\\pi}{2}\\pm10^{-2}$ 内且设给定的点为 $(p,q)$，则存在一点 $(p,q+k)\\ (|k|\\leq1)$ 在对应边所在直线上即可 $\\tt \\green {AC}$。\n\n对于 $30\\%$ 的数据，$T=1,|x_i|,|y_i|\\le10^3$。\n\n对于 $70\\%$ 的数据，$1\\leq T\\leq 5\\times 10^4,|x_i|,|y_i|\\le10^6$。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 5\\times 10^5,|x_i|,|y_i|\\le10^9$。\n\n数据保证任意两点连成的 $6$ 直线两两之间互不垂直，且没有平行于轴的直线，任意三点不共线。保证不存在一组解的边与轴平行。保证有解。\n\n**为了数据的精确性，您输出时至少需要保留 $8$ 位小数。**", "locale": "zh-CN"}}}
{"pid": "P8310", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 5\n1 1 3 3\n2 2 4 2\n3 1 5\n4\n3 1 5", "39\n33"], ["5 7\n1 1 1 1 1\n1 1 3 1\n2 2 4 2\n4\n1 1 5 1\n2 1 5 2\n4\n3 1 5", "31"], ["7 14\n305 740 36 205 343 20 90 \n4\n2 2 7 529\n3 1 2\n1 2 4 713\n4\n3 3 7\n3 2 4\n4\n1 6 7 597\n1 1 4 232\n3 2 4\n1 1 3 220\n3 1 7\n4", "391765\n1121480\n1650480\n521784\n763812"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [409600, 409600, 409600, 409600, 409600, 409600, 409600, 409600, 409600, 409600, 46080, 46080, 46080, 46080, 46080, 46080, 46080, 46080, 46080, 46080]}, "tags": ["线段树", "2022", "洛谷原创", "O2优化"], "title": "〈 TREEのOI 2022 Spring 〉Essential Operations", "background": "最近，月球上神秘出现了一个环。\n\n据说，只要拿到这个环，便可以穿越时空……\n\n![](https://tse1-mm.cn.bing.net/th/id/R-C.a57722cfcdec7e164113680dbf6a0403?rik=eVL5ObGthJQrqw&riu=http%3a%2f%2fimg2.diglog.com%2fimg%2f2021%2f1%2f79df8c71177d1b9035a179506645955b.jpg&ehk=yzECJQeeeiBu9KQrax2R7VjKNVzhg2XI1z0ykNOEx2g%3d&risl=&pid=ImgRaw&r=0)", "description": "你需要维护一个 $n$ 个元素的数列 $A$ ，并执行 $m$ 个操作：\n\n- `1 l r x`：$[l,r]$ 区间全部数加 $x$；\n\n- `2 l r x`：$[l,r]$ 区间全部数乘 $x$；\n\n- `3 l r`：输出 $[l,r]$ 区间所有数的和 $S \\bmod 19260817$ 的值；\n\n- `4`：$A$ 数列回溯到上一次`4`操作**前**（如果不存在上一次则回溯到初始状态），同时**倒序执行**上一次回溯后到回溯前的所有`1`操作和`2`操作（见样例解释）。", "inputFormat": "第一行两个正整数 $n,m$ 。\n\n第二行 $n$ 个整数，代表 $A$ 的初始状态。\n\n第 $3\\sim m+2$ 行：$m$ 个操作，格式见题目描述。", "outputFormat": "对于每个 $3$ 操作，输出一个正整数后换行。", "hint": "#### 样例解释：\n\n##### 1\n\n1. 初始状态 `1 2 3 4 5`；\n2. `1 1 3 3` -> 此时数列为`4 5 6 4 5`；\n3. `2 2 4 2` -> 此时数列为`4 10 12 8 5`；\n4. `3 1 5` -> $ans=4+10+12+8+5=39$\n5. `4` -> 回溯到初始状态`1 2 3 4 5` -> 依次执行`2 2 4 2`与`1 1 3 3` -> 此时数列为`4 7 9 8 5`；\n6. `3 1 5` -> $ans=4+7+9+8+5=33$\n\n##### 2\n\n1. 初始状态 `1 1 1 1 1`\n2. `1 1 3 1`: `2 2 2 1 1`\n3. `2 2 4 2`: `2 4 4 2 1`\n4. `4`: `2 3 3 2 1`\n5. `1 1 5 1`: `3 4 4 3 2`\n6. `2 1 5 2`: `6 8 8 6 4`\n7. `4`: 回溯到`2 4 4 2 1`并依次执行`2 1 5 2` -> `1 1 5 1`: `5 9 9 5 3`\n8. `3 1 5 2` 答案为 $31$\n\n#### 数据范围\n\n对于前 $10\\%$ 的数据，没有 $4$ 操作。\n\n对于前 $30\\%$ 的数据，$n,m \\le 10^3$。\n\n对于前 $50\\%$ 的数据，空间限制为 $400$ MB，另 $50\\%$ 的数据空间限制为 $45$ MB。\n\n对于 $100\\%$ 的数据， $1 \\le n \\le 5 \\times 10^5$，$0 \\le A_i,x \\le 10^3$，$1 \\le m \\le 10^5$ 。\n\nd0j1a_1701 是个煽凉的出题人，所以时间限制为 $500$ ms。\n\n---\n\n#### 彩蛋\n\n\n> ![](https://cdn.luogu.com.cn/upload/image_hosting/d4pi6qm9.png)\n\n\n***\n\n#### 【后记】\n\n你穿着最新款高科技宇航服登上了月球。\n\n那令人梦寐以求的环，就在眼前。\n\n你缓缓走了过去。\n\n只见环却从四周延伸出透明的屏障，里面散发出蓝绿的光芒，将你罩住。\n\n你飞起来了！你已无法分清是你在控制环，还是环在控制你。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cy4fudx3.png)\n\n突然，一道刺眼的亮光照射了进来，你下意识地闭上了眼睛，耳旁呼呼地响。你感觉好像有风，但又不是普通的风。\n\n突然，风停了。腿脚又站在了陆地上。睁开迷蒙的眼睛，你看见，rin 和 len 在玩一个绝对简单的游戏……", "locale": "zh-CN", "translations": {"zh-CN": {"title": "〈 TREEのOI 2022 Spring 〉Essential Operations", "background": "最近，月球上神秘出现了一个环。\n\n据说，只要拿到这个环，便可以穿越时空……\n\n![](https://tse1-mm.cn.bing.net/th/id/R-C.a57722cfcdec7e164113680dbf6a0403?rik=eVL5ObGthJQrqw&riu=http%3a%2f%2fimg2.diglog.com%2fimg%2f2021%2f1%2f79df8c71177d1b9035a179506645955b.jpg&ehk=yzECJQeeeiBu9KQrax2R7VjKNVzhg2XI1z0ykNOEx2g%3d&risl=&pid=ImgRaw&r=0)", "description": "你需要维护一个 $n$ 个元素的数列 $A$ ，并执行 $m$ 个操作：\n\n- `1 l r x`：$[l,r]$ 区间全部数加 $x$；\n\n- `2 l r x`：$[l,r]$ 区间全部数乘 $x$；\n\n- `3 l r`：输出 $[l,r]$ 区间所有数的和 $S \\bmod 19260817$ 的值；\n\n- `4`：$A$ 数列回溯到上一次`4`操作**前**（如果不存在上一次则回溯到初始状态），同时**倒序执行**上一次回溯后到回溯前的所有`1`操作和`2`操作（见样例解释）。", "inputFormat": "第一行两个正整数 $n,m$ 。\n\n第二行 $n$ 个整数，代表 $A$ 的初始状态。\n\n第 $3\\sim m+2$ 行：$m$ 个操作，格式见题目描述。", "outputFormat": "对于每个 $3$ 操作，输出一个正整数后换行。", "hint": "#### 样例解释：\n\n##### 1\n\n1. 初始状态 `1 2 3 4 5`；\n2. `1 1 3 3` -> 此时数列为`4 5 6 4 5`；\n3. `2 2 4 2` -> 此时数列为`4 10 12 8 5`；\n4. `3 1 5` -> $ans=4+10+12+8+5=39$\n5. `4` -> 回溯到初始状态`1 2 3 4 5` -> 依次执行`2 2 4 2`与`1 1 3 3` -> 此时数列为`4 7 9 8 5`；\n6. `3 1 5` -> $ans=4+7+9+8+5=33$\n\n##### 2\n\n1. 初始状态 `1 1 1 1 1`\n2. `1 1 3 1`: `2 2 2 1 1`\n3. `2 2 4 2`: `2 4 4 2 1`\n4. `4`: `2 3 3 2 1`\n5. `1 1 5 1`: `3 4 4 3 2`\n6. `2 1 5 2`: `6 8 8 6 4`\n7. `4`: 回溯到`2 4 4 2 1`并依次执行`2 1 5 2` -> `1 1 5 1`: `5 9 9 5 3`\n8. `3 1 5 2` 答案为 $31$\n\n#### 数据范围\n\n对于前 $10\\%$ 的数据，没有 $4$ 操作。\n\n对于前 $30\\%$ 的数据，$n,m \\le 10^3$。\n\n对于前 $50\\%$ 的数据，空间限制为 $400$ MB，另 $50\\%$ 的数据空间限制为 $45$ MB。\n\n对于 $100\\%$ 的数据， $1 \\le n \\le 5 \\times 10^5$，$0 \\le A_i,x \\le 10^3$，$1 \\le m \\le 10^5$ 。\n\nd0j1a_1701 是个煽凉的出题人，所以时间限制为 $500$ ms。\n\n---\n\n#### 彩蛋\n\n\n> ![](https://cdn.luogu.com.cn/upload/image_hosting/d4pi6qm9.png)\n\n\n***\n\n#### 【后记】\n\n你穿着最新款高科技宇航服登上了月球。\n\n那令人梦寐以求的环，就在眼前。\n\n你缓缓走了过去。\n\n只见环却从四周延伸出透明的屏障，里面散发出蓝绿的光芒，将你罩住。\n\n你飞起来了！你已无法分清是你在控制环，还是环在控制你。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cy4fudx3.png)\n\n突然，一道刺眼的亮光照射了进来，你下意识地闭上了眼睛，耳旁呼呼地响。你感觉好像有风，但又不是普通的风。\n\n突然，风停了。腿脚又站在了陆地上。睁开迷蒙的眼睛，你看见，rin 和 len 在玩一个绝对简单的游戏……", "locale": "zh-CN"}}}
{"pid": "P8311", "type": "P", "difficulty": 2, "samples": [["1\n10", "0"], ["3\n5 5 5", "20"], ["4\n7 3 3 5", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #4] Autići", "background": "", "description": "有 $n$ 个好朋友，每人有一辆遥控汽车和一个车库。第 $i$ 个人有若干个长度为 $d_i$ 的玩具道路部件，可以为汽车建造道路。\n\n两个朋友 $a$ 和 $b$ 可以建造一条长度为 $d_a+d_b$ 道路以连接他们的车库。\n\n我们认为，如果从任意一个车库出发能够到达任意的其他车库，我们称这种情况为“连通交通”。\n\n请求出，构成一个“连通交通”所需要的最小总道路长度是多少？", "inputFormat": "第一行包含一个整数 $n$，表示朋友的人数。\n\n第二行包含 $n$ 个整数 $d_i$，表示第 $i$ 位朋友手中的道路部件的长度。", "outputFormat": "仅一行，输出成一个“连通交通”所需要的最小总道路长度。", "hint": "**【样例 1 解释】**\n\n当只有一位朋友时，已经构成“连通交通”，不必修建道路。故答案为 $0$。\n\n**【样例 3 解释】**\n\n如果在第 $1$ 位和第 $2$ 位朋友、第 $2$ 位和第 $3$ 位朋友、第 $3$ 位和第 $4$ 位朋友之间修建道路可以形成“连通道路”，价格总和为 $(7+3)+(3+3)+(3+5)=24$。\n\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n- Subtask 1（10 pts）：$d_1 = d_2 = \\dots = d_n$。\n- Subtask 2（20 pts）：$1 ≤ n ≤ 10^3$。\n- Subtask 3（20 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5,1\\le d_i\\le 10^9$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T1 Autići。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #4] Autići", "background": "", "description": "有 $n$ 个好朋友，每人有一辆遥控汽车和一个车库。第 $i$ 个人有若干个长度为 $d_i$ 的玩具道路部件，可以为汽车建造道路。\n\n两个朋友 $a$ 和 $b$ 可以建造一条长度为 $d_a+d_b$ 道路以连接他们的车库。\n\n我们认为，如果从任意一个车库出发能够到达任意的其他车库，我们称这种情况为“连通交通”。\n\n请求出，构成一个“连通交通”所需要的最小总道路长度是多少？", "inputFormat": "第一行包含一个整数 $n$，表示朋友的人数。\n\n第二行包含 $n$ 个整数 $d_i$，表示第 $i$ 位朋友手中的道路部件的长度。", "outputFormat": "仅一行，输出成一个“连通交通”所需要的最小总道路长度。", "hint": "**【样例 1 解释】**\n\n当只有一位朋友时，已经构成“连通交通”，不必修建道路。故答案为 $0$。\n\n**【样例 3 解释】**\n\n如果在第 $1$ 位和第 $2$ 位朋友、第 $2$ 位和第 $3$ 位朋友、第 $3$ 位和第 $4$ 位朋友之间修建道路可以形成“连通道路”，价格总和为 $(7+3)+(3+3)+(3+5)=24$。\n\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n- Subtask 1（10 pts）：$d_1 = d_2 = \\dots = d_n$。\n- Subtask 2（20 pts）：$1 ≤ n ≤ 10^3$。\n- Subtask 3（20 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5,1\\le d_i\\le 10^9$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T1 Autići。**", "locale": "zh-CN"}}}
{"pid": "P8312", "type": "P", "difficulty": 3, "samples": [["4 7\n1 2 1\n1 4 10\n2 3 1\n2 4 5\n3 2 2\n3 4 1\n4 3 2\n1 3\n1 4\n4 2\n3 3\n", "10\n-1\n0"], ["4 7\n1 2 1\n1 4 10\n2 3 1\n2 4 5\n3 2 2\n3 4 1\n4 3 2\n2 3\n1 4\n4 2\n3 3", "6\n4\n0\n"], ["4 7\n1 2 1\n1 4 10\n2 3 1\n2 4 5\n3 2 2\n3 4 1\n4 3 2\n3 3\n1 4\n4 2\n3 3", "3\n4\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #4] Autobus", "background": "", "description": "在一个国家里有 $n$ 座城市。这些城市由 $m$ 条公交线路连接，其中第 $i$ 条线路从城市 $a_i$ 出发，到 $b_i$ 停止，路程中耗时 $t_i$ 分钟。\n\nEma 喜欢旅行，但她并不喜欢在公交线路之间换乘。在旅行过程中，她希望**最多**只需坐 $k$ 个不同的公交线路。\n\nEma 想知道，从城市 $c_i$ 到城市 $d_i$ 的最短旅行时间是多少（最多坐 $k$ 个不同的公交线路）。", "inputFormat": "第一行包含两个整数 $n,m$，分别表示城市的数量和公交车线路的数量。\n\n接下来 $m$ 行，第 $i+1$ 包含三个整数 $a_i,b_i,t_i$，分别表示第 $i$ 条公交车线路的起点、终点和从起点到终点所需的时间。\n\n接下来一行包含两个整数 $k,q$，最大坐的不同公交线路的个数和问题题的个数。\n\n接下来 $q$ 行，第 $m+j+3$ 行包含两个整数 $c_j,d_j$，表示询问从城市 $c_j$ 到城市 $d_j$ 的最短旅行时间。", "outputFormat": "输出包含 $q$ 行，第 $i$ 行包含一个整数，表示从城市 $c_i$ 到城市 $d_i$ 的最短旅行时间。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxv8k07a.png)\n\n每个样例中的答案都已经标记在图中。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（15 pts）：$k ≤ n ≤ 7$。\n- Subtask 2（15 pts）：$k ≤ 3$。\n- Subtask 3（25 pts）：$k ≤ n$。\n- Subtask 4（15 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 70,1\\le m,t_i\\le 10^6,1\\le a_i,b_i,c_j,d_j\\le n,1\\le k\\le10^9,1\\le q \\le n^2$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T2  Autobus。** ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #4] Autobus", "background": "", "description": "在一个国家里有 $n$ 座城市。这些城市由 $m$ 条公交线路连接，其中第 $i$ 条线路从城市 $a_i$ 出发，到 $b_i$ 停止，路程中耗时 $t_i$ 分钟。\n\nEma 喜欢旅行，但她并不喜欢在公交线路之间换乘。在旅行过程中，她希望**最多**只需坐 $k$ 个不同的公交线路。\n\nEma 想知道，从城市 $c_i$ 到城市 $d_i$ 的最短旅行时间是多少（最多坐 $k$ 个不同的公交线路）。", "inputFormat": "第一行包含两个整数 $n,m$，分别表示城市的数量和公交车线路的数量。\n\n接下来 $m$ 行，第 $i+1$ 包含三个整数 $a_i,b_i,t_i$，分别表示第 $i$ 条公交车线路的起点、终点和从起点到终点所需的时间。\n\n接下来一行包含两个整数 $k,q$，最大坐的不同公交线路的个数和问题题的个数。\n\n接下来 $q$ 行，第 $m+j+3$ 行包含两个整数 $c_j,d_j$，表示询问从城市 $c_j$ 到城市 $d_j$ 的最短旅行时间。", "outputFormat": "输出包含 $q$ 行，第 $i$ 行包含一个整数，表示从城市 $c_i$ 到城市 $d_i$ 的最短旅行时间。", "hint": "**【样例解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxv8k07a.png)\n\n每个样例中的答案都已经标记在图中。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（15 pts）：$k ≤ n ≤ 7$。\n- Subtask 2（15 pts）：$k ≤ 3$。\n- Subtask 3（25 pts）：$k ≤ n$。\n- Subtask 4（15 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 70,1\\le m,t_i\\le 10^6,1\\le a_i,b_i,c_j,d_j\\le n,1\\le k\\le10^9,1\\le q \\le n^2$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T2  Autobus。** ", "locale": "zh-CN"}}}
{"pid": "P8313", "type": "P", "difficulty": 6, "samples": [["2\n1 1", "3"], ["3\n2 1 2", "4"], ["5\n2 2 1 2 3", "10"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #4] Izbori", "background": "", "description": "Malnar 先生正在竞选县长，这个县一共有 $n$ 栋房屋，每栋房屋里都住着一位居民。Malnar 先生知道，选举的赢家不一定是最好的候选人，而是在选举前举办的宴会最好的候选人。因此，在选举前几天，他将邀请第 $l$ 至 $r(l\\le r)$ 栋房屋内居住的居民，为他们准备一顿丰盛的晚餐。\n\nMalnar 先生知道所有居民最喜欢吃的菜。在宴会上，他会准备大多数人喜欢的一道菜。如果一个人吃到了自己最喜欢吃的菜，将会投一票给 Malnar 先生。但是如果没有吃到自己最喜欢吃的菜，他们将会把票投给 Vlado 先生。如果没有来参加晚宴的居民，他们将会忘记选举，不做出任何投票。如果一个候选人获得了投了票的人中一半以上的人的支持，他将会赢得竞选。\n\nMalnar 先生想知道，有多少组的 $(l,r)$ 可以使他赢得竞选。", "inputFormat": "第一行包含一个整数 $n$，表示房屋的数量。\n\n第二行包含 $n$ 个整数 $a_i$，表示第 $i$ 栋房屋内居民最喜欢的菜。", "outputFormat": "仅一行，输出可以使 Malnar 先生赢得竞选的 $(l,r)$ 的组数。", "hint": "**【样例 2 解释】**\n\n可以使 Malnar 先生赢得竞选的 $(l,r)$ 为：$(1, 1),(2, 2),(3, 3),(1, 3)$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$1 ≤ n ≤ 300$。\n- Subtask 2（15 pts）：$1 ≤ n ≤ 2\\times10^3$。\n- Subtask 3（15 pts）：$\\forall i\\in\\{1,2,3,\\dots,n\\},1 ≤ a_i ≤ 2$。\n- Subtask 4（70 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$1 \\le l\\le r ≤ n ≤ 2\\times10^5,1 ≤ a_i ≤ 10^9$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T3 Izbori。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #4] Izbori", "background": "", "description": "Malnar 先生正在竞选县长，这个县一共有 $n$ 栋房屋，每栋房屋里都住着一位居民。Malnar 先生知道，选举的赢家不一定是最好的候选人，而是在选举前举办的宴会最好的候选人。因此，在选举前几天，他将邀请第 $l$ 至 $r(l\\le r)$ 栋房屋内居住的居民，为他们准备一顿丰盛的晚餐。\n\nMalnar 先生知道所有居民最喜欢吃的菜。在宴会上，他会准备大多数人喜欢的一道菜。如果一个人吃到了自己最喜欢吃的菜，将会投一票给 Malnar 先生。但是如果没有吃到自己最喜欢吃的菜，他们将会把票投给 Vlado 先生。如果没有来参加晚宴的居民，他们将会忘记选举，不做出任何投票。如果一个候选人获得了投了票的人中一半以上的人的支持，他将会赢得竞选。\n\nMalnar 先生想知道，有多少组的 $(l,r)$ 可以使他赢得竞选。", "inputFormat": "第一行包含一个整数 $n$，表示房屋的数量。\n\n第二行包含 $n$ 个整数 $a_i$，表示第 $i$ 栋房屋内居民最喜欢的菜。", "outputFormat": "仅一行，输出可以使 Malnar 先生赢得竞选的 $(l,r)$ 的组数。", "hint": "**【样例 2 解释】**\n\n可以使 Malnar 先生赢得竞选的 $(l,r)$ 为：$(1, 1),(2, 2),(3, 3),(1, 3)$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$1 ≤ n ≤ 300$。\n- Subtask 2（15 pts）：$1 ≤ n ≤ 2\\times10^3$。\n- Subtask 3（15 pts）：$\\forall i\\in\\{1,2,3,\\dots,n\\},1 ≤ a_i ≤ 2$。\n- Subtask 4（70 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$1 \\le l\\le r ≤ n ≤ 2\\times10^5,1 ≤ a_i ≤ 10^9$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T3 Izbori。**", "locale": "zh-CN"}}}
{"pid": "P8314", "type": "P", "difficulty": 6, "samples": [["9 3\n1 2 5\n1 3 1\n3 4 10\n3 5 9\n5 6 8\n2 7 1\n2 8 2\n8 9 7", "8\n4 5 8"], ["5 2\n1 2 3\n2 3 7\n3 4 3\n4 5 3", "3\n2 4"], ["7 4\n1 3 1\n1 4 1\n2 3 1\n5 3 1\n4 7 1\n4 6 1\n", "1\n3 4 1 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #4] Parkovi", "background": "市政府决定修建公园来美化景观。为了让公园不仅好看，而且有用。市政府为了市民的幸福，希望公园里居民们更近一些。", "description": "这个城市由 $n$ 个社区组成，社区间由 $n-1$ 条道路连接。并且从任意一个社区出发，可以到任意一个社区去。一共会建造 $k$ 座公园，同一个社区内只会存在一座公园。市政府希望尽可能减小从每个社区到最近公园的距离的最大值。\n\n帮助政府应该在那些社区建造公园，可以使每个社区到最近公园的距离的最大值最小。", "inputFormat": "第一行包含两个整数 $n,k$，分别表示社区数目和需要建造的公园数目。\n\n接下来 $n-1$ 行，第 $i$ 行包含三个数 $a_i,b_i,w_i$，分别表示有一条长度为 $w_i$ 道路连接着社区 $a_i,b_i$。", "outputFormat": "第一行包含一个整数，即每个社区到最近公园的距离的最大值的最小值。\n\n第二行包含 $k$ 个整数，可以使每个社区到最近公园的距离的最大值最小所需要修建的公园所在的社区编号。\n\n**如果有多组解输出一组解。**", "hint": "**【样例 3 解释】**\n\n如果只在 $3,4$ 号社区建公园，最大距离不会改变。但是市政府想建 $k$ 个公园，所以需要在其他地方再建两个。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$1 ≤ n ≤ 20$。\n- Subtask 2（10 pts）：$k=1$。\n- Subtask 3（30 pts）：$\\forall i\\in\\{1,2,3,\\dots,n-1\\},a_i=i,b_i=i+1$。\n- Subtask 4（60 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le2\\times10^5,1\\le a_i,b_i\\le n,1\\le w_i \\le 1e9$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T4 Parkovi。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #4] Parkovi", "background": "市政府决定修建公园来美化景观。为了让公园不仅好看，而且有用。市政府为了市民的幸福，希望公园里居民们更近一些。", "description": "这个城市由 $n$ 个社区组成，社区间由 $n-1$ 条道路连接。并且从任意一个社区出发，可以到任意一个社区去。一共会建造 $k$ 座公园，同一个社区内只会存在一座公园。市政府希望尽可能减小从每个社区到最近公园的距离的最大值。\n\n帮助政府应该在那些社区建造公园，可以使每个社区到最近公园的距离的最大值最小。", "inputFormat": "第一行包含两个整数 $n,k$，分别表示社区数目和需要建造的公园数目。\n\n接下来 $n-1$ 行，第 $i$ 行包含三个数 $a_i,b_i,w_i$，分别表示有一条长度为 $w_i$ 道路连接着社区 $a_i,b_i$。", "outputFormat": "第一行包含一个整数，即每个社区到最近公园的距离的最大值的最小值。\n\n第二行包含 $k$ 个整数，可以使每个社区到最近公园的距离的最大值最小所需要修建的公园所在的社区编号。\n\n**如果有多组解输出一组解。**", "hint": "**【样例 3 解释】**\n\n如果只在 $3,4$ 号社区建公园，最大距离不会改变。但是市政府想建 $k$ 个公园，所以需要在其他地方再建两个。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$1 ≤ n ≤ 20$。\n- Subtask 2（10 pts）：$k=1$。\n- Subtask 3（30 pts）：$\\forall i\\in\\{1,2,3,\\dots,n-1\\},a_i=i,b_i=i+1$。\n- Subtask 4（60 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le2\\times10^5,1\\le a_i,b_i\\le n,1\\le w_i \\le 1e9$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T4 Parkovi。**", "locale": "zh-CN"}}}
{"pid": "P8315", "type": "P", "difficulty": 5, "samples": [["3 1 2\n1 2\n2 3\n1 3\n", "2"], ["4 3 2\n1 2\n2 3\n4 2\n1 4\n1 3\n4 3\n", "0"], ["4 3 3\n1 2\n2 3\n4 2\n1 4\n1 3\n4 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2021", "状态合并", "容斥原理", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #4] Šarenlist", "background": "温暖的夏夜，Vito 和他的好朋友 Karlo 躺在森林的空地上看星星。突然，Vito 大喊：“Karlo，你看！我们周围的树都在变色！”“哇，真是五彩缤纷！”Karlo 惊讶地说。的确，森林中的树枝开始变色。", "description": "Vito 和 Karlo 被这些彩色的树迷住了，他们同时也注意到了一些事物。他们正在看的每棵树都可以看做是一个树图，即任意两点之间仅存在一条路径的无向图。他们正在看的每棵树都有这样的特点：每条边上的颜色都是 $k$ 种颜色中的一种。如果树上的一个路径是彩色的，意味着这条路径上至少包含两种不同颜色的边。\n\n早上树的魔力全部消失了。Vito 和 Karlo 还记得 $m$ 条彩色路径的起点和终点。他们想知道：满足条件的树的有多少种可能？由于答案可能很大，所以请将答案对 $10^9+7$ 取模。", "inputFormat": "第一行包含三个整数 $n,m,k$，分别表示树上的节点数、Vito 和 Karlo 所记得的彩色路径的个数和树枝的颜色总数。\n\n接下来 $n-1$ 行，第 $i+1$ 行包含两个整数 $a_i,b_i$，表示点 $a_i$ 和点 $b_i$ 之间有一条树边。\n\n接下来 $m$ 行，第 $n+j$ 行包含两个整数 $c_j,d_j$，表示从点 $c_j$ 到点 $d_j$ 之间有一条彩色路径。保证 $c_j$ 和 $d_j$ **不相邻**。", "outputFormat": "仅一行，输出满足条件的树的可能数，答案需对 $10^9+7$ 取模。", "hint": "**【样例 1 解释】**\n\n第一种情况是点 $1$ 和点 $2$ 之间的边涂颜色 $1$，点 $2$ 和点 $3$ 之间的边涂颜色 $2$。\n\n第二种情况是点 $1$ 和点 $2$ 之间的边涂颜色 $2$，点 $2$ 和点 $3$ 之间的边涂颜色 $1$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$m = 1$。\n- Subtask 2（15 pts）：$m = 2$。\n- Subtask 3（10 pts）：每个树边最多属于 $m$ 条彩色路径中的一条。\n- Subtask 4（10 pts）：$1 ≤ n ≤ 15, k = 2$。\n- Subtask 5（65 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$3 ≤ n ≤ 60, 1 ≤ m ≤ 15, 2 ≤ k ≤ 10^9, 1 ≤ a_i,b_i, c_j , d_j ≤ n$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T5  Šarenlist。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #4] Šarenlist", "background": "温暖的夏夜，Vito 和他的好朋友 Karlo 躺在森林的空地上看星星。突然，Vito 大喊：“Karlo，你看！我们周围的树都在变色！”“哇，真是五彩缤纷！”Karlo 惊讶地说。的确，森林中的树枝开始变色。", "description": "Vito 和 Karlo 被这些彩色的树迷住了，他们同时也注意到了一些事物。他们正在看的每棵树都可以看做是一个树图，即任意两点之间仅存在一条路径的无向图。他们正在看的每棵树都有这样的特点：每条边上的颜色都是 $k$ 种颜色中的一种。如果树上的一个路径是彩色的，意味着这条路径上至少包含两种不同颜色的边。\n\n早上树的魔力全部消失了。Vito 和 Karlo 还记得 $m$ 条彩色路径的起点和终点。他们想知道：满足条件的树的有多少种可能？由于答案可能很大，所以请将答案对 $10^9+7$ 取模。", "inputFormat": "第一行包含三个整数 $n,m,k$，分别表示树上的节点数、Vito 和 Karlo 所记得的彩色路径的个数和树枝的颜色总数。\n\n接下来 $n-1$ 行，第 $i+1$ 行包含两个整数 $a_i,b_i$，表示点 $a_i$ 和点 $b_i$ 之间有一条树边。\n\n接下来 $m$ 行，第 $n+j$ 行包含两个整数 $c_j,d_j$，表示从点 $c_j$ 到点 $d_j$ 之间有一条彩色路径。保证 $c_j$ 和 $d_j$ **不相邻**。", "outputFormat": "仅一行，输出满足条件的树的可能数，答案需对 $10^9+7$ 取模。", "hint": "**【样例 1 解释】**\n\n第一种情况是点 $1$ 和点 $2$ 之间的边涂颜色 $1$，点 $2$ 和点 $3$ 之间的边涂颜色 $2$。\n\n第二种情况是点 $1$ 和点 $2$ 之间的边涂颜色 $2$，点 $2$ 和点 $3$ 之间的边涂颜色 $1$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$m = 1$。\n- Subtask 2（15 pts）：$m = 2$。\n- Subtask 3（10 pts）：每个树边最多属于 $m$ 条彩色路径中的一条。\n- Subtask 4（10 pts）：$1 ≤ n ≤ 15, k = 2$。\n- Subtask 5（65 pts）：没有额外限制。\n\n对于 $100\\%$ 的数据，$3 ≤ n ≤ 60, 1 ≤ m ≤ 15, 2 ≤ k ≤ 10^9, 1 ≤ a_i,b_i, c_j , d_j ≤ n$。\n\n**【提示与说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T5  Šarenlist。**", "locale": "zh-CN"}}}
{"pid": "P8316", "type": "P", "difficulty": 6, "samples": [["12345 20", "9167"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2016", "重庆", "各省省选", "优先队列", "可并堆", "可持久化", "素数判断,质数,筛法"], "title": "[CQOI2016] 伪光滑数 加强版", "background": "原题链接：[P4359 [CQOI2016] 伪光滑数](https://www.luogu.com.cn/problem/P4359)", "description": "若一个大于 $1$ 的整数 $m$ 的**不去重**质因数分解有 $k$ 项，其最大的质因子为 $a_k$，并且满足 $a_{k}^{k} \\leq n$，$a_k \\leq 397$，我们就称整数 $m$ 为 $n$ - 伪光滑数。\n\n给定整数 $n$，求出第 $k$ 大的 $n$ - 伪光滑数。", "inputFormat": "一行，两个整数 $n, k$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 < n \\leq 10^{11}$，$k \\geq 1$，保证至少有 $k$ 个满足要求的数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CQOI2016] 伪光滑数 加强版", "background": "原题链接：[P4359 [CQOI2016] 伪光滑数](https://www.luogu.com.cn/problem/P4359)", "description": "若一个大于 $1$ 的整数 $m$ 的**不去重**质因数分解有 $k$ 项，其最大的质因子为 $a_k$，并且满足 $a_{k}^{k} \\leq n$，$a_k \\leq 397$，我们就称整数 $m$ 为 $n$ - 伪光滑数。\n\n给定整数 $n$，求出第 $k$ 大的 $n$ - 伪光滑数。", "inputFormat": "一行，两个整数 $n, k$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 < n \\leq 10^{11}$，$k \\geq 1$，保证至少有 $k$ 个满足要求的数。", "locale": "zh-CN"}}}
{"pid": "P8317", "type": "P", "difficulty": 5, "samples": [["4\n8 1 2\n1 2 3 2 4 5 4 6\n4 3 2\n1 2 3 4 5 6 7 8 9 10 11 12\n6 2 3\n10 20 50 60 70 30 40 40 30 30 20 40\n10 1 3\n2 4 3 1 4 5 3 1 1 2", "Case #1: 1 3\nCase #2: 0 1\nCase #3: 1 5\nCase #4: 1 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "2021", "福建", "枚举", "分治", "深度优先搜索 DFS", "剪枝"], "title": "[FOI2021] 幸运区间", "background": "2021 年福建省青少年信息学编程水平认证 第四题。", "description": "一个抽奖活动正在进行。每个参加活动的人拿到了 $n$ 个序列，每个序列包含了 $d$ 个正整数，以及一个数字 $k$，代表这些正整数中，存在 $k$ 个幸运数字。\n\n每个拿到序列的人，会从自己手中的序列中选出连续的若干个序列形成一个区间，称之为待选区间。如果待选区间中的每一个序列都包含至少一个幸运数字，则称该区间为幸运区间。当然幸运区间可能不止一个。游戏规定，其中包含的序列最多的即总长度最长的那个幸运区间称为超级幸运区间。\n\n例如：$d=2,k=3$ 时，序列如下：\n\n- 序列 $0$：``115 120``。\n- 序列 $1$：``50 80``。\n- 序列 $2$：``199 30``。\n- 序列 $3$：``40 40``。\n- 序列 $4$：``30 30``。\n- 序列 $5$：``25 40``。\n\n从序列 $0$ 到序列 $2$ 的区间是幸运区间，因为从 $0$ 到 $2$ 中的每个序列都包含了 $120,50$ 或 $30$，共 $3$ 个幸运数字。从序列 $1$ 到序列 $5$ 的区间也是幸运区间，因为 $1$ 到 $5$ 的所有序列都包含 $80,30$ 或 $40$，并且包含了 $5$ 个序列，是总长度最大的超级幸运区间。\n\n每个有序列的人都想知道自己的超级幸运区间是怎样的。编程任务就是对于每个拿到序列的人，输出总长度最大的超级幸运区间的第一个元素的下标和最后一个元素的下标。如果有多个长度一样的，输出第一个元素下标最小的。请注意下标从 $0$ 开始。", "inputFormat": "第一行包含一个整数 $T$，表示拿到序列的人的数量。\n\n接下来 $T$ 组数字，每组描述的是每个人的序列信息。\n\n每组数据的第一行是三个正整数 $n,d,k$，描述如上。接下来一行，包含 $n\\times d$ 个整数，前 $d$ 个整数表示第 $0$ 个序列，接下来 $d$ 个表示第 $1$ 个序列，以此类推。", "outputFormat": "对于每个人，输出一行，``Case #x: y z``，$x$ 表示 $\\text{case}$ 标号（从 $1$ 开始），$y$ 和 $z$ 是答案区间的第一个和最后一个元素的下标。\n\n（``Case`` 与 ``#`` 之间有一个空格，``#`` 与 ``x`` 之间没有空格，``:`` 后面 ``y`` 之前有一个空格，``y`` 与 ``z`` 之间有一个空格）", "hint": "#### 数据范围\n\n对于 $45\\%$ 的数据，$n\\le1000$。\n\n对于 $50\\%$ 的数据，$k=2$。\n\n前两部分数据共计 $70\\%$。\n\n对于 $100\\%$ 的数据，$2\\le k\\le 3$。\n\n输入文件在 $\\text{4.8M}$ 以内，$T=10,1\\le d\\le 4,1\\le$ 每个序列中的数字 $\\le10^5$。\n\n对于最多 $6$ 个 $\\text{case}$，$1\\le n\\le 10^5$，对于其他所有的 $\\text{case}$，$1\\le n\\le 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[FOI2021] 幸运区间", "background": "2021 年福建省青少年信息学编程水平认证 第四题。", "description": "一个抽奖活动正在进行。每个参加活动的人拿到了 $n$ 个序列，每个序列包含了 $d$ 个正整数，以及一个数字 $k$，代表这些正整数中，存在 $k$ 个幸运数字。\n\n每个拿到序列的人，会从自己手中的序列中选出连续的若干个序列形成一个区间，称之为待选区间。如果待选区间中的每一个序列都包含至少一个幸运数字，则称该区间为幸运区间。当然幸运区间可能不止一个。游戏规定，其中包含的序列最多的即总长度最长的那个幸运区间称为超级幸运区间。\n\n例如：$d=2,k=3$ 时，序列如下：\n\n- 序列 $0$：``115 120``。\n- 序列 $1$：``50 80``。\n- 序列 $2$：``199 30``。\n- 序列 $3$：``40 40``。\n- 序列 $4$：``30 30``。\n- 序列 $5$：``25 40``。\n\n从序列 $0$ 到序列 $2$ 的区间是幸运区间，因为从 $0$ 到 $2$ 中的每个序列都包含了 $120,50$ 或 $30$，共 $3$ 个幸运数字。从序列 $1$ 到序列 $5$ 的区间也是幸运区间，因为 $1$ 到 $5$ 的所有序列都包含 $80,30$ 或 $40$，并且包含了 $5$ 个序列，是总长度最大的超级幸运区间。\n\n每个有序列的人都想知道自己的超级幸运区间是怎样的。编程任务就是对于每个拿到序列的人，输出总长度最大的超级幸运区间的第一个元素的下标和最后一个元素的下标。如果有多个长度一样的，输出第一个元素下标最小的。请注意下标从 $0$ 开始。", "inputFormat": "第一行包含一个整数 $T$，表示拿到序列的人的数量。\n\n接下来 $T$ 组数字，每组描述的是每个人的序列信息。\n\n每组数据的第一行是三个正整数 $n,d,k$，描述如上。接下来一行，包含 $n\\times d$ 个整数，前 $d$ 个整数表示第 $0$ 个序列，接下来 $d$ 个表示第 $1$ 个序列，以此类推。", "outputFormat": "对于每个人，输出一行，``Case #x: y z``，$x$ 表示 $\\text{case}$ 标号（从 $1$ 开始），$y$ 和 $z$ 是答案区间的第一个和最后一个元素的下标。\n\n（``Case`` 与 ``#`` 之间有一个空格，``#`` 与 ``x`` 之间没有空格，``:`` 后面 ``y`` 之前有一个空格，``y`` 与 ``z`` 之间有一个空格）", "hint": "#### 数据范围\n\n对于 $45\\%$ 的数据，$n\\le1000$。\n\n对于 $50\\%$ 的数据，$k=2$。\n\n前两部分数据共计 $70\\%$。\n\n对于 $100\\%$ 的数据，$2\\le k\\le 3$。\n\n输入文件在 $\\text{4.8M}$ 以内，$T=10,1\\le d\\le 4,1\\le$ 每个序列中的数字 $\\le10^5$。\n\n对于最多 $6$ 个 $\\text{case}$，$1\\le n\\le 10^5$，对于其他所有的 $\\text{case}$，$1\\le n\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P8318", "type": "P", "difficulty": 2, "samples": [["5 5\n12 1 12 4 2\n1 3 2\n1 4 3\n2 3 4\n1 5 2\n2 1 3", "1 1 2 1 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "洛谷原创", "枚举", "洛谷月赛"], "title": "『JROI-4』淘气的猴子", "background": "众所周知，jockbutt 是一个可爱的女孩纸。\n![](https://cdn.luogu.com.cn/upload/image_hosting/73du6v88.png)", "description": "jockbutt 有一个正整数序列，长度为 $n$，分别为 $a_1,a_2...a_n$，她非常喜欢这个序列，平时都非常爱惜它们。\n\n可是有一天，当 jockbutt 在和你约会的时候，有一只淘气的小猴子改变了这个序列。\n\n猴子操作了 $m$ 次。  \n\n猴子的操作有两种类型：\n\n- $\\texttt{1 x y}$ 表示第 $x$ 个元素加上第 $y$ 个元素。\n- $\\texttt{2 x y}$ 表示第 $x$ 个元素乘上第 $y$ 个元素。\n\n特别且显然地，当 $x=y$，新的 $x$ 就等于原来的 $x$ 的两倍或平方。\n\n序列最后结果形如 $b_1,b_2...b_n$。\n\n等到 jockbutt 回来时，全洛谷的人都在看猴子。$\\colorbox{white}{\\color{white}{\\text{其实 jockbutt 才是他们看的猴子吧}}}$\n\njockbutt 非常生气，希望你能告诉她这个序列最初的形态，也就是 $a_1,a_2,a_3,...,a_n$，否则她就会嘤嘤嘤...", "inputFormat": "一共有 $m+2$ 行。\n\n第一行输入两个数 $n,m$。\n\n第二行输入 $n$ 个数 $b_1,b_2,\\cdots,b_n$，表示经过操作后的序列。\n\n第 $3\\sim m+2$ 行每一行输入 $3$ 个数 $k,x,y$ ，分别表示操作类型，以及操作中的 $x$ 和 $y$。\n\n", "outputFormat": "一行，$n$ 个整数 $a_1,a_2...a_n$，表示序列最初的样子。", "hint": "\n**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | 特殊限制 |\n| :-----------: | :---:| :-----------: |\n| 1 | 25 | $1\\leq n,m\\leq 10$ |\n| 2 | 25 | $1\\leq n\\leq 100$，$1\\leq m \\leq 50 $ |\n| 3 | 50 | 无 |\n\n- 对于 $100\\%$ 的数据满足 $1\\leq n\\le 10^3$，$1\\leq m\\le 200$，对于任意的 $ i $ $ ( 1\\leq i \\leq n ) $，有 $1\\leq a_{i},b_{i} \\leq 2^{60}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-4』淘气的猴子", "background": "众所周知，jockbutt 是一个可爱的女孩纸。\n![](https://cdn.luogu.com.cn/upload/image_hosting/73du6v88.png)", "description": "jockbutt 有一个正整数序列，长度为 $n$，分别为 $a_1,a_2...a_n$，她非常喜欢这个序列，平时都非常爱惜它们。\n\n可是有一天，当 jockbutt 在和你约会的时候，有一只淘气的小猴子改变了这个序列。\n\n猴子操作了 $m$ 次。  \n\n猴子的操作有两种类型：\n\n- $\\texttt{1 x y}$ 表示第 $x$ 个元素加上第 $y$ 个元素。\n- $\\texttt{2 x y}$ 表示第 $x$ 个元素乘上第 $y$ 个元素。\n\n特别且显然地，当 $x=y$，新的 $x$ 就等于原来的 $x$ 的两倍或平方。\n\n序列最后结果形如 $b_1,b_2...b_n$。\n\n等到 jockbutt 回来时，全洛谷的人都在看猴子。$\\colorbox{white}{\\color{white}{\\text{其实 jockbutt 才是他们看的猴子吧}}}$\n\njockbutt 非常生气，希望你能告诉她这个序列最初的形态，也就是 $a_1,a_2,a_3,...,a_n$，否则她就会嘤嘤嘤...", "inputFormat": "一共有 $m+2$ 行。\n\n第一行输入两个数 $n,m$。\n\n第二行输入 $n$ 个数 $b_1,b_2,\\cdots,b_n$，表示经过操作后的序列。\n\n第 $3\\sim m+2$ 行每一行输入 $3$ 个数 $k,x,y$ ，分别表示操作类型，以及操作中的 $x$ 和 $y$。\n\n", "outputFormat": "一行，$n$ 个整数 $a_1,a_2...a_n$，表示序列最初的样子。", "hint": "\n**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | 特殊限制 |\n| :-----------: | :---:| :-----------: |\n| 1 | 25 | $1\\leq n,m\\leq 10$ |\n| 2 | 25 | $1\\leq n\\leq 100$，$1\\leq m \\leq 50 $ |\n| 3 | 50 | 无 |\n\n- 对于 $100\\%$ 的数据满足 $1\\leq n\\le 10^3$，$1\\leq m\\le 200$，对于任意的 $ i $ $ ( 1\\leq i \\leq n ) $，有 $1\\leq a_{i},b_{i} \\leq 2^{60}$。", "locale": "zh-CN"}}}
{"pid": "P8319", "type": "P", "difficulty": 3, "samples": [["5\n1\n2\n5\n8\n114514", "1\n2\n5\n7\n114493\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "洛谷原创", "素数判断,质数,筛法", "洛谷月赛"], "title": "『JROI-4』分数", "background": "在 QQ 群中，经常会出现这样的接龙：\n- 万人血书 xxx（1/10000）$\\to$\n- 万人血书 xxx（1/5000）$\\to$\n- 万人血书 xxx（1/2500）$\\to$\n- 万人血书 xxx（1/1250）$\\to \\dots$\n\n以此类推，在可以约分的情况下，“万人血书”很快就能完成。", "description": "“$x$ 人血书”的过程可以看成一个函数 $f(x)$：\n\n有一个 $\\frac{0}{x}$ 的分数。重复以下步骤直到这个分数为 $1$：\n\n1. 分子 $+1$。\n2. 如果这个分数可以约分，约分到最简形式。\n\n现在小 D 给了你 $T$ 组数据，每组数据都是给定 $n$，求在 $1\\le x\\le n$ 的情况下 $f(x)$ 的最大操作次数。\n\n但是他太菜了，不会，你能帮帮他吗？", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "共 $T$ 行，每行一个整数 $s$ 表示在 $1\\le x\\le n$ 的情况下 $f(x)$ 的最大操作次数。", "hint": "### 样例解释\n\n$f(1)=1,f(2)=2,f(3)=3,f(4)=3,f(5)=5$。\n\n我也想把更大的 $f(x)$ 列出来，但是地方不够了。\n\n### 数据范围\n\n\n对于全部数据，$1\\le T\\le 5\\times 10^5$，$1\\le n\\le 2\\times 10^6$。\n\nSubtask 中没填的部分表示和全部数据的范围一样。\n\n| 子任务编号 | $T$ 的范围 | $n$ 的范围 | 特殊性质 |分值|\n| -----------: | -----------: | -----------: | -----------: |-----------: |\n| Subtask $1$ | $T\\le 3$ | $n\\le 10$ |  |$10$|\n| Subtask $2$ | $T\\le 5$ | $n\\le 10^3$ |  |$30$|\n| Subtask $3$ |  |  | $n$ 为质数|$10$|\n| Subtask $4$  |  | $n\\le 5\\times 10^5$ |  |$20$|\n| Subtask $5$  |  |  |  |$30$|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-4』分数", "background": "在 QQ 群中，经常会出现这样的接龙：\n- 万人血书 xxx（1/10000）$\\to$\n- 万人血书 xxx（1/5000）$\\to$\n- 万人血书 xxx（1/2500）$\\to$\n- 万人血书 xxx（1/1250）$\\to \\dots$\n\n以此类推，在可以约分的情况下，“万人血书”很快就能完成。", "description": "“$x$ 人血书”的过程可以看成一个函数 $f(x)$：\n\n有一个 $\\frac{0}{x}$ 的分数。重复以下步骤直到这个分数为 $1$：\n\n1. 分子 $+1$。\n2. 如果这个分数可以约分，约分到最简形式。\n\n现在小 D 给了你 $T$ 组数据，每组数据都是给定 $n$，求在 $1\\le x\\le n$ 的情况下 $f(x)$ 的最大操作次数。\n\n但是他太菜了，不会，你能帮帮他吗？", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "共 $T$ 行，每行一个整数 $s$ 表示在 $1\\le x\\le n$ 的情况下 $f(x)$ 的最大操作次数。", "hint": "### 样例解释\n\n$f(1)=1,f(2)=2,f(3)=3,f(4)=3,f(5)=5$。\n\n我也想把更大的 $f(x)$ 列出来，但是地方不够了。\n\n### 数据范围\n\n\n对于全部数据，$1\\le T\\le 5\\times 10^5$，$1\\le n\\le 2\\times 10^6$。\n\nSubtask 中没填的部分表示和全部数据的范围一样。\n\n| 子任务编号 | $T$ 的范围 | $n$ 的范围 | 特殊性质 |分值|\n| -----------: | -----------: | -----------: | -----------: |-----------: |\n| Subtask $1$ | $T\\le 3$ | $n\\le 10$ |  |$10$|\n| Subtask $2$ | $T\\le 5$ | $n\\le 10^3$ |  |$30$|\n| Subtask $3$ |  |  | $n$ 为质数|$10$|\n| Subtask $4$  |  | $n\\le 5\\times 10^5$ |  |$20$|\n| Subtask $5$  |  |  |  |$30$|\n", "locale": "zh-CN"}}}
{"pid": "P8320", "type": "P", "difficulty": 4, "samples": [["1\n\n3\n\n1\n\n2\n\n3\n\n\n2\n\n", "\n\n\n? 1 1\n\n? 1 2\n\n? 1 3\n\n? 2 2\n? 1 3\n\n! 1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "洛谷原创", "交互题", "Special Judge", "洛谷月赛"], "title": "『JROI-4』Sunset", "background": "写不出优美的文字，索性不放背景了。【背景待填充】\n\n> 由于这只是个 C，出题人打算良心点，于是加了几个 $0$（指交互次数）（确信）——验题人注。", "description": "**这是一道交互题。**\n\n落日可以抽象成一个序列 $\\{a_n\\}$.\n\n$\\{a_n\\}$ 是一个 $1\\sim n$ 的排列。\n\n你还有一个数列 $\\{d_n\\}$，为**当前** $a$ 数列的前缀最大值。\n\n换言之，\n$$d_i=\\max_{j=1}^i \\{a_j\\}$$\n\n注意：根据前文的定义，$\\{d_n\\}$ 可能随着 $\\{a_n\\}$ 数列的改变而改变。\n\n您可以进行两种不同的操作：\n\n- 指定一个 $i$，询问对于当前的 $a$ 数列， $d_{1\\sim i}$ 中有几个不同的值。\n- 指定一个 $i$，使得 $a_i\\leftarrow 0$.\n\n请使用不超过 $5500$ 次操作求出**原排列**。\n\n**保证交互库是静态的，即交互库不会在交互过程中改变 $a$ 数列。**", "inputFormat": "本题多测，第一行一个整数 $T$，表示测试组数，接下来 $T$ 行每行一个整数 $n$，表示本组数据下数列的长度。\n\n本题使用 IO 交互模式。\n### 交互格式\n- `? 1 i` 询问 $d_{1\\sim i}$ 中有几个不同的值，交互库会返回一个正整数 $x$ 表示答案。\n\n- `? 2 i` 使 $a_i=0$。\n\n- `! a1 a2 a3 ... an` 输出答案。\n\n请注意：在每组数据中，请保证前两种操作的次数总和不超过 $5500$。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n初始的序列 $a$ 为 `1 2 3`，$d$ 为 `1 2 3`.\n\n在对交互库输出了形如 `? 2 2` 的命令后，序列 $a$ 变为 `1 0 3`，$d$ 变为 `1 1 3`，此时 $d_1\\sim d_3$ 中有 $2$ 种不同的值，分别是 $1,3$.\n\n\n\n------------\n\n\n可供选手参考的资料：[OI Wiki-交互题](https://oi-wiki.org/contest/interaction/) **|** [猜数（IO交互版）\n](https://www.luogu.com.cn/problem/P1733)\n\n\n\n------------\n\n## 数据范围\n- 对于 $10\\%$ 的数据，$T=1$；\n- 对于 $30\\%$ 的数据，$n\\le 70$；\n- 对于另外 $20\\%$ 的数据，保证数列 $a$ 随机生成；\n- 对于全部数据：$T \\leq 10,1\\leq n\\leq 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-4』Sunset", "background": "写不出优美的文字，索性不放背景了。【背景待填充】\n\n> 由于这只是个 C，出题人打算良心点，于是加了几个 $0$（指交互次数）（确信）——验题人注。", "description": "**这是一道交互题。**\n\n落日可以抽象成一个序列 $\\{a_n\\}$.\n\n$\\{a_n\\}$ 是一个 $1\\sim n$ 的排列。\n\n你还有一个数列 $\\{d_n\\}$，为**当前** $a$ 数列的前缀最大值。\n\n换言之，\n$$d_i=\\max_{j=1}^i \\{a_j\\}$$\n\n注意：根据前文的定义，$\\{d_n\\}$ 可能随着 $\\{a_n\\}$ 数列的改变而改变。\n\n您可以进行两种不同的操作：\n\n- 指定一个 $i$，询问对于当前的 $a$ 数列， $d_{1\\sim i}$ 中有几个不同的值。\n- 指定一个 $i$，使得 $a_i\\leftarrow 0$.\n\n请使用不超过 $5500$ 次操作求出**原排列**。\n\n**保证交互库是静态的，即交互库不会在交互过程中改变 $a$ 数列。**", "inputFormat": "本题多测，第一行一个整数 $T$，表示测试组数，接下来 $T$ 行每行一个整数 $n$，表示本组数据下数列的长度。\n\n本题使用 IO 交互模式。\n### 交互格式\n- `? 1 i` 询问 $d_{1\\sim i}$ 中有几个不同的值，交互库会返回一个正整数 $x$ 表示答案。\n\n- `? 2 i` 使 $a_i=0$。\n\n- `! a1 a2 a3 ... an` 输出答案。\n\n请注意：在每组数据中，请保证前两种操作的次数总和不超过 $5500$。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n初始的序列 $a$ 为 `1 2 3`，$d$ 为 `1 2 3`.\n\n在对交互库输出了形如 `? 2 2` 的命令后，序列 $a$ 变为 `1 0 3`，$d$ 变为 `1 1 3`，此时 $d_1\\sim d_3$ 中有 $2$ 种不同的值，分别是 $1,3$.\n\n\n\n------------\n\n\n可供选手参考的资料：[OI Wiki-交互题](https://oi-wiki.org/contest/interaction/) **|** [猜数（IO交互版）\n](https://www.luogu.com.cn/problem/P1733)\n\n\n\n------------\n\n## 数据范围\n- 对于 $10\\%$ 的数据，$T=1$；\n- 对于 $30\\%$ 的数据，$n\\le 70$；\n- 对于另外 $20\\%$ 的数据，保证数列 $a$ 随机生成；\n- 对于全部数据：$T \\leq 10,1\\leq n\\leq 500$。", "locale": "zh-CN"}}}
{"pid": "P8321", "type": "P", "difficulty": 6, "samples": [["8\n15 14 13 10 9 6 3 2 \n2 10 8 2 9 1 10 2 ", "114102208"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "O2优化", "排序", "洛谷月赛"], "title": "『JROI-4』沈阳大街 2", "background": "", "description": "给定两个长度为 $n$ 的序列 $A,B$，满足：\n\n* $\\forall 1\\le i<n,A_i \\ge A_{i+1}$ \n\n* $A_n\\ge \\min\\limits_{i=1}^n(B_i)$\n\n$\\pi$ 是一个长度为 $n$ 的排列，定义价值函数 $f(\\pi)$：\n\n$$\nf(\\pi)=\\prod_{i=1}^n\\min(A_i,B_{\\pi(i)})\n$$\n\n每种排列出现的概率相等，求 $f(\\pi)$ 的期望对 $998244353$ 取模的结果。\n\n即求:\n\n$$\n\\left(\\dfrac{1}{n!}\\sum_\\pi f(\\pi)\\right) \\bmod 998244353\n$$\n", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行 $n$ 个整数表示 $A_i$。\n\n第三行 $n$ 个整数表示 $B_i$。", "outputFormat": "输出一行一个整数，为答案。", "hint": "**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | 特殊限制 |\n| :-----------: | :---:| :-----------: |\n| 1 | 5 | $1\\le n\\le 8$ |\n| 2 | 35 | $1\\le n\\le 50$ |\n| 3 | 20 | $A_n\\ge \\max\\limits_{i=1}^n(B_i)$ |\n| 4 | 40 | 无 |\n\n对于 $100\\%$ 的数据满足 $1\\le n\\le 5000$，$1\\le A_i,B_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-4』沈阳大街 2", "background": "", "description": "给定两个长度为 $n$ 的序列 $A,B$，满足：\n\n* $\\forall 1\\le i<n,A_i \\ge A_{i+1}$ \n\n* $A_n\\ge \\min\\limits_{i=1}^n(B_i)$\n\n$\\pi$ 是一个长度为 $n$ 的排列，定义价值函数 $f(\\pi)$：\n\n$$\nf(\\pi)=\\prod_{i=1}^n\\min(A_i,B_{\\pi(i)})\n$$\n\n每种排列出现的概率相等，求 $f(\\pi)$ 的期望对 $998244353$ 取模的结果。\n\n即求:\n\n$$\n\\left(\\dfrac{1}{n!}\\sum_\\pi f(\\pi)\\right) \\bmod 998244353\n$$\n", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行 $n$ 个整数表示 $A_i$。\n\n第三行 $n$ 个整数表示 $B_i$。", "outputFormat": "输出一行一个整数，为答案。", "hint": "**本题采用捆绑测试。**\n\n|  子任务编号 | 分值 | 特殊限制 |\n| :-----------: | :---:| :-----------: |\n| 1 | 5 | $1\\le n\\le 8$ |\n| 2 | 35 | $1\\le n\\le 50$ |\n| 3 | 20 | $A_n\\ge \\max\\limits_{i=1}^n(B_i)$ |\n| 4 | 40 | 无 |\n\n对于 $100\\%$ 的数据满足 $1\\le n\\le 5000$，$1\\le A_i,B_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8322", "type": "P", "difficulty": 7, "samples": [["3 1\n1 6\n2 6\n3 6", "3"], ["4 1\n11 45\n19 81\n31 53\n7 28", "6295"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "『JROI-4』少女幻葬", "background": "[该题原题目背景](https://www.luogu.com.cn/paste/imhwx32x)\n\n[少女幻葬](https://thwiki.cc/%E5%B0%91%E5%A5%B3%E5%B9%BB%E8%91%AC_%EF%BD%9E_Necro-Fantasy)是八云蓝的主题曲，同样也是东方妖妖梦 extra stage 的 boss 战音乐。\n\n是使用 ZUN 号的音乐中最为经典的一首之一。钢琴声仿佛在描绘一个强大而又美丽的妖兽的形象，而嘹亮的 ZUN 号配合蓝华丽的弹幕将死亡的主题表现到了极致。", "description": "给定一个长度为 $n$ 的序列 $a$，并给出序列第 $i$ 个数 $a_i$ 的取值范围 $[l_i,r_i]$。现在蓝想知道有多少个序列 $a$ 满足对于给定的常数 $k$，有：\n\n- 任意相邻两数的最大公因数都不为 $k$； \n\n- 任意相邻三数的最大公因数都恰好为 $k$。\n\n 由于答案可能很大，请输出其 $\\bmod \\space998244353$ 的值。", "inputFormat": "第一行两个数 $n,k$。\n\n接下来 $n$ 行，每行两个数分别表示 $l_i,r_i$。", "outputFormat": "一行，答案对 $998244353$ 取模的结果。", "hint": "【样例解释】\n\n对于样例 $1$，可行的序列有：$[2,6,3],[3,6,4],[4,6,3]$。\n\n【数据范围及约定】\n\n- Subtask1（7pts）$3 \\leq n \\leq 5$，$1 \\leq m \\leq 10$。\n- Subtask2（23pts）$3 \\leq n \\leq 100$，$1 \\leq m \\leq 100$。\n- Subtask3（25pts）$3 \\leq n \\leq 1000$，$1 \\leq m \\leq 1000$。\n- Subtask4（45pts）无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n \\leq 2000$，$1 \\leq l_i \\leq r_i \\leq 5000$，$1 \\leq k \\leq 5000$。\n\n其中 $m=\\max_{i=1}^{n}r_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-4』少女幻葬", "background": "[该题原题目背景](https://www.luogu.com.cn/paste/imhwx32x)\n\n[少女幻葬](https://thwiki.cc/%E5%B0%91%E5%A5%B3%E5%B9%BB%E8%91%AC_%EF%BD%9E_Necro-Fantasy)是八云蓝的主题曲，同样也是东方妖妖梦 extra stage 的 boss 战音乐。\n\n是使用 ZUN 号的音乐中最为经典的一首之一。钢琴声仿佛在描绘一个强大而又美丽的妖兽的形象，而嘹亮的 ZUN 号配合蓝华丽的弹幕将死亡的主题表现到了极致。", "description": "给定一个长度为 $n$ 的序列 $a$，并给出序列第 $i$ 个数 $a_i$ 的取值范围 $[l_i,r_i]$。现在蓝想知道有多少个序列 $a$ 满足对于给定的常数 $k$，有：\n\n- 任意相邻两数的最大公因数都不为 $k$； \n\n- 任意相邻三数的最大公因数都恰好为 $k$。\n\n 由于答案可能很大，请输出其 $\\bmod \\space998244353$ 的值。", "inputFormat": "第一行两个数 $n,k$。\n\n接下来 $n$ 行，每行两个数分别表示 $l_i,r_i$。", "outputFormat": "一行，答案对 $998244353$ 取模的结果。", "hint": "【样例解释】\n\n对于样例 $1$，可行的序列有：$[2,6,3],[3,6,4],[4,6,3]$。\n\n【数据范围及约定】\n\n- Subtask1（7pts）$3 \\leq n \\leq 5$，$1 \\leq m \\leq 10$。\n- Subtask2（23pts）$3 \\leq n \\leq 100$，$1 \\leq m \\leq 100$。\n- Subtask3（25pts）$3 \\leq n \\leq 1000$，$1 \\leq m \\leq 1000$。\n- Subtask4（45pts）无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n \\leq 2000$，$1 \\leq l_i \\leq r_i \\leq 5000$，$1 \\leq k \\leq 5000$。\n\n其中 $m=\\max_{i=1}^{n}r_i$。", "locale": "zh-CN"}}}
{"pid": "P8323", "type": "P", "difficulty": 7, "samples": [["3\n1 2 2\n1 1 1\n\n2 1\n1 1\n1 2\n1 3\n\n3 2\n1 1\n1 2\n2 2\n2 5\n1 36\n\n0 2\n1 7\n2 6", "0\n1352\n10488222\n//下面是加密前的输出\n4\n676\n1682209\n3496074\n4354184"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 5000, 5000, 5000, 5000, 5000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "『JROI-4』傀影与猩红孤钻", "background": "“水……”\n\n在沙尘暴中跋涉许久，又整整一天没有饮水，身体已经逐渐支撑不住了。\n\n凯尔希没有拿水瓶，而是冷冷地说了一句“再撑一会”，随后就自顾自继续向前赶路。\n\n我们已经在沙暴里跋涉了多久？三个小时？还是五个小时？黄沙不停往衣物里涌，狂风则不停将沙尘甩在脸上，刮得眼睛都睁不开。但我们还不能停步，后面的萨卡兹雇佣兵还在紧追不舍，他们尽职尽责，即使是沙暴都阻挡不了他们的脚步。\n\n至于水……或许早就喝完了吧。\n\n听说沙漠里有在空水壶中灌沙来给人以希望的传统，可现在，沙子我已经喝够了，水，我只想喝口水，哪怕用身上所有的硬币去换，我也愿意。\n\n只是在这荒野里，闪亮的金属毫无意义。\n\n紧紧抱着银色的手提箱，我咬紧牙关继续迈步。\n\n耳边都是凄厉的呼啸，像是亡者的哭号，又像是鬼魂的呼唤。索恩教授或许也在其中，呼唤着我的名字？\n\n但我听不太清了。\n\n脑中满是这样的响声，已经多久了？三分钟？三小时？还是三年？\n\n沙尘遮蔽了天空，白天和黑夜已经毫无区别，时间似乎都已凝滞，只有在其中求生的人们，还在忍受着此间种种刑罚。\n\n我只是想做研究，我只是想为科学进步奉献自己的力量，而不是像现在这样，倒在沙海里风干。\n\n脑袋又酸又胀又痛，身体好像早就没了知觉，我是在行走吗，还是在看着这具名为艾利奥特的躯壳蠕动？\n\n不……思考也成为了一种奢求，现在徘徊在脑袋里的，只有一个指令：移动。\n\n移动……移动……移动……\n\n……但沙海是无垠的。\n\n“艾利奥特，张嘴。”\n\n张嘴？\n\n我下意识地放松肌肉，让嘴唇和牙齿露出一条通往口腔的通道。\n\n一串沾满沙土的果实落到了口中。\n\n有些酸涩？有些甘甜？哦，是水，是水。\n\n是水啊。\n\n……\n\n不知从什么时候开始，耳边再也没有风声，大地回复了寂静，只有阳光，沙漠，和两个在沙丘间徒步的凡人。\n\n……\n\n我望向远方，除了黄沙，还是黄沙。\n\n一眼望不到尽头，就像散落满地又被浸湿的皮鞋踩上几脚的技术文件，再也归不拢，再也理不齐。\n\n我忿忿地踢了一脚沙子，看着它们从沙丘尖端翻滚滑落，然后重新融到沙漠中，好似什么都没有发生过。\n\n沙子，沙子。\n\n我生平第一次开始痛恨沙子。\n\n“走吧，很快就能获得补给了。”\n\n凯尔希打断了我的思绪。\n\n可，很快？能有多快？\n\n一些补给？又有多少呢？\n\n呵，凯尔希从来不向人许诺希望。\n\n但至少……\n\n我似乎看见了一颗仙人掌。", "description": "## 我们在题目描述的最下方提供了形式化题意，若您不想阅读整活部分可以直接跳到题目描述的最下方。\n\n神在猩红剧团的探索中取回了自己一部分的力量，不多，但够用。\n\n神见到了傀影。准备使用辉煌裂片对他进行审判。\n\n但是傀影躲进了一个被分成 $d$ 层的 DAG 中。\n\n具体地，DAG 上第 $i$ 层的节点只会连向第 $i+1$ 层的节点。\n\n“那就陪你继续玩玩吧。”神心想。\n\n神决定了一种审判的方式。\n\n具体地，神最开始有一些辉煌裂片。神认为，多项式具有强大的力量，所以辉煌裂片就是多项式。~~我才不告诉你是我懒得编题面。~~\n\n神有三种对辉煌裂片的操作：\n\n1. “无度”\n\n可以让辉煌裂片更加强大。具体地，对 $F(x)$ 进行这个操作就相当于令 $F(x)=F^2(x)$。\n\n2. “文明的存续”\n\n可以让“无度”后的辉煌裂片更加强大。具体地，对 $F(x)$ 进行这个操作就相当于令 $F(x)=F(x^2)$。\n\n3. “夜骇”\n\n可以让两个辉煌裂片进行融合，变得更加强大。具体地，如果对 $F(x)$ 和 $G(x)$ 进行这个操作会返回一个多项式为 $F(x)+G(x)$。\n\n神决定这样对傀影进行审判：\n\n在第一层的节点放置辉煌裂片。\n\n当辉煌裂片进入一个节点前，对自身进行“无度”。\n\n当两个辉煌裂片相遇，对这两个辉煌裂片进行“夜骇”，只会留下一个辉煌裂片为这两个辉煌裂片进行“夜骇”的结果。\n\n辉煌裂片只会在连接该节点的所有边都有辉煌裂片通过后，才会离开该节点。当辉煌裂片离开一个节点时，辉煌裂片会对进行“文明的存续”，然后分裂成若干个和原辉煌裂片相同的辉煌裂片，留下一个辉煌裂片在该节点。然后，每条边都将通过恰好一个辉煌裂片。\n\n若傀影在节点 $u$，而神有一个审判指数（execution points，EXP）$k$，该节点留下的辉煌裂片为 $F_u(x)$，那么傀影将会受到 $F_u(k)$ 伏特的电流。\n\n现在神有一些提问。每个提问类似于，若傀影藏在节点 $u$，且审判指数为 $k$，那么傀影将会受到多少伏特的电流？\n\n神是怜悯的。答案可能过大，他只要求你输出答案对 $7340033(2^{20}\\times7+1)$（一个质数）取模后的结果。\n### 形式化题意\n给你一张分为 $d$ 层的 DAG，每个节点都有一个多项式 $F_u(x)$。**可能会有重边。**\n\n这个 DAG 上第 $i$ 层的节点只会向第 $i+1$ 层的节点连边。\n\n若 $S_u$ 包含所有连向点 $u$ 的节点，那么满足 $F_u(x)=\\sum_{v \\in S_u}F_v^2(x^2)$。\n\n给出第一层节点的多项式，每次询问会给你 $u,k$，然后询问 $F_u(k)$ 对 $7340033(2^{20}\\times7+1)$（一个质数）取模后的结果。\n\n**请注意，重边算作一条边。**", "inputFormat": "第一行一个整数 $d$，表示 DAG 的层数。\n\n接下来一行会有 $d$ 个整数，第 $i$ 个数 $n_i$ 表示第 $i$ 层有 $n_i$ 个节点。\n\n接下来 $n_1$ 行，第 $i$ 行有若干个数表示第一层的 $i$ 号节点的多项式。\n\n具体地，每行第一个数 $p$ 表示多项式的最高次，接下来 $p+1$ 个数表示这个多项式的系数，若其中第 $i$ 个数（不包括 $p$）为 $f_{i-1}$，那么该多项式为 $\\sum_{i=0}^pf_ix^i$。\n\n接下来的输入分为 $d$ 段。第 $i$ 段的开头有两个数 $m,q$ 表示第 $i$ 层有 $m$ 条边，以及神在第 $i$ 层的点中有 $q$ 个询问。\n\n接下来 $m$ 行，每行两个数 $u,v$ 表示第 $i$ 层编号为 $u$ 的点连接了第 $i+1$ 层编号为 $v$ 的点。\n\n接下来 $q$ 行每行两个整数 $u,k$ 表示神询问当傀影在第 $i$ 层编号为 $u$ 的节点上时，且审判指数为 $k$ 时，傀影受到电流的伏特对 $7340033$ 取模后的结果。", "outputFormat": "由于输出可能过大，你需要对输出加密。\n\n具体地，对于第 $k$ 层的询问，若第 $i$ 个询问的答案为 $a_i$，你只需要输出 $(k \\times \\bigoplus_{i=1}^q(q-i) \\times a_i)\\bmod 2^{32}$ 即可。\n\n请注意，输出一共 $d$ 行，每行一个数字。", "hint": "- Subtask1（7pts）$1\\leq d\\leq 2$。\n- Subtask2（20pts）$1\\leq d\\leq 10,\\sum q=1$。\n- Subtask3（13pts）$n_1=2$，且时间限制为 5s。\n- Subtask4（60pts）无特殊限制。\n- Subtack5（0pts）Hack 数据。\n\n对于 $ 100\\% $ 的数据，满足 $1\\leq\\sum n<5060$，$1\\leq d\\leq 10$，$\\sum q\\leq 1.5 \\times 10^6$，$1\\leq w,k<7340033$，$0 \\leq p \\leq 2$。\n\n若第 $i$ 层有 $m_i$ 条边，对于 $i\\neq d$ 保证有 $n_i<n_{i+1}\\leq2\\times n_i$ 和 $n_i\\leq m_i\\leq 3\\times n_i$，且 $m_d=0,1 \\leq n_1 \\leq 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-4』傀影与猩红孤钻", "background": "“水……”\n\n在沙尘暴中跋涉许久，又整整一天没有饮水，身体已经逐渐支撑不住了。\n\n凯尔希没有拿水瓶，而是冷冷地说了一句“再撑一会”，随后就自顾自继续向前赶路。\n\n我们已经在沙暴里跋涉了多久？三个小时？还是五个小时？黄沙不停往衣物里涌，狂风则不停将沙尘甩在脸上，刮得眼睛都睁不开。但我们还不能停步，后面的萨卡兹雇佣兵还在紧追不舍，他们尽职尽责，即使是沙暴都阻挡不了他们的脚步。\n\n至于水……或许早就喝完了吧。\n\n听说沙漠里有在空水壶中灌沙来给人以希望的传统，可现在，沙子我已经喝够了，水，我只想喝口水，哪怕用身上所有的硬币去换，我也愿意。\n\n只是在这荒野里，闪亮的金属毫无意义。\n\n紧紧抱着银色的手提箱，我咬紧牙关继续迈步。\n\n耳边都是凄厉的呼啸，像是亡者的哭号，又像是鬼魂的呼唤。索恩教授或许也在其中，呼唤着我的名字？\n\n但我听不太清了。\n\n脑中满是这样的响声，已经多久了？三分钟？三小时？还是三年？\n\n沙尘遮蔽了天空，白天和黑夜已经毫无区别，时间似乎都已凝滞，只有在其中求生的人们，还在忍受着此间种种刑罚。\n\n我只是想做研究，我只是想为科学进步奉献自己的力量，而不是像现在这样，倒在沙海里风干。\n\n脑袋又酸又胀又痛，身体好像早就没了知觉，我是在行走吗，还是在看着这具名为艾利奥特的躯壳蠕动？\n\n不……思考也成为了一种奢求，现在徘徊在脑袋里的，只有一个指令：移动。\n\n移动……移动……移动……\n\n……但沙海是无垠的。\n\n“艾利奥特，张嘴。”\n\n张嘴？\n\n我下意识地放松肌肉，让嘴唇和牙齿露出一条通往口腔的通道。\n\n一串沾满沙土的果实落到了口中。\n\n有些酸涩？有些甘甜？哦，是水，是水。\n\n是水啊。\n\n……\n\n不知从什么时候开始，耳边再也没有风声，大地回复了寂静，只有阳光，沙漠，和两个在沙丘间徒步的凡人。\n\n……\n\n我望向远方，除了黄沙，还是黄沙。\n\n一眼望不到尽头，就像散落满地又被浸湿的皮鞋踩上几脚的技术文件，再也归不拢，再也理不齐。\n\n我忿忿地踢了一脚沙子，看着它们从沙丘尖端翻滚滑落，然后重新融到沙漠中，好似什么都没有发生过。\n\n沙子，沙子。\n\n我生平第一次开始痛恨沙子。\n\n“走吧，很快就能获得补给了。”\n\n凯尔希打断了我的思绪。\n\n可，很快？能有多快？\n\n一些补给？又有多少呢？\n\n呵，凯尔希从来不向人许诺希望。\n\n但至少……\n\n我似乎看见了一颗仙人掌。", "description": "## 我们在题目描述的最下方提供了形式化题意，若您不想阅读整活部分可以直接跳到题目描述的最下方。\n\n神在猩红剧团的探索中取回了自己一部分的力量，不多，但够用。\n\n神见到了傀影。准备使用辉煌裂片对他进行审判。\n\n但是傀影躲进了一个被分成 $d$ 层的 DAG 中。\n\n具体地，DAG 上第 $i$ 层的节点只会连向第 $i+1$ 层的节点。\n\n“那就陪你继续玩玩吧。”神心想。\n\n神决定了一种审判的方式。\n\n具体地，神最开始有一些辉煌裂片。神认为，多项式具有强大的力量，所以辉煌裂片就是多项式。~~我才不告诉你是我懒得编题面。~~\n\n神有三种对辉煌裂片的操作：\n\n1. “无度”\n\n可以让辉煌裂片更加强大。具体地，对 $F(x)$ 进行这个操作就相当于令 $F(x)=F^2(x)$。\n\n2. “文明的存续”\n\n可以让“无度”后的辉煌裂片更加强大。具体地，对 $F(x)$ 进行这个操作就相当于令 $F(x)=F(x^2)$。\n\n3. “夜骇”\n\n可以让两个辉煌裂片进行融合，变得更加强大。具体地，如果对 $F(x)$ 和 $G(x)$ 进行这个操作会返回一个多项式为 $F(x)+G(x)$。\n\n神决定这样对傀影进行审判：\n\n在第一层的节点放置辉煌裂片。\n\n当辉煌裂片进入一个节点前，对自身进行“无度”。\n\n当两个辉煌裂片相遇，对这两个辉煌裂片进行“夜骇”，只会留下一个辉煌裂片为这两个辉煌裂片进行“夜骇”的结果。\n\n辉煌裂片只会在连接该节点的所有边都有辉煌裂片通过后，才会离开该节点。当辉煌裂片离开一个节点时，辉煌裂片会对进行“文明的存续”，然后分裂成若干个和原辉煌裂片相同的辉煌裂片，留下一个辉煌裂片在该节点。然后，每条边都将通过恰好一个辉煌裂片。\n\n若傀影在节点 $u$，而神有一个审判指数（execution points，EXP）$k$，该节点留下的辉煌裂片为 $F_u(x)$，那么傀影将会受到 $F_u(k)$ 伏特的电流。\n\n现在神有一些提问。每个提问类似于，若傀影藏在节点 $u$，且审判指数为 $k$，那么傀影将会受到多少伏特的电流？\n\n神是怜悯的。答案可能过大，他只要求你输出答案对 $7340033(2^{20}\\times7+1)$（一个质数）取模后的结果。\n### 形式化题意\n给你一张分为 $d$ 层的 DAG，每个节点都有一个多项式 $F_u(x)$。**可能会有重边。**\n\n这个 DAG 上第 $i$ 层的节点只会向第 $i+1$ 层的节点连边。\n\n若 $S_u$ 包含所有连向点 $u$ 的节点，那么满足 $F_u(x)=\\sum_{v \\in S_u}F_v^2(x^2)$。\n\n给出第一层节点的多项式，每次询问会给你 $u,k$，然后询问 $F_u(k)$ 对 $7340033(2^{20}\\times7+1)$（一个质数）取模后的结果。\n\n**请注意，重边算作一条边。**", "inputFormat": "第一行一个整数 $d$，表示 DAG 的层数。\n\n接下来一行会有 $d$ 个整数，第 $i$ 个数 $n_i$ 表示第 $i$ 层有 $n_i$ 个节点。\n\n接下来 $n_1$ 行，第 $i$ 行有若干个数表示第一层的 $i$ 号节点的多项式。\n\n具体地，每行第一个数 $p$ 表示多项式的最高次，接下来 $p+1$ 个数表示这个多项式的系数，若其中第 $i$ 个数（不包括 $p$）为 $f_{i-1}$，那么该多项式为 $\\sum_{i=0}^pf_ix^i$。\n\n接下来的输入分为 $d$ 段。第 $i$ 段的开头有两个数 $m,q$ 表示第 $i$ 层有 $m$ 条边，以及神在第 $i$ 层的点中有 $q$ 个询问。\n\n接下来 $m$ 行，每行两个数 $u,v$ 表示第 $i$ 层编号为 $u$ 的点连接了第 $i+1$ 层编号为 $v$ 的点。\n\n接下来 $q$ 行每行两个整数 $u,k$ 表示神询问当傀影在第 $i$ 层编号为 $u$ 的节点上时，且审判指数为 $k$ 时，傀影受到电流的伏特对 $7340033$ 取模后的结果。", "outputFormat": "由于输出可能过大，你需要对输出加密。\n\n具体地，对于第 $k$ 层的询问，若第 $i$ 个询问的答案为 $a_i$，你只需要输出 $(k \\times \\bigoplus_{i=1}^q(q-i) \\times a_i)\\bmod 2^{32}$ 即可。\n\n请注意，输出一共 $d$ 行，每行一个数字。", "hint": "- Subtask1（7pts）$1\\leq d\\leq 2$。\n- Subtask2（20pts）$1\\leq d\\leq 10,\\sum q=1$。\n- Subtask3（13pts）$n_1=2$，且时间限制为 5s。\n- Subtask4（60pts）无特殊限制。\n- Subtack5（0pts）Hack 数据。\n\n对于 $ 100\\% $ 的数据，满足 $1\\leq\\sum n<5060$，$1\\leq d\\leq 10$，$\\sum q\\leq 1.5 \\times 10^6$，$1\\leq w,k<7340033$，$0 \\leq p \\leq 2$。\n\n若第 $i$ 层有 $m_i$ 条边，对于 $i\\neq d$ 保证有 $n_i<n_{i+1}\\leq2\\times n_i$ 和 $n_i\\leq m_i\\leq 3\\times n_i$，且 $m_d=0,1 \\leq n_1 \\leq 5$。", "locale": "zh-CN"}}}
{"pid": "P8324", "type": "P", "difficulty": 2, "samples": [["3\nA+B->AB\nAB+CD->AC+DB\nAB+B->AB", "DA\nDA\nNE"], ["2\n2AB+A->3AB\n2AB+2AC+2BC->4ABC", "NE\nDA"], ["4\n2H2O+2CO2->2H2CO3\nH2SO4->H2O4\nNH3+H2SO4->NH4SO4\nCH4+2O2->CO2+2H2O", "DA\nNE\nNE\nDA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #5] Kemija", "background": "", "description": "给定 $n$ 个化学方程式。\n\n每个参与反应的分子由若干个原子组成，每个原子由一个字母和一个数字表示，分别代表元素名称和分子中该原子的数量。如果多个分子参与反应，则分子前添加一个数字表示化学计量数。本题中只需考虑每一原子的数量，而不必考虑方程式的合理性。例如，$\\texttt{3AC4B}$ 可以直接视为 $3$ 个 $\\texttt A$、$3$ 个 $\\texttt B$ 和 $12$ 个 $\\texttt C$ 参与反应。当有不同分子位于方程式同一边时，用 $\\texttt +$ 连接。\n\n你的任务是分别检查每个方程式是否已经配平（只需考虑左右原子数量是否都对应相等）。", "inputFormat": "第一行一个正整数 $n$，表示方程式的个数。\n\n接下来的 $n$ 行，每行一个方程式。数据保证每个方程式字符串长度不超过 $1000$，且每个元素都只包含一个大写字母。", "outputFormat": "对于每个方程式，如果已经配平则输出 $\\texttt{DA}$，否则输出 $\\texttt{NE}$。", "hint": "**【样例 3 解释】**\n\n|序号|左侧原子|右侧原子|结果|\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$4 \\times \\texttt H, 6 \\times \\texttt O, 2 \\times \\texttt C$|$4 \\times \\texttt H, 6 \\times \\texttt O, 2 \\times \\texttt C$|$\\green{\\texttt{DA}}$|\n|$2$|$2 \\times \\texttt H, \\red{1 \\times \\texttt S}, 4 \\times \\texttt O$|$2 \\times \\texttt H, 4 \\times \\texttt O$|$\\red{\\texttt{NE}}$|\n|$3$|$1 \\times \\texttt N, \\red{5 \\times \\texttt H}, 1 \\times \\texttt S, 4 \\times \\texttt O$|$1 \\times \\texttt N, \\red{4 \\times \\texttt H}, 1 \\times \\texttt S, 4 \\times \\texttt O$|$\\red{\\texttt{NE}}$|\n|$4$|$1 \\times \\texttt C, 4 \\times \\texttt H, 4 \\times \\texttt O$|$1 \\times \\texttt C, 4 \\times \\texttt H, 4 \\times \\texttt O$|$\\green{\\texttt{DA}}$|\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：方程式中均不含数字。\n- Subtask 2（10 pts）：分子式中均不含数字。\n- Subtask 3（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 1 Kemija。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #5] Kemija", "background": "", "description": "给定 $n$ 个化学方程式。\n\n每个参与反应的分子由若干个原子组成，每个原子由一个字母和一个数字表示，分别代表元素名称和分子中该原子的数量。如果多个分子参与反应，则分子前添加一个数字表示化学计量数。本题中只需考虑每一原子的数量，而不必考虑方程式的合理性。例如，$\\texttt{3AC4B}$ 可以直接视为 $3$ 个 $\\texttt A$、$3$ 个 $\\texttt B$ 和 $12$ 个 $\\texttt C$ 参与反应。当有不同分子位于方程式同一边时，用 $\\texttt +$ 连接。\n\n你的任务是分别检查每个方程式是否已经配平（只需考虑左右原子数量是否都对应相等）。", "inputFormat": "第一行一个正整数 $n$，表示方程式的个数。\n\n接下来的 $n$ 行，每行一个方程式。数据保证每个方程式字符串长度不超过 $1000$，且每个元素都只包含一个大写字母。", "outputFormat": "对于每个方程式，如果已经配平则输出 $\\texttt{DA}$，否则输出 $\\texttt{NE}$。", "hint": "**【样例 3 解释】**\n\n|序号|左侧原子|右侧原子|结果|\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$4 \\times \\texttt H, 6 \\times \\texttt O, 2 \\times \\texttt C$|$4 \\times \\texttt H, 6 \\times \\texttt O, 2 \\times \\texttt C$|$\\green{\\texttt{DA}}$|\n|$2$|$2 \\times \\texttt H, \\red{1 \\times \\texttt S}, 4 \\times \\texttt O$|$2 \\times \\texttt H, 4 \\times \\texttt O$|$\\red{\\texttt{NE}}$|\n|$3$|$1 \\times \\texttt N, \\red{5 \\times \\texttt H}, 1 \\times \\texttt S, 4 \\times \\texttt O$|$1 \\times \\texttt N, \\red{4 \\times \\texttt H}, 1 \\times \\texttt S, 4 \\times \\texttt O$|$\\red{\\texttt{NE}}$|\n|$4$|$1 \\times \\texttt C, 4 \\times \\texttt H, 4 \\times \\texttt O$|$1 \\times \\texttt C, 4 \\times \\texttt H, 4 \\times \\texttt O$|$\\green{\\texttt{DA}}$|\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：方程式中均不含数字。\n- Subtask 2（10 pts）：分子式中均不含数字。\n- Subtask 3（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 1 Kemija。**", "locale": "zh-CN"}}}
{"pid": "P8325", "type": "P", "difficulty": 3, "samples": [["7 25\n.#...#....#....#.....#...\n#.#..#...#.#...#....#.#..\n.#...#..#...#..#...#...#.\n.....#...#.#...#..#.....#\n.....#....#....#...#...#.\n.....#.........#....#.#..\n.....#.........#.....#...", "3"], ["11 17\n.....#........#..\n....#.#........#.\n...#...#....#...#\n..#.....#....#.#.\n.#....#..#....#..\n#....#.#..#......\n.#....#..#.......\n..#.....#........\n...#...#.........\n....#.#..........\n.....#...........", "1"], ["5 11\n##.#.#.#.##\n#.#.#.#.#.#\n.#.#.#.#.#.\n#.#.#.#.#.#\n##.#.#.#.##", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #5] Dijamant", "background": "", "description": "桌上摆放有若干颗『钻石』。\n\n当一个正方形旋转 $45^\\circ$ 时，它就形成了『菱形』的形状。规定外形形如『菱形』且外边框均为 $\\texttt \\#$ 但内部均为 $\\texttt .$ 的图形为一颗『钻石』。\n\n给定一个 $n \\times m$ 大小的桌面，统计桌上摆放有多少颗『钻石』。", "inputFormat": "第一行两个正整数 $n,m$，表示桌面的大小。\n\n接下来的 $n$ 行，每行 $m$ 个字符 $\\texttt \\#$ 或 $\\texttt .$，表示桌面。", "outputFormat": "『钻石』的数量。", "hint": "**【样例 2 解释】**\n\n看起来好像有 $3$ 颗，但实际上有两个『菱形』互相包含，因此不符合『外边框均为 $\\texttt \\#$ 但内部均为 $\\texttt .$』的定义。故只有 $1$ 颗『钻石』。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le n,m \\le 100$。\n- Subtask 2（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2000$。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 2 Dijamant。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #5] Dijamant", "background": "", "description": "桌上摆放有若干颗『钻石』。\n\n当一个正方形旋转 $45^\\circ$ 时，它就形成了『菱形』的形状。规定外形形如『菱形』且外边框均为 $\\texttt \\#$ 但内部均为 $\\texttt .$ 的图形为一颗『钻石』。\n\n给定一个 $n \\times m$ 大小的桌面，统计桌上摆放有多少颗『钻石』。", "inputFormat": "第一行两个正整数 $n,m$，表示桌面的大小。\n\n接下来的 $n$ 行，每行 $m$ 个字符 $\\texttt \\#$ 或 $\\texttt .$，表示桌面。", "outputFormat": "『钻石』的数量。", "hint": "**【样例 2 解释】**\n\n看起来好像有 $3$ 颗，但实际上有两个『菱形』互相包含，因此不符合『外边框均为 $\\texttt \\#$ 但内部均为 $\\texttt .$』的定义。故只有 $1$ 颗『钻石』。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le n,m \\le 100$。\n- Subtask 2（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2000$。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 2 Dijamant。**", "locale": "zh-CN"}}}
{"pid": "P8326", "type": "P", "difficulty": 6, "samples": [["4\n1 1 \\\n3 1 /\n3 2 \\\n1 2 /", "-1"], ["9\n1 2 \\\n1 3 /\n2 1 \\\n2 2 \\\n2 3 \\\n3 1 /\n3 2 \\\n4 2 /\n4 3 \\", "1 3 2 4 1 3 2 4 1"], ["12\n1 2 \\\n1 3 /\n2 1 \\\n2 2 \\\n2 3 \\\n2 4 /\n3 1 /\n3 2 \\\n3 3 \\\n3 4 \\\n4 2 /\n4 3 \\", "1 3 2 4 2 4 1 3 1 3 2 4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #5] Fliper", "background": null, "description": "现有一个包含 $n$ 块挡板的旧弹球机。\n\n游戏在二维平面内进行，其中每块挡板与坐标轴所夹锐角总为 $45^\\circ$，长度为 $1$ 个单位。挡板用其中心坐标 $(x_i,y_i)$ 和字符 / 或 \\ 来表示。小球在碰到挡板后，其运动方向将会旋转 $90^\\circ$。注意，挡板的两面都可使小球的运动方向发生偏转。\n\n不难发现，当小球处于弹球机中时，它只有两种结局：\n\n- 沿着某一方向一直运动下去而不碰到挡板\n- 处于若干个挡板的循环之中\n\n在翻新弹球机的过程中，有四种颜色的染料可供选择。现要将弹球机中的每个挡板进行染色，使得**每一个**循环内经过每一种颜色的次数相同且为偶数。\n\n请给出一种符合题意的染色方式，或证明这样的染色方式不存在。如果不存在，输出 `-1`。", "inputFormat": "第一行一个正整数 $n$，表示挡板的数量。\n\n接下来的 $n$ 行，每行两个正整数 $x_i,y_i$ 和一个字符 $c_i$（/ 或 \\），表示一个挡板。数据保证，挡板的位置不会相互重合。", "outputFormat": "如果不存在符合题意的染色方式，输出 `-1`。\n\n否则输出 $n$ 个整数 $1 \\sim 4$，表示 $n$ 个挡板所选择的染料颜色。如果有多种符合题意的方式，输出任意一种。", "hint": "**【样例 2 图解】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ksajf2n4.png)\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le n \\le 40$。\n- Subtask 2（20 pts）：最多存在一个循环。\n- Subtask 3（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times 10^5$，$0 \\le |x_i|,|y_i| \\le 10^9$。\n\n**【说明】**\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/g6cdziry)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8326)。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/archive/2021_2022/contest5_tasks.pdf) Task 3 Fliper。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #5] Fliper", "background": null, "description": "现有一个包含 $n$ 块挡板的旧弹球机。\n\n游戏在二维平面内进行，其中每块挡板与坐标轴所夹锐角总为 $45^\\circ$，长度为 $1$ 个单位。挡板用其中心坐标 $(x_i,y_i)$ 和字符 / 或 \\ 来表示。小球在碰到挡板后，其运动方向将会旋转 $90^\\circ$。注意，挡板的两面都可使小球的运动方向发生偏转。\n\n不难发现，当小球处于弹球机中时，它只有两种结局：\n\n- 沿着某一方向一直运动下去而不碰到挡板\n- 处于若干个挡板的循环之中\n\n在翻新弹球机的过程中，有四种颜色的染料可供选择。现要将弹球机中的每个挡板进行染色，使得**每一个**循环内经过每一种颜色的次数相同且为偶数。\n\n请给出一种符合题意的染色方式，或证明这样的染色方式不存在。如果不存在，输出 `-1`。", "inputFormat": "第一行一个正整数 $n$，表示挡板的数量。\n\n接下来的 $n$ 行，每行两个正整数 $x_i,y_i$ 和一个字符 $c_i$（/ 或 \\），表示一个挡板。数据保证，挡板的位置不会相互重合。", "outputFormat": "如果不存在符合题意的染色方式，输出 `-1`。\n\n否则输出 $n$ 个整数 $1 \\sim 4$，表示 $n$ 个挡板所选择的染料颜色。如果有多种符合题意的方式，输出任意一种。", "hint": "**【样例 2 图解】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ksajf2n4.png)\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le n \\le 40$。\n- Subtask 2（20 pts）：最多存在一个循环。\n- Subtask 3（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times 10^5$，$0 \\le |x_i|,|y_i| \\le 10^9$。\n\n**【说明】**\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/g6cdziry)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或[发帖](https://www.luogu.com.cn/discuss/lists?forumname=P8326)。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/archive/2021_2022/contest5_tasks.pdf) Task 3 Fliper。**", "locale": "zh-CN"}}}
{"pid": "P8327", "type": "P", "difficulty": 6, "samples": [["6 8\nS 1\nS 2\nS 3\nC 1 6\nS 6\nC 1 6\nS 2\nC 1 6", "NE\nDA\nDA"], ["11 6\nS 4\nS 10\nC 3 11\nC 2 7\nS 6\nC 2 7", "DA\nNE\nDA"], ["20 7\nS 10\nS 15\nS 3\nC 10 15\nS 10\nC 3 15\nC 3 10", "DA\nDA\nNE"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #5] Radio", "background": "", "description": "克罗地亚有 $n$ 个初始状态下关闭的电台。当同时开启两个电台 $i,j$ 且 $i,j$ 不互质时，它们会互相干扰。\n\n你需要写一个支持下列操作的程序：\n\n1. `S x`：将电台的状态取反，即将原来开启的电台关闭，将原来关闭的开启。\n2. `C l r`：检查在 $[l,r]$ 内是否存在互相干扰的现象。如果存在，输出 `DA`，否则输出 `NE`。", "inputFormat": "第一行两个正整数 $n,q$，分别表示电台个数和操作次数。\n\n接下来的 $q$ 行，具体输入格式见题目描述。", "outputFormat": "对于每一次 C 操作，输出 `DA` 或者 `NE`。", "hint": "**【样例 1 解释】**\n\n|C 操作序号|开启电台|是否互相干扰|\n| :----------: | :----------: | :----------: |\n|$1$|$1,2,3$|否|\n|$2$|$1,2,3,6$|是|\n|$3$|$1,3,6$|是|\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le n \\le 100$，$1 \\le q \\le 200$。\n- Subtask 2（30 pts）：对于所有的 C 操作，$l=1,r=n$。\n- Subtask 3（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le x \\le n$，$1 \\le l \\le r \\le n$。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 4 Radio。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #5] Radio", "background": "", "description": "克罗地亚有 $n$ 个初始状态下关闭的电台。当同时开启两个电台 $i,j$ 且 $i,j$ 不互质时，它们会互相干扰。\n\n你需要写一个支持下列操作的程序：\n\n1. `S x`：将电台的状态取反，即将原来开启的电台关闭，将原来关闭的开启。\n2. `C l r`：检查在 $[l,r]$ 内是否存在互相干扰的现象。如果存在，输出 `DA`，否则输出 `NE`。", "inputFormat": "第一行两个正整数 $n,q$，分别表示电台个数和操作次数。\n\n接下来的 $q$ 行，具体输入格式见题目描述。", "outputFormat": "对于每一次 C 操作，输出 `DA` 或者 `NE`。", "hint": "**【样例 1 解释】**\n\n|C 操作序号|开启电台|是否互相干扰|\n| :----------: | :----------: | :----------: |\n|$1$|$1,2,3$|否|\n|$2$|$1,2,3,6$|是|\n|$3$|$1,3,6$|是|\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le n \\le 100$，$1 \\le q \\le 200$。\n- Subtask 2（30 pts）：对于所有的 C 操作，$l=1,r=n$。\n- Subtask 3（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le x \\le n$，$1 \\le l \\le r \\le n$。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 4 Radio。**", "locale": "zh-CN"}}}
{"pid": "P8328", "type": "P", "difficulty": 6, "samples": [["5 3\n4\n1 2\n2 3\n3 1\n5 3", "1\n1 1 0 0"], ["6 6\n4\n1 2\n3 2\n4 3\n5 6", "9\n1 0 1 1"], ["8 7\n7\n1 3\n2 1\n3 4\n5 6\n6 5\n6 7\n8 7", "5\n1 0 1 1 0 1 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #5] Usmjeravanje", "background": "", "description": "永无岛有两条河流。每条河流沿岸分布有若干个城市，其中城市数量分别为 $a,b$。\n\n对于位于同一条河流沿岸的 $i,j$ 两个城市，如果 $i \\lt j$，那么可以通过水路从城市 $i$ 到城市 $j$。\n\n永无岛的居民们已经决定修建 $m$ 条连接第一条河流的城市 $x_i$ 和第二条河流的城市 $y_i$ 的单向航线，但方向有待商榷。\n\n当两个城市之间可以通过水路或航线互相到达时，则称它们是连通的。在所有的城市中，存在若干个城市集合，使得集合中没有任何一对城市是连通的。请为每条航线选择一个方向，使得所有集合中包含元素最多的集合元素个数最少。", "inputFormat": "第一行两个正整数 $a,b$。\n\n第二行一个正整数 $m$。\n\n接下来的 $m$ 行，每行两个正整数 $x_i,y_i$，表示一条连接第一条河流的城市 $x_i$ 和第二条河流的城市 $y_i$ 的单向航线。数据保证没有重复的无序数对 $(x_i,y_i)$ 出现。", "outputFormat": "第一行一个正整数，表示最大集合元素个数的最小值。\n\n第二行 $m$ 个整数 $0$ 或 $1$。其中 $0$ 表示方向从第一条河流的城市 $x_i$ 到第二条河流的城市 $y_i$，$1$ 则相反。\n\n如果有多种符合题意的方案，输出任意一种。", "hint": "**【样例 1 解释】**\n\n最优的方案可以使得每对城市都连通，因此答案为 $1$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le a,b,m \\le 15$。\n- Subtask 2（30 pts）：$1 \\le a,b \\le 1000$。\n- Subtask 3（60 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le a,b,m \\le 2 \\times 10^5$，$1 \\le x_i \\le a$，$1 \\le y_i \\le b$。\n\n**【说明】**\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/uv2vgxxa)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或发帖。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 5 Usmjeravanje。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #5] Usmjeravanje", "background": "", "description": "永无岛有两条河流。每条河流沿岸分布有若干个城市，其中城市数量分别为 $a,b$。\n\n对于位于同一条河流沿岸的 $i,j$ 两个城市，如果 $i \\lt j$，那么可以通过水路从城市 $i$ 到城市 $j$。\n\n永无岛的居民们已经决定修建 $m$ 条连接第一条河流的城市 $x_i$ 和第二条河流的城市 $y_i$ 的单向航线，但方向有待商榷。\n\n当两个城市之间可以通过水路或航线互相到达时，则称它们是连通的。在所有的城市中，存在若干个城市集合，使得集合中没有任何一对城市是连通的。请为每条航线选择一个方向，使得所有集合中包含元素最多的集合元素个数最少。", "inputFormat": "第一行两个正整数 $a,b$。\n\n第二行一个正整数 $m$。\n\n接下来的 $m$ 行，每行两个正整数 $x_i,y_i$，表示一条连接第一条河流的城市 $x_i$ 和第二条河流的城市 $y_i$ 的单向航线。数据保证没有重复的无序数对 $(x_i,y_i)$ 出现。", "outputFormat": "第一行一个正整数，表示最大集合元素个数的最小值。\n\n第二行 $m$ 个整数 $0$ 或 $1$。其中 $0$ 表示方向从第一条河流的城市 $x_i$ 到第二条河流的城市 $y_i$，$1$ 则相反。\n\n如果有多种符合题意的方案，输出任意一种。", "hint": "**【样例 1 解释】**\n\n最优的方案可以使得每对城市都连通，因此答案为 $1$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le a,b,m \\le 15$。\n- Subtask 2（30 pts）：$1 \\le a,b \\le 1000$。\n- Subtask 3（60 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le a,b,m \\le 2 \\times 10^5$，$1 \\le x_i \\le a$，$1 \\le y_i \\le b$。\n\n**【说明】**\n\n本题采用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/uv2vgxxa)。如果对此有疑问或想要 hack，请[私信编写者](https://www.luogu.com.cn/chat?uid=137367)或发帖。\n\n**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 5 Usmjeravanje。**", "locale": "zh-CN"}}}
{"pid": "P8329", "type": "P", "difficulty": 7, "samples": [["5 998244353\n", "1\n2\n12\n120\n"], ["见附件中的 tree/tree_ex2.in", "见附件中的 tree/tree_ex2.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "浙江", "O2优化", "容斥原理"], "title": "[ZJOI2022] 树", "background": "一年一度的 ZJOI 又要举办了，但是老牌出题人九条可怜突然有急事要回趟英国。\n\n“就交给你们啦！一定没有问题 desu！”，说完可怜就跑远了。\n\n忍，爱丽丝，绫和阳子目送着远去的可怜，感到有点茫然，毕竞，ZJOI 只剩不到三星期了。\n\n既然是可怜酱留下的任务，那我们一定要努力完成了，毕竟我才是姐姐”，爱丽丝说。\n\n于是众人就开始热火朝天地出题了，“希望这是第一次也是最后一次了” 大家都不约而同地想。\n\n同时，题目主角就定为九条可怜了！", "description": "九条可怜是一个喜欢树的女孩子，她想生成两棵均有 $n$ 个节点的树。\n\n第一棵树的生成方式是：\n\n1. 节点 $1$ 作为树的根。\n2. 对于 $i \\in [2, n]$，从 $[1, i - 1]$ 中选取一个节点作为 $i$ 的父亲。\n\n第二棵树的生成方式是：\n\n1. 节点 $n$ 作为树的根。\n2. 对于 $i \\in [1, n - 1]$，从 $[i + 1, n]$ 中选取一个节点作为 $i$ 的父亲。\n\n九条可怜希望对于任意 $i \\in [1, n]$，若第一棵树中的节点 $i$ 为叶子，那么第二棵树中的节点 $i$ 为非叶子；若第一棵树中的节点 $i$ 为非叶子，那么第二棵树中的节点 $i$ 为叶子。一个节点被称为叶子当且仅当没有节点的父亲是它。\n\n九条可怜希望你统计生成两棵树的方案数是多少。具体地，你需要对于所有 $n \\in [2, N]$ 都计算方案数。两种方案不同当且仅当存在一棵树中的一个节点 $i$，两种方案中它的父亲不同。因为答案可能很大，你只需要输出答案对 $M$ 取模后的结果。", "inputFormat": "第一行输入两个整数 $N, M$，表示树的节点上限以及模数。", "outputFormat": "输出 $N - 1$ 行，每行一个整数。\n\n具体地，第 $i$ 行输出 $n = i + 1$ 时的答案对 $M$ 取模后的值。\n", "hint": "对于所有测试点：保证 $2 \\le N \\le 500$，$10 \\le M \\le 2^{30}$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $N \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1$ | $10$ | 无 |\n| $2$ | $20$ | 保证 $M$ 为质数 |\n| $3$ | $50$ | 无 |\n| $4$ | $50$ | 保证 $M$ 为质数 |\n| $5$ | $100$ | 无 |\n| $6$ | $100$ | 保证 $M$ 为质数 |\n| $7$ | $500$ | 无 |\n| $8$ | $500$ | 保证 $M$ 为质数 |\n| $9$ | $500$ | 无 |\n| $10$ | $500$ | 保证 $M$ 为质数 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2022] 树", "background": "一年一度的 ZJOI 又要举办了，但是老牌出题人九条可怜突然有急事要回趟英国。\n\n“就交给你们啦！一定没有问题 desu！”，说完可怜就跑远了。\n\n忍，爱丽丝，绫和阳子目送着远去的可怜，感到有点茫然，毕竞，ZJOI 只剩不到三星期了。\n\n既然是可怜酱留下的任务，那我们一定要努力完成了，毕竟我才是姐姐”，爱丽丝说。\n\n于是众人就开始热火朝天地出题了，“希望这是第一次也是最后一次了” 大家都不约而同地想。\n\n同时，题目主角就定为九条可怜了！", "description": "九条可怜是一个喜欢树的女孩子，她想生成两棵均有 $n$ 个节点的树。\n\n第一棵树的生成方式是：\n\n1. 节点 $1$ 作为树的根。\n2. 对于 $i \\in [2, n]$，从 $[1, i - 1]$ 中选取一个节点作为 $i$ 的父亲。\n\n第二棵树的生成方式是：\n\n1. 节点 $n$ 作为树的根。\n2. 对于 $i \\in [1, n - 1]$，从 $[i + 1, n]$ 中选取一个节点作为 $i$ 的父亲。\n\n九条可怜希望对于任意 $i \\in [1, n]$，若第一棵树中的节点 $i$ 为叶子，那么第二棵树中的节点 $i$ 为非叶子；若第一棵树中的节点 $i$ 为非叶子，那么第二棵树中的节点 $i$ 为叶子。一个节点被称为叶子当且仅当没有节点的父亲是它。\n\n九条可怜希望你统计生成两棵树的方案数是多少。具体地，你需要对于所有 $n \\in [2, N]$ 都计算方案数。两种方案不同当且仅当存在一棵树中的一个节点 $i$，两种方案中它的父亲不同。因为答案可能很大，你只需要输出答案对 $M$ 取模后的结果。", "inputFormat": "第一行输入两个整数 $N, M$，表示树的节点上限以及模数。", "outputFormat": "输出 $N - 1$ 行，每行一个整数。\n\n具体地，第 $i$ 行输出 $n = i + 1$ 时的答案对 $M$ 取模后的值。\n", "hint": "对于所有测试点：保证 $2 \\le N \\le 500$，$10 \\le M \\le 2^{30}$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $N \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1$ | $10$ | 无 |\n| $2$ | $20$ | 保证 $M$ 为质数 |\n| $3$ | $50$ | 无 |\n| $4$ | $50$ | 保证 $M$ 为质数 |\n| $5$ | $100$ | 无 |\n| $6$ | $100$ | 保证 $M$ 为质数 |\n| $7$ | $500$ | 无 |\n| $8$ | $500$ | 保证 $M$ 为质数 |\n| $9$ | $500$ | 无 |\n| $10$ | $500$ | 保证 $M$ 为质数 |", "locale": "zh-CN"}}}
{"pid": "P8330", "type": "P", "difficulty": 7, "samples": [["4\n5\n1 2 3 2 1\n5\n1 1 3 1 1\n6\n2 4 2 4 8 8\n5\n1 2 3 4 5\n", "4\n1\n5\n1\n4\n2\n4\n8\n2\n1\n2\n3\n4\n5\n"], ["见附件中的 mode/mode_ex2.in", "见附件中的 mode/mode_ex2.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "浙江", "O2优化", "根号分治"], "title": "[ZJOI2022] 众数", "background": "", "description": "九条可怜是一个有超能力的女孩子，但她的超能力只能作用于一些奇怪的事情上。\n\n有一天，可怜得到了一个序列 $a_1, a_2, \\ldots, a_n$，她可以对这个序列使用一次超能力: 选择一个区\n间 $[l, r]$（$1 \\le l \\le r \\le n$）和一个整数 $k \\in [-{10}^9, {10}^9]$，将区间内的所有数 $a_l, a_{l + 1}, \\ldots, a_r$ 加上 $k$。\n\n九条可怜很喜欢长得比较一致的序列，因此她希望最终的序列众数的出现次数尽可能多。给出序列 $a$，你需要输出最终序列的众数出现次数的最大值，并输出这个众数的所有可能取值。注意对于一个序列，众数的取值可能不止一个。", "inputFormat": "输入包含多组数据，第一行输入数据组数 $T$。\n\n对于接下来的每组数据，第一行输入序列长度 $n$，第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "对于每组数据，第一行输出最终序列众数的出现次数的最大值。\n\n假设这个众数有 $k$ 种不同的可能取值，则接下来 $k$ 行，从小到大输出这些取值。", "hint": "对于所有测试点：$1 \\le T \\le 20$，$2 \\le n \\le 2 \\times {10}^5$，$1 \\le a_i \\le {10}^9$，保证 $\\sum n \\le 5 \\times {10}^5$，且 $a_i$ 不全相等。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $\\sum n \\le$ | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $3000$ | $300$ | 无 |\n| $5 \\sim 8$ | $5 \\times {10}^5$ | $2 \\times {10}^5$ | $a_i$ 只有 $5$ 种取值 |\n| $9 \\sim 10$ | $2 \\times {10}^5$ | $50000$ | 无 |\n| $11 \\sim 20$ | $5 \\times {10}^5$ | $2 \\times {10}^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2022] 众数", "background": "", "description": "九条可怜是一个有超能力的女孩子，但她的超能力只能作用于一些奇怪的事情上。\n\n有一天，可怜得到了一个序列 $a_1, a_2, \\ldots, a_n$，她可以对这个序列使用一次超能力: 选择一个区\n间 $[l, r]$（$1 \\le l \\le r \\le n$）和一个整数 $k \\in [-{10}^9, {10}^9]$，将区间内的所有数 $a_l, a_{l + 1}, \\ldots, a_r$ 加上 $k$。\n\n九条可怜很喜欢长得比较一致的序列，因此她希望最终的序列众数的出现次数尽可能多。给出序列 $a$，你需要输出最终序列的众数出现次数的最大值，并输出这个众数的所有可能取值。注意对于一个序列，众数的取值可能不止一个。", "inputFormat": "输入包含多组数据，第一行输入数据组数 $T$。\n\n对于接下来的每组数据，第一行输入序列长度 $n$，第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "对于每组数据，第一行输出最终序列众数的出现次数的最大值。\n\n假设这个众数有 $k$ 种不同的可能取值，则接下来 $k$ 行，从小到大输出这些取值。", "hint": "对于所有测试点：$1 \\le T \\le 20$，$2 \\le n \\le 2 \\times {10}^5$，$1 \\le a_i \\le {10}^9$，保证 $\\sum n \\le 5 \\times {10}^5$，且 $a_i$ 不全相等。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $\\sum n \\le$ | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $3000$ | $300$ | 无 |\n| $5 \\sim 8$ | $5 \\times {10}^5$ | $2 \\times {10}^5$ | $a_i$ 只有 $5$ 种取值 |\n| $9 \\sim 10$ | $2 \\times {10}^5$ | $50000$ | 无 |\n| $11 \\sim 20$ | $5 \\times {10}^5$ | $2 \\times {10}^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8331", "type": "P", "difficulty": 7, "samples": [["5 5 6\n1 2 10\n2 3 2\n2 4 5\n2 5 4\n4 5 3\n1 5\n2 5\n3 5\n3 4\n4 5\n4 4\n", "32\n12\n16\n16\n12\n0\n"], ["见附件中的 simple/simple_ex2.in", "见附件中的 simple/simple_ex2.ans"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "浙江", "O2优化"], "title": "[ZJOI2022] 简单题", "background": "", "description": "九条可怜是一个喜欢出简单题的女孩子。顾名思义，简单题就是题目里面出现了很多 “简单”。\n\n可怜首先给出一张简单连通无向图，每条边有一个正整数边权。特别地，可怜保证图上任意两个简单环的边权和相等。\n\n后来可怜想要隐藏图里美好的性质，她将其中一部分边的权值改成了新的权值。因此，修改之后原本美好的性质可能就不存在了。\n\n现在她给出修改后的图，同时给出多组询问，每次询问两点 $S, T$ 间所有简单路径权值和。因为答案可能很大，你只需要输出答案对 $998244353$ 取模的结果。\n\n具体地，简单图指不存在重边和自环，简单环和简单路径指不包含重复节点。", "inputFormat": "第一行读入三个整数 $n, m, q$。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，代表一条权值为 $w$ 的无向边 $(u, v)$。\n\n接下来 $q$ 行，读入 $q$ 组询问，每组询问读入一行两个整数 $S, T$。", "outputFormat": "对于每个询问，输出一行一个整数代表答案对 $998244353$ 取模后的结果。", "hint": "对于所有测试点，满足 $1 \\le n, q \\le 5 \\times {10}^5$，$n - 1 \\le m \\le 6.4 \\times {10}^5$，$1 \\le u, v, S, T \\le n$，$1 \\le w \\le {10}^6$，无重边自环，图连通。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | 特殊限制 1 | 特殊限制 2 |\n|:-:|:-:|:-:|\n| $1$ | $m < n$ | 保证存在经过所有点的简单路径 |\n| $2$ | $m < n$ | 无 |\n| $3 \\sim 5$ | 任意一个点不在 $\\ge 2$ 个简单环上 | 保证存在经过所有点的简单路径 |\n| $6 \\sim 8$ | 任意一个点不在 $\\ge 2$ 个简单环上 | 无 |\n| $9 \\sim 14$ | 无 | 保证存在经过所有点的简单路径 |\n| $15 \\sim 20$ | 无 | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2022] 简单题", "background": "", "description": "九条可怜是一个喜欢出简单题的女孩子。顾名思义，简单题就是题目里面出现了很多 “简单”。\n\n可怜首先给出一张简单连通无向图，每条边有一个正整数边权。特别地，可怜保证图上任意两个简单环的边权和相等。\n\n后来可怜想要隐藏图里美好的性质，她将其中一部分边的权值改成了新的权值。因此，修改之后原本美好的性质可能就不存在了。\n\n现在她给出修改后的图，同时给出多组询问，每次询问两点 $S, T$ 间所有简单路径权值和。因为答案可能很大，你只需要输出答案对 $998244353$ 取模的结果。\n\n具体地，简单图指不存在重边和自环，简单环和简单路径指不包含重复节点。", "inputFormat": "第一行读入三个整数 $n, m, q$。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，代表一条权值为 $w$ 的无向边 $(u, v)$。\n\n接下来 $q$ 行，读入 $q$ 组询问，每组询问读入一行两个整数 $S, T$。", "outputFormat": "对于每个询问，输出一行一个整数代表答案对 $998244353$ 取模后的结果。", "hint": "对于所有测试点，满足 $1 \\le n, q \\le 5 \\times {10}^5$，$n - 1 \\le m \\le 6.4 \\times {10}^5$，$1 \\le u, v, S, T \\le n$，$1 \\le w \\le {10}^6$，无重边自环，图连通。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | 特殊限制 1 | 特殊限制 2 |\n|:-:|:-:|:-:|\n| $1$ | $m < n$ | 保证存在经过所有点的简单路径 |\n| $2$ | $m < n$ | 无 |\n| $3 \\sim 5$ | 任意一个点不在 $\\ge 2$ 个简单环上 | 保证存在经过所有点的简单路径 |\n| $6 \\sim 8$ | 任意一个点不在 $\\ge 2$ 个简单环上 | 无 |\n| $9 \\sim 14$ | 无 | 保证存在经过所有点的简单路径 |\n| $15 \\sim 20$ | 无 | 无 |", "locale": "zh-CN"}}}
{"pid": "P8332", "type": "P", "difficulty": 7, "samples": [["0 2 13\n4 2 1 3\n1 4 2 3\n6 2 3 3\n6 2 5 3 1 4\n", "5\n499122191\n"], ["见附件中的 noodle/noodle_ex2.in", "见附件中的 noodle/noodle_ex2.ans"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "浙江", "O2优化"], "title": "[ZJOI2022] 面条", "background": "忍，爱丽丝，绫和阳子一众千辛万苦地总算出好了第一试，按原先计划，可怜会出第二试。\n\n“不好了，可怜给我发信息说她降落后被拉去隔离 30 天了，没有电脑，出不了题”，绫突然收到了不幸的消息。\n\n“那咋办？没 idea 了，编不出来了啊！” 众人慌作一团。\n\n看了看日期，离 ZJOI 还有一周。\n\n欲知后事如何，请看下回分解。", "description": "九条可怜是一个喜欢吃拉面的女孩子。\n\n有一天她去吃拉面，她发现拉面师傅为她拉的是一个长度为 $n$ 的面条，$n$ 保证是偶数，一开始第 $i$ 个位置调料的数量是 $a_i$。\n\n如下过程称为一次 “拉面”：\n\n1. 将面条对折，面条的长度会变成 $\\frac{n}{2}$，第 $i$ 个位置的调料数量会变为原来第 $i$ 个位置的调料与第 $n - i + 1$ 个位置的调料数量之和，如果新面条第 $i$ 个位置的调料数量为 $b_i$，那么满足 $b_i = a_i + a_{n - i + 1}$。\n2. 将面条拉回原来的长度 $n$，每个位置会变为两个位置，并且调料数量会均分，如果现在的第 $i$ 个位置的调料数量是 $a'_i$，那么 $a'_i = \\frac{1}{2} \\times b_{\\left\\lceil \\frac{i}{2} \\right\\rceil}$。\n\n现在对于一个固定的 $x$，你需要回答 $q$ 个询问，每次面条经过 $k$ 次 “拉面” 后，第 $x$ 个位置的调料数量。你只需要求出答案对 $998244353$ 取模的结果。具体地，即如果答案的最简分数表示为 $\\frac{a}{b}$，输出 $a \\times b^{-1} \\bmod 998244353$。", "inputFormat": "第一行输入三个正整数 $test, T, seed$，代表测试点编号，数据组数和生成种子。\n\n接下来输入 $T$ 组数据，每组数据包含两行。\n\n第一行输入四个正整数 $n, q, x, k_{\\mathrm{max}}$，代表这组数据中面条的长度，询问的个数，询问的位置和生成询问中 $k$ 的上限。\n\n第二行输入 $n$ 个非负整数，第 $i$ 个整数 $a_i$ 代表初始面条第 $i$ 个位置的调料数量。\n\n为了避免大量的输入与输出，$q$ 个询问由我们提供的一个生成器生成。具体地，我们提供一个由 C++ 书写的代码框架 `noodle_template.cpp` 供选手使用，见附录，同时在这里我们做一定量的说明：\n\n首先我们从数据中依次读入两个 $32$ 位整型变量 $\\mathit{test}, T$，一个无符号 $64$ 位长整型变量 $\\mathit{seed}$。接下来循环 $T$ 次，代表 $T$ 组数据。\n\n在每次循环中，我们对一组数据进行计算。首先依次读入三个 $32$ 位整型变量 $n, q, x$，一个 $64$ 位整型变量 $k_{\\mathrm{max}}$。接下来读入 $n$ 个 $32$ 位整型变量放入数组 $a_1, \\ldots, a_n$ 中。\n\n接下来是生成 $q$ 个询问的部分，每次调用 `rd()` 函数，将 $\\mathit{seed}$ 作为引用参数传入，将返回值（返回值为无符号 $64$ 位长整型）对 $k_{\\mathrm{max}}$ 取模的结果作为该次询问的参数 $k$，注意到 $\\mathit{seed}$ 也会被修改。", "outputFormat": "输出 $T$ 行，每行一个整数代表该组数据的答案。具体地，假设该组数据有 $q$ 个询问，令第 $i$ 个询问的答案为 $\\mathrm{Ans}_i$，那么需要你输出 $\\bigoplus_{i = 1}^q (\\mathrm{Ans}_i \\cdot i)$，**注意这里不需要取模**。$\\bigoplus$ 指按位异或运算符。", "hint": "**【样例解释 #1】**\n\n第一组测试数据中，$\\{ a_i \\}$ 初始为 $\\{ 1, 4, 2, 3 \\}$。  \n操作一次后为 $\\{ 2, 2, 3, 3 \\}$。  \n操作两次后为 $\\{ \\frac{5}{2}, \\frac{5}{2}, \\frac{5}{2}, \\frac{5}{2} \\}$。\n\n其中生成询问为：  \n询问位置：$x = 1$；  \n第一个询问：$k = 0$，$a_x = 1$；  \n第二个询问：$k = 1$，$a_x = 2$；  \n答案为 $(1 \\times 1) \\oplus (2 \\times 2) = 4 \\oplus 1 = 5$。\n\n第二组测试数据中，$\\{ a_i \\}$ 初始为 $\\{ 6, 2, 5, 3, 1, 4 \\}$。  \n操作一次后为 $\\{ 5, 5, \\frac{3}{2}, \\frac{3}{2}, 4, 4 \\}$。  \n操作两次后为 $\\{ \\frac{9}{2}, \\frac{9}{2}, \\frac{9}{2}, \\frac{9}{2}, \\frac{3}{2}, \\frac{3}{2} \\}$。\n\n其中生成询问为：  \n询问位置：$x = 3$；  \n第一个询问 $k = 2$，$a_x = \\frac{9}{2}$，$\\frac{9}{2} \\equiv 499122181 \\pmod{998244353}$；  \n第二个询问 $k = 0$，$a_x = 5$；  \n答案为 $(499122181 \\times 1) \\oplus (5 \\times 2) = 499122181 \\oplus 10 = 499122191$。\n\n**【数据范围】**\n\n对于所有测试点：保证 $T \\le 10$，$\\sum n \\le 2 \\times {10}^6$，$\\sum q \\le 5 \\times {10}^7$，$k_{\\mathrm{max}} \\le {10}^{18}$，$1 \\le x \\le n$，$0 \\le a_i < 998244353$，$0 \\le \\mathit{seed} \\le 2^{60} - 1$，保证 $n$ 是偶数。\n\n注意，对于样例，测试点编号 $\\mathit{test}$ 为 $0$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $\\sum n \\le$ | $\\sum q \\le$ | $k_{\\mathrm{max}} \\le $ | 特殊限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $500$ | $500$ | $500$ | 无 |\n| $2$ | $2 \\times {10}^6$ | $2 \\times {10}^6$ | $10$ | 无 |\n| $3$ | $2 \\times {10}^6$ | $2 \\times {10}^6$ | ${10}^{18}$ | $n = 2^k$ |\n| $4$ | $50$ | $50$ | ${10}^{18}$ | 无 |\n| $5 \\sim 6$ | $150$ | $150$ | ${10}^{18}$ | 无 |\n| $7$ | $2 \\times {10}^6$ | $2 \\times {10}^6$ | ${10}^{18}$ | $n = 98304$ |\n| $8 \\sim 9$ | $500$ | $500$ | ${10}^{18}$ | 无 |\n| $10 \\sim 11$ | $5 \\times {10}^3$ | $2 \\times {10}^6$ | ${10}^{18}$ | 无 |\n| $12 \\sim 13$ | $2 \\times {10}^6$ | $50$ | ${10}^{18}$ | 无 |\n| $14 \\sim 16$ | ${10}^6$ | ${10}^5$ | ${10}^{18}$ | 无 |\n| $17 \\sim 18$ | $2 \\times {10}^6$ | $2 \\times {10}^7$ | ${10}^{18}$ | 无 |\n| $19 \\sim 20$ | $2 \\times {10}^6$ | $5 \\times {10}^7$ | ${10}^{18}$ | 无 |\n\n**【附录】**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nunsigned long long rd (unsigned long long &x) {\n\tx ^= (x << 13);\n\tx ^= (x >> 7);\n\tx ^= (x << 17);\n\treturn x;\n}\n\nint main () {\n\tint test, T;\n\tunsigned long long seed;\n\tscanf(\"%d%d%llu\", &test, &T, &seed);\n\tfor (int Case = 1; Case <= T; Case ++) {\n\t\tint n, q, x;\n\t\tlong long k_max;\n\t\tscanf(\"%d%d%d%lld\", &n, &q, &x, &k_max);\n\t\tvector<int> a(n + 1);\n\t\tfor (int i = 1; i <= n; i ++) {\n\t\t\tscanf(\"%d\", &a[i]);\n\t\t}\n\t\tfor (int i = 1; i <= q; i ++) {\n\t\t\tlong long k = rd(seed) % k_max;\n\t\t\t/∗\n\t\t\tCode your solution here.\n\t\t\t∗/\n\t\t}\n\t}\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2022] 面条", "background": "忍，爱丽丝，绫和阳子一众千辛万苦地总算出好了第一试，按原先计划，可怜会出第二试。\n\n“不好了，可怜给我发信息说她降落后被拉去隔离 30 天了，没有电脑，出不了题”，绫突然收到了不幸的消息。\n\n“那咋办？没 idea 了，编不出来了啊！” 众人慌作一团。\n\n看了看日期，离 ZJOI 还有一周。\n\n欲知后事如何，请看下回分解。", "description": "九条可怜是一个喜欢吃拉面的女孩子。\n\n有一天她去吃拉面，她发现拉面师傅为她拉的是一个长度为 $n$ 的面条，$n$ 保证是偶数，一开始第 $i$ 个位置调料的数量是 $a_i$。\n\n如下过程称为一次 “拉面”：\n\n1. 将面条对折，面条的长度会变成 $\\frac{n}{2}$，第 $i$ 个位置的调料数量会变为原来第 $i$ 个位置的调料与第 $n - i + 1$ 个位置的调料数量之和，如果新面条第 $i$ 个位置的调料数量为 $b_i$，那么满足 $b_i = a_i + a_{n - i + 1}$。\n2. 将面条拉回原来的长度 $n$，每个位置会变为两个位置，并且调料数量会均分，如果现在的第 $i$ 个位置的调料数量是 $a'_i$，那么 $a'_i = \\frac{1}{2} \\times b_{\\left\\lceil \\frac{i}{2} \\right\\rceil}$。\n\n现在对于一个固定的 $x$，你需要回答 $q$ 个询问，每次面条经过 $k$ 次 “拉面” 后，第 $x$ 个位置的调料数量。你只需要求出答案对 $998244353$ 取模的结果。具体地，即如果答案的最简分数表示为 $\\frac{a}{b}$，输出 $a \\times b^{-1} \\bmod 998244353$。", "inputFormat": "第一行输入三个正整数 $test, T, seed$，代表测试点编号，数据组数和生成种子。\n\n接下来输入 $T$ 组数据，每组数据包含两行。\n\n第一行输入四个正整数 $n, q, x, k_{\\mathrm{max}}$，代表这组数据中面条的长度，询问的个数，询问的位置和生成询问中 $k$ 的上限。\n\n第二行输入 $n$ 个非负整数，第 $i$ 个整数 $a_i$ 代表初始面条第 $i$ 个位置的调料数量。\n\n为了避免大量的输入与输出，$q$ 个询问由我们提供的一个生成器生成。具体地，我们提供一个由 C++ 书写的代码框架 `noodle_template.cpp` 供选手使用，见附录，同时在这里我们做一定量的说明：\n\n首先我们从数据中依次读入两个 $32$ 位整型变量 $\\mathit{test}, T$，一个无符号 $64$ 位长整型变量 $\\mathit{seed}$。接下来循环 $T$ 次，代表 $T$ 组数据。\n\n在每次循环中，我们对一组数据进行计算。首先依次读入三个 $32$ 位整型变量 $n, q, x$，一个 $64$ 位整型变量 $k_{\\mathrm{max}}$。接下来读入 $n$ 个 $32$ 位整型变量放入数组 $a_1, \\ldots, a_n$ 中。\n\n接下来是生成 $q$ 个询问的部分，每次调用 `rd()` 函数，将 $\\mathit{seed}$ 作为引用参数传入，将返回值（返回值为无符号 $64$ 位长整型）对 $k_{\\mathrm{max}}$ 取模的结果作为该次询问的参数 $k$，注意到 $\\mathit{seed}$ 也会被修改。", "outputFormat": "输出 $T$ 行，每行一个整数代表该组数据的答案。具体地，假设该组数据有 $q$ 个询问，令第 $i$ 个询问的答案为 $\\mathrm{Ans}_i$，那么需要你输出 $\\bigoplus_{i = 1}^q (\\mathrm{Ans}_i \\cdot i)$，**注意这里不需要取模**。$\\bigoplus$ 指按位异或运算符。", "hint": "**【样例解释 #1】**\n\n第一组测试数据中，$\\{ a_i \\}$ 初始为 $\\{ 1, 4, 2, 3 \\}$。  \n操作一次后为 $\\{ 2, 2, 3, 3 \\}$。  \n操作两次后为 $\\{ \\frac{5}{2}, \\frac{5}{2}, \\frac{5}{2}, \\frac{5}{2} \\}$。\n\n其中生成询问为：  \n询问位置：$x = 1$；  \n第一个询问：$k = 0$，$a_x = 1$；  \n第二个询问：$k = 1$，$a_x = 2$；  \n答案为 $(1 \\times 1) \\oplus (2 \\times 2) = 4 \\oplus 1 = 5$。\n\n第二组测试数据中，$\\{ a_i \\}$ 初始为 $\\{ 6, 2, 5, 3, 1, 4 \\}$。  \n操作一次后为 $\\{ 5, 5, \\frac{3}{2}, \\frac{3}{2}, 4, 4 \\}$。  \n操作两次后为 $\\{ \\frac{9}{2}, \\frac{9}{2}, \\frac{9}{2}, \\frac{9}{2}, \\frac{3}{2}, \\frac{3}{2} \\}$。\n\n其中生成询问为：  \n询问位置：$x = 3$；  \n第一个询问 $k = 2$，$a_x = \\frac{9}{2}$，$\\frac{9}{2} \\equiv 499122181 \\pmod{998244353}$；  \n第二个询问 $k = 0$，$a_x = 5$；  \n答案为 $(499122181 \\times 1) \\oplus (5 \\times 2) = 499122181 \\oplus 10 = 499122191$。\n\n**【数据范围】**\n\n对于所有测试点：保证 $T \\le 10$，$\\sum n \\le 2 \\times {10}^6$，$\\sum q \\le 5 \\times {10}^7$，$k_{\\mathrm{max}} \\le {10}^{18}$，$1 \\le x \\le n$，$0 \\le a_i < 998244353$，$0 \\le \\mathit{seed} \\le 2^{60} - 1$，保证 $n$ 是偶数。\n\n注意，对于样例，测试点编号 $\\mathit{test}$ 为 $0$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $\\sum n \\le$ | $\\sum q \\le$ | $k_{\\mathrm{max}} \\le $ | 特殊限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $500$ | $500$ | $500$ | 无 |\n| $2$ | $2 \\times {10}^6$ | $2 \\times {10}^6$ | $10$ | 无 |\n| $3$ | $2 \\times {10}^6$ | $2 \\times {10}^6$ | ${10}^{18}$ | $n = 2^k$ |\n| $4$ | $50$ | $50$ | ${10}^{18}$ | 无 |\n| $5 \\sim 6$ | $150$ | $150$ | ${10}^{18}$ | 无 |\n| $7$ | $2 \\times {10}^6$ | $2 \\times {10}^6$ | ${10}^{18}$ | $n = 98304$ |\n| $8 \\sim 9$ | $500$ | $500$ | ${10}^{18}$ | 无 |\n| $10 \\sim 11$ | $5 \\times {10}^3$ | $2 \\times {10}^6$ | ${10}^{18}$ | 无 |\n| $12 \\sim 13$ | $2 \\times {10}^6$ | $50$ | ${10}^{18}$ | 无 |\n| $14 \\sim 16$ | ${10}^6$ | ${10}^5$ | ${10}^{18}$ | 无 |\n| $17 \\sim 18$ | $2 \\times {10}^6$ | $2 \\times {10}^7$ | ${10}^{18}$ | 无 |\n| $19 \\sim 20$ | $2 \\times {10}^6$ | $5 \\times {10}^7$ | ${10}^{18}$ | 无 |\n\n**【附录】**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nunsigned long long rd (unsigned long long &x) {\n\tx ^= (x << 13);\n\tx ^= (x >> 7);\n\tx ^= (x << 17);\n\treturn x;\n}\n\nint main () {\n\tint test, T;\n\tunsigned long long seed;\n\tscanf(\"%d%d%llu\", &test, &T, &seed);\n\tfor (int Case = 1; Case <= T; Case ++) {\n\t\tint n, q, x;\n\t\tlong long k_max;\n\t\tscanf(\"%d%d%d%lld\", &n, &q, &x, &k_max);\n\t\tvector<int> a(n + 1);\n\t\tfor (int i = 1; i <= n; i ++) {\n\t\t\tscanf(\"%d\", &a[i]);\n\t\t}\n\t\tfor (int i = 1; i <= q; i ++) {\n\t\t\tlong long k = rd(seed) % k_max;\n\t\t\t/∗\n\t\t\tCode your solution here.\n\t\t\t∗/\n\t\t}\n\t}\n}\n```", "locale": "zh-CN"}}}
{"pid": "P8333", "type": "P", "difficulty": 7, "samples": [["6\n2 1 2\n1 1 137\n3 94 95\n3 1998 1996\n998244 353999 999999\n50 120 150\n", "7 4\n4 1\n1124 31585548\n23951 33873190\n1289433675488 748596399\n23600 480090154\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "浙江", "O2优化", "组合数学", "线性代数"], "title": "[ZJOI2022] 计算几何", "background": null, "description": "九条可怜是一个喜欢计算几何的女孩子，她画了一个特别的平面坐标系，其中 $x$ 轴正半轴与 $y$ 轴正半轴夹角为 $60$ 度。\n\n从中，她取出所有横纵坐标不全为偶数，且满足 $-2 a + 1 \\le x \\le 2 a - 1$，$-2 b + 1 \\le y \\le 2 b - 1$，$-2 c + 1 \\le x + y \\le 2 c - 1$ 的整点。\n\n可怜想将其中一些点染色，但相邻的点不能同时染色。具体地，对于点 $(x, y)$，它和 $(x, y + 1), (x, y - 1), (x + 1, y), (x - 1, y), (x + 1, y - 1), (x - 1, y + 1)$ 六个点相邻，可结合样例解释理解。\n\n可怜想知道在这个规则下最多能将多少点染色，以及染最多点的染色方案数。由于后者值可能很大，对于染色方案数，你只需要输出对 $998244353$ 取模后的结果。**注意不需要将最多染色点数取模。**", "inputFormat": "第一行一个整数 $T$ 代表数据组数。\n\n接下来 $T$ 行，每行三个整数 $a, b, c$ 代表一组数据。", "outputFormat": "输出共 $T$ 行，每行两个整数，代表最多能染的点数（**不取模**）和方案数对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n如下图所示，点 $J$ 的坐标为 $(2, 1)$，点 $F$ 的坐标为 $(-1, 0)$，点 $H$ 的坐标为 $(2, 0)$。在这三个点中，只有点 $H$ 是横纵坐标全为偶数的点。图中与点 $A$ 距离为 $1$ 的点有 $\\texttt{B C D E F G}$ 六个点。\n\n在样例的第一组数据中，满足条件的整点有 $\\texttt{R N G B I J P F C K M L E D S T}$。\n\n最多能染 $7$ 个点，方案共 $4$ 种，具体为：$\\texttt{P N L B D J T}$，$\\texttt{R M F B D J T}$，$\\texttt{R M G E C J T}$，$\\texttt{R M G E I S K}$。\n\n在样例的第二组数据中，满足条件的整点有 $\\texttt{G B I F C L E D}$。\n\n最多能染 $4$ 个点，方案共 $1$ 种，具体为：$\\texttt{L G I D}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3lp43vq.png)\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le T \\le 10$，$1 \\le a, b, c \\le {10}^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $a \\le$ | $b, c \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $3$ | $3$ | $a = b = c$ |\n| $2$ | $4$ | $4$ | $a = b = c$ |\n| $3$ | $4$ | $4$ | 无 |\n| $4$ | $3$ | $100$ | 无 |\n| $5 \\sim 6$ | $3$ | $1000$ | 无 |\n| $7 \\sim 8$ | $3$ | $5000$ | 无 |\n| $9 \\sim 10$ | $100$ | $100$ | $a = b = c$ |\n| $11 \\sim 14$ | $100$ | $100$ | 无 |\n| $15$ | ${10}^5$ | ${10}^5$ | $a = b = c$ |\n| $16$ | ${10}^5$ | ${10}^5$ | 无 |\n| $17 \\sim 18$ | ${10}^6$ | ${10}^6$ | $a \\cdot b \\cdot c \\le {10}^6$ |\n| $19$ | ${10}^6$ | ${10}^6$ | $a = b = c$ |\n| $20$ | ${10}^6$ | ${10}^6$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2022] 计算几何", "background": null, "description": "九条可怜是一个喜欢计算几何的女孩子，她画了一个特别的平面坐标系，其中 $x$ 轴正半轴与 $y$ 轴正半轴夹角为 $60$ 度。\n\n从中，她取出所有横纵坐标不全为偶数，且满足 $-2 a + 1 \\le x \\le 2 a - 1$，$-2 b + 1 \\le y \\le 2 b - 1$，$-2 c + 1 \\le x + y \\le 2 c - 1$ 的整点。\n\n可怜想将其中一些点染色，但相邻的点不能同时染色。具体地，对于点 $(x, y)$，它和 $(x, y + 1), (x, y - 1), (x + 1, y), (x - 1, y), (x + 1, y - 1), (x - 1, y + 1)$ 六个点相邻，可结合样例解释理解。\n\n可怜想知道在这个规则下最多能将多少点染色，以及染最多点的染色方案数。由于后者值可能很大，对于染色方案数，你只需要输出对 $998244353$ 取模后的结果。**注意不需要将最多染色点数取模。**", "inputFormat": "第一行一个整数 $T$ 代表数据组数。\n\n接下来 $T$ 行，每行三个整数 $a, b, c$ 代表一组数据。", "outputFormat": "输出共 $T$ 行，每行两个整数，代表最多能染的点数（**不取模**）和方案数对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n如下图所示，点 $J$ 的坐标为 $(2, 1)$，点 $F$ 的坐标为 $(-1, 0)$，点 $H$ 的坐标为 $(2, 0)$。在这三个点中，只有点 $H$ 是横纵坐标全为偶数的点。图中与点 $A$ 距离为 $1$ 的点有 $\\texttt{B C D E F G}$ 六个点。\n\n在样例的第一组数据中，满足条件的整点有 $\\texttt{R N G B I J P F C K M L E D S T}$。\n\n最多能染 $7$ 个点，方案共 $4$ 种，具体为：$\\texttt{P N L B D J T}$，$\\texttt{R M F B D J T}$，$\\texttt{R M G E C J T}$，$\\texttt{R M G E I S K}$。\n\n在样例的第二组数据中，满足条件的整点有 $\\texttt{G B I F C L E D}$。\n\n最多能染 $4$ 个点，方案共 $1$ 种，具体为：$\\texttt{L G I D}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3lp43vq.png)\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le T \\le 10$，$1 \\le a, b, c \\le {10}^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $a \\le$ | $b, c \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $3$ | $3$ | $a = b = c$ |\n| $2$ | $4$ | $4$ | $a = b = c$ |\n| $3$ | $4$ | $4$ | 无 |\n| $4$ | $3$ | $100$ | 无 |\n| $5 \\sim 6$ | $3$ | $1000$ | 无 |\n| $7 \\sim 8$ | $3$ | $5000$ | 无 |\n| $9 \\sim 10$ | $100$ | $100$ | $a = b = c$ |\n| $11 \\sim 14$ | $100$ | $100$ | 无 |\n| $15$ | ${10}^5$ | ${10}^5$ | $a = b = c$ |\n| $16$ | ${10}^5$ | ${10}^5$ | 无 |\n| $17 \\sim 18$ | ${10}^6$ | ${10}^6$ | $a \\cdot b \\cdot c \\le {10}^6$ |\n| $19$ | ${10}^6$ | ${10}^6$ | $a = b = c$ |\n| $20$ | ${10}^6$ | ${10}^6$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P8334", "type": "P", "difficulty": 7, "samples": [["4\n1 1\n1\n3 3\n3 3 4\n3 1\n3 2\n6 1\n5 2 4 1 3 6\n1 2\n1 6\n2 3\n2 4\n4 5\n5 1\n5 4 3 2 1\n1 2\n1 3\n3 4\n3 5\n", "1\n16\n34\n499122202\n"], ["见附件中的 dfs/dfs_ex2.in", "见附件中的 dfs/dfs_ex2.ans"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "线段树", "各省省选", "2022", "浙江", "O2优化", "树链剖分", "矩阵乘法"], "title": "[ZJOI2022] 深搜", "background": "", "description": "九条可怜是一个喜欢算法的女孩子，在众多算法中她尤其喜欢深度优先搜索（DFS）。\n\n有一天，可怜得到了一棵有根树，树根为 $\\mathit{root}$，树上每个节点 $x$ 有一个权值 $a_x$。\n\n在一棵树上从 $x$ 出发，寻找 $y$ 节点，如果使用深度优先搜索，则可描述为以下演算过程：\n\n1. 将递归栈设置为空。\n2. 首先将节点 $x$ 放入递归栈中。\n3. 从递归栈中取出栈顶节点，如果该节点为 $y$，则结束演算过程；否则，如果存在未访问的直接子节点，则以均等概率随机选择一个子节点加入递归栈中。\n4. 重复步骤 3，直到不存在未访问的直接子节点。\n5. 将上一级节点加入递归栈中，重复步骤 3。\n6. 重复步骤 5，直至当前一级节点为 $x$，演算过程结束。\n\n我们定义 $f(x, y)$ 合法当且仅当 $y$ 在 $x$ 的子树中。它的值为从 $x$ 出发，对 $x$ 的子树进行深度优先搜索寻找 $y$ 期间访问过的所有节点（包括 $x$ 和 $y$）权值最小值的期望。\n\n九条可怜想知道对于所有合法的点对 $(x, y)$，$\\sum f(x, y)$ 的值。你只需要输出答案对 $998244353$ 取模的结果。具体地，如果答案的最简分数表示为 $\\frac{a}{b}$，输出 $a \\times b^{-1} \\bmod 998244353$。", "inputFormat": "输入包含多组数据，第一行输入数据组数 $T$。\n\n对于接下来的每组数据，第一行两个整数 $n, \\mathit{root}$，分别表示树的大小，树根的编号。\n\n接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，表示树上每个节点的权值。\n\n接下来 $n - 1$ 行，每行包含两个整数 $u, v$，表示 $u$ 和 $v$ 之间有一条树边。", "outputFormat": "对于每组数据，输出一行，包含一个整数，代表对于所有合法点对 $(x, y)$，$\\sum f(x, y)$ 对 $998244353$ 取模的结果。", "hint": "对于所有测试点，满足 $1 \\le T \\le 100$，$\\sum n \\le 8 \\times {10}^5$，$1 \\le n \\le 4 \\times {10}^5$，$1 \\le \\mathit{root}, u, v \\le n$，$1 \\le a_i \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $\\sum n \\le$ | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $50$ | $10$ | 无 |\n| $2 \\sim 4$ | $40000$ | $5000$ | 无 |\n| $5 \\sim 10$ | $4 \\times {10}^5$ | ${10}^5$ | 无 |\n| $11$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 树的生成方式随机 |\n| $12$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 树是一条链 |\n| $13$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 根的度数为 $n - 1$ |\n| $14 \\sim 20$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 无 |\n\n对于测试点 $11$，树的生成方式为：以 $1$ 为根，对于节点 $i \\in [2, n]$，从 $[1, i - 1]$ 中等概率随机选\n择一个点作为父亲。之后将编号随机重排。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2022] 深搜", "background": "", "description": "九条可怜是一个喜欢算法的女孩子，在众多算法中她尤其喜欢深度优先搜索（DFS）。\n\n有一天，可怜得到了一棵有根树，树根为 $\\mathit{root}$，树上每个节点 $x$ 有一个权值 $a_x$。\n\n在一棵树上从 $x$ 出发，寻找 $y$ 节点，如果使用深度优先搜索，则可描述为以下演算过程：\n\n1. 将递归栈设置为空。\n2. 首先将节点 $x$ 放入递归栈中。\n3. 从递归栈中取出栈顶节点，如果该节点为 $y$，则结束演算过程；否则，如果存在未访问的直接子节点，则以均等概率随机选择一个子节点加入递归栈中。\n4. 重复步骤 3，直到不存在未访问的直接子节点。\n5. 将上一级节点加入递归栈中，重复步骤 3。\n6. 重复步骤 5，直至当前一级节点为 $x$，演算过程结束。\n\n我们定义 $f(x, y)$ 合法当且仅当 $y$ 在 $x$ 的子树中。它的值为从 $x$ 出发，对 $x$ 的子树进行深度优先搜索寻找 $y$ 期间访问过的所有节点（包括 $x$ 和 $y$）权值最小值的期望。\n\n九条可怜想知道对于所有合法的点对 $(x, y)$，$\\sum f(x, y)$ 的值。你只需要输出答案对 $998244353$ 取模的结果。具体地，如果答案的最简分数表示为 $\\frac{a}{b}$，输出 $a \\times b^{-1} \\bmod 998244353$。", "inputFormat": "输入包含多组数据，第一行输入数据组数 $T$。\n\n对于接下来的每组数据，第一行两个整数 $n, \\mathit{root}$，分别表示树的大小，树根的编号。\n\n接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，表示树上每个节点的权值。\n\n接下来 $n - 1$ 行，每行包含两个整数 $u, v$，表示 $u$ 和 $v$ 之间有一条树边。", "outputFormat": "对于每组数据，输出一行，包含一个整数，代表对于所有合法点对 $(x, y)$，$\\sum f(x, y)$ 对 $998244353$ 取模的结果。", "hint": "对于所有测试点，满足 $1 \\le T \\le 100$，$\\sum n \\le 8 \\times {10}^5$，$1 \\le n \\le 4 \\times {10}^5$，$1 \\le \\mathit{root}, u, v \\le n$，$1 \\le a_i \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $\\sum n \\le$ | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $50$ | $10$ | 无 |\n| $2 \\sim 4$ | $40000$ | $5000$ | 无 |\n| $5 \\sim 10$ | $4 \\times {10}^5$ | ${10}^5$ | 无 |\n| $11$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 树的生成方式随机 |\n| $12$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 树是一条链 |\n| $13$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 根的度数为 $n - 1$ |\n| $14 \\sim 20$ | $8 \\times {10}^5$ | $4 \\times {10}^5$ | 无 |\n\n对于测试点 $11$，树的生成方式为：以 $1$ 为根，对于节点 $i \\in [2, n]$，从 $[1, i - 1]$ 中等概率随机选\n择一个点作为父亲。之后将编号随机重排。", "locale": "zh-CN"}}}
{"pid": "P8335", "type": "P", "difficulty": 7, "samples": [["5\n1 3 4 5 1\n2 1 4 3 5\n1 2 4 2 2\n2 4 5 3 5\n1 4 4 4 8", "46\n21"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "O2优化", "Ynoi"], "title": "[Ynoi2004] tars2", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 $0$，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $|X-x|<d,|Y-y|<d$ 的整点 $(X,Y)$ 的点权增加 $w\\cdot(d-\\max(|X-x|,|Y-y|))$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2004] tars2", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 $0$，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $|X-x|<d,|Y-y|<d$ 的整点 $(X,Y)$ 的点权增加 $w\\cdot(d-\\max(|X-x|,|Y-y|))$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。\n", "locale": "zh-CN"}}}
{"pid": "P8336", "type": "P", "difficulty": 7, "samples": [["5 4\n1 2 3 3\n3 5\n2 2\n5 2\n2 5\n", "7\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "O2优化", "Ynoi"], "title": "[Ynoi2004] 2stmst", "background": "", "description": "已知 $n$ 个顶点的有根树，以及 $m$ 个二元组 $(x_i,y_i)$，其中 $x_i,y_i$ 是树的顶点。\n\n对于树的顶点 $a,b$，定义 $D(a,b)$ 为：在以 $a$ 为根的子树中，但不在以 $b$ 为根的子树中的顶点个数。\n\n你需要求出以这些二元组为顶点的完全图的最小生成树，其中 $(x_i,y_i)$ 和 $(x_j,y_j)$ 之间的边权是 $D(x_i,x_j)+D(x_j,x_i)+D(y_i,y_j)+D(y_j,y_i)$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n-1$ 个数，其中第 $i$ 个数表示编号为 $i+1$ 的节点的父亲 $f_{i+1}$，保证 $f_{i+1}< i+1$。\n\n之后 $m$ 行，第 $i$ 行两个数 $x_i,y_i$，表示一个给定的二元组。", "outputFormat": "输出一个整数，表示最小生成树的边权和。", "hint": "Idea：nzhtl1477，Solution：ccz181078( $O(m\\log n\\log m+n\\log n)$ )，Rainbow_qwq( $O(m\\log n+n)$ )，Code：ccz181078&djq_cpp&Rainbow_qwq，Data：ccz181078\n\n样例解释：\n\n最小生成树包含边 $(1,4,1),(2,3,3),(2,4,3)$，三元组表示第一个二元组的编号，第二个二元组的编号，边权。边权和为 $7$。\n\n数据范围：\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6,1\\le m\\le 10^5$。对任意 $i=1,2,\\dots n-1$，满足 $1\\le f_{i+1}<i+1$。对任意 $i=1,2,\\dots m$，满足 $1\\le x_i,y_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2004] 2stmst", "background": "", "description": "已知 $n$ 个顶点的有根树，以及 $m$ 个二元组 $(x_i,y_i)$，其中 $x_i,y_i$ 是树的顶点。\n\n对于树的顶点 $a,b$，定义 $D(a,b)$ 为：在以 $a$ 为根的子树中，但不在以 $b$ 为根的子树中的顶点个数。\n\n你需要求出以这些二元组为顶点的完全图的最小生成树，其中 $(x_i,y_i)$ 和 $(x_j,y_j)$ 之间的边权是 $D(x_i,x_j)+D(x_j,x_i)+D(y_i,y_j)+D(y_j,y_i)$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n-1$ 个数，其中第 $i$ 个数表示编号为 $i+1$ 的节点的父亲 $f_{i+1}$，保证 $f_{i+1}< i+1$。\n\n之后 $m$ 行，第 $i$ 行两个数 $x_i,y_i$，表示一个给定的二元组。", "outputFormat": "输出一个整数，表示最小生成树的边权和。", "hint": "Idea：nzhtl1477，Solution：ccz181078( $O(m\\log n\\log m+n\\log n)$ )，Rainbow_qwq( $O(m\\log n+n)$ )，Code：ccz181078&djq_cpp&Rainbow_qwq，Data：ccz181078\n\n样例解释：\n\n最小生成树包含边 $(1,4,1),(2,3,3),(2,4,3)$，三元组表示第一个二元组的编号，第二个二元组的编号，边权。边权和为 $7$。\n\n数据范围：\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6,1\\le m\\le 10^5$。对任意 $i=1,2,\\dots n-1$，满足 $1\\le f_{i+1}<i+1$。对任意 $i=1,2,\\dots m$，满足 $1\\le x_i,y_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8337", "type": "P", "difficulty": 7, "samples": [["5 10 2\n0000000001000020000300004", "4834712607666044912"], ["20 100 16500242824326557842\n0000500006000070000800000000010000200003000040000000001000020000300004000090000:0000;0000<0000=0000>", "5449866856465492064"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "O2优化", "Ynoi"], "title": "[Ynoi2004] rsxc", "background": "", "description": "给定一个长为 $n$（$1\\le n\\le 6\\times 10^5$）的非负整数序列 $a_0,a_1,\\dots,a_{n-1}$（$0\\le a_i<2^{30}$）。\n\n有 $q$ 个询问（$1\\le q\\le 10^6$）。\n\n每次询问给出两个整数 $l,r$（$0\\le l\\le r<n$），求有多少对整数 $(x,y)$ 满足：\n\n - $l\\le x\\le y\\le r$；\n - $\\forall i,j\\in S\\ :i\\oplus j\\in S$，其中 $S:=\\{a_k\\}_{k=x}^y$。", "inputFormat": "由于本题数据较多，您不需要输入输出，请完善以下程序中的 `init(int, int, vector<int>)` 和 `solve(int, int)` 函数，并提交。正解不依赖于其模板。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid init(int n, int q, vector<int> a) {\n  // implement...\n}\n\nlong long solve(int l, int r) {\n  // implement...\n}\n\nint main() {\n  int n, q;\n  uint64_t s;\n  cin >> n >> q >> s;\n  string r;\n  cin >> r;\n  vector<int> a(n);\n  for (int i = 0; i < n; i++)\n    for (int s = 5 * i; s < 5 * i + 5; s++)\n      a[i] = (a[i] * 64 + (int)(r[s]) - (int)('0'));\n  init(n, q, a);\n  uint64_t state = 0;\n  auto splitmix64 = [&](uint64_t v) {\n    uint64_t z = (v + 0x9e3779b97f4a7c15);\n    z = (z ^ (z >> 30)) * 0xbf58476d1ce4e5b9;\n    z = (z ^ (z >> 27)) * 0x94d049bb133111eb;\n    return z ^ (z >> 31);\n  };\n  mt19937_64 rng(s);\n  for (int i = 0; i < q; i++) {\n    int l = (rng() ^ state) % n;\n    int r = (rng() ^ state) % n;\n    long long ans = solve(min(l, r), max(l, r));\n    state = splitmix64(state + ans);\n    if ((i + 1) % (1 << 15) == 0)\n      cout << state << endl;\n  }\n  cout << state << endl;\n}\n```\n", "outputFormat": "", "hint": "Idea：Powerless，Solution：ccz181078&nzhtl1477&w33z，Code：w33z，Data：w33z\n\n对于 $100\\%$ 的数据，$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$，$0 \\le a_i < 2^{30}$，$0 \\le l \\le r < n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2004] rsxc", "background": "", "description": "给定一个长为 $n$（$1\\le n\\le 6\\times 10^5$）的非负整数序列 $a_0,a_1,\\dots,a_{n-1}$（$0\\le a_i<2^{30}$）。\n\n有 $q$ 个询问（$1\\le q\\le 10^6$）。\n\n每次询问给出两个整数 $l,r$（$0\\le l\\le r<n$），求有多少对整数 $(x,y)$ 满足：\n\n - $l\\le x\\le y\\le r$；\n - $\\forall i,j\\in S\\ :i\\oplus j\\in S$，其中 $S:=\\{a_k\\}_{k=x}^y$。", "inputFormat": "由于本题数据较多，您不需要输入输出，请完善以下程序中的 `init(int, int, vector<int>)` 和 `solve(int, int)` 函数，并提交。正解不依赖于其模板。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid init(int n, int q, vector<int> a) {\n  // implement...\n}\n\nlong long solve(int l, int r) {\n  // implement...\n}\n\nint main() {\n  int n, q;\n  uint64_t s;\n  cin >> n >> q >> s;\n  string r;\n  cin >> r;\n  vector<int> a(n);\n  for (int i = 0; i < n; i++)\n    for (int s = 5 * i; s < 5 * i + 5; s++)\n      a[i] = (a[i] * 64 + (int)(r[s]) - (int)('0'));\n  init(n, q, a);\n  uint64_t state = 0;\n  auto splitmix64 = [&](uint64_t v) {\n    uint64_t z = (v + 0x9e3779b97f4a7c15);\n    z = (z ^ (z >> 30)) * 0xbf58476d1ce4e5b9;\n    z = (z ^ (z >> 27)) * 0x94d049bb133111eb;\n    return z ^ (z >> 31);\n  };\n  mt19937_64 rng(s);\n  for (int i = 0; i < q; i++) {\n    int l = (rng() ^ state) % n;\n    int r = (rng() ^ state) % n;\n    long long ans = solve(min(l, r), max(l, r));\n    state = splitmix64(state + ans);\n    if ((i + 1) % (1 << 15) == 0)\n      cout << state << endl;\n  }\n  cout << state << endl;\n}\n```\n", "outputFormat": "", "hint": "Idea：Powerless，Solution：ccz181078&nzhtl1477&w33z，Code：w33z，Data：w33z\n\n对于 $100\\%$ 的数据，$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$，$0 \\le a_i < 2^{30}$，$0 \\le l \\le r < n$。\n", "locale": "zh-CN"}}}
{"pid": "P8338", "type": "P", "difficulty": 6, "samples": [["2\n3\n1 2 3\n3\n2 3 1\n", "12\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "暴力数据结构", "各省省选", "平衡树", "2022", "安徽", "O2优化", "优先队列", "素数判断,质数,筛法"], "title": "[AHOI2022] 排列", "background": "", "description": "对于一个长度为 $n$ 的排列 $P = (p_1, p_2, \\ldots, p_n)$ 和整数 $k \\ge 0$，定义 $P$ 的 $k$ 次幂\n\n$$P^{(k)} = \\left( p^{(k)}_1, p^{(k)}_2, \\ldots, p^{(k)}_n \\right),$$\n\n该排列的第 $i$ 项为\n\n$$p^{(k)}_i = \\begin{cases} i, & k = 0, \\\\ p^{(k - 1)}_{p_i}, & k > 0. \\end{cases}$$\n\n容易证明任意排列的任意次幂都是一个排列。\n\n定义排列 $P$ 的**循环值** $v(P)$ 为最小的**正整数** $k$ 使得 $P^{(k + 1)} = P$。\n\n给出一个长度为 $n$ 的排列 $A = (a_1, a_2, \\ldots, a_n)$，对于整数 $1 \\le i, j \\le n$，定义 $f(i, j)$：若存在 $k \\ge 0$ 使得 $a^{(k)}_i = j$，则 $f(i, j) = 0$，否则设排列 $A_{i j}$ 为将排列 $A$ 的第 $i$ 项 $a_i$ 和第 $j$ 项 $a_j$ 交换后得到的排列，则 $f(i, j) = v(A_{i j})$。\n\n求 $\\sum_{i = 1}^{n} \\sum_{j = 1}^{n} f(i, j)$ 的值。答案可能很大，你只需要输出其对 $({10}^9 + 7)$ 取模的结果。", "inputFormat": "**本题有多组测试数据**。输入数据的第一行为一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行一个正整数 $n$ 表示排列的长度，接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述输入的排列。", "outputFormat": "对于每组数据输出一行一个整数，表示题目所求的答案对 $({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n对于第一组测试数据，$f(1, 2) = f(2, 1) = f(2, 3) = f(3, 2) = f(1, 3) = f(3, 1) = 2$，其余的 $f(i, j)$ 均为 $0$。\n\n对于第二组测试数据，所有的 $f(i, j)$ 均为 $0$。\n\n**【样例 #2】**\n\n见附件中的 `perm/perm2.in` 与 `perm/perm2.ans`。\n\n该组样例中，第一个测试数据满足 $n \\le 35$，前四个测试数据满足 $n \\le 200$，所有测试数据满足 $n \\le 2500$。\n\n**【样例 #3】**\n\n见附件中的 `perm/perm3.in` 与 `perm/perm3.ans`。\n\n该组样例中，第一个测试数据满足特殊性质 A，第二个测试数据满足特殊性质 B，第三个测试数据满足特殊性质 C，前四个测试数据满足 $n \\le {10}^5$，第五个测试数据满足 $n \\le 5 \\times {10}^5$。\n\n特殊性质的具体内容参见数据范围部分。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的测试数据，$1 \\le T \\le 5$，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le a_i \\le n$。\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | ${10}^5$ | A |\n| $3$ | $35$ | 无 |\n| $4$ | $200$ | 无 |\n| $5$ | $2500$ | 无 |\n| $6$ | ${10}^5$ | B |\n| $7$ | ${10}^5$ | C |\n| $8$ | ${10}^5$ | 无 |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$a_i = (i \\bmod n) + 1$。  \n特殊性质 B：对于任意 $1 \\le i \\le n$，存在 $1 \\le k \\le 20$，$a^{(k)}_i = i$。  \n特殊性质 C：存在大小不超过 $10$ 的集合 $S$，使得对于任意 $1 \\le i \\le n$，存在 $x \\in S, k \\ge 0$，$a^{(k)}_x = i$。\n\n**【提示】**\n\n输入数据规模较大，请使用较为快速的输入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 排列", "background": "", "description": "对于一个长度为 $n$ 的排列 $P = (p_1, p_2, \\ldots, p_n)$ 和整数 $k \\ge 0$，定义 $P$ 的 $k$ 次幂\n\n$$P^{(k)} = \\left( p^{(k)}_1, p^{(k)}_2, \\ldots, p^{(k)}_n \\right),$$\n\n该排列的第 $i$ 项为\n\n$$p^{(k)}_i = \\begin{cases} i, & k = 0, \\\\ p^{(k - 1)}_{p_i}, & k > 0. \\end{cases}$$\n\n容易证明任意排列的任意次幂都是一个排列。\n\n定义排列 $P$ 的**循环值** $v(P)$ 为最小的**正整数** $k$ 使得 $P^{(k + 1)} = P$。\n\n给出一个长度为 $n$ 的排列 $A = (a_1, a_2, \\ldots, a_n)$，对于整数 $1 \\le i, j \\le n$，定义 $f(i, j)$：若存在 $k \\ge 0$ 使得 $a^{(k)}_i = j$，则 $f(i, j) = 0$，否则设排列 $A_{i j}$ 为将排列 $A$ 的第 $i$ 项 $a_i$ 和第 $j$ 项 $a_j$ 交换后得到的排列，则 $f(i, j) = v(A_{i j})$。\n\n求 $\\sum_{i = 1}^{n} \\sum_{j = 1}^{n} f(i, j)$ 的值。答案可能很大，你只需要输出其对 $({10}^9 + 7)$ 取模的结果。", "inputFormat": "**本题有多组测试数据**。输入数据的第一行为一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行一个正整数 $n$ 表示排列的长度，接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述输入的排列。", "outputFormat": "对于每组数据输出一行一个整数，表示题目所求的答案对 $({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n对于第一组测试数据，$f(1, 2) = f(2, 1) = f(2, 3) = f(3, 2) = f(1, 3) = f(3, 1) = 2$，其余的 $f(i, j)$ 均为 $0$。\n\n对于第二组测试数据，所有的 $f(i, j)$ 均为 $0$。\n\n**【样例 #2】**\n\n见附件中的 `perm/perm2.in` 与 `perm/perm2.ans`。\n\n该组样例中，第一个测试数据满足 $n \\le 35$，前四个测试数据满足 $n \\le 200$，所有测试数据满足 $n \\le 2500$。\n\n**【样例 #3】**\n\n见附件中的 `perm/perm3.in` 与 `perm/perm3.ans`。\n\n该组样例中，第一个测试数据满足特殊性质 A，第二个测试数据满足特殊性质 B，第三个测试数据满足特殊性质 C，前四个测试数据满足 $n \\le {10}^5$，第五个测试数据满足 $n \\le 5 \\times {10}^5$。\n\n特殊性质的具体内容参见数据范围部分。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的测试数据，$1 \\le T \\le 5$，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le a_i \\le n$。\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | ${10}^5$ | A |\n| $3$ | $35$ | 无 |\n| $4$ | $200$ | 无 |\n| $5$ | $2500$ | 无 |\n| $6$ | ${10}^5$ | B |\n| $7$ | ${10}^5$ | C |\n| $8$ | ${10}^5$ | 无 |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$a_i = (i \\bmod n) + 1$。  \n特殊性质 B：对于任意 $1 \\le i \\le n$，存在 $1 \\le k \\le 20$，$a^{(k)}_i = i$。  \n特殊性质 C：存在大小不超过 $10$ 的集合 $S$，使得对于任意 $1 \\le i \\le n$，存在 $x \\in S, k \\ge 0$，$a^{(k)}_x = i$。\n\n**【提示】**\n\n输入数据规模较大，请使用较为快速的输入方式。", "locale": "zh-CN"}}}
{"pid": "P8339", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2\n2 2\n1 3\n2 3\n2 2\n1 2\n1 3\n3 4\n3 5\n2 4\n2 5\n4 2\n", "1\n1\n1\n"], ["见附件中的 keys/keys2.in", "见附件中的 keys/keys2.ans"], ["见附件中的 keys/keys3.in", "见附件中的 keys/keys3.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "树状数组", "2022", "安徽", "O2优化", "虚树", "扫描线"], "title": "[AHOI2022] 钥匙", "background": "", "description": "有 $n$ 座城市，编号为 $1, 2, \\ldots, n$。这些城市由 $n - 1$ 条无向道路相连，每条无向道路连接两座城市，保证任意两个城市连通。即这 $n$ 座城市构成一棵树。\n\n每座城市都有一件宝物。宝物分为两种：钥匙和宝箱。在一座城市里，要么有一把钥匙，要么有一个宝箱。钥匙和宝箱有不同的颜色，颜色为 $i$ 的钥匙只能打开颜色为 $i$ 的宝箱，打开宝箱后可以获得一枚金币，同时这把钥匙会损坏。\n\n**由于某种特殊的原因，同一种的钥匙最多只有 $\\bm{5}$ 把（同一种颜色的宝箱数量不限）。**\n\n现在小 R 规划了 $m$ 次旅行，第 $i$ 次旅行的起点为 $s_i$，终点为 $e_i$。小 R 从 $s_i$ 沿最短路径走到 $e_i$。当他走到一座有钥匙的城市时，他可以将钥匙放入背包。当他走到一座有宝箱的城市时，如果他有相应颜色的钥匙，那么他就会打开这个宝箱并获得一个金币；如果他没有相应颜色的钥匙，那么他什么都不做（宝箱不能带走）。问每次旅行能获得多少枚金币。\n\n**注意：旅行相互独立，即一次旅行完之后所有的钥匙和宝箱都会恢复到初始状态。**", "inputFormat": "第一行两个正整数 $n, m$，表示城市数量和旅行数量。\n\n接下来 $n$ 行，每行两个正整数 $t_i, c_i$，$t_i=1$ 表示第 $i$ 个城市里有一把钥匙，$t_i=2$ 表示有一个宝箱。$c_i$ 表示第 $i$ 座城市里钥匙或宝箱的颜色。数据保证每种颜色的钥匙都不超过 $5$ 把。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示有一条连接 $u_i$ 和 $v_i$ 的无向道路。\n\n接下来 $m$ 行，每行两个正整数 $s_i, e_i$ 表示一次旅行的起点和终点。", "outputFormat": "输出 $m$ 行，每行一个整数，表示第 $i$ 次旅行能获得的金币数量。", "hint": "**【样例 \\#4】**\n\n见附件中的 `keys/keys4.in` 与 `keys/keys4.ans`。\n\n该组样例满足 $n, m \\le {10}^5$ 和特殊性质 A。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le m \\le {10}^6$，$1 \\le t_i \\le 2$，$1 \\le c_i, u_i, v_i, s_i, e_i \\le n$，每种颜色的钥匙都不超过 $5$ 把。\n\n| 测试点编号 | $n \\le$ | $m \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $100$ | $100$ | 无 |\n| $2 \\sim 3$ | $5000$ | $5000$ | 无 |\n| $4 \\sim 5$ | ${10}^5$ | ${10}^5$ | 无 |\n| $6 \\sim 8$ | $5 \\times {10}^5$ | ${10}^6$ | A |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | ${10}^6$ | 无 |\n\n特殊性质 A：对于每种出现过的颜色，恰有一把钥匙和一个宝箱对应该颜色。\n\n**【提示】**\n\n输入输出数据较大，请使用较为快速的输入输出方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 钥匙", "background": "", "description": "有 $n$ 座城市，编号为 $1, 2, \\ldots, n$。这些城市由 $n - 1$ 条无向道路相连，每条无向道路连接两座城市，保证任意两个城市连通。即这 $n$ 座城市构成一棵树。\n\n每座城市都有一件宝物。宝物分为两种：钥匙和宝箱。在一座城市里，要么有一把钥匙，要么有一个宝箱。钥匙和宝箱有不同的颜色，颜色为 $i$ 的钥匙只能打开颜色为 $i$ 的宝箱，打开宝箱后可以获得一枚金币，同时这把钥匙会损坏。\n\n**由于某种特殊的原因，同一种的钥匙最多只有 $\\bm{5}$ 把（同一种颜色的宝箱数量不限）。**\n\n现在小 R 规划了 $m$ 次旅行，第 $i$ 次旅行的起点为 $s_i$，终点为 $e_i$。小 R 从 $s_i$ 沿最短路径走到 $e_i$。当他走到一座有钥匙的城市时，他可以将钥匙放入背包。当他走到一座有宝箱的城市时，如果他有相应颜色的钥匙，那么他就会打开这个宝箱并获得一个金币；如果他没有相应颜色的钥匙，那么他什么都不做（宝箱不能带走）。问每次旅行能获得多少枚金币。\n\n**注意：旅行相互独立，即一次旅行完之后所有的钥匙和宝箱都会恢复到初始状态。**", "inputFormat": "第一行两个正整数 $n, m$，表示城市数量和旅行数量。\n\n接下来 $n$ 行，每行两个正整数 $t_i, c_i$，$t_i=1$ 表示第 $i$ 个城市里有一把钥匙，$t_i=2$ 表示有一个宝箱。$c_i$ 表示第 $i$ 座城市里钥匙或宝箱的颜色。数据保证每种颜色的钥匙都不超过 $5$ 把。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示有一条连接 $u_i$ 和 $v_i$ 的无向道路。\n\n接下来 $m$ 行，每行两个正整数 $s_i, e_i$ 表示一次旅行的起点和终点。", "outputFormat": "输出 $m$ 行，每行一个整数，表示第 $i$ 次旅行能获得的金币数量。", "hint": "**【样例 \\#4】**\n\n见附件中的 `keys/keys4.in` 与 `keys/keys4.ans`。\n\n该组样例满足 $n, m \\le {10}^5$ 和特殊性质 A。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le m \\le {10}^6$，$1 \\le t_i \\le 2$，$1 \\le c_i, u_i, v_i, s_i, e_i \\le n$，每种颜色的钥匙都不超过 $5$ 把。\n\n| 测试点编号 | $n \\le$ | $m \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $100$ | $100$ | 无 |\n| $2 \\sim 3$ | $5000$ | $5000$ | 无 |\n| $4 \\sim 5$ | ${10}^5$ | ${10}^5$ | 无 |\n| $6 \\sim 8$ | $5 \\times {10}^5$ | ${10}^6$ | A |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | ${10}^6$ | 无 |\n\n特殊性质 A：对于每种出现过的颜色，恰有一把钥匙和一个宝箱对应该颜色。\n\n**【提示】**\n\n输入输出数据较大，请使用较为快速的输入输出方式。", "locale": "zh-CN"}}}
{"pid": "P8340", "type": "P", "difficulty": 7, "samples": [["4 1000000007\n", "3\n"], ["10 1000000007\n", "180\n"], ["1000 65472\n", "2136\n"], ["100000 100\n", "96\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "安徽", "O2优化"], "title": "[AHOI2022] 山河重整", "background": "", "description": "生活在 $998244353$ 号小宇宙的艾和兰收到了归零者的讯息，决定响应回归运动。他们需要把大部分的物质归还给大宇宙，只留下极少的物质用于在新宇宙重建自己的文明。\n\n艾和兰的文明总共有 $n$ 个关键信息，编号为 $1, 2, \\ldots, n$。他们需要保留的信息是这些关键信息的一个子集 $S$。对于一个编号为 $x$ 的信息，只要 $S$ 中一个子集的编号和等于 $x$，那么他们设计的漂流瓶就可以在新宇宙将 $x$ 还原出来。\n\n艾和兰不禁想要思考，他们有多少种选择子集 $S$ 的方案，使得关键信息 $1, 2, \\ldots, n$ 均能被还原？艾和兰自然是只用 $1$ 微秒就算出了方案数的精确数值，现在他们想让你帮忙验算。由于方案数可能很大，你只需要输出方案数对 $M$ 取模的结果。", "inputFormat": "一行输入两个正整数 $N, M$。", "outputFormat": "输出一行一个整数，表示答案对 $M$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n总共有以下 $3$ 个集合满足条件：\n\n- $\\{ 1, 2, 3 \\}$\n- $\\{ 1, 2, 4 \\}$\n- $\\{ 1, 2, 3, 4 \\}$\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，保证 $1 \\le N \\le 5 \\times {10}^5$，$2 \\le M \\le 1.01 \\times {10}^9$。\n\n| 测试点编号 | $N \\le$ | $M \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $20$ | $1.01 \\times {10}^9$ |\n| $3 \\sim 4$ | $100$ | $1.01 \\times {10}^9$ |\n| $5 \\sim 6$ | $5000$ | $1.01 \\times {10}^9$ |\n| $7$ | $3 \\times {10}^5$ | $127$ |\n| $8$ | $5 \\times {10}^5$ | $127$ |\n| $9$ | $3 \\times {10}^5$ | $1.01 \\times {10}^9$ |\n| $10$ | $5 \\times {10}^5$ | $1.01 \\times {10}^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 山河重整", "background": "", "description": "生活在 $998244353$ 号小宇宙的艾和兰收到了归零者的讯息，决定响应回归运动。他们需要把大部分的物质归还给大宇宙，只留下极少的物质用于在新宇宙重建自己的文明。\n\n艾和兰的文明总共有 $n$ 个关键信息，编号为 $1, 2, \\ldots, n$。他们需要保留的信息是这些关键信息的一个子集 $S$。对于一个编号为 $x$ 的信息，只要 $S$ 中一个子集的编号和等于 $x$，那么他们设计的漂流瓶就可以在新宇宙将 $x$ 还原出来。\n\n艾和兰不禁想要思考，他们有多少种选择子集 $S$ 的方案，使得关键信息 $1, 2, \\ldots, n$ 均能被还原？艾和兰自然是只用 $1$ 微秒就算出了方案数的精确数值，现在他们想让你帮忙验算。由于方案数可能很大，你只需要输出方案数对 $M$ 取模的结果。", "inputFormat": "一行输入两个正整数 $N, M$。", "outputFormat": "输出一行一个整数，表示答案对 $M$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n总共有以下 $3$ 个集合满足条件：\n\n- $\\{ 1, 2, 3 \\}$\n- $\\{ 1, 2, 4 \\}$\n- $\\{ 1, 2, 3, 4 \\}$\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，保证 $1 \\le N \\le 5 \\times {10}^5$，$2 \\le M \\le 1.01 \\times {10}^9$。\n\n| 测试点编号 | $N \\le$ | $M \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $20$ | $1.01 \\times {10}^9$ |\n| $3 \\sim 4$ | $100$ | $1.01 \\times {10}^9$ |\n| $5 \\sim 6$ | $5000$ | $1.01 \\times {10}^9$ |\n| $7$ | $3 \\times {10}^5$ | $127$ |\n| $8$ | $5 \\times {10}^5$ | $127$ |\n| $9$ | $3 \\times {10}^5$ | $1.01 \\times {10}^9$ |\n| $10$ | $5 \\times {10}^5$ | $1.01 \\times {10}^9$ |", "locale": "zh-CN"}}}
{"pid": "P8341", "type": "P", "difficulty": 7, "samples": [["2\n5 5\n1 2\n3 1\n3 4\n5 3\n1 2\n1 4\n3 5\n3 5\n3 4\n10 5\n1 2\n3 1\n3 4\n5 3\n6 5\n7 8\n5 7\n7 9\n9 10\n1 2\n3 5\n5 6\n7 8\n9 10\n", "2\n2\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["各省省选", "2022", "安徽", "Special Judge", "O2优化"], "title": "[AHOI2022] 回忆", "background": "生活在题面里的他们，是一群怪异的少年。\n\n对城市中修建道路需满足的基本物理限制熟视无睹，沉迷于十万个城市、百万条道路上的各种结构。\n\n明明知道真正需要的数字庞大到无法计算，却偏要关心它模一个奇怪素数之后得到的结果。\n\n如此智力超群的他们，却总是在自己提出的诡异的问题下败下阵来，把它们一股脑地丢给你们来做。\n\n如今，他们长大了。他们学习到更普适的理论，习惯了更抽象的符号，不必再思考如此古怪的问题。但他们不曾料到，你们却以这些 “无用” 的问题为驱动，于计算机学科体系的一隅，开垦出了一片独属于 OI 的新天地。\n\n有一天，他们各自回忆起了少年时期提出的问题。", "description": "少年时，他们提出了 $n$ 个问题，从 $1$ 到 $n$ 编号。一个问题总由一个更基础的问题衍生而来，因此问题之间构成了一个树形的结构：$1$ 号问题是最基本的问题，也就是树的根节点，而其他问题都由其父亲节点对应的问题衍生而来。如果两个问题在树上相邻，则称这两个问题**彼此相关**。\n\n少年时期的他们一共做了 $m$ 次研究，第 $i$ 次的研究从提出较为基本的问题 $s_i$ 开始，将它不断地修改、推广，最终提出问题 $t_i$。这些研究满足 $s_i \\ne t_i$ 且 **$\\bm{s_i}$ 必定是 $\\bm{t_i}$ 的祖先**。即使研究的问题完全相同，从不同的角度研究会有不同的结果，因此**可能存在 $\\bm{i \\ne j, (s_i, t_i) = (s_j, t_j)}$ 的情形**。\n\n现在，他们正一轮轮地回忆着少年时提出的问题。在他们每一轮对问题的回忆中，他们首先回忆到 $n$ 个问题中的任意一个。接下来，如果存在与当前回忆到的问题**彼此相关且在这轮回忆中没有被回忆到**的问题，那么他们可以将思绪从当前问题上切换到这些问题中的**任意一个**，并回忆到这个新的问题。他们可以不断地切换思绪，也可以在回忆到任何一个问题之后结束回忆。**每一轮回忆是独立的，也就是说一个问题可以被多轮回忆回忆起。**\n\n如果在某一轮回忆中，他们**同时**回忆到了问题 $s_i$ 和问题 $t_i$，则称第 $i$ 次研究**被想起**。\n\n为了更好地理解上述概念，考察以下例子：$n = 5$，问题 $1$ 与问题 $2, 3$ 相关，问题 $3$ 与问题 $4, 5$ 相关。一轮可能的回忆是：从问题 $2$ 开始回忆，切换思绪到问题 $1$，再切换到问题 $3$，最终切换到问题 $5$ 并结束回忆。如果 $m = 4$，$(s_1, t_1) = (1, 2), (s_2, t_2) = (1, 4), (s_3, t_3) = (s_4, t_4) = (3, 5)$，那么这轮回忆会让第 $1$ 次、第 $3$ 次和第 $4$ 次研究被想起，而第 $2$ 次研究不会被想起。\n\n他们问你们的最后一个问题是：**如果每轮回忆的起点以及思绪的切换可以任意选择，最少需要多少轮回忆才能使所有的研究都被想起。**", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示数据组数。\n\n对于每组测试数据，第一行包含两个正整数 $n, m$，分别表示问题的个数和研究的个数。\n\n接下来 $n - 1$ 行每行包含两个正整数 $u_i, v_i$，表示问题 $u_i$ 与问题 $v_i$ 相关。\n\n接下来 $m$ 行每行包含两个正整数 $s_i, t_i$，描述一次研究。", "outputFormat": "对于每组测试数据输出一行一个正整数，表示他们**最少**需要回忆的轮数使得 $m$ 次研究均被想起。", "hint": "**【样例解释 \\#1】**\n\n样例中的第一组数据与题目描述所给的例子相同。一种可能的回忆方案为：\n\n- 第一轮回忆中，从问题 $2$ 开始，依次切换思绪到问题 $1, 3, 5$。此时第 $1, 3, 4$ 次研究被想起，但第 $2, 5$ 次没有。\n- 第二轮回忆中，从问题 $4$ 开始，依次切换思绪到问题 $3, 1$。此时第 $2, 5$ 次研究被想起。\n\n第二组数据符合特性 A 的要求。一种可能的回忆方案为：第一次回忆依次回忆到 $2, 1, 3, 5, 6$，第二次回忆依次回忆到 $8, 7, 9, 10$。\n\n**【样例 \\#2】**\n\n见附件中的 `memory/memory2.in` 与 `memory/memory2.ans`。\n\n这组数据满足了测试点 $1 \\sim 4$ 的条件。\n\n**【样例 \\#3】**\n\n见附件中的 `memory/memory3.in` 与 `memory/memory3.ans`。\n\n这组样例满足了特性 A 的条件。且除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#4】**\n\n见附件中的 `memory/memory4.in` 与 `memory/memory4.ans`。\n\n这组样例满足了测试点 $24 \\sim 25$ 的条件。同样例 \\#3，本样例满足：除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#5】**\n\n见附件中的 `memory/memory5.in` 与 `memory/memory5.ans`。\n\n这组样例满足了特性 B 的条件。\n\n**【样例 \\#6】**\n\n见附件中的 `memory/memory6.in` 与 `memory/memory6.ans`。\n\n这组样例满足了特性 C 的条件。\n\n**【评分方式】**\n\n对于每一组测试点，如果你的输出格式正确，且每一组数据输出的答案正确，那么你会获得 $4$ 分。\n\n否则，如果你的输出格式正确，且对于每一组数据，你输出的答案**与正确答案相等或者比正确答案大 $\\bm{1}$**，那么你将在此测试点上获得 $3$ 分。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点。对于所有的测试点，$1 \\le n, m \\le 2 \\times {10}^5$，$1 \\le \\sum n, \\sum m \\le\n5 \\times {10}^5$，$1 \\le u_i, v_i, s_i, t_i \\le n$，$s_i \\ne t_i$。保证输入的 $(u_i, v_i)$ 构成一棵树，$s_i$ 在以 $1$ 为根的树上是 $t_i$ 的祖先。\n\n| 测试点 | 规模限制 | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $T \\le 3000$，$n \\le 50$，$m \\le 15$ 且最多有 $5$ 组数据满足 $m \\ge 10$ | 无 |\n| $5 \\sim 6$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | A |\n| $7$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | B |\n| $8$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | C |\n| $9$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | 无 |\n| $10 \\sim 11$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | A |\n| $12$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | B |\n| $13$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | C |\n| $14 \\sim 16$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | 无 |\n| $17 \\sim 18$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | B |\n| $19 \\sim 20$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | C |\n| $21 \\sim 23$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | A |\n| $24 \\sim 25$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | 无 |\n\n特殊性质 A：保证 $n$ 为偶数，且树的结构为：对于任意正整数 $1 \\le i \\le \\lfloor \\frac{n}{2} \\rfloor$，$2 i$ 的父亲为 $2 i - 1$；若 $i \\ge 2$，则 $2 i - 1$ 的父亲为 $2 i - 3$。  \n特殊性质 B：保证对于所有的正整数 $1 \\le i \\le m$，$s_i$ 为 $t_i$ 的父亲。  \n特殊性质 C：保证对于所有的正整数 $1 \\le i \\le m$，$s_i = 1$。\n\n请注意，**测试点的难度与编号并没有直接关系**。\n\n**【提示】**\n\n请注意，为了取得部分分，你必须保证输出格式正确，即：输出恰好有 $m$ 行，且每行是一个正整数。\n\n此外，如果某组测试数据中你输出的结果比答案小 $1$ 而不是大 $1$，那么你**不能**在该测试点获得 $3$ 分。\n\n本题部分测试点读入量较大。为了优化程序的总运行时间，我们建议你采用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 回忆", "background": "生活在题面里的他们，是一群怪异的少年。\n\n对城市中修建道路需满足的基本物理限制熟视无睹，沉迷于十万个城市、百万条道路上的各种结构。\n\n明明知道真正需要的数字庞大到无法计算，却偏要关心它模一个奇怪素数之后得到的结果。\n\n如此智力超群的他们，却总是在自己提出的诡异的问题下败下阵来，把它们一股脑地丢给你们来做。\n\n如今，他们长大了。他们学习到更普适的理论，习惯了更抽象的符号，不必再思考如此古怪的问题。但他们不曾料到，你们却以这些 “无用” 的问题为驱动，于计算机学科体系的一隅，开垦出了一片独属于 OI 的新天地。\n\n有一天，他们各自回忆起了少年时期提出的问题。", "description": "少年时，他们提出了 $n$ 个问题，从 $1$ 到 $n$ 编号。一个问题总由一个更基础的问题衍生而来，因此问题之间构成了一个树形的结构：$1$ 号问题是最基本的问题，也就是树的根节点，而其他问题都由其父亲节点对应的问题衍生而来。如果两个问题在树上相邻，则称这两个问题**彼此相关**。\n\n少年时期的他们一共做了 $m$ 次研究，第 $i$ 次的研究从提出较为基本的问题 $s_i$ 开始，将它不断地修改、推广，最终提出问题 $t_i$。这些研究满足 $s_i \\ne t_i$ 且 **$\\bm{s_i}$ 必定是 $\\bm{t_i}$ 的祖先**。即使研究的问题完全相同，从不同的角度研究会有不同的结果，因此**可能存在 $\\bm{i \\ne j, (s_i, t_i) = (s_j, t_j)}$ 的情形**。\n\n现在，他们正一轮轮地回忆着少年时提出的问题。在他们每一轮对问题的回忆中，他们首先回忆到 $n$ 个问题中的任意一个。接下来，如果存在与当前回忆到的问题**彼此相关且在这轮回忆中没有被回忆到**的问题，那么他们可以将思绪从当前问题上切换到这些问题中的**任意一个**，并回忆到这个新的问题。他们可以不断地切换思绪，也可以在回忆到任何一个问题之后结束回忆。**每一轮回忆是独立的，也就是说一个问题可以被多轮回忆回忆起。**\n\n如果在某一轮回忆中，他们**同时**回忆到了问题 $s_i$ 和问题 $t_i$，则称第 $i$ 次研究**被想起**。\n\n为了更好地理解上述概念，考察以下例子：$n = 5$，问题 $1$ 与问题 $2, 3$ 相关，问题 $3$ 与问题 $4, 5$ 相关。一轮可能的回忆是：从问题 $2$ 开始回忆，切换思绪到问题 $1$，再切换到问题 $3$，最终切换到问题 $5$ 并结束回忆。如果 $m = 4$，$(s_1, t_1) = (1, 2), (s_2, t_2) = (1, 4), (s_3, t_3) = (s_4, t_4) = (3, 5)$，那么这轮回忆会让第 $1$ 次、第 $3$ 次和第 $4$ 次研究被想起，而第 $2$ 次研究不会被想起。\n\n他们问你们的最后一个问题是：**如果每轮回忆的起点以及思绪的切换可以任意选择，最少需要多少轮回忆才能使所有的研究都被想起。**", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示数据组数。\n\n对于每组测试数据，第一行包含两个正整数 $n, m$，分别表示问题的个数和研究的个数。\n\n接下来 $n - 1$ 行每行包含两个正整数 $u_i, v_i$，表示问题 $u_i$ 与问题 $v_i$ 相关。\n\n接下来 $m$ 行每行包含两个正整数 $s_i, t_i$，描述一次研究。", "outputFormat": "对于每组测试数据输出一行一个正整数，表示他们**最少**需要回忆的轮数使得 $m$ 次研究均被想起。", "hint": "**【样例解释 \\#1】**\n\n样例中的第一组数据与题目描述所给的例子相同。一种可能的回忆方案为：\n\n- 第一轮回忆中，从问题 $2$ 开始，依次切换思绪到问题 $1, 3, 5$。此时第 $1, 3, 4$ 次研究被想起，但第 $2, 5$ 次没有。\n- 第二轮回忆中，从问题 $4$ 开始，依次切换思绪到问题 $3, 1$。此时第 $2, 5$ 次研究被想起。\n\n第二组数据符合特性 A 的要求。一种可能的回忆方案为：第一次回忆依次回忆到 $2, 1, 3, 5, 6$，第二次回忆依次回忆到 $8, 7, 9, 10$。\n\n**【样例 \\#2】**\n\n见附件中的 `memory/memory2.in` 与 `memory/memory2.ans`。\n\n这组数据满足了测试点 $1 \\sim 4$ 的条件。\n\n**【样例 \\#3】**\n\n见附件中的 `memory/memory3.in` 与 `memory/memory3.ans`。\n\n这组样例满足了特性 A 的条件。且除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#4】**\n\n见附件中的 `memory/memory4.in` 与 `memory/memory4.ans`。\n\n这组样例满足了测试点 $24 \\sim 25$ 的条件。同样例 \\#3，本样例满足：除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#5】**\n\n见附件中的 `memory/memory5.in` 与 `memory/memory5.ans`。\n\n这组样例满足了特性 B 的条件。\n\n**【样例 \\#6】**\n\n见附件中的 `memory/memory6.in` 与 `memory/memory6.ans`。\n\n这组样例满足了特性 C 的条件。\n\n**【评分方式】**\n\n对于每一组测试点，如果你的输出格式正确，且每一组数据输出的答案正确，那么你会获得 $4$ 分。\n\n否则，如果你的输出格式正确，且对于每一组数据，你输出的答案**与正确答案相等或者比正确答案大 $\\bm{1}$**，那么你将在此测试点上获得 $3$ 分。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点。对于所有的测试点，$1 \\le n, m \\le 2 \\times {10}^5$，$1 \\le \\sum n, \\sum m \\le\n5 \\times {10}^5$，$1 \\le u_i, v_i, s_i, t_i \\le n$，$s_i \\ne t_i$。保证输入的 $(u_i, v_i)$ 构成一棵树，$s_i$ 在以 $1$ 为根的树上是 $t_i$ 的祖先。\n\n| 测试点 | 规模限制 | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $T \\le 3000$，$n \\le 50$，$m \\le 15$ 且最多有 $5$ 组数据满足 $m \\ge 10$ | 无 |\n| $5 \\sim 6$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | A |\n| $7$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | B |\n| $8$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | C |\n| $9$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | 无 |\n| $10 \\sim 11$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | A |\n| $12$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | B |\n| $13$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | C |\n| $14 \\sim 16$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | 无 |\n| $17 \\sim 18$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | B |\n| $19 \\sim 20$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | C |\n| $21 \\sim 23$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | A |\n| $24 \\sim 25$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | 无 |\n\n特殊性质 A：保证 $n$ 为偶数，且树的结构为：对于任意正整数 $1 \\le i \\le \\lfloor \\frac{n}{2} \\rfloor$，$2 i$ 的父亲为 $2 i - 1$；若 $i \\ge 2$，则 $2 i - 1$ 的父亲为 $2 i - 3$。  \n特殊性质 B：保证对于所有的正整数 $1 \\le i \\le m$，$s_i$ 为 $t_i$ 的父亲。  \n特殊性质 C：保证对于所有的正整数 $1 \\le i \\le m$，$s_i = 1$。\n\n请注意，**测试点的难度与编号并没有直接关系**。\n\n**【提示】**\n\n请注意，为了取得部分分，你必须保证输出格式正确，即：输出恰好有 $m$ 行，且每行是一个正整数。\n\n此外，如果某组测试数据中你输出的结果比答案小 $1$ 而不是大 $1$，那么你**不能**在该测试点获得 $3$ 分。\n\n本题部分测试点读入量较大。为了优化程序的总运行时间，我们建议你采用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P8342", "type": "P", "difficulty": 2, "samples": [["3\npavel 120 200 300 400 500\nkeko 150 400 300 200 100\nbartol 470 120 90 93 189", "1 2\n1 3\n2 3"], ["2\nante 275 275 275 275 275\nmate 25 100 175 250 325", "1 1\n2 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #6] Med", "background": "", "description": "今天是公开赛的最后一轮。人们知道这两个比赛采用相同的计分系统。更准确地说，两场比赛都有 $6$ 轮，每轮的积分在 $0$ 分到 $500$ 分之间，每轮比赛的分数会被加起来作为最后排名的总分。六轮比赛结束后，选手将根据总分进行排名。如果两个竞争对手得分相同，则字典序上较小的排名再字典序较大的人之前。没有两个竞争者有相同的名字。\n养蜂人非常不耐烦，他们想提前知道他们的最终排名是多少。\n\n每个养蜂人都想知道他们在最终排名中可能的最佳和最差位置。作为 $\\rm{COCB}$ 比赛程序员，他们让你告诉他们第六轮后他们可能占据的排名。\n", "inputFormat": "第一行包含一个正整数 $n(1≤n≤500)$，即养蜂人的数量。\n\n接下来 $n$ 行，每行包含一个养蜂人的名称 $s_i(1 ≤|s_i|≤10)$ 和 $5$ 个数字 $b_1\\cdots b_5$，表示第 $i$ 个养蜂人在前 $5$ 轮比赛的得分。", "outputFormat": "输出 $n$ 行。\n\n在第 $i$ 行中，输出第 $i$ 行的最佳排名和最差排名可能位置。", "hint": "样例 2：到目前为止，$\\rm{ante}$ 是 $1375$ 分，$\\rm{mate}$ 是 $875$ 分。如果 $\\rm{mate}$ 在最后一轮赢了 $500$ 分，并且 $\\rm{ante}$ 是 $0$ 分，结果排名是持平的，他们都有 $1375$ 分。然而，既然是按字典排序，$\\rm{ante}$ 比 $\\rm{mate}$ 小，所以仍将排名领先。\n\n### 数据范围：\n\n对于 $20\\%$ 的数据：$1\\le n\\le2$\n\n对于 $100\\%$ 的数据：$1\\le n\\le500$，$1\\le |s_i|\\le10$（保证每个人的名字互不相同），$1\\le b_i \\le500$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $50$ 分", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #6] Med", "background": "", "description": "今天是公开赛的最后一轮。人们知道这两个比赛采用相同的计分系统。更准确地说，两场比赛都有 $6$ 轮，每轮的积分在 $0$ 分到 $500$ 分之间，每轮比赛的分数会被加起来作为最后排名的总分。六轮比赛结束后，选手将根据总分进行排名。如果两个竞争对手得分相同，则字典序上较小的排名再字典序较大的人之前。没有两个竞争者有相同的名字。\n养蜂人非常不耐烦，他们想提前知道他们的最终排名是多少。\n\n每个养蜂人都想知道他们在最终排名中可能的最佳和最差位置。作为 $\\rm{COCB}$ 比赛程序员，他们让你告诉他们第六轮后他们可能占据的排名。\n", "inputFormat": "第一行包含一个正整数 $n(1≤n≤500)$，即养蜂人的数量。\n\n接下来 $n$ 行，每行包含一个养蜂人的名称 $s_i(1 ≤|s_i|≤10)$ 和 $5$ 个数字 $b_1\\cdots b_5$，表示第 $i$ 个养蜂人在前 $5$ 轮比赛的得分。", "outputFormat": "输出 $n$ 行。\n\n在第 $i$ 行中，输出第 $i$ 行的最佳排名和最差排名可能位置。", "hint": "样例 2：到目前为止，$\\rm{ante}$ 是 $1375$ 分，$\\rm{mate}$ 是 $875$ 分。如果 $\\rm{mate}$ 在最后一轮赢了 $500$ 分，并且 $\\rm{ante}$ 是 $0$ 分，结果排名是持平的，他们都有 $1375$ 分。然而，既然是按字典排序，$\\rm{ante}$ 比 $\\rm{mate}$ 小，所以仍将排名领先。\n\n### 数据范围：\n\n对于 $20\\%$ 的数据：$1\\le n\\le2$\n\n对于 $100\\%$ 的数据：$1\\le n\\le500$，$1\\le |s_i|\\le10$（保证每个人的名字互不相同），$1\\le b_i \\le500$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $50$ 分", "locale": "zh-CN"}}}
{"pid": "P8343", "type": "P", "difficulty": 3, "samples": [["2 2 10 10\n1 3\n4 1\n", "2"], ["3 2 3 4\n1 9\n1 1\n8 1", "3"], ["3 4 5 3\n1 1 1 1\n9 6 7 6\n8 1 9 7\n", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #6] Zemljište", "background": "", "description": "有一块地，大小为 $r \\times s$，$\\rm Matej$ 想买下它。这块地每个 $1\\times1$ 的正方形都有不同的价格。  \n\n设一片非空子矩阵价格总和为 $m$，则这片子矩阵的权值为 $|m-a|+|m-b|$，您需要找到最小权值的子矩阵。  \n\n您只需要输出最小权值即可。\n", "inputFormat": "第一行包含四个正整数 $r$, $s$ , $a$ 和 $b$ 。\n\n下面 $r$ 行，第 $i$ 行，有 $s$ 个正整数，第 $j$ 个数表示 $c_{i,j}$，表示价格。", "outputFormat": "一行一个整数 $v$，表示最小非空子矩阵的权值。", "hint": "### 样例解释 2  \n![](https://cdn.luogu.com.cn/upload/image_hosting/2mzt4qih.png)\n\n如图，总价格是$1 + 1 = 2$，这块地的权值是 $|3−2| + |4−2| =3$。\n\n### 数据范围：\n\n对于 $14\\%$ 的数据：$1\\le r,s\\le20$\n\n对于 $28\\%$ 的数据：$1\\le r,s\\le100$\n\n对于 $100\\%$ 的数据：$1\\le r,s\\le500$，$1\\le a,b,c_{i,j}\\le10^9$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $70$ 分", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #6] Zemljište", "background": "", "description": "有一块地，大小为 $r \\times s$，$\\rm Matej$ 想买下它。这块地每个 $1\\times1$ 的正方形都有不同的价格。  \n\n设一片非空子矩阵价格总和为 $m$，则这片子矩阵的权值为 $|m-a|+|m-b|$，您需要找到最小权值的子矩阵。  \n\n您只需要输出最小权值即可。\n", "inputFormat": "第一行包含四个正整数 $r$, $s$ , $a$ 和 $b$ 。\n\n下面 $r$ 行，第 $i$ 行，有 $s$ 个正整数，第 $j$ 个数表示 $c_{i,j}$，表示价格。", "outputFormat": "一行一个整数 $v$，表示最小非空子矩阵的权值。", "hint": "### 样例解释 2  \n![](https://cdn.luogu.com.cn/upload/image_hosting/2mzt4qih.png)\n\n如图，总价格是$1 + 1 = 2$，这块地的权值是 $|3−2| + |4−2| =3$。\n\n### 数据范围：\n\n对于 $14\\%$ 的数据：$1\\le r,s\\le20$\n\n对于 $28\\%$ 的数据：$1\\le r,s\\le100$\n\n对于 $100\\%$ 的数据：$1\\le r,s\\le500$，$1\\le a,b,c_{i,j}\\le10^9$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $70$ 分", "locale": "zh-CN"}}}
{"pid": "P8344", "type": "P", "difficulty": 2, "samples": [["3\n2 6 4\n5 8 2\n10 10 22", "Renko\nMerry\nRenko"], ["10\n221 44724 313\n157 60759 464\n181 145867 893\n182 59650 418\n384 168626 631\n702 650463 194\n617 376055 918\n261 215764 955\n502 744180 440\n9 1626 168", "Renko\nMerry\nRenko\nRenko\nRenko\nMerry\nMerry\nMerry\nMerry\nRenko"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-6」走在夜晚的莲台野", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/8brkt9is.png)](https://thwiki.cc/%E8%8E%B2%E5%8F%B0%E9%87%8E%E5%A4%9C%E8%A1%8C)\n\n在科学世纪中，科学昌明，信息科技高度发达，但与此同时，想象力灭绝了，而无法解释的事物则被当做一个错误抹煞，无法解释的神秘也被否定。\n\n宇佐见莲子（莲子）与玛艾露贝莉·赫恩（梅莉）成立了一个社团——秘封俱乐部。作为秘封俱乐部的成员，她们寻找着幻想的境界，在逐渐被人们所遗忘的世界中追寻着真正的美好。\n\n她们的第一个活动，是探寻莲台野的结界缺口。", "description": "### 简要题意\n\n有 $x$ 个金色木板，$y$ 个银色木板，还有一个可放下 $z$ 个木板的空容器。每向容器中放入一个金色木板**后**，会丢弃容器内所有银色木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板）。问是否存在一种方式，使得所有木板都被**放进过**容器中。\n\n------\n### 原始题意\n\n在莲台野的入口，莲子与梅莉想要穿过现实与虚幻的结界，进入幻想乡。然而，穿越结界是有一定要求的。\n\n具体而言，在结界边上会有若干个细长木板，其中有 $x$ 个是金色的木板，$y$ 个是银色的木板。梅莉通过自己能够看见结界的能力，发现了一个能够容得下 $z$ 个木板的容器，并且通过自己的潜意识得知了规则：\n- 如果她们放进了一个金色的木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板），那么**在容器中所有**银色的木板将被丢弃。\n- 最后需要**所有**的木板都被**放入过**容器，结界的大门才将会被打开，即她们能够进入幻想乡。\n\n现在已经是凌晨 2 点 27 分 41 秒，只有在凌晨 2 点 30 分前完成这个问题，她们才能进入幻想乡。现在，莲子和梅莉把这个问题交给了你，希望你能尽快帮她们做出回答——是否存在一种方案，使得她们能否进入幻想乡呢？\n\n由于莲子和梅莉担心你在大半夜糊弄她们，因此她们会一共询问你 $T$ 次。", "inputFormat": "- 第一行输入一个正整数 $T$，表示数据组数。\n- 第二行开始，往下 $T$ 行，每行三个正整数 $x,y,z$，含义如题目所述。", "outputFormat": "对于每次询问，输出一行，表示答案。若存在一种方案，则输出 `Renko`，否则输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- 对于第一次询问，存在如下的方案：\n  - 先放三个银色木板；\n  - 再放一个金色木板；\n  - 再放两个银色木板；\n  - 再放一个金色木板；\n  - 再放一个银色木板。\n- 这样就可以使得每个木板都被放入过容器中，莲子和梅莉可以进入幻想乡，故输出 `Renko`。\n- 对于第二次询问，显然不存在方案。\n- 对于第三次询问，可以先放进去十个金色木板，再放进去十个银色木板。\n\n#### 样例 \\#2\n\n本组样例符合 $\\textbf{subtask 2}$ 的要求。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{x\\le} & \\bm{y\\le} & \\bm{z\\le} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 1 & 10 & 10 & 10 &-\\cr\\hline\n2 & 30 & 10 & 10^3 & 10^6 & 10^3 &1\\cr\\hline\n3 & 20 & 100 & 10^6 & 10^9 & 10^6 &2\\cr\\hline\n4 & 30 & 1000 & 10^9 & 5 \\times10^{17} & 10^9 &3\\cr\\hline\n\\end{array}\n$$\n\n对 $100\\%$ 的数据，保证 $1 \\le T \\leq 1000$，$1 \\leq x,z \\leq 10^9$，$1 \\leq y \\leq 5 \\times 10^{17}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」走在夜晚的莲台野", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/8brkt9is.png)](https://thwiki.cc/%E8%8E%B2%E5%8F%B0%E9%87%8E%E5%A4%9C%E8%A1%8C)\n\n在科学世纪中，科学昌明，信息科技高度发达，但与此同时，想象力灭绝了，而无法解释的事物则被当做一个错误抹煞，无法解释的神秘也被否定。\n\n宇佐见莲子（莲子）与玛艾露贝莉·赫恩（梅莉）成立了一个社团——秘封俱乐部。作为秘封俱乐部的成员，她们寻找着幻想的境界，在逐渐被人们所遗忘的世界中追寻着真正的美好。\n\n她们的第一个活动，是探寻莲台野的结界缺口。", "description": "### 简要题意\n\n有 $x$ 个金色木板，$y$ 个银色木板，还有一个可放下 $z$ 个木板的空容器。每向容器中放入一个金色木板**后**，会丢弃容器内所有银色木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板）。问是否存在一种方式，使得所有木板都被**放进过**容器中。\n\n------\n### 原始题意\n\n在莲台野的入口，莲子与梅莉想要穿过现实与虚幻的结界，进入幻想乡。然而，穿越结界是有一定要求的。\n\n具体而言，在结界边上会有若干个细长木板，其中有 $x$ 个是金色的木板，$y$ 个是银色的木板。梅莉通过自己能够看见结界的能力，发现了一个能够容得下 $z$ 个木板的容器，并且通过自己的潜意识得知了规则：\n- 如果她们放进了一个金色的木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板），那么**在容器中所有**银色的木板将被丢弃。\n- 最后需要**所有**的木板都被**放入过**容器，结界的大门才将会被打开，即她们能够进入幻想乡。\n\n现在已经是凌晨 2 点 27 分 41 秒，只有在凌晨 2 点 30 分前完成这个问题，她们才能进入幻想乡。现在，莲子和梅莉把这个问题交给了你，希望你能尽快帮她们做出回答——是否存在一种方案，使得她们能否进入幻想乡呢？\n\n由于莲子和梅莉担心你在大半夜糊弄她们，因此她们会一共询问你 $T$ 次。", "inputFormat": "- 第一行输入一个正整数 $T$，表示数据组数。\n- 第二行开始，往下 $T$ 行，每行三个正整数 $x,y,z$，含义如题目所述。", "outputFormat": "对于每次询问，输出一行，表示答案。若存在一种方案，则输出 `Renko`，否则输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- 对于第一次询问，存在如下的方案：\n  - 先放三个银色木板；\n  - 再放一个金色木板；\n  - 再放两个银色木板；\n  - 再放一个金色木板；\n  - 再放一个银色木板。\n- 这样就可以使得每个木板都被放入过容器中，莲子和梅莉可以进入幻想乡，故输出 `Renko`。\n- 对于第二次询问，显然不存在方案。\n- 对于第三次询问，可以先放进去十个金色木板，再放进去十个银色木板。\n\n#### 样例 \\#2\n\n本组样例符合 $\\textbf{subtask 2}$ 的要求。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{x\\le} & \\bm{y\\le} & \\bm{z\\le} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 1 & 10 & 10 & 10 &-\\cr\\hline\n2 & 30 & 10 & 10^3 & 10^6 & 10^3 &1\\cr\\hline\n3 & 20 & 100 & 10^6 & 10^9 & 10^6 &2\\cr\\hline\n4 & 30 & 1000 & 10^9 & 5 \\times10^{17} & 10^9 &3\\cr\\hline\n\\end{array}\n$$\n\n对 $100\\%$ 的数据，保证 $1 \\le T \\leq 1000$，$1 \\leq x,z \\leq 10^9$，$1 \\leq y \\leq 5 \\times 10^{17}$。", "locale": "zh-CN"}}}
