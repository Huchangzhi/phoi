{"pid": "P10775", "type": "P", "difficulty": 7, "samples": [["010 3\n5 9 5\n5 4 0\n8 8 8", "110 121 65\n45 61 25\n144 168 104"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性代数", "Berlekamp-Massey(BM) 算法"], "title": "BZOJ4162 shlw loves matrix II", "background": "**请注意：本题不是矩阵快速幂模板题。**", "description": "给定矩阵 $M$，计算 $M^n$，并将其中每一个元素对 $10^9+7$ 取模输出。", "inputFormat": "第一行两个整数 $n,k$，其中 $n$ 用二进制表示，可能含有前导零。\n\n接下来 $k$ 行描述了一个 $k\\times k$ 的矩阵 $M$。", "outputFormat": "输出题目描述中要求的矩阵，格式同输入。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 2^{10^4}$，$1\\leq k\\leq 50$，$0\\leq M_{i,j}<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4162 shlw loves matrix II", "background": "**请注意：本题不是矩阵快速幂模板题。**", "description": "给定矩阵 $M$，计算 $M^n$，并将其中每一个元素对 $10^9+7$ 取模输出。", "inputFormat": "第一行两个整数 $n,k$，其中 $n$ 用二进制表示，可能含有前导零。\n\n接下来 $k$ 行描述了一个 $k\\times k$ 的矩阵 $M$。", "outputFormat": "输出题目描述中要求的矩阵，格式同输入。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 2^{10^4}$，$1\\leq k\\leq 50$，$0\\leq M_{i,j}<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P10776", "type": "P", "difficulty": 7, "samples": [["5\n1 2 3 3\n2 2 4 3\n5\n1 3\n1 1\n2 4 4 2\n2 3 1 1\n1 2", "8\n8\n7"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态树 LCT"], "title": "BZOJ3914 Jabby's shadows", "background": "", "description": "给出一棵 $n$ 个点的无根树，树有边权，每个点有两种颜色，最初所有点均为黑色。黑色为 1，白色为 2。每条边有正的权值。\n\n需要维护 $m$ 次操作：\n- `1 u`：询问 $u$ 所在树上同色连通块的直径。若为 0，则输出 QwQ。\n- `2 u v c`：将 $u \\sim v$ 的链覆盖为颜色 $c$。", "inputFormat": "第一行一个正整数 $n$，表示树的结点个数。\n\n第二行 $n-1$ 个正整数 $f_i$，表示结点 $2\\sim n$ 的父结点。\n\n第三行 $n-1$ 个正整数 $e_i$，表示 $2\\sim n$ 号结点到父结点的边的边权。\n\n第四行一个正整数 $m$，表示操作数。接下来 $m$ 行依次表示操作。", "outputFormat": "对于每个 $1$ 操作输出一行作为答案。", "hint": "数据保证，$1\\leq n,m\\leq 100000$，$1\\leq e_i\\leq 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3914 Jabby's shadows", "background": "", "description": "给出一棵 $n$ 个点的无根树，树有边权，每个点有两种颜色，最初所有点均为黑色。黑色为 1，白色为 2。每条边有正的权值。\n\n需要维护 $m$ 次操作：\n- `1 u`：询问 $u$ 所在树上同色连通块的直径。若为 0，则输出 QwQ。\n- `2 u v c`：将 $u \\sim v$ 的链覆盖为颜色 $c$。", "inputFormat": "第一行一个正整数 $n$，表示树的结点个数。\n\n第二行 $n-1$ 个正整数 $f_i$，表示结点 $2\\sim n$ 的父结点。\n\n第三行 $n-1$ 个正整数 $e_i$，表示 $2\\sim n$ 号结点到父结点的边的边权。\n\n第四行一个正整数 $m$，表示操作数。接下来 $m$ 行依次表示操作。", "outputFormat": "对于每个 $1$ 操作输出一行作为答案。", "hint": "数据保证，$1\\leq n,m\\leq 100000$，$1\\leq e_i\\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P10777", "type": "P", "difficulty": 4, "samples": [["6 6\n1 2 1\n2 3 1\n1 3 1\n4 5 1\n5 6 1\n4 6 1\n14\n2\n1 0\n2\n1 1\n1 2\n2\n1 3\n1 4\n1 5\n2\n1 3\n1 4\n1 5\n2", "2\n-1\n1\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["欧拉回路"], "title": "BZOJ3706 反色刷", "background": "", "description": "给定 $n$ 个点，$m$ 条边的无向图，边有黑白两种颜色。现在你可以进行若干次回路反色操作，每次操作从任意点出发，每经过一条边，将其颜色反转，最后回到起点。判断能否通过若干次操作，使这张图所有边都变成白色。\n\n因为某种原因，边的颜色是会改变的，即你相当于需要支持以下两种操作：\n- `1 x` 将第 $x$ 条边反色（边的编号为 $0\\sim m-1$）；\n- `2` 求出最少操作次数；", "inputFormat": "第一行两个整数 $n,m$ 表示这张图有 $n$ 个点 $m$ 条边。\n\n接下来 $m$ 行，每行 $3$ 个整数 $u,v,c$ 表示一条无向边和这条边的颜色，其中 $0$ 为白色，$1$ 为黑色。\n\n接下来一个整数 $q$，表示有 $q$ 个操作。接下来 $q$ 行操作，描述如上。", "outputFormat": "对于每个询问，输出一行一个整数，表示最少需要的反色操作次数。如果没有合法方案输出 $-1$。", "hint": "数据保证，$1\\leq n,m,q \\leq 1000000$，$c < 2$，没有重边自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3706 反色刷", "background": "", "description": "给定 $n$ 个点，$m$ 条边的无向图，边有黑白两种颜色。现在你可以进行若干次回路反色操作，每次操作从任意点出发，每经过一条边，将其颜色反转，最后回到起点。判断能否通过若干次操作，使这张图所有边都变成白色。\n\n因为某种原因，边的颜色是会改变的，即你相当于需要支持以下两种操作：\n- `1 x` 将第 $x$ 条边反色（边的编号为 $0\\sim m-1$）；\n- `2` 求出最少操作次数；", "inputFormat": "第一行两个整数 $n,m$ 表示这张图有 $n$ 个点 $m$ 条边。\n\n接下来 $m$ 行，每行 $3$ 个整数 $u,v,c$ 表示一条无向边和这条边的颜色，其中 $0$ 为白色，$1$ 为黑色。\n\n接下来一个整数 $q$，表示有 $q$ 个操作。接下来 $q$ 行操作，描述如上。", "outputFormat": "对于每个询问，输出一行一个整数，表示最少需要的反色操作次数。如果没有合法方案输出 $-1$。", "hint": "数据保证，$1\\leq n,m,q \\leq 1000000$，$c < 2$，没有重边自环。", "locale": "zh-CN"}}}
{"pid": "P10778", "type": "P", "difficulty": 6, "samples": [["5 10\n2 1\n3 2\n4 2\n5 1\n5 3\n4 1\n4 3\n5 2\n3 1\n5 4\n5\n1 1\n3 7 0 3\n4 0 7 4 6\n2 2 7\n4 5 0 2 13", "Connected\nConnected\nConnected\nConnected\nDisconnected"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性基"], "title": "BZOJ3569 DZY Loves Chinese II", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3569 DZY Loves Chinese II", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN"}}}
{"pid": "P10779", "type": "P", "difficulty": 6, "samples": [["5 6\n1 2\n2 3\n3 1\n3 4\n4 5\n3 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "Tarjan", "双连通分量", "仙人掌", "圆方树", "广义串并联图"], "title": "BZOJ4316 小 C 的独立集", "background": "", "description": "给定简单无向图 $G = (V, E)$，保证每条边属于且仅属于一个简单环，求 $G$ 的最大独立集大小。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的点数与边数。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，描述一条无向边。", "outputFormat": "输出 $G$ 的最大独立集大小。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^4$，$1\\leq m\\leq 6\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4316 小 C 的独立集", "background": "", "description": "给定简单无向图 $G = (V, E)$，保证每条边属于且仅属于一个简单环，求 $G$ 的最大独立集大小。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的点数与边数。\n\n接下来 $m$ 行，每行两个正整数 $u,v$，描述一条无向边。", "outputFormat": "输出 $G$ 的最大独立集大小。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 5\\times 10^4$，$1\\leq m\\leq 6\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10780", "type": "P", "difficulty": 4, "samples": [["1", "1"], ["5", "35"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["生成函数"], "title": "BZOJ3028 食物", "background": null, "description": "明明这次又要出去旅游了，和上次不同的是，他这次要去宇宙探险！我们暂且不讨论他有多么 NC，他又幻想了他应该带一些什么东西。理所当然的，你当然要帮他计算携带 $n$ 件物品的方案数。\n\n他这次又准备带一些受欢迎的食物，如：蜜桃多啦，鸡块啦，承德汉堡等等。\n\n当然，他又有一些稀奇古怪的限制：\n\n每种食物的限制如下：\n- 承德汉堡：偶数个；\n- 可乐：$0$ 个或 $1$ 个；\n- 鸡腿：$0$ 个，$1$ 个或 $2$ 个；\n- 蜜桃多：奇数个；\n- 鸡块：$4$ 的倍数个；\n- 包子：$0$ 个，$1$ 个，$2$ 个或 $3$ 个；\n- 土豆片炒肉：不超过一个；\n- 面包：$3$ 的倍数个；\n\n注意，这里我们懒得考虑明明对于带的食物该怎么搭配着吃，也认为每种食物都是以『个』为单位（反正是幻想嘛），只要总数加起来是 $n$ 就算一种方案。因此，对于给出的 $n$，你需要计算出方案数，并对 $10007$ 取模。", "inputFormat": "一个整数 $n$，表示总数。", "outputFormat": "一个整数，表示方案数模 $10007$。", "hint": "- 对于 $40\\%$ 的数据，满足 $1\\leq n\\leq 10^5$；\n- 对于所有数据，$1\\leq n\\leq 10^{500}$；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3028 食物", "background": null, "description": "明明这次又要出去旅游了，和上次不同的是，他这次要去宇宙探险！我们暂且不讨论他有多么 NC，他又幻想了他应该带一些什么东西。理所当然的，你当然要帮他计算携带 $n$ 件物品的方案数。\n\n他这次又准备带一些受欢迎的食物，如：蜜桃多啦，鸡块啦，承德汉堡等等。\n\n当然，他又有一些稀奇古怪的限制：\n\n每种食物的限制如下：\n- 承德汉堡：偶数个；\n- 可乐：$0$ 个或 $1$ 个；\n- 鸡腿：$0$ 个，$1$ 个或 $2$ 个；\n- 蜜桃多：奇数个；\n- 鸡块：$4$ 的倍数个；\n- 包子：$0$ 个，$1$ 个，$2$ 个或 $3$ 个；\n- 土豆片炒肉：不超过一个；\n- 面包：$3$ 的倍数个；\n\n注意，这里我们懒得考虑明明对于带的食物该怎么搭配着吃，也认为每种食物都是以『个』为单位（反正是幻想嘛），只要总数加起来是 $n$ 就算一种方案。因此，对于给出的 $n$，你需要计算出方案数，并对 $10007$ 取模。", "inputFormat": "一个整数 $n$，表示总数。", "outputFormat": "一个整数，表示方案数模 $10007$。", "hint": "- 对于 $40\\%$ 的数据，满足 $1\\leq n\\leq 10^5$；\n- 对于所有数据，$1\\leq n\\leq 10^{500}$；", "locale": "zh-CN"}}}
{"pid": "P10781", "type": "P", "difficulty": 2, "samples": [["2\n1 6\n2 7\n", "6.0\n10.5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "O2优化", "梦熊比赛"], "title": "【MX-J1-T1】『FLA - III』Spectral", "background": "原题链接：<https://oier.team/problems/J1A>。\n\n---\n\n> 没有看到昂星团。", "description": "有一团火，最开始它的温度是 $0$，火焰旁边有 $n$ 个炭块，每块炭都有 $k$ 点能量。\n\n使用 $T_i$ 表示烧掉 $i$ 块炭后火焰的温度，有：\n\n$$T_i = \\begin{cases} 0 & i = 0 \\\\ k+ \\dfrac{T_{i-1}}{i} & i \\neq 0 \\end{cases}$$\n\n火焰能够达到的最高温度是多少？", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据，输出一行一个实数表示火焰能达到的最高温度，四舍五入到小数点后 $1$ 位。", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，有 $1$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $6$，答案为 $6.0$。对于第二组测试数据，有 $2$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $7$，烧掉 $2$ 块炭后火焰温度为 $10.5$，答案为 $10.5$。\n\n**「数据范围」**\n\n|测试点编号|$T \\leq$|$n \\leq $|$k \\leq$|\n|:---:|:---:|:---:|:---:|\n|$1 \\sim 2$|$5$|$2$|$10$|\n|$3 \\sim 4$|$5$|$10^7$|$10^9$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n,k \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T1】『FLA - III』Spectral", "background": "原题链接：<https://oier.team/problems/J1A>。\n\n---\n\n> 没有看到昂星团。", "description": "有一团火，最开始它的温度是 $0$，火焰旁边有 $n$ 个炭块，每块炭都有 $k$ 点能量。\n\n使用 $T_i$ 表示烧掉 $i$ 块炭后火焰的温度，有：\n\n$$T_i = \\begin{cases} 0 & i = 0 \\\\ k+ \\dfrac{T_{i-1}}{i} & i \\neq 0 \\end{cases}$$\n\n火焰能够达到的最高温度是多少？", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $n,k$。", "outputFormat": "对于每组测试数据，输出一行一个实数表示火焰能达到的最高温度，四舍五入到小数点后 $1$ 位。", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，有 $1$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $6$，答案为 $6.0$。对于第二组测试数据，有 $2$ 块炭，未烧炭时火焰温度为 $0$，烧掉 $1$ 块炭后火焰温度为 $7$，烧掉 $2$ 块炭后火焰温度为 $10.5$，答案为 $10.5$。\n\n**「数据范围」**\n\n|测试点编号|$T \\leq$|$n \\leq $|$k \\leq$|\n|:---:|:---:|:---:|:---:|\n|$1 \\sim 2$|$5$|$2$|$10$|\n|$3 \\sim 4$|$5$|$10^7$|$10^9$|\n|$5$|$10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n,k \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10782", "type": "P", "difficulty": 2, "samples": [["4\n1 1\n7 3\n23 8\n17 23\n", "1\n3\n-1\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "Special Judge", "O2优化", "构造", "梦熊比赛"], "title": "【MX-J1-T2】『FLA - III』Ilumina", "background": "原题链接：<https://oier.team/problems/J1B>。", "description": "定义 $\\lfloor X \\rfloor$ 为最大的小于等于 $X$ 的整数，例如 $\\lfloor 1.99 \\rfloor = 1,\\lfloor 7 \\rfloor = 7$。\n\n有五个正整数 $n,m,a,b,c$，已知 $b=\\left\\lfloor \\frac{a}{n} \\right\\rfloor , c=\\left\\lfloor \\frac{b}{m} \\right\\rfloor$。\n\n给定 $a$ 和 $c$ 的值，求出一个合法的 $b$ 的值，或者报告不存在合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $a,c$。", "outputFormat": "对于每组数据，输出一行一个整数。如果不存在合法的 $b$ 的值，输出 `-1`；否则输出一个合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，取 $n=1,m=1$ 时可以得到 $b=1$。\n\n对于第二组测试数据，取 $n=2,m=1$ 时可以得到 $b=3$。\n\n对于第三、第四组测试数据，可以证明不存在合法的 $b$ 的值。\n\n**「数据范围」**\n\n|测试点编号|$a,c \\leq$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|无|\n|$4 \\sim 6$|$10^3$|无|\n|$7 \\sim 8$|$10^{18}$|有|\n|$9 \\sim 10$|$10^{18}$|无|\n\n特殊性质：保证对于每组给定的 $a,c$ 一定存在合法的 $b$ 的值。\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq a,c \\leq 10^{18}$。\n\n2024 年 7 月 15 日：添加了 7 组 hack 数据置于 Subtask #1。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T2】『FLA - III』Ilumina", "background": "原题链接：<https://oier.team/problems/J1B>。", "description": "定义 $\\lfloor X \\rfloor$ 为最大的小于等于 $X$ 的整数，例如 $\\lfloor 1.99 \\rfloor = 1,\\lfloor 7 \\rfloor = 7$。\n\n有五个正整数 $n,m,a,b,c$，已知 $b=\\left\\lfloor \\frac{a}{n} \\right\\rfloor , c=\\left\\lfloor \\frac{b}{m} \\right\\rfloor$。\n\n给定 $a$ 和 $c$ 的值，求出一个合法的 $b$ 的值，或者报告不存在合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，输入一行两个正整数 $a,c$。", "outputFormat": "对于每组数据，输出一行一个整数。如果不存在合法的 $b$ 的值，输出 `-1`；否则输出一个合法的 $b$ 的值。\n\n**本题使用自定义校验器，如果存在多个合法的 $b$ 的值，输出其中一个即可。**", "hint": "**「样例解释 #1」**\n\n对于第一组测试数据，取 $n=1,m=1$ 时可以得到 $b=1$。\n\n对于第二组测试数据，取 $n=2,m=1$ 时可以得到 $b=3$。\n\n对于第三、第四组测试数据，可以证明不存在合法的 $b$ 的值。\n\n**「数据范围」**\n\n|测试点编号|$a,c \\leq$|特殊性质|\n|:-:|:-:|:-:|\n|$1 \\sim 3$|$10$|无|\n|$4 \\sim 6$|$10^3$|无|\n|$7 \\sim 8$|$10^{18}$|有|\n|$9 \\sim 10$|$10^{18}$|无|\n\n特殊性质：保证对于每组给定的 $a,c$ 一定存在合法的 $b$ 的值。\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq a,c \\leq 10^{18}$。\n\n2024 年 7 月 15 日：添加了 7 组 hack 数据置于 Subtask #1。", "locale": "zh-CN"}}}
{"pid": "P10783", "type": "P", "difficulty": 4, "samples": [["3 3\n1 1 1 1 1 1 1\n3 4 2\n5 4 6\n3 2 2", "2\n7\n3"], ["4 5\n3 4 10 7 1 6 10 6 16 5 3 16 6 2 9\n1 4 6\n4 2 1\n1 14 5\n6 13 3\n11 15 2\n", "104\n11\n74\n51\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "O2优化", "枚举", "树形 DP", "树论", "梦熊比赛"], "title": "【MX-J1-T3】『FLA - III』Anxiety", "background": "原题链接：<https://oier.team/problems/J1C>。\n\n---\n\nI came. I saw. I had anxiety. I left.", "description": "给定一棵拥有 $2^n-1$ 个节点的二叉树，节点 $i$ 的权值为 $w_i$，节点 $1$ 为根节点。对于所有非根节点 $i$ 都有一条双向边连接节点 $i$ 和节点 $\\left\\lfloor \\frac{i}{2} \\right\\rfloor$。请注意 $\\left\\lfloor X \\right\\rfloor$ 表示不大于 $X$ 的最大整数。\n\n定义节点 $u,v$ 的距离为从节点 $u$ 到节点 $v$ 最少需要经过的边数。给定 $m$ 组询问，第 $i$ 组询问给定三个正整数 $x_i,y_i,k_i$，你需要输出树上与 $x_i,y_i$ 两个节点的距离都不超过 $k_i$ 的节点的权值之和。", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入 $2^n-1$ 个正整数，第 $i$ 个正整数为 $w_i$。\n\n接下来 $m$ 行，第 $i$ 行输入三个正整数 $x_i,y_i,k_i$。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1au4l6hm.png)\n\n对于第一组询问，满足条件的节点有 $1,2$，权值和为 $2$。\n\n对于第二组询问，满足条件的节点有 $1,2,3,4,5,6,7$，权值和为 $7$。\n\n对于第三组询问，满足条件的节点有 $1,2,3$，权值和为 $3$。\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|$m \\leq$|$k_i \\leq$|$w_i \\leq$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$5$|$5$|$10$|\n|$2 \\sim 3$|$10$|$1000$|$1000$|$1000$|\n|$4 \\sim 5$|$18$|$2 \\times 10^5$|$5$|$10^9$|\n|$6 \\sim 7$|$18$|$2 \\times 10^5$|$10^9$|$1$|\n|$8 \\sim 10$|$18$|$2 \\times 10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 18$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq x_i,y_i \\leq 2^n-1$，$1 \\leq k_i \\leq 10^9$，$1 \\leq w_i \\leq 10^9$，$x_i \\neq y_i$。节点的编号是从 $1$ 到 $2^n-1$ 的整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T3】『FLA - III』Anxiety", "background": "原题链接：<https://oier.team/problems/J1C>。\n\n---\n\nI came. I saw. I had anxiety. I left.", "description": "给定一棵拥有 $2^n-1$ 个节点的二叉树，节点 $i$ 的权值为 $w_i$，节点 $1$ 为根节点。对于所有非根节点 $i$ 都有一条双向边连接节点 $i$ 和节点 $\\left\\lfloor \\frac{i}{2} \\right\\rfloor$。请注意 $\\left\\lfloor X \\right\\rfloor$ 表示不大于 $X$ 的最大整数。\n\n定义节点 $u,v$ 的距离为从节点 $u$ 到节点 $v$ 最少需要经过的边数。给定 $m$ 组询问，第 $i$ 组询问给定三个正整数 $x_i,y_i,k_i$，你需要输出树上与 $x_i,y_i$ 两个节点的距离都不超过 $k_i$ 的节点的权值之和。", "inputFormat": "第一行输入两个正整数 $n,m$。\n\n第二行输入 $2^n-1$ 个正整数，第 $i$ 个正整数为 $w_i$。\n\n接下来 $m$ 行，第 $i$ 行输入三个正整数 $x_i,y_i,k_i$。", "outputFormat": "输出 $m$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 组询问的答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/1au4l6hm.png)\n\n对于第一组询问，满足条件的节点有 $1,2$，权值和为 $2$。\n\n对于第二组询问，满足条件的节点有 $1,2,3,4,5,6,7$，权值和为 $7$。\n\n对于第三组询问，满足条件的节点有 $1,2,3$，权值和为 $3$。\n\n**「数据范围」**\n\n|测试点编号|$n \\leq$|$m \\leq$|$k_i \\leq$|$w_i \\leq$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$2$|$5$|$5$|$10$|\n|$2 \\sim 3$|$10$|$1000$|$1000$|$1000$|\n|$4 \\sim 5$|$18$|$2 \\times 10^5$|$5$|$10^9$|\n|$6 \\sim 7$|$18$|$2 \\times 10^5$|$10^9$|$1$|\n|$8 \\sim 10$|$18$|$2 \\times 10^5$|$10^9$|$10^9$|\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 18$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq x_i,y_i \\leq 2^n-1$，$1 \\leq k_i \\leq 10^9$，$1 \\leq w_i \\leq 10^9$，$x_i \\neq y_i$。节点的编号是从 $1$ 到 $2^n-1$ 的整数。", "locale": "zh-CN"}}}
{"pid": "P10784", "type": "P", "difficulty": 4, "samples": [["2 3 23\n7 18 7\n63 71 2\n77 86\n13 19\n63 71\n", "15\n"], ["4 5 7\n59 65 7\n39 42 1\n43 51 2\n19 33 2\n14 25\n71 81\n6 11\n59 69\n83 92\n", "7\n"], ["4 8 45\n80 94 22\n60 67 2\n35 44 45\n7 14 5\n82 86\n2 3\n58 63\n48 50\n73 80\n25 45\n11 19\n93 94\n", "13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "O2优化", "排序", "背包 DP", "前缀和", "双指针 two-pointer", "梦熊比赛"], "title": "【MX-J1-T4】『FLA - III』Wrestle", "background": "原题链接：<https://oier.team/problems/J1D>。\n\n---\n\n在 2022 年末，疫情将西北某不知名知名学校的大多数学生关在家中上网课，安同学还不知道，他和语文老师的对决已然悄无声息地开始了——他每天早读和语文课都直接睡过去了。\n\n安同学习惯起来穿好衣服、面对摄像头睡觉，摄像头只能拍到他的半个肩膀，就算被强制打开也不会暴露他在睡觉的事实，而且从来没有老师强制打开他的摄像头。而这个不凡的早晨，语文老师打开了他的摄像头，现在是早读时间，他在朦胧中被老师的关爱声叫醒，可惜为时已晚，老师已经愤怒。安同学决定假装网络卡顿，平复老师愤怒的心情。\n\n老师，愤怒了！在安同学醒来后的某些时间段，她要呼叫他的真名，其余时间等他应答。与此同时安同学要打造网卡的假象，他可以在某些时间段内检查设备或者呼叫老师，其余时间静止或随机在画面中闪现，他在这些时间段内的行为称为表演。你的任务是帮助安同学在不激怒老师的情况下最大化表演时间。\n\n因为安同学实在是太抽象了，原始题面受他影响变得也很抽象，这里只有形式化题面给你看。", "description": "给定三个正整数 $n,m,k$ 和两组线段。第一组线段有权值，共 $n$ 条，是**红色**的；第二组线段没有权值，共 $m$ 条，是**蓝色**的。这些线段位于同一个数轴。\n\n- 使用 $l,r,w$ 三个正整数表示一条从数轴上第 $l$ 个整点覆盖到第 $r$ 个整点，权值为 $w$ 的红色线段。**保证数轴上任意一个整点至多被红色线段覆盖一次。**\n\n- 使用 $L,R$ 两个正整数表示一条从数轴上第 $L$ 个整点覆盖到第 $R$ 个整点，没有权值的蓝色线段。**保证数轴上任意一个整点至多被蓝色线段覆盖一次。**\n\n如果一条红色线段从第 $l_0$ 个整点覆盖到第 $r_0$ 个整点，一条蓝色线段从第 $L_0$ 个整点覆盖到第 $R_0$ 个整点且 $\\max(l_0,L_0) \\leq \\min(r_0,R_0)$，就认为这两条线段有交集，交集包含从第 $\\max(l_0,L_0)$ 个整点到第 $\\min(r_0,R_0)$ 个整点的全部 $\\min(r_0,R_0)-\\max(l_0,L_0)+1$ 个整点。你可以选择一些蓝色线段，一种合法的选择方案必须符合以下条件：\n\n- 题目给定的每条红色线段至多与你选择的 $1$ 条蓝色线段有交集。\n\n- 所有和**你选择的蓝色线段**有交集的红色线段权值之和不超过 $k$。\n\n选择方案合法时，**你选择的蓝色线段**和**所有红色线段**的交集至多能包含多少个整点？", "inputFormat": "第一行输入三个正整数 $n,m,k$。\n\n接下来 $n$ 行，第 $i$ 行输入三个正整数 $l_i,r_i,w_i$ 表示一条红色线段。\n\n接下来 $m$ 行，第 $i$ 行输入两个正整数 $L_i,R_i$ 表示一条蓝色线段。\n\n**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "outputFormat": "输出一行一个整数表示答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/0mxbdlcn.png)\n\n如图，选择输入的第 $2$ 条蓝色线段和第 $3$ 条蓝色线段。\n\n第 $2$ 条蓝色线段与第 $1$ 条红色线段有交，交集包含从第 $13$ 个整点到第 $18$ 个整点的所有整点；第 $3$ 条蓝色线段与第 $2$ 条红色线段有交，交集包含从第 $63$ 个整点到第 $71$ 个整点的所有整点。\n\n第 $1$ 条红色线段仅与第 $2$ 条蓝色线段有交，第 $2$ 条红色线段仅与第 $3$ 条蓝色线段有交；和被选择的蓝色线段有交的红色线段权值和为 $9$，方案合法。故答案为 $15$。\n\n**「数据范围」**\n\n**本题采用捆绑测试。**\n\n|Subtask|$n \\leq$|$m \\leq$|$k \\leq$|$l_i,r_i,L_i,R_i \\leq$|分值|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|**#1**|$10$|$10$|$50$|$100$|$20$|\n|**#2**|$200$|$200$|$200$|$10^5$|$30$|\n|**#3**|$5000$|$5000$|$5000$|$10^9$|$30$|\n|**#4**|$2 \\times 10^5$|$5000$|$5000$|$10^9$|$20$|\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m,k \\leq 5000$，$1 \\leq l_i,r_i,L_i,R_i \\leq 10^9$，$1 \\leq w_i \\leq k$，$l_i < r_i$，$L_i < R_i$。**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-J1-T4】『FLA - III』Wrestle", "background": "原题链接：<https://oier.team/problems/J1D>。\n\n---\n\n在 2022 年末，疫情将西北某不知名知名学校的大多数学生关在家中上网课，安同学还不知道，他和语文老师的对决已然悄无声息地开始了——他每天早读和语文课都直接睡过去了。\n\n安同学习惯起来穿好衣服、面对摄像头睡觉，摄像头只能拍到他的半个肩膀，就算被强制打开也不会暴露他在睡觉的事实，而且从来没有老师强制打开他的摄像头。而这个不凡的早晨，语文老师打开了他的摄像头，现在是早读时间，他在朦胧中被老师的关爱声叫醒，可惜为时已晚，老师已经愤怒。安同学决定假装网络卡顿，平复老师愤怒的心情。\n\n老师，愤怒了！在安同学醒来后的某些时间段，她要呼叫他的真名，其余时间等他应答。与此同时安同学要打造网卡的假象，他可以在某些时间段内检查设备或者呼叫老师，其余时间静止或随机在画面中闪现，他在这些时间段内的行为称为表演。你的任务是帮助安同学在不激怒老师的情况下最大化表演时间。\n\n因为安同学实在是太抽象了，原始题面受他影响变得也很抽象，这里只有形式化题面给你看。", "description": "给定三个正整数 $n,m,k$ 和两组线段。第一组线段有权值，共 $n$ 条，是**红色**的；第二组线段没有权值，共 $m$ 条，是**蓝色**的。这些线段位于同一个数轴。\n\n- 使用 $l,r,w$ 三个正整数表示一条从数轴上第 $l$ 个整点覆盖到第 $r$ 个整点，权值为 $w$ 的红色线段。**保证数轴上任意一个整点至多被红色线段覆盖一次。**\n\n- 使用 $L,R$ 两个正整数表示一条从数轴上第 $L$ 个整点覆盖到第 $R$ 个整点，没有权值的蓝色线段。**保证数轴上任意一个整点至多被蓝色线段覆盖一次。**\n\n如果一条红色线段从第 $l_0$ 个整点覆盖到第 $r_0$ 个整点，一条蓝色线段从第 $L_0$ 个整点覆盖到第 $R_0$ 个整点且 $\\max(l_0,L_0) \\leq \\min(r_0,R_0)$，就认为这两条线段有交集，交集包含从第 $\\max(l_0,L_0)$ 个整点到第 $\\min(r_0,R_0)$ 个整点的全部 $\\min(r_0,R_0)-\\max(l_0,L_0)+1$ 个整点。你可以选择一些蓝色线段，一种合法的选择方案必须符合以下条件：\n\n- 题目给定的每条红色线段至多与你选择的 $1$ 条蓝色线段有交集。\n\n- 所有和**你选择的蓝色线段**有交集的红色线段权值之和不超过 $k$。\n\n选择方案合法时，**你选择的蓝色线段**和**所有红色线段**的交集至多能包含多少个整点？", "inputFormat": "第一行输入三个正整数 $n,m,k$。\n\n接下来 $n$ 行，第 $i$ 行输入三个正整数 $l_i,r_i,w_i$ 表示一条红色线段。\n\n接下来 $m$ 行，第 $i$ 行输入两个正整数 $L_i,R_i$ 表示一条蓝色线段。\n\n**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "outputFormat": "输出一行一个整数表示答案。", "hint": "**「样例解释 #1」**\n\n![example](https://cdn.luogu.com.cn/upload/image_hosting/0mxbdlcn.png)\n\n如图，选择输入的第 $2$ 条蓝色线段和第 $3$ 条蓝色线段。\n\n第 $2$ 条蓝色线段与第 $1$ 条红色线段有交，交集包含从第 $13$ 个整点到第 $18$ 个整点的所有整点；第 $3$ 条蓝色线段与第 $2$ 条红色线段有交，交集包含从第 $63$ 个整点到第 $71$ 个整点的所有整点。\n\n第 $1$ 条红色线段仅与第 $2$ 条蓝色线段有交，第 $2$ 条红色线段仅与第 $3$ 条蓝色线段有交；和被选择的蓝色线段有交的红色线段权值和为 $9$，方案合法。故答案为 $15$。\n\n**「数据范围」**\n\n**本题采用捆绑测试。**\n\n|Subtask|$n \\leq$|$m \\leq$|$k \\leq$|$l_i,r_i,L_i,R_i \\leq$|分值|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|**#1**|$10$|$10$|$50$|$100$|$20$|\n|**#2**|$200$|$200$|$200$|$10^5$|$30$|\n|**#3**|$5000$|$5000$|$5000$|$10^9$|$30$|\n|**#4**|$2 \\times 10^5$|$5000$|$5000$|$10^9$|$20$|\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq m,k \\leq 5000$，$1 \\leq l_i,r_i,L_i,R_i \\leq 10^9$，$1 \\leq w_i \\leq k$，$l_i < r_i$，$L_i < R_i$。**保证数轴上任意一个整点至多被红色线段覆盖一次。保证数轴上任意一个整点至多被蓝色线段覆盖一次。**", "locale": "zh-CN"}}}
{"pid": "P10785", "type": "P", "difficulty": 6, "samples": [["4 4 10\n1 2 3 1 2 3 1 2 4 1 2 3\n1 2 4 2 3 4 1 2 3 2 3 4\n1 1\n1 2\n1 3\n1 4\n2 2\n2 3\n2 4\n3 3\n3 4\n4 4", "Yes\nNo\nNo\nNo\nYes\nYes\nYes\nYes\nYes\nYes"], ["见 set2.in/ans\n这个样例满足测试点 1-3 的约束条件。", ""], ["见 set3.in/ans\n这个样例满足测试点 8 的约束条件。", ""], ["见 set4.in/ans\n这个样例满足测试点 15、16 的约束条件。", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOI", "O2优化", "哈希 hashing", "双指针 two-pointer"], "title": "[NOI2024] 集合", "background": "", "description": "小 Y 和小 S 在玩一个游戏。\n\n给定正整数 $m$，定义**基本集合**为大小为 $3$，元素在 $1\\sim m$ 内的集合。例如：给定 $m=4$，则集合 $\\{1,2,3\\}$ 与集合 $\\{2,3,4\\}$ 都是基本集合。\n\n定义**集合序列**为由基本集合构成的序列，例如，$A=[\\{1,2,3\\},\\{2,3,4\\}]$ 是一个集合序列，其中 $A[1]=\\{1,2,3\\}$，$A[2]=\\{2,3,4\\}$ 都是基本集合。\n\n对于一个 $1\\sim m$ 的排列 $p[1],p[2],\\dots,p[m]$ 与集合 $S\\subseteq \\{1,2,\\dots,m\\}$，定义 $f_p(S)$ 为将 $S$ 内每一个元素 $x$ 置换为 $p[x]$ 后所得到的集合，即 $f_p(S)=\\{p[x]|x\\in S\\}$。\n\n对于两个长度为 $k$ 的集合序列 $A,B$，定义 $A$ 和 $B$ **等价**当且仅当存在一个 $1\\sim m$ 的排列 $p$，使得 $A$ 置换排列 $p$ 后得到 $B$，即对于所有 $1\\leq i\\leq k$，$f_p(A[i])=B[i]$。\n\n给定两个长度为 $n$ 的集合序列 $A,B$，有 $q$ 次询问。每次小 S 会询问小 Y，在给定 $l,r$ 的情况下，判断集合序列 $[A[l],A[l+1],\\dots,A[r]]$ 与集合序列 $[B[l],B[l+1],\\dots,B[r]]$ 是否等价。\n\n时光荏苒，小 S 和小 Y 也会散去。而我们和一个人保持连接的方式就是记住，仅此而已。", "inputFormat": "输入的第一行包含三个正整数 $n,m,q$，分别表示集合序列的长度，元素范围和询问次数。\n\n输入的第二行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $A[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n输入的第三行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $B[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n接下来 $q$ 行，每行包含两个正整数 $l,r$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行包含一个字符串 $\\tt{Yes}$ 或 $\\tt{No}$，表示对应询问的两个序列是否等价。", "hint": "**【样例 1 解释】**\n\n以下用 $(l,r)$ 表示对 $l,r$ 的询问：\n- 对于询问 $(1,1)$，令排列 $p=[1,2,4,3]$，则 $f_p(A_1)=\\{p[1],p[2],p[3]\\}=\\{1,2,4\\}=B[1]$，因此该询问对应的两个序列等价。\n- 对于询问 $(1,2),(1,3),(1,4)$，由于 $A[1]=A[2]$ 但 $B[1]\\neq B[2]$，因此这些询问对应的两个序列都不等价。\n- 对于询问 $(2,2),(2,3),(2,4),(3,3),(3,4),(4,4)$，令排列 $p=[2,3,4,1]$，则 $f_p(A_2)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_2$，$f_p(A_3)=\\{p[1],p[2],p[4]\\}=\\{1,2,3\\}=B_3$，$f_p(A_4)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_4$，因此这些询问对应的两个序列都等价。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq n\\leq 2\\times 10^5$，$3\\leq m\\leq 6\\times 10^5$，$1\\leq q\\leq 10^6$，$1\\leq l\\leq r\\leq n$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ | $q\\leq$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $50$ | $4$ | $50$ |\n| $4\\sim 6$ | $50$ | $5$ | $50$ |\n| $7$ | $200$ | $4$ | $200$ |\n| $8$ | $200$ | $5$ | $200$ |\n| $9$ | $200$ | $4$ | $2\\times 10^5$ |\n| $10$ | $200$ | $5$ | $2\\times 10^5$ |\n| $11$ | $2\\times 10^5$ | $4$ | $2\\times 10^5$ |\n| $12$ | $2\\times 10^5$ | $5$ | $2\\times 10^5$ |\n| $13,14$ | $2\\,000$ | $6\\,000$ | $10^3$ |\n| $15,16$ | $2\\,000$ | $6\\,000$ | $10^6$ |\n| $17,18$ | $2\\times 10^4$ | $6\\times 10^4$ | $10^2$ |\n| $19,20$ | $2\\times 10^5$ | $6\\times 10^5$ | $10^6$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 集合", "background": "", "description": "小 Y 和小 S 在玩一个游戏。\n\n给定正整数 $m$，定义**基本集合**为大小为 $3$，元素在 $1\\sim m$ 内的集合。例如：给定 $m=4$，则集合 $\\{1,2,3\\}$ 与集合 $\\{2,3,4\\}$ 都是基本集合。\n\n定义**集合序列**为由基本集合构成的序列，例如，$A=[\\{1,2,3\\},\\{2,3,4\\}]$ 是一个集合序列，其中 $A[1]=\\{1,2,3\\}$，$A[2]=\\{2,3,4\\}$ 都是基本集合。\n\n对于一个 $1\\sim m$ 的排列 $p[1],p[2],\\dots,p[m]$ 与集合 $S\\subseteq \\{1,2,\\dots,m\\}$，定义 $f_p(S)$ 为将 $S$ 内每一个元素 $x$ 置换为 $p[x]$ 后所得到的集合，即 $f_p(S)=\\{p[x]|x\\in S\\}$。\n\n对于两个长度为 $k$ 的集合序列 $A,B$，定义 $A$ 和 $B$ **等价**当且仅当存在一个 $1\\sim m$ 的排列 $p$，使得 $A$ 置换排列 $p$ 后得到 $B$，即对于所有 $1\\leq i\\leq k$，$f_p(A[i])=B[i]$。\n\n给定两个长度为 $n$ 的集合序列 $A,B$，有 $q$ 次询问。每次小 S 会询问小 Y，在给定 $l,r$ 的情况下，判断集合序列 $[A[l],A[l+1],\\dots,A[r]]$ 与集合序列 $[B[l],B[l+1],\\dots,B[r]]$ 是否等价。\n\n时光荏苒，小 S 和小 Y 也会散去。而我们和一个人保持连接的方式就是记住，仅此而已。", "inputFormat": "输入的第一行包含三个正整数 $n,m,q$，分别表示集合序列的长度，元素范围和询问次数。\n\n输入的第二行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $A[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n输入的第三行包含 $3n$ 个正整数，第 $3i-2,3i-1,3i$（$1\\leq i\\leq n$）个正整数分别表示 $B[i]$ 的三个元素。保证这三个元素均在 $[1,m]$ 范围内且互不相同。\n\n接下来 $q$ 行，每行包含两个正整数 $l,r$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行包含一个字符串 $\\tt{Yes}$ 或 $\\tt{No}$，表示对应询问的两个序列是否等价。", "hint": "**【样例 1 解释】**\n\n以下用 $(l,r)$ 表示对 $l,r$ 的询问：\n- 对于询问 $(1,1)$，令排列 $p=[1,2,4,3]$，则 $f_p(A_1)=\\{p[1],p[2],p[3]\\}=\\{1,2,4\\}=B[1]$，因此该询问对应的两个序列等价。\n- 对于询问 $(1,2),(1,3),(1,4)$，由于 $A[1]=A[2]$ 但 $B[1]\\neq B[2]$，因此这些询问对应的两个序列都不等价。\n- 对于询问 $(2,2),(2,3),(2,4),(3,3),(3,4),(4,4)$，令排列 $p=[2,3,4,1]$，则 $f_p(A_2)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_2$，$f_p(A_3)=\\{p[1],p[2],p[4]\\}=\\{1,2,3\\}=B_3$，$f_p(A_4)=\\{p[1],p[2],p[3]\\}=\\{2,3,4\\}=B_4$，因此这些询问对应的两个序列都等价。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq n\\leq 2\\times 10^5$，$3\\leq m\\leq 6\\times 10^5$，$1\\leq q\\leq 10^6$，$1\\leq l\\leq r\\leq n$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ | $q\\leq$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $50$ | $4$ | $50$ |\n| $4\\sim 6$ | $50$ | $5$ | $50$ |\n| $7$ | $200$ | $4$ | $200$ |\n| $8$ | $200$ | $5$ | $200$ |\n| $9$ | $200$ | $4$ | $2\\times 10^5$ |\n| $10$ | $200$ | $5$ | $2\\times 10^5$ |\n| $11$ | $2\\times 10^5$ | $4$ | $2\\times 10^5$ |\n| $12$ | $2\\times 10^5$ | $5$ | $2\\times 10^5$ |\n| $13,14$ | $2\\,000$ | $6\\,000$ | $10^3$ |\n| $15,16$ | $2\\,000$ | $6\\,000$ | $10^6$ |\n| $17,18$ | $2\\times 10^4$ | $6\\times 10^4$ | $10^2$ |\n| $19,20$ | $2\\times 10^5$ | $6\\times 10^5$ | $10^6$ |\n", "locale": "zh-CN"}}}
{"pid": "P10786", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [6000, 6000], "memory": [524288, 524288]}, "tags": ["动态规划 DP", "2024", "NOI", "交互题", "Special Judge", "O2优化"], "title": "[NOI2024] 百万富翁", "background": "**本题仅支持 C++ 语言评测。由于平台限制，使用 C++14 (GCC 9) 提交代码会导致 CE。请使用其他版本的 C++ 提交（推荐 C++14 及以上）。**\n\n与 NOI 要求的提交格式不同，你的程序中**不应该**包含头文件 `richest.h`。同时，你的程序中应当在包含 `vector` 头文件的前提下，包含对以下函数的声明：\n\n```cpp\nstd::vector<int> ask(std::vector<int> a, std::vector<int> b);\n```\n\n除此之外，其余要求与 NOI 要求一致。", "description": "小 Y 的银行有 $N$ 个客户，编号为 $0$ 到 $N-1$。客户 $i$ 有 $W_i$ 元存款，且**客户之间的存款金额互不相同**。\n\n小 P 是小 Y 的深度合作伙伴，他希望知道哪个客户的存款最多。小 P 无法直接获取客户的存款金额，但他可以依次发送若干次**请求**，每次请求包含若干个**查询**，每个查询是一个二元组 $(i,j)$，表示小 P 想知道客户 $i$ 和客户 $j$ 的存款金额哪个更多。如果 $W_i>W_j$，小 Y 会回答 $i$，否则回答 $j$。\n\n小 P 的**请求数** $t$ 和所有请求的**查询**次数总和 $s$ 有上限，他希望你帮他写一个程序，来找到存款最多的客户。", "inputFormat": "选手不需要，也不应该实现 main 函数。\n\n选手应确保提交的程序包含头文件 `richest.h`，可在程序开头加入以下代码实现：\n\n```cpp\n#include \"richest.h\"\n```\n\n选手需要实现以下函数：\n```cpp\nint richest(int N,int T,int S);\n```\n- $N$ 表示客户的数量；\n- $T$ 表示对于当前函数调用，**请求**数 $t$ 不应超过此值；\n- $S$ 表示对于当前函数调用，所有请求的**查询**次数总和 $s$ 不应超过此值；\n- 该函数需要返回存款最多的客户的编号；\n- 对于每个测试点，该函数**会被交互库调用恰好 $10$ 次**；\n\n选手可以通过调用以下函数向交互库发送一次**请求**：\n```cpp\nstd::vector <int> ask(std::vector <int> a, std::vector <int> b);\n```\n- 在调用 `ask` 函数时需要保证传入参数 $a$ 和 $b$ 的长度相同，且其中的每个元素都必须是小于 $N$ 的非负整数，表示该**请求**中的所有**查询**。\n- 该函数会返回一个类型为 `std::vector <int>` 且长度与 $a$ 和 $b$ 相同的变量，设为 $c$，其中 $c[i]$ 表示在客户 $a[i]$ 和 $b[i]$ 中存款较多的客户的编号。\n\n题目保证在规定的**请求**和**查询**次数限制下，交互库运行的时间不超过 $3$ 秒，交互库使用的内存大小固定，且不超过 $256$ MiB。\n\n**试题目录下的 `grader.cpp` 是提供的交互库参考实现，最终测试所用的交互库与该参考实现有所不同，因此选手的解法不应该依赖交互库实现。**\n\n选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```\ng++ grader.cpp richest.cpp -o richest -O2 -std=c++14 -static\n```\n\n对于编译得到的可执行程序：\n- 可执行文件将从**标准输入**读入以下格式的数据：\n  - 输入的第一行包含四个非负整数 $N,T,S,R$，其中 $R$ 是交互库生成测试数据的随机种子。\n- 输入完成后，交互库将调用 $10$ 次函数 `richest`，用输入的参数生成的测试数据进行测试。`richest` 函数返回后，交互库会输出以下信息：\n  - 输出的前 $10$ 行中，每行首先包含三个整数 $r,t,s$，表示该次执行的结果。其中 $r$ 是 `richest` 函数的返回值，$t$ 和 $s$ 的含义如题目描述中所示，然后包含该次运行的正确性等消息。\n  - 输出的第 $11$ 行包含 $10$ 次运行的总信息。", "outputFormat": "假设可执行文件生成的测试数据为 $N=4$，$W=[101,103,102,100]$，$T=100$，$S=100$，下面是一个正确的交互过程：\n\n::cute-table{tuack}\n\n| 选手程序 | 交互库 | 说明 |\n| :----------: | :----------: | :----------: |\n|  | 调用 `richest(4,100,100)` | 开始测试 |\n| 调用 `ask([0,2],[1,3])` | 返回 $[1,2]$ | $W_0<W_1,W_2>W_3$ |\n| 调用 `ask([0,2,3],[1,1,1])` | 返回 $[1,1,1]$ | $W_0<W_1,W_2<W_1,W_3<W_1$ |\n| 运行结束并返回 $1$ | 向屏幕打印交互结果 | 交互结束，结果正确 |\n\n在这个例子中，$r=1,t=2,s=5$ 满足请求与查询次数的限制。", "hint": "**【下发文件说明】**\n\n在本试题目录下：\n- `grader.cpp` 是提供的交互库参考实现。\n- `richest.h` 是头文件，选手不用关心具体内容。\n- `template_richest.cpp` 是提供的示例代码，选手可在此代码的基础上实现。\n\n选手注意对所有下发文件做好备份，最终评测时只测试本试题目录下的 `richest.cpp`，对该程序以外文件的修改不会影响评测结果。\n\n**【数据范围】**\n\n对于所有测试数据保证：所有 $W_i$ 两两不同。\n\n本题共 $2$ 个测试点，每个测试点的分值和数据范围见下表。\n\n::cute-table{tuack}\n\n| 测试点编号 | 分值 | $N=$ | $T=$ | $S=$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $1\\,000$ | $1$ | $499\\,500$ |\n| $2$ | $85$ | $1\\,000\\,000$ | $20$ | $2\\,000\\,000$ |\n\n**【评分方式】**\n\n注意：\n- 选手不应通过非法方式获取交互库的内部信息，如试图直接读取数组 $W$ 的值，或直接与标准输入、输出流进行交互。此类行为将被视为作弊。\n- **最终的评测交互库与样例交互库的实现不同，且可能是适应性的：在不与 `ask` 此前返回的结果相矛盾的前提下，最终的评测交互库可能会动态调整 $W$ 的值。**\n\n**本题首先会受到和传统相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 0 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n在每次 `richest` 函数调用中，程序使用的请求次数 $t$ 和所有请求的查询次数总和 $s$ 需在对应限制下，否则将会获得 $0$ 分。\n\n在上述条件基础上：\n- 在测试点 $1$ 中，程序得到满分当且仅当 `ask` 函数调用合法且 `richest` 函数返回的答案正确；\n- 在测试点 $2$ 中，程序得到的分数将按照以下方式计算：\n  - 若 `ask` 函数调用不合法，则获得 $0$ 分；\n  - 若 `ask` 函数调用均合法，设 $\\max t$ 表示多次调用 `richest` 函数所得的 $t$ 的最大值，$\\max s$ 表示 $s$ 的最大值，则程序将获得 $\\lfloor 85 \\cdot f(\\max t) \\cdot g(\\max s)\\rfloor$ 分，其中 $f$ 与 $g$ 的计算方式如下表所示：\n\n::cute-table{tuack}\n  \n| $\\max t$ | $f(\\max t)$ |\n| :----------: | :----------: |\n| $\\max t\\leq 8$ | $1$ |\n| $9\\leq \\max t\\leq 20$ | $1-\\dfrac{1}{4}\\sqrt{\\max t-8}$ |\n\n::cute-table{tuack}\n\n| $\\max s$ | $g(\\max s)$ |\n| :----------: | :----------: |\n| $\\max s\\leq 1\\,099\\,944$ | $1$ |\n| $1\\,099\\,945\\leq \\max s\\leq 1\\,100\\,043$ | $1-\\dfrac{1}{6} \\log_{10} (\\max s-1\\,099\\,943)$ |\n| $1\\,100\\,044\\leq \\max s\\leq 2\\,000\\,000$ | $\\dfrac{2}{3}-\\dfrac{1}{1\\,500}\\sqrt{\\max s-1\\,100\\,043}$|\n\n以下是测试点 $2$ 中，不同的 $t$ 和 $s$ 对得分影响的示例。\n\n::cute-table{tuack}\n\n| $\\max t$ |            $\\max s$            | 测试点 $2$ 的得分 |\n| :------: | :----------------------------: | :---------------: |\n|  $=20$   |       $\\le 1\\,099\\,944$        |       $11$        |\n|  $=19$   |       $\\le 1\\,099\\,944$        |       $14$        |\n|  $=18$   |       $\\le 1\\,099\\,944$        |       $17$        |\n|  $=17$   |       $\\le 1\\,099\\,944$        |       $21$        |\n|  $=16$   |       $\\le 1\\,099\\,944$        |       $24$        |\n|  $=15$   |       $\\le 1\\,099\\,944$        |       $28$        |\n|  $=14$   |       $\\le 1\\,099\\,944$        |       $32$        |\n|  $=13$   |       $\\le 1\\,099\\,944$        |       $37$        |\n|  $=12$   |       $\\le 1\\,099\\,944$        |       $42$        |\n|  $=11$   |       $\\le 1\\,099\\,944$        |       $48$        |\n|  $=10$   |       $\\le 1\\,099\\,944$        |       $54$        |\n|   $=9$   |       $\\le 1\\,099\\,944$        |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,974,1\\,099\\,978]$ |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,969,1\\,099\\,973]$ |       $64$        |\n| $\\le 8$  | $\\in [1\\,099\\,965,1\\,099\\,968]$ |       $65$        |\n| $\\le 8$  | $\\in [1\\,099\\,962,1\\,099\\,964]$ |       $66$        |\n| $\\le 8$  | $\\in [1\\,099\\,959,1\\,099\\,961]$ |       $67$        |\n| $\\le 8$  | $\\in [1\\,099\\,957,1\\,099\\,958]$ |       $68$        |\n| $\\le 8$  | $\\in [1\\,099\\,955,1\\,099\\,956]$ |       $69$        |\n| $\\le 8$  | $\\in [1\\,099\\,953,1\\,099\\,954]$ |       $70$        |\n| $\\le 8$  |         $=1\\,099\\,952$          |       $71$        |\n| $\\le 8$  |         $=1\\,099\\,951$          |       $72$        |\n| $\\le 8$  | $\\in [1\\,099\\,949,1\\,099\\,950]$ |       $73$        |\n| $\\le 8$  |         $=1\\,099\\,948$          |       $75$        |\n| $\\le 8$  |         $=1\\,099\\,947$          |       $76$        |\n| $\\le 8$  |         $=1\\,099\\,946$          |       $78$        |\n| $\\le 8$  |         $=1\\,099\\,945$          |       $80$        |\n| $\\le 8$  |       $\\le 1\\,099\\,944$        |       $85$        |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 百万富翁", "background": "**本题仅支持 C++ 语言评测。由于平台限制，使用 C++14 (GCC 9) 提交代码会导致 CE。请使用其他版本的 C++ 提交（推荐 C++14 及以上）。**\n\n与 NOI 要求的提交格式不同，你的程序中**不应该**包含头文件 `richest.h`。同时，你的程序中应当在包含 `vector` 头文件的前提下，包含对以下函数的声明：\n\n```cpp\nstd::vector<int> ask(std::vector<int> a, std::vector<int> b);\n```\n\n除此之外，其余要求与 NOI 要求一致。", "description": "小 Y 的银行有 $N$ 个客户，编号为 $0$ 到 $N-1$。客户 $i$ 有 $W_i$ 元存款，且**客户之间的存款金额互不相同**。\n\n小 P 是小 Y 的深度合作伙伴，他希望知道哪个客户的存款最多。小 P 无法直接获取客户的存款金额，但他可以依次发送若干次**请求**，每次请求包含若干个**查询**，每个查询是一个二元组 $(i,j)$，表示小 P 想知道客户 $i$ 和客户 $j$ 的存款金额哪个更多。如果 $W_i>W_j$，小 Y 会回答 $i$，否则回答 $j$。\n\n小 P 的**请求数** $t$ 和所有请求的**查询**次数总和 $s$ 有上限，他希望你帮他写一个程序，来找到存款最多的客户。", "inputFormat": "选手不需要，也不应该实现 main 函数。\n\n选手应确保提交的程序包含头文件 `richest.h`，可在程序开头加入以下代码实现：\n\n```cpp\n#include \"richest.h\"\n```\n\n选手需要实现以下函数：\n```cpp\nint richest(int N,int T,int S);\n```\n- $N$ 表示客户的数量；\n- $T$ 表示对于当前函数调用，**请求**数 $t$ 不应超过此值；\n- $S$ 表示对于当前函数调用，所有请求的**查询**次数总和 $s$ 不应超过此值；\n- 该函数需要返回存款最多的客户的编号；\n- 对于每个测试点，该函数**会被交互库调用恰好 $10$ 次**；\n\n选手可以通过调用以下函数向交互库发送一次**请求**：\n```cpp\nstd::vector <int> ask(std::vector <int> a, std::vector <int> b);\n```\n- 在调用 `ask` 函数时需要保证传入参数 $a$ 和 $b$ 的长度相同，且其中的每个元素都必须是小于 $N$ 的非负整数，表示该**请求**中的所有**查询**。\n- 该函数会返回一个类型为 `std::vector <int>` 且长度与 $a$ 和 $b$ 相同的变量，设为 $c$，其中 $c[i]$ 表示在客户 $a[i]$ 和 $b[i]$ 中存款较多的客户的编号。\n\n题目保证在规定的**请求**和**查询**次数限制下，交互库运行的时间不超过 $3$ 秒，交互库使用的内存大小固定，且不超过 $256$ MiB。\n\n**试题目录下的 `grader.cpp` 是提供的交互库参考实现，最终测试所用的交互库与该参考实现有所不同，因此选手的解法不应该依赖交互库实现。**\n\n选手可以在本题目录下使用如下命令编译得到可执行程序：\n\n```\ng++ grader.cpp richest.cpp -o richest -O2 -std=c++14 -static\n```\n\n对于编译得到的可执行程序：\n- 可执行文件将从**标准输入**读入以下格式的数据：\n  - 输入的第一行包含四个非负整数 $N,T,S,R$，其中 $R$ 是交互库生成测试数据的随机种子。\n- 输入完成后，交互库将调用 $10$ 次函数 `richest`，用输入的参数生成的测试数据进行测试。`richest` 函数返回后，交互库会输出以下信息：\n  - 输出的前 $10$ 行中，每行首先包含三个整数 $r,t,s$，表示该次执行的结果。其中 $r$ 是 `richest` 函数的返回值，$t$ 和 $s$ 的含义如题目描述中所示，然后包含该次运行的正确性等消息。\n  - 输出的第 $11$ 行包含 $10$ 次运行的总信息。", "outputFormat": "假设可执行文件生成的测试数据为 $N=4$，$W=[101,103,102,100]$，$T=100$，$S=100$，下面是一个正确的交互过程：\n\n::cute-table{tuack}\n\n| 选手程序 | 交互库 | 说明 |\n| :----------: | :----------: | :----------: |\n|  | 调用 `richest(4,100,100)` | 开始测试 |\n| 调用 `ask([0,2],[1,3])` | 返回 $[1,2]$ | $W_0<W_1,W_2>W_3$ |\n| 调用 `ask([0,2,3],[1,1,1])` | 返回 $[1,1,1]$ | $W_0<W_1,W_2<W_1,W_3<W_1$ |\n| 运行结束并返回 $1$ | 向屏幕打印交互结果 | 交互结束，结果正确 |\n\n在这个例子中，$r=1,t=2,s=5$ 满足请求与查询次数的限制。", "hint": "**【下发文件说明】**\n\n在本试题目录下：\n- `grader.cpp` 是提供的交互库参考实现。\n- `richest.h` 是头文件，选手不用关心具体内容。\n- `template_richest.cpp` 是提供的示例代码，选手可在此代码的基础上实现。\n\n选手注意对所有下发文件做好备份，最终评测时只测试本试题目录下的 `richest.cpp`，对该程序以外文件的修改不会影响评测结果。\n\n**【数据范围】**\n\n对于所有测试数据保证：所有 $W_i$ 两两不同。\n\n本题共 $2$ 个测试点，每个测试点的分值和数据范围见下表。\n\n::cute-table{tuack}\n\n| 测试点编号 | 分值 | $N=$ | $T=$ | $S=$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $1\\,000$ | $1$ | $499\\,500$ |\n| $2$ | $85$ | $1\\,000\\,000$ | $20$ | $2\\,000\\,000$ |\n\n**【评分方式】**\n\n注意：\n- 选手不应通过非法方式获取交互库的内部信息，如试图直接读取数组 $W$ 的值，或直接与标准输入、输出流进行交互。此类行为将被视为作弊。\n- **最终的评测交互库与样例交互库的实现不同，且可能是适应性的：在不与 `ask` 此前返回的结果相矛盾的前提下，最终的评测交互库可能会动态调整 $W$ 的值。**\n\n**本题首先会受到和传统相同的限制**。例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 0 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n在每次 `richest` 函数调用中，程序使用的请求次数 $t$ 和所有请求的查询次数总和 $s$ 需在对应限制下，否则将会获得 $0$ 分。\n\n在上述条件基础上：\n- 在测试点 $1$ 中，程序得到满分当且仅当 `ask` 函数调用合法且 `richest` 函数返回的答案正确；\n- 在测试点 $2$ 中，程序得到的分数将按照以下方式计算：\n  - 若 `ask` 函数调用不合法，则获得 $0$ 分；\n  - 若 `ask` 函数调用均合法，设 $\\max t$ 表示多次调用 `richest` 函数所得的 $t$ 的最大值，$\\max s$ 表示 $s$ 的最大值，则程序将获得 $\\lfloor 85 \\cdot f(\\max t) \\cdot g(\\max s)\\rfloor$ 分，其中 $f$ 与 $g$ 的计算方式如下表所示：\n\n::cute-table{tuack}\n  \n| $\\max t$ | $f(\\max t)$ |\n| :----------: | :----------: |\n| $\\max t\\leq 8$ | $1$ |\n| $9\\leq \\max t\\leq 20$ | $1-\\dfrac{1}{4}\\sqrt{\\max t-8}$ |\n\n::cute-table{tuack}\n\n| $\\max s$ | $g(\\max s)$ |\n| :----------: | :----------: |\n| $\\max s\\leq 1\\,099\\,944$ | $1$ |\n| $1\\,099\\,945\\leq \\max s\\leq 1\\,100\\,043$ | $1-\\dfrac{1}{6} \\log_{10} (\\max s-1\\,099\\,943)$ |\n| $1\\,100\\,044\\leq \\max s\\leq 2\\,000\\,000$ | $\\dfrac{2}{3}-\\dfrac{1}{1\\,500}\\sqrt{\\max s-1\\,100\\,043}$|\n\n以下是测试点 $2$ 中，不同的 $t$ 和 $s$ 对得分影响的示例。\n\n::cute-table{tuack}\n\n| $\\max t$ |            $\\max s$            | 测试点 $2$ 的得分 |\n| :------: | :----------------------------: | :---------------: |\n|  $=20$   |       $\\le 1\\,099\\,944$        |       $11$        |\n|  $=19$   |       $\\le 1\\,099\\,944$        |       $14$        |\n|  $=18$   |       $\\le 1\\,099\\,944$        |       $17$        |\n|  $=17$   |       $\\le 1\\,099\\,944$        |       $21$        |\n|  $=16$   |       $\\le 1\\,099\\,944$        |       $24$        |\n|  $=15$   |       $\\le 1\\,099\\,944$        |       $28$        |\n|  $=14$   |       $\\le 1\\,099\\,944$        |       $32$        |\n|  $=13$   |       $\\le 1\\,099\\,944$        |       $37$        |\n|  $=12$   |       $\\le 1\\,099\\,944$        |       $42$        |\n|  $=11$   |       $\\le 1\\,099\\,944$        |       $48$        |\n|  $=10$   |       $\\le 1\\,099\\,944$        |       $54$        |\n|   $=9$   |       $\\le 1\\,099\\,944$        |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,974,1\\,099\\,978]$ |       $63$        |\n| $\\le 8$  | $\\in [1\\,099\\,969,1\\,099\\,973]$ |       $64$        |\n| $\\le 8$  | $\\in [1\\,099\\,965,1\\,099\\,968]$ |       $65$        |\n| $\\le 8$  | $\\in [1\\,099\\,962,1\\,099\\,964]$ |       $66$        |\n| $\\le 8$  | $\\in [1\\,099\\,959,1\\,099\\,961]$ |       $67$        |\n| $\\le 8$  | $\\in [1\\,099\\,957,1\\,099\\,958]$ |       $68$        |\n| $\\le 8$  | $\\in [1\\,099\\,955,1\\,099\\,956]$ |       $69$        |\n| $\\le 8$  | $\\in [1\\,099\\,953,1\\,099\\,954]$ |       $70$        |\n| $\\le 8$  |         $=1\\,099\\,952$          |       $71$        |\n| $\\le 8$  |         $=1\\,099\\,951$          |       $72$        |\n| $\\le 8$  | $\\in [1\\,099\\,949,1\\,099\\,950]$ |       $73$        |\n| $\\le 8$  |         $=1\\,099\\,948$          |       $75$        |\n| $\\le 8$  |         $=1\\,099\\,947$          |       $76$        |\n| $\\le 8$  |         $=1\\,099\\,946$          |       $78$        |\n| $\\le 8$  |         $=1\\,099\\,945$          |       $80$        |\n| $\\le 8$  |       $\\le 1\\,099\\,944$        |       $85$        |", "locale": "zh-CN"}}}
{"pid": "P10787", "type": "P", "difficulty": 7, "samples": [["0 4 2\n1 2\n2 3\n3 4\n3 2\n1 4", "001"], ["0 6 8\n5 1\n2 3\n1 2\n5 6\n4 3\n4 3\n5 1\n6 3\n5 4\n1 4\n5 2\n3 6\n6 2", "10101"], ["见 tree3.in/tree3.ans\n这个样例满足测试点 1-3 的约束条件。", ""], ["见 tree4.in/tree4.ans\n这个样例满足测试点 4-6 的约束条件。", ""], ["见 tree5.in/tree5.ans\n这个样例满足测试点 7,8 的约束条件。", ""], ["见 tree6.in/tree6.ans\n这个样例满足测试点 9,10 的约束条件。", ""]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["图论", "贪心", "倍增", "并查集", "2024", "NOI", "O2优化"], "title": "[NOI2024] 树的定向", "background": "由于评测机性能差异，原题时限为 3s，洛谷上时限为 6s。", "description": "给定一棵含有 $n$ 个顶点的树，顶点从 $1$ 到 $n$ 编号，树上第 $i(1\\leq i\\leq n-1)$ 条边连接顶点 $u_i$ 和 $v_i$。\n\n现在，我们想要给树的每条边一个定向。任何一个定向都可以用一个长度为 $n-1$ 的字符串 $S=s_1s_2\\ldots s_{n-1}$ 来描述。其中 $s_i=0$ 代表第 $i$ 条边定向为 $u_i \\to v_i$，否则 $s_i=1$ 代表第 $i$ 条边定向为 $v_i\\to u_i$。\n\n给定 $m$ 个顶点对 $(a_i,b_i)$，其中 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n一个**完美定向**定义为：在此定向下，对于任意 $1\\leq i\\leq m$，$a_i$ ****不能到达**** $b_i$。\n\n试求在所有完美定向中，所对应的字符串字典序最小的定向。**数据保证存在至少一个完美定向**。\n\n定义字符串 $S=s_1s_2\\ldots s_{n-1}$ 的字典序小于 $T=t_1t_2\\ldots t_{n-1}$ 若存在一个下标 $k$ 使得 $s_1=t_1, s_2=t_2, \\ldots, s_{k-1}=t_{k-1}$ 且 $s_k < t_k$。\n", "inputFormat": "输入的第一行包含三个非负整数 $c,n,m$，分别表示测试点编号，树的点数，顶点对的个数。其中 $c=0$ 表示该测试点为样例。\n\n接下来 $n-1$ 行，每行包含两个正整数 $u_i,v_i$ 表示树的一条边。保证 $1\\leq u_i,v_i\\leq n$ 且这 $n-1$ 条边构成了一棵树。\n\n接下来 $m$ 行，每行包含两个正整数 $a_i,b_i$。保证 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。", "outputFormat": "输出一行包含一个字符串 $S=s_1s_2\\ldots s_{n-1}$，表示字典序最小的完美定向所对应的 $01$ 字符串。", "hint": "**【样例 1 解释】**\n\n在该样例中，若 $S=000$，则该定向中 $1$ 能到达 $4$（存在路径 $1\\to 2\\to 3\\to 4$），因而不是完美定向。若 $S=001$，则该定向中 $3$ 不能到达 $2$，$1$ 不能到达 $4$，因面是完美定向。故答案为 $001$。\n\n**【样例 2 解释】**\n\n在该样例中，一组完美定向必定满足 $4$ 不能到达 $3$，$5$ 不能到达 $1$。故 $s_1=s_5=1$。若 $s_2=s_3=0$，则存在路径 $1\\to 2\\to 3\\to 4$，故 $1$ 可到达 $4$。故其不是完美定向。因此，所有完美定向必定满足 $S$ 的字典序不小于 $10101$。且容易验证 $S=10101$ 时，对应的定向是完美定向。\n\n**【数据范围】**\n\n对于所有测试数据保证 $2\\leq n\\leq 5\\times 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq u_i,v_i\\leq n$ 且所有的边构成了一棵树，$1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n数据保证存在至少一个完美定向。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $\\leq 15$ | $\\leq 50$ | 无 |\n| $4\\sim 6$ | $\\leq 300$ | $\\leq 300$ | 无 |\n| $7,8$ | $\\leq 400$ | $=(n-1)(n-2)$ | A |\n| $9,10$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | B |\n| $11\\sim 14$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | 无 |\n| $15,16$ | $\\leq 10^5$ | $\\leq 10^5$ | B |\n| $17,18$ | $\\leq 10^5$ | $\\leq 10^5$ | 无 |\n| $19\\sim 21$ | $\\leq 2\\times 10^5$ | $\\leq 2\\times 10^5$ | 无 |\n| $22\\sim 25$ | $\\leq 5\\times 10^5$ | $\\leq 5\\times 10^5$ | 无 |\n\n- 特殊性质 A：保证 $(a,b)$ 出现在 $(a_i,b_i)$ 中当且仅当 $a\\neq b$ 且 $a,b$ 在树上不相邻。\n- 特殊性质 B：保证树上编号为 $1$ 的顶点与其他每个顶点均相邻。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 树的定向", "background": "由于评测机性能差异，原题时限为 3s，洛谷上时限为 6s。", "description": "给定一棵含有 $n$ 个顶点的树，顶点从 $1$ 到 $n$ 编号，树上第 $i(1\\leq i\\leq n-1)$ 条边连接顶点 $u_i$ 和 $v_i$。\n\n现在，我们想要给树的每条边一个定向。任何一个定向都可以用一个长度为 $n-1$ 的字符串 $S=s_1s_2\\ldots s_{n-1}$ 来描述。其中 $s_i=0$ 代表第 $i$ 条边定向为 $u_i \\to v_i$，否则 $s_i=1$ 代表第 $i$ 条边定向为 $v_i\\to u_i$。\n\n给定 $m$ 个顶点对 $(a_i,b_i)$，其中 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n一个**完美定向**定义为：在此定向下，对于任意 $1\\leq i\\leq m$，$a_i$ ****不能到达**** $b_i$。\n\n试求在所有完美定向中，所对应的字符串字典序最小的定向。**数据保证存在至少一个完美定向**。\n\n定义字符串 $S=s_1s_2\\ldots s_{n-1}$ 的字典序小于 $T=t_1t_2\\ldots t_{n-1}$ 若存在一个下标 $k$ 使得 $s_1=t_1, s_2=t_2, \\ldots, s_{k-1}=t_{k-1}$ 且 $s_k < t_k$。\n", "inputFormat": "输入的第一行包含三个非负整数 $c,n,m$，分别表示测试点编号，树的点数，顶点对的个数。其中 $c=0$ 表示该测试点为样例。\n\n接下来 $n-1$ 行，每行包含两个正整数 $u_i,v_i$ 表示树的一条边。保证 $1\\leq u_i,v_i\\leq n$ 且这 $n-1$ 条边构成了一棵树。\n\n接下来 $m$ 行，每行包含两个正整数 $a_i,b_i$。保证 $1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。", "outputFormat": "输出一行包含一个字符串 $S=s_1s_2\\ldots s_{n-1}$，表示字典序最小的完美定向所对应的 $01$ 字符串。", "hint": "**【样例 1 解释】**\n\n在该样例中，若 $S=000$，则该定向中 $1$ 能到达 $4$（存在路径 $1\\to 2\\to 3\\to 4$），因而不是完美定向。若 $S=001$，则该定向中 $3$ 不能到达 $2$，$1$ 不能到达 $4$，因面是完美定向。故答案为 $001$。\n\n**【样例 2 解释】**\n\n在该样例中，一组完美定向必定满足 $4$ 不能到达 $3$，$5$ 不能到达 $1$。故 $s_1=s_5=1$。若 $s_2=s_3=0$，则存在路径 $1\\to 2\\to 3\\to 4$，故 $1$ 可到达 $4$。故其不是完美定向。因此，所有完美定向必定满足 $S$ 的字典序不小于 $10101$。且容易验证 $S=10101$ 时，对应的定向是完美定向。\n\n**【数据范围】**\n\n对于所有测试数据保证 $2\\leq n\\leq 5\\times 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq u_i,v_i\\leq n$ 且所有的边构成了一棵树，$1\\leq a_i,b_i \\leq n$ 且 $a_i\\neq b_i$。\n\n数据保证存在至少一个完美定向。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $m$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $\\leq 15$ | $\\leq 50$ | 无 |\n| $4\\sim 6$ | $\\leq 300$ | $\\leq 300$ | 无 |\n| $7,8$ | $\\leq 400$ | $=(n-1)(n-2)$ | A |\n| $9,10$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | B |\n| $11\\sim 14$ | $\\leq 2\\,000$ | $\\leq 2\\,000$ | 无 |\n| $15,16$ | $\\leq 10^5$ | $\\leq 10^5$ | B |\n| $17,18$ | $\\leq 10^5$ | $\\leq 10^5$ | 无 |\n| $19\\sim 21$ | $\\leq 2\\times 10^5$ | $\\leq 2\\times 10^5$ | 无 |\n| $22\\sim 25$ | $\\leq 5\\times 10^5$ | $\\leq 5\\times 10^5$ | 无 |\n\n- 特殊性质 A：保证 $(a,b)$ 出现在 $(a_i,b_i)$ 中当且仅当 $a\\neq b$ 且 $a,b$ 在树上不相邻。\n- 特殊性质 B：保证树上编号为 $1$ 的顶点与其他每个顶点均相邻。", "locale": "zh-CN"}}}
{"pid": "P10788", "type": "P", "difficulty": 7, "samples": [["10 10", "16"], ["见 fraction2.in/ans\n这个样例满足测试点 4-6 的约束条件", ""], ["见 fraction3.in/ans\n这个样例满足测试点 11-14 的约束条件", ""], ["见 fraction4.in/ans\n这个样例满足测试点 15-17 的约束条件", ""]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOI", "O2优化", "深度优先搜索 DFS"], "title": "[NOI2024] 分数", "background": "由于评测机性能差异，原题时限为 6s，洛谷时限为 9s。", "description": "小 Y 和小 C 在玩一个游戏。\n\n定义正分数为分子、分母都为正整数的既约分数。\n\n定义**完美正分数集合** $S$ 为满足以下五条性质的正分数集合：\n- $\\dfrac{1}{2}\\in S$；\n- 对于 $\\dfrac{1}{2}<x<2$，$x\\not \\in S$；\n- 对于所有 $x\\in S$，$\\dfrac{1}{x}\\in S$；\n- 对于所有 $x\\in S$，$x+2 \\in S$；\n- 对于所有 $x\\in S$ 且 $x>2$，$x-2 \\in S$；\n\n可以证明，上述五条性质确定了唯一的完美正分数集合 $S$。\n\n所有完美正分数集合 $S$ 中的正分数被称为**完美正分数**。记 $f(i,j)$ 表示 $\\dfrac{i}{j}$ 是否为完美正分数，即 $f(i,j)=1$ 当且仅当 $i$ 与 $j$ 互素且 $\\dfrac{i}{j} \\in S$，否则 $f(i,j)=0$。\n\n小 C 问小 Y：给定 $n,m$，求所有分子不超过 $n$，分母不超过 $m$ 的完美正分数的个数，即求 $\\sum_{i=1}^n \\sum_{j=1}^m f(i,j)$。\n\n时光走过，小 C 和小 Y 会再遇见。回首往事，大家都过上了各自想要的生活。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$，分别表示分子和分母的范围。", "outputFormat": "输出一行包含一个非负整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n可以证明，分子分母均不超过 $10$ 的完美正分数共有 $16$ 个，其中小于 $1$ 的 $8$ 个如下：\n- $\\dfrac{1}{2},\\dfrac{1}{4},\\dfrac{1}{6},\\dfrac{1}{8},\\dfrac{1}{10},\\dfrac{2}{5},\\dfrac{2}{9},\\dfrac{4}{9}$。\n\n大于 $1$ 的 $8$ 个完美正分数分别为上述 $8$ 个小于 $1$ 的完美正分数的倒数。\n- 可以按照如下方式验证 $\\dfrac{2}{9}$ 是否为完美正分数：因为 $\\dfrac{1}{2}\\in S$，$\\dfrac{1}{2}+2=\\dfrac{5}{2}\\in S$，$\\dfrac{5}{2}+2=\\dfrac{9}{2}\\in S$，$\\dfrac{1}{\\dfrac{9}{2}}=\\dfrac{2}{9}\\in S$；\n- 可以按照如下方式验证 $\\dfrac{3}{7}$ 是否为完美正分数：假设 $\\dfrac{3}{7}$ 是完美正分数，则 $\\dfrac{1}{\\dfrac{3}{7}}=\\dfrac{7}{3}\\in S$，$\\dfrac{7}{3}-2=\\dfrac{1}{3}\\in S$，$\\dfrac{1}{\\dfrac{1}{3}}=3\\in S$，$3-2=1\\in S$，与第二条性质矛盾，因此 $\\dfrac{3}{7}$ 不是完美正分数\n\n**【数据范围】**\n\n对于所有测试数据保证：$2\\leq n,m\\leq 3\\times 10^7$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10^2$ | $10^2$ |\n| $4\\sim 6$ | $10^3$ | $10^3$ |\n| $7\\sim 10$ | $8\\,000$ | $8\\,000$ |\n| $11\\sim 14$ | $10^5$ | $10^5$ |\n| $15\\sim 17$ | $10^6$ | $10^6$ |\n| $18$ | $8\\times 10^6$ | $8\\times 10^6$ |\n| $19$ | ^ | $3\\times 10^7$ |\n| $20$ | $3\\times 10^7$ | ^ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 分数", "background": "由于评测机性能差异，原题时限为 6s，洛谷时限为 9s。", "description": "小 Y 和小 C 在玩一个游戏。\n\n定义正分数为分子、分母都为正整数的既约分数。\n\n定义**完美正分数集合** $S$ 为满足以下五条性质的正分数集合：\n- $\\dfrac{1}{2}\\in S$；\n- 对于 $\\dfrac{1}{2}<x<2$，$x\\not \\in S$；\n- 对于所有 $x\\in S$，$\\dfrac{1}{x}\\in S$；\n- 对于所有 $x\\in S$，$x+2 \\in S$；\n- 对于所有 $x\\in S$ 且 $x>2$，$x-2 \\in S$；\n\n可以证明，上述五条性质确定了唯一的完美正分数集合 $S$。\n\n所有完美正分数集合 $S$ 中的正分数被称为**完美正分数**。记 $f(i,j)$ 表示 $\\dfrac{i}{j}$ 是否为完美正分数，即 $f(i,j)=1$ 当且仅当 $i$ 与 $j$ 互素且 $\\dfrac{i}{j} \\in S$，否则 $f(i,j)=0$。\n\n小 C 问小 Y：给定 $n,m$，求所有分子不超过 $n$，分母不超过 $m$ 的完美正分数的个数，即求 $\\sum_{i=1}^n \\sum_{j=1}^m f(i,j)$。\n\n时光走过，小 C 和小 Y 会再遇见。回首往事，大家都过上了各自想要的生活。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $m$，分别表示分子和分母的范围。", "outputFormat": "输出一行包含一个非负整数，表示对应的答案。", "hint": "**【样例 1 解释】**\n\n可以证明，分子分母均不超过 $10$ 的完美正分数共有 $16$ 个，其中小于 $1$ 的 $8$ 个如下：\n- $\\dfrac{1}{2},\\dfrac{1}{4},\\dfrac{1}{6},\\dfrac{1}{8},\\dfrac{1}{10},\\dfrac{2}{5},\\dfrac{2}{9},\\dfrac{4}{9}$。\n\n大于 $1$ 的 $8$ 个完美正分数分别为上述 $8$ 个小于 $1$ 的完美正分数的倒数。\n- 可以按照如下方式验证 $\\dfrac{2}{9}$ 是否为完美正分数：因为 $\\dfrac{1}{2}\\in S$，$\\dfrac{1}{2}+2=\\dfrac{5}{2}\\in S$，$\\dfrac{5}{2}+2=\\dfrac{9}{2}\\in S$，$\\dfrac{1}{\\dfrac{9}{2}}=\\dfrac{2}{9}\\in S$；\n- 可以按照如下方式验证 $\\dfrac{3}{7}$ 是否为完美正分数：假设 $\\dfrac{3}{7}$ 是完美正分数，则 $\\dfrac{1}{\\dfrac{3}{7}}=\\dfrac{7}{3}\\in S$，$\\dfrac{7}{3}-2=\\dfrac{1}{3}\\in S$，$\\dfrac{1}{\\dfrac{1}{3}}=3\\in S$，$3-2=1\\in S$，与第二条性质矛盾，因此 $\\dfrac{3}{7}$ 不是完美正分数\n\n**【数据范围】**\n\n对于所有测试数据保证：$2\\leq n,m\\leq 3\\times 10^7$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | $m\\leq$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10^2$ | $10^2$ |\n| $4\\sim 6$ | $10^3$ | $10^3$ |\n| $7\\sim 10$ | $8\\,000$ | $8\\,000$ |\n| $11\\sim 14$ | $10^5$ | $10^5$ |\n| $15\\sim 17$ | $10^6$ | $10^6$ |\n| $18$ | $8\\times 10^6$ | $8\\times 10^6$ |\n| $19$ | ^ | $3\\times 10^7$ |\n| $20$ | $3\\times 10^7$ | ^ |", "locale": "zh-CN"}}}
{"pid": "P10789", "type": "P", "difficulty": 7, "samples": [["0\n3\n5\n1 1 1 0\n2 1 1 0\n2 1 2 1\n4 2 3 0\n6\n1 1 1 0\n2 1 2 0\n3 1 3 2\n4 1 4 1\n5 1 5 3\n6\n1 1 1 0\n2 1 2 0\n2 1 2 0\n3 1 2 0\n3 2 3 2", "3 3 2 4\n5 9 3 21 6\n4 10 5 14 1"], ["见 mountain2.in/ans\n这个样例满足测试点 2,3 的约束条件", ""], ["见 mountain3.in/ans\n这个样例满足测试点 9 的约束条件", ""], ["见 mountain4.in/ans\n这个样例满足测试点 11,12 的约束条件", ""], ["见 mountain5.in/ans\n这个样例满足测试点 13 的约束条件", ""]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["倍增", "树状数组", "2024", "NOI", "O2优化", "树形 DP", "树链剖分", "线段树合并"], "title": "[NOI2024] 登山", "background": "", "description": "“为什么要攀登？因为山就在那里。”\n\n慕士塔格山上有 $n$ 处点位，点从 $1$ 到 $n$ 编号，$1$ 号点位为山顶。这 $n$ 个点位构成一棵有根树的结构，其中 $1$ 号点位为根，对于 $2\\leq i\\leq n$，$i$ 号点位的父亲结点为 $p_i$ 号点位。\n\n记 $d_i$ 为 $i$ 号点位到山顶所需经过的边数。形式化地说，$d_1=0$，对于 $2\\leq i\\leq n$，$d_i=d_{p_i}+1$。\n\n定义一条**登山路径**为从 $2\\sim n$ 号点位中的某一个开始，经过若干次**移动**后**到达山顶**的方案。\n\n定义一次从 $i(2\\leq i\\leq n)$ 号点位出发的**移动**为以下两种方式之一：\n1. 冲刺：在给定的冲刺范围 $[l_i,r_i]$ 内，选择一个正整数 $k$ 满足 $l_i\\leq k\\leq r_i$，向山顶移动 $k$ 步，即移动至 $i$ 号点位在有根树上的 $k$ 级父亲处。保证 $1\\leq l_i\\leq r_i\\leq d_i$。\n2. 休息：由于慕士塔格山地形陡峭，休息时会滑落到某一个儿子结点处。形式化地说，选择一个满足 $p_j=i$ 的 $j$，移动至到 $j$ 号点位。特别地，若 $i$ 号点位为有根树的叶子结点，则不存在满足 $p_j=i$ 的 $j$，因此此时不能选择休息。\n\n定义一条**登山路径**对应的**登山序列**为初始点位以及每次移动到的点位所构成的序列。形式化地说，一条从 $x$ 号点位开始的**登山路径**对应的****登山序列****是一个点序列 $a_1=x,a_2,\\dots,a_m=1$ 满足对于 $1\\leq i<m$，$a_{i+1}$ 是 $a_i$ 的 $k(l_{a_i}\\leq k\\leq r_{a_i})$ 级祖先或 $p_{a_{i+1}}=a_i$。\n\n为了保证每次冲刺都能更接近山顶，一条**合法的登山路径**需要满足：对于初始点位或某次移动到的点位 $i$，以后冲刺到的点位 $j$ 都必须满足 $d_j<d_i-h_i$，其中 $h_i$ 是一个给定的参数，保证 $0\\leq h_i<d_i$。形式化地说，一条**合法的登山路径**对应的**登山序列** $a_1,a_2,\\dots,a_m$ 需要满足：对于所有 $1\\leq i<j\\leq m$，若 $p_{a_j} \\neq a_{j-1}$，则 $d_{a_j}<d_{a_i}-h_{a_i}$。\n\n对于 $2\\sim n$ 号所有点位，求从这些点位开始的**合法的登山路径**条数。两条**登山路径**不同当且仅当其对应的**登山序列**不同。由于答案可能较大，你只需要求出答案对 $998\\,244\\,353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含一个整数 $n$，表示慕士塔格山的点位数量。\n\n接下来 $n-1$ 行，第 $i-1(2\\leq i\\leq n)$ 行包含四个整数 $p_i,l_i,r_i,h_i$。保证 $1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。", "outputFormat": "对于每组测试数据，输出一行 $n-1$ 个整数，分别表示从点位 $2\\sim n$ 到达山顶的方案数对 $998\\,244\\,353$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含三组测试数据。\n\n对于第一组测试数据，慕士塔格山的点位结构如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8e2srlpm.png)\n\n在该测试数据中，$d_1=0$，$d_2=1$，$d_3=d_4=2$，$d_5=3$。\n\n从 $4$ 开始的合法的登山路径共有以下 $2$ 条：\n1. 直接选择冲刺到 $4$ 的 $2$ 级父亲，也就是 $1$，到达山顶，对应的登山序列为 $[4,1]$。\n2. 先休息滑落到 $5$，然后从 $5$ 冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[4,5,1]$。\n\n从 $5$ 开始的合法的登山路径共有以下 $4$ 条：\n1. 直接选择冲刺到 $5$ 的 $3$ 级父亲，也就是 $1$，到达山顶。对应的登山序列为 $[5,1]$。\n2. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后再从 $2$ 冲刺到它的 $1$ 级父亲，到达山顶。对应的登山序列为 $[5,2,1]$。\n3. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；接着从 $4$ 冲刺到它的 $2$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,1]$。\n4. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；继续休息，滑落到 $5$；接着从 $5$ 再次冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,5,1]$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 4$，$2\\leq n\\leq 10^5$。\n\n对于任意的 $2\\leq i\\leq n$，保证：$1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 是否有 $l_i=r_i$ | 是否有 $h_i=0$ | 是否有 $p_i=i-1$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | 否 | 否 | 否 |\n| $2,3$ | $300$ | ^ | ^ | ^ |\n| $4,5$ | $5000$ | ^ | ^ | ^ |\n| $6$ | $10^5$ | 是 | 是 | 是 |\n| $7$ | ^ | ^ | ^ | 否 |\n| $8$ | ^ | ^ | 否 | 是 |\n| $9$ | ^ | ^ | ^ | 否 |\n| $10$ | ^ | 否 | 是 | 是 |\n| $11,12$ | ^ | ^ | ^ | 否 |\n| $13$ | ^ | ^ | 否 | 是 |\n| $14\\sim 20$ | ^ | ^ | ^ | 否 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 登山", "background": "", "description": "“为什么要攀登？因为山就在那里。”\n\n慕士塔格山上有 $n$ 处点位，点从 $1$ 到 $n$ 编号，$1$ 号点位为山顶。这 $n$ 个点位构成一棵有根树的结构，其中 $1$ 号点位为根，对于 $2\\leq i\\leq n$，$i$ 号点位的父亲结点为 $p_i$ 号点位。\n\n记 $d_i$ 为 $i$ 号点位到山顶所需经过的边数。形式化地说，$d_1=0$，对于 $2\\leq i\\leq n$，$d_i=d_{p_i}+1$。\n\n定义一条**登山路径**为从 $2\\sim n$ 号点位中的某一个开始，经过若干次**移动**后**到达山顶**的方案。\n\n定义一次从 $i(2\\leq i\\leq n)$ 号点位出发的**移动**为以下两种方式之一：\n1. 冲刺：在给定的冲刺范围 $[l_i,r_i]$ 内，选择一个正整数 $k$ 满足 $l_i\\leq k\\leq r_i$，向山顶移动 $k$ 步，即移动至 $i$ 号点位在有根树上的 $k$ 级父亲处。保证 $1\\leq l_i\\leq r_i\\leq d_i$。\n2. 休息：由于慕士塔格山地形陡峭，休息时会滑落到某一个儿子结点处。形式化地说，选择一个满足 $p_j=i$ 的 $j$，移动至到 $j$ 号点位。特别地，若 $i$ 号点位为有根树的叶子结点，则不存在满足 $p_j=i$ 的 $j$，因此此时不能选择休息。\n\n定义一条**登山路径**对应的**登山序列**为初始点位以及每次移动到的点位所构成的序列。形式化地说，一条从 $x$ 号点位开始的**登山路径**对应的****登山序列****是一个点序列 $a_1=x,a_2,\\dots,a_m=1$ 满足对于 $1\\leq i<m$，$a_{i+1}$ 是 $a_i$ 的 $k(l_{a_i}\\leq k\\leq r_{a_i})$ 级祖先或 $p_{a_{i+1}}=a_i$。\n\n为了保证每次冲刺都能更接近山顶，一条**合法的登山路径**需要满足：对于初始点位或某次移动到的点位 $i$，以后冲刺到的点位 $j$ 都必须满足 $d_j<d_i-h_i$，其中 $h_i$ 是一个给定的参数，保证 $0\\leq h_i<d_i$。形式化地说，一条**合法的登山路径**对应的**登山序列** $a_1,a_2,\\dots,a_m$ 需要满足：对于所有 $1\\leq i<j\\leq m$，若 $p_{a_j} \\neq a_{j-1}$，则 $d_{a_j}<d_{a_i}-h_{a_i}$。\n\n对于 $2\\sim n$ 号所有点位，求从这些点位开始的**合法的登山路径**条数。两条**登山路径**不同当且仅当其对应的**登山序列**不同。由于答案可能较大，你只需要求出答案对 $998\\,244\\,353$ 取模后的结果。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含一个整数 $n$，表示慕士塔格山的点位数量。\n\n接下来 $n-1$ 行，第 $i-1(2\\leq i\\leq n)$ 行包含四个整数 $p_i,l_i,r_i,h_i$。保证 $1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。", "outputFormat": "对于每组测试数据，输出一行 $n-1$ 个整数，分别表示从点位 $2\\sim n$ 到达山顶的方案数对 $998\\,244\\,353$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含三组测试数据。\n\n对于第一组测试数据，慕士塔格山的点位结构如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8e2srlpm.png)\n\n在该测试数据中，$d_1=0$，$d_2=1$，$d_3=d_4=2$，$d_5=3$。\n\n从 $4$ 开始的合法的登山路径共有以下 $2$ 条：\n1. 直接选择冲刺到 $4$ 的 $2$ 级父亲，也就是 $1$，到达山顶，对应的登山序列为 $[4,1]$。\n2. 先休息滑落到 $5$，然后从 $5$ 冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[4,5,1]$。\n\n从 $5$ 开始的合法的登山路径共有以下 $4$ 条：\n1. 直接选择冲刺到 $5$ 的 $3$ 级父亲，也就是 $1$，到达山顶。对应的登山序列为 $[5,1]$。\n2. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后再从 $2$ 冲刺到它的 $1$ 级父亲，到达山顶。对应的登山序列为 $[5,2,1]$。\n3. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；接着从 $4$ 冲刺到它的 $2$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,1]$。\n4. 先冲刺到 $5$ 的 $2$ 级父亲，也就是 $2$；然后在 $2$ 处休息，滑落到 $4$；继续休息，滑落到 $5$；接着从 $5$ 再次冲刺到它的 $3$ 级父亲，到达山顶。对应的登山序列为 $[5,2,4,5,1]$。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 4$，$2\\leq n\\leq 10^5$。\n\n对于任意的 $2\\leq i\\leq n$，保证：$1\\leq p_i<i$，$1\\leq l_i\\leq r_i\\leq d_i$，$0\\leq h_i<d_i$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n\\leq$ | 是否有 $l_i=r_i$ | 是否有 $h_i=0$ | 是否有 $p_i=i-1$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $6$ | 否 | 否 | 否 |\n| $2,3$ | $300$ | ^ | ^ | ^ |\n| $4,5$ | $5000$ | ^ | ^ | ^ |\n| $6$ | $10^5$ | 是 | 是 | 是 |\n| $7$ | ^ | ^ | ^ | 否 |\n| $8$ | ^ | ^ | 否 | 是 |\n| $9$ | ^ | ^ | ^ | 否 |\n| $10$ | ^ | 否 | 是 | 是 |\n| $11,12$ | ^ | ^ | ^ | 否 |\n| $13$ | ^ | ^ | 否 | 是 |\n| $14\\sim 20$ | ^ | ^ | ^ | 否 |\n", "locale": "zh-CN"}}}
{"pid": "P10790", "type": "P", "difficulty": 7, "samples": [["0\n2\n4 7\n2 1\n4 1\n1 4\n2 3\n3 4\n2 4\n4 3\n4 5\n1 2\n2 3\n2 4\n3 1\n4 3", "3233\n2211"], ["见 graphee2.in/ans\n这个样例满足测试点 2 的约束条件", ""], ["见 graphee3.in/ans\n这个样例满足测试点 3,4 的约束条件", ""], ["见 graphee4.in/ans\n这个样例满足测试点 5,6 的约束条件", ""], ["见 graphee5.in/ans\n这个样例满足测试点 8,9 的约束条件", ""], ["见 graphee6.in/ans\n这个样例满足测试点 14,15 的约束条件", ""]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "NOI", "O2优化", "树形 DP", "Tarjan", "启发式合并"], "title": "[NOI2024] 树形图", "background": "由于评测机性能差异，本题时限翻倍。", "description": "给定一个 $n$ 个点 $m$ 条边的**简单有向图** $G$，顶点从 $1$ 到 $n$ 编号。其中简单有向图的定义为**不存在重边与自环**的有向图。\n\n定义顶点 $r$ 是有向图 $G$ 的根当且仅当对于 $1\\leq k\\leq n$，顶点 $r$ 到顶点 $k$ 存在恰好一条**有向简单路径**，其中简单路径的定义为**不经过重复点的路径**。\n\n定义每个点的种类如下：\n- 若顶点 $r$ 是图 $G$ 的根，则称顶点 $r$ 为图 $G$ 的**一类点**。\n- 若顶点 $r$ 不是图 $G$ 的一类点，且存在一种删边的方案，使得图 $G$ 在删去若干条边后得到的图 $G'$ 满足：所有图 $G$ 中的一类点都是 $G'$ 的根，且顶点 $r$ 也是图 $G'$ 的根，则称顶点 $r$ 为图 $G$ 的**二类点**。\n- 若顶点 $r$ 不满足上述条件，则称顶点 $r$ 为图 $G$ 的**三类点**。\n\n根据上述定义，图 $G$ 的每个点都恰好属于一类点，二类点，三类点之一。你需要判断点 $1\\sim n$ 分别属于这三个种类中的哪一种。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个非负整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个正整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含两个正整数 $n,m$，分别表示有向图的点数和边数。\n\n接下来 $m$ 行，每行包含两个正整数 $u,v$，表示一条从 $u$ 到 $v$ 的有向边。保证 $1\\leq u,v\\leq n$，且给定的有向图 $G$ 不存在重边与自环。", "outputFormat": "对于每组数据，输出一行包含一个长度恰好为 $n$ 的字符串 $s$ 表示每个点的种类。其中 $s_i=1$ 表示点 $i$ 为**一类点**，$s_i=2$ 表示点 $i$ 为**二类点**，$s_i=3$ 表示点 $i$ 为**三类点**。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含两组测试数据。\n\n对于第一组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yorwc4dr.png)\n\n由于 $1,3,4$ 均不存在到达 $2$ 的路径，因此 $1,3,4$ 均为三类点。由于 $2$ 到 $1$ 的有向简单路径共有三条：$2\\to 1$，$2\\to 4\\to 1$，$2\\to 3\\to 4\\to 1$，因此 $2$ 不是一类点。删去边 $1\\to 4$，$4\\to 1$，$3\\to 4$，$4\\to 3$ 后，$2$ 到 $1,3,4$ 的有向简单路径均唯一，因此 $2$ 是图 $G'$ 的根，即 $2$ 是二类点。\n\n对于第二组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8r9veu2.png)\n\n容易发现 $3,4$ 均为一类点，删去边 $2\\to 3$ 后，每个点到其他所有点的有向简单路径均唯一，因此 $1,2$ 均为二类点。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 10$，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 2\\times 10^5$，且图 $G$ 不存在重边与自环。\n\n::cute-table{tuack}\n\n| 测试点编号 | $t\\leq$ | $n\\leq$ | $m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $3$ | $10$ | $20$ | 无 |\n| $2$ | $10$ | $10^3$ | $2000$ | A |\n| $3,4$ | ^ | ^ | ^ | B |\n| $5,6$ | ^ | ^ | ^ | 无 |\n| $7$ | ^ | $10^5$ | $2\\times 10^5$ | A |\n| $8,9$ | ^ | ^ | ^ | BC |\n| $10\\sim 13$ | ^ | ^ | ^ | B |\n| $14,15$ | ^ | ^| ^ | C |\n| $16\\sim 20$ | ^ | ^ | ^ | 无 |\n\n- 特殊性质 A：保证不存在一类点。\n- 特殊性质 B：保证不存在二类点。\n- 特殊性质 C：保证编号为 $1$ 的点为图 $G$ 的一类点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2024] 树形图", "background": "由于评测机性能差异，本题时限翻倍。", "description": "给定一个 $n$ 个点 $m$ 条边的**简单有向图** $G$，顶点从 $1$ 到 $n$ 编号。其中简单有向图的定义为**不存在重边与自环**的有向图。\n\n定义顶点 $r$ 是有向图 $G$ 的根当且仅当对于 $1\\leq k\\leq n$，顶点 $r$ 到顶点 $k$ 存在恰好一条**有向简单路径**，其中简单路径的定义为**不经过重复点的路径**。\n\n定义每个点的种类如下：\n- 若顶点 $r$ 是图 $G$ 的根，则称顶点 $r$ 为图 $G$ 的**一类点**。\n- 若顶点 $r$ 不是图 $G$ 的一类点，且存在一种删边的方案，使得图 $G$ 在删去若干条边后得到的图 $G'$ 满足：所有图 $G$ 中的一类点都是 $G'$ 的根，且顶点 $r$ 也是图 $G'$ 的根，则称顶点 $r$ 为图 $G$ 的**二类点**。\n- 若顶点 $r$ 不满足上述条件，则称顶点 $r$ 为图 $G$ 的**三类点**。\n\n根据上述定义，图 $G$ 的每个点都恰好属于一类点，二类点，三类点之一。你需要判断点 $1\\sim n$ 分别属于这三个种类中的哪一种。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个非负整数 $c$，表示测试点编号。$c=0$ 表示该测试点为样例。\n\n输入的第二行包含一个正整数 $t$，表示测试数据组数。\n\n接下来依次输入每组测试数据，对于每组测试数据：\n\n输入的第一行包含两个正整数 $n,m$，分别表示有向图的点数和边数。\n\n接下来 $m$ 行，每行包含两个正整数 $u,v$，表示一条从 $u$ 到 $v$ 的有向边。保证 $1\\leq u,v\\leq n$，且给定的有向图 $G$ 不存在重边与自环。", "outputFormat": "对于每组数据，输出一行包含一个长度恰好为 $n$ 的字符串 $s$ 表示每个点的种类。其中 $s_i=1$ 表示点 $i$ 为**一类点**，$s_i=2$ 表示点 $i$ 为**二类点**，$s_i=3$ 表示点 $i$ 为**三类点**。", "hint": "**【样例 1 解释】**\n\n样例 $1$ 共包含两组测试数据。\n\n对于第一组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yorwc4dr.png)\n\n由于 $1,3,4$ 均不存在到达 $2$ 的路径，因此 $1,3,4$ 均为三类点。由于 $2$ 到 $1$ 的有向简单路径共有三条：$2\\to 1$，$2\\to 4\\to 1$，$2\\to 3\\to 4\\to 1$，因此 $2$ 不是一类点。删去边 $1\\to 4$，$4\\to 1$，$3\\to 4$，$4\\to 3$ 后，$2$ 到 $1,3,4$ 的有向简单路径均唯一，因此 $2$ 是图 $G'$ 的根，即 $2$ 是二类点。\n\n对于第二组测试数据，输入的图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t8r9veu2.png)\n\n容易发现 $3,4$ 均为一类点，删去边 $2\\to 3$ 后，每个点到其他所有点的有向简单路径均唯一，因此 $1,2$ 均为二类点。\n\n**【数据范围】**\n\n对于所有测试数据保证：$1\\leq t\\leq 10$，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 2\\times 10^5$，且图 $G$ 不存在重边与自环。\n\n::cute-table{tuack}\n\n| 测试点编号 | $t\\leq$ | $n\\leq$ | $m\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $3$ | $10$ | $20$ | 无 |\n| $2$ | $10$ | $10^3$ | $2000$ | A |\n| $3,4$ | ^ | ^ | ^ | B |\n| $5,6$ | ^ | ^ | ^ | 无 |\n| $7$ | ^ | $10^5$ | $2\\times 10^5$ | A |\n| $8,9$ | ^ | ^ | ^ | BC |\n| $10\\sim 13$ | ^ | ^ | ^ | B |\n| $14,15$ | ^ | ^| ^ | C |\n| $16\\sim 20$ | ^ | ^ | ^ | 无 |\n\n- 特殊性质 A：保证不存在一类点。\n- 特殊性质 B：保证不存在二类点。\n- 特殊性质 C：保证编号为 $1$ 的点为图 $G$ 的一类点。", "locale": "zh-CN"}}}
{"pid": "P10791", "type": "P", "difficulty": 3, "samples": [["1\n3 2\n1 1 0", "1 1 0 1"], ["1\n2 20070721\n20070720 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "进制", "前缀和"], "title": "『SpOI - R1』强大到让你们所有人注视", "background": "", "description": "**本题包含多组测试。**\n\n给定一个 $n$ 位的 $k$ 进制大数。\n\n令 $S(l,r)$ 表示截取这个 $k$ 进制大数从高到低第 $l$ 位至第 $r$ 位构成的新 $k$ 进制数。\n\n你需要求出 $\\sum\\limits_{1\\leq l\\leq r\\leq n} S(l,r)$，注意这里的求和也建立在 $k$ 进制下。\n\n由于答案可能很大，设 $(20070720)_{10}$ 在 $k$ 进制下是 $x$，你只需要输出答案对 $x$ 取模的结果。\n\n**再次提醒：以上所有求和、运算和取值都建立在 $k$ 进制下。**", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n每组数据第一行两个正整数 $n,k$，表示这个大数。\n\n每组数据第二行一个数列 $a$，从高位至低位依次表示这个大 $k$ 进制数的每一位上的数。保证 $\\forall i\\in[1,n],0\\leq a_i<k$。", "outputFormat": "每组数据一行，表示答案对 $x$ 取模的结果。由于这也是一个 $k$ 进制数，所以用空格隔开依次输出每一位。\n\n**注意你的输出中不应含有前导零。**", "hint": "#### 样例 #1 解释\n\n所有的 $S(l,r)$：$(1)_2,(1)_2,(0)_2,(11)_2,(10)_2,(110)_2$，把它们在 $2$ 进制下相加得到 $(1101)_2$，再在 $2$ 进制下对 $(20070720)_{10}=(1001100100100000101000000)_2$ 取模即可得到答案 $(1101)_2$。\n\n#### 样例 #2 解释\n\n对于这个数，$S(1,1)$ 显然被 $(\\overline{20070720})_{20070721}$ 整除，$S(2,2),S(1,2)$ 被 $(\\overline{20070720})_{20070721}$ 除后都余 $1$。所以取模后的答案是 $(2)_{20070721}$。\n\n### 数据范围\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10$，$1\\leq n\\leq 5\\times 10^5$，$0\\leq a_i<k\\leq 10^9$，$2\\leq k\\leq 10^9$。$k$ 进制大数可能含有前导零。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| 1 | $10$ | $100$ | 无 | $25$ | 无 |\n| 2 | $1$ | $5\\times 10^3$ | $k>20070720$ | $20$ | 无 |\n| 3 | $1$ | $8\\times 10^3$ | 无 | $25$ | 1,2 |\n| 4 | $5$ | $5\\times 10^5$ | 无 | $30$ | 1,2,3 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』强大到让你们所有人注视", "background": "", "description": "**本题包含多组测试。**\n\n给定一个 $n$ 位的 $k$ 进制大数。\n\n令 $S(l,r)$ 表示截取这个 $k$ 进制大数从高到低第 $l$ 位至第 $r$ 位构成的新 $k$ 进制数。\n\n你需要求出 $\\sum\\limits_{1\\leq l\\leq r\\leq n} S(l,r)$，注意这里的求和也建立在 $k$ 进制下。\n\n由于答案可能很大，设 $(20070720)_{10}$ 在 $k$ 进制下是 $x$，你只需要输出答案对 $x$ 取模的结果。\n\n**再次提醒：以上所有求和、运算和取值都建立在 $k$ 进制下。**", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n每组数据第一行两个正整数 $n,k$，表示这个大数。\n\n每组数据第二行一个数列 $a$，从高位至低位依次表示这个大 $k$ 进制数的每一位上的数。保证 $\\forall i\\in[1,n],0\\leq a_i<k$。", "outputFormat": "每组数据一行，表示答案对 $x$ 取模的结果。由于这也是一个 $k$ 进制数，所以用空格隔开依次输出每一位。\n\n**注意你的输出中不应含有前导零。**", "hint": "#### 样例 #1 解释\n\n所有的 $S(l,r)$：$(1)_2,(1)_2,(0)_2,(11)_2,(10)_2,(110)_2$，把它们在 $2$ 进制下相加得到 $(1101)_2$，再在 $2$ 进制下对 $(20070720)_{10}=(1001100100100000101000000)_2$ 取模即可得到答案 $(1101)_2$。\n\n#### 样例 #2 解释\n\n对于这个数，$S(1,1)$ 显然被 $(\\overline{20070720})_{20070721}$ 整除，$S(2,2),S(1,2)$ 被 $(\\overline{20070720})_{20070721}$ 除后都余 $1$。所以取模后的答案是 $(2)_{20070721}$。\n\n### 数据范围\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10$，$1\\leq n\\leq 5\\times 10^5$，$0\\leq a_i<k\\leq 10^9$，$2\\leq k\\leq 10^9$。$k$ 进制大数可能含有前导零。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| 1 | $10$ | $100$ | 无 | $25$ | 无 |\n| 2 | $1$ | $5\\times 10^3$ | $k>20070720$ | $20$ | 无 |\n| 3 | $1$ | $8\\times 10^3$ | 无 | $25$ | 1,2 |\n| 4 | $5$ | $5\\times 10^5$ | 无 | $30$ | 1,2,3 |", "locale": "zh-CN"}}}
{"pid": "P10792", "type": "P", "difficulty": 4, "samples": [["1\n2\n4 1\n2 1", "33"], ["1\n3\n1 2\n3 1\n7 2", "1204285426"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "组合数学", "期望"], "title": "『SpOI - R1』笑起来最帅的小孩", "background": "", "description": "**本题包含多组数据。**\n\n有一个数字序列 $a$，长度为 $n$。序列中每一项均为 $0$ 到 $9$ 的数字。\n\n另有一个空数字序列 $b$，$b$ 中会出现一个**光标**（你可以理解为能够出现在数字之间，或整个数字序列之前，或整个数字序列之后的细线），此时**光标**前后均没有数字。\n\n现在向 $b$ 中依次输入数字序列 $a$。每输入一个数字，数字立即出现在**光标**之后。\n\n接下来**光标**立即随机地移动到任意一个数字之前或所有数字之后。随机是均匀的。换句话说，**光标**移动到所有可移动到的位置的概率是均等的。\n\n现在告诉你数字序列 $a$。你需要输出的是，最终得到的 $b$ 直接转为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模。\n\n由于 $a$ 可能很长，所以本题采用压缩输入。\n\n具体来说，最开始 $a$ 是空的数字序列，输入会给你一个 $k$ 长的二元组数组，其中第 $i$ 项为 $(x_i,l_i)$，表示数字 $x_i$ 连续出现 $l_i$ 次接在之前的 $a$ 之后。你可以用此方法解压缩真正的 $a$，再解决问题。\n\n----------\n\n**在本题，你可以对期望的理解**：对于一个变量可能的结果 $X$，若其权值为 $v_X$，得到该结果的概率为 $p_X$，则对于结果集 $S$，变量的期望 $E=\\sum\\limits_{X\\in S}p_Xv_X$。\n\n**如果你不知道如何对有理数取模**：请查看[此题](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，表示 $a$ 压缩后得到的二元组数组包含多少项。\n\n接下来共 $k$ 行，每行两个整数 $x_i,l_i$，表示在上一项所得 $a$ 序列的基础上，在末尾增加 $l_i$ 个数字 $x_i$ 得到新的 $a$ 序列。你可以用这种方式解压缩真正的 $a$ 序列。", "outputFormat": "对于每组数据，输出一行一个整数，表示在光标每次都随机移动的情况下，可能得到的 $b$ 转化为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模的值。", "hint": "### 数据范围\n\n**本题开启子任务捆绑和子任务依赖。**\n\n令 $n=\\sum\\limits_{i=1}^k l_i$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq T\\leq 15$，$1\\leq n\\leq 2\\times 10^9$，$1\\leq k\\leq 10^5$，且对于任意 $i$ 均有 $0\\leq a_i\\leq 9$，$1\\leq l_i\\leq 2\\times 10^9$。\n\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $15$ | $2\\times 10^9$ | $A$ | $10$ | 无 |\n| 2 | $15$ | $100$ | 无 | $15$ | 无 |\n| 3 | $5$ | $2000$ | 无 | $15$ | 2 |\n| 4 | $5$ | $10^6$ | 无 | $15$ | 2,3 |\n| 5 | $5$ | $2\\times 10^9$ | 无 | $45$ | 1,2,3,4 |\n\n特殊性质 $A$：保证在解压缩后的 $a$ 中，任意一个数字都出现了最多一次。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』笑起来最帅的小孩", "background": "", "description": "**本题包含多组数据。**\n\n有一个数字序列 $a$，长度为 $n$。序列中每一项均为 $0$ 到 $9$ 的数字。\n\n另有一个空数字序列 $b$，$b$ 中会出现一个**光标**（你可以理解为能够出现在数字之间，或整个数字序列之前，或整个数字序列之后的细线），此时**光标**前后均没有数字。\n\n现在向 $b$ 中依次输入数字序列 $a$。每输入一个数字，数字立即出现在**光标**之后。\n\n接下来**光标**立即随机地移动到任意一个数字之前或所有数字之后。随机是均匀的。换句话说，**光标**移动到所有可移动到的位置的概率是均等的。\n\n现在告诉你数字序列 $a$。你需要输出的是，最终得到的 $b$ 直接转为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模。\n\n由于 $a$ 可能很长，所以本题采用压缩输入。\n\n具体来说，最开始 $a$ 是空的数字序列，输入会给你一个 $k$ 长的二元组数组，其中第 $i$ 项为 $(x_i,l_i)$，表示数字 $x_i$ 连续出现 $l_i$ 次接在之前的 $a$ 之后。你可以用此方法解压缩真正的 $a$，再解决问题。\n\n----------\n\n**在本题，你可以对期望的理解**：对于一个变量可能的结果 $X$，若其权值为 $v_X$，得到该结果的概率为 $p_X$，则对于结果集 $S$，变量的期望 $E=\\sum\\limits_{X\\in S}p_Xv_X$。\n\n**如果你不知道如何对有理数取模**：请查看[此题](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行一个整数 $k$，表示 $a$ 压缩后得到的二元组数组包含多少项。\n\n接下来共 $k$ 行，每行两个整数 $x_i,l_i$，表示在上一项所得 $a$ 序列的基础上，在末尾增加 $l_i$ 个数字 $x_i$ 得到新的 $a$ 序列。你可以用这种方式解压缩真正的 $a$ 序列。", "outputFormat": "对于每组数据，输出一行一个整数，表示在光标每次都随机移动的情况下，可能得到的 $b$ 转化为十进制后的大小（无视前导零）的期望，对质数 $2007072007$ 取模的值。", "hint": "### 数据范围\n\n**本题开启子任务捆绑和子任务依赖。**\n\n令 $n=\\sum\\limits_{i=1}^k l_i$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq T\\leq 15$，$1\\leq n\\leq 2\\times 10^9$，$1\\leq k\\leq 10^5$，且对于任意 $i$ 均有 $0\\leq a_i\\leq 9$，$1\\leq l_i\\leq 2\\times 10^9$。\n\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $15$ | $2\\times 10^9$ | $A$ | $10$ | 无 |\n| 2 | $15$ | $100$ | 无 | $15$ | 无 |\n| 3 | $5$ | $2000$ | 无 | $15$ | 2 |\n| 4 | $5$ | $10^6$ | 无 | $15$ | 2,3 |\n| 5 | $5$ | $2\\times 10^9$ | 无 | $45$ | 1,2,3,4 |\n\n特殊性质 $A$：保证在解压缩后的 $a$ 中，任意一个数字都出现了最多一次。", "locale": "zh-CN"}}}
{"pid": "P10793", "type": "P", "difficulty": 4, "samples": [["2\n5 3 \n6 10\n6 8 \n3 5 \n7 9 \n1 9\n5 5\n5 10\n3 8\n6 10\n4 10\n5 9", "3\n3"]], "limits": {"time": [1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "单调队列", "O2优化", "排序"], "title": "『SpOI - R1』Double Champions", "background": "", "description": "**本题包含多组数据。**\n\n现在有若干个格子排在一行上。\n\n再给出 $n$ 个区间，每个区间 $i$ 可以覆盖 $[l_i,r_i]$ 这个区间中的每一个格子（例如，区间 $[1,2]$ 可以覆盖格子 $1,2$）。\n\n现在需要把这些区间分组，每个组带来的贡献为所有其旗下的区间的交的总长度。\n\n你需要求出最少把这些区间分成多少组，才能使得每一组的贡献都 $\\geq w$。如果不存在任何方案满足条件，输出 `No`。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行两个整数 $n,w$。\n\n接下来 $n$ 行，每一行两个整数 $l_i,r_i$，描述一个区间。", "outputFormat": "对于每组数据，输出一行一个答案，表示最少要分的组数，或者字符串 `No`，表示无解。", "hint": "#### 样例 #1 解释\n\n按照输入顺序将输入的区间依次编号为 $①,②,③,④,⑤$。\n\n可以将 $5$ 个区间分为以下 $3$ 组：$\\{①,④\\},\\{②\\},\\{③⑤\\}$。这样每一组的贡献即交集大小分别为 $3,3,3$，符合对每组贡献 $\\geq 3$ 的要求。可以证明，$3$ 组是所有符合条件的区间划分方案中组数最少的。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启捆绑测试和子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 20$，$1\\leq n\\leq 2\\times 10^5$，$0\\leq w\\leq 10^6$，$1\\leq l_i\\leq r_i\\leq 10^6$。\n\n| Subtask | $n\\leq$ | $w,l_i,r_i\\leq$ | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $8$ | $15$ | $10$ | 无 |\n| 2 | $11$ | $20$ | $10$ | 1 |\n| 3 | $1.5\\times 10^3$ | $10^4$ | $25$ | 1,2 |\n| 4 | $2\\times 10^5$ | $10^6$ | $55$ | 1,2,3 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』Double Champions", "background": "", "description": "**本题包含多组数据。**\n\n现在有若干个格子排在一行上。\n\n再给出 $n$ 个区间，每个区间 $i$ 可以覆盖 $[l_i,r_i]$ 这个区间中的每一个格子（例如，区间 $[1,2]$ 可以覆盖格子 $1,2$）。\n\n现在需要把这些区间分组，每个组带来的贡献为所有其旗下的区间的交的总长度。\n\n你需要求出最少把这些区间分成多少组，才能使得每一组的贡献都 $\\geq w$。如果不存在任何方案满足条件，输出 `No`。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行两个整数 $n,w$。\n\n接下来 $n$ 行，每一行两个整数 $l_i,r_i$，描述一个区间。", "outputFormat": "对于每组数据，输出一行一个答案，表示最少要分的组数，或者字符串 `No`，表示无解。", "hint": "#### 样例 #1 解释\n\n按照输入顺序将输入的区间依次编号为 $①,②,③,④,⑤$。\n\n可以将 $5$ 个区间分为以下 $3$ 组：$\\{①,④\\},\\{②\\},\\{③⑤\\}$。这样每一组的贡献即交集大小分别为 $3,3,3$，符合对每组贡献 $\\geq 3$ 的要求。可以证明，$3$ 组是所有符合条件的区间划分方案中组数最少的。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启捆绑测试和子任务依赖。**\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 20$，$1\\leq n\\leq 2\\times 10^5$，$0\\leq w\\leq 10^6$，$1\\leq l_i\\leq r_i\\leq 10^6$。\n\n| Subtask | $n\\leq$ | $w,l_i,r_i\\leq$ | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $8$ | $15$ | $10$ | 无 |\n| 2 | $11$ | $20$ | $10$ | 1 |\n| 3 | $1.5\\times 10^3$ | $10^4$ | $25$ | 1,2 |\n| 4 | $2\\times 10^5$ | $10^6$ | $55$ | 1,2,3 |", "locale": "zh-CN"}}}
{"pid": "P10794", "type": "P", "difficulty": 5, "samples": [["1\n3\n1 2", "2"], ["1\n7\n1 2 1 4 4 5", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "树形 DP", "树的直径"], "title": "『SpOI - R1』架子鼓可以站 C", "background": "", "description": "现在有一棵 $n$ 个点的树，树根是节点 $1$。\n\n可以对这棵树做任意次**站 C 操作**，每次**站 C 操作**为：选择树上的一个叶子结点 $x$，再选择根节点到 $x$ 路径上的一条边，删除它；然后添加一条连接 $x$ 和根节点的边。\n\n你需要求出经过若干次**站 C 操作**后树的直径的最大值。\n\n**注意：叶子结点的定义是不为根节点，且度数为 $1$ 的节点。**", "inputFormat": "**本题包含多组测试。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组数据，每组第一行一个整数 $n$，第二行一个长为 $n-1$ 的序列 $f_i$，第 $i$ 项为 $i+1$ 号节点在树上的父亲。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "### 样例 #1 解释\n\n不做操作时，树的直径为 $2$。可以证明这是最大的直径。\n\n### 样例 #2 解释\n\n样例中的树如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/23wosgfo.png)\n\n只需要一次站 C 操作：选择叶子结点 $6$，断开 $1$ 到 $4$ 的边，再连接 $6$ 和 $1$。\n\n这将会使树形成一条链，直径为 $6$。可以证明这是最大的直径。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于所有数据，满足 $1\\leq T\\leq 10^4$，$2 \\leq n \\leq 2\\times 10^5$，保证输入数据构成一棵树。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $10^4$ | $10$ | 无 | $15$ | 无 |\n| 2 | $10^4$ | $20$ | 无 | $15$ | 1 |\n| 3 | $10^4$ | $90$ | 无 | $20$ | 1,2 |\n| 4 | $10^4$ | $2\\times 10^5$ | $A$ | $15$ | 无 |\n| 5 | $15$ | $2\\times 10^5$ | 无 | $35$ | 1,2,3,4 |\n\n**特别地，对于 Subtask 4，保证 $\\sum n\\leq 3\\times 10^6$。**\n\n特殊性质 $A$：不存在一对 $x\\neq 1\\land y\\neq 1$ 的 $(x,y)$ 满足 $\\text{LCA}(x,y)=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『SpOI - R1』架子鼓可以站 C", "background": "", "description": "现在有一棵 $n$ 个点的树，树根是节点 $1$。\n\n可以对这棵树做任意次**站 C 操作**，每次**站 C 操作**为：选择树上的一个叶子结点 $x$，再选择根节点到 $x$ 路径上的一条边，删除它；然后添加一条连接 $x$ 和根节点的边。\n\n你需要求出经过若干次**站 C 操作**后树的直径的最大值。\n\n**注意：叶子结点的定义是不为根节点，且度数为 $1$ 的节点。**", "inputFormat": "**本题包含多组测试。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n接下来 $T$ 组数据，每组第一行一个整数 $n$，第二行一个长为 $n-1$ 的序列 $f_i$，第 $i$ 项为 $i+1$ 号节点在树上的父亲。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "### 样例 #1 解释\n\n不做操作时，树的直径为 $2$。可以证明这是最大的直径。\n\n### 样例 #2 解释\n\n样例中的树如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/23wosgfo.png)\n\n只需要一次站 C 操作：选择叶子结点 $6$，断开 $1$ 到 $4$ 的边，再连接 $6$ 和 $1$。\n\n这将会使树形成一条链，直径为 $6$。可以证明这是最大的直径。\n\n### 数据范围\n\n**请注意常数因子对程序效率的影响。**\n\n**本题开启子任务捆绑与子任务依赖。**\n\n对于所有数据，满足 $1\\leq T\\leq 10^4$，$2 \\leq n \\leq 2\\times 10^5$，保证输入数据构成一棵树。\n\n| Subtask | $T\\leq$ | $n\\leq$ | 特殊性质 | 得分 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $10^4$ | $10$ | 无 | $15$ | 无 |\n| 2 | $10^4$ | $20$ | 无 | $15$ | 1 |\n| 3 | $10^4$ | $90$ | 无 | $20$ | 1,2 |\n| 4 | $10^4$ | $2\\times 10^5$ | $A$ | $15$ | 无 |\n| 5 | $15$ | $2\\times 10^5$ | 无 | $35$ | 1,2,3,4 |\n\n**特别地，对于 Subtask 4，保证 $\\sum n\\leq 3\\times 10^6$。**\n\n特殊性质 $A$：不存在一对 $x\\neq 1\\land y\\neq 1$ 的 $(x,y)$ 满足 $\\text{LCA}(x,y)=1$。", "locale": "zh-CN"}}}
