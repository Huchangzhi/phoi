{"pid": "P2436", "type": "P", "difficulty": 3, "samples": [["10 1\n4 8 55 56 57 63 64 67 70 150\n87", "20 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2016", "洛谷原创", "洛谷月赛"], "title": "钦定", "background": null, "description": "小 S 拿到了复赛参赛表，表上的选手是由 $A$ 位神犇与 $B$ 位蒟蒻间隔、循环构成的。\n\n比如 $A=2$，$B=3$ 时，选手 $1,2,6,7,11,12\\dots$ 是神犇，选手 $3,4,5,8,9,10,13,14,15\\dots$是蒟蒻。\n\n现在小 S 钦定了一些选手是神犇，蒟蒻，但她不能构造出这样的 $A,B$，你能帮帮她吗？", "inputFormat": "每个测试点多组数据。\n\n每组数据第一行两个整数 $N,M$。\n\n第二行为 $N$ 名选手编号 $a_1,a_2,\\dots,a_N$。即小 S 把他们钦定为神犇。\n\n第三行为 $M$ 名选手编号 $b_1,b_2,\\dots,b_M$。即小 S 把他们钦定为蒟蒻。", "outputFormat": "对于每组数据，输出满足题意的两个整数 $A,B$（用空格隔开），并且使得 $A$ 最小的情况下 $B$ 最小。 如果没有符合条件的 $A,B$，请输出 `NO`。", "hint": "设一个测试点中共有 $T$ 组测试数据。\n\n对于 $10 \\%$ 的数据，$1 \\le N,M \\le 10$。\n\n对于 $30 \\%$ 的数据，$1 \\le N,M \\le 100$。\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 1000$，$1 \\le T \\le 10$，$1 \\le a_i,b_i \\le 10 \\times (N + M)$。", "locale": "zh-CN", "translations": {"en": {"title": "Designated", "background": "", "description": "Xiao S got the roster for the semifinals. The contestants on the list are arranged by repeating cycles of $A$ pros and $B$ noobs.\n\nFor example, when $A = 2$, $B = 3$, contestants $1, 2, 6, 7, 11, 12\\dots$ are pros, and contestants $3, 4, 5, 8, 9, 10, 13, 14, 15\\dots$ are noobs.\n\nNow Xiao S has designated some contestants as pros and some as noobs, but she cannot construct such $A, B$. Can you help her?", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case:\n- The first line contains two integers $N, M$.\n- The second line contains $N$ distinct integers $a_1, a_2, \\dots, a_N$, the contestant indices designated as pros.\n- The third line contains $M$ distinct integers $b_1, b_2, \\dots, b_M$, the contestant indices designated as noobs.", "outputFormat": "For each test case, output two integers $A, B$ (separated by a space) that satisfy the requirements. Among all valid pairs, choose the one with the smallest $A$, and if there are multiple, the one with the smallest $B$. If no such $A, B$ exist, output `NO`.", "hint": "Let there be $T$ test cases in a test file.\n\n- For $10\\%$ of the testdata, $1 \\le N, M \\le 10$.\n- For $30\\%$ of the testdata, $1 \\le N, M \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 1000$, $1 \\le T \\le 10$, $1 \\le a_i, b_i \\le 10 \\times (N + M)$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "钦定", "background": null, "description": "小 S 拿到了复赛参赛表，表上的选手是由 $A$ 位神犇与 $B$ 位蒟蒻间隔、循环构成的。\n\n比如 $A=2$，$B=3$ 时，选手 $1,2,6,7,11,12\\dots$ 是神犇，选手 $3,4,5,8,9,10,13,14,15\\dots$是蒟蒻。\n\n现在小 S 钦定了一些选手是神犇，蒟蒻，但她不能构造出这样的 $A,B$，你能帮帮她吗？", "inputFormat": "每个测试点多组数据。\n\n每组数据第一行两个整数 $N,M$。\n\n第二行为 $N$ 名选手编号 $a_1,a_2,\\dots,a_N$。即小 S 把他们钦定为神犇。\n\n第三行为 $M$ 名选手编号 $b_1,b_2,\\dots,b_M$。即小 S 把他们钦定为蒟蒻。", "outputFormat": "对于每组数据，输出满足题意的两个整数 $A,B$（用空格隔开），并且使得 $A$ 最小的情况下 $B$ 最小。 如果没有符合条件的 $A,B$，请输出 `NO`。", "hint": "设一个测试点中共有 $T$ 组测试数据。\n\n对于 $10 \\%$ 的数据，$1 \\le N,M \\le 10$。\n\n对于 $30 \\%$ 的数据，$1 \\le N,M \\le 100$。\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 1000$，$1 \\le T \\le 10$，$1 \\le a_i,b_i \\le 10 \\times (N + M)$。", "locale": "zh-CN"}}}
{"pid": "P2437", "type": "P", "difficulty": 2, "samples": [["1 14", "377"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度", "递推", "Fibonacci 数列"], "title": "蜜蜂路线", "background": null, "description": "一只蜜蜂在下图所示的数字蜂房上爬动,已知它只能从标号小的蜂房爬到标号大的相邻蜂房,现在问你：蜜蜂从蜂房 $m$ 开始爬到蜂房 $n$，$m<n$，有多少种爬行路线？（备注：题面有误，右上角应为 $n-1$）\n\n![](https://cdn.luogu.com.cn/upload/pic/1575.png)", "inputFormat": "输入 $m,n$ 的值。", "outputFormat": "爬行有多少种路线。", "hint": "对于 $100\\%$ 的数据，$1 \\le M,N\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Bee Routes", "background": "", "description": "A bee crawls on a numbered honeycomb as shown in the figure below. It can only move from a cell with a smaller label to an adjacent cell with a larger label. How many different routes are there for the bee to crawl from cell $m$ to cell $n$, with $m < n$? (Note: The original statement contains an error; the top-right corner should be labeled $n-1$.)\n\n![](https://cdn.luogu.com.cn/upload/pic/1575.png)", "inputFormat": "A single line containing integers $m$ and $n$.", "outputFormat": "Output the number of possible crawling routes.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le m, n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "蜜蜂路线", "background": null, "description": "一只蜜蜂在下图所示的数字蜂房上爬动,已知它只能从标号小的蜂房爬到标号大的相邻蜂房,现在问你：蜜蜂从蜂房 $m$ 开始爬到蜂房 $n$，$m<n$，有多少种爬行路线？（备注：题面有误，右上角应为 $n-1$）\n\n![](https://cdn.luogu.com.cn/upload/pic/1575.png)", "inputFormat": "输入 $m,n$ 的值。", "outputFormat": "爬行有多少种路线。", "hint": "对于 $100\\%$ 的数据，$1 \\le M,N\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2438", "type": "P", "difficulty": 5, "samples": [["4\r\n1 0 1 0\r\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 解环", "background": "拜特兰并不总是一个非常民主的国家，也有一些阴暗的历史。一个美好的日子，拜特将军（该国的统帅）作了一个用以结束长期内战的决定，释放被关押的反对派。然而，他并未让反对派的领袖拜特萨直接自由，而是用一根“拜特链”将拜特萨锁在墙边.该链子由很多环和固定在墙上栅栏组成。尽管环并未和栅栏融合在一起，但想除去它们却非常困难。\n\n“将军，你为什么要用链子将我锁在墙边而不让我自由！”拜特萨大叫道。\n\n“拜特萨，你并未完全被链子锁住，我可以坦率的告诉你，你完全可以从栅栏上解下环。”拜特将军回答，同时他补充说，“但是，你必须在夜里工作，一个小时之内完成，不能弄出任何声音，否则，我将按有关法律治罪。”\n", "description": "为了帮助拜特萨！链子上的环按整数1,2,…,n进行了编号。我们可以按照以下规则解开环：\n\n    只有一个环时可以被连接到栅栏或从栅栏上拆开。\n\n    第1号环总能进行连接或拆开\n\n    如果1,...,k-1 (1<=k<n)环都被拆开，第k个环被连接时, 此时我们能连接或拆开 第k+1个环.\n\n\n写一个程序：\n\n输入描述了拜特链的构成,\n\n计算拆除拜特链上全部环的最少操作次数,\n\n将结果输出。\n", "inputFormat": "第1行有一个整数n, 1<=n<=1 000.在第2行有n个用一个空格分隔的整数 o1,o2,...,on (每个都是0或1)，如果 oi=1, 那么第I个环和栅栏相连，如果 oi=0, 那么第I环没有和栅栏相连。\n", "outputFormat": "只包含一个整数，为解开拜特链的全部环的最少操作次数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Unlinking the Rings", "background": "Byteland has not always been a very democratic country, and it has some dark history. One fine day, General Byte (the commander of the country) decided to end the long civil war by releasing the imprisoned opposition. However, he did not set the opposition leader Baitesa (pinyin) completely free; instead, he locked Baitesa to the wall with a “Byte Chain”. The chain consists of many rings and a fence fixed to the wall. Although the rings are not fused with the fence, removing them is very difficult.\n\n“General, why are you chaining me to the wall instead of letting me go free!” Baitesa shouted.\n\n“Baitesa, you are not completely chained. I can frankly tell you that you can fully detach the rings from the fence,” General Byte replied, adding, “But you must work at night, finish within one hour, and make no noise. Otherwise, I will punish you according to the law.”", "description": "To help Baitesa! The rings on the chain are numbered $1, 2, \\ldots, n$. We can detach them according to the following rules:\n\n- At each step, you may attach or detach exactly one ring to or from the fence.\n- Ring $1$ can always be attached or detached.\n- If rings $1, \\ldots, k - 1$ are all detached and ring $k$ is attached, where $1 \\le k < n$, then you may attach or detach ring $k + 1$.\n\nWrite a program that, given the description of the Byte Chain, computes the minimum number of operations needed to remove all rings from the fence and outputs the result.", "inputFormat": "The first line contains an integer $n$, where $1 \\le n \\le 1000$.  \nThe second line contains $n$ integers $o_1, o_2, \\ldots, o_n$ (each is $0$ or $1$) separated by single spaces. If $o_i = 1$, then the $i$-th ring is attached to the fence; if $o_i = 0$, then the $i$-th ring is not attached.", "outputFormat": "Output a single integer: the minimum number of operations required to detach all rings from the fence.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 解环", "background": "拜特兰并不总是一个非常民主的国家，也有一些阴暗的历史。一个美好的日子，拜特将军（该国的统帅）作了一个用以结束长期内战的决定，释放被关押的反对派。然而，他并未让反对派的领袖拜特萨直接自由，而是用一根“拜特链”将拜特萨锁在墙边.该链子由很多环和固定在墙上栅栏组成。尽管环并未和栅栏融合在一起，但想除去它们却非常困难。\n\n“将军，你为什么要用链子将我锁在墙边而不让我自由！”拜特萨大叫道。\n\n“拜特萨，你并未完全被链子锁住，我可以坦率的告诉你，你完全可以从栅栏上解下环。”拜特将军回答，同时他补充说，“但是，你必须在夜里工作，一个小时之内完成，不能弄出任何声音，否则，我将按有关法律治罪。”\n", "description": "为了帮助拜特萨！链子上的环按整数1,2,…,n进行了编号。我们可以按照以下规则解开环：\n\n    只有一个环时可以被连接到栅栏或从栅栏上拆开。\n\n    第1号环总能进行连接或拆开\n\n    如果1,...,k-1 (1<=k<n)环都被拆开，第k个环被连接时, 此时我们能连接或拆开 第k+1个环.\n\n\n写一个程序：\n\n输入描述了拜特链的构成,\n\n计算拆除拜特链上全部环的最少操作次数,\n\n将结果输出。\n", "inputFormat": "第1行有一个整数n, 1<=n<=1 000.在第2行有n个用一个空格分隔的整数 o1,o2,...,on (每个都是0或1)，如果 oi=1, 那么第I个环和栅栏相连，如果 oi=0, 那么第I环没有和栅栏相连。\n", "outputFormat": "只包含一个整数，为解开拜特链的全部环的最少操作次数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2439", "type": "P", "difficulty": 4, "samples": [["12\r\n1 2\r\n3 5\r\n0 4\r\n6 8\r\n7 13\r\n4 6\r\n9 10\r\n9 12\r\n11 14\r\n15 19\r\n14 16\r\n18 20\r\n", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 阶梯教室设备利用", "background": "", "description": "我们现有许多演讲要在阶梯教室中举行。每一个演讲都可以用唯一的起始和终止时间来确定，如果两个演讲时间有部分或全部重复，那么它们是无法同时在阶级教室中举行的。现在我们想要尽最大可能的利用这个教室，也就是说，我们需要在这些演讲中选择一些不重复的演讲来举行使得他们用的总时间尽可能的长。我们假设在某一演讲结束的瞬间我们就可以立即开始另一个演讲。\n\n请写一个程序：\n\n读入所有演讲的起始和终止时间，计算最大的可能演讲总时间。", "inputFormat": "第一行包括一个正整数 $n$，为所有的演讲的数目。\n\n以下的 $n$ 行每行含有两个由空格隔开的整数 $p$ 和 $k$。这样的一对整数表示一个演讲由时间 $p$ 开始到时间 $k$ 结束。", "outputFormat": "输出唯一的一个整数，为最长的演讲总时间。\n", "hint": "### 样例解释\n\n可以选择第 $3$ 个、第 $5$ 个、第 $6$ 个、第 $11$ 个、第 $12$ 个演讲，此时有最长的演讲总时间 $16$。\n\n### 数据范围\n\n$1\\le n\\le 10^4$，$0\\le p<k\\le 3\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "{{[SDOI2005] Lecture Hall Equipment Utilization}}", "background": "{{}}", "description": "{{We have many talks to be held in a lecture hall. Each talk is determined by a unique start time and end time. If two talks overlap partially or entirely, they cannot be held simultaneously in the lecture hall. We want to make the best possible use of this hall; that is, we need to select some non-overlapping talks so that their total scheduled time is as long as possible. We assume that at the exact moment one talk ends, another talk can start immediately.\n\nWrite a program to:\n\nRead all start and end times of the talks and compute the maximum possible total time of talks.}}", "inputFormat": "{{The first line contains a positive integer $n$, the number of talks.\n\nEach of the following $n$ lines contains two space-separated integers $p$ and $k$. Such a pair indicates a talk that starts at time $p$ and ends at time $k$.}}", "outputFormat": "{{Output a single integer, the maximum total time of the talks.}}", "hint": "{{Sample Explanation\n\nYou can choose the 3rd, 5th, 6th, 11th, and 12th talks, yielding the maximum total duration $16$.\n\nConstraints\n\n$1 \\le n \\le 10^4$, $0 \\le p < k \\le 3 \\times 10^4$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 阶梯教室设备利用", "background": "", "description": "我们现有许多演讲要在阶梯教室中举行。每一个演讲都可以用唯一的起始和终止时间来确定，如果两个演讲时间有部分或全部重复，那么它们是无法同时在阶级教室中举行的。现在我们想要尽最大可能的利用这个教室，也就是说，我们需要在这些演讲中选择一些不重复的演讲来举行使得他们用的总时间尽可能的长。我们假设在某一演讲结束的瞬间我们就可以立即开始另一个演讲。\n\n请写一个程序：\n\n读入所有演讲的起始和终止时间，计算最大的可能演讲总时间。", "inputFormat": "第一行包括一个正整数 $n$，为所有的演讲的数目。\n\n以下的 $n$ 行每行含有两个由空格隔开的整数 $p$ 和 $k$。这样的一对整数表示一个演讲由时间 $p$ 开始到时间 $k$ 结束。", "outputFormat": "输出唯一的一个整数，为最长的演讲总时间。\n", "hint": "### 样例解释\n\n可以选择第 $3$ 个、第 $5$ 个、第 $6$ 个、第 $11$ 个、第 $12$ 个演讲，此时有最长的演讲总时间 $16$。\n\n### 数据范围\n\n$1\\le n\\le 10^4$，$0\\le p<k\\le 3\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2440", "type": "P", "difficulty": 3, "samples": [["3 7\n232\n124\n456", "114"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "线性数据结构", "二分", "递归"], "title": "木材加工", "background": "要保护环境。", "description": "木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。\n\n当然，我们希望得到的小段木头越长越好，请求出 $l$ 的最大值。\n\n木头长度的单位是 $\\text{cm}$，原木的长度都是正整数，我们要求切割得到的小段木头的长度也是正整数。\n\n例如有两根原木长度分别为 $11$ 和 $21$，要求切割成等长的 $6$ 段，很明显能切割出来的小段木头长度最长为 $5$。", "inputFormat": "第一行是两个正整数 $n,k$，分别表示原木的数量，需要得到的小段的数量。\n\n接下来 $n$ 行，每行一个正整数 $L_i$，表示一根原木的长度。", "outputFormat": "仅一行，即 $l$ 的最大值。\n\n如果连 $\\text{1cm}$ 长的小段都切不出来，输出 `0`。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$，$1\\le k\\le 10^8$，$1\\le L_i\\le 10^8(i\\in[1,n])$。", "locale": "zh-CN", "translations": {"en": {"title": "Wood Processing", "background": "Protect the environment.", "description": "A lumber mill has $n$ logs. We want to cut them into $k$ segments, each of length $l$ (there may be leftover wood).\n\nOf course, we want the segments to be as long as possible. Please find the maximum value of $l$.\n\nThe unit of length is $\\text{cm}$. The lengths of the logs are positive integers, and we also require the lengths of the resulting segments to be positive integers.\n\nFor example, if there are two logs with lengths $11$ and $21$, and we need $6$ equal segments, the longest possible segment length is $5$.", "inputFormat": "The first line contains two positive integers $n, k$, denoting the number of logs and the required number of segments.\n\nThe next $n$ lines each contain a positive integer $L_i$, the length of one log.", "outputFormat": "A single line containing the maximum value of $l$.\n\nIf it is impossible to cut even segments of length $\\text{1cm}$, output `0`.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le k \\le 10^8$, $1 \\le L_i \\le 10^8$ ($i \\in [1, n]$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "木材加工", "background": "要保护环境。", "description": "木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。\n\n当然，我们希望得到的小段木头越长越好，请求出 $l$ 的最大值。\n\n木头长度的单位是 $\\text{cm}$，原木的长度都是正整数，我们要求切割得到的小段木头的长度也是正整数。\n\n例如有两根原木长度分别为 $11$ 和 $21$，要求切割成等长的 $6$ 段，很明显能切割出来的小段木头长度最长为 $5$。", "inputFormat": "第一行是两个正整数 $n,k$，分别表示原木的数量，需要得到的小段的数量。\n\n接下来 $n$ 行，每行一个正整数 $L_i$，表示一根原木的长度。", "outputFormat": "仅一行，即 $l$ 的最大值。\n\n如果连 $\\text{1cm}$ 长的小段都切不出来，输出 `0`。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$，$1\\le k\\le 10^8$，$1\\le L_i\\le 10^8(i\\in[1,n])$。", "locale": "zh-CN"}}}
{"pid": "P2441", "type": "P", "difficulty": 4, "samples": [["4 6\r\n10 8 4 3\r\n1 2\r\n2 3\r\n3 4\r\n1 1\r\n1 2\r\n1 3\r\n1 4\r\n2 1 9\r\n1 4", "-1\r\n1\r\n2\r\n-1\r\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "树形数据结构", "2015", "洛谷原创", "枚举", "素数判断,质数,筛法", "栈", "洛谷月赛"], "title": "角色属性树", "background": null, "description": "绪萌同人社是一个有趣的组织，该组织结构是一个树形结构。有一个社长，直接下属一些副社长。每个副社长又直接下属一些部长……。\n\n每个成员都有一个萌点的属性，萌点属性是由一些质数的萌元素乘积构成（例如，猫耳的值是 $2$，弱气的值是 $3$，黄毛的值是 $5$，病娇的值是 $7$，双马尾的值是 $11$ 等等）\n\n举个例子，正妹是双份的猫耳，而且有一份弱气，她的属性值为 $2\\times 2\\times 3=12$。\n\n现在组员关心一个问题，希望知道离自己最近且有相同萌元素上司是谁，例如，属性值为 $2、4、6、45$ 这样的属性值都算是和正妹有相同的属性。\n\n\n然而，组员可能会随时变化自己的属性。啊。。感觉好麻烦啊。。", "inputFormat": "第一行，$n,k$ 表示成员数与询问的次数\n\n第二行，$n$ 个数，分别是 $1$ 到 $n$ 号成员的属性值\n\n接下来 $n-1$ 行，$x_i,y_i$ 表示 $x_i$ 是 $y_i$ 的上司。\n\n接下来来 $k$ 行，有两种情况\n\n$1\\ u_i$：询问离 $u_i$ 成员最近且有相同萌元素上司。\n\n$2\\ u_i\\  a$：更改 $u_i$ 的属性值为 $a$。", "outputFormat": "对于每个 $1$ 类型的询问，输出符合要求的编号。如果没有符合要求的编号，输出 $-1$。", "hint": "对于 $20\\%$ 的数据，没有修改的操作。\n\n对于 $50\\%$ 的数据，$n\\le 100$，修改次数 $<10$。\n\n对于 $100\\%$ 的数据，$n\\le 200000$，$k<100000$，修改次数 $\\le 50,a_i\\le 2^{31}-1$。\n\nUPD：本题测试数据随机，可能是假题。", "locale": "zh-CN", "translations": {"en": {"title": "Character Attribute Tree", "background": "", "description": "The Xumeng Fan Club is an interesting organization with a hierarchical tree structure. There is a president, who directly supervises several vice presidents. Each vice president, in turn, directly supervises several department heads, and so on.\n\nEach member has a \"moe\" attribute, which is the product of several prime \"moe elements\" (for example, the value of cat ears is $2$, timid is $3$, blonde is $5$, yandere is $7$, twin-tails is $11$, etc.).\n\nFor example, suppose a certain member has double cat ears and one timid trait; then her attribute value is $2\\times 2\\times 3=12$.\n\nNow, members care about the following question: for themselves, who is the nearest superior that shares at least one common moe element? For example, attribute values $2, 4, 6, 45$ are all considered to share moe elements with the above member with attribute $12$.\n\nHowever, a member may change their attribute at any time. Ah... what a hassle.", "inputFormat": "The first line contains $n, k$, the number of members and the number of queries.\n\nThe second line contains $n$ numbers, the attribute values of members $1$ through $n$.\n\nThe next $n-1$ lines each contain $x_i, y_i$, meaning $x_i$ is the supervisor of $y_i$.\n\nThen $k$ lines follow, each of one of the two types:\n\n$1\\ u_i$：Query the nearest superior of member $u_i$ that shares at least one moe element.\n\n$2\\ u_i\\  a$：Change the attribute value of $u_i$ to $a$.", "outputFormat": "For each type $1$ query, output the required member ID. If there is no such superior, output $-1$.", "hint": "Constraints:\n- For $20\\%$ of the testdata, there are no update operations.\n- For $50\\%$ of the testdata, $n\\le 100$, the number of updates $<10$.\n- For $100\\%$ of the testdata, $n\\le 200000$, $k<100000$, the number of updates $\\le 50$, and $a_i\\le 2^{31}-1$.\n\nUPD: The testdata are random; this might be a fake problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "角色属性树", "background": null, "description": "绪萌同人社是一个有趣的组织，该组织结构是一个树形结构。有一个社长，直接下属一些副社长。每个副社长又直接下属一些部长……。\n\n每个成员都有一个萌点的属性，萌点属性是由一些质数的萌元素乘积构成（例如，猫耳的值是 $2$，弱气的值是 $3$，黄毛的值是 $5$，病娇的值是 $7$，双马尾的值是 $11$ 等等）\n\n举个例子，正妹是双份的猫耳，而且有一份弱气，她的属性值为 $2\\times 2\\times 3=12$。\n\n现在组员关心一个问题，希望知道离自己最近且有相同萌元素上司是谁，例如，属性值为 $2、4、6、45$ 这样的属性值都算是和正妹有相同的属性。\n\n\n然而，组员可能会随时变化自己的属性。啊。。感觉好麻烦啊。。", "inputFormat": "第一行，$n,k$ 表示成员数与询问的次数\n\n第二行，$n$ 个数，分别是 $1$ 到 $n$ 号成员的属性值\n\n接下来 $n-1$ 行，$x_i,y_i$ 表示 $x_i$ 是 $y_i$ 的上司。\n\n接下来来 $k$ 行，有两种情况\n\n$1\\ u_i$：询问离 $u_i$ 成员最近且有相同萌元素上司。\n\n$2\\ u_i\\  a$：更改 $u_i$ 的属性值为 $a$。", "outputFormat": "对于每个 $1$ 类型的询问，输出符合要求的编号。如果没有符合要求的编号，输出 $-1$。", "hint": "对于 $20\\%$ 的数据，没有修改的操作。\n\n对于 $50\\%$ 的数据，$n\\le 100$，修改次数 $<10$。\n\n对于 $100\\%$ 的数据，$n\\le 200000$，$k<100000$，修改次数 $\\le 50,a_i\\le 2^{31}-1$。\n\nUPD：本题测试数据随机，可能是假题。", "locale": "zh-CN"}}}
{"pid": "P2442", "type": "P", "difficulty": 6, "samples": [["5 3\n90 100 90 90 80\n2 1 2 1 8\n1 1 3\n2 3 5\n3 1 2\n", "92.00\n80\n10\n"]], "limits": {"time": [500, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["O2优化", "分块", "ST 表"], "title": "分数统计", "background": "大宁考完联赛回来，成功的躲过了期中考试，但是他的班主任 Yellow_sword  不会放过他。", "description": "Yellow_sword 要大宁给他弄一个数据库，维护班级的考试平均分。每个人期中考试各科的分数已经被统一的转化为评价值，为一个 $[1,100]$ 之间的整数。它评价了这个人的总体水平，现在 Yellow_sword 丢给了大宁 $n$ 个班级的班级平均评价值和每个班的人数，由于 Yellow_sword 和大宁都很懒，所以都假装每个班每个人的评价值就是班级的平均评价值。他想知道：\n\n1. 连续的若干个班所有人评价值的平均数。\n2. 连续的若干个班所有人评价值的众数（若有多个取最小的那个众数）。\n3. 连续的若干个班所有人评价值的极差（即评价值最高和最低的差）。\n\n既然大家都很懒，那事情就给你来做了。", "inputFormat": "第一行为两个整数 $n$ 和 $q$，表示有 $n$ 个班级和 $q$ 个询问。\n\n第二行为 $n$ 个整数 $a_i$，表示第 $i$ 个班的平均评价值。\n\n第三行为 $n$ 个整数 $b_i$，表示第 $i$ 个班的人数。\n\n接下来 $q$ 行，每行一个查询，格式为：`Opt u v`。\n\n表示在第 $u$ 到 $v$ 个班级里查询 $Opt$ 对应的项，$Opt\\in[1,3]$，意义为前文所述。", "outputFormat": "对于每一个询问，在 $q$ 行中输出对应的结果，平均数保留两位小数（向下取整）。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le a_i\\le 100$，$1\\le b_i\\le 100$。\n\n|测试点| 数据规模| 时限 |\n| :-------:| :----:| :----: |\n| $1\\sim3$ |$n=q=10^3$| $0.5s$ |\n|$4\\sim5$| $n=q=5\\times 10^4$| $0.5s$ |\n| $6\\sim 7$ |     $n=q=10^5$| $1s$ |\n| $8\\sim 10$ |  $n=q=2\\times 10^5$| $1s$ |\n\n**建议使用较快的读入方式。**", "locale": "zh-CN", "translations": {"en": {"title": "Score Statistics", "background": "After finishing the league contest, Da Ning successfully avoided the midterm exam, but his homeroom teacher Yellow_sword would not let him off.", "description": "Yellow_sword asks Da Ning to build a database to maintain the class exam averages. Each student’s scores for the midterm subjects have been unified into a single rating, an integer in $[1, 100]$. This rating evaluates a student’s overall level. Now Yellow_sword has given Da Ning the average rating of $n$ classes and the size of each class. Because both Yellow_sword and Da Ning are lazy, they will assume every student in a class has a rating equal to that class’s average rating. He wants to know:\n\n1. The average rating of all students over some consecutive classes.\n2. The mode of all students’ ratings over some consecutive classes (if there are multiple, output the smallest mode).\n3. The range of all students’ ratings over some consecutive classes (that is, the difference between the highest and lowest ratings).\n\nSince everyone is lazy, the task is given to you.", "inputFormat": "The first line contains two integers $n$ and $q$, the number of classes and the number of queries.\n\nThe second line contains $n$ integers $a_i$, the average rating of the $i$-th class.\n\nThe third line contains $n$ integers $b_i$, the size of the $i$-th class.\n\nThe next $q$ lines each contain one query in the format: `Opt u v`.\n\nThis means to query the item corresponding to $Opt \\in [1, 3]$ over classes from $u$ to $v$, as described above.", "outputFormat": "For each query, output the corresponding result on its own line. For the average, print exactly two decimal places, rounded down (floor).", "hint": "For $100\\%$ of the testdata, it is guaranteed that $1 \\le a_i \\le 100$, $1 \\le b_i \\le 100$.\n\n| Test point | Scale | Time limit |\n| :-------: | :----: | :----: |\n| $1 \\sim 3$ | $n = q = 10^3$ | $0.5 \\text{ s}$ |\n| $4 \\sim 5$ | $n = q = 5 \\times 10^4$ | $0.5 \\text{ s}$ |\n| $6 \\sim 7$ | $n = q = 10^5$ | $1 \\text{ s}$ |\n| $8 \\sim 10$ | $n = q = 2 \\times 10^5$ | $1 \\text{ s}$ |\n\nIt is recommended to use fast I/O.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分数统计", "background": "大宁考完联赛回来，成功的躲过了期中考试，但是他的班主任 Yellow_sword  不会放过他。", "description": "Yellow_sword 要大宁给他弄一个数据库，维护班级的考试平均分。每个人期中考试各科的分数已经被统一的转化为评价值，为一个 $[1,100]$ 之间的整数。它评价了这个人的总体水平，现在 Yellow_sword 丢给了大宁 $n$ 个班级的班级平均评价值和每个班的人数，由于 Yellow_sword 和大宁都很懒，所以都假装每个班每个人的评价值就是班级的平均评价值。他想知道：\n\n1. 连续的若干个班所有人评价值的平均数。\n2. 连续的若干个班所有人评价值的众数（若有多个取最小的那个众数）。\n3. 连续的若干个班所有人评价值的极差（即评价值最高和最低的差）。\n\n既然大家都很懒，那事情就给你来做了。", "inputFormat": "第一行为两个整数 $n$ 和 $q$，表示有 $n$ 个班级和 $q$ 个询问。\n\n第二行为 $n$ 个整数 $a_i$，表示第 $i$ 个班的平均评价值。\n\n第三行为 $n$ 个整数 $b_i$，表示第 $i$ 个班的人数。\n\n接下来 $q$ 行，每行一个查询，格式为：`Opt u v`。\n\n表示在第 $u$ 到 $v$ 个班级里查询 $Opt$ 对应的项，$Opt\\in[1,3]$，意义为前文所述。", "outputFormat": "对于每一个询问，在 $q$ 行中输出对应的结果，平均数保留两位小数（向下取整）。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le a_i\\le 100$，$1\\le b_i\\le 100$。\n\n|测试点| 数据规模| 时限 |\n| :-------:| :----:| :----: |\n| $1\\sim3$ |$n=q=10^3$| $0.5s$ |\n|$4\\sim5$| $n=q=5\\times 10^4$| $0.5s$ |\n| $6\\sim 7$ |     $n=q=10^5$| $1s$ |\n| $8\\sim 10$ |  $n=q=2\\times 10^5$| $1s$ |\n\n**建议使用较快的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P2443", "type": "P", "difficulty": 0, "samples": [["-10 1\r\n10 1\r\n100\r\n2\r\n110 0 0 -5 5 -10 0 -5 -5\r\n300 5 -5 10 0 5 5 0 0", "100.00\n21.93\n2252.15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 高速公路", "background": null, "description": "京珠高速公路目前正在建设当中。粤北地区是世界著名的“丹霞地貌”，京珠在这里必须穿过一大片复杂的山区。工程的总设计师 Bonny 已经规划好了公路大致的走向，而工程师们则被派往各个多山的路段，以设计这些路段的具体规划。\n\n现在，你因为在信息学上取得的出色成就，被 Bonny 派往一个称为 DreadfulMess 的最复杂的路段，并仅仅给了你一张地图和一些数据。\n\n地图以笛卡尔坐标系描述，其中包括这一地区的所有山峰的数据（俯视图）及两个点 A、B。每座山的轮廓被假想为四边形，工程师们把这些四边形的顶点称为“测量点”，这些四边形不会发生重叠、包含，但有可能有共用的一段边或顶点。山以外的区域被认为是平地。\n\n你的任务是计算此路段山区的总面积，并设计一条公路，从 A 点起始，到 B 点终止。设计的原则是：\n1. 公路是一条折线（即转弯点的个数是有限的）；\n2. 公路可以修在平地上、沿山脚或山谷（即两座山的结合部），也可以打隧道；\n3. 隧道口不能是转弯点，除非它又是测量点；\n4. 修建公路的费用最小。\n\n费用的计算：平地、沿山脚或山谷的单位修路费用为 $u_0$，各座山修隧道的单位费用为 $u_i$。", "inputFormat": "第一、二行分别为 A、B 点坐标，整数。\n\n第三行为 $u_0$，正整数。\n\n第四行为山峰数 $n$，$0\\leq n\\leq 50$。\n\n以下共 $n$ 行，每行首先是一个正整数 $u_i$，然后是 $8$ 个整数，按逆时针方向给出表示山的四边形的顶点坐标。\n\n输入数据保证A、B两点不会在任何山的内部，四边形任意 $3$ 个顶点不在同一直线上，所有的整数的绝对值不会大于 $1000$。\n\n坐标均以整数对的形式给出，第一个数为横坐标，第二个为纵坐标。同一行内若有多个相邻整数，则整数间以至少一个空格隔开。", "outputFormat": "第一行为这个区域山的总面积。\n\n第二行为设计公路的总长。\n\n第三行为修建所设计公路的费用。\n\n输出数据均保留两位小数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Highway", "background": "", "description": "The Beijing–Zhuhai Expressway is currently under construction. The Yuebei region is a world-famous “Danxia landform,” and the expressway must pass through a large, complex mountainous area here. The chief designer Bonny has planned the general route of the highway, and engineers have been dispatched to various mountainous sections to design the detailed plans for these segments.\n\nNow, thanks to your outstanding achievements in informatics, Bonny assigns you to the most complex section called DreadfulMess, giving you only a map and some data.\n\nThe map is described in a Cartesian coordinate system. It includes the data of all mountains in this region (top view) and two points A and B. Each mountain’s outline is approximated by a quadrilateral, and the engineers call the vertices of these quadrilaterals “survey points.” The quadrilaterals do not overlap or contain one another, but they may share an edge segment or a vertex. Areas outside the mountains are considered flat ground.\n\nYour task is to compute the total area of the mountainous region of this segment and to design a highway starting at point A and ending at point B. The design principles are:\n1. The highway is a polyline (i.e., the number of turning points is finite).\n2. The highway may be built on flat ground, along foothills or valleys (i.e., the junction of two mountains), or by tunneling.\n3. Tunnel portals cannot be turning points unless they are also survey points.\n4. The construction cost should be minimized.\n\nCost calculation: The unit construction cost on flat ground or along foothills or valleys is $u_0$, and the unit tunneling cost through the $i$-th mountain is $u_i$.", "inputFormat": "- The first and second lines are the coordinates of points A and B, respectively, both integers.\n- The third line contains $u_0$, a positive integer.\n- The fourth line contains the number of mountains $n$, with $0\\leq n\\leq 50$.\n- The next $n$ lines: each line first contains a positive integer $u_i$, then $8$ integers giving the coordinates of the quadrilateral’s vertices in counterclockwise order.\n\nThe input guarantees that points A and B are not inside any mountain, no three vertices of any quadrilateral are collinear, and the absolute value of every integer does not exceed $1000$.\n\nCoordinates are given as pairs of integers: the first is the $x$-coordinate, and the second is the $y$-coordinate. If there are multiple adjacent integers on the same line, they are separated by at least one space.", "outputFormat": "- The first line is the total area of all mountains in the region.\n- The second line is the total length of the designed highway.\n- The third line is the construction cost of the designed highway.\n\nAll outputs should keep two decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 高速公路", "background": null, "description": "京珠高速公路目前正在建设当中。粤北地区是世界著名的“丹霞地貌”，京珠在这里必须穿过一大片复杂的山区。工程的总设计师 Bonny 已经规划好了公路大致的走向，而工程师们则被派往各个多山的路段，以设计这些路段的具体规划。\n\n现在，你因为在信息学上取得的出色成就，被 Bonny 派往一个称为 DreadfulMess 的最复杂的路段，并仅仅给了你一张地图和一些数据。\n\n地图以笛卡尔坐标系描述，其中包括这一地区的所有山峰的数据（俯视图）及两个点 A、B。每座山的轮廓被假想为四边形，工程师们把这些四边形的顶点称为“测量点”，这些四边形不会发生重叠、包含，但有可能有共用的一段边或顶点。山以外的区域被认为是平地。\n\n你的任务是计算此路段山区的总面积，并设计一条公路，从 A 点起始，到 B 点终止。设计的原则是：\n1. 公路是一条折线（即转弯点的个数是有限的）；\n2. 公路可以修在平地上、沿山脚或山谷（即两座山的结合部），也可以打隧道；\n3. 隧道口不能是转弯点，除非它又是测量点；\n4. 修建公路的费用最小。\n\n费用的计算：平地、沿山脚或山谷的单位修路费用为 $u_0$，各座山修隧道的单位费用为 $u_i$。", "inputFormat": "第一、二行分别为 A、B 点坐标，整数。\n\n第三行为 $u_0$，正整数。\n\n第四行为山峰数 $n$，$0\\leq n\\leq 50$。\n\n以下共 $n$ 行，每行首先是一个正整数 $u_i$，然后是 $8$ 个整数，按逆时针方向给出表示山的四边形的顶点坐标。\n\n输入数据保证A、B两点不会在任何山的内部，四边形任意 $3$ 个顶点不在同一直线上，所有的整数的绝对值不会大于 $1000$。\n\n坐标均以整数对的形式给出，第一个数为横坐标，第二个为纵坐标。同一行内若有多个相邻整数，则整数间以至少一个空格隔开。", "outputFormat": "第一行为这个区域山的总面积。\n\n第二行为设计公路的总长。\n\n第三行为修建所设计公路的费用。\n\n输出数据均保留两位小数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2444", "type": "P", "difficulty": 6, "samples": [["3\n01 \n11 \n00000\n", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["字符串", "2000", "POI（波兰）", "AC 自动机"], "title": "[POI 2000] 病毒", "background": "", "description": "二进制病毒审查委员会最近发现了如下的规律：某些确定的二进制串是病毒的代码。如果某段代码中不存在任何一段病毒代码，那么我们就称这段代码是安全的。现在委员会已经找出了所有的病毒代码段，试问，是否存在一个无限长的安全的二进制代码。\n\n示例：\n\n例如如果 $\\{011, 11, 00000\\}$ 为病毒代码段，那么一个可能的无限长安全代码就是 $010101 \\ldots$。如果 $\\{01, 11, 000000\\}$ 为病毒代码段，那么就不存在一个无限长的安全代码。\n\n现在给出所有的病毒代码段，判断是否存在无限长的安全代码。", "inputFormat": "第一行包括一个整数 $n$，表示病毒代码段的数目。\n\n以下的 $n$ 行每一行都包括一个非空的 $01$ 字符串，代表一个病毒代码段。\n", "outputFormat": "如果存在无限长的安全代码，输出 `TAK`，否则输出 `NIE`。", "hint": "$1 \\leq n \\leq 2000$，所有病毒代码段的总长度不超过 $3 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2000] Virus", "background": "", "description": "The Binary Virus Review Committee has recently discovered the following pattern: certain specific binary strings are virus code. If a piece of code contains no occurrence of any virus code, we call this code safe. Now that the committee has identified all virus code segments, determine whether there exists an infinitely long safe binary code.\n\nExample:\n\nFor instance, if $\\{011, 11, 00000\\}$ are virus code segments, then one possible infinitely long safe code is $010101 \\ldots$. If $\\{01, 11, 000000\\}$ are virus code segments, then there does not exist an infinitely long safe code.\n\nGiven all virus code segments, determine whether an infinitely long safe code exists.", "inputFormat": "The first line contains an integer $n$, the number of virus code segments.\n\nEach of the next $n$ lines contains a nonempty binary string, representing a virus code segment.", "outputFormat": "If an infinitely long safe code exists, output `TAK`; otherwise, output `NIE`.", "hint": "$1 \\leq n \\leq 2000$, and the total length of all virus code segments does not exceed $3 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2000] 病毒", "background": "", "description": "二进制病毒审查委员会最近发现了如下的规律：某些确定的二进制串是病毒的代码。如果某段代码中不存在任何一段病毒代码，那么我们就称这段代码是安全的。现在委员会已经找出了所有的病毒代码段，试问，是否存在一个无限长的安全的二进制代码。\n\n示例：\n\n例如如果 $\\{011, 11, 00000\\}$ 为病毒代码段，那么一个可能的无限长安全代码就是 $010101 \\ldots$。如果 $\\{01, 11, 000000\\}$ 为病毒代码段，那么就不存在一个无限长的安全代码。\n\n现在给出所有的病毒代码段，判断是否存在无限长的安全代码。", "inputFormat": "第一行包括一个整数 $n$，表示病毒代码段的数目。\n\n以下的 $n$ 行每一行都包括一个非空的 $01$ 字符串，代表一个病毒代码段。\n", "outputFormat": "如果存在无限长的安全代码，输出 `TAK`，否则输出 `NIE`。", "hint": "$1 \\leq n \\leq 2000$，所有病毒代码段的总长度不超过 $3 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2445", "type": "P", "difficulty": 6, "samples": [["5\n.....\n.***.\n.....\n.***.\n.....\n2\n1 3\n5 2\n1\n2\n2\n5 3 1 2\n4 5 5 1\n", "1 5 2\n2 1 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东", "Special Judge", "二分图"], "title": "[SDOI2005] 动物园", "background": "", "description": "位于郊区的动物园很早就采用了当时先进的自动化管理设施对动物进行管理。但是由于当时的系统没有考虑 $2000$ 年问题，使得管理人员十分担心。虽然采取了很多防范措施，系统还是在世纪之交出现了一些 BUG，部分动物的笼子门自动打开了，关在里面的动物都跑出来了。\n\n幸好动物园已经关闭，**动物不会跑出动物园**。警长 Still 接到报警后率领一支干警奔赴现场。这时动物已经跑出了笼子，所以干警们花了很多时间才控制住了局势，所有的动物都己经送到动物园的广场。但是此时有一个棘手的问题，由于系统完全崩溃，无法得知动物是从哪个笼子里面跑出来的。此时，干警们记得动物的一些行动，都是如下的形式：\n\n第 $t$ 分钟看到某某动物在某个位置。\n\nStill 希望通过这些零碎的信息得到动物是从哪个笼子跑出来的。\n\n### 任务\n\n根据给出的信息，编程求出每个动物的笼子的位置。\n\n动物园的地形描述为一个 $n\\times n$ 的网格，一个格子可以是建筑物或者平地。笼子的位置只可能在平地，动物也只在平地运动。每种动物的奔跑速度不一样，例如老虎一分钟可以跑 $5$ 个格子，猫一分钟只可以跑 $2$ 个格子等等。以下是一个例子（其中阴影部分是建筑物）：\n\n![](https://cdn.luogu.com.cn/upload/pic/1577.png)\n\n**每个笼子只关一只动物，不同的笼子关不同的动物。不同的笼子可能在同一个格子里。**", "inputFormat": "第一行为自然数 $n$，表示网格的边长\n\n以下 $n$ 行为一个 $n\\times n$ 的字符串矩阵，表示动物园的地形。其中 `.` 表示空地，`*` 表示建筑物。\n\n接着一行是自然数 $p$，表示笼子的数目（同时也是动物的数目）。\n\n以下 $p$ 行，每行两个自然数 $R,C$，表示一个笼子处于网格的第 $R$ 行，第 $C$ 列。\n\n以下 $p$ 行，每行一个整数 $V_i$，依次表示编号为 $i$ 的动物的速度（格子/分钟），每个动物用它的编号表示。\n\n接着一行是自然数 $r$，表示干警们提供的信息数目。\n\n以下 $r$ 行，每行四个自然数，$t,x, y, j$，表示第 $t$ 分钟在网格的 $(x, y)$ 位置看到动物 $j$。\n\n具体格式参照样例。", "outputFormat": "输出任意一个可行解。\n\n包括 $p$ 行，每行三个整数 $i,x,y$，表示动物 $i$ 原来在格子 $(x,y)$。", "hint": "$1\\leq n,p\\leq 100$，$x,y\\leq n$。\n\n注：对于特定的数据可能有多解，输出任意一解即可。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Zoo", "background": "", "description": "The zoo located in the suburbs adopted then-advanced automated management facilities to manage the animals. However, because the system did not consider the $2000$ year problem, the staff became very worried. Although many preventive measures were taken, the system still developed some bugs around the turn of the century, and some cage doors opened automatically, letting the animals inside escape.\n\nFortunately, the zoo had already been closed, so **animals will not leave the zoo**. Sheriff Still received the alarm and led a team of officers to the scene. By then the animals had already gotten out of their cages, so the officers spent a lot of time bringing the situation under control, and all animals were sent to the plaza of the zoo. However, there was a tricky problem: since the system had completely crashed, it was impossible to know from which cage each animal had escaped. The officers remembered some of the animals’ movements, all in the following form:\n\nAt minute $t$, a certain animal was seen at a certain position.\n\nStill hopes to use these scattered pieces of information to determine from which cage each animal escaped.\n\n### Task\n\nBased on the given information, write a program to determine the location of each animal’s cage.\n\nThe zoo’s terrain is described by an $n\\times n$ grid. A cell can be either a building or open ground. Cage locations can only be on open ground, and animals only move on open ground. Each animal runs at a different speed. For example, a tiger can run $5$ cells per minute, while a cat can only run $2$ cells per minute, etc. The following is an example (the shaded cells are buildings):\n\n![](https://cdn.luogu.com.cn/upload/pic/1577.png)\n\n**Each cage holds exactly one animal, and different cages hold different animals. Different cages may be in the same cell.**", "inputFormat": "The first line contains a natural number $n$, the side length of the grid.\n\nThe next $n$ lines form an $n\\times n$ character matrix describing the zoo’s terrain. Here `.` denotes open ground, and `*` denotes a building.\n\nThe next line contains a natural number $p$, the number of cages (which is also the number of animals).\n\nThe next $p$ lines each contain two natural numbers $R,C$, indicating that a cage is at row $R$, column $C$ of the grid.\n\nThe next $p$ lines each contain an integer $V_i$, in order giving the speed (cells/minute) of animal $i$. Each animal is identified by its index.\n\nThe next line contains a natural number $r$, the number of pieces of information provided by the officers.\n\nThe next $r$ lines each contain four natural numbers $t,x, y, j$, meaning that at minute $t$, animal $j$ was seen at position $(x, y)$ on the grid.\n\nRefer to the sample for the specific format.", "outputFormat": "Output any feasible solution.\n\nPrint $p$ lines, each with three integers $i,x,y$, meaning that animal $i$ was originally at cell $(x,y)$.", "hint": "$1\\leq n,p\\leq 100$，$x,y\\leq n$。\n\nNote: For certain testdata there may be multiple solutions; output any one of them.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 动物园", "background": "", "description": "位于郊区的动物园很早就采用了当时先进的自动化管理设施对动物进行管理。但是由于当时的系统没有考虑 $2000$ 年问题，使得管理人员十分担心。虽然采取了很多防范措施，系统还是在世纪之交出现了一些 BUG，部分动物的笼子门自动打开了，关在里面的动物都跑出来了。\n\n幸好动物园已经关闭，**动物不会跑出动物园**。警长 Still 接到报警后率领一支干警奔赴现场。这时动物已经跑出了笼子，所以干警们花了很多时间才控制住了局势，所有的动物都己经送到动物园的广场。但是此时有一个棘手的问题，由于系统完全崩溃，无法得知动物是从哪个笼子里面跑出来的。此时，干警们记得动物的一些行动，都是如下的形式：\n\n第 $t$ 分钟看到某某动物在某个位置。\n\nStill 希望通过这些零碎的信息得到动物是从哪个笼子跑出来的。\n\n### 任务\n\n根据给出的信息，编程求出每个动物的笼子的位置。\n\n动物园的地形描述为一个 $n\\times n$ 的网格，一个格子可以是建筑物或者平地。笼子的位置只可能在平地，动物也只在平地运动。每种动物的奔跑速度不一样，例如老虎一分钟可以跑 $5$ 个格子，猫一分钟只可以跑 $2$ 个格子等等。以下是一个例子（其中阴影部分是建筑物）：\n\n![](https://cdn.luogu.com.cn/upload/pic/1577.png)\n\n**每个笼子只关一只动物，不同的笼子关不同的动物。不同的笼子可能在同一个格子里。**", "inputFormat": "第一行为自然数 $n$，表示网格的边长\n\n以下 $n$ 行为一个 $n\\times n$ 的字符串矩阵，表示动物园的地形。其中 `.` 表示空地，`*` 表示建筑物。\n\n接着一行是自然数 $p$，表示笼子的数目（同时也是动物的数目）。\n\n以下 $p$ 行，每行两个自然数 $R,C$，表示一个笼子处于网格的第 $R$ 行，第 $C$ 列。\n\n以下 $p$ 行，每行一个整数 $V_i$，依次表示编号为 $i$ 的动物的速度（格子/分钟），每个动物用它的编号表示。\n\n接着一行是自然数 $r$，表示干警们提供的信息数目。\n\n以下 $r$ 行，每行四个自然数，$t,x, y, j$，表示第 $t$ 分钟在网格的 $(x, y)$ 位置看到动物 $j$。\n\n具体格式参照样例。", "outputFormat": "输出任意一个可行解。\n\n包括 $p$ 行，每行三个整数 $i,x,y$，表示动物 $i$ 原来在格子 $(x,y)$。", "hint": "$1\\leq n,p\\leq 100$，$x,y\\leq n$。\n\n注：对于特定的数据可能有多解，输出任意一解即可。", "locale": "zh-CN"}}}
{"pid": "P2446", "type": "P", "difficulty": 5, "samples": [["6 6\n1 2 1\n1 4 3\n2 3 1\n2 5 2\n4 6 2\n5 3 2\n0\n0\n0\n1 5\n0\n2 3 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "山东", "最短路"], "title": "[SDOI2010] 大陆争霸", "background": "在一个遥远的世界里有两个国家：位于大陆西端的杰森国和位于大陆东端的克里斯国。两个国家的人民分别信仰两个对立的神：杰森国信仰象征黑暗和毁灭的神曾·布拉泽，而克里斯国信仰象征光明和永恒的神斯普林·布拉泽。\n\n幻想历 $8012$ 年 $1$ 月，杰森国正式宣布曾·布拉泽是他们唯一信仰的神，同时开始迫害在杰森国的信仰斯普林·布拉泽的克里斯国教徒。\n\n幻想历 $8012$ 年 $3$ 月 $2$ 日，位于杰森国东部小镇神谕镇的克里斯国教徒发动起义。\n\n幻想历 $8012$ 年 $3$ 月 $7$ 日，神谕镇的起义被杰森国大军以残酷手段镇压。\n\n幻想历 $8012$ 年 $3$ 月 $8$ 日，克里斯国对杰森国宣战。由数十万大军组成的克里斯军团开至两国边境，与杰森军团对峙。\n\n幻想历 $8012$ 年 $4$ 月，克里斯军团攻破杰森军团防线进入神谕镇，该镇幸存的克里斯国教徒得到解放。\n\n战争随后进入胶着状态，旷日持久。战况惨烈，一时间枪林弹雨，硝烟弥漫，民不聊生。", "description": "幻想历 $8012$ 年 $5$ 月 $12$ 日深夜，斯普林·布拉泽降下神谕：“Trust me, earn eternal life.”克里斯军团士气大增。作为克里斯军团的主帅，你决定利用这一机会发动奇袭，一举击败杰森国。具体地说，杰森国有 $N$ 个城市，由 $M$ 条单向道路连接。神谕镇是城市 $1$ 而杰森国的首都是城市 $N$。你只需摧毁位于杰森国首都的曾·布拉泽大神殿，杰森国的信仰，军队还有一切就都会土崩瓦解，灰飞烟灭。\n\n为了尽量减小己方的消耗，你决定使用自爆机器人完成这一任务。唯一的困难是，杰森国的一部分城市有结界保护，不破坏掉结界就无法进入城市。而每个城市的结界都是由分布在其他城市中的一些结界发生器维持的，如果想进入某个城市，你就必须破坏掉维持这个城市结界的所有结界发生器。\n\n现在你有无限多的自爆机器人，一旦进入了某个城市，自爆机器人可以瞬间引爆，破坏一个目标（结界发生器，或是杰森国大神殿），当然机器人本身也会一起被破坏。你需要知道：摧毁杰森国所需的最短时间。\n", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个正整数 $u_i,v_i,w_i$，表示有一条从城市 $u_i$ 到城市 $v_i$ 的单向道路，自爆机器人通过这条道路需要 $w_i$ 的时间。\n\n之后 $N$ 行，每行描述一个城市。首先是一个正整数 $l_i$，维持这个城市结界所使用的结界发生器数目。之后 $l_i$ 个 $1\\ldots N$ 之间的城市编号，表示每个结界发生器的位置。如果 $l_i=0$，则说明该城市没有结界保护，保证 $l_1 = 0$ 。", "outputFormat": "仅包含一个正整数 ，击败杰森国所需的最短时间。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1590.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1591.png)\n\n对于 $20\\%$ 的数据，满足 $N\\leq 15$，$M≤50$；\n\n对于 $50\\%$ 的数据，满足 $N\\leq 500$，$M\\leq 6\\times 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 3\\times 10^3$，$1\\leq M\\leq 7\\times 10^4$，$1\\leq w_i\\leq 10^8$。\n\n输入数据保证一定有解，且不会存在维持某个城市结界的结界发生器在这个城市内部。\n\n连接两个城市的道路可能不止一条，也可能存在一个城市自己到自己的道路。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Mainland Conquest", "background": "In a distant world, there are two countries: Jason, located at the western end of the continent, and Chris, located at the eastern end. The two peoples believe in two opposing gods: Jason worships Zeng · Blazer, the god symbolizing darkness and destruction, while Chris worships Spring · Blazer, the god symbolizing light and eternity.\n\nIn Fantasia Year $8012$ January, Jason officially declared Zeng · Blazer as their only god, and began persecuting Chris believers of Spring · Blazer within Jason.\n\nOn Fantasia Year $8012$ March $2$, the Chris believers in Shenyu Town, a small town in eastern Jason, launched an uprising.\n\nOn Fantasia Year $8012$ March $7$, the uprising in Shenyu Town was brutally suppressed by Jason’s army.\n\nOn Fantasia Year $8012$ March $8$, Chris declared war on Jason. The Chris legions, hundreds of thousands strong, marched to the border between the two countries and faced off against Jason’s legions.\n\nIn Fantasia Year $8012$ April, the Chris legions broke through Jason’s defensive line and entered Shenyu Town, freeing the surviving Chris believers there.\n\nThe war then entered a stalemate and dragged on. The fighting was brutal, with gunfire and smoke everywhere, leaving the people in misery.", "description": "On Fantasia Year $8012$ May $12$ late at night, Spring · Blazer delivered an oracle: “Trust me, earn eternal life.” The morale of the Chris legions soared. As the commander-in-chief of the Chris legions, you decide to seize this opportunity to launch a surprise attack and defeat Jason in one stroke. Specifically, Jason has $N$ cities connected by $M$ directed roads. Shenyu Town is city $1$, and Jason’s capital is city $N$. You only need to destroy the Great Temple of Zeng · Blazer located in the capital of Jason; once it falls, Jason’s faith, army, and everything else will collapse and vanish.\n\nTo minimize your own losses, you decide to use self-destruct robots to accomplish this task. The only difficulty is that some cities in Jason are protected by barriers. You cannot enter a city without first disabling its barrier. Each city’s barrier is maintained by several barrier generators distributed in other cities. If you want to enter a city, you must destroy all the barrier generators that maintain that city’s barrier.\n\nYou have an unlimited number of self-destruct robots. Once a robot enters a city, it can detonate instantly to destroy a single target (either a barrier generator or the Great Temple), and of course the robot itself is also destroyed. You need to find the minimum time required to bring down Jason.\n\nIt is guaranteed that there is always a solution. No barrier generator that maintains a city’s barrier is located inside that very city. There may be multiple roads between the same pair of cities, and self-loops may exist.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThe next $M$ lines each contain three positive integers $u_i, v_i, w_i$, indicating there is a directed road from city $u_i$ to city $v_i$, and a self-destruct robot needs $w_i$ time to traverse this road.\n\nThen follow $N$ lines, each describing one city. Each line starts with a positive integer $l_i$, the number of barrier generators maintaining this city’s barrier, followed by $l_i$ city indices between $1 \\ldots N$ indicating the locations of those generators. If $l_i = 0$, then this city has no barrier. It is guaranteed that $l_1 = 0$.", "outputFormat": "Output a single positive integer: the minimum time required to defeat Jason.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1590.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1591.png)\n\nConstraints:\n- For $20\\%$ of the testdata, $N \\le 15$, $M \\le 50$.\n- For $50\\%$ of the testdata, $N \\le 500$, $M \\le 6 \\times 10^3$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 3 \\times 10^3$, $1 \\le M \\le 7 \\times 10^4$, $1 \\le w_i \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 大陆争霸", "background": "在一个遥远的世界里有两个国家：位于大陆西端的杰森国和位于大陆东端的克里斯国。两个国家的人民分别信仰两个对立的神：杰森国信仰象征黑暗和毁灭的神曾·布拉泽，而克里斯国信仰象征光明和永恒的神斯普林·布拉泽。\n\n幻想历 $8012$ 年 $1$ 月，杰森国正式宣布曾·布拉泽是他们唯一信仰的神，同时开始迫害在杰森国的信仰斯普林·布拉泽的克里斯国教徒。\n\n幻想历 $8012$ 年 $3$ 月 $2$ 日，位于杰森国东部小镇神谕镇的克里斯国教徒发动起义。\n\n幻想历 $8012$ 年 $3$ 月 $7$ 日，神谕镇的起义被杰森国大军以残酷手段镇压。\n\n幻想历 $8012$ 年 $3$ 月 $8$ 日，克里斯国对杰森国宣战。由数十万大军组成的克里斯军团开至两国边境，与杰森军团对峙。\n\n幻想历 $8012$ 年 $4$ 月，克里斯军团攻破杰森军团防线进入神谕镇，该镇幸存的克里斯国教徒得到解放。\n\n战争随后进入胶着状态，旷日持久。战况惨烈，一时间枪林弹雨，硝烟弥漫，民不聊生。", "description": "幻想历 $8012$ 年 $5$ 月 $12$ 日深夜，斯普林·布拉泽降下神谕：“Trust me, earn eternal life.”克里斯军团士气大增。作为克里斯军团的主帅，你决定利用这一机会发动奇袭，一举击败杰森国。具体地说，杰森国有 $N$ 个城市，由 $M$ 条单向道路连接。神谕镇是城市 $1$ 而杰森国的首都是城市 $N$。你只需摧毁位于杰森国首都的曾·布拉泽大神殿，杰森国的信仰，军队还有一切就都会土崩瓦解，灰飞烟灭。\n\n为了尽量减小己方的消耗，你决定使用自爆机器人完成这一任务。唯一的困难是，杰森国的一部分城市有结界保护，不破坏掉结界就无法进入城市。而每个城市的结界都是由分布在其他城市中的一些结界发生器维持的，如果想进入某个城市，你就必须破坏掉维持这个城市结界的所有结界发生器。\n\n现在你有无限多的自爆机器人，一旦进入了某个城市，自爆机器人可以瞬间引爆，破坏一个目标（结界发生器，或是杰森国大神殿），当然机器人本身也会一起被破坏。你需要知道：摧毁杰森国所需的最短时间。\n", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个正整数 $u_i,v_i,w_i$，表示有一条从城市 $u_i$ 到城市 $v_i$ 的单向道路，自爆机器人通过这条道路需要 $w_i$ 的时间。\n\n之后 $N$ 行，每行描述一个城市。首先是一个正整数 $l_i$，维持这个城市结界所使用的结界发生器数目。之后 $l_i$ 个 $1\\ldots N$ 之间的城市编号，表示每个结界发生器的位置。如果 $l_i=0$，则说明该城市没有结界保护，保证 $l_1 = 0$ 。", "outputFormat": "仅包含一个正整数 ，击败杰森国所需的最短时间。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1590.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1591.png)\n\n对于 $20\\%$ 的数据，满足 $N\\leq 15$，$M≤50$；\n\n对于 $50\\%$ 的数据，满足 $N\\leq 500$，$M\\leq 6\\times 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 3\\times 10^3$，$1\\leq M\\leq 7\\times 10^4$，$1\\leq w_i\\leq 10^8$。\n\n输入数据保证一定有解，且不会存在维持某个城市结界的结界发生器在这个城市内部。\n\n连接两个城市的道路可能不止一条，也可能存在一个城市自己到自己的道路。", "locale": "zh-CN"}}}
{"pid": "P2447", "type": "P", "difficulty": 5, "samples": [["3 5\n011 1\n110 1\n101 0\n111 1\n010 1", "4\nEarth\n?y7M#\nEarth"], ["5 7\n01100 1\n11000 1\n10100 0\n11100 1\n00011 1\n00000 0\n11111 0", "Cannot Determine"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2010", "各省省选", "山东", "Special Judge", "高斯消元", "位运算"], "title": "[SDOI2010] 外星千足虫", "background": "", "description": "公元 $2333$ 年 $2$ 月 $3$ 日，在经历了 $17$ 年零 $3$ 个月的漫长旅行后，“格纳格鲁一号”载人火箭返回舱终于安全着陆。此枚火箭由美国国家航空航天局（NASA）研制发射，行经火星、金星、土卫六、木卫二、谷神星、“张衡星”等 $23$ 颗太阳系星球，并最终在小行星“杰森星”探寻到了地外生命。宇航员在“杰森星”地表岩层下 $45.70$ 米位置发现一批珍贵的活体生命样本，并将其带回检测。\n\n在带回的活体样本中，最吸引人的当属这些来自外星的千足虫了。这些虫子身躯纤长，身体分为若干节。受到触碰时，会将身体卷曲成圆环形，间隔一段时间后才会复原活动。\n\n有趣的还不止如此。研究人员发现，这些虫子的足并不像地球千足虫成对出现、总共偶数条——它们每节身体下方都有着不定数量的足，但足的总数一定是奇数条！\n\n虽然从外观难以区分二者，但通过统计足的数目，科学家们就能根据奇偶性判断出千足虫所属的星球。\n\n![](https://cdn.luogu.com.cn/upload/pic/1592.png)\n\n作为 J 国派去 NASA 的秘密间谍，你希望参加这次研究活动以掌握进一步的情报，而 NASA 选拔的研究人员都是最优秀的科学家。于是 NASA 局长 Charles Bolden 出了一道难题来检测你的实力：\n\n现在你面前摆有 $1\\ldots N$ 编号的 $N$ 只千足虫，你的任务是鉴定每只虫子所属的星球，但不允许亲自去数它们的足。\n\nCharles 每次会在这 $N$ 只千足虫中选定若干只放入“昆虫点足机”（the Insect Feet Counter, IFC）中，“点足机”会自动统计出其内所有昆虫足数之和。Charles 会将这个和数 $\\bmod$ $2$ 的结果反馈给你，同时告诉你一开始放入机器中的是哪几只虫子。\n\n他的这种统计操作总共进行 $M$ 次，而你应当尽早得出鉴定结果。\n\n![](https://cdn.luogu.com.cn/upload/pic/1593.png)\n\n假如在第 $K$ 次统计结束后，现有数据就足以确定每只虫子的身份，你就还应将这个 $K$ 反馈给 Charles，此时若 $K<M$，则表明那后 $M-K$ 次统计并非必须的。\n\n如果根据所有 $M$ 次统计数据还是无法确定每只虫子身份，你也要跟 Charles 讲明：就目前数据会存在多个解。", "inputFormat": "第一行是两个正整数 $N,M$。\n\n接下来 $M$ 行，按顺序给出 Charles 这 $M$ 次使用“点足机”的统计结果。每行包含一个 $01$ 串和一个数字，用一个空格隔开。$01$ 串按位依次表示每只虫子是否被放入机器：如果第 $i$ 个字符是 $0$ 则代表编号为 $i$ 的虫子未被放入，$1$ 则代表已被放入。后面跟的数字是统计的昆虫足数 $\\bmod$ $2$ 的结果。\n\n由于 NASA 的实验机器精确无误，保证前后数据不会自相矛盾。即给定数据一定有解。", "outputFormat": "在给定数据存在唯一解时有 $N+1$ 行，第一行输出一个不超过 $M$ 的正整数 $K$，表明在第 $K$ 次统计结束后就可以确定唯一解；接下来N行依次回答每只千足虫的身份，若是奇数条足则输出 `?y7M#`（火星文），偶数条足输出 `Earth`。\n\n如果输入数据存在多解，输出 `Cannot Determine`。", "hint": "### 评分标准\n\n对于每一个测试点，如果你的输出文件与答案文件完全相同，该测试点得满分。\n\n否则，对于存在唯一解的测试点，如果你正确回答所有千足虫的身份，将得到 $50\\%$ 的分数；\n\n其他情况，该测试点得零分。\n\n### 数据规模和约定\n\n对于 $20\\%$ 的数据，满足 $N=M\\leq 20$；\n\n对于 $40\\%$ 的数据，满足 $N=M\\leq 500$；\n\n对于 $70\\%$ 的数据，满足 $N\\leq500$，$M\\leq 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 10^3$，$1\\leq M\\leq 2\\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Alien Millipedes", "background": "", "description": "On February 3, $2333$, after a long journey of $17$ years and $3$ months, the re-entry capsule of the manned rocket “Genagelu-1” finally landed safely. Developed and launched by NASA, this rocket traveled past $23$ bodies in the Solar System, including Mars, Venus, Titan, Europa, Ceres, and “Zhangheng Star,” and eventually discovered extraterrestrial life on the asteroid “Jason Star.” Astronauts found a batch of precious living samples $45.70$ meters below the surface rock layer of “Jason Star” and brought them back for testing.\n\nAmong the living samples, the most fascinating are these alien millipedes. Their bodies are long and divided into segments. When touched, they curl into a ring and take a while before resuming activity.\n\nThere is more. Researchers found that, unlike terrestrial millipedes whose legs appear in pairs with a total even number, these aliens have a variable number of legs under each body segment, but the total number of legs is always odd.\n\nAlthough they are hard to distinguish by appearance, by counting the number of legs, scientists can determine a millipede’s home planet based on parity.\n\nAs a secret agent sent by country J to NASA, you want to join the research to gather more intelligence. However, NASA’s selected researchers are all top scientists. So Charles Bolden, the NASA Administrator, set a challenge to test your ability:\n\nThere are $N$ millipedes numbered $1 \\ldots N$ in front of you. Your task is to determine the home planet of each millipede, but you are not allowed to count their legs directly.\n\nEach time, Charles will select some of the $N$ millipedes and put them into the Insect Feet Counter (IFC). The counter automatically sums the total number of legs inside. Charles will give you the result modulo $2$, and also tell you which millipedes were put into the machine.\n\nHe will perform this operation $M$ times, and you should reach the conclusion as early as possible.\n\nIf, after the $K$-th measurement, the existing data are already sufficient to uniquely determine each millipede’s identity, you should report this $K$ to Charles. If $K<M$, it means the remaining $M-K$ measurements are unnecessary.\n\nIf even after all $M$ measurements the identities cannot be uniquely determined, you must also tell Charles that there are multiple solutions given the current data.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThe next $M$ lines give, in order, the $M$ results from Charles’s use of the counter. Each line contains a $01$ string and a number, separated by a space. The $01$ string indicates, by position, whether each millipede is put into the machine: if the $i$-th character is $0$, millipede $i$ is not put in; if it is $1$, it is put in. The following number is the total number of legs modulo $2$.\n\nSince NASA’s experimental machines are perfectly accurate, the data are guaranteed to be consistent. That is, there is at least one solution.", "outputFormat": "If the given data yield a unique solution, output $N+1$ lines. The first line outputs a positive integer $K$ not exceeding $M$, indicating that after the $K$-th measurement the unique solution is determined. The next $N$ lines output the identity of each millipede in order: output `?y7M#` for an odd number of legs, and `Earth` for an even number of legs.\n\nIf the input data admit multiple solutions, output `Cannot Determine`.", "hint": "Scoring\n\n- For each test point, if your output file exactly matches the answer file, you get full credit for that point.\n- Otherwise, if the solution is unique and you correctly output the identities of all millipedes, you get $50\\%$ of the points for that test point.\n- In all other cases, you get zero for that test point.\n\nConstraints and Conventions\n\n- For $20\\%$ of the test points, $N=M\\leq 20$.\n- For $40\\%$ of the test points, $N=M\\leq 500$.\n- For $70\\%$ of the test points, $N\\leq 500$, $M\\leq 10^3$.\n- For $100\\%$ of the test points, $1\\leq N\\leq 10^3$, $1\\leq M\\leq 2\\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 外星千足虫", "background": "", "description": "公元 $2333$ 年 $2$ 月 $3$ 日，在经历了 $17$ 年零 $3$ 个月的漫长旅行后，“格纳格鲁一号”载人火箭返回舱终于安全着陆。此枚火箭由美国国家航空航天局（NASA）研制发射，行经火星、金星、土卫六、木卫二、谷神星、“张衡星”等 $23$ 颗太阳系星球，并最终在小行星“杰森星”探寻到了地外生命。宇航员在“杰森星”地表岩层下 $45.70$ 米位置发现一批珍贵的活体生命样本，并将其带回检测。\n\n在带回的活体样本中，最吸引人的当属这些来自外星的千足虫了。这些虫子身躯纤长，身体分为若干节。受到触碰时，会将身体卷曲成圆环形，间隔一段时间后才会复原活动。\n\n有趣的还不止如此。研究人员发现，这些虫子的足并不像地球千足虫成对出现、总共偶数条——它们每节身体下方都有着不定数量的足，但足的总数一定是奇数条！\n\n虽然从外观难以区分二者，但通过统计足的数目，科学家们就能根据奇偶性判断出千足虫所属的星球。\n\n![](https://cdn.luogu.com.cn/upload/pic/1592.png)\n\n作为 J 国派去 NASA 的秘密间谍，你希望参加这次研究活动以掌握进一步的情报，而 NASA 选拔的研究人员都是最优秀的科学家。于是 NASA 局长 Charles Bolden 出了一道难题来检测你的实力：\n\n现在你面前摆有 $1\\ldots N$ 编号的 $N$ 只千足虫，你的任务是鉴定每只虫子所属的星球，但不允许亲自去数它们的足。\n\nCharles 每次会在这 $N$ 只千足虫中选定若干只放入“昆虫点足机”（the Insect Feet Counter, IFC）中，“点足机”会自动统计出其内所有昆虫足数之和。Charles 会将这个和数 $\\bmod$ $2$ 的结果反馈给你，同时告诉你一开始放入机器中的是哪几只虫子。\n\n他的这种统计操作总共进行 $M$ 次，而你应当尽早得出鉴定结果。\n\n![](https://cdn.luogu.com.cn/upload/pic/1593.png)\n\n假如在第 $K$ 次统计结束后，现有数据就足以确定每只虫子的身份，你就还应将这个 $K$ 反馈给 Charles，此时若 $K<M$，则表明那后 $M-K$ 次统计并非必须的。\n\n如果根据所有 $M$ 次统计数据还是无法确定每只虫子身份，你也要跟 Charles 讲明：就目前数据会存在多个解。", "inputFormat": "第一行是两个正整数 $N,M$。\n\n接下来 $M$ 行，按顺序给出 Charles 这 $M$ 次使用“点足机”的统计结果。每行包含一个 $01$ 串和一个数字，用一个空格隔开。$01$ 串按位依次表示每只虫子是否被放入机器：如果第 $i$ 个字符是 $0$ 则代表编号为 $i$ 的虫子未被放入，$1$ 则代表已被放入。后面跟的数字是统计的昆虫足数 $\\bmod$ $2$ 的结果。\n\n由于 NASA 的实验机器精确无误，保证前后数据不会自相矛盾。即给定数据一定有解。", "outputFormat": "在给定数据存在唯一解时有 $N+1$ 行，第一行输出一个不超过 $M$ 的正整数 $K$，表明在第 $K$ 次统计结束后就可以确定唯一解；接下来N行依次回答每只千足虫的身份，若是奇数条足则输出 `?y7M#`（火星文），偶数条足输出 `Earth`。\n\n如果输入数据存在多解，输出 `Cannot Determine`。", "hint": "### 评分标准\n\n对于每一个测试点，如果你的输出文件与答案文件完全相同，该测试点得满分。\n\n否则，对于存在唯一解的测试点，如果你正确回答所有千足虫的身份，将得到 $50\\%$ 的分数；\n\n其他情况，该测试点得零分。\n\n### 数据规模和约定\n\n对于 $20\\%$ 的数据，满足 $N=M\\leq 20$；\n\n对于 $40\\%$ 的数据，满足 $N=M\\leq 500$；\n\n对于 $70\\%$ 的数据，满足 $N\\leq500$，$M\\leq 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 10^3$，$1\\leq M\\leq 2\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2448", "type": "P", "difficulty": 5, "samples": [["2\n4 2\n1 4", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "树状数组", "离散化", "洛谷原创", "洛谷月赛"], "title": "无尽的生命", "background": "", "description": "逝者如斯夫，不舍昼夜！\n\n叶良辰认为，他的寿命是无限长的，而且每天都会进步。\n\n叶良辰的生命的第一天，他有 $1$ 点能力值。第二天，有 $2$ 点。第 $n$ 天，就有 $n$ 点。也就是 $S_i=i$。\n\n但是调皮的小A使用时光机，告诉他第 $x$ 天和第 $y$ 天，就可以任意交换某两天的能力值。即 $S_x\\leftrightarrow S_y$。\n\n小A玩啊玩，终于玩腻了。\n\n叶良辰：小A你给我等着，我有 $100$ 种办法让你生不如死。除非能在 $1$ 秒钟之内告知有多少对“异常对”。也就是说，最后的能力值序列，有多少对的两天 $x,y$，其中 $x<y$，但是能力值 $S_x>S_y$？\n\n小A：我好怕怕啊。\n\n于是找到了你。\n", "inputFormat": "第一行一个整数 $k$，表示小A玩了多少次时光机\n\n接下来 $k$ 行，$x_i,y_i$，表示将 $S_{x_i}$ 与 $S_{y_i}$ 进行交换。\n", "outputFormat": "输出共一行，表示有多少“异常对”。", "hint": "样例说明\n\n- 最开始是 $1,2,3,4,5,6\\cdots$\n- 然后是 $1,4,3,2,5,6\\cdots$\n- 然后是 $2,4,3,1,5,6\\cdots$\n\n符合的对是 $(1,4),(2,3),(2,4),(3,4)$。\n\n\n- 对于 $30\\%$  的数据，$x_i,y_i\\le 2\\times 10^3$；\n- 对于 $70\\%$  的数据，$x_i,y_i\\le 10^5$；\n- 对于 $100\\%$ 的数据，$x_i.y_i\\le 2^{31}-1$，$k\\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Endless Life", "background": "", "description": "Time flows on like this, never stopping day or night!\n\nYe Liangchen (叶良辰) believes his lifespan is infinite, and he improves every day.\n\nOn the first day of Ye Liangchen’s life, he has $1$ point of ability. On the second day, he has $2$ points. On day $n$, he has $n$ points. That is, $S_i = i$.\n\nHowever, the mischievous Xiao A (小 A) uses a time machine and tells him that on day $x$ and day $y$, he can arbitrarily swap the ability values of any two days, i.e., $S_x \\leftrightarrow S_y$.\n\nXiao A plays and plays, and finally gets bored.\n\nYe Liangchen: Xiao A, just you wait. I have $100$ ways to make you wish you were dead. Unless you can tell me within $1$ second how many pairs are “abnormal pairs.” That is, in the final ability sequence, how many pairs of days $x, y$ with $x < y$ satisfy $S_x > S_y$?\n\nXiao A: I’m so scared.\n\nSo he comes to you.", "inputFormat": "The first line contains an integer $k$, indicating how many times Xiao A used the time machine.\n\nThe next $k$ lines each contain $x_i, y_i$, meaning $S_{x_i}$ and $S_{y_i}$ are swapped.", "outputFormat": "Output a single line: the number of “abnormal pairs.”", "hint": "Sample explanation\n\n- Initially it is $1,2,3,4,5,6\\cdots$.\n- Then it becomes $1,4,3,2,5,6\\cdots$.\n- Then it becomes $2,4,3,1,5,6\\cdots$.\n\nThe matching pairs are $(1,4)$, $(2,3)$, $(2,4)$, $(3,4)$.\n\nConstraints\n\n- For $30\\%$ of the testdata, $x_i, y_i \\le 2 \\times 10^3$.\n- For $70\\%$ of the testdata, $x_i, y_i \\le 10^5$.\n- For $100\\%$ of the testdata, $x_i, y_i \\le 2^{31} - 1$, $k \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无尽的生命", "background": "", "description": "逝者如斯夫，不舍昼夜！\n\n叶良辰认为，他的寿命是无限长的，而且每天都会进步。\n\n叶良辰的生命的第一天，他有 $1$ 点能力值。第二天，有 $2$ 点。第 $n$ 天，就有 $n$ 点。也就是 $S_i=i$。\n\n但是调皮的小A使用时光机，告诉他第 $x$ 天和第 $y$ 天，就可以任意交换某两天的能力值。即 $S_x\\leftrightarrow S_y$。\n\n小A玩啊玩，终于玩腻了。\n\n叶良辰：小A你给我等着，我有 $100$ 种办法让你生不如死。除非能在 $1$ 秒钟之内告知有多少对“异常对”。也就是说，最后的能力值序列，有多少对的两天 $x,y$，其中 $x<y$，但是能力值 $S_x>S_y$？\n\n小A：我好怕怕啊。\n\n于是找到了你。\n", "inputFormat": "第一行一个整数 $k$，表示小A玩了多少次时光机\n\n接下来 $k$ 行，$x_i,y_i$，表示将 $S_{x_i}$ 与 $S_{y_i}$ 进行交换。\n", "outputFormat": "输出共一行，表示有多少“异常对”。", "hint": "样例说明\n\n- 最开始是 $1,2,3,4,5,6\\cdots$\n- 然后是 $1,4,3,2,5,6\\cdots$\n- 然后是 $2,4,3,1,5,6\\cdots$\n\n符合的对是 $(1,4),(2,3),(2,4),(3,4)$。\n\n\n- 对于 $30\\%$  的数据，$x_i,y_i\\le 2\\times 10^3$；\n- 对于 $70\\%$  的数据，$x_i,y_i\\le 10^5$；\n- 对于 $100\\%$ 的数据，$x_i.y_i\\le 2^{31}-1$，$k\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2449", "type": "P", "difficulty": 3, "samples": [["9\r\n0 3 2 6\r\n4 5 5 7\r\n4 2 6 4\r\n2 0 3 2\r\n5 3 6 4\r\n3 2 5 3\r\n1 4 4 7\r\n0 0 1 4\r\n0 0 4 1\r\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "并查集", "各省省选", "山东"], "title": "[SDOI2005] 矩形", "background": null, "description": "现在我们在一个平面上画了 $n$ 个矩形。每一个矩形的两边都与坐标轴相平行，且矩形定点的坐标均为整数。现我们定义满足如下性质的图形为一个块：\n\n1. 每一个矩形都是一个块；\n\n2. 如果两个块有一段公共的部分，那么这两个块就会形成一个新的块，否则这两个块就是不同的。\n\n示例：\n\n图 $1$ 中的矩形形成了两个不同的块。图 $2$ 中的矩形形成了一个块。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1579.png) \n\n任务：\n\n请写一个程序：\n\n1. 从文本文件 `PRO.IN` 中读入各个矩形的顶点坐标；\n\n2. 找出这些矩形中不同的块的数目；\n\n3. 把结果输出到文本文件 `PRO.OUT` 中。", "inputFormat": "输入的第一行包括一个整数 $n$，$1\\le n\\le 7000$ 为矩形的数目。以下的 $n$ 行为矩形顶点的坐标。每一个矩形都是用四个整数来描述的：左下角的 $x$ 坐标、左下角的 $y$ 坐标、右上角的 $x$ 坐标和右上角的 $y$ 坐标。所有的坐标都是不大于 $10000$ 的非负整数。", "outputFormat": "输出唯一的一个整数——这些矩形所形成的不同的块的数目。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mifmaeko.png)\n\n[图片链接](https://www.desmos.com/calculator/1g1ohcqqex)\n\n橙色加粗的线段表示这里有重合的部分，每一个方形中间的数字表示所属的块的编号。\n\n注意：角重合不算同一个块。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Rectangles", "background": "", "description": "We have drawn $n$ rectangles on a plane. Each rectangle has its sides parallel to the coordinate axes, and all vertex coordinates are integers. We define a shape that satisfies the following properties to be a block:\n\n1. Each rectangle is a block.\n\n2. If two blocks have a segment of overlap, then these two blocks form a new block; otherwise, the two blocks are different.\n\nExample:\n\nIn Figure $1$, the rectangles form two different blocks. In Figure $2$, the rectangles form one block.\n\n ![](https://cdn.luogu.com.cn/upload/pic/1579.png) \n\nTask:\n\nPlease write a program to:\n\n1. Read the vertex coordinates of each rectangle from standard input.\n2. Find the number of different blocks among these rectangles.\n3. Output the result to standard output.", "inputFormat": "The first line contains an integer $n$, where $1\\le n\\le 7000$, the number of rectangles. Each of the next $n$ lines gives the vertex coordinates of a rectangle. Each rectangle is described by four integers: the $x$-coordinate of the lower-left corner, the $y$-coordinate of the lower-left corner, the $x$-coordinate of the upper-right corner, and the $y$-coordinate of the upper-right corner. All coordinates are non-negative integers not greater than $10000$.", "outputFormat": "Output a single integer — the number of different blocks formed by these rectangles.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mifmaeko.png)\n\n[Image link](https://www.desmos.com/calculator/1g1ohcqqex)\n\nThe thick orange segments indicate where overlaps occur. The number in the center of each square denotes the ID of the block it belongs to.\n\nNote: Corner touching does not count as the same block.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 矩形", "background": null, "description": "现在我们在一个平面上画了 $n$ 个矩形。每一个矩形的两边都与坐标轴相平行，且矩形定点的坐标均为整数。现我们定义满足如下性质的图形为一个块：\n\n1. 每一个矩形都是一个块；\n\n2. 如果两个块有一段公共的部分，那么这两个块就会形成一个新的块，否则这两个块就是不同的。\n\n示例：\n\n图 $1$ 中的矩形形成了两个不同的块。图 $2$ 中的矩形形成了一个块。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1579.png) \n\n任务：\n\n请写一个程序：\n\n1. 从文本文件 `PRO.IN` 中读入各个矩形的顶点坐标；\n\n2. 找出这些矩形中不同的块的数目；\n\n3. 把结果输出到文本文件 `PRO.OUT` 中。", "inputFormat": "输入的第一行包括一个整数 $n$，$1\\le n\\le 7000$ 为矩形的数目。以下的 $n$ 行为矩形顶点的坐标。每一个矩形都是用四个整数来描述的：左下角的 $x$ 坐标、左下角的 $y$ 坐标、右上角的 $x$ 坐标和右上角的 $y$ 坐标。所有的坐标都是不大于 $10000$ 的非负整数。", "outputFormat": "输出唯一的一个整数——这些矩形所形成的不同的块的数目。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mifmaeko.png)\n\n[图片链接](https://www.desmos.com/calculator/1g1ohcqqex)\n\n橙色加粗的线段表示这里有重合的部分，每一个方形中间的数字表示所属的块的编号。\n\n注意：角重合不算同一个块。", "locale": "zh-CN"}}}
{"pid": "P2450", "type": "P", "difficulty": 0, "samples": [["-10 10 -10 10\r\n7\r\n-4 -6\r\n-4 0\r\n0 0\r\n-2 4\r\n6 5\r\n4 2\r\n8 0\r\n", "1 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 投递的艺术", "background": "", "description": "YZ住宅小区的未来规划采用了一种新方案：小区由白色的木栅栏围成，栅栏的形状将被设计为一个任意多边形，而每户的住宅就位于多边形的顶点处，多边形的内部则将建成一个优雅怡人的小区公园。\n\n这个方案却给负责小区送报任务的投递员带来了一些麻烦，因为他希望坚持自己的送报习惯：他喜欢骑在自己的自行车上沿着一个标准的圆形路线投送报纸，每当看到自己的右手方向有一户住宅时，他就会将报纸投过去，而且最令他骄傲的是，无论距离远近，他投出的报纸总是准确地落在住户的门前。他的这种极具艺术感的服务方式也正是住户们最感欣赏的地方。\n\n但遗憾的是，他分辨不出每户住宅之间的区别，也记不住每家订了哪些报纸，邮局按照住宅在多边形上的次序把每户的报纸交给他，他就按照这种次序把每户的报纸投送出去。所以图一中的方案是不成立的，因为住户3拿到的总是住户2的报纸，而住户2拿到的报纸却是住户3的。图二中画出了两种可行的方案。\n\n你的任务就是找出所有满足上述要求的投递路线的圆心（这些圆心的坐标应当是整数）。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1580.png) \n\n![](https://cdn.luogu.com.cn/upload/pic/1581.png)\n", "inputFormat": "输入文件名为Polygon.in。文件第1行是4个整数Xmin、Xmax、Ymin、Ymax，表示圆心坐标的范围，第2行是一个正整数n(n100)，表示多边形的顶点数，从第3行至第n+2行是每个顶点的坐标(x,y)，所有坐标值均为整数，坐标的绝对值不大于1000，顶点按顺时针排序。\n", "outputFormat": "输出文件名为Polygon.out。文件中共m行（m为你求出的圆心的个数），每行两个整数(x,y)，表示圆心的坐标，坐标应按y递增的次序输出，如果y相等的，应按x递增的次序。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1582.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] The Art of Delivery", "background": "", "description": "The future plan of the YZ residential community adopts a new scheme: the community will be enclosed by a white wooden fence whose shape is designed as an arbitrary polygon. Each household is located at a vertex of the polygon, while the interior of the polygon will be built into an elegant and pleasant community park.\n\nThis plan, however, causes some trouble for the deliveryman responsible for delivering newspapers to the community, because he insists on his delivery habit: he likes to ride his bicycle along a perfect circular route to deliver newspapers. Whenever he sees a household on his right-hand side, he throws a newspaper to it, and what makes him proud is that, regardless of distance, his throw always lands exactly at the household’s doorstep. This artistic service is precisely what the residents appreciate most.\n\nUnfortunately, he cannot tell households apart and cannot remember which newspapers each family subscribes to. The post office hands him the newspapers in the order of the residences along the polygon, and he delivers them in that same order. Therefore, the plan in Figure 1 is invalid, because resident 3 always receives resident 2’s newspaper, while resident 2 receives resident 3’s newspaper. Figure 2 shows two feasible plans.\n\nYour task is to find all centers of circular routes that satisfy the above requirements (these centers must have integer coordinates).\n\n ![](https://cdn.luogu.com.cn/upload/pic/1580.png) \n\n![](https://cdn.luogu.com.cn/upload/pic/1581.png)", "inputFormat": "- The first line contains four integers Xmin, Xmax, Ymin, Ymax, specifying the search range for the circle center coordinates.\n- The second line contains a positive integer $n$ ($n \\le 100$), the number of vertices of the polygon.\n- The next $n$ lines (lines 3 to $n+2$) each contain two integers $x$ and $y$, the coordinates of a vertex. All coordinates are integers with absolute value at most $1000$. The vertices are given in clockwise order.", "outputFormat": "Output $m$ lines, where $m$ is the number of centers you find. Each line contains two integers $x$ and $y$, representing a circle center. The centers must be output in order of increasing $y$; if $y$ is the same, order by increasing $x$.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1582.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 投递的艺术", "background": "", "description": "YZ住宅小区的未来规划采用了一种新方案：小区由白色的木栅栏围成，栅栏的形状将被设计为一个任意多边形，而每户的住宅就位于多边形的顶点处，多边形的内部则将建成一个优雅怡人的小区公园。\n\n这个方案却给负责小区送报任务的投递员带来了一些麻烦，因为他希望坚持自己的送报习惯：他喜欢骑在自己的自行车上沿着一个标准的圆形路线投送报纸，每当看到自己的右手方向有一户住宅时，他就会将报纸投过去，而且最令他骄傲的是，无论距离远近，他投出的报纸总是准确地落在住户的门前。他的这种极具艺术感的服务方式也正是住户们最感欣赏的地方。\n\n但遗憾的是，他分辨不出每户住宅之间的区别，也记不住每家订了哪些报纸，邮局按照住宅在多边形上的次序把每户的报纸交给他，他就按照这种次序把每户的报纸投送出去。所以图一中的方案是不成立的，因为住户3拿到的总是住户2的报纸，而住户2拿到的报纸却是住户3的。图二中画出了两种可行的方案。\n\n你的任务就是找出所有满足上述要求的投递路线的圆心（这些圆心的坐标应当是整数）。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1580.png) \n\n![](https://cdn.luogu.com.cn/upload/pic/1581.png)\n", "inputFormat": "输入文件名为Polygon.in。文件第1行是4个整数Xmin、Xmax、Ymin、Ymax，表示圆心坐标的范围，第2行是一个正整数n(n100)，表示多边形的顶点数，从第3行至第n+2行是每个顶点的坐标(x,y)，所有坐标值均为整数，坐标的绝对值不大于1000，顶点按顺时针排序。\n", "outputFormat": "输出文件名为Polygon.out。文件中共m行（m为你求出的圆心的个数），每行两个整数(x,y)，表示圆心的坐标，坐标应按y递增的次序输出，如果y相等的，应按x递增的次序。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1582.png)\n", "locale": "zh-CN"}}}
{"pid": "P2451", "type": "P", "difficulty": 5, "samples": [["12\r\n2 3\r\n3 9\r\n9 6\r\n8 5\r\n5 7\r\n7 6\r\n4 5\r\n5 1\r\n1 4\r\n4 2\r\n2 8\r\n8 6\r\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 遗传代码", "background": "", "description": "抽象的 primitivus（Primitivus 循环）的遗传代码是一系列自然数 $K=(A_1,A_2,\\cdots,A_n)$。我们所说的 primitivus 的特征是一个数对 $(l,r)$，表示 $l,r$ 在 $A$ 中**连续出现**。即存在一个 $i$，使得 $A_i=l$，$A_{i+1}=r$。在 primitivus 的遗传代码中没有 $(p,p)$ 特征。\n\n### 任务\n\n写一个程序：\n\n1. 从文本文件读特征列表；\n2. 计算所给特征的最短遗传代码长度；\n3. 输出答案。\n", "inputFormat": "第一行有一个正整数 $n$，它是 primitivus 的不同特征的数量。\n\n接下来 $n$ 行，每一行中有两个被空格号隔开的数字 $l$ 和 $r$。数字对 $(l,r)$ 是 primitivus 的一个特征。在输入文件中，特征并不重复。\n", "outputFormat": "共一行一个整数，为 primitivus 最短遗传代码的长度。\n", "hint": "### 样例解释\n\n以下是一种符合题意的最短的遗传代码。它符合输入数据中给出的所有的特征：\n\n$(8, 5, 1, 4, 2, 3, 9, 6, 4, 5, 7, 6, 2, 8, 6) $\n\n### 数据范围及约定\n\n对于全部数据，满足 $0 \\le l \\le 1000$，$0 \\le  r \\le  1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Genetic Code", "background": "", "description": "The abstract genetic code of a primitivus (Primitivus loop) is a sequence of natural numbers $K=(A_1,A_2,\\cdots,A_n)$. A feature of a primitivus is an ordered pair $(l,r)$, meaning that $l, r$ **appear consecutively** in $A$. That is, there exists an $i$ such that $A_i=l$, $A_{i+1}=r$. In the genetic code of a primitivus, there is no $(p,p)$ feature.\n\nTask\n\nWrite a program to:\n1. Read the list of features from a text file.\n2. Compute the length of the shortest genetic code that contains all the given features.\n3. Output the answer.", "inputFormat": "The first line contains a positive integer $n$, which is the number of distinct features of the primitivus.\n\nThen follow $n$ lines. Each line contains two numbers $l$ and $r$ separated by a space. The pair $(l,r)$ is a feature of the primitivus. In the input file, features do not repeat.", "outputFormat": "Output a single line containing one integer, which is the length of the shortest genetic code of the primitivus.", "hint": "Sample Explanation\n\nOne shortest genetic code that satisfies all the features given in the input is:\n$(8, 5, 1, 4, 2, 3, 9, 6, 4, 5, 7, 6, 2, 8, 6)$.\n\nConstraints\n\nFor all data, $0 \\le l \\le 1000$, $0 \\le  r \\le  1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 遗传代码", "background": "", "description": "抽象的 primitivus（Primitivus 循环）的遗传代码是一系列自然数 $K=(A_1,A_2,\\cdots,A_n)$。我们所说的 primitivus 的特征是一个数对 $(l,r)$，表示 $l,r$ 在 $A$ 中**连续出现**。即存在一个 $i$，使得 $A_i=l$，$A_{i+1}=r$。在 primitivus 的遗传代码中没有 $(p,p)$ 特征。\n\n### 任务\n\n写一个程序：\n\n1. 从文本文件读特征列表；\n2. 计算所给特征的最短遗传代码长度；\n3. 输出答案。\n", "inputFormat": "第一行有一个正整数 $n$，它是 primitivus 的不同特征的数量。\n\n接下来 $n$ 行，每一行中有两个被空格号隔开的数字 $l$ 和 $r$。数字对 $(l,r)$ 是 primitivus 的一个特征。在输入文件中，特征并不重复。\n", "outputFormat": "共一行一个整数，为 primitivus 最短遗传代码的长度。\n", "hint": "### 样例解释\n\n以下是一种符合题意的最短的遗传代码。它符合输入数据中给出的所有的特征：\n\n$(8, 5, 1, 4, 2, 3, 9, 6, 4, 5, 7, 6, 2, 8, 6) $\n\n### 数据范围及约定\n\n对于全部数据，满足 $0 \\le l \\le 1000$，$0 \\le  r \\le  1000$。", "locale": "zh-CN"}}}
{"pid": "P2452", "type": "P", "difficulty": 7, "samples": [["0 0 10 30 40\r\n1\r\n10 10 10\r\n", "57.93"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 屠龙传说-屠龙枪卷", "background": "", "description": "先知看到修玛取回的药草，满意地点了点头。\n\n他对修玛说：“跟我来”。\n\n修玛顺从地跟着先知走到了他的房间里。先知的房间很大，四周满是书架，整整齐齐地摆放着一排排书籍。房间中间的圆桌上摆放着一个巨大的水晶球，它发出的荧光照亮了整个房间。\n\n先知走到一排书架前，从中抽出一本薄薄的书来。这本书看起来十分古老，纸张都变成了黄色，有的地方已经发黑。修玛想，这本书的历史大概有好几百年了吧。\n\n先知示意修玛坐下，他翻开手中的书，对修玛说道：“我已经研究这本书很久了。它是用一种古老的文字写成的，记载了一个十分古老的传说。书中提到，普通的武器是无法伤害巨龙的，只有诸神合力锻造的屠龙枪才能消灭它。为了防止屠龙枪被滥用，神把它封印在卡基思山上，只有拥有超人的勇气、力量和智慧的人才能解开这个封印。千百年来，很多人都想得到屠龙枪的力量，然而从没有人成功过。我查阅了所有有关屠龙枪的记载，悉心地研究那些资料，得知屠龙枪被封印在山顶的神殿中，而要解开这道封印，就必须把神殿中的一块巨大的圆石推到神殿祭坛的中心，然后念出解开封印的咒语。”\n\n修玛问道：“那句咒语应该已经失传了吧？”“不，恰恰相反。”先知说，“这句咒语一直记载在这本书中，并被完好地保存下来。”“那么，剩下的只是把圆石推到祭坛的中心了。”修玛自信地笑了。然而先知却摇了摇头，“不，修玛，事情没有你想象的那么简单。爬上卡基思山就不是一件容易的事。它高耸入云，四周都是光秃秃的石壁，几乎没有落脚的地方。只有真正的勇士才能爬得上去。那块圆石也不是那么容易就能推动的，非得有超常的力量不可。这些东西，修玛你都有。但如果仅仅只有这些，那么屠龙枪早已被人拿到手了。书中不是说了么，要有勇气、力量和智慧。智慧才是真正的关键。如果在固定时间内不能把那块圆石推到祭坛的中心，那么圆石便会自动滚回原处，同时推石的人将永远无法再次推动这块圆石。而且不管你用多大力气推，这块圆石都不可能滚动得像你希望的那样快，我估计只有按照最短路线去推这块圆石，才能在固定时间内把它推到祭坛中心。神殿中又有着大大小小的石柱，有些石柱与石柱之间的空隙很小，根本就推不过去。正因为这种种困难，才没有人能够从神殿中取走屠龙枪。”\n\n修玛沉默了一会儿，说：“不管如何，我也要去试一试。如果我不能拿到屠龙枪，就没有人能够拿到它了。”\n\n先知点了点头，说：“去吧，修玛。记住，用你的智慧。”\n\n修玛骑马奔驰了十天十夜，终于来到了卡基思山脚下。正如先知所说的那样，这座山根本就没有路可以上去，甚至找不到可以落脚的地方。然而修玛凭着他的勇气以及熟练的技巧，爬上了山顶。\n\n当他走进神殿，一眼就看到了那块巨大的圆石。修玛该怎么做，才能把圆石推到祭坛的中心呢？\n\n### 任务\n\n你的任务是计算出把圆石推到祭坛中心的最短路线长度。\n\n所谓推到祭坛中心是指圆石的中心与祭坛中心重合。\n\n圆石中心的初始位置以及祭坛中心的位置是已知的。圆石半径为 $R$，它可以朝着任意方向滚动。洞中所有石柱均为正四棱柱，大小不一。\n\n在推动圆石的过程中，要求圆石中心与所有石柱的距离均不小于 $R$，否则圆石将被石柱阻挡而不能继续滚动。", "inputFormat": "第一行包含了五个实数，依次表示圆石中心的初始位置的 $x$ 坐标、$y$ 坐标、圆石半径 $R$、祭坛中心的位置 $(x,y)$。\n\n第二行包含一个整数 $n$，表示神殿中石柱的数目。\n\n接下来 $n$ 行，每行包含三个实数 $(x_i,y_i,r_i)$，给出了一根石柱的信息，依次表示第 $i$ 根石柱左下角 $x$ 坐标、$y$ 坐标以及该石柱的边长。\n\n数据输入所有实数均精确到 $2$ 位小数，范围在 $0$ 到 $1000$ 之内。\n", "outputFormat": "输出仅包含一个实数，表示把圆石推到祭坛中心的最短路线长度，输出结果保留到两位小数。\n\n若不存在一条把圆石推到祭坛中心的路，输出 `0.00`。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $0\\le n\\le 20$。\n\n---\n\n修玛思索良久，果断地走到圆石旁边，用力推动这块巨石。圆石在修玛的推动下，缓缓地滚动起来。修玛时不时地调整着推动的角度，以使巨石朝着自己希望的方向滚动。终于，“卡嗒”的一声，圆石安安稳稳地滚到了祭坛的中心。一束光从神殿顶上直射而下，笼罩了整个祭坛。修玛对着祭坛，大声地念出了解开封印的咒语。顿时，祭坛开始颤动，中间的圆石也随着摇摆不定。突然间，整块圆石完全爆裂开来，在祭坛的中心，出现了一柄长枪。枪身上闪烁着神圣的光芒，令人惊羡不已。修玛走上前去，拔起了这柄枪。他感到一股强大的力量从手上传了过来。修玛随手把枪一挥，只听得“哗啦”一声，一根巨大的石柱应声四分五裂了。修玛又惊又喜，他知道这一定就是屠龙枪。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Dragon-Slaying Legend - Dragon-Slaying Spear Scroll", "background": "", "description": "The seer saw the herbs Xiuma had retrieved and nodded with satisfaction.\n\nHe said to Xiuma, \"Come with me.\"\n\nXiuma obediently followed the seer into his room. The seer’s room was very large, with bookshelves on all sides, neatly lined with rows of books. In the center of the room, on a round table, stood a huge crystal ball, whose glow illuminated the entire chamber.\n\nThe seer walked to a row of shelves and pulled out a thin book. It looked extremely old; the pages had turned yellow, and some parts were blackened. Xiuma thought, this book must be several hundred years old.\n\nThe seer motioned for Xiuma to sit. He opened the book in his hand and said, \"I have studied this book for a long time. It is written in an ancient script and records a very old legend. The book says that ordinary weapons cannot harm a dragon; only the Dragon-Slaying Spear forged by the gods together can destroy it. To prevent its abuse, the gods sealed the spear on Mount Kakisi. Only those with extraordinary courage, strength, and wisdom can break this seal. For hundreds of years, many tried to obtain the spear’s power, but none succeeded. I checked all records about the spear and carefully studied them. I learned that the spear is sealed in a temple on the mountaintop. To break the seal, one must push a huge round stone in the temple to the center of the altar and then chant the incantation that unlocks the seal.\"\n\nXiuma asked, \"That incantation must have been lost, right?\" \"No, quite the opposite,\" the seer said. \"The incantation has always been recorded in this book and has been preserved intact.\" \"Then all that remains is to push the round stone to the center of the altar,\" Xiuma smiled confidently. But the seer shook his head. \"No, Xiuma, things are not as simple as you think. Climbing Mount Kakisi is not easy. It towers into the clouds, with bare rock walls all around and almost nowhere to set foot. Only a true warrior can climb it. That round stone is not easy to move either; it takes extraordinary strength. These things, Xiuma, you have. But if that were enough, someone would have already taken the spear. The book says one needs courage, strength, and wisdom. Wisdom is the real key. If you cannot push the round stone to the center of the altar within a fixed time, the stone will automatically roll back, and the person who pushed it will never be able to move it again. And no matter how hard you push, the stone cannot roll as fast as you might wish. I estimate that only by following the shortest route can you push the stone to the center within the time limit. The temple is filled with pillars of various sizes. Some gaps between pillars are narrow, and the stone simply cannot be pushed through. Because of all these difficulties, no one has been able to take the Dragon-Slaying Spear from the temple.\"\n\nXiuma fell silent for a moment. \"No matter what, I will try. If I cannot get the spear, then no one will.\"\n\nThe seer nodded. \"Go, Xiuma. Remember, use your wisdom.\"\n\nXiuma rode for ten days and nights and finally reached the foot of Mount Kakisi. Just as the seer had said, there was no path up the mountain, and it was hard to find a foothold. Yet relying on his courage and skill, Xiuma climbed to the summit.\n\nWhen he entered the temple, he immediately saw the huge round stone. What should Xiuma do to push the stone to the center of the altar?\n\n### Task\n\nYour task is to compute the length of the shortest route along which the round stone can be pushed to the center of the altar.\n\nPushing it to the altar’s center means the center of the round stone coincides with the center of the altar.\n\nThe initial position of the stone’s center and the altar’s center are given. The stone has radius $R$ and can roll in any direction. All pillars in the temple are right square prisms of various sizes.\n\nWhile pushing the stone, the distance from the stone’s center to every pillar must be at least $R$; otherwise, the stone will be blocked and cannot continue to roll.", "inputFormat": "The first line contains five real numbers, which are the $x$ and $y$ coordinates of the initial position of the stone’s center, the radius $R$ of the stone, and the coordinates $(x, y)$ of the altar’s center.\n\nThe second line contains an integer $n$, the number of pillars in the temple.\n\nEach of the next $n$ lines contains three real numbers $(x_i, y_i, r_i)$, describing one pillar: the $x$ and $y$ coordinates of the lower-left corner of the $i$-th pillar and the side length of that pillar.\n\nAll real numbers in the input are given with precision to $2$ decimal places and are within $0$ to $1000$ inclusive.", "outputFormat": "Output a single real number, the length of the shortest route needed to push the stone to the center of the altar, rounded to two decimal places.\n\nIf there is no route to push the stone to the altar’s center, output `0.00`.", "hint": "### Constraints and Conventions\n\nFor all testdata, $0 \\le n \\le 20$.\n\n---\n\nXiuma pondered for a long time, then decisively walked to the round stone and pushed hard. Under his effort, the stone slowly rolled forward. From time to time, Xiuma adjusted the pushing direction so the stone would roll as he intended. At last, with a click, the stone settled steadily at the center of the altar. A beam of light shot down from the temple roof and enveloped the entire altar. Xiuma loudly recited the incantation that broke the seal. Instantly, the altar began to tremble, and the round stone in the middle swayed. Suddenly, the entire stone shattered completely. At the center of the altar appeared a spear. The shaft shimmered with a holy light, drawing awe and admiration. Xiuma stepped forward and drew the spear. He felt a surge of great power pass into his hands. With a casual sweep of the spear, there was a loud crash, and a huge stone pillar split into four pieces. Amazed and delighted, Xiuma knew this must be the Dragon-Slaying Spear.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 屠龙传说-屠龙枪卷", "background": "", "description": "先知看到修玛取回的药草，满意地点了点头。\n\n他对修玛说：“跟我来”。\n\n修玛顺从地跟着先知走到了他的房间里。先知的房间很大，四周满是书架，整整齐齐地摆放着一排排书籍。房间中间的圆桌上摆放着一个巨大的水晶球，它发出的荧光照亮了整个房间。\n\n先知走到一排书架前，从中抽出一本薄薄的书来。这本书看起来十分古老，纸张都变成了黄色，有的地方已经发黑。修玛想，这本书的历史大概有好几百年了吧。\n\n先知示意修玛坐下，他翻开手中的书，对修玛说道：“我已经研究这本书很久了。它是用一种古老的文字写成的，记载了一个十分古老的传说。书中提到，普通的武器是无法伤害巨龙的，只有诸神合力锻造的屠龙枪才能消灭它。为了防止屠龙枪被滥用，神把它封印在卡基思山上，只有拥有超人的勇气、力量和智慧的人才能解开这个封印。千百年来，很多人都想得到屠龙枪的力量，然而从没有人成功过。我查阅了所有有关屠龙枪的记载，悉心地研究那些资料，得知屠龙枪被封印在山顶的神殿中，而要解开这道封印，就必须把神殿中的一块巨大的圆石推到神殿祭坛的中心，然后念出解开封印的咒语。”\n\n修玛问道：“那句咒语应该已经失传了吧？”“不，恰恰相反。”先知说，“这句咒语一直记载在这本书中，并被完好地保存下来。”“那么，剩下的只是把圆石推到祭坛的中心了。”修玛自信地笑了。然而先知却摇了摇头，“不，修玛，事情没有你想象的那么简单。爬上卡基思山就不是一件容易的事。它高耸入云，四周都是光秃秃的石壁，几乎没有落脚的地方。只有真正的勇士才能爬得上去。那块圆石也不是那么容易就能推动的，非得有超常的力量不可。这些东西，修玛你都有。但如果仅仅只有这些，那么屠龙枪早已被人拿到手了。书中不是说了么，要有勇气、力量和智慧。智慧才是真正的关键。如果在固定时间内不能把那块圆石推到祭坛的中心，那么圆石便会自动滚回原处，同时推石的人将永远无法再次推动这块圆石。而且不管你用多大力气推，这块圆石都不可能滚动得像你希望的那样快，我估计只有按照最短路线去推这块圆石，才能在固定时间内把它推到祭坛中心。神殿中又有着大大小小的石柱，有些石柱与石柱之间的空隙很小，根本就推不过去。正因为这种种困难，才没有人能够从神殿中取走屠龙枪。”\n\n修玛沉默了一会儿，说：“不管如何，我也要去试一试。如果我不能拿到屠龙枪，就没有人能够拿到它了。”\n\n先知点了点头，说：“去吧，修玛。记住，用你的智慧。”\n\n修玛骑马奔驰了十天十夜，终于来到了卡基思山脚下。正如先知所说的那样，这座山根本就没有路可以上去，甚至找不到可以落脚的地方。然而修玛凭着他的勇气以及熟练的技巧，爬上了山顶。\n\n当他走进神殿，一眼就看到了那块巨大的圆石。修玛该怎么做，才能把圆石推到祭坛的中心呢？\n\n### 任务\n\n你的任务是计算出把圆石推到祭坛中心的最短路线长度。\n\n所谓推到祭坛中心是指圆石的中心与祭坛中心重合。\n\n圆石中心的初始位置以及祭坛中心的位置是已知的。圆石半径为 $R$，它可以朝着任意方向滚动。洞中所有石柱均为正四棱柱，大小不一。\n\n在推动圆石的过程中，要求圆石中心与所有石柱的距离均不小于 $R$，否则圆石将被石柱阻挡而不能继续滚动。", "inputFormat": "第一行包含了五个实数，依次表示圆石中心的初始位置的 $x$ 坐标、$y$ 坐标、圆石半径 $R$、祭坛中心的位置 $(x,y)$。\n\n第二行包含一个整数 $n$，表示神殿中石柱的数目。\n\n接下来 $n$ 行，每行包含三个实数 $(x_i,y_i,r_i)$，给出了一根石柱的信息，依次表示第 $i$ 根石柱左下角 $x$ 坐标、$y$ 坐标以及该石柱的边长。\n\n数据输入所有实数均精确到 $2$ 位小数，范围在 $0$ 到 $1000$ 之内。\n", "outputFormat": "输出仅包含一个实数，表示把圆石推到祭坛中心的最短路线长度，输出结果保留到两位小数。\n\n若不存在一条把圆石推到祭坛中心的路，输出 `0.00`。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $0\\le n\\le 20$。\n\n---\n\n修玛思索良久，果断地走到圆石旁边，用力推动这块巨石。圆石在修玛的推动下，缓缓地滚动起来。修玛时不时地调整着推动的角度，以使巨石朝着自己希望的方向滚动。终于，“卡嗒”的一声，圆石安安稳稳地滚到了祭坛的中心。一束光从神殿顶上直射而下，笼罩了整个祭坛。修玛对着祭坛，大声地念出了解开封印的咒语。顿时，祭坛开始颤动，中间的圆石也随着摇摆不定。突然间，整块圆石完全爆裂开来，在祭坛的中心，出现了一柄长枪。枪身上闪烁着神圣的光芒，令人惊羡不已。修玛走上前去，拔起了这柄枪。他感到一股强大的力量从手上传了过来。修玛随手把枪一挥，只听得“哗啦”一声，一根巨大的石柱应声四分五裂了。修玛又惊又喜，他知道这一定就是屠龙枪。\n", "locale": "zh-CN"}}}
{"pid": "P2453", "type": "P", "difficulty": 5, "samples": [["algorithm\r\naltruistic\r\n3 6 5 4 4", "48"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2006", "各省省选", "山东"], "title": "[SDOI2006] 最短距离", "background": "", "description": "一种 EDIT 字母编辑器，它的功能是可以通过不同的变换操作可以把一个源串 $X[l\\cdots m]$ 变换为新的目标串 $Y[1\\cdots n]$。EDIT 提供的变换操作有：\n\n- 删除源串首个字符（delete）；\n- 替换源串首个字符放到目标串末尾（replace）。replace 操作可以替换为与原来相同的字符；\n- 移动源串首个字符放到目标串末尾（copy）；\n- 向目标串插入单个字符（insert）；\n- 交换源串中的开头两个字符，并移动到目标串末尾中去（twiddle）；\n- 在完成其它所有操作之后，源串中余下的全部后缀就可用删至行末的操作删除（kill）。\n\n例如，将源 `algorithm` 转换成目标串 `altruistic` 的一种方法是采取下面的操作序列：\n\n| 操作 | 目标串 | 原串 |\n| :----------: | :----------: | :----------: |\n| 初始 | （空） | `algorithm` |\n| `copy a` | `a` | `lgorithm` |\n| `copy l` | `al` | `gorithm` |\n| `replace g to t` | `alt` | `orithm` |\n| `delete o` | `alt` | `rithm` |\n| `copy r` | `altr` | `ithm` |\n| `insert u` | `altru` | `ithm` |\n| `insert i` | `altrui` | `ithm` |\n| `insert s` | `altruis` | `ithm` |\n| `twiddle it into ti` | `altruisti` | `hm` |\n| `replace h to c` | `altruistic` | `m` |\n| `kill` | `altruistic` | （空） |\n\n\n\n要达到这个结果还可能有其它一些操作序列。\n\n操作 delete、replace、copy、insert、twiddle 和kill中每一个都有一个相联系的代价 cost。例如：\n\n```plain\ncost(delete) =3;\ncost(replace)=6;\ncost(copy)   =5;\ncost(insert) =4;\ncost(twiddle)=4;\ncost(kill) = 被删除的串长 * cost(delete) - 1;\n```\n\n一个给定的操作序列的代价为序列中各操作代价之和。\n例如上述操作序列的代价为\n\n$$\\begin{aligned}&3\\times \\mathrm{cost}(\\mathtt{copy})+2\\times \\mathrm{cost}(\\mathtt{replace})+\\mathrm{cost}(\\mathtt{delete})+3\\times \\mathrm{cost}(\\mathtt{insert}) \\\\ &+\\mathrm{cost}(\\mathtt{twiddle}) +\\mathrm{cost}(\\mathtt{kill}) \\\\\n=\\ & 3\\times 5+2\\times 6+3+3\\times 4+4+1\\times 3-1\\\\\n=\\ &48\\end{aligned}$$\n\n**编程任务**\n\n给定两个序列 $X[1\\cdots m],Y[1\\cdots n]$ 和一些操作代价集合，$X$ 到 $Y$ 的最短距离为将 $X$ 转化为 $Y$ 的最小的转换序列的代价。请给出一个算法来找出 $X[1\\cdots m]$ 至 $Y[1\\cdots n]$ 的最短距离。\n", "inputFormat": "第一行：源序列 $X[1\\cdots m]$。\n\n第二行：目标序列 $Y[1\\cdots n]$。\n\n第三行：$5$ 个正整数，分别是：delete、replace、copy、insert、twiddle 的代价。\n", "outputFormat": "一行一个整数，表示 $X$ 到 $Y$ 的最短距离（最小代价和）。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $1\\le n,m\\le 200$，且所有代价均为不大于 $100$ 的非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Shortest Distance", "background": "", "description": "An EDIT string editor can transform a source string $X[1\\cdots m]$ into a new target string $Y[1\\cdots n]$ via different operations. EDIT provides the following operations:\n\n- delete: delete the first character of the source string.\n- replace: replace the first character of the source string and append it to the end of the target string. The replace operation may replace it with the same character as the original.\n- copy: move the first character of the source string to the end of the target string.\n- insert: insert a single character into the target string.\n- twiddle: swap the first two adjacent characters of the source string, and move them to the end of the target string.\n- kill: after finishing all other operations, the remaining suffix of the source string can be deleted by a delete-to-end operation.\n\nFor example, one way to transform the source `algorithm` into the target string `altruistic` is to perform the following sequence of operations:\n\n| Operation | Target string | Source string |\n| :----------: | :----------: | :----------: |\n| Initial | (empty) | `algorithm` |\n| `copy a` | `a` | `lgorithm` |\n| `copy l` | `al` | `gorithm` |\n| `replace g to t` | `alt` | `orithm` |\n| `delete o` | `alt` | `rithm` |\n| `copy r` | `altr` | `ithm` |\n| `insert u` | `altru` | `ithm` |\n| `insert i` | `altrui` | `ithm` |\n| `insert s` | `altruis` | `ithm` |\n| `twiddle it into ti` | `altruisti` | `hm` |\n| `replace h to c` | `altruistic` | `m` |\n| `kill` | `altruistic` | (empty) |\n\nThere may be other operation sequences that achieve this result as well.\n\nEach of the operations delete, replace, copy, insert, twiddle, and kill has an associated cost. For example:\n\n```plain\ncost(delete) =3;\ncost(replace)=6;\ncost(copy)   =5;\ncost(insert) =4;\ncost(twiddle)=4;\ncost(kill) = 被删除的串长 * cost(delete) - 1;\n```\n\nThe cost of a given operation sequence is the sum of the costs of the operations in the sequence. For example, the cost of the above sequence is\n\n$$\\begin{aligned}&3\\times \\mathrm{cost}(\\mathtt{copy})+2\\times \\mathrm{cost}(\\mathtt{replace})+\\mathrm{cost}(\\mathtt{delete})+3\\times \\mathrm{cost}(\\mathtt{insert}) \\\\ &+\\mathrm{cost}(\\mathtt{twiddle}) +\\mathrm{cost}(\\mathtt{kill}) \\\\\n=\\ & 3\\times 5+2\\times 6+3+3\\times 4+4+1\\times 3-1\\\\\n=\\ &48\\end{aligned}$$\n\nProgramming Task\n\nGiven two sequences $X[1\\cdots m], Y[1\\cdots n]$ and a set of operation costs, the shortest distance from $X$ to $Y$ is the minimum cost of a sequence of operations that transforms $X$ into $Y$. Please give an algorithm to find the shortest distance from $X[1\\cdots m]$ to $Y[1\\cdots n]$.", "inputFormat": "The first line: the source sequence $X[1\\cdots m]$.\n\nThe second line: the target sequence $Y[1\\cdots n]$.\n\nThe third line: $5$ positive integers, which are the costs of delete, replace, copy, insert, and twiddle, in this order.", "outputFormat": "Output a single integer in one line, representing the shortest distance (minimum total cost) from $X$ to $Y$.", "hint": "Constraints\n\nFor all testdata, $1 \\le n, m \\le 200$, and all costs are nonnegative integers no greater than $100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 最短距离", "background": "", "description": "一种 EDIT 字母编辑器，它的功能是可以通过不同的变换操作可以把一个源串 $X[l\\cdots m]$ 变换为新的目标串 $Y[1\\cdots n]$。EDIT 提供的变换操作有：\n\n- 删除源串首个字符（delete）；\n- 替换源串首个字符放到目标串末尾（replace）。replace 操作可以替换为与原来相同的字符；\n- 移动源串首个字符放到目标串末尾（copy）；\n- 向目标串插入单个字符（insert）；\n- 交换源串中的开头两个字符，并移动到目标串末尾中去（twiddle）；\n- 在完成其它所有操作之后，源串中余下的全部后缀就可用删至行末的操作删除（kill）。\n\n例如，将源 `algorithm` 转换成目标串 `altruistic` 的一种方法是采取下面的操作序列：\n\n| 操作 | 目标串 | 原串 |\n| :----------: | :----------: | :----------: |\n| 初始 | （空） | `algorithm` |\n| `copy a` | `a` | `lgorithm` |\n| `copy l` | `al` | `gorithm` |\n| `replace g to t` | `alt` | `orithm` |\n| `delete o` | `alt` | `rithm` |\n| `copy r` | `altr` | `ithm` |\n| `insert u` | `altru` | `ithm` |\n| `insert i` | `altrui` | `ithm` |\n| `insert s` | `altruis` | `ithm` |\n| `twiddle it into ti` | `altruisti` | `hm` |\n| `replace h to c` | `altruistic` | `m` |\n| `kill` | `altruistic` | （空） |\n\n\n\n要达到这个结果还可能有其它一些操作序列。\n\n操作 delete、replace、copy、insert、twiddle 和kill中每一个都有一个相联系的代价 cost。例如：\n\n```plain\ncost(delete) =3;\ncost(replace)=6;\ncost(copy)   =5;\ncost(insert) =4;\ncost(twiddle)=4;\ncost(kill) = 被删除的串长 * cost(delete) - 1;\n```\n\n一个给定的操作序列的代价为序列中各操作代价之和。\n例如上述操作序列的代价为\n\n$$\\begin{aligned}&3\\times \\mathrm{cost}(\\mathtt{copy})+2\\times \\mathrm{cost}(\\mathtt{replace})+\\mathrm{cost}(\\mathtt{delete})+3\\times \\mathrm{cost}(\\mathtt{insert}) \\\\ &+\\mathrm{cost}(\\mathtt{twiddle}) +\\mathrm{cost}(\\mathtt{kill}) \\\\\n=\\ & 3\\times 5+2\\times 6+3+3\\times 4+4+1\\times 3-1\\\\\n=\\ &48\\end{aligned}$$\n\n**编程任务**\n\n给定两个序列 $X[1\\cdots m],Y[1\\cdots n]$ 和一些操作代价集合，$X$ 到 $Y$ 的最短距离为将 $X$ 转化为 $Y$ 的最小的转换序列的代价。请给出一个算法来找出 $X[1\\cdots m]$ 至 $Y[1\\cdots n]$ 的最短距离。\n", "inputFormat": "第一行：源序列 $X[1\\cdots m]$。\n\n第二行：目标序列 $Y[1\\cdots n]$。\n\n第三行：$5$ 个正整数，分别是：delete、replace、copy、insert、twiddle 的代价。\n", "outputFormat": "一行一个整数，表示 $X$ 到 $Y$ 的最短距离（最小代价和）。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $1\\le n,m\\le 200$，且所有代价均为不大于 $100$ 的非负整数。", "locale": "zh-CN"}}}
{"pid": "P2454", "type": "P", "difficulty": 6, "samples": [["5 0 1\n1 2 3 4 0\n1 1 1 1 1", "2"], ["3 1 1\n1 2 0\n1 2 3\n2", "1"], ["2 1 1  \n0 1  \n1 1  \n1", "0"], ["10 3 3\n0 2 0 0 2 2 8 3 8 7\n10 9 1 8 1 3 7 2 8 1\n3 4 6", "3"], ["2 0 1\n1 0\n5 10", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["基环树"], "title": "[SCOI2008] 城堡 - 数据加强版", "background": "[原题弱化版](https://www.luogu.com.cn/problem/P2538)", "description": "在一个国家里，有 $n$ 个城市（编号为 $0$ 到 $n-1$）。这些城市之间有 $n$ 条双向道路相连（编号为 $0$ 到 $n-1$），其中编号为 $i$ 的道路连接了城市 $i$ 和城市 $r_i$（一条道路可以连接一个城市和它自身），长度为 $d_i$。$n$ 个城市中有 $m$ 个拥有自己城堡，可以抵御敌人侵略。如果没有城堡的城市遭受攻击，则离它最近的城堡将派兵前往救援。\n\n你的任务是在不超过 $k$ 个没有城堡的城市中建立城堡，使得所有城市中“离最近城堡的距离”的最大值尽量小。换句话说，若令 $dist(c)$ 表示城市 $c$ 的最近城堡离它的距离，则你的任务是让 $\\max\\{dist(c)\\}$ 尽量小。\n\n输入数据保证存在方案使得对于每个城市，至少有一个城堡能够到达。", "inputFormat": "输入第一行为三个正整数 $n, m, k$。第二行包含 $n$ 个整数 $r_0,r_1,\\ldots,r_{n-1}$。第三行包含 $n$ 个整数 $d_0,d_1,\\ldots,d_{n-1}$。第四行包含 $m$ 个各不相同的 $0$ 到 $n-1$ 之间的整数，分别为 $m$ 个城堡所在的城市编号。", "outputFormat": "输出仅一行，包含一个整数，即 $\\max\\{dist(c)\\}$ 的最小值。", "hint": "$100\\%$ 的数据满足：$1\\leq d_i\\leq 10^5$，$0\\leq m\\leq n-k$。\n\n- Subtask 1：$2 \\leq n \\leq 3000$。\n- Subtask 2：$2 \\leq n \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Castle - Enhanced Data Version", "background": "Weakened version of the original problem: https://www.luogu.com.cn/problem/P2538", "description": "In a country, there are $n$ cities (numbered $0$ to $n-1$). These cities are connected by $n$ bidirectional roads (numbered $0$ to $n-1$). Road $i$ connects city $i$ and city $r_i$ (a road may connect a city to itself), with length $d_i$. Among the $n$ cities, $m$ of them have their own castles, which can resist enemy invasions. When a city without a castle is attacked, the nearest castle will send troops to rescue.\n\nYour task is to build castles in at most $k$ cities that currently do not have castles, so that the maximum “distance to the nearest castle” among all cities is as small as possible. In other words, let $dist(c)$ be the distance from city $c$ to its nearest castle; your goal is to minimize $\\max\\{dist(c)\\}$.\n\nIt is guaranteed that there exists a plan such that for every city, at least one castle can reach it.", "inputFormat": "The first line contains three positive integers $n, m, k$. The second line contains $n$ integers $r_0,r_1,\\ldots,r_{n-1}$. The third line contains $n$ integers $d_0,d_1,\\ldots,d_{n-1}$. The fourth line contains $m$ distinct integers between $0$ and $n-1$, which are the indices of the cities that already have castles.", "outputFormat": "Output a single line containing one integer: the minimum possible value of $\\max\\{dist(c)\\}$.", "hint": "Constraints:\n\n$100\\%$ of the testdata satisfies $1\\leq d_i\\leq 10^5$ and $0\\leq m\\leq n-k$.\n\n- Subtask 1: $2 \\leq n \\leq 3000$.\n- Subtask 2: $2 \\leq n \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 城堡 - 数据加强版", "background": "[原题弱化版](https://www.luogu.com.cn/problem/P2538)", "description": "在一个国家里，有 $n$ 个城市（编号为 $0$ 到 $n-1$）。这些城市之间有 $n$ 条双向道路相连（编号为 $0$ 到 $n-1$），其中编号为 $i$ 的道路连接了城市 $i$ 和城市 $r_i$（一条道路可以连接一个城市和它自身），长度为 $d_i$。$n$ 个城市中有 $m$ 个拥有自己城堡，可以抵御敌人侵略。如果没有城堡的城市遭受攻击，则离它最近的城堡将派兵前往救援。\n\n你的任务是在不超过 $k$ 个没有城堡的城市中建立城堡，使得所有城市中“离最近城堡的距离”的最大值尽量小。换句话说，若令 $dist(c)$ 表示城市 $c$ 的最近城堡离它的距离，则你的任务是让 $\\max\\{dist(c)\\}$ 尽量小。\n\n输入数据保证存在方案使得对于每个城市，至少有一个城堡能够到达。", "inputFormat": "输入第一行为三个正整数 $n, m, k$。第二行包含 $n$ 个整数 $r_0,r_1,\\ldots,r_{n-1}$。第三行包含 $n$ 个整数 $d_0,d_1,\\ldots,d_{n-1}$。第四行包含 $m$ 个各不相同的 $0$ 到 $n-1$ 之间的整数，分别为 $m$ 个城堡所在的城市编号。", "outputFormat": "输出仅一行，包含一个整数，即 $\\max\\{dist(c)\\}$ 的最小值。", "hint": "$100\\%$ 的数据满足：$1\\leq d_i\\leq 10^5$，$0\\leq m\\leq n-k$。\n\n- Subtask 1：$2 \\leq n \\leq 3000$。\n- Subtask 2：$2 \\leq n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2455", "type": "P", "difficulty": 5, "samples": [["3\n2 -1 1 1\n4 1 -1 5\n1 1 1 0", "x1=1.00\nx2=0.00\nx3=-1.00\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2006", "各省省选", "山东", "Special Judge", "线性代数", "高斯消元"], "title": "[SDOI2006] 线性方程组", "background": null, "description": "已知 $n$ 元线性一次方程组。\n\n$$ \\begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \\cdots + a_{1, n} x_n = b_1 \\\\ a_{2, 1} x_1 + a_{2, 2} x_2 + \\cdots + a_{2, n} x_n = b_2 \\\\ \\cdots \\\\ a_{n,1} x_1 + a_{n, 2} x_2 + \\cdots + a_{n, n} x_n = b_n \\end{cases}$$\n\n请根据输入的数据，编程输出方程组的解的情况。", "inputFormat": "第一行输入未知数的个数 $n$。  \n接下来 $n$ 行，每行 $n + 1$ 个整数，表示每一个方程的系数及方程右边的值。", "outputFormat": "如果有唯一解，则输出解。你的结果被认为正确，当且仅当对于每一个 $x_i$ 而言结果值与标准答案值的绝对误差或者相对误差不超过 $0.01$。\n\n如果方程组无解输出 $-1$；\n如果有无穷多实数解，输出 $0$；", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 50$。$\\forall 1\\le i, j \\le n$，有 $\\left | a_{i, j} \\right | \\le 100$，$\\left |b_i \\right | \\le 300$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] System of Linear Equations", "background": "", "description": "Given an $n$-variable linear system of equations:\n$$ \\begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \\cdots + a_{1, n} x_n = b_1 \\\\ a_{2, 1} x_1 + a_{2, 2} x_2 + \\cdots + a_{2, n} x_n = b_2 \\\\ \\cdots \\\\ a_{n,1} x_1 + a_{n, 2} x_2 + \\cdots + a_{n, n} x_n = b_n \\end{cases}$$\nBased on the input, write a program to output the status of the solution set.", "inputFormat": "The first line contains the number of unknowns $n$.  \nThen $n$ lines follow, each containing $n + 1$ integers, representing the coefficients of each equation and the value on the right-hand side.", "outputFormat": "If there is a unique solution, output the solution. Your result is considered correct if and only if, for every $x_i$, the absolute error or the relative error compared to the standard answer does not exceed $0.01$.\n\nIf the system has no solution, output $-1$;  \nif it has infinitely many real solutions, output $0$.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 50$. For all $1 \\le i, j \\le n$, $\\left| a_{i, j} \\right| \\le 100$, $\\left| b_i \\right| \\le 300$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 线性方程组", "background": null, "description": "已知 $n$ 元线性一次方程组。\n\n$$ \\begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \\cdots + a_{1, n} x_n = b_1 \\\\ a_{2, 1} x_1 + a_{2, 2} x_2 + \\cdots + a_{2, n} x_n = b_2 \\\\ \\cdots \\\\ a_{n,1} x_1 + a_{n, 2} x_2 + \\cdots + a_{n, n} x_n = b_n \\end{cases}$$\n\n请根据输入的数据，编程输出方程组的解的情况。", "inputFormat": "第一行输入未知数的个数 $n$。  \n接下来 $n$ 行，每行 $n + 1$ 个整数，表示每一个方程的系数及方程右边的值。", "outputFormat": "如果有唯一解，则输出解。你的结果被认为正确，当且仅当对于每一个 $x_i$ 而言结果值与标准答案值的绝对误差或者相对误差不超过 $0.01$。\n\n如果方程组无解输出 $-1$；\n如果有无穷多实数解，输出 $0$；", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 50$。$\\forall 1\\le i, j \\le n$，有 $\\left | a_{i, j} \\right | \\le 100$，$\\left |b_i \\right | \\le 300$。", "locale": "zh-CN"}}}
