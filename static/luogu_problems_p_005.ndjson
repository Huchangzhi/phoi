{"pid": "P2261", "type": "P", "difficulty": 4, "samples": [["10 5\n", "29"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2007", "重庆", "各省省选", "整除分块"], "title": "[CQOI2007] 余数求和", "background": "", "description": "给出正整数 $n$ 和 $k$，请计算\n\n$$G(n, k) = \\sum_{i = 1}^n k \\bmod i$$\n\n其中 $k\\bmod i$ 表示 $k$ 除以 $i$ 的余数。\n\n", "inputFormat": "输入只有一行两个整数，分别表示 $n$ 和 $k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$G(10, 5)=0+1+2+1+0+5+5+5+5+5=29$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n , k \\leq 10^3$。\n- 对于 $60\\%$ 的数据，保证 $n, k \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, k \\leq 10^9$。\n\n\n------------\n2024/2/13 添加一组 hack 数据", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2007] Remainder Sum", "background": "", "description": "Given positive integers $n$ and $k$, please compute\n$$G(n, k) = \\sum_{i = 1}^n k \\bmod i$$\nwhere $k \\bmod i$ denotes the remainder when $k$ is divided by $i$.", "inputFormat": "The input contains a single line with two integers, $n$ and $k$.", "outputFormat": "Output one line with one integer representing the answer.", "hint": "#### Sample 1 Explanation\n\n$G(10, 5) = 0 + 1 + 2 + 1 + 0 + 5 + 5 + 5 + 5 + 5 = 29$.\n\n#### Constraints\n\n- For 30% of the testdata, it is guaranteed that $n, k \\leq 10^3$.\n- For 60% of the testdata, it is guaranteed that $n, k \\leq 10^6$.\n- For 100% of the testdata, it is guaranteed that $1 \\leq n, k \\leq 10^9$.\n\n------------\nAdded a set of hack testdata on 2024/2/13.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2007] 余数求和", "background": "", "description": "给出正整数 $n$ 和 $k$，请计算\n\n$$G(n, k) = \\sum_{i = 1}^n k \\bmod i$$\n\n其中 $k\\bmod i$ 表示 $k$ 除以 $i$ 的余数。\n\n", "inputFormat": "输入只有一行两个整数，分别表示 $n$ 和 $k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$G(10, 5)=0+1+2+1+0+5+5+5+5+5=29$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n , k \\leq 10^3$。\n- 对于 $60\\%$ 的数据，保证 $n, k \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, k \\leq 10^9$。\n\n\n------------\n2024/2/13 添加一组 hack 数据", "locale": "zh-CN"}}}
{"pid": "P2262", "type": "P", "difficulty": 6, "samples": [["5 200 200\nunzip.exe 100\nxxxx 50\nbin 0\ntpx.exe 200\nturbo.exe 300\ntpx.tp 400\ntemp 0\n-\n-\nreadme.txt 100\n-\n0 ares connect 2\n0 ares download zip.exe\n1 ares download bin\n5 ares download xxxx\n6 ares cd bin\n6 ares connect 1\n6 ares quit\n7 ares connect 1\n7 rosen connect 2\n7 ares cd bin\n8 ares upload A 300\n9 rosen download bin\n10 rosen download bin\ndown\n", "success\nunsuccess\nsuccess\nunsuccess\nsuccess\nunsuccess\nsuccess\nsuccess\nsuccess\nsuccess\nsuccess\nunsuccess\nsuccess\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2004", "各省省选", "湖南"], "title": "[HNOI2004] FTP服务器", "background": "File Transfer Protocol，文件传输协议，简称 FTP。人们可以通过 FTP 实现资源共享。一般的情况下用户访问一个 FTP 服务器是通过类似资源管理器的形式对该服务器上的资源进行浏览，并且不同权限的用户可以实现下载文件/文件夹，上传文件/文件夹。", "description": "一个FTP服务器的所有资源都以文件的形式按树形结构存储在不同的文件夹里，最低一级的是根目录（即根文件夹），根目录里有若干个文件和文件夹，每一个文件夹里都可以拥有 $0$ 个或多个文件及文件夹，同一文件夹里不存在名称相同的文件和文件夹。\n\n一个用户包含三个属性：\n\n- $\\text{userType}$：用户类型；\n- $\\text{userState}$：用户状态（用户正在执行的操作）；\n- $\\text{userPosition}$：用户当前所处的位置（即用户正在浏览的文件夹）。\n\n用户分 $3$ 种类型：上传用户 $\\text{uploadUser}$，下载用户 $\\text{downloadUser}$，匿名用户 $\\text{guest}$。\n\n操作分 $3$ 种类型：浏览 $\\text{scan}$，下载 $\\text{download}$，上传 $\\text{upload}$。\n\n用户的权限是指用户允许进行的操作。不同类型的用户的权限是不同的。\n\n每种用户的权限如下：\n\n- 上传用户 $\\text{uploadUser}$：浏览 $\\text{scan}$，上传 $\\text{upload}$。\n- 下载用户 $\\text{downloadUser}$：浏览 $\\text{scan}$，下载 $\\text{download}$。\n- 匿名用户 $\\text{guest}$：浏览 $\\text{scan}$。\n\n任何一个用户是不能进行其没有权限的操作的，例如：一个匿名用户想要下载一个文件或者文件夹是不允许的。\n\n一个文件/文件夹包含三个属性：\n\n- $\\text{fileName/folderName}$：文件名（不包含空格和回车）；\n- $\\text{fileSize/folderSize}$：文件大小\n（单位 $\\text{byte}$，$0 <\\mathrm{filesize}< 10^5$，$0<\\mathrm{folderSize}< 10^8$，文件夹的大小是它里面所包含的所有文件大小的总和）；\n- $\\text{fileState/folderState}$：当前状态，当前状态有两种：\n  - 一种为正常 $\\text{normal}$（文件/文件夹为正常状态时，允许用户对其进行操作）；\n  - 另一种为上传未完成 $\\text{uploading}$（处在此种状态时，用户只能够对其进行浏览操作，如果一个文件夹中有一个或多个文件处于 $\\text{uploading}$ 状态，那么这个文件夹也处于 $\\text{uploading}$ 状态）。\n\n一个 FTP 服务器除了它所拥有的文件资源外，还有如下属性：\n\n1. 访问用户的最大数量（包括所有不同类型的用户） $\\text{maxUserNumber}<100$。如果当前访问用户数量已经达到最大值的话，其他新的用户对服务器的访问将是失败的。\n2. 服务器的最大流量 $\\text{maxServerFlux}<10^7$。\n3. 单个用户允许的最大下载/上传流量 $\\text{maxUserFlux}$。\n\nFTP 服务器运行的最小时间单位为秒。\n\n每一个用户在同一时刻只能进行一种操作。用户下载和上传文件/文件夹是需要一定时间的，而这个时间决定于用户流量 $\\text{userFlux}$，单位为 $\\text{byte/second}$，注意如果某一时刻文件/文件夹仍须上传/下载的大小（$>0$）小于 $\\text{userFlux}$ 的话，上传/下载时间仍将按照一秒钟看待。\n\n而 $\\text{userFlux}$ 的值是如何确定的呢？\n\n $$\\mathrm{userFlux} = \\min(\\mathrm{presentMaxUserFlux},\\mathrm{maxUserFlux})$$\n\n其中，$\\text{presentMaxUserFlux}$ 为当前服务器的单个用户最大流量：\n\n$$\\mathrm{presentMaxUserFlux} = \\lfloor \\mathrm{maxServerFlux} / \\mathrm{userTotal}\\rfloor$$\n\n（$\\text{userTotal}$ 表示该时刻的正在进行上传和下载操作的用户数量）\n\n一个用户通过一系列命令实现其在 FTP 服务器上的相关操作。下面介绍这些命令：\n\n### $\\verb!connect!$ 命令\n\n- 格式：$\\verb![name] + 空格 + connect + 空格 + 参数A!$。\n- 例：$\\verb!tsinghua connect 1!$。\n- 表示在名叫 $\\verb!name!$ 的用户请求以 $\\verb!A!$ 身份连接到服务器上。如果当前的最大使用用户还没达到 $\\text{maxUserNumber}$，并且该用户未连接到服务器，则连接成功，服务器反馈回一个相关信息 $\\verb!success!$。否则反馈信息为 $\\verb!unsuccess!$。一旦连接成功，用户其所处的位置 $\\text{userPosition}$ 为服务器的根目录。$A=1$ 表示上传用户，$A=2$ 表示下载用户，$A=3$ 表示匿名用户。\n\n### $\\verb!quit!$ 命令\n\n- 格式：$\\verb![name] + 空格 + quit!$。\n- 例：$\\verb!tsinghua quit!$。\n- 表示名叫 $\\verb!name!$ 的用户断开与服务器的连接。如果用户未连接反馈 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$。（注意用户在任何状态下都可以断开与服务器的连接）。\n\n### $\\verb!cd!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd + 空格 + [folderName/文件夹名称]!$。\n- 例：$\\verb!THU cd FD!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹进入该文件夹中的一个名叫 $\\text{folderName}$ 的文件夹。如果名叫 $\\text{folderName}$ 的文件夹存在并且处于 $\\text{normal}$ 状态，则改变用户当前所处位置 $\\text{userPosition}$，反馈相关信息 $\\verb!success!$，如果该文件夹不存在或该用户没有成功连接，则反馈信息为 $\\verb!unsuccess!$。\n\n### $\\verb!cd..!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd..!$。\n- 例：$\\verb!9# cd..!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹返回到他的上一级文件夹。如果用户处于根目录或者用户未连接，则命令执行失败返回 $\\verb!unsuccess!$，否则返回 $\\verb!success!$，并且改变用户所处位置 $\\text{userPosition}$。\n\n### $\\verb!download!$ 命令\n\n- 格式：$\\verb![name] + 空格 + download + 空格 + [name1]!$。\n- 例：$\\verb!A download 1.txt!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处文件夹下载名为 $\\verb!name1!$ 的文件或者文件夹。如果用户未连接，用户没有下载权限，名为 $\\verb!name1!$ 的文件/文件夹不存在，或者该文件/文件夹处于 $\\text{uploading}$ 状态时，反馈信息 $\\verb!unsuccess!$，否则返回 $\\verb!success!$ 并且开始下载该文件/文件夹。（一旦一个下载命令开始执行，那么执行该命令的用户所下载的是下载命令执行的那一时刻的那一个文件/文件夹，也就是说如果一个用户正在下载某个文件夹，在下载过程中，有另外一用户在这个文件夹里面上传文件，那么原下载用户是不可能下载到这个新上传的文件的）。\n\n### $\\verb!upload!$ 命令\n\n- 格式：$\\verb![name] + 空格 + upload + 空格 + [name1] + 空格 + [size]!$。\n- 例：$\\verb!A upload B 1!$。\n- 表示名叫 $\\verb!name!$ 的用户希望在当前所处的文件夹上传一个名叫 $\\verb!name1!$ 的大小为 $\\text{size}$ 的文件/文件夹。注意：\n  - 用户通过 $\\verb!upload!$ 命令上传文件夹只能为空文件夹，当 $\\text{size}=0$ 表示上传文件夹，$\\text{size}>0$ 表示上传文件。\n  - 如果当前目录已经存在了同名的文件/文件夹，用户未成功连接或者用户没有上传权限，反馈信息 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$，并且开始上传文件/文件夹。（如果一个用户想要上传一个非空文件夹，是很容易通过一系列 $\\verb!upload!$ 以及 $\\verb!cd!$ 命令实现的）。\n\n---\n\n除上传文件和下载文件/文件夹命令需要耗时外，其他的命令都不需要执行时间。\n\n你的任务是模拟一个 FTP 服务器在某一时间段内的运行过程。", "inputFormat": "一开始你将从文件中获得 FTP 的服务器的初始信息。第一行为 $3$ 个正整数，分别表示 $\\text{maxUserNumber},\\text{maxServerFlux},\\text{maxUserFlux}$。接下来的若干行描述 $\\text{server}$ 里已有文件资源的存储情况。\n\n第一行总是描述的根目录中的一个文件或者文件夹。\n\n如果某一行描述的是一个文件或者文件夹那么该行的数据为 $\\verb!name + 空格 + size!$，如果 $\\text{size}=0$ 表示这是一个文件夹，否则表示一个大小为 $\\text{size}$ 的文件。\n\n如果某一行描述的是一个文件夹，那么接下来的若干行描述的都是这个文件夹里的内容，直到一个与之对应的减号为止。这些数据都是递归描述的。因为一开始就是描述整个根目录里的文件和文件夹，所以文件信息的最后一行也为减号。（参看输入示例）。\n\n下面的每一行为 $\\verb!time + 空格 + order!$ 的形式给出，例如 $\\verb!4 ares connect 1!$ 表示：在服务器开启后 $4$ 秒钟，名叫 $\\verb!ares!$ 的用户请求以 $\\text{uploadUser}$ 的身份连接到服务器上来。\n\n输入的最后一行为一个字符串 $\\verb!down!$。\n\n所有输入命令的时刻 $\\text{time}$ 都以命令出现的先后递增，同一时刻的命令以输入中出现的先后顺序确定其执行顺序。", "outputFormat": "输出若干行，每行一个字符串 $\\verb!success!$ 或 $\\verb!unsuccess!$，表示每个操作成功与否。", "hint": "来源：HNOI2004（经过修改）。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] FTP Server", "background": "File Transfer Protocol, abbreviated as FTP, enables resource sharing. Typically, users browse resources on an FTP server through a file-explorer-like interface, and users with different permissions can download files/folders and upload files/folders.", "description": "All resources on an FTP server are stored as files in a tree structure across different folders. The lowest level is the root directory (i.e., the root folder). The root directory contains several files and folders. Each folder may contain $0$ or more files and folders. No two files/folders in the same folder share the same name.\n\nA user has three attributes:\n\n- $\\text{userType}$: user type.\n- $\\text{userState}$: user state (the operation the user is currently performing).\n- $\\text{userPosition}$: the user’s current position (i.e., the folder the user is currently browsing).\n\nThere are $3$ types of users: upload user $\\text{uploadUser}$, download user $\\text{downloadUser}$, and anonymous user $\\text{guest}$.\n\nThere are $3$ types of operations: browse $\\text{scan}$, download $\\text{download}$, and upload $\\text{upload}$.\n\nA user’s permissions are the operations that the user is allowed to perform. Different types of users have different permissions.\n\nPermissions for each user type are as follows:\n\n- Upload user $\\text{uploadUser}$: browse $\\text{scan}$, upload $\\text{upload}$.\n- Download user $\\text{downloadUser}$: browse $\\text{scan}$, download $\\text{download}$.\n- Anonymous user $\\text{guest}$: browse $\\text{scan}$.\n\nNo user may perform an operation outside their permissions. For example, an anonymous user is not allowed to download a file or folder.\n\nA file/folder has three attributes:\n\n- $\\text{fileName/folderName}$: the name (without spaces or line breaks).\n- $\\text{fileSize/folderSize}$: the size\n  (unit: $\\text{byte}$, $0 < \\mathrm{fileSize} < 10^5$, $0 < \\mathrm{folderSize} < 10^8$, and a folder’s size is the sum of the sizes of all files it contains).\n- $\\text{fileState/folderState}$: the current state, which has two possible values:\n  - $\\text{normal}$: when a file/folder is in the normal state, users are allowed to operate on it.\n  - $\\text{uploading}$: in this state, users may only browse it. If one or more files in a folder are in the $\\text{uploading}$ state, then the folder is also in the $\\text{uploading}$ state.\n\nIn addition to its file resources, an FTP server has the following properties:\n\n1. The maximum number of accessing users (including all user types), $\\text{maxUserNumber} < 100$. If the current number of accessing users has already reached the maximum, any new connection attempts will fail.\n2. The server’s maximum throughput $\\text{maxServerFlux} < 10^7$.\n3. The maximum download/upload throughput allowed per user $\\text{maxUserFlux}$.\n\nThe minimal time unit for running the FTP server is one second.\n\nEach user can perform only one operation at any given moment. Downloading and uploading files/folders take time, which depends on the user’s throughput $\\text{userFlux}$, in units of $\\text{byte/second}$. Note that if, at some moment, the remaining size to upload/download ($> 0$) is less than $\\text{userFlux}$, the upload/download still takes one full second.\n\nHow is $\\text{userFlux}$ determined?\n\n $$\\mathrm{userFlux} = \\min(\\mathrm{presentMaxUserFlux}, \\mathrm{maxUserFlux})$$\n\nHere, $\\text{presentMaxUserFlux}$ is the server’s current per-user maximum throughput:\n\n$$\\mathrm{presentMaxUserFlux} = \\lfloor \\mathrm{maxServerFlux} / \\mathrm{userTotal} \\rfloor$$\n\n($\\text{userTotal}$ denotes the number of users currently performing upload and download operations at that moment.)\n\nA user interacts with the FTP server through a sequence of commands. The commands are introduced below:\n\n### $\\verb!connect!$ command\n\n- Format: $\\verb![name] + 空格 + connect + 空格 + 参数A!$。\n- Example: $\\verb!tsinghua connect 1!$。\n- A user named $\\verb!name!$ requests to connect to the server with identity $\\verb!A!$. If the current number of users has not reached $\\text{maxUserNumber}$ and the user is not already connected, the connection succeeds and the server returns $\\verb!success!$. Otherwise, it returns $\\verb!unsuccess!$. Once connected successfully, the user’s position $\\text{userPosition}$ is set to the server’s root directory. $A = 1$ denotes an upload user, $A = 2$ denotes a download user, and $A = 3$ denotes an anonymous user.\n\n### $\\verb!quit!$ command\n\n- Format: $\\verb![name] + 空格 + quit!$。\n- Example: $\\verb!tsinghua quit!$。\n- The user named $\\verb!name!$ disconnects from the server. If the user is not connected, return $\\verb!unsuccess!$; otherwise, return $\\verb!success!$. (Note that the user may disconnect in any state.)\n\n### $\\verb!cd!$ command\n\n- Format: $\\verb![name] + 空格 + cd + 空格 + [folderName/文件夹名称]!$。\n- Example: $\\verb!THU cd FD!$。\n- The user named $\\verb!name!$ attempts to enter a folder named $\\text{folderName}$ within the current folder. If a folder named $\\text{folderName}$ exists and is in the $\\text{normal}$ state, change the user’s current position $\\text{userPosition}$ and return $\\verb!success!$. If the folder does not exist or the user is not successfully connected, return $\\verb!unsuccess!$.\n\n### $\\verb!cd..!$ command\n\n- Format: $\\verb![name] + 空格 + cd..!$。\n- Example: $\\verb!9# cd..!$。\n- The user named $\\verb!name!$ attempts to move from the current folder to its parent folder. If the user is at the root directory or is not connected, the command fails and returns $\\verb!unsuccess!$; otherwise, it returns $\\verb!success!$ and updates $\\text{userPosition}$.\n\n### $\\verb!download!$ command\n\n- Format: $\\verb![name] + 空格 + download + 空格 + [name1]!$。\n- Example: $\\verb!A download 1.txt!$。\n- The user named $\\verb!name!$ attempts to download a file or folder named $\\verb!name1!$ in the current folder. If the user is not connected, the user lacks download permission, the file/folder named $\\verb!name1!$ does not exist, or the file/folder is in the $\\text{uploading}$ state, return $\\verb!unsuccess!$; otherwise, return $\\verb!success!$ and start downloading the file/folder. (Once a download command starts, the user downloads the snapshot of that file/folder at the moment the command begins. That is, if another user uploads a new file into that folder during the download, the original downloading user cannot obtain that newly uploaded file.)\n\n### $\\verb!upload!$ command\n\n- Format: $\\verb![name] + 空格 + upload + 空格 + [name1] + 空格 + [size]!$。\n- Example: $\\verb!A upload B 1!$。\n- The user named $\\verb!name!$ attempts to upload, into the current folder, a file or folder named $\\verb!name1!$ with size $\\text{size}$. Note:\n  - Uploading a folder via the $\\verb!upload!$ command can only create an empty folder. When $\\text{size} = 0$, it indicates uploading a folder; when $\\text{size} > 0$, it indicates uploading a file.\n  - If a file/folder with the same name already exists in the current directory, or the user is not successfully connected, or the user lacks upload permission, return $\\verb!unsuccess!$; otherwise, return $\\verb!success!$ and start uploading the file/folder. (If a user wishes to upload a non-empty folder, it can be achieved through a sequence of $\\verb!upload!$ and $\\verb!cd!$ commands.)\n\n---\n\nExcept for upload and download commands, all other commands take no execution time.\n\nYour task is to simulate the operation of an FTP server over a period of time.", "inputFormat": "First, you will read the initial information of the FTP server. The first line contains $3$ positive integers, representing $\\text{maxUserNumber}, \\text{maxServerFlux}, \\text{maxUserFlux}$. The following lines describe the storage of the existing file resources on the $\\text{server}$.\n\nThe first line always describes one file or folder in the root directory.\n\nIf a line describes a file or a folder, it has the form $\\verb!name + 空格 + size!$. If $\\text{size} = 0$, it indicates a folder; otherwise, it indicates a file of size $\\text{size}$.\n\nIf a line describes a folder, then the subsequent lines describe the contents of that folder until a matching minus sign appears. This description is recursive. Since the description starts from all files and folders in the root directory, the last line of the file information is also a minus sign. (See the sample input.)\n\nEach of the following lines is given in the form $\\verb!time + 空格 + order!$. For example, $\\verb!4 ares connect 1!$ means: at $4$ seconds after the server starts, a user named $\\verb!ares!$ requests to connect to the server as an $\\text{uploadUser}$.\n\nThe last line of input is the string $\\verb!down!$.\n\nAll command times $\\text{time}$ are non-decreasing according to their appearance order. Commands issued at the same time are executed in the order they appear in the input.", "outputFormat": "Output several lines, each containing $\\verb!success!$ or $\\verb!unsuccess!$, indicating whether each operation succeeds.", "hint": "Source: HNOI2004 (modified).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] FTP服务器", "background": "File Transfer Protocol，文件传输协议，简称 FTP。人们可以通过 FTP 实现资源共享。一般的情况下用户访问一个 FTP 服务器是通过类似资源管理器的形式对该服务器上的资源进行浏览，并且不同权限的用户可以实现下载文件/文件夹，上传文件/文件夹。", "description": "一个FTP服务器的所有资源都以文件的形式按树形结构存储在不同的文件夹里，最低一级的是根目录（即根文件夹），根目录里有若干个文件和文件夹，每一个文件夹里都可以拥有 $0$ 个或多个文件及文件夹，同一文件夹里不存在名称相同的文件和文件夹。\n\n一个用户包含三个属性：\n\n- $\\text{userType}$：用户类型；\n- $\\text{userState}$：用户状态（用户正在执行的操作）；\n- $\\text{userPosition}$：用户当前所处的位置（即用户正在浏览的文件夹）。\n\n用户分 $3$ 种类型：上传用户 $\\text{uploadUser}$，下载用户 $\\text{downloadUser}$，匿名用户 $\\text{guest}$。\n\n操作分 $3$ 种类型：浏览 $\\text{scan}$，下载 $\\text{download}$，上传 $\\text{upload}$。\n\n用户的权限是指用户允许进行的操作。不同类型的用户的权限是不同的。\n\n每种用户的权限如下：\n\n- 上传用户 $\\text{uploadUser}$：浏览 $\\text{scan}$，上传 $\\text{upload}$。\n- 下载用户 $\\text{downloadUser}$：浏览 $\\text{scan}$，下载 $\\text{download}$。\n- 匿名用户 $\\text{guest}$：浏览 $\\text{scan}$。\n\n任何一个用户是不能进行其没有权限的操作的，例如：一个匿名用户想要下载一个文件或者文件夹是不允许的。\n\n一个文件/文件夹包含三个属性：\n\n- $\\text{fileName/folderName}$：文件名（不包含空格和回车）；\n- $\\text{fileSize/folderSize}$：文件大小\n（单位 $\\text{byte}$，$0 <\\mathrm{filesize}< 10^5$，$0<\\mathrm{folderSize}< 10^8$，文件夹的大小是它里面所包含的所有文件大小的总和）；\n- $\\text{fileState/folderState}$：当前状态，当前状态有两种：\n  - 一种为正常 $\\text{normal}$（文件/文件夹为正常状态时，允许用户对其进行操作）；\n  - 另一种为上传未完成 $\\text{uploading}$（处在此种状态时，用户只能够对其进行浏览操作，如果一个文件夹中有一个或多个文件处于 $\\text{uploading}$ 状态，那么这个文件夹也处于 $\\text{uploading}$ 状态）。\n\n一个 FTP 服务器除了它所拥有的文件资源外，还有如下属性：\n\n1. 访问用户的最大数量（包括所有不同类型的用户） $\\text{maxUserNumber}<100$。如果当前访问用户数量已经达到最大值的话，其他新的用户对服务器的访问将是失败的。\n2. 服务器的最大流量 $\\text{maxServerFlux}<10^7$。\n3. 单个用户允许的最大下载/上传流量 $\\text{maxUserFlux}$。\n\nFTP 服务器运行的最小时间单位为秒。\n\n每一个用户在同一时刻只能进行一种操作。用户下载和上传文件/文件夹是需要一定时间的，而这个时间决定于用户流量 $\\text{userFlux}$，单位为 $\\text{byte/second}$，注意如果某一时刻文件/文件夹仍须上传/下载的大小（$>0$）小于 $\\text{userFlux}$ 的话，上传/下载时间仍将按照一秒钟看待。\n\n而 $\\text{userFlux}$ 的值是如何确定的呢？\n\n $$\\mathrm{userFlux} = \\min(\\mathrm{presentMaxUserFlux},\\mathrm{maxUserFlux})$$\n\n其中，$\\text{presentMaxUserFlux}$ 为当前服务器的单个用户最大流量：\n\n$$\\mathrm{presentMaxUserFlux} = \\lfloor \\mathrm{maxServerFlux} / \\mathrm{userTotal}\\rfloor$$\n\n（$\\text{userTotal}$ 表示该时刻的正在进行上传和下载操作的用户数量）\n\n一个用户通过一系列命令实现其在 FTP 服务器上的相关操作。下面介绍这些命令：\n\n### $\\verb!connect!$ 命令\n\n- 格式：$\\verb![name] + 空格 + connect + 空格 + 参数A!$。\n- 例：$\\verb!tsinghua connect 1!$。\n- 表示在名叫 $\\verb!name!$ 的用户请求以 $\\verb!A!$ 身份连接到服务器上。如果当前的最大使用用户还没达到 $\\text{maxUserNumber}$，并且该用户未连接到服务器，则连接成功，服务器反馈回一个相关信息 $\\verb!success!$。否则反馈信息为 $\\verb!unsuccess!$。一旦连接成功，用户其所处的位置 $\\text{userPosition}$ 为服务器的根目录。$A=1$ 表示上传用户，$A=2$ 表示下载用户，$A=3$ 表示匿名用户。\n\n### $\\verb!quit!$ 命令\n\n- 格式：$\\verb![name] + 空格 + quit!$。\n- 例：$\\verb!tsinghua quit!$。\n- 表示名叫 $\\verb!name!$ 的用户断开与服务器的连接。如果用户未连接反馈 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$。（注意用户在任何状态下都可以断开与服务器的连接）。\n\n### $\\verb!cd!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd + 空格 + [folderName/文件夹名称]!$。\n- 例：$\\verb!THU cd FD!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹进入该文件夹中的一个名叫 $\\text{folderName}$ 的文件夹。如果名叫 $\\text{folderName}$ 的文件夹存在并且处于 $\\text{normal}$ 状态，则改变用户当前所处位置 $\\text{userPosition}$，反馈相关信息 $\\verb!success!$，如果该文件夹不存在或该用户没有成功连接，则反馈信息为 $\\verb!unsuccess!$。\n\n### $\\verb!cd..!$ 命令\n\n- 格式：$\\verb![name] + 空格 + cd..!$。\n- 例：$\\verb!9# cd..!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处的文件夹返回到他的上一级文件夹。如果用户处于根目录或者用户未连接，则命令执行失败返回 $\\verb!unsuccess!$，否则返回 $\\verb!success!$，并且改变用户所处位置 $\\text{userPosition}$。\n\n### $\\verb!download!$ 命令\n\n- 格式：$\\verb![name] + 空格 + download + 空格 + [name1]!$。\n- 例：$\\verb!A download 1.txt!$。\n- 表示名叫 $\\verb!name!$ 的用户希望从当前所处文件夹下载名为 $\\verb!name1!$ 的文件或者文件夹。如果用户未连接，用户没有下载权限，名为 $\\verb!name1!$ 的文件/文件夹不存在，或者该文件/文件夹处于 $\\text{uploading}$ 状态时，反馈信息 $\\verb!unsuccess!$，否则返回 $\\verb!success!$ 并且开始下载该文件/文件夹。（一旦一个下载命令开始执行，那么执行该命令的用户所下载的是下载命令执行的那一时刻的那一个文件/文件夹，也就是说如果一个用户正在下载某个文件夹，在下载过程中，有另外一用户在这个文件夹里面上传文件，那么原下载用户是不可能下载到这个新上传的文件的）。\n\n### $\\verb!upload!$ 命令\n\n- 格式：$\\verb![name] + 空格 + upload + 空格 + [name1] + 空格 + [size]!$。\n- 例：$\\verb!A upload B 1!$。\n- 表示名叫 $\\verb!name!$ 的用户希望在当前所处的文件夹上传一个名叫 $\\verb!name1!$ 的大小为 $\\text{size}$ 的文件/文件夹。注意：\n  - 用户通过 $\\verb!upload!$ 命令上传文件夹只能为空文件夹，当 $\\text{size}=0$ 表示上传文件夹，$\\text{size}>0$ 表示上传文件。\n  - 如果当前目录已经存在了同名的文件/文件夹，用户未成功连接或者用户没有上传权限，反馈信息 $\\verb!unsuccess!$，否则反馈 $\\verb!success!$，并且开始上传文件/文件夹。（如果一个用户想要上传一个非空文件夹，是很容易通过一系列 $\\verb!upload!$ 以及 $\\verb!cd!$ 命令实现的）。\n\n---\n\n除上传文件和下载文件/文件夹命令需要耗时外，其他的命令都不需要执行时间。\n\n你的任务是模拟一个 FTP 服务器在某一时间段内的运行过程。", "inputFormat": "一开始你将从文件中获得 FTP 的服务器的初始信息。第一行为 $3$ 个正整数，分别表示 $\\text{maxUserNumber},\\text{maxServerFlux},\\text{maxUserFlux}$。接下来的若干行描述 $\\text{server}$ 里已有文件资源的存储情况。\n\n第一行总是描述的根目录中的一个文件或者文件夹。\n\n如果某一行描述的是一个文件或者文件夹那么该行的数据为 $\\verb!name + 空格 + size!$，如果 $\\text{size}=0$ 表示这是一个文件夹，否则表示一个大小为 $\\text{size}$ 的文件。\n\n如果某一行描述的是一个文件夹，那么接下来的若干行描述的都是这个文件夹里的内容，直到一个与之对应的减号为止。这些数据都是递归描述的。因为一开始就是描述整个根目录里的文件和文件夹，所以文件信息的最后一行也为减号。（参看输入示例）。\n\n下面的每一行为 $\\verb!time + 空格 + order!$ 的形式给出，例如 $\\verb!4 ares connect 1!$ 表示：在服务器开启后 $4$ 秒钟，名叫 $\\verb!ares!$ 的用户请求以 $\\text{uploadUser}$ 的身份连接到服务器上来。\n\n输入的最后一行为一个字符串 $\\verb!down!$。\n\n所有输入命令的时刻 $\\text{time}$ 都以命令出现的先后递增，同一时刻的命令以输入中出现的先后顺序确定其执行顺序。", "outputFormat": "输出若干行，每行一个字符串 $\\verb!success!$ 或 $\\verb!unsuccess!$，表示每个操作成功与否。", "hint": "来源：HNOI2004（经过修改）。", "locale": "zh-CN"}}}
{"pid": "P2263", "type": "P", "difficulty": 5, "samples": [["5 2\n5\n4\n1\n2\n3\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "命运的彼方", "background": "kkksc03 与 lzn 踏上了一次寻宝之旅，经过 kkksc03 与 lzn 的不懈努力，终于解开了所有的谜题，依靠御风飞翔之术越过了大河。终点距离他们只有一步之遥了……\n", "description": "他们现在位于的地方，是连接古代和现代两个世界的结界法阵。一般来说，即使是神也是不能跨越时空的，但是， lin\\_toto 给了他们一点提示，告诉了他们这个法阵的玄机。并告诉 kkksc03 与 lzn，只要同心协力，就可以改变命运，突破结界的枷锁。\n\nlin\\_toto 带他们走到了法阵的前方。展示在他们面前的是一堵巨大却残缺的墙，由若干组连续魔力砖组成（每个魔力砖均为正方体，大小均为 $1\\times1\\times1$），且各组魔力砖的高度各不相同。根据经验，只有让最少连续 $K$ 组成这堵墙的魔力砖的高度相同，才能突破法阵的入口，召唤来自神界的帮助，跨越时空。\n\n两人可完成的操作如下：从墙上搬走一块砖，或是从旁边的魔力砖堆（假设可用的魔力砖无限）中拿一块砖放置在墙上。每搬运一块砖都会耗费 kkksc03 与 lzn 一点能量值。lzn 希望让两人所耗费的能量值最少。\n\n现在kkksc03带着这个问题找到了聪明的你，你能帮他计算出他所需付出的最少能量值吗？\n", "inputFormat": "一行两个正整数 $N, K$。下面 $N$ 行，每行代表这组魔力砖的高度 $H _ i$。\n", "outputFormat": "一个整数，表示所需付出的最少能量值。\n", "hint": "对于 $10\\%$ 的数据, 有 $1≤ N ≤ 10, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $20\\%$ 的数据，有 $K = 2$。\n\n对于 $40\\%$ 的数据，有 $1≤ N ≤ 500, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $80\\%$ 的数据，有 $1≤ N ≤ 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ 6$。\n\n对于 $100\\%$ 的数据，有 $1≤ N ≤ 5\\times 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ {12}$，并且所有 $H _ i$ 互不相同。\n", "locale": "zh-CN", "translations": {"en": {"title": "Beyond Destiny", "background": "kkksc03 and lzn embarked on a treasure hunt. After their tireless efforts, they finally solved all the puzzles and crossed the great river using the art of riding the wind. The destination is now just one step away from them...", "description": "They are now at a barrier formation that connects the ancient and modern worlds. Generally, even gods cannot traverse time and space. However, lin_toto gave them a hint and revealed the secret of this formation. He told kkksc03 and lzn that as long as they work together, they can change their destiny and break the shackles of the barrier.\n\nlin_toto led them to the front of the formation. What lay before them was a huge yet damaged wall, composed of several consecutive groups of magical bricks (each magical brick is a cube of size $1\\times1\\times1$), and the heights of these groups are all different. From experience, only by making the heights of at least $K$ consecutive groups that form this wall equal can they break through the entrance of the formation, summon help from the divine realm, and traverse time and space.\n\nThey can perform the following operations: remove one brick from the wall, or take one brick from a nearby pile of magical bricks (assume an unlimited supply) and place it on the wall. Each brick moved consumes one unit of energy from kkksc03 and lzn. lzn wants to minimize the total energy consumed.\n\nNow kkksc03 has come to you with this problem. Can you help him compute the minimum energy required?", "inputFormat": "One line with two positive integers $N, K$. Then $N$ lines follow, each representing the height $H_i$ of a group of magical bricks.", "outputFormat": "A single integer, the minimum energy required.", "hint": "For $10\\%$ of the testdata, $1 \\le N \\le 10$, $2 \\le K \\le N$, $0 \\le H_i \\le N$.\n\nFor $20\\%$ of the testdata, $K = 2$.\n\nFor $40\\%$ of the testdata, $1 \\le N \\le 500$, $2 \\le K \\le N$, $0 \\le H_i \\le N$.\n\nFor $80\\%$ of the testdata, $1 \\le N \\le 10^5$, $2 \\le K \\le N$, $0 \\le H_i \\le 10^6$.\n\nFor $100\\%$ of the testdata, $1 \\le N \\le 5 \\times 10^5$, $2 \\le K \\le N$, $0 \\le H_i \\le 10^{12}$, and all $H_i$ are distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "命运的彼方", "background": "kkksc03 与 lzn 踏上了一次寻宝之旅，经过 kkksc03 与 lzn 的不懈努力，终于解开了所有的谜题，依靠御风飞翔之术越过了大河。终点距离他们只有一步之遥了……\n", "description": "他们现在位于的地方，是连接古代和现代两个世界的结界法阵。一般来说，即使是神也是不能跨越时空的，但是， lin\\_toto 给了他们一点提示，告诉了他们这个法阵的玄机。并告诉 kkksc03 与 lzn，只要同心协力，就可以改变命运，突破结界的枷锁。\n\nlin\\_toto 带他们走到了法阵的前方。展示在他们面前的是一堵巨大却残缺的墙，由若干组连续魔力砖组成（每个魔力砖均为正方体，大小均为 $1\\times1\\times1$），且各组魔力砖的高度各不相同。根据经验，只有让最少连续 $K$ 组成这堵墙的魔力砖的高度相同，才能突破法阵的入口，召唤来自神界的帮助，跨越时空。\n\n两人可完成的操作如下：从墙上搬走一块砖，或是从旁边的魔力砖堆（假设可用的魔力砖无限）中拿一块砖放置在墙上。每搬运一块砖都会耗费 kkksc03 与 lzn 一点能量值。lzn 希望让两人所耗费的能量值最少。\n\n现在kkksc03带着这个问题找到了聪明的你，你能帮他计算出他所需付出的最少能量值吗？\n", "inputFormat": "一行两个正整数 $N, K$。下面 $N$ 行，每行代表这组魔力砖的高度 $H _ i$。\n", "outputFormat": "一个整数，表示所需付出的最少能量值。\n", "hint": "对于 $10\\%$ 的数据, 有 $1≤ N ≤ 10, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $20\\%$ 的数据，有 $K = 2$。\n\n对于 $40\\%$ 的数据，有 $1≤ N ≤ 500, 2 ≤ K ≤ N, 0 ≤ H _ i ≤ N$。\n\n对于 $80\\%$ 的数据，有 $1≤ N ≤ 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ 6$。\n\n对于 $100\\%$ 的数据，有 $1≤ N ≤ 5\\times 10 ^ 5 , 2 ≤ K ≤ N, 0 ≤ H _ i ≤ 10 ^ {12}$，并且所有 $H _ i$ 互不相同。\n", "locale": "zh-CN"}}}
{"pid": "P2264", "type": "P", "difficulty": 3, "samples": [["3\nlove\nso\nmuch\nI love you so much.\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创", "洛谷月赛"], "title": "情书", "background": "一封好的情书需要撰写人全身心的投入。CYY 同学看上了可爱的 c** 想对她表白，但却不知道自己写的情书是否能感动她，现在他带着情书请你来帮助他。", "description": "为了帮助 CYY，我们定义一个量化情书好坏的标准感动值。判断感动值的方法如下：\n1. 在情书的一句话中若含有给定词汇列表中的特定单词，则感动值加 $1$，但每一单词在同一句话中出现多次感动值不叠加，不同单词不受影响。保证输入的单词不重复。\n2. 每句话以英文句号定界。\n3. 全文不区分大小写。\n4. 一句话中可能包含英文引号，比如```you're```。", "inputFormat": "第一行包含一个数字 $n$，表示导致感动值提升的词汇列表中单词的数量，随后 $n$ 行是给定单词，每行一个。保证单词只包含英文字母。\n\n最后一行为情书正文，保证只包含以下几种字符：英文字母、数字、空格、英文逗号、英文句号、英文引号。", "outputFormat": "一个数字 $g$，表示情书带来的感动值。", "hint": "对于所有的数据，保证 $1 \\le n \\le 100$，每个单词不超过 $50$ 字符，全文不超过 $1000$ 字符。", "locale": "zh-CN", "translations": {"en": {"title": "Love Letter", "background": "A good love letter requires the writer’s wholehearted devotion. Student CYY has a crush on the cute c** and wants to confess to her, but he doesn’t know whether his love letter can move her. Now he brings the letter to you for help.", "description": "To help CYY, we define a quantitative standard called the touching value to evaluate the quality of a love letter. The rules for determining the touching value are as follows:\n1. In a sentence of the love letter, if it contains a specific word from the given vocabulary list, the touching value increases by 1. However, multiple occurrences of the same word in the same sentence do not stack. Different words are not affected by each other. It is guaranteed that the input words are not duplicated.\n2. Each sentence is delimited by an English period.\n3. Matching is case-insensitive throughout the text.\n4. A sentence may contain English quotation marks or apostrophes, for example ```you're```.", "inputFormat": "The first line contains a number $n$, the number of words in the vocabulary list that increase the touching value. The next $n$ lines contain the given words, one per line. It is guaranteed that each word contains only English letters.\n\nThe last line is the full text of the love letter. It is guaranteed to contain only the following characters: English letters, digits, spaces, English commas, English periods, and English quotation marks.", "outputFormat": "A single number $g$, representing the touching value contributed by the love letter.", "hint": "Constraints: For all testdata, it is guaranteed that $1 \\le n \\le 100$, each word is at most $50$ characters long, and the full text is at most $1000$ characters long.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "情书", "background": "一封好的情书需要撰写人全身心的投入。CYY 同学看上了可爱的 c** 想对她表白，但却不知道自己写的情书是否能感动她，现在他带着情书请你来帮助他。", "description": "为了帮助 CYY，我们定义一个量化情书好坏的标准感动值。判断感动值的方法如下：\n1. 在情书的一句话中若含有给定词汇列表中的特定单词，则感动值加 $1$，但每一单词在同一句话中出现多次感动值不叠加，不同单词不受影响。保证输入的单词不重复。\n2. 每句话以英文句号定界。\n3. 全文不区分大小写。\n4. 一句话中可能包含英文引号，比如```you're```。", "inputFormat": "第一行包含一个数字 $n$，表示导致感动值提升的词汇列表中单词的数量，随后 $n$ 行是给定单词，每行一个。保证单词只包含英文字母。\n\n最后一行为情书正文，保证只包含以下几种字符：英文字母、数字、空格、英文逗号、英文句号、英文引号。", "outputFormat": "一个数字 $g$，表示情书带来的感动值。", "hint": "对于所有的数据，保证 $1 \\le n \\le 100$，每个单词不超过 $50$ 字符，全文不超过 $1000$ 字符。", "locale": "zh-CN"}}}
{"pid": "P2265", "type": "P", "difficulty": 4, "samples": [["3 5", "56"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "组合数学", "逆元", "洛谷月赛"], "title": "路边的水沟", "background": "某市有一个巨大的水沟网络，可以近似看成一个 $n \\times m$ 的矩形网格，网格的每个格点都安装了闸门，我们将从水沟网络右下角的闸门到左上角的闸门的一条路径称为水流。\n", "description": "现给定水沟网的长和宽，求该水沟网中所有只包含向左和向上移动的水流数量。\n", "inputFormat": "输入共 $1$ 行，包含两个整数 $n$ 和 $m$。", "outputFormat": "输出一个数字 $ans$，即水流的数量。由于答案可能很大，请输出答案对 $1000000007$ 取模的结果。\n", "hint": "对于 $30\\%$ 的数据，$1 \\leq m,n \\leq 10$。\n\n对于 $50\\%$ 的数据，$1 \\leq m,n \\leq 1,000$。\n\n对于 $80\\%$ 的数据，$1 \\leq m,n \\leq 50,000$。\n\n对于 $100\\%$ 的数据，$1 \\leq m,n \\leq 1,000,000$。", "locale": "zh-CN", "translations": {"en": {"title": "Roadside Ditch", "background": "There is a huge ditch network in a certain city, which can be approximated as an $n \\times m$ rectangular grid. A sluice gate is installed at every grid point. We call any path from the sluice gate at the bottom-right corner of the network to the sluice gate at the top-left corner a “water flow.”", "description": "Given the length and width of the ditch network, find the number of water flows that only move left and up.", "inputFormat": "The input consists of $1$ line containing two integers $n$ and $m$.", "outputFormat": "Output a single integer $ans$, the number of water flows. Since the answer can be large, output the result modulo $1000000007$.", "hint": "For $30\\%$ of the testdata, $1 \\leq m, n \\leq 10$.\n\nFor $50\\%$ of the testdata, $1 \\leq m, n \\leq 1{,}000$.\n\nFor $80\\%$ of the testdata, $1 \\leq m, n \\leq 50{,}000$.\n\nFor $100\\%$ of the testdata, $1 \\leq m, n \\leq 1{,}000{,}000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "路边的水沟", "background": "某市有一个巨大的水沟网络，可以近似看成一个 $n \\times m$ 的矩形网格，网格的每个格点都安装了闸门，我们将从水沟网络右下角的闸门到左上角的闸门的一条路径称为水流。\n", "description": "现给定水沟网的长和宽，求该水沟网中所有只包含向左和向上移动的水流数量。\n", "inputFormat": "输入共 $1$ 行，包含两个整数 $n$ 和 $m$。", "outputFormat": "输出一个数字 $ans$，即水流的数量。由于答案可能很大，请输出答案对 $1000000007$ 取模的结果。\n", "hint": "对于 $30\\%$ 的数据，$1 \\leq m,n \\leq 10$。\n\n对于 $50\\%$ 的数据，$1 \\leq m,n \\leq 1,000$。\n\n对于 $80\\%$ 的数据，$1 \\leq m,n \\leq 50,000$。\n\n对于 $100\\%$ 的数据，$1 \\leq m,n \\leq 1,000,000$。", "locale": "zh-CN"}}}
{"pid": "P2266", "type": "P", "difficulty": 5, "samples": [["3 5 5\n20 21 20 20 21\n19 22 20 60 80\n80 90 80 70 90\n1 0 0 0 0\n0 0 0 0 0\n1 0 0 0 1\n", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "爱的供养", "background": "在很久很久以前，有一只野心勃勃的骑士 Mori，带领自己的军队，征战世界，所向披靡……\n\n有一天，他跨过千山万水，越过重重山岭，来到了一个美丽的（程序）国度。在这里，他与 Soha 公主一见钟情，并最终坠入爱河。\n\n从此，他们幸福快乐地生活在了一起……\n", "description": "但好日子却不长久。Mori 的手下大将恶魔猎手在此时背叛了他，自立为王，率领深藏在世界之轴的龙族叛变，并掳走了 Soha 公主。Mori 在与恶魔猎手的战斗中，遭遇围杀，被困在一个荒芜人烟的大岛上。但在经过勘探后，他惊喜地发现，Soha 也同时被恶魔猎手关押在这座岛上！\n\n经过精心研究，Mori 发现关押 Soha 的地牢需要若干把钥匙才能打开，而钥匙则被埋藏在一系列的法阵中。凭借着自己的身手与魔力，Mori 是能够破解法阵、获得钥匙的。法阵是一个 $M\\times N$ 大小的矩阵，法阵中的每一格都具有自己的高度。其中，有一部分格中埋藏着钥匙，但 Mori 法力不足，无法直接挖取。而他发现，只需从埋藏着钥匙的格子出发向四周的格子走，并在不少于 $T$ 个的独立法阵格子中施法（包括埋藏钥匙的格子本身也要施法），便可挖出钥匙。换句话说，在他每次挖掘钥匙之前，都必须先从埋藏钥匙的格子开始，走过周围的 $T-1$ 个不重复的格子。\n\n虽然 Mori 施法不需要耗费体力，但他在移动的过程中，需要耗费一定量的体力（体育不及格 233）。从一个格子移动到另一个格子中所耗费的体力值为两个格子的高度值之差的绝对值。\n\n对于每个埋藏钥匙的格子来说，定义其难度值 $P$ 为在施法过程中，每次在各个格子间移动的所需耗费的体力的最大值。\n\n而 Mori 则希望让这个难度值越小越好。因为，只有保留足够多的体力，他才能营救 Soha，并两人合力打败恶魔猎手的背叛。\n\n所以，他想知道所有埋藏钥匙的点的难度值的和最小值可以是多少？\n", "inputFormat": "第 $1$ 行，三个整数 $M$、$N$、$T$。\n\n接下来 $M$ 行，每行 $N$ 个整数，为各格的高度。\n\n接下来 $M$ 行，每行 $N$ 个 $0$ 或 $1$， $1$ 代表该格点埋藏有钥匙。\n", "outputFormat": "一个整数，代表难度值的和的最小值。\n", "hint": "$1 ≤ M, N ≤ 600$\n\n$1 ≤ T ≤ M\\times N$\n", "locale": "zh-CN", "translations": {"en": {"title": "The Offering of Love", "background": "A long, long time ago, there was an ambitious knight named Mori, who led his army to conquer the world, invincible wherever he went.\n\nOne day, after crossing thousands of mountains and rivers and scaling ridge after ridge, he arrived at a beautiful (programming) kingdom. There, he fell in love at first sight with Princess Soha, and they eventually fell in love.\n\nFrom then on, they lived happily together...", "description": "But good days did not last. Mori’s great general, the Demon Hunter, betrayed him at this moment, proclaimed himself king, rallied the dragons hidden in the Axis of the World to rebel, and abducted Princess Soha. In the battle against the Demon Hunter, Mori was besieged and trapped on a deserted, uninhabited island. However, after scouting, he was pleasantly surprised to discover that Soha had also been imprisoned by the Demon Hunter on this very island.\n\nAfter careful study, Mori found that the dungeon holding Soha required several keys to open, and the keys were buried within a series of magic arrays. By virtue of his skills and magic, Mori can break the arrays and obtain the keys. The magic array is a matrix of size $M\\times N$, and each cell of the array has its own height. Some cells have keys buried in them, but Mori’s magic is insufficient to dig them out directly. He discovered that if he starts from a cell that has a buried key and walks to adjacent cells (up, down, left, right), and casts spells on at least $T$ distinct cells (including the key cell itself), he can dig out the key. In other words, before digging each key, he must start from the cell with the key and then visit $T-1$ other distinct cells.\n\nAlthough casting spells costs no stamina, moving costs a certain amount of stamina (failed PE, 233). The stamina cost to move from one cell to another is the absolute difference between the height values of the two cells.\n\nFor each cell that contains a key, define its difficulty value $P$ as the maximum stamina cost among all moves between cells during the casting process.\n\nMori wants this difficulty value to be as small as possible. Only by conserving enough stamina can he rescue Soha, and together they can defeat the treacherous Demon Hunter.\n\nSo, he wants to know the minimum possible sum of the difficulty values over all cells that contain keys.", "inputFormat": "The first line contains three integers $M$, $N$, and $T$.\n\nThe next $M$ lines each contain $N$ integers, giving the height of each cell.\n\nThe next $M$ lines each contain $N$ integers $0$ or $1$, where $1$ means the cell contains a buried key.", "outputFormat": "Output a single integer, the minimum possible sum of difficulty values.", "hint": "$1 ≤ M, N ≤ 600$\n\n$1 ≤ T ≤ M\\times N$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爱的供养", "background": "在很久很久以前，有一只野心勃勃的骑士 Mori，带领自己的军队，征战世界，所向披靡……\n\n有一天，他跨过千山万水，越过重重山岭，来到了一个美丽的（程序）国度。在这里，他与 Soha 公主一见钟情，并最终坠入爱河。\n\n从此，他们幸福快乐地生活在了一起……\n", "description": "但好日子却不长久。Mori 的手下大将恶魔猎手在此时背叛了他，自立为王，率领深藏在世界之轴的龙族叛变，并掳走了 Soha 公主。Mori 在与恶魔猎手的战斗中，遭遇围杀，被困在一个荒芜人烟的大岛上。但在经过勘探后，他惊喜地发现，Soha 也同时被恶魔猎手关押在这座岛上！\n\n经过精心研究，Mori 发现关押 Soha 的地牢需要若干把钥匙才能打开，而钥匙则被埋藏在一系列的法阵中。凭借着自己的身手与魔力，Mori 是能够破解法阵、获得钥匙的。法阵是一个 $M\\times N$ 大小的矩阵，法阵中的每一格都具有自己的高度。其中，有一部分格中埋藏着钥匙，但 Mori 法力不足，无法直接挖取。而他发现，只需从埋藏着钥匙的格子出发向四周的格子走，并在不少于 $T$ 个的独立法阵格子中施法（包括埋藏钥匙的格子本身也要施法），便可挖出钥匙。换句话说，在他每次挖掘钥匙之前，都必须先从埋藏钥匙的格子开始，走过周围的 $T-1$ 个不重复的格子。\n\n虽然 Mori 施法不需要耗费体力，但他在移动的过程中，需要耗费一定量的体力（体育不及格 233）。从一个格子移动到另一个格子中所耗费的体力值为两个格子的高度值之差的绝对值。\n\n对于每个埋藏钥匙的格子来说，定义其难度值 $P$ 为在施法过程中，每次在各个格子间移动的所需耗费的体力的最大值。\n\n而 Mori 则希望让这个难度值越小越好。因为，只有保留足够多的体力，他才能营救 Soha，并两人合力打败恶魔猎手的背叛。\n\n所以，他想知道所有埋藏钥匙的点的难度值的和最小值可以是多少？\n", "inputFormat": "第 $1$ 行，三个整数 $M$、$N$、$T$。\n\n接下来 $M$ 行，每行 $N$ 个整数，为各格的高度。\n\n接下来 $M$ 行，每行 $N$ 个 $0$ 或 $1$， $1$ 代表该格点埋藏有钥匙。\n", "outputFormat": "一个整数，代表难度值的和的最小值。\n", "hint": "$1 ≤ M, N ≤ 600$\n\n$1 ≤ T ≤ M\\times N$\n", "locale": "zh-CN"}}}
{"pid": "P2267", "type": "P", "difficulty": 5, "samples": [["3 100\r\n1 888 1\r\n", "6"], ["4 100\r\n1 2 3 4\r\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "洛谷月赛"], "title": "琪琪的项链", "background": "Piet 项目的一对开发者 laosb（吕世博）与 scjyholy（叶嘉琪）最近一直为中国学生站长联盟的童鞋们所津津乐道，不仅仅因为他们天天在某群中秀恩爱，而且他们还经常被用作题目背景。现在我们以他们为背景来引出一道问题。", "description": "话说 laosb 在与 scjyholy 配对成功 $1$ 周年后， laosb 花光了其所有的积蓄，为 scjyholy 买了一条项链。但是，他发现店中项链的样式实在太少，于是他想买回一条项链，组成自己的独特样式，以使 scjyholy 感动。\n\n首先 laosb 把项链中所有珠子取下，然后从左到右，选出若干珠子（至少 $1$ 颗），组成新的项链。因为项链珠子有很多颜色，laosb 希望知道他一共能组合出多少种不同的样式。\n\n如图所示，假设原始的项链有 $3$ 颗珠子：蓝、黄、蓝，这样他一共有如下的选择方法：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1.png) \n\n由于答案可能很大，请输出答案 $\\bmod\\ M$ 的结果。", "inputFormat": "第 $1$ 行两个整数 $N,M\\ (1 \\le N \\le 5 \\times 10^5,1 \\le M \\le 10^9)$，其中 $N$ 为原始珠子数目。\n\n第 $2$ 行 $N$ 个非负整数 $A_i\\ (0 \\le A_i \\le 10^9)$，每个整数代表一颗珠子颜色，相同整数表示相同颜色，不同整数表示不同颜色。", "outputFormat": "一个整数，表示样式总数 $\\bmod\\ M$ 的值。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Qiqi's Necklace", "background": "A pair of developers of the Piet project, laosb (Lv Shibo) and scjyholy (Ye Jiaqi), have recently become a hot topic among the members of the Chinese Student Webmasters Union, not only because they show their affection every day in a certain chat group, but also because they are often used as problem backgrounds. Now we use them as the background to introduce a problem.", "description": "After the $1$-year anniversary of pairing up with scjyholy, laosb spent all his savings to buy a necklace for scjyholy. However, he found that the store had too few styles, so he wanted to buy one and assemble his own unique style to move scjyholy.\n\nFirst, laosb removes all the beads from the necklace. Then, from left to right, he selects some beads (at least $1$ bead) to form a new necklace. Because there are many bead colors, laosb wants to know how many different styles he can form in total.\n\nAs shown in the figure, suppose the original necklace has $3$ beads: blue, yellow, blue. Then he has the following choices:\n\n![](https://cdn.luogu.com.cn/upload/pic/1.png)\n\nSince the answer can be large, please output the result $\\bmod\\ M$.", "inputFormat": "The first line contains two integers $N,M\\ (1 \\le N \\le 5 \\times 10^5,1 \\le M \\le 10^9)$, where $N$ is the number of original beads.\n\nThe second line contains $N$ non-negative integers $A_i\\ (0 \\le A_i \\le 10^9)$, each representing the color of a bead. Equal integers indicate the same color, and different integers indicate different colors.", "outputFormat": "Output a single integer: the total number of styles $\\bmod\\ M$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "琪琪的项链", "background": "Piet 项目的一对开发者 laosb（吕世博）与 scjyholy（叶嘉琪）最近一直为中国学生站长联盟的童鞋们所津津乐道，不仅仅因为他们天天在某群中秀恩爱，而且他们还经常被用作题目背景。现在我们以他们为背景来引出一道问题。", "description": "话说 laosb 在与 scjyholy 配对成功 $1$ 周年后， laosb 花光了其所有的积蓄，为 scjyholy 买了一条项链。但是，他发现店中项链的样式实在太少，于是他想买回一条项链，组成自己的独特样式，以使 scjyholy 感动。\n\n首先 laosb 把项链中所有珠子取下，然后从左到右，选出若干珠子（至少 $1$ 颗），组成新的项链。因为项链珠子有很多颜色，laosb 希望知道他一共能组合出多少种不同的样式。\n\n如图所示，假设原始的项链有 $3$ 颗珠子：蓝、黄、蓝，这样他一共有如下的选择方法：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1.png) \n\n由于答案可能很大，请输出答案 $\\bmod\\ M$ 的结果。", "inputFormat": "第 $1$ 行两个整数 $N,M\\ (1 \\le N \\le 5 \\times 10^5,1 \\le M \\le 10^9)$，其中 $N$ 为原始珠子数目。\n\n第 $2$ 行 $N$ 个非负整数 $A_i\\ (0 \\le A_i \\le 10^9)$，每个整数代表一颗珠子颜色，相同整数表示相同颜色，不同整数表示不同颜色。", "outputFormat": "一个整数，表示样式总数 $\\bmod\\ M$ 的值。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2268", "type": "P", "difficulty": 3, "samples": [["Atcag\nActag\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] DNA 分子的最佳比对", "background": null, "description": "$\\operatorname{DNA}$ 分子是人类遗传信息的载体，它间接地指导蛋白质的合成。$\\operatorname{DNA}$ 分子是由四种核苷酸组成的长链，这四种核苷酸分别是腺嘌呤核苷酸（用 $\\operatorname{A}$ 代表）、鸟嘌呤核苷酸（用 $\\operatorname{G}$ 代表）、胞嘧啶核苷酸（用 $\\operatorname{C}$ 代表）和胸腺嘧啶核苷酸（用 $\\operatorname{T}$ 代表）。习惯上用一个字符集为 $\\{\\operatorname{A,T,C,G}\\}$ 的字符串来表示一个 $\\operatorname{DNA}$ 分子序列，如 $\\operatorname{CGTTAGA}$。\n\n在生物进化过程中，$\\operatorname{DNA}$ 分子可能发生各种各样的突变。这种突变形成了生物遗传信息的改变，从而使生物得以分化，构成了生物的多样性。\n\n主要的突变有三种：\n\n1. 在一个 $\\operatorname{DNA}$ 序列中插入一个新的核苷酸，\n2. $\\operatorname{DNA}$ 序列中丢失了一个核苷酸，\n3. $\\operatorname{DNA}$ 序列中的某个核苷酸被另一个核苷酸所取代。\n\n所谓两个 $\\operatorname{DNA}$ 序列的一个比对是寻找一种排列方式，使得两个 $\\operatorname{DNA}$ 序列在同样的位置上有相同的核苷酸，而若在同样的位置上两个 $\\operatorname{DNA}$ 序列的核苷酸不同，则是由三种突变之一得到。例如，对两个 $\\operatorname{DNA}$ 序列 $T_1 =\\operatorname{ATCAG}$，$T_2 =\\operatorname{ACTAG}$，可以按如下方式比对：（$-$ 表示空白）\n\n比对一：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $-$ |\n| $\\text C$ | $\\text C$ |\n| $-$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n也可以按如下方式比对：\n\n比对二：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $\\text C$ |\n| $\\text C$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n如果两个 $\\operatorname{DNA}$ 序列在相同的位置上有越多相同的核苷酸对，则表明它们之间越相似，即它们存在功能上的相似性和进化史上的亲缘关系。\n\n对于两个 $\\operatorname{DNA}$ 序列的一个比对，规定如下得分方式：\n\n1. 一个同样的位置上有相同的核苷酸对，则可得 $1$ 分；\n2. 一个同样的位置上有不同的核苷酸对，则得 $0$ 分；\n3. 如果在某个位置上一个序列有核苷酸，而另一个序列在该位置上为 $-$，则得 $-2$ 分。\n\n例如，比对一的得分是 $0$ 分，比对二的得分是 $3$ 分。\n\n问题是：对于两个 $\\operatorname{DNA}$ 序列，寻找一种比对方式，使得它们的得分最高。", "inputFormat": "输入数据共有两行。\n\n第一行为 $\\text{DNA}$ 序列 $T _ 1$，第二行为 $\\text{DNA}$ 序列 $T _ 2$。序列的长度不大于 $1000$。序列中的字母是英文小写或者大写字母。", "outputFormat": "程序运行结束时，在屏幕上输出所找出的最大的得分。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Optimal Alignment of DNA Molecules", "background": "", "description": "$\\operatorname{DNA}$ molecules are carriers of human genetic information, indirectly guiding protein synthesis. A $\\operatorname{DNA}$ molecule is a long chain composed of four nucleotides: adenine nucleotide (denoted by $\\operatorname{A}$), guanine nucleotide (denoted by $\\operatorname{G}$), cytosine nucleotide (denoted by $\\operatorname{C}$), and thymine nucleotide (denoted by $\\operatorname{T}$). By convention, a $\\{\\operatorname{A,T,C,G}\\}$-alphabet string is used to represent a $\\operatorname{DNA}$ sequence, such as $\\operatorname{CGTTAGA}$.\n\nDuring biological evolution, $\\operatorname{DNA}$ molecules may undergo various mutations. These mutations change genetic information, enabling species differentiation and forming biological diversity.\n\nThere are three main types of mutations:\n1. Inserting a new nucleotide into a $\\operatorname{DNA}$ sequence,\n2. Deleting a nucleotide from a $\\operatorname{DNA}$ sequence,\n3. Substituting one nucleotide in the $\\operatorname{DNA}$ sequence with another.\n\nAn alignment of two $\\operatorname{DNA}$ sequences is an arrangement that places the two sequences so that identical nucleotides appear at the same positions. If the nucleotides at the same position differ, that difference is attributed to one of the three types of mutations. For example, for two $\\operatorname{DNA}$ sequences $T_1 =\\operatorname{ATCAG}$, $T_2 =\\operatorname{ACTAG}$, one possible alignment is as follows (where $-$ denotes a gap):\n\nAlignment 1:\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $-$ |\n| $\\text C$ | $\\text C$ |\n| $-$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\nAnother possible alignment is:\n\nAlignment 2:\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $\\text C$ |\n| $\\text C$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\nThe more identical nucleotide pairs the two $\\operatorname{DNA}$ sequences have at the same positions, the more similar they are, indicating functional similarity and phylogenetic relatedness.\n\nThe scoring rules for an alignment of two $\\operatorname{DNA}$ sequences are as follows:\n1. If the nucleotides at the same position are identical, score $1$ point.\n2. If the nucleotides at the same position are different, score $0$ points.\n3. If one sequence has a nucleotide at some position while the other has $-$ at that position, score $-2$ points.\n\nFor example, the score of Alignment 1 is $0$ points, and the score of Alignment 2 is $3$ points.\n\nThe task is: Given two $\\operatorname{DNA}$ sequences, find an alignment that maximizes the score.", "inputFormat": "The input consists of two lines.\n\nThe first line is the $\\text{DNA}$ sequence $T _ 1$, and the second line is the $\\text{DNA}$ sequence $T _ 2$. The length of each sequence does not exceed $1000$. The letters in the sequences are lowercase or uppercase English letters.", "outputFormat": "Output the maximum score found.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] DNA 分子的最佳比对", "background": null, "description": "$\\operatorname{DNA}$ 分子是人类遗传信息的载体，它间接地指导蛋白质的合成。$\\operatorname{DNA}$ 分子是由四种核苷酸组成的长链，这四种核苷酸分别是腺嘌呤核苷酸（用 $\\operatorname{A}$ 代表）、鸟嘌呤核苷酸（用 $\\operatorname{G}$ 代表）、胞嘧啶核苷酸（用 $\\operatorname{C}$ 代表）和胸腺嘧啶核苷酸（用 $\\operatorname{T}$ 代表）。习惯上用一个字符集为 $\\{\\operatorname{A,T,C,G}\\}$ 的字符串来表示一个 $\\operatorname{DNA}$ 分子序列，如 $\\operatorname{CGTTAGA}$。\n\n在生物进化过程中，$\\operatorname{DNA}$ 分子可能发生各种各样的突变。这种突变形成了生物遗传信息的改变，从而使生物得以分化，构成了生物的多样性。\n\n主要的突变有三种：\n\n1. 在一个 $\\operatorname{DNA}$ 序列中插入一个新的核苷酸，\n2. $\\operatorname{DNA}$ 序列中丢失了一个核苷酸，\n3. $\\operatorname{DNA}$ 序列中的某个核苷酸被另一个核苷酸所取代。\n\n所谓两个 $\\operatorname{DNA}$ 序列的一个比对是寻找一种排列方式，使得两个 $\\operatorname{DNA}$ 序列在同样的位置上有相同的核苷酸，而若在同样的位置上两个 $\\operatorname{DNA}$ 序列的核苷酸不同，则是由三种突变之一得到。例如，对两个 $\\operatorname{DNA}$ 序列 $T_1 =\\operatorname{ATCAG}$，$T_2 =\\operatorname{ACTAG}$，可以按如下方式比对：（$-$ 表示空白）\n\n比对一：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $-$ |\n| $\\text C$ | $\\text C$ |\n| $-$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n也可以按如下方式比对：\n\n比对二：\n\n| $T_1$ | $T_2$ |\n| :----------- | :----------- |\n| $\\text A$ | $\\text A$ |\n| $\\text T$ | $\\text C$ |\n| $\\text C$ | $\\text T$ |\n| $\\text A$ | $\\text A$ |\n| $\\text G$ | $\\text G$ |\n\n如果两个 $\\operatorname{DNA}$ 序列在相同的位置上有越多相同的核苷酸对，则表明它们之间越相似，即它们存在功能上的相似性和进化史上的亲缘关系。\n\n对于两个 $\\operatorname{DNA}$ 序列的一个比对，规定如下得分方式：\n\n1. 一个同样的位置上有相同的核苷酸对，则可得 $1$ 分；\n2. 一个同样的位置上有不同的核苷酸对，则得 $0$ 分；\n3. 如果在某个位置上一个序列有核苷酸，而另一个序列在该位置上为 $-$，则得 $-2$ 分。\n\n例如，比对一的得分是 $0$ 分，比对二的得分是 $3$ 分。\n\n问题是：对于两个 $\\operatorname{DNA}$ 序列，寻找一种比对方式，使得它们的得分最高。", "inputFormat": "输入数据共有两行。\n\n第一行为 $\\text{DNA}$ 序列 $T _ 1$，第二行为 $\\text{DNA}$ 序列 $T _ 2$。序列的长度不大于 $1000$。序列中的字母是英文小写或者大写字母。", "outputFormat": "程序运行结束时，在屏幕上输出所找出的最大的得分。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2269", "type": "P", "difficulty": 4, "samples": [["3 1 3                       \n0 1 5\n1 0 2\n5 2 0\n0 0.1 0.05\n0.1 0 0.05\n0.05 0.05 0", "5 0.0500"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] 高质量的数据传输", "background": "", "description": "$%原题面是：![](https://cdn.luogu.com.cn/upload/pic/1325.png)$\n\n目前的网络为了支持各种 QoS 需求，在进行路由选择时所考虑的路由参数主要有网络路径中的参数如时延、网络带宽、时延抖动及丢失率等参数，在某种高质量的数据传输工程中仅考虑网络的时延和丢失率两个参数。\n\n网络可以用一个简单无向图 $G = (V, E)$ 来表示，$V$ 是网络中结点的集合，$E$ 是两个结点之间的链路，即边。依据工程的要求，每条边上有两个参数：时延和丢失率。\n\n* 边上的时延 $t$ 是数据从该边的一个端点传输到另一个端点所需要的时间，取为整数，单位是毫秒，$0 \\le t \\le 100$。\n* 一条边的丢失率 $p$ 是数据从该边的一个端点传输到另一个端点后丢失数据的百分比，$0 \\le p \\le 0.1$。\n\n所谓网络 $G$ 上的路由选择是：给定 $G$ 中的两个结点 $u$ 和 $v$，找出这两个结点之间的一条路径。\n\n---\n\n对于网络 $G$ 的一条路径 $P = v_1, v_2, v_3, \\dots, v_n$，假设该路径上各边的时延和丢失率分别是：\n\n$$\nt_1, t_2, t_3, \\dots, t_{n-1}, \\quad p_1, p_2, p_3, \\dots, p_{n-1}\n$$\n\n则数据从 $v_1$ 传输到 $v_n$ 的时延是：\n\n$$\n\\sum_{i=1}^{n-1} t_i\n$$\n\n丢失率是：\n\n$$\n1 - \\prod_{i=1}^{n-1} (1 - p_i)\n$$\n\n---\n\n本题的高质量数据传输要求：如果数据要从一个结点 $u$ 传输到另一个结点 $v$，则所传输路径的丢失率是从 $u$ 到 $v$ 的所有路径中最小的，而且在该前提下时延最小。\n\n请为网络图给定的两个结点，找出满足高质量数据传输要求的路径。", "inputFormat": "共有 $2n+1$ 行。\n\n第 $1$ 行是网络的节点数 $n\\ (1 \\le n \\le 200)$ 和数据要传输的两个结点的序号 $i,j\\ (1 \\le i,j \\le n, i \\ne j)$。\n\n第 $2$ 行到第 $n+1$ 行是时延 $t$ 的邻接矩阵，其元素 $t_{u,v}\\ (-1 \\le t_{u,v} \\le 100,t_{i,j}=t_{j,i},t_{i,i}=0)$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的时延，当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n第 $n+2$ 行到第 $2n+1$ 行是丢失率 $p$ 的邻接矩阵，其元素 $p_{u,v}$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的丢失率（最多精确到小数点后 $4$ 位），当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n保证 $t_{u,v}=-1$ 当且仅当 $p_{u,v}=-1$。\n\n保证 $p_{u,v} \\in \\{-1\\} \\cup [0,0.1],p_{u,v}=p_{u,v},p_{u,u}=0$。", "outputFormat": "共 $1$ 行，输出所找出的路径的时延和丢失率。（时延是整数，直接输出即可；丢失率是实数，精确到小数点后 $4$ 位）", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] High-Quality Data Transmission", "background": "", "description": "Original statement (image): ![](https://cdn.luogu.com.cn/upload/pic/1325.png)\n\nTo support various QoS requirements, modern networks consider parameters such as path delay, bandwidth, delay jitter, and loss rate when selecting routes. In a certain high-quality data transmission project, only two parameters are considered: network delay and loss rate.\n\nThe network can be represented by a simple undirected graph $G = (V, E)$, where $V$ is the set of nodes in the network and $E$ is the set of links (edges) between pairs of nodes. According to the project requirements, each edge has two parameters: latency and loss rate.\n\n- The latency $t$ on an edge is the time required for data to travel from one endpoint to the other. It is an integer measured in milliseconds, with $0 \\le t \\le 100$.\n- The loss rate $p$ of an edge is the percentage of data lost after transmission from one endpoint to the other, with $0 \\le p \\le 0.1$.\n\nRoute selection on network $G$ is defined as follows: given two nodes $u$ and $v$ in $G$, find a path between them.\n\nFor a path $P = v_1, v_2, v_3, \\dots, v_n$ in $G$, suppose the latencies and loss rates of the edges on the path are\n$$\nt_1, t_2, t_3, \\dots, t_{n-1}, \\quad p_1, p_2, p_3, \\dots, p_{n-1}.\n$$\nThen the total latency from $v_1$ to $v_n$ is\n$$\n\\sum_{i=1}^{n-1} t_i,\n$$\nand the total loss rate is\n$$\n1 - \\prod_{i=1}^{n-1} (1 - p_i).\n$$\n\nHigh-quality data transmission requirement: if data is to be transmitted from a node $u$ to another node $v$, then among all paths from $u$ to $v$, the chosen path must have the minimal loss rate; subject to this, the latency must be minimal.\n\nGiven two nodes in the network graph, find a path that satisfies the high-quality data transmission requirement.", "inputFormat": "There are $2n+1$ lines.\n\n- Line $1$: the number of nodes $n$ ($1 \\le n \\le 200$) and the indices of the two nodes $i, j$ to transmit data between ($1 \\le i, j \\le n$, $i \\ne j$).\n\n- Lines $2$ to $n+1$: the adjacency matrix of latencies $t$. Each element $t_{u,v}$ ($-1 \\le t_{u,v} \\le 100$, $t_{u,v} = t_{v,u}$, $t_{u,u} = 0$) gives the latency of the edge from node $u$ to node $v$. A value of $-1$ indicates that there is no edge between $u$ and $v$.\n\n- Lines $n+2$ to $2n+1$: the adjacency matrix of loss rates $p$. Each element $p_{u,v}$ gives the loss rate of the edge from node $u$ to node $v$ (up to $4$ decimal places). A value of $-1$ indicates that there is no edge between $u$ and $v$.\n\nIt is guaranteed that $t_{u,v} = -1$ if and only if $p_{u,v} = -1$.\n\nIt is guaranteed that $p_{u,v} \\in \\{-1\\} \\cup [0, 0.1]$, $p_{u,v} = p_{v,u}$, and $p_{u,u} = 0$.", "outputFormat": "Output $1$ line containing the latency and the loss rate of the chosen path. The latency is an integer and should be printed directly; the loss rate is a real number printed to $4$ decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 高质量的数据传输", "background": "", "description": "$%原题面是：![](https://cdn.luogu.com.cn/upload/pic/1325.png)$\n\n目前的网络为了支持各种 QoS 需求，在进行路由选择时所考虑的路由参数主要有网络路径中的参数如时延、网络带宽、时延抖动及丢失率等参数，在某种高质量的数据传输工程中仅考虑网络的时延和丢失率两个参数。\n\n网络可以用一个简单无向图 $G = (V, E)$ 来表示，$V$ 是网络中结点的集合，$E$ 是两个结点之间的链路，即边。依据工程的要求，每条边上有两个参数：时延和丢失率。\n\n* 边上的时延 $t$ 是数据从该边的一个端点传输到另一个端点所需要的时间，取为整数，单位是毫秒，$0 \\le t \\le 100$。\n* 一条边的丢失率 $p$ 是数据从该边的一个端点传输到另一个端点后丢失数据的百分比，$0 \\le p \\le 0.1$。\n\n所谓网络 $G$ 上的路由选择是：给定 $G$ 中的两个结点 $u$ 和 $v$，找出这两个结点之间的一条路径。\n\n---\n\n对于网络 $G$ 的一条路径 $P = v_1, v_2, v_3, \\dots, v_n$，假设该路径上各边的时延和丢失率分别是：\n\n$$\nt_1, t_2, t_3, \\dots, t_{n-1}, \\quad p_1, p_2, p_3, \\dots, p_{n-1}\n$$\n\n则数据从 $v_1$ 传输到 $v_n$ 的时延是：\n\n$$\n\\sum_{i=1}^{n-1} t_i\n$$\n\n丢失率是：\n\n$$\n1 - \\prod_{i=1}^{n-1} (1 - p_i)\n$$\n\n---\n\n本题的高质量数据传输要求：如果数据要从一个结点 $u$ 传输到另一个结点 $v$，则所传输路径的丢失率是从 $u$ 到 $v$ 的所有路径中最小的，而且在该前提下时延最小。\n\n请为网络图给定的两个结点，找出满足高质量数据传输要求的路径。", "inputFormat": "共有 $2n+1$ 行。\n\n第 $1$ 行是网络的节点数 $n\\ (1 \\le n \\le 200)$ 和数据要传输的两个结点的序号 $i,j\\ (1 \\le i,j \\le n, i \\ne j)$。\n\n第 $2$ 行到第 $n+1$ 行是时延 $t$ 的邻接矩阵，其元素 $t_{u,v}\\ (-1 \\le t_{u,v} \\le 100,t_{i,j}=t_{j,i},t_{i,i}=0)$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的时延，当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n第 $n+2$ 行到第 $2n+1$ 行是丢失率 $p$ 的邻接矩阵，其元素 $p_{u,v}$ 的值是第 $u$ 个结点到第 $v$ 个结点的边的丢失率（最多精确到小数点后 $4$ 位），当其值为 $-1$ 时表示第 $u$ 个结点到第 $v$ 个结点无边。\n\n保证 $t_{u,v}=-1$ 当且仅当 $p_{u,v}=-1$。\n\n保证 $p_{u,v} \\in \\{-1\\} \\cup [0,0.1],p_{u,v}=p_{u,v},p_{u,u}=0$。", "outputFormat": "共 $1$ 行，输出所找出的路径的时延和丢失率。（时延是整数，直接输出即可；丢失率是实数，精确到小数点后 $4$ 位）", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2270", "type": "P", "difficulty": 5, "samples": [["4 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] 奶牛的运算", "background": "", "description": "最近，Farmer John 农场里的奶牛正在学习数学基础课。这天，奶牛 Besty 学会了加减法运算和括号的使用。\n\nFarmer John 为了考察 Besty 的学习情况，写了如下一个算式：\n\n$S =A_1-A_2-\\ldots-A_n$\n\n接着，Farmer John 告诉 Besty，这个算式中省略了 $K$ 个括号。将这 $K$ 个括号加入该算式中，就会得到一种算式方案。\n\n例如：$S=A_1-A_2-A_3-A_4$，$K = 2$，则 $S = (A_1)-A_2 - (A_3- A_4)$ 就是一种算式方案。\n\n而对任意两个算式方案，$S'$ 和 $S''$ 本质不同是指：存在某数列 $A_1,\\ldots,A_n$ 满足 $S'\\ne S''$。否则就是本质相同。\n\n例如：$S'=(A_1)-A_2-(A_3-A_4)$ 与 $S''=(A_1-A_2)-(A_3-A_4)$ 就是本质相同的算式方案。\n\n现在，Farmer John 告诉奶牛 Besty 算式中项的个数 $N$ 和括号的个数 $K$（数列 $A$ 是变量，我们不需要关心它），他想考考 Besty 究竟有多少本质不同的算式方案。\n", "inputFormat": "输入文件仅一行，依次为两个整数 $N$ 和 $K$。（$1<N,K<100$）。\n", "outputFormat": "输出文件仅一行，为本质不同的算式方案数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Cow's Arithmetic", "background": "", "description": "Recently, the cows on Farmer John's farm have been taking a basic math class. One day, the cow Besty learned addition, subtraction, and how to use parentheses.\n\nTo test Besty's learning, Farmer John wrote the following expression:\n\n$S =A_1-A_2-\\ldots-A_n$\n\nThen Farmer John told Besty that $K$ pairs of parentheses were omitted in this expression. Adding these $K$ pairs of parentheses to the expression produces one expression scheme.\n\nFor example: $S=A_1-A_2-A_3-A_4$, $K = 2$, then $S = (A_1)-A_2 - (A_3- A_4)$ is one such scheme.\n\nFor any two expression schemes, $S'$ and $S''$, they are essentially different if there exists a sequence $A_1, \\ldots, A_n$ such that $S' \\ne S''$. Otherwise, they are essentially the same.\n\nFor example, $S'=(A_1)-A_2-(A_3-A_4)$ and $S''=(A_1-A_2)-(A_3-A_4)$ are essentially the same schemes.\n\nNow, Farmer John tells Besty the number of terms $N$ and the number of pairs of parentheses $K$ in the expression (the sequence $A$ is variable; we do not need to care about it). He wants to test how many essentially different expression schemes there are.", "inputFormat": "The input contains a single line with two integers $N$ and $K$。($1<N,K<100$)。", "outputFormat": "Output a single line containing the number of essentially different expression schemes.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 奶牛的运算", "background": "", "description": "最近，Farmer John 农场里的奶牛正在学习数学基础课。这天，奶牛 Besty 学会了加减法运算和括号的使用。\n\nFarmer John 为了考察 Besty 的学习情况，写了如下一个算式：\n\n$S =A_1-A_2-\\ldots-A_n$\n\n接着，Farmer John 告诉 Besty，这个算式中省略了 $K$ 个括号。将这 $K$ 个括号加入该算式中，就会得到一种算式方案。\n\n例如：$S=A_1-A_2-A_3-A_4$，$K = 2$，则 $S = (A_1)-A_2 - (A_3- A_4)$ 就是一种算式方案。\n\n而对任意两个算式方案，$S'$ 和 $S''$ 本质不同是指：存在某数列 $A_1,\\ldots,A_n$ 满足 $S'\\ne S''$。否则就是本质相同。\n\n例如：$S'=(A_1)-A_2-(A_3-A_4)$ 与 $S''=(A_1-A_2)-(A_3-A_4)$ 就是本质相同的算式方案。\n\n现在，Farmer John 告诉奶牛 Besty 算式中项的个数 $N$ 和括号的个数 $K$（数列 $A$ 是变量，我们不需要关心它），他想考考 Besty 究竟有多少本质不同的算式方案。\n", "inputFormat": "输入文件仅一行，依次为两个整数 $N$ 和 $K$。（$1<N,K<100$）。\n", "outputFormat": "输出文件仅一行，为本质不同的算式方案数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2272", "type": "P", "difficulty": 5, "samples": [["6 6 20070603\n1 2\n2 1\n1 3\n2 4\n5 6\n6 4", "3\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "图论", "2007", "各省省选", "浙江", "记忆化搜索", "拓扑排序", "强连通分量", "Tarjan"], "title": "[ZJOI2007] 最大半连通子图", "background": null, "description": "一个有向图 $G=\\left(V,E\\right)$ 称为半连通的 (Semi-Connected)，如果满足：$\\forall u,v\\in V$，满足 $u\\to v$ 或 $v\\to u$，即对于图中任意两点 $u,v$，存在一条 $u$ 到 $v$ 的有向路径或者从 $v$ 到 $u$ 的有向路径。\n\n若 $G'=\\left(V',E'\\right)$ 满足 $V'\\subseteq V$，$E'$ 是 $E$ 中端点属于 $V'$ 的所有边，则称 $G'$ 是 $G$ 的一个导出子图。若 $G'$ 是 $G$ 的导出子图，且 $G'$ 半连通，则称 $G'$ 为 $G$ 的半连通子图。若 $G'$ 是 $G$ 所有半连通子图中包含节点数最多的，则称 $G'$ 是 $G$ 的最大半连通子图。\n\n给定一个有向图 $G$，请求出 $G$ 的最大半连通子图拥有的节点数 $K$，以及不同的最大半连通子图的数目 $C$。由于 $C$ 可能比较大，仅要求输出 $C$ 对 $X$ 的余数。", "inputFormat": "第一行包含三个整数 $N,M,X$。$N,M$ 分别表示图 $G$ 的点数与边数，$X$ 的意义如上文所述。\n\n接下来 $M$ 行，每行两个正整数 $a,b$，表示一条有向边 $\\left(a,b\\right)$。图中的每个点将编号为 $1,2,3\\dots N$，保证输入中同一个 $\\left(a,b\\right)$ 不会出现两次。", "outputFormat": "应包含两行，第一行包含一个整数 $K$，第二行包含整数 $C\\bmod X$。", "hint": "对于 $100\\%$ 的数据，$N\\le 10^5$，$M\\le 10^6$，$X\\le 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2007] Maximum Semi-Connected Subgraph", "background": "", "description": "A directed graph $G=\\left(V,E\\right)$ is called semi-connected if it satisfies: $\\forall u,v\\in V$, either $u\\to v$ or $v\\to u$, that is, for any two vertices $u,v$ in the graph, there exists a directed path from $u$ to $v$ or from $v$ to $u$.\n\nIf $G'=\\left(V',E'\\right)$ satisfies $V'\\subseteq V$ and $E'$ is the set of all edges in $E$ whose endpoints lie in $V'$, then $G'$ is called an induced subgraph of $G$. If $G'$ is an induced subgraph of $G$ and $G'$ is semi-connected, then $G'$ is called a semi-connected subgraph of $G$. If $G'$ contains the largest number of vertices among all semi-connected subgraphs of $G$, then $G'$ is called a maximum semi-connected subgraph of $G$.\n\nGiven a directed graph $G$, find $K$, the number of vertices in a maximum semi-connected subgraph of $G$, and $C$, the number of different maximum semi-connected subgraphs. Since $C$ may be large, output $C$ modulo $X$.", "inputFormat": "The first line contains three integers $N,M,X$. $N$ and $M$ denote the number of vertices and edges of graph $G$, respectively. The meaning of $X$ is as described above.\n\nThe next $M$ lines each contain two positive integers $a,b$, representing a directed edge $\\left(a,b\\right)$. Each vertex is labeled $1,2,3\\dots N$. It is guaranteed that the same $\\left(a,b\\right)$ does not appear twice in the input.", "outputFormat": "Output two lines. The first line contains an integer $K$. The second line contains an integer $C\\bmod X$.", "hint": "For $100\\%$ of the testdata, $N\\le 10^5$, $M\\le 10^6$, $X\\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2007] 最大半连通子图", "background": null, "description": "一个有向图 $G=\\left(V,E\\right)$ 称为半连通的 (Semi-Connected)，如果满足：$\\forall u,v\\in V$，满足 $u\\to v$ 或 $v\\to u$，即对于图中任意两点 $u,v$，存在一条 $u$ 到 $v$ 的有向路径或者从 $v$ 到 $u$ 的有向路径。\n\n若 $G'=\\left(V',E'\\right)$ 满足 $V'\\subseteq V$，$E'$ 是 $E$ 中端点属于 $V'$ 的所有边，则称 $G'$ 是 $G$ 的一个导出子图。若 $G'$ 是 $G$ 的导出子图，且 $G'$ 半连通，则称 $G'$ 为 $G$ 的半连通子图。若 $G'$ 是 $G$ 所有半连通子图中包含节点数最多的，则称 $G'$ 是 $G$ 的最大半连通子图。\n\n给定一个有向图 $G$，请求出 $G$ 的最大半连通子图拥有的节点数 $K$，以及不同的最大半连通子图的数目 $C$。由于 $C$ 可能比较大，仅要求输出 $C$ 对 $X$ 的余数。", "inputFormat": "第一行包含三个整数 $N,M,X$。$N,M$ 分别表示图 $G$ 的点数与边数，$X$ 的意义如上文所述。\n\n接下来 $M$ 行，每行两个正整数 $a,b$，表示一条有向边 $\\left(a,b\\right)$。图中的每个点将编号为 $1,2,3\\dots N$，保证输入中同一个 $\\left(a,b\\right)$ 不会出现两次。", "outputFormat": "应包含两行，第一行包含一个整数 $K$，第二行包含整数 $C\\bmod X$。", "hint": "对于 $100\\%$ 的数据，$N\\le 10^5$，$M\\le 10^6$，$X\\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P2273", "type": "P", "difficulty": 4, "samples": [["3 3\r\n1,2,2,3,1,2\r\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2002", "各省省选", "湖南", "bitset"], "title": "[HNOI2002] 交换", "background": "", "description": "给定 $n$ 个整数寄存器 $r_1,r_2,\\cdots,r_n$。我们定义一个比较交换指令 $\\text{CE}(a,b)$ 如下：如果 $r_a$ 中的值大于 $r_b$ 中的值，则交换寄存器 $r_a$ 和 $r_b$ 中的值。其中，$1\\leq a<b\\leq n$。\n\n一个比较交换程序（简称为 CE-程序）就是一个有限交换指令序列。称一个 CE-程序为 MIN-程序，如果在该程序执行之后，寄存器 $r_1$ 中的值是所有寄存器中的值的最小者；如果一个 CE-程序在删除其中任意一条交换指令后，仍然是一个 MIN-程序，则称该 CE-程序是可靠的 MIN-程序。\n\n你的任务是：给定一个 CE-程序 P，编程求出至少在程序 P 的尾部增加多少条指令才能使程序 P 成为可靠的 MIN-程序。\n\n例如，考虑下列三个寄存器的 CE-程序：\n\n$\\text{CE}(1, 2)$，$\\text{CE}(2, 3)$，$\\text{CE}(1, 2)$。\n\n我们仅需要增加两条指令：$\\text{CE}(1, 3)$，$\\text{CE}(1, 2)$ 就可使该 CE-程序成为可靠的 MIN-程序。", "inputFormat": "共两行，第一行为用空格分开的两个整数 $n,m$；其中 $n$ 为寄存器个数（$2\\leq n\\leq 10 ^ 4$），$m$ 为 CE-程序的指令条数（$0\\leq m\\leq20000$）。\n\n接下来为 $m$ 条指令 $\\text{CE}(a,b)$，$a,b$ 之间用逗号分隔，两条指令之间也用逗号分隔。", "outputFormat": "共一行一个整数即应该增加的最少指令条数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Swap", "background": "", "description": "Given $n$ integer registers $r_1, r_2, \\cdots, r_n$. We define a compare-exchange instruction $\\text{CE}(a,b)$ as follows: if the value in $r_a$ is greater than the value in $r_b$, then swap the values in registers $r_a$ and $r_b$. Here, $1 \\leq a < b \\leq n$.\n\nA compare-exchange program (abbreviated as a CE program) is a finite sequence of compare-exchange instructions. A CE program is called a MIN program if, after executing the program, the value in register $r_1$ is the minimum among all registers. If a CE program remains a MIN program after removing any single instruction from it, then the CE program is called a reliable MIN program.\n\nYour task is: given a CE program $P$, compute the minimum number of instructions that must be appended to the end of $P$ to make $P$ a reliable MIN program.\n\nFor example, consider the following CE program on three registers:\n\n$\\text{CE}(1, 2)$, $\\text{CE}(2, 3)$, $\\text{CE}(1, 2)$.\n\nWe only need to append two instructions: $\\text{CE}(1, 3)$, $\\text{CE}(1, 2)$ to make this CE program a reliable MIN program.", "inputFormat": "There are two lines. The first line contains two space-separated integers $n$ and $m$; here $n$ is the number of registers ($2 \\leq n \\leq 10 ^ 4$), and $m$ is the number of instructions in the CE program ($0 \\leq m \\leq 20000$).\n\nThe second line contains $m$ instructions $\\text{CE}(a, b)$. Inside each instruction, $a$ and $b$ are separated by a comma, and different instructions are also separated by commas.", "outputFormat": "Output a single integer on one line: the minimal number of instructions that should be appended.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 交换", "background": "", "description": "给定 $n$ 个整数寄存器 $r_1,r_2,\\cdots,r_n$。我们定义一个比较交换指令 $\\text{CE}(a,b)$ 如下：如果 $r_a$ 中的值大于 $r_b$ 中的值，则交换寄存器 $r_a$ 和 $r_b$ 中的值。其中，$1\\leq a<b\\leq n$。\n\n一个比较交换程序（简称为 CE-程序）就是一个有限交换指令序列。称一个 CE-程序为 MIN-程序，如果在该程序执行之后，寄存器 $r_1$ 中的值是所有寄存器中的值的最小者；如果一个 CE-程序在删除其中任意一条交换指令后，仍然是一个 MIN-程序，则称该 CE-程序是可靠的 MIN-程序。\n\n你的任务是：给定一个 CE-程序 P，编程求出至少在程序 P 的尾部增加多少条指令才能使程序 P 成为可靠的 MIN-程序。\n\n例如，考虑下列三个寄存器的 CE-程序：\n\n$\\text{CE}(1, 2)$，$\\text{CE}(2, 3)$，$\\text{CE}(1, 2)$。\n\n我们仅需要增加两条指令：$\\text{CE}(1, 3)$，$\\text{CE}(1, 2)$ 就可使该 CE-程序成为可靠的 MIN-程序。", "inputFormat": "共两行，第一行为用空格分开的两个整数 $n,m$；其中 $n$ 为寄存器个数（$2\\leq n\\leq 10 ^ 4$），$m$ 为 CE-程序的指令条数（$0\\leq m\\leq20000$）。\n\n接下来为 $m$ 条指令 $\\text{CE}(a,b)$，$a,b$ 之间用逗号分隔，两条指令之间也用逗号分隔。", "outputFormat": "共一行一个整数即应该增加的最少指令条数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2274", "type": "P", "difficulty": 5, "samples": [["20", "((X)X(X))X"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] 树的排序", "background": "", "description": "1. 空树编号为 $0$，只有根节点的树编号为 $1$；\n2. 设 $m$ 为一任意非负整数，那么任意一棵有 $m$ 个节点的树的编号小于任意一棵有 $m+1$ 个节点的树；\n3. 设 $A,B$ 是两棵节点数相同的树（$A,B$ 不相同），则 $A$ 编号比 $B$ 小时，一定满足下面两个条件之一（反之亦然）：\n   1. $A$ 左子树编号小于 $B$ 左子树编号；\n   2. $A$ 左子树编号等于 $B$ 左子树编号（即 $A,B$ 左子树形态相同），且 $A$ 右子树编号小于 $B$ 右子树编号；\n4. 编号按照正常的规则，编号应是连续的非负整数，任意一棵树唯一对应一个编号，任意一个非负整数唯一对应一棵树。\n\n（注：上述树均指二叉树）", "inputFormat": "仅 $1$ 行，为一个整数 $n$，$1\\le n\\le 500{,}000{,}000$。\n\n对于 $10\\%$ 的数据，保证树节点个数不超过三个。", "outputFormat": "仅 $1$ 行，为对应编号为 $n$ 的二叉树。按下列方式输出：\n\n- 如果是一个结点的二叉树，则输出 $X$；\n- 如果二叉树的左、右子树分别为 $L$ 和 $R$，$L,R$ 的输出形式分别为 $L'$ 和 $R'$，则输出为 $\\texttt{(}L'\\texttt{)}X\\texttt{(}R'\\texttt{)}$，当左子树为空时，输出为 $X\\texttt{(}R'\\texttt{)}$，当左子树为空时 $\\texttt{(}L'\\texttt{)}X$。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Ordering of Binary Trees", "background": "", "description": "1. The empty tree is numbered $0$, and the tree with only the root node is numbered $1$.\n2. Let $m$ be any non-negative integer. Then the number of any tree with $m$ nodes is smaller than the number of any tree with $m+1$ nodes.\n3. Let $A, B$ be two trees with the same number of nodes (with $A \\ne B$). The number of $A$ is smaller than that of $B$ if and only if one of the following holds:\n   1. The number of the left subtree of $A$ is smaller than the number of the left subtree of $B$.\n   2. The numbers of the left subtrees of $A$ and $B$ are equal (that is, the left subtrees of $A$ and $B$ have the same shape), and the number of the right subtree of $A$ is smaller than the number of the right subtree of $B$.\n4. Following the usual rule, the numbers are consecutive non-negative integers. Each tree corresponds to a unique number, and each non-negative integer corresponds to a unique tree.\n\n(Note: all trees mentioned above are binary trees.)", "inputFormat": "A single line with an integer $n$, $1\\le n\\le 500{,}000{,}000$.\n\nFor $10\\%$ of the testdata, the number of nodes in the tree does not exceed three.", "outputFormat": "A single line: the binary tree corresponding to number $n$. Output as follows:\n\n- If it is a one-node binary tree, output $X$.\n- If the left and right subtrees are $L$ and $R$, and their respective outputs are $L'$ and $R'$, then output $\\texttt{(}L'\\texttt{)}X\\texttt{(}R'\\texttt{)}$; when the left subtree is empty, output $X\\texttt{(}R'\\texttt{)}$; when the right subtree is empty, output $\\texttt{(}L'\\texttt{)}X$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 树的排序", "background": "", "description": "1. 空树编号为 $0$，只有根节点的树编号为 $1$；\n2. 设 $m$ 为一任意非负整数，那么任意一棵有 $m$ 个节点的树的编号小于任意一棵有 $m+1$ 个节点的树；\n3. 设 $A,B$ 是两棵节点数相同的树（$A,B$ 不相同），则 $A$ 编号比 $B$ 小时，一定满足下面两个条件之一（反之亦然）：\n   1. $A$ 左子树编号小于 $B$ 左子树编号；\n   2. $A$ 左子树编号等于 $B$ 左子树编号（即 $A,B$ 左子树形态相同），且 $A$ 右子树编号小于 $B$ 右子树编号；\n4. 编号按照正常的规则，编号应是连续的非负整数，任意一棵树唯一对应一个编号，任意一个非负整数唯一对应一棵树。\n\n（注：上述树均指二叉树）", "inputFormat": "仅 $1$ 行，为一个整数 $n$，$1\\le n\\le 500{,}000{,}000$。\n\n对于 $10\\%$ 的数据，保证树节点个数不超过三个。", "outputFormat": "仅 $1$ 行，为对应编号为 $n$ 的二叉树。按下列方式输出：\n\n- 如果是一个结点的二叉树，则输出 $X$；\n- 如果二叉树的左、右子树分别为 $L$ 和 $R$，$L,R$ 的输出形式分别为 $L'$ 和 $R'$，则输出为 $\\texttt{(}L'\\texttt{)}X\\texttt{(}R'\\texttt{)}$，当左子树为空时，输出为 $X\\texttt{(}R'\\texttt{)}$，当左子树为空时 $\\texttt{(}L'\\texttt{)}X$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2275", "type": "P", "difficulty": 0, "samples": [["5 5 1\r\n3 3\r\n1 1 1 1 1\r\n1 6 9 5 1\r\n1 3 10 3 1\r\n1 2 1 2 1\r\n1 1 1 1 1\r\n\r\n4 1 1 1 2\r\n1 1 1 1 1\r\n1 2 3 1 2\r\n1 2 1 1 1\r\n1 1 1 1 1\r\n", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "平衡树", "湖南", "概率论"], "title": "[HNOI2002] 灌溉问题", "background": "", "description": "久居山区的人们一直都为水源的问题而烦恼，缺水使得他们的农田无法获得好的收成。最近，一条好消息传来：政$%$府将提供资金为他们开凿一条水道，将唯一的水源——山顶一个湖泊中的水引入他们的村落。人们顿时都高兴了起来，他们的农田终于可以丰收了。\n\n然而，在开凿水道时，人们却遇到了一个难题：怎样开凿才能得到最大的丰收呢？\n\n要知道，山顶的水是非常有限的，并不可能灌溉到每一个地区。而且，不同地区的土地肥沃程度也是不一样的。虽然并非只有河流经过的地区才能被灌溉，但也不可能将水从很远的地方引过来。你现在必须想办法帮他们解决这个问题。\n\n首先，你可以将这个山区划分成 $N \\times N$ 的区域，湖泊的位置为 $(x,y)$（下标从 $1$ 开始），以及每个区域的海拔高度（开凿出的河流显然只能从严格高处往严格低流），还有每块区域的土地价值也是已知的。\n\n同时，需要注意的是，你的河流是不允许有分支（支流）的，最多只能灌溉 $M$ 块土地，而且被灌溉的土地只能在离河流的 $R$ 格范围以内（包含对角线）。\n\n注意：河流经过的地区土地依然保持其价值，可以选择是否对其灌溉。\n\n你的目的就是找出一条最好的开凿河流的方法，使得能灌溉的土地价值总和最高。", "inputFormat": "第一行为三个整数 $N,M,R\\ (1 \\le N \\le 20,1 \\le M \\le \\min\\{N^2,100\\},1 \\le R \\le \\min\\{N-1,5\\})$，分别给出区域的边长，最多灌溉的土地数和被灌溉土地到河流的最大允许距离。\n\n第二行为两个整数 $x,y\\ (1 \\le x,y \\le N)$，给出了湖泊的位置。\n\n下面一个 $N \\times N$ 的矩阵 $A\\ (1 \\le A_{i,j} \\le 200)$，其中 $A_{i,j}$ 表示 $(i,j)$ 的高度。\n\n下面一个 $N \\times N$ 的矩阵 $V\\ (1 \\le V_{i,j} \\le 200)$，其中 $V_{i,j}$ 表示 $(i,j)$ 的价值。", "outputFormat": "输出一个整数，表示你的程序计算出的最大价值。", "hint": "样例解释：\n\n以下是一种最优解。\n\n河流流向：\n\n$$(3,3) \\to (2,3) \\to (2,2) \\to (3,2) \\to (3,1)$$\n\n灌溉的土地：\n\n$$(1,1),(2,2),(3,2),(3,3),(4,2)$$", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Irrigation Problem", "background": "", "description": "People living in mountainous areas have long been troubled by the lack of water sources, which prevents their farmland from achieving good harvests. Recently, good news arrived: the govern$%$ment will provide funds to dig a canal to bring water from the only source—a lake on the mountain top—down to their village. People were overjoyed; their fields could finally yield a good harvest.\n\nHowever, when digging the canal, they encountered a problem: how should they dig to obtain the greatest harvest?\n\nNote that the water at the mountain top is very limited and cannot irrigate every region. Moreover, different regions have different levels of soil fertility. Although irrigation is not limited only to regions that the river passes through, water cannot be brought from very far away. You must find a way to solve this problem.\n\nFirst, you can divide the mountainous area into an $N \\times N$ grid, with the lake located at $(x,y)$ (indices start from $1$). The elevation of each cell is known (the excavated river can only flow strictly from higher elevation to strictly lower elevation), and the value of each cell of land is also known.\n\nAt the same time, note that the river is not allowed to have branches (tributaries). At most $M$ plots can be irrigated, and irrigated plots must be within $R$ cells of the river (including diagonals).\n\nNote: Land that the river passes through still retains its value; you may choose whether to irrigate it.\n\nYour goal is to find the best way to dig the river such that the total value of irrigated land is maximized.", "inputFormat": "The first line contains three integers $N,M,R\\ (1 \\le N \\le 20,1 \\le M \\le \\min\\{N^2,100\\},1 \\le R \\le \\min\\{N-1,5\\})$, giving the side length of the grid, the maximum number of plots that can be irrigated, and the maximum allowed distance from an irrigated plot to the river.\n\nThe second line contains two integers $x,y\\ (1 \\le x,y \\le N)$, giving the location of the lake.\n\nThen follows an $N \\times N$ matrix $A\\ (1 \\le A_{i,j} \\le 200)$, where $A_{i,j}$ denotes the elevation of $(i,j)$.\n\nThen follows an $N \\times N$ matrix $V\\ (1 \\le V_{i,j} \\le 200)$, where $V_{i,j}$ denotes the value of $(i,j)$.", "outputFormat": "Output a single integer, the maximum total value computed by your program.", "hint": "Sample explanation:\n\nAn optimal solution is as follows.\n\nRiver flow:\n\n$$(3,3) \\to (2,3) \\to (2,2) \\to (3,2) \\to (3,1)$$\n\nIrrigated plots:\n\n$$(1,1),(2,2),(3,2),(3,3),(4,2)$$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 灌溉问题", "background": "", "description": "久居山区的人们一直都为水源的问题而烦恼，缺水使得他们的农田无法获得好的收成。最近，一条好消息传来：政$%$府将提供资金为他们开凿一条水道，将唯一的水源——山顶一个湖泊中的水引入他们的村落。人们顿时都高兴了起来，他们的农田终于可以丰收了。\n\n然而，在开凿水道时，人们却遇到了一个难题：怎样开凿才能得到最大的丰收呢？\n\n要知道，山顶的水是非常有限的，并不可能灌溉到每一个地区。而且，不同地区的土地肥沃程度也是不一样的。虽然并非只有河流经过的地区才能被灌溉，但也不可能将水从很远的地方引过来。你现在必须想办法帮他们解决这个问题。\n\n首先，你可以将这个山区划分成 $N \\times N$ 的区域，湖泊的位置为 $(x,y)$（下标从 $1$ 开始），以及每个区域的海拔高度（开凿出的河流显然只能从严格高处往严格低流），还有每块区域的土地价值也是已知的。\n\n同时，需要注意的是，你的河流是不允许有分支（支流）的，最多只能灌溉 $M$ 块土地，而且被灌溉的土地只能在离河流的 $R$ 格范围以内（包含对角线）。\n\n注意：河流经过的地区土地依然保持其价值，可以选择是否对其灌溉。\n\n你的目的就是找出一条最好的开凿河流的方法，使得能灌溉的土地价值总和最高。", "inputFormat": "第一行为三个整数 $N,M,R\\ (1 \\le N \\le 20,1 \\le M \\le \\min\\{N^2,100\\},1 \\le R \\le \\min\\{N-1,5\\})$，分别给出区域的边长，最多灌溉的土地数和被灌溉土地到河流的最大允许距离。\n\n第二行为两个整数 $x,y\\ (1 \\le x,y \\le N)$，给出了湖泊的位置。\n\n下面一个 $N \\times N$ 的矩阵 $A\\ (1 \\le A_{i,j} \\le 200)$，其中 $A_{i,j}$ 表示 $(i,j)$ 的高度。\n\n下面一个 $N \\times N$ 的矩阵 $V\\ (1 \\le V_{i,j} \\le 200)$，其中 $V_{i,j}$ 表示 $(i,j)$ 的价值。", "outputFormat": "输出一个整数，表示你的程序计算出的最大价值。", "hint": "样例解释：\n\n以下是一种最优解。\n\n河流流向：\n\n$$(3,3) \\to (2,3) \\to (2,2) \\to (3,2) \\to (3,1)$$\n\n灌溉的土地：\n\n$$(1,1),(2,2),(3,2),(3,3),(4,2)$$", "locale": "zh-CN"}}}
{"pid": "P2276", "type": "P", "difficulty": 6, "samples": [["9 3 1 3 1", "9 3 1 3 2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] 农场的果树", "background": "", "description": "Farmer John 的农场环境优美，其中生长了许多苹果树，而苹果正是 Farmer John 农场里奶牛最喜爱的食物！\n\n一天，闲来无事的奶牛 Besty 坐在苹果树下。她忽然发现，农场里的苹果树都是的二叉树！——当然，这种二叉树并不是严格意义上的二叉树，它可能有左子树而不存在右子树，反之也有可能。\n\n刚学过 Computer Science 的 Besty 给二叉树上每个节点记录下其左子树的节点个数。例如下面的一棵树：\n\n```cpp\n                3\n              /  \\\n             1     3\n            / \\   / \\\n           0   0  1  0\n                 / \\\n                0   0\n```\n随后，用先序遍历给这棵树编码，需要注意的是叶子节点上的数值不必考虑。为了更方便表述，Besty 又在这样的编码前加入一个数字：该树上节点总数。于是，上面这棵数的编码就是：9 3 1 3 1。\n\n这样一来，每一种编码就对应了一棵唯一的二叉树。\n\nBesty 还发现，农场里的所有二叉树的节点总数都相同！并且在节点总数确定的情况下，对任意的合法编码，农场里都存在唯一的一棵树与之对应！\n\n于是，Besty 将所有的二叉树按照上述编码规则编码，然后以编码为关键字进行字典排序。\n\n现在，对于一个给定的编码，奶牛 Besty 想知道字典排序紧跟其后的编码是什么。\n", "inputFormat": "输入文件名：next.in\n\n输入文件有一行，为一个二叉树的编码。保证节点总数不超过 $5\\times10^3$。\n", "outputFormat": "输出文件名：next.out\n\n输出文件有一行，为按字典排序紧跟其后的编码是什么。如果输入的编码是最后一个，则输出 `-1`。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Fruit Trees on the Farm", "background": "", "description": "Farmer John’s farm is beautiful, with many apple trees, and apples are the cows’ favorite food on Farmer John’s farm.\n\nOne day, the idle cow Besty sat under an apple tree. She suddenly noticed that the apple trees on the farm are all binary trees! — Of course, this kind of binary tree is not a strict (full) binary tree; it may have a left subtree but no right subtree, and vice versa.\n\nHaving just learned some Computer Science, Besty wrote down, for each node in a binary tree, the number of nodes in its left subtree. For example, consider the following tree:\n\n```cpp\n                3\n              /  \\\n             1     3\n            / \\   / \\\n           0   0  1  0\n                 / \\\n                0   0\n```\nThen, she encodes this tree by a preorder traversal. Note that the values on leaf nodes are ignored. For convenience, Besty also puts one number at the front of such an encoding: the total number of nodes in the tree. Therefore, the code for the above tree is: 9 3 1 3 1.\n\nIn this way, each code corresponds to a unique binary tree.\n\nBesty also found that all binary trees on the farm have the same total number of nodes. Moreover, with a fixed total number of nodes, for any valid code, there exists exactly one tree on the farm that corresponds to it.\n\nSo, Besty encodes all the binary trees according to the rule above, then sorts them lexicographically by their codes.\n\nNow, given one code, Besty wants to know which code comes immediately after it in lexicographic order.", "inputFormat": "Input file name: next.in.\n\nThe input contains one line: a code of a binary tree. It is guaranteed that the total number of nodes does not exceed $5\\times10^3$.", "outputFormat": "Output file name: next.out.\n\nOutput one line: the code that comes immediately after the given code in lexicographic order. If the input code is the last one, output `-1`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 农场的果树", "background": "", "description": "Farmer John 的农场环境优美，其中生长了许多苹果树，而苹果正是 Farmer John 农场里奶牛最喜爱的食物！\n\n一天，闲来无事的奶牛 Besty 坐在苹果树下。她忽然发现，农场里的苹果树都是的二叉树！——当然，这种二叉树并不是严格意义上的二叉树，它可能有左子树而不存在右子树，反之也有可能。\n\n刚学过 Computer Science 的 Besty 给二叉树上每个节点记录下其左子树的节点个数。例如下面的一棵树：\n\n```cpp\n                3\n              /  \\\n             1     3\n            / \\   / \\\n           0   0  1  0\n                 / \\\n                0   0\n```\n随后，用先序遍历给这棵树编码，需要注意的是叶子节点上的数值不必考虑。为了更方便表述，Besty 又在这样的编码前加入一个数字：该树上节点总数。于是，上面这棵数的编码就是：9 3 1 3 1。\n\n这样一来，每一种编码就对应了一棵唯一的二叉树。\n\nBesty 还发现，农场里的所有二叉树的节点总数都相同！并且在节点总数确定的情况下，对任意的合法编码，农场里都存在唯一的一棵树与之对应！\n\n于是，Besty 将所有的二叉树按照上述编码规则编码，然后以编码为关键字进行字典排序。\n\n现在，对于一个给定的编码，奶牛 Besty 想知道字典排序紧跟其后的编码是什么。\n", "inputFormat": "输入文件名：next.in\n\n输入文件有一行，为一个二叉树的编码。保证节点总数不超过 $5\\times10^3$。\n", "outputFormat": "输出文件名：next.out\n\n输出文件有一行，为按字典排序紧跟其后的编码是什么。如果输入的编码是最后一个，则输出 `-1`。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2277", "type": "P", "difficulty": 4, "samples": [["5 5 5 5\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2003", "各省省选", "湖南"], "title": "[HNOI2003] 24点游戏", "background": "", "description": "为了培养小孩的计算能力，大人们经常给小孩玩这样的游戏：从一副扑克牌中任意抽出 $4$ 张扑克，要小孩用 `+`、`-`、`*`、`/` 和括号组成一个合法的表达式，并使表达式的值为 $24$ 点。这种游戏就是所谓的“$24$ 点游戏”。\n\n请你编程求出对于给出的任意 $4$ 个正整数 $a$、$b$、$c$、$d$，请你编程求出这 $4$ 个整数能组成多少个值为 $24$ 的不同表达式。\n", "inputFormat": "输入文件共一行，为四个正整数 $a$、$b$、$c$、$d$。（$0 \\le a, b, c, d \\le 100$）\n", "outputFormat": "输出文件为由 $a$、$b$、$c$、$d$ 组成的值为 $24$ 的表达式个数，如没有，输出 $0$。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] 24 Game", "background": "", "description": "To develop children's arithmetic skills, adults often have them play the following game: draw any $4$ cards from a deck of playing cards, and ask the child to use `+`, `-`, `*`, `/`, and parentheses to form a valid expression whose value is $24$. This game is called the \"24 game\".\n\nGiven any four integers $a$, $b$, $c$, $d$, compute how many different expressions with value $24$ can be formed from these $4$ integers.", "inputFormat": "The input contains one line with four integers $a$, $b$, $c$, $d$ ($0 \\le a, b, c, d \\le 100$).", "outputFormat": "Output the number of expressions equal to $24$ that can be formed from $a$, $b$, $c$, $d$. If there are none, output $0$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 24点游戏", "background": "", "description": "为了培养小孩的计算能力，大人们经常给小孩玩这样的游戏：从一副扑克牌中任意抽出 $4$ 张扑克，要小孩用 `+`、`-`、`*`、`/` 和括号组成一个合法的表达式，并使表达式的值为 $24$ 点。这种游戏就是所谓的“$24$ 点游戏”。\n\n请你编程求出对于给出的任意 $4$ 个正整数 $a$、$b$、$c$、$d$，请你编程求出这 $4$ 个整数能组成多少个值为 $24$ 的不同表达式。\n", "inputFormat": "输入文件共一行，为四个正整数 $a$、$b$、$c$、$d$。（$0 \\le a, b, c, d \\le 100$）\n", "outputFormat": "输出文件为由 $a$、$b$、$c$、$d$ 组成的值为 $24$ 的表达式个数，如没有，输出 $0$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2278", "type": "P", "difficulty": 3, "samples": [["1 1 5 3 \n2 10 5 1 \n3 12 7 2 \n4 20 2 3 \n5 21 9 4 \n6 22 2 4 \n7 23 5 2 \n8 24 2 4 \n", "1 6\n3 19\n5 30\n6 32\n8 34\n4 35\n7 40\n2 42\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2003", "各省省选", "湖南", "优先队列", "队列"], "title": "[HNOI2003] 操作系统", "background": "", "description": "写一个程序来模拟操作系统的进程调度。假设该系统只有一个 CPU，每一个进程的到达时间，执行时间和运行优先级都是已知的。其中运行优先级用自然数表示，数字越大，则优先级越高。\n\n如果一个进程到达的时候 CPU 是空闲的，则它会一直占用 CPU 直到该进程结束。除非在这个过程中，有一个比它优先级高的进程要运行。在这种情况下，这个新的（优先级更高的）进程会占用 CPU，而老的只有等待。\n\n如果一个进程到达时，CPU 正在处理一个比它优先级高或优先级相同的进程，则这个（新到达的）进程必须等待。\n\n一旦 CPU 空闲，如果此时有进程在等待，则选择优先级最高的先运行。如果有多个优先级最高的进程，则选择到达时间最早的。\n", "inputFormat": "输入包含若干行，每一行有四个自然数（均不超过 $10^8$），分别是进程号，到达时间，执行时间和优先级。不同进程有不同的编号，不会有两个相同优先级的进程同时到达。输入数据已经按到达时间从小到大排序。输入数据保证在任何时候，等待队列中的进程不超过 $15000$ 个。\n", "outputFormat": "按照进程结束的时间输出每个进程的进程号和结束时间。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] Operating System", "background": "", "description": "Write a program to simulate process scheduling in an operating system. Assume the system has only one CPU. For each process, its arrival time, execution time, and priority are known. The priority is represented by natural numbers; a larger number means a higher priority.\n\nIf a process arrives when the CPU is idle, it will occupy the CPU continuously until it finishes, unless during this time a process with a higher priority needs to run. In that case, the new (higher-priority) process will take the CPU, and the old one must wait.\n\nIf a process arrives while the CPU is executing a process with a higher or equal priority, then the newly arrived process must wait.\n\nOnce the CPU becomes idle, if there are processes waiting, choose the one with the highest priority to run first. If there are multiple processes with the highest priority, choose the one with the earliest arrival time.", "inputFormat": "The input contains several lines. Each line has four natural numbers (each not exceeding $10^8$): process ID, arrival time, execution time, and priority. Different processes have different IDs. No two processes with the same priority arrive at the same time. The input is sorted in non-decreasing order of arrival time. It is guaranteed that at any time, the number of processes in the waiting queue does not exceed 15000.", "outputFormat": "Output the process ID and its completion time for each process, in the order of their completion times.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 操作系统", "background": "", "description": "写一个程序来模拟操作系统的进程调度。假设该系统只有一个 CPU，每一个进程的到达时间，执行时间和运行优先级都是已知的。其中运行优先级用自然数表示，数字越大，则优先级越高。\n\n如果一个进程到达的时候 CPU 是空闲的，则它会一直占用 CPU 直到该进程结束。除非在这个过程中，有一个比它优先级高的进程要运行。在这种情况下，这个新的（优先级更高的）进程会占用 CPU，而老的只有等待。\n\n如果一个进程到达时，CPU 正在处理一个比它优先级高或优先级相同的进程，则这个（新到达的）进程必须等待。\n\n一旦 CPU 空闲，如果此时有进程在等待，则选择优先级最高的先运行。如果有多个优先级最高的进程，则选择到达时间最早的。\n", "inputFormat": "输入包含若干行，每一行有四个自然数（均不超过 $10^8$），分别是进程号，到达时间，执行时间和优先级。不同进程有不同的编号，不会有两个相同优先级的进程同时到达。输入数据已经按到达时间从小到大排序。输入数据保证在任何时候，等待队列中的进程不超过 $15000$ 个。\n", "outputFormat": "按照进程结束的时间输出每个进程的进程号和结束时间。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2279", "type": "P", "difficulty": 5, "samples": [["6\n1\n2\n3\n4\n5\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2003", "各省省选", "湖南", "深度优先搜索 DFS", "树形 DP"], "title": "[HNOI2003] 消防局的设立", "background": "", "description": "2020 年，人类在火星上建立了一个庞大的基地群，总共有 $n$ 个基地。起初为了节约材料，人类只修建了 $n-1$ 条道路来连接这些基地，并且每两个基地都能够通过道路到达，所以所有的基地形成了一个巨大的树状结构。如果基地 $A$ 到基地 $B$ 至少要经过 $d$ 条道路的话，我们称基地A到基地B的距离为 $d$。\n\n由于火星上非常干燥，经常引发火灾，人类决定在火星上修建若干个消防局。消防局只能修建在基地里，每个消防局有能力扑灭与它距离不超过 $2$ 的基地的火灾。\n\n你的任务是计算至少要修建多少个消防局才能够确保火星上所有的基地在发生火灾时，消防队有能力及时扑灭火灾。", "inputFormat": "输入文件的第一行为 $n$（$1 \\leq n \\leq 1000$），表示火星上基地的数目。接下来的 $n-1$ 行每行有一个正整数，其中文件第 $i$ 行的正整数为 $a_i$，表示从编号为 $i$ 的基地到编号为 $a_i$ 的基地之间有一条道路，为了更加简洁的描述树状结构的基地群，有 $a_i\\lt i$。", "outputFormat": "仅有一个正整数，表示至少要设立多少个消防局才有能力及时扑灭任何基地发生的火灾。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] Establishing Fire Stations", "background": "", "description": "In 2020, humans established a large cluster of bases on Mars, with a total of $n$ bases. To save materials at the beginning, humans built only $n-1$ roads to connect these bases, and every pair of bases can be reached via roads, so all the bases form a large tree structure. If traveling from base A to base B requires at least $d$ roads (i.e., the length of the shortest path is $d$), we define the distance from base A to base B to be $d$.\n\nBecause Mars is very dry and fires occur frequently, humans decided to build several fire stations. Fire stations can only be built in bases, and each fire station can extinguish fires at any base whose distance from it does not exceed $2$.\n\nYour task is to compute the minimum number of fire stations needed to ensure that whenever a fire occurs at any base on Mars, the firefighters can extinguish it in time.", "inputFormat": "The first line contains $n$ ($1 \\leq n \\leq 1000$), the number of bases on Mars.  \nFor each $i = 2, 3, \\dots, n$, line $i$ contains a positive integer $a_i$, indicating that there is a road between base $i$ and base $a_i$. To make the tree representation concise, $a_i < i$.", "outputFormat": "Output a single positive integer, the minimum number of fire stations required so that any base that catches fire can be extinguished in time.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 消防局的设立", "background": "", "description": "2020 年，人类在火星上建立了一个庞大的基地群，总共有 $n$ 个基地。起初为了节约材料，人类只修建了 $n-1$ 条道路来连接这些基地，并且每两个基地都能够通过道路到达，所以所有的基地形成了一个巨大的树状结构。如果基地 $A$ 到基地 $B$ 至少要经过 $d$ 条道路的话，我们称基地A到基地B的距离为 $d$。\n\n由于火星上非常干燥，经常引发火灾，人类决定在火星上修建若干个消防局。消防局只能修建在基地里，每个消防局有能力扑灭与它距离不超过 $2$ 的基地的火灾。\n\n你的任务是计算至少要修建多少个消防局才能够确保火星上所有的基地在发生火灾时，消防队有能力及时扑灭火灾。", "inputFormat": "输入文件的第一行为 $n$（$1 \\leq n \\leq 1000$），表示火星上基地的数目。接下来的 $n-1$ 行每行有一个正整数，其中文件第 $i$ 行的正整数为 $a_i$，表示从编号为 $i$ 的基地到编号为 $a_i$ 的基地之间有一条道路，为了更加简洁的描述树状结构的基地群，有 $a_i\\lt i$。", "outputFormat": "仅有一个正整数，表示至少要设立多少个消防局才有能力及时扑灭任何基地发生的火灾。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2280", "type": "P", "difficulty": 3, "samples": [["2 1\n0 0 1\n1 1 1\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2003", "各省省选", "湖南", "枚举", "前缀和"], "title": "[HNOI2003] 激光炸弹", "background": "", "description": "一种新型的激光炸弹，可以摧毁一个边长为 $m$ 的正方形内的所有目标。现在地图上有 $n$ 个目标，用整数 $x_i$ , $y_i$ 表示目标在地图上的位置，每个目标都有一个价值 $v_i$。激光炸弹的投放是通过卫星定位的，但其有一个缺点，就是其爆破范围，即那个边长为 $m$ 的边必须与 $x$ 轴，$y$ 轴平行。若目标位于爆破正方形的边上，该目标不会被摧毁。\n\n现在你的任务是计算一颗炸弹最多能炸掉地图上总价值为多少的目标。\n\n可能存在多个目标在同一位置上的情况。", "inputFormat": "输入的第一行为整数 $n$ 和整数 $m$；\n\n接下来的 $n$ 行，每行有 $3$ 个整数 $x, y, v$，表示一个目标的坐标与价值。", "outputFormat": "输出仅有一个正整数，表示一颗炸弹最多能炸掉地图上总价值为多少的目标（结果不会超过 $32767$ ）。", "hint": "**数据规模与约定**\n\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^4$，$0 \\le x_i ,y_i \\le 5\\times 10^3$，$1 \\le m \\le 5\\times 10^3$，$1 \\le v_i < 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] Laser Bomb", "background": "", "description": "A new type of laser bomb can destroy all targets inside a square with side length $m$. There are $n$ targets on the map. Integers $x_i$ and $y_i$ denote the position of a target on the map, and each target has a value $v_i$. The bomb is aimed via satellite, but it has a drawback: the blast square, i.e., the square of side length $m$, must have its sides parallel to the x-axis and y-axis. If a target lies on the boundary of the blast square, it will not be destroyed.\n\nYour task is to compute the maximum total value of targets that a single bomb can destroy.\n\nMultiple targets may be located at the same position.", "inputFormat": "The first line contains integers $n$ and $m$.\n\nEach of the next $n$ lines contains three integers $x, y, v$, denoting a target’s coordinates and its value.", "outputFormat": "Output a single positive integer, the maximum total value of targets that can be destroyed by one bomb (the result does not exceed 32767).", "hint": "- Constraints\n  - For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 10^4$, $0 \\le x_i , y_i \\le 5\\times 10^3$, $1 \\le m \\le 5\\times 10^3$, $1 \\le v_i < 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 激光炸弹", "background": "", "description": "一种新型的激光炸弹，可以摧毁一个边长为 $m$ 的正方形内的所有目标。现在地图上有 $n$ 个目标，用整数 $x_i$ , $y_i$ 表示目标在地图上的位置，每个目标都有一个价值 $v_i$。激光炸弹的投放是通过卫星定位的，但其有一个缺点，就是其爆破范围，即那个边长为 $m$ 的边必须与 $x$ 轴，$y$ 轴平行。若目标位于爆破正方形的边上，该目标不会被摧毁。\n\n现在你的任务是计算一颗炸弹最多能炸掉地图上总价值为多少的目标。\n\n可能存在多个目标在同一位置上的情况。", "inputFormat": "输入的第一行为整数 $n$ 和整数 $m$；\n\n接下来的 $n$ 行，每行有 $3$ 个整数 $x, y, v$，表示一个目标的坐标与价值。", "outputFormat": "输出仅有一个正整数，表示一颗炸弹最多能炸掉地图上总价值为多少的目标（结果不会超过 $32767$ ）。", "hint": "**数据规模与约定**\n\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^4$，$0 \\le x_i ,y_i \\le 5\\times 10^3$，$1 \\le m \\le 5\\times 10^3$，$1 \\le v_i < 100$。", "locale": "zh-CN"}}}
{"pid": "P2281", "type": "P", "difficulty": 5, "samples": [["A + B\n3 A + 4 A B^3 + C\n", "C+B+4A+4AB^3\r\nBC+AC+3AB+4AB^4+3A^2+4A^2B^3\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2003", "各省省选", "湖南"], "title": "[HNOI2003] 多项式的加法和乘法", "background": "", "description": "今天的数学课上，老师讲了多项式的加法和乘法。然后布置了很多计算题，小明不想花太多时间来做数学作业，于是想编写一个程序来完成这个任务。\n\n比如计算下面两个多项式的和与积：\n\n$xy^2z+31wx^3y^3z^{50}+s^3$  \n$v^2+s^3+3wx^3y^3$\n\n假定所有变量都是单个大写字符，所有的系数和指数都是常数，且都是整数。\n\n我们用 `X^3` 表示 $X$ 的三次方，在系数和不同的项之间用空格分隔，例如 `X Y^2` 中，$X$ 和 $Y$ 之间有空格。下面是两个多项式的例子，除此之外没有别的空格。\n\n`X Y^2 Z + 31 W X^3 Y^3 Z^50 + S^3`  \n`V^2 + S^3 + 3 W X^3 Y^3`\n\n现在，按照上面的格式给定两个多项式，请你求出这两个多项式的和与积。", "inputFormat": "输入包括两行，每一行是一个多项式。每个多项式不超过 $250$ 个字符。计算过程中保证任何中间结果系数和指数均不超过长整数范围。", "outputFormat": "输出也是两行，第一行是两个多项式的和，第二行是两个多项式的积。输出中要求合并同类项。输出多项式的格式和输入的格式类似，但输出时请把所有空格都去掉，并保证每一项都是 ASCII 码排在前面的变量放在前面，即输出 `X^3Y^2` 而不是 `Y^2X^3`。另外，输出的项请按变量 `A` 的指数从小到大排列，变量 `A` 指数相同的，按变量 `B` 的指数从小到大排列，依此类推。并注意输出要符合我们平常书写的习惯。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] Addition and Multiplication of Polynomials", "background": "", "description": "In today’s math class, the teacher covered addition and multiplication of polynomials. Then a lot of exercises were assigned. Xiaoming didn’t want to spend too much time on the homework, so he decided to write a program to do it.\n\nFor example, compute the sum and product of the following two polynomials:\n\n$xy^2z+31wx^3y^3z^{50}+s^3$  \n$v^2+s^3+3wx^3y^3$\n\nAssume all variables are single uppercase letters, and all coefficients and exponents are constants and integers.\n\nWe use `X^3` to denote the third power of $X$, and we separate the coefficient and different variables by spaces. For example, in `X Y^2`, there is a space between $X$ and $Y$. Below are two example polynomials; aside from these, there are no other spaces.\n\n`X Y^2 Z + 31 W X^3 Y^3 Z^50 + S^3`  \n`V^2 + S^3 + 3 W X^3 Y^3`\n\nNow, given two polynomials in the above format, compute their sum and product.", "inputFormat": "The input consists of two lines, each being one polynomial. Each polynomial has at most $250$ characters. During computation, it is guaranteed that the coefficients and exponents of any intermediate results do not exceed the long integer range.", "outputFormat": "Output two lines: the first line is the sum of the two polynomials, and the second line is their product. Like the input, combine like terms in the output. The output format is similar to the input format, except that all spaces must be removed, and within each term the variables must be ordered by ascending ASCII code (i.e., output `X^3Y^2` instead of `Y^2X^3`). Additionally, order the terms by the exponent of variable `A` in ascending order; if the exponents of `A` are equal, then by the exponent of `B` in ascending order; and so on. Also make sure the output conforms to our usual mathematical writing conventions.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 多项式的加法和乘法", "background": "", "description": "今天的数学课上，老师讲了多项式的加法和乘法。然后布置了很多计算题，小明不想花太多时间来做数学作业，于是想编写一个程序来完成这个任务。\n\n比如计算下面两个多项式的和与积：\n\n$xy^2z+31wx^3y^3z^{50}+s^3$  \n$v^2+s^3+3wx^3y^3$\n\n假定所有变量都是单个大写字符，所有的系数和指数都是常数，且都是整数。\n\n我们用 `X^3` 表示 $X$ 的三次方，在系数和不同的项之间用空格分隔，例如 `X Y^2` 中，$X$ 和 $Y$ 之间有空格。下面是两个多项式的例子，除此之外没有别的空格。\n\n`X Y^2 Z + 31 W X^3 Y^3 Z^50 + S^3`  \n`V^2 + S^3 + 3 W X^3 Y^3`\n\n现在，按照上面的格式给定两个多项式，请你求出这两个多项式的和与积。", "inputFormat": "输入包括两行，每一行是一个多项式。每个多项式不超过 $250$ 个字符。计算过程中保证任何中间结果系数和指数均不超过长整数范围。", "outputFormat": "输出也是两行，第一行是两个多项式的和，第二行是两个多项式的积。输出中要求合并同类项。输出多项式的格式和输入的格式类似，但输出时请把所有空格都去掉，并保证每一项都是 ASCII 码排在前面的变量放在前面，即输出 `X^3Y^2` 而不是 `Y^2X^3`。另外，输出的项请按变量 `A` 的指数从小到大排列，变量 `A` 指数相同的，按变量 `B` 的指数从小到大排列，依此类推。并注意输出要符合我们平常书写的习惯。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2282", "type": "P", "difficulty": 7, "samples": [["189419111949\n1000010\n", "1894,1911,1949\n1,000010\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [162000, 162000, 162000, 162000, 162000, 162000, 162000, 162000, 162000, 162000]}, "tags": ["2003", "各省省选", "湖南"], "title": "[HNOI2003] 历史年份", "background": null, "description": "明天就要考近代史了，小明决定把要背的历史事件，根据事件发生的年份，按顺序从小到大抄在一张纸上。可是他抄的时候，相邻两个年份相隔太近了。例如 $1894,1911,1949$ 这三个时间，由于相隔太近，纸上写的是：`189419111949`。\n\n这使小明很苦恼，于是他准备编写个程序把这些年份还原成应该的样子。那么，怎么才能够正确地还原呢？\n\n首先，这些年份是按时间顺序严格递增排列的，所以，还原后的也必须满足这点要求。但如果仅仅是这样，那么 $1,89,419,111949$ 也满足要求。显然，最后的年份不可能有这么大，所以，小明要求在这个条件下，最后一个数要最小。\n\n加了这个限制后，$18,94,1911,1949$ 也满足条件，但因为是近代史，第一个年份也不会这么早，所以，小明还要在保证最后一个数最小的前提下，第一个数要尽量大。并在保证第一个数最大的情况下，第二个数最大……以此类推。\n\n注意：在本题中，数字前的前导 $0$ 是被允许的。", "inputFormat": "输入文件包含多行，每一行是一个由不超过 $2000$ 个数字组成的字符串，表示一个测试例子。一个输入文件中最多包含 $1000$ 个测试例子。", "outputFormat": "相对于输入文件的每一个测试例子，你的程序要输出对应的一行，即是分割后的数字序列，相邻两个数用一个逗号分割。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] Historical Years", "background": "", "description": "Xiao Ming has a modern history exam tomorrow. He decides to copy the historical events he needs to memorize onto a sheet of paper in ascending order by the year they occurred. However, when he copied them, adjacent years were too close to each other. For example, the three years $1894,1911,1949$ look like this on paper: `189419111949`.\n\nThis troubles Xiao Ming, so he plans to write a program to restore these years to their correct form. How can we restore them correctly?\n\nFirst, the years are strictly increasing in chronological order, so the restored sequence must also satisfy this requirement. But if that is the only constraint, then $1,89,419,111949$ would also satisfy it. Clearly, the last year cannot be that large, so Xiao Ming requires that, under this constraint, the last number be as small as possible.\n\nWith this additional restriction, $18,94,1911,1949$ also satisfies the condition. But since this is modern history, the first year would not be that early. Therefore, on the premise that the last number is minimized, Xiao Ming wants the first number to be as large as possible; and with the first number fixed at its maximum, the second number should be as large as possible; and so on.\n\nNote: In this problem, leading zeros (i.e., leading $0$) are allowed.", "inputFormat": "The input file contains multiple lines. Each line is a string consisting of no more than $2000$ digits, representing one test case. There are at most $1000$ test cases in a single input file.", "outputFormat": "For each test case in the input file, output one corresponding line: the sequence of numbers after splitting, with adjacent numbers separated by a comma.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 历史年份", "background": null, "description": "明天就要考近代史了，小明决定把要背的历史事件，根据事件发生的年份，按顺序从小到大抄在一张纸上。可是他抄的时候，相邻两个年份相隔太近了。例如 $1894,1911,1949$ 这三个时间，由于相隔太近，纸上写的是：`189419111949`。\n\n这使小明很苦恼，于是他准备编写个程序把这些年份还原成应该的样子。那么，怎么才能够正确地还原呢？\n\n首先，这些年份是按时间顺序严格递增排列的，所以，还原后的也必须满足这点要求。但如果仅仅是这样，那么 $1,89,419,111949$ 也满足要求。显然，最后的年份不可能有这么大，所以，小明要求在这个条件下，最后一个数要最小。\n\n加了这个限制后，$18,94,1911,1949$ 也满足条件，但因为是近代史，第一个年份也不会这么早，所以，小明还要在保证最后一个数最小的前提下，第一个数要尽量大。并在保证第一个数最大的情况下，第二个数最大……以此类推。\n\n注意：在本题中，数字前的前导 $0$ 是被允许的。", "inputFormat": "输入文件包含多行，每一行是一个由不超过 $2000$ 个数字组成的字符串，表示一个测试例子。一个输入文件中最多包含 $1000$ 个测试例子。", "outputFormat": "相对于输入文件的每一个测试例子，你的程序要输出对应的一行，即是分割后的数字序列，相邻两个数用一个逗号分割。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2283", "type": "P", "difficulty": 6, "samples": [["5\t\t\t\t\t\t\t\t\t\r\n0 0\r\n0 6\r\n6 6\r\n6 0\r\n3 3\r\n", "9.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "2003", "各省省选", "湖南", "深度优先搜索 DFS"], "title": "[HNOI2003] 多边形", "background": null, "description": "![](https://cdn.luogu.com.cn/upload/pic/1330.png)", "inputFormat": "第一行一个正整数 $n\\ (3 \\le n \\le 1500)$，表示多边形的顶点数。\n\n之后 $n$ 行，每行两个整数 $x_i,y_i\\ (-500 \\le x_i,y_i \\le 500)$，依次表示多边形的每个顶点的坐标。", "outputFormat": "阴影部分的面积，保留 $2$ 位小数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] Polygon", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/pic/1330.png)", "inputFormat": "The first line contains a positive integer $n\\ (3 \\le n \\le 1500)$, denoting the number of vertices of the polygon.\nThen $n$ lines follow, each containing two integers $x_i,y_i\\ (-500 \\le x_i,y_i \\le 500)$, representing the coordinates of the polygon’s vertices in order.", "outputFormat": "Output the area of the shaded region, rounded to $2$ decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 多边形", "background": null, "description": "![](https://cdn.luogu.com.cn/upload/pic/1330.png)", "inputFormat": "第一行一个正整数 $n\\ (3 \\le n \\le 1500)$，表示多边形的顶点数。\n\n之后 $n$ 行，每行两个整数 $x_i,y_i\\ (-500 \\le x_i,y_i \\le 500)$，依次表示多边形的每个顶点的坐标。", "outputFormat": "阴影部分的面积，保留 $2$ 位小数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2284", "type": "P", "difficulty": 6, "samples": [["2\r\n2\r\n5 3\r\n4 2\r\n2\r\n4 3\r\n6 2\r\n", "possible\r\nimpossible\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2003", "各省省选", "湖南"], "title": "[HNOI2003] 密室之门", "background": "", "description": "最近，我国考古学家在秦陵兵马俑的新墓坑中发现了若干个密室，每个密室都可以由一个奇特的门进入。那么怎样才能进入密室呢？\n\n第 $i$ 个密室的门上有 $a_i$ 个转盘，该密室的第 $j$ 个转盘被均匀的分成 $b_{i,j}$ 格，这 $b_{i,j}$ 个格子按顺时针方向依次编号为 $0,1,\\dots,b_{i,j}-1$，并且每一个转盘上面都有一个指针（结构类似于钟表），指针大约每过 $1.53$ 秒就会从原来指向编号为 $x$ 的格子变成指向编号为 $(x+1)\\mod b_{i,j}$ 的格子。当一扇门上所有的转盘上的指针都指向编号为 $0$ 的格子的时候，那么这扇门就会被开启。\n\n但是当考古学家发现密室时，转盘上的指针都指向不同编号的格子，考古学家经过计算发现按照门被开启的原理，有些密室是永远也打不开的。你的任务就是判断那些密室的门是可能被打开的。", "inputFormat": "输入文件的第一行为 $n$，表示密室的个数。接下来的数据分为 $n$ 组，每组描述一扇门。每组数据的第一行为 $a_i$，即该密室门上转盘的个数，接下来的 $a_i$ 行每行有两个数据，第一个数据表示 $b_{i,j}$，第二个数据表示发现该密室时指针所指向的格子的编号。", "outputFormat": "输出文件总共有 $n$ 行。若第 $i$ 间密室的门能够被打开，则输出文件的第 $i$ 行输出 `possible`，如果不能打开则输出 `impossible`。（注意小写输出）。", "hint": "对于 $100\\%$ 的数据，$n<100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2003] The Door to the Secret Chamber", "background": "", "description": "Recently, archaeologists in China discovered several secret chambers in a new pit of the Terracotta Army, each accessible through a peculiar door. How can a chamber be entered?\n\nOn the door to the $i$-th chamber, there are $a_i$ dials. The $j$-th dial of this chamber is evenly divided into $b_{i,j}$ cells, numbered in clockwise order as $0, 1, \\dots, b_{i,j}-1$. Each dial has a hand (similar to a clock). Approximately every 1.53 seconds, a hand that was pointing at the cell numbered $x$ advances to point at the cell numbered $(x+1)\\mod b_{i,j}$. When, for a door, the hands on all its dials simultaneously point to the cell numbered $0$, the door opens.\n\nHowever, when the chambers were discovered, the hands on the dials pointed to various indices. Based on the opening rule, it was determined that some chambers can never be opened. Your task is to determine which doors can possibly be opened.", "inputFormat": "The first line contains $n$, the number of chambers. The data that follows is divided into $n$ groups, each describing one door. In group $i$, the first line contains $a_i$, the number of dials on that door. Each of the next $a_i$ lines contains two integers: the first is $b_{i,j}$, and the second is the index of the cell the hand was pointing to when the chamber was discovered.", "outputFormat": "Output $n$ lines. For the $i$-th chamber, print `possible` if its door can be opened; otherwise, print `impossible`. Note: use lowercase.", "hint": "Constraints: For $100\\%$ of the testdata, $n<100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2003] 密室之门", "background": "", "description": "最近，我国考古学家在秦陵兵马俑的新墓坑中发现了若干个密室，每个密室都可以由一个奇特的门进入。那么怎样才能进入密室呢？\n\n第 $i$ 个密室的门上有 $a_i$ 个转盘，该密室的第 $j$ 个转盘被均匀的分成 $b_{i,j}$ 格，这 $b_{i,j}$ 个格子按顺时针方向依次编号为 $0,1,\\dots,b_{i,j}-1$，并且每一个转盘上面都有一个指针（结构类似于钟表），指针大约每过 $1.53$ 秒就会从原来指向编号为 $x$ 的格子变成指向编号为 $(x+1)\\mod b_{i,j}$ 的格子。当一扇门上所有的转盘上的指针都指向编号为 $0$ 的格子的时候，那么这扇门就会被开启。\n\n但是当考古学家发现密室时，转盘上的指针都指向不同编号的格子，考古学家经过计算发现按照门被开启的原理，有些密室是永远也打不开的。你的任务就是判断那些密室的门是可能被打开的。", "inputFormat": "输入文件的第一行为 $n$，表示密室的个数。接下来的数据分为 $n$ 组，每组描述一扇门。每组数据的第一行为 $a_i$，即该密室门上转盘的个数，接下来的 $a_i$ 行每行有两个数据，第一个数据表示 $b_{i,j}$，第二个数据表示发现该密室时指针所指向的格子的编号。", "outputFormat": "输出文件总共有 $n$ 行。若第 $i$ 间密室的门能够被打开，则输出文件的第 $i$ 行输出 `possible`，如果不能打开则输出 `impossible`。（注意小写输出）。", "hint": "对于 $100\\%$ 的数据，$n<100$。", "locale": "zh-CN"}}}
{"pid": "P2285", "type": "P", "difficulty": 3, "samples": [["2 2\t         \r\n1 1 1\t\t\r\n2 2 2\r\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2004", "各省省选", "湖南", "最短路"], "title": "[HNOI2004] 打鼹鼠", "background": null, "description": "鼹鼠是一种很喜欢挖洞的动物，但每过一定的时间，它还是喜欢把头探出到地面上来透透气的。\n\n根据这个特点阿牛编写了一个打鼹鼠的游戏：在一个 $n \\times n$ 的网格中，在某些时刻鼹鼠会在某一个网格探出头来透透气。\n\n你可以控制一个机器人来打鼹鼠，如果 $i$ 时刻鼹鼠在某个网格中出现，而机器人也处于同一网格的话，那么这个鼹鼠就会被机器人打死。\n\n而机器人每一时刻只能够移动一格或停留在原地不动。机器人的移动是指从当前所处的网格移向相邻的网格，即从坐标为 $(i, j)$ 的网格移向 $(i-1, j), (i+1, j), (i, j-1), (i, j+1)$ 四个网格，机器人不能走出整个 $n \\times n$ 的网格。\n\n游戏开始时，你可以自由选定机器人的初始位置。\n\n现在知道在一段时间内，鼹鼠出现的时间和地点，请编写一个程序使机器人在这一段时间内打死尽可能多的鼹鼠。", "inputFormat": "第一行为 $n, m\\ (1 \\le n \\le 10^3, 1 \\le m \\le 10^4)$，其中 $m$ 表示在这一段时间内出现的鼹鼠的个数。\n\n接下来的 $m$ 行中每行有三个数据 $t, x, y\\ (1 \\le t \\le 2.5 \\times 10^7, 1 \\le x,y \\le n)$，表示在游戏开始后 $t$ 个时刻，在第 $x$ 行第 $y$ 个网格里出现了一只鼹鼠。\n\n$t$ 按不降的顺序给出。\n\n注意同一时刻可能出现多只鼹鼠，但同一时刻同一地点只可能出现一只鼹鼠。", "outputFormat": "仅包含一个非负整数，表示被打死鼹鼠的最大数目。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] Whack-a-Mole", "background": "", "description": "Moles like to dig holes, but at certain times they will stick their heads out of the ground to breathe.\n\nBased on this, Aniu designed a whack-a-mole game: on an $n \\times n$ grid, at certain times a mole will pop up in some cell.\n\nYou can control a robot to whack moles. If at time $i$ a mole appears in some cell and the robot is in the same cell, then this mole will be killed by the robot.\n\nAt each time step, the robot can move by one cell or stay where it is. Moving means going from the current cell to an adjacent cell, i.e., from the cell with coordinates $(i, j)$ to one of $(i-1, j)$, $(i+1, j)$, $(i, j-1)$, $(i, j+1)$. The robot cannot leave the $n \\times n$ grid.\n\nAt the start of the game, you may choose the robot’s initial position arbitrarily.\n\nGiven the times and locations where moles appear over a period of time, write a program to maximize the number of moles the robot can kill during this period.", "inputFormat": "The first line contains $n, m\\ (1 \\le n \\le 10^3, 1 \\le m \\le 10^4)$, where $m$ is the number of moles that appear during this period.\n\nEach of the next $m$ lines contains three integers $t, x, y\\ (1 \\le t \\le 2.5 \\times 10^7, 1 \\le x, y \\le n)$, meaning that $t$ time units after the game starts, a mole appears in row $x$, column $y$.\n\nThe values of $t$ are given in nondecreasing order.\n\nNote that multiple moles may appear at the same time, but at most one mole appears at the same location at the same time.", "outputFormat": "Output a single non-negative integer, the maximum number of moles that can be killed.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 打鼹鼠", "background": null, "description": "鼹鼠是一种很喜欢挖洞的动物，但每过一定的时间，它还是喜欢把头探出到地面上来透透气的。\n\n根据这个特点阿牛编写了一个打鼹鼠的游戏：在一个 $n \\times n$ 的网格中，在某些时刻鼹鼠会在某一个网格探出头来透透气。\n\n你可以控制一个机器人来打鼹鼠，如果 $i$ 时刻鼹鼠在某个网格中出现，而机器人也处于同一网格的话，那么这个鼹鼠就会被机器人打死。\n\n而机器人每一时刻只能够移动一格或停留在原地不动。机器人的移动是指从当前所处的网格移向相邻的网格，即从坐标为 $(i, j)$ 的网格移向 $(i-1, j), (i+1, j), (i, j-1), (i, j+1)$ 四个网格，机器人不能走出整个 $n \\times n$ 的网格。\n\n游戏开始时，你可以自由选定机器人的初始位置。\n\n现在知道在一段时间内，鼹鼠出现的时间和地点，请编写一个程序使机器人在这一段时间内打死尽可能多的鼹鼠。", "inputFormat": "第一行为 $n, m\\ (1 \\le n \\le 10^3, 1 \\le m \\le 10^4)$，其中 $m$ 表示在这一段时间内出现的鼹鼠的个数。\n\n接下来的 $m$ 行中每行有三个数据 $t, x, y\\ (1 \\le t \\le 2.5 \\times 10^7, 1 \\le x,y \\le n)$，表示在游戏开始后 $t$ 个时刻，在第 $x$ 行第 $y$ 个网格里出现了一只鼹鼠。\n\n$t$ 按不降的顺序给出。\n\n注意同一时刻可能出现多只鼹鼠，但同一时刻同一地点只可能出现一只鼹鼠。", "outputFormat": "仅包含一个非负整数，表示被打死鼹鼠的最大数目。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2286", "type": "P", "difficulty": 3, "samples": [["5                  \r\n0 2                      \r\n0 4                         \r\n1 3\r\n1 2\r\n1 5\r\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "线段树", "各省省选", "平衡树", "树状数组", "离散化", "湖南", "STL"], "title": "[HNOI2004] 宠物收养场", "background": "题面修缮来自于 [LaDeX](https://www.luogu.com.cn/user/431658)。", "description": "凡凡开了一间宠物收养场。收养场提供两种服务：收养被主人遗弃的宠物和让新的主人领养这些宠物。\n\n每个领养者都希望领养到自己满意的宠物，凡凡根据领养者的要求通过他自己发明的一个特殊的公式，得出该领养者希望领养的宠物的特点值 $a$（$a$ 是一个正整数，$a<2^{31}$），而他也给每个处在收养场的宠物一个特点值。这样他就能够很方便的处理整个领养宠物的过程了，宠物收养场总是会有两种情况发生：被遗弃的宠物过多或者是想要收养宠物的人太多，而宠物太少。\n\n被遗弃的宠物过多时，假若到来一个领养者，这个领养者希望领养的宠物的特点值为 $a$，那么它将会领养一只目前未被领养的宠物中特点值最接近 $a$ 的一只宠物。（任何两只宠物的特点值都不可能是相同的，任何两个领养者的希望领养宠物的特点值也不可能是一样的）如果有两只满足要求的宠物，即存在两只宠物他们的特点值分别为 $a-b$ 和 $a+b$，那么领养者将会领养特点值为 $a-b$ 的那只宠物。\n\n收养宠物的人过多，假若到来一只被收养的宠物，那么哪个领养者能够领养它呢？能够领养它的领养者，是那个希望被领养宠物的特点值最接近该宠物特点值的领养者，如果该宠物的特点值为 $a$，存在两个领养者他们希望领养宠物的特点值分别为 $a-b$ 和 $a+b$，那么特点值为 $a-b$ 的那个领养者将成功领养该宠物。\n\n一个领养者领养了一个特点值为 $a$ 的宠物，而它本身希望领养的宠物的特点值为 $b$，那么这个领养者的不满意程度为 $|a-b|$。\n\n你得到了一年当中，领养者和被收养宠物到来收养所的情况，请你计算所有收养了宠物的领养者的不满意程度的总和。这一年初始时，收养所里面既没有宠物，也没有领养者。", "inputFormat": "第一行为一个正整数 $n$，$n\\leq80000$，表示一年当中来到收养场的宠物和领养者的总数。接下来的 $n$ 行，按到来时间的先后顺序描述了一年当中来到收养场的宠物和领养者的情况。每行有两个正整数 $a,b$，其中 $a=0$ 表示宠物，$a=1$ 表示领养者，$b$ 表示宠物的特点值或是领养者希望领养宠物的特点值。（同一时间呆在收养所中的，要么全是宠物，要么全是领养者，这些宠物和领养者的个数不会超过 $10000$ 个）\n", "outputFormat": "仅有一个正整数，表示一年当中所有收养了宠物的领养者的不满意程度的总和对 $1000000$ 取模以后的结果。\n", "hint": "样例解释：\n\n注：$|3-2| + |2-4|=3$，\n最后一个领养者没有宠物可以领养。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] Pet Adoption Center", "background": "Problem statement polished by [LaDeX](https://www.luogu.com.cn/user/431658).", "description": "Fanfan opened a pet adoption center. The center offers two services: taking in abandoned pets and allowing new owners to adopt these pets.\n\nEach adopter hopes to adopt a satisfactory pet. Based on the adopter’s requirements, Fanfan uses a special formula of his own invention to obtain the adopter’s desired feature value $a$ ($a$ is a positive integer, $a < 2^{31}$). He also assigns a feature value to each pet in the shelter. This makes handling the entire adoption process convenient. The shelter often faces two situations: too many abandoned pets, or too many adopters and too few pets.\n\nWhen there are too many abandoned pets, if an adopter arrives desiring a feature value $a$, they will adopt the currently unadopted pet whose feature value is closest to $a$. (No two pets share the same feature value, and no two adopters share the same desired feature value.) If there are two candidates with feature values $a-b$ and $a+b$, the adopter will adopt the pet with feature value $a-b$.\n\nWhen there are too many adopters, if a pet arrives, which adopter can adopt it? The adopter who can adopt it is the one whose desired feature value is closest to the pet’s feature value. If the pet’s feature value is $a$ and there are two adopters desiring $a-b$ and $a+b$, then the adopter with desired value $a-b$ will successfully adopt the pet.\n\nIf an adopter adopts a pet with feature value $a$ while their desired feature value is $b$, the adopter’s dissatisfaction is $|a-b|$.\n\nYou are given the sequence of arrivals of adopters and pets at the shelter over a year. Please compute the total dissatisfaction of all adopters who successfully adopted a pet. At the beginning of the year, there are neither pets nor adopters in the shelter.", "inputFormat": "The first line contains an integer $n$, $n \\leq 80000$, the total number of pets and adopters arriving at the shelter during the year. The next $n$ lines, in order of arrival time, describe these arrivals. Each line contains two integers $a, b$, where $a \\in \\{0, 1\\}$ ($a = 0$ indicates a pet, $a = 1$ indicates an adopter), and $b$ is the pet’s feature value or the adopter’s desired feature value. (At any given time, the shelter contains either only pets or only adopters, and their counts do not exceed $10000$.)", "outputFormat": "Output a single integer: the total dissatisfaction of all adopters who successfully adopted a pet, modulo $1000000$.", "hint": "Sample explanation:\n\nNote: $|3-2| + |2-4| = 3$. The last adopter has no pet to adopt.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 宠物收养场", "background": "题面修缮来自于 [LaDeX](https://www.luogu.com.cn/user/431658)。", "description": "凡凡开了一间宠物收养场。收养场提供两种服务：收养被主人遗弃的宠物和让新的主人领养这些宠物。\n\n每个领养者都希望领养到自己满意的宠物，凡凡根据领养者的要求通过他自己发明的一个特殊的公式，得出该领养者希望领养的宠物的特点值 $a$（$a$ 是一个正整数，$a<2^{31}$），而他也给每个处在收养场的宠物一个特点值。这样他就能够很方便的处理整个领养宠物的过程了，宠物收养场总是会有两种情况发生：被遗弃的宠物过多或者是想要收养宠物的人太多，而宠物太少。\n\n被遗弃的宠物过多时，假若到来一个领养者，这个领养者希望领养的宠物的特点值为 $a$，那么它将会领养一只目前未被领养的宠物中特点值最接近 $a$ 的一只宠物。（任何两只宠物的特点值都不可能是相同的，任何两个领养者的希望领养宠物的特点值也不可能是一样的）如果有两只满足要求的宠物，即存在两只宠物他们的特点值分别为 $a-b$ 和 $a+b$，那么领养者将会领养特点值为 $a-b$ 的那只宠物。\n\n收养宠物的人过多，假若到来一只被收养的宠物，那么哪个领养者能够领养它呢？能够领养它的领养者，是那个希望被领养宠物的特点值最接近该宠物特点值的领养者，如果该宠物的特点值为 $a$，存在两个领养者他们希望领养宠物的特点值分别为 $a-b$ 和 $a+b$，那么特点值为 $a-b$ 的那个领养者将成功领养该宠物。\n\n一个领养者领养了一个特点值为 $a$ 的宠物，而它本身希望领养的宠物的特点值为 $b$，那么这个领养者的不满意程度为 $|a-b|$。\n\n你得到了一年当中，领养者和被收养宠物到来收养所的情况，请你计算所有收养了宠物的领养者的不满意程度的总和。这一年初始时，收养所里面既没有宠物，也没有领养者。", "inputFormat": "第一行为一个正整数 $n$，$n\\leq80000$，表示一年当中来到收养场的宠物和领养者的总数。接下来的 $n$ 行，按到来时间的先后顺序描述了一年当中来到收养场的宠物和领养者的情况。每行有两个正整数 $a,b$，其中 $a=0$ 表示宠物，$a=1$ 表示领养者，$b$ 表示宠物的特点值或是领养者希望领养宠物的特点值。（同一时间呆在收养所中的，要么全是宠物，要么全是领养者，这些宠物和领养者的个数不会超过 $10000$ 个）\n", "outputFormat": "仅有一个正整数，表示一年当中所有收养了宠物的领养者的不满意程度的总和对 $1000000$ 取模以后的结果。\n", "hint": "样例解释：\n\n注：$|3-2| + |2-4|=3$，\n最后一个领养者没有宠物可以领养。", "locale": "zh-CN"}}}
{"pid": "P2287", "type": "P", "difficulty": 6, "samples": [["4 \r\n0 0 0\r\n1 0 0\r\n0 1 0\r\n0 0 1\r\n", "2.366025"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2004", "各省省选", "湖南", "凸包"], "title": "[HNOI2004] 最佳包裹", "background": "", "description": "发强公司生产了一种金属制品，是由一些笔直的金属条连接起来的，金属条和别的金属条在交点上被焊接在了一起。现在由于美观需要，在这个产品用一层特殊的材料包裹起来。公司为了节约成本，希望消耗的材料最少（不计裁剪时的边角料的损失）。\n\n编程，输入包括该产品的顶点的个数，以及所有顶点的坐标；请计算出包裹这个产品所需要的材料的最小面积。结果要求精确到小数点后第六位（四舍五入）。", "inputFormat": "输入文件由 $(n+1)$ 行组成。\n\n第 $1$ 行是一个整数 $n$（$4 \\leq n \\leq 100$），表示顶点的个数；\n\n第 $2$ 行到第 $(n+1)$ 行，第 $(i+1)$ 行有 $3$ 个实数 $x_i$，$y_i$，$z_i$，表示第 $i$ 个顶点的坐标。\n\n保证顶点的位置各不相同。", "outputFormat": "输出文件只有一个实数，四舍五入精确到小数点后六位，表示包裹一个该产品所需的材料面积的最小值。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] Best Package", "background": "", "description": "Faqiang Company produces a kind of metal product made by connecting several straight metal bars, which are welded together at their intersection points. For aesthetic reasons, the product is to be wrapped with a layer of special material. To save costs, the company hopes to use the least amount of material (the waste from cutting scraps is ignored).\n\nWrite a program that, given the number of vertices of the product and the coordinates of all vertices, computes the minimal area of material needed to wrap the product. The result should be rounded to six decimal places.", "inputFormat": "The input file consists of $(n+1)$ lines.\n\nThe first line contains an integer $n$ ($4 \\leq n \\leq 100$), denoting the number of vertices.\n\nFrom line $2$ to line $(n+1)$, the $(i+1)$-th line contains three real numbers $x_i$, $y_i$, $z_i$, which are the coordinates of the $i$-th vertex.\n\nAll vertices are guaranteed to be distinct.", "outputFormat": "Output a single real number, rounded to six decimal places, which is the minimal area of material required to wrap one such product.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 最佳包裹", "background": "", "description": "发强公司生产了一种金属制品，是由一些笔直的金属条连接起来的，金属条和别的金属条在交点上被焊接在了一起。现在由于美观需要，在这个产品用一层特殊的材料包裹起来。公司为了节约成本，希望消耗的材料最少（不计裁剪时的边角料的损失）。\n\n编程，输入包括该产品的顶点的个数，以及所有顶点的坐标；请计算出包裹这个产品所需要的材料的最小面积。结果要求精确到小数点后第六位（四舍五入）。", "inputFormat": "输入文件由 $(n+1)$ 行组成。\n\n第 $1$ 行是一个整数 $n$（$4 \\leq n \\leq 100$），表示顶点的个数；\n\n第 $2$ 行到第 $(n+1)$ 行，第 $(i+1)$ 行有 $3$ 个实数 $x_i$，$y_i$，$z_i$，表示第 $i$ 个顶点的坐标。\n\n保证顶点的位置各不相同。", "outputFormat": "输出文件只有一个实数，四舍五入精确到小数点后六位，表示包裹一个该产品所需的材料面积的最小值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2288", "type": "P", "difficulty": 0, "samples": [["3 5\r\n6 1 2 5\r\n1 2 8 4\r\n4 -1 5 6\r\n1 0\r\n5 -1\r\n4 2\r\n7 3\r\n4 4\r\n", "11.933\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "湖南"], "title": "[HNOI2005] 纸片覆盖", "background": "", "description": "喜欢几何的小付遇到了这样一个问题：一天他在一张白纸上画了 $n$ 条直线，然后剪了一张 $m$ 边形（简单多边形）的小纸片。\n\n他想把这张小纸片放在白纸上，使它盖住的线段的总长度最长。并且这张多边形纸片不能翻转或旋转，只能平移，如果直线的某一段刚好与多边形纸片的边重合，那么，这条线段算作是被覆盖。\n\n你能帮他解决这个问题吗？", "inputFormat": "从文件 `input.txt` 中读入数据，文件第一行为两个数 $n$ 和 $m$，其中 $1\\leq n,m\\leq10$，分别表示直线的数目和多边形的边数。\n\n接下来的 $n$ 行分别表示各条直线，每行有 $4$ 个实数 $x_1,y_1,x_2,y_2$，表示一条经过 $\\left(x_1,y_1\\right)$ 和 $\\left(x_2,y_2\\right)$ 的直线。\n\n接下来的 $m$ 行按顺时针或逆时针的顺序输入多边形的各个顶点，每行有 $2$ 个实数 $x,y$，表示一个顶点的坐标。\n\n这里假设所有输入的实数都在 $-10000$ 到 $10000$ 之间，且不会超过 $2$ 位小数，输入的多边形保证不自交，且连续的 $3$ 点不共线。\n", "outputFormat": "输出文件 `output.txt` 中仅包含一个数 $L$，表示输入的多边形能盖住的最大的线段总长度，精确到小数点后 $3$ 位。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Paper Covering", "background": "", "description": "Xiaofu, who likes geometry, encountered the following problem: one day he drew $n$ lines on a white sheet of paper, and then cut out a small $m$-gon (simple polygon).\n\nHe wants to place this small paper piece on the sheet so that the total length of the lines it covers is maximized. The polygon piece cannot be flipped or rotated; it can only be translated. If some portion of a line happens to coincide with an edge of the polygon, then that segment is considered covered.\n\nCan you help him solve this problem?", "inputFormat": "Read from the file `input.txt`. The first line contains two numbers $n$ and $m$, where $1 \\leq n, m \\leq 10$, denoting the number of lines and the number of edges of the polygon, respectively.\n\nEach of the next $n$ lines describes a line, with $4$ real numbers $x_1, y_1, x_2, y_2$, representing a line passing through $\\left(x_1, y_1\\right)$ and $\\left(x_2, y_2\\right)$.\n\nEach of the next $m$ lines gives the vertices of the polygon in either clockwise or counterclockwise order, with $2$ real numbers $x, y$, representing the coordinates of a vertex.\n\nAssume all input real numbers are between $-10000$ and $10000$, and have no more than $2$ decimal places. The input polygon is guaranteed to be non-self-intersecting, and no three consecutive points are collinear.", "outputFormat": "The output file `output.txt` contains only one number $L$, the maximum total length of line segments that the input polygon can cover, accurate to $3$ decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 纸片覆盖", "background": "", "description": "喜欢几何的小付遇到了这样一个问题：一天他在一张白纸上画了 $n$ 条直线，然后剪了一张 $m$ 边形（简单多边形）的小纸片。\n\n他想把这张小纸片放在白纸上，使它盖住的线段的总长度最长。并且这张多边形纸片不能翻转或旋转，只能平移，如果直线的某一段刚好与多边形纸片的边重合，那么，这条线段算作是被覆盖。\n\n你能帮他解决这个问题吗？", "inputFormat": "从文件 `input.txt` 中读入数据，文件第一行为两个数 $n$ 和 $m$，其中 $1\\leq n,m\\leq10$，分别表示直线的数目和多边形的边数。\n\n接下来的 $n$ 行分别表示各条直线，每行有 $4$ 个实数 $x_1,y_1,x_2,y_2$，表示一条经过 $\\left(x_1,y_1\\right)$ 和 $\\left(x_2,y_2\\right)$ 的直线。\n\n接下来的 $m$ 行按顺时针或逆时针的顺序输入多边形的各个顶点，每行有 $2$ 个实数 $x,y$，表示一个顶点的坐标。\n\n这里假设所有输入的实数都在 $-10000$ 到 $10000$ 之间，且不会超过 $2$ 位小数，输入的多边形保证不自交，且连续的 $3$ 点不共线。\n", "outputFormat": "输出文件 `output.txt` 中仅包含一个数 $L$，表示输入的多边形能盖住的最大的线段总长度，精确到小数点后 $3$ 位。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2289", "type": "P", "difficulty": 7, "samples": [[" 2 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "高精度", "2004", "各省省选", "湖南", "哈希 hashing", "轮廓线 DP"], "title": "[HNOI2004] 邮递员", "background": "", "description": "小李在 P 市的邮政局工作，他每天的工作是从邮局出发，到自己所管辖的所有邮筒取信件，然后带回邮局。他所管辖的邮筒非常巧地排成了一个 $m\\times n$ 的点阵（点阵中的间距都是相等的）。左上角的邮筒恰好在邮局的门口。\n\n小李是一个非常标新立异的人，他希望每天都能走不同的路线，但是同时，他又不希望路线的长度增加（即选择最短的路径走，注意路径长度是指小李实际走的物理距离，并且对路过每个邮筒的次数没有限制），他想知道他有多少条不同的路线可走。他在任何两个邮筒之间走的是直线。\n\n编程，输入包括点阵的 $m$ 和 $n$ 的值；计算出小李可选的不同路线的总条数。", "inputFormat": "输入只有一行两个整数 $m$，$n$，表示了小李管辖内的邮筒排成的点阵大小。", "outputFormat": "输出一行一个整数，表示小李可选的不同路线的条数。", "hint": "#### 样例输入输出 1 解释\n![](https://cdn.luogu.com.cn/upload/pic/1331.png)\n\n---\n#### 数据规模与约定\n- 对于 $100\\%$ 的数据，保证 $1\\le m\\le10$，$1\\le n\\le20$，且保证 $n\\times m$ 是偶数。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] Postman", "background": "", "description": "Xiao Li works at the post office in city P. Every day, his job is to start from the post office, collect letters from all the mailboxes under his charge, and then return to the post office. The mailboxes he manages happen to form an $m \\times n$ lattice of points (with equal spacing). The mailbox at the upper-left corner is exactly at the post office entrance.\n\nXiao Li is a very unconventional person. He hopes to take a different route every day, but at the same time he does not want the route length to increase (that is, he chooses a shortest route; note that the route length is the physical distance he actually walks, and there is no restriction on how many times he passes each mailbox). He wants to know how many different routes he can take. Between any two mailboxes, he walks along a straight line.\n\nWrite a program that takes the values of $m$ and $n$ for the lattice as input, and computes the total number of different routes Xiao Li can choose.", "inputFormat": "The input consists of a single line with two integers $m$, $n$, representing the size of the lattice of mailboxes under Xiao Li’s charge.", "outputFormat": "Output one line with a single integer, the number of different routes Xiao Li can choose.", "hint": "#### Explanation for Sample Input/Output 1\n![](https://cdn.luogu.com.cn/upload/pic/1331.png)\n\n---\n#### Constraints\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le m \\le 10$, $1 \\le n \\le 20$, and $n \\times m$ is even.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 邮递员", "background": "", "description": "小李在 P 市的邮政局工作，他每天的工作是从邮局出发，到自己所管辖的所有邮筒取信件，然后带回邮局。他所管辖的邮筒非常巧地排成了一个 $m\\times n$ 的点阵（点阵中的间距都是相等的）。左上角的邮筒恰好在邮局的门口。\n\n小李是一个非常标新立异的人，他希望每天都能走不同的路线，但是同时，他又不希望路线的长度增加（即选择最短的路径走，注意路径长度是指小李实际走的物理距离，并且对路过每个邮筒的次数没有限制），他想知道他有多少条不同的路线可走。他在任何两个邮筒之间走的是直线。\n\n编程，输入包括点阵的 $m$ 和 $n$ 的值；计算出小李可选的不同路线的总条数。", "inputFormat": "输入只有一行两个整数 $m$，$n$，表示了小李管辖内的邮筒排成的点阵大小。", "outputFormat": "输出一行一个整数，表示小李可选的不同路线的条数。", "hint": "#### 样例输入输出 1 解释\n![](https://cdn.luogu.com.cn/upload/pic/1331.png)\n\n---\n#### 数据规模与约定\n- 对于 $100\\%$ 的数据，保证 $1\\le m\\le10$，$1\\le n\\le20$，且保证 $n\\times m$ 是偶数。", "locale": "zh-CN"}}}
{"pid": "P2290", "type": "P", "difficulty": 5, "samples": [["4                     \n2 1 2 1\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2004", "各省省选", "湖南", "组合数学", "排列组合", "Prüfer 序列"], "title": "[HNOI2004] 树的计数", "background": "", "description": "一个有 $n$ 个节点的树，设它的节点分别为 $v_1,v_2,\\ldots,v_n$，已知第 $i$ 个节点 $v_i$ 的度数为 $d_i$，问满足这样的条件的不同的树有多少棵。\n", "inputFormat": "输入文件第一行是一个正整数 $n$ ，表示树有 $n$ 个结点。第二行有 $n$ 个数，第 $i$ 个数表示 $d_i$，即树的第 $i$ 个结点的度数。", "outputFormat": "输出满足条件的树有多少棵。\n", "hint": "$1\\le n\\le 150$，保证满足条件的树不超过 $10^{17}$ 个。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] Counting Trees", "background": "", "description": "Consider a tree with $n$ nodes, denoted $v_1, v_2, \\ldots, v_n$. The degree of node $v_i$ is given as $d_i$. How many distinct trees satisfy these conditions?", "inputFormat": "The first line contains a positive integer $n$, the number of nodes in the tree. The second line contains $n$ integers; the $i$-th of them is $d_i$, the degree of node $v_i$.", "outputFormat": "Output the number of trees that satisfy the conditions.", "hint": "Constraints: $1 \\le n \\le 150$. It is guaranteed that the number of valid trees does not exceed $10^{17}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 树的计数", "background": "", "description": "一个有 $n$ 个节点的树，设它的节点分别为 $v_1,v_2,\\ldots,v_n$，已知第 $i$ 个节点 $v_i$ 的度数为 $d_i$，问满足这样的条件的不同的树有多少棵。\n", "inputFormat": "输入文件第一行是一个正整数 $n$ ，表示树有 $n$ 个结点。第二行有 $n$ 个数，第 $i$ 个数表示 $d_i$，即树的第 $i$ 个结点的度数。", "outputFormat": "输出满足条件的树有多少棵。\n", "hint": "$1\\le n\\le 150$，保证满足条件的树不超过 $10^{17}$ 个。", "locale": "zh-CN"}}}
{"pid": "P2291", "type": "P", "difficulty": 5, "samples": [["22 2", "27"], ["22 1", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "PA（波兰）"], "title": "[PA 2011] Prime prime power 质数的质数次方", "background": "", "description": "对于给定的数 $n$，求第 $k$ 小的 $a^b$（$a,b$ 都为质数），使得它的值大于 $n$。", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数为答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^{18}$，$1\\le k\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2011] Prime prime power 质数的质数次方", "background": "", "description": "对于给定的数 $n$，求第 $k$ 小的 $a^b$（$a,b$ 都为质数），使得它的值大于 $n$。", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数为答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^{18}$，$1\\le k\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2292", "type": "P", "difficulty": 6, "samples": [["4 3 \nis\nname\nwhat\nyour\nwhatisyourname\nwhatisyouname\nwhaisyourname\n", "14\n6\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "各省省选", "湖南", "O2优化", "AC 自动机", "状压 DP"], "title": "[HNOI2004] L 语言", "background": "", "description": "标点符号的出现晚于文字的出现，所以以前的语言都是没有标点的。现在你要处理的就是一段没有标点的文章。  \n\n一段文章 $T$ 是由若干小写字母构成。一个单词 $W$ 也是由若干小写字母构成。一个字典 $D$ 是若干个单词的集合。我们称一段文章 $T$ 在某个字典 $D$ 下是可以被理解的，是指如果文章 $T$ 可以被分成若干部分，且每一个部分都是字典 $D$ 中的单词。  \n\n例如字典 $D$ 中包括单词 $\\texttt{is},\\texttt{name},\\texttt{what},\\texttt{your}$，则文章 $\\texttt{whatisyourname}$ 是在字典 $D$ 下可以被理解的，因为它可以分成 $4$ 个单词：$\\texttt{what},\\texttt{is},\\texttt{your},\\texttt{name}$，且每个单词都属于字典 $D$，而文章 $\\texttt{whatisyouname}$ 在字典 $D$ 下不能被理解，但可以在字典 $D'=D\\cup\\{\\texttt{you}\\}$ 下被理解。这段文章的一个前缀 $\\texttt{whatis}$，也可以在字典 $D$ 下被理解，而且是在字典 $D$ 下能够被理解的最长的前缀。  \n\n给定一个字典 $D$，你的程序需要判断若干段文章在字典 $D$ 下是否能够被理解。并给出其在字典 $D$ 下能够被理解的最长前缀的位置。", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示字典 $D$ 中有 $n$ 个单词，且有 $m$ 段文章需要被处理。\n\n接下来 $n$ 行，每行一个字符串 $s$，表示字典 $D$ 中的一个单词。\n\n接下来 $m$ 行，每行一个字符串 $t$，表示一篇文章。", "outputFormat": "对于输入的每一篇文章，你需要输出一行一个整数，表示这段文章在字典 $D$ 可以被理解的最长前缀的位置。", "hint": "#### 样例 1 解释\n\n- 对于第一个询问，整段文章 `whatisyourname` 都能被理解。\n- 对于第二个询问，前缀 `whatis` 能够被理解。\n- 对于第三个询问，没有任何前缀能够被理解。\n\n#### 数据规模与约定\n\n- 对于 $80\\%$ 的数据，保证 $m \\leq 20$，$|t| \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 20$，$1 \\leq m \\leq 50$，$1 \\leq |s| \\leq 20$，$1 \\leq |t| \\leq 2 \\times 10^6$，$s$ 与 $t$ 中均只含小写英文字母。\n\n#### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意【数据规模与约定】中标注的串长是单串长度，并不是字符串长度和。\n\n#### 说明\n\n本题数据有加强，其中前 $80\\%$ 的数据为原测试数据。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] L Language", "background": "", "description": "Punctuation appeared later than writing, so earlier languages had no punctuation. Now you need to process an article without punctuation.\n\nAn article $T$ consists of lowercase letters. A word $W$ also consists of lowercase letters. A dictionary $D$ is a set of words. We say an article $T$ is understandable under a dictionary $D$ if $T$ can be split into several parts and each part is a word in $D$.\n\nFor example, if the dictionary $D$ includes the words $\\texttt{is}, \\texttt{name}, \\texttt{what}, \\texttt{your}$, then the article `whatisyourname` is understandable under $D$ because it can be split into 4 words: `what`, `is`, `your`, `name`, and each word belongs to $D$. The article `whatisyouname` is not understandable under $D$, but it is understandable under $D' = D \\cup \\{\\texttt{you}\\}$. A prefix `whatis` of this article is also understandable under $D$, and it is the longest prefix that can be understood under $D$.\n\nGiven a dictionary $D$, your program needs to determine whether several articles are understandable under $D$, and output the position of the longest prefix that can be understood under $D$.", "inputFormat": "The first line contains two integers $n$ and $m$, indicating that the dictionary $D$ has $n$ words and there are $m$ articles to process.\n\nThe next $n$ lines each contain a string $s$, representing a word in the dictionary $D$.\n\nThe next $m$ lines each contain a string $t$, representing an article.", "outputFormat": "For each article in the input, output one line with a single integer, the position of the longest prefix that can be understood under the dictionary $D$.", "hint": "Explanation for Sample 1\n- For the first query, the entire article `whatisyourname` can be understood.\n- For the second query, the prefix `whatis` can be understood.\n- For the third query, no prefix can be understood.\n\nConstraints\n- For $80\\%$ of the data, it is guaranteed that $m \\leq 20$, $|t| \\leq 10^6$.\n- For $100\\%$ of the data, it is guaranteed that $1 \\leq n \\leq 20$, $1 \\leq m \\leq 50$, $1 \\leq |s| \\leq 20$, $1 \\leq |t| \\leq 2 \\times 10^6$, and both $s$ and $t$ contain only lowercase English letters.\n\nTips\n- Pay attention to the impact of input reading on program efficiency.\n- Note that the string lengths marked in Constraints are per-string lengths, not the sum of lengths.\n\nNotes\n- The testdata is strengthened; the first $80\\%$ is the original testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] L 语言", "background": "", "description": "标点符号的出现晚于文字的出现，所以以前的语言都是没有标点的。现在你要处理的就是一段没有标点的文章。  \n\n一段文章 $T$ 是由若干小写字母构成。一个单词 $W$ 也是由若干小写字母构成。一个字典 $D$ 是若干个单词的集合。我们称一段文章 $T$ 在某个字典 $D$ 下是可以被理解的，是指如果文章 $T$ 可以被分成若干部分，且每一个部分都是字典 $D$ 中的单词。  \n\n例如字典 $D$ 中包括单词 $\\texttt{is},\\texttt{name},\\texttt{what},\\texttt{your}$，则文章 $\\texttt{whatisyourname}$ 是在字典 $D$ 下可以被理解的，因为它可以分成 $4$ 个单词：$\\texttt{what},\\texttt{is},\\texttt{your},\\texttt{name}$，且每个单词都属于字典 $D$，而文章 $\\texttt{whatisyouname}$ 在字典 $D$ 下不能被理解，但可以在字典 $D'=D\\cup\\{\\texttt{you}\\}$ 下被理解。这段文章的一个前缀 $\\texttt{whatis}$，也可以在字典 $D$ 下被理解，而且是在字典 $D$ 下能够被理解的最长的前缀。  \n\n给定一个字典 $D$，你的程序需要判断若干段文章在字典 $D$ 下是否能够被理解。并给出其在字典 $D$ 下能够被理解的最长前缀的位置。", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示字典 $D$ 中有 $n$ 个单词，且有 $m$ 段文章需要被处理。\n\n接下来 $n$ 行，每行一个字符串 $s$，表示字典 $D$ 中的一个单词。\n\n接下来 $m$ 行，每行一个字符串 $t$，表示一篇文章。", "outputFormat": "对于输入的每一篇文章，你需要输出一行一个整数，表示这段文章在字典 $D$ 可以被理解的最长前缀的位置。", "hint": "#### 样例 1 解释\n\n- 对于第一个询问，整段文章 `whatisyourname` 都能被理解。\n- 对于第二个询问，前缀 `whatis` 能够被理解。\n- 对于第三个询问，没有任何前缀能够被理解。\n\n#### 数据规模与约定\n\n- 对于 $80\\%$ 的数据，保证 $m \\leq 20$，$|t| \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 20$，$1 \\leq m \\leq 50$，$1 \\leq |s| \\leq 20$，$1 \\leq |t| \\leq 2 \\times 10^6$，$s$ 与 $t$ 中均只含小写英文字母。\n\n#### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意【数据规模与约定】中标注的串长是单串长度，并不是字符串长度和。\n\n#### 说明\n\n本题数据有加强，其中前 $80\\%$ 的数据为原测试数据。", "locale": "zh-CN"}}}
{"pid": "P2293", "type": "P", "difficulty": 6, "samples": [["3\n1000000000\n", "1000"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度", "2004", "各省省选", "湖南", "O2优化"], "title": "[HNOI2004] 高精度开根", "background": null, "description": "晓华所在的工作组正在编写一套高精度科学计算的软件，一些简单的部分如高精度加减法、乘除法早已写完了，现在就剩下晓华所负责的部分：实数的高精度开 $m$ 次根。\n\n因为一个有理数开根之后可能得到一个无理数，所以这项工作是有较大难度的。现在要做的只是这项工作的第一步：只对自然数进行开整数次根，求出它的一个非负根，并且不考虑结果的小数部分，只要求把结果截断取整即可。\n\n程序需要根据给定的输入，包括需要开根的次数，以及被开根的整数；计算出它的非负根取整后的结果。", "inputFormat": "输入共两行，每行都有一个整数，并且输入中没有多余的空格：\n\n第一行有一个正整数 $m$，表示要开的根次；\n\n第二行有一个整数 $n$，表示被开根的数。", "outputFormat": "输出文件共一行，包括一个数，即为开根取整后的结果。", "hint": "**【数据范围】**\n\n对于所有的数据：$0\\le n \\le 10^{10000},1\\le m \\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] High-Precision m-th Root", "background": "", "description": "Xiaohua's team is developing a high-precision scientific computing software suite. Some simple parts such as high-precision addition/subtraction and multiplication/division have already been completed. The remaining part, assigned to Xiaohua, is computing the high-precision real $m$-th root.\n\nBecause taking the root of a rational number may produce an irrational number, this task is quite challenging. For now, we only implement the first step: take an integer-order root of a natural number, obtain a non-negative root, and ignore the fractional part of the result—just truncate it to an integer.\n\nGiven the input specifying the degree of the root and the integer to be rooted, the program should compute the truncated non-negative root.", "inputFormat": "The input consists of two lines, each containing an integer, with no extra spaces.\n\n- The first line contains a positive integer $m$, the degree of the root.\n- The second line contains an integer $n$, the number to take the root of.", "outputFormat": "Output a single line containing one number: the truncated result of the root.", "hint": "[Constraints]\n\nFor all testdata: $0 \\le n \\le 10^{10000}, 1 \\le m \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 高精度开根", "background": null, "description": "晓华所在的工作组正在编写一套高精度科学计算的软件，一些简单的部分如高精度加减法、乘除法早已写完了，现在就剩下晓华所负责的部分：实数的高精度开 $m$ 次根。\n\n因为一个有理数开根之后可能得到一个无理数，所以这项工作是有较大难度的。现在要做的只是这项工作的第一步：只对自然数进行开整数次根，求出它的一个非负根，并且不考虑结果的小数部分，只要求把结果截断取整即可。\n\n程序需要根据给定的输入，包括需要开根的次数，以及被开根的整数；计算出它的非负根取整后的结果。", "inputFormat": "输入共两行，每行都有一个整数，并且输入中没有多余的空格：\n\n第一行有一个正整数 $m$，表示要开的根次；\n\n第二行有一个整数 $n$，表示被开根的数。", "outputFormat": "输出文件共一行，包括一个数，即为开根取整后的结果。", "hint": "**【数据范围】**\n\n对于所有的数据：$0\\le n \\le 10^{10000},1\\le m \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2294", "type": "P", "difficulty": 4, "samples": [["2\n3 3\n1 2 10\n1 3 -5\n3 3 -15\n5 3\n1 5 100\n3 5 50\n1 2 51\n", "true\nfalse\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "并查集", "各省省选", "湖南", "差分约束", "前缀和"], "title": "[HNOI2005] 狡猾的商人", "background": "", "description": "刁姹接到一个任务，为税务部门调查一位商人的账本，看看账本是不是伪造的。账本上记录了 $n$ 个月以来的收入情况，其中第 $i$ 个月的收入额为 $a_i$，$i=1,2,\\ldots,n-1,n$。当 $a_i>0$ 时表示这个月盈利 $a_i$ 元，当 $a_i<0$ 时表示这个月亏损 $|a_i|$ 元。所谓一段时间内的总收入，就是这段时间内每个月的收入额的总和。\n\n刁姹的任务是秘密进行的，为了调查商人的账本，她只好跑到商人那里打工。她趁商人不在时去偷看账本，可是她无法将账本偷出来，每次偷看账本时她都只能看某段时间内账本上记录的收入情况，并且她只能记住这段时间内的总收入。\n\n现在，姹总共偷看了 $m$ 次账本，当然也就记住了 $m$ 段时间内的总收入，你的任务是根据记住的这些信息来判断账本是不是假的。\n", "inputFormat": "第一行为一个正整数 $w$，其中 $w<100$，表示有 $w$ 组数据，即 $w$ 个账本，需要你判断。\n\n每组数据的第一行为两个正整数 $n$ 和 $m$，其中 $n<100,m<1000$，分别表示对应的账本记录了多少个月的收入情况以及偷看了多少次账本。\n\n接下来的 $m$ 行表示刁姹偷看 $m$ 次账本后记住的 $m$ 条信息，每条信息占一行，有三个整数 $s,t$ 和 $v$，表示从第 $s$ 个月到第 $t$ 个月（包含第 $t$ 个月）的总收入为 $v$，这里假设 $s$ 总是小于等于 $t$。\n", "outputFormat": "包含 $w$ 行，每行是 `true` 或 `false`，其中第 $i$ 行为 `true` 当且仅当第 $i$ 组数据，即第 $i$ 个账本不是假的；第 $i$ 行为 `false` 当且仅当第 $i$ 组数据，即第 $i$ 个账本是假的。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] The Cunning Merchant", "background": "", "description": "Diao Cha receives a task from the tax authority to investigate a merchant’s ledger and determine whether it is forged. The ledger records the income over $n$ months, where the income in month $i$ is $a_i$, $i=1,2,\\ldots,n-1,n$. When $a_i>0$, it means the profit in that month is $a_i$ yuan; when $a_i<0$, it means the loss in that month is $|a_i|$ yuan. The total income over a period is the sum of the monthly incomes within that period.\n\nHer task is carried out in secret. To investigate the ledger, she goes to work for the merchant. When the merchant is away, she peeks at the ledger, but she cannot take it out. Each time she peeks, she can only look at the income recorded for some continuous period, and she can remember only the total income over that period.\n\nNow, she has peeked at the ledger $m$ times and thus remembered the total incomes over $m$ periods. Your task is to determine, based on these remembered totals, whether the ledger is fake.", "inputFormat": "The first line contains a positive integer $w$, where $w<100$, indicating that there are $w$ test cases (that is, $w$ ledgers) to judge.\n\nFor each test case, the first line contains two positive integers $n$ and $m$, where $n<100, m<1000$, indicating how many months of income the ledger records and how many times she peeked at the ledger.\n\nThe next $m$ lines describe the $m$ pieces of information Diao Cha remembered after $m$ peeks. Each line contains three integers $s$, $t$ and $v$, meaning that the total income from month $s$ to month $t$ (including month $t$) is $v$. Here, assume $s$ is always less than or equal to $t$.", "outputFormat": "Output $w$ lines, each containing `true` or `false`. The $i$-th line is `true` if and only if the $i$-th test case, i.e., the $i$-th ledger, is not fake; the $i$-th line is `false` if and only if the $i$-th test case, i.e., the $i$-th ledger, is fake.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 狡猾的商人", "background": "", "description": "刁姹接到一个任务，为税务部门调查一位商人的账本，看看账本是不是伪造的。账本上记录了 $n$ 个月以来的收入情况，其中第 $i$ 个月的收入额为 $a_i$，$i=1,2,\\ldots,n-1,n$。当 $a_i>0$ 时表示这个月盈利 $a_i$ 元，当 $a_i<0$ 时表示这个月亏损 $|a_i|$ 元。所谓一段时间内的总收入，就是这段时间内每个月的收入额的总和。\n\n刁姹的任务是秘密进行的，为了调查商人的账本，她只好跑到商人那里打工。她趁商人不在时去偷看账本，可是她无法将账本偷出来，每次偷看账本时她都只能看某段时间内账本上记录的收入情况，并且她只能记住这段时间内的总收入。\n\n现在，姹总共偷看了 $m$ 次账本，当然也就记住了 $m$ 段时间内的总收入，你的任务是根据记住的这些信息来判断账本是不是假的。\n", "inputFormat": "第一行为一个正整数 $w$，其中 $w<100$，表示有 $w$ 组数据，即 $w$ 个账本，需要你判断。\n\n每组数据的第一行为两个正整数 $n$ 和 $m$，其中 $n<100,m<1000$，分别表示对应的账本记录了多少个月的收入情况以及偷看了多少次账本。\n\n接下来的 $m$ 行表示刁姹偷看 $m$ 次账本后记住的 $m$ 条信息，每条信息占一行，有三个整数 $s,t$ 和 $v$，表示从第 $s$ 个月到第 $t$ 个月（包含第 $t$ 个月）的总收入为 $v$，这里假设 $s$ 总是小于等于 $t$。\n", "outputFormat": "包含 $w$ 行，每行是 `true` 或 `false`，其中第 $i$ 行为 `true` 当且仅当第 $i$ 组数据，即第 $i$ 个账本不是假的；第 $i$ 行为 `false` 当且仅当第 $i$ 组数据，即第 $i$ 个账本是假的。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2295", "type": "P", "difficulty": 5, "samples": [["3 9\n0 0 1 0 0 0 0 0 1\n1 1 1 1 1 1 0 1 0\n1 0 0 1 0 0 1 0 0\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创"], "title": "MICE", "background": "", "description": "S 国的动物园是一个 $N \\times M$ 的网格图，左上角的坐标是 $(1,1)$，右下角的坐标是 $(N,M)$。\n\n小象在动物园的左上角，它想回到右下角的家里去睡觉，但是动物园中有一些老鼠，而小象又很害怕老鼠。动物园里的老鼠是彼此互不相同的。小象的害怕值定义为他回家的路径上可以看见的不同的老鼠的数量。若小象当前的位置为 $(x_1,y_1)$，小象可以看见老鼠，当且仅当老鼠的位置 $(x_2,y_2)$ 满足 $|x_1-x_2| + |y_1-y_2| \\leq 1$。由于小象很困了，所以小象只会走一条最近的路回家，即小象只会向下或者向右走。现在你需要帮小象确定一条回家的路线，使得小象的害怕值最小。\n", "inputFormat": "第一行包含两个用空格隔开的整数，$N$ 和 $M$。\n\n接下来一个 $N \\times M$ 的矩阵表示动物园的地图。其中 $A_{i,j}$ 表示第 $i$ 行第 $j$ 列上老鼠的数量。若 $A_{i,j} = 0$ 则表示当前位置上没有老鼠(小象的家里也可能存在老鼠)。\n", "outputFormat": "输出一个整数，表示路线最小的害怕值是多少。\n", "hint": "对于 $20\\%$ 的数据，$1 \\leq N,M \\leq 5$。\n\n对于 $100\\%$ 的数据，$1 \\leq N,M \\leq 1000,0 \\leq A_{i,j} \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "MICE", "background": "", "description": "The zoo in country S is an $N \\times M$ grid, with the top-left corner at $(1, 1)$ and the bottom-right corner at $(N, M)$.\n\nA little elephant is at the top-left corner and wants to go home to sleep at the bottom-right corner, but there are some mice in the zoo, and the elephant is afraid of them. The mice in the zoo are all distinct individuals. The elephant’s fear value is defined as the number of distinct mice it can see along its route home. If the elephant is currently at $(x_1, y_1)$, it can see a mouse if and only if the mouse at $(x_2, y_2)$ satisfies $|x_1 - x_2| + |y_1 - y_2| \\leq 1$. Since the elephant is very sleepy, it will only take a shortest path home, i.e., it only moves down or right. Now you need to determine a route home that minimizes the elephant’s fear value.", "inputFormat": "The first line contains two integers, $N$ and $M$.\n\nThen an $N \\times M$ matrix describes the map of the zoo. $A_{i, j}$ denotes the number of mice at row $i$, column $j$. If $A_{i, j} = 0$, it means there are no mice at that position (the elephant’s home may also contain mice).", "outputFormat": "Output a single integer, the minimal possible fear value over all routes.", "hint": "For $20\\%$ of the testdata, $1 \\leq N, M \\leq 5$.\n\nFor $100\\%$ of the testdata, $1 \\leq N, M \\leq 1000, 0 \\leq A_{i, j} \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "MICE", "background": "", "description": "S 国的动物园是一个 $N \\times M$ 的网格图，左上角的坐标是 $(1,1)$，右下角的坐标是 $(N,M)$。\n\n小象在动物园的左上角，它想回到右下角的家里去睡觉，但是动物园中有一些老鼠，而小象又很害怕老鼠。动物园里的老鼠是彼此互不相同的。小象的害怕值定义为他回家的路径上可以看见的不同的老鼠的数量。若小象当前的位置为 $(x_1,y_1)$，小象可以看见老鼠，当且仅当老鼠的位置 $(x_2,y_2)$ 满足 $|x_1-x_2| + |y_1-y_2| \\leq 1$。由于小象很困了，所以小象只会走一条最近的路回家，即小象只会向下或者向右走。现在你需要帮小象确定一条回家的路线，使得小象的害怕值最小。\n", "inputFormat": "第一行包含两个用空格隔开的整数，$N$ 和 $M$。\n\n接下来一个 $N \\times M$ 的矩阵表示动物园的地图。其中 $A_{i,j}$ 表示第 $i$ 行第 $j$ 列上老鼠的数量。若 $A_{i,j} = 0$ 则表示当前位置上没有老鼠(小象的家里也可能存在老鼠)。\n", "outputFormat": "输出一个整数，表示路线最小的害怕值是多少。\n", "hint": "对于 $20\\%$ 的数据，$1 \\leq N,M \\leq 5$。\n\n对于 $100\\%$ 的数据，$1 \\leq N,M \\leq 1000,0 \\leq A_{i,j} \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P2296", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2\n2 1\n1 3", "-1"], ["6 6\n1 2\n1 3\n2 6\n2 5  \n4 5\n3 4\n1 5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "2014", "NOIP 提高组"], "title": "[NOIP 2014 提高组] 寻找道路", "background": "NOIP2014 提高组 D2T2", "description": "在有向图 $G$ 中，每条边的长度均为 $1$，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件：\n\n1. 路径上的所有点的出边所指向的点都直接或间接与终点连通。\n2. 在满足条件 $1$ 的情况下使路径最短。\n\n注意：图 $G$ 中可能存在重边和自环，题目保证终点没有出边。\n\n请你输出符合条件的路径的长度。", "inputFormat": "第一行有两个用一个空格隔开的整数 $n$ 和 $m$，表示图有 $n$ 个点和 $m$ 条边。\n\n接下来的 $m$ 行每行 $2$ 个整数 $x,y$，之间用一个空格隔开，表示有一条边从点 $x$ 指向点 $y$。\n\n最后一行有两个用一个空格隔开的整数 $s,t$，表示起点为 $s$，终点为 $t$。", "outputFormat": "输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 $-1$。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png) \n\n如上图所示，箭头表示有向道路，圆点表示城市。起点 $1$ 与终点 $3$ 不连通，所以满足题目描述的路径不存在，故输出 $-1$。\n\n**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)\n如上图所示，满足条件的路径为 $1\\to 3\\to 4\\to 5$。注意点 $2$ 不能在答案路径中，因为点 $2$ 连了一条边到点 $6$，而点 $6$ 不与终点 $5$ 连通。\n\n**数据范围及约定**\n\n- 对于 $30\\%$ 的数据，$0<n\\le10$，$0<m\\le 20$。\n- 对于 $60\\%$ 的数据，$0<n\\le100$，$0<m\\le 2000$。\n- 对于 $100\\%$ 的数据，$0<n\\le 10^4$，$0<m\\le 2\\times 10^5$，$0<x,y,s,t\\le n,x,s\\ne t$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Finding the Road", "background": "NOIP 2014 Senior D2T2.", "description": "In a directed graph $G$ where every edge has length $1$, you are given a start and a terminal. Please find a path from the start to the terminal that satisfies the following conditions:\n\n1. For every vertex on the path, all endpoints of its outgoing edges are directly or indirectly able to reach the terminal.\n2. Among all paths satisfying condition 1, the path should be the shortest.\n\nNote: Graph $G$ may contain multiple edges and self-loops. It is guaranteed that the terminal has no outgoing edges.\n\nPlease output the length of a path that satisfies the conditions.", "inputFormat": "The first line contains two integers $n$ and $m$ separated by a space, denoting that the graph has $n$ vertices and $m$ edges.\n\nEach of the next $m$ lines contains two integers $x, y$ separated by a space, indicating there is a directed edge from vertex $x$ to vertex $y$.\n\nThe last line contains two integers $s, t$ separated by a space, indicating that the start is $s$ and the terminal is $t$.", "outputFormat": "Output a single line containing an integer, the length of the shortest path that satisfies the problem statement. If such a path does not exist, output $-1$.", "hint": "Sample 1 Explanation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png)\n\nAs shown in the figure above, arrows represent directed roads and dots represent cities. The start $1$ is not connected to the terminal $3$, so a path satisfying the problem statement does not exist, hence the output is $-1$.\n\nSample 2 Explanation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)\nAs shown in the figure above, a path that satisfies the conditions is $1 \\to 3 \\to 4 \\to 5$. Note that vertex $2$ cannot appear in the answer path because vertex $2$ has an edge to vertex $6$, and vertex $6$ cannot reach the terminal $5$.\n\nConstraints.\n\n- For 30% of the testdata, $0 < n \\le 10$, $0 < m \\le 20$.\n- For 60% of the testdata, $0 < n \\le 100$, $0 < m \\le 2000$.\n- For 100% of the testdata, $0 < n \\le 10^4$, $0 < m \\le 2 \\times 10^5$, $0 < x, y, s, t \\le n$, $x, s \\ne t$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 寻找道路", "background": "NOIP2014 提高组 D2T2", "description": "在有向图 $G$ 中，每条边的长度均为 $1$，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件：\n\n1. 路径上的所有点的出边所指向的点都直接或间接与终点连通。\n2. 在满足条件 $1$ 的情况下使路径最短。\n\n注意：图 $G$ 中可能存在重边和自环，题目保证终点没有出边。\n\n请你输出符合条件的路径的长度。", "inputFormat": "第一行有两个用一个空格隔开的整数 $n$ 和 $m$，表示图有 $n$ 个点和 $m$ 条边。\n\n接下来的 $m$ 行每行 $2$ 个整数 $x,y$，之间用一个空格隔开，表示有一条边从点 $x$ 指向点 $y$。\n\n最后一行有两个用一个空格隔开的整数 $s,t$，表示起点为 $s$，终点为 $t$。", "outputFormat": "输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 $-1$。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png) \n\n如上图所示，箭头表示有向道路，圆点表示城市。起点 $1$ 与终点 $3$ 不连通，所以满足题目描述的路径不存在，故输出 $-1$。\n\n**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)\n如上图所示，满足条件的路径为 $1\\to 3\\to 4\\to 5$。注意点 $2$ 不能在答案路径中，因为点 $2$ 连了一条边到点 $6$，而点 $6$ 不与终点 $5$ 连通。\n\n**数据范围及约定**\n\n- 对于 $30\\%$ 的数据，$0<n\\le10$，$0<m\\le 20$。\n- 对于 $60\\%$ 的数据，$0<n\\le100$，$0<m\\le 2000$。\n- 对于 $100\\%$ 的数据，$0<n\\le 10^4$，$0<m\\le 2\\times 10^5$，$0<x,y,s,t\\le n,x,s\\ne t$。", "locale": "zh-CN"}}}
{"pid": "P2298", "type": "P", "difficulty": 3, "samples": [["5 6\n.#..#.\n....#.\nd.....\n#####.\nm.....\n", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "Mzc和男家丁的游戏", "background": "mzc 与 djn 的第二弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过上一弹的都知道）。他把她们召集在了一起，他们决定玩捉迷藏。现在 mzc 要来寻找他的男家丁，大家一起来帮忙啊！\n\n由于男家丁数目不多，再加上 mzc 大大的找人水平很好，所以一次只需要找一个男家丁。\n", "inputFormat": "第一行有两个数 $n,m$，表示有 $n$ 行 $m$ 列供男家丁躲藏，\n\n之后 $n$ 行 $m$ 列的矩阵，`m` 表示 mzc，`d` 表示男家丁，`#` 表示不能走，`.` 表示空地。\n", "outputFormat": "一行，若有解：一个数 $sum$，表示找到男家丁的最短移动次数。\n\n若无解：输出 `No Way!`。", "hint": "$3 \\leq m,n \\leq 2000$。\n\n由于 mzc 大大十分着急，所以他只能等待 $1s$。", "locale": "zh-CN", "translations": {"en": {"title": "Mzc and the Male Servants' Game", "background": "The second installment of mzc and djn.", "description": "Mzc’s family is very rich (just kidding). He has $n$ male servants (those who did the first installment already know). He gathered them together, and they decided to play hide-and-seek. Now mzc is going to search for his male servants. Let’s help out!\n\nSince there are not many male servants, and mzc is very good at finding people, each time he only needs to find one male servant.", "inputFormat": "The first line contains two integers $n$ and $m$, indicating there are $n$ rows and $m$ columns where the male servants can hide.\n\nThen follow $n$ lines with $m$ columns forming a matrix: `m` denotes mzc, `d` denotes a male servant, `#` denotes an impassable cell, and `.` denotes an empty cell.", "outputFormat": "A single line. If there is a solution: output one integer $sum$, which is the minimal number of moves to find a male servant.\n\nIf there is no solution: output `No Way!`.", "hint": "$3 \\leq m,n \\leq 2000$.\n\nBecause mzc is in a great hurry, he can only wait for 1 s.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Mzc和男家丁的游戏", "background": "mzc 与 djn 的第二弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过上一弹的都知道）。他把她们召集在了一起，他们决定玩捉迷藏。现在 mzc 要来寻找他的男家丁，大家一起来帮忙啊！\n\n由于男家丁数目不多，再加上 mzc 大大的找人水平很好，所以一次只需要找一个男家丁。\n", "inputFormat": "第一行有两个数 $n,m$，表示有 $n$ 行 $m$ 列供男家丁躲藏，\n\n之后 $n$ 行 $m$ 列的矩阵，`m` 表示 mzc，`d` 表示男家丁，`#` 表示不能走，`.` 表示空地。\n", "outputFormat": "一行，若有解：一个数 $sum$，表示找到男家丁的最短移动次数。\n\n若无解：输出 `No Way!`。", "hint": "$3 \\leq m,n \\leq 2000$。\n\n由于 mzc 大大十分着急，所以他只能等待 $1s$。", "locale": "zh-CN"}}}
{"pid": "P2299", "type": "P", "difficulty": 3, "samples": [["5 8\n1 2 3\n2 3 4\n3 4 5\n4 5 6\n1 3 4\n2 4 7\n2 5 8\n1 5 100\n", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "最短路"], "title": "Mzc和体委的争夺战", "background": "mzc 与 djn 第四弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前三弹的都知道）。但如此之多的男家丁吸引来了我们的体委（矮胖小伙），他要来与 mzc 争夺男家丁。\n\nmzc 很生气，决定与其决斗，但 cat 的体力确实有些不稳定，所以他需要你来帮他计算一下最短需要的时间。", "inputFormat": "第一行有两个数 $n,m$。$n$ 表示有 $n$ 个停留站，$m$ 表示共有 $m$ 条路。\n\n之后 $m$ 行，每行三个数 $a_i,b_i,c_i$，表示第 $a_i$ 个停留站到第 $b_i$ 个停留站需要 $c_i$ 的时间。注意，这是双向的。也就是说，从 $b_i$ 个停留站到第 $a_i$ 个停留站也需要 $c_i$ 的时间。", "outputFormat": "一行，输出 $1$ 到 $n$ 最短时间。", "hint": "$1\\le n \\leq 2500$，$1\\le m \\leq 2\\times10^5$，$1\\le c_i\\le 10^6$。\n\n由于 mzc 大大十分着急，所以他只能等待 1s。", "locale": "zh-CN", "translations": {"en": {"title": "Mzc and the PE Monitor's Battle", "background": "The fourth installment of mzc and djn.", "description": "mzc is very rich (just kidding). He has $n$ male servants (those who did the first three installments know this). But such a large number of male servants attracted our PE monitor (a short, chubby fellow), who wants to compete with mzc for them.\n\nmzc is very angry and decides to duel him, but cat's stamina is indeed somewhat unstable, so he needs you to help him calculate the minimum required time.", "inputFormat": "The first line contains two numbers $n, m$. $n$ means there are $n$ stops, and $m$ means there are $m$ roads.\n\nThen follow $m$ lines, each with three numbers $a_i, b_i, c_i$, meaning that it takes $c_i$ time to go from stop $a_i$ to stop $b_i$. Note that the edges are bidirectional. That is, it also takes $c_i$ time to go from stop $b_i$ to stop $a_i$.", "outputFormat": "Output one line: the shortest time from $1$ to $n$.", "hint": "Constraints: $1 \\le n \\le 2500$, $1 \\le m \\le 2 \\times 10^5$, $1 \\le c_i \\le 10^6$.\n\nTime limit: $1$ s.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Mzc和体委的争夺战", "background": "mzc 与 djn 第四弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前三弹的都知道）。但如此之多的男家丁吸引来了我们的体委（矮胖小伙），他要来与 mzc 争夺男家丁。\n\nmzc 很生气，决定与其决斗，但 cat 的体力确实有些不稳定，所以他需要你来帮他计算一下最短需要的时间。", "inputFormat": "第一行有两个数 $n,m$。$n$ 表示有 $n$ 个停留站，$m$ 表示共有 $m$ 条路。\n\n之后 $m$ 行，每行三个数 $a_i,b_i,c_i$，表示第 $a_i$ 个停留站到第 $b_i$ 个停留站需要 $c_i$ 的时间。注意，这是双向的。也就是说，从 $b_i$ 个停留站到第 $a_i$ 个停留站也需要 $c_i$ 的时间。", "outputFormat": "一行，输出 $1$ 到 $n$ 最短时间。", "hint": "$1\\le n \\leq 2500$，$1\\le m \\leq 2\\times10^5$，$1\\le c_i\\le 10^6$。\n\n由于 mzc 大大十分着急，所以他只能等待 1s。", "locale": "zh-CN"}}}
{"pid": "P2300", "type": "P", "difficulty": 6, "samples": [["8\n1 9 9 4 1 2 2 9", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "二分", "单调队列", "前缀和"], "title": "合并神犇", "background": "loidc 来到了 NOI 的赛场上，他在那里看到了好多神犇。\n", "description": "神犇们现在正排成一排在刷题。每个神犇都有一个能力值 $p_i$。loidc 认为坐在附近的金牌爷能力参差不齐非常难受。于是 loidc 便想方设法对神犇们进行人道主义合并。\n\nloidc 想把神犇的能力值排列成从左到右单调不减。他每次可以选择一个神犇，把他合并到两侧相邻的神犇上。合并后的新神犇能力值是以前两位犇的能力值之和。每次合并完成后，被合并的两个神犇就会消失。合并后的新神犇不能再分开（万一他俩有女朋友咋办）因此每次合并后神犇的总数会减 1。\n\nloidc 想知道，想治好他的强迫症需要合并多少次。\n", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $p_i$。\n", "outputFormat": "一行一个整数表示 loidc 需要合并的次数。\n", "hint": "对于 $50\\%$ 的数据，$0\\lt n \\le 5000$。\n\n对于 $100\\%$ 的数据，$0\\lt n \\le2\\times 10^5$，$0\\lt p_i\\le 2147483647$，$p$ 均为随机生成。\n", "locale": "zh-CN", "translations": {"en": {"title": "Merging Shen Niu", "background": "loidc came to the NOI arena, where he saw many shen niu (神犇).", "description": "The shen niu are standing in a line solving problems. Each shen niu has an ability value $p_i$. loidc feels uncomfortable that the abilities of nearby gold medalists vary widely, so he decides to humanely merge the shen niu.\n\nloidc wants the ability values to be nondecreasing from left to right. Each time, he may choose one shen niu and merge him into one of his two adjacent shen niu. The ability of the new shen niu after the merge equals the sum of the two participants’ abilities. After each merge, the two participants disappear and are replaced by the merged shen niu. The merged shen niu cannot be split again. Therefore, after each merge, the total number of shen niu decreases by $1$.\n\nloidc wants to know the minimum number of merges needed to achieve his goal.", "inputFormat": "The first line contains an integer $n$.\n\nThe second line contains $n$ integers, where the $i$-th integer is $p_i$.", "outputFormat": "Output a single integer, the minimum number of merges loidc needs.", "hint": "Constraints:\n\n- For $50\\%$ of the testdata, $0 \\lt n \\le 5000$.\n- For $100\\%$ of the testdata, $0 \\lt n \\le 2 \\times 10^5$, $0 \\lt p_i \\le 2147483647$, and the $p_i$ are randomly generated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "合并神犇", "background": "loidc 来到了 NOI 的赛场上，他在那里看到了好多神犇。\n", "description": "神犇们现在正排成一排在刷题。每个神犇都有一个能力值 $p_i$。loidc 认为坐在附近的金牌爷能力参差不齐非常难受。于是 loidc 便想方设法对神犇们进行人道主义合并。\n\nloidc 想把神犇的能力值排列成从左到右单调不减。他每次可以选择一个神犇，把他合并到两侧相邻的神犇上。合并后的新神犇能力值是以前两位犇的能力值之和。每次合并完成后，被合并的两个神犇就会消失。合并后的新神犇不能再分开（万一他俩有女朋友咋办）因此每次合并后神犇的总数会减 1。\n\nloidc 想知道，想治好他的强迫症需要合并多少次。\n", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $p_i$。\n", "outputFormat": "一行一个整数表示 loidc 需要合并的次数。\n", "hint": "对于 $50\\%$ 的数据，$0\\lt n \\le 5000$。\n\n对于 $100\\%$ 的数据，$0\\lt n \\le2\\times 10^5$，$0\\lt p_i\\le 2147483647$，$p$ 均为随机生成。\n", "locale": "zh-CN"}}}
{"pid": "P2301", "type": "P", "difficulty": 3, "samples": [["5 2\n3\n1\n4\n5\n8\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "就是干！", "background": "loidc 有着特别的作死技巧，但是有一天他特别的技巧失效了。\n\nMr.Cao 发现了他在与其他哲学家摔跤，于是 Mr.Cao 带着浩浩荡荡的老师大军来讨伐 Loidc。", "description": "眼看着老师大军浩浩荡荡的向机房前进。LOI 的同学们决定动用自己的力量来保卫他们的好朋友 loidc。现在每个人都要挑选自己的武器——两根木棍。一根用做远距离投掷，另一根用做近距离搏斗。每个人都想挑到最好的，但这是不可能的。但是为了让多数人满意，也为了减少大家的矛盾。cony 设计了一个矛盾指数，这个指数就是每个人的不舒服指数和，不舒服指数就 $(L1-L2)^2$，其中 $L1,L2$ 分别是两根木棍的长度。\n\ncony 决定让矛盾指数最少，于是他来向你寻求帮助，希望你能告诉他矛盾指数至少有多少。", "inputFormat": "第一行两个数 $m,n$。\n\n表示有 $n$ 个人，$m$ 个木棍。\n\n接下来 $m$ 个数表示每个木棍（肯定有解）。", "outputFormat": "一个数，最少的矛盾指数。", "hint": "$m \\leq 2000,n \\leq 500$", "locale": "zh-CN", "translations": {"en": {"title": "Just Do It!", "background": "Loidc has some special self-destructive tricks, but one day his special tricks stopped working. Mr. Cao found him wrestling with other philosophers, so Mr. Cao led a mighty army of teachers to fight against Loidc.", "description": "Seeing the massive army of teachers marching toward the computer lab, the LOI students decided to use their own strength to defend their good friend Loidc. Now everyone must choose their weapons—two wooden sticks. One is for long-range throwing, and the other is for close-quarters combat. Everyone wants the best, but that is impossible. To make most people satisfied and reduce conflict, cony designed a “conflict index.” This index is the sum of each person’s discomfort index, and the discomfort index is $(L1-L2)^2$, where $L1, L2$ are the lengths of the two sticks.\n\nCony decides to minimize the conflict index, so he comes to you for help and hopes you can tell him the minimum possible conflict index.", "inputFormat": "The first line contains two integers $m,n$.\n\nIt means there are $n$ people and $m$ sticks.\n\nThen follow $m$ numbers representing each stick (it is guaranteed that a solution exists).", "outputFormat": "A single number: the minimum conflict index.", "hint": "Constraints: $m \\leq 2000, n \\leq 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "就是干！", "background": "loidc 有着特别的作死技巧，但是有一天他特别的技巧失效了。\n\nMr.Cao 发现了他在与其他哲学家摔跤，于是 Mr.Cao 带着浩浩荡荡的老师大军来讨伐 Loidc。", "description": "眼看着老师大军浩浩荡荡的向机房前进。LOI 的同学们决定动用自己的力量来保卫他们的好朋友 loidc。现在每个人都要挑选自己的武器——两根木棍。一根用做远距离投掷，另一根用做近距离搏斗。每个人都想挑到最好的，但这是不可能的。但是为了让多数人满意，也为了减少大家的矛盾。cony 设计了一个矛盾指数，这个指数就是每个人的不舒服指数和，不舒服指数就 $(L1-L2)^2$，其中 $L1,L2$ 分别是两根木棍的长度。\n\ncony 决定让矛盾指数最少，于是他来向你寻求帮助，希望你能告诉他矛盾指数至少有多少。", "inputFormat": "第一行两个数 $m,n$。\n\n表示有 $n$ 个人，$m$ 个木棍。\n\n接下来 $m$ 个数表示每个木棍（肯定有解）。", "outputFormat": "一个数，最少的矛盾指数。", "hint": "$m \\leq 2000,n \\leq 500$", "locale": "zh-CN"}}}
{"pid": "P2302", "type": "P", "difficulty": 5, "samples": [["9 11 9 4\n1 2\n3 2\n1 4\n4 7\n7 5\n5 1\n6 9\n8 5\n9 8\n5 3\n4 8\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["树形数据结构"], "title": "loidc，跑起来", "background": "loidc 在路上诱拐了一个幼女。（他不是哲学家么！？）", "description": "现在他已经被 cony 追杀。loidc 逃到一个迷宫中，cony 也追到了这儿。迷宫由编号由 $1$ 到 $n$ 的方块组成。每两个不同的方块将被得知它们是否与另一个相邻。现在已知 loidc 和 cony 所处迷宫的位置。在迷宫中的人可以选择留在原地不动，还是移到相邻的方格中。\n\n迷宫具有如下性质：\n\n它不包括三角形，也就是没有任意三个不同的方块，它们两两相邻，\n\n每一个人到达都能到达任意一个方块。\n\n一次追杀由许多回合组成。在一个回合内，每一个人移一步。每一个回合由 loidc 开始。如果 loidc 与 cony 在同一个方格中相遇，那么我们就可能永远见不到 loidc 了。\n\nloidc 非常害怕，他请求你告诉他是否会被 cony 抓住，多少回合 cony 赶上他。（假设两个人都足够聪明）", "inputFormat": "第一行有 $4$ 个整数 $n,m,a,b$，它们用单个空格分隔，（$2 \\leq n \\leq 3000, n-1 \\leq m \\leq 15000,1 \\leq a,b \\leq n$）。它们分别表示迷宫中的方块数目，相邻的一对方块（双向）数目，相邻两个方格中有且仅有一条边，loidc、cony 所处的位置。下面 $m$ 行，一行包含两个用一个空格分开的整数，表示每一对相邻的方块编号。", "outputFormat": "一个单词 `NO`，如果 cony 不能赶上 loidc；或者一个整数，如果 cony 能赶上 loidc 的最少游戏轮数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "loidc, Run", "background": "loidc abducted a young girl on the road. (Isn't he a philosopher!?)", "description": "Now he is being hunted by cony. loidc fled into a maze, and cony has followed him there. The maze consists of cells numbered from $1$ to $n$. Some pairs of distinct cells are adjacent; the set of adjacencies is given. A person in the maze may either stay where they are or move to an adjacent cell.\n\nThe maze has the following properties:\n- It contains no triangles; that is, there do not exist three distinct cells that are pairwise adjacent.\n- From any cell, one can reach any other cell.\n\nThe chase consists of many rounds. In each round, each person makes at most one move. loidc moves first in every round, then cony moves. If loidc and cony occupy the same cell at any time, we may never see loidc again.\n\nloidc is very scared. He asks you to tell him whether he will be caught by cony, and in how many rounds cony will catch him (assuming both are sufficiently clever).", "inputFormat": "The first line contains $4$ integers $n, m, a, b$, separated by single spaces ($2 \\leq n \\leq 3000$, $n - 1 \\leq m \\leq 15000$, $1 \\leq a, b \\leq n$). They denote the number of cells in the maze, the number of adjacent pairs (undirected edges), and the starting positions of loidc and cony, respectively. Each of the following $m$ lines contains two integers separated by a single space, indicating an adjacent pair of cell indices. Between any two adjacent cells, there is exactly one edge.", "outputFormat": "Output the single word `NO` if cony cannot catch loidc; otherwise output an integer, the minimum number of rounds needed for cony to catch loidc.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，跑起来", "background": "loidc 在路上诱拐了一个幼女。（他不是哲学家么！？）", "description": "现在他已经被 cony 追杀。loidc 逃到一个迷宫中，cony 也追到了这儿。迷宫由编号由 $1$ 到 $n$ 的方块组成。每两个不同的方块将被得知它们是否与另一个相邻。现在已知 loidc 和 cony 所处迷宫的位置。在迷宫中的人可以选择留在原地不动，还是移到相邻的方格中。\n\n迷宫具有如下性质：\n\n它不包括三角形，也就是没有任意三个不同的方块，它们两两相邻，\n\n每一个人到达都能到达任意一个方块。\n\n一次追杀由许多回合组成。在一个回合内，每一个人移一步。每一个回合由 loidc 开始。如果 loidc 与 cony 在同一个方格中相遇，那么我们就可能永远见不到 loidc 了。\n\nloidc 非常害怕，他请求你告诉他是否会被 cony 抓住，多少回合 cony 赶上他。（假设两个人都足够聪明）", "inputFormat": "第一行有 $4$ 个整数 $n,m,a,b$，它们用单个空格分隔，（$2 \\leq n \\leq 3000, n-1 \\leq m \\leq 15000,1 \\leq a,b \\leq n$）。它们分别表示迷宫中的方块数目，相邻的一对方块（双向）数目，相邻两个方格中有且仅有一条边，loidc、cony 所处的位置。下面 $m$ 行，一行包含两个用一个空格分开的整数，表示每一对相邻的方块编号。", "outputFormat": "一个单词 `NO`，如果 cony 不能赶上 loidc；或者一个整数，如果 cony 能赶上 loidc 的最少游戏轮数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2303", "type": "P", "difficulty": 5, "samples": [["6\n", "15"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "各省省选", "山东", "O2优化", "欧拉函数"], "title": "[SDOI2012] Longge 的问题", "background": "Longge 的数学成绩非常好，并且他非常乐于挑战高难度的数学问题。", "description": "现在问题来了：给定一个整数 $n$，你需要求出 $\\sum\\limits_{i=1}^n \\gcd(i, n)$，其中 $\\gcd(i, n)$ 表示 $i$ 和 $n$ 的最大公因数。  ", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $60\\% $ 的数据，保证 $n\\leq 2^{16}$。\n- 对于 $100\\% $ 的数据，保证 $1\\leq n< 2^{32}$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Longge's Problem", "background": "Longge excels at mathematics, and he enjoys tackling challenging math problems.", "description": "Here is the problem: Given an integer $n$, you need to compute $\\sum\\limits_{i=1}^n \\gcd(i, n)$, where $\\gcd(i, n)$ denotes the greatest common divisor of $i$ and $n$.", "inputFormat": "The input consists of a single line containing the integer $n$.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "#### Constraints\n\n- For $60\\%$ of the testdata, it is guaranteed that $n \\leq 2^{16}$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n < 2^{32}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] Longge 的问题", "background": "Longge 的数学成绩非常好，并且他非常乐于挑战高难度的数学问题。", "description": "现在问题来了：给定一个整数 $n$，你需要求出 $\\sum\\limits_{i=1}^n \\gcd(i, n)$，其中 $\\gcd(i, n)$ 表示 $i$ 和 $n$ 的最大公因数。  ", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $60\\% $ 的数据，保证 $n\\leq 2^{16}$。\n- 对于 $100\\% $ 的数据，保证 $1\\leq n< 2^{32}$。", "locale": "zh-CN"}}}
{"pid": "P2304", "type": "P", "difficulty": 7, "samples": [["6\n-1 1\n1 1\n-2 2\n0 8\n0 9\n0 10\n", "3\n2 1 3\n3\n"], ["4\n0 1\n-2 1\n2 1\n3 2\n", "4\n1 2 3 4\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2015", "NOI", "网络流", "Special Judge", "图论建模"], "title": "[NOI2015] 小园丁与老司机", "background": "", "description": "小园丁 Mr. S 负责看管一片田野，田野可以看作一个二维平面。田野上有 $n$ 棵 许愿树，编号 $1,2,3,\\dots,n$ ，每棵树可以看作平面上的一个点，其中第 $i$ 棵树 $(1 \\leq i \\leq n)$ 位于坐标 $(x_i, y_i)$ 。任意两棵树的坐标均不相同。\n\n老司机 Mr. P 从原点 $(0,0)$ 驾车出发，进行若干轮行动。每一轮，Mr. P 首先选择任意一个满足以下条件的方向：\n\n1.为左、右、上、左上 $45\\degree$、右上 $45\\degree$ 五个方向之一。\n\n2.沿此方向前进可以到达一棵他尚未许愿过的树。\n\n完成选择后，Mr.P 沿该方向直线前进，必须到达该方向上距离最近的尚未许愿的树，在树下许愿并继续下一轮行动。如果没有满足条件的方向可供选择，则停止行动。他会采取最优策略，在尽可能多的树下许愿。若最优策略不唯一，可以选择任意一种。\n\n不幸的是，小园丁 Mr.S 发现由于田野土质松软，老司机 Mr.P 的小汽车在每轮行进过程中，都会在田野上留下一条车辙印，一条车辙印可看作以两棵树（或原点和一棵树）为端点的一条线段。\n\n在 Mr.P 之后，还有很多许愿者计划驾车来田野许愿，这些许愿者都会像 Mr.P 一样任选一种最优策略行动。Mr.S 认为非左右方向（即上、左上  $45\\degree$、右 上 $45\\degree$ 三个方向）的车辙印很不美观，为了维护田野的形象，他打算租用一些轧路机，在这群许愿者到来之前夯实所有“可能留下非左右方向车辙印”的地面。“可能留下非左右方向车辙印”的地面应当是田野上的若干条线段，其中每条线段都包含在某一种最优策略的行进路线中。每台轧路机都采取满足以下三个条件的工作模式：\n\n1.从原点或任意一棵树出发。\n\n2.只能向上、左上 $45\\degree$、右上 $45\\degree$ 三个方向之一移动，并且只能在树下改变方向或停止。\n\n3.只能经过“可能留下非左右方向车辙印”的地面，但是同一块地面可以 被多台轧路机经过。\n\n现在 Mr. P 和 Mr. S 分别向你提出了一个问题：\n\n1.请给 Mr.P 指出任意一条最优路线。\n\n2.请告诉 Mr.S 最少需要租用多少台轧路机。", "inputFormat": "第 $1$ 行包含 $1$ 个正整数 $n$，表示许愿树的数量。\n\n接下来 $n$ 行，第 $i+1$ 行包含 $2$ 个整数 $x_i,y_i$，中间用单个空格隔开，表示第 $i$ 棵许愿树的坐标。", "outputFormat": "包括 $3$ 行。\n\n第 $1$ 行输出 $1$ 个整数 $m$，表示 Mr. P 最多能在多少棵树下许愿。\n\n输出文件的第 $2$ 行输出 $m$ 个整数，相邻整数之间用单个空格隔开，表示 Mr.P 应该依次在哪些树下许愿。\n\n输出文件的第 $3$ 行输出 $1$ 个整数，表示 Mr. S 最少需要租用多少台轧路机。\n", "hint": "#### 样例 1 解释\n\n最优路线共 $2$ 条，可许愿 $3$ 次：$(0,0) \\rightarrow (1,1) \\rightarrow (-1,1) \\rightarrow (-2,2)$ 或 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n至少 $3$ 台轧路机，路线是 $(0,0) \\rightarrow (1,1)$，$(-1,1) \\rightarrow (-2,2)$ 和 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n#### 样例 2 解释\n\n最优路线唯一：$(0,0) \\rightarrow (0,1) \\rightarrow (-2,1) \\rightarrow (2,1) \\rightarrow (3,2)$，可许愿 $4$ 次。其中在 $(0,1)$ 许愿后，从 $(-2,1)$ 出发沿着向右的方向能够到达的最近的未许愿过的树是 $(2,1)$，所以可以到达 $(2,1)$。\n\n而如果沿着 $(0,0) \\rightarrow (0,1) \\rightarrow (2,1) \\rightarrow (-2,1)$ 的方向前进，此时 $(-2,1)$ 右边所有树都是许愿过的，根据题目条件规定，停止前进。故无法获得最优解。\n\n$(0,0) \\rightarrow (0,1)$ 与 $(2,1) \\rightarrow (3,2)$ 会留下非左右方向车辙印，需 $2$ 台轧路机。\n\n![](https://cdn.luogu.com.cn/upload/pic/1509.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2015] The Little Gardener and the Veteran Driver", "background": "", "description": "The little gardener Mr. S is in charge of a field, which can be regarded as a 2D plane. There are $n$ wishing trees in the field, numbered $1, 2, 3, \\dots, n$. Each tree is considered a point on the plane, where the $i$-th tree $(1 \\leq i \\leq n)$ is located at coordinates $(x_i, y_i)$. No two trees share the same coordinates.\n\nThe veteran driver Mr. P starts driving from the origin $(0,0)$ and takes several rounds of actions. In each round, Mr. P first chooses any direction that satisfies the following conditions:\n\n1. It is one of the five directions: left, right, up, up-left $45\\degree$, or up-right $45\\degree$.\n2. Moving along this direction can reach a tree at which he has not yet made a wish.\n\nAfter making the choice, Mr. P moves straight along that direction and must reach the nearest unvisited tree in that direction, make a wish under the tree, and then proceed to the next round. If there is no direction that satisfies the conditions, he stops. He will adopt an optimal strategy to make wishes under as many trees as possible. If the optimal strategy is not unique, he may choose any one.\n\nUnfortunately, the little gardener Mr. S finds that due to the soft soil of the field, Mr. P’s car leaves a rut during each move. A rut can be regarded as a line segment with endpoints at two trees (or the origin and a tree).\n\nAfter Mr. P, many other wishers plan to drive to the field to make wishes, and they will act using some optimal strategy just like Mr. P. Mr. S believes that ruts in non-left/right directions (that is, up, up-left $45\\degree$, and up-right $45\\degree$) are unsightly. To maintain the appearance of the field, he plans to rent some road rollers to compact all ground that “could possibly have non-left/right-direction ruts” before these wishers arrive. The ground that “could possibly have non-left/right-direction ruts” should be a set of line segments, each contained in the route of some optimal strategy. Each road roller operates under the following three conditions:\n\n1. It starts from the origin or any tree.\n2. It can only move in one of the three directions: up, up-left $45\\degree$, or up-right $45\\degree$, and it may only change direction or stop at trees.\n3. It can only pass through ground that “could possibly have non-left/right-direction ruts”; however, the same ground may be traversed by multiple road rollers.\n\nNow Mr. P and Mr. S each pose a question to you:\n\n1. Please provide Mr. P with any one optimal route.\n2. Please tell Mr. S the minimum number of road rollers needed.", "inputFormat": "The first line contains one positive integer $n$, the number of wishing trees.\n\nThe next $n$ lines, the $(i+1)$-th line contains $2$ integers $x_i, y_i$ separated by a single space, representing the coordinates of the $i$-th wishing tree.", "outputFormat": "Output $3$ lines.\n\nThe first line outputs one integer $m$, the maximum number of trees under which Mr. P can make wishes.\n\nThe second line outputs $m$ integers separated by single spaces, indicating the indices of the trees where Mr. P should make wishes in order.\n\nThe third line outputs one integer, the minimum number of road rollers that Mr. S needs to rent.", "hint": "#### Explanation for Sample 1\n\nThere are $2$ optimal routes, allowing $3$ wishes: $(0,0) \\rightarrow (1,1) \\rightarrow (-1,1) \\rightarrow (-2,2)$ or $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$.\n\nAt least $3$ road rollers are needed, with routes $(0,0) \\rightarrow (1,1)$, $(-1,1) \\rightarrow (-2,2)$, and $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$.\n\n#### Explanation for Sample 2\n\nThe optimal route is unique: $(0,0) \\rightarrow (0,1) \\rightarrow (-2,1) \\rightarrow (2,1) \\rightarrow (3,2)$, allowing $4$ wishes. After making a wish at $(0,1)$, starting from $(-2,1)$ and heading right, the nearest unvisited tree reachable is $(2,1)$, so one can reach $(2,1)$.\n\nIf instead one proceeds as $(0,0) \\rightarrow (0,1) \\rightarrow (2,1) \\rightarrow (-2,1)$, then at this point all trees to the right of $(-2,1)$ have already been visited. According to the rules, one must stop. Hence the optimal solution cannot be achieved.\n\n$(0,0) \\rightarrow (0,1)$ and $(2,1) \\rightarrow (3,2)$ would leave non-left/right-direction ruts, so $2$ road rollers are needed.\n\n![](https://cdn.luogu.com.cn/upload/pic/1509.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2015] 小园丁与老司机", "background": "", "description": "小园丁 Mr. S 负责看管一片田野，田野可以看作一个二维平面。田野上有 $n$ 棵 许愿树，编号 $1,2,3,\\dots,n$ ，每棵树可以看作平面上的一个点，其中第 $i$ 棵树 $(1 \\leq i \\leq n)$ 位于坐标 $(x_i, y_i)$ 。任意两棵树的坐标均不相同。\n\n老司机 Mr. P 从原点 $(0,0)$ 驾车出发，进行若干轮行动。每一轮，Mr. P 首先选择任意一个满足以下条件的方向：\n\n1.为左、右、上、左上 $45\\degree$、右上 $45\\degree$ 五个方向之一。\n\n2.沿此方向前进可以到达一棵他尚未许愿过的树。\n\n完成选择后，Mr.P 沿该方向直线前进，必须到达该方向上距离最近的尚未许愿的树，在树下许愿并继续下一轮行动。如果没有满足条件的方向可供选择，则停止行动。他会采取最优策略，在尽可能多的树下许愿。若最优策略不唯一，可以选择任意一种。\n\n不幸的是，小园丁 Mr.S 发现由于田野土质松软，老司机 Mr.P 的小汽车在每轮行进过程中，都会在田野上留下一条车辙印，一条车辙印可看作以两棵树（或原点和一棵树）为端点的一条线段。\n\n在 Mr.P 之后，还有很多许愿者计划驾车来田野许愿，这些许愿者都会像 Mr.P 一样任选一种最优策略行动。Mr.S 认为非左右方向（即上、左上  $45\\degree$、右 上 $45\\degree$ 三个方向）的车辙印很不美观，为了维护田野的形象，他打算租用一些轧路机，在这群许愿者到来之前夯实所有“可能留下非左右方向车辙印”的地面。“可能留下非左右方向车辙印”的地面应当是田野上的若干条线段，其中每条线段都包含在某一种最优策略的行进路线中。每台轧路机都采取满足以下三个条件的工作模式：\n\n1.从原点或任意一棵树出发。\n\n2.只能向上、左上 $45\\degree$、右上 $45\\degree$ 三个方向之一移动，并且只能在树下改变方向或停止。\n\n3.只能经过“可能留下非左右方向车辙印”的地面，但是同一块地面可以 被多台轧路机经过。\n\n现在 Mr. P 和 Mr. S 分别向你提出了一个问题：\n\n1.请给 Mr.P 指出任意一条最优路线。\n\n2.请告诉 Mr.S 最少需要租用多少台轧路机。", "inputFormat": "第 $1$ 行包含 $1$ 个正整数 $n$，表示许愿树的数量。\n\n接下来 $n$ 行，第 $i+1$ 行包含 $2$ 个整数 $x_i,y_i$，中间用单个空格隔开，表示第 $i$ 棵许愿树的坐标。", "outputFormat": "包括 $3$ 行。\n\n第 $1$ 行输出 $1$ 个整数 $m$，表示 Mr. P 最多能在多少棵树下许愿。\n\n输出文件的第 $2$ 行输出 $m$ 个整数，相邻整数之间用单个空格隔开，表示 Mr.P 应该依次在哪些树下许愿。\n\n输出文件的第 $3$ 行输出 $1$ 个整数，表示 Mr. S 最少需要租用多少台轧路机。\n", "hint": "#### 样例 1 解释\n\n最优路线共 $2$ 条，可许愿 $3$ 次：$(0,0) \\rightarrow (1,1) \\rightarrow (-1,1) \\rightarrow (-2,2)$ 或 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n至少 $3$ 台轧路机，路线是 $(0,0) \\rightarrow (1,1)$，$(-1,1) \\rightarrow (-2,2)$ 和 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n#### 样例 2 解释\n\n最优路线唯一：$(0,0) \\rightarrow (0,1) \\rightarrow (-2,1) \\rightarrow (2,1) \\rightarrow (3,2)$，可许愿 $4$ 次。其中在 $(0,1)$ 许愿后，从 $(-2,1)$ 出发沿着向右的方向能够到达的最近的未许愿过的树是 $(2,1)$，所以可以到达 $(2,1)$。\n\n而如果沿着 $(0,0) \\rightarrow (0,1) \\rightarrow (2,1) \\rightarrow (-2,1)$ 的方向前进，此时 $(-2,1)$ 右边所有树都是许愿过的，根据题目条件规定，停止前进。故无法获得最优解。\n\n$(0,0) \\rightarrow (0,1)$ 与 $(2,1) \\rightarrow (3,2)$ 会留下非左右方向车辙印，需 $2$ 台轧路机。\n\n![](https://cdn.luogu.com.cn/upload/pic/1509.png)", "locale": "zh-CN"}}}
{"pid": "P2305", "type": "P", "difficulty": 7, "samples": [["7 3 \n1 2 20 0 3 \n1 5 10 100 5 \n2 4 10 10 10 \n2 9 1 100 10 \n3 5 20 100 10 \n4 4 20 0 10 \n", "40 \n150 \n70 \n149 \n300 \n150"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2014", "线段树", "NOI", "分治", "斜率优化"], "title": "[NOI2014] 购票", "background": null, "description": "今年夏天，NOI 在 SZ 市迎来了她三十周岁的生日。来自全国 $n$ 个城市的 OIer 们都会从各地出发，到 SZ 市参加这次盛会。\n\n全国的城市构成了一棵以 SZ 市为根的有根树，每个城市与它的父亲用道路连接。为了方便起见，我们将全国的 $n$ 个城市用 $1\\sim n$ 的整数编号。其中 SZ 市的编号为 $1$。对于除 SZ 市之外的任意一个城市 $v$，我们给出了它在这棵树上的父亲城市 $f_v$  以及到父亲城市道路的长度 $s_v$。\n\n从城市 $v$ 前往 SZ 市的方法为：选择城市 $v$ 的一个祖先 $a$，支付购票的费用，乘坐交通工具到达 $a$。再选择城市 $a$ 的一个祖先 $b$，支付费用并到达 $b$。以此类推，直至到达 SZ 市。\n\n对于任意一个城市 $v$，我们会给出一个交通工具的距离限制 $l_v$。对于城市 $v$ 的祖先 A，只有当它们之间所有道路的总长度不超过 $l_v$  时，从城市 $v$ 才可以通过一次购票到达城市 A，否则不能通过一次购票到达。  \n\n对于每个城市 $v$，我们还会给出两个非负整数 $p_v,q_v$  作为票价参数。若城市 $v$ 到城市 A 所有道路的总长度为 $d$，那么从城市 $v$ 到城市 A 购买的票价为 $dp_v+q_v$。\n\n每个城市的 OIer 都希望自己到达 SZ 市时，用于购票的总资金最少。你的任务就是，告诉每个城市的 OIer 他们所花的最少资金是多少。", "inputFormat": "第一行包含两个非负整数 $n,t$，分别表示城市的个数和数据类型（其意义将在「提示与说明」中提到）。\n\n接下来 $2 \\sim n$ 行，每行描述一个除 SZ 之外的城市。其中第 $v$ 行包含五个非负整数 $f_v,s_v,p_v,q_v,l_v$，分别表示城市 $v$ 的父亲城市，它到父亲城市道路的长度，票价的两个参数和距离限制。\n\n请注意：输入不包含编号为 1 的 SZ 市，第 $2\\sim n$ 行分别描述的是城市 $2$ 到城市 $n$。", "outputFormat": "输出包含 $n-1$ 行，每行包含一个整数。\n\n其中第 $v$ 行表示从城市 $v+1$ 出发，到达 SZ 市最少的购票费用。\n\n同样请注意：输出不包含编号为 1 的 SZ 市。", "hint": "从每个城市出发到达 SZ 的路线如下（其中箭头表示一次直达）：\n\n城市 $2$：只能选择 $2 \\rightarrow 1$，花费为 $2 \\times 20 + 0 = 40$。\n\n城市 $3$：只能选择 $3 \\rightarrow 1$，花费为 $5 \\times 10 + 100 = 150$。\n\n城 市 $4$ ： 由于 $4 + 2 =6 \\leq l_4 = 10$，故可以选择 $4\\rightarrow1$。若选择 $4 \\rightarrow 1$，花费为 $(4 +2) \\times 10 + 10 = 70$ ； 若选择 $4 \\rightarrow 2 \\rightarrow 1$，则花费为 $(4\\times 10 + 10) + (2 \\times  20 + 0) =90$；因此选择 $4 \\rightarrow 1$。\n\n城市 $5$：只能选择 $5\\rightarrow 2\\rightarrow 1$，花费为 $(9 \\times 1 +100) + (2 \\times  20 + 0) = 149$；无法选择 $5 \\rightarrow 1$，因为 $l_5 =10$，而城市 $5$ 到城市 $1$ 总路程为 $9 + 2 = 11 \\gt 5$，城市 $5$ 不能直达城市 $1$。\n\n城市 $6$：若选择 $6 \\rightarrow 1$，花费为 $(5 + 5) \\times 20 + 100 = 300$；若选择 $6 \\rightarrow 3 \\rightarrow 1$，花费为 $(5 \\times 20 + 100) + (5 \\times 10 + 100) = 350$；因此选择 $6 \\rightarrow 1$。\n\n城市 $7$：选择 $7 \\rightarrow 4 \\rightarrow 1$，花费为 $(4 \\times 20 + 0) + ((4 + 2) \\times 10 + 10) = 150$；\n\n其他方案均比该方案差。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2592.png) \n\n### 数据范围\n\n![](https://cdn.luogu.com.cn/upload/pic/2591.png)\n\n对于所有数据，$n\\leq 2 \\times 10^5, 0 \\leq p_v \\leq 10^6,\\ 0 \\leq q_v \\leq 10^{12},\\ 1\\leq f_v<v,\\ 0<s_v\\leq l_v \\leq 2 \\times 10^{11}$，且任意城市到 SZ 市的总路程长度不超过 $2 \\times 10^{11}$。\n\n输入的 $t$ 表示数据类型，$0\\leq t<4$，其中：\n- 当 $t=0$ 或 $2$ 时，对输入的所有城市 $v$，都有 $f_v=v-1$，即所有城市构成一个以 SZ 市为终点的链；\n- 当 $t=0$ 或 $1$ 时，对输入的所有城市 $v$，都有 $l_v=2 \\times 10^{11}$，即没有移动的距离限制，每个城市都能到达它的所有祖先；\n- 当 $t=3$ 时，数据没有特殊性质。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Buying Tickets", "background": "", "description": "This summer, NOI celebrated its 30th anniversary in SZ City. OIers from $n$ cities across the country will depart from their homes to attend the event in SZ City.\n\nAll cities form a rooted tree with SZ City as the root, and each city is connected to its parent by a road. For convenience, we number the $n$ cities with integers from $1$ to $n$, where the number of SZ City is $1$. For any city $v$ other than SZ City, we are given its parent city $f_v$ in this tree and the length $s_v$ of the road to its parent.\n\nTo travel from city $v$ to SZ City, the method is as follows: choose an ancestor $a$ of city $v$, pay for a ticket, and take a vehicle to $a$. Then choose an ancestor $b$ of city $a$, pay, and reach $b$. Repeat this process until you arrive at SZ City.\n\nFor any city $v$, we are given a distance limit $l_v$ for its transportation. For an ancestor $A$ of city $v$, city $v$ can reach $A$ with a single ticket if and only if the total length of all roads along the path between them does not exceed $l_v$; otherwise, it cannot reach $A$ with a single ticket.\n\nFor each city $v$, we are also given two non-negative integers $p_v, q_v$ as fare parameters. If the total length of all roads from city $v$ to city $A$ is $d$, then the price of the ticket from city $v$ to city $A$ is $d p_v + q_v$.\n\nOIers in each city want to minimize the total amount of money spent on tickets when traveling to SZ City. Your task is to tell the OIers in each city their minimum total cost.", "inputFormat": "The first line contains two non-negative integers $n, t$, denoting the number of cities and the testdata type (its meaning is mentioned in “Hint”).\n\nThe next lines $2 \\sim n$ each describe a city other than SZ City. Specifically, line $v$ contains five non-negative integers $f_v, s_v, p_v, q_v, l_v$, denoting the parent city of city $v$, the length of the road to its parent, the two fare parameters, and the distance limit, respectively.\n\nNote: The input does not include SZ City with number $1$. Lines $2 \\sim n$ describe cities $2$ to $n$.", "outputFormat": "The output contains $n - 1$ lines, each with an integer.\n\nThe $v$-th line gives the minimum total ticket cost to reach SZ City starting from city $v + 1$.\n\nLikewise, note that SZ City with number $1$ is not included in the output.", "hint": "The routes from each city to SZ City are as follows (an arrow denotes a single direct trip):\n\nCity $2$: Can only choose $2 \\rightarrow 1$, with cost $2 \\times 20 + 0 = 40$.\n\nCity $3$: Can only choose $3 \\rightarrow 1$, with cost $5 \\times 10 + 100 = 150$.\n\nCity $4$: Since $4 + 2 = 6 \\leq l_4 = 10$, it can choose $4 \\rightarrow 1$. If choosing $4 \\rightarrow 1$, the cost is $(4 + 2) \\times 10 + 10 = 70$; if choosing $4 \\rightarrow 2 \\rightarrow 1$, the cost is $(4 \\times 10 + 10) + (2 \\times 20 + 0) = 90$. Therefore, choose $4 \\rightarrow 1$.\n\nCity $5$: Can only choose $5 \\rightarrow 2 \\rightarrow 1$, with cost $(9 \\times 1 + 100) + (2 \\times 20 + 0) = 149$. It cannot choose $5 \\rightarrow 1$ because $l_5 = 10$, while the total distance from city $5$ to city $1$ is $9 + 2 = 11 \\gt 10$, so city $5$ cannot reach city $1$ directly.\n\nCity $6$: If choosing $6 \\rightarrow 1$, the cost is $(5 + 5) \\times 20 + 100 = 300$; if choosing $6 \\rightarrow 3 \\rightarrow 1$, the cost is $(5 \\times 20 + 100) + (5 \\times 10 + 100) = 350$. Therefore, choose $6 \\rightarrow 1$.\n\nCity $7$: Choose $7 \\rightarrow 4 \\rightarrow 1$, with cost $(4 \\times 20 + 0) + ((4 + 2) \\times 10 + 10) = 150$.\n\nAll other options are worse than this plan.\n\n![](https://cdn.luogu.com.cn/upload/pic/2592.png)\n\nConstraints\n\n![](https://cdn.luogu.com.cn/upload/pic/2591.png)\n\nFor all testdata, $n \\leq 2 \\times 10^5$, $0 \\leq p_v \\leq 10^6$, $0 \\leq q_v \\leq 10^{12}$, $1 \\leq f_v < v$, $0 < s_v \\leq l_v \\leq 2 \\times 10^{11}$, and the total path length from any city to SZ City does not exceed $2 \\times 10^{11}$.\n\nThe input $t$ denotes the testdata type, $0 \\leq t < 4$, where:\n- When $t = 0$ or $2$, for all cities $v$ in the input, $f_v = v - 1$, i.e., all cities form a chain ending at SZ City.\n- When $t = 0$ or $1$, for all cities $v$ in the input, $l_v = 2 \\times 10^{11}$, i.e., there is no distance limit, and every city can reach all of its ancestors.\n- When $t = 3$, the testdata has no special property.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 购票", "background": null, "description": "今年夏天，NOI 在 SZ 市迎来了她三十周岁的生日。来自全国 $n$ 个城市的 OIer 们都会从各地出发，到 SZ 市参加这次盛会。\n\n全国的城市构成了一棵以 SZ 市为根的有根树，每个城市与它的父亲用道路连接。为了方便起见，我们将全国的 $n$ 个城市用 $1\\sim n$ 的整数编号。其中 SZ 市的编号为 $1$。对于除 SZ 市之外的任意一个城市 $v$，我们给出了它在这棵树上的父亲城市 $f_v$  以及到父亲城市道路的长度 $s_v$。\n\n从城市 $v$ 前往 SZ 市的方法为：选择城市 $v$ 的一个祖先 $a$，支付购票的费用，乘坐交通工具到达 $a$。再选择城市 $a$ 的一个祖先 $b$，支付费用并到达 $b$。以此类推，直至到达 SZ 市。\n\n对于任意一个城市 $v$，我们会给出一个交通工具的距离限制 $l_v$。对于城市 $v$ 的祖先 A，只有当它们之间所有道路的总长度不超过 $l_v$  时，从城市 $v$ 才可以通过一次购票到达城市 A，否则不能通过一次购票到达。  \n\n对于每个城市 $v$，我们还会给出两个非负整数 $p_v,q_v$  作为票价参数。若城市 $v$ 到城市 A 所有道路的总长度为 $d$，那么从城市 $v$ 到城市 A 购买的票价为 $dp_v+q_v$。\n\n每个城市的 OIer 都希望自己到达 SZ 市时，用于购票的总资金最少。你的任务就是，告诉每个城市的 OIer 他们所花的最少资金是多少。", "inputFormat": "第一行包含两个非负整数 $n,t$，分别表示城市的个数和数据类型（其意义将在「提示与说明」中提到）。\n\n接下来 $2 \\sim n$ 行，每行描述一个除 SZ 之外的城市。其中第 $v$ 行包含五个非负整数 $f_v,s_v,p_v,q_v,l_v$，分别表示城市 $v$ 的父亲城市，它到父亲城市道路的长度，票价的两个参数和距离限制。\n\n请注意：输入不包含编号为 1 的 SZ 市，第 $2\\sim n$ 行分别描述的是城市 $2$ 到城市 $n$。", "outputFormat": "输出包含 $n-1$ 行，每行包含一个整数。\n\n其中第 $v$ 行表示从城市 $v+1$ 出发，到达 SZ 市最少的购票费用。\n\n同样请注意：输出不包含编号为 1 的 SZ 市。", "hint": "从每个城市出发到达 SZ 的路线如下（其中箭头表示一次直达）：\n\n城市 $2$：只能选择 $2 \\rightarrow 1$，花费为 $2 \\times 20 + 0 = 40$。\n\n城市 $3$：只能选择 $3 \\rightarrow 1$，花费为 $5 \\times 10 + 100 = 150$。\n\n城 市 $4$ ： 由于 $4 + 2 =6 \\leq l_4 = 10$，故可以选择 $4\\rightarrow1$。若选择 $4 \\rightarrow 1$，花费为 $(4 +2) \\times 10 + 10 = 70$ ； 若选择 $4 \\rightarrow 2 \\rightarrow 1$，则花费为 $(4\\times 10 + 10) + (2 \\times  20 + 0) =90$；因此选择 $4 \\rightarrow 1$。\n\n城市 $5$：只能选择 $5\\rightarrow 2\\rightarrow 1$，花费为 $(9 \\times 1 +100) + (2 \\times  20 + 0) = 149$；无法选择 $5 \\rightarrow 1$，因为 $l_5 =10$，而城市 $5$ 到城市 $1$ 总路程为 $9 + 2 = 11 \\gt 5$，城市 $5$ 不能直达城市 $1$。\n\n城市 $6$：若选择 $6 \\rightarrow 1$，花费为 $(5 + 5) \\times 20 + 100 = 300$；若选择 $6 \\rightarrow 3 \\rightarrow 1$，花费为 $(5 \\times 20 + 100) + (5 \\times 10 + 100) = 350$；因此选择 $6 \\rightarrow 1$。\n\n城市 $7$：选择 $7 \\rightarrow 4 \\rightarrow 1$，花费为 $(4 \\times 20 + 0) + ((4 + 2) \\times 10 + 10) = 150$；\n\n其他方案均比该方案差。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2592.png) \n\n### 数据范围\n\n![](https://cdn.luogu.com.cn/upload/pic/2591.png)\n\n对于所有数据，$n\\leq 2 \\times 10^5, 0 \\leq p_v \\leq 10^6,\\ 0 \\leq q_v \\leq 10^{12},\\ 1\\leq f_v<v,\\ 0<s_v\\leq l_v \\leq 2 \\times 10^{11}$，且任意城市到 SZ 市的总路程长度不超过 $2 \\times 10^{11}$。\n\n输入的 $t$ 表示数据类型，$0\\leq t<4$，其中：\n- 当 $t=0$ 或 $2$ 时，对输入的所有城市 $v$，都有 $f_v=v-1$，即所有城市构成一个以 SZ 市为终点的链；\n- 当 $t=0$ 或 $1$ 时，对输入的所有城市 $v$，都有 $l_v=2 \\times 10^{11}$，即没有移动的距离限制，每个城市都能到达它的所有祖先；\n- 当 $t=3$ 时，数据没有特殊性质。", "locale": "zh-CN"}}}
{"pid": "P2306", "type": "P", "difficulty": 4, "samples": [["3 100 100\n7 10\n6 1\n1 2\n", "no\n13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "被 yyh 虐的 mzc", "background": "mzc 与 djn 第三弹。\n", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前两弹的都知道）。但这些都不足以挽救他被 yyh 虐的命运。于是他向你们发起了求救。\n\nmzc 要派出男家丁与 yyh 大战，但他只能承载质量为 $m$ 的男家丁，现在他想知道她们（你没有看错）的战斗力之和是否打得过 yyh。", "inputFormat": "第一行有三个数 $n,m,k$，$n$ 表示有 $n$ 个男家丁，$m$ 表示能承载 $m$ 表的质量，$k$ 表表示 yyh 表的战斗力。\n\n之后 $n$ 行，每行两个数 $a_i,b_i$，分别表示第 $i$ 个男家丁的质量和战斗力。", "outputFormat": "两行，若打得过（大于或等于），输出 `yes`；\n\n若打不过，输出 `no`。\n\n第二行输出最高战斗力。", "hint": "对于 $20\\%$ 的数据，$n \\le 1000$。\n\n对于 $100\\%$ 的数据，$n,m \\le 10^5$，$0\\le a_i,b_i \\le 10$。\n\n由于 mzc 大大十分着急，所以他只能等待一秒。", "locale": "zh-CN", "translations": {"en": {"title": "mzc bullied by yyh", "background": "The third installment of mzc and djn.", "description": "mzc is very rich (just kidding). He has $n$ male servants (those who did the previous two installments know this). But none of this can save him from being bullied by yyh, so he is asking you for help.\n\nmzc wants to send male servants to fight yyh, but the total mass he can carry is at most $m$. He wants to know whether their (yes, you read that right) total combat power can defeat yyh. Specifically, select a subset of the $n$ servants so that the total mass does not exceed $m$ and the total combat power is maximized, then determine whether this maximum is at least $k$.", "inputFormat": "The first line contains three integers $n, m, k$, where $n$ is the number of male servants, $m$ is the maximum total mass he can carry, and $k$ is yyh’s combat power.\n\nThen follow $n$ lines. Each line contains two integers $a_i, b_i$, denoting the mass and combat power of the $i$-th male servant.", "outputFormat": "Output two lines. If the maximum total combat power is greater than or equal to $k$, output `yes`; otherwise, output `no`.\n\nOn the second line, output the maximum total combat power.", "hint": "- For $20\\%$ of the testdata, $n \\le 1000$.\n- For $100\\%$ of the testdata, $n, m \\le 10^5$, $0 \\le a_i, b_i \\le 10$.\n- Time limit: 1 second.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "被 yyh 虐的 mzc", "background": "mzc 与 djn 第三弹。\n", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前两弹的都知道）。但这些都不足以挽救他被 yyh 虐的命运。于是他向你们发起了求救。\n\nmzc 要派出男家丁与 yyh 大战，但他只能承载质量为 $m$ 的男家丁，现在他想知道她们（你没有看错）的战斗力之和是否打得过 yyh。", "inputFormat": "第一行有三个数 $n,m,k$，$n$ 表示有 $n$ 个男家丁，$m$ 表示能承载 $m$ 表的质量，$k$ 表表示 yyh 表的战斗力。\n\n之后 $n$ 行，每行两个数 $a_i,b_i$，分别表示第 $i$ 个男家丁的质量和战斗力。", "outputFormat": "两行，若打得过（大于或等于），输出 `yes`；\n\n若打不过，输出 `no`。\n\n第二行输出最高战斗力。", "hint": "对于 $20\\%$ 的数据，$n \\le 1000$。\n\n对于 $100\\%$ 的数据，$n,m \\le 10^5$，$0\\le a_i,b_i \\le 10$。\n\n由于 mzc 大大十分着急，所以他只能等待一秒。", "locale": "zh-CN"}}}
{"pid": "P2307", "type": "P", "difficulty": 4, "samples": [["6 8  5 3  5 2  6 4\n5 6  0 0\n\n8 1  7 3  6 2  8 9  7 5\n7 4  7 8  7 6  0 0\n\n3 8  6 8  6 4\n5 3  5 6  5 2  0 0\n\n-1 -1\n", "1\n1\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "迷宫", "background": "无", "description": "小希非常喜欢玩迷宫游戏，现在她自己设计了一个迷宫游戏。在她设计的迷宫中，首先她认为所有的通道都应该是双向连通的，就是说如果有一个通道连通了房间 A 和 B，那么既可以通过它从房间 A 走到房间 B，也可以通过它从房间 B 走到房间 A，为了提高难度，小希希望任意两个房间有且仅有一条路径可以相通（除非走了回头路）。小希现在把她的设计图给你，让你帮忙判断她的设计图是否符合她的设计思路。比如下面的例子，前两个是符合条件的，但是最后一个却有两种方法从 $5$ 到达 $8$。\n", "inputFormat": "输入包含多组数据，每组数据是一个以 `0 0` 结尾的整数对列表，表示了一条通道连接的两个房间的编号。房间的编号至少为 $1$，且不超过 $100000$。每两组数据之间有一个空行。\n\n整个文件以两个 `-1` 结尾。\n", "outputFormat": "对于输入的每一组数据，输出仅包括一行。如果该迷宫符合小希的思路，那么输出 `1`，否则输出 `0`。", "hint": "无", "locale": "zh-CN", "translations": {"en": {"title": "Maze", "background": "None.", "description": "Xiaoxi loves playing maze games, and now she has designed one herself. In her design, all corridors are bidirectionally connected: if a corridor connects rooms A and B, you can go from room A to room B through it, and also from room B to room A. To increase the difficulty, Xiaoxi wants there to be exactly one path between any two rooms (unless you retrace your steps). She gives you her blueprint and asks you to determine whether it matches her idea. For example, if there are two different ways to go from $5$ to $8$, then it does not satisfy the requirement.", "inputFormat": "The input contains multiple test cases. Each test case is a list of integer pairs ending with `0 0`, where each pair indicates a corridor connecting two rooms. Room IDs are at least $1$ and at most $100000$. There is one blank line between any two test cases.\n\nThe entire input ends with `-1 -1`.", "outputFormat": "For each test case, output exactly one line. If the maze conforms to Xiaoxi’s idea, output `1`; otherwise, output `0`.", "hint": "None.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "迷宫", "background": "无", "description": "小希非常喜欢玩迷宫游戏，现在她自己设计了一个迷宫游戏。在她设计的迷宫中，首先她认为所有的通道都应该是双向连通的，就是说如果有一个通道连通了房间 A 和 B，那么既可以通过它从房间 A 走到房间 B，也可以通过它从房间 B 走到房间 A，为了提高难度，小希希望任意两个房间有且仅有一条路径可以相通（除非走了回头路）。小希现在把她的设计图给你，让你帮忙判断她的设计图是否符合她的设计思路。比如下面的例子，前两个是符合条件的，但是最后一个却有两种方法从 $5$ 到达 $8$。\n", "inputFormat": "输入包含多组数据，每组数据是一个以 `0 0` 结尾的整数对列表，表示了一条通道连接的两个房间的编号。房间的编号至少为 $1$，且不超过 $100000$。每两组数据之间有一个空行。\n\n整个文件以两个 `-1` 结尾。\n", "outputFormat": "对于输入的每一组数据，输出仅包括一行。如果该迷宫符合小希的思路，那么输出 `1`，否则输出 `0`。", "hint": "无", "locale": "zh-CN"}}}
{"pid": "P2308", "type": "P", "difficulty": 4, "samples": [["4\n4 1 2 3", "(4+((1+2)+3))\n19\n3 6 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "Special Judge", "区间 DP"], "title": "添加括号", "background": "给定一个正整数序列 $a_1,a_2,\\cdots,a_n$。\n\n不改变序列中每个元素在序列中的位置，把它们相加，并用括号记每次加法所得的和，称为中间和。\n\n例如:\n\n给出序列是 $4,1,2,3$。\n\n第一种添括号方法:\n\n$$\n((4+1)+(2+3))=((5)+(5))=(10)\n$$\n\n有三个中间和是 $5,5,10$ 它们之和为: $5+5+10=20$\n\n第二种添括号方法\n\n$$\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n$$\n\n中间和是 $3,6,10$，它们之和为 $19$。", "description": "现在要添上 $n-1$ 对括号，加法运算依括号顺序进行，得到 $n-1$ 个中间和，求出使中间和之和最小的添括号方法。", "inputFormat": "共两行。\n\n第一行，为整数 $n$ 。\n\n第二行，为 $a_1,a_2,\\cdots,a_n$ 这 $n$ 个正整数，每个数字不超过 $100$。", "outputFormat": "输出 3 行。\n\n第一行，为添加括号的方法。\n\n第二行，为最终的中间和之和。\n\n第三行，为 $n-1$ 个中间和，按照从左到右的顺序输出。对于相互包含的括号对应的中间和，按照从里到外的顺序输出。", "hint": "**【样例解释 $1$】**\n\n参见题目背景。\n\n**【数据范围】**\n\n对于全部的数据，$1\\le n\\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Add Parentheses", "background": "Given a sequence of positive integers $a_1, a_2, \\cdots, a_n$.\n\nWithout changing the position of each element in the sequence, add them together by inserting parentheses. Record the sum obtained at each addition step with parentheses; we call it an intermediate sum.\n\nFor example:\n\nGiven the sequence $4, 1, 2, 3$.\n\nFirst way to add parentheses:\n\n$$\n((4+1)+(2+3))=((5)+(5))=(10)\n$$\n\nThere are three intermediate sums $5, 5, 10$, and their total is: $5+5+10=20$.\n\nSecond way to add parentheses:\n\n$$\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n$$\n\nThe intermediate sums are $3, 6, 10$, and their total is $19$.", "description": "Now we add $n-1$ pairs of parentheses. The additions are performed according to the parentheses order, producing $n-1$ intermediate sums. Find the way to add parentheses that minimizes the total of the intermediate sums.", "inputFormat": "Two lines.\n\nThe first line contains an integer $n$.\n\nThe second line contains $n$ positive integers $a_1, a_2, \\cdots, a_n$, each not exceeding $100$.", "outputFormat": "Output 3 lines.\n\nThe first line is the parenthesization.\n\nThe second line is the final total of the intermediate sums.\n\nThe third line contains the $n-1$ intermediate sums, output from inner to outer and from left to right.", "hint": "**Sample Explanation $1$**\n\nSee the Background.\n\n**Constraints**\n\nFor all testdata, $1 \\le n \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "添加括号", "background": "给定一个正整数序列 $a_1,a_2,\\cdots,a_n$。\n\n不改变序列中每个元素在序列中的位置，把它们相加，并用括号记每次加法所得的和，称为中间和。\n\n例如:\n\n给出序列是 $4,1,2,3$。\n\n第一种添括号方法:\n\n$$\n((4+1)+(2+3))=((5)+(5))=(10)\n$$\n\n有三个中间和是 $5,5,10$ 它们之和为: $5+5+10=20$\n\n第二种添括号方法\n\n$$\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n$$\n\n中间和是 $3,6,10$，它们之和为 $19$。", "description": "现在要添上 $n-1$ 对括号，加法运算依括号顺序进行，得到 $n-1$ 个中间和，求出使中间和之和最小的添括号方法。", "inputFormat": "共两行。\n\n第一行，为整数 $n$ 。\n\n第二行，为 $a_1,a_2,\\cdots,a_n$ 这 $n$ 个正整数，每个数字不超过 $100$。", "outputFormat": "输出 3 行。\n\n第一行，为添加括号的方法。\n\n第二行，为最终的中间和之和。\n\n第三行，为 $n-1$ 个中间和，按照从左到右的顺序输出。对于相互包含的括号对应的中间和，按照从里到外的顺序输出。", "hint": "**【样例解释 $1$】**\n\n参见题目背景。\n\n**【数据范围】**\n\n对于全部的数据，$1\\le n\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P2309", "type": "P", "difficulty": 3, "samples": [["3\n8 -9 2\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "loidc，卖卖萌", "background": "loidc 萌萌哒。\n\n他最近一直在靠卖萌追求他的真爱——vivym，经过几轮攻势后 vivym 酱眼看就要被他所攻略。擅长数据结构的 vivym 决定利用强大的数据结构之力帮助自己逃脱。", "description": "vivym 给了 loidc 一串阿拉伯数字。他将一个数串的每个数字之和定义为该数串的数串和，vivym 要求 loidc 求出数串中有多少个子串的数串和为正数。他想了半天总是解决不好，于是他便将这一棘手的问题交给了编程能力极强的你，他希望你能在 1 s 内解决。不然 vivym 就要闪现过墙幽灵疾步跑掉了。", "inputFormat": "第一行一个数 $n$，表示数串的长度。\n\n第二行一共 $n$ 个数，它就是那串阿拉伯数字。", "outputFormat": "一个数，表示数串中有多少个子串的数串和为正数。", "hint": "- 对于 $30\\%$ 的数据：$n\\leq 10^3$；\n- 对于 $100\\%$ 的数据：$1 \\leq n\\leq 10^5$。\n\n题目读入的其他变量均介于 $-100\\ldots 100$ 之间。", "locale": "zh-CN", "translations": {"en": {"title": "loidc, acting cute", "background": "loidc is super cute.\n\nHe has been trying to win over his true love — vivym — by acting cute. After several rounds of advances, vivym-chan is about to be won over. Skilled at data structures, vivym decides to use the power of data structures to help escape.", "description": "vivym gave loidc a sequence of integers. He defines the sum of a number sequence as the sum of its elements. vivym asks loidc to find how many contiguous subarrays in the sequence have a positive sum. He thought about it for a long time but could not solve it, so he handed this tricky problem to you, who are very good at programming. He hopes you can solve it within 1 s. Otherwise, vivym will “flash over a wall and ghost-step away.”", "inputFormat": "The first line contains an integer $n$, the length of the sequence.\n\nThe second line contains $n$ integers — the sequence.", "outputFormat": "Output a single integer: the number of contiguous subarrays whose sum is positive.", "hint": "- For $30\\%$ of the testdata: $n\\leq 10^3$.\n- For $100\\%$ of the testdata: $1 \\leq n\\leq 10^5$.\n\nEach element of the sequence lies between $-100\\ldots 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，卖卖萌", "background": "loidc 萌萌哒。\n\n他最近一直在靠卖萌追求他的真爱——vivym，经过几轮攻势后 vivym 酱眼看就要被他所攻略。擅长数据结构的 vivym 决定利用强大的数据结构之力帮助自己逃脱。", "description": "vivym 给了 loidc 一串阿拉伯数字。他将一个数串的每个数字之和定义为该数串的数串和，vivym 要求 loidc 求出数串中有多少个子串的数串和为正数。他想了半天总是解决不好，于是他便将这一棘手的问题交给了编程能力极强的你，他希望你能在 1 s 内解决。不然 vivym 就要闪现过墙幽灵疾步跑掉了。", "inputFormat": "第一行一个数 $n$，表示数串的长度。\n\n第二行一共 $n$ 个数，它就是那串阿拉伯数字。", "outputFormat": "一个数，表示数串中有多少个子串的数串和为正数。", "hint": "- 对于 $30\\%$ 的数据：$n\\leq 10^3$；\n- 对于 $100\\%$ 的数据：$1 \\leq n\\leq 10^5$。\n\n题目读入的其他变量均介于 $-100\\ldots 100$ 之间。", "locale": "zh-CN"}}}
{"pid": "P2310", "type": "P", "difficulty": 3, "samples": [["5\n1 2 3 4 5\n3\n2 4 2\n1 5 1\n3 3 1\n", "3\n1\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "loidc，看看海", "background": "loidc 喜欢大海。在他放假的时候他经常一个人跑到海边独自玩耍。\n\n在浪花的冲击下，他可以忘记打代码的烦躁，真是惬意极了。\n\n虽然今天是周六，但今天可是 $2014$ 年 $11$ 月 $8$ 日，NOIP 2014 复赛 Day 1。在早晨放松之余他可不能忘掉 OI 知识。", "description": "loidc 准备带着 LOI 的队员们考完试后到海边玩耍。所以他想写一个程序让队员们了解在一段时间内海浪的情况。\n\n他的命令是这样输入的：\n\n$$\\texttt{x y k}$$\n\n这是要询问在时间 $[x,y]$ 内海浪高度第 $k$ 小的单位时刻是那个时刻。\n\n但是在他刚准备打开 Dev-pas++ 的时候，loidc 发现他的电脑坏掉了。于是一向喜欢偷懒的他就向你求助。他希望你能在 $1$ 秒内完成程序的运行。\n\n当然 loidc 会提前告诉你所有时段海浪的高度，这点你放心。至于他是如何得到的，这就不得而知了。", "inputFormat": "第一行一个整数 $n$，表示总时间段。\n\n第二行 $n$ 个数 $\\{a_n\\}$，依次表示 $n$ 个单位时刻内海浪的高度。（数据保证各个时刻海浪高度均不相同）\n\n第三行一个整数 $m$，表示有 $m$ 个询问。\n\n接下来 $m$ 行，每行 $3$ 个整数 $x,y,k$，表示一个询问。", "outputFormat": "一共 $m$ 行，是每个询问的回答。", "hint": "对于 $30\\%$ 的数据，$n,m \\le 200$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 4000$，$1 \\le a_i \\le 10^5$ 且 $a_i$ 两两不等，$1 \\le x \\le y \\le n$，$1 \\le k \\le y-x+1$。", "locale": "zh-CN", "translations": {"en": {"title": "loidc, Look at the Sea", "background": "loidc likes the sea. When he is on vacation, he often goes to the seaside alone to play.\n\nUnder the impact of the surf, he can forget the irritation of coding. How pleasant it is.\n\nAlthough today is Saturday, it is $2014$-$11$-$8$, NOIP 2014 Final Round Day 1. While relaxing in the morning, he must not forget OI knowledge.", "description": "loidc plans to take the LOI team members to the seaside to have fun after the exam. So he wants to write a program to let them understand the wave conditions over a period of time.\n\nHis command is entered like this:\n\n$$\\texttt{x y k}$$\n\nThis asks, within time $[x, y]$, for the unit time index at which the $k$-th smallest wave height occurs.\n\nBut when he was just about to open Dev-pas++, loidc found that his computer was broken. Being lazy as always, he asks you for help. He hopes you can finish the program within $1$ second.\n\nOf course, loidc will tell you the wave height for all time indices in advance, so rest assured. As for how he obtained them, that is unknown.", "inputFormat": "- The first line contains an integer $n$, the total number of time indices.\n- The second line contains $n$ numbers $a_i$, in order, representing the wave height at each of the $n$ unit time indices. It is guaranteed that all time indices have pairwise distinct wave heights.\n- The third line contains an integer $m$, the number of queries.\n- The next $m$ lines each contain $3$ integers $x, y, k$, representing one query.", "outputFormat": "Output $m$ lines, each being the answer to one query.", "hint": "- For $30\\%$ of the testdata, $n, m \\le 200$.\n- Constraints: For $100\\%$ of the testdata, $1 \\le n, m \\le 4000$, $1 \\le a_i \\le 10^5$ and $a_i$ are pairwise distinct, $1 \\le x \\le y \\le n$, $1 \\le k \\le y - x + 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，看看海", "background": "loidc 喜欢大海。在他放假的时候他经常一个人跑到海边独自玩耍。\n\n在浪花的冲击下，他可以忘记打代码的烦躁，真是惬意极了。\n\n虽然今天是周六，但今天可是 $2014$ 年 $11$ 月 $8$ 日，NOIP 2014 复赛 Day 1。在早晨放松之余他可不能忘掉 OI 知识。", "description": "loidc 准备带着 LOI 的队员们考完试后到海边玩耍。所以他想写一个程序让队员们了解在一段时间内海浪的情况。\n\n他的命令是这样输入的：\n\n$$\\texttt{x y k}$$\n\n这是要询问在时间 $[x,y]$ 内海浪高度第 $k$ 小的单位时刻是那个时刻。\n\n但是在他刚准备打开 Dev-pas++ 的时候，loidc 发现他的电脑坏掉了。于是一向喜欢偷懒的他就向你求助。他希望你能在 $1$ 秒内完成程序的运行。\n\n当然 loidc 会提前告诉你所有时段海浪的高度，这点你放心。至于他是如何得到的，这就不得而知了。", "inputFormat": "第一行一个整数 $n$，表示总时间段。\n\n第二行 $n$ 个数 $\\{a_n\\}$，依次表示 $n$ 个单位时刻内海浪的高度。（数据保证各个时刻海浪高度均不相同）\n\n第三行一个整数 $m$，表示有 $m$ 个询问。\n\n接下来 $m$ 行，每行 $3$ 个整数 $x,y,k$，表示一个询问。", "outputFormat": "一共 $m$ 行，是每个询问的回答。", "hint": "对于 $30\\%$ 的数据，$n,m \\le 200$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 4000$，$1 \\le a_i \\le 10^5$ 且 $a_i$ 两两不等，$1 \\le x \\le y \\le n$，$1 \\le k \\le y-x+1$。", "locale": "zh-CN"}}}
{"pid": "P2311", "type": "P", "difficulty": 3, "samples": [["5\n2 3 4 5 6\n5\n1 1\n1 2\n2 3\n3 4\n4 5\n", "1\n2\n3\n4\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "loidc，想想看", "background": "话说 loidc 现在正在家闲的无聊，这天 loidc 正在观看比赛，他突然很有兴趣想了解一段时间内中国队获得金牌的情况。", "description": "还有一点，loidc 有特殊能力，可以预知未来，他可以准确的猜到中国队在某一个单位时间内获得的金牌数。但是，还有但是！由于工作量太大，再加上猜金牌要费很多的体力，所以他无法准确的计算出一段时间内获得的金牌数最大的单位时间是哪个，就因为这样 loidc 很郁闷。他思索来思索去就想到了你，因为他知道你是个 OIer，所以他对你呵呵一笑就把问题交给你了，loidc 希望你能在 1 s 内得出答案。\n", "inputFormat": "第一行一个 $n$，表示有 $n$ 个时间段。\n\n接下来一行有 $n$ 个数 $a_i$，$a_i$ 表示 loidc 猜到的中国队在第 $i$ 个时间段内获得的金牌数。\n\n然后，第三行有一个数 $m$，表示 loidc 有个问题。\n\n接下来有 $m$ 行，每行有 $2$ 个数分别为 $x_i$，$y_i$，表示要询问在时间段 $[x_i,y_i]$ 内中国队获得金牌数最大的是哪个单位时间。\n\nloidc 有一个习惯，他问问题是有先后的，也就是说后一个问题总是在前一个问题之后提出的。\n\n注意对于第 $i$ 个提问和第 $i+1$ 个提问严格的有 $x_i \\le x_{i+1}$、$y_i \\le y_{i+1}$。", "outputFormat": "一共 $m$ 行，每行一个 $k_i$，表示第 $i$ 个询问的答案。", "hint": "$30\\%$：$n \\le 1000$，$m \\le 1000$。\n\n$100\\%$：$n \\le {10}^5$，$m \\le {10}^5$。\n\n其他有关输入输出均小于 `maxlongint`。\n\n数据保证 $a_i$ 没有相同的。", "locale": "zh-CN", "translations": {"en": {"title": "loidc, Think About It", "background": "It is said that loidc is currently bored at home. One day, while watching a competition, he suddenly became very interested in the number of gold medals the Chinese team wins over a period of time.", "description": "Moreover, loidc has a special ability: he can foresee the future and accurately guess how many gold medals the Chinese team will win in any single unit of time. However, the workload is huge, and predicting gold medals consumes a lot of energy, so he cannot accurately determine which unit time within a given interval attains the maximum number of gold medals. This makes loidc quite upset. After thinking for a while, he thought of you, because he knows you are an OIer. He chuckled and handed the problem over to you. loidc hopes you can produce the answer within 1 s.\n\n# Description", "inputFormat": "The first line contains an $n$, indicating there are $n$ time intervals.\n\nThe next line contains $n$ numbers $a_i$, where $a_i$ denotes the number of gold medals loidc predicts the Chinese team will win in the $i$-th time interval.\n\nThen, the third line contains a number $m$, indicating loidc has $m$ queries.\n\nThe next $m$ lines each contain two numbers $x_i$ and $y_i$, asking which unit time within the interval $[x_i, y_i]$ has the maximum number of gold medals.\n\nloidc has a habit of asking questions in order; that is, each query is asked after the previous one.\n\nNote that for the $i$-th and $(i+1)$-th queries, it strictly holds that $x_i \\le x_{i+1}$ and $y_i \\le y_{i+1}$.", "outputFormat": "Output $m$ lines. Each line contains a single $k_i$, denoting the answer to the $i$-th query.", "hint": "$30\\%$: $n \\le 1000$, $m \\le 1000$.\n\n$100\\%$: $n \\le {10}^5$, $m \\le {10}^5$.\n\nAll other input and output values are less than `maxlongint`.\n\nThe testdata guarantees $a_i$ are all distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，想想看", "background": "话说 loidc 现在正在家闲的无聊，这天 loidc 正在观看比赛，他突然很有兴趣想了解一段时间内中国队获得金牌的情况。", "description": "还有一点，loidc 有特殊能力，可以预知未来，他可以准确的猜到中国队在某一个单位时间内获得的金牌数。但是，还有但是！由于工作量太大，再加上猜金牌要费很多的体力，所以他无法准确的计算出一段时间内获得的金牌数最大的单位时间是哪个，就因为这样 loidc 很郁闷。他思索来思索去就想到了你，因为他知道你是个 OIer，所以他对你呵呵一笑就把问题交给你了，loidc 希望你能在 1 s 内得出答案。\n", "inputFormat": "第一行一个 $n$，表示有 $n$ 个时间段。\n\n接下来一行有 $n$ 个数 $a_i$，$a_i$ 表示 loidc 猜到的中国队在第 $i$ 个时间段内获得的金牌数。\n\n然后，第三行有一个数 $m$，表示 loidc 有个问题。\n\n接下来有 $m$ 行，每行有 $2$ 个数分别为 $x_i$，$y_i$，表示要询问在时间段 $[x_i,y_i]$ 内中国队获得金牌数最大的是哪个单位时间。\n\nloidc 有一个习惯，他问问题是有先后的，也就是说后一个问题总是在前一个问题之后提出的。\n\n注意对于第 $i$ 个提问和第 $i+1$ 个提问严格的有 $x_i \\le x_{i+1}$、$y_i \\le y_{i+1}$。", "outputFormat": "一共 $m$ 行，每行一个 $k_i$，表示第 $i$ 个询问的答案。", "hint": "$30\\%$：$n \\le 1000$，$m \\le 1000$。\n\n$100\\%$：$n \\le {10}^5$，$m \\le {10}^5$。\n\n其他有关输入输出均小于 `maxlongint`。\n\n数据保证 $a_i$ 没有相同的。", "locale": "zh-CN"}}}
{"pid": "P2312", "type": "P", "difficulty": 5, "samples": [["2 10 \n1\n-2\n1", "1\n1"], ["2 10\n2\n-3\n1", "2\n1\n2"], ["2 10\n1\n3\n2", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2014", "NOIP 提高组", "枚举", "哈希 hashing", "素数判断,质数,筛法"], "title": "[NOIP 2014 提高组] 解方程", "background": "NOIP2014 提高组 D2T3", "description": "已知多项式方程：\n\n$$a_0+a_1x+a_2x^2+\\cdots+a_nx^n=0$$ \n\n求这个方程在 $[1,m]$ 内的整数解（$n$ 和 $m$ 均为正整数）。", "inputFormat": "输入共 $n + 2$ 行。  \n\n第一行包含 $2$ 个整数 $n,m$，每两个整数之间用一个空格隔开。  \n\n接下来的 $n+1$ 行每行包含一个整数，依次为 $a_0,a_1,a_2\\ldots a_n$。", "outputFormat": "第一行输出方程在 $[1,m]$ 内的整数解的个数。  \n\n接下来每行一个整数，按照从小到大的顺序依次输出方程在 $[1,m]$ 内的一个整数解。", "hint": "对于 $30\\%$ 的数据：$0<n\\le 2,|a_i|\\le 100,a_n≠0,m<100$。  \n\n对于 $50\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{100},a_n≠0,m<100$。  \n\n对于 $70\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^4$。  \n\n对于 $100\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Solve the Equation", "background": "NOIP 2014 Senior D2T3.", "description": "Given the polynomial equation:\n\n$$a_0+a_1x+a_2x^2+\\cdots+a_nx^n=0$$\n\nFind all integer solutions of this equation in $[1,m]$ (both $n$ and $m$ are positive integers).", "inputFormat": "The input contains $n + 2$ lines.  \nThe first line contains two integers $n, m$, separated by a single space.  \nEach of the next $n + 1$ lines contains one integer, namely $a_0, a_1, a_2, \\ldots, a_n$ in order.", "outputFormat": "On the first line, output the number of integer solutions in $[1,m]$.  \nThen output each integer solution in $[1,m]$ in increasing order, one per line.", "hint": "For $30\\%$ of the testdata: $0<n\\le 2,|a_i|\\le 100,a_n≠0,m<100$。  \nFor $50\\%$ of the testdata: $0<n\\le 100,|a_i|\\le 10^{100},a_n≠0,m<100$。  \nFor $70\\%$ of the testdata: $0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^4$。  \nFor $100\\%$ of the testdata: $0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^6$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 解方程", "background": "NOIP2014 提高组 D2T3", "description": "已知多项式方程：\n\n$$a_0+a_1x+a_2x^2+\\cdots+a_nx^n=0$$ \n\n求这个方程在 $[1,m]$ 内的整数解（$n$ 和 $m$ 均为正整数）。", "inputFormat": "输入共 $n + 2$ 行。  \n\n第一行包含 $2$ 个整数 $n,m$，每两个整数之间用一个空格隔开。  \n\n接下来的 $n+1$ 行每行包含一个整数，依次为 $a_0,a_1,a_2\\ldots a_n$。", "outputFormat": "第一行输出方程在 $[1,m]$ 内的整数解的个数。  \n\n接下来每行一个整数，按照从小到大的顺序依次输出方程在 $[1,m]$ 内的一个整数解。", "hint": "对于 $30\\%$ 的数据：$0<n\\le 2,|a_i|\\le 100,a_n≠0,m<100$。  \n\n对于 $50\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{100},a_n≠0,m<100$。  \n\n对于 $70\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^4$。  \n\n对于 $100\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^6$。", "locale": "zh-CN"}}}
{"pid": "P2313", "type": "P", "difficulty": 3, "samples": [["3 4 \nr 1.015 0.750 5.000 4.000\nc 6.000 5.000 2.020\nr 6.500 7.200 7.800 9.200\n3.500 2.500\n4.995 3.990\n2.300 8.150\n6.900 8.000\n", "1\n2\n0\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "2005", "各省省选", "湖南", "枚举"], "title": "[HNOI2005] 汤姆的游戏", "background": null, "description": "汤姆是个好动的孩子，今天他突然对圆规和直尺来了兴趣。于是他开始在一张很大很大的白纸上画很多很多的矩形和圆。画着画着，一不小心将他的爆米花弄撒了，于是白纸上就多了好多好多的爆米花。汤姆发现爆米花在白纸上看起来就像一个个点，有些点落在矩形或圆内部，而有些则在外面。于是汤姆开始数每个点在多少个矩形或圆内部。毕竟汤姆还只是个孩子，而且点、矩形和圆又非常多。所以汤姆数了好一会都数不清，于是就向聪明的你求助了。你的任务是：在给定平面上 $N$ 个图形（矩形或圆）以及 $M$ 个点后，请你求出每个点在多少个矩形或圆内部（这里假设矩形的边都平行于坐标轴）。", "inputFormat": "第一行为两个正整数 $N$ 和 $M$，其中 $N$ 表示有多少个图形（矩形或圆），$M$ 表示有多少个点。接下来的 $N$ 行是对每个图形的描述，具体来说，第 $i+1$ 行表示第 $i$ 个图形。先是一个字母,若该字母为 `r`，则表示该图形是一个矩形,这时后面将有 $4$ 个实数 $x1,y1,x2,y2$，表示该矩形的一对对角顶点的坐标分别为 $(x1,y1)$ 和  $(x2,y2)$；若该字母为 `c`，则表示该图形是一个圆，这时后面将有 $3$ 个实数 $x,y,r$，表示该圆以 $(x,y)$ 为圆心并以 $r$ 为半径。最后 $M$ 行是对每个点的描述，其中每行将有两个实数 $x,y$，表示一个坐标为 $(x,y)$ 的点。", "outputFormat": "包含 $M$ 行，每行是一个整数，其中第 $i$ 行的整数表示第 $i$ 个点在多少个图形内部（当某点在一个图形的边界上时，我们认为该点不在这个图形的内部）。", "hint": "对于 $100\\%$ 的数据，$N,M\\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Tom's Game", "background": "", "description": "Tom is an energetic child, and today he becomes interested in a compass and a straightedge. He starts drawing many rectangles and circles on a very large sheet of white paper. While drawing, he accidentally spills his popcorn, and now there are many popcorn pieces on the paper. Tom notices that the popcorn looks like points on the plane: some points fall inside rectangles or circles, while others fall outside. He begins counting how many rectangles or circles each point lies inside. Since Tom is still a child and there are many points, rectangles, and circles, he cannot finish counting and asks you for help.\n\nYour task is: given $N$ shapes (rectangles or circles) and $M$ points on the plane, determine for each point how many rectangles or circles contain it. Assume that each rectangle has sides parallel to the coordinate axes.", "inputFormat": "The first line contains two positive integers $N$ and $M$, where $N$ is the number of shapes (rectangles or circles) and $M$ is the number of points.\n\nThe next $N$ lines describe the shapes. Specifically, the $(i+1)$-th line describes the $i$-th shape. It starts with a letter: if the letter is `r`, the shape is a rectangle, followed by $4$ real numbers $x1,y1,x2,y2$, which are the coordinates of a pair of opposite vertices $(x1,y1)$ and $(x2,y2)$; if the letter is `c`, the shape is a circle, followed by $3$ real numbers $x,y,r$, meaning the circle is centered at $(x,y)$ with radius $r$.\n\nThe last $M$ lines describe the points. Each of these lines contains two real numbers $x,y$, representing a point at coordinates $(x,y)$.", "outputFormat": "Output $M$ lines. The integer on the $i$-th line is the number of shapes that contain the $i$-th point. If a point lies on the boundary of a shape, it is considered not inside that shape.", "hint": "For $100\\%$ of the testdata, $N, M \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 汤姆的游戏", "background": null, "description": "汤姆是个好动的孩子，今天他突然对圆规和直尺来了兴趣。于是他开始在一张很大很大的白纸上画很多很多的矩形和圆。画着画着，一不小心将他的爆米花弄撒了，于是白纸上就多了好多好多的爆米花。汤姆发现爆米花在白纸上看起来就像一个个点，有些点落在矩形或圆内部，而有些则在外面。于是汤姆开始数每个点在多少个矩形或圆内部。毕竟汤姆还只是个孩子，而且点、矩形和圆又非常多。所以汤姆数了好一会都数不清，于是就向聪明的你求助了。你的任务是：在给定平面上 $N$ 个图形（矩形或圆）以及 $M$ 个点后，请你求出每个点在多少个矩形或圆内部（这里假设矩形的边都平行于坐标轴）。", "inputFormat": "第一行为两个正整数 $N$ 和 $M$，其中 $N$ 表示有多少个图形（矩形或圆），$M$ 表示有多少个点。接下来的 $N$ 行是对每个图形的描述，具体来说，第 $i+1$ 行表示第 $i$ 个图形。先是一个字母,若该字母为 `r`，则表示该图形是一个矩形,这时后面将有 $4$ 个实数 $x1,y1,x2,y2$，表示该矩形的一对对角顶点的坐标分别为 $(x1,y1)$ 和  $(x2,y2)$；若该字母为 `c`，则表示该图形是一个圆，这时后面将有 $3$ 个实数 $x,y,r$，表示该圆以 $(x,y)$ 为圆心并以 $r$ 为半径。最后 $M$ 行是对每个点的描述，其中每行将有两个实数 $x,y$，表示一个坐标为 $(x,y)$ 的点。", "outputFormat": "包含 $M$ 行，每行是一个整数，其中第 $i$ 行的整数表示第 $i$ 个点在多少个图形内部（当某点在一个图形的边界上时，我们认为该点不在这个图形的内部）。", "hint": "对于 $100\\%$ 的数据，$N,M\\le 500$。", "locale": "zh-CN"}}}
{"pid": "P2314", "type": "P", "difficulty": 6, "samples": [["9 \r\n4 4 6 5 4 2 3 3 5\r\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "湖南"], "title": "[HNOI2005] 木梳", "background": null, "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1353.png)$\n\n$%![](https://cdn.luogu.com.cn/upload/pic/1354.png)$\n\n艾艺从小酷爱艺术，他梦想成为一名伟大的艺术家。最近他获得了一块材质不错的木板，其下侧为直线段，长为 $L$，平均分为 $L$ 段，从左到右编号为 $1$、$2$、……、$L$。木板的上侧为锯齿形，高度为整数，第 $i$ 段的高度为 $A_i$，$A_i \\ge 2$（如下图所示）。\n\n```plain\n              *                                    \n                                                   \n              *     *                             *\n                                                   \n  *     *     *     *     *                       *\n                                                   \n  *     *     *     *     *           *     *     *\n                                                   \n  *     *     *     *     *     *     *     *     *\n                                                   \n  *     *     *     *     *     *     *     *     *\n                                                   \n  4     4     6     5     4     2     3     3     5\n```\n\n这么好的一段材料浪费了怪可惜的，艾艺决定好好加工一番做成一件艺术品。但他不是纯艺术家，他觉得每件艺术品都应有实用价值（否则只是华而不实），具有实用性的艺术品是他设计的理念。\n\n根据这块木板的锯齿状，艾艺想到了每天起床后都要用到的一件日用品，“对，就把它做成梳子！”他的设想是：用刻刀将某些上端的格子挖掉（如果把某个格子挖掉，那么这个格子上方的格子也必须被挖掉，但不能把一列中的格子全都挖掉）。使得剩下的木板构成“规则锯齿形”（这样才好梳头）。\n\n例如，对上图，挖掉第 $3$、$7$、$8$ 列最上面的 $1$ 个格子和第 $5$ 列最上面的 $2$ 个格子后，剩下的区域就构成“规则锯齿形”（如下图所示）。\n\n```plain\n              .                                      \n            +---------+                         +--->\n            | *     * |                         | *  \n------------+         |                         |    \n  *     *     *     * |   .                     | *  \n                      |                         |    \n  *     *     *     * |   .           .     .   | *  \n                      +-------------------------+    \n  *     *     *     *     *     *     *     *     *  \n                                                     \n  *     *     *     *     *     *     *     *     *  \n                                                     \n  4     4     5     5     2     2     2     2     5  \n```\n\n一个锯齿形称为“规则锯齿形”当且仅当它的边界（右图中红色曲线所示）的拐点序列不包含 `010` 或者 `101`。右图中曲线的拐点序列为 `011001`，其中 `0` 代表左拐，`1` 代表右拐，沿着曲线的最左端往右走，先左拐，再右拐，接着右拐，然后左拐，继续左拐，最后右拐。\n\n为了最大限度地减少浪费，艾艺希望做出来的梳子面积最大。", "inputFormat": "第一行一个整数 $L$，表示木板下侧直线段的长。\n\n第二行为 $L$ 个正整数 $A_1 \\sim A_L$，表示每段的高度。", "outputFormat": "一个整数，表示为使梳子面积最大，需要从木板上挖掉的格子数。", "hint": "对于 $50\\%$ 的数据，$L \\le 10^4$。\n\n对于 $100\\%$ 的数据，$4 \\le L \\le 10^5$，$2 \\le A_i \\le 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Wooden Comb", "background": "", "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1353.png)$\n\n$%![](https://cdn.luogu.com.cn/upload/pic/1354.png)$\n\nAi Yi has loved art since childhood and dreams of becoming a great artist. Recently, he got a nice wooden board whose bottom side is a straight segment of length $L$, evenly divided into $L$ segments, numbered $1, 2, \\ldots, L$ from left to right. The top side is a sawtooth shape with integer heights: the height of the $i$-th segment is $A_i$, where $A_i \\ge 2$ (see the figure below).\n\n```plain\n              *                                    \n                                                   \n              *     *                             *\n                                                   \n  *     *     *     *     *                       *\n                                                   \n  *     *     *     *     *           *     *     *\n                                                   \n  *     *     *     *     *     *     *     *     *\n                                                   \n  *     *     *     *     *     *     *     *     *\n                                                   \n  4     4     6     5     4     2     3     3     5\n```\n\nIt would be a pity to waste such good material, so Ai Yi decides to craft it into a piece of art. But he is not a pure artist; he believes every artwork should be practical (otherwise it is merely flashy). Practicality is his design philosophy.\n\nInspired by the sawtooth shape of the board, Ai Yi thought of an everyday item used after getting up: “Yes, let’s make it into a comb!” His idea is to chisel away some cells at the top ends of columns (if a cell is removed, then all cells above it must also be removed, but you cannot remove all cells in any column), so that the remaining board forms a “regular sawtooth shape” (which is suitable for combing).\n\nFor example, for the figure above, if you remove the top $1$ cell from columns $3$, $7$, and $8$, and remove the top $2$ cells from column $5$, the remaining region forms a “regular sawtooth shape” (as shown below).\n\n```plain\n              .                                      \n            +---------+                         +--->\n            | *     * |                         | *  \n------------+         |                         |    \n  *     *     *     * |   .                     | *  \n                      |                         |    \n  *     *     *     * |   .           .     .   | *  \n                      +-------------------------+    \n  *     *     *     *     *     *     *     *     *  \n                                                     \n  *     *     *     *     *     *     *     *     *  \n                                                     \n  4     4     5     5     2     2     2     2     5  \n```\n\nA sawtooth shape is called “regular” if and only if the turning sequence of its boundary (the red curve in the right figure) does not contain `010` or `101`. In the right figure, the curve’s turning sequence is `011001`, where `0` denotes a left turn and `1` denotes a right turn. Walking along the curve from the leftmost end to the right, you first turn left, then right, then right, then left, then left, and finally right.\n\nTo minimize waste, Ai Yi wants the comb’s area to be as large as possible.", "inputFormat": "The first line contains an integer $L$, the length of the bottom straight segment of the board.\n\nThe second line contains $L$ positive integers $A_1 \\sim A_L$, the heights of each segment.", "outputFormat": "Output a single integer: the number of cells that must be removed from the board so that the comb’s area is maximized.", "hint": "For $50\\%$ of the testdata, $L \\le 10^4$.\n\nFor $100\\%$ of the testdata, $4 \\le L \\le 10^5$, $2 \\le A_i \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 木梳", "background": null, "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1353.png)$\n\n$%![](https://cdn.luogu.com.cn/upload/pic/1354.png)$\n\n艾艺从小酷爱艺术，他梦想成为一名伟大的艺术家。最近他获得了一块材质不错的木板，其下侧为直线段，长为 $L$，平均分为 $L$ 段，从左到右编号为 $1$、$2$、……、$L$。木板的上侧为锯齿形，高度为整数，第 $i$ 段的高度为 $A_i$，$A_i \\ge 2$（如下图所示）。\n\n```plain\n              *                                    \n                                                   \n              *     *                             *\n                                                   \n  *     *     *     *     *                       *\n                                                   \n  *     *     *     *     *           *     *     *\n                                                   \n  *     *     *     *     *     *     *     *     *\n                                                   \n  *     *     *     *     *     *     *     *     *\n                                                   \n  4     4     6     5     4     2     3     3     5\n```\n\n这么好的一段材料浪费了怪可惜的，艾艺决定好好加工一番做成一件艺术品。但他不是纯艺术家，他觉得每件艺术品都应有实用价值（否则只是华而不实），具有实用性的艺术品是他设计的理念。\n\n根据这块木板的锯齿状，艾艺想到了每天起床后都要用到的一件日用品，“对，就把它做成梳子！”他的设想是：用刻刀将某些上端的格子挖掉（如果把某个格子挖掉，那么这个格子上方的格子也必须被挖掉，但不能把一列中的格子全都挖掉）。使得剩下的木板构成“规则锯齿形”（这样才好梳头）。\n\n例如，对上图，挖掉第 $3$、$7$、$8$ 列最上面的 $1$ 个格子和第 $5$ 列最上面的 $2$ 个格子后，剩下的区域就构成“规则锯齿形”（如下图所示）。\n\n```plain\n              .                                      \n            +---------+                         +--->\n            | *     * |                         | *  \n------------+         |                         |    \n  *     *     *     * |   .                     | *  \n                      |                         |    \n  *     *     *     * |   .           .     .   | *  \n                      +-------------------------+    \n  *     *     *     *     *     *     *     *     *  \n                                                     \n  *     *     *     *     *     *     *     *     *  \n                                                     \n  4     4     5     5     2     2     2     2     5  \n```\n\n一个锯齿形称为“规则锯齿形”当且仅当它的边界（右图中红色曲线所示）的拐点序列不包含 `010` 或者 `101`。右图中曲线的拐点序列为 `011001`，其中 `0` 代表左拐，`1` 代表右拐，沿着曲线的最左端往右走，先左拐，再右拐，接着右拐，然后左拐，继续左拐，最后右拐。\n\n为了最大限度地减少浪费，艾艺希望做出来的梳子面积最大。", "inputFormat": "第一行一个整数 $L$，表示木板下侧直线段的长。\n\n第二行为 $L$ 个正整数 $A_1 \\sim A_L$，表示每段的高度。", "outputFormat": "一个整数，表示为使梳子面积最大，需要从木板上挖掉的格子数。", "hint": "对于 $50\\%$ 的数据，$L \\le 10^4$。\n\n对于 $100\\%$ 的数据，$4 \\le L \\le 10^5$，$2 \\le A_i \\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P2315", "type": "P", "difficulty": 6, "samples": [["5\r\n1 1 1\r\n1 1 0 1 1 0\r\n1 1 1 1 1 1 1 0 1\r\n1 0 1 1 1 1 0 1 1 1 1 1\r\n0 1 1 1 1 1 0 1 1 1 1 1 0 1 1\r\n", "19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "树状数组", "湖南", "枚举"], "title": "[HNOI2005] 数三角形", "background": null, "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1355.png)$\n\n小苏看到一个这样的等边三角形：该等边三角形每边的长度为 $ n $ 且被分成 $ n $ 等份，于是每条边就有 $ n-1 $ 个等分点。而整个三角形被连接两个不同边的等分点且平行于三角形的第三边的线段分成了 $ n^2 $ 个单位等边三角形（边长为 $ 1 $）。下图左是 $ n=5 $ 的情形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5bu420q9.png)\n\n小苏想知道，删除其中的一些短边后，剩下的边一共组成多少个三角形（包括所有边长为 $ m $ 的三角形（$ 1 \\leq m < n $），正立的和倒立的都算，只要三角形的 $ 3m $ 条短边都没有被删除就算是组成一个三角形）。例如，上图右就存在 $ 19 $ 个三角形。", "inputFormat": "$%![](https://cdn.luogu.com.cn/upload/pic/1356.png)$\n\n大三角形的所有短边可以看成由 $\\dfrac{n(n+1)}{2}$ 个单位三角形的边界组成，如下图的灰色三角形所示。其中第 $1$ 排有 $1$ 个灰色三角形，第 $2$ 排有 $2$ 个灰色三角形，……，第 $n$ 排有 $n$ 个灰色三角形。所以输入格式是这样规定的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kw2g07pf.png)\n\n第一行为正整数 $n\\ (1 \\le n \\le 1000)$，表示大三角形每边的长度。\n\n接下来的 $n$ 行，第 $i+1$ 行有 $i$ 组数，从左到右每组数描述一个三角形，每组数都有 $3$ 个数，这 $3$ 个数非 $0$ 即 $1$，表示对应的短边是否被删除，$0$ 表示已被删除，$1$ 表示未被删除，依次按照三角形的左、右、下边的顺序来描述。所以第 $i+1$ 行有 $3i$ 个数，每个数是 $0$ 或 $1$。", "outputFormat": "仅一个整数 $T$，表示有多少个三角形的边界都没有被删除。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Counting Triangles", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/pic/1355.png)\n\nXiao Su sees an equilateral triangle: each side of the equilateral triangle has length $n$ and is divided into $n$ equal parts, so each side has $n-1$ division points. The whole triangle is divided into $n^2$ unit equilateral triangles (with side length $1$) by segments that connect division points on two different sides and are parallel to the third side. The figure on the left below shows the case $n=5$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5bu420q9.png)\n\nXiao Su wants to know, after deleting some of the short edges, how many triangles are formed by the remaining edges (including all triangles with side length $m$ ($1 \\le m < n$), counting both upright and inverted ones). A triangle is counted if all its $3m$ short edges have not been deleted. For example, in the figure on the right above, there are $19$ triangles.", "inputFormat": "![](https://cdn.luogu.com.cn/upload/pic/1356.png)\n\nAll short edges of the large triangle can be regarded as the boundaries of $\\dfrac{n(n+1)}{2}$ unit triangles, as shown by the gray triangles in the figure below. There is $1$ gray triangle in the $1$st row, $2$ gray triangles in the $2$nd row, …, and $n$ gray triangles in the $n$th row. Therefore, the input format is specified as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kw2g07pf.png)\n\nThe first line contains a positive integer $n$ ($1 \\le n \\le 1000$), which is the side length of the large triangle.\n\nThe next $n$ lines: on the $(i+1)$-th line there are $i$ groups of numbers. From left to right, each group describes one triangle. Each group contains $3$ numbers, each either $0$ or $1$, indicating whether the corresponding short edge is deleted. $0$ means deleted, $1$ means not deleted. The three numbers describe, in order, the left, right, and bottom edges of the triangle. Therefore, the $(i+1)$-th line contains $3i$ numbers, each being $0$ or $1$.", "outputFormat": "Output a single integer $T$, the number of triangles whose boundaries have not been deleted.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 数三角形", "background": null, "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1355.png)$\n\n小苏看到一个这样的等边三角形：该等边三角形每边的长度为 $ n $ 且被分成 $ n $ 等份，于是每条边就有 $ n-1 $ 个等分点。而整个三角形被连接两个不同边的等分点且平行于三角形的第三边的线段分成了 $ n^2 $ 个单位等边三角形（边长为 $ 1 $）。下图左是 $ n=5 $ 的情形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5bu420q9.png)\n\n小苏想知道，删除其中的一些短边后，剩下的边一共组成多少个三角形（包括所有边长为 $ m $ 的三角形（$ 1 \\leq m < n $），正立的和倒立的都算，只要三角形的 $ 3m $ 条短边都没有被删除就算是组成一个三角形）。例如，上图右就存在 $ 19 $ 个三角形。", "inputFormat": "$%![](https://cdn.luogu.com.cn/upload/pic/1356.png)$\n\n大三角形的所有短边可以看成由 $\\dfrac{n(n+1)}{2}$ 个单位三角形的边界组成，如下图的灰色三角形所示。其中第 $1$ 排有 $1$ 个灰色三角形，第 $2$ 排有 $2$ 个灰色三角形，……，第 $n$ 排有 $n$ 个灰色三角形。所以输入格式是这样规定的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kw2g07pf.png)\n\n第一行为正整数 $n\\ (1 \\le n \\le 1000)$，表示大三角形每边的长度。\n\n接下来的 $n$ 行，第 $i+1$ 行有 $i$ 组数，从左到右每组数描述一个三角形，每组数都有 $3$ 个数，这 $3$ 个数非 $0$ 即 $1$，表示对应的短边是否被删除，$0$ 表示已被删除，$1$ 表示未被删除，依次按照三角形的左、右、下边的顺序来描述。所以第 $i+1$ 行有 $3i$ 个数，每个数是 $0$ 或 $1$。", "outputFormat": "仅一个整数 $T$，表示有多少个三角形的边界都没有被删除。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2316", "type": "P", "difficulty": 6, "samples": [["1 3 3\r\n50000\r\n0 0 0 0\r\n150000 0 1 1\r\n0 150000 1 1\r\n3 5.497787 \t  2 2.356194\r\n3 1.570796 \t  2 0.0\r\n3 0.0         2 1.570796\r\n", "175000\r\n150000\r\n200000\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "并查集", "各省省选", "湖南", "前缀和"], "title": "[HNOI2005] 分形", "background": null, "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1357.png)$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ueifmd4d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7pwzb01g.png)\n\n分形是分数维的，介于 $2$ 维与 $3$ 维之间。完整的分形图往往具有有界的面积和无限的周长。为了探寻分形的奥秘，King 执着地进行着与众不同的研究。\n\n首先他研究简单分形：平面上有一个半径为 $R_0$（$R_0 = 10^5$）的圆，圆心处于坐标原点，它与若干个半径为 $R_1$ 的圆外切，每个半径为 $R_1$ 的圆与若干个半径为 $R_2$ 的圆外切，……，每个半径为 $R_i$ 的圆与若干个半径为 $R_{i+1}$ 的圆外切。任意两圆不相交、不重叠、不内含、不内切。半径为 $R_i$ 的圆只可能与半径为 $R_{i-1}$ 或 $R_{i+1}$ 的圆外切，$i > 0$ 时恰与 1 个半径为 $R_{i-1}$ 的圆外切。\n\n作为基础，他先研究有限层的简单分形，即只由半径为 $R_0 \\sim R_n$ 的圆构成的 $n + 1$ 层分形。图 $1$ 是一个 $5$ 层简单分形。由于只有有限层，所以此图的边界为有限长。\n\nKing 在边界上找出了与分形图的性质有关的若干个点对（$P_i, Q_i$），从 $P_i$ 到 $Q_i$，最短的光滑路径的长度是多少（如图 $1$ 中的加粗曲线）。\n\n光滑路径是指：路径在两圆公切点拐弯时切线方向保持不变。图 $2$ 中左边两段（加粗）路径是光滑的，而右边的（加粗）路径不光滑。", "inputFormat": "$%![](https://cdn.luogu.com.cn/upload/pic/1358.png)$\n\n第一行为 $3$ 个整数 $n, m, t$。其中 $m$ 表示圆的个数（并且圆的编号为 $1 \\sim m$），$t$ 为特殊点对数。\n\n第二行为 $n$ 个正整数 $R_1 \\sim R_n$。\n\n接下来的 $m$ 行表示各个圆，每行有 $4$ 个数 $X_i, Y_i, S_i, F_i$, $(X_i, Y_i)$ 是圆 $i$ 的圆心位置，圆 $i$ 的半径是 $R_{S_i}$，与圆 $i$ 相切的尺寸更大的圆的编号是 $F_i$，$X_i$ 和 $Y_i$ 可能是实数。\n\n再接下来的 $t$ 行表示各个特殊点对，每行有 $4$ 个数 $P_{i,tW}, P_{i,tA}, Q_{i,tW},Q_{i,tA}$，用于描述一个特殊点对 $(P_i, Q_i)$ 的位置：\n\n- $P_{i,tW}$ 表示点 $P_i$ 处于 $P_{i,tW}$ 这个圆上，并且以此圆圆心为原点的幅角为 $P_{i,tA}$。\n- $Q_{i,tW}$ 表示点 $Q_i$ 处于 $Q_{i,tW}$ 这个圆上，并且以此圆圆心为原点的幅角为 $Q_{i,tA}$。", "outputFormat": "$%![](https://cdn.luogu.com.cn/upload/pic/1359.png)$\n\n对于每个特殊点对，输出一行一个整数，表示最短长度除以 $\\pi$ 后四舍五入保留整数的结果。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1360.png)\n\n对于 $50\\%$ 的数据：\n\n- $m \\le 300$。\n- $t \\le 1000$。\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le n < m \\le 3000$。\n- $1 \\le t \\le 10^5$。\n- $2 \\le R_n < R_{n-1} < \\ldots < R_1 < R_0$。\n- $R_{i-1} - R_i \\ge 2$。\n- $R_0 = 10^5$。\n- $S_0 = -1$。\n- $X_1 = Y_1 = F_1 = S_1 = 0$。\n- $-3 \\times 10^8 \\le X_i, Y_i \\le 3 \\times 10^8$。\n- $0 \\le S_i \\le n$。\n- $1 \\le F_i \\le m$。\n- $F_i \\ne i$。\n- $S_{F_i} = S_i-1$。\n- $1 \\le P_{i,tW},Q_{i,tW} \\le m$。\n- $P_{i,tW} \\ne Q_{i,tW}$。\n- $0 \\le  P_{i,tA},Q_{i,tA} < 2\\pi$。\n- 所有的圆之间要么外切要么相离。\n- 所有特殊点都不是切点。\n- 一个圆最多与 $10$ 个圆外切。\n- 所有实数最多保留 $6$ 位小数。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Fractal", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/pic/1357.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ueifmd4d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7pwzb01g.png)\n\nA fractal has a fractional dimension, between $2$ and $3$. A complete fractal picture often has a bounded area and an infinite perimeter. To explore the secrets of fractals, King persistently conducts an unconventional study.\n\nHe first studies a simple fractal: In the plane, there is a circle of radius $R_0$ ($R_0 = 10^5$) centered at the origin. It is externally tangent to several circles of radius $R_1$. Each circle of radius $R_1$ is externally tangent to several circles of radius $R_2$, …, and each circle of radius $R_i$ is externally tangent to several circles of radius $R_{i+1}$. Any two circles do not intersect, do not overlap, are not contained one in another, and are not internally tangent. A circle of radius $R_i$ can only be externally tangent to circles of radius $R_{i-1}$ or $R_{i+1}$, and for $i > 0$ it is externally tangent to exactly one circle of radius $R_{i-1}$.\n\nAs a foundation, he first studies a finite-layer simple fractal, that is, an $(n + 1)$-layer fractal composed only of circles with radii $R_0$ through $R_n$. Figure 1 shows a $5$-layer simple fractal. Since there are only finitely many layers, the boundary length is finite.\n\nOn the boundary, King identifies several pairs of points $(P_i, Q_i)$ related to the properties of the fractal picture. From $P_i$ to $Q_i$, what is the length of the shortest smooth path (see the bold curve in Figure 1).\n\nA smooth path means: at a common tangent point of two circles, when the path turns, its tangent direction remains unchanged. In Figure 2, the two bold paths on the left are smooth, while the bold path on the right is not smooth.", "inputFormat": "![](https://cdn.luogu.com.cn/upload/pic/1358.png)\n\nThe first line contains $3$ integers $n, m, t$. Here $m$ is the number of circles (and the circles are numbered $1$ through $m$), and $t$ is the number of special point pairs.\n\nThe second line contains $n$ positive integers $R_1$ through $R_n$.\n\nEach of the next $m$ lines describes a circle. Each line contains $4$ numbers $X_i, Y_i, S_i, F_i$. $(X_i, Y_i)$ is the center of circle $i$. The radius of circle $i$ is $R_{S_i}$. The index of the larger circle tangent to circle $i$ is $F_i$. $X_i$ and $Y_i$ may be real numbers.\n\nEach of the next $t$ lines describes a special pair of points. Each line contains $4$ numbers $P_{i,tW}, P_{i,tA}, Q_{i,tW}, Q_{i,tA}$, which specify the locations of a special pair $(P_i, Q_i)$:\n- $P_{i,tW}$ means point $P_i$ lies on circle $P_{i,tW}$, and with the center of this circle as the origin, its argument (angle) is $P_{i,tA}$.\n- $Q_{i,tW}$ means point $Q_i$ lies on circle $Q_{i,tW}$, and with the center of this circle as the origin, its argument (angle) is $Q_{i,tA}$.", "outputFormat": "![](https://cdn.luogu.com.cn/upload/pic/1359.png)\n\nFor each special pair, output one line containing one integer, which is the shortest length divided by $\\pi$, rounded to the nearest integer.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1360.png)\n\nFor $50\\%$ of the testdata:\n- $m \\le 300$.\n- $t \\le 1000$.\n\nFor $100\\%$ of the testdata:\n- $1 \\le n < m \\le 3000$.\n- $1 \\le t \\le 10^5$.\n- $2 \\le R_n < R_{n-1} < \\ldots < R_1 < R_0$.\n- $R_{i-1} - R_i \\ge 2$.\n- $R_0 = 10^5$.\n- $S_0 = -1$.\n- $X_1 = Y_1 = F_1 = S_1 = 0$.\n- $-3 \\times 10^8 \\le X_i, Y_i \\le 3 \\times 10^8$.\n- $0 \\le S_i \\le n$.\n- $1 \\le F_i \\le m$.\n- $F_i \\ne i$.\n- $S_{F_i} = S_i - 1$.\n- $1 \\le P_{i,tW}, Q_{i,tW} \\le m$.\n- $P_{i,tW} \\ne Q_{i,tW}$.\n- $0 \\le P_{i,tA}, Q_{i,tA} < 2\\pi$.\n- Any two circles are either externally tangent or disjoint.\n- All special points are not points of tangency.\n- Each circle is externally tangent to at most $10$ circles.\n- All real numbers have at most $6$ decimal places.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 分形", "background": null, "description": "$%![](https://cdn.luogu.com.cn/upload/pic/1357.png)$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ueifmd4d.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7pwzb01g.png)\n\n分形是分数维的，介于 $2$ 维与 $3$ 维之间。完整的分形图往往具有有界的面积和无限的周长。为了探寻分形的奥秘，King 执着地进行着与众不同的研究。\n\n首先他研究简单分形：平面上有一个半径为 $R_0$（$R_0 = 10^5$）的圆，圆心处于坐标原点，它与若干个半径为 $R_1$ 的圆外切，每个半径为 $R_1$ 的圆与若干个半径为 $R_2$ 的圆外切，……，每个半径为 $R_i$ 的圆与若干个半径为 $R_{i+1}$ 的圆外切。任意两圆不相交、不重叠、不内含、不内切。半径为 $R_i$ 的圆只可能与半径为 $R_{i-1}$ 或 $R_{i+1}$ 的圆外切，$i > 0$ 时恰与 1 个半径为 $R_{i-1}$ 的圆外切。\n\n作为基础，他先研究有限层的简单分形，即只由半径为 $R_0 \\sim R_n$ 的圆构成的 $n + 1$ 层分形。图 $1$ 是一个 $5$ 层简单分形。由于只有有限层，所以此图的边界为有限长。\n\nKing 在边界上找出了与分形图的性质有关的若干个点对（$P_i, Q_i$），从 $P_i$ 到 $Q_i$，最短的光滑路径的长度是多少（如图 $1$ 中的加粗曲线）。\n\n光滑路径是指：路径在两圆公切点拐弯时切线方向保持不变。图 $2$ 中左边两段（加粗）路径是光滑的，而右边的（加粗）路径不光滑。", "inputFormat": "$%![](https://cdn.luogu.com.cn/upload/pic/1358.png)$\n\n第一行为 $3$ 个整数 $n, m, t$。其中 $m$ 表示圆的个数（并且圆的编号为 $1 \\sim m$），$t$ 为特殊点对数。\n\n第二行为 $n$ 个正整数 $R_1 \\sim R_n$。\n\n接下来的 $m$ 行表示各个圆，每行有 $4$ 个数 $X_i, Y_i, S_i, F_i$, $(X_i, Y_i)$ 是圆 $i$ 的圆心位置，圆 $i$ 的半径是 $R_{S_i}$，与圆 $i$ 相切的尺寸更大的圆的编号是 $F_i$，$X_i$ 和 $Y_i$ 可能是实数。\n\n再接下来的 $t$ 行表示各个特殊点对，每行有 $4$ 个数 $P_{i,tW}, P_{i,tA}, Q_{i,tW},Q_{i,tA}$，用于描述一个特殊点对 $(P_i, Q_i)$ 的位置：\n\n- $P_{i,tW}$ 表示点 $P_i$ 处于 $P_{i,tW}$ 这个圆上，并且以此圆圆心为原点的幅角为 $P_{i,tA}$。\n- $Q_{i,tW}$ 表示点 $Q_i$ 处于 $Q_{i,tW}$ 这个圆上，并且以此圆圆心为原点的幅角为 $Q_{i,tA}$。", "outputFormat": "$%![](https://cdn.luogu.com.cn/upload/pic/1359.png)$\n\n对于每个特殊点对，输出一行一个整数，表示最短长度除以 $\\pi$ 后四舍五入保留整数的结果。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1360.png)\n\n对于 $50\\%$ 的数据：\n\n- $m \\le 300$。\n- $t \\le 1000$。\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le n < m \\le 3000$。\n- $1 \\le t \\le 10^5$。\n- $2 \\le R_n < R_{n-1} < \\ldots < R_1 < R_0$。\n- $R_{i-1} - R_i \\ge 2$。\n- $R_0 = 10^5$。\n- $S_0 = -1$。\n- $X_1 = Y_1 = F_1 = S_1 = 0$。\n- $-3 \\times 10^8 \\le X_i, Y_i \\le 3 \\times 10^8$。\n- $0 \\le S_i \\le n$。\n- $1 \\le F_i \\le m$。\n- $F_i \\ne i$。\n- $S_{F_i} = S_i-1$。\n- $1 \\le P_{i,tW},Q_{i,tW} \\le m$。\n- $P_{i,tW} \\ne Q_{i,tW}$。\n- $0 \\le  P_{i,tA},Q_{i,tA} < 2\\pi$。\n- 所有的圆之间要么外切要么相离。\n- 所有特殊点都不是切点。\n- 一个圆最多与 $10$ 个圆外切。\n- 所有实数最多保留 $6$ 位小数。", "locale": "zh-CN"}}}
{"pid": "P2317", "type": "P", "difficulty": 6, "samples": [["6 3 10 4\n1 2 1 1 1\n1 2 2 2 1\n1 2 3 9 1\n1 1 4 0 1\n1 1 5 0 1\n1 1 6 1 1\n", "6 2"], ["6 3 2 4\n1 2 1 1 1\n1 2 2 2 1\n1 2 3 0 1\n1 1 4 0 1\n1 1 5 0 1\n1 1 6 1 1\n", "Poor Coke!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2005", "各省省选", "湖南", "最短路"], "title": "[HNOI2005] 星际贸易", "background": "", "description": "$\\text{Coke}$ 是一个精明的小商人。这次他想大胆地做一次星际贸易。于是他选定了银河贸易交通局所给定的一条贸易路线，从地球出发，依次经过 $Star_1,Star_2,\\cdots,Star_N$ 。贸易路线在 $Star_N$ 结束（$\\text{Coke}$ 最后要在 $Star_N$ 上观光旅游）。\n\n银河系中各个星球实行计划经济。在一个星球上出售商品，必须获得那个星球的许可证。$\\text{Coke}$ 手中的许可证允许他在 $Star_i$ 上出售指定配额量 $A_i (1\\leq A_i\\leq100)$ 吨的商品(而且既不多也不能少，当然他可以不在 $Star_i$；上出售任何商品)，出售后能够获得 $B_i(0 \\leq B_i \\leq 50000)$ 的收入。由于 $\\text{Coke}$ 的私人飞船载重有限，这个精明的小商人不得不好好计划一下他应该向哪些星球出售商品。\n\n飞船采用反物质推进系统行驶，需要反物质燃料。反物质燃料不是用来维持平常飞行的(宇宙间没有阻力)，而是用于飞船从星球出发时加速以及飞船到达星球时减速所需的消耗。每次加速和减速各消耗一个单位的反物质燃料。\n\n另外，作如此长距离的飞行，飞船显然要在中途停靠并在某些星球上补充反物质燃料以及对飞船定期进行一些维护(维护只能在星球上进行)。由于各星球之间科技发展水平不等，在各个星球上反物质燃料的售价以及维护飞船的费用是不同的。\n\n此外，银河贸易交通局正在举办小商人贸易竞赛，对于贸易额(即总贸易收入)得到冠军的商人有丰厚的奖赏，因此 $\\text{Coke}$ 决定不惜血本，要使自己的贸易额达到最大。当然，在贸易额最大的同时，作为一个商人，他还是希望净利润尽可能大(净利润=贸易额-燃料费用-维护费用)。\n\n假设从地球出发时飞船刚刚维护过并装满了燃料，并且飞船每次停靠一个星球出售商品或补充反物质燃料或在终点站观光旅游时就会在那里做一次维护。$\\text{Coke}$ 希望你给他制定一个方案满足他的要求。", "inputFormat": "从文件 input.txt 中读入数据，文件的第 $1$ 行为 $4$ 个正整数 $N,M,R,L_0$。\n\n$N(1 \\le N \\le 2000)$ 表示 Coke 这次要行经的星球数。$M(1 \\le M \\le 2000)$ 表示飞船最大的载重量，$R(0 \\le R \\le 10000000)$ 表示飞船最多能携带的燃料数。$L_0(1 \\le L_0 \\le 100)$ 表示飞船不做维护所能飞行的最大距离。\n\n文件的第 $2 \\cdots N+1$ 行是对每个星球的描述。其中第 $i+1$ 行有 $5$ 个非负整数 $A_i,B_i,L_i,P_i,F_i$，$L_i(1 \\le L_i \\le 100)$ 表示从地球依次经 $Star_1,Star_2,\\cdots,Star_{i-1}$ 最后到达 $Star_i$ 的距离。$P_i(0 \\le P_i \\le 1000)$ 为星球 $Star_i$ 上一个单位反物质的价格，若 $P_i$ 为 $0$ ，则说明这个星球还没有制造反物质的技术。$F_i(0 \\le F_i \\le 10000)$ 表示飞船在 $Star_i$ 上做维护所需要的费用。\n\n假设输入数据满足：对于 $i < j$ 一定有 $L_i < L_j$，并使得只有一种获得最大贸易额的方法。", "outputFormat": "如果可以找到这样的方案，那么输出文件 output.txt 中包含两个整数 $X$ 和 $Y$。$X$ 表示贸易额，$Y$ 表示净利润并且两个数字之间用一个空格隔开。如果不能完成这次星际贸易，那么输出文件 output.txt 中包含 “Poor Coke!”（不包括引号）。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Interstellar Trade", "background": "", "description": "$\\text{Coke}$ is a shrewd small merchant. This time he wants to boldly engage in interstellar trade. He chooses a trade route specified by the Galactic Trade and Traffic Authority, starting from Earth and passing in order through $Star_1, Star_2, \\cdots, Star_N$. The route ends at $Star_N$ (where $\\text{Coke}$ will go sightseeing).\n\nThe planets in the galaxy operate under a planned economy. To sell goods on a planet, you must have that planet’s license. The licenses $\\text{Coke}$ holds allow him to sell exactly the quota amount $A_i$ tons of goods on $Star_i$ with $1 \\le A_i \\le 100$ (neither more nor less; of course, he may choose not to sell anything on $Star_i$). After selling, he can obtain income $B_i$ with $0 \\le B_i \\le 50000$. Because his private spaceship has limited payload, this shrewd merchant must carefully plan which planets to sell on.\n\nThe spaceship uses an antimatter propulsion system and requires antimatter fuel. Antimatter fuel is not used to maintain ordinary flight (there is no drag in space); it is used for acceleration when leaving a planet and deceleration when arriving at a planet. Each acceleration and each deceleration consumes one unit of antimatter fuel.\n\nFurthermore, for such a long trip, the spaceship must stop en route at some planets to replenish antimatter fuel and to perform regular maintenance (maintenance can only be done on planets). Due to different levels of technological development, the price of antimatter fuel and the maintenance cost vary from planet to planet.\n\nIn addition, the Galactic Trade and Traffic Authority is hosting a small-merchant trade competition, with generous rewards for the merchant with the highest trade revenue (i.e., total trade income). Therefore, $\\text{Coke}$ decides to spare no expense to maximize his trade revenue. Of course, while maximizing trade revenue, as a merchant he still hopes the net profit is as large as possible (net profit = trade revenue − fuel cost − maintenance cost).\n\nAssume that when departing from Earth, the spaceship has just been maintained and its fuel tank is full. Whenever the spaceship stops at a planet to sell goods or to refuel, or when it arrives at the terminal for sightseeing, it will undergo maintenance there once. $\\text{Coke}$ wants you to devise a plan that meets his requirements.", "inputFormat": "The first line contains four positive integers $N, M, R, L_0$.\n\n- $N$ ($1 \\le N \\le 2000$) is the number of planets on the route this time.  \n- $M$ ($1 \\le M \\le 2000$) is the spaceship’s maximum cargo capacity.  \n- $R$ ($0 \\le R \\le 10000000$) is the maximum amount of fuel the spaceship can carry.  \n- $L_0$ ($1 \\le L_0 \\le 100$) is the maximum distance the spaceship can fly without maintenance.\n\nThe next $N$ lines (lines $2$ to $N+1$) each describe a planet. Line $i+1$ contains five non-negative integers $A_i, B_i, L_i, P_i, F_i$:\n\n- $A_i$ ($1 \\le A_i \\le 100$) is the sale quota (tons) on $Star_i$.  \n- $B_i$ ($0 \\le B_i \\le 50000$) is the income from selling on $Star_i$.  \n- $L_i$ ($1 \\le L_i \\le 100$) is the distance from Earth to $Star_i$ along the route $Earth \\to Star_1 \\to Star_2 \\to \\cdots \\to Star_i$.  \n- $P_i$ ($0 \\le P_i \\le 1000$) is the price per unit of antimatter on $Star_i$. If $P_i = 0$, this planet does not yet have antimatter manufacturing technology.  \n- $F_i$ ($0 \\le F_i \\le 10000$) is the maintenance cost on $Star_i$.\n\nAssume the input satisfies: for $i < j$, it always holds that $L_i < L_j$, and there is exactly one way to achieve the maximum trade revenue.", "outputFormat": "If such a plan exists, output two integers $X$ and $Y$ separated by a space. $X$ is the maximum trade revenue, and $Y$ is the net profit. If the trip cannot be completed, output “Poor Coke!”.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 星际贸易", "background": "", "description": "$\\text{Coke}$ 是一个精明的小商人。这次他想大胆地做一次星际贸易。于是他选定了银河贸易交通局所给定的一条贸易路线，从地球出发，依次经过 $Star_1,Star_2,\\cdots,Star_N$ 。贸易路线在 $Star_N$ 结束（$\\text{Coke}$ 最后要在 $Star_N$ 上观光旅游）。\n\n银河系中各个星球实行计划经济。在一个星球上出售商品，必须获得那个星球的许可证。$\\text{Coke}$ 手中的许可证允许他在 $Star_i$ 上出售指定配额量 $A_i (1\\leq A_i\\leq100)$ 吨的商品(而且既不多也不能少，当然他可以不在 $Star_i$；上出售任何商品)，出售后能够获得 $B_i(0 \\leq B_i \\leq 50000)$ 的收入。由于 $\\text{Coke}$ 的私人飞船载重有限，这个精明的小商人不得不好好计划一下他应该向哪些星球出售商品。\n\n飞船采用反物质推进系统行驶，需要反物质燃料。反物质燃料不是用来维持平常飞行的(宇宙间没有阻力)，而是用于飞船从星球出发时加速以及飞船到达星球时减速所需的消耗。每次加速和减速各消耗一个单位的反物质燃料。\n\n另外，作如此长距离的飞行，飞船显然要在中途停靠并在某些星球上补充反物质燃料以及对飞船定期进行一些维护(维护只能在星球上进行)。由于各星球之间科技发展水平不等，在各个星球上反物质燃料的售价以及维护飞船的费用是不同的。\n\n此外，银河贸易交通局正在举办小商人贸易竞赛，对于贸易额(即总贸易收入)得到冠军的商人有丰厚的奖赏，因此 $\\text{Coke}$ 决定不惜血本，要使自己的贸易额达到最大。当然，在贸易额最大的同时，作为一个商人，他还是希望净利润尽可能大(净利润=贸易额-燃料费用-维护费用)。\n\n假设从地球出发时飞船刚刚维护过并装满了燃料，并且飞船每次停靠一个星球出售商品或补充反物质燃料或在终点站观光旅游时就会在那里做一次维护。$\\text{Coke}$ 希望你给他制定一个方案满足他的要求。", "inputFormat": "从文件 input.txt 中读入数据，文件的第 $1$ 行为 $4$ 个正整数 $N,M,R,L_0$。\n\n$N(1 \\le N \\le 2000)$ 表示 Coke 这次要行经的星球数。$M(1 \\le M \\le 2000)$ 表示飞船最大的载重量，$R(0 \\le R \\le 10000000)$ 表示飞船最多能携带的燃料数。$L_0(1 \\le L_0 \\le 100)$ 表示飞船不做维护所能飞行的最大距离。\n\n文件的第 $2 \\cdots N+1$ 行是对每个星球的描述。其中第 $i+1$ 行有 $5$ 个非负整数 $A_i,B_i,L_i,P_i,F_i$，$L_i(1 \\le L_i \\le 100)$ 表示从地球依次经 $Star_1,Star_2,\\cdots,Star_{i-1}$ 最后到达 $Star_i$ 的距离。$P_i(0 \\le P_i \\le 1000)$ 为星球 $Star_i$ 上一个单位反物质的价格，若 $P_i$ 为 $0$ ，则说明这个星球还没有制造反物质的技术。$F_i(0 \\le F_i \\le 10000)$ 表示飞船在 $Star_i$ 上做维护所需要的费用。\n\n假设输入数据满足：对于 $i < j$ 一定有 $L_i < L_j$，并使得只有一种获得最大贸易额的方法。", "outputFormat": "如果可以找到这样的方案，那么输出文件 output.txt 中包含两个整数 $X$ 和 $Y$。$X$ 表示贸易额，$Y$ 表示净利润并且两个数字之间用一个空格隔开。如果不能完成这次星际贸易，那么输出文件 output.txt 中包含 “Poor Coke!”（不包括引号）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2318", "type": "P", "difficulty": 4, "samples": [["3 8 \r\n1\r\n1\r\n2\r\n3\r\n4\r\n2\r\n5\r\n4\r\n", "1"]], "limits": {"time": [1000, 1000, 1000, 3000, 4000, 5000, 5000, 5000, 5000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2005", "各省省选", "离散化", "湖南", "哈希 hashing"], "title": "[HNOI2005] 虚拟内存", "background": "", "description": "操作系统中一种重要的存储管理技术就是虚拟内存技术。操作系统中允许进程同时运行，也就是并行。每个进程都有其相对独立的数据块（进程运行的过程中将对其进行读写操作）。理想的情况下，这些数据块都应该存放在内存中，这样才能实现高效的读写操作。但事实上，内存的容量有限，每个进程只能把一部分数据放在内存中，为了解决这个矛盾，提出了虚拟内存技术。\n\n虚拟内存技术的基本原理是：对进程而言，内存空间是无限大的，进程可以随意地读写数据，而对操作系统内部而言，利用外存来模拟扩充的内存空间，进程要求访问某个内存单元时，交由操作系统处理，操作系统首先在内存中查找该单元是否存在，如果存在，查找成功，否则转入外存查找（一定存在于外存中）。\n\n就存储介质的物理性质而言，内存的访问速度相对于外存要快得多，因此对于每个进程来说操作系统应该把那些访问次数较多的数据存放在内存中，而把那些访问次数很少的数据放在外存中。如何选择内存中暂留的数据是一个很值得研究的问题，下面介绍一个内存管理中比较常用的算法：\n\n内存中的数据以页为基本存储单位，进程的读写操作都针对页来进行。实际内存空间被分割成 $n$ 页，虚拟内存空间的页数往往要多得多。某一时刻，进程需要访问虚存编号为 $P$ 的页，该算法的执行步骤如下：\n\n- a. 首先在内存中查找，如果该页位于内存中，查找成功，转 d，否则继续下面的操作；\n\n- b. 寻找内存中是否存在空页（即没有装载任何数据页的页面），若有，则从外存中读入要查找页，并将该页送至内存中的空页进行存储，然后转 d，否则继续下面的操作；\n\n- c. 在内存中寻找一个访问次数最少的页面（如果存在多个页面的访问次数同时为最少，则选取最早读入数据进入内存的那个页面），从外存中读入要查找页，替换该页；\n\n- d. 结束。\n\n所谓访问次数是指从当前页面进入内存到该时刻被访问的次数，如果该页面以前进入过内存并被其它页面替换，那么前面的访问次数不应计入这个时刻的访问次数中。\n\n你的任务是设计一个程序实现上述算法。\n\n测试数据将会提供 $m$ 条读写内存的命令，每条命题提供要求访问的虚拟内存页的编号 $P$ 。你的程序要求能够模拟整个 $m$ 条命令的全部执行过程，所有的命令是按照输入的先后执行的，最开始的时候内存中的 $n$ 页全为空。", "inputFormat": "输入共 $m+1$ 行，第 $1$ 行为 $n (n \\le 10^4)$ 和 $m (m \\le 10^6)$ ，分别表示内存页数和读写内存命令条数。接下来有 $m$ 行，其中第 $i+1$ 行有一个正整数 $P_i (P_i \\le 10^9)$ ，表示第 $i$ 条读写内存命令需要访问的虚拟内存页的编号。", "outputFormat": "输出中仅包含一个正整数，表示在整个模拟过程中，在内存中直接查找成功的次数（即上面的算法只执行步骤 a 的次数）。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] Virtual Memory", "background": "# Description\n\nVirtual memory is an important storage management technique in operating systems. Operating systems allow processes to run at the same time, i.e., in parallel. Each process has its own relatively independent block of data (which is read and written during execution). Ideally, all these data blocks should be in memory to support efficient read and write operations. In reality, memory capacity is limited, and each process can only keep part of its data in memory. To address this, virtual memory was introduced.\n\nThe basic idea of virtual memory is: from the process’s point of view, the memory space is unlimited, and the process can read and write data freely. Internally, the OS uses external storage to simulate an expanded memory space. When a process requests access to some memory unit, the OS handles it: it first checks whether the unit exists in memory. If it is found, the lookup succeeds; otherwise, it switches to external storage to find it (it certainly exists there).\n\nSince memory is much faster than external storage, the OS should keep frequently accessed data in memory and place infrequently accessed data on external storage. How to choose which data remains in memory is worth studying. Below is a commonly used algorithm in memory management:\n\nData in memory is managed in units of pages, and read/write operations are performed on pages. The physical memory is divided into $n$ pages, while the number of pages in virtual memory is usually much larger. At some moment, when a process needs to access the virtual page with number $P$, the algorithm proceeds as follows:\n\na. First, look it up in memory. If the page is in memory, the lookup succeeds; go to d. Otherwise, continue with the steps below.\n\nb. Check whether there is a free page frame in memory (i.e., a frame that does not store any data page). If there is, read the requested page from external storage and place it into the free frame in memory, then go to d. Otherwise, continue with the next step.\n\nc. In memory, find a page with the least number of accesses (if multiple pages tie for the minimum, choose the one that was loaded into memory the earliest), then read the requested page from external storage and replace that page.\n\nd. End.\n\nThe access count of a page is the number of times it has been accessed since it was loaded into memory this time. If the page had been in memory before and was evicted, its previous access count must not be counted for the current stay.\n\nYour task is to implement the above algorithm.\n\nThe testdata will provide $m$ memory access commands. Each command gives the virtual page number $P$ to be accessed. Your program must simulate the entire execution of all $m$ commands in input order. Initially, all $n$ memory pages are empty.", "description": "Virtual memory is an important storage management technique in operating systems. Operating systems allow processes to run at the same time, i.e., in parallel. Each process has its own relatively independent block of data (which is read and written during execution). Ideally, all these data blocks should be in memory to support efficient read and write operations. In reality, memory capacity is limited, and each process can only keep part of its data in memory. To address this, virtual memory was introduced.\n\nThe basic idea of virtual memory is: from the process’s point of view, the memory space is unlimited, and the process can read and write data freely. Internally, the OS uses external storage to simulate an expanded memory space. When a process requests access to some memory unit, the OS handles it: it first checks whether the unit exists in memory. If it is found, the lookup succeeds; otherwise, it switches to external storage to find it (it certainly exists there).\n\nSince memory is much faster than external storage, the OS should keep frequently accessed data in memory and place infrequently accessed data on external storage. How to choose which data remains in memory is worth studying. Below is a commonly used algorithm in memory management:\n\nData in memory is managed in units of pages, and read/write operations are performed on pages. The physical memory is divided into $n$ pages, while the number of pages in virtual memory is usually much larger. At some moment, when a process needs to access the virtual page with number $P$, the algorithm proceeds as follows:\n\na. First, look it up in memory. If the page is in memory, the lookup succeeds; go to d. Otherwise, continue with the steps below.\n\nb. Check whether there is a free page frame in memory (i.e., a frame that does not store any data page). If there is, read the requested page from external storage and place it into the free frame in memory, then go to d. Otherwise, continue with the next step.\n\nc. In memory, find a page with the least number of accesses (if multiple pages tie for the minimum, choose the one that was loaded into memory the earliest), then read the requested page from external storage and replace that page.\n\nd. End.\n\nThe access count of a page is the number of times it has been accessed since it was loaded into memory this time. If the page had been in memory before and was evicted, its previous access count must not be counted for the current stay.\n\nYour task is to implement the above algorithm.\n\nThe testdata will provide $m$ memory access commands. Each command gives the virtual page number $P$ to be accessed. Your program must simulate the entire execution of all $m$ commands in input order. Initially, all $n$ memory pages are empty.\n\n# Description", "inputFormat": "There are $m + 1$ lines of input.  \nThe first line contains $n$ and $m$ ($n \\le 10000$, $m \\le 1000000$), the number of memory page frames and the number of memory access commands, respectively.  \nEach of the next $m$ lines contains a positive integer $P_i$ ($P_i \\le 10^9$), the virtual page number to be accessed by the $i$-th command (the $(i + 1)$-th line).", "outputFormat": "Output a single integer: the number of times the page was found directly in memory during the simulation (i.e., the number of requests for which the algorithm executed only step a).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 虚拟内存", "background": "", "description": "操作系统中一种重要的存储管理技术就是虚拟内存技术。操作系统中允许进程同时运行，也就是并行。每个进程都有其相对独立的数据块（进程运行的过程中将对其进行读写操作）。理想的情况下，这些数据块都应该存放在内存中，这样才能实现高效的读写操作。但事实上，内存的容量有限，每个进程只能把一部分数据放在内存中，为了解决这个矛盾，提出了虚拟内存技术。\n\n虚拟内存技术的基本原理是：对进程而言，内存空间是无限大的，进程可以随意地读写数据，而对操作系统内部而言，利用外存来模拟扩充的内存空间，进程要求访问某个内存单元时，交由操作系统处理，操作系统首先在内存中查找该单元是否存在，如果存在，查找成功，否则转入外存查找（一定存在于外存中）。\n\n就存储介质的物理性质而言，内存的访问速度相对于外存要快得多，因此对于每个进程来说操作系统应该把那些访问次数较多的数据存放在内存中，而把那些访问次数很少的数据放在外存中。如何选择内存中暂留的数据是一个很值得研究的问题，下面介绍一个内存管理中比较常用的算法：\n\n内存中的数据以页为基本存储单位，进程的读写操作都针对页来进行。实际内存空间被分割成 $n$ 页，虚拟内存空间的页数往往要多得多。某一时刻，进程需要访问虚存编号为 $P$ 的页，该算法的执行步骤如下：\n\n- a. 首先在内存中查找，如果该页位于内存中，查找成功，转 d，否则继续下面的操作；\n\n- b. 寻找内存中是否存在空页（即没有装载任何数据页的页面），若有，则从外存中读入要查找页，并将该页送至内存中的空页进行存储，然后转 d，否则继续下面的操作；\n\n- c. 在内存中寻找一个访问次数最少的页面（如果存在多个页面的访问次数同时为最少，则选取最早读入数据进入内存的那个页面），从外存中读入要查找页，替换该页；\n\n- d. 结束。\n\n所谓访问次数是指从当前页面进入内存到该时刻被访问的次数，如果该页面以前进入过内存并被其它页面替换，那么前面的访问次数不应计入这个时刻的访问次数中。\n\n你的任务是设计一个程序实现上述算法。\n\n测试数据将会提供 $m$ 条读写内存的命令，每条命题提供要求访问的虚拟内存页的编号 $P$ 。你的程序要求能够模拟整个 $m$ 条命令的全部执行过程，所有的命令是按照输入的先后执行的，最开始的时候内存中的 $n$ 页全为空。", "inputFormat": "输入共 $m+1$ 行，第 $1$ 行为 $n (n \\le 10^4)$ 和 $m (m \\le 10^6)$ ，分别表示内存页数和读写内存命令条数。接下来有 $m$ 行，其中第 $i+1$ 行有一个正整数 $P_i (P_i \\le 10^9)$ ，表示第 $i$ 条读写内存命令需要访问的虚拟内存页的编号。", "outputFormat": "输出中仅包含一个正整数，表示在整个模拟过程中，在内存中直接查找成功的次数（即上面的算法只执行步骤 a 的次数）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2319", "type": "P", "difficulty": 4, "samples": [["5 6\n3 2\n2 0\n0 3\n0 4\n3 2\n3 2", "4\n3\n2\n0\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "各省省选", "湖南", "Special Judge", "二分图"], "title": "[HNOI2006] 超级英雄", "background": null, "description": "现在电视台有一种节目叫做超级英雄，大概的流程就是每位选手到台上回答主持人的几个问题，然后根据回答问题的多少获得不同数目的奖品或奖金。主持人问题准备了若干道题目，只有当选手正确回答一道题后，才能进入下一题，否则就被淘汰。为了增加节目的趣味性并适当降低难度，主持人总提供给选手几个“锦囊妙计”，比如求助现场观众，或者去掉若干个错误答案（选择题）等等。\n\n这里，我们把规则稍微改变一下。假设主持人总共有 $m$ 道题，选手有 $n$ 种不同的“锦囊妙计”。\n\n主持人规定，每道题都可以从两种“锦囊妙计”中选择一种，而每种“锦囊妙计”只能用一次。\n\n我们又假设一道题使用了它允许的锦囊妙计后，就一定能正确回答，顺利进入下一题。\n\n现在我来到了节目现场，可是我实在是太笨了，以至于一道题也不会做，每道题只好借助使用“锦囊妙计”来通过。\n\n如果我事先就知道了每道题能够使用哪两种“锦囊妙计”，那么你能告诉我怎样选择才能通过最多的题数吗？", "inputFormat": "输入的第一行是两个正整数 $n,m\\ (1 \\le n,m \\le 1000)$，表示总共有 $n$ 种“锦囊妙计”，编号为 $0\\sim n-1$，总共有 $m$ 个问题。\n\n\n以下的 $m$ 行，每行两个数，分别表示第 $m$ 个问题可以使用的“锦囊妙计”的编号。\n\n**注意：**每种编号的“锦囊妙计”只能使用一次，但同一个问题的两个“锦囊妙计”可能一样。", "outputFormat": "输出的第一行为最多能通过的题数 $p$，接下来 $p$ 行，每行为一个整数，第 $i$ 行表示第 $i$ 题使用的“锦囊妙计”的编号。\n\n\n如果有多种答案，那么任意输出一种，本题使用 Special Judge 评判答案。", "hint": "感谢 @zhouyonglong 提供 Special Judge", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Super Hero", "background": "", "description": "There is a TV show called \"Super Hero\". The general process is: each contestant goes on stage to answer several questions from the host, and receives different amounts of prizes or money based on how many questions are answered correctly. The host prepares several questions, and only when a contestant answers a question correctly can they proceed to the next one; otherwise, they are eliminated. To make the show more entertaining and slightly easier, the host provides contestants with several \"lifelines\", such as asking the audience or removing several wrong options (for multiple-choice questions), etc.\n\nHere, we slightly change the rules. Suppose the host has $m$ questions in total, and the contestant has $n$ different \"lifelines\".\n\nThe host stipulates that for each question, you may choose one from two specified \"lifelines\", and each \"lifeline\" can be used at most once.\n\nWe also assume that once a question uses one of its allowed \"lifelines\", it will definitely be answered correctly, and the contestant proceeds to the next question.\n\nNow I am on the show, but I am so bad that I cannot solve any question on my own, so I have to rely on using a \"lifeline\" for every question.\n\nIf I already know which two \"lifelines\" are available for each question, can you tell me how to choose them to pass as many questions as possible?", "inputFormat": "The first line contains two positive integers $n, m\\ (1 \\le n, m \\le 1000)$, indicating there are $n$ kinds of \"lifelines\" numbered $0 \\sim n-1$, and there are $m$ questions in total.\n\nThe next $m$ lines each contain two integers, indicating the IDs of the two \"lifelines\" available for the $i$-th question.\n\nNote: Each \"lifeline\" ID can be used at most once, but the two \"lifelines\" for the same question may be identical.", "outputFormat": "Output the first line as the maximum number of questions $p$ that can be passed. Then output $p$ lines, where the $i$-th line is the ID of the \"lifeline\" used for the $i$-th question.\n\nIf there are multiple valid answers, output any one of them. This problem uses Special Judge.", "hint": "Thanks to @zhouyonglong for providing the Special Judge.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 超级英雄", "background": null, "description": "现在电视台有一种节目叫做超级英雄，大概的流程就是每位选手到台上回答主持人的几个问题，然后根据回答问题的多少获得不同数目的奖品或奖金。主持人问题准备了若干道题目，只有当选手正确回答一道题后，才能进入下一题，否则就被淘汰。为了增加节目的趣味性并适当降低难度，主持人总提供给选手几个“锦囊妙计”，比如求助现场观众，或者去掉若干个错误答案（选择题）等等。\n\n这里，我们把规则稍微改变一下。假设主持人总共有 $m$ 道题，选手有 $n$ 种不同的“锦囊妙计”。\n\n主持人规定，每道题都可以从两种“锦囊妙计”中选择一种，而每种“锦囊妙计”只能用一次。\n\n我们又假设一道题使用了它允许的锦囊妙计后，就一定能正确回答，顺利进入下一题。\n\n现在我来到了节目现场，可是我实在是太笨了，以至于一道题也不会做，每道题只好借助使用“锦囊妙计”来通过。\n\n如果我事先就知道了每道题能够使用哪两种“锦囊妙计”，那么你能告诉我怎样选择才能通过最多的题数吗？", "inputFormat": "输入的第一行是两个正整数 $n,m\\ (1 \\le n,m \\le 1000)$，表示总共有 $n$ 种“锦囊妙计”，编号为 $0\\sim n-1$，总共有 $m$ 个问题。\n\n\n以下的 $m$ 行，每行两个数，分别表示第 $m$ 个问题可以使用的“锦囊妙计”的编号。\n\n**注意：**每种编号的“锦囊妙计”只能使用一次，但同一个问题的两个“锦囊妙计”可能一样。", "outputFormat": "输出的第一行为最多能通过的题数 $p$，接下来 $p$ 行，每行为一个整数，第 $i$ 行表示第 $i$ 题使用的“锦囊妙计”的编号。\n\n\n如果有多种答案，那么任意输出一种，本题使用 Special Judge 评判答案。", "hint": "感谢 @zhouyonglong 提供 Special Judge", "locale": "zh-CN"}}}
{"pid": "P2320", "type": "P", "difficulty": 4, "samples": [["3\n", "2\n1 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "各省省选", "湖南", "Special Judge", "进制"], "title": "[HNOI2006] 鬼谷子的钱袋", "background": "", "description": "鬼谷子非常聪明，正因为这样，他非常繁忙，经常有各诸侯的特派员前来向他咨询时政。\n\n有一天，他在咸阳游历的时候，朋友告诉他在咸阳最大的拍卖行（聚宝商行）将要举行一场拍卖会，其中有一件宝物引起了他极大的兴趣，那就是无字天书。\n\n但是，他的行程安排得很满，他已经买好了去邯郸的长途马车票，不巧的是出发时间是在拍卖会快要结束的时候。于是，他决定事先做好准备，将自己的金币数好并用一个个的小钱袋装好，以便在他现有金币的支付能力下，任何数目的金币他都能用这些封闭好的小钱的组合来付账。\n\n鬼谷子也是一个非常节俭的人，他想方设法使自己在满足上述要求的前提下，所用的钱袋数最少，并且不有两个钱袋装有相同的大于 $1$ 的金币数。假设他有 $m$ 个金币，你能猜到他会用多少个钱袋，并且每个钱袋装多少个金币吗？", "inputFormat": "包含一个整数，表示鬼谷子现有的总的金币数目 $m$。其中，$1 \\le m \\le {10}^9$。", "outputFormat": "两行，第一行一个整数 $h$，表示所用钱袋个数。\n\n第二行表示每个钱袋所装的金币个数，由小到大输出，空格隔开。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Guiguzi's Money Bags", "background": "", "description": "Guiguzi is very clever. Because of this, he is very busy, and envoys from various feudal lords often come to consult him on current affairs.\n\nOne day, while he was traveling in Xianyang, a friend told him that the largest auction house in Xianyang (Jubao Trading House) was about to hold an auction. One of the treasures caught his great interest: the Wordless Heavenly Book.\n\nHowever, his schedule was very tight. He had already bought a long-distance carriage ticket to Handan, and unfortunately the departure time was just as the auction would be ending. Therefore, he decided to prepare in advance: count his gold coins and seal them into small money bags, so that within the limit of his current total coins, he could pay any number of coins by selecting a combination of these sealed small bags.\n\nGuiguzi is also very frugal. He tries to minimize the number of money bags while satisfying the above requirement, and no two bags contain the same number of coins greater than $1$. Suppose he has $m$ gold coins. Can you figure out how many money bags he will use, and how many coins each bag will contain?", "inputFormat": "Contains one integer, representing Guiguzi’s total number of gold coins $m$. Where $1 \\le m \\le 10^9$.", "outputFormat": "Two lines. The first line contains an integer $h$, the number of money bags used.\n\nThe second line contains the number of coins in each bag, output in increasing order and separated by spaces.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 鬼谷子的钱袋", "background": "", "description": "鬼谷子非常聪明，正因为这样，他非常繁忙，经常有各诸侯的特派员前来向他咨询时政。\n\n有一天，他在咸阳游历的时候，朋友告诉他在咸阳最大的拍卖行（聚宝商行）将要举行一场拍卖会，其中有一件宝物引起了他极大的兴趣，那就是无字天书。\n\n但是，他的行程安排得很满，他已经买好了去邯郸的长途马车票，不巧的是出发时间是在拍卖会快要结束的时候。于是，他决定事先做好准备，将自己的金币数好并用一个个的小钱袋装好，以便在他现有金币的支付能力下，任何数目的金币他都能用这些封闭好的小钱的组合来付账。\n\n鬼谷子也是一个非常节俭的人，他想方设法使自己在满足上述要求的前提下，所用的钱袋数最少，并且不有两个钱袋装有相同的大于 $1$ 的金币数。假设他有 $m$ 个金币，你能猜到他会用多少个钱袋，并且每个钱袋装多少个金币吗？", "inputFormat": "包含一个整数，表示鬼谷子现有的总的金币数目 $m$。其中，$1 \\le m \\le {10}^9$。", "outputFormat": "两行，第一行一个整数 $h$，表示所用钱袋个数。\n\n第二行表示每个钱袋所装的金币个数，由小到大输出，空格隔开。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2321", "type": "P", "difficulty": 6, "samples": [["4\n1  1\n0\n0  0\n2  1\n0\n1  1\n0  0\n3  1\n0\n1  1\n2  2\n0  0\n4  1\n0\n1  1\n2  2\n3  3\n0  0", "3"], ["3\n1  1\n0\n0  0\n3  1\n0\n0  1\n2  0\n1  2\n9  1\n0\n0  1\n2  3\n4  5\n6  7\n8  0\n1  2\n3  4\n5  6\n7  8", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2006", "各省省选", "湖南", "广度优先搜索 BFS", "Tarjan"], "title": "[HNOI2006] 潘多拉的宝盒", "background": null, "description": "传说中，有个神奇的潘多拉宝盒。如果谁能打开，便可以拥有幸福、财富、爱情。可是知道真的打开，才发现与之相岁的还有灾难、不幸。\n\n其实，在潘多拉制造这个宝盒的时候，设置了一些咒语来封锁住灾难与不幸。然而，直到科技高度发达的今天，人们才有希望弄懂这些咒语。所以说，上千年来，人们只得忍受着各种各样的疾病和死亡的痛苦。\n\n然而，人类的命运从此改变了。经过数十年的研究，NOI 组织在最近终于弄清楚了潘多拉咒语的原理。\n\n咒语是由一个叫做咒语机的机器产生的。用现在的名词来解释，咒语机其实就是一个二进制产生器，它产生的一个二进制字符串（这个字符串叫做咒语源）经加密后就形成了咒语。二进制产生器的结构是这样的：\n\n它由 $n$ 个元件组成，不妨设这 $n$ 个元件的标号为 $0$ 到 $n-1$。在每个时刻，都有且仅有一个信号，它停留在某个元件上。一个信号就是一个二进制字符串。最开始，有一个空串信号停留在元件 $0$ 上。在某个时刻，如果有一个信号 $s$ 停留在元件 $i$ 上，那么，这时元件 $i$ 可以将信号后面加一个 $0$，然后把信号传给元件 $p_{i,0}$，也可以将信号后面加一个 $1$，然后传给元件 $p_{i,1}$。也就是说，下一个时刻有可能是一个信号 $S0$（表示字串 $S$ 后面加一个 $0$ 形成的子串）停留在元件 $p_{i,0}$ 上，也可能是有一个信号 $S1$ 停留在元件 $p_{i,1}$ 上。\n\n有的元件可以将停留在它上面的信号输出，而输出的信号就成为了咒语源，这样的元件叫做咒语源输出元。\n\n不难发现，有些咒语源是可能由一个咒语机产生的，而另一些咒语源则不行。\n\n例如，下图的咒语机能产生 $1,11,111,1111,\\dots$ 等咒语源，但是不能产生 $0,10,101$ 等咒语源。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jix6w0lh.png)\n\n在这个盒子上，有 $k$ 个咒语机，不放将这些咒语机从 $0$ 到 $k-1$ 标号。可能有这种情况，一个咒语机 $i$ 能够产生的咒语源，咒语机 $j$ 都能产生。这时，我们称咒语机 $j$ 是咒语机 $i$ 的升级。而衡量这个例子的复杂程度的一种办法是：看这个盒子上升级次数最多的一个咒语机。即：找到一个最长的升级序列 $a_1,a_2,\\dots,a_t$。该升级序列满足：序列中任意两个咒语机的标号都不同，且都是 $0$ 到 $k-1$（包含 $0$ 和 $k-1$）之间的整数，且咒语机 $a_2$ 是咒语机 $a_1$ 的升级，咒语机 $a_3$ 是咒语机 $a_2$ 的升级，……，咒语机 $a_t$ 是咒语机 $a_{t-1}$ 的升级。\n\n你想远离灾难与不幸吗？你想从今以后沐浴幸福的阳光吗？请打开你的潘多拉之盒吧。不过在拱形它之前，你得先计算一下宝盒上最长的升级序列。", "inputFormat": "第一行是一个正整数 $k(1 \\le k \\le 50)$ 表示宝盒上咒语机的个数。\n\n接下来分为 $k$ 个部分：\n\n每个部分第一行是两个正整数 $n,m(1 \\le n,m \\le 50)$，分别表示该咒语机中元件的个数、咒语源输出元的个数。\n\n接下来一行 $m$ 个数，表示 $m$ 个咒语源输出元的标号。\n\n接下来 $n$ 行，第 $i$ 行有两个在 $0$ 到 $n-1$ 之间的正整数 $p_{i,0},p_{i,1}$。", "outputFormat": "输出一行一个数$t$，表示最长升级序列的长度。", "hint": "对于样例 $1$ 的宝盒，有 $4$ 个咒语机，不难发现，第 $i(i=0,1,2,3)$ 个咒语机产生的所有咒语源的长度都是 $(i+1)$ 的倍数。\n\n对于样例 $2$ 的宝盒，有 $3$ 个咒语机，第 $0$ 个能产生所有的咒语源，第 $1$ 个能产生所有化成二进制后是 $3$ 的倍数的咒语源，第 $2$ 个能产生所有化成二进制数后是 $9$ 的倍数的咒语源。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Pandora's Box", "background": "", "description": "Legend has it that there is a magical Pandora's box. Whoever opens it will gain happiness, wealth, and love. However, only after truly opening it did people realize that disaster and misfortune come along with it.\n\nIn fact, when Pandora made this box, she set up some spells to seal away disaster and misfortune. Yet, only in today’s highly advanced scientific age do people have hope of understanding these spells. So for thousands of years, people had no choice but to endure various diseases and the pain of death.\n\nHowever, humanity’s fate has since changed. After decades of research, the NOI organization has finally uncovered the principles behind Pandora’s spells.\n\nThe spells are produced by a machine called a spell machine. In modern terms, a spell machine is essentially a binary generator. The binary string it generates (this string is called a spell source), once encrypted, becomes a spell. The binary generator has the following structure:\n\nIt consists of $n$ components, numbered from $0$ to $n - 1$. At any moment, there is exactly one signal, and it stays at some component. A signal is a binary string. Initially, an empty-string signal stays at component $0$. At some moment, if a signal $s$ is staying at component $i$, then component $i$ may append a 0 to the end of the signal and pass it to component $p_{i,0}$, or append a 1 and pass it to component $p_{i,1}$. That is, at the next moment, either a signal S0 (meaning the string S with a 0 appended) stays at component $p_{i,0}$, or a signal S1 stays at component $p_{i,1}$.\n\nSome components can output the signal staying on them, and the output signal becomes a spell source. Such components are called spell-source output units.\n\nIt is not hard to see that some spell sources can be produced by a given spell machine, while others cannot.\n\nFor example, the spell machine in the figure below can produce spell sources such as 1, 11, 111, 1111, …, but cannot produce 0, 10, 101, etc.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jix6w0lh.png)\n\nOn this box, there are $k$ spell machines, labeled from $0$ to $k - 1$. It may happen that every spell source producible by spell machine $i$ can also be produced by spell machine $j$. In that case, we say machine $j$ is an upgrade of machine $i$. One way to measure the complexity of this instance is to consider the maximum number of upgrades of any spell machine on the box. That is, find a longest upgrade sequence $a_1, a_2, \\dots, a_t$. This upgrade sequence must satisfy: all machine indices in the sequence are distinct, each is an integer between $0$ and $k - 1$ (inclusive), machine $a_2$ is an upgrade of machine $a_1$, machine $a_3$ is an upgrade of machine $a_2$, …, and machine $a_t$ is an upgrade of machine $a_{t-1}$.\n\nDo you want to stay away from disaster and misfortune? Do you want to bask in the sunshine of happiness from now on? Please open your Pandora’s box. But before opening it, you need to compute the longest upgrade sequence on the box.", "inputFormat": "The first line contains a positive integer $k$ $(1 \\le k \\le 50)$, the number of spell machines on the box.\n\nThen follow $k$ parts, one for each machine:\n\n- The first line of each part contains two positive integers $n, m$ $(1 \\le n, m \\le 50)$, the number of components in this spell machine and the number of spell-source output units, respectively.\n- The next line contains $m$ integers, the indices of the $m$ spell-source output units.\n- The next $n$ lines describe transitions. In the $i$-th line, there are two integers $p_{i,0}, p_{i,1}$ between $0$ and $n - 1$ (inclusive).", "outputFormat": "Output one line with a single integer $t$, the length of the longest upgrade sequence.", "hint": "For the first sample’s box, there are $4$ spell machines. It is not hard to see that for the $i$-th ($i = 0, 1, 2, 3$) spell machine, all producible spell sources have lengths that are multiples of $(i + 1)$.\n\nFor the second sample’s box, there are $3$ spell machines: machine $0$ can produce all spell sources; machine $1$ can produce all spell sources whose values, when interpreted as binary, are multiples of $3$; machine $2$ can produce all spell sources whose values, when interpreted as binary, are multiples of $9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 潘多拉的宝盒", "background": null, "description": "传说中，有个神奇的潘多拉宝盒。如果谁能打开，便可以拥有幸福、财富、爱情。可是知道真的打开，才发现与之相岁的还有灾难、不幸。\n\n其实，在潘多拉制造这个宝盒的时候，设置了一些咒语来封锁住灾难与不幸。然而，直到科技高度发达的今天，人们才有希望弄懂这些咒语。所以说，上千年来，人们只得忍受着各种各样的疾病和死亡的痛苦。\n\n然而，人类的命运从此改变了。经过数十年的研究，NOI 组织在最近终于弄清楚了潘多拉咒语的原理。\n\n咒语是由一个叫做咒语机的机器产生的。用现在的名词来解释，咒语机其实就是一个二进制产生器，它产生的一个二进制字符串（这个字符串叫做咒语源）经加密后就形成了咒语。二进制产生器的结构是这样的：\n\n它由 $n$ 个元件组成，不妨设这 $n$ 个元件的标号为 $0$ 到 $n-1$。在每个时刻，都有且仅有一个信号，它停留在某个元件上。一个信号就是一个二进制字符串。最开始，有一个空串信号停留在元件 $0$ 上。在某个时刻，如果有一个信号 $s$ 停留在元件 $i$ 上，那么，这时元件 $i$ 可以将信号后面加一个 $0$，然后把信号传给元件 $p_{i,0}$，也可以将信号后面加一个 $1$，然后传给元件 $p_{i,1}$。也就是说，下一个时刻有可能是一个信号 $S0$（表示字串 $S$ 后面加一个 $0$ 形成的子串）停留在元件 $p_{i,0}$ 上，也可能是有一个信号 $S1$ 停留在元件 $p_{i,1}$ 上。\n\n有的元件可以将停留在它上面的信号输出，而输出的信号就成为了咒语源，这样的元件叫做咒语源输出元。\n\n不难发现，有些咒语源是可能由一个咒语机产生的，而另一些咒语源则不行。\n\n例如，下图的咒语机能产生 $1,11,111,1111,\\dots$ 等咒语源，但是不能产生 $0,10,101$ 等咒语源。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jix6w0lh.png)\n\n在这个盒子上，有 $k$ 个咒语机，不放将这些咒语机从 $0$ 到 $k-1$ 标号。可能有这种情况，一个咒语机 $i$ 能够产生的咒语源，咒语机 $j$ 都能产生。这时，我们称咒语机 $j$ 是咒语机 $i$ 的升级。而衡量这个例子的复杂程度的一种办法是：看这个盒子上升级次数最多的一个咒语机。即：找到一个最长的升级序列 $a_1,a_2,\\dots,a_t$。该升级序列满足：序列中任意两个咒语机的标号都不同，且都是 $0$ 到 $k-1$（包含 $0$ 和 $k-1$）之间的整数，且咒语机 $a_2$ 是咒语机 $a_1$ 的升级，咒语机 $a_3$ 是咒语机 $a_2$ 的升级，……，咒语机 $a_t$ 是咒语机 $a_{t-1}$ 的升级。\n\n你想远离灾难与不幸吗？你想从今以后沐浴幸福的阳光吗？请打开你的潘多拉之盒吧。不过在拱形它之前，你得先计算一下宝盒上最长的升级序列。", "inputFormat": "第一行是一个正整数 $k(1 \\le k \\le 50)$ 表示宝盒上咒语机的个数。\n\n接下来分为 $k$ 个部分：\n\n每个部分第一行是两个正整数 $n,m(1 \\le n,m \\le 50)$，分别表示该咒语机中元件的个数、咒语源输出元的个数。\n\n接下来一行 $m$ 个数，表示 $m$ 个咒语源输出元的标号。\n\n接下来 $n$ 行，第 $i$ 行有两个在 $0$ 到 $n-1$ 之间的正整数 $p_{i,0},p_{i,1}$。", "outputFormat": "输出一行一个数$t$，表示最长升级序列的长度。", "hint": "对于样例 $1$ 的宝盒，有 $4$ 个咒语机，不难发现，第 $i(i=0,1,2,3)$ 个咒语机产生的所有咒语源的长度都是 $(i+1)$ 的倍数。\n\n对于样例 $2$ 的宝盒，有 $3$ 个咒语机，第 $0$ 个能产生所有的咒语源，第 $1$ 个能产生所有化成二进制后是 $3$ 的倍数的咒语源，第 $2$ 个能产生所有化成二进制数后是 $9$ 的倍数的咒语源。", "locale": "zh-CN"}}}
{"pid": "P2322", "type": "P", "difficulty": 5, "samples": [["2\r\nABCD\r\nBCDABC", "ABCDABC"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["字符串", "2006", "各省省选", "湖南", "广度优先搜索 BFS", "AC 自动机", "状压 DP"], "title": "[HNOI2006] 最短母串问题", "background": null, "description": "给定 $n$ 个字符串 $(S_1,S_2,\\dots,S_n)$，要求找到一个最短的字符串 $T$，使得这 $n$ 个字符串 $(S_1,S_2,\\dots,S_n)$ 都是 $T$ 的子串。", "inputFormat": "输入文件第一行是一个整数 $n$，表示给定的字符串个数。接下来 $n$ 行，每行有一个全由大写字母组成的字符串。", "outputFormat": "输出文件只有一行，为找到的最短的字符串 $T$。在保证最短的前提下，如果有多个字符串都满足要求，那么必须输出按字典序排列的第一个。", "hint": "对于 $100\\%$ 的数据，$n\\leq 12$，每个字符串的长度不超过 $50$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Shortest Superstring Problem", "background": "", "description": "Given $n$ strings $(S_1, S_2, \\dots, S_n)$, find the shortest string $T$ such that all $n$ strings $(S_1, S_2, \\dots, S_n)$ are substrings of $T$.", "inputFormat": "The first line contains an integer $n$, the number of given strings. The next $n$ lines each contain a string consisting only of uppercase letters.", "outputFormat": "Output a single line containing the shortest string $T$. Among all shortest candidates, if there are multiple strings that satisfy the requirement, output the lexicographically smallest one.", "hint": "For $100\\%$ of the testdata, $n \\leq 12$, and the length of each string does not exceed $50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 最短母串问题", "background": null, "description": "给定 $n$ 个字符串 $(S_1,S_2,\\dots,S_n)$，要求找到一个最短的字符串 $T$，使得这 $n$ 个字符串 $(S_1,S_2,\\dots,S_n)$ 都是 $T$ 的子串。", "inputFormat": "输入文件第一行是一个整数 $n$，表示给定的字符串个数。接下来 $n$ 行，每行有一个全由大写字母组成的字符串。", "outputFormat": "输出文件只有一行，为找到的最短的字符串 $T$。在保证最短的前提下，如果有多个字符串都满足要求，那么必须输出按字典序排列的第一个。", "hint": "对于 $100\\%$ 的数据，$n\\leq 12$，每个字符串的长度不超过 $50$。", "locale": "zh-CN"}}}
{"pid": "P2323", "type": "P", "difficulty": 4, "samples": [["4 2 5 \n1 2 6 5\n1 3 3 1\n2 3 9 4\n2 4 6 1", "6 \n1 1 \n2 1 \n4 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "二分", "并查集", "各省省选", "湖南", "Special Judge", "生成树"], "title": "[HNOI2006] 公路修建问题", "background": null, "description": "OI island 是一个非常漂亮的岛屿，自开发以来，到这儿来旅游的人很多。然而，由于该岛屿刚刚开发不久，所以那里的交通情况还是很糟糕。所以，OIER Association组织成立了，旨在建立 OI island 的交通系统。\n\nOI island 有 $n$ 个旅游景点，不妨将它们从 $1$ 到 $n$ 标号。现在，OIER Association 需要修公路将这些景点连接起来。一条公路连接两个景点。公路有两种类型，不妨称它们为一级公路和二级公路。一级公路上的车速快，但是修路的花费要大一些。\n\nOIER Association 打算修 $n-1$ 条公路将这些景点连接起来（使得任意两个景点之间都会有一条路径）。为了保证公路系统的效率，OIER Association 希望在这 $n-1$ 条公路之中，至少有 $k(0\\le k\\le n-1)$ 条一级公路。OIER Association 也不希望为一条公路花费太多的钱。所以，他们希望在满足上述条件的情况下，花费最多的一条公路的花费尽可能的少。而你的任务就是，在给定一些可能修建的公路的情况下，选择 $n-1$ 条公路，满足上面的条件。", "inputFormat": "文件第一行有三个数 $n(1 \\le n \\le 10000)$、$k(0 \\le k \\le n-1)$、$m(n-1 \\le m \\le 20000)$，这些数之间用空格分开。$n$ 和 $k$ 如前所述，$m$ 表示有 $m$ 对景点之间可以修公路。\n\n以下的 $m-1$ 行，每一行有 $4$ 个正整数 $a,b,c_1,c_2$，（$1 \\le a,b \\le n,a \\ne b,1 \\le c_2 \\le c_1 \\le 30000$），表示在景点 $a$ 与 $b$ 之间可以修公路，如果修一级公路，则需要 $c_1$ 的花费，如果修二级公路，则需要 $c_2$ 的花费。\n\n**在实际评测时，将只会有 $m-1$ 行公路**", "outputFormat": "输出第一行有一个数据，表示花费最大的公路的花费。\n\n接下来的 $n-1$ 行，每行有两个正整数 $t$ 和 $p$，$t$ 和 $p$ 表示在输入的第 $t$ 对（按照输入的顺序，从 $1$ 开始标号）景点之间修建 $p$ 级公路。\n\n$n-1$ 条公路的输出必须按 $t$ 的大小递增，如果有多个方案使花费最大的公路花费最小，那么输出任意一个都可以。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Highway Construction Problem", "background": "", "description": "OI island is a very beautiful island, and since its development, many people have come to travel here. However, because the island has only recently been developed, its transportation system is still poor. Therefore, the OIER Association was founded to build the transportation system of OI island.\n\nOI island has $n$ tourist attractions, labeled from $1$ to $n$. Now, the OIER Association needs to build roads to connect these attractions. A road connects two attractions. There are two types of roads, which we call Type 1 roads and Type 2 roads. Cars travel faster on Type 1 roads, but they cost more to build.\n\nThe OIER Association plans to build $n-1$ roads to connect all attractions (so that there is a path between any two attractions). To ensure the efficiency of the road system, the OIER Association wants at least $k$ ($0 \\le k \\le n-1$) of these $n-1$ roads to be Type 1 roads. The OIER Association also does not want any single road to be too expensive. Therefore, under the above conditions, they want the cost of the most expensive road to be as small as possible. Your task is, given some candidate roads, to choose $n-1$ roads that satisfy the above conditions.", "inputFormat": "- The first line contains three numbers $n$ ($1 \\le n \\le 10000$), $k$ ($0 \\le k \\le n-1$), and $m$ ($n-1 \\le m \\le 20000$), separated by spaces. Here $n$ and $k$ are as described above, and $m$ means there are $m$ pairs of attractions between which a road can be built.\n- The following $m-1$ lines each contain four positive integers $a, b, c_1, c_2$ ($1 \\le a, b \\le n$, $a \\ne b$, $1 \\le c_2 \\le c_1 \\le 30000$), indicating that a road can be built between attractions $a$ and $b$. If a Type 1 road is built, the cost is $c_1$; if a Type 2 road is built, the cost is $c_2$.\n- In actual judging, there will be only $m-1$ road entries.", "outputFormat": "- The first line contains a single number, which is the cost of the most expensive road among the chosen roads.\n- The next $n-1$ lines each contain two positive integers $t$ and $p$. Here $t$ and $p$ indicate that on the $t$-th pair of attractions in the input (indexed from $1$ in input order), a Type $p$ road is built.\n- The $n-1$ lines must be output in increasing order of $t$. If multiple solutions achieve the minimal value of the maximum road cost, output any one of them.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 公路修建问题", "background": null, "description": "OI island 是一个非常漂亮的岛屿，自开发以来，到这儿来旅游的人很多。然而，由于该岛屿刚刚开发不久，所以那里的交通情况还是很糟糕。所以，OIER Association组织成立了，旨在建立 OI island 的交通系统。\n\nOI island 有 $n$ 个旅游景点，不妨将它们从 $1$ 到 $n$ 标号。现在，OIER Association 需要修公路将这些景点连接起来。一条公路连接两个景点。公路有两种类型，不妨称它们为一级公路和二级公路。一级公路上的车速快，但是修路的花费要大一些。\n\nOIER Association 打算修 $n-1$ 条公路将这些景点连接起来（使得任意两个景点之间都会有一条路径）。为了保证公路系统的效率，OIER Association 希望在这 $n-1$ 条公路之中，至少有 $k(0\\le k\\le n-1)$ 条一级公路。OIER Association 也不希望为一条公路花费太多的钱。所以，他们希望在满足上述条件的情况下，花费最多的一条公路的花费尽可能的少。而你的任务就是，在给定一些可能修建的公路的情况下，选择 $n-1$ 条公路，满足上面的条件。", "inputFormat": "文件第一行有三个数 $n(1 \\le n \\le 10000)$、$k(0 \\le k \\le n-1)$、$m(n-1 \\le m \\le 20000)$，这些数之间用空格分开。$n$ 和 $k$ 如前所述，$m$ 表示有 $m$ 对景点之间可以修公路。\n\n以下的 $m-1$ 行，每一行有 $4$ 个正整数 $a,b,c_1,c_2$，（$1 \\le a,b \\le n,a \\ne b,1 \\le c_2 \\le c_1 \\le 30000$），表示在景点 $a$ 与 $b$ 之间可以修公路，如果修一级公路，则需要 $c_1$ 的花费，如果修二级公路，则需要 $c_2$ 的花费。\n\n**在实际评测时，将只会有 $m-1$ 行公路**", "outputFormat": "输出第一行有一个数据，表示花费最大的公路的花费。\n\n接下来的 $n-1$ 行，每行有两个正整数 $t$ 和 $p$，$t$ 和 $p$ 表示在输入的第 $t$ 对（按照输入的顺序，从 $1$ 开始标号）景点之间修建 $p$ 级公路。\n\n$n-1$ 条公路的输出必须按 $t$ 的大小递增，如果有多个方案使花费最大的公路花费最小，那么输出任意一个都可以。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2324", "type": "P", "difficulty": 5, "samples": [["2\n10110\n01*11\n10111\n01001\n00000\n01011\n110*1\n01110\n01010\n00100\n", "7\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "2005", "四川", "各省省选", "广度优先搜索 BFS", "启发式搜索", "启发式迭代加深搜索 IDA*", "A*  算法", "折半搜索 meet in the middle"], "title": "[SCOI2005] 骑士精神", "background": null, "description": "在一个 $5\\times 5$ 的棋盘上有 $12$ 个白色的骑士和 $12$ 个黑色的骑士，且有一个空位。在任何时候一个骑士都能按照骑士的走法（它可以走到和他横坐标相差为 $1$，纵坐标相差为 $2$ 或者横坐标相差为 $2$，纵坐标相差为 $1$ 的格子）移动到空位上。\n\n给定一个初始的棋盘，怎样才能经过移动变成如下目标棋盘\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z44a397y.png)\n\n为了体现出骑士精神，他们必须以最小的步数完成任务。", "inputFormat": "第一行有一个正整数 $T$（$T \\le 10$），表示一共有 $T$ 组数据。\n\n接下来有 $T$ 个 $5 \\times 5$ 的矩阵，`0` 表示白色骑士，`1` 表示黑色骑士，`*` 表示空位。两组数据之间没有空行。", "outputFormat": "对于每组数据都输出一行。如果能在 $15$ 步以内（包括 $15$ 步）到达目标状态，则输出步数，否则输出 `-1`。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1390.png)", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Knight's Spirit", "background": "", "description": "On a $5 \\times 5$ board there are $12$ white knights and $12$ black knights, plus one empty cell. At any time, a knight may move into the empty cell following the knight's move (it can move to a cell where the x-coordinate differs by $1$ and the y-coordinate differs by $2$, or the x-coordinate differs by $2$ and the y-coordinate differs by $1$).\n\nGiven an initial board, how can it be transformed, via moves, into the following target board:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z44a397y.png)\n\nTo embody the \"knight's spirit\", they must finish in the minimal number of moves.", "inputFormat": "The first line contains a positive integer $T$ ($T \\le 10$), indicating there are $T$ test cases.\n\nThen follow $T$ matrices of size $5 \\times 5$, where `0` denotes a white knight, `1` denotes a black knight, and `*` denotes the empty cell. There is no blank line between two test cases.", "outputFormat": "For each test case, output one line. If the target state can be reached within $15$ moves (inclusive), output the minimal number of moves; otherwise, output `-1`.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1390.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 骑士精神", "background": null, "description": "在一个 $5\\times 5$ 的棋盘上有 $12$ 个白色的骑士和 $12$ 个黑色的骑士，且有一个空位。在任何时候一个骑士都能按照骑士的走法（它可以走到和他横坐标相差为 $1$，纵坐标相差为 $2$ 或者横坐标相差为 $2$，纵坐标相差为 $1$ 的格子）移动到空位上。\n\n给定一个初始的棋盘，怎样才能经过移动变成如下目标棋盘\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z44a397y.png)\n\n为了体现出骑士精神，他们必须以最小的步数完成任务。", "inputFormat": "第一行有一个正整数 $T$（$T \\le 10$），表示一共有 $T$ 组数据。\n\n接下来有 $T$ 个 $5 \\times 5$ 的矩阵，`0` 表示白色骑士，`1` 表示黑色骑士，`*` 表示空位。两组数据之间没有空行。", "outputFormat": "对于每组数据都输出一行。如果能在 $15$ 步以内（包括 $15$ 步）到达目标状态，则输出步数，否则输出 `-1`。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1390.png)", "locale": "zh-CN"}}}
{"pid": "P2325", "type": "P", "difficulty": 5, "samples": [["8 2 \n1 2 \n2 3 \n1 8 \n8 7 \n8 6 \n4 6 \n6 5 \n", "3 \n2 1 1 3 3 3 3 2 \n2 1 8 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "2005", "四川", "各省省选", "Special Judge", "深度优先搜索 DFS", "栈"], "title": "[SCOI2005] 王室联邦", "background": null, "description": "“余”人国的国王想重新编制他的国家。他想把他的国家划分成若干个省，每个省都由他们王室联邦的一个成员来管理。\n\n他的国家有 $N$ 个城市，编号为 $1\\ldots N$。\n\n一些城市之间有道路相连，任意两个不同的城市之间有且仅有一条直接或间接的道路。\n\n为了防止管理太过分散，每个省至少要有 $B$ 个城市。\n\n为了能有效的管理，每个省最多只有 $3\\times B$ 个城市。\n\n每个省必须有一个省会，这个省会可以位于省内，也可以在该省外。\n\n但是该省的任意一个城市到达省会所经过的道路上的城市（除了最后一个城市，即该省省会）都必须属于该省。\n\n一个城市可以作为多个省的省会。\n\n聪明的你快帮帮这个国王吧！", "inputFormat": "第一行包含两个数 $N,B$。\n\n接下来 $N－1$ 行，每行描述一条边，包含两个数，即这条边连接的两个城市的编号。", "outputFormat": "如果无法满足国王的要求，输出 $0$。\n\n否则第一行输出数 $K$，表示你给出的划分方案中省的个数。\n\n第二行输出 $N$ 个数，第 $I$ 个数表示编号为 $I$ 的城市属于的省的编号。要求城市属于的省的编号在 $[1,K]$ 范围内。\n\n第三行输出 $K$ 个数，表示这 $K$ 个省的省会的城市编号。\n\n如果有多种方案，你可以输出任意一种。", "hint": "对于 $100\\%$ 的数据，$1\\le B\\leq N\\le 10^3$。\n\n感谢 @[FlierKing](/user/9433) 提供 spj。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Royal Federation", "background": "", "description": "The king of the country of the “Yu” people (Yu) plans to reorganize his nation. He wants to divide the country into several provinces, each governed by a member of their royal federation.\n\nThere are $N$ cities, numbered $1\\ldots N$.\n\nSome cities are connected by roads. Between any two distinct cities, there is exactly one simple path (direct or indirect).\n\nTo avoid overly fragmented management, each province must contain at least $B$ cities.\n\nFor effective governance, each province may contain at most $3\\times B$ cities.\n\nEach province must have a capital. The capital may be located inside the province or outside it.\n\nHowever, for any city in the province, all cities on the path to the capital (except the last city, i.e., the capital itself) must belong to that province.\n\nA city may serve as the capital for multiple provinces.\n\nPlease help the king.", "inputFormat": "The first line contains two integers $N,B$.\n\nThe next $N-1$ lines each describe an edge, with two integers giving the indices of the two cities connected by this road.", "outputFormat": "If it is impossible to satisfy the king’s requirements, output $0$.\n\nOtherwise, on the first line output an integer $K$, the number of provinces in your partition.\n\nOn the second line, output $N$ integers. The $I$-th number is the index of the province to which city $I$ belongs. Each index must be in $[1,K]$.\n\nOn the third line, output $K$ integers, the city indices of the capitals of these $K$ provinces.\n\nIf multiple solutions exist, you may output any of them.", "hint": "For $100\\%$ of the testdata, $1\\le B\\leq N\\le 10^3$.\n\nThanks to @[FlierKing](/user/9433) for providing the spj.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 王室联邦", "background": null, "description": "“余”人国的国王想重新编制他的国家。他想把他的国家划分成若干个省，每个省都由他们王室联邦的一个成员来管理。\n\n他的国家有 $N$ 个城市，编号为 $1\\ldots N$。\n\n一些城市之间有道路相连，任意两个不同的城市之间有且仅有一条直接或间接的道路。\n\n为了防止管理太过分散，每个省至少要有 $B$ 个城市。\n\n为了能有效的管理，每个省最多只有 $3\\times B$ 个城市。\n\n每个省必须有一个省会，这个省会可以位于省内，也可以在该省外。\n\n但是该省的任意一个城市到达省会所经过的道路上的城市（除了最后一个城市，即该省省会）都必须属于该省。\n\n一个城市可以作为多个省的省会。\n\n聪明的你快帮帮这个国王吧！", "inputFormat": "第一行包含两个数 $N,B$。\n\n接下来 $N－1$ 行，每行描述一条边，包含两个数，即这条边连接的两个城市的编号。", "outputFormat": "如果无法满足国王的要求，输出 $0$。\n\n否则第一行输出数 $K$，表示你给出的划分方案中省的个数。\n\n第二行输出 $N$ 个数，第 $I$ 个数表示编号为 $I$ 的城市属于的省的编号。要求城市属于的省的编号在 $[1,K]$ 范围内。\n\n第三行输出 $K$ 个数，表示这 $K$ 个省的省会的城市编号。\n\n如果有多种方案，你可以输出任意一种。", "hint": "对于 $100\\%$ 的数据，$1\\le B\\leq N\\le 10^3$。\n\n感谢 @[FlierKing](/user/9433) 提供 spj。", "locale": "zh-CN"}}}
{"pid": "P2326", "type": "P", "difficulty": 4, "samples": [["3\n4\n1 3 5 7\n10\n32 54 21 52 14 25 92 75 14 27\n21\n1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 65536 131072 262144 524288 1048576\n", "Case #1: 5 \nCase #2: 72\nCase #3: 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "洛谷原创"], "title": "AKN’s PPAP", "background": null, "description": "> I have a pen, I have an apple. Eh, Apple-Pen!\\\n> I have a pen, I have pineapple. En, Pineapple-Pen!\\\n> Apple-Pen, Pineapple-Pen. Eh, Pen-Pineapple-Apple-Pen!\n\nAkn 最近中毒于一首音乐，于是他买来了一堆苹果来学习这首音乐。Akn 发现，只要边唱这首歌，边做把两个完整的苹果碰在一起的动作，两个苹果就会融合成一个新的大苹果，但是大苹果却不能再融合，因为他的细胞内部结构已经改变。Akn 还发现，当两个苹果融合的时候，苹果的质量会发生一些玄妙的改变，就是与运算（$a \\operatorname{and} b$）。但是，最近他的同学找他要一个苹果吃，Akn 出于好心，准备把他学习 ppap 用的苹果融合成的大苹果给同学吃，好让同学一起中毒于 ppap，而且 Akn 还想让大苹果的质量最大，那么请问 Akn 能给同学吃的苹果质量最大是多少？", "inputFormat": "第一行包含一个整数 $t$，表示数据组数；\n\n接下来 $t$ 组数据，每组数据第一行包含一个整数 $n$，表示 $n$ 个苹果；\n\n第二行包含 $n$ 个整数 $w_i$，表示第 $i$ 个小苹果重 $w_i\\ \\text{kg}$。", "outputFormat": "每组数据输出一行一个整数大苹果最大的质量，注意格式，`Case #x: ans`，`Case` 和 `#` 间有空格，`:` 和 `ans` 之间有空格", "hint": "由于数据包大小限制，故只上传部分数据（第 $1,2,3,4,5,6,7,8,10,11,12,13,16,19,20$ 点）\n\n第一组数据解释：\n\n```plain\n1(2)=1\n3(2)=11\n5(2)=101\n7(2)=111\n```\n选取 $5$ 和 $7$ 进行融合最终得到答案 $5$。\n\n数据范围：\n\n- $10\\%$ 的数据保证，$n \\le 5000, t \\le 1$；\n- 另有 $10\\%$ 的数据保证，$n \\le 2000, t \\le 6$；\n- 另有 $20\\%$ 的数据保证，$a \\le 2^{10}$；\n- 另有 $5\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}$，最大的两个数相等；\n- 另有 $20\\%$ 的数据保证，$n \\le 10^4, a \\le 2^{15}$；\n- 另有 $15\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}, t \\le 6$；\n- 另有 $15\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}, t \\le 12$；\n- $100\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}, t \\le 20$。\n\nBy: worcher", "locale": "zh-CN", "translations": {"en": {"title": "AKN’s PPAP", "background": "", "description": "> I have a pen, I have an apple. Eh, Apple-Pen!\\\n> I have a pen, I have pineapple. En, Pineapple-Pen!\\\n> Apple-Pen, Pineapple-Pen. Eh, Pen-Pineapple-Apple-Pen!\n\nAkn has recently become obsessed with a song, so he bought a bunch of apples to learn it. He discovered that as long as he sings the song while making the gesture of bumping two whole apples together, the two apples will fuse into one new big apple. However, the big apple can no longer fuse again because its internal cellular structure has changed. Akn also found that when two apples fuse, the mass of the resulting apple is the bitwise AND operation ($a \\operatorname{and} b$). Recently, one of his classmates asked him for an apple to eat. Out of kindness, Akn plans to give his classmate the big apple formed by fusing the apples he used to learn PPAP, so that the classmate can also get into PPAP. Moreover, Akn wants the mass of the big apple to be as large as possible. What is the maximum mass of the big apple that Akn can give to his classmate?", "inputFormat": "The first line contains an integer $t$, the number of test cases.\n\nFor each of the next $t$ test cases, the first line contains an integer $n$, the number of apples.\n\nThe second line contains $n$ integers $w_i$, where the $i$-th small apple weighs $w_i\\ \\text{kg}$.", "outputFormat": "For each test case, output one line with a single integer, the maximum mass of the big apple. Note the format: `Case #x: ans`. There is a space between `Case` and `#`, and a space between `:` and `ans`.", "hint": "Due to testdata package size limits, only part of the testdata is uploaded (points $1,2,3,4,5,6,7,8,10,11,12,13,16,19,20$).\n\nExplanation for the first test set:\n\n```plain\n1(2)=1\n3(2)=11\n5(2)=101\n7(2)=111\n```\nChoose $5$ and $7$ to fuse, and the final answer is $5$.\n\nConstraints:\n\n- For $10\\%$ of the testdata, $n \\le 5000, t \\le 1$.\n- For another $10\\%$ of the testdata, $n \\le 2000, t \\le 6$.\n- For another $20\\%$ of the testdata, $a \\le 2^{10}$.\n- For another $5\\%$ of the testdata, $n \\le 10^5, a \\le 2^{20}$, and the two largest numbers are equal.\n- For another $20\\%$ of the testdata, $n \\le 10^4, a \\le 2^{15}$.\n- For another $15\\%$ of the testdata, $n \\le 10^5, a \\le 2^{20}, t \\le 6$.\n- For another $15\\%$ of the testdata, $n \\le 10^5, a \\le 2^{20}, t \\le 12$.\n- For $100\\%$ of the testdata, $n \\le 10^5, a \\le 2^{20}, t \\le 20$.\n\nBy: worcher\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "AKN’s PPAP", "background": null, "description": "> I have a pen, I have an apple. Eh, Apple-Pen!\\\n> I have a pen, I have pineapple. En, Pineapple-Pen!\\\n> Apple-Pen, Pineapple-Pen. Eh, Pen-Pineapple-Apple-Pen!\n\nAkn 最近中毒于一首音乐，于是他买来了一堆苹果来学习这首音乐。Akn 发现，只要边唱这首歌，边做把两个完整的苹果碰在一起的动作，两个苹果就会融合成一个新的大苹果，但是大苹果却不能再融合，因为他的细胞内部结构已经改变。Akn 还发现，当两个苹果融合的时候，苹果的质量会发生一些玄妙的改变，就是与运算（$a \\operatorname{and} b$）。但是，最近他的同学找他要一个苹果吃，Akn 出于好心，准备把他学习 ppap 用的苹果融合成的大苹果给同学吃，好让同学一起中毒于 ppap，而且 Akn 还想让大苹果的质量最大，那么请问 Akn 能给同学吃的苹果质量最大是多少？", "inputFormat": "第一行包含一个整数 $t$，表示数据组数；\n\n接下来 $t$ 组数据，每组数据第一行包含一个整数 $n$，表示 $n$ 个苹果；\n\n第二行包含 $n$ 个整数 $w_i$，表示第 $i$ 个小苹果重 $w_i\\ \\text{kg}$。", "outputFormat": "每组数据输出一行一个整数大苹果最大的质量，注意格式，`Case #x: ans`，`Case` 和 `#` 间有空格，`:` 和 `ans` 之间有空格", "hint": "由于数据包大小限制，故只上传部分数据（第 $1,2,3,4,5,6,7,8,10,11,12,13,16,19,20$ 点）\n\n第一组数据解释：\n\n```plain\n1(2)=1\n3(2)=11\n5(2)=101\n7(2)=111\n```\n选取 $5$ 和 $7$ 进行融合最终得到答案 $5$。\n\n数据范围：\n\n- $10\\%$ 的数据保证，$n \\le 5000, t \\le 1$；\n- 另有 $10\\%$ 的数据保证，$n \\le 2000, t \\le 6$；\n- 另有 $20\\%$ 的数据保证，$a \\le 2^{10}$；\n- 另有 $5\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}$，最大的两个数相等；\n- 另有 $20\\%$ 的数据保证，$n \\le 10^4, a \\le 2^{15}$；\n- 另有 $15\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}, t \\le 6$；\n- 另有 $15\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}, t \\le 12$；\n- $100\\%$ 的数据保证，$n \\le 10^5, a \\le 2^{20}, t \\le 20$。\n\nBy: worcher", "locale": "zh-CN"}}}
{"pid": "P2327", "type": "P", "difficulty": 3, "samples": [["2\n1  1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2005", "四川", "各省省选"], "title": "[SCOI2005] 扫雷", "background": "", "description": "\n相信大家都玩过扫雷的游戏。那是在一个 $n\\times m$ 的矩阵里面有一些雷，要你根据一些信息找出雷来。万圣节到了，“余”人国流行起了一种简单的扫雷游戏，这个游戏规则和扫雷一样，如果某个格子没有雷，那么它里面的数字表示和它 $8$ 连通的格子里面雷的数目。现在棋盘是 $n\\times 2$ 的，第一列里面某些格子是雷，而第二列没有雷，如下图：\n\n![](https://cdn.luogu.com.cn/upload/pic/17825.png )\n\n由于第一列的雷可能有多种方案满足第二列的数的限制，你的任务即根据第二列的信息确定第一列雷有多少种摆放方案。\n\n", "inputFormat": "\n第一行为 $N$，第二行有 $N$ 个数，依次为第二列的格子中的数。（$1\\le N\\le10000$）", "outputFormat": "一个数，即第一列中雷的摆放方案数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Minesweeper", "background": "", "description": "Most people have played the game Minesweeper. In an $n \\times m$ grid, some cells contain mines. If a cell does not contain a mine, the number in it indicates the number of mines among its $8$-connected neighboring cells. Now the board is $n \\times 2$: some cells in the first column contain mines, and the second column contains no mines, as shown in the figure:\n\n![](https://cdn.luogu.com.cn/upload/pic/17825.png )\n\nSince there may be multiple mine configurations in the first column that satisfy the numbers in the second column, your task is to determine, based on the second column, how many valid configurations there are.", "inputFormat": "The first line contains $N$. The second line contains $N$ integers, in order, which are the numbers in the cells of the second column. $(1 \\le N \\le 10000)$.", "outputFormat": "Output a single integer: the number of valid configurations of mines in the first column.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 扫雷", "background": "", "description": "\n相信大家都玩过扫雷的游戏。那是在一个 $n\\times m$ 的矩阵里面有一些雷，要你根据一些信息找出雷来。万圣节到了，“余”人国流行起了一种简单的扫雷游戏，这个游戏规则和扫雷一样，如果某个格子没有雷，那么它里面的数字表示和它 $8$ 连通的格子里面雷的数目。现在棋盘是 $n\\times 2$ 的，第一列里面某些格子是雷，而第二列没有雷，如下图：\n\n![](https://cdn.luogu.com.cn/upload/pic/17825.png )\n\n由于第一列的雷可能有多种方案满足第二列的数的限制，你的任务即根据第二列的信息确定第一列雷有多少种摆放方案。\n\n", "inputFormat": "\n第一行为 $N$，第二行有 $N$ 个数，依次为第二列的格子中的数。（$1\\le N\\le10000$）", "outputFormat": "一个数，即第一列中雷的摆放方案数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2328", "type": "P", "difficulty": 5, "samples": [["2  2", "00\n01\n11\n10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "四川", "各省省选", "Special Judge", "枚举", "进制"], "title": "[SCOI2005] 超级格雷码", "background": null, "description": "![](https://cdn.luogu.com.cn/upload/pic/1392.png)", "inputFormat": "只有一行，为两个整数 $n$ 和 $B$。", "outputFormat": "一共 $B^n$ 个行，每行一个 $B$ 进制数，表示你所求得的符合条件的排列。", "hint": "感谢@Night_Aurora 提供SPJ", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Super Gray Code", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/pic/1392.png)", "inputFormat": "Only one line, containing two integers $n$ and $B$.", "outputFormat": "A total of $B^n$ lines, each line is a base-$B$ number, representing the ordering that meets the required conditions.", "hint": "Thanks to @Night_Aurora for the SPJ.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 超级格雷码", "background": null, "description": "![](https://cdn.luogu.com.cn/upload/pic/1392.png)", "inputFormat": "只有一行，为两个整数 $n$ 和 $B$。", "outputFormat": "一共 $B^n$ 个行，每行一个 $B$ 进制数，表示你所求得的符合条件的排列。", "hint": "感谢@Night_Aurora 提供SPJ", "locale": "zh-CN"}}}
{"pid": "P2329", "type": "P", "difficulty": 4, "samples": [["4\n30\n40\n50\n25\n10\n15\n16\n17\n18\n19\n20\n21\n25\n24\n30\n", "7"], ["3\n20\n10\n10\n9\n3\n3\n3\n5\n5\n7\n8\n8\n9\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2005", "四川", "各省省选", "深度优先搜索 DFS", "剪枝"], "title": "[SCOI2005] 栅栏", "background": "", "description": "\n农夫约翰打算建立一个栅栏将他的牧场给围起来，因此他需要一些特定规格的木材。于是农夫约翰到木材店购买木材。可是木材店老板说他这里只剩下少部分大规格的木板了。不过约翰可以购买这些木板，然后切割成他所需要的规格。而且约翰有一把神奇的锯子，用它来锯木板，不会产生任何损失，也就是说长度为 $10$ 的木板可以切成长度为 $8$ 和 $2$ 的两个木板。\n\n你的任务：给你约翰所需要的木板的规格，还有木材店老板能够给出的木材的规格，求约翰最多能够得到多少他所需要的木板。", "inputFormat": "第一行为整数 $m(m\\leq50)$ 表示木材店老板可以提供多少块木材给约翰。紧跟着 $m$ 行为老板提供的每一块木板的长度。\n\n接下来一行（即第 $m+2$ 行）为整数 $n(n\\leq1000)$，表示约翰需要多少木材。\n\n接下来 $n$ 行表示他所需要的每一块木板的长度。木材的规格小于 $32767$。（对于店老板提供的和约翰需要的每块木板，你只能使用一次）。", "outputFormat": "只有一行，为约翰最多能够得到的符合条件的木板的个数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Fence", "background": "", "description": "Farmer John plans to build a fence to enclose his pasture, so he needs boards of certain lengths. He goes to a lumber store, but the owner has only a small number of large boards left. John may buy these boards and cut them into the lengths he needs. John has a magic saw that produces no waste; for example, a board of length $10$ can be cut into boards of length $8$ and $2$.\n\nYour task: Given the lengths of the boards John needs and the lengths of the boards available at the store, compute the maximum number of required boards John can obtain.", "inputFormat": "- The first line contains an integer $m$ ($m \\leq 50$), the number of boards the store owner can provide. The next $m$ lines each contain the length of one available board.\n- The next line contains an integer $n$ ($n \\leq 1000$), the number of boards John needs.\n- The next $n$ lines each contain the length of one required board. Each length is less than $32767$. Each available board can be used at most once, and each required board can be fulfilled at most once.", "outputFormat": "Output a single line with the maximum number of boards that meet John's requirements.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 栅栏", "background": "", "description": "\n农夫约翰打算建立一个栅栏将他的牧场给围起来，因此他需要一些特定规格的木材。于是农夫约翰到木材店购买木材。可是木材店老板说他这里只剩下少部分大规格的木板了。不过约翰可以购买这些木板，然后切割成他所需要的规格。而且约翰有一把神奇的锯子，用它来锯木板，不会产生任何损失，也就是说长度为 $10$ 的木板可以切成长度为 $8$ 和 $2$ 的两个木板。\n\n你的任务：给你约翰所需要的木板的规格，还有木材店老板能够给出的木材的规格，求约翰最多能够得到多少他所需要的木板。", "inputFormat": "第一行为整数 $m(m\\leq50)$ 表示木材店老板可以提供多少块木材给约翰。紧跟着 $m$ 行为老板提供的每一块木板的长度。\n\n接下来一行（即第 $m+2$ 行）为整数 $n(n\\leq1000)$，表示约翰需要多少木材。\n\n接下来 $n$ 行表示他所需要的每一块木板的长度。木材的规格小于 $32767$。（对于店老板提供的和约翰需要的每块木板，你只能使用一次）。", "outputFormat": "只有一行，为约翰最多能够得到的符合条件的木板的个数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2330", "type": "P", "difficulty": 3, "samples": [["4 5\n1 2 3\n1 4 5\n2 4 7\n2 3 6\n3 4 8\n", "3 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2005", "四川", "并查集", "各省省选", "生成树"], "title": "[SCOI2005] 繁忙的都市", "background": "", "description": "城市 C 是一个非常繁忙的大都市，城市中的道路十分的拥挤，于是市长决定对其中的道路进行改造。城市 C 的道路是这样分布的：城市中有 $n$ 个交叉路口，有些交叉路口之间有道路相连，两个交叉路口之间最多有一条道路相连接。这些道路是双向的，且把所有的交叉路口直接或间接的连接起来了。每条道路都有一个分值，分值越小表示这个道路越繁忙，越需要进行改造。但是市政府的资金有限，市长希望进行改造的道路越少越好，于是他提出下面的要求：\n\n1. 改造的那些道路能够把所有的交叉路口直接或间接的连通起来。\n1. 在满足要求 1 的情况下，改造的道路尽量少。\n1. 在满足要求 1、2 的情况下，改造的那些道路中分值最大的道路分值尽量小。\n\n任务：作为市规划局的你，应当作出最佳的决策，选择哪些道路应当被修建。", "inputFormat": "第一行有两个整数 $n,m$ 表示城市有 $n$ 个交叉路口，$m$ 条道路。\n\n接下来 $m$ 行是对每条道路的描述，$u, v, c$ 表示交叉路口 $u$ 和 $v$ 之间有道路相连，分值为 $c$。", "outputFormat": "两个整数 $s, \\mathit{max}$，表示你选出了几条道路，分值最大的那条道路的分值是多少。", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $1\\le n\\le 300$，$1\\le c\\le 10^4$，$1 \\le m \\le 8000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Busy City", "background": "", "description": "City C is a very busy metropolis, and its roads are heavily congested. The mayor decides to renovate some of the roads. The road network in city C is as follows: there are $n$ intersections in the city. Some pairs of intersections are connected by roads, and there is at most one road between any pair of intersections. These roads are bidirectional and connect all intersections directly or indirectly. Each road has a score $c$: the smaller the score, the more congested the road is and the more it needs renovation. However, the budget is limited, so the mayor wants to renovate as few roads as possible. The requirements are:\n\n1. The renovated roads must connect all intersections directly or indirectly.\n2. Subject to requirement 1, the number of renovated roads should be as small as possible.\n3. Subject to requirements 1 and 2, among the renovated roads, the maximum score should be as small as possible.\n\nTask: As the city planning bureau, you should make the best decision and choose which roads should be renovated.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ intersections and $m$ roads.\n\nEach of the next $m$ lines describes a road with three integers $u, v, c$, meaning there is a road between intersections $u$ and $v$ with score $c$.", "outputFormat": "Output two integers $s, \\mathit{max}$, meaning you selected $s$ roads, and the maximum score among the selected roads is $\\mathit{max}$.", "hint": "Constraints\n\nFor all testdata, $1 \\le n \\le 300$, $1 \\le c \\le 10^4$, $1 \\le m \\le 8000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 繁忙的都市", "background": "", "description": "城市 C 是一个非常繁忙的大都市，城市中的道路十分的拥挤，于是市长决定对其中的道路进行改造。城市 C 的道路是这样分布的：城市中有 $n$ 个交叉路口，有些交叉路口之间有道路相连，两个交叉路口之间最多有一条道路相连接。这些道路是双向的，且把所有的交叉路口直接或间接的连接起来了。每条道路都有一个分值，分值越小表示这个道路越繁忙，越需要进行改造。但是市政府的资金有限，市长希望进行改造的道路越少越好，于是他提出下面的要求：\n\n1. 改造的那些道路能够把所有的交叉路口直接或间接的连通起来。\n1. 在满足要求 1 的情况下，改造的道路尽量少。\n1. 在满足要求 1、2 的情况下，改造的那些道路中分值最大的道路分值尽量小。\n\n任务：作为市规划局的你，应当作出最佳的决策，选择哪些道路应当被修建。", "inputFormat": "第一行有两个整数 $n,m$ 表示城市有 $n$ 个交叉路口，$m$ 条道路。\n\n接下来 $m$ 行是对每条道路的描述，$u, v, c$ 表示交叉路口 $u$ 和 $v$ 之间有道路相连，分值为 $c$。", "outputFormat": "两个整数 $s, \\mathit{max}$，表示你选出了几条道路，分值最大的那条道路的分值是多少。", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $1\\le n\\le 300$，$1\\le c\\le 10^4$，$1 \\le m \\le 8000$。", "locale": "zh-CN"}}}
{"pid": "P2331", "type": "P", "difficulty": 5, "samples": [["3 2 2\r\n1 -3\r\n2 3\r\n-2 3\r\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2005", "四川", "各省省选", "前缀和"], "title": "[SCOI2005] 最大子矩阵", "background": "", "description": "这里有一个 $n \\times m$ 的矩阵，请你选出其中 $k$ 个子矩阵，使得这个 $k$ 个子矩阵分值之和最大。\n\n注意：选出的 $k$ 个子矩阵不能相互重叠。", "inputFormat": "第一行为 $n,m,k$，接下来 $n$ 行描述矩阵每行中的每个元素的分值（每个元素的分值的绝对值不超过 $32767$）。", "outputFormat": "只有一行为 $k$ 个子矩阵分值之和最大为多少。", "hint": "对于 $100 \\%$ 的数据，$1 \\leq n \\leq 100$，$1 \\leq m \\leq 2$，$1 \\leq k \\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2005] Maximum Submatrix", "background": "", "description": "There is an $n \\times m$ matrix. Please choose $k$ submatrices so that the sum of their scores is maximized. \n\nNote: The chosen $k$ submatrices must be pairwise non-overlapping (no two share any cell).", "inputFormat": "The first line contains $n, m, k$. Each of the next $n$ lines contains $m$ integers, the scores of the elements in the matrix. The absolute value of each element’s score does not exceed $32767$.", "outputFormat": "Output a single line containing the maximum possible sum of the scores of the $k$ submatrices.", "hint": "For $100\\%$ of the testdata, $1 \\leq n \\leq 100$, $1 \\leq m \\leq 2$, $1 \\leq k \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2005] 最大子矩阵", "background": "", "description": "这里有一个 $n \\times m$ 的矩阵，请你选出其中 $k$ 个子矩阵，使得这个 $k$ 个子矩阵分值之和最大。\n\n注意：选出的 $k$ 个子矩阵不能相互重叠。", "inputFormat": "第一行为 $n,m,k$，接下来 $n$ 行描述矩阵每行中的每个元素的分值（每个元素的分值的绝对值不超过 $32767$）。", "outputFormat": "只有一行为 $k$ 个子矩阵分值之和最大为多少。", "hint": "对于 $100 \\%$ 的数据，$1 \\leq n \\leq 100$，$1 \\leq m \\leq 2$，$1 \\leq k \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P2332", "type": "P", "difficulty": 5, "samples": [["2 5\n1 2\n3 4\n5 6\n7 8\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "四川", "各省省选"], "title": "[SCOI2006] 数字立方体", "background": "", "description": "有一个立方体被分成 $n\\times n\\times n$ 的单位，坐标用 $(X,Y,Z)$ 表示 $(1\\le X,Y,Z\\le n)$。每个单位立方体内有一个绝对值不超过 $10^9$ 的整数。统计有多少个子立方体的所有数之和是 $m$ 的倍数。子立方体即满足 $x_1\\le X\\le x_2$，$y_1\\le Y\\le y_2$，$z_1\\le Z\\le z_2$ 的所有单位立方体集合，其中 $1\\le x_1,x_2,y_1,y_2,z_1,z_2\\le n$。\n", "inputFormat": "第一行有两个整数 $n, m$，表示立方体的边长和作除数的正整数。\n\n以下 $n\\times n$ 行，每行有 $n$ 个整数。首先是 $X=1, Y=1$ 的 $n$ 个单位立方体，然后是 $X=1, Y=2$ 的 $n$ 个…最后是 $X=n, Y=n-1$ 的 $n$ 个和 $X=n$ 和 $Y=n$ 的 $n$ 个，共 $n^3$ 个整数。\n", "outputFormat": "输出仅包含一个数，即所有整数和为 $m$ 的倍数的子立方体的个数。\n", "hint": "### 数据范围及约定\n\n- $30\\%$ 的数据满足 $1\\le n\\le 10$。\n- $100\\%$ 的数据满足 $1\\le n\\le 40$。\n\n对于所有的数据满足 $1\\le m\\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2006] Number Cube", "background": "", "description": "A cube is partitioned into $n\\times n\\times n$ unit cubes, with coordinates denoted by $(X, Y, Z)$ where $1\\le X, Y, Z\\le n$. Each unit cube contains an integer whose absolute value does not exceed $10^9$. Count how many subcubes have the sum of all numbers being a multiple of $m$. A subcube is the set of all unit cubes satisfying $x_1\\le X\\le x_2$, $y_1\\le Y\\le y_2$, $z_1\\le Z\\le z_2$, where $1\\le x_1, x_2, y_1, y_2, z_1, z_2\\le n$.", "inputFormat": "The first line contains two integers $n, m$, representing the edge length of the cube and the positive integer divisor.\n\nThe following $n\\times n$ lines each contain $n$ integers. First come the $n$ unit cubes with $X=1, Y=1$ (i.e., $Z=1,2,\\dots,n$), then $X=1, Y=2$, …, and finally $X=n, Y=n-1$ and $X=n, Y=n$, for a total of $n^3$ integers.", "outputFormat": "Output a single number: the number of subcubes whose sum of integers is a multiple of $m$.", "hint": "### Constraints and Conventions\n\n- $30\\%$ of the testdata satisfies $1\\le n\\le 10$.\n- $100\\%$ of the testdata satisfies $1\\le n\\le 40$.\n\nFor all testdata, $1\\le m\\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2006] 数字立方体", "background": "", "description": "有一个立方体被分成 $n\\times n\\times n$ 的单位，坐标用 $(X,Y,Z)$ 表示 $(1\\le X,Y,Z\\le n)$。每个单位立方体内有一个绝对值不超过 $10^9$ 的整数。统计有多少个子立方体的所有数之和是 $m$ 的倍数。子立方体即满足 $x_1\\le X\\le x_2$，$y_1\\le Y\\le y_2$，$z_1\\le Z\\le z_2$ 的所有单位立方体集合，其中 $1\\le x_1,x_2,y_1,y_2,z_1,z_2\\le n$。\n", "inputFormat": "第一行有两个整数 $n, m$，表示立方体的边长和作除数的正整数。\n\n以下 $n\\times n$ 行，每行有 $n$ 个整数。首先是 $X=1, Y=1$ 的 $n$ 个单位立方体，然后是 $X=1, Y=2$ 的 $n$ 个…最后是 $X=n, Y=n-1$ 的 $n$ 个和 $X=n$ 和 $Y=n$ 的 $n$ 个，共 $n^3$ 个整数。\n", "outputFormat": "输出仅包含一个数，即所有整数和为 $m$ 的倍数的子立方体的个数。\n", "hint": "### 数据范围及约定\n\n- $30\\%$ 的数据满足 $1\\le n\\le 10$。\n- $100\\%$ 的数据满足 $1\\le n\\le 40$。\n\n对于所有的数据满足 $1\\le m\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P2333", "type": "P", "difficulty": 6, "samples": [["3 1.60\n-1 -1\n1 -1\n0 1\n", "0.93"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "四川", "各省省选"], "title": "[SCOI2006] 一孔之见", "background": "", "description": "从一个圆孔里看一个凸多边形，为了让看到的面积至少为 $S$，孔的半径至少需要多大？  \n假设孔的圆心固定在 $(0,0)$，且 $(0, 0)$ 在多边形的内部（而不是外部或边界上）。\n", "inputFormat": "第一行包含一个整数 $n$ 和一个实数 $S$（精确到小数点后两位），表示凸多边形的顶点数和需要看到的面积。保证 $S$ 不超过凸多边形的面积。\n\n以下 $n$ 行每行包含两个实数 $x,y$（精确到小数点后 $6$ 位），表示各顶点的坐标。顶点按逆时针顺序或顺时针顺序给出。\n", "outputFormat": "包含一个实数 $r$，保留两位小数，表示孔的最小半径。\n", "hint": "【限制】\n\n对于 $50\\%$ 的数据：$3\\le n \\le 10$，输入凸多边形是正多边形，且中心在 $(0,0)$   \n对于 $100\\%$ 的数据：$3\\le n \\le 50$\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2006] A View Through a Hole", "background": "", "description": "Looking at a convex polygon through a circular hole, to make the visible area at least $S$, what is the minimal required radius of the hole?  \nAssume the hole's center is fixed at $(0,0)$, and $(0,0)$ lies strictly inside the polygon (not outside or on its boundary).", "inputFormat": "The first line contains an integer $n$ and a real number $S$ (with two decimal places), representing the number of vertices of the convex polygon and the area that must be visible. It is guaranteed that $S$ does not exceed the area of the convex polygon.\n\nEach of the following $n$ lines contains two real numbers $x, y$ (with six decimal places), representing the coordinates of each vertex. The vertices are given in either counterclockwise or clockwise order.", "outputFormat": "Output a real number $r$, with two decimal places, representing the minimal radius of the hole.", "hint": "Constraints:\n- For $50\\%$ of the testdata: $3 \\le n \\le 10$, the input convex polygon is regular, and its center is at $(0,0)$.\n- For $100\\%$ of the testdata: $3 \\le n \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2006] 一孔之见", "background": "", "description": "从一个圆孔里看一个凸多边形，为了让看到的面积至少为 $S$，孔的半径至少需要多大？  \n假设孔的圆心固定在 $(0,0)$，且 $(0, 0)$ 在多边形的内部（而不是外部或边界上）。\n", "inputFormat": "第一行包含一个整数 $n$ 和一个实数 $S$（精确到小数点后两位），表示凸多边形的顶点数和需要看到的面积。保证 $S$ 不超过凸多边形的面积。\n\n以下 $n$ 行每行包含两个实数 $x,y$（精确到小数点后 $6$ 位），表示各顶点的坐标。顶点按逆时针顺序或顺时针顺序给出。\n", "outputFormat": "包含一个实数 $r$，保留两位小数，表示孔的最小半径。\n", "hint": "【限制】\n\n对于 $50\\%$ 的数据：$3\\le n \\le 10$，输入凸多边形是正多边形，且中心在 $(0,0)$   \n对于 $100\\%$ 的数据：$3\\le n \\le 50$\n\n", "locale": "zh-CN"}}}
{"pid": "P2334", "type": "P", "difficulty": 5, "samples": [["4\n2 1 0\n2 0 1\n1 2\n7 0 1 1 1 1 1 1\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "四川", "各省省选", "O2优化"], "title": "[SCOI2006] 城堡", "background": "", "description": "为了救出心爱的公主 Julie，Billy 来到了恶魔的城堡。经过了三天三夜的浴血奋战，魔王殿已近在咫尺。\n\n这是一条狭长的通道，Billy 在位置 $0$，而魔王殿在位置 $n + 1$。在每个单位时间，Billy 可以往左或往右移动一个单位，或者原地不动。每个格子的上方都有石头周期性的往下砸，格子 $i$ 的周期为 $c_i$。\n\n对于格子 $i$ 上方的石头，可以用 $c_i$ 个整数来描述：$h_1, h_2, \\cdots, h_{c_i}$，表示在时间 $t = kc_i + x$（$1\\leq x\\leq c_i$）时处于该格子上将被砸掉 $h_x$ 格血。其中 $h_x = 0$ 表示该时刻没有石头砸下来。\n\n计算 Billy 最少损失多少格血后可以到达魔王殿。假设 Billy 是不会死的。注意从位置 $1$ 也是可以回到位置 $0$ 的，且在位置 $0$ 不损血。\n", "inputFormat": "第一行包括一个整数 $n$，表示通道的长度。\n\n以下 $n$ 行，依次表示格子 $1, 2, \\cdots, n$ 的情况。每行第一个整数为 $c_i$，表示石头下落周期，接下来有 $c_i$ 个整数，分别为 $h_1, h_2, \\cdots, h_{c_i}$。\n", "outputFormat": "包含一个整数 HP，表示血的最小损失。", "hint": "对于 $50\\%$ 的数据，$n\\leq 20$；\n\n对于 $100\\%$ 的数据满足：$0\\leq n\\leq 1000$，$1\\leq c_i\\leq 10$，$0\\leq h_x\\leq 100$。\n\n- 2023.4.12 添加一组 hack 数据，不计分。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2006] Castle", "background": "", "description": "To rescue his beloved princess Julie, Billy has arrived at the demon’s castle. After fighting for three days and nights, the Demon King’s hall is within reach.\n\nThis is a narrow corridor. Billy is at position $0$, and the Demon King’s hall is at position $n + 1$. At each unit of time, Billy may move one unit left, one unit right, or stay in place. Above each cell, stones periodically fall; the period of cell $i$ is $c_i$.\n\nFor the stones above cell $i$, we use $c_i$ integers $h_1, h_2, \\cdots, h_{c_i}$ to describe them: at time $t = k c_i + x$ ($1 \\le x \\le c_i$) for any integer $k \\ge 0$, being on that cell will cause a loss of $h_x$ HP. Here $h_x = 0$ means no stone falls at that moment.\n\nCompute the minimum total HP that Billy must lose to reach the Demon King’s hall. Assume Billy will not die. Note that from position $1$ you may move back to position $0$, and at position $0$ no HP is lost.", "inputFormat": "The first line contains an integer $n$, the length of the corridor.\n\nThe next $n$ lines describe cells $1, 2, \\cdots, n$. In each line, the first integer is $c_i$, the falling period, followed by $c_i$ integers $h_1, h_2, \\cdots, h_{c_i}$.", "outputFormat": "Output a single integer HP, the minimum total HP lost.", "hint": "- For $50\\%$ of the testdata, $n \\le 20$.\n- For $100\\%$ of the testdata: $0 \\le n \\le 1000$, $1 \\le c_i \\le 10$, $0 \\le h_x \\le 100$.\n- 2023-04-12: Added one hack testdata (not scored).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2006] 城堡", "background": "", "description": "为了救出心爱的公主 Julie，Billy 来到了恶魔的城堡。经过了三天三夜的浴血奋战，魔王殿已近在咫尺。\n\n这是一条狭长的通道，Billy 在位置 $0$，而魔王殿在位置 $n + 1$。在每个单位时间，Billy 可以往左或往右移动一个单位，或者原地不动。每个格子的上方都有石头周期性的往下砸，格子 $i$ 的周期为 $c_i$。\n\n对于格子 $i$ 上方的石头，可以用 $c_i$ 个整数来描述：$h_1, h_2, \\cdots, h_{c_i}$，表示在时间 $t = kc_i + x$（$1\\leq x\\leq c_i$）时处于该格子上将被砸掉 $h_x$ 格血。其中 $h_x = 0$ 表示该时刻没有石头砸下来。\n\n计算 Billy 最少损失多少格血后可以到达魔王殿。假设 Billy 是不会死的。注意从位置 $1$ 也是可以回到位置 $0$ 的，且在位置 $0$ 不损血。\n", "inputFormat": "第一行包括一个整数 $n$，表示通道的长度。\n\n以下 $n$ 行，依次表示格子 $1, 2, \\cdots, n$ 的情况。每行第一个整数为 $c_i$，表示石头下落周期，接下来有 $c_i$ 个整数，分别为 $h_1, h_2, \\cdots, h_{c_i}$。\n", "outputFormat": "包含一个整数 HP，表示血的最小损失。", "hint": "对于 $50\\%$ 的数据，$n\\leq 20$；\n\n对于 $100\\%$ 的数据满足：$0\\leq n\\leq 1000$，$1\\leq c_i\\leq 10$，$0\\leq h_x\\leq 100$。\n\n- 2023.4.12 添加一组 hack 数据，不计分。", "locale": "zh-CN"}}}
{"pid": "P2335", "type": "P", "difficulty": 3, "samples": [["3 4\n0 0 0 1\n0 0 1 1\n0 1 1 0", "3 2 1 0\n2 1 0 0\n1 0 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2005", "各省省选", "山东", "广度优先搜索 BFS"], "title": "[SDOI2005] 位图", "background": "", "description": "现在我们给出一个 $n\\ \\times m$ 的单色位图，且该图中至少含有一个白色的像素。我们用 $(i,j)$ 来代表第 $i$ 行第 $j$ 列的像素，并且定义两点 $p_1=(i_1,j_1)$ 和 $p_2=(i_2,j_2)$ 之间的距离为：\n\n$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|$$\n\n### 任务\n\n请写一个程序，读入该位图，并对于每个像素，计算出离该像素最近的白色像素与它的距离。把结果输出。", "inputFormat": "第一行包括两个用空格分开的整数 $n$ 和 $m$，$1 \\le n \\le 150$，$1 \\le m \\le 150$。\n\n以下的 $n$ 行每行包括一个长度为 $m$ 的整数为 $0$ 或 $1$，在第 $i+1$ 行的第 $j$ 个字符如果为 $1$，那么表示像素 $(i,j)$ 为白的，否则为黑的。", "outputFormat": "输出一个 $n\\ \\times m$ 的数表，其中的第 $i$ 行的第 $j$ 个数字为 $f(i,j)$ 表示像素 $(i,j)$ 到最近的白色像素的距离。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Bitmap", "background": "", "description": "You are given a monochrome bitmap of size $n\\ \\times m$, which contains at least one white pixel. We use $(i,j)$ to denote the pixel in the $i$-th row and $j$-th column, and define the distance between two points $p_1=(i_1,j_1)$ and $p_2=(i_2,j_2)$ as:\n\n$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|.$$\n\nYour task is to read the bitmap and, for each pixel, compute the distance to the nearest white pixel. Output the result.", "inputFormat": "The first line contains two space-separated integers $n$ and $m$, where $1 \\le n \\le 150$ and $1 \\le m \\le 150$.\n\nEach of the next $n$ lines contains a string of length $m$ consisting of characters '0' and '1'. In the $i$-th of these lines, if the $j$-th character is '1', then pixel $(i,j)$ is white; otherwise it is black.", "outputFormat": "Output an $n\\ \\times m$ table of numbers. In this table, the $j$-th number in the $i$-th row is $f(i,j)$, which denotes the distance from pixel $(i,j)$ to its nearest white pixel.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 位图", "background": "", "description": "现在我们给出一个 $n\\ \\times m$ 的单色位图，且该图中至少含有一个白色的像素。我们用 $(i,j)$ 来代表第 $i$ 行第 $j$ 列的像素，并且定义两点 $p_1=(i_1,j_1)$ 和 $p_2=(i_2,j_2)$ 之间的距离为：\n\n$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|$$\n\n### 任务\n\n请写一个程序，读入该位图，并对于每个像素，计算出离该像素最近的白色像素与它的距离。把结果输出。", "inputFormat": "第一行包括两个用空格分开的整数 $n$ 和 $m$，$1 \\le n \\le 150$，$1 \\le m \\le 150$。\n\n以下的 $n$ 行每行包括一个长度为 $m$ 的整数为 $0$ 或 $1$，在第 $i+1$ 行的第 $j$ 个字符如果为 $1$，那么表示像素 $(i,j)$ 为白的，否则为黑的。", "outputFormat": "输出一个 $n\\ \\times m$ 的数表，其中的第 $i$ 行的第 $j$ 个数字为 $f(i,j)$ 表示像素 $(i,j)$ 到最近的白色像素的距离。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2336", "type": "P", "difficulty": 6, "samples": [["2 3\n6 8 25 0 24 14 8 6 18 0 10 20 24 0\n7 14 17 8 7 0 17 0 5 8 25 0 24 0\n4 8 25 0 24\n4 7 0 17 0\n4 17 0 8 25\n", "2\n1\n0\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "四川", "莫队", "各省省选", "AC 自动机", "后缀数组 SA"], "title": "[SCOI2012] 喵星球上的点名", "background": "", "description": "a180285 幸运地被选做了地球到喵星球的留学生。他发现喵星人在上课前的点名现象非常有趣。\n\n假设课堂上有 $n$ 个喵星人，每个喵星人的名字由**姓**和**名**构成。喵星球上的老师会选择 $m$ 个串来点名，每次读出一个串的时候，如果这个串是一个喵星人的姓或名的**子串**，那么这个喵星人就必须答到。\n\n然而，由于喵星人的字码如此古怪，以至于不能用 ASCII 码来表示。为了方便描述，a180285 决定用数串来表示喵星人的名字。\n\n\n\n现在你能帮助 a180285 统计每次点名的时候有多少喵星人答到，以及 $m$ 次点名结束后每个喵星人答到多少次吗？\n", "inputFormat": "首先定义喵星球上的字符串给定方法：\n\n先给出一个正整数 $l$，表示字符串的长度，接下来 $l$ 个整数，第 $i$ 个整数 $a_i$ 表示字符串的第 $i$ 个字符。\n\n输入的第一行有两个整数，分别表示喵星人的个数 $n$ 个点名次数 $m$。  \n接下来 $n$ 行，每行两个喵星球上的字符串，按照定义的方法给出，依次表示第 $i$ 只喵的姓和名。  \n接下来 $m$ 行，每行一个喵星球上的字符串，表示一个老师点名的串。", "outputFormat": "对于每个老师点名的串，输出一行一个整数表示有多少只喵答到。  \n然后在最后一行输出 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个喵星人被点到的次数。\n", "hint": "#### 样例 1 解释\n\n事实上样例给出的数据如果翻译成地球上的语言可以这样来看\n\n```plain\n2 3\nizayoi sakuya\norihara izaya\nizay\nhara\nraiz\n```\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n, m \\le 10^3$，喵星人的名字总长不超过 $4\\times10^3$，点名串的总长不超过 $2\\times10^3$。\n- 对于$100\\%$ 的数据，保证 $1 \\leq n\\le 5 \\times 10^4$，$1 \\leq m \\le 10^5$，喵星人的名字总长和点名串的总长分别不超过 $10^5$，保证喵星人的字符串中作为字符存在的数不超过 $10^4$ 。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2012] Roll Call on Planet Meow", "background": "", "description": "a180285 was lucky to be selected as an exchange student from Earth to Planet Meow. He found the roll call before class very interesting.\n\nSuppose there are $n$ Meowians in class, and each Meowian’s name consists of a **surname** and a **given name**. The teacher on Planet Meow will choose $m$ strings for roll call. Each time a string is read, if this string is a substring of a Meowian’s surname or given name, then that Meowian must respond.\n\nHowever, the Meowians’ character encoding is so peculiar that it cannot be represented using ASCII. For convenience, a180285 decides to represent Meowian names as sequences of numbers.\n\nNow, can you help a180285 count how many Meowians respond to each roll call, and after all $m$ roll calls, how many times each Meowian has responded?", "inputFormat": "First, we define how strings on Planet Meow are given:\n\nYou are first given a positive integer $l$, the length of the string, followed by $l$ integers. The $i$-th integer $a_i$ denotes the $i$-th character of the string.\n\nThe first line contains two integers $n$ and $m$, the number of Meowians and the number of roll calls.  \nThe next $n$ lines each contain two Planet Meow strings given as above, representing the $i$-th Meowian’s surname and given name, respectively.  \nThe next $m$ lines each contain one Planet Meow string, representing a string read by the teacher for roll call.", "outputFormat": "For each string read by the teacher, output one line with a single integer indicating how many Meowians respond.  \nThen output, on the last line, $n$ space-separated integers; the $i$-th integer is the number of times the $i$-th Meowian has been called.", "hint": "#### Sample 1 Explanation\n\nIn fact, if the sample is translated into Earth language, it can be viewed as follows:\n\n```plain\n2 3\nizayoi sakuya\norihara izaya\nizay\nhara\nraiz\n```\n\n#### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n, m \\le 10^3$, the total length of Meowian names does not exceed $4 \\times 10^3$, and the total length of roll call strings does not exceed $2 \\times 10^3$.  \n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\le 5 \\times 10^4$, $1 \\leq m \\le 10^5$, the total length of Meowian names and the total length of roll call strings do not exceed $10^5$ respectively, and the numbers that appear as characters in Meowian strings are at most $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2012] 喵星球上的点名", "background": "", "description": "a180285 幸运地被选做了地球到喵星球的留学生。他发现喵星人在上课前的点名现象非常有趣。\n\n假设课堂上有 $n$ 个喵星人，每个喵星人的名字由**姓**和**名**构成。喵星球上的老师会选择 $m$ 个串来点名，每次读出一个串的时候，如果这个串是一个喵星人的姓或名的**子串**，那么这个喵星人就必须答到。\n\n然而，由于喵星人的字码如此古怪，以至于不能用 ASCII 码来表示。为了方便描述，a180285 决定用数串来表示喵星人的名字。\n\n\n\n现在你能帮助 a180285 统计每次点名的时候有多少喵星人答到，以及 $m$ 次点名结束后每个喵星人答到多少次吗？\n", "inputFormat": "首先定义喵星球上的字符串给定方法：\n\n先给出一个正整数 $l$，表示字符串的长度，接下来 $l$ 个整数，第 $i$ 个整数 $a_i$ 表示字符串的第 $i$ 个字符。\n\n输入的第一行有两个整数，分别表示喵星人的个数 $n$ 个点名次数 $m$。  \n接下来 $n$ 行，每行两个喵星球上的字符串，按照定义的方法给出，依次表示第 $i$ 只喵的姓和名。  \n接下来 $m$ 行，每行一个喵星球上的字符串，表示一个老师点名的串。", "outputFormat": "对于每个老师点名的串，输出一行一个整数表示有多少只喵答到。  \n然后在最后一行输出 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个喵星人被点到的次数。\n", "hint": "#### 样例 1 解释\n\n事实上样例给出的数据如果翻译成地球上的语言可以这样来看\n\n```plain\n2 3\nizayoi sakuya\norihara izaya\nizay\nhara\nraiz\n```\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n, m \\le 10^3$，喵星人的名字总长不超过 $4\\times10^3$，点名串的总长不超过 $2\\times10^3$。\n- 对于$100\\%$ 的数据，保证 $1 \\leq n\\le 5 \\times 10^4$，$1 \\leq m \\le 10^5$，喵星人的名字总长和点名串的总长分别不超过 $10^5$，保证喵星人的字符串中作为字符存在的数不超过 $10^4$ 。", "locale": "zh-CN"}}}
{"pid": "P2337", "type": "P", "difficulty": 7, "samples": [["3 3 1\nS.T\n...\n...", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "四川", "各省省选", "构造", "轮廓线 DP"], "title": "[SCOI2012] 喵星人的入侵", "background": "", "description": "\na180285 幸运地被选作了地球到喵星球的留学生，其实是作为特工去调查，喵星人是否有侵略地球的企图。喵星人果然打算入侵地球！从 a180285 口中得到确切消息之后，地球小组成员决定制定反侵略计划。\n\n喵星到地球的一段必经之路可以看作 $n\\times m$ 的格点，喵星人将会从地图上的 $S$ 位置出发，目的地是地球的入口 $T$。为了抵抗喵星人的入侵，地球防御小组打算在地图上的格点上放置一些炮塔（最多放置 $K$ 个），炮塔攻击周围的 $8$ 个方向（$8$ 个方向分别是：东、南、西、北、东北、西北、东南、西南）（如下图所示，中间格子的炮塔可以攻击周围的八个格子）。此外地球防御小组还可以在地图上放置无限多个障碍，使得喵星人无法从有障碍的格子经过。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l6ezyb3h.png)\n\n右图是 $3\\times 3$ 地图的一个示例，其中 $\\tt X$ 表示炮塔，$\\tt \\#$ 表示障碍，有炮塔或者障碍的格子，喵星人都无法经过。在这张地图中喵星人从 $S$ 走到 $T$ 受到的伤害如下：\n\n- 在 $S(1, 0)$ 处受到伤害为 $2$（炮塔 $(0,0)$ 和 $(2, 1)$ 能攻击到 $S$）；\n- 在空地 $(1,1)$ 处受到伤害为 $3$（同时被炮塔 $(0,0),(0,2)$ 和 $(2, 1)$ 攻击）；\n- 在 $T(1,2)$ 处受到伤害为 $2$（炮塔 $(0,2)$ 和 $(2, 1)$ 能攻击到 $T$）。\n\n于是受到的总伤害为 $2+3+2=7$。\n\n作为地球防御小组的成员，请你为喵星人布阵，使得喵星人受到的伤害最大。注意如果有多条从 $S$ 到 $T$ 的路径，喵星人会选择伤害最小的一条。", "inputFormat": "第一行为三个整数 $n,m,K$，分别表示地图的长和宽，以及最多能放置的炮塔数量。\n\n接下来的 $n$ 行，每行包含 $m$ 个字符，$\\tt \\#$ 表示地图上原有的障碍，$\\tt .$ 表示该处为空地，数据保证在原地图上存在 $S$ 到 $T$ 的路径。", "outputFormat": "输出在合理布阵下，喵星人采取最优策略后，会受到的最大伤害。\n\n注意必须保证在布阵结束后喵星人仍然可以沿一条或以上的路径从起点 $S$ 到达终点 $T$，否则他们组织更大规模的侵略。", "hint": "### 样例解释\n\n样例的一种最优布局方案如下：\n\n```plain\nS#T\n.X.\n...\n```\n\n### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le n,m\\leq 6$；\n- 对于 $100\\%$ 的数据，保证 $\\min(n,m)\\le 6$，$\\max(n,m)\\le 20$，$1\\le K\\le 15$ 且从 $S$ 到 $T$ 的路径必定存在。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2012] Invasion of the Meowians", "background": "", "description": "a180285 was luckily chosen as an exchange student from Earth to the Meow Planet—actually as an agent to investigate whether the Meowians intend to invade Earth. The Meowians do plan to invade Earth! After obtaining the exact information from a180285, the Earth task force decided to devise an anti-invasion plan.\n\nA mandatory route from the Meow Planet to Earth can be viewed as an $n\\times m$ grid. The Meowians will start from position $S$ on the map, and their destination is Earth’s entrance $T$. To resist the Meowian invasion, the Earth Defense Team plans to place some turrets on grid cells (at most $K$ turrets). A turret attacks in all $8$ directions (the $8$ directions are: east, south, west, north, northeast, northwest, southeast, southwest) (as shown in the figure below, a turret in the center cell can attack the eight surrounding cells). In addition, the Earth Defense Team can place an unlimited number of obstacles on the map so that the Meowians cannot pass through cells with obstacles.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l6ezyb3h.png)\n\nThe figure shows an example on a $3\\times 3$ map, where $\\tt X$ denotes a turret and $\\tt \\#$ denotes an obstacle. Cells containing a turret or an obstacle are impassable to the Meowians. On this map, the damage taken by the Meowians when moving from $S$ to $T$ is as follows:\n- At $S(1, 0)$, the damage is $2$ (the turrets at $(0,0)$ and $(2, 1)$ can attack $S$).\n- At the empty cell $(1,1)$, the damage is $3$ (simultaneously attacked by the turrets $(0,0)$, $(0,2)$, and $(2, 1)$).\n- At $T(1,2)$, the damage is $2$ (the turrets at $(0,2)$ and $(2, 1)$ can attack $T$).\n\nTherefore, the total damage is $2+3+2=7$.\n\nAs a member of the Earth Defense Team, please arrange the placement so that the Meowians take the maximum possible damage. Note that if there are multiple paths from $S$ to $T$, the Meowians will choose the one with the minimal damage.", "inputFormat": "The first line contains three integers $n,m,K$, denoting the number of rows and columns of the map, and the maximum number of turrets that can be placed.\n\nThe next $n$ lines each contain $m$ characters: $\\tt \\#$ denotes an existing obstacle on the map, $\\tt .$ denotes an empty cell, $\\tt S$ denotes the start, and $\\tt T$ denotes the destination. It is guaranteed that in the original map there exists a path from $S$ to $T$.", "outputFormat": "Output the maximum damage the Meowians will take under an optimal placement, assuming they take the optimal route.\n\nNote that after the placement, you must still ensure that the Meowians can reach the destination $T$ from the start $S$ along at least one path; otherwise, they will organize an even larger-scale invasion.", "hint": "Sample Explanation\n\nOne optimal layout for the sample is as follows:\n```plain\nS#T\n.X.\n...\n```\n\nConstraints\n\n- For $30\\%$ of the testdata, $1\\le n,m\\leq 6$.\n- For $100\\%$ of the testdata, $\\min(n,m)\\le 6$, $\\max(n,m)\\le 20$, $1\\le K\\le 15$, and a path from $S$ to $T$ always exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2012] 喵星人的入侵", "background": "", "description": "\na180285 幸运地被选作了地球到喵星球的留学生，其实是作为特工去调查，喵星人是否有侵略地球的企图。喵星人果然打算入侵地球！从 a180285 口中得到确切消息之后，地球小组成员决定制定反侵略计划。\n\n喵星到地球的一段必经之路可以看作 $n\\times m$ 的格点，喵星人将会从地图上的 $S$ 位置出发，目的地是地球的入口 $T$。为了抵抗喵星人的入侵，地球防御小组打算在地图上的格点上放置一些炮塔（最多放置 $K$ 个），炮塔攻击周围的 $8$ 个方向（$8$ 个方向分别是：东、南、西、北、东北、西北、东南、西南）（如下图所示，中间格子的炮塔可以攻击周围的八个格子）。此外地球防御小组还可以在地图上放置无限多个障碍，使得喵星人无法从有障碍的格子经过。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l6ezyb3h.png)\n\n右图是 $3\\times 3$ 地图的一个示例，其中 $\\tt X$ 表示炮塔，$\\tt \\#$ 表示障碍，有炮塔或者障碍的格子，喵星人都无法经过。在这张地图中喵星人从 $S$ 走到 $T$ 受到的伤害如下：\n\n- 在 $S(1, 0)$ 处受到伤害为 $2$（炮塔 $(0,0)$ 和 $(2, 1)$ 能攻击到 $S$）；\n- 在空地 $(1,1)$ 处受到伤害为 $3$（同时被炮塔 $(0,0),(0,2)$ 和 $(2, 1)$ 攻击）；\n- 在 $T(1,2)$ 处受到伤害为 $2$（炮塔 $(0,2)$ 和 $(2, 1)$ 能攻击到 $T$）。\n\n于是受到的总伤害为 $2+3+2=7$。\n\n作为地球防御小组的成员，请你为喵星人布阵，使得喵星人受到的伤害最大。注意如果有多条从 $S$ 到 $T$ 的路径，喵星人会选择伤害最小的一条。", "inputFormat": "第一行为三个整数 $n,m,K$，分别表示地图的长和宽，以及最多能放置的炮塔数量。\n\n接下来的 $n$ 行，每行包含 $m$ 个字符，$\\tt \\#$ 表示地图上原有的障碍，$\\tt .$ 表示该处为空地，数据保证在原地图上存在 $S$ 到 $T$ 的路径。", "outputFormat": "输出在合理布阵下，喵星人采取最优策略后，会受到的最大伤害。\n\n注意必须保证在布阵结束后喵星人仍然可以沿一条或以上的路径从起点 $S$ 到达终点 $T$，否则他们组织更大规模的侵略。", "hint": "### 样例解释\n\n样例的一种最优布局方案如下：\n\n```plain\nS#T\n.X.\n...\n```\n\n### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，保证 $1\\le n,m\\leq 6$；\n- 对于 $100\\%$ 的数据，保证 $\\min(n,m)\\le 6$，$\\max(n,m)\\le 20$，$1\\le K\\le 15$ 且从 $S$ 到 $T$ 的路径必定存在。\n", "locale": "zh-CN"}}}
{"pid": "P2338", "type": "P", "difficulty": 3, "samples": [["2\nT 30\nD 10", "2970"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "2014", "线性数据结构", "USACO"], "title": "[USACO14JAN] Bessie Slows Down S", "background": null, "description": "贝西正在参加一项滑雪比赛。她从起点出发的时候，速度恒定为每秒 $1$ 米。然而，随着比赛进程的增加，她会犯很多错误，每次失误都会使她的速度下降。当她第一次失误后，速度会下降到每秒 $\\dfrac{1}{2}$ 米，第二次失误后，速度会下降到每秒 $\\dfrac{1}{3}$ 米，第 $k$ 次失误后，速度会下降到每秒 $\\dfrac{1}{k+1}$ 米。\n\n约翰记录了贝西的所有失误，一共有 $N$ 个。有两种失误，一种发生在比赛开始后的某个时间点，另一种发生在赛道的某个位置上。有时，贝西可能在某个时间点到达某个位置，而恰好在这个时间点和位置上都有一次失误的记录，这两个记录要算作不同的失误，会对贝西的速度造成两次影响。比赛的终点距离起点有 $1000$ 米，请问贝西需要多少时间才能滑过终点？", "inputFormat": "第一行：单个整数 $N$，$1\\le N\\le10000$。\n\n第二行到第 $N+1$ 行：每行开头有一个大写字母，代表贝西的一个失误类型：\n\n- 如果是 `T`，接下来会有一个整数 $S$，表示在比赛开始后的第 $S$ 秒钟整发生了一次失误，$1\\le S\\le10^7$。\n- 如果是 `D`，接下来会有一个整数 $X$，表示在距离起点 $X$ 米处发生了一次失误，$1\\le X\\le1000$。", "outputFormat": "单个整数：表示贝西需要多少秒才能滑到终点，如果精确的时间不是整数，则用四舍五入的方法向最接近的整数取整。", "hint": "样例解释：\n\n前 $10$ 秒，贝西的速度是每秒 $1$ 米，她滑了 $10$ 米。然后她遭遇了第一次失误，在接下来的 $20$ 秒内，她又滑了 $10$ 米。之后她遭遇了第二次失误，还剩下 $980$ 米，所以她共计花去 $10+20+2940=2970$ 秒才完成比赛。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14JAN] Bessie Slows Down S", "background": null, "description": "Bessie the cow is competing in a cross-country skiing event at the winter Moolympic games. She starts out at a speed of 1 meter per second. However, as she becomes more tired over time, she begins to slow down. Each time Bessie slows down, her speed decreases: she moves at 1/2 meter per second after slowing down once, then 1/3 meter per second after slowing down twice, and so on.\n\nYou are told when and where Bessie slows down, in terms of a series of events. An event like this:\n\nT 17 means that Bessie slows down at a specific time -- here, 17 seconds into the race. An event like this:\n\nD 10 means that Bessie slows down at a specific distance from the start -- in this case, 10 meters.\n\nGiven a list of N such events (1 <= N <= 10,000), please compute the amount of time, in seconds, for Bessie to travel an entire kilometer. Round your answer to the nearest integer second (0.5 rounds up to 1).", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Bessie Slows Down S", "background": null, "description": "贝西正在参加一项滑雪比赛。她从起点出发的时候，速度恒定为每秒 $1$ 米。然而，随着比赛进程的增加，她会犯很多错误，每次失误都会使她的速度下降。当她第一次失误后，速度会下降到每秒 $\\dfrac{1}{2}$ 米，第二次失误后，速度会下降到每秒 $\\dfrac{1}{3}$ 米，第 $k$ 次失误后，速度会下降到每秒 $\\dfrac{1}{k+1}$ 米。\n\n约翰记录了贝西的所有失误，一共有 $N$ 个。有两种失误，一种发生在比赛开始后的某个时间点，另一种发生在赛道的某个位置上。有时，贝西可能在某个时间点到达某个位置，而恰好在这个时间点和位置上都有一次失误的记录，这两个记录要算作不同的失误，会对贝西的速度造成两次影响。比赛的终点距离起点有 $1000$ 米，请问贝西需要多少时间才能滑过终点？", "inputFormat": "第一行：单个整数 $N$，$1\\le N\\le10000$。\n\n第二行到第 $N+1$ 行：每行开头有一个大写字母，代表贝西的一个失误类型：\n\n- 如果是 `T`，接下来会有一个整数 $S$，表示在比赛开始后的第 $S$ 秒钟整发生了一次失误，$1\\le S\\le10^7$。\n- 如果是 `D`，接下来会有一个整数 $X$，表示在距离起点 $X$ 米处发生了一次失误，$1\\le X\\le1000$。", "outputFormat": "单个整数：表示贝西需要多少秒才能滑到终点，如果精确的时间不是整数，则用四舍五入的方法向最接近的整数取整。", "hint": "样例解释：\n\n前 $10$ 秒，贝西的速度是每秒 $1$ 米，她滑了 $10$ 米。然后她遭遇了第一次失误，在接下来的 $20$ 秒内，她又滑了 $10$ 米。之后她遭遇了第二次失误，还剩下 $980$ 米，所以她共计花去 $10+20+2940=2970$ 秒才完成比赛。", "locale": "zh-CN"}}}
{"pid": "P2339", "type": "P", "difficulty": 5, "samples": [["4 10 3\n8 9\n4 21\n3 16\n8 12\n", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2004", "线性数据结构", "USACO"], "title": "[USACO04OPEN] Turning in Homework G", "background": null, "description": "贝茜有 $ C $ 门科目的作业要上交，之后她要去坐巴士和奶牛同学回家。\n\n每门科目的老师所在的教室排列在一条长为 $ H $ 的走廊上，他们只在课后接收作业，交作业不需要时间。贝茜现在在位置 $0$，她会告诉你每个教室所在的位置，以及走廊出口的位置。她每走 $1$ 个单位的路程，就要用 $1$ 分钟。她希望你计算最快多久以后她能交完作业并到达出口。", "inputFormat": "第一行三个整数 $C$，$H$ 和 $B$（$1 \\le C \\le 1000,1 \\le H \\le 1000,0 \\le B \\le H$）。\n\n第二行到 $C+1$ 行中，第 $i+1$ 行有两个整数 $X_i$ 和 $T_i$（$0 \\le X_i \\le H,0 \\le T_i \\le 10^4$）。\n\n$B$ 表示走廊出口位置。\n\n$X_i$ 表示第  $i$ 份作业应该在  $X_i$ 这个位置交。\n\n$T_i$ 表示这个位置（教室）的这个科目老师（也就是收这份作业的老师）下课的时间。", "outputFormat": "一个整数，表示贝西交完作业后走到车站的最短时间。", "hint": "在样例中，走到坐标 $8$ 处，第 $9$ 分钟交一本作业，等到第 $12$ 分钟时，交另一本作业。再走到坐标 $4$ 处交作业，最后走到坐标 $3$ 处，交最后一本作业，此地就是车站所在位置，共用时 $22$ 分钟。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04OPEN] Turning in Homework G", "background": "", "description": "Bessie has $C$ assignments to turn in, after which she will take the bus home with her classmates.\n\nAll teachers’ classrooms are arranged along a corridor of length $H$. They accept assignments only after class, and turning them in takes no time. Bessie starts at position $0$. You are given each classroom’s position and the position of the corridor exit (bus stop). For every unit of distance she walks, she spends 1 minute. Compute the earliest time by which she can finish turning in all assignments and reach the exit.", "inputFormat": "The first line contains three integers $C$, $H$, and $B$ ($1 \\le C \\le 1000, 1 \\le H \\le 1000, 0 \\le B \\le H$).\n\nLines $2$ through $C+1$: on the $(i+1)$-th line, there are two integers $X_i$ and $T_i$ ($0 \\le X_i \\le H, 0 \\le T_i \\le 10^4$).\n\n$B$ denotes the position of the corridor exit.\n\n$X_i$ is the position where the $i$-th assignment must be turned in.\n\n$T_i$ is the dismissal time of the teacher for that subject (the one who accepts this assignment) at that position.", "outputFormat": "Output a single integer, the minimum time for Bessie to finish turning in all assignments and reach the exit.", "hint": "In the sample, she walks to coordinate 8, turns in one assignment at minute 9, waits until minute 12 to turn in another, then walks to coordinate 4 to turn in, and finally goes to coordinate 3 to turn in the last assignment, which is also the bus stop location, for a total of 22 minutes.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04OPEN] Turning in Homework G", "background": null, "description": "贝茜有 $ C $ 门科目的作业要上交，之后她要去坐巴士和奶牛同学回家。\n\n每门科目的老师所在的教室排列在一条长为 $ H $ 的走廊上，他们只在课后接收作业，交作业不需要时间。贝茜现在在位置 $0$，她会告诉你每个教室所在的位置，以及走廊出口的位置。她每走 $1$ 个单位的路程，就要用 $1$ 分钟。她希望你计算最快多久以后她能交完作业并到达出口。", "inputFormat": "第一行三个整数 $C$，$H$ 和 $B$（$1 \\le C \\le 1000,1 \\le H \\le 1000,0 \\le B \\le H$）。\n\n第二行到 $C+1$ 行中，第 $i+1$ 行有两个整数 $X_i$ 和 $T_i$（$0 \\le X_i \\le H,0 \\le T_i \\le 10^4$）。\n\n$B$ 表示走廊出口位置。\n\n$X_i$ 表示第  $i$ 份作业应该在  $X_i$ 这个位置交。\n\n$T_i$ 表示这个位置（教室）的这个科目老师（也就是收这份作业的老师）下课的时间。", "outputFormat": "一个整数，表示贝西交完作业后走到车站的最短时间。", "hint": "在样例中，走到坐标 $8$ 处，第 $9$ 分钟交一本作业，等到第 $12$ 分钟时，交另一本作业。再走到坐标 $4$ 处交作业，最后走到坐标 $3$ 处，交最后一本作业，此地就是车站所在位置，共用时 $22$ 分钟。", "locale": "zh-CN"}}}
{"pid": "P2340", "type": "P", "difficulty": 3, "samples": [["5\n-5 7\n8 -6\n6 -3\n2 1\n-8 -5", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2003", "USACO"], "title": "[USACO03FALL] Cow Exhibition G", "background": null, "description": "奶牛想证明它们是聪明而风趣的。为此，贝西筹备了一个奶牛博览会，她已经对 $N$ 头奶牛进行了面试，确定了每头奶牛的智商和情商。\n\n贝西有权选择让哪些奶牛参加展览。由于负的智商或情商会造成负面效果，所以贝西不希望出展奶牛的智商之和小于零，或情商之和小于零。满足这两个条件下，她希望出展奶牛的智商与情商之和越大越好，请帮助贝西求出这个最大值。", "inputFormat": "第一行：单个整数 $N$，$1 \\le N \\le 400$。\n\n第二行到第 $N+1$ 行：第 $i+1$ 行有两个整数：$S_i$ 和 $F_i$，表示第 $i$ 头奶牛的智商和情商，$-1000 \\le S_i,F_i \\le 1000$。", "outputFormat": "输出单个整数：表示情商与智商和的最大值。贝西可以不让任何奶牛参加展览，如果这样做是最好的，输出 $0$。", "hint": "选择第一头，第三头，第四头奶牛，智商和为 $−5+6+2 = 3$，情商和为 $7−3+1 = 5$。\n\n再加入第二号奶牛可使总和提升到 $10$，不过由于情商和变成负的了，所以是不允许的。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO03FALL] Cow Exhibition G", "background": "", "description": "The cows want to prove that they are smart and funny. To this end, Bessie is organizing a cow exhibition. She has interviewed $N$ cows and determined each cow’s smartness and fun.\n\nBessie may choose which cows to include. Because negative smartness or fun would have adverse effects, she does not want the total smartness to be negative, nor the total fun to be negative. Subject to both constraints, she wants to maximize the sum of smartness and fun over the selected cows. Help Bessie compute this maximum.", "inputFormat": "The first line contains a single integer $N$ ($1 \\le N \\le 400$).\n\nLines $2$ through $N+1$: the $(i+1)$-th line contains two integers $S_i$ and $F_i$, the smartness and fun of the $i$-th cow ($-1000 \\le S_i, F_i \\le 1000$).", "outputFormat": "Output a single integer: the maximum possible sum of smartness and fun. Bessie may choose no cows; if that is optimal, output $0$.", "hint": "Select cows $1$, $3$, and $4$: the smartness sum is $-5 + 6 + 2 = 3$, and the fun sum is $7 - 3 + 1 = 5$.\n\nAdding cow $2$ would raise the total to $10$, but the fun sum would become negative, which is not allowed.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO03FALL] Cow Exhibition G", "background": null, "description": "奶牛想证明它们是聪明而风趣的。为此，贝西筹备了一个奶牛博览会，她已经对 $N$ 头奶牛进行了面试，确定了每头奶牛的智商和情商。\n\n贝西有权选择让哪些奶牛参加展览。由于负的智商或情商会造成负面效果，所以贝西不希望出展奶牛的智商之和小于零，或情商之和小于零。满足这两个条件下，她希望出展奶牛的智商与情商之和越大越好，请帮助贝西求出这个最大值。", "inputFormat": "第一行：单个整数 $N$，$1 \\le N \\le 400$。\n\n第二行到第 $N+1$ 行：第 $i+1$ 行有两个整数：$S_i$ 和 $F_i$，表示第 $i$ 头奶牛的智商和情商，$-1000 \\le S_i,F_i \\le 1000$。", "outputFormat": "输出单个整数：表示情商与智商和的最大值。贝西可以不让任何奶牛参加展览，如果这样做是最好的，输出 $0$。", "hint": "选择第一头，第三头，第四头奶牛，智商和为 $−5+6+2 = 3$，情商和为 $7−3+1 = 5$。\n\n再加入第二号奶牛可使总和提升到 $10$，不过由于情商和变成负的了，所以是不允许的。", "locale": "zh-CN"}}}
{"pid": "P2341", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2\n2 1\n2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2003", "2006", "河南", "USACO", "各省省选", "强连通分量", "Tarjan", "栈"], "title": "[USACO03FALL / HAOI2006] 受欢迎的牛 G", "background": "本题测试数据已修复。", "description": "每头奶牛都梦想成为牛棚里的明星。被所有奶牛喜欢的奶牛就是一头明星奶牛。所有奶牛都是自恋狂，每头奶牛总是喜欢自己的。奶牛之间的“喜欢”是可以传递的——如果 $A$ 喜欢 $B$，$B$ 喜欢 $C$，那么 $A$ 也喜欢 $C$。牛栏里共有 $N$ 头奶牛，给定一些奶牛之间的爱慕关系，请你算出有多少头奶牛可以当明星。", "inputFormat": "第一行：两个用空格分开的整数：$N$ 和 $M$。\n\n接下来 $M$ 行：每行两个用空格分开的整数：$A$ 和 $B$，表示 $A$ 喜欢 $B$。", "outputFormat": "一行单独一个整数，表示明星奶牛的数量。", "hint": "只有 $3$ 号奶牛可以做明星。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$N\\le20$，$M\\le50$。\n\n对于 $30\\%$ 的数据，$N\\le10^3$，$M\\le2\\times 10^4$。\n\n对于 $70\\%$ 的数据，$N\\le5\\times 10^3$，$M\\le5\\times 10^4$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le10^4$，$1\\le M\\le5\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO03FALL / HAOI2006] Popular Cows G", "background": "The testdata for this problem has been fixed.", "description": "Every cow dreams of becoming the star of the barn. A cow that is liked by all cows is a star cow. All cows are self-obsessed; each cow always likes itself. The “likes” relation is transitive—if $A$ likes $B$, and $B$ likes $C$, then $A$ also likes $C$. There are $N$ cows in the barn. Given some admiration relationships between cows, please compute how many cows can be stars.", "inputFormat": "The first line contains two space-separated integers: $N$ and $M$.\nThe next $M$ lines: each line contains two space-separated integers: $A$ and $B$, meaning $A$ likes $B$.", "outputFormat": "Output a single integer on one line, the number of star cows.", "hint": "Only cow number $3$ can be a star.\n\nConstraints\n- For $10\\%$ of the testdata, $N \\le 20$, $M \\le 50$.\n- For $30\\%$ of the testdata, $N \\le 10^3$, $M \\le 2 \\times 10^4$.\n- For $70\\%$ of the testdata, $N \\le 5 \\times 10^3$, $M \\le 5 \\times 10^4$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 10^4$, $1 \\le M \\le 5 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO03FALL / HAOI2006] 受欢迎的牛 G", "background": "本题测试数据已修复。", "description": "每头奶牛都梦想成为牛棚里的明星。被所有奶牛喜欢的奶牛就是一头明星奶牛。所有奶牛都是自恋狂，每头奶牛总是喜欢自己的。奶牛之间的“喜欢”是可以传递的——如果 $A$ 喜欢 $B$，$B$ 喜欢 $C$，那么 $A$ 也喜欢 $C$。牛栏里共有 $N$ 头奶牛，给定一些奶牛之间的爱慕关系，请你算出有多少头奶牛可以当明星。", "inputFormat": "第一行：两个用空格分开的整数：$N$ 和 $M$。\n\n接下来 $M$ 行：每行两个用空格分开的整数：$A$ 和 $B$，表示 $A$ 喜欢 $B$。", "outputFormat": "一行单独一个整数，表示明星奶牛的数量。", "hint": "只有 $3$ 号奶牛可以做明星。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$N\\le20$，$M\\le50$。\n\n对于 $30\\%$ 的数据，$N\\le10^3$，$M\\le2\\times 10^4$。\n\n对于 $70\\%$ 的数据，$N\\le5\\times 10^3$，$M\\le5\\times 10^4$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le10^4$，$1\\le M\\le5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2343", "type": "P", "difficulty": 5, "samples": [["5 3\n1 3 2 5 6\n1 3\n2 4\n1 6\n", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "二分", "平衡树", "树状数组", "洛谷原创"], "title": "宝石管理系统", "background": null, "description": "GY 君购买了一批宝石放进了仓库。有一天 GY 君心血来潮，想要清点他的宝石，于是把 $m$ 个宝石都取出来放进了宝石管理系统。每个宝石 $i$ 都有一个珍贵值 $v_i$，他希望你能编写程序查找到从大到小第 $n$ 珍贵的宝石。但是现在问题来了，他非常不小心的留了一些宝石在仓库里面，有可能要往现有的系统中添加宝石。这些宝石的个数比较少。他表示非常抱歉，但是还是希望你的系统能起作用。", "inputFormat": "第一行两个整数 $m,q$，表示已经取出来的宝石个数以及接下来的查询或插入操作个数。\n\n第二行 $m$ 个整数，表示这 $m$ 个宝石的珍贵值。\n\n以下 $q$ 行，每行两个整数 $c,n$。\n\n若 $c=1$（即询问），则输出当前第 $n$ 珍贵的宝石。\n\n若 $c=2$（即插入），则往系统中插入珍贵值为 $n$ 的宝石。", "outputFormat": "对于每个 $c=1$（询问）,输出当前第 $n$ 珍贵的宝石的珍贵值 $v_i$。", "hint": "对于 $50\\%$ 的数据，没有 $c=2$ 的情况；\n\n对于 $100\\%$ 的数据，$m\\leq 100000$，$c=2$ 的情况不超过 $10000$ 次，$q\\leq 30000$，$0 \\leq v_i \\lt 2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "Gemstone Management System", "background": "", "description": "GY bought a batch of gemstones and put them in a warehouse. One day, GY decided to count them, so he took out $m$ gemstones and put them into a gemstone management system. Each gemstone $i$ has a value $v_i$. He hopes you can write a program to find the $n$-th most valuable gemstone in descending order. However, there is a problem: he carelessly left some gemstones in the warehouse, and he may add them to the current system. The number of such gemstones is small. He is sorry, but he still hopes your system will work.", "inputFormat": "The first line contains two integers $m, q$, the number of gemstones already taken out and the number of following queries or insertions.\n\nThe second line contains $m$ integers, the values of these $m$ gemstones.\n\nEach of the following $q$ lines contains two integers $c, n$.\n\nIf $c = 1$ (query), output the current $n$-th most valuable gemstone.\n\nIf $c = 2$ (insertion), insert a gemstone with value $n$ into the system.", "outputFormat": "For each case with $c = 1$ (query), output the value $v_i$ of the current $n$-th most valuable gemstone.", "hint": "- For $50\\%$ of the testdata, there is no case with $c = 2$.\n- For $100\\%$ of the testdata, $m \\leq 100000$, the number of cases with $c = 2$ does not exceed $10000$, $q \\leq 30000$, $0 \\leq v_i < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宝石管理系统", "background": null, "description": "GY 君购买了一批宝石放进了仓库。有一天 GY 君心血来潮，想要清点他的宝石，于是把 $m$ 个宝石都取出来放进了宝石管理系统。每个宝石 $i$ 都有一个珍贵值 $v_i$，他希望你能编写程序查找到从大到小第 $n$ 珍贵的宝石。但是现在问题来了，他非常不小心的留了一些宝石在仓库里面，有可能要往现有的系统中添加宝石。这些宝石的个数比较少。他表示非常抱歉，但是还是希望你的系统能起作用。", "inputFormat": "第一行两个整数 $m,q$，表示已经取出来的宝石个数以及接下来的查询或插入操作个数。\n\n第二行 $m$ 个整数，表示这 $m$ 个宝石的珍贵值。\n\n以下 $q$ 行，每行两个整数 $c,n$。\n\n若 $c=1$（即询问），则输出当前第 $n$ 珍贵的宝石。\n\n若 $c=2$（即插入），则往系统中插入珍贵值为 $n$ 的宝石。", "outputFormat": "对于每个 $c=1$（询问）,输出当前第 $n$ 珍贵的宝石的珍贵值 $v_i$。", "hint": "对于 $50\\%$ 的数据，没有 $c=2$ 的情况；\n\n对于 $100\\%$ 的数据，$m\\leq 100000$，$c=2$ 的情况不超过 $10000$ 次，$q\\leq 30000$，$0 \\leq v_i \\lt 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P2344", "type": "P", "difficulty": 5, "samples": [["4\n2\n3\n-3\n1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2011", "USACO", "树状数组", "离散化", "前缀和"], "title": "[USACO11FEB] Generic Cow Protests G", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一列，正在进行一场抗议活动。第 $i$ 头奶牛的理智度为 $a_i$（$-10^4 \\leq a_i \\leq 10^4$）。\n\nFJ 希望奶牛在抗议时保持理性，为此，他打算将所有的奶牛隔离成若干个小组，每个小组内的奶牛的理智度总和都要不小于零。\n\n由于奶牛是按直线排列的，所以一个小组内的奶牛位置必须是连续的。请帮助 FJ 计算一下，满足条件的分组方案有多少种。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 头奶牛的理智度 $a_i$。", "outputFormat": "输出满足条件的分组方案对 $10^9+9$ 取模的结果。", "hint": "所有合法分组方案如下：\n\n- $\\texttt{(2 3 -3 1)}$\n- $\\texttt{(2 3 -3) (1)}$\n- $\\texttt{(2) (3 -3 1)}$\n- $\\texttt{(2) (3 -3) (1)}$", "locale": "zh-CN", "translations": {"en": {"title": "[USACO11FEB] Generic Cow Protests G", "background": "", "description": "Farmer John's $N$ cows ($1 \\leq N \\leq 10^5$) stand in a line, holding a protest. The $i$-th cow has a sanity value $a_i$ ($-10^4 \\leq a_i \\leq 10^4$).\n\nFJ wants the protest to stay rational. He will partition all cows into several groups so that, in each group, the sum of sanity values is at least zero.\n\nBecause the cows stand on a line, cows in one group must occupy a contiguous segment. Please compute how many grouping schemes satisfy the condition.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain one integer; the $i$-th line gives $a_i$, the sanity value of the $i$-th cow.", "outputFormat": "Output the number of valid grouping schemes modulo $10^9 + 9$.", "hint": "For example, for the sequence $2, 3, -3, 1$, all valid grouping schemes are as follows:\n- $\\texttt{(2 3 -3 1)}$\n- $\\texttt{(2 3 -3) (1)}$\n- $\\texttt{(2) (3 -3 1)}$\n- $\\texttt{(2) (3 -3) (1)}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11FEB] Generic Cow Protests G", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 10^5$）排成一列，正在进行一场抗议活动。第 $i$ 头奶牛的理智度为 $a_i$（$-10^4 \\leq a_i \\leq 10^4$）。\n\nFJ 希望奶牛在抗议时保持理性，为此，他打算将所有的奶牛隔离成若干个小组，每个小组内的奶牛的理智度总和都要不小于零。\n\n由于奶牛是按直线排列的，所以一个小组内的奶牛位置必须是连续的。请帮助 FJ 计算一下，满足条件的分组方案有多少种。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 头奶牛的理智度 $a_i$。", "outputFormat": "输出满足条件的分组方案对 $10^9+9$ 取模的结果。", "hint": "所有合法分组方案如下：\n\n- $\\texttt{(2 3 -3 1)}$\n- $\\texttt{(2 3 -3) (1)}$\n- $\\texttt{(2) (3 -3 1)}$\n- $\\texttt{(2) (3 -3) (1)}$", "locale": "zh-CN"}}}
{"pid": "P2345", "type": "P", "difficulty": 3, "samples": [["4\n3 1\n2 5\n2 6\n4 3", "57"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2004", "USACO", "树状数组", "cdq 分治"], "title": "[USACO04OPEN] MooFest G", "background": "[P5094 [USACO04OPEN] MooFest G 加强版](https://www.luogu.com.cn/problem/P5094)\n", "description": "约翰的 $n$ 头奶牛每年都会参加“哞哞大会”。\n\n哞哞大会是奶牛界的盛事。集会上的活动很多，比如堆干草，跨栅栏，摸牛仔的屁股等等。\n\n它们参加活动时会聚在一起，第 $i$ 头奶牛的坐标为 $x_i$，没有两头奶牛的坐标是相同的。\n\n奶牛们的叫声很大，第 $i$ 头和第 $j$ 头奶牛交流，会发出\n$\\max\\{v_i,v_j\\}\\times |x_i − x_j |$ \n的音量，其中 $v_i$ 和 $v_j$ 分别是第 $i$ 头和第 $j$ 头奶牛的听力。\n\n假设每对奶牛之间同时都在说话，请计算所有奶牛产生的音量之和是多少。", "inputFormat": "第一行：单个整数 $n$，$1\\le n\\le2\\times 10^4$\n\n第二行到第 $n + 1$ 行：第 $i + 1$ 行有两个整数 $v_i$ 和 $x_i$（$1\\le v_i,x_i\\le2\\times 10^4$）。", "outputFormat": "单个整数：表示所有奶牛产生的音量之和", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04OPEN] MooFest G", "background": "[P5094 [USACO04OPEN] MooFest G Enhanced Edition](https://www.luogu.com.cn/problem/P5094)", "description": "John’s $n$ cows attend “MooFest” every year.\n\nMooFest is a grand event in the cow world. There are many activities at the gathering, such as stacking hay, jumping over fences, and patting cowboys on the butt.\n\nWhen they participate in activities, they gather together. The $i$-th cow is located at coordinate $x_i$, and no two cows share the same coordinate.\n\nThe cows are very loud. When the $i$-th and $j$-th cows communicate, they produce a volume of $\\max\\{v_i, v_j\\} \\times |x_i - x_j|$, where $v_i$ and $v_j$ are the hearing abilities of cows $i$ and $j$, respectively.\n\nAssume that every pair of cows is talking at the same time. Please compute the sum of the volume produced by all cows.", "inputFormat": "- The first line: a single integer $n$, $1 \\le n \\le 2 \\times 10^4$.\n- Lines $2$ to $n + 1$: the $(i + 1)$-th line contains two integers $v_i$ and $x_i$ ($1 \\le v_i, x_i \\le 2 \\times 10^4$).", "outputFormat": "A single integer: the total volume produced by all cows.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04OPEN] MooFest G", "background": "[P5094 [USACO04OPEN] MooFest G 加强版](https://www.luogu.com.cn/problem/P5094)\n", "description": "约翰的 $n$ 头奶牛每年都会参加“哞哞大会”。\n\n哞哞大会是奶牛界的盛事。集会上的活动很多，比如堆干草，跨栅栏，摸牛仔的屁股等等。\n\n它们参加活动时会聚在一起，第 $i$ 头奶牛的坐标为 $x_i$，没有两头奶牛的坐标是相同的。\n\n奶牛们的叫声很大，第 $i$ 头和第 $j$ 头奶牛交流，会发出\n$\\max\\{v_i,v_j\\}\\times |x_i − x_j |$ \n的音量，其中 $v_i$ 和 $v_j$ 分别是第 $i$ 头和第 $j$ 头奶牛的听力。\n\n假设每对奶牛之间同时都在说话，请计算所有奶牛产生的音量之和是多少。", "inputFormat": "第一行：单个整数 $n$，$1\\le n\\le2\\times 10^4$\n\n第二行到第 $n + 1$ 行：第 $i + 1$ 行有两个整数 $v_i$ 和 $x_i$（$1\\le v_i,x_i\\le2\\times 10^4$）。", "outputFormat": "单个整数：表示所有奶牛产生的音量之和", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2346", "type": "P", "difficulty": 4, "samples": [["BWBO\nWBWB\nBWBW\nWBWO", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "深度优先搜索 DFS", "启发式搜索", "迭代加深搜索", "启发式迭代加深搜索 IDA*"], "title": "四子连棋", "background": "本题输入数据中存在 `\\r\\n`，请使用 `cin` 或者 `scanf` 等方式输入。", "description": "在一个 $4\\times 4$ 的棋盘上摆放了 $14$ 颗棋子，其中有 $7$ 颗白色棋子，$7$ 颗黑色棋子，有两个空白地带，任何一颗黑白棋子都可以向上下左右四个方向移动到相邻的空格，这叫行棋一步，黑白双方交替走棋，任意一方可以先走，如果某个时刻使得任意一种颜色的棋子形成四个一线（包括斜线），这样的状态为目标棋局。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dagckxxz.png)", "inputFormat": "从文件中读入一个 $4\\times 4$ 的初始棋局，黑棋子用 `B` 表示，白棋子用 `W` 表示，空格地带用 `O` 表示。\n", "outputFormat": "用最少的步数移动到目标棋局的步数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Connect Four", "background": "The input testdata for this problem contains `\\r\\n`; please use `cin` or `scanf` for input.", "description": "On a $4\\times 4$ board there are $14$ pieces: $7$ white and $7$ black, with two empty cells. Any piece may move up, down, left, or right into an adjacent empty cell; this counts as one move. Black and white move alternately, and either side may move first. If at any time the pieces of either color form four in a line (including diagonals), that state is a target board position.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dagckxxz.png)", "inputFormat": "Read a $4\\times 4$ initial board from the file. Black pieces are denoted by `B`, white pieces by `W`, and empty cells by `O`.", "outputFormat": "Output the minimum number of moves required to reach a target board position.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "四子连棋", "background": "本题输入数据中存在 `\\r\\n`，请使用 `cin` 或者 `scanf` 等方式输入。", "description": "在一个 $4\\times 4$ 的棋盘上摆放了 $14$ 颗棋子，其中有 $7$ 颗白色棋子，$7$ 颗黑色棋子，有两个空白地带，任何一颗黑白棋子都可以向上下左右四个方向移动到相邻的空格，这叫行棋一步，黑白双方交替走棋，任意一方可以先走，如果某个时刻使得任意一种颜色的棋子形成四个一线（包括斜线），这样的状态为目标棋局。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dagckxxz.png)", "inputFormat": "从文件中读入一个 $4\\times 4$ 的初始棋局，黑棋子用 `B` 表示，白棋子用 `W` 表示，空格地带用 `O` 表示。\n", "outputFormat": "用最少的步数移动到目标棋局的步数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2347", "type": "P", "difficulty": 2, "samples": [["1 1 0 0 0 0", "Total=3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "NOIP 提高组", "枚举", "深度优先搜索 DFS", "1996", "bitset"], "title": "[NOIP 1996 提高组] 砝码称重", "background": "", "description": "设有 $1\\mathrm{g}$、$2\\mathrm{g}$、$3\\mathrm{g}$、$5\\mathrm{g}$、$10\\mathrm{g}$、$20\\mathrm{g}$ 的砝码各若干枚（其总重 $ \\le 1000$），可以表示成多少种重量？", "inputFormat": "输入方式：$a_1 , a_2  ,a_3 , a_4 , a_5 ,a_6$\n\n（表示 $1\\mathrm{g}$ 砝码有 $a_1$ 个，$2\\mathrm{g}$ 砝码有 $a_2$ 个，$\\dots$，$20\\mathrm{g}$ 砝码有 $a_6$ 个）\n", "outputFormat": "输出方式：`Total=N`\n\n（$N$ 表示用这些砝码能称出的不同重量的个数，但不包括一个砝码也不用的情况）\n", "hint": "**【题目来源】**\n\nNOIP 1996 提高组第四题", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1996 Senior] Weighing with Weights", "background": "", "description": "Given several weights of $1\\mathrm{g}$, $2\\mathrm{g}$, $3\\mathrm{g}$, $5\\mathrm{g}$, $10\\mathrm{g}$, and $20\\mathrm{g}$ (whose total weight is $\\le 1000$), how many distinct total weights can be measured?", "inputFormat": "Input: $a_1, a_2, a_3, a_4, a_5, a_6$.\n\n(This means there are $a_1$ weights of $1\\mathrm{g}$, $a_2$ weights of $2\\mathrm{g}$, $\\dots$, and $a_6$ weights of $20\\mathrm{g}$.)", "outputFormat": "Output: `Total=N`.\n\n($N$ is the number of distinct total weights that can be measured using these weights, excluding the case where no weight is used.)", "hint": "Source: NOIP 1996 Senior Problem 4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1996 提高组] 砝码称重", "background": "", "description": "设有 $1\\mathrm{g}$、$2\\mathrm{g}$、$3\\mathrm{g}$、$5\\mathrm{g}$、$10\\mathrm{g}$、$20\\mathrm{g}$ 的砝码各若干枚（其总重 $ \\le 1000$），可以表示成多少种重量？", "inputFormat": "输入方式：$a_1 , a_2  ,a_3 , a_4 , a_5 ,a_6$\n\n（表示 $1\\mathrm{g}$ 砝码有 $a_1$ 个，$2\\mathrm{g}$ 砝码有 $a_2$ 个，$\\dots$，$20\\mathrm{g}$ 砝码有 $a_6$ 个）\n", "outputFormat": "输出方式：`Total=N`\n\n（$N$ 表示用这些砝码能称出的不同重量的个数，但不包括一个砝码也不用的情况）\n", "hint": "**【题目来源】**\n\nNOIP 1996 提高组第四题", "locale": "zh-CN"}}}
{"pid": "P2348", "type": "P", "difficulty": 3, "samples": [["2 10 1 1\r\nC2 K\r\nH5 B\r\nDT K\r\nSA M\r\nHQ P\r\nD4 K\r\nC6 P\r\nH9 M\r\nST B\r\nSK C\r\n", "D4 K\r\nC6 P\r\nH9 M\r\nST B\r\n"], ["2 7 1 1\r\nC2 K\r\nH5 B\r\nDT K\r\nSA M\r\nHQ P\r\nSK C\r\nC6 P\r\n", "Error:cards not enough\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "三国杀I（洗牌&发牌）", "background": "", "description": "一场三国杀一共有 $n$ 个玩家，每人需要 $4$ 张牌。牌库共 $k$ 张牌，需洗牌后再发。每张牌有以下 $3$ 个属性：\n\n一、牌的类型:\n\n1. 基础：杀（$\\texttt{K}$）、闪（$\\texttt{M}$）、桃（$\\texttt{P}$）、酒（$\\texttt{W}$）。\n\n2. 非延时锦囊：决斗（$\\texttt{B}$）、万箭（$\\texttt{A}$）、南蛮（$\\texttt{S}$）、五谷（$\\texttt{C}$）、桃园（$\\texttt{G}$）、拆（$\\texttt{D}$）、顺（$\\texttt{U}$）、铁索（$\\texttt{T}$）、无懈（$\\texttt{N}$）、火攻（$\\texttt{F}$）、无中（$\\texttt{E}$）。\n\n3. 延时锦囊：兵（$\\texttt{I}$）、乐（$\\texttt{K}$）、闪电（$\\texttt{L}$）。\n\n4. 马（$\\texttt{+,-}$）\n\n5. 武器：连弩（$\\texttt{LN}$）、青釭（$\\texttt{QG}$）、古锭（$\\texttt{GD}$）、寒冰（$\\texttt{HB}$）、雌雄（$\\texttt{CX}$）、吴六（$\\texttt{WL}$）、青龙（$\\texttt{QL}$）、丈八（$\\texttt{ZB}$）、贯石（$\\texttt{GS}$）、方天（$\\texttt{FT}$）、羽扇（$\\texttt{YS}$）、麒麟（$\\texttt{LG}$）。\n\n6. 防具：仁王（$\\texttt{RW}$）、八阵（$\\texttt{BZ}$）、藤甲（$\\texttt{TJ}$）、狮子（$\\texttt{SZ}$）\n\n二、花色：只有可能是 $\\texttt{C,H,S,D}$ 中的一个。\n\n三、点数：只有可能是 $\\texttt{A,2,3,4,5,6,7,8,9,T,J,Q,K}$（T代表10，从小到大）中的一个。\n\n洗牌方式的介绍：一次洗牌过后，从上到下依次是：$\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1,1,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+2,2,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+3,3, ... ,k,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor$（可以有奇数张牌，最后一张牌直接忽略掉）。\n\n发牌方式的介绍：从第 $1$ 张牌开始，从上到下依次将第 $i$ 张牌给第 $[(i-1)\\mod n+1]$ 号玩家。\n\n已知一共洗了 $m$ 次牌，现在问你第 $p$ 位玩家发到的 $4$ 张牌有哪些。\n\n\n\n", "inputFormat": "输入一共 $k+1$ 行。\n\n第一行 $4$ 个正整数 $n,k,m,p$。  \n随后 $k$ 行，每行两个字符串，其中第一个字符串第一个字符表示花色，第二个字符表示点数，第二个字符串表示牌的类型。输出玩家拥有的牌的时候亦按照此格式输出。\n\n$n,k,m,p$ 的含义见题意所述。", "outputFormat": "输出共 $4$ 行，每行一个字符串，表示第 $p$ 位玩家拥有的 $4$ 张牌（输出应包括每张牌的**花色、点数和类型**，格式同输入）。\n\n如果牌数不够，输出 `Error:cards not enough`。", "hint": "\n对于 $100\\%$ 的数据，满足 $1\\leqslant p\\leqslant n\\leqslant 1000,1\\leqslant k\\leqslant 100000,1\\leqslant m\\leqslant 80$。", "locale": "zh-CN", "translations": {"en": {"title": "Sanguosha I (Shuffling & Dealing)", "background": "", "description": "A game of Sanguosha has $n$ players, and each player needs $4$ cards. The deck has $k$ cards, which must be shuffled before dealing. Each card has the following $3$ attributes:\n\n1. Card type:\n   1) Basic: Sha ($\\texttt{K}$), Shan ($\\texttt{M}$), Tao ($\\texttt{P}$), Jiu ($\\texttt{W}$).\n   2) Non-delayed tactic: Juedou ($\\texttt{B}$), Wanjian ($\\texttt{A}$), Nanman ($\\texttt{S}$), Wugu ($\\texttt{C}$), Taoyuan ($\\texttt{G}$), Chai ($\\texttt{D}$), Shun ($\\texttt{U}$), Tiesuo ($\\texttt{T}$), Wuxie ($\\texttt{N}$), Huogong ($\\texttt{F}$), Wuzhong ($\\texttt{E}$).\n   3) Delayed tactic: Bing ($\\texttt{I}$), Le ($\\texttt{K}$), Shandian ($\\texttt{L}$).\n   4) Mounts ($\\texttt{+,-}$).\n   5) Weapon: Liannu ($\\texttt{LN}$), Qinggang ($\\texttt{QG}$), Guding ($\\texttt{GD}$), Hanbing ($\\texttt{HB}$), Cixiong ($\\texttt{CX}$), Wuliu ($\\texttt{WL}$), Qinglong ($\\texttt{QL}$), Zhangba ($\\texttt{ZB}$), Guanshi ($\\texttt{GS}$), Fangtian ($\\texttt{FT}$), Yushan ($\\texttt{YS}$), Qilin ($\\texttt{LG}$).\n   6) Armor: Renwang ($\\texttt{RW}$), Bazhen ($\\texttt{BZ}$), Tengjia ($\\texttt{TJ}$), Shizi ($\\texttt{SZ}$).\n\n2. Suit: one of $\\texttt{C,H,S,D}$.\n\n3. Rank: one of $\\texttt{A,2,3,4,5,6,7,8,9,T,J,Q,K}$ (T stands for 10, in ascending order).\n\nShuffling method: After one shuffle, from top to bottom the order becomes\n$\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1, 1, \\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+2, 2, \\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+3, 3, \\ldots, k, \\left\\lfloor\\dfrac{k}{2}\\right\\rfloor$\n(if there is an odd number of cards, the last extra card is simply ignored).\n\nDealing method: Starting from the $1$-st card, from top to bottom give the $i$-th card to player $[(i-1)\\mod n+1]$.\n\nGiven that the deck is shuffled $m$ times in total, determine which $4$ cards are dealt to player $p$.", "inputFormat": "The input has $k+1$ lines.\n\nThe first line contains $4$ positive integers $n, k, m, p$.  \nThen follow $k$ lines, each with two strings. In the first string, the first character is the suit and the second character is the rank; the second string is the card type. When outputting the player’s cards, use the same format.\n\nThe meanings of $n, k, m, p$ are as described above.", "outputFormat": "Output $4$ lines, each with one string, representing the $4$ cards owned by player $p$ (each line must include the card’s suit, rank, and type, in the same format as the input).\n\nIf there are not enough cards, output `Error:cards not enough`.", "hint": "Constraints: For $100\\%$ of the testdata, $1\\leqslant p\\leqslant n\\leqslant 1000, 1\\leqslant k\\leqslant 100000, 1\\leqslant m\\leqslant 80$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三国杀I（洗牌&发牌）", "background": "", "description": "一场三国杀一共有 $n$ 个玩家，每人需要 $4$ 张牌。牌库共 $k$ 张牌，需洗牌后再发。每张牌有以下 $3$ 个属性：\n\n一、牌的类型:\n\n1. 基础：杀（$\\texttt{K}$）、闪（$\\texttt{M}$）、桃（$\\texttt{P}$）、酒（$\\texttt{W}$）。\n\n2. 非延时锦囊：决斗（$\\texttt{B}$）、万箭（$\\texttt{A}$）、南蛮（$\\texttt{S}$）、五谷（$\\texttt{C}$）、桃园（$\\texttt{G}$）、拆（$\\texttt{D}$）、顺（$\\texttt{U}$）、铁索（$\\texttt{T}$）、无懈（$\\texttt{N}$）、火攻（$\\texttt{F}$）、无中（$\\texttt{E}$）。\n\n3. 延时锦囊：兵（$\\texttt{I}$）、乐（$\\texttt{K}$）、闪电（$\\texttt{L}$）。\n\n4. 马（$\\texttt{+,-}$）\n\n5. 武器：连弩（$\\texttt{LN}$）、青釭（$\\texttt{QG}$）、古锭（$\\texttt{GD}$）、寒冰（$\\texttt{HB}$）、雌雄（$\\texttt{CX}$）、吴六（$\\texttt{WL}$）、青龙（$\\texttt{QL}$）、丈八（$\\texttt{ZB}$）、贯石（$\\texttt{GS}$）、方天（$\\texttt{FT}$）、羽扇（$\\texttt{YS}$）、麒麟（$\\texttt{LG}$）。\n\n6. 防具：仁王（$\\texttt{RW}$）、八阵（$\\texttt{BZ}$）、藤甲（$\\texttt{TJ}$）、狮子（$\\texttt{SZ}$）\n\n二、花色：只有可能是 $\\texttt{C,H,S,D}$ 中的一个。\n\n三、点数：只有可能是 $\\texttt{A,2,3,4,5,6,7,8,9,T,J,Q,K}$（T代表10，从小到大）中的一个。\n\n洗牌方式的介绍：一次洗牌过后，从上到下依次是：$\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1,1,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+2,2,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+3,3, ... ,k,\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor$（可以有奇数张牌，最后一张牌直接忽略掉）。\n\n发牌方式的介绍：从第 $1$ 张牌开始，从上到下依次将第 $i$ 张牌给第 $[(i-1)\\mod n+1]$ 号玩家。\n\n已知一共洗了 $m$ 次牌，现在问你第 $p$ 位玩家发到的 $4$ 张牌有哪些。\n\n\n\n", "inputFormat": "输入一共 $k+1$ 行。\n\n第一行 $4$ 个正整数 $n,k,m,p$。  \n随后 $k$ 行，每行两个字符串，其中第一个字符串第一个字符表示花色，第二个字符表示点数，第二个字符串表示牌的类型。输出玩家拥有的牌的时候亦按照此格式输出。\n\n$n,k,m,p$ 的含义见题意所述。", "outputFormat": "输出共 $4$ 行，每行一个字符串，表示第 $p$ 位玩家拥有的 $4$ 张牌（输出应包括每张牌的**花色、点数和类型**，格式同输入）。\n\n如果牌数不够，输出 `Error:cards not enough`。", "hint": "\n对于 $100\\%$ 的数据，满足 $1\\leqslant p\\leqslant n\\leqslant 1000,1\\leqslant k\\leqslant 100000,1\\leqslant m\\leqslant 80$。", "locale": "zh-CN"}}}
{"pid": "P2349", "type": "P", "difficulty": 4, "samples": [["7 8\n1 2 10\n2 3 12\n3 4 20\n4 7 8\n1 7 34\n2 5 10\n5 6 12\n6 4 13", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "O2优化", "最短路"], "title": "金字塔", "background": null, "description": "有一盗墓者潜入一金字塔盗宝。当她（难道是 Lara Croft ?）打开一个宝箱的时候，突然冒出一阵烟（潘多拉的盒子？），她迅速意识到形势不妙，三十六计走为上计……由于她盗得了金字塔的地图，所以她希望能找出最佳逃跑路线。地图上标有 $N$ 个室，她现在就在 $1$ 室，金字塔的出口在 $N$ 室。她知道一个秘密：那阵烟会让她在直接连接某两个室之间的通道内的行走速度减半。她希望找出一条逃跑路线，使得在最坏的情况下所用的时间最少。", "inputFormat": "输入文件的第一行有两个正整数 $N$（$3 \\le N \\le 100$）和 $M$（$3 \\le M \\le 2000$）；下面有 $M$ 行，每行有三个数正整数 $U$ 、 $V$ 、 $W$，表示直接从 $U$ 室跑到 $V$ 室（$V$ 室跑到 $U$ 室）需要 $W$（$3 \\le W \\le 255$）秒。", "outputFormat": "输出所求的最少时间（单位为秒）。", "hint": "样例解释 Sample Explain：\n\n基本上有三种路线：\n\n（1）$1 \\to 2 \\to 3 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $12$ ＋ $20$ ＋ $8$ ＝ $50$，最坏的情况是“ $3 \\to 4$ ”那一段，要多花 $20$ 秒（因为行走速度减半），所以这条路选最坏需要 $70$ 秒；\n\n（2）$1 \\to 2 \\to 5 \\to 6 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $10$ ＋ $12$ ＋ $13$ ＋ $8$ ＝ $53$，最坏的情况是“ $6 \\to 4$ ”那一段，要多花 $13$ 秒，所以这条路选最坏需要 $66$ 秒；\n\n（3）$1 \\to 7$。\n\n总时间为：$34$ ＝ $34$，最坏的情况是“ $1 \\to 7$ ”那一段，要多花 $34$ 秒，所以这条路选最坏需要 $68$ 秒。", "locale": "zh-CN", "translations": {"en": {"title": "Pyramid", "background": "", "description": "A tomb raider sneaks into a pyramid to steal treasure. When she (could it be Lara Croft?) opens a treasure chest, a sudden puff of smoke appears (Pandora's box?). She quickly realizes the danger and decides to flee. Since she has the pyramid’s map, she hopes to find the best escape route. The map shows $N$ rooms. She is currently in room $1$, and the exit is in room $N$. She knows a secret: the smoke will halve her running speed in the corridor that directly connects some pair of rooms. She wants to find an escape route that minimizes the time used in the worst case.", "inputFormat": "The first line contains two positive integers $N$ ($3 \\le N \\le 100$) and $M$ ($3 \\le M \\le 2000$).  \nEach of the following $M$ lines contains three positive integers $U$, $V$, and $W$, indicating that running directly between room $U$ and room $V$ takes $W$ seconds ($3 \\le W \\le 255$).", "outputFormat": "Output the minimal possible time, in seconds.", "hint": "Sample Explanation:\n\nThere are essentially three routes:\n\n(1) $1 \\to 2 \\to 3 \\to 4 \\to 7$.  \nTotal time: $10 + 12 + 20 + 8 = 50$. In the worst case, the segment $3 \\to 4$ takes twice as long, costing an extra $20$ seconds, so this route takes $70$ seconds in the worst case.\n\n(2) $1 \\to 2 \\to 5 \\to 6 \\to 4 \\to 7$.  \nTotal time: $10 + 10 + 12 + 13 + 8 = 53$. In the worst case, the segment $6 \\to 4$ takes twice as long, costing an extra $13$ seconds, so this route takes $66$ seconds in the worst case.\n\n(3) $1 \\to 7$.  \nTotal time: $34 = 34$. In the worst case, the segment $1 \\to 7$ takes twice as long, costing an extra $34$ seconds, so this route takes $68$ seconds in the worst case.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "金字塔", "background": null, "description": "有一盗墓者潜入一金字塔盗宝。当她（难道是 Lara Croft ?）打开一个宝箱的时候，突然冒出一阵烟（潘多拉的盒子？），她迅速意识到形势不妙，三十六计走为上计……由于她盗得了金字塔的地图，所以她希望能找出最佳逃跑路线。地图上标有 $N$ 个室，她现在就在 $1$ 室，金字塔的出口在 $N$ 室。她知道一个秘密：那阵烟会让她在直接连接某两个室之间的通道内的行走速度减半。她希望找出一条逃跑路线，使得在最坏的情况下所用的时间最少。", "inputFormat": "输入文件的第一行有两个正整数 $N$（$3 \\le N \\le 100$）和 $M$（$3 \\le M \\le 2000$）；下面有 $M$ 行，每行有三个数正整数 $U$ 、 $V$ 、 $W$，表示直接从 $U$ 室跑到 $V$ 室（$V$ 室跑到 $U$ 室）需要 $W$（$3 \\le W \\le 255$）秒。", "outputFormat": "输出所求的最少时间（单位为秒）。", "hint": "样例解释 Sample Explain：\n\n基本上有三种路线：\n\n（1）$1 \\to 2 \\to 3 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $12$ ＋ $20$ ＋ $8$ ＝ $50$，最坏的情况是“ $3 \\to 4$ ”那一段，要多花 $20$ 秒（因为行走速度减半），所以这条路选最坏需要 $70$ 秒；\n\n（2）$1 \\to 2 \\to 5 \\to 6 \\to 4 \\to 7$。\n\n总时间为：$10$ ＋ $10$ ＋ $12$ ＋ $13$ ＋ $8$ ＝ $53$，最坏的情况是“ $6 \\to 4$ ”那一段，要多花 $13$ 秒，所以这条路选最坏需要 $66$ 秒；\n\n（3）$1 \\to 7$。\n\n总时间为：$34$ ＝ $34$，最坏的情况是“ $1 \\to 7$ ”那一段，要多花 $34$ 秒，所以这条路选最坏需要 $68$ 秒。", "locale": "zh-CN"}}}
{"pid": "P2350", "type": "P", "difficulty": 6, "samples": [["1\n2\n2 2\n3 1\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "河南", "各省省选", "欧拉函数"], "title": "[HAOI2012] 外星人", "background": "", "description": "艾莉欧在她的被子上发现了一个数字 $N$，她觉得只要找出最小的 $x$ 使得，$\\varphi^x(N) = 1$。根据这个 $x$ 她就能找到曾经绑架她的外星人的线索了。当然，她是不会去算，请你帮助她算出最小的 $x$。\n\n$\\varphi^x(N)$ 表示嵌套 $x$ 次，不是幂。", "inputFormat": "第一行一个正整数 $\\mathrm{test}$，接下来 $\\mathrm{test}$ 组数据每组数据第一行一个正整数 $m$，接下来 $m$ 行每行两个正整数 $p_i, q_i$。\n\n其中 $\\displaystyle \\prod_{i = 1}^{m} p_i^{q_i}$ 为 $N$ 的标准分解形式，$\\prod$ 为连乘。", "outputFormat": "输出 $\\mathrm{test}$ 行，每行一个整数，表示答案。", "hint": "$\\varphi$ 为欧拉函数，$\\varphi(n)$ 即小于等于 $n$ 的数中与 $n$ 互质的数的个数。提示：$\\varphi(\\prod_{i=1}^mp_i^{q_i})=\\prod_{i=1}^m(p_i-1)\\times p_i^{q_i-1}$。\n\n#### 数据范围\n$30\\%$ 的数据，$N \\le 10^6$。\n\n$60\\%$ 的数据，$x \\le 100$。\n\n$100\\%$ 的数据，$\\mathrm{test} \\le 50$，$1 \\le p_i \\le {10}^5$，$1 \\le q_i \\le {10}^9$，$m \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Alien", "background": "", "description": "Elio found a number $N$ on her quilt. She wants to find the smallest $x$ such that $\\varphi^x(N) = 1$. Based on this $x$, she can find clues about the aliens who once abducted her. Of course, she will not do the computation herself; please help her compute the minimal $x$.\n\n$\\varphi^x(N)$ denotes iterating $\\varphi$ $x$ times, not an exponent.", "inputFormat": "The first line contains a positive integer $\\mathrm{test}$. Then for each of the $\\mathrm{test}$ test cases, the first line contains a positive integer $m$, followed by $m$ lines, each containing two positive integers $p_i, q_i$.\n\nHere $\\displaystyle \\prod_{i = 1}^{m} p_i^{q_i}$ is the standard factorization form of $N$, and $\\prod$ denotes a product.", "outputFormat": "Output $\\mathrm{test}$ lines, each containing one integer, the answer.", "hint": "$\\varphi$ is Euler's totient function. $\\varphi(n)$ is the number of integers not exceeding $n$ that are coprime to $n$. Hint: $\\varphi(\\prod_{i=1}^mp_i^{q_i})=\\prod_{i=1}^m(p_i-1)\\times p_i^{q_i-1}$.\n\nConstraints\n- For 30% of the testdata, $N \\le 10^6$.\n- For 60% of the testdata, $x \\le 100$.\n- For 100% of the testdata, $\\mathrm{test} \\le 50$, $1 \\le p_i \\le {10}^5$, $1 \\le q_i \\le {10}^9$, $m \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 外星人", "background": "", "description": "艾莉欧在她的被子上发现了一个数字 $N$，她觉得只要找出最小的 $x$ 使得，$\\varphi^x(N) = 1$。根据这个 $x$ 她就能找到曾经绑架她的外星人的线索了。当然，她是不会去算，请你帮助她算出最小的 $x$。\n\n$\\varphi^x(N)$ 表示嵌套 $x$ 次，不是幂。", "inputFormat": "第一行一个正整数 $\\mathrm{test}$，接下来 $\\mathrm{test}$ 组数据每组数据第一行一个正整数 $m$，接下来 $m$ 行每行两个正整数 $p_i, q_i$。\n\n其中 $\\displaystyle \\prod_{i = 1}^{m} p_i^{q_i}$ 为 $N$ 的标准分解形式，$\\prod$ 为连乘。", "outputFormat": "输出 $\\mathrm{test}$ 行，每行一个整数，表示答案。", "hint": "$\\varphi$ 为欧拉函数，$\\varphi(n)$ 即小于等于 $n$ 的数中与 $n$ 互质的数的个数。提示：$\\varphi(\\prod_{i=1}^mp_i^{q_i})=\\prod_{i=1}^m(p_i-1)\\times p_i^{q_i-1}$。\n\n#### 数据范围\n$30\\%$ 的数据，$N \\le 10^6$。\n\n$60\\%$ 的数据，$x \\le 100$。\n\n$100\\%$ 的数据，$\\mathrm{test} \\le 50$，$1 \\le p_i \\le {10}^5$，$1 \\le q_i \\le {10}^9$，$m \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P2351", "type": "P", "difficulty": 6, "samples": [["6\n1,2,3,4,5", "Case #1:\n1\n2\n3\n6\nCase #2:\n1\n2\n6\nCase #3:\n1\n3\n6\nCase #4:\n1\n3\n6\nCase #5:\n1\n3\n6\nCase #6:\n1\n2\n6\nCase #7:\n1\n2\n3\n6\nCase #8:\n1\n6\nCase #9:\n1\n2\n6\nCase #10:\n1\n3\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "各省省选", "山东", "Ad-hoc"], "title": "[SDOI2012] 吊灯", "background": "山东省省队选拔赛第二试（第一天）\n", "description": "Alice 家里有一盏很大的吊灯。所谓吊灯，就是由很多个灯泡组成。只有一个灯泡是挂在天花板上的，剩下的灯泡都是挂在其他的灯泡上的。也就是说，整个吊灯实际上类似于**一棵树**。其中编号为 $1$ 的灯泡是挂在天花板上的，剩下的灯泡都是挂在编号小于自己的灯泡上的。\n\n现在，Alice 想要办一场派对，她想改造一下这盏吊灯，将灯泡换成不同的颜色。她希望相同颜色的灯泡都是相连的，并且每一种颜色的灯泡个数都是相同的。\n\nAlice 希望你能告诉她，总共有哪些方案。\n\nAlice 是一个贪心的孩子，如果她发现方案不够多，或者太多了，就会很不高兴，于是她会尝试调整。对于编号为 $x$（$x\\neq 1$）的灯泡，如果原来是挂在编号为 $f_x$ 的灯泡上，那么 Alice 会把第 $x$ 个灯泡挂到第 $(f_x + 19940105)\\bmod (x-1) + 1$ 个灯泡上。\n\n由于九在古汉语中表示极大的数，于是，Alice 决定只调整 $9$ 次。对于原始状态和每一次调整过的状态，Alice 希望你依次告诉她每种状态下有哪些方案。\n", "inputFormat": "第一行一个整数 $n$，表示灯泡的数量。\n\n接下来一行，有 $n-1$ 个整数 $U_i$，第 $i$ 个数表示第 $i+1$ 个灯泡挂在了第 $U_i$ 个的下面。保证编号为 $1$ 的灯泡是挂在天花板上的。数字之间用逗号（西文标点）`,` 隔开且最后一个数字后面没有逗号。\n", "outputFormat": "对于 $10$ 种状态下的方案，需要按照顺序依次输出。\n\n对于每一种状态，需要先输出单独的一行，表示状态编号，如样例所示。\n\n之后若干行，每行 $1$ 个整数，表示划分方案中每种颜色的灯泡个数。\n\n按升序输出。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 3\\times 10^3$。\n\n对于 $40\\%$ 的数据，$n\\leq 5\\times 10^4$。\n\n对于 $50\\%$ 的数据，$n\\leq 10^5$。\n\n对于 $60\\%$ 的数据，$n\\leq 3\\times 10^5$。\n\n对于 $70\\%$ 的数据，$n\\leq 7\\times 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 1.2\\times 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Chandelier", "background": "Shandong Provincial Team Selection, Second Test (Day 1).", "description": "", "inputFormat": "", "outputFormat": "For the plans of the $10$ states, output them in order.\n\nFor each state, first output a separate line indicating the state index, as shown in the sample.\n\nThen output several lines, each containing $1$ integer, representing the number of bulbs per color in a valid partition.\n\nOutput in ascending order.", "hint": "For $20\\%$ of the testdata, $n \\leq 3 \\times 10^3$.\n\nFor $40\\%$ of the testdata, $n \\leq 5 \\times 10^4$.\n\nFor $50\\%$ of the testdata, $n \\leq 10^5$.\n\nFor $60\\%$ of the testdata, $n \\leq 3 \\times 10^5$.\n\nFor $70\\%$ of the testdata, $n \\leq 7 \\times 10^5$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 1.2 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 吊灯", "background": "山东省省队选拔赛第二试（第一天）\n", "description": "Alice 家里有一盏很大的吊灯。所谓吊灯，就是由很多个灯泡组成。只有一个灯泡是挂在天花板上的，剩下的灯泡都是挂在其他的灯泡上的。也就是说，整个吊灯实际上类似于**一棵树**。其中编号为 $1$ 的灯泡是挂在天花板上的，剩下的灯泡都是挂在编号小于自己的灯泡上的。\n\n现在，Alice 想要办一场派对，她想改造一下这盏吊灯，将灯泡换成不同的颜色。她希望相同颜色的灯泡都是相连的，并且每一种颜色的灯泡个数都是相同的。\n\nAlice 希望你能告诉她，总共有哪些方案。\n\nAlice 是一个贪心的孩子，如果她发现方案不够多，或者太多了，就会很不高兴，于是她会尝试调整。对于编号为 $x$（$x\\neq 1$）的灯泡，如果原来是挂在编号为 $f_x$ 的灯泡上，那么 Alice 会把第 $x$ 个灯泡挂到第 $(f_x + 19940105)\\bmod (x-1) + 1$ 个灯泡上。\n\n由于九在古汉语中表示极大的数，于是，Alice 决定只调整 $9$ 次。对于原始状态和每一次调整过的状态，Alice 希望你依次告诉她每种状态下有哪些方案。\n", "inputFormat": "第一行一个整数 $n$，表示灯泡的数量。\n\n接下来一行，有 $n-1$ 个整数 $U_i$，第 $i$ 个数表示第 $i+1$ 个灯泡挂在了第 $U_i$ 个的下面。保证编号为 $1$ 的灯泡是挂在天花板上的。数字之间用逗号（西文标点）`,` 隔开且最后一个数字后面没有逗号。\n", "outputFormat": "对于 $10$ 种状态下的方案，需要按照顺序依次输出。\n\n对于每一种状态，需要先输出单独的一行，表示状态编号，如样例所示。\n\n之后若干行，每行 $1$ 个整数，表示划分方案中每种颜色的灯泡个数。\n\n按升序输出。\n", "hint": "对于 $20\\%$ 的数据，$n\\leq 3\\times 10^3$。\n\n对于 $40\\%$ 的数据，$n\\leq 5\\times 10^4$。\n\n对于 $50\\%$ 的数据，$n\\leq 10^5$。\n\n对于 $60\\%$ 的数据，$n\\leq 3\\times 10^5$。\n\n对于 $70\\%$ 的数据，$n\\leq 7\\times 10^5$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 1.2\\times 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P2352", "type": "P", "difficulty": 4, "samples": [["4\n1 3\n2 4\n3 5\n4 7", "12\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "队爷的新书", "background": "", "description": "队爷即将出版新书，以记录他辉煌的虐题生涯。。。\n\n有 $n$ 家出版社对这本书表示了兴趣，并愿意给队爷支付 $p \\in [Min_{pay},Max_{pay}]$ 的报酬来得到这本书的出版权，每家出版社的 $Min_{pay}$ 和 $Max_{pay}$ 是不一样的。\n\n现在队爷希望你帮他找出一个报酬值 $p$，使得他获得的总报酬最多。（每一个 $Min_{pay} \\leq p \\leq Max_{pay}$ 的出版社都会付给队爷 $p$ 的报酬）。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行 $2$ 个整数 $Min_{payi}$ 和 $Max_{payi}$，为第 $i$ 家出版社愿支付的报酬范围。\n\n", "outputFormat": "只有一个整数 ans，为最大总报酬。\n", "hint": "【样例解释】\n\n当 $p = 4$ 时，有 $3$ 家出版社会给出报酬，此时最大。\n\n【数据规模与约定】\n\n对于 $20\\%$ 的数据，$1 \\leq Min_{pay},Max_{pay} \\leq 10000$；\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 1000,1 \\leq Min_{pay},Max_{pay} \\leq 10^6$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100000,1 \\leq Min_{pay},Max_{pay} \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Duiye's New Book", "background": "", "description": "Duiye is about to publish a new book to record his glorious problem-solving journey.\n\nThere are $n$ publishers interested in this book. Each is willing to pay a fee $p \\in [Min_{pay}, Max_{pay}]$ to obtain the publishing rights, where each publisher has its own $Min_{pay}$ and $Max_{pay}$.\n\nNow Duiye wants you to find a value $p$ that maximizes his total revenue. Every publisher with $Min_{pay} \\leq p \\leq Max_{pay}$ will pay $p$.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain two integers $Min_{payi}$ and $Max_{payi}$, which are the acceptable payment range of the $i$-th publisher.", "outputFormat": "Output a single integer ans, the maximum total payment.", "hint": "Sample Explanation:\n\nWhen $p = 4$, there are $3$ publishers who will pay, which is maximal.\n\nConstraints:\n\n- For $20\\%$ of the testdata, $1 \\leq Min_{pay}, Max_{pay} \\leq 10000$.\n- For $40\\%$ of the testdata, $1 \\leq n \\leq 1000, 1 \\leq Min_{pay}, Max_{pay} \\leq 10^6$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 100000, 1 \\leq Min_{pay}, Max_{pay} \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "队爷的新书", "background": "", "description": "队爷即将出版新书，以记录他辉煌的虐题生涯。。。\n\n有 $n$ 家出版社对这本书表示了兴趣，并愿意给队爷支付 $p \\in [Min_{pay},Max_{pay}]$ 的报酬来得到这本书的出版权，每家出版社的 $Min_{pay}$ 和 $Max_{pay}$ 是不一样的。\n\n现在队爷希望你帮他找出一个报酬值 $p$，使得他获得的总报酬最多。（每一个 $Min_{pay} \\leq p \\leq Max_{pay}$ 的出版社都会付给队爷 $p$ 的报酬）。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行 $2$ 个整数 $Min_{payi}$ 和 $Max_{payi}$，为第 $i$ 家出版社愿支付的报酬范围。\n\n", "outputFormat": "只有一个整数 ans，为最大总报酬。\n", "hint": "【样例解释】\n\n当 $p = 4$ 时，有 $3$ 家出版社会给出报酬，此时最大。\n\n【数据规模与约定】\n\n对于 $20\\%$ 的数据，$1 \\leq Min_{pay},Max_{pay} \\leq 10000$；\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 1000,1 \\leq Min_{pay},Max_{pay} \\leq 10^6$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100000,1 \\leq Min_{pay},Max_{pay} \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2353", "type": "P", "difficulty": 5, "samples": [["3 3\nabcabcbc\nabc\nbc\na\n1 3\n6 7\n1 8", "3\n0\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "哈希 hashing", "KMP 算法"], "title": "背单词", "background": "小明对英语一窍不通，令老师十分头疼。于是期末考试前夕，小明被逼着开始背单词……", "description": "老师给了小明一篇长度为 $N$ 的英语文章，然后让小明背 $M$ 个单词。为了确保小明不会在背单词时睡着，老师会向他提 $Q$ 个问题，每次老师随机选择一个区间 $[L,R]$，小明要回答在这段文字中他背过的单词总共出现过多少次。", "inputFormat": "第一行两个整数 $M,Q$ 如前所述。\n\n第二行为英语文章。\n\n接下来 $M$ 行每行一个需要背的单词。接下来Q行每行一个询问，包含两个整数 $L,R$（含端点），即给定的文字区间。", "outputFormat": "共 $Q$ 行，对每个询问输出一行表示答案。", "hint": "**【数据范围】**\n\n对于 $30\\%$ 的数据，$1 \\le N \\le 10^3$，$1 \\le Q \\le 10^3$。\n\n对于 $60\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^6$，$1 \\le M \\le 10$，$1 \\le Q \\le 10^6$，$1 \\le 每个单词的长度 \\le N$，$1 \\le L \\le R \\le N$。\n\n**【提示】**\n\n数据较大，请大家尽量采取高效率的读入输出方法。", "locale": "zh-CN", "translations": {"en": {"title": "Memorizing Words", "background": "Xiao Ming does not understand English at all, which gives his teacher a headache. So on the eve of the final exam, Xiao Ming is forced to start memorizing words.", "description": "The teacher gives Xiao Ming an English article of length $N$, and then asks him to memorize $M$ words. To make sure Xiao Ming does not fall asleep while memorizing, the teacher will ask $Q$ questions. Each time, the teacher randomly chooses an interval $[L,R]$, and Xiao Ming must answer how many times the words he has memorized occur in total within this segment of text.", "inputFormat": "The first line contains two integers $M,Q$ as described above.\nThe second line is the English article.\nThe next $M$ lines each contain one word to memorize. Then the next $Q$ lines each contain one query with two integers $L,R$ (inclusive), i.e., the given interval in the text.", "outputFormat": "Output $Q$ lines. For each query, output one line with the answer.", "hint": "Constraints\n\n- For 30% of the testdata, $1 \\le N \\le 10^3$, $1 \\le Q \\le 10^3$.\n- For 60% of the testdata, $1 \\le N \\le 10^5$, $1 \\le Q \\le 10^5$.\n- For 100% of the testdata, $1 \\le N \\le 10^6$, $1 \\le M \\le 10$, $1 \\le Q \\le 10^6$, the length of each word is between $1$ and $N$, and $1 \\le L \\le R \\le N$.\n\nHint\n\nThe testdata is large, so please use efficient input/output methods.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "背单词", "background": "小明对英语一窍不通，令老师十分头疼。于是期末考试前夕，小明被逼着开始背单词……", "description": "老师给了小明一篇长度为 $N$ 的英语文章，然后让小明背 $M$ 个单词。为了确保小明不会在背单词时睡着，老师会向他提 $Q$ 个问题，每次老师随机选择一个区间 $[L,R]$，小明要回答在这段文字中他背过的单词总共出现过多少次。", "inputFormat": "第一行两个整数 $M,Q$ 如前所述。\n\n第二行为英语文章。\n\n接下来 $M$ 行每行一个需要背的单词。接下来Q行每行一个询问，包含两个整数 $L,R$（含端点），即给定的文字区间。", "outputFormat": "共 $Q$ 行，对每个询问输出一行表示答案。", "hint": "**【数据范围】**\n\n对于 $30\\%$ 的数据，$1 \\le N \\le 10^3$，$1 \\le Q \\le 10^3$。\n\n对于 $60\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le Q \\le 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^6$，$1 \\le M \\le 10$，$1 \\le Q \\le 10^6$，$1 \\le 每个单词的长度 \\le N$，$1 \\le L \\le R \\le N$。\n\n**【提示】**\n\n数据较大，请大家尽量采取高效率的读入输出方法。", "locale": "zh-CN"}}}
{"pid": "P2354", "type": "P", "difficulty": 5, "samples": [["1 3 5 1 71 \n3 4 3 \n1 7 \n9 9 \n4 9 ", "1 2 6 8 9 12 "], ["654321 209 111 23 70000001 \n10 10 0 ", "1 3 7 10 14 15 16 21 23 30 44 52 55 70 72 88 94 95 97"], ["123456 137 701 101 10000007 \n20 20 0 ", "1 10 12 14 16 26 32 38 44 46 61 81 84 101 126 128 135 140 152 156 201 206 237 242 243 253 259 269 278 279 291 298 338 345 347 352 354 383 395 \n"]], "limits": {"time": [1000, 1000, 1000, 2000, 2000, 2000, 5000, 5000, 5000, 5000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["模拟", "贪心", "2014", "NOI"], "title": "[NOI2014] 随机数生成器", "background": null, "description": "小 H 最近在研究随机算法。随机算法往往需要通过调用随机数生成函数（例如 Pascal 中的 random 和 C/C++ 中的 rand）来获得随机性。事实上，随机数生成函数也并不是真正的“随机”，其一般都是利用某个算法计算得来的。\n\n比如，下面这个二次多项式递推算法就是一个常用算法：\n\n算法选定非负整数 $x_0,a,b,c,d$ 作为随机种子，并采用如下递推公式进行计算。\n\n对于任意 $i ≥ 1,x_i=(a \\times x_{i-1}^2+b \\times x_{i-1}+c)\\mod d$ 这样可以得到一个任意长度的非负整数数列 $\\{x_i\\},i \\ge 1$，一般来说，我们认为这个数列是随机的。\n\n利用随机序列 $\\{x_i\\},i\\ge1$，我们还可以采用如下算法来产生一个 $1$ 到 $K$ 的随机排列 $\\{ T_i \\},\\;i=1,\\dots,K$：\n\n1. 初始设 $T$ 为 $1$ 到 $K$ 的递增序列；\n2. 对 $T$ 进行 $K$ 次交换，第 $i$ 次交换，交换 $T_i$ 和 $T_{(x_i \\bmod i) + 1}$ 的值。\n\n此外，小 H 在这 $K$ 次交换的基础上，又额外进行了 $Q$ 次交换操作，对于第 $i$ 次额外交换，小 H 会选定两个下标 $u_i$ 和 $v_i$，并交换 $T_{u_i}$ 和 $T_{v_i}$ 的值。\n\n为了检验这个随机排列生成算法的实用性，小 H 设计了如下问题：\n\n小 H 有一个 $N$ 行 $M$ 列的棋盘，她首先按照上述过程，通过 $N \\times M + Q$ 次交换操作，生成了一个 $1\\sim N \\times M$ 的随机排列 $\\{T_i\\},\\;i=1,\\dots,N \\times M$，然后将这 $N \\times M$ 个数逐行逐列依次填入这个棋盘：也就是第 $i$ 行第 $j$ 列的格子上所填入的数应为 $ T_{(i-1) \\times M+j} $。\n\n接着小 H 希望从棋盘的左上角，也就是第一行第一列的格子出发，每次向右走或者向下走，在不走出棋盘的前提下，走到棋盘的右下角，也就是第 $N$ 行第 $M$ 列的格子。\n\n小 H 把所经过格子上的数字都记录了下来，并从小到大排序，这样，对于任何一条合法的移动路径，小 H 都可以得到一个长度为 $N + M - 1$ 的升序序列，我们称之为路径序列。\n\n小 H 想知道，她可能得到的字典序最小的路径序列应该是怎样的呢？", "inputFormat": "第 1 行包含 $5$ 个整数，依次为 $x_0,a,b,c,d$ ，描述小H采用的随机数生成算法所需的随机种子。\n\n第 2 行包含三个整数 $N,M,Q$ ，表示小H希望生成一个 $1$ 到 $N \\times M$ 的排列来填入她 $N$ 行 $M$ 列的棋盘，并且小H在初始的 $N \\times M$ 次交换操作后，又进行了 $Q$ 次额外的交换操作。\n\n接下来 $Q$ 行，第 $i$ 行包含两个整数 $u_i,v_i$，表示第 $i$ 次额外交换操作将交换 $T_{u_i}$和 $T_{v_i}$ 的值。", "outputFormat": "输出一行，包含 $N+M-1$ 个由空格隔开的正整数，表示可以得到的字典序最小的路径序列。", "hint": "对于样例 1，根据输入的随机种子，小 H 所得到的前 $12$ 个随机数 $x_i$ 为：\n\n$$\n\\begin{array}{rrrr}\n9&5&30&11\\\\\n64&42&36&22\\\\\n1&9&5&30\n\\end{array}\n$$\n\n根据这 $12$ 个随机数，小 H 在进行初始的 $12$ 次交换操作后得到的排列为：\n\n$$\n\\begin{array}{rrrr}\n6&9&1&4\\\\\n5&11&12&2\\\\\n7&10&3&8\n\\end{array}\n$$\n\n在进行额外的 $3$ 次交换操作之后，小 H 得到的最终的随机排列为：\n\n\n\n$$\\begin{array}{rrrr}\n12&9&1&7\\\\\n5&11&6&2\\\\\n4&10&3&8\n\\end{array}\n$$\n\n最优路径依次经过的数字为 ：$12-9-1-6-2-8$。\n\n所有测试数据的范围和特点如下表所示\n::cute-table{tuack}\n|测试点编号|$N,M$ 的规模|$Q$ 的规模|约定|\n|:-:|:-:|:-:|:-:|\n|$1$|$2\\le N,M\\le8$|$Q=0$|$0\\le a\\le300\\\\0\\le b,c\\le10^8\\\\0\\le x_0<d\\le10^8\\\\1\\le u_i,v_i\\le N\\times M$|\n|$2$|$2\\le N,M\\le200$|^|^|\n|$3$|^|^|^|\n|$4$|$2\\le N,M\\le2000$|$0\\le Q\\le50000$|^|\n|$5$|^|^|^|\n|$6$|^|^|^|\n|$7$|$2\\le N,M\\le5000$|^|^|\n|$8$|^|^|^|\n|$9$|^|^|^|\n|$10$|^|^|^|", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Random Number Generator", "background": "", "description": "Little H is studying randomized algorithms. Randomized algorithms often obtain randomness by calling random number generator functions (for example, random in Pascal and rand in C/C++). In fact, such functions are not truly “random”; they are usually computed by some algorithm.\n\nFor example, the following quadratic polynomial recurrence is a common algorithm:\n\nChoose non-negative integers $x_0, a, b, c, d$ as the random seed, and compute using the following recurrence.\n\nFor any $i \\ge 1$, $x_i = (a \\times x_{i-1}^2 + b \\times x_{i-1} + c) \\mod d$. In this way we can obtain a non-negative integer sequence of arbitrary length $\\{ x_i \\}, i \\ge 1$, and generally we regard this sequence as random.\n\nUsing the random sequence $\\{ x_i \\}, i \\ge 1$, we can generate a random permutation of $1$ to $K$, denoted $\\{ T_i \\}, i = 1 \\ldots K$, by the following algorithm:\n\n1. Initialize $T$ as the increasing sequence $1$ to $K$.\n2. Perform $K$ swaps. At the $i$-th swap, exchange the values of $T_i$ and $T_{(x_i \\bmod i) + 1}$.\n\nIn addition, on top of these $K$ swaps, Little H performs $Q$ extra swap operations. For the $i$-th extra swap, Little H chooses two indices $u_i$ and $v_i$, and swaps the values of $T_{u_i}$ and $T_{v_i}$.\n\nTo test the practicality of this random permutation generation algorithm, Little H designs the following problem:\n\nLittle H has a board with $N$ rows and $M$ columns. First, following the above process, after $N \\times M + Q$ swap operations, she generates a random permutation of $1 \\sim N \\times M$, denoted $\\{ T_i \\}, i = 1 \\ldots N \\times M$. Then she fills these $N \\times M$ numbers into the board row by row and column by column in order: that is, the number filled in the cell at row $i$, column $j$ is $T_{(i - 1) \\times M + j}$.\n\nNext, Little H wants to start from the top-left corner of the board, i.e., the cell at row $1$, column $1$. Each move goes either right or down, and without leaving the board, she reaches the bottom-right corner, i.e., the cell at row $N$, column $M$.\n\nLittle H records the numbers on all visited cells, and sorts them in ascending order. Thus, for any valid path, Little H can obtain an increasing sequence of length $N + M - 1$, which we call the path sequence.\n\nLittle H wants to know what the lexicographically smallest path sequence she can obtain is.", "inputFormat": "The first line contains $5$ integers $x_0, a, b, c, d$, describing the random seed required by Little H’s random number generation algorithm.\n\nThe second line contains three integers $N, M, Q$, indicating that Little H wants to generate a permutation of $1$ to $N \\times M$ to fill her $N$-row $M$-column board, and that after the initial $N \\times M$ swap operations, she performs $Q$ extra swap operations.\n\nThe next $Q$ lines each contain two integers $u_i, v_i$, indicating that at the $i$-th extra swap operation, the values of $T_{u_i}$ and $T_{v_i}$ are swapped.", "outputFormat": "Output one line containing $N + M - 1$ positive integers separated by spaces, representing the lexicographically smallest path sequence that can be obtained.", "hint": "For Sample 1, according to the input seeds, the first $12$ random numbers $x_i$ that Little H obtains are:\n\n9 5 30 11 64 42 36 22 1 9 5 30\n\nBased on these $12$ random numbers, after the initial $12$ swap operations, Little H obtains the permutation:\n\n6 9 1 4 5 11 12 2 7 10 3 8\n\nAfter the additional $3$ swap operations, Little H obtains the final random permutation:\n\n12 9 1 7 5 11 6 2 4 10 3 8\n\n\n```cpp\n12 9 1 7 \n5 11 6 2 \n4 10 3 8\n```\n\nThe optimal path passes through the numbers: 12-9-1-6-2-8.\n\n![](https://cdn.luogu.com.cn/upload/pic/2590.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 随机数生成器", "background": null, "description": "小 H 最近在研究随机算法。随机算法往往需要通过调用随机数生成函数（例如 Pascal 中的 random 和 C/C++ 中的 rand）来获得随机性。事实上，随机数生成函数也并不是真正的“随机”，其一般都是利用某个算法计算得来的。\n\n比如，下面这个二次多项式递推算法就是一个常用算法：\n\n算法选定非负整数 $x_0,a,b,c,d$ 作为随机种子，并采用如下递推公式进行计算。\n\n对于任意 $i ≥ 1,x_i=(a \\times x_{i-1}^2+b \\times x_{i-1}+c)\\mod d$ 这样可以得到一个任意长度的非负整数数列 $\\{x_i\\},i \\ge 1$，一般来说，我们认为这个数列是随机的。\n\n利用随机序列 $\\{x_i\\},i\\ge1$，我们还可以采用如下算法来产生一个 $1$ 到 $K$ 的随机排列 $\\{ T_i \\},\\;i=1,\\dots,K$：\n\n1. 初始设 $T$ 为 $1$ 到 $K$ 的递增序列；\n2. 对 $T$ 进行 $K$ 次交换，第 $i$ 次交换，交换 $T_i$ 和 $T_{(x_i \\bmod i) + 1}$ 的值。\n\n此外，小 H 在这 $K$ 次交换的基础上，又额外进行了 $Q$ 次交换操作，对于第 $i$ 次额外交换，小 H 会选定两个下标 $u_i$ 和 $v_i$，并交换 $T_{u_i}$ 和 $T_{v_i}$ 的值。\n\n为了检验这个随机排列生成算法的实用性，小 H 设计了如下问题：\n\n小 H 有一个 $N$ 行 $M$ 列的棋盘，她首先按照上述过程，通过 $N \\times M + Q$ 次交换操作，生成了一个 $1\\sim N \\times M$ 的随机排列 $\\{T_i\\},\\;i=1,\\dots,N \\times M$，然后将这 $N \\times M$ 个数逐行逐列依次填入这个棋盘：也就是第 $i$ 行第 $j$ 列的格子上所填入的数应为 $ T_{(i-1) \\times M+j} $。\n\n接着小 H 希望从棋盘的左上角，也就是第一行第一列的格子出发，每次向右走或者向下走，在不走出棋盘的前提下，走到棋盘的右下角，也就是第 $N$ 行第 $M$ 列的格子。\n\n小 H 把所经过格子上的数字都记录了下来，并从小到大排序，这样，对于任何一条合法的移动路径，小 H 都可以得到一个长度为 $N + M - 1$ 的升序序列，我们称之为路径序列。\n\n小 H 想知道，她可能得到的字典序最小的路径序列应该是怎样的呢？", "inputFormat": "第 1 行包含 $5$ 个整数，依次为 $x_0,a,b,c,d$ ，描述小H采用的随机数生成算法所需的随机种子。\n\n第 2 行包含三个整数 $N,M,Q$ ，表示小H希望生成一个 $1$ 到 $N \\times M$ 的排列来填入她 $N$ 行 $M$ 列的棋盘，并且小H在初始的 $N \\times M$ 次交换操作后，又进行了 $Q$ 次额外的交换操作。\n\n接下来 $Q$ 行，第 $i$ 行包含两个整数 $u_i,v_i$，表示第 $i$ 次额外交换操作将交换 $T_{u_i}$和 $T_{v_i}$ 的值。", "outputFormat": "输出一行，包含 $N+M-1$ 个由空格隔开的正整数，表示可以得到的字典序最小的路径序列。", "hint": "对于样例 1，根据输入的随机种子，小 H 所得到的前 $12$ 个随机数 $x_i$ 为：\n\n$$\n\\begin{array}{rrrr}\n9&5&30&11\\\\\n64&42&36&22\\\\\n1&9&5&30\n\\end{array}\n$$\n\n根据这 $12$ 个随机数，小 H 在进行初始的 $12$ 次交换操作后得到的排列为：\n\n$$\n\\begin{array}{rrrr}\n6&9&1&4\\\\\n5&11&12&2\\\\\n7&10&3&8\n\\end{array}\n$$\n\n在进行额外的 $3$ 次交换操作之后，小 H 得到的最终的随机排列为：\n\n\n\n$$\\begin{array}{rrrr}\n12&9&1&7\\\\\n5&11&6&2\\\\\n4&10&3&8\n\\end{array}\n$$\n\n最优路径依次经过的数字为 ：$12-9-1-6-2-8$。\n\n所有测试数据的范围和特点如下表所示\n::cute-table{tuack}\n|测试点编号|$N,M$ 的规模|$Q$ 的规模|约定|\n|:-:|:-:|:-:|:-:|\n|$1$|$2\\le N,M\\le8$|$Q=0$|$0\\le a\\le300\\\\0\\le b,c\\le10^8\\\\0\\le x_0<d\\le10^8\\\\1\\le u_i,v_i\\le N\\times M$|\n|$2$|$2\\le N,M\\le200$|^|^|\n|$3$|^|^|^|\n|$4$|$2\\le N,M\\le2000$|$0\\le Q\\le50000$|^|\n|$5$|^|^|^|\n|$6$|^|^|^|\n|$7$|$2\\le N,M\\le5000$|^|^|\n|$8$|^|^|^|\n|$9$|^|^|^|\n|$10$|^|^|^|", "locale": "zh-CN"}}}
{"pid": "P2356", "type": "P", "difficulty": 2, "samples": [["4\n1 1 1 0\n1 1 1 1\n1 1 1 1\n0 1 1 1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "洛谷原创", "枚举"], "title": "弹珠游戏", "background": null, "description": "MedalPluS 和他的小伙伴 NOIRP 发掘了一个骨灰级别的游戏——超级弹珠。\n\n游戏的内容是：在一个 $n \\times n$ 的矩阵里，有若干个敌人，你的弹珠可以摧毁敌人，但只能攻击你所在的行、列里的所有敌人，然后你就可以获得他们的分数之和，现在请你选择一个你的位置，使得能击杀的敌人最多，注意，你不能和敌人在一个地方。", "inputFormat": "输入有两行，第一行一个正整数 $n$，接下来 $n$ 行，每行 $n$ 列，如果有敌人则为一个正整数，否则为 $0$。", "outputFormat": "输出共一行，最多分数，如果连你的容身之地都没有，请输出“Bad Game!”", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据，$1\\leq n\\leq 10$；\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 1000$，保证容身之地的数量小于 $10000$，保证每个位置敌人的数量不超过 $1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Marble Game", "background": "", "description": "MedalPluS and his friend NOIRP discovered a veteran game called \"Super Marble\".\n\nThe game is as follows: In an $n \\times n$ matrix, there are several enemies. Your marble can destroy enemies, but it can only attack all enemies in your current row and column. You then obtain the sum of their scores. Please choose a position for yourself so that the total score you can obtain is maximized. Note that you cannot stand on a cell occupied by an enemy.", "inputFormat": "The first line contains a positive integer $n$. Then follow $n$ lines, each containing $n$ integers. A positive integer indicates there is an enemy on that cell with that score; $0$ indicates an empty cell.", "outputFormat": "Output a single line containing the maximum score. If there is no place for you to stand (i.e., there is no cell with value $0$), output \"Bad Game!\".", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $1 \\leq n \\leq 10$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 1000$. It is guaranteed that the number of safe cells is less than $10000$, and the value at each cell does not exceed $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "弹珠游戏", "background": null, "description": "MedalPluS 和他的小伙伴 NOIRP 发掘了一个骨灰级别的游戏——超级弹珠。\n\n游戏的内容是：在一个 $n \\times n$ 的矩阵里，有若干个敌人，你的弹珠可以摧毁敌人，但只能攻击你所在的行、列里的所有敌人，然后你就可以获得他们的分数之和，现在请你选择一个你的位置，使得能击杀的敌人最多，注意，你不能和敌人在一个地方。", "inputFormat": "输入有两行，第一行一个正整数 $n$，接下来 $n$ 行，每行 $n$ 列，如果有敌人则为一个正整数，否则为 $0$。", "outputFormat": "输出共一行，最多分数，如果连你的容身之地都没有，请输出“Bad Game!”", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据，$1\\leq n\\leq 10$；\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 1000$，保证容身之地的数量小于 $10000$，保证每个位置敌人的数量不超过 $1000$。", "locale": "zh-CN"}}}
{"pid": "P2357", "type": "P", "difficulty": 4, "samples": [["5 7\n0 0 0 0 0\n1 1 5 1\n1 1 3 3\n2 3\n3 1\n4 1 5\n2 1\n5", "16\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "树状数组", "分块"], "title": "守墓人", "background": "![](https://cdn.luogu.com.cn/upload/pic/1406.png) \n\n在一个荒凉的墓地上，有一个令人尊敬的守墓人，他看守的墓地从来没有被盗过， 所以人们很放心的把自己的先人的墓安顿在他那。\n\n守墓人能看好这片墓地是必然而不是偶然……\n\n因为……守墓人懂风水 0.0", "description": "他把墓地分为主要墓碑和次要墓碑， 主要墓碑只能有 $1$ 个， 守墓人把他记为 $1$ 号， 而次要墓碑有 $n-1$ 个，守墓人将之编号为 $2,3\\dots n$，所以构成了一个有 $n$ 个墓碑的墓地。\n\n而每个墓碑有一个初始的风水值，这些风水值决定了墓地的风水的好坏，所以守墓人需要经常来查询这些墓碑。\n\n善于运用风水的守墓人，通过一次次逆天改命，使得自己拥有了无限寿命，没人知道他活了多久。这天，你幸运的拜访到了他，他要求你和他共同见证接下来几年他的战果，但不过他每次统计风水值之和都需要你来帮他计算，算错了他会要你命 QAQ\n\n风水也不是不可变，除非遭遇特殊情况，已知在接下来的 $2147483647$ 年里，会有 $f$ 次灾难，守墓人会有几个操作：\n\n1. 将 $[l,r]$ 这个区间所有的墓碑的风水值增加 $k$。\n\n2. 将主墓碑的风水值增加 $k$。\n\n3. 将主墓碑的风水值减少 $k$。\n\n4. 统计 $[l,r]$ 这个区间所有的墓碑的风水值之和。\n\n5. 求主墓碑的风水值。\n\n上面也说了，很多人会把先人的墓安居在这里，而且守墓人活了很多世纪→\\_→，墓碑的数量会多的你不敢相信= =\n\n守墓人和善的邀请你帮他完成这些操作，要不然哪天你的旅馆爆炸了，天上下刀子……\n\n为了活命，还是帮他吧。", "inputFormat": "第一行，两个正整数 $n,f$ 表示共有 $n$ 块墓碑，并且在接下来的 $2147483647 $年里，会有 $f$ 次世界末日。\n\n第二行，$n$ 个正整数，表示第 $i$ 块墓碑的风水值。\n\n接下来 $f$ 行，每行都会有一个针对世界末日的解决方案，如题所述，标记同题。", "outputFormat": "输出会有若干行，对 $4$ 和 $5$ 的提问做出回答，每个回答输出一行。", "hint": "$20\\%$ 的数据满足：$1\\leq n\\leq 100$。\n\n$50\\%$ 的数据满足：$1\\leq n\\leq 6000$。\n\n$100\\%$ 的数据满足：$1\\leq n,f\\leq 2 \\times 10^5$，答案不超过 64 位整数。", "locale": "zh-CN", "translations": {"en": {"title": "The Gravekeeper", "background": "![](https://cdn.luogu.com.cn/upload/pic/1406.png)\n\nIn a desolate cemetery, there is a respected gravekeeper. The cemetery he watches over has never been robbed, so people feel at ease placing their ancestors’ graves there.\n\nIt is inevitable, not accidental, that the gravekeeper can protect this cemetery...\n\nBecause... the gravekeeper understands feng shui 0.0", "description": "He divides the cemetery into a main tombstone and secondary tombstones. There can be only $1$ main tombstone, which he numbers as $1$. There are $n-1$ secondary tombstones, numbered $2,3\\dots n$, forming a cemetery with $n$ tombstones.\n\nEach tombstone has an initial feng shui value. These values determine the overall feng shui of the cemetery, so the gravekeeper needs to query them often.\n\nSkilled at using feng shui, the gravekeeper has defied fate again and again and gained infinite life. No one knows how long he has lived. Today, you are lucky to visit him. He asks you to witness his achievements in the coming years. However, every time he sums up feng shui values, he needs you to compute the result for him. If you get it wrong, he will take your life QAQ.\n\nFeng shui is not unchangeable. Unless something special happens, it stays the same. It is known that in the next $2147483647$ years, there will be $f$ disasters. The gravekeeper will perform several operations:\n\n1. Increase the feng shui value of all tombstones in interval $[l,r]$ by $k$.\n2. Increase the feng shui value of the main tombstone by $k$.\n3. Decrease the feng shui value of the main tombstone by $k$.\n4. Query the sum of feng shui values of all tombstones in interval $[l,r]$.\n5. Query the feng shui value of the main tombstone.\n\nAs mentioned above, many people settle their ancestors’ graves here, and the gravekeeper has lived for many centuries →_→, so the number of tombstones will be more than you can believe = =.\n\nThe gravekeeper kindly invites you to help him perform these operations; otherwise one day your inn might explode, and knives may fall from the sky...\n\nTo stay alive, please help him.", "inputFormat": "- The first line contains two positive integers $n, f$, meaning there are $n$ tombstones, and in the next $2147483647$ years there will be $f$ apocalypses.\n- The second line contains $n$ positive integers, where the $i$-th number is the initial feng shui value of the $i$-th tombstone.\n- The next $f$ lines each describe one operation, identified by the same indices as in the statement:\n  - Type $1$: `1 l r k` — increase all tombstones in $[l,r]$ by $k$.\n  - Type $2$: `2 k` — increase the main tombstone by $k$.\n  - Type $3$: `3 k` — decrease the main tombstone by $k$.\n  - Type $4$: `4 l r` — query the sum over $[l,r]$.\n  - Type $5$: `5` — query the main tombstone’s value.\n- Indices are $1$-based.", "outputFormat": "Print several lines. For each query of type $4$ or $5$, output the answer on a separate line.", "hint": "Constraints\n\n$20\\%$ of the testdata satisfies: $1\\leq n\\leq 100$.\n\n$50\\%$ of the testdata satisfies: $1\\leq n\\leq 6000$.\n\n$100\\%$ of the testdata satisfies: $1\\leq n,f\\leq 2 \\times 10^5$, and the answers do not exceed 64-bit integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "守墓人", "background": "![](https://cdn.luogu.com.cn/upload/pic/1406.png) \n\n在一个荒凉的墓地上，有一个令人尊敬的守墓人，他看守的墓地从来没有被盗过， 所以人们很放心的把自己的先人的墓安顿在他那。\n\n守墓人能看好这片墓地是必然而不是偶然……\n\n因为……守墓人懂风水 0.0", "description": "他把墓地分为主要墓碑和次要墓碑， 主要墓碑只能有 $1$ 个， 守墓人把他记为 $1$ 号， 而次要墓碑有 $n-1$ 个，守墓人将之编号为 $2,3\\dots n$，所以构成了一个有 $n$ 个墓碑的墓地。\n\n而每个墓碑有一个初始的风水值，这些风水值决定了墓地的风水的好坏，所以守墓人需要经常来查询这些墓碑。\n\n善于运用风水的守墓人，通过一次次逆天改命，使得自己拥有了无限寿命，没人知道他活了多久。这天，你幸运的拜访到了他，他要求你和他共同见证接下来几年他的战果，但不过他每次统计风水值之和都需要你来帮他计算，算错了他会要你命 QAQ\n\n风水也不是不可变，除非遭遇特殊情况，已知在接下来的 $2147483647$ 年里，会有 $f$ 次灾难，守墓人会有几个操作：\n\n1. 将 $[l,r]$ 这个区间所有的墓碑的风水值增加 $k$。\n\n2. 将主墓碑的风水值增加 $k$。\n\n3. 将主墓碑的风水值减少 $k$。\n\n4. 统计 $[l,r]$ 这个区间所有的墓碑的风水值之和。\n\n5. 求主墓碑的风水值。\n\n上面也说了，很多人会把先人的墓安居在这里，而且守墓人活了很多世纪→\\_→，墓碑的数量会多的你不敢相信= =\n\n守墓人和善的邀请你帮他完成这些操作，要不然哪天你的旅馆爆炸了，天上下刀子……\n\n为了活命，还是帮他吧。", "inputFormat": "第一行，两个正整数 $n,f$ 表示共有 $n$ 块墓碑，并且在接下来的 $2147483647 $年里，会有 $f$ 次世界末日。\n\n第二行，$n$ 个正整数，表示第 $i$ 块墓碑的风水值。\n\n接下来 $f$ 行，每行都会有一个针对世界末日的解决方案，如题所述，标记同题。", "outputFormat": "输出会有若干行，对 $4$ 和 $5$ 的提问做出回答，每个回答输出一行。", "hint": "$20\\%$ 的数据满足：$1\\leq n\\leq 100$。\n\n$50\\%$ 的数据满足：$1\\leq n\\leq 6000$。\n\n$100\\%$ 的数据满足：$1\\leq n,f\\leq 2 \\times 10^5$，答案不超过 64 位整数。", "locale": "zh-CN"}}}
{"pid": "P2358", "type": "P", "difficulty": 3, "samples": [["0.26 0.50 0.50 0.18", "1.146"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何"], "title": "蚂蚁搬家", "background": "", "description": "边长为 $1$ 的正方体（自行脑补），有一只蚂蚁要从上表面上的一点出发爬往下表面的某一点，规定蚂蚁只能沿正方体表面爬行，要求编程求出一条从起点到终点的最短距离。\n\n起点和终点坐标从键盘输入，设定上下两个表面的坐标原点均为正方形的中心，且两个表面的坐标系的 $X$ 轴和 $Y$ 轴方向一致，输出时保留三位小数。", "inputFormat": "$4$ 个实数（$-0.5$ 到 $0.5$ 之间），分别表示出发点和目的点的坐标。", "outputFormat": "最短距离\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Ant Moving", "background": "", "description": "Consider a cube with edge length $1$. An ant starts from a point on the top face and crawls to a point on the bottom face. The ant can only move along the surface of the cube. Write a program to compute a shortest distance from the start to the end along the surface.\n\nThe coordinates of the start and end points are read from the keyboard. The coordinate origins on both the top and bottom faces are at the centers of their squares, and the $X$-axis and $Y$-axis directions of the two face coordinate systems are aligned. Output the answer rounded to three decimal places.", "inputFormat": "$4$ real numbers (each in $[-0.5, 0.5]$), representing the coordinates of the starting point and the destination point.", "outputFormat": "The shortest distance.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "蚂蚁搬家", "background": "", "description": "边长为 $1$ 的正方体（自行脑补），有一只蚂蚁要从上表面上的一点出发爬往下表面的某一点，规定蚂蚁只能沿正方体表面爬行，要求编程求出一条从起点到终点的最短距离。\n\n起点和终点坐标从键盘输入，设定上下两个表面的坐标原点均为正方形的中心，且两个表面的坐标系的 $X$ 轴和 $Y$ 轴方向一致，输出时保留三位小数。", "inputFormat": "$4$ 个实数（$-0.5$ 到 $0.5$ 之间），分别表示出发点和目的点的坐标。", "outputFormat": "最短距离\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2359", "type": "P", "difficulty": 4, "samples": [["4", "204"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创", "素数判断,质数,筛法"], "title": "三素数数", "background": "蛟川书院的一道练习题", "description": "如果一个数的所有连续三位数字都是大于 $100$ 的素数，则该数称为三素数数。比如 $113797$ 是一个 $6$ 位的三素数数，因为 $113$、$137$、$379$、$797$ 都是素数。", "inputFormat": "一个整数 $n$（$3 \\le n \\le {10}^4$），表示三素数数的位数。", "outputFormat": "一个整数，表示 $n$ 位三素数的个数。\n\n由于这个数可能很大，你需要输出答案除以 ${10}^9+9$ 的余数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Three-Prime Number", "background": "A practice problem from Jiaochuan Shuyuan.", "description": "If every consecutive three-digit segment of a number is a prime greater than $100$, then the number is called a three-prime number. For example, $113797$ is a $6$-digit three-prime number, because $113$, $137$, $379$, $797$ are all prime.", "inputFormat": "An integer $n$ ($3 \\le n \\le {10}^4$), denoting the number of digits of a three-prime number.", "outputFormat": "A single integer, the number of $n$-digit three-prime numbers.\n\nBecause this number can be large, output the remainder of the answer modulo ${10}^9+9$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三素数数", "background": "蛟川书院的一道练习题", "description": "如果一个数的所有连续三位数字都是大于 $100$ 的素数，则该数称为三素数数。比如 $113797$ 是一个 $6$ 位的三素数数，因为 $113$、$137$、$379$、$797$ 都是素数。", "inputFormat": "一个整数 $n$（$3 \\le n \\le {10}^4$），表示三素数数的位数。", "outputFormat": "一个整数，表示 $n$ 位三素数的个数。\n\n由于这个数可能很大，你需要输出答案除以 ${10}^9+9$ 的余数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2360", "type": "P", "difficulty": 2, "samples": [["3 4 5\nS....\n.###.\n.##..\n###.#\n\n#####\n#####\n##.##\n##...\n\n#####\n#####\n#.###\n####E", "Escaped in 11 minute(s)."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2015", "洛谷原创", "洛谷月赛"], "title": "地下城主", "background": "", "description": "你参加了一项秘密任务，在任务过程中你被困在了一个 3D 的地下监狱里面，任务是计时的，你现在需要在最短的时间里面从地牢里面逃出来继续你的任务。地牢由若干层组成，每一层的形状都是长宽一样的矩形，地牢被分成了若干小格，当小格没有被岩石所占据时，你可以前往所在小格的前方，后方，左方，右方，上层，下层的小格。每走一小格花费一分钟时间。\n\n你能不能顺利的从地牢里面逃出来呢？如果可以，那所需要的最短时间又是多少呢？\n\n\n~~据说出口藏有神器。~~", "inputFormat": "\n第一行输入 $L,R,C$ （$L$ 为地牢的层数，$R$ 为每层小格的行数，$C$ 为每层小格的列数，其中 $1 \\leq L,R,C \\leq 30$）。\n\n第二行开始输入 $L$ 层地牢的格局，每一层有 $R$ 行，每行有 $C$ 个小格，两层地牢中间有空行隔开。\n\n输入的文件中，`S` 代表你的起始点，`E` 代表你所要到达的出口，`#` 为小格被岩石占据，`.` 表示没有被岩石占据。\n", "outputFormat": "输出包含一行，当你可以顺利到达出口时请输出：`Escaped in x minute(s).`\n\n其中，$x$ 代表你所花费的最短时间，否则请输出 `Trapped!`", "hint": "来源：POJ 2251\n", "locale": "zh-CN", "translations": {"en": {"title": "Dungeon Master", "background": "", "description": "You are on a secret mission, but you get trapped in a 3D underground prison. The mission is timed, and you need to escape from the dungeon in the shortest possible time to continue your task. The dungeon has several levels. Each level is an $R$ by $C$ rectangular grid. When a cell is not occupied by rock, you may move from your current cell to one of the six adjacent cells: front, back, left, right, the cell on the level above, or the cell on the level below. Each move to an adjacent cell takes 1 minute.\n\nCan you escape from the dungeon? If so, what is the minimal time required?\n\n~~It is said that an artifact is hidden at the exit.~~", "inputFormat": "The first line contains $L,R,C$ ($L$ is the number of levels, $R$ is the number of rows per level, and $C$ is the number of columns per level, where $1 \\leq L,R,C \\leq 30$).\n\nStarting from the second line, the layouts of the $L$ levels are given. Each level has $R$ lines, and each line has $C$ cells. There is a blank line between two consecutive levels.\n\nIn the input, `S` marks your starting position, `E` marks the exit, `#` means the cell is blocked by rock, and `.` means the cell is empty.", "outputFormat": "Output exactly one line. If you can reach the exit, print: `Escaped in x minute(s).`\n\nHere, $x$ is the minimal time you spend. Otherwise, print `Trapped!`.", "hint": "Source: POJ 2251.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地下城主", "background": "", "description": "你参加了一项秘密任务，在任务过程中你被困在了一个 3D 的地下监狱里面，任务是计时的，你现在需要在最短的时间里面从地牢里面逃出来继续你的任务。地牢由若干层组成，每一层的形状都是长宽一样的矩形，地牢被分成了若干小格，当小格没有被岩石所占据时，你可以前往所在小格的前方，后方，左方，右方，上层，下层的小格。每走一小格花费一分钟时间。\n\n你能不能顺利的从地牢里面逃出来呢？如果可以，那所需要的最短时间又是多少呢？\n\n\n~~据说出口藏有神器。~~", "inputFormat": "\n第一行输入 $L,R,C$ （$L$ 为地牢的层数，$R$ 为每层小格的行数，$C$ 为每层小格的列数，其中 $1 \\leq L,R,C \\leq 30$）。\n\n第二行开始输入 $L$ 层地牢的格局，每一层有 $R$ 行，每行有 $C$ 个小格，两层地牢中间有空行隔开。\n\n输入的文件中，`S` 代表你的起始点，`E` 代表你所要到达的出口，`#` 为小格被岩石占据，`.` 表示没有被岩石占据。\n", "outputFormat": "输出包含一行，当你可以顺利到达出口时请输出：`Escaped in x minute(s).`\n\n其中，$x$ 代表你所花费的最短时间，否则请输出 `Trapped!`", "hint": "来源：POJ 2251\n", "locale": "zh-CN"}}}
{"pid": "P2361", "type": "P", "difficulty": 4, "samples": [["2 2\r\n1 2 1\r\n1 1 1", "Second\r\n2 1 0\r\nBuwanle"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2015", "洛谷原创", "洛谷月赛"], "title": "yyy 棋", "background": "", "description": "uim 最近在研究一种游戏，叫做“ yyy 棋”。\n\n这种游戏的规则很简单，就是有一个 $A \\times B$ 的棋盘和黑白两色的棋子，两个人轮流在下在格子里面。你可以下黑棋或者白棋，中途可以更换颜色，可以下在任何你喜欢的地方，但是要符合以下条件：\n\n1. 这个位置不能已经被别的棋子占用。\n\n2. 你准备下的地方，上下左右一格范围中不能有和你准备下的颜色一样的棋子。\n\n3. 第一个下的人必须出黑子。\n\n\n当谁没有地方可以放子，谁就输了。\n\n\nuim 把你拉了出来，希望你好好地陪他玩。\n\n由于你很忙不太情愿，uim 就让步了，允许你选择先手或者后手。\n\n\n你突然灵光一现，想到了你小学奥数做到的一个问题：两个人坐在一张桌子的两边，轮流往桌子上放硬币，硬币不能重叠，谁放不下谁就输了。感觉有点类似，所以，你打算借鉴这个办法。\n\n你知道，通过某种策略，你一定是 $100\\%$ 赢的。\n\n既然如此，就让 uim 输个痛快吧。", "inputFormat": "第一行，$A, B$，两个整数，表示棋盘大小\n\n接下来若干行为 uim 依次下的顺序，每行三个整数 $x_i, y_i, c_i$，分别表示位置和颜色，颜色 $1$ 为黑，$0$ 为白。位置 $1 \\le x_i \\le A$，$  1 \\le y _ i \\le B$。\n\n如果 uim 发现没地方可走，就可能会耍赖，将棋子下在了不合法的地方。遇到这种情况，你也要指出。当然 uim 也有可能知道自己输了后就不下了。不存在游戏胜负还没定 uim 就投降的情况。\n", "outputFormat": "第一行，选择先手还是后手，先手请输出 `First`，后手输出 `Second`。\n\n接下来几行，如果你是第一个下子的，请输出你的第一步下法。然后对 uim 的下的每一个子做出回应。输出 $x _ i \\ y _ i \\ c _ i$，意思和上面相同。\n\n**你必须输出必胜的下法，否则你将 `WA` 这个点。**\n\n如果多个下法都是必胜点，请输出个能够尽早结束游戏的下法。\n\n**在你下完这个子之前，请假装你不知道uim的下一步走法。**\n\n如果 uim 耍赖，那么这一行输出 `Buwanle` 并结束程序，多余的输入就不管它了。", "hint": "$40\\%$ 数据，$2 \\le A, B \\le 3$。\n\n$100\\%$ 数据，$2 \\le A, B \\le 9$。\n\n然而作为月赛的第一题，自然是简单的。因为标程的核心代码只有 $6$ 行。并不需要使用什么复杂算法就可以得到答案。\n", "locale": "zh-CN", "translations": {"en": {"title": "yyy Chess", "background": "", "description": "uim has been studying a game called “yyy Chess.”\n\nThe rules are simple: there is an $A \\times B$ board and black/white pieces. Two players take turns placing a piece on a cell. You may play either black or white and may switch colors during the game. You may place a piece anywhere you like, as long as the following conditions are satisfied:\n1. The cell is not already occupied by another piece.\n2. In the four orthogonal neighboring cells (up, down, left, right) of the target cell, there must not be a piece of the same color as the one you are about to place.\n3. The first player must place a black piece.\n\nWhoever has no legal move loses.\n\nuim drags you in, hoping you will play with him.\n\nSince you are busy and reluctant, uim makes a concession and allows you to choose to play first or second.\n\nYou suddenly recall an elementary math puzzle: two people sit on opposite sides of a table and alternately place coins on the table; coins cannot overlap; whoever cannot place a coin loses. This feels similar, so you plan to borrow that idea.\n\nYou know that, with a certain strategy, you are guaranteed to win with $100\\%$ certainty.\n\nSince that is the case, let uim lose quickly.", "inputFormat": "The first line contains $A, B$, two integers representing the board size.\n\nThe following lines describe uim’s moves in order. Each line contains three integers $x_i, y_i, c_i$, representing the position and the color. Color $1$ is black, and color $0$ is white. Positions satisfy $1 \\le x_i \\le A$, $1 \\le y_i \\le B$.\n\nIf uim finds no legal move, he might cheat by placing a piece in an illegal position. In that case, you should also point it out. Of course, uim might also stop moving once he knows he has lost. It will not happen that uim resigns while the outcome of the game is still undecided.", "outputFormat": "On the first line, choose whether to play first or second. Output `First` for first, or `Second` for second.\n\nOn the following lines, if you are the first to move, output your first move. Then respond to each of uim’s moves. Output $x_i\\ y_i\\ c_i$, with the same meaning as above.\n\nYou must output a forced-winning strategy; otherwise you will get `WA` on this test.\n\nIf multiple strategies are winning, output one that finishes the game as early as possible.\n\nBefore you place your move, pretend you do not know uim’s next move.\n\nIf uim cheats, output `Buwanle` on that line and terminate the program, ignoring any remaining input.", "hint": "For $40\\%$ testdata, $2 \\le A, B \\le 3$.\n\nFor $100\\%$ testdata, $2 \\le A, B \\le 9$.\n\nAs the first problem in the monthly contest, it is naturally simple. The core of the reference solution has only 6 lines of code. No complex algorithms are needed to obtain the answer.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy 棋", "background": "", "description": "uim 最近在研究一种游戏，叫做“ yyy 棋”。\n\n这种游戏的规则很简单，就是有一个 $A \\times B$ 的棋盘和黑白两色的棋子，两个人轮流在下在格子里面。你可以下黑棋或者白棋，中途可以更换颜色，可以下在任何你喜欢的地方，但是要符合以下条件：\n\n1. 这个位置不能已经被别的棋子占用。\n\n2. 你准备下的地方，上下左右一格范围中不能有和你准备下的颜色一样的棋子。\n\n3. 第一个下的人必须出黑子。\n\n\n当谁没有地方可以放子，谁就输了。\n\n\nuim 把你拉了出来，希望你好好地陪他玩。\n\n由于你很忙不太情愿，uim 就让步了，允许你选择先手或者后手。\n\n\n你突然灵光一现，想到了你小学奥数做到的一个问题：两个人坐在一张桌子的两边，轮流往桌子上放硬币，硬币不能重叠，谁放不下谁就输了。感觉有点类似，所以，你打算借鉴这个办法。\n\n你知道，通过某种策略，你一定是 $100\\%$ 赢的。\n\n既然如此，就让 uim 输个痛快吧。", "inputFormat": "第一行，$A, B$，两个整数，表示棋盘大小\n\n接下来若干行为 uim 依次下的顺序，每行三个整数 $x_i, y_i, c_i$，分别表示位置和颜色，颜色 $1$ 为黑，$0$ 为白。位置 $1 \\le x_i \\le A$，$  1 \\le y _ i \\le B$。\n\n如果 uim 发现没地方可走，就可能会耍赖，将棋子下在了不合法的地方。遇到这种情况，你也要指出。当然 uim 也有可能知道自己输了后就不下了。不存在游戏胜负还没定 uim 就投降的情况。\n", "outputFormat": "第一行，选择先手还是后手，先手请输出 `First`，后手输出 `Second`。\n\n接下来几行，如果你是第一个下子的，请输出你的第一步下法。然后对 uim 的下的每一个子做出回应。输出 $x _ i \\ y _ i \\ c _ i$，意思和上面相同。\n\n**你必须输出必胜的下法，否则你将 `WA` 这个点。**\n\n如果多个下法都是必胜点，请输出个能够尽早结束游戏的下法。\n\n**在你下完这个子之前，请假装你不知道uim的下一步走法。**\n\n如果 uim 耍赖，那么这一行输出 `Buwanle` 并结束程序，多余的输入就不管它了。", "hint": "$40\\%$ 数据，$2 \\le A, B \\le 3$。\n\n$100\\%$ 数据，$2 \\le A, B \\le 9$。\n\n然而作为月赛的第一题，自然是简单的。因为标程的核心代码只有 $6$ 行。并不需要使用什么复杂算法就可以得到答案。\n", "locale": "zh-CN"}}}
{"pid": "P2362", "type": "P", "difficulty": 2, "samples": [["3\n9 10 1 9 8 7 6 3 4 6\n3 100 70 102\n6 40 37 23 89 91 12", "4 1\n2 2\n3 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创"], "title": "围栏木桩", "background": "", "description": "某农场有一个由按编号排列的 $n$ 根木桩构成的首尾不相连的围栏。现要在这个围栏中选取一些木桩，按照原有的编号次序排列之后，这些木桩高度成一个升序序列。所谓的升序序列就是序列中的任何一个数都不小于它之前的任何一个数。试编写程序从这个围栏中选取合适的木桩使得选出的木桩个数 $t$ 最大，并求出选取出 $t$ 根木桩的方案总数 $c$。\n", "inputFormat": "文件中的第一行只有一个数 $m$，表明随后有 $m$ 个问题的描述信息。每个问题的描述信息格式为 $n,h_1,h_2,h_3,…,h_n$（其中 $h_i(i=1,2,3,…,n)$ 表示第 $i$ 根木桩的高度）。\n", "outputFormat": "依次输出每个问题中 $t$ 和 $c$ 的解。每行输出一个问题的解。\n", "hint": "$m \\leq 5$，$n \\leq 20$，$h_i \\leq 150$。", "locale": "zh-CN", "translations": {"en": {"title": "Fence Posts", "background": "", "description": "A farm has a non-circular fence consisting of $n$ posts arranged in order by their indices. We want to select some posts such that, when kept in their original index order, the selected posts' heights form a non-decreasing sequence. A non-decreasing sequence means every number in the sequence is not less than any number before it. Write a program to select posts so that the number of selected posts $t$ is maximized, and compute the total number of selection schemes $c$ that achieve $t$ posts.", "inputFormat": "The first line contains a single integer $m$, indicating that there are $m$ test cases.  \nEach test case is given on one line as $n$ followed by $n$ integers $h_1, h_2, h_3, \\dots, h_n$ (where $h_i$ denotes the height of the $i$-th post), all separated by spaces.", "outputFormat": "For each test case, output $t$ and $c$. Print one test case per line, with $t$ and $c$ separated by a space.", "hint": "$m \\leq 5$，$n \\leq 20$，$h_i \\leq 150$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "围栏木桩", "background": "", "description": "某农场有一个由按编号排列的 $n$ 根木桩构成的首尾不相连的围栏。现要在这个围栏中选取一些木桩，按照原有的编号次序排列之后，这些木桩高度成一个升序序列。所谓的升序序列就是序列中的任何一个数都不小于它之前的任何一个数。试编写程序从这个围栏中选取合适的木桩使得选出的木桩个数 $t$ 最大，并求出选取出 $t$ 根木桩的方案总数 $c$。\n", "inputFormat": "文件中的第一行只有一个数 $m$，表明随后有 $m$ 个问题的描述信息。每个问题的描述信息格式为 $n,h_1,h_2,h_3,…,h_n$（其中 $h_i(i=1,2,3,…,n)$ 表示第 $i$ 根木桩的高度）。\n", "outputFormat": "依次输出每个问题中 $t$ 和 $c$ 的解。每行输出一个问题的解。\n", "hint": "$m \\leq 5$，$n \\leq 20$，$h_i \\leq 150$。", "locale": "zh-CN"}}}
{"pid": "P2363", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3\n4 5 6\n7 8 9", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["哈希 hashing", "前缀和"], "title": "马农", "background": null, "description": "在观看完战马检阅之后，来自大草原的两兄弟决心成为超级“马农”，专门饲养战马。\n\n兄弟两回到草原，将可以养马的区域分为 $N \\times N$ 的单位面积的正方形，并实地进行考察，归纳出了每个单位面积可以养马所获得的收益。接下来就要开始规划他们各自的马场了。首先，两人的马场都必须是矩形区域。同时，为了方便两人互相照应，也为了防止马匹互相走散，规定两个马场的矩形区域相邻，且只有一个交点。最后，互不认输的两人希望两个马场的收益相当，这样才不会影响他们兄弟的感情。现在，兄弟俩找到你这位设计师，希望你给他们设计马场，问共有多少种设计方案。", "inputFormat": "第一行一个整数 $N$，表示整个草原的大小为 $N \\times N$。接下来 $N$ 行，每行 $N$ 个整数 $A_{i,j}$，表示第 $i$ 行第 $j$ 列的单位草地的收成。（注意：收益可能是负数，养马也不是包赚的，马匹也可能出现生病死亡等意外。）", "outputFormat": "输出符合两人要求的草原分配方案数。", "hint": "对于所有数据，$1 \\leq n \\leq 50$，$-999 \\le A_{i,j} \\le 999$。", "locale": "zh-CN", "translations": {"en": {"title": "Ma Nong", "background": "", "description": "After watching a warhorse review, two brothers from the grasslands decide to become super \"ma nong\" (horse ranchers), specializing in raising warhorses.\n\nThey return to the grassland and divide the area suitable for horse ranching into $N \\times N$ unit square cells, then conduct a field survey to summarize the profit obtainable from raising horses on each unit area. Next, they will plan their respective ranches. First, both ranches must each be a rectangular region. Also, to facilitate mutual care and prevent horses from straying, the two rectangular ranches must be adjacent and have exactly one common point (i.e., they touch at a single point). Finally, the two competitive brothers want the total profits of the two ranches to be equal, so as not to hurt their relationship. Now, they ask you, the designer, to design their ranches: how many valid design plans are there?", "inputFormat": "The first line contains an integer $N$, indicating that the entire grassland is of size $N \\times N$. The next $N$ lines each contain $N$ integers $A_{i,j}$, representing the profit of the unit grassland at row $i$, column $j$. (Note: profits may be negative; raising horses is not guaranteed to be profitable, and accidents such as illness or death may occur.)", "outputFormat": "Output the number of grassland allocation plans that meet the brothers’ requirements.", "hint": "For all testdata, $1 \\leq N \\leq 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "马农", "background": null, "description": "在观看完战马检阅之后，来自大草原的两兄弟决心成为超级“马农”，专门饲养战马。\n\n兄弟两回到草原，将可以养马的区域分为 $N \\times N$ 的单位面积的正方形，并实地进行考察，归纳出了每个单位面积可以养马所获得的收益。接下来就要开始规划他们各自的马场了。首先，两人的马场都必须是矩形区域。同时，为了方便两人互相照应，也为了防止马匹互相走散，规定两个马场的矩形区域相邻，且只有一个交点。最后，互不认输的两人希望两个马场的收益相当，这样才不会影响他们兄弟的感情。现在，兄弟俩找到你这位设计师，希望你给他们设计马场，问共有多少种设计方案。", "inputFormat": "第一行一个整数 $N$，表示整个草原的大小为 $N \\times N$。接下来 $N$ 行，每行 $N$ 个整数 $A_{i,j}$，表示第 $i$ 行第 $j$ 列的单位草地的收成。（注意：收益可能是负数，养马也不是包赚的，马匹也可能出现生病死亡等意外。）", "outputFormat": "输出符合两人要求的草原分配方案数。", "hint": "对于所有数据，$1 \\leq n \\leq 50$，$-999 \\le A_{i,j} \\le 999$。", "locale": "zh-CN"}}}
{"pid": "P2364", "type": "P", "difficulty": 3, "samples": [["cecqbhvaiaedpibaluk\ncabegviapcihlaaugck\nadceevfdadaepcialaukd", "cevapiluk"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "Special Judge"], "title": "胖男孩", "background": "", "description": "麦克正如我们所知的已快乐地结婚，在上个月他胖了 $70$ 磅。因为手指上的脂肪过多，使他连给他最亲密的朋友斯拉夫克写一个电子邮件都很困难。\n\n每晚麦克都详细地描述那一天他所吃的所有东西，但有时当他只想按一次某键时往往会按了不止一次，并且他的胖手指还会碰到他不想要按的键，麦克也知道自己的手指有问题，因此他在打字的时候很小心，以确保每打一个想要的字符时误打的字符不超过 $3$ 个，误打的字符可能在正确字符之前也可能在其之后。\n\n当斯拉夫克多次收到读不懂的电子邮件后，他总是要求麦克将电子邮件发 $3$ 遍，使他容易读懂一点。\n\n编写程序，帮助斯拉夫克根据他所收到的三封电子邮件求出麦克可能写出的最长的信。\n", "inputFormat": "输入文件包含了三行文本。每一行文本包括麦克信件的一种版本。其中所有的字符都由英文字母表中的小写字母组成并且不超过 $100$ 个。\n", "outputFormat": "输出文件中第一行即唯一的一行数据应该包含斯拉夫克根据所收到的电子邮件推测出的最长信件。你可以相信问题一定有解，但解不一定是唯一的。\n", "hint": "由 @zhouyonglong 提供 SPJ\n", "locale": "zh-CN", "translations": {"en": {"title": "Fat Boy", "background": "", "description": "As we know, Mike has happily gotten married, and last month he gained $70$ pounds. Because of too much fat on his fingers, even writing an email to his closest friend Slavko is difficult for him.\n\nEvery night Mike carefully describes everything he ate that day, but sometimes when he wants to press a key once, he presses it more than once, and his fat fingers may also hit keys he does not intend to press. Mike knows his fingers are a problem, so he types very carefully: for each intended character, the number of mistakenly typed characters does not exceed $3$. The mistaken characters may appear either before or after the correct character.\n\nAfter receiving several unreadable emails, Slavko asked Mike to send each email $3$ times to make it easier to read.\n\nWrite a program to help Slavko determine the longest letter Mike could have intended, based on the three emails he received.", "inputFormat": "The input consists of three lines of text. Each line is one version of Mike’s letter. All characters are lowercase English letters, and the length of each line does not exceed $100$.", "outputFormat": "Output a single line containing the longest letter that Slavko can infer from the received emails. You may assume that a solution exists, but it is not necessarily unique.", "hint": "SPJ provided by @zhouyonglong.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "胖男孩", "background": "", "description": "麦克正如我们所知的已快乐地结婚，在上个月他胖了 $70$ 磅。因为手指上的脂肪过多，使他连给他最亲密的朋友斯拉夫克写一个电子邮件都很困难。\n\n每晚麦克都详细地描述那一天他所吃的所有东西，但有时当他只想按一次某键时往往会按了不止一次，并且他的胖手指还会碰到他不想要按的键，麦克也知道自己的手指有问题，因此他在打字的时候很小心，以确保每打一个想要的字符时误打的字符不超过 $3$ 个，误打的字符可能在正确字符之前也可能在其之后。\n\n当斯拉夫克多次收到读不懂的电子邮件后，他总是要求麦克将电子邮件发 $3$ 遍，使他容易读懂一点。\n\n编写程序，帮助斯拉夫克根据他所收到的三封电子邮件求出麦克可能写出的最长的信。\n", "inputFormat": "输入文件包含了三行文本。每一行文本包括麦克信件的一种版本。其中所有的字符都由英文字母表中的小写字母组成并且不超过 $100$ 个。\n", "outputFormat": "输出文件中第一行即唯一的一行数据应该包含斯拉夫克根据所收到的电子邮件推测出的最长信件。你可以相信问题一定有解，但解不一定是唯一的。\n", "hint": "由 @zhouyonglong 提供 SPJ\n", "locale": "zh-CN"}}}
{"pid": "P2365", "type": "P", "difficulty": 4, "samples": [["5\n1\n1 3\n3 2\n4 3\n2 3\n1 4", "153"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "cdq 分治", "斜率优化"], "title": "任务安排", "background": "", "description": "$n$ 个任务排成一个序列在一台机器上等待完成（顺序不得改变），这 $n$ 个任务被分成若干批，每批包含相邻的若干任务。  \n\n从零时刻开始，这些任务被分批加工，第 $i$ 个任务单独完成所需的时间为 $t_i$。在每批任务开始前，机器需要启动时间 $s$，而完成这批任务所需的时间是各个任务需要时间的总和（同一批任务将在同一时刻完成）。  \n\n每个任务的费用是它的完成时刻乘以一个费用系数 $f_i$。请确定一个分组方案，使得总费用最小。\n", "inputFormat": "第一行一个正整数 $n$。  \n第二行是一个整数 $s$。\n\n下面 $n$ 行每行有一对数，分别为 $t_i$ 和 $f_i$，表示第 $i$ 个任务单独完成所需的时间是 $t_i$ 及其费用系数 $f_i$。\n", "outputFormat": "一个数，最小的总费用。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 5000$，$0 \\le s \\le 50$，$1\\le t_i,f_i \\le 100$。\n\n【样例解释】   \n如果分组方案是 $\\{1,2\\},\\{3\\},\\{4,5\\}$，则完成时间分别为 $\\{5,5,10,14,14\\}$，费用 $C=15+10+30+42+56$，总费用就是 $153$。", "locale": "zh-CN", "translations": {"en": {"title": "Task Arrangement", "background": "", "description": "There are $n$ tasks arranged in a sequence waiting to be completed on a single machine (the order cannot be changed). These $n$ tasks are divided into several batches, each batch containing consecutive tasks.\n\nStarting from time $0$, the tasks are processed batch by batch. The time required to complete task $i$ alone is $t_i$. Before each batch starts, the machine needs a startup time $s$, and the time required to process that batch is the sum of the required times of its tasks (all tasks in the same batch finish at the same time).\n\nThe cost of each task is its completion time multiplied by a cost coefficient $f_i$. Determine a batching scheme that minimizes the total cost.", "inputFormat": "The first line contains a positive integer $n$.  \nThe second line contains an integer $s$.  \nEach of the next $n$ lines contains a pair of numbers, $t_i$ and $f_i$, indicating that the time required to complete task $i$ alone is $t_i$ and its cost coefficient is $f_i$.", "outputFormat": "Output a single number, the minimal total cost.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 5000$, $0 \\le s \\le 50$, $1 \\le t_i, f_i \\le 100$.\n\nSample explanation  \nIf the batching scheme is $\\{1,2\\}, \\{3\\}, \\{4,5\\}$, then the completion times are $\\{5, 5, 10, 14, 14\\}$, the cost is $C=15+10+30+42+56$, so the total cost is $153$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "任务安排", "background": "", "description": "$n$ 个任务排成一个序列在一台机器上等待完成（顺序不得改变），这 $n$ 个任务被分成若干批，每批包含相邻的若干任务。  \n\n从零时刻开始，这些任务被分批加工，第 $i$ 个任务单独完成所需的时间为 $t_i$。在每批任务开始前，机器需要启动时间 $s$，而完成这批任务所需的时间是各个任务需要时间的总和（同一批任务将在同一时刻完成）。  \n\n每个任务的费用是它的完成时刻乘以一个费用系数 $f_i$。请确定一个分组方案，使得总费用最小。\n", "inputFormat": "第一行一个正整数 $n$。  \n第二行是一个整数 $s$。\n\n下面 $n$ 行每行有一对数，分别为 $t_i$ 和 $f_i$，表示第 $i$ 个任务单独完成所需的时间是 $t_i$ 及其费用系数 $f_i$。\n", "outputFormat": "一个数，最小的总费用。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 5000$，$0 \\le s \\le 50$，$1\\le t_i,f_i \\le 100$。\n\n【样例解释】   \n如果分组方案是 $\\{1,2\\},\\{3\\},\\{4,5\\}$，则完成时间分别为 $\\{5,5,10,14,14\\}$，费用 $C=15+10+30+42+56$，总费用就是 $153$。", "locale": "zh-CN"}}}
{"pid": "P2366", "type": "P", "difficulty": 3, "samples": [["3\na=233;\nb=a;\nc=a+b;", "a 233\nb 233\nc 466"], ["3\na=233;\nb=1+1;\na=b;", "a 2\nb 2"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创", "洛谷月赛"], "title": "yyy2015c01 的 IDE 之 Watches", "background": "在 2020 年的某一天，我们的 yyy2015c01 同学想要开发一套 IDE。", "description": "作为他开发团队中的一员，你不幸地被选入了 Debugger 的开发组。\n\nyyy2015c01 设想的 Debugger 由几部分组成，其中的一个小组件就是 Watches——中文称之为“变量观察器”。\n\n由于 IDE 目前还是内测版，开发组需要先编一个能观察 int 类型变量值的 Watches 来看看效果如何。这个任务交由你来完成。\n\n开发组假想的 Watches 能实现如下 3 种语句运行后监测相应变量值的功能：\n- `n=1;` 将常量赋给变量，保证这个常量的位数不大于 $9$。\n- `a=b;` 变量之间赋值：若原变量（在本例中是 $b$）未被赋值则认为其初始值为 $0$。\n- `m=1+2;` $A+B$ 表达式赋值，只有 `+` 且只有两个数或者变量，$A$ 和 $B$ 都介于 $1$ 至 $10^6$ 之间。\n\n请你编写一个 Watches，并在所有语句运行完后对所有被赋值过的变量按标识符的字典序输出它们的值（保证不会有变量的值大于 int 的最大值）。\n", "inputFormat": "输入共 $n+1$ 行。\n\n第一行是一个正整数 $n$，表示共有 $n$ 条赋值语句；\n\n第二行到第 $n+1$ 行，每行是一条赋值语句（格式为“变量名=赋值式子;”），保证不会有多余的其他字符。", "outputFormat": "输出共 $n$ 行：每行是一个被赋值过的变量标识符及它的值。", "hint": "数据很弱，直接模拟过哟~\n\n（别想着变量标识符只有一位哟！）\n\n另：向本题主人公 yyy2015c01 同学致敬！", "locale": "zh-CN", "translations": {"en": {"title": "yyy2015c01's IDE: Watches", "background": "On a day in 2020, our classmate yyy2015c01 wanted to develop an IDE.", "description": "As a member of his development team, you were unfortunately assigned to the Debugger group.\n\nThe Debugger envisioned by yyy2015c01 consists of several parts, and one small component is Watches — in Chinese, “变量观察器” (variable watcher).\n\nSince the IDE is still in internal testing, the team needs a Watches that can monitor int-type variable values first to see how it works. This task is assigned to you.\n\nThe envisioned Watches can monitor the corresponding variable values after executing the following three types of statements:\n- `n=1;` Assign a literal constant to a variable; the number of digits of this constant is at most $9$.\n- `a=b;` Assignment between variables: if the source variable (in this example, $b$) has never been assigned, treat its initial value as $0$.\n- `m=1+2;` Assignment with an $A+B$ expression. Only the `+` operator is allowed, and there are exactly two operands (either literals or variables). Both $A$ and $B$ are in the range $1$ to $10^6$.\n\nPlease implement a Watches that, after all statements are executed, outputs all variables that have been assigned at least once, in lexicographical order by identifier, along with their values (it is guaranteed that no variable’s value exceeds the maximum value of int).", "inputFormat": "The input contains $n+1$ lines.\n\n- The first line is a positive integer $n$, the number of assignment statements.\n- Lines $2$ through $n+1$ each contain one assignment statement (in the format 'variable=expression;'). No extra characters will appear.", "outputFormat": "Output one line for each variable that has been assigned at least once. Each line contains the variable identifier and its value. The variables must be sorted in lexicographical order by their identifiers.", "hint": "The testdata is very weak; direct simulation will pass.\n\n(Don’t assume variable identifiers are single-character!)\n\nAlso, salute to the protagonist, classmate yyy2015c01!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy2015c01 的 IDE 之 Watches", "background": "在 2020 年的某一天，我们的 yyy2015c01 同学想要开发一套 IDE。", "description": "作为他开发团队中的一员，你不幸地被选入了 Debugger 的开发组。\n\nyyy2015c01 设想的 Debugger 由几部分组成，其中的一个小组件就是 Watches——中文称之为“变量观察器”。\n\n由于 IDE 目前还是内测版，开发组需要先编一个能观察 int 类型变量值的 Watches 来看看效果如何。这个任务交由你来完成。\n\n开发组假想的 Watches 能实现如下 3 种语句运行后监测相应变量值的功能：\n- `n=1;` 将常量赋给变量，保证这个常量的位数不大于 $9$。\n- `a=b;` 变量之间赋值：若原变量（在本例中是 $b$）未被赋值则认为其初始值为 $0$。\n- `m=1+2;` $A+B$ 表达式赋值，只有 `+` 且只有两个数或者变量，$A$ 和 $B$ 都介于 $1$ 至 $10^6$ 之间。\n\n请你编写一个 Watches，并在所有语句运行完后对所有被赋值过的变量按标识符的字典序输出它们的值（保证不会有变量的值大于 int 的最大值）。\n", "inputFormat": "输入共 $n+1$ 行。\n\n第一行是一个正整数 $n$，表示共有 $n$ 条赋值语句；\n\n第二行到第 $n+1$ 行，每行是一条赋值语句（格式为“变量名=赋值式子;”），保证不会有多余的其他字符。", "outputFormat": "输出共 $n$ 行：每行是一个被赋值过的变量标识符及它的值。", "hint": "数据很弱，直接模拟过哟~\n\n（别想着变量标识符只有一位哟！）\n\n另：向本题主人公 yyy2015c01 同学致敬！", "locale": "zh-CN"}}}
{"pid": "P2367", "type": "P", "difficulty": 2, "samples": [["3 2\n1 1 1\n1 2 1\n2 3 1", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "洛谷原创", "差分", "洛谷月赛"], "title": "语文成绩", "background": "语文考试结束了，成绩还是一如既往地有问题。\n", "description": "语文老师总是写错成绩，所以当她修改成绩的时候，总是累得不行。她总是要一遍遍地给某些同学增加分数，又要注意最低分是多少。你能帮帮她吗？\n", "inputFormat": "第一行有两个整数 $n$，$p$，代表学生数与增加分数的次数。\n\n第二行有 $n$ 个数，$a_1 \\sim a_n$，代表各个学生的初始成绩。\n\n接下来 $p$ 行，每行有三个数，$x$，$y$，$z$，代表给第 $x$ 个到第 $y$ 个学生每人增加 $z$ 分。", "outputFormat": "输出仅一行，代表更改分数后，全班的最低分。\n", "hint": "对于 $40\\%$ 的数据，有 $n \\le 10^3$。\n\n对于 $60\\%$ 的数据，有 $n \\le 10^4$。\n\n对于 $80\\%$ 的数据，有 $n \\le 10^5$。\n\n对于 $100\\%$ 的数据，有 $n \\le 5\\times 10^6$，$p \\le n$，学生初始成绩 $ \\le 100$，$z \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Chinese Scores", "background": "The Chinese exam has ended, and the scores are, as always, problematic.", "description": "The Chinese teacher always writes scores wrong, so when she corrects them, she gets exhausted. She keeps adding points again and again to certain students, and she also needs to keep track of the minimum score. Can you help her?", "inputFormat": "The first line has two integers $n$, $p$, representing the number of students and the number of additions.\n\nThe second line has $n$ numbers, $a_1 \\sim a_n$, representing each student's initial score.\n\nThe next $p$ lines each have three numbers, $x$, $y$, $z$, representing adding $z$ points to each student from the $x$-th to the $y$-th, inclusive.", "outputFormat": "Output only one line, representing the class minimum score after the changes.", "hint": "For $40\\%$ of the testdata, $n \\le 10^3$.\n\nFor $60\\%$ of the testdata, $n \\le 10^4$.\n\nFor $80\\%$ of the testdata, $n \\le 10^5$.\n\nFor $100\\%$ of the testdata, $n \\le 5\\times 10^6$, $p \\le n$, initial scores $\\le 100$, $z \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "语文成绩", "background": "语文考试结束了，成绩还是一如既往地有问题。\n", "description": "语文老师总是写错成绩，所以当她修改成绩的时候，总是累得不行。她总是要一遍遍地给某些同学增加分数，又要注意最低分是多少。你能帮帮她吗？\n", "inputFormat": "第一行有两个整数 $n$，$p$，代表学生数与增加分数的次数。\n\n第二行有 $n$ 个数，$a_1 \\sim a_n$，代表各个学生的初始成绩。\n\n接下来 $p$ 行，每行有三个数，$x$，$y$，$z$，代表给第 $x$ 个到第 $y$ 个学生每人增加 $z$ 分。", "outputFormat": "输出仅一行，代表更改分数后，全班的最低分。\n", "hint": "对于 $40\\%$ 的数据，有 $n \\le 10^3$。\n\n对于 $60\\%$ 的数据，有 $n \\le 10^4$。\n\n对于 $80\\%$ 的数据，有 $n \\le 10^5$。\n\n对于 $100\\%$ 的数据，有 $n \\le 5\\times 10^6$，$p \\le n$，学生初始成绩 $ \\le 100$，$z \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2368", "type": "P", "difficulty": 2, "samples": [["8", "0"]], "limits": {"time": [869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869, 869], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "枚举"], "title": "EXCEEDED WARNING B", "background": "SGU 107\n", "description": "求有多少个平方后末尾为 $987654321$ 的 $n$ 位数。", "inputFormat": "一个整数 $n$。", "outputFormat": "答案，即 **“平方后末尾为 $\\bm{987654321}$ 的 $\\bm{n}$ 位数”** 的个数", "hint": "$1\\le n\\le 1 0^6$。\n\n不要问我暴力能过几个点，我只想说呵呵。", "locale": "zh-CN", "translations": {"en": {"title": "EXCEEDED WARNING B", "background": "SGU 107.", "description": "Find how many $n$-digit integers have squares ending with $987654321$.", "inputFormat": "A single integer $n$.", "outputFormat": "The answer, i.e., the number of **“$\\bm{n}$-digit integers whose squares end with $\\bm{987654321}$”**.", "hint": "$1 \\le n \\le 10^6$.\n\nDon't ask how many test points brute force can pass; I can only say hehe.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "EXCEEDED WARNING B", "background": "SGU 107\n", "description": "求有多少个平方后末尾为 $987654321$ 的 $n$ 位数。", "inputFormat": "一个整数 $n$。", "outputFormat": "答案，即 **“平方后末尾为 $\\bm{987654321}$ 的 $\\bm{n}$ 位数”** 的个数", "hint": "$1\\le n\\le 1 0^6$。\n\n不要问我暴力能过几个点，我只想说呵呵。", "locale": "zh-CN"}}}
{"pid": "P2369", "type": "P", "difficulty": 2, "samples": [["10 5\n2\n4\n6\n8\n10\n1\n3\n5\n7\n9", "1\n2\n3\n4\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096]}, "tags": ["堆"], "title": "EXCEEDED WARNING A", "background": "", "description": "有这样一些数据，它们均为小于 $10^9$ 的非负整数，且个数为 $n$，现在请你输出其中最小的 $m$ 个数。\n\n小心溢出，注意 Memory Limit = 4000KiB。\n", "inputFormat": "第一行以半角空格间隔开的两个非负整数： $n, m$\n\n接下来的 $n$ 行，随机产生的 $n$ 个数，保证 $32$ 位整型变量可以存下。\n", "outputFormat": "共 $m$ 行，即题目描述中的 $m$ 个数，从小到大依次输出。\n", "hint": "数据范围：$m<10^5, n<10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "EXCEEDED WARNING A", "background": "", "description": "There are some numbers, all non-negative integers less than $10^9$, with a total count of $n$. Please output the smallest $m$ numbers among them.\n\nBeware of overflow, and note that Memory Limit = 4000 KiB.", "inputFormat": "The first line contains two non-negative integers separated by a space: $n, m$.\n\nThe next $n$ lines contain the $n$ randomly generated numbers, guaranteed to fit in a 32-bit integer.", "outputFormat": "Output $m$ lines: the $m$ numbers described above, in ascending order from smallest to largest.", "hint": "Constraints: $m < 10^5$, $n < 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "EXCEEDED WARNING A", "background": "", "description": "有这样一些数据，它们均为小于 $10^9$ 的非负整数，且个数为 $n$，现在请你输出其中最小的 $m$ 个数。\n\n小心溢出，注意 Memory Limit = 4000KiB。\n", "inputFormat": "第一行以半角空格间隔开的两个非负整数： $n, m$\n\n接下来的 $n$ 行，随机产生的 $n$ 个数，保证 $32$ 位整型变量可以存下。\n", "outputFormat": "共 $m$ 行，即题目描述中的 $m$ 个数，从小到大依次输出。\n", "hint": "数据范围：$m<10^5, n<10^6$。", "locale": "zh-CN"}}}
{"pid": "P2370", "type": "P", "difficulty": 3, "samples": [["3 3 5\n2 2\n1 2\n3 2", "2"], ["2 3 505\n1 2\n500 1", "500"], ["3 3 2\n2 2\n1 2\n3 2", "No Solution!"], ["4 5 6\n5 1\n5 2\n5 3\n1 1", "No Solution!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "2015", "二分", "洛谷原创", "排序", "背包 DP", "洛谷月赛"], "title": "yyy2015c01 的 U 盘", "background": "在 2020 年的某一天，我们的 yyy2015c01 买了个高端 U 盘。\n", "description": "你找 yyy2015c01 借到了这个高端的 U 盘，拷贝一些重要资料，但是你发现这个 U 盘有一些问题：\n\n1. 这个 U 盘的传输接口很小，只能传输大小不超过 $L$ 的文件。\n2. 这个 U 盘容量很小，一共只能装不超过 $S$ 的文件。\n\n但是你要备份的资料却有很多，你只能备份其中的一部分。\n\n为了选择要备份哪些文件，你给所有文件设置了一个价值 $V_i$，你希望备份的文件总价值不小于 $p$。\n\n但是很快你发现这是不可能的，因为 yyy2015c01 的传输接口太小了，你只有花钱买一个更大的接口（更大的接口意味着可以传输更大的文件，但是购买它会花费更多的钱）。\n\n注意：你的文件不能被分割（你只能把一个文件整个的传输进去，并储存在U盘中）,\n\n你放在 U 盘中文件的总大小不能超过 U 盘容量。\n\n现在问题来了：你想知道，在满足 U 盘中文件价值之和**不小于** $p$ 时，最小需要多大的接口。", "inputFormat": "第 $1$ 行，三个正整数 $n,p,S$ 分别表示文件总数，希望最小价值 $p$ ，U 盘大小。\n\n接下来 $n$ 行，每行两个正整数 $W_{i},V_{i}$，表示第 $i$ 个文件的大小和价值。", "outputFormat": "输出一个正整数表示最小需要的接口大小。\n\n如果无解输出 `No Solution!`。", "hint": "$1 \\le n, W_i, S \\le 10^3$，$1 \\leq V_i \\leq 10^6$，$1 \\leq p \\leq 10^9$。\n\n数据较小，请勿乱搞。\n\n样例解释 $1$：买一个大小为 $2$ 接口，把物品 $1$ 、$2$ 放进$\\text{U}$盘。\n\n样例解释 $2$：买一个大小为 $500$ 的接口。\n\n样例解释 $3$：本来可以买大小为 $2$ 的接口，可是 U 盘容量放不下足够的文件。\n\n如果数据出现疏漏，请联系出题人 [a710128](https://www.luogu.com.cn/user/2573)\n\n向本题主人公 yyy2015c01 同学致敬！", "locale": "zh-CN", "translations": {"en": {"title": "yyy2015c01's USB Drive", "background": "On a day in 2020, our yyy2015c01 bought a high-end USB drive.", "description": "You borrowed this high-end USB drive from yyy2015c01 to copy some important files, but you found some issues:\n\n1. The USB drive's transfer interface is small; it can only transfer files whose size does not exceed $L$.\n2. The USB drive's capacity is small; it can hold a total size of at most $S$.\n\nHowever, you have many files to back up, so you can only back up some of them.\n\nTo decide which files to back up, you assign each file a value $V_i$, and you want the total value of the backed-up files to be at least $p$.\n\nSoon you realize this is impossible with the current interface, because yyy2015c01's transfer interface is too small. You have to spend money to buy a larger interface (a larger interface allows transferring larger files, but it costs more).\n\nNote: Your files cannot be split (you can only transfer an entire file and store it in the USB drive).\nThe total size of the files you put in the USB drive cannot exceed the drive's capacity.\n\nNow the question: When the total value of the files in the USB drive is not less than $p$, what is the minimum required interface size?", "inputFormat": "The first line contains three positive integers $n, p, S$, representing the number of files, the desired minimum total value $p$, and the USB drive capacity $S$.\n\nThe next $n$ lines each contain two positive integers $W_i, V_i$, representing the size and value of the $i$-th file.", "outputFormat": "Output a single positive integer representing the minimum required interface size.\n\nIf there is no solution, output `No Solution!`.", "hint": "Constraints: $1 \\le n, W_i, S \\le 10^3$, $1 \\leq V_i \\leq 10^6$, $1 \\leq p \\leq 10^9$.\n\nThe testdata is small; please do not overcomplicate.\n\nSample explanation 1: Buy an interface of size $2$, and put items $1$ and $2$ into the $\\text{U}$ drive.\n\nSample explanation 2: Buy an interface of size $500$.\n\nSample explanation 3: You could have bought an interface of size $2$, but the USB drive capacity cannot hold enough files.\n\nIf there is any oversight in the testdata, please contact the problem setter [a710128](https://www.luogu.com.cn/user/2573).\n\nSalute to the protagonist of this problem, classmate yyy2015c01!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy2015c01 的 U 盘", "background": "在 2020 年的某一天，我们的 yyy2015c01 买了个高端 U 盘。\n", "description": "你找 yyy2015c01 借到了这个高端的 U 盘，拷贝一些重要资料，但是你发现这个 U 盘有一些问题：\n\n1. 这个 U 盘的传输接口很小，只能传输大小不超过 $L$ 的文件。\n2. 这个 U 盘容量很小，一共只能装不超过 $S$ 的文件。\n\n但是你要备份的资料却有很多，你只能备份其中的一部分。\n\n为了选择要备份哪些文件，你给所有文件设置了一个价值 $V_i$，你希望备份的文件总价值不小于 $p$。\n\n但是很快你发现这是不可能的，因为 yyy2015c01 的传输接口太小了，你只有花钱买一个更大的接口（更大的接口意味着可以传输更大的文件，但是购买它会花费更多的钱）。\n\n注意：你的文件不能被分割（你只能把一个文件整个的传输进去，并储存在U盘中）,\n\n你放在 U 盘中文件的总大小不能超过 U 盘容量。\n\n现在问题来了：你想知道，在满足 U 盘中文件价值之和**不小于** $p$ 时，最小需要多大的接口。", "inputFormat": "第 $1$ 行，三个正整数 $n,p,S$ 分别表示文件总数，希望最小价值 $p$ ，U 盘大小。\n\n接下来 $n$ 行，每行两个正整数 $W_{i},V_{i}$，表示第 $i$ 个文件的大小和价值。", "outputFormat": "输出一个正整数表示最小需要的接口大小。\n\n如果无解输出 `No Solution!`。", "hint": "$1 \\le n, W_i, S \\le 10^3$，$1 \\leq V_i \\leq 10^6$，$1 \\leq p \\leq 10^9$。\n\n数据较小，请勿乱搞。\n\n样例解释 $1$：买一个大小为 $2$ 接口，把物品 $1$ 、$2$ 放进$\\text{U}$盘。\n\n样例解释 $2$：买一个大小为 $500$ 的接口。\n\n样例解释 $3$：本来可以买大小为 $2$ 的接口，可是 U 盘容量放不下足够的文件。\n\n如果数据出现疏漏，请联系出题人 [a710128](https://www.luogu.com.cn/user/2573)\n\n向本题主人公 yyy2015c01 同学致敬！", "locale": "zh-CN"}}}
{"pid": "P2371", "type": "P", "difficulty": 5, "samples": [["2 5 10\n3 5\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "集训队互测", "最短路"], "title": "[国家集训队] 墨墨的等式", "background": "", "description": "墨墨突然对等式很感兴趣，他正在研究 $\\sum_{i=1}^n a_ix_i=b$ 存在非负整数解的条件，他要求你编写一个程序，给定 $n, a_{1\\dots n}, l, r$，求出有多少 $b\\in[l,r]$ 可以使等式存在非负整数解。", "inputFormat": "第一行三个整数 $n,l,r$。\n\n第二行 $n$ 个整数 $a_{1\\dots n}$。\n", "outputFormat": "一行一个整数，表示有多少 $b\\in[l,r]$ 可以使等式存在非负整数解。\n", "hint": "对于 $20\\%$ 的数据，$n \\le 5$，$r \\le 10$。\n\n对于 $40\\%$ 的数据，$n \\le 10$，$r \\le 10^6$。\n\n对于 $100\\%$ 的数据，$n \\le 12$，$0 \\le a_i \\le 5\\times 10^5$，$1 \\le l \\le r \\le 10^{12}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Momo's Equation", "background": "", "description": "Momo has suddenly become interested in equations. He is studying the condition under which $\\sum_{i=1}^n a_ix_i=b$ has a non-negative integer solution. He asks you to write a program: given $n, a_{1\\dots n}, l, r$, find how many $b \\in [l, r]$ make the equation have a non-negative integer solution.", "inputFormat": "The first line contains three integers $n,l,r$.\nThe second line contains $n$ integers $a_{1\\dots n}$.", "outputFormat": "Output one integer on a single line, indicating how many $b \\in [l, r]$ make the equation have a non-negative integer solution.", "hint": "For $20\\%$ of the testdata, $n \\le 5$, $r \\le 10$.\nFor $40\\%$ of the testdata, $n \\le 10$, $r \\le 10^6$.\nFor $100\\%$ of the testdata, $n \\le 12$, $0 \\le a_i \\le 5\\times 10^5$, $1 \\le l \\le r \\le 10^{12}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 墨墨的等式", "background": "", "description": "墨墨突然对等式很感兴趣，他正在研究 $\\sum_{i=1}^n a_ix_i=b$ 存在非负整数解的条件，他要求你编写一个程序，给定 $n, a_{1\\dots n}, l, r$，求出有多少 $b\\in[l,r]$ 可以使等式存在非负整数解。", "inputFormat": "第一行三个整数 $n,l,r$。\n\n第二行 $n$ 个整数 $a_{1\\dots n}$。\n", "outputFormat": "一行一个整数，表示有多少 $b\\in[l,r]$ 可以使等式存在非负整数解。\n", "hint": "对于 $20\\%$ 的数据，$n \\le 5$，$r \\le 10$。\n\n对于 $40\\%$ 的数据，$n \\le 10$，$r \\le 10^6$。\n\n对于 $100\\%$ 的数据，$n \\le 12$，$0 \\le a_i \\le 5\\times 10^5$，$1 \\le l \\le r \\le 10^{12}$。\n", "locale": "zh-CN"}}}
{"pid": "P2372", "type": "P", "difficulty": 2, "samples": [["2 2 2 2 \nXX\nXX", "8"], ["6 4 2 3 \n.XXX\n.XXX\n.XXX\n...X\n..X.\nX...", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2015", "洛谷原创", "洛谷月赛"], "title": "yyy2015c01挑战算周长", "background": "yyy2015c01 快速的解决了问题，受到邻居们的赞许，高兴的回到家，把糖给了妈妈，吃了香喷喷的午饭，又睡了一个甜甜的午觉，感觉人生真美好。下午爸爸回到家，听说了 yyy2015c01 帮老师及邻居们解决了难题，准备带她去游乐场玩她平日最喜欢玩的跳舞机作为奖励，yyy2015c01 听了，兴奋的一蹦三尺高。", "description": "游乐场里人头攒动，每台跳舞机前都围满了人，怎么办呢？人这么多，想玩上估计要等好久了，yyy2015c01 左顾右盼，突然发现一台跳舞机前面没人， “哈哈，被我发现一台没人的，赶快去……”，结果到了面前才发现这台新机器的玩法与众不同，脚下的格子随机位置显示出很多的 `X`，踩到一个格子，就要根据规则先算出它对应的周长，然后把正确周长输入机器，最后的胜利者还可以获得游乐城的免费游戏券一张，yyy2015c01 心动了，小朋友们，你们可以帮助 yyy2015c01 顺利拿到游戏券么？\n\n游戏规则如下：\n\n新跳舞机踏板上有许多要分析的目标，由脚踩确定一个目标。目标边界的周长是一个有用的测量参数。编程任务：确定选中目标的周长。新跳舞机的踏板是一个矩形的网格，里面点 `.`，表示空的地方；有大写字母 `X`，表示目标的一部分。\n\n方格中的一个 `X` 是指一个完整的网格方形区域，包括其边界和目标本身。网格中心的 `X` 与其边界上 $8$ 个方向的 `X` 都是相邻的。任何两个相邻的 `X`，其网格方形区域在边界或拐角处是重叠的，所以它们的网格方形区域是相邻的。一个目标是由一系列相邻 `X` 的网格方形区域连接起来构成的。在网格 $1$ 中，一个目标填充了全部网格；在网格 $2$ 中有两个目标，其中一个目标只占左下角的一个网格方形区域，其余的 `X` 属于另一个目标。\n\nyyy2015c01 总是能踩到一个 `X`，以选中包含该 `X` 的目标，记录脚踩时的坐标。行列号是从左上角开始，从 $1$ 开始编号的。一个有用的统计参数是目标的周长。 假定每个 `X` 的每条边上有一个方形的单元。\n\n目标中不会包含任何完全封闭的孔。\n", "inputFormat": "共 $M+1$ 行，第一行为四个正整数 $M,N,X,Y$（中间用空格隔开），表示网格的大小为 $M$ 行，$N$ 列，且踩中网格的第 $X$ 行第 $Y$ 列方格。后面就是 $M$ 行，由字符 `.` 和 `X` 构成。", "outputFormat": "共一行，表示选中目标的周长。\n", "hint": "$1\\leq M\\leq 20$，$1\\leq N\\leq 20$，$1\\leq X\\leq M$，$1\\leq Y\\leq N$。\n", "locale": "zh-CN", "translations": {"en": {"title": "yyy2015c01 Challenge: Compute the Perimeter", "background": "yyy2015c01 quickly solved the problem and was praised by the neighbors. She happily went home, gave the candy to her mother, ate a delicious lunch, and took a sweet nap, feeling that life was wonderful. In the afternoon, her father came home and, upon hearing that yyy2015c01 had helped the teacher and neighbors with difficult problems, planned to take her to the amusement park to play her favorite dance machine as a reward. Hearing this, yyy2015c01 jumped for joy.", "description": "The amusement park was crowded, and every dance machine was surrounded by people. What to do? With so many people, it would take a long time to play. yyy2015c01 looked around and suddenly found a dance machine with no one in front of it. “Haha, I found one with no queue, hurry up...”. But when she got there, she realized this new machine played differently: many `X` marks appeared at random positions on the floor grid. When you step on a cell, you must first compute the perimeter of the target it belongs to according to the rules, then input the correct perimeter into the machine. The final winner can receive a free game coupon from the amusement park. yyy2015c01 was tempted. Kids, can you help yyy2015c01 win the coupon?\n\nGame rules:\n\nThere are many targets on the new dance machine’s rectangular grid. A dot `.` means an empty place; an uppercase `X` means part of a target.\n\nEach `X` stands for one full grid-square region, including its boundary and the target itself. An `X` is adjacent to any `X` in any of the 8 directions (sharing an edge or a corner). Any two adjacent `X` squares have overlapping boundaries or corners, so their square regions are considered adjacent. A target is a connected component formed by a chain of adjacent `X` squares under 8-direction adjacency.\n\nyyy2015c01 always steps on an `X`, selecting the target that contains that `X`. Record the coordinates where she steps. Row and column indices start from the top-left corner, numbered from $ 1 $. A useful statistic is the target’s perimeter. Assume each `X` square has side length $ 1 $.\n\nThe target will not contain any completely enclosed holes.\n\n# Description", "inputFormat": "There are $ M+1 $ lines in total. The first line contains four positive integers $ M, N, X, Y $ (separated by spaces), meaning the grid has $ M $ rows and $ N $ columns, and the stepped-on cell is at row $ X $, column $ Y $. The next $ M $ lines consist of characters `.` and `X`.", "outputFormat": "Output a single line with the perimeter of the selected target.", "hint": "$ 1 \\leq M \\leq 20 $, $ 1 \\leq N \\leq 20 $, $ 1 \\leq X \\leq M $, $ 1 \\leq Y \\leq N $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy2015c01挑战算周长", "background": "yyy2015c01 快速的解决了问题，受到邻居们的赞许，高兴的回到家，把糖给了妈妈，吃了香喷喷的午饭，又睡了一个甜甜的午觉，感觉人生真美好。下午爸爸回到家，听说了 yyy2015c01 帮老师及邻居们解决了难题，准备带她去游乐场玩她平日最喜欢玩的跳舞机作为奖励，yyy2015c01 听了，兴奋的一蹦三尺高。", "description": "游乐场里人头攒动，每台跳舞机前都围满了人，怎么办呢？人这么多，想玩上估计要等好久了，yyy2015c01 左顾右盼，突然发现一台跳舞机前面没人， “哈哈，被我发现一台没人的，赶快去……”，结果到了面前才发现这台新机器的玩法与众不同，脚下的格子随机位置显示出很多的 `X`，踩到一个格子，就要根据规则先算出它对应的周长，然后把正确周长输入机器，最后的胜利者还可以获得游乐城的免费游戏券一张，yyy2015c01 心动了，小朋友们，你们可以帮助 yyy2015c01 顺利拿到游戏券么？\n\n游戏规则如下：\n\n新跳舞机踏板上有许多要分析的目标，由脚踩确定一个目标。目标边界的周长是一个有用的测量参数。编程任务：确定选中目标的周长。新跳舞机的踏板是一个矩形的网格，里面点 `.`，表示空的地方；有大写字母 `X`，表示目标的一部分。\n\n方格中的一个 `X` 是指一个完整的网格方形区域，包括其边界和目标本身。网格中心的 `X` 与其边界上 $8$ 个方向的 `X` 都是相邻的。任何两个相邻的 `X`，其网格方形区域在边界或拐角处是重叠的，所以它们的网格方形区域是相邻的。一个目标是由一系列相邻 `X` 的网格方形区域连接起来构成的。在网格 $1$ 中，一个目标填充了全部网格；在网格 $2$ 中有两个目标，其中一个目标只占左下角的一个网格方形区域，其余的 `X` 属于另一个目标。\n\nyyy2015c01 总是能踩到一个 `X`，以选中包含该 `X` 的目标，记录脚踩时的坐标。行列号是从左上角开始，从 $1$ 开始编号的。一个有用的统计参数是目标的周长。 假定每个 `X` 的每条边上有一个方形的单元。\n\n目标中不会包含任何完全封闭的孔。\n", "inputFormat": "共 $M+1$ 行，第一行为四个正整数 $M,N,X,Y$（中间用空格隔开），表示网格的大小为 $M$ 行，$N$ 列，且踩中网格的第 $X$ 行第 $Y$ 列方格。后面就是 $M$ 行，由字符 `.` 和 `X` 构成。", "outputFormat": "共一行，表示选中目标的周长。\n", "hint": "$1\\leq M\\leq 20$，$1\\leq N\\leq 20$，$1\\leq X\\leq M$，$1\\leq Y\\leq N$。\n", "locale": "zh-CN"}}}
{"pid": "P2373", "type": "P", "difficulty": 2, "samples": [["2\nFAC1 (N=233, M=65 'A', A=0)\nmain ()\n", "1\n"], ["2\nfac1 (N=250)\nFAC1 (a=987)\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "搜索", "2015", "洛谷原创", "洛谷月赛"], "title": "yyy2015c01 的 IDE 之 Call Stack", "background": "在 2020 年的某一天，我们的 yyy2015c01 同学想要开发一套 IDE。\n", "description": "作为他开发团队中的一员，你不幸地 yyy2015c01 被选入了 Debugger 的开发组。\n\nyyy2015c01 设想的 Debugger 由几部分组成，其中的一个小组件就是 Call Stack——中文称之为 “调用栈”。\n\n由于 IDE 目前还是内测版，开发组需要先编一个能识别参数表的 Call Stack 来看看效果如何。这个任务交由你来完成。\n\n开发组假想的 Call Stack 能实现识别 `int` 和 `char` 参数表，以辨别出不同的函数，规则是：\n\n```\nint fac1(int n);\n```\n\n和\n\n```\nint fac1(char n);\n```\n\n是两个不同的函数；但\n\n```\nint Fac1(int n,int m);\n```\n\n和\n\n```\nint FAC1(int x,int y);\n```\n\n被认为是相同的函数。也就是说，这个 Call Stack 认的不是参数名，而是其类型和忽略大小写的函数名。\n\n注意：`int main()` 可能会出现，也可能不出现；无论它有没有出现，都不能将其算入函数中。\n\n请你编写一个 Call Stack，并在所有函数调用完后输出这个程序一共有多少个不完全相同的函数（保证程序中的每个函数至少调用一次）。\n", "inputFormat": "输入共 $n + 1$ 行：第一行是一个正整数 $n$，表示共有 $n$ 次调用操作；第 $2 \\sim n+1$ 行每行是一条函数调用信息（严格按照样例输入的格式），保证不会有多余的其他字符。\n", "outputFormat": "输出共一行：一个正整数 $m$，表示在上述调用中共有多少个参数表不完全相同的函数。\n", "hint": "每个函数的参数最多有 $10$ 个，每行的输入数据长度均不超过 $255$。\n\n向本题主人公 yyy2015c01 同学致敬！\n", "locale": "zh-CN", "translations": {"en": {"title": "yyy2015c01's IDE: Call Stack", "background": "On a day in 2020, our classmate yyy2015c01 wanted to develop an IDE.", "description": "As a member of his development team, you were unfortunately selected by yyy2015c01 to join the Debugger group.\n\nThe Debugger envisioned by yyy2015c01 consists of several parts, and one small component is the Call Stack—called “调用栈” in Chinese.\n\nSince the IDE is still in internal testing, the team first needs a Call Stack that can recognize parameter lists to see how it performs. This task is assigned to you.\n\nThe imagined Call Stack can distinguish functions by recognizing parameter lists of `int` and `char`. The rules are:\n\n```\nint fac1(int n);\n```\n\nand\n\n```\nint fac1(char n);\n```\n\nare two different functions; but\n\n```\nint Fac1(int n,int m);\n```\n\nand\n\n```\nint FAC1(int x,int y);\n```\n\nare considered the same function. In other words, this Call Stack does not care about parameter names; it distinguishes by parameter types and a case-insensitive function name.\n\nNote: `int main()` may appear or may not appear; regardless of whether it appears, it must not be counted as a function.\n\nPlease implement a Call Stack and, after all function calls complete, output how many distinct functions the program has (it is guaranteed that every function in the program is called at least once).", "inputFormat": "The input has $n + 1$ lines: the first line is a positive integer $n$, indicating there are $n$ call operations; lines $2 \\sim n+1$ each contain one function call (strictly following the sample input format), and there will be no extra characters.", "outputFormat": "Output one line: a positive integer $m$, indicating how many functions with distinct parameter lists appear in the above calls.", "hint": "Each function has at most $10$ parameters, and the length of each input line does not exceed $255$.\n\nSalute to our protagonist, classmate yyy2015c01!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy2015c01 的 IDE 之 Call Stack", "background": "在 2020 年的某一天，我们的 yyy2015c01 同学想要开发一套 IDE。\n", "description": "作为他开发团队中的一员，你不幸地 yyy2015c01 被选入了 Debugger 的开发组。\n\nyyy2015c01 设想的 Debugger 由几部分组成，其中的一个小组件就是 Call Stack——中文称之为 “调用栈”。\n\n由于 IDE 目前还是内测版，开发组需要先编一个能识别参数表的 Call Stack 来看看效果如何。这个任务交由你来完成。\n\n开发组假想的 Call Stack 能实现识别 `int` 和 `char` 参数表，以辨别出不同的函数，规则是：\n\n```\nint fac1(int n);\n```\n\n和\n\n```\nint fac1(char n);\n```\n\n是两个不同的函数；但\n\n```\nint Fac1(int n,int m);\n```\n\n和\n\n```\nint FAC1(int x,int y);\n```\n\n被认为是相同的函数。也就是说，这个 Call Stack 认的不是参数名，而是其类型和忽略大小写的函数名。\n\n注意：`int main()` 可能会出现，也可能不出现；无论它有没有出现，都不能将其算入函数中。\n\n请你编写一个 Call Stack，并在所有函数调用完后输出这个程序一共有多少个不完全相同的函数（保证程序中的每个函数至少调用一次）。\n", "inputFormat": "输入共 $n + 1$ 行：第一行是一个正整数 $n$，表示共有 $n$ 次调用操作；第 $2 \\sim n+1$ 行每行是一条函数调用信息（严格按照样例输入的格式），保证不会有多余的其他字符。\n", "outputFormat": "输出共一行：一个正整数 $m$，表示在上述调用中共有多少个参数表不完全相同的函数。\n", "hint": "每个函数的参数最多有 $10$ 个，每行的输入数据长度均不超过 $255$。\n\n向本题主人公 yyy2015c01 同学致敬！\n", "locale": "zh-CN"}}}
{"pid": "P2374", "type": "P", "difficulty": 2, "samples": [["3 2 4\n2 3 2\n1 5\n9 8 7 4\n", "257"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "搬运工", "background": "陈老师喜欢网购书籍，经常一次购它个百八十本，然后拿来倒卖牟取暴利。", "description": "前些天，高一的新同学来了，他便像往常一样兜售他的书，经过一番口舌，同学们决定买他的书，但是陈老师桌上的书有三堆，每一堆都有厚厚的一叠，他要想个办法用最轻松的方式把书拿下来给同学们。但是你想逗一下陈老师，于是你设计一个最累的方式给他。若告诉你这三堆分别有 $i$，$j$，$k$ 本书，以及每堆从下到上书的质量，每次取书只能从任一堆的最上面取，那么请你设计一个方案，让他花最大的力气取下所有的书。\n\n显然，每次取书陈老师的体力消耗都会加大，这里用体力系数代表，取下第一本书时，体力系数为 $1$，第二本书时体力系数为 $2$，依次类推，而每次体力消耗值则为体力系数与书的重量之积。", "inputFormat": "第一行有三个整数，分别为三堆书的数量 $i$，$j$，$k$。\n\n第二行至第四行分别为每堆由下至上的书本重量。", "outputFormat": "输出最累方式的体力消耗总值。\n", "hint": "#### 数据规模与约定\n\n+ 对于 $50\\%$ 的数据有 $0\\le i,j,k\\lt10$。\n+ 对于 $100\\%$ 的数据有 $0\\le i,j,k\\lt100$。\n\n最后输出的体力消耗总值在 C++ int 范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Porter", "background": "Mr. Chen likes buying books online. He often purchases a hundred or so at a time and then resells them for profit.", "description": "A few days ago, the new Grade 10 students arrived. As usual, he tried to sell his books to them. After some persuasion, the students decided to buy his books. However, there are three stacks of books on Mr. Chen’s desk, each forming a thick pile. He wants to find the easiest way to hand the books to the students, but you want to tease him by designing the most exhausting way. You are given that the three stacks have $i$，$j$，$k$ books, respectively, as well as the weight of each book in each stack from bottom to top. Each time he takes a book, he can only take the top book from any one stack. Please design an order that makes him expend the maximum effort to take down all the books.\n\nObviously, his effort increases with each book he takes. We define an effort coefficient: when taking the first book, the coefficient is $1$; for the second book, it is $2$; and so on. The effort cost for each operation equals the product of the current effort coefficient and the book’s weight.", "inputFormat": "The first line contains three integers, the numbers of books in the three stacks $i$，$j$，$k$.\n\nThe second to fourth lines give the weights of the books in each stack, listed from bottom to top.", "outputFormat": "Output the total effort cost under the most exhausting order.", "hint": "#### Constraints\n\n- For $50\\%$ of the testdata, $0\\le i,j,k\\lt10$。\n- For $100\\%$ of the testdata, $0\\le i,j,k\\lt100$。\n\nThe final total effort cost fits in the C++ int range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "搬运工", "background": "陈老师喜欢网购书籍，经常一次购它个百八十本，然后拿来倒卖牟取暴利。", "description": "前些天，高一的新同学来了，他便像往常一样兜售他的书，经过一番口舌，同学们决定买他的书，但是陈老师桌上的书有三堆，每一堆都有厚厚的一叠，他要想个办法用最轻松的方式把书拿下来给同学们。但是你想逗一下陈老师，于是你设计一个最累的方式给他。若告诉你这三堆分别有 $i$，$j$，$k$ 本书，以及每堆从下到上书的质量，每次取书只能从任一堆的最上面取，那么请你设计一个方案，让他花最大的力气取下所有的书。\n\n显然，每次取书陈老师的体力消耗都会加大，这里用体力系数代表，取下第一本书时，体力系数为 $1$，第二本书时体力系数为 $2$，依次类推，而每次体力消耗值则为体力系数与书的重量之积。", "inputFormat": "第一行有三个整数，分别为三堆书的数量 $i$，$j$，$k$。\n\n第二行至第四行分别为每堆由下至上的书本重量。", "outputFormat": "输出最累方式的体力消耗总值。\n", "hint": "#### 数据规模与约定\n\n+ 对于 $50\\%$ 的数据有 $0\\le i,j,k\\lt10$。\n+ 对于 $100\\%$ 的数据有 $0\\le i,j,k\\lt100$。\n\n最后输出的体力消耗总值在 C++ int 范围内。", "locale": "zh-CN"}}}
{"pid": "P2375", "type": "P", "difficulty": 5, "samples": [["3\naaaaa\nab\nabcababc", "36\n1\n32 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "递推", "2014", "NOI", "KMP 算法"], "title": "[NOI2014] 动物园", "background": null, "description": "近日，园长发现动物园中好吃懒做的动物越来越多了。例如企鹅，只会卖萌向游客要吃的。为了整治动物园的不良风气，让动物们凭自己的真才实学向游客要吃的，园长决定开设算法班，让动物们学习算法。\n\n某天，园长给动物们讲解 KMP 算法。\n\n园长：“对于一个字符串 $S$，它的长度为 $L$。我们可以在 $O(L)$ 的时间内，求出一个名为 $\\mathrm{next}$ 的数组。有谁预习了 $\\mathrm{next}$ 数组的含义吗？”\n\n熊猫：“对于字符串 $S$ 的前 $i$ 个字符构成的子串，既是它的后缀又是它的前缀的字符串中（它本身除外），最长的长度记作 $\\mathrm{next}[i]$。”\n\n园长：“非常好！那你能举个例子吗？”\n\n熊猫：“例 $S$ 为 $\\verb!abcababc!$，则 $\\mathrm{next}[5]=2$。因为 $S$ 的前 $5$ 个字符为 $\\verb!abcab!$，$\\verb!ab!$ 既是它的后缀又是它的前缀，并且找不到一个更长的字符串满足这个性质。同理，还可得出 $\\mathrm{next}[1] = \\mathrm{next}[2] = \\mathrm{next}[3] = 0$，$\\mathrm{next}[4] = \\mathrm{next}[6] = 1$，$\\mathrm{next}[7] = 2$，$\\mathrm{next}[8] = 3$。”\n\n园长表扬了认真预习的熊猫同学。随后，他详细讲解了如何在 $O(L)$ 的时间内求出 $\\mathrm{next}$ 数组。\n\n下课前，园长提出了一个问题：“KMP 算法只能求出 $\\mathrm{next}$ 数组。我现在希望求出一个更强大 $\\mathrm{num}$ 数组一一对于字符串 $S$ 的前 $i$ 个字符构成的子串，既是它的后缀同时又是它的前缀，并且该后缀与该前缀不重叠，将这种字符串的数量记作 $\\mathrm{num}[i]$。例如 $S$ 为 $\\verb!aaaaa!$，则 $\\mathrm{num}[4] = 2$。这是因为 $S$ 的前 $4$ 个字符为 $\\verb!aaaa!$，其中 $\\verb!a!$ 和 $\\verb!aa!$ 都满足性质‘既是后缀又是前缀’，同时保证这个后缀与这个前缀不重叠。而 $\\verb!aaa!$ 虽然满足性质‘既是后缀又是前缀’，但遗憾的是这个后缀与这个前缀重叠了，所以不能计算在内。同理，$\\mathrm{num}[1] = 0,\\mathrm{num}[2] = \\mathrm{num}[3] = 1,\\mathrm{num}[5] = 2$。”\n\n最后，园长给出了奖励条件，第一个做对的同学奖励巧克力一盒。听了这句话，睡了一节课的企鹅立刻就醒过来了！但企鹅并不会做这道题，于是向参观动物园的你寻求帮助。你能否帮助企鹅写一个程序求出 $\\mathrm{num}$ 数组呢？\n\n特别地，为了避免大量的输出，你不需要输出 $\\mathrm{num}[i]$ 分别是多少，你只需要输出所有 $(\\mathrm{num}[i]+1)$ 的乘积，对 $10^9 + 7$ 取模的结果即可。", "inputFormat": "第 $1$ 行仅包含一个正整数 $n$，表示测试数据的组数。  \n随后 $n$ 行，每行描述一组测试数据。每组测试数据仅含有一个字符串 $S$，$S$ 的定义详见题目描述。数据保证 $S$ 中仅含小写字母。输入文件中不会包含多余的空行，行末不会存在多余的空格。", "outputFormat": "包含 $n$ 行，每行描述一组测试数据的答案，答案的顺序应与输入数据的顺序保持一致。对于每组测试数据，仅需要输出一个整数，表示这组测试数据的答案对 $10^9+7$ 取模的结果。输出文件中不应包含多余的空行。", "hint": "测试点编号| 约定\n-|-  \n1| $n \\le 5, L \\le 50$  \n2| $n \\le 5, L \\le 200$  \n3| $n \\le 5, L \\le 200$  \n4| $n \\le 5, L \\le 10,000$  \n5| $n \\le 5, L \\le 10,000$  \n6| $n \\le 5, L \\le 100,000$  \n7| $n \\le 5, L \\le 200,000$   \n8| $n \\le 5, L \\le 500,000$  \n9| $n \\le 5, L \\le 1,000,000$  \n10| $n \\le 5, L \\le 1,000,000$", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Zoo", "background": "", "description": "Recently, the director found that more and more animals in the zoo were lazy and only cared about eating. For example, penguins only act cute to ask visitors for food. To rectify this bad trend and make the animals ask for food with their real skills, the director decided to open an algorithms class so that the animals could learn algorithms.\n\nOne day, the director explained the KMP algorithm.\n\nDirector: \"For a string $S$ of length $L$, we can compute in $O(L)$ time an array called $\\mathrm{next}$. Has anyone previewed the meaning of the $\\mathrm{next}$ array?\"\n\nPanda: \"For the substring formed by the first $i$ characters of string $S$, among the strings that are both its suffix and its prefix (excluding the substring itself), the maximum length is denoted as $\\mathrm{next}[i]$.\"\n\nDirector: \"Very good! Can you give an example?\"\n\nPanda: \"For example, if $S$ is $\\verb!abcababc!$, then $\\mathrm{next}[5] = 2$. This is because the first $5$ characters of $S$ are $\\verb!abcab!$, and $\\verb!ab!$ is both its suffix and its prefix, and there is no longer string that satisfies this property. Similarly, we can also get $\\mathrm{next}[1] = \\mathrm{next}[2] = \\mathrm{next}[3] = 0$, $\\mathrm{next}[4] = \\mathrm{next}[6] = 1$, $\\mathrm{next}[7] = 2$, $\\mathrm{next}[8] = 3$.\"\n\nThe director praised Panda for previewing diligently. Then he explained in detail how to compute the $\\mathrm{next}$ array in $O(L)$ time.\n\nBefore class ended, the director posed a question: \"The KMP algorithm can only compute the $\\mathrm{next}$ array. I now want to compute a more powerful array $\\mathrm{num}$ — for the substring formed by the first $i$ characters of string $S$, count the number of strings that are both its suffix and its prefix, and moreover the suffix and the prefix do not overlap. Denote this count as $\\mathrm{num}[i]$. For example, if $S$ is $\\verb!aaaaa!$, then $\\mathrm{num}[4] = 2$. This is because the first $4$ characters of $S$ are $\\verb!aaaa!$, among which $\\verb!a!$ and $\\verb!aa!$ both satisfy the property 'being both a suffix and a prefix', while ensuring that the suffix and the prefix do not overlap. Although $\\verb!aaa!$ also satisfies 'being both a suffix and a prefix', unfortunately its suffix and prefix overlap, so it cannot be counted. Similarly, $\\mathrm{num}[1] = 0, \\mathrm{num}[2] = \\mathrm{num}[3] = 1, \\mathrm{num}[5] = 2$.\"\n\nFinally, the director announced a reward: the first student to solve it correctly would get a box of chocolates. Hearing this, the penguin who had slept through the class suddenly woke up! But the penguin could not solve the problem, so it asked you, a visitor to the zoo, for help. Can you help the penguin write a program to compute the $\\mathrm{num}$ array?\n\nIn particular, to avoid massive output, you do not need to print each $\\mathrm{num}[i]$. You only need to output the product of all $(\\mathrm{num}[i] + 1)$, modulo $10^9 + 7$.", "inputFormat": "The first line contains a single positive integer $n$, the number of test cases.  \nThen follow $n$ lines, each describing one test case. Each test case contains a single string $S$. See the problem statement for the definition of $S$. It is guaranteed that $S$ contains only lowercase letters. The input file will not contain extra blank lines, and there will be no trailing spaces at the end of lines.", "outputFormat": "Output $n$ lines, each describing the answer for one test case, in the same order as the input. For each test case, output a single integer, which is the answer modulo $10^9 + 7$. The output file should not contain extra blank lines.", "hint": "Test point ID | Constraints\n-|-  \n1 | $n \\le 5, L \\le 50$  \n2 | $n \\le 5, L \\le 200$  \n3 | $n \\le 5, L \\le 200$  \n4 | $n \\le 5, L \\le 10{,}000$  \n5 | $n \\le 5, L \\le 10{,}000$  \n6 | $n \\le 5, L \\le 100{,}000$  \n7 | $n \\le 5, L \\le 200{,}000$  \n8 | $n \\le 5, L \\le 500{,}000$  \n9 | $n \\le 5, L \\le 1{,}000{,}000$  \n10 | $n \\le 5, L \\le 1{,}000{,}000$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 动物园", "background": null, "description": "近日，园长发现动物园中好吃懒做的动物越来越多了。例如企鹅，只会卖萌向游客要吃的。为了整治动物园的不良风气，让动物们凭自己的真才实学向游客要吃的，园长决定开设算法班，让动物们学习算法。\n\n某天，园长给动物们讲解 KMP 算法。\n\n园长：“对于一个字符串 $S$，它的长度为 $L$。我们可以在 $O(L)$ 的时间内，求出一个名为 $\\mathrm{next}$ 的数组。有谁预习了 $\\mathrm{next}$ 数组的含义吗？”\n\n熊猫：“对于字符串 $S$ 的前 $i$ 个字符构成的子串，既是它的后缀又是它的前缀的字符串中（它本身除外），最长的长度记作 $\\mathrm{next}[i]$。”\n\n园长：“非常好！那你能举个例子吗？”\n\n熊猫：“例 $S$ 为 $\\verb!abcababc!$，则 $\\mathrm{next}[5]=2$。因为 $S$ 的前 $5$ 个字符为 $\\verb!abcab!$，$\\verb!ab!$ 既是它的后缀又是它的前缀，并且找不到一个更长的字符串满足这个性质。同理，还可得出 $\\mathrm{next}[1] = \\mathrm{next}[2] = \\mathrm{next}[3] = 0$，$\\mathrm{next}[4] = \\mathrm{next}[6] = 1$，$\\mathrm{next}[7] = 2$，$\\mathrm{next}[8] = 3$。”\n\n园长表扬了认真预习的熊猫同学。随后，他详细讲解了如何在 $O(L)$ 的时间内求出 $\\mathrm{next}$ 数组。\n\n下课前，园长提出了一个问题：“KMP 算法只能求出 $\\mathrm{next}$ 数组。我现在希望求出一个更强大 $\\mathrm{num}$ 数组一一对于字符串 $S$ 的前 $i$ 个字符构成的子串，既是它的后缀同时又是它的前缀，并且该后缀与该前缀不重叠，将这种字符串的数量记作 $\\mathrm{num}[i]$。例如 $S$ 为 $\\verb!aaaaa!$，则 $\\mathrm{num}[4] = 2$。这是因为 $S$ 的前 $4$ 个字符为 $\\verb!aaaa!$，其中 $\\verb!a!$ 和 $\\verb!aa!$ 都满足性质‘既是后缀又是前缀’，同时保证这个后缀与这个前缀不重叠。而 $\\verb!aaa!$ 虽然满足性质‘既是后缀又是前缀’，但遗憾的是这个后缀与这个前缀重叠了，所以不能计算在内。同理，$\\mathrm{num}[1] = 0,\\mathrm{num}[2] = \\mathrm{num}[3] = 1,\\mathrm{num}[5] = 2$。”\n\n最后，园长给出了奖励条件，第一个做对的同学奖励巧克力一盒。听了这句话，睡了一节课的企鹅立刻就醒过来了！但企鹅并不会做这道题，于是向参观动物园的你寻求帮助。你能否帮助企鹅写一个程序求出 $\\mathrm{num}$ 数组呢？\n\n特别地，为了避免大量的输出，你不需要输出 $\\mathrm{num}[i]$ 分别是多少，你只需要输出所有 $(\\mathrm{num}[i]+1)$ 的乘积，对 $10^9 + 7$ 取模的结果即可。", "inputFormat": "第 $1$ 行仅包含一个正整数 $n$，表示测试数据的组数。  \n随后 $n$ 行，每行描述一组测试数据。每组测试数据仅含有一个字符串 $S$，$S$ 的定义详见题目描述。数据保证 $S$ 中仅含小写字母。输入文件中不会包含多余的空行，行末不会存在多余的空格。", "outputFormat": "包含 $n$ 行，每行描述一组测试数据的答案，答案的顺序应与输入数据的顺序保持一致。对于每组测试数据，仅需要输出一个整数，表示这组测试数据的答案对 $10^9+7$ 取模的结果。输出文件中不应包含多余的空行。", "hint": "测试点编号| 约定\n-|-  \n1| $n \\le 5, L \\le 50$  \n2| $n \\le 5, L \\le 200$  \n3| $n \\le 5, L \\le 200$  \n4| $n \\le 5, L \\le 10,000$  \n5| $n \\le 5, L \\le 10,000$  \n6| $n \\le 5, L \\le 100,000$  \n7| $n \\le 5, L \\le 200,000$   \n8| $n \\le 5, L \\le 500,000$  \n9| $n \\le 5, L \\le 1,000,000$  \n10| $n \\le 5, L \\le 1,000,000$", "locale": "zh-CN"}}}
{"pid": "P2376", "type": "P", "difficulty": 4, "samples": [["3 6\n10 1\n1 100\n5 120", "111"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2005", "2009", "USACO"], "title": "[USACO05OCT] Allowance S / [USACO09OCT] Allowance G", "background": null, "description": "作为创造产奶纪录的回报，Farmer John 决定开始每个星期给 Bessie 一点零花钱。\n\nFJ 有一些硬币，一共有 $N\\ (1 \\le N \\le 20)$ 种不同的面额。每一个面额都能整除所有比它大的面额。\n\n他想用给定的硬币的集合，每个星期至少给 Bessie 某个零花钱的数目 $C\\ (1 \\le C \\le 10^8)$。请帮他计算他最多能支付多少个星期的零花钱。", "inputFormat": "第 $1$ 行：两个由空格隔开的整数：$N$ 和 $C$。\n\n第 $2$ 到第 $N+1$ 行：每一行有两个整数表示一个面额的硬币：硬币面额 $V\\ (1 \\le V \\le 10^8)$ 拥有的该面额的硬币数 $B\\ (1 \\le B \\le 10^6)$。", "outputFormat": "第 $1$ 行：一个单独的整数，表示最多能支付多少个星期的零花钱。", "hint": "### 样例解释\nFJ 可以用一个面额为 $10$ 的硬币一次性支付 Bessie $1$ 周，用两个面额为 $5$ 的硬币支付 Bessie $10$ 周，用一个面额为 $1$ 的硬币和一个面额为 $5$ 的硬币支付 Bessie $100$ 周。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05OCT] Allowance S / [USACO09OCT] Allowance G", "background": null, "description": "As a reward for setting a milk production record, Farmer John decides to give Bessie a weekly allowance.\n\nFJ has some coins, with $N (1 \\le N \\le 20)$ different denominations. Each denomination divides all larger denominations.\n\nUsing the given collection of coins, he wants to give Bessie at least $C (1 \\le C \\le 100000000)$ each week. Please compute the maximum number of weeks he can make such payments.", "inputFormat": "Line $1$: Two space-separated integers: $N$ and $C$.\n\nLines $2$ to $N+1$: Each line contains two integers describing one coin denomination: the coin value $V (1 \\le V \\le 100,000,000)$ and the number of coins of that denomination $B (1 \\le B \\le 1,000,000)$.", "outputFormat": "Line $1$: A single integer, the maximum number of weeks he can pay an allowance of at least $C$.", "hint": "FJ can overpay Bessie with the one $10$-cent coin for $1$ week, then pay Bessie two $5$-cent coins for $10$ weeks and then pay Bessie one $1$-cent coin and one $5$-cent coin for $100$ weeks.", "locale": "en"}, "zh-CN": {"title": "[USACO05OCT] Allowance S / [USACO09OCT] Allowance G", "background": null, "description": "作为创造产奶纪录的回报，Farmer John 决定开始每个星期给 Bessie 一点零花钱。\n\nFJ 有一些硬币，一共有 $N\\ (1 \\le N \\le 20)$ 种不同的面额。每一个面额都能整除所有比它大的面额。\n\n他想用给定的硬币的集合，每个星期至少给 Bessie 某个零花钱的数目 $C\\ (1 \\le C \\le 10^8)$。请帮他计算他最多能支付多少个星期的零花钱。", "inputFormat": "第 $1$ 行：两个由空格隔开的整数：$N$ 和 $C$。\n\n第 $2$ 到第 $N+1$ 行：每一行有两个整数表示一个面额的硬币：硬币面额 $V\\ (1 \\le V \\le 10^8)$ 拥有的该面额的硬币数 $B\\ (1 \\le B \\le 10^6)$。", "outputFormat": "第 $1$ 行：一个单独的整数，表示最多能支付多少个星期的零花钱。", "hint": "### 样例解释\nFJ 可以用一个面额为 $10$ 的硬币一次性支付 Bessie $1$ 周，用两个面额为 $5$ 的硬币支付 Bessie $10$ 周，用一个面额为 $1$ 的硬币和一个面额为 $5$ 的硬币支付 Bessie $100$ 周。", "locale": "zh-CN"}}}
{"pid": "P2377", "type": "P", "difficulty": 5, "samples": [["2\neee\ncedde\n", "1\ndede\n\n3\nbeddde cdecde cecece\n"], ["2\nadeccecced\ndddddd\n", "5\nacedccecced addebcecced adebebecced adecbedcced cceccecce\n\n1\ncddddce\n"], ["7\neee\ncedde\nadeccecced\ndddddd\nccdeccde\nbaedddcdde\nabcedcdcddde", "1\ndede\n\n3\nbeddde cdecde cecece\n\n5\nacedccecced addebcecced adebebecced adecbedcced cceccecce\n\n1\ncddddce\n\n4\nbcdeccdde bcedccece bdeccdebe cccedccde\n\n8\nabdecdcddde abececcddde abedcebddde abeddbecdde abeddccecde abeddcdcece abeddcddced addddcdde\n\n10\nabbeddcdcddde abcdeccdcddde abcecebdcddde abcedbeccddde abcedccebddde abcedcdbecdde abcedcdccecde abcedcdcdcece abcedcdcddced acedcdcdddd"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "三角形图", "background": "请在 [这里](https://www.luogu.com.cn/paste/tre46v8i) 查看原题面。", "description": "UNowen 有 $n$ 个[平面向量](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E5%90%91%E9%87%8F/448934?fr=ge_ala) $\\{\\bm L_n\\}$，其中：\n\n- $|\\bm L_1|=|\\bm L_2|=\\ldots=|\\bm L_n|=1$；\n- $\\bm L_1+\\bm L_2+\\ldots+\\bm L_n=\\bm 0$；\n- 对于任意正整数 $1 \\le i,j \\le n$，总存在整数 $k$ 使得 $\\langle\\bm L_i,\\bm L_j\\rangle=\\dfrac{k\\pi}{3}$；（[$\\dfrac{k\\pi}{3}=k \\times 60^\\circ$](https://baike.baidu.com/item/%E5%BC%A7%E5%BA%A6/1533188?fr=ge_ala)）\n- 除了整个向量序列以外（下同），向量序列中不存在和为 $\\bm 0$ 的一段。\n\n此处 $\\langle\\bm X,\\bm Y\\rangle$ 代指「将 $\\bm X$ 旋转至与 $\\bm Y$ 同向所旋转的角度」，逆时针为正角，顺时针为负角（例如，设 $\\bm X=(\\dfrac{\\sqrt{2}}{2},\\dfrac{\\sqrt{2}}{2})$，$\\bm Y=(1,0)$，则 $\\langle\\bm X,\\bm Y\\rangle=-\\dfrac{\\pi}{4}$）。\n\n**也就是说，这 $n$ 个向量的长度（模）均为 $1$，并且首尾拼接可以得到一个封闭多边形。保证这个封闭多边形的各个内角均为 $\\dfrac{\\pi}{3}$ 的正整数倍，内部没有其他向量，并且不是空心的。**\n\n为了表述方便，我们用一个长度为 $n$，字符集为 $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e,\\#\\}$ 的字符串 $S$ 来描述 $\\{\\bm L_n\\}$。\n\n具体地，对于 $S$ 的第 $i$ 个字符（特别地，$\\bm L_0$ 等价于 $\\bm L_n$，$\\bm L_{n+1}$ 等价于 $\\bm L_1$，下同）：\n\n| 字符 | 含义 |\n| :----------: | :----------: |\n| $\\tt a$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=\\dfrac{2\\pi}{3}$ |\n| $\\tt b$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=\\dfrac{\\pi}{3}$ |\n| $\\tt c$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=0$ |\n| $\\tt d$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=-\\dfrac{\\pi}{3}$ |\n| $\\tt e$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=-\\dfrac{2\\pi}{3}$ |\n| $\\tt \\#$ | $\\vert\\langle\\bm L_i,\\bm L_{i+1}\\rangle\\vert=\\pi$ |\n\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/68g5vnfv.png)\n\n此外，UNowen 按如下方式定义一个向量序列 $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ 的「标准表示」：\n\n- 分别对于 $l=1,2,\\ldots,n$，求出向量序列 $\\{\\bm L_l,\\bm L_{l+1},\\ldots,\\bm L_n,\\bm L_1,\\bm L_2,\\ldots,\\bm L_{l-1}\\}$ 对应的字符串：\n- 取 $n$ 个字符串中[字典序](https://baike.baidu.com/item/%E5%AD%97%E5%85%B8%E5%BA%8F/7786229?fr=ge_ala)最小的字符串作为向量序列 $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ 的「标准表示」。\n\n例如，上图中向量序列的「标准表示」是 $S=\\texttt{abcedcdcddde}$，而不能是 $S=\\texttt{dcdcdddeabce}$。\n\n现在，UNowen 把向量序列 $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ 对应的字符串 $S$（不一定是「标准表示」）给了你。他希望你可以按如下方式对这个向量序列进行一次修改：\n\n- 选定一个正整数 $1 \\le k \\le n$；\n- 构造两个平面向量 $\\bm X,\\bm Y$，使得：\n  - $|\\bm X|=1$；\n  - $|\\bm Y|=1$；\n  - $\\langle\\bm L_k,\\bm X\\rangle=\\dfrac{\\pi}{3}$；\n  - $\\langle\\bm L_k,\\bm Y\\rangle=-\\dfrac{\\pi}{3}$。\n- 用 $\\bm X,\\bm Y$ 两项（$\\bm X$ 在前，$\\bm Y$ 在后）替换 $\\bm L_k$；\n- 若 $\\bm L_{k-1}+\\bm X=\\bm 0$，删除 $\\bm L_{k-1},\\bm X$；\n- 若 $\\bm L_{k+1}+\\bm Y=\\bm 0$，删除 $\\bm L_{k+1},\\bm Y$；\n- 若修改后的向量序列中存在和为 $\\bm 0$ 的一段（除了整个向量序列以外），那么 UNowen 称这次修改是不合法的。例如，在下面的图片中，如果选择 $k=3$，那么修改就是不合法的。\n- UNowen 会将修改后的向量序列的「标准表示」定义为该次修改的「修改结果」。\n- 对于任意两个修改方案，如果修改后的向量序列首尾拼接得到的图形全等，那么 UNowen 会认为这两个修改方案是等价的。例如，在下面的图片中，$k=1$ 和 $k=2$ 的两个修改方案就是等价的。\n- **也就是说，修改操作会对封闭多边形上的某个向量向外作等边三角形，使得修改后的图形仍为满足上述要求（各个内角均为 $\\dfrac{\\pi}{3}$ 的正整数倍，内部没有其他向量，并且不是空心的）的封闭多边形。对于任意两个修改方案，如果修改后的向量序列首尾拼接得到的图形全等，那么它们是等价的。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgd779r1.png)\n\n请求出互不等价的合法的修改方案的个数，并按字典序从小到大输出每个修改方案的「修改结果」。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行，每行一个字符集为 $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e\\}$ 的非空字符串 $S$。保证 $\\tt \\#$ 不会出现。", "outputFormat": "对于每组数据，输出三行：\n\n第一行一个正整数 $K$，表示，并按字典序从小到大输出每个修改方案。\n\n第二行 $K$ 个字符集为 $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e\\}$ 的非空字符串（用空格隔开），表示每个可能出现的「修改结果」。你需要按字典序从小到大的顺序输出它们。可以证明 $\\tt \\#$ 不会出现。\n\n**第三行是空行。请特别注意这一点，因为它不符合传统题的一般数据格式。**", "hint": "设 $|S|$ 为字符串 $S$ 的长度。\n\n对于 $30\\%$ 的数据，$T \\le 5$，$|S| \\le 9$。\n\n对于 $50\\%$ 的数据，保证所有的修改方案都是合法的。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 100$，$3 \\le |S| \\le 75$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Triangle Graph", "background": "Please view the original statement [here](https://www.luogu.com.cn/paste/tre46v8i).", "description": "UNowen has $n$ [plane vectors](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E5%90%91%E9%87%8F/448934?fr=ge_ala) $\\{\\bm L_n\\}$, where:\n\n- $|\\bm L_1|=|\\bm L_2|=\\ldots=|\\bm L_n|=1$;\n- $\\bm L_1+\\bm L_2+\\ldots+\\bm L_n=\\bm 0$;\n- For any positive integers $1 \\le i,j \\le n$, there always exists an integer $k$ such that $\\langle\\bm L_i,\\bm L_j\\rangle=\\dfrac{k\\pi}{3}$; ([$\\dfrac{k\\pi}{3}=k \\times 60^\\circ$](https://baike.baidu.com/item/%E5%BC%A7%E5%BA%A6/1533188?fr=ge_ala))\n- Except for the entire vector sequence (same below), there is no contiguous subsequence in the vector sequence whose sum is $\\bm 0$.\n\nHere $\\langle\\bm X,\\bm Y\\rangle$ denotes “the angle by which $\\bm X$ is rotated to point in the same direction as $\\bm Y$,” where counterclockwise is positive and clockwise is negative (for example, let $\\bm X=(\\dfrac{\\sqrt{2}}{2},\\dfrac{\\sqrt{2}}{2})$, $\\bm Y=(1,0)$, then $\\langle\\bm X,\\bm Y\\rangle=-\\dfrac{\\pi}{4}$).\n\nIn other words, all $n$ vectors have length $1$, and concatenating them head to tail forms a closed polygon. It is guaranteed that each interior angle of this polygon is an integer multiple of $\\dfrac{\\pi}{3}$, its interior contains no other vectors, and it is not hollow.\n\nFor convenience, we use a string $S$ of length $n$ over the alphabet $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e,\\#\\}$ to describe $\\{\\bm L_n\\}$.\n\nSpecifically, for the $i$-th character in $S$ (in particular, $\\bm L_0$ is equivalent to $\\bm L_n$, and $\\bm L_{n+1}$ is equivalent to $\\bm L_1$, similarly below):\n\n| 字符 | 含义 |\n| :----------: | :----------: |\n| $\\tt a$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=\\dfrac{2\\pi}{3}$ |\n| $\\tt b$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=\\dfrac{\\pi}{3}$ |\n| $\\tt c$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=0$ |\n| $\\tt d$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=-\\dfrac{\\pi}{3}$ |\n| $\\tt e$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=-\\dfrac{2\\pi}{3}$ |\n| $\\tt \\#$ | $\\vert\\langle\\bm L_i,\\bm L_{i+1}\\rangle\\vert=\\pi$ |\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/68g5vnfv.png)\n\nIn addition, UNowen defines a “standard representation” of a vector sequence $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ as follows:\n\n- For $l=1,2,\\ldots,n$, compute the string corresponding to the vector sequence $\\{\\bm L_l,\\bm L_{l+1},\\ldots,\\bm L_n,\\bm L_1,\\bm L_2,\\ldots,\\bm L_{l-1}\\}$.\n- Among these $n$ strings, take the lexicographically smallest string as the “standard representation” of the vector sequence $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$.\n\nFor example, the “standard representation” of the vector sequence in the figure above is $S=\\texttt{abcedcdcddde}$, and not $S=\\texttt{dcdcdddeabce}$.\n\nNow, UNowen gives you the string $S$ corresponding to the vector sequence $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ (which is not necessarily its “standard representation”). He hopes you can perform one modification to this vector sequence as follows:\n\n- Choose a positive integer $1 \\le k \\le n$.\n- Construct two plane vectors $\\bm X,\\bm Y$ such that:\n  - $|\\bm X|=1$;\n  - $|\\bm Y|=1$;\n  - $\\langle\\bm L_k,\\bm X\\rangle=\\dfrac{\\pi}{3}$;\n  - $\\langle\\bm L_k,\\bm Y\\rangle=-\\dfrac{\\pi}{3}$.\n- Replace $\\bm L_k$ with two items $\\bm X,\\bm Y$ (with $\\bm X$ before $\\bm Y$).\n- If $\\bm L_{k-1}+\\bm X=\\bm 0$, delete $\\bm L_{k-1}$ and $\\bm X$.\n- If $\\bm L_{k+1}+\\bm Y=\\bm 0$, delete $\\bm L_{k+1}$ and $\\bm Y$.\n- If after the modification there exists a contiguous subsequence whose sum is $\\bm 0$ (other than the entire vector sequence), then UNowen considers this modification invalid. For example, in the figure below, if you choose $k=3$, then the modification is invalid.\n- UNowen defines the “modification result” as the “standard representation” of the modified vector sequence.\n- For any two modification schemes, if the polygons obtained by concatenating the modified vector sequences head to tail are congruent, then UNowen considers the two modification schemes equivalent. For example, in the figure below, the two modification schemes $k=1$ and $k=2$ are equivalent.\n- That is, the modification operation constructs an outward equilateral triangle on some vector of the closed polygon, such that the modified shape is still a closed polygon satisfying the above requirements (each interior angle is an integer multiple of $\\dfrac{\\pi}{3}$, the interior contains no other vectors, and it is not hollow). For any two modification schemes, if the polygons obtained from the modified sequences are congruent, then they are equivalent.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgd779r1.png)\n\nFind the number of pairwise non-equivalent valid modification schemes, and output the “modification result” of each scheme in lexicographic order.", "inputFormat": "This problem contains multiple test cases.\n\nThe first line contains a positive integer $T$, the number of test cases.\n\nThe next $T$ lines each contain a non-empty string $S$ over the alphabet $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e\\}$. It is guaranteed that $\\tt \\#$ will not appear.", "outputFormat": "For each test case, output three lines:\n\n- The first line contains a positive integer $K$, the number of pairwise non-equivalent valid modification schemes.\n- The second line contains $K$ non-empty strings over the alphabet $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e\\}$ (separated by spaces), representing each possible “modification result.” You must output them in lexicographic order. It can be proven that $\\tt \\#$ will not appear.\n- The third line is an empty line. Please pay special attention to this, as it does not follow the usual data format of traditional problems.", "hint": "Let $|S|$ be the length of the string $S$.\n\n- For $30\\%$ of the testdata, $T \\le 5$, $|S| \\le 9$.\n- For $50\\%$ of the testdata, it is guaranteed that all modification schemes are valid.\n- For $100\\%$ of the testdata, $1 \\le T \\le 100$, $3 \\le |S| \\le 75$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三角形图", "background": "请在 [这里](https://www.luogu.com.cn/paste/tre46v8i) 查看原题面。", "description": "UNowen 有 $n$ 个[平面向量](https://baike.baidu.com/item/%E5%B9%B3%E9%9D%A2%E5%90%91%E9%87%8F/448934?fr=ge_ala) $\\{\\bm L_n\\}$，其中：\n\n- $|\\bm L_1|=|\\bm L_2|=\\ldots=|\\bm L_n|=1$；\n- $\\bm L_1+\\bm L_2+\\ldots+\\bm L_n=\\bm 0$；\n- 对于任意正整数 $1 \\le i,j \\le n$，总存在整数 $k$ 使得 $\\langle\\bm L_i,\\bm L_j\\rangle=\\dfrac{k\\pi}{3}$；（[$\\dfrac{k\\pi}{3}=k \\times 60^\\circ$](https://baike.baidu.com/item/%E5%BC%A7%E5%BA%A6/1533188?fr=ge_ala)）\n- 除了整个向量序列以外（下同），向量序列中不存在和为 $\\bm 0$ 的一段。\n\n此处 $\\langle\\bm X,\\bm Y\\rangle$ 代指「将 $\\bm X$ 旋转至与 $\\bm Y$ 同向所旋转的角度」，逆时针为正角，顺时针为负角（例如，设 $\\bm X=(\\dfrac{\\sqrt{2}}{2},\\dfrac{\\sqrt{2}}{2})$，$\\bm Y=(1,0)$，则 $\\langle\\bm X,\\bm Y\\rangle=-\\dfrac{\\pi}{4}$）。\n\n**也就是说，这 $n$ 个向量的长度（模）均为 $1$，并且首尾拼接可以得到一个封闭多边形。保证这个封闭多边形的各个内角均为 $\\dfrac{\\pi}{3}$ 的正整数倍，内部没有其他向量，并且不是空心的。**\n\n为了表述方便，我们用一个长度为 $n$，字符集为 $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e,\\#\\}$ 的字符串 $S$ 来描述 $\\{\\bm L_n\\}$。\n\n具体地，对于 $S$ 的第 $i$ 个字符（特别地，$\\bm L_0$ 等价于 $\\bm L_n$，$\\bm L_{n+1}$ 等价于 $\\bm L_1$，下同）：\n\n| 字符 | 含义 |\n| :----------: | :----------: |\n| $\\tt a$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=\\dfrac{2\\pi}{3}$ |\n| $\\tt b$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=\\dfrac{\\pi}{3}$ |\n| $\\tt c$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=0$ |\n| $\\tt d$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=-\\dfrac{\\pi}{3}$ |\n| $\\tt e$ | $\\langle\\bm L_i,\\bm L_{i+1}\\rangle=-\\dfrac{2\\pi}{3}$ |\n| $\\tt \\#$ | $\\vert\\langle\\bm L_i,\\bm L_{i+1}\\rangle\\vert=\\pi$ |\n\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/68g5vnfv.png)\n\n此外，UNowen 按如下方式定义一个向量序列 $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ 的「标准表示」：\n\n- 分别对于 $l=1,2,\\ldots,n$，求出向量序列 $\\{\\bm L_l,\\bm L_{l+1},\\ldots,\\bm L_n,\\bm L_1,\\bm L_2,\\ldots,\\bm L_{l-1}\\}$ 对应的字符串：\n- 取 $n$ 个字符串中[字典序](https://baike.baidu.com/item/%E5%AD%97%E5%85%B8%E5%BA%8F/7786229?fr=ge_ala)最小的字符串作为向量序列 $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ 的「标准表示」。\n\n例如，上图中向量序列的「标准表示」是 $S=\\texttt{abcedcdcddde}$，而不能是 $S=\\texttt{dcdcdddeabce}$。\n\n现在，UNowen 把向量序列 $\\{\\bm L_1,\\bm L_2,\\ldots,\\bm L_n\\}$ 对应的字符串 $S$（不一定是「标准表示」）给了你。他希望你可以按如下方式对这个向量序列进行一次修改：\n\n- 选定一个正整数 $1 \\le k \\le n$；\n- 构造两个平面向量 $\\bm X,\\bm Y$，使得：\n  - $|\\bm X|=1$；\n  - $|\\bm Y|=1$；\n  - $\\langle\\bm L_k,\\bm X\\rangle=\\dfrac{\\pi}{3}$；\n  - $\\langle\\bm L_k,\\bm Y\\rangle=-\\dfrac{\\pi}{3}$。\n- 用 $\\bm X,\\bm Y$ 两项（$\\bm X$ 在前，$\\bm Y$ 在后）替换 $\\bm L_k$；\n- 若 $\\bm L_{k-1}+\\bm X=\\bm 0$，删除 $\\bm L_{k-1},\\bm X$；\n- 若 $\\bm L_{k+1}+\\bm Y=\\bm 0$，删除 $\\bm L_{k+1},\\bm Y$；\n- 若修改后的向量序列中存在和为 $\\bm 0$ 的一段（除了整个向量序列以外），那么 UNowen 称这次修改是不合法的。例如，在下面的图片中，如果选择 $k=3$，那么修改就是不合法的。\n- UNowen 会将修改后的向量序列的「标准表示」定义为该次修改的「修改结果」。\n- 对于任意两个修改方案，如果修改后的向量序列首尾拼接得到的图形全等，那么 UNowen 会认为这两个修改方案是等价的。例如，在下面的图片中，$k=1$ 和 $k=2$ 的两个修改方案就是等价的。\n- **也就是说，修改操作会对封闭多边形上的某个向量向外作等边三角形，使得修改后的图形仍为满足上述要求（各个内角均为 $\\dfrac{\\pi}{3}$ 的正整数倍，内部没有其他向量，并且不是空心的）的封闭多边形。对于任意两个修改方案，如果修改后的向量序列首尾拼接得到的图形全等，那么它们是等价的。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgd779r1.png)\n\n请求出互不等价的合法的修改方案的个数，并按字典序从小到大输出每个修改方案的「修改结果」。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行，每行一个字符集为 $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e\\}$ 的非空字符串 $S$。保证 $\\tt \\#$ 不会出现。", "outputFormat": "对于每组数据，输出三行：\n\n第一行一个正整数 $K$，表示，并按字典序从小到大输出每个修改方案。\n\n第二行 $K$ 个字符集为 $\\{\\tt a,\\tt b,\\tt c,\\tt d,\\tt e\\}$ 的非空字符串（用空格隔开），表示每个可能出现的「修改结果」。你需要按字典序从小到大的顺序输出它们。可以证明 $\\tt \\#$ 不会出现。\n\n**第三行是空行。请特别注意这一点，因为它不符合传统题的一般数据格式。**", "hint": "设 $|S|$ 为字符串 $S$ 的长度。\n\n对于 $30\\%$ 的数据，$T \\le 5$，$|S| \\le 9$。\n\n对于 $50\\%$ 的数据，保证所有的修改方案都是合法的。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 100$，$3 \\le |S| \\le 75$。\n", "locale": "zh-CN"}}}
{"pid": "P2378", "type": "P", "difficulty": 3, "samples": [["x^2-4", "(x+2)(x-2)\r\n//而不能写成(x-2)(x+2)或者(x+2)(x+-2)"], ["x^2+5x+4", "(x+4)(x+1)\r\n//不能写成(x+1)(x+4)"], ["x^2-2x+1", "(x-1)^2"], ["x^2+x", "(x+1)x\r\n//反过来是不可以的。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2015", "洛谷原创", "洛谷月赛"], "title": "因式分解II", "background": null, "description": "小玉上了初中，开始学因式分解。可是她怎么都解不出来。所以她求你帮忙。\n\n她给你看了她的作业，就是因式分解。由于刚开始学，就降低了难度。\n\n我们假设作业里面的代数只有一个 $x$。最高指数是 $2$，且最高指数的系数是 $1$。当 $x$ 前的系数是 $1$ 时，$1$ 省去……（反正作业题目符合我们的日常写法）\n\n我们帮她解决下这个“简单”的问题吧！虽然听起来挺容易，但是编程需要考虑很多情况呢！\n\n保证作业答案的数字都是整数。\n\n\n// 这跟神器有什么关系么？神说，帮助他人，积累善行，神器自然出现。哈哈哈哈好牵强的解释~\n\n//为了帮助在5月月赛ac这道题目，kkksc03偷偷地进行以下的温馨提示：\n\n//数据可能会比较刁钻，请考虑到各种情况，包括只有输入一项的情况、中间过程会不会超maxlongint的情况等。\n\n//lzn：喂！你这是透题行为，是要上法庭的！\n\n//absi2011:样例输出里的\"//\"及以后字符只是注解,并不要你输出\n\n/\\*\nabsi2011:输入规范好不和谐啊...\n\n我只是来补充一下...\n\n如果 $x$ 或者常数项的系数是 $0$ 整个省略掉。\n\n哦,$x$ 的系数是 $-1$ 的话 也会把 $1$ 省去...\n\n保证输入的那玩意儿可以分解....而且分解出来都是整数...\n\n\\*/\n\n// 原作: 2022.7.24 没想到初中时候贡的题已经~~坑害了~~这么多人ac了.  现在已经大二，时过境迁，已经完全不会了哈哈哈", "inputFormat": "一个多项式，要求前面已述。各个系数 $\\leq\\text{maxlongint}$。", "outputFormat": "几个乘积。答案也符合日常写法。为了方便老师批改，若将答案表示成 $(x+a)(x+b)$，则 $a>b$。\n\n什么是日常写法？\n\n1. $(x+0)$写成 $x$。\n\n2. $(x+a)(x+a)$ 写成 $(x+a)^2$。\n\n3. 有时候可以这样写：$(x-3)$。但是不能出现类似于 $(x+-3)$ 这样的写法。", "hint": "$x$ 次数不高于 $2$ 次，项数不高于 $3$ 项，降幂排列。", "locale": "zh-CN", "translations": {"en": {"title": "Factorization II", "background": "", "description": "Xiaoyu has entered junior high and started learning factorization. However, she just cannot solve the problems, so she asks you for help.\n\nShe shows you her homework, which is about factorization. Since she has just started, the difficulty is lowered.\n\nWe assume the algebra in the homework uses only one variable $ x $. The highest degree is $ 2 $, and the leading coefficient is $ 1 $. When the coefficient in front of $ x $ is $ 1 $, the $ 1 $ is omitted. In short, the homework follows our usual writing style.\n\nLet’s help her solve this “simple” problem! Although it sounds easy, programming needs to consider many cases!\n\nIt is guaranteed that all numbers in the answer are integers.\n\n// What does this have to do with the “artifact”? God says, help others, accumulate good deeds, and the artifact will naturally appear. Hahaha, what a far-fetched explanation.\n\n// To help AC this problem in the May monthly contest, kkksc03 secretly provides the following gentle reminder:\n\n// The testdata may be tricky. Please consider various cases, including the case with only one input term, and whether intermediate results might overflow maxlongint, etc.\n\n// lzn: Hey! This is leaking the problem. You will go to court for this!\n\n// absi2011: The “//” and the characters after it in the sample output are just comments and should not be printed by your program.\n\n/*\nabsi2011: The input spec is not very harmonious...\n\nI just want to add...\n\nIf the coefficient of $ x $ or the constant term is $ 0 $, omit the entire term.\n\nOh, if the coefficient of $ x $ is $ -1 $, the $ 1 $ will also be omitted...\n\nWe guarantee the input can be factored, and the factorization has integer coefficients...\n*/\n\n// Original: 2022.7.24. I didn’t expect that the problem I posted in middle school has “trapped” so many people into AC-ing it. Now I’m a sophomore in college. Time flies, and I have completely forgotten how to do it, haha.", "inputFormat": "A single polynomial, as described above. Each coefficient is an integer not greater than maxlongint.", "outputFormat": "Output the product of factors. The answer should also follow the usual writing style. For easier grading, if the answer is written as $(x+a)(x+b)$, then $ a > b $.\n\nWhat is the usual writing style?\n\n1. $(x+0)$ is written as $ x $.\n2. $(x+a)(x+a)$ is written as $(x+a)^2$.\n3. Sometimes you can write $(x-3)$, but you must not write something like $(x+-3)$.", "hint": "The degree of $ x $ does not exceed $ 2 $, the number of terms does not exceed $ 3 $, and terms are in descending powers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "因式分解II", "background": null, "description": "小玉上了初中，开始学因式分解。可是她怎么都解不出来。所以她求你帮忙。\n\n她给你看了她的作业，就是因式分解。由于刚开始学，就降低了难度。\n\n我们假设作业里面的代数只有一个 $x$。最高指数是 $2$，且最高指数的系数是 $1$。当 $x$ 前的系数是 $1$ 时，$1$ 省去……（反正作业题目符合我们的日常写法）\n\n我们帮她解决下这个“简单”的问题吧！虽然听起来挺容易，但是编程需要考虑很多情况呢！\n\n保证作业答案的数字都是整数。\n\n\n// 这跟神器有什么关系么？神说，帮助他人，积累善行，神器自然出现。哈哈哈哈好牵强的解释~\n\n//为了帮助在5月月赛ac这道题目，kkksc03偷偷地进行以下的温馨提示：\n\n//数据可能会比较刁钻，请考虑到各种情况，包括只有输入一项的情况、中间过程会不会超maxlongint的情况等。\n\n//lzn：喂！你这是透题行为，是要上法庭的！\n\n//absi2011:样例输出里的\"//\"及以后字符只是注解,并不要你输出\n\n/\\*\nabsi2011:输入规范好不和谐啊...\n\n我只是来补充一下...\n\n如果 $x$ 或者常数项的系数是 $0$ 整个省略掉。\n\n哦,$x$ 的系数是 $-1$ 的话 也会把 $1$ 省去...\n\n保证输入的那玩意儿可以分解....而且分解出来都是整数...\n\n\\*/\n\n// 原作: 2022.7.24 没想到初中时候贡的题已经~~坑害了~~这么多人ac了.  现在已经大二，时过境迁，已经完全不会了哈哈哈", "inputFormat": "一个多项式，要求前面已述。各个系数 $\\leq\\text{maxlongint}$。", "outputFormat": "几个乘积。答案也符合日常写法。为了方便老师批改，若将答案表示成 $(x+a)(x+b)$，则 $a>b$。\n\n什么是日常写法？\n\n1. $(x+0)$写成 $x$。\n\n2. $(x+a)(x+a)$ 写成 $(x+a)^2$。\n\n3. 有时候可以这样写：$(x-3)$。但是不能出现类似于 $(x+-3)$ 这样的写法。", "hint": "$x$ 次数不高于 $2$ 次，项数不高于 $3$ 项，降幂排列。", "locale": "zh-CN"}}}
{"pid": "P2379", "type": "P", "difficulty": 5, "samples": [["(a+b)*(a+b+c)", "a^2+2ab+ac+b^2+bc"], ["(a+b)*(a+b+c)", "a^2+2ab+ac+b^2+bc"], ["(2a+b)*(2a-b)", "4a^2-b^2"], ["(a+b)*(a+b)*(a+b)", "a^3+3a^2b+3ab^2+b^3"], ["f*(a+b+d+z)+f^2", "af+bf+df+fz+f^2"], ["(a+b+2c)*(a+b-2c)-(a+b)*(a+b)", "-4c^2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "数学", "洛谷原创"], "title": "整式的计算【数据有误】", "background": "小明上了初中，整式计算总是出错，所以他找到了爱编程的你，让你设计一个程序帮帮他。\n", "description": "输入几个单项式或多项式，计算结果。\n", "inputFormat": "包括+，-,\\*,字母(只包括a到z26个小写字母)单项式两边没有括号，多项式两边有( )或[ ]，保证在每一个因式中，单项式在多项式前面。（长度不超过255）\n", "outputFormat": "输出这个表达式的结果，每个因式按字典序排列。\n", "hint": "水题一道。\n", "locale": "zh-CN", "translations": {"en": {"title": "Polynomial Calculation [Incorrect testdata]", "background": "Xiao Ming has started middle school. He keeps making mistakes in polynomial calculations, so he turned to you, a programming enthusiast, to design a program to help him.", "description": "Input several monomials or polynomials and compute the result.", "inputFormat": "The expression includes +, -, \\*, and letters (only the 26 lowercase letters a to z). A monomial has no surrounding brackets; a polynomial is enclosed in ( ) or [ ]. It is guaranteed that, within each multiplicative factor, monomials come before polynomials. The length does not exceed 255.", "outputFormat": "Output the result of the expression, with each factor arranged in lexicographic order.", "hint": "A simple problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "整式的计算【数据有误】", "background": "小明上了初中，整式计算总是出错，所以他找到了爱编程的你，让你设计一个程序帮帮他。\n", "description": "输入几个单项式或多项式，计算结果。\n", "inputFormat": "包括+，-,\\*,字母(只包括a到z26个小写字母)单项式两边没有括号，多项式两边有( )或[ ]，保证在每一个因式中，单项式在多项式前面。（长度不超过255）\n", "outputFormat": "输出这个表达式的结果，每个因式按字典序排列。\n", "hint": "水题一道。\n", "locale": "zh-CN"}}}
{"pid": "P2380", "type": "P", "difficulty": 4, "samples": [["4 4\n0 0 10 9 \n1 3 10 0\n4 2 1 3 \n1 1 20 0 \n10 0 0 0 \n1 1 1 30 \n0 0 5 5 \n5 10 10 10 \n0 0", "98"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "狗哥采矿", "background": "又是一节平静的语文课。\n\n狗哥闲来无事，出来了这么一道题。\n", "description": "一个 $n\\times m$ 的矩阵中，每个格子内有两种矿 yeyenum 和 bloggium，并且知道它们在每个格子内的数量是多少。最北边有 bloggium 的收集站，最西边有 yeyenum 的收集站。现在要你在这些格子上面安装向北或者向西的传送带（每个格子只能装一种）。问最多能采到多少矿？\n\n", "inputFormat": "第一行包含两个整数 $n,m,\\ ( 1 ≤ n ≤ 500, 1 ≤ m ≤ 500)$。接下来 $n$ 行 $m$ 列，表示每个格子中可以传送到 yeyenum 的数量（小于 $1000$），再接下来 $n$ 行 $m$ 列，表示每个格子中可以传送到 bloggium 的数量。$n, m$ 同时为 $0$ 时结束。\n", "outputFormat": "每组测试数据仅输出一个数，表示最多能采到的矿。\n", "hint": "传输过程中不能转弯，只能走直路。\n", "locale": "zh-CN", "translations": {"en": {"title": "Gou-ge's Mining", "background": "It is another calm Chinese class. Gou-ge (pinyin) was bored and came up with this problem.", "description": "In an $n\\times m$ grid, each cell contains two types of minerals: yeyenum and bloggium, and the amount of each in every cell is known. There is a collection station for bloggium at the northern edge, and a collection station for yeyenum at the western edge. You must install a conveyor belt in each cell that points either north or west (each cell can have only one direction). What is the maximum total amount of minerals that can be collected?", "inputFormat": "The first line contains two integers $n,m,\\ ( 1 ≤ n ≤ 500, 1 ≤ m ≤ 500)$. Then follow $n$ lines and $m$ columns giving, for each cell, the amount that can be transported as yeyenum (each value is less than $1000$). After that, another $n$ lines and $m$ columns follow, giving the amount that can be transported as bloggium for each cell. The input ends when $n, m$ are both $0$.", "outputFormat": "For each test case, output a single integer: the maximum total amount of minerals that can be collected.", "hint": "During transportation, turning is not allowed; items can only travel in a straight line.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "狗哥采矿", "background": "又是一节平静的语文课。\n\n狗哥闲来无事，出来了这么一道题。\n", "description": "一个 $n\\times m$ 的矩阵中，每个格子内有两种矿 yeyenum 和 bloggium，并且知道它们在每个格子内的数量是多少。最北边有 bloggium 的收集站，最西边有 yeyenum 的收集站。现在要你在这些格子上面安装向北或者向西的传送带（每个格子只能装一种）。问最多能采到多少矿？\n\n", "inputFormat": "第一行包含两个整数 $n,m,\\ ( 1 ≤ n ≤ 500, 1 ≤ m ≤ 500)$。接下来 $n$ 行 $m$ 列，表示每个格子中可以传送到 yeyenum 的数量（小于 $1000$），再接下来 $n$ 行 $m$ 列，表示每个格子中可以传送到 bloggium 的数量。$n, m$ 同时为 $0$ 时结束。\n", "outputFormat": "每组测试数据仅输出一个数，表示最多能采到的矿。\n", "hint": "传输过程中不能转弯，只能走直路。\n", "locale": "zh-CN"}}}
{"pid": "P2381", "type": "P", "difficulty": 3, "samples": [["5\n1\n2\n3\n4\n5\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "双指针 two-pointer"], "title": "圆圆舞蹈", "background": "", "description": "熊大妈的奶牛在时针的带领下，围成了一个圆圈，由于没有严格的教育，奶牛们之间的间隔不一致。\n\n奶牛想知道两只最远的奶牛到底隔了多远。奶牛 $A$ 到 $B$ 的距离为 $A$ 顺时针走和逆时针走，到达 $B$ 的较短路程。告诉你相邻两个奶牛间的距离，请你求出两只最远的奶牛到底隔了多远。\n", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 只奶牛，$2\\le N\\le 10^5$。\n\n接下 $2\\sim N+1$ 行，第 $i$ 行有一个数，表示第 $i-1$ 头奶牛顺时针到第 $i$ 头奶牛的距离 $d_i$，$1\\le d_i\\le 2^{31}-1$，所有距离之和 $\\le 2^{31}-1$。\n\n第 $N+1$ 行的数表示第 $N$ 头奶牛顺时针到第 $1$ 头奶牛的距离。\n", "outputFormat": "一行，表示最大距离。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Circular Dance", "background": "", "description": "Grandma Xiong’s cows have formed a circle in clockwise order. Because they lack strict training, the gaps between adjacent cows are unequal.\n\nThe cows want to know how far apart the farthest pair of cows are. The distance from cow $A$ to cow $B$ is defined as the shorter of the clockwise path and the counterclockwise path from $A$ to $B$. Given the distances between adjacent cows, please compute the maximum distance between any two cows.", "inputFormat": "The first line contains an integer $N$, the number of cows, $2\\le N\\le 10^5$.\n\nThe next $N$ lines each contain one integer. For $i=2,\\ldots,N$, line $i$ contains $d_i$, the clockwise distance from cow $i-1$ to cow $i$, where $1\\le d_i\\le 2^{31}-1$, and the sum of all distances is $\\le 2^{31}-1$.\n\nLine $N+1$ contains the clockwise distance from cow $N$ to cow $1$.", "outputFormat": "Output one line containing the maximum distance.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "圆圆舞蹈", "background": "", "description": "熊大妈的奶牛在时针的带领下，围成了一个圆圈，由于没有严格的教育，奶牛们之间的间隔不一致。\n\n奶牛想知道两只最远的奶牛到底隔了多远。奶牛 $A$ 到 $B$ 的距离为 $A$ 顺时针走和逆时针走，到达 $B$ 的较短路程。告诉你相邻两个奶牛间的距离，请你求出两只最远的奶牛到底隔了多远。\n", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 只奶牛，$2\\le N\\le 10^5$。\n\n接下 $2\\sim N+1$ 行，第 $i$ 行有一个数，表示第 $i-1$ 头奶牛顺时针到第 $i$ 头奶牛的距离 $d_i$，$1\\le d_i\\le 2^{31}-1$，所有距离之和 $\\le 2^{31}-1$。\n\n第 $N+1$ 行的数表示第 $N$ 头奶牛顺时针到第 $1$ 头奶牛的距离。\n", "outputFormat": "一行，表示最大距离。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2382", "type": "P", "difficulty": 5, "samples": [["H 1\nHe 4\nC 12\nO 16\nF 19\nNe 20\nCu 64\nCc 333\nEND_OF_FIRST_PART\nH2C\n(MgF)2As\nCu(OH)2\nH((CO)2F)99\n0\n", "14\nUNKNOWN\n98\n7426\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "化学分子式", "background": "元首和元老正在共同努力学习化学，他们想让电脑帮助他模拟分子式减轻负担。请你帮他设计一个程序。\n", "description": "你的任务是编写一个能处理在虚拟的化学里分子式的程序，在真正的化学里，每个分子式描述分子包括一个或者多个原子，但是，它可能没有真正的化学药品。\n\n下面是原子符号和分子式的定义：\n\n分子中一个原子由一个原子符号表示，原子符号由单个大写字母或者一个大写字母和一个小写字母组成。例如：H和He都是原子符号。\n\n一个分子式是一个原子符号的非空序列，例如，HHHeHHHe是一个分子式，表示一个分子包括4个H和2个He。\n\n为了方便起见，一段相同的式子，如x….x(n个X，2<=n<=99)，可以被缩写为（X）n。如果X是一个原子符号，那么括号可以省略。例如，HHHeHHHe也可以写作H2HeH2He,(HHHe)2,(H2He)2,((H)2He)2。\n\n分子式的定义可以用一种规范的语言描述。简而言之，分子式的语法描述如下：\n\n分子：原子|原子数量|（分子）数字|分子 分子  \n原子：大写字母|大写字母 小写字母  \n\n数字：2|3|4|5|……|99|  \n大写字母：A|B|……|Z|  \n小写字母：a|b|c|……|z|  \n\n在我们这个虚拟的化学里的每一个原子都有自己的原子质量，给你原子的质量，你的程序必须输出一个用分子式表示的分子质量。分子的质量定义为所有包括的原子的质量之和。例如，假设H和He的原子质量为1和4，那么（H2He）2的分子量为12。\n", "inputFormat": "输入格式：\n\n输入由两部分组成。第一部分是原子表，由一些行组成，每行包括一个原子符号、一个或者多个空格，以及该原子的原子质量（<=1000）。没有两行包含相同的原子符号。\n\n第一部分最后仅包括一行字符串“END\\_OF\\_FIRST\\_PART”。\n\n第二部分是一些行的序列。每行是一个分子式，不多于80个字符，而且不包括空格。一个分子最多包括10^5个原子，一些分子中的原子可能没有在原子表中出现。\n\n最后一行仅一个零，表示输入结束。\n", "outputFormat": "输出格式：\n\n输出时一些行的序列，和输入文件的第二部分行数相同。如果分子中的每一个原子都在原子表中出现，输出一个整数，并表示分子质量。否者输出UNKNOWN。不要输出多余的字符。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Molecular Formula", "background": "Yuanshou (Yuánshǒu) and Yuanlao (Yuánlǎo) are working hard to learn chemistry, and they want the computer to help them simulate molecular formulas to reduce their workload. Please help them by designing a program.", "description": "Your task is to write a program that can process molecular formulas in a virtual chemistry setting. In real chemistry, each molecular formula describes a molecule consisting of one or more atoms, but it may not correspond to a real chemical substance.\n\nBelow are the definitions of atomic symbols and molecular formulas:\n\n- An atom in a molecule is represented by an atomic symbol. An atomic symbol consists of a single uppercase letter, or an uppercase letter followed by a lowercase letter. For example: H and He are both atomic symbols.\n\n- A molecular formula is a non-empty sequence of atomic symbols. For example, HHHeHHHe is a molecular formula that represents a molecule containing 4 H and 2 He.\n\n- For convenience, a consecutive repetition of the same expression, such as x...x (that is, $n$ copies of $X$, where $2 \\le n \\le 99$), can be abbreviated as (X)$n$. If $X$ is a single atomic symbol, the parentheses can be omitted. For example, HHHeHHHe can also be written as H2HeH2He, (HHHe)2, (H2He)2, or ((H)2He)2.\n\nThe definition of a molecular formula can be described using a formal grammar. In short, the syntax is as follows:\n\nMolecule: Atom | Atom Number | (Molecule) Number | Molecule Molecule\nAtom: Uppercase | Uppercase Lowercase\nNumber: 2 | 3 | 4 | 5 | … | 99\nUppercase: A | B | … | Z\nLowercase: a | b | c | … | z\n\nIn this virtual chemistry world, every atom has its atomic mass. Given the atomic masses, your program must output the molecular mass of a molecule represented by its formula. The mass of a molecule is defined as the sum of the masses of all atoms it contains. For example, if the atomic masses of H and He are 1 and 4, then the molecular mass of (H2He)2 is 12.", "inputFormat": "The input consists of two parts.\n\nThe first part is an atom table, consisting of several lines. Each line contains an atomic symbol, one or more spaces, and the atomic mass of that atom ($\\le 1000$). No two lines contain the same atomic symbol.\n\nThe last line of the first part contains only the string \"END_OF_FIRST_PART\".\n\nThe second part is a sequence of lines. Each line is a molecular formula, with no more than 80 characters and no spaces. A molecule contains at most $10^5$ atoms. Some molecules may contain atoms that do not appear in the atom table.\n\nThe last line contains a single zero, indicating the end of input.", "outputFormat": "Output a sequence of lines, with the same number of lines as the second part of the input. If every atom in the molecule appears in the atom table, output an integer representing the molecular mass. Otherwise, output UNKNOWN. Do not output extra characters.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "化学分子式", "background": "元首和元老正在共同努力学习化学，他们想让电脑帮助他模拟分子式减轻负担。请你帮他设计一个程序。\n", "description": "你的任务是编写一个能处理在虚拟的化学里分子式的程序，在真正的化学里，每个分子式描述分子包括一个或者多个原子，但是，它可能没有真正的化学药品。\n\n下面是原子符号和分子式的定义：\n\n分子中一个原子由一个原子符号表示，原子符号由单个大写字母或者一个大写字母和一个小写字母组成。例如：H和He都是原子符号。\n\n一个分子式是一个原子符号的非空序列，例如，HHHeHHHe是一个分子式，表示一个分子包括4个H和2个He。\n\n为了方便起见，一段相同的式子，如x….x(n个X，2<=n<=99)，可以被缩写为（X）n。如果X是一个原子符号，那么括号可以省略。例如，HHHeHHHe也可以写作H2HeH2He,(HHHe)2,(H2He)2,((H)2He)2。\n\n分子式的定义可以用一种规范的语言描述。简而言之，分子式的语法描述如下：\n\n分子：原子|原子数量|（分子）数字|分子 分子  \n原子：大写字母|大写字母 小写字母  \n\n数字：2|3|4|5|……|99|  \n大写字母：A|B|……|Z|  \n小写字母：a|b|c|……|z|  \n\n在我们这个虚拟的化学里的每一个原子都有自己的原子质量，给你原子的质量，你的程序必须输出一个用分子式表示的分子质量。分子的质量定义为所有包括的原子的质量之和。例如，假设H和He的原子质量为1和4，那么（H2He）2的分子量为12。\n", "inputFormat": "输入格式：\n\n输入由两部分组成。第一部分是原子表，由一些行组成，每行包括一个原子符号、一个或者多个空格，以及该原子的原子质量（<=1000）。没有两行包含相同的原子符号。\n\n第一部分最后仅包括一行字符串“END\\_OF\\_FIRST\\_PART”。\n\n第二部分是一些行的序列。每行是一个分子式，不多于80个字符，而且不包括空格。一个分子最多包括10^5个原子，一些分子中的原子可能没有在原子表中出现。\n\n最后一行仅一个零，表示输入结束。\n", "outputFormat": "输出格式：\n\n输出时一些行的序列，和输入文件的第二部分行数相同。如果分子中的每一个原子都在原子表中出现，输出一个整数，并表示分子质量。否者输出UNKNOWN。不要输出多余的字符。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2383", "type": "P", "difficulty": 3, "samples": [["3\n4 1 1 1 1 \n5 10 20 30 40 50 \n8 1 7 2 6 4 4 3 5", "yes\nno\nyes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "剪枝"], "title": "狗哥玩木棒", "background": "狗哥又趁着语文课干些无聊的事了...\n", "description": "现给出一些木棒长度，那么狗哥能否用给出的木棒(木棒全用完)组成一个正方形呢？\n", "inputFormat": "输入文件中的第一行是一个整数 $n(1\\le n\\le 10)$ 表示测试的组数，接下来 $n$ 行表示每组的测试数据。 每行的第一个数为 $m(4\\leq m\\leq 20)$,接下来 $m$ 个数 $a_i(1\\leq a_i\\le 2000)$ 表示木棒的长度。\n", "outputFormat": "对于每组测试数据，如果可以组成正方形输出“yes”，否则输出“no”。\n", "hint": "狗哥快抓狂了\n", "locale": "zh-CN", "translations": {"en": {"title": "Gou-ge Plays with Sticks", "background": "Gou-ge is once again doing something boring during Chinese class...", "description": "Given some stick lengths, can Gou-ge use all the given sticks (all sticks must be used) to form a square?", "inputFormat": "The first line of the input file is an integer $n(1\\le n\\le 10)$ indicating the number of test groups. The following $n$ lines describe each group's testdata. In each line, the first number is $m(4\\leq m\\leq 20)$, followed by $m$ numbers $a_i(1\\leq a_i\\le 2000)$ representing the lengths of the sticks.", "outputFormat": "For each group's testdata, output \"yes\" if it is possible to form a square, otherwise output \"no\".", "hint": "Gou-ge is about to go crazy.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "狗哥玩木棒", "background": "狗哥又趁着语文课干些无聊的事了...\n", "description": "现给出一些木棒长度，那么狗哥能否用给出的木棒(木棒全用完)组成一个正方形呢？\n", "inputFormat": "输入文件中的第一行是一个整数 $n(1\\le n\\le 10)$ 表示测试的组数，接下来 $n$ 行表示每组的测试数据。 每行的第一个数为 $m(4\\leq m\\leq 20)$,接下来 $m$ 个数 $a_i(1\\leq a_i\\le 2000)$ 表示木棒的长度。\n", "outputFormat": "对于每组测试数据，如果可以组成正方形输出“yes”，否则输出“no”。\n", "hint": "狗哥快抓狂了\n", "locale": "zh-CN"}}}
{"pid": "P2385", "type": "P", "difficulty": 3, "samples": [["4 5 1 2\n1 0 1 0 1\n3 0 2 0 4\n0 1 2 0 0\n0 0 0 1 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO"], "title": "[USACO07FEB] Bronze Lilypad Pond B", "background": "", "description": "为了让奶牛们娱乐和锻炼，农夫约翰建造了一个美丽的池塘。这个长方形的池子被分成了 M 行 N 列个方格（1 ≤ M, N ≤ 30） 。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。\n\n贝西正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。\n\n贝西的舞步很像象棋中的马步：每次总是先横向移动 M1 (1 ≤ M1 ≤ 30)格，再纵向移动 M2 (1 ≤ M2 ≤ 30, M1≠M2)格，或先纵向移动 M1 格，再横向移动 M2 格。最多时，贝西会有八个移动方向可供选择。\n\n给定池塘的布局和贝西的跳跃长度，请计算贝西从起点出发，到达目的地的最小步数，我们保证输入数据中的目的地一定是可达的。\n", "inputFormat": "第一行：四个用空格分开的整数：M，N，M1 和 M2\n\n第二行到 M + 1 行：第 i + 1 行有 N 个用空格分开的整数，描述了池塘第\n\ni 行的状态：0 为水，1 为莲花，2 为岩石，3 为贝西所在的起点，4 为贝西想去\n\n的终点。\n", "outputFormat": "第一行：从起点到终点的最少步数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07FEB] Bronze Lilypad Pond B", "background": "", "description": "To entertain and exercise the cows, Farmer John built a beautiful pond. This rectangular pond is divided into $M$ rows and $N$ columns ($1 \\le M, N \\le 30$). Some cells are surprisingly sturdy lilypads, some are rocks, and the rest are beautiful, pure, deep-blue water.\n\nBessie is practicing ballet. She stands on a lilypad and wants to jump to another lilypad. She can only jump from a lilypad to another lilypad; she cannot jump onto water or rocks.\n\nBessie’s steps are like a knight’s moves in chess: each time she either moves horizontally $M_1$ squares ($1 \\le M_1 \\le 30$) and then vertically $M_2$ squares ($1 \\le M_2 \\le 30$, $M_1 \\ne M_2$), or vertically $M_1$ squares and then horizontally $M_2$ squares. At most, Bessie has eight possible movement directions.\n\nGiven the pond layout and Bessie’s jump lengths, compute the minimum number of jumps needed for Bessie to go from the start to the destination. It is guaranteed that the destination in the input is reachable.", "inputFormat": "The first line contains four space-separated integers: $M$, $N$, $M_1$, and $M_2$.\n\nThe second line through line $M+1$: for each $i$ from $1$ to $M$, line $i+1$ contains $N$ space-separated integers describing row $i$ of the pond: $0$ for water, $1$ for lilypad, $2$ for rock, $3$ for Bessie’s starting cell, and $4$ for Bessie’s destination.", "outputFormat": "The first line contains the minimum number of moves from the start to the destination.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO07FEB] Bronze Lilypad Pond B", "background": "", "description": "为了让奶牛们娱乐和锻炼，农夫约翰建造了一个美丽的池塘。这个长方形的池子被分成了 M 行 N 列个方格（1 ≤ M, N ≤ 30） 。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。\n\n贝西正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。\n\n贝西的舞步很像象棋中的马步：每次总是先横向移动 M1 (1 ≤ M1 ≤ 30)格，再纵向移动 M2 (1 ≤ M2 ≤ 30, M1≠M2)格，或先纵向移动 M1 格，再横向移动 M2 格。最多时，贝西会有八个移动方向可供选择。\n\n给定池塘的布局和贝西的跳跃长度，请计算贝西从起点出发，到达目的地的最小步数，我们保证输入数据中的目的地一定是可达的。\n", "inputFormat": "第一行：四个用空格分开的整数：M，N，M1 和 M2\n\n第二行到 M + 1 行：第 i + 1 行有 N 个用空格分开的整数，描述了池塘第\n\ni 行的状态：0 为水，1 为莲花，2 为岩石，3 为贝西所在的起点，4 为贝西想去\n\n的终点。\n", "outputFormat": "第一行：从起点到终点的最少步数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2386", "type": "P", "difficulty": 2, "samples": [["1\n7 3", "8"], ["3\n3 2\n4 3\n2 7\n", "2\n4\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "递归"], "title": "放苹果", "background": "", "description": "把 $m$ 个同样的苹果放在 $n$ 个同样的盘子里，允许有的盘子空着不放，问共有多少种不同的分法。（$5,1,1$ 和 $1,1,5$ 是同一种方法）\n", "inputFormat": "第一行是测试数据的数目 $t$，以下每行均包括二个整数 $m$ 和 $n$，以空格分开。", "outputFormat": "对输入的每组数据 $m$ 和 $n$，用一行输出相应的结果。\n", "hint": "对于所有数据，保证：$1\\leq m,n\\leq 10$，$0 \\leq t \\leq 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Placing Apples", "background": "", "description": "Place $m$ identical apples into $n$ identical plates. Empty plates are allowed. How many different distributions are there? ($5,1,1$ and $1,1,5$ are considered the same way.)", "inputFormat": "The first line contains the number of testdata $t$. Each of the following lines contains two integers $m$ and $n$, separated by a space.", "outputFormat": "For each pair $m$ and $n$ in the input, output the corresponding result on a single line.", "hint": "For all testdata, it is guaranteed that $1 \\leq m, n \\leq 10$, $0 \\leq t \\leq 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "放苹果", "background": "", "description": "把 $m$ 个同样的苹果放在 $n$ 个同样的盘子里，允许有的盘子空着不放，问共有多少种不同的分法。（$5,1,1$ 和 $1,1,5$ 是同一种方法）\n", "inputFormat": "第一行是测试数据的数目 $t$，以下每行均包括二个整数 $m$ 和 $n$，以空格分开。", "outputFormat": "对输入的每组数据 $m$ 和 $n$，用一行输出相应的结果。\n", "hint": "对于所有数据，保证：$1\\leq m,n\\leq 10$，$0 \\leq t \\leq 20$。", "locale": "zh-CN"}}}
{"pid": "P2387", "type": "P", "difficulty": 6, "samples": [["4 5 \n1 2 19 1 \n2 3 8 12 \n2 4 12 15 \n1 3 17 8 \n3 4 1 17 ", "32\n"], ["3 1 \n1 2 1 1 ", "-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "NOI", "生成树", "动态树 LCT"], "title": "[NOI2014] 魔法森林", "background": "[hack数据的提交link](https://www.luogu.com.cn/problem/U163126)", "description": "为了得到书法大家的真传，小 E 同学下定决心去拜访住在魔法森林中的隐士。魔法森林可以被看成一个包含 $n$ 个节点 $m$ 条边的无向图，节点标号为 $1,2,3,…,n$，边标号为 $1,2,3,…,m$。初始时小 E 同学在 $1$ 号节点，隐士则住在 $n$ 号节点。小 E 需要通过这一片魔法森林，才能够拜访到隐士。\n\n魔法森林中居住了一些妖怪。每当有人经过一条边的时候，这条边上的妖怪 就会对其发起攻击。幸运的是，在 $1$ 号节点住着两种守护精灵：A 型守护精灵与 B 型守护精灵。小 E 可以借助它们的力量，达到自己的目的。\n\n只要小 E 带上足够多的守护精灵，妖怪们就不会发起攻击了。具体来说，无向图中的每一条边 $e_i$ 包含两个权值 $a_i$ 与 $b_i$ 。若身上携带的 A 型守护精灵个数不少于 $a_i$ ，且 B 型守护精灵个数不少于 $b_i$ ，这条边上的妖怪就不会对通过这条边的人发起攻击。当且仅当通过这片魔法森林的过程中没有任意一条边的妖怪向 小 E 发起攻击，他才能成功找到隐士。\n\n由于携带守护精灵是一件非常麻烦的事，小 E 想要知道，要能够成功拜访到 隐士，最少需要携带守护精灵的总个数。守护精灵的总个数为 A 型守护精灵的个数与 B 型守护精灵的个数之和。\n", "inputFormat": "输入文件的第 $1$ 行包含两个整数 $n,m$，表示无向图共有 $n$ 个节点，$m$ 条边。 接下来 $m$ 行，第 $i+1$ 行包含 $4$ 个正整数 $X_i,Y_i,a_i,b_i$，描述第 $i$ 条无向边。 其中 $X_i$ 与 $Y_i$ 为该边两个端点的标号，$a_i$ 与 $b_i$ 的含义如题所述。 注意数据中可能包含重边与自环。\n", "outputFormat": "输出一行一个整数：如果小 E 可以成功拜访到隐士，输出小 E 最少需要携 带的守护精灵的总个数；如果无论如何小 E 都无法拜访到隐士，输出 `-1`。\n", "hint": "\\* 解释1\n\n如果小 E 走路径 $1\\to 2\\to 4$，需要携带 $19+15=34$ 个守护精灵； 如果小 E 走路径 $1\\to 3\\to 4$，需要携带 $17+17=34$ 个守护精灵； 如果小 E 走路径 $1\\to 2\\to 3\\to 4$，需要携带 $19+17=36$ 个守护精灵； 如果小 E 走路径  $1\\to 3\\to 2\\to 4$，需要携带 $17+15=32$ 个守护精灵。 综上所述，小 E 最少需要携带 $32$ 个守护精灵。\n\n\\* 解释2\n\n小 E 无法从 $1$ 号节点到达 $3$ 号节点，故输出 `-1`。\n\n![](https://cdn.luogu.com.cn/upload/pic/2593.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Magic Forest", "background": "[hack testdata submission link](https://www.luogu.com.cn/problem/U163126).", "description": "To receive the true teachings of a calligraphy master, Xiao E has decided to visit a hermit who lives in the Magic Forest. The Magic Forest can be regarded as an undirected graph with $n$ nodes and $m$ edges. The nodes are labeled $1, 2, 3, \\dots, n$, and the edges are labeled $1, 2, 3, \\dots, m$. Initially, Xiao E is at node $1$, and the hermit lives at node $n$. Xiao E needs to pass through this Magic Forest to visit the hermit.\n\nThere are some monsters living in the Magic Forest. Whenever someone passes an edge, the monsters on that edge will launch an attack. Fortunately, two kinds of guardian spirits live at node $1$: A-type guardian spirits and B-type guardian spirits. Xiao E can rely on their power to achieve his goal.\n\nAs long as Xiao E brings enough guardian spirits, the monsters will not attack. Specifically, each edge $e_i$ in the undirected graph has two weights $a_i$ and $b_i$. If the number of A-type guardian spirits carried is at least $a_i$, and the number of B-type guardian spirits carried is at least $b_i$, then the monsters on this edge will not attack people who pass through this edge. Xiao E can successfully find the hermit if and only if, during the traversal of the Magic Forest, the monsters on no edge launch an attack on him.\n\nSince carrying guardian spirits is very troublesome, Xiao E wants to know the minimum total number of guardian spirits required to successfully visit the hermit. The total number of guardian spirits is the sum of the number of A-type guardian spirits and B-type guardian spirits.", "inputFormat": "The first line of the input file contains two integers $n, m$, indicating that the undirected graph has $n$ nodes and $m$ edges. The next $m$ lines, where the $(i+1)$-th line contains $4$ positive integers $X_i, Y_i, a_i, b_i$, describe the $i$-th undirected edge. Here, $X_i$ and $Y_i$ are the labels of the two endpoints of the edge, and $a_i$ and $b_i$ have the meanings described above. Note that the testdata may contain multiple edges and self-loops.", "outputFormat": "Output one line with one integer: if Xiao E can successfully visit the hermit, output the minimum total number of guardian spirits Xiao E needs to carry; if Xiao E cannot visit the hermit under any circumstances, output `-1`.", "hint": "* Explanation 1\n\nIf Xiao E takes the path $1\\to 2\\to 4$, he needs to carry $19+15=34$ guardian spirits; if Xiao E takes the path $1\\to 3\\to 4$, he needs to carry $17+17=34$ guardian spirits; if Xiao E takes the path $1\\to 2\\to 3\\to 4$, he needs to carry $19+17=36$ guardian spirits; if Xiao E takes the path $1\\to 3\\to 2\\to 4$, he needs to carry $17+15=32$ guardian spirits. In summary, Xiao E needs to carry at least $32$ guardian spirits.\n\n* Explanation 2\n\nXiao E cannot reach node $3$ from node $1$, so output `-1`.\n\n![](https://cdn.luogu.com.cn/upload/pic/2593.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 魔法森林", "background": "[hack数据的提交link](https://www.luogu.com.cn/problem/U163126)", "description": "为了得到书法大家的真传，小 E 同学下定决心去拜访住在魔法森林中的隐士。魔法森林可以被看成一个包含 $n$ 个节点 $m$ 条边的无向图，节点标号为 $1,2,3,…,n$，边标号为 $1,2,3,…,m$。初始时小 E 同学在 $1$ 号节点，隐士则住在 $n$ 号节点。小 E 需要通过这一片魔法森林，才能够拜访到隐士。\n\n魔法森林中居住了一些妖怪。每当有人经过一条边的时候，这条边上的妖怪 就会对其发起攻击。幸运的是，在 $1$ 号节点住着两种守护精灵：A 型守护精灵与 B 型守护精灵。小 E 可以借助它们的力量，达到自己的目的。\n\n只要小 E 带上足够多的守护精灵，妖怪们就不会发起攻击了。具体来说，无向图中的每一条边 $e_i$ 包含两个权值 $a_i$ 与 $b_i$ 。若身上携带的 A 型守护精灵个数不少于 $a_i$ ，且 B 型守护精灵个数不少于 $b_i$ ，这条边上的妖怪就不会对通过这条边的人发起攻击。当且仅当通过这片魔法森林的过程中没有任意一条边的妖怪向 小 E 发起攻击，他才能成功找到隐士。\n\n由于携带守护精灵是一件非常麻烦的事，小 E 想要知道，要能够成功拜访到 隐士，最少需要携带守护精灵的总个数。守护精灵的总个数为 A 型守护精灵的个数与 B 型守护精灵的个数之和。\n", "inputFormat": "输入文件的第 $1$ 行包含两个整数 $n,m$，表示无向图共有 $n$ 个节点，$m$ 条边。 接下来 $m$ 行，第 $i+1$ 行包含 $4$ 个正整数 $X_i,Y_i,a_i,b_i$，描述第 $i$ 条无向边。 其中 $X_i$ 与 $Y_i$ 为该边两个端点的标号，$a_i$ 与 $b_i$ 的含义如题所述。 注意数据中可能包含重边与自环。\n", "outputFormat": "输出一行一个整数：如果小 E 可以成功拜访到隐士，输出小 E 最少需要携 带的守护精灵的总个数；如果无论如何小 E 都无法拜访到隐士，输出 `-1`。\n", "hint": "\\* 解释1\n\n如果小 E 走路径 $1\\to 2\\to 4$，需要携带 $19+15=34$ 个守护精灵； 如果小 E 走路径 $1\\to 3\\to 4$，需要携带 $17+17=34$ 个守护精灵； 如果小 E 走路径 $1\\to 2\\to 3\\to 4$，需要携带 $19+17=36$ 个守护精灵； 如果小 E 走路径  $1\\to 3\\to 2\\to 4$，需要携带 $17+15=32$ 个守护精灵。 综上所述，小 E 最少需要携带 $32$ 个守护精灵。\n\n\\* 解释2\n\n小 E 无法从 $1$ 号节点到达 $3$ 号节点，故输出 `-1`。\n\n![](https://cdn.luogu.com.cn/upload/pic/2593.png)\n", "locale": "zh-CN"}}}
{"pid": "P2388", "type": "P", "difficulty": 3, "samples": [["10", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "阶乘之乘", "background": "不告诉你……\n", "description": "求出 $1!\\times 2!\\times 3!\\times 4!\\times \\cdots \\times n!$ 的末尾有几个零。\n", "inputFormat": "一行，一个整数 $n(n\\le 10^8)$。", "outputFormat": "输出答案，表示零的个数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Product of Factorials", "background": "Not telling you...", "description": "Find the number of trailing zeros in $1!\\times 2!\\times 3!\\times 4!\\times \\cdots \\times n!$.", "inputFormat": "One line, a single integer $n(n\\le 10^8)$.", "outputFormat": "Output the answer, the number of trailing zeros.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "阶乘之乘", "background": "不告诉你……\n", "description": "求出 $1!\\times 2!\\times 3!\\times 4!\\times \\cdots \\times n!$ 的末尾有几个零。\n", "inputFormat": "一行，一个整数 $n(n\\le 10^8)$。", "outputFormat": "输出答案，表示零的个数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2389", "type": "P", "difficulty": 3, "samples": [["5 3\n1 -1 1 -1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创", "前缀和"], "title": "电脑班的裁员", "background": "隔壁的新初一电脑班刚考过一场试，又到了 BlingBling 的裁员时间，老师把这项工作交给了 ZZY 来进行。而 ZZY 最近忙着刷题，就把这重要的任务交（tui）给了你。", "description": "ZZY 有独特的裁员技巧：每个同学都有一个考试得分 $a_i$（$-1000\\le a_i\\le 1000$），在 $n$ 个同学（$n\\le 500$）中选出不大于 $k$ 段（$k\\le n$）相邻的同学留下，裁掉未被选中的同学，使剩下同学的得分和最大。要特别注意的是，这次考试答错要扣分【不要问我为什么】，所以得分有可能为负。", "inputFormat": "第一行为 $n, k$，第二行为第 $1$ 到 $n$ 位同学的得分。", "outputFormat": "一个数 $s$，为最大得分和。", "hint": "2014 彭鲲志：“题目这么短一看就很水。”", "locale": "zh-CN", "translations": {"en": {"title": "Downsizing in the Computer Class", "background": "The neighboring new Grade 7 computer class just finished an exam, and it is BlingBling’s downsizing time again. The teacher assigned this task to ZZY, but since ZZY is busy solving problems, he passed this important task onto you.", "description": "ZZY has a unique downsizing method: each student has an exam score $a_i$ ($-1000 \\le a_i \\le 1000$). Among $n$ students ($n \\le 500$), choose no more than $k$ ($k \\le n$) contiguous segments of students to keep, and dismiss the unselected students, so that the sum of the remaining students’ scores is maximized. Note that wrong answers deduct points [don’t ask me why], so scores may be negative.", "inputFormat": "The first line contains $n, k$. The second line contains the scores of students $1$ to $n$.", "outputFormat": "A single number $s$, the maximum sum of scores.", "hint": "2014 Peng Kunzhi: \"The statement is so short — looks trivial at first glance.\"\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "电脑班的裁员", "background": "隔壁的新初一电脑班刚考过一场试，又到了 BlingBling 的裁员时间，老师把这项工作交给了 ZZY 来进行。而 ZZY 最近忙着刷题，就把这重要的任务交（tui）给了你。", "description": "ZZY 有独特的裁员技巧：每个同学都有一个考试得分 $a_i$（$-1000\\le a_i\\le 1000$），在 $n$ 个同学（$n\\le 500$）中选出不大于 $k$ 段（$k\\le n$）相邻的同学留下，裁掉未被选中的同学，使剩下同学的得分和最大。要特别注意的是，这次考试答错要扣分【不要问我为什么】，所以得分有可能为负。", "inputFormat": "第一行为 $n, k$，第二行为第 $1$ 到 $n$ 位同学的得分。", "outputFormat": "一个数 $s$，为最大得分和。", "hint": "2014 彭鲲志：“题目这么短一看就很水。”", "locale": "zh-CN"}}}
{"pid": "P2390", "type": "P", "difficulty": 3, "samples": [["25 14\n16\n8\n-7\n3\n10\n-15\n-17\n6\n-12\n14\n-13\n2\n9\n-5\n", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "二分", "洛谷原创"], "title": "地标访问", "background": "改编自 USACO2007Nov 铜组 Exploration\n", "description": "贝西在一条道路上旅行，道路上有许多地标，贝西想要在日落之前访问尽可能多的路标。贝西每分钟可以移动一单位距离。\n\n将道路视为一条数轴，贝西从原点出发，道路上有 $n(1 \\le n \\le 5\\times 10^4)$ 个地标，每个地标有一个坐标 $x_i(|x_i| \\le 10^5)$ 且地标的坐标各不相同，$t(1 \\le t \\le 10^9)$ 分钟之后将会日落。", "inputFormat": "第一行：两个整数 $t,n$。\n\n第二行至第 $n+1$ 行：地标的坐标 $x_i$。", "outputFormat": "一个整数，贝西能访问的最多的地标数\n", "hint": "1、贝西日落时不用回到原点。\n\n2、与原模拟水题不同。\n\n3、数据较原题有所修改\n", "locale": "zh-CN", "translations": {"en": {"title": "Visiting Landmarks", "background": "Adapted from USACO 2007 November Bronze \"Exploration\".", "description": "Bessie is traveling along a road with many landmarks and wants to visit as many landmarks as possible before sunset. Bessie can move one unit of distance per minute.\n\nTreat the road as a number line. Bessie starts at the origin. There are $n(1 \\le n \\le 5\\times 10^4)$ landmarks on the road, each with a distinct coordinate $x_i(|x_i| \\le 10^5)$. Sunset occurs after $t(1 \\le t \\le 10^9)$ minutes.", "inputFormat": "The first line: two integers $t,n$.\n\nThe second line to line $n+1$: the coordinates $x_i$.", "outputFormat": "A single integer: the maximum number of landmarks Bessie can visit.", "hint": "1. Bessie does not need to return to the origin at sunset.\n2. This differs from the original simple simulation problem.\n3. The testdata has been modified compared to the original problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地标访问", "background": "改编自 USACO2007Nov 铜组 Exploration\n", "description": "贝西在一条道路上旅行，道路上有许多地标，贝西想要在日落之前访问尽可能多的路标。贝西每分钟可以移动一单位距离。\n\n将道路视为一条数轴，贝西从原点出发，道路上有 $n(1 \\le n \\le 5\\times 10^4)$ 个地标，每个地标有一个坐标 $x_i(|x_i| \\le 10^5)$ 且地标的坐标各不相同，$t(1 \\le t \\le 10^9)$ 分钟之后将会日落。", "inputFormat": "第一行：两个整数 $t,n$。\n\n第二行至第 $n+1$ 行：地标的坐标 $x_i$。", "outputFormat": "一个整数，贝西能访问的最多的地标数\n", "hint": "1、贝西日落时不用回到原点。\n\n2、与原模拟水题不同。\n\n3、数据较原题有所修改\n", "locale": "zh-CN"}}}
{"pid": "P2391", "type": "P", "difficulty": 5, "samples": [["4\n3\n2\n4", "2\n2\n3\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "线段树", "并查集", "福建省历届夏令营"], "title": "白雪皑皑", "background": "“柴门闻犬吠，风雪夜归人”，冬天，不期而至。千里冰封，万里雪飘。空中刮起了鸭毛大雪。雪花纷纷，降落人间。 美能量星球（pty 在 spore 上的一个殖民地）上的人们被这美景所震撼。但是 pty 却不高兴，他不喜欢白色的世界，他觉得这样太单调了。所以他想对雪花进行染色，让世界变得多彩些。\n", "description": "现在有 $n$ 片雪花排成一列。 pty 要对雪花进行 $m$ 次染色操作，第 $i$ 次染色操作中，把第 $((i\\times p+q)\\bmod n)+1$ 片雪花和第 $((i\\times q+p)\\bmod n)+1$ 片雪花之间的雪花（包括端点）染成颜色 $i$。其中 $p,q$ 是给定的两个正整数。他想知道最后 $n$ 片雪花被染成了什么颜色。没有被染色输出 $0$。", "inputFormat": "输入共四行，每行一个整数，分别为 $n,m,p,q$，意义如题中所述。", "outputFormat": "输出共 $n$ 行，每行一个整数，第 $i$ 行表示第 $i$ 片雪花的颜色。", "hint": "- 对于 $20\\%$ 的数据满足：$n,m\\leq 1000$。\n- 对于 $40\\%$ 的数据满足：$n\\leq 8000$，$m\\leq 10^6$。\n- 对于 $80\\%$ 的数据满足：$n\\leq 5\\times 10^5$，$m\\leq 10^7$。\n- 对于 $100\\%$ 的数据满足：$1\\leq n\\leq 10^6$，$1\\leq m\\leq 10^7$。\n\n保证 $1\\leq m\\times p+q,m\\times q+p\\leq 2\\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Snow-Covered", "background": "\"By the brushwood gate, a dog barks; through wind and snow, a traveler returns at night.\" Winter arrives unexpectedly. A thousand miles are frozen, and ten thousand miles are swept by snow. Feathery snow whirls in the air, and snowflakes drift down to the world. The people on the Planet of Positive Energy (a colony of pty on spore) are awed by this beauty. However, pty is not pleased; he dislikes a world of white and finds it too monotonous. So he wants to dye the snowflakes to make the world more colorful.", "description": "There are $n$ snowflakes arranged in a line. pty will perform $m$ coloring operations. In the $i$-th coloring operation, he colors all snowflakes between the $((i\\times p+q)\\bmod n)+1$-th snowflake and the $((i\\times q+p)\\bmod n)+1$-th snowflake (inclusive) with color $i$. Here $p, q$ are two given positive integers. He wants to know the final color of each of the $n$ snowflakes. Output $0$ for any snowflake that is never colored.", "inputFormat": "The input consists of four lines, each containing one integer, namely $n, m, p, q$, as described above.", "outputFormat": "Output $n$ lines. The $i$-th line contains one integer, the color of the $i$-th snowflake.", "hint": "- For $20\\%$ of the testdata: $n,m\\leq 1000$.\n- For $40\\%$ of the testdata: $n\\leq 8000$, $m\\leq 10^6$.\n- For $80\\%$ of the testdata: $n\\leq 5\\times 10^5$, $m\\leq 10^7$.\n- For $100\\%$ of the testdata: $1\\leq n\\leq 10^6$, $1\\leq m\\leq 10^7$.\n\nIt is guaranteed that $1\\leq m\\times p+q,m\\times q+p\\leq 2\\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "白雪皑皑", "background": "“柴门闻犬吠，风雪夜归人”，冬天，不期而至。千里冰封，万里雪飘。空中刮起了鸭毛大雪。雪花纷纷，降落人间。 美能量星球（pty 在 spore 上的一个殖民地）上的人们被这美景所震撼。但是 pty 却不高兴，他不喜欢白色的世界，他觉得这样太单调了。所以他想对雪花进行染色，让世界变得多彩些。\n", "description": "现在有 $n$ 片雪花排成一列。 pty 要对雪花进行 $m$ 次染色操作，第 $i$ 次染色操作中，把第 $((i\\times p+q)\\bmod n)+1$ 片雪花和第 $((i\\times q+p)\\bmod n)+1$ 片雪花之间的雪花（包括端点）染成颜色 $i$。其中 $p,q$ 是给定的两个正整数。他想知道最后 $n$ 片雪花被染成了什么颜色。没有被染色输出 $0$。", "inputFormat": "输入共四行，每行一个整数，分别为 $n,m,p,q$，意义如题中所述。", "outputFormat": "输出共 $n$ 行，每行一个整数，第 $i$ 行表示第 $i$ 片雪花的颜色。", "hint": "- 对于 $20\\%$ 的数据满足：$n,m\\leq 1000$。\n- 对于 $40\\%$ 的数据满足：$n\\leq 8000$，$m\\leq 10^6$。\n- 对于 $80\\%$ 的数据满足：$n\\leq 5\\times 10^5$，$m\\leq 10^7$。\n- 对于 $100\\%$ 的数据满足：$1\\leq n\\leq 10^6$，$1\\leq m\\leq 10^7$。\n\n保证 $1\\leq m\\times p+q,m\\times q+p\\leq 2\\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2392", "type": "P", "difficulty": 2, "samples": [["1 2 1 3\t\t\n5\n4 3\n6\n2 4 3\n", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2015", "递归", "洛谷原创", "背包 DP", "洛谷月赛"], "title": "kkksc03考前临时抱佛脚", "background": "kkksc03 的大学生活非常的颓废，平时根本不学习。但是，临近期末考试，他必须要开始抱佛脚，以求不挂科。", "description": "这次期末考试，kkksc03 需要考 $4$ 科。因此要开始刷习题集，每科都有一个习题集，分别有 $s_1,s_2,s_3,s_4$ 道题目，完成每道题目需要一些时间，可能不等（$A_1,A_2,\\ldots,A_{s_1}$，$B_1,B_2,\\ldots,B_{s_2}$，$C_1,C_2,\\ldots,C_{s_3}$，$D_1,D_2,\\ldots,D_{s_4}$）。\n\n\nkkksc03 有一个能力，他的左右两个大脑可以同时计算 $2$ 道不同的题目，但是仅限于同一科。因此，kkksc03 必须一科一科的复习。\n\n\n由于 kkksc03 还急着去处理洛谷的 bug，因此他希望尽快把事情做完，所以他希望知道能够完成复习的最短时间。", "inputFormat": "本题包含 $5$ 行数据：第 $1$ 行，为四个正整数 $s_1,s_2,s_3,s_4$。\n\n第 $2$ 行，为 $A_1,A_2,\\ldots,A_{s_1}$ 共 $s_1$ 个数，表示第一科习题集每道题目所消耗的时间。\n\n第 $3$ 行，为 $B_1,B_2,\\ldots,B_{s_2}$ 共 $s_2$ 个数。\n\n第 $4$ 行，为 $C_1,C_2,\\ldots,C_{s_3}$ 共 $s_3$ 个数。\n\n第 $5$ 行，为 $D_1,D_2,\\ldots,D_{s_4}$ 共 $s_4$ 个数，意思均同上。", "outputFormat": "输出一行，为复习完毕最短时间。", "hint": "$1\\leq s_1,s_2,s_3,s_4\\leq 20$。\n\n$1\\leq A_1,A_2,\\ldots,A_{s_1},B_1,B_2,\\ldots,B_{s_2},C_1,C_2,\\ldots,C_{s_3},D_1,D_2,\\ldots,D_{s_4}\\leq60$。", "locale": "zh-CN", "translations": {"en": {"title": "kkksc03's Last-Minute Cramming Before the Exam", "background": "kkksc03's college life is very unmotivated; he usually does not study. However, with the final exams approaching, he must start cramming to avoid failing.", "description": "For this final exam, kkksc03 needs to take $4$ subjects. Therefore, he begins practicing problem sets. Each subject has a problem set with $s_1,s_2,s_3,s_4$ problems, and each problem takes some (possibly different) amount of time to complete ($A_1,A_2,\\ldots,A_{s_1}$, $B_1,B_2,\\ldots,B_{s_2}$, $C_1,C_2,\\ldots,C_{s_3}$, $D_1,D_2,\\ldots,D_{s_4}$).\n\nkkksc03 has an ability: his left and right brains can work on $2$ different problems simultaneously, but only within the same subject. Therefore, kkksc03 must review one subject at a time.\n\nSince kkksc03 is also in a hurry to handle Luogu's bugs, he wants to finish as quickly as possible. He wants to know the minimum time required to complete all the review.", "inputFormat": "This problem contains $5$ lines of input.\n- The first line contains four positive integers $s_1,s_2,s_3,s_4$.\n- The second line contains $A_1,A_2,\\ldots,A_{s_1}$, a total of $s_1$ numbers, representing the time required for each problem in the first subject's problem set.\n- The third line contains $B_1,B_2,\\ldots,B_{s_2}$, a total of $s_2$ numbers.\n- The fourth line contains $C_1,C_2,\\ldots,C_{s_3}$, a total of $s_3$ numbers.\n- The fifth line contains $D_1,D_2,\\ldots,D_{s_4}$, a total of $s_4$ numbers, with the same meaning as above.", "outputFormat": "Output one line: the minimum time to finish all the review.", "hint": "$1\\leq s_1,s_2,s_3,s_4\\leq 20$.\n\n$1\\leq A_1,A_2,\\ldots,A_{s_1},B_1,B_2,\\ldots,B_{s_2},C_1,C_2,\\ldots,C_{s_3},D_1,D_2,\\ldots,D_{s_4}\\leq 60$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "kkksc03考前临时抱佛脚", "background": "kkksc03 的大学生活非常的颓废，平时根本不学习。但是，临近期末考试，他必须要开始抱佛脚，以求不挂科。", "description": "这次期末考试，kkksc03 需要考 $4$ 科。因此要开始刷习题集，每科都有一个习题集，分别有 $s_1,s_2,s_3,s_4$ 道题目，完成每道题目需要一些时间，可能不等（$A_1,A_2,\\ldots,A_{s_1}$，$B_1,B_2,\\ldots,B_{s_2}$，$C_1,C_2,\\ldots,C_{s_3}$，$D_1,D_2,\\ldots,D_{s_4}$）。\n\n\nkkksc03 有一个能力，他的左右两个大脑可以同时计算 $2$ 道不同的题目，但是仅限于同一科。因此，kkksc03 必须一科一科的复习。\n\n\n由于 kkksc03 还急着去处理洛谷的 bug，因此他希望尽快把事情做完，所以他希望知道能够完成复习的最短时间。", "inputFormat": "本题包含 $5$ 行数据：第 $1$ 行，为四个正整数 $s_1,s_2,s_3,s_4$。\n\n第 $2$ 行，为 $A_1,A_2,\\ldots,A_{s_1}$ 共 $s_1$ 个数，表示第一科习题集每道题目所消耗的时间。\n\n第 $3$ 行，为 $B_1,B_2,\\ldots,B_{s_2}$ 共 $s_2$ 个数。\n\n第 $4$ 行，为 $C_1,C_2,\\ldots,C_{s_3}$ 共 $s_3$ 个数。\n\n第 $5$ 行，为 $D_1,D_2,\\ldots,D_{s_4}$ 共 $s_4$ 个数，意思均同上。", "outputFormat": "输出一行，为复习完毕最短时间。", "hint": "$1\\leq s_1,s_2,s_3,s_4\\leq 20$。\n\n$1\\leq A_1,A_2,\\ldots,A_{s_1},B_1,B_2,\\ldots,B_{s_2},C_1,C_2,\\ldots,C_{s_3},D_1,D_2,\\ldots,D_{s_4}\\leq60$。", "locale": "zh-CN"}}}
{"pid": "P2393", "type": "P", "difficulty": 1, "samples": [["1\n", "1.00000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "yyy loves Maths II", "background": "上次蒟蒻 redbag 可把 yyy 气坏了，yyy 说他只是小学生，蒟蒻 redbag 这次不坑他了。\n", "description": "redbag 给了 yyy 很多个数，要 yyy 计算这些数的和。\n\n必须要快，redbag 只给了 yyy $1$ 秒的时间！！！\n", "inputFormat": "一行，很多个数。", "outputFormat": "一行，一个实数(四舍五入精确到 $5$ 位小数)，表示这些数的和。\n", "hint": "对于 $100\\%$ 的数据，所有数 $ \\le 233,333,333 $，保证在小数点后最多有 $6$ 位数，最多共有 $5\\times 10^4$ 个数。", "locale": "zh-CN", "translations": {"en": {"title": "yyy loves Maths II", "background": "Last time, the noob (jǔruò) redbag made yyy very angry. yyy says he is only a primary school student, so the noob redbag will not trick him this time.", "description": "redbag gave yyy many numbers and asked yyy to compute their sum.\nIt must be fast; redbag only gave yyy $1$ second.", "inputFormat": "One line with many numbers.", "outputFormat": "One line with a real number (rounded to $5$ decimal places), representing the sum of these numbers.", "hint": "For $100\\%$ of the testdata, each number is $\\le 233,333,333$, there are at most $6$ digits after the decimal point, and there are at most $5\\times 10^4$ numbers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves Maths II", "background": "上次蒟蒻 redbag 可把 yyy 气坏了，yyy 说他只是小学生，蒟蒻 redbag 这次不坑他了。\n", "description": "redbag 给了 yyy 很多个数，要 yyy 计算这些数的和。\n\n必须要快，redbag 只给了 yyy $1$ 秒的时间！！！\n", "inputFormat": "一行，很多个数。", "outputFormat": "一行，一个实数(四舍五入精确到 $5$ 位小数)，表示这些数的和。\n", "hint": "对于 $100\\%$ 的数据，所有数 $ \\le 233,333,333 $，保证在小数点后最多有 $6$ 位数，最多共有 $5\\times 10^4$ 个数。", "locale": "zh-CN"}}}
{"pid": "P2394", "type": "P", "difficulty": 1, "samples": [["0.23", "0.01000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "yyy loves Chemistry I", "background": "从前，有个人叫 yyy，他特别喜欢化学，尤其是一些很危（zuo）险（si）的实验。\n\n这一天，他开始研究起了一个神奇又有趣的方程式：\n\n$\\text{2Na + 2H}_{2}\\text{O == 2NaOH + H}_2\\uparrow$", "description": "现在 yyy 将一块质量为 $x\\ \\text{g}$ 的钠投入很多（过量）的水中，然后开始收集氢气。\n\n最终，我们知道，这块钠在水中游动着消失了。而 yyy 很厉害，把氢气全收集起来了。\n\n**已知每投入 $\\bm{23}$ 克的钠，就会生成 $\\bm1$ 克的氢气。**\n\n那么现在 yyy 收集了多少克氢气呢？\n\n**形式化题意：输入一个实数 $\\bm x$，输出 $\\bm{\\frac{x}{23}}$ 的前 $\\bm8$ 位小数值，要求四舍五入。**", "inputFormat": "一行一个实数 $x$，代表 yyy 将投入了水中的钠的质量（单位：$\\text{g}$）。\n\n输入文件行末一定**不会**有一只回车啦。", "outputFormat": "一行一个实数（四舍五入精确到 $8$ 位小数），代表生成了多少克氢气。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，满足 $0<x\\le1$。\n\n### 提示\n\n你想知道 $x$ 有几位小数吗？才不给你呢>\\_<  \nkkksc：没有数据范围怎么行！输入文件不超过 $5\\text M$！  \n出题人：怎么能这样！差评！我不好挖坑了！\n\n### 警告\n\n**请注意，题目中描述的实验具有很大风险，请勿轻易尝试：活泼金属 $\\bold{Na}$ 存在安全隐患、$\\bold{NaOH}$ 具有强烈的腐蚀性、$\\bold{NaOH}$ 溶解于水时会放出大量热量。**", "locale": "zh-CN", "translations": {"en": {"title": "yyy loves Chemistry I", "background": "Once, there was a person named yyy who especially loved chemistry, especially some very dangerous (\"zuo si\") experiments.\n\nThat day, he began to study a magical and interesting equation:\n\n$\\text{2Na + 2H}_{2}\\text{O == 2NaOH + H}_2\\uparrow$", "description": "Now yyy puts a piece of sodium with mass $x\\ \\text{g}$ into a lot (excess) of water and then starts collecting hydrogen gas.\n\nIn the end, we know that this piece of sodium swam around in the water and disappeared. And yyy is very capable and collected all the hydrogen gas.\n\nKnown that every $\\bm{23}$ grams of sodium added will produce $\\bm1$ gram of hydrogen gas.\n\nHow many grams of hydrogen did yyy collect?\n\nFormal statement: Given a real number $\\bm x$, output $\\bm{\\frac{x}{23}}$ rounded to $\\bm 8$ decimal places.", "inputFormat": "One line containing a real number $x$, representing the mass of sodium that yyy put into the water (unit: $\\text{g}$).\n\nThere will definitely not be a trailing newline at the end of the input file.", "outputFormat": "One line containing a real number (rounded to $8$ decimal places), representing how many grams of hydrogen gas were produced.", "hint": "### Constraints and Notes\n\nFor $100\\%$ of the testdata, $0 < x \\le 1$.\n\n### Hint\n\nDo you want to know how many decimal places $x$ has? Not telling you >_<  \nkkksc: How can there be no constraints! The input file is no more than $5\\text M$!  \nProblem setter: How could you do that! Bad review! Now I can't lay traps!\n\n### Warning\n\nPlease note that the experiment described in the problem is highly risky. Do not attempt it: the reactive metal $\\bold{Na}$ poses safety hazards, $\\bold{NaOH}$ is strongly corrosive, and dissolving $\\bold{NaOH}$ in water releases a large amount of heat.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves Chemistry I", "background": "从前，有个人叫 yyy，他特别喜欢化学，尤其是一些很危（zuo）险（si）的实验。\n\n这一天，他开始研究起了一个神奇又有趣的方程式：\n\n$\\text{2Na + 2H}_{2}\\text{O == 2NaOH + H}_2\\uparrow$", "description": "现在 yyy 将一块质量为 $x\\ \\text{g}$ 的钠投入很多（过量）的水中，然后开始收集氢气。\n\n最终，我们知道，这块钠在水中游动着消失了。而 yyy 很厉害，把氢气全收集起来了。\n\n**已知每投入 $\\bm{23}$ 克的钠，就会生成 $\\bm1$ 克的氢气。**\n\n那么现在 yyy 收集了多少克氢气呢？\n\n**形式化题意：输入一个实数 $\\bm x$，输出 $\\bm{\\frac{x}{23}}$ 的前 $\\bm8$ 位小数值，要求四舍五入。**", "inputFormat": "一行一个实数 $x$，代表 yyy 将投入了水中的钠的质量（单位：$\\text{g}$）。\n\n输入文件行末一定**不会**有一只回车啦。", "outputFormat": "一行一个实数（四舍五入精确到 $8$ 位小数），代表生成了多少克氢气。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，满足 $0<x\\le1$。\n\n### 提示\n\n你想知道 $x$ 有几位小数吗？才不给你呢>\\_<  \nkkksc：没有数据范围怎么行！输入文件不超过 $5\\text M$！  \n出题人：怎么能这样！差评！我不好挖坑了！\n\n### 警告\n\n**请注意，题目中描述的实验具有很大风险，请勿轻易尝试：活泼金属 $\\bold{Na}$ 存在安全隐患、$\\bold{NaOH}$ 具有强烈的腐蚀性、$\\bold{NaOH}$ 溶解于水时会放出大量热量。**", "locale": "zh-CN"}}}
{"pid": "P2395", "type": "P", "difficulty": 4, "samples": [["[h1]Hello World![/h1]\n[h2]How are [i]you[/i]?[/h2]", "# Hello World! #\n## How are *you*? ##"], ["[h1]Introducing Swift.[/h1][quote]\nimport SpriteKit\nlet object = SKSpriteNode(imageNamed: “[L2/Ascention]”\n[/quote]", "# Introducing Swift. #\n> import SpriteKit\n> let object = SKSpriteNode(imageNamed: “[L2/Ascention]”"], ["[h1]I knew you were\ntrouble when you walked in[/h1]\n[url=http://www.example.com]By Taylor Swift[/url]", "# I knew you were\ntrouble when you walked in #\n[By Taylor Swift](http://www.example.com)"], ["[h1]Thanks for [i]inviting[/h1] me.[/i]", "Match Error"], ["[h2]Your gift is awesome!", "Unclosed Mark"], ["[quote][/quote][/quote]", "Match Error\n(对该数据的解释: 匹配到第一个关闭标签后即不认为后面的内容仍是代码段)"], ["[quote][quote][/quote]", "> [quote]"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2015", "洛谷原创", "栈", "洛谷月赛"], "title": "BBCode转换Markdown", "background": "BBCode 和 Markdown 是两种常用的格式语言。所谓格式语言指，例如在某些网站评论区发表评论时，可以使用其对你的评论进行修饰，使文字可以有颜色、粗体等各种样式。\n", "description": "#### ~~PDF版题目: http://pan.baidu.com/s/1i3mxk4t 提取密码 hayc~~\n\n### 2025-7-17：链接炸了\n\nBBCode的语法如下所示：\n\n```plain\n[h1]Hello World![/h1]\n[h2][i]This is a BBCode[/i][/h2]\n[b][i]I love[/i] Olympic [i]Informatics[/i][/b]\n```\n\n例如，在标签 `[h1]` 中，在 `[h1]` 和 `[/h1]` 之间包裹的内容属于一级标题，对于这之间的文字要按照一级标题的样式渲染。\n\n请注意 BBCode 要求标签的开闭必须**完整且且嵌套无误**，也就是说，如下列的例子都是不合法的 BBCode：\n\n```plain\n[h1]Hello World! //标签未闭合\n[h1]Hello World![/h2] //两个标签不匹配\n[h1][i]Hello World![/h1][/i] //嵌套次序错误\n```\n\n另外，极其重要的一点是，BBCode有一个特殊的标签[quote][/quote]，在其中的任意文字都不应被解析为BBCode代码，而应该对其进行Markdown化处理后被原样输出。\n\n现在介绍Markdown。其语法如下所示：\n\n```cpp\n# Hello World! #\n## *This is a Markdown* ##\n__*I love* Olympic *Informatics*__\n```\n\n你的任务就是将给定的一串 BBCode 转换成 Markdown，并对不合法的输入报错。\n\n题目数据中会出现的所有 BBCode 的标签与其对应 Markdown 对应关系如下，保证不出现除此之外的对应：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1493.png) \n\n对于 `[quote]` 标签的附加说明：\n\n![](https://cdn.luogu.com.cn/upload/pic/1494.png)\n", "inputFormat": "所需转换的 BBCode。\n", "outputFormat": "", "hint": "为保证评测顺利不被误判，请注意下列要求：\n\n尊重原输入输出的换行，不自行添删。\n\n对于第一条的例外是， 遇到 `[quote]` 标签不在新的一行时，Markdown 中请另起一行。另外 `[quote]` 标签中的代码段头尾空行请去除，不会出现空白的 quote。\n\n请注意上表中的空格。\n\n对于不合法的 BBCode 输入，你的程序必须报错：\n\n- 对于匹配错误的标签输出 `Match Error`；\n- 对于未闭合的标签输出 `Unclosed Mark`，请参考样例。\n\n两种情况同时出现的时候（即同时有匹配错误和未闭合的标签时），按照匹配错误处理，输出 `Match Error`。\n\n由于 quote 标签的特殊性，为保证不出现歧义，数据保证 quote 标签不会出现错误。\n\n例如：对于出现如 `[i][h1]Text[/i]` 这样的情况，按照 `Match Error` 处理，对于 `[i][h1]Text[/h1]` 这样的情况，按照 `Unclosed Mark` 处理。\n\n由于洛谷限制，请大家在输出 `Unclosed Mark` 的时候在 `close` 中间切开分为两段字符串输出，否则会被吞记录。\n\n保证以下三种字符不出现在除quote标签包裹的段落中的文字中：`[` `]` `/` `*` `_` `#` `>`，但地址中可能会出现/字符。\n\n保证输入不会出现标签不完整的情况，例如 `[h1]Text[/h`。\n\n对于曾经在其他地方使用过 Markdown 与 BBCode 的同学：题中的格式不是严格的 BBCode 与 Markdown 格式，请勿被经验迷惑。\n", "locale": "zh-CN", "translations": {"en": {"title": "BBCode to Markdown", "background": "BBCode and Markdown are two commonly used formatting languages. A formatting language means, for example, when posting a comment on some websites, you can use it to style your comment so that text can have colors, boldface, and various other styles.", "description": "#### ~~PDF version of the problem: http://pan.baidu.com/s/1i3mxk4t Extraction code hayc~~\n\n### 2025-7-17: The link is down.\n\nThe syntax of BBCode is as follows:\n\n```plain\n[h1]Hello World![/h1]\n[h2][i]This is a BBCode[/i][/h2]\n[b][i]I love[/i] Olympic [i]Informatics[/i][/b]\n```\n\nFor example, in the tag `[h1]`, the content wrapped between `[h1]` and `[/h1]` is a level-1 heading, and the text within should be rendered in the style of a level-1 heading.\n\nPlease note that BBCode requires tags to be properly opened and closed and nested correctly, that is, the following examples are all invalid BBCode:\n\n```plain\n[h1]Hello World! // tag not closed\n[h1]Hello World![/h2] // two tags do not match\n[h1][i]Hello World![/h1][/i] // incorrect nesting order\n```\n\nIn addition, a very important point is that BBCode has a special tag [quote][/quote]. Any text inside it should not be parsed as BBCode code but should be converted to Markdown and then output verbatim.\n\nNow, introducing Markdown. Its syntax is as follows:\n\n```cpp\n# Hello World! #\n## *This is a Markdown* ##\n__*I love* Olympic *Informatics*__\n```\n\nYour task is to convert a given piece of BBCode into Markdown and report errors for invalid input.\n\nAll BBCode tags that will appear in the testdata and their corresponding Markdown counterparts are shown below. No other mappings will appear:\n\n ![](https://cdn.luogu.com.cn/upload/pic/1493.png) \n\nAdditional notes for the `[quote]` tag:\n\n![](https://cdn.luogu.com.cn/upload/pic/1494.png)", "inputFormat": "The BBCode that needs to be converted.", "outputFormat": "", "hint": "To ensure smooth judging and avoid misjudgment, please pay attention to the following requirements:\n\n- Respect the original line breaks in the input and output. Do not add or remove line breaks on your own.\n- The exception to the above: when encountering a `[quote]` tag that is not on a new line, please start a new line in Markdown. Also, please remove the leading and trailing blank lines of the code block inside the `[quote]` tag. There will be no empty quotes.\n- Please pay attention to the spaces in the table above.\n- For invalid BBCode input, your program must report an error:\n  - For mismatched tags, output `Match Error`.\n  - For unclosed tags, output `Unclosed Mark`. Please refer to the samples.\n- When both situations occur at the same time (that is, both a matching error and unclosed tags), handle it as a matching error and output `Match Error`.\n- Due to the special nature of the quote tag, to avoid ambiguity, the testdata guarantees that the quote tag will not be erroneous.\n- For example: for a case like `[i][h1]Text[/i]`, handle it as `Match Error`. For a case like `[i][h1]Text[/h1]`, handle it as `Unclosed Mark`.\n- Due to Luogu limitations, when outputting `Unclosed Mark`, please split `close` in the middle into two separate strings, otherwise the record will be swallowed.\n- It is guaranteed that the following characters will not appear in text outside segments wrapped by the quote tag: `[` `]` `/` `*` `_` `#` `>`. However, the `/` character may appear in URLs.\n- The input will not contain incomplete tags, such as `[h1]Text[/h`.\n- For those who have used Markdown and BBCode elsewhere: the formats in this problem are not strictly the standard BBCode or Markdown formats. Please do not be misled by prior experience.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "BBCode转换Markdown", "background": "BBCode 和 Markdown 是两种常用的格式语言。所谓格式语言指，例如在某些网站评论区发表评论时，可以使用其对你的评论进行修饰，使文字可以有颜色、粗体等各种样式。\n", "description": "#### ~~PDF版题目: http://pan.baidu.com/s/1i3mxk4t 提取密码 hayc~~\n\n### 2025-7-17：链接炸了\n\nBBCode的语法如下所示：\n\n```plain\n[h1]Hello World![/h1]\n[h2][i]This is a BBCode[/i][/h2]\n[b][i]I love[/i] Olympic [i]Informatics[/i][/b]\n```\n\n例如，在标签 `[h1]` 中，在 `[h1]` 和 `[/h1]` 之间包裹的内容属于一级标题，对于这之间的文字要按照一级标题的样式渲染。\n\n请注意 BBCode 要求标签的开闭必须**完整且且嵌套无误**，也就是说，如下列的例子都是不合法的 BBCode：\n\n```plain\n[h1]Hello World! //标签未闭合\n[h1]Hello World![/h2] //两个标签不匹配\n[h1][i]Hello World![/h1][/i] //嵌套次序错误\n```\n\n另外，极其重要的一点是，BBCode有一个特殊的标签[quote][/quote]，在其中的任意文字都不应被解析为BBCode代码，而应该对其进行Markdown化处理后被原样输出。\n\n现在介绍Markdown。其语法如下所示：\n\n```cpp\n# Hello World! #\n## *This is a Markdown* ##\n__*I love* Olympic *Informatics*__\n```\n\n你的任务就是将给定的一串 BBCode 转换成 Markdown，并对不合法的输入报错。\n\n题目数据中会出现的所有 BBCode 的标签与其对应 Markdown 对应关系如下，保证不出现除此之外的对应：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1493.png) \n\n对于 `[quote]` 标签的附加说明：\n\n![](https://cdn.luogu.com.cn/upload/pic/1494.png)\n", "inputFormat": "所需转换的 BBCode。\n", "outputFormat": "", "hint": "为保证评测顺利不被误判，请注意下列要求：\n\n尊重原输入输出的换行，不自行添删。\n\n对于第一条的例外是， 遇到 `[quote]` 标签不在新的一行时，Markdown 中请另起一行。另外 `[quote]` 标签中的代码段头尾空行请去除，不会出现空白的 quote。\n\n请注意上表中的空格。\n\n对于不合法的 BBCode 输入，你的程序必须报错：\n\n- 对于匹配错误的标签输出 `Match Error`；\n- 对于未闭合的标签输出 `Unclosed Mark`，请参考样例。\n\n两种情况同时出现的时候（即同时有匹配错误和未闭合的标签时），按照匹配错误处理，输出 `Match Error`。\n\n由于 quote 标签的特殊性，为保证不出现歧义，数据保证 quote 标签不会出现错误。\n\n例如：对于出现如 `[i][h1]Text[/i]` 这样的情况，按照 `Match Error` 处理，对于 `[i][h1]Text[/h1]` 这样的情况，按照 `Unclosed Mark` 处理。\n\n由于洛谷限制，请大家在输出 `Unclosed Mark` 的时候在 `close` 中间切开分为两段字符串输出，否则会被吞记录。\n\n保证以下三种字符不出现在除quote标签包裹的段落中的文字中：`[` `]` `/` `*` `_` `#` `>`，但地址中可能会出现/字符。\n\n保证输入不会出现标签不完整的情况，例如 `[h1]Text[/h`。\n\n对于曾经在其他地方使用过 Markdown 与 BBCode 的同学：题中的格式不是严格的 BBCode 与 Markdown 格式，请勿被经验迷惑。\n", "locale": "zh-CN"}}}
{"pid": "P2396", "type": "P", "difficulty": 5, "samples": [["8\n1 3 1 5 2 2 2 3\n0", "40320"], ["24\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n2\n10 15\n", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [228000, 228000, 228000, 228000, 228000, 228000, 228000, 228000, 228000, 228000]}, "tags": ["2015", "洛谷原创", "剪枝", "栈", "洛谷月赛", "状压 DP"], "title": "yyy loves Maths VII", "background": "yyy 对某些数字有着情有独钟的喜爱，他叫他们为“幸运数字”；然而他作死太多，所以把自己讨厌的数字称为“厄运数字”。", "description": "一群同学在和 yyy 玩一个游戏。\n\n每次,他们会给 yyy $n$ 张卡片，卡片上有数字，所有的数字都是“幸运数字”，我们认为第 $i$ 张卡片上数字是 $a_{i}$。\n\n每次 yyy 可以选择向前走 $a_{i}$ 步并且丢掉第 $i$ 张卡片。当他手上没有卡片的时候他就赢了。\n\n但是呢，大家对“厄运数字”的位置布置下了陷阱，如果 yyy 停在这个格子上，那么他就输了。注意：**即使到了终点，但是这个位置是厄运数字，那么也输了。**\n\n现在，有些同学开始问：yyy 有多大的概率会赢呢？\n\n大家觉得这是个好问题，有人立即让 yyy 写个程序：“电脑运行速度很快！$24$ 的阶乘也不过就 $620\\,448\\,401\\,733\\,239\\,439\\,360\\,000$，yyy 你快写个程序来算一算。”\n\nyyy 表示很无语，他表示他不想算概率，最多算算赢的方案数，而且是对 $10^9+7$ 取模后的值。\n\n大家都不会写程序，只好妥协。\n\n但是这时候 yyy 为难了，$24!$ 太大了，要跑好长时间。\n\n他时间严重不够！需要你的帮助！\n\n某个数字可能既属于幸运数字又属于厄运数字。", "inputFormat": "第一行一个整数 $n$。 \n\n下面一行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 张卡片上的数字 $a_i$。\n\n第三行 $m$ 表示 yyy 的厄运数字个数（最多 $2$ 个）。\n\n若 $m>0$，第四行 $m$ 个数 $b_i$ 代表所有的厄运数字。", "outputFormat": "输出胜利方案数对 $10^9+7$ 取模的结果。", "hint": "- $10\\%$ 的数据 $n \\leq 10$；\n- $50\\%$ 的数据 $n \\leq 23$；\n- $100\\%$ 的数据 $n \\leq 24$，$0\\le m\\le 2$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "yyy loves Maths VII", "background": "yyy has a special affection for certain numbers, which he calls \"lucky numbers\"; however, because he has tempted fate too many times, he calls the numbers he dislikes \"unlucky numbers\".", "description": "A group of classmates are playing a game with yyy.\n\nEach time, they give yyy $n$ cards with numbers on them. All the numbers are \"lucky numbers\". Let the number on the $i$-th card be $a_i$.\n\nOn each move, yyy may choose to move forward $a_i$ steps and discard the $i$-th card. He wins when he has no cards left.\n\nHowever, traps are set on positions that are \"unlucky numbers\". If yyy stops on such a cell, he loses. Note: even if he reaches the end, if that position is an unlucky number, he still loses.\n\nNow, some classmates begin to ask: what is the probability that yyy will win?\n\nThey think this is a good question, and someone immediately asks yyy to write a program: \"Computers are very fast! $24$ factorial is only $620\\,448\\,401\\,733\\,239\\,439\\,360\\,000$, yyy, hurry up and write a program to compute it.\"\n\nyyy is speechless. He says he does not want to compute the probability—at most he can compute the number of winning plans, and only modulo $10^9+7$.\n\nNone of them can code, so they have to compromise.\n\nBut now yyy is troubled: $24!$ is too large; it would take a long time to run.\n\nHe is seriously short on time and needs your help!\n\nA number may belong to both the lucky numbers and the unlucky numbers.", "inputFormat": "The first line contains an integer $n$.\n\nThe second line contains $n$ integers; the $i$-th integer is $a_i$, the number on the $i$-th card.\n\nThe third line contains an integer $m$ denoting the number of yyy's unlucky numbers (at most $2$).\n\nIf $m>0$, the fourth line contains $m$ integers $b_i$ representing all the unlucky numbers.", "outputFormat": "Output the number of winning plans modulo $10^9+7$.", "hint": "Constraints:\n- For $10\\%$ of the testdata, $n \\leq 10$.\n- For $50\\%$ of the testdata, $n \\leq 23$.\n- For $100\\%$ of the testdata, $n \\leq 24$, $0 \\le m \\le 2$, $1 \\le a_i, b_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves Maths VII", "background": "yyy 对某些数字有着情有独钟的喜爱，他叫他们为“幸运数字”；然而他作死太多，所以把自己讨厌的数字称为“厄运数字”。", "description": "一群同学在和 yyy 玩一个游戏。\n\n每次,他们会给 yyy $n$ 张卡片，卡片上有数字，所有的数字都是“幸运数字”，我们认为第 $i$ 张卡片上数字是 $a_{i}$。\n\n每次 yyy 可以选择向前走 $a_{i}$ 步并且丢掉第 $i$ 张卡片。当他手上没有卡片的时候他就赢了。\n\n但是呢，大家对“厄运数字”的位置布置下了陷阱，如果 yyy 停在这个格子上，那么他就输了。注意：**即使到了终点，但是这个位置是厄运数字，那么也输了。**\n\n现在，有些同学开始问：yyy 有多大的概率会赢呢？\n\n大家觉得这是个好问题，有人立即让 yyy 写个程序：“电脑运行速度很快！$24$ 的阶乘也不过就 $620\\,448\\,401\\,733\\,239\\,439\\,360\\,000$，yyy 你快写个程序来算一算。”\n\nyyy 表示很无语，他表示他不想算概率，最多算算赢的方案数，而且是对 $10^9+7$ 取模后的值。\n\n大家都不会写程序，只好妥协。\n\n但是这时候 yyy 为难了，$24!$ 太大了，要跑好长时间。\n\n他时间严重不够！需要你的帮助！\n\n某个数字可能既属于幸运数字又属于厄运数字。", "inputFormat": "第一行一个整数 $n$。 \n\n下面一行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 张卡片上的数字 $a_i$。\n\n第三行 $m$ 表示 yyy 的厄运数字个数（最多 $2$ 个）。\n\n若 $m>0$，第四行 $m$ 个数 $b_i$ 代表所有的厄运数字。", "outputFormat": "输出胜利方案数对 $10^9+7$ 取模的结果。", "hint": "- $10\\%$ 的数据 $n \\leq 10$；\n- $50\\%$ 的数据 $n \\leq 23$；\n- $100\\%$ 的数据 $n \\leq 24$，$0\\le m\\le 2$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2397", "type": "P", "difficulty": 2, "samples": [["5\n2 3 3 3 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [5120, 5120, 5120, 5120, 5120, 5120, 5120, 5120, 5120]}, "tags": ["模拟", "2015", "洛谷原创", "洛谷月赛"], "title": "yyy loves Maths VI (mode) / 摩尔投票", "background": "自从上次 redbag 用加法好好的刁难过了 yyy 同学以后，yyy 十分愤怒。  \n他还击给了 redbag 一题，但是这题他惊讶的发现自己居然也不会，所以只好找你\n", "description": "一共有 $n$ 个正整数 $a_i$，他让 redbag 找众数。他还特意表示，这个众数出现次数超过了一半。  \n", "inputFormat": "第一行一个整数 $n$，表示数的个数。   \n第二行 $n$ 个正整数 $a_i$。\n", "outputFormat": "一行一个整数，表示众数。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 2\\times 10^6$，$a_i \\in [1,2^{31})$。\n\n有人想水过,但我告诉你这空间是不够的。\n\n//kkksc03偷偷地说：你随便输出一个数字吧，都有1/2的几率。不过这可是乐多赛，值得不值得你看着办。所以最好想一想正解。\n", "locale": "zh-CN", "translations": {"en": {"title": "yyy Loves Math VI (mode) / Moore Voting", "background": "Since last time redbag used addition to give yyy a hard time, yyy was furious. He struck back by giving redbag a problem, but to his surprise he could not solve it himself, so he turned to you.", "description": "There are $n$ positive integers $a_i$. He asks redbag to find the mode. He also specifically states that this mode occurs more than half of the $n$ elements.", "inputFormat": "The first line contains an integer $n$, the number of values.  \nThe second line contains $n$ positive integers $a_i$.", "outputFormat": "Output one line with a single integer, the mode.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 2 \\times 10^6$, $a_i \\in [1, 2^{31})$.\n\nSome may want to take the easy way out, but the memory is not enough.\n\n//kkksc03 whispers: Just output any number; you have a 1/2 chance. But this is \"Le Duo Sai\", whether it is worth it is up to you. So you had better think about the proper solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves Maths VI (mode) / 摩尔投票", "background": "自从上次 redbag 用加法好好的刁难过了 yyy 同学以后，yyy 十分愤怒。  \n他还击给了 redbag 一题，但是这题他惊讶的发现自己居然也不会，所以只好找你\n", "description": "一共有 $n$ 个正整数 $a_i$，他让 redbag 找众数。他还特意表示，这个众数出现次数超过了一半。  \n", "inputFormat": "第一行一个整数 $n$，表示数的个数。   \n第二行 $n$ 个正整数 $a_i$。\n", "outputFormat": "一行一个整数，表示众数。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 2\\times 10^6$，$a_i \\in [1,2^{31})$。\n\n有人想水过,但我告诉你这空间是不够的。\n\n//kkksc03偷偷地说：你随便输出一个数字吧，都有1/2的几率。不过这可是乐多赛，值得不值得你看着办。所以最好想一想正解。\n", "locale": "zh-CN"}}}
{"pid": "P2398", "type": "P", "difficulty": 4, "samples": [["2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "洛谷原创", "素数判断,质数,筛法", "莫比乌斯反演", "容斥原理", "洛谷月赛", "欧拉函数"], "title": "GCD SUM", "background": "", "description": "求\n\n$$\\sum_{i=1}^n \\sum_{j=1}^n \\gcd(i, j)$$", "inputFormat": "第一行一个整数 $n$。", "outputFormat": "第一行一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\leq 3000$。\n\n对于 $60\\%$ 的数据，$7000\\leq n\\leq 7100$。\n\n对于 $100\\%$ 的数据，$n\\leq 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "GCD SUM", "background": "", "description": "Compute\n$$\\sum_{i=1}^n \\sum_{j=1}^n \\gcd(i, j)$$.", "inputFormat": "The first line contains an integer $n$.", "outputFormat": "Output a single integer on the first line representing the answer.", "hint": "For 30% of the testdata, $n \\leq 3000$.\nFor 60% of the testdata, $7000 \\leq n \\leq 7100$.\nFor 100% of the testdata, $n \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "GCD SUM", "background": "", "description": "求\n\n$$\\sum_{i=1}^n \\sum_{j=1}^n \\gcd(i, j)$$", "inputFormat": "第一行一个整数 $n$。", "outputFormat": "第一行一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\leq 3000$。\n\n对于 $60\\%$ 的数据，$7000\\leq n\\leq 7100$。\n\n对于 $100\\%$ 的数据，$n\\leq 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P2399", "type": "P", "difficulty": 4, "samples": [["1.32", "33/25"], ["1.(3)", "4/3"], ["1.0", "1/1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "洛谷原创"], "title": "non hates math", "background": "non 习惯将分数化成小数，但在数学中要以分数形式写，不能化成小数。\n\n因此 non 找到了会编程的你，帮助他将小数化回分数。", "description": "给出一个小数，将它化成最简分数的形式。\n\n小数的类型有2种：（不考虑无限不循环小数）\n\n1. 普通小数；\n2. 循环小数（会给出循环节，循环节用 `()` 表示）。", "inputFormat": "一个小数 $n$。", "outputFormat": "输出这个小数 $n$ 转化成最简分数的形式。", "hint": "输入小数的数据范围是 $0$ 至 $1000$，保证小数点后的字符数不超过 $9$。\n\n对于 $50\\%$ 的数据保证没有循环节。", "locale": "zh-CN", "translations": {"en": {"title": "non hates math", "background": "non is used to converting fractions into decimals, but in math they must write them as fractions and cannot convert them into decimals. Therefore, non turns to you, a programmer, to help convert decimals back to fractions.", "description": "Given a decimal, convert it into an improper fraction.\n\nThere are two types of decimals (we do not consider infinite non-repeating decimals):\n1. Terminating decimal;\n2. Repeating decimal (the repeating part is given and enclosed in `()`).", "inputFormat": "A decimal number $n$.", "outputFormat": "Output the reduced improper fraction form of the decimal $n$.", "hint": "The range of the input decimal is $0$ to $1000$, and the number of characters after the decimal point does not exceed $9$.  \nFor $50\\%$ of the testdata, there is no repeating part.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "non hates math", "background": "non 习惯将分数化成小数，但在数学中要以分数形式写，不能化成小数。\n\n因此 non 找到了会编程的你，帮助他将小数化回分数。", "description": "给出一个小数，将它化成最简分数的形式。\n\n小数的类型有2种：（不考虑无限不循环小数）\n\n1. 普通小数；\n2. 循环小数（会给出循环节，循环节用 `()` 表示）。", "inputFormat": "一个小数 $n$。", "outputFormat": "输出这个小数 $n$ 转化成最简分数的形式。", "hint": "输入小数的数据范围是 $0$ 至 $1000$，保证小数点后的字符数不超过 $9$。\n\n对于 $50\\%$ 的数据保证没有循环节。", "locale": "zh-CN"}}}
{"pid": "P2400", "type": "P", "difficulty": 4, "samples": [["AAAAAAAAAABABABCCD", "9(A)3(AB)CCD"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营"], "title": "秘密文件", "background": null, "description": "某天，情报局得到了一份秘密文件。文件的内容是加密后的全部由大写字母组成字符串。情报局局长小明想将其发送给远在东方神秘的 xx 大陆上的老朋友小刘来解密。然而若字符串太长，则需要很长的发送时间，太不安全了，因此小明想尽量将其缩短。于是小明制定了这样一个缩短规则：若一个字符串 $t$ 连续出现 $k$ 次，则可以用 $k(t)$ 进行说明。如 `ABABAB` 可以缩成 `3(AB)`。当然，重复缩短是允许的，如 `ABABABAAAAAAABABABAAAAAA` 可以缩成 `2(3(AB)6(A))`。\n\n现在，小明想知道，对于给定的字符串，最短可以缩成什么样子。\n\n**注意：有多个最优方案时，输出其中字典序最大的。( thanks to @Dilute. )**", "inputFormat": "输入仅一行，为给定的字符串。", "outputFormat": "输出仅一行，为经过缩短操作后的字符串。", "hint": "【数据范围】\n\n对于 $100\\%$ 的数据，字符串的长度 $L \\le 100$。数据存在一定梯度。", "locale": "zh-CN", "translations": {"en": {"title": "Secret File", "background": "", "description": "One day, the intelligence agency obtained a secret file. Its content is an encrypted string consisting entirely of uppercase letters. The director, Xiaoming, wants to send it to his old friend Xiaoliu on the mysterious \"xx\" continent in the Far East for decryption. However, if the string is too long, transmission takes too much time and is unsafe, so Xiaoming wants to shorten it as much as possible.\n\nHe sets the following shortening rule: If a string t appears consecutively k times, it can be represented as k(t). For example, ABABAB can be shortened to 3(AB). Repeated (nested) shortening is allowed. For example, ABABABAAAAAAABABABAAAAAA can be shortened to 2(3(AB)6(A)).\n\nNow, given the string, determine the shortest possible result after applying the shortening rule.\n\nNote: If there are multiple optimal answers, output the lexicographically largest one (thanks to @Dilute.).", "inputFormat": "A single line containing the given string. The string consists only of uppercase letters.", "outputFormat": "A single line containing the string after shortening.", "hint": "Constraints.\n\n- For 100% of the testdata, the string length $L \\le 100$.\n- The testdata has certain gradation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "秘密文件", "background": null, "description": "某天，情报局得到了一份秘密文件。文件的内容是加密后的全部由大写字母组成字符串。情报局局长小明想将其发送给远在东方神秘的 xx 大陆上的老朋友小刘来解密。然而若字符串太长，则需要很长的发送时间，太不安全了，因此小明想尽量将其缩短。于是小明制定了这样一个缩短规则：若一个字符串 $t$ 连续出现 $k$ 次，则可以用 $k(t)$ 进行说明。如 `ABABAB` 可以缩成 `3(AB)`。当然，重复缩短是允许的，如 `ABABABAAAAAAABABABAAAAAA` 可以缩成 `2(3(AB)6(A))`。\n\n现在，小明想知道，对于给定的字符串，最短可以缩成什么样子。\n\n**注意：有多个最优方案时，输出其中字典序最大的。( thanks to @Dilute. )**", "inputFormat": "输入仅一行，为给定的字符串。", "outputFormat": "输出仅一行，为经过缩短操作后的字符串。", "hint": "【数据范围】\n\n对于 $100\\%$ 的数据，字符串的长度 $L \\le 100$。数据存在一定梯度。", "locale": "zh-CN"}}}
{"pid": "P2401", "type": "P", "difficulty": 4, "samples": [["5 2", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "福建省历届夏令营"], "title": "不等数列", "background": "", "description": "将 $1$ 到 $n$ 任意排列，然后在排列的每两个数之间根据他们的大小关系插入`>` 和 `<`。问在所有排列中，有多少个排列恰好有 $k$ 个 `<`。答案对 $2015$ 取模。\n\n注：$1 \\sim n$ 的排列指的是 $1 \\sim n$ 这 $n$ 个数各出现且仅出现一次的数列。", "inputFormat": "一行两个整数，表示 $n$ 和 $k$。", "outputFormat": "一个整数表示答案。\n", "hint": "对于 $30\\%$ 的数据，$n\\leq 10$；\n\n对于 $100\\%$ 的数据，$0\\leq k<n\\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Inequality Sequence", "background": "", "description": "Take any permutation of $1$ to $n$, and then, between every two adjacent numbers in the permutation, insert `>` or `<` according to their relative value. Among all permutations, how many permutations have exactly $k$ symbols `<$`? The answer is taken modulo $2015$.\n\nNote: A permutation of $1 \\sim n$ refers to a sequence in which each of the $n$ numbers from $1 \\sim n$ appears exactly once.", "inputFormat": "A single line with two integers, representing $n$ and $k$.", "outputFormat": "A single integer representing the answer.", "hint": "For $30\\%$ of the testdata, $n \\leq 10$.\n\nFor $100\\%$ of the testdata, $0 \\leq k < n \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不等数列", "background": "", "description": "将 $1$ 到 $n$ 任意排列，然后在排列的每两个数之间根据他们的大小关系插入`>` 和 `<`。问在所有排列中，有多少个排列恰好有 $k$ 个 `<`。答案对 $2015$ 取模。\n\n注：$1 \\sim n$ 的排列指的是 $1 \\sim n$ 这 $n$ 个数各出现且仅出现一次的数列。", "inputFormat": "一行两个整数，表示 $n$ 和 $k$。", "outputFormat": "一个整数表示答案。\n", "hint": "对于 $30\\%$ 的数据，$n\\leq 10$；\n\n对于 $100\\%$ 的数据，$0\\leq k<n\\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2402", "type": "P", "difficulty": 5, "samples": [["3 4 \n7 2 \n0 4 \n2 6 \n1 2 40 \n3 2 70 \n2 3 90 \n1 3 120\n", "110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["福建省历届夏令营", "网络流"], "title": "奶牛隐藏", "background": "这本是一个非常简单的问题，然而奶牛们由于下雨已经非常混乱，无法完成这一计算，于是这个任务就交给了你。(奶牛混乱的原因看题目描述)\n", "description": "在一个农场里有 $n$ 块田地。某天下午，有一群牛在田地里吃草，他们分散在农场的诸多田地上，农场由 $m$ 条无向的路连接，每条路有不同的长度。\n\n突然，天降大雨，奶牛们非常混乱，想要快点去躲雨。已知每个田地都建立有一个牛棚，但是每个牛棚只能容纳一定数量的牛躲雨，如果超过这个数量，那多出的牛只能去别的田地躲雨。奶牛们每移动 $1$ 的距离花费 $1$ 时间，奶牛们想知道它们全部都躲进牛棚，最少需要多少时间。(即最后一头奶牛最少要花多久才能躲进牛棚)。\n", "inputFormat": "第一行有两个整数，分别代表田地数 $n$ 和道路数 $m$。\n\n接下来 $n$ 行，每行两个整数，第 $(i + 1)$ 行的整数 $s_i, p_i$ 分别表示第 $i$ 块田地的牛的数量以及该田地的牛棚最多可以容纳多少牛。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，代表存在一条长度为 $w$ 的连接 $u$ 和 $v$ 的道路。\n", "outputFormat": "输出一行一个整数表示所有奶牛全都躲进牛棚所用的最少时间。如果无法使全部奶牛都躲进牛棚，输出 $-1$。\n", "hint": "#### 样例输入输出 1 解释\n\n$1$ 号点的两只牛直接躲进 $1$ 号牛棚，剩下的 $5$ 只中，$4$ 只跑去 $2$ 号点，还有一只沿 $1 \\to 2 \\to 3$ 躲进 $3$ 号点, $3$ 号点的 $2$ 只牛也直接躲进去，这样最慢的牛花费的时间是 $110$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n- $1 \\leq n \\leq 200$，$1 \\leq m \\leq 1500$。\n- $1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^{15}$，$1 \\leq s_i, p_i \\leq 10^{16}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Cow Hiding", "background": "This was supposed to be a very simple problem. However, the cows got very confused because of the rain and cannot finish the calculation, so the task is handed to you. (For the reason the cows are confused, see the problem description.)", "description": "There are $n$ fields on a farm. One afternoon, a herd of cows is grazing in the fields. They are spread across many fields of the farm, which are connected by $m$ undirected roads, each with a different length.\n\nSuddenly, heavy rain falls. The cows are very confused and want to find shelter quickly. It is known that each field has a barn, but each barn can only hold a limited number of cows. If the number of cows exceeds this capacity, the extra cows must go to other fields to shelter. Moving a distance of $1$ costs time $1$. The cows want to know the minimum time needed for all of them to get into barns, i.e., the minimum time the last cow needs to get into a barn.", "inputFormat": "- The first line contains two integers, the number of fields $n$ and the number of roads $m$.\n- The next $n$ lines each contain two integers. On the $(i + 1)$-th line, the integers $s_i, p_i$ denote the number of cows in field $i$ and the maximum capacity of the barn at that field, respectively.\n- The next $m$ lines each contain three integers $u, v, w$, indicating there is an undirected road of length $w$ connecting $u$ and $v$.", "outputFormat": "Output a single integer, the minimum time required for all cows to get into barns. If it is impossible for all cows to find shelter, output $-1$.", "hint": "Sample Input/Output 1 Explanation:\n\nThe two cows at node $1$ go directly into barn $1$. Among the remaining $5$ cows, $4$ run to node $2$, and one goes along $1 \\to 2 \\to 3$ to get into barn $3$. The $2$ cows at node $3$ also go directly into its barn. In this arrangement, the slowest cow spends time $110$.\n\nConstraints:\n\nFor $100\\%$ of the data, it is guaranteed that:\n- $1 \\leq n \\leq 200$, $1 \\leq m \\leq 1500$.\n- $1 \\leq u, v \\leq n$, $1 \\leq w \\leq 10^{15}$, $1 \\leq s_i, p_i \\leq 10^{16}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "奶牛隐藏", "background": "这本是一个非常简单的问题，然而奶牛们由于下雨已经非常混乱，无法完成这一计算，于是这个任务就交给了你。(奶牛混乱的原因看题目描述)\n", "description": "在一个农场里有 $n$ 块田地。某天下午，有一群牛在田地里吃草，他们分散在农场的诸多田地上，农场由 $m$ 条无向的路连接，每条路有不同的长度。\n\n突然，天降大雨，奶牛们非常混乱，想要快点去躲雨。已知每个田地都建立有一个牛棚，但是每个牛棚只能容纳一定数量的牛躲雨，如果超过这个数量，那多出的牛只能去别的田地躲雨。奶牛们每移动 $1$ 的距离花费 $1$ 时间，奶牛们想知道它们全部都躲进牛棚，最少需要多少时间。(即最后一头奶牛最少要花多久才能躲进牛棚)。\n", "inputFormat": "第一行有两个整数，分别代表田地数 $n$ 和道路数 $m$。\n\n接下来 $n$ 行，每行两个整数，第 $(i + 1)$ 行的整数 $s_i, p_i$ 分别表示第 $i$ 块田地的牛的数量以及该田地的牛棚最多可以容纳多少牛。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，代表存在一条长度为 $w$ 的连接 $u$ 和 $v$ 的道路。\n", "outputFormat": "输出一行一个整数表示所有奶牛全都躲进牛棚所用的最少时间。如果无法使全部奶牛都躲进牛棚，输出 $-1$。\n", "hint": "#### 样例输入输出 1 解释\n\n$1$ 号点的两只牛直接躲进 $1$ 号牛棚，剩下的 $5$ 只中，$4$ 只跑去 $2$ 号点，还有一只沿 $1 \\to 2 \\to 3$ 躲进 $3$ 号点, $3$ 号点的 $2$ 只牛也直接躲进去，这样最慢的牛花费的时间是 $110$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n- $1 \\leq n \\leq 200$，$1 \\leq m \\leq 1500$。\n- $1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^{15}$，$1 \\leq s_i, p_i \\leq 10^{16}$。\n", "locale": "zh-CN"}}}
{"pid": "P2403", "type": "P", "difficulty": 5, "samples": [["10 7 7\n2 2 1\n2 4 2\n1 7 2\n2 7 3\n4 2 2\n4 4 1\n6 7 3\n7 7 1\n7 5 2\n5 2 1", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2010", "各省省选", "山东", "拓扑排序", "强连通分量", "Tarjan"], "title": "[SDOI2010] 所驼门王的宝藏", "background": "", "description": "在宽广的非洲荒漠中，生活着一群勤劳勇敢的羊驼家族。被族人恭称为“先知”的 AlpacaL.Sotomon 是这个家族的领袖，外人也称其为“所驼门王”。所驼门王毕生致力于维护家族的安定与和谐，他曾亲自率军粉碎河蟹帝国主义的野蛮侵略，为族人立下赫赫战功。所驼门王一生财宝无数，但因其生性节俭低调，他将财宝埋藏在自己设计的地下宫殿里，这也是今天 Henry Curtis 故事的起点。Henry 是一个爱财如命的贪婪家伙，而又非常聪明，他费尽心机谋划了这次盗窃行动，破解重重机关后来到这座地下宫殿前。\n\n整座宫殿呈矩阵状，由 $R \\times C$ 间矩形宫室组成，其中有 $N$ 间宫室里埋藏着宝藏，称作藏宝宫室。宫殿里外、相邻宫室间都由坚硬的实体墙阻隔，由一间宫室到达另一间只能通过所驼门王独创的移动方式——传送门。所驼门王为这 $N$ 间藏宝宫室每间都架设了一扇传送门，没有宝藏的宫室不设传送门，所有的宫室传送门分为三种：\n\n1. “横天门”：由该门可以传送到同行的任一宫室；\n2. “纵寰门”：由该门可以传送到同列的任一宫室；\n3. “任意门”：由该门可以传送到以该门所在宫室为中心周围 $8$ 格中任一宫室（如果目标宫室存在的话）。\n\n深谋远虑的 Henry 当然事先就搞到了所驼门王当年的宫殿招标册，书册上详细记录了每扇传送门所属宫室及类型。而且，虽然宫殿内外相隔，但他自行准备了一种便携式传送门，可将自己传送到殿内任意一间宫室开始寻宝，并在任意一间宫室结束后传送出宫。整座宫殿只许进出一次，且便携门无法进行宫室之间的传送。不过好在宫室内传送门的使用没有次数限制，每间宫室也可以多次出入。\n\n现在 Henry 已经打开了便携门，即将选择一间宫室进入。为得到尽多宝藏，他希望安排一条路线，使走过的不同藏宝宫室尽可能多。请你告诉 Henry 这条路线最多行经不同藏宝宫室的数目。", "inputFormat": "第一行给出三个正整数 $N,R,C$。\n\n以下 $N$ 行，每行给出一扇传送门的信息，包含三个正整数 $x_i,y_i,T_i$，表示该传送门设在位于第 $x_i$ 行第 $y_i$ 列的藏宝宫室，类型为 $T_i$。$T_i$ 是一个 $1 \\sim 3$ 间的整数，$1$ 表示可以传送到第 $x_i$ 行任意一列的“横天门”，$2$ 表示可以传送到任意一行第 $y_i$ 列的“纵寰门”，$3$ 表示可以传送到周围 $8$ 格宫室的“任意门”。\n\n保证 $1 \\le x_i \\le R$，$1 \\le y_i \\le C$，所有的传送门位置互不相同。", "outputFormat": "输出只有一个正整数，表示你确定的路线所经过不同藏宝宫室的最大数目。\n", "hint": "数据规模和约定：\n\n![](https://cdn.luogu.com.cn/upload/pic/1594.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] The Treasure of the King of Sotomon", "background": "", "description": "In the vast African desert lives a hardworking and brave alpaca clan. AlpacaL.Sotomon, respectfully called the “Prophet” by his people, is the leader of the clan and is known to outsiders as the “King of Sotomon.” He devoted his life to maintaining the clan’s peace and harmony, and once personally led his army to crush the savage invasion of the River Crab imperialists, earning great merit. The King of Sotomon amassed countless treasures in his lifetime, but being frugal and low-key by nature, he buried them in an underground palace of his own design. This is where the story of Henry Curtis begins. Henry is a greedy yet shrewd man who meticulously planned this heist and, after overcoming numerous traps, arrived at the entrance of the underground palace.\n\nThe palace is arranged in a matrix of $R \\times C$ rectangular chambers. Treasures are buried in $N$ of these chambers, which are called treasure chambers. The palace is enclosed by solid walls, and adjacent chambers are separated by walls as well. One can move from one chamber to another only through a unique transportation method invented by the King of Sotomon: teleportation gates. Each of the $N$ treasure chambers is equipped with exactly one teleportation gate; chambers without treasures have no gates. All gates fall into one of three types:\n\n1. “Horizontal Gate”: from this gate, one can teleport to any chamber in the same row.\n2. “Vertical Gate”: from this gate, one can teleport to any chamber in the same column.\n3. “Any Gate”: from this gate, one can teleport to any of the 8 neighboring chambers around the current chamber (if the target chamber exists).\n\nBeing far-sighted, Henry had already obtained the palace’s original construction tender book, which records in detail the location and type of every teleportation gate. Although the palace is sealed from the outside, Henry has prepared a portable gate that can teleport him into any chamber to start his search and can teleport him out from any chamber after he finishes. He may enter the palace once and exit once in total, and the portable gate cannot be used to move between chambers. Fortunately, in-palace teleportation gates can be used without limit, and any chamber may be entered and left multiple times.\n\nNow that Henry has opened his portable gate and is about to choose a chamber to enter, he wants to plan a route that visits as many distinct treasure chambers as possible. Please tell Henry the maximum number of distinct treasure chambers that such a route can visit.", "inputFormat": "The first line contains three positive integers $N, R, C$.\n\nEach of the following $N$ lines describes a teleportation gate with three positive integers $x_i, y_i, T_i$, meaning there is a gate in the treasure chamber at row $x_i$, column $y_i$, and its type is $T_i$. $T_i$ is an integer between $1$ and $3$: $1$ means a “Horizontal Gate” that can teleport to any column in row $x_i$, $2$ means a “Vertical Gate” that can teleport to any row in column $y_i$, and $3$ means an “Any Gate” that can teleport to any of the 8 neighboring chambers.\n\nIt is guaranteed that $1 \\le x_i \\le R$, $1 \\le y_i \\le C$, and all gate positions are distinct.", "outputFormat": "Output a single positive integer: the maximum number of distinct treasure chambers that your determined route can visit.", "hint": "Constraints and Conventions:\n\n![](https://cdn.luogu.com.cn/upload/pic/1594.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 所驼门王的宝藏", "background": "", "description": "在宽广的非洲荒漠中，生活着一群勤劳勇敢的羊驼家族。被族人恭称为“先知”的 AlpacaL.Sotomon 是这个家族的领袖，外人也称其为“所驼门王”。所驼门王毕生致力于维护家族的安定与和谐，他曾亲自率军粉碎河蟹帝国主义的野蛮侵略，为族人立下赫赫战功。所驼门王一生财宝无数，但因其生性节俭低调，他将财宝埋藏在自己设计的地下宫殿里，这也是今天 Henry Curtis 故事的起点。Henry 是一个爱财如命的贪婪家伙，而又非常聪明，他费尽心机谋划了这次盗窃行动，破解重重机关后来到这座地下宫殿前。\n\n整座宫殿呈矩阵状，由 $R \\times C$ 间矩形宫室组成，其中有 $N$ 间宫室里埋藏着宝藏，称作藏宝宫室。宫殿里外、相邻宫室间都由坚硬的实体墙阻隔，由一间宫室到达另一间只能通过所驼门王独创的移动方式——传送门。所驼门王为这 $N$ 间藏宝宫室每间都架设了一扇传送门，没有宝藏的宫室不设传送门，所有的宫室传送门分为三种：\n\n1. “横天门”：由该门可以传送到同行的任一宫室；\n2. “纵寰门”：由该门可以传送到同列的任一宫室；\n3. “任意门”：由该门可以传送到以该门所在宫室为中心周围 $8$ 格中任一宫室（如果目标宫室存在的话）。\n\n深谋远虑的 Henry 当然事先就搞到了所驼门王当年的宫殿招标册，书册上详细记录了每扇传送门所属宫室及类型。而且，虽然宫殿内外相隔，但他自行准备了一种便携式传送门，可将自己传送到殿内任意一间宫室开始寻宝，并在任意一间宫室结束后传送出宫。整座宫殿只许进出一次，且便携门无法进行宫室之间的传送。不过好在宫室内传送门的使用没有次数限制，每间宫室也可以多次出入。\n\n现在 Henry 已经打开了便携门，即将选择一间宫室进入。为得到尽多宝藏，他希望安排一条路线，使走过的不同藏宝宫室尽可能多。请你告诉 Henry 这条路线最多行经不同藏宝宫室的数目。", "inputFormat": "第一行给出三个正整数 $N,R,C$。\n\n以下 $N$ 行，每行给出一扇传送门的信息，包含三个正整数 $x_i,y_i,T_i$，表示该传送门设在位于第 $x_i$ 行第 $y_i$ 列的藏宝宫室，类型为 $T_i$。$T_i$ 是一个 $1 \\sim 3$ 间的整数，$1$ 表示可以传送到第 $x_i$ 行任意一列的“横天门”，$2$ 表示可以传送到任意一行第 $y_i$ 列的“纵寰门”，$3$ 表示可以传送到周围 $8$ 格宫室的“任意门”。\n\n保证 $1 \\le x_i \\le R$，$1 \\le y_i \\le C$，所有的传送门位置互不相同。", "outputFormat": "输出只有一个正整数，表示你确定的路线所经过不同藏宝宫室的最大数目。\n", "hint": "数据规模和约定：\n\n![](https://cdn.luogu.com.cn/upload/pic/1594.png)\n", "locale": "zh-CN"}}}
{"pid": "P2404", "type": "P", "difficulty": 2, "samples": [["7\n", "1+1+1+1+1+1+1\n1+1+1+1+1+2\n1+1+1+1+3\n1+1+1+2+2\n1+1+1+4\n1+1+2+3\n1+1+5\n1+2+2+2\n1+2+4\n1+3+3\n1+6\n2+2+3\n2+5\n3+4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "自然数的拆分问题", "background": "", "description": "任何一个大于 $1$ 的自然数 $n$，总可以拆分成若干个小于 $n$ 的自然数之和。现在给你一个自然数 $n$，要求你求出 $n$ 的拆分成一些数字的和。每个拆分后的序列中的数字从小到大排序。然后你需要输出这些序列，其中字典序小的序列需要优先输出。\n", "inputFormat": "输入：待拆分的自然数 $n$。\n", "outputFormat": "输出：若干数的加法式子。\n", "hint": "数据保证，$2\\leq n\\le 8$。", "locale": "zh-CN", "translations": {"en": {"title": "Decomposition of a Natural Number", "background": "", "description": "Any natural number $n$ greater than $1$ can be decomposed into a sum of several natural numbers that are each less than $n$. Given a natural number $n$, list all decompositions of $n$ into a sum of natural numbers, where every addend is less than $n$. In each decomposition, the numbers must be written in nondecreasing order. Then output these sequences in lexicographic order, with lexicographically smaller sequences printed first.", "inputFormat": "Input: a single natural number $n$.", "outputFormat": "Output: several addition expressions. Print one decomposition per line as $a_1+a_2+\\dots+a_k$, where each $a_i$ is a natural number less than $n$, the sequence is in nondecreasing order, and the lines are sorted in lexicographic order.", "hint": "Constraints: $2 \\leq n \\le 8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "自然数的拆分问题", "background": "", "description": "任何一个大于 $1$ 的自然数 $n$，总可以拆分成若干个小于 $n$ 的自然数之和。现在给你一个自然数 $n$，要求你求出 $n$ 的拆分成一些数字的和。每个拆分后的序列中的数字从小到大排序。然后你需要输出这些序列，其中字典序小的序列需要优先输出。\n", "inputFormat": "输入：待拆分的自然数 $n$。\n", "outputFormat": "输出：若干数的加法式子。\n", "hint": "数据保证，$2\\leq n\\le 8$。", "locale": "zh-CN"}}}
{"pid": "P2405", "type": "P", "difficulty": 6, "samples": [["99\r\n10\r\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "高精度", "2015", "线段树", "洛谷原创", "进制", "洛谷月赛"], "title": "non天平", "background": "non 最近正在为自己的体重而苦恼，他想称量自己的体重。于是，他找来一个天平与许多砝码。", "description": "砝码的重量均是 $n$ 的幂次，$n^1, n^2, n^3, n^4, n^5$ 的……non 想知道至少要多少个砝码才可以称出他的重量 $m$。注意砝码可以放左边，也可以放右边。", "inputFormat": "第一行一个正整数 $m$，表示 non 的重量；\n\n第二行一个正整数 $n$，表示砝码重量幂次的底。", "outputFormat": "一个整数表示最少所需的砝码数。\n", "hint": "### 数据范围及约定\n\n对于 $30\\%$ 的数据点，$m \\le 2^{63}-1$。\n\n对于 $100\\%$ 的数据点，$0 \\le m \\le 10^{10000}$，$0<n \\le 10000$。", "locale": "zh-CN", "translations": {"en": {"title": "non's Balance Scale", "background": "non has been worried about his weight recently, and he wants to weigh himself. So, he found a balance scale and many weights.", "description": "The weights each have masses that are powers of $n$: $n^1, n^2, n^3, n^4, n^5$, and so on. non wants to know the minimum number of weights needed to measure his weight $m$. Note that weights can be placed on either the left or the right pan.", "inputFormat": "The first line contains a non-negative integer $m$, representing non's weight.\n\nThe second line contains a positive integer $n$, representing the base of the powers for the weights.", "outputFormat": "Output a single integer representing the minimum number of weights required.", "hint": "### Constraints\n\nFor $30\\%$ of the testdata, $m \\le 2^{63} - 1$.\n\nFor $100\\%$ of the testdata, $0 \\le m \\le 10^{10000}$, $0 < n \\le 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "non天平", "background": "non 最近正在为自己的体重而苦恼，他想称量自己的体重。于是，他找来一个天平与许多砝码。", "description": "砝码的重量均是 $n$ 的幂次，$n^1, n^2, n^3, n^4, n^5$ 的……non 想知道至少要多少个砝码才可以称出他的重量 $m$。注意砝码可以放左边，也可以放右边。", "inputFormat": "第一行一个正整数 $m$，表示 non 的重量；\n\n第二行一个正整数 $n$，表示砝码重量幂次的底。", "outputFormat": "一个整数表示最少所需的砝码数。\n", "hint": "### 数据范围及约定\n\n对于 $30\\%$ 的数据点，$m \\le 2^{63}-1$。\n\n对于 $100\\%$ 的数据点，$0 \\le m \\le 10^{10000}$，$0<n \\le 10000$。", "locale": "zh-CN"}}}
{"pid": "P2406", "type": "P", "difficulty": 4, "samples": [["3 60", "12 15"], ["200 20000\n300 30000\n400 40000", "800 5000\n1200 7500\n1600 10000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "最小和", "background": "RSA 算法基于一个十分简单的数论事实：将两个大素数相乘十分容易，但是想要对其乘积进行因式分解却极其困难，因此可以将乘积公开作为加密密钥。所以今天只有短的 RSA 密钥才可能被强力方式破解。", "description": "已知 $a,b$ 是正整数且 $a \\leq b$。\n\n求满足条件且 $x+y$ 的值最小的 $x,y$。\n\n条件：\n\n- $\\gcd(x,y) = a$；\n- $\\mathrm{lcm}(x,y) = b$；\n- $x \\leq y$。", "inputFormat": "多组数据，EOF 判断结束。\n\n共有不超过 $10^3$ 行，每行两个数 $a,b$。", "outputFormat": "输出和输入文件行数相同，每行两个数 $x,y$，以一个半角空格隔开。", "hint": "$3 \\leq a, b < 2^{63}$。\n\nEOF 结束，没有代表行数的 $n$，第一行就是数据。\n\n数据随机生成。", "locale": "zh-CN", "translations": {"en": {"title": "Minimum Sum", "background": "The RSA algorithm is based on a very simple number-theoretic fact: multiplying two large primes is easy, but factoring their product is extremely difficult. Therefore, the product can be published as an encryption key. As a result, only short RSA keys can be cracked by brute force today.", "description": "Given that $a, b$ are positive integers with $a \\leq b$.\n\nFind $x, y$ that satisfy the conditions and minimize $x + y$.\n\nConditions:\n- $\\gcd(x, y) = a$;\n- $\\mathrm{lcm}(x, y) = b$;\n- $x \\leq y$.", "inputFormat": "Multiple test cases, terminated by EOF.\n\nThere are at most $10^3$ lines, each containing two numbers $a, b$.", "outputFormat": "Output the same number of lines as in the input. For each line, output two numbers $x, y$, separated by a single space.", "hint": "$3 \\leq a, b < 2^{63}$.\n\nTerminated by EOF; there is no line count $n$, and the first line is testdata.\n\nThe testdata are randomly generated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小和", "background": "RSA 算法基于一个十分简单的数论事实：将两个大素数相乘十分容易，但是想要对其乘积进行因式分解却极其困难，因此可以将乘积公开作为加密密钥。所以今天只有短的 RSA 密钥才可能被强力方式破解。", "description": "已知 $a,b$ 是正整数且 $a \\leq b$。\n\n求满足条件且 $x+y$ 的值最小的 $x,y$。\n\n条件：\n\n- $\\gcd(x,y) = a$；\n- $\\mathrm{lcm}(x,y) = b$；\n- $x \\leq y$。", "inputFormat": "多组数据，EOF 判断结束。\n\n共有不超过 $10^3$ 行，每行两个数 $a,b$。", "outputFormat": "输出和输入文件行数相同，每行两个数 $x,y$，以一个半角空格隔开。", "hint": "$3 \\leq a, b < 2^{63}$。\n\nEOF 结束，没有代表行数的 $n$，第一行就是数据。\n\n数据随机生成。", "locale": "zh-CN"}}}
{"pid": "P2407", "type": "P", "difficulty": 5, "samples": [["3 4\nTST.\nS.TT\nTSST\n", "o-o-o o\n|   |  \no o o-o\n|     |\no-o-o-o\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "山东", "最短路"], "title": "[SDOI2009] 地图复原", "background": null, "description": "很久以前，有一个传说中的“EWF”部族，他们世代生活在一个 $N×M$ 的矩形大地上。虽然，生活的地区有高山、有沼泽，但通过勤劳勇敢，渐渐地，他们在自己的地盘上修筑了一条回路。\n\n后来，“EWF”部族神秘地消失了。不过，考古学家在那片他们曾经生活过的地方找到了一份地图。地图是 $N\\times M$ 的矩阵，左上角的坐标为 $(0, 0)$，右下角的坐标为 $(N, M)$。矩阵中的每个格子，表示高山、沼泽、平地、房屋或是道路其中之一。如果一个格子表示道路，那么经过这个格子的道路要么是直走，要么是拐弯。如下图，左边2幅表示直走格子的，右边4幅表示需要拐弯的格子。一个表示道路的格子只能表示下列情况之一。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1588.png) \n\n可是，由于地图的年代久远，考古学家虽然能分清一个格子代表的地形，可对于道路的标记，考古学家们只能分清这一格是表示直走的还是拐弯的。现在，他们求助于你，希望你能帮助他们复原这份“EWF”部族的地图。", "inputFormat": "输入文件 `recover.in` 的第一行包含两个用空格分隔的正整数 $N$ 和 $M$，分别表示地图的高和长。\n\n接下来一个 $N$ 行 $M$ 列的矩阵描述地图，矩阵中没有多余字符。\n\n大写 `S`表示直走的道路，大写 `T` 表示拐弯的道路，点 `.` 表示高山、沼泽、平地和房屋。", "outputFormat": "输出文件 `recover.out` 包含 $2N-1$ 行，每行 $2M-1$ 个字符，描述了这条回路。\n\n所有第 $2i+1$ 行的 $2j+1$ 个字符为小写字母 `o`，表示了矩阵的第 $i$ 行第 $j$ 列的格子的中心 $(i, j)$。\n\n若回路包含了 $(i, j )$ 到 $(i, j+1)$ 或 $ (i, j+1)$ 到 $(i, j)$ 的一条路径，则第 $2i+1$ 行的第 $2j+2$ 个字符为减号 `-`（ASCII 码为 $45$）；\n\n若回路包含了 $(i, j)$ 到 $ (i+1, j)$ 或 $(i+1, j)$ 到 $(i, j)$ 的一条路径，则第 $2i+2$ 行的第 $ 2j+1$ 个字符为竖线 `|`（ASCII码为 $124$）。\n\n其它以上未说明位置上的字符为空格（ASCII 码为 $32$）。\n\n输入数据保证至少存在一个合法解，故你的输出应有且仅有一条回路。如果存在多组答案，请输出任意一组。", "hint": "对于 $20\\%$ 的数据，有 $N \\le 10$；\n\n对于 $40\\%$ 的数据，有 $1 \\le N, M \\le 80$；\n\n对于 $40\\%$ 的数据，输入没有 `.`，且 $N, M > 10$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le N, M \\le 800$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] Map Restoration", "background": "", "description": "Long ago, there was a legendary tribe called \"EWF\" who lived on an $N \\times M$ rectangular land. Although there were mountains and swamps, through hard work and courage, they eventually built a loop on their territory.\n\nLater, the \"EWF\" tribe mysteriously disappeared. However, archaeologists found a map in the place where they once lived. The map is an $N \\times M$ matrix, with the top-left coordinate at $(0, 0)$ and the bottom-right coordinate at $(N, M)$. Each cell represents one of the following: mountain, swamp, plain, house, or road. If a cell represents a road, then the road passing through this cell is either straight or turning. As shown below, the two on the left are straight cells, and the four on the right are turning cells. A cell that represents a road can only be one of the cases below.\n\n![](https://cdn.luogu.com.cn/upload/pic/1588.png)\n\nHowever, due to the age of the map, while archaeologists can identify the type of terrain each cell represents, for road markings they can only distinguish whether a cell is straight or turning. Now they ask for your help to restore the \"EWF\" tribe’s map.", "inputFormat": "The first line of the input file recover.in contains two positive integers $N$ and $M$ separated by a space, representing the height and width of the map.\n\nThen follows an $N$-row, $M$-column matrix describing the map, with no extra characters.\n\nUppercase \"S\" denotes a straight road cell, uppercase \"T\" denotes a turning road cell, and \".\" denotes mountain, swamp, plain, or house.", "outputFormat": "The output file recover.out contains $2N - 1$ lines, each with $2M - 1$ characters, describing the loop.\n\nFor all positions at row $2i + 1$, column $2j + 1$, the character is the lowercase letter \"o\", representing the center $(i, j)$ of the cell in row $i$, column $j$ of the matrix.\n\nIf the loop contains a path from $(i, j)$ to $(i, j + 1)$ or from $(i, j + 1)$ to $(i, j)$, then the character at row $2i + 1$, column $2j + 2$ is a hyphen \"-\" (ASCII code 45).\n\nIf the loop contains a path from $(i, j)$ to $(i + 1, j)$ or from $(i + 1, j)$ to $(i, j)$, then the character at row $2i + 2$, column $2j + 1$ is a vertical bar \"|\" (ASCII code 124).\n\nAll other positions not mentioned above are spaces (ASCII code 32).\n\nThe input guarantees that there exists at least one valid solution, so your output should contain exactly one loop. If multiple answers exist, output any one of them.", "hint": "- For 20% of the testdata, $N \\le 10$.\n- For 40% of the testdata, $1 \\le N, M \\le 80$.\n- For 40% of the testdata, the input contains no \".\", and $N, M > 10$.\n- For 100% of the testdata, $1 \\le N, M \\le 800$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] 地图复原", "background": null, "description": "很久以前，有一个传说中的“EWF”部族，他们世代生活在一个 $N×M$ 的矩形大地上。虽然，生活的地区有高山、有沼泽，但通过勤劳勇敢，渐渐地，他们在自己的地盘上修筑了一条回路。\n\n后来，“EWF”部族神秘地消失了。不过，考古学家在那片他们曾经生活过的地方找到了一份地图。地图是 $N\\times M$ 的矩阵，左上角的坐标为 $(0, 0)$，右下角的坐标为 $(N, M)$。矩阵中的每个格子，表示高山、沼泽、平地、房屋或是道路其中之一。如果一个格子表示道路，那么经过这个格子的道路要么是直走，要么是拐弯。如下图，左边2幅表示直走格子的，右边4幅表示需要拐弯的格子。一个表示道路的格子只能表示下列情况之一。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1588.png) \n\n可是，由于地图的年代久远，考古学家虽然能分清一个格子代表的地形，可对于道路的标记，考古学家们只能分清这一格是表示直走的还是拐弯的。现在，他们求助于你，希望你能帮助他们复原这份“EWF”部族的地图。", "inputFormat": "输入文件 `recover.in` 的第一行包含两个用空格分隔的正整数 $N$ 和 $M$，分别表示地图的高和长。\n\n接下来一个 $N$ 行 $M$ 列的矩阵描述地图，矩阵中没有多余字符。\n\n大写 `S`表示直走的道路，大写 `T` 表示拐弯的道路，点 `.` 表示高山、沼泽、平地和房屋。", "outputFormat": "输出文件 `recover.out` 包含 $2N-1$ 行，每行 $2M-1$ 个字符，描述了这条回路。\n\n所有第 $2i+1$ 行的 $2j+1$ 个字符为小写字母 `o`，表示了矩阵的第 $i$ 行第 $j$ 列的格子的中心 $(i, j)$。\n\n若回路包含了 $(i, j )$ 到 $(i, j+1)$ 或 $ (i, j+1)$ 到 $(i, j)$ 的一条路径，则第 $2i+1$ 行的第 $2j+2$ 个字符为减号 `-`（ASCII 码为 $45$）；\n\n若回路包含了 $(i, j)$ 到 $ (i+1, j)$ 或 $(i+1, j)$ 到 $(i, j)$ 的一条路径，则第 $2i+2$ 行的第 $ 2j+1$ 个字符为竖线 `|`（ASCII码为 $124$）。\n\n其它以上未说明位置上的字符为空格（ASCII 码为 $32$）。\n\n输入数据保证至少存在一个合法解，故你的输出应有且仅有一条回路。如果存在多组答案，请输出任意一组。", "hint": "对于 $20\\%$ 的数据，有 $N \\le 10$；\n\n对于 $40\\%$ 的数据，有 $1 \\le N, M \\le 80$；\n\n对于 $40\\%$ 的数据，输入没有 `.`，且 $N, M > 10$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le N, M \\le 800$。", "locale": "zh-CN"}}}
{"pid": "P2408", "type": "P", "difficulty": 6, "samples": [["5\naabaa", "11"], ["3\naba", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "线性数据结构", "后缀自动机 SAM", "后缀数组 SA"], "title": "不同子串个数", "background": "因为 NOI 被虐傻了，蒟蒻的 YJQ 准备来学习一下字符串，于是它碰到了这样一道题：\n", "description": "给你一个长为 $n$ 的字符串，求不同的子串的个数。\n\n我们定义两个子串不同，当且仅当有这两个子串长度不一样或者长度一样且有任意一位不一样。\n\n子串的定义：原字符串中连续的一段字符组成的字符串。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个字符表示给出的字符串。\n", "outputFormat": "一行一个整数，表示不一样的子串个数。\n", "hint": "### 提示\n\n请使用64位整数来进行输出。\n\n### 数据规模与约定\n- 对于 $30\\%$ 的数据，保证 $n\\le 1000$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\le 10^5$，字符串中只有小写英文字母。\n", "locale": "zh-CN", "translations": {"en": {"title": "Number of Distinct Substrings", "background": "After getting crushed by NOI, the \"ju ruo\" (rookie) YJQ decided to study strings and came across this problem.", "description": "Given a string of length $n$, find the number of distinct substrings.\n\nWe define two substrings to be different if and only if either their lengths are different, or their lengths are the same but there exists at least one position where they differ.\n\nA substring is defined as a contiguous segment of characters in the original string.", "inputFormat": "The first line contains an integer $n$.\n\nThe second line contains $n$ characters representing the given string.", "outputFormat": "Output a single integer in one line, representing the number of distinct substrings.", "hint": "Please use a 64-bit integer for the output.\n\nConstraints\n- For 30% of the testdata, $n \\le 1000$.\n- For 100% of the testdata, $1 \\leq n \\le 10^5$, and the string contains only lowercase English letters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不同子串个数", "background": "因为 NOI 被虐傻了，蒟蒻的 YJQ 准备来学习一下字符串，于是它碰到了这样一道题：\n", "description": "给你一个长为 $n$ 的字符串，求不同的子串的个数。\n\n我们定义两个子串不同，当且仅当有这两个子串长度不一样或者长度一样且有任意一位不一样。\n\n子串的定义：原字符串中连续的一段字符组成的字符串。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个字符表示给出的字符串。\n", "outputFormat": "一行一个整数，表示不一样的子串个数。\n", "hint": "### 提示\n\n请使用64位整数来进行输出。\n\n### 数据规模与约定\n- 对于 $30\\%$ 的数据，保证 $n\\le 1000$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\le 10^5$，字符串中只有小写英文字母。\n", "locale": "zh-CN"}}}
{"pid": "P2409", "type": "P", "difficulty": 4, "samples": [["3 10\n4 1 3 4 5\n3 1 7 9\n4 1 2 3 5\n", "3 4 5 5 6 6 7 7 7 7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2016", "洛谷原创", "洛谷月赛"], "title": "Y的积木", "background": "Y 是个大建筑师，他总能用最简单的积木拼出最有创意的造型。", "description": "Y 手上有 $n$ 盒积木，每个积木有个重量。现在他想从每盒积木中拿一块积木，放在一起，这一堆积木的重量为每块积木的重量和。现在他想知道重量和最小的 $k$ 种取法的重量分别是多少。（只要任意更换一块积木，就视为一种不同的取法。如果多种取法重量总和一样，我们需要输出多次。）", "inputFormat": "第一行输入两个整数，$n,k$，意义如题目所描述。\n\n每组数据接下来的 $n$ 行，第一个整数为 $m_i$，表示第 $i$ 盒积木的数量，在同一行有 $m_i$ 个整数，分别表示每个积木的重量。", "outputFormat": "一行，重量最小的 $k$ 种取法的重量，要求对于每个数据，从小到大输出。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$2 \\le m_i \\le 10$，$1 \\le n \\le 10$。\n- 对于 $50\\%$ 的数据，$2 \\le m_i \\le 50$，$1 \\le n \\le 50$。\n- 对于 $100\\%$ 的数据，$2 \\le m_i \\le 100$，$1 \\le n \\le 100$，$1 \\le k \\le 10^4$，每个积木的重量为不超过 $100$ 的正整数，所有 $m_i$ 的积大于等于 $k$。\n\n本题不卡常。", "locale": "zh-CN", "translations": {"en": {"title": "Y's Blocks", "background": "Y is a great architect. He can always build the most creative shapes with the simplest blocks.", "description": "Y has $n$ boxes of blocks, and each block has a weight. He wants to pick one block from each box and put them together; the total weight of this pile is the sum of the weights of the chosen blocks. Now he wants to know the weights of the $k$ selections with the smallest total weights. (As long as you replace any single block, it is considered a different selection. If multiple selections have the same total weight, we should output that weight multiple times.)", "inputFormat": "The first line contains two integers, $n,k$, as described.\n\nIn the next $n$ lines, line $i$ starts with an integer $m_i$, the number of blocks in the $i$-th box. On the same line, there are $m_i$ integers, which are the weights of the blocks.", "outputFormat": "Output one line containing the weights of the $k$ selections with the smallest total weights, in nondecreasing order.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $2 \\le m_i \\le 10$, $1 \\le n \\le 10$.\n- For $50\\%$ of the testdata, $2 \\le m_i \\le 50$, $1 \\le n \\le 50$.\n- For $100\\%$ of the testdata, $2 \\le m_i \\le 100$, $1 \\le n \\le 100$, $1 \\le k \\le 10^4$, each block’s weight is a positive integer not exceeding $100$, and the product of all $m_i$ is at least $k$.\n\nThis problem does not stress constant factors.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Y的积木", "background": "Y 是个大建筑师，他总能用最简单的积木拼出最有创意的造型。", "description": "Y 手上有 $n$ 盒积木，每个积木有个重量。现在他想从每盒积木中拿一块积木，放在一起，这一堆积木的重量为每块积木的重量和。现在他想知道重量和最小的 $k$ 种取法的重量分别是多少。（只要任意更换一块积木，就视为一种不同的取法。如果多种取法重量总和一样，我们需要输出多次。）", "inputFormat": "第一行输入两个整数，$n,k$，意义如题目所描述。\n\n每组数据接下来的 $n$ 行，第一个整数为 $m_i$，表示第 $i$ 盒积木的数量，在同一行有 $m_i$ 个整数，分别表示每个积木的重量。", "outputFormat": "一行，重量最小的 $k$ 种取法的重量，要求对于每个数据，从小到大输出。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$2 \\le m_i \\le 10$，$1 \\le n \\le 10$。\n- 对于 $50\\%$ 的数据，$2 \\le m_i \\le 50$，$1 \\le n \\le 50$。\n- 对于 $100\\%$ 的数据，$2 \\le m_i \\le 100$，$1 \\le n \\le 100$，$1 \\le k \\le 10^4$，每个积木的重量为不超过 $100$ 的正整数，所有 $m_i$ 的积大于等于 $k$。\n\n本题不卡常。", "locale": "zh-CN"}}}
{"pid": "P2410", "type": "P", "difficulty": 6, "samples": [["2 2\n90 10\n20 80\n1 1\n1 1\n", "10\n01\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2009", "各省省选", "山东", "Special Judge", "最短路"], "title": "[SDOI2009] 最优图像", "background": "小 E 在好友小 W 的家中发现一幅神奇的图画，对此颇有兴趣。", "description": "这幅画可以被看做一个包含 $n \\times m$ 个像素的黑白图像，为了方便起见，我们用 $0$ 表示白色像素，$1$ 表示黑色像素。小 E 认为这幅图画暗藏玄机，因此他记录下了这幅图像中每行、每列的黑色像素数量，以回去慢慢研究其中的奥妙。\n\n有一天，小 W 不慎将图画打湿，原本的图像已经很难分辨。他十分着急，于是找来小 E，希望共同还原这幅图画。根据打湿后的图画，他们无法确定真正的图像，然而可以推测出每个像素原本是黑色像素的概率 $p_{i,j}\\%$。那么，一个完整的图像的出现概率就可以定义为:\n\n$$\\prod\\limits_{i = 1}^n \\prod\\limits_{j = 1}^{m} p_{i, j}\\% \\times [s_{i, j} = 1]$$\n\n其中 $s_{i,j}$ 表示在还原后的图像中，像素是白色($0$)还是黑色($1$)，$[s_{i, j} = 1]$ 表示若 $s_{i, j} = 1$，则该表达式的值为 $1$，否则为 $0$。换句话说，一个完整图像出现概率就等于其所有黑色像素的出现概率之积。显然，图像的黑色像素不能包含概率为 $0$ 的像素。\n\n然而，小 E 对此也无能为力。因此他们找到了会编程的小 F，也就是你，请你根据以上信息，告诉他们最有可能是原始图像的答案是什么。\n\n", "inputFormat": "第一行是两个整数 $n, m$，表示图像大小。\n\n第 $2$ 到第 $(n + 1)$ 行，每行 $m$ 个整数，第 $(i + 1)$ 行的第 $j$ 个整数 $p_{i, j}$ 表示第 $i$ 行第 $j$ 列的像素是黑色的概率。\n\n接下来一行有 $n$ 个整数，第  $i$ 个整数 $a_i$ 表示第 $i$ 行中黑色像素的个数。\n\n接下来一行有 $m$ 个整数，第 $i$ 个整数 $b_i$ 表示第 $i$ 列中黑色像素的个数。\n", "outputFormat": "**本题存在 Special Judge**。\n\n输出 $n$ 行每行一个长度为 $m$ 的只含字符 `0` 和字符 `1` 的字符串，表示答案。\n\n输入数据保证至少存在一个可能的图像。如果有多种最优图像，任意输出一种即可。\n", "hint": "#### 样例输入输出 1 解释\n\n共有两种可能的图像：\n\n```plain\n01\n10\n```\n```plain\n10\n01\n```\n前者的出现概率是 $0.1×0.2=0.02$，后者的出现概率是 $0.9×0.8=0.72$，故后者是最优图像。\n\n---\n\n#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n, m \\leq 5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 100$，$0 \\leq p_{i, j} \\leq 100$，$0 \\leq a_i \\leq m$，$0 \\leq b_i \\leq n$。\n\n---\n\n感谢 @[test12345](https://www.luogu.com.cn/user/23118) 提供 spj。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] Optimal Image", "background": "Xiao E found a magical picture at his friend Xiao W’s home and became very interested in it.", "description": "This picture can be regarded as a black-and-white image with $n \\times m$ pixels. For convenience, we use $0$ for white pixels and $1$ for black pixels. Xiao E believed the picture hid some secrets, so he recorded the number of black pixels in each row and each column to study later.\n\nOne day, Xiao W accidentally got the picture wet, and the original image became hard to recognize. Anxious, he asked Xiao E to help restore it. Based on the wet picture, they could not determine the exact image, but they could estimate the probability $p_{i, j}\\%$ that each pixel was originally black. Then, the occurrence probability of a complete image can be defined as:\n$$\\prod\\limits_{i = 1}^n \\prod\\limits_{j = 1}^{m} p_{i, j}\\% \\times [s_{i, j} = 1]$$\nHere $s_{i, j}$ denotes whether the pixel in the restored image is white ($0$) or black ($1$), and $[s_{i, j} = 1]$ means the value of this expression is $1$ if $s_{i, j} = 1$, and $0$ otherwise. In other words, the occurrence probability of a complete image equals the product of the probabilities of all its black pixels. Clearly, the set of black pixels in the image cannot include any pixel with probability $0$.\n\nHowever, Xiao E could not solve this either. So they turned to Xiao F, a programmer — that is, you. Please, based on the above information, tell them which image is the most likely original image.", "inputFormat": "The first line contains two integers $n, m$, denoting the size of the image.\n\nLines $2$ to $(n + 1)$ each contain $m$ integers. In the $(i + 1)$-th line, the $j$-th integer $p_{i, j}$ denotes the probability that the pixel in row $i$, column $j$ is black.\n\nThe next line contains $n$ integers. The $i$-th integer $a_i$ denotes the number of black pixels in row $i$.\n\nThe next line contains $m$ integers. The $i$-th integer $b_i$ denotes the number of black pixels in column $i$.", "outputFormat": "This problem uses a Special Judge.\n\nOutput $n$ lines, each containing a string of length $m$ consisting only of characters `0` and `1`, representing your answer.\n\nThe input guarantees that at least one valid image exists. If there are multiple optimal images, output any one of them.", "hint": "#### Explanation of Sample Input/Output 1\n\nThere are two possible images:\n\n```plain\n01\n10\n```\n```plain\n10\n01\n```\nThe occurrence probability of the former is $0.1×0.2=0.02$, and that of the latter is $0.9×0.8=0.72$, so the latter is the optimal image.\n\n---\n\n#### Constraints\n\n- For $20\\%$ of the testdata, $n, m \\leq 5$.\n- For $100\\%$ of the testdata, $1 \\leq n, m \\leq 100$, $0 \\leq p_{i, j} \\leq 100$, $0 \\leq a_i \\leq m$, $0 \\leq b_i \\leq n$.\n\n---\n\nThanks to @[test12345](https://www.luogu.com.cn/user/23118) for providing the spj.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] 最优图像", "background": "小 E 在好友小 W 的家中发现一幅神奇的图画，对此颇有兴趣。", "description": "这幅画可以被看做一个包含 $n \\times m$ 个像素的黑白图像，为了方便起见，我们用 $0$ 表示白色像素，$1$ 表示黑色像素。小 E 认为这幅图画暗藏玄机，因此他记录下了这幅图像中每行、每列的黑色像素数量，以回去慢慢研究其中的奥妙。\n\n有一天，小 W 不慎将图画打湿，原本的图像已经很难分辨。他十分着急，于是找来小 E，希望共同还原这幅图画。根据打湿后的图画，他们无法确定真正的图像，然而可以推测出每个像素原本是黑色像素的概率 $p_{i,j}\\%$。那么，一个完整的图像的出现概率就可以定义为:\n\n$$\\prod\\limits_{i = 1}^n \\prod\\limits_{j = 1}^{m} p_{i, j}\\% \\times [s_{i, j} = 1]$$\n\n其中 $s_{i,j}$ 表示在还原后的图像中，像素是白色($0$)还是黑色($1$)，$[s_{i, j} = 1]$ 表示若 $s_{i, j} = 1$，则该表达式的值为 $1$，否则为 $0$。换句话说，一个完整图像出现概率就等于其所有黑色像素的出现概率之积。显然，图像的黑色像素不能包含概率为 $0$ 的像素。\n\n然而，小 E 对此也无能为力。因此他们找到了会编程的小 F，也就是你，请你根据以上信息，告诉他们最有可能是原始图像的答案是什么。\n\n", "inputFormat": "第一行是两个整数 $n, m$，表示图像大小。\n\n第 $2$ 到第 $(n + 1)$ 行，每行 $m$ 个整数，第 $(i + 1)$ 行的第 $j$ 个整数 $p_{i, j}$ 表示第 $i$ 行第 $j$ 列的像素是黑色的概率。\n\n接下来一行有 $n$ 个整数，第  $i$ 个整数 $a_i$ 表示第 $i$ 行中黑色像素的个数。\n\n接下来一行有 $m$ 个整数，第 $i$ 个整数 $b_i$ 表示第 $i$ 列中黑色像素的个数。\n", "outputFormat": "**本题存在 Special Judge**。\n\n输出 $n$ 行每行一个长度为 $m$ 的只含字符 `0` 和字符 `1` 的字符串，表示答案。\n\n输入数据保证至少存在一个可能的图像。如果有多种最优图像，任意输出一种即可。\n", "hint": "#### 样例输入输出 1 解释\n\n共有两种可能的图像：\n\n```plain\n01\n10\n```\n```plain\n10\n01\n```\n前者的出现概率是 $0.1×0.2=0.02$，后者的出现概率是 $0.9×0.8=0.72$，故后者是最优图像。\n\n---\n\n#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n, m \\leq 5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 100$，$0 \\leq p_{i, j} \\leq 100$，$0 \\leq a_i \\leq m$，$0 \\leq b_i \\leq n$。\n\n---\n\n感谢 @[test12345](https://www.luogu.com.cn/user/23118) 提供 spj。", "locale": "zh-CN"}}}
{"pid": "P2411", "type": "P", "difficulty": 5, "samples": [["4 8 \n0 0 0 1 0 0 0 0 \n0 0 0 0 0 2 0 1 \n0 0 0 0 0 4 0 0 \n3 0 0 0 0 0 1 0 \n", "2\n6\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO"], "title": "[USACO07FEB] Silver Lilypad Pond S", "background": "", "description": "为了让奶牛们娱乐和锻炼，Famer John 建造了一个美丽的池塘。这个长方形的池子被分成了 $M \\times N$ 个方格（$1 \\le M,N \\le 30$）。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。\n\nBessie 正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。\n\nBessie 的舞步很像象棋中的马步：每次总是先横向移动一格，再纵向移动两格，或先纵向移动两格，再横向移动一格。最多时，Bessie 会有八个移动方向可供选择。\n\n约翰一直在观看 Bessie 的芭蕾练习，发现她有时候不能跳到终点，因为中间缺了一些荷叶。\n\n于是他想要添加几朵莲花来帮助 Bessie 完成任务。一贯节俭的 John 只想添加最少数量的莲花，当然，莲花不能放在石头上。\n\n请帮助 John确定必须要添加的莲花的最少数量。在添加莲花最少的基础上，确定 Bessie 从起点跳到目标需要的最少步数。最后，确定满足添加的莲花数量最少时，步数最少的路径条数。", "inputFormat": "第一行，输入两个用空格分开的整数：$M$ 和 $N$。\n\n第二行到 $M + 1$ 行：第 $i + 1$ 行有 $N$ 个用空格分开的整数，描述了池塘第 $i$ 行的状态：`0` 为水，`1` 为莲花，`2` 为岩石，`3` 为 Bessie 所在的起点，`4` 为 Bessie 想去的终点。", "outputFormat": "第一行，一个整数，表示需要添加的莲花的最少数目；如果无解，则输出 $-1$。\n\n第二行，一个整数，表示在添加莲花最少的基础上，贝西从起点跳到终点需要的最少步数；如果第一行是 $-1$，不输出这行。\n\n第三行，一个整数，表示在添加莲花最少的基础上，步数等于第二行输出的路径条数；如果第一行是 $-1$，不输出这行。", "hint": "池塘分成四行八列，贝西的起点在第四行第一列，想去的终点在第三行第六列，池塘里一共有五朵莲花和一块石头。\n\n最少要加两朵莲花，位置如 `x` 所示：\n\n```\n0 0 0 1 0 0 0 0    0 0 0 1 0 0 0 0 \n0 x 0 0 0 2 0 1    0 0 0 0 0 2 0 1 \n0 0 0 0 x 4 0 0    0 0 x 0 x 4 0 0 \n3 0 0 0 0 0 1 0    3 0 0 0 0 0 1 0 \n```\n\n贝西至少要跳六步，两种不同的跳法如下：\n\n```\n0 0 0 C 0 0 0 0    0 0 0 C 0 0 0 0 \n0 B 0 0 0 2 0 F    0 0 0 0 0 2 0 F \n0 0 0 0 D G 0 0    0 0 B 0 D G 0 0 \nA 0 0 0 0 0 E 0    A 0 0 0 0 0 E 0  \n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07FEB] Silver Lilypad Pond S", "background": "", "description": "To entertain and exercise the cows, Farmer John built a beautiful pond. This rectangular pond is divided into $M \\times N$ cells ($1 \\le M, N \\le 30$). Some cells are surprisingly sturdy lilypads, some cells are rocks, and the rest are just beautiful, pure, azure water.\n\nBessie is practicing ballet. She is standing on a lilypad and wants to jump to another lilypad. She can only jump from one lilypad to another; she cannot land in water or on rocks.\n\nBessie’s steps are like a knight’s moves in chess: each time she either moves one square horizontally and then two squares vertically, or two squares vertically and then one square horizontally. At most, Bessie has eight possible directions to move.\n\nJohn has been watching Bessie’s ballet practice and noticed that sometimes she cannot reach the destination because some lilypads are missing along the way.\n\nSo he wants to add a few lilypads to help Bessie complete the task. Being thrifty as always, John wants to add the minimum number of lilypads; of course, lilypads cannot be placed on rocks.\n\nPlease help John determine the minimum number of lilypads that must be added. Under the condition of adding the fewest lilypads, determine the minimum number of jumps Bessie needs to go from the start to the target. Finally, under the same minimum additions, determine the number of paths whose length equals that minimum number of jumps.", "inputFormat": "The first line contains two integers separated by a space: $M$ and $N$.\n\nLines $2$ through $M + 1$: the $(i + 1)$-th line contains $N$ integers separated by spaces, describing the $i$-th row of the pond: `0` for water, `1` for a lilypad, `2` for a rock, `3` for Bessie’s starting cell, and `4` for Bessie’s target cell.", "outputFormat": "The first line contains a single integer: the minimum number of lilypads that must be added; if there is no solution, output $-1$.\n\nThe second line contains a single integer: under the condition of adding the fewest lilypads, the minimum number of jumps Bessie needs from the start to the target; if the first line is $-1$, do not output this line.\n\nThe third line contains a single integer: under the condition of adding the fewest lilypads, the number of paths whose length equals the number in the second line; if the first line is $-1$, do not output this line.", "hint": "The pond has four rows and eight columns. Bessie’s start is at row 4, column 1, and her target is at row 3, column 6. There are five lilypads and one rock in the pond.\n\nAt least two lilypads need to be added, at the positions marked with `x`:\n\n```\n0 0 0 1 0 0 0 0    0 0 0 1 0 0 0 0 \n0 x 0 0 0 2 0 1    0 0 0 0 0 2 0 1 \n0 0 0 0 x 4 0 0    0 0 x 0 x 4 0 0 \n3 0 0 0 0 0 1 0    3 0 0 0 0 0 1 0 \n```\n\nBessie needs at least six jumps. Two different sequences of jumps are as follows:\n\n```\n0 0 0 C 0 0 0 0    0 0 0 C 0 0 0 0 \n0 B 0 0 0 2 0 F    0 0 0 0 0 2 0 F \n0 0 0 0 D G 0 0    0 0 B 0 D G 0 0 \nA 0 0 0 0 0 E 0    A 0 0 0 0 0 E 0  \n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO07FEB] Silver Lilypad Pond S", "background": "", "description": "为了让奶牛们娱乐和锻炼，Famer John 建造了一个美丽的池塘。这个长方形的池子被分成了 $M \\times N$ 个方格（$1 \\le M,N \\le 30$）。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。\n\nBessie 正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。\n\nBessie 的舞步很像象棋中的马步：每次总是先横向移动一格，再纵向移动两格，或先纵向移动两格，再横向移动一格。最多时，Bessie 会有八个移动方向可供选择。\n\n约翰一直在观看 Bessie 的芭蕾练习，发现她有时候不能跳到终点，因为中间缺了一些荷叶。\n\n于是他想要添加几朵莲花来帮助 Bessie 完成任务。一贯节俭的 John 只想添加最少数量的莲花，当然，莲花不能放在石头上。\n\n请帮助 John确定必须要添加的莲花的最少数量。在添加莲花最少的基础上，确定 Bessie 从起点跳到目标需要的最少步数。最后，确定满足添加的莲花数量最少时，步数最少的路径条数。", "inputFormat": "第一行，输入两个用空格分开的整数：$M$ 和 $N$。\n\n第二行到 $M + 1$ 行：第 $i + 1$ 行有 $N$ 个用空格分开的整数，描述了池塘第 $i$ 行的状态：`0` 为水，`1` 为莲花，`2` 为岩石，`3` 为 Bessie 所在的起点，`4` 为 Bessie 想去的终点。", "outputFormat": "第一行，一个整数，表示需要添加的莲花的最少数目；如果无解，则输出 $-1$。\n\n第二行，一个整数，表示在添加莲花最少的基础上，贝西从起点跳到终点需要的最少步数；如果第一行是 $-1$，不输出这行。\n\n第三行，一个整数，表示在添加莲花最少的基础上，步数等于第二行输出的路径条数；如果第一行是 $-1$，不输出这行。", "hint": "池塘分成四行八列，贝西的起点在第四行第一列，想去的终点在第三行第六列，池塘里一共有五朵莲花和一块石头。\n\n最少要加两朵莲花，位置如 `x` 所示：\n\n```\n0 0 0 1 0 0 0 0    0 0 0 1 0 0 0 0 \n0 x 0 0 0 2 0 1    0 0 0 0 0 2 0 1 \n0 0 0 0 x 4 0 0    0 0 x 0 x 4 0 0 \n3 0 0 0 0 0 1 0    3 0 0 0 0 0 1 0 \n```\n\n贝西至少要跳六步，两种不同的跳法如下：\n\n```\n0 0 0 C 0 0 0 0    0 0 0 C 0 0 0 0 \n0 B 0 0 0 2 0 F    0 0 0 0 0 2 0 F \n0 0 0 0 D G 0 0    0 0 B 0 D G 0 0 \nA 0 0 0 0 0 E 0    A 0 0 0 0 0 E 0  \n```", "locale": "zh-CN"}}}
{"pid": "P2412", "type": "P", "difficulty": 3, "samples": [["5 5\nabsi\nhansbug\nlzn\nkkk\nyyy\n1 5\n1 1\n1 2\n2 3\n4 4", "yyy\nabsi\nhansbug\nlzn\nkkk\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "搜索", "2016", "线段树", "洛谷原创", "ST 表", "洛谷月赛"], "title": "查单词", "background": "滚粗了的 HansBug 在收拾旧英语书，然而他发现了什么奇妙的东西。", "description": "蒟蒻 HansBug 在一本英语书里面找到了一个单词表，包含 $N$ 个单词（每个单词内包含大小写字母）。现在他想要找出某一段连续的单词内字典序最大的单词。", "inputFormat": "第一行包含两个正整数 $N, M$，分别表示单词个数和询问个数。\n\n接下来 $N$ 行每行包含一个字符串，仅包含大小写字母，长度不超过 $15$，表示一个单词。单词**大小写不敏感**。\n\n再接下来 $M$ 行每行包含两个整数 $x, y$，表示查询求从第 $x$ 到第 $y$ 个单词中字典序最大的单词。如果有两个单词忽略大小写情况下字典序相同，**输出靠后的那个**。", "outputFormat": "输出包含 $M$ 行，每行为一个字符串，分别依次对应 $M$ 个询问的结果。", "hint": "### 样例说明\n\n第一次操作：在 $\\tt\\left\\{absi,hansbug,lzn,kkk,yyy\\right\\}$ 中找出字典序最大的，故为 $\\tt yyy$。\n\n第二次操作：在 $\\tt\\left\\{absi\\right\\}$ 中找出字典序最大的，故为 $\\tt absi$。\n\n第三次操作：在 $\\tt\\left\\{absi,hansbug\\right\\}$ 中找出字典序最大的，故为 $\\tt hansbug$。\n\n第四次操作：在 $\\tt\\left\\{hansbug,lzn\\right\\}$ 中找出字典序最大的，故为 $\\tt lzn$。\n\n第五次操作：在 $\\tt\\left\\{kkk\\right\\}$ 中找出字典序最大的，故为 $\\tt kkk$。\n\n### 数据规模\n\n ![](https://cdn.luogu.com.cn/upload/pic/2274.png)", "locale": "zh-CN", "translations": {"en": {"title": "Word Lookup", "background": "While sorting his old English books, HansBug found something curious.", "description": "HansBug found a word list in an English book, containing $N$ words (each word consists of uppercase and lowercase letters). He wants to find the lexicographically largest word within a contiguous segment.", "inputFormat": "The first line contains two positive integers $N$ and $M$, representing the number of words and the number of queries.\n\nThe next $N$ lines each contain a string consisting only of uppercase and lowercase letters, with length at most $15$, representing a word. Words are case-insensitive.\n\nThe next $M$ lines each contain two integers $x$ and $y$, asking for the lexicographically largest word from the $x$-th to the $y$-th word. If two words are the same in lexicographical order when ignoring case, output the one that appears later.", "outputFormat": "Output $M$ lines, each containing a string, corresponding to the results of the $M$ queries in order.", "hint": "### Sample Explanation\n\nFirst operation: find the lexicographically largest in $\\tt\\left\\{absi,hansbug,lzn,kkk,yyy\\right\\}$, which is $\\tt yyy$.\n\nSecond operation: find the lexicographically largest in $\\tt\\left\\{absi\\right\\}$, which is $\\tt absi$.\n\nThird operation: find the lexicographically largest in $\\tt\\left\\{absi,hansbug\\right\\}$, which is $\\tt hansbug$.\n\nFourth operation: find the lexicographically largest in $\\tt\\left\\{hansbug,lzn\\right\\}$, which is $\\tt lzn$.\n\nFifth operation: find the lexicographically largest in $\\tt\\left\\{kkk\\right\\}$, which is $\\tt kkk$.\n\n### Constraints\n\n![](https://cdn.luogu.com.cn/upload/pic/2274.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "查单词", "background": "滚粗了的 HansBug 在收拾旧英语书，然而他发现了什么奇妙的东西。", "description": "蒟蒻 HansBug 在一本英语书里面找到了一个单词表，包含 $N$ 个单词（每个单词内包含大小写字母）。现在他想要找出某一段连续的单词内字典序最大的单词。", "inputFormat": "第一行包含两个正整数 $N, M$，分别表示单词个数和询问个数。\n\n接下来 $N$ 行每行包含一个字符串，仅包含大小写字母，长度不超过 $15$，表示一个单词。单词**大小写不敏感**。\n\n再接下来 $M$ 行每行包含两个整数 $x, y$，表示查询求从第 $x$ 到第 $y$ 个单词中字典序最大的单词。如果有两个单词忽略大小写情况下字典序相同，**输出靠后的那个**。", "outputFormat": "输出包含 $M$ 行，每行为一个字符串，分别依次对应 $M$ 个询问的结果。", "hint": "### 样例说明\n\n第一次操作：在 $\\tt\\left\\{absi,hansbug,lzn,kkk,yyy\\right\\}$ 中找出字典序最大的，故为 $\\tt yyy$。\n\n第二次操作：在 $\\tt\\left\\{absi\\right\\}$ 中找出字典序最大的，故为 $\\tt absi$。\n\n第三次操作：在 $\\tt\\left\\{absi,hansbug\\right\\}$ 中找出字典序最大的，故为 $\\tt hansbug$。\n\n第四次操作：在 $\\tt\\left\\{hansbug,lzn\\right\\}$ 中找出字典序最大的，故为 $\\tt lzn$。\n\n第五次操作：在 $\\tt\\left\\{kkk\\right\\}$ 中找出字典序最大的，故为 $\\tt kkk$。\n\n### 数据规模\n\n ![](https://cdn.luogu.com.cn/upload/pic/2274.png)", "locale": "zh-CN"}}}
{"pid": "P2413", "type": "P", "difficulty": 4, "samples": [["5                            \n(A,B)((C)(D),E)\n0.2\n0.3\n0.4\n0.5\n0.6", "0.2992"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "搜索", "洛谷原创", "洛谷月赛"], "title": "yyy loves physics IV", "background": "“颤抖吧，实验室！”\n\nyyy再一次来到了那个惨遭蹂躏的实验室。\n", "description": "这次，在 Round1 里几乎壮烈牺牲的电路君又被翻了出来。一共有 $N$（$1 \\le N \\le 26$）个元件。\n\n物理学霸 yyy 用一堆导线将他们连了起来，串联，并联，各种联……\n\n但由于 yyy 的操作太不规范，导致每个元件都有损坏的风险，yyy 用他那天才的脑子算出元件 $i$ 损坏而断开的概率是 $p_i$（$0 \\le p_i \\le 1$），因为电路太复杂，yyy 请你帮忙算出电路断路的概率。\n\n电路连接方式：\n\n- 一个元件是最小的电路，用 $A$ 表示元件 $1$，$B$ 表示元件 $2$，以此类推。\n\n- $K$ 个电路组成的串联电路表示为电路 $1,2,\\dots,K$。\n\n- $K$ 个电路组成的并联电路表示为（电路 $1$）（电路 $2$）......（电路 $K$）。", "inputFormat": "第 $1$ 行是一个整数 $n$，表示一共有多少个元件；\n\n第 $2$ 行是表示电路的字符串；\n\n最后是 $n$ 行，每行是一个实数 $p_i$，表示元件 $i$ 断路的概率。", "outputFormat": "一个实数，表示整个电路断路的概率，精确到小数点后 $4$ 位。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "yyy loves physics IV", "background": "“Tremble, laboratory!”\n\nyyy once again returned to that ravaged laboratory.", "description": "This time, the circuit that almost perished heroically in Round 1 has been brought out again. There are $N$ ($1 \\le N \\le 26$) components.\n\nThe physics ace yyy connected them with a bunch of wires—series, parallel, all kinds of combinations...\n\nHowever, because yyy’s operation was too nonstandard, each component has a risk of being damaged. Using his genius brain, yyy calculated that the probability that component $i$ fails and becomes open is $p_i$ ($0 \\le p_i \\le 1$). Because the circuit is too complex, yyy asks you to compute the probability that the entire circuit becomes open (disconnected).\n\nCircuit wiring rules:\n\n- A single component is the smallest circuit, with A denoting component 1, B denoting component 2, and so on.\n- A series circuit composed of $K$ subcircuits is written as circuit 1, 2, ..., $K$.\n- A parallel circuit composed of $K$ subcircuits is written as (circuit 1)(circuit 2)...(circuit $K$).", "inputFormat": "The first line contains an integer $n$, the number of components.\n\nThe second line contains a string that describes the circuit.\n\nThe next $n$ lines each contain a real number $p_i$, the probability that component $i$ becomes open.", "outputFormat": "Output a real number: the probability that the entire circuit becomes open, accurate to 4 decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves physics IV", "background": "“颤抖吧，实验室！”\n\nyyy再一次来到了那个惨遭蹂躏的实验室。\n", "description": "这次，在 Round1 里几乎壮烈牺牲的电路君又被翻了出来。一共有 $N$（$1 \\le N \\le 26$）个元件。\n\n物理学霸 yyy 用一堆导线将他们连了起来，串联，并联，各种联……\n\n但由于 yyy 的操作太不规范，导致每个元件都有损坏的风险，yyy 用他那天才的脑子算出元件 $i$ 损坏而断开的概率是 $p_i$（$0 \\le p_i \\le 1$），因为电路太复杂，yyy 请你帮忙算出电路断路的概率。\n\n电路连接方式：\n\n- 一个元件是最小的电路，用 $A$ 表示元件 $1$，$B$ 表示元件 $2$，以此类推。\n\n- $K$ 个电路组成的串联电路表示为电路 $1,2,\\dots,K$。\n\n- $K$ 个电路组成的并联电路表示为（电路 $1$）（电路 $2$）......（电路 $K$）。", "inputFormat": "第 $1$ 行是一个整数 $n$，表示一共有多少个元件；\n\n第 $2$ 行是表示电路的字符串；\n\n最后是 $n$ 行，每行是一个实数 $p_i$，表示元件 $i$ 断路的概率。", "outputFormat": "一个实数，表示整个电路断路的概率，精确到小数点后 $4$ 位。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2414", "type": "P", "difficulty": 6, "samples": [["aPaPBbP\n3\n1 2\n1 3\n2 3", "2\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "树形数据结构", "2011", "NOI", "深度优先搜索 DFS", "AC 自动机", "离线处理"], "title": "[NOI2011] 阿狸的打字机", "background": "", "description": "阿狸喜欢收藏各种稀奇古怪的东西，最近他淘到一台老式的打字机。打字机上只有 $28$ 个按键，分别印有 $26$ 个小写英文字母和 `B`、`P` 两个字母。经阿狸研究发现，这个打字机是这样工作的：\n\n* 输入小写字母，打字机的一个凹槽中会加入这个字母(这个字母加在凹槽的最后)。\n* 按一下印有 `B` 的按键，打字机凹槽中最后一个字母会消失。\n* 按一下印有 `P` 的按键，打字机会在纸上打印出凹槽中现有的所有字母并换行，但凹槽中的字母不会消失。\n\n例如，阿狸输入 `aPaPBbP`，纸上被打印的字符如下：\n\n```\na\naa\nab\n```\n\n我们把纸上打印出来的字符串从 $1$ 开始顺序编号，一直到 $n$。打字机有一个非常有趣的功能，在打字机中暗藏一个带数字的小键盘，在小键盘上输入两个数 $(x,y)$（其中 $1\\leq x,y\\leq n$），打字机会显示第 $x$ 个打印的字符串在第 $y$ 个打印的字符串中出现了多少次。\n\n阿狸发现了这个功能以后很兴奋，他想写个程序完成同样的功能，你能帮助他么？\n", "inputFormat": "输入的第一行包含一个字符串，按阿狸的输入顺序给出所有阿狸输入的字符。\n\n第二行包含一个整数 $m$，表示询问个数。\n\n接下来 $m$ 行描述所有由小键盘输入的询问。其中第 $i$ 行包含两个整数 $x, y$，表示第 $i$ 个询问为 $(x, y)$。\n", "outputFormat": "输出 $m$ 行，其中第 $i$ 行包含一个整数，表示第 $i$ 个询问的答案。\n", "hint": "### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq10^5$，第一行总长度 $\\leq 10^5$。\n\n|测试点|$n$ 的规模|$m$ 的规模|字符串长度|第一行长度|\n|:-:|:-:|:-:|:-:|:-:|\n|$1,2$|$1\\leq n\\leq 100$|$1\\leq m\\leq 10^3$| - |$\\leq 100$|\n|$3,4$|$1\\leq n\\leq 10^3$|$1\\leq m\\leq 10^4$|单个长度 $\\leq 10^3$，总长度 $\\leq 10^5$|$\\leq 10^5$|\n|$5\\sim 7$|$1\\leq n\\leq 10^4$|$1\\leq m\\leq 10^5$|总长度 $\\leq 10^5$|$\\leq 10^5$|\n|$8\\sim 10$|$1\\leq n\\leq 10^5$|$1\\leq m\\leq 10^5$| - |$\\leq 10^5$|\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2011] Ali's Typewriter", "background": "", "description": "Ali likes collecting all kinds of quirky things, and he recently found an old typewriter. The typewriter has only $28$ keys, labeled with the $26$ lowercase English letters and the two letters `B` and `P`. After some study, Ali found that the typewriter works as follows:\n\n- When a lowercase letter is entered, the letter is appended to a slot in the typewriter (this letter is added to the end of the slot).\n- When the `B` key is pressed once, the last letter in the slot disappears.\n- When the `P` key is pressed once, the typewriter prints all the current letters in the slot on the paper and starts a new line, but the letters in the slot remain.\n\nFor example, if Ali inputs `aPaPBbP`, the characters printed on the paper are:\n\n```\na\naa\nab\n```\n\nWe number the strings printed on the paper starting from $1$ up to $n$. The typewriter has a very interesting feature: it hides a numeric keypad. By entering two numbers $(x, y)$ (where $1 \\leq x, y \\leq n$) on the keypad, the typewriter will display how many times the $x$-th printed string appears in the $y$-th printed string.\n\nAfter discovering this feature, Ali became excited and wanted to write a program to achieve the same function. Can you help him?", "inputFormat": "The first line contains a string that lists all characters Ali inputs in order.\n\nThe second line contains an integer $m$, the number of queries.\n\nEach of the next $m$ lines describes one query entered via the keypad. The $i$-th line contains two integers $x, y$, representing the $i$-th query $(x, y)$.", "outputFormat": "Output $m$ lines. The $i$-th line should contain one integer, the answer to the $i$-th query.", "hint": "### Constraints\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $1 \\leq m \\leq 10^5$, and the length of the first line $\\leq 10^5$.\n\n| Test Points | $n$ scale | $m$ scale | string length | first line length |\n|:-:|:-:|:-:|:-:|:-:|\n| $1,2$ | $1 \\leq n \\leq 100$ | $1 \\leq m \\leq 10^3$ | - | $\\leq 100$ |\n| $3,4$ | $1 \\leq n \\leq 10^3$ | $1 \\leq m \\leq 10^4$ | single length $\\leq 10^3$, total length $\\leq 10^5$ | $\\leq 10^5$ |\n| $5 \\sim 7$ | $1 \\leq n \\leq 10^4$ | $1 \\leq m \\leq 10^5$ | total length $\\leq 10^5$ | $\\leq 10^5$ |\n| $8 \\sim 10$ | $1 \\leq n \\leq 10^5$ | $1 \\leq m \\leq 10^5$ | - | $\\leq 10^5$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2011] 阿狸的打字机", "background": "", "description": "阿狸喜欢收藏各种稀奇古怪的东西，最近他淘到一台老式的打字机。打字机上只有 $28$ 个按键，分别印有 $26$ 个小写英文字母和 `B`、`P` 两个字母。经阿狸研究发现，这个打字机是这样工作的：\n\n* 输入小写字母，打字机的一个凹槽中会加入这个字母(这个字母加在凹槽的最后)。\n* 按一下印有 `B` 的按键，打字机凹槽中最后一个字母会消失。\n* 按一下印有 `P` 的按键，打字机会在纸上打印出凹槽中现有的所有字母并换行，但凹槽中的字母不会消失。\n\n例如，阿狸输入 `aPaPBbP`，纸上被打印的字符如下：\n\n```\na\naa\nab\n```\n\n我们把纸上打印出来的字符串从 $1$ 开始顺序编号，一直到 $n$。打字机有一个非常有趣的功能，在打字机中暗藏一个带数字的小键盘，在小键盘上输入两个数 $(x,y)$（其中 $1\\leq x,y\\leq n$），打字机会显示第 $x$ 个打印的字符串在第 $y$ 个打印的字符串中出现了多少次。\n\n阿狸发现了这个功能以后很兴奋，他想写个程序完成同样的功能，你能帮助他么？\n", "inputFormat": "输入的第一行包含一个字符串，按阿狸的输入顺序给出所有阿狸输入的字符。\n\n第二行包含一个整数 $m$，表示询问个数。\n\n接下来 $m$ 行描述所有由小键盘输入的询问。其中第 $i$ 行包含两个整数 $x, y$，表示第 $i$ 个询问为 $(x, y)$。\n", "outputFormat": "输出 $m$ 行，其中第 $i$ 行包含一个整数，表示第 $i$ 个询问的答案。\n", "hint": "### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq10^5$，第一行总长度 $\\leq 10^5$。\n\n|测试点|$n$ 的规模|$m$ 的规模|字符串长度|第一行长度|\n|:-:|:-:|:-:|:-:|:-:|\n|$1,2$|$1\\leq n\\leq 100$|$1\\leq m\\leq 10^3$| - |$\\leq 100$|\n|$3,4$|$1\\leq n\\leq 10^3$|$1\\leq m\\leq 10^4$|单个长度 $\\leq 10^3$，总长度 $\\leq 10^5$|$\\leq 10^5$|\n|$5\\sim 7$|$1\\leq n\\leq 10^4$|$1\\leq m\\leq 10^5$|总长度 $\\leq 10^5$|$\\leq 10^5$|\n|$8\\sim 10$|$1\\leq n\\leq 10^5$|$1\\leq m\\leq 10^5$| - |$\\leq 10^5$|\n\n", "locale": "zh-CN"}}}
{"pid": "P2415", "type": "P", "difficulty": 2, "samples": [["2 3\n", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2015", "洛谷原创", "排列组合", "洛谷月赛"], "title": "集合求和", "background": "", "description": "给定一个集合 $s$（集合元素数量 $\\le 30$），求出此集合所有子集元素之和。\n", "inputFormat": "集合中的元素（元素 $\\le 1000$）\n", "outputFormat": "$s$ 所有子集元素之和。", "hint": "**【样例解释】**\n\n子集为：$\\varnothing, \\{ 2 \\}, \\{ 3 \\}, \\{ 2, 3 \\}$，和为 $2 + 3 + 2 + 3 = 10$。\n\n----\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le \\lvert s \\rvert \\le 30$，$1 \\le s_i \\le 1000$，$s$ 所有子集元素之和 $\\le {10}^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Set Summation", "background": "", "description": "Given a set $s$ (the number of elements $\\le 30$), compute the sum of elements over all subsets of this set.", "inputFormat": "The elements in the set (each element $\\le 1000$).", "outputFormat": "The sum of elements over all subsets of $s$.", "hint": "**[Sample Explanation]**\n\nThe subsets are: $\\varnothing, \\{ 2 \\}, \\{ 3 \\}, \\{ 2, 3 \\}$, and the total is $2 + 3 + 2 + 3 = 10$.\n\n----\n\n**[Constraints]**\n\nFor $100\\%$ of the testdata, $1 \\le \\lvert s \\rvert \\le 30$, $1 \\le s_i \\le 1000$, and the sum of elements over all subsets of $s$ is $\\le {10}^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "集合求和", "background": "", "description": "给定一个集合 $s$（集合元素数量 $\\le 30$），求出此集合所有子集元素之和。\n", "inputFormat": "集合中的元素（元素 $\\le 1000$）\n", "outputFormat": "$s$ 所有子集元素之和。", "hint": "**【样例解释】**\n\n子集为：$\\varnothing, \\{ 2 \\}, \\{ 3 \\}, \\{ 2, 3 \\}$，和为 $2 + 3 + 2 + 3 = 10$。\n\n----\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le \\lvert s \\rvert \\le 30$，$1 \\le s_i \\le 1000$，$s$ 所有子集元素之和 $\\le {10}^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2416", "type": "P", "difficulty": 5, "samples": [["6 7\n1 2 0\n2 3 0\n3 1 0\n3 4 1\n4 5 0\n5 6 0\n6 4 0\n1\n1 6", "YES"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "树形数据结构", "2016", "洛谷原创", "洛谷月赛"], "title": "泡芙", "background": "此题空间限制 $256$ MB，保证系统栈空间与内存限制大小相同。", "description": "火星猫经过一番努力终于到达了冥王星。他发现冥王星有 $N$ 座城市，$M$ 条无向边。火星猫准备出发去找冥王兔，他听说有若干泡芙掉落在一些边上，他准备采集一些去送给冥王兔。但是火星猫的火星光环和冥王星相生相克，当火星猫走过一条路之后，这条路就不能再走了。如果冥王兔吃不到泡芙，他们就不能嘿嘿嘿了。所以告诉你火星猫和冥王兔的位置，请问冥王兔能不能吃到泡芙。", "inputFormat": "第一行 $N,M$ 表示点数和边数。\n\n接下来 $M$ 行每行 $X,Y,Z$ 表示 $X$ 到 $Y$ 有一条无向边，$Z=1$ 表示有泡芙，$Z=0$ 表示没有\n\n接下来一行是 $Q$，表示有 $Q$ 组询问。\n\n每行 $S,T$ 表示火星猫和冥王兔的位置。", "outputFormat": "对于每组询问输出 `YES` 或 `NO`。", "hint": "|  测试点编号  |     $N \\le $      |     $M \\le $      |     $Q \\le $      |    特殊性质    |\n| :----------: | :---------------: | :---------------: | :---------------: | :------------: |\n|  $1 \\sim 4$  |      $1000$       |       $N-1$       | $5 \\times 10 ^ 4$ | 保证图是一棵树 |\n|  $5 \\sim 8$  | $3 \\times 10 ^ 5$ |       $N-1$       | $3 \\times 10 ^ 5$ |       无       |\n| $9 \\sim 10$  |       $20$        |       $50$        |        $5$        |       无       |\n| $11 \\sim 14$ |      $1000$       |      $5000$       | $5 \\times 10 ^ 4$ |       无       |\n| $15 \\sim 20$ | $3 \\times 10 ^ 5$ | $3 \\times 10 ^ 5$ | $3 \\times 10 ^ 5$ |       无       |\n\n保证图联通。", "locale": "zh-CN", "translations": {"en": {"title": "Cream Puffs", "background": "This problem has a space limit of $256$ MB, and the system stack size equals the memory limit.", "description": "After much effort, the Martian Cat finally reaches Pluto. There are $N$ cities and $M$ undirected edges. The Martian Cat plans to visit the Pluto Rabbit and has heard that some cream puffs have fallen on certain edges, so he wants to collect some as a gift. However, the Martian Cat’s aura conflicts with Pluto: once he traverses an edge, that edge can no longer be used. If the Pluto Rabbit cannot get any cream puffs, they won’t be happy. Given the positions of the Martian Cat and the Pluto Rabbit, determine whether the Pluto Rabbit can get a cream puff, i.e., whether there exists a trail from $S$ to $T$ that passes through at least one edge with a cream puff.", "inputFormat": "The first line contains $N, M$, the number of vertices and edges.\n\nEach of the next $M$ lines contains $X, Y, Z$, indicating an undirected edge between $X$ and $Y$; $Z = 1$ means there is a cream puff on this edge, and $Z = 0$ means there is not.\n\nThe next line contains $Q$, the number of queries.\n\nEach of the following $Q$ lines contains $S, T$, the positions of the Martian Cat and the Pluto Rabbit.", "outputFormat": "For each query, output `YES` or `NO`.", "hint": "|   Test point ID   |      $N \\le$      |      $M \\le$      |      $Q \\le$      |    Special property    |\n| :---------------: | :---------------: | :---------------: | :---------------: | :--------------------: |\n|     $1 \\sim 4$    |      $1000$       |       $N - 1$     | $5 \\times 10^4$   | The graph is a tree.   |\n|     $5 \\sim 8$    | $3 \\times 10^5$   |       $N - 1$     | $3 \\times 10^5$   |         None           |\n|    $9 \\sim 10$    |       $20$        |        $50$       |        $5$        |         None           |\n|   $11 \\sim 14$    |      $1000$       |       $5000$      | $5 \\times 10^4$   |         None           |\n|   $15 \\sim 20$    | $3 \\times 10^5$   |    $3 \\times 10^5$| $3 \\times 10^5$   |         None           |\n\nThe graph is connected.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "泡芙", "background": "此题空间限制 $256$ MB，保证系统栈空间与内存限制大小相同。", "description": "火星猫经过一番努力终于到达了冥王星。他发现冥王星有 $N$ 座城市，$M$ 条无向边。火星猫准备出发去找冥王兔，他听说有若干泡芙掉落在一些边上，他准备采集一些去送给冥王兔。但是火星猫的火星光环和冥王星相生相克，当火星猫走过一条路之后，这条路就不能再走了。如果冥王兔吃不到泡芙，他们就不能嘿嘿嘿了。所以告诉你火星猫和冥王兔的位置，请问冥王兔能不能吃到泡芙。", "inputFormat": "第一行 $N,M$ 表示点数和边数。\n\n接下来 $M$ 行每行 $X,Y,Z$ 表示 $X$ 到 $Y$ 有一条无向边，$Z=1$ 表示有泡芙，$Z=0$ 表示没有\n\n接下来一行是 $Q$，表示有 $Q$ 组询问。\n\n每行 $S,T$ 表示火星猫和冥王兔的位置。", "outputFormat": "对于每组询问输出 `YES` 或 `NO`。", "hint": "|  测试点编号  |     $N \\le $      |     $M \\le $      |     $Q \\le $      |    特殊性质    |\n| :----------: | :---------------: | :---------------: | :---------------: | :------------: |\n|  $1 \\sim 4$  |      $1000$       |       $N-1$       | $5 \\times 10 ^ 4$ | 保证图是一棵树 |\n|  $5 \\sim 8$  | $3 \\times 10 ^ 5$ |       $N-1$       | $3 \\times 10 ^ 5$ |       无       |\n| $9 \\sim 10$  |       $20$        |       $50$        |        $5$        |       无       |\n| $11 \\sim 14$ |      $1000$       |      $5000$       | $5 \\times 10 ^ 4$ |       无       |\n| $15 \\sim 20$ | $3 \\times 10 ^ 5$ | $3 \\times 10 ^ 5$ | $3 \\times 10 ^ 5$ |       无       |\n\n保证图联通。", "locale": "zh-CN"}}}
{"pid": "P2417", "type": "P", "difficulty": 5, "samples": [["2\n3 3\n3 1 2 3\n2 1 2\n1 1\n3 3\n2 1 3\n2 1 3\n1 1", "YES\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "课程", "background": "", "description": "有 $n$ 个人与 $m$ 个教室。其中，可以在第 $i$ 个教室上课的学生有 $k_i$ 个，编号分别为 $p_{i,j}$。每个学生都有至少一个教室**可以**上课，并且每个学生**只能**在一个教室上课。\n\n现在询问是否存在一种方案，使得每个教室里至少有一名学生。若可以满足要求，输出 `YES`，否则输出 `NO`。", "inputFormat": "第一行是数据组数 $T$，满足 $T\\leq 10$。\n\n对于每一组数据，第一行是两个整数 $m,n$（注意输入顺序）。接下来 $m$ 行，第一个数是 $k_i$，后面 $k_i$ 个数 $p_{i,j}$ 表示第 $p_{i,j}$ 名学生可以在第 $i$ 个教室上课。\n", "outputFormat": "每行一个字符串 `YES` 或 `NO`，表示是否存在一种方案满足对应的测试数据。", "hint": "$n\\leq 2\\times 10^4,m\\leq 2\\times 10^4,T\\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Courses", "background": "", "description": "There are $n$ students and $m$ classrooms. For classroom $i$, there are $k_i$ students who can take a class there, with indices $p_{i,j}$. Each student has at least one classroom they **can** attend, and each student can attend **only** one classroom.\n\nDetermine whether there exists an assignment such that each classroom has at least one student. If it is possible, output `YES`; otherwise, output `NO`.", "inputFormat": "The first line contains the number of test cases $T$, where $T \\leq 10$.\n\nFor each test case, the first line contains two integers $m, n$ (note the input order). Then follow $m$ lines: the first number is $k_i$, followed by $k_i$ numbers $p_{i,j}$, indicating that student $p_{i,j}$ can take a class in classroom $i$.", "outputFormat": "For each test case, output one string `YES` or `NO`, indicating whether there exists a valid assignment for the corresponding testdata.", "hint": "Constraints: $n \\leq 2 \\times 10^4$, $m \\leq 2 \\times 10^4$, $T \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "课程", "background": "", "description": "有 $n$ 个人与 $m$ 个教室。其中，可以在第 $i$ 个教室上课的学生有 $k_i$ 个，编号分别为 $p_{i,j}$。每个学生都有至少一个教室**可以**上课，并且每个学生**只能**在一个教室上课。\n\n现在询问是否存在一种方案，使得每个教室里至少有一名学生。若可以满足要求，输出 `YES`，否则输出 `NO`。", "inputFormat": "第一行是数据组数 $T$，满足 $T\\leq 10$。\n\n对于每一组数据，第一行是两个整数 $m,n$（注意输入顺序）。接下来 $m$ 行，第一个数是 $k_i$，后面 $k_i$ 个数 $p_{i,j}$ 表示第 $p_{i,j}$ 名学生可以在第 $i$ 个教室上课。\n", "outputFormat": "每行一个字符串 `YES` 或 `NO`，表示是否存在一种方案满足对应的测试数据。", "hint": "$n\\leq 2\\times 10^4,m\\leq 2\\times 10^4,T\\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P2418", "type": "P", "difficulty": 5, "samples": [["5 1\n1\n1\n2\n2\n1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线段树", "洛谷原创", "洛谷月赛"], "title": "yyy loves OI IV", "background": "某校 2015 届有两位 OI 神牛，yyy 和 c01。\n", "description": "全校除他们以外的 $N$ 名学生，每人都会膜拜他们中的某一个人。现在老师要给他们分宿舍了。但是，问题来了：\n\n同一间宿舍里的人要么膜拜同一位大牛，要么膜拜 yyy 和 c01 的人数的差的绝对值不超过 $M$。否则他们就会打起来。\n\n为了方便，老师让 $N$ 名学生站成一排，只有连续地站在一起的人才能分进同一个宿舍。\n\n假设每间宿舍能容纳任意多的人，请问最少要安排几个宿舍？\n", "inputFormat": "第一行，两个正整数 $N$ 和 $M$。\n\n第 $2, 3, \\cdots, N+1$ 行，每行一个整数，是 $1$ 或 $2$，第 $i$ 行的数字表示从左往右数第 $i-1$ 个人膜拜的大牛，$1$ 表示 yyy，$2$ 表示 c01。\n", "outputFormat": "一行，一个整数，表示最少要安排几个宿舍。\n", "hint": "| 测试点编号 | $N$ 的范围 | $M$ 的范围 |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 3$ | $\\le 2500$ | $\\le 10$ |\n| $4 \\sim 5$ | $\\le 5\\times 10 ^ 5$ | $\\le 10$ |\n| $6 \\sim 10$ | $\\le 5\\times 10 ^ 5$ | $\\le 2000$ |\n\n", "locale": "zh-CN", "translations": {"en": {"title": "yyy loves OI IV", "background": "In the 2015 cohort of a certain school, there are two OI top students, yyy and c01.", "description": "There are $N$ other students in the school besides them, and each student idolizes one of them. Now the teacher needs to assign them to dorm rooms. However, here is the issue:\n\nFor any dorm room, either everyone in it idolizes the same person, or the absolute difference between the numbers of students who idolize yyy and c01 in that room is at most $M$. Otherwise, they will start a fight.\n\nTo make things easier, the teacher makes the $N$ students stand in a line. Only people who stand consecutively can be placed into the same dorm room.\n\nAssume each dorm room can hold arbitrarily many people. What is the minimum number of dorm rooms needed?", "inputFormat": "The first line contains two positive integers $N$ and $M$.\n\nLines $2, 3, \\cdots, N+1$ each contain one integer, $1$ or $2$. The number on line $i$ indicates, from left to right, the $(i-1)$-th person’s choice: $1$ means yyy, and $2$ means c01.", "outputFormat": "One line with a single integer, the minimum number of dorm rooms needed.", "hint": "| Test point ID | Range of $N$ | Range of $M$ |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 3$ | $\\le 2500$ | $\\le 10$ |\n| $4 \\sim 5$ | $\\le 5\\times 10 ^ 5$ | $\\le 10$ |\n| $6 \\sim 10$ | $\\le 5\\times 10 ^ 5$ | $\\le 2000$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves OI IV", "background": "某校 2015 届有两位 OI 神牛，yyy 和 c01。\n", "description": "全校除他们以外的 $N$ 名学生，每人都会膜拜他们中的某一个人。现在老师要给他们分宿舍了。但是，问题来了：\n\n同一间宿舍里的人要么膜拜同一位大牛，要么膜拜 yyy 和 c01 的人数的差的绝对值不超过 $M$。否则他们就会打起来。\n\n为了方便，老师让 $N$ 名学生站成一排，只有连续地站在一起的人才能分进同一个宿舍。\n\n假设每间宿舍能容纳任意多的人，请问最少要安排几个宿舍？\n", "inputFormat": "第一行，两个正整数 $N$ 和 $M$。\n\n第 $2, 3, \\cdots, N+1$ 行，每行一个整数，是 $1$ 或 $2$，第 $i$ 行的数字表示从左往右数第 $i-1$ 个人膜拜的大牛，$1$ 表示 yyy，$2$ 表示 c01。\n", "outputFormat": "一行，一个整数，表示最少要安排几个宿舍。\n", "hint": "| 测试点编号 | $N$ 的范围 | $M$ 的范围 |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 3$ | $\\le 2500$ | $\\le 10$ |\n| $4 \\sim 5$ | $\\le 5\\times 10 ^ 5$ | $\\le 10$ |\n| $6 \\sim 10$ | $\\le 5\\times 10 ^ 5$ | $\\le 2000$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P2419", "type": "P", "difficulty": 3, "samples": [["5 5\n4 3\n4 2\n3 2\n1 2\n2 5", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "USACO", "深度优先搜索 DFS", "拓扑排序", "Floyd 算法"], "title": "[USACO08JAN] Cow Contest S", "background": null, "description": "FJ 的 $N$（$1 \\leq N \\leq 100$）头奶牛们最近参加了场程序设计竞赛。在赛场上，奶牛们按 $1, 2, \\cdots, N$ 依次编号。每头奶牛的编程能力不尽相同，并且没有哪两头奶牛的水平不相上下，也就是说，奶牛们的编程能力有明确的排名。整个比赛被分成了若干轮，每一轮是两头指定编号的奶牛的对决。如果编号为 $A$ 的奶牛的编程能力强于编号为 $B$ 的奶牛（$1 \\leq A, B \\leq N$，$A \\neq B$)，那么她们的对决中，编号为 $A$ 的奶牛总是能胜出。FJ 想知道奶牛们编程能力的具体排名，于是他找来了奶牛们所有 $M$（$1 \\leq M \\leq 4,500$）轮比赛的结果，希望你能根据这些信息，推断出尽可能多的奶牛的编程能力排名。比赛结果保证不会自相矛盾。", "inputFormat": "第一行两个用空格隔开的整数 $N, M$。\n\n第 $2\\sim M + 1$ 行，每行为两个用空格隔开的整数 $A, B$ ，描述了参加某一轮比赛的奶牛的编号，以及结果（每行的第一个数的奶牛为**胜者**）。", "outputFormat": "输出一行一个整数，表示排名可以确定的奶牛的数目。", "hint": "样例解释：\n\n编号为 $2$ 的奶牛输给了编号为 $1, 3, 4$ 的奶牛，也就是说她的水平比这 $3$ 头奶牛都差。而编号为 $5$ 的奶牛又输在了她的手下，也就是说，她的水平比编号为 $5$ 的奶牛强一些。于是，编号为 $2$ 的奶牛的排名必然为第 $4$，编号为 $5$ 的奶牛的水平必然最差。其他 $3$ 头奶牛的排名仍无法确定。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08JAN] Cow Contest S", "background": null, "description": "$ N (1 ≤ N ≤ 100) $ cows, conveniently numbered $ 1 ~ N $ , are participating in a programming contest. As we all know, some cows code better than others. Each cow has a certain constant skill rating that is unique among the competitors.\n\nThe contest is conducted in several head-to-head rounds, each between two cows. If cow $ A $ has a greater skill level than cow $ B (1 ≤ A ≤ N; 1 ≤ B ≤ N; A ≠ B) $, then cow $ A $ will always beat cow $ B $ .\n\nFarmer John is trying to rank the cows by skill level. Given a list the results of $ M (1 ≤ M ≤ 4,500) $ two-cow rounds, determine the number of cows whose ranks can be precisely determined from the results. It is guaranteed that the results of the rounds will not be contradictory.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO08JAN] Cow Contest S", "background": null, "description": "FJ 的 $N$（$1 \\leq N \\leq 100$）头奶牛们最近参加了场程序设计竞赛。在赛场上，奶牛们按 $1, 2, \\cdots, N$ 依次编号。每头奶牛的编程能力不尽相同，并且没有哪两头奶牛的水平不相上下，也就是说，奶牛们的编程能力有明确的排名。整个比赛被分成了若干轮，每一轮是两头指定编号的奶牛的对决。如果编号为 $A$ 的奶牛的编程能力强于编号为 $B$ 的奶牛（$1 \\leq A, B \\leq N$，$A \\neq B$)，那么她们的对决中，编号为 $A$ 的奶牛总是能胜出。FJ 想知道奶牛们编程能力的具体排名，于是他找来了奶牛们所有 $M$（$1 \\leq M \\leq 4,500$）轮比赛的结果，希望你能根据这些信息，推断出尽可能多的奶牛的编程能力排名。比赛结果保证不会自相矛盾。", "inputFormat": "第一行两个用空格隔开的整数 $N, M$。\n\n第 $2\\sim M + 1$ 行，每行为两个用空格隔开的整数 $A, B$ ，描述了参加某一轮比赛的奶牛的编号，以及结果（每行的第一个数的奶牛为**胜者**）。", "outputFormat": "输出一行一个整数，表示排名可以确定的奶牛的数目。", "hint": "样例解释：\n\n编号为 $2$ 的奶牛输给了编号为 $1, 3, 4$ 的奶牛，也就是说她的水平比这 $3$ 头奶牛都差。而编号为 $5$ 的奶牛又输在了她的手下，也就是说，她的水平比编号为 $5$ 的奶牛强一些。于是，编号为 $2$ 的奶牛的排名必然为第 $4$，编号为 $5$ 的奶牛的水平必然最差。其他 $3$ 头奶牛的排名仍无法确定。", "locale": "zh-CN"}}}
{"pid": "P2420", "type": "P", "difficulty": 3, "samples": [["5\n1 4 9644\n2 5 15004\n3 1 14635\n5 3 9684\n3\n2 4\n5 4\n1 1\n", "975\n14675\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["树形数据结构", "2015", "洛谷原创", "深度优先搜索 DFS", "洛谷月赛"], "title": "让我们异或吧", "background": null, "description": "异或是一种神奇的运算,大部分人把它总结成不进位加法.\n\n在生活中 xor 运算也很常见。比如，对于一个问题的回答，是为 $1$，否为 $0$，那么：\n\n（$A$ 是否是男生）xor（$B$ 是否是男生）＝ $A$ 和 $B$ 是否能够成为情侣\n\n好了，现在我们来制造和处理一些复杂的情况。比如我们将给出一颗树，它很高兴自己有 $N$ 个结点。树的每条边上有一个权值。我们要进行 $M$ 次询问，对于每次询问，我们想知道某两点之间的路径上所有边权的异或值。", "inputFormat": "输入文件第一行包含一个整数 $N$ ，表示这颗开心的树拥有的结点数，以下有 $N-1$ 行，描述这些边，每行有 $3$ 个数，$u,v,w$，表示 $u$ 和 $v$ 之间有一条权值为 $w$ 的边。接下来一行有一个整数 $M$，表示询问数。之后的 $M$ 行，每行两个数 $u,v$，表示询问这两个点之间的路径上的权值异或值。", "outputFormat": "输出 $M$ 行，每行一个整数，表示异或值。", "hint": "对于 $40\\%$ 的数据，有 $1 \\le N,M \\le 3000$；  \n对于 $100\\%$ 的数据，有 $1 \\le N ,M\\le 100000$。\n\n保证边权在 `int` 范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Let's XOR", "background": "", "description": "XOR is a special operation, often summarized as addition without carry.\n\nIn daily life, xor is also common. For example, for a yes/no question, yes is $1$ and no is $0$, then:\n(A is male) xor (B is male) = whether A and B can become a couple.\n\nNow, we will handle a more complex case. You are given a tree with $N$ nodes. Each edge has a weight. There are $M$ queries. For each query, find the XOR of all edge weights along the path between two nodes.", "inputFormat": "The first line contains an integer $N$, the number of nodes in the tree. The next $N - 1$ lines each contain three integers $u, v, w$, indicating there is an edge between $u$ and $v$ with weight $w$. The next line contains an integer $M$, the number of queries. Each of the next $M$ lines contains two integers $u, v$, asking for the XOR of the edge weights along the path between $u$ and $v$.", "outputFormat": "Output $M$ lines, each with one integer, the XOR value.", "hint": "Constraints:\n- For $40\\%$ of the testdata, $1 \\le N, M \\le 3000$.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 100000$.\n- Edge weights are within the `int` range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "让我们异或吧", "background": null, "description": "异或是一种神奇的运算,大部分人把它总结成不进位加法.\n\n在生活中 xor 运算也很常见。比如，对于一个问题的回答，是为 $1$，否为 $0$，那么：\n\n（$A$ 是否是男生）xor（$B$ 是否是男生）＝ $A$ 和 $B$ 是否能够成为情侣\n\n好了，现在我们来制造和处理一些复杂的情况。比如我们将给出一颗树，它很高兴自己有 $N$ 个结点。树的每条边上有一个权值。我们要进行 $M$ 次询问，对于每次询问，我们想知道某两点之间的路径上所有边权的异或值。", "inputFormat": "输入文件第一行包含一个整数 $N$ ，表示这颗开心的树拥有的结点数，以下有 $N-1$ 行，描述这些边，每行有 $3$ 个数，$u,v,w$，表示 $u$ 和 $v$ 之间有一条权值为 $w$ 的边。接下来一行有一个整数 $M$，表示询问数。之后的 $M$ 行，每行两个数 $u,v$，表示询问这两个点之间的路径上的权值异或值。", "outputFormat": "输出 $M$ 行，每行一个整数，表示异或值。", "hint": "对于 $40\\%$ 的数据，有 $1 \\le N,M \\le 3000$；  \n对于 $100\\%$ 的数据，有 $1 \\le N ,M\\le 100000$。\n\n保证边权在 `int` 范围内。", "locale": "zh-CN"}}}
{"pid": "P2421", "type": "P", "difficulty": 5, "samples": [["3\n1 3 4\n2 7 3\n3 2 1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "NOI", "扩展欧几里德算法"], "title": "[NOI2002] 荒岛野人", "background": null, "description": "克里特岛以野人群居而著称。岛上有排列成环形的 $m$ 个山洞。这些山洞顺时针编号为 $1,2,\\dots ,m$。岛上住着 $n$ 个野人，一开始依次住在山洞 $C_1,C_2,\\dots ,C_n$ 中，以后每年，第 $i$ 个野人会沿顺时针向前走 $P_i$ 个洞住下来。\n\n每个野人 $i$ 有一个寿命值 $L_i$，即生存的年数。\n\n下面四幅图描述了一个有 $6$ 个山洞，住有三个野人的岛上前四年的情况。三个野人初始的洞穴编号依次为 $1,2,3$；每年要走过的洞穴数依次为 $3,7,2$；寿命值依次为 $4,3,1$。\n\n![](https://cdn.luogu.com.cn/upload/pic/15476.png)\n\n奇怪的是，虽然野人有很多，但没有任何两个野人在有生之年处在同一个山洞中，使得小岛一直保持和平与宁静，这让科学家们很是惊奇。他们想知道，至少有多少个山洞，才能维持岛上的和平呢？", "inputFormat": "第 $1$ 行为一个整数 $n(1\\leq n\\leq 15)$，即野人的数目。\n\n第 $2$ 行到第 $N+1$ 每行为三个整数 $C_i, P_i, L_i (1\\leq C_i,P_i \\leq 100, 0\\leq L_i\\leq 10^6 )$，表示每个野人所住的初始洞穴编号，每年走过的洞穴数及寿命值。", "outputFormat": "仅包含一个数 $M$，即最少可能的山洞数。输入数据保证有解，且 $M$ 不大于 $10^6$。", "hint": "$1\\leq N\\leq 15$，$1\\leq C_i,P_i\\leq 100$，$0\\leq L_i\\leq 10^6$  \n\n保证 $M\\leq 10^6$", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2002] Savages on a Desert Island", "background": "", "description": "The island of Crete is known for its tribes of savages. There are $m$ caves arranged in a ring on the island. These caves are numbered clockwise as $1, 2, \\dots, m$. There are $n$ savages living on the island, initially residing in caves $C_1, C_2, \\dots, C_n$ in order. Afterward, each year, the $i$-th savage moves forward clockwise by $P_i$ caves and settles there.\n\nEach savage $i$ has a lifespan value $L_i$, i.e., the number of years they live.\n\nThe following four figures describe the first four years on an island with $6$ caves and three savages. The initial cave numbers of the three savages are $1, 2, 3$; the number of caves they move each year are $3, 7, 2$; and their lifespan values are $4, 3, 1$.\n\n![](https://cdn.luogu.com.cn/upload/pic/15476.png)\n\nStrangely, although there are many savages, no two savages ever occupy the same cave during their lifetimes, so the island remains peaceful and tranquil. Scientists are curious: what is the minimum number of caves needed to maintain peace on the island?", "inputFormat": "The first line contains an integer $n$ ($1 \\leq n \\leq 15$), the number of savages.\n\nLines $2$ to $n+1$ each contain three integers $C_i, P_i, L_i$ ($1 \\leq C_i, P_i \\leq 100$, $0 \\leq L_i \\leq 10^6$), representing the initial cave number, the number of caves moved each year, and the lifespan value for each savage.", "outputFormat": "Output a single number $M$, the minimum possible number of caves. It is guaranteed that the input has a solution and $M \\leq 10^6$.", "hint": "$1 \\leq n \\leq 15$, $1 \\leq C_i, P_i \\leq 100$, $0 \\leq L_i \\leq 10^6$.  \nIt is guaranteed that $M \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2002] 荒岛野人", "background": null, "description": "克里特岛以野人群居而著称。岛上有排列成环形的 $m$ 个山洞。这些山洞顺时针编号为 $1,2,\\dots ,m$。岛上住着 $n$ 个野人，一开始依次住在山洞 $C_1,C_2,\\dots ,C_n$ 中，以后每年，第 $i$ 个野人会沿顺时针向前走 $P_i$ 个洞住下来。\n\n每个野人 $i$ 有一个寿命值 $L_i$，即生存的年数。\n\n下面四幅图描述了一个有 $6$ 个山洞，住有三个野人的岛上前四年的情况。三个野人初始的洞穴编号依次为 $1,2,3$；每年要走过的洞穴数依次为 $3,7,2$；寿命值依次为 $4,3,1$。\n\n![](https://cdn.luogu.com.cn/upload/pic/15476.png)\n\n奇怪的是，虽然野人有很多，但没有任何两个野人在有生之年处在同一个山洞中，使得小岛一直保持和平与宁静，这让科学家们很是惊奇。他们想知道，至少有多少个山洞，才能维持岛上的和平呢？", "inputFormat": "第 $1$ 行为一个整数 $n(1\\leq n\\leq 15)$，即野人的数目。\n\n第 $2$ 行到第 $N+1$ 每行为三个整数 $C_i, P_i, L_i (1\\leq C_i,P_i \\leq 100, 0\\leq L_i\\leq 10^6 )$，表示每个野人所住的初始洞穴编号，每年走过的洞穴数及寿命值。", "outputFormat": "仅包含一个数 $M$，即最少可能的山洞数。输入数据保证有解，且 $M$ 不大于 $10^6$。", "hint": "$1\\leq N\\leq 15$，$1\\leq C_i,P_i\\leq 100$，$0\\leq L_i\\leq 10^6$  \n\n保证 $M\\leq 10^6$", "locale": "zh-CN"}}}
{"pid": "P2422", "type": "P", "difficulty": 4, "samples": [["6\n3 1 6 4 5 2", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["倍增", "ST 表", "单调栈"], "title": "良好的感觉", "background": null, "description": "kkk 做了一个人体感觉分析器。每一天，人都有一个感受值 $A_i$，$A_i$ 越大，表示人感觉越舒适。在一段时间 $\\left[i, j\\right]$ 内，人的舒适程度定义为 $\\left[i, j\\right]$ 中最不舒服的那一天的感受值 $\\times$ $\\left[i, j\\right]$中每一天感受值的和。现在给出 kkk 在连续 $N$ 天中的感受值，请问，在哪一段时间，kkk 感觉最舒适？", "inputFormat": "第一行为 $N$，代表数据记录的天数。\n\n第二行 $N$ 个整数，代表每一天的感受值。", "outputFormat": "一行，表示在最舒适的一段时间中的感受值。", "hint": "kkk 最开心的一段时间是第 $3$ 天到第 $5$ 天，开心值：$(6+4+5)\\times4=60$。\n\n对于 $30\\%$ 的数据，$1\\le N\\le 100$。\n\n对于 $70\\%$ 的数据，$1\\le N\\le 2000$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^5$，$1\\le \\texttt{感受值}\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "{{Good Feelings}}", "background": "{{}}", "description": "{{kkk built a human sensation analyzer. Each day, a person has a feeling value $A_i$; the larger $A_i$, the more comfortable the person feels. Over a time segment $\\left[i, j\\right]$, a person's comfort level is defined as the feeling value on the least comfortable day in $\\left[i, j\\right]$ $\\times$ the sum of the feeling values of all days in $\\left[i, j\\right]$. Now, given kkk's feeling values over $N$ consecutive days, which time segment makes kkk feel the most comfortable?}}", "inputFormat": "{{The first line contains $N$, the number of days for which data was recorded.\nThe second line contains $N$ integers, the feeling value of each day.}}", "outputFormat": "{{Output one line: the comfort value of the most comfortable time segment.}}", "hint": "{{kkk's most comfortable time segment is from day $3$ to day $5$, comfort value: $(6+4+5)\\times4=60$.\n\nConstraints:\n- For $30\\%$ of the testdata, $1 \\le N \\le 100$.\n- For $70\\%$ of the testdata, $1 \\le N \\le 2000$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 10^5$, $1 \\le$ feeling value $\\le 10^6$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "良好的感觉", "background": null, "description": "kkk 做了一个人体感觉分析器。每一天，人都有一个感受值 $A_i$，$A_i$ 越大，表示人感觉越舒适。在一段时间 $\\left[i, j\\right]$ 内，人的舒适程度定义为 $\\left[i, j\\right]$ 中最不舒服的那一天的感受值 $\\times$ $\\left[i, j\\right]$中每一天感受值的和。现在给出 kkk 在连续 $N$ 天中的感受值，请问，在哪一段时间，kkk 感觉最舒适？", "inputFormat": "第一行为 $N$，代表数据记录的天数。\n\n第二行 $N$ 个整数，代表每一天的感受值。", "outputFormat": "一行，表示在最舒适的一段时间中的感受值。", "hint": "kkk 最开心的一段时间是第 $3$ 天到第 $5$ 天，开心值：$(6+4+5)\\times4=60$。\n\n对于 $30\\%$ 的数据，$1\\le N\\le 100$。\n\n对于 $70\\%$ 的数据，$1\\le N\\le 2000$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^5$，$1\\le \\texttt{感受值}\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2423", "type": "P", "difficulty": 6, "samples": [["1\n2 4 7\n1 2\n2 6 5 4\n1 1\n1 2\n1 3\n2 1\n2 2\n2 3\n2 4", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2012", "各省省选", "网络流", "河北", "二分图"], "title": "[HEOI2012] 朋友圈", "background": "原 双塔 请做P1651", "description": "在很久很久以前，曾经有两个国家和睦相处，无忧无虑的生活着．\n\n一年一度的评比大会开始了，作为和平的两国，一个朋友圈数量最多的永远都是最值得他人的尊敬，所以现在就是需要你求朋友圈的最大数目．两个国家看成是 AB 两国，现在是两个国家的描述：\n\n- A 国：每个人都有一个友善值，当两个 A 国人的友善值 $a,b$，如果 $(a\\mathbin{\\mathrm{xor}} b) \\bmod 2=1$，那么这两个人都是朋友，否则不是；\n- B 国：每个人都有一个友善值，当两个 B 国人的友善值 $a,b$，如果 $(a\\mathbin{\\mathrm{xor}} b) \\bmod 2=0$ 或者 $(a\\mathbin{\\mathrm{or}} b)$ 化成二进制有奇数个 $1$，那么两个人是朋友，否则不是朋友．\n\nA、B 两国之间的人也有可能是朋友，数据中将会给出 A、B 之间「朋友」的情况．\n\n对于朋友的定义，关系是是双向的．\n\n在 AB 两国，朋友圈的定义：一个朋友圈集合 $S$，满足 $S \\subset A \\cup B$，对于所有的 $i,j \\in S$，$i$ 和 $j$ 是朋友．\n", "inputFormat": "**本题包含多组数据．**\n\n- 第一行一个整数 $T$，表示输入数据总数．\n- 对于每组数据：\n  - 第 $1$ 行 $3$ 个整数 $A,B,M$，分别表示 A 国人数，B 国人数，AB 两国之间是朋友的对数．\n  - 第 $2$ 行 $A$ 个整数 $a_i$，表示 A 国第 $i$ 个人的友善值．\n  - 第 $3$ 行 $B$ 个整数 $b_i$，表示 B 国第 $i$ 个人的友善值．\n  - 第 $4$ 到第 $3+M$ 行，每行两个整数 $x,y$ 表示 A 国的第 $x$ 个人和 B 国第 $y$ 个人是朋友．", "outputFormat": "- 输出 $T$ 行，每行输出一个整数，表示最大朋友圈的数目．", "hint": "### 样例解释\n\n最大朋友圈包含 A 国第 $1,2$ 人和 B 国第 $1,2,3$ 人．\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 6$，$1 \\le a_i, b_i < 2^{31}$．\n\n本题共有两类数据，保证所有测试点均满足其中至少一类的限制：\n\n- 第一类：$1 \\le A \\le 200, 1 \\le B \\le 200$．\n- 第二类：$1 \\le A \\le 10, 1 \\le B \\le 3000$．", "locale": "zh-CN", "translations": {"en": {"title": "[HEOI2012] Friend Circles", "background": "Originally \"Shuangta\". Please solve P1651.", "description": "A very long time ago, there were two countries living in harmony and without worries.\n\nThe annual evaluation begins. As two peaceful countries, the one with the largest friend circle is always the most respected. So now you need to find the maximum size of a friend circle. The two countries are denoted as A and B, and their descriptions are as follows:\n\n- Country A: Each person has a friendliness value. For two people in Country A with friendliness values $a, b$, if $(a\\mathbin{\\mathrm{xor}} b) \\bmod 2=1$, then the two people are friends; otherwise they are not.\n- Country B: Each person has a friendliness value. For two people in Country B with friendliness values $a, b$, if $(a\\mathbin{\\mathrm{xor}} b) \\bmod 2=0$ or $(a\\mathbin{\\mathrm{or}} b)$ has an odd number of $1$ bits in binary, then the two people are friends; otherwise they are not.\n\nPeople between Countries A and B may also be friends. The testdata will provide the \"friend\" relations between A and B.\n\nFriendship is bidirectional.\n\nIn Countries A and B, a friend circle is defined as follows: a set $S$, satisfying $S \\subset A \\cup B$, such that for all $i,j \\in S$, $i$ and $j$ are friends.", "inputFormat": "This problem contains multiple test cases.\n\n- The first line contains an integer $T$, the number of test cases.\n- For each test case:\n  - Line 1 contains $3$ integers $A, B, M$, the number of people in Country A, the number of people in Country B, and the number of cross-country friend pairs, respectively.\n  - Line 2 contains $A$ integers $a_i$, the friendliness values of the $i$-th person in Country A.\n  - Line 3 contains $B$ integers $b_i$, the friendliness values of the $i$-th person in Country B.\n  - Lines $4$ to $3+M$: each line contains two integers $x, y$, indicating that the $x$-th person in Country A and the $y$-th person in Country B are friends.", "outputFormat": "Output $T$ lines, each containing an integer, the maximum size of a friend circle.", "hint": "Sample Explanation\n\nThe maximum friend circle contains the $1$-st and $2$-nd people of Country A and the $1$-st, $2$-nd, and $3$-rd people of Country B.\n\nConstraints\n\nFor $100\\%$ of the testdata, $1 \\le T \\le 6$, $1 \\le a_i, b_i < 2^{31}$.\n\nThere are two categories of testdata, and all test points satisfy at least one of the following:\n\n- Category 1: $1 \\le A \\le 200$, $1 \\le B \\le 200$.\n- Category 2: $1 \\le A \\le 10$, $1 \\le B \\le 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HEOI2012] 朋友圈", "background": "原 双塔 请做P1651", "description": "在很久很久以前，曾经有两个国家和睦相处，无忧无虑的生活着．\n\n一年一度的评比大会开始了，作为和平的两国，一个朋友圈数量最多的永远都是最值得他人的尊敬，所以现在就是需要你求朋友圈的最大数目．两个国家看成是 AB 两国，现在是两个国家的描述：\n\n- A 国：每个人都有一个友善值，当两个 A 国人的友善值 $a,b$，如果 $(a\\mathbin{\\mathrm{xor}} b) \\bmod 2=1$，那么这两个人都是朋友，否则不是；\n- B 国：每个人都有一个友善值，当两个 B 国人的友善值 $a,b$，如果 $(a\\mathbin{\\mathrm{xor}} b) \\bmod 2=0$ 或者 $(a\\mathbin{\\mathrm{or}} b)$ 化成二进制有奇数个 $1$，那么两个人是朋友，否则不是朋友．\n\nA、B 两国之间的人也有可能是朋友，数据中将会给出 A、B 之间「朋友」的情况．\n\n对于朋友的定义，关系是是双向的．\n\n在 AB 两国，朋友圈的定义：一个朋友圈集合 $S$，满足 $S \\subset A \\cup B$，对于所有的 $i,j \\in S$，$i$ 和 $j$ 是朋友．\n", "inputFormat": "**本题包含多组数据．**\n\n- 第一行一个整数 $T$，表示输入数据总数．\n- 对于每组数据：\n  - 第 $1$ 行 $3$ 个整数 $A,B,M$，分别表示 A 国人数，B 国人数，AB 两国之间是朋友的对数．\n  - 第 $2$ 行 $A$ 个整数 $a_i$，表示 A 国第 $i$ 个人的友善值．\n  - 第 $3$ 行 $B$ 个整数 $b_i$，表示 B 国第 $i$ 个人的友善值．\n  - 第 $4$ 到第 $3+M$ 行，每行两个整数 $x,y$ 表示 A 国的第 $x$ 个人和 B 国第 $y$ 个人是朋友．", "outputFormat": "- 输出 $T$ 行，每行输出一个整数，表示最大朋友圈的数目．", "hint": "### 样例解释\n\n最大朋友圈包含 A 国第 $1,2$ 人和 B 国第 $1,2,3$ 人．\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 6$，$1 \\le a_i, b_i < 2^{31}$．\n\n本题共有两类数据，保证所有测试点均满足其中至少一类的限制：\n\n- 第一类：$1 \\le A \\le 200, 1 \\le B \\le 200$．\n- 第二类：$1 \\le A \\le 10, 1 \\le B \\le 3000$．", "locale": "zh-CN"}}}
{"pid": "P2424", "type": "P", "difficulty": 5, "samples": [["2 4", "14"], ["123 321", "72543"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "整除分块"], "title": "约数和", "background": "Smart 最近沉迷于对约数的研究中。\n", "description": "对于一个数 $X$，函数 $f(X)$ 表示 $X$ 所有约数的和。例如：$f(6)=1+2+3+6=12$。对于一个 $X$，Smart 可以很快的算出 $f(X)$。现在的问题是，给定两个正整数 $X,Y(X<Y)$，Smart 希望尽快地算出 $f(X)+f(X+1)+……+f(Y)$的值，你能帮助 Smart 算出这个值吗？\n", "inputFormat": "输入文件仅一行，两个正整数 $X$ 和 $Y(X<Y)$，表示需要计算 $f(X)+f(X+1)+\\dots +f(Y)$。\n", "outputFormat": "输出只有一行，为 $f(X)+f(X+1)+\\dots+f(Y)$ 的值。\n", "hint": "对于 $20\\%$ 的数据有 $1\\leq X<Y\\leq 10^5$。\n\n对于 $60\\%$ 的数据有 $1\\leq X<Y\\leq 1\\times 10^7$。\n\n对于 $100\\%$ 的数据有 $1\\leq X<Y\\leq 2\\times 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Sum of Divisors", "background": "Smart has recently become obsessed with the study of divisors.", "description": "For a number $X$, the function $f(X)$ denotes the sum of all divisors of $X$. For example, $f(6)=1+2+3+6=12$. For a given $X$, Smart can quickly compute $f(X)$. Now, given two positive integers $X$ and $Y$ ($X<Y$), Smart wants to quickly compute the value of $f(X)+f(X+1)+\\dots+f(Y)$. Can you help Smart compute this value?", "inputFormat": "The input contains only one line with two positive integers $X$ and $Y$ ($X<Y$), indicating that you need to compute $f(X)+f(X+1)+\\dots+f(Y)$.", "outputFormat": "Output a single line containing the value of $f(X)+f(X+1)+\\dots+f(Y)$.", "hint": "For $20\\%$ of the testdata, $1 \\leq X < Y \\leq 10^5$.\nFor $60\\%$ of the testdata, $1 \\leq X < Y \\leq 1\\times 10^7$.\nFor $100\\%$ of the testdata, $1 \\leq X < Y \\leq 2\\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "约数和", "background": "Smart 最近沉迷于对约数的研究中。\n", "description": "对于一个数 $X$，函数 $f(X)$ 表示 $X$ 所有约数的和。例如：$f(6)=1+2+3+6=12$。对于一个 $X$，Smart 可以很快的算出 $f(X)$。现在的问题是，给定两个正整数 $X,Y(X<Y)$，Smart 希望尽快地算出 $f(X)+f(X+1)+……+f(Y)$的值，你能帮助 Smart 算出这个值吗？\n", "inputFormat": "输入文件仅一行，两个正整数 $X$ 和 $Y(X<Y)$，表示需要计算 $f(X)+f(X+1)+\\dots +f(Y)$。\n", "outputFormat": "输出只有一行，为 $f(X)+f(X+1)+\\dots+f(Y)$ 的值。\n", "hint": "对于 $20\\%$ 的数据有 $1\\leq X<Y\\leq 10^5$。\n\n对于 $60\\%$ 的数据有 $1\\leq X<Y\\leq 1\\times 10^7$。\n\n对于 $100\\%$ 的数据有 $1\\leq X<Y\\leq 2\\times 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2425", "type": "P", "difficulty": 5, "samples": [["4\n1\n4\n21\n345332", "2\n3\n2\n114"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "进制", "根号分治"], "title": "小红帽的回文数", "background": null, "description": "小红帽喜欢回文数，但生活中的数常常不是回文数。现在她手上有 $t$ 个数，现在她知道这 $t$ 个数分别在 $x$ 进制下是回文数（$x \\ge 2$），请你对于每个数求出最小的 $x$。", "inputFormat": "第一行为一个 $t$（$1 \\le t \\le 1000$）。\n\n接下来的 $t$ 行，每行为一个数 $a_i$（$0 \\le a_i \\le 10 ^ {10}$）。", "outputFormat": "输出有 $t$ 行，每行为所求的 $x$。", "hint": "$1$ 在二进制下为 $1$，$4$ 在三进制下为 $11$。\n\n$21$ 在 $2$ 进制下为 $1\\ 0\\ 1\\ 0\\ 1$，$345332$ 在 $114$ 进制下为 $26\\ 65\\ 26$。", "locale": "zh-CN", "translations": {"en": {"title": "Little Red Riding Hood's Palindromic Numbers", "background": "", "description": "Little Red Riding Hood likes palindromic numbers, but numbers in real life are often not palindromes. Now she has $t$ numbers. She knows that each of these $t$ numbers is a palindrome in base $x$ ($x \\ge 2$). For each number, find the smallest such base $x$.", "inputFormat": "The first line contains an integer $t$ ($1 \\le t \\le 1000$).\nEach of the next $t$ lines contains a number $a_i$ ($0 \\le a_i \\le 10 ^ {10}$).", "outputFormat": "Output $t$ lines. Each line contains the required $x$.", "hint": "$1$ in binary is $1$, and $4$ in base $3$ is $11$.\n$21$ in base $2$ is $1\\ 0\\ 1\\ 0\\ 1$, and $345332$ in base $114$ is $26\\ 65\\ 26$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小红帽的回文数", "background": null, "description": "小红帽喜欢回文数，但生活中的数常常不是回文数。现在她手上有 $t$ 个数，现在她知道这 $t$ 个数分别在 $x$ 进制下是回文数（$x \\ge 2$），请你对于每个数求出最小的 $x$。", "inputFormat": "第一行为一个 $t$（$1 \\le t \\le 1000$）。\n\n接下来的 $t$ 行，每行为一个数 $a_i$（$0 \\le a_i \\le 10 ^ {10}$）。", "outputFormat": "输出有 $t$ 行，每行为所求的 $x$。", "hint": "$1$ 在二进制下为 $1$，$4$ 在三进制下为 $11$。\n\n$21$ 在 $2$ 进制下为 $1\\ 0\\ 1\\ 0\\ 1$，$345332$ 在 $114$ 进制下为 $26\\ 65\\ 26$。", "locale": "zh-CN"}}}
{"pid": "P2426", "type": "P", "difficulty": 3, "samples": [["6\n54 29 196 21 133 118\n", "768"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "删数", "background": "", "description": "有 $N$ 个不同的正整数 $x_1$, $x_2$, ..., $x_N$ 排成一排，我们可以从左边或右边去掉连续的 $i$ $(1 \\le i \\le n)$ 个数（只能从两边删除数），剩下 $N-i$ 个数，再把剩下的数按以上操作处理，直到所有的数都被删除为止。\n\n每次操作都有一个操作价值，比如现在要删除从 $i$ 位置到 $k$ 位置上的所有的数。操作价值为 $|x_i-x_k| \\times (k-i+1)$ ，如果只去掉一个数，操作价值为这个数的值。\n问如何操作可以得到最大值，求操作的最大价值。", "inputFormat": "第一行为一个正整数 $N$ ;\n\n第二行有 $N$ 个用空格隔开的 $N$ 个不同的正整数。", "outputFormat": "一行，包含一个正整数，为操作的最大值", "hint": "**【样例解释和说明】**\n\n说明，经过 $3$ 次操作可以得到最大值，第一次去掉前面 $3$ 个数：$54$ 、$29$ 、$196$ ，操作价值为 $426$。第二次操作是在剩下的三个数 $(21,133,118)$ 中去掉最后一个数$118$，操作价值为 $118$。第三次操作去掉剩下的 $2$ 个数：$21$ 和 $133$ ，操作价值为 $224$。操作总价值为 $426+118+224=768$ 。\n\n**【数据范围】**\n\n$3≤N≤100$ ，$1 \\le x_i \\le 1000$", "locale": "zh-CN", "translations": {"en": {"title": "Deleting Numbers", "background": "", "description": "There are $N$ distinct positive integers $x_1, x_2, \\dots, x_N$ arranged in a row. At each operation, you may remove a consecutive block of $i$ numbers ($1 \\le i \\le N$) from either the left end or the right end only. After removing, $N - i$ numbers remain; continue applying the same operation until all numbers are removed.\n\nEach operation has a value. Suppose you remove all numbers from position $i$ to position $k$ (inclusive). The operation value is $|x_i - x_k| \\times (k - i + 1)$. If you remove exactly one number, the operation value equals the value of that number.\n\nFind how to operate to obtain the maximum possible total value, and output that maximum total value.", "inputFormat": "- The first line contains a positive integer $N$.\n- The second line contains $N$ space-separated distinct positive integers.", "outputFormat": "Output one line containing a single positive integer: the maximum total value.", "hint": "**Sample explanation and notes**\n\nIt is possible to achieve the maximum value in 3 operations. First, remove the first 3 numbers: $54$, $29$, $196$, with operation value 426. Second, among the remaining three numbers $(21, 133, 118)$, remove the last number $118$, with operation value $118$. Third, remove the remaining two numbers $21$ and $133$, with operation value $224$. The total operation value is $426 + 118 + 224 = 768$.\n\n**Constraints**\n\n$3 \\le N \\le 100$, $1 \\le x_i \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "删数", "background": "", "description": "有 $N$ 个不同的正整数 $x_1$, $x_2$, ..., $x_N$ 排成一排，我们可以从左边或右边去掉连续的 $i$ $(1 \\le i \\le n)$ 个数（只能从两边删除数），剩下 $N-i$ 个数，再把剩下的数按以上操作处理，直到所有的数都被删除为止。\n\n每次操作都有一个操作价值，比如现在要删除从 $i$ 位置到 $k$ 位置上的所有的数。操作价值为 $|x_i-x_k| \\times (k-i+1)$ ，如果只去掉一个数，操作价值为这个数的值。\n问如何操作可以得到最大值，求操作的最大价值。", "inputFormat": "第一行为一个正整数 $N$ ;\n\n第二行有 $N$ 个用空格隔开的 $N$ 个不同的正整数。", "outputFormat": "一行，包含一个正整数，为操作的最大值", "hint": "**【样例解释和说明】**\n\n说明，经过 $3$ 次操作可以得到最大值，第一次去掉前面 $3$ 个数：$54$ 、$29$ 、$196$ ，操作价值为 $426$。第二次操作是在剩下的三个数 $(21,133,118)$ 中去掉最后一个数$118$，操作价值为 $118$。第三次操作去掉剩下的 $2$ 个数：$21$ 和 $133$ ，操作价值为 $224$。操作总价值为 $426+118+224=768$ 。\n\n**【数据范围】**\n\n$3≤N≤100$ ，$1 \\le x_i \\le 1000$", "locale": "zh-CN"}}}
{"pid": "P2427", "type": "P", "difficulty": 3, "samples": [["5 5 3\nabbaa\nabbaa\naaaaa\naaaaa\naaaaa\n1 2\n1 4\n3 2\n", "1\n1\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "Wave", "background": "", "description": "波在不同的介质中的传播速度是不一样的。真空中波速都是 $3\\times {10}^8$ m/s，而在液体介质中的波速会比真空中的波速小，并且在不同的液体介质中波速不一样。我们将一个液体表面分成 $N \\times M$ 块相同大小的正方形格子，每个格子中只包含一种液体介质。现在我们想知道，从某个波源传出去的波能以不变的波速延伸到多大的以波源为中心的大正方形内。假定所有大正方形的边都是平行于坐标轴的。", "inputFormat": "输入文件第一行包含三个整数 $N, M, Q$，分别表示液体表面分成的正方形格子的行数和列数，以及询问的个数。接下来是一个 $N \\times M$ 的矩阵，其中每个元素包含一个小写字母表示相应各自内的介质，不同的字母表示不同的介质。接下来 $Q$ 行每行用两个数 $X$ 和 $Y$ 描述一个询问，表示询问以第 $X$ 行第 $Y$ 列为波源的波能以不变的波速延伸到的最大的以波源为中心的大正方形的边长。注意行的标号从 $0$ 到 $N-1$，列的标号从 $0$ 到 $M-1$。", "outputFormat": "输出文件包括 $Q$ 行，每行包含一个整数，即相应问题的答案。", "hint": "对于 $30\\%$ 的数据，有 $1 \\le N,M \\le 50$，$1 \\le Q \\le 500$；\n\n对于 $100\\%$ 的数据，有 $1 \\le N,M \\le 1000$，$1 \\le Q \\le 10000$。", "locale": "zh-CN", "translations": {"en": {"title": "Wave", "background": "", "description": "The propagation speed of waves differs across media. In vacuum, all wave speeds are $3\\times {10}^8$ m/s, while in liquid media the wave speed is lower than in vacuum and also varies between different liquid media. We divide a liquid surface into an $N \\times M$ grid of equal-sized square cells, each cell containing exactly one liquid medium. We want to know, for a wave emitted from some source, how large an axis-aligned square centered at the source the wave can extend to while maintaining an unchanged wave speed. Assume all such squares are axis-aligned with the coordinate axes.", "inputFormat": "The first line contains three integers $N, M, Q$, denoting the number of rows and columns of the grid and the number of queries, respectively. Then follows an $N \\times M$ matrix in which each element is a lowercase letter representing the medium in the corresponding cell; different letters denote different media. Then follow $Q$ lines, each with two integers $X$ and $Y$ describing a query: the side length of the largest axis-aligned square centered at row $X$, column $Y$ within which the wave can extend while maintaining an unchanged wave speed is requested. Rows are numbered from $0$ to $N-1$, and columns from $0$ to $M-1$.", "outputFormat": "Output $Q$ lines, each containing one integer, the answer to the corresponding query.", "hint": "For $30\\%$ of the testdata, $1 \\le N, M \\le 50$, $1 \\le Q \\le 500$.\n\nFor $100\\%$ of the testdata, $1 \\le N, M \\le 1000$, $1 \\le Q \\le 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Wave", "background": "", "description": "波在不同的介质中的传播速度是不一样的。真空中波速都是 $3\\times {10}^8$ m/s，而在液体介质中的波速会比真空中的波速小，并且在不同的液体介质中波速不一样。我们将一个液体表面分成 $N \\times M$ 块相同大小的正方形格子，每个格子中只包含一种液体介质。现在我们想知道，从某个波源传出去的波能以不变的波速延伸到多大的以波源为中心的大正方形内。假定所有大正方形的边都是平行于坐标轴的。", "inputFormat": "输入文件第一行包含三个整数 $N, M, Q$，分别表示液体表面分成的正方形格子的行数和列数，以及询问的个数。接下来是一个 $N \\times M$ 的矩阵，其中每个元素包含一个小写字母表示相应各自内的介质，不同的字母表示不同的介质。接下来 $Q$ 行每行用两个数 $X$ 和 $Y$ 描述一个询问，表示询问以第 $X$ 行第 $Y$ 列为波源的波能以不变的波速延伸到的最大的以波源为中心的大正方形的边长。注意行的标号从 $0$ 到 $N-1$，列的标号从 $0$ 到 $M-1$。", "outputFormat": "输出文件包括 $Q$ 行，每行包含一个整数，即相应问题的答案。", "hint": "对于 $30\\%$ 的数据，有 $1 \\le N,M \\le 50$，$1 \\le Q \\le 500$；\n\n对于 $100\\%$ 的数据，有 $1 \\le N,M \\le 1000$，$1 \\le Q \\le 10000$。", "locale": "zh-CN"}}}
{"pid": "P2428", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 2\n2 3 4\n1 3 6\n", "2.00\n0.00\n4.00\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "图论", "图遍历"], "title": "债务清单", "background": "", "description": "HZGD 刚刚带领着他的 $N$ 个学生参加完第 LXX 届 NOI。但他的学生发现他们本应该报销的费用还一直拖欠着，于是纷纷找 HZGD 要他给他们报销。不过麻烦的是，学生们总是成双成对的找他，并且只报告他们的债务总和，有的人可能来报告好几次。这让 HZGD 非常难办，他不知道是不是有些人会谎报债务，于是他希望能够列出一张债务清单。\n", "inputFormat": "输入文件第一行包括两个正整数 $N$ 和 $M$，分别表示学生人数和向 HZGD 来报告的总次数，接下来 $M$ 行每行三个整数，分别为来报告的两个学生以及他们报告的债务总和。\n", "outputFormat": "输出文件为一张 $N$ 行的债务清单，第 $i$ 行对应第 $i$ 个学生的债务数额，所有数额保留两位小数。如果无法列出这样一张清单，则输出 `IMPOSSIBLE`。对于有解的数据保证有唯一解。\n", "hint": "对于 $30\\%$ 的数据，有 $1 ≤ N ≤ 10,1 ≤ M ≤ 55$；\n\n对于 $60\\%$ 的数据，有 $1 ≤ N ≤ 100,1 ≤ M ≤ 1000$；\n\n对于 $100\\%$ 的数据，有 $1 ≤ N ≤ 1000,1 ≤ M ≤ 10^5$，所有输入数据不超过 $2\\times 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Debt List", "background": "", "description": "HZGD has just led his $N$ students to the LXX-th NOI. But his students realized that the expenses they should have been reimbursed are still overdue, so they all came to HZGD asking for reimbursement. The trouble is, students always come in pairs and only report the sum of their debts, and some people may report multiple times. This makes it very difficult for HZGD, and he suspects some might be misreporting. He wants to compile a debt list.", "inputFormat": "The first line contains two positive integers $N$ and $M$, the number of students and the total number of times they report to HZGD. Each of the next $M$ lines contains three integers: the two students who report together and the sum of their reported debts.", "outputFormat": "Output an $N$-line debt list. The $i$-th line corresponds to the debt amount of student $i$, with all amounts printed to two decimal places. If such a list cannot be produced, output `IMPOSSIBLE`. For inputs where a solution exists, it is guaranteed to be unique.", "hint": "- For $30\\%$ of the testdata, $1 \\le N \\le 10, 1 \\le M \\le 55$.\n- For $60\\%$ of the testdata, $1 \\le N \\le 100, 1 \\le M \\le 1000$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 1000, 1 \\le M \\le 10^5$, and all input integers do not exceed $2 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "债务清单", "background": "", "description": "HZGD 刚刚带领着他的 $N$ 个学生参加完第 LXX 届 NOI。但他的学生发现他们本应该报销的费用还一直拖欠着，于是纷纷找 HZGD 要他给他们报销。不过麻烦的是，学生们总是成双成对的找他，并且只报告他们的债务总和，有的人可能来报告好几次。这让 HZGD 非常难办，他不知道是不是有些人会谎报债务，于是他希望能够列出一张债务清单。\n", "inputFormat": "输入文件第一行包括两个正整数 $N$ 和 $M$，分别表示学生人数和向 HZGD 来报告的总次数，接下来 $M$ 行每行三个整数，分别为来报告的两个学生以及他们报告的债务总和。\n", "outputFormat": "输出文件为一张 $N$ 行的债务清单，第 $i$ 行对应第 $i$ 个学生的债务数额，所有数额保留两位小数。如果无法列出这样一张清单，则输出 `IMPOSSIBLE`。对于有解的数据保证有唯一解。\n", "hint": "对于 $30\\%$ 的数据，有 $1 ≤ N ≤ 10,1 ≤ M ≤ 55$；\n\n对于 $60\\%$ 的数据，有 $1 ≤ N ≤ 100,1 ≤ M ≤ 1000$；\n\n对于 $100\\%$ 的数据，有 $1 ≤ N ≤ 1000,1 ≤ M ≤ 10^5$，所有输入数据不超过 $2\\times 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P2429", "type": "P", "difficulty": 4, "samples": [["2 15\n3 5", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "数学", "2016", "洛谷原创", "容斥原理", "洛谷月赛"], "title": "制杖题", "background": "", "description": "求不大于 $m$ 的、质因数集与给定质数集有交集的自然数之和。\n", "inputFormat": "第一行，两个整数 $n, m$。\n\n第二行，$n$ 个整数，表示质数集内的元素 $p_i$。\n", "outputFormat": "一个整数，表示答案，对 $376544743$ 取模。\n", "hint": "样例解释：所有符合条件的数为 $3,5,6,9,10,12,15$，其和为 $60$。\n\n| 测试点编号 | 规模 |\n|:-:|:-:|\n| $1 \\sim 3$ | $n m \\le {10}^7$ |\n| $4 \\sim 5$ | $n \\le 2$，$m \\le {10}^9$ |\n| $6 \\sim 7$ | $n \\le 20$，$m \\le {10}^8$ |\n| $8 \\sim 10$ | $n \\le 20$，$m \\le {10}^9$ |\n\n对于前 $30 \\%$ 的数据，$1 \\le n, m$。\n\n对于后 $70 \\%$ 的数据，$1 \\le n \\le 20$，$1 \\le m \\le {10}^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Silly Problem", "background": "", "description": "Find the sum of all natural numbers not exceeding $m$ whose set of prime factors intersects the given set of primes.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $n$ integers $p_i$, representing the elements of the prime set.", "outputFormat": "Output one integer, the answer modulo $376544743$.", "hint": "Sample explanation: All qualifying numbers are $3, 5, 6, 9, 10, 12, 15$, and their sum is $60$.\n\n| Test point ID | Constraints |\n|:-:|:-:|\n| $1 \\sim 3$ | $n m \\le {10}^7$ |\n| $4 \\sim 5$ | $n \\le 2$，$m \\le {10}^9$ |\n| $6 \\sim 7$ | $n \\le 20$，$m \\le {10}^8$ |\n| $8 \\sim 10$ | $n \\le 20$，$m \\le {10}^9$ |\n\nFor the first $30\\%$ of the testdata, $1 \\le n, m$.\n\nFor the remaining $70\\%$ of the testdata, $1 \\le n \\le 20$，$1 \\le m \\le {10}^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "制杖题", "background": "", "description": "求不大于 $m$ 的、质因数集与给定质数集有交集的自然数之和。\n", "inputFormat": "第一行，两个整数 $n, m$。\n\n第二行，$n$ 个整数，表示质数集内的元素 $p_i$。\n", "outputFormat": "一个整数，表示答案，对 $376544743$ 取模。\n", "hint": "样例解释：所有符合条件的数为 $3,5,6,9,10,12,15$，其和为 $60$。\n\n| 测试点编号 | 规模 |\n|:-:|:-:|\n| $1 \\sim 3$ | $n m \\le {10}^7$ |\n| $4 \\sim 5$ | $n \\le 2$，$m \\le {10}^9$ |\n| $6 \\sim 7$ | $n \\le 20$，$m \\le {10}^8$ |\n| $8 \\sim 10$ | $n \\le 20$，$m \\le {10}^9$ |\n\n对于前 $30 \\%$ 的数据，$1 \\le n, m$。\n\n对于后 $70 \\%$ 的数据，$1 \\le n \\le 20$，$1 \\le m \\le {10}^9$。", "locale": "zh-CN"}}}
{"pid": "P2430", "type": "P", "difficulty": 2, "samples": [["1 2\n6 4\n1 2 3 4\n1 5\n2 6\n3 3\n4 8\n3 3\n4 5\n20", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "严酷的训练", "background": "Lj 的朋友 WKY 是一名神奇的少年，在同龄人之中有着极高的地位。。。\n", "description": "他的老师老王对他的程序水平赞叹不已，于是下决心培养这名小子。\n\n老王的训练方式很奇怪，他会一口气让 WKY 做很多道题，要求他在规定的时间完成。而老王为了让自己的威信提高，自己也会把这些题都做一遍。\n\nWKY 和老王都有一个水平值，他们水平值的比值和做这些题所用时间的比值成反比。比如如果 WKY 的水平值是 $1$，老王的水平值是 $2$，那么 WKY 做同一道题的时间就是老王的 $2$ 倍。\n\n每个题目有他所属的知识点，这我们都知道，比如递归，动规，最短路，网络流。在这里我们不考虑这些事情，我们只知道他们分别是知识点 $1$，知识点 $2$……每一个知识点有他对应的难度，比如动态规划经常难于模拟。\n\n而每一个同一知识点下的题目，对于 WKY 来讲，都是一样难的。而做出每一道题，老王都有其独特的奖励值。而奖励值和题目的知识点没有必然联系。\n\n现在 WKY 同学请你帮忙，计算在老王规定的时间内，WKY 所能得到最大奖励值是多少 。\n", "inputFormat": "输入文件包括以下内容：\n\n第一行：\n\nWKY 的水平值和老王的水平值。\n\n数据保证 WKY 的水平值小于老王的水平值（哪怕它不现实），且老王的水平值是 WKY 的水平值的整数倍。\n\n第二行：\n\n题目的总数 $m$ 和知识点的总数 $n$。\n\n第三行：\n\n$n$ 个整数。第 $i$ 个整数表示老王在做第 $i$ 个知识点的题目所需的时间。\n\n接下来有 $m$ 行数每一行包括两个整数 $p$，$q$ 。$p$ 表示该题目所属的知识点，$q$ 表示该题目对应的奖励值。\n\n最后一行是规定的时间。", "outputFormat": "输出文件只有一行，表示能到得到的最大奖励值。\n", "hint": "对于 $100 \\%$ 的数据，$1 \\leq n, m \\leq 100$，规定时间 $\\leq 5000$。$1 \\leq p \\leq n$，$1 \\leq q \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Harsh Training", "background": "Lj’s friend WKY is a magical boy who holds very high status among his peers.", "description": "His teacher Lao Wang is amazed by his programming skills and decides to train this kid.\n\nLao Wang’s training method is unusual: he makes WKY solve many problems in one go and requires him to finish within a specified time. To raise his own prestige, Lao Wang also solves all these problems himself.\n\nWKY and Lao Wang each have a skill value. The ratio of their skill values is inversely proportional to the ratio of the time they need to solve the same problem. For example, if WKY’s skill value is $1$ and Lao Wang’s skill value is $2$, then the time WKY needs to solve the same problem is $2$ times Lao Wang’s time.\n\nEach problem belongs to a “knowledge point” such as recursion, dynamic programming, shortest paths, or network flow. Here we do not consider the semantics of these topics; we only label them as knowledge point $1$, knowledge point $2$, and so on. Each knowledge point has its own difficulty.\n\nFor WKY, all problems under the same knowledge point take the same amount of time. Each problem has a unique reward value assigned by Lao Wang, and this reward has no necessary connection with the problem’s knowledge point.\n\nNow WKY asks you to help compute the maximum total reward he can obtain within the time specified by Lao Wang.", "inputFormat": "The input contains the following:\n\n- First line: WKY’s skill value and Lao Wang’s skill value. It is guaranteed that WKY’s skill value is less than Lao Wang’s (even if that seems unrealistic), and Lao Wang’s skill value is an integer multiple of WKY’s skill value.\n- Second line: the total number of problems $m$ and the total number of knowledge points $n$.\n- Third line: $n$ integers. The $i$-th integer is the time Lao Wang needs to solve one problem whose knowledge point is $i$.\n- Next $m$ lines: each line contains two integers $p$, $q$. Here $p$ is the problem’s knowledge point, and $q$ is its reward value.\n- Last line: the specified total time limit.", "outputFormat": "Output one line with the maximum total reward WKY can obtain.", "hint": "Constraints:\n\n- For $100\\%$ of the testdata: $1 \\leq n, m \\leq 100$, time limit $\\leq 5000$. $1 \\leq p \\leq n$, $1 \\leq q \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "严酷的训练", "background": "Lj 的朋友 WKY 是一名神奇的少年，在同龄人之中有着极高的地位。。。\n", "description": "他的老师老王对他的程序水平赞叹不已，于是下决心培养这名小子。\n\n老王的训练方式很奇怪，他会一口气让 WKY 做很多道题，要求他在规定的时间完成。而老王为了让自己的威信提高，自己也会把这些题都做一遍。\n\nWKY 和老王都有一个水平值，他们水平值的比值和做这些题所用时间的比值成反比。比如如果 WKY 的水平值是 $1$，老王的水平值是 $2$，那么 WKY 做同一道题的时间就是老王的 $2$ 倍。\n\n每个题目有他所属的知识点，这我们都知道，比如递归，动规，最短路，网络流。在这里我们不考虑这些事情，我们只知道他们分别是知识点 $1$，知识点 $2$……每一个知识点有他对应的难度，比如动态规划经常难于模拟。\n\n而每一个同一知识点下的题目，对于 WKY 来讲，都是一样难的。而做出每一道题，老王都有其独特的奖励值。而奖励值和题目的知识点没有必然联系。\n\n现在 WKY 同学请你帮忙，计算在老王规定的时间内，WKY 所能得到最大奖励值是多少 。\n", "inputFormat": "输入文件包括以下内容：\n\n第一行：\n\nWKY 的水平值和老王的水平值。\n\n数据保证 WKY 的水平值小于老王的水平值（哪怕它不现实），且老王的水平值是 WKY 的水平值的整数倍。\n\n第二行：\n\n题目的总数 $m$ 和知识点的总数 $n$。\n\n第三行：\n\n$n$ 个整数。第 $i$ 个整数表示老王在做第 $i$ 个知识点的题目所需的时间。\n\n接下来有 $m$ 行数每一行包括两个整数 $p$，$q$ 。$p$ 表示该题目所属的知识点，$q$ 表示该题目对应的奖励值。\n\n最后一行是规定的时间。", "outputFormat": "输出文件只有一行，表示能到得到的最大奖励值。\n", "hint": "对于 $100 \\%$ 的数据，$1 \\leq n, m \\leq 100$，规定时间 $\\leq 5000$。$1 \\leq p \\leq n$，$1 \\leq q \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2431", "type": "P", "difficulty": 4, "samples": [["16 25", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "2015", "洛谷原创", "进制", "洛谷月赛"], "title": "正妹吃月饼", "background": null, "description": "今天是中秋节。uim 带来了一堆大小不同且味道各异的月饼。\n\n这些月饼的质量分别是 $1\\text{g},2\\text{g},4\\text{g},8\\text{g},16\\text{g}$....后面一个是前面的 $2$ 倍。每种只有一个。\n\nuim 让正妹随便吃。\n\n正妹希望尝试尽可能多的口味，所以会吃尽可能多数量的月饼（不是重量）。而且她的确有些饿了，至少总共要吃掉 $A\\text{g}$ 的月饼才能满足。\n\n然而正妹怕长胖，所以吃月饼不能合计超过 $B\\text{g}$ 。\n\n她希望知道自己最多能吃多少个月饼", "inputFormat": "共一行，包含两个数，$A,B$。", "outputFormat": "正妹能吃到最多的数量。", "hint": "**样例解释**：\n\n正妹可以吃 $1,2,4,16$ 这 $4$ 个月饼（吃法可能不唯一）。\n\n**数据范围**：\n\n对于 $30\\%$ 数据，$1\\le A \\le B \\le 1000$；\n\n对于 $60\\%$ 数据，$1 \\le A \\le B \\le 100000$；\n\n对于 $100\\%$ 数据，$1 \\le A \\le B \\le 2^{63}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "Pretty Girl Eats Mooncakes", "background": "", "description": "Today is the Mid-Autumn Festival. uim brought a bunch of mooncakes of different sizes and flavors.\n\nThe masses of these mooncakes are $1g,2g,4g,8g,16g$... each one is twice the previous. There is exactly one of each kind.\n\nuim lets the pretty girl eat whatever she wants.\n\nShe wants to try as many flavors as possible, so she will eat as many mooncakes as possible (by count, not by weight). Also, she is indeed a bit hungry; she needs to eat at least $A\\text{g}$ in total to be satisfied.\n\nHowever, she is afraid of gaining weight, so the total amount of mooncakes she eats cannot exceed $B\\text{g}$.\n\nShe wants to know the maximum number of mooncakes she can eat.", "inputFormat": "One line containing two numbers, $A,B$.", "outputFormat": "Output the maximum number of mooncakes she can eat.", "hint": "Sample Explanation:\n\nShe can eat $1,2,4,16$, which are $4$ mooncakes (there may be multiple ways).\n\nConstraints:\n\nFor $30\\%$ of the testdata, $1 \\le A,B \\le 1000$;\n\nFor $60\\%$ of the testdata, $1 \\le A,B \\le 100000$;\n\nFor $100\\%$ of the testdata, $1 \\le A,B \\le 2^{63}-1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "正妹吃月饼", "background": null, "description": "今天是中秋节。uim 带来了一堆大小不同且味道各异的月饼。\n\n这些月饼的质量分别是 $1\\text{g},2\\text{g},4\\text{g},8\\text{g},16\\text{g}$....后面一个是前面的 $2$ 倍。每种只有一个。\n\nuim 让正妹随便吃。\n\n正妹希望尝试尽可能多的口味，所以会吃尽可能多数量的月饼（不是重量）。而且她的确有些饿了，至少总共要吃掉 $A\\text{g}$ 的月饼才能满足。\n\n然而正妹怕长胖，所以吃月饼不能合计超过 $B\\text{g}$ 。\n\n她希望知道自己最多能吃多少个月饼", "inputFormat": "共一行，包含两个数，$A,B$。", "outputFormat": "正妹能吃到最多的数量。", "hint": "**样例解释**：\n\n正妹可以吃 $1,2,4,16$ 这 $4$ 个月饼（吃法可能不唯一）。\n\n**数据范围**：\n\n对于 $30\\%$ 数据，$1\\le A \\le B \\le 1000$；\n\n对于 $60\\%$ 数据，$1 \\le A \\le B \\le 100000$；\n\n对于 $100\\%$ 数据，$1 \\le A \\le B \\le 2^{63}-1$。", "locale": "zh-CN"}}}
{"pid": "P2432", "type": "P", "difficulty": 4, "samples": [["2 8\ncatotail\ncat\ntail", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创"], "title": "zxbsmk爱查错", "background": "zxbsmk 在暑假回了一趟老家，见到了自己的外婆。然而他遇到了一个问题。", "description": "外婆很喜欢给别人写信，然而因为年纪大了，信里面充斥着各种错误。所以 zxbsmk 打算帮外婆修正每个错误的句子。\n\n因为外婆的文化水平很高，所以她写的句子都是英文句子，并且句子内的字母都是小写字母。然而 zxbsmk 的英语水平非常低，所以他买来了一本英语词典，词典里一共有 $W (1 \\leq W \\leq 600)$ 个单词，每个单词的长度都不超过 $25$ 个字母，而且都是由小写字母组成的。\n\n那么再来看一下外婆的句子都有什么错误。例如，外婆写的一个句子是 `catotail`，这并没有什么意义，因为一个多余的字母 `o` 出现了，所以正确的句子应该是 `cattail`。\n\n已知外婆的句子是由 $L (2 \\leq L \\leq 300)$ 个字母组成的。其中有一些字母是多余的。现在，请你借助 zxbsmk 的词典，帮助他修正外婆的句子。而且你必须尽量少地去除多余的字母，使剩余的字母是一个合法的句子。", "inputFormat": "第一行：输入两个整数 $W$ 和 $L$。\n\n第二行：输入 $L$ 个字符，表示需要修正的句子。\n\n之后的 $W$ 行，每行输入一个合法的单词。", "outputFormat": "一个整数，表示最少需要剔除的字母数。", "hint": "`catotail` $\\to$ `cattail`", "locale": "zh-CN", "translations": {"en": {"title": "zxbsmk Loves Checking Errors", "background": "During the summer vacation, zxbsmk went back to his hometown and met his grandmother. However, he ran into a problem.", "description": "Grandmother loves writing letters, but because of her age, her letters are full of various mistakes. So zxbsmk plans to fix every erroneous sentence for her.\n\nSince grandmother is very well educated, all the sentences she writes are English sentences, and the letters in the sentences are all lowercase. However, zxbsmk’s English is very poor, so he bought an English dictionary containing $W (1 \\leq W \\leq 600)$ words. Each word has a length of at most $25$ letters, and all are composed of lowercase letters.\n\nNow let’s look at what kind of mistakes appear in grandmother’s sentences. For example, one of the sentences she wrote is `catotail`. This makes no sense, because an extra letter `o` appeared, so the correct sentence should be `cattail`.\n\nIt is known that grandmother’s sentence consists of $L (2 \\leq L \\leq 300)$ letters. Some letters are extra. Now, with the help of zxbsmk’s dictionary, please help him fix grandmother’s sentence. You must remove as few extra letters as possible so that the remaining letters form a valid sentence.", "inputFormat": "The first line contains two integers $W$ and $L$.\n\nThe second line contains a string of length $L$, representing the sentence to be corrected.\n\nThen follow $W$ lines, each containing one valid word.", "outputFormat": "Output a single integer, the minimum number of letters that need to be removed.", "hint": "`catotail` $\\to$ `cattail`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "zxbsmk爱查错", "background": "zxbsmk 在暑假回了一趟老家，见到了自己的外婆。然而他遇到了一个问题。", "description": "外婆很喜欢给别人写信，然而因为年纪大了，信里面充斥着各种错误。所以 zxbsmk 打算帮外婆修正每个错误的句子。\n\n因为外婆的文化水平很高，所以她写的句子都是英文句子，并且句子内的字母都是小写字母。然而 zxbsmk 的英语水平非常低，所以他买来了一本英语词典，词典里一共有 $W (1 \\leq W \\leq 600)$ 个单词，每个单词的长度都不超过 $25$ 个字母，而且都是由小写字母组成的。\n\n那么再来看一下外婆的句子都有什么错误。例如，外婆写的一个句子是 `catotail`，这并没有什么意义，因为一个多余的字母 `o` 出现了，所以正确的句子应该是 `cattail`。\n\n已知外婆的句子是由 $L (2 \\leq L \\leq 300)$ 个字母组成的。其中有一些字母是多余的。现在，请你借助 zxbsmk 的词典，帮助他修正外婆的句子。而且你必须尽量少地去除多余的字母，使剩余的字母是一个合法的句子。", "inputFormat": "第一行：输入两个整数 $W$ 和 $L$。\n\n第二行：输入 $L$ 个字符，表示需要修正的句子。\n\n之后的 $W$ 行，每行输入一个合法的单词。", "outputFormat": "一个整数，表示最少需要剔除的字母数。", "hint": "`catotail` $\\to$ `cattail`", "locale": "zh-CN"}}}
{"pid": "P2433", "type": "P", "difficulty": 2, "samples": [["2", "6 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "提交答案"], "title": "【深基1-2】小学数学 N 合一", "background": "", "description": "### 问题 1\n\n请输出 `I love Luogu!`\n\n### 问题 2\n\n这里有 $10$ 个苹果，小 A 拿走了 $2$ 个，Uim 拿走了 $4$ 个，小 B 拿走剩下的所有的苹果。我们想知道：\n\n1. 小 A 和 Uim 两个人一共拿走多少苹果？\n2. 小 B 能拿走多少苹果？\n\n现在需要编写一个程序，输出两个数字作为答案，中间使用空格分开。\n\n### 问题 3\n\n现在有 $14$ 个苹果。要均分给 $4$ 名同学，分不掉的苹果放回冰箱。请问：\n\n1. 每位同学能分得几个苹果？\n2. 一共分出去多少苹果？\n3. 把几个苹果放回冰箱？\n\n \t现在需要编写一个程序，输出三个数字作为答案，每个数字一行。\n\n### 问题 4\n\n现在有 $500$ 毫升的肥宅快乐水，要均分给 $3$ 名同学，每位同学可以分到多少毫升？请输出一个数字作为输出。保留 $6$ 位有效数字，且不使用科学计数法。\n\n### 问题 5\n\n甲列火车长 $260$ 米，每秒行 $12$ 米；乙列火车长 $220$ 米，每秒行 $20$ 米，两车相向而行，从两车车头相遇时开始计时，多长时间后两车车尾相离？已知答案是整数。\n\n### 问题 6\n\n一个长方形长宽分别是 $6 \\text{ cm}$、$9 \\text{ cm}$，求它的对角线长度（$\\text{cm}$）。直接使用 `cout` 输出。\n\n### 问题 7\n\nUim 银行账户里面有 $100$ 元。经过了下面的操作：\n\n1. 往里面存了 $10$ 元；\n2. 购物花掉了 $20$ 元；\n3. 把里面的钱全部取出。\n\n \t请在每次操作后输出账户余额，并使用换行符隔开。\n\n\n### 问题 8\n\n当半径为 $r=5$，请输出圆的周长、面积和球体积。取 $\\pi=3.141593$。请直接使用 `cout` 输出答案，每行一个数字。\n\n### 问题 9\n\n一只小猴买了若干个桃子。第一天他刚好吃了这些桃子的一半，又贪嘴多吃了一个；第二天他也刚好吃了剩余桃子的一半，贪嘴多吃了一个；第三天他又刚好吃了剩下的桃子的一半，并贪嘴多吃了一个。第四天起来一看，发现桃子只剩下一个了。请问小猴买了几个桃子？\n\n### 问题 10\n\n洛谷的评测任务是单位时间内均匀增加的。$8$ 台评测机 $30$ 分钟可以刚好把评测队列中的程序评测完毕，$10$ 台评测机 $6$ 分钟可以刚好把评测队列中的程序评测完毕，请问几台评测机可以在 $10$ 分钟时刚好把评测队列中的程序评测完毕？\n\n### 问题 11\n\n小 A 跑步速度 $5 \\text{ m/s}$，小 B 跑步速度 $8 \\text{ m/s}$，小 B 在小 A 后面 $100 \\text{ m}$，他们同时起跑，请问需要多长时间小 B 可以追上小 A？输出一个数字表示答案，使用 `cout` 直接输出。\n\n### 问题 12\n\n大家都知道有 $26$ 个英文字母，其中 A 是第一个字母。现在请编程求出：\n\n1. M 是字母表中的第几个字母？\n2. 第 $18$ 个字母是什么？\n\n输出一个数字和一个字母，使用换行隔开。\n\n\n### 问题 13\n\n小 A 有两块球形橡皮泥，一个半径是 $4$，一个半径是 $10$。他想把这两块橡皮泥揉在一起，然后塑造成一个正方体，请问这个正方体的棱长是多少？如果结果不是整数，则舍去小数点之后的数字。取 $\\pi = 3.141593$。\n\n### 问题 14\n\n根据咕咕网校的预测，当课程定价为 $110$ 元时，会有 $10$ 人报名。如果课程价格每降低 $1$ 元，就会多 $1$ 名报名者（反之亦然）。如果希望总共能收到 $3500$ 元学费的话，那么应该定价多少呢？已知本题有两个答案符合要求，则取较小的那一个。如果这个答案不是整数，则需四舍五入精确到整数。\n\n", "inputFormat": "输入一个正整数，表示第几个问题。", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。", "hint": "请解决以下小学数学题。你可以提交答案，也可以写一个程序。\n\n对于本题来说，如果你不知道怎么输入，也可以这么抄：\n\n```cpp\n#include<iostream>\n// 填上你觉得需要的其他头文件\nusing namespace std;\nint main() {\n    int T;\n    cin >> T;\n    if (T == 1) {\n        // 粘贴问题 1 的主函数代码，除了 return 0\n        cout << \"I love Luogu!\";\n    } else if (T == 2) {\n        // 粘贴问题 2 的主函数代码，除了 return 0\n        cout << 2 + 4 << \" \" << 10 - 2 - 4;\n    } else if (T == 3) {\n        // 请自行完成问题 3 的代码\n    } else if (T == 4) {\n        // 请自行完成问题 4 的代码\n    } else if (T == 5) {\n        // 请自行完成问题 5 的代码\n    } else if (T == 6) {\n        // 请自行完成问题 6 的代码\n    } else if (T == 7) {\n        // 请自行完成问题 7 的代码\n    } else if (T == 8) {\n        // 请自行完成问题 8 的代码\n    } else if (T == 9) {\n        // 请自行完成问题 9 的代码\n    } else if (T == 10) {\n        // 请自行完成问题 10 的代码\n    } else if (T == 11) {\n        // 请自行完成问题 11 的代码\n    } else if (T == 12) {\n        // 请自行完成问题 12 的代码\n    } else if (T == 13) {\n        // 请自行完成问题 13 的代码\n    } else if (T == 14) {\n        // 请自行完成问题 14 的代码\n    }\n    return 0;\n}\n```", "locale": "zh-CN", "translations": {"en": {"title": "【深基1-2】Elementary Math N-in-One", "background": "", "description": "### Problem 1\n\nPlease output `I love Luogu!`.\n\n### Problem 2\n\nThere are $10$ apples. Xiao A took $2$, Uim took $4$, and Xiao B took all the remaining apples. We want to know:\n\n1. How many apples did Xiao A and Uim take in total?\n2. How many apples did Xiao B take?\n\nNow you need to write a program to output two numbers as the answers, separated by a space.\n\n### Problem 3\n\nThere are $14$ apples. They are to be evenly divided among $4$ students, and any leftover apples are put back into the refrigerator. Please answer:\n\n1. How many apples does each student get?\n2. How many apples are distributed in total?\n3. How many apples are put back into the refrigerator?\n\nNow you need to write a program to output three numbers as the answers, one per line.\n\n### Problem 4\n\nThere are $500$ milliliters of soda to be evenly divided among $3$ students. How many milliliters does each student get? Please output one number. Keep $6$ significant digits and do not use scientific notation.\n\n### Problem 5\n\nTrain A is $260$ meters long and travels at $12 \\text{ m/s}$; Train B is $220$ meters long and travels at $20 \\text{ m/s}$. The two trains move toward each other. Starting from the moment their fronts meet, how long will it take until their tails separate? The answer is known to be an integer.\n\n### Problem 6\n\nA rectangle has length and width $6 \\text{ cm}$ and $9 \\text{ cm}$, respectively. Find the length of its diagonal (in $\\text{cm}$). Directly use `cout` to output.\n\n### Problem 7\n\nUim has $100$ yuan in a bank account. The following operations occur:\n\n1. Deposit $10$ yuan.\n2. Spend $20$ yuan on shopping.\n3. Withdraw all the remaining money.\n\nAfter each operation, output the account balance, separated by newline characters.\n\n### Problem 8\n\nWhen the radius is $r=5$, output the circumference of the circle, the area of the circle, and the volume of the sphere. Take $\\pi=3.141593$. Directly use `cout` to output the answers, one number per line.\n\n### Problem 9\n\nA little monkey bought some peaches. On the first day, it ate exactly half of the peaches and then greedily ate one more. On the second day, it ate half of the remaining peaches and then one more. On the third day, it again ate half of the remaining peaches and one more. On the fourth day, it found that only one peach was left. How many peaches did the monkey initially buy?\n\n### Problem 10\n\nLuogu’s judging tasks increase uniformly over time. With $8$ judging machines, the programs in the queue can be finished in $30$ minutes; with $10$ judging machines, they can be finished in $6$ minutes. How many judging machines are needed to finish exactly at $10$ minutes?\n\n### Problem 11\n\nXiao A runs at $5 \\text{ m/s}$, and Xiao B runs at $8 \\text{ m/s}$. Xiao B is $100 \\text{ m}$ behind Xiao A. They start at the same time. How long will it take for Xiao B to catch up with Xiao A? Output one number as the answer and directly use `cout` to output.\n\n### Problem 12\n\nEveryone knows there are $26$ English letters, and A is the first letter. Now write a program to find:\n\n1. Which position is M in the alphabet?\n2. What is the $18$-th letter?\n\nOutput one number and one letter, separated by a newline.\n\n### Problem 13\n\nXiao A has two spherical lumps of clay, with radii $4$ and $10$. He wants to knead them together and then mold them into a cube. What is the edge length of the cube? If the result is not an integer, discard the digits after the decimal point. Take $\\pi = 3.141593$.\n\n### Problem 14\n\nAccording to Gugu Online School’s prediction, when the course is priced at $110$ yuan, $10$ people will enroll. If the price decreases by $1$ yuan, there will be $1$ more enrollment (and vice versa). If we want the total tuition received to be $3500$ yuan, what should the price be? It is known that there are two answers that meet the requirement; take the smaller one. If this answer is not an integer, round it to the nearest integer.", "inputFormat": "Input a positive integer indicating which problem.", "outputFormat": "Output the answer corresponding to the input problem number.", "hint": "Please solve the following elementary math problems. You can submit the answers directly, or write a program.\n\nFor this problem, if you do not know how to handle input, you can copy it like this:\n\n```cpp\n#include<iostream>\n// 填上你觉得需要的其他头文件\nusing namespace std;\nint main() {\n    int T;\n    cin >> T;\n    if (T == 1) {\n        // 粘贴问题 1 的主函数代码，除了 return 0\n        cout << \"I love Luogu!\";\n    } else if (T == 2) {\n        // 粘贴问题 2 的主函数代码，除了 return 0\n        cout << 2 + 4 << \" \" << 10 - 2 - 4;\n    } else if (T == 3) {\n        // 请自行完成问题 3 的代码\n    } else if (T == 4) {\n        // 请自行完成问题 4 的代码\n    } else if (T == 5) {\n        // 请自行完成问题 5 的代码\n    } else if (T == 6) {\n        // 请自行完成问题 6 的代码\n    } else if (T == 7) {\n        // 请自行完成问题 7 的代码\n    } else if (T == 8) {\n        // 请自行完成问题 8 的代码\n    } else if (T == 9) {\n        // 请自行完成问题 9 的代码\n    } else if (T == 10) {\n        // 请自行完成问题 10 的代码\n    } else if (T == 11) {\n        // 请自行完成问题 11 的代码\n    } else if (T == 12) {\n        // 请自行完成问题 12 的代码\n    } else if (T == 13) {\n        // 请自行完成问题 13 的代码\n    } else if (T == 14) {\n        // 请自行完成问题 14 的代码\n    }\n    return 0;\n}\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基1-2】小学数学 N 合一", "background": "", "description": "### 问题 1\n\n请输出 `I love Luogu!`\n\n### 问题 2\n\n这里有 $10$ 个苹果，小 A 拿走了 $2$ 个，Uim 拿走了 $4$ 个，小 B 拿走剩下的所有的苹果。我们想知道：\n\n1. 小 A 和 Uim 两个人一共拿走多少苹果？\n2. 小 B 能拿走多少苹果？\n\n现在需要编写一个程序，输出两个数字作为答案，中间使用空格分开。\n\n### 问题 3\n\n现在有 $14$ 个苹果。要均分给 $4$ 名同学，分不掉的苹果放回冰箱。请问：\n\n1. 每位同学能分得几个苹果？\n2. 一共分出去多少苹果？\n3. 把几个苹果放回冰箱？\n\n \t现在需要编写一个程序，输出三个数字作为答案，每个数字一行。\n\n### 问题 4\n\n现在有 $500$ 毫升的肥宅快乐水，要均分给 $3$ 名同学，每位同学可以分到多少毫升？请输出一个数字作为输出。保留 $6$ 位有效数字，且不使用科学计数法。\n\n### 问题 5\n\n甲列火车长 $260$ 米，每秒行 $12$ 米；乙列火车长 $220$ 米，每秒行 $20$ 米，两车相向而行，从两车车头相遇时开始计时，多长时间后两车车尾相离？已知答案是整数。\n\n### 问题 6\n\n一个长方形长宽分别是 $6 \\text{ cm}$、$9 \\text{ cm}$，求它的对角线长度（$\\text{cm}$）。直接使用 `cout` 输出。\n\n### 问题 7\n\nUim 银行账户里面有 $100$ 元。经过了下面的操作：\n\n1. 往里面存了 $10$ 元；\n2. 购物花掉了 $20$ 元；\n3. 把里面的钱全部取出。\n\n \t请在每次操作后输出账户余额，并使用换行符隔开。\n\n\n### 问题 8\n\n当半径为 $r=5$，请输出圆的周长、面积和球体积。取 $\\pi=3.141593$。请直接使用 `cout` 输出答案，每行一个数字。\n\n### 问题 9\n\n一只小猴买了若干个桃子。第一天他刚好吃了这些桃子的一半，又贪嘴多吃了一个；第二天他也刚好吃了剩余桃子的一半，贪嘴多吃了一个；第三天他又刚好吃了剩下的桃子的一半，并贪嘴多吃了一个。第四天起来一看，发现桃子只剩下一个了。请问小猴买了几个桃子？\n\n### 问题 10\n\n洛谷的评测任务是单位时间内均匀增加的。$8$ 台评测机 $30$ 分钟可以刚好把评测队列中的程序评测完毕，$10$ 台评测机 $6$ 分钟可以刚好把评测队列中的程序评测完毕，请问几台评测机可以在 $10$ 分钟时刚好把评测队列中的程序评测完毕？\n\n### 问题 11\n\n小 A 跑步速度 $5 \\text{ m/s}$，小 B 跑步速度 $8 \\text{ m/s}$，小 B 在小 A 后面 $100 \\text{ m}$，他们同时起跑，请问需要多长时间小 B 可以追上小 A？输出一个数字表示答案，使用 `cout` 直接输出。\n\n### 问题 12\n\n大家都知道有 $26$ 个英文字母，其中 A 是第一个字母。现在请编程求出：\n\n1. M 是字母表中的第几个字母？\n2. 第 $18$ 个字母是什么？\n\n输出一个数字和一个字母，使用换行隔开。\n\n\n### 问题 13\n\n小 A 有两块球形橡皮泥，一个半径是 $4$，一个半径是 $10$。他想把这两块橡皮泥揉在一起，然后塑造成一个正方体，请问这个正方体的棱长是多少？如果结果不是整数，则舍去小数点之后的数字。取 $\\pi = 3.141593$。\n\n### 问题 14\n\n根据咕咕网校的预测，当课程定价为 $110$ 元时，会有 $10$ 人报名。如果课程价格每降低 $1$ 元，就会多 $1$ 名报名者（反之亦然）。如果希望总共能收到 $3500$ 元学费的话，那么应该定价多少呢？已知本题有两个答案符合要求，则取较小的那一个。如果这个答案不是整数，则需四舍五入精确到整数。\n\n", "inputFormat": "输入一个正整数，表示第几个问题。", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。", "hint": "请解决以下小学数学题。你可以提交答案，也可以写一个程序。\n\n对于本题来说，如果你不知道怎么输入，也可以这么抄：\n\n```cpp\n#include<iostream>\n// 填上你觉得需要的其他头文件\nusing namespace std;\nint main() {\n    int T;\n    cin >> T;\n    if (T == 1) {\n        // 粘贴问题 1 的主函数代码，除了 return 0\n        cout << \"I love Luogu!\";\n    } else if (T == 2) {\n        // 粘贴问题 2 的主函数代码，除了 return 0\n        cout << 2 + 4 << \" \" << 10 - 2 - 4;\n    } else if (T == 3) {\n        // 请自行完成问题 3 的代码\n    } else if (T == 4) {\n        // 请自行完成问题 4 的代码\n    } else if (T == 5) {\n        // 请自行完成问题 5 的代码\n    } else if (T == 6) {\n        // 请自行完成问题 6 的代码\n    } else if (T == 7) {\n        // 请自行完成问题 7 的代码\n    } else if (T == 8) {\n        // 请自行完成问题 8 的代码\n    } else if (T == 9) {\n        // 请自行完成问题 9 的代码\n    } else if (T == 10) {\n        // 请自行完成问题 10 的代码\n    } else if (T == 11) {\n        // 请自行完成问题 11 的代码\n    } else if (T == 12) {\n        // 请自行完成问题 12 的代码\n    } else if (T == 13) {\n        // 请自行完成问题 13 的代码\n    } else if (T == 14) {\n        // 请自行完成问题 14 的代码\n    }\n    return 0;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P2434", "type": "P", "difficulty": 3, "samples": [["5\r\n5 6\r\n1 4\r\n10 10\r\n6 9\r\n8 10\r\n", "1 4\r\n5 10\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2005", "各省省选", "山东", "排序"], "title": "[SDOI2005] 区间", "background": "", "description": "现给定 $n$ 个闭区间 $[a_i, b_i]$（$1 \\le i \\le n$）。这些区间的并可以表示为一些不相交的闭区间的并。你的任务就是在这些表示方式中找出包含最少区间的方案。你的输出应该按照区间的升序排列。这里如果说两个区间 $[a, b]$ 和 $[c, d]$ 是按照升序排列的，那么我们有 $a \\le b < c \\le d$。\n\n请写一个程序：\n\n读入这些区间；\n\n计算满足给定条件的不相交闭区间；\n\n把这些区间按照升序输出。", "inputFormat": "第一行包含一个整数 $n$（$3 \\le n \\le 50000$）为区间的数目。  \n以下 $n$ 行为对区间的描述，第 $i$ 行为对第 $i$ 个区间的描述，为两个整数 $a_i, b_i$（$1 \\le a _ i \\leq b _ i \\le 1000000$），表示一个区间 $[a_i, b_i]$。", "outputFormat": "输出计算出来的不相交的区间。每一行都是对一个区间的描述，包括两个用空格分开的整数，为区间的上下界。你应该把区间按照升序排序。", "hint": "对于 $100 \\%$ 的数据，$3 \\le n \\le 50000$，$1 \\le a _ i \\leq b _ i \\le 1000000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Intervals", "background": "", "description": "Given $n$ closed intervals $[a_i, b_i]$ ($1 \\le i \\le n$). The union of these intervals can be represented as a union of pairwise disjoint closed intervals. Your task is to find, among all such representations, the one that contains the fewest intervals. Your output should be in ascending order. If two intervals $[a, b]$ and $[c, d]$ are in ascending order, then we have $a \\le b < c \\le d$.\n\nPlease write a program to:\n- read these intervals;\n- compute the pairwise disjoint closed intervals that satisfy the given condition;\n- output these intervals in ascending order.", "inputFormat": "The first line contains an integer $n$ ($3 \\le n \\le 50000$), the number of intervals.  \nEach of the following $n$ lines describes an interval. The $i$-th line contains two integers $a_i, b_i$ ($1 \\le a _ i \\leq b _ i \\le 1000000$), representing the interval $[a_i, b_i]$.", "outputFormat": "Output the computed pairwise disjoint intervals. Each line describes one interval and contains two integers separated by a space, which are the lower and upper bounds of the interval. You should sort the intervals in ascending order.", "hint": "For $100 \\%$ of the testdata, $3 \\le n \\le 50000$, $1 \\le a _ i \\leq b _ i \\le 1000000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 区间", "background": "", "description": "现给定 $n$ 个闭区间 $[a_i, b_i]$（$1 \\le i \\le n$）。这些区间的并可以表示为一些不相交的闭区间的并。你的任务就是在这些表示方式中找出包含最少区间的方案。你的输出应该按照区间的升序排列。这里如果说两个区间 $[a, b]$ 和 $[c, d]$ 是按照升序排列的，那么我们有 $a \\le b < c \\le d$。\n\n请写一个程序：\n\n读入这些区间；\n\n计算满足给定条件的不相交闭区间；\n\n把这些区间按照升序输出。", "inputFormat": "第一行包含一个整数 $n$（$3 \\le n \\le 50000$）为区间的数目。  \n以下 $n$ 行为对区间的描述，第 $i$ 行为对第 $i$ 个区间的描述，为两个整数 $a_i, b_i$（$1 \\le a _ i \\leq b _ i \\le 1000000$），表示一个区间 $[a_i, b_i]$。", "outputFormat": "输出计算出来的不相交的区间。每一行都是对一个区间的描述，包括两个用空格分开的整数，为区间的上下界。你应该把区间按照升序排序。", "hint": "对于 $100 \\%$ 的数据，$3 \\le n \\le 50000$，$1 \\le a _ i \\leq b _ i \\le 1000000$。", "locale": "zh-CN"}}}
{"pid": "P2435", "type": "P", "difficulty": 6, "samples": [["3 2 3\n1 0\n1 0", "3\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "洛谷原创", "洛谷月赛"], "title": "染色", "background": "**此题时限 2s。**", "description": "有一个 $n$ 行 $m$ 列的格点图，你需要给每个点上染上 $k$ 种颜色中的一种，要求没有两个相邻点颜色相同。给定第一行与最后一行的染色，试求总染色方案数。\n\n答案对 $376544743$ 取模。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $m$ 个整数，第一行的染色方案，用 $0\\sim k-1$ 表示每种颜色。\n\n第三行 $m$ 个整数，最后一行的染色方案，用 $0\\sim k-1$ 表示每种颜色。", "outputFormat": "一个整数，表示答案。\n\n答案对 $376544743$ 取模。", "hint": "### 样例解释\n\n#### 方案 1\n\n```plain\n1 0\n0 1\n1 0\n```\n\n#### 方案 2\n\n```plain\n1 0\n0 2\n1 0\n```\n\n#### 方案 3\n\n```plain\n1 0\n2 1\n1 0\n```\n\n### 数据范围\n\n| 测试点编号 | $n$ | $m$ | $k$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\le 5$ | $\\le 5$ | $\\le 2$ |\n| $2$ | $\\le 10^7$ | $\\le 10^5$ | $\\le 2$ |\n| $3$ | $\\le 20$ | $\\le 3$ | $\\le 3$ |\n| $4$ | $\\le 50$ | $\\le 3$ | $\\le 3$ |\n| $5 \\sim 6$ | $\\le 100$ | $\\le 6$ | $\\le 3$ |\n| $7 \\sim 8$ | $\\le 50$ | $\\le 4$ | $\\le 4$ |\n| $9 \\sim 10$ | $\\le 100$ | $\\le 8$ | $\\le 4$ |\n\n对于 $100\\%$ 的数据，$n,m,k \\ge 1$。\n\n**请注意，$\\bm{n,m,k}$ 的值没有同时达到最大数据范围。**", "locale": "zh-CN", "translations": {"en": {"title": "Coloring", "background": "The time limit for this problem is 2 s.", "description": "There is an $n$-row, $m$-column grid graph. You need to color each point with one of $k$ colors so that no two adjacent points have the same color. Given the colorings of the first row and the last row, find the total number of valid colorings.\n\nThe answer is taken modulo $376544743$.", "inputFormat": "The first line contains three integers $n,m,k$.\n\nThe second line contains $m$ integers, the coloring of the first row, where each color is represented by $0\\sim k-1$.\n\nThe third line contains $m$ integers, the coloring of the last row, where each color is represented by $0\\sim k-1$.", "outputFormat": "Output a single integer, the answer.\n\nThe answer is taken modulo $376544743$.", "hint": "### Sample Explanation\n\n#### Scheme 1\n\n```plain\n1 0\n0 1\n1 0\n```\n\n#### Scheme 2\n\n```plain\n1 0\n0 2\n1 0\n```\n\n#### Scheme 3\n\n```plain\n1 0\n2 1\n1 0\n```\n\n### Constraints\n\n| Test point ID | $n$ | $m$ | $k$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\le 5$ | $\\le 5$ | $\\le 2$ |\n| $2$ | $\\le 10^7$ | $\\le 10^5$ | $\\le 2$ |\n| $3$ | $\\le 20$ | $\\le 3$ | $\\le 3$ |\n| $4$ | $\\le 50$ | $\\le 3$ | $\\le 3$ |\n| $5 \\sim 6$ | $\\le 100$ | $\\le 6$ | $\\le 3$ |\n| $7 \\sim 8$ | $\\le 50$ | $\\le 4$ | $\\le 4$ |\n| $9 \\sim 10$ | $\\le 100$ | $\\le 8$ | $\\le 4$ |\n\nFor $100\\%$ of the testdata, $n,m,k \\ge 1$.\n\nPlease note that the values of $\\bm{n,m,k}$ do not simultaneously reach their maximum constraints.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "染色", "background": "**此题时限 2s。**", "description": "有一个 $n$ 行 $m$ 列的格点图，你需要给每个点上染上 $k$ 种颜色中的一种，要求没有两个相邻点颜色相同。给定第一行与最后一行的染色，试求总染色方案数。\n\n答案对 $376544743$ 取模。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n第二行 $m$ 个整数，第一行的染色方案，用 $0\\sim k-1$ 表示每种颜色。\n\n第三行 $m$ 个整数，最后一行的染色方案，用 $0\\sim k-1$ 表示每种颜色。", "outputFormat": "一个整数，表示答案。\n\n答案对 $376544743$ 取模。", "hint": "### 样例解释\n\n#### 方案 1\n\n```plain\n1 0\n0 1\n1 0\n```\n\n#### 方案 2\n\n```plain\n1 0\n0 2\n1 0\n```\n\n#### 方案 3\n\n```plain\n1 0\n2 1\n1 0\n```\n\n### 数据范围\n\n| 测试点编号 | $n$ | $m$ | $k$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\le 5$ | $\\le 5$ | $\\le 2$ |\n| $2$ | $\\le 10^7$ | $\\le 10^5$ | $\\le 2$ |\n| $3$ | $\\le 20$ | $\\le 3$ | $\\le 3$ |\n| $4$ | $\\le 50$ | $\\le 3$ | $\\le 3$ |\n| $5 \\sim 6$ | $\\le 100$ | $\\le 6$ | $\\le 3$ |\n| $7 \\sim 8$ | $\\le 50$ | $\\le 4$ | $\\le 4$ |\n| $9 \\sim 10$ | $\\le 100$ | $\\le 8$ | $\\le 4$ |\n\n对于 $100\\%$ 的数据，$n,m,k \\ge 1$。\n\n**请注意，$\\bm{n,m,k}$ 的值没有同时达到最大数据范围。**", "locale": "zh-CN"}}}
{"pid": "P2436", "type": "P", "difficulty": 3, "samples": [["10 1\n4 8 55 56 57 63 64 67 70 150\n87", "20 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2016", "洛谷原创", "洛谷月赛"], "title": "钦定", "background": null, "description": "小 S 拿到了复赛参赛表，表上的选手是由 $A$ 位神犇与 $B$ 位蒟蒻间隔、循环构成的。\n\n比如 $A=2$，$B=3$ 时，选手 $1,2,6,7,11,12\\dots$ 是神犇，选手 $3,4,5,8,9,10,13,14,15\\dots$是蒟蒻。\n\n现在小 S 钦定了一些选手是神犇，蒟蒻，但她不能构造出这样的 $A,B$，你能帮帮她吗？", "inputFormat": "每个测试点多组数据。\n\n每组数据第一行两个整数 $N,M$。\n\n第二行为 $N$ 名选手编号 $a_1,a_2,\\dots,a_N$。即小 S 把他们钦定为神犇。\n\n第三行为 $M$ 名选手编号 $b_1,b_2,\\dots,b_M$。即小 S 把他们钦定为蒟蒻。", "outputFormat": "对于每组数据，输出满足题意的两个整数 $A,B$（用空格隔开），并且使得 $A$ 最小的情况下 $B$ 最小。 如果没有符合条件的 $A,B$，请输出 `NO`。", "hint": "设一个测试点中共有 $T$ 组测试数据。\n\n对于 $10 \\%$ 的数据，$1 \\le N,M \\le 10$。\n\n对于 $30 \\%$ 的数据，$1 \\le N,M \\le 100$。\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 1000$，$1 \\le T \\le 10$，$1 \\le a_i,b_i \\le 10 \\times (N + M)$。", "locale": "zh-CN", "translations": {"en": {"title": "Designated", "background": "", "description": "Xiao S got the roster for the semifinals. The contestants on the list are arranged by repeating cycles of $A$ pros and $B$ noobs.\n\nFor example, when $A = 2$, $B = 3$, contestants $1, 2, 6, 7, 11, 12\\dots$ are pros, and contestants $3, 4, 5, 8, 9, 10, 13, 14, 15\\dots$ are noobs.\n\nNow Xiao S has designated some contestants as pros and some as noobs, but she cannot construct such $A, B$. Can you help her?", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case:\n- The first line contains two integers $N, M$.\n- The second line contains $N$ distinct integers $a_1, a_2, \\dots, a_N$, the contestant indices designated as pros.\n- The third line contains $M$ distinct integers $b_1, b_2, \\dots, b_M$, the contestant indices designated as noobs.", "outputFormat": "For each test case, output two integers $A, B$ (separated by a space) that satisfy the requirements. Among all valid pairs, choose the one with the smallest $A$, and if there are multiple, the one with the smallest $B$. If no such $A, B$ exist, output `NO`.", "hint": "Let there be $T$ test cases in a test file.\n\n- For $10\\%$ of the testdata, $1 \\le N, M \\le 10$.\n- For $30\\%$ of the testdata, $1 \\le N, M \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 1000$, $1 \\le T \\le 10$, $1 \\le a_i, b_i \\le 10 \\times (N + M)$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "钦定", "background": null, "description": "小 S 拿到了复赛参赛表，表上的选手是由 $A$ 位神犇与 $B$ 位蒟蒻间隔、循环构成的。\n\n比如 $A=2$，$B=3$ 时，选手 $1,2,6,7,11,12\\dots$ 是神犇，选手 $3,4,5,8,9,10,13,14,15\\dots$是蒟蒻。\n\n现在小 S 钦定了一些选手是神犇，蒟蒻，但她不能构造出这样的 $A,B$，你能帮帮她吗？", "inputFormat": "每个测试点多组数据。\n\n每组数据第一行两个整数 $N,M$。\n\n第二行为 $N$ 名选手编号 $a_1,a_2,\\dots,a_N$。即小 S 把他们钦定为神犇。\n\n第三行为 $M$ 名选手编号 $b_1,b_2,\\dots,b_M$。即小 S 把他们钦定为蒟蒻。", "outputFormat": "对于每组数据，输出满足题意的两个整数 $A,B$（用空格隔开），并且使得 $A$ 最小的情况下 $B$ 最小。 如果没有符合条件的 $A,B$，请输出 `NO`。", "hint": "设一个测试点中共有 $T$ 组测试数据。\n\n对于 $10 \\%$ 的数据，$1 \\le N,M \\le 10$。\n\n对于 $30 \\%$ 的数据，$1 \\le N,M \\le 100$。\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 1000$，$1 \\le T \\le 10$，$1 \\le a_i,b_i \\le 10 \\times (N + M)$。", "locale": "zh-CN"}}}
{"pid": "P2437", "type": "P", "difficulty": 2, "samples": [["1 14", "377"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度", "递推", "Fibonacci 数列"], "title": "蜜蜂路线", "background": null, "description": "一只蜜蜂在下图所示的数字蜂房上爬动,已知它只能从标号小的蜂房爬到标号大的相邻蜂房,现在问你：蜜蜂从蜂房 $m$ 开始爬到蜂房 $n$，$m<n$，有多少种爬行路线？（备注：题面有误，右上角应为 $n-1$）\n\n![](https://cdn.luogu.com.cn/upload/pic/1575.png)", "inputFormat": "输入 $m,n$ 的值。", "outputFormat": "爬行有多少种路线。", "hint": "对于 $100\\%$ 的数据，$1 \\le M,N\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Bee Routes", "background": "", "description": "A bee crawls on a numbered honeycomb as shown in the figure below. It can only move from a cell with a smaller label to an adjacent cell with a larger label. How many different routes are there for the bee to crawl from cell $m$ to cell $n$, with $m < n$? (Note: The original statement contains an error; the top-right corner should be labeled $n-1$.)\n\n![](https://cdn.luogu.com.cn/upload/pic/1575.png)", "inputFormat": "A single line containing integers $m$ and $n$.", "outputFormat": "Output the number of possible crawling routes.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le m, n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "蜜蜂路线", "background": null, "description": "一只蜜蜂在下图所示的数字蜂房上爬动,已知它只能从标号小的蜂房爬到标号大的相邻蜂房,现在问你：蜜蜂从蜂房 $m$ 开始爬到蜂房 $n$，$m<n$，有多少种爬行路线？（备注：题面有误，右上角应为 $n-1$）\n\n![](https://cdn.luogu.com.cn/upload/pic/1575.png)", "inputFormat": "输入 $m,n$ 的值。", "outputFormat": "爬行有多少种路线。", "hint": "对于 $100\\%$ 的数据，$1 \\le M,N\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2438", "type": "P", "difficulty": 5, "samples": [["4\r\n1 0 1 0\r\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 解环", "background": "拜特兰并不总是一个非常民主的国家，也有一些阴暗的历史。一个美好的日子，拜特将军（该国的统帅）作了一个用以结束长期内战的决定，释放被关押的反对派。然而，他并未让反对派的领袖拜特萨直接自由，而是用一根“拜特链”将拜特萨锁在墙边.该链子由很多环和固定在墙上栅栏组成。尽管环并未和栅栏融合在一起，但想除去它们却非常困难。\n\n“将军，你为什么要用链子将我锁在墙边而不让我自由！”拜特萨大叫道。\n\n“拜特萨，你并未完全被链子锁住，我可以坦率的告诉你，你完全可以从栅栏上解下环。”拜特将军回答，同时他补充说，“但是，你必须在夜里工作，一个小时之内完成，不能弄出任何声音，否则，我将按有关法律治罪。”\n", "description": "为了帮助拜特萨！链子上的环按整数1,2,…,n进行了编号。我们可以按照以下规则解开环：\n\n    只有一个环时可以被连接到栅栏或从栅栏上拆开。\n\n    第1号环总能进行连接或拆开\n\n    如果1,...,k-1 (1<=k<n)环都被拆开，第k个环被连接时, 此时我们能连接或拆开 第k+1个环.\n\n\n写一个程序：\n\n输入描述了拜特链的构成,\n\n计算拆除拜特链上全部环的最少操作次数,\n\n将结果输出。\n", "inputFormat": "第1行有一个整数n, 1<=n<=1 000.在第2行有n个用一个空格分隔的整数 o1,o2,...,on (每个都是0或1)，如果 oi=1, 那么第I个环和栅栏相连，如果 oi=0, 那么第I环没有和栅栏相连。\n", "outputFormat": "只包含一个整数，为解开拜特链的全部环的最少操作次数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Unlinking the Rings", "background": "Byteland has not always been a very democratic country, and it has some dark history. One fine day, General Byte (the commander of the country) decided to end the long civil war by releasing the imprisoned opposition. However, he did not set the opposition leader Baitesa (pinyin) completely free; instead, he locked Baitesa to the wall with a “Byte Chain”. The chain consists of many rings and a fence fixed to the wall. Although the rings are not fused with the fence, removing them is very difficult.\n\n“General, why are you chaining me to the wall instead of letting me go free!” Baitesa shouted.\n\n“Baitesa, you are not completely chained. I can frankly tell you that you can fully detach the rings from the fence,” General Byte replied, adding, “But you must work at night, finish within one hour, and make no noise. Otherwise, I will punish you according to the law.”", "description": "To help Baitesa! The rings on the chain are numbered $1, 2, \\ldots, n$. We can detach them according to the following rules:\n\n- At each step, you may attach or detach exactly one ring to or from the fence.\n- Ring $1$ can always be attached or detached.\n- If rings $1, \\ldots, k - 1$ are all detached and ring $k$ is attached, where $1 \\le k < n$, then you may attach or detach ring $k + 1$.\n\nWrite a program that, given the description of the Byte Chain, computes the minimum number of operations needed to remove all rings from the fence and outputs the result.", "inputFormat": "The first line contains an integer $n$, where $1 \\le n \\le 1000$.  \nThe second line contains $n$ integers $o_1, o_2, \\ldots, o_n$ (each is $0$ or $1$) separated by single spaces. If $o_i = 1$, then the $i$-th ring is attached to the fence; if $o_i = 0$, then the $i$-th ring is not attached.", "outputFormat": "Output a single integer: the minimum number of operations required to detach all rings from the fence.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 解环", "background": "拜特兰并不总是一个非常民主的国家，也有一些阴暗的历史。一个美好的日子，拜特将军（该国的统帅）作了一个用以结束长期内战的决定，释放被关押的反对派。然而，他并未让反对派的领袖拜特萨直接自由，而是用一根“拜特链”将拜特萨锁在墙边.该链子由很多环和固定在墙上栅栏组成。尽管环并未和栅栏融合在一起，但想除去它们却非常困难。\n\n“将军，你为什么要用链子将我锁在墙边而不让我自由！”拜特萨大叫道。\n\n“拜特萨，你并未完全被链子锁住，我可以坦率的告诉你，你完全可以从栅栏上解下环。”拜特将军回答，同时他补充说，“但是，你必须在夜里工作，一个小时之内完成，不能弄出任何声音，否则，我将按有关法律治罪。”\n", "description": "为了帮助拜特萨！链子上的环按整数1,2,…,n进行了编号。我们可以按照以下规则解开环：\n\n    只有一个环时可以被连接到栅栏或从栅栏上拆开。\n\n    第1号环总能进行连接或拆开\n\n    如果1,...,k-1 (1<=k<n)环都被拆开，第k个环被连接时, 此时我们能连接或拆开 第k+1个环.\n\n\n写一个程序：\n\n输入描述了拜特链的构成,\n\n计算拆除拜特链上全部环的最少操作次数,\n\n将结果输出。\n", "inputFormat": "第1行有一个整数n, 1<=n<=1 000.在第2行有n个用一个空格分隔的整数 o1,o2,...,on (每个都是0或1)，如果 oi=1, 那么第I个环和栅栏相连，如果 oi=0, 那么第I环没有和栅栏相连。\n", "outputFormat": "只包含一个整数，为解开拜特链的全部环的最少操作次数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2439", "type": "P", "difficulty": 4, "samples": [["12\r\n1 2\r\n3 5\r\n0 4\r\n6 8\r\n7 13\r\n4 6\r\n9 10\r\n9 12\r\n11 14\r\n15 19\r\n14 16\r\n18 20\r\n", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 阶梯教室设备利用", "background": "", "description": "我们现有许多演讲要在阶梯教室中举行。每一个演讲都可以用唯一的起始和终止时间来确定，如果两个演讲时间有部分或全部重复，那么它们是无法同时在阶级教室中举行的。现在我们想要尽最大可能的利用这个教室，也就是说，我们需要在这些演讲中选择一些不重复的演讲来举行使得他们用的总时间尽可能的长。我们假设在某一演讲结束的瞬间我们就可以立即开始另一个演讲。\n\n请写一个程序：\n\n读入所有演讲的起始和终止时间，计算最大的可能演讲总时间。", "inputFormat": "第一行包括一个正整数 $n$，为所有的演讲的数目。\n\n以下的 $n$ 行每行含有两个由空格隔开的整数 $p$ 和 $k$。这样的一对整数表示一个演讲由时间 $p$ 开始到时间 $k$ 结束。", "outputFormat": "输出唯一的一个整数，为最长的演讲总时间。\n", "hint": "### 样例解释\n\n可以选择第 $3$ 个、第 $5$ 个、第 $6$ 个、第 $11$ 个、第 $12$ 个演讲，此时有最长的演讲总时间 $16$。\n\n### 数据范围\n\n$1\\le n\\le 10^4$，$0\\le p<k\\le 3\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "{{[SDOI2005] Lecture Hall Equipment Utilization}}", "background": "{{}}", "description": "{{We have many talks to be held in a lecture hall. Each talk is determined by a unique start time and end time. If two talks overlap partially or entirely, they cannot be held simultaneously in the lecture hall. We want to make the best possible use of this hall; that is, we need to select some non-overlapping talks so that their total scheduled time is as long as possible. We assume that at the exact moment one talk ends, another talk can start immediately.\n\nWrite a program to:\n\nRead all start and end times of the talks and compute the maximum possible total time of talks.}}", "inputFormat": "{{The first line contains a positive integer $n$, the number of talks.\n\nEach of the following $n$ lines contains two space-separated integers $p$ and $k$. Such a pair indicates a talk that starts at time $p$ and ends at time $k$.}}", "outputFormat": "{{Output a single integer, the maximum total time of the talks.}}", "hint": "{{Sample Explanation\n\nYou can choose the 3rd, 5th, 6th, 11th, and 12th talks, yielding the maximum total duration $16$.\n\nConstraints\n\n$1 \\le n \\le 10^4$, $0 \\le p < k \\le 3 \\times 10^4$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 阶梯教室设备利用", "background": "", "description": "我们现有许多演讲要在阶梯教室中举行。每一个演讲都可以用唯一的起始和终止时间来确定，如果两个演讲时间有部分或全部重复，那么它们是无法同时在阶级教室中举行的。现在我们想要尽最大可能的利用这个教室，也就是说，我们需要在这些演讲中选择一些不重复的演讲来举行使得他们用的总时间尽可能的长。我们假设在某一演讲结束的瞬间我们就可以立即开始另一个演讲。\n\n请写一个程序：\n\n读入所有演讲的起始和终止时间，计算最大的可能演讲总时间。", "inputFormat": "第一行包括一个正整数 $n$，为所有的演讲的数目。\n\n以下的 $n$ 行每行含有两个由空格隔开的整数 $p$ 和 $k$。这样的一对整数表示一个演讲由时间 $p$ 开始到时间 $k$ 结束。", "outputFormat": "输出唯一的一个整数，为最长的演讲总时间。\n", "hint": "### 样例解释\n\n可以选择第 $3$ 个、第 $5$ 个、第 $6$ 个、第 $11$ 个、第 $12$ 个演讲，此时有最长的演讲总时间 $16$。\n\n### 数据范围\n\n$1\\le n\\le 10^4$，$0\\le p<k\\le 3\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2440", "type": "P", "difficulty": 3, "samples": [["3 7\n232\n124\n456", "114"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "线性数据结构", "二分", "递归"], "title": "木材加工", "background": "要保护环境。", "description": "木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。\n\n当然，我们希望得到的小段木头越长越好，请求出 $l$ 的最大值。\n\n木头长度的单位是 $\\text{cm}$，原木的长度都是正整数，我们要求切割得到的小段木头的长度也是正整数。\n\n例如有两根原木长度分别为 $11$ 和 $21$，要求切割成等长的 $6$ 段，很明显能切割出来的小段木头长度最长为 $5$。", "inputFormat": "第一行是两个正整数 $n,k$，分别表示原木的数量，需要得到的小段的数量。\n\n接下来 $n$ 行，每行一个正整数 $L_i$，表示一根原木的长度。", "outputFormat": "仅一行，即 $l$ 的最大值。\n\n如果连 $\\text{1cm}$ 长的小段都切不出来，输出 `0`。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$，$1\\le k\\le 10^8$，$1\\le L_i\\le 10^8(i\\in[1,n])$。", "locale": "zh-CN", "translations": {"en": {"title": "Wood Processing", "background": "Protect the environment.", "description": "A lumber mill has $n$ logs. We want to cut them into $k$ segments, each of length $l$ (there may be leftover wood).\n\nOf course, we want the segments to be as long as possible. Please find the maximum value of $l$.\n\nThe unit of length is $\\text{cm}$. The lengths of the logs are positive integers, and we also require the lengths of the resulting segments to be positive integers.\n\nFor example, if there are two logs with lengths $11$ and $21$, and we need $6$ equal segments, the longest possible segment length is $5$.", "inputFormat": "The first line contains two positive integers $n, k$, denoting the number of logs and the required number of segments.\n\nThe next $n$ lines each contain a positive integer $L_i$, the length of one log.", "outputFormat": "A single line containing the maximum value of $l$.\n\nIf it is impossible to cut even segments of length $\\text{1cm}$, output `0`.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le k \\le 10^8$, $1 \\le L_i \\le 10^8$ ($i \\in [1, n]$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "木材加工", "background": "要保护环境。", "description": "木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。\n\n当然，我们希望得到的小段木头越长越好，请求出 $l$ 的最大值。\n\n木头长度的单位是 $\\text{cm}$，原木的长度都是正整数，我们要求切割得到的小段木头的长度也是正整数。\n\n例如有两根原木长度分别为 $11$ 和 $21$，要求切割成等长的 $6$ 段，很明显能切割出来的小段木头长度最长为 $5$。", "inputFormat": "第一行是两个正整数 $n,k$，分别表示原木的数量，需要得到的小段的数量。\n\n接下来 $n$ 行，每行一个正整数 $L_i$，表示一根原木的长度。", "outputFormat": "仅一行，即 $l$ 的最大值。\n\n如果连 $\\text{1cm}$ 长的小段都切不出来，输出 `0`。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$，$1\\le k\\le 10^8$，$1\\le L_i\\le 10^8(i\\in[1,n])$。", "locale": "zh-CN"}}}
{"pid": "P2441", "type": "P", "difficulty": 4, "samples": [["4 6\r\n10 8 4 3\r\n1 2\r\n2 3\r\n3 4\r\n1 1\r\n1 2\r\n1 3\r\n1 4\r\n2 1 9\r\n1 4", "-1\r\n1\r\n2\r\n-1\r\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "树形数据结构", "2015", "洛谷原创", "枚举", "素数判断,质数,筛法", "栈", "洛谷月赛"], "title": "角色属性树", "background": null, "description": "绪萌同人社是一个有趣的组织，该组织结构是一个树形结构。有一个社长，直接下属一些副社长。每个副社长又直接下属一些部长……。\n\n每个成员都有一个萌点的属性，萌点属性是由一些质数的萌元素乘积构成（例如，猫耳的值是 $2$，弱气的值是 $3$，黄毛的值是 $5$，病娇的值是 $7$，双马尾的值是 $11$ 等等）\n\n举个例子，正妹是双份的猫耳，而且有一份弱气，她的属性值为 $2\\times 2\\times 3=12$。\n\n现在组员关心一个问题，希望知道离自己最近且有相同萌元素上司是谁，例如，属性值为 $2、4、6、45$ 这样的属性值都算是和正妹有相同的属性。\n\n\n然而，组员可能会随时变化自己的属性。啊。。感觉好麻烦啊。。", "inputFormat": "第一行，$n,k$ 表示成员数与询问的次数\n\n第二行，$n$ 个数，分别是 $1$ 到 $n$ 号成员的属性值\n\n接下来 $n-1$ 行，$x_i,y_i$ 表示 $x_i$ 是 $y_i$ 的上司。\n\n接下来来 $k$ 行，有两种情况\n\n$1\\ u_i$：询问离 $u_i$ 成员最近且有相同萌元素上司。\n\n$2\\ u_i\\  a$：更改 $u_i$ 的属性值为 $a$。", "outputFormat": "对于每个 $1$ 类型的询问，输出符合要求的编号。如果没有符合要求的编号，输出 $-1$。", "hint": "对于 $20\\%$ 的数据，没有修改的操作。\n\n对于 $50\\%$ 的数据，$n\\le 100$，修改次数 $<10$。\n\n对于 $100\\%$ 的数据，$n\\le 200000$，$k<100000$，修改次数 $\\le 50,a_i\\le 2^{31}-1$。\n\nUPD：本题测试数据随机，可能是假题。", "locale": "zh-CN", "translations": {"en": {"title": "Character Attribute Tree", "background": "", "description": "The Xumeng Fan Club is an interesting organization with a hierarchical tree structure. There is a president, who directly supervises several vice presidents. Each vice president, in turn, directly supervises several department heads, and so on.\n\nEach member has a \"moe\" attribute, which is the product of several prime \"moe elements\" (for example, the value of cat ears is $2$, timid is $3$, blonde is $5$, yandere is $7$, twin-tails is $11$, etc.).\n\nFor example, suppose a certain member has double cat ears and one timid trait; then her attribute value is $2\\times 2\\times 3=12$.\n\nNow, members care about the following question: for themselves, who is the nearest superior that shares at least one common moe element? For example, attribute values $2, 4, 6, 45$ are all considered to share moe elements with the above member with attribute $12$.\n\nHowever, a member may change their attribute at any time. Ah... what a hassle.", "inputFormat": "The first line contains $n, k$, the number of members and the number of queries.\n\nThe second line contains $n$ numbers, the attribute values of members $1$ through $n$.\n\nThe next $n-1$ lines each contain $x_i, y_i$, meaning $x_i$ is the supervisor of $y_i$.\n\nThen $k$ lines follow, each of one of the two types:\n\n$1\\ u_i$：Query the nearest superior of member $u_i$ that shares at least one moe element.\n\n$2\\ u_i\\  a$：Change the attribute value of $u_i$ to $a$.", "outputFormat": "For each type $1$ query, output the required member ID. If there is no such superior, output $-1$.", "hint": "Constraints:\n- For $20\\%$ of the testdata, there are no update operations.\n- For $50\\%$ of the testdata, $n\\le 100$, the number of updates $<10$.\n- For $100\\%$ of the testdata, $n\\le 200000$, $k<100000$, the number of updates $\\le 50$, and $a_i\\le 2^{31}-1$.\n\nUPD: The testdata are random; this might be a fake problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "角色属性树", "background": null, "description": "绪萌同人社是一个有趣的组织，该组织结构是一个树形结构。有一个社长，直接下属一些副社长。每个副社长又直接下属一些部长……。\n\n每个成员都有一个萌点的属性，萌点属性是由一些质数的萌元素乘积构成（例如，猫耳的值是 $2$，弱气的值是 $3$，黄毛的值是 $5$，病娇的值是 $7$，双马尾的值是 $11$ 等等）\n\n举个例子，正妹是双份的猫耳，而且有一份弱气，她的属性值为 $2\\times 2\\times 3=12$。\n\n现在组员关心一个问题，希望知道离自己最近且有相同萌元素上司是谁，例如，属性值为 $2、4、6、45$ 这样的属性值都算是和正妹有相同的属性。\n\n\n然而，组员可能会随时变化自己的属性。啊。。感觉好麻烦啊。。", "inputFormat": "第一行，$n,k$ 表示成员数与询问的次数\n\n第二行，$n$ 个数，分别是 $1$ 到 $n$ 号成员的属性值\n\n接下来 $n-1$ 行，$x_i,y_i$ 表示 $x_i$ 是 $y_i$ 的上司。\n\n接下来来 $k$ 行，有两种情况\n\n$1\\ u_i$：询问离 $u_i$ 成员最近且有相同萌元素上司。\n\n$2\\ u_i\\  a$：更改 $u_i$ 的属性值为 $a$。", "outputFormat": "对于每个 $1$ 类型的询问，输出符合要求的编号。如果没有符合要求的编号，输出 $-1$。", "hint": "对于 $20\\%$ 的数据，没有修改的操作。\n\n对于 $50\\%$ 的数据，$n\\le 100$，修改次数 $<10$。\n\n对于 $100\\%$ 的数据，$n\\le 200000$，$k<100000$，修改次数 $\\le 50,a_i\\le 2^{31}-1$。\n\nUPD：本题测试数据随机，可能是假题。", "locale": "zh-CN"}}}
{"pid": "P2442", "type": "P", "difficulty": 6, "samples": [["5 3\n90 100 90 90 80\n2 1 2 1 8\n1 1 3\n2 3 5\n3 1 2\n", "92.00\n80\n10\n"]], "limits": {"time": [500, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["O2优化", "分块", "ST 表"], "title": "分数统计", "background": "大宁考完联赛回来，成功的躲过了期中考试，但是他的班主任 Yellow_sword  不会放过他。", "description": "Yellow_sword 要大宁给他弄一个数据库，维护班级的考试平均分。每个人期中考试各科的分数已经被统一的转化为评价值，为一个 $[1,100]$ 之间的整数。它评价了这个人的总体水平，现在 Yellow_sword 丢给了大宁 $n$ 个班级的班级平均评价值和每个班的人数，由于 Yellow_sword 和大宁都很懒，所以都假装每个班每个人的评价值就是班级的平均评价值。他想知道：\n\n1. 连续的若干个班所有人评价值的平均数。\n2. 连续的若干个班所有人评价值的众数（若有多个取最小的那个众数）。\n3. 连续的若干个班所有人评价值的极差（即评价值最高和最低的差）。\n\n既然大家都很懒，那事情就给你来做了。", "inputFormat": "第一行为两个整数 $n$ 和 $q$，表示有 $n$ 个班级和 $q$ 个询问。\n\n第二行为 $n$ 个整数 $a_i$，表示第 $i$ 个班的平均评价值。\n\n第三行为 $n$ 个整数 $b_i$，表示第 $i$ 个班的人数。\n\n接下来 $q$ 行，每行一个查询，格式为：`Opt u v`。\n\n表示在第 $u$ 到 $v$ 个班级里查询 $Opt$ 对应的项，$Opt\\in[1,3]$，意义为前文所述。", "outputFormat": "对于每一个询问，在 $q$ 行中输出对应的结果，平均数保留两位小数（向下取整）。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le a_i\\le 100$，$1\\le b_i\\le 100$。\n\n|测试点| 数据规模| 时限 |\n| :-------:| :----:| :----: |\n| $1\\sim3$ |$n=q=10^3$| $0.5s$ |\n|$4\\sim5$| $n=q=5\\times 10^4$| $0.5s$ |\n| $6\\sim 7$ |     $n=q=10^5$| $1s$ |\n| $8\\sim 10$ |  $n=q=2\\times 10^5$| $1s$ |\n\n**建议使用较快的读入方式。**", "locale": "zh-CN", "translations": {"en": {"title": "Score Statistics", "background": "After finishing the league contest, Da Ning successfully avoided the midterm exam, but his homeroom teacher Yellow_sword would not let him off.", "description": "Yellow_sword asks Da Ning to build a database to maintain the class exam averages. Each student’s scores for the midterm subjects have been unified into a single rating, an integer in $[1, 100]$. This rating evaluates a student’s overall level. Now Yellow_sword has given Da Ning the average rating of $n$ classes and the size of each class. Because both Yellow_sword and Da Ning are lazy, they will assume every student in a class has a rating equal to that class’s average rating. He wants to know:\n\n1. The average rating of all students over some consecutive classes.\n2. The mode of all students’ ratings over some consecutive classes (if there are multiple, output the smallest mode).\n3. The range of all students’ ratings over some consecutive classes (that is, the difference between the highest and lowest ratings).\n\nSince everyone is lazy, the task is given to you.", "inputFormat": "The first line contains two integers $n$ and $q$, the number of classes and the number of queries.\n\nThe second line contains $n$ integers $a_i$, the average rating of the $i$-th class.\n\nThe third line contains $n$ integers $b_i$, the size of the $i$-th class.\n\nThe next $q$ lines each contain one query in the format: `Opt u v`.\n\nThis means to query the item corresponding to $Opt \\in [1, 3]$ over classes from $u$ to $v$, as described above.", "outputFormat": "For each query, output the corresponding result on its own line. For the average, print exactly two decimal places, rounded down (floor).", "hint": "For $100\\%$ of the testdata, it is guaranteed that $1 \\le a_i \\le 100$, $1 \\le b_i \\le 100$.\n\n| Test point | Scale | Time limit |\n| :-------: | :----: | :----: |\n| $1 \\sim 3$ | $n = q = 10^3$ | $0.5 \\text{ s}$ |\n| $4 \\sim 5$ | $n = q = 5 \\times 10^4$ | $0.5 \\text{ s}$ |\n| $6 \\sim 7$ | $n = q = 10^5$ | $1 \\text{ s}$ |\n| $8 \\sim 10$ | $n = q = 2 \\times 10^5$ | $1 \\text{ s}$ |\n\nIt is recommended to use fast I/O.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分数统计", "background": "大宁考完联赛回来，成功的躲过了期中考试，但是他的班主任 Yellow_sword  不会放过他。", "description": "Yellow_sword 要大宁给他弄一个数据库，维护班级的考试平均分。每个人期中考试各科的分数已经被统一的转化为评价值，为一个 $[1,100]$ 之间的整数。它评价了这个人的总体水平，现在 Yellow_sword 丢给了大宁 $n$ 个班级的班级平均评价值和每个班的人数，由于 Yellow_sword 和大宁都很懒，所以都假装每个班每个人的评价值就是班级的平均评价值。他想知道：\n\n1. 连续的若干个班所有人评价值的平均数。\n2. 连续的若干个班所有人评价值的众数（若有多个取最小的那个众数）。\n3. 连续的若干个班所有人评价值的极差（即评价值最高和最低的差）。\n\n既然大家都很懒，那事情就给你来做了。", "inputFormat": "第一行为两个整数 $n$ 和 $q$，表示有 $n$ 个班级和 $q$ 个询问。\n\n第二行为 $n$ 个整数 $a_i$，表示第 $i$ 个班的平均评价值。\n\n第三行为 $n$ 个整数 $b_i$，表示第 $i$ 个班的人数。\n\n接下来 $q$ 行，每行一个查询，格式为：`Opt u v`。\n\n表示在第 $u$ 到 $v$ 个班级里查询 $Opt$ 对应的项，$Opt\\in[1,3]$，意义为前文所述。", "outputFormat": "对于每一个询问，在 $q$ 行中输出对应的结果，平均数保留两位小数（向下取整）。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le a_i\\le 100$，$1\\le b_i\\le 100$。\n\n|测试点| 数据规模| 时限 |\n| :-------:| :----:| :----: |\n| $1\\sim3$ |$n=q=10^3$| $0.5s$ |\n|$4\\sim5$| $n=q=5\\times 10^4$| $0.5s$ |\n| $6\\sim 7$ |     $n=q=10^5$| $1s$ |\n| $8\\sim 10$ |  $n=q=2\\times 10^5$| $1s$ |\n\n**建议使用较快的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P2443", "type": "P", "difficulty": 0, "samples": [["-10 1\r\n10 1\r\n100\r\n2\r\n110 0 0 -5 5 -10 0 -5 -5\r\n300 5 -5 10 0 5 5 0 0", "100.00\n21.93\n2252.15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 高速公路", "background": null, "description": "京珠高速公路目前正在建设当中。粤北地区是世界著名的“丹霞地貌”，京珠在这里必须穿过一大片复杂的山区。工程的总设计师 Bonny 已经规划好了公路大致的走向，而工程师们则被派往各个多山的路段，以设计这些路段的具体规划。\n\n现在，你因为在信息学上取得的出色成就，被 Bonny 派往一个称为 DreadfulMess 的最复杂的路段，并仅仅给了你一张地图和一些数据。\n\n地图以笛卡尔坐标系描述，其中包括这一地区的所有山峰的数据（俯视图）及两个点 A、B。每座山的轮廓被假想为四边形，工程师们把这些四边形的顶点称为“测量点”，这些四边形不会发生重叠、包含，但有可能有共用的一段边或顶点。山以外的区域被认为是平地。\n\n你的任务是计算此路段山区的总面积，并设计一条公路，从 A 点起始，到 B 点终止。设计的原则是：\n1. 公路是一条折线（即转弯点的个数是有限的）；\n2. 公路可以修在平地上、沿山脚或山谷（即两座山的结合部），也可以打隧道；\n3. 隧道口不能是转弯点，除非它又是测量点；\n4. 修建公路的费用最小。\n\n费用的计算：平地、沿山脚或山谷的单位修路费用为 $u_0$，各座山修隧道的单位费用为 $u_i$。", "inputFormat": "第一、二行分别为 A、B 点坐标，整数。\n\n第三行为 $u_0$，正整数。\n\n第四行为山峰数 $n$，$0\\leq n\\leq 50$。\n\n以下共 $n$ 行，每行首先是一个正整数 $u_i$，然后是 $8$ 个整数，按逆时针方向给出表示山的四边形的顶点坐标。\n\n输入数据保证A、B两点不会在任何山的内部，四边形任意 $3$ 个顶点不在同一直线上，所有的整数的绝对值不会大于 $1000$。\n\n坐标均以整数对的形式给出，第一个数为横坐标，第二个为纵坐标。同一行内若有多个相邻整数，则整数间以至少一个空格隔开。", "outputFormat": "第一行为这个区域山的总面积。\n\n第二行为设计公路的总长。\n\n第三行为修建所设计公路的费用。\n\n输出数据均保留两位小数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Highway", "background": "", "description": "The Beijing–Zhuhai Expressway is currently under construction. The Yuebei region is a world-famous “Danxia landform,” and the expressway must pass through a large, complex mountainous area here. The chief designer Bonny has planned the general route of the highway, and engineers have been dispatched to various mountainous sections to design the detailed plans for these segments.\n\nNow, thanks to your outstanding achievements in informatics, Bonny assigns you to the most complex section called DreadfulMess, giving you only a map and some data.\n\nThe map is described in a Cartesian coordinate system. It includes the data of all mountains in this region (top view) and two points A and B. Each mountain’s outline is approximated by a quadrilateral, and the engineers call the vertices of these quadrilaterals “survey points.” The quadrilaterals do not overlap or contain one another, but they may share an edge segment or a vertex. Areas outside the mountains are considered flat ground.\n\nYour task is to compute the total area of the mountainous region of this segment and to design a highway starting at point A and ending at point B. The design principles are:\n1. The highway is a polyline (i.e., the number of turning points is finite).\n2. The highway may be built on flat ground, along foothills or valleys (i.e., the junction of two mountains), or by tunneling.\n3. Tunnel portals cannot be turning points unless they are also survey points.\n4. The construction cost should be minimized.\n\nCost calculation: The unit construction cost on flat ground or along foothills or valleys is $u_0$, and the unit tunneling cost through the $i$-th mountain is $u_i$.", "inputFormat": "- The first and second lines are the coordinates of points A and B, respectively, both integers.\n- The third line contains $u_0$, a positive integer.\n- The fourth line contains the number of mountains $n$, with $0\\leq n\\leq 50$.\n- The next $n$ lines: each line first contains a positive integer $u_i$, then $8$ integers giving the coordinates of the quadrilateral’s vertices in counterclockwise order.\n\nThe input guarantees that points A and B are not inside any mountain, no three vertices of any quadrilateral are collinear, and the absolute value of every integer does not exceed $1000$.\n\nCoordinates are given as pairs of integers: the first is the $x$-coordinate, and the second is the $y$-coordinate. If there are multiple adjacent integers on the same line, they are separated by at least one space.", "outputFormat": "- The first line is the total area of all mountains in the region.\n- The second line is the total length of the designed highway.\n- The third line is the construction cost of the designed highway.\n\nAll outputs should keep two decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 高速公路", "background": null, "description": "京珠高速公路目前正在建设当中。粤北地区是世界著名的“丹霞地貌”，京珠在这里必须穿过一大片复杂的山区。工程的总设计师 Bonny 已经规划好了公路大致的走向，而工程师们则被派往各个多山的路段，以设计这些路段的具体规划。\n\n现在，你因为在信息学上取得的出色成就，被 Bonny 派往一个称为 DreadfulMess 的最复杂的路段，并仅仅给了你一张地图和一些数据。\n\n地图以笛卡尔坐标系描述，其中包括这一地区的所有山峰的数据（俯视图）及两个点 A、B。每座山的轮廓被假想为四边形，工程师们把这些四边形的顶点称为“测量点”，这些四边形不会发生重叠、包含，但有可能有共用的一段边或顶点。山以外的区域被认为是平地。\n\n你的任务是计算此路段山区的总面积，并设计一条公路，从 A 点起始，到 B 点终止。设计的原则是：\n1. 公路是一条折线（即转弯点的个数是有限的）；\n2. 公路可以修在平地上、沿山脚或山谷（即两座山的结合部），也可以打隧道；\n3. 隧道口不能是转弯点，除非它又是测量点；\n4. 修建公路的费用最小。\n\n费用的计算：平地、沿山脚或山谷的单位修路费用为 $u_0$，各座山修隧道的单位费用为 $u_i$。", "inputFormat": "第一、二行分别为 A、B 点坐标，整数。\n\n第三行为 $u_0$，正整数。\n\n第四行为山峰数 $n$，$0\\leq n\\leq 50$。\n\n以下共 $n$ 行，每行首先是一个正整数 $u_i$，然后是 $8$ 个整数，按逆时针方向给出表示山的四边形的顶点坐标。\n\n输入数据保证A、B两点不会在任何山的内部，四边形任意 $3$ 个顶点不在同一直线上，所有的整数的绝对值不会大于 $1000$。\n\n坐标均以整数对的形式给出，第一个数为横坐标，第二个为纵坐标。同一行内若有多个相邻整数，则整数间以至少一个空格隔开。", "outputFormat": "第一行为这个区域山的总面积。\n\n第二行为设计公路的总长。\n\n第三行为修建所设计公路的费用。\n\n输出数据均保留两位小数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2444", "type": "P", "difficulty": 6, "samples": [["3\n01 \n11 \n00000\n", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["字符串", "2000", "POI（波兰）", "AC 自动机"], "title": "[POI 2000] 病毒", "background": "", "description": "二进制病毒审查委员会最近发现了如下的规律：某些确定的二进制串是病毒的代码。如果某段代码中不存在任何一段病毒代码，那么我们就称这段代码是安全的。现在委员会已经找出了所有的病毒代码段，试问，是否存在一个无限长的安全的二进制代码。\n\n示例：\n\n例如如果 $\\{011, 11, 00000\\}$ 为病毒代码段，那么一个可能的无限长安全代码就是 $010101 \\ldots$。如果 $\\{01, 11, 000000\\}$ 为病毒代码段，那么就不存在一个无限长的安全代码。\n\n现在给出所有的病毒代码段，判断是否存在无限长的安全代码。", "inputFormat": "第一行包括一个整数 $n$，表示病毒代码段的数目。\n\n以下的 $n$ 行每一行都包括一个非空的 $01$ 字符串，代表一个病毒代码段。\n", "outputFormat": "如果存在无限长的安全代码，输出 `TAK`，否则输出 `NIE`。", "hint": "$1 \\leq n \\leq 2000$，所有病毒代码段的总长度不超过 $3 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2000] Virus", "background": "", "description": "The Binary Virus Review Committee has recently discovered the following pattern: certain specific binary strings are virus code. If a piece of code contains no occurrence of any virus code, we call this code safe. Now that the committee has identified all virus code segments, determine whether there exists an infinitely long safe binary code.\n\nExample:\n\nFor instance, if $\\{011, 11, 00000\\}$ are virus code segments, then one possible infinitely long safe code is $010101 \\ldots$. If $\\{01, 11, 000000\\}$ are virus code segments, then there does not exist an infinitely long safe code.\n\nGiven all virus code segments, determine whether an infinitely long safe code exists.", "inputFormat": "The first line contains an integer $n$, the number of virus code segments.\n\nEach of the next $n$ lines contains a nonempty binary string, representing a virus code segment.", "outputFormat": "If an infinitely long safe code exists, output `TAK`; otherwise, output `NIE`.", "hint": "$1 \\leq n \\leq 2000$, and the total length of all virus code segments does not exceed $3 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2000] 病毒", "background": "", "description": "二进制病毒审查委员会最近发现了如下的规律：某些确定的二进制串是病毒的代码。如果某段代码中不存在任何一段病毒代码，那么我们就称这段代码是安全的。现在委员会已经找出了所有的病毒代码段，试问，是否存在一个无限长的安全的二进制代码。\n\n示例：\n\n例如如果 $\\{011, 11, 00000\\}$ 为病毒代码段，那么一个可能的无限长安全代码就是 $010101 \\ldots$。如果 $\\{01, 11, 000000\\}$ 为病毒代码段，那么就不存在一个无限长的安全代码。\n\n现在给出所有的病毒代码段，判断是否存在无限长的安全代码。", "inputFormat": "第一行包括一个整数 $n$，表示病毒代码段的数目。\n\n以下的 $n$ 行每一行都包括一个非空的 $01$ 字符串，代表一个病毒代码段。\n", "outputFormat": "如果存在无限长的安全代码，输出 `TAK`，否则输出 `NIE`。", "hint": "$1 \\leq n \\leq 2000$，所有病毒代码段的总长度不超过 $3 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2445", "type": "P", "difficulty": 6, "samples": [["5\n.....\n.***.\n.....\n.***.\n.....\n2\n1 3\n5 2\n1\n2\n2\n5 3 1 2\n4 5 5 1\n", "1 5 2\n2 1 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东", "Special Judge", "二分图"], "title": "[SDOI2005] 动物园", "background": "", "description": "位于郊区的动物园很早就采用了当时先进的自动化管理设施对动物进行管理。但是由于当时的系统没有考虑 $2000$ 年问题，使得管理人员十分担心。虽然采取了很多防范措施，系统还是在世纪之交出现了一些 BUG，部分动物的笼子门自动打开了，关在里面的动物都跑出来了。\n\n幸好动物园已经关闭，**动物不会跑出动物园**。警长 Still 接到报警后率领一支干警奔赴现场。这时动物已经跑出了笼子，所以干警们花了很多时间才控制住了局势，所有的动物都己经送到动物园的广场。但是此时有一个棘手的问题，由于系统完全崩溃，无法得知动物是从哪个笼子里面跑出来的。此时，干警们记得动物的一些行动，都是如下的形式：\n\n第 $t$ 分钟看到某某动物在某个位置。\n\nStill 希望通过这些零碎的信息得到动物是从哪个笼子跑出来的。\n\n### 任务\n\n根据给出的信息，编程求出每个动物的笼子的位置。\n\n动物园的地形描述为一个 $n\\times n$ 的网格，一个格子可以是建筑物或者平地。笼子的位置只可能在平地，动物也只在平地运动。每种动物的奔跑速度不一样，例如老虎一分钟可以跑 $5$ 个格子，猫一分钟只可以跑 $2$ 个格子等等。以下是一个例子（其中阴影部分是建筑物）：\n\n![](https://cdn.luogu.com.cn/upload/pic/1577.png)\n\n**每个笼子只关一只动物，不同的笼子关不同的动物。不同的笼子可能在同一个格子里。**", "inputFormat": "第一行为自然数 $n$，表示网格的边长\n\n以下 $n$ 行为一个 $n\\times n$ 的字符串矩阵，表示动物园的地形。其中 `.` 表示空地，`*` 表示建筑物。\n\n接着一行是自然数 $p$，表示笼子的数目（同时也是动物的数目）。\n\n以下 $p$ 行，每行两个自然数 $R,C$，表示一个笼子处于网格的第 $R$ 行，第 $C$ 列。\n\n以下 $p$ 行，每行一个整数 $V_i$，依次表示编号为 $i$ 的动物的速度（格子/分钟），每个动物用它的编号表示。\n\n接着一行是自然数 $r$，表示干警们提供的信息数目。\n\n以下 $r$ 行，每行四个自然数，$t,x, y, j$，表示第 $t$ 分钟在网格的 $(x, y)$ 位置看到动物 $j$。\n\n具体格式参照样例。", "outputFormat": "输出任意一个可行解。\n\n包括 $p$ 行，每行三个整数 $i,x,y$，表示动物 $i$ 原来在格子 $(x,y)$。", "hint": "$1\\leq n,p\\leq 100$，$x,y\\leq n$。\n\n注：对于特定的数据可能有多解，输出任意一解即可。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Zoo", "background": "", "description": "The zoo located in the suburbs adopted then-advanced automated management facilities to manage the animals. However, because the system did not consider the $2000$ year problem, the staff became very worried. Although many preventive measures were taken, the system still developed some bugs around the turn of the century, and some cage doors opened automatically, letting the animals inside escape.\n\nFortunately, the zoo had already been closed, so **animals will not leave the zoo**. Sheriff Still received the alarm and led a team of officers to the scene. By then the animals had already gotten out of their cages, so the officers spent a lot of time bringing the situation under control, and all animals were sent to the plaza of the zoo. However, there was a tricky problem: since the system had completely crashed, it was impossible to know from which cage each animal had escaped. The officers remembered some of the animals’ movements, all in the following form:\n\nAt minute $t$, a certain animal was seen at a certain position.\n\nStill hopes to use these scattered pieces of information to determine from which cage each animal escaped.\n\n### Task\n\nBased on the given information, write a program to determine the location of each animal’s cage.\n\nThe zoo’s terrain is described by an $n\\times n$ grid. A cell can be either a building or open ground. Cage locations can only be on open ground, and animals only move on open ground. Each animal runs at a different speed. For example, a tiger can run $5$ cells per minute, while a cat can only run $2$ cells per minute, etc. The following is an example (the shaded cells are buildings):\n\n![](https://cdn.luogu.com.cn/upload/pic/1577.png)\n\n**Each cage holds exactly one animal, and different cages hold different animals. Different cages may be in the same cell.**", "inputFormat": "The first line contains a natural number $n$, the side length of the grid.\n\nThe next $n$ lines form an $n\\times n$ character matrix describing the zoo’s terrain. Here `.` denotes open ground, and `*` denotes a building.\n\nThe next line contains a natural number $p$, the number of cages (which is also the number of animals).\n\nThe next $p$ lines each contain two natural numbers $R,C$, indicating that a cage is at row $R$, column $C$ of the grid.\n\nThe next $p$ lines each contain an integer $V_i$, in order giving the speed (cells/minute) of animal $i$. Each animal is identified by its index.\n\nThe next line contains a natural number $r$, the number of pieces of information provided by the officers.\n\nThe next $r$ lines each contain four natural numbers $t,x, y, j$, meaning that at minute $t$, animal $j$ was seen at position $(x, y)$ on the grid.\n\nRefer to the sample for the specific format.", "outputFormat": "Output any feasible solution.\n\nPrint $p$ lines, each with three integers $i,x,y$, meaning that animal $i$ was originally at cell $(x,y)$.", "hint": "$1\\leq n,p\\leq 100$，$x,y\\leq n$。\n\nNote: For certain testdata there may be multiple solutions; output any one of them.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 动物园", "background": "", "description": "位于郊区的动物园很早就采用了当时先进的自动化管理设施对动物进行管理。但是由于当时的系统没有考虑 $2000$ 年问题，使得管理人员十分担心。虽然采取了很多防范措施，系统还是在世纪之交出现了一些 BUG，部分动物的笼子门自动打开了，关在里面的动物都跑出来了。\n\n幸好动物园已经关闭，**动物不会跑出动物园**。警长 Still 接到报警后率领一支干警奔赴现场。这时动物已经跑出了笼子，所以干警们花了很多时间才控制住了局势，所有的动物都己经送到动物园的广场。但是此时有一个棘手的问题，由于系统完全崩溃，无法得知动物是从哪个笼子里面跑出来的。此时，干警们记得动物的一些行动，都是如下的形式：\n\n第 $t$ 分钟看到某某动物在某个位置。\n\nStill 希望通过这些零碎的信息得到动物是从哪个笼子跑出来的。\n\n### 任务\n\n根据给出的信息，编程求出每个动物的笼子的位置。\n\n动物园的地形描述为一个 $n\\times n$ 的网格，一个格子可以是建筑物或者平地。笼子的位置只可能在平地，动物也只在平地运动。每种动物的奔跑速度不一样，例如老虎一分钟可以跑 $5$ 个格子，猫一分钟只可以跑 $2$ 个格子等等。以下是一个例子（其中阴影部分是建筑物）：\n\n![](https://cdn.luogu.com.cn/upload/pic/1577.png)\n\n**每个笼子只关一只动物，不同的笼子关不同的动物。不同的笼子可能在同一个格子里。**", "inputFormat": "第一行为自然数 $n$，表示网格的边长\n\n以下 $n$ 行为一个 $n\\times n$ 的字符串矩阵，表示动物园的地形。其中 `.` 表示空地，`*` 表示建筑物。\n\n接着一行是自然数 $p$，表示笼子的数目（同时也是动物的数目）。\n\n以下 $p$ 行，每行两个自然数 $R,C$，表示一个笼子处于网格的第 $R$ 行，第 $C$ 列。\n\n以下 $p$ 行，每行一个整数 $V_i$，依次表示编号为 $i$ 的动物的速度（格子/分钟），每个动物用它的编号表示。\n\n接着一行是自然数 $r$，表示干警们提供的信息数目。\n\n以下 $r$ 行，每行四个自然数，$t,x, y, j$，表示第 $t$ 分钟在网格的 $(x, y)$ 位置看到动物 $j$。\n\n具体格式参照样例。", "outputFormat": "输出任意一个可行解。\n\n包括 $p$ 行，每行三个整数 $i,x,y$，表示动物 $i$ 原来在格子 $(x,y)$。", "hint": "$1\\leq n,p\\leq 100$，$x,y\\leq n$。\n\n注：对于特定的数据可能有多解，输出任意一解即可。", "locale": "zh-CN"}}}
{"pid": "P2446", "type": "P", "difficulty": 5, "samples": [["6 6\n1 2 1\n1 4 3\n2 3 1\n2 5 2\n4 6 2\n5 3 2\n0\n0\n0\n1 5\n0\n2 3 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "山东", "最短路"], "title": "[SDOI2010] 大陆争霸", "background": "在一个遥远的世界里有两个国家：位于大陆西端的杰森国和位于大陆东端的克里斯国。两个国家的人民分别信仰两个对立的神：杰森国信仰象征黑暗和毁灭的神曾·布拉泽，而克里斯国信仰象征光明和永恒的神斯普林·布拉泽。\n\n幻想历 $8012$ 年 $1$ 月，杰森国正式宣布曾·布拉泽是他们唯一信仰的神，同时开始迫害在杰森国的信仰斯普林·布拉泽的克里斯国教徒。\n\n幻想历 $8012$ 年 $3$ 月 $2$ 日，位于杰森国东部小镇神谕镇的克里斯国教徒发动起义。\n\n幻想历 $8012$ 年 $3$ 月 $7$ 日，神谕镇的起义被杰森国大军以残酷手段镇压。\n\n幻想历 $8012$ 年 $3$ 月 $8$ 日，克里斯国对杰森国宣战。由数十万大军组成的克里斯军团开至两国边境，与杰森军团对峙。\n\n幻想历 $8012$ 年 $4$ 月，克里斯军团攻破杰森军团防线进入神谕镇，该镇幸存的克里斯国教徒得到解放。\n\n战争随后进入胶着状态，旷日持久。战况惨烈，一时间枪林弹雨，硝烟弥漫，民不聊生。", "description": "幻想历 $8012$ 年 $5$ 月 $12$ 日深夜，斯普林·布拉泽降下神谕：“Trust me, earn eternal life.”克里斯军团士气大增。作为克里斯军团的主帅，你决定利用这一机会发动奇袭，一举击败杰森国。具体地说，杰森国有 $N$ 个城市，由 $M$ 条单向道路连接。神谕镇是城市 $1$ 而杰森国的首都是城市 $N$。你只需摧毁位于杰森国首都的曾·布拉泽大神殿，杰森国的信仰，军队还有一切就都会土崩瓦解，灰飞烟灭。\n\n为了尽量减小己方的消耗，你决定使用自爆机器人完成这一任务。唯一的困难是，杰森国的一部分城市有结界保护，不破坏掉结界就无法进入城市。而每个城市的结界都是由分布在其他城市中的一些结界发生器维持的，如果想进入某个城市，你就必须破坏掉维持这个城市结界的所有结界发生器。\n\n现在你有无限多的自爆机器人，一旦进入了某个城市，自爆机器人可以瞬间引爆，破坏一个目标（结界发生器，或是杰森国大神殿），当然机器人本身也会一起被破坏。你需要知道：摧毁杰森国所需的最短时间。\n", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个正整数 $u_i,v_i,w_i$，表示有一条从城市 $u_i$ 到城市 $v_i$ 的单向道路，自爆机器人通过这条道路需要 $w_i$ 的时间。\n\n之后 $N$ 行，每行描述一个城市。首先是一个正整数 $l_i$，维持这个城市结界所使用的结界发生器数目。之后 $l_i$ 个 $1\\ldots N$ 之间的城市编号，表示每个结界发生器的位置。如果 $l_i=0$，则说明该城市没有结界保护，保证 $l_1 = 0$ 。", "outputFormat": "仅包含一个正整数 ，击败杰森国所需的最短时间。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1590.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1591.png)\n\n对于 $20\\%$ 的数据，满足 $N\\leq 15$，$M≤50$；\n\n对于 $50\\%$ 的数据，满足 $N\\leq 500$，$M\\leq 6\\times 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 3\\times 10^3$，$1\\leq M\\leq 7\\times 10^4$，$1\\leq w_i\\leq 10^8$。\n\n输入数据保证一定有解，且不会存在维持某个城市结界的结界发生器在这个城市内部。\n\n连接两个城市的道路可能不止一条，也可能存在一个城市自己到自己的道路。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Mainland Conquest", "background": "In a distant world, there are two countries: Jason, located at the western end of the continent, and Chris, located at the eastern end. The two peoples believe in two opposing gods: Jason worships Zeng · Blazer, the god symbolizing darkness and destruction, while Chris worships Spring · Blazer, the god symbolizing light and eternity.\n\nIn Fantasia Year $8012$ January, Jason officially declared Zeng · Blazer as their only god, and began persecuting Chris believers of Spring · Blazer within Jason.\n\nOn Fantasia Year $8012$ March $2$, the Chris believers in Shenyu Town, a small town in eastern Jason, launched an uprising.\n\nOn Fantasia Year $8012$ March $7$, the uprising in Shenyu Town was brutally suppressed by Jason’s army.\n\nOn Fantasia Year $8012$ March $8$, Chris declared war on Jason. The Chris legions, hundreds of thousands strong, marched to the border between the two countries and faced off against Jason’s legions.\n\nIn Fantasia Year $8012$ April, the Chris legions broke through Jason’s defensive line and entered Shenyu Town, freeing the surviving Chris believers there.\n\nThe war then entered a stalemate and dragged on. The fighting was brutal, with gunfire and smoke everywhere, leaving the people in misery.", "description": "On Fantasia Year $8012$ May $12$ late at night, Spring · Blazer delivered an oracle: “Trust me, earn eternal life.” The morale of the Chris legions soared. As the commander-in-chief of the Chris legions, you decide to seize this opportunity to launch a surprise attack and defeat Jason in one stroke. Specifically, Jason has $N$ cities connected by $M$ directed roads. Shenyu Town is city $1$, and Jason’s capital is city $N$. You only need to destroy the Great Temple of Zeng · Blazer located in the capital of Jason; once it falls, Jason’s faith, army, and everything else will collapse and vanish.\n\nTo minimize your own losses, you decide to use self-destruct robots to accomplish this task. The only difficulty is that some cities in Jason are protected by barriers. You cannot enter a city without first disabling its barrier. Each city’s barrier is maintained by several barrier generators distributed in other cities. If you want to enter a city, you must destroy all the barrier generators that maintain that city’s barrier.\n\nYou have an unlimited number of self-destruct robots. Once a robot enters a city, it can detonate instantly to destroy a single target (either a barrier generator or the Great Temple), and of course the robot itself is also destroyed. You need to find the minimum time required to bring down Jason.\n\nIt is guaranteed that there is always a solution. No barrier generator that maintains a city’s barrier is located inside that very city. There may be multiple roads between the same pair of cities, and self-loops may exist.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThe next $M$ lines each contain three positive integers $u_i, v_i, w_i$, indicating there is a directed road from city $u_i$ to city $v_i$, and a self-destruct robot needs $w_i$ time to traverse this road.\n\nThen follow $N$ lines, each describing one city. Each line starts with a positive integer $l_i$, the number of barrier generators maintaining this city’s barrier, followed by $l_i$ city indices between $1 \\ldots N$ indicating the locations of those generators. If $l_i = 0$, then this city has no barrier. It is guaranteed that $l_1 = 0$.", "outputFormat": "Output a single positive integer: the minimum time required to defeat Jason.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1590.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1591.png)\n\nConstraints:\n- For $20\\%$ of the testdata, $N \\le 15$, $M \\le 50$.\n- For $50\\%$ of the testdata, $N \\le 500$, $M \\le 6 \\times 10^3$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 3 \\times 10^3$, $1 \\le M \\le 7 \\times 10^4$, $1 \\le w_i \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 大陆争霸", "background": "在一个遥远的世界里有两个国家：位于大陆西端的杰森国和位于大陆东端的克里斯国。两个国家的人民分别信仰两个对立的神：杰森国信仰象征黑暗和毁灭的神曾·布拉泽，而克里斯国信仰象征光明和永恒的神斯普林·布拉泽。\n\n幻想历 $8012$ 年 $1$ 月，杰森国正式宣布曾·布拉泽是他们唯一信仰的神，同时开始迫害在杰森国的信仰斯普林·布拉泽的克里斯国教徒。\n\n幻想历 $8012$ 年 $3$ 月 $2$ 日，位于杰森国东部小镇神谕镇的克里斯国教徒发动起义。\n\n幻想历 $8012$ 年 $3$ 月 $7$ 日，神谕镇的起义被杰森国大军以残酷手段镇压。\n\n幻想历 $8012$ 年 $3$ 月 $8$ 日，克里斯国对杰森国宣战。由数十万大军组成的克里斯军团开至两国边境，与杰森军团对峙。\n\n幻想历 $8012$ 年 $4$ 月，克里斯军团攻破杰森军团防线进入神谕镇，该镇幸存的克里斯国教徒得到解放。\n\n战争随后进入胶着状态，旷日持久。战况惨烈，一时间枪林弹雨，硝烟弥漫，民不聊生。", "description": "幻想历 $8012$ 年 $5$ 月 $12$ 日深夜，斯普林·布拉泽降下神谕：“Trust me, earn eternal life.”克里斯军团士气大增。作为克里斯军团的主帅，你决定利用这一机会发动奇袭，一举击败杰森国。具体地说，杰森国有 $N$ 个城市，由 $M$ 条单向道路连接。神谕镇是城市 $1$ 而杰森国的首都是城市 $N$。你只需摧毁位于杰森国首都的曾·布拉泽大神殿，杰森国的信仰，军队还有一切就都会土崩瓦解，灰飞烟灭。\n\n为了尽量减小己方的消耗，你决定使用自爆机器人完成这一任务。唯一的困难是，杰森国的一部分城市有结界保护，不破坏掉结界就无法进入城市。而每个城市的结界都是由分布在其他城市中的一些结界发生器维持的，如果想进入某个城市，你就必须破坏掉维持这个城市结界的所有结界发生器。\n\n现在你有无限多的自爆机器人，一旦进入了某个城市，自爆机器人可以瞬间引爆，破坏一个目标（结界发生器，或是杰森国大神殿），当然机器人本身也会一起被破坏。你需要知道：摧毁杰森国所需的最短时间。\n", "inputFormat": "第一行两个正整数 $N,M$。\n\n接下来 $M$ 行，每行三个正整数 $u_i,v_i,w_i$，表示有一条从城市 $u_i$ 到城市 $v_i$ 的单向道路，自爆机器人通过这条道路需要 $w_i$ 的时间。\n\n之后 $N$ 行，每行描述一个城市。首先是一个正整数 $l_i$，维持这个城市结界所使用的结界发生器数目。之后 $l_i$ 个 $1\\ldots N$ 之间的城市编号，表示每个结界发生器的位置。如果 $l_i=0$，则说明该城市没有结界保护，保证 $l_1 = 0$ 。", "outputFormat": "仅包含一个正整数 ，击败杰森国所需的最短时间。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1590.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1591.png)\n\n对于 $20\\%$ 的数据，满足 $N\\leq 15$，$M≤50$；\n\n对于 $50\\%$ 的数据，满足 $N\\leq 500$，$M\\leq 6\\times 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 3\\times 10^3$，$1\\leq M\\leq 7\\times 10^4$，$1\\leq w_i\\leq 10^8$。\n\n输入数据保证一定有解，且不会存在维持某个城市结界的结界发生器在这个城市内部。\n\n连接两个城市的道路可能不止一条，也可能存在一个城市自己到自己的道路。", "locale": "zh-CN"}}}
{"pid": "P2447", "type": "P", "difficulty": 5, "samples": [["3 5\n011 1\n110 1\n101 0\n111 1\n010 1", "4\nEarth\n?y7M#\nEarth"], ["5 7\n01100 1\n11000 1\n10100 0\n11100 1\n00011 1\n00000 0\n11111 0", "Cannot Determine"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2010", "各省省选", "山东", "Special Judge", "高斯消元", "位运算"], "title": "[SDOI2010] 外星千足虫", "background": "", "description": "公元 $2333$ 年 $2$ 月 $3$ 日，在经历了 $17$ 年零 $3$ 个月的漫长旅行后，“格纳格鲁一号”载人火箭返回舱终于安全着陆。此枚火箭由美国国家航空航天局（NASA）研制发射，行经火星、金星、土卫六、木卫二、谷神星、“张衡星”等 $23$ 颗太阳系星球，并最终在小行星“杰森星”探寻到了地外生命。宇航员在“杰森星”地表岩层下 $45.70$ 米位置发现一批珍贵的活体生命样本，并将其带回检测。\n\n在带回的活体样本中，最吸引人的当属这些来自外星的千足虫了。这些虫子身躯纤长，身体分为若干节。受到触碰时，会将身体卷曲成圆环形，间隔一段时间后才会复原活动。\n\n有趣的还不止如此。研究人员发现，这些虫子的足并不像地球千足虫成对出现、总共偶数条——它们每节身体下方都有着不定数量的足，但足的总数一定是奇数条！\n\n虽然从外观难以区分二者，但通过统计足的数目，科学家们就能根据奇偶性判断出千足虫所属的星球。\n\n![](https://cdn.luogu.com.cn/upload/pic/1592.png)\n\n作为 J 国派去 NASA 的秘密间谍，你希望参加这次研究活动以掌握进一步的情报，而 NASA 选拔的研究人员都是最优秀的科学家。于是 NASA 局长 Charles Bolden 出了一道难题来检测你的实力：\n\n现在你面前摆有 $1\\ldots N$ 编号的 $N$ 只千足虫，你的任务是鉴定每只虫子所属的星球，但不允许亲自去数它们的足。\n\nCharles 每次会在这 $N$ 只千足虫中选定若干只放入“昆虫点足机”（the Insect Feet Counter, IFC）中，“点足机”会自动统计出其内所有昆虫足数之和。Charles 会将这个和数 $\\bmod$ $2$ 的结果反馈给你，同时告诉你一开始放入机器中的是哪几只虫子。\n\n他的这种统计操作总共进行 $M$ 次，而你应当尽早得出鉴定结果。\n\n![](https://cdn.luogu.com.cn/upload/pic/1593.png)\n\n假如在第 $K$ 次统计结束后，现有数据就足以确定每只虫子的身份，你就还应将这个 $K$ 反馈给 Charles，此时若 $K<M$，则表明那后 $M-K$ 次统计并非必须的。\n\n如果根据所有 $M$ 次统计数据还是无法确定每只虫子身份，你也要跟 Charles 讲明：就目前数据会存在多个解。", "inputFormat": "第一行是两个正整数 $N,M$。\n\n接下来 $M$ 行，按顺序给出 Charles 这 $M$ 次使用“点足机”的统计结果。每行包含一个 $01$ 串和一个数字，用一个空格隔开。$01$ 串按位依次表示每只虫子是否被放入机器：如果第 $i$ 个字符是 $0$ 则代表编号为 $i$ 的虫子未被放入，$1$ 则代表已被放入。后面跟的数字是统计的昆虫足数 $\\bmod$ $2$ 的结果。\n\n由于 NASA 的实验机器精确无误，保证前后数据不会自相矛盾。即给定数据一定有解。", "outputFormat": "在给定数据存在唯一解时有 $N+1$ 行，第一行输出一个不超过 $M$ 的正整数 $K$，表明在第 $K$ 次统计结束后就可以确定唯一解；接下来N行依次回答每只千足虫的身份，若是奇数条足则输出 `?y7M#`（火星文），偶数条足输出 `Earth`。\n\n如果输入数据存在多解，输出 `Cannot Determine`。", "hint": "### 评分标准\n\n对于每一个测试点，如果你的输出文件与答案文件完全相同，该测试点得满分。\n\n否则，对于存在唯一解的测试点，如果你正确回答所有千足虫的身份，将得到 $50\\%$ 的分数；\n\n其他情况，该测试点得零分。\n\n### 数据规模和约定\n\n对于 $20\\%$ 的数据，满足 $N=M\\leq 20$；\n\n对于 $40\\%$ 的数据，满足 $N=M\\leq 500$；\n\n对于 $70\\%$ 的数据，满足 $N\\leq500$，$M\\leq 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 10^3$，$1\\leq M\\leq 2\\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Alien Millipedes", "background": "", "description": "On February 3, $2333$, after a long journey of $17$ years and $3$ months, the re-entry capsule of the manned rocket “Genagelu-1” finally landed safely. Developed and launched by NASA, this rocket traveled past $23$ bodies in the Solar System, including Mars, Venus, Titan, Europa, Ceres, and “Zhangheng Star,” and eventually discovered extraterrestrial life on the asteroid “Jason Star.” Astronauts found a batch of precious living samples $45.70$ meters below the surface rock layer of “Jason Star” and brought them back for testing.\n\nAmong the living samples, the most fascinating are these alien millipedes. Their bodies are long and divided into segments. When touched, they curl into a ring and take a while before resuming activity.\n\nThere is more. Researchers found that, unlike terrestrial millipedes whose legs appear in pairs with a total even number, these aliens have a variable number of legs under each body segment, but the total number of legs is always odd.\n\nAlthough they are hard to distinguish by appearance, by counting the number of legs, scientists can determine a millipede’s home planet based on parity.\n\nAs a secret agent sent by country J to NASA, you want to join the research to gather more intelligence. However, NASA’s selected researchers are all top scientists. So Charles Bolden, the NASA Administrator, set a challenge to test your ability:\n\nThere are $N$ millipedes numbered $1 \\ldots N$ in front of you. Your task is to determine the home planet of each millipede, but you are not allowed to count their legs directly.\n\nEach time, Charles will select some of the $N$ millipedes and put them into the Insect Feet Counter (IFC). The counter automatically sums the total number of legs inside. Charles will give you the result modulo $2$, and also tell you which millipedes were put into the machine.\n\nHe will perform this operation $M$ times, and you should reach the conclusion as early as possible.\n\nIf, after the $K$-th measurement, the existing data are already sufficient to uniquely determine each millipede’s identity, you should report this $K$ to Charles. If $K<M$, it means the remaining $M-K$ measurements are unnecessary.\n\nIf even after all $M$ measurements the identities cannot be uniquely determined, you must also tell Charles that there are multiple solutions given the current data.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThe next $M$ lines give, in order, the $M$ results from Charles’s use of the counter. Each line contains a $01$ string and a number, separated by a space. The $01$ string indicates, by position, whether each millipede is put into the machine: if the $i$-th character is $0$, millipede $i$ is not put in; if it is $1$, it is put in. The following number is the total number of legs modulo $2$.\n\nSince NASA’s experimental machines are perfectly accurate, the data are guaranteed to be consistent. That is, there is at least one solution.", "outputFormat": "If the given data yield a unique solution, output $N+1$ lines. The first line outputs a positive integer $K$ not exceeding $M$, indicating that after the $K$-th measurement the unique solution is determined. The next $N$ lines output the identity of each millipede in order: output `?y7M#` for an odd number of legs, and `Earth` for an even number of legs.\n\nIf the input data admit multiple solutions, output `Cannot Determine`.", "hint": "Scoring\n\n- For each test point, if your output file exactly matches the answer file, you get full credit for that point.\n- Otherwise, if the solution is unique and you correctly output the identities of all millipedes, you get $50\\%$ of the points for that test point.\n- In all other cases, you get zero for that test point.\n\nConstraints and Conventions\n\n- For $20\\%$ of the test points, $N=M\\leq 20$.\n- For $40\\%$ of the test points, $N=M\\leq 500$.\n- For $70\\%$ of the test points, $N\\leq 500$, $M\\leq 10^3$.\n- For $100\\%$ of the test points, $1\\leq N\\leq 10^3$, $1\\leq M\\leq 2\\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 外星千足虫", "background": "", "description": "公元 $2333$ 年 $2$ 月 $3$ 日，在经历了 $17$ 年零 $3$ 个月的漫长旅行后，“格纳格鲁一号”载人火箭返回舱终于安全着陆。此枚火箭由美国国家航空航天局（NASA）研制发射，行经火星、金星、土卫六、木卫二、谷神星、“张衡星”等 $23$ 颗太阳系星球，并最终在小行星“杰森星”探寻到了地外生命。宇航员在“杰森星”地表岩层下 $45.70$ 米位置发现一批珍贵的活体生命样本，并将其带回检测。\n\n在带回的活体样本中，最吸引人的当属这些来自外星的千足虫了。这些虫子身躯纤长，身体分为若干节。受到触碰时，会将身体卷曲成圆环形，间隔一段时间后才会复原活动。\n\n有趣的还不止如此。研究人员发现，这些虫子的足并不像地球千足虫成对出现、总共偶数条——它们每节身体下方都有着不定数量的足，但足的总数一定是奇数条！\n\n虽然从外观难以区分二者，但通过统计足的数目，科学家们就能根据奇偶性判断出千足虫所属的星球。\n\n![](https://cdn.luogu.com.cn/upload/pic/1592.png)\n\n作为 J 国派去 NASA 的秘密间谍，你希望参加这次研究活动以掌握进一步的情报，而 NASA 选拔的研究人员都是最优秀的科学家。于是 NASA 局长 Charles Bolden 出了一道难题来检测你的实力：\n\n现在你面前摆有 $1\\ldots N$ 编号的 $N$ 只千足虫，你的任务是鉴定每只虫子所属的星球，但不允许亲自去数它们的足。\n\nCharles 每次会在这 $N$ 只千足虫中选定若干只放入“昆虫点足机”（the Insect Feet Counter, IFC）中，“点足机”会自动统计出其内所有昆虫足数之和。Charles 会将这个和数 $\\bmod$ $2$ 的结果反馈给你，同时告诉你一开始放入机器中的是哪几只虫子。\n\n他的这种统计操作总共进行 $M$ 次，而你应当尽早得出鉴定结果。\n\n![](https://cdn.luogu.com.cn/upload/pic/1593.png)\n\n假如在第 $K$ 次统计结束后，现有数据就足以确定每只虫子的身份，你就还应将这个 $K$ 反馈给 Charles，此时若 $K<M$，则表明那后 $M-K$ 次统计并非必须的。\n\n如果根据所有 $M$ 次统计数据还是无法确定每只虫子身份，你也要跟 Charles 讲明：就目前数据会存在多个解。", "inputFormat": "第一行是两个正整数 $N,M$。\n\n接下来 $M$ 行，按顺序给出 Charles 这 $M$ 次使用“点足机”的统计结果。每行包含一个 $01$ 串和一个数字，用一个空格隔开。$01$ 串按位依次表示每只虫子是否被放入机器：如果第 $i$ 个字符是 $0$ 则代表编号为 $i$ 的虫子未被放入，$1$ 则代表已被放入。后面跟的数字是统计的昆虫足数 $\\bmod$ $2$ 的结果。\n\n由于 NASA 的实验机器精确无误，保证前后数据不会自相矛盾。即给定数据一定有解。", "outputFormat": "在给定数据存在唯一解时有 $N+1$ 行，第一行输出一个不超过 $M$ 的正整数 $K$，表明在第 $K$ 次统计结束后就可以确定唯一解；接下来N行依次回答每只千足虫的身份，若是奇数条足则输出 `?y7M#`（火星文），偶数条足输出 `Earth`。\n\n如果输入数据存在多解，输出 `Cannot Determine`。", "hint": "### 评分标准\n\n对于每一个测试点，如果你的输出文件与答案文件完全相同，该测试点得满分。\n\n否则，对于存在唯一解的测试点，如果你正确回答所有千足虫的身份，将得到 $50\\%$ 的分数；\n\n其他情况，该测试点得零分。\n\n### 数据规模和约定\n\n对于 $20\\%$ 的数据，满足 $N=M\\leq 20$；\n\n对于 $40\\%$ 的数据，满足 $N=M\\leq 500$；\n\n对于 $70\\%$ 的数据，满足 $N\\leq500$，$M\\leq 10^3$；\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 10^3$，$1\\leq M\\leq 2\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2448", "type": "P", "difficulty": 5, "samples": [["2\n4 2\n1 4", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "树状数组", "离散化", "洛谷原创", "洛谷月赛"], "title": "无尽的生命", "background": "", "description": "逝者如斯夫，不舍昼夜！\n\n叶良辰认为，他的寿命是无限长的，而且每天都会进步。\n\n叶良辰的生命的第一天，他有 $1$ 点能力值。第二天，有 $2$ 点。第 $n$ 天，就有 $n$ 点。也就是 $S_i=i$。\n\n但是调皮的小A使用时光机，告诉他第 $x$ 天和第 $y$ 天，就可以任意交换某两天的能力值。即 $S_x\\leftrightarrow S_y$。\n\n小A玩啊玩，终于玩腻了。\n\n叶良辰：小A你给我等着，我有 $100$ 种办法让你生不如死。除非能在 $1$ 秒钟之内告知有多少对“异常对”。也就是说，最后的能力值序列，有多少对的两天 $x,y$，其中 $x<y$，但是能力值 $S_x>S_y$？\n\n小A：我好怕怕啊。\n\n于是找到了你。\n", "inputFormat": "第一行一个整数 $k$，表示小A玩了多少次时光机\n\n接下来 $k$ 行，$x_i,y_i$，表示将 $S_{x_i}$ 与 $S_{y_i}$ 进行交换。\n", "outputFormat": "输出共一行，表示有多少“异常对”。", "hint": "样例说明\n\n- 最开始是 $1,2,3,4,5,6\\cdots$\n- 然后是 $1,4,3,2,5,6\\cdots$\n- 然后是 $2,4,3,1,5,6\\cdots$\n\n符合的对是 $(1,4),(2,3),(2,4),(3,4)$。\n\n\n- 对于 $30\\%$  的数据，$x_i,y_i\\le 2\\times 10^3$；\n- 对于 $70\\%$  的数据，$x_i,y_i\\le 10^5$；\n- 对于 $100\\%$ 的数据，$x_i.y_i\\le 2^{31}-1$，$k\\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Endless Life", "background": "", "description": "Time flows on like this, never stopping day or night!\n\nYe Liangchen (叶良辰) believes his lifespan is infinite, and he improves every day.\n\nOn the first day of Ye Liangchen’s life, he has $1$ point of ability. On the second day, he has $2$ points. On day $n$, he has $n$ points. That is, $S_i = i$.\n\nHowever, the mischievous Xiao A (小 A) uses a time machine and tells him that on day $x$ and day $y$, he can arbitrarily swap the ability values of any two days, i.e., $S_x \\leftrightarrow S_y$.\n\nXiao A plays and plays, and finally gets bored.\n\nYe Liangchen: Xiao A, just you wait. I have $100$ ways to make you wish you were dead. Unless you can tell me within $1$ second how many pairs are “abnormal pairs.” That is, in the final ability sequence, how many pairs of days $x, y$ with $x < y$ satisfy $S_x > S_y$?\n\nXiao A: I’m so scared.\n\nSo he comes to you.", "inputFormat": "The first line contains an integer $k$, indicating how many times Xiao A used the time machine.\n\nThe next $k$ lines each contain $x_i, y_i$, meaning $S_{x_i}$ and $S_{y_i}$ are swapped.", "outputFormat": "Output a single line: the number of “abnormal pairs.”", "hint": "Sample explanation\n\n- Initially it is $1,2,3,4,5,6\\cdots$.\n- Then it becomes $1,4,3,2,5,6\\cdots$.\n- Then it becomes $2,4,3,1,5,6\\cdots$.\n\nThe matching pairs are $(1,4)$, $(2,3)$, $(2,4)$, $(3,4)$.\n\nConstraints\n\n- For $30\\%$ of the testdata, $x_i, y_i \\le 2 \\times 10^3$.\n- For $70\\%$ of the testdata, $x_i, y_i \\le 10^5$.\n- For $100\\%$ of the testdata, $x_i, y_i \\le 2^{31} - 1$, $k \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无尽的生命", "background": "", "description": "逝者如斯夫，不舍昼夜！\n\n叶良辰认为，他的寿命是无限长的，而且每天都会进步。\n\n叶良辰的生命的第一天，他有 $1$ 点能力值。第二天，有 $2$ 点。第 $n$ 天，就有 $n$ 点。也就是 $S_i=i$。\n\n但是调皮的小A使用时光机，告诉他第 $x$ 天和第 $y$ 天，就可以任意交换某两天的能力值。即 $S_x\\leftrightarrow S_y$。\n\n小A玩啊玩，终于玩腻了。\n\n叶良辰：小A你给我等着，我有 $100$ 种办法让你生不如死。除非能在 $1$ 秒钟之内告知有多少对“异常对”。也就是说，最后的能力值序列，有多少对的两天 $x,y$，其中 $x<y$，但是能力值 $S_x>S_y$？\n\n小A：我好怕怕啊。\n\n于是找到了你。\n", "inputFormat": "第一行一个整数 $k$，表示小A玩了多少次时光机\n\n接下来 $k$ 行，$x_i,y_i$，表示将 $S_{x_i}$ 与 $S_{y_i}$ 进行交换。\n", "outputFormat": "输出共一行，表示有多少“异常对”。", "hint": "样例说明\n\n- 最开始是 $1,2,3,4,5,6\\cdots$\n- 然后是 $1,4,3,2,5,6\\cdots$\n- 然后是 $2,4,3,1,5,6\\cdots$\n\n符合的对是 $(1,4),(2,3),(2,4),(3,4)$。\n\n\n- 对于 $30\\%$  的数据，$x_i,y_i\\le 2\\times 10^3$；\n- 对于 $70\\%$  的数据，$x_i,y_i\\le 10^5$；\n- 对于 $100\\%$ 的数据，$x_i.y_i\\le 2^{31}-1$，$k\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2449", "type": "P", "difficulty": 3, "samples": [["9\r\n0 3 2 6\r\n4 5 5 7\r\n4 2 6 4\r\n2 0 3 2\r\n5 3 6 4\r\n3 2 5 3\r\n1 4 4 7\r\n0 0 1 4\r\n0 0 4 1\r\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "并查集", "各省省选", "山东"], "title": "[SDOI2005] 矩形", "background": null, "description": "现在我们在一个平面上画了 $n$ 个矩形。每一个矩形的两边都与坐标轴相平行，且矩形定点的坐标均为整数。现我们定义满足如下性质的图形为一个块：\n\n1. 每一个矩形都是一个块；\n\n2. 如果两个块有一段公共的部分，那么这两个块就会形成一个新的块，否则这两个块就是不同的。\n\n示例：\n\n图 $1$ 中的矩形形成了两个不同的块。图 $2$ 中的矩形形成了一个块。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1579.png) \n\n任务：\n\n请写一个程序：\n\n1. 从文本文件 `PRO.IN` 中读入各个矩形的顶点坐标；\n\n2. 找出这些矩形中不同的块的数目；\n\n3. 把结果输出到文本文件 `PRO.OUT` 中。", "inputFormat": "输入的第一行包括一个整数 $n$，$1\\le n\\le 7000$ 为矩形的数目。以下的 $n$ 行为矩形顶点的坐标。每一个矩形都是用四个整数来描述的：左下角的 $x$ 坐标、左下角的 $y$ 坐标、右上角的 $x$ 坐标和右上角的 $y$ 坐标。所有的坐标都是不大于 $10000$ 的非负整数。", "outputFormat": "输出唯一的一个整数——这些矩形所形成的不同的块的数目。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mifmaeko.png)\n\n[图片链接](https://www.desmos.com/calculator/1g1ohcqqex)\n\n橙色加粗的线段表示这里有重合的部分，每一个方形中间的数字表示所属的块的编号。\n\n注意：角重合不算同一个块。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Rectangles", "background": "", "description": "We have drawn $n$ rectangles on a plane. Each rectangle has its sides parallel to the coordinate axes, and all vertex coordinates are integers. We define a shape that satisfies the following properties to be a block:\n\n1. Each rectangle is a block.\n\n2. If two blocks have a segment of overlap, then these two blocks form a new block; otherwise, the two blocks are different.\n\nExample:\n\nIn Figure $1$, the rectangles form two different blocks. In Figure $2$, the rectangles form one block.\n\n ![](https://cdn.luogu.com.cn/upload/pic/1579.png) \n\nTask:\n\nPlease write a program to:\n\n1. Read the vertex coordinates of each rectangle from standard input.\n2. Find the number of different blocks among these rectangles.\n3. Output the result to standard output.", "inputFormat": "The first line contains an integer $n$, where $1\\le n\\le 7000$, the number of rectangles. Each of the next $n$ lines gives the vertex coordinates of a rectangle. Each rectangle is described by four integers: the $x$-coordinate of the lower-left corner, the $y$-coordinate of the lower-left corner, the $x$-coordinate of the upper-right corner, and the $y$-coordinate of the upper-right corner. All coordinates are non-negative integers not greater than $10000$.", "outputFormat": "Output a single integer — the number of different blocks formed by these rectangles.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mifmaeko.png)\n\n[Image link](https://www.desmos.com/calculator/1g1ohcqqex)\n\nThe thick orange segments indicate where overlaps occur. The number in the center of each square denotes the ID of the block it belongs to.\n\nNote: Corner touching does not count as the same block.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 矩形", "background": null, "description": "现在我们在一个平面上画了 $n$ 个矩形。每一个矩形的两边都与坐标轴相平行，且矩形定点的坐标均为整数。现我们定义满足如下性质的图形为一个块：\n\n1. 每一个矩形都是一个块；\n\n2. 如果两个块有一段公共的部分，那么这两个块就会形成一个新的块，否则这两个块就是不同的。\n\n示例：\n\n图 $1$ 中的矩形形成了两个不同的块。图 $2$ 中的矩形形成了一个块。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1579.png) \n\n任务：\n\n请写一个程序：\n\n1. 从文本文件 `PRO.IN` 中读入各个矩形的顶点坐标；\n\n2. 找出这些矩形中不同的块的数目；\n\n3. 把结果输出到文本文件 `PRO.OUT` 中。", "inputFormat": "输入的第一行包括一个整数 $n$，$1\\le n\\le 7000$ 为矩形的数目。以下的 $n$ 行为矩形顶点的坐标。每一个矩形都是用四个整数来描述的：左下角的 $x$ 坐标、左下角的 $y$ 坐标、右上角的 $x$ 坐标和右上角的 $y$ 坐标。所有的坐标都是不大于 $10000$ 的非负整数。", "outputFormat": "输出唯一的一个整数——这些矩形所形成的不同的块的数目。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/mifmaeko.png)\n\n[图片链接](https://www.desmos.com/calculator/1g1ohcqqex)\n\n橙色加粗的线段表示这里有重合的部分，每一个方形中间的数字表示所属的块的编号。\n\n注意：角重合不算同一个块。", "locale": "zh-CN"}}}
{"pid": "P2450", "type": "P", "difficulty": 0, "samples": [["-10 10 -10 10\r\n7\r\n-4 -6\r\n-4 0\r\n0 0\r\n-2 4\r\n6 5\r\n4 2\r\n8 0\r\n", "1 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 投递的艺术", "background": "", "description": "YZ住宅小区的未来规划采用了一种新方案：小区由白色的木栅栏围成，栅栏的形状将被设计为一个任意多边形，而每户的住宅就位于多边形的顶点处，多边形的内部则将建成一个优雅怡人的小区公园。\n\n这个方案却给负责小区送报任务的投递员带来了一些麻烦，因为他希望坚持自己的送报习惯：他喜欢骑在自己的自行车上沿着一个标准的圆形路线投送报纸，每当看到自己的右手方向有一户住宅时，他就会将报纸投过去，而且最令他骄傲的是，无论距离远近，他投出的报纸总是准确地落在住户的门前。他的这种极具艺术感的服务方式也正是住户们最感欣赏的地方。\n\n但遗憾的是，他分辨不出每户住宅之间的区别，也记不住每家订了哪些报纸，邮局按照住宅在多边形上的次序把每户的报纸交给他，他就按照这种次序把每户的报纸投送出去。所以图一中的方案是不成立的，因为住户3拿到的总是住户2的报纸，而住户2拿到的报纸却是住户3的。图二中画出了两种可行的方案。\n\n你的任务就是找出所有满足上述要求的投递路线的圆心（这些圆心的坐标应当是整数）。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1580.png) \n\n![](https://cdn.luogu.com.cn/upload/pic/1581.png)\n", "inputFormat": "输入文件名为Polygon.in。文件第1行是4个整数Xmin、Xmax、Ymin、Ymax，表示圆心坐标的范围，第2行是一个正整数n(n100)，表示多边形的顶点数，从第3行至第n+2行是每个顶点的坐标(x,y)，所有坐标值均为整数，坐标的绝对值不大于1000，顶点按顺时针排序。\n", "outputFormat": "输出文件名为Polygon.out。文件中共m行（m为你求出的圆心的个数），每行两个整数(x,y)，表示圆心的坐标，坐标应按y递增的次序输出，如果y相等的，应按x递增的次序。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1582.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] The Art of Delivery", "background": "", "description": "The future plan of the YZ residential community adopts a new scheme: the community will be enclosed by a white wooden fence whose shape is designed as an arbitrary polygon. Each household is located at a vertex of the polygon, while the interior of the polygon will be built into an elegant and pleasant community park.\n\nThis plan, however, causes some trouble for the deliveryman responsible for delivering newspapers to the community, because he insists on his delivery habit: he likes to ride his bicycle along a perfect circular route to deliver newspapers. Whenever he sees a household on his right-hand side, he throws a newspaper to it, and what makes him proud is that, regardless of distance, his throw always lands exactly at the household’s doorstep. This artistic service is precisely what the residents appreciate most.\n\nUnfortunately, he cannot tell households apart and cannot remember which newspapers each family subscribes to. The post office hands him the newspapers in the order of the residences along the polygon, and he delivers them in that same order. Therefore, the plan in Figure 1 is invalid, because resident 3 always receives resident 2’s newspaper, while resident 2 receives resident 3’s newspaper. Figure 2 shows two feasible plans.\n\nYour task is to find all centers of circular routes that satisfy the above requirements (these centers must have integer coordinates).\n\n ![](https://cdn.luogu.com.cn/upload/pic/1580.png) \n\n![](https://cdn.luogu.com.cn/upload/pic/1581.png)", "inputFormat": "- The first line contains four integers Xmin, Xmax, Ymin, Ymax, specifying the search range for the circle center coordinates.\n- The second line contains a positive integer $n$ ($n \\le 100$), the number of vertices of the polygon.\n- The next $n$ lines (lines 3 to $n+2$) each contain two integers $x$ and $y$, the coordinates of a vertex. All coordinates are integers with absolute value at most $1000$. The vertices are given in clockwise order.", "outputFormat": "Output $m$ lines, where $m$ is the number of centers you find. Each line contains two integers $x$ and $y$, representing a circle center. The centers must be output in order of increasing $y$; if $y$ is the same, order by increasing $x$.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1582.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 投递的艺术", "background": "", "description": "YZ住宅小区的未来规划采用了一种新方案：小区由白色的木栅栏围成，栅栏的形状将被设计为一个任意多边形，而每户的住宅就位于多边形的顶点处，多边形的内部则将建成一个优雅怡人的小区公园。\n\n这个方案却给负责小区送报任务的投递员带来了一些麻烦，因为他希望坚持自己的送报习惯：他喜欢骑在自己的自行车上沿着一个标准的圆形路线投送报纸，每当看到自己的右手方向有一户住宅时，他就会将报纸投过去，而且最令他骄傲的是，无论距离远近，他投出的报纸总是准确地落在住户的门前。他的这种极具艺术感的服务方式也正是住户们最感欣赏的地方。\n\n但遗憾的是，他分辨不出每户住宅之间的区别，也记不住每家订了哪些报纸，邮局按照住宅在多边形上的次序把每户的报纸交给他，他就按照这种次序把每户的报纸投送出去。所以图一中的方案是不成立的，因为住户3拿到的总是住户2的报纸，而住户2拿到的报纸却是住户3的。图二中画出了两种可行的方案。\n\n你的任务就是找出所有满足上述要求的投递路线的圆心（这些圆心的坐标应当是整数）。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1580.png) \n\n![](https://cdn.luogu.com.cn/upload/pic/1581.png)\n", "inputFormat": "输入文件名为Polygon.in。文件第1行是4个整数Xmin、Xmax、Ymin、Ymax，表示圆心坐标的范围，第2行是一个正整数n(n100)，表示多边形的顶点数，从第3行至第n+2行是每个顶点的坐标(x,y)，所有坐标值均为整数，坐标的绝对值不大于1000，顶点按顺时针排序。\n", "outputFormat": "输出文件名为Polygon.out。文件中共m行（m为你求出的圆心的个数），每行两个整数(x,y)，表示圆心的坐标，坐标应按y递增的次序输出，如果y相等的，应按x递增的次序。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1582.png)\n", "locale": "zh-CN"}}}
{"pid": "P2451", "type": "P", "difficulty": 5, "samples": [["12\r\n2 3\r\n3 9\r\n9 6\r\n8 5\r\n5 7\r\n7 6\r\n4 5\r\n5 1\r\n1 4\r\n4 2\r\n2 8\r\n8 6\r\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 遗传代码", "background": "", "description": "抽象的 primitivus（Primitivus 循环）的遗传代码是一系列自然数 $K=(A_1,A_2,\\cdots,A_n)$。我们所说的 primitivus 的特征是一个数对 $(l,r)$，表示 $l,r$ 在 $A$ 中**连续出现**。即存在一个 $i$，使得 $A_i=l$，$A_{i+1}=r$。在 primitivus 的遗传代码中没有 $(p,p)$ 特征。\n\n### 任务\n\n写一个程序：\n\n1. 从文本文件读特征列表；\n2. 计算所给特征的最短遗传代码长度；\n3. 输出答案。\n", "inputFormat": "第一行有一个正整数 $n$，它是 primitivus 的不同特征的数量。\n\n接下来 $n$ 行，每一行中有两个被空格号隔开的数字 $l$ 和 $r$。数字对 $(l,r)$ 是 primitivus 的一个特征。在输入文件中，特征并不重复。\n", "outputFormat": "共一行一个整数，为 primitivus 最短遗传代码的长度。\n", "hint": "### 样例解释\n\n以下是一种符合题意的最短的遗传代码。它符合输入数据中给出的所有的特征：\n\n$(8, 5, 1, 4, 2, 3, 9, 6, 4, 5, 7, 6, 2, 8, 6) $\n\n### 数据范围及约定\n\n对于全部数据，满足 $0 \\le l \\le 1000$，$0 \\le  r \\le  1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Genetic Code", "background": "", "description": "The abstract genetic code of a primitivus (Primitivus loop) is a sequence of natural numbers $K=(A_1,A_2,\\cdots,A_n)$. A feature of a primitivus is an ordered pair $(l,r)$, meaning that $l, r$ **appear consecutively** in $A$. That is, there exists an $i$ such that $A_i=l$, $A_{i+1}=r$. In the genetic code of a primitivus, there is no $(p,p)$ feature.\n\nTask\n\nWrite a program to:\n1. Read the list of features from a text file.\n2. Compute the length of the shortest genetic code that contains all the given features.\n3. Output the answer.", "inputFormat": "The first line contains a positive integer $n$, which is the number of distinct features of the primitivus.\n\nThen follow $n$ lines. Each line contains two numbers $l$ and $r$ separated by a space. The pair $(l,r)$ is a feature of the primitivus. In the input file, features do not repeat.", "outputFormat": "Output a single line containing one integer, which is the length of the shortest genetic code of the primitivus.", "hint": "Sample Explanation\n\nOne shortest genetic code that satisfies all the features given in the input is:\n$(8, 5, 1, 4, 2, 3, 9, 6, 4, 5, 7, 6, 2, 8, 6)$.\n\nConstraints\n\nFor all data, $0 \\le l \\le 1000$, $0 \\le  r \\le  1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 遗传代码", "background": "", "description": "抽象的 primitivus（Primitivus 循环）的遗传代码是一系列自然数 $K=(A_1,A_2,\\cdots,A_n)$。我们所说的 primitivus 的特征是一个数对 $(l,r)$，表示 $l,r$ 在 $A$ 中**连续出现**。即存在一个 $i$，使得 $A_i=l$，$A_{i+1}=r$。在 primitivus 的遗传代码中没有 $(p,p)$ 特征。\n\n### 任务\n\n写一个程序：\n\n1. 从文本文件读特征列表；\n2. 计算所给特征的最短遗传代码长度；\n3. 输出答案。\n", "inputFormat": "第一行有一个正整数 $n$，它是 primitivus 的不同特征的数量。\n\n接下来 $n$ 行，每一行中有两个被空格号隔开的数字 $l$ 和 $r$。数字对 $(l,r)$ 是 primitivus 的一个特征。在输入文件中，特征并不重复。\n", "outputFormat": "共一行一个整数，为 primitivus 最短遗传代码的长度。\n", "hint": "### 样例解释\n\n以下是一种符合题意的最短的遗传代码。它符合输入数据中给出的所有的特征：\n\n$(8, 5, 1, 4, 2, 3, 9, 6, 4, 5, 7, 6, 2, 8, 6) $\n\n### 数据范围及约定\n\n对于全部数据，满足 $0 \\le l \\le 1000$，$0 \\le  r \\le  1000$。", "locale": "zh-CN"}}}
{"pid": "P2452", "type": "P", "difficulty": 7, "samples": [["0 0 10 30 40\r\n1\r\n10 10 10\r\n", "57.93"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "各省省选", "山东"], "title": "[SDOI2005] 屠龙传说-屠龙枪卷", "background": "", "description": "先知看到修玛取回的药草，满意地点了点头。\n\n他对修玛说：“跟我来”。\n\n修玛顺从地跟着先知走到了他的房间里。先知的房间很大，四周满是书架，整整齐齐地摆放着一排排书籍。房间中间的圆桌上摆放着一个巨大的水晶球，它发出的荧光照亮了整个房间。\n\n先知走到一排书架前，从中抽出一本薄薄的书来。这本书看起来十分古老，纸张都变成了黄色，有的地方已经发黑。修玛想，这本书的历史大概有好几百年了吧。\n\n先知示意修玛坐下，他翻开手中的书，对修玛说道：“我已经研究这本书很久了。它是用一种古老的文字写成的，记载了一个十分古老的传说。书中提到，普通的武器是无法伤害巨龙的，只有诸神合力锻造的屠龙枪才能消灭它。为了防止屠龙枪被滥用，神把它封印在卡基思山上，只有拥有超人的勇气、力量和智慧的人才能解开这个封印。千百年来，很多人都想得到屠龙枪的力量，然而从没有人成功过。我查阅了所有有关屠龙枪的记载，悉心地研究那些资料，得知屠龙枪被封印在山顶的神殿中，而要解开这道封印，就必须把神殿中的一块巨大的圆石推到神殿祭坛的中心，然后念出解开封印的咒语。”\n\n修玛问道：“那句咒语应该已经失传了吧？”“不，恰恰相反。”先知说，“这句咒语一直记载在这本书中，并被完好地保存下来。”“那么，剩下的只是把圆石推到祭坛的中心了。”修玛自信地笑了。然而先知却摇了摇头，“不，修玛，事情没有你想象的那么简单。爬上卡基思山就不是一件容易的事。它高耸入云，四周都是光秃秃的石壁，几乎没有落脚的地方。只有真正的勇士才能爬得上去。那块圆石也不是那么容易就能推动的，非得有超常的力量不可。这些东西，修玛你都有。但如果仅仅只有这些，那么屠龙枪早已被人拿到手了。书中不是说了么，要有勇气、力量和智慧。智慧才是真正的关键。如果在固定时间内不能把那块圆石推到祭坛的中心，那么圆石便会自动滚回原处，同时推石的人将永远无法再次推动这块圆石。而且不管你用多大力气推，这块圆石都不可能滚动得像你希望的那样快，我估计只有按照最短路线去推这块圆石，才能在固定时间内把它推到祭坛中心。神殿中又有着大大小小的石柱，有些石柱与石柱之间的空隙很小，根本就推不过去。正因为这种种困难，才没有人能够从神殿中取走屠龙枪。”\n\n修玛沉默了一会儿，说：“不管如何，我也要去试一试。如果我不能拿到屠龙枪，就没有人能够拿到它了。”\n\n先知点了点头，说：“去吧，修玛。记住，用你的智慧。”\n\n修玛骑马奔驰了十天十夜，终于来到了卡基思山脚下。正如先知所说的那样，这座山根本就没有路可以上去，甚至找不到可以落脚的地方。然而修玛凭着他的勇气以及熟练的技巧，爬上了山顶。\n\n当他走进神殿，一眼就看到了那块巨大的圆石。修玛该怎么做，才能把圆石推到祭坛的中心呢？\n\n### 任务\n\n你的任务是计算出把圆石推到祭坛中心的最短路线长度。\n\n所谓推到祭坛中心是指圆石的中心与祭坛中心重合。\n\n圆石中心的初始位置以及祭坛中心的位置是已知的。圆石半径为 $R$，它可以朝着任意方向滚动。洞中所有石柱均为正四棱柱，大小不一。\n\n在推动圆石的过程中，要求圆石中心与所有石柱的距离均不小于 $R$，否则圆石将被石柱阻挡而不能继续滚动。", "inputFormat": "第一行包含了五个实数，依次表示圆石中心的初始位置的 $x$ 坐标、$y$ 坐标、圆石半径 $R$、祭坛中心的位置 $(x,y)$。\n\n第二行包含一个整数 $n$，表示神殿中石柱的数目。\n\n接下来 $n$ 行，每行包含三个实数 $(x_i,y_i,r_i)$，给出了一根石柱的信息，依次表示第 $i$ 根石柱左下角 $x$ 坐标、$y$ 坐标以及该石柱的边长。\n\n数据输入所有实数均精确到 $2$ 位小数，范围在 $0$ 到 $1000$ 之内。\n", "outputFormat": "输出仅包含一个实数，表示把圆石推到祭坛中心的最短路线长度，输出结果保留到两位小数。\n\n若不存在一条把圆石推到祭坛中心的路，输出 `0.00`。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $0\\le n\\le 20$。\n\n---\n\n修玛思索良久，果断地走到圆石旁边，用力推动这块巨石。圆石在修玛的推动下，缓缓地滚动起来。修玛时不时地调整着推动的角度，以使巨石朝着自己希望的方向滚动。终于，“卡嗒”的一声，圆石安安稳稳地滚到了祭坛的中心。一束光从神殿顶上直射而下，笼罩了整个祭坛。修玛对着祭坛，大声地念出了解开封印的咒语。顿时，祭坛开始颤动，中间的圆石也随着摇摆不定。突然间，整块圆石完全爆裂开来，在祭坛的中心，出现了一柄长枪。枪身上闪烁着神圣的光芒，令人惊羡不已。修玛走上前去，拔起了这柄枪。他感到一股强大的力量从手上传了过来。修玛随手把枪一挥，只听得“哗啦”一声，一根巨大的石柱应声四分五裂了。修玛又惊又喜，他知道这一定就是屠龙枪。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2005] Dragon-Slaying Legend - Dragon-Slaying Spear Scroll", "background": "", "description": "The seer saw the herbs Xiuma had retrieved and nodded with satisfaction.\n\nHe said to Xiuma, \"Come with me.\"\n\nXiuma obediently followed the seer into his room. The seer’s room was very large, with bookshelves on all sides, neatly lined with rows of books. In the center of the room, on a round table, stood a huge crystal ball, whose glow illuminated the entire chamber.\n\nThe seer walked to a row of shelves and pulled out a thin book. It looked extremely old; the pages had turned yellow, and some parts were blackened. Xiuma thought, this book must be several hundred years old.\n\nThe seer motioned for Xiuma to sit. He opened the book in his hand and said, \"I have studied this book for a long time. It is written in an ancient script and records a very old legend. The book says that ordinary weapons cannot harm a dragon; only the Dragon-Slaying Spear forged by the gods together can destroy it. To prevent its abuse, the gods sealed the spear on Mount Kakisi. Only those with extraordinary courage, strength, and wisdom can break this seal. For hundreds of years, many tried to obtain the spear’s power, but none succeeded. I checked all records about the spear and carefully studied them. I learned that the spear is sealed in a temple on the mountaintop. To break the seal, one must push a huge round stone in the temple to the center of the altar and then chant the incantation that unlocks the seal.\"\n\nXiuma asked, \"That incantation must have been lost, right?\" \"No, quite the opposite,\" the seer said. \"The incantation has always been recorded in this book and has been preserved intact.\" \"Then all that remains is to push the round stone to the center of the altar,\" Xiuma smiled confidently. But the seer shook his head. \"No, Xiuma, things are not as simple as you think. Climbing Mount Kakisi is not easy. It towers into the clouds, with bare rock walls all around and almost nowhere to set foot. Only a true warrior can climb it. That round stone is not easy to move either; it takes extraordinary strength. These things, Xiuma, you have. But if that were enough, someone would have already taken the spear. The book says one needs courage, strength, and wisdom. Wisdom is the real key. If you cannot push the round stone to the center of the altar within a fixed time, the stone will automatically roll back, and the person who pushed it will never be able to move it again. And no matter how hard you push, the stone cannot roll as fast as you might wish. I estimate that only by following the shortest route can you push the stone to the center within the time limit. The temple is filled with pillars of various sizes. Some gaps between pillars are narrow, and the stone simply cannot be pushed through. Because of all these difficulties, no one has been able to take the Dragon-Slaying Spear from the temple.\"\n\nXiuma fell silent for a moment. \"No matter what, I will try. If I cannot get the spear, then no one will.\"\n\nThe seer nodded. \"Go, Xiuma. Remember, use your wisdom.\"\n\nXiuma rode for ten days and nights and finally reached the foot of Mount Kakisi. Just as the seer had said, there was no path up the mountain, and it was hard to find a foothold. Yet relying on his courage and skill, Xiuma climbed to the summit.\n\nWhen he entered the temple, he immediately saw the huge round stone. What should Xiuma do to push the stone to the center of the altar?\n\n### Task\n\nYour task is to compute the length of the shortest route along which the round stone can be pushed to the center of the altar.\n\nPushing it to the altar’s center means the center of the round stone coincides with the center of the altar.\n\nThe initial position of the stone’s center and the altar’s center are given. The stone has radius $R$ and can roll in any direction. All pillars in the temple are right square prisms of various sizes.\n\nWhile pushing the stone, the distance from the stone’s center to every pillar must be at least $R$; otherwise, the stone will be blocked and cannot continue to roll.", "inputFormat": "The first line contains five real numbers, which are the $x$ and $y$ coordinates of the initial position of the stone’s center, the radius $R$ of the stone, and the coordinates $(x, y)$ of the altar’s center.\n\nThe second line contains an integer $n$, the number of pillars in the temple.\n\nEach of the next $n$ lines contains three real numbers $(x_i, y_i, r_i)$, describing one pillar: the $x$ and $y$ coordinates of the lower-left corner of the $i$-th pillar and the side length of that pillar.\n\nAll real numbers in the input are given with precision to $2$ decimal places and are within $0$ to $1000$ inclusive.", "outputFormat": "Output a single real number, the length of the shortest route needed to push the stone to the center of the altar, rounded to two decimal places.\n\nIf there is no route to push the stone to the altar’s center, output `0.00`.", "hint": "### Constraints and Conventions\n\nFor all testdata, $0 \\le n \\le 20$.\n\n---\n\nXiuma pondered for a long time, then decisively walked to the round stone and pushed hard. Under his effort, the stone slowly rolled forward. From time to time, Xiuma adjusted the pushing direction so the stone would roll as he intended. At last, with a click, the stone settled steadily at the center of the altar. A beam of light shot down from the temple roof and enveloped the entire altar. Xiuma loudly recited the incantation that broke the seal. Instantly, the altar began to tremble, and the round stone in the middle swayed. Suddenly, the entire stone shattered completely. At the center of the altar appeared a spear. The shaft shimmered with a holy light, drawing awe and admiration. Xiuma stepped forward and drew the spear. He felt a surge of great power pass into his hands. With a casual sweep of the spear, there was a loud crash, and a huge stone pillar split into four pieces. Amazed and delighted, Xiuma knew this must be the Dragon-Slaying Spear.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2005] 屠龙传说-屠龙枪卷", "background": "", "description": "先知看到修玛取回的药草，满意地点了点头。\n\n他对修玛说：“跟我来”。\n\n修玛顺从地跟着先知走到了他的房间里。先知的房间很大，四周满是书架，整整齐齐地摆放着一排排书籍。房间中间的圆桌上摆放着一个巨大的水晶球，它发出的荧光照亮了整个房间。\n\n先知走到一排书架前，从中抽出一本薄薄的书来。这本书看起来十分古老，纸张都变成了黄色，有的地方已经发黑。修玛想，这本书的历史大概有好几百年了吧。\n\n先知示意修玛坐下，他翻开手中的书，对修玛说道：“我已经研究这本书很久了。它是用一种古老的文字写成的，记载了一个十分古老的传说。书中提到，普通的武器是无法伤害巨龙的，只有诸神合力锻造的屠龙枪才能消灭它。为了防止屠龙枪被滥用，神把它封印在卡基思山上，只有拥有超人的勇气、力量和智慧的人才能解开这个封印。千百年来，很多人都想得到屠龙枪的力量，然而从没有人成功过。我查阅了所有有关屠龙枪的记载，悉心地研究那些资料，得知屠龙枪被封印在山顶的神殿中，而要解开这道封印，就必须把神殿中的一块巨大的圆石推到神殿祭坛的中心，然后念出解开封印的咒语。”\n\n修玛问道：“那句咒语应该已经失传了吧？”“不，恰恰相反。”先知说，“这句咒语一直记载在这本书中，并被完好地保存下来。”“那么，剩下的只是把圆石推到祭坛的中心了。”修玛自信地笑了。然而先知却摇了摇头，“不，修玛，事情没有你想象的那么简单。爬上卡基思山就不是一件容易的事。它高耸入云，四周都是光秃秃的石壁，几乎没有落脚的地方。只有真正的勇士才能爬得上去。那块圆石也不是那么容易就能推动的，非得有超常的力量不可。这些东西，修玛你都有。但如果仅仅只有这些，那么屠龙枪早已被人拿到手了。书中不是说了么，要有勇气、力量和智慧。智慧才是真正的关键。如果在固定时间内不能把那块圆石推到祭坛的中心，那么圆石便会自动滚回原处，同时推石的人将永远无法再次推动这块圆石。而且不管你用多大力气推，这块圆石都不可能滚动得像你希望的那样快，我估计只有按照最短路线去推这块圆石，才能在固定时间内把它推到祭坛中心。神殿中又有着大大小小的石柱，有些石柱与石柱之间的空隙很小，根本就推不过去。正因为这种种困难，才没有人能够从神殿中取走屠龙枪。”\n\n修玛沉默了一会儿，说：“不管如何，我也要去试一试。如果我不能拿到屠龙枪，就没有人能够拿到它了。”\n\n先知点了点头，说：“去吧，修玛。记住，用你的智慧。”\n\n修玛骑马奔驰了十天十夜，终于来到了卡基思山脚下。正如先知所说的那样，这座山根本就没有路可以上去，甚至找不到可以落脚的地方。然而修玛凭着他的勇气以及熟练的技巧，爬上了山顶。\n\n当他走进神殿，一眼就看到了那块巨大的圆石。修玛该怎么做，才能把圆石推到祭坛的中心呢？\n\n### 任务\n\n你的任务是计算出把圆石推到祭坛中心的最短路线长度。\n\n所谓推到祭坛中心是指圆石的中心与祭坛中心重合。\n\n圆石中心的初始位置以及祭坛中心的位置是已知的。圆石半径为 $R$，它可以朝着任意方向滚动。洞中所有石柱均为正四棱柱，大小不一。\n\n在推动圆石的过程中，要求圆石中心与所有石柱的距离均不小于 $R$，否则圆石将被石柱阻挡而不能继续滚动。", "inputFormat": "第一行包含了五个实数，依次表示圆石中心的初始位置的 $x$ 坐标、$y$ 坐标、圆石半径 $R$、祭坛中心的位置 $(x,y)$。\n\n第二行包含一个整数 $n$，表示神殿中石柱的数目。\n\n接下来 $n$ 行，每行包含三个实数 $(x_i,y_i,r_i)$，给出了一根石柱的信息，依次表示第 $i$ 根石柱左下角 $x$ 坐标、$y$ 坐标以及该石柱的边长。\n\n数据输入所有实数均精确到 $2$ 位小数，范围在 $0$ 到 $1000$ 之内。\n", "outputFormat": "输出仅包含一个实数，表示把圆石推到祭坛中心的最短路线长度，输出结果保留到两位小数。\n\n若不存在一条把圆石推到祭坛中心的路，输出 `0.00`。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $0\\le n\\le 20$。\n\n---\n\n修玛思索良久，果断地走到圆石旁边，用力推动这块巨石。圆石在修玛的推动下，缓缓地滚动起来。修玛时不时地调整着推动的角度，以使巨石朝着自己希望的方向滚动。终于，“卡嗒”的一声，圆石安安稳稳地滚到了祭坛的中心。一束光从神殿顶上直射而下，笼罩了整个祭坛。修玛对着祭坛，大声地念出了解开封印的咒语。顿时，祭坛开始颤动，中间的圆石也随着摇摆不定。突然间，整块圆石完全爆裂开来，在祭坛的中心，出现了一柄长枪。枪身上闪烁着神圣的光芒，令人惊羡不已。修玛走上前去，拔起了这柄枪。他感到一股强大的力量从手上传了过来。修玛随手把枪一挥，只听得“哗啦”一声，一根巨大的石柱应声四分五裂了。修玛又惊又喜，他知道这一定就是屠龙枪。\n", "locale": "zh-CN"}}}
{"pid": "P2453", "type": "P", "difficulty": 5, "samples": [["algorithm\r\naltruistic\r\n3 6 5 4 4", "48"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2006", "各省省选", "山东"], "title": "[SDOI2006] 最短距离", "background": "", "description": "一种 EDIT 字母编辑器，它的功能是可以通过不同的变换操作可以把一个源串 $X[l\\cdots m]$ 变换为新的目标串 $Y[1\\cdots n]$。EDIT 提供的变换操作有：\n\n- 删除源串首个字符（delete）；\n- 替换源串首个字符放到目标串末尾（replace）。replace 操作可以替换为与原来相同的字符；\n- 移动源串首个字符放到目标串末尾（copy）；\n- 向目标串插入单个字符（insert）；\n- 交换源串中的开头两个字符，并移动到目标串末尾中去（twiddle）；\n- 在完成其它所有操作之后，源串中余下的全部后缀就可用删至行末的操作删除（kill）。\n\n例如，将源 `algorithm` 转换成目标串 `altruistic` 的一种方法是采取下面的操作序列：\n\n| 操作 | 目标串 | 原串 |\n| :----------: | :----------: | :----------: |\n| 初始 | （空） | `algorithm` |\n| `copy a` | `a` | `lgorithm` |\n| `copy l` | `al` | `gorithm` |\n| `replace g to t` | `alt` | `orithm` |\n| `delete o` | `alt` | `rithm` |\n| `copy r` | `altr` | `ithm` |\n| `insert u` | `altru` | `ithm` |\n| `insert i` | `altrui` | `ithm` |\n| `insert s` | `altruis` | `ithm` |\n| `twiddle it into ti` | `altruisti` | `hm` |\n| `replace h to c` | `altruistic` | `m` |\n| `kill` | `altruistic` | （空） |\n\n\n\n要达到这个结果还可能有其它一些操作序列。\n\n操作 delete、replace、copy、insert、twiddle 和kill中每一个都有一个相联系的代价 cost。例如：\n\n```plain\ncost(delete) =3;\ncost(replace)=6;\ncost(copy)   =5;\ncost(insert) =4;\ncost(twiddle)=4;\ncost(kill) = 被删除的串长 * cost(delete) - 1;\n```\n\n一个给定的操作序列的代价为序列中各操作代价之和。\n例如上述操作序列的代价为\n\n$$\\begin{aligned}&3\\times \\mathrm{cost}(\\mathtt{copy})+2\\times \\mathrm{cost}(\\mathtt{replace})+\\mathrm{cost}(\\mathtt{delete})+3\\times \\mathrm{cost}(\\mathtt{insert}) \\\\ &+\\mathrm{cost}(\\mathtt{twiddle}) +\\mathrm{cost}(\\mathtt{kill}) \\\\\n=\\ & 3\\times 5+2\\times 6+3+3\\times 4+4+1\\times 3-1\\\\\n=\\ &48\\end{aligned}$$\n\n**编程任务**\n\n给定两个序列 $X[1\\cdots m],Y[1\\cdots n]$ 和一些操作代价集合，$X$ 到 $Y$ 的最短距离为将 $X$ 转化为 $Y$ 的最小的转换序列的代价。请给出一个算法来找出 $X[1\\cdots m]$ 至 $Y[1\\cdots n]$ 的最短距离。\n", "inputFormat": "第一行：源序列 $X[1\\cdots m]$。\n\n第二行：目标序列 $Y[1\\cdots n]$。\n\n第三行：$5$ 个正整数，分别是：delete、replace、copy、insert、twiddle 的代价。\n", "outputFormat": "一行一个整数，表示 $X$ 到 $Y$ 的最短距离（最小代价和）。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $1\\le n,m\\le 200$，且所有代价均为不大于 $100$ 的非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Shortest Distance", "background": "", "description": "An EDIT string editor can transform a source string $X[1\\cdots m]$ into a new target string $Y[1\\cdots n]$ via different operations. EDIT provides the following operations:\n\n- delete: delete the first character of the source string.\n- replace: replace the first character of the source string and append it to the end of the target string. The replace operation may replace it with the same character as the original.\n- copy: move the first character of the source string to the end of the target string.\n- insert: insert a single character into the target string.\n- twiddle: swap the first two adjacent characters of the source string, and move them to the end of the target string.\n- kill: after finishing all other operations, the remaining suffix of the source string can be deleted by a delete-to-end operation.\n\nFor example, one way to transform the source `algorithm` into the target string `altruistic` is to perform the following sequence of operations:\n\n| Operation | Target string | Source string |\n| :----------: | :----------: | :----------: |\n| Initial | (empty) | `algorithm` |\n| `copy a` | `a` | `lgorithm` |\n| `copy l` | `al` | `gorithm` |\n| `replace g to t` | `alt` | `orithm` |\n| `delete o` | `alt` | `rithm` |\n| `copy r` | `altr` | `ithm` |\n| `insert u` | `altru` | `ithm` |\n| `insert i` | `altrui` | `ithm` |\n| `insert s` | `altruis` | `ithm` |\n| `twiddle it into ti` | `altruisti` | `hm` |\n| `replace h to c` | `altruistic` | `m` |\n| `kill` | `altruistic` | (empty) |\n\nThere may be other operation sequences that achieve this result as well.\n\nEach of the operations delete, replace, copy, insert, twiddle, and kill has an associated cost. For example:\n\n```plain\ncost(delete) =3;\ncost(replace)=6;\ncost(copy)   =5;\ncost(insert) =4;\ncost(twiddle)=4;\ncost(kill) = 被删除的串长 * cost(delete) - 1;\n```\n\nThe cost of a given operation sequence is the sum of the costs of the operations in the sequence. For example, the cost of the above sequence is\n\n$$\\begin{aligned}&3\\times \\mathrm{cost}(\\mathtt{copy})+2\\times \\mathrm{cost}(\\mathtt{replace})+\\mathrm{cost}(\\mathtt{delete})+3\\times \\mathrm{cost}(\\mathtt{insert}) \\\\ &+\\mathrm{cost}(\\mathtt{twiddle}) +\\mathrm{cost}(\\mathtt{kill}) \\\\\n=\\ & 3\\times 5+2\\times 6+3+3\\times 4+4+1\\times 3-1\\\\\n=\\ &48\\end{aligned}$$\n\nProgramming Task\n\nGiven two sequences $X[1\\cdots m], Y[1\\cdots n]$ and a set of operation costs, the shortest distance from $X$ to $Y$ is the minimum cost of a sequence of operations that transforms $X$ into $Y$. Please give an algorithm to find the shortest distance from $X[1\\cdots m]$ to $Y[1\\cdots n]$.", "inputFormat": "The first line: the source sequence $X[1\\cdots m]$.\n\nThe second line: the target sequence $Y[1\\cdots n]$.\n\nThe third line: $5$ positive integers, which are the costs of delete, replace, copy, insert, and twiddle, in this order.", "outputFormat": "Output a single integer in one line, representing the shortest distance (minimum total cost) from $X$ to $Y$.", "hint": "Constraints\n\nFor all testdata, $1 \\le n, m \\le 200$, and all costs are nonnegative integers no greater than $100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 最短距离", "background": "", "description": "一种 EDIT 字母编辑器，它的功能是可以通过不同的变换操作可以把一个源串 $X[l\\cdots m]$ 变换为新的目标串 $Y[1\\cdots n]$。EDIT 提供的变换操作有：\n\n- 删除源串首个字符（delete）；\n- 替换源串首个字符放到目标串末尾（replace）。replace 操作可以替换为与原来相同的字符；\n- 移动源串首个字符放到目标串末尾（copy）；\n- 向目标串插入单个字符（insert）；\n- 交换源串中的开头两个字符，并移动到目标串末尾中去（twiddle）；\n- 在完成其它所有操作之后，源串中余下的全部后缀就可用删至行末的操作删除（kill）。\n\n例如，将源 `algorithm` 转换成目标串 `altruistic` 的一种方法是采取下面的操作序列：\n\n| 操作 | 目标串 | 原串 |\n| :----------: | :----------: | :----------: |\n| 初始 | （空） | `algorithm` |\n| `copy a` | `a` | `lgorithm` |\n| `copy l` | `al` | `gorithm` |\n| `replace g to t` | `alt` | `orithm` |\n| `delete o` | `alt` | `rithm` |\n| `copy r` | `altr` | `ithm` |\n| `insert u` | `altru` | `ithm` |\n| `insert i` | `altrui` | `ithm` |\n| `insert s` | `altruis` | `ithm` |\n| `twiddle it into ti` | `altruisti` | `hm` |\n| `replace h to c` | `altruistic` | `m` |\n| `kill` | `altruistic` | （空） |\n\n\n\n要达到这个结果还可能有其它一些操作序列。\n\n操作 delete、replace、copy、insert、twiddle 和kill中每一个都有一个相联系的代价 cost。例如：\n\n```plain\ncost(delete) =3;\ncost(replace)=6;\ncost(copy)   =5;\ncost(insert) =4;\ncost(twiddle)=4;\ncost(kill) = 被删除的串长 * cost(delete) - 1;\n```\n\n一个给定的操作序列的代价为序列中各操作代价之和。\n例如上述操作序列的代价为\n\n$$\\begin{aligned}&3\\times \\mathrm{cost}(\\mathtt{copy})+2\\times \\mathrm{cost}(\\mathtt{replace})+\\mathrm{cost}(\\mathtt{delete})+3\\times \\mathrm{cost}(\\mathtt{insert}) \\\\ &+\\mathrm{cost}(\\mathtt{twiddle}) +\\mathrm{cost}(\\mathtt{kill}) \\\\\n=\\ & 3\\times 5+2\\times 6+3+3\\times 4+4+1\\times 3-1\\\\\n=\\ &48\\end{aligned}$$\n\n**编程任务**\n\n给定两个序列 $X[1\\cdots m],Y[1\\cdots n]$ 和一些操作代价集合，$X$ 到 $Y$ 的最短距离为将 $X$ 转化为 $Y$ 的最小的转换序列的代价。请给出一个算法来找出 $X[1\\cdots m]$ 至 $Y[1\\cdots n]$ 的最短距离。\n", "inputFormat": "第一行：源序列 $X[1\\cdots m]$。\n\n第二行：目标序列 $Y[1\\cdots n]$。\n\n第三行：$5$ 个正整数，分别是：delete、replace、copy、insert、twiddle 的代价。\n", "outputFormat": "一行一个整数，表示 $X$ 到 $Y$ 的最短距离（最小代价和）。\n", "hint": "### 数据范围及约定\n\n对于全部数据，满足 $1\\le n,m\\le 200$，且所有代价均为不大于 $100$ 的非负整数。", "locale": "zh-CN"}}}
{"pid": "P2454", "type": "P", "difficulty": 6, "samples": [["5 0 1\n1 2 3 4 0\n1 1 1 1 1", "2"], ["3 1 1\n1 2 0\n1 2 3\n2", "1"], ["2 1 1  \n0 1  \n1 1  \n1", "0"], ["10 3 3\n0 2 0 0 2 2 8 3 8 7\n10 9 1 8 1 3 7 2 8 1\n3 4 6", "3"], ["2 0 1\n1 0\n5 10", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["基环树"], "title": "[SCOI2008] 城堡 - 数据加强版", "background": "[原题弱化版](https://www.luogu.com.cn/problem/P2538)", "description": "在一个国家里，有 $n$ 个城市（编号为 $0$ 到 $n-1$）。这些城市之间有 $n$ 条双向道路相连（编号为 $0$ 到 $n-1$），其中编号为 $i$ 的道路连接了城市 $i$ 和城市 $r_i$（一条道路可以连接一个城市和它自身），长度为 $d_i$。$n$ 个城市中有 $m$ 个拥有自己城堡，可以抵御敌人侵略。如果没有城堡的城市遭受攻击，则离它最近的城堡将派兵前往救援。\n\n你的任务是在不超过 $k$ 个没有城堡的城市中建立城堡，使得所有城市中“离最近城堡的距离”的最大值尽量小。换句话说，若令 $dist(c)$ 表示城市 $c$ 的最近城堡离它的距离，则你的任务是让 $\\max\\{dist(c)\\}$ 尽量小。\n\n输入数据保证存在方案使得对于每个城市，至少有一个城堡能够到达。", "inputFormat": "输入第一行为三个正整数 $n, m, k$。第二行包含 $n$ 个整数 $r_0,r_1,\\ldots,r_{n-1}$。第三行包含 $n$ 个整数 $d_0,d_1,\\ldots,d_{n-1}$。第四行包含 $m$ 个各不相同的 $0$ 到 $n-1$ 之间的整数，分别为 $m$ 个城堡所在的城市编号。", "outputFormat": "输出仅一行，包含一个整数，即 $\\max\\{dist(c)\\}$ 的最小值。", "hint": "$100\\%$ 的数据满足：$1\\leq d_i\\leq 10^5$，$0\\leq m\\leq n-k$。\n\n- Subtask 1：$2 \\leq n \\leq 3000$。\n- Subtask 2：$2 \\leq n \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Castle - Enhanced Data Version", "background": "Weakened version of the original problem: https://www.luogu.com.cn/problem/P2538", "description": "In a country, there are $n$ cities (numbered $0$ to $n-1$). These cities are connected by $n$ bidirectional roads (numbered $0$ to $n-1$). Road $i$ connects city $i$ and city $r_i$ (a road may connect a city to itself), with length $d_i$. Among the $n$ cities, $m$ of them have their own castles, which can resist enemy invasions. When a city without a castle is attacked, the nearest castle will send troops to rescue.\n\nYour task is to build castles in at most $k$ cities that currently do not have castles, so that the maximum “distance to the nearest castle” among all cities is as small as possible. In other words, let $dist(c)$ be the distance from city $c$ to its nearest castle; your goal is to minimize $\\max\\{dist(c)\\}$.\n\nIt is guaranteed that there exists a plan such that for every city, at least one castle can reach it.", "inputFormat": "The first line contains three positive integers $n, m, k$. The second line contains $n$ integers $r_0,r_1,\\ldots,r_{n-1}$. The third line contains $n$ integers $d_0,d_1,\\ldots,d_{n-1}$. The fourth line contains $m$ distinct integers between $0$ and $n-1$, which are the indices of the cities that already have castles.", "outputFormat": "Output a single line containing one integer: the minimum possible value of $\\max\\{dist(c)\\}$.", "hint": "Constraints:\n\n$100\\%$ of the testdata satisfies $1\\leq d_i\\leq 10^5$ and $0\\leq m\\leq n-k$.\n\n- Subtask 1: $2 \\leq n \\leq 3000$.\n- Subtask 2: $2 \\leq n \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 城堡 - 数据加强版", "background": "[原题弱化版](https://www.luogu.com.cn/problem/P2538)", "description": "在一个国家里，有 $n$ 个城市（编号为 $0$ 到 $n-1$）。这些城市之间有 $n$ 条双向道路相连（编号为 $0$ 到 $n-1$），其中编号为 $i$ 的道路连接了城市 $i$ 和城市 $r_i$（一条道路可以连接一个城市和它自身），长度为 $d_i$。$n$ 个城市中有 $m$ 个拥有自己城堡，可以抵御敌人侵略。如果没有城堡的城市遭受攻击，则离它最近的城堡将派兵前往救援。\n\n你的任务是在不超过 $k$ 个没有城堡的城市中建立城堡，使得所有城市中“离最近城堡的距离”的最大值尽量小。换句话说，若令 $dist(c)$ 表示城市 $c$ 的最近城堡离它的距离，则你的任务是让 $\\max\\{dist(c)\\}$ 尽量小。\n\n输入数据保证存在方案使得对于每个城市，至少有一个城堡能够到达。", "inputFormat": "输入第一行为三个正整数 $n, m, k$。第二行包含 $n$ 个整数 $r_0,r_1,\\ldots,r_{n-1}$。第三行包含 $n$ 个整数 $d_0,d_1,\\ldots,d_{n-1}$。第四行包含 $m$ 个各不相同的 $0$ 到 $n-1$ 之间的整数，分别为 $m$ 个城堡所在的城市编号。", "outputFormat": "输出仅一行，包含一个整数，即 $\\max\\{dist(c)\\}$ 的最小值。", "hint": "$100\\%$ 的数据满足：$1\\leq d_i\\leq 10^5$，$0\\leq m\\leq n-k$。\n\n- Subtask 1：$2 \\leq n \\leq 3000$。\n- Subtask 2：$2 \\leq n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2455", "type": "P", "difficulty": 5, "samples": [["3\n2 -1 1 1\n4 1 -1 5\n1 1 1 0", "x1=1.00\nx2=0.00\nx3=-1.00\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2006", "各省省选", "山东", "Special Judge", "线性代数", "高斯消元"], "title": "[SDOI2006] 线性方程组", "background": null, "description": "已知 $n$ 元线性一次方程组。\n\n$$ \\begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \\cdots + a_{1, n} x_n = b_1 \\\\ a_{2, 1} x_1 + a_{2, 2} x_2 + \\cdots + a_{2, n} x_n = b_2 \\\\ \\cdots \\\\ a_{n,1} x_1 + a_{n, 2} x_2 + \\cdots + a_{n, n} x_n = b_n \\end{cases}$$\n\n请根据输入的数据，编程输出方程组的解的情况。", "inputFormat": "第一行输入未知数的个数 $n$。  \n接下来 $n$ 行，每行 $n + 1$ 个整数，表示每一个方程的系数及方程右边的值。", "outputFormat": "如果有唯一解，则输出解。你的结果被认为正确，当且仅当对于每一个 $x_i$ 而言结果值与标准答案值的绝对误差或者相对误差不超过 $0.01$。\n\n如果方程组无解输出 $-1$；\n如果有无穷多实数解，输出 $0$；", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 50$。$\\forall 1\\le i, j \\le n$，有 $\\left | a_{i, j} \\right | \\le 100$，$\\left |b_i \\right | \\le 300$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] System of Linear Equations", "background": "", "description": "Given an $n$-variable linear system of equations:\n$$ \\begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \\cdots + a_{1, n} x_n = b_1 \\\\ a_{2, 1} x_1 + a_{2, 2} x_2 + \\cdots + a_{2, n} x_n = b_2 \\\\ \\cdots \\\\ a_{n,1} x_1 + a_{n, 2} x_2 + \\cdots + a_{n, n} x_n = b_n \\end{cases}$$\nBased on the input, write a program to output the status of the solution set.", "inputFormat": "The first line contains the number of unknowns $n$.  \nThen $n$ lines follow, each containing $n + 1$ integers, representing the coefficients of each equation and the value on the right-hand side.", "outputFormat": "If there is a unique solution, output the solution. Your result is considered correct if and only if, for every $x_i$, the absolute error or the relative error compared to the standard answer does not exceed $0.01$.\n\nIf the system has no solution, output $-1$;  \nif it has infinitely many real solutions, output $0$.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 50$. For all $1 \\le i, j \\le n$, $\\left| a_{i, j} \\right| \\le 100$, $\\left| b_i \\right| \\le 300$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 线性方程组", "background": null, "description": "已知 $n$ 元线性一次方程组。\n\n$$ \\begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \\cdots + a_{1, n} x_n = b_1 \\\\ a_{2, 1} x_1 + a_{2, 2} x_2 + \\cdots + a_{2, n} x_n = b_2 \\\\ \\cdots \\\\ a_{n,1} x_1 + a_{n, 2} x_2 + \\cdots + a_{n, n} x_n = b_n \\end{cases}$$\n\n请根据输入的数据，编程输出方程组的解的情况。", "inputFormat": "第一行输入未知数的个数 $n$。  \n接下来 $n$ 行，每行 $n + 1$ 个整数，表示每一个方程的系数及方程右边的值。", "outputFormat": "如果有唯一解，则输出解。你的结果被认为正确，当且仅当对于每一个 $x_i$ 而言结果值与标准答案值的绝对误差或者相对误差不超过 $0.01$。\n\n如果方程组无解输出 $-1$；\n如果有无穷多实数解，输出 $0$；", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 50$。$\\forall 1\\le i, j \\le n$，有 $\\left | a_{i, j} \\right | \\le 100$，$\\left |b_i \\right | \\le 300$。", "locale": "zh-CN"}}}
{"pid": "P2456", "type": "P", "difficulty": 5, "samples": [["2\r\n4 2\r\n1b1\r\na\r\n", "4"], ["5\r\n4 2 4 4 2\r\n1bad1\r\nacbe\r\n", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "高精度", "2006", "并查集", "各省省选", "山东"], "title": "[SDOI2006] 二进制方程", "background": null, "description": "一个形如：\n\n$$\n \\overline{X_1X_2\\dots X_n}= \\overline{Y_1Y_2\\dots Y_m}\n$$\n\n的等式称为二进制方程。\n\n在二进制方程的两边：$X_i$ 和 $Y_j$（$1\\le i\\le n$ 且 $1\\le j \\le m$）是二进制数字 $01$ 或者一个变量（小写字母）。每个变量都是一个有固定长度的二进制代码，他可以在等式中取代变量的位置，称这个长度为变量的长度。为了解一个二进制方程，需要给其中的变量赋予适当的二进制代码，使得我们用他们替代等式中的相应的变量后（等式的两边都变成二进制代码），这个等式成立。\n\n编程任务：\n\n对于每一个给出的方程，计算一共有多少组解。", "inputFormat": "输入共四行。\n\n第一行：$k$，代表变量的个数，规定使用小写英文字母中的前 $k$ 个字母作为变量（如 $k=5$，则变量有 $a,b,c,d,e$）。\n\n第二行：$k$ 个正整数，中间用一个空格隔开，依次代表 $k$ 个变量的长度。\n\n第三行：等式左边的表达式。\n\n第四行：等式右边的表达式。", "outputFormat": "一个数，代表等式中出现的变量共有多少组解。", "hint": "#### 样例一解释\n\n一共有 $4$ 组解，如下所示：\n\n1. $a=1001$，$b=00$。\n\n2. $a=1011$，$b=01$。\n\n3. $a=1101$，$b=10$。\n\n4. $a=1111$，$b=11$。\n\n#### 样例二解释\n\n$k=5$，所以变量有：$a,b,c,d,e$，长度分别为：$4\\space 2\\space 4\\space 4\\space2$。等式是：$\\overline{1bad1}=\\overline{acbe}$。\n\n所以输出 $16$，即变量 $a,b,c,d,e$ 共有 $16$ 组解。\n\n#### 数据范围\n\n$k\\le 26$，因为变量最多有 $26$ 个（$26$ 个英文小写字母）。\n\n等式的每一端的数字和变量的长度之和不超过 $10000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Binary Equation", "background": "", "description": "An equality of the form:\n$$\n \\overline{X_1X_2\\dots X_n}= \\overline{Y_1Y_2\\dots Y_m}\n$$\nis called a binary equation.\n\nOn both sides of a binary equation, each $X_i$ and $Y_j$ ($1 \\le i \\le n$ and $1 \\le j \\le m$) is either a binary digit $0$ or $1$, or a variable (a lowercase letter). Each variable represents a binary string of fixed length; this length is called the length of the variable. To solve a binary equation, we assign suitable binary strings to the variables so that, after replacing the variables with their strings (so both sides become binary strings), the equality holds.\n\nProgramming task:\n\nFor each given equation, compute how many solutions there are in total.", "inputFormat": "The input consists of four lines.\n\nLine 1: $k$, the number of variables. The variables are the first $k$ lowercase English letters (for example, if $k=5$, then the variables are $a, b, c, d, e$).\n\nLine 2: $k$ positive integers separated by a single space, giving the lengths of the $k$ variables in order.\n\nLine 3: the expression on the left-hand side of the equation.\n\nLine 4: the expression on the right-hand side of the equation.", "outputFormat": "A single integer, the total number of solutions for the variables that appear in the equation.", "hint": "#### Explanation for Sample 1\n\nThere are $4$ solutions, as follows:\n\n1. $a=1001$, $b=00$.\n2. $a=1011$, $b=01$.\n3. $a=1101$, $b=10$.\n4. $a=1111$, $b=11$.\n\n#### Explanation for Sample 2\n\n$k=5$, so the variables are $a, b, c, d, e$, with lengths: $4\\space 2\\space 4\\space 4\\space2$. The equation is $\\overline{1bad1}=\\overline{acbe}$.\n\nTherefore, the output is $16$, meaning there are $16$ solutions for the variables $a, b, c, d, e$.\n\n#### Constraints\n\n$k \\le 26$, because there are at most $26$ variables (the $26$ lowercase English letters).\n\nOn each side of the equation, the sum of the lengths of digits and variables does not exceed $10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 二进制方程", "background": null, "description": "一个形如：\n\n$$\n \\overline{X_1X_2\\dots X_n}= \\overline{Y_1Y_2\\dots Y_m}\n$$\n\n的等式称为二进制方程。\n\n在二进制方程的两边：$X_i$ 和 $Y_j$（$1\\le i\\le n$ 且 $1\\le j \\le m$）是二进制数字 $01$ 或者一个变量（小写字母）。每个变量都是一个有固定长度的二进制代码，他可以在等式中取代变量的位置，称这个长度为变量的长度。为了解一个二进制方程，需要给其中的变量赋予适当的二进制代码，使得我们用他们替代等式中的相应的变量后（等式的两边都变成二进制代码），这个等式成立。\n\n编程任务：\n\n对于每一个给出的方程，计算一共有多少组解。", "inputFormat": "输入共四行。\n\n第一行：$k$，代表变量的个数，规定使用小写英文字母中的前 $k$ 个字母作为变量（如 $k=5$，则变量有 $a,b,c,d,e$）。\n\n第二行：$k$ 个正整数，中间用一个空格隔开，依次代表 $k$ 个变量的长度。\n\n第三行：等式左边的表达式。\n\n第四行：等式右边的表达式。", "outputFormat": "一个数，代表等式中出现的变量共有多少组解。", "hint": "#### 样例一解释\n\n一共有 $4$ 组解，如下所示：\n\n1. $a=1001$，$b=00$。\n\n2. $a=1011$，$b=01$。\n\n3. $a=1101$，$b=10$。\n\n4. $a=1111$，$b=11$。\n\n#### 样例二解释\n\n$k=5$，所以变量有：$a,b,c,d,e$，长度分别为：$4\\space 2\\space 4\\space 4\\space2$。等式是：$\\overline{1bad1}=\\overline{acbe}$。\n\n所以输出 $16$，即变量 $a,b,c,d,e$ 共有 $16$ 组解。\n\n#### 数据范围\n\n$k\\le 26$，因为变量最多有 $26$ 个（$26$ 个英文小写字母）。\n\n等式的每一端的数字和变量的长度之和不超过 $10000$。", "locale": "zh-CN"}}}
{"pid": "P2457", "type": "P", "difficulty": 5, "samples": [["4\n62 41 86 94 \n73 58 11 12 \n69 93 89 88 \n81 40 69 13 \n", "650"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "各省省选", "山东", "二分图", "费用流"], "title": "[SDOI2006] 仓库管理员的烦恼", "background": null, "description": "仓库管理员 M 最近一直很烦恼，因为他的上司给了他一个艰难的任务：让他尽快想出一种合理的方案，把公司的仓库整理好。\n\n已知公司共有 $n$ 个仓库和 $n$ 种货物，由于公司进货时没能很好的归好类，使得大部分的仓库里面同时装有多种货物，这就给搬运工作人员搬运货物时带来了很多的麻烦。\n\n仓库管理员 M 的任务就是设计一种合理的方案，把仓库里面的货物重新整理，把相同的货物放到同一个仓库，以便于日后的管理，在整理过程中肯定需要把某些货物从一个仓库搬运到另一个仓库，已知每一次搬运货物所付出的代价等于搬运该货物的重量。\n\n编程任务：\n\n请你帮助仓库管理员 M 设计搬运方案，使得把所有的货物归好类：使每种货物各自占用一个仓库，或者说每个仓库里只能放一种货物。同时要求搬运货物时所付出的所有的总的代价最小。", "inputFormat": "第一行为 $n$（$1 \\le n \\le 150$），仓库的数量。\n\n以下为仓库货物的情况。第 $i+1$ 行依次为第 $i$ 个仓库中 $n$ 种货物的数量 $x$（$0 \\le x \\le 100$）。", "outputFormat": "把所有的货物按要求整理好所需的总的最小代价。", "hint": "样例说明：方案是：第 $1$ 种货物放到仓库 $2$ 中；第 $2$ 种货物放到仓库 $3$ 中；第 $3$ 种货物放到仓库 $4$中；第 $4$ 种货物放到仓库 $1$ 中。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] The Warehouse Manager's Trouble", "background": "", "description": "Warehouse manager M has been very troubled lately because his boss gave him a difficult task: come up with a reasonable plan as soon as possible to reorganize the company’s warehouses.\n\nThere are $n$ warehouses and $n$ types of goods. Because the goods were not well categorized when purchased, most warehouses contain multiple types of goods, which causes a lot of trouble for the workers when moving goods.\n\nManager M’s task is to design a reasonable plan to reorganize the goods in the warehouses so that goods of the same type are stored in the same warehouse, making future management easier. During the reorganization, some goods will definitely need to be moved from one warehouse to another. The cost of each move equals the weight of the moved goods.\n\nProgramming task:\n\nPlease help manager M design a moving plan so that all goods are categorized properly: each type of goods occupies exactly one warehouse, or equivalently, each warehouse holds only one type of goods. At the same time, the total cost of moving the goods should be minimized.", "inputFormat": "The first line contains $n$ ($1 \\le n \\le 150$), the number of warehouses.\n\nThe following lines describe the goods in the warehouses. For the $i$-th warehouse, line $i+1$ contains the quantities $x$ of the $n$ types of goods ($0 \\le x \\le 100$).", "outputFormat": "Output the minimal total cost required to reorganize all the goods as required.", "hint": "Sample explanation: The plan is as follows: type $1$ goods go to warehouse $2$; type $2$ goods go to warehouse $3$; type $3$ goods go to warehouse $4$; type $4$ goods go to warehouse $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 仓库管理员的烦恼", "background": null, "description": "仓库管理员 M 最近一直很烦恼，因为他的上司给了他一个艰难的任务：让他尽快想出一种合理的方案，把公司的仓库整理好。\n\n已知公司共有 $n$ 个仓库和 $n$ 种货物，由于公司进货时没能很好的归好类，使得大部分的仓库里面同时装有多种货物，这就给搬运工作人员搬运货物时带来了很多的麻烦。\n\n仓库管理员 M 的任务就是设计一种合理的方案，把仓库里面的货物重新整理，把相同的货物放到同一个仓库，以便于日后的管理，在整理过程中肯定需要把某些货物从一个仓库搬运到另一个仓库，已知每一次搬运货物所付出的代价等于搬运该货物的重量。\n\n编程任务：\n\n请你帮助仓库管理员 M 设计搬运方案，使得把所有的货物归好类：使每种货物各自占用一个仓库，或者说每个仓库里只能放一种货物。同时要求搬运货物时所付出的所有的总的代价最小。", "inputFormat": "第一行为 $n$（$1 \\le n \\le 150$），仓库的数量。\n\n以下为仓库货物的情况。第 $i+1$ 行依次为第 $i$ 个仓库中 $n$ 种货物的数量 $x$（$0 \\le x \\le 100$）。", "outputFormat": "把所有的货物按要求整理好所需的总的最小代价。", "hint": "样例说明：方案是：第 $1$ 种货物放到仓库 $2$ 中；第 $2$ 种货物放到仓库 $3$ 中；第 $3$ 种货物放到仓库 $4$中；第 $4$ 种货物放到仓库 $1$ 中。", "locale": "zh-CN"}}}
{"pid": "P2458", "type": "P", "difficulty": 4, "samples": [["6\r\n1 30 3 2 3 4\r\n2 16 2 5 6\r\n3 5 0\r\n4 4 0\r\n5 11 0\r\n6 5 0", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "2006", "各省省选", "山东", "树形 DP"], "title": "[SDOI2006] 保安站岗", "background": null, "description": "五一来临，某地下超市为了便于疏通和指挥密集的人员和车辆，以免造成超市内的混乱和拥挤，准备临时从外单位调用部分保安来维持交通秩序。\n\n已知整个地下超市的所有通道呈一棵树的形状；某些通道之间可以互相望见。总经理要求所有通道的每个端点（树的顶点）都要有人全天候看守，在不同的通道端点安排保安所需的费用不同。\n\n一个保安一旦站在某个通道的其中一个端点，那么他除了能看守住他所站的那个端点，也能看到这个通道的另一个端点，所以一个保安可能同时能看守住多个端点（树的结点），因此没有必要在每个通道的端点都安排保安。\n\n编程任务：\n\n请你帮助超市经理策划安排，在能看守全部通道端点的前提下，使得花费的经费最少。", "inputFormat": "第 $1$ 行 $n$，表示树中结点的数目。\n\n第 $2$ 行至第 $n+1$ 行，每行描述每个通道端点的信息，依次为：该结点标号 $i$（$0<i \\le n$），在该结点安置保安所需的经费 $k$（$1\\le k \\le 10000$），该边的儿子数 $m$，接下来 $m$ 个数，分别是这个节点的 $m$ 个儿子的标号 $r_1,r_2,\\cdots, r_m$。\n\n对于一个 $n$（$0<n \\le 1500$）个结点的树，结点标号在 $1$ 到 $n$ 之间，且标号不重复。", "outputFormat": "输出一行一个整数，表示最少的经费。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g013tlmh.png)\n\n在结点 $2,3,4$ 安置 $3$ 个保安能看守所有的 $6$ 个结点，需要的经费最小：$25$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Security Guards on Duty", "background": "", "description": "With Labor Day approaching, an underground supermarket plans to temporarily call in security guards from other units to direct and ease the flow of dense crowds and vehicles, so as to avoid chaos and congestion inside the supermarket.\n\nAll passages in the underground supermarket form a tree. Some passages can be seen from one another. The general manager requires every endpoint of every passage (i.e., every tree vertex) to be watched around the clock. The cost of assigning a guard at different passage endpoints varies.\n\nIf a guard stands at one endpoint of a passage, then besides guarding the endpoint where they stand, they can also see the other endpoint of that passage. Therefore, a single guard may be able to watch multiple endpoints (tree vertices), and it is not necessary to assign a guard to every endpoint of every passage.\n\nTask:\n\nPlease help the supermarket manager plan the arrangement so that all passage endpoints are watched, while minimizing the total cost.", "inputFormat": "The first line contains $n$, the number of nodes in the tree.\n\nLines $2$ through $n+1$ each describe one passage endpoint (node), in the following order: the node label $i$ ($0 < i \\le n$), the cost $k$ of placing a guard at this node ($1 \\le k \\le 10000$), the number of children of this node $m$, followed by $m$ integers, which are the labels of this node’s $m$ children $r_1, r_2, \\cdots, r_m$.\n\nFor a tree with $n$ ($0 < n \\le 1500$) nodes, node labels are between $1$ and $n$, and labels are not repeated.", "outputFormat": "Output a single integer on one line: the minimum total cost.", "hint": "Sample explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g013tlmh.png)\n\nPlacing $3$ guards at nodes $2, 3, 4$ can watch all $6$ nodes, and the minimum cost is $25$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 保安站岗", "background": null, "description": "五一来临，某地下超市为了便于疏通和指挥密集的人员和车辆，以免造成超市内的混乱和拥挤，准备临时从外单位调用部分保安来维持交通秩序。\n\n已知整个地下超市的所有通道呈一棵树的形状；某些通道之间可以互相望见。总经理要求所有通道的每个端点（树的顶点）都要有人全天候看守，在不同的通道端点安排保安所需的费用不同。\n\n一个保安一旦站在某个通道的其中一个端点，那么他除了能看守住他所站的那个端点，也能看到这个通道的另一个端点，所以一个保安可能同时能看守住多个端点（树的结点），因此没有必要在每个通道的端点都安排保安。\n\n编程任务：\n\n请你帮助超市经理策划安排，在能看守全部通道端点的前提下，使得花费的经费最少。", "inputFormat": "第 $1$ 行 $n$，表示树中结点的数目。\n\n第 $2$ 行至第 $n+1$ 行，每行描述每个通道端点的信息，依次为：该结点标号 $i$（$0<i \\le n$），在该结点安置保安所需的经费 $k$（$1\\le k \\le 10000$），该边的儿子数 $m$，接下来 $m$ 个数，分别是这个节点的 $m$ 个儿子的标号 $r_1,r_2,\\cdots, r_m$。\n\n对于一个 $n$（$0<n \\le 1500$）个结点的树，结点标号在 $1$ 到 $n$ 之间，且标号不重复。", "outputFormat": "输出一行一个整数，表示最少的经费。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g013tlmh.png)\n\n在结点 $2,3,4$ 安置 $3$ 个保安能看守所有的 $6$ 个结点，需要的经费最小：$25$。", "locale": "zh-CN"}}}
{"pid": "P2459", "type": "P", "difficulty": 2, "samples": [["2 3 2 6", "0 0 0 1 1 2\n1 0 0 2 1 2\n0 1 0 1 3 1\n0 1 1 1 3 2\n1 1 0 2 3 1\n1 1 1 2 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2007", "各省省选", "山东", "Special Judge"], "title": "[SDOI2007] 立体分割", "background": "", "description": "Ghy收了 $n$ 个小弟,如 Psf、Hf、Csr、Ll……也当然包括你啊。（原文如此……）\n\n可是身为大哥的他从来不像小弟索要什么，反而经常给小弟分发礼物。\n\n一天他得到了 $1$ 个长方体形状的蛋糕。但是Ghy并不喜欢吃蛋糕，所以他要把蛋糕全部分给小弟们。Ghy认为所有小弟是平等的，所以找来小弟你，让你把这个蛋糕分成 $n$个大小和形状都相等的长方体小蛋糕（即全等的小蛋糕）。\n\n我们把蛋糕搬到一个三维坐标系里，以它的一个顶点 $O$ 为坐标原点 $(0,0,0)$。另一个与 $O$ 点相对的顶点(就是离 $O$ 点最远的点)的坐标 $(x,y,z)$。其实 $x,y,z$ 就表示了长方体的长、宽、高。", "inputFormat": "四个正整数，$x,y,z,n$。意义如题目所述。", "outputFormat": "$N$ 行，每行 $6$ 个实数，表示分割成的全等长方体小蛋糕的两相对顶点坐标，先输出第一个顶点的坐标 $x_1,y_1,z_1$，然后是 $x_2,y_2,z_2$，误差不超过 $10^{-9}$。（可以任意顺序输出小蛋糕坐标，且相对顶点任取一组输出）。", "hint": "### 样例解释（2023.9.29 管理员补充）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4lfzlmr.png)\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1\\leq x,y,z,n\\leq 1000$，$x,y,z$ 为整数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] 3D Partition", "background": "", "description": "Ghy recruited $n$ underlings, such as Psf, Hf, Csr, Ll, and of course you. (as in the original text...)\n\nAs the boss, he never asks his underlings for anything. Instead, he often gives them gifts.\n\nOne day, he got a rectangular cuboid cake. But Ghy does not like eating cake, so he wants to give all of it to his underlings. Ghy believes all underlings are equal, so he asks you to divide this cake into $n$ rectangular cuboid small cakes that are equal in both size and shape (i.e., congruent small cakes).\n\nWe move the cake into a 3D coordinate system, taking one vertex $O$ as the origin $ (0, 0, 0) $. The vertex opposite to $O$ (the farthest point from $O$) has coordinates $ (x, y, z) $. In fact, $ x, y, z $ represent the length, width, and height of the rectangular cuboid.", "inputFormat": "Four positive integers, $ x, y, z, n $. Their meanings are as described above.", "outputFormat": "$n$ lines, each containing 6 real numbers, representing the coordinates of a pair of opposite vertices of one congruent rectangular cuboid small cake. Output the coordinates of the first vertex $x_1, y_1, z_1$, followed by $x_2, y_2, z_2$. The absolute error must not exceed $10^{-9}$. You may output the small cakes in any order, and for each small cake, you may output any one pair of opposite vertices.", "hint": "Sample explanation (added by admin on 2023-09-29).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4lfzlmr.png)\n\nConstraints\n\nFor $100\\%$ of the testdata, $1 \\leq x, y, z, n \\leq 1000$, and $x, y, z$ are integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 立体分割", "background": "", "description": "Ghy收了 $n$ 个小弟,如 Psf、Hf、Csr、Ll……也当然包括你啊。（原文如此……）\n\n可是身为大哥的他从来不像小弟索要什么，反而经常给小弟分发礼物。\n\n一天他得到了 $1$ 个长方体形状的蛋糕。但是Ghy并不喜欢吃蛋糕，所以他要把蛋糕全部分给小弟们。Ghy认为所有小弟是平等的，所以找来小弟你，让你把这个蛋糕分成 $n$个大小和形状都相等的长方体小蛋糕（即全等的小蛋糕）。\n\n我们把蛋糕搬到一个三维坐标系里，以它的一个顶点 $O$ 为坐标原点 $(0,0,0)$。另一个与 $O$ 点相对的顶点(就是离 $O$ 点最远的点)的坐标 $(x,y,z)$。其实 $x,y,z$ 就表示了长方体的长、宽、高。", "inputFormat": "四个正整数，$x,y,z,n$。意义如题目所述。", "outputFormat": "$N$ 行，每行 $6$ 个实数，表示分割成的全等长方体小蛋糕的两相对顶点坐标，先输出第一个顶点的坐标 $x_1,y_1,z_1$，然后是 $x_2,y_2,z_2$，误差不超过 $10^{-9}$。（可以任意顺序输出小蛋糕坐标，且相对顶点任取一组输出）。", "hint": "### 样例解释（2023.9.29 管理员补充）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4lfzlmr.png)\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1\\leq x,y,z,n\\leq 1000$，$x,y,z$ 为整数。", "locale": "zh-CN"}}}
{"pid": "P2460", "type": "P", "difficulty": 6, "samples": [["3 4\r\n91 92 93 94\r\n0.5 0.5 0.5 0.5\r\n0.5 0.5 0.5 0.5\r\n0.5 0.5 0.5 0.5", "0.125\r\n279"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "山东"], "title": "[SDOI2007] 科比的比赛", "background": null, "description": "NBA 球星云集，谁是最厉害的呢？没有定论。\n\nNBA 总裁大卫斯特恩最近闲得无聊，决定举办一场球员单挑大赛。\n\n比赛是这样的：首先，我们给每人都打上个分数，表示了每个人的整体能力。然后让每个参赛队员都打 $n$ 场比赛，首先看谁赢得最多，然后看谁打赢的人的能力值的和最大。\n\n本人一向支持科比（我不支持），当然希望他赢。现在让我们和科比一起去赢得这场比赛吧！！\n\n（科比照片一张）\n\n假设总共比赛有 $m + 1$ 个人参加，告诉你科比和另外 $m$ 个人的比赛的胜利可能性，你的任务就是求出在科比赢了的所有比赛的可能性最大的前提下（误差不超过 $10^{-10}$），科比打赢的人的最大能力值的和是多少？当然当一个人被你打败，他就不会再参加比赛了。\n\n这里需要注意的是，科比能打赢其他人的可能性在不同场次是不同的。比如在比赛前期科比的手感不太好，对抗在内线称霸的人因为无法发挥外线的实力，而难以得分（接奥尼尔图一张）。\n\n中期时别人手感变好，状态起来，有实力的人会给科比制造很大的麻烦（接韦德图一张）。\n\n后期时消耗太多体力，对自己的命中率下降，难以发挥正常水平，所以对抗体力好的球员时占劣势（后接纳什图一张）。\n\n现在给你每场比赛科比对每个参赛者的获胜可能性，和每个人的能力值，帮助科比赢得比赛吧。", "inputFormat": "第一行两个正整数 $n, m$，意义如题所述。\n\n接下来一行 $m$ 个整数表示其他 $m$ 个人的能力值 $s_i$。\n\n接下来是一个 $n \\times m$ 的矩阵，描述在每场碰到每个人的获胜可能 $v_{i,j}$。", "outputFormat": "第一行输出最大获胜可能性。\n\n第二行输出最大能力值和。", "hint": "$1\\le n\\le 10,n \\le m \\le 10^5$；\n\n$1\\le s_i\\le 100,0\\le v_{i,j}\\le1$。\n\n**本题存在 Special Judge。**", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] Kobe's Match", "background": "", "description": "There are $m + 1$ participants in total, including Kobe. Each of the other $m$ participants has an ability value $s_i$. Kobe will play $n$ matches. In each match, he faces one opponent who has not been defeated before. Once Kobe defeats someone, that opponent will no longer participate.\n\nKobe’s probability of defeating a specific opponent varies by match index. Specifically, you are given an $n \\times m$ matrix $v_{i,j}$, where $v_{i,j}$ is the probability that Kobe defeats opponent $j$ if they meet in match $i$.\n\nChoose the opponent Kobe faces in each of the $n$ matches (without repetition) to maximize the probability that Kobe wins all $n$ matches. Subject to achieving this maximum probability (with an error not exceeding $10^{-10}$), maximize the sum of the ability values of the opponents that Kobe defeats.", "inputFormat": "- The first line contains two positive integers $n, m$.\n- The second line contains $m$ integers, the ability values $s_i$ of the other $m$ participants.\n- Then follows an $n \\times m$ matrix, the probabilities $v_{i,j}$.", "outputFormat": "- On the first line, output the maximum probability that Kobe wins all $n$ matches. The error must not exceed $10^{-10}$.\n- On the second line, output the maximum sum of ability values among all strategies that achieve the maximum probability.", "hint": "Constraints\n\n$1\\le n\\le 10, n \\le m \\le 10^5$；\n\n$1\\le s_i\\le 100, 0\\le v_{i,j}\\le 1$。\n\nThis problem is Special Judge.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 科比的比赛", "background": null, "description": "NBA 球星云集，谁是最厉害的呢？没有定论。\n\nNBA 总裁大卫斯特恩最近闲得无聊，决定举办一场球员单挑大赛。\n\n比赛是这样的：首先，我们给每人都打上个分数，表示了每个人的整体能力。然后让每个参赛队员都打 $n$ 场比赛，首先看谁赢得最多，然后看谁打赢的人的能力值的和最大。\n\n本人一向支持科比（我不支持），当然希望他赢。现在让我们和科比一起去赢得这场比赛吧！！\n\n（科比照片一张）\n\n假设总共比赛有 $m + 1$ 个人参加，告诉你科比和另外 $m$ 个人的比赛的胜利可能性，你的任务就是求出在科比赢了的所有比赛的可能性最大的前提下（误差不超过 $10^{-10}$），科比打赢的人的最大能力值的和是多少？当然当一个人被你打败，他就不会再参加比赛了。\n\n这里需要注意的是，科比能打赢其他人的可能性在不同场次是不同的。比如在比赛前期科比的手感不太好，对抗在内线称霸的人因为无法发挥外线的实力，而难以得分（接奥尼尔图一张）。\n\n中期时别人手感变好，状态起来，有实力的人会给科比制造很大的麻烦（接韦德图一张）。\n\n后期时消耗太多体力，对自己的命中率下降，难以发挥正常水平，所以对抗体力好的球员时占劣势（后接纳什图一张）。\n\n现在给你每场比赛科比对每个参赛者的获胜可能性，和每个人的能力值，帮助科比赢得比赛吧。", "inputFormat": "第一行两个正整数 $n, m$，意义如题所述。\n\n接下来一行 $m$ 个整数表示其他 $m$ 个人的能力值 $s_i$。\n\n接下来是一个 $n \\times m$ 的矩阵，描述在每场碰到每个人的获胜可能 $v_{i,j}$。", "outputFormat": "第一行输出最大获胜可能性。\n\n第二行输出最大能力值和。", "hint": "$1\\le n\\le 10,n \\le m \\le 10^5$；\n\n$1\\le s_i\\le 100,0\\le v_{i,j}\\le1$。\n\n**本题存在 Special Judge。**", "locale": "zh-CN"}}}
{"pid": "P2461", "type": "P", "difficulty": 6, "samples": [["2\n1 1\n1 1\n2 10 1000003\n", "142"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "递归", "山东", "矩阵乘法"], "title": "[SDOI2008] 递归数列", "background": "", "description": "一个由自然数组成的数列按下式定义：\n\n对于 $i \\le k$：$a_{i}= b_{i}$。\n\n对于 $i > k$：$a_{i}= \\sum_{j=1}^{k}{c_{j} \\times a_{i-j}}$。\n\n其中 $b_{1\\dots k}$ 和 $c_{1\\dots k}$ 是给定的自然数。\n\n写一个程序，给定自然数 $m \\le n$，计算 $\\left( \\sum_{i=m}^{n}{a_{i}} \\right) \\bmod p$。", "inputFormat": "第一行一个自然数 $k$。\n\n第二行 $k$ 个自然数 $b_{1},b_{2},\\dots,b_{k}$。\n\n第三行 $k$ 个自然数 $c_{1},c_{2},\\dots,c_{k}$。\n\n第四行三个自然数 $m,n,p$。", "outputFormat": "一行一个正整数，表示 $\\sum_{i=m}^{n}{a_{i}} \\mod p$ 的值。", "hint": "对于 $20\\%$ 的数据，$n \\le 10^{6}$。\n\n对于另外 $30\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 15$，$1 \\le m \\le n \\le 10^{18}$，$0 \\le b_{i},c_{i} \\le 10^{9}$，$p \\le 10^{8}$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Recursive Sequence", "background": "", "description": "A sequence of natural numbers is defined as follows:\n\nFor $i \\le k$: $a_{i}= b_{i}$.\n\nFor $i > k$: $a_{i}= \\sum_{j=1}^{k}{c_{j} \\times a_{i-j}}$.\n\nHere $b_{1\\dots k}$ and $c_{1\\dots k}$ are given natural numbers.\n\nWrite a program that, given natural numbers $m \\le n$, computes $\\left( \\sum_{i=m}^{n}{a_{i}} \\right) \\bmod p$.", "inputFormat": "The first line contains a natural number $k$.\n\nThe second line contains $k$ natural numbers $b_{1}, b_{2}, \\dots, b_{k}$.\n\nThe third line contains $k$ natural numbers $c_{1}, c_{2}, \\dots, c_{k}$.\n\nThe fourth line contains three natural numbers $m, n, p$.", "outputFormat": "Output one positive integer on a single line, representing the value of $\\sum_{i=m}^{n}{a_{i}} \\mod p$.", "hint": "For $20\\%$ of the testdata, $n \\le 10^{6}$.\n\nFor another $30\\%$ of the testdata, $k=1$.\n\nFor $100\\%$ of the testdata, $1 \\le k \\le 15$, $1 \\le m \\le n \\le 10^{18}$, $0 \\le b_{i}, c_{i} \\le 10^{9}$, $p \\le 10^{8}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 递归数列", "background": "", "description": "一个由自然数组成的数列按下式定义：\n\n对于 $i \\le k$：$a_{i}= b_{i}$。\n\n对于 $i > k$：$a_{i}= \\sum_{j=1}^{k}{c_{j} \\times a_{i-j}}$。\n\n其中 $b_{1\\dots k}$ 和 $c_{1\\dots k}$ 是给定的自然数。\n\n写一个程序，给定自然数 $m \\le n$，计算 $\\left( \\sum_{i=m}^{n}{a_{i}} \\right) \\bmod p$。", "inputFormat": "第一行一个自然数 $k$。\n\n第二行 $k$ 个自然数 $b_{1},b_{2},\\dots,b_{k}$。\n\n第三行 $k$ 个自然数 $c_{1},c_{2},\\dots,c_{k}$。\n\n第四行三个自然数 $m,n,p$。", "outputFormat": "一行一个正整数，表示 $\\sum_{i=m}^{n}{a_{i}} \\mod p$ 的值。", "hint": "对于 $20\\%$ 的数据，$n \\le 10^{6}$。\n\n对于另外 $30\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 15$，$1 \\le m \\le n \\le 10^{18}$，$0 \\le b_{i},c_{i} \\le 10^{9}$，$p \\le 10^{8}$。", "locale": "zh-CN"}}}
{"pid": "P2462", "type": "P", "difficulty": 6, "samples": [["ab\narc\narco\nbar\nbran\ncarbon\ncarbons\ncobra\ncrab\ncrayon\nnarc", "6\nab\nbar\ncrab\ncobra\ncarbon\ncarbons"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "各省省选", "山东", "Special Judge"], "title": "[SDOI2007] 游戏", "background": null, "description": "小木木和小凳子是两个聪明的孩子，他们五岁的时候就开始学习英语了。\n\n英语老师教他们玩一个很简单的游戏。老师给他们一张全小写并无特殊符号的英语单词表，单词表如下：\n\n$\\texttt{ab},\\texttt{arc},\\texttt{arco},\\texttt{bar},\\texttt{bran},\\texttt{carbon},\\texttt{carbons},\\texttt{cobra},\\texttt{crab},\\texttt{crayon},\\texttt{narc}$\n然后让他们从单词表里找词语接龙。接龙的规则如下:\n\n1. 前一个单词拥有的所有字母，在后一个单词里必须出现，而且字母出现次数不少于前一单词。\n\n2. 后一个单词的长度比前一个单词的长度恰好多 $1$\n\n对于以上例子，一合法的接龙为:\n\n$\\texttt{ab}$\\\n$\\texttt{bar}$\\\n$\\texttt{crab}$\\\n$\\texttt{cobra}$\\\n$\\texttt{carbon}$\\\n$\\texttt{carbons}$\n\n他们之中，谁接龙的长度长，谁就赢了。小木木肯定不想输，所以找到你，放肆撒娇，导致你因为不想再被打扰而帮他了。至于小凳子呢？？说不定找郭大牛去了。嘿嘿，你和郭大牛的编程比赛？？加油吧！！！", "inputFormat": "$n$（$1\\le n \\le 10000$）行，每行一个长度不超过 $100$ 的单词。", "outputFormat": "第一行，输出最大长度 $\\text{ans}$\n\n接下来的 $\\text{ans}$ 行，每行输出一个字符串代表你的方案。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] Game", "background": "# Description\n\nXiao Mumu and Xiao Dengzi are two smart kids who started learning English when they were five.\n\nTheir English teacher taught them a very simple game. The teacher gave them a list of English words, all in lowercase and without special symbols. The word list is as follows:\n\nab\narc\narco\nbar\nbran\ncarbon\ncarbons\n\ncobra\ncrab\ncrayon\nnarc\n\nThey are asked to find a word chain from the list. The rules of the chain are:\n\n1. Every letter that appears in the previous word must also appear in the next word, and the number of occurrences of each letter in the next word must be at least that in the previous word.\n\n2. The length of the next word must be exactly 1 more than the length of the previous word.\n\nFor the above example, a valid chain is:\n\nab\nbar\ncrab\ncobra\ncarbon\ncarbons\n\nWhoever makes a longer chain wins. Xiao Mumu definitely does not want to lose, so he comes to you and pesters you until you help him just to avoid being bothered. As for Xiao Dengzi? Maybe he went to find Guo Daniu. Hehe, a programming contest between you and Guo Daniu? Good luck!", "description": "Xiao Mumu and Xiao Dengzi are two smart kids who started learning English when they were five.\n\nTheir English teacher taught them a very simple game. The teacher gave them a list of English words, all in lowercase and without special symbols. The word list is as follows:\n\nab\narc\narco\nbar\nbran\ncarbon\ncarbons\n\ncobra\ncrab\ncrayon\nnarc\n\nThey are asked to find a word chain from the list. The rules of the chain are:\n\n1. Every letter that appears in the previous word must also appear in the next word, and the number of occurrences of each letter in the next word must be at least that in the previous word.\n\n2. The length of the next word must be exactly 1 more than the length of the previous word.\n\nFor the above example, a valid chain is:\n\nab\nbar\ncrab\ncobra\ncarbon\ncarbons\n\nWhoever makes a longer chain wins. Xiao Mumu definitely does not want to lose, so he comes to you and pesters you until you help him just to avoid being bothered. As for Xiao Dengzi? Maybe he went to find Guo Daniu. Hehe, a programming contest between you and Guo Daniu? Good luck!\n\n# Description", "inputFormat": "The first line contains an integer $n$ ($1 \\le n \\le 10000$).  \nEach of the next $n$ lines contains one word, with length at most $100$.", "outputFormat": "On the first line, output the maximum chain length $ans$.  \nOn each of the next $ans$ lines, output one word representing your chain.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 游戏", "background": null, "description": "小木木和小凳子是两个聪明的孩子，他们五岁的时候就开始学习英语了。\n\n英语老师教他们玩一个很简单的游戏。老师给他们一张全小写并无特殊符号的英语单词表，单词表如下：\n\n$\\texttt{ab},\\texttt{arc},\\texttt{arco},\\texttt{bar},\\texttt{bran},\\texttt{carbon},\\texttt{carbons},\\texttt{cobra},\\texttt{crab},\\texttt{crayon},\\texttt{narc}$\n然后让他们从单词表里找词语接龙。接龙的规则如下:\n\n1. 前一个单词拥有的所有字母，在后一个单词里必须出现，而且字母出现次数不少于前一单词。\n\n2. 后一个单词的长度比前一个单词的长度恰好多 $1$\n\n对于以上例子，一合法的接龙为:\n\n$\\texttt{ab}$\\\n$\\texttt{bar}$\\\n$\\texttt{crab}$\\\n$\\texttt{cobra}$\\\n$\\texttt{carbon}$\\\n$\\texttt{carbons}$\n\n他们之中，谁接龙的长度长，谁就赢了。小木木肯定不想输，所以找到你，放肆撒娇，导致你因为不想再被打扰而帮他了。至于小凳子呢？？说不定找郭大牛去了。嘿嘿，你和郭大牛的编程比赛？？加油吧！！！", "inputFormat": "$n$（$1\\le n \\le 10000$）行，每行一个长度不超过 $100$ 的单词。", "outputFormat": "第一行，输出最大长度 $\\text{ans}$\n\n接下来的 $\\text{ans}$ 行，每行输出一个字符串代表你的方案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2463", "type": "P", "difficulty": 6, "samples": [["2\n2 1 2\n3 4 5 9\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "二分", "各省省选", "山东", "哈希 hashing", "KMP 算法", "后缀数组 SA"], "title": "[SDOI2008] Sandy 的卡片", "background": "", "description": "Sandy 和 Sue 都热衷于收集干脆面中的卡片。\n\n然而，Sue 收集卡片是因为卡片上漂亮的人物形象，而 Sandy 则是为了积攒卡片兑换超炫的人物模型。\n\n每一张卡片都由一些数字进行标记，第 $i$ 张卡片的序列长度为 $M_i$，要想兑换人物模型，首先必须要集够 $N$ 张卡片，对于这 $N$ 张卡片，如果他们都有一个相同的子串长度为 $k$，则可以兑换一个等级为 $k$ 的人物模型。相同的定义为：两个子串长度相同且一个串的全部元素加上一个数就会变成另一个串。\n\nSandy 的卡片数远远小于要求的 $N$，于是 Sue 决定在 Sandy 的生日将自己的卡片送给 Sandy，在 Sue 的帮助下，Sandy 终于集够了 $N$ 张卡片，但是，Sandy 并不清楚他可以兑换到哪个等级的人物模型，现在，请你帮助 Sandy 和 Sue，看看他们最高能够得到哪个等级的人物模型。", "inputFormat": "第一行为一个数 $N$，表示可以兑换人物模型最少需要的卡片数，即 Sandy 现在有的卡片数。\n\n第 $i+1$ 行到第 $i+N$ 行每行第一个数为第 $i$ 张卡片序列的长度 $M_i$，之后 $j+1$ 到 $j+1+M_i$ 个数，用空格分隔，分别表示序列中的第 $j$ 个数。", "outputFormat": "一个数 $k$，表示可以获得的最高等级。", "hint": "$30\\%$ 的数据保证 $n\\le50$\n\n$100\\%$ 的数据保证 $n\\le1000,M\\le1000,2\\le M_i\\le101$\n\nupdate：题面上数据范围 $M_i$ 和 $M$ 的范围其实是一个东西… 真实数据范围: $40\\le n\\le1000,2\\le M_i\\le101$,字符串中的每个数字的大小范围为 $[0,1864]$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Sandy's Cards", "background": "", "description": "Sandy and Sue both love collecting cards from crispy noodle snacks.\n\nHowever, Sue collects cards for the beautiful characters on them, while Sandy collects them to exchange for super cool character figures.\n\nEach card is labeled with a sequence of numbers. The length of the sequence on the $i$-th card is $M_i$. To redeem a character figure, you must first collect $N$ cards. For these $N$ cards, if they all share a common contiguous subarray of length $k$, then you can redeem a figure of level $k$. Identical means: two substrings have the same length, and adding a number to every element of one substring will make it equal to the other.\n\nSandy has far fewer cards than the required $N$, so Sue decides to give her cards to Sandy for Sandy’s birthday. With Sue’s help, Sandy finally has $N$ cards. However, Sandy does not know which level of figure can be redeemed. Now, please help Sandy and Sue determine the highest level of figure they can get.", "inputFormat": "The first line contains an integer $N$, the minimum number of cards required to redeem a figure, i.e., the number of cards Sandy now has.\n\nFor each $i = 1, 2, \\dots, N$, the $(i+1)$-th line starts with the length $M_i$ of the $i$-th card’s sequence, followed by $M_i$ integers separated by spaces, where the $j$-th number is the $j$-th element in the sequence.", "outputFormat": "Output a single integer $k$, the maximum obtainable level.", "hint": "$30\\%$ of the testdata guarantee $n \\le 50$.\n\n$100\\%$ of the testdata guarantee $n \\le 1000, M \\le 1000, 2 \\le M_i \\le 101$.\n\nUpdate: In the statement, the Constraints for $M_i$ and $M$ are actually the same thing. True Constraints: $40 \\le n \\le 1000, 2 \\le M_i \\le 101$, and each number in the sequences is in the range $[0, 1864]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] Sandy 的卡片", "background": "", "description": "Sandy 和 Sue 都热衷于收集干脆面中的卡片。\n\n然而，Sue 收集卡片是因为卡片上漂亮的人物形象，而 Sandy 则是为了积攒卡片兑换超炫的人物模型。\n\n每一张卡片都由一些数字进行标记，第 $i$ 张卡片的序列长度为 $M_i$，要想兑换人物模型，首先必须要集够 $N$ 张卡片，对于这 $N$ 张卡片，如果他们都有一个相同的子串长度为 $k$，则可以兑换一个等级为 $k$ 的人物模型。相同的定义为：两个子串长度相同且一个串的全部元素加上一个数就会变成另一个串。\n\nSandy 的卡片数远远小于要求的 $N$，于是 Sue 决定在 Sandy 的生日将自己的卡片送给 Sandy，在 Sue 的帮助下，Sandy 终于集够了 $N$ 张卡片，但是，Sandy 并不清楚他可以兑换到哪个等级的人物模型，现在，请你帮助 Sandy 和 Sue，看看他们最高能够得到哪个等级的人物模型。", "inputFormat": "第一行为一个数 $N$，表示可以兑换人物模型最少需要的卡片数，即 Sandy 现在有的卡片数。\n\n第 $i+1$ 行到第 $i+N$ 行每行第一个数为第 $i$ 张卡片序列的长度 $M_i$，之后 $j+1$ 到 $j+1+M_i$ 个数，用空格分隔，分别表示序列中的第 $j$ 个数。", "outputFormat": "一个数 $k$，表示可以获得的最高等级。", "hint": "$30\\%$ 的数据保证 $n\\le50$\n\n$100\\%$ 的数据保证 $n\\le1000,M\\le1000,2\\le M_i\\le101$\n\nupdate：题面上数据范围 $M_i$ 和 $M$ 的范围其实是一个东西… 真实数据范围: $40\\le n\\le1000,2\\le M_i\\le101$,字符串中的每个数字的大小范围为 $[0,1864]$。\n", "locale": "zh-CN"}}}
{"pid": "P2464", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 5\nQ 1 3 2\nQ 1 3 1\nC 2 1\nQ 1 3 2\nQ 1 3 1\n", "1\n1\n0\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "莫队", "各省省选", "树状数组", "离散化", "山东", "树套树", "可持久化线段树", "分块", "离线处理"], "title": "[SDOI2008] 郁闷的小 J", "background": "", "description": "小 J 是国家图书馆的一位图书管理员，他的工作是管理一个巨大的书架。虽然他很能吃苦耐劳，但是由于这个书架十分巨大，所以他的工作效率总是很低，以致他面临着被解雇的危险，这也正是他所郁闷的。\n\n具体说来，书架由 $N$ 个书位组成，编号从 $1$ 到 $N$。每个书位放着一本书，每本书有一个特定的编码。\n\n小 J 的工作有两类：\n\n1. 图书馆经常购置新书，而书架任意时刻都是满的，所以只得将某位置的书拿掉并换成新购的书。\n\n2. 小 J 需要回答顾客的查询，顾客会询问某一段连续的书位中某一特定编码的书有多少本。\n\n例如，共 $5$ 个书位，开始时书位上的书编码为 $1, 2, 3, 4, 5$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$1$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$1$。\n\n此时，图书馆购进一本编码为“$1$”的书，并将它放到 $2$ 号书位。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$0$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$2$。\n\n……\n\n你的任务是写一个程序来回答每个顾客的询问。", "inputFormat": "第一行两个整数 $N, M$，表示一共 $N$ 个书位，$M$ 个操作。\n\n接下来一行共 $N$ 个整数数 $A_1, A_2, \\ldots , A_N$，$A_i$ 表示开始时位置 $i$ 上的书的编码。\n\n接下来 $M$ 行，每行表示一次操作，每行开头一个字符。\n\n若字符为 `C`，表示图书馆购进新书，后接两个整数 $A, P$（$1 \\le A \\le N$），表示这本书被放在位置 $A$ 上，以及这本书的编码为 $P$。\n\n若字符为 `Q`，表示一个顾客的查询，后接三个整数 $A, B, K$（$1 \\le A \\le B \\le N$），表示查询从第 $A$ 书位到第 $B$ 书位（包含 $A$ 和 $B$）中编码为 $K$ 的书共多少本。", "outputFormat": "对每一个顾客的查询，输出一个整数，表示顾客所要查询的结果。", "hint": "对于 $40 \\%$ 的数据，$1 \\le N, M \\le 5000$。\n\n对于 $100 \\%$ 的数据，$1 \\le N, M \\le {10}^5$。\n\n对于 $100 \\%$ 的数据，所有出现的书的编码为不大于 $2^{31} - 1$ 的正数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Depressed Little J", "background": "", "description": "Little J is a librarian at the National Library, and his job is to manage a huge bookshelf. Although he is diligent, the bookshelf is so large that his efficiency is always low, putting him at risk of being fired, which makes him depressed.\n\nSpecifically, the bookshelf consists of $N$ positions, numbered from $1$ to $N$. Each position holds one book, and each book has a specific code.\n\nLittle J’s job has two types:\n\n1. The library frequently purchases new books, and the shelf is always full at any time, so a book at some position has to be removed and replaced with the newly purchased one.\n\n2. Little J needs to answer customer queries. A customer will ask how many books with a given code appear in a certain contiguous segment of positions.\n\nFor example, there are $5$ positions, and initially the codes of the books on the positions are $1, 2, 3, 4, 5$.\n\nA customer asks how many books with code \"2\" are in positions $1$ to $3$. The answer is $1$.\n\nA customer asks how many books with code \"1\" are in positions $1$ to $3$. The answer is $1$.\n\nAt this point, the library purchases a book with code \"1\" and puts it at position $2$.\n\nA customer asks how many books with code \"2\" are in positions $1$ to $3$. The answer is $0$.\n\nA customer asks how many books with code \"1\" are in positions $1$ to $3$. The answer is $2$.\n\n...\n\nYour task is to write a program to answer each customer’s query.", "inputFormat": "The first line contains two integers $N, M$, meaning there are $N$ positions and $M$ operations.\n\nThe next line contains $N$ integers $A_1, A_2, \\ldots , A_N$, where $A_i$ is the code of the book initially at position $i$.\n\nThe next $M$ lines each represent an operation, and each line begins with a character.\n\nIf the character is `C`, it means the library purchases a new book, followed by two integers $A, P$ ($1 \\le A \\le N$), meaning the book is placed at position $A$, and its code is $P$.\n\nIf the character is `Q`, it represents a customer query, followed by three integers $A, B, K$ ($1 \\le A \\le B \\le N$), meaning to query how many books with code $K$ appear from position $A$ to position $B$ (inclusive).", "outputFormat": "For each customer query, output one integer representing the result of the query.", "hint": "For $40\\%$ of the testdata, $1 \\le N, M \\le 5000$.\n\nFor $100\\%$ of the testdata, $1 \\le N, M \\le {10}^5$.\n\nFor $100\\%$ of the testdata, all book codes that appear are positive integers not greater than $2^{31} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 郁闷的小 J", "background": "", "description": "小 J 是国家图书馆的一位图书管理员，他的工作是管理一个巨大的书架。虽然他很能吃苦耐劳，但是由于这个书架十分巨大，所以他的工作效率总是很低，以致他面临着被解雇的危险，这也正是他所郁闷的。\n\n具体说来，书架由 $N$ 个书位组成，编号从 $1$ 到 $N$。每个书位放着一本书，每本书有一个特定的编码。\n\n小 J 的工作有两类：\n\n1. 图书馆经常购置新书，而书架任意时刻都是满的，所以只得将某位置的书拿掉并换成新购的书。\n\n2. 小 J 需要回答顾客的查询，顾客会询问某一段连续的书位中某一特定编码的书有多少本。\n\n例如，共 $5$ 个书位，开始时书位上的书编码为 $1, 2, 3, 4, 5$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$1$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$1$。\n\n此时，图书馆购进一本编码为“$1$”的书，并将它放到 $2$ 号书位。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$0$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$2$。\n\n……\n\n你的任务是写一个程序来回答每个顾客的询问。", "inputFormat": "第一行两个整数 $N, M$，表示一共 $N$ 个书位，$M$ 个操作。\n\n接下来一行共 $N$ 个整数数 $A_1, A_2, \\ldots , A_N$，$A_i$ 表示开始时位置 $i$ 上的书的编码。\n\n接下来 $M$ 行，每行表示一次操作，每行开头一个字符。\n\n若字符为 `C`，表示图书馆购进新书，后接两个整数 $A, P$（$1 \\le A \\le N$），表示这本书被放在位置 $A$ 上，以及这本书的编码为 $P$。\n\n若字符为 `Q`，表示一个顾客的查询，后接三个整数 $A, B, K$（$1 \\le A \\le B \\le N$），表示查询从第 $A$ 书位到第 $B$ 书位（包含 $A$ 和 $B$）中编码为 $K$ 的书共多少本。", "outputFormat": "对每一个顾客的查询，输出一个整数，表示顾客所要查询的结果。", "hint": "对于 $40 \\%$ 的数据，$1 \\le N, M \\le 5000$。\n\n对于 $100 \\%$ 的数据，$1 \\le N, M \\le {10}^5$。\n\n对于 $100 \\%$ 的数据，所有出现的书的编码为不大于 $2^{31} - 1$ 的正数。", "locale": "zh-CN"}}}
{"pid": "P2465", "type": "P", "difficulty": 6, "samples": [["2 1\n1 2\n2 \n1\n1\n3 1 1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "山东", "O2优化", "枚举", "状压 DP"], "title": "[SDOI2008] 山贼集团", "background": "", "description": "某山贼集团在绿荫村拥有强大的势力。整个绿荫村由 $n$ 个连通的小村落组成，并且保证对于每两个小村落有且仅有一条简单路径相连。将小村落从 $1$ 至 $n$ 编号，山贼集团的总部设在编号为 $1$ 的小村落中。\n\n山贼集团除了老大坐镇总部以外，其他的 $p$ 个部门希望在村落的其他地方（洛谷注：其实也包括总部）建立分部。$p$ 个分部可以在同一个小村落中建设，也可以分别建设在不同的小村落中，在不同的村落建设不同的分部需要花费不同的费用。\n\n每个分部到总部的路径称为这个部门的管辖范围，于是这 $p$ 个分部的管辖范围可能重叠，或者完全相同。当多个分部管辖同一个村落时，他们之间可能发生矛盾，从而损失一部分利益，也可能相互合作，从而获取一部分利益。\n\n请注意，如果相同的分部同时管辖多个村落，那么对于每个村落，都会计算一次收益损失/获取。\n\n现在请你编写一个程序，确定 $p$ 个分部的位置，使得山贼集团能够获得最大的收益。", "inputFormat": "输入的第一行有两个整数，分别代表村落数 $n$ 和山贼集团部门数量 $p$。\n\n第 $2$ 到第 $n$ 行，每行有两个整数 $x, y$，代表存在一条连接村落 $x$ 和村落 $y$ 的道路。\n\n第 $(n + 1)$ 到第 $2n$ 行，每行 $p$ 个整数，第 $(i + n)$ 行的第 $j$ 个整数代表在第 $i$ 个村落建设第 $j$ 个部门的花费 $a_{i, j}$。\n\n第 $(2n + 1)$ 行有一个整数，代表集团间相互影响利益的信息条数 $t$。\n\n第 $(2n + 2)$ 行到第 $(2n + t + 1)$ 行，每行首先有一个整数 $v$，若 $v$ 为正，则表示会获得额外的收益，$v$ 为负则表示会有损失。然后有一个整数 $c$，代表涉及分部的数量。接下来有 $c$ 个整数，分别代表涉及的分部 $x_i$。本条信息的含义为若这 $c$ 个分部同时管辖某个小村落（可能同时存在其他分部管辖该村落），则会产生额外收益或损失，其数值大小为 $|v|$。", "outputFormat": "输出一行一个整数代表最大的收益。", "hint": "#### 样例输入输出 1 解释\n\n在 $2$ 号节点建立 $1$ 号分部，花费为 $1$，则分部集合 $\\{1\\}$ 可以管辖 $1, 2$ 两个节点，根据第一条信息，该集合每管辖一个节点会产生 $3$ 的收益，因此总共产生了 $2 \\times 3 = 6$ 的收益，减去建立分部的花费，最大的收益为 $6 - 1 = 5$。可以证明不存在更优的方案。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，保证 $1 \\leq p \\leq 6$。\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq p \\leq 12$，$1 \\leq n \\leq 100$。\n- $1 \\leq s,t \\leq n$，$1 \\leq a_{i, j} \\leq 10^8$。\n- $1 \\leq t \\leq 2^p$，$1 \\leq |v| \\leq 10^8$，$1 \\leq c \\leq p$，$1 \\leq x_i \\leq p$ 且 $x_i$ 互不相同。\n- 答案的绝对值不超过 $10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Bandit Group", "background": "", "description": "A bandit syndicate holds great power in Green Shade Village. The whole Green Shade Village consists of $n$ connected hamlets, and it is guaranteed that for any two hamlets there is exactly one simple path between them. The hamlets are numbered from $1$ to $n$, and the syndicate’s headquarters is located in hamlet $1$.\n\nBesides the boss stationed at the headquarters, the other $p$ departments want to establish branches elsewhere in the village (Luogu note: this actually also includes the headquarters). The $p$ branches can be built in the same hamlet or in different hamlets, and the cost of building different departments in different hamlets varies.\n\nThe path from each branch to the headquarters is defined as that department’s coverage. Therefore, the coverages of these $p$ branches may overlap or even be exactly the same. When multiple branches cover the same hamlet, conflicts may occur and cause some loss of profit, or cooperation may occur and generate some profit.\n\nPlease note that if the same set of branches simultaneously covers multiple hamlets, then the profit/loss for that set is counted once for each such hamlet.\n\nNow you are to write a program to determine the locations of the $p$ branches so that the syndicate’s profit is maximized.", "inputFormat": "- Line 1: Two integers $n$ and $p$, the number of hamlets and the number of departments.\n- Lines $2$ to $n$: Each line contains two integers $x, y$, indicating a road between hamlet $x$ and hamlet $y$.\n- Lines $(n + 1)$ to $2n$: Each line contains $p$ integers. On line $(i + n)$, the $j$-th integer is the cost $a_{i, j}$ of building department $j$ in hamlet $i$.\n- Line $(2n + 1)$: An integer $t$, the number of inter-department influence items.\n- Lines $(2n + 2)$ to $(2n + t + 1)$: Each line starts with an integer $v$; if $v$ is positive, extra profit is gained, and if $v$ is negative, a loss occurs. Then an integer $c$, the number of involved departments. Then $c$ integers, the involved departments $x_i$. The meaning is: if these $c$ departments simultaneously cover some hamlet (possibly along with other departments also covering that hamlet), then an extra profit or loss of $|v|$ is applied for each such hamlet.", "outputFormat": "Output a single integer, the maximum achievable profit.", "hint": "Explanation for Sample 1:\n\nIf department $1$ is built at node $2$, the cost is $1$. Then the set of branches $\\{1\\}$ covers nodes $1$ and $2$. According to the first influence item, this set yields a profit of $3$ per covered node, so the total profit is $2 \\times 3 = 6$. Subtracting the building cost, the maximum profit is $6 - 1 = 5$. It can be proven that no better plan exists.\n\nConstraints:\n\n- For $40\\%$ of the testdata, $1 \\leq p \\leq 6$.\n- For $100\\%$ of the testdata, it is guaranteed that:\n  - $1 \\leq p \\leq 12$, $1 \\leq n \\leq 100$.\n  - $1 \\leq a_{i, j} \\leq 10^8$.\n  - $1 \\leq t \\leq 2^p$, $1 \\leq |v| \\leq 10^8$, $1 \\leq c \\leq p$, $1 \\leq x_i \\leq p$, and the $x_i$ are pairwise distinct.\n  - The absolute value of the answer does not exceed $10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 山贼集团", "background": "", "description": "某山贼集团在绿荫村拥有强大的势力。整个绿荫村由 $n$ 个连通的小村落组成，并且保证对于每两个小村落有且仅有一条简单路径相连。将小村落从 $1$ 至 $n$ 编号，山贼集团的总部设在编号为 $1$ 的小村落中。\n\n山贼集团除了老大坐镇总部以外，其他的 $p$ 个部门希望在村落的其他地方（洛谷注：其实也包括总部）建立分部。$p$ 个分部可以在同一个小村落中建设，也可以分别建设在不同的小村落中，在不同的村落建设不同的分部需要花费不同的费用。\n\n每个分部到总部的路径称为这个部门的管辖范围，于是这 $p$ 个分部的管辖范围可能重叠，或者完全相同。当多个分部管辖同一个村落时，他们之间可能发生矛盾，从而损失一部分利益，也可能相互合作，从而获取一部分利益。\n\n请注意，如果相同的分部同时管辖多个村落，那么对于每个村落，都会计算一次收益损失/获取。\n\n现在请你编写一个程序，确定 $p$ 个分部的位置，使得山贼集团能够获得最大的收益。", "inputFormat": "输入的第一行有两个整数，分别代表村落数 $n$ 和山贼集团部门数量 $p$。\n\n第 $2$ 到第 $n$ 行，每行有两个整数 $x, y$，代表存在一条连接村落 $x$ 和村落 $y$ 的道路。\n\n第 $(n + 1)$ 到第 $2n$ 行，每行 $p$ 个整数，第 $(i + n)$ 行的第 $j$ 个整数代表在第 $i$ 个村落建设第 $j$ 个部门的花费 $a_{i, j}$。\n\n第 $(2n + 1)$ 行有一个整数，代表集团间相互影响利益的信息条数 $t$。\n\n第 $(2n + 2)$ 行到第 $(2n + t + 1)$ 行，每行首先有一个整数 $v$，若 $v$ 为正，则表示会获得额外的收益，$v$ 为负则表示会有损失。然后有一个整数 $c$，代表涉及分部的数量。接下来有 $c$ 个整数，分别代表涉及的分部 $x_i$。本条信息的含义为若这 $c$ 个分部同时管辖某个小村落（可能同时存在其他分部管辖该村落），则会产生额外收益或损失，其数值大小为 $|v|$。", "outputFormat": "输出一行一个整数代表最大的收益。", "hint": "#### 样例输入输出 1 解释\n\n在 $2$ 号节点建立 $1$ 号分部，花费为 $1$，则分部集合 $\\{1\\}$ 可以管辖 $1, 2$ 两个节点，根据第一条信息，该集合每管辖一个节点会产生 $3$ 的收益，因此总共产生了 $2 \\times 3 = 6$ 的收益，减去建立分部的花费，最大的收益为 $6 - 1 = 5$。可以证明不存在更优的方案。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，保证 $1 \\leq p \\leq 6$。\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq p \\leq 12$，$1 \\leq n \\leq 100$。\n- $1 \\leq s,t \\leq n$，$1 \\leq a_{i, j} \\leq 10^8$。\n- $1 \\leq t \\leq 2^p$，$1 \\leq |v| \\leq 10^8$，$1 \\leq c \\leq p$，$1 \\leq x_i \\leq p$ 且 $x_i$ 互不相同。\n- 答案的绝对值不超过 $10^8$。", "locale": "zh-CN"}}}
{"pid": "P2466", "type": "P", "difficulty": 5, "samples": [["3 0\n-4 -2 2\n22 30 26\n1 9 8\n", "0.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2008", "各省省选", "山东", "区间 DP"], "title": "[SDOI2008] Sue 的小球", "background": null, "description": "Sue 和 Sandy 最近迷上了一个电脑游戏，这个游戏的故事发在美丽神秘并且充满刺激的大海上，Sue 有一支轻便小巧的小船。然而，Sue 的目标并不是当一个海盗，而是要收集空中漂浮的彩蛋，Sue 有一个秘密武器，只要她将小船划到一个彩蛋的**正下方或正上方**，然后使用秘密武器便可以在瞬间收集到这个彩蛋。然而，彩蛋有一个魅力值，这个魅力值会随着彩蛋在空中降落的时间而降低，Sue 要想得到更多的分数，必须尽量在魅力值高的时候收集这个彩蛋，而如果一个彩蛋掉入海中，它的魅力值将会变成一个负数，但这并不影响 Sue 的兴趣，因为每一个彩蛋都是不同的，Sue 希望收集到所有的彩蛋。\n\n然而 Sandy 就没有 Sue 那么浪漫了，Sandy 希望得到尽可能多的分数，为了解决这个问题，他先将这个游戏抽象成了如下模型：\n\n将大海近似的看做 $x$ 轴建立一个竖直的平面直角坐标系，Sue 所在的初始位置在 $x$ 轴上。\n\n一开始空中有 $N$ 个彩蛋，对于第 $i$ 个彩蛋，他的初始位置用整数坐标 $(x_{i}, y_{i})$ 表示，游戏开始后，它匀速沿 $y$ 轴负方向下落,速度为 $v_{i}$ 单位距离/单位时间。Sue 的初始位置为 $(x_{0}, 0)$，Sue 可以沿 $x$ 轴的正方向或负方向移动，Sue 的移动速度是 $1$ 单位距离/单位时间，使用秘密武器得到一个彩蛋是瞬间的，得分为当前彩蛋的 $y$ 坐标的千分之一。\n\n现在，Sue 和 Sandy 请你来帮忙，为了满足 Sue 和 Sandy 各自的目标，你决定在收集到所有彩蛋的基础上，得到的分数最高。", "inputFormat": "第一行为两个整数 $N$, $x_{0}$ 用一个空格分隔，表示彩蛋个数与 Sue 的初始位置。\n\n第二行为 $N$ 个整数 $x_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始横坐标。\n\n第三行为 $N$ 个整数 $y_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始纵坐标。\n\n第四行为 $N$ 个整数 $v_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋匀速沿 $y$ 轴负方向下落的的速度。", "outputFormat": "一个实数，保留三位小数，为收集所有彩蛋的基础上，可以得到最高的分数。", "hint": "对于 $30\\%$ 的数据， $N\\leq 20$。\n\n对于 $60\\%$ 的数据， $N\\leq 100$。\n\n对于 $100\\%$ 的数据，$-10^4 \\leq x_{i},y_{i} \\leq 10^4$，$0\\leq v_{i} \\leq 10^4$，$N \\leq 1000$", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Sue's Little Balls", "background": "", "description": "Sue and Sandy have recently become obsessed with a computer game. The story takes place above a beautiful, mysterious, and thrilling sea. Sue has a small, light boat. However, her goal is not to be a pirate, but to collect colorful eggs floating in the air. Sue has a secret weapon: as long as she rows her boat to a position directly beneath an egg and uses the secret weapon, she can collect that egg instantly. Each egg has a charm value that decreases as the egg falls in the air over time. To score more points, Sue must collect the egg when its charm value is high. If an egg falls into the sea, its charm value becomes a negative number, but that does not dampen Sue's interest, because each egg is unique, and Sue hopes to collect them all.\n\nSandy is not as romantic as Sue. He wants to get as many points as possible. To solve this, he abstracts the game into the following model:\n\nApproximate the sea surface as the $x$-axis and set up a vertical Cartesian coordinate plane. Sue's initial position is on the $x$-axis.\n\nInitially there are $N$ eggs in the air. For the $i$-th egg, its initial position is the integer coordinate $(x_{i}, y_{i})$. After the game starts, it falls uniformly along the negative $y$-axis with speed $v_{i}$ units of distance per unit time. Sue's initial position is $(x_{0}, 0)$. Sue can move along the positive or negative direction of the $x$-axis, at speed $1$ unit of distance per unit time. Collecting an egg with the secret weapon is instantaneous, and the score equals one-thousandth of the egg's current $y$-coordinate.\n\nNow, Sue and Sandy ask for your help. To satisfy both of their goals, you decide to collect all the eggs while achieving the highest possible total score.", "inputFormat": "The first line contains two integers $N$, $x_{0}$ separated by a space, representing the number of eggs and Sue's initial position.\n\nThe second line contains $N$ integers $x_{i}$ separated by spaces. The $i$-th number is the initial $x$-coordinate of the $i$-th egg.\n\nThe third line contains $N$ integers $y_{i}$ separated by spaces. The $i$-th number is the initial $y$-coordinate of the $i$-th egg.\n\nThe fourth line contains $N$ integers $v_{i}$ separated by spaces. The $i$-th number is the speed at which the $i$-th egg falls uniformly along the negative $y$-axis.", "outputFormat": "Output a real number, rounded to three decimal places: the maximum score achievable while collecting all the eggs.", "hint": "For 30% of the testdata, $N \\leq 20$.\n\nFor 60% of the testdata, $N \\leq 100$.\n\nConstraints: for 100% of the testdata, $-10^4 \\leq x_{i}, y_{i} \\leq 10^4$, $0 \\leq v_{i} \\leq 10^4$, $N \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] Sue 的小球", "background": null, "description": "Sue 和 Sandy 最近迷上了一个电脑游戏，这个游戏的故事发在美丽神秘并且充满刺激的大海上，Sue 有一支轻便小巧的小船。然而，Sue 的目标并不是当一个海盗，而是要收集空中漂浮的彩蛋，Sue 有一个秘密武器，只要她将小船划到一个彩蛋的**正下方或正上方**，然后使用秘密武器便可以在瞬间收集到这个彩蛋。然而，彩蛋有一个魅力值，这个魅力值会随着彩蛋在空中降落的时间而降低，Sue 要想得到更多的分数，必须尽量在魅力值高的时候收集这个彩蛋，而如果一个彩蛋掉入海中，它的魅力值将会变成一个负数，但这并不影响 Sue 的兴趣，因为每一个彩蛋都是不同的，Sue 希望收集到所有的彩蛋。\n\n然而 Sandy 就没有 Sue 那么浪漫了，Sandy 希望得到尽可能多的分数，为了解决这个问题，他先将这个游戏抽象成了如下模型：\n\n将大海近似的看做 $x$ 轴建立一个竖直的平面直角坐标系，Sue 所在的初始位置在 $x$ 轴上。\n\n一开始空中有 $N$ 个彩蛋，对于第 $i$ 个彩蛋，他的初始位置用整数坐标 $(x_{i}, y_{i})$ 表示，游戏开始后，它匀速沿 $y$ 轴负方向下落,速度为 $v_{i}$ 单位距离/单位时间。Sue 的初始位置为 $(x_{0}, 0)$，Sue 可以沿 $x$ 轴的正方向或负方向移动，Sue 的移动速度是 $1$ 单位距离/单位时间，使用秘密武器得到一个彩蛋是瞬间的，得分为当前彩蛋的 $y$ 坐标的千分之一。\n\n现在，Sue 和 Sandy 请你来帮忙，为了满足 Sue 和 Sandy 各自的目标，你决定在收集到所有彩蛋的基础上，得到的分数最高。", "inputFormat": "第一行为两个整数 $N$, $x_{0}$ 用一个空格分隔，表示彩蛋个数与 Sue 的初始位置。\n\n第二行为 $N$ 个整数 $x_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始横坐标。\n\n第三行为 $N$ 个整数 $y_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始纵坐标。\n\n第四行为 $N$ 个整数 $v_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋匀速沿 $y$ 轴负方向下落的的速度。", "outputFormat": "一个实数，保留三位小数，为收集所有彩蛋的基础上，可以得到最高的分数。", "hint": "对于 $30\\%$ 的数据， $N\\leq 20$。\n\n对于 $60\\%$ 的数据， $N\\leq 100$。\n\n对于 $100\\%$ 的数据，$-10^4 \\leq x_{i},y_{i} \\leq 10^4$，$0\\leq v_{i} \\leq 10^4$，$N \\leq 1000$", "locale": "zh-CN"}}}
{"pid": "P2467", "type": "P", "difficulty": 5, "samples": [["4 7", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2010", "各省省选", "离散化", "山东"], "title": "[SDOI2010] 地精部落", "background": "", "description": "传说很久以前，大地上居住着一种神秘的生物：地精。\n\n地精喜欢住在连绵不绝的山脉中。具体地说，一座长度为 $n$ 的山脉 $h$ 可分为从左到右的 $n$ 段，每段有一个**独一无二**的高度 $h_i$，其中 $h_i$ 是 $1$ 到 $n$ 之间的正整数。\n\n如果一段山脉比所有与它相邻的山脉都高，则这段山脉是一个山峰。位于边缘的山脉只有一段相邻的山脉，其他都有两段（即左边和右边）。\n\n类似地，如果一段山脉比所有它相邻的山脉都低，则这段山脉是一个山谷。\n\n地精们有一个共同的爱好——饮酒，酒馆可以设立在山谷之中。地精的酒馆不论白天黑夜总是人声鼎沸，地精美酒的香味可以飘到方圆数里的地方。\n\n地精还是一种非常警觉的生物，他们在每座山峰上都可以设立瞭望台，并轮流担当瞭望工作，以确保在第一时间得知外敌的入侵。\n\n地精们希望这 $n$ 段山脉每段都可以修建瞭望台或酒馆的其中之一，只有满足这个条件的整座山脉才可能有地精居住。\n\n现在你希望知道，长度为 $n$ 的可能有地精居住的山脉有多少种。两座山脉 $a$ 和 $b$ 不同当且仅当存在一个 $i$，使得 $a_i\\ne b_i$。由于这个数目可能很大，你只对它除以 $p$ 的余数感兴趣。", "inputFormat": "一行，两个正整数 $n,p$。\n", "outputFormat": "一个非负整数，表示你所求的答案对 $p$ 取余之后的结果。\n", "hint": "共有 $10$ 种可能的山脉，它们是：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh1bw5gr.png)\n\n其中标记的数字表示可以设立瞭望台的山峰，其它表示可以设立酒馆的山谷。\n\n**【数据规模和约定】**\n\n对于 $20\\%$ 的数据，满足 $N \\le 10$；\n\n对于 $40\\%$ 的数据，满足 $N \\le 18$；\n\n对于 $70\\%$ 的数据，满足 $N \\le 550$；\n\n对于 $100\\%$ 的数据，满足 $3 \\le N \\le 4200$，$P \\le 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Goblin Tribe", "background": "", "description": "Legend has it that a long time ago, there lived a mysterious creature on the earth: the goblin.\n\nGoblins like to live in continuous mountain ranges. Specifically, a mountain range $h$ of length $n$ can be divided from left to right into $n$ segments, each with a unique height $h_i$, where $h_i$ is a positive integer between $1$ and $n$.\n\nIf a segment is higher than all of its adjacent segments, then this segment is a peak. A segment at the edge has only one adjacent segment; all others have two (i.e., one on the left and one on the right).\n\nSimilarly, if a segment is lower than all of its adjacent segments, then this segment is a valley.\n\nGoblins share a hobby—drinking, and taverns can be set up in valleys. Goblin taverns are always bustling day and night, and the aroma of goblin wine can spread for miles.\n\nGoblins are also highly alert. They can set up watchtowers on every peak and take turns on watch to ensure they learn of any invasion at the first moment.\n\nThe goblins hope that each of the $n$ segments can have either a watchtower or a tavern. Only a mountain range that satisfies this condition could be inhabited by goblins.\n\nNow you want to know how many mountain ranges of length $n$ could possibly be inhabited by goblins. Two mountain ranges $a$ and $b$ are different if and only if there exists an $i$ such that $a_i \\ne b_i$. Since this number can be large, you are only interested in its remainder modulo $p$.", "inputFormat": "One line with two positive integers $n, p$.", "outputFormat": "A non-negative integer, the result of the required answer modulo $p$.", "hint": "There are $10$ possible mountain ranges, which are:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh1bw5gr.png)\n\nThe marked numbers indicate peaks where watchtowers can be set up; the others indicate valleys where taverns can be set up.\n\nConstraints\n\n- For $20\\%$ of the testdata, $N \\le 10$.\n- For $40\\%$ of the testdata, $N \\le 18$.\n- For $70\\%$ of the testdata, $N \\le 550$.\n- For $100\\%$ of the testdata, $3 \\le N \\le 4200$, $P \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 地精部落", "background": "", "description": "传说很久以前，大地上居住着一种神秘的生物：地精。\n\n地精喜欢住在连绵不绝的山脉中。具体地说，一座长度为 $n$ 的山脉 $h$ 可分为从左到右的 $n$ 段，每段有一个**独一无二**的高度 $h_i$，其中 $h_i$ 是 $1$ 到 $n$ 之间的正整数。\n\n如果一段山脉比所有与它相邻的山脉都高，则这段山脉是一个山峰。位于边缘的山脉只有一段相邻的山脉，其他都有两段（即左边和右边）。\n\n类似地，如果一段山脉比所有它相邻的山脉都低，则这段山脉是一个山谷。\n\n地精们有一个共同的爱好——饮酒，酒馆可以设立在山谷之中。地精的酒馆不论白天黑夜总是人声鼎沸，地精美酒的香味可以飘到方圆数里的地方。\n\n地精还是一种非常警觉的生物，他们在每座山峰上都可以设立瞭望台，并轮流担当瞭望工作，以确保在第一时间得知外敌的入侵。\n\n地精们希望这 $n$ 段山脉每段都可以修建瞭望台或酒馆的其中之一，只有满足这个条件的整座山脉才可能有地精居住。\n\n现在你希望知道，长度为 $n$ 的可能有地精居住的山脉有多少种。两座山脉 $a$ 和 $b$ 不同当且仅当存在一个 $i$，使得 $a_i\\ne b_i$。由于这个数目可能很大，你只对它除以 $p$ 的余数感兴趣。", "inputFormat": "一行，两个正整数 $n,p$。\n", "outputFormat": "一个非负整数，表示你所求的答案对 $p$ 取余之后的结果。\n", "hint": "共有 $10$ 种可能的山脉，它们是：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh1bw5gr.png)\n\n其中标记的数字表示可以设立瞭望台的山峰，其它表示可以设立酒馆的山谷。\n\n**【数据规模和约定】**\n\n对于 $20\\%$ 的数据，满足 $N \\le 10$；\n\n对于 $40\\%$ 的数据，满足 $N \\le 18$；\n\n对于 $70\\%$ 的数据，满足 $N \\le 550$；\n\n对于 $100\\%$ 的数据，满足 $3 \\le N \\le 4200$，$P \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2468", "type": "P", "difficulty": 6, "samples": [["5 5 7\n14 15 9 26 53\n58 9 7 9 32\n38 46 26 43 38\n32 7 9 50 28\n8 41 9 7 17\n1 2 5 3 139\n3 1 5 5 399\n3 3 4 5 91\n4 1 4 1 33\n1 3 5 4 185\n3 3 4 3 23\n3 1 3 3 108", "6\n15\n2\nPoor QLW\n9\n1\n3"], ["1 10 7\n14 15 9 26 53 58 9 7 9 32\n1 2 1 9 170\n1 2 1 9 171\n1 5 1 7 115\n1 1 1 10 228\n1 4 1 4 45704571\n1 1 1 1 1\n1 7 1 8 16", "6\n7\n3\n10\nPoor QLW\n1\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2010", "二分", "各省省选", "山东", "枚举", "可持久化线段树"], "title": "[SDOI2010] 粟粟的书架", "background": "", "description": "幸福幼儿园 B29 班的粟粟是一个聪明机灵、乖巧可爱的小朋友，她的爱好是画画和读书，尤其喜欢 Thomas H. Cormen 的文章。粟粟家中有一个 $R$ 行 $C$ 列的巨型书架，书架的每一个位置都摆有一本书，上数第 $i$ 行、左数第 $j$ 列摆放的书有 $P_{i,j}$ 页厚。\n\n粟粟每天除了读书之外，还有一件必不可少的工作就是摘苹果，她每天必须摘取一个指定的苹果。粟粟家果树上的苹果有的高、有的低，但无论如何凭粟粟自己的个头都难以摘到。不过她发现，如果在脚下放上几本书，就可以够着苹果；她同时注意到，对于第 $i$ 天指定的那个苹果，只要她脚下放置书的总页数之和不低于 $H_i$，就一定能够摘到。\n\n由于书架内的书过多，父母担心粟粟一天内就把所有书看完而耽误了上幼儿园，于是每天只允许粟粟在一个特定区域内拿书。这个区域是一个矩形，第 $i$ 天给定区域的左上角是上数第$x1_i$ 行的左数第 $y1_i$ 本书，右下角是上数第 $x2_i$ 行的左数第 $y2_i$ 本书。换句话说，粟粟在这一天，只能在这 $(x2_i－x1_i＋1)\\times(y2_i－y1_i＋1)$ 本书中挑选若干本垫在脚下，摘取苹果。\n\n粟粟每次取书时都能及时放回原位，并且她的书架不会再撤下书目或换上新书，摘苹果的任务会一直持续 $M$ 天。给出每本书籍的页数和每天的区域限制及采摘要求，请你告诉粟粟，她每天至少拿取多少本书，就可以摘到当天指定的苹果。\n", "inputFormat": "第一行是三个正整数 $R, C, M$。\n\n接下来是一个 $R$ 行 $C$ 列的矩阵，从上到下、从左向右依次给出了每本书的页数 $P_{i,j}$。\n\n接下来 $M$ 行，第 $i$ 行给出正整数 $x1_i, y1_i, x2_i, y2_i, H_i$，表示第 $i$ 天的指定区域是 $(x1_i, y1_i)$ 与 $(x2_i, y2_i)$ 间的矩形，总页数之和要求不低于Hi。\n\n保证 $1\\le x1_i\\le x2_i\\le R$，$1\\le y1_i\\le y2_i\\le C$。\n", "outputFormat": "输出共 $M$ 行，第 $i$ 行回答粟粟在第 $i$ 天时为摘到苹果至少需要拿取多少本书。如果即使取走所有书都无法摘到苹果，则在该行输出 `Poor QLW`。\n", "hint": "对于 $10\\%$ 的数据，满足 $R, C\\le10$。\n\n对于 $20\\%$ 的数据，满足 $R, C\\le 40$。\n\n对于 $50\\%$ 的数据，满足 $R, C\\le 200$，$M\\le 2\\times 10^5$。\n\n另有 $50\\%$ 的数据，满足 $R＝1$，$C\\le 5\\times 10^5$，$M\\le 2\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\le P_{i,j}\\le 1000$，$1\\le H_i\\le 2\\times 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Susu's Bookshelf", "background": "", "description": "Susu from Class B29 of Xingfu Kindergarten is a smart, obedient, and adorable child. Her hobbies are drawing and reading, and she especially likes the articles by Thomas H. Cormen. Susu’s home has a giant bookshelf with $R$ rows and $C$ columns, with one book at every position. The book at the $i$-th row from the top and the $j$-th column from the left has $P_{i,j}$ pages.\n\nBesides reading, Susu has another essential daily task: picking apples. Each day she must pick a specific apple. The apples on her family’s trees are at various heights, and she cannot reach them on her own. However, she found that if she stands on some books, she can reach the apples. She also noticed that for the apple designated on day $i$, as long as the total number of pages of the books under her feet is at least $H_i$, she will definitely be able to pick it.\n\nBecause there are too many books, her parents worry she might finish reading all of them in one day and be late for kindergarten, so each day they only allow her to take books from a specific region. This region is a rectangle: on day $i$, the top-left corner is the book at row $x1_i$ and column $y1_i$, and the bottom-right corner is the book at row $x2_i$ and column $y2_i$. In other words, on that day, she can only select some books from these $(x2_i - x1_i + 1) \\times (y2_i - y1_i + 1)$ books to stand on and pick the apple.\n\nEach time Susu takes books, she returns them promptly to their original places, and the bookshelf will not have books removed or added. The apple-picking task continues for $M$ days. Given the number of pages of each book, the daily region restrictions, and the picking requirement, please tell Susu the minimum number of books she must take each day to pick the specified apple.", "inputFormat": "The first line contains three positive integers $R, C, M$.\n\nNext is a matrix with $R$ rows and $C$ columns. From top to bottom and left to right, it gives the number of pages $P_{i,j}$ of each book.\n\nThen follow $M$ lines. The $i$-th line contains five positive integers $x1_i, y1_i, x2_i, y2_i, H_i$, meaning that on day $i$ the designated region is the rectangle between $(x1_i, y1_i)$ and $(x2_i, y2_i)$, and the required total number of pages is at least $H_i$.\n\nIt is guaranteed that $1 \\le x1_i \\le x2_i \\le R$ and $1 \\le y1_i \\le y2_i \\le C$.", "outputFormat": "Output $M$ lines. On the $i$-th line, print the minimum number of books Susu needs on day $i$ to pick the apple. If she cannot pick the apple even by taking all books in the region, print `Poor QLW`.", "hint": "For $10\\%$ of the testdata, $R, C \\le 10$.\n\nFor $20\\%$ of the testdata, $R, C \\le 40$.\n\nFor $50\\%$ of the testdata, $R, C \\le 200$, $M \\le 2 \\times 10^5$.\n\nAdditionally, for $50\\%$ of the testdata, $R = 1$, $C \\le 5 \\times 10^5$, $M \\le 2 \\times 10^4$.\n\nFor $100\\%$ of the testdata, $1 \\le P_{i,j} \\le 1000$, $1 \\le H_i \\le 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 粟粟的书架", "background": "", "description": "幸福幼儿园 B29 班的粟粟是一个聪明机灵、乖巧可爱的小朋友，她的爱好是画画和读书，尤其喜欢 Thomas H. Cormen 的文章。粟粟家中有一个 $R$ 行 $C$ 列的巨型书架，书架的每一个位置都摆有一本书，上数第 $i$ 行、左数第 $j$ 列摆放的书有 $P_{i,j}$ 页厚。\n\n粟粟每天除了读书之外，还有一件必不可少的工作就是摘苹果，她每天必须摘取一个指定的苹果。粟粟家果树上的苹果有的高、有的低，但无论如何凭粟粟自己的个头都难以摘到。不过她发现，如果在脚下放上几本书，就可以够着苹果；她同时注意到，对于第 $i$ 天指定的那个苹果，只要她脚下放置书的总页数之和不低于 $H_i$，就一定能够摘到。\n\n由于书架内的书过多，父母担心粟粟一天内就把所有书看完而耽误了上幼儿园，于是每天只允许粟粟在一个特定区域内拿书。这个区域是一个矩形，第 $i$ 天给定区域的左上角是上数第$x1_i$ 行的左数第 $y1_i$ 本书，右下角是上数第 $x2_i$ 行的左数第 $y2_i$ 本书。换句话说，粟粟在这一天，只能在这 $(x2_i－x1_i＋1)\\times(y2_i－y1_i＋1)$ 本书中挑选若干本垫在脚下，摘取苹果。\n\n粟粟每次取书时都能及时放回原位，并且她的书架不会再撤下书目或换上新书，摘苹果的任务会一直持续 $M$ 天。给出每本书籍的页数和每天的区域限制及采摘要求，请你告诉粟粟，她每天至少拿取多少本书，就可以摘到当天指定的苹果。\n", "inputFormat": "第一行是三个正整数 $R, C, M$。\n\n接下来是一个 $R$ 行 $C$ 列的矩阵，从上到下、从左向右依次给出了每本书的页数 $P_{i,j}$。\n\n接下来 $M$ 行，第 $i$ 行给出正整数 $x1_i, y1_i, x2_i, y2_i, H_i$，表示第 $i$ 天的指定区域是 $(x1_i, y1_i)$ 与 $(x2_i, y2_i)$ 间的矩形，总页数之和要求不低于Hi。\n\n保证 $1\\le x1_i\\le x2_i\\le R$，$1\\le y1_i\\le y2_i\\le C$。\n", "outputFormat": "输出共 $M$ 行，第 $i$ 行回答粟粟在第 $i$ 天时为摘到苹果至少需要拿取多少本书。如果即使取走所有书都无法摘到苹果，则在该行输出 `Poor QLW`。\n", "hint": "对于 $10\\%$ 的数据，满足 $R, C\\le10$。\n\n对于 $20\\%$ 的数据，满足 $R, C\\le 40$。\n\n对于 $50\\%$ 的数据，满足 $R, C\\le 200$，$M\\le 2\\times 10^5$。\n\n另有 $50\\%$ 的数据，满足 $R＝1$，$C\\le 5\\times 10^5$，$M\\le 2\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\le P_{i,j}\\le 1000$，$1\\le H_i\\le 2\\times 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2469", "type": "P", "difficulty": 6, "samples": [["3 3\r\n1 100 100\r\n2 1 10\r\n1 3 1\r\n2 3 1", "12"], ["3 3\r\n1 2 3\r\n1 2 100\r\n1 3 100\r\n2 3 100", "6"], ["4 5\r\n100 1000 10 100\r\n1 2 100\r\n2 3 100\r\n4 3 100\r\n1 3 20\r\n2 4 20", "230"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "网络流", "山东", "费用流"], "title": "[SDOI2010] 星际竞速", "background": null, "description": "10 年一度的银河系赛车大赛又要开始了。作为全银河最盛大的活动之一，夺得这个项目的冠军无疑是很多人的梦想，来自杰森座 $\\alpha$ 星的悠悠也是其中之一。\n\n赛车大赛的赛场由 $N$ 颗行星和 $M$ 条双向星际航路构成，其中每颗行星都有一个不同的引力值。大赛要求车手们从一颗与这 $N$ 颗行星之间没有任何航路的天体出发，访问这 $N$ 颗行星每颗恰好一次，首先完成这一目标的人获得胜利。\n\n由于赛制非常开放，很多人驾驶着千奇百怪的自制赛车来参赛。这次悠悠驾驶的赛车名为超能电驴，这是一部凝聚了全银河最尖端科技结晶的梦幻赛车。作为最高科技的产物，超能电驴有两种移动模式：高速航行模式和能力爆发模式。在高速航行模式下，超能电驴会展开反物质引擎，以数倍于光速的速度沿星际航路高速航行。在能力爆发模式下，超能电驴脱离时空的束缚，使用超能力进行空间跳跃——在经过一段时间的定位之后，它能瞬间移动到任意一个行星。\n\n天不遂人愿，在比赛的前一天，超能电驴在一场离子风暴中不幸受损，机能出现了一些障碍：在使用高速航行模式的时候，只能由每个星球飞往引力比它大的星球，否则赛车就会发生爆炸。\n\n尽管心爱的赛车出了问题，但是悠悠仍然坚信自己可以取得胜利。他找到了全银河最聪明的贤者——你，请你为他安排一条比赛的方案，使得他能够用最少的时间完成比赛。", "inputFormat": "输入文件 starrace.in 的第一行是两个正整数 $N, M$。\n\n第二行 $N$ 个数 $A_1,\\cdots,A_N$，其中 $A_i$ 表示使用能力爆发模式到达行星 $i$ 所需的定位时间。\n\n接下来 $M$ 行，每行 $3$ 个正整数 $u_i, v_i, w_i$，表示在编号为 $u_i$ 和 $v_i$ 的行星之间存在一条需要航行 $w_i$ 时间的星际航路。\n\n输入数据已经按引力值排序，也就是编号小的行星引力值一定小，且不会有两颗行星引力值相同。", "outputFormat": "输出文件 starrace.out 仅包含一个正整数，表示完成比赛所需的最少时间。", "hint": "样例一说明：先使用能力爆发模式到行星 $1$，花费时间 $1$。\n\n然后切换到高速航行模式，航行到行星 $2$，花费时间 $10$。\n\n之后继续航行到行星 $3$ 完成比赛，花费时间 $1$。\n\n虽然看起来从行星 $1$ 到行星 $3$ 再到行星 $2$ 更优，但我们却不能那样做，因为那会导致超能电驴爆炸。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据 $N\\leq 20$，$M\\leq 50$；\n\n对于 $70\\%$ 的数据 $N\\leq 200$，$M\\leq 4\\times 10^3$；\n\n对于 $100\\%$ 的数据 $N\\leq 800$，$M\\leq 1.5\\times 10^4$。\n\n输入数据中的任何数都在 $1 \\sim 10^6$ 之间。\n\n输入数据保证任意两颗行星之间至多存在一条航道，且不会存在某颗行星到自己的航道。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Interstellar Race", "background": "", "description": "The once-in-a-decade Milky Way Grand Prix is about to begin. As one of the biggest events in the galaxy, winning this championship is undoubtedly the dream of many. Youyou from the Jason constellation’s $\\alpha$ star is one of them.\n\nThe racecourse consists of $N$ planets and $M$ bidirectional interstellar routes. Each planet has a distinct gravity value. The race requires drivers to start from a celestial body that has no interstellar route to any of these $N$ planets, visit each of the $N$ planets exactly once, and the first to achieve this wins.\n\nThanks to the very open rules, many contestants drive all sorts of homemade vehicles. This time, Youyou is driving a car named “Super E-Donkey,” a dream machine embodying the most cutting-edge technology in the galaxy. As a pinnacle of technology, the Super E-Donkey has two movement modes: High-Speed Sailing mode and Ability Burst mode. In High-Speed Sailing mode, it deploys an antimatter engine to speed along interstellar routes at many times the speed of light. In Ability Burst mode, it breaks free from the constraints of spacetime and uses psychic power for spatial jumps—after a period of positioning, it can instantly teleport to any planet.\n\nUnfortunately, on the day before the race, the Super E-Donkey was damaged in an ion storm, causing some malfunctions: when using High-Speed Sailing mode, it can only fly from any planet to a planet with strictly greater gravity; otherwise, the car will explode.\n\nEven though his beloved car has issues, Youyou still believes he can win. He has found the wisest sage in the galaxy—you. Please plan a racing scheme for him so that he can finish the race in the minimum possible time.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThe second line contains $N$ integers $A_1,\\cdots,A_N$, where $A_i$ is the positioning time required to reach planet $i$ using Ability Burst mode.\n\nEach of the next $M$ lines contains three positive integers $u_i, v_i, w_i$, indicating that there is a bidirectional interstellar route between planets $u_i$ and $v_i$ that takes $w_i$ time to traverse.\n\nThe input is already sorted by gravity, meaning that a smaller-indexed planet has smaller gravity, and no two planets have the same gravity.", "outputFormat": "Output a single integer: the minimum time required to finish the race.", "hint": "Explanation for Sample 1: First use Ability Burst mode to reach planet $1$, costing time $1$.\n\nThen switch to High-Speed Sailing mode and travel to planet $2$, costing time $10$.\n\nAfter that, continue to planet $3$ to finish the race, costing time $1$.\n\nAlthough going from planet $1$ to $3$ and then to $2$ seems better, we cannot do that because it would cause the Super E-Donkey to explode.\n\nConstraints\n\n- For $30\\%$ of the testdata, $N \\leq 20$, $M \\leq 50$.\n- For $70\\%$ of the testdata, $N \\leq 200$, $M \\leq 4 \\times 10^3$.\n- For $100\\%$ of the testdata, $N \\leq 800$, $M \\leq 1.5 \\times 10^4$.\n- Every number in the input is between $1$ and $10^6$.\n- There is at most one route between any pair of planets, and there are no self-loops.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 星际竞速", "background": null, "description": "10 年一度的银河系赛车大赛又要开始了。作为全银河最盛大的活动之一，夺得这个项目的冠军无疑是很多人的梦想，来自杰森座 $\\alpha$ 星的悠悠也是其中之一。\n\n赛车大赛的赛场由 $N$ 颗行星和 $M$ 条双向星际航路构成，其中每颗行星都有一个不同的引力值。大赛要求车手们从一颗与这 $N$ 颗行星之间没有任何航路的天体出发，访问这 $N$ 颗行星每颗恰好一次，首先完成这一目标的人获得胜利。\n\n由于赛制非常开放，很多人驾驶着千奇百怪的自制赛车来参赛。这次悠悠驾驶的赛车名为超能电驴，这是一部凝聚了全银河最尖端科技结晶的梦幻赛车。作为最高科技的产物，超能电驴有两种移动模式：高速航行模式和能力爆发模式。在高速航行模式下，超能电驴会展开反物质引擎，以数倍于光速的速度沿星际航路高速航行。在能力爆发模式下，超能电驴脱离时空的束缚，使用超能力进行空间跳跃——在经过一段时间的定位之后，它能瞬间移动到任意一个行星。\n\n天不遂人愿，在比赛的前一天，超能电驴在一场离子风暴中不幸受损，机能出现了一些障碍：在使用高速航行模式的时候，只能由每个星球飞往引力比它大的星球，否则赛车就会发生爆炸。\n\n尽管心爱的赛车出了问题，但是悠悠仍然坚信自己可以取得胜利。他找到了全银河最聪明的贤者——你，请你为他安排一条比赛的方案，使得他能够用最少的时间完成比赛。", "inputFormat": "输入文件 starrace.in 的第一行是两个正整数 $N, M$。\n\n第二行 $N$ 个数 $A_1,\\cdots,A_N$，其中 $A_i$ 表示使用能力爆发模式到达行星 $i$ 所需的定位时间。\n\n接下来 $M$ 行，每行 $3$ 个正整数 $u_i, v_i, w_i$，表示在编号为 $u_i$ 和 $v_i$ 的行星之间存在一条需要航行 $w_i$ 时间的星际航路。\n\n输入数据已经按引力值排序，也就是编号小的行星引力值一定小，且不会有两颗行星引力值相同。", "outputFormat": "输出文件 starrace.out 仅包含一个正整数，表示完成比赛所需的最少时间。", "hint": "样例一说明：先使用能力爆发模式到行星 $1$，花费时间 $1$。\n\n然后切换到高速航行模式，航行到行星 $2$，花费时间 $10$。\n\n之后继续航行到行星 $3$ 完成比赛，花费时间 $1$。\n\n虽然看起来从行星 $1$ 到行星 $3$ 再到行星 $2$ 更优，但我们却不能那样做，因为那会导致超能电驴爆炸。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据 $N\\leq 20$，$M\\leq 50$；\n\n对于 $70\\%$ 的数据 $N\\leq 200$，$M\\leq 4\\times 10^3$；\n\n对于 $100\\%$ 的数据 $N\\leq 800$，$M\\leq 1.5\\times 10^4$。\n\n输入数据中的任何数都在 $1 \\sim 10^6$ 之间。\n\n输入数据保证任意两颗行星之间至多存在一条航道，且不会存在某颗行星到自己的航道。", "locale": "zh-CN"}}}
{"pid": "P2470", "type": "P", "difficulty": 6, "samples": [["aaaaaaa", "5"], ["bcdcdcdcdxcdcdcdcd", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "2007", "四川", "各省省选", "区间 DP"], "title": "[SCOI2007] 压缩", "background": null, "description": "给一个由小写字母组成的字符串，我们可以用一种简单的方法来压缩其中的重复信息。压缩后的字符串除了小写字母外还可以（但不必）包含大写字母 $\\texttt{R}$ 与 $\\texttt{M}$，其中 $\\texttt{M}$ 标记重复串的开始，$\\texttt{R}$ 重复从上一个 $\\texttt{M}$（如果当前位置左边没有 $\\texttt{M}$，则从串的开始算起）开始的解压结果（称为缓冲串）。\n\n\n$\\texttt{bcdcdcdcd}$ 可以压缩为 $\\texttt{bMcdRR}$，下面是解压缩的过程：\n\n\n已经解压的部分|解压结果|缓冲串\n:-:|:-:|:-:\n$\\texttt{b}$|$\\texttt{b}$|$\\texttt{b}$\n$\\texttt{bM}$|$\\texttt{b}$|$\\texttt{.}$\n$\\texttt{bMc}$|$\\texttt{bc}$|$\\texttt{c}$\n$\\texttt{bMcd}$|$\\texttt{bcd}$|$\\texttt{cd}$\n$\\texttt{bMcdR}$|$\\texttt{bcdcd}$|$\\texttt{cdcd}$\n$\\texttt{bMcdRR}$|$\\texttt{bcdcdcdcd}$|$\\texttt{cdcdcdcd}$", "inputFormat": "输入仅一行，包含待压缩字符串，仅包含小写字母，长度为 $n$。", "outputFormat": "输出仅一行，即压缩后字符串的最短长度。", "hint": "在第一个例子中，解为 $\\texttt{aaaRa}$，在第二个例子中，解为 $\\texttt{bMcdRRxMcdRR}$。\n\n\n#### 【数据范围】\n\n- 对于 $50\\%$ 的数据，$1\\le n \\le 20$。\n- 对于 $100\\%$ 的数据，$1\\le n \\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Compression", "background": "", "description": "Given a string consisting of lowercase letters, we can compress its repeated information using a simple method. The compressed string may (but does not have to) contain uppercase letters $\\texttt{R}$ and $\\texttt{M}$ in addition to lowercase letters, where $\\texttt{M}$ marks the start of a repeated segment, and $\\texttt{R}$ repeats the decompressed result starting from the previous $\\texttt{M}$ (if there is no $\\texttt{M}$ to the left of the current position, start from the beginning of the string), which is called the buffer string.\n\n$\\texttt{bcdcdcdcd}$ can be compressed as $\\texttt{bMcdRR}$. The decompression process is shown below:\n\nAlready decompressed part|Decompression result|Buffer string\n:-:|:-:|:-:\n$\\texttt{b}$|$\\texttt{b}$|$\\texttt{b}$\n$\\texttt{bM}$|$\\texttt{b}$|$\\texttt{.}$\n$\\texttt{bMc}$|$\\texttt{bc}$|$\\texttt{c}$\n$\\texttt{bMcd}$|$\\texttt{bcd}$|$\\texttt{cd}$\n$\\texttt{bMcdR}$|$\\texttt{bcdcd}$|$\\texttt{cdcd}$\n$\\texttt{bMcdRR}$|$\\texttt{bcdcdcdcd}$|$\\texttt{cdcdcdcd}$", "inputFormat": "The input contains a single line with the string to compress, consisting only of lowercase letters, of length $n$.", "outputFormat": "Output a single line: the minimum possible length of the compressed string.", "hint": "In the first example, an answer is $\\texttt{aaaRa}$. In the second example, an answer is $\\texttt{bMcdRRxMcdRR}$.\n\nConstraints\n- For $50\\%$ of the testdata, $1\\le n \\le 20$.\n- For $100\\%$ of the testdata, $1\\le n \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 压缩", "background": null, "description": "给一个由小写字母组成的字符串，我们可以用一种简单的方法来压缩其中的重复信息。压缩后的字符串除了小写字母外还可以（但不必）包含大写字母 $\\texttt{R}$ 与 $\\texttt{M}$，其中 $\\texttt{M}$ 标记重复串的开始，$\\texttt{R}$ 重复从上一个 $\\texttt{M}$（如果当前位置左边没有 $\\texttt{M}$，则从串的开始算起）开始的解压结果（称为缓冲串）。\n\n\n$\\texttt{bcdcdcdcd}$ 可以压缩为 $\\texttt{bMcdRR}$，下面是解压缩的过程：\n\n\n已经解压的部分|解压结果|缓冲串\n:-:|:-:|:-:\n$\\texttt{b}$|$\\texttt{b}$|$\\texttt{b}$\n$\\texttt{bM}$|$\\texttt{b}$|$\\texttt{.}$\n$\\texttt{bMc}$|$\\texttt{bc}$|$\\texttt{c}$\n$\\texttt{bMcd}$|$\\texttt{bcd}$|$\\texttt{cd}$\n$\\texttt{bMcdR}$|$\\texttt{bcdcd}$|$\\texttt{cdcd}$\n$\\texttt{bMcdRR}$|$\\texttt{bcdcdcdcd}$|$\\texttt{cdcdcdcd}$", "inputFormat": "输入仅一行，包含待压缩字符串，仅包含小写字母，长度为 $n$。", "outputFormat": "输出仅一行，即压缩后字符串的最短长度。", "hint": "在第一个例子中，解为 $\\texttt{aaaRa}$，在第二个例子中，解为 $\\texttt{bMcdRRxMcdRR}$。\n\n\n#### 【数据范围】\n\n- 对于 $50\\%$ 的数据，$1\\le n \\le 20$。\n- 对于 $100\\%$ 的数据，$1\\le n \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2471", "type": "P", "difficulty": 5, "samples": [["6\n2002 4920\n2003 5901\n2004 2832\n2005 3890\n2007 5609\n2008 3024\n5\n2002 2005\n2003 2005\n2002 2007\n2003 2007\n2005 2008\n", "false\ntrue\nfalse\nmaybe\nfalse\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "四川", "线段树", "各省省选", "ST 表"], "title": "[SCOI2007] 降雨量", "background": "", "description": "我们常常会说这样的话：“$X$ 年是自 $Y$ 年以来降雨量最多的”。它的含义是 $X$ 年的降雨量不超过 $Y$ 年，且对于任意 $Y < Z < X$，$Z$ 年的降雨量严格小于 $X$ 年。例如 2002、2003、2004 和 2005 年的降雨量分别为 $4920$、$5901$、$2832$ 和 $3890$，则可以说“2005 年是自 2003 年以来最多的”，但不能说“2005 年是自 2002 年以来最多的”由于有些年份的降雨量未知，有的说法是可能正确也可以不正确的。\n", "inputFormat": "输入仅一行包含一个正整数 $n$，为已知的数据。以下 $n$ 行每行两个整数 $y_i$ 和 $r_i$，为年份和降雨量，按照年份从小到大排列，即 $y_i<y_{i+1}$。下一行包含一个正整数 $m$，为询问的次数。以下 $m$ 行每行包含两个数 $Y$ 和 $X$，即询问“$X$ 年是自 $Y$ 年以来降雨量最多的。”这句话是“必真”、“必假”还是“有可能”。\n", "outputFormat": "对于每一个询问，输出 `true`、`false` 或者 `maybe`。\n", "hint": "$100 \\%$ 的数据满足：$1 \\le n \\le 50000$，$1 \\le m \\le 10000$，$-10^9 \\le y_i \\le 10^9$，$1 \\le r_i \\le 10^9$，$-10^9 \\le X, Y \\le 10^9$。\n\n数据保证 $Y < X$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Rainfall", "background": "", "description": "We often say statements like: \"Year $X$ has the highest rainfall since year $Y$.\" It means that the rainfall in year $X$ does not exceed that in year $Y$, and for any year $Z$ with $Y < Z < X$, the rainfall in year $Z$ is strictly less than that in year $X$. For example, if the rainfalls in years 2002, 2003, 2004, and 2005 are 4920, 5901, 2832, and 3890 respectively, then we can say \"2005 is the highest since 2003,\" but we cannot say \"2005 is the highest since 2002.\" Since the rainfalls of some years are unknown, some statements may be true or may be false.", "inputFormat": "The first line contains a positive integer $n$, the number of known records.  \nEach of the following $n$ lines contains two integers $y_i$ and $r_i$, the year and its rainfall, sorted in strictly increasing order of year, i.e., $y_i < y_{i+1}$.  \nThe next line contains a positive integer $m$, the number of queries.  \nEach of the following $m$ lines contains two integers $Y$ and $X$, asking whether the statement \"Year $X$ has the highest rainfall since year $Y$.\" is \"true\", \"false\", or \"maybe\".", "outputFormat": "For each query, output `true`, `false`, or `maybe`.", "hint": "Constraints: For 100% of the testdata, $1 \\le n \\le 50000$, $1 \\le m \\le 10000$, $-10^9 \\le y_i \\le 10^9$, $1 \\le r_i \\le 10^9$, $-10^9 \\le X, Y \\le 10^9$.  \nIt is guaranteed that $Y < X$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 降雨量", "background": "", "description": "我们常常会说这样的话：“$X$ 年是自 $Y$ 年以来降雨量最多的”。它的含义是 $X$ 年的降雨量不超过 $Y$ 年，且对于任意 $Y < Z < X$，$Z$ 年的降雨量严格小于 $X$ 年。例如 2002、2003、2004 和 2005 年的降雨量分别为 $4920$、$5901$、$2832$ 和 $3890$，则可以说“2005 年是自 2003 年以来最多的”，但不能说“2005 年是自 2002 年以来最多的”由于有些年份的降雨量未知，有的说法是可能正确也可以不正确的。\n", "inputFormat": "输入仅一行包含一个正整数 $n$，为已知的数据。以下 $n$ 行每行两个整数 $y_i$ 和 $r_i$，为年份和降雨量，按照年份从小到大排列，即 $y_i<y_{i+1}$。下一行包含一个正整数 $m$，为询问的次数。以下 $m$ 行每行包含两个数 $Y$ 和 $X$，即询问“$X$ 年是自 $Y$ 年以来降雨量最多的。”这句话是“必真”、“必假”还是“有可能”。\n", "outputFormat": "对于每一个询问，输出 `true`、`false` 或者 `maybe`。\n", "hint": "$100 \\%$ 的数据满足：$1 \\le n \\le 50000$，$1 \\le m \\le 10000$，$-10^9 \\le y_i \\le 10^9$，$1 \\le r_i \\le 10^9$，$-10^9 \\le X, Y \\le 10^9$。\n\n数据保证 $Y < X$。", "locale": "zh-CN"}}}
{"pid": "P2472", "type": "P", "difficulty": 6, "samples": [["5 8 2\n00000000\n02000000\n00321100\n02000000\n00000000\n........\n........\n..LLLL..\n........\n........\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2007", "四川", "各省省选", "网络流"], "title": "[SCOI2007] 蜥蜴", "background": "", "description": "在一个 $r$ 行 $c$ 列的网格地图中有一些高度不同的石柱，第 $i$ 行 $j$ 列的石柱高度为 $h_{i,j}$。\n\n一些石柱上站着一些蜥蜴，你的任务是让尽量多的蜥蜴逃到边界外。\n\n每行每列中相邻石柱的距离为 $1$，蜥蜴的跳跃距离是 $d$，即蜥蜴可以跳到**平面距离**不超过 $d$ 的任何一个石柱上。\n\n石柱都不稳定，每次当蜥蜴跳跃时，所离开的石柱高度减 $1$（如果仍然落在地图内部，则到达的石柱高度不变）。\n\n如果该石柱原来高度为 $1$，则蜥蜴离开后消失，以后其他蜥蜴不能落脚。\n\n任何时刻不能有两只蜥蜴在同一个石柱上。", "inputFormat": "\n#### 输入格式\n输入第一行为三个整数 $r,c,d$，即地图的规模与最大跳跃距离。\n\n接下来 $r$ 行每行 $c$ 个数字为石柱的初始状态，$0$ 表示没有石柱，否则表示石柱的初始高度 $h_{i,j}$。\n\n接下来 $r$ 行每行 $c$ 个字符为蜥蜴位置，`L` 表示蜥蜴，`.` 表示没有蜥蜴。", "outputFormat": "输出仅一行，包含一个整数，即无法逃离的蜥蜴总数的最小值。", "hint": "对于 $100\\%$ 的数据满足：$1\\le r,c\\le20$，$1\\le d\\le 4$，$1\\le h\\le 3$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Lizard", "background": "", "description": "On an $r$-row $c$-column grid map, there are stone pillars of varying heights. The pillar at row $i$, column $j$ has height $h_{i,j}$.\n\nSome pillars have lizards standing on them. Your task is to let as many lizards as possible escape outside the boundary.\n\nThe distance between adjacent pillars in the same row or column is $1$. Each lizard has a jump distance of $d$, meaning it can jump to any pillar whose Euclidean distance is at most $d$.\n\nThe pillars are unstable. Each time a lizard jumps, the height of the pillar it leaves decreases by $1$ (if it still lands inside the map, the destination pillar’s height does not change).\n\nIf that pillar’s original height is $1$, then after a lizard leaves, the pillar disappears, and no other lizard can land on it thereafter.\n\nAt any time, no two lizards may stand on the same pillar.", "inputFormat": "The first line contains three integers $r, c, d$, which are the map size and the maximum jump distance.\n\nThe next $r$ lines each contain $c$ numbers describing the initial state of the pillars: $0$ means there is no pillar, otherwise it is the initial height $h_{i,j}$.\n\nThe next $r$ lines each contain $c$ characters describing lizard positions: `L` means a lizard, and `.` means no lizard.", "outputFormat": "Output a single line containing one integer, which is the minimum total number of lizards that cannot escape.", "hint": "For $100\\%$ of the testdata: $1 \\le r, c \\le 20$, $1 \\le d \\le 4$, $1 \\le h \\le 3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 蜥蜴", "background": "", "description": "在一个 $r$ 行 $c$ 列的网格地图中有一些高度不同的石柱，第 $i$ 行 $j$ 列的石柱高度为 $h_{i,j}$。\n\n一些石柱上站着一些蜥蜴，你的任务是让尽量多的蜥蜴逃到边界外。\n\n每行每列中相邻石柱的距离为 $1$，蜥蜴的跳跃距离是 $d$，即蜥蜴可以跳到**平面距离**不超过 $d$ 的任何一个石柱上。\n\n石柱都不稳定，每次当蜥蜴跳跃时，所离开的石柱高度减 $1$（如果仍然落在地图内部，则到达的石柱高度不变）。\n\n如果该石柱原来高度为 $1$，则蜥蜴离开后消失，以后其他蜥蜴不能落脚。\n\n任何时刻不能有两只蜥蜴在同一个石柱上。", "inputFormat": "\n#### 输入格式\n输入第一行为三个整数 $r,c,d$，即地图的规模与最大跳跃距离。\n\n接下来 $r$ 行每行 $c$ 个数字为石柱的初始状态，$0$ 表示没有石柱，否则表示石柱的初始高度 $h_{i,j}$。\n\n接下来 $r$ 行每行 $c$ 个字符为蜥蜴位置，`L` 表示蜥蜴，`.` 表示没有蜥蜴。", "outputFormat": "输出仅一行，包含一个整数，即无法逃离的蜥蜴总数的最小值。", "hint": "对于 $100\\%$ 的数据满足：$1\\le r,c\\le20$，$1\\le d\\le 4$，$1\\le h\\le 3$。", "locale": "zh-CN"}}}
{"pid": "P2473", "type": "P", "difficulty": 5, "samples": [["1 2\n1 0\n2 0\n", "1.500000"], ["6 6\r\n12 2 3 4 5 0\r\n15 5 0\r\n-2 2 4 5 0\r\n-11 2 5 0\r\n5 0\r\n1 2 4 5 0\r\n", "10.023470"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选", "O2优化", "期望", "状压 DP"], "title": "[SCOI2008] 奖励关", "background": "", "description": "你正在玩你最喜欢的电子游戏，并且刚刚进入一个奖励关。在这个奖励关里，系统将依次随机抛出 $k$ 次宝物，每次你都可以选择吃或者不吃（必须在抛出下一个宝物之前做出选择，且现在决定不吃的宝物以后也不能再吃）。\n\n宝物一共有 $n$ 种，系统每次抛出这 $n$ 种宝物的概率都相同且相互独立。也就是说，即使前 $(k-1)$ 次系统都抛出宝物 $1$（这种情况是有可能出现的，尽管概率非常小），第 $k$ 次抛出各个宝物的概率依然均为 $\\frac 1 n $。\n\n获取第 $i$ 种宝物将得到 $p_i$ 分，但并不是每种宝物都是可以随意获取的。第 $i$ 种宝物有一个前提宝物集合 $s_i$。只有当 $s_i$ 中所有宝物都至少吃过一次，才能吃第 $i$ 种宝物（如果系统抛出了一个目前不能吃的宝物，相当于白白的损失了一次机会）。注意，$p_i$ 可以是负数，但如果它是很多高分宝物的前提，损失短期利益而吃掉这个负分宝物将获得更大的长期利益。\n\n假设你采取最优策略，平均情况你一共能在奖励关得到多少分值？\n", "inputFormat": "第一行为两个整数，分别表示抛出宝物的次数 $k$ 和宝物的种类数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，第 $(i + 1)$ 有若干个整数表示第 $i$ 个宝物的信息。每行首先有一个整数，表示第 $i$ 个宝物的分数 $p_i$。接下来若干个互不相同的整数，表示该宝物的各个前提宝物集合 $s_i$，每行的结尾是一个整数 $0$，表示该行结束。", "outputFormat": "输出一行一个实数表示答案，保留六位小数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq k \\leq 100$，$1 \\leq n \\leq 15$，$-10^6 \\leq p_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Bonus Stage", "background": "", "description": "You are playing your favorite video game and have just entered a bonus stage. In this stage, the system will randomly drop items $k$ times in sequence. Each time, you may choose to take the item or not take it (you must decide before the next drop, and an item you skip now cannot be taken later).\n\nThere are $n$ types of items. Each drop is equally likely to be any of the $n$ types, and all drops are independent. That is, even if the system drops item $1$ in the first $(k - 1)$ drops (which is possible, though very unlikely), the probabilities for the $k$-th drop are still all $\\frac 1 n$.\n\nTaking an item of type $i$ yields $p_i$ points, but not every item can be taken freely. Item $i$ has a prerequisite set $s_i$. You can take item $i$ only if every item in $s_i$ has been taken at least once. If the system drops an item that you currently cannot take, that opportunity is simply lost. Note that $p_i$ can be negative; however, if it is a prerequisite for many high-scoring items, taking this negative item at a short-term loss may lead to greater long-term gain.\n\nAssuming you follow the optimal strategy, what is the expected total score you can obtain in the bonus stage?", "inputFormat": "The first line contains two integers, the number of drops $k$ and the number of item types $n$.\n\nLines $2$ through $(n + 1)$ describe the $n$ items. On line $(i + 1)$, several integers describe item $i$: first an integer $p_i$, then several distinct integers giving the prerequisites $s_i$, and finally an integer $0$ marking the end of the line.", "outputFormat": "Output a single real number, the answer, with six digits after the decimal point.", "hint": "#### Constraints\n\nFor all test points, it is guaranteed that $1 \\leq k \\leq 100$, $1 \\leq n \\leq 15$, and $-10^6 \\leq p_i \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 奖励关", "background": "", "description": "你正在玩你最喜欢的电子游戏，并且刚刚进入一个奖励关。在这个奖励关里，系统将依次随机抛出 $k$ 次宝物，每次你都可以选择吃或者不吃（必须在抛出下一个宝物之前做出选择，且现在决定不吃的宝物以后也不能再吃）。\n\n宝物一共有 $n$ 种，系统每次抛出这 $n$ 种宝物的概率都相同且相互独立。也就是说，即使前 $(k-1)$ 次系统都抛出宝物 $1$（这种情况是有可能出现的，尽管概率非常小），第 $k$ 次抛出各个宝物的概率依然均为 $\\frac 1 n $。\n\n获取第 $i$ 种宝物将得到 $p_i$ 分，但并不是每种宝物都是可以随意获取的。第 $i$ 种宝物有一个前提宝物集合 $s_i$。只有当 $s_i$ 中所有宝物都至少吃过一次，才能吃第 $i$ 种宝物（如果系统抛出了一个目前不能吃的宝物，相当于白白的损失了一次机会）。注意，$p_i$ 可以是负数，但如果它是很多高分宝物的前提，损失短期利益而吃掉这个负分宝物将获得更大的长期利益。\n\n假设你采取最优策略，平均情况你一共能在奖励关得到多少分值？\n", "inputFormat": "第一行为两个整数，分别表示抛出宝物的次数 $k$ 和宝物的种类数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，第 $(i + 1)$ 有若干个整数表示第 $i$ 个宝物的信息。每行首先有一个整数，表示第 $i$ 个宝物的分数 $p_i$。接下来若干个互不相同的整数，表示该宝物的各个前提宝物集合 $s_i$，每行的结尾是一个整数 $0$，表示该行结束。", "outputFormat": "输出一行一个实数表示答案，保留六位小数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq k \\leq 100$，$1 \\leq n \\leq 15$，$-10^6 \\leq p_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2474", "type": "P", "difficulty": 6, "samples": [["6 2 5\r\n?+????\r\n-?+???\r\n?-????\r\n????+?\r\n???-?+\r\n????-?", "1 4 1"], ["14 8 4\r\n?+???++?????++\r\n-??=?=???????=\r\n??????????=???\r\n?=??+?==??????\r\n???-???-???-??\r\n-=????????????\r\n-??=???=?-+???\r\n???=+?=???????\r\n??????????????\r\n??????+???????\r\n??=???-????-??\r\n????+?????+???\r\n-?????????????\r\n-=????????????", "18 12 11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选", "图论建模", "差分约束"], "title": "[SCOI2008] 天平", "background": null, "description": "你有 $n$ 个砝码，均为 $1$ 克，$2$ 克或者 $3$ 克。你并不清楚每个砝码的重量，但你知道其中一些砝码重量的大小关系。你把其中两个砝码 A 和 B 放在天平的左边，需要另外选出两个砝码放在天平的右边。问：有多少种选法（选法是无序的，也就是说选择砝码 $1$ 和 $2$ 或者 $2$ 和 $1$ 是一种选法）使得天平的左边重（$c_1$）、一样重（$c_2$）、右边重（$c_3$）？（只有结果保证唯一确定的选法才统计在内）", "inputFormat": "第一行包含三个正整数 $n,A,B$（$1\\le A,B\\le n,A\\neq B$）。\n\n以下 $n$ 行包含重量关系矩阵，其中第 $i$ 行第 $j$ 个字符为加号 `+` 表示砝码 $i$ 比砝码 $j$ 重，减号 `-` 表示砝码 $i$ 比砝码 $j$ 轻，等号 `=` 表示砝码 $i$ 和砝码 $j$ 一样重，问号 `?` 表示二者的关系未知。\n\n数据保证至少存在一种情况符合该矩阵。", "outputFormat": "仅一行，包含三个整数，即 $c_1,c_2,c_3$。", "hint": "$4\\le n\\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Balance", "background": "", "description": "You have $n$ weights, each of which is $1$ gram, $2$ grams, or $3$ grams. You do not know the exact mass of each weight, but you know some pairwise weight comparisons. You place two weights $A$ and $B$ on the left pan of a balance scale, and you need to choose two other weights to place on the right pan. How many unordered choices are there that make the left pan heavier ($c_1$), balance ($c_2$), or the right pan heavier ($c_3$)? (Only count choices for which the outcome is uniquely determined.) The choice is unordered; that is, choosing weights $1$ and $2$ is the same as choosing $2$ and $1$.", "inputFormat": "The first line contains three positive integers $n,A,B$ ($1\\le A,B\\le n,A\\neq B$).\n\nThe following $n$ lines contain the weight relation matrix. In row $i$, the $j$-th character is a plus `+` if weight $i$ is heavier than weight $j$, a minus `-` if weight $i$ is lighter than weight $j$, an equals `=` if weight $i$ and weight $j$ are equal, and a question mark `?` if their relation is unknown.\n\nIt is guaranteed that there exists at least one configuration consistent with this matrix.", "outputFormat": "Output a single line containing three integers: $c_1,c_2,c_3$.", "hint": "Constraints: $4\\le n\\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 天平", "background": null, "description": "你有 $n$ 个砝码，均为 $1$ 克，$2$ 克或者 $3$ 克。你并不清楚每个砝码的重量，但你知道其中一些砝码重量的大小关系。你把其中两个砝码 A 和 B 放在天平的左边，需要另外选出两个砝码放在天平的右边。问：有多少种选法（选法是无序的，也就是说选择砝码 $1$ 和 $2$ 或者 $2$ 和 $1$ 是一种选法）使得天平的左边重（$c_1$）、一样重（$c_2$）、右边重（$c_3$）？（只有结果保证唯一确定的选法才统计在内）", "inputFormat": "第一行包含三个正整数 $n,A,B$（$1\\le A,B\\le n,A\\neq B$）。\n\n以下 $n$ 行包含重量关系矩阵，其中第 $i$ 行第 $j$ 个字符为加号 `+` 表示砝码 $i$ 比砝码 $j$ 重，减号 `-` 表示砝码 $i$ 比砝码 $j$ 轻，等号 `=` 表示砝码 $i$ 和砝码 $j$ 一样重，问号 `?` 表示二者的关系未知。\n\n数据保证至少存在一种情况符合该矩阵。", "outputFormat": "仅一行，包含三个整数，即 $c_1,c_2,c_3$。", "hint": "$4\\le n\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2475", "type": "P", "difficulty": 6, "samples": [["6\r\n100 0 101 102 1 2", "0 1 2 3 4 5 6"], ["6\r\n100 0 2 102 4 104", "4 6 5 2 0 1 3"], ["7\r\n0 100 1 102 2 3 5", "2 5 0 3 4 6 7 1"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选", "递归"], "title": "[SCOI2008] 斜堆", "background": "四川2008NOI省选", "description": "斜堆(skew heap)是一种常用的数据结构。它也是二叉树，且满足与二叉堆相同的堆性质：每个非根结点的值都比它父亲大。因此在整棵斜堆中，根的值最小。\n\n但斜堆不必是平衡的，每个结点的左右儿子的大小关系也没有任何规定。在本题中，斜堆中各个元素的值均不相同。\n\n在斜堆 H 中插入新元素 X 的过程是递归进行的：当 H 为空或者 X 小于 H 的根结点时 X 变为新的树根，而原来的树根（如果有的话）变为 X 的左儿子。\n\n当 X 大于 H 的根结点时，H 根结点的两棵子树交换，而 X（递归）插入到交换后的左子树中。\n\n给出一棵斜堆，包含值为 $0,1,\\dots,n$ 的结点各一次。求一个结点序列，使得该斜堆可以通过在空树中依次插入这些结点得到。如果答案不惟一，输出字典序最小的解。\n\n输入保证有解。", "inputFormat": "第一行包含一个整数 $n$。第二行包含 $n$ 个整数 $d_1, d_2,\\dots, d_n$。$d_i<100$ 表示 $i$ 是 $d_i$ 的左儿子，$d_i\\geq  100$ 表示 $i$ 是 $d_i-100$ 的右儿子。显然 $0$ 总是根，所以输入中不含 $d_0$。", "outputFormat": "仅一行，包含 $n+1$ 整数，即字典序最小的插入序列。", "hint": "$2\\leq n\\leq 50$", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Skew Heap", "background": "Sichuan 2008 NOI Qualifier.", "description": "A skew heap is a commonly used data structure. It is also a binary tree and satisfies the same heap property as a binary heap: every non-root node has a value larger than its parent. Therefore, in the whole skew heap, the root has the minimum value.\n\nA skew heap does not need to be balanced, and there is no restriction on the relative sizes of the left and right children of any node. In this problem, all values in the skew heap are distinct.\n\nTo insert a new element $X$ into a skew heap $H$, proceed recursively: when $H$ is empty or $X$ is smaller than the root of $H$, $X$ becomes the new root, and the original root (if any) becomes the left child of $X$.\n\nWhen $X$ is greater than the root of $H$, swap the two subtrees of the root, and (recursively) insert $X$ into the left subtree after the swap.\n\nYou are given a skew heap that contains each of the values $0, 1, \\dots, n$ exactly once. Find a sequence of nodes such that this skew heap can be obtained by inserting these nodes one by one into an empty tree. If multiple answers exist, output the lexicographically smallest one.\n\nThe input is guaranteed to have a solution.", "inputFormat": "The first line contains an integer $n$. The second line contains $n$ integers $d_1, d_2, \\dots, d_n$. $d_i < 100$ means $i$ is the left child of $d_i$, and $d_i \\ge 100$ means $i$ is the right child of $d_i - 100$. Obviously $0$ is always the root, so $d_0$ does not appear in the input.", "outputFormat": "Output a single line containing $n+1$ integers, i.e., the lexicographically smallest insertion sequence.", "hint": "Constraints: $2 \\le n \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 斜堆", "background": "四川2008NOI省选", "description": "斜堆(skew heap)是一种常用的数据结构。它也是二叉树，且满足与二叉堆相同的堆性质：每个非根结点的值都比它父亲大。因此在整棵斜堆中，根的值最小。\n\n但斜堆不必是平衡的，每个结点的左右儿子的大小关系也没有任何规定。在本题中，斜堆中各个元素的值均不相同。\n\n在斜堆 H 中插入新元素 X 的过程是递归进行的：当 H 为空或者 X 小于 H 的根结点时 X 变为新的树根，而原来的树根（如果有的话）变为 X 的左儿子。\n\n当 X 大于 H 的根结点时，H 根结点的两棵子树交换，而 X（递归）插入到交换后的左子树中。\n\n给出一棵斜堆，包含值为 $0,1,\\dots,n$ 的结点各一次。求一个结点序列，使得该斜堆可以通过在空树中依次插入这些结点得到。如果答案不惟一，输出字典序最小的解。\n\n输入保证有解。", "inputFormat": "第一行包含一个整数 $n$。第二行包含 $n$ 个整数 $d_1, d_2,\\dots, d_n$。$d_i<100$ 表示 $i$ 是 $d_i$ 的左儿子，$d_i\\geq  100$ 表示 $i$ 是 $d_i-100$ 的右儿子。显然 $0$ 总是根，所以输入中不含 $d_0$。", "outputFormat": "仅一行，包含 $n+1$ 整数，即字典序最小的插入序列。", "hint": "$2\\leq n\\leq 50$", "locale": "zh-CN"}}}
{"pid": "P2476", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3", "10"], ["5\n2 2 2 2 2", "39480"], ["10\n1 1 2 2 3 3 4 4 5 5\n", "85937576"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2008", "四川", "各省省选", "记忆化搜索"], "title": "[SCOI2008] 着色方案", "background": "", "description": "有 $n$ 个木块排成一行，从左到右依次编号为 $1$ 至 $n$。\n\n你有 $k$ 种颜色的油漆，第 $i$ 种颜色的油漆足够涂 $c_i$ 个木块。\n\n所有油漆刚好足够涂满所有木块，即 $\\sum_{i=1}^kc_i=n$。\n\n由于相邻两个木块涂相同色显得很难看，所以你希望统计任意两个相邻木块颜色不同的着色方案。\n\n由于答案可能很大，请输出对 $10^9+7$ 取模的结果。", "inputFormat": "第一行，一个整数 $k$，表示颜色数量。\n\n第二行 $k$ 个整数 $c_1,c_2,\\dots,c_k$，表示每种颜色能够涂木块的个数。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "- 对于 $50\\%$ 的数据，$1 \\leq k \\leq 5$，$1 \\leq c_i \\leq 3$；\n- 对于 $100\\%$ 的数据，$1 \\leq k \\leq 15$，$1 \\leq c_i \\leq 5$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Coloring Scheme", "background": "", "description": "There are $n$ wooden blocks arranged in a row, numbered from $1$ to $n$ from left to right.\n\nYou have $k$ colors of paint, and the $i$-th color is enough to paint $c_i$ blocks.\n\nAll the paint is just enough to cover all blocks, i.e., $\\sum_{i=1}^k c_i = n$.\n\nSince it looks bad if two adjacent blocks have the same color, you want to count the number of colorings in which any two adjacent blocks have different colors.\n\nSince the answer may be large, please output the result modulo $10^9+7$.", "inputFormat": "The first line contains an integer $k$, the number of colors.\n\nThe second line contains $k$ integers $c_1, c_2, \\dots, c_k$, where $c_i$ is the number of blocks that can be painted with the $i$-th color.", "outputFormat": "Output a single integer, the answer modulo $10^9+7$.", "hint": "- For 50% of the testdata, $1 \\leq k \\leq 5$, $1 \\leq c_i \\leq 3$.\n- For 100% of the testdata, $1 \\leq k \\leq 15$, $1 \\leq c_i \\leq 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 着色方案", "background": "", "description": "有 $n$ 个木块排成一行，从左到右依次编号为 $1$ 至 $n$。\n\n你有 $k$ 种颜色的油漆，第 $i$ 种颜色的油漆足够涂 $c_i$ 个木块。\n\n所有油漆刚好足够涂满所有木块，即 $\\sum_{i=1}^kc_i=n$。\n\n由于相邻两个木块涂相同色显得很难看，所以你希望统计任意两个相邻木块颜色不同的着色方案。\n\n由于答案可能很大，请输出对 $10^9+7$ 取模的结果。", "inputFormat": "第一行，一个整数 $k$，表示颜色数量。\n\n第二行 $k$ 个整数 $c_1,c_2,\\dots,c_k$，表示每种颜色能够涂木块的个数。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "- 对于 $50\\%$ 的数据，$1 \\leq k \\leq 5$，$1 \\leq c_i \\leq 3$；\n- 对于 $100\\%$ 的数据，$1 \\leq k \\leq 15$，$1 \\leq c_i \\leq 5$。", "locale": "zh-CN"}}}
{"pid": "P2478", "type": "P", "difficulty": 6, "samples": [["9 9\n2 2 3 4 1 2 3 10 11\n1 2\n2 3\n1 3\n3 5\n5 4\n5 6\n4 7\n6 7\n8 9\n", "17"], ["5 5\n4 4 9 7 7\n1 2\n2 3\n1 4\n3 5\n5 4\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2010", "各省省选", "山东"], "title": "[SDOI2010] 城市规划", "background": "", "description": "小猪iPig来到了一个叫做pigsty的城市里，pigsty是一座专门为小猪所准备的城市，城市里面一共有n个小区给小猪们居住，并且存在许多条无向边连接着许多小区。因为这里是一个和谐的城市，所以小猪iPig准备在这个城市里面度过他的余生。\n\n若干年之后小猪iPig当上了规划局长，这件事令他非常开心。不过与此同时pigsty城市里面出现了许多反和谐主义者，他们已经厌烦了这样和谐的生活，在城市里到处闹事。小猪iPig为了更好地控制局面，他把城市改造成了另外一个样子：iPig把道路全部摧毁之后重新修建了m条无向边，并且保证每一个小区最多存在于一个由无向边组成的环中。\n\niPig以为这样做就让那些反和谐主义者不敢继续猖狂下去了，谁知到在新的城市道路修建好以后反和谐主义者宣言要对城市的小区进行一次洗脑！\n\n这下可麻烦了，iPig赶紧收集了许多的情报。iPig给每个小区标记了一个和谐值HX\\_i，用它来表示第i个小区的和谐程度。\n\n通过地下消息iPig又得知那些反和谐主义者进攻时有个规律：他们会选择若干个小区下手，这些小区都派一只猪过去，把这些小区的和谐值归零。在这个过程中，每个选择的小区所直接连接着的几个小区都派了一只猪去看守——以防被警猪给干扰。这个计划看似完美但是还是存在一个漏洞：因为人员之间都是在网络上认识的，互相没有见过面，为了防止不必要的麻烦（认错猪之类），每个小区最多只会有一头猪存在。\n\niPig突然感到了莫大的压力，他想知道在最坏情况下会丢失多少和谐值。但是不懂计算机的他不知道应该怎样计算。你能帮帮他吗？\n", "inputFormat": "输入第一行有两个整数n和m，表示pigsty城市里面有n个小区，在iPig修整城市后有m条无向边连接着n个小区。\n\n接下来一行有n个正整数，第i个正整数HX\\_i表示第i个小区的和谐值为HX\\_i。\n\n接下来m行，每行两个正整数a和b（1<=a,b<=n），表示存在一条连接着小区a和小区 b的无向边。\n", "outputFormat": "输出只有一行一个整数，表示最坏情况下损失的和谐值为多少。\n", "hint": "【样例解释】\n\n反和谐主义者选择的小区分别是小区3（看守的小区是小区1、小区2和小区5）、小区7（看守的小区是小区4和小区6）和小区9（看守的小区是小区8），这样会损失的总和谐值为3+3+11=17。\n\n或者选择的小区分别是小区1（看守的小区是小区2和小区3）、小区4（看守的小区是小区5和小区7）和小区9（看守的小区是小区8），这样会损失的总和谐值为2+4+11=17。\n\n如果同时选择小区3、小区4和小区9，虽然损失的总和谐值为18，但是小区3和小区4都要派猪来看守小区5，这不符合条件，故此方案不可行。\n\n\n【数据约定】\n\n对于20%的数据，保证每个点不存在于任何一个环中；\n\n对于另外30%的数据，保证图中只存在一个环；\n\n对于100%的数据，有N<=1000000，M<=2000000，所有的权值不超过1000。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Urban Planning", "background": "", "description": "Little pig iPig arrived in a city called pigsty. Pigsty is a city specially built for little pigs. There are a total of n communities for pigs to live in, and there are many undirected edges connecting these communities. Because this is a harmonious city, iPig plans to spend the rest of his life here.\n\nYears later, iPig became the head of the planning bureau, which made him very happy. However, at the same time, many anti-harmony activists appeared in pigsty. They are tired of such a harmonious life and are making trouble all over the city. To better control the situation, iPig transformed the city: after destroying all the roads, he rebuilt m undirected edges and ensured that each community belongs to at most one cycle formed by undirected edges.\n\niPig thought this would deter the anti-harmony activists. Unexpectedly, after the new city roads were completed, the activists declared they would “brainwash” the city’s communities!\n\nThis is troublesome. iPig hurriedly collected lots of intelligence. He assigned each community a harmony value HX_i, which represents the harmony level of the i-th community.\n\nThrough underground sources, iPig learned a pattern in the activists’ attacks: they will choose several communities to act on, sending one pig to each of these communities to set their harmony values to zero. During this process, each chosen community’s directly connected neighboring communities each send a pig to guard it—to prevent interference by police pigs. This plan seems perfect but still has a flaw: since everyone only knows each other online and has not met in person, to avoid unnecessary trouble (like mistaking one pig for another), at most one pig will be present in any community.\n\niPig suddenly feels great pressure. He wants to know how much harmony value could be lost in the worst case. But not knowing computer science, he does not know how to compute it. Can you help him?", "inputFormat": "The first line contains two integers n and m, indicating that the city pigsty has n communities, and after iPig’s reconstruction, there are m undirected edges connecting the n communities.\n\nThe next line contains n positive integers. The i-th integer HX_i indicates that the harmony value of the i-th community is HX_i.\n\nThen follow m lines. Each line contains two positive integers a and b ($1 \\le a, b \\le n$), indicating there is an undirected edge between community a and community b.", "outputFormat": "Output a single integer on one line, indicating the amount of harmony value lost in the worst case.", "hint": "[Sample Explanation]\n- The activists choose communities 3 (guarded by communities 1, 2, and 5), 7 (guarded by communities 4 and 6), and 9 (guarded by community 8). The lost harmony value is $3 + 3 + 11 = 17$.\n- Or they choose communities 1 (guarded by communities 2 and 3), 4 (guarded by communities 5 and 7), and 9 (guarded by community 8). The lost harmony value is $2 + 4 + 11 = 17$.\n- If they choose communities 3, 4, and 9 at the same time, although the lost harmony value would be $18$, both communities 3 and 4 would need to send pigs to guard community 5, which violates the condition that at most one pig can be present in any community. Therefore, this plan is invalid.\n\n[Constraints]\n- For 20% of the testdata, each node does not belong to any cycle.\n- For another 30% of the testdata, there is exactly one cycle in the graph.\n- For 100% of the testdata, $N \\le 1000000$, $M \\le 2000000$, and all weights are at most $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 城市规划", "background": "", "description": "小猪iPig来到了一个叫做pigsty的城市里，pigsty是一座专门为小猪所准备的城市，城市里面一共有n个小区给小猪们居住，并且存在许多条无向边连接着许多小区。因为这里是一个和谐的城市，所以小猪iPig准备在这个城市里面度过他的余生。\n\n若干年之后小猪iPig当上了规划局长，这件事令他非常开心。不过与此同时pigsty城市里面出现了许多反和谐主义者，他们已经厌烦了这样和谐的生活，在城市里到处闹事。小猪iPig为了更好地控制局面，他把城市改造成了另外一个样子：iPig把道路全部摧毁之后重新修建了m条无向边，并且保证每一个小区最多存在于一个由无向边组成的环中。\n\niPig以为这样做就让那些反和谐主义者不敢继续猖狂下去了，谁知到在新的城市道路修建好以后反和谐主义者宣言要对城市的小区进行一次洗脑！\n\n这下可麻烦了，iPig赶紧收集了许多的情报。iPig给每个小区标记了一个和谐值HX\\_i，用它来表示第i个小区的和谐程度。\n\n通过地下消息iPig又得知那些反和谐主义者进攻时有个规律：他们会选择若干个小区下手，这些小区都派一只猪过去，把这些小区的和谐值归零。在这个过程中，每个选择的小区所直接连接着的几个小区都派了一只猪去看守——以防被警猪给干扰。这个计划看似完美但是还是存在一个漏洞：因为人员之间都是在网络上认识的，互相没有见过面，为了防止不必要的麻烦（认错猪之类），每个小区最多只会有一头猪存在。\n\niPig突然感到了莫大的压力，他想知道在最坏情况下会丢失多少和谐值。但是不懂计算机的他不知道应该怎样计算。你能帮帮他吗？\n", "inputFormat": "输入第一行有两个整数n和m，表示pigsty城市里面有n个小区，在iPig修整城市后有m条无向边连接着n个小区。\n\n接下来一行有n个正整数，第i个正整数HX\\_i表示第i个小区的和谐值为HX\\_i。\n\n接下来m行，每行两个正整数a和b（1<=a,b<=n），表示存在一条连接着小区a和小区 b的无向边。\n", "outputFormat": "输出只有一行一个整数，表示最坏情况下损失的和谐值为多少。\n", "hint": "【样例解释】\n\n反和谐主义者选择的小区分别是小区3（看守的小区是小区1、小区2和小区5）、小区7（看守的小区是小区4和小区6）和小区9（看守的小区是小区8），这样会损失的总和谐值为3+3+11=17。\n\n或者选择的小区分别是小区1（看守的小区是小区2和小区3）、小区4（看守的小区是小区5和小区7）和小区9（看守的小区是小区8），这样会损失的总和谐值为2+4+11=17。\n\n如果同时选择小区3、小区4和小区9，虽然损失的总和谐值为18，但是小区3和小区4都要派猪来看守小区5，这不符合条件，故此方案不可行。\n\n\n【数据约定】\n\n对于20%的数据，保证每个点不存在于任何一个环中；\n\n对于另外30%的数据，保证图中只存在一个环；\n\n对于100%的数据，有N<=1000000，M<=2000000，所有的权值不超过1000。\n", "locale": "zh-CN"}}}
{"pid": "P2479", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n1 0\n0 1\n1 1\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2010", "各省省选", "递归", "山东", "枚举"], "title": "[SDOI2010] 捉迷藏", "background": "iPig 在大肥猪学校刚上完了无聊的猪文课，天资聪慧的 iPig 被这门对他来说无比简单的课弄得非常寂寞，为了消除寂寞感，他决定和他的好朋友 giPi（鸡皮）玩一个更加寂寞的游戏——捉迷藏。但是，他们觉得，玩普通的捉迷藏没什么意思，还是不够寂寞，于是，他们决定玩寂寞无比的螃蟹版捉迷藏。\n", "description": "螃蟹版捉迷藏，顾名思义，就是说他们在玩游戏的时候只能沿水平或垂直方向走。\n\n一番寂寞的剪刀石头布后，他们决定 iPig 去捉 giPi。由于他们都很熟悉大肥猪学校的地形了，所以 giPi 只会躲在大肥猪学校内 $N$ 个隐秘地点之一，显然 iPig 也只会在那 $N$ 个地点内找 giPi。\n\n游戏一开始，他们从这 $N$ 个隐秘地点之中选定一个地点，iPig 保持不动，然后 giPi 用 $30$ 秒的时间逃离现场（显然，giPi 不会呆在原地）。然后 iPig 会随机地去找 giPi，直到找到为止。\n\n由于 iPig 很懒，所以他总是走最短的路径，而且，他选择起始点不是随便选的，他想找一个地点，使得该地点到（除了这个地点以外的）最远的地点和最近的地点的距离差最小。iPig现在想知道这个距离差最小是多少。\n\n由于 iPig 现在手上没有电脑，所以不能编程解决这个如此简单的问题，所以他马上打了个电话，要求你帮他解决这个问题。iPig 告诉了你大肥猪学校的 $N$ 个隐秘地点的坐标，请你编程求出 iPig 的问题。", "inputFormat": "\n第 $1$ 行：一个整数 $N$；\n\n接下来 $N$ 行：每行两个整数 $X_i,Y_i$，表示第 $i$ 个地点的坐标。", "outputFormat": "一个整数，为距离差的最小值。\n", "hint": "$30\\%$ 的数据中，$2\\le N\\le 10^3$；\n\n$100\\%$ 的数据中，$2\\le N\\le 10^5$，$0\\le X_i,Y_i\\le 10^9$。\n\n数据保证点不重合。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Hide and Seek", "background": "iPig just finished a boring Pig Language class at the Big Fat Pig School. Being very bright, iPig felt extremely lonely because the class was too easy for him. To fight the loneliness, he decided to play an even lonelier game—hide-and-seek—with his good friend giPi (jī pí). However, they thought regular hide-and-seek was not lonely enough, so they chose to play an extremely lonely crab-style version of hide-and-seek.", "description": "Crab-style hide-and-seek, as the name suggests, means they can only move horizontally or vertically while playing.\n\nAfter a lonely round of rock-paper-scissors, they decided that iPig would seek giPi. Since they both know the layout of the Big Fat Pig School very well, giPi will only hide at one of $N$ hidden locations, and iPig will only search among those same $N$ locations.\n\nAt the start of the game, they choose one location from these $N$ hidden locations. iPig stays put, and giPi uses $30$ seconds to run away (clearly, giPi will not stay at the starting location). Then iPig will randomly search for giPi until he finds him.\n\nBecause iPig is lazy, he always walks along the shortest path. Moreover, he does not choose the starting location arbitrarily—he wants to find a location such that the difference between the distance to the farthest other location and the distance to the nearest other location (excluding the starting location itself) is minimized. iPig now wants to know what this minimum difference is.\n\nSince iPig does not have a computer at hand, he cannot program to solve such a simple problem. He immediately calls you and asks for help. iPig gives you the coordinates of the $N$ hidden locations in the Big Fat Pig School. Please write a program to answer iPig’s question.", "inputFormat": "Line $1$: An integer $N$.\n\nThe next $N$ lines: Each line contains two integers $X_i, Y_i$, representing the coordinates of the $i$-th location.", "outputFormat": "One integer, the minimum possible value of the distance difference.", "hint": "Constraints:\n- In $30\\%$ of the testdata, $2 \\le N \\le 10^3$.\n- In $100\\%$ of the testdata, $2 \\le N \\le 10^5$, $0 \\le X_i, Y_i \\le 10^9$.\n\nIt is guaranteed that all points are distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 捉迷藏", "background": "iPig 在大肥猪学校刚上完了无聊的猪文课，天资聪慧的 iPig 被这门对他来说无比简单的课弄得非常寂寞，为了消除寂寞感，他决定和他的好朋友 giPi（鸡皮）玩一个更加寂寞的游戏——捉迷藏。但是，他们觉得，玩普通的捉迷藏没什么意思，还是不够寂寞，于是，他们决定玩寂寞无比的螃蟹版捉迷藏。\n", "description": "螃蟹版捉迷藏，顾名思义，就是说他们在玩游戏的时候只能沿水平或垂直方向走。\n\n一番寂寞的剪刀石头布后，他们决定 iPig 去捉 giPi。由于他们都很熟悉大肥猪学校的地形了，所以 giPi 只会躲在大肥猪学校内 $N$ 个隐秘地点之一，显然 iPig 也只会在那 $N$ 个地点内找 giPi。\n\n游戏一开始，他们从这 $N$ 个隐秘地点之中选定一个地点，iPig 保持不动，然后 giPi 用 $30$ 秒的时间逃离现场（显然，giPi 不会呆在原地）。然后 iPig 会随机地去找 giPi，直到找到为止。\n\n由于 iPig 很懒，所以他总是走最短的路径，而且，他选择起始点不是随便选的，他想找一个地点，使得该地点到（除了这个地点以外的）最远的地点和最近的地点的距离差最小。iPig现在想知道这个距离差最小是多少。\n\n由于 iPig 现在手上没有电脑，所以不能编程解决这个如此简单的问题，所以他马上打了个电话，要求你帮他解决这个问题。iPig 告诉了你大肥猪学校的 $N$ 个隐秘地点的坐标，请你编程求出 iPig 的问题。", "inputFormat": "\n第 $1$ 行：一个整数 $N$；\n\n接下来 $N$ 行：每行两个整数 $X_i,Y_i$，表示第 $i$ 个地点的坐标。", "outputFormat": "一个整数，为距离差的最小值。\n", "hint": "$30\\%$ 的数据中，$2\\le N\\le 10^3$；\n\n$100\\%$ 的数据中，$2\\le N\\le 10^5$，$0\\le X_i,Y_i\\le 10^9$。\n\n数据保证点不重合。", "locale": "zh-CN"}}}
{"pid": "P2480", "type": "P", "difficulty": 6, "samples": [["4 2", "2048"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2010", "各省省选", "山东", "O2优化", "素数判断,质数,筛法", "中国剩余定理 CRT", "Lucas 定理"], "title": "[SDOI2010] 古代猪文", "background": "“在那山的那边海的那边有一群小肥猪。他们活泼又聪明，他们调皮又灵敏。他们自由自在生活在那绿色的大草坪，他们善良勇敢相互都关心……”\n\n——选自猪王国民歌\n\n很久很久以前，在山的那边海的那边的某片风水宝地曾经存在过一个猪王国。猪王国地理位置偏僻，实施的是适应当时社会的自给自足的庄园经济，很少与外界联系，商贸活动就更少了。因此也很少有其他动物知道这样一个王国。\n\n猪王国虽然不大，但是土地肥沃，屋舍俨然。如果一定要拿什么与之相比的话，那就只能是东晋陶渊明笔下的大家想象中的桃花源了。猪王勤政爱民，猪民安居乐业，邻里和睦相处，国家秩序井然，经济欣欣向荣，社会和谐稳定。和谐的社会带给猪民们对工作火红的热情和对未来的粉色的憧憬。\n\n小猪 iPig 是猪王国的一个很普通的公民。小猪今年 10 岁了，在大肥猪学校上小学三年级。和大多数猪一样，他不是很聪明，因此经常遇到很多或者稀奇古怪或者旁人看来轻而易举的事情令他大伤脑筋。小猪后来参加了全猪信息学奥林匹克竞赛（Pig Olympiad in Informatics，POI），取得了不错的名次，最终保送进入了猪王国大学（Pig Kingdom University，PKU）深造。\n\n现在的小猪已经能用计算机解决简单的问题了，比如能用 P++ 语言编写程序计算出 $A + B$ 的值。这个“成就”已经成为了他津津乐道的话题。当然，不明真相的同学们也开始对他刮目相看啦~\n\n小猪的故事就将从此展开，伴随大家两天时间，希望大家能够喜欢小猪。", "description": "猪王国的文明源远流长，博大精深。\n\niPig 在大肥猪学校图书馆中查阅资料，得知远古时期猪文文字总个数为 $n$。当然，一种语言如果字数很多，字典也相应会很大。当时的猪王国国王考虑到如果修一本字典，规模有可能远远超过康熙字典，花费的猪力、物力将难以估量。故考虑再三没有进行这一项劳猪伤财之举。当然，猪王国的文字后来随着历史变迁逐渐进行了简化，去掉了一些不常用的字。\n\niPig 打算研究古时某个朝代的猪文文字。根据相关文献记载，那个朝代流传的猪文文字恰好为远古时期的 $1/k$，其中 $k$ 是 $n$ 的一个正约数（可以是 $1$ 或 $n$）。不过具体是哪 $1/k$，以及 $k$ 是多少，由于历史过于久远，已经无从考证了。\n\niPig 觉得只要符合文献，每一种 $k|n$ 都是有可能的。他打算考虑到所有可能的 $k$。显然当 $k$ 等于某个定值时，该朝的猪文文字个数为 $n/k$。然而从 $n$ 个文字中保留下 $n/k$ 个的情况也是相当多的。iPig 预计，如果所有可能的 $k$ 的所有情况数加起来为 $p$ 的话，那么他研究古代文字的代价将会是 $g^p$。\n\n现在他想知道猪王国研究古代文字的代价是多少。由于 iPig 觉得这个数字可能是天文数字，所以你只需要告诉他答案除以 $999911659$ 的余数就可以了。", "inputFormat": "一行两个正整数 $n,g$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n- 对于 $10\\%$ 的数据，$1\\le n \\le 50$；  \n- 对于 $20\\%$ 的数据，$1\\le n \\le 1000$；  \n- 对于 $40\\%$ 的数据，$1\\le n \\le 10^5$；  \n- 对于 $100\\%$ 的数据，$1\\le n,g \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Ancient Pig Script", "background": "\"Beyond those mountains and beyond those seas lives a group of little chubby pigs. They are lively and clever, naughty yet quick. They live freely on that vast green lawn, kind and brave, caring for one another...\"\n\n— From the national anthem of the Pig Kingdom.\n\nA long time ago, in a blessed land beyond the mountains and seas, there once existed a Pig Kingdom. The Pig Kingdom was in a remote location and adopted a self-sufficient manor economy suited to its time, with little contact with the outside world and even fewer commercial activities. As a result, few other animals knew of such a kingdom.\n\nAlthough the Pig Kingdom was not large, its land was fertile and its houses were well ordered. If one had to compare it to something, it could only be the imagined Peach Blossom Spring described by Tao Yuanming of the Eastern Jin. The Pig King governed diligently and loved his people; the pig citizens lived and worked in peace and contentment; neighbors got along harmoniously; the country was orderly; the economy thrived; and society was harmonious and stable. Such harmony inspired in the pig citizens a fiery passion for work and a rosy vision for the future.\n\nThe little pig iPig was an ordinary citizen of the Pig Kingdom. He was 10 years old this year and in the third grade at Big Fat Pig Elementary School. Like most pigs, he was not very smart, so he often ran into problems that were either odd or seemed trivial to others, giving him big headaches. Later, he took part in the Pig Olympiad in Informatics (POI), achieved a good ranking, and was finally recommended for admission to Pig Kingdom University (PKU) for further study.\n\nNow iPig can use a computer to solve simple problems, such as writing a program in the P++ language to compute the value of $A + B$. This “achievement” has become a favorite topic of his. Of course, classmates who do not know the full story have begun to look at him with new respect.\n\niPig’s story begins here and will accompany everyone for two days. We hope you will enjoy it.", "description": "The civilization of the Pig Kingdom has a long history and great depth.\n\nIn the library of Big Fat Pig School, iPig learned from reference materials that the total number of characters in the ancient pig script was $n$. Of course, if a language has many characters, its dictionary will be correspondingly large. The Pig King of that time considered that if a dictionary were compiled, its scale might far exceed the Kangxi Dictionary, and the manpower and material resources required would be immeasurable. After careful consideration, he did not undertake this labor- and resource-intensive project. Naturally, the script of the Pig Kingdom was later simplified over history by removing some uncommon characters.\n\niPig plans to study the pig script from a certain dynasty in ancient times. According to relevant documents, the characters used in that dynasty happened to be exactly $1/k$ of those in the distant past, where $k$ is a positive divisor of $n$ (it can be $1$ or $n$). However, exactly which $1/k$ was used, and what $k$ was, can no longer be verified due to the remoteness of history.\n\niPig believes that as long as it matches the documents, every $k \\mid n$ is possible. He will consider all possible $k$. Clearly, when $k$ is fixed, the number of characters in that dynasty’s script is $n/k$. However, the number of ways to retain $n/k$ characters out of $n$ is also quite large. iPig estimates that if the total number of cases over all possible $k$ sums to $p$, then the cost of his research on the ancient script will be $g^p$.\n\nHe now wants to know the cost for the Pig Kingdom to study the ancient script. Since iPig thinks this number may be astronomical, you only need to tell him the remainder of the answer modulo $999911659$.", "inputFormat": "One line containing two positive integers $n, g$.", "outputFormat": "Output one line containing a single integer representing the answer.", "hint": "- Constraints\n  - For $10\\%$ of the testdata, $1 \\le n \\le 50$.\n  - For $20\\%$ of the testdata, $1 \\le n \\le 1000$.\n  - For $40\\%$ of the testdata, $1 \\le n \\le 10^5$.\n  - For $100\\%$ of the testdata, $1 \\le n, g \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 古代猪文", "background": "“在那山的那边海的那边有一群小肥猪。他们活泼又聪明，他们调皮又灵敏。他们自由自在生活在那绿色的大草坪，他们善良勇敢相互都关心……”\n\n——选自猪王国民歌\n\n很久很久以前，在山的那边海的那边的某片风水宝地曾经存在过一个猪王国。猪王国地理位置偏僻，实施的是适应当时社会的自给自足的庄园经济，很少与外界联系，商贸活动就更少了。因此也很少有其他动物知道这样一个王国。\n\n猪王国虽然不大，但是土地肥沃，屋舍俨然。如果一定要拿什么与之相比的话，那就只能是东晋陶渊明笔下的大家想象中的桃花源了。猪王勤政爱民，猪民安居乐业，邻里和睦相处，国家秩序井然，经济欣欣向荣，社会和谐稳定。和谐的社会带给猪民们对工作火红的热情和对未来的粉色的憧憬。\n\n小猪 iPig 是猪王国的一个很普通的公民。小猪今年 10 岁了，在大肥猪学校上小学三年级。和大多数猪一样，他不是很聪明，因此经常遇到很多或者稀奇古怪或者旁人看来轻而易举的事情令他大伤脑筋。小猪后来参加了全猪信息学奥林匹克竞赛（Pig Olympiad in Informatics，POI），取得了不错的名次，最终保送进入了猪王国大学（Pig Kingdom University，PKU）深造。\n\n现在的小猪已经能用计算机解决简单的问题了，比如能用 P++ 语言编写程序计算出 $A + B$ 的值。这个“成就”已经成为了他津津乐道的话题。当然，不明真相的同学们也开始对他刮目相看啦~\n\n小猪的故事就将从此展开，伴随大家两天时间，希望大家能够喜欢小猪。", "description": "猪王国的文明源远流长，博大精深。\n\niPig 在大肥猪学校图书馆中查阅资料，得知远古时期猪文文字总个数为 $n$。当然，一种语言如果字数很多，字典也相应会很大。当时的猪王国国王考虑到如果修一本字典，规模有可能远远超过康熙字典，花费的猪力、物力将难以估量。故考虑再三没有进行这一项劳猪伤财之举。当然，猪王国的文字后来随着历史变迁逐渐进行了简化，去掉了一些不常用的字。\n\niPig 打算研究古时某个朝代的猪文文字。根据相关文献记载，那个朝代流传的猪文文字恰好为远古时期的 $1/k$，其中 $k$ 是 $n$ 的一个正约数（可以是 $1$ 或 $n$）。不过具体是哪 $1/k$，以及 $k$ 是多少，由于历史过于久远，已经无从考证了。\n\niPig 觉得只要符合文献，每一种 $k|n$ 都是有可能的。他打算考虑到所有可能的 $k$。显然当 $k$ 等于某个定值时，该朝的猪文文字个数为 $n/k$。然而从 $n$ 个文字中保留下 $n/k$ 个的情况也是相当多的。iPig 预计，如果所有可能的 $k$ 的所有情况数加起来为 $p$ 的话，那么他研究古代文字的代价将会是 $g^p$。\n\n现在他想知道猪王国研究古代文字的代价是多少。由于 iPig 觉得这个数字可能是天文数字，所以你只需要告诉他答案除以 $999911659$ 的余数就可以了。", "inputFormat": "一行两个正整数 $n,g$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n- 对于 $10\\%$ 的数据，$1\\le n \\le 50$；  \n- 对于 $20\\%$ 的数据，$1\\le n \\le 1000$；  \n- 对于 $40\\%$ 的数据，$1\\le n \\le 10^5$；  \n- 对于 $100\\%$ 的数据，$1\\le n,g \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2481", "type": "P", "difficulty": 6, "samples": [["2 3", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "山东", "数位 DP", "组合数学"], "title": "[SDOI2010] 代码拍卖会", "background": "", "description": "随着 iPig 在 P++ 语言上的造诣日益提升，他形成了自己一套完整的代码库。猪王国想参加 POI 的童鞋们都争先恐后问 iPig 索要代码库。iPig 不想把代码库给所有想要的小猪，只想给其中的一部分既关系好又肯出钱的小猪，于是他决定举行了一个超大型拍卖会。\n\n在拍卖会上，所有的 $N$ 头小猪将会按照和 iPig 的好感度从低到高，从左到右地在 iPig 面前站成一排。每个小猪身上都有 $9$ 猪币（与人民币汇率不明），从最左边开始，每个小猪依次举起一块牌子，上面写上想付出的买代码库的猪币数量（$1$ 到 $9$ 之间的一个整数）。大家都知道，如果自己付的钱比左边的猪少，肯定得不到梦寐以求的代码库，因此从第二只起，每只猪出的钱都大于等于左边猪出的价钱。最终出的钱最多的小猪（们）会得到 iPig 的代码库真传，向着保送 PKU（Pig Kingdom University）的梦想前进。\n\niPig 对自己想到的这个点子感到十分满意，在去现场的路上，iPig 就在想象拍卖会上会出现的场景，例如一共会出现多少种出价情况之类的问题，但这些问题都太简单了，iPig 早已不感兴趣了，他想要去研究更加困难的问题。iPig 发现如果他从台上往下看，所有小猪举的牌子从左到右将会正好构成一个 $N$ 位的整数，他现在想要挑战的问题是所有可能构成的整数中能正好被 $P$ 整除的有多少个。由于答案过大，他只想要知道答案 $\\bmod\\ 999911659$ 就行了。", "inputFormat": "有且仅有一行两个数 $N\\ (1 \\le N \\le 10^{18})$ 和 $P\\ (1 \\le P \\le 500)$，用一个空格分开。", "outputFormat": "有且仅有一行一个数，表示答案除以 $999911659$ 的余数。\n", "hint": "### 样例解释\n\n方案可以是：$12,\\allowbreak 15,\\allowbreak 18,\\allowbreak 24,\\allowbreak 27,\\allowbreak 33,\\allowbreak 36,\\allowbreak 39,\\allowbreak 45,\\allowbreak 48,\\allowbreak 57,\\allowbreak 66,\\allowbreak 69,\\allowbreak 78,\\allowbreak 99$，共 $15$ 种。\n\n### 数据规模\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y0nme218.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Code Auction", "background": "", "description": "As iPig’s mastery of the P++ language grows, he has built his own complete code library. Students in the Pig Kingdom who want to participate in POI are all scrambling to ask iPig for the library. iPig does not want to give the code library to every piglet who wants it; he only wants to give it to some piglets who are both close to him and willing to pay, so he decides to hold a huge auction.\n\nAt the auction, all $N$ piglets will stand in a line from left to right, ordered by their favorability with iPig from low to high. Each piglet has $9$ pig-coins (exchange rate with RMB unknown). Starting from the left, each piglet in turn raises a sign showing an integer from $1$ to $9$, indicating how many pig-coins they want to pay for the code library. Everyone knows that if they bid less than the pig on their left, they will certainly not get the coveted code library; therefore, starting from the second pig, each bid is greater than or equal to the bid of the pig on the left. The piglet(s) who bid the most in the end will receive iPig’s code library and move toward the dream of being recommended to PKU (Pig Kingdom University).\n\niPig is very pleased with this idea. On the way to the venue, he starts imagining the scenes at the auction, such as how many different bidding sequences there will be, but these questions are too easy and no longer interest him. He wants to study a harder problem. iPig notices that if he looks down from the stage, the signs raised by the pigs from left to right form exactly an $N$-digit integer. He now wants to tackle the following problem: among all possible integers that can be formed, how many are exactly divisible by $P$? Since the answer can be large, he only wants the answer $\\bmod\\ 999911659$.", "inputFormat": "There is exactly one line containing two numbers $N\\ (1 \\le N \\le 10^{18})$ and $P\\ (1 \\le P \\le 500)$, separated by a space.", "outputFormat": "Output exactly one line containing a single number, the remainder when the answer is divided by $999911659$.", "hint": "### Sample Explanation\n\nThe valid sequences can be: $12,\\allowbreak 15,\\allowbreak 18,\\allowbreak 24,\\allowbreak 27,\\allowbreak 33,\\allowbreak 36,\\allowbreak 39,\\allowbreak 45,\\allowbreak 48,\\allowbreak 57,\\allowbreak 66,\\allowbreak 69,\\allowbreak 78,\\allowbreak 99$, for a total of $15$.\n\n### Constraints\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y0nme218.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 代码拍卖会", "background": "", "description": "随着 iPig 在 P++ 语言上的造诣日益提升，他形成了自己一套完整的代码库。猪王国想参加 POI 的童鞋们都争先恐后问 iPig 索要代码库。iPig 不想把代码库给所有想要的小猪，只想给其中的一部分既关系好又肯出钱的小猪，于是他决定举行了一个超大型拍卖会。\n\n在拍卖会上，所有的 $N$ 头小猪将会按照和 iPig 的好感度从低到高，从左到右地在 iPig 面前站成一排。每个小猪身上都有 $9$ 猪币（与人民币汇率不明），从最左边开始，每个小猪依次举起一块牌子，上面写上想付出的买代码库的猪币数量（$1$ 到 $9$ 之间的一个整数）。大家都知道，如果自己付的钱比左边的猪少，肯定得不到梦寐以求的代码库，因此从第二只起，每只猪出的钱都大于等于左边猪出的价钱。最终出的钱最多的小猪（们）会得到 iPig 的代码库真传，向着保送 PKU（Pig Kingdom University）的梦想前进。\n\niPig 对自己想到的这个点子感到十分满意，在去现场的路上，iPig 就在想象拍卖会上会出现的场景，例如一共会出现多少种出价情况之类的问题，但这些问题都太简单了，iPig 早已不感兴趣了，他想要去研究更加困难的问题。iPig 发现如果他从台上往下看，所有小猪举的牌子从左到右将会正好构成一个 $N$ 位的整数，他现在想要挑战的问题是所有可能构成的整数中能正好被 $P$ 整除的有多少个。由于答案过大，他只想要知道答案 $\\bmod\\ 999911659$ 就行了。", "inputFormat": "有且仅有一行两个数 $N\\ (1 \\le N \\le 10^{18})$ 和 $P\\ (1 \\le P \\le 500)$，用一个空格分开。", "outputFormat": "有且仅有一行一个数，表示答案除以 $999911659$ 的余数。\n", "hint": "### 样例解释\n\n方案可以是：$12,\\allowbreak 15,\\allowbreak 18,\\allowbreak 24,\\allowbreak 27,\\allowbreak 33,\\allowbreak 36,\\allowbreak 39,\\allowbreak 45,\\allowbreak 48,\\allowbreak 57,\\allowbreak 66,\\allowbreak 69,\\allowbreak 78,\\allowbreak 99$，共 $15$ 种。\n\n### 数据规模\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y0nme218.png)\n", "locale": "zh-CN"}}}
{"pid": "P2482", "type": "P", "difficulty": 6, "samples": [["3 10\nMP D D F F\nZP N N N D\nFP J J J J\nF F D D J J F F K D\n", "FP\nDEAD\nDEAD\nJ J J J J J D\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2010", "各省省选", "山东"], "title": "[SDOI2010] 猪国杀", "background": null, "description": "### 游戏背景\n\n《猪国杀》是一种多猪牌类回合制游戏，一共有 $3$ 种角色：主猪，忠猪，反猪。每局游戏主猪有且只有 $1$ 只，忠猪和反猪可以有多只，每只猪扮演 $1 $ 种角色。\n\n### 游戏目的\n\n主猪 / $\\texttt{MP}$：自己存活的情况下消灭所有的反猪。  \n忠猪 / $\\texttt{ZP}$：不惜一切保护主猪，胜利条件与主猪相同。  \n反猪 / $\\texttt{FP}$：杀死主猪。\n\n### 游戏过程\n\n游戏开始时，每个玩家手里都会有 $4$ 张牌，且体力上限和初始体力都是 $4$ 。\n\n开始游戏时，从主猪开始，按照逆时针方向（数据中就是按照编号从 $ 1 , 2, 3 \\ldots n , 1 \\ldots $ 的顺序）依次行动。\n\n每个玩家自己的回合可以分为 2 个阶段：\n\n* **摸牌阶段**：从牌堆顶部摸 $2$ 张牌，依次放到手牌的最右边；  \n* **出牌阶段**：你可以使用任意张牌，每次使用牌的时候都使用最靠左的能够使用的牌。当然，要满足如下规则：\n  1. 如果没有猪哥连弩，每个出牌阶段只能使用 $1$ 次「杀」来攻击；\n  2. 任何牌被使用后被弃置（武器是装备上）；被弃置的牌以后都不能再用，即与游戏无关。\n\n### 各种牌介绍\n\n每张手牌用 $1$ 个字母表示，字母代表牌的种类。\n\n#### 基本牌\n\n- 『桃 / $\\texttt{P}$』在自己的回合内，如果自己的体力值不等于体力上限，那么使用 $1$ 个桃可以为自己补充 $1$ 点体力，否则不能使用桃；桃只能对自己使用；在自己的回合外，如果自己的体力变为 $0$ 或者更低，那么也可以使用。\n\n- 『杀 / $\\texttt{K}$』在自己的回合内，对攻击范围内除自己以外的 $1$ 名角色使用。如果没有被『闪』抵消，则造成 $1$ 点伤害。无论有无武器，杀的攻击范围都是 $1$。\n\n- 『闪 / $\\texttt{D}$』当你受到杀的攻击时，可以弃置 $1$ 张闪来抵消杀的效果。\n\n#### 锦囊牌\n\n- 『决斗 / $\\texttt{F}$』出牌阶段，对除自己以外任意 $1$ 名角色使用，由目标角色先开始，自己和目标角色轮流弃置 $1$ 张杀，首先没有杀可弃的一方受到 $1$ 点伤害，另一方视为此伤害的来源。\n\n- 『南猪入侵 / $\\texttt{N}$』出牌阶段，对除你以外所有角色使用，按逆时针顺序从使用者下家开始依次结算，除非弃置 $1$ 张杀，否则受到 $1$ 点伤害。\n\n- 『万箭齐发 / $\\texttt{W}$』和南猪入侵类似，不过要弃置的不是杀而是闪。\n\n- 『无懈可击 / $\\texttt{J}$』在目标锦囊生效前抵消其效果。每次有 $1$ 张锦囊即将生效时，从使用这张锦囊的猪开始，按照逆时针顺序，依次得到使用无懈可击的机会；效果：用于决斗时，决斗无效并弃置；用于南猪入侵或万箭齐发时，当结算到某个角色时才能使用，当前角色不需弃置牌并且不会受到伤害（仅对 $1$ 个角色产生效果）；用于无懈可击时，成为目标的无懈可击被无效。\n\n#### 装备牌\n\n- 『猪哥连弩 / $\\texttt{Z}$』武器，攻击范围 $1$ ，出牌阶段你可以使用任意张杀; 同一时刻最多只能装 $1$ 把武器；如果先前已经有了 $1$ 把武器，那么之后再装武器的话，会弃置以前的武器来装现在的武器。\n\n### 特殊事件及概念解释\n\n* **伤害来源**：杀、南猪入侵、万箭齐发的伤害来源均是使用该牌的猪，决斗的伤害来源如上；\n\n* **距离**：两只猪的距离定义为沿着逆时针方向间隔的猪数 $+1$ 。即初始时 $1$ 和 $2$ 的距离为 $1$ ，但是 $2$ 和 $1$ 的距离就是 $n-1$ 。注意一个角色的死亡会导致一些猪距离的改变；\n\n* **玩家死亡**：如果该玩家的体力降到 $0$ 或者更低，并且自己手中没有足够的桃使得自己的体力值回到 $1$ ，那么就死亡了，死亡后所有的牌（装备区，手牌区）被弃置；\n\n* **奖励与惩罚**：反猪死亡时，最后一个伤害来源处（即使是反猪）立即摸 $3$ 张牌。忠猪死亡时，如果最后一个伤害来源是主猪，那么主猪所有装备牌、手牌被弃置。\n\n注意：一旦达成胜利条件，游戏立刻结束，因此即使会摸 $3$ 张牌或者还有牌可以用也不用执行了。\n\n现在，我们已经知道每只猪的角色、手牌，还有牌堆初始情况，并且假设每个角色会按照如下的行为准则进行游戏，你需要做的就是告诉小猪 iPig 最后的结果。\n\n### 几种行为\n\n* **献殷勤**：使用无懈可击挡下南猪入侵、万箭齐发、决斗；使用无懈可击抵消表敌意；  \n* **表敌意**：对某个角色使用杀、决斗；使用无懈可击抵消献殷勤；  \n* **跳忠**：即通过行动表示自己是忠猪。跳忠行动就是对主猪或对某只已经跳忠的猪献殷勤，或者对某只已经跳反的猪表敌意；  \n* **跳反**：即通过行动表示自己是反猪。跳反行动就是对主猪或对某只已经跳忠的猪表敌意，或者对某只已经跳反的猪献殷勤。\n\n**注意：忠猪不会跳反，反猪也不会跳忠；不管是忠猪还是反猪，能够跳必然跳**。\n\n### 行动准则\n\n#### 共性\n\n* 每个角色如果手里有桃且生命值未满，那么必然吃掉；\n* 有南猪入侵、万箭齐发，必然使用；有装备必然装上；\n* 受到杀时，有闪必然弃置；\n* 响应南猪入侵或者万箭齐发时候，有杀 / 闪必然弃置；\n* 不会对未表明身份的猪献殷勤（**包括自己**）。\n\n#### 特性\n\n - 主猪：\n   + 主猪会认为「没有跳身份，且用南猪入侵 / 万箭齐发对自己造成伤害的猪」是**类**反猪（没伤害到不算，注意类反猪并没有表明身份），如果之后跳了，那么主猪会重新认识这只猪；  \n   + 对于每种表敌意的方式，对逆时针方向能够执行到的第一只类反猪或者已跳反猪表；如果没有，那么就不表敌意；\n   + 决斗时会不遗余力弃置杀；\n   + 如果能对已经跳忠的猪或自己献殷勤，那么一定献；如果能够对已经跳反的猪表敌意，那么一定表。\n - 忠猪：\n   + 对于每种表敌意的方式，对「逆时针方向能够执行到的第一只已经跳反的猪」表，如果没有，那么就不表敌意；\n   + 决斗时，如果对方是主猪，那么不会弃置杀，否则，会不遗余力弃置杀；\n   + 如果有机会对主猪或者已经跳忠的猪献殷勤，那么一定献。\n - 反猪：\n   + 对于每种表敌意的方式，如果有机会则对主猪表，否则，对「逆时针方向能够执行到的第一只已经跳忠的猪」表，如果没有，那么就不表敌意；\n   + 决斗时会不遗余力弃置杀；\n   + 如果有机会对已经跳反的猪献殷勤，那么一定献。\n\n限于 iPig 只会用 P++ 语言写 A + B，他请你用 Pigcal (Pascal)、P (C) 或 P++ (C++) 语言来帮他预测最后的结果。", "inputFormat": "输入文件第一行包含两个正整数 $ n $ $ (2 \\leqslant n \\leqslant 10) $ 和 $m$ $ (m \\leqslant 2000) $，分别代表玩家数和牌堆中牌的数量。数据保证牌的数量够用。\n\n接下来 $n$ 行，每行 $5$ 个字符串，依次表示对第 $i$ 只猪的角色和初始 $4 $ 张手牌描述。编号为 $1$ 的肯定是主猪。\n\n再接下来一行，一共 $m$ 个字符串，按照从牌堆顶部到牌堆底部的顺序描述每张牌。\n\n**注意：所有的相邻的两个字符串都严格用 $1$ 个空格隔开，行尾没有多余空格**。", "outputFormat": "输出数据第一行包含一个字符串代表游戏结果。如果是主猪胜利，那么输出 $\\texttt{MP}$ ，否则输出 $\\texttt{FP}$ 。数据保证游戏总会结束。\n\n接下来 $n$ 行，第 $i$ 行是对第 $i$ 只猪的手牌描述（注意只需要输出手牌），按照手牌从左往右的顺序输出，相邻两张牌用 $1$ 个空格隔开，行末尾没有多余空格。如果这只猪已阵亡，那么只要输出 $\\texttt{DEAD}$ 即可。\n\n**注意：如果要输出手牌而没有手牌的话，那么只需输出 $1$ 个空行**。\n\n**由于数据问题，若牌堆已空，按照每次抽牌抽到的都是最后一张。**", "hint": "### 样例解释\n\n第一回合：\n* 主猪没有目标可以表敌意；\n* 接下来忠猪使用了 $3$ 张南猪入侵，主猪掉了 $3$ 点体力，并认为该角色为类反猪，$3$ 号角色尽管手里有无懈可击，但是因为自己未表明身份，所以同样不能对自己用，乖乖掉 $3$ 点体力；  \n\n下一回合：\n* 反猪无牌可出；\n* 接下来主猪对着类反猪爆发，使用 $4$ 张决斗，忠猪死亡，结果主猪弃掉所有牌；\n* 接下来反猪摸到 $1$ 张杀直接杀死主猪获胜。\n\n### 子任务\n\n一共 $20$ 组测试数据，每个点 $5$ 分。\n\n$10\\%$ 的数据没有锦囊牌，另外 $20\\%$ 的数据没有无懈可击。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Pig Kingdom Kill", "background": "", "description": "### Game Background\n\n\"Pig Kingdom Kill\" is a turn-based card game for multiple pigs. There are 3 types of roles: **Main Pig (MP)**, **Loyal Pig (ZP)**, and **Rebel Pig (FP)**. In every game, there is exactly 1 MP. There can be multiple ZPs and FPs. Each pig plays exactly one role.\n\n### Game Objective\n\n  * **Main Pig (MP):** Eliminate all Rebel Pigs (FP) while surviving.\n  * **Loyal Pig (ZP):** Protect the Main Pig at all costs. The victory condition is the same as the MP.\n  * **Rebel Pig (FP):** Kill the Main Pig.\n\n### Game Process\n\nAt the start of the game, each player holds $4$ cards. Both the max HP and initial HP are $4$.\n\nThe game starts with the Main Pig and proceeds in **counter-clockwise order** (in the data, this is the order of IDs $1, 2, 3 \\dots n, 1 \\dots$).\n\nEach player's turn consists of two phases:\n\n1.  **Draw Phase:** Draw $2$ cards from the top of the deck and place them at the rightmost end of the hand.\n2.  **Play Phase:** You may use any number of cards. When playing cards, you must always use the **leftmost** usable card. However, the following rules apply:\n    1.  Without a \"Zhuge Crossbow\", you can only use **1** \"Kill\" card to attack per Play Phase.\n    2.  Any card used is discarded (weapons are equipped). Discarded cards cannot be used again and are removed from the game.\n\n### Card Descriptions\n\nEach card is represented by a single letter indicating its type.\n\n#### Basic Cards\n\n  * **Peach (`P`):** During your turn, if your HP is not full, you can use a Peach to recover $1$ HP. Otherwise, it cannot be used. Peach can only be used on yourself. *Exception:* If your HP drops to $0$ or below during someone else's turn, you can use a Peach immediately to save yourself.\n  * **Kill (`K`):** During your turn, use this on any other character within your attack range. If the target does not use a \"Dodge\" to cancel it, they take $1$ point of damage. Regardless of weapons, the default attack range of a Kill is $1$.\n  * **Dodge (`D`):** When attacked by a \"Kill\", you may discard a Dodge to negate the effect.\n\n#### Scroll Cards (Strategy Cards)\n\n  * **Duel (`F`):** During the Play Phase, use on any other character. Starting with the target, the target and the user take turns discarding a \"Kill\". The first side unable to discard a \"Kill\" takes $1$ damage. The other side is considered the source of this damage.\n  * **South Pig Invasion (`N`):** During the Play Phase, use on **all other characters**. Starting from the player to the user's right (next in turn order), proceed counter-clockwise. Unless a player discards a \"Kill\", they take $1$ damage.\n  * **Archery Attack (`W`):** Similar to South Pig Invasion, but players must discard a \"Dodge\" instead of a \"Kill\" to avoid damage.\n  * **Unassailable / Nullification (`J`):** Use this to negate the effect of a target scroll card before it takes effect.\n      * Each time a scroll is about to take effect on a character, players (starting from the scroll user) proceed counter-clockwise, having the opportunity to use `J`.\n      * **Effect:** When used against a Duel, the Duel is invalidated and discarded. When used against AOE (South Pig Invasion/Archery), it prevents the effect for **one specific target** (that target does not need to discard a card and takes no damage). When used against another `J`, it negates the previous `J` (re-enabling the original scroll).\n\n#### Equipment Cards\n\n  * **Zhuge Crossbow (`Z`):** A weapon. Attack range is $1$. During the Play Phase, you may use any number of \"Kill\" cards. You may only have $1$ weapon equipped at a time. If you equip a new weapon, the old one is discarded.\n\n### Special Events and Concepts\n\n  * **Damage Source:** For Kill, South Pig Invasion, and Archery Attack, the source is the user of the card. For Duel, the source is the winner of the duel.\n  * **Distance:** The distance between two pigs is defined as the number of pigs between them in the counter-clockwise direction $+ 1$. Initially, the distance from $1$ to $2$ is $1$, but the distance from $2$ to $1$ is $n-1$. Note that the death of a character changes the distance between the remaining pigs.\n  * **Player Death:** If a player's HP drops to $0$ or lower and they cannot use enough Peaches to bring their HP back to $1$, they die. Upon death, all their cards (hand and equipment) are discarded.\n  * **Rewards and Penalties:**\n      * When an **FP** dies, the source of the damage (even if it is another FP) immediately draws $3$ cards.\n      * When a **ZP** dies, if the damage source was the **MP**, the MP must discard all their cards (hand and equipment).\n      * *Note:* If the victory condition is met, the game ends immediately. No cards are drawn or discarded even if triggered.\n\nNow, given each pig's role, initial hand, and the initial deck configuration, assume every character follows the behavior rules below. Your task is to predict the final result for iPig.\n\n### Behavior Rules\n\n  * **Showing Goodwill:** Using `J` to negate South Pig Invasion, Archery, or Duel for someone; or using `J` to negate a \"Showing Animosity\" action.\n  * **Showing Animosity:** Using `K` or `F` on a character; or using `J` to negate a \"Showing Goodwill\" action.\n  * **Jump Loyal (Reveal as ZP):** Actions that show you are a Loyalist. This involves Showing Goodwill to the MP or an already revealed ZP, or Showing Animosity to an already revealed FP.\n  * **Jump Rebel (Reveal as FP):** Actions that show you are a Rebel. This involves Showing Animosity to the MP or an already revealed ZP, or Showing Goodwill to an already revealed FP.\n\n**Note: A ZP will never Jump Rebel, and an FP will never Jump Loyal. If a pig can reveal its identity (jump), it will.**\n\n### Action Logic\n\n#### General (Common to all)\n\n1.  If a player has a Peach (`P`) and HP is not full, they will strictly use it.\n2.  If holding South Pig Invasion (`N`) or Archery (`W`), they will strictly use it. If holding equipment (`Z`), they will strictly equip it.\n3.  When targeted by a Kill (`K`), if they have a Dodge (`D`), they will strictly discard it.\n4.  When responding to South Pig Invasion (`N`) or Archery (`W`), if they have the required card (`K`/`D`), they will strictly discard it.\n5.  Players will **never** Show Goodwill to a pig whose identity is unknown (this **includes themselves**—logic implies they don't 'reveal' to protect themselves unless they are already known or it helps a known ally, but the specific rule provided is \"Won't show goodwill to undefined identities\").\n\n#### Specific Role Logic\n\n  * **Main Pig (MP):**\n\n      * The MP considers any pig who has caused damage to the MP using South Pig Invasion (`N`) or Archery (`W`) **and has not yet revealed their identity** as a **\"Like-Rebel\"** (quasi-rebel). (Zero damage doesn't count. Note: Like-Rebels have not technically revealed their identity). If this pig later reveals an identity (\"Jumps\"), the MP updates their view of this pig.\n      * For any method of **Showing Animosity**: The MP targets the first **Like-Rebel** or **Revealed FP** found in the counter-clockwise direction (within range/validity). If none are found, the MP does not Show Animosity.\n      * During a Duel (`F`), the MP discards Kills as much as possible.\n      * If able to Show Goodwill to a Revealed ZP or themselves, the MP strictly does so. If able to Show Animosity to a Revealed FP, the MP strictly does so.\n\n  * **Loyal Pig (ZP):**\n\n      * For any method of **Showing Animosity**: The ZP targets the first **Revealed FP** found in the counter-clockwise direction. If none, they do not Show Animosity.\n      * During a Duel (`F`):\n          * If the opponent is the **MP**, the ZP will **not** discard a Kill (voluntarily takes damage).\n          * Otherwise, the ZP discards Kills as much as possible.\n      * If there is a chance to Show Goodwill to the MP or a Revealed ZP, the ZP strictly does so.\n\n  * **Rebel Pig (FP):**\n\n      * For any method of **Showing Animosity**: If able, strictly target the **MP**. Otherwise, target the first **Revealed ZP** found in the counter-clockwise direction. If neither is possible, do not Show Animosity.\n      * During a Duel (`F`), the FP discards Kills as much as possible.\n      * If there is a chance to Show Goodwill to a Revealed FP, the FP strictly does so.\n\nSince iPig can only write \"A + B\" in P++, he asks you to predict the result using Pascal, C, or C++.\n", "inputFormat": "The first line contains two positive integers $n$ $(2 \\leqslant n \\leqslant 10)$ and $m$ $(m \\leqslant 2000)$, representing the number of players and the number of cards in the deck. The data guarantees the number of cards is sufficient (see note below).\n\nThe next $n$ lines each contain 5 strings, describing the $i$-th pig. The first string is the role, followed by the initial 4 cards. The pig with ID $1$ is always the **MP**.\n\nThe following line contains $m$ strings, describing the cards in the deck from top to bottom.\n\n**Note: All adjacent strings are strictly separated by 1 space. There are no trailing spaces at the end of lines.**", "outputFormat": "The first line contains a string representing the game result. If the Main Pig wins, output `MP`. Otherwise, output `FP`. The data guarantees the game will end.\n\nThe next $n$ lines describe the hand cards of the $i$-th pig (only output the hand cards). Output them in order from left to right, separated by 1 space. There should be no trailing spaces. If the pig is dead, output `DEAD`.\n\n**Note: If a pig is alive but has no cards, output a single empty line.**\n\n**Due to data issues, if the draw pile becomes empty, treat it as if the last card drawn is drawn repeatedly for all subsequent draws.**", "hint": "### Sample Explanation\n\n**Turn 1:**\n\n  * **MP:** Has no target to Show Animosity to.\n  * **ZP:** Uses 3 South Pig Invasions (`N`).\n      * MP takes 3 damage. MP now views ZP as a \"Like-Rebel\".\n      * Player 3 (FP) has `J` (Nullification), but since they haven't revealed their identity, they cannot use it on themselves. They take 3 damage.\n  * **FP:** Starts turn.\n\n**Next Turn (implied flow):**\n\n  * **FP:** Has no playable offense cards (only `J`).\n  * **MP:** Acts. Uses 4 Duels (`F`) on the ZP (who is marked as Like-Rebel).\n      * ZP dies (ZP does not fight back against MP? Wait, ZP logic says \"If opponent is MP, do not discard Kill\". However, ZP is currently treated as Like-Rebel by MP. The ZP knows MP is MP, so ZP accepts death).\n      * MP kills ZP. MP Penalty: MP discards all cards.\n  * **FP:** Acts. Draws a Kill (`K`). Uses it on MP. MP (HP 1, no cards) dies.\n  * **Result:** FP wins.\n\n### Subtasks\n\nThere are 20 test cases, 5 points each.\n\n  * 10% of data has no Scroll cards.\n  * Another 20% of data has no \"Unassailable\" (`J`) cards.", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 猪国杀", "background": null, "description": "### 游戏背景\n\n《猪国杀》是一种多猪牌类回合制游戏，一共有 $3$ 种角色：主猪，忠猪，反猪。每局游戏主猪有且只有 $1$ 只，忠猪和反猪可以有多只，每只猪扮演 $1 $ 种角色。\n\n### 游戏目的\n\n主猪 / $\\texttt{MP}$：自己存活的情况下消灭所有的反猪。  \n忠猪 / $\\texttt{ZP}$：不惜一切保护主猪，胜利条件与主猪相同。  \n反猪 / $\\texttt{FP}$：杀死主猪。\n\n### 游戏过程\n\n游戏开始时，每个玩家手里都会有 $4$ 张牌，且体力上限和初始体力都是 $4$ 。\n\n开始游戏时，从主猪开始，按照逆时针方向（数据中就是按照编号从 $ 1 , 2, 3 \\ldots n , 1 \\ldots $ 的顺序）依次行动。\n\n每个玩家自己的回合可以分为 2 个阶段：\n\n* **摸牌阶段**：从牌堆顶部摸 $2$ 张牌，依次放到手牌的最右边；  \n* **出牌阶段**：你可以使用任意张牌，每次使用牌的时候都使用最靠左的能够使用的牌。当然，要满足如下规则：\n  1. 如果没有猪哥连弩，每个出牌阶段只能使用 $1$ 次「杀」来攻击；\n  2. 任何牌被使用后被弃置（武器是装备上）；被弃置的牌以后都不能再用，即与游戏无关。\n\n### 各种牌介绍\n\n每张手牌用 $1$ 个字母表示，字母代表牌的种类。\n\n#### 基本牌\n\n- 『桃 / $\\texttt{P}$』在自己的回合内，如果自己的体力值不等于体力上限，那么使用 $1$ 个桃可以为自己补充 $1$ 点体力，否则不能使用桃；桃只能对自己使用；在自己的回合外，如果自己的体力变为 $0$ 或者更低，那么也可以使用。\n\n- 『杀 / $\\texttt{K}$』在自己的回合内，对攻击范围内除自己以外的 $1$ 名角色使用。如果没有被『闪』抵消，则造成 $1$ 点伤害。无论有无武器，杀的攻击范围都是 $1$。\n\n- 『闪 / $\\texttt{D}$』当你受到杀的攻击时，可以弃置 $1$ 张闪来抵消杀的效果。\n\n#### 锦囊牌\n\n- 『决斗 / $\\texttt{F}$』出牌阶段，对除自己以外任意 $1$ 名角色使用，由目标角色先开始，自己和目标角色轮流弃置 $1$ 张杀，首先没有杀可弃的一方受到 $1$ 点伤害，另一方视为此伤害的来源。\n\n- 『南猪入侵 / $\\texttt{N}$』出牌阶段，对除你以外所有角色使用，按逆时针顺序从使用者下家开始依次结算，除非弃置 $1$ 张杀，否则受到 $1$ 点伤害。\n\n- 『万箭齐发 / $\\texttt{W}$』和南猪入侵类似，不过要弃置的不是杀而是闪。\n\n- 『无懈可击 / $\\texttt{J}$』在目标锦囊生效前抵消其效果。每次有 $1$ 张锦囊即将生效时，从使用这张锦囊的猪开始，按照逆时针顺序，依次得到使用无懈可击的机会；效果：用于决斗时，决斗无效并弃置；用于南猪入侵或万箭齐发时，当结算到某个角色时才能使用，当前角色不需弃置牌并且不会受到伤害（仅对 $1$ 个角色产生效果）；用于无懈可击时，成为目标的无懈可击被无效。\n\n#### 装备牌\n\n- 『猪哥连弩 / $\\texttt{Z}$』武器，攻击范围 $1$ ，出牌阶段你可以使用任意张杀; 同一时刻最多只能装 $1$ 把武器；如果先前已经有了 $1$ 把武器，那么之后再装武器的话，会弃置以前的武器来装现在的武器。\n\n### 特殊事件及概念解释\n\n* **伤害来源**：杀、南猪入侵、万箭齐发的伤害来源均是使用该牌的猪，决斗的伤害来源如上；\n\n* **距离**：两只猪的距离定义为沿着逆时针方向间隔的猪数 $+1$ 。即初始时 $1$ 和 $2$ 的距离为 $1$ ，但是 $2$ 和 $1$ 的距离就是 $n-1$ 。注意一个角色的死亡会导致一些猪距离的改变；\n\n* **玩家死亡**：如果该玩家的体力降到 $0$ 或者更低，并且自己手中没有足够的桃使得自己的体力值回到 $1$ ，那么就死亡了，死亡后所有的牌（装备区，手牌区）被弃置；\n\n* **奖励与惩罚**：反猪死亡时，最后一个伤害来源处（即使是反猪）立即摸 $3$ 张牌。忠猪死亡时，如果最后一个伤害来源是主猪，那么主猪所有装备牌、手牌被弃置。\n\n注意：一旦达成胜利条件，游戏立刻结束，因此即使会摸 $3$ 张牌或者还有牌可以用也不用执行了。\n\n现在，我们已经知道每只猪的角色、手牌，还有牌堆初始情况，并且假设每个角色会按照如下的行为准则进行游戏，你需要做的就是告诉小猪 iPig 最后的结果。\n\n### 几种行为\n\n* **献殷勤**：使用无懈可击挡下南猪入侵、万箭齐发、决斗；使用无懈可击抵消表敌意；  \n* **表敌意**：对某个角色使用杀、决斗；使用无懈可击抵消献殷勤；  \n* **跳忠**：即通过行动表示自己是忠猪。跳忠行动就是对主猪或对某只已经跳忠的猪献殷勤，或者对某只已经跳反的猪表敌意；  \n* **跳反**：即通过行动表示自己是反猪。跳反行动就是对主猪或对某只已经跳忠的猪表敌意，或者对某只已经跳反的猪献殷勤。\n\n**注意：忠猪不会跳反，反猪也不会跳忠；不管是忠猪还是反猪，能够跳必然跳**。\n\n### 行动准则\n\n#### 共性\n\n* 每个角色如果手里有桃且生命值未满，那么必然吃掉；\n* 有南猪入侵、万箭齐发，必然使用；有装备必然装上；\n* 受到杀时，有闪必然弃置；\n* 响应南猪入侵或者万箭齐发时候，有杀 / 闪必然弃置；\n* 不会对未表明身份的猪献殷勤（**包括自己**）。\n\n#### 特性\n\n - 主猪：\n   + 主猪会认为「没有跳身份，且用南猪入侵 / 万箭齐发对自己造成伤害的猪」是**类**反猪（没伤害到不算，注意类反猪并没有表明身份），如果之后跳了，那么主猪会重新认识这只猪；  \n   + 对于每种表敌意的方式，对逆时针方向能够执行到的第一只类反猪或者已跳反猪表；如果没有，那么就不表敌意；\n   + 决斗时会不遗余力弃置杀；\n   + 如果能对已经跳忠的猪或自己献殷勤，那么一定献；如果能够对已经跳反的猪表敌意，那么一定表。\n - 忠猪：\n   + 对于每种表敌意的方式，对「逆时针方向能够执行到的第一只已经跳反的猪」表，如果没有，那么就不表敌意；\n   + 决斗时，如果对方是主猪，那么不会弃置杀，否则，会不遗余力弃置杀；\n   + 如果有机会对主猪或者已经跳忠的猪献殷勤，那么一定献。\n - 反猪：\n   + 对于每种表敌意的方式，如果有机会则对主猪表，否则，对「逆时针方向能够执行到的第一只已经跳忠的猪」表，如果没有，那么就不表敌意；\n   + 决斗时会不遗余力弃置杀；\n   + 如果有机会对已经跳反的猪献殷勤，那么一定献。\n\n限于 iPig 只会用 P++ 语言写 A + B，他请你用 Pigcal (Pascal)、P (C) 或 P++ (C++) 语言来帮他预测最后的结果。", "inputFormat": "输入文件第一行包含两个正整数 $ n $ $ (2 \\leqslant n \\leqslant 10) $ 和 $m$ $ (m \\leqslant 2000) $，分别代表玩家数和牌堆中牌的数量。数据保证牌的数量够用。\n\n接下来 $n$ 行，每行 $5$ 个字符串，依次表示对第 $i$ 只猪的角色和初始 $4 $ 张手牌描述。编号为 $1$ 的肯定是主猪。\n\n再接下来一行，一共 $m$ 个字符串，按照从牌堆顶部到牌堆底部的顺序描述每张牌。\n\n**注意：所有的相邻的两个字符串都严格用 $1$ 个空格隔开，行尾没有多余空格**。", "outputFormat": "输出数据第一行包含一个字符串代表游戏结果。如果是主猪胜利，那么输出 $\\texttt{MP}$ ，否则输出 $\\texttt{FP}$ 。数据保证游戏总会结束。\n\n接下来 $n$ 行，第 $i$ 行是对第 $i$ 只猪的手牌描述（注意只需要输出手牌），按照手牌从左往右的顺序输出，相邻两张牌用 $1$ 个空格隔开，行末尾没有多余空格。如果这只猪已阵亡，那么只要输出 $\\texttt{DEAD}$ 即可。\n\n**注意：如果要输出手牌而没有手牌的话，那么只需输出 $1$ 个空行**。\n\n**由于数据问题，若牌堆已空，按照每次抽牌抽到的都是最后一张。**", "hint": "### 样例解释\n\n第一回合：\n* 主猪没有目标可以表敌意；\n* 接下来忠猪使用了 $3$ 张南猪入侵，主猪掉了 $3$ 点体力，并认为该角色为类反猪，$3$ 号角色尽管手里有无懈可击，但是因为自己未表明身份，所以同样不能对自己用，乖乖掉 $3$ 点体力；  \n\n下一回合：\n* 反猪无牌可出；\n* 接下来主猪对着类反猪爆发，使用 $4$ 张决斗，忠猪死亡，结果主猪弃掉所有牌；\n* 接下来反猪摸到 $1$ 张杀直接杀死主猪获胜。\n\n### 子任务\n\n一共 $20$ 组测试数据，每个点 $5$ 分。\n\n$10\\%$ 的数据没有锦囊牌，另外 $20\\%$ 的数据没有无懈可击。", "locale": "zh-CN"}}}
{"pid": "P2483", "type": "P", "difficulty": 7, "samples": [["4 6 14.9\n1 2 1.5\n2 1 1.5\n1 3 3\n2 3 1.5\n3 4 1.5\n1 4 1.5\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "各省省选", "山东", "O2优化", "最短路", "可并堆", "可持久化", "模板题"], "title": "【模板】k 短路 / [SDOI2010] 魔法猪学院", "background": "注：对于 $k$ 短路问题，A\\* 算法的最坏时间复杂度是 $O(nk \\log n)$ 的。虽然 A\\* 算法可以通过本题原版数据，但可以构造数据，使得 A\\* 算法在原题的数据范围内无法通过。事实上，存在使用可持久化可并堆的算法可以做到在 $O((n+m) \\log n + k \\log k)$ 的时间复杂度解决 $k$ 短路问题。详情见 [OI-Wiki](https://oi-wiki.org/graph/kth-path/)。", "description": "iPig 在假期来到了传说中的魔法猪学院，开始为期两个月的魔法猪训练。经过了一周理论知识和一周基本魔法的学习之后，iPig 对猪世界的世界本原有了很多的了解：众所周知，世界是由元素构成的；元素与元素之间可以互相转换；能量守恒$\\ldots$。\n\n\niPig 今天就在进行一个麻烦的测验。iPig 在之前的学习中已经知道了很多种元素，并学会了可以转化这些元素的魔法，每种魔法需要消耗 iPig 一定的能量。作为 PKU 的顶尖学猪，让 iPig 用最少的能量完成从一种元素转换到另一种元素$\\ldots$等等，iPig 的魔法导猪可没这么笨！这一次，他给 iPig 带来了很多 $1$ 号元素的样本，要求 iPig 使用学习过的魔法将它们一个个转化为 $N$ 号元素，为了增加难度，要求每份样本的转换过程都不相同。这个看似困难的任务实际上对 iPig 并没有挑战性，因为，他有坚实的后盾$\\ldots$现在的你呀！\n\n\n注意，两个元素之间的转化可能有多种魔法，转化是单向的。转化的过程中，可以转化到一个元素（包括开始元素）多次，但是一但转化到目标元素，则一份样本的转化过程结束。iPig 的总能量是有限的，所以最多能够转换的样本数一定是一个有限数。具体请参看样例。", "inputFormat": "第一行三个数 $N, M, E$，表示 iPig 知道的元素个数（元素从 $1$ 到 $N$ 编号），iPig 已经学会的魔法个数和 iPig 的总能量。\n\n后跟 $M$ 行每行三个数 $s_i, t_i, e_i$ 表示 iPig 知道一种魔法，消耗 $e_i$ 的能量将元素 $s_i$ 变换到元素 $t_i$。", "outputFormat": "一行一个数，表示最多可以完成的方式数。输入数据保证至少可以完成一种方式。", "hint": "有意义的转换方式共 $4$ 种：\n\n$1\\to 4$，消耗能量 $1.5$。\n\n$1\\to 2\\to 1\\to 4$，消耗能量 $4.5$。\n\n$1\\to3\\to4$，消耗能量 $4.5$。\n\n$1\\to2\\to3\\to4$，消耗能量 $4.5$。\n\n显然最多只能完成其中的 $3$ 种转换方式（选第一种方式，后三种方式任选两个），即最多可以转换 $3$ 份样本。\n\n如果将 $E=14.9$ 改为 $E=15$，则可以完成以上全部方式，答案变为 $4$。\n\n### 数据规模\n\n占总分不小于 $10\\%$ 的数据满足 $N \\leq 6,M \\leq 15$。\n\n占总分不小于 $20\\%$ 的数据满足 $N \\leq 100,M \\leq 300,E\\leq100$ 且 $E$ 和所有的 $e_i$ 均为整数（可以直接作为整型数字读入）。\n\n所有数据满足 $2 \\leq N \\leq 5000$，$1 \\leq M \\leq 200000$，$1 \\leq E \\leq 10 ^ 7$，$1 \\leq e_i\\leq E$，$E$ 和所有的 $e_i$ 为实数。\n\n### 数据更新日志\n\n- 2010/xx/xx：原版数据；\n- 2018/03/02：@[kczno1](/user/9168) 添加了 [一组数据](/discuss/35616)；\n- 2018/04/20：@[X_o_r](/user/25188) 添加了 [一组数据](/discuss/40205)；\n- 2021/01/08：@[LeavingZ](/user/215697) 添加了 [两组数据](/discuss/291028)。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] k Shortest Paths / [SDOI2010] Magic Pig Academy", "background": "Note: For the $k$ shortest paths problem, the A\\* algorithm has a worst-case time complexity of $O(nk \\log n)$. Although A\\* can pass the original testdata of this problem, one can construct cases where A\\* fails within the original constraints. In fact, there is an approach using a persistent meldable heap that solves the $k$ shortest paths problem in $O((n+m) \\log n + k \\log k)$ time. For details, see OI-Wiki: https://oi-wiki.org/graph/kth-path/.", "description": "iPig has arrived at the legendary Magic Pig Academy for a two-month training program. After one week of theory and one week of basic magic, iPig has learned a lot about the fundamentals of the pig world: as everyone knows, the world is made of elements; elements can be transformed into one another; energy is conserved $\\ldots$\n\nToday iPig is taking a tricky test. From previous learning, iPig already knows many kinds of elements and has learned spells that can transform these elements, each consuming some energy. As a top student from PKU, using the least energy to transform one element into another $\\ldots$ well, iPig’s magic instructor isn’t that naive! This time, the instructor has brought many samples of element $1$ and requires iPig to transform them one by one into element $N$ using learned spells. To make it harder, each sample must follow a different conversion process. This seemingly difficult task is actually not a challenge for iPig, because he has a solid backup $\\ldots$ you!\n\nNote that there can be multiple spells for transforming between two elements, and transformations are one-way. During a conversion, an element (including the starting element) may be visited multiple times, but once the target element is reached, that sample’s conversion process ends. iPig’s total energy is limited, so the maximum number of samples he can convert is finite. See the example for details.", "inputFormat": "The first line contains three numbers $N, M, E$, representing the number of known elements (numbered from $1$ to $N$), the number of learned spells, and iPig’s total energy.\n\nThen follow $M$ lines, each containing three numbers $s_i, t_i, e_i$, indicating a known spell that transforms element $s_i$ to element $t_i$ while consuming energy $e_i$.", "outputFormat": "Output a single integer: the maximum number of distinct conversion processes that can be completed. The input guarantees that at least one way exists.", "hint": "There are $4$ meaningful conversion processes:\n\n$1\\to 4$, consuming energy $1.5$.\n\n$1\\to 2\\to 1\\to 4$, consuming energy $4.5$.\n\n$1\\to 3\\to 4$, consuming energy $4.5$.\n\n$1\\to 2\\to 3\\to 4$, consuming energy $4.5$.\n\nClearly, at most $3$ of these conversion processes can be completed (choose the first one, and any two of the remaining three), i.e., at most $3$ samples can be converted.\n\nIf $E=14.9$ is changed to $E=15$, then all of the above processes can be completed, and the answer becomes $4$.\n\n# Input Format\n\n# Output Format\n\n# Hint\n\n# Constraints\n\n- At least $10\\%$ of the total score: $N \\leq 6$, $M \\leq 15$.\n- At least $20\\%$ of the total score: $N \\leq 100$, $M \\leq 300$, $E \\leq 100$, and $E$ and all $e_i$ are integers (they can be read as integer types directly).\n- For all testdata: $2 \\leq N \\leq 5000$, $1 \\leq M \\leq 200000$, $1 \\leq E \\leq 10^7$, $1 \\leq e_i \\leq E$, and $E$ and all $e_i$ are real numbers.\n\n# Data Update Log\n\n- 2010/xx/xx: Original testdata.\n- 2018/03/02: @[kczno1](/user/9168) added [a set of testdata](/discuss/35616).\n- 2018/04/20: @[X_o_r](/user/25188) added [a set of testdata](/discuss/40205).\n- 2021/01/08: @[LeavingZ](/user/215697) added [two sets of testdata](/discuss/291028).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】k 短路 / [SDOI2010] 魔法猪学院", "background": "注：对于 $k$ 短路问题，A\\* 算法的最坏时间复杂度是 $O(nk \\log n)$ 的。虽然 A\\* 算法可以通过本题原版数据，但可以构造数据，使得 A\\* 算法在原题的数据范围内无法通过。事实上，存在使用可持久化可并堆的算法可以做到在 $O((n+m) \\log n + k \\log k)$ 的时间复杂度解决 $k$ 短路问题。详情见 [OI-Wiki](https://oi-wiki.org/graph/kth-path/)。", "description": "iPig 在假期来到了传说中的魔法猪学院，开始为期两个月的魔法猪训练。经过了一周理论知识和一周基本魔法的学习之后，iPig 对猪世界的世界本原有了很多的了解：众所周知，世界是由元素构成的；元素与元素之间可以互相转换；能量守恒$\\ldots$。\n\n\niPig 今天就在进行一个麻烦的测验。iPig 在之前的学习中已经知道了很多种元素，并学会了可以转化这些元素的魔法，每种魔法需要消耗 iPig 一定的能量。作为 PKU 的顶尖学猪，让 iPig 用最少的能量完成从一种元素转换到另一种元素$\\ldots$等等，iPig 的魔法导猪可没这么笨！这一次，他给 iPig 带来了很多 $1$ 号元素的样本，要求 iPig 使用学习过的魔法将它们一个个转化为 $N$ 号元素，为了增加难度，要求每份样本的转换过程都不相同。这个看似困难的任务实际上对 iPig 并没有挑战性，因为，他有坚实的后盾$\\ldots$现在的你呀！\n\n\n注意，两个元素之间的转化可能有多种魔法，转化是单向的。转化的过程中，可以转化到一个元素（包括开始元素）多次，但是一但转化到目标元素，则一份样本的转化过程结束。iPig 的总能量是有限的，所以最多能够转换的样本数一定是一个有限数。具体请参看样例。", "inputFormat": "第一行三个数 $N, M, E$，表示 iPig 知道的元素个数（元素从 $1$ 到 $N$ 编号），iPig 已经学会的魔法个数和 iPig 的总能量。\n\n后跟 $M$ 行每行三个数 $s_i, t_i, e_i$ 表示 iPig 知道一种魔法，消耗 $e_i$ 的能量将元素 $s_i$ 变换到元素 $t_i$。", "outputFormat": "一行一个数，表示最多可以完成的方式数。输入数据保证至少可以完成一种方式。", "hint": "有意义的转换方式共 $4$ 种：\n\n$1\\to 4$，消耗能量 $1.5$。\n\n$1\\to 2\\to 1\\to 4$，消耗能量 $4.5$。\n\n$1\\to3\\to4$，消耗能量 $4.5$。\n\n$1\\to2\\to3\\to4$，消耗能量 $4.5$。\n\n显然最多只能完成其中的 $3$ 种转换方式（选第一种方式，后三种方式任选两个），即最多可以转换 $3$ 份样本。\n\n如果将 $E=14.9$ 改为 $E=15$，则可以完成以上全部方式，答案变为 $4$。\n\n### 数据规模\n\n占总分不小于 $10\\%$ 的数据满足 $N \\leq 6,M \\leq 15$。\n\n占总分不小于 $20\\%$ 的数据满足 $N \\leq 100,M \\leq 300,E\\leq100$ 且 $E$ 和所有的 $e_i$ 均为整数（可以直接作为整型数字读入）。\n\n所有数据满足 $2 \\leq N \\leq 5000$，$1 \\leq M \\leq 200000$，$1 \\leq E \\leq 10 ^ 7$，$1 \\leq e_i\\leq E$，$E$ 和所有的 $e_i$ 为实数。\n\n### 数据更新日志\n\n- 2010/xx/xx：原版数据；\n- 2018/03/02：@[kczno1](/user/9168) 添加了 [一组数据](/discuss/35616)；\n- 2018/04/20：@[X_o_r](/user/25188) 添加了 [一组数据](/discuss/40205)；\n- 2021/01/08：@[LeavingZ](/user/215697) 添加了 [两组数据](/discuss/291028)。", "locale": "zh-CN"}}}
{"pid": "P2484", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 1\n2 4 2\n1 2 1\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2011", "各省省选", "山东", "前缀和", "其它技巧"], "title": "[SDOI2011] 打地鼠", "background": null, "description": "2020.4.29 数据更新。\n\n打地鼠是这样的一个游戏：地面上有一些地鼠洞，地鼠们会不时从洞里探出头来很短时间后又缩回洞中。玩家的目标是在地鼠伸出头时，用锤子砸其头部，砸到的地鼠越多分数也就越高。\n\n游戏中的锤子每次只能打一只地鼠，如果多只地鼠同时探出头，玩家只能通过多次挥舞锤子的方式打掉所有的地鼠。你认为这锤子太没用了，所以你改装了锤子，增加了锤子与地面的接触面积，使其每次可以击打一片区域。如果我们把地面看做 $m\\times n$ 的方阵，其每个元素都代表一个地鼠洞，那么锤子可以覆盖 $r\\times c$ 区域内的所有地鼠洞。但是改装后的锤子有一个缺点：每次挥舞锤子时，对于这的区域中的所有地洞，锤子会打掉恰好一只地鼠。也就是说锤子覆盖的区域中，每个地洞必须至少有 $1$ 只地鼠，且如果某个地洞中地鼠的个数大于 $1$，那么这个地洞只会有 $1$ 只地鼠被打掉，因此每次挥舞锤子时，恰好有 $r\\times c$ 只地鼠被打掉。由于锤子的内部结构过于精密，因此在游戏过程中你不能旋转锤子（即不能互换 $r$ 和 $c$）。\n\n你可以任意更改锤子的规格(即你可以任意规定 $r$ 和 $c$ 的大小)，但是改装锤子的工作只能在打地鼠前进行(即你不可以打掉一部分地鼠后，再改变锤子的规格)。你的任务是求出要想打掉所有的地鼠，至少需要挥舞锤子的次数。\n\nHint：由于你可以把锤子的大小设置为 $1\\times 1$，因此本题总是有解的。", "inputFormat": "第一行包含两个正整数 $m$ 和 $n$；\n\n下面 $m$ 行每行 $n$ 个正整数描述地图，每个数字表示相应位置的地洞中地鼠的数量。", "outputFormat": "输出一个整数，表示最少的挥舞次数。", "hint": "【样例说明】\n\n使用 $2\\times 2$ 的锤子，分别在左上、左下、右上、右下挥舞一次。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$m$, $n\\leq 5$ ；\n\n对于 $60\\%$ 的数据，$m$, $n\\leq 30$ ；\n\n对于 $100\\%$ 的数据，$1\\leq m$, $n\\leq 100$ ，其他数据不小于 $0$，不大于 $10^5$ 。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Whac-A-Mole", "background": "", "description": "2020-04-29 testdata updated.\n\nWhac-A-Mole works like this: there are several mole holes on the ground, and moles will occasionally pop their heads out and then retract after a short time. The player's goal is to strike the mole's head with a hammer when it pops out; the more moles hit, the higher the score.\n\nIn the game, the hammer can hit only one mole per swing. If multiple moles pop out at the same time, the player must swing multiple times to hit them all. You think this hammer is too weak, so you modify it to increase the contact area with the ground so that it can hit a whole region at once. If we view the ground as an $m \\times n$ grid where each cell is a mole hole, then the hammer can cover all holes in an $r \\times c$ region. However, the modified hammer has a drawback: each time you swing it, within that region the hammer removes exactly one mole from each hole. In other words, every hole in the covered region must contain at least $1$ mole, and if a hole contains more than $1$ mole, only $1$ mole in that hole will be removed. Therefore, each swing removes exactly $r \\times c$ moles. Because the hammer's internal structure is very delicate, you cannot rotate the hammer during the game (i.e., you cannot swap $r$ and $c$).\n\nYou may choose any hammer size (i.e., any $r$ and $c$), but you can only do this before playing (i.e., you cannot change the hammer size after removing some moles). Your task is to find the minimum number of swings needed to remove all moles.\n\nHint: Since you can set the hammer size to $1 \\times 1$, this problem always has a solution.", "inputFormat": "The first line contains two positive integers $m$ and $n$.\n\nEach of the next $m$ lines contains $n$ non-negative integers describing the grid; each number is the number of moles in the corresponding hole.", "outputFormat": "Print one integer, the minimum number of swings.", "hint": "Sample Explanation:\n\nUsing a $2 \\times 2$ hammer, swing once at each of the four positions: upper-left, lower-left, upper-right, and lower-right.\n\nConstraints and Conventions:\n\n- For $30\\%$ of the testdata, $m, n \\leq 5$.\n- For $60\\%$ of the testdata, $m, n \\leq 30$.\n- For $100\\%$ of the testdata, $1 \\leq m, n \\leq 100$. All other numbers are between $0$ and $10^5$ inclusive.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 打地鼠", "background": null, "description": "2020.4.29 数据更新。\n\n打地鼠是这样的一个游戏：地面上有一些地鼠洞，地鼠们会不时从洞里探出头来很短时间后又缩回洞中。玩家的目标是在地鼠伸出头时，用锤子砸其头部，砸到的地鼠越多分数也就越高。\n\n游戏中的锤子每次只能打一只地鼠，如果多只地鼠同时探出头，玩家只能通过多次挥舞锤子的方式打掉所有的地鼠。你认为这锤子太没用了，所以你改装了锤子，增加了锤子与地面的接触面积，使其每次可以击打一片区域。如果我们把地面看做 $m\\times n$ 的方阵，其每个元素都代表一个地鼠洞，那么锤子可以覆盖 $r\\times c$ 区域内的所有地鼠洞。但是改装后的锤子有一个缺点：每次挥舞锤子时，对于这的区域中的所有地洞，锤子会打掉恰好一只地鼠。也就是说锤子覆盖的区域中，每个地洞必须至少有 $1$ 只地鼠，且如果某个地洞中地鼠的个数大于 $1$，那么这个地洞只会有 $1$ 只地鼠被打掉，因此每次挥舞锤子时，恰好有 $r\\times c$ 只地鼠被打掉。由于锤子的内部结构过于精密，因此在游戏过程中你不能旋转锤子（即不能互换 $r$ 和 $c$）。\n\n你可以任意更改锤子的规格(即你可以任意规定 $r$ 和 $c$ 的大小)，但是改装锤子的工作只能在打地鼠前进行(即你不可以打掉一部分地鼠后，再改变锤子的规格)。你的任务是求出要想打掉所有的地鼠，至少需要挥舞锤子的次数。\n\nHint：由于你可以把锤子的大小设置为 $1\\times 1$，因此本题总是有解的。", "inputFormat": "第一行包含两个正整数 $m$ 和 $n$；\n\n下面 $m$ 行每行 $n$ 个正整数描述地图，每个数字表示相应位置的地洞中地鼠的数量。", "outputFormat": "输出一个整数，表示最少的挥舞次数。", "hint": "【样例说明】\n\n使用 $2\\times 2$ 的锤子，分别在左上、左下、右上、右下挥舞一次。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$m$, $n\\leq 5$ ；\n\n对于 $60\\%$ 的数据，$m$, $n\\leq 30$ ；\n\n对于 $100\\%$ 的数据，$1\\leq m$, $n\\leq 100$ ，其他数据不小于 $0$，不大于 $10^5$ 。", "locale": "zh-CN"}}}
{"pid": "P2485", "type": "P", "difficulty": 5, "samples": [["3 1\n2 1 3\n2 2 3\n2 3 3\n", "2\n1\n2\n"], ["3 2\n2 1 3\n2 2 3\n2 3 3\n", "2\n1\n0\n"], ["4 3\n2 1 3\n2 2 3\n2 3 3\n2 4 3\n", "0\n1\nOrz, I cannot find x!\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2011", "各省省选", "山东", "O2优化", "素数判断,质数,筛法", "最大公约数 gcd", "逆元", "大步小步算法 BSGS"], "title": "[SDOI2011] 计算器", "background": "2024-8-11 update: 新增一组 hack。", "description": "你被要求设计一个计算器完成以下三项任务：\n\n1. 给定 $y,z,p$，计算 $y^z \\bmod p$ 的值；\n2. 给定 $y,z,p$，计算满足 $xy \\equiv z \\pmod p$ 的最小非负整数 $x$；\n3. 给定 $y,z,p$，计算满足 $y^x \\equiv z \\pmod p$ 的最小非负整数 $x$。\n\n为了拿到奖品，全力以赴吧！\n", "inputFormat": "输入文件包含多组数据。\n\n第一行包含两个正整数 $T,K$，分别表示数据组数和询问类型（对于一个测试点内的所有数据，询问类型相同）。\n\n以下 $T$ 行每行包含三个正整数 $y,z,p$，描述一个询问。", "outputFormat": "输出文件包括 $T$ 行。\n\n对于每个询问，输出一行答案。\n\n对于询问类型 2 和 3，如果不存在满足条件的，则输出 `Orz, I cannot find x!`。", "hint": "测试点共分为三类，各类测试点占总测试点的比例如下：\n\n| $K=$ | 测试点占比 |\n| :--: | :--------: |\n| $1$  |   $20\\%$   |\n| $2$  |   $35\\%$   |\n| $3$  |   $45\\%$   |\n\n所有数据均满足：$1 \\leq y,z,p \\leq 10^9$，$p$ 是质数，$1 \\leq T \\leq 10$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Calculator", "background": "2024-08-11 update: Added a new hack.", "description": "You are asked to design a calculator to complete the following three tasks:\n\n1. Given $y, z, p$, compute the value of $y^z \\bmod p$.\n2. Given $y, z, p$, compute the smallest non-negative integer $x$ such that $xy \\equiv z \\pmod p$.\n3. Given $y, z, p$, compute the smallest non-negative integer $x$ such that $y^x \\equiv z \\pmod p$.\n\nDo your best to win the prize!", "inputFormat": "The input contains multiple test cases.\n\nThe first line contains two positive integers $T, K$, denoting the number of test cases and the query type, respectively (for all testdata within a single test point, the query type is the same).\n\nEach of the following $T$ lines contains three positive integers $y, z, p$, describing one query.", "outputFormat": "The output contains $T$ lines.\n\nFor each query, output one line with the answer.\n\nFor query types $2$ and $3$, if no solution exists, output `Orz, I cannot find x!`.", "hint": "Test points are divided into three categories. The proportion of each category among all test points is as follows:\n\n| $K=$ | Proportion of test points |\n| :--: | :-----------------------: |\n| $1$  |          $20\\%$           |\n| $2$  |          $35\\%$           |\n| $3$  |          $45\\%$           |\n\nAll testdata satisfy: $1 \\leq y, z, p \\leq 10^9$, $p$ is prime, and $1 \\leq T \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 计算器", "background": "2024-8-11 update: 新增一组 hack。", "description": "你被要求设计一个计算器完成以下三项任务：\n\n1. 给定 $y,z,p$，计算 $y^z \\bmod p$ 的值；\n2. 给定 $y,z,p$，计算满足 $xy \\equiv z \\pmod p$ 的最小非负整数 $x$；\n3. 给定 $y,z,p$，计算满足 $y^x \\equiv z \\pmod p$ 的最小非负整数 $x$。\n\n为了拿到奖品，全力以赴吧！\n", "inputFormat": "输入文件包含多组数据。\n\n第一行包含两个正整数 $T,K$，分别表示数据组数和询问类型（对于一个测试点内的所有数据，询问类型相同）。\n\n以下 $T$ 行每行包含三个正整数 $y,z,p$，描述一个询问。", "outputFormat": "输出文件包括 $T$ 行。\n\n对于每个询问，输出一行答案。\n\n对于询问类型 2 和 3，如果不存在满足条件的，则输出 `Orz, I cannot find x!`。", "hint": "测试点共分为三类，各类测试点占总测试点的比例如下：\n\n| $K=$ | 测试点占比 |\n| :--: | :--------: |\n| $1$  |   $20\\%$   |\n| $2$  |   $35\\%$   |\n| $3$  |   $45\\%$   |\n\n所有数据均满足：$1 \\leq y,z,p \\leq 10^9$，$p$ 是质数，$1 \\leq T \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P2486", "type": "P", "difficulty": 6, "samples": [["6 5\n2 2 1 2 1 1\n1 2\n1 3\n2 4\n2 5\n2 6\nQ 3 5\nC 2 1 1\nQ 3 5\nC 5 1 2\nQ 3 5\n", "3\n1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "线段树", "各省省选", "颜色段均摊（珂朵莉树 ODT）", "山东", "树链剖分", "动态树 LCT"], "title": "[SDOI2011] 染色", "background": "", "description": "给定一棵 $n$ 个节点的无根树，共有 $m$  个操作，操作分为两种：\n\n1. 将节点 $a$ 到节点 $b$ 的路径上的所有点（包括 $a$ 和 $b$）都染成颜色 $c$。\n2. 询问节点 $a$ 到节点 $b$ 的路径上的颜色段数量。\n\n颜色段的定义是极长的连续相同颜色被认为是一段。例如 `112221` 由三段组成：`11`、`222`、`1`。", "inputFormat": "输入的第一行是用空格隔开的两个整数，分别代表树的节点个数 $n$ 和操作个数 $m$。\n\n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数 $w_i$ 代表结点 $i$ 的初始颜色。\n\n第 $3$ 到第 $(n + 1)$ 行，每行两个用空格隔开的整数 $u, v$，代表树上存在一条连结节点 $u$ 和节点 $v$ 的边。\n\n第 $(n + 2)$ 到第 $(n + m + 1)$ 行，每行描述一个操作，其格式为：\n\n每行首先有一个字符 $op$，代表本次操作的类型。\n\n- 若 $op$ 为 `C`，则代表本次操作是一次染色操作，在一个空格后有三个用空格隔开的整数 $a, b, c$，代表将 $a$ 到 $b$ 的路径上所有点都染成颜色 $c$。\n- 若 $op$ 为 `Q`，则代表本次操作是一次查询操作，在一个空格后有两个用空格隔开的整数 $a, b$，表示查询 $a$ 到 $b$ 路径上的颜色段数量。", "outputFormat": "对于每次查询操作，输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 10^5$，$1 \\leq w_i, c \\leq 10^9$，$1 \\leq a, b, u, v \\leq n$，$op$ 一定为 `C` 或 `Q`，保证给出的图是一棵树。\n\n除原数据外，还存在一组不计分的 hack 数据。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Coloring", "background": "", "description": "Given an unrooted tree with $n$ nodes, there are $m$ operations of two types:\n\n1. Color all nodes on the path from node $a$ to node $b$ (including $a$ and $b$) with color $c$.\n2. Query the number of color segments on the path from node $a$ to node $b$.\n\nA color segment is defined as a maximal consecutive run of the same color. For example, `112221` consists of three segments: `11`, `222`, `1`.", "inputFormat": "The first line contains two integers separated by a space, representing the number of nodes $n$ and the number of operations $m$.\n\nThe second line contains $n$ integers separated by spaces. The $i$-th integer $w_i$ represents the initial color of node $i$.\n\nLines $3$ through $(n + 1)$ each contain two integers $u, v$ separated by a space, indicating that there is an edge between nodes $u$ and $v$ in the tree.\n\nLines $(n + 2)$ through $(n + m + 1)$ each describe an operation in the following format:\n\nEach line starts with a character $op$, indicating the type of operation.\n\n- If $op$ is `C`, it denotes a coloring operation. After a space, there are three integers $a, b, c$ separated by spaces, meaning that all nodes on the path from $a$ to $b$ are colored with color $c$.\n- If $op$ is `Q`, it denotes a query operation. After a space, there are two integers $a, b$ separated by a space, indicating a query for the number of color segments on the path from $a$ to $b$.", "outputFormat": "For each query operation, output a single line containing one integer representing the answer.", "hint": "#### Constraints\n\nFor $100\\%$ of the testdata, $1 \\leq n, m \\leq 10^5$, $1 \\leq w_i, c \\leq 10^9$, $1 \\leq a, b, u, v \\leq n$, $op$ is guaranteed to be `C` or `Q`, and the given graph is a tree.\n\nIn addition to the original testdata, there exists a non-scoring set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 染色", "background": "", "description": "给定一棵 $n$ 个节点的无根树，共有 $m$  个操作，操作分为两种：\n\n1. 将节点 $a$ 到节点 $b$ 的路径上的所有点（包括 $a$ 和 $b$）都染成颜色 $c$。\n2. 询问节点 $a$ 到节点 $b$ 的路径上的颜色段数量。\n\n颜色段的定义是极长的连续相同颜色被认为是一段。例如 `112221` 由三段组成：`11`、`222`、`1`。", "inputFormat": "输入的第一行是用空格隔开的两个整数，分别代表树的节点个数 $n$ 和操作个数 $m$。\n\n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数 $w_i$ 代表结点 $i$ 的初始颜色。\n\n第 $3$ 到第 $(n + 1)$ 行，每行两个用空格隔开的整数 $u, v$，代表树上存在一条连结节点 $u$ 和节点 $v$ 的边。\n\n第 $(n + 2)$ 到第 $(n + m + 1)$ 行，每行描述一个操作，其格式为：\n\n每行首先有一个字符 $op$，代表本次操作的类型。\n\n- 若 $op$ 为 `C`，则代表本次操作是一次染色操作，在一个空格后有三个用空格隔开的整数 $a, b, c$，代表将 $a$ 到 $b$ 的路径上所有点都染成颜色 $c$。\n- 若 $op$ 为 `Q`，则代表本次操作是一次查询操作，在一个空格后有两个用空格隔开的整数 $a, b$，表示查询 $a$ 到 $b$ 路径上的颜色段数量。", "outputFormat": "对于每次查询操作，输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 10^5$，$1 \\leq w_i, c \\leq 10^9$，$1 \\leq a, b, u, v \\leq n$，$op$ 一定为 `C` 或 `Q`，保证给出的图是一棵树。\n\n除原数据外，还存在一组不计分的 hack 数据。\n", "locale": "zh-CN"}}}
{"pid": "P2487", "type": "P", "difficulty": 6, "samples": [["4\n3 30\n4 40\n6 60\n3 30\n", "2\n0.33333 0.33333 0.33333 1.00000\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2011", "各省省选", "树状数组", "山东", "cdq 分治", "Special Judge", "分治", "动态规划优化"], "title": "[SDOI2011] 拦截导弹", "background": "", "description": "某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是这种导弹拦截系统有一个缺陷：虽然它的第一发炮弹能够到达任意的高度、并且能够拦截任意速度的导弹，但是以后每一发炮弹都不能高于前一发的高度，其拦截的导弹的飞行速度也不能大于前一发。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在试用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。\n\n在不能拦截所有的导弹的情况下，我们当然要选择使国家损失最小、也就是拦截导弹的数量最多的方案。但是拦截导弹数量的最多的方案有可能有多个，如果有多个最优方案，那么我们会随机选取一个作为最终的拦截导弹行动蓝图。\n\n我方间谍已经获取了所有敌军导弹的高度和速度，你的任务是计算出在执行上述决策时，每枚导弹被拦截掉的概率。\n", "inputFormat": "\n\n第一行包含一个正整数 $n$，表示敌军导弹数量。\n\n下面 $n$ 行按顺序给出了敌军所有导弹信息。第 $i+1$\n 行包含两个正整数 $h_i$ 和 $v_i$，分别表示第 $i$ 枚导弹的高度和速度。", "outputFormat": "\n\n输出包含两行。\n\n第一行为一个正整数，表示最多能拦截掉的导弹数量；\n\n第二行包含 $n$ 个 $0$ 到 $1$ 之间的实数，第 $i$ 个数字表示第 $i$ 枚导弹被拦截的概率（你可以保留任意多位有效数字）。", "hint": "\n\n保证总方案数不超过 C++ 中 double 类型的存储范围。\n\n### 数据范围及约定\n\n- 均匀分布着约 $30\\%$ 的数据，所有 $v_i$ 均相等；\n- 均匀分布着约 $50\\%$ 的数据，满足 $1\\le h_i,v_i\\le 1000$。\n- 对于 $30\\%$ 的数据，满足 $1\\le n\\le 1000$；\n- 对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^4$，$1\\le h_i,v_i\\le 10^9$。\n\n### 评分标准\n\n对于每个测试点，若输出的第一行与标准输出相同，则得到该测试点 $40\\%$ 的分数，若输出文件的第二行的每个数与标准输出的误差均不大于 $10^{-4}$，则得到该测试点 $60\\%$ 的分数，两项相加作为该测试点总得分。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Missile Interception", "background": "", "description": "A country has developed a missile interception system to defend against incoming enemy missiles. However, this system has a flaw: although the first shell can reach any height and intercept a missile of any speed, each subsequent shell cannot exceed the height of the previous one, and the speed of the missile it intercepts cannot exceed that of the previous one. One day, the radar detects an incoming enemy missile attack. Since the system is still in trial use, there is only one set available, so it may not be able to intercept all missiles.\n\nIf not all missiles can be intercepted, we certainly want to minimize losses, that is, choose a plan that intercepts the maximum number of missiles. However, there may be multiple optimal plans that intercept the maximum number of missiles. If there are multiple optimal plans, we will choose one uniformly at random as the final interception plan.\n\nOur spies have obtained the height and speed of every enemy missile. Your task is to compute, under the decision process described above, the probability that each missile is intercepted.", "inputFormat": "The first line contains a positive integer $n$, the number of enemy missiles.\n\nThe next $n$ lines give all missiles in order. The $(i+1)$-th line contains two positive integers $h_i$ and $v_i$, denoting the height and speed of the $i$-th missile.", "outputFormat": "Output two lines.\n\nThe first line contains a single positive integer, the maximum number of missiles that can be intercepted.\n\nThe second line contains $n$ real numbers between $0$ and $1$, where the $i$-th number is the probability that the $i$-th missile is intercepted (you may keep any number of significant digits).", "hint": "The total number of optimal plans does not exceed the storage range of C++ double.\n\nConstraints\n- Approximately $30\\%$ of the testdata have all $v_i$ equal.\n- Approximately $50\\%$ of the testdata satisfy $1 \\le h_i, v_i \\le 1000$.\n- For $30\\%$ of the testdata, $1 \\le n \\le 1000$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 5 \\times 10^4$, $1 \\le h_i, v_i \\le 10^9$.\n\nScoring\n- For each test point, if the first line of your output matches the standard answer, you receive $40\\%$ of the score for that test point.\n- If, in addition, every number on the second line has an absolute error no greater than $10^{-4}$ compared to the standard answer, you receive the remaining $60\\%$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 拦截导弹", "background": "", "description": "某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是这种导弹拦截系统有一个缺陷：虽然它的第一发炮弹能够到达任意的高度、并且能够拦截任意速度的导弹，但是以后每一发炮弹都不能高于前一发的高度，其拦截的导弹的飞行速度也不能大于前一发。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在试用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。\n\n在不能拦截所有的导弹的情况下，我们当然要选择使国家损失最小、也就是拦截导弹的数量最多的方案。但是拦截导弹数量的最多的方案有可能有多个，如果有多个最优方案，那么我们会随机选取一个作为最终的拦截导弹行动蓝图。\n\n我方间谍已经获取了所有敌军导弹的高度和速度，你的任务是计算出在执行上述决策时，每枚导弹被拦截掉的概率。\n", "inputFormat": "\n\n第一行包含一个正整数 $n$，表示敌军导弹数量。\n\n下面 $n$ 行按顺序给出了敌军所有导弹信息。第 $i+1$\n 行包含两个正整数 $h_i$ 和 $v_i$，分别表示第 $i$ 枚导弹的高度和速度。", "outputFormat": "\n\n输出包含两行。\n\n第一行为一个正整数，表示最多能拦截掉的导弹数量；\n\n第二行包含 $n$ 个 $0$ 到 $1$ 之间的实数，第 $i$ 个数字表示第 $i$ 枚导弹被拦截的概率（你可以保留任意多位有效数字）。", "hint": "\n\n保证总方案数不超过 C++ 中 double 类型的存储范围。\n\n### 数据范围及约定\n\n- 均匀分布着约 $30\\%$ 的数据，所有 $v_i$ 均相等；\n- 均匀分布着约 $50\\%$ 的数据，满足 $1\\le h_i,v_i\\le 1000$。\n- 对于 $30\\%$ 的数据，满足 $1\\le n\\le 1000$；\n- 对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^4$，$1\\le h_i,v_i\\le 10^9$。\n\n### 评分标准\n\n对于每个测试点，若输出的第一行与标准输出相同，则得到该测试点 $40\\%$ 的分数，若输出文件的第二行的每个数与标准输出的误差均不大于 $10^{-4}$，则得到该测试点 $60\\%$ 的分数，两项相加作为该测试点总得分。", "locale": "zh-CN"}}}
{"pid": "P2488", "type": "P", "difficulty": 6, "samples": [["2 3\r\n2 2 2\r\n1 1 0\r\n0 0 1\r\n1\r\n2\r\n1 10\r\n1\r\n2\r\n1 6", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "山东", "费用流"], "title": "[SDOI2011] 工作安排", "background": "", "description": "\n你的公司接到了一批订单。订单要求你的公司提供 $n$ 类产品，产品被编号为 $1 \\sim n$，其中第 $i$ 类产品共需要 $C_i$ 件。公司共有 $m$ 名员工，员工被编号为 $1 \\sim m$ 员工能够制造的产品种类有所区别。一件产品必须完整地由一名员工制造，不可以由某名员工制造一部分配件后，再转交给另外一名员工继续进行制造。\n\n我们用一个由 $0$ 和 $1$ 组成的 $m \\times n$ 的矩阵 $A$ 来描述每名员工能够制造哪些产品。矩阵的行和列分别被编号为 $1 \\sim m$ 和 $1 \\sim n$，$A_i,j$ 为 $1$ 表示员工 $i$ 能够制造产品 $j$，为 $0$ 表示员工 $i$ 不能制造产品 $j$。\n\n如果公司分配了过多工作给一名员工，这名员工会变得不高兴。我们用愤怒值来描述某名员工的心情状态。愤怒值越高，表示这名员工心情越不爽，愤怒值越低，表示这名员工心情越愉快。员工的愤怒值与他被安排制造的产品数量存在某函数关系，鉴于员工们的承受能力不同，不同员工之间的函数关系也是有所区别的。\n\n对于员工 $i$，他的愤怒值与产品数量之间的函数是一个 $S_i+1$ 段的分段函数。当他制造第 $1 \\sim T_{i,1}$ 件产品时，每件产品会使他的愤怒值增加 $W_{i,1}$，当他制造第 $T_{i,1}+1 \\sim T_{i,2}$ 件产品时，每件产品会使他的愤怒值增加 $W_{i,2}$ ……为描述方便，设 $T_{i,0}=0,T_{i,s_{i+1}}=+\\infty$，那么当他制造第 $T_{i,j-1}+1 \\sim T_{i,j}$ 件产品时，每件产品会使他的愤怒值增加 $W_{i,j}$，$1 \\le j \\le S_i+1$。\n\n你的任务是制定出一个产品的分配方案，使得订单条件被满足，并且所有员工的愤怒值之和最小。由于我们并不想使用Special Judge，也为了使选手有更多的时间研究其他两道题目，你只需要输出最小的愤怒值之和就可以了。\n", "inputFormat": "https://cdn.luogu.com.cn/upload/pic/1608.png\n\n第一行包含两个正整数 $m$ 和 $n$，分别表示员工数量和产品的种类数；\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数为 $C_i$；\n\n以下 $m$ 行每行 $n$ 个整数描述矩阵 $A$；\n\n下面 $m$ 个部分，第 $i$ 部分描述员工 $i$ 的愤怒值与产品数量的函数关系。每一部分由三行组成：第一行为一个非负整数 $S_i$，第二行包含 $S_i$ 个正整数，其中第 $j$ 个正整数为 $T_{i,j}$，如果 $S_i=0$ 那么输入将不会留空行（即这一部分只由两行组成）。第三行包含 $S_i+1$ 个正整数，其中第 $j$ 个正整数为 $W_{i,j}$。\n", "outputFormat": "仅输出一个整数，表示最小的愤怒值之和。\n", "hint": "\n### 数据范围及约定\n\n- 存在 $30\\%$ 的数据，保证 $1\\le n,m\\le 30$；\n- 均匀分布着约 $30\\%$ 的数据，满足 $S_i = 0$；\n- 均匀分布着约 $30\\%$ 的数据，满足 $S_i \\le 1$（不包含上述 $S_i = 0$ 的数据）。\n\n对于全部数据，满足 $1\\le m,n\\le 250$，$0\\le S_i\\le 5$，$0\\le A_{i, j}\\le 1$，$0< T_{i, j}< T_{i, j + 1}$，$0< W_{i,j} < W_{i, j + 1}$。所有数据均不大于 $10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Work Assignment", "background": "", "description": "Your company has received a batch of orders. The orders require your company to provide $n$ types of products, numbered $1 \\sim n$, where $C_i$ units of type $i$ are needed. The company has $m$ employees, numbered $1 \\sim m$. The types of products that employees can make differ. Each product must be made entirely by a single employee; it is not allowed to have one employee make some parts and then pass it to another employee to continue.\n\nWe use an $m \\times n$ matrix $A$ consisting of $0$ and $1$ to describe which products each employee can make. The rows and columns of the matrix are numbered $1 \\sim m$ and $1 \\sim n$, respectively. $A_i,j$ being $1$ means employee $i$ can make product $j$, and $0$ means employee $i$ cannot make product $j$.\n\nIf the company assigns too much work to an employee, the employee will become unhappy. We use an anger value to describe an employee’s mood. A higher anger value means the employee is more unhappy, and a lower anger value means the employee is happier. There is a functional relationship between an employee’s anger value and the number of products assigned to them. Since employees have different endurance, these functions differ between employees.\n\nFor employee $i$, the function between their anger value and the number of products has $S_i+1$ segments. When they make the $1 \\sim T_{i,1}$-th products, each product increases their anger by $W_{i,1}$. When they make the $(T_{i,1}+1) \\sim T_{i,2}$-th products, each product increases their anger by $W_{i,2}$, and so on. For convenience, let $T_{i,0}=0, T_{i,s_{i+1}}=+\\infty$. Then when they make the $(T_{i,j-1}+1) \\sim T_{i,j}$-th products, each product increases their anger by $W_{i,j}$, $1 \\le j \\le S_i+1$.\n\nYour task is to design an assignment plan for the products so that the order requirements are satisfied, and the sum of anger values of all employees is minimized. Since we do not want to use a Special Judge, and to give contestants more time for the other two problems, you only need to output the minimal sum of anger values.", "inputFormat": "The first line contains two positive integers $m$ and $n$, the number of employees and the number of product types.\n\nThe second line contains $n$ positive integers, where the $i$-th integer is $C_i$.\n\nEach of the next $m$ lines contains $n$ integers describing the matrix $A$.\n\nThen there are $m$ sections, where the $i$-th section describes the functional relationship between employee $i$’s anger value and the number of products. Each section consists of three lines: the first line is a non-negative integer $S_i$; the second line contains $S_i$ positive integers, where the $j$-th integer is $T_{i,j}$ (if $S_i=0$, this line does not appear, i.e., the section has only two lines); the third line contains $S_i+1$ positive integers, where the $j$-th integer is $W_{i,j}$.", "outputFormat": "Output a single integer: the minimal possible sum of anger values.", "hint": "Constraints\n\n- There are $30\\%$ of the testdata with $1 \\le n, m \\le 30$.\n- About $30\\%$ of the testdata satisfy $S_i = 0$.\n- About $30\\%$ of the testdata satisfy $S_i \\le 1$ (excluding the above $S_i = 0$ testdata).\n\nFor all testdata, $1 \\le m, n \\le 250$, $0 \\le S_i \\le 5$, $0 \\le A_{i, j} \\le 1$, $0 < T_{i, j} < T_{i, j + 1}$, $0 < W_{i, j} < W_{i, j + 1}$. All numbers are at most $10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 工作安排", "background": "", "description": "\n你的公司接到了一批订单。订单要求你的公司提供 $n$ 类产品，产品被编号为 $1 \\sim n$，其中第 $i$ 类产品共需要 $C_i$ 件。公司共有 $m$ 名员工，员工被编号为 $1 \\sim m$ 员工能够制造的产品种类有所区别。一件产品必须完整地由一名员工制造，不可以由某名员工制造一部分配件后，再转交给另外一名员工继续进行制造。\n\n我们用一个由 $0$ 和 $1$ 组成的 $m \\times n$ 的矩阵 $A$ 来描述每名员工能够制造哪些产品。矩阵的行和列分别被编号为 $1 \\sim m$ 和 $1 \\sim n$，$A_i,j$ 为 $1$ 表示员工 $i$ 能够制造产品 $j$，为 $0$ 表示员工 $i$ 不能制造产品 $j$。\n\n如果公司分配了过多工作给一名员工，这名员工会变得不高兴。我们用愤怒值来描述某名员工的心情状态。愤怒值越高，表示这名员工心情越不爽，愤怒值越低，表示这名员工心情越愉快。员工的愤怒值与他被安排制造的产品数量存在某函数关系，鉴于员工们的承受能力不同，不同员工之间的函数关系也是有所区别的。\n\n对于员工 $i$，他的愤怒值与产品数量之间的函数是一个 $S_i+1$ 段的分段函数。当他制造第 $1 \\sim T_{i,1}$ 件产品时，每件产品会使他的愤怒值增加 $W_{i,1}$，当他制造第 $T_{i,1}+1 \\sim T_{i,2}$ 件产品时，每件产品会使他的愤怒值增加 $W_{i,2}$ ……为描述方便，设 $T_{i,0}=0,T_{i,s_{i+1}}=+\\infty$，那么当他制造第 $T_{i,j-1}+1 \\sim T_{i,j}$ 件产品时，每件产品会使他的愤怒值增加 $W_{i,j}$，$1 \\le j \\le S_i+1$。\n\n你的任务是制定出一个产品的分配方案，使得订单条件被满足，并且所有员工的愤怒值之和最小。由于我们并不想使用Special Judge，也为了使选手有更多的时间研究其他两道题目，你只需要输出最小的愤怒值之和就可以了。\n", "inputFormat": "https://cdn.luogu.com.cn/upload/pic/1608.png\n\n第一行包含两个正整数 $m$ 和 $n$，分别表示员工数量和产品的种类数；\n\n第二行包含 $n$ 个正整数，第 $i$ 个正整数为 $C_i$；\n\n以下 $m$ 行每行 $n$ 个整数描述矩阵 $A$；\n\n下面 $m$ 个部分，第 $i$ 部分描述员工 $i$ 的愤怒值与产品数量的函数关系。每一部分由三行组成：第一行为一个非负整数 $S_i$，第二行包含 $S_i$ 个正整数，其中第 $j$ 个正整数为 $T_{i,j}$，如果 $S_i=0$ 那么输入将不会留空行（即这一部分只由两行组成）。第三行包含 $S_i+1$ 个正整数，其中第 $j$ 个正整数为 $W_{i,j}$。\n", "outputFormat": "仅输出一个整数，表示最小的愤怒值之和。\n", "hint": "\n### 数据范围及约定\n\n- 存在 $30\\%$ 的数据，保证 $1\\le n,m\\le 30$；\n- 均匀分布着约 $30\\%$ 的数据，满足 $S_i = 0$；\n- 均匀分布着约 $30\\%$ 的数据，满足 $S_i \\le 1$（不包含上述 $S_i = 0$ 的数据）。\n\n对于全部数据，满足 $1\\le m,n\\le 250$，$0\\le S_i\\le 5$，$0\\le A_{i, j}\\le 1$，$0< T_{i, j}< T_{i, j + 1}$，$0< W_{i,j} < W_{i, j + 1}$。所有数据均不大于 $10^5$。", "locale": "zh-CN"}}}
{"pid": "P2489", "type": "P", "difficulty": 6, "samples": [["4 3 2 1\r\n.$.\r\nA#B\r\nA#B\r\n.@.\r\n30 30 20 20", "0.600"], ["4 3 2 2\r\n.$.\r\nA#B\r\nA#B\r\n.@.\r\n30 30 20 20", "0.800"], ["4 3 2 3\r\n.$.\r\nA#B\r\nA#B\r\n.@.\r\n30 30 20 20", "1.000"], ["4 3 3 2\r\n.$.\r\nA#B\r\nA#C\r\n@@@\r\n143 37 335 85 95 25 223 57", "0.858"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2011", "各省省选", "山东"], "title": "[SDOI2011] 迷宫探险", "background": "[](https://paste.ubuntu.com/p/H4h73F2h87/)", "description": "这是一个单人游戏。\n\n游戏开始时，玩家控制的人物出生在迷宫的某个位置，玩家的目标是控制人物走到迷宫的某个出口（出口可能有多个）。\n\n迷宫里有 $k$ 类陷阱（用  `A`,`B`,`C`……表示，相同字母代表相同类型的陷阱），每类陷阱可能是有害的或无害的，而在游戏开始时玩家并不知道哪些陷阱是有害的，哪些是无害的。\n\n同一类陷阱的状态相同，即用同一个字母标志的陷阱要么全部有害，要么全部无害，不会发生一部分有害而另一部分无害的情况。任何陷阱状态的组合都有一个发生概率，考虑下例：\n\n当 $k=2$ 时，迷宫内共有两类陷阱，分别用 `A` 和 `B` 表示，陷阱状态的组合共有 $4$ 种：-\n- `A` 是无害陷阱，`B` 是无害陷阱。\n- `A` 是有害陷阱，`B` 是无害陷阱；\n- `A` 是无害陷阱，`B` 是有害陷阱；\n- `A` 是有害陷阱，`B` 是有害陷阱；\n\n下列表格是一个合法的概率表格：\n\n|  | `A` 是无害陷阱 | `A` 是有害陷阱 |\n| -----------: | -----------: | -----------: |\n| **`B` 是无害陷阱** | $36\\%$ | $24\\%$ |\n| **`B` 是有害陷阱** | $24\\%$ | $16\\%$ |\n\n当 $k=3$ 时，会有 $8$ 种不同的陷阱状态组合，如果我们依然坚持使用概率表格，那么这个表格将会是三维的（$2\\times 2 \\times 2$，每一维对应着一类陷阱）。当 $k\\ge 3$ 时，这将使得题目难以描述。因此我们使用一个大小为 $2^{k}$ 的数组 $p$ 来描述每种情况发生的可能性，$p$ 的下标范围为 $0\\sim 2^{k}-1$。\n\n$p$ 是这样生成的：\n\n对于每个可能的陷阱状态组合，考虑所有 $k$ 类陷阱，令 $1$ 表示某个陷阱有害，$0$ 表示某个陷阱无害，把 `A` 作为二进制数的第 $0$ 位（从右边开始计数），`B` 作为第 $1$ 位，`C` 作为第 $2$ 位……通过以上操作，我们可以得到一个 $k$ 位的二进制数，把它转化成十进制后，$2^{k}$ 种陷阱状态的组合将会与整数 $0\\sim2^{k}-1$ 一一对应。\n\n设 $S = \\displaystyle\\sum_{i=0}^{2^k-1} p_i$，则陷阱状态组合 $i$ 出现的概率为 $\\dfrac {p_{i}} {S}$。\n\n上述表格对应的一个合法数组 $p$ 为 $36,24,24,16$。\n\n当然同一个概率表格可能会对应多个数组 $p$（事实上有无数个数组 $p$ 能够迎合表格数据），例如上述表格同时也对应着下面的数组 $p$：$72,48,48,32$。\n\n玩家控制的人物初始情况下有 $H$ 点生命，当人物踏上某个陷阱时，如果这个陷阱是有害的，那么会损失 $1$ 点生命，否则这个陷阱是无害的，不损失生命。无论上述哪种情况发生，玩家会立刻得到这个陷阱的信息（有害或无害）。一旦生命小于等于 $0$，玩家控制的人物会立刻死亡。\n\n迷宫可以看作 $m\\times n$ 的方格地图，每个元素可能是：\n- `.`：表示这是平地，可以通过；\n- `#`：表示这是墙，不能通过；\n- `A`，`B` ，`C`……：表示这是一个陷阱；\n- `$`：表示这是起点，地图中有且仅有一个；\n- `@`：表示这是终点，地图中可以有多个，也可以一个也没有。\n\n人物可以向上下左右四个方向行走，不可以走对角线，也不可以走出地图。\n\n给定 $m\\times n$ 的地图、$k$、$h$ 以及大小为 $2^{k}$ 的概率数组。你的任务是求出在执行最优策略时，人物能活着走出迷宫的概率。", "inputFormat": "第一行包含 $4$ 个整数，分别表示 $m,n,k,H$；\n\n下面 $m$ 行每行 $n$ 个字符描述迷宫地图；\n\n最后一行包含 $2^{k}$ 个非负整数描述数组 $p$，数组下标从 $0$ 开始。", "outputFormat": "仅包含一个数字，表示在执行最优策略时，人物活着走出迷宫的概率。四舍五入保留 $3$ 位小数。", "hint": "**【样例说明 1】**\n\n向右边走，经过 `B` ，`B` 为有害陷阱的概率为 $\\frac {(20+20)}{(30+30+20+20)}=0.4$，若 `B` 为有害陷阱那么人物就死掉了，游戏失败，否则玩家得知 `B` 是无害陷阱，继续经过另一个 `B` 达到终点，胜利的概率为 $0.6$。\n\n**【样例说明 2】**\n\n向左边走，经过 `A`，`A` 为有害陷阱的概率为 $\\frac {(30+30)} {(30+30+20+20)}=0.5$。若 `A` 为有害陷阱，那么损失一点生命，转到右边尝试 `B` ，要想成功到达终点，此时 `B` 必须为无害陷阱，而在 `A`是有害陷阱的前提下，`B` 是无害陷阱的概率是 $\\frac {30}{(30+20)}=0.6$，故这种情况发生的概率为 $0.5\\times 0.6=0.3$。若 `A`是无害陷阱，玩家可以控制人物连续通过两个 `A` 到达终点，这种情况发生的概率 $0.5$。所以答案为 $0.3+0.5=0.8$。 \n\n\n**【样例说明 3】**\n\n玩家控制的人物有 $3$ 点生命，但最多只需要经过两个陷阱，所以任意选左路\n或右路走过去就可以到达终点了。\n\n**【数据范围与约定】**\n\n|测试点编号  | $m$ | $n$ | $k$ | $H$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $29$ | $28$ | $5$ | $1$ |\n| $2$ | $28$ | $20$ | $4$ | $1$ |\n| $3$ | $25$ | $30$ | $1$ | $1$ |\n| $4$ | $25$ | $30$ | $1$ | $2$ |\n| $5$ | $25$ | $30$ | $1$ | $3$ |\n| $6$ | $5$ | $5$ | $4$ | $4$ |\n| $7$ | $12$ | $11$ | $4$ | $5$ |\n| $8$ | $19$ | $17$ | $5$ | $3$ |\n| $9$ | $23$ | $25$ | $5$ | $4$ |\n| $10$ | $30$ | $29$ | $5$ | $5$ |\n\n对于 $100\\%$ 的数据，$1\\le m\\leq 30$，$1\\le n\\leq 29$，$k\\leq 5$，$H\\leq 5$，$0\\leq p_i\\leq 10^5$，且至少有一个 $p_i\\gt0$ 。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Maze Exploration", "background": "https://paste.ubuntu.com/p/H4h73F2h87/", "description": "This is a single-player game.\n\nAt the start of the game, the player’s character spawns at some position in a maze. The player’s goal is to control the character to reach an exit of the maze (there may be multiple exits).\n\nThere are $k$ types of traps in the maze (denoted by `A`, `B`, `C`, …; the same letter represents the same type of trap). Each type of trap may be harmful or harmless, and at the beginning of the game the player does not know which traps are harmful and which are harmless.\n\nTraps of the same type share the same state: all traps marked with the same letter are either all harmful or all harmless; it never happens that some are harmful and others are harmless. Every combination of trap states has a probability. Consider the following example:\n\nWhen $k=2$, there are two types of traps in the maze, denoted by `A` and `B`. There are $4$ combinations of trap states:\n- `A` is harmless, `B` is harmless.\n- `A` is harmful, `B` is harmless.\n- `A` is harmless, `B` is harmful.\n- `A` is harmful, `B` is harmful.\n\nThe following table is a valid probability table:\n\n|  | `A` is harmless | `A` is harmful |\n| -----------: | -----------: | -----------: |\n| **`B` is harmless** | $36\\%$ | $24\\%$ |\n| **`B` is harmful** | $24\\%$ | $16\\%$ |\n\nWhen $k=3$, there are $8$ different combinations of trap states. If we still insist on using a probability table, it would be three-dimensional ($2 \\times 2 \\times 2$, with each dimension corresponding to one trap type). When $k \\ge 3$, this makes the problem hard to describe. Therefore, we use an array $p$ of size $2^{k}$ to describe the probability of each case. The index range of $p$ is $0 \\sim 2^{k} - 1$.\n\nArray $p$ is constructed as follows:\n\nFor each possible combination of trap states, consider all $k$ types of traps. Let $1$ indicate a harmful trap and $0$ indicate a harmless trap. Treat `A` as the $0$-th bit of a binary number (counting from the right), `B` as the $1$-st bit, `C` as the $2$-nd bit, and so on. With this, we obtain a $k$-bit binary number. After converting it to decimal, the $2^{k}$ combinations of trap states correspond one-to-one to the integers $0 \\sim 2^{k} - 1$.\n\nLet $S = \\displaystyle\\sum_{i=0}^{2^k-1} p_i$. Then the probability that trap-state combination $i$ occurs is $\\dfrac {p_{i}} {S}$.\n\nA valid array $p$ corresponding to the above table is $36, 24, 24, 16$.\n\nOf course, the same probability table may correspond to multiple arrays $p$ (in fact, infinitely many arrays $p$ can match the table data). For example, the above table also corresponds to the array $p$: $72, 48, 48, 32$.\n\nThe player’s character initially has $H$ hit points (HP). When the character steps on a trap, if the trap is harmful, $1$ HP is lost; otherwise, if the trap is harmless, no HP is lost. In either case, the player immediately learns the information of that trap (harmful or harmless). Once HP is less than or equal to $0$, the character dies immediately.\n\nThe maze can be regarded as an $m \\times n$ grid map. Each cell may be:\n- `.`: flat ground, passable.\n- `#`: wall, impassable.\n- `A`, `B`, `C`, …: a trap.\n- `$`: the starting point; there is exactly one on the map.\n- `@`: an exit; there may be multiple, or none.\n\nThe character can move up, down, left, and right. Diagonal movement is not allowed, and the character cannot move outside the map.\n\nGiven the $m \\times n$ map, $k$, $H$, and the probability array of size $2^{k}$, your task is to compute the probability that, under an optimal strategy, the character reaches an exit alive.", "inputFormat": "The first line contains $4$ integers, denoting $m$, $n$, $k$, and $H$.\n\nThe next $m$ lines each contain $n$ characters describing the maze map.\n\nThe last line contains $2^{k}$ nonnegative integers describing the array $p$, with indices starting from $0$.", "outputFormat": "Output a single number: the probability that, under an optimal strategy, the character reaches an exit alive. Round to $3$ decimal places.", "hint": "【Sample Explanation 1】\n\nMove right, passing `B`. The probability that `B` is harmful is $\\frac {(20+20)}{(30+30+20+20)}=0.4$. If `B` is harmful, the character dies and the game fails; otherwise, the player learns that `B` is harmless and continues through another `B` to reach the exit. The success probability is $0.6$.\n\n【Sample Explanation 2】\n\nMove left, passing `A`. The probability that `A` is harmful is $\\frac {(30+30)} {(30+30+20+20)}=0.5$. If `A` is harmful, $1$ HP is lost, then switch to the right path to try `B`. To succeed, `B` must be harmless. Given that `A` is harmful, the conditional probability that `B` is harmless is $\\frac {30}{(30+20)}=0.6$. Hence, the probability of this branch is $0.5 \\times 0.6 = 0.3$. If `A` is harmless, the player can guide the character through two consecutive `A` to reach the exit, with probability $0.5$. Therefore, the answer is $0.3 + 0.5 = 0.8$.\n\n【Sample Explanation 3】\n\nThe character has $3$ HP but needs to pass through at most two traps, so taking either the left or the right path suffices to reach the exit.\n\nConstraints\n\n| Test point ID | $m$ | $n$ | $k$ | $H$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $29$ | $28$ | $5$ | $1$ |\n| $2$ | $28$ | $20$ | $4$ | $1$ |\n| $3$ | $25$ | $30$ | $1$ | $1$ |\n| $4$ | $25$ | $30$ | $1$ | $2$ |\n| $5$ | $25$ | $30$ | $1$ | $3$ |\n| $6$ | $5$ | $5$ | $4$ | $4$ |\n| $7$ | $12$ | $11$ | $4$ | $5$ |\n| $8$ | $19$ | $17$ | $5$ | $3$ |\n| $9$ | $23$ | $25$ | $5$ | $4$ |\n| $10$ | $30$ | $29$ | $5$ | $5$ |\n\nFor $100\\%$ of the testdata, $1 \\le m \\le 30$, $1 \\le n \\le 29$, $k \\le 5$, $H \\le 5$, $0 \\le p_i \\le 10^5$, and at least one $p_i \\gt 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 迷宫探险", "background": "[](https://paste.ubuntu.com/p/H4h73F2h87/)", "description": "这是一个单人游戏。\n\n游戏开始时，玩家控制的人物出生在迷宫的某个位置，玩家的目标是控制人物走到迷宫的某个出口（出口可能有多个）。\n\n迷宫里有 $k$ 类陷阱（用  `A`,`B`,`C`……表示，相同字母代表相同类型的陷阱），每类陷阱可能是有害的或无害的，而在游戏开始时玩家并不知道哪些陷阱是有害的，哪些是无害的。\n\n同一类陷阱的状态相同，即用同一个字母标志的陷阱要么全部有害，要么全部无害，不会发生一部分有害而另一部分无害的情况。任何陷阱状态的组合都有一个发生概率，考虑下例：\n\n当 $k=2$ 时，迷宫内共有两类陷阱，分别用 `A` 和 `B` 表示，陷阱状态的组合共有 $4$ 种：-\n- `A` 是无害陷阱，`B` 是无害陷阱。\n- `A` 是有害陷阱，`B` 是无害陷阱；\n- `A` 是无害陷阱，`B` 是有害陷阱；\n- `A` 是有害陷阱，`B` 是有害陷阱；\n\n下列表格是一个合法的概率表格：\n\n|  | `A` 是无害陷阱 | `A` 是有害陷阱 |\n| -----------: | -----------: | -----------: |\n| **`B` 是无害陷阱** | $36\\%$ | $24\\%$ |\n| **`B` 是有害陷阱** | $24\\%$ | $16\\%$ |\n\n当 $k=3$ 时，会有 $8$ 种不同的陷阱状态组合，如果我们依然坚持使用概率表格，那么这个表格将会是三维的（$2\\times 2 \\times 2$，每一维对应着一类陷阱）。当 $k\\ge 3$ 时，这将使得题目难以描述。因此我们使用一个大小为 $2^{k}$ 的数组 $p$ 来描述每种情况发生的可能性，$p$ 的下标范围为 $0\\sim 2^{k}-1$。\n\n$p$ 是这样生成的：\n\n对于每个可能的陷阱状态组合，考虑所有 $k$ 类陷阱，令 $1$ 表示某个陷阱有害，$0$ 表示某个陷阱无害，把 `A` 作为二进制数的第 $0$ 位（从右边开始计数），`B` 作为第 $1$ 位，`C` 作为第 $2$ 位……通过以上操作，我们可以得到一个 $k$ 位的二进制数，把它转化成十进制后，$2^{k}$ 种陷阱状态的组合将会与整数 $0\\sim2^{k}-1$ 一一对应。\n\n设 $S = \\displaystyle\\sum_{i=0}^{2^k-1} p_i$，则陷阱状态组合 $i$ 出现的概率为 $\\dfrac {p_{i}} {S}$。\n\n上述表格对应的一个合法数组 $p$ 为 $36,24,24,16$。\n\n当然同一个概率表格可能会对应多个数组 $p$（事实上有无数个数组 $p$ 能够迎合表格数据），例如上述表格同时也对应着下面的数组 $p$：$72,48,48,32$。\n\n玩家控制的人物初始情况下有 $H$ 点生命，当人物踏上某个陷阱时，如果这个陷阱是有害的，那么会损失 $1$ 点生命，否则这个陷阱是无害的，不损失生命。无论上述哪种情况发生，玩家会立刻得到这个陷阱的信息（有害或无害）。一旦生命小于等于 $0$，玩家控制的人物会立刻死亡。\n\n迷宫可以看作 $m\\times n$ 的方格地图，每个元素可能是：\n- `.`：表示这是平地，可以通过；\n- `#`：表示这是墙，不能通过；\n- `A`，`B` ，`C`……：表示这是一个陷阱；\n- `$`：表示这是起点，地图中有且仅有一个；\n- `@`：表示这是终点，地图中可以有多个，也可以一个也没有。\n\n人物可以向上下左右四个方向行走，不可以走对角线，也不可以走出地图。\n\n给定 $m\\times n$ 的地图、$k$、$h$ 以及大小为 $2^{k}$ 的概率数组。你的任务是求出在执行最优策略时，人物能活着走出迷宫的概率。", "inputFormat": "第一行包含 $4$ 个整数，分别表示 $m,n,k,H$；\n\n下面 $m$ 行每行 $n$ 个字符描述迷宫地图；\n\n最后一行包含 $2^{k}$ 个非负整数描述数组 $p$，数组下标从 $0$ 开始。", "outputFormat": "仅包含一个数字，表示在执行最优策略时，人物活着走出迷宫的概率。四舍五入保留 $3$ 位小数。", "hint": "**【样例说明 1】**\n\n向右边走，经过 `B` ，`B` 为有害陷阱的概率为 $\\frac {(20+20)}{(30+30+20+20)}=0.4$，若 `B` 为有害陷阱那么人物就死掉了，游戏失败，否则玩家得知 `B` 是无害陷阱，继续经过另一个 `B` 达到终点，胜利的概率为 $0.6$。\n\n**【样例说明 2】**\n\n向左边走，经过 `A`，`A` 为有害陷阱的概率为 $\\frac {(30+30)} {(30+30+20+20)}=0.5$。若 `A` 为有害陷阱，那么损失一点生命，转到右边尝试 `B` ，要想成功到达终点，此时 `B` 必须为无害陷阱，而在 `A`是有害陷阱的前提下，`B` 是无害陷阱的概率是 $\\frac {30}{(30+20)}=0.6$，故这种情况发生的概率为 $0.5\\times 0.6=0.3$。若 `A`是无害陷阱，玩家可以控制人物连续通过两个 `A` 到达终点，这种情况发生的概率 $0.5$。所以答案为 $0.3+0.5=0.8$。 \n\n\n**【样例说明 3】**\n\n玩家控制的人物有 $3$ 点生命，但最多只需要经过两个陷阱，所以任意选左路\n或右路走过去就可以到达终点了。\n\n**【数据范围与约定】**\n\n|测试点编号  | $m$ | $n$ | $k$ | $H$ |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n| $1$ | $29$ | $28$ | $5$ | $1$ |\n| $2$ | $28$ | $20$ | $4$ | $1$ |\n| $3$ | $25$ | $30$ | $1$ | $1$ |\n| $4$ | $25$ | $30$ | $1$ | $2$ |\n| $5$ | $25$ | $30$ | $1$ | $3$ |\n| $6$ | $5$ | $5$ | $4$ | $4$ |\n| $7$ | $12$ | $11$ | $4$ | $5$ |\n| $8$ | $19$ | $17$ | $5$ | $3$ |\n| $9$ | $23$ | $25$ | $5$ | $4$ |\n| $10$ | $30$ | $29$ | $5$ | $5$ |\n\n对于 $100\\%$ 的数据，$1\\le m\\leq 30$，$1\\le n\\leq 29$，$k\\leq 5$，$H\\leq 5$，$0\\leq p_i\\leq 10^5$，且至少有一个 $p_i\\gt0$ 。", "locale": "zh-CN"}}}
{"pid": "P2490", "type": "P", "difficulty": 6, "samples": [["10 4 2", "182"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "博弈论", "2011", "各省省选", "山东", "排列组合"], "title": "[SDOI2011] 黑白棋", "background": "", "description": "小 A 和小 B 又想到了一个新的游戏。\n\n这个游戏是在一个 $1 \\times n$ 的棋盘上进行的，棋盘上有 $k$ 个棋子，一半是黑色，一半是白色。\n\n最左边是白色棋子，最右边是黑色棋子，相邻的棋子颜色不同。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dmv5zoyy.png)\n\n小 A 可以移动白色棋子，小 B 可以移动黑色的棋子，其中白色不能往左，黑色不能往右。他们每次操作可以移动 $1$ 到 $d$ 个棋子。\n\n每当移动某一个棋子时，这个棋子不能跨越两边的棋子，当然也不可以出界。当谁不可以操作时，谁就失败了。\n\n小 A 和小 B 轮流操作，现在小 A 先移动，有多少种初始棋子的布局会使他胜利呢？\n", "inputFormat": "输入三个数 $n,k,d$。\n", "outputFormat": "输出小 A 胜利的方案总数。答案对 $10^9+7$ 取模。\n", "hint": "- 对于 $30\\%$ 的数据，有 $k=2$。\n- 对于 $100\\%$ 的数据，有 $1 \\leq d \\leq k \\leq n \\leq 10^4$，$k$ 为偶数，$k \\leq 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Black and White Chess", "background": "", "description": "A and B came up with a new game.\n\nThe game is played on a $1 \\times n$ board. There are $k$ pieces on the board, half black and half white.\n\nThe leftmost piece is white, the rightmost piece is black, and adjacent pieces have alternating colors.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dmv5zoyy.png)\n\nA may move white pieces, and B may move black pieces. White pieces cannot move left, and black pieces cannot move right. On each turn, they may move $1$ to $d$ pieces.\n\nWhen moving a piece, it cannot cross over neighboring pieces on either side, and it cannot move off the board. Whoever has no legal move loses.\n\nA and B take turns, with A moving first. How many initial arrangements of the pieces will make A win?", "inputFormat": "Input three numbers $n,k,d$.", "outputFormat": "Output the total number of initial configurations in which A wins. Print the answer modulo $10^9+7$.", "hint": "- For $30\\%$ of the testdata, $k=2$.\n- For $100\\%$ of the testdata, $1 \\leq d \\leq k \\leq n \\leq 10^4$, $k$ is even, and $k \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 黑白棋", "background": "", "description": "小 A 和小 B 又想到了一个新的游戏。\n\n这个游戏是在一个 $1 \\times n$ 的棋盘上进行的，棋盘上有 $k$ 个棋子，一半是黑色，一半是白色。\n\n最左边是白色棋子，最右边是黑色棋子，相邻的棋子颜色不同。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dmv5zoyy.png)\n\n小 A 可以移动白色棋子，小 B 可以移动黑色的棋子，其中白色不能往左，黑色不能往右。他们每次操作可以移动 $1$ 到 $d$ 个棋子。\n\n每当移动某一个棋子时，这个棋子不能跨越两边的棋子，当然也不可以出界。当谁不可以操作时，谁就失败了。\n\n小 A 和小 B 轮流操作，现在小 A 先移动，有多少种初始棋子的布局会使他胜利呢？\n", "inputFormat": "输入三个数 $n,k,d$。\n", "outputFormat": "输出小 A 胜利的方案总数。答案对 $10^9+7$ 取模。\n", "hint": "- 对于 $30\\%$ 的数据，有 $k=2$。\n- 对于 $100\\%$ 的数据，有 $1 \\leq d \\leq k \\leq n \\leq 10^4$，$k$ 为偶数，$k \\leq 100$。\n", "locale": "zh-CN"}}}
{"pid": "P2491", "type": "P", "difficulty": 5, "samples": [["5 2\n1 2 5\n2 3 2\n2 4 4\n2 5 3", "5"], ["8 6\n1 3 2\n2 3 2 \n3 4 6\n4 5 3\n4 6 4\n4 7 2\n7 8 3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2011", "二分", "各省省选", "单调队列", "山东", "广度优先搜索 BFS", "优先队列", "树的直径"], "title": "[SDOI2011] 消防", "background": null, "description": "某个国家有 $n$ 个城市，这 $n$ 个城市中任意两个都连通且有唯一一条路径，每条连通两个城市的道路的长度为 $z_i$。\n\n这个国家的人对火焰有超越宇宙的热情，所以这个国家最兴旺的行业是消防业。由于政$%$府对国民的热情忍无可忍（大量的消防经费开销）可是却又无可奈何（总统竞选的国民支持率），所以只能想尽方法提高消防能力。\n\n现在这个国家的经费足以在一条边长度和不超过 $s$ 的路径（两端都是城市）上建立消防枢纽，为了尽量提高枢纽的利用率，要求其他所有城市到这条路径的距离的最大值最小。\n\n你受命监管这个项目，你当然需要知道应该把枢纽建立在什么位置上。", "inputFormat": "输入包含 $n$ 行：\n\n第 $1$ 行，两个正整数 $n$ 和 $s$，中间用一个空格隔开。其中 $n$ 为城市的个数，$s$ 为路径长度的上界。设结点编号以此为$1,2,\\ldots,n$。\n\n从第 $2$ 行到第 $n$ 行，每行给出 $3$ 个用空格隔开的非负整数，依次表示每一条边的两个端点编号和长度。例如，```2 4 7```表示连接结点 $2$ 与 $4$ 的边的长度为 $7$。", "outputFormat": "输出包含一个非负整数，即所有城市到选择的路径的最大值，当然这个最大值必须是所有方案中最小的。", "hint": "对于 $20\\%$ 的数据，$n \\le 300$。\n\n对于 $50\\%$ 的数据，$n \\le 3 \\times 10^3$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 3 \\times 10^5$，$0\\le z_i \\le 10^3$。\n\n\n\n------------\n2024/1/28 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Firefighting", "background": "", "description": "There are $n$ cities in a country. Any two of these $n$ cities are connected and have a unique path between them. Each road connecting two cities has length $z_i$.\n\nThe people of this country have a passion for flames beyond the universe, so the most prosperous industry is firefighting. Since the gov$%$ernment cannot tolerate the people's enthusiasm (massive firefighting budget expenditure) yet can do nothing about it (public support in presidential elections), they can only try every means to improve firefighting capacity.\n\nNow the country's budget is sufficient to build a firefighting hub along a path (with both endpoints being cities) whose total length is no more than $s$. To maximize the hub's utilization, it is required to minimize the maximum distance from all other cities to this path.\n\nYou are assigned to oversee this project, and of course you need to know where to place the hub.", "inputFormat": "The input contains $n$ lines:\n\n- Line $1$: two positive integers $n$ and $s$, separated by a space. Here $n$ is the number of cities, and $s$ is the upper bound on the path length. Nodes are numbered $1,2,\\ldots,n$.\n- From line $2$ to line $n$: each line gives $3$ positive integers, representing the two endpoints and the length of one edge. For example, ```2 4 7``` means the length of the edge connecting nodes $2$ and $4$ is $7$.", "outputFormat": "Output a single non-negative integer, which is the minimal possible value of the maximum distance from any city to the chosen path.", "hint": "For $20\\%$ of the testdata, $n \\le 300$.\n\nFor $50\\%$ of the testdata, $n \\le 3 \\times 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 3 \\times 10^5$, $0 \\le z_i \\le 10^3$.\n\n------------\n2024/1/28 added a set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 消防", "background": null, "description": "某个国家有 $n$ 个城市，这 $n$ 个城市中任意两个都连通且有唯一一条路径，每条连通两个城市的道路的长度为 $z_i$。\n\n这个国家的人对火焰有超越宇宙的热情，所以这个国家最兴旺的行业是消防业。由于政$%$府对国民的热情忍无可忍（大量的消防经费开销）可是却又无可奈何（总统竞选的国民支持率），所以只能想尽方法提高消防能力。\n\n现在这个国家的经费足以在一条边长度和不超过 $s$ 的路径（两端都是城市）上建立消防枢纽，为了尽量提高枢纽的利用率，要求其他所有城市到这条路径的距离的最大值最小。\n\n你受命监管这个项目，你当然需要知道应该把枢纽建立在什么位置上。", "inputFormat": "输入包含 $n$ 行：\n\n第 $1$ 行，两个正整数 $n$ 和 $s$，中间用一个空格隔开。其中 $n$ 为城市的个数，$s$ 为路径长度的上界。设结点编号以此为$1,2,\\ldots,n$。\n\n从第 $2$ 行到第 $n$ 行，每行给出 $3$ 个用空格隔开的非负整数，依次表示每一条边的两个端点编号和长度。例如，```2 4 7```表示连接结点 $2$ 与 $4$ 的边的长度为 $7$。", "outputFormat": "输出包含一个非负整数，即所有城市到选择的路径的最大值，当然这个最大值必须是所有方案中最小的。", "hint": "对于 $20\\%$ 的数据，$n \\le 300$。\n\n对于 $50\\%$ 的数据，$n \\le 3 \\times 10^3$。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 3 \\times 10^5$，$0\\le z_i \\le 10^3$。\n\n\n\n------------\n2024/1/28 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P2492", "type": "P", "difficulty": 7, "samples": [["2\r\n  0 1 0 0 0\r\n0 0 2 0 4 0 0\r\n0 0 4 3 0 3 2\r\n  0 0 0 1 0\r\n", "18 1"], ["3\r\n    0 0 0 1 0 0 0\r\n  0 0 0 0 0 0 0 0 0\r\n0 0 2 0 0 0 0 0 0 0 0\r\n0 0 0 0 0 0 3 0 0 0 0\r\n  0 0 0 0 0 0 0 0 0\r\n    0 3 0 1 0 2 0\r\n", "44 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "山东"], "title": "[SDOI2011] 火星移民", "background": "", "description": "在 2xyz 年，人类已经移民到了火星上。由于工业的需要，人们开始在火星上采矿。火星的矿区是一个边长为 $N$ 的正六边形，为了方便规划，整个矿区被分为 $6 \\times N \\times N$ 个正三角形的区域（如图 $1$）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/po1ic1wr.png)\n\n整个矿区中存在 $A$ 矿，$B$ 矿，$C$ 矿三个矿场，和 $a$ 厂，$b$ 厂，$c$ 厂三个炼矿厂。每个三角形的区域可以是一个矿场、炼矿厂、山地、或者平地。\n\n现在矿区管理局要求建立一个交通系统，使得矿场和对应炼矿厂之间存在一条公路，并且三条公路互不交叉（即一个三角形区域中不存在两条以上运输不同矿的公路）。两个三角形区域是相邻的当且仅当这两个三角形存在公共边，只有相邻的两个区域之间才能建一段路，建这段路的费用为 $1$。\n\n注意，山地上是不能建公路的。由于火星金融危机的影响，矿区管理局想知道建立这样一个交通系统最少要花多少费用。更多的，当局向知道有多少种花费最小的方案。\n", "inputFormat": "第 $1$ 行一个整数 $N$。表示这个矿区是边长为 $N$ 的正六边形。\n\n接下来有 $6\\times N\\times N$ 的整数，分为 $2\\ \\times N$ 行，表示矿区当前区域的情况。$0$ 表示平地，$1,2,3$ 表示对应的矿区或者炼矿厂，$4$ 表示山地。（样例 $1$ 对应图 $2$）。\n\n可能有多组数据，请处理到文件结尾。", "outputFormat": "对于每组数据，包含两个整数，表示最小费用和达到最小费用的方案数。如果找不到符合要求的方案，输出 $\\verb!-1 -1!$。由于方案数可能过大，所以请把方案数 $\\bmod (10^9+7)$。", "hint": "样例2解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xbsmfw8q.png)\n\n【数据规模和约定】\n\n对于 $50\\%$ 的数据，$N \\le 4$。\n\n对于 $100\\%$ 的数据，$N \\le 6$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Mars Immigration", "background": "", "description": "In the year 2xyz, humans have already immigrated to Mars. Due to industrial needs, people have started mining on Mars. The mining area is a regular hexagon with side length $N$. For planning convenience, the entire area is divided into $6 \\times N \\times N$ regular triangular cells (see Figure $1$).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/po1ic1wr.png)\n\nThere are three mines of types $A$, $B$, $C$, and three refineries of types $a$, $b$, $c$. Each triangular cell can be a mine, a refinery, a mountain, or flatland.\n\nThe management requires building a transportation system such that there is a road between each mine and its corresponding refinery (i.e., $A$ connects to $a$, $B$ to $b$, $C$ to $c$), and the three roads do not cross each other (that is, no triangular cell may be used by two or more roads transporting different ores). Two triangular cells are adjacent if and only if they share a common edge; roads may be built only between adjacent cells, and the cost to build such a road segment is $1$.\n\nNote that roads cannot be built on mountains. Due to a Martian financial crisis, the management wants to know the minimum total cost to build such a transportation system. Moreover, they want to know how many minimum-cost solutions there are.", "inputFormat": "The first line contains an integer $N$, the side length of the regular hexagonal mining area.\n\nThen follow $6 \\times N \\times N$ integers, given in $2 \\times N$ lines, each containing $3 \\times N$ integers, describing the current state of each cell. $0$ denotes flatland, $1, 2, 3$ denote the corresponding mine or refinery, and $4$ denotes mountain. (Sample $1$ corresponds to Figure $2$.)\n\nThere may be multiple test cases; process until end of file.", "outputFormat": "For each test case, output two integers: the minimum cost and the number of minimum-cost solutions. If no feasible solution exists, output $\\verb!-1 -1!$. Since the number of solutions may be large, output the count modulo $(10^9+7)$.", "hint": "Explanation for Sample 2.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xbsmfw8q.png)\n\nConstraints\n\n- For $50\\%$ of the testdata, $N \\le 4$.\n- For $100\\%$ of the testdata, $N \\le 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 火星移民", "background": "", "description": "在 2xyz 年，人类已经移民到了火星上。由于工业的需要，人们开始在火星上采矿。火星的矿区是一个边长为 $N$ 的正六边形，为了方便规划，整个矿区被分为 $6 \\times N \\times N$ 个正三角形的区域（如图 $1$）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/po1ic1wr.png)\n\n整个矿区中存在 $A$ 矿，$B$ 矿，$C$ 矿三个矿场，和 $a$ 厂，$b$ 厂，$c$ 厂三个炼矿厂。每个三角形的区域可以是一个矿场、炼矿厂、山地、或者平地。\n\n现在矿区管理局要求建立一个交通系统，使得矿场和对应炼矿厂之间存在一条公路，并且三条公路互不交叉（即一个三角形区域中不存在两条以上运输不同矿的公路）。两个三角形区域是相邻的当且仅当这两个三角形存在公共边，只有相邻的两个区域之间才能建一段路，建这段路的费用为 $1$。\n\n注意，山地上是不能建公路的。由于火星金融危机的影响，矿区管理局想知道建立这样一个交通系统最少要花多少费用。更多的，当局向知道有多少种花费最小的方案。\n", "inputFormat": "第 $1$ 行一个整数 $N$。表示这个矿区是边长为 $N$ 的正六边形。\n\n接下来有 $6\\times N\\times N$ 的整数，分为 $2\\ \\times N$ 行，表示矿区当前区域的情况。$0$ 表示平地，$1,2,3$ 表示对应的矿区或者炼矿厂，$4$ 表示山地。（样例 $1$ 对应图 $2$）。\n\n可能有多组数据，请处理到文件结尾。", "outputFormat": "对于每组数据，包含两个整数，表示最小费用和达到最小费用的方案数。如果找不到符合要求的方案，输出 $\\verb!-1 -1!$。由于方案数可能过大，所以请把方案数 $\\bmod (10^9+7)$。", "hint": "样例2解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xbsmfw8q.png)\n\n【数据规模和约定】\n\n对于 $50\\%$ 的数据，$N \\le 4$。\n\n对于 $100\\%$ 的数据，$N \\le 6$。", "locale": "zh-CN"}}}
{"pid": "P2493", "type": "P", "difficulty": 7, "samples": [["5 5\r\n11011\r\n11011\r\n11011\r\n11011\r\n11411\r\n1 1\r\n2 1\r\n3 1\r\n4 1\r\n4\r\n5 5\r\n4 4\r\n2 5\r\n1 4", "21\r\nRDDDDRRRULURULU\r\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2011", "各省省选", "山东", "Special Judge"], "title": "[SDOI2011] 贪食蛇", "background": "", "description": "\n相信大家都玩过贪食蛇游戏，现在有一个改版贪食蛇游戏，跟传统的贪食蛇游戏一样，贪食蛇在活动区域内运动，吃食物，但是这个改版的贪食蛇游戏有着一些特别的规则。\n\n活动区域：\n\n贪食蛇的活动区域是一个 $R$ 行 $C$ 列的网格 $A$，贪食蛇活动不能超过这个网格的范围。第 $i$ 行第 $j$ 列的方格用 $A_{i,j}$ 表示。每个方格有一个整数权值，记作 $w(A_{i,j})$。$0 \\leq w(A_{i,j}) \\leq 8$，$w(A_{i,j}) = 0$时，$A_{i,j}$ 禁止进入；$w(A_{i, j}) > 0$时，$A_{i, j}$ 允许进入。\n\n方向：\n\n对于 $P = (X_0, Y_0)$、$Q = (X_1, Y_1)$，有以下四种基本方向：\n\n- 正左(L)：$X_0 = X_1$ 且 $Y_0 = Y_1 - 1$，则称 $P$ 位于 $Q$ 的正左方向。\n- 正右(R)：$X_0 = X_1$ 且 $Y_0 = Y_1 + 1$，则称 $P$ 位于 $Q$ 的正右方向。\n- 正上(U)：$X_0 = X_1 - 1$ 且 $Y_0 = Y_1$，则称 $P$ 位于 $Q$ 的正上方向。\n- 正下(D)：$X_0 = X_1 + 1$ 且 $Y_0 = Y_1$，则称 $P$ 位于 $Q$ 的正下方向。\n\n贪食蛇：\n\n贪食蛇 $B$ 是占据若干方格的图形，占据的方格数为贪食蛇的长度，记为 $m$，则贪食蛇从头到尾，用 $B_1, B_2, \\dots, B_m$表示。记 $p$ 为贪食蛇的形态，若 $B_i$ 位于第 $X_i$ 行第 $Y_i$ 列，则 $p(B_i)=(X_i, Y_i)$。初始情况下，$m = 4$，且运动过程中始终需要满足以下限制：\n\n- 对于 $B_i$ 和 $B_{i + 1}$ $(1 \\leq i < m)$，就是贪食蛇的前、后相邻两部分，必须满足 $B_i$ 位于 $B_{i + 1}$ 的L、R、U、D四个方向之一。\n- 对于 $B_i$ 和 $B_j$ $(1 \\leq i < j \\leq m)$，$p(B_i) = (X_i, Y_i)$，$p(B_j) = (X_j,Y_j)$，需要满足 $X_i \\neq X_j$ 或 $Y_i \\neq Y_j$ 。也就是说，贪食蛇身体的任意一部分不能相交。\n\n食物：\n\n贪食蛇的活动区域内存在一些食物。每个食物位于一个允许进入的方格上，食物不会重叠。每个食物只能被吃一次。\n\n贪食蛇的运动：\n\n如果贪食蛇的头部 $B1$ 的L、R、U、D四个方向之一的 $A_{i, j}$ 能进入，且 $A_{i, j}$ 上不存在食物，则贪食蛇可以向该方向运动，新的头部位于 $A_{i, j}$ 上。记 $p'$ 为贪食蛇新的形态，则：\n\n- $p'(B_k) = p(B_{k - 1})$，当 $2 \\leq k \\leq m$。\n- $p'(B_k) = (i, j)$，当 $k = 1$。\n\n贪食蛇的进食：\n\n如果贪食蛇的头部 $B_1$ 的L、R、U、D四个方向之一的 $A_{i, j}$ 能进入，且 $A_{i,j}$ 上存在食物，则贪食蛇可以向该方向进食，新的头部位于 $A_{i, j}$ 上，蛇的新长度 $m'=m+1$。记 $p'$ 为贪食蛇新的位置，则：\n\n- $p'(B_k) = p(B_{k-1})$，当 $2 \\leq k \\leq m'$。\n- $p'(B_k) = (i,j)$，当 $k = 1$.\n\n注意：运动或进食后的贪食蛇形态，仅仅需要考虑变换后的形态是否满足限制，不需要考虑变换的过程。也就是说，原来形态合法的贪食蛇的头部可以运动到尾部的位置，因为在变换后头部和尾部仍不会重叠。\n\n运动或进食所需要的时间：\n\n贪食蛇运动或进食，需要消耗时间。设运动或进食前头部所在的方格是P，运动或进食后头部所在的方格是 $Q$，则此次运动或进食的所消耗的时间为 $|w(P) - w(Q)| + 1$。\n\n游戏的会在开始前给出贪食蛇的初始位置和所有食物的位置。你的任务是，以最少的时间令贪食蛇吃完所有食物。", "inputFormat": "第一行，两个正整数 $R, C$。\n\n接下来 $R$ 行，每行 $C$ 个没有空格分隔的数字。其中第 $i$ 行第 $j$ 个数字为 $w(A_{i, j})$。\n\n接下来 $4$ 行，每行 $2$ 个正整数。第 $i$ 行的两个整数 $X_i, Y_i$，表示 $p(B_i) = (X_i, Y_i)$。\n\n接下来一个正整数 $N$，表示食物的数量。\n\n接下来 $N$ 行，每行 $2$ 个正整数 $i, j$，表示 $A_{i, j}$上存在一个食物。", "outputFormat": "如果贪食蛇不能吃到所有的食物，输出 `No solution.`。\n\n否则，输出：\n\n第一行，一个整数，表示所需花费的时间；\n\n第二行，一个由 L、R、U、D 组成的字符串，表示贪食蛇前进的方案。如果存在多种可能，你只需输出任意一种。", "hint": "- 对于 $20\\%$ 的数据，$N \\leq 1$；\n- 对于 $30\\%$ 的数据，$R \\times C \\leq 36$；\n- 对于 $40\\%$ 的数据，$N \\leq 2$；\n- 对于 $60\\%$ 的数据，$N \\leq 3$；\n- 对于 $100\\%$ 的数据，$N \\leq 4$，$R \\leq 12$，$C \\leq 12$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Snake", "background": "", "description": "Everyone has probably played the Snake game. Now there is a modified version. As in the traditional Snake game, the snake moves within a play area and eats food, but this modified version has some special rules.\n\nPlay area:\n\nThe snake moves in an $R$-by-$C$ grid $A$ and may not leave this grid. The cell in row $i$, column $j$ is denoted $A_{i, j}$. Each cell has an integer weight $w(A_{i, j})$. $0 \\leq w(A_{i, j}) \\leq 8$. When $w(A_{i, j}) = 0$, $A_{i, j}$ is forbidden to enter; when $w(A_{i, j}) > 0$, $A_{i, j}$ is allowed to enter.\n\nDirections:\n\nFor $P = (X_0, Y_0)$ and $Q = (X_1, Y_1)$, there are four basic directions:\n\n- Left (L): if $X_0 = X_1$ and $Y_0 = Y_1 - 1$, then $P$ is to the left of $Q$.\n- Right (R): if $X_0 = X_1$ and $Y_0 = Y_1 + 1$, then $P$ is to the right of $Q$.\n- Up (U): if $X_0 = X_1 - 1$ and $Y_0 = Y_1$, then $P$ is above $Q$.\n- Down (D): if $X_0 = X_1 + 1$ and $Y_0 = Y_1$, then $P$ is below $Q$.\n\nSnake:\n\nThe snake $B$ is a shape occupying several cells. The number of occupied cells is the snake’s length, denoted $m$. From head to tail, the snake is $B_1, B_2, \\dots, B_m$. Let $p$ be the snake’s configuration. If $B_i$ is at row $X_i$, column $Y_i$, then $p(B_i) = (X_i, Y_i)$. Initially, $m = 4$, and during movement the following constraints must always hold:\n\n- For adjacent parts $B_i$ and $B_{i+1}$ ($1 \\leq i < m$), $B_i$ must be in one of the L, R, U, D directions relative to $B_{i+1}$.\n- For any $B_i$ and $B_j$ ($1 \\leq i < j \\leq m$), with $p(B_i) = (X_i, Y_i)$ and $p(B_j) = (X_j, Y_j)$, it must hold that $X_i \\neq X_j$ or $Y_i \\neq Y_j$. In other words, no two parts of the snake’s body may overlap.\n\nFood:\n\nThere is some food in the play area. Each piece of food is on a cell that is allowed to enter, and food pieces do not overlap. Each piece of food can be eaten at most once.\n\nSnake movement:\n\nIf one of the cells $A_{i, j}$ in the L, R, U, or D direction from the head $B_1$ is enterable and there is no food on $A_{i, j}$, the snake may move in that direction, and the new head will be at $A_{i, j}$. Let $p'$ be the new configuration of the snake. Then:\n\n- $p'(B_k) = p(B_{k - 1})$ for $2 \\leq k \\leq m$.\n- $p'(B_k) = (i, j)$ for $k = 1$.\n\nSnake eating:\n\nIf one of the cells $A_{i, j}$ in the L, R, U, or D direction from the head $B_1$ is enterable and there is food on $A_{i, j}$, the snake may move there to eat. The new head will be at $A_{i, j}$, and the new length is $m' = m + 1$. Let $p'$ be the new configuration. Then:\n\n- $p'(B_k) = p(B_{k - 1})$ for $2 \\leq k \\leq m'$.\n- $p'(B_k) = (i, j)$ for $k = 1$.\n\nNote: After moving or eating, you only need to check whether the resulting configuration satisfies the constraints; you do not need to consider the intermediate process. In other words, it is allowed for a snake whose current configuration is legal to move its head into the previous position of the tail, because the head and tail still do not overlap after the transformation.\n\nTime required for movement or eating:\n\nMovement or eating consumes time. Let $P$ be the cell of the head before the action, and let $Q$ be the cell of the head after the action. Then the time cost of this action is $|w(P) - w(Q)| + 1$.\n\nBefore the game begins, the snake’s initial position and all food positions are given. Your task is to make the snake eat all the food in the least possible time.", "inputFormat": "The first line contains two positive integers $R, C$.\n\nThen follow $R$ lines, each containing $C$ digits without spaces. In the $i$-th line, the $j$-th digit is $w(A_{i, j})$.\n\nThen follow $4$ lines, each containing $2$ positive integers. In the $i$-th of these lines, the two integers $X_i, Y_i$ indicate $p(B_i) = (X_i, Y_i)$.\n\nThen a positive integer $N$ follows, denoting the number of food items.\n\nThen follow $N$ lines, each containing $2$ positive integers $i, j$, indicating that there is a piece of food on $A_{i, j}$.", "outputFormat": "If the snake cannot eat all the food, output `No solution.`.\n\nOtherwise, output:\n- The first line contains an integer, the minimum total time required.\n- The second line contains a string consisting of characters L, R, U, and D, representing a movement plan for the snake. If multiple solutions exist, output any one of them.", "hint": "- For $20\\%$ of the testdata, $N \\leq 1$.\n- For $30\\%$ of the testdata, $R \\times C \\leq 36$.\n- For $40\\%$ of the testdata, $N \\leq 2$.\n- For $60\\%$ of the testdata, $N \\leq 3$.\n- For $100\\%$ of the testdata, $N \\leq 4$, $R \\leq 12$, $C \\leq 12$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 贪食蛇", "background": "", "description": "\n相信大家都玩过贪食蛇游戏，现在有一个改版贪食蛇游戏，跟传统的贪食蛇游戏一样，贪食蛇在活动区域内运动，吃食物，但是这个改版的贪食蛇游戏有着一些特别的规则。\n\n活动区域：\n\n贪食蛇的活动区域是一个 $R$ 行 $C$ 列的网格 $A$，贪食蛇活动不能超过这个网格的范围。第 $i$ 行第 $j$ 列的方格用 $A_{i,j}$ 表示。每个方格有一个整数权值，记作 $w(A_{i,j})$。$0 \\leq w(A_{i,j}) \\leq 8$，$w(A_{i,j}) = 0$时，$A_{i,j}$ 禁止进入；$w(A_{i, j}) > 0$时，$A_{i, j}$ 允许进入。\n\n方向：\n\n对于 $P = (X_0, Y_0)$、$Q = (X_1, Y_1)$，有以下四种基本方向：\n\n- 正左(L)：$X_0 = X_1$ 且 $Y_0 = Y_1 - 1$，则称 $P$ 位于 $Q$ 的正左方向。\n- 正右(R)：$X_0 = X_1$ 且 $Y_0 = Y_1 + 1$，则称 $P$ 位于 $Q$ 的正右方向。\n- 正上(U)：$X_0 = X_1 - 1$ 且 $Y_0 = Y_1$，则称 $P$ 位于 $Q$ 的正上方向。\n- 正下(D)：$X_0 = X_1 + 1$ 且 $Y_0 = Y_1$，则称 $P$ 位于 $Q$ 的正下方向。\n\n贪食蛇：\n\n贪食蛇 $B$ 是占据若干方格的图形，占据的方格数为贪食蛇的长度，记为 $m$，则贪食蛇从头到尾，用 $B_1, B_2, \\dots, B_m$表示。记 $p$ 为贪食蛇的形态，若 $B_i$ 位于第 $X_i$ 行第 $Y_i$ 列，则 $p(B_i)=(X_i, Y_i)$。初始情况下，$m = 4$，且运动过程中始终需要满足以下限制：\n\n- 对于 $B_i$ 和 $B_{i + 1}$ $(1 \\leq i < m)$，就是贪食蛇的前、后相邻两部分，必须满足 $B_i$ 位于 $B_{i + 1}$ 的L、R、U、D四个方向之一。\n- 对于 $B_i$ 和 $B_j$ $(1 \\leq i < j \\leq m)$，$p(B_i) = (X_i, Y_i)$，$p(B_j) = (X_j,Y_j)$，需要满足 $X_i \\neq X_j$ 或 $Y_i \\neq Y_j$ 。也就是说，贪食蛇身体的任意一部分不能相交。\n\n食物：\n\n贪食蛇的活动区域内存在一些食物。每个食物位于一个允许进入的方格上，食物不会重叠。每个食物只能被吃一次。\n\n贪食蛇的运动：\n\n如果贪食蛇的头部 $B1$ 的L、R、U、D四个方向之一的 $A_{i, j}$ 能进入，且 $A_{i, j}$ 上不存在食物，则贪食蛇可以向该方向运动，新的头部位于 $A_{i, j}$ 上。记 $p'$ 为贪食蛇新的形态，则：\n\n- $p'(B_k) = p(B_{k - 1})$，当 $2 \\leq k \\leq m$。\n- $p'(B_k) = (i, j)$，当 $k = 1$。\n\n贪食蛇的进食：\n\n如果贪食蛇的头部 $B_1$ 的L、R、U、D四个方向之一的 $A_{i, j}$ 能进入，且 $A_{i,j}$ 上存在食物，则贪食蛇可以向该方向进食，新的头部位于 $A_{i, j}$ 上，蛇的新长度 $m'=m+1$。记 $p'$ 为贪食蛇新的位置，则：\n\n- $p'(B_k) = p(B_{k-1})$，当 $2 \\leq k \\leq m'$。\n- $p'(B_k) = (i,j)$，当 $k = 1$.\n\n注意：运动或进食后的贪食蛇形态，仅仅需要考虑变换后的形态是否满足限制，不需要考虑变换的过程。也就是说，原来形态合法的贪食蛇的头部可以运动到尾部的位置，因为在变换后头部和尾部仍不会重叠。\n\n运动或进食所需要的时间：\n\n贪食蛇运动或进食，需要消耗时间。设运动或进食前头部所在的方格是P，运动或进食后头部所在的方格是 $Q$，则此次运动或进食的所消耗的时间为 $|w(P) - w(Q)| + 1$。\n\n游戏的会在开始前给出贪食蛇的初始位置和所有食物的位置。你的任务是，以最少的时间令贪食蛇吃完所有食物。", "inputFormat": "第一行，两个正整数 $R, C$。\n\n接下来 $R$ 行，每行 $C$ 个没有空格分隔的数字。其中第 $i$ 行第 $j$ 个数字为 $w(A_{i, j})$。\n\n接下来 $4$ 行，每行 $2$ 个正整数。第 $i$ 行的两个整数 $X_i, Y_i$，表示 $p(B_i) = (X_i, Y_i)$。\n\n接下来一个正整数 $N$，表示食物的数量。\n\n接下来 $N$ 行，每行 $2$ 个正整数 $i, j$，表示 $A_{i, j}$上存在一个食物。", "outputFormat": "如果贪食蛇不能吃到所有的食物，输出 `No solution.`。\n\n否则，输出：\n\n第一行，一个整数，表示所需花费的时间；\n\n第二行，一个由 L、R、U、D 组成的字符串，表示贪食蛇前进的方案。如果存在多种可能，你只需输出任意一种。", "hint": "- 对于 $20\\%$ 的数据，$N \\leq 1$；\n- 对于 $30\\%$ 的数据，$R \\times C \\leq 36$；\n- 对于 $40\\%$ 的数据，$N \\leq 2$；\n- 对于 $60\\%$ 的数据，$N \\leq 3$；\n- 对于 $100\\%$ 的数据，$N \\leq 4$，$R \\leq 12$，$C \\leq 12$。", "locale": "zh-CN"}}}
{"pid": "P2494", "type": "P", "difficulty": 7, "samples": [["5 5\r\n5 1 10 1\r\n5 1 10 1\r\n5 2 9 1\r\n5 3 7 1\r\n5 4 8 1\r\n4 4\r\n1 2\r\n1 4\r\n3 2\r\n3 4", "17.0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "网络流", "山东", "分数规划"], "title": "[SDOI2011] 保密", "background": "", "description": "现在，保密成为一个很重要也很困难的问题。如果没有做好，后果是严重的。比如，有个人没有自己去修电脑，又没有拆硬盘，后来的事大家都知道了。\n\n当然，对保密最需求的当然是军方，其次才是像那个人。为了应付现在天上飞来飞去的卫星，军事基地一般都会建造在地下。\n\n某 K 国的军事基地是这样子的：地面上两排大天井共 $n_1$ 个作为出入口，内部是许多除可以共享出入口外互不连通的空腔，每个空腔有且只有两个出入口，并且这两个出入口不会在同一排。为了方便起见，两排出入口分别编号为 $1, 3, 5, \\dots$ 和 $2, 4, 6, \\dots$ 并且最大的编号为 $n_1$。\n\n虽然上面扯了那么多关于保密的东西，但是其实解密也是一件很纠结的事情。但其实最简单直接暴力无脑的解密方法就是找个人去看看…\n\n我们有很牛 X 的特种部队，只需要派出一支特种部队到 K 国基地的某个出入口，那么和这个出入口直接相连的所有空腔都可以被探索，但也只有这些空腔可以被这支部队探索。现在有足够多的特种部队可以供你调遣，你必须使用他们调查完所有的 K 国基地内的空腔。\n\n当然，你的基地离 K 国基地不会太近，周边的地图将会给你，表示为 $n$ 个检查点和 $m$ 条连接这些点的道路，其中点 $1$ 到点 $n_1$ 就是 K 国基地的出入口，点 $n$ 是你的部队的出发点。对每条道路，有不同的通行时间 $t$ 和安全系数 $s$ 。因为情报部门只对单向的道路安全系数进行了评估，所以这些道路只允许单向通行，并且不会存在环。\n\n一支特种部队从你的基地出发，通过某条路径，到达某个 K 国基地出入口，此时这支部队的危险性表示为总时间和这条路径经过的所有道路的安全系数和的比值。整个行动的危险性表示为你派出的所有部队的危险性之和。你需要使这个值最小的情况下探索整个 K 国基地。\n\n快点完成这个任务，在 K 国的叫兽宣布你是 K 国人之前。", "inputFormat": "第一行 2 个正整数 $n, m$ 表示整个地区地图上的检查点和道路数。\n\n下面 $m$ 行，每行 4 个正整数 $a, b, t, s$ 表示一条从 $a$ 到 $b$ 的道路需时为 $t$，安全系数为 $s$。\n\n接下来 1 行 2 个正整数 $m_1$ 和 $n_1$, $m_1$ 表示 K 国基地空腔的个数，$n_1$ 表示 K 国基地出入口的个数。\n\n再接下来 $m_1$ 行，每行 2 个正整数 $u, v$，表示每个空腔的 $2$ 个出入口。", "outputFormat": "一行，最小的危险性，保留一位小数。或者输出 `-1` 表示此任务不可能完成。", "hint": "- 对 $30\\%$ 的数据，$n \\leq 30$；\n- 对 $60\\%$ 的数据，$n \\leq 300$；\n- 另外 $40\\%$ 的数据 $n_1 \\leq 20$。\n- 对于 $100\\%$ 的数据，$4 \\leq n \\leq 700$，$m \\leq 100000$，$a, b \\leq n$，$1 \\leq t, s \\leq 10$，$m_1 \\leq 40000$，$n_1 < \\min(n, 161)$，$u, v \\leq n_1$，$u$ 是奇数，$v$ 是偶数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2011] Secrecy", "background": "", "description": "Nowadays, secrecy has become very important and also very difficult. If it is not done well, the consequences can be serious. For example, someone did not repair their computer themselves and did not remove the hard drive—what happened afterward is known to everyone.\n\nOf course, the military needs secrecy the most, more than ordinary people. To cope with satellites flying around in the sky, military bases are usually built underground.\n\nA certain base in country K is structured as follows: on the ground, there are two rows of large shafts serving as entrances and exits, with a total of $n_1$. Inside, there are many cavities that are mutually disconnected except that they can share entrances. Each cavity has exactly two entrances, and these two entrances are not in the same row. For convenience, the entrances in the two rows are numbered $1, 3, 5, \\dots$ and $2, 4, 6, \\dots$, and the largest index is $n_1$.\n\nAlthough we have talked so much about secrecy, decryption is also a tangled matter. In fact, the simplest brute-force decryption method is to send someone to have a look...\n\nWe have elite special forces. If you deploy one unit to some entrance of the base in country K, then all cavities directly connected to that entrance can be explored by that unit, and only those cavities can be explored by that unit. Now you have enough units at your disposal, and you must use them to explore all cavities inside the base in country K.\n\nYour base is not too close to the base in country K. You are given a map of the surrounding area, represented by $n$ checkpoints and $m$ roads connecting these points. Points $1$ through $n_1$ are the entrances to the base in country K, and point $n$ is the starting point of your units. For each road, there is a travel time $t$ and a safety factor $s$. Because the intelligence department assessed safety only for one-way roads, these roads are one-way only, and there are no cycles.\n\nA unit departs from your base, follows some path, and reaches an entrance of the base in country K. The risk of this unit is defined as the ratio of the total time to the sum of the safety factors of all roads along that path. The overall operation risk is the sum of the risks of all the units you dispatch. You need to explore the entire base in country K while minimizing this value.\n\nHurry up and finish this task before a certain professor in country K declares that you are from country K.", "inputFormat": "The first line contains two positive integers $n, m$, the number of checkpoints and roads on the map.\n\nEach of the next $m$ lines contains four positive integers $a, b, t, s$, indicating a one-way road from $a$ to $b$ with travel time $t$ and safety factor $s$.\n\nThe next line contains two positive integers $m_1$ and $n_1$, where $m_1$ is the number of cavities in the base in country K, and $n_1$ is the number of entrances.\n\nEach of the next $m_1$ lines contains two positive integers $u, v$, indicating the two entrances of each cavity.", "outputFormat": "Output one line with the minimum total risk, to one decimal place. Output -1 if the task is impossible.", "hint": "- For 30% of the testdata, $n \\leq 30$.\n- For 60% of the testdata, $n \\leq 300$.\n- For an additional 40% of the testdata, $n_1 \\leq 20$.\n- For 100% of the testdata: $4 \\leq n \\leq 700$, $m \\leq 100000$, $a, b \\leq n$, $1 \\leq t, s \\leq 10$, $m_1 \\leq 40000$, $n_1 < \\min(n, 161)$, $u, v \\leq n_1$, $u$ is odd, and $v$ is even.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2011] 保密", "background": "", "description": "现在，保密成为一个很重要也很困难的问题。如果没有做好，后果是严重的。比如，有个人没有自己去修电脑，又没有拆硬盘，后来的事大家都知道了。\n\n当然，对保密最需求的当然是军方，其次才是像那个人。为了应付现在天上飞来飞去的卫星，军事基地一般都会建造在地下。\n\n某 K 国的军事基地是这样子的：地面上两排大天井共 $n_1$ 个作为出入口，内部是许多除可以共享出入口外互不连通的空腔，每个空腔有且只有两个出入口，并且这两个出入口不会在同一排。为了方便起见，两排出入口分别编号为 $1, 3, 5, \\dots$ 和 $2, 4, 6, \\dots$ 并且最大的编号为 $n_1$。\n\n虽然上面扯了那么多关于保密的东西，但是其实解密也是一件很纠结的事情。但其实最简单直接暴力无脑的解密方法就是找个人去看看…\n\n我们有很牛 X 的特种部队，只需要派出一支特种部队到 K 国基地的某个出入口，那么和这个出入口直接相连的所有空腔都可以被探索，但也只有这些空腔可以被这支部队探索。现在有足够多的特种部队可以供你调遣，你必须使用他们调查完所有的 K 国基地内的空腔。\n\n当然，你的基地离 K 国基地不会太近，周边的地图将会给你，表示为 $n$ 个检查点和 $m$ 条连接这些点的道路，其中点 $1$ 到点 $n_1$ 就是 K 国基地的出入口，点 $n$ 是你的部队的出发点。对每条道路，有不同的通行时间 $t$ 和安全系数 $s$ 。因为情报部门只对单向的道路安全系数进行了评估，所以这些道路只允许单向通行，并且不会存在环。\n\n一支特种部队从你的基地出发，通过某条路径，到达某个 K 国基地出入口，此时这支部队的危险性表示为总时间和这条路径经过的所有道路的安全系数和的比值。整个行动的危险性表示为你派出的所有部队的危险性之和。你需要使这个值最小的情况下探索整个 K 国基地。\n\n快点完成这个任务，在 K 国的叫兽宣布你是 K 国人之前。", "inputFormat": "第一行 2 个正整数 $n, m$ 表示整个地区地图上的检查点和道路数。\n\n下面 $m$ 行，每行 4 个正整数 $a, b, t, s$ 表示一条从 $a$ 到 $b$ 的道路需时为 $t$，安全系数为 $s$。\n\n接下来 1 行 2 个正整数 $m_1$ 和 $n_1$, $m_1$ 表示 K 国基地空腔的个数，$n_1$ 表示 K 国基地出入口的个数。\n\n再接下来 $m_1$ 行，每行 2 个正整数 $u, v$，表示每个空腔的 $2$ 个出入口。", "outputFormat": "一行，最小的危险性，保留一位小数。或者输出 `-1` 表示此任务不可能完成。", "hint": "- 对 $30\\%$ 的数据，$n \\leq 30$；\n- 对 $60\\%$ 的数据，$n \\leq 300$；\n- 另外 $40\\%$ 的数据 $n_1 \\leq 20$。\n- 对于 $100\\%$ 的数据，$4 \\leq n \\leq 700$，$m \\leq 100000$，$a, b \\leq n$，$1 \\leq t, s \\leq 10$，$m_1 \\leq 40000$，$n_1 < \\min(n, 161)$，$u, v \\leq n_1$，$u$ 是奇数，$v$ 是偶数。", "locale": "zh-CN"}}}
{"pid": "P2495", "type": "P", "difficulty": 6, "samples": [["10\n1 5 13\n1 9 6\n2 1 19\n2 4 8\n2 3 91\n5 6 8\n7 5 4\n7 8 31\n10 7 9\n3\n2 10 6\n4 5 7 8 3\n3 9 4 6\n", "12\n32\n22\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [517120, 517120, 517120, 517120, 517120, 517120, 517120, 517120, 517120, 517120]}, "tags": ["2011", "各省省选", "山东", "最近公共祖先 LCA", "虚树", "栈", "动态 DP", "模板题"], "title": "【模板】虚树 / [SDOI2011] 消耗战", "background": "", "description": "在一场战争中，战场由 $n$ 个岛屿和 $n-1$ 个桥梁组成，保证每两个岛屿间有且仅有一条路径可达。现在，我军已经侦查到敌军的总部在编号为 $1$ 的岛屿，而且他们已经没有足够多的能源维系战斗，我军胜利在望。已知在其他 $k$ 个岛屿上有丰富能源，为了防止敌军获取能源，我军的任务是炸毁一些桥梁，使得敌军不能到达任何能源丰富的岛屿。由于不同桥梁的材质和结构不同，所以炸毁不同的桥梁有不同的代价，我军希望在满足目标的同时使得总代价最小。  \n\n侦查部门还发现，敌军有一台神秘机器。即使我军切断所有能源之后，他们也可以用那台机器。机器产生的效果不仅仅会修复所有我军炸毁的桥梁，而且会重新随机资源分布（但可以保证的是，资源不会分布到 $1$ 号岛屿上）。不过侦查部门还发现了这台机器只能够使用 $m$ 次，所以我们只需要把每次任务完成即可。", "inputFormat": "第一行一个整数 $n$，表示岛屿数量。  \n\n接下来 $n-1$ 行，每行三个整数 $u,v,w$ ，表示 $u$ 号岛屿和 $v$ 号岛屿由一条代价为 $w$ 的桥梁直接相连。  \n\n第 $n+1$ 行，一个整数 $m$ ，代表敌方机器能使用的次数。  \n\n接下来 $m$ 行，第 $i$ 行一个整数 $k_i$ ，代表第 $i$ 次后，有 $k_i$ 个岛屿资源丰富。接下来 $k_i$ 个整数 $h_1,h_2,..., h_{k_i}$ ，表示资源丰富岛屿的编号。", "outputFormat": "输出共 $m$ 行，表示每次任务的最小代价。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$n\\leq 10, m\\leq 5$ 。  \n- 对于 $20\\%$ 的数据，$n\\leq 100, m\\leq 100, 1\\leq k_i\\leq 10$ 。  \n- 对于 $40\\%$ 的数据，$n\\leq 1000, 1\\leq k_i\\leq 15$ 。  \n- 对于 $100\\%$ 的数据，$2\\leq n \\leq 2.5\\times 10^5, 1\\leq m\\leq 5\\times 10^5, \\sum k_i \\leq 5\\times 10^5, 1\\leq k_i< n, h_i\\neq 1, 1\\leq u,v\\leq n, 1\\leq w\\leq 10^5$ 。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Virtual Tree / [SDOI2011] War of Attrition", "background": "", "description": "In a war, the battlefield consists of $n$ islands connected by $n-1$ bridges, and there is exactly one simple path between any two islands. Our intelligence has located the enemy headquarters on island $1$. The enemy lacks sufficient energy to sustain combat, and victory is in sight. It is known that there are rich energy reserves on another $k$ islands. To prevent the enemy from obtaining energy, our task is to blow up some bridges so that the enemy cannot reach any energy-rich island from island $1$. Since different bridges have different materials and structures, the cost to destroy each bridge varies. We want to minimize the total cost while achieving the objective.\n\nIntelligence also found that the enemy has a mysterious machine. Even after we cut off all energy, they can use that machine. The machine will not only repair all bridges we blew up, but also randomly redistribute the energy (with the guarantee that no energy will be placed on island $1$). However, the machine can be used only $m$ times, so we only need to complete the task for each use.", "inputFormat": "The first line contains an integer $n$, the number of islands.\n\nThe next $n-1$ lines each contain three integers $u, v, w$, indicating that islands $u$ and $v$ are directly connected by a bridge with destruction cost $w$.\n\nThe $(n+1)$-th line contains an integer $m$, the number of times the enemy can use the machine.\n\nThen follow $m$ lines. On the $i$-th line, there is an integer $k_i$, meaning that after the $i$-th reset there are $k_i$ energy-rich islands, followed by $k_i$ integers $h_1, h_2, \\ldots, h_{k_i}$, which are the indices of the energy-rich islands.", "outputFormat": "Output $m$ lines. For each use of the machine, output the minimum total cost required to prevent the enemy from reaching any energy-rich island from island $1$.", "hint": "#### Constraints\n\n- For $10\\%$ of the testdata, $n \\leq 10$, $m \\leq 5$.\n- For $20\\%$ of the testdata, $n \\leq 100$, $m \\leq 100$, $1 \\leq k_i \\leq 10$.\n- For $40\\%$ of the testdata, $n \\leq 1000$, $1 \\leq k_i \\leq 15$.\n- For $100\\%$ of the testdata, $2 \\leq n \\leq 2.5\\times 10^5$, $1 \\leq m \\leq 5\\times 10^5$, $\\sum k_i \\leq 5\\times 10^5$, $1 \\leq k_i < n$, $h_i \\neq 1$, $1 \\leq u, v \\leq n$, $1 \\leq w \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】虚树 / [SDOI2011] 消耗战", "background": "", "description": "在一场战争中，战场由 $n$ 个岛屿和 $n-1$ 个桥梁组成，保证每两个岛屿间有且仅有一条路径可达。现在，我军已经侦查到敌军的总部在编号为 $1$ 的岛屿，而且他们已经没有足够多的能源维系战斗，我军胜利在望。已知在其他 $k$ 个岛屿上有丰富能源，为了防止敌军获取能源，我军的任务是炸毁一些桥梁，使得敌军不能到达任何能源丰富的岛屿。由于不同桥梁的材质和结构不同，所以炸毁不同的桥梁有不同的代价，我军希望在满足目标的同时使得总代价最小。  \n\n侦查部门还发现，敌军有一台神秘机器。即使我军切断所有能源之后，他们也可以用那台机器。机器产生的效果不仅仅会修复所有我军炸毁的桥梁，而且会重新随机资源分布（但可以保证的是，资源不会分布到 $1$ 号岛屿上）。不过侦查部门还发现了这台机器只能够使用 $m$ 次，所以我们只需要把每次任务完成即可。", "inputFormat": "第一行一个整数 $n$，表示岛屿数量。  \n\n接下来 $n-1$ 行，每行三个整数 $u,v,w$ ，表示 $u$ 号岛屿和 $v$ 号岛屿由一条代价为 $w$ 的桥梁直接相连。  \n\n第 $n+1$ 行，一个整数 $m$ ，代表敌方机器能使用的次数。  \n\n接下来 $m$ 行，第 $i$ 行一个整数 $k_i$ ，代表第 $i$ 次后，有 $k_i$ 个岛屿资源丰富。接下来 $k_i$ 个整数 $h_1,h_2,..., h_{k_i}$ ，表示资源丰富岛屿的编号。", "outputFormat": "输出共 $m$ 行，表示每次任务的最小代价。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$n\\leq 10, m\\leq 5$ 。  \n- 对于 $20\\%$ 的数据，$n\\leq 100, m\\leq 100, 1\\leq k_i\\leq 10$ 。  \n- 对于 $40\\%$ 的数据，$n\\leq 1000, 1\\leq k_i\\leq 15$ 。  \n- 对于 $100\\%$ 的数据，$2\\leq n \\leq 2.5\\times 10^5, 1\\leq m\\leq 5\\times 10^5, \\sum k_i \\leq 5\\times 10^5, 1\\leq k_i< n, h_i\\neq 1, 1\\leq u,v\\leq n, 1\\leq w\\leq 10^5$ 。", "locale": "zh-CN"}}}
{"pid": "P2496", "type": "P", "difficulty": 6, "samples": [["6 7\n109 827 100 530 10 826\n3 1 6 1\n2 2 6\n1 2 4\n1 2 3\n2 2 6\n1 2 6\n1 2 5", "722\n722\n722\n719"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "各省省选", "山东"], "title": "[SDOI2012] 体育课", "background": "", "description": "又是一节体育课的时间了，有 $n$ 个同学排成了一排。他们都很讨厌排在第一个位置的同学，于是后面的同学中比第一个高的都会产生一个高兴值，这个高兴值等于他的身高减去第一个同学的身高。当然比第一个同学矮的同学产生高兴值为 $0$。\n\n现在体育老师来了，他拥有神奇的魔法，现在他能做如下的三件事：\n\n1. 询问某段区间高兴值最大的那个是多少。\n\n2. 把某两个同学交换一下位置。\n\n3. 选取一段区间的人，把第一个人身高加上 $t$，第二个加上 $2t$，第三个加上 $3t$ 以此类推。\n\n但是体育老师不会数数，于是他找到你了，对于每一个询问，他要你帮他求出那个值。\n", "inputFormat": "第一行两个整数 $n,m$，表示有 $n$ 个人，有 $m$ 个操作。\n\n第二行 $n$ 个整数，顺序输入每个人的身高 $a_i$。\n\n接下来 $m$ 行，每行第一个数位一个 $type$ 表示是做哪一件事情。\n\n- 如果 $type=1$，那么接下来有两个整数 $l,r$，表示询问这段区间的最大的高兴值。\n- 如果 $type=2$，接下来两个整数 $a,b$，表示交换这两个位置的人。\n- 如果 $type=3$，接下来三个整数 $l,r,t$，表示把 $l$ 个人的升高增加 $t$,$l+1$ 个人增加 $2t$ ...第 $r$ 个人增加 $(r-l+1)t$。\n", "outputFormat": "对于每个询问按照顺序输出每个操作 $1$ 的答案。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $1 \\le n,m \\le 5 \\times 10^3$。\n- 另有 $10\\%$ 的数据，没有第三种操作。\n- 另有 $20\\%$ 的数据，没有第二种操作。\n- 对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^5$，$0 \\le t \\le 10^4$，$1 \\leq a_i \\leq 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Physical Education Class", "background": "", "description": "It is time for another PE class. There are $n$ students standing in a row. They all dislike the student at the first position. For any student behind the first one, if they are taller than the first student, they gain a happiness value equal to their height minus the height of the first student. If a student is shorter than the first student, their happiness value is $0$.\n\nNow the PE teacher comes with magical powers and can perform the following three operations:\n\n1. Query the maximum happiness value within a given interval.\n2. Swap two students.\n3. Select an interval and add $t$ to the first person in the interval, $2t$ to the second, $3t$ to the third, and so on.\n\nHowever, the teacher cannot count well, so he asks you to answer each query.\n\nFor clarity, for an interval $[l, r]$, define the happiness of position $i$ ($l \\le i \\le r$) as $\\max(0, a_i - a_l)$. Operation $1$ asks for the maximum of these values over $i \\in [l, r]$.", "inputFormat": "The first line contains two integers $n, m$, the number of students and the number of operations.\n\nThe second line contains $n$ integers, the heights $a_i$ of the students in order.\n\nEach of the following $m$ lines starts with an integer $type$ indicating the operation:\n\n- If $type = 1$, then two integers $l, r$ follow, asking for the maximum happiness value in interval $[l, r]$ as defined above.\n- If $type = 2$, then two integers $a, b$ follow, indicating to swap the students at positions $a$ and $b$.\n- If $type = 3$, then three integers $l, r, t$ follow, indicating that for every $i$ with $l \\le i \\le r$, add $(i - l + 1) \\times t$ to $a_i$.", "outputFormat": "For each query, output the answer to every operation $1$ in order.", "hint": "Constraints\n\n- For $20\\%$ of the testdata, $1 \\le n, m \\le 5 \\times 10^3$.\n- Additionally, in $10\\%$ of the testdata, there is no operation $3$.\n- Additionally, in $20\\%$ of the testdata, there is no operation $2$.\n- For $100\\%$ of the testdata, $1 \\le n, m \\le 10^5$, $0 \\le t \\le 10^4$, $1 \\le a_i \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 体育课", "background": "", "description": "又是一节体育课的时间了，有 $n$ 个同学排成了一排。他们都很讨厌排在第一个位置的同学，于是后面的同学中比第一个高的都会产生一个高兴值，这个高兴值等于他的身高减去第一个同学的身高。当然比第一个同学矮的同学产生高兴值为 $0$。\n\n现在体育老师来了，他拥有神奇的魔法，现在他能做如下的三件事：\n\n1. 询问某段区间高兴值最大的那个是多少。\n\n2. 把某两个同学交换一下位置。\n\n3. 选取一段区间的人，把第一个人身高加上 $t$，第二个加上 $2t$，第三个加上 $3t$ 以此类推。\n\n但是体育老师不会数数，于是他找到你了，对于每一个询问，他要你帮他求出那个值。\n", "inputFormat": "第一行两个整数 $n,m$，表示有 $n$ 个人，有 $m$ 个操作。\n\n第二行 $n$ 个整数，顺序输入每个人的身高 $a_i$。\n\n接下来 $m$ 行，每行第一个数位一个 $type$ 表示是做哪一件事情。\n\n- 如果 $type=1$，那么接下来有两个整数 $l,r$，表示询问这段区间的最大的高兴值。\n- 如果 $type=2$，接下来两个整数 $a,b$，表示交换这两个位置的人。\n- 如果 $type=3$，接下来三个整数 $l,r,t$，表示把 $l$ 个人的升高增加 $t$,$l+1$ 个人增加 $2t$ ...第 $r$ 个人增加 $(r-l+1)t$。\n", "outputFormat": "对于每个询问按照顺序输出每个操作 $1$ 的答案。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $1 \\le n,m \\le 5 \\times 10^3$。\n- 另有 $10\\%$ 的数据，没有第三种操作。\n- 另有 $20\\%$ 的数据，没有第二种操作。\n- 对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^5$，$0 \\le t \\le 10^4$，$1 \\leq a_i \\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P2497", "type": "P", "difficulty": 6, "samples": [["10 33\n5 4 660\n10 2 2040\n11 6 3207\n14 5 2006\n18 3 6130\n19 9 3363\n22 1 1265\n25 8 2836\n27 10 7961\n29 7 9075", "3501.000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2012", "线段树", "各省省选", "平衡树", "山东", "cdq 分治", "斜率优化"], "title": "[SDOI2012] 基站建设", "background": null, "description": "up 主家终于买电脑了，但是接下来有各种问题要处理。首要解决的问题就是网络问题。他要从移动公司开始，通过一些基站来传递网络到他家。\n\n为了简化问题，我们假设移动公司，所有的基站、up 主家位于同一条直线上，他们都位于这一条直线上的某一点 $x$，这些点**可能**会重合。每个基站发射和接收的范围都是一个切于地面的圆，发射的半径 $r$ 是固定的，接收半径 $r'$ 是可调的的。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nh8yxjx5.png)\n\n一个基站 $i$ 如果想从另一个基站 $j$ 接收到信号（当且仅当 $x_j<x_i$），必须满足 $i$ 的接收范围与 $j$ 的发射范围**相切**，且需要付 $\\sqrt{r'_i}$ 的额外费用。启动每一个点 $i$ 都需要费用 $v_i$。\n\nup 主家如果能接收到某个基站的信号，只需要这个点的发射范围与 up 主家所在的竖线相切或相交即可，如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5t4v8687.png)\n\n当然费用越少就越好咯，于是 up 主想要请你帮他的忙。", "inputFormat": "第一行两个整数 $n, m$。表示基站个数（包括移动公司），up 主家的坐标。（保证大于等于所有基站的坐标）\n\n记下来 $n$ 行，每行三个整数 $x_i$，$r_i$，$v_i$，表示每个基站的坐标，发射范围以及费用。\n\n$x_i$ 是按照坐标从小到大输入的，移动公司位于最小的那个坐标。\n\n$r$ 为 $1\\dots n$ 的排列。", "outputFormat": "一个实数，保留小数点后三位。", "hint": "对于 $100\\%$ 的数据 $n\\le5\\times 10^5$，$x_i,m \\le 10^{12}$，$v_i \\le 10000$", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Base Station Construction", "background": "", "description": "The uploader (UP 主) finally bought a computer, but now there are various issues to deal with. The first problem to solve is the network. He wants to start from the mobile company and relay the network to his home through some base stations.\n\nTo simplify the problem, we assume the mobile company, all base stations, and the UP's home lie on the same straight line, each located at some point $x$ on this line. These points may coincide. Each base station’s transmit and receive ranges are circles tangent to the ground. The transmit radius $r$ is fixed, while the receive radius $r'$ is adjustable. See the figure:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nh8yxjx5.png)\n\nIf base station $i$ wants to receive a signal from another base station $j$ (if and only if $x_j < x_i$), it must satisfy that $i$’s receive range is tangent to $j$’s transmit range, and an extra cost of $\\sqrt{r'_i}$ must be paid. Activating each point $i$ costs $v_i$.\n\nFor the UP’s home to receive a signal from some base station, it suffices that this station’s transmit range is tangent to or intersects the vertical line passing through the UP’s home, as shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5t4v8687.png)\n\nOf course, the smaller the total cost, the better, so the UP wants your help.", "inputFormat": "The first line contains two integers $n, m$: the number of base stations (including the mobile company), and the coordinate of the UP’s home. It is guaranteed that $m$ is greater than or equal to the coordinates of all base stations.\n\nThe next $n$ lines each contain three integers $x_i$, $r_i$, $v_i$, representing the coordinate, transmit radius, and activation cost of each base station.\n\nThe $x_i$ are given in increasing order of coordinates, and the mobile company is at the smallest coordinate.\n\nThe sequence $\\{r_i\\}$ is a permutation of $1 \\dots n$.", "outputFormat": "Output a real number with exactly three digits after the decimal point.", "hint": "For $100\\%$ of the testdata, $n \\le 5 \\times 10^5$, $x_i, m \\le 10^{12}$, $v_i \\le 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 基站建设", "background": null, "description": "up 主家终于买电脑了，但是接下来有各种问题要处理。首要解决的问题就是网络问题。他要从移动公司开始，通过一些基站来传递网络到他家。\n\n为了简化问题，我们假设移动公司，所有的基站、up 主家位于同一条直线上，他们都位于这一条直线上的某一点 $x$，这些点**可能**会重合。每个基站发射和接收的范围都是一个切于地面的圆，发射的半径 $r$ 是固定的，接收半径 $r'$ 是可调的的。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nh8yxjx5.png)\n\n一个基站 $i$ 如果想从另一个基站 $j$ 接收到信号（当且仅当 $x_j<x_i$），必须满足 $i$ 的接收范围与 $j$ 的发射范围**相切**，且需要付 $\\sqrt{r'_i}$ 的额外费用。启动每一个点 $i$ 都需要费用 $v_i$。\n\nup 主家如果能接收到某个基站的信号，只需要这个点的发射范围与 up 主家所在的竖线相切或相交即可，如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5t4v8687.png)\n\n当然费用越少就越好咯，于是 up 主想要请你帮他的忙。", "inputFormat": "第一行两个整数 $n, m$。表示基站个数（包括移动公司），up 主家的坐标。（保证大于等于所有基站的坐标）\n\n记下来 $n$ 行，每行三个整数 $x_i$，$r_i$，$v_i$，表示每个基站的坐标，发射范围以及费用。\n\n$x_i$ 是按照坐标从小到大输入的，移动公司位于最小的那个坐标。\n\n$r$ 为 $1\\dots n$ 的排列。", "outputFormat": "一个实数，保留小数点后三位。", "hint": "对于 $100\\%$ 的数据 $n\\le5\\times 10^5$，$x_i,m \\le 10^{12}$，$v_i \\le 10000$", "locale": "zh-CN"}}}
{"pid": "P2498", "type": "P", "difficulty": 4, "samples": [["1 3 3\r\n2 2", "1.00"], ["1 3 3\r\n3 1", "2.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "二分", "并查集", "各省省选", "山东"], "title": "[SDOI2012] 拯救小云公主", "background": null, "description": "英雄又即将踏上拯救公主的道路……\n\n这次的拯救目标是 —— 爱和正义的小云公主。\n\n英雄来到 boss 的洞穴门口，他一下子就懵了，因为面前不只是一只 boss，而是上千只 boss。当英雄意识到自己还是等级 $1$ 的时候，他明白这就是一个不可能完成的任务。\n\n但他不死心，他在想，能不能避开 boss 去拯救公主呢，嘻嘻。\n\nboss 的洞穴可以看成一个矩形，英雄在左下角 $(1,1)$，公主在右上角 $(row,line)$。英雄为了避开 boss，当然是离 boss 距离越远越好了，所以英雄决定找一条路径使到距离 boss 的最短距离最远。\n\nPs: 英雄走的方向是任意的，但是不能走出矩形的范围。即英雄可以到达矩形范围内的任意一个点（没有必要是整点）\n\n你可以帮帮他吗？\n\n当英雄找到了美丽漂亮的小云公主，立刻就被 boss 包围了！！！英雄缓闭双眼，举手轻挥，白光一闪后使用了回城卷轴，回到了城堡，但只有小云公主回去了……因为英雄忘了进入回城的法阵了。", "inputFormat": "第一行，输入三个整数，$n$ 表示 boss 的数目，$row$、$line$ 表示矩形的大小；\n\n接下来 $n$ 行，每行分别两个整数，表示 boss 的位置坐标。", "outputFormat": "输出一个小数，表示英雄的路径离 boss 的最远距离，精确到小数点后两位。", "hint": "### 数据范围\n\n对于 $20\\%$ 数据，boss 坐标范围小于等于 $50$；\n\n对于 $60\\%$ 数据，$n \\leq 1500$；\n\n对于 $100\\%$ 数据，$n \\leq 3000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Save Princess Xiaoyun", "background": "", "description": "The hero is about to set out to save a princess again.\n\nThis time, the target to save is Princess Xiaoyun, who stands for love and justice.\n\nWhen the hero arrives at the entrance of the boss’s cave, he is stunned: there is not just one boss, but thousands. Upon realizing he is still level $1$, he understands this is an impossible task.\n\nBut he does not give up. He wonders whether he can avoid the bosses and still save the princess.\n\nThe boss’s cave can be viewed as a rectangle. The hero starts at the bottom-left corner $(1, 1)$, and the princess is at the top-right corner $(row, line)$. To avoid the bosses, the farther he stays from them, the better. Therefore, the hero decides to find a path that maximizes the minimal distance to any boss along the path.\n\nNote: The hero can move in any direction but cannot leave the rectangle. That is, he can reach any point within the rectangle (not necessarily integer coordinates).\n\nCan you help him?\n\nWhen the hero finds the beautiful Princess Xiaoyun, he is immediately surrounded by bosses! He gently closes his eyes, waves his hand, and with a flash of white light, uses a town portal scroll to return to the castle, but only Princess Xiaoyun goes back, because the hero forgot to step into the teleportation array.", "inputFormat": "The first line contains three integers: $n$ for the number of bosses, and $row$, $line$ for the size of the rectangle.\n\nThe next $n$ lines each contain two integers, the coordinates of a boss.", "outputFormat": "Output a real number: the maximal possible minimal distance from the path to any boss, with two decimal places.", "hint": "### Constraints\n\n- For $20\\%$ of the testdata, boss coordinate values are $\\leq 50$.\n- For $60\\%$ of the testdata, $n \\leq 1500$.\n- For $100\\%$ of the testdata, $n \\leq 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 拯救小云公主", "background": null, "description": "英雄又即将踏上拯救公主的道路……\n\n这次的拯救目标是 —— 爱和正义的小云公主。\n\n英雄来到 boss 的洞穴门口，他一下子就懵了，因为面前不只是一只 boss，而是上千只 boss。当英雄意识到自己还是等级 $1$ 的时候，他明白这就是一个不可能完成的任务。\n\n但他不死心，他在想，能不能避开 boss 去拯救公主呢，嘻嘻。\n\nboss 的洞穴可以看成一个矩形，英雄在左下角 $(1,1)$，公主在右上角 $(row,line)$。英雄为了避开 boss，当然是离 boss 距离越远越好了，所以英雄决定找一条路径使到距离 boss 的最短距离最远。\n\nPs: 英雄走的方向是任意的，但是不能走出矩形的范围。即英雄可以到达矩形范围内的任意一个点（没有必要是整点）\n\n你可以帮帮他吗？\n\n当英雄找到了美丽漂亮的小云公主，立刻就被 boss 包围了！！！英雄缓闭双眼，举手轻挥，白光一闪后使用了回城卷轴，回到了城堡，但只有小云公主回去了……因为英雄忘了进入回城的法阵了。", "inputFormat": "第一行，输入三个整数，$n$ 表示 boss 的数目，$row$、$line$ 表示矩形的大小；\n\n接下来 $n$ 行，每行分别两个整数，表示 boss 的位置坐标。", "outputFormat": "输出一个小数，表示英雄的路径离 boss 的最远距离，精确到小数点后两位。", "hint": "### 数据范围\n\n对于 $20\\%$ 数据，boss 坐标范围小于等于 $50$；\n\n对于 $60\\%$ 数据，$n \\leq 1500$；\n\n对于 $100\\%$ 数据，$n \\leq 3000$。", "locale": "zh-CN"}}}
{"pid": "P2499", "type": "P", "difficulty": 6, "samples": [["1 8 2 2 0\n.......*\n1 1\n1 3\n1 5\n1 7", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2012", "各省省选", "山东"], "title": "[SDOI2012] 象棋", "background": null, "description": "小云和小南两姐妹从小喜欢下象棋，现在作为象棋高手的她们，已经不屑于玩平常的象棋了，于是她们便开始用棋盘和棋子玩各种各样的新游戏。\n\n今天天气晴朗，阳光明媚，她们将在 $n\\times m$ 的棋盘上进行游戏。\n\n棋盘上有 $k$ 颗棋子和若干有障碍格子，令棋盘左上角格子坐标为 $(1,1)$，右下角格子坐标为 $(n,m)$，参数 $a,b$ 规定了所有棋子的走法：在 $(x, y)$ 的棋子下一步能走到 $(x + a, y + b), (x + a, y - b), (x - a, y + b), (x - a, y - b), (x + b, y + a), (x + b, y - a), (x - b, y + a), (x - b, y - a)$ 这八个格子中的一个，棋子任何时候不能跃出棋盘或走到有障碍的格子上。\n\n这 $k$ 颗棋子是相同的，小云和小南的目标是用最少步数把所有棋子移动到特定格子，要求移动过程中不能出现多颗棋子同时在某一格的情况。\n\n她们已经想出步数较少方案，但无法确定这是否为最少步数，所以向作为程序员的你求助。", "inputFormat": "第一行五个空格隔开的整数 $n,m,k,a,b$；\n\n接下来 $n$ 行，每行为长度 $m$ 的字符串，描述棋盘，`.` 表示没有障碍的格子，`*` 表示有障碍的格子；\n\n接下来 $k$ 行，每行两个整数 $x$ 和 $y$，分别表示 $k$ 颗棋子的初始位置；\n\n接下来 $k$ 行，每行两个整数 $x$ 和 $y$，分别表示 $k$ 颗棋子的目标位置。", "outputFormat": "一个整数，为把所有棋子移动到目标位置的最少步数，数据保证有解。", "hint": "【样例说明】\n\n一可行方案如下：第二颗棋子向右跳两步，随后第一颗棋子向右跳两步，共 $4$ 步。值得注意的是，第一颗棋子向右跳三步，随后第二颗棋子向右跳一步的方案尽管能把棋子都移动到目标位置，但途中两颗棋子曾经同时在 $(1, 3)$，违反了规则，所以不能选用此方案。\n\n\n数据范围\n\n其中 $20\\%$ 的数据，$n\\times m\\le 20$；\n\n另外 $10\\%$ 的数据，$n = 1$；\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 100$，$1\\le k\\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Chinese Chess", "background": "", "description": "Xiaoyun and Xiaonan, two sisters, have liked playing Chinese Chess since childhood. Now, as masters of the game, they are no longer interested in ordinary Chinese Chess, so they begin to play various new games using the board and pieces.\n\nToday the weather is clear and sunny, and they are going to play on an $n\\times m$ board.\n\nThere are $k$ pieces and some blocked cells on the board. Let the top-left cell be $(1, 1)$ and the bottom-right cell be $(n, m)$. Parameters $a, b$ define the moves of all pieces: a piece at $(x, y)$ can move in one step to one of the eight cells $(x + a, y + b), (x + a, y - b), (x - a, y + b), (x - a, y - b), (x + b, y + a), (x + b, y - a), (x - b, y + a), (x - b, y - a)$. A piece can never jump out of the board or onto a blocked cell.\n\nThese $k$ pieces are identical. The goal is to move all pieces to specified cells in the minimum number of steps. During the moves, it is forbidden for multiple pieces to be on the same cell at the same time.\n\nThey have already found a plan with relatively few steps, but they are not sure whether it is optimal, so they ask you, as a programmer, for help.", "inputFormat": "The first line contains five integers $n, m, k, a, b$ separated by spaces.\n\nThe next $n$ lines each contain a string of length $m$ describing the board, where `.` denotes a free cell and `*` denotes a blocked cell.\n\nThe next $k$ lines each contain two integers $x$ and $y$, giving the initial positions of the $k$ pieces.\n\nThe next $k$ lines each contain two integers $x$ and $y$, giving the target positions of the $k$ pieces.", "outputFormat": "Output a single integer: the minimum number of steps needed to move all pieces to their target positions. The testdata guarantees that a solution exists.", "hint": "[Sample explanation]\n\nOne feasible plan is as follows: the second piece jumps two steps to the right, then the first piece jumps two steps to the right, for a total of $4$ steps. Note that although the plan where the first piece jumps three steps to the right and then the second piece jumps one step to the right can also move all pieces to the target positions, the two pieces would simultaneously be at $(1, 3)$ at some moment, which violates the rules, so this plan cannot be used.\n\nConstraints\n\n- For $20\\%$ of the testdata, $n\\times m \\le 20$.\n- Additionally, for $10\\%$ of the testdata, $n = 1$.\n- For $100\\%$ of the testdata, $1 \\le n, m \\le 100$, $1 \\le k \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 象棋", "background": null, "description": "小云和小南两姐妹从小喜欢下象棋，现在作为象棋高手的她们，已经不屑于玩平常的象棋了，于是她们便开始用棋盘和棋子玩各种各样的新游戏。\n\n今天天气晴朗，阳光明媚，她们将在 $n\\times m$ 的棋盘上进行游戏。\n\n棋盘上有 $k$ 颗棋子和若干有障碍格子，令棋盘左上角格子坐标为 $(1,1)$，右下角格子坐标为 $(n,m)$，参数 $a,b$ 规定了所有棋子的走法：在 $(x, y)$ 的棋子下一步能走到 $(x + a, y + b), (x + a, y - b), (x - a, y + b), (x - a, y - b), (x + b, y + a), (x + b, y - a), (x - b, y + a), (x - b, y - a)$ 这八个格子中的一个，棋子任何时候不能跃出棋盘或走到有障碍的格子上。\n\n这 $k$ 颗棋子是相同的，小云和小南的目标是用最少步数把所有棋子移动到特定格子，要求移动过程中不能出现多颗棋子同时在某一格的情况。\n\n她们已经想出步数较少方案，但无法确定这是否为最少步数，所以向作为程序员的你求助。", "inputFormat": "第一行五个空格隔开的整数 $n,m,k,a,b$；\n\n接下来 $n$ 行，每行为长度 $m$ 的字符串，描述棋盘，`.` 表示没有障碍的格子，`*` 表示有障碍的格子；\n\n接下来 $k$ 行，每行两个整数 $x$ 和 $y$，分别表示 $k$ 颗棋子的初始位置；\n\n接下来 $k$ 行，每行两个整数 $x$ 和 $y$，分别表示 $k$ 颗棋子的目标位置。", "outputFormat": "一个整数，为把所有棋子移动到目标位置的最少步数，数据保证有解。", "hint": "【样例说明】\n\n一可行方案如下：第二颗棋子向右跳两步，随后第一颗棋子向右跳两步，共 $4$ 步。值得注意的是，第一颗棋子向右跳三步，随后第二颗棋子向右跳一步的方案尽管能把棋子都移动到目标位置，但途中两颗棋子曾经同时在 $(1, 3)$，违反了规则，所以不能选用此方案。\n\n\n数据范围\n\n其中 $20\\%$ 的数据，$n\\times m\\le 20$；\n\n另外 $10\\%$ 的数据，$n = 1$；\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 100$，$1\\le k\\le 500$。", "locale": "zh-CN"}}}
{"pid": "P2500", "type": "P", "difficulty": 6, "samples": [["4 3\r\n1 2 1 \r\n2 3 2\r\n3 1 3\r\n5\r\nAskAA\r\nAskAB\r\nMoveB 2\r\nAskAA\r\nAskAB", "1\r\nNo Found!\r\n3\r\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2012", "各省省选", "山东", "根号分治"], "title": "[SDOI2012] 集合", "background": "", "description": "小H在学习“集合与图论”的时候遇到了一个问题，他思考了很久依然无法很好完成这个问题。于是他只好来求助你了，给出n个点m条边的带权无向图（即每条无向边上都有一个权值），有3个集合A、B、C。一开始无向图中所有点都属于A集合，有如下9种操作：\n\nMoveA x：表示将第x个点从所在集合中删除，并加入至A集合。\n\nMoveB x：表示将第x个点从所在集合中删除，并加入至B集合。\n\nMoveC x：表示将第x个点从所在集合中删除，并加入至C集合。\n\nAskAA：询问两个端点都属于A集合的所有边中最小的权值是多少。\n\nAskAB：询问两个端点分别属于A集合和B集合的所有边中最小的权值是多少。\n\nAskAC：询问两个端点分别属于A集合和C集合的所有边中最小的权值是多少。\n\nAskBB：询问两个端点都属于B集合的所有边中最小的权值是多少。\n\nAskBC：询问两个端点分别属于B集合和C集合的所有边中最小的权值是多少。\n\nAskCC：询问两个端点都属于C集合的所有边中最小的权值是多少。\n\n你能帮助他解决这个问题吗？\n", "inputFormat": "输入的第1行有两个正整数，分别表示n和m。\n\n在第2行至第m+1行中，每行有三个正整数，分别为u、v、w。表示这条无向边的两个端点分别为u和v(u != v)，且这个边的权值为w(w<=10^9)。\n\n第m+2行有一个正整数q，表示有q个询问。\n\n在第m+3行至第m+q+2行中，每行的输入方式为题目描述里9种操作中的一种。\n", "outputFormat": "对于所有的Ask操作输出最小的权值，如果不存在则输出“No Found!”。\n", "hint": "数据范围\n\n对于其中20%的数据，满足n<=50, m<=2500, q<=2500。\n\n对于另外30%的数据，满足n<=100, m<=10000, q<=20000。\n\n对于另外50%的数据，满足n<=100000,m<=500000,q<=100000。且无向图上任意两个点之间至多能选出3条不相交的路径。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Set", "background": "", "description": "While studying “Sets and Graph Theory,” Xiao H encountered a problem that he could not solve well after thinking for a long time. He asks for your help. You are given a weighted undirected graph with $n$ vertices and $m$ edges (i.e., each undirected edge has a weight). There are three sets A, B, and C. Initially, all vertices in the undirected graph belong to set A. There are nine operations as follows:\n\nMoveA x: Remove vertex $x$ from its current set and add it to set A.\nMoveB x: Remove vertex $x$ from its current set and add it to set B.\nMoveC x: Remove vertex $x$ from its current set and add it to set C.\nAskAA: Query the minimum weight among all edges whose two endpoints both belong to set A.\nAskAB: Query the minimum weight among all edges whose two endpoints belong to sets A and B, respectively.\nAskAC: Query the minimum weight among all edges whose two endpoints belong to sets A and C, respectively.\nAskBB: Query the minimum weight among all edges whose two endpoints both belong to set B.\nAskBC: Query the minimum weight among all edges whose two endpoints belong to sets B and C, respectively.\nAskCC: Query the minimum weight among all edges whose two endpoints both belong to set C.\n\nCan you help him solve this problem?", "inputFormat": "- Line 1 contains two positive integers, denoting $n$ and $m$.\n- Lines 2 to $m+1$: each line contains three positive integers $u$, $v$, $w$, indicating an undirected edge between $u$ and $v$ ($u \\ne v$) with weight $w$ ($w \\le 10^9$).\n- Line $m+2$ contains a positive integer $q$, the number of operations.\n- Lines $m+3$ to $m+q+2$: each line is one of the nine operations described above.", "outputFormat": "For every Ask operation, output the minimum weight. If it does not exist, output \"No Found!\".", "hint": "Constraints\n\n- For 20% of the testdata, $n \\le 50$, $m \\le 2500$, $q \\le 2500$.\n- For an additional 30% of the testdata, $n \\le 100$, $m \\le 10000$, $q \\le 20000$.\n- For the remaining 50% of the testdata, $n \\le 100000$, $m \\le 500000$, $q \\le 100000$, and in the undirected graph, between any two vertices, there exist at most 3 pairwise disjoint paths.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] 集合", "background": "", "description": "小H在学习“集合与图论”的时候遇到了一个问题，他思考了很久依然无法很好完成这个问题。于是他只好来求助你了，给出n个点m条边的带权无向图（即每条无向边上都有一个权值），有3个集合A、B、C。一开始无向图中所有点都属于A集合，有如下9种操作：\n\nMoveA x：表示将第x个点从所在集合中删除，并加入至A集合。\n\nMoveB x：表示将第x个点从所在集合中删除，并加入至B集合。\n\nMoveC x：表示将第x个点从所在集合中删除，并加入至C集合。\n\nAskAA：询问两个端点都属于A集合的所有边中最小的权值是多少。\n\nAskAB：询问两个端点分别属于A集合和B集合的所有边中最小的权值是多少。\n\nAskAC：询问两个端点分别属于A集合和C集合的所有边中最小的权值是多少。\n\nAskBB：询问两个端点都属于B集合的所有边中最小的权值是多少。\n\nAskBC：询问两个端点分别属于B集合和C集合的所有边中最小的权值是多少。\n\nAskCC：询问两个端点都属于C集合的所有边中最小的权值是多少。\n\n你能帮助他解决这个问题吗？\n", "inputFormat": "输入的第1行有两个正整数，分别表示n和m。\n\n在第2行至第m+1行中，每行有三个正整数，分别为u、v、w。表示这条无向边的两个端点分别为u和v(u != v)，且这个边的权值为w(w<=10^9)。\n\n第m+2行有一个正整数q，表示有q个询问。\n\n在第m+3行至第m+q+2行中，每行的输入方式为题目描述里9种操作中的一种。\n", "outputFormat": "对于所有的Ask操作输出最小的权值，如果不存在则输出“No Found!”。\n", "hint": "数据范围\n\n对于其中20%的数据，满足n<=50, m<=2500, q<=2500。\n\n对于另外30%的数据，满足n<=100, m<=10000, q<=20000。\n\n对于另外50%的数据，满足n<=100000,m<=500000,q<=100000。且无向图上任意两个点之间至多能选出3条不相交的路径。\n", "locale": "zh-CN"}}}
{"pid": "P2501", "type": "P", "difficulty": 6, "samples": [["4\r\n5 2 3 5", "1\r\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2006", "河南", "各省省选", "枚举"], "title": "[HAOI2006] 数字序列", "background": "", "description": "现在我们有一个长度为 $n$ 的整数序列 $a$。但是它太不好看了，于是我们希望把它变成一个单调严格上升的序列。但是不希望改变过多的数，也不希望改变的幅度太大。\n", "inputFormat": "第一行是一个整数，表示序列长度 $n$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示序列的第 $i$ 项 $a_i$。", "outputFormat": "第一行输出一个整数，表示最少需要改变多少个数。\n\n第二行输出一个整数，表示在改变的数最少的情况下，每个数改变的绝对值之和的最小值。", "hint": "#### 数据规模与约定\n\n- 对于 $90\\%$ 的数据，保证 $n \\leq 6 \\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 3.5 \\times 10^4$，$1 \\leq a_i \\leq 10^5$。数据保证 $a_i$ 随机生成。\n", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2006] Number Sequence", "background": "", "description": "You are given an integer sequence $a$ of length $n$. It does not look good, so we want to turn it into a strictly increasing sequence. However, we do not want to change too many elements, and we also do not want the magnitude of changes to be too large.", "inputFormat": "The first line contains an integer $n$, the length of the sequence.  \nThe second line contains $n$ integers; the $i$-th integer is the $i$-th element $a_i$ of the sequence.", "outputFormat": "On the first line, output an integer: the minimum number of elements that need to be changed.  \nOn the second line, output an integer: under the condition that the number of changed elements is minimal, the minimum possible sum of absolute changes.", "hint": "Constraints\n\n- For $90\\%$ of the testdata, it is guaranteed that $n \\leq 6 \\times 10^3$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 3.5 \\times 10^4$, $1 \\leq a_i \\leq 10^5$. The testdata guarantees that $a_i$ are generated at random.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2006] 数字序列", "background": "", "description": "现在我们有一个长度为 $n$ 的整数序列 $a$。但是它太不好看了，于是我们希望把它变成一个单调严格上升的序列。但是不希望改变过多的数，也不希望改变的幅度太大。\n", "inputFormat": "第一行是一个整数，表示序列长度 $n$。  \n第二行有 $n$ 个整数，第 $i$ 个整数表示序列的第 $i$ 项 $a_i$。", "outputFormat": "第一行输出一个整数，表示最少需要改变多少个数。\n\n第二行输出一个整数，表示在改变的数最少的情况下，每个数改变的绝对值之和的最小值。", "hint": "#### 数据规模与约定\n\n- 对于 $90\\%$ 的数据，保证 $n \\leq 6 \\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 3.5 \\times 10^4$，$1 \\leq a_i \\leq 10^5$。数据保证 $a_i$ 随机生成。\n", "locale": "zh-CN"}}}
{"pid": "P2502", "type": "P", "difficulty": 5, "samples": [["4 2\n1 2 1\n3 4 2\n1 4", "IMPOSSIBLE"], ["3 3\n1 2 10\n1 2 5\n2 3 8\n1 3", "5/4"], ["3 2\n1 2 2\n2 3 4\n1 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "河南", "并查集", "各省省选", "枚举", "排序"], "title": "[HAOI2006] 旅行", "background": null, "description": "Z 小镇是一个景色宜人的地方，吸引来自各地的观光客来此旅游观光。Z 小镇附近共有 $n$ 个景点（编号为 $1,2,3,\\ldots,n$），这些景点被 $m$ 条道路连接着，所有道路都是双向的，两个景点之间可能有多条道路。\n\n也许是为了保护该地的旅游资源，Z 小镇有个奇怪的规定，就是对于一条给定的公路 $r_i$，任何在该公路上行驶的车辆速度必须为 $v_i$。\n\n速度变化太快使得游客们很不舒服，因此从一个景点前往另一个景点的时候，大家都希望选择行驶过程中最大速度和最小速度的比尽可能小的路线，也就是所谓最舒适的路线。", "inputFormat": "第一行包含两个正整数 $n,m$。\n\n接下来的 $m$ 行每行包含三个正整数 $x,y,v$。表示景点 $x$ 到景点 $y$ 之间有一条双向公路，车辆必须以速度 $v$ 在该公路上行驶。\n\n最后一行包含两个正整数 $s,t$，表示想知道从景点 $s$ 到景点 $t$ 最大最小速度比最小的路径。$s$ 和 $t$ 不可能相同。", "outputFormat": "如果景点 $s$ 到景点 $t$ 没有路径，输出 `IMPOSSIBLE`。否则输出一个数，表示最小的速度比。如果需要，输出一个既约分数。", "hint": "对于 $100\\%$ 的数据，$1 \\le x,y \\le n \\le 500$，$1 \\le v < 3 \\times 10^4$，$1 \\le m \\le 5 \\times 10^3$，$x \\ne y$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2006] Travel", "background": "", "description": "Z Town is a picturesque place that attracts tourists from all over. There are $n$ scenic spots near Z Town (numbered $1, 2, 3, \\ldots, n$), connected by $m$ roads. All roads are bidirectional, and there may be multiple roads between two spots.\n\nPerhaps to protect local tourism resources, Z Town has a peculiar rule: for a given road $r_i$, any vehicle traveling on that road must have speed $v_i$.\n\nFrequent speed changes make tourists uncomfortable, so when traveling from one spot to another, everyone wants to choose a route that minimizes the ratio between the maximum and minimum speeds during the trip, i.e., the most comfortable route.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nEach of the next $m$ lines contains three positive integers $x, y, v$. This means there is a bidirectional road between spots $x$ and $y$, and vehicles must travel at speed $v$ on that road.\n\nThe last line contains two positive integers $s, t$, asking for the path from spot $s$ to spot $t$ with the smallest ratio of maximum to minimum speeds. $s$ and $t$ are not the same.", "outputFormat": "If there is no path from $s$ to $t$, output `IMPOSSIBLE`. Otherwise, output a number representing the minimal speed ratio. If necessary, output a reduced fraction.", "hint": "For $100\\%$ of the testdata, $1 \\le x, y \\le n \\le 500$, $1 \\le v < 3 \\times 10^4$, $1 \\le m \\le 5 \\times 10^3$, $x \\ne y$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2006] 旅行", "background": null, "description": "Z 小镇是一个景色宜人的地方，吸引来自各地的观光客来此旅游观光。Z 小镇附近共有 $n$ 个景点（编号为 $1,2,3,\\ldots,n$），这些景点被 $m$ 条道路连接着，所有道路都是双向的，两个景点之间可能有多条道路。\n\n也许是为了保护该地的旅游资源，Z 小镇有个奇怪的规定，就是对于一条给定的公路 $r_i$，任何在该公路上行驶的车辆速度必须为 $v_i$。\n\n速度变化太快使得游客们很不舒服，因此从一个景点前往另一个景点的时候，大家都希望选择行驶过程中最大速度和最小速度的比尽可能小的路线，也就是所谓最舒适的路线。", "inputFormat": "第一行包含两个正整数 $n,m$。\n\n接下来的 $m$ 行每行包含三个正整数 $x,y,v$。表示景点 $x$ 到景点 $y$ 之间有一条双向公路，车辆必须以速度 $v$ 在该公路上行驶。\n\n最后一行包含两个正整数 $s,t$，表示想知道从景点 $s$ 到景点 $t$ 最大最小速度比最小的路径。$s$ 和 $t$ 不可能相同。", "outputFormat": "如果景点 $s$ 到景点 $t$ 没有路径，输出 `IMPOSSIBLE`。否则输出一个数，表示最小的速度比。如果需要，输出一个既约分数。", "hint": "对于 $100\\%$ 的数据，$1 \\le x,y \\le n \\le 500$，$1 \\le v < 3 \\times 10^4$，$1 \\le m \\le 5 \\times 10^3$，$x \\ne y$。", "locale": "zh-CN"}}}
{"pid": "P2503", "type": "P", "difficulty": 5, "samples": [["6 3\n1 2 3 4 5 6\n", "0.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "2006", "河南", "各省省选", "模拟退火"], "title": "[HAOI2006] 均分数据", "background": "", "description": "已知 $n$ 个正整数 $a_1,a_2 ... a_n$ 。今要将它们分成 $m$ 组，使得各组数据的数值和最平均，即各组数字之和的均方差最小。均方差公式如下：\n\n$$\\sigma = \\sqrt{\\frac 1m \\sum\\limits_{i=1}^m(\\overline x - x_i)^2},\\overline x = \\frac 1m \\sum\\limits_{i=1}^m x_i$$\n\n其中 $\\sigma$ 为均方差，$\\bar{x}$ 为各组数据和的平均值，$x_i$ 为第 $i$ 组数据的数值和。", "inputFormat": "第一行是两个整数，表示 $n,m$ 的值（ $n$ 是整数个数，$m$ 是要分成的组数）\n\n第二行有 $n$ 个整数，表示 $a_1,a_2 ... a_n$。整数的范围是 $[1,50]$。\n\n（同一行的整数间用空格分开）\n", "outputFormat": "输出一行一个实数，表示最小均方差的值(保留小数点后两位数字)。\n", "hint": "样例解释：$1,6$、$2,5$、$3,4$ 分别为一组\n\n【数据规模】\n\n对于 $40\\%$ 的数据，保证有 $m \\le n \\le 10$，$2 \\le m \\le 6$\n\n对于 $100\\%$ 的数据，保证有 $m \\le n \\le 20$，$2 \\le m \\le 6$\n", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2006] Evenly Divide Data", "background": "", "description": "Given $n$ positive integers $a_1,a_2 ... a_n$. We want to partition them into $m$ groups so that the sums of the groups are as balanced as possible, i.e., the standard deviation of the group sums is minimized. The formula for the standard deviation is as follows:\n\n$$\\sigma = \\sqrt{\\frac 1m \\sum\\limits_{i=1}^m(\\overline x - x_i)^2},\\overline x = \\frac 1m \\sum\\limits_{i=1}^m x_i$$\n\nHere, $\\sigma$ is the standard deviation, $\\bar{x}$ is the average of the group sums, and $x_i$ is the sum of the $i$-th group.", "inputFormat": "The first line contains two integers, representing the values of $n,m$ ($n$ is the number of integers, and $m$ is the number of groups).\n\nThe second line contains $n$ integers, representing $a_1,a_2 ... a_n$. Each integer is in the range $[1,50]$.\n\nIntegers on the same line are separated by spaces.", "outputFormat": "Output one real number on a single line, representing the minimal value of the standard deviation, rounded to two decimal places.", "hint": "Sample explanation: group as $(1,6)$, $(2,5)$, $(3,4)$.\n\nConstraints\n\nFor $40\\%$ of the testdata, it is guaranteed that $m \\le n \\le 10$, $2 \\le m \\le 6$.\n\nFor $100\\%$ of the testdata, it is guaranteed that $m \\le n \\le 20$, $2 \\le m \\le 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2006] 均分数据", "background": "", "description": "已知 $n$ 个正整数 $a_1,a_2 ... a_n$ 。今要将它们分成 $m$ 组，使得各组数据的数值和最平均，即各组数字之和的均方差最小。均方差公式如下：\n\n$$\\sigma = \\sqrt{\\frac 1m \\sum\\limits_{i=1}^m(\\overline x - x_i)^2},\\overline x = \\frac 1m \\sum\\limits_{i=1}^m x_i$$\n\n其中 $\\sigma$ 为均方差，$\\bar{x}$ 为各组数据和的平均值，$x_i$ 为第 $i$ 组数据的数值和。", "inputFormat": "第一行是两个整数，表示 $n,m$ 的值（ $n$ 是整数个数，$m$ 是要分成的组数）\n\n第二行有 $n$ 个整数，表示 $a_1,a_2 ... a_n$。整数的范围是 $[1,50]$。\n\n（同一行的整数间用空格分开）\n", "outputFormat": "输出一行一个实数，表示最小均方差的值(保留小数点后两位数字)。\n", "hint": "样例解释：$1,6$、$2,5$、$3,4$ 分别为一组\n\n【数据规模】\n\n对于 $40\\%$ 的数据，保证有 $m \\le n \\le 10$，$2 \\le m \\le 6$\n\n对于 $100\\%$ 的数据，保证有 $m \\le n \\le 20$，$2 \\le m \\le 6$\n", "locale": "zh-CN"}}}
{"pid": "P2504", "type": "P", "difficulty": 3, "samples": [["4\n 1 2 3 4\n6\n0 0\n1 0\n1 2\n-1 -1\n-2 0\n2 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2006", "河南", "各省省选", "生成树"], "title": "[HAOI2006] 聪明的猴子", "background": "", "description": "在一个热带雨林中生存着一群猴子，它们以树上的果子为生。昨天下了一场大雨，现在雨过天晴，但整个雨林的地表还是被大水淹没着，部分植物的树冠露在水面上。猴子不会游泳，但跳跃能力比较强，它们仍然可以在露出水面的不同树冠上来回穿梭，以找到喜欢吃的果实。\n\n现在，在这个地区露出水面的有 $N$ 棵树，假设每棵树本身的直径都很小，可以忽略不计。我们在这块区域上建立直角坐标系，则每一棵树的位置由其所对应的坐标表示(任意两棵树的坐标都不相同)。\n\n在这个地区住着的猴子有 $M$ 个，下雨时，它们都躲到了茂密高大的树冠中，没有被大水冲走。由于各个猴子的年龄不同、身体素质不同，它们跳跃的能力不同。有的猴子跳跃的距离比较远(当然也可以跳到较近的树上)，而有些猴子跳跃的距离就比较近。这些猴子非常聪明，它们通过目测就可以准确地判断出自己能否跳到对面的树上。\n\n现已知猴子的数量及每一个猴子的最大跳跃距离，还知道露出水面的每一棵树的坐标，你的任务是统计有多少个猴子可以在这个地区露出水面的所有树冠上觅食。\n", "inputFormat": "输入包括：\n\n第 $1$ 行为一个整数，表示猴子的个数 $M$ $(2 \\le M \\le 500)$；\n\n第 $2$ 行为 $M$ 个整数，依次表示猴子的最大跳跃距离（每个整数值在 $1 \\sim 1000$ 之间）；\n\n第 $3$ 行为一个整数表示树的总棵数 $N$ $(2 \\le N \\le 1000)$ ；\n\n第 $4$ 行至第 $N+3$ 行为 $N$ 棵树的坐标（横纵坐标均为整数，范围为：$-1000 \\sim 1000$）。\n\n（同一行的整数间用空格分开）\n", "outputFormat": "输出包括一个整数，表示可以在这个地区的所有树冠上觅食的猴子数。", "hint": "对于 $40\\%$ 的数据，保证有 $2 \\le N \\le 100$，$1 \\le M \\le 100$\n\n对于全部的数据，保证有 $2 \\le N \\le 1000$，$1 \\le M \\le500$\n\n感谢 @charlie003 修正数据", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2006] Smart Monkey", "background": "", "description": "A troop of monkeys lives in a tropical rainforest and feeds on fruit from the trees. After heavy rain yesterday, the sky has cleared, but the forest floor is still flooded, with only parts of the tree canopies above the water. Monkeys cannot swim, but they are good jumpers, so they can still move among the exposed canopies to find the fruit they like to eat.\n\nThere are $N$ trees whose canopies are above the water. Assume each tree’s own diameter is negligible. We set up a Cartesian coordinate system on this area, and each tree’s position is represented by its coordinate (no two trees share the same coordinate).\n\nThere are $M$ monkeys living in this area. During the rain, they hid in dense, tall canopies and were not swept away. Because of differences in age and physical fitness, their jumping abilities differ. Some monkeys can jump farther (they can also jump to closer trees), while others can only jump shorter distances. These monkeys are very smart: by visual judgment, they can accurately decide whether they can jump to another tree.\n\nGiven the number of monkeys and each monkey’s maximum jump distance, as well as the coordinates of all exposed trees, your task is to count how many monkeys can forage on all the exposed tree canopies in this area.", "inputFormat": "The input includes:\n\n- The first line contains an integer $M$ $(2 \\le M \\le 500)$, the number of monkeys.\n- The second line contains $M$ integers, the maximum jump distance of each monkey (each integer is in $1 \\sim 1000$).\n- The third line contains an integer $N$ $(2 \\le N \\le 1000)$, the total number of trees.\n- Lines $4$ to $N+3$ contain the coordinates of the $N$ trees (both coordinates are integers in the range $-1000 \\sim 1000$).\n\n(Integers on the same line are separated by spaces.)", "outputFormat": "Output a single integer: the number of monkeys that can forage on all canopies in this area.", "hint": "For $40\\%$ of the testdata, it is guaranteed that $2 \\le N \\le 100$, $1 \\le M \\le 100$.\n\nFor all the testdata, it is guaranteed that $2 \\le N \\le 1000$, $1 \\le M \\le 500$.\n\nThanks to @charlie003 for correcting the testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2006] 聪明的猴子", "background": "", "description": "在一个热带雨林中生存着一群猴子，它们以树上的果子为生。昨天下了一场大雨，现在雨过天晴，但整个雨林的地表还是被大水淹没着，部分植物的树冠露在水面上。猴子不会游泳，但跳跃能力比较强，它们仍然可以在露出水面的不同树冠上来回穿梭，以找到喜欢吃的果实。\n\n现在，在这个地区露出水面的有 $N$ 棵树，假设每棵树本身的直径都很小，可以忽略不计。我们在这块区域上建立直角坐标系，则每一棵树的位置由其所对应的坐标表示(任意两棵树的坐标都不相同)。\n\n在这个地区住着的猴子有 $M$ 个，下雨时，它们都躲到了茂密高大的树冠中，没有被大水冲走。由于各个猴子的年龄不同、身体素质不同，它们跳跃的能力不同。有的猴子跳跃的距离比较远(当然也可以跳到较近的树上)，而有些猴子跳跃的距离就比较近。这些猴子非常聪明，它们通过目测就可以准确地判断出自己能否跳到对面的树上。\n\n现已知猴子的数量及每一个猴子的最大跳跃距离，还知道露出水面的每一棵树的坐标，你的任务是统计有多少个猴子可以在这个地区露出水面的所有树冠上觅食。\n", "inputFormat": "输入包括：\n\n第 $1$ 行为一个整数，表示猴子的个数 $M$ $(2 \\le M \\le 500)$；\n\n第 $2$ 行为 $M$ 个整数，依次表示猴子的最大跳跃距离（每个整数值在 $1 \\sim 1000$ 之间）；\n\n第 $3$ 行为一个整数表示树的总棵数 $N$ $(2 \\le N \\le 1000)$ ；\n\n第 $4$ 行至第 $N+3$ 行为 $N$ 棵树的坐标（横纵坐标均为整数，范围为：$-1000 \\sim 1000$）。\n\n（同一行的整数间用空格分开）\n", "outputFormat": "输出包括一个整数，表示可以在这个地区的所有树冠上觅食的猴子数。", "hint": "对于 $40\\%$ 的数据，保证有 $2 \\le N \\le 100$，$1 \\le M \\le 100$\n\n对于全部的数据，保证有 $2 \\le N \\le 1000$，$1 \\le M \\le500$\n\n感谢 @charlie003 修正数据", "locale": "zh-CN"}}}
{"pid": "P2505", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2 5\n2 3 5\n3 4 5\n1 4 8", "2\n3\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "河南", "各省省选", "拓扑排序", "最短路"], "title": "[HAOI2012] 道路", "background": null, "description": "C 国有 $n$ 座城市，城市之间通过 $m$ 条**单向**道路连接。一条路径被称为最短路，当且仅当不存在从它的起点到终点的另外一条路径总长度比它小。两条最短路不同，当且仅当它们包含的道路序列不同。我们需要对每条道路的重要性进行评估，评估方式为计算有多少条不同的最短路经过该道路。现在，这个任务交给了你。", "inputFormat": "第一行包含两个正整数 $n, m$。\n\n接下来 $m$ 行每行包含三个正整数 $u, v, w$，表示有一条从 $u$ 到 $v$ 长度为 $w$ 的道路", "outputFormat": "输出应有 $m$ 行，第 $i$ 行包含一个数，代表经过第 $i$ 条道路的最短路的数目对 $10^9+7$ 取模后的结果。", "hint": "数据规模\n\n$30\\%$ 的数据满足：$n\\leq 15, m\\leq 30$。\n\n$60\\%$ 的数据满足：$n\\leq 300, m\\leq 1000$。\n\n$100\\%$ 的数据满足：$n\\leq 1500, m\\leq 5000, 1\\leq w\\leq 10000$。\n\n不保证没有重边。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Road", "background": "", "description": "Country C has $n$ cities connected by $m$ directed roads. A path is called a shortest path if and only if there does not exist another path from its start to its end whose total length is smaller. Two shortest paths are different if and only if the sequences of roads they contain are different. We need to assess the importance of each road by counting how many different shortest paths pass through that road. Now, this task is given to you.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nEach of the next $m$ lines contains three positive integers $u, v, w$, indicating there is a road from $u$ to $v$ with length $w$.", "outputFormat": "Output $m$ lines. The $i$-th line contains one number: the number of shortest paths that pass through the $i$-th road, modulo $10^9+7$.", "hint": "Constraints\n\n$30\\%$ of the testdata satisfies: $n \\le 15, m \\le 30$.\n\n$60\\%$ of the testdata satisfies: $n \\le 300, m \\le 1000$.\n\n$100\\%$ of the testdata satisfies: $n \\le 1500, m \\le 5000, 1 \\le w \\le 10000$.\n\nMultiple edges may exist.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 道路", "background": null, "description": "C 国有 $n$ 座城市，城市之间通过 $m$ 条**单向**道路连接。一条路径被称为最短路，当且仅当不存在从它的起点到终点的另外一条路径总长度比它小。两条最短路不同，当且仅当它们包含的道路序列不同。我们需要对每条道路的重要性进行评估，评估方式为计算有多少条不同的最短路经过该道路。现在，这个任务交给了你。", "inputFormat": "第一行包含两个正整数 $n, m$。\n\n接下来 $m$ 行每行包含三个正整数 $u, v, w$，表示有一条从 $u$ 到 $v$ 长度为 $w$ 的道路", "outputFormat": "输出应有 $m$ 行，第 $i$ 行包含一个数，代表经过第 $i$ 条道路的最短路的数目对 $10^9+7$ 取模后的结果。", "hint": "数据规模\n\n$30\\%$ 的数据满足：$n\\leq 15, m\\leq 30$。\n\n$60\\%$ 的数据满足：$n\\leq 300, m\\leq 1000$。\n\n$100\\%$ 的数据满足：$n\\leq 1500, m\\leq 5000, 1\\leq w\\leq 10000$。\n\n不保证没有重边。", "locale": "zh-CN"}}}
{"pid": "P2506", "type": "P", "difficulty": 6, "samples": [["4\n1\n1010\n01\n10101", "5"], ["2\n0\n1", "-1"], ["7\n00011011\n000110\n11\n0001\n1011\n00\n011011", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选"], "title": "[SCOI2008] 劣质编码", "background": "四川NOI省选2008\n", "description": "一个编码方案把每个字符对应到一个01 串。例如{1,1010,01,10101}就是一个编码方案，它把四个字符（假设它们为a,b,c,d）分别对应到串1、1010，01，10101。字符串的编码为各字符编码的连接。例如，在刚才的编码方案中，字符串cac的编码为01101，dcb的编码为10101011010。\n\n进一步分析发现，刚才的编码是相当劣质的，因为字符串ba, acc 和d 的编码都是10101。对于一个编码方案，你的任务是找出三个不同的字符串，使得它们的编码全相同。换句话说，找一个01 编码串，使得它至少有三种解码方式。如果有多组解，这个编码串应当尽量短。\n", "inputFormat": "第一行包含一个整数n，即符号的个数。以下n 行每行为一个长度不超过50的01串（可能为空串），即各符号的编码。\n", "outputFormat": "仅一行，包含一个整数，即最短编码的长度。如果无解，输出-1。\n", "hint": "2 <= n <= 30\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Poor-quality Encoding", "background": "Sichuan NOI Qualifier 2008.", "description": "An encoding scheme maps each character to a 01 string. For example, {1, 1010, 01, 10101} is an encoding scheme that maps four characters (assume they are a, b, c, d) to the strings 1, 1010, 01, 10101 respectively. The encoding of a string is the concatenation of the encodings of its characters. For instance, under the above scheme, the encoding of cac is 01101, and the encoding of dcb is 10101011010.\n\nOn further analysis, the above scheme is quite poor-quality, because the encodings of ba, acc, and d are all 10101. For a given encoding scheme, your task is to find three distinct strings whose encodings are identical. In other words, find a 01 code string that has at least three decoding ways. If there are multiple solutions, this code string should be as short as possible.", "inputFormat": "The first line contains an integer $n$, the number of symbols. Each of the following $n$ lines contains a 01 string (possibly empty) of length at most 50, which is the encoding of a symbol.", "outputFormat": "Output a single line containing an integer: the length of the shortest encoding. If there is no solution, output -1.", "hint": "Constraints: $2 \\le n \\le 30$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 劣质编码", "background": "四川NOI省选2008\n", "description": "一个编码方案把每个字符对应到一个01 串。例如{1,1010,01,10101}就是一个编码方案，它把四个字符（假设它们为a,b,c,d）分别对应到串1、1010，01，10101。字符串的编码为各字符编码的连接。例如，在刚才的编码方案中，字符串cac的编码为01101，dcb的编码为10101011010。\n\n进一步分析发现，刚才的编码是相当劣质的，因为字符串ba, acc 和d 的编码都是10101。对于一个编码方案，你的任务是找出三个不同的字符串，使得它们的编码全相同。换句话说，找一个01 编码串，使得它至少有三种解码方式。如果有多组解，这个编码串应当尽量短。\n", "inputFormat": "第一行包含一个整数n，即符号的个数。以下n 行每行为一个长度不超过50的01串（可能为空串），即各符号的编码。\n", "outputFormat": "仅一行，包含一个整数，即最短编码的长度。如果无解，输出-1。\n", "hint": "2 <= n <= 30\n", "locale": "zh-CN"}}}
{"pid": "P2507", "type": "P", "difficulty": 5, "samples": [["3\n3 65\n45 10\n60 25\n", "32\n"], ["3\n5 5\n6 7\n8 8\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2008", "四川", "各省省选"], "title": "[SCOI2008] 配对", "background": "", "description": "你有 $n$ 个整数 $A_i$ 和 $n$ 个整数 $B_i$。你需要把它们配对，即每个 $A_i$ 恰好对应一个 $B_{p[i]}$。要求所有配对的整数差的绝对值之和尽量小，但不允许两个相同的数配对。例如 $A = \\{5, 6, 8\\}$，$B = \\{5, 7, 8 \\}$，则最优配对方案是 $5 \\sim 8$、$6 \\sim 5$、$8 \\sim 7$，配对整数的差的绝对值分别为 $3, 1, 1$，和为 $5$。注意，$5 \\sim 5$、$6 \\sim 7$、$8 \\sim 8$ 是不允许的，因为相同的数不许配对。\n", "inputFormat": "第一行为一个正整数 $n$，接下来是 $n$ 行，每行两个整数 $A_i$ 和 $B_i$，保证所有 $A_i$ 各不相同，$B_i$ 也各不相同。\n", "outputFormat": "输出一个整数，即配对整数的差的绝对值之和的最小值。如果无法配对，输出 `-1`。\n", "hint": "$30 \\%$ 的数据满足：$n \\le {10}^4$；  \n$100 \\%$ 的数据满足：$1 \\le n \\le {10}^5$，$A_i$ 和 $B_i$ 均为 $1$ 到 ${10}^9$ 之间的整数。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Pairing", "background": "", "description": "You are given $n$ integers $A_i$ and $n$ integers $B_i$. You need to pair them, that is, each $A_i$ is matched to exactly one $B_{p[i]}$. The goal is to minimize the sum of absolute differences over all pairs, but pairing two equal numbers is not allowed. For example, if $A = \\{5, 6, 8\\}$ and $B = \\{5, 7, 8\\}$, then an optimal pairing is $5 \\sim 8$, $6 \\sim 5$, $8 \\sim 7$, with absolute differences $3, 1, 1$, summing to $5$. Note that $5 \\sim 5$, $6 \\sim 7$, $8 \\sim 8$ are not allowed because equal numbers may not be paired.", "inputFormat": "The first line contains a positive integer $n$. Then follow $n$ lines, each containing two integers $A_i$ and $B_i$. It is guaranteed that all $A_i$ are pairwise distinct, and all $B_i$ are also pairwise distinct.", "outputFormat": "Output a single integer, the minimum possible sum of absolute differences of the paired integers. If it is impossible to pair, output `-1`.", "hint": "Constraints:  \n$30 \\%$ of the testdata satisfies: $n \\le {10}^4$.  \n$100 \\%$ of the testdata satisfies: $1 \\le n \\le {10}^5$, $A_i$ and $B_i$ are integers between $1$ and ${10}^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 配对", "background": "", "description": "你有 $n$ 个整数 $A_i$ 和 $n$ 个整数 $B_i$。你需要把它们配对，即每个 $A_i$ 恰好对应一个 $B_{p[i]}$。要求所有配对的整数差的绝对值之和尽量小，但不允许两个相同的数配对。例如 $A = \\{5, 6, 8\\}$，$B = \\{5, 7, 8 \\}$，则最优配对方案是 $5 \\sim 8$、$6 \\sim 5$、$8 \\sim 7$，配对整数的差的绝对值分别为 $3, 1, 1$，和为 $5$。注意，$5 \\sim 5$、$6 \\sim 7$、$8 \\sim 8$ 是不允许的，因为相同的数不许配对。\n", "inputFormat": "第一行为一个正整数 $n$，接下来是 $n$ 行，每行两个整数 $A_i$ 和 $B_i$，保证所有 $A_i$ 各不相同，$B_i$ 也各不相同。\n", "outputFormat": "输出一个整数，即配对整数的差的绝对值之和的最小值。如果无法配对，输出 `-1`。\n", "hint": "$30 \\%$ 的数据满足：$n \\le {10}^4$；  \n$100 \\%$ 的数据满足：$1 \\le n \\le {10}^5$，$A_i$ 和 $B_i$ 均为 $1$ 到 ${10}^9$ 之间的整数。\n", "locale": "zh-CN"}}}
{"pid": "P2508", "type": "P", "difficulty": 6, "samples": [["4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2008", "河南", "各省省选", "枚举", "最大公约数 gcd"], "title": "[HAOI2008] 圆上的整点", "background": null, "description": "求一个给定的圆 $(x^2+y^2=r^2)$，在圆周上有多少个点的坐标是整数。", "inputFormat": "一个整数 $r$。", "outputFormat": "一个整数，表示整点个数。", "hint": "$1\\leq r\\leq 2\\times 10^9$", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2008] Lattice Points on a Circle", "background": "", "description": "Given the circle $(x^2+y^2=r^2)$, determine how many points on its circumference have integer coordinates.", "inputFormat": "A single integer $r$.", "outputFormat": "The number of lattice points.", "hint": "Constraints: $r\\leq 2000 000 000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2008] 圆上的整点", "background": null, "description": "求一个给定的圆 $(x^2+y^2=r^2)$，在圆周上有多少个点的坐标是整数。", "inputFormat": "一个整数 $r$。", "outputFormat": "一个整数，表示整点个数。", "hint": "$1\\leq r\\leq 2\\times 10^9$", "locale": "zh-CN"}}}
{"pid": "P2509", "type": "P", "difficulty": 6, "samples": [["PARAM A B\r\nIF A > 5 THEN\r\nC = B * A\r\nEND IF\r\nD = B - C\r\nZ = Y + X\r\nE = T\r\nF = E + E\r\nV = G + G\r\nRETURN F", "Line 5: variable C might not have been initialized\nLine 6: variable X might not have been initialized\nLine 6: variable Y might not have been initialized\nLine 7: variable T might not have been initialized\nLine 9: variable G might not have been initialized"], ["PARAM G\r\nRETURN G\r\nB = K\r\nRETURN C", "Line 3: unreachable code\r\nLine 4: unreachable code"], ["PARAM T C\r\nB = T\r\nA = 4\r\nIF A < 4 THEN\r\nIF B > 3 THEN\r\nQ = 100 + F\r\nELSE\r\nIF C = -1111111111 THEN\r\nQ = T - A\r\nIF Q = 0 THEN\r\nV = V - 1\r\nEND IF\r\nELSE\r\nRETURN I\r\nE = A\r\nEND IF\r\nEND IF\r\nELSE\r\nQ = 1\r\nEND IF\r\nRETURN Q", "Line 6: variable F might not have been initialized\nLine 11: variable V might not have been initialized\nLine 14: variable I might not have been initialized\nLine 15: unreachable code"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2008", "四川", "各省省选"], "title": "[SCOI2008] 警告", "background": "", "description": "有一个简单的脚本语言，只有赋值语句、条件语句和返回语句三种。变量名必须是单个大写字母，且变量都是 $32$ 位带符号整数。\n\n该语言的每条语句必须单独占一行。程序中不含空行，且每行的行首行末均无空格。每行的不同 token 之间用单个空格隔开。该语言的 BNF 如下：\n\n```cpp\n<line> :: <head> | <assignment> | <if> | ELSE | END IF | <return>\n<head> :: PARAM <paramlist> | PARAM\n<assignment> :: <variable> = <rvalue>\n<if> :: IF <variable> <relation> <value> THEN\n<return> :: RETURN <value>\n<paramlist> :: <variable> | <variable> <paramlist>\n<rvalue> :: <value> | <value> <operator> <value>\n<value> :: <variable> | <integer>\n<operator> :: + | - | * | /\n<relation> :: < | = | >\n<variable> :: A | B | ... | Z\n<integer> :: 不含前导 0 的 32 位带符号整数\n```\n程序的第一行是一条 `<head>` 语句，定义了函数的参数，而最后一行一定是 `<return>` 语句。`<head>` 语句不能在除了第一行之外的其他任何地方出现，但 `<return>` 语句可以在程序中多次出现。行号从 $1$ 开始编号。\n每条 `IF` 语句一定有一个配套的 `END IF` 语句，还有一个可选的 `ELSE` 语句（注意没有 `ELSE IF` 语句）。`IF` 语句可以嵌套，它总是比较一个变量和一个整数或者另一个变量。\n\n你应该分析一个给定的程序，并输出两类警告信息（格式见样例输出）：\n\n- 第一类警告：无法到达的代码行。不管各条 `IF` 语句的布尔表达式是真还是假（假设每条 `IF` 语句的布尔表达式都是既可能为真也可能为假，不受其他 `IF` 语句结果影响）。\n\n- 第二类警告：可能未初始化的变量。该语句用到了某个变量的值，但这个变量既不在第一行指定的参数列表里，也没有在此之前由赋值语句赋值过。如果这条语句无法到达，那么不应该给出这类警告。\n\n注意，语句 `ELSE` 和 `END IF` 不是可执行语句，因此不应该收到任何警告信息。\n", "inputFormat": "最多包含 $50$ 行，即你要处理的程序。保证该程序合法。\n", "outputFormat": "警告按照行号从小到大排序。如果同一行内有多个可能未初始化的变量，按照字母顺序从小到大排列。如果没有任何警告信息，你的输出应该为空。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Warning", "background": "", "description": "There is a simple scripting language with only three kinds of statements: assignment, conditional, and return. Variable names must be single uppercase letters, and all variables are 32-bit signed integers.\n\nEach statement of this language must occupy its own line. The program contains no empty lines, and there are no spaces at the beginning or end of any line. Different tokens on the same line are separated by a single space. The BNF of the language is as follows:\n\n```cpp\n<line> :: <head> | <assignment> | <if> | ELSE | END IF | <return>\n<head> :: PARAM <paramlist> | PARAM\n<assignment> :: <variable> = <rvalue>\n<if> :: IF <variable> <relation> <value> THEN\n<return> :: RETURN <value>\n<paramlist> :: <variable> | <variable> <paramlist>\n<rvalue> :: <value> | <value> <operator> <value>\n<value> :: <variable> | <integer>\n<operator> :: + | - | * | /\n<relation> :: < | = | >\n<variable> :: A | B | ... | Z\n<integer> :: 不含前导 0 的 32 位带符号整数\n```\nThe first line of the program is a `<head>` statement that defines the function’s parameters, and the last line is guaranteed to be a `<return>` statement. A `<head>` statement cannot appear anywhere except the first line, but `<return>` statements may appear multiple times in the program. Line numbers start from $1$.\n\nEvery `IF` statement always has a matching `END IF` statement, and may have an optional `ELSE` statement (note that there is no `ELSE IF` statement). `IF` statements may be nested, and they always compare a variable with an integer or another variable.\n\nYou should analyze a given program and output two kinds of warning messages (see the sample output format):\n\n- Type 1 warning: unreachable code lines. These are lines that cannot be executed no matter whether the boolean expressions of the `IF` statements evaluate to true or false (assume that each `IF` condition is independently both possibly true and possibly false, unaffected by other `IF` results).\n\n- Type 2 warning: possibly uninitialized variables. A statement uses the value of some variable, but this variable is neither listed in the parameter list on the first line nor assigned by an assignment statement before this point. If a statement is unreachable, you should not report this warning for it.\n\nNote that the statements `ELSE` and `END IF` are not executable, so they should not receive any warnings.", "inputFormat": "At most $50$ lines, i.e., the program you need to process. The program is guaranteed to be legal.", "outputFormat": "Output warnings sorted by line number in ascending order. If there are multiple possibly uninitialized variables on the same line, list them in alphabetical order. If there are no warnings, your output should be empty.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 警告", "background": "", "description": "有一个简单的脚本语言，只有赋值语句、条件语句和返回语句三种。变量名必须是单个大写字母，且变量都是 $32$ 位带符号整数。\n\n该语言的每条语句必须单独占一行。程序中不含空行，且每行的行首行末均无空格。每行的不同 token 之间用单个空格隔开。该语言的 BNF 如下：\n\n```cpp\n<line> :: <head> | <assignment> | <if> | ELSE | END IF | <return>\n<head> :: PARAM <paramlist> | PARAM\n<assignment> :: <variable> = <rvalue>\n<if> :: IF <variable> <relation> <value> THEN\n<return> :: RETURN <value>\n<paramlist> :: <variable> | <variable> <paramlist>\n<rvalue> :: <value> | <value> <operator> <value>\n<value> :: <variable> | <integer>\n<operator> :: + | - | * | /\n<relation> :: < | = | >\n<variable> :: A | B | ... | Z\n<integer> :: 不含前导 0 的 32 位带符号整数\n```\n程序的第一行是一条 `<head>` 语句，定义了函数的参数，而最后一行一定是 `<return>` 语句。`<head>` 语句不能在除了第一行之外的其他任何地方出现，但 `<return>` 语句可以在程序中多次出现。行号从 $1$ 开始编号。\n每条 `IF` 语句一定有一个配套的 `END IF` 语句，还有一个可选的 `ELSE` 语句（注意没有 `ELSE IF` 语句）。`IF` 语句可以嵌套，它总是比较一个变量和一个整数或者另一个变量。\n\n你应该分析一个给定的程序，并输出两类警告信息（格式见样例输出）：\n\n- 第一类警告：无法到达的代码行。不管各条 `IF` 语句的布尔表达式是真还是假（假设每条 `IF` 语句的布尔表达式都是既可能为真也可能为假，不受其他 `IF` 语句结果影响）。\n\n- 第二类警告：可能未初始化的变量。该语句用到了某个变量的值，但这个变量既不在第一行指定的参数列表里，也没有在此之前由赋值语句赋值过。如果这条语句无法到达，那么不应该给出这类警告。\n\n注意，语句 `ELSE` 和 `END IF` 不是可执行语句，因此不应该收到任何警告信息。\n", "inputFormat": "最多包含 $50$ 行，即你要处理的程序。保证该程序合法。\n", "outputFormat": "警告按照行号从小到大排序。如果同一行内有多个可能未初始化的变量，按照字母顺序从小到大排列。如果没有任何警告信息，你的输出应该为空。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2510", "type": "P", "difficulty": 6, "samples": [["2\r\n1 0 0\r\n1 1 0", "10.472"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "2008", "河南", "各省省选", "极角排序"], "title": "[HAOI2008] 下落的圆盘", "background": "", "description": "有 $n$ 个圆盘从天而降，后面落下的可以盖住前面的。求最后形成的封闭区域的周长。看下面这副图, 所有的红色线条的总长度即为所求.\n\n![](https://cdn.luogu.com.cn/upload/pic/1628.png)", "inputFormat": "第一行一个数 $n$，后 $n$ 行每行三个数表示 $r_i,x_i,y_i$。", "outputFormat": "最后的周长，保留三位小数。", "hint": "数据规模：\n\n$n\\le1000$", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2008] Falling Disks", "background": "", "description": "There are n disks falling from the sky, and those that fall later can cover those that fell earlier. Find the perimeter of the final closed region formed. See the figure below; the total length of all the red curves is the required answer.\n\n![](https://cdn.luogu.com.cn/upload/pic/1628.png)", "inputFormat": "The first line contains an integer n.\n\nEach of the next n lines contains three real numbers r_i, x_i, y_i, representing the radius and the center coordinates of the i-th disk.", "outputFormat": "Output the final perimeter, to three decimal places.", "hint": "Constraints\n\n1 ≤ n ≤ 1000.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2008] 下落的圆盘", "background": "", "description": "有 $n$ 个圆盘从天而降，后面落下的可以盖住前面的。求最后形成的封闭区域的周长。看下面这副图, 所有的红色线条的总长度即为所求.\n\n![](https://cdn.luogu.com.cn/upload/pic/1628.png)", "inputFormat": "第一行一个数 $n$，后 $n$ 行每行三个数表示 $r_i,x_i,y_i$。", "outputFormat": "最后的周长，保留三位小数。", "hint": "数据规模：\n\n$n\\le1000$", "locale": "zh-CN"}}}
{"pid": "P2511", "type": "P", "difficulty": 5, "samples": [["3 2                           \n1 \n1\n10", "10 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "2008", "河南", "二分", "各省省选", "前缀和"], "title": "[HAOI2008] 木棍分割", "background": null, "description": "有 $n$ 根木棍，第 $i$ 根木棍的长度为 $L_i$，$n$ 根木棍依据编号次序（即最左边是第 $1$ 根木棍，然后是第 $2$ 根木棍，以此类推）连接在一起，总共有 $n-1$ 个连接处。现在允许你**最多**砍断 $m$ 个连接处，砍完后 $n$ 根木棍被分成了很多段，要求满足总长度最大的一段长度最小。\n\n输出总长度最大的一段长度的最小值，并且输出使总长度最大的一段长度最小的方案总数除以 $10007$ 的余数。", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，第 $i$ 行一个正整数 $L_i$，表示第 $i$ 根木棍的长度。", "outputFormat": "输出 $2$ 个整数，第一个整数是总长度最大的一段长度的最小值，第二个整数是使总长度最大的一段长度最小的方案总数除以 $10007$ 的余数。", "hint": "### 样例解释\n\n可以砍 $1$ 下分成 $1,1$ 和 $10$ 两个部分，也可以砍 $2$ 下分成 $1$、$1$ 和 $10$ 三个部分。\n\n### 数据范围\n\n对于所有的数据，$n \\le 50000,\\ 0\\le m\\le \\min(n-1,1000),\\ 1\\le L_i\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2008] Stick Segmentation", "background": "", "description": "There are $n$ sticks. The length of the $i$-th stick is $L_i$. The $n$ sticks are connected in the order of their indices (that is, the leftmost is the $1$-st stick, then the $2$-nd stick, and so on). There are $n-1$ joints in total. You are allowed to cut at most $m$ joints. After cutting, the $n$ sticks are divided into several segments. The requirement is to minimize the length of the longest segment.\n\nOutput the minimum possible value of the length of the longest segment, and the remainder of the number of schemes that achieve this minimum when divided by $10007$.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThe next $n$ lines each contain a positive integer $L_i$, representing the length of the $i$-th stick.", "outputFormat": "Output $2$ integers: the minimum possible value of the length of the longest segment, and the remainder of the number of schemes that achieve this minimum when divided by $10007$.", "hint": "### Sample Explanation\n\nYou can cut once to split into two parts of total lengths $1, 1$ and $10$, or cut twice to split into three parts of total lengths $1$, $1$, and $10$.\n\n### Constraints\n\nFor all testdata, $n \\le 50000,\\ 0 \\le m \\le \\min(n-1, 1000),\\ 1 \\le L_i \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2008] 木棍分割", "background": null, "description": "有 $n$ 根木棍，第 $i$ 根木棍的长度为 $L_i$，$n$ 根木棍依据编号次序（即最左边是第 $1$ 根木棍，然后是第 $2$ 根木棍，以此类推）连接在一起，总共有 $n-1$ 个连接处。现在允许你**最多**砍断 $m$ 个连接处，砍完后 $n$ 根木棍被分成了很多段，要求满足总长度最大的一段长度最小。\n\n输出总长度最大的一段长度的最小值，并且输出使总长度最大的一段长度最小的方案总数除以 $10007$ 的余数。", "inputFormat": "第一行，两个正整数 $n,m$。\n\n接下来 $n$ 行，第 $i$ 行一个正整数 $L_i$，表示第 $i$ 根木棍的长度。", "outputFormat": "输出 $2$ 个整数，第一个整数是总长度最大的一段长度的最小值，第二个整数是使总长度最大的一段长度最小的方案总数除以 $10007$ 的余数。", "hint": "### 样例解释\n\n可以砍 $1$ 下分成 $1,1$ 和 $10$ 两个部分，也可以砍 $2$ 下分成 $1$、$1$ 和 $10$ 三个部分。\n\n### 数据范围\n\n对于所有的数据，$n \\le 50000,\\ 0\\le m\\le \\min(n-1,1000),\\ 1\\le L_i\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2512", "type": "P", "difficulty": 5, "samples": [["4\n1\n2\n5\n4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "贪心", "2008", "河南", "各省省选", "前缀和"], "title": "[HAOI2008] 糖果传递", "background": null, "description": "有 $n$ 个小朋友坐成一圈，每人有 $a_i$ 个糖果。每人只能给左右两人传递糖果。每人每次传递一个糖果代价为 $1$。", "inputFormat": "小朋友个数 $n$，下面 $n$ 行 $a_i$。", "outputFormat": "求使所有人获得均等糖果的最小代价。", "hint": "对于 $100\\%$ 的数据 $1 \\leq n\\le 10^6$，$1 \\leq a _ i \\leq 1.5 \\times 10 ^ 9$，$\\sum_{i=1}^{n}{a_i}$ 是 $n$ 的倍数。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2008] Candy Passing", "background": "", "description": "There are $n$ children sitting in a circle, each with $a_i$ candies. Each child can only pass candies to their left and right neighbors. The cost of passing one candy each time is $1$.", "inputFormat": "The first line contains $n$. Each of the next $n$ lines contains $a_i$.", "outputFormat": "Output the minimum cost to make all children have the same number of candies.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le n \\le 10^6$, $1 \\le a_i \\le 1.5 \\times 10^9$, and $\\sum_{i=1}^{n}{a_i}$ is a multiple of $n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2008] 糖果传递", "background": null, "description": "有 $n$ 个小朋友坐成一圈，每人有 $a_i$ 个糖果。每人只能给左右两人传递糖果。每人每次传递一个糖果代价为 $1$。", "inputFormat": "小朋友个数 $n$，下面 $n$ 行 $a_i$。", "outputFormat": "求使所有人获得均等糖果的最小代价。", "hint": "对于 $100\\%$ 的数据 $1 \\leq n\\le 10^6$，$1 \\leq a _ i \\leq 1.5 \\times 10 ^ 9$，$\\sum_{i=1}^{n}{a_i}$ 是 $n$ 的倍数。", "locale": "zh-CN"}}}
{"pid": "P2513", "type": "P", "difficulty": 3, "samples": [["4 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2009", "河南", "各省省选", "数位 DP", "前缀和"], "title": "[HAOI2009] 逆序对数列", "background": null, "description": "对于一个数列 $\\{a_i\\}$，如果有 $i<j$ 且 $a_i>a_j$，那么我们称 $a_i$ 与 $a_j$ 为一对逆序对数。\n\n若对于任意一个由 $1 \\sim n$ 自然数组成的数列，可以很容易求出有多少个逆序对数。那么逆序对数为 $k$ 的这样自然数数列到底有多少个？", "inputFormat": "第一行为两个整数 $n,k$。", "outputFormat": "写入一个整数，表示符合条件的数列个数，由于这个数可能很大，你只需输出该数对 $10000$ 求余数后的结果。", "hint": "**【样例说明】**\n\n下列 $3$ 个数列逆序对数都为 $1$：分别是 $\\{1,2,4,3\\}$；$\\{1,3,2,4\\}$；$\\{2,1,3,4\\}$；\n\n**【测试数据范围】**\n\n- $30\\%$ 的数据 $n\\le 12$。\n\n- $100\\%$ 的数据 $n\\le 1000$，$k\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2009] Inversion Count Sequence", "background": "", "description": "For a sequence $\\{a_i\\}$, if $i < j$ and $a_i > a_j$, then we call $a_i$ and $a_j$ an inversion pair.\n\nFor any sequence formed by the natural numbers $1 \\sim n$ (i.e., a permutation), it is easy to compute how many inversions it has. How many such sequences have exactly $k$ inversions?", "inputFormat": "The first line contains two integers $n, k$.", "outputFormat": "Output a single integer: the number of sequences that satisfy the condition. Since this number can be very large, you only need to output the result modulo $10000$.", "hint": "【Sample Explanation】\n\nThe following $3$ sequences each have exactly $1$ inversion: $\\{1,2,4,3\\}$; $\\{1,3,2,4\\}$; $\\{2,1,3,4\\}$.\n\nConstraints\n\n- For $30\\%$ of the testdata, $n \\le 12$.\n- For $100\\%$ of the testdata, $n \\le 1000$, $k \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2009] 逆序对数列", "background": null, "description": "对于一个数列 $\\{a_i\\}$，如果有 $i<j$ 且 $a_i>a_j$，那么我们称 $a_i$ 与 $a_j$ 为一对逆序对数。\n\n若对于任意一个由 $1 \\sim n$ 自然数组成的数列，可以很容易求出有多少个逆序对数。那么逆序对数为 $k$ 的这样自然数数列到底有多少个？", "inputFormat": "第一行为两个整数 $n,k$。", "outputFormat": "写入一个整数，表示符合条件的数列个数，由于这个数可能很大，你只需输出该数对 $10000$ 求余数后的结果。", "hint": "**【样例说明】**\n\n下列 $3$ 个数列逆序对数都为 $1$：分别是 $\\{1,2,4,3\\}$；$\\{1,3,2,4\\}$；$\\{2,1,3,4\\}$；\n\n**【测试数据范围】**\n\n- $30\\%$ 的数据 $n\\le 12$。\n\n- $100\\%$ 的数据 $n\\le 1000$，$k\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2514", "type": "P", "difficulty": 5, "samples": [["4 2 7 9 \n3 1 10 3 \n6 3 7 1 10 2 7 4 9 \n1 2 4 3 \n6 6 8 2 \n4 10 8 4 \n10 2 9 2 \n7 6 6 2 \n9 3 7 1 \n2 1 6 9 \n3 1 10 9 \n4 2 1 8 \n2 1 3 4 ", "8 \n49 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "河南", "各省省选"], "title": "[HAOI2010] 工厂选址", "background": "", "description": "某地区有 $m$ 座煤矿，其中第 $i$ 号矿每年产量为 $a_i$ 吨。现有一火力发电厂，每年需用煤恰好 $b$ 吨，每年运行的固定费用（不包括煤的运费）为 $h$ 元，每吨原煤从第 $i$ 号矿运到火力发电厂的运费为 $C_{i,0}$ 元。\n\n现规划新建一个发电厂， $m$ 座煤矿每年开采的原煤将全部供给这两座发电厂。有 $n$ 个备选的新发电厂厂址，若在第 $j$ 号备选厂址建新厂，每年运行的固定费用为 $h_j$ 元；每吨原煤从第 $i$ 号矿运到第 $j$ 号备选厂址的运费为 $C_{i,j}$ 元。\n\n试问：应如何选取新厂厂址并分配 $m$ 座煤矿开采的原煤，才能使每年的总费用（发电厂运行费用与原煤运费之和）最小。", "inputFormat": "第一行四个整数 $m,b,h,n$。\n\n接下来一行 $m$ 个整数 $a_1,a_2,...,a_m$ 表示每一处煤矿的年产量。\n\n接下来一行 $n$ 个整数 $h_1,h_2,...,h_n$ 表示新厂建在每一个位置的固定费用。\n\n接下来 $n+1$ 行每行 $m$ 个正整数，第 $i$ 行描述 $C_{1,i-1} , C_{2,i-1} , ... , C_{m , i-1}$的值。", "outputFormat": "第一行一个整数表示选择的新发电厂的厂址编号，如有多个厂址满足条件，输出最小的一个；\n\n第二行一个整数表示最小的年总费用。", "hint": "对于$100 \\%$的数据，$1 \\leq m \\leq 5 \\times 10^4$，$1 \\leq b \\leq 10^4$，$1 \\leq n \\leq 50$，$0 \\leq h , h_i \\leq 100$，$0 \\leq a_i \\leq 500$，$\\sum\\limits_{i=1}^m a_i \\geq b$，$0 \\leq C_{i,j} \\leq 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2010] Factory Location", "background": "", "description": "There are $m$ coal mines in a region, where the $i$-th mine produces $a_i$ tons per year. There is an existing thermal power plant that requires exactly $b$ tons of coal per year. Its fixed annual operating cost (excluding coal transportation) is $h$ yuan. The transportation cost per ton of raw coal from the $i$-th mine to the existing plant is $C_{i,0}$ yuan.\n\nA new power plant is planned to be built. All raw coal mined from the $m$ mines will be entirely supplied to these two power plants. There are $n$ candidate sites for the new plant. If the new plant is built at the $j$-th candidate site, its fixed annual operating cost is $h_j$ yuan, and the transportation cost per ton of raw coal from the $i$-th mine to the $j$-th candidate site is $C_{i,j}$ yuan.\n\nQuestion: Which site should be selected for the new plant, and how should the raw coal from the $m$ mines be allocated to the two plants, so that the total annual cost (the sum of the plants’ operating costs and the coal transportation costs) is minimized?", "inputFormat": "The first line contains four integers $m, b, h, n$.\n\nThe next line contains $m$ integers $a_1, a_2, \\ldots, a_m$, representing the annual output of each coal mine.\n\nThe next line contains $n$ integers $h_1, h_2, \\ldots, h_n$, representing the fixed cost if the new plant is built at each candidate site.\n\nThe next $n+1$ lines each contain $m$ positive integers. The $i$-th line describes the values of $C_{1,i-1} , C_{2,i-1} , \\ldots , C_{m , i-1}$.", "outputFormat": "The first line contains one integer, the index of the selected site for the new power plant. If multiple sites satisfy the condition, output the smallest index.\n\nThe second line contains one integer, the minimal total annual cost.", "hint": "For $100 \\%$ of the testdata (Constraints): $1 \\leq m \\leq 5 \\times 10^4$, $1 \\leq b \\leq 10^4$, $1 \\leq n \\leq 50$, $0 \\leq h , h_i \\leq 100$, $0 \\leq a_i \\leq 500$, $\\sum\\limits_{i=1}^m a_i \\geq b$, $0 \\leq C_{i,j} \\leq 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2010] 工厂选址", "background": "", "description": "某地区有 $m$ 座煤矿，其中第 $i$ 号矿每年产量为 $a_i$ 吨。现有一火力发电厂，每年需用煤恰好 $b$ 吨，每年运行的固定费用（不包括煤的运费）为 $h$ 元，每吨原煤从第 $i$ 号矿运到火力发电厂的运费为 $C_{i,0}$ 元。\n\n现规划新建一个发电厂， $m$ 座煤矿每年开采的原煤将全部供给这两座发电厂。有 $n$ 个备选的新发电厂厂址，若在第 $j$ 号备选厂址建新厂，每年运行的固定费用为 $h_j$ 元；每吨原煤从第 $i$ 号矿运到第 $j$ 号备选厂址的运费为 $C_{i,j}$ 元。\n\n试问：应如何选取新厂厂址并分配 $m$ 座煤矿开采的原煤，才能使每年的总费用（发电厂运行费用与原煤运费之和）最小。", "inputFormat": "第一行四个整数 $m,b,h,n$。\n\n接下来一行 $m$ 个整数 $a_1,a_2,...,a_m$ 表示每一处煤矿的年产量。\n\n接下来一行 $n$ 个整数 $h_1,h_2,...,h_n$ 表示新厂建在每一个位置的固定费用。\n\n接下来 $n+1$ 行每行 $m$ 个正整数，第 $i$ 行描述 $C_{1,i-1} , C_{2,i-1} , ... , C_{m , i-1}$的值。", "outputFormat": "第一行一个整数表示选择的新发电厂的厂址编号，如有多个厂址满足条件，输出最小的一个；\n\n第二行一个整数表示最小的年总费用。", "hint": "对于$100 \\%$的数据，$1 \\leq m \\leq 5 \\times 10^4$，$1 \\leq b \\leq 10^4$，$1 \\leq n \\leq 50$，$0 \\leq h , h_i \\leq 100$，$0 \\leq a_i \\leq 500$，$\\sum\\limits_{i=1}^m a_i \\geq b$，$0 \\leq C_{i,j} \\leq 50$。", "locale": "zh-CN"}}}
{"pid": "P2515", "type": "P", "difficulty": 5, "samples": [["3 10\n5 5 6\n2 3 4\n0 1 1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2010", "河南", "各省省选", "背包 DP", "树形 DP", "强连通分量", "Tarjan", "基环树"], "title": "[HAOI2010] 软件安装", "background": "", "description": "现在我们的手头有 $N$ 个软件，对于一个软件 $i$，它要占用 $W_i$ 的磁盘空间，它的价值为 $V_i$。我们希望从中选择一些软件安装到一台磁盘容量为 $M$ 计算机上，使得这些软件的价值尽可能大（即 $V_i$ 的和最大）。\n\n但是现在有个问题：软件之间存在依赖关系，即软件 $i$ 只有在安装了软件 $j$（包括软件 $j$ 的直接或间接依赖）的情况下才能正确工作（软件 $i$ 依赖软件 $j$)。幸运的是，一个软件最多依赖另外一个软件。如果一个软件不能正常工作，那么它能够发挥的作用为 $0$。\n\n\n我们现在知道了软件之间的依赖关系：软件 $i$ 依赖软件 $D_i$。现在请你设计出一种方案，安装价值尽量大的软件。一个软件只能被安装一次，如果一个软件没有依赖则 $D_i=0$，这时只要这个软件安装了，它就能正常工作。", "inputFormat": "第 1 行：$N,M(0\\leq N\\leq 100, 0\\leq M\\leq 500)$\n\n第 2 行：$W_1,W_2, ... W_i, ..., W_n (0\\leq W_i\\leq M)$\n\n第 3 行：$V_1, V_2, ..., V_i, ..., V_n  (0\\leq V_i\\leq 1000)$\n\n第 4 行：$D_1, D_2, ..., D_i, ..., D_n (0\\leq D_i\\leq N, D_i≠i)$", "outputFormat": "一个整数，代表最大价值。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2010] Software Installation", "background": "", "description": "We have $N$ software packages. For a software $i$, it occupies $W_i$ units of disk space, and its value is $V_i$. We want to choose some software to install on a computer with disk capacity $M$, so that the total value of the installed software is as large as possible (i.e., the sum of $V_i$ is maximized).\n\nHowever, there is a problem: there are dependency relationships between software. Software $i$ can work properly only if software $j$ (including software $j$’s direct or indirect dependencies) is installed (software $i$ depends on software $j$). Fortunately, a software depends on at most one other software. If a software cannot work properly, then its contribution is $0$.\n\nWe already know the dependencies between software: software $i$ depends on $D_i$. Please design a plan to install software so that the total value is as large as possible. Each software can be installed at most once. If a software has no dependency, then $D_i=0$; in this case, as long as this software is installed, it will work properly.", "inputFormat": "Line 1: $N,M(0\\leq N\\leq 100, 0\\leq M\\leq 500)$\n\nLine 2: $W_1,W_2, ... W_i, ..., W_n (0\\leq W_i\\leq M)$\n\nLine 3: $V_1, V_2, ..., V_i, ..., V_n  (0\\leq V_i\\leq 1000)$\n\nLine 4: $D_1, D_2, ..., D_i, ..., D_n (0\\leq D_i\\leq N, D_i≠i)$", "outputFormat": "An integer representing the maximum total value.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2010] 软件安装", "background": "", "description": "现在我们的手头有 $N$ 个软件，对于一个软件 $i$，它要占用 $W_i$ 的磁盘空间，它的价值为 $V_i$。我们希望从中选择一些软件安装到一台磁盘容量为 $M$ 计算机上，使得这些软件的价值尽可能大（即 $V_i$ 的和最大）。\n\n但是现在有个问题：软件之间存在依赖关系，即软件 $i$ 只有在安装了软件 $j$（包括软件 $j$ 的直接或间接依赖）的情况下才能正确工作（软件 $i$ 依赖软件 $j$)。幸运的是，一个软件最多依赖另外一个软件。如果一个软件不能正常工作，那么它能够发挥的作用为 $0$。\n\n\n我们现在知道了软件之间的依赖关系：软件 $i$ 依赖软件 $D_i$。现在请你设计出一种方案，安装价值尽量大的软件。一个软件只能被安装一次，如果一个软件没有依赖则 $D_i=0$，这时只要这个软件安装了，它就能正常工作。", "inputFormat": "第 1 行：$N,M(0\\leq N\\leq 100, 0\\leq M\\leq 500)$\n\n第 2 行：$W_1,W_2, ... W_i, ..., W_n (0\\leq W_i\\leq M)$\n\n第 3 行：$V_1, V_2, ..., V_i, ..., V_n  (0\\leq V_i\\leq 1000)$\n\n第 4 行：$D_1, D_2, ..., D_i, ..., D_n (0\\leq D_i\\leq N, D_i≠i)$", "outputFormat": "一个整数，代表最大价值。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2516", "type": "P", "difficulty": 5, "samples": [["ABCBDAB.\nBACBBD.", "4\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "2010", "河南", "各省省选", "容斥原理"], "title": "[HAOI2010] 最长公共子序列", "background": null, "description": "字符序列的子序列是指从给定字符序列中随意地（不一定连续）去掉若干个字符（可能一个也不去掉）后所形成的字符序列。令给定的字符序列 $X=\\{x_0,x_1,\\cdots ,x_{m-1}\\}$，序列 $Y=\\{y_0,y_1,\\cdots ,y_{k-1}\\}$ 是 $X$ 的子序列，当且仅当存在 $X$ 的一个严格递增下标序列 $\\{i_0,i_1,\\cdots,i_{k-1}\\}$ ，使得对所有的 $j=0,1,\\cdots,k-1$ ，有 $x_{i_j}=y_j$ 。例如，$X=\\verb!\"ABCBDAB\"!$ ，$Y=\\verb!\"BCDB\"!$ 是 $X$ 的一个子序列。对给定的两个字符序列，求出他们最长的公共子序列长度，以及最长公共子序列个数。其中，两个子序列 $i$ 和 $j$ 不同，当且仅当长度不同或子序列中 $\\exist k, i_k \\neq j_k$。", "inputFormat": "第一行为第一个字符序列，都是大写字母组成，以 `.` 结束，大写字母个数不超过 $5000$。\n\n第二行为第二个字符序列，都是大写字母组成，以 `.` 结束，大写字母个数不超过 $5000$。", "outputFormat": "第一行输出上述两个最长公共子序列的长度。\n\n第二行输出所有可能出现的最长公共子序列个数，答案可能很大，只要将答案对 $10^{8}$ 求余即可。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2010] Longest Common Subsequence", "background": "", "description": "A subsequence of a character sequence is a character sequence formed by arbitrarily deleting any number of characters (possibly zero), not necessarily contiguous, from the given sequence. Let the given character sequence be $X=\\{x_0,x_1,\\cdots,x_{m-1}\\}$, and let $Y=\\{y_0,y_1,\\cdots,y_{k-1}\\}$ be a subsequence of $X$ if and only if there exists a strictly increasing index sequence $\\{i_0,i_1,\\cdots,i_{k-1}\\}$ of $X$ such that for all $j=0,1,\\cdots,k-1$, we have $x_{i_j}=y_j$. For example, $X=\\verb!\"ABCBDAB\"!$, and $Y=\\verb!\"BCDB\"!$ is a subsequence of $X$. For two given character sequences, compute the length of their longest common subsequence, and the number of longest common subsequences. Two subsequences $i$ and $j$ are different if and only if their lengths are different, or there exists $\\exists k$ such that $i_k \\neq j_k$.", "inputFormat": "The first line is the first character sequence, consisting of uppercase letters, ending with `.`. The number of uppercase letters does not exceed $5000$.\n\nThe second line is the second character sequence, consisting of uppercase letters, ending with `.`. The number of uppercase letters does not exceed $5000$.", "outputFormat": "On the first line, output the length of the longest common subsequence of the two sequences.\n\nOn the second line, output the number of all possible longest common subsequences. The answer may be large; output the answer modulo $10^{8}$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2010] 最长公共子序列", "background": null, "description": "字符序列的子序列是指从给定字符序列中随意地（不一定连续）去掉若干个字符（可能一个也不去掉）后所形成的字符序列。令给定的字符序列 $X=\\{x_0,x_1,\\cdots ,x_{m-1}\\}$，序列 $Y=\\{y_0,y_1,\\cdots ,y_{k-1}\\}$ 是 $X$ 的子序列，当且仅当存在 $X$ 的一个严格递增下标序列 $\\{i_0,i_1,\\cdots,i_{k-1}\\}$ ，使得对所有的 $j=0,1,\\cdots,k-1$ ，有 $x_{i_j}=y_j$ 。例如，$X=\\verb!\"ABCBDAB\"!$ ，$Y=\\verb!\"BCDB\"!$ 是 $X$ 的一个子序列。对给定的两个字符序列，求出他们最长的公共子序列长度，以及最长公共子序列个数。其中，两个子序列 $i$ 和 $j$ 不同，当且仅当长度不同或子序列中 $\\exist k, i_k \\neq j_k$。", "inputFormat": "第一行为第一个字符序列，都是大写字母组成，以 `.` 结束，大写字母个数不超过 $5000$。\n\n第二行为第二个字符序列，都是大写字母组成，以 `.` 结束，大写字母个数不超过 $5000$。", "outputFormat": "第一行输出上述两个最长公共子序列的长度。\n\n第二行输出所有可能出现的最长公共子序列个数，答案可能很大，只要将答案对 $10^{8}$ 求余即可。", "hint": null, "locale": "zh-CN"}}}
