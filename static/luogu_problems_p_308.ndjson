{"pid": "P7231", "type": "P", "difficulty": 5, "samples": [["3 1\n2 7 6\n9 5 1\n4 3 8\n", "31"], ["4 2\n1 2 4 0\n4 0 5 4\n0 3 5 1\n1 0 4 1\n", "17"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2015", "网络流", "最短路", "费用流", "前缀和", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #3] DOMINO", "background": "「誕生日おめでとう！!」\n\n小 M 收到了他女朋友的生日祝福和一份礼物。", "description": "小 M 的女朋友送小 M 了一张 $n \\times n$ 的表格作为生日礼物，在表格的每个单元格中都写有一个非负整数。\n\n不幸的是，有些单元格里数字太大了，小 M 不喜欢它们，所以他将在表格上面放置 $k$ 张骨牌，将覆盖那些数字太大的单元格。\n\n更准确地说，小 M 按照以下规则放置骨牌。\n\n- 骨牌为 $1\\times 2$ 的矩形，不能拆开放置。\n- 骨牌不重叠（但可以接触）。\n- 所有可见（未覆盖）字段的总和需要尽可能的小。\n\n您的任务是确定最小可见区域的数字的总和。数据保证可放置 $k$ 个骨牌且无重叠。", "inputFormat": "第一行，$2$ 个正整数 $n,k$，$n$ 表示表格的尺寸， $k$ 表示骨牌的数量。\n\n接下来 $n$ 行，每一行都有 $n$ 个整数 $a_i$。这些 $n \\times n$ 的数字的数字描述了 Mirko 的表格。", "outputFormat": "一行一个整数，最小可见区域的数字的总和。", "hint": "#### 数据规模及约定\n对于 $100\\%$ 的数据，$1\\le n \\le 2 \\times 10 ^ 3$，$1\\le k \\le 8$，$0 \\le a_i \\le 10 ^ 3$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 F DOMINO](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 160。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] DOMINO", "background": "「誕生日おめでとう！!」\n\n小 M 收到了他女朋友的生日祝福和一份礼物。", "description": "小 M 的女朋友送小 M 了一张 $n \\times n$ 的表格作为生日礼物，在表格的每个单元格中都写有一个非负整数。\n\n不幸的是，有些单元格里数字太大了，小 M 不喜欢它们，所以他将在表格上面放置 $k$ 张骨牌，将覆盖那些数字太大的单元格。\n\n更准确地说，小 M 按照以下规则放置骨牌。\n\n- 骨牌为 $1\\times 2$ 的矩形，不能拆开放置。\n- 骨牌不重叠（但可以接触）。\n- 所有可见（未覆盖）字段的总和需要尽可能的小。\n\n您的任务是确定最小可见区域的数字的总和。数据保证可放置 $k$ 个骨牌且无重叠。", "inputFormat": "第一行，$2$ 个正整数 $n,k$，$n$ 表示表格的尺寸， $k$ 表示骨牌的数量。\n\n接下来 $n$ 行，每一行都有 $n$ 个整数 $a_i$。这些 $n \\times n$ 的数字的数字描述了 Mirko 的表格。", "outputFormat": "一行一个整数，最小可见区域的数字的总和。", "hint": "#### 数据规模及约定\n对于 $100\\%$ 的数据，$1\\le n \\le 2 \\times 10 ^ 3$，$1\\le k \\le 8$，$0 \\le a_i \\le 10 ^ 3$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 F DOMINO](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 160。", "locale": "zh-CN"}}}
{"pid": "P7232", "type": "P", "difficulty": 0, "samples": [["9\n2 5 1 2 1\n2 3 1 6 1\n2 7 1 4 1\n2 8 1 9 1\n0\n0\n0\n0\n0", "8"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "各省省选", "江苏", "树形 DP"], "title": "[JSOI2014] 支线剧情 2", "background": "", "description": "宅男 JYY 非常喜欢玩 RPG 游戏，并且 JYY 总是想花费最少的时间看完所有的支线剧情。最近JYY买了一款新的正版 RPG 游戏,所以 JYY 总算可以“读档”和“存档”了！\n\nJYY 现在所玩的 RPG 游戏中，一共有 $n$ 个剧情点，由 $1$ 到 $n$ 编号，第 $i$ 个剧情点可以根据 JYY 的不同的选择，而经过不同的支线剧情，前往 $k_i$ 种不同的新的剧情点。当然如果 $k_i$ 为 $0$，则说明 $i$ 号剧情点是游戏的一个结局了。\n\n\nJYY 观看一个支线剧情需要一定的时间。JYY—开始处在 $1$ 号剧情点，也就是游戏的开始。JYY 买的这款游戏很特殊，从游戏开始到达任何一个剧情点的支线路径都是唯一的。而且，任何一个剧情点都是从 $1$ 号剧情点可达的。\n\n与上一款 RPG 游戏一样，JYY 可以在任意时刻选择重新开始游戏，即回到 $1$ 号剧情点。不过有些不同的是，这次 JYY 买的是正版软件，每当 JYY 到达一个剧情点，JYY 都可以进行“存档”和“读档”。但是很遗憾的是，JYY 的 RPG 游戏只有一个存档的位置：每次“存档”操作都会覆盖之前的存档。比如，如果 JYY 在 $x$ 号剧情点进行了“存档”操作，那么此后当 JYY 到达任何一个剧情点（包括结局）都可以“读档”并立即回到 $x$号剧情点。但是如果之后 JYY 在 $y$ 号剧情点又进行了“存档”，那么 JYY 再进行“读档”，就只能回到 $y$ 号剧情点了。\n\n一开始存档位置里没有存储任何信息，所以 JYY 只有在进行一次“存档”操作之后才可以进行“读档”操作，并且“读档”，“存档”和“重新开始”都是不需要花费时间的。\n\n\n重复观看己经看过的剧情是很痛苦的，JYY 希望花费最少的时间，看完所有不同的支线剧情。", "inputFormat": "第一行为一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行为第 $i$ 号剧情点的信息。\n\n每一行第一个非负整数为 $k_i$。接下来 $k_i$ 个整数对，$b_{i,j}$ 和 $t_{i,j}$，表示从剧情点 $i$ 可以前往剧情点 $b_{i,j}$，并且观看这段支线剧情需要花费 $t_{i,j}$ 的时间。", "outputFormat": "一行一个整数，表示 JYY 看完所有支线剧情所需要的最少时间。", "hint": "### 样例解释 1\n\n最佳路线为：\n\n从 $1$ 前往 $5$，然后重新开始。\n\n从 $1$ 前往 $2$，在 $2$ 处存档，再前往 $6$，并读档。\n\n从 $2$ 前往 $3$，在 $3$ 处存档，再前往 $7$，并读档。\n\n从 $3$ 前往 $4$，在 $4$ 处存档，再前往 $8$，并读档。\n\n最后前往 $9$，花费时间为 $8$。可以证明没有比 $8$ 更小的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq t_{i,j}\\leq 10^4,\\sum\\limits_{i=1}^{n}k_i=n-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 支线剧情 2", "background": "", "description": "宅男 JYY 非常喜欢玩 RPG 游戏，并且 JYY 总是想花费最少的时间看完所有的支线剧情。最近JYY买了一款新的正版 RPG 游戏,所以 JYY 总算可以“读档”和“存档”了！\n\nJYY 现在所玩的 RPG 游戏中，一共有 $n$ 个剧情点，由 $1$ 到 $n$ 编号，第 $i$ 个剧情点可以根据 JYY 的不同的选择，而经过不同的支线剧情，前往 $k_i$ 种不同的新的剧情点。当然如果 $k_i$ 为 $0$，则说明 $i$ 号剧情点是游戏的一个结局了。\n\n\nJYY 观看一个支线剧情需要一定的时间。JYY—开始处在 $1$ 号剧情点，也就是游戏的开始。JYY 买的这款游戏很特殊，从游戏开始到达任何一个剧情点的支线路径都是唯一的。而且，任何一个剧情点都是从 $1$ 号剧情点可达的。\n\n与上一款 RPG 游戏一样，JYY 可以在任意时刻选择重新开始游戏，即回到 $1$ 号剧情点。不过有些不同的是，这次 JYY 买的是正版软件，每当 JYY 到达一个剧情点，JYY 都可以进行“存档”和“读档”。但是很遗憾的是，JYY 的 RPG 游戏只有一个存档的位置：每次“存档”操作都会覆盖之前的存档。比如，如果 JYY 在 $x$ 号剧情点进行了“存档”操作，那么此后当 JYY 到达任何一个剧情点（包括结局）都可以“读档”并立即回到 $x$号剧情点。但是如果之后 JYY 在 $y$ 号剧情点又进行了“存档”，那么 JYY 再进行“读档”，就只能回到 $y$ 号剧情点了。\n\n一开始存档位置里没有存储任何信息，所以 JYY 只有在进行一次“存档”操作之后才可以进行“读档”操作，并且“读档”，“存档”和“重新开始”都是不需要花费时间的。\n\n\n重复观看己经看过的剧情是很痛苦的，JYY 希望花费最少的时间，看完所有不同的支线剧情。", "inputFormat": "第一行为一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行为第 $i$ 号剧情点的信息。\n\n每一行第一个非负整数为 $k_i$。接下来 $k_i$ 个整数对，$b_{i,j}$ 和 $t_{i,j}$，表示从剧情点 $i$ 可以前往剧情点 $b_{i,j}$，并且观看这段支线剧情需要花费 $t_{i,j}$ 的时间。", "outputFormat": "一行一个整数，表示 JYY 看完所有支线剧情所需要的最少时间。", "hint": "### 样例解释 1\n\n最佳路线为：\n\n从 $1$ 前往 $5$，然后重新开始。\n\n从 $1$ 前往 $2$，在 $2$ 处存档，再前往 $6$，并读档。\n\n从 $2$ 前往 $3$，在 $3$ 处存档，再前往 $7$，并读档。\n\n从 $3$ 前往 $4$，在 $4$ 处存档，再前往 $8$，并读档。\n\n最后前往 $9$，花费时间为 $8$。可以证明没有比 $8$ 更小的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq t_{i,j}\\leq 10^4,\\sum\\limits_{i=1}^{n}k_i=n-1$。", "locale": "zh-CN"}}}
{"pid": "P7233", "type": "P", "difficulty": 6, "samples": [["5\n0 1 7 10\n0 -1 7 10\n5 0 1 -15\n10 0 6 10\n15 1 2 -20", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "各省省选", "网络流", "江苏", "最小割"], "title": "[JSOI2014] 电信网络", "background": "", "description": "JYY 创建的电信公司，垄断着整个 JSOI 王国的电信网络。JYY在 JSOI 王国里建造了很多的通信基站。目前所有的基站都是使用 2G 网络系统的。而现在 3G 时代已经到来了，JYY 在思考，要不要把一些基站升级成 3G 网络的呢？\n\nJSOI王国可以被看作为一个无穷大的二维平面，JYY 一共建造了 $n$ 个通信基站，第 $i$ 个基站的坐标是 $(x_i,y_i)$。每个基站有一个通信范围 $r_i$。第 $i$ 号基站会向所有到其距离不超过 $r_i$ 的基站发送信息。\n\n每个基站升级到 3G 网络都会有一个收益 $s_i$，这个收益可能是正数（比如基站附近有个大城市，用户很多，赚的流量费也就很多了），也可能是负数（比如基站周围市场不佳，收益不能填补升级基站本身的投资）。此外，由于原有的使用 2G 网络系统的基站无法解析从升级成 3G 网络系统的基站所发来的信息（但是升级之后的基站是可以解析未升级基站发来的信息的），所以JYY必须使得在升级工作全部完成之后，所有使用3G网络的基站，其通信范围内的基站，也都是使用 3G 网络的。\n\n由于基站数量很多，你可以帮助 JYY 计算一下，他通过升级基站，最多能获得的收益是多少吗？", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行 $4$ 个整数 $x_i,y_i,r_i,s_i$，表示处在 $(x_i,y_i)$ 的基站的通信范围是 $r_i$，升级可以获得的收益是 $s_i$。\n\n数据满足任意两个基站的坐标不同。", "outputFormat": "一行一个整数，表示可以获得的最大收益。", "hint": "### 样例解释 1\n\n将前三座基站升级可以获得最大收益。\n\n### 数据范围\n\n$1\\leq n\\leq 500,1\\leq r_i\\leq 2\\times 10^4,-10^4\\leq x_i,y_i,s_i\\leq 10^4$，保证所有基站坐标两两不同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 电信网络", "background": "", "description": "JYY 创建的电信公司，垄断着整个 JSOI 王国的电信网络。JYY在 JSOI 王国里建造了很多的通信基站。目前所有的基站都是使用 2G 网络系统的。而现在 3G 时代已经到来了，JYY 在思考，要不要把一些基站升级成 3G 网络的呢？\n\nJSOI王国可以被看作为一个无穷大的二维平面，JYY 一共建造了 $n$ 个通信基站，第 $i$ 个基站的坐标是 $(x_i,y_i)$。每个基站有一个通信范围 $r_i$。第 $i$ 号基站会向所有到其距离不超过 $r_i$ 的基站发送信息。\n\n每个基站升级到 3G 网络都会有一个收益 $s_i$，这个收益可能是正数（比如基站附近有个大城市，用户很多，赚的流量费也就很多了），也可能是负数（比如基站周围市场不佳，收益不能填补升级基站本身的投资）。此外，由于原有的使用 2G 网络系统的基站无法解析从升级成 3G 网络系统的基站所发来的信息（但是升级之后的基站是可以解析未升级基站发来的信息的），所以JYY必须使得在升级工作全部完成之后，所有使用3G网络的基站，其通信范围内的基站，也都是使用 3G 网络的。\n\n由于基站数量很多，你可以帮助 JYY 计算一下，他通过升级基站，最多能获得的收益是多少吗？", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行 $4$ 个整数 $x_i,y_i,r_i,s_i$，表示处在 $(x_i,y_i)$ 的基站的通信范围是 $r_i$，升级可以获得的收益是 $s_i$。\n\n数据满足任意两个基站的坐标不同。", "outputFormat": "一行一个整数，表示可以获得的最大收益。", "hint": "### 样例解释 1\n\n将前三座基站升级可以获得最大收益。\n\n### 数据范围\n\n$1\\leq n\\leq 500,1\\leq r_i\\leq 2\\times 10^4,-10^4\\leq x_i,y_i,s_i\\leq 10^4$，保证所有基站坐标两两不同。", "locale": "zh-CN"}}}
{"pid": "P7234", "type": "P", "difficulty": 5, "samples": [["4 3\n1 1\n1 3\n1 2", "1 3 2 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "各省省选", "江苏", "哈希 hashing", "STL"], "title": "[JSOI2014] 歌剧表演", "background": "", "description": "文艺青年 JYY 非常喜欢观看歌剧表演。\n\nJYY 知道所有演员的长相和名字，但是却对不上号，JYY 希望有一天能够知道每一个演员到底是谁。\n\nJSOI 歌剧团一共有 $n$ 个演员，并进行了 $m$ 次演出。所有演员由 $1$ 到 $n$ 编号，并且第 $i$ 次演出共有 $k_i$ 位演员参加。\n\nJYY看过所有 $n$ 个演员的照片(即知道这 $n$ 个演员的长相)，也看过演员的名单(即知道这 $n$ 个演员的姓名，假设没有同名的情况)，并且仔细观摩了所有的 $m$ 次演出：每次演出 JYY 都知道有哪些演员参加了本次表演并且能够分辨出他们的长相。\n\n现在JYY想知道，看完这 $m$ 次演出之后，他是不是能够把所有演员的名字和长相都一一对应了呢？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行首先包含一个整数 $k_i$，接下来 $k_i$ 个不同的 $1$ 到 $n$ 之间的整数，表示参与此次演出的演员编号。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示编号为 $i$ 的演员在第 $a_i$ 场演出之后 JYY 就可以将他的编号和长相对应起来。\n\n如果 $m$ 次演出之后 JYY 仍然不能认出这个演员，则 $a_i$ 为 $0$。", "hint": "### 样例解释 1\n\n每一场演出可以确定一个演员的长相，而 $4$ 号演员是唯一一直没有参加过演出的。\n由于 JYY 一开始知道所有演员的长相，所以第三场演出后 JYY 也可以确认 $4$ 号演员的长相。\n\n### 数据范围\n\n$1\\leq n,m\\leq 10^5,\\sum\\limits_{i=1}^{n}k_i\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 歌剧表演", "background": "", "description": "文艺青年 JYY 非常喜欢观看歌剧表演。\n\nJYY 知道所有演员的长相和名字，但是却对不上号，JYY 希望有一天能够知道每一个演员到底是谁。\n\nJSOI 歌剧团一共有 $n$ 个演员，并进行了 $m$ 次演出。所有演员由 $1$ 到 $n$ 编号，并且第 $i$ 次演出共有 $k_i$ 位演员参加。\n\nJYY看过所有 $n$ 个演员的照片(即知道这 $n$ 个演员的长相)，也看过演员的名单(即知道这 $n$ 个演员的姓名，假设没有同名的情况)，并且仔细观摩了所有的 $m$ 次演出：每次演出 JYY 都知道有哪些演员参加了本次表演并且能够分辨出他们的长相。\n\n现在JYY想知道，看完这 $m$ 次演出之后，他是不是能够把所有演员的名字和长相都一一对应了呢？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行首先包含一个整数 $k_i$，接下来 $k_i$ 个不同的 $1$ 到 $n$ 之间的整数，表示参与此次演出的演员编号。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示编号为 $i$ 的演员在第 $a_i$ 场演出之后 JYY 就可以将他的编号和长相对应起来。\n\n如果 $m$ 次演出之后 JYY 仍然不能认出这个演员，则 $a_i$ 为 $0$。", "hint": "### 样例解释 1\n\n每一场演出可以确定一个演员的长相，而 $4$ 号演员是唯一一直没有参加过演出的。\n由于 JYY 一开始知道所有演员的长相，所以第三场演出后 JYY 也可以确认 $4$ 号演员的长相。\n\n### 数据范围\n\n$1\\leq n,m\\leq 10^5,\\sum\\limits_{i=1}^{n}k_i\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7238", "type": "P", "difficulty": 5, "samples": [["3\n1 2\n1 3", "5"], ["5\n1 2\n1 3\n2 4\n2 5", "9"], ["9\n1 2\n1 3\n1 4\n1 5\n2 6\n2 7\n5 8\n5 9", "11"], ["5\n1 2\n2 3\n2 4\n2 5", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "洛谷原创", "O2优化"], "title": "迷失森林", "background": "", "description": "首先给出一棵以 $1$ 为根，$n$ 个结点的树，定义为「单位树」。\n\n现有 $n$ 个结构与「单位树」完全相同的树，要将 $n$ 个树再用 $n-1$ 条边连接起来。\n\n为方便叙述，用符号 $(a,b)$ 表示结点 $a$ 所代表树中，编号为 $b$ 的结点。\n\n连接方式如下：\n\n1. 将 $n$ 棵树按照「单位树」的结构摆放好。\n\n2. 对于每个 $i(1<i\\leq n)$，连接结点 $(i,1)$ 和 $(f_i,f_i)$。其中 $f_i$ 表示「单位树」中结点 $i$ 的父亲。\n\n求将 $n$ 棵树连接后，整棵包含 $n^2$ 个结点的树中，树上两点简单路径所包含的 **结点** 个数的最大值。", "inputFormat": "第一行输入一个正整数 $n$，表示「单位树」的结点数。\n\n接下来输入 $n-1$ 行，每行两个正整数 $u,v$，表示「单位树」中的一条边。", "outputFormat": "输出一行一个正整数，表示树上两点简单路径所包含的 **结点** 个数的最大值。", "hint": "#### 样例说明\n\n样例 #1 ![](https://i.loli.net/2021/10/24/QRqkpeC7u4dYA5o.png)\n\n样例 #2 如下图，以 $(3,4)$ 和 $(4,4)$ 为两端的路径包含 $9$ 个结点，长度为 $9$。\n\n![](https://i.loli.net/2021/10/24/2IVR9ZXuNcdzTQp.png)\n\n样例 #3 如下图，取 $(6,6)$ 和 $(9,9)$，包含 $11$ 个结点。\n\n![](https://i.loli.net/2021/10/24/th8CWcbxQEGVXRm.png)\n\n事实上，任取两个最近公共祖先为 $1$ 的橙色结点，答案均为 $11$。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $12$ | $10^6$ | $v=u+1$ |\n| $3$ | $6$ | $10^6$ | $u=1$ |\n| $4$ | $18$ | $=2^k(k\\in\\mathbf{Z})$ | $u=\\left\\lfloor\\dfrac{v}{2}\\right\\rfloor$ |\n| $5$ | $27$ | $10^3$ | 树的形态随机 |\n| $6$ | $27$ | $10^6$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，结点编号介于 $1\\sim n$ 之间。\n\n**本题可能略微卡常。**\n\n时限缩短为 1s，原因如下：\n\n- 讨论区认为本题撞原，为防止所谓「加强版」的 $O(n\\log n)$ 做法直接冲过本题，时限缩短。\n\n- 最优解能跑进 200ms 以内。\n\n- 由于出题人懒惰，懒得 $n\\le10^6\\rightarrow n\\le10^7$ 只能通过缩短时限来卡掉所谓原题做法（实际上是错解）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "迷失森林", "background": "", "description": "首先给出一棵以 $1$ 为根，$n$ 个结点的树，定义为「单位树」。\n\n现有 $n$ 个结构与「单位树」完全相同的树，要将 $n$ 个树再用 $n-1$ 条边连接起来。\n\n为方便叙述，用符号 $(a,b)$ 表示结点 $a$ 所代表树中，编号为 $b$ 的结点。\n\n连接方式如下：\n\n1. 将 $n$ 棵树按照「单位树」的结构摆放好。\n\n2. 对于每个 $i(1<i\\leq n)$，连接结点 $(i,1)$ 和 $(f_i,f_i)$。其中 $f_i$ 表示「单位树」中结点 $i$ 的父亲。\n\n求将 $n$ 棵树连接后，整棵包含 $n^2$ 个结点的树中，树上两点简单路径所包含的 **结点** 个数的最大值。", "inputFormat": "第一行输入一个正整数 $n$，表示「单位树」的结点数。\n\n接下来输入 $n-1$ 行，每行两个正整数 $u,v$，表示「单位树」中的一条边。", "outputFormat": "输出一行一个正整数，表示树上两点简单路径所包含的 **结点** 个数的最大值。", "hint": "#### 样例说明\n\n样例 #1 ![](https://i.loli.net/2021/10/24/QRqkpeC7u4dYA5o.png)\n\n样例 #2 如下图，以 $(3,4)$ 和 $(4,4)$ 为两端的路径包含 $9$ 个结点，长度为 $9$。\n\n![](https://i.loli.net/2021/10/24/2IVR9ZXuNcdzTQp.png)\n\n样例 #3 如下图，取 $(6,6)$ 和 $(9,9)$，包含 $11$ 个结点。\n\n![](https://i.loli.net/2021/10/24/th8CWcbxQEGVXRm.png)\n\n事实上，任取两个最近公共祖先为 $1$ 的橙色结点，答案均为 $11$。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $12$ | $10^6$ | $v=u+1$ |\n| $3$ | $6$ | $10^6$ | $u=1$ |\n| $4$ | $18$ | $=2^k(k\\in\\mathbf{Z})$ | $u=\\left\\lfloor\\dfrac{v}{2}\\right\\rfloor$ |\n| $5$ | $27$ | $10^3$ | 树的形态随机 |\n| $6$ | $27$ | $10^6$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，结点编号介于 $1\\sim n$ 之间。\n\n**本题可能略微卡常。**\n\n时限缩短为 1s，原因如下：\n\n- 讨论区认为本题撞原，为防止所谓「加强版」的 $O(n\\log n)$ 做法直接冲过本题，时限缩短。\n\n- 最优解能跑进 200ms 以内。\n\n- 由于出题人懒惰，懒得 $n\\le10^6\\rightarrow n\\le10^7$ 只能通过缩短时限来卡掉所谓原题做法（实际上是错解）。", "locale": "zh-CN"}}}
{"pid": "P7239", "type": "P", "difficulty": 6, "samples": [["3 3\n2 2 2\n2 2 2\n0 1 0\n1 1 1\n0 1 0", "0 2 0 \n2 2 2 \n0 2 0 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Special Judge", "O2优化"], "title": "3D Cube", "background": "**此题数据纯手造，并有手玩验证。**\n\nidea & data：[zrmpaul](/user/226760)  \ntester：[Hilarious_Reality](/user/80049)\n\n--------\n\n小 Z 喜欢三维模型，并从不同角度进行细致的观察。", "description": "小 Z 拿到了一个二维矩阵。底面可以看作一个 $n \\times m$ 的方格纸。\n\n在每一个格子上，可以放任意个方块。由于有地心引力，方块不会悬空，且不会用胶水粘住。\n\n他给出了这个三维矩阵的三视图，请你构造一个方块组，满足以下条件：\n\n对于每一行、每一列，最多只有一个“**峰**”出现。特别地，底层矩阵的周围的高度被视为 $0$。如 `12321` 是一个“峰”，而 `13231` 有两个“峰”。\n\n再举一些例子：\n\n|方块排列|“峰”的数量|\n|:----:|:----:|\n|$\\texttt{123}$|$1$|\n|$\\texttt{212}$|$2$|\n|$\\texttt{122221}$|$1$|\n|$\\texttt{00011000}$|$1$|\n|$\\texttt{10010101}$|$4$|\n\n求出需要**最少**方块的矩阵。如果无解，请输出 `-1`。", "inputFormat": "第一行两个整数：$n,m$。\n\n第二行 $n$ 个整数：左视图，第 $i$ 个整数表示左视图中第 $i$ 列的方块个数。\n\n第三行 $m$ 个整数：主视图，第 $j$ 个整数表示主视图中第 $j$ 列的方块个数。\n\n接下来 $n$ 行，每行 $m$ 个整数：俯视图，其中 `0` 表示没有方块，`1` 表示有方块。", "outputFormat": "如果无解，则输出 `-1`。\n\n否则输出共 $n$ 行，每行 $m$ 个非负整数，为构造的三维矩阵的俯视图，其中第 $i$ 行第 $j$ 个整数表示该位置上的方块个数。\n\n**请确保按照输出格式输出，否则可能导致 SPJ 返回 UKE 等结果。**", "hint": "### 数据范围\n\n**本题各部分测试点采用捆绑测试。**\n\n对于 $20\\%$ 的数据：给出输入文件，程序打表输出答案，见附件 `easy.zip`。\n\n对于 $100\\%$ 的数据：$n\\times m\\leq25$。在俯视图中每个格子上最多有 $7\\times10^8$ 个方块，且在俯视图中 `1` 的个数 $\\leq20$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "3D Cube", "background": "**此题数据纯手造，并有手玩验证。**\n\nidea & data：[zrmpaul](/user/226760)  \ntester：[Hilarious_Reality](/user/80049)\n\n--------\n\n小 Z 喜欢三维模型，并从不同角度进行细致的观察。", "description": "小 Z 拿到了一个二维矩阵。底面可以看作一个 $n \\times m$ 的方格纸。\n\n在每一个格子上，可以放任意个方块。由于有地心引力，方块不会悬空，且不会用胶水粘住。\n\n他给出了这个三维矩阵的三视图，请你构造一个方块组，满足以下条件：\n\n对于每一行、每一列，最多只有一个“**峰**”出现。特别地，底层矩阵的周围的高度被视为 $0$。如 `12321` 是一个“峰”，而 `13231` 有两个“峰”。\n\n再举一些例子：\n\n|方块排列|“峰”的数量|\n|:----:|:----:|\n|$\\texttt{123}$|$1$|\n|$\\texttt{212}$|$2$|\n|$\\texttt{122221}$|$1$|\n|$\\texttt{00011000}$|$1$|\n|$\\texttt{10010101}$|$4$|\n\n求出需要**最少**方块的矩阵。如果无解，请输出 `-1`。", "inputFormat": "第一行两个整数：$n,m$。\n\n第二行 $n$ 个整数：左视图，第 $i$ 个整数表示左视图中第 $i$ 列的方块个数。\n\n第三行 $m$ 个整数：主视图，第 $j$ 个整数表示主视图中第 $j$ 列的方块个数。\n\n接下来 $n$ 行，每行 $m$ 个整数：俯视图，其中 `0` 表示没有方块，`1` 表示有方块。", "outputFormat": "如果无解，则输出 `-1`。\n\n否则输出共 $n$ 行，每行 $m$ 个非负整数，为构造的三维矩阵的俯视图，其中第 $i$ 行第 $j$ 个整数表示该位置上的方块个数。\n\n**请确保按照输出格式输出，否则可能导致 SPJ 返回 UKE 等结果。**", "hint": "### 数据范围\n\n**本题各部分测试点采用捆绑测试。**\n\n对于 $20\\%$ 的数据：给出输入文件，程序打表输出答案，见附件 `easy.zip`。\n\n对于 $100\\%$ 的数据：$n\\times m\\leq25$。在俯视图中每个格子上最多有 $7\\times10^8$ 个方块，且在俯视图中 `1` 的个数 $\\leq20$。", "locale": "zh-CN"}}}
{"pid": "P7240", "type": "P", "difficulty": 0, "samples": [["5 2\n6 1 5 3 4", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2014", "各省省选", "江苏"], "title": "[JSOI2014] 打兔子", "background": "", "description": "勤劳的 JYY 在花园里面种了好多胡萝卜！可是，今天早上 JYY 发现一大群从 JSOI 王国里面跑来的兔子把他的花园全部占满了！兔子们把胡萝卜吃光了，JYY 靠什么过冬呢！忍无可忍的 JYY 决定取出他的强力猎枪来消灭这些兔子。\n\nJYY 的花园是一个由 $n$ 块小菜地顺次连接所形成的圆环，编号为 $1$ 到 $n$。第 $i$ 号菜地和第 $i+1$ 号菜地是相邻的。由于花园是环形的，所以 $1$ 号菜地和 $n$ 号菜地也是相邻的。\n\n现在，第 $i$ 号菜地上有 $r_i$ 只兔子。JYY 的猎枪有 $k$ 发子弹，每次 JYY 可以选择一块菜地打一枪，然后这块菜地上的兔子就全部都被消灭了。但是由于 JYY 的猎枪威力太大，会吓到相邻菜地上的兔子，所以，如果 JYY 朝 $i$ 号菜地打了一枪，那么 $i+1$ 号菜地上的兔子就会跑到 $i+2$ 号菜地上去，同样的，$i-1$ 号菜地上的兔子也会跑到 $i-2$ 号菜地上去。JYY 想知道，如何用这 $k$ 发子弹，消灭尽量多的兔子呢？", "inputFormat": "第一行两个整数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $r_i$。", "outputFormat": "一行一个整数，表示 JYY 最多可以消灭的兔子个数。", "hint": "### 样例解释\n\n先朝 $1$ 号菜地打一枪，变成 $0\\ 0\\ 6\\ 7\\ 0$，再朝 $4$ 号菜地打一枪。可以证明没有比 $13$ 大的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 4000,0\\leq k\\leq 4000,r_i\\leq 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 打兔子", "background": "", "description": "勤劳的 JYY 在花园里面种了好多胡萝卜！可是，今天早上 JYY 发现一大群从 JSOI 王国里面跑来的兔子把他的花园全部占满了！兔子们把胡萝卜吃光了，JYY 靠什么过冬呢！忍无可忍的 JYY 决定取出他的强力猎枪来消灭这些兔子。\n\nJYY 的花园是一个由 $n$ 块小菜地顺次连接所形成的圆环，编号为 $1$ 到 $n$。第 $i$ 号菜地和第 $i+1$ 号菜地是相邻的。由于花园是环形的，所以 $1$ 号菜地和 $n$ 号菜地也是相邻的。\n\n现在，第 $i$ 号菜地上有 $r_i$ 只兔子。JYY 的猎枪有 $k$ 发子弹，每次 JYY 可以选择一块菜地打一枪，然后这块菜地上的兔子就全部都被消灭了。但是由于 JYY 的猎枪威力太大，会吓到相邻菜地上的兔子，所以，如果 JYY 朝 $i$ 号菜地打了一枪，那么 $i+1$ 号菜地上的兔子就会跑到 $i+2$ 号菜地上去，同样的，$i-1$ 号菜地上的兔子也会跑到 $i-2$ 号菜地上去。JYY 想知道，如何用这 $k$ 发子弹，消灭尽量多的兔子呢？", "inputFormat": "第一行两个整数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $r_i$。", "outputFormat": "一行一个整数，表示 JYY 最多可以消灭的兔子个数。", "hint": "### 样例解释\n\n先朝 $1$ 号菜地打一枪，变成 $0\\ 0\\ 6\\ 7\\ 0$，再朝 $4$ 号菜地打一枪。可以证明没有比 $13$ 大的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 4000,0\\leq k\\leq 4000,r_i\\leq 10^5$", "locale": "zh-CN"}}}
{"pid": "P7241", "type": "P", "difficulty": 5, "samples": [["3 2 2 1\n1 2 3", "1"], ["5 2 3 3\n21 54 12 2 0", "12"], ["6 4 6 100\n1 2 3 4 5 6", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #4] Holding", "background": "Ivica 有一个由 $N$ 家克罗地亚公司组成的集团，但他的集团正面临着困难。他的企业承受着巨额的负债，所以政$ $府派遣律师没收了他的一切财产。\n\n但我们发现，尽管他有巨额债务在身，他依然与政$ $府达成协议，留住了部分企业。他留住的是哪些？我们也知道了。", "description": "律师们把 Ivica 的公司的 $N$ 份债务文件摆在桌上。第一家公司的债务为 $A_1$ ，第二家公司的债务为 $A_2$ ，依次类推。\n\nIvica 与政$ $府达成协议，使它留下桌上 $[L,R]$ 区间的所有文件所对应的公司，但他需要承担 $A_L,A_{L+1}\\ldots A_R$ 的所有债务，其中 $L$ 和 $R$ 代表桌子上一系列文件中的位置。\n\n幸运的是，律师们也是腐败。他们可以让他以 $|i-j|$ 的价格交换当前放在位置 $i$ 和位置 $j$ 的文件。\n\nIvica 有点绝望。他口袋里只有 $K$ 元钱，他现在想把这些钱花在这里，使得他的需要承担的债务尽可能少。\n\n请帮他达成目标。 ", "inputFormat": "第一行四个整数 $N,L,R,K$。\n\n第二行 $N$ 个整数，第 $i$ 个表示 $A_i$。", "outputFormat": "一行一个整数，表示花不超过 $K$ 元后负债的最小值。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制         | 分值 |\n| ---------- | ---------------- | ---- |\n| $1$        | $N\\le 13$，$R=N$ | $20$ |\n| $2$        | $N\\le 50$，$R=N$ | $30$ |\n| $3$        | $N\\le 50$        | $30$ |\n| $4$        | 无特殊限制       | $20$ |\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 100$，$1\\le L\\le R\\le N$，$1\\le K\\le 10^4$，$1\\le A_i\\le 10^6$。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T3 Holding**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #4] Holding", "background": "Ivica 有一个由 $N$ 家克罗地亚公司组成的集团，但他的集团正面临着困难。他的企业承受着巨额的负债，所以政$ $府派遣律师没收了他的一切财产。\n\n但我们发现，尽管他有巨额债务在身，他依然与政$ $府达成协议，留住了部分企业。他留住的是哪些？我们也知道了。", "description": "律师们把 Ivica 的公司的 $N$ 份债务文件摆在桌上。第一家公司的债务为 $A_1$ ，第二家公司的债务为 $A_2$ ，依次类推。\n\nIvica 与政$ $府达成协议，使它留下桌上 $[L,R]$ 区间的所有文件所对应的公司，但他需要承担 $A_L,A_{L+1}\\ldots A_R$ 的所有债务，其中 $L$ 和 $R$ 代表桌子上一系列文件中的位置。\n\n幸运的是，律师们也是腐败。他们可以让他以 $|i-j|$ 的价格交换当前放在位置 $i$ 和位置 $j$ 的文件。\n\nIvica 有点绝望。他口袋里只有 $K$ 元钱，他现在想把这些钱花在这里，使得他的需要承担的债务尽可能少。\n\n请帮他达成目标。 ", "inputFormat": "第一行四个整数 $N,L,R,K$。\n\n第二行 $N$ 个整数，第 $i$ 个表示 $A_i$。", "outputFormat": "一行一个整数，表示花不超过 $K$ 元后负债的最小值。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制         | 分值 |\n| ---------- | ---------------- | ---- |\n| $1$        | $N\\le 13$，$R=N$ | $20$ |\n| $2$        | $N\\le 50$，$R=N$ | $30$ |\n| $3$        | $N\\le 50$        | $30$ |\n| $4$        | 无特殊限制       | $20$ |\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 100$，$1\\le L\\le R\\le N$，$1\\le K\\le 10^4$，$1\\le A_i\\le 10^6$。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T3 Holding**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN"}}}
{"pid": "P7242", "type": "P", "difficulty": 6, "samples": [["4\nAdd 1 5\nQuery 1 1\nAdd 1 7\nQuery 1 1", "5\n7"], ["6\nAdd 1 5\nAdd 2 7\nAdd 1 4\nAdd 4 3\nQuery 1 1\nQuery 2 4", "7\n2"], ["10\nAdd 1 4\nAdd 1 9\nAdd 1 10\nAdd 2 2\nAdd 3 3\nAdd 4 4\nQuery 4 2\nQuery 1 3\nAdd 6 7\nQuery 1 3", "14\n10\n13"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #4] Klasika", "background": "", "description": "开始时，你有一个编号为 $1$ 的节点，它代表着一棵树的根。你的任务是对树进行 $Q$ 次操作。\n\n操作分为两类：\n\n- $\\texttt{Add x y}$，给树上编号为 $x$ 的节点加入一个儿子，该儿子的编号为加入该节点后树的大小，它与 $x$ 的边的边权为 $y$。\n- $\\texttt{Query a b}$，查找从 $a$ 出发，到 $b$ 节点子树内某个节点（包括 $B$ ）的路径中边权异或和最大的一条，并输出其异或和。", "inputFormat": "第一行一个整数 $Q$。\n\n加下来 $Q$ 行，每行一个字符串和两个数字，描述一次操作。", "outputFormat": "对于每个 $\\texttt{Query}$ 操作，一行一个整数表示答案。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制                                   | 分值 |\n| ---------- | ------------------------------------------ | ---- |\n| $1$        | $Q\\le 200$                                 | $10$ |\n| $2$        | $Q\\le 2\\times 10^3$                        | $20$ |\n| $3$        | 对于所有 $\\texttt{Query}$ 操作，保证 $b=1$ | $30$ |\n| $4$        | 无特殊限制                                 | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le Q\\le 2\\times 10^5$，$0\\le y\\le 2^{30}$，保证 $x,a,b$ 小于等于当前树的大小。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T4 Klasika**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #4] Klasika", "background": "", "description": "开始时，你有一个编号为 $1$ 的节点，它代表着一棵树的根。你的任务是对树进行 $Q$ 次操作。\n\n操作分为两类：\n\n- $\\texttt{Add x y}$，给树上编号为 $x$ 的节点加入一个儿子，该儿子的编号为加入该节点后树的大小，它与 $x$ 的边的边权为 $y$。\n- $\\texttt{Query a b}$，查找从 $a$ 出发，到 $b$ 节点子树内某个节点（包括 $B$ ）的路径中边权异或和最大的一条，并输出其异或和。", "inputFormat": "第一行一个整数 $Q$。\n\n加下来 $Q$ 行，每行一个字符串和两个数字，描述一次操作。", "outputFormat": "对于每个 $\\texttt{Query}$ 操作，一行一个整数表示答案。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制                                   | 分值 |\n| ---------- | ------------------------------------------ | ---- |\n| $1$        | $Q\\le 200$                                 | $10$ |\n| $2$        | $Q\\le 2\\times 10^3$                        | $20$ |\n| $3$        | 对于所有 $\\texttt{Query}$ 操作，保证 $b=1$ | $30$ |\n| $4$        | 无特殊限制                                 | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le Q\\le 2\\times 10^5$，$0\\le y\\le 2^{30}$，保证 $x,a,b$ 小于等于当前树的大小。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T4 Klasika**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN"}}}
{"pid": "P7243", "type": "P", "difficulty": 3, "samples": [["2 2\n2 2\n1 2\n2 1", "0"], ["2 2\n2 2 \n2 2\n1 1", "-1"], ["3 3\n3 2 3\n2 3 2\n3 2 3\n2 2", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "数学", "O2优化", "广度优先搜索 BFS"], "title": "最大公约数", "background": "&emsp;&emsp;“寻求最大公约数是人民民主的真谛。……”\n\n&emsp;&emsp;初秋，从枝丫滴下的阳光，柔和，在教室的窗棱溅起，润湿晨读的少女的脸颊。\n\n&emsp;&emsp;“阿绫，阿绫”，天依低俯身子，八字辫耷拉在竖起的课本沿，“我们的最大公约数是多少呢？”\n\n&emsp;&emsp;“一定不小吧”，左手悄悄捏捏天依的小臂，“比如呀，有一个公因子，叫做‘你喜欢我，我也喜欢你’。”", "description": "相反，人际圈形形色色，公约数小得可怜，似乎很难保持自己的个性因而变成无趣的人呢。\n\n现在把人际抽象成一个 $n \\times m$ 的矩形，每个人初始的个性为 $a_{i,j}$。从第二天开始，每个人会与上下左右四个人（如果存在）建立人际关系，其个性变为昨天自己和四周人个性的最大公约数。那么对于第 $x$ 行第 $y$ 列的人，在多少天后他的个性会变为 $1$ 呢？\n\n----\n\n#### 简化题意\n\n有一个 $n \\times m$ 的矩阵 $a$。对一个矩阵进行变换，定义为将这个矩阵内的所有元素变为其上下左右四个元素（不存在则忽略）及自身的最大公约数。询问 $a_{x,y}$ 在进行最少多少次变换之后会变成 $1$。如果可以使 $a_{x,y}$ 经过若干次变换变成 $1$，输出其中最小的次数；否则输出 $-1$。", "inputFormat": "第一行两个整数 $n,m$，表示矩阵的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数 $a_{i,j}$ 描述了该位置的人的初始个性。\n\n接下来一行两个整数 $x,y$，表示某个指定的人的位置。", "outputFormat": "一行一个整数 $d$，表示第 $x$ 行第 $y$ 列的人的个性会在 $d$ 天后变为 $1$；**特别地**，若永远不会变为 $1$，应输出 $-1$。", "hint": "#### 样例解释 3\n第一天的个性矩阵（也就是最开始的矩阵）为\n$$\n\\begin{pmatrix}\n3&2&3\\\\\n2&3&2\\\\\n3&2&3\n\\end{pmatrix}\n$$\n第二天的个性矩阵为\n$$\n\\begin{pmatrix}\n1&1&1\\\\\n1&1&1\\\\\n1&1&1\n\\end{pmatrix}\n$$\n可见只需要经过一天，$a_{2,2}$ 就会变为 $1$，所以答案为 $1$。\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^3$，$1\\le a_{i,j}\\le 10^{18}$，$1\\le x\\le n$，$1\\le y\\le m$。\n\n| 子任务 | 分值 |        $n,m$        |              特殊限制              |\n| :----: | :--: | :-----------------: | :--------------------------------: |\n|   1    |  1   |          /          | 保证给出的位置个性永远不会变为 $1$ |\n|   2    |  1   |          /          |          保证 $a_{x,y}=1$          |\n|   3    |  3   |      $ \\le 2$       |                 /                  |\n|   4    |  10  |     $ \\le 10^2$     |                 /                  |\n|   5    |  30  | $ \\le 5\\times 10^2$ |           /            |\n|   6    |  10  |          /          |   保证对于所有的 $a_{i,j} \\le 2$   |\n|   7    |  10  |          /          |     保证 $x$ 与 $y$ 都等于 $1$     |\n|   8    |  35  |          /          |                 /                  |\n\n\n\n\n\n------------\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "最大公约数", "background": "&emsp;&emsp;“寻求最大公约数是人民民主的真谛。……”\n\n&emsp;&emsp;初秋，从枝丫滴下的阳光，柔和，在教室的窗棱溅起，润湿晨读的少女的脸颊。\n\n&emsp;&emsp;“阿绫，阿绫”，天依低俯身子，八字辫耷拉在竖起的课本沿，“我们的最大公约数是多少呢？”\n\n&emsp;&emsp;“一定不小吧”，左手悄悄捏捏天依的小臂，“比如呀，有一个公因子，叫做‘你喜欢我，我也喜欢你’。”", "description": "相反，人际圈形形色色，公约数小得可怜，似乎很难保持自己的个性因而变成无趣的人呢。\n\n现在把人际抽象成一个 $n \\times m$ 的矩形，每个人初始的个性为 $a_{i,j}$。从第二天开始，每个人会与上下左右四个人（如果存在）建立人际关系，其个性变为昨天自己和四周人个性的最大公约数。那么对于第 $x$ 行第 $y$ 列的人，在多少天后他的个性会变为 $1$ 呢？\n\n----\n\n#### 简化题意\n\n有一个 $n \\times m$ 的矩阵 $a$。对一个矩阵进行变换，定义为将这个矩阵内的所有元素变为其上下左右四个元素（不存在则忽略）及自身的最大公约数。询问 $a_{x,y}$ 在进行最少多少次变换之后会变成 $1$。如果可以使 $a_{x,y}$ 经过若干次变换变成 $1$，输出其中最小的次数；否则输出 $-1$。", "inputFormat": "第一行两个整数 $n,m$，表示矩阵的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数 $a_{i,j}$ 描述了该位置的人的初始个性。\n\n接下来一行两个整数 $x,y$，表示某个指定的人的位置。", "outputFormat": "一行一个整数 $d$，表示第 $x$ 行第 $y$ 列的人的个性会在 $d$ 天后变为 $1$；**特别地**，若永远不会变为 $1$，应输出 $-1$。", "hint": "#### 样例解释 3\n第一天的个性矩阵（也就是最开始的矩阵）为\n$$\n\\begin{pmatrix}\n3&2&3\\\\\n2&3&2\\\\\n3&2&3\n\\end{pmatrix}\n$$\n第二天的个性矩阵为\n$$\n\\begin{pmatrix}\n1&1&1\\\\\n1&1&1\\\\\n1&1&1\n\\end{pmatrix}\n$$\n可见只需要经过一天，$a_{2,2}$ 就会变为 $1$，所以答案为 $1$。\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^3$，$1\\le a_{i,j}\\le 10^{18}$，$1\\le x\\le n$，$1\\le y\\le m$。\n\n| 子任务 | 分值 |        $n,m$        |              特殊限制              |\n| :----: | :--: | :-----------------: | :--------------------------------: |\n|   1    |  1   |          /          | 保证给出的位置个性永远不会变为 $1$ |\n|   2    |  1   |          /          |          保证 $a_{x,y}=1$          |\n|   3    |  3   |      $ \\le 2$       |                 /                  |\n|   4    |  10  |     $ \\le 10^2$     |                 /                  |\n|   5    |  30  | $ \\le 5\\times 10^2$ |           /            |\n|   6    |  10  |          /          |   保证对于所有的 $a_{i,j} \\le 2$   |\n|   7    |  10  |          /          |     保证 $x$ 与 $y$ 都等于 $1$     |\n|   8    |  35  |          /          |                 /                  |\n\n\n\n\n\n------------\n\n\n", "locale": "zh-CN"}}}
{"pid": "P7244", "type": "P", "difficulty": 5, "samples": [["5 3\n1 3 2 9 6", "3"], ["5 2\n10 2 5 5 5", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "数学", "线段树", "树状数组", "O2优化", "ST 表"], "title": "章节划分", "background": "&emsp;&emsp;作文周，顾名思义，一天写一篇，高产似那啥。\n\n&emsp;&emsp;小灰毛的作文被老师无数次公开处刑，昨天自己的奶奶变成了别人作文里的外婆，今天憋出来的小面变成了明天别人的酸辣粉。素材一用，就报废了啊 qwq。\n\n&emsp;&emsp;于是，不甘心的小灰毛决定加倍高产。", "description": "天依决定了 $n$ 个素材，它们将**依次**在作文中被叙写。其中，第 $i$ 个素材的立意特征值是 $a_i$。\n\n但天依发现她构思的大作实在是太长啦，所以她想把它们划分为**恰好 $k$ 个**章节，每个章节包含一段**连续且非空的**素材。假设第 $i$ 个章节包含素材 $[l_i,r_i]$，天依将选取立意特征值最大的素材来升华，得到该章节的立意值 $b_i$，满足 $b_i=\\max\\limits_{i\\in[l_i,r_i]}\\{a_i\\}$。  \n\n最后，整篇作文的凝练度为每个章节立意值的**最大公约数**，即 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$。\n\n天依当然希望**最大化**作文的凝练度，那么凝练度的最大值是多少呢？\n\n---\n\n#### 简化题意\n\n有一个长度为 $n$ 的序列 $a$。要求将这个序列**恰好**分成**连续且非空**的 $k$ 段，并定义第 $i$ 段的立意值为该段的所有元素的最大值，记为 $b_i$。要求最大化 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$ 并输出这个最大值。", "inputFormat": "第一行包含两个整数 $n,k$，表示素材的长度和需要划分的章节数。\n\n接下来第二行包含 $n$ 个整数，表示每个素材的立意特征值。", "outputFormat": "一行一个整数，表示你的答案。", "hint": "#### 样例解释 1\n最优的素材划分可能有多种，这里给出一种最优的素材划分，将这 $5$ 个素材分成 $3$ 个章节：$[1,3],[2,9],[6]$，可以得出 $b_1=3,b_2=9,b_3=6$，凝练度的最大值为 $\\gcd(3,9,6)=3$。\n\n------------\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 10^5$，$1\\le a_i\\le 10^{6}$。\n\n| 子任务 | 分值 |        $n$         | $k$  |       $a_i$        |\n| :----: | :--: | :----------------: | :--: | :----------------: |\n|   1    |  5   |      $\\le 5$      |  /   |         /          |\n|   2    |  10  |     $\\le 10^2$     |  /   |         /          |\n|   3    |  10  |         /          | $2$  |         /          |\n|   4    |  15  |         /          | $3$  |         /          |\n|   5    |  20  | $\\le 3\\times 10^3$ |  /   |         /          |\n|   6    |  10  |         /          |  /   | $\\le 2\\times 10^2$ |\n|   7    |  30  |         /          |  /   |         /          |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "章节划分", "background": "&emsp;&emsp;作文周，顾名思义，一天写一篇，高产似那啥。\n\n&emsp;&emsp;小灰毛的作文被老师无数次公开处刑，昨天自己的奶奶变成了别人作文里的外婆，今天憋出来的小面变成了明天别人的酸辣粉。素材一用，就报废了啊 qwq。\n\n&emsp;&emsp;于是，不甘心的小灰毛决定加倍高产。", "description": "天依决定了 $n$ 个素材，它们将**依次**在作文中被叙写。其中，第 $i$ 个素材的立意特征值是 $a_i$。\n\n但天依发现她构思的大作实在是太长啦，所以她想把它们划分为**恰好 $k$ 个**章节，每个章节包含一段**连续且非空的**素材。假设第 $i$ 个章节包含素材 $[l_i,r_i]$，天依将选取立意特征值最大的素材来升华，得到该章节的立意值 $b_i$，满足 $b_i=\\max\\limits_{i\\in[l_i,r_i]}\\{a_i\\}$。  \n\n最后，整篇作文的凝练度为每个章节立意值的**最大公约数**，即 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$。\n\n天依当然希望**最大化**作文的凝练度，那么凝练度的最大值是多少呢？\n\n---\n\n#### 简化题意\n\n有一个长度为 $n$ 的序列 $a$。要求将这个序列**恰好**分成**连续且非空**的 $k$ 段，并定义第 $i$ 段的立意值为该段的所有元素的最大值，记为 $b_i$。要求最大化 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$ 并输出这个最大值。", "inputFormat": "第一行包含两个整数 $n,k$，表示素材的长度和需要划分的章节数。\n\n接下来第二行包含 $n$ 个整数，表示每个素材的立意特征值。", "outputFormat": "一行一个整数，表示你的答案。", "hint": "#### 样例解释 1\n最优的素材划分可能有多种，这里给出一种最优的素材划分，将这 $5$ 个素材分成 $3$ 个章节：$[1,3],[2,9],[6]$，可以得出 $b_1=3,b_2=9,b_3=6$，凝练度的最大值为 $\\gcd(3,9,6)=3$。\n\n------------\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 10^5$，$1\\le a_i\\le 10^{6}$。\n\n| 子任务 | 分值 |        $n$         | $k$  |       $a_i$        |\n| :----: | :--: | :----------------: | :--: | :----------------: |\n|   1    |  5   |      $\\le 5$      |  /   |         /          |\n|   2    |  10  |     $\\le 10^2$     |  /   |         /          |\n|   3    |  10  |         /          | $2$  |         /          |\n|   4    |  15  |         /          | $3$  |         /          |\n|   5    |  20  | $\\le 3\\times 10^3$ |  /   |         /          |\n|   6    |  10  |         /          |  /   | $\\le 2\\times 10^2$ |\n|   7    |  30  |         /          |  /   |         /          |", "locale": "zh-CN"}}}
{"pid": "P7245", "type": "P", "difficulty": 5, "samples": [["2 3 1\n0 1 2\n0 1 2\n", "110916041"], ["3 3 3\n0 1 2\n0 1 2", "592921545"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "灯光效果", "background": "&emsp;&emsp;「为了你唱下去——直到荒芜」\n\n&emsp;&emsp;「为了你唱下去——直到……」\n\n&emsp;&emsp;舞台上，享受地阖上眼眸，双手交叠扣在话筒，后脚踮起，在随着节奏闪烁变换的灯光下轻摇……\n\n&emsp;&emsp;嘴角轻扬，绫珍惜着步入瞳孔的每一粒光，那些从天依的发丝、脸颊划过的，带着属于她的旖旎，轰击着明明做好防备的绫的心尖。\n\n&emsp;&emsp;收尾的音调扬起，灯光，也是那样应景呢。", "description": "对于舞台效果，灯光是重要的角色。背景屏幕是一个 $n \\times n$ 的矩形，行从左到右，列从上到下编号为 $1\\sim n$，并用 $(x,y)$ 表示第 $x$ 行第 $y$ 列的灯光单元。\n\n作为御用灯光师的阿绫设计了一个控制背景灯光效果的程序。她设定了两个长度为 $m$ 的**递增**整数序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，且满足 $0\\le x_1,y_1$，$x_m,y_m\\le n$。每次灯光变换，程序会均匀地随机生成两对整数 $(i_1,i_2),(j_1,j_2)$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$，转换满足 $x_{i_1}<r\\le x_{i_2}$，$y_{j_1}<c\\le y_{j_2}$ 的所有灯光单元 $(r,c)$ 的状态（亮变为熄，熄变为亮）。\n\n表演开始时，所有灯光单元处于熄灭状态；经计算，到表演结束时，一共会发生 $k$ 次灯光变换。而表演落幕时的灯光效果极为关键，所以阿绫想知道，表演落幕时，期望有多少个灯光单元是亮着的？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n有一个 $n\\times n$ 的矩阵，初始所有元素的值为 $0$。给出递增序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，其中 $0\\le x_1,y_1$，$x_m,y_m\\le n$，一次操作定义为：\n\n- 随机选出四个整数 $i_1,i_2,j_1,j_2$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$。\n- 把以 $(x_{i_1}+1,y_{j_1}+1)$ 为左上角，$(x_{i_2},y_{j_2})$ 为右下角的子矩阵的每个元素异或 $1$。\n\n求 $k$ 次操作后矩阵内元素之和的期望值。答案对 $998244353$ 取模。", "inputFormat": "第一行三个整数，分别为 $n,m,k$ 。\n\n第二行 $m$ 个整数，其中第 $i$ 个数表示 $x_i$ 。\n\n第三行 $m$ 个整数，其中第 $i$ 个数表示 $y_i$ 。\n\n", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "#### 样例解释 1\n\n样例中，$\\{x_m\\}=\\{y_m\\}=\\{0,1,2\\}$。可以发现，此 $2\\times 2$ 矩阵的任意一个子矩阵都可以被变换。当子矩阵大小分别为 $1,2,4$ 时，对应方案数分别为 $4,4,1$，由于只操作一次，所以对应的最终矩阵元素之和分别为 $4\\times1,4\\times2,1\\times 4$。于是，答案为 $\\frac{4+8+4}{4+4+1}=\\frac{16}9$。\n\n#### 数据规模与约定  \n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$2\\le m\\le \\min(n+1,10^3)$，$1\\le n\\le10^9$，$1\\le k\\le 10^6$，保证 $x_i$ 互不相等且递增，$y_i$ 互不相等且递增。\n\n| 子任务 | 分值 |     $n$      |   $m$    |     $k$      |\n| :----: | :--: | :----------: | :------: | :----------: |\n|   1    |  10  |   $ \\le 4$   | $ \\le 3$ |   $ \\le 2$   |\n|   2    |  5   |      /       |   $2$    |      /       |\n|   3    |  25  | $ \\le 10^2 $ |    /     | $ \\le 10^2 $ |\n|   4    |  20  | $ \\le 10^9 $ |    /     | $ \\le 10^2 $ |\n|   5    |  20  | $ \\le 10^2 $ |    /     | $ \\le 10^6 $ |\n|   6    |  20  |      /       |    /     |      /       |\n\n\n\n\n\n------------\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "灯光效果", "background": "&emsp;&emsp;「为了你唱下去——直到荒芜」\n\n&emsp;&emsp;「为了你唱下去——直到……」\n\n&emsp;&emsp;舞台上，享受地阖上眼眸，双手交叠扣在话筒，后脚踮起，在随着节奏闪烁变换的灯光下轻摇……\n\n&emsp;&emsp;嘴角轻扬，绫珍惜着步入瞳孔的每一粒光，那些从天依的发丝、脸颊划过的，带着属于她的旖旎，轰击着明明做好防备的绫的心尖。\n\n&emsp;&emsp;收尾的音调扬起，灯光，也是那样应景呢。", "description": "对于舞台效果，灯光是重要的角色。背景屏幕是一个 $n \\times n$ 的矩形，行从左到右，列从上到下编号为 $1\\sim n$，并用 $(x,y)$ 表示第 $x$ 行第 $y$ 列的灯光单元。\n\n作为御用灯光师的阿绫设计了一个控制背景灯光效果的程序。她设定了两个长度为 $m$ 的**递增**整数序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，且满足 $0\\le x_1,y_1$，$x_m,y_m\\le n$。每次灯光变换，程序会均匀地随机生成两对整数 $(i_1,i_2),(j_1,j_2)$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$，转换满足 $x_{i_1}<r\\le x_{i_2}$，$y_{j_1}<c\\le y_{j_2}$ 的所有灯光单元 $(r,c)$ 的状态（亮变为熄，熄变为亮）。\n\n表演开始时，所有灯光单元处于熄灭状态；经计算，到表演结束时，一共会发生 $k$ 次灯光变换。而表演落幕时的灯光效果极为关键，所以阿绫想知道，表演落幕时，期望有多少个灯光单元是亮着的？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n有一个 $n\\times n$ 的矩阵，初始所有元素的值为 $0$。给出递增序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，其中 $0\\le x_1,y_1$，$x_m,y_m\\le n$，一次操作定义为：\n\n- 随机选出四个整数 $i_1,i_2,j_1,j_2$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$。\n- 把以 $(x_{i_1}+1,y_{j_1}+1)$ 为左上角，$(x_{i_2},y_{j_2})$ 为右下角的子矩阵的每个元素异或 $1$。\n\n求 $k$ 次操作后矩阵内元素之和的期望值。答案对 $998244353$ 取模。", "inputFormat": "第一行三个整数，分别为 $n,m,k$ 。\n\n第二行 $m$ 个整数，其中第 $i$ 个数表示 $x_i$ 。\n\n第三行 $m$ 个整数，其中第 $i$ 个数表示 $y_i$ 。\n\n", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "#### 样例解释 1\n\n样例中，$\\{x_m\\}=\\{y_m\\}=\\{0,1,2\\}$。可以发现，此 $2\\times 2$ 矩阵的任意一个子矩阵都可以被变换。当子矩阵大小分别为 $1,2,4$ 时，对应方案数分别为 $4,4,1$，由于只操作一次，所以对应的最终矩阵元素之和分别为 $4\\times1,4\\times2,1\\times 4$。于是，答案为 $\\frac{4+8+4}{4+4+1}=\\frac{16}9$。\n\n#### 数据规模与约定  \n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$2\\le m\\le \\min(n+1,10^3)$，$1\\le n\\le10^9$，$1\\le k\\le 10^6$，保证 $x_i$ 互不相等且递增，$y_i$ 互不相等且递增。\n\n| 子任务 | 分值 |     $n$      |   $m$    |     $k$      |\n| :----: | :--: | :----------: | :------: | :----------: |\n|   1    |  10  |   $ \\le 4$   | $ \\le 3$ |   $ \\le 2$   |\n|   2    |  5   |      /       |   $2$    |      /       |\n|   3    |  25  | $ \\le 10^2 $ |    /     | $ \\le 10^2 $ |\n|   4    |  20  | $ \\le 10^9 $ |    /     | $ \\le 10^2 $ |\n|   5    |  20  | $ \\le 10^2 $ |    /     | $ \\le 10^6 $ |\n|   6    |  20  |      /       |    /     |      /       |\n\n\n\n\n\n------------\n", "locale": "zh-CN"}}}
{"pid": "P7246", "type": "P", "difficulty": 6, "samples": [["1\n4\n1 2 1 2\n1 2\n2 3\n2 4", "2"], ["1\n8\n1 4 2 8 5 7 8 1\n1 2\n2 3\n2 4\n2 5\n1 6\n6 7\n6 8", "19"], ["2\n10086001 100000", "26892182890608"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "手势密码", "background": "&emsp;&emsp;众目睽睽之下被要求解锁另一个人的手机是一件非常恐怖的事。\n\n&emsp;&emsp;——特别是密码关于自己的时候。\n\n---\n\n&emsp;&emsp;被堆在讲台周围乌压压的同学围着，小灰毛表示自己真的很难。作为班长的阿绫被叫去开会，存着月考名次表的手机被交给天依保管。但消息不出意料地走漏，现在一班觊觎着分数数据的饿狼一致要求天依打开手机……\n\n&emsp;&emsp;“真不知道密码啊！”拖延着，心里早就猜到手势密码的答案。\n\n&emsp;&emsp;最后，试探而肯定地划出一个字母“Y”，解锁成功。什么意思呢？首先排除“依”的首字母。\n\n&emsp;&emsp;这个时候肯定有起哄的啦！\n\n&emsp;&emsp;“懂的都懂\\~”“别问，问就是 [XX即是正义！](https://www.bilibili.com/video/BV1z741137vQ)”……", "description": "乐正大小姐用的手机很高级，所以她的手势密码也很花哨。\n\n具体地，现在有一棵 $n$ 个结点的树，对于两个结点 $u,v$，当且仅当 $(u,v)$ 是一条树边时，手势才能从其中一个点（$u$ 或 $v$）划向另一个点（$v$ 或 $u$）。更奇怪的是，这种手势密码不限制仅划一次，但每次划出的路径必须是树上的一条简单路径。\n\n现在阿绫告诉了天依在她的密码中每个结点被手势划过的次数（作为手势的起点或终点也算划过一次），其中第 $i$ 个结点划过 $a_i$ 次。那么，天依至少要划多少次才能解开密码呢？\n\n----\n\n#### 简化题意\n\n有一棵带点权的树。定义一次操作为选择树上的一条简单路径，并将这条简单路径上的所有点点权减去 $1$。问至少需要多少次操作，使树上所有点的点权**恰好**变为 $0$。", "inputFormat": "第一行一个整数 $op$，表示数据输入方式类型。\n\n如果 $op=1$：\n\n第二行一个正整数 $n$，表示结点个数。\n\n第三行 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，表示每个结点的点权。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示一条连接结点 $u$ 和结点 $v$ 的树边。\n\n如果 $op=2$：\n\n我们将给出一个输入的模板：\n```cpp\n#include <cstdio>\nint a[3000005], u[3000005],v[3000005];\nnamespace Generate{\n\tint n,seed;\n\tstatic const int mod=1e9;\n\tint Rand(int x){\n\t\tseed=(1ll*seed*0x66CCF+19260817ll)%x+1;\n\t\tseed=(1ll*seed*0x77CCF+20060428ll)%x+1;\n\t\tseed=(1ll*seed*0x88CCF+12345678ll)%x+1;\n\t\tseed=(1ll*seed*0x33CCCCFF+10086001ll)%x+1;\n\t\treturn seed;\n\t}\n\tvoid RS(int* a, int* u, int* v){ //你需要传入三个参数，分别表示点权，一条边的两个端点 \n\t\tint cnt=0;\n\t\tfor(int i=1;i<=n;i++)a[i]=Rand(mod); \n\t\tfor(int i=2;i<=n;i++){\n\t\t\tint fa=Rand(i-1);\n\t\t\tcnt++;\n\t\t\tu[cnt]=fa,v[cnt]=i;\n\t\t}\n\t}\n};\nint main () {\n\tint op;\n\tscanf(\"%d\",&op);\n\tif(op==1){\n\t\t//直接输入 \n\t}else{\n\t\tint n;\n\t\tscanf(\"%d %d\",&Generate::seed,&n);//输入种子和n \n\t\tGenerate::n=n;//记得赋值 \n\t\tGenerate::RS(a,u,v); //开始工作 \n\t}\n\treturn 0;\n}\n```\n\n第二行两个整数 $seed$ 和 $n$，表示生成器的种子与结点个数。", "outputFormat": "一行一个整数，表示最少的操作次数。", "hint": "#### 样例解释 2\n给出的树形态如下，括号中的数字表示该点的点权。\n\n![样例2](https://cdn.luogu.com.cn/upload/image_hosting/djmtr8s9.png)\n\n一种最优的操作方案为 $(3,4)\\times2,(4,5),(4,4)\\times4,(5,5)\\times4,(4,7),(7,8),(6,7)\\times6$。其中 $(u,v)$ 表示对从 $u$ 到 $v$ 的简单路径进行一次操作。\n\n------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$op\\in\\{1,2\\}$，$1\\le seed\\le 10^9$，$1\\le n\\le 3\\times 10^6$，$0\\le a_i\\le10^9$，$1\\le u,v\\le n$，保证 $u\\ne v$。\n\n| 子任务 | 分值 |    $op$    |           $n$            |      $a_i$      | 特殊性质 |\n| :----: | :--: | :--------: | :----------------------: | :-------------: | :------: |\n|   1    |  1   |    $1$     |           $2$            |        /        |    /     |\n|   2    |  4   |    $1$     |           $3$            |        /        |    /     |\n|   3    |  10  |    $1$     |      $\\leq 6$       |  $\\leq 3$  |    /     |\n|   4    |  5   |    $1$     |     $\\leq 10^6$     |        /        |    A     |\n|   5    |  15  |    $1$     |      $\\leq 50$      |        /        |    /     |\n|   6    |  5   |    $1$     | $\\leq 5\\times 10^3$ | $\\leq 100$ |    B     |\n|   7    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    B     |\n|   8    |  10  |    $1$     |     $\\leq 10^5$     |        /        |    C     |\n|   9    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    /     |\n|   10   |  30  |    /     |            /             |        /        |    /     |\n\n\n- 特殊限制 A：对于第 $i$ 条边 $(u,v)$，保证 $u=i,v=i+1$。\n- 特殊限制 B：输入的边构成一棵满二叉树。\n- 特殊限制 C：对于 $\\forall 1\\le i\\le n$ 有 $a_i=1$。\n\n\n\n\n------------\n#### 提示\nSubtask 10 时限 2S。\n\n对于 $op=2$ 的数据，输入的模板只用于减小输入量，标程不依赖该数据生成方式。\n\n【2024.7.2 补充】@[Edward1002001](https://www.luogu.com.cn/user/151415) 指出，Subtask 10 的数据生成器生成的树形并没有随机性。（因为在生成 $2$ 的父亲时，最终 `seed` 一定会变为 $1$，此后的随机序列就完全相同了。）这一点不影响数据的正确性，但导致数据强度下降，我们为此致歉。鉴于本题提交较多，不做题面和数据修改。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "手势密码", "background": "&emsp;&emsp;众目睽睽之下被要求解锁另一个人的手机是一件非常恐怖的事。\n\n&emsp;&emsp;——特别是密码关于自己的时候。\n\n---\n\n&emsp;&emsp;被堆在讲台周围乌压压的同学围着，小灰毛表示自己真的很难。作为班长的阿绫被叫去开会，存着月考名次表的手机被交给天依保管。但消息不出意料地走漏，现在一班觊觎着分数数据的饿狼一致要求天依打开手机……\n\n&emsp;&emsp;“真不知道密码啊！”拖延着，心里早就猜到手势密码的答案。\n\n&emsp;&emsp;最后，试探而肯定地划出一个字母“Y”，解锁成功。什么意思呢？首先排除“依”的首字母。\n\n&emsp;&emsp;这个时候肯定有起哄的啦！\n\n&emsp;&emsp;“懂的都懂\\~”“别问，问就是 [XX即是正义！](https://www.bilibili.com/video/BV1z741137vQ)”……", "description": "乐正大小姐用的手机很高级，所以她的手势密码也很花哨。\n\n具体地，现在有一棵 $n$ 个结点的树，对于两个结点 $u,v$，当且仅当 $(u,v)$ 是一条树边时，手势才能从其中一个点（$u$ 或 $v$）划向另一个点（$v$ 或 $u$）。更奇怪的是，这种手势密码不限制仅划一次，但每次划出的路径必须是树上的一条简单路径。\n\n现在阿绫告诉了天依在她的密码中每个结点被手势划过的次数（作为手势的起点或终点也算划过一次），其中第 $i$ 个结点划过 $a_i$ 次。那么，天依至少要划多少次才能解开密码呢？\n\n----\n\n#### 简化题意\n\n有一棵带点权的树。定义一次操作为选择树上的一条简单路径，并将这条简单路径上的所有点点权减去 $1$。问至少需要多少次操作，使树上所有点的点权**恰好**变为 $0$。", "inputFormat": "第一行一个整数 $op$，表示数据输入方式类型。\n\n如果 $op=1$：\n\n第二行一个正整数 $n$，表示结点个数。\n\n第三行 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，表示每个结点的点权。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示一条连接结点 $u$ 和结点 $v$ 的树边。\n\n如果 $op=2$：\n\n我们将给出一个输入的模板：\n```cpp\n#include <cstdio>\nint a[3000005], u[3000005],v[3000005];\nnamespace Generate{\n\tint n,seed;\n\tstatic const int mod=1e9;\n\tint Rand(int x){\n\t\tseed=(1ll*seed*0x66CCF+19260817ll)%x+1;\n\t\tseed=(1ll*seed*0x77CCF+20060428ll)%x+1;\n\t\tseed=(1ll*seed*0x88CCF+12345678ll)%x+1;\n\t\tseed=(1ll*seed*0x33CCCCFF+10086001ll)%x+1;\n\t\treturn seed;\n\t}\n\tvoid RS(int* a, int* u, int* v){ //你需要传入三个参数，分别表示点权，一条边的两个端点 \n\t\tint cnt=0;\n\t\tfor(int i=1;i<=n;i++)a[i]=Rand(mod); \n\t\tfor(int i=2;i<=n;i++){\n\t\t\tint fa=Rand(i-1);\n\t\t\tcnt++;\n\t\t\tu[cnt]=fa,v[cnt]=i;\n\t\t}\n\t}\n};\nint main () {\n\tint op;\n\tscanf(\"%d\",&op);\n\tif(op==1){\n\t\t//直接输入 \n\t}else{\n\t\tint n;\n\t\tscanf(\"%d %d\",&Generate::seed,&n);//输入种子和n \n\t\tGenerate::n=n;//记得赋值 \n\t\tGenerate::RS(a,u,v); //开始工作 \n\t}\n\treturn 0;\n}\n```\n\n第二行两个整数 $seed$ 和 $n$，表示生成器的种子与结点个数。", "outputFormat": "一行一个整数，表示最少的操作次数。", "hint": "#### 样例解释 2\n给出的树形态如下，括号中的数字表示该点的点权。\n\n![样例2](https://cdn.luogu.com.cn/upload/image_hosting/djmtr8s9.png)\n\n一种最优的操作方案为 $(3,4)\\times2,(4,5),(4,4)\\times4,(5,5)\\times4,(4,7),(7,8),(6,7)\\times6$。其中 $(u,v)$ 表示对从 $u$ 到 $v$ 的简单路径进行一次操作。\n\n------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$op\\in\\{1,2\\}$，$1\\le seed\\le 10^9$，$1\\le n\\le 3\\times 10^6$，$0\\le a_i\\le10^9$，$1\\le u,v\\le n$，保证 $u\\ne v$。\n\n| 子任务 | 分值 |    $op$    |           $n$            |      $a_i$      | 特殊性质 |\n| :----: | :--: | :--------: | :----------------------: | :-------------: | :------: |\n|   1    |  1   |    $1$     |           $2$            |        /        |    /     |\n|   2    |  4   |    $1$     |           $3$            |        /        |    /     |\n|   3    |  10  |    $1$     |      $\\leq 6$       |  $\\leq 3$  |    /     |\n|   4    |  5   |    $1$     |     $\\leq 10^6$     |        /        |    A     |\n|   5    |  15  |    $1$     |      $\\leq 50$      |        /        |    /     |\n|   6    |  5   |    $1$     | $\\leq 5\\times 10^3$ | $\\leq 100$ |    B     |\n|   7    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    B     |\n|   8    |  10  |    $1$     |     $\\leq 10^5$     |        /        |    C     |\n|   9    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    /     |\n|   10   |  30  |    /     |            /             |        /        |    /     |\n\n\n- 特殊限制 A：对于第 $i$ 条边 $(u,v)$，保证 $u=i,v=i+1$。\n- 特殊限制 B：输入的边构成一棵满二叉树。\n- 特殊限制 C：对于 $\\forall 1\\le i\\le n$ 有 $a_i=1$。\n\n\n\n\n------------\n#### 提示\nSubtask 10 时限 2S。\n\n对于 $op=2$ 的数据，输入的模板只用于减小输入量，标程不依赖该数据生成方式。\n\n【2024.7.2 补充】@[Edward1002001](https://www.luogu.com.cn/user/151415) 指出，Subtask 10 的数据生成器生成的树形并没有随机性。（因为在生成 $2$ 的父亲时，最终 `seed` 一定会变为 $1$，此后的随机序列就完全相同了。）这一点不影响数据的正确性，但导致数据强度下降，我们为此致歉。鉴于本题提交较多，不做题面和数据修改。", "locale": "zh-CN"}}}
{"pid": "P7247", "type": "P", "difficulty": 7, "samples": [["3\n1 2 3\n1 2 1\n2 3 1", "332748127"], ["5\n2 3 4 2 5\n1 2 3\n2 4 2\n2 5 5\n1 3 3", "615584181"], ["2\n1 2\n1 2 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "教材运送", "background": "&emsp;&emsp;“如果天依来当志愿者的话，说不定会被累死哟。”\n\n------------\n\n&emsp;&emsp;“七年三班又在什么鬼地方啊……”，不信这个邪的小灰毛喘息着抱怨。发丝凝着汗珠，慵懒地趴在白皙的后颈，粘黏感若有若无地在心里描画着燥热。数十本教材抵在胸口，大腿前伸直的双手托着艰难的重量，贴着扶手一步一步挪上漫长的台阶。\n\n&emsp;&emsp;背后，一撮可爱的棕色呆毛蹦蹦跳跳地跟了上来，“所以\\~需要帮忙吗？”", "description": "魔都中学的教学楼是一棵有 $n$ 个结点的树，结点 $i$ 对应编号为 $i$，人数为 $a_i$ 的教室。无向边 $i$ 描述为 $(u_i,v_i,b_i)$，对应连接教室 $u_i$ 和 $v_i$，垂直高差为 $b_i\\ \\text{m}$ 的台阶。\n\n新学期开学，需要为同学们分发教材，不过传送系统的故障导致教材散落在各个教室。当天依在教室 $u$ 时，会随机抱起属于教室 $v~(v\\in[1,n])$ 的 $a_v$ 本教材，并沿连接教室 $u,v$ 的唯一简单路径将这些教材送到教室 $v$。设天依走过的台阶高差为 $b_1,b_2,\\cdots,b_m\\ \\text{m}$，每本教材重力为 $1\\text{N}$，那么称此次运送中，天依的托举力做功的绝对值（上台阶取正功，下台阶取负功的绝对值）为 $W=a_v\\left( \\sum_{i=1}^{m} b_i \\right)\\text{J}$。换句话来说，一次运送的代价是**终点点权**与**走过路径边权之和**的乘积。\n\n初始时，天依在 $1$ 号教室，但她不认识路，所以阿绫会带着天依运送教材，使得天依到达过每个教室至少一次。那么在达到这一目标之前，天依托举力做功的绝对值之和的期望为多少 $\\text{J}$？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n给定一棵包含 $n$ 个点，有点权和边权的无根树。设当前位置 $s$（初始时 $s=1$），每次在 $n$ 个结点内随机选择目标结点 $t$，付出「$s$ 到 $t$ 的简单路径上的边权之和」$\\times$「$t$ 的点权」的代价，标记（可以重复标记）点 $t$ 并把 $s$ 置为 $t$。求每个点至少被标记一次时（其中 $1$ 号结点一开始就被标记）代价之和的期望。答案对 $998244353$ 取模。", "inputFormat": "第一行输入一个整数 $n$，含义如题所述。\n\n第二行有 $n$ 个整数，表示每个教室的人数。\n\n随后 $n-1$ 行，每行三个整数 $u_i,v_i,b_i$ 表示教室 $u_i$ 与教室 $v_i$ 之间有一垂直高差为 $b_i\\ \\text{m}$ 的台阶。", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le a_i,b_i\\lt 998244353$，$1\\le u_i,v_i\\le n$，保证 $u_i\\ne v_i$。\n\n| 子任务 | 分值 |         $n$          |               特殊限制                |\n| :----: | :--: | :------------------: | :-----------------------------------: |\n|   1    |  5  |      $ \\le 3$       |                   /                   |\n|   2    |  10  |      $ \\le 13$       |                   /                   |\n|   3    |  10  |      $ \\le 20$       |                   /                   |\n|   4    |  25  | $ \\le 5\\times 10^3 $ |                   /                   |\n|   5    |  5   |          /           | 对于 $\\forall 1\\le i\\le n$，$a_i=1$ |\n|   6    |  10  |          /           | 对于每一条边，$v_i=u_i+1$，即树是一条链。 |\n|   7    |  35  |          /           |                   /                   |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "教材运送", "background": "&emsp;&emsp;“如果天依来当志愿者的话，说不定会被累死哟。”\n\n------------\n\n&emsp;&emsp;“七年三班又在什么鬼地方啊……”，不信这个邪的小灰毛喘息着抱怨。发丝凝着汗珠，慵懒地趴在白皙的后颈，粘黏感若有若无地在心里描画着燥热。数十本教材抵在胸口，大腿前伸直的双手托着艰难的重量，贴着扶手一步一步挪上漫长的台阶。\n\n&emsp;&emsp;背后，一撮可爱的棕色呆毛蹦蹦跳跳地跟了上来，“所以\\~需要帮忙吗？”", "description": "魔都中学的教学楼是一棵有 $n$ 个结点的树，结点 $i$ 对应编号为 $i$，人数为 $a_i$ 的教室。无向边 $i$ 描述为 $(u_i,v_i,b_i)$，对应连接教室 $u_i$ 和 $v_i$，垂直高差为 $b_i\\ \\text{m}$ 的台阶。\n\n新学期开学，需要为同学们分发教材，不过传送系统的故障导致教材散落在各个教室。当天依在教室 $u$ 时，会随机抱起属于教室 $v~(v\\in[1,n])$ 的 $a_v$ 本教材，并沿连接教室 $u,v$ 的唯一简单路径将这些教材送到教室 $v$。设天依走过的台阶高差为 $b_1,b_2,\\cdots,b_m\\ \\text{m}$，每本教材重力为 $1\\text{N}$，那么称此次运送中，天依的托举力做功的绝对值（上台阶取正功，下台阶取负功的绝对值）为 $W=a_v\\left( \\sum_{i=1}^{m} b_i \\right)\\text{J}$。换句话来说，一次运送的代价是**终点点权**与**走过路径边权之和**的乘积。\n\n初始时，天依在 $1$ 号教室，但她不认识路，所以阿绫会带着天依运送教材，使得天依到达过每个教室至少一次。那么在达到这一目标之前，天依托举力做功的绝对值之和的期望为多少 $\\text{J}$？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n给定一棵包含 $n$ 个点，有点权和边权的无根树。设当前位置 $s$（初始时 $s=1$），每次在 $n$ 个结点内随机选择目标结点 $t$，付出「$s$ 到 $t$ 的简单路径上的边权之和」$\\times$「$t$ 的点权」的代价，标记（可以重复标记）点 $t$ 并把 $s$ 置为 $t$。求每个点至少被标记一次时（其中 $1$ 号结点一开始就被标记）代价之和的期望。答案对 $998244353$ 取模。", "inputFormat": "第一行输入一个整数 $n$，含义如题所述。\n\n第二行有 $n$ 个整数，表示每个教室的人数。\n\n随后 $n-1$ 行，每行三个整数 $u_i,v_i,b_i$ 表示教室 $u_i$ 与教室 $v_i$ 之间有一垂直高差为 $b_i\\ \\text{m}$ 的台阶。", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le a_i,b_i\\lt 998244353$，$1\\le u_i,v_i\\le n$，保证 $u_i\\ne v_i$。\n\n| 子任务 | 分值 |         $n$          |               特殊限制                |\n| :----: | :--: | :------------------: | :-----------------------------------: |\n|   1    |  5  |      $ \\le 3$       |                   /                   |\n|   2    |  10  |      $ \\le 13$       |                   /                   |\n|   3    |  10  |      $ \\le 20$       |                   /                   |\n|   4    |  25  | $ \\le 5\\times 10^3 $ |                   /                   |\n|   5    |  5   |          /           | 对于 $\\forall 1\\le i\\le n$，$a_i=1$ |\n|   6    |  10  |          /           | 对于每一条边，$v_i=u_i+1$，即树是一条链。 |\n|   7    |  35  |          /           |                   /                   |\n", "locale": "zh-CN"}}}
{"pid": "P7248", "type": "P", "difficulty": 3, "samples": [["4\n((()", "2"], ["8\n((((((((", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["动态规划 DP", "2012", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 括号 (Day1)", "background": "", "description": "一个合法括号序列的定义如下：\n\n- () 和 [] 是合法括号序列\n- 若 A 是合法括号序列，则 (A) 和 [A] 也是合法括号序列\n- 若 A 和 B 都是合法括号序列，则 AB 也是合法括号序列\n\n在包含至少一对方括号的合法括号序列中，我们可以将 [ 和 ] 都用 ( 代替，这样就能够得到一个不合法括号序列。\n\n例如 (( 和 ((((())) 都是不合法括号序列，前者可以由合法括号序列 \\[] 转化而来，后者可以通过 \\[]((()))，(\\[](()))，((\\[]())) 和 (((\\[]))) 这四种合法括号序列转化而来。\n\n现在给出一个不合法括号序列，求有多少种合法括号序列，在将其中的方括号用 ( 代替后，可以得到给定的括号序列。", "inputFormat": "第一行一个正整数 $n$，表示给出的不合法括号序列的长度。  \n第二行一个长度为 $n$ 的字符串，代表给出的序列，只包含 ( 和 )。", "outputFormat": "输出符合要求的合法括号序列总数对 $10^9+9$ 取模后的结果。", "hint": "**【样例解释#1】** \n\n满足条件的合法括号序列有两种：\\[]() 和 ([])。\n\n**【数据范围】**\n\n- 对于 20% 的数据，满足 $n \\leq 50$\n- 对于 50% 的数据，满足 $n \\leq 1000$\n- 对于 100% 的数据，满足 $2\\leq n \\leq 30000$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T1. Brackets](http://www.boi2012.lv/data/day1/eng/brackets.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 括号 (Day1)", "background": "", "description": "一个合法括号序列的定义如下：\n\n- () 和 [] 是合法括号序列\n- 若 A 是合法括号序列，则 (A) 和 [A] 也是合法括号序列\n- 若 A 和 B 都是合法括号序列，则 AB 也是合法括号序列\n\n在包含至少一对方括号的合法括号序列中，我们可以将 [ 和 ] 都用 ( 代替，这样就能够得到一个不合法括号序列。\n\n例如 (( 和 ((((())) 都是不合法括号序列，前者可以由合法括号序列 \\[] 转化而来，后者可以通过 \\[]((()))，(\\[](()))，((\\[]())) 和 (((\\[]))) 这四种合法括号序列转化而来。\n\n现在给出一个不合法括号序列，求有多少种合法括号序列，在将其中的方括号用 ( 代替后，可以得到给定的括号序列。", "inputFormat": "第一行一个正整数 $n$，表示给出的不合法括号序列的长度。  \n第二行一个长度为 $n$ 的字符串，代表给出的序列，只包含 ( 和 )。", "outputFormat": "输出符合要求的合法括号序列总数对 $10^9+9$ 取模后的结果。", "hint": "**【样例解释#1】** \n\n满足条件的合法括号序列有两种：\\[]() 和 ([])。\n\n**【数据范围】**\n\n- 对于 20% 的数据，满足 $n \\leq 50$\n- 对于 50% 的数据，满足 $n \\leq 1000$\n- 对于 100% 的数据，满足 $2\\leq n \\leq 30000$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T1. Brackets](http://www.boi2012.lv/data/day1/eng/brackets.pdf)", "locale": "zh-CN"}}}
{"pid": "P7249", "type": "P", "difficulty": 4, "samples": [["2 10\n0 0\n11 1", "5.545455"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2012", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 移动网络 (Day1)", "background": "", "description": "有一条线段与若干个点，求线段上的点离最近的点最远的距离。", "inputFormat": "第一行两个整数 $n$，$l$，代表总共有 $n$ 个点，线段端点为 $(0,0)$ 与 $(l,0)$。  \n接下来每行两个整数 $(x,y)$，描述了点的横纵坐标，保证没有两个点坐标相同。  \n给出点的坐标以横坐标为第一关键字，纵坐标为第二关键字升序排序。", "outputFormat": "输出最远距离。  \n\n本题开启 SPJ，你的答案与标准答案与标准答案误差不超过 $10^{-3}$ 即为正确。", "hint": "**【样例解释】** \n\n距离最远的点在两个点的中垂线与线段的交点处。\n\n**【数据范围】**\n\n- 对于 25% 的数据，满足 $n \\leq 5000$\n- 对于 50% 的数据，满足 $n \\leq 10^5$\n- 对于 100% 的数据，满足 $1\\leq n \\leq 10^6$，$1 \\leq l \\leq 10^9$，$-10^9 \\leq x_i,y_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T2. Mobile](http://www.boi2012.lv/data/day1/eng/mobile.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 移动网络 (Day1)", "background": "", "description": "有一条线段与若干个点，求线段上的点离最近的点最远的距离。", "inputFormat": "第一行两个整数 $n$，$l$，代表总共有 $n$ 个点，线段端点为 $(0,0)$ 与 $(l,0)$。  \n接下来每行两个整数 $(x,y)$，描述了点的横纵坐标，保证没有两个点坐标相同。  \n给出点的坐标以横坐标为第一关键字，纵坐标为第二关键字升序排序。", "outputFormat": "输出最远距离。  \n\n本题开启 SPJ，你的答案与标准答案与标准答案误差不超过 $10^{-3}$ 即为正确。", "hint": "**【样例解释】** \n\n距离最远的点在两个点的中垂线与线段的交点处。\n\n**【数据范围】**\n\n- 对于 25% 的数据，满足 $n \\leq 5000$\n- 对于 50% 的数据，满足 $n \\leq 10^5$\n- 对于 100% 的数据，满足 $1\\leq n \\leq 10^6$，$1 \\leq l \\leq 10^9$，$-10^9 \\leq x_i,y_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T2. Mobile](http://www.boi2012.lv/data/day1/eng/mobile.pdf)", "locale": "zh-CN"}}}
{"pid": "P7250", "type": "P", "difficulty": 4, "samples": [["6 6\n21 16 9 11 6 7\n21 21 10 14 15 9\n18 20 8 9 13 14\n11 10 9 9 8 13\n8 12 12 14 13 8\n7 13 12 9 5 1", "4\n21 0\n15 11\n14 13\n13 12"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2012", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 山峰 (Day1)", "background": "", "description": "有一个 $N \\times M$ 大小的岛屿，每个点有不同的海拔。定义相邻为两个点横纵坐标差均不超过 $1$。定义路径为任意两个连续点都相邻的序列。定义平坦的区域是一组联通的海拔相同的点的极大集合，山峰是一个不与任何海拔更高的点相邻的平坦区域。\n\n给出这个岛屿上每个点的海拔，你需要求出岛屿上所有的山峰与前往比其高度更高的山峰所需经过的最低点的海拔的最大值。", "inputFormat": "第一行两个整数 $N,M$，代表地图的长和宽。\n\n接下来 $N$ 行，每行 $M$ 个整数 $E_{i,j}$ ，描述了 $(i,j)$ 的海拔。", "outputFormat": "第一行一个整数 $P$，代表岛上的山峰数。\n\n接下来 $P$ 行，每行两个整数 $h_0,h_1$，代表某座山峰的海拔，以及从该山峰出发到达更高的山峰所需经过的最低点的海拔的最大值。\n\n输出应以 $h_0$ 为第一关键字，$h_1$ 为第二关键字降序排列，特别的，对于最高峰，$h_1=0$", "hint": "**【样例解释】** \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flr0h9rs.png)  \n如上图所示，其中圆圈圈出的为山峰，从海拔为15的山峰前往其他山峰的一条路径用深色标出。\n\n**【数据范围】**\n\n- 对于 15% 的数据，满足 $\\min (N,M)\\leq 2$\n- 对于 50% 的数据，满足 $P \\leq 500$\n- 对于 80% 的数据，满足 $P \\leq 5000$\n- 对于 100% 的数据，满足 $1 \\leq N,M \\leq 2000$，$N \\times M \\leq 10^5$，$1 \\leq E_{i,j} \\leq 10^6$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T3. Peaks](http://www.boi2012.lv/data/day1/eng/peaks.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 山峰 (Day1)", "background": "", "description": "有一个 $N \\times M$ 大小的岛屿，每个点有不同的海拔。定义相邻为两个点横纵坐标差均不超过 $1$。定义路径为任意两个连续点都相邻的序列。定义平坦的区域是一组联通的海拔相同的点的极大集合，山峰是一个不与任何海拔更高的点相邻的平坦区域。\n\n给出这个岛屿上每个点的海拔，你需要求出岛屿上所有的山峰与前往比其高度更高的山峰所需经过的最低点的海拔的最大值。", "inputFormat": "第一行两个整数 $N,M$，代表地图的长和宽。\n\n接下来 $N$ 行，每行 $M$ 个整数 $E_{i,j}$ ，描述了 $(i,j)$ 的海拔。", "outputFormat": "第一行一个整数 $P$，代表岛上的山峰数。\n\n接下来 $P$ 行，每行两个整数 $h_0,h_1$，代表某座山峰的海拔，以及从该山峰出发到达更高的山峰所需经过的最低点的海拔的最大值。\n\n输出应以 $h_0$ 为第一关键字，$h_1$ 为第二关键字降序排列，特别的，对于最高峰，$h_1=0$", "hint": "**【样例解释】** \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flr0h9rs.png)  \n如上图所示，其中圆圈圈出的为山峰，从海拔为15的山峰前往其他山峰的一条路径用深色标出。\n\n**【数据范围】**\n\n- 对于 15% 的数据，满足 $\\min (N,M)\\leq 2$\n- 对于 50% 的数据，满足 $P \\leq 500$\n- 对于 80% 的数据，满足 $P \\leq 5000$\n- 对于 100% 的数据，满足 $1 \\leq N,M \\leq 2000$，$N \\times M \\leq 10^5$，$1 \\leq E_{i,j} \\leq 10^6$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T3. Peaks](http://www.boi2012.lv/data/day1/eng/peaks.pdf)", "locale": "zh-CN"}}}
{"pid": "P7251", "type": "P", "difficulty": 5, "samples": [["4 3\n1 4\n2 3\n2 4", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2014", "各省省选", "江苏", "强连通分量"], "title": "[JSOI2014] 强连通图", "background": "", "description": "JYY 最近痴迷于图的强连通性，所以对于任何有向图，JYY 都希望增加一些边使得这个图变成强连通图。JYY现在得到了一个 $n$ 个点 $m$ 条边的有向图，所有点从 $1$ 到 $n$ 编号。\n\nJYY 想知道：\n\n- 在给定的图中，最多能选出多少个点，使得这些点在原图中两两可达？\n\n- 在给定的图中，最少增加多少条边，可以使得这个图变成强连通图？\n\n其中，一个有向图 $G(V,E)$是强连通的，当且仅当任意顶点 $a,b\\in V,a\\neq b$之间都存在 $a\\to b$ 和 $b\\to a$ 的路径。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $x$ 和 $y$，表示图中有一条从 $x$ 到 $y$ 的有向边。", "outputFormat": "两行，第一行表示第一个问题的答案，第二行表示第二个问题的答案。", "hint": "### 样例解释 1\n\n对于第一个问题，无法选出互相连通两个点，答案为 $1$。\n\n对于第二个问题，一种加边数最小的方案为 $(3,1)$ 和 $(4,2)$，答案为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5,1\\leq m\\leq 3\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 强连通图", "background": "", "description": "JYY 最近痴迷于图的强连通性，所以对于任何有向图，JYY 都希望增加一些边使得这个图变成强连通图。JYY现在得到了一个 $n$ 个点 $m$ 条边的有向图，所有点从 $1$ 到 $n$ 编号。\n\nJYY 想知道：\n\n- 在给定的图中，最多能选出多少个点，使得这些点在原图中两两可达？\n\n- 在给定的图中，最少增加多少条边，可以使得这个图变成强连通图？\n\n其中，一个有向图 $G(V,E)$是强连通的，当且仅当任意顶点 $a,b\\in V,a\\neq b$之间都存在 $a\\to b$ 和 $b\\to a$ 的路径。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $x$ 和 $y$，表示图中有一条从 $x$ 到 $y$ 的有向边。", "outputFormat": "两行，第一行表示第一个问题的答案，第二行表示第二个问题的答案。", "hint": "### 样例解释 1\n\n对于第一个问题，无法选出互相连通两个点，答案为 $1$。\n\n对于第二个问题，一种加边数最小的方案为 $(3,1)$ 和 $(4,2)$，答案为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5,1\\leq m\\leq 3\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7252", "type": "P", "difficulty": 5, "samples": [["5 3 \n1 \n2 \n2\n1\n1\n1 5\n2 5\n2 4", "1\n0\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2011", "各省省选", "江苏", "O2优化"], "title": "[JSOI2011] 棒棒糖", "background": null, "description": "Coffee 的世界里也是有棒棒糖卖的，Coffee 买了 $n$ 只连着的棒棒糖。这 $n$ 只棒棒糖包裹在小塑料袋中，排成\n一列，相邻的两只棒棒糖的塑料袋是接起来的。为了方便，我们把棒棒糖从左到右编号为 $1\\cdots n$。\n\n每只棒棒糖有一种口味。第 $i$ 只的口味是 $c_i$。两只棒棒糖 $i,j$ 的口味相同，当且仅当 $c_i=c_j$。Coffee 对 $m$ 只棒棒糖总体口味的评价比较奇怪。如果这 $m$ 只棒棒糖中，有一种口味 $c_0$ 的数量严格大于总数的一半，那么 Coffee 认为这 $m$ 只棒棒糖主要是 $c_0$ 口味的。Coffee 知道，这里的 $c_0$ 如果存在就一定是唯一的。而当 $c_0$ 不存在时，Coffee 认为这 $m$ 只棒棒糖是混合口味的。\n\nCoffee 暂时舍不得吃棒棒糖，它在想一些好玩的问题。如果考虑棒棒糖序列的一个连续子序列 $s\\cdots t(1\\leq s\\leq t\\leq n)$，包括棒棒糖 $s$ 和 $t$。那么这 $t-s+1$ 只棒棒糖的总体口味是什么呢？\n\nCoffee 有一堆这样的问题，一共 $m$ 个。第 $i$ 个问题是棒棒糖子序列 $s_i\\cdots t_i$ 的总体口味，请你帮忙解决。", "inputFormat": "第一行两个用空格隔开的整数，分别表示 $n,m$。\n\n接下来 $n$ 行，每行一个整数，表示 $c_i$。\n\n接下来 $m$ 行，每行两个整数，表示 $s_i,t_i$。", "outputFormat": "$m$ 行，每行一个整数，表示每个询问的总体口味。如果总体口味为混合口味则输出 $0$。", "hint": "### 样例解释 1\n\n在第一个询问中，口味 $1$ 出现 $3$ 次，大于总数的一半，所以总体口味为 $1$。\n\n在第二个询问中，没有一种口味出现次数大于总数的一半，所以为混合口味。\n\n在第三个询问中，口味 $2$ 出现 $2$ 次，大于总数的一半，所以总体口味为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n,m,c_i\\leq 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2011] 棒棒糖", "background": null, "description": "Coffee 的世界里也是有棒棒糖卖的，Coffee 买了 $n$ 只连着的棒棒糖。这 $n$ 只棒棒糖包裹在小塑料袋中，排成\n一列，相邻的两只棒棒糖的塑料袋是接起来的。为了方便，我们把棒棒糖从左到右编号为 $1\\cdots n$。\n\n每只棒棒糖有一种口味。第 $i$ 只的口味是 $c_i$。两只棒棒糖 $i,j$ 的口味相同，当且仅当 $c_i=c_j$。Coffee 对 $m$ 只棒棒糖总体口味的评价比较奇怪。如果这 $m$ 只棒棒糖中，有一种口味 $c_0$ 的数量严格大于总数的一半，那么 Coffee 认为这 $m$ 只棒棒糖主要是 $c_0$ 口味的。Coffee 知道，这里的 $c_0$ 如果存在就一定是唯一的。而当 $c_0$ 不存在时，Coffee 认为这 $m$ 只棒棒糖是混合口味的。\n\nCoffee 暂时舍不得吃棒棒糖，它在想一些好玩的问题。如果考虑棒棒糖序列的一个连续子序列 $s\\cdots t(1\\leq s\\leq t\\leq n)$，包括棒棒糖 $s$ 和 $t$。那么这 $t-s+1$ 只棒棒糖的总体口味是什么呢？\n\nCoffee 有一堆这样的问题，一共 $m$ 个。第 $i$ 个问题是棒棒糖子序列 $s_i\\cdots t_i$ 的总体口味，请你帮忙解决。", "inputFormat": "第一行两个用空格隔开的整数，分别表示 $n,m$。\n\n接下来 $n$ 行，每行一个整数，表示 $c_i$。\n\n接下来 $m$ 行，每行两个整数，表示 $s_i,t_i$。", "outputFormat": "$m$ 行，每行一个整数，表示每个询问的总体口味。如果总体口味为混合口味则输出 $0$。", "hint": "### 样例解释 1\n\n在第一个询问中，口味 $1$ 出现 $3$ 次，大于总数的一半，所以总体口味为 $1$。\n\n在第二个询问中，没有一种口味出现次数大于总数的一半，所以为混合口味。\n\n在第三个询问中，口味 $2$ 出现 $2$ 次，大于总数的一半，所以总体口味为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n,m,c_i\\leq 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P7253", "type": "P", "difficulty": 0, "samples": [["7 2\n3 -2\n0 8\n-4 8\n-1 4\n-2 13\n-4 8\n1 5", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2012", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 城市烟花 (Day2)", "background": "", "description": "这是一座有着无限网格状街道的城市，有一些市民住在网格的交点处。(可能会有两个市民住在相同的地方)\n\n现在你需要选择某个竖直街道与水平街道 $0$ 的交点处进行烟花表演，市民需要赶到这个地点所在的水平街道或竖直街道上来观看，同时他们离燃放地点的距离不能小于 $S$。你需要选择一个燃放地点以最小化市民们的移动距离。", "inputFormat": "第一行两个整数 $N$，$S$，分别代表市民总数和最小距离。\n\n接下来 $N$ 行每行两个整数 $H_i$，$V_i$，表示这位市民住在水平街道 $H_i$ 与 竖直街道 $V_i$ 交点处。", "outputFormat": "输出移动距离和的最小值。", "hint": "**【样例解释】** \n\n注意水平街道 $-4$ 与竖直街道 $8$ 交点处有两个人居住。\n\n最优解是选择竖直街道 $8$，此时距离取最小值 $9$。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，满足 $0 \\leq V_i \\leq 5000$\n- 对于 $40\\%$ 的数据，满足 $N \\leq 5000$\n- 对于 $100\\%$ 的数据，满足 $1 \\leq N \\leq 10^5$，$1 \\leq S \\leq 10^6$，$-10^9 \\leq H_i,V_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T1. Fireworks in RightAngleles](http://www.boi2012.lv/data/day2/eng/fire.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 城市烟花 (Day2)", "background": "", "description": "这是一座有着无限网格状街道的城市，有一些市民住在网格的交点处。(可能会有两个市民住在相同的地方)\n\n现在你需要选择某个竖直街道与水平街道 $0$ 的交点处进行烟花表演，市民需要赶到这个地点所在的水平街道或竖直街道上来观看，同时他们离燃放地点的距离不能小于 $S$。你需要选择一个燃放地点以最小化市民们的移动距离。", "inputFormat": "第一行两个整数 $N$，$S$，分别代表市民总数和最小距离。\n\n接下来 $N$ 行每行两个整数 $H_i$，$V_i$，表示这位市民住在水平街道 $H_i$ 与 竖直街道 $V_i$ 交点处。", "outputFormat": "输出移动距离和的最小值。", "hint": "**【样例解释】** \n\n注意水平街道 $-4$ 与竖直街道 $8$ 交点处有两个人居住。\n\n最优解是选择竖直街道 $8$，此时距离取最小值 $9$。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，满足 $0 \\leq V_i \\leq 5000$\n- 对于 $40\\%$ 的数据，满足 $N \\leq 5000$\n- 对于 $100\\%$ 的数据，满足 $1 \\leq N \\leq 10^5$，$1 \\leq S \\leq 10^6$，$-10^9 \\leq H_i,V_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T1. Fireworks in RightAngleles](http://www.boi2012.lv/data/day2/eng/fire.pdf)", "locale": "zh-CN"}}}
