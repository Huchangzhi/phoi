{"pid": "P11062", "type": "P", "difficulty": 3, "samples": [["5\n1 1\n3 7\n-4 1\n-5 -8\n4 0\n", "0\n3\n0\n3\n0\n"], ["2\n-6 9\n34 -51\n", "0\n0\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X4-T2】「Jason-1」加法", "background": "原题链接：<https://oier.team/problems/X4C>。", "description": "给定两个整数 $a, b$（可能为负），你可以进行任意多次操作（也可以不操作），每次操作你需要在如下两种形式中进行选择：\n\n- 操作 1：将 $a$ 赋值为 $a$ 与 $b$ 的和，即 $a \\gets a + b$。\n- 操作 2：将 $b$ 赋值为 $a$ 与 $b$ 的和，即 $b \\gets a + b$。\n\n你的目标是最小化 $a$ 与 $b$ 的差的绝对值 $\\lvert a-b \\rvert$，请输出最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个整数 $a, b$。", "outputFormat": "对于每组数据：\n\n- 仅一行一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n对于第 1 组数据，一种可行的操作方案是：不进行任何操作，$\\lvert a-b \\rvert=0$。\n\n对于第 2 组数据，一种可行的操作方案是：先使用操作 2，$b$ 被赋值为 $10$；再使用操作 1，$a$ 被赋值为 $13$，此时 $\\lvert a-b \\rvert=3$，可以证明这是能够达到的最小值。\n\n对于第 3 组数据，一种可行的操作方案是：连续使用 $5$ 次操作 1，$a$ 依次被赋值为 $-3,-2,-1,0,1$，此时 $a$ 和 $b$ 相等，$\\lvert a-b \\rvert=0$。\n\n对于第 4 组数据，一种可行的操作方案是：不进行任何操作，此时 $\\lvert a-b \\rvert=3$。\n\n对于第 5 组数据，一种可行的操作方案是：使用操作 2，$b$ 被赋值为 $4$，此时 $\\lvert a-b \\rvert=0$。\n\n**【样例解释 #2】**\n\n对该样例中的两组数据，均可先使用 $1$ 次操作 2，再使用 $3$ 次操作 1，使得差的绝对值为 $0$。\n\n**【数据范围】**\n\n| 测试点编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | A | $27$ |\n| 2 | B | $31$ |\n| 3 | 无 | $42$ |\n\n- 特殊性质 A：保证 $\\lvert a \\rvert, \\lvert b \\rvert \\le 10$。\n- 特殊性质 B：保证 $a,b \\ge 1$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T2】「Jason-1」加法", "background": "原题链接：<https://oier.team/problems/X4C>。", "description": "给定两个整数 $a, b$（可能为负），你可以进行任意多次操作（也可以不操作），每次操作你需要在如下两种形式中进行选择：\n\n- 操作 1：将 $a$ 赋值为 $a$ 与 $b$ 的和，即 $a \\gets a + b$。\n- 操作 2：将 $b$ 赋值为 $a$ 与 $b$ 的和，即 $b \\gets a + b$。\n\n你的目标是最小化 $a$ 与 $b$ 的差的绝对值 $\\lvert a-b \\rvert$，请输出最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，两个整数 $a, b$。", "outputFormat": "对于每组数据：\n\n- 仅一行一个整数，表示答案。", "hint": "**【样例解释 #1】**\n\n对于第 1 组数据，一种可行的操作方案是：不进行任何操作，$\\lvert a-b \\rvert=0$。\n\n对于第 2 组数据，一种可行的操作方案是：先使用操作 2，$b$ 被赋值为 $10$；再使用操作 1，$a$ 被赋值为 $13$，此时 $\\lvert a-b \\rvert=3$，可以证明这是能够达到的最小值。\n\n对于第 3 组数据，一种可行的操作方案是：连续使用 $5$ 次操作 1，$a$ 依次被赋值为 $-3,-2,-1,0,1$，此时 $a$ 和 $b$ 相等，$\\lvert a-b \\rvert=0$。\n\n对于第 4 组数据，一种可行的操作方案是：不进行任何操作，此时 $\\lvert a-b \\rvert=3$。\n\n对于第 5 组数据，一种可行的操作方案是：使用操作 2，$b$ 被赋值为 $4$，此时 $\\lvert a-b \\rvert=0$。\n\n**【样例解释 #2】**\n\n对该样例中的两组数据，均可先使用 $1$ 次操作 2，再使用 $3$ 次操作 1，使得差的绝对值为 $0$。\n\n**【数据范围】**\n\n| 测试点编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | A | $27$ |\n| 2 | B | $31$ |\n| 3 | 无 | $42$ |\n\n- 特殊性质 A：保证 $\\lvert a \\rvert, \\lvert b \\rvert \\le 10$。\n- 特殊性质 B：保证 $a,b \\ge 1$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P11063", "type": "P", "difficulty": 5, "samples": [["7\n1 1 1 1\n1 2 1 1\n2 2 1 2\n10 10 2 50\n5 5 4 10\n80 43 52 64\n987654321 123456789 313814116 388538872\n", "0\n-1\n3\n1 2\n2 3\n1 2\n1\n1 5\n-1\n2\n1 3\n2 2\n2\n1 31415\n2 9982\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X4-T3】「Jason-1」数对变换", "background": "原题链接：<https://oier.team/problems/X4D>。", "description": "对于一个**正整数**数对 $(x, y)$，定义一次变换为：选择其中一个数 $a$，记另一个数为 $b$，同时选择一个正整数 $k \\leq a$，然后将 $a$ 除以 $k$ 向下取整，同时将 $b$ 乘以 $k$。\n\n形式化地说，对于数对 $(x,y)$，你可以执行以下两种变换：\n\n- 类型 1：取 $1 \\le k \\le x$，令 $(x,y) \\gets (\\lfloor \\frac{x}{k} \\rfloor, y \\cdot k)$。\n- 类型 2：取 $1 \\le k \\le y$，令 $(x,y) \\gets (x \\cdot k, \\lfloor \\frac{y}{k} \\rfloor)$。\n\n显然，变换后的数对仍然是正整数数对。\n\n给出两组正整数数对 $(a, b)$ 与 $(c, d)$，你需要执行**不超过 $\\bm{65}$ 次**变换将 $(a, b)$ 变为 $(c, d)$，或者报告无解。**注意：你不需要最小化执行变换的次数**。\n\n需要注意数对是有序的，即若 $x \\neq y$，则 $(x,y) \\neq (y,x)$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，四个正整数 $a, b, c, d$，表示两组数对。", "outputFormat": "对于每组数据：\n\n- 若无解，\n\t- 仅一行一个字符串 `-1`。\n- 否则，\n\t- 第一行，一个非负整数 $m$，表示你执行变换的次数。**你需要保证 $\\bm{0 \\le m \\le 65}$，但不需要最小化 $\\bm m$**。\n\t- 接下来 $m$ 行，第 $i$ 行两个整数 $\\mathit{op}, k$，表示你执行的第 $i$ 次变换。其中 $\\mathit{op} \\in \\{1, 2\\}$ 表示变换类型，$k$ 即为本次变换中选择的 $k$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释】**\n\n对于第 1 组数据，不需要进行任何操作，因为初始时 $a = c$ 且 $b = d$。\n\n对于第 2 组数据，可以证明无解。\n\n对于第 3 组数据，第一次变换后 $(a,b)=(1,4)$，第二次变换后 $(a,b)=(3,1)$，第三次变换后 $(a,b)=(1,2)$。\n\n对于第 4 组数据，一次变换即可使 $a = c$ 且 $b = d$。\n\n对于第 5 组数据，可以证明无解。\n\n对于第 6 组数据，第一次变换后 $(a,b)=(26,129)$，第二次变换后 $(a,b)=(52,64)$。\n\n对于第 7 组数据，第一次变换后 $(a,b)=(31438,3878395026435)$，第二次变换后 $(a,b)=(313814116,388538872)$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a,b,c,d)$。\n\n| 子任务 | $n\\le$| 特殊性质 | 分值 |\n| :--------------: | :-----: |:-----:| :--------: |\n| 1 | $6$ | 无 | $7$ |\n| 2 | $10^5$ | A | $11$ |\n| 3 | $10^5$ | C | $13$ |\n| 4 | $10^6$ | B | $23$ |\n| 5 | $10^9$ | C | $19$ |\n| 6 | $10^9$ | 无 | $27$ |\n\n- 特殊性质 A：保证 $\\dfrac{a}{c}=\\dfrac{d}{b}$。\n- 特殊性质 B：保证 $a=b$ 且 $c=d$。\n- 特殊性质 C：保证 $a,b,c,d$ 在值域内独立均匀随机生成。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le a,b,c,d \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T3】「Jason-1」数对变换", "background": "原题链接：<https://oier.team/problems/X4D>。", "description": "对于一个**正整数**数对 $(x, y)$，定义一次变换为：选择其中一个数 $a$，记另一个数为 $b$，同时选择一个正整数 $k \\leq a$，然后将 $a$ 除以 $k$ 向下取整，同时将 $b$ 乘以 $k$。\n\n形式化地说，对于数对 $(x,y)$，你可以执行以下两种变换：\n\n- 类型 1：取 $1 \\le k \\le x$，令 $(x,y) \\gets (\\lfloor \\frac{x}{k} \\rfloor, y \\cdot k)$。\n- 类型 2：取 $1 \\le k \\le y$，令 $(x,y) \\gets (x \\cdot k, \\lfloor \\frac{y}{k} \\rfloor)$。\n\n显然，变换后的数对仍然是正整数数对。\n\n给出两组正整数数对 $(a, b)$ 与 $(c, d)$，你需要执行**不超过 $\\bm{65}$ 次**变换将 $(a, b)$ 变为 $(c, d)$，或者报告无解。**注意：你不需要最小化执行变换的次数**。\n\n需要注意数对是有序的，即若 $x \\neq y$，则 $(x,y) \\neq (y,x)$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 仅一行，四个正整数 $a, b, c, d$，表示两组数对。", "outputFormat": "对于每组数据：\n\n- 若无解，\n\t- 仅一行一个字符串 `-1`。\n- 否则，\n\t- 第一行，一个非负整数 $m$，表示你执行变换的次数。**你需要保证 $\\bm{0 \\le m \\le 65}$，但不需要最小化 $\\bm m$**。\n\t- 接下来 $m$ 行，第 $i$ 行两个整数 $\\mathit{op}, k$，表示你执行的第 $i$ 次变换。其中 $\\mathit{op} \\in \\{1, 2\\}$ 表示变换类型，$k$ 即为本次变换中选择的 $k$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释】**\n\n对于第 1 组数据，不需要进行任何操作，因为初始时 $a = c$ 且 $b = d$。\n\n对于第 2 组数据，可以证明无解。\n\n对于第 3 组数据，第一次变换后 $(a,b)=(1,4)$，第二次变换后 $(a,b)=(3,1)$，第三次变换后 $(a,b)=(1,2)$。\n\n对于第 4 组数据，一次变换即可使 $a = c$ 且 $b = d$。\n\n对于第 5 组数据，可以证明无解。\n\n对于第 6 组数据，第一次变换后 $(a,b)=(26,129)$，第二次变换后 $(a,b)=(52,64)$。\n\n对于第 7 组数据，第一次变换后 $(a,b)=(31438,3878395026435)$，第二次变换后 $(a,b)=(313814116,388538872)$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a,b,c,d)$。\n\n| 子任务 | $n\\le$| 特殊性质 | 分值 |\n| :--------------: | :-----: |:-----:| :--------: |\n| 1 | $6$ | 无 | $7$ |\n| 2 | $10^5$ | A | $11$ |\n| 3 | $10^5$ | C | $13$ |\n| 4 | $10^6$ | B | $23$ |\n| 5 | $10^9$ | C | $19$ |\n| 6 | $10^9$ | 无 | $27$ |\n\n- 特殊性质 A：保证 $\\dfrac{a}{c}=\\dfrac{d}{b}$。\n- 特殊性质 B：保证 $a=b$ 且 $c=d$。\n- 特殊性质 C：保证 $a,b,c,d$ 在值域内独立均匀随机生成。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le a,b,c,d \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11064", "type": "P", "difficulty": 5, "samples": [["5\n5\n1 -1 1 -1 1\n5\n2 -2 2 -1 2\n6\n3 1 -4 1 -5 9 \n13\n1 1 -4 5 -1 -4 1 9 1 9 -8 1 0\n16\n1 -8 2 -7 3 -6 4 -5 5 -4 4 -3 3 -2 2 -1\n", "1 2 3 3 3\n1 1 1 1 1\n3 5 5 5 5\n3 3 3 3 3\n9 13 14 14 14 14\n9 13 14 14 14 14\n20 25 27 28 28 28 28 28 28 28 28 28 28\n20 22 23 23 23 23 23 23 23 23 23 23 23\n5 9 13 16 19 21 23 24 24 24 24 24 24 24 24 24\n5 9 12 14 15 15 15 15 15 15 15 15 15 15 15 15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "单调栈", "梦熊比赛"], "title": "【MX-X4-T4】「Jason-1」一步最优", "background": "原题链接：<https://oier.team/problems/X4E>。", "description": "对于如下问题：\n\n- 给定长度为 $n$ 的数列 $a_1, \\ldots, a_n$（其中 $a_i$ 可能为负数）以及一个正整数 $m$。\n- 你需要选择不超过 $m$ 个数列 $a$ 的下标区间 $[l_j, r_j]$，且确保它们互不相交。\n- 你需要最大化选择的区间中的元素之和的总和，即最大化 $\\sum_j \\sum_{i = l_j}^{r_j} a_i$。\n\n考虑该贪心算法（并不正确）：\n\n- 重复如下过程 $m$ 次：\n- 在所有与当前已选择的区间不相交的区间（包括空区间）中，选择一个元素之和最大的区间。\n  - **如果有多个元素之和最大的区间，从中任意选择一个。**\n  - 注：若选择了空区间，等价于中止过程，即选择的区间数量不超过 $m$ 个。\n- 将如上过程中选择的所有非空区间中的元素之和作为答案。\n\n现给定 $n$ 和数列 $a_1, \\ldots, a_n$，对于每个 $m \\in [1, n]$，请求出该算法可能得到的答案（即区间和的总和）的最大值和最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，一个正整数 $n$。\n- 第二行，$n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组数据：\n\n- 第一行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最大值**；\n- 第二行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最小值**。\n", "hint": "**【样例解释】**\n\n对于第一组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[1,1],[3,3],[5,5],\\varnothing, \\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n对于第二组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[3,5],[1,1],\\varnothing,\\varnothing,\\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n需要注意：在第一次更新时，无法选择区间 $[1,1],[1,3],[3,3]$ 等，因为它们不满足区间和在所有 $S$ 中的区间内最大（即 $= 3$）。在任意一次更新时，都无法选择区间 $[2,2]$，因为其区间和为 $-2$，而 $-2 < 0$（即空区间的区间和）。\n\n对于第三组数据，只有唯一的选择方案，即依次选择区间 $[6,6],[1,2],[4,4],\\varnothing,\\varnothing,\\varnothing$。\n\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $\\sum n \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $10$ | $50$ | $17$ |\n| 2 | $100$ | $500$ | $24$ |\n| 3 | $2000$ | $10^4$ | $13$ |\n| 4 | $10^4$ | $5 \\times 10^4$ | $9$ |\n| 5 | $10^5$ | $5 \\times 10^5$ | $37$ |\n\n对于 $100 \\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le n \\le 10^5$，$\\sum n \\le 5 \\times 10^{5}$，$|a_i| \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T4】「Jason-1」一步最优", "background": "原题链接：<https://oier.team/problems/X4E>。", "description": "对于如下问题：\n\n- 给定长度为 $n$ 的数列 $a_1, \\ldots, a_n$（其中 $a_i$ 可能为负数）以及一个正整数 $m$。\n- 你需要选择不超过 $m$ 个数列 $a$ 的下标区间 $[l_j, r_j]$，且确保它们互不相交。\n- 你需要最大化选择的区间中的元素之和的总和，即最大化 $\\sum_j \\sum_{i = l_j}^{r_j} a_i$。\n\n考虑该贪心算法（并不正确）：\n\n- 重复如下过程 $m$ 次：\n- 在所有与当前已选择的区间不相交的区间（包括空区间）中，选择一个元素之和最大的区间。\n  - **如果有多个元素之和最大的区间，从中任意选择一个。**\n  - 注：若选择了空区间，等价于中止过程，即选择的区间数量不超过 $m$ 个。\n- 将如上过程中选择的所有非空区间中的元素之和作为答案。\n\n现给定 $n$ 和数列 $a_1, \\ldots, a_n$，对于每个 $m \\in [1, n]$，请求出该算法可能得到的答案（即区间和的总和）的最大值和最小值。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，一个正整数 $n$。\n- 第二行，$n$ 个整数 $a_1, \\ldots, a_n$。", "outputFormat": "对于每组数据：\n\n- 第一行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最大值**；\n- 第二行，$n$ 个整数，第 $i$ 个整数表示当 $m = i$ 时，该算法能够得到的答案的**最小值**。\n", "hint": "**【样例解释】**\n\n对于第一组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[1,1],[3,3],[5,5],\\varnothing, \\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n对于第二组数据，\n\n- 一种取到最大值的方案为，依次选择区间 $[3,5],[1,1],\\varnothing,\\varnothing,\\varnothing$；\n- 一种取到最小值的方案为，依次选择区间 $[1,5],\\varnothing,\\varnothing,\\varnothing,\\varnothing$。\n\n需要注意：在第一次更新时，无法选择区间 $[1,1],[1,3],[3,3]$ 等，因为它们不满足区间和在所有 $S$ 中的区间内最大（即 $= 3$）。在任意一次更新时，都无法选择区间 $[2,2]$，因为其区间和为 $-2$，而 $-2 < 0$（即空区间的区间和）。\n\n对于第三组数据，只有唯一的选择方案，即依次选择区间 $[6,6],[1,2],[4,4],\\varnothing,\\varnothing,\\varnothing$。\n\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $\\sum n \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | $10$ | $50$ | $17$ |\n| 2 | $100$ | $500$ | $24$ |\n| 3 | $2000$ | $10^4$ | $13$ |\n| 4 | $10^4$ | $5 \\times 10^4$ | $9$ |\n| 5 | $10^5$ | $5 \\times 10^5$ | $37$ |\n\n对于 $100 \\%$ 的数据，$1 \\le T \\le 10^4$，$1 \\le n \\le 10^5$，$\\sum n \\le 5 \\times 10^{5}$，$|a_i| \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11065", "type": "P", "difficulty": 6, "samples": [["4 4 6\n1 2 3 2\n2 3 2 3\n3 3 2 2\n4 3 2 1\n2 1 1 1\n0 1 1 0\n1 1 0 1\n0 0 1 2\n1 1 1 2\n1 1 2 1\n2 2 4 4\n2 3 3 1\n4 4 2 1\n1 4 4 1\n", "3\n4\n3\n3\n4\n3\n"], ["1 3 3\n1 1 1\n1 0 0\n1 1 1 2\n1 1 1 3\n1 2 1 3\n", "1\n-1\n-1\n"], ["8 8 10\n5 6 6 5 6 7 8 9\n5 6 6 5 6 6 7 8\n4 5 5 4 5 5 6 7\n3 4 5 4 5 6 6 7\n4 5 5 5 5 6 7 6\n5 4 5 5 4 5 6 7\n4 3 4 5 4 5 6 6\n5 4 4 4 3 4 5 5\n0 0 0 0 1 0 2 0\n0 0 0 0 0 0 0 0\n0 1 0 2 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 1 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 1 0\n6 3 7 7\n1 5 2 2\n7 7 6 7\n4 3 7 7\n7 6 8 2\n3 2 8 7\n1 6 8 6\n1 6 7 4\n4 5 4 4\n5 4 1 1\n", "5\n5\n6\n5\n5\n5\n6\n5\n8\n-1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "梦熊比赛"], "title": "【MX-X4-T5】「Jason-1」占领高地", "background": "原题链接：<https://oier.team/problems/X4F>。", "description": "有一张 $n$ 行 $m$ 列的地图，其第 $i$ 行 $j$ 列的位置的**高度**为 $h_{i,j}$ 且**军事化程度**为 $p_{i,j}$，且满足**任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。  \n（两个位置 $(a, b)$、$(c, d)$ 四连通相邻，当且仅当 $\\lvert a - c\\rvert + \\lvert b - d\\rvert = 1$。）\n\n你可以选择若干个位置建立补给站。若在位置 $(i,j)$ 建立了补给站，定义其**运输范围**为所有满足 $h_{i,j} - h_{x,y} + p_{i,j} \\geq \\lvert i - x\\rvert + \\lvert j - y\\rvert$ 的位置 $(x, y)$。每个补给站都可以在其运输范围中任意移动物资的位置。\n\n定义若干个补给站 $(x, y)$ 的安全程度为其中 $h_{x,y}$ 的最小值。\n\n有 $q$ 次询问，每次给出四个整数 $a, b, c, d$，询问：若要建立若干个补给站，以将物资从位置 $(a, b)$ 运输至位置 $(c, d)$，则建立补给站的安全程度最大值是多少？或报告不可能完成运输任务。\n\n**注意：物资可以通过多个补给站间接运输。不一定必须在 $(a, b)$ 和 $(c, d)$ 两点建立补给站。**\n\n**本题数据保证 $\\bm{p_{i, j} \\le 9}$。**", "inputFormat": "第一行，三个正整数 $n,m,q$，表示地图的行数、列数，和询问个数。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示高度 $h_{i,j}$。**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示军事化程度 $p_{i,j}$。**保证 $\\bm{p_{i, j} \\le 9}$**。\n\n接下来 $q$ 行，每行四个正整数 $a, b, c, d$，表示询问。", "outputFormat": "$q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问的答案，即能让物资从 $(a,b)$ 运输至 $(c,d)$ 时，最大的安全程度。如果无论建立多少补给站都无法实现运输任务，则认为答案是 $-1$。", "hint": "**【样例解释 #1】**\n\n第一个询问可以在 $(1,3)$ 建立补给站，安全程度为 $3$。\n\n第二个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第三个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第四个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第五个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第六个询问可以在 $(4,1),(1,3)$ 建立补给站，安全程度为 $3$。\n\n**【样例解释 #2】**\n\n仅有在 $(1,1)$ 建立的补给站可以将物资在 $(1,1)$、$(1,2)$ 间任意移动，在其它位置建立的补给站都将无法移动任何物资。\n\n故仅有询问 $1$ 可以达成目标，只需在 $(1,1)$ 建立补给站，安全程度为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $q \\le$ | $n,m \\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $20$ | $10$ | A | $23$ |\n| 2 | $10^5$ | $300$ | B | $19$ |\n| 3 | $10^5$ | $100$ | 无 | $27$ |\n| 4 | $2 \\times 10^5$ | $300$ | 无 | $31$ |\n\n- 特殊性质 A：$p_{i, j} \\le 4$。\n- 特殊性质 B：$p_{i, j} = 0$。\n\n对于 $100 \\%$ 的数据，$1 \\le n,m \\le 300$，$0 \\le h_{i,j} \\le 10^9$，$\\bm{0 \\le p_{i,j} \\le 9}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le a,c \\le n$，$1 \\le b,d \\le m$，$(a,b) \\neq (c,d)$，**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T5】「Jason-1」占领高地", "background": "原题链接：<https://oier.team/problems/X4F>。", "description": "有一张 $n$ 行 $m$ 列的地图，其第 $i$ 行 $j$ 列的位置的**高度**为 $h_{i,j}$ 且**军事化程度**为 $p_{i,j}$，且满足**任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。  \n（两个位置 $(a, b)$、$(c, d)$ 四连通相邻，当且仅当 $\\lvert a - c\\rvert + \\lvert b - d\\rvert = 1$。）\n\n你可以选择若干个位置建立补给站。若在位置 $(i,j)$ 建立了补给站，定义其**运输范围**为所有满足 $h_{i,j} - h_{x,y} + p_{i,j} \\geq \\lvert i - x\\rvert + \\lvert j - y\\rvert$ 的位置 $(x, y)$。每个补给站都可以在其运输范围中任意移动物资的位置。\n\n定义若干个补给站 $(x, y)$ 的安全程度为其中 $h_{x,y}$ 的最小值。\n\n有 $q$ 次询问，每次给出四个整数 $a, b, c, d$，询问：若要建立若干个补给站，以将物资从位置 $(a, b)$ 运输至位置 $(c, d)$，则建立补给站的安全程度最大值是多少？或报告不可能完成运输任务。\n\n**注意：物资可以通过多个补给站间接运输。不一定必须在 $(a, b)$ 和 $(c, d)$ 两点建立补给站。**\n\n**本题数据保证 $\\bm{p_{i, j} \\le 9}$。**", "inputFormat": "第一行，三个正整数 $n,m,q$，表示地图的行数、列数，和询问个数。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示高度 $h_{i,j}$。**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。\n\n接下来 $n$ 行，每行 $m$ 个非负整数，其中第 $i$ 行第 $j$ 列的整数表示军事化程度 $p_{i,j}$。**保证 $\\bm{p_{i, j} \\le 9}$**。\n\n接下来 $q$ 行，每行四个正整数 $a, b, c, d$，表示询问。", "outputFormat": "$q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问的答案，即能让物资从 $(a,b)$ 运输至 $(c,d)$ 时，最大的安全程度。如果无论建立多少补给站都无法实现运输任务，则认为答案是 $-1$。", "hint": "**【样例解释 #1】**\n\n第一个询问可以在 $(1,3)$ 建立补给站，安全程度为 $3$。\n\n第二个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第三个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第四个询问可以在 $(3,2)$ 建立补给站，安全程度为 $3$。\n\n第五个询问可以在 $(4,1)$ 建立补给站，安全程度为 $4$。\n\n第六个询问可以在 $(4,1),(1,3)$ 建立补给站，安全程度为 $3$。\n\n**【样例解释 #2】**\n\n仅有在 $(1,1)$ 建立的补给站可以将物资在 $(1,1)$、$(1,2)$ 间任意移动，在其它位置建立的补给站都将无法移动任何物资。\n\n故仅有询问 $1$ 可以达成目标，只需在 $(1,1)$ 建立补给站，安全程度为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $q \\le$ | $n,m \\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $20$ | $10$ | A | $23$ |\n| 2 | $10^5$ | $300$ | B | $19$ |\n| 3 | $10^5$ | $100$ | 无 | $27$ |\n| 4 | $2 \\times 10^5$ | $300$ | 无 | $31$ |\n\n- 特殊性质 A：$p_{i, j} \\le 4$。\n- 特殊性质 B：$p_{i, j} = 0$。\n\n对于 $100 \\%$ 的数据，$1 \\le n,m \\le 300$，$0 \\le h_{i,j} \\le 10^9$，$\\bm{0 \\le p_{i,j} \\le 9}$，$1 \\le q \\le 2 \\times 10^5$，$1 \\le a,c \\le n$，$1 \\le b,d \\le m$，$(a,b) \\neq (c,d)$，**保证任意两个四连通相邻的位置高度差的绝对值不超过 $\\bm 1$**。", "locale": "zh-CN"}}}
{"pid": "P11066", "type": "P", "difficulty": 7, "samples": [["2\n2 4 2 12\n1 2\n2 1\n1 10 5 30\n5 4 3 2 1", "0\n\n9\n3 4 0 0 1 0 2 0 0\n16\n6 6 6 6 6 0 1 0 2 0 3 0 4 0 5 0"], ["1\n1 6 5 30\n5 4 3 2 1\n", "16\n6 6 6 6 6 0 1 0 2 0 3 0 4 0 5 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "梦熊比赛"], "title": "【MX-X4-T6】「Jason-1」电梯", "background": "原题链接：<https://oier.team/problems/X4G>。", "description": "一栋 $n$ 层的楼有 $m$ 部电梯，每部电梯有静止与运动两种状态。\n\n初始时，第 $i$ 部电梯静止于第 $i$ 层。给定一个 $1 \\sim m$ 的排列 $p$，你希望最终第 $i$ 部电梯位于 $p_i$ 层。\n\n你可以进行以下两种操作：\n\n- `0`：让时间向后运动一个时刻。\n- `x`：其中 $x$ 为不超过 $n$ 的正整数。\n\t- 执行该操作时，需要满足：$x$ 层不存在静止的电梯；距离 $x$ 层距离最近的$^\\dagger$ 静止的电梯存在且唯一。\n\t- 令 $y$ 为最近的静止的电梯编号，$z$ 为其位置。则电梯 $y$ **立刻**变为运动的电梯，并在 $\\lvert x - z\\rvert$ 时刻后的**所有操作前**到达楼层 $x$ 并变为静止的电梯。\n\n$^\\dagger$：位于 $a$ 层的一部电梯与楼层 $x$ 的距离为 $\\lvert a - x\\rvert$。\n\n**注意：你需要保证，任何时刻不存在两个静止的电梯位于同一楼层。**\n\n对于每组数据，有一个评分参数 $o$，你需要构造出总操作次数不超过 $o$ 的方案才能通过该组数据。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，四个正整数 $Q, n, m, o$，分别表示询问组数、楼层数、电梯数、与评分参数。\n- 接下来 $Q$ 行，每行 $m$ 个整数 $p_1, \\ldots, p_m$，表示电梯的目标位置。", "outputFormat": "对于每组数据：\n\n- 共 $2 Q$ 行。对于每个询问，输出两行：\n- 第一行，一个非负整数 $k$，表示你的方案的操作步数；\n- 第二行，$k$ 个 $[0, n]$ 中的整数，表示你的具体操作方案。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释 #1】**\n\n该样例满足子任务 2 的限制。\n\n对于第一组数据的第一组询问，不需要操作。\n\n对于第一组数据的第二组询问：\n\n| 操作 | 时刻 | 电梯 $1$ 位置 | 电梯 $2$ 位置 |\n| :----------: | :----------: | :----------: | :----------: |\n| 初始状态 | $0$ | $1$ | $2$ |\n| $3$ | $0$ | $1$ | 运动 |\n| $4$ | $0$ | 运动 | 运动 |\n| $0$ | $1$ | 运动 | $3$ |\n| $0$ | $2$ | 运动 | $3$ |\n| $1$ | $2$ | 运动 | 运动 |\n| $0$ | $3$ | $4$ | 运动 |\n| $2$ | $3$ | 运动 | 运动 |\n| $0$ | $4$ | 运动 | $1$ |\n| $0$ | $5$ | $2$ | $1$ |\n\n**【样例解释 #2】**\n\n该样例满足子任务 7 的限制。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $m =$ | $o = $ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $3$ | $2$ | $7$ | $7$ |\n| 2 | $100$ | $\\lfloor \\frac{n}{2} \\rfloor$ | $2\\times(m+n)$ | $11$ |\n| 3 | $40$ | $n-1$ | $3 \\times n^3$ | $17$ |\n| 4 | $200$ | $n-1$ | $5 \\times n^2$ | $19$ |\n| 5 | $4000$ | $n-1$ | $50 \\times n$ | $17$ |\n| 6 | $5 \\times 10^{4}$ | $n-1$ | $6 \\times n$ | $16$ |\n| 7 | $5 \\times 10^{4}$ | $n-1$ | $5 \\times n$ | $13$ |\n\n对于所有数据，$1 \\le T \\le 20$，$2 \\le m < n \\le 5 \\times 10^{4}$，保证 $n, m, o$ 同时满足上述某个子任务的限制，$p$ 为 $1 \\sim m$ 的排列，$1 \\le Q \\le 2\\times 10^6$，$\\sum o Q \\le 2 \\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T6】「Jason-1」电梯", "background": "原题链接：<https://oier.team/problems/X4G>。", "description": "一栋 $n$ 层的楼有 $m$ 部电梯，每部电梯有静止与运动两种状态。\n\n初始时，第 $i$ 部电梯静止于第 $i$ 层。给定一个 $1 \\sim m$ 的排列 $p$，你希望最终第 $i$ 部电梯位于 $p_i$ 层。\n\n你可以进行以下两种操作：\n\n- `0`：让时间向后运动一个时刻。\n- `x`：其中 $x$ 为不超过 $n$ 的正整数。\n\t- 执行该操作时，需要满足：$x$ 层不存在静止的电梯；距离 $x$ 层距离最近的$^\\dagger$ 静止的电梯存在且唯一。\n\t- 令 $y$ 为最近的静止的电梯编号，$z$ 为其位置。则电梯 $y$ **立刻**变为运动的电梯，并在 $\\lvert x - z\\rvert$ 时刻后的**所有操作前**到达楼层 $x$ 并变为静止的电梯。\n\n$^\\dagger$：位于 $a$ 层的一部电梯与楼层 $x$ 的距离为 $\\lvert a - x\\rvert$。\n\n**注意：你需要保证，任何时刻不存在两个静止的电梯位于同一楼层。**\n\n对于每组数据，有一个评分参数 $o$，你需要构造出总操作次数不超过 $o$ 的方案才能通过该组数据。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "inputFormat": "**本题输入包含多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，四个正整数 $Q, n, m, o$，分别表示询问组数、楼层数、电梯数、与评分参数。\n- 接下来 $Q$ 行，每行 $m$ 个整数 $p_1, \\ldots, p_m$，表示电梯的目标位置。", "outputFormat": "对于每组数据：\n\n- 共 $2 Q$ 行。对于每个询问，输出两行：\n- 第一行，一个非负整数 $k$，表示你的方案的操作步数；\n- 第二行，$k$ 个 $[0, n]$ 中的整数，表示你的具体操作方案。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。", "hint": "**【样例解释 #1】**\n\n该样例满足子任务 2 的限制。\n\n对于第一组数据的第一组询问，不需要操作。\n\n对于第一组数据的第二组询问：\n\n| 操作 | 时刻 | 电梯 $1$ 位置 | 电梯 $2$ 位置 |\n| :----------: | :----------: | :----------: | :----------: |\n| 初始状态 | $0$ | $1$ | $2$ |\n| $3$ | $0$ | $1$ | 运动 |\n| $4$ | $0$ | 运动 | 运动 |\n| $0$ | $1$ | 运动 | $3$ |\n| $0$ | $2$ | 运动 | $3$ |\n| $1$ | $2$ | 运动 | 运动 |\n| $0$ | $3$ | $4$ | 运动 |\n| $2$ | $3$ | 运动 | 运动 |\n| $0$ | $4$ | 运动 | $1$ |\n| $0$ | $5$ | $2$ | $1$ |\n\n**【样例解释 #2】**\n\n该样例满足子任务 7 的限制。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | $n \\le$ | $m =$ | $o = $ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $3$ | $2$ | $7$ | $7$ |\n| 2 | $100$ | $\\lfloor \\frac{n}{2} \\rfloor$ | $2\\times(m+n)$ | $11$ |\n| 3 | $40$ | $n-1$ | $3 \\times n^3$ | $17$ |\n| 4 | $200$ | $n-1$ | $5 \\times n^2$ | $19$ |\n| 5 | $4000$ | $n-1$ | $50 \\times n$ | $17$ |\n| 6 | $5 \\times 10^{4}$ | $n-1$ | $6 \\times n$ | $16$ |\n| 7 | $5 \\times 10^{4}$ | $n-1$ | $5 \\times n$ | $13$ |\n\n对于所有数据，$1 \\le T \\le 20$，$2 \\le m < n \\le 5 \\times 10^{4}$，保证 $n, m, o$ 同时满足上述某个子任务的限制，$p$ 为 $1 \\sim m$ 的排列，$1 \\le Q \\le 2\\times 10^6$，$\\sum o Q \\le 2 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P11067", "type": "P", "difficulty": 7, "samples": [["见附件 down.zip 中的 sample 文件夹", "见附件 down.zip 中的 sample 文件夹"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["提交答案", "Special Judge", "梦熊比赛"], "title": "【MX-X4-T7】「Jason-1」Ball", "background": "原题链接：<https://oier.team/problems/X4H>。", "description": "**这是一道提交答案题。**\n\n你有 $10$ 个盒子，每个任务会给出一个 $n$，初始时前 $n$ 个盒子内**可能**有一些球，后 $10-n$ 个盒子为空。\n\n用小写字母表示每种颜色的球，初始时最多只有三种颜色的球，分别用 $\\tt a, b, c$ 表示。而在程序中，你可以使用**任何小写字母**表示对应颜色的球。\n\n定义一个盒子**包含**一个字符串，表示对于每种颜色的球，盒子中出现的个数不小于字符串中出现的个数。\n\n从一个盒子中**删除**一个字符串，表示对于字符串中每一个小写字母代表的球，从盒子中取走一个相同颜色的球。删除的前提是需要满足此盒子包含该字符串。\n\n向一个盒子中**放入**一个字符串，表示对于字符串中每一个小写字母代表的每个球，向盒子中放入一个相同颜色的球。\n\n你需要写一个程序完成一些任务，程序包含下面几种语句可供使用：\n\n- `change x s y t`，其中 $x, y$ 是不超过 $10$ 的非负整数，$s, t$ 是仅由小写字母或单个字符 `@` 组成的**非空**字符串（**如果为 `@` 则表示将该字符串视作空串**）。如果 $x$ 为 $0$，则将 $k$ 由 $1$ 遍历到 $10$，否则 $k = x$。如果盒子 $k$ 中包含字符串 $s$，从其中删除 $s$，并在盒子 $y$ 中放入字符串 $t$，如果 $y=0$ 则在当前的 $k$ 中（原地）放入，这样就视为成功执行命令。每当成功执行命令后，立刻回到上一个断点，无论 $k$ 是否完全遍历。如果没有成功执行命令，跳转到下一条语句。\n- `#` 表示一个断点。**你必须以一行断点结束整个程序**。认为第 $0$ 行也是一个断点，此断点不计入代价。\n\n**语句数**可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n**断点数**可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n你不能使用超过 $100$ 条语句，超过 $10$ 的盒子或是非小写字母的球，任意一个盒子中某种颜色的球的个数均不能超过 $10^{8}$，程序中的单个字符串长度不能超过 $200$，你的程序单组数据实际遍历的语句条数不能超过 $4 \\times 10^5$，单组数据实际判断包含的字符集大小之和不能超过 $10^7$（参考下发的检验器）。\n\n约定 $n$ 表示输入至多使用的盒子数，$mx$ 表示初始时每个盒子中每种颜色球个数的最大值，$max$ 表示初始时所有盒子中球总数的最大值，$sum$ 表示初始时所有盒子中球的总数。**任务中未提及的盒子必须保持原状**，你需要分别完成下面 $10$ 个任务。\n\n1. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色球放入盒子 $1$，所有 $\\tt b$ 颜色球放入盒子 $2$，所有 $\\tt c$ 颜色球放入盒子 $3$。\n\n2. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色的球改为 $\\tt b$ 颜色的球，将所有 $\\tt b$ 颜色的球改为 $\\tt c$ 颜色的球，将所有 $\\tt c$ 颜色的球改为 $\\tt a$ 颜色的球，这三个操作应同时完成。\n\n3. $n=10, sum \\le 100$，你需要将所有不包含 $\\tt a$ 颜色球的盒子清空。\n\n4. $n=10, sum \\le 100$，你需要给所有非空的，不包含 $\\tt a$ 颜色球的盒子放入一个 $\\tt a$ 颜色球。\n\n5. $n=5, sum \\le 5$，你需要将所有球按照颜色从小到大（${\\tt a} < {\\tt b} < {\\tt c}$）依次放入盒子 $1$ 到 $sum$，每个盒子恰好只放一个球，初始的球不保留。\n\n6. $n=10, sum \\le 100$，对于每个盒子，只保留一个出现次数最多的颜色的球，如果有多种颜色出现次数最多，将其变为空集。\n\n7. $n=10, sum \\le 100$，对于每个盒子，只保留出现次数最多的颜色的球，如果有多种颜色出现次数最多，保留颜色最小的（${\\tt a} < {\\tt b} < {\\tt c}$）。\n\n8. $n=1, mx \\le 10$，记 $\\tt a, b, c$ 颜色的球的个数为 $A, B, C$，你需要对于满足 $1 \\le x \\le 5$ 的整数 $x$ 使得盒子 $x$ 在最终恰好有 $A+Bx+Cx^2$ 个 $\\tt a$ 颜色球，不能有其它颜色球。\n\n9. $n=5, max \\le 10$，所有 $n$ 个盒子中球总数相等。将每个盒子中的球按从小到大排序，组成一个字符串，保证字符串两两不同。你需要对于每个字符串求出其字典序排名，按字典序从小到大依次将盒子改为 $\\tt a, b, c, d, e$。\n\n10. $n=5, max \\le 10$，你需要对 $n$ 个盒子求前缀和，即将前面所有盒子的球复制一份放入自己。\n\n**注：子任务按某种规则排序，与难度无关。**", "inputFormat": "该题为提交答案型试题，每个测试点对应的任务见【题目描述】。", "outputFormat": "针对给定的 $10$ 个任务，你需要分别将你的程序命名为 `1.out`∼`10.out`，并将这 $10$ 个文件直接压缩为 `zip` 文件提交。\n\n每个文件中需要包含若干行。\n\n第一行一个非负整数 $L$，代表你使用的语句数。\n\n接下来 $L$ 行，每行一个语句。\n\n**你必须以一个断点结尾。**", "hint": "**【自定义校验器数据格式】**\n\n第一行，两个整数 $T, V$，分别表示数据组数与评分参数。\n\n对于接下来每组数据：\n\n第一行，两个整数 $n,m$，表示需要描述的输入盒子数与输出盒子数。\n\n第二行，$n$ 个字符串，描述输入时前 $n$ 个盒子的状态。\n\n第三行，$m$ 个字符串，描述输出时前 $m$ 个盒子的状态，**你仍然需要保证其它盒子为空**。\n\n**同样地，使用 `@` 表示空串**。\n\n**【自定义校验器使用方法】**\n\n将 `checker.cpp` 编译后，在命令行执行\n\n```\nchecker [in] [out] [ans]\n```\n\n其中 `[in]` 为测试数据，`[out]` 为你需要测试的程序，`[ans]` 输入和 `[in]` 相同的内容。\n\n例如你需要测试第一个样例，且你的程序名为 `1.out`，需先将 `1.in` 复制到当前目录，并执行\n\n```\nchecker 1.in 1.out 1.in\n```\n\n**【评分标准】**\n\n对于每个测试点，其内部会评测若干组测试数据。\n\n若你的输出出现下列情况，那么该测试点不得分：\n\n- 输出与要求不符。\n- 出现无法识别或不合法的语句。\n- 某个盒子中某种颜色的球数量超过 $10^8$。\n- 使用超过 $100$ 条语句。\n- 程序中单个字符串长度超过 $200$。\n- 使用不在 $1$ 到 $10$ 之间的盒子。\n- 使用非小写字母颜色的球。\n- 单组数据实际语句遍历次数大于 $4 \\times 10^5$。\n- 单组数据实际判断包含的字符集大小之和超过 $10^7$（参考下发的检验器）。\n\n语句数可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n断点数可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n一个程序的代价是你给出的断点数量乘以程序的语句数，记作 $val$。\n\n否则设对应子任务的评分标准为 $V$，那么你的得分为：\n\n$$\\mathrm{score}=\\begin{cases}11&V>val\\\\\\Big\\lfloor\\frac{10}{\\exp\\left(1-\\frac {V}{val}\\right)}\\Big\\rfloor&\\text{otherwise.}\\end{cases}$$\n\n下面给出各个任务对应的评分标准 $V$:\n\n| 编号 | $1$ | $2$ | $3$ | $4$ | $5$| $6$ | $7$ | $8$ | $9$ | $10$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |  :-: | :-: | :-: | :-: | :-: |\n| $V$ | $16$ | $16$ | $16$ | $16$ | $26$ | $8$ | $10$ | $18$ | $20$ | $30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X4-T7】「Jason-1」Ball", "background": "原题链接：<https://oier.team/problems/X4H>。", "description": "**这是一道提交答案题。**\n\n你有 $10$ 个盒子，每个任务会给出一个 $n$，初始时前 $n$ 个盒子内**可能**有一些球，后 $10-n$ 个盒子为空。\n\n用小写字母表示每种颜色的球，初始时最多只有三种颜色的球，分别用 $\\tt a, b, c$ 表示。而在程序中，你可以使用**任何小写字母**表示对应颜色的球。\n\n定义一个盒子**包含**一个字符串，表示对于每种颜色的球，盒子中出现的个数不小于字符串中出现的个数。\n\n从一个盒子中**删除**一个字符串，表示对于字符串中每一个小写字母代表的球，从盒子中取走一个相同颜色的球。删除的前提是需要满足此盒子包含该字符串。\n\n向一个盒子中**放入**一个字符串，表示对于字符串中每一个小写字母代表的每个球，向盒子中放入一个相同颜色的球。\n\n你需要写一个程序完成一些任务，程序包含下面几种语句可供使用：\n\n- `change x s y t`，其中 $x, y$ 是不超过 $10$ 的非负整数，$s, t$ 是仅由小写字母或单个字符 `@` 组成的**非空**字符串（**如果为 `@` 则表示将该字符串视作空串**）。如果 $x$ 为 $0$，则将 $k$ 由 $1$ 遍历到 $10$，否则 $k = x$。如果盒子 $k$ 中包含字符串 $s$，从其中删除 $s$，并在盒子 $y$ 中放入字符串 $t$，如果 $y=0$ 则在当前的 $k$ 中（原地）放入，这样就视为成功执行命令。每当成功执行命令后，立刻回到上一个断点，无论 $k$ 是否完全遍历。如果没有成功执行命令，跳转到下一条语句。\n- `#` 表示一个断点。**你必须以一行断点结束整个程序**。认为第 $0$ 行也是一个断点，此断点不计入代价。\n\n**语句数**可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n**断点数**可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n你不能使用超过 $100$ 条语句，超过 $10$ 的盒子或是非小写字母的球，任意一个盒子中某种颜色的球的个数均不能超过 $10^{8}$，程序中的单个字符串长度不能超过 $200$，你的程序单组数据实际遍历的语句条数不能超过 $4 \\times 10^5$，单组数据实际判断包含的字符集大小之和不能超过 $10^7$（参考下发的检验器）。\n\n约定 $n$ 表示输入至多使用的盒子数，$mx$ 表示初始时每个盒子中每种颜色球个数的最大值，$max$ 表示初始时所有盒子中球总数的最大值，$sum$ 表示初始时所有盒子中球的总数。**任务中未提及的盒子必须保持原状**，你需要分别完成下面 $10$ 个任务。\n\n1. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色球放入盒子 $1$，所有 $\\tt b$ 颜色球放入盒子 $2$，所有 $\\tt c$ 颜色球放入盒子 $3$。\n\n2. $n=10, sum \\le 100$，你需要将所有 $\\tt a$ 颜色的球改为 $\\tt b$ 颜色的球，将所有 $\\tt b$ 颜色的球改为 $\\tt c$ 颜色的球，将所有 $\\tt c$ 颜色的球改为 $\\tt a$ 颜色的球，这三个操作应同时完成。\n\n3. $n=10, sum \\le 100$，你需要将所有不包含 $\\tt a$ 颜色球的盒子清空。\n\n4. $n=10, sum \\le 100$，你需要给所有非空的，不包含 $\\tt a$ 颜色球的盒子放入一个 $\\tt a$ 颜色球。\n\n5. $n=5, sum \\le 5$，你需要将所有球按照颜色从小到大（${\\tt a} < {\\tt b} < {\\tt c}$）依次放入盒子 $1$ 到 $sum$，每个盒子恰好只放一个球，初始的球不保留。\n\n6. $n=10, sum \\le 100$，对于每个盒子，只保留一个出现次数最多的颜色的球，如果有多种颜色出现次数最多，将其变为空集。\n\n7. $n=10, sum \\le 100$，对于每个盒子，只保留出现次数最多的颜色的球，如果有多种颜色出现次数最多，保留颜色最小的（${\\tt a} < {\\tt b} < {\\tt c}$）。\n\n8. $n=1, mx \\le 10$，记 $\\tt a, b, c$ 颜色的球的个数为 $A, B, C$，你需要对于满足 $1 \\le x \\le 5$ 的整数 $x$ 使得盒子 $x$ 在最终恰好有 $A+Bx+Cx^2$ 个 $\\tt a$ 颜色球，不能有其它颜色球。\n\n9. $n=5, max \\le 10$，所有 $n$ 个盒子中球总数相等。将每个盒子中的球按从小到大排序，组成一个字符串，保证字符串两两不同。你需要对于每个字符串求出其字典序排名，按字典序从小到大依次将盒子改为 $\\tt a, b, c, d, e$。\n\n10. $n=5, max \\le 10$，你需要对 $n$ 个盒子求前缀和，即将前面所有盒子的球复制一份放入自己。\n\n**注：子任务按某种规则排序，与难度无关。**", "inputFormat": "该题为提交答案型试题，每个测试点对应的任务见【题目描述】。", "outputFormat": "针对给定的 $10$ 个任务，你需要分别将你的程序命名为 `1.out`∼`10.out`，并将这 $10$ 个文件直接压缩为 `zip` 文件提交。\n\n每个文件中需要包含若干行。\n\n第一行一个非负整数 $L$，代表你使用的语句数。\n\n接下来 $L$ 行，每行一个语句。\n\n**你必须以一个断点结尾。**", "hint": "**【自定义校验器数据格式】**\n\n第一行，两个整数 $T, V$，分别表示数据组数与评分参数。\n\n对于接下来每组数据：\n\n第一行，两个整数 $n,m$，表示需要描述的输入盒子数与输出盒子数。\n\n第二行，$n$ 个字符串，描述输入时前 $n$ 个盒子的状态。\n\n第三行，$m$ 个字符串，描述输出时前 $m$ 个盒子的状态，**你仍然需要保证其它盒子为空**。\n\n**同样地，使用 `@` 表示空串**。\n\n**【自定义校验器使用方法】**\n\n将 `checker.cpp` 编译后，在命令行执行\n\n```\nchecker [in] [out] [ans]\n```\n\n其中 `[in]` 为测试数据，`[out]` 为你需要测试的程序，`[ans]` 输入和 `[in]` 相同的内容。\n\n例如你需要测试第一个样例，且你的程序名为 `1.out`，需先将 `1.in` 复制到当前目录，并执行\n\n```\nchecker 1.in 1.out 1.in\n```\n\n**【评分标准】**\n\n对于每个测试点，其内部会评测若干组测试数据。\n\n若你的输出出现下列情况，那么该测试点不得分：\n\n- 输出与要求不符。\n- 出现无法识别或不合法的语句。\n- 某个盒子中某种颜色的球数量超过 $10^8$。\n- 使用超过 $100$ 条语句。\n- 程序中单个字符串长度超过 $200$。\n- 使用不在 $1$ 到 $10$ 之间的盒子。\n- 使用非小写字母颜色的球。\n- 单组数据实际语句遍历次数大于 $4 \\times 10^5$。\n- 单组数据实际判断包含的字符集大小之和超过 $10^7$（参考下发的检验器）。\n\n语句数可简单地视为程序中 `change` 和 `#` 的数量之和，第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n断点数可简单地视为程序中 `#` 的数量。第 $0$ 行的虚拟断点不计入，最后一行的断点计入。\n\n一个程序的代价是你给出的断点数量乘以程序的语句数，记作 $val$。\n\n否则设对应子任务的评分标准为 $V$，那么你的得分为：\n\n$$\\mathrm{score}=\\begin{cases}11&V>val\\\\\\Big\\lfloor\\frac{10}{\\exp\\left(1-\\frac {V}{val}\\right)}\\Big\\rfloor&\\text{otherwise.}\\end{cases}$$\n\n下面给出各个任务对应的评分标准 $V$:\n\n| 编号 | $1$ | $2$ | $3$ | $4$ | $5$| $6$ | $7$ | $8$ | $9$ | $10$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |  :-: | :-: | :-: | :-: | :-: |\n| $V$ | $16$ | $16$ | $16$ | $16$ | $26$ | $8$ | $10$ | $18$ | $20$ | $30$ |", "locale": "zh-CN"}}}
{"pid": "P11068", "type": "P", "difficulty": 2, "samples": [["3 2\n0 1 0", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「QMSOI R1」 转转楼梯", "background": "题目描述就是最好的题目背景（）。", "description": "同学们每天都要做操，而做操会经过转转楼梯。\n\n转转楼梯有 $n+1$ 阶楼梯，对于第 $i(1\\le i\\le n+1)$ 阶转转楼梯，其有一个转转值 $a_i$ 且 $a_i\\in\\{0,1\\}$，特别的，$a_{n+1}=0$。\n\n对于一阶转转楼梯，如果其下一阶楼梯的转转值与之相同（即 $a_{i+1}=a_i$）那么我们可以直接走下去，耗费一秒。否则我们需要耗费一秒转一圈以改变目前这阶楼梯的转转值为 $1-a_i$。然后再耗费一秒走下去。\n\n我们需要做 $k$ 天课间操。每天要从第 $1$ 阶楼梯走到第 $n+1$ 阶楼梯。\n\n请求出这 $k$ 天同学们经过转转楼梯的总时间。", "inputFormat": "输入共 $2$ 行。\n\n第一行两个数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i(1\\leq i\\leq n)$ 个数代表 $a_i$。", "outputFormat": "一行一个整数，代表这 $k$ 天我们一共会花费多少时间在转转楼梯上。", "hint": "### 样例解释\n第一天数列 $a=\\{0,1,0\\}$，走三步，转两圈，时间为 $5$。\n\n第二天数列 $a=\\{1,0,0\\}$，走三步，转一圈，时间为 $4$。\n\n### 数据范围\n\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,k\\le 2\\times 10^3$ | $30$ |\n| $1$ | $1\\le n,k\\le 2\\times 10^6$ | $70$ |\n\n对于所有数据，满足 $1\\le n,k\\le2\\times10^6$，$a_i\\in\\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 转转楼梯", "background": "题目描述就是最好的题目背景（）。", "description": "同学们每天都要做操，而做操会经过转转楼梯。\n\n转转楼梯有 $n+1$ 阶楼梯，对于第 $i(1\\le i\\le n+1)$ 阶转转楼梯，其有一个转转值 $a_i$ 且 $a_i\\in\\{0,1\\}$，特别的，$a_{n+1}=0$。\n\n对于一阶转转楼梯，如果其下一阶楼梯的转转值与之相同（即 $a_{i+1}=a_i$）那么我们可以直接走下去，耗费一秒。否则我们需要耗费一秒转一圈以改变目前这阶楼梯的转转值为 $1-a_i$。然后再耗费一秒走下去。\n\n我们需要做 $k$ 天课间操。每天要从第 $1$ 阶楼梯走到第 $n+1$ 阶楼梯。\n\n请求出这 $k$ 天同学们经过转转楼梯的总时间。", "inputFormat": "输入共 $2$ 行。\n\n第一行两个数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i(1\\leq i\\leq n)$ 个数代表 $a_i$。", "outputFormat": "一行一个整数，代表这 $k$ 天我们一共会花费多少时间在转转楼梯上。", "hint": "### 样例解释\n第一天数列 $a=\\{0,1,0\\}$，走三步，转两圈，时间为 $5$。\n\n第二天数列 $a=\\{1,0,0\\}$，走三步，转一圈，时间为 $4$。\n\n### 数据范围\n\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,k\\le 2\\times 10^3$ | $30$ |\n| $1$ | $1\\le n,k\\le 2\\times 10^6$ | $70$ |\n\n对于所有数据，满足 $1\\le n,k\\le2\\times10^6$，$a_i\\in\\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P11069", "type": "P", "difficulty": 4, "samples": [["2 100000 5 114514", "3765807592"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "搜索", "二分", "O2优化", "背包 DP", "前缀和"], "title": "「QMSOI R1」 生熏鱼", "background": "一切起源于一个叫神荀彧的武将...\n\n[那这道题与神荀彧的关系在哪里呢？](https://www.luogu.com.cn/paste/pk12x8vh)\n\n![](https://patchwiki.biligame.com/images/msgs/thumb/e/eb/1d6q6kksj6krwhaoqdoh3029glw4ypn.jpg/376px-%E7%A5%9E%E8%8D%80%E5%BD%A7-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.jpg)\n\n", "description": "一共有 $n$ 种攻击，第 $i$ 种攻击会先让你得到 $a_i$ 点经验，然后让你失去 $b_i$ 点血量。\n\n你将**依次**受到 $k$ 次攻击，其中，第 $i$ 次攻击的种类是 $c_i$，你的初始血量为 $m$。\n\n为了获得更多的经验，你可以选择 $n$ 种攻击中的任意种，并防止你受到的第一次这种攻击，防止后既不会损失血量，也不会增加经验值。\n\n现在你想知道的是在你的血量降到 $0$ 及以下前，最多能获得多少点经验。", "inputFormat": "一行 4 个整数，分别代表 $n,m,k,s$，其中，$s$ 为随机种子，其它变量含义与题目描述相同。\n\n因为本题输入数据过大，选手需要使用如下方式获取数据：\n~~~cpp\nconst int M=1e9,C=1e5+5;\nvoid read(){\n    cin>>n>>m>>k>>s;\n    mt19937 rand(s);\n    for(int i=1;i<=n;i++)  a[i]=rand()%M+1,b[i]=rand()%C+1;\n    for(int i=1;i<=k;i++)  c[i]=rand()%n+1;\n}\n~~~\n数组含义与题目描述中相同。", "outputFormat": "输出一行一个整数，表示你最多能获得多少点经验。", "hint": "### 样例解释\n\n样例 $1$ 的数据中 $a=\\{953888980,904140652\\},b=\\{6583,80624\\},c=\\{1,2,1,1,2\\}$。\n\n此时显然可以不防止任何攻击或者防止第一次类型 $2$ 的攻击获得 $953888980\\times 3+904140652=3765807592$ 的经验值。\n\n可以证明，不存在获得经验值更多的方案。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | $n$ | $k$  | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 10$ | $\\le 10^3$ | $20$ |\n| $1$ | $\\le 20$ | $\\le 10^7$ |$30$ |\n| $2$ | $\\le 24$ | $\\le 2\\times 10^7$ |$50$ |\n\n对于所有数据，满足 $1\\le n \\le 24$，$1 \\le k \\le 2\\times 10^7$，$1\\le s,m\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 生熏鱼", "background": "一切起源于一个叫神荀彧的武将...\n\n[那这道题与神荀彧的关系在哪里呢？](https://www.luogu.com.cn/paste/pk12x8vh)\n\n![](https://patchwiki.biligame.com/images/msgs/thumb/e/eb/1d6q6kksj6krwhaoqdoh3029glw4ypn.jpg/376px-%E7%A5%9E%E8%8D%80%E5%BD%A7-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.jpg)\n\n", "description": "一共有 $n$ 种攻击，第 $i$ 种攻击会先让你得到 $a_i$ 点经验，然后让你失去 $b_i$ 点血量。\n\n你将**依次**受到 $k$ 次攻击，其中，第 $i$ 次攻击的种类是 $c_i$，你的初始血量为 $m$。\n\n为了获得更多的经验，你可以选择 $n$ 种攻击中的任意种，并防止你受到的第一次这种攻击，防止后既不会损失血量，也不会增加经验值。\n\n现在你想知道的是在你的血量降到 $0$ 及以下前，最多能获得多少点经验。", "inputFormat": "一行 4 个整数，分别代表 $n,m,k,s$，其中，$s$ 为随机种子，其它变量含义与题目描述相同。\n\n因为本题输入数据过大，选手需要使用如下方式获取数据：\n~~~cpp\nconst int M=1e9,C=1e5+5;\nvoid read(){\n    cin>>n>>m>>k>>s;\n    mt19937 rand(s);\n    for(int i=1;i<=n;i++)  a[i]=rand()%M+1,b[i]=rand()%C+1;\n    for(int i=1;i<=k;i++)  c[i]=rand()%n+1;\n}\n~~~\n数组含义与题目描述中相同。", "outputFormat": "输出一行一个整数，表示你最多能获得多少点经验。", "hint": "### 样例解释\n\n样例 $1$ 的数据中 $a=\\{953888980,904140652\\},b=\\{6583,80624\\},c=\\{1,2,1,1,2\\}$。\n\n此时显然可以不防止任何攻击或者防止第一次类型 $2$ 的攻击获得 $953888980\\times 3+904140652=3765807592$ 的经验值。\n\n可以证明，不存在获得经验值更多的方案。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | $n$ | $k$  | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $\\le 10$ | $\\le 10^3$ | $20$ |\n| $1$ | $\\le 20$ | $\\le 10^7$ |$30$ |\n| $2$ | $\\le 24$ | $\\le 2\\times 10^7$ |$50$ |\n\n对于所有数据，满足 $1\\le n \\le 24$，$1 \\le k \\le 2\\times 10^7$，$1\\le s,m\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P11070", "type": "P", "difficulty": 5, "samples": [["2 2 1 1 2\n0.2 0.8", "1.670000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "Special Judge", "O2优化", "概率论", "期望"], "title": "「QMSOI R1」 三服同构", "background": "前不久，三国杀上线了一位三服同构的赛事专属武将...\n\n[那这道题与SP孙策的关系呢？](https://www.luogu.com.cn/paste/g68kquaa)\n\n![](https://patchwiki.biligame.com/images/sgs/thumb/4/46/ekgr28n00suo1zkuksp047802wfl4a6.png/401px-SP%E5%AD%99%E7%AD%96-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.png)", "description": "现在有 $4$ 种扑克牌：红桃 A，红桃 K，黑桃 A，黑桃 K，小 Q 的手上现在有 $n$ 张黑桃牌，$m$ 张红桃牌，其中有 $u$ 张黑桃 A，$v$ 张红桃 A，而对手有 $k$ 张牌。\n\n现在小 Q 知道对手第 $i$ 张牌点数为 A 的概率为 $a_i$，接下来他将持续执行以下操作，直到他的回合结束。\n\n1. 若你手中有至少 $1$ 张红桃 A 或红桃 K，则你**必须**等概率随机弃置 $1$ 张花色为红桃的牌，并与对手进行决斗。\n2. 否则，你结束你的回合。\n\n决斗的流程如下：\n\n从对手开始，双方交替进行以下操作：\n\n1. 若其手上有至少 $1$ 张红桃 A 或黑桃 A，则其**必须**等概率随机弃置 $1$ 张点数为 A 的牌。\n2. 否则，其受到 $1$ 点伤害,并结束此次决斗。\n\n现在你想要知道在你的回合结束前，对手期望会受到多少点伤害。", "inputFormat": "第一行 $5$ 个整数分别表示 $n,m,u,v,k$。\n\n第二行 $k$ 个实数，依次表示 $a_1,a_2,\\cdots,a_k$。", "outputFormat": "输出一行一个实数，表示期望伤害。\n\n**本题使用 Special Judge 进行评测**，只要你的答案与标准输出**绝对误差**在 $10^{-6}$ 以内，则判定答案正确。", "hint": "### 样例解释\n\n可以得出对手牌中有 $0,1,2$ 张 A 的概率分别为 $0.16,0.68,0.16$。\n\n当对手牌中有 $0$ 张 A 时，无论小 Q 每次耗费的哪张红色牌，都能对对手造成伤害，所以这种情况期望伤害为 $0.16*2=0.32$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手没 A 了就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*2=0.68$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 K 进行决斗，那对手打出 A 后，小 Q 打出黑桃 A 或红桃 A 的概率就是相等的，然后对手没 A 了就会受到伤害，但是如果打出的是红桃 A 就无法再进行决斗了，而打出黑桃 A 另一张红桃 A 依然被耗费，进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*0.5*1+0.68*0.5*0.5*2=0.51$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手再打出 A 后，小 Q 就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.16*0.5*1=0.08$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 K 进行决斗，双方就会各打出两张 A，然后敌人受到伤害，小 Q 就不能再进行决斗了，所以这种情况期望伤害同样为 $0.16*0.5*1=0.08$。\n\n所以对手受到的期望伤害就是 $0.32+0.68+0.51+0.08+0.08=1.67$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,m\\le 10$ | $30$ |\n| $1$ | $1\\le n,m\\le 2000$ | $70$ |\n\n对于所有的数据，满足 $1 \\leq n,m,k \\leq 2000,1\\le u<n,1\\le v <m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 三服同构", "background": "前不久，三国杀上线了一位三服同构的赛事专属武将...\n\n[那这道题与SP孙策的关系呢？](https://www.luogu.com.cn/paste/g68kquaa)\n\n![](https://patchwiki.biligame.com/images/sgs/thumb/4/46/ekgr28n00suo1zkuksp047802wfl4a6.png/401px-SP%E5%AD%99%E7%AD%96-%E7%BB%8F%E5%85%B8%E5%BD%A2%E8%B1%A1.png)", "description": "现在有 $4$ 种扑克牌：红桃 A，红桃 K，黑桃 A，黑桃 K，小 Q 的手上现在有 $n$ 张黑桃牌，$m$ 张红桃牌，其中有 $u$ 张黑桃 A，$v$ 张红桃 A，而对手有 $k$ 张牌。\n\n现在小 Q 知道对手第 $i$ 张牌点数为 A 的概率为 $a_i$，接下来他将持续执行以下操作，直到他的回合结束。\n\n1. 若你手中有至少 $1$ 张红桃 A 或红桃 K，则你**必须**等概率随机弃置 $1$ 张花色为红桃的牌，并与对手进行决斗。\n2. 否则，你结束你的回合。\n\n决斗的流程如下：\n\n从对手开始，双方交替进行以下操作：\n\n1. 若其手上有至少 $1$ 张红桃 A 或黑桃 A，则其**必须**等概率随机弃置 $1$ 张点数为 A 的牌。\n2. 否则，其受到 $1$ 点伤害,并结束此次决斗。\n\n现在你想要知道在你的回合结束前，对手期望会受到多少点伤害。", "inputFormat": "第一行 $5$ 个整数分别表示 $n,m,u,v,k$。\n\n第二行 $k$ 个实数，依次表示 $a_1,a_2,\\cdots,a_k$。", "outputFormat": "输出一行一个实数，表示期望伤害。\n\n**本题使用 Special Judge 进行评测**，只要你的答案与标准输出**绝对误差**在 $10^{-6}$ 以内，则判定答案正确。", "hint": "### 样例解释\n\n可以得出对手牌中有 $0,1,2$ 张 A 的概率分别为 $0.16,0.68,0.16$。\n\n当对手牌中有 $0$ 张 A 时，无论小 Q 每次耗费的哪张红色牌，都能对对手造成伤害，所以这种情况期望伤害为 $0.16*2=0.32$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手没 A 了就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*2=0.68$。\n\n当对手牌中有 $1$ 张 A 时，假设小 Q 第一次耗费的是 K 进行决斗，那对手打出 A 后，小 Q 打出黑桃 A 或红桃 A 的概率就是相等的，然后对手没 A 了就会受到伤害，但是如果打出的是红桃 A 就无法再进行决斗了，而打出黑桃 A 另一张红桃 A 依然被耗费，进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.68*0.5*0.5*1+0.68*0.5*0.5*2=0.51$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 A 进行决斗，那对手打出 A 后，小 Q 就会打出一张黑桃 A，对手再打出 A 后，小 Q 就会受到伤害，而小 Q 的另一张红桃 K 依然能被耗费，以进行决斗对对手造成伤害，所以这种情况期望伤害为 $0.16*0.5*1=0.08$。\n\n当对手牌中有 $2$ 张 A，这时如果小 Q 先耗费的 K 进行决斗，双方就会各打出两张 A，然后敌人受到伤害，小 Q 就不能再进行决斗了，所以这种情况期望伤害同样为 $0.16*0.5*1=0.08$。\n\n所以对手受到的期望伤害就是 $0.32+0.68+0.51+0.08+0.08=1.67$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n| 子任务 | 值域 | 分值 |\n| :----------: | :----------: | :----------: |\n| $0$ | $1\\le n,m\\le 10$ | $30$ |\n| $1$ | $1\\le n,m\\le 2000$ | $70$ |\n\n对于所有的数据，满足 $1 \\leq n,m,k \\leq 2000,1\\le u<n,1\\le v <m$。", "locale": "zh-CN"}}}
{"pid": "P11071", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 3\n2 1 3\n1 1 2 2\n2 1 3", "7\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 102400, 524288, 102400]}, "tags": ["线段树", "O2优化"], "title": "「QMSOI R1」 Distorted Fate", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/oeu0ft9d.png)\n**O Fortuna velut luna statu variabilis……**\n\n（图片来自 Phigros 曲绘，侵删。）\n\n加强版 [T512613](https://www.luogu.com.cn/problem/T512613)。", "description": "Geopelia 需要捕捉到一种特殊的，不同于黑洞的引力波。\n\n第 $i$ 个引力波有着一个频率 $A_i$，而多个引力波会互相影响，叠加，形成一个频率更快的引力波。\n\n具体的，对于一个长度为 $n$ 的序列 $A$，$A$ 中所有引力波叠加起来的频率 $f(A)$ 为：$\\bigcup\\limits_{i=1}^n A_i$。其中 $\\bigcup$ 表示按位或。\n\n现在，Geopelia 需要知道几段以同一引力波开始的区间的频率之和。\n\n也就是说，Geopelia 要向你询问：\n$$\n\\sum_{i=l}^rf(A[l,i])\n$$\n的值，其中 $A[l,r]$ 为 $A_l,A_{l+1},\\cdots,A_{r-1},A_r$ 组成的序列。\n\n但不幸的是，由于幽蓝边界的引力影响，某一个区间 $[l,r]$ 中所有引力波的频率可能会异或上一个值 $x$。\n\nGeopelia 想实时更新她的数据，你可以帮帮她吗？\n\n她知道引力波的频率可能很高，所以你只需要告诉她答案 $\\bmod \\ 2^{30}$ 的值就可以了。\n\n## 形式化题意\n\n给定一个长度为 $n$ 的数组 $A$，你需要完成以下 $q$ 次操作。\n\n1. ```1 l r x``` 将 $A_i(l\\le i\\le r)$ 异或上 $x$。\n\n2. ```2 l r``` 求：\n$$(\\sum_{i=l}^r\\bigcup_{j=l}^i A_j) \\bmod 2^{30}$$\n其中 $\\bigcup$ 表示按位或。", "inputFormat": "第一行输入两个数 $n$ 和 $q$，代表引力波的数量和操作的次数。\n\n第二行输入 $n$ 个整数，第 $i$ 个数代表引力波 $i$ 初始的频率 $A_i$。\n\n接下来 $q$ 行，每行输入三个整数 $opt,l,r$。\n\n若 $opt=1$，则再输入一个整数 $x$ 表示将区间 $[l,r]$ 中引力波的频率异或上 $x$。\n\n若 $opt=2$，则代表这是一次查询。", "outputFormat": "对于每个查询，输出一行一个整数代表所求式子的值 $\\bmod  \\ 2^{30}$ 的结果。 ", "hint": "### 样例解释\n\n对于第一组询问：此时 $A=\\{1,2,3\\}$，所以答案为 $1+1\\cup 2+1\\cup 2\\cup 3=1+3+3=7$。\n\n对于第二组询问：此时 $A=\\{3,0,3\\}$，所以答案为 $3+3\\cup 0+3\\cup 0\\cup 3=3+3+3=9$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n\n| 子任务 | $n$ | $q$ | 时间 | 空间 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |:----------:|\n| $0$ | $\\le 100$ | $\\le 100$ | $1s$ | $512MB$ | $20$ |\n| $1$ | $\\le 2\\times 10^4$ | $\\le 2\\times 10^4$ | $1s$ | $512MB$ |$20$ |\n| $2$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $512MB$ |$20$ |\n| $3$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $\\color{red}100MB$ |$40$ |\n\n对于所有数据，满足 $0\\le a_i,x< 2^{30}$，$1\\le l\\le r\\le n$。\n\n```\nINITALIZING……\nSCANING……\nCONNECTING……__PhigrOS Client Login\nTIME_OUT!\nCONNECTING……__Unknown\nSUCCESS!\n————————\n……九……鸟……\n……鸠……！\n……喂？\n…听得到吗？\n鸠?![SIGNAL LOST]\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QMSOI R1」 Distorted Fate", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/oeu0ft9d.png)\n**O Fortuna velut luna statu variabilis……**\n\n（图片来自 Phigros 曲绘，侵删。）\n\n加强版 [T512613](https://www.luogu.com.cn/problem/T512613)。", "description": "Geopelia 需要捕捉到一种特殊的，不同于黑洞的引力波。\n\n第 $i$ 个引力波有着一个频率 $A_i$，而多个引力波会互相影响，叠加，形成一个频率更快的引力波。\n\n具体的，对于一个长度为 $n$ 的序列 $A$，$A$ 中所有引力波叠加起来的频率 $f(A)$ 为：$\\bigcup\\limits_{i=1}^n A_i$。其中 $\\bigcup$ 表示按位或。\n\n现在，Geopelia 需要知道几段以同一引力波开始的区间的频率之和。\n\n也就是说，Geopelia 要向你询问：\n$$\n\\sum_{i=l}^rf(A[l,i])\n$$\n的值，其中 $A[l,r]$ 为 $A_l,A_{l+1},\\cdots,A_{r-1},A_r$ 组成的序列。\n\n但不幸的是，由于幽蓝边界的引力影响，某一个区间 $[l,r]$ 中所有引力波的频率可能会异或上一个值 $x$。\n\nGeopelia 想实时更新她的数据，你可以帮帮她吗？\n\n她知道引力波的频率可能很高，所以你只需要告诉她答案 $\\bmod \\ 2^{30}$ 的值就可以了。\n\n## 形式化题意\n\n给定一个长度为 $n$ 的数组 $A$，你需要完成以下 $q$ 次操作。\n\n1. ```1 l r x``` 将 $A_i(l\\le i\\le r)$ 异或上 $x$。\n\n2. ```2 l r``` 求：\n$$(\\sum_{i=l}^r\\bigcup_{j=l}^i A_j) \\bmod 2^{30}$$\n其中 $\\bigcup$ 表示按位或。", "inputFormat": "第一行输入两个数 $n$ 和 $q$，代表引力波的数量和操作的次数。\n\n第二行输入 $n$ 个整数，第 $i$ 个数代表引力波 $i$ 初始的频率 $A_i$。\n\n接下来 $q$ 行，每行输入三个整数 $opt,l,r$。\n\n若 $opt=1$，则再输入一个整数 $x$ 表示将区间 $[l,r]$ 中引力波的频率异或上 $x$。\n\n若 $opt=2$，则代表这是一次查询。", "outputFormat": "对于每个查询，输出一行一个整数代表所求式子的值 $\\bmod  \\ 2^{30}$ 的结果。 ", "hint": "### 样例解释\n\n对于第一组询问：此时 $A=\\{1,2,3\\}$，所以答案为 $1+1\\cup 2+1\\cup 2\\cup 3=1+3+3=7$。\n\n对于第二组询问：此时 $A=\\{3,0,3\\}$，所以答案为 $3+3\\cup 0+3\\cup 0\\cup 3=3+3+3=9$。\n\n### 数据范围\n**本题使用 subtask 进行捆绑测试**，每个 subtask 的具体分值如下：\n\n| 子任务 | $n$ | $q$ | 时间 | 空间 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |:----------:|\n| $0$ | $\\le 100$ | $\\le 100$ | $1s$ | $512MB$ | $20$ |\n| $1$ | $\\le 2\\times 10^4$ | $\\le 2\\times 10^4$ | $1s$ | $512MB$ |$20$ |\n| $2$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $512MB$ |$20$ |\n| $3$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $3s$ | $\\color{red}100MB$ |$40$ |\n\n对于所有数据，满足 $0\\le a_i,x< 2^{30}$，$1\\le l\\le r\\le n$。\n\n```\nINITALIZING……\nSCANING……\nCONNECTING……__PhigrOS Client Login\nTIME_OUT!\nCONNECTING……__Unknown\nSUCCESS!\n————————\n……九……鸟……\n……鸠……！\n……喂？\n…听得到吗？\n鸠?![SIGNAL LOST]\n```", "locale": "zh-CN"}}}
{"pid": "P11072", "type": "P", "difficulty": 3, "samples": [["4\n2\n2 1\n2\n2 0\n3\n1 2 3\n3\n0 1 1", "Bob\nAlice\nBob\nBob"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化"], "title": "Alice and Bob", "background": "", "description": "Alice 和 Bob 在一起玩游戏。\n\n初始时给定一个值域在 $0$ 到 $n$ 之间的整数序列 $a$，然后他（她）们轮流进行如下操作，Alice 先操作。\n\n- 操作：任意重排 $a_{1\\sim a_1}$。\n\n如果某一个人操作前 $a_1=0$，则他（她）立刻输，因为他（她）无法进行操作。\n\n如果某次操作结束后某一个人存在两次**他（她）的**操作满足**操作结束后**的 $a_1$ 相同，则他（她）立刻输。\n\n现在给定非负整数序列 $a$，假设两人足够聪明，问谁有必胜策略。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，第一行输入一个正整数 $n$，第二行输入 $n$ 个非负整数 $a_i$。", "outputFormat": "对于每一组数据，输出一行一个字符串 `Alice` 或者 `Bob`，分别表示先手必胜与后手必胜。", "hint": "| 测试点编号 $id$ | $n=$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 20$ | $id$ | 无 |\n| $21$ | $20$ | $a_1=0$ |\n| $22$ | $20$ | $a_1=1$ |\n| $23$ | $20$ | $a_i$ 全相同 |\n| $24\\sim 25$ | $20$ | $a_i$ 两两不同 |\n\n对于所有数据，保证 $1\\le T,n\\le 20$，$0\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Alice and Bob", "background": "", "description": "Alice 和 Bob 在一起玩游戏。\n\n初始时给定一个值域在 $0$ 到 $n$ 之间的整数序列 $a$，然后他（她）们轮流进行如下操作，Alice 先操作。\n\n- 操作：任意重排 $a_{1\\sim a_1}$。\n\n如果某一个人操作前 $a_1=0$，则他（她）立刻输，因为他（她）无法进行操作。\n\n如果某次操作结束后某一个人存在两次**他（她）的**操作满足**操作结束后**的 $a_1$ 相同，则他（她）立刻输。\n\n现在给定非负整数序列 $a$，假设两人足够聪明，问谁有必胜策略。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，第一行输入一个正整数 $n$，第二行输入 $n$ 个非负整数 $a_i$。", "outputFormat": "对于每一组数据，输出一行一个字符串 `Alice` 或者 `Bob`，分别表示先手必胜与后手必胜。", "hint": "| 测试点编号 $id$ | $n=$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim 20$ | $id$ | 无 |\n| $21$ | $20$ | $a_1=0$ |\n| $22$ | $20$ | $a_1=1$ |\n| $23$ | $20$ | $a_i$ 全相同 |\n| $24\\sim 25$ | $20$ | $a_i$ 两两不同 |\n\n对于所有数据，保证 $1\\le T,n\\le 20$，$0\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11073", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2\n1 3\n2 4\n3 4", "2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化"], "title": "Game King", "background": "", "description": "你穿越到了游戏王的世界，现在你正在和你的对手——一张 $n$ 个点 $m$ 条边的有向图决斗。\n\n中间忘了。\n\n真正的决斗者，一切都是必然。为了更好的应对面前的决斗，你需要知道有多少个点 $x$ 满足如下条件。\n\n- 对于任意一个点 $y$，均满足 $x$ 能到达 $y$ 或 $y$ 能到达 $x$（我们认为一个点能到达它自己本身）。", "inputFormat": "第一行输入两个正整数 $n,m$，分别表示给定有向图的点数与边数。\n\n接下来 $m$ 行每行输入两个正整数 $x,y$，表示一条有向边 $x\\to y$。", "outputFormat": "输出一行一个整数表示答案，即有多少个点满足所有点均能到达它或被它到达。", "hint": "### 样例一解释\n\n可以证明，只有点 $1,4$ 满足要求。\n\n由于点 $3$ 无法到达点 $2$ 且无法被点 $2$ 到达，故点 $2,3$ 不满足要求。\n\n### 样例二\n\n见下发文件下的 `gameh2.in` 与 `gameh2.ans`。\n\n该样例约束与测试点 $2$ 一致。\n\n### 样例三\n\n见下发文件下的 `gameh3.in` 与 `gameh3.ans`。\n\n该样例约束与测试点 $3$ 一致。\n\n### 数据范围\n\n本题共有 $10$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n=$|$m=$|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 2$|$5$|$10$|$20$|\n|$3\\sim 4$|$5$|$100$|$10^3$|\n|$5\\sim 6$|$5$|$10^3$|$10^4$|\n|$7\\sim 8$|$15$|$5\\times 10^4$|$5\\times 10^5$|\n|$9\\sim 10$|$20$|$10^6$|$3\\times 10^6$|\n\n对于所有数据，保证 $10\\le n\\le 10^6$，$20\\le m\\le 3\\times 10^6$。\n\n对于奇数编号测试点，保证给定的图没有**不同点数 $\\mathbf{>1}$** 的环。\n\n### 提示\n\n**本题输入输出规模较大，请使用较为快速的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Game King", "background": "", "description": "你穿越到了游戏王的世界，现在你正在和你的对手——一张 $n$ 个点 $m$ 条边的有向图决斗。\n\n中间忘了。\n\n真正的决斗者，一切都是必然。为了更好的应对面前的决斗，你需要知道有多少个点 $x$ 满足如下条件。\n\n- 对于任意一个点 $y$，均满足 $x$ 能到达 $y$ 或 $y$ 能到达 $x$（我们认为一个点能到达它自己本身）。", "inputFormat": "第一行输入两个正整数 $n,m$，分别表示给定有向图的点数与边数。\n\n接下来 $m$ 行每行输入两个正整数 $x,y$，表示一条有向边 $x\\to y$。", "outputFormat": "输出一行一个整数表示答案，即有多少个点满足所有点均能到达它或被它到达。", "hint": "### 样例一解释\n\n可以证明，只有点 $1,4$ 满足要求。\n\n由于点 $3$ 无法到达点 $2$ 且无法被点 $2$ 到达，故点 $2,3$ 不满足要求。\n\n### 样例二\n\n见下发文件下的 `gameh2.in` 与 `gameh2.ans`。\n\n该样例约束与测试点 $2$ 一致。\n\n### 样例三\n\n见下发文件下的 `gameh3.in` 与 `gameh3.ans`。\n\n该样例约束与测试点 $3$ 一致。\n\n### 数据范围\n\n本题共有 $10$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n=$|$m=$|\n|:-:|:-:|:-:|:-:|\n|$1\\sim 2$|$5$|$10$|$20$|\n|$3\\sim 4$|$5$|$100$|$10^3$|\n|$5\\sim 6$|$5$|$10^3$|$10^4$|\n|$7\\sim 8$|$15$|$5\\times 10^4$|$5\\times 10^5$|\n|$9\\sim 10$|$20$|$10^6$|$3\\times 10^6$|\n\n对于所有数据，保证 $10\\le n\\le 10^6$，$20\\le m\\le 3\\times 10^6$。\n\n对于奇数编号测试点，保证给定的图没有**不同点数 $\\mathbf{>1}$** 的环。\n\n### 提示\n\n**本题输入输出规模较大，请使用较为快速的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P11074", "type": "P", "difficulty": 7, "samples": [["5\n1 1\n2 2\n3 3\n4 100\n100 5", "0\n0 1\n0 2 1\n1 50 99 30\nfire big"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化"], "title": "火大", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/bp0nfbj7.png)", "description": "给定两个正整数 $n,m$，求一个长为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，满足如下两个要求。\n\n- 对于任意整数 $i$ ，其中 $1\\le i\\le n$，满足 $0\\le a_i<m$ 且 $a_i$ 为整数。\n- 对于任意整数 $i,j$，其中 $1\\le i\\le j\\le n$，存在整数 $k$，其中 $1\\le k\\le j$，满足 $a_k\\in [\\frac{m(i-1)}{j},\\frac{mi}{j})$。\n\n若存在序列 $a$ 满足要求，请给出构造，否则请输出 `fire big`。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，输入两个正整数 $n,m$，其意义如题目中所描述。", "outputFormat": "对于每组数据，若存在序列 $a$ 满足要求，输出一行 $n$ 个数表示序列 $a$，否则输出一行 `fire big`。", "hint": "**洛谷代码长度限制为 $\\textbf{50\\ KB}$。**\n\n### 评分标准\n\n对于某一个测试点，若你的输出有无解均判断正确，则你至少可以获得 $40\\%$ 的分数。\n\n特别的，如果你的输出的格式不合法，你可能会获得 $0$ 分，一种格式合法的输出是每行输出 $n$ 个 $0$。\n\n### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 10^3$，$1\\le T\\le 4.4\\times 10^4$，$1\\le \\sum n<10^6$，$1\\le m\\le 10^8$。\n\n本题共有 $12$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n$|$m$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$\\le 3$|$=n$|\n|$2$|$5$|$\\le 5$|$\\le 5$|\n|$3$|$5$|$\\le 5$|$=10^8$|\n|$4$|$5$|$\\le 5$|$\\le 10^8$|\n|$5$|$5$|$\\le 10$|$=n$|\n|$6$|$5$|$\\le 10$|$\\le 10^8$|\n|$7$|$5$|$\\le 10^3$|$<n$|\n|$8$|$10$|$\\le 15$|$\\le 100$|\n|$9$|$10$|$\\le 15$|$\\le 10^8$|\n|$10$|$15$|$\\le 44$|$\\le 10^3$|\n|$11$|$15$|$\\le 10^3$|$=10^8$|\n|$12$|$15$|$\\le 100$|$\\le 10^8$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "火大", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/bp0nfbj7.png)", "description": "给定两个正整数 $n,m$，求一个长为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，满足如下两个要求。\n\n- 对于任意整数 $i$ ，其中 $1\\le i\\le n$，满足 $0\\le a_i<m$ 且 $a_i$ 为整数。\n- 对于任意整数 $i,j$，其中 $1\\le i\\le j\\le n$，存在整数 $k$，其中 $1\\le k\\le j$，满足 $a_k\\in [\\frac{m(i-1)}{j},\\frac{mi}{j})$。\n\n若存在序列 $a$ 满足要求，请给出构造，否则请输出 `fire big`。", "inputFormat": "**本题多测。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n随后输入 $T$ 组数据。对于每组数据，输入两个正整数 $n,m$，其意义如题目中所描述。", "outputFormat": "对于每组数据，若存在序列 $a$ 满足要求，输出一行 $n$ 个数表示序列 $a$，否则输出一行 `fire big`。", "hint": "**洛谷代码长度限制为 $\\textbf{50\\ KB}$。**\n\n### 评分标准\n\n对于某一个测试点，若你的输出有无解均判断正确，则你至少可以获得 $40\\%$ 的分数。\n\n特别的，如果你的输出的格式不合法，你可能会获得 $0$ 分，一种格式合法的输出是每行输出 $n$ 个 $0$。\n\n### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 10^3$，$1\\le T\\le 4.4\\times 10^4$，$1\\le \\sum n<10^6$，$1\\le m\\le 10^8$。\n\n本题共有 $12$ 个测试点，测试点不等分，每个测试点的具体分值如下。\n\n|测试点编号|分值|$n$|$m$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$\\le 3$|$=n$|\n|$2$|$5$|$\\le 5$|$\\le 5$|\n|$3$|$5$|$\\le 5$|$=10^8$|\n|$4$|$5$|$\\le 5$|$\\le 10^8$|\n|$5$|$5$|$\\le 10$|$=n$|\n|$6$|$5$|$\\le 10$|$\\le 10^8$|\n|$7$|$5$|$\\le 10^3$|$<n$|\n|$8$|$10$|$\\le 15$|$\\le 100$|\n|$9$|$10$|$\\le 15$|$\\le 10^8$|\n|$10$|$15$|$\\le 44$|$\\le 10^3$|\n|$11$|$15$|$\\le 10^3$|$=10^8$|\n|$12$|$15$|$\\le 100$|$\\le 10^8$|", "locale": "zh-CN"}}}
{"pid": "P11075", "type": "P", "difficulty": 2, "samples": [["1", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "不等关系 加强版", "background": "本题是[不等关系](https://loj.ac/p/575)的加强版，建议大家先做原题后再来挑战加强版。", "description": "对于一个字符串 $s_1,s_2,\\cdots ,s_n$，仅包含 `<` 和 `>` 两种字符。\n\n设 $f(s)$ 为「使得 $p_i<p_{i+1}$ 当且仅当 $s_i$ 为 `<` 的排列 $p_1,p_2,\\cdots ,p_{n+1}$」的数量。\n\n现在请你求出，对于所有 $2^n$ 种长度为 $n$ 的字符串 $s$，$f(s)$ 之和是多少。\n\n由于答案可能有点大，因此你只需要输出它对 $998244353$ 取模的结果。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "输出一行一个整数，表示满足要求的排列数量对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n对于字符串 $s1=$ `<`，有且仅有一个排列 $(1,2)$ 满足要求，即 $f(s1)=1$。\n\n对于字符串 $s2=$ `>`，有且仅有一个排列 $(2,1)$ 满足要求，即 $f(s2)=1$。\n\n故答案即为 $f(s1)+f(s2)=2$。\n\n### 数据范围\n\n| 测试点编号 | $n=$ |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $5$ |\n| $5$ | $10$ |\n| $6$ | $15$ |\n| $7$ | $20$ |\n| $8$ | $30$ |\n| $9$ | $50$ |\n| $10$ | $100$ |\n\n对于所有数据，保证 $1\\le n\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不等关系 加强版", "background": "本题是[不等关系](https://loj.ac/p/575)的加强版，建议大家先做原题后再来挑战加强版。", "description": "对于一个字符串 $s_1,s_2,\\cdots ,s_n$，仅包含 `<` 和 `>` 两种字符。\n\n设 $f(s)$ 为「使得 $p_i<p_{i+1}$ 当且仅当 $s_i$ 为 `<` 的排列 $p_1,p_2,\\cdots ,p_{n+1}$」的数量。\n\n现在请你求出，对于所有 $2^n$ 种长度为 $n$ 的字符串 $s$，$f(s)$ 之和是多少。\n\n由于答案可能有点大，因此你只需要输出它对 $998244353$ 取模的结果。", "inputFormat": "输入一行一个正整数 $n$。", "outputFormat": "输出一行一个整数，表示满足要求的排列数量对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n对于字符串 $s1=$ `<`，有且仅有一个排列 $(1,2)$ 满足要求，即 $f(s1)=1$。\n\n对于字符串 $s2=$ `>`，有且仅有一个排列 $(2,1)$ 满足要求，即 $f(s2)=1$。\n\n故答案即为 $f(s1)+f(s2)=2$。\n\n### 数据范围\n\n| 测试点编号 | $n=$ |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $5$ |\n| $5$ | $10$ |\n| $6$ | $15$ |\n| $7$ | $20$ |\n| $8$ | $30$ |\n| $9$ | $50$ |\n| $10$ | $100$ |\n\n对于所有数据，保证 $1\\le n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P11076", "type": "P", "difficulty": 1, "samples": [["1\n5 6 4\nSFSFS\n", "4\n"], ["1\n3 7 3\nFFF\n", "2\n"], ["1\n29 1000 20\nFFFSFFFFSFFFFFSFFFSFFFFFFSFFF\n", "66\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「FSLOI Round I」单挑", "background": "小 F 和小 S 经常进行篮球单挑，但小 S 总是被盖帽。", "description": "每次单挑的结果一定是小 F 获胜或者小 S 获胜，不存在平局的情况。\n\n由于小 F 和小 S 实力不均衡，于是他们制定规则如下：\n\n给定两个整数 $x,y$，若小 F 先赢 $x$ 场，则小 F 获胜。若小 S 先赢 $y$ 场，则小 S 获胜。\n\n现在已经进行了 $n$ 场单挑，这 $n$ 场单挑的结果由一个字符串 $s$ 给出。若 $s$ 的第 $i$ 位为 `F`，则小 F 赢了第 $i$ 场。若 $s$ 的第 $i$ 位为 `S`，则小 S 赢了第 $i$ 场。\n\n小 F 想知道，为了取得胜利，后续的比赛中他**最多连续胜利的场数最少是多少**。\n\n你总共需要回答 $T$ 组询问。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行三个整数 $n,x,y$，含义与题目描述一致。\n\n第二行一个长度为 $n$ 的字符串 $s$，含义与题目描述一致。", "outputFormat": "共 $T$ 行。\n\n每行一个整数，表示小 F 在后续的比赛中最多连续胜利的场数的最小值。", "hint": "**【样例 1 解释】**\n\n为了让小 F 获胜，后续的比赛结果只能为 $ \\texttt {FFFF}$，此时最多连续胜利场数为 $4$。\n\n**【样例 2 解释】**\n\n为了让小 F 获胜，一种可能的后续的比赛结果为 $ \\texttt {FFSFSF}$，此时最多连续胜利场数为 $2$。\n\n请注意，您只需考虑**后续**的比赛中的最多连续胜场数，而不需要考虑前 $n$ 场。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 20$\n- $1 \\leq n \\leq 2\\times10^5$\n- $1 \\leq x,y \\leq 10^9$\n- $\\forall i \\leq n$，保证第 $i$ 场比赛结束后小 S 没有获胜。\n- $\\forall i < n$，保证第 $i$ 场比赛结束后小 F 没有获胜。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n=1$|\n|$2$|$15$|$x,y\\leq n$|\n|$3$|$15$|$A$|\n|$4$|$30$|$T=1$|\n|$5$|$30$|无|\n\n- 特殊性质 $A$：第 $n$ 场比赛结束后，小 S 总共获胜 $y-1$ 场。", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」One-On-One", "background": "FL_sleake and SnowTrace often play basketball one-on-one, but SnowTrace always gets blocked.", "description": "Exactly one of FL_sleake and SnowTrace will win a single one-on-one round. There is no situation of a tie.\n\nDue to the uneven strength between FL_sleake and SnowTrace, they have made the rules as follow:\n\nGiven two positive integers $x$ and $y$. If FL_sleake wins $x$ rounds before SnowTrace wins $y$ rounds, FL_sleake wins. Otherwise SnowTrace wins.\n\nThere have already been $n$ one-on-one rounds, and their results is given as a string $s$ of length $n$. If the $i$-th character of $s$ is `F`, it means FL_sleake has won the $i$-th round. If the $i$-th character of $s$ is `S`, it means SnowTrace has won the $i$-th round.\n\nFL_sleake wants to find **the minimum number of the maximum winning streak in the following rounds** of himself if he wins at last.", "inputFormat": "Each test contains $T$ test cases.\n\nThe first line contains a single integer $T$ — the number of test cases. The description of test cases follows.\n\nThe first line of each test case contains three integers $n,x$ and $y$.\n\nThe second line of each test case contains the string $s$ of length $n$.", "outputFormat": "For each test case, output one line containing a single integer, which is the answer of the test case.", "hint": "**Example Explanation**\n\nIn the first example, in  order for FL_sleake to win, he must win all of the following rounds until he wins a total of $6$ rounds. So, he has to win $4$ times in a row.\n\nIn the second example, $\\texttt{FFSFSF}$ is a possible result of the following rounds. In this case, the maximum winning streak of FL_sleake is $2$.\n\nNote that you only needs to consider the maximum winning streak in the **following** rounds until he wins. The streak in the first $n$ rounds doesn't matter.\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\leq T \\leq 20$\n- $1 \\leq n \\leq 2\\times10^5$\n- $1 \\leq x,y \\leq 10^9$\n- $\\forall i \\leq n$，SnowTrace doesn't win after the $i$-th round.\n- $\\forall i < n$，FL_sleake doesn't win after the $i$-th round.\n\n| Subtask Id | Score | Special Property   |\n| :----: | :--: | :---------: |\n|  $1$   | $10$ |    $n=1$    |\n|  $2$   | $15$ | $x,y\\leq n$ |\n|  $3$   | $15$ |     $A$     |\n|  $4$   | $30$ |    $T=1$    |\n|  $5$   | $30$ |     -      |\n\n- Special property $A$: SnowTrace wins $y-1$ rounds after the $n$-th round.", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」单挑", "background": "小 F 和小 S 经常进行篮球单挑，但小 S 总是被盖帽。", "description": "每次单挑的结果一定是小 F 获胜或者小 S 获胜，不存在平局的情况。\n\n由于小 F 和小 S 实力不均衡，于是他们制定规则如下：\n\n给定两个整数 $x,y$，若小 F 先赢 $x$ 场，则小 F 获胜。若小 S 先赢 $y$ 场，则小 S 获胜。\n\n现在已经进行了 $n$ 场单挑，这 $n$ 场单挑的结果由一个字符串 $s$ 给出。若 $s$ 的第 $i$ 位为 `F`，则小 F 赢了第 $i$ 场。若 $s$ 的第 $i$ 位为 `S`，则小 S 赢了第 $i$ 场。\n\n小 F 想知道，为了取得胜利，后续的比赛中他**最多连续胜利的场数最少是多少**。\n\n你总共需要回答 $T$ 组询问。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行三个整数 $n,x,y$，含义与题目描述一致。\n\n第二行一个长度为 $n$ 的字符串 $s$，含义与题目描述一致。", "outputFormat": "共 $T$ 行。\n\n每行一个整数，表示小 F 在后续的比赛中最多连续胜利的场数的最小值。", "hint": "**【样例 1 解释】**\n\n为了让小 F 获胜，后续的比赛结果只能为 $ \\texttt {FFFF}$，此时最多连续胜利场数为 $4$。\n\n**【样例 2 解释】**\n\n为了让小 F 获胜，一种可能的后续的比赛结果为 $ \\texttt {FFSFSF}$，此时最多连续胜利场数为 $2$。\n\n请注意，您只需考虑**后续**的比赛中的最多连续胜场数，而不需要考虑前 $n$ 场。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 20$\n- $1 \\leq n \\leq 2\\times10^5$\n- $1 \\leq x,y \\leq 10^9$\n- $\\forall i \\leq n$，保证第 $i$ 场比赛结束后小 S 没有获胜。\n- $\\forall i < n$，保证第 $i$ 场比赛结束后小 F 没有获胜。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n=1$|\n|$2$|$15$|$x,y\\leq n$|\n|$3$|$15$|$A$|\n|$4$|$30$|$T=1$|\n|$5$|$30$|无|\n\n- 特殊性质 $A$：第 $n$ 场比赛结束后，小 S 总共获胜 $y-1$ 场。", "locale": "zh-CN"}}}
{"pid": "P11077", "type": "P", "difficulty": 2, "samples": [["1\n5 2\n1 5 7 9 13", "L"], ["2\n6 3\n4 7 5 3 1 16\n7 2\n2 6 4 8 12 4 6\n", "Draw\nL"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「FSLOI Round I」石子", "background": "小 F 和小 L 正在玩一种古老的博弈游戏的改版。", "description": "给定 $n$ 堆石子，第 $i$ 堆有 $a_i$ 个石子。设序列 $a_1,a_2,\\cdots,a_n$ 的平均数为 $x$。此外，还会给定一个不大于 $x$ 的数字 $k$。小 F 和小 L 将轮流进行以下操作直至一方胜出，小 F 先手：\n\n- 选定两堆石子 $i,j$，满足 $a_i < x < a_j$。若无法选出这样的两堆石子，则对方获胜。\n\n- 从第 $j$ 堆石子中拿出 $k$ 个石子放到第 $i$ 堆中。\n\n小 F 和小 L 都将用最优策略进行操作。\n\n若游戏会无限进行下去，输出 `Draw`。若小 F 将获胜，输出 `F`。否则，输出 `L`。\n\n小 F 一共会进行 $T$ 场游戏，你需要告诉他每场游戏的结果。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "共 $T$ 行。\n\n每行应为 `Draw`，`F`，`L` 中的一种。", "hint": "**【样例 1 解释】**\n\n平均数为 $7$。\n\n小 F 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $3,5,7,9,11$。\n\n小 L 可以选择 $i=1,j=4$ 进行操作，使得石子数分别为 $5,5,7,7,11$。\n\n小 F 可以选择 $i=2,j=5$ 进行操作，使得石子数分别为 $5,7,7,7,9$。\n\n小 L 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $7,7,7,7,7$。\n\n小 F 无法进行操作。小 L 获胜。可以证明无论小 F 如何操作，小 L 都有必胜策略。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n设 $x$ 为序列 $a$ 的平均值。\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 10$\n- $1 \\leq n \\leq 2\\times10^5$\n- $0 \\leq a_i \\leq 10^9$\n- $1 \\leq k \\leq x$\n- $x$ 为整数\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$A$|\n|$2$|$10$|$k = 1$|\n|$3$|$15$|$n \\leq 5, T =1$|\n|$4$|$25$|$n \\leq 1000$|\n|$5$|$45$|无|\n\n特殊性质 $A$：$a_1=a_2=a_3=\\cdots=a_n$。", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」Stone", "background": "Frank and Louis are playing a modified version of an ancient game.", "description": "Frank and Louis are playing a game with $n$ piles of stones, where the $i$-th pile has $a_i$ stones. Denote the average of sequence $a_1,a_2,\\dots,a_n$ as $x$.\n\nBefore the game starts, a positive integer not greater than $x$ is given. Frank and Louis take turns making the following moves with Frank going first:\n\n- Choose the $i$-th and the $j$-th piles of stones $(i \\neq j)$ satisfying $a_i<x<a_j.$\n\n- Take out $k$ stones from the $j$-th pile and put them into the $i$-th pile of stones.\n\nThe player who is unable to make a move loses.\n\nDetermine who will win if both players play optimally.", "inputFormat": "Each test contains multiple test cases.\n\nThe first line of the input contains a single integer $T$, the number of test cases. The description of test cases follows.\n\nThe first line of each test case contains two integers $n$ and $k$.\n\nThe second line of each test case contains $n$ integers: $a_1,a_2,\\dots,a_n$.", "outputFormat": "For each test case, output `F` if Frank wins, `L` if Louis wins, and `Draw` if the game will never end.", "hint": "**Example Explanation**\n\nIn the first example, $a$ is initially $\\{1,5,7,9,13\\}$, and the average value $x$ of the sequence $a$ is $7$.\n\nOne possible game process follows:\n\n1. Frank chooses $i=1,j=5$, and $a$ becomes $\\{3,5,7,9,11\\}$.\n\n2. Louis chooses $i=1,j=4$, and $a$ becomes $\\{5,5,7,7,11\\}$.\n\n3. Frank chooses $i=2,j=5$, and $a$ becomes $\\{5,7,7,7,9\\}$.\n\n4. Louis chooses $i=1,j=5$, and $a$ becomes $\\{7,7,7,7,7\\}$.\n\n5. Frank is unable to make a move, so Louis wins.\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\le T \\le 10$\n- $1 \\le n \\le 2 \\times 10^5$\n- $0 \\le a_i \\le 10^9$\n- $1 \\le k \\le x$\n- $x$ is an integer.\n\n| Subtask Id | Score | Special Property   |\n| :----: | :--: | :---------: |\n|  $1$   | $5$ |$A$|\n|  $2$   | $10$ | $k=1$ |\n|  $3$   | $15$ | $n \\le 5, T=1$|\n|  $4$   | $25$ |    $n \\le 1000$    |\n|  $5$   | $45$ |     -      |\n\nSpecial Property A: $a_1=a_2=\\dots=a_n$.", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」石子", "background": "小 F 和小 L 正在玩一种古老的博弈游戏的改版。", "description": "给定 $n$ 堆石子，第 $i$ 堆有 $a_i$ 个石子。设序列 $a_1,a_2,\\cdots,a_n$ 的平均数为 $x$。此外，还会给定一个不大于 $x$ 的数字 $k$。小 F 和小 L 将轮流进行以下操作直至一方胜出，小 F 先手：\n\n- 选定两堆石子 $i,j$，满足 $a_i < x < a_j$。若无法选出这样的两堆石子，则对方获胜。\n\n- 从第 $j$ 堆石子中拿出 $k$ 个石子放到第 $i$ 堆中。\n\n小 F 和小 L 都将用最优策略进行操作。\n\n若游戏会无限进行下去，输出 `Draw`。若小 F 将获胜，输出 `F`。否则，输出 `L`。\n\n小 F 一共会进行 $T$ 场游戏，你需要告诉他每场游戏的结果。", "inputFormat": "第一行一个整数 $T$，表示共有 $T$ 组数据。\n\n每组数据共两行。\n\n第一行输入两个整数 $n,k$。\n\n第二行输入 $n$ 个整数 $a_i$。", "outputFormat": "共 $T$ 行。\n\n每行应为 `Draw`，`F`，`L` 中的一种。", "hint": "**【样例 1 解释】**\n\n平均数为 $7$。\n\n小 F 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $3,5,7,9,11$。\n\n小 L 可以选择 $i=1,j=4$ 进行操作，使得石子数分别为 $5,5,7,7,11$。\n\n小 F 可以选择 $i=2,j=5$ 进行操作，使得石子数分别为 $5,7,7,7,9$。\n\n小 L 可以选择 $i=1,j=5$ 进行操作，使得石子数分别为 $7,7,7,7,7$。\n\n小 F 无法进行操作。小 L 获胜。可以证明无论小 F 如何操作，小 L 都有必胜策略。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n设 $x$ 为序列 $a$ 的平均值。\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq T \\leq 10$\n- $1 \\leq n \\leq 2\\times10^5$\n- $0 \\leq a_i \\leq 10^9$\n- $1 \\leq k \\leq x$\n- $x$ 为整数\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$A$|\n|$2$|$10$|$k = 1$|\n|$3$|$15$|$n \\leq 5, T =1$|\n|$4$|$25$|$n \\leq 1000$|\n|$5$|$45$|无|\n\n特殊性质 $A$：$a_1=a_2=a_3=\\cdots=a_n$。", "locale": "zh-CN"}}}
{"pid": "P11078", "type": "P", "difficulty": 3, "samples": [["3 3 4 1\n..X\n.XX\nXXX\nD 1 2\nR 1 2\nD 2 0\nL 1 0\n", "1 3\n"], ["10 10 8 2\nXX.XX.X...\nXXX..XXX.X\nXXX.X.XXXX\nXXXXXXX.X.\n.XX...XX.X\n.XXX.X.X.X\n...XXX.XXX\nXX...XX...\nX..XX....X\nXXXXX...XX\nU 2 1\nL 1 3\nR 3 1\nL 1 2\nD 2 1\nR 5 1\nL 4 0\nD 3 0\n", "1 10\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "差分", "洛谷月赛"], "title": "「FSLOI Round I」迷雾", "background": "小 F 来到了迷雾之森。", "description": "整个迷雾之森可以由一个 $n \\times m$ 的矩阵表示，`X` 代表有迷雾的地块，`.` 代表空地。从上到下给每行标号为 $1,2,\\cdots,n$，从左到右给每列标号为 $1,2,\\cdots,m$。除此之外，还会给定一个迷雾系数 $k$。\n\n小 F 进行了 $q$ 次移动。第 $i$ 次移动由一个字符 $c_i$，两个数字 $a_i,b_i$ 描述，更具体地说：\n\n- $c_i$ 为 `U` 时，向上走 $a_i$ 步。\n- $c_i$ 为 `D` 时，向下走 $a_i$ 步。\n- $c_i$ 为 `L` 时，向左走 $a_i$ 步。\n- $c_i$ 为 `R` 时，向右走 $a_i$ 步。\n\n当然，小 F 不可以走出这个 $ n \\times m $ 的范围。换句话说，若走到边界处，立即结束此次移动。\n\n若第 $i$ 次移动**结束**后小 F 停留在有迷雾的地块上，则小 F 会对从 $i+k$ 开始，之后每 $k$ 次移动的 $c$ 进行一次修改，一共修改 $b_i$ 个移动。也就是说，小 F 会对 $c_{i+k},c_{i+2\\times k},\\cdots,c_{i+b_i \\times k}$ 进行一次**修改**（保证 $i+b_i\\times k \\leq q$）。若 $b_i=0$ 则相当于不做修改。**注意所有操作的 $k$ 是一样的**。\n\n修改 $c_x$ 即为按照以下规则替换 $c_x$：\n\n- 若 $c_x$ 为 `U`，则替换为 `D`。\n- 若 $c_x$ 为 `D`，则替换为 `U`。\n- 若 $c_x$ 为 `R`，则替换为 `L`。\n- 若 $c_x$ 为 `L`，则替换为 `R`。\n\n初始时小 F 在点 $(1,1)$ 处，请输出 $q$ 次移动后小 F 所在的位置 $(x,y)$。", "inputFormat": "第一行四个整数 $n,m,q,k$。\n\n接下来 $n$ 行，每行一个长度为 $m$，由 `.` 和 `X` 构成的字符串，描述整个迷雾之森。\n\n接下来 $q$ 行，每行先是一个字符 $c_i$，然后依次是两个整数 $a_i,b_i$，描述每次移动。", "outputFormat": "共一行。\n\n两个整数 $x,y$，表示小 F 最终的位置。", "hint": "**【样例 1 解释】**\n\n小 F 的位置变化如下：\n\n$(1,1) \\rightarrow (2,1) \\rightarrow (2,2)\\rightarrow (1,2) \\rightarrow (1,3)$\n\n序列 $c$ 的变化如下：\n\n$ \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace$\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n,m \\leq 500$\n- $1 \\leq k \\leq 20$\n- $1\\leq q \\leq 2 \\times 10^5$\n- $1 \\leq a_i,b_i \\leq 10^6$\n- $c_i$ 为 `L`，`R`，`U`，`D` 四个字符中的一个。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$q=1$|\n|$2$|$15$|$n,m,q\\leq 100$|\n|$3$|$20$|$k=1$|\n|$4$|$30$|$n=1$|\n|$5$|$30$|无|", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」Fog", "background": "FL_sleake has come to the Misty Forest.", "description": "The Misty Forest can be represented as a grid of size $n \\times m$, where cells with character `X` have dense fog, while cells with character `.` are empty.\n\nDenote the cell in the $i$-th row from the top and the $j$-th column from the left as $(i,j)$.\n\nA fog constant $k$ is given.\n\nFL_sleake made $q$ moves. The $i$-th move consists of one character $c_i$ and two integers $a_i$ and $b_i$. Specifically:\n\n- If $c_i$ is `U`, take $a_i$ steps upwards.\n- If $c_i$ is `D`, take $a_i$ steps downwards.\n- If $c_i$ is `L`, take $a_i$ steps to the left.\n- If $c_i$ is `R`, take $a_i$ steps to the right.\n\nIn each step, he will go by exactly one cell towards the given direction. However, if he will move outside of the forest after the step, he just stays in the current cell instead.\n\nIf FL_sleake stays in a cell with fog after he performs the $i$-th move, he will perform an operation on $c_{i+k},c_{i+2\\times k},\\dots, c_{i+b_i\\times k}$. If $b_i=0$, No operations will be performed.\n\nAn operation on a character $c$ is replacing it with another character representing the opposite direction of $c$. That is:\n\n- If $c$ is `U`, replace it with `D`.\n- If $c$ is `D`, replace it with `U`.\n- If $c$ is `L`, replace it with `R`.\n- If $c$ is `R`, replace it with `L`.\n\nInitially FL_sleake is at $(1,1)$, please find his position after the $q$ moves.\n\nRecall that $k$ is the same for all moves.", "inputFormat": "The first line of the input contains four integers $n,m,q,k$.\n\nIn the following $n$ lines, each line contains a string of length $m$, representing the Misty Forest.\n\nIn the following $q$ lines, the $i$-th line contains one character $c_i$, and two integers $a_i$ and $b_i$, representing the $i$-th move.", "outputFormat": "Output a single line containing two integers $x$ and $y$, representing that FL_sleake's position after the $q$ moves is $(x,y)$.", "hint": "**Example Explanation**\n\nIn the first example, FL_sleake's position at the beginning and after each move is as follow:\n\n$(1,1) \\rightarrow (2,1) \\rightarrow (2,2)\\rightarrow (1,2) \\rightarrow (1,3)$\n\nThe sequence $c_1,c_2,\\dots,c_q$ at the beginning and after each move is as follow:\n\n$ \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace$\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\leq n,m \\leq 500$\n- $1 \\leq k \\leq 20$\n- $1\\leq q \\leq 2 \\times 10^5$\n- $1 \\leq a_i,b_i \\leq 10^6$\n- $c_i \\in \\{\\texttt{L,R,U,D}\\}$\n\n|Subtask Id|Score|Special Property|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$q=1$|\n|$2$|$15$|$n,m,q\\leq 100$|\n|$3$|$20$|$k=1$|\n|$4$|$30$|$n=1$|\n|$5$|$30$|-|", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」迷雾", "background": "小 F 来到了迷雾之森。", "description": "整个迷雾之森可以由一个 $n \\times m$ 的矩阵表示，`X` 代表有迷雾的地块，`.` 代表空地。从上到下给每行标号为 $1,2,\\cdots,n$，从左到右给每列标号为 $1,2,\\cdots,m$。除此之外，还会给定一个迷雾系数 $k$。\n\n小 F 进行了 $q$ 次移动。第 $i$ 次移动由一个字符 $c_i$，两个数字 $a_i,b_i$ 描述，更具体地说：\n\n- $c_i$ 为 `U` 时，向上走 $a_i$ 步。\n- $c_i$ 为 `D` 时，向下走 $a_i$ 步。\n- $c_i$ 为 `L` 时，向左走 $a_i$ 步。\n- $c_i$ 为 `R` 时，向右走 $a_i$ 步。\n\n当然，小 F 不可以走出这个 $ n \\times m $ 的范围。换句话说，若走到边界处，立即结束此次移动。\n\n若第 $i$ 次移动**结束**后小 F 停留在有迷雾的地块上，则小 F 会对从 $i+k$ 开始，之后每 $k$ 次移动的 $c$ 进行一次修改，一共修改 $b_i$ 个移动。也就是说，小 F 会对 $c_{i+k},c_{i+2\\times k},\\cdots,c_{i+b_i \\times k}$ 进行一次**修改**（保证 $i+b_i\\times k \\leq q$）。若 $b_i=0$ 则相当于不做修改。**注意所有操作的 $k$ 是一样的**。\n\n修改 $c_x$ 即为按照以下规则替换 $c_x$：\n\n- 若 $c_x$ 为 `U`，则替换为 `D`。\n- 若 $c_x$ 为 `D`，则替换为 `U`。\n- 若 $c_x$ 为 `R`，则替换为 `L`。\n- 若 $c_x$ 为 `L`，则替换为 `R`。\n\n初始时小 F 在点 $(1,1)$ 处，请输出 $q$ 次移动后小 F 所在的位置 $(x,y)$。", "inputFormat": "第一行四个整数 $n,m,q,k$。\n\n接下来 $n$ 行，每行一个长度为 $m$，由 `.` 和 `X` 构成的字符串，描述整个迷雾之森。\n\n接下来 $q$ 行，每行先是一个字符 $c_i$，然后依次是两个整数 $a_i,b_i$，描述每次移动。", "outputFormat": "共一行。\n\n两个整数 $x,y$，表示小 F 最终的位置。", "hint": "**【样例 1 解释】**\n\n小 F 的位置变化如下：\n\n$(1,1) \\rightarrow (2,1) \\rightarrow (2,2)\\rightarrow (1,2) \\rightarrow (1,3)$\n\n序列 $c$ 的变化如下：\n\n$ \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,D,L} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace \\rightarrow \\lbrace \\texttt{D,R,U,R} \\rbrace$\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n,m \\leq 500$\n- $1 \\leq k \\leq 20$\n- $1\\leq q \\leq 2 \\times 10^5$\n- $1 \\leq a_i,b_i \\leq 10^6$\n- $c_i$ 为 `L`，`R`，`U`，`D` 四个字符中的一个。\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$5$|$q=1$|\n|$2$|$15$|$n,m,q\\leq 100$|\n|$3$|$20$|$k=1$|\n|$4$|$30$|$n=1$|\n|$5$|$30$|无|", "locale": "zh-CN"}}}
{"pid": "P11079", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2 1", "2"], ["7\n2 4 3 1 5 2 1", "35"], ["20\n2 3 5 6 8 7 6 5 6 7 8 8 8 8 4 3 5 6 7 4", "15085"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「FSLOI Round I」山峦", "background": "山峦是造物主弃的酒杯。", "description": "如果一个长度至少为三的序列 $a$ 满足以下条件，则称其为一个**山峰**：\n\n- 设其长度为 $m$。存在一个 $x$，满足 $2\\leq x \\leq m-1$，并且使得 $a_1,a_2,\\cdots,a_x$ 严格单调递增，$a_x,a_{x+1},\\cdots,a_m$ 严格单调递减。\n\n特别地，称 $a_x$ 为这个山峰的高度。\n\n如果一个序列 $b$ 满足以下任一条件，则称其为一个**山峦**：\n\n- $b$ 序列是一个**山峰**。\n\n- 可以拆成至少两个连续的子序列，使得每个子序列都是**山峰**，且从左到右**山峰的高度**严格单调递增。\n\n比如，序列 $\\lbrace 2,4,3,1,5,2,1 \\rbrace$ 是山峦，因为其可以拆分为 $\\lbrace 2,4,3 \\rbrace,\\lbrace 1,5,2,1 \\rbrace$ 两个山峰，且山峰高度严格递增。而序列 $\\lbrace 2,4,3,5,2,1 \\rbrace$ 不是山峦，因为其无法拆分成至少两个连续的子序列，使得每个子序列都是山峰。\n\n现在给定一个长度为 $n$ 的序列 $a$，小 F 想知道，在 $a$ 的所有子序列中，有多少个是**山峦**。由于答案可能很大，请输出其对 $998244353$ 取余后的结果。\n\n请注意，在本题中，即使子序列的元素相同，只要子序列的元素在 $a$ 中的位置不同，仍算作不同的子序列。", "inputFormat": "共两行。\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示 $a$ 序列。", "outputFormat": "共一行。\n\n一个整数，表示是山峦的子序列数量对 $998244353$ 取余的结果。", "hint": "**【样例 1 解释】**\n\n由 $a_1,a_2,a_4$ 构成的子序列是山峦，由 $a_1,a_3,a_4$ 构成的子序列是山峦。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n \\leq 500$\n- $1 \\leq a_i \\leq 10^6$\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n \\leq 18$|\n|$2$|$15$|$n \\leq 80$|\n|$3$|$15$|$A$|\n|$4$|$20$|$B$|\n|$5$|$40$|无|\n\n特殊性质 $A$：序列 $a$ 是山峰。\n\n特殊性质 $B$：序列 $a$ 中的元素互不相同。", "locale": "zh-CN", "translations": {"en": {"title": "「FSLOI Round I」Mountain", "background": "Mountains are wineglasses discarded by the Creator.", "description": "An integer sequence $a$ of length $m(m \\ge 3)$ is called a **peak** if and only if it satisfies the following condition:\n\n- There exists an integer $x(2 \\le x \\le m-1)$ where $a_1<a_2<\\dots<a_x>a_{x+1}>\\dots>a_m$. We call $a_x$ as the **height** of the peak.\n\nAn integer sequence $b$ is called a **mountain** if and only if it satisfies one of the following conditions:\n\n- $b$ is a **peak**.\n\n- $b$ can be split into at least two continuous subsequences, where each subsequence is a **peak** and the **heights** of the **peaks** are strictly increasing from left to right.\n\nFor example, the sequence $\\{2,4,3,1,5,2,1\\}$ is a **mountain**, because it can be split into two **peaks**: $\\{2,4,3\\}$ and $\\{1,5,2,1\\}$, and the **heights** of the peaks $(\\{4,5\\})$ are strictly increasing. $\\{2,4,3,5,2,1\\}$ is not a **peak** because it itself isn't a **peak** and it cannot be split into multiple **peaks**.\n\nYou are given a sequence $a$ of length $n$. You need to find out the number of **mountains** among all the subsequences of $a$.\n\nThe answer may be very large, so please print the answer modulo $998{,}244{,}353$.\n\nNote that, for two subsequences $s=\\{a_{i_1},a_{i_2},\\dots,a_{i_p}\\}$ and $t=\\{a_{j_1},a_{j_2},\\dots,a_{j_q}\\}$, they are different if and only if $\\{i_1,i_2,\\dots,i_p\\}\\neq\\{j_1,j_2,\\dots,j_q\\}$. In other words, even if two subsequences have the same elements, they are distinguished as long as the positions of the elements are different.", "inputFormat": "The first line of the input contains a single integer $n$ representing the length of the given sequence.\n\nThe second line contains $n$ integers $a_1,a_2,\\dots,a_n$, representing the sequence $a$.", "outputFormat": "Output a single integer, representing the answer modulo $998{,}244{,}353$.", "hint": "**Example Explanation**\n\nIn the first example, $\\{a_1,a_2,a_4\\}$ and $\\{a_1,a_3,a_4\\}$ are **mountains**.\n\n**Constraints**\n\n**Subtasks are used in this problem.**\n\nFor all tests, it is guaranteed that: \n\n- $1 \\leq n \\leq 500$\n- $1 \\leq a_i \\leq 10^6$\n\n|Subtask Id|Score|Special Property|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n \\leq 18$|\n|$2$|$15$|$n \\leq 80$|\n|$3$|$15$|$A$|\n|$4$|$20$|$B$|\n|$5$|$40$|-|\n\nSpecial Property $A$: $a$ is a **peak**.\n\nSpecial Property $B$: $a_1,a_2,\\dots,a_n$ are pairwise distinct.", "locale": "en"}, "zh-CN": {"title": "「FSLOI Round I」山峦", "background": "山峦是造物主弃的酒杯。", "description": "如果一个长度至少为三的序列 $a$ 满足以下条件，则称其为一个**山峰**：\n\n- 设其长度为 $m$。存在一个 $x$，满足 $2\\leq x \\leq m-1$，并且使得 $a_1,a_2,\\cdots,a_x$ 严格单调递增，$a_x,a_{x+1},\\cdots,a_m$ 严格单调递减。\n\n特别地，称 $a_x$ 为这个山峰的高度。\n\n如果一个序列 $b$ 满足以下任一条件，则称其为一个**山峦**：\n\n- $b$ 序列是一个**山峰**。\n\n- 可以拆成至少两个连续的子序列，使得每个子序列都是**山峰**，且从左到右**山峰的高度**严格单调递增。\n\n比如，序列 $\\lbrace 2,4,3,1,5,2,1 \\rbrace$ 是山峦，因为其可以拆分为 $\\lbrace 2,4,3 \\rbrace,\\lbrace 1,5,2,1 \\rbrace$ 两个山峰，且山峰高度严格递增。而序列 $\\lbrace 2,4,3,5,2,1 \\rbrace$ 不是山峦，因为其无法拆分成至少两个连续的子序列，使得每个子序列都是山峰。\n\n现在给定一个长度为 $n$ 的序列 $a$，小 F 想知道，在 $a$ 的所有子序列中，有多少个是**山峦**。由于答案可能很大，请输出其对 $998244353$ 取余后的结果。\n\n请注意，在本题中，即使子序列的元素相同，只要子序列的元素在 $a$ 中的位置不同，仍算作不同的子序列。", "inputFormat": "共两行。\n\n第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，表示 $a$ 序列。", "outputFormat": "共一行。\n\n一个整数，表示是山峦的子序列数量对 $998244353$ 取余的结果。", "hint": "**【样例 1 解释】**\n\n由 $a_1,a_2,a_4$ 构成的子序列是山峦，由 $a_1,a_3,a_4$ 构成的子序列是山峦。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，保证：\n- $1 \\leq n \\leq 500$\n- $1 \\leq a_i \\leq 10^6$\n\n|子任务|分值|特殊性质|\n|:-----:|:-----:|:-----:|\n|$1$|$10$|$n \\leq 18$|\n|$2$|$15$|$n \\leq 80$|\n|$3$|$15$|$A$|\n|$4$|$20$|$B$|\n|$5$|$40$|无|\n\n特殊性质 $A$：序列 $a$ 是山峰。\n\n特殊性质 $B$：序列 $a$ 中的元素互不相同。", "locale": "zh-CN"}}}
{"pid": "P11080", "type": "P", "difficulty": 4, "samples": [["7 10\n10 5 5 10 4 2 4", "5\n4 1 7\n7 2 4\n10 1 4\n5 2 3\n2 6 6"], ["5 2\n1 2 1 2 1", "-1"], ["6 5\n1 1 4 5 1 4", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 拍照 (Day 1)", "background": "翻译自 [ROI 2019 D1T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n参加奥林匹克竞赛的学生来自 $n$ 个地区，每个地区的代表团由 $m$ 名学生组成。每个代表团的学生穿着有自己地区特色的衣服，第 $i$ 个代表团穿的衣服颜色编号为 $i$。\n\n摄影师决定给所有参赛者拍一张照片。为了组织拍摄照片，摄影师计划按以下方式进行操作：\n\n舞台上有一排学生站立的位置，他们沿着舞台从 $1$ 到 $m$ 进行编号。摄影师计划轮流找一些代表团的领队，要求该代表团的几名学生上台。摄影师指定 $L$ 和 $R$ 的值，选中的代表团的学生上台并站在从第 $L$ 个到第 $R$ 个（包括 $L$ 和 $R$）的所有位置上。如果这个位置上已经站了一名学生，则将这名学生请下台，让新的学生站上来。每个代表团的领队只能被摄影师找一次。", "description": "为了在照片上的色彩更加和谐，摄影师希望照片上应该有 $m$ 名学生，而且穿着的衣服颜色必须按照给定的顺序排列。现在他想知道如何才能得到所需的照片。\n\n编写一个程序，根据给定的颜色顺序，确定摄影师要找的代表团编号以及他们应该占据的位置的顺序，以制作期望中的照片。如果不可能，输出 `-1`。", "inputFormat": "第一行包含两个整数 $m$ 和 $n$。\n\n第二行包含 $m$ 个整数 $a_1,a_2,\\dots,a_m$（$1\\le a_i\\le n$），表示摄影师希望照片上的学生衣服颜色的顺序。", "outputFormat": "输出的第一行应包含一个整数 $k$。如果无法拍出期望的照片，则此数字应为 $-1$。否则，它应该是摄影师需要找的代表团的数量，以便拍出期望的照片。\n\n当 $k\\ne-1$ 时，接下来的 $k$ 行应按照它们应该进行的顺序输出摄影师的请求。第 $i$ 个请求由三个整数 $c_i,L_i,R_i$ 表示，其中 $c_i$ 是代表团的编号，$L_i$ 和 $R_i$ 分别是代表团 $c_i$ 的学生应该占据的舞台上第一个和最后一个位置的编号。所有 $c_i$ 必须不同。\n\n如果有多个解决方案，可以输出其中任意一个。", "hint": "样例 $1$ 解释：\n\n如果按照输出中的顺序让代表团的学生上台，那么每让一个代表团的学生上台后，舞台上的学生应该是这样排列的：\n\n1. $4\\ 4\\ 4\\ 4\\ 4\\ 4\\ 4$；\n2. $4\\ 7\\ 7\\ 7\\ 4\\ 4\\ 4$；\n3. $10\\ 10\\ 10\\ 10\\ 4\\ 4\\ 4$；\n4. $10\\ 5\\ 5\\ 10\\ 4\\ 4\\ 4$；\n5. $10\\ 5\\ 5\\ 10\\ 4\\ 2\\ 4$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ | $100$ |\n| $2$ | $15$ | $10^4$ | $10^4$ |\n| $3$ | $5$ | $3\\times10^5$ | $2$ |\n| $4$ | $5$ | $3\\times10^5$ | $3$ |\n| $5$ | $20$ | $3\\times10^5$ | $10$ |\n| $6$ | $40$ | $3\\times10^5$ | $3\\times10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 拍照 (Day 1)", "background": "翻译自 [ROI 2019 D1T1](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n参加奥林匹克竞赛的学生来自 $n$ 个地区，每个地区的代表团由 $m$ 名学生组成。每个代表团的学生穿着有自己地区特色的衣服，第 $i$ 个代表团穿的衣服颜色编号为 $i$。\n\n摄影师决定给所有参赛者拍一张照片。为了组织拍摄照片，摄影师计划按以下方式进行操作：\n\n舞台上有一排学生站立的位置，他们沿着舞台从 $1$ 到 $m$ 进行编号。摄影师计划轮流找一些代表团的领队，要求该代表团的几名学生上台。摄影师指定 $L$ 和 $R$ 的值，选中的代表团的学生上台并站在从第 $L$ 个到第 $R$ 个（包括 $L$ 和 $R$）的所有位置上。如果这个位置上已经站了一名学生，则将这名学生请下台，让新的学生站上来。每个代表团的领队只能被摄影师找一次。", "description": "为了在照片上的色彩更加和谐，摄影师希望照片上应该有 $m$ 名学生，而且穿着的衣服颜色必须按照给定的顺序排列。现在他想知道如何才能得到所需的照片。\n\n编写一个程序，根据给定的颜色顺序，确定摄影师要找的代表团编号以及他们应该占据的位置的顺序，以制作期望中的照片。如果不可能，输出 `-1`。", "inputFormat": "第一行包含两个整数 $m$ 和 $n$。\n\n第二行包含 $m$ 个整数 $a_1,a_2,\\dots,a_m$（$1\\le a_i\\le n$），表示摄影师希望照片上的学生衣服颜色的顺序。", "outputFormat": "输出的第一行应包含一个整数 $k$。如果无法拍出期望的照片，则此数字应为 $-1$。否则，它应该是摄影师需要找的代表团的数量，以便拍出期望的照片。\n\n当 $k\\ne-1$ 时，接下来的 $k$ 行应按照它们应该进行的顺序输出摄影师的请求。第 $i$ 个请求由三个整数 $c_i,L_i,R_i$ 表示，其中 $c_i$ 是代表团的编号，$L_i$ 和 $R_i$ 分别是代表团 $c_i$ 的学生应该占据的舞台上第一个和最后一个位置的编号。所有 $c_i$ 必须不同。\n\n如果有多个解决方案，可以输出其中任意一个。", "hint": "样例 $1$ 解释：\n\n如果按照输出中的顺序让代表团的学生上台，那么每让一个代表团的学生上台后，舞台上的学生应该是这样排列的：\n\n1. $4\\ 4\\ 4\\ 4\\ 4\\ 4\\ 4$；\n2. $4\\ 7\\ 7\\ 7\\ 4\\ 4\\ 4$；\n3. $10\\ 10\\ 10\\ 10\\ 4\\ 4\\ 4$；\n4. $10\\ 5\\ 5\\ 10\\ 4\\ 4\\ 4$；\n5. $10\\ 5\\ 5\\ 10\\ 4\\ 2\\ 4$。\n\n| 子任务 | 分值 | $m\\le$ | $n\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ | $100$ |\n| $2$ | $15$ | $10^4$ | $10^4$ |\n| $3$ | $5$ | $3\\times10^5$ | $2$ |\n| $4$ | $5$ | $3\\times10^5$ | $3$ |\n| $5$ | $20$ | $3\\times10^5$ | $10$ |\n| $6$ | $40$ | $3\\times10^5$ | $3\\times10^5$ |", "locale": "zh-CN"}}}
{"pid": "P11081", "type": "P", "difficulty": 6, "samples": [["4 3 9\n3 2 1 3 3 1\n3 2 1 3 3 1\n2 1\n2 3\n1 1\n3 2 1 3 3 3\n3 2 1 3 3 3\n2 2\n3 2 1 3 3 6", "3\n-1\n5\n-1\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2019] 自动驾驶 (Day 1)", "background": "翻译自 [ROI 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n今天，需要在因诺波利斯的主广场上，展示最新试验的自动驾驶出租车的功能。广场是一个长 $n$ 米、宽 $m$ 米的矩形区域，被划分成 $n\\times m$ 个单位方块。矩形的行从 $1$ 到 $n$ 编号，列从 $1$ 到 $m$ 编号。因此，每个方块可以由两个正整数 $r$ 和 $c$ 表示，分别代表所在行和列的编号。自动驾驶出租车可以在相邻的方块之间移动，每一步可以从当前方块移动到与之相邻的四个方块之一。\n\n今年冬天下了很多雪，所以在展示自动驾驶出租车功能的过程中会用自动除雪机清理广场上的雪。由于自动驾驶交通系统正在测试阶段，因此广场上同一时间只能同时存在一辆自动驾驶交通工具（自动除雪机或自动驾驶出租车）。\n\n由于整个展示期间一直在下雪，自动驾驶出租车的工程师决定借机发挥，展示出租车克服雪堆的能力。", "description": "每个时刻广场上每个单位方块的雪深可以由一个非负整数表示，自动驾驶出租车的最大可通过雪深也由一个非负整数表示。在移动时，出租车只能停留在雪深不超过最大可通过雪深的方块上。每次展示自动驾驶出租车时，工程师可以设置出租车的最大可通过雪深。\n\n初始状态下，广场上所有方块的雪深为零。每个小时开始时，每个方块的雪深增加一。随后，自动驾驶交通系统可以执行以下三个操作之一，每个操作需要一小时：\n1) 沿着某一行启动除雪机，然后该行的所有方块的雪深变为零；\n2) 沿着某一列启动除雪机，然后该列的所有方块的雪深变为零；\n3) 展示自动驾驶出租车的功能：设置出租车的最大可通过雪深，选择起始和目标方格，并让出租车从起始方块到达目标方块。  \n   只有当存在一个以起始方块开始、以目标方块结束的单位方块序列，其中任意相邻的两个方块有共同的边界，并且序列中每个方块的雪深都不超过出租车的最大可通过雪深时，才可以从起始方块到达目标方块。如果设置的最大可通过雪深允许完成旅行，则出租车应选择步数最少的路径。\n\n每次展示自动驾驶出租车时，需要确定是否可以顺利完成这次的展示（是否有从起始方块到目标方块的路径），如果可以，则需要知道完成此次旅行所需的最少步数。", "inputFormat": "第一行包含三个整数 $n,m,q$，分别表示区域的大小和无人驾驶出租车的操作数。\n\n接下来的 $q$ 行，每行输入一种操作，其中第 $i$ 行有以下三种操作类型之一：\n- `1 ri`：在第 $r_i$ 行启动除雪机。\n- `2 ci`：在第 $c_i$ 列启动除雪机。\n- `3 ri1 ci1 ri2 ci2 ki`：设置出租车的最大可通过雪深为 $k_i$，并尝试从起始方格 $(r_{i1}, c_{i1})$ 开始行驶到结束方格 $(r_{i2}, c_{i2})$。\n\n保证输入数据中至少存在一个类型为 $3$ 的操作。", "outputFormat": "对于每个类型为 $3$ 的操作，需要输出一行一个整数。如果从起始方格到结束方格的行程是可行的，则输出需要实现该行程的最小步数。如果行程不可行，则输出 `-1`。", "hint": "### 样例解释：\n\n图中显示了每次操作前广场上的雪层深度以及每次成功尝试从一个方块到另一个方块的出租车最佳路线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tk6qhip.png)\n\n### 数据范围：\n\n| 子任务 | $n,m\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $50$ | $4000$ |  |\n| $2$ | $10^4$ | $10^4$ |  |\n| $3$ | $10^6$ | $10^4$ |  |\n| $4$ | $10^5$ | $10^5$ |  |\n| $5$ | $10^6$ | $3\\times10^5$ | 输入中没有操作 $2$ |\n| $6$ | $10^6$ | $3\\times10^5$ | 操作 $3$ 中的 $k_i$ 均相同 |\n| $7$ | $10^6$ | $3\\times10^5$ |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2019] 自动驾驶 (Day 1)", "background": "翻译自 [ROI 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-roi-2019-day1.pdf)。\n\n今天，需要在因诺波利斯的主广场上，展示最新试验的自动驾驶出租车的功能。广场是一个长 $n$ 米、宽 $m$ 米的矩形区域，被划分成 $n\\times m$ 个单位方块。矩形的行从 $1$ 到 $n$ 编号，列从 $1$ 到 $m$ 编号。因此，每个方块可以由两个正整数 $r$ 和 $c$ 表示，分别代表所在行和列的编号。自动驾驶出租车可以在相邻的方块之间移动，每一步可以从当前方块移动到与之相邻的四个方块之一。\n\n今年冬天下了很多雪，所以在展示自动驾驶出租车功能的过程中会用自动除雪机清理广场上的雪。由于自动驾驶交通系统正在测试阶段，因此广场上同一时间只能同时存在一辆自动驾驶交通工具（自动除雪机或自动驾驶出租车）。\n\n由于整个展示期间一直在下雪，自动驾驶出租车的工程师决定借机发挥，展示出租车克服雪堆的能力。", "description": "每个时刻广场上每个单位方块的雪深可以由一个非负整数表示，自动驾驶出租车的最大可通过雪深也由一个非负整数表示。在移动时，出租车只能停留在雪深不超过最大可通过雪深的方块上。每次展示自动驾驶出租车时，工程师可以设置出租车的最大可通过雪深。\n\n初始状态下，广场上所有方块的雪深为零。每个小时开始时，每个方块的雪深增加一。随后，自动驾驶交通系统可以执行以下三个操作之一，每个操作需要一小时：\n1) 沿着某一行启动除雪机，然后该行的所有方块的雪深变为零；\n2) 沿着某一列启动除雪机，然后该列的所有方块的雪深变为零；\n3) 展示自动驾驶出租车的功能：设置出租车的最大可通过雪深，选择起始和目标方格，并让出租车从起始方块到达目标方块。  \n   只有当存在一个以起始方块开始、以目标方块结束的单位方块序列，其中任意相邻的两个方块有共同的边界，并且序列中每个方块的雪深都不超过出租车的最大可通过雪深时，才可以从起始方块到达目标方块。如果设置的最大可通过雪深允许完成旅行，则出租车应选择步数最少的路径。\n\n每次展示自动驾驶出租车时，需要确定是否可以顺利完成这次的展示（是否有从起始方块到目标方块的路径），如果可以，则需要知道完成此次旅行所需的最少步数。", "inputFormat": "第一行包含三个整数 $n,m,q$，分别表示区域的大小和无人驾驶出租车的操作数。\n\n接下来的 $q$ 行，每行输入一种操作，其中第 $i$ 行有以下三种操作类型之一：\n- `1 ri`：在第 $r_i$ 行启动除雪机。\n- `2 ci`：在第 $c_i$ 列启动除雪机。\n- `3 ri1 ci1 ri2 ci2 ki`：设置出租车的最大可通过雪深为 $k_i$，并尝试从起始方格 $(r_{i1}, c_{i1})$ 开始行驶到结束方格 $(r_{i2}, c_{i2})$。\n\n保证输入数据中至少存在一个类型为 $3$ 的操作。", "outputFormat": "对于每个类型为 $3$ 的操作，需要输出一行一个整数。如果从起始方格到结束方格的行程是可行的，则输出需要实现该行程的最小步数。如果行程不可行，则输出 `-1`。", "hint": "### 样例解释：\n\n图中显示了每次操作前广场上的雪层深度以及每次成功尝试从一个方块到另一个方块的出租车最佳路线。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tk6qhip.png)\n\n### 数据范围：\n\n| 子任务 | $n,m\\le$ | $q\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $50$ | $4000$ |  |\n| $2$ | $10^4$ | $10^4$ |  |\n| $3$ | $10^6$ | $10^4$ |  |\n| $4$ | $10^5$ | $10^5$ |  |\n| $5$ | $10^6$ | $3\\times10^5$ | 输入中没有操作 $2$ |\n| $6$ | $10^6$ | $3\\times10^5$ | 操作 $3$ 中的 $k_i$ 均相同 |\n| $7$ | $10^6$ | $3\\times10^5$ |  |", "locale": "zh-CN"}}}
