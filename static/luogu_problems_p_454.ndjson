{"pid": "P10207", "type": "P", "difficulty": 6, "samples": [["3 100\n30 80 30\n3\n0 100 403\n0 100 300\n0 100 262", "Yes\nYes\nNo"], ["3 100\n30 80 30\n3\n0 0 403\n0 0 300\n0 0 262", "Yes\nNo\nNo"], ["6 100\n0 50 100 0 50 100\n4\n20 70 600\n70 20 600\n10 40 600\n40 10 600", "No\nYes\nNo\nYes"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 马拉松比赛 2 / Marathon Race 2", "background": "", "description": "JOI 大道是一条东西向的长度为 $L$ 米的道路，地点 $l$ 位于从道路的西端走 $l\\ (0 \\leq l \\leq L)$ 米的地方。\n\n今年 JOI 大道上第一次举办了马拉松大会。这个马拉松大会的规则和一般的不同，是按照以下的方式进行的：\n\n- 道路上放了 $N$ 个球，第 $i\\ (1 \\leq i \\leq N)$ 个球放在地点 $X_{i}$。有些地方可能有多个球放在一起。\n- 参加者从规定的起点出发，拿到所有 $N$ 个球后，如果在规定的时间内到达规定的终点，就算是完赛。但是，如果把拿到的球放在地上就会被取消资格。\n\n这个大会的起点，终点和时间限制还没有公布，但是已经公布了 $Q$ 个可能的方案。第 $j\\ (1 \\leq j \\leq Q)$ 个方案的起点是地点 $S_{j}$，终点是地点 $G_{j}$，时间限制是 $T_{j}$ 秒。\n\n理恵是马拉松大会的其中一名运动员。她拿起一个球要花 $1$ 秒，拿着 $x$ 个球在道路上跑 $1$ 米要花 $x+1$ 秒。\n\n给出 JOI 大道，球，方案的信息。编写一个程序，对于每个方案判断理恵能不能完赛。", "inputFormat": "第一行包含两个整数 $N,L$。\n\n第二行包含用空格分隔的 $N$ 个整数 $X_1, X_2, \\ldots ,X_N$。\n\n第三行包含一个整数 $Q$。\n\n接下来 $Q$ 行，每行包含三个整数 $S_j, G_j, T_j$，表示第 $j$ 个方案。", "outputFormat": "输出 $Q$ 行。第 $j\\ (1 \\leq j \\leq Q)$ 行，如果第 $j$ 个方案理恵能完赛输出 Yes，否则输出 No。", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq L \\leq 5\\times 10^5$\n- $0 \\leq X_{i} \\leq L\\ (1 \\leq i \\leq N)$\n- $1 \\leq Q \\leq 5\\times 10^5$\n- $0 \\leq S_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $0 \\leq G_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $1 \\leq T_{j} \\leq 5\\times 10^5\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 7, Q \\leq 10, S_{j}=0, G_{j}=0\\ (1 \\leq j \\leq Q)$|\t7\n|2|\t$N \\leq 7, Q \\leq 10$|\t7\n|3|\t$N \\leq 14, Q \\leq 10$|\t10\n|4|\t$N \\leq 100, Q \\leq 10$|\t28\n|5|\t$N \\leq 2000, Q \\leq 10$|\t10\n|6|\t$N \\leq 2000$|\t19\n|7|\t无附加限制\t|19", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 马拉松比赛 2 / Marathon Race 2", "background": "", "description": "JOI 大道是一条东西向的长度为 $L$ 米的道路，地点 $l$ 位于从道路的西端走 $l\\ (0 \\leq l \\leq L)$ 米的地方。\n\n今年 JOI 大道上第一次举办了马拉松大会。这个马拉松大会的规则和一般的不同，是按照以下的方式进行的：\n\n- 道路上放了 $N$ 个球，第 $i\\ (1 \\leq i \\leq N)$ 个球放在地点 $X_{i}$。有些地方可能有多个球放在一起。\n- 参加者从规定的起点出发，拿到所有 $N$ 个球后，如果在规定的时间内到达规定的终点，就算是完赛。但是，如果把拿到的球放在地上就会被取消资格。\n\n这个大会的起点，终点和时间限制还没有公布，但是已经公布了 $Q$ 个可能的方案。第 $j\\ (1 \\leq j \\leq Q)$ 个方案的起点是地点 $S_{j}$，终点是地点 $G_{j}$，时间限制是 $T_{j}$ 秒。\n\n理恵是马拉松大会的其中一名运动员。她拿起一个球要花 $1$ 秒，拿着 $x$ 个球在道路上跑 $1$ 米要花 $x+1$ 秒。\n\n给出 JOI 大道，球，方案的信息。编写一个程序，对于每个方案判断理恵能不能完赛。", "inputFormat": "第一行包含两个整数 $N,L$。\n\n第二行包含用空格分隔的 $N$ 个整数 $X_1, X_2, \\ldots ,X_N$。\n\n第三行包含一个整数 $Q$。\n\n接下来 $Q$ 行，每行包含三个整数 $S_j, G_j, T_j$，表示第 $j$ 个方案。", "outputFormat": "输出 $Q$ 行。第 $j\\ (1 \\leq j \\leq Q)$ 行，如果第 $j$ 个方案理恵能完赛输出 Yes，否则输出 No。", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq L \\leq 5\\times 10^5$\n- $0 \\leq X_{i} \\leq L\\ (1 \\leq i \\leq N)$\n- $1 \\leq Q \\leq 5\\times 10^5$\n- $0 \\leq S_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $0 \\leq G_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $1 \\leq T_{j} \\leq 5\\times 10^5\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 7, Q \\leq 10, S_{j}=0, G_{j}=0\\ (1 \\leq j \\leq Q)$|\t7\n|2|\t$N \\leq 7, Q \\leq 10$|\t7\n|3|\t$N \\leq 14, Q \\leq 10$|\t10\n|4|\t$N \\leq 100, Q \\leq 10$|\t28\n|5|\t$N \\leq 2000, Q \\leq 10$|\t10\n|6|\t$N \\leq 2000$|\t19\n|7|\t无附加限制\t|19", "locale": "zh-CN"}}}
{"pid": "P10208", "type": "P", "difficulty": 6, "samples": [["4\n3 8 5 7\n2 6 1 4\n3\n3 4\n1 3\n1 4", "Yes\nNo\nYes"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 礼物交换 / Gift Exchange", "background": "", "description": "JOI 学园有 $N$ 名学生，每个学生都有一个从 $1$ 到 $N$ 的编号。\n\nJOI 学园计划近期举办一个礼物交换会。每个学生都要准备一份礼物带到会场，学生 $i\\ (1 \\leq i \\leq N)$ 带来的礼物的价值是 $A_{i}$ 。学生们都不喜欢收到比自己带来的礼物价值低很多的礼物，具体来说，学生 $i$ 如果收到价值低于 $B_{i}$ 的礼物，就会感到不满。保证 $B_{i}<A_{i}$。\n\n不过，并不是所有 $N$ 名学生都会真的参加礼物交换会。JOI 学园的校长 K 正在考虑 $Q$ 种可能参加礼物交换会的学生组合，第 $j\\ (1 \\leq j \\leq Q)$ 种组合由 $R_{j}-L_{j}+1$ 名学生 $L_{j}, L_{j}+1, \\ldots, R_{j}$ 组成。\n\n对于一个由 $2$ 人以上的学生组成的组合，如果他们可以在组内互换礼物，而不会有人收到自己带来的礼物或者不满意的礼物，那么这个组合就是可行的。准确地说，由 $m$ 名 $(m \\geq 2)$ 学生 $p_{1}, p_{2}, \\ldots, p_{m}$ 组成的组合是可行的，当且仅当存在一个由 $p_{1}, p_{2}, \\ldots, p_{m}$ 重新排列得到的数列 $q_{1}, q_{2}, \\ldots, q_{m}$，这里 $q_{k}\\ (1 \\leq k \\leq m)$ 表示给学生 $p_{k}$ 送礼物的学生的编号，满足以下的条件：\n\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$p_{k} \\neq q_{k}$。\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$A_{q_{k}} \\geq B_{p_{k}}$。\n\n校长 K 想要让礼物交换会成功的，所以他想要知道这 $Q$ 个组合中，哪些是可行的。\n\n给定学生的信息和组合的信息，对于每个组合，判断它是否是可行的，并编写一个程序来输出结果。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数 $A_1,A_2,\\ldots ,A_N$。\n\n第三行包含 $N$ 个用空格分隔的整数 $B_1,B_2,\\ldots ,B_N$。\n\n第四行包含一个整数 $Q$。\n\n接下来的 $Q$ 行，每行包含两个整数 $L_i,R_i$。", "outputFormat": "输出 $Q$ 行，第 $j\\ (1 \\leq j \\leq Q)$ 行如果第 $j$ 个组合是可行的输出 Yes，否则输出 No。", "hint": "**样例解释**\n\n第一个组合是由 2 名学生 3,4 组成的。如果学生 3 收到学生 4 的礼物，学生 4 收到学生 3 的礼物，那么由于 $A_{3} \\geq B_{4} 且 A_{4} \\geq B_{3}$ ，所以两个学生都不会不满。因此，这个组合是可行的，所以在第一行输出 Yes。\n\n第二个组合是由 3 名学生 1,2,3 组成的。由于 $A_{1}<B_{2}$ 且 $A_{3}<B_{2}$ ，所以学生 2 不管收到学生 1 还是学生 3 的礼物，都会感到不满。因此，这个组合不是可行的，所以在第二行输出 No。\n\n第三个组合是由 4 名学生 1,2,3,4 组成的。例如，如果学生 1 收到学生 2 的礼物，学生 2 收到学生 4 的礼物，学生 3 收到学生 1 的礼物，学生 4 收到学生 3 的礼物，那么没有人会不满。因此，这个组合是可行的，所以在第三行输出 Yes。\n\n这个样例满足子任务 1,2,4,7,8 的限制。\n\n**数据范围**\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq B_{i}<A_{i} \\leq 2N\\ (1 \\leq i \\leq N)$\n- $A_{1}, B_{1}, A_{2}, B_{2}, \\ldots, A_{N}, B_{N}$ 各不相同\n- $1 \\leq Q \\leq 2\\times 10^5$\n- $1 \\leq L_{j}<R_{j} \\leq N\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 10, Q \\leq 10$|\t4\n|2|\t$N \\leq 18, Q \\leq 10$|\t5\n|3|\t$N \\leq 10^5, A_{1} \\geq 2 N-2, B_{1}=1, Q=1, L_{1}=1, R_{1}=N$|\t10\n|4|\t$N \\leq 10^5, Q \\leq 10$|\t31\n|5|\t$N \\leq 10^5, A_{i}<A_{i+1}, B_{i}<B_{i+1}\\ (1 \\leq i \\leq N-1)$|\t8\n|6|\t$N \\leq 10^5, A_{i}<A_{i+1}\\ (1 \\leq i \\leq N-1)$|\t12\n|7|\t$N \\leq 10^5$|\t18\n|8|\t无附加限制\t|12", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 礼物交换 / Gift Exchange", "background": "", "description": "JOI 学园有 $N$ 名学生，每个学生都有一个从 $1$ 到 $N$ 的编号。\n\nJOI 学园计划近期举办一个礼物交换会。每个学生都要准备一份礼物带到会场，学生 $i\\ (1 \\leq i \\leq N)$ 带来的礼物的价值是 $A_{i}$ 。学生们都不喜欢收到比自己带来的礼物价值低很多的礼物，具体来说，学生 $i$ 如果收到价值低于 $B_{i}$ 的礼物，就会感到不满。保证 $B_{i}<A_{i}$。\n\n不过，并不是所有 $N$ 名学生都会真的参加礼物交换会。JOI 学园的校长 K 正在考虑 $Q$ 种可能参加礼物交换会的学生组合，第 $j\\ (1 \\leq j \\leq Q)$ 种组合由 $R_{j}-L_{j}+1$ 名学生 $L_{j}, L_{j}+1, \\ldots, R_{j}$ 组成。\n\n对于一个由 $2$ 人以上的学生组成的组合，如果他们可以在组内互换礼物，而不会有人收到自己带来的礼物或者不满意的礼物，那么这个组合就是可行的。准确地说，由 $m$ 名 $(m \\geq 2)$ 学生 $p_{1}, p_{2}, \\ldots, p_{m}$ 组成的组合是可行的，当且仅当存在一个由 $p_{1}, p_{2}, \\ldots, p_{m}$ 重新排列得到的数列 $q_{1}, q_{2}, \\ldots, q_{m}$，这里 $q_{k}\\ (1 \\leq k \\leq m)$ 表示给学生 $p_{k}$ 送礼物的学生的编号，满足以下的条件：\n\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$p_{k} \\neq q_{k}$。\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$A_{q_{k}} \\geq B_{p_{k}}$。\n\n校长 K 想要让礼物交换会成功的，所以他想要知道这 $Q$ 个组合中，哪些是可行的。\n\n给定学生的信息和组合的信息，对于每个组合，判断它是否是可行的，并编写一个程序来输出结果。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数 $A_1,A_2,\\ldots ,A_N$。\n\n第三行包含 $N$ 个用空格分隔的整数 $B_1,B_2,\\ldots ,B_N$。\n\n第四行包含一个整数 $Q$。\n\n接下来的 $Q$ 行，每行包含两个整数 $L_i,R_i$。", "outputFormat": "输出 $Q$ 行，第 $j\\ (1 \\leq j \\leq Q)$ 行如果第 $j$ 个组合是可行的输出 Yes，否则输出 No。", "hint": "**样例解释**\n\n第一个组合是由 2 名学生 3,4 组成的。如果学生 3 收到学生 4 的礼物，学生 4 收到学生 3 的礼物，那么由于 $A_{3} \\geq B_{4} 且 A_{4} \\geq B_{3}$ ，所以两个学生都不会不满。因此，这个组合是可行的，所以在第一行输出 Yes。\n\n第二个组合是由 3 名学生 1,2,3 组成的。由于 $A_{1}<B_{2}$ 且 $A_{3}<B_{2}$ ，所以学生 2 不管收到学生 1 还是学生 3 的礼物，都会感到不满。因此，这个组合不是可行的，所以在第二行输出 No。\n\n第三个组合是由 4 名学生 1,2,3,4 组成的。例如，如果学生 1 收到学生 2 的礼物，学生 2 收到学生 4 的礼物，学生 3 收到学生 1 的礼物，学生 4 收到学生 3 的礼物，那么没有人会不满。因此，这个组合是可行的，所以在第三行输出 Yes。\n\n这个样例满足子任务 1,2,4,7,8 的限制。\n\n**数据范围**\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq B_{i}<A_{i} \\leq 2N\\ (1 \\leq i \\leq N)$\n- $A_{1}, B_{1}, A_{2}, B_{2}, \\ldots, A_{N}, B_{N}$ 各不相同\n- $1 \\leq Q \\leq 2\\times 10^5$\n- $1 \\leq L_{j}<R_{j} \\leq N\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 10, Q \\leq 10$|\t4\n|2|\t$N \\leq 18, Q \\leq 10$|\t5\n|3|\t$N \\leq 10^5, A_{1} \\geq 2 N-2, B_{1}=1, Q=1, L_{1}=1, R_{1}=N$|\t10\n|4|\t$N \\leq 10^5, Q \\leq 10$|\t31\n|5|\t$N \\leq 10^5, A_{i}<A_{i+1}, B_{i}<B_{i+1}\\ (1 \\leq i \\leq N-1)$|\t8\n|6|\t$N \\leq 10^5, A_{i}<A_{i+1}\\ (1 \\leq i \\leq N-1)$|\t12\n|7|\t$N \\leq 10^5$|\t18\n|8|\t无附加限制\t|12", "locale": "zh-CN"}}}
{"pid": "P10209", "type": "P", "difficulty": 7, "samples": [["4 3 4\n00\n00\n00\n00\n100\n001\n000\n1 1 1 1\n2\n1 1\n3 3\n2\n3 1\n1 2\n2\n2 3\n3 3\n2\n4 2\n3 2", "1\n3\n0\n-1"], ["4 4 4\n100\n110\n011\n010\n0010\n1001\n0101\n1 1 1 1\n2\n1 2\n3 1\n2\n1 4\n4 1\n2\n3 2\n1 2\n2\n4 3\n1 1", "1\n3\n2\n2"], ["7 3 3\n10\n00\n00\n10\n00\n01\n00\n110\n101\n011\n001\n110\n100\n1 1 1 1 1 1 1\n3\n7 2\n3 1\n3 2\n3\n3 1\n6 3\n2 3\n7\n2 2\n1 3\n7 3\n5 2\n1 2\n7 2\n3 1", "3\n2\n4"], ["4 3 3\n00\n00\n10\n00\n110\n011\n001\n1 2 2 2\n2\n1 1\n3 1\n2\n4 3\n2 1\n2\n4 1\n1 3", "1\n2\n5"], ["7 3 2\n01\n00\n00\n00\n00\n10\n01\n100\n110\n011\n001\n101\n001\n1 1 2 1 1 2 2\n3\n7 2\n1 3\n5 1\n5\n1 1\n2 2\n3 1\n2 3\n4 2", "4\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "倍增", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 路网服务 2 / Road Service 2", "background": "", "description": "JOI 市有一个由 $H$ 条东西向的无限长道路和 $W$ 条南北向的道路组成的网格状道路网。从北边数第 $i\\ (1 \\leq i \\leq H)$ 条的东西向的道路和从西边数第 $j\\ (1 \\leq j \\leq W)$ 条的南北向的道路相交的地方称作交叉点 $(i, j)$。\n\n现在，由于道路年久失修，一部分道路被封锁了。具体的封锁情况如下：\n\n- 如果 $A_{i, j}=0\\ (1 \\leq i \\leq H,1 \\leq j \\leq W-1)$，则从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分就是封锁的；如果 $A_{i, j}=1$ 则是可以通行的。\n- 如果 $B_{i, j}=0\\ (1 \\leq j \\leq W,1 \\leq i \\leq H-1)$ 从西边数第 $j$ 条的南北向的道路的，交叉点 $(i, j)$ 和交叉点 $(i+1, j)$ 之间的部分就是封锁的；如果 $B_{i, j}=1$ 就是可以通行的。\n- 道路的其他部分，即 $H \\times W$ 个交叉点外面的部分都是封锁的。\n\nJOI 市的市长 K 理事长决定制定一个道路维修计划。维修计划由大于等于 $0$ 次维修构成。一次维修时选择一个满足的整数 $i\\ (1 \\leq i \\leq H)$，然后进行以下的操作：\n\n\n对于**所有**满足 $1 \\leq j \\leq W-1$ 的整数 $j$，如果从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分是封锁的话，将其变成可以通行的。这个过程总共需要 $C_{i}$ 天。其中，$C_{i}$ 为 $1$ 或 $2$。\n\n维修计划里包含的多次维修不能同时进行。因此，维修计划的执行所需要的天数是维修计划里包含的所有维修所需要的天数的总和。\n\n为了让市里的重要设施之间能够互相通行，K 理事长向你提出了 $Q$ 个问题。第 $k\\ (1 \\leq k \\leq Q)$ 个问题是这样的：\n\n是否存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间，只通过可以通行的道路互相通行。如果存在的话，执行这样的维修计划最少需要多少天。\n\n给定道路网的封锁情况，各条道路的维修所需要的天数，K 理事长的问题的内容，编写一个程序来回答 K 理事长的所有问题。", "inputFormat": "第一行包含三个整数 $H,W,Q$。\n\n接下来 $H$ 行，每行包含一个长度为 $W-1$ 的字符串，表示 $A_{i,1},A_{i,2},\\ldots ,A_{i,W-1}$。\n\n接下来 $H-1$ 行，每行包含一个长度为 $W$ 的字符串，表示 $B_{i,1},B_{i,2},\\ldots ,B_{i,W}$。\n\n接下来一行包含 $H$ 个用空格分隔的整数 $C_1,C_2,\\ldots ,C_H$。\n\n接下来有 $Q$ 个询问，每个询问用以下形式给出：\n\n第一行包含一个整数 $T_k$。  \n接下来 $T_k$ 行每行包含两个整数 $X_{k,i},Y_{k,i}$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行 $(1 \\leq k \\leq Q)$ 里，如果存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间互相通行，就输出执行这样的维修计划最少需要多少天。否则输出 $-1$。", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq H$\n- $2 \\leq W$\n- $H \\times W \\leq 10^6$\n- $1 \\leq Q \\leq 10^5$\n- $A_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$\n- $B_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H-1,1 \\leq j \\leq W)$\n- $C_{i}$ 为 $1$ 或 $2\\ (1 \\leq i \\leq H)$\n- $2 \\leq T_{k}\\ (1 \\leq k \\leq Q)$\n- $T_{1}+T_{2}+\\cdots+T_{Q} \\leq 2\\times 10^5$\n- $1 \\leq X_{k, l} \\leq H\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $1 \\leq Y_{k, l} \\leq W\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots,(X_{k, T_{k}}, Y_{k, T_{k}})$ 各不相同 $(1 \\leq k \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n| :-: | :-: | :-:|\n|1|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q), A_{i, j}=0\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$|\t$10$|\n|2|$\tC_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$6$\n|3|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5$|\t$15$|\n|4|\t$C_{i}=1\\ (1 \\leq i \\leq H), T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$11$|\n|5|\t$C_{i}=1\\ (1 \\leq i \\leq H)$|\t$6$|\n|6|\t$Q \\leq 5$|\t$12$|\n|7|\t$T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$26$|\n|8|\t无附加限制\t|$14$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 路网服务 2 / Road Service 2", "background": "", "description": "JOI 市有一个由 $H$ 条东西向的无限长道路和 $W$ 条南北向的道路组成的网格状道路网。从北边数第 $i\\ (1 \\leq i \\leq H)$ 条的东西向的道路和从西边数第 $j\\ (1 \\leq j \\leq W)$ 条的南北向的道路相交的地方称作交叉点 $(i, j)$。\n\n现在，由于道路年久失修，一部分道路被封锁了。具体的封锁情况如下：\n\n- 如果 $A_{i, j}=0\\ (1 \\leq i \\leq H,1 \\leq j \\leq W-1)$，则从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分就是封锁的；如果 $A_{i, j}=1$ 则是可以通行的。\n- 如果 $B_{i, j}=0\\ (1 \\leq j \\leq W,1 \\leq i \\leq H-1)$ 从西边数第 $j$ 条的南北向的道路的，交叉点 $(i, j)$ 和交叉点 $(i+1, j)$ 之间的部分就是封锁的；如果 $B_{i, j}=1$ 就是可以通行的。\n- 道路的其他部分，即 $H \\times W$ 个交叉点外面的部分都是封锁的。\n\nJOI 市的市长 K 理事长决定制定一个道路维修计划。维修计划由大于等于 $0$ 次维修构成。一次维修时选择一个满足的整数 $i\\ (1 \\leq i \\leq H)$，然后进行以下的操作：\n\n\n对于**所有**满足 $1 \\leq j \\leq W-1$ 的整数 $j$，如果从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分是封锁的话，将其变成可以通行的。这个过程总共需要 $C_{i}$ 天。其中，$C_{i}$ 为 $1$ 或 $2$。\n\n维修计划里包含的多次维修不能同时进行。因此，维修计划的执行所需要的天数是维修计划里包含的所有维修所需要的天数的总和。\n\n为了让市里的重要设施之间能够互相通行，K 理事长向你提出了 $Q$ 个问题。第 $k\\ (1 \\leq k \\leq Q)$ 个问题是这样的：\n\n是否存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间，只通过可以通行的道路互相通行。如果存在的话，执行这样的维修计划最少需要多少天。\n\n给定道路网的封锁情况，各条道路的维修所需要的天数，K 理事长的问题的内容，编写一个程序来回答 K 理事长的所有问题。", "inputFormat": "第一行包含三个整数 $H,W,Q$。\n\n接下来 $H$ 行，每行包含一个长度为 $W-1$ 的字符串，表示 $A_{i,1},A_{i,2},\\ldots ,A_{i,W-1}$。\n\n接下来 $H-1$ 行，每行包含一个长度为 $W$ 的字符串，表示 $B_{i,1},B_{i,2},\\ldots ,B_{i,W}$。\n\n接下来一行包含 $H$ 个用空格分隔的整数 $C_1,C_2,\\ldots ,C_H$。\n\n接下来有 $Q$ 个询问，每个询问用以下形式给出：\n\n第一行包含一个整数 $T_k$。  \n接下来 $T_k$ 行每行包含两个整数 $X_{k,i},Y_{k,i}$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行 $(1 \\leq k \\leq Q)$ 里，如果存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间互相通行，就输出执行这样的维修计划最少需要多少天。否则输出 $-1$。", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq H$\n- $2 \\leq W$\n- $H \\times W \\leq 10^6$\n- $1 \\leq Q \\leq 10^5$\n- $A_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$\n- $B_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H-1,1 \\leq j \\leq W)$\n- $C_{i}$ 为 $1$ 或 $2\\ (1 \\leq i \\leq H)$\n- $2 \\leq T_{k}\\ (1 \\leq k \\leq Q)$\n- $T_{1}+T_{2}+\\cdots+T_{Q} \\leq 2\\times 10^5$\n- $1 \\leq X_{k, l} \\leq H\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $1 \\leq Y_{k, l} \\leq W\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots,(X_{k, T_{k}}, Y_{k, T_{k}})$ 各不相同 $(1 \\leq k \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n| :-: | :-: | :-:|\n|1|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q), A_{i, j}=0\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$|\t$10$|\n|2|$\tC_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$6$\n|3|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5$|\t$15$|\n|4|\t$C_{i}=1\\ (1 \\leq i \\leq H), T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$11$|\n|5|\t$C_{i}=1\\ (1 \\leq i \\leq H)$|\t$6$|\n|6|\t$Q \\leq 5$|\t$12$|\n|7|\t$T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$26$|\n|8|\t无附加限制\t|$14$|", "locale": "zh-CN"}}}
{"pid": "P10210", "type": "P", "difficulty": 6, "samples": [["4\n1 3 2 4\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "\n**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试点，$2\\leq n\\leq 5\\times 10 ^ 5$，$1\\leq h_i\\leq 10 ^ {12}$。\n\n| 子任务编号 | $n\\leq$ | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $7$ |\n| $2$ | $100$ | $10$ |\n| $3$ | $4000$ | $18$ |\n| $4$ | $10 ^ 5$ | $30$ |\n| $5$ | $5\\times 10^ 5$ | $35$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "\n**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试点，$2\\leq n\\leq 5\\times 10 ^ 5$，$1\\leq h_i\\leq 10 ^ {12}$。\n\n| 子任务编号 | $n\\leq$ | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $7$ |\n| $2$ | $100$ | $10$ |\n| $3$ | $4000$ | $18$ |\n| $4$ | $10 ^ 5$ | $30$ |\n| $5$ | $5\\times 10^ 5$ | $35$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P10211", "type": "P", "difficulty": 7, "samples": [["2 1\n1\n0 2\n", "5\n"], ["2 1\n1 \n1 2\n", "5\n"], ["5 2\n2 1 4 3\n1 3\n2 5\n", "193\n"], ["10 10\n5 2 1 3 4 7 6 8 9\n0 1\n0 2\n0 3\n0 4\n0 5\n0 6\n0 7\n0 8\n0 9\n0 10\n", "70848\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n子任务 1（6 分）：$N≤10$。\n\n子任务 2（18 分）：$N≤100$。\n\n子任务 3（9 分）：$N≤500$。\n\n子任务 4（17 分）：$N≤5000$。\n\n子任务 5（10 分）：$M=1$。\n\n子任务 6（13 分）：$M≤5$。\n\n子任务 7（7 分）：$M=N,L_i=0,R_i=i$。\n\n子任务 8（20 分）：无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n子任务 1（6 分）：$N≤10$。\n\n子任务 2（18 分）：$N≤100$。\n\n子任务 3（9 分）：$N≤500$。\n\n子任务 4（17 分）：$N≤5000$。\n\n子任务 5（10 分）：$M=1$。\n\n子任务 6（13 分）：$M≤5$。\n\n子任务 7（7 分）：$M=N,L_i=0,R_i=i$。\n\n子任务 8（20 分）：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P10212", "type": "P", "difficulty": 7, "samples": [["3\n3 1 3\n1 2\n2 3\n4 3 4\n1 2\n2 3\n2 4\n5 1 2\n1 2\n1 3\n2 4\n3 5\n", "1 2 3\n3 2 1 4\n1 5 3 4 2"], ["见题目目录下的 2.in 与 2.ans。", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "CTSC/CTS"], "title": "[CTS2024] 众生之门", "background": "[原题面存档。](https://www.luogu.com.cn/paste/pd4a89g5)", "description": "给定 $n$、一棵 $n$ 个点的无向树和树上的两个不相同的节点 $s,t$，其中每条边的长度均为 $1$。节点由 $1$ 至 $n$ 的整数编号。记 $\\mathrm{dist}(u,v)$ 表示 $u$ 和 $v$ 的距离（即简单路径经过的边数）。你需要给出一个 $1$ 到 $n$ 的排列 $p_1,p_2,\\cdots,p_n$ 满足以下两个条件：\n\n- $p_1=s$，$p_n=t$；\n- 设 $d_i=\\mathrm{dist}(p_i,p_{i+1})(1\\leq i\\leq n-1)$，那么你给出的排列需要满足以上条件的前提下，最小化 $\\oplus_{i = 1} ^ {n - 1}d_i$，其中 $\\oplus$ 表示按位异或。\n\n如果有多种满足条件的排列，输出任意一种均可。", "inputFormat": "从标准输入读入数据。\n\n本题有多组测试数据。第一行输入一个正整数 $T$ 表示测试数据组数。\n\n对于每组数据，第一行输入三个正整数 $n,s,t$，接下来 $n-1$ 行每行两个正整数 $u,v$，表示地点 $u$ 和 $v$ 有直接无向道路连接（即树上的一条边）。", "outputFormat": "输出到标准输出。\n\n对于每组数据，输出一行 $n$ 个正整数 $p_1,p_2,\\cdots,p_n$，你需要保证其为 $1$ 到 $n$ 的一个排列且 $p_1=s$，$p_n=t$，且 $\\oplus_{i = 1} ^ {n - 1} d_i$ 最小。", "hint": "**样例 1 解释**\n\n该样例共有三组测试数据。\n\n- 对于第一组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $0$，样例输出为 $1,2,3$，其中 $d_1=d_2=1$。\n- 对于第二组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $2$，样例输出为 $3,2,1,4$，其中 $d_1=d_2=1$，$d_3=2$；另一种合法输出为 $3,1,2,4$。\n- 对于第三组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $1$，样例输出为 $1,5,3,4,2$，其中 $d_1=2$，$d_2=1$，$d_3=3$，$d_4=1$。\n\n**样例 2 解释**\n\n值得注意的是，该输入数据由所有满足 $n\\leq 10$ 的，且所有不同 $s$ 和 $t$ 的相对位置的可能的树形态构成。\n\n这个样例，无疑是善良的出题人无私的馈赠。中间忘了。出题人相信，这个美妙的样例，可以给拼搏于 AC 这道题的逐梦之路上的你，提供一个有力的援助。\n\n### 数据范围\n\n设 $\\sum n$ 表示单个测试点内所有数据的 $n$ 的和。对于所有测试数据，\n\n- $T≥1$；\n- $2\\leq n\\leq 5\\times 10 ^4$，$\\sum n\\leq 5\\times 10 ^ 5$；\n- $1\\leq s,t\\leq n$，$s\\neq t$；\n- $1\\le u,v\\le n$，$u\\neq v$；\n- 输入的 $n-1$ 个 $(u,v)$ 构成一棵树。\n\n| 子任务编号 | $n$                   | $\\sum n$              | 特殊性质 | 分数 |\n|-------|-----------------------|-----------------------|------|----|\n| 1     | $\\le 8$               | $\\le 10^{3}$          | 无    | 5  |\n| 2     | $\\le 12$              | $\\le 10^{3}$          | 无    | 8  |\n| 3     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | A    | 17 |\n| 4     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | B    | 20 |\n| 5     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | C    | 17 |\n| 6     | $\\le 10^{3}$          | $\\le 10^{4}$          | D    | 10 |\n| 7     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | 无    | 23 |\n\n\n\n特殊性质 A：保证每个点度数小于等于 $2$。\n\n特殊性质 B：保证对于任意 $x$ 有 $\\mathrm{dist}(s,x)+\\mathrm{dist}(x,t)\\le \\mathrm{dist}(s,t)+2$。\n\n特殊性质 C：保证 $\\mathrm{dist}(s,t)=1$。\n\n特殊性质 D：该子任务共有五个测试点，对于每一个测试点，保证 $T=10$ 且 $n=1000$，并且每个测试数据中，$s$ 在 $1\\sim n$ 中等概率随机生成，$t$ 从 $1\\sim n$ 除去 $s$ 中等概率随机生成，树从所有 $n$ 个点的有标号树中等概率随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 众生之门", "background": "[原题面存档。](https://www.luogu.com.cn/paste/pd4a89g5)", "description": "给定 $n$、一棵 $n$ 个点的无向树和树上的两个不相同的节点 $s,t$，其中每条边的长度均为 $1$。节点由 $1$ 至 $n$ 的整数编号。记 $\\mathrm{dist}(u,v)$ 表示 $u$ 和 $v$ 的距离（即简单路径经过的边数）。你需要给出一个 $1$ 到 $n$ 的排列 $p_1,p_2,\\cdots,p_n$ 满足以下两个条件：\n\n- $p_1=s$，$p_n=t$；\n- 设 $d_i=\\mathrm{dist}(p_i,p_{i+1})(1\\leq i\\leq n-1)$，那么你给出的排列需要满足以上条件的前提下，最小化 $\\oplus_{i = 1} ^ {n - 1}d_i$，其中 $\\oplus$ 表示按位异或。\n\n如果有多种满足条件的排列，输出任意一种均可。", "inputFormat": "从标准输入读入数据。\n\n本题有多组测试数据。第一行输入一个正整数 $T$ 表示测试数据组数。\n\n对于每组数据，第一行输入三个正整数 $n,s,t$，接下来 $n-1$ 行每行两个正整数 $u,v$，表示地点 $u$ 和 $v$ 有直接无向道路连接（即树上的一条边）。", "outputFormat": "输出到标准输出。\n\n对于每组数据，输出一行 $n$ 个正整数 $p_1,p_2,\\cdots,p_n$，你需要保证其为 $1$ 到 $n$ 的一个排列且 $p_1=s$，$p_n=t$，且 $\\oplus_{i = 1} ^ {n - 1} d_i$ 最小。", "hint": "**样例 1 解释**\n\n该样例共有三组测试数据。\n\n- 对于第一组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $0$，样例输出为 $1,2,3$，其中 $d_1=d_2=1$。\n- 对于第二组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $2$，样例输出为 $3,2,1,4$，其中 $d_1=d_2=1$，$d_3=2$；另一种合法输出为 $3,1,2,4$。\n- 对于第三组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $1$，样例输出为 $1,5,3,4,2$，其中 $d_1=2$，$d_2=1$，$d_3=3$，$d_4=1$。\n\n**样例 2 解释**\n\n值得注意的是，该输入数据由所有满足 $n\\leq 10$ 的，且所有不同 $s$ 和 $t$ 的相对位置的可能的树形态构成。\n\n这个样例，无疑是善良的出题人无私的馈赠。中间忘了。出题人相信，这个美妙的样例，可以给拼搏于 AC 这道题的逐梦之路上的你，提供一个有力的援助。\n\n### 数据范围\n\n设 $\\sum n$ 表示单个测试点内所有数据的 $n$ 的和。对于所有测试数据，\n\n- $T≥1$；\n- $2\\leq n\\leq 5\\times 10 ^4$，$\\sum n\\leq 5\\times 10 ^ 5$；\n- $1\\leq s,t\\leq n$，$s\\neq t$；\n- $1\\le u,v\\le n$，$u\\neq v$；\n- 输入的 $n-1$ 个 $(u,v)$ 构成一棵树。\n\n| 子任务编号 | $n$                   | $\\sum n$              | 特殊性质 | 分数 |\n|-------|-----------------------|-----------------------|------|----|\n| 1     | $\\le 8$               | $\\le 10^{3}$          | 无    | 5  |\n| 2     | $\\le 12$              | $\\le 10^{3}$          | 无    | 8  |\n| 3     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | A    | 17 |\n| 4     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | B    | 20 |\n| 5     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | C    | 17 |\n| 6     | $\\le 10^{3}$          | $\\le 10^{4}$          | D    | 10 |\n| 7     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | 无    | 23 |\n\n\n\n特殊性质 A：保证每个点度数小于等于 $2$。\n\n特殊性质 B：保证对于任意 $x$ 有 $\\mathrm{dist}(s,x)+\\mathrm{dist}(x,t)\\le \\mathrm{dist}(s,t)+2$。\n\n特殊性质 C：保证 $\\mathrm{dist}(s,t)=1$。\n\n特殊性质 D：该子任务共有五个测试点，对于每一个测试点，保证 $T=10$ 且 $n=1000$，并且每个测试数据中，$s$ 在 $1\\sim n$ 中等概率随机生成，$t$ 从 $1\\sim n$ 除去 $s$ 中等概率随机生成，树从所有 $n$ 个点的有标号树中等概率随机生成。", "locale": "zh-CN"}}}
{"pid": "P10213", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "CTSC/CTS"], "title": "[CTS2024] 多方计算", "background": "## 滥用本题评测将被封号\n\n**特别注意**：为了能够正常评测，请删去代码开头的 `#include \"mpc.h\"` 并加入以下代码段：\n\n```cpp\n#include <array>\nstruct player{\n    bool last_message;\n    std::array<int, 4096> memory;\n};\nint precalc(int n, int m);\nbool transmit(player &player, int round, int position);\n```", "description": "**这是一道交互题。**\n\n有 $n+1$ 个人，由 $0$ 至 $n$ 编号。第 $i(0 \\le i \\le n-1)$ 个人有一个 $[0,2^m-1]$ 之间的整数 $a_i$。\n\n编号为 $n$ 的人希望知道 $a_0+a_1+\\cdots+a_{n-1}$ 的值。为此，他们可以进行如下通讯：\n\n1. 首先，选定通讯的秒数 $N$。\n2. 接下来的 $N$ 秒中的每一秒，所有 $i(0 \\le i \\le n-1)$ **同时**向 $(i+1)$ 发送一个比特的信息。\n\n  - 该消息会在下一秒开始前收到。特别地，最后一秒发出的信息不会被收到。\n  - 除此之外，不允许任何其他形式的通讯。\n\n你需要用尽可能少的通讯秒数完成这个任务。\n\n## 实现细节\n\n请确保你的程序开头有 `#include \"mpc.h\"`。\n\n你不需要也不应该实现主函数。你需要实现以下两个函数：\n\n```cpp\nint precalc(int n, int m);\n```\n\n- `n` 表示人数，`m` 表示整数的值域。\n- 你需要返回通讯的秒数 $N$。\n\n```cpp\nbool transmit(player &player, int round, int position);\n```\n\n- `round` 表示目前通讯的秒数，其取值为 $[1,N]$ 中的整数；\n- `position` 表示当前传递信息的人的编号，其取值为 $[0,n]$ 中的整数；\n- `player` 为一个结构体类型，描述了当前传递信息的人。该结构体实现在 `mpc.h` 中。其包含以下两个成员变量：\n  - 布尔类型变量 `last_message`，表示上一秒上一个人传递的信息。若 `position` 为 $0$ 或 `round` 为 $1$，则 `last_message` 的值一定为 $0$；\n  - 长度为 $4096$ 的整型数组 `memory`，描述当前传递信息的人的“记忆”。\n    - 在 `transmit` 函数中，这个数组可以被任意修改。\n    - `player.memory` 只可能在 `transmit` 函数中被修改。若 `transmit` 函数中不对 `player.memory` 进行修改，则同一个人多次传递信息时，`player.memory` 都存储相同的值。\n    - `player.memory` 的初始值按照以下规则设定：\n      - `position` 不为 $n$ 时，`memory` 的 $0$ 到 $m-1$ 位取值为 $\\{0,1\\}$，从低位到高位描述 $a_{\\text{position}}$ 的二进制表示（即第 $i$ 位对应位权 $2^i$ 的位），而其余位置为 $0$；\n      - 否则，该数组的所有位置均为 $0$。\n- 你需要返回这个人在这一秒传递给下一个人的信息。\n  - 当 `position` 为 $n$ 时或 `round` 为 $N$ 时，该返回值不会产生任何影响。\n\n在所有 `transmit` 调用结束后，你需要保证编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位取值均属于 $\\{0,1\\}$，且对应的二进制数是所有 $a_i$ 的和。\n\n在满足题目条件和数据范围的情况下，交互库至多消耗 $0.15$ 秒的时间以及 $128\\text{MiB}$ 的空间。\n\n**在程序中使用其他形式的通讯，包括但不限于使用全局变量，会被视为攻击交互库。**\n\n## 测试程序方式\n\n试题目录下提供了一个交互库的参考实现 `grader.cpp`。最终测试时所用的交互库实现与该实现有不同，因此选手的解法不应依赖交互库的具体实现。\n\n你需要在本题目录下使用以下编译命令得到可执行程序：\n\n`g++ mpc.cpp grader.cpp -o mpc -O2 -std=c++17 -lm`\n\n可执行文件将从标准输入读入以下格式的数据：\n\n- 第一行两个整数 $n, m$，\n- 接下来 $n$ 行每行 $m$ 个 `01` 整数，从低到高表示每个人的整数的二进制表示，每行的两个整数之间用一个空格分隔。\n\n读入完成后，交互库会先调用一次 `init(n,m)` 函数得到 $N$，然后进行 $\\max(0,N)$ 轮调用，第 $k(1 \\le k \\le \\max(0,N))$ 轮调用会调用所有 $\\text{round}=k$ 的 `transmit` 函数，并在调用完之后更新相应的 `player.last_message` 的值。\n\n- 若 $N \\le 0$，则不会进行任何调用，所有 `player.memory` 为其初始值。\n\n若你的程序正确运行，可执行文件会输出以下格式的数据：\n\n- 第一行一个长度为 $2200$ 的字符串，表示所有 $a_i$ 的和，按二进制从低位到高位输出。\n- 第二行一个字符串，依次输出所有交互完毕后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 个位置表示的数，**相邻两个数之间没有空格**。\n- 第三行，如果上述两个字符串不同，那么会告知你答案错误；不然，会输出你在这组数据上的得分。\n\n本题目录中同时下发了样例 `1.in`，`1.ans` 以及一个样例程序 `mpc.cpp`。该样例程序可以通过下发的样例。", "inputFormat": "", "outputFormat": "", "hint": "## 子任务\n\n对于所有测试数据，$1 \\le n,m \\le 2000$。\n\n本题共有 10 个子任务，每个子任务 10 分。\n\n| 子任务编号 |  1   |  2   |  3   |  4   |  5   |  6   |  7   |  8   |  9   |  10  |\n| :--------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|   $n =$    |  5   | 1000 | 1000 | 1000 |  3   |  10  | 500  | 1000 | 1500 | 2000 |\n|   $m =$    |  5   |  1   |  10  |  30  | 1000 | 1000 | 1000 | 1000 | 1500 | 2000 |\n\n## 评分方式\n\n本题首先会受到和传统题相同的限制，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若 $N > n+m+100$，或者在所有的 `transmit` 调用结束后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位对应的二进制数不是所有 $a_i$ 的和，你会获得 $0$ 分。否则，根据 $(N - n - m)$ 的值，你在该测试点的分数按照以下表格计算：\n\n| $(N - n - m) \\in$ | $[14,100]$ | $[12, 13]$ | $[9, 11]$ | $[6,8]$ | $[5,5]$ | $[4,4]$ | $(-\\infty, 3]$ |\n| :---------------: | :--------: | :--------: | :-------: | :-----: | :-----: | :-----: | :------------: |\n|       分数        |     1      |     2      |     3     |    4    |    6    |    8    |       10       |\n\n你在一个子任务中的分数为该子任务中所有测试点的分数的最小值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 多方计算", "background": "## 滥用本题评测将被封号\n\n**特别注意**：为了能够正常评测，请删去代码开头的 `#include \"mpc.h\"` 并加入以下代码段：\n\n```cpp\n#include <array>\nstruct player{\n    bool last_message;\n    std::array<int, 4096> memory;\n};\nint precalc(int n, int m);\nbool transmit(player &player, int round, int position);\n```", "description": "**这是一道交互题。**\n\n有 $n+1$ 个人，由 $0$ 至 $n$ 编号。第 $i(0 \\le i \\le n-1)$ 个人有一个 $[0,2^m-1]$ 之间的整数 $a_i$。\n\n编号为 $n$ 的人希望知道 $a_0+a_1+\\cdots+a_{n-1}$ 的值。为此，他们可以进行如下通讯：\n\n1. 首先，选定通讯的秒数 $N$。\n2. 接下来的 $N$ 秒中的每一秒，所有 $i(0 \\le i \\le n-1)$ **同时**向 $(i+1)$ 发送一个比特的信息。\n\n  - 该消息会在下一秒开始前收到。特别地，最后一秒发出的信息不会被收到。\n  - 除此之外，不允许任何其他形式的通讯。\n\n你需要用尽可能少的通讯秒数完成这个任务。\n\n## 实现细节\n\n请确保你的程序开头有 `#include \"mpc.h\"`。\n\n你不需要也不应该实现主函数。你需要实现以下两个函数：\n\n```cpp\nint precalc(int n, int m);\n```\n\n- `n` 表示人数，`m` 表示整数的值域。\n- 你需要返回通讯的秒数 $N$。\n\n```cpp\nbool transmit(player &player, int round, int position);\n```\n\n- `round` 表示目前通讯的秒数，其取值为 $[1,N]$ 中的整数；\n- `position` 表示当前传递信息的人的编号，其取值为 $[0,n]$ 中的整数；\n- `player` 为一个结构体类型，描述了当前传递信息的人。该结构体实现在 `mpc.h` 中。其包含以下两个成员变量：\n  - 布尔类型变量 `last_message`，表示上一秒上一个人传递的信息。若 `position` 为 $0$ 或 `round` 为 $1$，则 `last_message` 的值一定为 $0$；\n  - 长度为 $4096$ 的整型数组 `memory`，描述当前传递信息的人的“记忆”。\n    - 在 `transmit` 函数中，这个数组可以被任意修改。\n    - `player.memory` 只可能在 `transmit` 函数中被修改。若 `transmit` 函数中不对 `player.memory` 进行修改，则同一个人多次传递信息时，`player.memory` 都存储相同的值。\n    - `player.memory` 的初始值按照以下规则设定：\n      - `position` 不为 $n$ 时，`memory` 的 $0$ 到 $m-1$ 位取值为 $\\{0,1\\}$，从低位到高位描述 $a_{\\text{position}}$ 的二进制表示（即第 $i$ 位对应位权 $2^i$ 的位），而其余位置为 $0$；\n      - 否则，该数组的所有位置均为 $0$。\n- 你需要返回这个人在这一秒传递给下一个人的信息。\n  - 当 `position` 为 $n$ 时或 `round` 为 $N$ 时，该返回值不会产生任何影响。\n\n在所有 `transmit` 调用结束后，你需要保证编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位取值均属于 $\\{0,1\\}$，且对应的二进制数是所有 $a_i$ 的和。\n\n在满足题目条件和数据范围的情况下，交互库至多消耗 $0.15$ 秒的时间以及 $128\\text{MiB}$ 的空间。\n\n**在程序中使用其他形式的通讯，包括但不限于使用全局变量，会被视为攻击交互库。**\n\n## 测试程序方式\n\n试题目录下提供了一个交互库的参考实现 `grader.cpp`。最终测试时所用的交互库实现与该实现有不同，因此选手的解法不应依赖交互库的具体实现。\n\n你需要在本题目录下使用以下编译命令得到可执行程序：\n\n`g++ mpc.cpp grader.cpp -o mpc -O2 -std=c++17 -lm`\n\n可执行文件将从标准输入读入以下格式的数据：\n\n- 第一行两个整数 $n, m$，\n- 接下来 $n$ 行每行 $m$ 个 `01` 整数，从低到高表示每个人的整数的二进制表示，每行的两个整数之间用一个空格分隔。\n\n读入完成后，交互库会先调用一次 `init(n,m)` 函数得到 $N$，然后进行 $\\max(0,N)$ 轮调用，第 $k(1 \\le k \\le \\max(0,N))$ 轮调用会调用所有 $\\text{round}=k$ 的 `transmit` 函数，并在调用完之后更新相应的 `player.last_message` 的值。\n\n- 若 $N \\le 0$，则不会进行任何调用，所有 `player.memory` 为其初始值。\n\n若你的程序正确运行，可执行文件会输出以下格式的数据：\n\n- 第一行一个长度为 $2200$ 的字符串，表示所有 $a_i$ 的和，按二进制从低位到高位输出。\n- 第二行一个字符串，依次输出所有交互完毕后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 个位置表示的数，**相邻两个数之间没有空格**。\n- 第三行，如果上述两个字符串不同，那么会告知你答案错误；不然，会输出你在这组数据上的得分。\n\n本题目录中同时下发了样例 `1.in`，`1.ans` 以及一个样例程序 `mpc.cpp`。该样例程序可以通过下发的样例。", "inputFormat": "", "outputFormat": "", "hint": "## 子任务\n\n对于所有测试数据，$1 \\le n,m \\le 2000$。\n\n本题共有 10 个子任务，每个子任务 10 分。\n\n| 子任务编号 |  1   |  2   |  3   |  4   |  5   |  6   |  7   |  8   |  9   |  10  |\n| :--------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|   $n =$    |  5   | 1000 | 1000 | 1000 |  3   |  10  | 500  | 1000 | 1500 | 2000 |\n|   $m =$    |  5   |  1   |  10  |  30  | 1000 | 1000 | 1000 | 1000 | 1500 | 2000 |\n\n## 评分方式\n\n本题首先会受到和传统题相同的限制，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若 $N > n+m+100$，或者在所有的 `transmit` 调用结束后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位对应的二进制数不是所有 $a_i$ 的和，你会获得 $0$ 分。否则，根据 $(N - n - m)$ 的值，你在该测试点的分数按照以下表格计算：\n\n| $(N - n - m) \\in$ | $[14,100]$ | $[12, 13]$ | $[9, 11]$ | $[6,8]$ | $[5,5]$ | $[4,4]$ | $(-\\infty, 3]$ |\n| :---------------: | :--------: | :--------: | :-------: | :-----: | :-----: | :-----: | :------------: |\n|       分数        |     1      |     2      |     3     |    4    |    6    |    8    |       10       |\n\n你在一个子任务中的分数为该子任务中所有测试点的分数的最小值。", "locale": "zh-CN"}}}
{"pid": "P10214", "type": "P", "difficulty": 7, "samples": [["5 8\n1 2 3 2\n1 3 2 1 0\n0 4 1 0 0\n2 1 3\n1 1 0 3\n2 2 5\n1 1 2 2\n2 4 3\n2 5 4\n2 5 1\n2 2 1\n", "0\n0\n1\n1\n1\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 投票游戏", "background": "", "description": "有 $n$ 个人，由 $1$ 至 $n$ 编号。第 $i (2 \\le i \\le n)$ 个人有一个讨厌的人 $f_i (1 \\leq f_i < i)$，第 $1$ 个人没有讨厌的人。\n\n这一天，$n$ 个人进行了一场关于投票的游戏。一次游戏会进行 $n$ 轮。游戏开始时，所有人都没有被票出。游戏的每一轮中，会进行以下过程：\n\n1. 对于每一个没有被票出的人 $i$，TA 初始有 $a_i$ 票。\n2. 随后，对于每一个没有被票出的人 $i$，如果 TA 有讨厌的人且 TA 讨厌的人 $f_i$ 没有被票出，则 TA 会给 $f_i$ 投 $b_i$ 票。\n3. 最后，票出当前没有被票出的人的票数最高的，如果有多个票数最高的人，票出其中编号最大的人。\n\n一次游戏的 $n$ 轮之间独立计票。\n\n在游戏开始前，发生了 $q$ 次事件，事件有以下两种：\n\n1. 给定 $p, x, y$，将 $(a_p, b_p)$ 修改为 $(x,y)$；\n2. 小明想知道，给定两个人 $c,d$，如果此刻进行一次游戏，两个人中谁先被票出。\n\n作为小明的朋友，你可以帮帮小明吗？", "inputFormat": "从标准输入读入数据。\n\n第一行两个正整数 $n, q$，表示人数与发生的事件数。\n\n第二行 $(n-1)$ 个整数 $f_2, f_3, \\cdots, f_n$。\n\n第三行 $n$ 个整数 $a_1, a_2, \\cdots, a_n$。\n\n第四行 $n$ 个整数 $b_1, b_2, \\cdots, b_n$。\n\n接下来 $q$ 行，每行三个或四个整数描述一个事件。第一个正整数 $op$ 表示发生事件的类型。\n\n- 若 $op=1$，则接下来三个整数 $p, x, y$，表示将 $(a_p, b_p)$ 修改为 $(x, y)$。\n- 若 $op=2$，则接下来两个正整数 $c, d$，你需要判断如果此时进行了一次游戏，$c$ 和 $d$ 谁先被票出。", "outputFormat": "输出到标准输出。\n\n对于每个 $op=2$ 的事件输出一行一个 `01` 字符，若 $c$ 先被票出输出 `0`，否则输出 `1`。", "hint": "对于所有测试数据，\n\n- $1 \\le n, q \\le 2 \\times 10^5$，\n- $\\forall 2 \\le i \\le n, 1 \\le f_i < i$，\n- $0 \\le a_i, b_i, x, y \\le 10^8$，\n- $1 \\le c, d, p \\le n$，\n- $c \\ne d$。\n\n| 子任务编号 | 子任务分值 | $n \\leq$        | $q \\leq$        | 特殊性质                       |\n|-------|-------|-----------------|-----------------|----------------------------|\n| 1     | 5     | $500$           | $500$           | 无                          |\n| 2     | 10    | $3000$          | $3000$          | 无                          |\n| 3     | 10    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i$ 在 $[1, i - 1]$ 中均匀随机 |\n| 4     | 15    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = 1$                  |\n| 5     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = i-1$                |\n| 6     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | 无                          |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 投票游戏", "background": "", "description": "有 $n$ 个人，由 $1$ 至 $n$ 编号。第 $i (2 \\le i \\le n)$ 个人有一个讨厌的人 $f_i (1 \\leq f_i < i)$，第 $1$ 个人没有讨厌的人。\n\n这一天，$n$ 个人进行了一场关于投票的游戏。一次游戏会进行 $n$ 轮。游戏开始时，所有人都没有被票出。游戏的每一轮中，会进行以下过程：\n\n1. 对于每一个没有被票出的人 $i$，TA 初始有 $a_i$ 票。\n2. 随后，对于每一个没有被票出的人 $i$，如果 TA 有讨厌的人且 TA 讨厌的人 $f_i$ 没有被票出，则 TA 会给 $f_i$ 投 $b_i$ 票。\n3. 最后，票出当前没有被票出的人的票数最高的，如果有多个票数最高的人，票出其中编号最大的人。\n\n一次游戏的 $n$ 轮之间独立计票。\n\n在游戏开始前，发生了 $q$ 次事件，事件有以下两种：\n\n1. 给定 $p, x, y$，将 $(a_p, b_p)$ 修改为 $(x,y)$；\n2. 小明想知道，给定两个人 $c,d$，如果此刻进行一次游戏，两个人中谁先被票出。\n\n作为小明的朋友，你可以帮帮小明吗？", "inputFormat": "从标准输入读入数据。\n\n第一行两个正整数 $n, q$，表示人数与发生的事件数。\n\n第二行 $(n-1)$ 个整数 $f_2, f_3, \\cdots, f_n$。\n\n第三行 $n$ 个整数 $a_1, a_2, \\cdots, a_n$。\n\n第四行 $n$ 个整数 $b_1, b_2, \\cdots, b_n$。\n\n接下来 $q$ 行，每行三个或四个整数描述一个事件。第一个正整数 $op$ 表示发生事件的类型。\n\n- 若 $op=1$，则接下来三个整数 $p, x, y$，表示将 $(a_p, b_p)$ 修改为 $(x, y)$。\n- 若 $op=2$，则接下来两个正整数 $c, d$，你需要判断如果此时进行了一次游戏，$c$ 和 $d$ 谁先被票出。", "outputFormat": "输出到标准输出。\n\n对于每个 $op=2$ 的事件输出一行一个 `01` 字符，若 $c$ 先被票出输出 `0`，否则输出 `1`。", "hint": "对于所有测试数据，\n\n- $1 \\le n, q \\le 2 \\times 10^5$，\n- $\\forall 2 \\le i \\le n, 1 \\le f_i < i$，\n- $0 \\le a_i, b_i, x, y \\le 10^8$，\n- $1 \\le c, d, p \\le n$，\n- $c \\ne d$。\n\n| 子任务编号 | 子任务分值 | $n \\leq$        | $q \\leq$        | 特殊性质                       |\n|-------|-------|-----------------|-----------------|----------------------------|\n| 1     | 5     | $500$           | $500$           | 无                          |\n| 2     | 10    | $3000$          | $3000$          | 无                          |\n| 3     | 10    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i$ 在 $[1, i - 1]$ 中均匀随机 |\n| 4     | 15    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = 1$                  |\n| 5     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = i-1$                |\n| 6     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | 无                          |\n", "locale": "zh-CN"}}}
{"pid": "P10215", "type": "P", "difficulty": 7, "samples": [["ababa\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 字符串游戏", "background": "", "description": "小 P 和小 B 喜欢玩游戏，他们找到了 skip。skip 告诉了他们这样一个游戏：\n\n- 有一个包含小写字母的字符串 $S$，游戏开始时其为 skip 给定的一个字符串 $S_0$。游戏对小 P 和小 B 计算分数，初始他们的分数都为 $0$。\n- 小 P 和小 B 轮流在这个串上操作，小 P 先手。每次操作方可以进行以下操作：\n  - 选择 $S$ 的一个非空前缀（可以是 $S$ 本身），获得等同于这个前缀在 $S$ 中的出现次数的分数，并将这个前缀从 $S$ 中删掉。\n- 如果进行了某次操作后 $S$ 变为空，游戏就结束了。\n\n为了让你更好的理解游戏规则，考虑如下例子：\n\n- 初始时，$S_0 = ababa$；\n- 小 P 选择 $ababa$ 的前缀 $a$，获得 3 分，$S$ 变为 $baba$；\n- 小 B 选择 $baba$ 的前缀 $ba$，获得 2 分，$S$ 变为 $ba$；\n- 小 P 选择 $ba$，获得 1 分，字符串变为空，游戏结束。最终小 P 获得 4 分，小 B 获得 2 分。\n\n小 P 希望最大化小 P 的得分减去小 B 的得分，而小 B 希望最小化这个值。他们想知道在双方都绝顶聪明的情况下，最终小 P 的得分减去小 B 的得分会是多少。", "inputFormat": "标准输入读入数据。\n\n输入仅一行一个小写字母构成的字符串 $S_0$。", "outputFormat": "输出到标准输出。\n\n一个整数，表示双方绝顶聪明的前提下，游戏结束时小 P 的得分减去小 B 的得分的值。\n\n", "hint": "**样例 1 解释**\n\n小 P 和小 B 的最优策略为题目描述中给出的策略。\n\n### 子任务\n\n设 $n$ 为字符串 $S$ 的长度。对于所有测试数据，$1\\le n\\le 10^6$，且字符串 $S$ 为小写字母构成的字符串。\n\n| 子任务编号 | $n \\le$         | 特殊性质                         | 分值 |\n|-------|-----------------|------------------------------|----|\n| 1     | $5\\times 10^3$   | 无                            | 10 |\n| 2     | $10^6$          | $S$ 的每个字符在 $\\{a,b\\}$ 中独立均匀随机 | 10 |\n| 3     | $10^6$          | $S$ 的每个字符均为 $a$              | 5  |\n| 4     | $2 \\times 10^5$ | $S$ 的每个字符均为 $a$ 或 $b$        | 25 |\n| 5     | $5 \\times 10^5$ | 无                            | 25 |\n| 6     | $10^6$          | 无                            | 25 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 字符串游戏", "background": "", "description": "小 P 和小 B 喜欢玩游戏，他们找到了 skip。skip 告诉了他们这样一个游戏：\n\n- 有一个包含小写字母的字符串 $S$，游戏开始时其为 skip 给定的一个字符串 $S_0$。游戏对小 P 和小 B 计算分数，初始他们的分数都为 $0$。\n- 小 P 和小 B 轮流在这个串上操作，小 P 先手。每次操作方可以进行以下操作：\n  - 选择 $S$ 的一个非空前缀（可以是 $S$ 本身），获得等同于这个前缀在 $S$ 中的出现次数的分数，并将这个前缀从 $S$ 中删掉。\n- 如果进行了某次操作后 $S$ 变为空，游戏就结束了。\n\n为了让你更好的理解游戏规则，考虑如下例子：\n\n- 初始时，$S_0 = ababa$；\n- 小 P 选择 $ababa$ 的前缀 $a$，获得 3 分，$S$ 变为 $baba$；\n- 小 B 选择 $baba$ 的前缀 $ba$，获得 2 分，$S$ 变为 $ba$；\n- 小 P 选择 $ba$，获得 1 分，字符串变为空，游戏结束。最终小 P 获得 4 分，小 B 获得 2 分。\n\n小 P 希望最大化小 P 的得分减去小 B 的得分，而小 B 希望最小化这个值。他们想知道在双方都绝顶聪明的情况下，最终小 P 的得分减去小 B 的得分会是多少。", "inputFormat": "标准输入读入数据。\n\n输入仅一行一个小写字母构成的字符串 $S_0$。", "outputFormat": "输出到标准输出。\n\n一个整数，表示双方绝顶聪明的前提下，游戏结束时小 P 的得分减去小 B 的得分的值。\n\n", "hint": "**样例 1 解释**\n\n小 P 和小 B 的最优策略为题目描述中给出的策略。\n\n### 子任务\n\n设 $n$ 为字符串 $S$ 的长度。对于所有测试数据，$1\\le n\\le 10^6$，且字符串 $S$ 为小写字母构成的字符串。\n\n| 子任务编号 | $n \\le$         | 特殊性质                         | 分值 |\n|-------|-----------------|------------------------------|----|\n| 1     | $5\\times 10^3$   | 无                            | 10 |\n| 2     | $10^6$          | $S$ 的每个字符在 $\\{a,b\\}$ 中独立均匀随机 | 10 |\n| 3     | $10^6$          | $S$ 的每个字符均为 $a$              | 5  |\n| 4     | $2 \\times 10^5$ | $S$ 的每个字符均为 $a$ 或 $b$        | 25 |\n| 5     | $5 \\times 10^5$ | 无                            | 25 |\n| 6     | $10^6$          | 无                            | 25 |", "locale": "zh-CN"}}}
{"pid": "P10216", "type": "P", "difficulty": 7, "samples": [["4\n1 2 3\n4 5\n6", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模板题"], "title": "【模板】Pfaffian", "background": "称一个长度为 $2n$ 的排列 $\\pi$ 是完美匹配，当且仅当其满足\n- $\\forall 1\\le i\\le n,\\pi_{2i-1}<\\pi_{2i}$\n- $\\forall 1\\le i< n,\\pi_{2i-1}<\\pi_{2i+1}$\n\n记 $\\textup{inv }\\pi$ 表示 $\\pi$ 的逆序对数，$\\textup{sgn }\\pi=(-1)^{\\textup{inv }\\pi}$，$\\mathfrak{M}_{2n}$ 表示全体长度为 $2n$ 的完美匹配构成的集合。\n\t\n令 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le 2n}$ 是一个反对称矩阵，定义 $\\mathbf{A}$ 的 $\\text{Pfaffian}$ 为\n$$\\textup{Pf}(\\mathbf{A})=\\sum\\limits_{\\pi\\in\\mathfrak{M}_{2n}}(\\textup{sgn }\\pi)\\prod\\limits_{i=1}^{n}a_{\\pi(2i-1),\\pi(2i)}$$", "description": "给定偶数 $n$ 与反对称矩阵 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le n}$，求 $\\textup{Pf}(\\mathbf{A})$ 对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$，保证 $n$ 是偶数。\n\n接下来 $n-1$ 行，第 $i$ 行有 $n-i$ 个非负整数，其中第 $j$ 个整数表示 $a_{i,i+j}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $100\\%$ 的数据，$2\\leq n\\le 500$，$0\\le a_{i,j}<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Pfaffian", "background": "称一个长度为 $2n$ 的排列 $\\pi$ 是完美匹配，当且仅当其满足\n- $\\forall 1\\le i\\le n,\\pi_{2i-1}<\\pi_{2i}$\n- $\\forall 1\\le i< n,\\pi_{2i-1}<\\pi_{2i+1}$\n\n记 $\\textup{inv }\\pi$ 表示 $\\pi$ 的逆序对数，$\\textup{sgn }\\pi=(-1)^{\\textup{inv }\\pi}$，$\\mathfrak{M}_{2n}$ 表示全体长度为 $2n$ 的完美匹配构成的集合。\n\t\n令 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le 2n}$ 是一个反对称矩阵，定义 $\\mathbf{A}$ 的 $\\text{Pfaffian}$ 为\n$$\\textup{Pf}(\\mathbf{A})=\\sum\\limits_{\\pi\\in\\mathfrak{M}_{2n}}(\\textup{sgn }\\pi)\\prod\\limits_{i=1}^{n}a_{\\pi(2i-1),\\pi(2i)}$$", "description": "给定偶数 $n$ 与反对称矩阵 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le n}$，求 $\\textup{Pf}(\\mathbf{A})$ 对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$，保证 $n$ 是偶数。\n\n接下来 $n-1$ 行，第 $i$ 行有 $n-i$ 个非负整数，其中第 $j$ 个整数表示 $a_{i,i+j}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $100\\%$ 的数据，$2\\leq n\\le 500$，$0\\le a_{i,j}<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P10217", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2 2\n1 1\n1 2 -2 -2\n1 1\n1 2 0 0\n1 1\n2 100000000 100000000 100000000\n-99999999 0\n-100000000 0", "1\n-1\n0\n399999999"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 季风", "background": "生活在二维平面的小 X 准备拜访小 Y，但由于气候的变化，平面上刮起了季风。小 X 想知道季风的影响下，TA 至少要多少天能够到达小 Y 的家，但小 X 也是第一次遇见这种怪事，所以请精通算法的你来帮忙。", "description": "给定 $n,k,x,y$ 和 $2n$ 个整数 $x_0,y_0,x_1,y_1,\\dots,x_{n-1},y_{n-1}$。\n\n找到最小的**非负整数** $m$，使得存在 $2m$ 个实数 $x_0',y_0',x_1',y_1',\\dots,x_{m-1}',y_{m-1}'$ 满足以下条件，或报告不存在这样的 $m$：\n- $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})=x$；\n- $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})=y$；\n- $\\forall 0\\leq i\\leq m-1,|x_i'|+|y_i'|\\leq k$。\n\n特别地，$m=0$ 时，认为 $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})$ 和 $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})$ 均为 $0$。", "inputFormat": "**本题有多组测试数据**。输入的第一行一个整数 $T$ 表示测试数据组数。\n\n对于每组测试数据，\n- 第一行四个整数 $n,k,x,y$；\n- 接下来 $n$ 行，第 $i$ 行两个整数 $x_{i-1},y_{i-1}$。", "outputFormat": "对于每组测试数据输出一行一个整数，如果存在满足题意的 $m$，输出其最小可能值，否则输出 $-1$。", "hint": "**【样例 1 解释】**\n\n该组样例共有四组测试数据。\n- 对于第一组测试数据，取 $m=1$，$(x_0',y_0')=(1,1)$ 满足条件，可以证明不存在更小的 $m$ 满足条件；\n- 对于第二组测试数据，可以证明不存在任何非负整数 $m$ 满足条件；\n- 对于第三组测试数据，取 $m=0$ 满足条件，可以证明不存在更小的 $m$ 满足条件。\n\n**【样例 2】**\n\n见附件中的 `wind2.in/ans`。\n\n该组样例共有八十组测试数据，所有测试数据均满足 $n=1$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B，$41\\sim 60$ 满足特殊性质 C。\n\n**【样例 3】**\n\n见附件中的 `wind3.in/ans`。\n\n该组样例共有六十组测试数据，所有测试数据均满足 $n=200$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B。\n\n**【子任务】**\n\n设 $\\sum n$ 为单个测试点内所有测试数据 $n$ 的和。对于所有测试数据：\n\n- $1\\leq T\\leq 5\\times 10^4$；\n- $1\\leq n\\leq 10^5$，$1\\leq \\sum n \\leq 10^6$；\n- $0\\leq |x|,|y|,|x_i|,|y_i|,k\\leq 10^8$。\n\n| 测试点编号 | $n\\leq$ | $\\sum n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $300$ | A |\n| $2$ | $1$ | $300$ | B |\n| $3$ | $1$ | $300$ | C |\n| $4$ | $1$ | $300$ | 无 |\n| $5$ | $200$ | $5000$ | A |\n| $6$ | $200$ | $5000$ | B |\n| $7$ | $200$ | $5000$ | 无 |\n| $8$ | $10^4$ | $10^5$ | A |\n| $9$ | $10^4$ | $10^5$ | B |\n| $10$ | $10^5$ | $10^6$ | 无 |\n\n- 特殊性质 A：$\\forall 0\\leq i \\leq n-1$，$|x_i|+|y_i| \\leq k$；\n- 特殊性质 B：$k=0$；\n- 特殊性质 C：$x_0=y_0=0$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 季风", "background": "生活在二维平面的小 X 准备拜访小 Y，但由于气候的变化，平面上刮起了季风。小 X 想知道季风的影响下，TA 至少要多少天能够到达小 Y 的家，但小 X 也是第一次遇见这种怪事，所以请精通算法的你来帮忙。", "description": "给定 $n,k,x,y$ 和 $2n$ 个整数 $x_0,y_0,x_1,y_1,\\dots,x_{n-1},y_{n-1}$。\n\n找到最小的**非负整数** $m$，使得存在 $2m$ 个实数 $x_0',y_0',x_1',y_1',\\dots,x_{m-1}',y_{m-1}'$ 满足以下条件，或报告不存在这样的 $m$：\n- $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})=x$；\n- $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})=y$；\n- $\\forall 0\\leq i\\leq m-1,|x_i'|+|y_i'|\\leq k$。\n\n特别地，$m=0$ 时，认为 $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})$ 和 $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})$ 均为 $0$。", "inputFormat": "**本题有多组测试数据**。输入的第一行一个整数 $T$ 表示测试数据组数。\n\n对于每组测试数据，\n- 第一行四个整数 $n,k,x,y$；\n- 接下来 $n$ 行，第 $i$ 行两个整数 $x_{i-1},y_{i-1}$。", "outputFormat": "对于每组测试数据输出一行一个整数，如果存在满足题意的 $m$，输出其最小可能值，否则输出 $-1$。", "hint": "**【样例 1 解释】**\n\n该组样例共有四组测试数据。\n- 对于第一组测试数据，取 $m=1$，$(x_0',y_0')=(1,1)$ 满足条件，可以证明不存在更小的 $m$ 满足条件；\n- 对于第二组测试数据，可以证明不存在任何非负整数 $m$ 满足条件；\n- 对于第三组测试数据，取 $m=0$ 满足条件，可以证明不存在更小的 $m$ 满足条件。\n\n**【样例 2】**\n\n见附件中的 `wind2.in/ans`。\n\n该组样例共有八十组测试数据，所有测试数据均满足 $n=1$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B，$41\\sim 60$ 满足特殊性质 C。\n\n**【样例 3】**\n\n见附件中的 `wind3.in/ans`。\n\n该组样例共有六十组测试数据，所有测试数据均满足 $n=200$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B。\n\n**【子任务】**\n\n设 $\\sum n$ 为单个测试点内所有测试数据 $n$ 的和。对于所有测试数据：\n\n- $1\\leq T\\leq 5\\times 10^4$；\n- $1\\leq n\\leq 10^5$，$1\\leq \\sum n \\leq 10^6$；\n- $0\\leq |x|,|y|,|x_i|,|y_i|,k\\leq 10^8$。\n\n| 测试点编号 | $n\\leq$ | $\\sum n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $300$ | A |\n| $2$ | $1$ | $300$ | B |\n| $3$ | $1$ | $300$ | C |\n| $4$ | $1$ | $300$ | 无 |\n| $5$ | $200$ | $5000$ | A |\n| $6$ | $200$ | $5000$ | B |\n| $7$ | $200$ | $5000$ | 无 |\n| $8$ | $10^4$ | $10^5$ | A |\n| $9$ | $10^4$ | $10^5$ | B |\n| $10$ | $10^5$ | $10^6$ | 无 |\n\n- 特殊性质 A：$\\forall 0\\leq i \\leq n-1$，$|x_i|+|y_i| \\leq k$；\n- 特殊性质 B：$k=0$；\n- 特殊性质 C：$x_0=y_0=0$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。", "locale": "zh-CN"}}}
{"pid": "P10218", "type": "P", "difficulty": 7, "samples": [["1 2\n5 2 3\n1 1 2 3 7\n1 1 0 3 2\n1 1 1\n1\n0", "5\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024"], "title": "[省选联考 2024] 魔法手杖", "background": "", "description": "**提示：** 我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nC 城是一座魔力之都，以最高的魔法师水平闻名。对于一名魔法师而言，最重要的固然是魔法手杖和镶嵌在手杖上的魔法水晶。\n\n每个魔法手杖和魔法水晶都可以用**魔力值**来衡量其能力大小，一个魔法手杖的魔力值是镶嵌在其上的所有魔法水晶中魔力值的最小值。\n\n小 $\\omega$ 是 C 城的一名见习魔法师，他想加强他的魔法手杖。在加强之前，小 $\\omega$ 的魔法手杖镶嵌着 $n$ 颗魔法水晶，它们的魔力值分别为 $a_1,a_2,\\dots,a_n$。\n\n小 $\\omega$ 准备使用一次强力的秘术来加强他的手杖。这一次秘术中，他可以任意选择 $x$，然后将所有魔法水晶的魔力值由 $a_i$ 变为 $(a_i \\oplus x)$，其中 $\\oplus$ 表示按位异或。由于小 $\\omega$ 能力有限，$a_1,a_2,\\dots,a_n$ 和 $x$ 都是 $[0,2^k-1]$ 中的整数。\n\n小 $\\omega$ 还发现这个秘术可以定向加强。具体地，他可以花费 $b_i$ 的体力值对第 $i$ 个魔法水晶进行定向加强，将原本应变为 $(a_i \\oplus x)$ 的魔力值变为 $(a_i+x)$。小 $\\omega$ 能力有限，因此他定向加强所花费的体力值总和不能超过 $m$，且每个水晶只能被定向加强至多一次。\n\n小 $\\omega$ 想知道他在加强魔法手杖后，魔法手杖的魔力值最大能为多少，但他并不会算，所以请你来帮他计算。\n\n**形式化的：** 给定 $a_1,a_2,\\dots,a_n$ 以及 $b_1,b_2,\\dots,b_n$，满足 $a_i \\in [0,2^k-1]$ 以及 $b_i\\geq 0$，你需要给出 $S \\subseteq \\{1,2,\\dots,n\\}$ 以及 $x \\in [0,2^k-1]$ 满足以下条件：\n\n- $\\sum \\limits_{i\\in S} b_i\\leq m$；\n- 满足以上条件的前提下，最大化 $val(S,x)=\\min(\\min \\limits_{i \\in S}(a_i+x),\\min \\limits_{i \\in U \\backslash S}(a_i \\oplus x))$ 的值。\n\n你只需要给出最大的 $val(S,x)$ 的值即可。", "inputFormat": "**本题有多组测试数据。** 输入的第一行包含两个整数 $c,T$，表示测试点编号与测试数据组数。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来依次给出每组输入数据，对于每组数据：\n- 第一行三个整数 $n,m,k$；\n- 第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，分别表示每个魔法水晶的初始魔力值；\n- 第三行 $n$ 个整数 $b_1,b_2,\\dots,b_n$，分别表示每个魔法水晶定向加强需要的体力值。", "outputFormat": "对于每组测试数据输出一行一个整数表示小 $\\omega$ 能获得魔法手杖魔力值的最大值。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，一种可行的方案为：定向强化魔法水晶 $5$（即 $S=\\{5\\}$）并取 $x=4$，最后得到的魔法水晶魔力值分别为 $5,5,6,7,11$，故魔法手杖的魔力值为 $5$。可以证明不存在更优方案。\n- 对于第二组数据，一种可行的方案为：定向强化魔法水晶 $1$（即 $S=\\{1\\}$）并取 $x=1$。\n\n**【样例 2】**\n\n见附件中的 `xor2.in/ans`。\n\n该组样例满足 $c=4$。\n\n**【样例 3】**\n\n见附件中的 `xor3.in/ans`。\n\n该组样例满足 $c=7$。\n\n**【样例 4】**\n\n见附件中的 `xor4.in/ans`。\n\n该组样例满足 $c=9$。\n\n**【样例 5】**\n\n见附件中的 `xor5.in/ans`。\n\n该组样例满足 $c=11$。\n\n**【样例 6】**\n\n见附件中的 `xor6.in/ans`。\n\n该组样例满足 $c=14$。\n\n**【样例 7】**\n\n见附件中的 `xor7.in/ans`。\n\n该组样例满足 $c=22$。\n\n**【子任务】**\n\n设 $\\sum n$ 表示单组测试点各组数据 $n$ 的和。对于所有测试数据，\n- $T \\geq 1$；\n- $1 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 5\\times 10^5$；\n- $0 \\leq m \\leq 10^9$；\n- $0 \\leq k \\leq 120$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq a_i<2^k$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq b_i \\leq 10^9$。\n\n| 测试点编号 | $\\sum n \\leq$ | $n \\leq$ | $m \\leq$ | $k \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10$ | $10$ | $10^9$ | $10$ | / |\n| $4\\sim 6$ | $5\\times 10^5$ | $10^5$ | $0$ | $30$ | A |\n| $7,8$ | $5\\times 10^5$ | $2$ | $10^9$ | $30$ | B |\n| $9,10$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | B |\n| $11\\sim 13$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | C |\n| $14,15$ | $500$ | $10^2$ | $10^9$ | $30$ | / |\n| $16\\sim 18$ | $5\\times 10^4$ | $10^4$ | $10^9$ | $60$ | / |\n| $19\\sim 21$ | $3\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n| $22\\sim 25$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n\n\n- 特殊性质 A：$m=0$；$\\forall 1 \\leq i\\le n, b_i\\geq 1$；\n- 特殊性质 B：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$，且至多只有一个 $i$ 满足 $b_i=1$；\n- 特殊性质 C：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。\n\n在评测环境中，你可以使用 $128$ 位有符号整数类型 `__int128`，它可以存储范围在 $[-2^{127},2^{127}-1]$ 内的整数，使用方法与其他整型类型基本一致。\n\n需要注意，此类型无法使用诸如 `cin/cout` 或 `scanf/printf` 等常规输入输出方式进行输入输出。我们在选手目录下提供了一份 `__int128` 的输入输出函数实现供选手选择使用。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 魔法手杖", "background": "", "description": "**提示：** 我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nC 城是一座魔力之都，以最高的魔法师水平闻名。对于一名魔法师而言，最重要的固然是魔法手杖和镶嵌在手杖上的魔法水晶。\n\n每个魔法手杖和魔法水晶都可以用**魔力值**来衡量其能力大小，一个魔法手杖的魔力值是镶嵌在其上的所有魔法水晶中魔力值的最小值。\n\n小 $\\omega$ 是 C 城的一名见习魔法师，他想加强他的魔法手杖。在加强之前，小 $\\omega$ 的魔法手杖镶嵌着 $n$ 颗魔法水晶，它们的魔力值分别为 $a_1,a_2,\\dots,a_n$。\n\n小 $\\omega$ 准备使用一次强力的秘术来加强他的手杖。这一次秘术中，他可以任意选择 $x$，然后将所有魔法水晶的魔力值由 $a_i$ 变为 $(a_i \\oplus x)$，其中 $\\oplus$ 表示按位异或。由于小 $\\omega$ 能力有限，$a_1,a_2,\\dots,a_n$ 和 $x$ 都是 $[0,2^k-1]$ 中的整数。\n\n小 $\\omega$ 还发现这个秘术可以定向加强。具体地，他可以花费 $b_i$ 的体力值对第 $i$ 个魔法水晶进行定向加强，将原本应变为 $(a_i \\oplus x)$ 的魔力值变为 $(a_i+x)$。小 $\\omega$ 能力有限，因此他定向加强所花费的体力值总和不能超过 $m$，且每个水晶只能被定向加强至多一次。\n\n小 $\\omega$ 想知道他在加强魔法手杖后，魔法手杖的魔力值最大能为多少，但他并不会算，所以请你来帮他计算。\n\n**形式化的：** 给定 $a_1,a_2,\\dots,a_n$ 以及 $b_1,b_2,\\dots,b_n$，满足 $a_i \\in [0,2^k-1]$ 以及 $b_i\\geq 0$，你需要给出 $S \\subseteq \\{1,2,\\dots,n\\}$ 以及 $x \\in [0,2^k-1]$ 满足以下条件：\n\n- $\\sum \\limits_{i\\in S} b_i\\leq m$；\n- 满足以上条件的前提下，最大化 $val(S,x)=\\min(\\min \\limits_{i \\in S}(a_i+x),\\min \\limits_{i \\in U \\backslash S}(a_i \\oplus x))$ 的值。\n\n你只需要给出最大的 $val(S,x)$ 的值即可。", "inputFormat": "**本题有多组测试数据。** 输入的第一行包含两个整数 $c,T$，表示测试点编号与测试数据组数。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来依次给出每组输入数据，对于每组数据：\n- 第一行三个整数 $n,m,k$；\n- 第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，分别表示每个魔法水晶的初始魔力值；\n- 第三行 $n$ 个整数 $b_1,b_2,\\dots,b_n$，分别表示每个魔法水晶定向加强需要的体力值。", "outputFormat": "对于每组测试数据输出一行一个整数表示小 $\\omega$ 能获得魔法手杖魔力值的最大值。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，一种可行的方案为：定向强化魔法水晶 $5$（即 $S=\\{5\\}$）并取 $x=4$，最后得到的魔法水晶魔力值分别为 $5,5,6,7,11$，故魔法手杖的魔力值为 $5$。可以证明不存在更优方案。\n- 对于第二组数据，一种可行的方案为：定向强化魔法水晶 $1$（即 $S=\\{1\\}$）并取 $x=1$。\n\n**【样例 2】**\n\n见附件中的 `xor2.in/ans`。\n\n该组样例满足 $c=4$。\n\n**【样例 3】**\n\n见附件中的 `xor3.in/ans`。\n\n该组样例满足 $c=7$。\n\n**【样例 4】**\n\n见附件中的 `xor4.in/ans`。\n\n该组样例满足 $c=9$。\n\n**【样例 5】**\n\n见附件中的 `xor5.in/ans`。\n\n该组样例满足 $c=11$。\n\n**【样例 6】**\n\n见附件中的 `xor6.in/ans`。\n\n该组样例满足 $c=14$。\n\n**【样例 7】**\n\n见附件中的 `xor7.in/ans`。\n\n该组样例满足 $c=22$。\n\n**【子任务】**\n\n设 $\\sum n$ 表示单组测试点各组数据 $n$ 的和。对于所有测试数据，\n- $T \\geq 1$；\n- $1 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 5\\times 10^5$；\n- $0 \\leq m \\leq 10^9$；\n- $0 \\leq k \\leq 120$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq a_i<2^k$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq b_i \\leq 10^9$。\n\n| 测试点编号 | $\\sum n \\leq$ | $n \\leq$ | $m \\leq$ | $k \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10$ | $10$ | $10^9$ | $10$ | / |\n| $4\\sim 6$ | $5\\times 10^5$ | $10^5$ | $0$ | $30$ | A |\n| $7,8$ | $5\\times 10^5$ | $2$ | $10^9$ | $30$ | B |\n| $9,10$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | B |\n| $11\\sim 13$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | C |\n| $14,15$ | $500$ | $10^2$ | $10^9$ | $30$ | / |\n| $16\\sim 18$ | $5\\times 10^4$ | $10^4$ | $10^9$ | $60$ | / |\n| $19\\sim 21$ | $3\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n| $22\\sim 25$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n\n\n- 特殊性质 A：$m=0$；$\\forall 1 \\leq i\\le n, b_i\\geq 1$；\n- 特殊性质 B：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$，且至多只有一个 $i$ 满足 $b_i=1$；\n- 特殊性质 C：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。\n\n在评测环境中，你可以使用 $128$ 位有符号整数类型 `__int128`，它可以存储范围在 $[-2^{127},2^{127}-1]$ 内的整数，使用方法与其他整型类型基本一致。\n\n需要注意，此类型无法使用诸如 `cin/cout` 或 `scanf/printf` 等常规输入输出方式进行输入输出。我们在选手目录下提供了一份 `__int128` 的输入输出函数实现供选手选择使用。", "locale": "zh-CN"}}}
{"pid": "P10219", "type": "P", "difficulty": 7, "samples": [["1 4 1 1\n1 2 1\n2 1 1\n3 4 1\n4 3 1", "8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 虫洞", "background": null, "description": "E 国有 $n$ 个城市，编号为 $1$ 至 $n$。为了让城市之间的来往更加便利，E 国的交通部想在 $n$ 个城市间建造一些虫洞。每条虫洞是一条**单向**的从某个城市到另一个城市的通道。允许通道的起点和终点是同一个城市，也允许两个城市之间有多个虫洞连接。\n\n为了区分虫洞的建造时间，交通部给每一条虫洞一个正整数的编号。\n\n我们称一种虫洞的建造方案是**好的**，若它满足如下四个条件：\n\n1. 存在一个非负整数 $d$ 使得每个城市恰好是 $d$ 条虫洞的起点，也恰好是 $d$ 条虫洞的终点。\n2. 对于每个城市而言，在以它为起点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n3. 对于每个城市而言，在以它为终点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n4. 任意选取一个城市 $u$ 和正整数 $1\\le j_1, j_2 \\le d$。设从 $u$ 出发，先经过一次编号为 $j_1$ 的虫洞，再经过一次编号为 $j_2$ 的虫洞，到达城市 $v_1$。设从 $u$ 出发，先经过一次编号为 $j_2$ 的虫洞，再经过一次编号为 $j_1$ 的虫洞，到达城市 $v_2$。则条件 $v_1=v_2$ 必定满足。\n\n特别地，不建造任何虫洞的方案也是好的。\n\n现在，建造师已建造了 $mn$ 条虫洞，且给了它们 $1\\sim m$ 的编号，**此时这样的建造方案是好的**。他想要新建造 $kn$ 条虫洞，并给它们 $(m+1)\\sim (m+k)$ 的编号。他必须保证这 $(m + k)n$ 条虫洞形成的建造方案仍然是好的。他想知道有多少种新建造 $kn$ 条虫洞的方法，使得这 $(m + k)n$ 条虫洞形成的建造方案是好的。\n\n由于答案很大，你只需要求出方案数除以 $998244353$ 的余数。", "inputFormat": "输入的第一行四个非负整数 $c, n, m, k$，其中 $c$ 表示测试点编号。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来 $nm$ 行，每行三个正整数 $u,v,w$，表示一条编号为 $w$ 的，起点为 $u$ 号城市，终点为 $v$ 号城市的虫洞。", "outputFormat": "输出一行整数，表示方案数除以 $998244353$ 的余数。", "hint": "**【样例 1 解释】**\n\n在该组样例中，已经建造的编号为 $1$ 的虫洞为 $1\\to 2,2\\to 1,3\\to 4,4\\to 3$。为了使 $8$ 条虫洞形成的建造方案是好的，新建造的编号为 $2$ 的虫洞可能有 $8$ 种情形：\n\n1. $1\\to 1, 2\\to 2, 3\\to 3, 4\\to 4$\n2. $1\\to 1, 2\\to 2, 3\\to 4, 4\\to 3$\n3. $1\\to 2, 2\\to 1, 3\\to 3, 4\\to 4$\n4. $1\\to 2, 2\\to 1, 3\\to 4, 4\\to 3$\n5. $1\\to 3, 2\\to 4, 3\\to 1, 4\\to 2$\n6. $1\\to 3, 2\\to 4, 3\\to 2, 4\\to 1$\n7. $1\\to 4, 2\\to 3, 3\\to 1, 4\\to 2$\n8. $1\\to 4, 2\\to 3, 3\\to 2, 4\\to 1$\n\n**【样例 2】**\n\n见附件中的 `wormhole2.in/ans`。\n\n该样例的 $c = 2$，它满足第 2 个测试点的限制条件。\n\n**【样例 3】**\n\n见附件中的 `wormhole3.in/ans`。\n\n该样例的 $c = 5$，它满足第 5 个测试点的限制条件。\n\n**【样例 4】**\n\n见附件中的 `wormhole4.in/ans`。\n\n该样例的 $c = 7$，它满足第 7 个测试点的限制条件。\n\n**【样例 5】**\n\n见附件中的 `wormhole5.in/ans`。\n\n该样例的 $c = 9$，它满足第 9 个测试点的限制条件。\n\n**【样例 6】**\n\n见附件中的 `wormhole6.in/ans`。\n\n该样例的 $c = 11$，它满足第 11 个测试点的限制条件。\n\n**【样例 7】**\n\n见附件中的 `wormhole7.in/ans`。\n\n该样例的 $c = 15$，它满足第 15 个测试点的限制条件。\n\n**【样例 8】**\n\n见附件中的 `wormhole8.in/ans`。\n\n该样例的 $c = 17$，它满足第 17 个测试点的限制条件。\n\n**【样例 9】**\n\n见附件中的 `wormhole9.in/ans`。\n\n该样例的 $c = 20$，它满足第 20 个测试点的限制条件。\n\n**【样例 10】**\n\n见附件中的 `wormhole10.in/ans`。\n\n该样例的 $c = 22$，它满足第 22 个测试点的限制条件。\n\n**【子任务】**\n\n对于所有测试点，\n\n- $1\\le n \\le 2\\cdot 10^3$，$0 \\le m \\le 10^3$，$1 \\le k \\le 10^{15}$；\n- $1 \\le u,v \\le n$，$1 \\le w \\le m$；\n- 保证初始建造的 $mn$ 条虫洞构成一个好的建造方案。\n\n| 测试点编号 | $n$ | $m$ | $k$ |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 4$ | $\\le 5$ | $\\le 3$ |$ \\le 3$ |\n| $5\\sim 6$ | $\\le 2\\cdot 10^3$| $=0$ | $=1$|\n| $7\\sim 8$ | $\\le 10^2$ | $=1$| $=1$ |\n| $9\\sim 10$ | $\\le 10^2$ | $\\le 10$ | $=1$|\n| $11\\sim 14$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^3$|\n| $15\\sim 16$ | $\\le 10^2$ | $=0$ | $\\le 10^{15}$ |\n| $17\\sim 19$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^{15}$ |\n| $20\\sim 21$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^2$ |\n| $22\\sim 25$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^{15}$ |\n\n**【提示】**\n\n本题部分测试点输入规模较大，我们推荐你使用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 虫洞", "background": null, "description": "E 国有 $n$ 个城市，编号为 $1$ 至 $n$。为了让城市之间的来往更加便利，E 国的交通部想在 $n$ 个城市间建造一些虫洞。每条虫洞是一条**单向**的从某个城市到另一个城市的通道。允许通道的起点和终点是同一个城市，也允许两个城市之间有多个虫洞连接。\n\n为了区分虫洞的建造时间，交通部给每一条虫洞一个正整数的编号。\n\n我们称一种虫洞的建造方案是**好的**，若它满足如下四个条件：\n\n1. 存在一个非负整数 $d$ 使得每个城市恰好是 $d$ 条虫洞的起点，也恰好是 $d$ 条虫洞的终点。\n2. 对于每个城市而言，在以它为起点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n3. 对于每个城市而言，在以它为终点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n4. 任意选取一个城市 $u$ 和正整数 $1\\le j_1, j_2 \\le d$。设从 $u$ 出发，先经过一次编号为 $j_1$ 的虫洞，再经过一次编号为 $j_2$ 的虫洞，到达城市 $v_1$。设从 $u$ 出发，先经过一次编号为 $j_2$ 的虫洞，再经过一次编号为 $j_1$ 的虫洞，到达城市 $v_2$。则条件 $v_1=v_2$ 必定满足。\n\n特别地，不建造任何虫洞的方案也是好的。\n\n现在，建造师已建造了 $mn$ 条虫洞，且给了它们 $1\\sim m$ 的编号，**此时这样的建造方案是好的**。他想要新建造 $kn$ 条虫洞，并给它们 $(m+1)\\sim (m+k)$ 的编号。他必须保证这 $(m + k)n$ 条虫洞形成的建造方案仍然是好的。他想知道有多少种新建造 $kn$ 条虫洞的方法，使得这 $(m + k)n$ 条虫洞形成的建造方案是好的。\n\n由于答案很大，你只需要求出方案数除以 $998244353$ 的余数。", "inputFormat": "输入的第一行四个非负整数 $c, n, m, k$，其中 $c$ 表示测试点编号。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来 $nm$ 行，每行三个正整数 $u,v,w$，表示一条编号为 $w$ 的，起点为 $u$ 号城市，终点为 $v$ 号城市的虫洞。", "outputFormat": "输出一行整数，表示方案数除以 $998244353$ 的余数。", "hint": "**【样例 1 解释】**\n\n在该组样例中，已经建造的编号为 $1$ 的虫洞为 $1\\to 2,2\\to 1,3\\to 4,4\\to 3$。为了使 $8$ 条虫洞形成的建造方案是好的，新建造的编号为 $2$ 的虫洞可能有 $8$ 种情形：\n\n1. $1\\to 1, 2\\to 2, 3\\to 3, 4\\to 4$\n2. $1\\to 1, 2\\to 2, 3\\to 4, 4\\to 3$\n3. $1\\to 2, 2\\to 1, 3\\to 3, 4\\to 4$\n4. $1\\to 2, 2\\to 1, 3\\to 4, 4\\to 3$\n5. $1\\to 3, 2\\to 4, 3\\to 1, 4\\to 2$\n6. $1\\to 3, 2\\to 4, 3\\to 2, 4\\to 1$\n7. $1\\to 4, 2\\to 3, 3\\to 1, 4\\to 2$\n8. $1\\to 4, 2\\to 3, 3\\to 2, 4\\to 1$\n\n**【样例 2】**\n\n见附件中的 `wormhole2.in/ans`。\n\n该样例的 $c = 2$，它满足第 2 个测试点的限制条件。\n\n**【样例 3】**\n\n见附件中的 `wormhole3.in/ans`。\n\n该样例的 $c = 5$，它满足第 5 个测试点的限制条件。\n\n**【样例 4】**\n\n见附件中的 `wormhole4.in/ans`。\n\n该样例的 $c = 7$，它满足第 7 个测试点的限制条件。\n\n**【样例 5】**\n\n见附件中的 `wormhole5.in/ans`。\n\n该样例的 $c = 9$，它满足第 9 个测试点的限制条件。\n\n**【样例 6】**\n\n见附件中的 `wormhole6.in/ans`。\n\n该样例的 $c = 11$，它满足第 11 个测试点的限制条件。\n\n**【样例 7】**\n\n见附件中的 `wormhole7.in/ans`。\n\n该样例的 $c = 15$，它满足第 15 个测试点的限制条件。\n\n**【样例 8】**\n\n见附件中的 `wormhole8.in/ans`。\n\n该样例的 $c = 17$，它满足第 17 个测试点的限制条件。\n\n**【样例 9】**\n\n见附件中的 `wormhole9.in/ans`。\n\n该样例的 $c = 20$，它满足第 20 个测试点的限制条件。\n\n**【样例 10】**\n\n见附件中的 `wormhole10.in/ans`。\n\n该样例的 $c = 22$，它满足第 22 个测试点的限制条件。\n\n**【子任务】**\n\n对于所有测试点，\n\n- $1\\le n \\le 2\\cdot 10^3$，$0 \\le m \\le 10^3$，$1 \\le k \\le 10^{15}$；\n- $1 \\le u,v \\le n$，$1 \\le w \\le m$；\n- 保证初始建造的 $mn$ 条虫洞构成一个好的建造方案。\n\n| 测试点编号 | $n$ | $m$ | $k$ |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 4$ | $\\le 5$ | $\\le 3$ |$ \\le 3$ |\n| $5\\sim 6$ | $\\le 2\\cdot 10^3$| $=0$ | $=1$|\n| $7\\sim 8$ | $\\le 10^2$ | $=1$| $=1$ |\n| $9\\sim 10$ | $\\le 10^2$ | $\\le 10$ | $=1$|\n| $11\\sim 14$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^3$|\n| $15\\sim 16$ | $\\le 10^2$ | $=0$ | $\\le 10^{15}$ |\n| $17\\sim 19$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^{15}$ |\n| $20\\sim 21$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^2$ |\n| $22\\sim 25$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^{15}$ |\n\n**【提示】**\n\n本题部分测试点输入规模较大，我们推荐你使用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P10220", "type": "P", "difficulty": 6, "samples": [["3\n1 0\n1\n2 1\n1 1\n1\n2 1\n3 3\n3 2 1 2 1 2 1\n4 2 6 3 7 1 5 8", "1 2\n2 1\n2 4 6 3 5 8 7 1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 迷宫守卫", "background": "", "description": "Alice 拥有一座迷宫，这座迷宫可以抽象成一棵拥有 $2^n$ 个叶节点的满二叉树，总节点数目为 $(2^{n+1} - 1)$，依次编号为 $1 \\sim (2^{n+1} - 1)$。其中编号为 $2^n \\sim (2^{n+1} - 1)$ 的是叶节点，编号为 $1 \\sim (2^n - 1)$ 的是非叶节点，且非叶节点 $1 \\le u \\le (2^n - 1)$ 的左儿子编号为 $2u$，右儿子编号为 $(2u + 1)$。\n\n每个非叶节点都有一个石像守卫，初始时，所有石像守卫均在沉睡。唤醒 $u$ 点的石像守卫需要 $w_u$ 的魔力值。\n\n每个叶节点都有一个符文，$v$ 点的符文记作 $q_v$。**保证 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 构成 $1 \\sim 2^n$ 的排列**。\n\n探险者初始时持有空序列 $Q$，从节点 $1$ 出发，按照如下规则行动：\n\n- 到达叶节点 $v$ 时，将 $v$ 点的符文 $q_v$ 添加到序列 $Q$ 的末尾，然后返回父节点。\n- 到达非叶节点 $u$ 时：\n  - 若该点的石像守卫已被唤醒，则只能先前往左儿子，（从左儿子返回后）再前往右儿子，（从右儿子返回后）最后返回父节点。\n  - 若该点的石像守卫在沉睡，可以在以下二者中任选其一：\n    - 先前往左儿子，再前往右儿子，最后返回父节点。\n    - 先前往右儿子，再前往左儿子，最后返回父节点。\n\n返回节点 $1$ 时，探险结束。可以证明，探险者一定访问每个叶节点各一次，故此时 $Q$ 的长度为 $2^n$。\n\n探险者 Bob 准备进入迷宫，他希望探险结束时的 $Q$ 的字典序越小越好，与之相对，Alice 希望 $Q$ 的字典序越大越好。\n\n在 Bob 出发之前，Alice 可以选择一些魔力值花费之和不超过 $K$ 的石像守卫，并唤醒它们。Bob 出发时，他能够知道 Alice 唤醒了哪些神像。若**双方都采取最优策略**，求序列 $Q$ 的最终取值。\n\n对于两个长度为 $2^n$ 的序列 $Q_1,Q_2$，称 $Q_1$ 字典序小于 $Q_2$ 当且仅当以下条件成立：\n\n- $\\exist i \\in [1, 2^n]$ 满足以下两个条件：\n  - $\\forall 1 \\le j < i，Q_{1,j} = Q_{2,j}$；\n  - $Q_{1,i} < Q_{2,i}$。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次 $T$ 组测试数据。对于每组测试数据：\n\n- 第一行两个整数 $n,K$ 表示迷宫规模和 Alice 可用于唤醒石像守卫的魔力值上限。\n- 第二行 $(2^n - 1)$ 个整数 $w_1,w_2,\\cdots,w_{2^n-1}$ 表示唤醒各个石像守卫耗费的魔力值。\n- 第三行 $2^n$ 个整数 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 表示各个叶节点上的符文。", "outputFormat": "对于每组数据，输出一行 $2^n$ 个整数 $Q_1,Q_2,\\cdots,Q_{2^n}$，表示双方都采取最优策略的情况下，序列 $Q$ 的最终取值。", "hint": "**【样例 1 解释】**\n\n- 第一组数据中，Alice 无法唤醒石像守卫，Bob 可以选择先访问叶节点 $3$，再访问叶节点 $2$，得 $Q = \\{1, 2\\}$。\n- 第二组数据中，Alice 可以唤醒节点 $1$ 的石像守卫，Bob 只能先访问叶节点 $2$，再访问叶节点 $3$，得 $Q = \\{2, 1\\}$。\n- 第三组数据中，Alice 的最优策略是唤醒节点 $5, 6$ 的石像守卫。\n\n**【样例 2】**\n\n见附件中的 `maze2.in/ans`。\n\n该组数据满足特殊性质 A。\n\n**【样例 3】**\n\n见附件中的 `maze3.in/ans`。\n\n该组数据满足特殊性质 B。\n\n**【样例 4】**\n\n见附件中的 `maze4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `maze5.in/ans`。\n\n**【子任务】**\n\n设 $\\sum 2^n$ 表示单个测试点钟所有测试数据的 $2^n$ 的和。对于所有测试数据，保证\n\n- $1\\le T \\le 100$；\n- $1\\le n \\le 16$，$1 \\le \\sum 2^n \\le 10^5$；\n- $0\\le K \\le 10^{12}$\n- $\\forall 1 \\le u \\le (2^n-1)$，$0 \\le w_u \\le 10^{12}$；\n- $q_{2^n},q_{2^n+1},\\cdots,q_{2^{n+1}-1}$ 构成 $1\\sim 2^n$ 的排列。\n\n| 测试点编号 | $n\\le$ | $\\sum 2^n \\le$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 5$ | $4$ | $80$ | 无 |\n| $6$ | $6$ | $200$ | A |\n| $7\\sim 8$ | $6$ | $200$ | B |\n| $9\\sim 10$ | $6$ | $200$ | 无 |\n| $11$ | $11$ | $4000$ | A |\n| $12\\sim 13$ | $11$ | $4000$ | B |\n| $14\\sim 15$ | $11$ | $4000$ | 无 |\n| $16$ | $16$ | $10^5$ | A |\n| $17\\sim 18$ | $16$ | $10^5$ | B |\n| $19\\sim 20$ | $16$ | $10^5$ | 无 |\n\n特殊性质 A：$\\forall 2^n \\le v \\le (2^{n+1}-1)$，$q_v = (2^{n+1}-v)$。\n\n特殊性质 B：$\\forall 1 \\le u \\le (2^n-1)$，$w_u = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 迷宫守卫", "background": "", "description": "Alice 拥有一座迷宫，这座迷宫可以抽象成一棵拥有 $2^n$ 个叶节点的满二叉树，总节点数目为 $(2^{n+1} - 1)$，依次编号为 $1 \\sim (2^{n+1} - 1)$。其中编号为 $2^n \\sim (2^{n+1} - 1)$ 的是叶节点，编号为 $1 \\sim (2^n - 1)$ 的是非叶节点，且非叶节点 $1 \\le u \\le (2^n - 1)$ 的左儿子编号为 $2u$，右儿子编号为 $(2u + 1)$。\n\n每个非叶节点都有一个石像守卫，初始时，所有石像守卫均在沉睡。唤醒 $u$ 点的石像守卫需要 $w_u$ 的魔力值。\n\n每个叶节点都有一个符文，$v$ 点的符文记作 $q_v$。**保证 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 构成 $1 \\sim 2^n$ 的排列**。\n\n探险者初始时持有空序列 $Q$，从节点 $1$ 出发，按照如下规则行动：\n\n- 到达叶节点 $v$ 时，将 $v$ 点的符文 $q_v$ 添加到序列 $Q$ 的末尾，然后返回父节点。\n- 到达非叶节点 $u$ 时：\n  - 若该点的石像守卫已被唤醒，则只能先前往左儿子，（从左儿子返回后）再前往右儿子，（从右儿子返回后）最后返回父节点。\n  - 若该点的石像守卫在沉睡，可以在以下二者中任选其一：\n    - 先前往左儿子，再前往右儿子，最后返回父节点。\n    - 先前往右儿子，再前往左儿子，最后返回父节点。\n\n返回节点 $1$ 时，探险结束。可以证明，探险者一定访问每个叶节点各一次，故此时 $Q$ 的长度为 $2^n$。\n\n探险者 Bob 准备进入迷宫，他希望探险结束时的 $Q$ 的字典序越小越好，与之相对，Alice 希望 $Q$ 的字典序越大越好。\n\n在 Bob 出发之前，Alice 可以选择一些魔力值花费之和不超过 $K$ 的石像守卫，并唤醒它们。Bob 出发时，他能够知道 Alice 唤醒了哪些神像。若**双方都采取最优策略**，求序列 $Q$ 的最终取值。\n\n对于两个长度为 $2^n$ 的序列 $Q_1,Q_2$，称 $Q_1$ 字典序小于 $Q_2$ 当且仅当以下条件成立：\n\n- $\\exist i \\in [1, 2^n]$ 满足以下两个条件：\n  - $\\forall 1 \\le j < i，Q_{1,j} = Q_{2,j}$；\n  - $Q_{1,i} < Q_{2,i}$。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次 $T$ 组测试数据。对于每组测试数据：\n\n- 第一行两个整数 $n,K$ 表示迷宫规模和 Alice 可用于唤醒石像守卫的魔力值上限。\n- 第二行 $(2^n - 1)$ 个整数 $w_1,w_2,\\cdots,w_{2^n-1}$ 表示唤醒各个石像守卫耗费的魔力值。\n- 第三行 $2^n$ 个整数 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 表示各个叶节点上的符文。", "outputFormat": "对于每组数据，输出一行 $2^n$ 个整数 $Q_1,Q_2,\\cdots,Q_{2^n}$，表示双方都采取最优策略的情况下，序列 $Q$ 的最终取值。", "hint": "**【样例 1 解释】**\n\n- 第一组数据中，Alice 无法唤醒石像守卫，Bob 可以选择先访问叶节点 $3$，再访问叶节点 $2$，得 $Q = \\{1, 2\\}$。\n- 第二组数据中，Alice 可以唤醒节点 $1$ 的石像守卫，Bob 只能先访问叶节点 $2$，再访问叶节点 $3$，得 $Q = \\{2, 1\\}$。\n- 第三组数据中，Alice 的最优策略是唤醒节点 $5, 6$ 的石像守卫。\n\n**【样例 2】**\n\n见附件中的 `maze2.in/ans`。\n\n该组数据满足特殊性质 A。\n\n**【样例 3】**\n\n见附件中的 `maze3.in/ans`。\n\n该组数据满足特殊性质 B。\n\n**【样例 4】**\n\n见附件中的 `maze4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `maze5.in/ans`。\n\n**【子任务】**\n\n设 $\\sum 2^n$ 表示单个测试点钟所有测试数据的 $2^n$ 的和。对于所有测试数据，保证\n\n- $1\\le T \\le 100$；\n- $1\\le n \\le 16$，$1 \\le \\sum 2^n \\le 10^5$；\n- $0\\le K \\le 10^{12}$\n- $\\forall 1 \\le u \\le (2^n-1)$，$0 \\le w_u \\le 10^{12}$；\n- $q_{2^n},q_{2^n+1},\\cdots,q_{2^{n+1}-1}$ 构成 $1\\sim 2^n$ 的排列。\n\n| 测试点编号 | $n\\le$ | $\\sum 2^n \\le$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 5$ | $4$ | $80$ | 无 |\n| $6$ | $6$ | $200$ | A |\n| $7\\sim 8$ | $6$ | $200$ | B |\n| $9\\sim 10$ | $6$ | $200$ | 无 |\n| $11$ | $11$ | $4000$ | A |\n| $12\\sim 13$ | $11$ | $4000$ | B |\n| $14\\sim 15$ | $11$ | $4000$ | 无 |\n| $16$ | $16$ | $10^5$ | A |\n| $17\\sim 18$ | $16$ | $10^5$ | B |\n| $19\\sim 20$ | $16$ | $10^5$ | 无 |\n\n特殊性质 A：$\\forall 2^n \\le v \\le (2^{n+1}-1)$，$q_v = (2^{n+1}-v)$。\n\n特殊性质 B：$\\forall 1 \\le u \\le (2^n-1)$，$w_u = 1$。", "locale": "zh-CN"}}}
{"pid": "P10221", "type": "P", "difficulty": 7, "samples": [["2 1 1\n1 2", "666666672"], ["3 0 2\n", "1"], ["4 4 4\n1 2\n1 3\n1 4\n2 4", "937500007"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 重塑时光", "background": "", "description": "小 T 正在研究某段时间中所发生的事件。经观测，有 $n$ 个编号为 $1\\sim n$ 的事件在这段时间内按顺序依次发生，第 $i$ 个发生的是事件 $p_i$。这个描述事件发生顺序的排列 $p$ 可称为这段时间的**时间线**。\n\n突然，邪恶生物小 S 攻击了这条时间线，将这 $n$ 个事件的发生顺序 $p$ 变为了在所有长为 $n$ 的排列中等概率随机选取的一个排列。不仅如此，小 S 还用剪刀把时间线剪断，通过进行 $k$ 次操作，将排列 $p$ 分割成了 $(k + 1)$ 段。\n\n具体而言，在小 S 进行第 $i$ 次操作时，排列 $p$ 和之前所有插入的剪断点构成了一个长度为 $(n + i - 1)$ 的序列。该序列包括所有相邻元素之间和序列开头、末尾处共有 $(n + i)$ 个插入位置。小 S 将从这些插入位置中等概率随机选取一个位置，插入一个新的剪断点。最后，小 S 从最终被插入的 $k$ 个剪断点处把序列剪开，将排列 $p$ 分割成了 $(k + 1)$ 段序列。这 $(k + 1)$ 段序列中可能有空序列。\n\n为了拯救这条即将毁灭的时间线，小 T 决定把这 $(k + 1)$ 段序列按某种顺序重新拼接成一个长度为 $n$ 的排列，形成一条新的时间线。不过，由于事件之间存在一定的逻辑关系，事件的发生时间之间也存在一些先后顺序要求。经研究，共存在 $m$ 条先后顺序要求 $(u, v)$，要求事件 $u$ 的发生时间必须在事件 $v$ 之前。也就是说，$u$ 在时间线中的出现位置必须在 $v$ 之前。\n\n请你设计程序，计算有多大的概率，存在至少一种重新排列这 $(k + 1)$ 段序列，并将其重新拼接为一条新的时间线的方案，能够使所有的 $m$ 条事件发生时间之间的先后顺序要求都得到满足。\n\n为了避免精度误差，请你输出答案对 $10^9 +7$ 取模的结果。形式化地，可以证明答案可被表示为一最简分数 $\\frac{p}{q}$，请你输出一个 $x$ 满足 $0 \\le x < 10^9+7$ 且 $qx \\equiv p \\pmod {10^9+7}$。可以证明在题目条件下这样的 $x$ 总是存在。", "inputFormat": "第一行三个整数 $n, m, k$，分别描述事件的个数，事件之间先后顺序的条数以及小 S 进行的剪断操作次数。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条事件发生时间的先后顺序要求。", "outputFormat": "输出一行一个整数，表示所求答案。", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f8vh2qqo.png)\n\n假如事件 $1$ 的发生时间早于事件 $2$，那么无论怎样拼接都是可行方案，一定可以满足要求。否则，只有剪断时间线的位置位于事件 $1$ 和事件 $2$ 的发生时间之间，才能满足要求。答案为 $\\frac{1}{2}+\\frac{1}{2}\\times \\frac{1}{3}=\\frac{2}{3}$。\n\n**【样例 2 解释】**\n\n没有任何事件发生时间之间的先后顺序要求，因此无论怎样拼接都是可行的方案，答案为 $1$。\n\n**【样例 4】**\n\n见附件中的 `timeline4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `timeline5.in/ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n**【样例 6】**\n\n见附件中的 `timeline6.in/ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n**【样例 7】**\n\n见附件中的 `timeline7.in/ans`。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 15$，\n- $0 \\le m \\le \\frac{n(n-1)}{2}$，$0 \\le k \\le n$，\n- $1 \\le u < v \\le n$，保证不存在两对 $(u,v)$ 完全相同。\n\n| 测试点 | $n$ | $m$ | $k$ | 特殊性质 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $\\le 3$ | $=n-1$ | $=0$ | B |\n| $2$ | $\\le 5$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$| 无 |\n| $3,4$ | $\\le 14$ | $=n-1$| $\\le n$ | B |\n| $5$ | $\\le 14$ | $=n-1$ | $=0$ | A |\n| $6$ | $\\le 14$ | $=n-1$ | $\\le n$ | A |\n| $7$ | $\\le 14$ | $=0$ | $\\le n$ | 无 |\n| $8$ | $\\le 14$ | $=\\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $9,10$ | $\\le 9$ | $\\le 15$ | $\\le n$ | 无 |\n| $11$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $=0$ | 无 |\n| $12$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $13 \\sim 17$ | $\\le 14$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $18\\sim 20$ | $\\le 15$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n\n特殊性质 A：对于每个事件 $x$，至多存在一条先后顺序 $(u, v)$ 使得 $v = x$。\n\n特殊性质 B：对于所有先后顺序 $(u, v)$，均满足 $u = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 重塑时光", "background": "", "description": "小 T 正在研究某段时间中所发生的事件。经观测，有 $n$ 个编号为 $1\\sim n$ 的事件在这段时间内按顺序依次发生，第 $i$ 个发生的是事件 $p_i$。这个描述事件发生顺序的排列 $p$ 可称为这段时间的**时间线**。\n\n突然，邪恶生物小 S 攻击了这条时间线，将这 $n$ 个事件的发生顺序 $p$ 变为了在所有长为 $n$ 的排列中等概率随机选取的一个排列。不仅如此，小 S 还用剪刀把时间线剪断，通过进行 $k$ 次操作，将排列 $p$ 分割成了 $(k + 1)$ 段。\n\n具体而言，在小 S 进行第 $i$ 次操作时，排列 $p$ 和之前所有插入的剪断点构成了一个长度为 $(n + i - 1)$ 的序列。该序列包括所有相邻元素之间和序列开头、末尾处共有 $(n + i)$ 个插入位置。小 S 将从这些插入位置中等概率随机选取一个位置，插入一个新的剪断点。最后，小 S 从最终被插入的 $k$ 个剪断点处把序列剪开，将排列 $p$ 分割成了 $(k + 1)$ 段序列。这 $(k + 1)$ 段序列中可能有空序列。\n\n为了拯救这条即将毁灭的时间线，小 T 决定把这 $(k + 1)$ 段序列按某种顺序重新拼接成一个长度为 $n$ 的排列，形成一条新的时间线。不过，由于事件之间存在一定的逻辑关系，事件的发生时间之间也存在一些先后顺序要求。经研究，共存在 $m$ 条先后顺序要求 $(u, v)$，要求事件 $u$ 的发生时间必须在事件 $v$ 之前。也就是说，$u$ 在时间线中的出现位置必须在 $v$ 之前。\n\n请你设计程序，计算有多大的概率，存在至少一种重新排列这 $(k + 1)$ 段序列，并将其重新拼接为一条新的时间线的方案，能够使所有的 $m$ 条事件发生时间之间的先后顺序要求都得到满足。\n\n为了避免精度误差，请你输出答案对 $10^9 +7$ 取模的结果。形式化地，可以证明答案可被表示为一最简分数 $\\frac{p}{q}$，请你输出一个 $x$ 满足 $0 \\le x < 10^9+7$ 且 $qx \\equiv p \\pmod {10^9+7}$。可以证明在题目条件下这样的 $x$ 总是存在。", "inputFormat": "第一行三个整数 $n, m, k$，分别描述事件的个数，事件之间先后顺序的条数以及小 S 进行的剪断操作次数。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条事件发生时间的先后顺序要求。", "outputFormat": "输出一行一个整数，表示所求答案。", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f8vh2qqo.png)\n\n假如事件 $1$ 的发生时间早于事件 $2$，那么无论怎样拼接都是可行方案，一定可以满足要求。否则，只有剪断时间线的位置位于事件 $1$ 和事件 $2$ 的发生时间之间，才能满足要求。答案为 $\\frac{1}{2}+\\frac{1}{2}\\times \\frac{1}{3}=\\frac{2}{3}$。\n\n**【样例 2 解释】**\n\n没有任何事件发生时间之间的先后顺序要求，因此无论怎样拼接都是可行的方案，答案为 $1$。\n\n**【样例 4】**\n\n见附件中的 `timeline4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `timeline5.in/ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n**【样例 6】**\n\n见附件中的 `timeline6.in/ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n**【样例 7】**\n\n见附件中的 `timeline7.in/ans`。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 15$，\n- $0 \\le m \\le \\frac{n(n-1)}{2}$，$0 \\le k \\le n$，\n- $1 \\le u < v \\le n$，保证不存在两对 $(u,v)$ 完全相同。\n\n| 测试点 | $n$ | $m$ | $k$ | 特殊性质 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $\\le 3$ | $=n-1$ | $=0$ | B |\n| $2$ | $\\le 5$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$| 无 |\n| $3,4$ | $\\le 14$ | $=n-1$| $\\le n$ | B |\n| $5$ | $\\le 14$ | $=n-1$ | $=0$ | A |\n| $6$ | $\\le 14$ | $=n-1$ | $\\le n$ | A |\n| $7$ | $\\le 14$ | $=0$ | $\\le n$ | 无 |\n| $8$ | $\\le 14$ | $=\\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $9,10$ | $\\le 9$ | $\\le 15$ | $\\le n$ | 无 |\n| $11$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $=0$ | 无 |\n| $12$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $13 \\sim 17$ | $\\le 14$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $18\\sim 20$ | $\\le 15$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n\n特殊性质 A：对于每个事件 $x$，至多存在一条先后顺序 $(u, v)$ 使得 $v = x$。\n\n特殊性质 B：对于所有先后顺序 $(u, v)$，均满足 $u = 1$。", "locale": "zh-CN"}}}
{"pid": "P10222", "type": "P", "difficulty": 7, "samples": [["3 6\n0 2 2 3\n0 0\n0 0\n2 1\n1 3\n2 1\n1 3\n1 2\n2 1", "3\n3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024"], "title": "[省选联考 2024] 最长待机", "background": "", "description": "精灵程序员小 $\\omega$ 和 小 $\\aleph$ 拥有无限的寿命，因此在写代码之余，它们经常玩一些对抗游戏来打发时间。尽管如此，时间还是太多，于是它们发明了一款专用于消磨时间的游戏：最长待机。\n\n为了了解最长待机的规则，首先要了解精灵们使用的编程语言 Sleep++ 的规则：\n\n- 程序由 $n$ 个函数组成，第 $i(1 \\le i\\le n)$ 个函数具有种类 $e_i$ 和子函数编号序列 $Q_i = (Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i})$。$Q_i$ 可以为空，此时 $l_i$ 为 $0$。\n\n- $n$ 以及所有的 $e_i$ 和 $Q_i$ 可以由程序员任意给出，但它们需要满足以下所有条件：\n  - $n\\ge 1$；\n  - $\\forall 1 \\le i \\le n$，$e_i \\in \\{0, 1\\}$；\n  - $\\forall 1 \\le i \\le n$，$Q_i$ 中元素两两不同且均为 $[i + 1, n]$ 中的整数；\n  - $\\forall 2 \\le j \\le n$，**恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$**。\n\n- **调用**函数 $i(1 \\le i \\le n)$ 时，按顺序执行如下操作：\n  - 若 $e_i = 0$，令变量 $r_i$ 为 $1$；否则程序员需要立即为 $r_i$ 输入一个**正整数值**。\n  - 若 $Q_i$ 为空，程序等待 $r_i$ 秒；否则重复以下操作 $r_i$ 次：\n    * 按顺序**调用**编号为 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 的函数。\n\n- 若一个种类为 $1$ 的函数 $j$ 被调用多次，则其每次调用都需要输入 $r_j$。\n\n- 我们认为，在函数调用中，除了“等待 $r$ 秒”之外的操作不消耗任何时间，即函数调用、运行和输入都在瞬间完成。因此，一个时刻内程序员可能输入多个数。\n\n可以证明，调用任意一个 Sleep++ 程序的任意一个函数，无论如何设定输入，消耗的时间总是有限的。\n\n“最长待机”的游戏规则如下：\n\n- 小 $\\omega$ 和 小 $\\aleph$ 准备好各自的 Sleep++ 程序并选择各自程序中的一个函数。它们互相知晓对方程序的结构以及选择的函数。\n\n- 在时刻 $0$，小 $\\omega$ 和 小 $\\aleph$ 同时调用自己选择的函数，游戏开始。\n\n- 在时刻 $t$（$t \\ge 0$），双方可以看到对方在时刻 $0$ 至 $(t - 1)$ 输入的所有数字，并相应调整自己在时刻 $t$ 输入的数字，但双方无法得知对方在时刻 $t$ 输入的数字。\n\n- 函数调用先结束的一方输掉游戏，另一方胜利。两个调用同时结束算作平局。\n\n小 $\\omega$ 和 小 $\\aleph$ 都是绝顶聪明的，在它们眼中，如果有一方存在必胜策略，那么这局游戏是不公平的。换言之，双方都不存在必胜策略的游戏是公平的。\n\n小 $\\omega$ 写了一个 $n$ 个函数的 Sleep++ 程序并进行了 $m$ 次操作，操作有以下两种：\n\n- 操作一：给出 $k$，将 $e_k$ 修改为 $(1 - e_k)$；\n- 操作二：给出 $k$，与小 $\\aleph$ 玩一局“最长待机”，开始时小 $\\omega$ 会调用自己的函数 $k$。\n\n小 $\\aleph$ 信奉极简主义，它希望对于每一局游戏设计出函数个数最少的程序，使得选择其中某个函数能让这局游戏是公平的。你能帮它求出最少所需的函数个数吗？\n\n可以证明，小 $\\aleph$ 总是能设计一个程序并选择其中一个函数，使得游戏是公平的。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示小 $\\omega$ 的程序中函数的个数以及操作次数。\n\n接下来 $n$ 行，第 $i$ 行若干个整数，描述小 $\\omega$ 程序中的函数 $i$：\n\n- 前两个整数 $e_i, l_i$ 表示函数种类和子函数编号序列长度；\n- 接下来 $l_i$ 个整数 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 描述子函数编号序列。\n\n接下来 $m$ 行，第 $j$ 行两个整数 $o_j, k_j$ 描述一次操作，其中 $o_j = 1$ 表示操作一，$o_j = 2$ 表示操作二。", "outputFormat": "对于每个操作二输出一行一个整数，表示小 $\\aleph$ 的程序中最少所需的函数个数。", "hint": "**【样例 1 解释】**\n\n- 对于前两次游戏，小 $\\aleph$ 可以给出与小 $\\omega$ 完全一致的程序并在游戏开始时调用函数 $1$。可以证明不存在函数个数更少的方案。\n\n- 对于第三次游戏，小 $\\aleph$ 可以给出一个仅包含一个种类为 $1$ 的函数的程序，并在游戏开始时调用函数 $1$。\n  - 在时刻 $0$，小 $\\omega$ 输入其程序中的 $r_2$，小 $\\aleph$ 输入其程序中的 $r_1$。\n    * 注意：$r$ 变量在小 $\\omega$ 和小 $\\aleph$ 的程序之间是独立的，不会互相影响。\n  - 输入完成后，小 $\\omega$ 的程序在时刻 $(r_2 +1)$ 结束，小 $\\aleph$ 的程序在时刻 $r_1$ 结束。\n  - 由于两人在时刻 $0$ 互不知道对方的决策，不能保证 $(r_2 + 1)$ 和 $r_1$ 的大小关系，故双方均不存在必胜策略，这局游戏是公平的。\n\n**【样例 2】**\n\n见附件中的 `sleep2.in/ans`。\n\n该组数据满足特殊性质 AD。\n\n**【样例 3】**\n\n见附件中的 `sleep3.in/ans`。\n\n该组数据满足特殊性质 BD。\n\n**【样例 4】**\n\n见附件中的 `sleep4.in/ans`。\n\n该组数据满足特殊性质 D。\n\n**【样例 5】**\n\n见附件中的 `sleep5.in/ans`。\n\n该组数据满足特殊性质 C。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 5\\times 10^5$，$1 \\le m \\le 2\\times 10^5$；\n- $\\forall 1 \\le i \\le n$，$e_i\\in \\{0, 1\\}$，$0 \\le l_i <n$；\n- $\\forall 1 \\le i \\le n,1 \\le j \\le l_i$，$i < Q_{i,j} \\le n$；\n- $\\forall 1 \\le i \\le n, 1 \\le p < q \\le l_i$，$Q_{i,p}\\neq Q_{i,q}$；\n- $\\forall 2 \\le j \\le n$，恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$；\n- $\\forall 1 \\le j \\le m$，$1 \\le o_j \\le 2$，$1 \\le k_j \\le n$。\n\n| 测试点编号 | $n \\le $ | $m\\le $| 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1\\sim 2$ | $3$ | $24$ | 无 |\n| $3$ | $80$ | $400$ | AD |\n| $4$ | $80$ | $400$ | BD |\n| $5\\sim 6$ | $80$ | $400$ | D |\n| $7$ | $3\\times 10^5$ | $10^5$ | AD |\n| $8$ | $3\\times 10^5$ | $10^5$ | BD |\n| $9\\sim 10$ | $3\\times 10^5$ | $10^5$ | D |\n| $11$ | $3\\times 10^5$ | $10^5$ | A |\n| $12$ | $3\\times 10^5$ | $10^5$ | BC |\n| $13$ | $3\\times 10^5$ | $10^5$ | B |\n| $14\\sim 15$ | $3\\times 10^5$ | $10^5$ | C |\n| $16\\sim 17$ | $3\\times 10^5$ | $10^5$ | 无 |\n| $18\\sim 19$ | $5\\times 10^5$ | $2\\times 10^5$ | A |\n| $20$ | $5\\times 10^5$ | $2\\times 10^5$ | BC |\n| $21$ | $5\\times 10^5$ | $2\\times 10^5$ | B |\n| $22\\sim 23$ | $5\\times 10^5$ | $2\\times 10^5$ | C |\n| $24\\sim 25$ | $5\\times 10^5$ | $2\\times 10^5$ | 无 |\n\n特殊性质 A：保证\n\n- 任意时刻 $e_1$ 均为 $0$；\n- $\\forall 2\\le i \\le n$，$l_i \\le 1$；\n- 操作二的 $k$ 均为 $1$。\n\n特殊性质 B：保证\n\n- 操作二的 $k$ 满足当时的 $e_k$ 为 $1$。\n\n特殊性质 C：保证\n\n- $\\forall 2\\le i \\le n$，$i \\in Q_{\\lfloor \\frac{i}{2}\\rfloor}$；\n- $\\forall 1 \\le i \\le n$，序列 $Q_i$ 单调递增。\n\n特殊性质 D：保证\n\n- 操作二不超过 $10$ 个；\n- 操作二的 $k$ 均为 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 最长待机", "background": "", "description": "精灵程序员小 $\\omega$ 和 小 $\\aleph$ 拥有无限的寿命，因此在写代码之余，它们经常玩一些对抗游戏来打发时间。尽管如此，时间还是太多，于是它们发明了一款专用于消磨时间的游戏：最长待机。\n\n为了了解最长待机的规则，首先要了解精灵们使用的编程语言 Sleep++ 的规则：\n\n- 程序由 $n$ 个函数组成，第 $i(1 \\le i\\le n)$ 个函数具有种类 $e_i$ 和子函数编号序列 $Q_i = (Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i})$。$Q_i$ 可以为空，此时 $l_i$ 为 $0$。\n\n- $n$ 以及所有的 $e_i$ 和 $Q_i$ 可以由程序员任意给出，但它们需要满足以下所有条件：\n  - $n\\ge 1$；\n  - $\\forall 1 \\le i \\le n$，$e_i \\in \\{0, 1\\}$；\n  - $\\forall 1 \\le i \\le n$，$Q_i$ 中元素两两不同且均为 $[i + 1, n]$ 中的整数；\n  - $\\forall 2 \\le j \\le n$，**恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$**。\n\n- **调用**函数 $i(1 \\le i \\le n)$ 时，按顺序执行如下操作：\n  - 若 $e_i = 0$，令变量 $r_i$ 为 $1$；否则程序员需要立即为 $r_i$ 输入一个**正整数值**。\n  - 若 $Q_i$ 为空，程序等待 $r_i$ 秒；否则重复以下操作 $r_i$ 次：\n    * 按顺序**调用**编号为 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 的函数。\n\n- 若一个种类为 $1$ 的函数 $j$ 被调用多次，则其每次调用都需要输入 $r_j$。\n\n- 我们认为，在函数调用中，除了“等待 $r$ 秒”之外的操作不消耗任何时间，即函数调用、运行和输入都在瞬间完成。因此，一个时刻内程序员可能输入多个数。\n\n可以证明，调用任意一个 Sleep++ 程序的任意一个函数，无论如何设定输入，消耗的时间总是有限的。\n\n“最长待机”的游戏规则如下：\n\n- 小 $\\omega$ 和 小 $\\aleph$ 准备好各自的 Sleep++ 程序并选择各自程序中的一个函数。它们互相知晓对方程序的结构以及选择的函数。\n\n- 在时刻 $0$，小 $\\omega$ 和 小 $\\aleph$ 同时调用自己选择的函数，游戏开始。\n\n- 在时刻 $t$（$t \\ge 0$），双方可以看到对方在时刻 $0$ 至 $(t - 1)$ 输入的所有数字，并相应调整自己在时刻 $t$ 输入的数字，但双方无法得知对方在时刻 $t$ 输入的数字。\n\n- 函数调用先结束的一方输掉游戏，另一方胜利。两个调用同时结束算作平局。\n\n小 $\\omega$ 和 小 $\\aleph$ 都是绝顶聪明的，在它们眼中，如果有一方存在必胜策略，那么这局游戏是不公平的。换言之，双方都不存在必胜策略的游戏是公平的。\n\n小 $\\omega$ 写了一个 $n$ 个函数的 Sleep++ 程序并进行了 $m$ 次操作，操作有以下两种：\n\n- 操作一：给出 $k$，将 $e_k$ 修改为 $(1 - e_k)$；\n- 操作二：给出 $k$，与小 $\\aleph$ 玩一局“最长待机”，开始时小 $\\omega$ 会调用自己的函数 $k$。\n\n小 $\\aleph$ 信奉极简主义，它希望对于每一局游戏设计出函数个数最少的程序，使得选择其中某个函数能让这局游戏是公平的。你能帮它求出最少所需的函数个数吗？\n\n可以证明，小 $\\aleph$ 总是能设计一个程序并选择其中一个函数，使得游戏是公平的。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示小 $\\omega$ 的程序中函数的个数以及操作次数。\n\n接下来 $n$ 行，第 $i$ 行若干个整数，描述小 $\\omega$ 程序中的函数 $i$：\n\n- 前两个整数 $e_i, l_i$ 表示函数种类和子函数编号序列长度；\n- 接下来 $l_i$ 个整数 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 描述子函数编号序列。\n\n接下来 $m$ 行，第 $j$ 行两个整数 $o_j, k_j$ 描述一次操作，其中 $o_j = 1$ 表示操作一，$o_j = 2$ 表示操作二。", "outputFormat": "对于每个操作二输出一行一个整数，表示小 $\\aleph$ 的程序中最少所需的函数个数。", "hint": "**【样例 1 解释】**\n\n- 对于前两次游戏，小 $\\aleph$ 可以给出与小 $\\omega$ 完全一致的程序并在游戏开始时调用函数 $1$。可以证明不存在函数个数更少的方案。\n\n- 对于第三次游戏，小 $\\aleph$ 可以给出一个仅包含一个种类为 $1$ 的函数的程序，并在游戏开始时调用函数 $1$。\n  - 在时刻 $0$，小 $\\omega$ 输入其程序中的 $r_2$，小 $\\aleph$ 输入其程序中的 $r_1$。\n    * 注意：$r$ 变量在小 $\\omega$ 和小 $\\aleph$ 的程序之间是独立的，不会互相影响。\n  - 输入完成后，小 $\\omega$ 的程序在时刻 $(r_2 +1)$ 结束，小 $\\aleph$ 的程序在时刻 $r_1$ 结束。\n  - 由于两人在时刻 $0$ 互不知道对方的决策，不能保证 $(r_2 + 1)$ 和 $r_1$ 的大小关系，故双方均不存在必胜策略，这局游戏是公平的。\n\n**【样例 2】**\n\n见附件中的 `sleep2.in/ans`。\n\n该组数据满足特殊性质 AD。\n\n**【样例 3】**\n\n见附件中的 `sleep3.in/ans`。\n\n该组数据满足特殊性质 BD。\n\n**【样例 4】**\n\n见附件中的 `sleep4.in/ans`。\n\n该组数据满足特殊性质 D。\n\n**【样例 5】**\n\n见附件中的 `sleep5.in/ans`。\n\n该组数据满足特殊性质 C。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 5\\times 10^5$，$1 \\le m \\le 2\\times 10^5$；\n- $\\forall 1 \\le i \\le n$，$e_i\\in \\{0, 1\\}$，$0 \\le l_i <n$；\n- $\\forall 1 \\le i \\le n,1 \\le j \\le l_i$，$i < Q_{i,j} \\le n$；\n- $\\forall 1 \\le i \\le n, 1 \\le p < q \\le l_i$，$Q_{i,p}\\neq Q_{i,q}$；\n- $\\forall 2 \\le j \\le n$，恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$；\n- $\\forall 1 \\le j \\le m$，$1 \\le o_j \\le 2$，$1 \\le k_j \\le n$。\n\n| 测试点编号 | $n \\le $ | $m\\le $| 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1\\sim 2$ | $3$ | $24$ | 无 |\n| $3$ | $80$ | $400$ | AD |\n| $4$ | $80$ | $400$ | BD |\n| $5\\sim 6$ | $80$ | $400$ | D |\n| $7$ | $3\\times 10^5$ | $10^5$ | AD |\n| $8$ | $3\\times 10^5$ | $10^5$ | BD |\n| $9\\sim 10$ | $3\\times 10^5$ | $10^5$ | D |\n| $11$ | $3\\times 10^5$ | $10^5$ | A |\n| $12$ | $3\\times 10^5$ | $10^5$ | BC |\n| $13$ | $3\\times 10^5$ | $10^5$ | B |\n| $14\\sim 15$ | $3\\times 10^5$ | $10^5$ | C |\n| $16\\sim 17$ | $3\\times 10^5$ | $10^5$ | 无 |\n| $18\\sim 19$ | $5\\times 10^5$ | $2\\times 10^5$ | A |\n| $20$ | $5\\times 10^5$ | $2\\times 10^5$ | BC |\n| $21$ | $5\\times 10^5$ | $2\\times 10^5$ | B |\n| $22\\sim 23$ | $5\\times 10^5$ | $2\\times 10^5$ | C |\n| $24\\sim 25$ | $5\\times 10^5$ | $2\\times 10^5$ | 无 |\n\n特殊性质 A：保证\n\n- 任意时刻 $e_1$ 均为 $0$；\n- $\\forall 2\\le i \\le n$，$l_i \\le 1$；\n- 操作二的 $k$ 均为 $1$。\n\n特殊性质 B：保证\n\n- 操作二的 $k$ 满足当时的 $e_k$ 为 $1$。\n\n特殊性质 C：保证\n\n- $\\forall 2\\le i \\le n$，$i \\in Q_{\\lfloor \\frac{i}{2}\\rfloor}$；\n- $\\forall 1 \\le i \\le n$，序列 $Q_i$ 单调递增。\n\n特殊性质 D：保证\n\n- 操作二不超过 $10$ 个；\n- 操作二的 $k$ 均为 $1$。", "locale": "zh-CN"}}}
{"pid": "P10223", "type": "P", "difficulty": 2, "samples": [["3\n1 2 3\n50 10 20", "1. Kod01 (6)\n2. Kod03 (3)\n3. Kod02 (3)"], ["5\n5 2 4 1 3\n4 5 2 1 3", "1. Kod02 (9)\n2. Kod05 (8)\n3. Kod01 (6)\n4. Kod04 (4)\n5. Kod03 (3)"], ["7\n6 3 2 1 5 4 7\n200 56 11 0 13 105 12", "1. Kod06 (13)\n2. Kod01 (11)\n3. Kod02 (10)\n4. Kod03 (8)\n5. Kod05 (7)\n6. Kod07 (4)\n7. Kod04 (3)"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Eurokod", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T1「[Eurokod](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Eurokod，全球美丽与高可读性代码竞赛，今年第一次举行！\n\n共有 $n$ 名参赛者参加了竞赛，他们被依次编号为 $1\\sim n$。每名参赛者已经编写了一份代码。\n\n他们的代码将由一组计算机科学家进行评估。这组计算机科学家分为组长与其他成员，组长将用一种方法给出评分，其他成员则用另一种方法给出评分。\n\n**组长评分：**\n\n组长按照他的想法，将代码按照美丽程度从大到小排序。最美丽的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**其他成员评分：**\n\n每名其他成员将投票选出自己认为最美丽的代码。在所有其他成员投票后，所有代码按照投票人数从高到低排序。得票数最多的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**总分：**\n\n一份代码的总分由组长评分与其他成员评分加和得到。\n\n你的任务是按照得分降序输出代码的编号。如果两份代码得分相同，其他成员评分高者列前。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 50$），表示参赛者的数目。\n\n第二行包含 $n$ 个整数 $a_i$（$1 \\le a_i \\le n$），第 $i$ 个整数表示组长评为第 $i$ 名代码的编号。按照美丽程度从高到低给出。保证 $1\\sim n$ 恰好出现一次。\n\n第三行包含 $n$ 个整数 $b_i$（$0 \\le b_i \\le 200$），第 $i$ 个整数表示第 $i$ 份代码收获的其他成员票数。保证没有两份代码获得了同样的票数。", "outputFormat": "输出 $n$ 行，按照分数降序输出代码编号。\n\n每一行的输出应当符合 `[rank]. Kod[label] ([number of points])` 的格式。其中，`[rank]` 表示代码的排名，`[label]` 是用含前导零的两位十位数表示的代码编号，`[number of points]` 是代码获得的总分。\n\n例如，$3$ 号代码以 $12$ 分总分获得第一名，那么你应该在第一行输出 `1. Kod03 (12)`。", "hint": "### 样例解释 1\n\nKod03 和 Kod02 得分相同，但 Kod03 从其他成员处获得了更高的分数，所以 Kod03 排名列前。\n\n### 样例解释 2\n\n组长给予 Kod05 最高的排名，它因此获得 $n=5$ 分。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n|:--:|:--:|:--:|\n| 1|17|对于每一份代码，其他成员投的票数与其他成员评分在数值上相同。同时，没有两份代码总分相同。|\n|2|19|没有两份代码总分相同。|\n|3|14|无特殊限制。|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Eurokod", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T1「[Eurokod](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Eurokod，全球美丽与高可读性代码竞赛，今年第一次举行！\n\n共有 $n$ 名参赛者参加了竞赛，他们被依次编号为 $1\\sim n$。每名参赛者已经编写了一份代码。\n\n他们的代码将由一组计算机科学家进行评估。这组计算机科学家分为组长与其他成员，组长将用一种方法给出评分，其他成员则用另一种方法给出评分。\n\n**组长评分：**\n\n组长按照他的想法，将代码按照美丽程度从大到小排序。最美丽的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**其他成员评分：**\n\n每名其他成员将投票选出自己认为最美丽的代码。在所有其他成员投票后，所有代码按照投票人数从高到低排序。得票数最多的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**总分：**\n\n一份代码的总分由组长评分与其他成员评分加和得到。\n\n你的任务是按照得分降序输出代码的编号。如果两份代码得分相同，其他成员评分高者列前。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 50$），表示参赛者的数目。\n\n第二行包含 $n$ 个整数 $a_i$（$1 \\le a_i \\le n$），第 $i$ 个整数表示组长评为第 $i$ 名代码的编号。按照美丽程度从高到低给出。保证 $1\\sim n$ 恰好出现一次。\n\n第三行包含 $n$ 个整数 $b_i$（$0 \\le b_i \\le 200$），第 $i$ 个整数表示第 $i$ 份代码收获的其他成员票数。保证没有两份代码获得了同样的票数。", "outputFormat": "输出 $n$ 行，按照分数降序输出代码编号。\n\n每一行的输出应当符合 `[rank]. Kod[label] ([number of points])` 的格式。其中，`[rank]` 表示代码的排名，`[label]` 是用含前导零的两位十位数表示的代码编号，`[number of points]` 是代码获得的总分。\n\n例如，$3$ 号代码以 $12$ 分总分获得第一名，那么你应该在第一行输出 `1. Kod03 (12)`。", "hint": "### 样例解释 1\n\nKod03 和 Kod02 得分相同，但 Kod03 从其他成员处获得了更高的分数，所以 Kod03 排名列前。\n\n### 样例解释 2\n\n组长给予 Kod05 最高的排名，它因此获得 $n=5$ 分。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n|:--:|:--:|:--:|\n| 1|17|对于每一份代码，其他成员投的票数与其他成员评分在数值上相同。同时，没有两份代码总分相同。|\n|2|19|没有两份代码总分相同。|\n|3|14|无特殊限制。|", "locale": "zh-CN"}}}
{"pid": "P10224", "type": "P", "difficulty": 4, "samples": [["3 1\n3 7 0\n6 11 3\n10 13 5\n1", "6"], ["3 2\n5 10 3\n3 6 1\n1 5 0\n0 3", "5 8"], ["1 3\n3 3 3\n0 1 2", "0 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Vrsar", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T2「[Vrsar](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vrsar 是一个由 $n$ 座小山丘组成的海滨小镇。惊人地，从海岸看去，$n$ 座山丘排成一列，第 $i$ 座山丘到海岸的距离为 $x_i$ 米。在每座山丘顶上各有一个溜冰场。所有溜冰场每天同时开放，但它们的关闭时间是不同的。第 $i$ 座溜冰场开放 $t_i$ 分钟。\n\nIva 和 Mia 已经来到了 Vrsar，他们将在这里停留 $m$ 天。Iva 和 Mia 热爱溜冰，他们希望在 Vrsar 停留的每一天都以溜冰度过。在第 $i$ 天的开始，他们距离海岸 $a_i$ 米。当滑雪场开放的同时，他们开始他们的溜冰之旅。他们需要走去滑雪场，走路的速度为每分钟 $1$ 米。\n\n他们的身体非常好，因此他们不需要额外时间来爬山。一旦他们到达山顶的滑雪场，他们可以滑任意长的时间，直到滑雪场关闭。然而，下山并不像上山一样容易，因为下雨，山路非常湿滑，他们需要消耗 $s_i$ 的时间走下第 $i$ 座山。从一座山上下来后，他们可以前往另一座山。\n\nIva 和 Mia 想知道每天他们最长可以滑多久的雪。每天他们可以访问任意多座滑雪场。因为他们想用尽可能多的时间滑雪，用尽可能少的时间计算，所以他们向你寻求帮助。帮助他们解决这个问题。\n\n请注意：如果 Iva 和 Mia 早晨出发的位置就有一座山，他们在山脚。\n", "inputFormat": "第一行包含两个整数 $n,m$（$1 \\le n,m \\le 10^5$），表示山的数量和天数。\n\n接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i,t_i,s_i$（$0 \\le x_i,t_i,s_i \\le 10^9$），分别表示第 $i$ 座山到海岸的距离、滑雪场的关闭时间和下山所需的时间。\n\n第三行包含 $m$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$），表示 Iva 和 Mia 第 $i$ 天出发时到海岸的距离。", "outputFormat": "输出一行 $m$ 个整数，第 $i$ 个整数表示第 $i$ 天 Iva 和 Mia 可以滑雪的最长时间。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swsv3bec.png)\n\nIva 和 Mia 在位置 $1$ 出发，走 $2$ 分钟到位置 $3$ 的山，并滑雪 $5$ 分钟。接着花费 $0$ 分钟时间下山，继续走 $3$ 分钟时间到位置 $6$ 山上的滑雪场，滑雪 $1$ 分钟。\n\n他们一共滑雪 $6$ 分钟。\n\n\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 8 | $n,m \\le 10$ |\n| 2 | 17 | $m=1,a_1=0$ |\n| 3 | 19 | $n,m \\le 1000$ |\n| 4 |  26 | 无特殊限制。|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Vrsar", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T2「[Vrsar](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vrsar 是一个由 $n$ 座小山丘组成的海滨小镇。惊人地，从海岸看去，$n$ 座山丘排成一列，第 $i$ 座山丘到海岸的距离为 $x_i$ 米。在每座山丘顶上各有一个溜冰场。所有溜冰场每天同时开放，但它们的关闭时间是不同的。第 $i$ 座溜冰场开放 $t_i$ 分钟。\n\nIva 和 Mia 已经来到了 Vrsar，他们将在这里停留 $m$ 天。Iva 和 Mia 热爱溜冰，他们希望在 Vrsar 停留的每一天都以溜冰度过。在第 $i$ 天的开始，他们距离海岸 $a_i$ 米。当滑雪场开放的同时，他们开始他们的溜冰之旅。他们需要走去滑雪场，走路的速度为每分钟 $1$ 米。\n\n他们的身体非常好，因此他们不需要额外时间来爬山。一旦他们到达山顶的滑雪场，他们可以滑任意长的时间，直到滑雪场关闭。然而，下山并不像上山一样容易，因为下雨，山路非常湿滑，他们需要消耗 $s_i$ 的时间走下第 $i$ 座山。从一座山上下来后，他们可以前往另一座山。\n\nIva 和 Mia 想知道每天他们最长可以滑多久的雪。每天他们可以访问任意多座滑雪场。因为他们想用尽可能多的时间滑雪，用尽可能少的时间计算，所以他们向你寻求帮助。帮助他们解决这个问题。\n\n请注意：如果 Iva 和 Mia 早晨出发的位置就有一座山，他们在山脚。\n", "inputFormat": "第一行包含两个整数 $n,m$（$1 \\le n,m \\le 10^5$），表示山的数量和天数。\n\n接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i,t_i,s_i$（$0 \\le x_i,t_i,s_i \\le 10^9$），分别表示第 $i$ 座山到海岸的距离、滑雪场的关闭时间和下山所需的时间。\n\n第三行包含 $m$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$），表示 Iva 和 Mia 第 $i$ 天出发时到海岸的距离。", "outputFormat": "输出一行 $m$ 个整数，第 $i$ 个整数表示第 $i$ 天 Iva 和 Mia 可以滑雪的最长时间。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swsv3bec.png)\n\nIva 和 Mia 在位置 $1$ 出发，走 $2$ 分钟到位置 $3$ 的山，并滑雪 $5$ 分钟。接着花费 $0$ 分钟时间下山，继续走 $3$ 分钟时间到位置 $6$ 山上的滑雪场，滑雪 $1$ 分钟。\n\n他们一共滑雪 $6$ 分钟。\n\n\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 8 | $n,m \\le 10$ |\n| 2 | 17 | $m=1,a_1=0$ |\n| 3 | 19 | $n,m \\le 1000$ |\n| 4 |  26 | 无特殊限制。|", "locale": "zh-CN"}}}
{"pid": "P10225", "type": "P", "difficulty": 3, "samples": [["5\n3 5 2 4 1\n3 2 5 1 4\n", "2\n"], ["5\n3 1 2 5 4\n4 2 3 1 5\n", "4\n"], ["3\n3 2 1\n1 2 3\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "2023", "COCI（克罗地亚）", "Dilworth 定理"], "title": "[COCI 2023/2024 #3] Milano C.le", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T3「[Milano C.le](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Silvia 目前在米兰中央车站，她注意到车站有很多站台。她觉得站台数量太多了，所以她打算统计有多少真正需要的站台。\n\nSilvia 同样注意到这个车站的一个有趣的事实：出发和到达时刻表每两天就会重复一次，并且时刻表满足所有 $n$ 列火车在一天到达车站，并且在另一天离开。注意按这种方式，没有火车会在所有火车都到达之前离开。\n\n车站的站台足够长，可以满足所有 $n$ 列火车都能在同一站台停成一列。然而，如果火车 $x$ 先进入站台，然后 $y$ 进入同一站台，则火车 $x$ 不可以在火车 $y$ 离开站台之前离开。\n\nSilvia 想知道在不存在由于排在某列火车前面的火车还没离开导致这列火车无法离开的情况下，最少需要多少站台可以使所有火车都停下。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 2\\cdot 10^5)$，表示火车的数量。\n\n第二行包含 $n$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站。序列 $(a_i)$ 是一个排列。\n\n第三行包含 $n$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示第 $i$ 列火车在第二天第 $b_i$ 个离开车站。序列 $(b_i)$ 是一个排列。", "outputFormat": "输出一行一个整数，表示最少需要多少个站台。", "hint": "### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ol0mhxg.png)\n\n上图展示了一个样例二中站台上可能的列车调度情况。列车上 $(i:a_i/b_i)$ 的标签表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站，然后在第二天第 $b_i$ 个离开车站。火车 $(2:1/2)$ 不能比火车 $(4:5/1)$ 更早离开车站。\n\n### 样例解释 3\n\n所有火车均可在同一站台排成一列，没有任何问题。\n\n### 子任务\n\n| 子任务 |               附加限制               | 分值 |\n| :--------: | :----------------------------------: | :--: |\n|    $1$     |              $n\\le 10$               | $21$ |\n|    $2$     | 最小所需站台数要么是 $1$，要么是 $2$ | $18$ |\n|    $3$     |            $n\\le 1\\ 000$             | $31$ |\n|    $4$     |              无附加限制              | $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Milano C.le", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T3「[Milano C.le](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Silvia 目前在米兰中央车站，她注意到车站有很多站台。她觉得站台数量太多了，所以她打算统计有多少真正需要的站台。\n\nSilvia 同样注意到这个车站的一个有趣的事实：出发和到达时刻表每两天就会重复一次，并且时刻表满足所有 $n$ 列火车在一天到达车站，并且在另一天离开。注意按这种方式，没有火车会在所有火车都到达之前离开。\n\n车站的站台足够长，可以满足所有 $n$ 列火车都能在同一站台停成一列。然而，如果火车 $x$ 先进入站台，然后 $y$ 进入同一站台，则火车 $x$ 不可以在火车 $y$ 离开站台之前离开。\n\nSilvia 想知道在不存在由于排在某列火车前面的火车还没离开导致这列火车无法离开的情况下，最少需要多少站台可以使所有火车都停下。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 2\\cdot 10^5)$，表示火车的数量。\n\n第二行包含 $n$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站。序列 $(a_i)$ 是一个排列。\n\n第三行包含 $n$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示第 $i$ 列火车在第二天第 $b_i$ 个离开车站。序列 $(b_i)$ 是一个排列。", "outputFormat": "输出一行一个整数，表示最少需要多少个站台。", "hint": "### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ol0mhxg.png)\n\n上图展示了一个样例二中站台上可能的列车调度情况。列车上 $(i:a_i/b_i)$ 的标签表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站，然后在第二天第 $b_i$ 个离开车站。火车 $(2:1/2)$ 不能比火车 $(4:5/1)$ 更早离开车站。\n\n### 样例解释 3\n\n所有火车均可在同一站台排成一列，没有任何问题。\n\n### 子任务\n\n| 子任务 |               附加限制               | 分值 |\n| :--------: | :----------------------------------: | :--: |\n|    $1$     |              $n\\le 10$               | $21$ |\n|    $2$     | 最小所需站台数要么是 $1$，要么是 $2$ | $18$ |\n|    $3$     |            $n\\le 1\\ 000$             | $31$ |\n|    $4$     |              无附加限制              | $40$ |", "locale": "zh-CN"}}}
{"pid": "P10226", "type": "P", "difficulty": 6, "samples": [["3 1\n2\n3\n1 2\n1 3\n", "4\n1 1\n"], ["9 4\n2 3 4 6\n4 5 8 9\n1 2\n1 3\n3 4\n3 5\n5 6\n1 7\n7 8\n7 9\n", "18\n3 1 4 2 2 4 1 3\n"], ["10 5\n3 5 6 7 8\n1 2 4 9 10\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n", "24\n4 4 5 5 3 3 2 2 1 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Restorani", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T4「[Restorani](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "来到塞格德，Malnar 先生像通常一样，必须了解当地文化，品尝所有传统餐点、特色美食和当地饮料。\n\n我们可以把塞格德想象成由 $n - 1$ 条双向道路连接的 $n$ 个景点，这些景点的编号从 $1$ 到 $n$。这样，每一对景点之间都有一条路径。令人惊奇的是，Malnar 先生走过每条道路正好需要一分钟。在景点行走的时间可以忽略不计。\n\nMalnar 先生有一份他想去的 $m$ 家餐厅的清单。它由 $m$ 个正整数组成，其中第 $i$ 个数表示第 $i$ 个餐厅在哪个景点附近。\n\n一个问题是 Malnar 先生在餐厅用餐后，必须马上去甜品店吃冰淇淋。另一个问题是，他拒绝两次光顾同一家甜品店。\n\n幸运的是他有备而来，因为他知道 $m$ 家甜品店，这些甜品店的位置是由 $m$ 个正整数组成的列表，其中第 $i$ 个数字代表第 $i$ 家甜品店在这个景点附近。\n\nMalnar 先生旅途劳累，不想走更多的路，因此他请你计算一下他需要走多少路，并提供去餐厅和甜品店的顺序，这样他就可以在没有帮助的情况下穿梭于餐厅和甜品店之间了。\n\nMalnar 先生目前在景点 $1$，并且必须在最后回到景点 $1$。", "inputFormat": "第一行包含整数 $n$ 和 $m\\ (1\\le m\\le n\\le 3\\cdot 10^5)$，分别表示景点个数和餐厅/甜品店个数。\n\n第二行包含 $m$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示餐厅清单。\n\n第二行包含 $m$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示甜品店清单。\n\n接下来 $n-1$ 行，每行两个整数 $x_i$ 和 $y_i\\ (1\\le x_i,y_i\\le n)$，表示景点 $x_i$ 和 $y_i$ 之间有一条道路。", "outputFormat": "第一行输出 $t$，表示 Malnar 先生为了去所有餐厅和甜品店，并最后返回景点 $1$ 的最短用时。\n\n第二行输出 $2m$ 个整数 $v_i$，表示去餐厅和甜品店的顺序。\n\n在奇数位置的数表示餐馆，这些数必须组成前 $m$ 个正整数的排列。在偶数位置的数表示甜品店，这些数也必须组成前 $m$ 个正整数的排列。\n\n按上述顺序去景点并返回开始位置所经历的时间必须为最短时间 $t$。\n\n如果有多个最优顺序，输出任意一个均可。", "hint": "### 样例解释 1\n\nMalnar 先生首先走一分钟前往唯一在景点 $2$ 的餐厅，然后走两分钟到唯一在景点 $3$ 的甜品店，然后花一分钟走回景点 $1$。Malnar 先生总共会花 $1+2+1=4$ 分钟。\n\n### 样例解释 2\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $4$ 的餐厅（$2$ 分钟），在景点 $4$ 的甜品店（$0$ 分钟），在景点 $6$ 的餐厅（$3$ 分钟），在景点 $5$ 的甜品店（$1$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $9$ 的甜品店（$3$ 分钟），在景点 $2$ 的餐厅（$3$ 分钟），在景点 $8$ 的甜品店（$3$ 分钟）。在景点 $8$ 处的甜品店吃完冰淇淋后，他返回景点 $1$（$2$ 分钟）。Malnar 先生一共走了 $2+0+3+1+1+3+3+3+2=18$ 分钟。\n\n### 样例解释 3\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $7$ 的餐厅（$6$ 分钟），在景点 $9$ 的甜品店（$2$ 分钟），在景点 $8$ 的餐厅（$1$ 分钟），在景点 $10$ 的甜品店（$2$ 分钟），在景点 $6$ 的餐厅（$4$ 分钟），在景点 $4$ 的甜品店（$2$ 分钟），在景点 $5$ 的餐厅（$1$ 分钟），在景点 $2$ 的甜品店（$3$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $1$ 的甜品店（$2$ 分钟）。在吃完最后的冰淇淋后，他已经在景点 $1$ 所以他不会移动。Malnar 先生一共走了 $24$ 分钟。\n\n### 子任务\n\n| 子任务编号 |                附加限制                | 分值 |\n| :--------: | :------------------------------------: | :--: |\n|    $1$     |         $n\\le 5\\ 000,m\\le 10$          | $18$ |\n|    $2$     | $\\forall i=1,\\ldots,n-1,x_i=i,y_i=i+1$ | $18$ |\n|    $3$     |             $n\\le 5\\ 000$              | $27$ |\n|    $4$     |               无附加限制               | $37$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Restorani", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T4「[Restorani](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "来到塞格德，Malnar 先生像通常一样，必须了解当地文化，品尝所有传统餐点、特色美食和当地饮料。\n\n我们可以把塞格德想象成由 $n - 1$ 条双向道路连接的 $n$ 个景点，这些景点的编号从 $1$ 到 $n$。这样，每一对景点之间都有一条路径。令人惊奇的是，Malnar 先生走过每条道路正好需要一分钟。在景点行走的时间可以忽略不计。\n\nMalnar 先生有一份他想去的 $m$ 家餐厅的清单。它由 $m$ 个正整数组成，其中第 $i$ 个数表示第 $i$ 个餐厅在哪个景点附近。\n\n一个问题是 Malnar 先生在餐厅用餐后，必须马上去甜品店吃冰淇淋。另一个问题是，他拒绝两次光顾同一家甜品店。\n\n幸运的是他有备而来，因为他知道 $m$ 家甜品店，这些甜品店的位置是由 $m$ 个正整数组成的列表，其中第 $i$ 个数字代表第 $i$ 家甜品店在这个景点附近。\n\nMalnar 先生旅途劳累，不想走更多的路，因此他请你计算一下他需要走多少路，并提供去餐厅和甜品店的顺序，这样他就可以在没有帮助的情况下穿梭于餐厅和甜品店之间了。\n\nMalnar 先生目前在景点 $1$，并且必须在最后回到景点 $1$。", "inputFormat": "第一行包含整数 $n$ 和 $m\\ (1\\le m\\le n\\le 3\\cdot 10^5)$，分别表示景点个数和餐厅/甜品店个数。\n\n第二行包含 $m$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示餐厅清单。\n\n第二行包含 $m$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示甜品店清单。\n\n接下来 $n-1$ 行，每行两个整数 $x_i$ 和 $y_i\\ (1\\le x_i,y_i\\le n)$，表示景点 $x_i$ 和 $y_i$ 之间有一条道路。", "outputFormat": "第一行输出 $t$，表示 Malnar 先生为了去所有餐厅和甜品店，并最后返回景点 $1$ 的最短用时。\n\n第二行输出 $2m$ 个整数 $v_i$，表示去餐厅和甜品店的顺序。\n\n在奇数位置的数表示餐馆，这些数必须组成前 $m$ 个正整数的排列。在偶数位置的数表示甜品店，这些数也必须组成前 $m$ 个正整数的排列。\n\n按上述顺序去景点并返回开始位置所经历的时间必须为最短时间 $t$。\n\n如果有多个最优顺序，输出任意一个均可。", "hint": "### 样例解释 1\n\nMalnar 先生首先走一分钟前往唯一在景点 $2$ 的餐厅，然后走两分钟到唯一在景点 $3$ 的甜品店，然后花一分钟走回景点 $1$。Malnar 先生总共会花 $1+2+1=4$ 分钟。\n\n### 样例解释 2\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $4$ 的餐厅（$2$ 分钟），在景点 $4$ 的甜品店（$0$ 分钟），在景点 $6$ 的餐厅（$3$ 分钟），在景点 $5$ 的甜品店（$1$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $9$ 的甜品店（$3$ 分钟），在景点 $2$ 的餐厅（$3$ 分钟），在景点 $8$ 的甜品店（$3$ 分钟）。在景点 $8$ 处的甜品店吃完冰淇淋后，他返回景点 $1$（$2$ 分钟）。Malnar 先生一共走了 $2+0+3+1+1+3+3+3+2=18$ 分钟。\n\n### 样例解释 3\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $7$ 的餐厅（$6$ 分钟），在景点 $9$ 的甜品店（$2$ 分钟），在景点 $8$ 的餐厅（$1$ 分钟），在景点 $10$ 的甜品店（$2$ 分钟），在景点 $6$ 的餐厅（$4$ 分钟），在景点 $4$ 的甜品店（$2$ 分钟），在景点 $5$ 的餐厅（$1$ 分钟），在景点 $2$ 的甜品店（$3$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $1$ 的甜品店（$2$ 分钟）。在吃完最后的冰淇淋后，他已经在景点 $1$ 所以他不会移动。Malnar 先生一共走了 $24$ 分钟。\n\n### 子任务\n\n| 子任务编号 |                附加限制                | 分值 |\n| :--------: | :------------------------------------: | :--: |\n|    $1$     |         $n\\le 5\\ 000,m\\le 10$          | $18$ |\n|    $2$     | $\\forall i=1,\\ldots,n-1,x_i=i,y_i=i+1$ | $18$ |\n|    $3$     |             $n\\le 5\\ 000$              | $27$ |\n|    $4$     |               无附加限制               | $37$ |", "locale": "zh-CN"}}}
