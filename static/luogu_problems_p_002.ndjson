{"pid": "P1501", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2\n2 3\n* 1 3 4\n/ 1 1", "4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["集训队互测", "动态树 LCT"], "title": "[国家集训队] Tree II", "background": "", "description": "一棵 $n$ 个点的树，每个点的初始权值为 $1$。  \n对于这棵树有 $q$ 个操作，每个操作为以下四种操作之一：\n\n- `+ u v c`：将 $u$ 到 $v$ 的路径上的点的权值都加上自然数 $c$；\n- `- u1 v1 u2 v2`：将树中原有的边 $(u_1,v_1)$ 删除，加入一条新边 $(u_2,v_2)$，保证操作完之后仍然是一棵树；\n- `* u v c`：将 $u$ 到 $v$ 的路径上的点的权值都乘上自然数 $c$；\n- `/ u v`：询问 $u$ 到 $v$ 的路径上的点的权值和，将答案对 $51061$ 取模。\n", "inputFormat": "第一行两个整数 $n,q$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，描述这棵树的每条边。\n\n接下来 $q$ 行，每行描述一个操作。\n", "outputFormat": "对于每个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】   \n对于 $10\\%$ 的数据，$1\\le n,q \\le 2000$；   \n另有 $15\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作，并且初始树为一条链；    \n另有 $35\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作；  \n对于 $100\\%$ 的数据，$1\\le n,q \\le 10^5$，$0\\le c \\le 10^4$。\n\nBy (伍一鸣)\n", "locale": "zh-CN", "translations": {"en": {"title": "[National Training Team] Tree II", "background": "", "description": "A tree with $n$ nodes, where each node’s initial weight is $1$.  \nThere are $q$ operations on this tree, each being one of the following four types:\n\n- `+ u v c`: Add a natural number $c$ to the weight of every node on the path from $u$ to $v$.\n- `- u1 v1 u2 v2`: Delete the existing edge $(u_1, v_1)$ from the tree and add a new edge $(u_2, v_2)$. It is guaranteed that after the operation it is still a tree.\n- `* u v c`: Multiply the weight of every node on the path from $u$ to $v$ by a natural number $c$.\n- `/ u v`: Query the sum of the weights of all nodes on the path from $u$ to $v$, and output the answer modulo $51061$.", "inputFormat": "The first line contains two integers $n, q$.\n\nEach of the next $n-1$ lines contains two positive integers $u, v$, describing one edge of the tree.\n\nEach of the next $q$ lines describes one operation.", "outputFormat": "For each query operation, output one integer per line as the answer.", "hint": "Constraints  \n- For $10\\%$ of the testdata, $1 \\le n, q \\le 2000$.  \n- For an additional $15\\%$ of the testdata, $1 \\le n, q \\le 5 \\times 10^4$, there are no `-` operations, and the initial tree is a chain.  \n- For an additional $35\\%$ of the testdata, $1 \\le n, q \\le 5 \\times 10^4$, there are no `-` operations.  \n- For $100\\%$ of the testdata, $1 \\le n, q \\le 10^5$, $0 \\le c \\le 10^4$.\n\nBy (Wu Yiming).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] Tree II", "background": "", "description": "一棵 $n$ 个点的树，每个点的初始权值为 $1$。  \n对于这棵树有 $q$ 个操作，每个操作为以下四种操作之一：\n\n- `+ u v c`：将 $u$ 到 $v$ 的路径上的点的权值都加上自然数 $c$；\n- `- u1 v1 u2 v2`：将树中原有的边 $(u_1,v_1)$ 删除，加入一条新边 $(u_2,v_2)$，保证操作完之后仍然是一棵树；\n- `* u v c`：将 $u$ 到 $v$ 的路径上的点的权值都乘上自然数 $c$；\n- `/ u v`：询问 $u$ 到 $v$ 的路径上的点的权值和，将答案对 $51061$ 取模。\n", "inputFormat": "第一行两个整数 $n,q$。\n\n接下来 $n-1$ 行每行两个正整数 $u,v$，描述这棵树的每条边。\n\n接下来 $q$ 行，每行描述一个操作。\n", "outputFormat": "对于每个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】   \n对于 $10\\%$ 的数据，$1\\le n,q \\le 2000$；   \n另有 $15\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作，并且初始树为一条链；    \n另有 $35\\%$ 的数据，$1 \\le n,q \\le 5\\times 10^4$，没有 `-` 操作；  \n对于 $100\\%$ 的数据，$1\\le n,q \\le 10^5$，$0\\le c \\le 10^4$。\n\nBy (伍一鸣)\n", "locale": "zh-CN"}}}
{"pid": "P1502", "type": "P", "difficulty": 5, "samples": [["2\n\n3 5 4\n1 2 3\n2 3 2\n6 3 1\n\n3 5 4\n1 2 3\n2 3 2\n5 3 1", "5\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "离散化", "扫描线"], "title": "窗口的星星", "background": "小卡买到了一套新房子，他十分的高兴，在房间里转来转去。\n", "description": "晚上，小卡从阳台望出去，“哇~~~~好多星星啊”，但他还没给其他房间设一个窗户。   \n\n天真的小卡总是希望能够在晚上能看到最多最亮的星星，但是窗子的大小是固定的，边也必须和地面平行。  \n\n这时小卡使用了超能力（透视术）知道了墙后面每个星星的位置和亮度，但是小卡发动超能力后就很疲劳，只好拜托你告诉他最多能够有总和多亮的星星能出现在窗口上。\n", "inputFormat": "本题有多组数据，第一行为 $T$，表示有 $T$ 组数据。\n\n对于每组数据：\n\n第一行 $3$ 个整数 $n,W,H$ 表示有 $n$ 颗星星，窗口宽为 $W$，高为 $H$。\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,l_i$ 表示星星的坐标在 $(x_i,y_i)$，亮度为 $l_i$。\n", "outputFormat": "$T$ 个整数，表示每组数据中窗口星星亮度总和的最大值。\n", "hint": "为了便于理解，输入样例中每组数据之间添加了空行，实际测试数据中并无空行。\n\n小卡买的窗户框是金属做的，所以在边框上的不算在内。\n\n### 数据范围\n\n对于 $100\\%$ 的数据：$1\\le T \\le 10$，$1\\le n \\le 10^4$，$1\\le W,H \\le 10^6$，$0\\le l_i\\le 1000$，$0\\le x_i,y_i < 2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "Stars in the Window", "background": "Xiao Ka has just bought a new home. He is very happy and keeps wandering around his rooms.", "description": "At night, Xiao Ka looks out from the balcony and exclaims, “Wow, so many stars!”, but he has not yet set a window for the other rooms.\n\nNaive as he is, Xiao Ka always hopes to see the most and brightest stars at night, but the window’s size is fixed and its sides must be parallel to the ground. He uses a superpower (clairvoyance) to learn the position and brightness of every star behind the wall. However, using the superpower makes him tired, so he asks you to tell him the maximum possible total brightness of stars that can appear in the window.", "inputFormat": "This problem has multiple test cases. The first line is $T$, indicating there are $T$ test cases.\n\nFor each test case:\n\n- The first line has $3$ integers $n, W, H$, meaning there are $n$ stars, and the window has width $W$ and height $H$.\n- The next $n$ lines each contain three integers $x_i, y_i, l_i$, meaning there is a star at coordinate $(x_i, y_i)$ with brightness $l_i$.", "outputFormat": "Output $T$ integers, each being the maximum total brightness of stars that can appear in the window for the corresponding test case.", "hint": "For ease of understanding, blank lines are added between test cases in the sample input, but the actual testdata contains no blank lines.\n\nThe window frame is made of metal, so stars on the boundary do not count.\n\nConstraints: For $100\\%$ of the testdata: $1 \\le T \\le 10$, $1 \\le n \\le 10^4$, $1 \\le W, H \\le 10^6$, $0 \\le l_i \\le 1000$, $0 \\le x_i, y_i < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "窗口的星星", "background": "小卡买到了一套新房子，他十分的高兴，在房间里转来转去。\n", "description": "晚上，小卡从阳台望出去，“哇~~~~好多星星啊”，但他还没给其他房间设一个窗户。   \n\n天真的小卡总是希望能够在晚上能看到最多最亮的星星，但是窗子的大小是固定的，边也必须和地面平行。  \n\n这时小卡使用了超能力（透视术）知道了墙后面每个星星的位置和亮度，但是小卡发动超能力后就很疲劳，只好拜托你告诉他最多能够有总和多亮的星星能出现在窗口上。\n", "inputFormat": "本题有多组数据，第一行为 $T$，表示有 $T$ 组数据。\n\n对于每组数据：\n\n第一行 $3$ 个整数 $n,W,H$ 表示有 $n$ 颗星星，窗口宽为 $W$，高为 $H$。\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,l_i$ 表示星星的坐标在 $(x_i,y_i)$，亮度为 $l_i$。\n", "outputFormat": "$T$ 个整数，表示每组数据中窗口星星亮度总和的最大值。\n", "hint": "为了便于理解，输入样例中每组数据之间添加了空行，实际测试数据中并无空行。\n\n小卡买的窗户框是金属做的，所以在边框上的不算在内。\n\n### 数据范围\n\n对于 $100\\%$ 的数据：$1\\le T \\le 10$，$1\\le n \\le 10^4$，$1\\le W,H \\le 10^6$，$0\\le l_i\\le 1000$，$0\\le x_i,y_i < 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P1503", "type": "P", "difficulty": 4, "samples": [["7 9\nD 3\nD 6\nD 5\nQ 4\nQ 5\nR\nQ 4\nR\nQ 4\n", "1\n0\n2\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "平衡树", "分块"], "title": "鬼子进村", "background": "小卡正在新家的客厅中看电视。电视里正在播放放了千八百次依旧重播的《亮剑》，剧中李云龙带领的独立团在一个县城遇到了一个鬼子小队，于是独立团与鬼子展开游击战。", "description": "县城里有 $n$ 个用地道相连的房子，第 $i$ 个只与第 $i-1$ 和第 $i+1$ 个相连。特别的，第 $1$ 个房子只和第 $2$ 个联通，第 $n$ 个房子只和第 $n-1$ 个联通。这时有 $m$ 个消息依次传来：\n\n1. 若消息为 ```D x```：鬼子将 $x$ 号房子摧毁了，地道被堵上。\n\n1. 若消息为 ```R``` ：村民们将鬼子上一个摧毁的房子修复了。\n\n1. 若消息为 ```Q x```：有一名士兵被围堵在 $x$ 号房子中。\n\n现定义能够到达如下：若存在房子 $i,j(1\\leq i\\leq j\\leq n)$，使得对于任意的 $k(i\\leq k\\leq j)$ 都满足房子 $k$ 未被摧毁，则称房子 $i$ 与房子 $j$ 互相能够到达。\n\n李云龙收到信息很紧张，他想知道每一个被围堵的士兵能够到达的房子有几个。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，有如题目所说的三种信息共 $m$ 条。", "outputFormat": "对于每一个被围堵的士兵，输出该士兵能够到达的房子数。", "hint": "$1\\leq n,m\\leq 5\\times 10^4$。\n\n若士兵被围堵在摧毁了的房子中，那只能等死了。。。。。。", "locale": "zh-CN", "translations": {"en": {"title": "The Enemy Enters the Village", "background": "Xiao Ka is watching TV in the living room of the new home. On TV, the endlessly re-run “Drawing Sword” (Liangjian) is playing. In the show, the Independent Regiment led by Li Yunlong encounters an enemy squad in a county seat, and they begin a guerrilla war.", "description": "There are $n$ houses in the county connected by tunnels in a line. The $i$-th house is connected only to the $(i-1)$-th and $(i+1)$-th houses. Specifically, house $1$ is connected only to house $2$, and house $n$ is connected only to house $n-1$. There are $m$ messages arriving in order:\n\n1. If the message is ```D x```: the enemy destroys house $x$, and the tunnel is blocked.\n2. If the message is ```R```: the villagers repair the most recently destroyed house.\n3. If the message is ```Q x```: a soldier is trapped in house $x$.\n\nDefine reachability as follows: if there exist houses $i, j$ ($1 \\leq i \\leq j \\leq n$) such that for every $k$ with $i \\leq k \\leq j$, house $k$ is not destroyed, then house $i$ and house $j$ are mutually reachable.\n\nLi Yunlong is nervous after receiving the information. He wants to know, for each trapped soldier, how many houses he can reach.", "inputFormat": "The first line contains two integers $n, m$.\n\nEach of the next $m$ lines contains one of the three messages described above.", "outputFormat": "For each trapped soldier, output the number of houses he can reach.", "hint": "Constraints\n\n$1 \\leq n, m \\leq 5 \\times 10^4$.\n\nIf a soldier is trapped in a destroyed house, he can only wait to die.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "鬼子进村", "background": "小卡正在新家的客厅中看电视。电视里正在播放放了千八百次依旧重播的《亮剑》，剧中李云龙带领的独立团在一个县城遇到了一个鬼子小队，于是独立团与鬼子展开游击战。", "description": "县城里有 $n$ 个用地道相连的房子，第 $i$ 个只与第 $i-1$ 和第 $i+1$ 个相连。特别的，第 $1$ 个房子只和第 $2$ 个联通，第 $n$ 个房子只和第 $n-1$ 个联通。这时有 $m$ 个消息依次传来：\n\n1. 若消息为 ```D x```：鬼子将 $x$ 号房子摧毁了，地道被堵上。\n\n1. 若消息为 ```R``` ：村民们将鬼子上一个摧毁的房子修复了。\n\n1. 若消息为 ```Q x```：有一名士兵被围堵在 $x$ 号房子中。\n\n现定义能够到达如下：若存在房子 $i,j(1\\leq i\\leq j\\leq n)$，使得对于任意的 $k(i\\leq k\\leq j)$ 都满足房子 $k$ 未被摧毁，则称房子 $i$ 与房子 $j$ 互相能够到达。\n\n李云龙收到信息很紧张，他想知道每一个被围堵的士兵能够到达的房子有几个。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $m$ 行，有如题目所说的三种信息共 $m$ 条。", "outputFormat": "对于每一个被围堵的士兵，输出该士兵能够到达的房子数。", "hint": "$1\\leq n,m\\leq 5\\times 10^4$。\n\n若士兵被围堵在摧毁了的房子中，那只能等死了。。。。。。", "locale": "zh-CN"}}}
{"pid": "P1504", "type": "P", "difficulty": 3, "samples": [["2\n2 1 -1\n3 2 1 -1\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "枚举", "背包 DP"], "title": "积木城堡", "background": null, "description": "XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  \n\n小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大或者下面的积木和上面的积木一样大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。\n\n小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  \n\n可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。\n\n任务：\n\n请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。\n\n注意：一座城堡的高度，是组成它的所有积木的棱长之和。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 座城堡。  \n\n以下 $n$ 行每行是一系列非负整数，用一个空格分隔，按从下往上的顺序依次给出一座城堡中所有积木的**棱长**。用 `-1` 结束。", "outputFormat": "一个整数，表示最后城堡的最大可能的高度。  \n如果找不到合适的方案，则输出 $0$。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。", "locale": "zh-CN", "translations": {"en": {"title": "Block Castle", "background": "", "description": "XC’s son, Xiao XC, loves building pretty castles with blocks. The castles are built from cubic blocks, and each layer of the castle is one block.\n\nXiao XC is even smarter than his father, XC. He discovered that when building a castle, if the block below is larger than or equal to the block above, the castle is less likely to fall. So he always follows this rule when stacking.\n\nXiao XC wants to give the castles he built to the pretty girls in his kindergarten to increase his popularity. To be fair, he decides to give each girl a castle of the same height, so the girls won’t argue over getting a prettier one.\n\nHowever, he realizes he didn’t plan for this in advance when building the castles. Since he has no extra blocks, he comes up with a clever plan: he will remove some blocks from each castle so that all castles end up with the same height. To make the castles as majestic as possible, he wants the final height to be as large as possible.\n\nTask:\n\nPlease help Xiao XC write a program to decide which blocks to remove from each castle to achieve the best result.\n\nNote: The height of a castle is the sum of the edge lengths of all its blocks.", "inputFormat": "The first line contains an integer $n$, the number of castles.\n\nEach of the next $n$ lines contains a sequence of non-negative integers, separated by a space, giving the edge lengths of all blocks in one castle from bottom to top. The sequence ends with `-1`.", "outputFormat": "Output a single integer, the maximum possible final height of the castles. If no suitable plan exists, output $0$.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 100$, each castle contains at most $100$ blocks, and each block’s edge length is at most $100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "积木城堡", "background": null, "description": "XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  \n\n小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大或者下面的积木和上面的积木一样大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。\n\n小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  \n\n可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。\n\n任务：\n\n请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。\n\n注意：一座城堡的高度，是组成它的所有积木的棱长之和。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 座城堡。  \n\n以下 $n$ 行每行是一系列非负整数，用一个空格分隔，按从下往上的顺序依次给出一座城堡中所有积木的**棱长**。用 `-1` 结束。", "outputFormat": "一个整数，表示最后城堡的最大可能的高度。  \n如果找不到合适的方案，则输出 $0$。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。", "locale": "zh-CN"}}}
{"pid": "P1505", "type": "P", "difficulty": 5, "samples": [["3\n0 1 1\n1 2 2\n8\nSUM 0 2\nMAX 0 2\nN 0 1\nSUM 0 2\nMIN 0 2\nC 1 3\nSUM 0 2\nMAX 0 2", "3\n2\n1\n-1\n5\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "集训队互测", "树链剖分"], "title": "[国家集训队] 旅游", "background": "Ray 乐忠于旅游，这次他来到了 T 城。T 城是一个水上城市，一共有 $n$ 个景点，有些景点之间会用一座桥连接。为了方便游客到达每个景点但又为了节约成本，T 城的任意两个景点之间有且只有一条路径。换句话说， T 城中只有 $n-1$ 座桥。\n\nRay 发现，有些桥上可以看到美丽的景色，让人心情愉悦，但有些桥狭窄泥泞，令人烦躁。于是，他给每座桥定义一个愉悦度 $w$，也就是说，Ray 经过这座桥会增加 $w$ 的愉悦度，这或许是正的也可能是负的。有时，Ray 看待同一座桥的心情也会发生改变。\n\n现在，Ray 想让你帮他计算从 $u$ 景点到 $v$ 景点能获得的总愉悦度。有时，他还想知道某段路上最美丽的桥所提供的最大愉悦度，或是某段路上最糟糕的一座桥提供的最低愉悦度。\n", "description": "给定一棵 $n$ 个节点的树，边带权，编号 $0 \\sim n-1$，需要支持五种操作：\n\n- `C i w` 将输入的第 $i$ 条边权值改为 $w$；\n- `N u v` 将 $u,v$ 节点之间的边权都变为相反数；\n- `SUM u v` 询问 $u,v$ 节点之间边权和；\n- `MAX u v` 询问 $u,v$ 节点之间边权最大值；\n- `MIN u v` 询问 $u,v$ 节点之间边权最小值。\n\n保证任意时刻所有边的权值都在 $[-1000,1000]$ 内。\n", "inputFormat": "第一行一个正整数 $n$，表示节点个数。  \n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示 $u,v$ 之间有一条权值为 $w$ 的边，描述这棵树。      \n然后一行一个正整数 $m$，表示操作数。  \n接下来 $m$ 行，每行表示一个操作。\n", "outputFormat": "对于每一个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】  \n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5$。\n\n2020.02.04 修正了一点数据的错误  \n2020.03.14 加入了一组 hack 数据  \n2020.11.26 加入了一组 hack 数据 By @_Leaving", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Tourism", "background": "Ray loves traveling, and this time he has arrived in T City. T City is a city of waterways with $n$ attractions, and some pairs of attractions are connected by a bridge. To make it easy for tourists to reach every attraction while saving costs, there is exactly one path between any two attractions. In other words, there are only $n-1$ bridges in T City.\n\nRay noticed that some bridges offer beautiful scenery that lifts the mood, while others are narrow and muddy, which is frustrating. So he assigns a pleasure value $w$ to each bridge, meaning Ray’s pleasure increases by $w$ when he crosses that bridge, which could be positive or negative. Sometimes, Ray’s feelings about the same bridge also change.\n\nNow, Ray wants you to help him compute the total pleasure he can get when traveling from attraction $u$ to attraction $v$. Sometimes he also wants to know the maximum pleasure provided by the most beautiful bridge on a certain route, or the minimum pleasure provided by the worst bridge on a certain route.", "description": "You are given a tree with $n$ nodes, edges have weights, and nodes are numbered $0 \\sim n-1$. You need to support five operations. Edges are indexed by their input order from $1$ to $n-1$.\n\n- `C i w` Change the weight of the $i$-th edge in the input to $w$.\n- `N u v` Negate the weights of all edges on the path between $u$ and $v$.\n- `SUM u v` Query the sum of edge weights on the path between $u$ and $v$.\n- `MAX u v` Query the maximum edge weight on the path between $u$ and $v$.\n- `MIN u v` Query the minimum edge weight on the path between $u$ and $v$.\n\nAt any time, all edge weights are within $[-1000, 1000]$.", "inputFormat": "The first line contains a positive integer $n$, the number of nodes.\nThe next $n-1$ lines each contain three integers $u, v, w$, indicating that there is an edge between $u$ and $v$ with weight $w$, describing the tree.\nThen a line with a positive integer $m$, the number of operations.\nThe next $m$ lines each describe one operation.", "outputFormat": "For each query operation, output one line with one integer representing the answer.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 2 \\times 10^5$.\n\n2020.02.04 Fixed a small error in the testdata.\n2020.03.14 Added a set of hack testdata.\n2020.11.26 Added a set of hack testdata by @_Leaving.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 旅游", "background": "Ray 乐忠于旅游，这次他来到了 T 城。T 城是一个水上城市，一共有 $n$ 个景点，有些景点之间会用一座桥连接。为了方便游客到达每个景点但又为了节约成本，T 城的任意两个景点之间有且只有一条路径。换句话说， T 城中只有 $n-1$ 座桥。\n\nRay 发现，有些桥上可以看到美丽的景色，让人心情愉悦，但有些桥狭窄泥泞，令人烦躁。于是，他给每座桥定义一个愉悦度 $w$，也就是说，Ray 经过这座桥会增加 $w$ 的愉悦度，这或许是正的也可能是负的。有时，Ray 看待同一座桥的心情也会发生改变。\n\n现在，Ray 想让你帮他计算从 $u$ 景点到 $v$ 景点能获得的总愉悦度。有时，他还想知道某段路上最美丽的桥所提供的最大愉悦度，或是某段路上最糟糕的一座桥提供的最低愉悦度。\n", "description": "给定一棵 $n$ 个节点的树，边带权，编号 $0 \\sim n-1$，需要支持五种操作：\n\n- `C i w` 将输入的第 $i$ 条边权值改为 $w$；\n- `N u v` 将 $u,v$ 节点之间的边权都变为相反数；\n- `SUM u v` 询问 $u,v$ 节点之间边权和；\n- `MAX u v` 询问 $u,v$ 节点之间边权最大值；\n- `MIN u v` 询问 $u,v$ 节点之间边权最小值。\n\n保证任意时刻所有边的权值都在 $[-1000,1000]$ 内。\n", "inputFormat": "第一行一个正整数 $n$，表示节点个数。  \n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示 $u,v$ 之间有一条权值为 $w$ 的边，描述这棵树。      \n然后一行一个正整数 $m$，表示操作数。  \n接下来 $m$ 行，每行表示一个操作。\n", "outputFormat": "对于每一个询问操作，输出一行一个整数表示答案。\n", "hint": "【数据范围】  \n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 2\\times 10^5$。\n\n2020.02.04 修正了一点数据的错误  \n2020.03.14 加入了一组 hack 数据  \n2020.11.26 加入了一组 hack 数据 By @_Leaving", "locale": "zh-CN"}}}
{"pid": "P1506", "type": "P", "difficulty": 2, "samples": [["4 5\n00000\n00*00\n0*0*0\n00*00", "1\n"], ["5 5\n*****\n*0*0*\n**0**\n*0*0*\n*****", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "拯救oibh总部", "background": "oibh 总部突然被水淹没了！现在需要你的救援……", "description": "oibh 被突来的洪水淹没了，还好 oibh 总部有在某些重要的地方起一些围墙。用 `*` 号表示，而一个四面被围墙围住的区域洪水是进不去的。\n\noibh 总部内部也有许多重要区域，每个重要区域在图中用一个 `0` 表示。\n\n现在给出 oibh 的围墙建设图，问有多少个没被洪水淹到的重要区域。", "inputFormat": "第一行为两个正整数 $x,y$。\n\n接下来 $x$ 行，每行 $y$ 个字符，由 `*` 和 `0` 组成，表示 oibh 总部的建设图。", "outputFormat": "输出没被水淹没的 oibh 总部的 `0` 的数量。", "hint": "对于 $100\\%$ 的数据，$1 \\le x,y \\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "Save the oibh Headquarters", "background": "The oibh headquarters was suddenly flooded. Your rescue is needed now...", "description": "oibh was engulfed by a sudden flood. Fortunately, the oibh headquarters has built walls at some important places, denoted by `*`. A region that is enclosed by walls on all four sides cannot be reached by the flood.\n\nInside the oibh headquarters, there are many important regions, each represented on the map by a single `0`.\n\nGiven the wall construction map of oibh, determine how many important regions are not flooded.", "inputFormat": "The first line contains two positive integers $x, y$.\n\nThe next $x$ lines each contain $y$ characters, consisting of `*` and `0`, representing the construction map of the oibh headquarters.", "outputFormat": "Output the number of `0` characters in the oibh headquarters that are not flooded.", "hint": "For $100\\%$ of the testdata, $1 \\le x, y \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拯救oibh总部", "background": "oibh 总部突然被水淹没了！现在需要你的救援……", "description": "oibh 被突来的洪水淹没了，还好 oibh 总部有在某些重要的地方起一些围墙。用 `*` 号表示，而一个四面被围墙围住的区域洪水是进不去的。\n\noibh 总部内部也有许多重要区域，每个重要区域在图中用一个 `0` 表示。\n\n现在给出 oibh 的围墙建设图，问有多少个没被洪水淹到的重要区域。", "inputFormat": "第一行为两个正整数 $x,y$。\n\n接下来 $x$ 行，每行 $y$ 个字符，由 `*` 和 `0` 组成，表示 oibh 总部的建设图。", "outputFormat": "输出没被水淹没的 oibh 总部的 `0` 的数量。", "hint": "对于 $100\\%$ 的数据，$1 \\le x,y \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P1507", "type": "P", "difficulty": 2, "samples": [["320 350\n4\n160 40 120\n80 110 240\n220 70 310\n40 400 220\n", "550\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "动态规划 DP", "背包 DP"], "title": "NASA的食物计划", "background": "NASA（美国航空航天局）因为航天飞机的隔热瓦等其他安全技术问题一直大伤脑筋，因此在各方压力下终止了航天飞机的历史，但是此类事情会不会在以后发生，谁也无法保证。所以，在遇到这类航天问题时，也许只能让航天员出仓维修。但是过多的维修会消耗航天员大量的能量，因此 NASA 便想设计一种食品方案，使体积和承重有限的条件下多装载一些高卡路里的食物。", "description": "航天飞机的体积有限，当然如果载过重的物品，燃料会浪费很多钱，每件食品都有各自的体积、质量以及所含卡路里。在告诉你体积和质量的最大值的情况下，请输出能达到的食品方案所含卡路里的最大值，当然每个食品只能使用一次。", "inputFormat": "第一行 $2$ 个整数，分别代表体积最大值 $H$ 和质量最大值 $T$。 \n\n第二行 $1$ 个整数代表食品总数 $n$。 \n\n接下来 $n$ 行每行 $3$ 个数 体积 $h_i$，质量 $t_i$，所含卡路里 $k_i$。", "outputFormat": "一个数，表示所能达到的最大卡路里（`int` 范围内）", "hint": "对于 $100\\%$ 的数据，$H,T,h_i,t_i \\le 400$，$n \\le 50$，$k_i \\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "NASA's Food Plan", "background": "NASA (National Aeronautics and Space Administration) has long struggled with safety technologies such as the thermal protection tiles on the space shuttle. Under various pressures, the history of the space shuttle program was brought to an end. However, no one can guarantee that similar issues will not occur in the future. Thus, when such spaceflight problems arise, astronauts may have to perform extravehicular repairs. Excessive repairs, however, consume a large amount of the astronauts’ energy. Therefore, NASA wants to design a food plan to load as many high-calorie foods as possible under limited volume and load-bearing capacity.", "description": "The space shuttle has limited volume, and carrying overly heavy items wastes a lot of fuel money. Each food item has its own volume, mass, and contained calories. Given the maximum allowable volume and mass, output the maximum total calories achievable. Each food item can be used at most once.", "inputFormat": "The first line contains $2$ integers, representing the maximum volume $H$ and the maximum mass $T$.\n\nThe second line contains $1$ integer representing the total number of food items $n$.\n\nThe next $n$ lines each contain $3$ numbers: volume $h_i$, mass $t_i$, and contained calories $k_i$.", "outputFormat": "One integer, representing the maximum total calories achievable (within `int` range).", "hint": "For $100\\%$ of the testdata, $H, T, h_i, t_i \\le 400$, $n \\le 50$, $k_i \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "NASA的食物计划", "background": "NASA（美国航空航天局）因为航天飞机的隔热瓦等其他安全技术问题一直大伤脑筋，因此在各方压力下终止了航天飞机的历史，但是此类事情会不会在以后发生，谁也无法保证。所以，在遇到这类航天问题时，也许只能让航天员出仓维修。但是过多的维修会消耗航天员大量的能量，因此 NASA 便想设计一种食品方案，使体积和承重有限的条件下多装载一些高卡路里的食物。", "description": "航天飞机的体积有限，当然如果载过重的物品，燃料会浪费很多钱，每件食品都有各自的体积、质量以及所含卡路里。在告诉你体积和质量的最大值的情况下，请输出能达到的食品方案所含卡路里的最大值，当然每个食品只能使用一次。", "inputFormat": "第一行 $2$ 个整数，分别代表体积最大值 $H$ 和质量最大值 $T$。 \n\n第二行 $1$ 个整数代表食品总数 $n$。 \n\n接下来 $n$ 行每行 $3$ 个数 体积 $h_i$，质量 $t_i$，所含卡路里 $k_i$。", "outputFormat": "一个数，表示所能达到的最大卡路里（`int` 范围内）", "hint": "对于 $100\\%$ 的数据，$H,T,h_i,t_i \\le 400$，$n \\le 50$，$k_i \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P1508", "type": "P", "difficulty": 3, "samples": [["6 7\n16 4 3 12 6 0 3\n4 -5 6 7 0 0 2\n6 0 -1 -2 3 6 8\n5 3 4 0 0 -2 7\n-1 7 4 0 7 -5 6\n0 -1 3 4 12 4 2\n", "41\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "枚举"], "title": "Likecloud-吃、吃、吃", "background": "问世间，青春期为何物？\n\n答曰：“甲亢，甲亢，再甲亢；挨饿，挨饿，再挨饿！”", "description": "正处在某一特定时期之中的李大水牛由于消化系统比较发达，最近一直处在饥饿的状态中。某日上课，正当他饿得头昏眼花之时，眼前突然闪现出了一个 $n \\times m(n,m \\le 200)$ 的矩型的巨型大餐桌，而自己正处在这个大餐桌的一侧的中点下边。餐桌被划分为了 $n \\times m$ 个小方格，每一个方格中都有一个圆形的巨型大餐盘，上面盛满了令李大水牛朝思暮想的食物。李大水牛已将餐桌上所有的食物按其所能提供的能量打了分（有些是负的，因为吃了要拉肚子），他决定从自己所处的位置吃到餐桌的另一侧，途径的所有食物都必须吃掉，不能不吃。但他吃东西有一个习惯——只吃自己前方或左前方或右前方的盘中的食物。\n\n由于李大水牛已饿得不想动脑了，而他又想获得最大的能量，因此，他将这个问题交给了你。\n\n每组数据的出发点都是最后一行的中间位置的下方！", "inputFormat": "第一行为 $m$、$n$（$n$ 为奇数），李大水牛一开始在最后一行的中间的下方。\n\n接下来为 $m \\times n$ 的数字矩阵。\n\n矩阵共有 $m$ 行，每行 $n$ 个数字，数字间用空格隔开，代表该格子上的盘中的食物所能提供的能量。\n\n数字全是整数，且绝对值不超过 $10^5$。", "outputFormat": "一个数，为你所找出的最大能量值。", "hint": "快吃！快吃！快吃！", "locale": "zh-CN", "translations": {"en": {"title": "Likecloud - Eat, Eat, Eat", "background": "What is adolescence?\n\nAnswer: \"Hyperthyroidism, hyperthyroidism, and more hyperthyroidism; hunger, hunger, and more hunger!\"", "description": "", "inputFormat": "", "outputFormat": "Output one number: the maximum total energy you can obtain.", "hint": "Eat! Eat! Eat!\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Likecloud-吃、吃、吃", "background": "问世间，青春期为何物？\n\n答曰：“甲亢，甲亢，再甲亢；挨饿，挨饿，再挨饿！”", "description": "正处在某一特定时期之中的李大水牛由于消化系统比较发达，最近一直处在饥饿的状态中。某日上课，正当他饿得头昏眼花之时，眼前突然闪现出了一个 $n \\times m(n,m \\le 200)$ 的矩型的巨型大餐桌，而自己正处在这个大餐桌的一侧的中点下边。餐桌被划分为了 $n \\times m$ 个小方格，每一个方格中都有一个圆形的巨型大餐盘，上面盛满了令李大水牛朝思暮想的食物。李大水牛已将餐桌上所有的食物按其所能提供的能量打了分（有些是负的，因为吃了要拉肚子），他决定从自己所处的位置吃到餐桌的另一侧，途径的所有食物都必须吃掉，不能不吃。但他吃东西有一个习惯——只吃自己前方或左前方或右前方的盘中的食物。\n\n由于李大水牛已饿得不想动脑了，而他又想获得最大的能量，因此，他将这个问题交给了你。\n\n每组数据的出发点都是最后一行的中间位置的下方！", "inputFormat": "第一行为 $m$、$n$（$n$ 为奇数），李大水牛一开始在最后一行的中间的下方。\n\n接下来为 $m \\times n$ 的数字矩阵。\n\n矩阵共有 $m$ 行，每行 $n$ 个数字，数字间用空格隔开，代表该格子上的盘中的食物所能提供的能量。\n\n数字全是整数，且绝对值不超过 $10^5$。", "outputFormat": "一个数，为你所找出的最大能量值。", "hint": "快吃！快吃！快吃！", "locale": "zh-CN"}}}
{"pid": "P1509", "type": "P", "difficulty": 3, "samples": [["4\n1 2 5\n2 1 6\n2 2 2\n2 2 3\n5 5\n", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "找啊找啊找GF", "background": "“找啊找啊找 GF，找到一个好 GF，吃顿饭啊拉拉手，你是我的好 GF。再见。”\n\n“诶，别再见啊…”\n\n七夕… 七夕… 七夕这个日子，对于 sqybi 这种单身的菜鸟来说是多么的痛苦… 虽然他听着这首叫做“找啊找啊找 GF”的歌，他还是很痛苦。为了避免这种痛苦，sqybi 决定要给自己找点事情干。他去找到了七夕模拟赛的负责人 zmc MM，让她给自己一个出题的任务。经过几天的死缠烂打，zmc MM 终于同意了。\n\n但是，拿到这个任务的 sqybi 发现，原来出题比单身更让人感到无聊 -\\_- … 所以，他决定了，要在出题的同时去办另一件能够使自己不无聊的事情——给自己找 GF。", "description": "sqybi 现在看中了 $n$ 个 MM，我们不妨把她们编号 $1$ 到 $n$。请 MM 吃饭是要花钱的，我们假设请 $i$ 号 MM 吃饭要花 $rmb_i$ 块大洋。而希望骗 MM 当自己 GF 是要费人品的，我们假设请第 $i$ 号 MM 吃饭试图让她当自己 GF 的行为（不妨称作泡该 MM）要耗费 $rp_i$ 的人品。而对于每一个 MM 来说，sqybi 都有一个对应的搞定她的时间，对于第 $i$ 个 MM 来说叫做 $time_i$。sqybi 保证自己有足够的魅力用 $time_i$ 的时间搞定第 $i$ 个 MM ^\\_^。\n\nsqybi 希望搞到尽量多的 MM 当自己的 GF，这点是毋庸置疑的。但他不希望为此花费太多的时间（毕竟七夕赛的题目还没出），所以他希望在保证搞到 MM 数量最多的情况下花费的总时间最少。\n\nsqybi 现在有 $m$ 块大洋,他也通过一段时间的努力攒到了 $r$ 的人品（这次为模拟赛出题也攒 rp 哦\\~\\~）。他凭借这些大洋和人品可以泡到一些 MM。他想知道，自己泡到最多的 MM 花费的最少时间是多少。\n\n注意 sqybi 在一个时刻只能去泡一个 MM ——如果同时泡两个或以上的 MM 的话，她们会打起来的…", "inputFormat": "输入的第一行是 $n$，表示 sqybi 看中的 MM 数量。\n\n接下来有 $n$ 行，依次表示编号为 $1, 2, 3, \\ldots , n$ 的一个 MM 的信息。每行表示一个 MM 的信息，有三个整数：$rmb$，$rp$ 和 $time$。\n\n最后一行有两个整数，分别为 $m$ 和 $r$。", "outputFormat": "你只需要输出一行，其中有一个整数，表示 sqybi 在保证 MM 数量的情况下花费的最少总时间是多少。", "hint": "sqybi 说：如果题目里说的都是真的就好了…\n\nsqybi 还说，如果他没有能力泡到任何一个 MM，那么他就不消耗时间了（也就是消耗的时间为 $0$），他要用这些时间出七夕比赛的题来攒 rp…\n\n**【数据规模】**\n\n对于 $20 \\%$ 的数据，$1 \\le n \\le 10$；  \n对于 $100 \\%$ 的数据，$1 \\le rmb \\le 100$，$1 \\le rp \\le 100$，$1 \\le time \\le 1000$。  \n对于 $100 \\%$ 的数据，$1 \\le m, r, n \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Find, Find, Find a GF", "background": "\"Find and find and find a GF, find a good GF, have a meal and hold hands, you are my good GF. Goodbye.\"\n\n\"Hey, don’t say goodbye...\"\n\nQixi... Qixi... For someone like sqybi, a single rookie, the Qixi Festival is so painful... Even though he listens to this song called \"Find and Find and Find GF,\" he still feels bad. To avoid this pain, sqybi decided to find something to do. He went to the organizer of the Qixi mock contest, zmc MM, and asked her to give him a problem-setting task. After several days of pestering, zmc MM finally agreed.\n\nHowever, after getting the task, sqybi found that setting problems is even more boring than being single -\\_- ... So he decided to do another thing at the same time to avoid boredom—find himself a GF.", "description": "sqybi now has his eye on $n$ MMs. Let’s number them from $1$ to $n$. Treating MM $i$ to a meal costs $rmb[i]$ coins. Trying to persuade MM $i$ to be his GF (let’s call this \"chasing\" that MM) consumes $rp[i]$ points of \"renpin\" (rp). For each MM, there is a time needed to win her over, denoted $time[i]$. sqybi guarantees he has enough charm to win over MM $i$ in $time[i]$ time ^\\_^.\n\nsqybi wants to get as many MMs as possible to be his GFs, that is certain. But he does not want to spend too much time (after all, the Qixi contest problems are not finished), so among all choices that maximize the number of MMs, he wants the total time spent to be minimized.\n\nsqybi currently has $m$ coins, and after some effort he has accumulated $r$ rp (he also earns rp by setting problems for this mock contest~~). With these coins and rp, he can chase some MMs. He wants to know the minimum total time he needs when he gets the maximum possible number of MMs.\n\nNote that sqybi can only chase one MM at any moment—if he tries to chase two or more MMs at the same time, they will start fighting...", "inputFormat": "The first line contains $n$, the number of MMs sqybi is interested in.\n\nThen there are $n$ lines, describing MMs numbered $1, 2, 3, \\ldots , n$. Each line has three integers: $rmb$, $rp$, and $time$.\n\nThe last line has two integers, $m$ and $r$.", "outputFormat": "Output a single line with one integer: the minimum total time, under the condition that the number of MMs obtained is maximized.", "hint": "sqybi says: If only everything in the statement were true...\n\nsqybi also says: If he cannot chase any MM at all, then he spends no time (that is, the time spent is $0$). He will use that time to set Qixi contest problems to earn rp...\n\nConstraints\n\n- For 20 % of the testdata, $1 \\le n \\le 10$.\n- For 100 % of the testdata, $1 \\le rmb \\le 100$, $1 \\le rp \\le 100$, $1 \\le time \\le 1000$.\n- For 100 % of the testdata, $1 \\le m, r, n \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "找啊找啊找GF", "background": "“找啊找啊找 GF，找到一个好 GF，吃顿饭啊拉拉手，你是我的好 GF。再见。”\n\n“诶，别再见啊…”\n\n七夕… 七夕… 七夕这个日子，对于 sqybi 这种单身的菜鸟来说是多么的痛苦… 虽然他听着这首叫做“找啊找啊找 GF”的歌，他还是很痛苦。为了避免这种痛苦，sqybi 决定要给自己找点事情干。他去找到了七夕模拟赛的负责人 zmc MM，让她给自己一个出题的任务。经过几天的死缠烂打，zmc MM 终于同意了。\n\n但是，拿到这个任务的 sqybi 发现，原来出题比单身更让人感到无聊 -\\_- … 所以，他决定了，要在出题的同时去办另一件能够使自己不无聊的事情——给自己找 GF。", "description": "sqybi 现在看中了 $n$ 个 MM，我们不妨把她们编号 $1$ 到 $n$。请 MM 吃饭是要花钱的，我们假设请 $i$ 号 MM 吃饭要花 $rmb_i$ 块大洋。而希望骗 MM 当自己 GF 是要费人品的，我们假设请第 $i$ 号 MM 吃饭试图让她当自己 GF 的行为（不妨称作泡该 MM）要耗费 $rp_i$ 的人品。而对于每一个 MM 来说，sqybi 都有一个对应的搞定她的时间，对于第 $i$ 个 MM 来说叫做 $time_i$。sqybi 保证自己有足够的魅力用 $time_i$ 的时间搞定第 $i$ 个 MM ^\\_^。\n\nsqybi 希望搞到尽量多的 MM 当自己的 GF，这点是毋庸置疑的。但他不希望为此花费太多的时间（毕竟七夕赛的题目还没出），所以他希望在保证搞到 MM 数量最多的情况下花费的总时间最少。\n\nsqybi 现在有 $m$ 块大洋,他也通过一段时间的努力攒到了 $r$ 的人品（这次为模拟赛出题也攒 rp 哦\\~\\~）。他凭借这些大洋和人品可以泡到一些 MM。他想知道，自己泡到最多的 MM 花费的最少时间是多少。\n\n注意 sqybi 在一个时刻只能去泡一个 MM ——如果同时泡两个或以上的 MM 的话，她们会打起来的…", "inputFormat": "输入的第一行是 $n$，表示 sqybi 看中的 MM 数量。\n\n接下来有 $n$ 行，依次表示编号为 $1, 2, 3, \\ldots , n$ 的一个 MM 的信息。每行表示一个 MM 的信息，有三个整数：$rmb$，$rp$ 和 $time$。\n\n最后一行有两个整数，分别为 $m$ 和 $r$。", "outputFormat": "你只需要输出一行，其中有一个整数，表示 sqybi 在保证 MM 数量的情况下花费的最少总时间是多少。", "hint": "sqybi 说：如果题目里说的都是真的就好了…\n\nsqybi 还说，如果他没有能力泡到任何一个 MM，那么他就不消耗时间了（也就是消耗的时间为 $0$），他要用这些时间出七夕比赛的题来攒 rp…\n\n**【数据规模】**\n\n对于 $20 \\%$ 的数据，$1 \\le n \\le 10$；  \n对于 $100 \\%$ 的数据，$1 \\le rmb \\le 100$，$1 \\le rp \\le 100$，$1 \\le time \\le 1000$。  \n对于 $100 \\%$ 的数据，$1 \\le m, r, n \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1510", "type": "P", "difficulty": 2, "samples": [["100 2 10\n50 5\n50 5", "0"], ["10 2 1\n50 5\n10 2", "Impossible"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "精卫填海", "background": "", "description": "本题为改编题。\n\n> 发鸠之山，其上多柘木。有鸟焉，其状如乌，文首，白喙，赤足，名曰精卫，其名自詨。是炎帝之少女，名曰女娃。女娃游于东海，溺而不返，故为精卫。常衔西山之木石，以堙于东海。——《山海经》\n\n精卫终于快把东海填平了！只剩下了最后的一小片区域了。同时，西山上的木石也已经不多了。精卫能把东海填平吗？\n\n事实上，东海未填平的区域还需要至少体积为 $v$ 的木石才可以填平，而西山上的木石还剩下 $n$ 块，每块的体积和把它衔到东海需要的体力分别为 $k$ 和 $m$。精卫已经填海填了这么长时间了，她也很累了，她还剩下的体力为 $c$。", "inputFormat": "输入文件的第一行是三个整数：$v,n,c$。\n\n从第二行到第 $n+1$ 行分别为每块木石的体积和把它衔到东海需要的体力。", "outputFormat": "输出文件只有一行，如果精卫能把东海填平，则输出她把东海填平后剩下的最大的体力，否则输出 `Impossible`（不带引号）。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$0<n \\le 50$；\n- 对于 $50\\%$ 的数据，$0<n \\le 1000$；\n- 对于 $100\\%$ 的数据，$0<n \\le 10^4$，所有读入的数均属于 $[0,10^4]$，最后答案不大于 $c$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Jingwei Fills the Sea", "background": "", "description": "This is an adapted problem.\n\n> On Mount Fajiu, there are many zhe trees. There is a bird whose form resembles a crow, with a patterned head, a white beak, and red feet. Its name is Jingwei, and its call is like its name. She was the young daughter of the Flame Emperor, named Nüwa. Nüwa went to play in the Eastern Sea, drowned, and did not return, so she became Jingwei. She often carries wood and stones from the Western Mountains to fill up the Eastern Sea. — Classic of Mountains and Seas\n\nJingwei is finally about to fill up the Eastern Sea—only a small area remains. At the same time, there are not many pieces of wood and stone left on the Western Mountains. Can Jingwei finish the task?\n\nIn fact, the remaining unfilled area of the Eastern Sea requires at least a total volume of $v$ worth of wood and stones to be filled. There are $n$ pieces left on the Western Mountains. For the $i$-th piece, its volume and the stamina required to carry it to the Eastern Sea are $k_i$ and $m_i$, respectively. Jingwei is very tired after working for so long, and her remaining stamina is $c$.", "inputFormat": "The first line contains three integers: $v$, $n$, $c$.\n\nLines $2$ through $n+1$ each contain two integers $k_i$ and $m_i$, the volume of the $i$-th piece and the stamina required to carry it to the Eastern Sea.", "outputFormat": "Output a single line. If Jingwei can fill the Eastern Sea, output the maximum stamina she can have left after filling it. Otherwise, output Impossible.", "hint": "### Constraints and Conventions\n\n- For $20\\%$ of the testdata, $0 < n \\le 50$.\n- For $50\\%$ of the testdata, $0 < n \\le 1000$.\n- For $100\\%$ of the testdata, $0 < n \\le 10^4$, all input numbers are in $[0, 10^4]$, and the final answer is not greater than $c$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "精卫填海", "background": "", "description": "本题为改编题。\n\n> 发鸠之山，其上多柘木。有鸟焉，其状如乌，文首，白喙，赤足，名曰精卫，其名自詨。是炎帝之少女，名曰女娃。女娃游于东海，溺而不返，故为精卫。常衔西山之木石，以堙于东海。——《山海经》\n\n精卫终于快把东海填平了！只剩下了最后的一小片区域了。同时，西山上的木石也已经不多了。精卫能把东海填平吗？\n\n事实上，东海未填平的区域还需要至少体积为 $v$ 的木石才可以填平，而西山上的木石还剩下 $n$ 块，每块的体积和把它衔到东海需要的体力分别为 $k$ 和 $m$。精卫已经填海填了这么长时间了，她也很累了，她还剩下的体力为 $c$。", "inputFormat": "输入文件的第一行是三个整数：$v,n,c$。\n\n从第二行到第 $n+1$ 行分别为每块木石的体积和把它衔到东海需要的体力。", "outputFormat": "输出文件只有一行，如果精卫能把东海填平，则输出她把东海填平后剩下的最大的体力，否则输出 `Impossible`（不带引号）。\n", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$0<n \\le 50$；\n- 对于 $50\\%$ 的数据，$0<n \\le 1000$；\n- 对于 $100\\%$ 的数据，$0<n \\le 10^4$，所有读入的数均属于 $[0,10^4]$，最后答案不大于 $c$。\n", "locale": "zh-CN"}}}
{"pid": "P1511", "type": "P", "difficulty": 5, "samples": [["101\r\n", "10\r\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "数学", "2006", "各省省选", "山东", "枚举"], "title": "[SDOI2006] 数字串位置 / 超长数字串", "background": "George 很喜欢数学，尤其是算数数系列。", "description": "他最喜欢的是数字的无穷序列，结果是把所有的自然数按升序排列。这个序列开始是：$\\texttt{1234567891011121314...}$\n\n我们称这个序列为序列 $S$，然后 $S_1 = 1$, $S_2 = 2$, ... , $S_{10} = 1$, $S_{11} = 0$，依此类推.\n\nGeorge 现有一个数字序列 $A$ ，他想知道这个序列在 $S$ 中最早出现的位置。请你帮助他解决这个问题。", "inputFormat": "输入一个字符串，表示数字序列 $A$ ，位数不超过 $200$，中间没有空格。\n", "outputFormat": "输出使 $A_1 = S_k, A_2 = S_{k+1}, ...,A_{len_{A}} = S_{k + len(A)-1}$ 成立的最小正整数 $k$，其中 $len_{A}$ 表示序列 $A$ 的长度。\n", "hint": "来源 Source\n\nUral State University Problem Archive\n\n ", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Digit String Position / Super Long Digit String", "background": "George likes mathematics, especially arithmetic sequences.", "description": "What he likes most is the infinite sequence of digits formed by writing all natural numbers in ascending order. This sequence begins as: $\\texttt{1234567891011121314...}$\n\nWe call this sequence $S$, and $S_1 = 1$, $S_2 = 2$, ... , $S_{10} = 1$, $S_{11} = 0$, and so on.\n\nGeorge has a digit sequence $A$, and he wants to know the earliest position where this sequence appears in $S$. Please help him solve this problem.", "inputFormat": "Input a single string representing the digit sequence A, with length at most 200, and no spaces.", "outputFormat": "Output the smallest positive integer $k$ such that $A_1 = S_k, A_2 = S_{k+1}, ...,A_{len_{A}} = S_{k + len(A)-1}$ holds, where len_{A} denotes the length of sequence A.", "hint": "Source\n\nUral State University Problem Archive.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 数字串位置 / 超长数字串", "background": "George 很喜欢数学，尤其是算数数系列。", "description": "他最喜欢的是数字的无穷序列，结果是把所有的自然数按升序排列。这个序列开始是：$\\texttt{1234567891011121314...}$\n\n我们称这个序列为序列 $S$，然后 $S_1 = 1$, $S_2 = 2$, ... , $S_{10} = 1$, $S_{11} = 0$，依此类推.\n\nGeorge 现有一个数字序列 $A$ ，他想知道这个序列在 $S$ 中最早出现的位置。请你帮助他解决这个问题。", "inputFormat": "输入一个字符串，表示数字序列 $A$ ，位数不超过 $200$，中间没有空格。\n", "outputFormat": "输出使 $A_1 = S_k, A_2 = S_{k+1}, ...,A_{len_{A}} = S_{k + len(A)-1}$ 成立的最小正整数 $k$，其中 $len_{A}$ 表示序列 $A$ 的长度。\n", "hint": "来源 Source\n\nUral State University Problem Archive\n\n ", "locale": "zh-CN"}}}
{"pid": "P1512", "type": "P", "difficulty": 4, "samples": [["3\n2001 11 3\n2001 11 2\n2001 10 3\n", "YES\nNO\nNO\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [524288, 524288, 524288]}, "tags": ["搜索", "博弈论", "记忆化搜索"], "title": "伊甸园日历游戏", "background": "", "description": "Adam 和 Eve 玩一个游戏，他们先从 $1900.1.1$ 到 $2006.11.3$ 这个日期之间随意抽取一个日期出来。然后他们轮流对这个日期进行操作：\n\n1. 把日期的天数加 $1$，例如 $1900.1.1$ 变到 $1900.1.2$；\n2. 把月份加 $1$，例如：$1900.1.1$ 变到 $1900.2.1$。\n\n其中如果天数超过应有天数则日期变更到下个月的第 $1$ 天。月份超过 $12$ 则变到下一年的 $1$ 月。而且进行操作二的时候，如果有这样的日期：$1900.1.31$，则变成了 $1900.2.31$，这样的操作是非法的，我们不允许这样做。而且所有的操作均要考虑历法和闰年的规定。\n\n谁先将日期变到 $2006.11.4$ 谁就赢了。如果超越了指定日期不算获胜。\n\n每次游戏都是 Adam 先操作，问他有没有必胜策略？", "inputFormat": "第一行一个整数，为数据组数。\n\n接下来一行 $X,Y,Z$ 表示 $X$ 年 $Y$ 月 $Z$ 日。", "outputFormat": "输出 `YES` 或者 `NO` 表示 Adam 是否有必胜策略。", "hint": "\n\n------------\n2024/1/31 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Garden of Eden Calendar Game", "background": "", "description": "Adam and Eve play a game that starts from a date chosen uniformly at random from $1900.1.1$ to $2006.11.3$. They then take turns applying one of the following operations to the current date:\n\n1. Add $1$ to the day. For example, $1900.1.1$ becomes $1900.1.2$.\n2. Add $1$ to the month. For example, $1900.1.1$ becomes $1900.2.1$.\n\nIf the day exceeds the number of days in the current month, the date rolls over to the $1$st day of the next month. If the month exceeds $12$, it rolls over to January of the next year. Moreover, when performing operation 2, if the resulting date would be invalid (for example, $1900.1.31$ becoming $1900.2.31$), the operation is illegal and not allowed. All operations must respect calendar rules, including leap years.\n\nWhoever first changes the date to exactly $2006.11.4$ wins. If you overshoot the specified date, it does not count as a win.\n\nAdam always moves first. For the given starting date, determine whether he has a winning strategy.", "inputFormat": "- The first line contains an integer $T$, the number of test cases.\n- Each of the next $T$ lines contains three integers $X$, $Y$, $Z$, indicating year $X$, month $Y$, and day $Z$.", "outputFormat": "For each test case, output `YES` or `NO` indicating whether Adam has a winning strategy.", "hint": "------------  \n2024/1/31 Added a set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "伊甸园日历游戏", "background": "", "description": "Adam 和 Eve 玩一个游戏，他们先从 $1900.1.1$ 到 $2006.11.3$ 这个日期之间随意抽取一个日期出来。然后他们轮流对这个日期进行操作：\n\n1. 把日期的天数加 $1$，例如 $1900.1.1$ 变到 $1900.1.2$；\n2. 把月份加 $1$，例如：$1900.1.1$ 变到 $1900.2.1$。\n\n其中如果天数超过应有天数则日期变更到下个月的第 $1$ 天。月份超过 $12$ 则变到下一年的 $1$ 月。而且进行操作二的时候，如果有这样的日期：$1900.1.31$，则变成了 $1900.2.31$，这样的操作是非法的，我们不允许这样做。而且所有的操作均要考虑历法和闰年的规定。\n\n谁先将日期变到 $2006.11.4$ 谁就赢了。如果超越了指定日期不算获胜。\n\n每次游戏都是 Adam 先操作，问他有没有必胜策略？", "inputFormat": "第一行一个整数，为数据组数。\n\n接下来一行 $X,Y,Z$ 表示 $X$ 年 $Y$ 月 $Z$ 日。", "outputFormat": "输出 `YES` 或者 `NO` 表示 Adam 是否有必胜策略。", "hint": "\n\n------------\n2024/1/31 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1513", "type": "P", "difficulty": 2, "samples": [["4 1\r\n0.0 0.0\r\n2.0 0.0\r\n2.0 2.0\r\n0.0 2.0\r\n", "14.28\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "绕钉子的长绳子", "background": "", "description": "平面上有 $N$ 个圆柱形的大钉子，半径都为 $R$，所有钉子组成一个凸多边形。\n\n现在你要用一条绳子把这些钉子围起来，绳子直径忽略不计。求出绳子的长度。\n", "inputFormat": "第一行共两个数，整数 $N\\ (1 \\le N \\le 100)$ 和实数 $R$。\n\n接下来 $N$ 行按逆时针顺序给出 $N$ 个钉子中心的坐标。\n\n坐标的绝对值不超过 $100$。", "outputFormat": "一个数，绳子的长度，精确到小数点后 $2$ 位。", "hint": "本题来自 URAL1020，翻译来自 NOCOW。\n", "locale": "zh-CN", "translations": {"en": {"title": "The Long Rope Around the Nails", "background": "", "description": "There are $N$ cylindrical nails on the plane, each with radius $R$. The centers of all nails form a convex polygon.\n\nNow you need to use a rope to enclose these nails. The rope’s diameter is negligible. Find the length of the rope.", "inputFormat": "The first line contains two numbers: an integer $N$ ($1 \\le N \\le 100$) and a real number $R$.\n\nThe next $N$ lines give the coordinates of the $N$ nail centers in counterclockwise order.\n\nThe absolute value of each coordinate does not exceed $100$.", "outputFormat": "Output one number: the length of the rope, to $2$ decimal places.", "hint": "This problem is from URAL 1020, translation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "绕钉子的长绳子", "background": "", "description": "平面上有 $N$ 个圆柱形的大钉子，半径都为 $R$，所有钉子组成一个凸多边形。\n\n现在你要用一条绳子把这些钉子围起来，绳子直径忽略不计。求出绳子的长度。\n", "inputFormat": "第一行共两个数，整数 $N\\ (1 \\le N \\le 100)$ 和实数 $R$。\n\n接下来 $N$ 行按逆时针顺序给出 $N$ 个钉子中心的坐标。\n\n坐标的绝对值不超过 $100$。", "outputFormat": "一个数，绳子的长度，精确到小数点后 $2$ 位。", "hint": "本题来自 URAL1020，翻译来自 NOCOW。\n", "locale": "zh-CN"}}}
{"pid": "P1514", "type": "P", "difficulty": 5, "samples": [["2 5\n9 1 5 4 3\n8 7 6 1 2\n", "1\n1\n"], ["3 6\n8 4 5 6 4 4\n7 3 4 3 3 3\n3 2 2 1 1 2", "1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "贪心", "2010", "NOIP 提高组", "广度优先搜索 BFS"], "title": "[NOIP 2010 提高组] 引水入城", "background": "NOIP2010 提高组 T4", "description": "在一个遥远的国度，一侧是风景秀美的湖泊，另一侧则是漫无边际的沙漠。该国的行政区划十分特殊，刚好构成一个 $N$ 行 $M$ 列的矩形，如上图所示，其中每个格子都代表一座城市，每座城市都有一个海拔高度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcqfo04b.png)\n\n\n\n为了使居民们都尽可能饮用到清澈的湖水，现在要在某些城市建造水利设施。水利设施有两种，分别为蓄水厂和输水站。蓄水厂的功能是利用水泵将湖泊中的水抽取到所在城市的蓄水池中。\n\n因此，只有与湖泊毗邻的第 $1$ 行的城市可以建造蓄水厂。而输水站的功能则是通过输水管线利用高度落差，将湖水从高处向低处输送。故一座城市能建造输水站的前提，是存在比它海拔更高且拥有公共边的相邻城市，已经建有水利设施。由于第 $N$ 行的城市靠近沙漠，是该国的干旱区，所以要求其中的每座城市都建有水利设施。那么，这个要求能否满足呢？如果能，请计算最少建造几个蓄水厂；如果不能，求干旱区中不可能建有水利设施的城市数目。\n", "inputFormat": "每行两个数，之间用一个空格隔开。输入的第一行是两个正整数 $N,M$，表示矩形的规模。接下来 $N$ 行，每行 $M$ 个正整数，依次代表每座城市的海拔高度。\n", "outputFormat": "两行。如果能满足要求，输出的第一行是整数 $1$，第二行是一个整数，代表最少建造几个蓄水厂；如果不能满足要求，输出的第一行是整数 $0$，第二行是一个整数，代表有几座干旱区中的城市不可能建有水利设施。\n", "hint": "**样例 1 说明**\n\n只需要在海拔为 $9$ 的那座城市中建造蓄水厂，即可满足要求。\n\n**样例 2 说明**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoz3f0lv.png)\n\n上图中，在 $3 $ 个粗线框出的城市中建造蓄水厂，可以满足要求。以这 $3 $ 个蓄水厂为源头在干旱区中建造的输水站分别用 $3$ 种颜色标出。当然，建造方法可能不唯一。\n\n**数据范围**\n\n本题有 10 个测试数据，每个数据的范围如下表所示：\n\n| 测试数据编号 | 能否满足要求 | $N\\le$ | $M\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | 不能 | $10$ | $10$ |\n| 2 | 不能 | $100$ | $100$ |\n| 3 | 不能 | $500$ | $500$ |\n| 4 | 能 | $1$ | $10$ |\n| 5 | 能 | $10$ | $10$ |\n| 6 | 能 | $100$ | $20$ |\n| 7 | 能 | $100$ | $50$ |\n| 8 | 能 | $100$ | $100$ |\n| 9 | 能 | $200$ | $200$ |\n| 10 | 能 | $500$ | $500$ |\n\n对于所有 10 个数据，每座城市的海拔高度都不超过 $10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2010 Senior] Channeling Water into the City", "background": "NOIP 2010 Senior T4.", "description": "In a faraway country, a scenic lake lies on one side and a boundless desert on the other. The country’s administrative divisions form an $N$-by-$M$ rectangle, as shown above, where each cell represents a city, and each city has an elevation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcqfo04b.png)\n\nTo let as many residents as possible drink clear lake water, water facilities will be built in some cities. There are two types of facilities: reservoir plants and transfer stations. A reservoir plant uses pumps to draw water from the lake into the reservoir of its city.\n\nTherefore, only cities in the first row, which border the lake, can build reservoir plants. A transfer station uses pipelines and elevation drop to convey lake water from higher places to lower places. Thus, a city can build a transfer station only if there exists an adjacent city sharing a side, with a strictly higher elevation, that already has a water facility. Because the cities in the $N$-th row are close to the desert and form the arid region, every city in that row is required to have a water facility. Can this requirement be satisfied? If yes, compute the minimum number of reservoir plants to build; if not, find how many cities in the arid region cannot possibly have any water facility.", "inputFormat": "The first line contains two positive integers $N, M$, representing the size of the rectangle. Then $N$ lines follow, each containing $M$ positive integers, which are the elevations of the cities in order.", "outputFormat": "Two lines. If the requirement can be met, output the integer $1$ on the first line, and output an integer on the second line representing the minimum number of reservoir plants. If the requirement cannot be met, output the integer $0$ on the first line, and output an integer on the second line representing the number of cities in the arid region that cannot possibly have any water facility.", "hint": "Sample 1 explanation:\n\nYou only need to build a reservoir plant in the city with elevation $9$ to satisfy the requirement.\n\nSample 2 explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoz3f0lv.png)\n\nIn the three cities highlighted with thick borders in the figure above, building reservoir plants will satisfy the requirement. The transfer stations in the arid region fed by these three reservoir plants are marked in three colors. Of course, the construction plan may not be unique.\n\nConstraints\n\nThis problem has 10 pieces of testdata, with limits as shown in the table below:\n\n| Testdata ID | Whether requirement can be met | $N\\le$ | $M\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | No | $10$ | $10$ |\n| 2 | No | $100$ | $100$ |\n| 3 | No | $500$ | $500$ |\n| 4 | Yes | $1$ | $10$ |\n| 5 | Yes | $10$ | $10$ |\n| 6 | Yes | $100$ | $20$ |\n| 7 | Yes | $100$ | $50$ |\n| 8 | Yes | $100$ | $100$ |\n| 9 | Yes | $200$ | $200$ |\n| 10 | Yes | $500$ | $500$ |\n\nFor all 10 testdata, each city’s elevation does not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2010 提高组] 引水入城", "background": "NOIP2010 提高组 T4", "description": "在一个遥远的国度，一侧是风景秀美的湖泊，另一侧则是漫无边际的沙漠。该国的行政区划十分特殊，刚好构成一个 $N$ 行 $M$ 列的矩形，如上图所示，其中每个格子都代表一座城市，每座城市都有一个海拔高度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rcqfo04b.png)\n\n\n\n为了使居民们都尽可能饮用到清澈的湖水，现在要在某些城市建造水利设施。水利设施有两种，分别为蓄水厂和输水站。蓄水厂的功能是利用水泵将湖泊中的水抽取到所在城市的蓄水池中。\n\n因此，只有与湖泊毗邻的第 $1$ 行的城市可以建造蓄水厂。而输水站的功能则是通过输水管线利用高度落差，将湖水从高处向低处输送。故一座城市能建造输水站的前提，是存在比它海拔更高且拥有公共边的相邻城市，已经建有水利设施。由于第 $N$ 行的城市靠近沙漠，是该国的干旱区，所以要求其中的每座城市都建有水利设施。那么，这个要求能否满足呢？如果能，请计算最少建造几个蓄水厂；如果不能，求干旱区中不可能建有水利设施的城市数目。\n", "inputFormat": "每行两个数，之间用一个空格隔开。输入的第一行是两个正整数 $N,M$，表示矩形的规模。接下来 $N$ 行，每行 $M$ 个正整数，依次代表每座城市的海拔高度。\n", "outputFormat": "两行。如果能满足要求，输出的第一行是整数 $1$，第二行是一个整数，代表最少建造几个蓄水厂；如果不能满足要求，输出的第一行是整数 $0$，第二行是一个整数，代表有几座干旱区中的城市不可能建有水利设施。\n", "hint": "**样例 1 说明**\n\n只需要在海拔为 $9$ 的那座城市中建造蓄水厂，即可满足要求。\n\n**样例 2 说明**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoz3f0lv.png)\n\n上图中，在 $3 $ 个粗线框出的城市中建造蓄水厂，可以满足要求。以这 $3 $ 个蓄水厂为源头在干旱区中建造的输水站分别用 $3$ 种颜色标出。当然，建造方法可能不唯一。\n\n**数据范围**\n\n本题有 10 个测试数据，每个数据的范围如下表所示：\n\n| 测试数据编号 | 能否满足要求 | $N\\le$ | $M\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| 1 | 不能 | $10$ | $10$ |\n| 2 | 不能 | $100$ | $100$ |\n| 3 | 不能 | $500$ | $500$ |\n| 4 | 能 | $1$ | $10$ |\n| 5 | 能 | $10$ | $10$ |\n| 6 | 能 | $100$ | $20$ |\n| 7 | 能 | $100$ | $50$ |\n| 8 | 能 | $100$ | $100$ |\n| 9 | 能 | $200$ | $200$ |\n| 10 | 能 | $500$ | $500$ |\n\n对于所有 10 个数据，每座城市的海拔高度都不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P1515", "type": "P", "difficulty": 2, "samples": [["500\n1500\n0\n", "64\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "递推"], "title": "旅行", "background": "", "description": "你要进行一个行程为 $7000$ 千米的旅行，现在沿途有些汽车旅馆，为了安全起见，每天晚上都不开车，住在汽车旅馆，你手里现在已经有一个旅馆列表，用离起点的距离来标识，如下：\n\n- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$。\n\n但在出发之前可能还要增加一些旅馆。\n\n现在旅行社为了节约成本，要求每天至少行驶 $A$ 公里，国家旅行社为了安全起见，要求每天最多只能行驶 $B$ 公里。\n\n你想知道一共有多少种旅行方案。", "inputFormat": "第一行输入一个整数 $A$，第二行输入一个整数 $B$，第三行输入 $N$（$0 \\le N \\le 20$），表示在出发之前又新增 $N$ 个汽车旅馆；\n\n接下来 $N$ 行，每行一个整数 $m$，表示旅馆离起点的距离（$0<m<7000$）。注意：没有任意两个旅馆在同一位置。", "outputFormat": "输出一共有多少种旅行方案。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Travel", "background": "", "description": "You are going to take a trip of $7000$ kilometers. There are some motels along the way. For safety, you do not drive at night and stay in motels. You already have a list of motels, identified by their distance from the starting point, as follows:\n- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$.\n\nHowever, some motels may be added before departure.\n\nTo save costs, the travel agency requires that you drive at least $A$ kilometers each day. For safety, the national travel agency requires that you drive at most $B$ kilometers each day.\n\nYou want to know how many travel plans there are in total.", "inputFormat": "The first line contains an integer $A$. The second line contains an integer $B$. The third line contains an integer $N$ ($0 \\le N \\le 20$), indicating that $N$ additional motels are added before departure.\n\nThe next $N$ lines each contain an integer $m$, which is the distance of a motel from the starting point ($0 < m < 7000$). Note: No two motels are at the same location.", "outputFormat": "Output the total number of travel plans.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "旅行", "background": "", "description": "你要进行一个行程为 $7000$ 千米的旅行，现在沿途有些汽车旅馆，为了安全起见，每天晚上都不开车，住在汽车旅馆，你手里现在已经有一个旅馆列表，用离起点的距离来标识，如下：\n\n- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$。\n\n但在出发之前可能还要增加一些旅馆。\n\n现在旅行社为了节约成本，要求每天至少行驶 $A$ 公里，国家旅行社为了安全起见，要求每天最多只能行驶 $B$ 公里。\n\n你想知道一共有多少种旅行方案。", "inputFormat": "第一行输入一个整数 $A$，第二行输入一个整数 $B$，第三行输入 $N$（$0 \\le N \\le 20$），表示在出发之前又新增 $N$ 个汽车旅馆；\n\n接下来 $N$ 行，每行一个整数 $m$，表示旅馆离起点的距离（$0<m<7000$）。注意：没有任意两个旅馆在同一位置。", "outputFormat": "输出一共有多少种旅行方案。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1516", "type": "P", "difficulty": 5, "samples": [["1 2 3 4 5\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "扩展欧几里德算法", "中国剩余定理 CRT"], "title": "青蛙的约会", "background": null, "description": "两只青蛙在网上相识了，它们聊得很开心，于是觉得很有必要见一面。它们很高兴地发现它们住在同一条纬度线上，于是它们约定各自朝西跳，直到碰面为止。可是它们出发之前忘记了一件很重要的事情，既没有问清楚对方的特征，也没有约定见面的具体位置。不过青蛙们都是很乐观的，它们觉得只要一直朝着某个方向跳下去，总能碰到对方的。但是除非这两只青蛙在同一时间跳到同一点上，不然是永远都不可能碰面的。为了帮助这两只乐观的青蛙，你被要求写一个程序来判断这两只青蛙是否能够碰面，会在什么时候碰面。\n\n我们把这两只青蛙分别叫做青蛙 A 和青蛙 B，并且规定纬度线上东经 $0$ 度处为原点，由东往西为正方向，单位长度 $1$ 米，这样我们就得到了一条首尾相接的数轴。设青蛙 A 的出发点坐标是 $x$，青蛙 B 的出发点坐标是 $y$。青蛙 A 一次能跳 $m$ 米，青蛙 B 一次能跳 $n$ 米，两只青蛙跳一次所花费的时间相同。纬度线总长 $L$ 米。现在要你求出它们跳了几次以后才会碰面。", "inputFormat": "输入只包括一行五个整数 $x,y,m,n,L$。", "outputFormat": "输出碰面所需要的次数，如果永远不可能碰面则输出一行一个字符串 `Impossible`。", "hint": "对于 $100\\%$ 的数据，$1 \\le x, y, m, n \\le 2 \\times 10^9$，$x \\ne y$，$1 \\le L \\le 2.1 \\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Frogs' Date", "background": "", "description": "Two frogs met online and enjoyed chatting, so they thought it necessary to meet. They happily discovered that they live on the same line of latitude and agreed to jump westward until they meet. However, before setting off, they forgot something important: they neither asked each other's characteristics nor agreed on the exact meeting point. Still, the frogs are optimistic and believe that as long as they keep jumping in one direction, they will eventually meet. But unless both frogs land on the same point at the same time, they can never meet. To help these two optimistic frogs, you are asked to write a program to determine whether they can meet and when they will meet.\n\nCall the two frogs frog A and frog B. On the latitude line, set the origin at $0^\\circ$E, take the direction from east to west as positive, and set the unit length to $1$ meter. In this way, we obtain a circular number line. Let the starting position of frog A be $x$, and the starting position of frog B be $y$. Frog A jumps $m$ meters per jump, and frog B jumps $n$ meters per jump. One jump takes the same time for both frogs. The total length of the latitude line is $L$ meters. Now you need to find after how many jumps they will meet.", "inputFormat": "The input consists of one line with five integers $x,y,m,n,L$.", "outputFormat": "Output the number of jumps needed for them to meet. If they can never meet, output a single line containing the string `Impossible`.", "hint": "For $100\\%$ of the testdata, $1 \\le x, y, m, n \\le 2 \\times 10^9$, $x \\ne y$, $1 \\le L \\le 2.1 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "青蛙的约会", "background": null, "description": "两只青蛙在网上相识了，它们聊得很开心，于是觉得很有必要见一面。它们很高兴地发现它们住在同一条纬度线上，于是它们约定各自朝西跳，直到碰面为止。可是它们出发之前忘记了一件很重要的事情，既没有问清楚对方的特征，也没有约定见面的具体位置。不过青蛙们都是很乐观的，它们觉得只要一直朝着某个方向跳下去，总能碰到对方的。但是除非这两只青蛙在同一时间跳到同一点上，不然是永远都不可能碰面的。为了帮助这两只乐观的青蛙，你被要求写一个程序来判断这两只青蛙是否能够碰面，会在什么时候碰面。\n\n我们把这两只青蛙分别叫做青蛙 A 和青蛙 B，并且规定纬度线上东经 $0$ 度处为原点，由东往西为正方向，单位长度 $1$ 米，这样我们就得到了一条首尾相接的数轴。设青蛙 A 的出发点坐标是 $x$，青蛙 B 的出发点坐标是 $y$。青蛙 A 一次能跳 $m$ 米，青蛙 B 一次能跳 $n$ 米，两只青蛙跳一次所花费的时间相同。纬度线总长 $L$ 米。现在要你求出它们跳了几次以后才会碰面。", "inputFormat": "输入只包括一行五个整数 $x,y,m,n,L$。", "outputFormat": "输出碰面所需要的次数，如果永远不可能碰面则输出一行一个字符串 `Impossible`。", "hint": "对于 $100\\%$ 的数据，$1 \\le x, y, m, n \\le 2 \\times 10^9$，$x \\ne y$，$1 \\le L \\le 2.1 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1517", "type": "P", "difficulty": 3, "samples": [["95.123  2\n0.4321  5\n5.1234  7\n6.7592  3\n98.999  5\n1.0100 10\n", "9048.385129\n.01506334182914325601\n92663.3181348508776705891407804544\n308.806114738688\n9509420210.697891990494999\n1.10462212541120451001\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度"], "title": "高精求小数幂", "background": null, "description": "计算量非常大、精度要求非常高的问题是很常见的。举个例子，计算国家债务就是这么一项对于许多计算机系统来说非常繁重的工作。\n\n现在有这么一个任务要求编写一个程序来计算 $R^n$ 的精确值，其中 $R$ 是一个实数 $(0 < R \\le 9999.9)$ 而 $n$ 是一个整数 $(1 \\le n \\le 250)$。", "inputFormat": "**本题有多组数据。**\n\n对于每组数据，一行两个数字 $R,n$，中间有至少一个空格。\n\n保证每行包括空格在内恰好有 $9$ 个字符，且 $n$ 后面没有空格。\n\n**请读入到输入文件末尾：**\n\n- 对于 C++ 的 `std::cin`，可以使用 `while (std::cin >> s >> n) {/* ... */}` 来实现这一功能，其中 `s` 是 `std::string` 类型的变量。\n- 对于 C/C++ 的 `scanf`，可以使用 `while (scanf(\"%s%d\", s, &n) == 2) {/* ... */}` 来实现这一功能，其中 `s` 是 `char*` 类型的变量。\n- 对于其他输入函数实现这一功能的方式，请自行查阅文档。\n\n保证数据组数不超过 $11$ 组。", "outputFormat": "对于每组数据，输出一行一个实数，表示 $R^n$ 的**精确值**。\n\n输出有三点要求：\n\n1. 输出不允许有前导 $0$。\n2. 小数部分末尾不能有 $0$。\n3. 如果结果是整数，不应该输出小数点。\n\n**特别地，当答案小于 $\\bm 1$ 时，你需要省略整数部分的 $\\bm 0$，输出形如 `.25` 的答案。**", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "High-precision decimal power", "background": "", "description": "Problems involving the computation of exact values of very large magnitude and precision are common. For example, the computation of the national debt is a taxing experience for many computer systems.\n\nThis problem requires that you write a program to compute the exact value of Rn where R is a real number ( 0.0 < R <= 9999.9) and n is an integer such that 0 < n <= 250.\n", "inputFormat": "The input will consist of a set (less than 11) of pairs of values for R and n. The R value will occupy columns 1 through 6, and the n value will be in columns 8 and 9.\n\n   \n ", "outputFormat": "The output will consist of one line for each line of input giving the exact value of R^n. Leading zeros should be suppressed in the output. Insignificant trailing zeros must not be printed. Don't print the decimal point if the result is an integer.\n", "hint": "If you don't know how to determine wheather encounted the end of input:\n\ns is a string and n is an integer\n\nC++\nwhile(cin>>s>>n) \n\n{ \n...\n} \nc\nwhile(scanf(\"%s%d\",s,&n)==2) //to see if the scanf read in as many items as you want\n\n\n{ \n...\n}", "locale": "en"}, "zh-CN": {"title": "高精求小数幂", "background": null, "description": "计算量非常大、精度要求非常高的问题是很常见的。举个例子，计算国家债务就是这么一项对于许多计算机系统来说非常繁重的工作。\n\n现在有这么一个任务要求编写一个程序来计算 $R^n$ 的精确值，其中 $R$ 是一个实数 $(0 < R \\le 9999.9)$ 而 $n$ 是一个整数 $(1 \\le n \\le 250)$。", "inputFormat": "**本题有多组数据。**\n\n对于每组数据，一行两个数字 $R,n$，中间有至少一个空格。\n\n保证每行包括空格在内恰好有 $9$ 个字符，且 $n$ 后面没有空格。\n\n**请读入到输入文件末尾：**\n\n- 对于 C++ 的 `std::cin`，可以使用 `while (std::cin >> s >> n) {/* ... */}` 来实现这一功能，其中 `s` 是 `std::string` 类型的变量。\n- 对于 C/C++ 的 `scanf`，可以使用 `while (scanf(\"%s%d\", s, &n) == 2) {/* ... */}` 来实现这一功能，其中 `s` 是 `char*` 类型的变量。\n- 对于其他输入函数实现这一功能的方式，请自行查阅文档。\n\n保证数据组数不超过 $11$ 组。", "outputFormat": "对于每组数据，输出一行一个实数，表示 $R^n$ 的**精确值**。\n\n输出有三点要求：\n\n1. 输出不允许有前导 $0$。\n2. 小数部分末尾不能有 $0$。\n3. 如果结果是整数，不应该输出小数点。\n\n**特别地，当答案小于 $\\bm 1$ 时，你需要省略整数部分的 $\\bm 0$，输出形如 `.25` 的答案。**", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1518", "type": "P", "difficulty": 3, "samples": [["*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......", "49"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "USACO"], "title": "[USACO2.4] 两只塔姆沃斯牛 The Tamworth Two", "background": null, "description": "两只牛逃跑到了森林里。Farmer John 开始用他的专家技术追捕这两头牛。你的任务是模拟他们的行为（牛和 John）。\n\n追击在 $10 \\times 10$ 的平面网格内进行。一个格子可以是：一个障碍物，两头牛（它们总在一起），或者 Farmer John。两头牛和 Farmer John 可以在同一个格子内（当他们相遇时），但是他们都不能进入有障碍的格子。\n\n一个格子可以是：\n- `.` 空地；\n- `*` 障碍物；\n- `C` 两头牛；\n- `F` Farmer John。\n\n这里有一个地图的例子：\n\n```plain\n*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......\n```\n\n牛在地图里以固定的方式游荡。每分钟，它们可以向前移动或是转弯。如果前方无障碍（地图边沿也是障碍），它们会按照原来的方向前进一步。否则它们会用这一分钟顺时针转 $90$ 度。 同时，它们不会离开地图。\n\nFarmer John 深知牛的移动方法，他也这么移动。\n\n每次（每分钟）Farmer John 和两头牛的移动是同时的。如果他们在移动的时候穿过对方，但是没有在同一格相遇，我们不认为他们相遇了。当他们在某分钟末在某格子相遇，那么追捕结束。\n\n读入十行表示地图。每行都只包含 $10$ 个字符，表示的含义和上面所说的相同。保证地图中只有一个 `F` 和一个 `C`。`F` 和 `C` 一开始不会处于同一个格子中。\n\n计算 Farmer John 需要多少分钟来抓住他的牛，假设牛和 Farmer John 一开始的行动方向都是正北（即上）。 如果 John 和牛永远不会相遇，输出 $0$。", "inputFormat": "输入共十行，每行 $10$ 个字符，表示如上文描述的地图。", "outputFormat": "输出一个数字，表示 John 需要多少时间才能抓住牛们。如果 John 无法抓住牛，则输出 $0$。", "hint": "翻译来自NOCOW\n\nUSACO 2.4", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] The Tamworth Two", "background": "", "description": "Two cows have escaped into the forest. Farmer John begins to pursue them using his expert technique. Your task is to simulate their behavior (the cows and John).\n\nThe chase takes place on a $10 \\times 10$ grid. Each cell can be: an obstacle, the two cows (they always stay together), or Farmer John. The cows and Farmer John may occupy the same cell (when they meet), but neither can enter a cell with an obstacle.\n\nA cell can be:\n- `.` empty ground;\n- `*` obstacle;\n- `C` the two cows;\n- `F` Farmer John.\n\nHere is an example map:\n\n```plain\n*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......\n```\n\nThe cows wander the map in a fixed way. Each minute, they either move forward or turn. If the cell directly ahead is not blocked (the map border also counts as a blockage), they advance one cell in their current direction. Otherwise, they spend that minute turning 90 degrees clockwise. They never move off the map.\n\nFarmer John knows the cows' movement rule and moves in exactly the same way.\n\nThe cows and Farmer John move simultaneously each minute. If they pass through each other during a move but do not end up in the same cell at the end of that minute, that does not count as a meeting. When they occupy the same cell at the end of some minute, the chase ends.\n\nRead ten lines describing the map. Each line contains exactly 10 characters, with meanings as defined above. There is exactly one `F` and one `C`. `F` and `C` do not start in the same cell.\n\nCompute how many minutes Farmer John needs to catch the cows, assuming both the cows and Farmer John initially face north (up). If John and the cows will never meet, output 0.", "inputFormat": "The input consists of ten lines, each with 10 characters, describing the map as above.", "outputFormat": "Output a single integer: the number of minutes Farmer John needs to catch the cows. If he cannot catch them, output 0.", "hint": "Translation from NOCOW.\nUSACO 2.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 两只塔姆沃斯牛 The Tamworth Two", "background": null, "description": "两只牛逃跑到了森林里。Farmer John 开始用他的专家技术追捕这两头牛。你的任务是模拟他们的行为（牛和 John）。\n\n追击在 $10 \\times 10$ 的平面网格内进行。一个格子可以是：一个障碍物，两头牛（它们总在一起），或者 Farmer John。两头牛和 Farmer John 可以在同一个格子内（当他们相遇时），但是他们都不能进入有障碍的格子。\n\n一个格子可以是：\n- `.` 空地；\n- `*` 障碍物；\n- `C` 两头牛；\n- `F` Farmer John。\n\n这里有一个地图的例子：\n\n```plain\n*...*.....\n......*...\n...*...*..\n..........\n...*.F....\n*.....*...\n...*......\n..C......*\n...*.*....\n.*.*......\n```\n\n牛在地图里以固定的方式游荡。每分钟，它们可以向前移动或是转弯。如果前方无障碍（地图边沿也是障碍），它们会按照原来的方向前进一步。否则它们会用这一分钟顺时针转 $90$ 度。 同时，它们不会离开地图。\n\nFarmer John 深知牛的移动方法，他也这么移动。\n\n每次（每分钟）Farmer John 和两头牛的移动是同时的。如果他们在移动的时候穿过对方，但是没有在同一格相遇，我们不认为他们相遇了。当他们在某分钟末在某格子相遇，那么追捕结束。\n\n读入十行表示地图。每行都只包含 $10$ 个字符，表示的含义和上面所说的相同。保证地图中只有一个 `F` 和一个 `C`。`F` 和 `C` 一开始不会处于同一个格子中。\n\n计算 Farmer John 需要多少分钟来抓住他的牛，假设牛和 Farmer John 一开始的行动方向都是正北（即上）。 如果 John 和牛永远不会相遇，输出 $0$。", "inputFormat": "输入共十行，每行 $10$ 个字符，表示如上文描述的地图。", "outputFormat": "输出一个数字，表示 John 需要多少时间才能抓住牛们。如果 John 无法抓住牛，则输出 $0$。", "hint": "翻译来自NOCOW\n\nUSACO 2.4", "locale": "zh-CN"}}}
{"pid": "P1519", "type": "P", "difficulty": 3, "samples": [["5 3\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO"], "title": "[USACO2.4] 穿越栅栏 Overfencing", "background": "", "description": "Farmer John 在外面的田野上搭建了一个巨大的用栅栏围成的迷宫。幸运的是，他在迷宫的边界上留出了两段栅栏作为迷宫的出口。更幸运的是，他所建造的迷宫是一个“完美的”迷宫：即你能从迷宫中的任意一点找到一条走出迷宫的路。\n\n给定迷宫的宽度 $W$（$1 \\leq W \\leq 38$）及高度 $H$（$1 \\leq H \\leq 100$）。$2 \\times H+1$ 行，每行 $2 \\times W+1$ 的字符以下面给出的格式表示一个迷宫。然后计算从迷宫中最“糟糕”的那一个点走出迷宫所需的步数（即使从这一点以最优的方式走向最靠近的出口，它仍然需要最多的步数）。\n\n当然了，牛们只会水平或垂直地在 X 或 Y 轴上移动，他们从来不走对角线。每移动到一个新的方格算作一步（包括移出迷宫的那一步）。\n\n这是一个 $W=5,H=3$ 的迷宫：\n\n```plain\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+\n```\n如上图的例子，栅栏的柱子只出现在奇数行或奇数列。每个迷宫只有两个出口。", "inputFormat": "第一行两个整数 $W,H$。\n\n接下来 $2 \\times H+1$ 行：每行 $2 \\times W+1$ 个字符，描述一个迷宫。\n", "outputFormat": "输出一个单独的整数，表示最坏情况下牛走出迷宫的最小步数。\n", "hint": "翻译来自NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] Overfencing", "background": "", "description": "Farmer John built a huge maze enclosed by fences out in the field. Fortunately, he left two fence openings on the boundary of the maze as exits. Even better, the maze he built is “perfect”: from any point in the maze you can find a path to an exit.\n\nGiven the width $W$ ($1 \\leq W \\leq 38$) and height $H$ ($1 \\leq H \\leq 100$), a maze is described by $2 \\times H+1$ lines, each with $2 \\times W+1$ characters in the format shown below. Compute the number of steps needed to exit the maze from the “worst” starting cell (i.e., even if you head optimally toward the nearest exit from that cell, it still requires the most steps).\n\nCows move only horizontally or vertically along the X or Y axes; they never move diagonally. Moving into a new cell counts as one step (including the step that moves out of the maze).\n\nHere is a maze with $W=5, H=3$:\n\n```plain\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+\n```\nIn the example above, fence posts appear only in odd-numbered rows or odd-numbered columns. Each maze has exactly two exits.", "inputFormat": "The first line contains two integers $W,H$.\n\nThen follow $2 \\times H+1$ lines: each line has $2 \\times W+1$ characters describing a maze.", "outputFormat": "Output a single integer: the minimal number of steps to exit the maze in the worst case.", "hint": "Translation from NOCOW.\n\nUSACO 2.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 穿越栅栏 Overfencing", "background": "", "description": "Farmer John 在外面的田野上搭建了一个巨大的用栅栏围成的迷宫。幸运的是，他在迷宫的边界上留出了两段栅栏作为迷宫的出口。更幸运的是，他所建造的迷宫是一个“完美的”迷宫：即你能从迷宫中的任意一点找到一条走出迷宫的路。\n\n给定迷宫的宽度 $W$（$1 \\leq W \\leq 38$）及高度 $H$（$1 \\leq H \\leq 100$）。$2 \\times H+1$ 行，每行 $2 \\times W+1$ 的字符以下面给出的格式表示一个迷宫。然后计算从迷宫中最“糟糕”的那一个点走出迷宫所需的步数（即使从这一点以最优的方式走向最靠近的出口，它仍然需要最多的步数）。\n\n当然了，牛们只会水平或垂直地在 X 或 Y 轴上移动，他们从来不走对角线。每移动到一个新的方格算作一步（包括移出迷宫的那一步）。\n\n这是一个 $W=5,H=3$ 的迷宫：\n\n```plain\n+-+-+-+-+-+\n|         |\n+-+ +-+ + +\n|     | | |\n+ +-+-+ + +\n| |     |  \n+-+ +-+-+-+\n```\n如上图的例子，栅栏的柱子只出现在奇数行或奇数列。每个迷宫只有两个出口。", "inputFormat": "第一行两个整数 $W,H$。\n\n接下来 $2 \\times H+1$ 行：每行 $2 \\times W+1$ 个字符，描述一个迷宫。\n", "outputFormat": "输出一个单独的整数，表示最坏情况下牛走出迷宫的最小步数。\n", "hint": "翻译来自NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN"}}}
{"pid": "P1520", "type": "P", "difficulty": 6, "samples": [["12", "(x-1)(x+1)(x^2+1)(x^2-x+1)(x^2+x+1)(x^4-x^2+1)"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "因式分解", "background": "某天，小 W 正在上数学课，听见老师讲解因式分解增补删除及十字相乘法的技巧，感觉非常厉害，于是想用这些技巧来做题，但做着做着遇到一道不会做的题，你能帮帮他吗？", "description": "在整多项式环内对多项式 $x^n-1$ 作因式分解（简单点说就是做因式分解题），要求分解到全部为素多项式为止（即最后结果不能有可继续分解的多项式）。", "inputFormat": "输入共一行，一个正整数 $n$。", "outputFormat": "输出一行一个字符串，表示因式分解的结果。\n\n最后的输出中每个因式应该不含空格，在可以省略 $0$、$1$、乘号和括号的情况下应该尽可能省略。\n\n有多个因式时，每个因式应该降幂排列，并且保证首项系数为正。\n\n除此以外，我们要求按如下顺序排列因式：\n\n- 优先输出次数低的因式，对于次数相同的因式，依次比较每个因式的系数，从高指数项到低指数项（包括被省略即系数为 $0$ 的项）。\n- 系数首先比较绝对值，其次比较符号。规定绝对值小的系数字典序小，绝对值相同时比较符号，负号字典序比正号小。字典序越小的因式应该排在越前面输出。详见样例。", "hint": "### 提示\n\n$(x^n-1)/(x+1)=\\cdots$\n\n### 数据范围及约定\n\n- 对 $20\\%$ 数据，$1 \\le n \\le 200$；\n- 对 $100\\%$ 数据，$1 \\le n \\le 5000$。", "locale": "zh-CN", "translations": {"en": {"title": "Factorization", "background": "One day, little W was in math class and heard the teacher explain techniques for factorization, including augmentation-deletion (zēng bǔ shān chú) and the cross multiplication method. He thought they were amazing and wanted to use them to solve problems, but then he ran into a problem he couldn’t solve. Can you help him?", "description": "Factor the polynomial $x^n - 1$ over the ring of integer polynomials (in short, this is a factorization problem), and continue factoring until all factors are irreducible polynomials (i.e., no factor can be further factored).", "inputFormat": "A single line containing a positive integer $n$.", "outputFormat": "Output one line with a single string representing the factorization result.\n\nIn the final output, each factor should contain no spaces. Whenever $0$, $1$, the multiplication sign, and parentheses can be omitted, do so whenever possible.\n\nIf there are multiple factors, each factor should be written in descending powers, and its leading coefficient must be positive.\n\nIn addition, order the factors as follows:\n- Prefer factors of lower degree. For factors with the same degree, compare their coefficients term by term from higher to lower exponents (including omitted terms whose coefficients are $0$).\n- For coefficients, compare absolute values first, then signs. A smaller absolute value is lexicographically smaller; if absolute values are equal, a negative sign is lexicographically smaller than a positive sign. Factors with lexicographically smaller sequences should be output earlier. See the sample.", "hint": "### Hint\n\n$(x^n-1)/(x+1)=\\cdots$\n\n### Constraints and Conventions\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 200$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "因式分解", "background": "某天，小 W 正在上数学课，听见老师讲解因式分解增补删除及十字相乘法的技巧，感觉非常厉害，于是想用这些技巧来做题，但做着做着遇到一道不会做的题，你能帮帮他吗？", "description": "在整多项式环内对多项式 $x^n-1$ 作因式分解（简单点说就是做因式分解题），要求分解到全部为素多项式为止（即最后结果不能有可继续分解的多项式）。", "inputFormat": "输入共一行，一个正整数 $n$。", "outputFormat": "输出一行一个字符串，表示因式分解的结果。\n\n最后的输出中每个因式应该不含空格，在可以省略 $0$、$1$、乘号和括号的情况下应该尽可能省略。\n\n有多个因式时，每个因式应该降幂排列，并且保证首项系数为正。\n\n除此以外，我们要求按如下顺序排列因式：\n\n- 优先输出次数低的因式，对于次数相同的因式，依次比较每个因式的系数，从高指数项到低指数项（包括被省略即系数为 $0$ 的项）。\n- 系数首先比较绝对值，其次比较符号。规定绝对值小的系数字典序小，绝对值相同时比较符号，负号字典序比正号小。字典序越小的因式应该排在越前面输出。详见样例。", "hint": "### 提示\n\n$(x^n-1)/(x+1)=\\cdots$\n\n### 数据范围及约定\n\n- 对 $20\\%$ 数据，$1 \\le n \\le 200$；\n- 对 $100\\%$ 数据，$1 \\le n \\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P1521", "type": "P", "difficulty": 3, "samples": [["5 3", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "求逆序对", "background": "", "description": "我们说$(i,j)$ 是 $a_1,a_2,\\cdots,a_N$ 的一个逆序对，当且仅当 $i<j$ 且 $a_i>a_j$。例如 $[2,4,1,3,5]$ 的逆序对有 $3$ 个，分别为 $(1,3),(2, 3), (2, 4)$。现在已知 $N$ 和 $K$，求 $1,2,3,\\cdots,N$ 的所有特定排列，使得这些排列的逆序对的数量恰好为 $K$。输出这些特定排列的数量。\n\n例如 $N=5$，$K=3$ 的时候，满足条件的排列有 $15$ 个，它们是：\n\n\n- $[1, 2, 5, 4, 3]$；    \n- $[1, 3, 4, 5, 2]$；   \n- $[1, 3, 5, 2, 4]$；   \n- $[1, 4, 2, 5, 3]$；   \n- $[1, 4, 3, 2, 5]$；   \n- $[1, 5, 2, 3, 4]$；   \n- $[2, 1, 4, 5, 3]$；   \n- $[2, 1, 5, 3, 4]$；   \n- $[2, 3, 1, 5, 4]$；   \n- $[2, 3, 4, 1, 5]$；\n- $[2, 4, 1, 3, 5]$；    \n- $[3, 1, 2, 5, 4]$；   \n- $[3, 1, 4, 2, 5]$；   \n- $[3, 2, 1, 4, 5]$；   \n- $[4, 1, 2, 3, 5]$。\n", "inputFormat": "输入共第一行，两个整数 $N$ 和 $K$。", "outputFormat": "将 $1\\cdots N$ 的逆序对数量为 $K$ 的特定排列的数量输出。为了避免高精度计算，请将结果对 $10000$ 取模后再输出。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $N \\le 100$，$K \\le N\\times (N-1)/2$。", "locale": "zh-CN", "translations": {"en": {"title": "Count Inversions", "background": "", "description": "We call $(i, j)$ an inversion of $a_1, a_2, \\cdots, a_N$ if and only if $i < j$ and $a_i > a_j$. For example, $[2, 4, 1, 3, 5]$ has 3 inversions: $(1, 3), (2, 3), (2, 4)$. Now given $N$ and $K$, find the number of permutations of $1, 2, 3, \\cdots, N$ whose number of inversions is exactly $K$. Output that count.\n\nFor example, when $N = 5$, $K = 3$, there are 15 valid permutations. They are:\n\n- [1, 2, 5, 4, 3].\n- [1, 3, 4, 5, 2].\n- [1, 3, 5, 2, 4].\n- [1, 4, 2, 5, 3].\n- [1, 4, 3, 2, 5].\n- [1, 5, 2, 3, 4].\n- [2, 1, 4, 5, 3].\n- [2, 1, 5, 3, 4].\n- [2, 3, 1, 5, 4].\n- [2, 3, 4, 1, 5].\n- [2, 4, 1, 3, 5].\n- [3, 1, 2, 5, 4].\n- [3, 1, 4, 2, 5].\n- [3, 2, 1, 4, 5].\n- [4, 1, 2, 3, 5].", "inputFormat": "The first line contains two integers $N$ and $K$.", "outputFormat": "Output the number of permutations of $1 \\cdots N$ whose number of inversions is $K$. To avoid big integer arithmetic, output the result modulo $10000$.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that $N \\le 100$, $K \\le N \\times (N - 1) / 2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求逆序对", "background": "", "description": "我们说$(i,j)$ 是 $a_1,a_2,\\cdots,a_N$ 的一个逆序对，当且仅当 $i<j$ 且 $a_i>a_j$。例如 $[2,4,1,3,5]$ 的逆序对有 $3$ 个，分别为 $(1,3),(2, 3), (2, 4)$。现在已知 $N$ 和 $K$，求 $1,2,3,\\cdots,N$ 的所有特定排列，使得这些排列的逆序对的数量恰好为 $K$。输出这些特定排列的数量。\n\n例如 $N=5$，$K=3$ 的时候，满足条件的排列有 $15$ 个，它们是：\n\n\n- $[1, 2, 5, 4, 3]$；    \n- $[1, 3, 4, 5, 2]$；   \n- $[1, 3, 5, 2, 4]$；   \n- $[1, 4, 2, 5, 3]$；   \n- $[1, 4, 3, 2, 5]$；   \n- $[1, 5, 2, 3, 4]$；   \n- $[2, 1, 4, 5, 3]$；   \n- $[2, 1, 5, 3, 4]$；   \n- $[2, 3, 1, 5, 4]$；   \n- $[2, 3, 4, 1, 5]$；\n- $[2, 4, 1, 3, 5]$；    \n- $[3, 1, 2, 5, 4]$；   \n- $[3, 1, 4, 2, 5]$；   \n- $[3, 2, 1, 4, 5]$；   \n- $[4, 1, 2, 3, 5]$。\n", "inputFormat": "输入共第一行，两个整数 $N$ 和 $K$。", "outputFormat": "将 $1\\cdots N$ 的逆序对数量为 $K$ 的特定排列的数量输出。为了避免高精度计算，请将结果对 $10000$ 取模后再输出。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $N \\le 100$，$K \\le N\\times (N-1)/2$。", "locale": "zh-CN"}}}
{"pid": "P1522", "type": "P", "difficulty": 4, "samples": [["8\n10 10\n15 10\n20 10\n15 15\n20 15\n30 15\n25 10\n30 10\n01000000\n10111000\n01001000\n01001000\n01110000\n00000010\n00000101\n00000010", "22.071068\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "USACO", "枚举", "最短路"], "title": "[USACO2.4] 牛的旅行 Cow Tours", "background": "", "description": "Farmer John 的农场里有很多 **牧区**。有的路径连接一些特定的牧区。**一片所有连通的牧区** 称为一个 **牧场**。但是就目前而言，你能看到至少有两个牧区通过任何路径都不连通。这样，Farmer John 就有 **多个** 牧场了。\n\nJohn 想在牧场里添加 **恰好** 一条路径。对这条路径有以下限制：\n\n一个牧场的 **直径** 就是牧场中 **最远** 的两个牧区的距离（本题中所提到的所有距离指的都是 **最短的距离**）。考虑如下的有 5 个牧区的牧场，牧区用 `*` 表示，路径用直线表示。每一个牧区都有自己的坐标：\n\n```plain\n                (15,15) (20,15)\n                 D       E\n                 *-------*\n                 |     _/|\n                 |   _/  |\n                 | _/    |\n                 |/      |\n        *--------*-------*\n        A        B       C\n     (10,10)  (15,10) (20,10)\n```\n这个牧场的直径大约是 $12.07106$，最远的两个牧区是 A 和 E，它们之间的最短路径是 $A \\to B \\to E$。\n\n这里是 John 的另一个牧场：\n\n```plain\n                         *F(30,15)\n                        / \n                      _/  \n                    _/    \n                   /      \n                  *------* \n                  G      H\n                  (25,10)   (30,10)\n```\n\n在这个例子中，他刚好有这两个牧场。John 将会在这两个牧场中各选一个牧区（即从 $\\{A,B,C,D,E\\}$ 中选择一个牧区，从 $\\{F,G,H\\}$ 中选择一个牧区），然后用一条路径将它们连起来，使得连通后这个新的更大的牧场的直径尽可能小。\n\n注意，如果两条路径中途相交，我们不认为它们是连通的。只有两条路径在同一个牧区相交，我们才认为它们是连通的。\n\n输入文件包括牧区、它们各自的坐标，还有一个如下的对称邻接矩阵：\n\n```plain\n　 A  B  C  D  E  F  G  H \nA  0  1  0  0  0  0  0  0\nB  1  0  1  1  1  0  0  0\nC  0  1  0  0  1  0  0  0\nD  0  1  0  0  1  0  0  0\nE  0  1  1  1  0  0  0  0\nF  0  0  0  0  0  0  1  0\nG  0  0  0  0  0  1  0  1\nH  0  0  0  0  0  0  1  0\n```\n\n其他邻接表中可能直接使用行列而不使用字母来表示每一个牧区。输入数据中不包括牧区的名字。\n\n输入文件 **至少** 包括两个不连通的牧区。\n\n请编程找出一条连接属于两个 **不同牧场** 的牧区的路径，使得连上这条路径后，这个更大的新牧场的直径尽可能小。输出在所有合法的连接方案中，新牧场直径的最小值。", "inputFormat": "第一行一个整数 $N$（$1 \\leq N \\leq 150$），表示牧区数。\n\n接下来 $N$ 行，每行两个整数 $X,Y$（$0 \\leq X ,Y \\leq 10^5$），表示 $N$ 个牧区的坐标。注意每个牧区的坐标都是不一样的。\n\n接下来 $N$ 行，每行 $N$ 个数字，代表邻接矩阵 $M$。第 $i$ 行第 $j$ 列的数字为 $1$，表示 $i$ 号牧区和 $j$ 号牧区之间存在一条道路直接相连；第 $i$ 行第 $j$ 列的数字为 $0$，表示 $i$ 号牧区和 $j$ 号牧区之间不存在直接相连的道路。\n\n保证 $M_{i,j} = M_{j,i}$。", "outputFormat": "只有一行，包括一个实数，表示所求直径。数字保留六位小数。\n\n只需要打到小数点后六位即可，不要做任何特别的四舍五入处理。\n", "hint": "样例对应题目描述中的情况。\n\n最优解是连接 C 牧区和 G 牧区，连接后图上只有一个牧场。这个牧场的直径为 $A \\to B \\to C \\to G \\to F$，长度约为 $22.071068$。可以证明不存在更优的方案。\n\nUSACO 2.4\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] Cow Tours", "background": "", "description": "There are many pastures on Farmer John's farm. Some paths connect certain pairs of pastures. A set of all mutually connected pastures is called a field. However, at present you can see that at least two pastures are not connected by any path. Thus, Farmer John has multiple fields.\n\nJohn wants to add exactly one path. The path is subject to the following:\n\nThe diameter of a field is the distance between the two farthest pastures in the field (all distances in this problem refer to shortest-path distances). Consider the following field with 5 pastures, where pastures are marked by `*` and paths are straight segments. Each pasture has its own coordinates:\n\n```plain\n                (15,15) (20,15)\n                 D       E\n                 *-------*\n                 |     _/|\n                 |   _/  |\n                 | _/    |\n                 |/      |\n        *--------*-------*\n        A        B       C\n     (10,10)  (15,10) (20,10)\n```\nThe diameter of this field is approximately $12.07106$, and the farthest two pastures are A and E, whose shortest path is $A \\to B \\to E$.\n\nHere is John's other field:\n\n```plain\n                         *F(30,15)\n                        / \n                      _/  \n                    _/    \n                   /      \n                  *------* \n                  G      H\n                  (25,10)   (30,10)\n```\n\nIn this example, he has exactly these two fields. John will choose one pasture from $\\{A,B,C,D,E\\}$ and one pasture from $\\{F,G,H\\}$, and then connect them with a path so that the diameter of the new, larger field is as small as possible.\n\nNote that if two paths cross in the middle, we do not consider them connected. They are considered connected only if two paths meet at the same pasture.\n\nThe input file includes the pastures, their coordinates, and a symmetric adjacency matrix like the following:\n\n```plain\n　 A  B  C  D  E  F  G  H \nA  0  1  0  0  0  0  0  0\nB  1  0  1  1  1  0  0  0\nC  0  1  0  0  1  0  0  0\nD  0  1  0  0  1  0  0  0\nE  0  1  1  1  0  0  0  0\nF  0  0  0  0  0  0  1  0\nG  0  0  0  0  0  1  0  1\nH  0  0  0  0  0  0  1  0\n```\n\nOther adjacency matrices may use row and column indices instead of letters to denote each pasture. The input data does not include pasture names.\n\nThe input file contains at least two pastures that are not connected.\n\nWrite a program to add a single path connecting two pastures from two different fields so that, after adding this path, the diameter of the resulting field is minimized. Output the minimal possible diameter among all valid ways to connect the fields.", "inputFormat": "The first line contains an integer $N$ ($1 \\leq N \\leq 150$), the number of pastures.\n\nThe next $N$ lines each contain two integers $X,Y$ ($0 \\leq X ,Y \\leq 10^5$), the coordinates of the $N$ pastures. Note that each pasture has distinct coordinates.\n\nThe next $N$ lines each contain $N$ numbers representing the adjacency matrix $M$. The number in row $i$, column $j$ is $1$ if pasture $i$ and pasture $j$ are directly connected by a path, and $0$ otherwise.\n\nIt is guaranteed that $M_{i,j} = M_{j,i}$.", "outputFormat": "Output a single line containing a real number, which is the required diameter. Keep six digits after the decimal point.\n\nJust print to six decimal places; do not perform any special rounding.", "hint": "The sample corresponds to the situation described in the statement.\n\nThe optimal solution is to connect pasture C and pasture G. After connecting, there is only one field in the graph. The diameter of this field is $A \\to B \\to C \\to G \\to F$, with length approximately $22.071068$. It can be proven that there is no better plan.\n\nUSACO 2.4\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 牛的旅行 Cow Tours", "background": "", "description": "Farmer John 的农场里有很多 **牧区**。有的路径连接一些特定的牧区。**一片所有连通的牧区** 称为一个 **牧场**。但是就目前而言，你能看到至少有两个牧区通过任何路径都不连通。这样，Farmer John 就有 **多个** 牧场了。\n\nJohn 想在牧场里添加 **恰好** 一条路径。对这条路径有以下限制：\n\n一个牧场的 **直径** 就是牧场中 **最远** 的两个牧区的距离（本题中所提到的所有距离指的都是 **最短的距离**）。考虑如下的有 5 个牧区的牧场，牧区用 `*` 表示，路径用直线表示。每一个牧区都有自己的坐标：\n\n```plain\n                (15,15) (20,15)\n                 D       E\n                 *-------*\n                 |     _/|\n                 |   _/  |\n                 | _/    |\n                 |/      |\n        *--------*-------*\n        A        B       C\n     (10,10)  (15,10) (20,10)\n```\n这个牧场的直径大约是 $12.07106$，最远的两个牧区是 A 和 E，它们之间的最短路径是 $A \\to B \\to E$。\n\n这里是 John 的另一个牧场：\n\n```plain\n                         *F(30,15)\n                        / \n                      _/  \n                    _/    \n                   /      \n                  *------* \n                  G      H\n                  (25,10)   (30,10)\n```\n\n在这个例子中，他刚好有这两个牧场。John 将会在这两个牧场中各选一个牧区（即从 $\\{A,B,C,D,E\\}$ 中选择一个牧区，从 $\\{F,G,H\\}$ 中选择一个牧区），然后用一条路径将它们连起来，使得连通后这个新的更大的牧场的直径尽可能小。\n\n注意，如果两条路径中途相交，我们不认为它们是连通的。只有两条路径在同一个牧区相交，我们才认为它们是连通的。\n\n输入文件包括牧区、它们各自的坐标，还有一个如下的对称邻接矩阵：\n\n```plain\n　 A  B  C  D  E  F  G  H \nA  0  1  0  0  0  0  0  0\nB  1  0  1  1  1  0  0  0\nC  0  1  0  0  1  0  0  0\nD  0  1  0  0  1  0  0  0\nE  0  1  1  1  0  0  0  0\nF  0  0  0  0  0  0  1  0\nG  0  0  0  0  0  1  0  1\nH  0  0  0  0  0  0  1  0\n```\n\n其他邻接表中可能直接使用行列而不使用字母来表示每一个牧区。输入数据中不包括牧区的名字。\n\n输入文件 **至少** 包括两个不连通的牧区。\n\n请编程找出一条连接属于两个 **不同牧场** 的牧区的路径，使得连上这条路径后，这个更大的新牧场的直径尽可能小。输出在所有合法的连接方案中，新牧场直径的最小值。", "inputFormat": "第一行一个整数 $N$（$1 \\leq N \\leq 150$），表示牧区数。\n\n接下来 $N$ 行，每行两个整数 $X,Y$（$0 \\leq X ,Y \\leq 10^5$），表示 $N$ 个牧区的坐标。注意每个牧区的坐标都是不一样的。\n\n接下来 $N$ 行，每行 $N$ 个数字，代表邻接矩阵 $M$。第 $i$ 行第 $j$ 列的数字为 $1$，表示 $i$ 号牧区和 $j$ 号牧区之间存在一条道路直接相连；第 $i$ 行第 $j$ 列的数字为 $0$，表示 $i$ 号牧区和 $j$ 号牧区之间不存在直接相连的道路。\n\n保证 $M_{i,j} = M_{j,i}$。", "outputFormat": "只有一行，包括一个实数，表示所求直径。数字保留六位小数。\n\n只需要打到小数点后六位即可，不要做任何特别的四舍五入处理。\n", "hint": "样例对应题目描述中的情况。\n\n最优解是连接 C 牧区和 G 牧区，连接后图上只有一个牧场。这个牧场的直径为 $A \\to B \\to C \\to G \\to F$，长度约为 $22.071068$。可以证明不存在更优的方案。\n\nUSACO 2.4\n", "locale": "zh-CN"}}}
{"pid": "P1523", "type": "P", "difficulty": 4, "samples": [["7\r\n0 6\r\n1 0\r\n2 3\r\n5 4\r\n6 1\r\n7 5\r\n8 2\r\n", "25.58\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "旅行商简化版", "background": "欧几里德旅行商(Euclidean Traveling Salesman)问题也就是货郎担问题一直是困扰全世界数学家、计算机学家的著名问题。现有的算法都没有办法在确定型机器上在多项式时间内求出最优解，但是有办法在多项式时间内求出一个较优解。\n\n\n为了简化问题，而且保证能在多项式时间内求出最优解，J.L.Bentley 提出了一种叫做 bitonic tour 的哈密尔顿环游。它的要求是任意两点 $(a,b)$ 之间的相互到达的代价 $\\mathrm{dist}(a,b)=\\mathrm{dist}(b, a)$ 且任意两点之间可以相互到达，并且环游的路线只能是从最西端单向到最东端，再单项返回最西端，并且是一个哈密尔顿回路。\n", "description": "本题为著名的 NPC 难题的简化版本。\n\n现在笛卡尔平面上有 $n\\ (n \\le 1000)$ 个点，每个点的坐标为 $(x,y)$，（$-2^{31}<x,y<2^{31}$，且为整数），任意两点之间相互到达的代价为这两点的欧几里德距离，现要你编程求出最短 bitonic tour。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示某个点的坐标。\n\n输入中保证没有重复的两点，保证最西端和最东端都只有一个点。", "outputFormat": "一行，即最短回路的长度，保留 $2$ 位小数。\n", "hint": "### 题目来源\n\n《算法导论（第二版）》 15-1", "locale": "zh-CN", "translations": {"en": {"title": "Traveling Salesman, Simplified", "background": "The Euclidean Traveling Salesman problem, also known as the \"货郎担\" problem, has long challenged mathematicians and computer scientists around the world. No existing algorithm can compute an optimal solution in polynomial time on a deterministic machine, but there are algorithms that can compute a near-optimal solution in polynomial time.\n\nTo simplify the problem while ensuring that an optimal solution can be found in polynomial time, J. L. Bentley proposed a Hamiltonian tour called the bitonic tour. Its requirements are: for any two points $(a, b)$, the travel cost is symmetric, i.e., $\\mathrm{dist}(a, b) = \\mathrm{dist}(b, a)$, and every pair of points is mutually reachable. The tour must go monotonically from the westernmost point to the easternmost point, then monotonically return to the westernmost point, forming a Hamiltonian cycle.", "description": "This problem is a simplified version of the famous NP-complete problem.\n\nThere are $n\\ (n \\le 1000)$ points on the Cartesian plane. Each point has coordinates $(x, y)$, where $-2^{31} < x, y < 2^{31}$ and both are integers. The cost to travel between any two points is the Euclidean distance between them. Your task is to compute the shortest bitonic tour.", "inputFormat": "The first line contains an integer $n$.\n\nEach of the next $n$ lines contains two integers $x, y$, representing the coordinates of a point.\n\nIt is guaranteed that there are no duplicate points, and that both the westernmost point and the easternmost point are unique.", "outputFormat": "Output one line: the length of the shortest tour, with $2$ decimal places.", "hint": "Source: Introduction to Algorithms (Second Edition), 15-1.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "旅行商简化版", "background": "欧几里德旅行商(Euclidean Traveling Salesman)问题也就是货郎担问题一直是困扰全世界数学家、计算机学家的著名问题。现有的算法都没有办法在确定型机器上在多项式时间内求出最优解，但是有办法在多项式时间内求出一个较优解。\n\n\n为了简化问题，而且保证能在多项式时间内求出最优解，J.L.Bentley 提出了一种叫做 bitonic tour 的哈密尔顿环游。它的要求是任意两点 $(a,b)$ 之间的相互到达的代价 $\\mathrm{dist}(a,b)=\\mathrm{dist}(b, a)$ 且任意两点之间可以相互到达，并且环游的路线只能是从最西端单向到最东端，再单项返回最西端，并且是一个哈密尔顿回路。\n", "description": "本题为著名的 NPC 难题的简化版本。\n\n现在笛卡尔平面上有 $n\\ (n \\le 1000)$ 个点，每个点的坐标为 $(x,y)$，（$-2^{31}<x,y<2^{31}$，且为整数），任意两点之间相互到达的代价为这两点的欧几里德距离，现要你编程求出最短 bitonic tour。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示某个点的坐标。\n\n输入中保证没有重复的两点，保证最西端和最东端都只有一个点。", "outputFormat": "一行，即最短回路的长度，保留 $2$ 位小数。\n", "hint": "### 题目来源\n\n《算法导论（第二版）》 15-1", "locale": "zh-CN"}}}
{"pid": "P1524", "type": "P", "difficulty": 5, "samples": [["4 5\r\n.....\r\n.\\...\r\n..\\..\r\n.....\r\n.....\r\n....\\ \r\n.\\X..\r\n.....\r\n", "4\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "十字绣", "background": "考古学家发现了一块布，布上做有针线活，叫做“十字绣”，即交替地在布的两面穿线。\n", "description": "布是一个 $n\\times m$ 的网格，线只能在网格的顶点处才能从布的一面穿到另一面。每一段线都覆盖一个单位网格的两条对角线之一，而在绣的过程中，一针中连续的两段线必须分处布的两面。给出布两面的图案（实线代表该处有线，虚线代表背面有线），问最少需要几针才能绣出来？一针是指针不离开布的一次绣花过程。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vftfilbf.png)\n", "inputFormat": "第一行两个数 $N$ 和 $M(1 \\le N,M \\le 200)$。\n\n接下来 $N$ 行每行 $M$ 个数描述正面。\n\n再接下来 $N$ 行每行 $M$ 个数描述反面。\n\n每个格子的表示如下：\n\n- $\\verb!.!$ 表示空格；\n- $\\verb!/!$ 表示从右上角连到左下角的线；\n- $\\verb!\\!$ 表示从左上角连到右下角的线；\n- $\\verb!X!$ 表示两条对角线交叉。", "outputFormat": "一个数，最少要用的针数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Cross-Stitch", "background": "Archaeologists discovered a piece of cloth with needlework called \"cross-stitch,\" where the thread alternates between the two sides of the cloth.", "description": "The cloth is an $n \\times m$ grid. The thread can pass from one side of the cloth to the other only at the grid vertices. Each segment of thread covers one of the two diagonals of a unit cell, and during stitching, two consecutive segments within a single stitch must lie on opposite sides of the cloth. Given the patterns on both sides of the cloth (solid lines indicate a thread on this side, dashed lines indicate a thread on the opposite side), determine the minimum number of stitches needed to complete the embroidery. A stitch is a single embroidery process during which the needle does not leave the fabric.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vftfilbf.png)", "inputFormat": "The first line contains two numbers $N$ and $M$ ($1 \\le N, M \\le 200$).\n\nThe next $N$ lines each contain $M$ characters describing the front side.\n\nThe following $N$ lines each contain $M$ characters describing the back side.\n\nEach cell is represented as follows:\n- $\\verb!.!$ means empty.\n- $\\verb!/!$ means a thread from the top-right corner to the bottom-left corner.\n- $\\verb!\\!$ means a thread from the top-left corner to the bottom-right corner.\n- $\\verb!X!$ means the two diagonals cross.", "outputFormat": "Output a single integer, the minimum number of stitches required.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "十字绣", "background": "考古学家发现了一块布，布上做有针线活，叫做“十字绣”，即交替地在布的两面穿线。\n", "description": "布是一个 $n\\times m$ 的网格，线只能在网格的顶点处才能从布的一面穿到另一面。每一段线都覆盖一个单位网格的两条对角线之一，而在绣的过程中，一针中连续的两段线必须分处布的两面。给出布两面的图案（实线代表该处有线，虚线代表背面有线），问最少需要几针才能绣出来？一针是指针不离开布的一次绣花过程。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vftfilbf.png)\n", "inputFormat": "第一行两个数 $N$ 和 $M(1 \\le N,M \\le 200)$。\n\n接下来 $N$ 行每行 $M$ 个数描述正面。\n\n再接下来 $N$ 行每行 $M$ 个数描述反面。\n\n每个格子的表示如下：\n\n- $\\verb!.!$ 表示空格；\n- $\\verb!/!$ 表示从右上角连到左下角的线；\n- $\\verb!\\!$ 表示从左上角连到右下角的线；\n- $\\verb!X!$ 表示两条对角线交叉。", "outputFormat": "一个数，最少要用的针数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1525", "type": "P", "difficulty": 4, "samples": [["4 6\n1 4 2534\n2 3 3512\n1 2 28351\n1 3 6618\n2 4 1805\n3 4 12884", "3512"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "2010", "二分", "并查集", "NOIP 提高组", "排序", "二分图"], "title": "[NOIP 2010 提高组] 关押罪犯", "background": "NOIP2010 提高组 T3", "description": "S 城现有两座监狱，一共关押着 $N$ 名罪犯，编号分别为 $1\\sim N$。他们之间的关系自然也极不和谐。很多罪犯之间甚至积怨已久，如果客观条件具备则随时可能爆发冲突。我们用“怨气值”（一个正整数值）来表示某两名罪犯之间的仇恨程度，怨气值越大，则这两名罪犯之间的积怨越多。如果两名怨气值为 $c$ 的罪犯被关押在同一监狱，他们俩之间会发生摩擦，并造成影响力为 $c$ 的冲突事件。\n\n每年年末，警察局会将本年内监狱中的所有冲突事件按影响力从大到小排成一个列表，然后上报到 S 城 Z 市长那里。公务繁忙的 Z 市长只会去看列表中的第一个事件的影响力，如果影响很坏，他就会考虑撤换警察局长。\n\n在详细考察了 $N$ 名罪犯间的矛盾关系后，警察局长觉得压力巨大。他准备将罪犯们在两座监狱内重新分配，以求产生的冲突事件影响力都较小，从而保住自己的乌纱帽。假设只要处于同一监狱内的某两个罪犯间有仇恨，那么他们一定会在每年的某个时候发生摩擦。\n\n那么，应如何分配罪犯，才能使 Z 市长看到的那个冲突事件的影响力最小？这个最小值是多少？", "inputFormat": "每行中两个数之间用一个空格隔开。第一行为两个正整数 $N,M$，分别表示罪犯的数目以及存在仇恨的罪犯对数。接下来的 $M$ 行每行为三个正整数 $a_j,b_j,c_j$，表示 $a_j$ 号和 $b_j$ 号罪犯之间存在仇恨，其怨气值为 $c_j$。数据保证 $1\\le a_j< b_j\\leq N, 0 < c_j\\leq 10^9$，且每对罪犯组合只出现一次。", "outputFormat": "共一行，为 Z 市长看到的那个冲突事件的影响力。如果本年内监狱中未发生任何冲突事件，请输出 `0`。", "hint": "**输入输出样例说明**\n\n罪犯之间的怨气值如下面左图所示，右图所示为罪犯的分配方法，市长看到的冲突事件影响力是 $3512$（由 $2$ 号和 $3$ 号罪犯引发）。其他任何分法都不会比这个分法更优。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uia11zcq.png)\n\n**数据范围**  \n\n对于 $30\\%$ 的数据有 $N\\leq 15$。\n\n对于 $70\\%$ 的数据有 $N\\leq 2000,M\\leq 50000$。  \n\n对于 $100\\%$ 的数据有 $N\\leq 20000,M\\leq 100000$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2010 Senior] Imprisoning Criminals", "background": "NOIP 2010 Senior T3.", "description": "City S currently has two prisons, holding $N$ criminals numbered from $1$ to $N$. Their relationships are highly discordant. Many pairs of criminals have long-standing grudges and may break into conflict whenever conditions allow. We use the “resentment value” (a positive integer) to represent the hatred between two criminals; the larger the resentment value, the deeper their grudge. If two criminals with resentment value $c$ are held in the same prison, they will clash and cause a conflict event with impact $c$.\n\nAt the end of each year, the police department sorts all conflict events in the prisons by impact from large to small, and submits the list to Mayor Z of City S. The busy Mayor Z will only look at the impact of the first event in the list. If the impact is severe, he may consider replacing the police chief.\n\nAfter carefully reviewing the conflicts among the $N$ criminals, the police chief feels great pressure. He plans to reassign the criminals between the two prisons to keep the impact of conflict events low, thereby protecting his position. Assume that if two criminals held in the same prison have a grudge, they will certainly clash at some point during the year.\n\nHow should the criminals be assigned to minimize the impact of the conflict event that Mayor Z sees? What is this minimum value?", "inputFormat": "A single space separates two numbers in a line. The first line contains two positive integers $N, M$, representing the number of criminals and the number of pairs with grudges, respectively. Each of the next $M$ lines contains three positive integers $a_j, b_j, c_j$, indicating that criminals $a_j$ and $b_j$ have a grudge with resentment value $c_j$. It is guaranteed that $1 \\le a_j < b_j \\leq N$, $0 < c_j \\leq 10^9$, and each pair of criminals appears at most once.", "outputFormat": "Output a single line: the impact of the conflict event that Mayor Z sees. If no conflict occurs in the prisons this year, output `0`.", "hint": "Input-output sample explanation:\n\nThe resentment values between criminals are shown in the left figure below. The right figure shows an assignment of criminals; the impact of the conflict event that the mayor sees is $3512$ (caused by criminals $2$ and $3$). No other assignment is better than this one.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uia11zcq.png)\n\nConstraints\n\n- For $30\\%$ of the testdata, $N \\leq 15$.\n- For $70\\%$ of the testdata, $N \\leq 2000$, $M \\leq 50000$.\n- For $100\\%$ of the testdata, $N \\leq 20000$, $M \\leq 100000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2010 提高组] 关押罪犯", "background": "NOIP2010 提高组 T3", "description": "S 城现有两座监狱，一共关押着 $N$ 名罪犯，编号分别为 $1\\sim N$。他们之间的关系自然也极不和谐。很多罪犯之间甚至积怨已久，如果客观条件具备则随时可能爆发冲突。我们用“怨气值”（一个正整数值）来表示某两名罪犯之间的仇恨程度，怨气值越大，则这两名罪犯之间的积怨越多。如果两名怨气值为 $c$ 的罪犯被关押在同一监狱，他们俩之间会发生摩擦，并造成影响力为 $c$ 的冲突事件。\n\n每年年末，警察局会将本年内监狱中的所有冲突事件按影响力从大到小排成一个列表，然后上报到 S 城 Z 市长那里。公务繁忙的 Z 市长只会去看列表中的第一个事件的影响力，如果影响很坏，他就会考虑撤换警察局长。\n\n在详细考察了 $N$ 名罪犯间的矛盾关系后，警察局长觉得压力巨大。他准备将罪犯们在两座监狱内重新分配，以求产生的冲突事件影响力都较小，从而保住自己的乌纱帽。假设只要处于同一监狱内的某两个罪犯间有仇恨，那么他们一定会在每年的某个时候发生摩擦。\n\n那么，应如何分配罪犯，才能使 Z 市长看到的那个冲突事件的影响力最小？这个最小值是多少？", "inputFormat": "每行中两个数之间用一个空格隔开。第一行为两个正整数 $N,M$，分别表示罪犯的数目以及存在仇恨的罪犯对数。接下来的 $M$ 行每行为三个正整数 $a_j,b_j,c_j$，表示 $a_j$ 号和 $b_j$ 号罪犯之间存在仇恨，其怨气值为 $c_j$。数据保证 $1\\le a_j< b_j\\leq N, 0 < c_j\\leq 10^9$，且每对罪犯组合只出现一次。", "outputFormat": "共一行，为 Z 市长看到的那个冲突事件的影响力。如果本年内监狱中未发生任何冲突事件，请输出 `0`。", "hint": "**输入输出样例说明**\n\n罪犯之间的怨气值如下面左图所示，右图所示为罪犯的分配方法，市长看到的冲突事件影响力是 $3512$（由 $2$ 号和 $3$ 号罪犯引发）。其他任何分法都不会比这个分法更优。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uia11zcq.png)\n\n**数据范围**  \n\n对于 $30\\%$ 的数据有 $N\\leq 15$。\n\n对于 $70\\%$ 的数据有 $N\\leq 2000,M\\leq 50000$。  \n\n对于 $100\\%$ 的数据有 $N\\leq 20000,M\\leq 100000$。", "locale": "zh-CN"}}}
{"pid": "P1526", "type": "P", "difficulty": 7, "samples": [["4 3 6\n0 6\n6 6\n6 0\n0 0\n1 5\n0 3\n1 1\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2003", "NOI", "剪枝"], "title": "[NOI2003] 智破连环阵", "background": null, "description": "B 国在耗资百亿元之后终于研究出了新式武器——连环阵（Zenith Protected Linked Hybrid Zone）。传说中，连环阵是一种永不停滞的自发性智能武器。但经过 A 国间谍的侦察发现，连环阵其实是由 $M$ 个编号为 $1, 2,\\ldots, M$ 的独立武器组成的。最初，$1$ 号武器发挥着攻击作用，其他武器都处在无敌自卫状态。以后，一旦第 $i$（$1\\leq i< M$）号武器被消灭，$1$ 秒种以后第 $i+1$ 号武器就自动从无敌自卫状态变成攻击状态。当第 $M$ 号武器被消灭以后，这个造价昂贵的连环阵就被摧毁了。\n\n为了彻底打击 B 国科学家，A 国军事部长打算用最廉价的武器——炸弹来消灭连环阵。经过长时间的精密探测，A 国科学家们掌握了连环阵中 $M$ 个武器的平面坐标，然后确定了 $n$ 个炸弹的平面坐标并且安放了炸弹。每个炸弹持续爆炸时间为 $5$ 分钟。在引爆时间内，每枚炸弹都可以在瞬间消灭离它平面距离不超过 $k$ 的、处在攻击状态的 B 国武器。和连环阵类似，最初 $a_1$ 号炸弹持续引爆 $5$ 分钟时间，然后 $a_2$ 号炸弹持续引爆 $5$ 分钟时间，接着 $a_3$ 号炸弹引爆 $\\ldots$ 以此类推，直到连环阵被摧毁。\n\n显然，不同的序列 $a_1, a_2, a_3\\ldots$ 消灭连环阵的效果也不同。好的序列可以在仅使用较少炸弹的情况下就将连环阵摧毁；坏的序列可能在使用完所有炸弹后仍无法将连环阵摧毁。现在，请你决定一个最优序列 $a_1, a_2, a_3\\ldots$ 使得在第 $a_x$ 号炸弹引爆的时间内连环阵被摧毁。这里的 $x$ 应当尽量小。", "inputFormat": "第一行包含三个整数：$M$、$n$ 和 $k$，分别表示 B 国连环阵由 $M$ 个武器组成，A 国有 $n$ 个炸弹可以使用，炸弹攻击范围为 $k$。以下 $M$ 行，每行由一对整数 $x_i,y_i$ 组成，表示第 $i$ 号武器的平面坐标。再接下来 $n$ 行，每行由一对整数 $u_i,v_i$ 组成，表示第 $i$ 号炸弹的平面坐标。输入数据保证随机、无误、并且必然有解。", "outputFormat": "一行包含一个整数 $x$，表示实际使用的炸弹数。", "hint": "对于 $100\\%$ 的数据，$1\\leq M, n\\leq 100$，$1\\leq k\\leq 1000$，$0\\leq x_i, y_i\\leq 10000$，$0\\leq u_i, v_i\\leq 10000$。\n\n各个测试点 $2$ 秒。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2003] Breaking the Linked Formation", "background": "", "description": "After spending tens of billions, Country B finally developed a new weapon — the Linked Formation (Zenith Protected Linked Hybrid Zone). Legend says the Linked Formation is a self-sustaining intelligent weapon that never stalls. However, reconnaissance by Country A’s spies revealed that the Linked Formation actually consists of $M$ independent weapons numbered $1, 2, \\ldots, M$. Initially, weapon $1$ is in the attack state, while all other weapons are in invincible defense. Thereafter, once weapon $i$ ($1 \\leq i < M$) is destroyed, weapon $i+1$ automatically switches from invincible defense to the attack state $1$ second later. When weapon $M$ is destroyed, this expensive Linked Formation is destroyed.\n\nTo thoroughly defeat Country B’s scientists, the defense minister of Country A plans to use the cheapest weapon — bombs — to destroy the Linked Formation. After long and precise probing, Country A’s scientists obtained the planar coordinates of the $M$ weapons in the Linked Formation, then determined the planar coordinates of $n$ bombs and planted them. Each bomb has a continuous detonation duration of $5$ minutes. During its activation window, each bomb can instantly eliminate any Country B weapon that is in the attack state and whose planar distance to it does not exceed $k$. Similar to the Linked Formation, bomb $a_1$ detonates continuously for $5$ minutes at first, then bomb $a_2$ detonates for $5$ minutes, then bomb $a_3$, and so on, until the Linked Formation is destroyed.\n\nClearly, different sequences $a_1, a_2, a_3, \\ldots$ have different effects. A good sequence may destroy the Linked Formation using only a small number of bombs; a bad sequence may fail even after using all bombs. Now, please determine an optimal sequence $a_1, a_2, a_3, \\ldots$ such that the Linked Formation is destroyed during the detonation time of bomb $a_x$. Here, $x$ should be as small as possible.", "inputFormat": "The first line contains three integers: $M$, $n$, and $k$, denoting that the Linked Formation of Country B consists of $M$ weapons, Country A has $n$ bombs available, and the bomb attack radius is $k$. The next $M$ lines each contain a pair of integers $x_i, y_i$, representing the planar coordinates of weapon $i$. Then the next $n$ lines each contain a pair of integers $u_i, v_i$, representing the planar coordinates of bomb $i$. The input testdata is guaranteed to be random, correct, and to have a solution.", "outputFormat": "One line containing an integer $x$, the actual number of bombs used.", "hint": "For $100\\%$ of the testdata, $1 \\leq M, n \\leq 100$, $1 \\leq k \\leq 1000$, $0 \\leq x_i, y_i \\leq 10000$, $0 \\leq u_i, v_i \\leq 10000$.\n\nEach test point has a time limit of $2$ seconds.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2003] 智破连环阵", "background": null, "description": "B 国在耗资百亿元之后终于研究出了新式武器——连环阵（Zenith Protected Linked Hybrid Zone）。传说中，连环阵是一种永不停滞的自发性智能武器。但经过 A 国间谍的侦察发现，连环阵其实是由 $M$ 个编号为 $1, 2,\\ldots, M$ 的独立武器组成的。最初，$1$ 号武器发挥着攻击作用，其他武器都处在无敌自卫状态。以后，一旦第 $i$（$1\\leq i< M$）号武器被消灭，$1$ 秒种以后第 $i+1$ 号武器就自动从无敌自卫状态变成攻击状态。当第 $M$ 号武器被消灭以后，这个造价昂贵的连环阵就被摧毁了。\n\n为了彻底打击 B 国科学家，A 国军事部长打算用最廉价的武器——炸弹来消灭连环阵。经过长时间的精密探测，A 国科学家们掌握了连环阵中 $M$ 个武器的平面坐标，然后确定了 $n$ 个炸弹的平面坐标并且安放了炸弹。每个炸弹持续爆炸时间为 $5$ 分钟。在引爆时间内，每枚炸弹都可以在瞬间消灭离它平面距离不超过 $k$ 的、处在攻击状态的 B 国武器。和连环阵类似，最初 $a_1$ 号炸弹持续引爆 $5$ 分钟时间，然后 $a_2$ 号炸弹持续引爆 $5$ 分钟时间，接着 $a_3$ 号炸弹引爆 $\\ldots$ 以此类推，直到连环阵被摧毁。\n\n显然，不同的序列 $a_1, a_2, a_3\\ldots$ 消灭连环阵的效果也不同。好的序列可以在仅使用较少炸弹的情况下就将连环阵摧毁；坏的序列可能在使用完所有炸弹后仍无法将连环阵摧毁。现在，请你决定一个最优序列 $a_1, a_2, a_3\\ldots$ 使得在第 $a_x$ 号炸弹引爆的时间内连环阵被摧毁。这里的 $x$ 应当尽量小。", "inputFormat": "第一行包含三个整数：$M$、$n$ 和 $k$，分别表示 B 国连环阵由 $M$ 个武器组成，A 国有 $n$ 个炸弹可以使用，炸弹攻击范围为 $k$。以下 $M$ 行，每行由一对整数 $x_i,y_i$ 组成，表示第 $i$ 号武器的平面坐标。再接下来 $n$ 行，每行由一对整数 $u_i,v_i$ 组成，表示第 $i$ 号炸弹的平面坐标。输入数据保证随机、无误、并且必然有解。", "outputFormat": "一行包含一个整数 $x$，表示实际使用的炸弹数。", "hint": "对于 $100\\%$ 的数据，$1\\leq M, n\\leq 100$，$1\\leq k\\leq 1000$，$0\\leq x_i, y_i\\leq 10000$，$0\\leq u_i, v_i\\leq 10000$。\n\n各个测试点 $2$ 秒。", "locale": "zh-CN"}}}
{"pid": "P1527", "type": "P", "difficulty": 6, "samples": [["2 2\n2 1\n3 4\n1 2 1 2 1\n1 1 2 2 3\n", "1\n3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["集训队互测", "O2优化", "整体二分"], "title": "[国家集训队] 矩阵乘法", "background": "", "description": "给你一个 $n \\times n$ 的矩阵，不用算矩阵乘法，但是每次询问一个子矩形的第 $k$ 小数。\n", "inputFormat": "第一行有两个整数，分别表示矩阵大小 $n$ 和询问组数 $q$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行 $n$ 个整数，表示这个矩阵。第 $(i + 1)$ 行的第 $j$ 个数表示矩阵第 $i$ 行第 $j$ 列的数 $a_{i, j}$。\n\n接下来 $q$ 行，每行五个整数 $x_1, y_1, x_2, y_2, k$，表示一组询问，要求找到以 $(x_1, y_1)$ 为左上角，$(x_2, y_2)$ 为右下角的子矩形中的第 $k$ 小数。", "outputFormat": "对于每组询问，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 100$，$q \\leq 10^3$。\n- 对于 $40\\%$ 的数据，保证 $n \\leq 300$，$q \\leq 10^4$。\n- 对于 $60\\%$ 的数据，保证 $n \\leq 400$，$q \\leq 3 \\times 10^4$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 500$，$1 \\leq q \\leq 6 \\times 10^4$，$0 \\leq a_{i, j} \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Matrix Multiplication", "background": "", "description": "Given an $n \\times n$ matrix, you do not need to perform matrix multiplication. Instead, for each query, find the $k$-th smallest number in a subrectangle.", "inputFormat": "The first line contains two integers, representing the matrix size $n$ and the number of queries $q$.\n\nLines $2$ through $(n + 1)$ each contain $n$ integers, representing the matrix. The $j$-th number on line $(i + 1)$ is the number in row $i$ and column $j$ of the matrix, denoted $a_{i, j}$.\n\nThen $q$ lines follow, each containing five integers $x_1, y_1, x_2, y_2, k$, representing one query. For each query, find the $k$-th smallest number in the subrectangle with top-left corner $(x_1, y_1)$ and bottom-right corner $(x_2, y_2)$.", "outputFormat": "For each query, output a single integer on its own line representing the answer.", "hint": "#### Constraints and Conventions\n\n- For $20\\%$ of the testdata, it is guaranteed that $n \\leq 100$, $q \\leq 10^3$.\n- For $40\\%$ of the testdata, it is guaranteed that $n \\leq 300$, $q \\leq 10^4$.\n- For $60\\%$ of the testdata, it is guaranteed that $n \\leq 400$, $q \\leq 3 \\times 10^4$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 500$, $1 \\leq q \\leq 6 \\times 10^4$, $0 \\leq a_{i, j} \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 矩阵乘法", "background": "", "description": "给你一个 $n \\times n$ 的矩阵，不用算矩阵乘法，但是每次询问一个子矩形的第 $k$ 小数。\n", "inputFormat": "第一行有两个整数，分别表示矩阵大小 $n$ 和询问组数 $q$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行 $n$ 个整数，表示这个矩阵。第 $(i + 1)$ 行的第 $j$ 个数表示矩阵第 $i$ 行第 $j$ 列的数 $a_{i, j}$。\n\n接下来 $q$ 行，每行五个整数 $x_1, y_1, x_2, y_2, k$，表示一组询问，要求找到以 $(x_1, y_1)$ 为左上角，$(x_2, y_2)$ 为右下角的子矩形中的第 $k$ 小数。", "outputFormat": "对于每组询问，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 100$，$q \\leq 10^3$。\n- 对于 $40\\%$ 的数据，保证 $n \\leq 300$，$q \\leq 10^4$。\n- 对于 $60\\%$ 的数据，保证 $n \\leq 400$，$q \\leq 3 \\times 10^4$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 500$，$1 \\leq q \\leq 6 \\times 10^4$，$0 \\leq a_{i, j} \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1528", "type": "P", "difficulty": 5, "samples": [["4\r\n30\r\n40\r\n50\r\n25\r\n10\r\n15\r\n16\r\n17\r\n18\r\n19\r\n20\r\n21\r\n25\r\n24\r\n30\r\n\r\n \r\n", "7\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "贪心", "二分", "深度优先搜索 DFS", "剪枝"], "title": "切蛋糕", "background": "", "description": "Facer今天买了 $n$ 块蛋糕，不料被信息组中球球等好吃懒做的家伙发现了，没办法，只好浪费一点来填他们的嘴巴。他答应给每个人留一口，然后量了量每个人口的大小。Facer 有把刀，可以切蛋糕，但他不能把两块蛋糕拼起来，但是他又不会给任何人两块蛋糕。现在问你，facer 怎样切蛋糕，才能满足最多的人。（facer 的刀很强，切的时候不会浪费蛋糕）。\n\n \n ", "inputFormat": "第一行 $n$，facer 有 $n$ 个蛋糕。接下来 $n$ 行，每行表示一个蛋糕的大小。再一行一个数 $m$，为信息组的人数，然后 $m$ 行，每行一个数，为一个人嘴的大小。$(1\\le n\\le 50$，$ 1\\le m\\le 1024)$\n\n", "outputFormat": "一行，facer最多可以填多少张嘴巴。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Cutting Cakes", "background": "", "description": "Facer bought $n$ cakes today. Unfortunately, the lazy gluttons in the Information Group, including Qiuqiu, found out. He had no choice but to spare some to feed them. He promised to leave one bite for everyone and measured the size of each person's mouth. Facer has a knife and can cut cakes, but he cannot combine two cakes into one serving, and he will not give anyone two cakes. Now, how should Facer cut the cakes to satisfy the maximum number of people? (Facer's knife is perfect; cutting does not waste any cake.)", "inputFormat": "The first line contains $n$, the number of cakes Facer has.  \nEach of the next $n$ lines contains the size of a cake.  \nThe next line contains $m$, the number of people in the Information Group.  \nEach of the next $m$ lines contains one number, the size of a person's mouth.  \nConstraints: $1 \\le n \\le 50$, $1 \\le m \\le 1024$.", "outputFormat": "One line: the maximum number of mouths Facer can fill.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "切蛋糕", "background": "", "description": "Facer今天买了 $n$ 块蛋糕，不料被信息组中球球等好吃懒做的家伙发现了，没办法，只好浪费一点来填他们的嘴巴。他答应给每个人留一口，然后量了量每个人口的大小。Facer 有把刀，可以切蛋糕，但他不能把两块蛋糕拼起来，但是他又不会给任何人两块蛋糕。现在问你，facer 怎样切蛋糕，才能满足最多的人。（facer 的刀很强，切的时候不会浪费蛋糕）。\n\n \n ", "inputFormat": "第一行 $n$，facer 有 $n$ 个蛋糕。接下来 $n$ 行，每行表示一个蛋糕的大小。再一行一个数 $m$，为信息组的人数，然后 $m$ 行，每行一个数，为一个人嘴的大小。$(1\\le n\\le 50$，$ 1\\le m\\le 1024)$\n\n", "outputFormat": "一行，facer最多可以填多少张嘴巴。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1529", "type": "P", "difficulty": 3, "samples": [["5\nA d 6\nB d 3\nC e 9\nd Z 8\ne Z 3", "B 11\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "USACO", "最短路", "Floyd 算法"], "title": "[USACO2.4] 回家 Bessie Come Home", "background": "", "description": "现在是晚餐时间，而母牛们在外面分散的牧场中。 \n\nFarmer John 按响了电铃，所以她们开始向谷仓走去。 你的工作是要指出哪只母牛会最先到达谷仓（在给出的测试数据中，总会**有且只有**一只最快的母牛）。在挤奶的时候（晚餐前），每只母牛都在她自己的牧场上，一些牧场上可能没有母牛。\n\n每个牧场由一条条道路和一个或多个牧场连接（可能包括自己）。有时，两个牧场（可能是字母相同的）之间会有超过一条道路相连。至少有一个牧场和谷仓之间有道路连接。因此，所有的母牛最后都能到达谷仓，并且母牛总是走最短的路径。当然，母牛能向着任意一方向前进，并且她们以相同的速度前进。牧场被标记为 $\\texttt{a} \\ldots \\texttt{z}$ 和 $\\texttt{A} \\ldots \\texttt{Y}$，在用大写字母表示的牧场中有一只母牛，小写字母中则没有。 谷仓的标记是 $\\texttt{Z}$，注意没有母牛在谷仓中。\n\n**注意 $\\texttt{m}$ 和 $\\texttt{M}$ 不是同一个牧场**。", "inputFormat": "第一行一个整数 $P$（$1\\leq P \\leq 10^4$），表示连接牧场（谷仓）的道路的数目。\n\n接下来 $P$ 行，每行用空格分开的两个字母和一个正整数：被道路连接牧场的标号和道路的长度（道路长度均不超过 $10^3$）。\n", "outputFormat": "单独的一行包含二个项目：最先到达谷仓的母牛所在的牧场的标号，和这只母牛走过的路径的长度。", "hint": "翻译来自 NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] Bessie Come Home", "background": "", "description": "It is dinnertime, and the cows are out in scattered pastures. Farmer John rings the electric bell, so they start heading to the barn. Your job is to determine which cow will reach the barn first (in the given testdata, there is always exactly one fastest cow). At milking time (before dinner), each cow is in her own pasture; some pastures may have no cows.\n\nEach road connects a pair of pastures (possibly the same pasture). Sometimes, more than one road connects the same pair of pastures. At least one pasture is connected to the barn by a road. Therefore, all cows can eventually reach the barn, and cows always take the shortest paths. Of course, cows can travel in either direction, and they all travel at the same speed. Pastures are labeled $\\texttt{a} \\ldots \\texttt{z}$ and $\\texttt{A} \\ldots \\texttt{Y}$. Each uppercase-labeled pasture contains one cow, while lowercase-labeled pastures contain no cows. The barn is labeled $\\texttt{Z}$; note that there is no cow in the barn.\n\n**Note that $\\texttt{m}$ and $\\texttt{M}$ are not the same pasture.**", "inputFormat": "The first line contains an integer $P$ ($1 \\leq P \\leq 10^4$), the number of roads connecting pastures and the barn.\n\nEach of the next $P$ lines contains two letters and a positive integer, separated by spaces: the labels of the two pastures connected by the road, and the length of that road (each road length is at most $10^3$).", "outputFormat": "A single line containing two items: the label of the pasture where the cow that reaches the barn first starts, and the length of that cow’s path.", "hint": "Translated from NOCOW.\n\nUSACO 2.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 回家 Bessie Come Home", "background": "", "description": "现在是晚餐时间，而母牛们在外面分散的牧场中。 \n\nFarmer John 按响了电铃，所以她们开始向谷仓走去。 你的工作是要指出哪只母牛会最先到达谷仓（在给出的测试数据中，总会**有且只有**一只最快的母牛）。在挤奶的时候（晚餐前），每只母牛都在她自己的牧场上，一些牧场上可能没有母牛。\n\n每个牧场由一条条道路和一个或多个牧场连接（可能包括自己）。有时，两个牧场（可能是字母相同的）之间会有超过一条道路相连。至少有一个牧场和谷仓之间有道路连接。因此，所有的母牛最后都能到达谷仓，并且母牛总是走最短的路径。当然，母牛能向着任意一方向前进，并且她们以相同的速度前进。牧场被标记为 $\\texttt{a} \\ldots \\texttt{z}$ 和 $\\texttt{A} \\ldots \\texttt{Y}$，在用大写字母表示的牧场中有一只母牛，小写字母中则没有。 谷仓的标记是 $\\texttt{Z}$，注意没有母牛在谷仓中。\n\n**注意 $\\texttt{m}$ 和 $\\texttt{M}$ 不是同一个牧场**。", "inputFormat": "第一行一个整数 $P$（$1\\leq P \\leq 10^4$），表示连接牧场（谷仓）的道路的数目。\n\n接下来 $P$ 行，每行用空格分开的两个字母和一个正整数：被道路连接牧场的标号和道路的长度（道路长度均不超过 $10^3$）。\n", "outputFormat": "单独的一行包含二个项目：最先到达谷仓的母牛所在的牧场的标号，和这只母牛走过的路径的长度。", "hint": "翻译来自 NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN"}}}
{"pid": "P1530", "type": "P", "difficulty": 3, "samples": [["45 56", "0.803(571428)"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "USACO"], "title": "[USACO2.4] 分数化小数 Fractions to Decimals", "background": "", "description": "写一个程序，输入一个形如 $\\dfrac{N}{D}$ 的分数，输出它的小数形式。如果小数有循环节的话，把循环节放在一对圆括号中。\n\n例如，$\\dfrac{1}{3}=0.33333333\\ldots$ 写成 $0.(3)$，$\\dfrac{41}{333}= 0.123123123\\ldots$ 写成 $0.(123)$，整数 $x$ 写成 $x.0$。", "inputFormat": "输入包含两个整数 $N$ 和 $D$（$1 \\leq N,D \\leq 10^5$）。", "outputFormat": "输出按照上面规则计算出的小数表达式。如果结果长度大于 $76$，每行输出 $76$ 个字符。", "hint": "翻译来自NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.4] Fractions to Decimals", "background": "", "description": "Write a program that, given a fraction of the form $\\dfrac{N}{D}$, outputs its decimal representation. If the decimal has a repeating cycle, enclose the cycle in a pair of parentheses.\n\nFor example, $\\dfrac{1}{3}=0.33333333\\ldots$ is written as $0.(3)$, $\\dfrac{41}{333}= 0.123123123\\ldots$ is written as $0.(123)$, and an integer $x$ is written as $x.0$.", "inputFormat": "The input contains two integers $N$ and $D$ ($1 \\leq N, D \\leq 10^5$).", "outputFormat": "Output the decimal representation computed according to the rules above. If the length of the result exceeds $76$, print $76$ characters per line.", "hint": "Translated from NOCOW.\nUSACO 2.4\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.4] 分数化小数 Fractions to Decimals", "background": "", "description": "写一个程序，输入一个形如 $\\dfrac{N}{D}$ 的分数，输出它的小数形式。如果小数有循环节的话，把循环节放在一对圆括号中。\n\n例如，$\\dfrac{1}{3}=0.33333333\\ldots$ 写成 $0.(3)$，$\\dfrac{41}{333}= 0.123123123\\ldots$ 写成 $0.(123)$，整数 $x$ 写成 $x.0$。", "inputFormat": "输入包含两个整数 $N$ 和 $D$（$1 \\leq N,D \\leq 10^5$）。", "outputFormat": "输出按照上面规则计算出的小数表达式。如果结果长度大于 $76$，每行输出 $76$ 个字符。", "hint": "翻译来自NOCOW\n\nUSACO 2.4\n", "locale": "zh-CN"}}}
{"pid": "P1531", "type": "P", "difficulty": 4, "samples": [["5 6\n1 2 3 4 5\nQ 1 5\nU 3 6\nQ 3 4\nQ 4 5\nU 2 9\nQ 1 5", "5\n6\n5\n9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "分块"], "title": "I Hate It", "background": "很多学校流行一种比较的习惯。老师们很喜欢询问，从某某到某某当中，分数最高的是多少。这让很多学生很反感。\n", "description": "不管你喜不喜欢，现在需要你做的是，就是按照老师的要求，写一个程序，模拟老师的询问。当然，老师有时候需要更新某位同学的成绩。\n", "inputFormat": "第一行，有两个正整数 $n$ 和 $m$（$0<n \\le 2\\times 10^5,0<m\\le2 \\times 10^5$），分别代表学生的数目和操作的数目。学生 ID 编号分别从 $1$ 编到 $n$。\n\n第二行包含 $n$ 个整数，代表这 $n$ 个学生的初始成绩，其中第 $i$ 个数代表 ID 为 $i$ 的学生的成绩，保证学生的成绩为 $1 \\sim 10^9$ 之间的正整数。\n\n接下来有 $m$ 行。每一行有一个字符 $c$（只取 `Q` 或 `U`），和两个正整数 $a$，$b$。\n\n- 当 $c$ 为 `Q` 的时候，表示这是一条询问操作，它询问 ID 从 $a$ 到 $b$（包括 $a,b$） 的学生当中，成绩最高的是多少；\n- 当 $c$ 为 `U` 的时候，表示这是一条更新操作，如果当前 $a$ 学生的成绩低于 $b$，则把 ID 为 $a$ 的学生的成绩更改为 $b$，否则不改动。", "outputFormat": "对于每一次询问操作输出一行一个整数，表示最高成绩。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "I Hate It", "background": "Many schools have a habit of making comparisons. Teachers often ask, among students from some ID to another, what the highest score is. This annoys many students.", "description": "Whether you like it or not, your task is to write a program that simulates the teacher’s queries as required. Of course, the teacher sometimes needs to update a student’s score.", "inputFormat": "The first line contains two positive integers $n$ and $m$ ($0 < n \\le 2 \\times 10^5, 0 < m \\le 2 \\times 10^5$), representing the number of students and the number of operations. Student IDs are numbered from $1$ to $n$.\n\nThe second line contains $n$ integers, representing the initial scores of these $n$ students. The $i$-th number is the score of the student with ID $i$, and scores are guaranteed to be positive integers in $1 \\sim 10^9$.\n\nThe next $m$ lines each contain a character $c$ (only `Q` or `U`) and two positive integers $a$ and $b$.\n- When $c$ is `Q`, it is a query operation asking for the maximum score among students whose IDs are from $a$ to $b$ (inclusive).\n- When $c$ is `U`, it is an update operation: if the current score of student $a$ is less than $b$, then set the score of the student with ID $a$ to $b$; otherwise, leave it unchanged.", "outputFormat": "For each query operation, output one line with a single integer representing the maximum score.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "I Hate It", "background": "很多学校流行一种比较的习惯。老师们很喜欢询问，从某某到某某当中，分数最高的是多少。这让很多学生很反感。\n", "description": "不管你喜不喜欢，现在需要你做的是，就是按照老师的要求，写一个程序，模拟老师的询问。当然，老师有时候需要更新某位同学的成绩。\n", "inputFormat": "第一行，有两个正整数 $n$ 和 $m$（$0<n \\le 2\\times 10^5,0<m\\le2 \\times 10^5$），分别代表学生的数目和操作的数目。学生 ID 编号分别从 $1$ 编到 $n$。\n\n第二行包含 $n$ 个整数，代表这 $n$ 个学生的初始成绩，其中第 $i$ 个数代表 ID 为 $i$ 的学生的成绩，保证学生的成绩为 $1 \\sim 10^9$ 之间的正整数。\n\n接下来有 $m$ 行。每一行有一个字符 $c$（只取 `Q` 或 `U`），和两个正整数 $a$，$b$。\n\n- 当 $c$ 为 `Q` 的时候，表示这是一条询问操作，它询问 ID 从 $a$ 到 $b$（包括 $a,b$） 的学生当中，成绩最高的是多少；\n- 当 $c$ 为 `U` 的时候，表示这是一条更新操作，如果当前 $a$ 学生的成绩低于 $b$，则把 ID 为 $a$ 的学生的成绩更改为 $b$，否则不改动。", "outputFormat": "对于每一次询问操作输出一行一个整数，表示最高成绩。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1532", "type": "P", "difficulty": 3, "samples": [["4321\n54321\n", "6174\n82962 75933 63954 61974\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "卡布列克圆舞曲", "background": "", "description": "卡布列克是一位数学家，他在研究数字时发现：任意一个不是用完全相同数字组成的四位数，如果对它们的每位数字重新排序，组成一个较大的数和一个较小的数，然后用较大数减去较小数，差不够四位数时补零，类推下去，最后将变成一个固定的数：$6174$，这就是卡布列克常数，例如：\n\n$4321-1234=3087$。\n\n$8730-378=8352$。\n\n$8532-2358=6174$。\n\n$7641-1467=6174$。\n\n如果 $K$ 位数也照此办理，它们不是变成一个数，而是在几个数字之间形成循环，称作卡布列克圆舞曲。例如对于五位数 $54321$：\n\n$54321-12345=41976$。\n\n$97641-14679=82962$。\n\n$98622-22689=75933$。\n\n$97533-33579=63954$。\n\n$96543-34569=61974$。\n\n$97641-14679=82962$。\n\n我们把 $82962,75933,63954,61974$ 称作循环节，即卡布列克圆舞曲。", "inputFormat": "若干行，每行为一个待求“卡布列克圆舞曲”的起始整数 $n$。（$n<2^{31}$）\n", "outputFormat": "每行为对应整数的循环节，数据之间用空格隔开。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Kaprekar Waltz", "background": "", "description": "Kaprekar was a mathematician. He discovered that for any four-digit number not composed of completely identical digits: if you reorder its digits to form the largest number and the smallest number, then subtract the smaller from the larger; if the difference has fewer than four digits, pad with leading zeros; and repeat this process, it will eventually become a fixed number $6174$, which is the Kaprekar constant. For example:\n\n$4321-1234=3087$.\n\n$8730-378=8352$.\n\n$8532-2358=6174$.\n\n$7641-1467=6174$.\n\nIf a K-digit number is processed in the same way, it does not become a single number but forms a cycle among several numbers, called the Kaprekar Waltz. For example, for the five-digit number $54321$:\n\n$54321-12345=41976$.\n\n$97641-14679=82962$.\n\n$98622-22689=75933$.\n\n$97533-33579=63954$.\n\n$96543-34569=61974$.\n\n$97641-14679=82962$.\n\nWe call 82962, 75933, 63954, 61974 the repeating cycle, i.e., the Kaprekar Waltz.", "inputFormat": "Multiple lines. Each line contains a starting integer $n$ for which to find the \"Kaprekar Waltz\" ($n<2^{31}$).", "outputFormat": "For each input integer, output the corresponding cycle terms on one line, separated by spaces.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "卡布列克圆舞曲", "background": "", "description": "卡布列克是一位数学家，他在研究数字时发现：任意一个不是用完全相同数字组成的四位数，如果对它们的每位数字重新排序，组成一个较大的数和一个较小的数，然后用较大数减去较小数，差不够四位数时补零，类推下去，最后将变成一个固定的数：$6174$，这就是卡布列克常数，例如：\n\n$4321-1234=3087$。\n\n$8730-378=8352$。\n\n$8532-2358=6174$。\n\n$7641-1467=6174$。\n\n如果 $K$ 位数也照此办理，它们不是变成一个数，而是在几个数字之间形成循环，称作卡布列克圆舞曲。例如对于五位数 $54321$：\n\n$54321-12345=41976$。\n\n$97641-14679=82962$。\n\n$98622-22689=75933$。\n\n$97533-33579=63954$。\n\n$96543-34569=61974$。\n\n$97641-14679=82962$。\n\n我们把 $82962,75933,63954,61974$ 称作循环节，即卡布列克圆舞曲。", "inputFormat": "若干行，每行为一个待求“卡布列克圆舞曲”的起始整数 $n$。（$n<2^{31}$）\n", "outputFormat": "每行为对应整数的循环节，数据之间用空格隔开。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1533", "type": "P", "difficulty": 5, "samples": [["7 2\n1 5 2 6 3 7 4\n1 5 3\n2 7 1\n", "3\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "二分", "平衡树", "树状数组", "洛谷原创", "排序", "可持久化线段树"], "title": "可怜的狗狗", "background": "", "description": "小卡家有  $n$ 只狗，由于品种、年龄不同，每一只狗都有一个不同的漂亮值。漂亮值与漂亮的程度成反比（漂亮值越低越漂亮），吃饭时，狗狗们会按顺序站成一排等着主人给食物。\n\n可是嘉嘉真的很懒，他才不肯喂这么多狗呢，这多浪费时间啊，于是他每次就只给第  $i$ 只到第  $j$ 只狗中第  $k$ 漂亮的狗狗喂食（好狠心的人啊）。而且为了保证某一只狗狗不会被喂太多次，他喂的每个区间  $[i,j]$ 不互相包含。", "inputFormat": "第一行输入两个数  $n,m$， $m$ 表示嘉嘉喂食的次数\n\n第二行  $n$ 个整数，表示第  $i$ 只狗的漂亮值为  $a_i$。\n\n接下来  $m$ 行，每行  $3$ 个整数  $i,j,k$，表示询问这次喂食喂第  $i$ 到第  $j$ 只狗中第  $k$ 漂亮的狗的漂亮值。", "outputFormat": "$m$ 行，每行一个整数，表示每一次喂的那只狗漂亮值为多少。", "hint": "$1\\le n \\le 3\\times 10^5 ,1\\le m \\le5\\times10^4,0\\le a_i<2^{31}$，且 $a_i$ 互不相同。", "locale": "zh-CN", "translations": {"en": {"title": "Poor Dogs", "background": "", "description": "Xiao Ka has $n$ dogs. Because of different breeds and ages, each dog has a different beauty value. The beauty value is inversely related to how pretty a dog is (the lower the beauty value, the prettier). At mealtime, the dogs stand in a line in order, waiting for their owner to give them food.\n\nBut Jiajia is really lazy; he refuses to feed so many dogs. Each time, he only feeds the dog that is the $k$-th most beautiful among the $i$-th to the $j$-th dogs (how heartless!). Moreover, to ensure that no single dog is fed too many times, none of the intervals $[i, j]$ contains another.", "inputFormat": "The first line contains two integers $n,m$, where $m$ is the number of times Jiajia feeds the dogs.\n\nThe second line contains $n$ integers, where the $i$-th dog's beauty value is $a_i$.\n\nThe next $m$ lines each contain $3$ integers $i,j,k$, asking for the beauty value of the dog that is the $k$-th most beautiful among the dogs from $i$ to $j$.", "outputFormat": "$m$ lines, each containing one integer, which is the beauty value of the dog fed each time.", "hint": "Constraints: $1\\le n \\le 3\\times 10^5 ,1\\le m \\le5\\times10^4,0\\le a_i<2^{31}$，且 $a_i$ 互不相同。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "可怜的狗狗", "background": "", "description": "小卡家有  $n$ 只狗，由于品种、年龄不同，每一只狗都有一个不同的漂亮值。漂亮值与漂亮的程度成反比（漂亮值越低越漂亮），吃饭时，狗狗们会按顺序站成一排等着主人给食物。\n\n可是嘉嘉真的很懒，他才不肯喂这么多狗呢，这多浪费时间啊，于是他每次就只给第  $i$ 只到第  $j$ 只狗中第  $k$ 漂亮的狗狗喂食（好狠心的人啊）。而且为了保证某一只狗狗不会被喂太多次，他喂的每个区间  $[i,j]$ 不互相包含。", "inputFormat": "第一行输入两个数  $n,m$， $m$ 表示嘉嘉喂食的次数\n\n第二行  $n$ 个整数，表示第  $i$ 只狗的漂亮值为  $a_i$。\n\n接下来  $m$ 行，每行  $3$ 个整数  $i,j,k$，表示询问这次喂食喂第  $i$ 到第  $j$ 只狗中第  $k$ 漂亮的狗的漂亮值。", "outputFormat": "$m$ 行，每行一个整数，表示每一次喂的那只狗漂亮值为多少。", "hint": "$1\\le n \\le 3\\times 10^5 ,1\\le m \\le5\\times10^4,0\\le a_i<2^{31}$，且 $a_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P1534", "type": "P", "difficulty": 1, "samples": [["7\n5 3\n6 2\n7 2\n5 3\n5 4\n0 4\n0 6", "-2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "不高兴的津津（升级版）", "background": "", "description": "津津上初中了。妈妈认为津津应该更加用功学习，所以津津除了上学之外，还要参加妈妈为她报名的各科复习班。另外每天妈妈还会送她去学习朗诵、舞蹈和钢琴。但是津津如果一天上课超过八个小时就会不高兴，而且上得越久就会越不高兴。\n\n这次与 NOIp2004 普及组第一题不同的是：假设津津不会因为其它事不高兴，但是她的不高兴会（当然高兴也会）持续到第二天。请你帮忙检查一下津津以后 $n$ 天的日程安排，看看以后 $n$ 天她会不会不高兴（计算方法：用昨天不高兴程度加上今天上课总时间减去 $8$ 后得到的数作为今天不高兴程度）；输出以后 $n$ 天结束后不高兴程度和是多少。", "inputFormat": "第一行共一个数 $n$。\n\n第二行至第 $n+1$ 行，每行两个数，表示这天上学时间和课外补习班时间。", "outputFormat": "一个数，这 $n$ 天过后的不高兴程度和。", "hint": "### 数据范围及约定\n\n对于全部数据，上学时间和上课时间各不超过 $8$，和不超过 $16$，$n \\le 3000$。", "locale": "zh-CN", "translations": {"en": {"title": "Unhappy Jinjin (Upgraded Version)", "background": "", "description": "Jinjin has entered middle school. Her mom thinks she should study harder, so besides attending school, Jinjin also has to go to the review classes her mom enrolled her in. In addition, every day her mom takes her to learn recitation, dance, and piano. However, if Jinjin studies for more than eight hours in a day, she becomes unhappy, and the longer she studies, the more unhappy she becomes.\n\nDifferent from the first problem of NOIp2004 Junior: assume Jinjin will not be unhappy because of other things, but her unhappiness (and of course her happiness) will carry over to the next day. Please check Jinjin’s schedule for the next $n$ days and determine whether she will be unhappy during these $n$ days (calculation method: use yesterday’s unhappiness degree plus today’s total class time minus $8$ to obtain today’s unhappiness degree); output the sum of the unhappiness degrees after these $n$ days.", "inputFormat": "The first line contains a single integer $n$.\n\nFrom line $2$ to line $n+1$, each line contains two integers, representing the school time and the extracurricular tutoring time for that day.", "outputFormat": "A single integer: the sum of the unhappiness degrees after these $n$ days.", "hint": "Constraints\n\nFor all testdata, the school time and the class time each do not exceed $8$, and their sum does not exceed $16$, and $n \\le 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不高兴的津津（升级版）", "background": "", "description": "津津上初中了。妈妈认为津津应该更加用功学习，所以津津除了上学之外，还要参加妈妈为她报名的各科复习班。另外每天妈妈还会送她去学习朗诵、舞蹈和钢琴。但是津津如果一天上课超过八个小时就会不高兴，而且上得越久就会越不高兴。\n\n这次与 NOIp2004 普及组第一题不同的是：假设津津不会因为其它事不高兴，但是她的不高兴会（当然高兴也会）持续到第二天。请你帮忙检查一下津津以后 $n$ 天的日程安排，看看以后 $n$ 天她会不会不高兴（计算方法：用昨天不高兴程度加上今天上课总时间减去 $8$ 后得到的数作为今天不高兴程度）；输出以后 $n$ 天结束后不高兴程度和是多少。", "inputFormat": "第一行共一个数 $n$。\n\n第二行至第 $n+1$ 行，每行两个数，表示这天上学时间和课外补习班时间。", "outputFormat": "一个数，这 $n$ 天过后的不高兴程度和。", "hint": "### 数据范围及约定\n\n对于全部数据，上学时间和上课时间各不超过 $8$，和不超过 $16$，$n \\le 3000$。", "locale": "zh-CN"}}}
{"pid": "P1535", "type": "P", "difficulty": 3, "samples": [["4 5 6\n...*.\n...*.\n.....\n.....\n1 3 1 5", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "2008", "USACO", "剪枝"], "title": "[USACO08MAR] Cow Travelling S", "background": "", "description": "奶牛们在被划分成 $N$ 行 $M$ 列（$2 \\leq N,M \\leq 100$）的草地上游走， 试图找到整块草地中最美味的牧草。\n\nFarmer John 在某个时刻看见贝茜在位置 $(R_1, C_1)$，恰好 $T$（$0 \\lt T \\leq 15$）秒后，FJ 又在位置 $(R_2, C_2)$ 与贝茜撞了正着。FJ 并不知道在这 $T$ 秒内贝茜是否曾经到过 $(R_2, C_2)$，他能确定的只是，现在贝茜在那里。\n\n设 $S$ 为奶牛在 $T$ 秒内从 $(R_1, C_1)$ 走到 $(R_2, C_2)$ 所能选择的路径总数，FJ 希望有一个程序来帮他计算这个值。每一秒内，奶牛会水平或垂直地移动 $1$ 单位距离（奶牛总是在移动，不会在某秒内停在它上一秒所在的点）。草地上的某些地方有树，自然，奶牛不能走到树所在的位置，也不会走出草地。\n\n现在你拿到了一张整块草地的地形图，其中 `.` 表示平坦的草地，`*` 表示挡路的树。你的任务是计算出，一头在 $T$ 秒内从 $(R_1, C_1)$ 移动到 $(R_2, C_2)$ 的奶牛可能经过的路径有哪些。", "inputFormat": "第一行包含 $3$ 个用空格隔开的整数：$N,M,T$。\n\n接下来 $N$ 行：第 $i$ 行为 $M$ 个连续的字符，描述了草地第 $i$ 行各点的情况，保证字符是 `.` 和 `*` 中的一个。\n\n最后一行 $4$ 个整数 $R_1,C_1,R_2,C_2$。", "outputFormat": "输出从 $(R_1, C_1)$ 移动到 $(R_2, C_2)$ 的方案数。", "hint": "奶牛在 $6$ 秒内从 $(1,3)$ 走到 $(1,5)$ 的方法只有一种，绕过她面前的树。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08MAR] Cow Travelling S", "background": "", "description": "Cows wander on a pasture divided into $N$ rows and $M$ columns ($2 \\leq N, M \\leq 100$), trying to find the tastiest grass.\n\nAt some moment, Farmer John sees Bessie at position $(R_1, C_1)$. Exactly $T$ ($0 < T \\leq 15$) seconds later, FJ runs into Bessie at position $(R_2, C_2)$. FJ does not know whether Bessie visited $(R_2, C_2)$ at any time during those $T$ seconds; he only knows that she is there now.\n\nLet $S$ be the number of paths the cow can take to go from $(R_1, C_1)$ to $(R_2, C_2)$ in $T$ seconds. FJ wants a program to compute this value. Each second, the cow moves horizontally or vertically by a distance of $1$ (the cow is always moving and will not stay at the same point in any second). Some places on the pasture have trees. Of course, the cow cannot step on a tree, and she will not leave the pasture.\n\nYou are given a map of the whole pasture, where `.` means open grass and `*` means a blocking tree. Your task is to compute how many different paths a cow can take to move from $(R_1, C_1)$ to $(R_2, C_2)$ in $T$ seconds.", "inputFormat": "The first line contains $3$ space-separated integers: $N, M, T$.\n\nThen $N$ lines follow: the $i$-th line has $M$ consecutive characters describing row $i$ of the pasture. Each character is guaranteed to be either `.` or `*`.\n\nThe last line contains $4$ integers $R_1, C_1, R_2, C_2$.", "outputFormat": "Output the number of ways to move from $(R_1, C_1)$ to $(R_2, C_2)$.", "hint": "There is only one way for the cow to go from $(1, 3)$ to $(1, 5)$ in $6$ seconds, by going around the tree in front of her.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO08MAR] Cow Travelling S", "background": "", "description": "奶牛们在被划分成 $N$ 行 $M$ 列（$2 \\leq N,M \\leq 100$）的草地上游走， 试图找到整块草地中最美味的牧草。\n\nFarmer John 在某个时刻看见贝茜在位置 $(R_1, C_1)$，恰好 $T$（$0 \\lt T \\leq 15$）秒后，FJ 又在位置 $(R_2, C_2)$ 与贝茜撞了正着。FJ 并不知道在这 $T$ 秒内贝茜是否曾经到过 $(R_2, C_2)$，他能确定的只是，现在贝茜在那里。\n\n设 $S$ 为奶牛在 $T$ 秒内从 $(R_1, C_1)$ 走到 $(R_2, C_2)$ 所能选择的路径总数，FJ 希望有一个程序来帮他计算这个值。每一秒内，奶牛会水平或垂直地移动 $1$ 单位距离（奶牛总是在移动，不会在某秒内停在它上一秒所在的点）。草地上的某些地方有树，自然，奶牛不能走到树所在的位置，也不会走出草地。\n\n现在你拿到了一张整块草地的地形图，其中 `.` 表示平坦的草地，`*` 表示挡路的树。你的任务是计算出，一头在 $T$ 秒内从 $(R_1, C_1)$ 移动到 $(R_2, C_2)$ 的奶牛可能经过的路径有哪些。", "inputFormat": "第一行包含 $3$ 个用空格隔开的整数：$N,M,T$。\n\n接下来 $N$ 行：第 $i$ 行为 $M$ 个连续的字符，描述了草地第 $i$ 行各点的情况，保证字符是 `.` 和 `*` 中的一个。\n\n最后一行 $4$ 个整数 $R_1,C_1,R_2,C_2$。", "outputFormat": "输出从 $(R_1, C_1)$ 移动到 $(R_2, C_2)$ 的方案数。", "hint": "奶牛在 $6$ 秒内从 $(1,3)$ 走到 $(1,5)$ 的方法只有一种，绕过她面前的树。", "locale": "zh-CN"}}}
{"pid": "P1536", "type": "P", "difficulty": 2, "samples": [["4 2\n1 3\n4 3\n3 3\n1 2\n1 3\n2 3\n5 2\n1 2\n3 5\n999 0\n0\n", "1\n0\n2\n998\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集", "连通块"], "title": "村村通", "background": "", "description": "某市调查城镇交通状况，得到现有城镇道路统计表。表中列出了每条道路直接连通的城镇。市政府 \"村村通工程\" 的目标是使全市任何两个城镇间都可以实现交通（但不一定有直接的道路相连，只要相互之间可达即可）。请你计算出最少还需要建设多少条道路？", "inputFormat": "输入包含若干组测试数据，每组测试数据的第一行给出两个用空格隔开的正整数，分别是城镇数目 $n$ 和道路数目 $m$ ；随后的 $m$ 行对应 $m$ 条道路，每行给出一对用空格隔开的正整数，分别是该条道路直接相连的两个城镇的编号。简单起见，城镇从 $1$ 到 $n$ 编号。\n\n注意：两个城市间可以有多条道路相通。\n\n**在输入数据的最后，为一行一个整数 $0$，代表测试数据的结尾。**", "outputFormat": "对于每组数据，对应一行一个整数。表示最少还需要建设的道路数目。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\le n < 1000$ 。", "locale": "zh-CN", "translations": {"en": {"title": "Village-to-Village Connectivity", "background": "", "description": "A city surveyed its urban transportation and obtained a current list of roads between towns. The list enumerates which pairs of towns are directly connected by a road. The goal of the city’s \"Village-to-Village Connectivity\" project is to ensure that any two towns in the city can reach each other (there does not have to be a direct road between them, as long as they are mutually reachable). Please compute the minimum number of additional roads that still need to be built.", "inputFormat": "The input contains multiple test cases. For each test case, the first line gives two positive integers separated by a space, the number of towns $n$ and the number of roads $m$. The following $m$ lines describe the $m$ roads; each line gives a pair of positive integers separated by a space, which are the labels of the two towns directly connected by that road. For simplicity, towns are labeled from $1$ to $n$.\n\nNote: multiple roads may exist between the same pair of towns.\n\nAt the end of the input, there is a line containing a single integer $0$, which marks the end of the testdata.", "outputFormat": "For each test case, output a single integer on its own line: the minimum number of additional roads required.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n < 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "村村通", "background": "", "description": "某市调查城镇交通状况，得到现有城镇道路统计表。表中列出了每条道路直接连通的城镇。市政府 \"村村通工程\" 的目标是使全市任何两个城镇间都可以实现交通（但不一定有直接的道路相连，只要相互之间可达即可）。请你计算出最少还需要建设多少条道路？", "inputFormat": "输入包含若干组测试数据，每组测试数据的第一行给出两个用空格隔开的正整数，分别是城镇数目 $n$ 和道路数目 $m$ ；随后的 $m$ 行对应 $m$ 条道路，每行给出一对用空格隔开的正整数，分别是该条道路直接相连的两个城镇的编号。简单起见，城镇从 $1$ 到 $n$ 编号。\n\n注意：两个城市间可以有多条道路相通。\n\n**在输入数据的最后，为一行一个整数 $0$，代表测试数据的结尾。**", "outputFormat": "对于每组数据，对应一行一个整数。表示最少还需要建设的道路数目。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\le n < 1000$ 。", "locale": "zh-CN"}}}
{"pid": "P1537", "type": "P", "difficulty": 4, "samples": [["1 0 1 2 0 0 \r\n1 0 0 0 1 1 \r\n0 0 0 0 0 0 \r\n", "Collection #1:\r\nCan't be divided.\r\n\r\nCollection #2:\r\nCan be divided.\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP"], "title": "弹珠", "background": "", "description": "玛莎和比尔各自有自己的弹珠收藏。他们想重新分配收藏品，使两人能平等拥有弹珠。如果所有的弹珠的价值相同，那么他们就可以平分。但不幸的是，有一些弹珠更大，或者更美丽，所以，玛莎和比尔给每个弹珠一个 $1$ 到 $6$ 的价值。现在他们想平分这些弹珠，使每个人得到的总价值相同。不幸的是，他们发现，他们可能无法以这种方式分弹珠（即使弹珠的总价值为偶数）。例如，如果有一个价值为 $1$、一个价值为 $3$ 和两个价值为 $4$ 的弹珠，这样他们就不能把弹珠分为价值相等的两部分。因此，他们想要你写一个程序，告诉他们是否能将所有弹珠分成价值相等的两部分。\n", "inputFormat": "输入文件有若干行，行中包含六个非负整数 $N_1,\\cdots,N_6$，其中 $N_i$ 是价值为 $i$ 的弹珠的个数。最大弹珠总数将达到 $2\\times 10^4$。\n\n输入文件的最后一行是 `0 0 0 0 0 0`。不要处理这一行。", "outputFormat": "对于每一组数据，输出 `Collection #k:`，$k$ 为输出的是第几组，接着是 `Can be divided.` 或 `Can't be divided.`。\n\n每一组输出后多打一个空行。可以参考样例。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Marbles", "background": "", "description": "Masha and Bill each have their own marble collections. They want to redistribute the collections so that both of them have the same number of marbles. If all marbles had the same value, they could split them evenly. Unfortunately, some marbles are larger or more beautiful, so Masha and Bill assign each marble a value from $1$ to $6$. Now they want to divide the marbles so that each person receives the same total value. Unfortunately, they find that they may not be able to split the marbles this way (even if the total value of all marbles is even). For example, if there is one marble of value $1$, one of value $3$, and two of value $4$, then they cannot divide the marbles into two parts with equal value. Therefore, they want you to write a program to tell them whether it is possible to split all the marbles into two parts with equal total value.", "inputFormat": "The input contains several lines, each with six non-negative integers $N_1,\\cdots,N_6$, where $N_i$ is the number of marbles with value $i$. The maximum total number of marbles is up to $2\\times 10^4$.\n\nThe last line of the input is `0 0 0 0 0 0`. Do not process this line.", "outputFormat": "For each dataset, output `Collection #k:`, where $k$ is the dataset number starting from $1$, followed by `Can be divided.` or `Can't be divided.`.\n\nPrint an extra blank line after each dataset. You may refer to the sample.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "弹珠", "background": "", "description": "玛莎和比尔各自有自己的弹珠收藏。他们想重新分配收藏品，使两人能平等拥有弹珠。如果所有的弹珠的价值相同，那么他们就可以平分。但不幸的是，有一些弹珠更大，或者更美丽，所以，玛莎和比尔给每个弹珠一个 $1$ 到 $6$ 的价值。现在他们想平分这些弹珠，使每个人得到的总价值相同。不幸的是，他们发现，他们可能无法以这种方式分弹珠（即使弹珠的总价值为偶数）。例如，如果有一个价值为 $1$、一个价值为 $3$ 和两个价值为 $4$ 的弹珠，这样他们就不能把弹珠分为价值相等的两部分。因此，他们想要你写一个程序，告诉他们是否能将所有弹珠分成价值相等的两部分。\n", "inputFormat": "输入文件有若干行，行中包含六个非负整数 $N_1,\\cdots,N_6$，其中 $N_i$ 是价值为 $i$ 的弹珠的个数。最大弹珠总数将达到 $2\\times 10^4$。\n\n输入文件的最后一行是 `0 0 0 0 0 0`。不要处理这一行。", "outputFormat": "对于每一组数据，输出 `Collection #k:`，$k$ 为输出的是第几组，接着是 `Can be divided.` 或 `Can't be divided.`。\n\n每一组输出后多打一个空行。可以参考样例。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1538", "type": "P", "difficulty": 3, "samples": [["2\n1234567890\n", "      --   --        --   --   --   --   --   -- \n   |    |    | |  | |    |       | |  | |  | |  |\n   |    |    | |  | |    |       | |  | |  | |  |\n      --   --   --   --   --        --   --      \n   | |       |    |    | |  |    | |  |    | |  |\n   | |       |    |    | |  |    | |  |    | |  |\n      --   --        --   --        --   --   -- \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "迎春舞会之数字舞蹈", "background": "HNSDFZ 的同学们为了庆祝春节，准备排练一场舞会。", "description": "在越来越讲究合作的时代，人们注意的更多的不是个人物的舞姿，而是集体的排列。  \n\n为了配合每年的倒计时，同学们决定排出——“数字舞蹈”。顾名思义就是所有人一起排成若干个数字 -\\_\\_\\_-||||  更为创新的是，每个人都是趴在地上，保证横竖。  \n\n现在给出数字及其要求摆出的大小，请你编程，模拟同学们的优美姿态。\n", "inputFormat": "第一行为 $k$。$k$ 表示要摆出数字的大小。\n\n第二行为全部由数字组成的字符串，即要摆出的几个数字。", "outputFormat": "按题目要求输出。详见样例。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$k \\le 30$，$ 0<|s|\\le 255$。除了第一个数字之外，每个数字之前有 $1$ 个空格，所有数字全部对齐。\n\n建议大家直接输出，不要保存。\n\n如果对于大小和 $k$ 有疑问，请自行理解。", "locale": "zh-CN", "translations": {"en": {"title": "Welcoming Spring Ball: Number Dance", "background": "The students of HNSDFZ are preparing a ball to celebrate the Spring Festival.", "description": "In an era that emphasizes cooperation, people pay more attention to collective formations than to individual dance moves.\n\nTo match the annual countdown, the students decide to form a “Number Dance.” As the name suggests, everyone lines up together to form several digits -___-||||. Even more creatively, everyone lies on the ground to ensure everything stays strictly horizontal and vertical.\n\nNow, given the digits and the required display size, please write a program to simulate the students’ elegant formations.", "inputFormat": "The first line contains $k$. The value $k$ indicates the size of the digits to be displayed.\n\nThe second line is a string consisting entirely of digits, i.e., the digits to be displayed.", "outputFormat": "Output as required. See the sample.", "hint": "Constraints\n\n- For all testdata, $k \\le 30$, $0 < |s| \\le 255$.\n- Except for the first digit, there is 1 space before each subsequent digit, and all digits must be aligned.\n\nIt is recommended to print directly and not store the output.\n\nIf you have questions about the size and $k$, please use your own understanding.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "迎春舞会之数字舞蹈", "background": "HNSDFZ 的同学们为了庆祝春节，准备排练一场舞会。", "description": "在越来越讲究合作的时代，人们注意的更多的不是个人物的舞姿，而是集体的排列。  \n\n为了配合每年的倒计时，同学们决定排出——“数字舞蹈”。顾名思义就是所有人一起排成若干个数字 -\\_\\_\\_-||||  更为创新的是，每个人都是趴在地上，保证横竖。  \n\n现在给出数字及其要求摆出的大小，请你编程，模拟同学们的优美姿态。\n", "inputFormat": "第一行为 $k$。$k$ 表示要摆出数字的大小。\n\n第二行为全部由数字组成的字符串，即要摆出的几个数字。", "outputFormat": "按题目要求输出。详见样例。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$k \\le 30$，$ 0<|s|\\le 255$。除了第一个数字之外，每个数字之前有 $1$ 个空格，所有数字全部对齐。\n\n建议大家直接输出，不要保存。\n\n如果对于大小和 $k$ 有疑问，请自行理解。", "locale": "zh-CN"}}}
{"pid": "P1539", "type": "P", "difficulty": 5, "samples": [["2 3\n10.\n...\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2011", "各省省选", "快速沃尔什变换 FWT", "天津", "状压 DP"], "title": "[TJOI2011] 01矩阵", "background": "", "description": "$n\\times m$ 的 $01$ 矩阵，其中某些位置已经确定，为 '.' 的位置可以填 $0$ 或 $1$，求相邻两个位置不同为 $1$ 的矩阵方案数，答案模 $10007$。", "inputFormat": "第一行输入两个数 $n,m$。\n\n接下来输入一个 $n\\times m$ 的矩阵，由 $\\verb!0!,\\verb!1!,\\verb!.!$ 组成。", "outputFormat": "输出一个整数，为相邻两个位置不同为 $1$ 的矩阵个数。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$n\\times m \\le 225$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] 01 Matrix", "background": "", "description": "An $n \\times m$ $01$ matrix, in which some positions are already fixed. Positions marked '.' can be filled with $0$ or $1$. Count the number of matrices for which the difference between any two adjacent positions is $1$ (i.e., adjacent cells sharing a side have different values), and output the answer modulo $10007$.", "inputFormat": "The first line contains two integers $n, m$.\n\nThen follows an $n \\times m$ matrix consisting of $\\verb!0!,\\verb!1!,\\verb!.!$.", "outputFormat": "Output a single integer: the number of matrices satisfying the condition, modulo $10007$.", "hint": "### Constraints and Conventions\n\nFor $100\\%$ of the testdata, $n \\times m \\le 225$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 01矩阵", "background": "", "description": "$n\\times m$ 的 $01$ 矩阵，其中某些位置已经确定，为 '.' 的位置可以填 $0$ 或 $1$，求相邻两个位置不同为 $1$ 的矩阵方案数，答案模 $10007$。", "inputFormat": "第一行输入两个数 $n,m$。\n\n接下来输入一个 $n\\times m$ 的矩阵，由 $\\verb!0!,\\verb!1!,\\verb!.!$ 组成。", "outputFormat": "输出一个整数，为相邻两个位置不同为 $1$ 的矩阵个数。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$n\\times m \\le 225$。", "locale": "zh-CN"}}}
{"pid": "P1540", "type": "P", "difficulty": 2, "samples": [["3 7\n1 2 1 5 4 4 1\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2010", "NOIP 提高组", "队列"], "title": "[NOIP 2010 提高组] 机器翻译", "background": "NOIP2010 提高组 T1", "description": "小晨的电脑上安装了一个机器翻译软件，他经常用这个软件来翻译英语文章。\n\n这个翻译软件的原理很简单，它只是从头到尾，依次将每个英文单词用对应的中文含义来替换。对于每个英文单词，软件会先在内存中查找这个单词的中文含义，如果内存中有，软件就会用它进行翻译；如果内存中没有，软件就会在外存中的词典内查找，查出单词的中文含义然后翻译，并将这个单词和译义放入内存，以备后续的查找和翻译。\n\n假设内存中有 $M$ 个单元，每单元能存放一个单词和译义。每当软件将一个新单词存入内存前，如果当前内存中已存入的单词数不超过 $M-1$，软件会将新单词存入一个未使用的内存单元；若内存中已存入 $M$ 个单词，软件会清空最早进入内存的那个单词，腾出单元来，存放新单词。\n\n假设一篇英语文章的长度为 $N$ 个单词。给定这篇待译文章，翻译软件需要去外存查找多少次词典？假设在翻译开始前，内存中没有任何单词。", "inputFormat": "共 $2$ 行。每行中两个数之间用一个空格隔开。\n\n第一行为两个正整数 $M,N$，代表内存容量和文章的长度。\n\n第二行为 $N$ 个非负整数，按照文章的顺序，每个数（大小不超过 $1000$）代表一个英文单词。文章中两个单词是同一个单词，当且仅当它们对应的非负整数相同。", "outputFormat": "一个整数，为软件需要查词典的次数。\n", "hint": "### 样例解释\n\n整个查字典过程如下：每行表示一个单词的翻译，冒号前为本次翻译后的内存状况：\n\n1. `1`：查找单词 1 并调入内存。\n2. `1 2`：查找单词 2 并调入内存。\n3. `1 2`：在内存中找到单词 1。\n4. `1 2 5`：查找单词 5 并调入内存。\n5. `2 5 4`：查找单词 4 并调入内存替代单词 1。\n6. `2 5 4`：在内存中找到单词 4。\n7. `5 4 1`：查找单词 1 并调入内存替代单词 2。\n\n共计查了 $5$ 次词典。\n\n### 数据范围\n\n- 对于 $10\\%$ 的数据有 $M=1$，$N \\leq 5$；\n- 对于 $100\\%$ 的数据有 $1 \\leq M \\leq 100$，$1 \\leq N \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2010 Senior] Machine Translation", "background": "NOIP 2010 Senior T1.", "description": "Xiao Chen’s computer has a machine translation program, which he often uses to translate English articles.\n\nThe principle of this program is simple: it processes the article from start to finish and replaces each English word with its corresponding Chinese meaning. For each English word, the program first looks up the word in memory. If it is found in memory, the program uses it to translate; if it is not found, the program looks it up in a dictionary on external storage, obtains the Chinese meaning, performs the translation, and then inserts the word and its meaning into memory for future lookups.\n\nAssume the memory has $M$ slots, and each slot can store one word and its meaning. Before inserting a new word, if the number of words currently stored is at most $M-1$, the program stores the new word in an unused slot; if $M$ words are already stored, the program clears the word that entered memory the earliest to free a slot, and stores the new word.\n\nAssume an English article has length $N$ words. Given this article, how many times does the program need to consult the dictionary on external storage? At the start of translation, the memory is empty.", "inputFormat": "There are $2$ lines.\n\nThe first line contains two positive integers $M, N$, representing the memory capacity and the length of the article.\n\nThe second line contains $N$ non-negative integers in the order of the article; each integer (no greater than $1000$) represents an English word. Two words in the article are the same if and only if their corresponding non-negative integers are equal.\n\nNumbers on the same line are separated by a single space.", "outputFormat": "Output a single integer: the number of times the program needs to consult the dictionary.", "hint": "### Sample Explanation\n\nThe whole lookup process is as follows. Each line shows the memory state before the colon, for each word translation:\n\n1. `1`: look up word 1 and load it into memory.\n2. `1 2`: look up word 2 and load it into memory.\n3. `1 2`: find word 1 in memory.\n4. `1 2 5`: look up word 5 and load it into memory.\n5. `2 5 4`: look up word 4 and load it into memory, replacing word 1.\n6. `2 5 4`: find word 4 in memory.\n7. `5 4 1`: look up word 1 and load it into memory, replacing word 2.\n\nA total of $5$ dictionary lookups.\n\n### Constraints\n\n- For $10\\%$ of the testdata, $M=1$, $N \\leq 5$.\n- For $100\\%$ of the testdata, $1 \\leq M \\leq 100$, $1 \\leq N \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2010 提高组] 机器翻译", "background": "NOIP2010 提高组 T1", "description": "小晨的电脑上安装了一个机器翻译软件，他经常用这个软件来翻译英语文章。\n\n这个翻译软件的原理很简单，它只是从头到尾，依次将每个英文单词用对应的中文含义来替换。对于每个英文单词，软件会先在内存中查找这个单词的中文含义，如果内存中有，软件就会用它进行翻译；如果内存中没有，软件就会在外存中的词典内查找，查出单词的中文含义然后翻译，并将这个单词和译义放入内存，以备后续的查找和翻译。\n\n假设内存中有 $M$ 个单元，每单元能存放一个单词和译义。每当软件将一个新单词存入内存前，如果当前内存中已存入的单词数不超过 $M-1$，软件会将新单词存入一个未使用的内存单元；若内存中已存入 $M$ 个单词，软件会清空最早进入内存的那个单词，腾出单元来，存放新单词。\n\n假设一篇英语文章的长度为 $N$ 个单词。给定这篇待译文章，翻译软件需要去外存查找多少次词典？假设在翻译开始前，内存中没有任何单词。", "inputFormat": "共 $2$ 行。每行中两个数之间用一个空格隔开。\n\n第一行为两个正整数 $M,N$，代表内存容量和文章的长度。\n\n第二行为 $N$ 个非负整数，按照文章的顺序，每个数（大小不超过 $1000$）代表一个英文单词。文章中两个单词是同一个单词，当且仅当它们对应的非负整数相同。", "outputFormat": "一个整数，为软件需要查词典的次数。\n", "hint": "### 样例解释\n\n整个查字典过程如下：每行表示一个单词的翻译，冒号前为本次翻译后的内存状况：\n\n1. `1`：查找单词 1 并调入内存。\n2. `1 2`：查找单词 2 并调入内存。\n3. `1 2`：在内存中找到单词 1。\n4. `1 2 5`：查找单词 5 并调入内存。\n5. `2 5 4`：查找单词 4 并调入内存替代单词 1。\n6. `2 5 4`：在内存中找到单词 4。\n7. `5 4 1`：查找单词 1 并调入内存替代单词 2。\n\n共计查了 $5$ 次词典。\n\n### 数据范围\n\n- 对于 $10\\%$ 的数据有 $M=1$，$N \\leq 5$；\n- 对于 $100\\%$ 的数据有 $1 \\leq M \\leq 100$，$1 \\leq N \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P1541", "type": "P", "difficulty": 4, "samples": [["9 5\n6 10 14 2 8 8 18 5 17\n1 3 1 2 1\n", "73\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2010", "递归", "NOIP 提高组", "枚举"], "title": "[NOIP 2010 提高组] 乌龟棋", "background": "NOIP2010 提高组 T2", "description": "小明过生日的时候，爸爸送给他一副乌龟棋当作礼物。\n\n乌龟棋的棋盘是一行 $N$ 个格子，每个格子上一个分数（非负整数）。棋盘第 $1$ 格是唯一的起点，第 $N$ 格是终点，游戏要求玩家控制一个乌龟棋子从起点出发走到终点。\n\n乌龟棋中 $M$ 张爬行卡片，分成 $4$ 种不同的类型（$M$ 张卡片中不一定包含所有 $4$ 种类型的卡片，见样例），每种类型的卡片上分别标有 $1,2,3,4$ 四个数字之一，表示使用这种卡片后，乌龟棋子将向前爬行相应的格子数。游戏中，玩家每次需要从所有的爬行卡片中选择一张之前没有使用过的爬行卡片，控制乌龟棋子前进相应的格子数，每张卡片只能使用一次。\n\n\n游戏中，乌龟棋子自动获得起点格子的分数，并且在后续的爬行中每到达一个格子，就得到该格子相应的分数。玩家最终游戏得分就是乌龟棋子从起点到终点过程中到过的所有格子的分数总和。\n\n\n很明显，用不同的爬行卡片使用顺序会使得最终游戏的得分不同，小明想要找到一种卡片使用顺序使得最终游戏得分最多。\n\n\n现在，告诉你棋盘上每个格子的分数和所有的爬行卡片，你能告诉小明，他最多能得到多少分吗？", "inputFormat": "每行中两个数之间用一个空格隔开。\n\n第 $1$ 行 $2$ 个正整数 $N,M$，分别表示棋盘格子数和爬行卡片数。\n\n\n第 $2$ 行 $N$ 个非负整数，$a_1,a_2,…,a_N$，其中 $a_i$ 表示棋盘第 $i$ 个格子上的分数。\n\n\n第 $3$ 行 $M$ 个整数，$b_1,b_2,…,b_M$，表示 $M$ 张爬行卡片上的数字。\n\n\n输入数据保证到达终点时刚好用光 $M$ 张爬行卡片。", "outputFormat": "一个整数，表示小明最多能得到的分数。", "hint": "每个测试点 1s。\n\n小明使用爬行卡片顺序为 $1,1,3,1,2$，得到的分数为 $6+10+14+8+18+17=73$。注意，由于起点是 $1$，所以自动获得第 $1$ 格的分数 $6$。\n\n\n对于 $30\\%$ 的数据有 $1 \\le N \\le 30,1 \\le M \\le 12$。\n\n对于 $50\\%$ 的数据有 $1 \\le N \\le 120,1 \\le M \\le 50$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $20$。\n\n\n对于 $100\\%$ 的数据有 $1 \\le N \\le 350,1 \\le M \\le 120$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $40$；$0 \\le a_i \\le 100(1 \\le i \\le N),1 \\le b_i \\le 4(1 \\le i\\le M)$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2010 Senior] Turtle Chess", "background": "NOIP 2010 Senior T2.", "description": "On Xiaoming’s birthday, his father gave him a Turtle Chess set as a gift.\n\nThe Turtle Chess board is a row of $N$ cells, each with a score (a non-negative integer). Cell $1$ is the only starting point, and cell $N$ is the end. The player controls a turtle piece to move from the start to the end.\n\nThere are $M$ crawling cards in Turtle Chess, divided into $4$ different types (the $M$ cards do not necessarily include all $4$ types; see the sample). Each type of card is labeled with one of the numbers $1,2,3,4$, meaning that after using such a card, the turtle moves forward by the corresponding number of cells. In the game, each time the player must choose one crawling card that has not been used before from all cards, and move the turtle forward accordingly. Each card can be used only once.\n\nIn the game, the turtle automatically gains the score of the starting cell, and during subsequent moves, whenever it arrives at a cell, it gains that cell’s score. The final score is the sum of the scores of all cells the turtle visits from start to end.\n\nClearly, different orders of using the crawling cards can lead to different final scores. Xiaoming wants to find an order that maximizes the final score.\n\nGiven the score of each board cell and all the crawling cards, can you tell Xiaoming the maximum score he can obtain?", "inputFormat": "Numbers on each line are separated by a single space.\n\nThe first line contains two positive integers $N,M$, the number of board cells and the number of crawling cards.\n\nThe second line contains $N$ non-negative integers, $a_1,a_2,…,a_N$, where $a_i$ is the score on cell $i$.\n\nThe third line contains $M$ integers, $b_1,b_2,…,b_M$, which are the numbers on the $M$ crawling cards.\n\nThe input guarantees that upon reaching the end, exactly all $M$ crawling cards have been used.", "outputFormat": "Output one integer, the maximum score Xiaoming can obtain.", "hint": "Each test point: 1 s.\n\nXiaoming uses the crawling cards in the order $1,1,3,1,2$, and the score is $6+10+14+8+18+17=73$. Note that since the start is $1$, he automatically gains the score $6$ on cell $1$.\n\nConstraints:\nFor $30\\%$ of the testdata, $1 \\le N \\le 30,1 \\le M \\le 12$.\nFor $50\\%$ of the testdata, $1 \\le N \\le 120,1 \\le M \\le 50$, and among the $4$ types of crawling cards, the count of each type does not exceed $20$.\nFor $100\\%$ of the testdata, $1 \\le N \\le 350,1 \\le M \\le 120$, and among the $4$ types of crawling cards, the count of each type does not exceed $40$；$0 \\le a_i \\le 100(1 \\le i \\le N),1 \\le b_i \\le 4(1 \\le i\\le M)$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2010 提高组] 乌龟棋", "background": "NOIP2010 提高组 T2", "description": "小明过生日的时候，爸爸送给他一副乌龟棋当作礼物。\n\n乌龟棋的棋盘是一行 $N$ 个格子，每个格子上一个分数（非负整数）。棋盘第 $1$ 格是唯一的起点，第 $N$ 格是终点，游戏要求玩家控制一个乌龟棋子从起点出发走到终点。\n\n乌龟棋中 $M$ 张爬行卡片，分成 $4$ 种不同的类型（$M$ 张卡片中不一定包含所有 $4$ 种类型的卡片，见样例），每种类型的卡片上分别标有 $1,2,3,4$ 四个数字之一，表示使用这种卡片后，乌龟棋子将向前爬行相应的格子数。游戏中，玩家每次需要从所有的爬行卡片中选择一张之前没有使用过的爬行卡片，控制乌龟棋子前进相应的格子数，每张卡片只能使用一次。\n\n\n游戏中，乌龟棋子自动获得起点格子的分数，并且在后续的爬行中每到达一个格子，就得到该格子相应的分数。玩家最终游戏得分就是乌龟棋子从起点到终点过程中到过的所有格子的分数总和。\n\n\n很明显，用不同的爬行卡片使用顺序会使得最终游戏的得分不同，小明想要找到一种卡片使用顺序使得最终游戏得分最多。\n\n\n现在，告诉你棋盘上每个格子的分数和所有的爬行卡片，你能告诉小明，他最多能得到多少分吗？", "inputFormat": "每行中两个数之间用一个空格隔开。\n\n第 $1$ 行 $2$ 个正整数 $N,M$，分别表示棋盘格子数和爬行卡片数。\n\n\n第 $2$ 行 $N$ 个非负整数，$a_1,a_2,…,a_N$，其中 $a_i$ 表示棋盘第 $i$ 个格子上的分数。\n\n\n第 $3$ 行 $M$ 个整数，$b_1,b_2,…,b_M$，表示 $M$ 张爬行卡片上的数字。\n\n\n输入数据保证到达终点时刚好用光 $M$ 张爬行卡片。", "outputFormat": "一个整数，表示小明最多能得到的分数。", "hint": "每个测试点 1s。\n\n小明使用爬行卡片顺序为 $1,1,3,1,2$，得到的分数为 $6+10+14+8+18+17=73$。注意，由于起点是 $1$，所以自动获得第 $1$ 格的分数 $6$。\n\n\n对于 $30\\%$ 的数据有 $1 \\le N \\le 30,1 \\le M \\le 12$。\n\n对于 $50\\%$ 的数据有 $1 \\le N \\le 120,1 \\le M \\le 50$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $20$。\n\n\n对于 $100\\%$ 的数据有 $1 \\le N \\le 350,1 \\le M \\le 120$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $40$；$0 \\le a_i \\le 100(1 \\le i \\le N),1 \\le b_i \\le 4(1 \\le i\\le M)$。", "locale": "zh-CN"}}}
{"pid": "P1542", "type": "P", "difficulty": 3, "samples": [["3\n1 2 2\n6 6 2\n7 8 4\n", "2.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "二分"], "title": "包裹快递", "background": "", "description": "小 K 成功地破解了密文。但是乘车到 X 国的时候，发现钱包被偷了，于是无奈之下只好作快递员来攒足路费去 Orz 教主……\n\n一个快递公司要将 $n$ 个包裹分别送到 $n$ 个地方，并分配给邮递员小 K 一个事先设定好的路线，小 K 需要开车按照路线给的地点顺序相继送达，且不能遗漏一个地点。小 K 得到每个地方可以签收的时间段，并且也知道路线中一个地方到下一个地方的距离。若到达某一个地方的时间早于可以签收的时间段，则必须在这个地方停留至可以签收，但不能晚于签收的时间段，可以认为签收的过程是瞬间完成的。\n\n为了节省燃料，小 K 希望在全部送达的情况下，车的最大速度越小越好，就找到了你给他设计一种方案，并求出车的最大速度最小是多少。\n", "inputFormat": "第 1 行为一个正整数 $n$，表示需要运送包裹的地点数。\n\n下面 $n$ 行，第 $i+1$ 行有 3 个正整数 $x _ i, y _ i, s _ i$，表示按路线顺序给出第 $i$ 个地点签收包裹的时间段为 $[x _ i, y _ i]$，即最早为距出发时刻 $x _ i$，最晚为距出发时刻 $y _ i$，从前一个地点到达第 $i$ 个地点距离为 $s _ i$，且保证路线中 $x _ i$ 递增。\n\n可以认为 $s _ 1$ 为出发的地方到第 $1$ 个地点的距离，且出发时刻为 $0$。\n", "outputFormat": "仅包括一个正数，为车的最大速度最小值，结果保留两位小数。\n", "hint": "#### 数据范围\n- 对于 $20\\%$ 的数据，$0 < n \\le 10$。   \n- 对于 $30\\%$ 的数据，$0<x_i,y_i,s_i \\le 1000$。   \n- 对于 $50\\%$ 的数据，$0<n \\le 1000$。   \n- 对于 $100\\%$ 的数据，$0<n \\le 2\\times10^5$，$x_i \\le y_i \\le 10^8$，$s_i \\le10^7$。\n\n-----\n#### 样例解释\n第一段用 $1$ 的速度在时间 $2$ 到达第 $1$ 个地点，第二段用 $0.5$ 的速度在时间 $6$ 到达第 $2$ 个地点，第三段用 $2$ 的速度在时间 $8$ 到达第 $3$ 个地点。", "locale": "zh-CN", "translations": {"en": {"title": "Parcel Delivery", "background": "", "description": "Xiao K successfully cracked the ciphertext. But when taking a bus to country X, he found his wallet had been stolen, so he had no choice but to work as a courier to save enough fare to go pay respect to the \"Orz Jiaozhu\".\n\nA courier company needs to deliver $n$ packages to $n$ locations and assigns Xiao K a predetermined route. Xiao K must drive and deliver according to the order of locations given by the route, and he cannot skip any location. Xiao K is given the receivable time window for each location and also knows the distance from each location to the next along the route. If he arrives at a location earlier than its time window, he must wait there until the window opens, but he cannot be later than the end of the time window. The signing process is considered instantaneous.\n\nTo save fuel, Xiao K wants the car’s maximum speed to be as small as possible while completing all deliveries. Please design a plan for him and compute the minimal possible maximum speed.", "inputFormat": "The first line contains a positive integer $n$, the number of locations to deliver to.\n\nThe next $n$ lines: on the $(i+1)$-th line there are 3 positive integers $x _ i, y _ i, s _ i$, meaning that, in the route order, the time window to sign for the $i$-th location is $[x _ i, y _ i]$ (earliest at time $x _ i$ from the departure moment, latest at time $y _ i$ from the departure moment), the distance from the previous location to the $i$-th location is $s _ i$, and it is guaranteed that $x _ i$ are increasing along the route.\n\nAssume $s _ 1$ is the distance from the starting point to the first location, and the departure time is $0$.", "outputFormat": "Output a single positive number: the minimal possible maximum speed of the car, rounded to two decimal places.", "hint": "Constraints\n- For 20% of the testdata, $0 < n \\le 10$.\n- For 30% of the testdata, $0 < x_i, y_i, s_i \\le 1000$.\n- For 50% of the testdata, $0 < n \\le 1000$.\n- For 100% of the testdata, $0 < n \\le 2\\times 10^5$, $x_i \\le y_i \\le 10^8$, $s_i \\le 10^7$.\n\nSample Explanation\nOn the first leg, use speed $1$ to arrive at time $2$ at the first location. On the second leg, use speed $0.5$ to arrive at time $6$ at the second location. On the third leg, use speed $2$ to arrive at time $8$ at the third location.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "包裹快递", "background": "", "description": "小 K 成功地破解了密文。但是乘车到 X 国的时候，发现钱包被偷了，于是无奈之下只好作快递员来攒足路费去 Orz 教主……\n\n一个快递公司要将 $n$ 个包裹分别送到 $n$ 个地方，并分配给邮递员小 K 一个事先设定好的路线，小 K 需要开车按照路线给的地点顺序相继送达，且不能遗漏一个地点。小 K 得到每个地方可以签收的时间段，并且也知道路线中一个地方到下一个地方的距离。若到达某一个地方的时间早于可以签收的时间段，则必须在这个地方停留至可以签收，但不能晚于签收的时间段，可以认为签收的过程是瞬间完成的。\n\n为了节省燃料，小 K 希望在全部送达的情况下，车的最大速度越小越好，就找到了你给他设计一种方案，并求出车的最大速度最小是多少。\n", "inputFormat": "第 1 行为一个正整数 $n$，表示需要运送包裹的地点数。\n\n下面 $n$ 行，第 $i+1$ 行有 3 个正整数 $x _ i, y _ i, s _ i$，表示按路线顺序给出第 $i$ 个地点签收包裹的时间段为 $[x _ i, y _ i]$，即最早为距出发时刻 $x _ i$，最晚为距出发时刻 $y _ i$，从前一个地点到达第 $i$ 个地点距离为 $s _ i$，且保证路线中 $x _ i$ 递增。\n\n可以认为 $s _ 1$ 为出发的地方到第 $1$ 个地点的距离，且出发时刻为 $0$。\n", "outputFormat": "仅包括一个正数，为车的最大速度最小值，结果保留两位小数。\n", "hint": "#### 数据范围\n- 对于 $20\\%$ 的数据，$0 < n \\le 10$。   \n- 对于 $30\\%$ 的数据，$0<x_i,y_i,s_i \\le 1000$。   \n- 对于 $50\\%$ 的数据，$0<n \\le 1000$。   \n- 对于 $100\\%$ 的数据，$0<n \\le 2\\times10^5$，$x_i \\le y_i \\le 10^8$，$s_i \\le10^7$。\n\n-----\n#### 样例解释\n第一段用 $1$ 的速度在时间 $2$ 到达第 $1$ 个地点，第二段用 $0.5$ 的速度在时间 $6$ 到达第 $2$ 个地点，第三段用 $2$ 的速度在时间 $8$ 到达第 $3$ 个地点。", "locale": "zh-CN"}}}
{"pid": "P1543", "type": "P", "difficulty": 5, "samples": [["6\n2\n3\n1\n3\n6\n5\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["搜索", "贪心", "2004", "POI（波兰）", "树形 DP", "拓扑排序", "基环树"], "title": "[POI 2004] SZP", "background": "一班班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 十分可爱。", "description": "班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 作为某日的值日班长，在自习课上管理着 $n$ 名同学。除了她以外每一名同学都监视着另一名同学。现在班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 需要选择尽量多的同学去搬卷子和答题卡，且使得对于这些同学中的每一名同学，至少有一位监视她的同学没有被选中。问班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 最多可以选择多少同学。\n\n由于班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 太可爱了，所以没有人监视她，也可以认为她的学号是 $0$。\n\n如果一个人没有被监视，那么她就不能被选择。\n", "inputFormat": "第一行只有一个整数，$n$ 代表同学的数量。同学的学号从 $1$ 到 $n$ 编号。\n\n接下来 $n$ 行每行一个整数 $a_k$ 表示同学 $k$ 将要监视同学 $a_k$，$1 \\le k \\le n$，$1 \\le a_k \\le n$，$a_k \\ne k$。", "outputFormat": "一个数，最多能有多少同学参加入这个任务。", "hint": "对于 $100\\%$ 的数据，$1\\le k,a_k\\le n\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2004] SZP", "background": null, "description": "Byteotian Intelligence Agency (BIA) employs many spies. Each of them has duty to shadow exactly one other spy.\n\nKing Byteasar wants to entrust as many agents as possible with a top secret operation. However, the operation is so important that each spy taking part has to be traced by at least one agent not involved in the operation (assignment of shadowing BIA spies does not change).\n\nWrite a programme that:\n\n- reads from standard input the description of whom each spy shadows,\n- calculates how many agents can be assigned to the operation in a way that each of them would be spied by at least one agent not taking part in the operation,\n- writes the result to the standard output.", "inputFormat": "In the first line of the input there is one positive integer written,$n$ - the number of spies, $2\\le n\\le 10^6$. The spies are numbered from $1$ to $n$. In the following $n$ lines there is a description of whom each agent spies. Each of these lines contains one positive integer. A number $a_k$ situated in line no. $k+1$ indicates, that the spy no.$k$ shadows the spy no.$a_k$ , $1\\le k \\le n$, $1\\le a_k\\le n$, $a_k\\neq k$.", "outputFormat": "Your programme should write one integer in the first line of the output - the maximal number of spies that can be assigned to the secret operation.", "hint": "$1\\le k \\le n$, $1\\le a_k\\le n$, $a_k\\neq k$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9ghkuikn.png)\n\nTask author: Pawel Parys.", "locale": "en"}, "zh-CN": {"title": "[POI 2004] SZP", "background": "一班班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 十分可爱。", "description": "班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 作为某日的值日班长，在自习课上管理着 $n$ 名同学。除了她以外每一名同学都监视着另一名同学。现在班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 需要选择尽量多的同学去搬卷子和答题卡，且使得对于这些同学中的每一名同学，至少有一位监视她的同学没有被选中。问班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 最多可以选择多少同学。\n\n由于班花 [$\\color{red}{\\texttt{y}}\\color{black}{\\texttt{hb}}$](/user/835809) 太可爱了，所以没有人监视她，也可以认为她的学号是 $0$。\n\n如果一个人没有被监视，那么她就不能被选择。\n", "inputFormat": "第一行只有一个整数，$n$ 代表同学的数量。同学的学号从 $1$ 到 $n$ 编号。\n\n接下来 $n$ 行每行一个整数 $a_k$ 表示同学 $k$ 将要监视同学 $a_k$，$1 \\le k \\le n$，$1 \\le a_k \\le n$，$a_k \\ne k$。", "outputFormat": "一个数，最多能有多少同学参加入这个任务。", "hint": "对于 $100\\%$ 的数据，$1\\le k,a_k\\le n\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1544", "type": "P", "difficulty": 3, "samples": [["5 3\n7\n3 9\n8 1 0\n2 7 4 4\n4 5 2 6 5", "75"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "记忆化搜索"], "title": "三倍经验", "background": "", "description": "数字金字塔由 $n$ 行整数组成，第 $i(1\\le i\\le n)$ 行有 $i$ 个数字，一个示例如下。  \n```text\n        7\n      3   9\n    8   1   0\n  2   7   4   4 \n4   5   2   6   5\n```  \n现在你在金字塔的顶部（第一行），你希望走到金字塔的底部（第 $n$ 行），每一步你只能走向当前所在位置的左下方的数字或者右下方的数字。同时作为一个强大的小朋友，你可以选择金字塔中的不多于 $k$ 个数字让他们成为原来的 $3$ 倍。  \n\n你会收集你路上经过的所有位置上的数字，最后的得分即为收集的数字之和，求最大得分。", "inputFormat": "第一行输入两个整数 $n,k$，表示数字金字塔的行数和乘 $3$ 的数字个数最大值；  \n接下来 $n$ 行，其中的第 $i$ 行有 $i$ 个以空格隔开的整数依次表示数字金字塔第 $i$ 行的数字 $a_{i,1},a_{i,2},a_{i,3}...a_{i,i}$。", "outputFormat": "一行一个整数，表示最大得分。", "hint": "对于 $30\\%$ 的数据，满足 $k\\le n\\le 6$，并且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $0\\le a_{i,j}\\le 100$；  \n对于 $100\\%$ 的数据，满足 $1\\le n\\le100$，$0\\le k\\le \\dfrac{n(n+1)}{2}$，且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $|a_{i,j}|\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Triple Experience", "background": "", "description": "A number pyramid has $n$ rows of integers. The $i$-th row ($1 \\le i \\le n$) has $i$ numbers. One example is as follows.\n```text\n        7\n      3   9\n    8   1   0\n  2   7   4   4 \n4   5   2   6   5\n```\nNow you start at the top of the pyramid (the first row) and want to reach the bottom (the $n$-th row). At each step, you can move to the number down-left or down-right of your current position. Also, as a powerful kid, you may choose at most $k$ numbers in the pyramid and make them $3$ times their original value.\n\nYou will collect all numbers along your path. Your final score is the sum of the collected numbers. Find the maximum possible score.", "inputFormat": "The first line contains two integers $n,k$, the number of rows in the number pyramid and the maximum count of numbers that can be multiplied by $3$.  \nThen follow $n$ lines. The $i$-th of them contains $i$ space-separated integers, which are the numbers in the $i$-th row of the pyramid: $a_{i,1},a_{i,2},a_{i,3}...a_{i,i}$.", "outputFormat": "Output a single integer, the maximum score.", "hint": "Constraints:  \nFor $30\\%$ of the testdata, $k \\le n \\le 6$, and for any $1 \\le i \\le n$, $1 \\le j \\le i$ it holds that $0 \\le a_{i,j} \\le 100$.  \nFor $100\\%$ of the testdata, $1 \\le n \\le 100$, $0 \\le k \\le \\dfrac{n(n+1)}{2}$, and for any $1 \\le i \\le n$, $1 \\le j \\le i$ it holds that $|a_{i,j}| \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三倍经验", "background": "", "description": "数字金字塔由 $n$ 行整数组成，第 $i(1\\le i\\le n)$ 行有 $i$ 个数字，一个示例如下。  \n```text\n        7\n      3   9\n    8   1   0\n  2   7   4   4 \n4   5   2   6   5\n```  \n现在你在金字塔的顶部（第一行），你希望走到金字塔的底部（第 $n$ 行），每一步你只能走向当前所在位置的左下方的数字或者右下方的数字。同时作为一个强大的小朋友，你可以选择金字塔中的不多于 $k$ 个数字让他们成为原来的 $3$ 倍。  \n\n你会收集你路上经过的所有位置上的数字，最后的得分即为收集的数字之和，求最大得分。", "inputFormat": "第一行输入两个整数 $n,k$，表示数字金字塔的行数和乘 $3$ 的数字个数最大值；  \n接下来 $n$ 行，其中的第 $i$ 行有 $i$ 个以空格隔开的整数依次表示数字金字塔第 $i$ 行的数字 $a_{i,1},a_{i,2},a_{i,3}...a_{i,i}$。", "outputFormat": "一行一个整数，表示最大得分。", "hint": "对于 $30\\%$ 的数据，满足 $k\\le n\\le 6$，并且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $0\\le a_{i,j}\\le 100$；  \n对于 $100\\%$ 的数据，满足 $1\\le n\\le100$，$0\\le k\\le \\dfrac{n(n+1)}{2}$，且对于任意 $1\\le i\\le n$，$1\\le j\\le i$ 满足 $|a_{i,j}|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1545", "type": "P", "difficulty": 5, "samples": [["2 8\n1 2\n6 7\n3 6", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2004", "线段树", "USACO", "单调队列", "动态规划优化"], "title": "[USACO04DEC] Dividing the Path G", "background": null, "description": "约翰的奶牛们发现山脊上的草特别美味。为了维持草的生长，约翰打算安装若干喷灌器。\n\n为简化问题，山脊可以看成一维的数轴，长为 $L\\ (1\\le L\\le 10^6)$，而且 $L$ 一定是一个偶数。每个喷灌器可以双向喷灌，并有确定的射程，该射程不短于 $A$，不长于 $B$，$A$，$B(1\\le A\\le B\\le 10^3)$ 都是给出的正整数。它所在位置的两边射程内，都属它的灌溉区域。\n\n现要求山脊的每一个区域都被灌溉到，而且喷灌器的灌溉区域不允许重叠。约翰有 $N(1\\le N\\le 10^3)$ 只奶牛，每一只都有特别喜爱的草区，第 $i$ 奶牛的草区是 $[S_i,E_i]$，不同奶牛的草区可以重叠。现要求，每只奶牛的草区仅被一个喷灌器灌溉。\n\n注意：\n\n1. 数轴 $L$ 从 $0$ 开始标记（即坐标范围 $0\\sim L$）  \n2. 喷灌器坐标和射程必须为整数，对于坐标为 $i$ 射程为 $x$ 的喷灌器，它的灌溉范围为 $[i-x,i+x]$。\n3. 浇灌区间必须在山脊范围内。例如，不能在 $0$ 位置放一个半径为 $1$ 的浇灌器。\n\n寻找最少需要的喷灌器数目。", "inputFormat": "第一行两个整数 $N,L$。\n\n第二行两个整数 $A,B$。\n\n然后 $N$ 行每一行两个整数 $S_i,E_i$（$1\\le S_i < E_i\\le L$）。", "outputFormat": "一行，输出所需的最少洒水器数量。如果无法为农夫约翰设计喷头配置，则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，$1\\le L\\le 10^6$，$1\\le A,B\\le 10^3$，$1\\le N\\le 10^3$，$1\\le S_i<E_i\\le L$。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ryn23fwj.png)", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04DEC] Dividing the Path G", "background": "", "description": "John’s cows have discovered that the grass on the ridge is especially tasty. To sustain its growth, John plans to install several sprinklers.\n\nTo simplify the problem, the ridge is modeled as a one-dimensional number line of length $L\\ (1\\le L\\le 10^6)$, and $L$ is guaranteed to be even. Each sprinkler sprays in both directions with a fixed radius that is at least $A$ and at most $B$, where $A, B\\ (1\\le A\\le B\\le 10^3)$ are given positive integers. The interval within its radius on both sides of its position is its irrigation area.\n\nThe entire ridge must be irrigated, and irrigation areas of different sprinklers are not allowed to overlap. John has $N\\ (1\\le N\\le 10^3)$ cows, each with a favorite grass interval. The $i$-th cow’s interval is $[S_i,E_i]$, and different cows’ intervals may overlap. Each cow’s favorite interval must be irrigated by exactly one sprinkler, i.e., it must be entirely contained in the irrigation range of a single sprinkler.\n\nNote:\n1. The number line for $L$ is labeled starting from $0$ (i.e., the coordinate range is $0\\sim L$).  \n2. Sprinkler coordinates and radii must be integers. For a sprinkler at coordinate $i$ with radius $x$, its irrigation interval is $[i-x,i+x]$.  \n3. The irrigated interval must lie within the ridge. For example, you cannot place a sprinkler with radius $1$ at position $0$.\n\nFind the minimum number of sprinklers required.", "inputFormat": "The first line contains two integers $N,L$.\n\nThe second line contains two integers $A,B$.\n\nThen follow $N$ lines, each containing two integers $S_i,E_i$（$1\\le S_i < E_i\\le L$）.", "outputFormat": "Output a single line with the minimum number of sprinklers required. If it is impossible to design a valid sprinkler configuration for Farmer John, output $-1$.", "hint": "Constraints:\n- For $100\\%$ of the testdata, $1\\le L\\le 10^6$, $1\\le A,B\\le 10^3$, $1\\le N\\le 10^3$, $1\\le S_i<E_i\\le L$.\n\nSample explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ryn23fwj.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04DEC] Dividing the Path G", "background": null, "description": "约翰的奶牛们发现山脊上的草特别美味。为了维持草的生长，约翰打算安装若干喷灌器。\n\n为简化问题，山脊可以看成一维的数轴，长为 $L\\ (1\\le L\\le 10^6)$，而且 $L$ 一定是一个偶数。每个喷灌器可以双向喷灌，并有确定的射程，该射程不短于 $A$，不长于 $B$，$A$，$B(1\\le A\\le B\\le 10^3)$ 都是给出的正整数。它所在位置的两边射程内，都属它的灌溉区域。\n\n现要求山脊的每一个区域都被灌溉到，而且喷灌器的灌溉区域不允许重叠。约翰有 $N(1\\le N\\le 10^3)$ 只奶牛，每一只都有特别喜爱的草区，第 $i$ 奶牛的草区是 $[S_i,E_i]$，不同奶牛的草区可以重叠。现要求，每只奶牛的草区仅被一个喷灌器灌溉。\n\n注意：\n\n1. 数轴 $L$ 从 $0$ 开始标记（即坐标范围 $0\\sim L$）  \n2. 喷灌器坐标和射程必须为整数，对于坐标为 $i$ 射程为 $x$ 的喷灌器，它的灌溉范围为 $[i-x,i+x]$。\n3. 浇灌区间必须在山脊范围内。例如，不能在 $0$ 位置放一个半径为 $1$ 的浇灌器。\n\n寻找最少需要的喷灌器数目。", "inputFormat": "第一行两个整数 $N,L$。\n\n第二行两个整数 $A,B$。\n\n然后 $N$ 行每一行两个整数 $S_i,E_i$（$1\\le S_i < E_i\\le L$）。", "outputFormat": "一行，输出所需的最少洒水器数量。如果无法为农夫约翰设计喷头配置，则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，$1\\le L\\le 10^6$，$1\\le A,B\\le 10^3$，$1\\le N\\le 10^3$，$1\\le S_i<E_i\\le L$。\n\n样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ryn23fwj.png)", "locale": "zh-CN"}}}
{"pid": "P1546", "type": "P", "difficulty": 3, "samples": [["4\n0 4 9 21\n4 0 8 17\n9 8 0 16\n21 17 16 0", "28"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "USACO", "并查集", "生成树"], "title": "[USACO3.1] 最短网络 Agri-Net", "background": "Farmer John 被选为他们镇的镇长！他其中一个竞选承诺就是在镇上建立起互联网，并连接到所有的农场。当然，他需要你的帮助。\n", "description": "FJ 已经给他的农场安排了一条高速的网络线路，他想把这条线路共享给其他农场。为了用最小的消费，他想铺设最短的光纤去连接所有的农场。\n\n你将得到一份各农场之间连接费用的列表，你必须找出能连接所有农场并所用光纤最短的方案。每两个农场间的距离不会超过 $10^5$。", "inputFormat": "第一行农场的个数 $N$（$3 \\leq N \\leq 100$）。\n\n接下来是一个 $N \\times N$ 的矩阵，表示每个农场之间的距离。理论上，他们是 $N$ 行，每行由 $N$ 个用空格分隔的数组成，实际上，由于每行 $80$ 个字符的限制，因此，某些行会紧接着另一些行。当然，对角线将会是 $0$，因为不会有线路从第 $i$ 个农场到它本身。", "outputFormat": "只有一个输出，其中包含连接到每个农场的光纤的最小长度。\n", "hint": "题目翻译来自NOCOW。\n\nUSACO Training Section 3.1\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO3.1] Shortest Network Agri-Net", "background": "Farmer John has been elected mayor of their town! One of his campaign promises is to bring the Internet to the town and connect all the farms. Of course, he needs your help.", "description": "FJ has arranged a high-speed network line for his farm, and he wants to share it with other farms. To minimize the cost, he wants to lay the shortest optical fiber to connect all the farms.\n\nYou are given a list of connection costs between farms. You must find a plan that connects all farms with the minimum total fiber length. The distance between any two farms will not exceed $10^5$.", "inputFormat": "The first line contains the number of farms $N$ ($3 \\leq N \\leq 100$).\n\nNext is an $N \\times N$ matrix representing the distance between each pair of farms. In theory, it consists of $N$ lines, each with $N$ integers separated by spaces. In practice, due to the $80$-character-per-line limit, some rows may continue directly onto subsequent lines. The diagonal entries are $0$, since there is no line from the $i$-th farm to itself.", "outputFormat": "Output a single integer: the minimum total length of fiber needed to connect all farms.", "hint": "Problem translation from NOCOW.\nUSACO Training Section 3.1.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO3.1] 最短网络 Agri-Net", "background": "Farmer John 被选为他们镇的镇长！他其中一个竞选承诺就是在镇上建立起互联网，并连接到所有的农场。当然，他需要你的帮助。\n", "description": "FJ 已经给他的农场安排了一条高速的网络线路，他想把这条线路共享给其他农场。为了用最小的消费，他想铺设最短的光纤去连接所有的农场。\n\n你将得到一份各农场之间连接费用的列表，你必须找出能连接所有农场并所用光纤最短的方案。每两个农场间的距离不会超过 $10^5$。", "inputFormat": "第一行农场的个数 $N$（$3 \\leq N \\leq 100$）。\n\n接下来是一个 $N \\times N$ 的矩阵，表示每个农场之间的距离。理论上，他们是 $N$ 行，每行由 $N$ 个用空格分隔的数组成，实际上，由于每行 $80$ 个字符的限制，因此，某些行会紧接着另一些行。当然，对角线将会是 $0$，因为不会有线路从第 $i$ 个农场到它本身。", "outputFormat": "只有一个输出，其中包含连接到每个农场的光纤的最小长度。\n", "hint": "题目翻译来自NOCOW。\n\nUSACO Training Section 3.1\n", "locale": "zh-CN"}}}
{"pid": "P1547", "type": "P", "difficulty": 3, "samples": [["3 3\n1 2 23\n2 3 1000\n1 3 43", "43"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "2005", "USACO", "并查集", "生成树", "连通块"], "title": "[USACO05MAR] Out of Hay S", "background": "", "description": "Bessie 计划调查 $N$（$2 \\leq N \\leq 2\\,000$）个农场的干草情况，它从 $1$ 号农场出发。农场之间总共有 $M$（$1 \\leq M \\leq 10^4$）条双向道路，所有道路的总长度不超过 $10^9$。有些农场之间存在着多条道路，所有的农场之间都是连通的。\n\nBessie 希望计算出该图中最小生成树中的最长边的长度。\n", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行三个用空格隔开的整数 $A_i,B_i,L_i$，表示 $A_i,B_i$ 之间有一条道路，长度为 $L_i$。", "outputFormat": "一个整数，表示最小生成树中的最长边的长度。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05MAR] Out of Hay S", "background": "", "description": "Bessie plans to survey the hay situation of $N$ ($2 \\leq N \\leq 2\\,000$) farms, starting from farm $1$. There are $M$ ($1 \\leq M \\leq 10^4$) bidirectional roads in total, and the total length of all roads does not exceed $10^9$. There may be multiple roads between some pairs of farms, and all farms are connected.\n\nBessie wants to compute the length of the longest edge in a minimum spanning tree of this graph.", "inputFormat": "The first line contains two integers $N, M$.\n\nEach of the next $M$ lines contains three space-separated integers $A_i, B_i, L_i$, indicating there is a road between $A_i$ and $B_i$ with length $L_i$.", "outputFormat": "Output a single integer, the length of the longest edge in the minimum spanning tree.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05MAR] Out of Hay S", "background": "", "description": "Bessie 计划调查 $N$（$2 \\leq N \\leq 2\\,000$）个农场的干草情况，它从 $1$ 号农场出发。农场之间总共有 $M$（$1 \\leq M \\leq 10^4$）条双向道路，所有道路的总长度不超过 $10^9$。有些农场之间存在着多条道路，所有的农场之间都是连通的。\n\nBessie 希望计算出该图中最小生成树中的最长边的长度。\n", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行三个用空格隔开的整数 $A_i,B_i,L_i$，表示 $A_i,B_i$ 之间有一条道路，长度为 $L_i$。", "outputFormat": "一个整数，表示最小生成树中的最长边的长度。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1548", "type": "P", "difficulty": 1, "samples": [["2 3", "8 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["1997", "NOIP 普及组", "枚举"], "title": "[NOIP 1997 普及组] 棋盘问题", "background": "NOIP1997 普及组第一题", "description": "设有一个 $N \\times M$ 方格的棋盘 $(1≤N≤100,1≤M≤100)$\n\n求出该棋盘中包含有多少个正方形、多少个长方形（不包括正方形）。\n\n例如：当 $N=2, M=3$ 时：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n\n   \n正方形的个数有 $8$ 个：即边长为 $1$ 的正方形有 $6$ 个；边长为 $2$ 的正方形有 $2$ 个。\n\n长方形的个数有 $10$ 个：\n\n即  \n\n- $2 \\times 1$ 的长方形有 $4$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhazon60.png)\n\n- $1 \\times 2$ 的长方形有 $3$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr40fqzv.png)\n\n- $3 \\times 1$ 的长方形有 $2$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ja0mx48f.png)\n\n- $3 \\times 2$ 的长方形有 $1$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n", "inputFormat": "一行两个整数 $N,M$。", "outputFormat": "一行两个整数，表示正方形的个数与长方形的个数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1997 Junior] Chessboard Problem", "background": "NOIP 1997 Junior, Problem 1.", "description": "Given a chessboard with an $N \\times M$ grid $(1≤N≤100,1≤M≤100)$, find how many squares and how many rectangles (excluding squares) it contains.\n\nFor example, when $N=2, M=3$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n\nThe number of squares is $8$: there are $6$ squares of side length $1$ and $2$ squares of side length $2$.\n\nThe number of rectangles is $10$:\n\nSpecifically:\n\n- There are $4$ rectangles of size $2 \\times 1$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhazon60.png)\n\n- There are $3$ rectangles of size $1 \\times 2$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr40fqzv.png)\n\n- There are $2$ rectangles of size $3 \\times 1$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ja0mx48f.png)\n\n- There is $1$ rectangle of size $3 \\times 2$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)", "inputFormat": "One line with two integers $N,M$.", "outputFormat": "One line with two integers, the number of squares and the number of rectangles.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1997 普及组] 棋盘问题", "background": "NOIP1997 普及组第一题", "description": "设有一个 $N \\times M$ 方格的棋盘 $(1≤N≤100,1≤M≤100)$\n\n求出该棋盘中包含有多少个正方形、多少个长方形（不包括正方形）。\n\n例如：当 $N=2, M=3$ 时：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n\n   \n正方形的个数有 $8$ 个：即边长为 $1$ 的正方形有 $6$ 个；边长为 $2$ 的正方形有 $2$ 个。\n\n长方形的个数有 $10$ 个：\n\n即  \n\n- $2 \\times 1$ 的长方形有 $4$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhazon60.png)\n\n- $1 \\times 2$ 的长方形有 $3$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr40fqzv.png)\n\n- $3 \\times 1$ 的长方形有 $2$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ja0mx48f.png)\n\n- $3 \\times 2$ 的长方形有 $1$ 个：  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kkidop2i.png)\n", "inputFormat": "一行两个整数 $N,M$。", "outputFormat": "一行两个整数，表示正方形的个数与长方形的个数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1549", "type": "P", "difficulty": 4, "samples": [["1", "NO\n"], ["2", "1 2\n4 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["1997", "NOIP 提高组", "Special Judge"], "title": "[NOIP 1997 提高组] 棋盘问题", "background": "NOIP1997 提高组第一题\n\n[P5512](https://www.luogu.com.cn/problem/P5512) 为本题数据加强版。\n\n本题实际的数据的范围是 $1\\le N\\le 5$。不保证存在可以通过原数据范围的非打表做法。", "description": "在 $N \\times N$（$1 \\le N \\le 10$）的棋盘上，填入 $1, 2, \\dots, N ^ 2$ 共 $N ^ 2$ 个数，使得任意两个相邻的数之和为素数。\n\n例如：当 $N = 2$ 时，有：\n\n| $1$ | $2$ |\n| :-----------: | :-----------: |\n| $4$ | $3$ |\n\n其相邻数的和为素数的有：\n\n$1+2,1+4,4+3,2+3$\n\n当 $N=4$ 时，一种可以填写的方案如下：\n\n| $1$ | $2$ | $11$ | $12$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $16$ | $15$ | $8$ | $5$ |\n| $13$ | $4$ | $9$ | $14$ |\n| $6$ | $7$ | $10$ | $3$ |\n\n在这里我们约定：左上角的格子里必须填数字 $1$。", "inputFormat": "一个数 $N$。", "outputFormat": "如有多种解，则输出第一行、第一列之和为最小的排列方案；若无解，则输出 `NO`。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1997 Senior] Chessboard Problem", "background": "NOIP 1997 Senior, Problem 1.\n\n[P5512](https://www.luogu.com.cn/problem/P5512) is the enhanced testdata version of this problem.\n\nThe actual constraints for this problem are $1\\le N\\le 5$. There is no guarantee that a solution without hardcoding can pass the original constraints.", "description": "On an $N \\times N$ ($1 \\le N \\le 10$) board, fill in the $N ^ 2$ numbers $1, 2, \\dots, N ^ 2$, so that the sum of any two adjacent numbers is a prime number.\n\nFor example, when $N = 2$, there is:\n\n| $1$ | $2$ |\n| :-----------: | :-----------: |\n| $4$ | $3$ |\n\nThe adjacent pairs whose sums are prime are:\n\n$1+2,1+4,4+3,2+3$\n\nWhen $N=4$, one possible arrangement is:\n\n| $1$ | $2$ | $11$ | $12$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $16$ | $15$ | $8$ | $5$ |\n| $13$ | $4$ | $9$ | $14$ |\n| $6$ | $7$ | $10$ | $3$ |\n\nHere we stipulate that the top-left cell must contain the number $1$.", "inputFormat": "A single integer $N$.", "outputFormat": "If multiple solutions exist, output the arrangement whose sum of the first row and the first column is minimal. Output the board in $N$ lines, each containing $N$ integers separated by single spaces. If no solution exists, output `NO`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1997 提高组] 棋盘问题", "background": "NOIP1997 提高组第一题\n\n[P5512](https://www.luogu.com.cn/problem/P5512) 为本题数据加强版。\n\n本题实际的数据的范围是 $1\\le N\\le 5$。不保证存在可以通过原数据范围的非打表做法。", "description": "在 $N \\times N$（$1 \\le N \\le 10$）的棋盘上，填入 $1, 2, \\dots, N ^ 2$ 共 $N ^ 2$ 个数，使得任意两个相邻的数之和为素数。\n\n例如：当 $N = 2$ 时，有：\n\n| $1$ | $2$ |\n| :-----------: | :-----------: |\n| $4$ | $3$ |\n\n其相邻数的和为素数的有：\n\n$1+2,1+4,4+3,2+3$\n\n当 $N=4$ 时，一种可以填写的方案如下：\n\n| $1$ | $2$ | $11$ | $12$ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $16$ | $15$ | $8$ | $5$ |\n| $13$ | $4$ | $9$ | $14$ |\n| $6$ | $7$ | $10$ | $3$ |\n\n在这里我们约定：左上角的格子里必须填数字 $1$。", "inputFormat": "一个数 $N$。", "outputFormat": "如有多种解，则输出第一行、第一列之和为最小的排列方案；若无解，则输出 `NO`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1550", "type": "P", "difficulty": 3, "samples": [["4\n5\n4\n4\n3\n0 2 2 2\n2 0 3 3\n2 3 0 4\n2 3 4 0", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "2008", "USACO", "生成树"], "title": "[USACO08OCT] Watering Hole G", "background": "", "description": "Farmer John 的农场缺水了。\n\n他决定将水引入到他的 $n$ 个农场。他准备通过挖若干井，并在各块田中修筑水道来连通各块田地以供水。在第 $i$ 号田中挖一口井需要花费 $W_i$ 元。连接 $i$ 号田与 $j$ 号田需要 $P_{i,j}$（$P_{j,i}=P_{i,j}$）元。\n\n请求出 FJ 需要为使所有农场都与有水的农场相连或拥有水井所需要的最少钱数。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $W_i$。\n\n接下来 $n$ 行，每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数表示连接 $i$ 号田和 $j$ 号田需要的费用 $P_{i,j}$。", "outputFormat": "输出最小开销。\n", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 300$，$1 \\leq W_i \\leq 10^5$，$0 \\leq P_{i,j} \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08OCT] Watering Hole G", "background": "", "description": "Farmer John’s farm is short of water.\n\nHe decides to bring water to his $n$ fields. He can dig some wells and build channels between fields to connect them for water supply. Digging a well in field $i$ costs $W_i$ units. Connecting field $i$ and field $j$ costs $P_{i,j}$ (with $P_{j,i} = P_{i,j}$) units.\n\nFind the minimum amount of money FJ needs so that every field is either connected to a field that has water or has its own well.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain an integer $W_i$.\n\nThe next $n$ lines each contain $n$ integers; the $j$-th number in the $i$-th line is the cost $P_{i,j}$ to connect field $i$ and field $j$.", "outputFormat": "Output the minimum cost.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq n \\leq 300$, $1 \\leq W_i \\leq 10^5$, $0 \\leq P_{i,j} \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO08OCT] Watering Hole G", "background": "", "description": "Farmer John 的农场缺水了。\n\n他决定将水引入到他的 $n$ 个农场。他准备通过挖若干井，并在各块田中修筑水道来连通各块田地以供水。在第 $i$ 号田中挖一口井需要花费 $W_i$ 元。连接 $i$ 号田与 $j$ 号田需要 $P_{i,j}$（$P_{j,i}=P_{i,j}$）元。\n\n请求出 FJ 需要为使所有农场都与有水的农场相连或拥有水井所需要的最少钱数。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $W_i$。\n\n接下来 $n$ 行，每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数表示连接 $i$ 号田和 $j$ 号田需要的费用 $P_{i,j}$。", "outputFormat": "输出最小开销。\n", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 300$，$1 \\leq W_i \\leq 10^5$，$0 \\leq P_{i,j} \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1551", "type": "P", "difficulty": 3, "samples": [["6 5 3\n1 2\n1 5\n3 4\n5 2\n1 3\n1 4\n2 3\n5 6", "Yes\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集"], "title": "亲戚", "background": "若某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。\n", "description": "规定：$x$ 和 $y$ 是亲戚，$y$ 和 $z$ 是亲戚，那么 $x$ 和 $z$ 也是亲戚。如果 $x$，$y$ 是亲戚，那么 $x$ 的亲戚都是 $y$ 的亲戚，$y$ 的亲戚也都是 $x$ 的亲戚。", "inputFormat": "第一行：三个整数 $n,m,p$，（$n,m,p \\le 5000$），分别表示有 $n$ 个人，$m$ 个亲戚关系，询问 $p$ 对亲戚关系。\n\n以下 $m$ 行：每行两个数 $M_i$，$M_j$，$1 \\le M_i,~M_j\\le n$，表示 $M_i$ 和 $M_j$ 具有亲戚关系。\n\n接下来 $p$ 行：每行两个数 $P_i,P_j$，询问 $P_i$ 和 $P_j$ 是否具有亲戚关系。", "outputFormat": "$p$ 行，每行一个 `Yes` 或 `No`。表示第 $i$ 个询问的答案为“具有”或“不具有”亲戚关系。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Relatives", "background": "If a family is too large, it can be hard to determine whether two people are relatives. Given a kinship graph, determine whether any given pair of people are relatives.", "description": "Rules: If $x$ and $y$ are relatives, and $y$ and $z$ are relatives, then $x$ and $z$ are also relatives. If $x$ and $y$ are relatives, then all relatives of $x$ are also relatives of $y$, and all relatives of $y$ are also relatives of $x$.", "inputFormat": "The first line contains three integers $n,m,p$ ($n,m,p \\le 5000$), representing that there are $n$ people, $m$ kinship relations, and $p$ queries.\n\nEach of the following $m$ lines contains two integers $M_i,M_j$ ($1 \\le M_i,~M_j \\le n$), indicating that $M_i$ and $M_j$ are relatives.\n\nThen the next $p$ lines each contain two integers $P_i,P_j$, asking whether $P_i$ and $P_j$ are relatives.", "outputFormat": "Output $p$ lines. Each line contains either `Yes` or `No`, indicating whether the answer to the $i$-th query is “are relatives” or “are not relatives.”", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "亲戚", "background": "若某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。\n", "description": "规定：$x$ 和 $y$ 是亲戚，$y$ 和 $z$ 是亲戚，那么 $x$ 和 $z$ 也是亲戚。如果 $x$，$y$ 是亲戚，那么 $x$ 的亲戚都是 $y$ 的亲戚，$y$ 的亲戚也都是 $x$ 的亲戚。", "inputFormat": "第一行：三个整数 $n,m,p$，（$n,m,p \\le 5000$），分别表示有 $n$ 个人，$m$ 个亲戚关系，询问 $p$ 对亲戚关系。\n\n以下 $m$ 行：每行两个数 $M_i$，$M_j$，$1 \\le M_i,~M_j\\le n$，表示 $M_i$ 和 $M_j$ 具有亲戚关系。\n\n接下来 $p$ 行：每行两个数 $P_i,P_j$，询问 $P_i$ 和 $P_j$ 是否具有亲戚关系。", "outputFormat": "$p$ 行，每行一个 `Yes` 或 `No`。表示第 $i$ 个询问的答案为“具有”或“不具有”亲戚关系。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1552", "type": "P", "difficulty": 6, "samples": [["5 4\n0 3 3\n1 3 5\n2 2 2\n1 2 4\n2 3 1\n", "6\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2012", "平衡树", "APIO", "可并堆", "栈"], "title": "[APIO2012] 派遣", "background": "在一个忍者的帮派里，一些忍者们被选中派遣给顾客，然后依据自己的工作获取报偿。", "description": "在这个帮派里，有一名忍者被称之为 Master。除了 Master 以外，每名忍者都有且仅有一个上级。为保密，同时增强忍者们的领导力，所有与他们工作相关的指令总是由上级发送给他的直接下属，而不允许通过其他的方式发送。\n\n现在你要招募一批忍者，并把它们派遣给顾客。你需要为每个被派遣的忍者支付一定的薪水，同时使得支付的薪水总额不超过你的预算。另外，为了发送指令，你需要选择一名忍者作为管理者，要求这个管理者可以向所有被派遣的忍者发送指令，在发送指令时，任何忍者（不管是否被派遣）都可以作为消息的传递人。管理者自己可以被派遣，也可以不被派遣。当然，如果管理者没有被派遣，你就不需要支付管理者的薪水。\n\n   \n你的目标是在预算内使顾客的满意度最大。这里定义顾客的满意度为派遣的忍者总数乘以管理者的领导力水平，其中每个忍者的领导力水平也是一定的。\n\n   \n写一个程序，给定每一个忍者 $i$ 的上级 $B_i$，薪水 $C_i$，领导力 $L_i$，以及支付给忍者们的薪水总预算 $M$，输出在预算内满足上述要求时顾客满意度的最大值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，其中 $N$ 表示忍者的个数，$M$ 表示薪水的总预算。\n\n \n接下来 $N$ 行描述忍者们的上级、薪水以及领导力。其中的第 $i$ 行包含三个整数 $B_i,C_i,L_i$ 分别表示第 $i$ 个忍者的上级，薪水以及领导力。Master 满足 $B_i=0$，并且每一个忍者的老板的编号一定小于自己的编号 $B_i\\lt i$。", "outputFormat": "一行一个整数，表示在预算内顾客的满意度的最大值。", "hint": "$1 \\le N \\le 10^5$，$1 \\le M \\le 10^9$，$0 \\le B_i \\lt i$，$1 \\le C_i \\le M$，$1 \\le L_i \\le 10^9$。\n\n对于 $30\\%$ 的数据，$N \\le 3000$。", "locale": "zh-CN", "translations": {"en": {"title": "[APIO2012] Dispatch", "background": "In a ninja gang, some ninjas are selected to be dispatched to customers and are paid according to their work.", "description": "In this gang, there is one ninja called the Master. Every ninja except the Master has exactly one superior. For secrecy and to strengthen leadership, all work-related commands are always sent from a superior to their direct subordinate, and cannot be sent in any other way.\n\nYou are now to recruit a group of ninjas and dispatch them to customers. You must pay a salary for each dispatched ninja, and the total salary must not exceed your budget. In addition, to send commands, you must choose one ninja as the manager, and this manager must be able to send commands to all dispatched ninjas. When sending commands, any ninja (dispatched or not) may act as a relay. The manager themself may or may not be dispatched. If the manager is not dispatched, you do not need to pay the manager’s salary.\n\nYour goal is to maximize customer satisfaction within the budget. Customer satisfaction is defined as the number of dispatched ninjas multiplied by the manager’s leadership level, where each ninja has a fixed leadership level.\n\nWrite a program that, given each ninja $i$’s superior $B_i$, salary $C_i$, leadership level $L_i$, and the total budget $M$, outputs the maximum possible customer satisfaction under the above requirements.", "inputFormat": "The first line contains two integers $N$ and $M$, where $N$ is the number of ninjas and $M$ is the total salary budget.\n\nThe next $N$ lines describe each ninja’s superior, salary, and leadership level. The $i$-th line contains three integers $B_i, C_i, L_i$, denoting ninja $i$’s superior, salary, and leadership level, respectively. The Master has $B_i = 0$, and every ninja’s superior index is strictly less than their own, i.e., $B_i \\lt i$.", "outputFormat": "Output a single integer, the maximum customer satisfaction within the budget.", "hint": "$1 \\le N \\le 10^5$，$1 \\le M \\le 10^9$，$0 \\le B_i \\lt i$，$1 \\le C_i \\le M$，$1 \\le L_i \\le 10^9$。\n\nFor $30\\%$ of the testdata, $N \\le 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[APIO2012] 派遣", "background": "在一个忍者的帮派里，一些忍者们被选中派遣给顾客，然后依据自己的工作获取报偿。", "description": "在这个帮派里，有一名忍者被称之为 Master。除了 Master 以外，每名忍者都有且仅有一个上级。为保密，同时增强忍者们的领导力，所有与他们工作相关的指令总是由上级发送给他的直接下属，而不允许通过其他的方式发送。\n\n现在你要招募一批忍者，并把它们派遣给顾客。你需要为每个被派遣的忍者支付一定的薪水，同时使得支付的薪水总额不超过你的预算。另外，为了发送指令，你需要选择一名忍者作为管理者，要求这个管理者可以向所有被派遣的忍者发送指令，在发送指令时，任何忍者（不管是否被派遣）都可以作为消息的传递人。管理者自己可以被派遣，也可以不被派遣。当然，如果管理者没有被派遣，你就不需要支付管理者的薪水。\n\n   \n你的目标是在预算内使顾客的满意度最大。这里定义顾客的满意度为派遣的忍者总数乘以管理者的领导力水平，其中每个忍者的领导力水平也是一定的。\n\n   \n写一个程序，给定每一个忍者 $i$ 的上级 $B_i$，薪水 $C_i$，领导力 $L_i$，以及支付给忍者们的薪水总预算 $M$，输出在预算内满足上述要求时顾客满意度的最大值。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，其中 $N$ 表示忍者的个数，$M$ 表示薪水的总预算。\n\n \n接下来 $N$ 行描述忍者们的上级、薪水以及领导力。其中的第 $i$ 行包含三个整数 $B_i,C_i,L_i$ 分别表示第 $i$ 个忍者的上级，薪水以及领导力。Master 满足 $B_i=0$，并且每一个忍者的老板的编号一定小于自己的编号 $B_i\\lt i$。", "outputFormat": "一行一个整数，表示在预算内顾客的满意度的最大值。", "hint": "$1 \\le N \\le 10^5$，$1 \\le M \\le 10^9$，$0 \\le B_i \\lt i$，$1 \\le C_i \\le M$，$1 \\le L_i \\le 10^9$。\n\n对于 $30\\%$ 的数据，$N \\le 3000$。", "locale": "zh-CN"}}}
{"pid": "P1553", "type": "P", "difficulty": 2, "samples": [["5087462", "2647805"], ["600.084", "6.48"], ["700/27", "7/72"], ["8670%", "768%"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "数字反转（升级版）", "background": "**以下为原题面，仅供参考:**\n\n给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。整数反转是将所有数位对调；小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分；分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母；百分数的分子一定是整数，百分数只改变数字部分。整数新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零；小数新数的末尾不为 $0$（除非小数部分除了 $0$ 没有别的数，那么只保留1个 $0$）；分数不约分，分子和分母都不是小数（约分滴童鞋抱歉了，不能过哦。输入数据保证分母不为 $0$），本次没有负数。\n", "description": "给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。\n\n- 整数反转是将所有数位对调。\n\n- 小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分。\n\n- 分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母。\n\n- 百分数的分子一定是整数，百分数只改变数字部分。", "inputFormat": "一个实数 $s$\n", "outputFormat": "一个实数，即 $s$ 的反转数\n", "hint": "**【数据范围】**\n\n- 对于 $25\\%$ 的数据，$s$ 是整数，不大于 $20$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是小数，整数部分和小数部分均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是分数，分子和分母均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是百分数，分子不大于 $19$ 位。\n\n**【数据保证】**\n\n- 对于整数翻转而言，整数原数和整数新数满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数和原来的数字的最高位数字不应为零。\n\n- 对于小数翻转而言，其小数点前面部分同上，小数点后面部分的形式，保证满足小数的常见形式，也就是末尾没有多余的 $0$（小数部分除了 $0$ 没有别的数，那么只保留 $1$ 个 $0$。若反转之后末尾数字出现 $0$，请省略多余的 $0$）\n\n- 对于分数翻转而言，分数不约分，分子和分母都不是小数。输入的分母不为 $0$。与整数翻转相关规定见上。\n\n- 对于百分数翻转而言，见与整数翻转相关内容。\n\n数据不存在负数。", "locale": "zh-CN", "translations": {"en": {"title": "Digit Reversal (Enhanced Edition)", "background": "The following is the original statement, for reference only:\n\nGiven a number, reverse the digits in each place to obtain a new number.\n\nUnlike NOIp2011 Junior Problem 1, this time the number can be a decimal, a fraction, a percentage, or an integer. Integer reversal means reversing all digits. Decimal reversal means reversing the digits of the integer part and the digits of the fractional part separately, without swapping the integer and fractional parts. Fraction reversal means reversing the digits of the denominator and then the digits of the numerator, without swapping the numerator and the denominator. For a percentage, the numerator is always an integer, and only the digits are changed. The new integer must satisfy the normal integer form: unless the given original number is zero, the highest digit of the reversed integer must not be zero. The new decimal must not end with $0$ (unless the fractional part contains nothing but $0$, in which case keep exactly one $0$). Fractions are not reduced, and neither the numerator nor the denominator is a decimal (the input guarantees that the denominator is not $0$). There are no negative numbers.", "description": "Given a number, reverse the digits in each place to obtain a new number.\n\nUnlike NOIp2011 Junior Problem 1, this time the number can be a decimal, a fraction, a percentage, or an integer.\n\n- Integer reversal: reverse all digits.\n\n- Decimal reversal: reverse the digits of the integer part and the digits of the fractional part separately, without swapping the integer and fractional parts.\n\n- Fraction reversal: reverse the digits of the denominator, then reverse the digits of the numerator, without swapping the numerator and the denominator.\n\n- Percentage: the numerator is always an integer; only the digits are changed.", "inputFormat": "A number $s$.", "outputFormat": "A number: the reversed form of $s$.", "hint": "Constraints\n\n- For $25\\%$ of the testdata, $s$ is an integer with at most $20$ digits.\n- For $25\\%$ of the testdata, $s$ is a decimal, and both its integer part and fractional part have at most $10$ digits.\n- For $25\\%$ of the testdata, $s$ is a fraction, and both its numerator and denominator have at most $10$ digits.\n- For $25\\%$ of the testdata, $s$ is a percentage, and its numerator has at most $19$ digits.\n\nData Guarantees\n\n- For integer reversal, both the original integer and the reversed integer satisfy the normal integer form: unless the original number is zero, the highest digit of both the original and the reversed number must not be zero.\n- For decimal reversal, the part before the decimal point follows the same rule as integers. The part after the decimal point satisfies the normal decimal form, i.e., there are no extra trailing $0$s (if the fractional part has nothing but $0$, keep exactly $1$ zero. If trailing zeros appear after reversal, omit the extra $0$s).\n- For fraction reversal, the fraction is not reduced, and neither the numerator nor the denominator is a decimal. The input denominator is not $0$. Rules related to integer reversal apply as above.\n- For percentage reversal, see the rules related to integers.\n\nThere are no negative numbers in the testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数字反转（升级版）", "background": "**以下为原题面，仅供参考:**\n\n给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。整数反转是将所有数位对调；小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分；分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母；百分数的分子一定是整数，百分数只改变数字部分。整数新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零；小数新数的末尾不为 $0$（除非小数部分除了 $0$ 没有别的数，那么只保留1个 $0$）；分数不约分，分子和分母都不是小数（约分滴童鞋抱歉了，不能过哦。输入数据保证分母不为 $0$），本次没有负数。\n", "description": "给定一个数，请将该数各个位上数字反转得到一个新数。\n\n这次与 NOIp2011 普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。\n\n- 整数反转是将所有数位对调。\n\n- 小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分。\n\n- 分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母。\n\n- 百分数的分子一定是整数，百分数只改变数字部分。", "inputFormat": "一个实数 $s$\n", "outputFormat": "一个实数，即 $s$ 的反转数\n", "hint": "**【数据范围】**\n\n- 对于 $25\\%$ 的数据，$s$ 是整数，不大于 $20$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是小数，整数部分和小数部分均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是分数，分子和分母均不大于 $10$ 位；\n- 对于 $25\\%$ 的数据，$s$ 是百分数，分子不大于 $19$ 位。\n\n**【数据保证】**\n\n- 对于整数翻转而言，整数原数和整数新数满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数和原来的数字的最高位数字不应为零。\n\n- 对于小数翻转而言，其小数点前面部分同上，小数点后面部分的形式，保证满足小数的常见形式，也就是末尾没有多余的 $0$（小数部分除了 $0$ 没有别的数，那么只保留 $1$ 个 $0$。若反转之后末尾数字出现 $0$，请省略多余的 $0$）\n\n- 对于分数翻转而言，分数不约分，分子和分母都不是小数。输入的分母不为 $0$。与整数翻转相关规定见上。\n\n- 对于百分数翻转而言，见与整数翻转相关内容。\n\n数据不存在负数。", "locale": "zh-CN"}}}
{"pid": "P1554", "type": "P", "difficulty": 1, "samples": [["129 137", "1 10 2 9 1 1 1 1 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "数学", "2006", "USACO"], "title": "[USACO06DEC] 梦中的统计 Dream Counting B", "background": "Bessie 处于半梦半醒的状态。过了一会儿，她意识到她在数数，不能入睡。", "description": "Bessie 的大脑反应灵敏，仿佛真实地看到了她数过的一个又一个数。她开始注意每一个数码（$0 \\ldots 9$）：每一个数码在计数的过程中出现过多少次？\n\n给出两个整数 $M$ 和 $N$，求在序列 $[M, M + 1, M + 2, \\ldots, N - 1, N]$ 中每一个数码出现了多少次。", "inputFormat": "第 $1$ 行：两个用空格分开的整数 $M$ 和 $N$。", "outputFormat": "第 $1$ 行：十个用空格分开的整数，分别表示数码 $0 \\ldots 9$ 在序列中出现的次数。", "hint": "数据保证，$1 \\leq M \\leq N \\leq 2 \\times 10^9$，$0 \\leq N-M \\leq 5 \\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06DEC] Dream Counting B", "background": "Bessie is half asleep. After a while, she realizes she is counting and cannot fall asleep.", "description": "Bessie's mind is sharp, as if she vividly sees each number she has counted. She starts to pay attention to every digit ($0 \\ldots 9$): how many times does each digit appear during the counting process?\n\nGiven two integers $M$ and $N$, determine how many times each digit appears in the sequence $[M, M + 1, M + 2, \\ldots, N - 1, N]$.", "inputFormat": "Line $1$: Two integers $M$ and $N$ separated by a space.", "outputFormat": "Line $1$: Ten integers separated by spaces, representing how many times the digits $0 \\ldots 9$ appear in the sequence.", "hint": "Constraints: $1 \\leq M \\leq N \\leq 2 \\times 10^9$, $0 \\leq N - M \\leq 5 \\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] 梦中的统计 Dream Counting B", "background": "Bessie 处于半梦半醒的状态。过了一会儿，她意识到她在数数，不能入睡。", "description": "Bessie 的大脑反应灵敏，仿佛真实地看到了她数过的一个又一个数。她开始注意每一个数码（$0 \\ldots 9$）：每一个数码在计数的过程中出现过多少次？\n\n给出两个整数 $M$ 和 $N$，求在序列 $[M, M + 1, M + 2, \\ldots, N - 1, N]$ 中每一个数码出现了多少次。", "inputFormat": "第 $1$ 行：两个用空格分开的整数 $M$ 和 $N$。", "outputFormat": "第 $1$ 行：十个用空格分开的整数，分别表示数码 $0 \\ldots 9$ 在序列中出现的次数。", "hint": "数据保证，$1 \\leq M \\leq N \\leq 2 \\times 10^9$，$0 \\leq N-M \\leq 5 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1555", "type": "P", "difficulty": 3, "samples": [["1010\n212", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "2011", "USACO", "枚举", "进制"], "title": "[USACO11NOV] 尴尬的数字 Awkward Digits B", "background": "Bessie 刚刚学会了不同进制数之间的转换，但是她总是犯错误，因为她的两个前蹄不能轻松的握住钢笔。", "description": "每当 Bessie 将一个数转换成新的进制时，她总会写错一位数字。例如，她将 `14` 转化成 $2$ 进制数，正确的结果是 `1110`，但她可能会写成 `0110` 或 `1111`。Bessie 从不会意外地增加或删减数字，所以她可能会写出以 `0` 开头的错误数字。\n\n给出 Bessie 转换后 $N$ 的 $2$ 进制形式和 $3$ 进制形式，请计算出 $N$ 的正确数值（用十进制表示）。$N$ 可能会达到 $10^9$，输入数据保证解的存在唯一性。", "inputFormat": "第一行，$N$ 的 $2$ 进制表示（有一位是错误的数字）。\n\n第二行，$N$ 的 $3$ 进制表示（有一位是错误的数字）。", "outputFormat": "仅一行，$N$ 的正确数值。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO11NOV] Awkward Digits B", "background": "Bessie has just learned how to convert numbers between different bases, but she often makes mistakes because her two front hooves cannot easily hold a pen.", "description": "Every time Bessie converts a number to a new base, she always writes exactly one digit incorrectly. For example, when she converts `14` to base $2$, the correct result is `1110`, but she might write `0110` or `1111`. Bessie never accidentally inserts or deletes digits, so she might write an incorrect number that starts with `0`.\n\nGiven Bessie's base $2$ form of $N$ and base $3$ form of $N$ after her conversion, compute the correct value of $N$ (in decimal). $N$ may be as large as $10^9$, and the input guarantees that the solution exists and is unique.", "inputFormat": "The first line contains the base $2$ representation of $N$ (with exactly one incorrect digit).\nThe second line contains the base $3$ representation of $N$ (with exactly one incorrect digit).", "outputFormat": "Output a single line with the correct value of $N$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11NOV] 尴尬的数字 Awkward Digits B", "background": "Bessie 刚刚学会了不同进制数之间的转换，但是她总是犯错误，因为她的两个前蹄不能轻松的握住钢笔。", "description": "每当 Bessie 将一个数转换成新的进制时，她总会写错一位数字。例如，她将 `14` 转化成 $2$ 进制数，正确的结果是 `1110`，但她可能会写成 `0110` 或 `1111`。Bessie 从不会意外地增加或删减数字，所以她可能会写出以 `0` 开头的错误数字。\n\n给出 Bessie 转换后 $N$ 的 $2$ 进制形式和 $3$ 进制形式，请计算出 $N$ 的正确数值（用十进制表示）。$N$ 可能会达到 $10^9$，输入数据保证解的存在唯一性。", "inputFormat": "第一行，$N$ 的 $2$ 进制表示（有一位是错误的数字）。\n\n第二行，$N$ 的 $3$ 进制表示（有一位是错误的数字）。", "outputFormat": "仅一行，$N$ 的正确数值。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1556", "type": "P", "difficulty": 4, "samples": [["4\n0 1\n2 1\n2 0\n2 -5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2012", "USACO"], "title": "[USACO12MAR] 幸福的路 Connect the Cows B", "background": null, "description": "每天，John 都要为了农场里 $n$（$1 \\leq n\\leq 10$）头牛的健康和幸福四处奔波。\n\n每头牛的位置可以描述为一个二维坐标，John 从坐标原点 $(0,0)$ 出发。为了使路径更有趣，John 决定只沿着平行于坐标轴的方向行走，这样只能沿着东西南北方向运动。而且只有到达某头牛的坐标后 John 才会改变行走的方向（当然，如果有必要，John 也会穿过某头牛的坐标而不改变行走的方向）。\n\n如果 John 改变行走的方向，他会原地转 $90^\\circ$ 或者 $180^\\circ$。John 的路径必须保证检查完所有牛后返回原点。\n\nJohn 可以穿过某头牛的坐标而不改变方向任意次，请计算出有多少条路径满足 John 能检查完 $n$ 头牛，在每头牛的坐标处恰好改变一次方向。同一条路径从不同方向经过要计算两次。", "inputFormat": "第一行一个整数 $n$，含义如题面所示。\n\n第二行到第 $n+1$ 行，第 $i+1$ 行是两个用空格隔开的整数 $x$ 和 $y$，表示第 $i$ 头牛的坐标（$-1000 \\leq x,y \\leq 1000$）。", "outputFormat": "一行一个整数，表示路径的数量（如果没有满足要求的路径则输出 `0`）。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO12MAR] Happy Road (Connect the Cows B)", "background": "", "description": "Every day, John bustles around to ensure the health and happiness of $n$ ($1 \\leq n \\leq 10$) cows.\n\nEach cow’s position is given by a 2D coordinate, and John starts at the origin $(0, 0)$. To make the route more interesting, John decides to move only along directions parallel to the coordinate axes, that is, only north, south, east, or west. Moreover, John changes direction only upon reaching the coordinate of some cow (of course, if necessary, John may also pass through a cow’s coordinate without changing direction).\n\nIf John changes direction, he turns in place by $90^\\circ$ or $180^\\circ$. John’s path must visit all cows and then return to the origin.\n\nJohn may pass through any cow’s coordinate without changing direction any number of times. Please compute how many routes allow John to visit all $n$ cows, such that he changes direction exactly once at each cow’s coordinate. The same geometric path traversed in the opposite direction should be counted twice.", "inputFormat": "The first line contains an integer $n$, as described above.\n\nThe next $n$ lines each contain two space-separated integers $x$ and $y$, where line $i+1$ gives the coordinates of the $i$-th cow ($-1000 \\leq x, y \\leq 1000$).", "outputFormat": "Output a single integer on one line, the number of valid routes (output `0` if there are no valid routes).", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO12MAR] 幸福的路 Connect the Cows B", "background": null, "description": "每天，John 都要为了农场里 $n$（$1 \\leq n\\leq 10$）头牛的健康和幸福四处奔波。\n\n每头牛的位置可以描述为一个二维坐标，John 从坐标原点 $(0,0)$ 出发。为了使路径更有趣，John 决定只沿着平行于坐标轴的方向行走，这样只能沿着东西南北方向运动。而且只有到达某头牛的坐标后 John 才会改变行走的方向（当然，如果有必要，John 也会穿过某头牛的坐标而不改变行走的方向）。\n\n如果 John 改变行走的方向，他会原地转 $90^\\circ$ 或者 $180^\\circ$。John 的路径必须保证检查完所有牛后返回原点。\n\nJohn 可以穿过某头牛的坐标而不改变方向任意次，请计算出有多少条路径满足 John 能检查完 $n$ 头牛，在每头牛的坐标处恰好改变一次方向。同一条路径从不同方向经过要计算两次。", "inputFormat": "第一行一个整数 $n$，含义如题面所示。\n\n第二行到第 $n+1$ 行，第 $i+1$ 行是两个用空格隔开的整数 $x$ 和 $y$，表示第 $i$ 头牛的坐标（$-1000 \\leq x,y \\leq 1000$）。", "outputFormat": "一行一个整数，表示路径的数量（如果没有满足要求的路径则输出 `0`）。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1557", "type": "P", "difficulty": 4, "samples": [["+(1)23+(3)15-(1)2", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "高精度", "USACO"], "title": "Kruscal的加法", "background": "奶牛 Kruscal 认为人类的加法太落后了。比如说有时候想要用加法计算 `+15*3`，只能写成 `+15+15+15`，真是浪费精力啊！于是，Kruscal 决定开发出一种新的加法算式。", "description": "当然，新的算式也是建立在原本算式的基础上的，不同就在于上式可以直接写成 `+++15`，同理，对于 `-15*3` 这样的算式可以写成 `---15`。一段时间后，Kruscal 又被那无穷多个 `+-` 号囧到了，于是他又将这个算式改进了一下。\n\n比如 `+15*3` 又可以写成 `+(3)15`，同样，`-15*3` 等价于 `-(3)15`。但从上面可以看出，对于乘数较小的情况，如 `+++15` 这样的表述还是很方便的，于是在新的算式中还是保留了这种形式。\n\n对于算式还要做一点特殊的说明：`+15*3` 转换成 Kruscal 型算式时可以写成 `+++15` 或 `+(3)15`，但不可以写成 `++(2)15` 这样的形式。\n\n对于算式 `23+15*3-2` 可以表示为以下几种形式：`23+++15-2`、`23+(3)15-2`、`+23+++15-2`、`+23+(3)15-2`、`+(1)23+(3)15-(1)2`。不会出现如下几种形式：`(1)23+++15-2`、`+23++(2)15-(1)2`、`23+++15-2+(0)100`、`23-(-3)15-2`。", "inputFormat": "一行，一个 Kruscal 型算式。", "outputFormat": "一行，为运算结果。", "hint": "对于 $100 \\%$ 的数据，算式长度不超过 $2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Kruscal's Addition", "background": "The cow Kruscal thinks human addition is too backward. For example, sometimes to compute `+15*3` using addition, you can only write `+15+15+15`, which is a waste of effort. So Kruscal decided to develop a new additive expression.", "description": "Of course, the new notation is based on the original one. The difference is that the above can be written directly as `+++15`; similarly, an expression like `-15*3` can be written as `---15`. After a while, Kruscal was bothered by the countless `+` and `-` signs, so he improved the notation again.\n\nFor example, `+15*3` can also be written as `+(3)15`, and similarly, `-15*3` is equivalent to `-(3)15`. But as you can see, when the multiplier is small, expressions like `+++15` are still convenient, so this form is kept in the new notation.\n\nThere is a special note about the expressions: when converting `+15*3` to a Kruscal-style expression, you can write it as `+++15` or `+(3)15`, but not as `++(2)15`.\n\nThe expression `23+15*3-2` can be written in the following forms: `23+++15-2`, `23+(3)15-2`, `+23+++15-2`, `+23+(3)15-2`, `+(1)23+(3)15-(1)2`. The following forms will not appear: `(1)23+++15-2`, `+23++(2)15-(1)2`, `23+++15-2+(0)100`, `23-(-3)15-2`.", "inputFormat": "One line, a Kruscal-style expression.", "outputFormat": "One line, the result of the computation.", "hint": "For $100\\%$ of the testdata, the expression length does not exceed 2000.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Kruscal的加法", "background": "奶牛 Kruscal 认为人类的加法太落后了。比如说有时候想要用加法计算 `+15*3`，只能写成 `+15+15+15`，真是浪费精力啊！于是，Kruscal 决定开发出一种新的加法算式。", "description": "当然，新的算式也是建立在原本算式的基础上的，不同就在于上式可以直接写成 `+++15`，同理，对于 `-15*3` 这样的算式可以写成 `---15`。一段时间后，Kruscal 又被那无穷多个 `+-` 号囧到了，于是他又将这个算式改进了一下。\n\n比如 `+15*3` 又可以写成 `+(3)15`，同样，`-15*3` 等价于 `-(3)15`。但从上面可以看出，对于乘数较小的情况，如 `+++15` 这样的表述还是很方便的，于是在新的算式中还是保留了这种形式。\n\n对于算式还要做一点特殊的说明：`+15*3` 转换成 Kruscal 型算式时可以写成 `+++15` 或 `+(3)15`，但不可以写成 `++(2)15` 这样的形式。\n\n对于算式 `23+15*3-2` 可以表示为以下几种形式：`23+++15-2`、`23+(3)15-2`、`+23+++15-2`、`+23+(3)15-2`、`+(1)23+(3)15-(1)2`。不会出现如下几种形式：`(1)23+++15-2`、`+23++(2)15-(1)2`、`23+++15-2+(0)100`、`23-(-3)15-2`。", "inputFormat": "一行，一个 Kruscal 型算式。", "outputFormat": "一行，为运算结果。", "hint": "对于 $100 \\%$ 的数据，算式长度不超过 $2000$。", "locale": "zh-CN"}}}
{"pid": "P1558", "type": "P", "difficulty": 4, "samples": [["2 2 4\nC 1 1 2\nP 1 2\nC 2 2 2\nP 1 2", "2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "位运算"], "title": "色板游戏", "background": "阿宝上学了，今天老师拿来了一块很长的涂色板。", "description": "色板长度为 $L$，$L$ 是一个正整数，所以我们可以均匀地将它划分成 $L$ 块 $1$ 厘米长的小方格。并从左到右标记为 $1, 2, \\dots, L$。\n\n现在色板上只有一个颜色，老师告诉阿宝在色板上只能做两件事：\n\n1. `C A B C` 指在 $A$ 到 $B$ 号方格中涂上颜色 $C$。\n2. `P A B` 指老师的提问：$A$ 到 $B$ 号方格中有几种颜色。\n\n学校的颜料盒中一共有 $T$ 种颜料。为简便起见，我们把他们标记为 $1, 2, \\dots, T$。开始时色板上原有的颜色就为 $1$ 号色。 面对如此复杂的问题，阿宝向你求助，你能帮助他吗？", "inputFormat": "第一行有 $3$ 个整数 $L (1 \\le L \\le 10^5)$，$T (1 \\le T \\le 30)$ 和 $O (1 \\le O \\le 10^5)$。 在这里 $O$ 表示事件数。 \n\n接下来 $O$ 行, 每行以 `C A B C` 或 `P A B` 的形式表示所要做的事情（这里 $A, B, C$ 为整数，可能 $A> B$，这样的话需要你交换 $A$ 和 $B$）。", "outputFormat": "对于老师的提问，做出相应的回答。每行一个整数。", "hint": "**【数据范围】**\n\n$1 \\le L \\le 10^5, 1 \\le T \\le 30, 1 \\le O \\le 10^5$。\n\n$1 \\le A, B \\le L$（不保证 $A \\le B$），$1 \\le C \\le T$。", "locale": "zh-CN", "translations": {"en": {"title": "Color Board Game", "background": "Abao has started school. Today the teacher brought a very long color board.", "description": "The color board has length $L$, where $L$ is a positive integer, so we can evenly divide it into $L$ small squares, each $1$ centimeter long, labeled from left to right as $1, 2, \\dots, L$.\n\nCurrently the board has only one color. The teacher tells Abao that only two operations are allowed on the board:\n\n1. `C A B C` means to paint all squares numbered from $A$ to $B$ with color $C$.\n2. `P A B` means a query: how many different colors appear among squares numbered from $A$ to $B$.\n\nThere are $T$ types of paint in the school’s paint box. For simplicity, we label them as $1, 2, \\dots, T$. Initially, the entire board has color $1$. Facing such a complex problem, Abao asks for your help. Can you help him?", "inputFormat": "The first line contains $3$ integers $L$ $(1 \\le L \\le 10^5)$, $T$ $(1 \\le T \\le 30)$, and $O$ $(1 \\le O \\le 10^5)$. Here $O$ is the number of operations.\n\nThen follow $O$ lines, each describing an operation in the form `C A B C` or `P A B` (here $A, B, C$ are integers; it is possible that $A > B$, in which case you should swap $A$ and $B$).", "outputFormat": "For each query from the teacher, output the corresponding answer. Print one integer per line.", "hint": "Constraints\n\n$1 \\le L \\le 10^5$, $1 \\le T \\le 30$, $1 \\le O \\le 10^5$.\n\n$1 \\le A, B \\le L$ (not guaranteed that $A \\le B$), $1 \\le C \\le T$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "色板游戏", "background": "阿宝上学了，今天老师拿来了一块很长的涂色板。", "description": "色板长度为 $L$，$L$ 是一个正整数，所以我们可以均匀地将它划分成 $L$ 块 $1$ 厘米长的小方格。并从左到右标记为 $1, 2, \\dots, L$。\n\n现在色板上只有一个颜色，老师告诉阿宝在色板上只能做两件事：\n\n1. `C A B C` 指在 $A$ 到 $B$ 号方格中涂上颜色 $C$。\n2. `P A B` 指老师的提问：$A$ 到 $B$ 号方格中有几种颜色。\n\n学校的颜料盒中一共有 $T$ 种颜料。为简便起见，我们把他们标记为 $1, 2, \\dots, T$。开始时色板上原有的颜色就为 $1$ 号色。 面对如此复杂的问题，阿宝向你求助，你能帮助他吗？", "inputFormat": "第一行有 $3$ 个整数 $L (1 \\le L \\le 10^5)$，$T (1 \\le T \\le 30)$ 和 $O (1 \\le O \\le 10^5)$。 在这里 $O$ 表示事件数。 \n\n接下来 $O$ 行, 每行以 `C A B C` 或 `P A B` 的形式表示所要做的事情（这里 $A, B, C$ 为整数，可能 $A> B$，这样的话需要你交换 $A$ 和 $B$）。", "outputFormat": "对于老师的提问，做出相应的回答。每行一个整数。", "hint": "**【数据范围】**\n\n$1 \\le L \\le 10^5, 1 \\le T \\le 30, 1 \\le O \\le 10^5$。\n\n$1 \\le A, B \\le L$（不保证 $A \\le B$），$1 \\le C \\le T$。", "locale": "zh-CN"}}}
{"pid": "P1559", "type": "P", "difficulty": 5, "samples": [["3\r\n10 2 3\r\n2 3 4\r\n3 4 5\r\n2 2 2\r\n3 5 3\r\n4 5 1", "52"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "剪枝", "模拟退火", "二分图", "状压 DP"], "title": "运动员最佳匹配问题", "background": "", "description": "羽毛球队有男女运动员各 $n$ 人。给定 $2$ 个 $n \\times n$ 矩阵 $P$ 和 $Q$。$P_{i,j}$ 是男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男运动员竞赛优势；$Q_{i,j}$ 是女运动员 $i$ 和男运动员 $j$ 配合的女运动员竞赛优势。\n\n但是，由于技术配合和心理状态等各种因素影响，$P_{i,j}$ 不一定等于 $Q_{j,i}$。男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男女双方竞赛优势为 $\\bm{P_{i,j} \\times Q_{j,i}}$。\n\n现在，请你设计一个算法，计算男女运动员最佳配对法，使各组男女双方竞赛优势的总和达到最大。\n", "inputFormat": "第一行有 $1$ 个正整数 $n$ $(1 \\le n \\le 20)$。接下来的 $2n$ 行，每行 $n$ 个数。前 $n$ 行是 $P$，后 $n$ 行是 $Q$。", "outputFormat": "将计算出的男女双方竞赛优势的总和的最大值输出。", "hint": "保证题目数据均在 $\\text{int}$ 类型范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Optimal Matching of Athletes", "background": "", "description": "A badminton team has $n$ male athletes and $n$ female athletes. You are given two $n \\times n$ matrices $P$ and $Q$. $P_{i,j}$ is the male athlete $i$'s competitive advantage when paired with female athlete $j$ in mixed doubles; $Q_{i,j}$ is the female athlete $i$'s competitive advantage when cooperating with male athlete $j$.\n\nHowever, due to various factors such as technical coordination and psychological state, $P_{i,j}$ is not necessarily equal to $Q_{j,i}$. The combined competitive advantage of the pair consisting of male athlete $i$ and female athlete $j$ is $\\bm{P_{i,j} \\times Q_{j,i}}$.\n\nNow, design an algorithm to compute the optimal pairing between male and female athletes so that the sum of the combined competitive advantages across all pairs is maximized.", "inputFormat": "The first line contains one positive integer $n$ $(1 \\le n \\le 20)$. The next $2n$ lines each contain $n$ numbers. The first $n$ lines are $P$, and the last $n$ lines are $Q$.", "outputFormat": "Output the maximum possible sum of the combined competitive advantages across all pairs.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "运动员最佳匹配问题", "background": "", "description": "羽毛球队有男女运动员各 $n$ 人。给定 $2$ 个 $n \\times n$ 矩阵 $P$ 和 $Q$。$P_{i,j}$ 是男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男运动员竞赛优势；$Q_{i,j}$ 是女运动员 $i$ 和男运动员 $j$ 配合的女运动员竞赛优势。\n\n但是，由于技术配合和心理状态等各种因素影响，$P_{i,j}$ 不一定等于 $Q_{j,i}$。男运动员 $i$ 和女运动员 $j$ 配对组成混合双打的男女双方竞赛优势为 $\\bm{P_{i,j} \\times Q_{j,i}}$。\n\n现在，请你设计一个算法，计算男女运动员最佳配对法，使各组男女双方竞赛优势的总和达到最大。\n", "inputFormat": "第一行有 $1$ 个正整数 $n$ $(1 \\le n \\le 20)$。接下来的 $2n$ 行，每行 $n$ 个数。前 $n$ 行是 $P$，后 $n$ 行是 $Q$。", "outputFormat": "将计算出的男女双方竞赛优势的总和的最大值输出。", "hint": "保证题目数据均在 $\\text{int}$ 类型范围内。", "locale": "zh-CN"}}}
{"pid": "P1560", "type": "P", "difficulty": 5, "samples": [["8 4\r\nE2\r\nA6\r\nG1\r\nF5", "33"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO"], "title": "[USACO5.2] 蜗牛的旅行Snail Trails", "background": "", "description": "萨丽·斯内尔（Sally Snail，蜗牛）喜欢在 $N\\times N$ 的棋盘上闲逛（$1<n \\le 120$）。\n\n她总是从棋盘的左上角出发。棋盘上有空的格子（用 $\\verb!.!$ 来表示）和 $B$ 个路障（用 $\\verb!#!$ 来表示）。\n\n下面是这种表示法的示例棋盘：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  .  .  .  .  #  .  .  .! \\\\\n\\verb!3  .  .  .  .  .  .  .  .! \\\\\n\\verb!4  .  .  .  .  .  .  .  .! \\\\\n\\verb!5  .  .  .  .  .  #  .  .! \\\\\n\\verb!6  #  .  .  .  .  .  .  .! \\\\\n\\verb!7  .  .  .  .  .  .  .  .! \\\\\n\\verb!8  .  .  .  .  .  .  .  .! \\\\\n\\end{aligned}\\quad}$$\n\n萨丽总是垂直（向上或者向下）或水平（向左或者向右）地走。她可以从出发地（总是记作 $\\tt A1$）向下或者向右走。一旦萨丽选定了一个方向，她就会一直走下去。如果她遇到棋盘边缘或者路障，她就停下来，并且转过 $90$ 度。她不可能离开棋盘，或者走进路障当中。并且，萨丽从不跨过她已经经过的格子。当她再也不能走的时候，她就停止散步。\n\n这里是上面的棋盘上的一次散步路线图示：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S--------------+  #  .! \\\\\n\\verb!2  .  .  .  .  #  |  .  .! \\\\\n\\verb!3  .  .  .  .  .  |  .  .! \\\\\n\\verb!4  .  .  .  .  .  +-----+! \\\\\n\\verb!5  .  .  .  .  .  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +-----------------+  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n \n萨丽向右走，再向下，向右，向下，然后向左，再向上，最后向右走。这时她遇到了一个她已经走过的格子，她就停下来了。但是，如果她在 $\\tt F5$ 格遇到路障后选择另外一条路——向我们看来是左边的方向转弯，情况就不一样了。\n\n你的任务是计算并输出，如果萨丽聪明地选择她的路线的话，她所能够经过的最多格子数。\n", "inputFormat": "输入的第一行包括 $N$ —棋盘的大小，和 $B$ —路障的数量（$1 \\le B \\le 200$）。接下来的 $B$ 行包含着路障的位置信息。下面的样例输入对应着上面的示例棋盘。下面的输出文件表示问题的解答。注意，当 $N>26$ 时，输入文件就不能表示 $\\tt Z$ 列以后的路障了。（这句话不用专门理他。其实就是从 $A$ 的 ASCII 码开始向后顺延，不管是什么字母就行了）", "outputFormat": "输出文件应该只由一行组成，即萨丽能够经过的最多格子数。\n", "hint": "$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  |  .  .  .  #  .  .  .! \\\\\n\\verb!3  |  .  .  .  +--------+! \\\\\n\\verb!4  |  .  .  .  |  .  .  |! \\\\\n\\verb!5  +-----------+  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +------------------  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\n题目翻译来自NOCOW。\n\nUSACO Training Section 5.2\n\n[本题疑似有误，不保证存在可以通过任意符合要求的输入数据的程序](https://www.luogu.com.cn/discuss/1072919)。如果您认为您的做法可以通过任意符合要求的输入数据，欢迎联系管理员。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO5.2] Snail Trails", "background": "", "description": "Sally Snail likes to wander on an $N \\times N$ board ($1<n \\le 120$).\n\nShe always starts in the upper-left corner. The board has empty cells (denoted by \\verb!.!) and $B$ obstacles (denoted by \\verb!#!).\n\nHere is an example board in this notation:\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  .  .  .  .  #  .  .  .! \\\\\n\\verb!3  .  .  .  .  .  .  .  .! \\\\\n\\verb!4  .  .  .  .  .  .  .  .! \\\\\n\\verb!5  .  .  .  .  .  #  .  .! \\\\\n\\verb!6  #  .  .  .  .  .  .  .! \\\\\n\\verb!7  .  .  .  .  .  .  .  .! \\\\\n\\verb!8  .  .  .  .  .  .  .  .! \\\\\n\\end{aligned}\\quad}$$\n\nSally always moves vertically (up or down) or horizontally (left or right). From the starting cell (always denoted as $\\tt A1$), she may move either down or right. Once Sally chooses a direction, she continues in that direction. If she encounters the edge of the board or an obstacle, she stops and turns $90$ degrees. She cannot leave the board or enter an obstacle. Also, Sally never crosses a cell she has already visited. When she can no longer move, she stops.\n\nHere is a trace of one walk on the board above:\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S--------------+  #  .! \\\\\n\\verb!2  .  .  .  .  #  |  .  .! \\\\\n\\verb!3  .  .  .  .  .  |  .  .! \\\\\n\\verb!4  .  .  .  .  .  +-----+! \\\\\n\\verb!5  .  .  .  .  .  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +-----------------+  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\nShe goes right, then down, right, down, then left, up, and finally right. At that point she encounters a cell she has already visited, so she stops. However, if after hitting the obstacle at $\\tt F5$ she had chosen the other way — namely, turned to what looks like the left to us — the result would be different.\n\nYour task is to compute and output the maximum number of cells Sally can visit if she chooses her path optimally.", "inputFormat": "The first line contains $N$ — the size of the board, and $B$ — the number of obstacles ($1 \\le B \\le 200$). The next $B$ lines contain the positions of the obstacles. The sample input below corresponds to the example board above. The sample output below shows the answer to that instance. Note that when $N > 26$, the input file cannot denote obstacles beyond column Z. (You do not need to worry specifically about this — just continue from the ASCII code of A; whatever letters come next are fine.)", "outputFormat": "Output a single line with the maximum number of cells Sally can visit.", "hint": "$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  |  .  .  .  #  .  .  .! \\\\\n\\verb!3  |  .  .  .  +--------+! \\\\\n\\verb!4  |  .  .  .  |  .  .  |! \\\\\n\\verb!5  +-----------+  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +------------------  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\nTranslation from NOCOW.\n\nUSACO Training Section 5.2.\n\n[This problem may contain issues; we do not guarantee that there exists a program that can pass all inputs that meet the requirements.](https://www.luogu.com.cn/discuss/1072919) If you believe your solution can pass all valid inputs, feel free to contact the administrators.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO5.2] 蜗牛的旅行Snail Trails", "background": "", "description": "萨丽·斯内尔（Sally Snail，蜗牛）喜欢在 $N\\times N$ 的棋盘上闲逛（$1<n \\le 120$）。\n\n她总是从棋盘的左上角出发。棋盘上有空的格子（用 $\\verb!.!$ 来表示）和 $B$ 个路障（用 $\\verb!#!$ 来表示）。\n\n下面是这种表示法的示例棋盘：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  .  .  .  .  #  .  .  .! \\\\\n\\verb!3  .  .  .  .  .  .  .  .! \\\\\n\\verb!4  .  .  .  .  .  .  .  .! \\\\\n\\verb!5  .  .  .  .  .  #  .  .! \\\\\n\\verb!6  #  .  .  .  .  .  .  .! \\\\\n\\verb!7  .  .  .  .  .  .  .  .! \\\\\n\\verb!8  .  .  .  .  .  .  .  .! \\\\\n\\end{aligned}\\quad}$$\n\n萨丽总是垂直（向上或者向下）或水平（向左或者向右）地走。她可以从出发地（总是记作 $\\tt A1$）向下或者向右走。一旦萨丽选定了一个方向，她就会一直走下去。如果她遇到棋盘边缘或者路障，她就停下来，并且转过 $90$ 度。她不可能离开棋盘，或者走进路障当中。并且，萨丽从不跨过她已经经过的格子。当她再也不能走的时候，她就停止散步。\n\n这里是上面的棋盘上的一次散步路线图示：\n\n$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S--------------+  #  .! \\\\\n\\verb!2  .  .  .  .  #  |  .  .! \\\\\n\\verb!3  .  .  .  .  .  |  .  .! \\\\\n\\verb!4  .  .  .  .  .  +-----+! \\\\\n\\verb!5  .  .  .  .  .  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +-----------------+  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n \n萨丽向右走，再向下，向右，向下，然后向左，再向上，最后向右走。这时她遇到了一个她已经走过的格子，她就停下来了。但是，如果她在 $\\tt F5$ 格遇到路障后选择另外一条路——向我们看来是左边的方向转弯，情况就不一样了。\n\n你的任务是计算并输出，如果萨丽聪明地选择她的路线的话，她所能够经过的最多格子数。\n", "inputFormat": "输入的第一行包括 $N$ —棋盘的大小，和 $B$ —路障的数量（$1 \\le B \\le 200$）。接下来的 $B$ 行包含着路障的位置信息。下面的样例输入对应着上面的示例棋盘。下面的输出文件表示问题的解答。注意，当 $N>26$ 时，输入文件就不能表示 $\\tt Z$ 列以后的路障了。（这句话不用专门理他。其实就是从 $A$ 的 ASCII 码开始向后顺延，不管是什么字母就行了）", "outputFormat": "输出文件应该只由一行组成，即萨丽能够经过的最多格子数。\n", "hint": "$$\n\\boxed{\\quad\\begin{aligned}\n\\verb!   A  B  C  D  E  F  G  H! \\\\\n\\verb!1  S  .  .  .  .  .  #  .! \\\\\n\\verb!2  |  .  .  .  #  .  .  .! \\\\\n\\verb!3  |  .  .  .  +--------+! \\\\\n\\verb!4  |  .  .  .  |  .  .  |! \\\\\n\\verb!5  +-----------+  #  .  |! \\\\\n\\verb!6  #  .  .  .  .  .  .  |! \\\\\n\\verb!7  +------------------  |! \\\\\n\\verb!8  +--------------------+! \\\\\n\\end{aligned}\\quad}$$\n\n题目翻译来自NOCOW。\n\nUSACO Training Section 5.2\n\n[本题疑似有误，不保证存在可以通过任意符合要求的输入数据的程序](https://www.luogu.com.cn/discuss/1072919)。如果您认为您的做法可以通过任意符合要求的输入数据，欢迎联系管理员。", "locale": "zh-CN"}}}
{"pid": "P1561", "type": "P", "difficulty": 6, "samples": [["3\n6 4\n8 1\n2 3", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2012", "USACO"], "title": "[USACO12JAN] Mountain Climbing S", "background": "", "description": "Farmer John has discovered that his cows produce higher quality milk when they are subject to strenuous exercise.  He therefore decides to send his N cows (1 <= N <= 25,000) to climb up and then back down a nearby mountain!\n\nCow i takes U(i) time to climb up the mountain and then D(i) time to climb down the mountain.  Being domesticated cows, each cow needs the help of a farmer for each leg of the climb, but due to the poor economy, there are only two farmers available, Farmer John and his cousin Farmer Don.  FJ plans to guide cows for the upward climb, and FD will then guide the cows for the downward climb.  Since every cow needs a guide, and there is only one farmer for each part of the voyage, at most one cow may be climbing upward at any point in time (assisted by FJ), and at most one cow may be climbing down at any point in time (assisted by FD).  A group of cows may temporarily accumulate at the top of the mountain if they climb up and then need to wait for FD's assistance before climbing down.  Cows may climb down in a different order than they climbed up.\n\nPlease determine the least possible amount of time for all N cows to make the entire journey.\n", "inputFormat": "Line 1: The number of cows, N.\nLines 2..1+N: Line i+1 contains two space-separated integers: U(i) and D(i). (1 <= U(i), D(i) <= 50,000).", "outputFormat": "Line 1: A single integer representing the least amount of time for all the cows to cross the mountain.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO12JAN] Mountain Climbing S", "background": "", "description": "Farmer John has discovered that his cows produce higher quality milk when they are subject to strenuous exercise.  He therefore decides to send his N cows (1 <= N <= 25,000) to climb up and then back down a nearby mountain!\n\nCow i takes U(i) time to climb up the mountain and then D(i) time to climb down the mountain.  Being domesticated cows, each cow needs the help of a farmer for each leg of the climb, but due to the poor economy, there are only two farmers available, Farmer John and his cousin Farmer Don.  FJ plans to guide cows for the upward climb, and FD will then guide the cows for the downward climb.  Since every cow needs a guide, and there is only one farmer for each part of the voyage, at most one cow may be climbing upward at any point in time (assisted by FJ), and at most one cow may be climbing down at any point in time (assisted by FD).  A group of cows may temporarily accumulate at the top of the mountain if they climb up and then need to wait for FD's assistance before climbing down.  Cows may climb down in a different order than they climbed up.\n\nPlease determine the least possible amount of time for all N cows to make the entire journey.\n", "inputFormat": "Line 1: The number of cows, N.\nLines 2..1+N: Line i+1 contains two space-separated integers: U(i) and D(i). (1 <= U(i), D(i) <= 50,000).", "outputFormat": "Line 1: A single integer representing the least amount of time for all the cows to cross the mountain.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO12JAN] Mountain Climbing S", "background": "", "description": "约翰农夫发现他的奶牛在进行剧烈运动时会产出更高质量的牛奶。因此，他决定让他的 $N$ 头奶牛（$1 \\le N \\le 25,000$）去爬一座附近的山，然后再下来！\n\n第 $i$ 头奶牛需要 $U(i)$ 的时间爬上山，然后需要 $D(i)$ 的时间爬下山。由于奶牛是家养的，每头奶牛在爬山的每一段路程中都需要农夫的帮助，但由于经济不景气，只有两位农夫可用，即约翰农夫和他的表弟唐农夫。约翰农夫计划指导奶牛上山，而唐农夫将指导奶牛下山。由于每头奶牛都需要一个向导，并且每段旅程中只有一位农夫，因此在任何时间点，最多只有一头奶牛可以在约翰农夫的帮助下爬上山，最多只有一头奶牛可以在唐农夫的帮助下爬下山。奶牛可能会在山顶暂时聚集，如果它们爬上山后需要等待唐农夫的帮助才能下山。奶牛下山的顺序可以与上山的顺序不同。\n\n请确定所有 $N$ 头奶牛完成整个旅程所需的最短时间。\n", "inputFormat": "第一行，一个整数 $N$。\n\n第 $2$ 到第 $N+1$ 行，每行两个用空格隔开的整数 $U(i)$ 和 $D(i)$。\n\n$(1 \\le U(i),D(i) \\le 50,000)$。", "outputFormat": "一行一个整数，表示所有 $N$ 头奶牛完成旅程的最短时间。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P1562", "type": "P", "difficulty": 3, "samples": [["4\n**.*\n****\n****\n****", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "进制", "位运算"], "title": "还是 N 皇后", "background": "正如题目所说，这题是著名的 $N$ 皇后问题。", "description": "一个 $ N×N $ 的跳棋棋盘，有 $ N $ 个皇后棋子被放置在棋盘上，使得每行、每列有且只有一个皇后棋子，每条对角线（包括两条主对角线的所有平行线）上至多有一个皇后棋子。棋盘上一部分格子可以放置棋子，而另一部分则不可以。\n\n求放置棋子的方案总数。", "inputFormat": "第一行有一个 $N$。接下来有 $N$ 行 $N$ 列描述一个棋盘，`*` 表示可放，`.` 表示不可放。", "outputFormat": "输出方案总数。", "hint": "$0< n\\le14$", "locale": "zh-CN", "translations": {"en": {"title": "Still N-Queens", "background": "", "description": "As the title says, this is the famous $N$-Queens problem.", "inputFormat": "The first line contains an integer $N$. Then follow $N$ lines, each with $N$ characters, describing a board; `*` means placeable, `.` means not placeable.", "outputFormat": "Output the total number of solutions.", "hint": "$0 < N \\le 14$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "还是 N 皇后", "background": "正如题目所说，这题是著名的 $N$ 皇后问题。", "description": "一个 $ N×N $ 的跳棋棋盘，有 $ N $ 个皇后棋子被放置在棋盘上，使得每行、每列有且只有一个皇后棋子，每条对角线（包括两条主对角线的所有平行线）上至多有一个皇后棋子。棋盘上一部分格子可以放置棋子，而另一部分则不可以。\n\n求放置棋子的方案总数。", "inputFormat": "第一行有一个 $N$。接下来有 $N$ 行 $N$ 列描述一个棋盘，`*` 表示可放，`.` 表示不可放。", "outputFormat": "输出方案总数。", "hint": "$0< n\\le14$", "locale": "zh-CN"}}}
{"pid": "P1563", "type": "P", "difficulty": 2, "samples": [["7 3\n0 singer\n0 reader\n0 mengbier \n1 thinker\n1 archer\n0 writer\n1 mogician \n0 3\n1 1\n0 2", "writer"], ["10 10\n1 C\n0 r\n0 P\n1 d\n1 e\n1 m\n1 t\n1 y\n1 u\n0 V\n1 7\n1 1\n1 4\n0 5\n0 3\n0 1\n1 6\n1 2\n0 8\n0 4", "y"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "2016", "NOIP 提高组"], "title": "[NOIP 2016 提高组] 玩具谜题", "background": "NOIP2016 提高组 D1T1", "description": "小南有一套可爱的玩具小人，它们各有不同的职业。\n\n有一天，这些玩具小人把小南的眼镜藏了起来。小南发现玩具小人们围成了一个圈，它们有的面朝圈内，有的面朝圈外。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0u7em9pi.png) \n\n这时 singer 告诉小南一个谜题：“眼镜藏在我左数第 $3$ 个玩具小人的右数第 $1$ 个玩具小人的左数第 $2$ 个玩具小人那里。”\n\n小南发现，这个谜题中玩具小人的朝向非常关键，因为朝内和朝外的玩具小人的左右方向是相反的：面朝圈内的玩具小人，它的左边是顺时针方向，右边是逆时针方向；而面向圈外的玩具小人，它的左边是逆时针方向，右边是顺时针方向。\n\n小南一边艰难地辨认着玩具小人，一边数着:\n\nsinger 朝内，左数第 $3$ 个是 archer。\n\narcher 朝外，右数第 $1$ 个是 thinker。\n\nthinker 朝外，左数第 $2$ 个是 writer。\n\n所以眼镜藏在 writer 这里！\n\n虽然成功找回了眼镜，但小南并没有放心。如果下次有更多的玩具小人藏他的眼镜，或是谜题的长度更长，他可能就无法找到眼镜了。所以小南希望你写程序帮他解决类似的谜题。这样的谜题具体可以描述为：\n\n有 $n$ 个玩具小人围成一圈，已知它们的职业和朝向。现在第 $1$ 个玩具小人告诉小南一个包含 $m$ 条指令的谜题，其中第 $z$ 条指令形如“向左数/右数第 $s$ 个玩具小人”。你需要输出依次数完这些指令后，到达的玩具小人的职业。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示玩具小人的个数和指令的条数。\n\n接下来 $n$ 行，每行包含一个整数和一个字符串，以逆时针为顺序给出每个玩具小人的朝向和职业。其中 $0$ 表示朝向圈内，$1$ 表示朝向圈外。保证不会出现其他的数。字符串长度不超过 $10$ 且仅由英文字母构成，字符串不为空，并且字符串两两不同。整数和字符串之间用一个空格隔开。\n\n接下来 $m$ 行，其中第 $i$ 行包含两个整数 $a_i,s_i$，表示第 $i$ 条指令。若 $a_i=0$，表示向左数 $s_i$ 个人；若 $a_i=1$，表示向右数 $s_i$ 个人。 保证 $a_i$ 不会出现其他的数，$1 \\le s_i < n$。", "outputFormat": "输出一个字符串，表示从第一个读入的小人开始，依次数完 $m$ 条指令后到达的小人的职业。", "hint": "**样例 1 说明**\n\n这组数据就是【题目描述】中提到的例子。\n\n\n**子任务**\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。\n\n每个测试点的数据规模及特点如下表:\n\n::cute-table{tuack}\n\n| 测试点 | $n$ | $m$ | 全朝内 | 全左数 | $s_i=1$ | 职业长度为 $1$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $20$ | $1000$ | $\\surd$ | $\\surd$ | $\\surd$ | $\\surd$ |\n| $2$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $3$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $4$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $5$ | ^ | ^ | $\\surd$ | $\\surd$ | $\\times$ | ^ |\n| $6$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $7$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $8$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $9$ | ^ | ^ | $\\surd$ | $\\surd$ | $\\surd$ | $\\times$ |\n| $10$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $11$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $12$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $13$ | ^ | ^ | $\\surd$ | $\\surd$ | $\\times$ | ^ |\n| $14$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $15$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $16$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $17$ | $10^5$ | $10^5$ | $\\surd$ | $\\surd$ | ^ | ^ |\n| $18$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $19$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $20$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n\n其中一些简写的列意义如下:\n\n- 全朝内：若为 $\\surd$，表示该测试点保证所有的玩具小人都朝向圈内；\n\n- 全左数：若为 $\\surd$，表示该测试点保证所有的指令都向左数，即对任意的 $1\\leq z\\leq m, a_i=0$；\n\n- $s=1$：若为 $\\surd$，表示该测试点保证所有的指令都只数 $1$ 个，即对任意的 $1\\leq z\\leq m,s_i=1$；\n\n职业长度为 $1$：若为 $\\surd$，表示该测试点保证所有玩具小人的职业一定是一个长度为 $1$ 的字符串。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Senior] Toy Riddle", "background": "NOIP 2016 Senior D1T1", "description": "Xiao Nan has a set of cute toy figures, each with a different profession.\n\nOne day, these toy figures hid Xiao Nan’s glasses. Xiao Nan found that the toy figures stood in a circle; some were facing inward, and some were facing outward. As shown in the figure:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0u7em9pi.png)\n\nAt this moment, singer told Xiao Nan a riddle: “The glasses are with the toy figure reached by: counting $3$ to the left from me, then $1$ to the right, then $2$ to the left.”\n\nXiao Nan found that the orientation of the toy figures is crucial in this riddle, because the notions of left and right are opposite for inward- and outward-facing figures: for a toy figure facing inward, its left is the clockwise direction and its right is the counterclockwise direction; for a toy figure facing outward, its left is the counterclockwise direction and its right is the clockwise direction.\n\nWhile struggling to recognize the toy figures, Xiao Nan counted:\n\nsinger is facing inward; the $3$rd to the left is archer.\n\narcher is facing outward; the $1$st to the right is thinker.\n\nthinker is facing outward; the $2$nd to the left is writer.\n\nSo the glasses are with writer!\n\nAlthough he found his glasses, Xiao Nan was still worried. If next time there are more toy figures hiding his glasses, or the riddle is longer, he might not be able to find them. So Xiao Nan hopes you can write a program to solve similar riddles. Specifically:\n\nThere are $n$ toy figures standing in a circle, and their professions and orientations are known. Now the $1$st toy figure gives Xiao Nan a riddle consisting of $m$ instructions, where the $z$-th instruction is of the form “count $s$ toy figures to the left/right.” You need to output the profession of the toy figure you end up at after performing these instructions in order.", "inputFormat": "The first line contains two positive integers $n,m$, the number of toy figures and the number of instructions.\n\nThe next $n$ lines each contain an integer and a string, giving each toy figure’s orientation and profession in counterclockwise order. Here $0$ indicates facing inward, and $1$ indicates facing outward. No other numbers will appear. The string length is at most $10$, consists only of English letters, is non-empty, and all strings are pairwise distinct. There is exactly one space between the integer and the string.\n\nThe next $m$ lines each contain two integers $a_i,s_i$, describing the $i$-th instruction. If $a_i=0$, count $s_i$ people to the left; if $a_i=1$, count $s_i$ people to the right. It is guaranteed that no other numbers appear for $a_i$, and $1 \\le s_i < n$.", "outputFormat": "Output a single string: starting from the first toy figure read, the profession of the toy figure reached after performing all $m$ instructions in order.", "hint": "Sample 1 explanation\n\nThis set of testdata is exactly the example mentioned in the Description.\n\nSubtasks\n\nSubtasks specify characteristics of some testdata. If you have difficulty solving the full problem, you can try to solve only part of the testdata.\n\nThe scale and characteristics for each test point are shown in the table below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7su06u3r.png)\n\nSome abbreviated columns mean:\n\n- All facing inward: If $\\surd$, this test point guarantees all toy figures face inward.\n- All count to the left: If $\\surd$, this test point guarantees all instructions count to the left, i.e., for any $1\\leq z\\leq m, a_i=0$.\n- $s=1$: If $\\surd$, this test point guarantees all instructions count exactly $1$ person, i.e., for any $1\\leq z\\leq m,s_i=1$.\n- Profession length is $1$: If $\\surd$, this test point guarantees every toy figure’s profession is a string of length $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 提高组] 玩具谜题", "background": "NOIP2016 提高组 D1T1", "description": "小南有一套可爱的玩具小人，它们各有不同的职业。\n\n有一天，这些玩具小人把小南的眼镜藏了起来。小南发现玩具小人们围成了一个圈，它们有的面朝圈内，有的面朝圈外。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0u7em9pi.png) \n\n这时 singer 告诉小南一个谜题：“眼镜藏在我左数第 $3$ 个玩具小人的右数第 $1$ 个玩具小人的左数第 $2$ 个玩具小人那里。”\n\n小南发现，这个谜题中玩具小人的朝向非常关键，因为朝内和朝外的玩具小人的左右方向是相反的：面朝圈内的玩具小人，它的左边是顺时针方向，右边是逆时针方向；而面向圈外的玩具小人，它的左边是逆时针方向，右边是顺时针方向。\n\n小南一边艰难地辨认着玩具小人，一边数着:\n\nsinger 朝内，左数第 $3$ 个是 archer。\n\narcher 朝外，右数第 $1$ 个是 thinker。\n\nthinker 朝外，左数第 $2$ 个是 writer。\n\n所以眼镜藏在 writer 这里！\n\n虽然成功找回了眼镜，但小南并没有放心。如果下次有更多的玩具小人藏他的眼镜，或是谜题的长度更长，他可能就无法找到眼镜了。所以小南希望你写程序帮他解决类似的谜题。这样的谜题具体可以描述为：\n\n有 $n$ 个玩具小人围成一圈，已知它们的职业和朝向。现在第 $1$ 个玩具小人告诉小南一个包含 $m$ 条指令的谜题，其中第 $z$ 条指令形如“向左数/右数第 $s$ 个玩具小人”。你需要输出依次数完这些指令后，到达的玩具小人的职业。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示玩具小人的个数和指令的条数。\n\n接下来 $n$ 行，每行包含一个整数和一个字符串，以逆时针为顺序给出每个玩具小人的朝向和职业。其中 $0$ 表示朝向圈内，$1$ 表示朝向圈外。保证不会出现其他的数。字符串长度不超过 $10$ 且仅由英文字母构成，字符串不为空，并且字符串两两不同。整数和字符串之间用一个空格隔开。\n\n接下来 $m$ 行，其中第 $i$ 行包含两个整数 $a_i,s_i$，表示第 $i$ 条指令。若 $a_i=0$，表示向左数 $s_i$ 个人；若 $a_i=1$，表示向右数 $s_i$ 个人。 保证 $a_i$ 不会出现其他的数，$1 \\le s_i < n$。", "outputFormat": "输出一个字符串，表示从第一个读入的小人开始，依次数完 $m$ 条指令后到达的小人的职业。", "hint": "**样例 1 说明**\n\n这组数据就是【题目描述】中提到的例子。\n\n\n**子任务**\n\n子任务会给出部分测试数据的特点。如果你在解决题目中遇到了困难，可以尝试只解决一部分测试数据。\n\n每个测试点的数据规模及特点如下表:\n\n::cute-table{tuack}\n\n| 测试点 | $n$ | $m$ | 全朝内 | 全左数 | $s_i=1$ | 职业长度为 $1$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $20$ | $1000$ | $\\surd$ | $\\surd$ | $\\surd$ | $\\surd$ |\n| $2$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $3$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $4$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $5$ | ^ | ^ | $\\surd$ | $\\surd$ | $\\times$ | ^ |\n| $6$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $7$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $8$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $9$ | ^ | ^ | $\\surd$ | $\\surd$ | $\\surd$ | $\\times$ |\n| $10$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $11$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $12$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $13$ | ^ | ^ | $\\surd$ | $\\surd$ | $\\times$ | ^ |\n| $14$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $15$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $16$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $17$ | $10^5$ | $10^5$ | $\\surd$ | $\\surd$ | ^ | ^ |\n| $18$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n| $19$ | ^ | ^ | $\\surd$ | $\\times$ | ^ | ^ |\n| $20$ | ^ | ^ | $\\times$ | ^ | ^ | ^ |\n\n其中一些简写的列意义如下:\n\n- 全朝内：若为 $\\surd$，表示该测试点保证所有的玩具小人都朝向圈内；\n\n- 全左数：若为 $\\surd$，表示该测试点保证所有的指令都向左数，即对任意的 $1\\leq z\\leq m, a_i=0$；\n\n- $s=1$：若为 $\\surd$，表示该测试点保证所有的指令都只数 $1$ 个，即对任意的 $1\\leq z\\leq m,s_i=1$；\n\n职业长度为 $1$：若为 $\\surd$，表示该测试点保证所有玩具小人的职业一定是一个长度为 $1$ 的字符串。", "locale": "zh-CN"}}}
{"pid": "P1564", "type": "P", "difficulty": 3, "samples": [["5 1\n2\n2\n1\n2\n2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "前缀和"], "title": "膜拜", "background": "", "description": "神牛有很多…当然…每个同学都有自己衷心膜拜的神牛。\n\n某学校有两位神牛，神牛甲和神牛乙。新入学的 $n$ 位同学们早已耳闻他们的神话。\n\n所以，已经衷心地膜拜其中一位了。现在，老师要给他们分机房。但是，要么保证整个机房都是同一位神牛的膜拜者，或者两个神牛的膜拜者人数差不超过 $m$。另外，现在 $n$ 位同学排成一排，老师只会把连续一段的同学分进一个机房。老师想知道，至少需要多少个机房。", "inputFormat": "输入文件第一行包含两个整数 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个非 $1$ 即 $2$ 的整数，第 $(i + 1)$ 行的整数表示第 $i$ 个同学崇拜的对象，$1$ 表示甲，$2$ 表示乙。", "outputFormat": "输出一个整数，表示最小需要机房的数量。\n", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $1 \\le n \\le 50$，$0 \\le m \\le 50$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 2500$，$0 \\le m \\le 2500$。", "locale": "zh-CN", "translations": {"en": {"title": "Worship", "background": "", "description": "There are many top students… of course… each student has someone they sincerely admire.\n\nAt a certain school there are two top students, A and B. The newly enrolled $n$ students have already heard of their legends, so each student already sincerely worships one of them. Now the teacher needs to assign them to computer labs. For each lab, either everyone in that lab worships the same top student, or the absolute difference between the counts of the two worshippers does not exceed $m$.\n\nThe $n$ students stand in a line, and the teacher will only assign a contiguous segment of students to the same lab. The teacher wants to know the minimum number of labs needed.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nLines $2$ through $(n + 1)$ each contain an integer, either $1$ or $2$. The integer on line $(i + 1)$ indicates whom the $i$-th student worships: $1$ means A, $2$ means B.", "outputFormat": "Output a single integer, the minimum number of labs required.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 50$, $0 \\le m \\le 50$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 2500$, $0 \\le m \\le 2500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "膜拜", "background": "", "description": "神牛有很多…当然…每个同学都有自己衷心膜拜的神牛。\n\n某学校有两位神牛，神牛甲和神牛乙。新入学的 $n$ 位同学们早已耳闻他们的神话。\n\n所以，已经衷心地膜拜其中一位了。现在，老师要给他们分机房。但是，要么保证整个机房都是同一位神牛的膜拜者，或者两个神牛的膜拜者人数差不超过 $m$。另外，现在 $n$ 位同学排成一排，老师只会把连续一段的同学分进一个机房。老师想知道，至少需要多少个机房。", "inputFormat": "输入文件第一行包含两个整数 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个非 $1$ 即 $2$ 的整数，第 $(i + 1)$ 行的整数表示第 $i$ 个同学崇拜的对象，$1$ 表示甲，$2$ 表示乙。", "outputFormat": "输出一个整数，表示最小需要机房的数量。\n", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $1 \\le n \\le 50$，$0 \\le m \\le 50$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 2500$，$0 \\le m \\le 2500$。", "locale": "zh-CN"}}}
{"pid": "P1565", "type": "P", "difficulty": 5, "samples": [["3 2\n4 0\n-10 8\n-2 -2\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "二分", "前缀和", "单调栈"], "title": "牛宫", "background": "", "description": "AP 神牛准备给自己盖一座很华丽的矩形宫殿。于是，他看中了一块 $N \\times M$ 的矩形空地。\n\n空地中每个格子都有自己的海拔高度 $a_{i,j}$。AP 想让他的宫殿的平均海拔在海平面之上（假设海平面的高度是 0，平均数都会算吧？）。而且，AP 希望他的宫殿尽量大，能够容纳更多的人来膜拜他。请问 AP 的宫殿最后会有多大？\n", "inputFormat": "第一行为 $N$ 和 $M$。之后 $N$ 行，每行 $M$ 个数，描述的空地的海拔 $a_{i,j}$。\n", "outputFormat": "输出宫殿最大面积。\n", "hint": "对于 $50\\%$ 的数据，$N,M \\le 100$；\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 200$，$-2\\times10^9 \\le a_{i,j} \\le 16315$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Cow Palace", "background": "", "description": "AP \"Shenniu\" plans to build a gorgeous rectangular palace on an $N \\times M$ rectangular vacant lot.\n\nEach cell of the lot has an elevation $a_{i,j}$. AP wants the average elevation of his palace to be above sea level (assume sea level has height $0$). He also wants the palace to be as large as possible to accommodate more people to worship him. The palace must occupy a contiguous axis-aligned rectangle of cells. What is the maximum possible area of the palace?", "inputFormat": "The first line contains $N$ and $M$. Then follow $N$ lines, each containing $M$ numbers, describing the elevations $a_{i,j}$.", "outputFormat": "Output the maximum area of the palace.", "hint": "For $50\\%$ of the testdata, $N,M \\le 100$.\n\nFor $100\\%$ of the testdata, $1 \\le N,M \\le 200$, $-2\\times10^9 \\le a_{i,j} \\le 16315$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "牛宫", "background": "", "description": "AP 神牛准备给自己盖一座很华丽的矩形宫殿。于是，他看中了一块 $N \\times M$ 的矩形空地。\n\n空地中每个格子都有自己的海拔高度 $a_{i,j}$。AP 想让他的宫殿的平均海拔在海平面之上（假设海平面的高度是 0，平均数都会算吧？）。而且，AP 希望他的宫殿尽量大，能够容纳更多的人来膜拜他。请问 AP 的宫殿最后会有多大？\n", "inputFormat": "第一行为 $N$ 和 $M$。之后 $N$ 行，每行 $M$ 个数，描述的空地的海拔 $a_{i,j}$。\n", "outputFormat": "输出宫殿最大面积。\n", "hint": "对于 $50\\%$ 的数据，$N,M \\le 100$；\n\n对于 $100 \\%$ 的数据，$1 \\le N,M \\le 200$，$-2\\times10^9 \\le a_{i,j} \\le 16315$。\n", "locale": "zh-CN"}}}
{"pid": "P1566", "type": "P", "difficulty": 3, "samples": [["3\n3 1 2 3\n3 1 2 5\n6 1 2 3 5 4 6", "1\n0\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "加等式", "background": "", "description": "对于一个整数集合，我们定义“加等式”如下：集合中的某一个元素可以表示成集合内其他元素之和。如集合 ${1,2,3}$ 中就有一个加等式：$3=1+2$。而且 $3=1+2$ 和 $3=2+1$ 是相同的加等式，也是这个集合唯一的加等式。给定一个整数集合，编程找出其加等式的个数。", "inputFormat": "第一行为 $t$，表示测试数据组数。\n\n接下来 $t$ 行，每行表示一组测试数据。其中第一个数 $m$，表示集合元素的个数，接下来 $m$ 个不同的整数 $x_i$，表示集合元素。", "outputFormat": "对于每个输入数据，输出一个整数，表示其中加等式的个数。", "hint": "$1\\le t\\le 10$，$1\\le m \\le 30$，$1\\le x\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Addition Equation", "background": "", "description": "For an integer set, we define an \"addition equation\" as follows: some element of the set can be expressed as the sum of other elements in the set. For example, in the set ${1,2,3}$, there is one addition equation: $3=1+2$. Moreover, $3=1+2$ and $3=2+1$ are the same addition equation, and it is the only addition equation of this set. Given an integer set, write a program to find the number of its addition equations.", "inputFormat": "The first line contains $t$, indicating the number of test cases.\n\nThe next $t$ lines each describe one test case. Each line starts with an integer $m$, the number of elements in the set, followed by $m$ distinct integers $x_i$, which are the elements of the set.", "outputFormat": "For each test case, output one integer, the number of addition equations in the set.", "hint": "$1\\le t\\le 10$，$1\\le m \\le 30$，$1\\le x\\le 1000$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "加等式", "background": "", "description": "对于一个整数集合，我们定义“加等式”如下：集合中的某一个元素可以表示成集合内其他元素之和。如集合 ${1,2,3}$ 中就有一个加等式：$3=1+2$。而且 $3=1+2$ 和 $3=2+1$ 是相同的加等式，也是这个集合唯一的加等式。给定一个整数集合，编程找出其加等式的个数。", "inputFormat": "第一行为 $t$，表示测试数据组数。\n\n接下来 $t$ 行，每行表示一组测试数据。其中第一个数 $m$，表示集合元素的个数，接下来 $m$ 个不同的整数 $x_i$，表示集合元素。", "outputFormat": "对于每个输入数据，输出一个整数，表示其中加等式的个数。", "hint": "$1\\le t\\le 10$，$1\\le m \\le 30$，$1\\le x\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1567", "type": "P", "difficulty": 1, "samples": [["10\n1 2 3 2 4 5 6 8 5 9\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "统计天数", "background": "", "description": "炎热的夏日，KC 非常的不爽。他宁可忍受北极的寒冷，也不愿忍受厦门的夏天。最近，他开始研究天气的变化。他希望用研究的结果预测未来的天气。\n\n\n经历千辛万苦，他收集了连续 $N(1 \\leq N \\leq 10^6)$ 天的最高气温数据。\n\n现在，他想知道最高气温一直上升的最长连续天数。\n", "inputFormat": "第 1 行：一个整数 $N$ 。$1 \\leq N \\leq 10^6$\n\n第 2 行：$N$个空格隔开的整数，表示连续 $N$ 天的最高气温。$0 \\leq$ 最高气温 $\\leq 10^9$ 。\n", "outputFormat": "1 行：一个整数，表示最高气温一直上升的最长连续天数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Counting Days", "background": "", "description": "On a hot summer day, KC is very uncomfortable. He would rather endure the cold of the Arctic than the summer in Xiamen. Recently, he started studying weather changes. He hopes to use the results of his research to predict future weather.\n\nAfter much effort, he collected the highest temperatures for $N(1 \\leq N \\leq 10^6)$ consecutive days.\n\nNow he wants to know the length of the longest consecutive period during which the maximum temperature is strictly increasing.", "inputFormat": "Line 1: an integer $N$. $1 \\leq N \\leq 10^6$.\n\nLine 2: $N$ space-separated integers, representing the maximum temperatures for $N$ consecutive days. $0 \\leq$ maximum temperature $\\leq 10^9$.", "outputFormat": "1 line: an integer, the length of the longest consecutive period during which the maximum temperature is strictly increasing.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "统计天数", "background": "", "description": "炎热的夏日，KC 非常的不爽。他宁可忍受北极的寒冷，也不愿忍受厦门的夏天。最近，他开始研究天气的变化。他希望用研究的结果预测未来的天气。\n\n\n经历千辛万苦，他收集了连续 $N(1 \\leq N \\leq 10^6)$ 天的最高气温数据。\n\n现在，他想知道最高气温一直上升的最长连续天数。\n", "inputFormat": "第 1 行：一个整数 $N$ 。$1 \\leq N \\leq 10^6$\n\n第 2 行：$N$个空格隔开的整数，表示连续 $N$ 天的最高气温。$0 \\leq$ 最高气温 $\\leq 10^9$ 。\n", "outputFormat": "1 行：一个整数，表示最高气温一直上升的最长连续天数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1568", "type": "P", "difficulty": 2, "samples": [["4 3\n1 2\n4 1\n1 1\n2 10\n2 3\n1 2\n3 9\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "赛跑", "background": null, "description": "SH 的跑步成绩一直不太理想。\n\n为了帮助 SH 提高成绩，KC 决定和他进行一次赛跑。\n\n比赛的起点设在农场主的屋前，他们同时出发，沿着同一方向，直到跑到终点——农场远处的一棵树下。\n\n他们的跑步速度在一些时间段内是恒定的。比如：SH 在前 $3$ 个时间段速度是 $5$，接着 $6$ 个时间段内速度是 $10$。\n\n他们的比赛总时间相同。\n\n他们希望能统计出在整个比赛过程中领先顺序的变化次数。\n\n举个例子，某个时刻 SH 领先，下个时刻 KC 领先，这就是一次领先顺序的变化；如果某个时刻 SH 领先，接下来一段时间 KC 赶上来并和 SH 齐头并进，但最终还是超过了 SH，这也是一次领先顺序的变化。", "inputFormat": "第 $1$ 行：两个整数 $N,M$。\n\n接下来的 $N$ 行：每行两个整数，描述 SH 跑步的一段，分别表示该段 SH 跑步的速度和持续这种速度的时间。\n\n再接下来的 $M$ 行：每行两个整数，描述 KC 跑步的一段，分别表示该段 KC 跑步的速度和持续这种速度的时间。\n\n保证输入的所有数字均为不大于 $1000$ 的正整数。", "outputFormat": "一行：整个比赛过程中领先顺序的变化次数。", "hint": "样例解释：\n\nSH 在前 $2$ 个单位时间内速度是 $1$，接着 $1$ 个单位时间内速度是 $4$，接着 $1$ 个单位时间内速度是 $1$，最后 $10$ 个单位时间内速度是 $2$。KC 在前 $3$ 个个单位时间内速度是 $2$，接着 $2$ 个单位时间内速度是 $2$，最后 $9$ 个单位时间内速度是 $3$。\n\n输比赛开始后 KC 领先，直到第 $5$ 个单位时间 SH 超过 KC（第一次领先顺序变化），接着第 $7$ 个单位时间时，KC 又反超 SH，变成领先（第二次领先顺序变化）。", "locale": "zh-CN", "translations": {"en": {"title": "Race", "background": "", "description": "SH's running performance has not been ideal.\n\nTo help SH improve, KC decides to have a race with him.\n\nThe starting point is set in front of the farmer's house. They start at the same time, run in the same direction, and finish under a tree far away on the farm.\n\nTheir running speeds are constant over some time segments. For example, SH runs at speed $5$ for the first $3$ time segments, then at speed $10$ for the next $6$ time segments.\n\nTheir total race time is the same.\n\nThey want to count how many times the leading order changes over the entire race.\n\nFor example, if at some moment SH is leading, and at the next moment KC is leading, that counts as one change in the leading order; if at some moment SH is leading, then over a period KC catches up and runs neck and neck and eventually overtakes SH, that also counts as one change.", "inputFormat": "Line $1$: two integers $N, M$.\n\nThe next $N$ lines: each line has two integers describing one segment of SH's run, representing SH's speed in that segment and the duration of maintaining that speed.\n\nThe next $M$ lines: each line has two integers describing one segment of KC's run, representing KC's speed in that segment and the duration of maintaining that speed.\n\nAll input numbers are positive integers not greater than $1000$.", "outputFormat": "One line: the number of changes in the leading order during the entire race.", "hint": "Sample explanation:\n\nSH runs at speed $1$ for the first $2$ time units, then at speed $4$ for $1$ time unit, then at speed $1$ for $1$ time unit, and finally at speed $2$ for $10$ time units. KC runs at speed $2$ for the first $3$ time units, then at speed $2$ for $2$ time units, and finally at speed $3$ for $9$ time units.\n\nAfter the race starts, KC leads until the $5$th time unit, when SH overtakes KC (the first change in the leading order). Then at the $7$th time unit, KC overtakes SH and becomes the leader again (the second change in the leading order).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "赛跑", "background": null, "description": "SH 的跑步成绩一直不太理想。\n\n为了帮助 SH 提高成绩，KC 决定和他进行一次赛跑。\n\n比赛的起点设在农场主的屋前，他们同时出发，沿着同一方向，直到跑到终点——农场远处的一棵树下。\n\n他们的跑步速度在一些时间段内是恒定的。比如：SH 在前 $3$ 个时间段速度是 $5$，接着 $6$ 个时间段内速度是 $10$。\n\n他们的比赛总时间相同。\n\n他们希望能统计出在整个比赛过程中领先顺序的变化次数。\n\n举个例子，某个时刻 SH 领先，下个时刻 KC 领先，这就是一次领先顺序的变化；如果某个时刻 SH 领先，接下来一段时间 KC 赶上来并和 SH 齐头并进，但最终还是超过了 SH，这也是一次领先顺序的变化。", "inputFormat": "第 $1$ 行：两个整数 $N,M$。\n\n接下来的 $N$ 行：每行两个整数，描述 SH 跑步的一段，分别表示该段 SH 跑步的速度和持续这种速度的时间。\n\n再接下来的 $M$ 行：每行两个整数，描述 KC 跑步的一段，分别表示该段 KC 跑步的速度和持续这种速度的时间。\n\n保证输入的所有数字均为不大于 $1000$ 的正整数。", "outputFormat": "一行：整个比赛过程中领先顺序的变化次数。", "hint": "样例解释：\n\nSH 在前 $2$ 个单位时间内速度是 $1$，接着 $1$ 个单位时间内速度是 $4$，接着 $1$ 个单位时间内速度是 $1$，最后 $10$ 个单位时间内速度是 $2$。KC 在前 $3$ 个个单位时间内速度是 $2$，接着 $2$ 个单位时间内速度是 $2$，最后 $9$ 个单位时间内速度是 $3$。\n\n输比赛开始后 KC 领先，直到第 $5$ 个单位时间 SH 超过 KC（第一次领先顺序变化），接着第 $7$ 个单位时间时，KC 又反超 SH，变成领先（第二次领先顺序变化）。", "locale": "zh-CN"}}}
{"pid": "P1569", "type": "P", "difficulty": 2, "samples": [["4\n2\n3\n-3\n1\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "USACO", "前缀和"], "title": "[USACO ?] Generic Cow Protests【来源请求】", "background": null, "description": "约翰家的 $n$ 头奶牛聚集在一起，排成一列，正在进行一项抗议活动。第 $i$ 头奶牛的理智度为 $a_i$。\n\n约翰希望奶牛在抗议时保持理性，为此，他打算将所有的奶牛隔离成若干个小组，每个小组内的奶牛的理智度总和都要不小于零。\n\n由于奶牛是按直线排列的，所以一个小组内的奶牛位置必须是连续的。请帮助约翰计算一下，最多分成几组。", "inputFormat": "第一行一个正整数 $n$，表示牛的数目。\n\n接下来 $n$ 行，每行一个整数，表示每个牛的理智度。", "outputFormat": "若存在合法分组方案，输出一行一个整数表示答案；否则输出 `Impossible`。", "hint": "### 数据规模和约定\n\n对于 $30\\%$ 的数据，$1\\le n\\le 20$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 1000$，$|a_i|\\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO ?] Generic Cow Protests [Source Request]", "background": "", "description": "Farmer John’s $n$ cows gather and line up in a row to stage a protest. The $i$-th cow has a rationality value $a_i$.\n\nHe wants the cows to remain rational; to that end, he plans to partition all the cows into several groups such that within each group the sum of rationality values is at least zero.\n\nSince the cows are arranged in a straight line, each group must be a contiguous segment. Please help John compute the maximum number of groups.", "inputFormat": "The first line contains a positive integer $n$, the number of cows.\n\nThe next $n$ lines each contain one integer, the rationality value of each cow.", "outputFormat": "If a valid partition exists, output one line with a single integer, the answer; otherwise output `Impossible`.", "hint": "Constraints\n\n- For 30% of the testdata, $1 \\le n \\le 20$.\n- For 100% of the testdata, $1 \\le n \\le 1000$, $|a_i| \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO ?] Generic Cow Protests【来源请求】", "background": null, "description": "约翰家的 $n$ 头奶牛聚集在一起，排成一列，正在进行一项抗议活动。第 $i$ 头奶牛的理智度为 $a_i$。\n\n约翰希望奶牛在抗议时保持理性，为此，他打算将所有的奶牛隔离成若干个小组，每个小组内的奶牛的理智度总和都要不小于零。\n\n由于奶牛是按直线排列的，所以一个小组内的奶牛位置必须是连续的。请帮助约翰计算一下，最多分成几组。", "inputFormat": "第一行一个正整数 $n$，表示牛的数目。\n\n接下来 $n$ 行，每行一个整数，表示每个牛的理智度。", "outputFormat": "若存在合法分组方案，输出一行一个整数表示答案；否则输出 `Impossible`。", "hint": "### 数据规模和约定\n\n对于 $30\\%$ 的数据，$1\\le n\\le 20$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 1000$，$|a_i|\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1570", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2 3\n3 2 1\n", "1.667\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分", "洛谷原创", "分数规划"], "title": "KC 喝咖啡", "background": "", "description": "话说 KC 和 SH 在福州的时候常常跑去 85°C 喝咖啡或者其他的一些什么东西。\n\n这天，KC 想要喝一杯咖啡，服务员告诉他，现在有 $n$ 种调料，这杯咖啡只可以加入其中的 $m$ 种（当然 KC 一定会加入 $m$ 种，不会加入少于 $m$ 种的调料），根据加入的调料不同，制成这杯咖啡要用的时间也不同，得到的咖啡的美味度也不同。\n\nKC 在得知所有的 $n$ 种调料后，作为曾经的化竞之神的他，马上就知道了所有调料消耗的时间 $c _ i$ 以及调料的美味度 $v _ i$。由于 KC 急着回去刷题，所以他想尽快喝到这杯咖啡，但他又想喝到美味的咖啡，所以他想出了一个办法，他要喝到 $\\dfrac{\\sum v _ i}{\\sum c _ i}$ 最大的咖啡，也就是单位时间的美味度最大的咖啡。\n\n现在，KC 把调料信息告诉了 SH，要 SH 帮他算出喝到的咖啡的 $\\dfrac{\\sum v _ i}{\\sum c _ i}$，但 SH 不想帮 KC 算这东西，于是 KC 就只能拜托你来算了。\n\n注释：$\\sum$ 表示求和，所以 $\\dfrac{\\sum v _ i}{\\sum c _ i}$ 表示美味度的总和除以消耗时间的总和。\n", "inputFormat": "输入数据共三行。\n\n第一行为一个整数 $n, m$，表示调料种数和能加入的调料数。\n\n接下来两行，每行为 $n$ 个数，第一行第 $i$ 个整数表示调料 $i$ 的美味度 $v _ i$，第二行第 $i$ 个整数表示调料 $i$ 消耗的时间 $c _ i$。\n", "outputFormat": "一个实数 $T$，表示 KC 喝的咖啡的最大 $\\dfrac{\\sum v _ i}{\\sum c _ i}$，保留三位小数。\n", "hint": "**样例 1 解释**：\n\nKC 选 $2$ 号和 $3$ 号调料，$\\dfrac{\\sum v _ i}{\\sum c _ i} = \\dfrac{2 + 3}{2 + 1} = 1.667$。\n\n可以验证不存在更优的选择。\n\n**数据范围**：\n\n对 $20 \\%$ 的数据：$1 \\leq n \\leq 5$。\n\n对 $50 \\%$ 的数据：$1 \\leq n \\leq 10$。\n\n对 $80 \\%$ 的数据：$1 \\leq n \\leq 50$。\n\n对 $100 \\%$ 的数据：$1 \\leq n \\leq 200, 1 \\leq m \\leq n, 1 \\leq c[i], v[i] \\leq 1 \\times 10 ^ 4$。\n\n数据保证答案不超过 $1000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "KC Drinks Coffee", "background": "", "description": "KC and SH often went to 85°C in Fuzhou to drink coffee or something else.\n\nOne day, KC wanted a cup of coffee. The waiter told him there are $n$ kinds of seasonings, and exactly $m$ of them can be added to this cup of coffee (KC will add exactly $m$ kinds, not fewer). Depending on which seasonings are added, the time needed to make the coffee and the resulting deliciousness will differ.\n\nAfter learning all $n$ seasonings, as a former chemistry contest ace, KC immediately knows the time cost $c _ i$ and the deliciousness $v _ i$ of each seasoning. Since KC is in a hurry to get back to solving problems, he wants to drink the coffee as soon as possible, but he also wants it to be delicious. So he came up with a plan: he wants to drink the coffee that maximizes $\\dfrac{\\sum v _ i}{\\sum c _ i}$, that is, the deliciousness per unit time.\n\nNow KC tells SH the information about the seasonings and asks SH to compute the $\\dfrac{\\sum v _ i}{\\sum c _ i}$ of the coffee he will drink. But SH does not want to help, so KC turns to you.\n\nNote: $\\sum$ denotes summation, so $\\dfrac{\\sum v _ i}{\\sum c _ i}$ means the total deliciousness divided by the total time cost.", "inputFormat": "The input consists of three lines.\n\n- The first line contains two integers $n, m$, the number of seasonings and the number to add.\n- The next two lines each contain $n$ integers. In these two lines, the $i$-th integer of the first line is the deliciousness $v _ i$ of seasoning $i$, and the $i$-th integer of the second line is the time cost $c _ i$ of seasoning $i$.", "outputFormat": "Output a real number $T$, the maximum value of $\\dfrac{\\sum v _ i}{\\sum c _ i}$ for KC’s coffee, rounded to three decimal places.", "hint": "Explanation for Sample 1:\n\nKC chooses seasonings $2$ and $3$, $\\dfrac{\\sum v _ i}{\\sum c _ i} = \\dfrac{2 + 3}{2 + 1} = 1.667$.\n\nIt can be verified that there is no better choice.\n\nConstraints:\n\nFor $20 \\%$ of the testdata: $1 \\leq n \\leq 5$.\n\nFor $50 \\%$ of the testdata: $1 \\leq n \\leq 10$.\n\nFor $80 \\%$ of the testdata: $1 \\leq n \\leq 50$.\n\nFor $100 \\%$ of the testdata: $1 \\leq n \\leq 200, 1 \\leq m \\leq n, 1 \\leq c[i], v[i] \\leq 1 \\times 10 ^ 4$.\n\nThe testdata guarantees that the answer does not exceed $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "KC 喝咖啡", "background": "", "description": "话说 KC 和 SH 在福州的时候常常跑去 85°C 喝咖啡或者其他的一些什么东西。\n\n这天，KC 想要喝一杯咖啡，服务员告诉他，现在有 $n$ 种调料，这杯咖啡只可以加入其中的 $m$ 种（当然 KC 一定会加入 $m$ 种，不会加入少于 $m$ 种的调料），根据加入的调料不同，制成这杯咖啡要用的时间也不同，得到的咖啡的美味度也不同。\n\nKC 在得知所有的 $n$ 种调料后，作为曾经的化竞之神的他，马上就知道了所有调料消耗的时间 $c _ i$ 以及调料的美味度 $v _ i$。由于 KC 急着回去刷题，所以他想尽快喝到这杯咖啡，但他又想喝到美味的咖啡，所以他想出了一个办法，他要喝到 $\\dfrac{\\sum v _ i}{\\sum c _ i}$ 最大的咖啡，也就是单位时间的美味度最大的咖啡。\n\n现在，KC 把调料信息告诉了 SH，要 SH 帮他算出喝到的咖啡的 $\\dfrac{\\sum v _ i}{\\sum c _ i}$，但 SH 不想帮 KC 算这东西，于是 KC 就只能拜托你来算了。\n\n注释：$\\sum$ 表示求和，所以 $\\dfrac{\\sum v _ i}{\\sum c _ i}$ 表示美味度的总和除以消耗时间的总和。\n", "inputFormat": "输入数据共三行。\n\n第一行为一个整数 $n, m$，表示调料种数和能加入的调料数。\n\n接下来两行，每行为 $n$ 个数，第一行第 $i$ 个整数表示调料 $i$ 的美味度 $v _ i$，第二行第 $i$ 个整数表示调料 $i$ 消耗的时间 $c _ i$。\n", "outputFormat": "一个实数 $T$，表示 KC 喝的咖啡的最大 $\\dfrac{\\sum v _ i}{\\sum c _ i}$，保留三位小数。\n", "hint": "**样例 1 解释**：\n\nKC 选 $2$ 号和 $3$ 号调料，$\\dfrac{\\sum v _ i}{\\sum c _ i} = \\dfrac{2 + 3}{2 + 1} = 1.667$。\n\n可以验证不存在更优的选择。\n\n**数据范围**：\n\n对 $20 \\%$ 的数据：$1 \\leq n \\leq 5$。\n\n对 $50 \\%$ 的数据：$1 \\leq n \\leq 10$。\n\n对 $80 \\%$ 的数据：$1 \\leq n \\leq 50$。\n\n对 $100 \\%$ 的数据：$1 \\leq n \\leq 200, 1 \\leq m \\leq n, 1 \\leq c[i], v[i] \\leq 1 \\times 10 ^ 4$。\n\n数据保证答案不超过 $1000$。\n", "locale": "zh-CN"}}}
{"pid": "P1571", "type": "P", "difficulty": 2, "samples": [["4 3\n2 15 6 8\n8 9 2\n", "2 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "二分", "洛谷原创", "排序"], "title": "眼红的Medusa", "background": "", "description": "虽然 Miss Medusa 到了北京，领了科技创新奖，但是她还是觉得不满意。原因是：她发现很多人都和她一样获了科技创新奖，特别是其中的某些人，还获得了另一个奖项——特殊贡献奖。而越多的人获得了两个奖项，Miss Medusa 就会越眼红。于是她决定统计有哪些人获得了两个奖项，来知道自己有多眼红。", "inputFormat": "第一行两个整数 $n, m$，表示有 $n$ 个人获得科技创新奖，$m$ 个人获得特殊贡献奖。\n\n第二行 $n$ 个正整数，表示获得科技创新奖的人的编号。\n\n第三行 $m$ 个正整数，表示获得特殊贡献奖的人的编号。", "outputFormat": "输出一行，为获得两个奖项的人的编号，按在科技创新奖获奖名单中的先后次序输出。", "hint": "对于 $60\\%$ 的数据，$0 \\leq n, m \\leq 1000$，获得奖项的人的编号 $\\lt 2 \\times 10^9$；\n\n对于 $100\\%$ 的数据，$0 \\leq n, m \\leq 10^5$，获得奖项的人的编号 $\\lt 2 \\times 10^9$。\n\n输入数据保证第二行任意两个数不同，第三行任意两个数不同。", "locale": "zh-CN", "translations": {"en": {"title": "Envious Medusa", "background": "", "description": "Although Miss Medusa has arrived in Beijing and received the Science and Technology Innovation Award, she is still not satisfied. The reason is that she found many people also received the Science and Technology Innovation Award, and some of them even received another award — the Special Contribution Award. The more people receive both awards, the more envious Miss Medusa becomes. So she decides to count who received both awards to know how envious she is.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ people who received the Science and Technology Innovation Award and $m$ people who received the Special Contribution Award.\n\nThe second line contains $n$ positive integers, the IDs of the people who received the Science and Technology Innovation Award.\n\nThe third line contains $m$ positive integers, the IDs of the people who received the Special Contribution Award.", "outputFormat": "Output one line: the IDs of the people who received both awards, in the same order as in the Science and Technology Innovation Award winners list.", "hint": "For $60\\%$ of the testdata, $0 \\leq n, m \\leq 1000$, and each award recipient’s ID is $\\lt 2 \\times 10^9$.\n\nFor $100\\%$ of the testdata, $0 \\leq n, m \\leq 10^5$, and each award recipient’s ID is $\\lt 2 \\times 10^9$.\n\nIt is guaranteed that all numbers on the second line are pairwise distinct, and all numbers on the third line are pairwise distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "眼红的Medusa", "background": "", "description": "虽然 Miss Medusa 到了北京，领了科技创新奖，但是她还是觉得不满意。原因是：她发现很多人都和她一样获了科技创新奖，特别是其中的某些人，还获得了另一个奖项——特殊贡献奖。而越多的人获得了两个奖项，Miss Medusa 就会越眼红。于是她决定统计有哪些人获得了两个奖项，来知道自己有多眼红。", "inputFormat": "第一行两个整数 $n, m$，表示有 $n$ 个人获得科技创新奖，$m$ 个人获得特殊贡献奖。\n\n第二行 $n$ 个正整数，表示获得科技创新奖的人的编号。\n\n第三行 $m$ 个正整数，表示获得特殊贡献奖的人的编号。", "outputFormat": "输出一行，为获得两个奖项的人的编号，按在科技创新奖获奖名单中的先后次序输出。", "hint": "对于 $60\\%$ 的数据，$0 \\leq n, m \\leq 1000$，获得奖项的人的编号 $\\lt 2 \\times 10^9$；\n\n对于 $100\\%$ 的数据，$0 \\leq n, m \\leq 10^5$，获得奖项的人的编号 $\\lt 2 \\times 10^9$。\n\n输入数据保证第二行任意两个数不同，第三行任意两个数不同。", "locale": "zh-CN"}}}
{"pid": "P1572", "type": "P", "difficulty": 2, "samples": [["2/1+1/3-1/4", "25/12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "计算分数", "background": "", "description": "Csh 被老妈关在家里做分数计算题，但显然他不愿意做这么多复杂的计算。况且在家门口还有 Xxq 在等着他去一起看电影。为了尽快地能去陪 Xxq 看电影，他把剩下的计算题交给了你，你能帮他解决问题吗？\n", "inputFormat": "输入一行，为一个分数计算式。\n\n计算式中只包含数字、`+`、`-`、`/`。其中 `/` 为分数线，分数线左边为分子，右边为分母。输入数据保证不会出现繁分数。如果输入计算式的第一项为正，不会有前缀 `+` 号；若为负，会有前缀 `-` 号。\n\n所有整数均以分数形式出现。", "outputFormat": "输出一行，为最后的计算结果（用为整数则用整数表示，否则用最简分数表示）。\n\n保证答案内出现的所有数（如果答案是分数即为分子和分母）均在 $32$ 位带符号整数的表示范围之内。\n", "hint": "### 数据范围及约定\n\n对于所有测试点，输入计算式长度在 $100$ 以内，分子、分母在 $1000$ 以内。同时保证，直接从前往后直接计算分数的和或者差，然后立刻化简，这么做的中间结果不会超过 int 的范围。\n\n注意输入的分数不一定是最简分数。\n\n\n------------\n2024/2/13 添加 2 组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Compute Fractions", "background": "", "description": "Csh was locked at home by his mom to do fraction exercises, but he clearly does not want to do so many complicated calculations. Besides, Xxq is waiting for him at the door to go watch a movie together. To join Xxq for the movie as soon as possible, he hands the remaining exercises to you. Can you help him solve the problem?", "inputFormat": "The input consists of a single line: a fraction expression.\n\nThe expression contains only digits, `+`, `-`, and `/`. Here `/` is the fraction bar: the numerator is on the left and the denominator is on the right. The input is guaranteed to contain no complex (nested) fractions. If the first term of the expression is positive, there is no leading `+`; if it is negative, there is a leading `-`.\n\nAll integers appear in fraction form.", "outputFormat": "Output one line: the final result. If the result is an integer, print it as an integer; otherwise, print it as a fraction in lowest terms.\n\nIt is guaranteed that all numbers in the answer (if the answer is a fraction, that is, the numerator and denominator) are within the range of $32$-bit signed integers.", "hint": "### Constraints and Conventions\n\nFor all test points, the length of the input expression is within 100, and the numerator and denominator are within 1000. It is also guaranteed that if you evaluate the sum or difference of the fractions from left to right and reduce immediately, the intermediate results will not exceed the range of int.\n\nNote that the input fractions are not necessarily in lowest terms.\n\n------------\n2024/2/13: Added 2 sets of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "计算分数", "background": "", "description": "Csh 被老妈关在家里做分数计算题，但显然他不愿意做这么多复杂的计算。况且在家门口还有 Xxq 在等着他去一起看电影。为了尽快地能去陪 Xxq 看电影，他把剩下的计算题交给了你，你能帮他解决问题吗？\n", "inputFormat": "输入一行，为一个分数计算式。\n\n计算式中只包含数字、`+`、`-`、`/`。其中 `/` 为分数线，分数线左边为分子，右边为分母。输入数据保证不会出现繁分数。如果输入计算式的第一项为正，不会有前缀 `+` 号；若为负，会有前缀 `-` 号。\n\n所有整数均以分数形式出现。", "outputFormat": "输出一行，为最后的计算结果（用为整数则用整数表示，否则用最简分数表示）。\n\n保证答案内出现的所有数（如果答案是分数即为分子和分母）均在 $32$ 位带符号整数的表示范围之内。\n", "hint": "### 数据范围及约定\n\n对于所有测试点，输入计算式长度在 $100$ 以内，分子、分母在 $1000$ 以内。同时保证，直接从前往后直接计算分数的和或者差，然后立刻化简，这么做的中间结果不会超过 int 的范围。\n\n注意输入的分数不一定是最简分数。\n\n\n------------\n2024/2/13 添加 2 组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1573", "type": "P", "difficulty": 0, "samples": [["2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递推", "洛谷原创"], "title": "栈的操作", "background": "管理备注：本题因证明难度极高，做题难度低，故评为灰题", "description": "现在有四个栈，其中前三个为空，第四个栈从栈顶到栈底分别为 $1,2,3,\\cdots ,n$。每一个栈只支持一种操作：弹出并压入。它指的是把其中一个栈 A 的栈顶元素 $x$ 弹出，并马上压入任意一个栈 B 中。但是这样的操作必须符合一定的规则才能进行。\n\n- 规则 $1$：A 栈不能为空。\n- 规则 $2$：B 栈为空或 $x$ 比 B 栈栈顶要小。\n\n对于给定的 $n$，请你求出把第四个栈的 $n$ 个元素全部移到第一个栈的最少操作次数。\n\n由于最少操作次数可能很多，请你把答案对 $10^6+7$ 取模。\n", "inputFormat": "一行，一个整数 $n$。\n", "outputFormat": "一行，一个正整数，为把最少操作次数 $\\bmod (10^6+7)$ 的值。", "hint": "- 对于 $30\\%$ 的数据，$n\\le 8$。\n- 对于 $60\\%$ 的数据，$n\\le 60$。\n- 对于 $100\\%$ 的数据，$n\\le 2\\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Stack Operations", "background": "Manager’s note: Since the proof is extremely difficult but the problem itself is easy to solve, this problem is rated as a gray problem.", "description": "There are four stacks. The first three are empty, and the fourth stack contains, from top to bottom, $1,2,3,\\cdots ,n$. Each stack supports only one operation: pop and push. This means popping the top element $x$ from some stack A and immediately pushing it onto any stack B. However, such an operation is allowed only if the following rules are satisfied.\n\n- Rule $1$: Stack A must be non-empty.\n- Rule $2$: Stack B is empty, or $x$ is smaller than the top of stack B.\n\nGiven $n$, find the minimal number of operations needed to move all $n$ elements from the fourth stack to the first stack.\n\nSince the minimal number of operations can be very large, output the answer modulo $10^6+7$.", "inputFormat": "One line containing an integer $n$.", "outputFormat": "One line containing a positive integer, the value of the minimal number of operations $\\bmod (10^6+7)$.", "hint": "- For 30% of the testdata, $n \\le 8$.\n- For 60% of the testdata, $n \\le 60$.\n- For 100% of the testdata, $n \\le 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "栈的操作", "background": "管理备注：本题因证明难度极高，做题难度低，故评为灰题", "description": "现在有四个栈，其中前三个为空，第四个栈从栈顶到栈底分别为 $1,2,3,\\cdots ,n$。每一个栈只支持一种操作：弹出并压入。它指的是把其中一个栈 A 的栈顶元素 $x$ 弹出，并马上压入任意一个栈 B 中。但是这样的操作必须符合一定的规则才能进行。\n\n- 规则 $1$：A 栈不能为空。\n- 规则 $2$：B 栈为空或 $x$ 比 B 栈栈顶要小。\n\n对于给定的 $n$，请你求出把第四个栈的 $n$ 个元素全部移到第一个栈的最少操作次数。\n\n由于最少操作次数可能很多，请你把答案对 $10^6+7$ 取模。\n", "inputFormat": "一行，一个整数 $n$。\n", "outputFormat": "一行，一个正整数，为把最少操作次数 $\\bmod (10^6+7)$ 的值。", "hint": "- 对于 $30\\%$ 的数据，$n\\le 8$。\n- 对于 $60\\%$ 的数据，$n\\le 60$。\n- 对于 $100\\%$ 的数据，$n\\le 2\\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1574", "type": "P", "difficulty": 5, "samples": [["2\n8\n13", "6\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "超级数", "background": "", "description": "设x的约数个数为 $f(x)$，若 $\\forall i\\in [1,n)\\cap \\mathbb{Z^+},f(n)>f(i)$，就把 $n$ 称作 `supernumber`。\n\n给出 $m$ 个数 $a_1,a_2,\\ldots,a_m$，请分别输出不大于 $a_1$，不大于 $a_2$，...，不大于 $a_m$ 的最大 `supernumber`。", "inputFormat": "第一行有一个整数，代表 $m$。\n\n第 $2$  到第 $(m+1)$ 行，每行一个整数，其中第  $(i+1)$ 行的整数为 $a_i$。", "outputFormat": "共 $m$ 行，每行一个整数，其中第 $i$ 行为不大于 $a_i$ 的最大`supernumber`。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，$m=1$。\n- 对于 $50\\%$ 的数据，$a_i\\le1000$。\n- 对于 $70\\%$ 的数据，$a_i\\le 2\\times10^7$。\n- 对于 $100\\%$ 的数据，$m\\le10^5$，$a_i\\le10^{17}$。", "locale": "zh-CN", "translations": {"en": {"title": "Supernumber", "background": "", "description": "Let the number of divisors of $x$ be $f(x)$. If $\\forall i\\in [1,n)\\cap \\mathbb{Z^+}, f(n)>f(i)$, then we call $n$ a `supernumber`.\n\nGiven $m$ numbers $a_1, a_2, \\ldots, a_m$, for each $a_i$, output the largest `supernumber` not exceeding $a_i$.", "inputFormat": "The first line has one integer representing $m$.\n\nFrom line $2$ to line $(m+1)$, each line contains one integer, where the integer on line $(i+1)$ is $a_i$.", "outputFormat": "Output $m$ lines, one integer per line, where the $i$-th line is the largest `supernumber` not exceeding $a_i$.", "hint": "Constraints\n\n- For 40% of the testdata, $m=1$.\n- For 50% of the testdata, $a_i\\le 1000$.\n- For 70% of the testdata, $a_i\\le 2\\times 10^7$.\n- For 100% of the testdata, $m\\le 10^5$, $a_i\\le 10^{17}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "超级数", "background": "", "description": "设x的约数个数为 $f(x)$，若 $\\forall i\\in [1,n)\\cap \\mathbb{Z^+},f(n)>f(i)$，就把 $n$ 称作 `supernumber`。\n\n给出 $m$ 个数 $a_1,a_2,\\ldots,a_m$，请分别输出不大于 $a_1$，不大于 $a_2$，...，不大于 $a_m$ 的最大 `supernumber`。", "inputFormat": "第一行有一个整数，代表 $m$。\n\n第 $2$  到第 $(m+1)$ 行，每行一个整数，其中第  $(i+1)$ 行的整数为 $a_i$。", "outputFormat": "共 $m$ 行，每行一个整数，其中第 $i$ 行为不大于 $a_i$ 的最大`supernumber`。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，$m=1$。\n- 对于 $50\\%$ 的数据，$a_i\\le1000$。\n- 对于 $70\\%$ 的数据，$a_i\\le 2\\times10^7$。\n- 对于 $100\\%$ 的数据，$m\\le10^5$，$a_i\\le10^{17}$。", "locale": "zh-CN"}}}
{"pid": "P1575", "type": "P", "difficulty": 4, "samples": [["true or false and false", "true"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线性数据结构", "栈"], "title": "正误问题", "background": null, "description": "小 bobo 迷上了逻辑值运算。但小 bobo 算的头都晕了，也没算出个所以然。他只好找到你，让你帮他解决这个问题。", "inputFormat": "一个字符串表达逻辑式子，只包含 `true`，`false`，`or`，`and`，`not` 和空格（不包含括号和 `xor`）。\n\n运算优先级同 Pascal（从高到低依次为 `not`，`and`，`or`)，同级左边先算）。\n\n如果逻辑式有误则输出 `error`。", "outputFormat": "输出一行表示运算结果：`true` 或者 `false`，如果无法得到结果的输出 `error`。", "hint": "对于全部数据，保证输入数据串长小于 $255$。\n\n本题结果为 `true`，`false`，`error` 各占 $\\dfrac{1}{3}$，允许“骗分”，但不值得，因为是“水题”。\n\n---\n\n- $\\text{upd 2022.7.21}$：新增加 $5$ 组 [Hack 数据](https://www.luogu.com.cn/discuss/459823)。", "locale": "zh-CN", "translations": {"en": {"title": "True-or-False Problem", "background": "", "description": "Xiao bobo became obsessed with Boolean operations. But after calculating until he got dizzy, he still could not figure it out. He turned to you for help to solve this problem.", "inputFormat": "A string representing a logical expression, containing only `true`, `false`, `or`, `and`, `not`, and spaces (no parentheses and no `xor`). Operator precedence follows Pascal (from high to low: `not`, `and`, `or`), and within the same level evaluate from left to right. If the logical expression is invalid, output `error`.", "outputFormat": "Output one line with the result: `true` or `false`. If the result cannot be determined, output `error`.", "hint": "For all testdata, the input string length is less than $255$.\n\nFor this problem, the results `true`, `false`, and `error` each account for $\\dfrac{1}{3}$; \"cheating for points\" is allowed, but it is not worth it because this is an \"easy problem\".\n\n---\n\n- $\\text{upd 2022.7.21}$: Added $5$ groups of [Hack testdata](https://www.luogu.com.cn/discuss/459823).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "正误问题", "background": null, "description": "小 bobo 迷上了逻辑值运算。但小 bobo 算的头都晕了，也没算出个所以然。他只好找到你，让你帮他解决这个问题。", "inputFormat": "一个字符串表达逻辑式子，只包含 `true`，`false`，`or`，`and`，`not` 和空格（不包含括号和 `xor`）。\n\n运算优先级同 Pascal（从高到低依次为 `not`，`and`，`or`)，同级左边先算）。\n\n如果逻辑式有误则输出 `error`。", "outputFormat": "输出一行表示运算结果：`true` 或者 `false`，如果无法得到结果的输出 `error`。", "hint": "对于全部数据，保证输入数据串长小于 $255$。\n\n本题结果为 `true`，`false`，`error` 各占 $\\dfrac{1}{3}$，允许“骗分”，但不值得，因为是“水题”。\n\n---\n\n- $\\text{upd 2022.7.21}$：新增加 $5$ 组 [Hack 数据](https://www.luogu.com.cn/discuss/459823)。", "locale": "zh-CN"}}}
{"pid": "P1576", "type": "P", "difficulty": 3, "samples": [["3 3                                     \n1 2 1\n2 3 2\n1 3 3\n1 3\n", "103.07153164"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "最短路"], "title": "最小花费", "background": null, "description": "在 $n$ 个人中，某些人的银行账号之间可以互相转账。这些人之间转账的手续费各不相同。给定这些人之间转账时需要从转账金额里扣除百分之几的手续费，请问 $A$ 最少需要多少钱使得转账后 $B$ 收到 $100$ 元。", "inputFormat": "第一行输入两个正整数 $n,m$，分别表示总人数和可以互相转账的人的对数。\n\n以下 $m$ 行每行输入三个正整数 $x,y,z$，表示标号为 $x$ 的人和标号为 $y$ 的人之间互相转账需要扣除 $z\\%$ 的手续费 $(z<100)$。\n\n最后一行输入两个正整数 $A,B$。数据保证 $A$ 与 $B$ 之间可以直接或间接地转账。", "outputFormat": "输出 $A$ 使得 $B$ 到账 $100$ 元最少需要的总费用。精确到小数点后 $8$ 位。", "hint": "$1\\le n \\le 2000,m\\le 100000$。\n\n保证答案不超过 $10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Minimum Cost", "background": "", "description": "Among $n$ people, certain pairs can transfer money between their bank accounts. The transfer fee between these people can differ from pair to pair. Given, for each such pair, the percentage fee that will be deducted from the transferred amount, determine the minimum amount $A$ must have so that after the transfers $B$ receives $100$ yuan.", "inputFormat": "The first line contains two positive integers $n,m$, representing the total number of people and the number of pairs who can transfer money to each other.\n\nEach of the following $m$ lines contains three positive integers $x,y,z$, meaning that transferring money between person $x$ and person $y$ incurs a fee of $z\\%$ deducted from the transferred amount $(z<100)$.\n\nThe last line contains two positive integers $A,B$. The testdata guarantees that $A$ and $B$ can transfer money directly or indirectly.", "outputFormat": "Output the minimum total amount that $A$ needs so that $B$ receives $100$ yuan. Print to 8 digits after the decimal point.", "hint": "$1\\le n \\le 2000,m\\le 100000$.\n\nIt is guaranteed that the answer does not exceed $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小花费", "background": null, "description": "在 $n$ 个人中，某些人的银行账号之间可以互相转账。这些人之间转账的手续费各不相同。给定这些人之间转账时需要从转账金额里扣除百分之几的手续费，请问 $A$ 最少需要多少钱使得转账后 $B$ 收到 $100$ 元。", "inputFormat": "第一行输入两个正整数 $n,m$，分别表示总人数和可以互相转账的人的对数。\n\n以下 $m$ 行每行输入三个正整数 $x,y,z$，表示标号为 $x$ 的人和标号为 $y$ 的人之间互相转账需要扣除 $z\\%$ 的手续费 $(z<100)$。\n\n最后一行输入两个正整数 $A,B$。数据保证 $A$ 与 $B$ 之间可以直接或间接地转账。", "outputFormat": "输出 $A$ 使得 $B$ 到账 $100$ 元最少需要的总费用。精确到小数点后 $8$ 位。", "hint": "$1\\le n \\le 2000,m\\le 100000$。\n\n保证答案不超过 $10^4$。", "locale": "zh-CN"}}}
{"pid": "P1577", "type": "P", "difficulty": 3, "samples": [["4 11\n8.02\n7.43\n4.57\n5.39", "2.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "Special Judge"], "title": "切绳子", "background": "", "description": "有 $N$ 条绳子，它们的长度分别为 $L_i$。如果从它们中切割出 $K$ 条长度相同的绳子，这 $K$ 条绳子每条最长能有多长？答案保留到小数点后 $2$ 位(直接舍掉 $2$ 位后的小数)。\n", "inputFormat": "第一行两个整数 $N$ 和 $K$，接下来 $N$ 行，描述了每条绳子的长度 $L_i$ 。\n", "outputFormat": "切割后每条绳子的最大长度。答案与标准答案误差不超过 $0.01$ 或者相对误差不超过 $1\\%$ 即可通过。", "hint": "对于 $100\\%$ 的数据 $0<L_i\\leq 100000.00,0<n\\leq 10000,0<k\\leq 10000$\n", "locale": "zh-CN", "translations": {"en": {"title": "Cutting Ropes", "background": "", "description": "There are $N$ ropes with lengths $L_i$. If we cut from them $K$ ropes of equal length, determine the maximum possible length of each of these $K$ ropes. Keep the answer to two decimal places (truncate after the second decimal digit).", "inputFormat": "The first line contains two integers $N$ and $K$.  \nEach of the next $N$ lines describes the length $L_i$ of a rope.", "outputFormat": "Output the maximum length of each rope after cutting. The answer will be accepted if the absolute error does not exceed $0.01$ or the relative error does not exceed $1\\%$.", "hint": "Constraints: For $100\\%$ of the testdata, $0 < L_i \\leq 100000.00$, $0 < N \\leq 10000$, $0 < K \\leq 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "切绳子", "background": "", "description": "有 $N$ 条绳子，它们的长度分别为 $L_i$。如果从它们中切割出 $K$ 条长度相同的绳子，这 $K$ 条绳子每条最长能有多长？答案保留到小数点后 $2$ 位(直接舍掉 $2$ 位后的小数)。\n", "inputFormat": "第一行两个整数 $N$ 和 $K$，接下来 $N$ 行，描述了每条绳子的长度 $L_i$ 。\n", "outputFormat": "切割后每条绳子的最大长度。答案与标准答案误差不超过 $0.01$ 或者相对误差不超过 $1\\%$ 即可通过。", "hint": "对于 $100\\%$ 的数据 $0<L_i\\leq 100000.00,0<n\\leq 10000,0<k\\leq 10000$\n", "locale": "zh-CN"}}}
{"pid": "P1578", "type": "P", "difficulty": 5, "samples": [["10 10\n4\n1 1\n9 1\n1 9\n9 9", "80"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2002", "WC"], "title": "[WC2002] 奶牛浴场", "background": null, "description": "由于 John 建造了牛场围栏，激起了奶牛的愤怒，奶牛的产奶量急剧减少。为了讨好奶牛，John 决定在牛场中建造一个大型浴场。但是 John 的奶牛有一个奇怪的习惯，每头奶牛都必须在牛场中的一个固定的位置产奶，而奶牛显然不能在浴场中产奶，于是，John 希望所建造的浴场不覆盖这些产奶点。这回，他又要求助于 Clevow 了。你还能帮助 Clevow 吗？\n\nJohn 的牛场和规划的浴场都是矩形。浴场要完全位于牛场之内，并且浴场的轮廓要与牛场的轮廓平行或者重合。浴场不能覆盖任何产奶点，但是产奶点可以位于浴场的轮廓上。\n\nClevow 当然希望浴场的面积尽可能大了，所以你的任务就是帮她计算浴场的最大面积。", "inputFormat": "输入文件的第一行包含两个整数 $L$ 和 $W$，分别表示牛场的长和宽。\n\n文件的第二行包含一个整数 $n$，表示产奶点的数量。\n\n以下 $n$ 行每行包含两个整数 $x$ 和 $y$，表示一个产奶点的坐标。", "outputFormat": "输出文件仅一行，包含一个整数 $S$，表示浴场的最大面积。", "hint": "对于所有数据，$0 \\le n \\le 5 \\times 10^3$，$1 \\le L,W \\le 3 \\times 10^4$。所有产奶点都位于牛场内，即：$0 \\le x \\le L$，$0 \\le y \\le W$。\n\n感谢 @凯瑟琳98 提供了 4 组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "[WC2002] Cow Bath", "background": "", "description": "Because John built a fence around the cow field, the cows became angry and their milk yield dropped sharply. To appease them, John decided to build a large bath inside the field. However, John’s cows have a strange habit: each cow must produce milk at a fixed position in the field, and cows obviously cannot produce milk in the bath. Therefore, John wants the bath not to cover these milking points. Once again, he turns to Clevow for help. Can you help Clevow?\n\nJohn’s field and the planned bath are both rectangles. The bath must lie completely inside the field, and its sides must be parallel to, or coincide with, the sides of the field. The bath must not cover any milking point, but milking points may lie on the boundary of the bath.\n\nClevow of course wants the bath to have the largest possible area, so your task is to compute the maximum possible area of the bath.", "inputFormat": "The first line contains two integers $L$ and $W$, denoting the length and width of the field.\n\nThe second line contains an integer $n$, denoting the number of milking points.\n\nEach of the following $n$ lines contains two integers $x$ and $y$, denoting the coordinates of a milking point.", "outputFormat": "Output a single line containing an integer $S$, the maximum area of the bath.", "hint": "For all testdata, $0 \\le n \\le 5 \\times 10^3$, $1 \\le L, W \\le 3 \\times 10^4$. All milking points lie within the field, i.e., $0 \\le x \\le L$, $0 \\le y \\le W$.\n\nThanks to @凯瑟琳98 for providing 4 sets of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[WC2002] 奶牛浴场", "background": null, "description": "由于 John 建造了牛场围栏，激起了奶牛的愤怒，奶牛的产奶量急剧减少。为了讨好奶牛，John 决定在牛场中建造一个大型浴场。但是 John 的奶牛有一个奇怪的习惯，每头奶牛都必须在牛场中的一个固定的位置产奶，而奶牛显然不能在浴场中产奶，于是，John 希望所建造的浴场不覆盖这些产奶点。这回，他又要求助于 Clevow 了。你还能帮助 Clevow 吗？\n\nJohn 的牛场和规划的浴场都是矩形。浴场要完全位于牛场之内，并且浴场的轮廓要与牛场的轮廓平行或者重合。浴场不能覆盖任何产奶点，但是产奶点可以位于浴场的轮廓上。\n\nClevow 当然希望浴场的面积尽可能大了，所以你的任务就是帮她计算浴场的最大面积。", "inputFormat": "输入文件的第一行包含两个整数 $L$ 和 $W$，分别表示牛场的长和宽。\n\n文件的第二行包含一个整数 $n$，表示产奶点的数量。\n\n以下 $n$ 行每行包含两个整数 $x$ 和 $y$，表示一个产奶点的坐标。", "outputFormat": "输出文件仅一行，包含一个整数 $S$，表示浴场的最大面积。", "hint": "对于所有数据，$0 \\le n \\le 5 \\times 10^3$，$1 \\le L,W \\le 3 \\times 10^4$。所有产奶点都位于牛场内，即：$0 \\le x \\le L$，$0 \\le y \\le W$。\n\n感谢 @凯瑟琳98 提供了 4 组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1579", "type": "P", "difficulty": 2, "samples": [["2009", "3 3 2003"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "枚举", "素数判断,质数,筛法"], "title": "哥德巴赫猜想（升级版）", "background": "1742 年 6 月 7 日，哥德巴赫写信给当时的大数学家欧拉，正式提出了以下的猜想：任何一个大于 $9$ 的奇数都可以表示成 $3$ 个质数之和。质数是指除了 $1$ 和本身之外没有其他约数的数，如 $2$ 和 $11$ 都是质数，而 $6$ 不是质数，因为 $6$ 除了约数 $1$ 和 $6$ 之外还有约数 $2$ 和 $3$。**需要特别说明的是 $1$ 不是质数。**\n\n这就是哥德巴赫猜想。欧拉在回信中说，他相信这个猜想是正确的，但他不能证明。\n\n从此，这道数学难题引起了几乎所有数学家的注意。哥德巴赫猜想由此成为数学皇冠上一颗可望不可及的“明珠”。", "description": "现在请你编一个程序验证哥德巴赫猜想。\n\n先给出一个奇数 $n$，要求输出 $3$ 个质数，这 $3$ 个质数之和等于输入的奇数。", "inputFormat": "仅有一行，包含一个正奇数 $n$，其中 $9 < n < 20000$。", "outputFormat": "仅有一行，输出 $3$ 个质数，这 $3$ 个质数之和等于输入的奇数。相邻两个质数之间用一个空格隔开，最后一个质数后面没有空格。如果表示方法不唯一，请输出第一个质数最小的方案，如果第一个质数最小的方案不唯一，请输出第一个质数最小的同时，第二个质数最小的方案。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Goldbach's Conjecture (Upgraded Version)", "background": "On June 7, 1742, Goldbach wrote to the great mathematician Euler, formally proposing the following conjecture: any odd number greater than $9$ can be expressed as the sum of $3$ primes. A prime is a number that has no divisors other than $1$ and itself; for example, $2$ and $11$ are primes, while $6$ is not, because besides $1$ and $6$, it also has divisors $2$ and $3$. **Note in particular that 1 is not a prime.**\n\nThis is Goldbach's conjecture. In his reply, Euler said he believed the conjecture was correct, but he could not prove it.\n\nSince then, this mathematical challenge has attracted the attention of almost all mathematicians. Goldbach's conjecture has thus become an unattainable “jewel” in the crown of mathematics.", "description": "Now please write a program to verify Goldbach's conjecture.\n\nGiven an odd number $n$, output $3$ primes whose sum equals the input odd number.", "inputFormat": "Only one line, containing a positive odd integer $n$, where $9 < n < 20000$.", "outputFormat": "Only one line, output $3$ primes whose sum equals the input odd number. Adjacent primes are separated by a single space, and there is no space after the last prime. If the representation is not unique, output the scheme with the smallest first prime. If there are multiple such schemes, output the one that also has the smallest second prime.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "哥德巴赫猜想（升级版）", "background": "1742 年 6 月 7 日，哥德巴赫写信给当时的大数学家欧拉，正式提出了以下的猜想：任何一个大于 $9$ 的奇数都可以表示成 $3$ 个质数之和。质数是指除了 $1$ 和本身之外没有其他约数的数，如 $2$ 和 $11$ 都是质数，而 $6$ 不是质数，因为 $6$ 除了约数 $1$ 和 $6$ 之外还有约数 $2$ 和 $3$。**需要特别说明的是 $1$ 不是质数。**\n\n这就是哥德巴赫猜想。欧拉在回信中说，他相信这个猜想是正确的，但他不能证明。\n\n从此，这道数学难题引起了几乎所有数学家的注意。哥德巴赫猜想由此成为数学皇冠上一颗可望不可及的“明珠”。", "description": "现在请你编一个程序验证哥德巴赫猜想。\n\n先给出一个奇数 $n$，要求输出 $3$ 个质数，这 $3$ 个质数之和等于输入的奇数。", "inputFormat": "仅有一行，包含一个正奇数 $n$，其中 $9 < n < 20000$。", "outputFormat": "仅有一行，输出 $3$ 个质数，这 $3$ 个质数之和等于输入的奇数。相邻两个质数之间用一个空格隔开，最后一个质数后面没有空格。如果表示方法不唯一，请输出第一个质数最小的方案，如果第一个质数最小的方案不唯一，请输出第一个质数最小的同时，第二个质数最小的方案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1580", "type": "P", "difficulty": 3, "samples": [["yyy loves OI : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Maths : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Chemistry : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Microelectronic : ni men wu liao me \nyyy loves OI : @yyy loves Physics wo pei fu ni de chu ti xiao lv\n\n", "Unsuccessful @yyy loves Physics attempt\n4\nyyy loves Microelectronic\n"], ["yyy loves OI : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Maths : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Chemistry : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves OI : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Maths : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Chemistry : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves OI : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Maths : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Chemistry : @yyy loves Physics wo pei fu ni de chu ti xiao lv\nyyy loves Physics : ni men gou le \n\n", "Successful @yyy loves Physics attempt\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创", "队列"], "title": "yyy loves Easter_Egg I", "background": "Soha 的出题效率着实让人大吃一惊。OI，数学，化学的题目都出好了，物理的题还没有一道。于是，Huntfire，absi2011，redbag 对 soha 进行轮番炸，准备炸到 soha 出来，不料，人群中冲出了个 kkksc03……", "description": "![](https://cdn.luogu.com.cn/upload/pic/1456.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1455.png)\n\nyyy loves OI（Huntfire），yyy loves Maths（redbag），yyy loves Chemistry（absi2011）对 yyy loves Physics（soha）进行轮番炸，轰炸按照顺序进行，顺序为 Huntfire，redbag，absi2011。\n\n现在这一题中，我们不考虑太复杂的队形形式。我们认为只要这一句内含有且恰好含有一次@，@的人和上一句话一样就算为队形。\n\n比如以下也视为队形：\n\n- `yyy loves OI : @yyy loves Microelectronic`\n- `yyy loves Maths : @yyy loves Microelectronic 我佩服soha的出题效率`\n- `yyy loves OI : @yyy loves Microelectronic +1`\n- `yyy loves Chemistry : +1 @yyy loves Microelectronic`\n\n若 @ 的人与第一个人不同，就算队形被打破。若这个人在队形被打破之前出来发言了，或者就是他打破队形了，就算（油）炸成功了。\n\n若（油）炸成功，输出 `Successful @某某某 attempt`，若队形被破坏先输出 `Unsuccessful @某某某 attempt`，再输出队形第一次被破坏的行数与第一次破坏队形的人的 $\\text{id}$。\n\n如果队形一直没被打破，就先输出 `Unsuccessful @某某某 attempt`，再输出队形的长度，最后输出 `Good Queue Shape`。\n\n~~p.s.yyy loves Microelectronic 是 kkksc03~~\n\n", "inputFormat": "$N$ 行，为轰炸开始后的一段消息记录，每行一条消息。消息格式：「消息发送者+`:`+消息内容」，每行消息长度不超过 $1000$。（中文用拼音代替）\n\n", "outputFormat": "若（油）炸成功，输出 `Successful @某某某 attempt`，若队形被破坏第一行输出 `Unsuccessful @某某某 attempt`，接下来一行输出队形第一次被破坏的行数，第三行输出第一次破坏队形的人的 $\\text{id}$。\n如果队形一直没被打破，就先输出 `Unsuccessful @某某某 attempt`，再输出队形的长度，最后输出 `Good Queue Shape`。", "hint": "**@yyy loves Physics 我佩服你的出题效率**\n\n此题仅吐槽 soha，纪念出题者的队形，此队形长达 $91$ 行。\n\n对于 $100\\%$ 的数据,每行消息长度 $\\le$ $10^3$。 \n\n- 保证行数不超过 $5\\times 10^4$；\n- 保证输入文件大小不超过 $4\\text{MB}$；\n- 保证第一个说话的一定在 @ 某人；\n- 保证大家的名字都是 $\\text{yyy loves ***}$ 的格式；\n- 保证每个人说的话中没有 `:`；\n- 保证第一个说话的一定艾特了一个人且只 @ 了一个人；\n- 保证第一个说话的一定不会艾特自己；\n- 保证文件结束一定有一行空行，方便你判定文件结束；\n- 并不保证后面说话的艾特了几个人 然而艾特人数不为一个人视为破坏队形；\n- 并不保证后面说话是否会反复艾特同一个人；\n- 并不保证被炸的人一定破坏队形；\n- 并不保证这一题是或不是压轴题；\n- 并不保证这一套比赛存在压轴题；\n- 并不保证下一套比赛和这一套比赛一样水；\n- 并不保证群里除了这 $4$ 个人和 kkksc03 以外没有别人了；\n- 并不保证你没 AC 这题的情况下吐槽 soha 不会出事儿；\n- AC 了可以吐槽 soha 一句，soha 不会介意。", "locale": "zh-CN", "translations": {"en": {"title": "yyy loves Easter_Egg I", "background": "Soha’s problem-setting efficiency is truly astonishing. The OI, math, and chemistry problems are all ready, but not a single physics problem. So, Huntfire, absi2011, and redbag take turns bombing soha, planning to keep bombing until soha shows up. Unexpectedly, kkksc03 rushes out from the crowd...", "description": "![](https://cdn.luogu.com.cn/upload/pic/1456.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1455.png)\n\nyyy loves OI (Huntfire), yyy loves Maths (redbag), and yyy loves Chemistry (absi2011) take turns bombing yyy loves Physics (soha), in the order Huntfire, redbag, absi2011.\n\nIn this problem, we do not consider complicated queue shapes. We consider the queue shape to be maintained if and only if a line contains exactly one @, and the person being @-mentioned is the same as in the previous line.\n\nFor example, the following are also considered to maintain the queue shape:\n- `yyy loves OI : @yyy loves Microelectronic`\n- `yyy loves Maths : @yyy loves Microelectronic 我佩服soha的出题效率`\n- `yyy loves OI : @yyy loves Microelectronic +1`\n- `yyy loves Chemistry : +1 @yyy loves Microelectronic`\n\nIf the person being @-mentioned is different from the one in the first line, the queue shape is considered broken. If the bombed person appears to speak before the queue shape is broken, or they are the one who breaks the queue shape, the frying is considered successful.\n\nIf the frying is successful, output `Successful @someone attempt`. If the queue shape is broken first, output `Unsuccessful @someone attempt`, then output the line number where the queue shape is first broken, and the $\\text{id}$ of the person who first broke the queue shape.\n\nIf the queue shape is never broken, first output `Unsuccessful @someone attempt`, then output the length of the queue shape, and finally output `Good Queue Shape`.\n\n~~p.s.yyy loves Microelectronic 是 kkksc03~~", "inputFormat": "$N$ lines of message logs after the bombing starts, one message per line. Message format: “sender + `:` + content”. Each line’s length does not exceed $1000$. (Chinese is replaced by pinyin.)", "outputFormat": "If the frying is successful, output `Successful @someone attempt`.\n\nIf the queue shape is broken first, output three lines:\n- First line: `Unsuccessful @someone attempt`.\n- Second line: the line number where the queue shape is first broken.\n- Third line: the $\\text{id}$ of the person who first broke the queue shape.\n\nIf the queue shape is never broken, output three lines:\n- First line: `Unsuccessful @someone attempt`.\n- Second line: the length of the queue shape.\n- Third line: `Good Queue Shape`.", "hint": "**@yyy loves Physics 我佩服你的出题效率**\n\nThis problem merely pokes fun at soha and commemorates the author’s queue shape, which lasted $91$ lines.\n\nFor $100\\%$ of the testdata, each line length $\\le 10^3$.\n\n- The number of lines does not exceed $5\\times 10^4$.\n- The input file size does not exceed $4\\text{MB}$.\n- The first speaker is guaranteed to @ someone.\n- Everyone’s name is guaranteed to follow the format $\\text{yyy loves ***}$.\n- It is guaranteed that nobody’s message contains `:`.\n- The first speaker is guaranteed to @ exactly one person.\n- The first speaker is guaranteed not to @ themselves.\n- There is guaranteed to be an empty line at the end of the file to help you detect EOF.\n- It is not guaranteed how many people later speakers will @; however, if the number is not exactly one, it is considered breaking the queue shape.\n- It is not guaranteed whether later speakers will repeatedly @ the same person.\n- It is not guaranteed that the bombed person will break the queue shape.\n- It is not guaranteed whether this problem is or is not the final problem.\n- It is not guaranteed that this contest set even has a final problem.\n- It is not guaranteed that the next contest set will be as easy as this one.\n- It is not guaranteed that there are no others in the group besides these $4$ people and kkksc03.\n- It is not guaranteed that mocking soha without ACing this problem won’t cause trouble.\n- If you AC it, you may mock soha once; soha won’t mind.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "yyy loves Easter_Egg I", "background": "Soha 的出题效率着实让人大吃一惊。OI，数学，化学的题目都出好了，物理的题还没有一道。于是，Huntfire，absi2011，redbag 对 soha 进行轮番炸，准备炸到 soha 出来，不料，人群中冲出了个 kkksc03……", "description": "![](https://cdn.luogu.com.cn/upload/pic/1456.png)\n\n![](https://cdn.luogu.com.cn/upload/pic/1455.png)\n\nyyy loves OI（Huntfire），yyy loves Maths（redbag），yyy loves Chemistry（absi2011）对 yyy loves Physics（soha）进行轮番炸，轰炸按照顺序进行，顺序为 Huntfire，redbag，absi2011。\n\n现在这一题中，我们不考虑太复杂的队形形式。我们认为只要这一句内含有且恰好含有一次@，@的人和上一句话一样就算为队形。\n\n比如以下也视为队形：\n\n- `yyy loves OI : @yyy loves Microelectronic`\n- `yyy loves Maths : @yyy loves Microelectronic 我佩服soha的出题效率`\n- `yyy loves OI : @yyy loves Microelectronic +1`\n- `yyy loves Chemistry : +1 @yyy loves Microelectronic`\n\n若 @ 的人与第一个人不同，就算队形被打破。若这个人在队形被打破之前出来发言了，或者就是他打破队形了，就算（油）炸成功了。\n\n若（油）炸成功，输出 `Successful @某某某 attempt`，若队形被破坏先输出 `Unsuccessful @某某某 attempt`，再输出队形第一次被破坏的行数与第一次破坏队形的人的 $\\text{id}$。\n\n如果队形一直没被打破，就先输出 `Unsuccessful @某某某 attempt`，再输出队形的长度，最后输出 `Good Queue Shape`。\n\n~~p.s.yyy loves Microelectronic 是 kkksc03~~\n\n", "inputFormat": "$N$ 行，为轰炸开始后的一段消息记录，每行一条消息。消息格式：「消息发送者+`:`+消息内容」，每行消息长度不超过 $1000$。（中文用拼音代替）\n\n", "outputFormat": "若（油）炸成功，输出 `Successful @某某某 attempt`，若队形被破坏第一行输出 `Unsuccessful @某某某 attempt`，接下来一行输出队形第一次被破坏的行数，第三行输出第一次破坏队形的人的 $\\text{id}$。\n如果队形一直没被打破，就先输出 `Unsuccessful @某某某 attempt`，再输出队形的长度，最后输出 `Good Queue Shape`。", "hint": "**@yyy loves Physics 我佩服你的出题效率**\n\n此题仅吐槽 soha，纪念出题者的队形，此队形长达 $91$ 行。\n\n对于 $100\\%$ 的数据,每行消息长度 $\\le$ $10^3$。 \n\n- 保证行数不超过 $5\\times 10^4$；\n- 保证输入文件大小不超过 $4\\text{MB}$；\n- 保证第一个说话的一定在 @ 某人；\n- 保证大家的名字都是 $\\text{yyy loves ***}$ 的格式；\n- 保证每个人说的话中没有 `:`；\n- 保证第一个说话的一定艾特了一个人且只 @ 了一个人；\n- 保证第一个说话的一定不会艾特自己；\n- 保证文件结束一定有一行空行，方便你判定文件结束；\n- 并不保证后面说话的艾特了几个人 然而艾特人数不为一个人视为破坏队形；\n- 并不保证后面说话是否会反复艾特同一个人；\n- 并不保证被炸的人一定破坏队形；\n- 并不保证这一题是或不是压轴题；\n- 并不保证这一套比赛存在压轴题；\n- 并不保证下一套比赛和这一套比赛一样水；\n- 并不保证群里除了这 $4$ 个人和 kkksc03 以外没有别人了；\n- 并不保证你没 AC 这题的情况下吐槽 soha 不会出事儿；\n- AC 了可以吐槽 soha 一句，soha 不会介意。", "locale": "zh-CN"}}}
{"pid": "P1581", "type": "P", "difficulty": 2, "samples": [["1,0+2,1", "1,0,1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "高精度", "素数判断,质数,筛法"], "title": "A+B Problem（升级版）", "background": "小明这在写作业，其中有一道 A+B Problem，他想啊想啊想，就是想不出来，于是就找到了会编程的你......", "description": "这里的 $A+B$ 是很奇特的。它是按质数的顺序来进位的。例如：$1,0+2,1$ ＝ $1,0,1$（用 $\\verb!,!$ 来分隔每一位）。个位是 $2$ 进制，十位是 $3$ 进制，百位是 $5$ 进制，千位是 $7$ 进制，万位是 $11$ 进制……两个加数的最高位是万位（万位可能有两位）。", "inputFormat": "输入一个形如 $1,0+2,1$ 字符串 $s$。", "outputFormat": "输出相加后的结果。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "A+B Problem (Upgraded Version)", "background": "Xiao Ming is doing his homework. There is an A+B Problem he cannot figure out, so he turns to you, a programmer, for help.", "description": "Here, $A+B$ works in a peculiar way. Carries follow the sequence of prime bases. For example: $1,0+2,1$ = $1,0,1$ (using $\\verb!,!$ to separate each digit). The units place uses base 2, the tens place uses base 3, the hundreds place uses base 5, the thousands place uses base 7, the ten-thousands place uses base 11, and so on. The highest place of the two addends is the ten-thousands place (the digit at this place may have two decimal digits, e.g., 10).", "inputFormat": "Input a string $s$ of the form $1,0+2,1$.", "outputFormat": "Output the result of the addition.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "A+B Problem（升级版）", "background": "小明这在写作业，其中有一道 A+B Problem，他想啊想啊想，就是想不出来，于是就找到了会编程的你......", "description": "这里的 $A+B$ 是很奇特的。它是按质数的顺序来进位的。例如：$1,0+2,1$ ＝ $1,0,1$（用 $\\verb!,!$ 来分隔每一位）。个位是 $2$ 进制，十位是 $3$ 进制，百位是 $5$ 进制，千位是 $7$ 进制，万位是 $11$ 进制……两个加数的最高位是万位（万位可能有两位）。", "inputFormat": "输入一个形如 $1,0+2,1$ 字符串 $s$。", "outputFormat": "输出相加后的结果。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1582", "type": "P", "difficulty": 3, "samples": [["3 1\n", "1\n"], ["13 2", "3"], ["1000000 5", "15808"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["枚举", "进制"], "title": "倒水", "background": "", "description": "一天，CC 买了 $N$ 个容量可以认为是无限大的瓶子，开始时每个瓶子里有 $1$ 升水。接着 CC 发现瓶子实在太多了，于是他决定保留不超过 $K$ 个瓶子。每次他选择两个当前含水量相同的瓶子，把一个瓶子的水全部倒进另一个里，然后把空瓶丢弃。（不能丢弃有水的瓶子）\n\n显然在某些情况下 CC 无法达到目标，比如 $N = 3$、$K = 1$。此时 CC 会重新买一些新的瓶子（新瓶子容量无限，开始时有 $1$ 升水），以达到目标。\n\n现在 CC 想知道，最少需要买多少新瓶子才能达到目标呢？\n", "inputFormat": "一行两个正整数 $N, K$（$1 \\le N \\le 2 \\times 10^9$，$K \\le 1000$）。", "outputFormat": "一个非负整数，表示最少需要买多少新瓶子。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Pouring Water", "background": "", "description": "One day, CC bought $N$ bottles with effectively infinite capacity, each initially containing $1$ liter of water. Then CC found there were too many bottles, so he decided to keep at most $K$ bottles. Each time, he chooses two bottles that currently contain the same amount of water, pours all the water from one into the other, and then discards the empty bottle. (He cannot discard a bottle that still contains water.)\n\nObviously, in some cases CC cannot achieve the goal, for example, $N = 3$, $K = 1$. In this case, CC will buy some new bottles (the new bottles have infinite capacity and initially contain $1$ liter of water) to achieve the goal.\n\nNow CC wants to know the minimum number of new bottles he needs to buy to achieve the goal.", "inputFormat": "One line containing two positive integers $N, K$ ($1 \\le N \\le 2 \\times 10^9$, $K \\le 1000$).", "outputFormat": "A non-negative integer indicating the minimum number of new bottles required.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "倒水", "background": "", "description": "一天，CC 买了 $N$ 个容量可以认为是无限大的瓶子，开始时每个瓶子里有 $1$ 升水。接着 CC 发现瓶子实在太多了，于是他决定保留不超过 $K$ 个瓶子。每次他选择两个当前含水量相同的瓶子，把一个瓶子的水全部倒进另一个里，然后把空瓶丢弃。（不能丢弃有水的瓶子）\n\n显然在某些情况下 CC 无法达到目标，比如 $N = 3$、$K = 1$。此时 CC 会重新买一些新的瓶子（新瓶子容量无限，开始时有 $1$ 升水），以达到目标。\n\n现在 CC 想知道，最少需要买多少新瓶子才能达到目标呢？\n", "inputFormat": "一行两个正整数 $N, K$（$1 \\le N \\le 2 \\times 10^9$，$K \\le 1000$）。", "outputFormat": "一个非负整数，表示最少需要买多少新瓶子。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1583", "type": "P", "difficulty": 2, "samples": [["10 10\n1 2 3 4 5 6 7 8 9 10\n2 4 6 8 10 12 14 16 18 20\n", "10 9 8 7 6 5 4 3 2 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "排序"], "title": "魔法照片", "background": "", "description": "一共有 $n$ 个人（以 $1\\sim n$ 编号）向佳佳要照片，而佳佳只能把照片给其中的 $k$ 个人。佳佳按照与他们的关系好坏的程度给每个人赋予了一个初始权值 $W_i$。然后将初始权值从大到小进行排序，每人就有了一个序号 $D_i$（取值同样是 $1\\sim n$）。按照这个序号对 $10$ 取模的值将这些人分为 $10$ 类。也就是说定义每个人的类别序号 $C_i$ 的值为 $(D_i-1)\\bmod 10 +1$，显然类别序号的取值为 $1 \\sim 10$。第 $i$ 类的人将会额外得到 $E_i$ 的权值。你需要做的就是求出加上额外权值以后，最终的权值最大的 $k$ 个人，并输出他们的编号。**在排序中，如果两人的 $E_i$ 相同，编号小的优先。**", "inputFormat": "第一行输入用空格隔开的两个整数，分别是 $n$ 和 $k$。\n\n第二行给出了 $10$ 个正整数，分别是 $E_1\\sim E_{10}$。\n\n第三行给出了 $n$ 个正整数，第 $i$ 个数表示编号为  $i$ 的人的权值 $W_i$。", "outputFormat": "只需输出一行用空格隔开的 $k$ 个整数，分别表示最终的 $W_i$ 从高到低的人的编号。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 20000$，$1\\leq k\\leq n$，保证所有数据均在 `int` 范围之内。", "locale": "zh-CN", "translations": {"en": {"title": "Magic Photos", "background": "", "description": "There are $n$ people (numbered $1 \\sim n$) asking Jiajia for photos, but Jiajia can only give photos to $k$ of them. Jiajia assigns each person an initial weight $W_i$ based on how close they are. Then she sorts the initial weights in descending order, and each person gets a rank $D_i$ (also taking values $1 \\sim n$). When determining $D_i$, if two people have the same $W_i$, the one with the smaller index comes first.\n\nAccording to the rank modulo $10$, these people are divided into $10$ categories. Specifically, define each person’s category index $C_i$ as $(D_i-1)\\bmod 10 + 1$, so $C_i$ takes values $1 \\sim 10$. People in category $i$ receive an extra weight $E_i$.\n\nLet the final weight be $F_i = W_i + E_{C_i}$. Your task is to find the $k$ people with the largest final weights and output their indices. In the final sorting, if two people have the same $F_i$, the one with the smaller index comes first.", "inputFormat": "- The first line contains two integers separated by a space: $n$ and $k$.\n- The second line contains $10$ positive integers: $E_1 \\sim E_{10}$.\n- The third line contains $n$ positive integers, where the $i$-th number is the weight $W_i$ of the person with index $i$.", "outputFormat": "Output one line with $k$ integers separated by spaces: the indices of the people with the highest to lowest final weights $F_i$.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq n \\leq 20000$, $1 \\leq k \\leq n$. All values are guaranteed to fit in the range of `int`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔法照片", "background": "", "description": "一共有 $n$ 个人（以 $1\\sim n$ 编号）向佳佳要照片，而佳佳只能把照片给其中的 $k$ 个人。佳佳按照与他们的关系好坏的程度给每个人赋予了一个初始权值 $W_i$。然后将初始权值从大到小进行排序，每人就有了一个序号 $D_i$（取值同样是 $1\\sim n$）。按照这个序号对 $10$ 取模的值将这些人分为 $10$ 类。也就是说定义每个人的类别序号 $C_i$ 的值为 $(D_i-1)\\bmod 10 +1$，显然类别序号的取值为 $1 \\sim 10$。第 $i$ 类的人将会额外得到 $E_i$ 的权值。你需要做的就是求出加上额外权值以后，最终的权值最大的 $k$ 个人，并输出他们的编号。**在排序中，如果两人的 $E_i$ 相同，编号小的优先。**", "inputFormat": "第一行输入用空格隔开的两个整数，分别是 $n$ 和 $k$。\n\n第二行给出了 $10$ 个正整数，分别是 $E_1\\sim E_{10}$。\n\n第三行给出了 $n$ 个正整数，第 $i$ 个数表示编号为  $i$ 的人的权值 $W_i$。", "outputFormat": "只需输出一行用空格隔开的 $k$ 个整数，分别表示最终的 $W_i$ 从高到低的人的编号。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 20000$，$1\\leq k\\leq n$，保证所有数据均在 `int` 范围之内。", "locale": "zh-CN"}}}
{"pid": "P1584", "type": "P", "difficulty": 5, "samples": [["6 4 5\n1 3 3 2 2 1\n2 3 1 4 5 2", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "魔杖", "background": "", "description": "Smart 在春游时意外地得到了一种好东西——一种非常珍贵的树枝。这些树枝可以用来做优质的魔杖！\n\n选择怎样的切割方式来制作魔杖非常重要，关键问题是——一把魔杖既不能太长、又不能太短，且制作出来的魔杖不能有冲突……\n\nSmart 得到的这些树枝在属性上完全相同。每一根树枝都有 $n$ 段（用 $1$~ $n$ 编号），给定了每段的长度 $l$ 和每段的魔力值 $m$ 。你可以做的就是选择一段或连续的几段，把它们作为一个整体切下来，再用来制作魔杖。但是一根魔杖的长度不能太长，不能大于给定的值 $h$；也不能太短，不能小于给定的值 $low$ 。\n\n魔杖有一个奇怪的要求：如果某一根魔杖的制作材料是另一根魔杖的一部分，则这两根魔杖之间将发生冲突。比如说树枝有三段，从左到右的长度分别为 $4$ 、 $1$ 、 $3$ ，Smart需要长度为 $4$ 到 $5$ 之间的魔杖。他可以用一根树枝的前两段做出一个长度为 $5$ 的魔杖，用一根树枝的后两段做出长度为 $4$ 的魔杖；但他决不能用一根树枝的前两段做了魔杖后再单独使用另一根树枝的第一段做成魔杖，因为前者包含了后者的所有成分，这会导致冲突。\n\n我们假设 Smart 可以得到任意多这样的树枝。 Smart 需要制作出若干个互不冲突的魔杖，使所有魔杖的魔力值之和最大。（魔杖的长度就是组成它的那些段的长度的总和，魔力值亦然）。", "inputFormat": "第一行有三个用空格隔开的整数，分别表示 $n$、$low$、$h$。\n\n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表 $l_i$ 。\n\n第三行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表 $m_i$。", "outputFormat": "输出一行一个整数，表示能够获得的魔力值的最大值。", "hint": "#### 样例输入输出 1 解释\n\n取 $[1$  $3]$ $[3$ $2]$ $[2$ $2$ $1]$ 做成魔杖，得到最大权值 $2+3+1+4+4+5+2=21$ 。\n\n---\n\n#### 数据规模与约定\n\n对于$100\\%$的数据，保证：\n- $1\\le n\\le 1000$，$1\\le low\\le h < 2^{31}$。\n- $1 \\leq l_i, m_i \\le 10^5$", "locale": "zh-CN", "translations": {"en": {"title": "Wand", "background": "", "description": "On a spring outing, Smart accidentally obtained something good — some very precious branches. These branches can be used to make high-quality wands.\n\nChoosing how to cut to make the wands is crucial. The key is: a wand can be neither too long nor too short, and the wands produced must not conflict.\n\nThe branches Smart obtained are identical in their properties. Each branch has $n$ segments (numbered from $1$ to $n$). The length $l$ and the magic value $m$ of each segment are given. You may choose one segment or a consecutive block of segments, cut them off as a whole, and use that as a wand. However, the length of a wand must not be too long — it must not exceed $h$; and it must not be too short — it must not be less than $low$. In other words, the length must be between $low$ and $h$ inclusive.\n\nThere is a strange rule for wands: if the material used for one wand is a part of the material used for another wand, then these two wands conflict. For example, suppose a branch has three segments, and from left to right their lengths are $4$, $1$, $3$. Smart needs wands with lengths between $4$ and $5$. He can use the first two segments of a branch to make a wand of length $5$, and use the last two segments to make a wand of length $4$; but he must never use the first two segments to make a wand and then separately use only the first segment of another branch to make a wand, because the former contains all the components of the latter, which would cause a conflict.\n\nAssume Smart has access to an unlimited number of such branches. Smart needs to produce several pairwise non-conflicting wands so that the sum of the magic values of all wands is maximized. (The length of a wand is the sum of the lengths of the segments that form it, and its magic value is the sum of the magic values likewise.)", "inputFormat": "The first line contains three integers separated by spaces, representing $n$, $low$, and $h$.\n\nThe second line contains $n$ integers separated by spaces; the $i$-th integer is $l_i$.\n\nThe third line contains $n$ integers separated by spaces; the $i$-th integer is $m_i$.", "outputFormat": "Output a single integer on one line, the maximum total magic value that can be obtained.", "hint": "#### Explanation for Sample Input/Output 1\n\nChoose $[1\\ 3]$ $[3\\ 2]$ $[2\\ 2\\ 1]$ to make wands, obtaining the maximum total weight $2+3+1+4+4+5+2=21$。\n\n---\n\n#### Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that:\n- $1 \\le n \\le 1000$, $1 \\le low \\le h < 2^{31}$.\n- $1 \\le l_i, m_i \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔杖", "background": "", "description": "Smart 在春游时意外地得到了一种好东西——一种非常珍贵的树枝。这些树枝可以用来做优质的魔杖！\n\n选择怎样的切割方式来制作魔杖非常重要，关键问题是——一把魔杖既不能太长、又不能太短，且制作出来的魔杖不能有冲突……\n\nSmart 得到的这些树枝在属性上完全相同。每一根树枝都有 $n$ 段（用 $1$~ $n$ 编号），给定了每段的长度 $l$ 和每段的魔力值 $m$ 。你可以做的就是选择一段或连续的几段，把它们作为一个整体切下来，再用来制作魔杖。但是一根魔杖的长度不能太长，不能大于给定的值 $h$；也不能太短，不能小于给定的值 $low$ 。\n\n魔杖有一个奇怪的要求：如果某一根魔杖的制作材料是另一根魔杖的一部分，则这两根魔杖之间将发生冲突。比如说树枝有三段，从左到右的长度分别为 $4$ 、 $1$ 、 $3$ ，Smart需要长度为 $4$ 到 $5$ 之间的魔杖。他可以用一根树枝的前两段做出一个长度为 $5$ 的魔杖，用一根树枝的后两段做出长度为 $4$ 的魔杖；但他决不能用一根树枝的前两段做了魔杖后再单独使用另一根树枝的第一段做成魔杖，因为前者包含了后者的所有成分，这会导致冲突。\n\n我们假设 Smart 可以得到任意多这样的树枝。 Smart 需要制作出若干个互不冲突的魔杖，使所有魔杖的魔力值之和最大。（魔杖的长度就是组成它的那些段的长度的总和，魔力值亦然）。", "inputFormat": "第一行有三个用空格隔开的整数，分别表示 $n$、$low$、$h$。\n\n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表 $l_i$ 。\n\n第三行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表 $m_i$。", "outputFormat": "输出一行一个整数，表示能够获得的魔力值的最大值。", "hint": "#### 样例输入输出 1 解释\n\n取 $[1$  $3]$ $[3$ $2]$ $[2$ $2$ $1]$ 做成魔杖，得到最大权值 $2+3+1+4+4+5+2=21$ 。\n\n---\n\n#### 数据规模与约定\n\n对于$100\\%$的数据，保证：\n- $1\\le n\\le 1000$，$1\\le low\\le h < 2^{31}$。\n- $1 \\leq l_i, m_i \\le 10^5$", "locale": "zh-CN"}}}
{"pid": "P1585", "type": "P", "difficulty": 5, "samples": [["2 2 2 2\n", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "剪枝"], "title": "魔法阵", "background": "", "description": "魔法阵是一个 $n \\times m$ 的格子（高 $n$，宽 $m$），$n \\times m$ 为偶数。Smart 手中有 $n \\times m$ 个宝石（以 $1 \\sim n \\times m$ 编号）。Smart 从最右上角的格子开始走，从一个格子可以走到上、下、左、右 $4$ 个相邻的格子，但不能走出边界。每个格子必须且仅能到过 $1$ 次，这样 Smart 一共走了 $n \\times m$ 个格子停止（随便停哪里）。Smart 每进入一个格子，就在该格子里放入一颗宝石。他是按顺序放的，也就是说——第 $i$ 个进入的格子放入 $i$ 号宝石。\n\n如果两颗宝石的编号对 $\\frac{n \\times m}{2}$ 取模的值相同，则认为这两颗宝石相互之间有微妙的影响。也就是说，我们按照宝石的编号对 $\\frac{n \\times m}{2}$ 取模的值，将宝石分成 $\\frac{n \\times m}{2}$ 对，其中每对都恰有两颗宝石。对于每一对宝石，设第一颗宝石在第 $a$ 行第 $b$ 列，另一颗宝石在第 $c$ 行第 $d$ 列，那么定义这 $2$ 个宝石的魔力影响值为 $k_1 \\times \\lvert a - c \\rvert + k_2 \\times \\lvert b - d \\rvert$。\n\n需要你求出的是，在所有合乎题意的宝石摆放方案中，所有成对的宝石间的最大魔力影响值的最小值为多少。换句话说，如果我们定义对 $\\frac{n \\times m}{2}$ 取模的值为 $i$ 的一对宝石的魔力影响值为 $a_i$。你需要求出的就是 $\\max \\{ a_i : i=0,1,2,\\ldots \\}$ 的最小值。\n", "inputFormat": "只有一行用空格隔开的四个整数，分别是 $n, m, k_1, k_2$。\n", "outputFormat": "只需输出一个整数，即题目所要求的“所有成对的宝石间的最大魔力影响值的最小值”。\n", "hint": "对于 $100\\%$ 的数据，$n \\times m \\le 50$，$1 \\le k_1, k_2 \\le 32767$。", "locale": "zh-CN", "translations": {"en": {"title": "Magic Grid", "background": "", "description": "A magic grid is an $n \\times m$ grid (height $n$, width $m$), where $n \\times m$ is even. Smart has $n \\times m$ gems (numbered $1 \\sim n \\times m$). Smart starts from the top-right cell. From a cell, he can move to the $4$ adjacent cells up, down, left, and right, but he cannot go out of bounds. Each cell must be visited exactly once, so Smart visits $n \\times m$ cells in total and stops anywhere. Every time Smart enters a cell, he places one gem in that cell. He places them in order; that is, the $i$-th visited cell receives gem $i$.\n\nIf two gems have the same value when their indices are taken modulo $\\frac{n \\times m}{2}$, then these two gems have a subtle influence on each other. In other words, by taking gem indices modulo $\\frac{n \\times m}{2}$, we partition the gems into $\\frac{n \\times m}{2}$ pairs, each containing exactly two gems. For each pair of gems, suppose the first gem is at row $a$, column $b$, and the other is at row $c$, column $d$. Then the influence value of these two gems is defined as $k_1 \\times \\lvert a - c \\rvert + k_2 \\times \\lvert b - d \\rvert$.\n\nYou need to find, among all valid placement schemes, the minimum possible value of the maximum influence among all paired gems. In other words, if we define the influence value of the pair with remainder $i$ modulo $\\frac{n \\times m}{2}$ as $a_i$, you need to find the minimum possible value of $\\max \\{ a_i : i=0,1,2,\\ldots \\}$.", "inputFormat": "One line containing four integers separated by spaces: n, m, k1, k2.", "outputFormat": "Output a single integer: the required minimum possible value of the maximum influence among all paired gems.", "hint": "For $100\\%$ of the testdata, $n \\times m \\le 50$, $1 \\le k_1, k_2 \\le 32767$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔法阵", "background": "", "description": "魔法阵是一个 $n \\times m$ 的格子（高 $n$，宽 $m$），$n \\times m$ 为偶数。Smart 手中有 $n \\times m$ 个宝石（以 $1 \\sim n \\times m$ 编号）。Smart 从最右上角的格子开始走，从一个格子可以走到上、下、左、右 $4$ 个相邻的格子，但不能走出边界。每个格子必须且仅能到过 $1$ 次，这样 Smart 一共走了 $n \\times m$ 个格子停止（随便停哪里）。Smart 每进入一个格子，就在该格子里放入一颗宝石。他是按顺序放的，也就是说——第 $i$ 个进入的格子放入 $i$ 号宝石。\n\n如果两颗宝石的编号对 $\\frac{n \\times m}{2}$ 取模的值相同，则认为这两颗宝石相互之间有微妙的影响。也就是说，我们按照宝石的编号对 $\\frac{n \\times m}{2}$ 取模的值，将宝石分成 $\\frac{n \\times m}{2}$ 对，其中每对都恰有两颗宝石。对于每一对宝石，设第一颗宝石在第 $a$ 行第 $b$ 列，另一颗宝石在第 $c$ 行第 $d$ 列，那么定义这 $2$ 个宝石的魔力影响值为 $k_1 \\times \\lvert a - c \\rvert + k_2 \\times \\lvert b - d \\rvert$。\n\n需要你求出的是，在所有合乎题意的宝石摆放方案中，所有成对的宝石间的最大魔力影响值的最小值为多少。换句话说，如果我们定义对 $\\frac{n \\times m}{2}$ 取模的值为 $i$ 的一对宝石的魔力影响值为 $a_i$。你需要求出的就是 $\\max \\{ a_i : i=0,1,2,\\ldots \\}$ 的最小值。\n", "inputFormat": "只有一行用空格隔开的四个整数，分别是 $n, m, k_1, k_2$。\n", "outputFormat": "只需输出一个整数，即题目所要求的“所有成对的宝石间的最大魔力影响值的最小值”。\n", "hint": "对于 $100\\%$ 的数据，$n \\times m \\le 50$，$1 \\le k_1, k_2 \\le 32767$。", "locale": "zh-CN"}}}
{"pid": "P1586", "type": "P", "difficulty": 3, "samples": [["1\n2003", "48"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "枚举"], "title": "四方定理", "background": null, "description": "四方定理是众所周知的：任意一个正整数 $n$，可以分解为不超过四个整数的平方和。例如：$25=1^{2}+2^{2}+2^{2}+4^{2}$，当然还有其他的分解方案，$25=4^{2}+3^{2}$ 和 $25=5^{2}$。给定的正整数 $n$，编程统计它能分解的方案总数。注意：$25=4^{2}+3^{2}$ 和 $25=3^{2}+4^{2}$ 视为一种方案。", "inputFormat": "第一行为正整数 $t(1 \\le t \\le 100)$，接下来 $t$ 行，每行一个正整数 $n(1 \\le n \\le 32768)$。", "outputFormat": "对于每个正整数 $n$，输出方案总数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Four-Square Theorem", "background": "", "description": "The four-square theorem is well known: any positive integer $n$ can be written as a sum of at most four squares of integers. For example: $25=1^{2}+2^{2}+2^{2}+4^{2}$, and there are other representations as well, $25=4^{2}+3^{2}$ and $25=5^{2}$. Given a positive integer $n$, write a program to count the total number of its representations. Note: $25=4^{2}+3^{2}$ and $25=3^{2}+4^{2}$ are considered the same representation.", "inputFormat": "The first line contains a positive integer $t(1 \\le t \\le 100)$, followed by $t$ lines, each containing a positive integer $n(1 \\le n \\le 32768)$.", "outputFormat": "For each positive integer $n$, output the total number of representations.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "四方定理", "background": null, "description": "四方定理是众所周知的：任意一个正整数 $n$，可以分解为不超过四个整数的平方和。例如：$25=1^{2}+2^{2}+2^{2}+4^{2}$，当然还有其他的分解方案，$25=4^{2}+3^{2}$ 和 $25=5^{2}$。给定的正整数 $n$，编程统计它能分解的方案总数。注意：$25=4^{2}+3^{2}$ 和 $25=3^{2}+4^{2}$ 视为一种方案。", "inputFormat": "第一行为正整数 $t(1 \\le t \\le 100)$，接下来 $t$ 行，每行一个正整数 $n(1 \\le n \\le 32768)$。", "outputFormat": "对于每个正整数 $n$，输出方案总数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1587", "type": "P", "difficulty": 7, "samples": [["2 6 10", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2016", "NOI", "O2优化", "莫比乌斯反演"], "title": "[NOI2016] 循环之美", "background": "", "description": "牛牛是一个热爱算法设计的高中生。在他设计的算法中，常常会使用带小数的数进行计算。牛牛认为，如果在 $k$ 进制下，一个数的小数部分是纯循环的，那么它就是美的。现在，牛牛想知道：对于已知的十进制数 $n$ 和 $m$，在 $k$ 进制下，有多少个数值上互不相等的纯循环小数，可以用分数 $\\frac xy$ 表示,其中 $1≤x≤n,1≤y≤m$，且 $x,y$ 是整数。一个数是纯循环的，当且仅当其可以写成以下形式：\n\n$$a.\\dot{c_1} c_2 c_3 \\dots c_{p - 1} \\dot{c_p}$$\n\n其中，$a$ 是一个整数，$p≥1$；对于 $1≤i≤p$，$c_i$ 是 $k$ 进制下的一位数字。\n\n例如，在十进制下，$0.45454545……=0.\\dot {4} \\dot {5}$ 是纯循环的，它可以用 $\\frac {5}{11}$、$\\frac{10}{22}$ 等分数表示；在十进制下，$0.1666666……=0.1\\dot6$ 则不是纯循环的，它可以用 $\\frac 16$ 等分数表示。需要特别注意的是，我们认为一个整数是纯循环的，因为它的小数部分可以表示成 $0$ 的循环或是 $k-1$ 的循环；而一个小数部分非 $0$ 的有限小数不是纯循环的。", "inputFormat": "只有一行，包含三个十进制数 $N,M,K$ 意义如题所述。\n\n\n", "outputFormat": "一行一个整数，表示满足条件的美的数的个数。\n", "hint": "### 样例解释\n\n满足条件的数分别是：\n\n$\\frac 11=1.0000\\ldots$\n\n$\\frac 13=0.3333\\ldots$\n\n$\\frac 21=2.0000\\ldots$\n\n$\\frac 23=0.6666\\ldots$\n\n$\\frac 11$ 和 $\\frac 22$ 虽然都是纯循环小数，但因为它们相等，因此只计数一次；同样，$\\frac 13$ 和 $\\frac 26$ 也只计数一次。\n\n### 数据范围\n\n对于所有的测试点，保证 $1\\leq n\\leq 10^9$，$1\\leq m \\leq 10^9$，$2\\leq k \\leq 2\\times 10^3 $。\n\n对于每个测试点，有以下约束（其中留空的表示没有特殊的约束）：\n\n::cute-table{tuack}\n\n| 测试点编号 |         $n$         |     $m$     |     $k$     |\n| :--------: | :-----------------: | :---------: | :---------: |\n|    $1$     |      $\\leq 10$      |  $\\leq 20$  |    $=2$     |\n|    $2$     |     $\\leq 100$      | $\\leq 10^4$ |    ^     |\n|    $3$     |     $\\leq 10^3$     |             |    ^     |\n|    $4$     |     $\\leq 10^4$     |             |    ^     |\n|    $5$     |      $\\leq 10$      |  $\\leq 20$  |    $=3$     |\n|    $6$     |     $\\leq 100$      | $\\leq 10^4$ |    ^     |\n|    $7$     |     $\\leq 10^3$     |             |    ^     |\n|    $8$     |     $\\leq 10^4$     |             |    ^     |\n|    $9$     |      $\\leq 10$      |  $\\leq 20$  | $\\leq 100$  |\n|    $10$    |     $\\leq 100$      | $\\leq 10^4$ | ^  |\n|    $11$    |     $\\leq 10^3$     |             | $\\leq 10^3$ |\n|    $12$    |     $\\leq 10^4$     |             |             |\n|    $13$    |     $\\leq 10^5$     | $\\leq 10^8$ | $\\leq 100$  |\n|    $14$    | $\\leq 2\\times 10^5$ |             | $\\leq 10^3$ |\n|    $15$    | $\\leq 5\\times10^5$  |             |             |\n|    $16$    |     $\\leq 10^6$     | $\\leq 10^8$ | $\\leq 100$  |\n|    $17$    | $\\leq 2\\times 10^6$ |             | $\\leq 10^3$ |\n|    $18$    | $\\leq 5\\times 10^6$ |             |             |\n|    $19$    |     $\\leq 10^7$     | $\\leq 10^8$ |    $100$    |\n|    $20$    | $\\leq 2\\times10^7$  |             | $\\leq 10^3$ |\n|    $21$    | ^  |             |             |\n|    $22$    |     $\\leq 10^8$     | $\\leq 10^8$ |             |\n|    $23$    |     ^     | ^ |             |\n|  $24,25$   |                     |             |             |\n\n \n### 提示\n\n这部分将提供一个将分数化为对应的小数的方法，如果你已经熟悉这个方法，你不必阅读本提示。\n\n分数可以通过除法，用分子除以分母化为对应的小数。有些分数在除法过程中无法除尽,这样的分数在不断进行的除法过程中余数一定会重复出现。从商数的个位所对应的余数起，设第一次重复出现的余数前两次出现的位置所对应的商数位分别是小数点后第 $a$ 位和小数点后第 $b$ 位（特殊地：如果其中一个对应的商数位是个位，则认为 $a=0$；不妨设 $a<b$），则其循环部分可以用小数点后第 $a+1$ 位到小数点后第 $b$ 位的循环来表示。\n\n例如：在十进制下，将 $\\frac 5{11}$ 转化为小数时，个位开始的商数依次为 $4,5,4,\\ldots$，对应的余数分别为 $6,5,6,\\ldots$。余数第一次重复出现的位置是个位和小数点后第 $2$ 位,那么 $a=0,b=2$。\n\n$a=0,b=2$ 即其循环部分可以用小数点第 $1$ 位到第 $3$ 位来表示。表示为：$\\frac 5{11}=0.45454545\\ldots=0.\\dot4\\dot5$。\n\n在十进制下，将 $\\frac 16$ 转化为小数时,个位开始的商数依次为 $1,6,6,\\ldots$，对应的余数分别为 $4,4,4,\\ldots$。余数第一次重复出现的位置是小数点后第 $1$ 位和小数点后第 $2$ 位,即其循环部分可以用小数点后第 $2$ 位来表示。表示为：$\\frac 16=0.1666……=0.1\\dot6$。\n\n需要注意的是：商数重复出现并不代表进入了循环节。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2016] The Beauty of Cycles", "background": "", "description": "Niuniu (Niúniú) is a high school student who loves algorithm design. In his algorithms, he often performs computations with numbers that have fractional parts. Niuniu considers a number beautiful if, in base $k$, its fractional part is purely repeating. Now, given decimal numbers $n$ and $m$, he wants to know: in base $k$, how many numerically distinct purely repeating fractions can be written as a fraction $\\frac x y$, where $1 \\leq x \\leq n$, $1 \\leq y \\leq m$, and $x, y$ are integers. A number is purely repeating if and only if it can be written in the following form:\n\n$$a.\\dot{c_1} c_2 c_3 \\dots c_{p - 1} \\dot{c_p}$$\n\nHere, $a$ is an integer, $p \\geq 1$; for $1 \\leq i \\leq p$, $c_i$ is a single digit in base $k$.\n\nFor example, in base 10, $0.45454545... = 0.\\dot {4} \\dot {5}$ is purely repeating; it can be represented by fractions such as $\\frac {5}{11}$ or $\\frac{10}{22}$. In base 10, $0.1666666... = 0.1\\dot6$ is not purely repeating; it can be represented by $\\frac 1 6$. Note that we consider an integer to be purely repeating, because its fractional part can be represented as a repeating $0$ or a repeating $k - 1$; however, a finite fraction with a nonzero fractional part is not purely repeating.", "inputFormat": "One line containing three decimal integers $N, M, K$ as described.", "outputFormat": "Output a single integer on one line, the number of beautiful numbers that satisfy the conditions.", "hint": "### Sample Explanation\n\nThe numbers that satisfy the conditions are:\n\n$\\frac 1 1 = 1.0000...$\n\n$\\frac 1 3 = 0.3333...$\n\n$\\frac 2 1 = 2.0000...$\n\n$\\frac 2 3 = 0.6666...$\n\nAlthough $\\frac 1 1$ and $\\frac 2 2$ are both purely repeating decimals, they are equal, so they are counted only once; similarly, $\\frac 1 3$ and $\\frac 2 6$ are counted only once.\n\n### Constraints\n\nFor all test points, it is guaranteed that $1 \\leq n \\leq 10^9$, $1 \\leq m \\leq 10^9$, $2 \\leq k \\leq 2 \\times 10^3$.\n\nFor each test point, the following constraints hold (a blank entry means no special constraint):\n\n::cute-table{tuack}\n\n| Test point ID |         $n$         |     $m$     |     $k$     |\n| :-----------: | :-----------------: | :---------: | :---------: |\n|      $1$      |      $\\leq 10$      |  $\\leq 20$  |    $=2$     |\n|      $2$      |     $\\leq 100$      | $\\leq 10^4$ |    ^     |\n|      $3$      |     $\\leq 10^3$     |             |    ^     |\n|      $4$      |     $\\leq 10^4$     |             |    ^     |\n|      $5$      |      $\\leq 10$      |  $\\leq 20$  |    $=3$     |\n|      $6$      |     $\\leq 100$      | $\\leq 10^4$ |    ^     |\n|      $7$      |     $\\leq 10^3$     |             |    ^     |\n|      $8$      |     $\\leq 10^4$     |             |    ^     |\n|      $9$      |      $\\leq 10$      |  $\\leq 20$  | $\\leq 100$  |\n|     $10$      |     $\\leq 100$      | $\\leq 10^4$ | ^  |\n|     $11$      |     $\\leq 10^3$     |             | $\\leq 10^3$ |\n|     $12$      |     $\\leq 10^4$     |             |             |\n|     $13$      |     $\\leq 10^5$     | $\\leq 10^8$ | $\\leq 100$  |\n|     $14$      | $\\leq 2\\times 10^5$ |             | $\\leq 10^3$ |\n|     $15$      | $\\leq 5\\times10^5$  |             |             |\n|     $16$      |     $\\leq 10^6$     | $\\leq 10^8$ | $\\leq 100$  |\n|     $17$      | $\\leq 2\\times 10^6$ |             | $\\leq 10^3$ |\n|     $18$      | $\\leq 5\\times 10^6$ |             |             |\n|     $19$      |     $\\leq 10^7$     | $\\leq 10^8$ |    $100$    |\n|     $20$      | $\\leq 2\\times10^7$  |             | $\\leq 10^3$ |\n|     $21$      | ^  |             |             |\n|     $22$      |     $\\leq 10^8$     | $\\leq 10^8$ |             |\n|     $23$      |     ^     | ^ |             |\n|   $24,25$     |                     |             |             |\n\n### Hint\n\nThis section provides a method to convert a fraction into its corresponding decimal expansion. If you are already familiar with this method, you do not need to read this part.\n\nA fraction can be converted to its corresponding decimal by division, dividing the numerator by the denominator. For some fractions, the division does not terminate; in such cases, during the ongoing division the remainder must eventually repeat. Starting from the remainder corresponding to the ones place of the quotient, suppose that for the first remainder to repeat, the positions of its two occurrences correspond to the $a$-th and $b$-th digits after the decimal point in the quotient (special case: if one of them corresponds to the ones place, take $a = 0$; assume $a < b$). Then its repeating part can be represented by the cycle from the $(a + 1)$-th digit to the $b$-th digit after the decimal point.\n\nFor example: in base 10, when converting $\\frac 5 {11}$ to a decimal, the quotient digits starting from the ones place are $4, 5, 4, \\ldots$, and the corresponding remainders are $6, 5, 6, \\ldots$. The positions of the first repeated remainder are the ones place and the $2$-nd digit after the decimal point, so $a = 0, b = 2$.\n\n$a = 0, b = 2$ means its repeating part can be represented by the cycle from the $1$-st to the $3$-rd digits after the decimal point. Thus: $\\frac 5 {11} = 0.45454545... = 0.\\dot4\\dot5$.\n\nIn base 10, when converting $\\frac 1 6$ to a decimal, the quotient digits starting from the ones place are $1, 6, 6, \\ldots$, and the corresponding remainders are $4, 4, 4, \\ldots$. The positions of the first repeated remainder are the $1$-st and $2$-nd digits after the decimal point, which means its repeating part can be represented by the $2$-nd digit after the decimal point. Thus: $\\frac 1 6 = 0.1666... = 0.1\\dot6$.\n\nNote: a repeated quotient digit does not necessarily indicate that the repeating cycle has begun.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2016] 循环之美", "background": "", "description": "牛牛是一个热爱算法设计的高中生。在他设计的算法中，常常会使用带小数的数进行计算。牛牛认为，如果在 $k$ 进制下，一个数的小数部分是纯循环的，那么它就是美的。现在，牛牛想知道：对于已知的十进制数 $n$ 和 $m$，在 $k$ 进制下，有多少个数值上互不相等的纯循环小数，可以用分数 $\\frac xy$ 表示,其中 $1≤x≤n,1≤y≤m$，且 $x,y$ 是整数。一个数是纯循环的，当且仅当其可以写成以下形式：\n\n$$a.\\dot{c_1} c_2 c_3 \\dots c_{p - 1} \\dot{c_p}$$\n\n其中，$a$ 是一个整数，$p≥1$；对于 $1≤i≤p$，$c_i$ 是 $k$ 进制下的一位数字。\n\n例如，在十进制下，$0.45454545……=0.\\dot {4} \\dot {5}$ 是纯循环的，它可以用 $\\frac {5}{11}$、$\\frac{10}{22}$ 等分数表示；在十进制下，$0.1666666……=0.1\\dot6$ 则不是纯循环的，它可以用 $\\frac 16$ 等分数表示。需要特别注意的是，我们认为一个整数是纯循环的，因为它的小数部分可以表示成 $0$ 的循环或是 $k-1$ 的循环；而一个小数部分非 $0$ 的有限小数不是纯循环的。", "inputFormat": "只有一行，包含三个十进制数 $N,M,K$ 意义如题所述。\n\n\n", "outputFormat": "一行一个整数，表示满足条件的美的数的个数。\n", "hint": "### 样例解释\n\n满足条件的数分别是：\n\n$\\frac 11=1.0000\\ldots$\n\n$\\frac 13=0.3333\\ldots$\n\n$\\frac 21=2.0000\\ldots$\n\n$\\frac 23=0.6666\\ldots$\n\n$\\frac 11$ 和 $\\frac 22$ 虽然都是纯循环小数，但因为它们相等，因此只计数一次；同样，$\\frac 13$ 和 $\\frac 26$ 也只计数一次。\n\n### 数据范围\n\n对于所有的测试点，保证 $1\\leq n\\leq 10^9$，$1\\leq m \\leq 10^9$，$2\\leq k \\leq 2\\times 10^3 $。\n\n对于每个测试点，有以下约束（其中留空的表示没有特殊的约束）：\n\n::cute-table{tuack}\n\n| 测试点编号 |         $n$         |     $m$     |     $k$     |\n| :--------: | :-----------------: | :---------: | :---------: |\n|    $1$     |      $\\leq 10$      |  $\\leq 20$  |    $=2$     |\n|    $2$     |     $\\leq 100$      | $\\leq 10^4$ |    ^     |\n|    $3$     |     $\\leq 10^3$     |             |    ^     |\n|    $4$     |     $\\leq 10^4$     |             |    ^     |\n|    $5$     |      $\\leq 10$      |  $\\leq 20$  |    $=3$     |\n|    $6$     |     $\\leq 100$      | $\\leq 10^4$ |    ^     |\n|    $7$     |     $\\leq 10^3$     |             |    ^     |\n|    $8$     |     $\\leq 10^4$     |             |    ^     |\n|    $9$     |      $\\leq 10$      |  $\\leq 20$  | $\\leq 100$  |\n|    $10$    |     $\\leq 100$      | $\\leq 10^4$ | ^  |\n|    $11$    |     $\\leq 10^3$     |             | $\\leq 10^3$ |\n|    $12$    |     $\\leq 10^4$     |             |             |\n|    $13$    |     $\\leq 10^5$     | $\\leq 10^8$ | $\\leq 100$  |\n|    $14$    | $\\leq 2\\times 10^5$ |             | $\\leq 10^3$ |\n|    $15$    | $\\leq 5\\times10^5$  |             |             |\n|    $16$    |     $\\leq 10^6$     | $\\leq 10^8$ | $\\leq 100$  |\n|    $17$    | $\\leq 2\\times 10^6$ |             | $\\leq 10^3$ |\n|    $18$    | $\\leq 5\\times 10^6$ |             |             |\n|    $19$    |     $\\leq 10^7$     | $\\leq 10^8$ |    $100$    |\n|    $20$    | $\\leq 2\\times10^7$  |             | $\\leq 10^3$ |\n|    $21$    | ^  |             |             |\n|    $22$    |     $\\leq 10^8$     | $\\leq 10^8$ |             |\n|    $23$    |     ^     | ^ |             |\n|  $24,25$   |                     |             |             |\n\n \n### 提示\n\n这部分将提供一个将分数化为对应的小数的方法，如果你已经熟悉这个方法，你不必阅读本提示。\n\n分数可以通过除法，用分子除以分母化为对应的小数。有些分数在除法过程中无法除尽,这样的分数在不断进行的除法过程中余数一定会重复出现。从商数的个位所对应的余数起，设第一次重复出现的余数前两次出现的位置所对应的商数位分别是小数点后第 $a$ 位和小数点后第 $b$ 位（特殊地：如果其中一个对应的商数位是个位，则认为 $a=0$；不妨设 $a<b$），则其循环部分可以用小数点后第 $a+1$ 位到小数点后第 $b$ 位的循环来表示。\n\n例如：在十进制下，将 $\\frac 5{11}$ 转化为小数时，个位开始的商数依次为 $4,5,4,\\ldots$，对应的余数分别为 $6,5,6,\\ldots$。余数第一次重复出现的位置是个位和小数点后第 $2$ 位,那么 $a=0,b=2$。\n\n$a=0,b=2$ 即其循环部分可以用小数点第 $1$ 位到第 $3$ 位来表示。表示为：$\\frac 5{11}=0.45454545\\ldots=0.\\dot4\\dot5$。\n\n在十进制下，将 $\\frac 16$ 转化为小数时,个位开始的商数依次为 $1,6,6,\\ldots$，对应的余数分别为 $4,4,4,\\ldots$。余数第一次重复出现的位置是小数点后第 $1$ 位和小数点后第 $2$ 位,即其循环部分可以用小数点后第 $2$ 位来表示。表示为：$\\frac 16=0.1666……=0.1\\dot6$。\n\n需要注意的是：商数重复出现并不代表进入了循环节。", "locale": "zh-CN"}}}
{"pid": "P1588", "type": "P", "difficulty": 2, "samples": [["1 \n5 17", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2007", "USACO", "广度优先搜索 BFS", "队列"], "title": "[USACO07OPEN] Catch That Cow S", "background": null, "description": "FJ 丢了一头牛，决定将其找回。FJ 和牛位于数轴上，初始位置分别为 $x$ 和 $y$，牛保持不动。每次移动时，若 FJ 处于位置 $p$，他可移动至 $p + 1$、$p - 1$ 或 $2 \\times p$。计算 FJ 抓住牛所需的最少移动次数。", "inputFormat": "第一行为一个整数 $t\\ ( 1\\le t\\le 10)$，表示数据组数；\n\n接下来每行包含一个两个正整数 $x,y\\ (0<x,y \\le 10^5)$，分别表示 FJ 和牛的坐标。", "outputFormat": "对于每组数据，输出最少步数，每组数据间用换行隔开。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO07OPEN] Catch That Cow S", "background": "", "description": "FJ lost one of his cows and decided to get it back. FJ and the cow are on a number line with initial positions $x$ and $y$, and the cow stays put. In each move, if FJ is at position $p$, he can move to $p + 1$, $p - 1$, or $2 \\times p$. Compute the minimum number of moves needed for FJ to catch the cow.", "inputFormat": "The first line contains an integer $t$ ( $1 \\le t \\le 10$ ), the number of test cases.\n\nEach of the next $t$ lines contains two positive integers $x, y$ ( $0 < x, y \\le 10^5$ ), representing the coordinates of FJ and the cow, respectively.", "outputFormat": "For each test case, output the minimum number of moves.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO07OPEN] Catch That Cow S", "background": null, "description": "FJ 丢了一头牛，决定将其找回。FJ 和牛位于数轴上，初始位置分别为 $x$ 和 $y$，牛保持不动。每次移动时，若 FJ 处于位置 $p$，他可移动至 $p + 1$、$p - 1$ 或 $2 \\times p$。计算 FJ 抓住牛所需的最少移动次数。", "inputFormat": "第一行为一个整数 $t\\ ( 1\\le t\\le 10)$，表示数据组数；\n\n接下来每行包含一个两个正整数 $x,y\\ (0<x,y \\le 10^5)$，分别表示 FJ 和牛的坐标。", "outputFormat": "对于每组数据，输出最少步数，每组数据间用换行隔开。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1589", "type": "P", "difficulty": 2, "samples": [["3 3\n1 6\n13 17\n8 12", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "贪心"], "title": "泥泞路", "background": "", "description": "暴雨过后，FJ 的农场到镇上的公路上有一些泥泞路，他有若干块长度为 $L$ 的木板可以铺在这些泥泞路上，问他至少需要多少块木板，才能把所有的泥泞路覆盖住。", "inputFormat": "第一行为正整数 $n$ 和 $L$，分别表示有多少段泥泞路和木板的长度；\n\n接下来 $n$ 行，每一行两个整数 $s$ 和 $e$，表示每一段泥泞路的起点和终点。", "outputFormat": "仅一个正整数，表示木板数。\n", "hint": "对于 $100 \\%$ 的数据，$n,L \\leq 10000$，$s \\leq e \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Muddy Road", "background": "", "description": "After a heavy rain, there are some muddy segments on the road from FJ's farm to the town. He has several planks, each of length $L$, that can be laid over these muddy segments. Find the minimum number of planks required to cover all the muddy segments.", "inputFormat": "The first line contains positive integers $n$ and $L$, representing the number of muddy segments and the length of a plank.\n\nThe next $n$ lines each contain two integers $s$ and $e$, representing the start and end of a muddy segment.", "outputFormat": "A single positive integer, the number of planks.", "hint": "For $100\\%$ of the testdata, $n,L \\leq 10000$, $s \\leq e \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "泥泞路", "background": "", "description": "暴雨过后，FJ 的农场到镇上的公路上有一些泥泞路，他有若干块长度为 $L$ 的木板可以铺在这些泥泞路上，问他至少需要多少块木板，才能把所有的泥泞路覆盖住。", "inputFormat": "第一行为正整数 $n$ 和 $L$，分别表示有多少段泥泞路和木板的长度；\n\n接下来 $n$ 行，每一行两个整数 $s$ 和 $e$，表示每一段泥泞路的起点和终点。", "outputFormat": "仅一个正整数，表示木板数。\n", "hint": "对于 $100 \\%$ 的数据，$n,L \\leq 10000$，$s \\leq e \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1590", "type": "P", "difficulty": 3, "samples": [["2\n10\n20", "9\n18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "数学", "进制"], "title": "失踪的7", "background": null, "description": "远古的 Pascal 人也使用阿拉伯数字来进行计数，但是他们又不喜欢使用 $7$ ，因为他们认为 $7$ 是一个不吉祥的数字，所以 Pascal 数字 $8$ 其实表示的是自然数中的 $7$，$18$ 表示的是自然数中的 $16$ 。请计算，在正整数 $n$ 范围以内包含有多少个 Pascal 数字。", "inputFormat": "第一行为正整数 $t$，接下来 $t$ 行，每行一个正整数 $n$，且保证输入的 $n$ 是 Pascal 数字", "outputFormat": "对于每个正整数 $n$，输出 $n$ 以内的 Pascal 数的个数。", "hint": "对于所有数据，$1 \\leq t \\leq 10000$，$1 \\leq n \\leq 2^{32}-1$。", "locale": "zh-CN", "translations": {"en": {"title": "The Missing 7", "background": "", "description": "The ancient Pascal people also used Arabic numerals to count, but they disliked using $7$ because they considered $7$ an unlucky number. Therefore, Pascal number $8$ actually represents $7$ in the natural numbers, and $18$ represents $16$. Please compute how many Pascal numbers are contained within the range of positive integers up to $n$.", "inputFormat": "The first line contains a positive integer $t$. Then follow $t$ lines, each containing a positive integer $n$, and it is guaranteed that the input $n$ is a Pascal number.", "outputFormat": "For each positive integer $n$, output the number of Pascal numbers not exceeding $n$.", "hint": "For all testdata, $1 \\leq t \\leq 10000$, $1 \\leq n \\leq 2^{32} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "失踪的7", "background": null, "description": "远古的 Pascal 人也使用阿拉伯数字来进行计数，但是他们又不喜欢使用 $7$ ，因为他们认为 $7$ 是一个不吉祥的数字，所以 Pascal 数字 $8$ 其实表示的是自然数中的 $7$，$18$ 表示的是自然数中的 $16$ 。请计算，在正整数 $n$ 范围以内包含有多少个 Pascal 数字。", "inputFormat": "第一行为正整数 $t$，接下来 $t$ 行，每行一个正整数 $n$，且保证输入的 $n$ 是 Pascal 数字", "outputFormat": "对于每个正整数 $n$，输出 $n$ 以内的 Pascal 数的个数。", "hint": "对于所有数据，$1 \\leq t \\leq 10000$，$1 \\leq n \\leq 2^{32}-1$。", "locale": "zh-CN"}}}
{"pid": "P1591", "type": "P", "difficulty": 2, "samples": [["2\n5 2\n7 0", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度"], "title": "阶乘数码", "background": "", "description": "求 $n!$ 中某个数码出现的次数。\n", "inputFormat": "第一行为 $t(t \\leq 10)$，表示数据组数。接下来 $t$ 行，每行一个正整数 $n(n \\leq 1000)$ 和数码 $a$。\n", "outputFormat": "对于每组数据，输出一个整数，表示 $n!$ 中 $a$ 出现的次数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Digit Count in Factorial", "background": "", "description": "Find how many times a certain digit appears in $n!$.", "inputFormat": "The first line contains $t$ ($t \\leq 10$), indicating the number of test cases.  \nEach of the next $t$ lines contains a positive integer $n$ ($n \\leq 1000$) and a digit $a$.", "outputFormat": "For each test case, output a single integer, the number of times $a$ appears in $n!$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "阶乘数码", "background": "", "description": "求 $n!$ 中某个数码出现的次数。\n", "inputFormat": "第一行为 $t(t \\leq 10)$，表示数据组数。接下来 $t$ 行，每行一个正整数 $n(n \\leq 1000)$ 和数码 $a$。\n", "outputFormat": "对于每组数据，输出一个整数，表示 $n!$ 中 $a$ 出现的次数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1592", "type": "P", "difficulty": 3, "samples": [["10 5", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "互质", "background": "", "description": "输入两个正整数 $n$ 和 $k$，求与 $n$ 互质的第 $k$ 个正整数。", "inputFormat": "仅一行，为两个正整数 $n$ 和 $k$。", "outputFormat": "一个正整数，表示与 $n$ 互质的第 $k$ 个正整数。", "hint": "#### 数据规模与约定\n\n对于所有的数据，保证 $1 \\leq n \\le 10^6$，$1 \\leq k\\le 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "Coprime", "background": "", "description": "Given two positive integers $n$ and $k$, find the $k$-th positive integer that is coprime to $n$.", "inputFormat": "A single line containing two positive integers $n$ and $k$.", "outputFormat": "A single positive integer, which is the $k$-th positive integer that is coprime to $n$.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq n \\leq 10^6$, $1 \\leq k \\leq 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "互质", "background": "", "description": "输入两个正整数 $n$ 和 $k$，求与 $n$ 互质的第 $k$ 个正整数。", "inputFormat": "仅一行，为两个正整数 $n$ 和 $k$。", "outputFormat": "一个正整数，表示与 $n$ 互质的第 $k$ 个正整数。", "hint": "#### 数据规模与约定\n\n对于所有的数据，保证 $1 \\leq n \\le 10^6$，$1 \\leq k\\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P1593", "type": "P", "difficulty": 4, "samples": [["2 3", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学"], "title": "因子和", "background": "", "description": "输入两个整数 $a$ 和 $b$，求 $a^b$ 的因子和。\n\n由于结果太大，只要输出它对 $9901$ 取模的结果。", "inputFormat": "仅一行，为两个整数 $a$ 和 $b$。\n", "outputFormat": "输出一行一个整数表示答案对 $9901$ 取模的结果。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq a \\leq 5 \\times 10^7$，$0 \\leq b \\leq 5 \\times 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "Sum of Divisors", "background": "", "description": "Given two integers $a$ and $b$, compute the sum of divisors of $a^b$.\n\nSince the result can be very large, output it modulo $9901$.", "inputFormat": "A single line containing two integers $a$ and $b$.", "outputFormat": "Output a single line with one integer, the answer modulo $9901$.", "hint": "#### Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq a \\leq 5 \\times 10^7$, $0 \\leq b \\leq 5 \\times 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "因子和", "background": "", "description": "输入两个整数 $a$ 和 $b$，求 $a^b$ 的因子和。\n\n由于结果太大，只要输出它对 $9901$ 取模的结果。", "inputFormat": "仅一行，为两个整数 $a$ 和 $b$。\n", "outputFormat": "输出一行一个整数表示答案对 $9901$ 取模的结果。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq a \\leq 5 \\times 10^7$，$0 \\leq b \\leq 5 \\times 10^7$。", "locale": "zh-CN"}}}
{"pid": "P1594", "type": "P", "difficulty": 3, "samples": [["100 5 10\n40 25\n50 20\n50 20\n70 10\n12 50\n9 70\n49 30\n38 25\n27 50\n19 70", "75.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "护卫队", "background": null, "description": "护卫车队在一条单行的街道前排成一队，前面河上是一座单行的桥。因为街道是一条单行道，所以任何车辆都不能超车。桥能承受一个给定的最大承载量。为了控制桥上的交通，桥两边各站一个指挥员。护卫车队被分成几个组，每组中的车辆都能同时通过该桥。当一组车队达到了桥的另一端，该端的指挥员就用电话通知另一端的指挥员，这样下一组车队才能开始通过该桥。每辆车的重量是已知的。任何一组车队的重量之和不能超过桥的最大承重量。被分在同一组的每一辆车都以其最快的速度通过该桥。一组车队通过该桥的时间是用该车队中速度最慢的车通过该桥所需的时间来表示的。问题要求计算出全部护卫车队通过该桥所需的最短时间值。", "inputFormat": "第一行包含三个整数，第一个整数表示该桥所能承受的最大载重量（用吨表示）；第二个整数表示该桥长度（用千米表示）；第三个整数表示该护卫队中车辆的总数（$n\\lt 1000$）。接下来的几行中，每行包含两个正整数 $W$ 和 $S$（用空格隔开），$W$ 表示该车的重量（用吨表示），$S$ 表示该车过桥能达到的最快速度（用千米/小时表示）。车子的重量和速度是按车子排队等候时的顺序给出的。", "outputFormat": "输出文件应该是一个实数，四舍五入精确到小数点后1位，表示整个护卫车队通过该桥所需的最短时间（用分钟表示）。", "hint": "数据保证题目中所有输入的数都在 $[1,10^{10}]$ 以内。", "locale": "zh-CN", "translations": {"en": {"title": "Escort Convoy", "background": "", "description": "An escort convoy lines up on a one-way street approaching a one-lane bridge over a river. Because the street is one-way, no vehicle can overtake another. The bridge can bear a given maximum load. To control traffic on the bridge, there is a dispatcher at each end. The convoy is divided into several groups, and all vehicles in the same group can enter the bridge at the same time. When a group reaches the other end of the bridge, the dispatcher at that end phones the dispatcher at the starting end so that the next group may begin to cross. Each vehicle’s weight is known. The total weight of any group must not exceed the bridge’s maximum load. Every vehicle in the same group crosses at its own top speed. The time for a group to cross the bridge is determined by the time needed for the slowest vehicle in that group to cross. The task is to compute the minimum total time for the entire convoy to cross the bridge.", "inputFormat": "The first line contains three integers: the bridge’s maximum load (in tons), the bridge length (in kilometers), and the total number of vehicles in the convoy (with $n \\lt 1000$). The following lines each contain two positive integers $W$ and $S$ (separated by a space), where $W$ is the vehicle’s weight (in tons) and $S$ is its top speed for crossing the bridge (in kilometers per hour). The weights and speeds are given in the order the vehicles are queued.", "outputFormat": "Output a real number, rounded to 1 decimal place, representing the minimum total time for the entire convoy to cross the bridge (in minutes).", "hint": "The testdata guarantees that all input numbers are within $[1, 10^{10}]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "护卫队", "background": null, "description": "护卫车队在一条单行的街道前排成一队，前面河上是一座单行的桥。因为街道是一条单行道，所以任何车辆都不能超车。桥能承受一个给定的最大承载量。为了控制桥上的交通，桥两边各站一个指挥员。护卫车队被分成几个组，每组中的车辆都能同时通过该桥。当一组车队达到了桥的另一端，该端的指挥员就用电话通知另一端的指挥员，这样下一组车队才能开始通过该桥。每辆车的重量是已知的。任何一组车队的重量之和不能超过桥的最大承重量。被分在同一组的每一辆车都以其最快的速度通过该桥。一组车队通过该桥的时间是用该车队中速度最慢的车通过该桥所需的时间来表示的。问题要求计算出全部护卫车队通过该桥所需的最短时间值。", "inputFormat": "第一行包含三个整数，第一个整数表示该桥所能承受的最大载重量（用吨表示）；第二个整数表示该桥长度（用千米表示）；第三个整数表示该护卫队中车辆的总数（$n\\lt 1000$）。接下来的几行中，每行包含两个正整数 $W$ 和 $S$（用空格隔开），$W$ 表示该车的重量（用吨表示），$S$ 表示该车过桥能达到的最快速度（用千米/小时表示）。车子的重量和速度是按车子排队等候时的顺序给出的。", "outputFormat": "输出文件应该是一个实数，四舍五入精确到小数点后1位，表示整个护卫车队通过该桥所需的最短时间（用分钟表示）。", "hint": "数据保证题目中所有输入的数都在 $[1,10^{10}]$ 以内。", "locale": "zh-CN"}}}
{"pid": "P1595", "type": "P", "difficulty": 2, "samples": [["2", "1"], ["3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递推", "枚举", "容斥原理"], "title": "信封问题", "background": "", "description": "某人写了 $n$ 封信和 $n$ 个信封，如果所有的信都装错了信封。求所有信都装错信封共有多少种不同情况。", "inputFormat": "一个信封数 $n$，保证 $n \\le 20$。", "outputFormat": "一个整数，代表有多少种情况。", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Envelope Problem", "background": "", "description": "Someone writes $n$ letters and has $n$ envelopes. If all letters are put into the wrong envelopes, how many different ways are there in total?", "inputFormat": "A single integer $n$, the number of envelopes, with $n \\le 20$.", "outputFormat": "A single integer representing the number of ways.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "信封问题", "background": "", "description": "某人写了 $n$ 封信和 $n$ 个信封，如果所有的信都装错了信封。求所有信都装错信封共有多少种不同情况。", "inputFormat": "一个信封数 $n$，保证 $n \\le 20$。", "outputFormat": "一个整数，代表有多少种情况。", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 20$。", "locale": "zh-CN"}}}
{"pid": "P1596", "type": "P", "difficulty": 2, "samples": [["10 12\nW........WW.\n.WWW.....WWW\n....WW...WW.\n.........WW.\n.........W..\n..W......W..\n.W.W.....WW.\nW.W.W.....W.\n.W.W......W.\n..W.......W.\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "2010", "USACO", "深度优先搜索 DFS", "连通块"], "title": "[USACO10OCT] Lake Counting S", "background": "", "description": "Due to recent rains, water has pooled in various places in Farmer John's field, which is represented by a rectangle of N x M (1 <= N <= 100; 1 <= M <= 100) squares. Each square contains either water ('W') or dry land ('.'). Farmer John would like to figure out how many ponds have formed in his field. A pond is a connected set of squares with water in them, where a square is considered adjacent to all eight of its neighbors. Given a diagram of Farmer John's field, determine how many ponds he has.\n\n\n\n\n", "inputFormat": "Line 1: Two space-separated integers: N and M \\* Lines 2..N+1: M characters per line representing one row of Farmer John's field. Each character is either 'W' or '.'. The characters do not have spaces between them.\n\n\n", "outputFormat": "Line 1: The number of ponds in Farmer John's field.\n\n", "hint": "OUTPUT DETAILS: There are three ponds: one in the upper left, one in the lower left, and one along the right side.\n", "locale": "en", "translations": {"en": {"title": "[USACO10OCT] Lake Counting S", "background": "", "description": "Due to recent rains, water has pooled in various places in Farmer John's field, which is represented by a rectangle of N x M (1 <= N <= 100; 1 <= M <= 100) squares. Each square contains either water ('W') or dry land ('.'). Farmer John would like to figure out how many ponds have formed in his field. A pond is a connected set of squares with water in them, where a square is considered adjacent to all eight of its neighbors. Given a diagram of Farmer John's field, determine how many ponds he has.\n\n\n\n\n", "inputFormat": "Line 1: Two space-separated integers: N and M \\* Lines 2..N+1: M characters per line representing one row of Farmer John's field. Each character is either 'W' or '.'. The characters do not have spaces between them.\n\n\n", "outputFormat": "Line 1: The number of ponds in Farmer John's field.\n\n", "hint": "OUTPUT DETAILS: There are three ponds: one in the upper left, one in the lower left, and one along the right side.\n", "locale": "en"}, "zh-CN": {"title": "[USACO10OCT] Lake Counting S", "background": null, "description": "由于最近的降雨，水在农夫约翰的田地里积聚了。田地可以表示为一个 $N \\times M$ 的矩形（$1 \\leq N \\leq 100$；$1 \\leq M \\leq 100$）。每个方格中要么是水（`W`），要么是干地（`.`）。农夫约翰想要弄清楚他的田地里形成了多少个水塘。一个水塘是由连通的水方格组成的，其中一个方格被认为与它的八个邻居相邻。给定农夫约翰田地的示意图，确定他有多少个水塘。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数：$N$ 和 $M$。\n\n第 $2$ 行到第 $N+1$ 行：每行 $M$ 个字符，表示农夫约翰田地的一行。\n\n每个字符要么是 `W`，要么是 `.`。\n\n字符之间没有空格。", "outputFormat": "第 $1$ 行：农夫约翰田地中的水塘数量。", "hint": "输出详情：共有三个水塘：一个在左上角，一个在左下角，还有一个沿着右侧。\n\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P1597", "type": "P", "difficulty": 1, "samples": [["a:=3;b:=4;c:=5;", "3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "语句解析", "background": "木有背景……\n", "description": "一串长度不超过 $255$ 的 PASCAL 语言代码，只有 $a,b,c$ 三个变量，而且只有赋值语句，赋值只能是一个一位的数字或一个变量，每条赋值语句的格式是 `[变量]:=[变量或一位整数];`。未赋值的变量值为 $0$ 输出 $a,b,c$ 的值。", "inputFormat": "一串符合语法的 PASCAL 语言，只有 $a,b,c$ 三个变量，而且只有赋值语句，赋值只能是一个一位的数字或一个变量，未赋值的变量值为 $0$。\n", "outputFormat": "输出 $a,b,c$ 最终的值。\n", "hint": "输入的 PASCAL 语言长度不超过 $255$。", "locale": "zh-CN", "translations": {"en": {"title": "Statement Parsing", "background": "No background.", "description": "A PASCAL code string of length not exceeding $255$, containing only the three variables a, b, c and only assignment statements. The right-hand side of an assignment can only be a single-digit number or a variable. Each assignment statement has the format \"[variable] := [variable or single-digit integer];\". Unassigned variables have value $0$. Output the values of a, b, c.", "inputFormat": "A string of PASCAL code that conforms to the above constraints, using only variables a, b, c and only assignment statements, where the right-hand side is either a single-digit integer or a variable. Unassigned variables have value $0$.", "outputFormat": "Output the final values of a, b, c.", "hint": "The length of the input PASCAL code does not exceed $255$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "语句解析", "background": "木有背景……\n", "description": "一串长度不超过 $255$ 的 PASCAL 语言代码，只有 $a,b,c$ 三个变量，而且只有赋值语句，赋值只能是一个一位的数字或一个变量，每条赋值语句的格式是 `[变量]:=[变量或一位整数];`。未赋值的变量值为 $0$ 输出 $a,b,c$ 的值。", "inputFormat": "一串符合语法的 PASCAL 语言，只有 $a,b,c$ 三个变量，而且只有赋值语句，赋值只能是一个一位的数字或一个变量，未赋值的变量值为 $0$。\n", "outputFormat": "输出 $a,b,c$ 最终的值。\n", "hint": "输入的 PASCAL 语言长度不超过 $255$。", "locale": "zh-CN"}}}
{"pid": "P1598", "type": "P", "difficulty": 2, "samples": [["THE QUICK BROWN FOX JUMPED OVER THE LAZY DOG.\nTHIS IS AN EXAMPLE TO TEST FOR YOUR\nHISTOGRAM PROGRAM.\nHELLO!\n", "                            *\n                            *\n        *                   *\n        *                   *     *   *\n        *                   *     *   *\n*       *     *             *     *   *\n*       *     * *     * *   *     * * *\n*       *   * * *     * *   * *   * * * *\n*     * * * * * *     * * * * *   * * * *     * *\n* * * * * * * * * * * * * * * * * * * * * * * * * *\nA B C D E F G H I J K L M N O P Q R S T U V W X Y Z\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "2003", "USACO"], "title": "[USACO03FEB] 垂直柱状图 Vertical Histogram", "background": null, "description": "写一个程序从输入文件中去读取四行大写字母（全都是大写的，每行不超过 $100$ 个字符），然后用柱状图输出每个字符在输入文件中出现的次数。严格地按照输出样例来安排你的输出格式。", "inputFormat": "四行字符，由大写字母组成，每行不超过 $100$ 个字符。", "outputFormat": "由若干行组成，前几行由空格和星号组成，最后一行则是由空格和字母组成的。在任何一行末尾不要打印不需要的多余空格。不要打印任何空行。", "hint": "每行输出后面不允许出现多余的空格。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO03FEB] Vertical Histogram", "background": "", "description": "Write a program that reads four lines of uppercase letters from the input (all uppercase, each line has at most $100$ characters), and then outputs a histogram showing how many times each character appears in the input. Format your output exactly as in the sample output.", "inputFormat": "Four lines of characters consisting of uppercase letters, each line has at most $100$ characters.", "outputFormat": "Consists of several lines. The first lines are made up of spaces and asterisks, and the last line is made up of spaces and letters. Do not print any unnecessary trailing spaces at the end of any line. Do not print any blank lines.", "hint": "No trailing spaces are allowed at the end of each output line.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO03FEB] 垂直柱状图 Vertical Histogram", "background": null, "description": "写一个程序从输入文件中去读取四行大写字母（全都是大写的，每行不超过 $100$ 个字符），然后用柱状图输出每个字符在输入文件中出现的次数。严格地按照输出样例来安排你的输出格式。", "inputFormat": "四行字符，由大写字母组成，每行不超过 $100$ 个字符。", "outputFormat": "由若干行组成，前几行由空格和星号组成，最后一行则是由空格和字母组成的。在任何一行末尾不要打印不需要的多余空格。不要打印任何空行。", "hint": "每行输出后面不允许出现多余的空格。", "locale": "zh-CN"}}}
{"pid": "P1599", "type": "P", "difficulty": 2, "samples": [["5\n100\n-200\n250\n-200\n200", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2009", "USACO"], "title": "[USACO09MAR] 结算日 Payback B", "background": null, "description": "“不放债不借债”，贝西多么希望自己可以遵循这个忠告。她已经和她的 $N(1 \\leq N \\leq 100,000)$ 个朋友有了债务关系，或者借债了，或者放债了。她的 $N$ 个朋友依次标号为 $1\\dots N$。\n\n结算日终于来临了。她知道，朋友欠她的钱比她欠朋友的钱多。她的朋友们分布在一条直线上，第 $i$ 头奶牛站的位置距离谷仓 $i$ 米。贝西打算沿着这条直线行走，从欠她钱的奶牛手里收钱回来，并且还钱给她欠钱的奶牛。\n\n当她沿直线移动的时候，她可以要求任何欠她钱的奶牛还全部的钱。当她有足够的钱可以还清她的某个债，就可以把钱给对应的奶牛还清她的债。奶牛 $i$ 欠贝西 $D_i$ 元 $(-1,000 \\leq D_i \\leq 1,000,D_i \\neq 0)$，负数表示贝西欠奶牛 $i$ 钱。\n\n贝西从谷仓出发，位置为 $0$，初始贝西没有钱。贝西收回她的所有借债，并且还清她的欠债所需行走的最短距离是多少？\n\n注意：她必须在最后一头奶牛所在的位置，完成她的行走。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来第 $2 \\dots N+1$ 行，第 $i+1$ 行包含一个整数 $D_i$。", "outputFormat": "一个整数，贝西收回借债并且还清欠债，所需要行走的最短距离（单位为米）。", "hint": "输入解释：\n\n$3$ 头奶牛欠贝西钱；她欠 $2$ 头奶牛钱。当她完成结算，她将有 $150$ 元。\n\n输出解释：\n\n```plain\n谷仓  100  -200  250 -200  200\n |     |     |    |    |    |\n ***>**+**>*****>**+\n                   *            < 贝西有 350 元\n             -**<***\n             *                  < 贝西有 150 元\n             ***>****>****>**+\n                             *  < 贝西有 350 元\n                       -**<***\n                       *     \n                       ***>***  < 贝西结束她的行走，有 150 元\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO09MAR] Payback B (Settlement Day)", "background": "", "description": "“Neither a lender nor a borrower be”—how Bessie wishes she could follow this advice. She already has debt relationships with her $N (1 \\leq N \\leq 100,000)$ friends: she has either borrowed from them or lent to them. Her $N$ friends are labeled $1 \\dots N$ in order.\n\nSettlement day has finally arrived. She knows that the total money her friends owe her is greater than the total money she owes them. Her friends are positioned on a straight line: the $i$-th cow stands at distance $i$ meters from the barn. Bessie plans to walk along this line, collecting money from cows who owe her and repaying cows she owes.\n\nAs she moves along the line, she may demand that any cow who owes her repay in full. Whenever she has enough money to fully settle a particular debt she owes, she may pay that cow in full. Cow $i$ owes Bessie $D_i$ yuan $(-1,000 \\leq D_i \\leq 1,000,D_i \\neq 0)$; a negative value means Bessie owes cow $i$ money.\n\nBessie starts from the barn at position $0$ with no money. What is the minimum distance she must walk to collect all debts owed to her and pay off all debts she owes?\n\nNote: She must finish her walk at the position of the last cow.", "inputFormat": "The first line contains an integer $N$.\n\nLines $2 \\dots N+1$: the $(i+1)$-th line contains an integer $D_i$.", "outputFormat": "A single integer: the minimum distance (in meters) Bessie needs to walk to collect and settle all debts.", "hint": "Input explanation:\n\n$3$ cows owe Bessie money; she owes $2$ cows money. When she finishes settling, she will have $150$ yuan.\n\nOutput explanation:\n\n```plain\n谷仓  100  -200  250 -200  200\n |     |     |    |    |    |\n ***>**+**>*****>**+\n                   *            < 贝西有 350 元\n             -**<***\n             *                  < 贝西有 150 元\n             ***>****>****>**+\n                             *  < 贝西有 350 元\n                       -**<***\n                       *     \n                       ***>***  < 贝西结束她的行走，有 150 元\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO09MAR] 结算日 Payback B", "background": null, "description": "“不放债不借债”，贝西多么希望自己可以遵循这个忠告。她已经和她的 $N(1 \\leq N \\leq 100,000)$ 个朋友有了债务关系，或者借债了，或者放债了。她的 $N$ 个朋友依次标号为 $1\\dots N$。\n\n结算日终于来临了。她知道，朋友欠她的钱比她欠朋友的钱多。她的朋友们分布在一条直线上，第 $i$ 头奶牛站的位置距离谷仓 $i$ 米。贝西打算沿着这条直线行走，从欠她钱的奶牛手里收钱回来，并且还钱给她欠钱的奶牛。\n\n当她沿直线移动的时候，她可以要求任何欠她钱的奶牛还全部的钱。当她有足够的钱可以还清她的某个债，就可以把钱给对应的奶牛还清她的债。奶牛 $i$ 欠贝西 $D_i$ 元 $(-1,000 \\leq D_i \\leq 1,000,D_i \\neq 0)$，负数表示贝西欠奶牛 $i$ 钱。\n\n贝西从谷仓出发，位置为 $0$，初始贝西没有钱。贝西收回她的所有借债，并且还清她的欠债所需行走的最短距离是多少？\n\n注意：她必须在最后一头奶牛所在的位置，完成她的行走。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来第 $2 \\dots N+1$ 行，第 $i+1$ 行包含一个整数 $D_i$。", "outputFormat": "一个整数，贝西收回借债并且还清欠债，所需要行走的最短距离（单位为米）。", "hint": "输入解释：\n\n$3$ 头奶牛欠贝西钱；她欠 $2$ 头奶牛钱。当她完成结算，她将有 $150$ 元。\n\n输出解释：\n\n```plain\n谷仓  100  -200  250 -200  200\n |     |     |    |    |    |\n ***>**+**>*****>**+\n                   *            < 贝西有 350 元\n             -**<***\n             *                  < 贝西有 150 元\n             ***>****>****>**+\n                             *  < 贝西有 350 元\n                       -**<***\n                       *     \n                       ***>***  < 贝西结束她的行走，有 150 元\n```", "locale": "zh-CN"}}}
{"pid": "P1600", "type": "P", "difficulty": 6, "samples": [["6 3\n2 3\n1 2 \n1 4 \n4 5 \n4 6 \n0 2 5 1 2 3 \n1 5 \n1 3 \n2 6 ", "2 0 0 1 1 1 "], ["5 3 \n1 2 \n2 3 \n2 4 \n1 5 \n0 1 0 3 0 \n3 1 \n1 4\n5 5 ", "1 2 1 0 1 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "线段树", "树上启发式合并", "NOIP 提高组", "最近公共祖先 LCA", "树链剖分", "动态树 LCT", "ST 表", "差分", "线段树合并"], "title": "[NOIP 2016 提高组] 天天爱跑步", "background": "NOIP2016 提高组 D1T2", "description": "小 C 同学认为跑步非常有趣，于是决定制作一款叫做《天天爱跑步》的游戏。《天天爱跑步》是一个养成类游戏，需要玩家每天按时上线，完成打卡任务。\n\n这个游戏的地图可以看作一棵包含 $n$ 个结点和 $n-1$ 条边的树，每条边连接两个结点，且任意两个结点存在一条路径互相可达。树上结点编号为从 $1$ 到 $n$ 的连续正整数。\n\n现在有 $m$ 个玩家，第 $i$ 个玩家的起点为 $s_i$，终点为 $t_i$。每天打卡任务开始时，所有玩家在第 $0$ 秒同时从自己的起点出发，以每秒跑一条边的速度，不间断地沿着最短路径向着自己的终点跑去，跑到终点后该玩家就算完成了打卡任务。（由于地图是一棵树，所以每个人的路径是唯一的）\n\n小 C 想知道游戏的活跃度，所以在每个结点上都放置了一个观察员。在结点 $j$ 的观察员会选择在第 $w_j$ 秒观察玩家，一个玩家能被这个观察员观察到当且仅当该玩家在第 $w_j$ 秒也正好到达了结点 $j$。小 C 想知道每个观察员会观察到多少人?\n\n注意：我们认为一个玩家到达自己的终点后该玩家就会结束游戏，他不能等待一段时间后再被观察员观察到。即对于把结点 $j$ 作为终点的玩家：若他在第 $w_j$ 秒前到达终点，则在结点 $j$ 的观察员不能观察到该玩家；若他正好在第 $w_j$ 秒到达终点，则在结点 $j$ 的观察员可以观察到这个玩家。", "inputFormat": "第一行有两个整数 $n$ 和 $m$。其中 $n$ 代表树的结点数量，同时也是观察员的数量，$m$ 代表玩家的数量。\n\n接下来 $n-1$ 行每行两个整数 $u$ 和 $v$，表示结点 $u$ 到结点 $v$ 有一条边。\n\n接下来一行 $n$ 个整数，其中第 $j$ 个整数为 $w_j$，表示结点 $j$ 出现观察员的时间。\n\n接下来 $m$ 行，每行两个整数 $s_i$，和 $t_i$，表示一个玩家的起点和终点。\n\n对于所有的数据，保证 $1\\leq s_i,t_i\\leq n, 0\\leq w_j\\leq n$。", "outputFormat": "输出 $1$ 行 $n$ 个整数，第 $j$ 个整数表示结点 $j$ 的观察员可以观察到多少人。", "hint": "**样例 1 说明**\n\n对于 $1$ 号点，$w_i=0$，故只有起点为 $1$ 号点的玩家才会被观察到，所以玩家 $1$ 和玩家 $2$ 被观察到，共有 $2$ 人被观察到。\n\n对于 $2$ 号点，没有玩家在第 $2$ 秒时在此结点，共 $0$ 人被观察到。\n\n对于 $3$ 号点，没有玩家在第 $5$ 秒时在此结点，共 $0$ 人被观察到。\n\n对于 $4$ 号点，玩家 $1$ 被观察到，共 $1$ 人被观察到。\n\n对于 $5$ 号点，玩家 $1$ 被观察到，共 $1$ 人被观察到。\n\n对于 $6$ 号点，玩家 $3$ 被观察到，共 $1$ 人被观察到。\n\n**子任务**\n\n每个测试点的数据规模及特点如下表所示。\n\n提示：数据范围的个位上的数字可以帮助判断是哪一种数据类型。\n\n| 测试点编号 | $n=$ | $m=$ | 约定 |\n| :--------: | :----: | :----: | :----: |\n|     $1\\sim 2$      |  $991$   |  $991$   | 所有人的起点等于自己的终点，即 $\\forall i,\\ s_i=t_i$  |\n|     $3\\sim 4$      |  $992$   |  $992$   | 所有 $w_j=0$  |\n|     $5$      |  $993$   |  $993$   | 无  |\n|     $6\\sim 8$      |  $99994$   |  $99994$   | $\\forall i\\in[1,n-1]$，$i$ 与 $i+1$ 有边。即树退化成 $1,2,\\dots,n$ 按顺序连接的链  |\n|     $9\\sim 12$      |  $99995$   |  $99995$   | 所有 $s_i=1$  |\n|     $13\\sim 16$      |  $99996$   |  $99996$   | 所有 $t_i=1$  |\n|     $17\\sim 19$      |  $99997$   |  $99997$   | 无  |\n|     $20$      |  $299998$   |  $299998$   | 无  |\n\n\n\n**提示**\n\n（提示：由于原提示年代久远，不一定能完全反映现在的情况，现在已经对该提示做出了一定的修改，提示的原文可以在[该剪贴板](https://www.luogu.com.cn/paste/3fneb8m6)查看）\n\n在最终评测时，调用栈占用的空间大小不会有单独的限制，但在我们的工作环境中默认会有 $1 \\text{MiB}$ 的限制。 这可能会引起**函数调用层数较多时，程序发生栈溢出崩溃**，程序中**较深层数的递归**往往会导致这个问题。如果你的程序需要用到较大的栈空间，请务必注意该问题。\n\n我们可以使用一些方法修改调用栈的大小限制。\n\n- Linux\n\n我们可以在终端中输入下列命令：`ulimit -s 1048576`。此命令的意义是，将调用栈的大小限制修改为 $1048576\\text{KiB}=1 \\text{GiB}$。\n\n例如，对于如下程序 `sample.cpp`：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint f[1000005];\nvoid dfs(int a){\n\tif(a == 0){\n\t\tf[a] = 0;\n\t\treturn;\n\t}\n\tdfs(a - 1);\n\tf[a] = f[a - 1] + 1;\n}\nint main(){\n\tdfs(1000000);\n\treturn 0;\n}\n```\n\n将上述源代码用命令 `g++ sample.cpp -o sample` 编译为可执行文件 `sample` 后，使用 `./sample` 执行程序。\n\n如果在没有使用命令 `ulimit -s 1048576` 的情况下运行该程序，`sample` 会因为栈溢出而崩溃；如果使用了上述命令后运行该程序，该程序则不会崩溃。\n\n特别地，当你打开多个终端时，它们并不会共享该命令，你需要分别对它们运行该命令。\n\n请注意，调用栈占用的空间会计入总空间占用中，和程序其他部分占用的内存共同受到内存限制。\n\n- Windows\n\n如果你使用 Windows 下的 Dev-C++，请选择 `工具-编译选项` 并在如下区域填入以下命令 `-Wl,--stack=1073741824`，填入后注意确认“编译时加入以下命令的”的框是**已勾选**状态。\n\n此处 `1073741824` 的单位是 $\\text{B/Bytes}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z6mbzfqo.png)  ![](https://cdn.luogu.com.cn/upload/image_hosting/zvrzkyq5.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Senior] Love Running Everyday", "background": "NOIP 2016 Senior D1T2.", "description": "Student Xiao C thinks running is very interesting, so he decides to make a game called \"Love Running Everyday.\" \"Love Running Everyday\" is a nurturing-style game that requires players to log in on time every day to complete a check-in task.\n\nThe map in this game can be viewed as a tree with $n$ nodes and $n-1$ edges. Each edge connects two nodes, and there exists exactly one path between any two nodes. The nodes on the tree are numbered with consecutive positive integers from $1$ to $n$.\n\nThere are $m$ players. The $i$-th player starts at $s_i$ and ends at $t_i$. When the daily check-in task starts, all players simultaneously depart from their starting points at second $0$, moving at a speed of one edge per second, continuously along the shortest path toward their destination. Once a player reaches the destination, that player is considered to have completed the check-in task. (Since the map is a tree, each person's path is unique.)\n\nXiao C wants to know the game's activity level, so an observer is placed at every node. The observer at node $j$ chooses to observe players at second $w_j$. A player can be observed by this observer if and only if the player also arrives at node $j$ exactly at second $w_j$. Xiao C wants to know how many players each observer will observe.\n\nNote: We assume that once a player reaches the destination, the player finishes the game and cannot wait to be observed later. That is, for a player whose destination is node $j$: if the player reaches the destination before second $w_j$, then the observer at node $j$ cannot observe that player; if the player arrives at the destination exactly at second $w_j$, then the observer at node $j$ can observe that player.", "inputFormat": "The first line contains two integers $n$ and $m$. Here $n$ is the number of nodes in the tree and also the number of observers, and $m$ is the number of players.\n\nEach of the next $n-1$ lines contains two integers $u$ and $v$, indicating that there is an edge between node $u$ and node $v$.\n\nThe next line contains $n$ integers, where the $j$-th integer is $w_j$, meaning the observation time at node $j$.\n\nEach of the next $m$ lines contains two integers $s_i$ and $t_i$, representing a player's starting point and destination.\n\nFor all testdata, it is guaranteed that $1 \\leq s_i, t_i \\leq n$, $0 \\leq w_j \\leq n$.", "outputFormat": "Output one line with $n$ integers. The $j$-th integer indicates how many players can be observed by the observer at node $j$.", "hint": "Sample 1 Explanation.\n\n- For node $1$, $w_1 = 0$. Therefore, only players whose starting point is node $1$ will be observed. Players $1$ and $2$ are observed, for a total of $2$ players.\n- For node $2$, no player is at this node at second $2$, so $0$ players are observed.\n- For node $3$, no player is at this node at second $5$, so $0$ players are observed.\n- For node $4$, player $1$ is observed, so $1$ player is observed.\n- For node $5$, player $1$ is observed, so $1$ player is observed.\n- For node $6$, player $3$ is observed, so $1$ player is observed.\n\nSubtasks.\n\nThe size and characteristics of each testpoint are as follows. \n\nTip: The one's digit of the numbers in the constraints can help determine which type of data it is.\n\n| Testpoint ID | $n=$ | $m=$ | Convention |\n| :----------: | :--: | :--: | :--------: |\n| $1 \\sim 2$ | $991$ | $991$ | All players' starting points equal their own destinations, i.e., $\\forall i,\\ s_i=t_i$. |\n| $3 \\sim 4$ | $992$ | $992$ | All $w_j=0$. |\n| $5$ | $993$ | $993$ | None. |\n| $6 \\sim 8$ | $99994$ | $99994$ | $\\forall i \\in [1,n-1]$, there is an edge between $i$ and $i+1$. That is, the tree degenerates into a chain $1,2,\\dots,n$ connected in order. |\n| $9 \\sim 12$ | $99995$ | $99995$ | All $s_i=1$. |\n| $13 \\sim 16$ | $99996$ | $99996$ | All $t_i=1$. |\n| $17 \\sim 19$ | $99997$ | $99997$ | None. |\n| $20$ | $299998$ | $299998$ | None. |\n\nNotes.\n\n(Tip: Because the original note is old, it may not fully reflect the current situation. We have made some updates to this note. The original text can be viewed on [this clipboard](https://www.luogu.com.cn/paste/3fneb8m6).)\n\nIn the final evaluation, the stack size usage will not have a separate limit, but in our working environment there is a default limit of $1 \\text{MiB}$. This may cause a stack overflow crash when the number of function calls is large. Deep recursion in your program often leads to this problem. If your program needs a large stack, please pay close attention to this issue.\n\nWe can use some methods to change the stack size limit.\n\n- Linux\n\nWe can enter the following command in the terminal: `ulimit -s 1048576`. This command changes the stack size limit to $1048576\\text{KiB}=1 \\text{GiB}$.\n\nFor example, for the following program `sample.cpp`:\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint f[1000005];\nvoid dfs(int a){\n\tif(a == 0){\n\t\tf[a] = 0;\n\t\treturn;\n\t}\n\tdfs(a - 1);\n\tf[a] = f[a - 1] + 1;\n}\nint main(){\n\tdfs(1000000);\n\treturn 0;\n}\n```\n\nCompile the above source code with `g++ sample.cpp -o sample` into the executable `sample`, and run it using `./sample`.\n\nIf you run this program without using the command `ulimit -s 1048576`, `sample` will crash due to stack overflow; if you run it after using the above command, the program will not crash.\n\nIn particular, when you open multiple terminals, they do not share this setting. You need to run the command in each of them.\n\nPlease note that the stack usage is counted toward the total memory usage and is subject to the memory limit together with other parts of the program.\n\n- Windows\n\nIf you are using Dev-C++ on Windows, select `Tools - Compiler Options` and fill in the following command in the area as shown: `-Wl,--stack=1073741824`. After filling it in, make sure the box “Add the following commands when compiling” is checked.\n\nHere, `1073741824` is in units of $\\text{B/Bytes}$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z6mbzfqo.png)  ![](https://cdn.luogu.com.cn/upload/image_hosting/zvrzkyq5.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 提高组] 天天爱跑步", "background": "NOIP2016 提高组 D1T2", "description": "小 C 同学认为跑步非常有趣，于是决定制作一款叫做《天天爱跑步》的游戏。《天天爱跑步》是一个养成类游戏，需要玩家每天按时上线，完成打卡任务。\n\n这个游戏的地图可以看作一棵包含 $n$ 个结点和 $n-1$ 条边的树，每条边连接两个结点，且任意两个结点存在一条路径互相可达。树上结点编号为从 $1$ 到 $n$ 的连续正整数。\n\n现在有 $m$ 个玩家，第 $i$ 个玩家的起点为 $s_i$，终点为 $t_i$。每天打卡任务开始时，所有玩家在第 $0$ 秒同时从自己的起点出发，以每秒跑一条边的速度，不间断地沿着最短路径向着自己的终点跑去，跑到终点后该玩家就算完成了打卡任务。（由于地图是一棵树，所以每个人的路径是唯一的）\n\n小 C 想知道游戏的活跃度，所以在每个结点上都放置了一个观察员。在结点 $j$ 的观察员会选择在第 $w_j$ 秒观察玩家，一个玩家能被这个观察员观察到当且仅当该玩家在第 $w_j$ 秒也正好到达了结点 $j$。小 C 想知道每个观察员会观察到多少人?\n\n注意：我们认为一个玩家到达自己的终点后该玩家就会结束游戏，他不能等待一段时间后再被观察员观察到。即对于把结点 $j$ 作为终点的玩家：若他在第 $w_j$ 秒前到达终点，则在结点 $j$ 的观察员不能观察到该玩家；若他正好在第 $w_j$ 秒到达终点，则在结点 $j$ 的观察员可以观察到这个玩家。", "inputFormat": "第一行有两个整数 $n$ 和 $m$。其中 $n$ 代表树的结点数量，同时也是观察员的数量，$m$ 代表玩家的数量。\n\n接下来 $n-1$ 行每行两个整数 $u$ 和 $v$，表示结点 $u$ 到结点 $v$ 有一条边。\n\n接下来一行 $n$ 个整数，其中第 $j$ 个整数为 $w_j$，表示结点 $j$ 出现观察员的时间。\n\n接下来 $m$ 行，每行两个整数 $s_i$，和 $t_i$，表示一个玩家的起点和终点。\n\n对于所有的数据，保证 $1\\leq s_i,t_i\\leq n, 0\\leq w_j\\leq n$。", "outputFormat": "输出 $1$ 行 $n$ 个整数，第 $j$ 个整数表示结点 $j$ 的观察员可以观察到多少人。", "hint": "**样例 1 说明**\n\n对于 $1$ 号点，$w_i=0$，故只有起点为 $1$ 号点的玩家才会被观察到，所以玩家 $1$ 和玩家 $2$ 被观察到，共有 $2$ 人被观察到。\n\n对于 $2$ 号点，没有玩家在第 $2$ 秒时在此结点，共 $0$ 人被观察到。\n\n对于 $3$ 号点，没有玩家在第 $5$ 秒时在此结点，共 $0$ 人被观察到。\n\n对于 $4$ 号点，玩家 $1$ 被观察到，共 $1$ 人被观察到。\n\n对于 $5$ 号点，玩家 $1$ 被观察到，共 $1$ 人被观察到。\n\n对于 $6$ 号点，玩家 $3$ 被观察到，共 $1$ 人被观察到。\n\n**子任务**\n\n每个测试点的数据规模及特点如下表所示。\n\n提示：数据范围的个位上的数字可以帮助判断是哪一种数据类型。\n\n| 测试点编号 | $n=$ | $m=$ | 约定 |\n| :--------: | :----: | :----: | :----: |\n|     $1\\sim 2$      |  $991$   |  $991$   | 所有人的起点等于自己的终点，即 $\\forall i,\\ s_i=t_i$  |\n|     $3\\sim 4$      |  $992$   |  $992$   | 所有 $w_j=0$  |\n|     $5$      |  $993$   |  $993$   | 无  |\n|     $6\\sim 8$      |  $99994$   |  $99994$   | $\\forall i\\in[1,n-1]$，$i$ 与 $i+1$ 有边。即树退化成 $1,2,\\dots,n$ 按顺序连接的链  |\n|     $9\\sim 12$      |  $99995$   |  $99995$   | 所有 $s_i=1$  |\n|     $13\\sim 16$      |  $99996$   |  $99996$   | 所有 $t_i=1$  |\n|     $17\\sim 19$      |  $99997$   |  $99997$   | 无  |\n|     $20$      |  $299998$   |  $299998$   | 无  |\n\n\n\n**提示**\n\n（提示：由于原提示年代久远，不一定能完全反映现在的情况，现在已经对该提示做出了一定的修改，提示的原文可以在[该剪贴板](https://www.luogu.com.cn/paste/3fneb8m6)查看）\n\n在最终评测时，调用栈占用的空间大小不会有单独的限制，但在我们的工作环境中默认会有 $1 \\text{MiB}$ 的限制。 这可能会引起**函数调用层数较多时，程序发生栈溢出崩溃**，程序中**较深层数的递归**往往会导致这个问题。如果你的程序需要用到较大的栈空间，请务必注意该问题。\n\n我们可以使用一些方法修改调用栈的大小限制。\n\n- Linux\n\n我们可以在终端中输入下列命令：`ulimit -s 1048576`。此命令的意义是，将调用栈的大小限制修改为 $1048576\\text{KiB}=1 \\text{GiB}$。\n\n例如，对于如下程序 `sample.cpp`：\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint f[1000005];\nvoid dfs(int a){\n\tif(a == 0){\n\t\tf[a] = 0;\n\t\treturn;\n\t}\n\tdfs(a - 1);\n\tf[a] = f[a - 1] + 1;\n}\nint main(){\n\tdfs(1000000);\n\treturn 0;\n}\n```\n\n将上述源代码用命令 `g++ sample.cpp -o sample` 编译为可执行文件 `sample` 后，使用 `./sample` 执行程序。\n\n如果在没有使用命令 `ulimit -s 1048576` 的情况下运行该程序，`sample` 会因为栈溢出而崩溃；如果使用了上述命令后运行该程序，该程序则不会崩溃。\n\n特别地，当你打开多个终端时，它们并不会共享该命令，你需要分别对它们运行该命令。\n\n请注意，调用栈占用的空间会计入总空间占用中，和程序其他部分占用的内存共同受到内存限制。\n\n- Windows\n\n如果你使用 Windows 下的 Dev-C++，请选择 `工具-编译选项` 并在如下区域填入以下命令 `-Wl,--stack=1073741824`，填入后注意确认“编译时加入以下命令的”的框是**已勾选**状态。\n\n此处 `1073741824` 的单位是 $\\text{B/Bytes}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z6mbzfqo.png)  ![](https://cdn.luogu.com.cn/upload/image_hosting/zvrzkyq5.png)", "locale": "zh-CN"}}}
{"pid": "P1601", "type": "P", "difficulty": 2, "samples": [["1\n1", "2"], ["1001\n9099", "10100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "高精度"], "title": "高精度加法", "background": "本题是高精度加法的模板题。", "description": "给定两个非负整数 $a,b$，求它们的和。**不用考虑负数**。", "inputFormat": "输入共两行，每行一个非负整数，分别为 $a,b$。", "outputFormat": "输出一行一个非负整数，表示 $a+b$ 的值。", "hint": "对于 $20\\%$ 的测试数据，$a,b \\le 10^9$；  \n对于 $40\\%$ 的测试数据，$a,b \\le 10^{18}$；  \n对于 $100\\%$ 的测试数据，$0\\le a,b \\le 10^{500}$。", "locale": "zh-CN", "translations": {"en": {"title": "A+B Problem (High Precision)", "background": "", "description": "High-precision addition, equivalent to the A+B problem. **Do not consider negative numbers.**", "inputFormat": "Input consists of two lines. $a,b \\leq 10^{500}$.", "outputFormat": "Output a single line representing the value of $a+b$.", "hint": "For 20% of the testdata, $0\\le a,b \\le10^9$.\nFor 40% of the testdata, $0\\le a,b \\le10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高精度加法", "background": "本题是高精度加法的模板题。", "description": "给定两个非负整数 $a,b$，求它们的和。**不用考虑负数**。", "inputFormat": "输入共两行，每行一个非负整数，分别为 $a,b$。", "outputFormat": "输出一行一个非负整数，表示 $a+b$ 的值。", "hint": "对于 $20\\%$ 的测试数据，$a,b \\le 10^9$；  \n对于 $40\\%$ 的测试数据，$a,b \\le 10^{18}$；  \n对于 $100\\%$ 的测试数据，$0\\le a,b \\le 10^{500}$。", "locale": "zh-CN"}}}
{"pid": "P1602", "type": "P", "difficulty": 3, "samples": [["2 7\n", "1001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "搜索", "数学", "队列"], "title": "Sramoc 问题", "background": null, "description": "话说员工们整理好了筷子之后，就准备将快餐送出了，但是一看订单，都傻眼了：订单上没有留电话号码，只写了一个  $\\text{Sramoc}(k,m)$ 函数。\n\n这什么东西？什么意思？于是餐厅找来了资深顾问团的成员，YQ，SC，HQ，经过大量的查阅，大家获得了一些信息：\n\n> $\\text{Sramoc}(k,m)$ 表示用数字 $0,1,2,\\ldots,k-1$ 组成的正整数中能被 $m$ 整除的最小数。\n\n例如，$k=2,m=7$ 的时候，$\\text{Sramoc}(2,7)=1001$。自然电话号码就是 $1001$。\n\n为了尽快将快餐送出，电脑组的童鞋们埋头算起了这个齐葩的号码……", "inputFormat": "两个整数 $k,m$。", "outputFormat": "仅一行，那个电话号码（最小的数）。", "hint": "对于 $100\\%$ 的数据，$2\\le k\\le10$，$1\\le m\\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Sramoc Problem", "background": "", "description": "After the employees finished sorting the chopsticks, they were about to deliver the takeout, but when they checked the order, they were stunned: there was no phone number, only a function $\\text{Sramoc}(k,m)$ written down.\n\nWhat is this? What does it mean? So the restaurant called in members of the senior advisory group, YQ, SC, and HQ. After extensive research, they found some information:\n\n> $\\text{Sramoc}(k,m)$ denotes the smallest positive integer, composed of the digits $0,1,2,\\ldots,k-1$, that is divisible by $m$.\n\nFor example, when $k=2, m=7$, $\\text{Sramoc}(2,7)=1001$. Naturally, the phone number is $1001$.\n\nTo send out the takeout as quickly as possible, the computer team members buried their heads and started computing this peculiar number.", "inputFormat": "Two integers $k, m$.", "outputFormat": "A single line, that phone number (the smallest number).", "hint": "For $100\\%$ of the testdata, $2\\le k\\le 10$, $1\\le m\\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Sramoc 问题", "background": null, "description": "话说员工们整理好了筷子之后，就准备将快餐送出了，但是一看订单，都傻眼了：订单上没有留电话号码，只写了一个  $\\text{Sramoc}(k,m)$ 函数。\n\n这什么东西？什么意思？于是餐厅找来了资深顾问团的成员，YQ，SC，HQ，经过大量的查阅，大家获得了一些信息：\n\n> $\\text{Sramoc}(k,m)$ 表示用数字 $0,1,2,\\ldots,k-1$ 组成的正整数中能被 $m$ 整除的最小数。\n\n例如，$k=2,m=7$ 的时候，$\\text{Sramoc}(2,7)=1001$。自然电话号码就是 $1001$。\n\n为了尽快将快餐送出，电脑组的童鞋们埋头算起了这个齐葩的号码……", "inputFormat": "两个整数 $k,m$。", "outputFormat": "仅一行，那个电话号码（最小的数）。", "hint": "对于 $100\\%$ 的数据，$2\\le k\\le10$，$1\\le m\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1603", "type": "P", "difficulty": 2, "samples": [["Black Obama is two five zero .", "425"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "贪心", "洛谷原创", "排序"], "title": "斯诺登的密码", "background": "根据斯诺登事件出的一道水题\n\n// 数据已经修正 By absi2011 如果还有问题请联系我", "description": "2013 年 X 月 X 日，俄罗斯办理了斯诺登的护照，于是他混迹于一架开往委内瑞拉的飞机。但是，这件事情太不周密了，因为 FBI 的间谍早已获悉他的具体位置——但这不是最重要的——最重要的是如果要去委内瑞拉，那么就要经过古巴，而经过古巴的路在美国的掌控之中。\n\n丧心病狂的奥巴马迫降斯诺登的飞机，搜查时却发现，斯诺登杳无踪迹。但是，在据说是斯诺登的座位上，发现了一张纸条。纸条由纯英文构成：`Obama is a two five zero.`（以 `.` 结束输出，只有 $6$ 个单词 + 一个句号，句子开头如没有大写亦为合法）这句话虽然有点无厘头，但是警官陈珺骛发现这是一条极其重要的线索。他在斯诺登截获的一台笔记本中找到了一个 C++ 程序，输入这条句子后立马给出了相对应的密码。陈珺鹜高兴得晕了过去，身为警官的你把字条和程序带上了飞机，准备飞往曼哈顿国际机场，但是在飞机上检查的时候发现——程序被粉碎了！飞机抵达华盛顿只剩 $5$ 分钟，你必须在这 $5$ 分钟内编写（杜撰）一个程序，免受上司的 $10000000000 \\bmod 10$ 大板。破译密码的步骤如下：\n\n1. 找出句子中所有用英文表示的数字 $(\\leq 20)$，列举在下：\n  - 正规：`zero one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen twenty`\n  - 非正规：`a both another first second third`\n  - 为避免造成歧义，`another` 算作 $1$ 处理。\n2. 将这些数字平方后对 $100$ 取模，如 $0 \\to 0 \\to 00$，$5 \\to 25 \\to 25$，$19 \\to 361 \\to 61$。\n3. 把这些两位数（按任意顺序）按数位排成一行，组成一个新数，如果开头为 $0$，就去 $0$，如 $\\{00,25,61\\} \\to 2561$。\n4. 找出所有排列方法中最小的一个数，即为密码。", "inputFormat": "一个含有 $6$ 个单词的句子。\n\n保证整个句子的字符个数（包括空格）不超过 $1000$。", "outputFormat": "一个整型变量（密码）。如果没有符合要求的数字出现，则输出 $0$。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Snowden's Password", "background": "An easy problem based on the Snowden incident.\n\nTestdata has been corrected by absi2011. If there are still issues, please contact me.", "description": "On X month, X day, 2013, Russia processed Snowden’s passport, and he blended into a plane bound for Venezuela. However, this plan was careless, because FBI spies had already learned his exact location—but that’s not the most important part—the crucial point is that to reach Venezuela, one must pass through Cuba, and the route through Cuba is under U.S. control.\n\nA deranged Obama forced Snowden’s plane to land, but during the search, Snowden was nowhere to be found. However, a note was found on what was said to be Snowden’s seat. The note was in pure English: `Obama is a two five zero.` (Ends with `.`, contains only $6$ words + one period; the sentence is valid even if it does not start with a capital letter.) Although the sentence looked nonsensical, Officer Chen Junwu noticed it was an extremely important clue. He found a C++ program on a laptop intercepted from Snowden; after inputting this sentence, it immediately produced the corresponding password. Chen Junwu was so happy that he fainted. As the police officer, you took the note and the program onto the plane, ready to fly to Manhattan International Airport, but during an in-flight check you discovered—the program had been destroyed! Only $5$ minutes remain before the plane lands in Washington. You must write (fabricate) a program within these $5$ minutes to avoid your superior’s $10000000000 \\bmod 10$ paddlings. The steps to decipher the password are as follows:\n\n1. Find all numbers in the sentence written in English $(\\leq 20)$, listed below:\n   - Standard: `one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen twenty`.\n   - Non-standard: `a both another first second third`.\n   - To avoid ambiguity, treat `another` as $1$.\n2. Square these numbers and take them modulo $100$, e.g., $0 \\to 0 \\to 00$, $5 \\to 25 \\to 25$, $19 \\to 361 \\to 61$.\n3. Concatenate these two-digit numbers (in any order) to form a new number. If it starts with $0$, drop the leading zeros, e.g., $\\{00,25,61\\} \\to 2561$.\n4. Among all permutations, find the smallest number; this is the password.", "inputFormat": "A sentence containing $6$ words.\n\nThe total number of characters in the whole sentence (including spaces) does not exceed $1000$.", "outputFormat": "An integer (the password). If no eligible numbers appear, output $0$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "斯诺登的密码", "background": "根据斯诺登事件出的一道水题\n\n// 数据已经修正 By absi2011 如果还有问题请联系我", "description": "2013 年 X 月 X 日，俄罗斯办理了斯诺登的护照，于是他混迹于一架开往委内瑞拉的飞机。但是，这件事情太不周密了，因为 FBI 的间谍早已获悉他的具体位置——但这不是最重要的——最重要的是如果要去委内瑞拉，那么就要经过古巴，而经过古巴的路在美国的掌控之中。\n\n丧心病狂的奥巴马迫降斯诺登的飞机，搜查时却发现，斯诺登杳无踪迹。但是，在据说是斯诺登的座位上，发现了一张纸条。纸条由纯英文构成：`Obama is a two five zero.`（以 `.` 结束输出，只有 $6$ 个单词 + 一个句号，句子开头如没有大写亦为合法）这句话虽然有点无厘头，但是警官陈珺骛发现这是一条极其重要的线索。他在斯诺登截获的一台笔记本中找到了一个 C++ 程序，输入这条句子后立马给出了相对应的密码。陈珺鹜高兴得晕了过去，身为警官的你把字条和程序带上了飞机，准备飞往曼哈顿国际机场，但是在飞机上检查的时候发现——程序被粉碎了！飞机抵达华盛顿只剩 $5$ 分钟，你必须在这 $5$ 分钟内编写（杜撰）一个程序，免受上司的 $10000000000 \\bmod 10$ 大板。破译密码的步骤如下：\n\n1. 找出句子中所有用英文表示的数字 $(\\leq 20)$，列举在下：\n  - 正规：`zero one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen twenty`\n  - 非正规：`a both another first second third`\n  - 为避免造成歧义，`another` 算作 $1$ 处理。\n2. 将这些数字平方后对 $100$ 取模，如 $0 \\to 0 \\to 00$，$5 \\to 25 \\to 25$，$19 \\to 361 \\to 61$。\n3. 把这些两位数（按任意顺序）按数位排成一行，组成一个新数，如果开头为 $0$，就去 $0$，如 $\\{00,25,61\\} \\to 2561$。\n4. 找出所有排列方法中最小的一个数，即为密码。", "inputFormat": "一个含有 $6$ 个单词的句子。\n\n保证整个句子的字符个数（包括空格）不超过 $1000$。", "outputFormat": "一个整型变量（密码）。如果没有符合要求的数字出现，则输出 $0$。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1604", "type": "P", "difficulty": 2, "samples": [["4\n123\n321\n", "1110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "高精度", "进制"], "title": "B进制星球", "background": "进制题目，而且还是个计算器~~\n", "description": "话说有一天，小 Z 乘坐宇宙飞船，飞到一个美丽的星球。因为历史的原因，科技在这个美丽的星球上并不很发达，星球上人们普遍采用 $B\\ (2 \\le B \\le 36)$ 进制计数。星球上的人们用美味的食物招待了小 Z，作为回报，小 Z 希望送一个能够完成 $B$ 进制加法的计算器给他们。现在小 Z 希望你可以帮助他，编写实现 $B$ 进制加法的程序。", "inputFormat": "数据数据共三行。\n\n第一行，一个十进制的整数，表示进制 $B$；\n\n第二行和第三行，每行一个 $B$ 进制数正整数。数字的每一位属于 $\\{\\tt 0,1,2,3,4,5,6,7,8,9,A,B\\cdots\\}$。", "outputFormat": "一个 $B$ 进制数，表示输入的两个数的和。\n", "hint": "### 数据范围及约定\n\n记 $n,m$ 分别表示两个 $B$ 进制数字的长度。\n\n对于全部数据，$1\\le n,m\\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Base-B Planet", "background": "A number base problem, and it's also a calculator.", "description": "One day, Xiao Z traveled by spaceship to a beautiful planet. For historical reasons, technology on this beautiful planet is not very advanced, and people commonly use base $B\\ (2 \\le B \\le 36)$ for counting. The locals treated Xiao Z with delicious food; as a return, Xiao Z wants to give them a calculator that can perform base $B$ addition. Now Xiao Z hopes you can help him by writing a program that performs base $B$ addition.", "inputFormat": "The testdata consists of three lines.\n\nThe first line contains a decimal integer representing the base $B$.\n\nThe second and third lines each contain a positive integer in base $B$. Each digit belongs to $\\{\\tt 0,1,2,3,4,5,6,7,8,9,A,B\\cdots\\}$.", "outputFormat": "A base $B$ number representing the sum of the two input numbers.", "hint": "Constraints\n\nLet $n, m$ denote the lengths of the two base $B$ numbers.\n\nFor all testdata, $1 \\le n, m \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "B进制星球", "background": "进制题目，而且还是个计算器~~\n", "description": "话说有一天，小 Z 乘坐宇宙飞船，飞到一个美丽的星球。因为历史的原因，科技在这个美丽的星球上并不很发达，星球上人们普遍采用 $B\\ (2 \\le B \\le 36)$ 进制计数。星球上的人们用美味的食物招待了小 Z，作为回报，小 Z 希望送一个能够完成 $B$ 进制加法的计算器给他们。现在小 Z 希望你可以帮助他，编写实现 $B$ 进制加法的程序。", "inputFormat": "数据数据共三行。\n\n第一行，一个十进制的整数，表示进制 $B$；\n\n第二行和第三行，每行一个 $B$ 进制数正整数。数字的每一位属于 $\\{\\tt 0,1,2,3,4,5,6,7,8,9,A,B\\cdots\\}$。", "outputFormat": "一个 $B$ 进制数，表示输入的两个数的和。\n", "hint": "### 数据范围及约定\n\n记 $n,m$ 分别表示两个 $B$ 进制数字的长度。\n\n对于全部数据，$1\\le n,m\\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P1605", "type": "P", "difficulty": 2, "samples": [["2 2 1\n1 1 2 2\n1 2\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "递推", "USACO", "枚举"], "title": "迷宫", "background": null, "description": "给定一个 $N \\times M$ 方格的迷宫，迷宫里有 $T$ 处障碍，障碍处不可通过。\n\n在迷宫中移动有上下左右四种方式，每次只能移动一个方格。数据保证起点上没有障碍。\n\n给定起点坐标和终点坐标，每个方格最多经过一次，问有多少种从起点坐标到终点坐标的方案。", "inputFormat": "第一行为三个正整数 $N,M,T$，分别表示迷宫的长宽和障碍总数。\n\n第二行为四个正整数 $SX,SY,FX,FY$。$SX,SY$ 代表起点坐标，$FX,FY$ 代表终点坐标。\n\n接下来 $T$ 行，每行两个正整数，表示障碍点的坐标。", "outputFormat": "输出从起点坐标到终点坐标的方案总数。", "hint": "对于 $100\\%$ 的数据，$1 \\le N,M \\le 5$，$1 \\le T \\le 10$，$1 \\le SX,FX \\le N$，$1 \\le SY,FY \\le M$。", "locale": "zh-CN", "translations": {"en": {"title": "Maze", "background": "", "description": "Given an $N \\times M$ grid maze with $T$ obstacles, where obstacle cells are impassable.\n\nMovement is allowed in four directions: up, down, left, and right, moving exactly one cell per step. It is guaranteed that the starting cell has no obstacle.\n\nGiven the start coordinates and the end coordinates, with each cell visited at most once, find the number of different paths from the start to the end.", "inputFormat": "The first line contains three positive integers $N, M, T$, representing the numbers of rows and columns of the maze and the total number of obstacles.\n\nThe second line contains four positive integers $SX, SY, FX, FY$. $SX, SY$ are the start coordinates, and $FX, FY$ are the end coordinates.\n\nThe next $T$ lines each contain two positive integers, representing the coordinates of an obstacle.", "outputFormat": "Output the total number of paths from the start to the end.", "hint": "For $100\\%$ of the testdata, $1 \\le N, M \\le 5$, $1 \\le T \\le 10$, $1 \\le SX, FX \\le N$, $1 \\le SY, FY \\le M$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "迷宫", "background": null, "description": "给定一个 $N \\times M$ 方格的迷宫，迷宫里有 $T$ 处障碍，障碍处不可通过。\n\n在迷宫中移动有上下左右四种方式，每次只能移动一个方格。数据保证起点上没有障碍。\n\n给定起点坐标和终点坐标，每个方格最多经过一次，问有多少种从起点坐标到终点坐标的方案。", "inputFormat": "第一行为三个正整数 $N,M,T$，分别表示迷宫的长宽和障碍总数。\n\n第二行为四个正整数 $SX,SY,FX,FY$。$SX,SY$ 代表起点坐标，$FX,FY$ 代表终点坐标。\n\n接下来 $T$ 行，每行两个正整数，表示障碍点的坐标。", "outputFormat": "输出从起点坐标到终点坐标的方案总数。", "hint": "对于 $100\\%$ 的数据，$1 \\le N,M \\le 5$，$1 \\le T \\le 10$，$1 \\le SX,FX \\le N$，$1 \\le SY,FY \\le M$。", "locale": "zh-CN"}}}
{"pid": "P1606", "type": "P", "difficulty": 4, "samples": [["4 5\n1 0 0 0 0\n3 0 0 0 0\n0 0 2 0 0\n0 0 0 4 0\n", "2\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2007", "USACO", "广度优先搜索 BFS", "最短路"], "title": "[USACO07FEB] Lilypad Pond G", "background": "", "description": "FJ has installed a beautiful pond for his cows' aesthetic enjoyment and exercise.\n\nThe rectangular pond has been partitioned into square cells of M rows and N columns (1 ≤ M ≤ 30; 1 ≤ N ≤ 30). Some of the cells have astonishingly sturdy lilypads; others have rocks; the remainder are just beautiful, cool, blue water.\n\nBessie is practicing her ballet moves by jumping from one lilypad to another and is currently located at one of the lilypads. She wants to travel to another lilypad in the pond by jumping from one lilypad to another.\n\nSurprising only to the uninitiated, Bessie's jumps between lilypads always appear as a chess-knight's move: one move in one direction and then two more in the orthogonal direction (or perhaps two in one direction and then one in the orthogonal direction).\n\nFarmer John is observing Bessie's ballet drill and realizes that sometimes she might not be able to jump to her destination lilypad because intermediary lilypads are missing.\n\nEver thrifty, he wants to place additional lilypads so she can complete her quest (perhaps quickly, perhaps by using a large number of intermediate lilypads). Of course, lilypads cannot be placed where rocks already intrude on a cell.\n\nHelp Farmer John determine the minimum number of additional lilypads he has to place, and in how many ways he can place that minimum number.\n", "inputFormat": "Line 1: Two space-separated integers: M and N\n\nLines 2..M+1: Line i+1 describes row i of the pond using N space-separated integers with these values: 0 indicates empty water; 1 indicates a lilypad in place; 2 indicates rock in place; 3 indicates the lilypad Bessie starts on; 4 indicates the lilypad Bessie wants to travel to.", "outputFormat": "Line 1: One integer: the minimum number of additional lilypads required. If it is not possible to help Bessie jump to her destination, print -1.\n\nLine 2: One integer: the total number of possible ways the additional lilypads can be positioned. This number is guaranteed to fit into a single 64-bit signed integer. Do not output this line if line 1 contains -1.", "hint": "\nThe pond is divided into four rows and five columns. Bessie's starting point is in the second row and first column, and her destination is in the fourth row and fourth column. There are three lotus flowers and a stone in the pond.\n\nAt least two lotus flowers are needed, and there are three ways to place them, as shown below:\n\n$$\\begin{bmatrix}\n\\verb!10000! \\\\\n\\verb!30X00! \\\\\n\\verb!00200! \\\\\n\\verb!0X040! \\\\\n\\end{bmatrix},\\begin{bmatrix}\n\\verb!10X00! \\\\\n\\verb!30000! \\\\\n\\verb!0X200! \\\\\n\\verb!00040! \\\\\n\\end{bmatrix},\\begin{bmatrix}\n\\verb!10X00! \\\\\n\\verb!3000X! \\\\\n\\verb!00200! \\\\\n\\verb!00040! \\\\\n\\end{bmatrix}\n$$", "locale": "en", "translations": {"en": {"title": "[USACO07FEB] Lilypad Pond G", "background": "", "description": "FJ has installed a beautiful pond for his cows' aesthetic enjoyment and exercise.\n\nThe rectangular pond has been partitioned into square cells of M rows and N columns (1 ≤ M ≤ 30; 1 ≤ N ≤ 30). Some of the cells have astonishingly sturdy lilypads; others have rocks; the remainder are just beautiful, cool, blue water.\n\nBessie is practicing her ballet moves by jumping from one lilypad to another and is currently located at one of the lilypads. She wants to travel to another lilypad in the pond by jumping from one lilypad to another.\n\nSurprising only to the uninitiated, Bessie's jumps between lilypads always appear as a chess-knight's move: one move in one direction and then two more in the orthogonal direction (or perhaps two in one direction and then one in the orthogonal direction).\n\nFarmer John is observing Bessie's ballet drill and realizes that sometimes she might not be able to jump to her destination lilypad because intermediary lilypads are missing.\n\nEver thrifty, he wants to place additional lilypads so she can complete her quest (perhaps quickly, perhaps by using a large number of intermediate lilypads). Of course, lilypads cannot be placed where rocks already intrude on a cell.\n\nHelp Farmer John determine the minimum number of additional lilypads he has to place, and in how many ways he can place that minimum number.\n", "inputFormat": "Line 1: Two space-separated integers: M and N\n\nLines 2..M+1: Line i+1 describes row i of the pond using N space-separated integers with these values: 0 indicates empty water; 1 indicates a lilypad in place; 2 indicates rock in place; 3 indicates the lilypad Bessie starts on; 4 indicates the lilypad Bessie wants to travel to.", "outputFormat": "Line 1: One integer: the minimum number of additional lilypads required. If it is not possible to help Bessie jump to her destination, print -1.\n\nLine 2: One integer: the total number of possible ways the additional lilypads can be positioned. This number is guaranteed to fit into a single 64-bit signed integer. Do not output this line if line 1 contains -1.", "hint": "\nThe pond is divided into four rows and five columns. Bessie's starting point is in the second row and first column, and her destination is in the fourth row and fourth column. There are three lotus flowers and a stone in the pond.\n\nAt least two lotus flowers are needed, and there are three ways to place them, as shown below:\n\n$$\\begin{bmatrix}\n\\verb!10000! \\\\\n\\verb!30X00! \\\\\n\\verb!00200! \\\\\n\\verb!0X040! \\\\\n\\end{bmatrix},\\begin{bmatrix}\n\\verb!10X00! \\\\\n\\verb!30000! \\\\\n\\verb!0X200! \\\\\n\\verb!00040! \\\\\n\\end{bmatrix},\\begin{bmatrix}\n\\verb!10X00! \\\\\n\\verb!3000X! \\\\\n\\verb!00200! \\\\\n\\verb!00040! \\\\\n\\end{bmatrix}\n$$", "locale": "en"}, "zh-CN": {"title": "[USACO07FEB] Lilypad Pond G", "background": null, "description": "为了让奶牛们娱乐和锻炼，农夫约翰建造了一个美丽的池塘。这个长方形的池子被分成了 $M$ 行 $N$ 列个方格（$1\\le M,N \\le 30$）。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。\n\n贝西正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。\n\n贝西的舞步很像象棋中的马步：每次总是先横向移动一格，再纵向移动两格，或先纵向移动两格，再横向移动一格。最多时，贝西会有八个移动方向可供选择。\n\n约翰一直在观看贝西的芭蕾练习，发现她有时候不能跳到终点，因为中间缺了一些荷叶。于是他想要添加几朵莲花来帮助贝西完成任务。一贯节俭的约翰只想添加最少数量的莲花。当然，莲花不能放在石头上。\n\n请帮助约翰确定必须要添加的莲花的最少数量，以及有多少种放置这些莲花的方法。", "inputFormat": "第 1 行：两个由空格分隔的整数：$M$ 和 $N$。\n\n第 $2$ 到 $M+1$ 行：第 $i+1$ 行描述了池塘的第 $i$ 行，使用 N 个由空格分隔的整数，这些整数的含义如下：$0$ 表示空水；$1$ 表示已有的荷叶；$2$ 表示岩石；$3$ 表示 Bessie 出发的荷叶；$4$ 表示 Bessie 想要前往的荷叶。", "outputFormat": "第 1 行：一个整数：所需的最少额外荷叶数量。如果无法帮助 Bessie 跳到她的目的地，输出 -1。\n\n第 2 行：一个整数：放置额外荷叶的所有可能方式的总数。保证这个数能放入一个 $64$ 位有符号整数中。如果第 $1$ 行输出是 $-1$，则不要输出这一行。", "hint": "池塘被分成四行五列。Bessie 的起点在第二行第一列，目的地是第四行第四列。池塘中有三个荷叶和一块石头。\n\n至少需要两个荷叶，有三种放置方式，如下所示：\n\n$$\\begin{bmatrix}\n\\verb!10000! \\\\\n\\verb!30X00! \\\\\n\\verb!00200! \\\\\n\\verb!0X040! \\\\\n\\end{bmatrix},\\begin{bmatrix}\n\\verb!10X00! \\\\\n\\verb!30000! \\\\\n\\verb!0X200! \\\\\n\\verb!00040! \\\\\n\\end{bmatrix},\\begin{bmatrix}\n\\verb!10X00! \\\\\n\\verb!3000X! \\\\\n\\verb!00200! \\\\\n\\verb!00040! \\\\\n\\end{bmatrix}\n$$", "locale": "zh-CN"}}}
{"pid": "P1607", "type": "P", "difficulty": 5, "samples": [["8 15 3\n1 5 2\n13 14 1\n5 8 3\n8 14 2\n14 15 1\n9 12 1\n12 15 2\n4 6 1\n", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2009", "线段树", "USACO", "排序"], "title": "[USACO09FEB] Fair Shuttle G", "background": "", "description": "Although Farmer John has no problems walking around the fair to collect prizes or see the shows, his cows are not in such good shape; a full day of walking around the fair leaves them exhausted. To help them enjoy the fair, FJ has arranged for a shuttle truck to take the cows from place to place in the fairgrounds.\n\nFJ couldn't afford a really great shuttle, so the shuttle he rented traverses its route only once (!) and makes N (1 <= N <= 20,000) stops (conveniently numbered 1..N) along its path. A total of K (1 <= K <= 50,000) groups of cows conveniently numbered 1..K wish to use the shuttle, each of the M\\_i (1 <= M\\_i <= N) cows in group i wanting to ride from one stop S\\_i (1 <= S\\_i < E\\_i) to another stop E\\_i (S\\_i < E\\_i <= N) farther along the route.\n\nThe shuttle might not be able to pick up an entire group of cows (since it has limited capacity) but can pick up partial groups as appropriate.\n\nGiven the capacity C (1 <= C <= 100) of the shuttle truck and the descriptions of the groups of cows that want to visit various sites at the fair, determine the maximum number of cows that can ride the shuttle during the fair.\n", "inputFormat": "The first line: contains three integers: $K, N$ and $C$, separated by spaces.\n\nThe second line to the $K+1$ line: in the $i+1$ line, it will tell you the information of the $i$th group of cows: $S_i, E_i$ and $M_i$, separated by spaces.", "outputFormat": "First row: The maximum number of cows that can take the bus.", "hint": "The shuttle bus can take $2$ cows from $1$ to $5$, $3$ cows from $5$ to $8$, $2$ cows from $8$ to $14$, $1$ cows from $9$ to $12$, $1$ cows from $13$ to $14$, and $1$ cows from $14$ to $15$.", "locale": "en", "translations": {"en": {"title": "[USACO09FEB] Fair Shuttle G", "background": "", "description": "Although Farmer John has no problems walking around the fair to collect prizes or see the shows, his cows are not in such good shape; a full day of walking around the fair leaves them exhausted. To help them enjoy the fair, FJ has arranged for a shuttle truck to take the cows from place to place in the fairgrounds.\n\nFJ couldn't afford a really great shuttle, so the shuttle he rented traverses its route only once (!) and makes N (1 <= N <= 20,000) stops (conveniently numbered 1..N) along its path. A total of K (1 <= K <= 50,000) groups of cows conveniently numbered 1..K wish to use the shuttle, each of the M\\_i (1 <= M\\_i <= N) cows in group i wanting to ride from one stop S\\_i (1 <= S\\_i < E\\_i) to another stop E\\_i (S\\_i < E\\_i <= N) farther along the route.\n\nThe shuttle might not be able to pick up an entire group of cows (since it has limited capacity) but can pick up partial groups as appropriate.\n\nGiven the capacity C (1 <= C <= 100) of the shuttle truck and the descriptions of the groups of cows that want to visit various sites at the fair, determine the maximum number of cows that can ride the shuttle during the fair.\n", "inputFormat": "The first line: contains three integers: $K, N$ and $C$, separated by spaces.\n\nThe second line to the $K+1$ line: in the $i+1$ line, it will tell you the information of the $i$th group of cows: $S_i, E_i$ and $M_i$, separated by spaces.", "outputFormat": "First row: The maximum number of cows that can take the bus.", "hint": "The shuttle bus can take $2$ cows from $1$ to $5$, $3$ cows from $5$ to $8$, $2$ cows from $8$ to $14$, $1$ cows from $9$ to $12$, $1$ cows from $13$ to $14$, and $1$ cows from $14$ to $15$.", "locale": "en"}, "zh-CN": {"title": "[USACO09FEB] Fair Shuttle G", "background": null, "description": "尽管农夫约翰在集市上四处走动以收集奖品或观看表演没有问题，但他的奶牛们却没有那么好的体力；在集市上走一天会让它们筋疲力尽。为了让它们享受集市，FJ 安排了一辆穿梭卡车在集市场地内接送奶牛。\n\nFJ 无法租到一辆非常好的穿梭车，所以他租的穿梭车只沿着它的路线行驶一次，并在路径上停靠 $N$（$1\\leq N\\leq2\\times10^4$）个站点（编号为 $1\\dots N$）。总共有 $K$（$1\\leq K\\leq5\\times10^4$）组奶牛（编号为 $1\\dots K$）希望使用穿梭车，每组 $i$ 中的 $M_i$（$1\\leq M_i\\leq N$）头奶牛希望从一个站点 $S_i$（$1\\leq S_i<E_i$）乘车到沿路线更远的另一个站点 $E_i$（$S_i<E_i\\leq N$）。\n\n穿梭车可能无法接载整组奶牛（因为它的容量有限），但可以根据需要接载部分奶牛。\n\n给定穿梭卡车的容量 $C$（$1\\leq C\\leq100$）以及希望参观集市上各个地点的奶牛组的描述，确定在集市期间可以乘坐穿梭车的奶牛的最大数量。", "inputFormat": "第一行：包括三个整数：$K,N$ 和 $C$，彼此用空格隔开。\n\n第二行到 $K+1$ 行：在第 $i+1$ 行，将会告诉你第 $i$ 组奶牛的信息：$S_i,E_i$ 和 $M_i$，彼此用空格隔开。", "outputFormat": "第一行：可以坐班车的奶牛的最大头数。", "hint": "【样例说明】\n\n班车可以把 $2$ 头奶牛从 $1$ 送到 $5$，$3$ 头奶牛从 $5$ 送到 $8$，$2$ 头奶牛从 $8$ 送到 $14$，$1$ 头奶牛从 $9$ 送到 $12$，$1$ 头奶牛从 $13$ 送到 $14$，$1$ 头奶牛从 $14$ 送到 $15$。\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P1608", "type": "P", "difficulty": 4, "samples": [["5 4\n1 5 4\n1 2 2\n2 5 2\n4 1 1\n", "4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "最短路"], "title": "路径统计", "background": "", "description": "“RP 餐厅” 的员工素质就是不一般，在齐刷刷的算出同一个电话号码之后，就准备让 HZH,TZY 去送快餐了，他们将自己居住的城市画了一张地图，已知在他们的地图上，有 $N$ 个地方，而且他们目前处在标注为 “1” 的小镇上，而送餐的地点在标注为 “N” 的小镇。（有点废话）除此之外还知道这些道路都是单向的，从小镇 $I$ 到 $J$ 需要花费 $D[I, J]$ 的时间，为了更高效快捷的将快餐送到顾客手中，他们想走一条从小镇 $1$ 到小镇 $N$ 花费最少的一条路，但是他们临出发前，撞到因为在路上堵车而生气的 FYY，深受启发，不能仅知道一条路线，万一。。。于是，他们邀请 FYY 一起来研究起了下一个问题：这个最少花费的路径有多少条？\n", "inputFormat": "输入文件第一行为两个空格隔开的数 $N, E$，表示这张地图里有多少个小镇及有多少边的信息。\n\n下面 $E$ 行，每行三个数 $I, J, C$，表示从 $I$ 小镇到 $J$ 小镇有道路相连且花费为 $C$。（注意，数据提供的边信息可能会重复，不过保证 $I \\ne J$，$1 \\leq I, J\\leq N$）。\n", "outputFormat": "输出文件包含两个数，分别是最少花费和花费最少的路径的总数。保证花费最少的路径的总数不超过 $2^{30}$。\n\n两个不同的最短路方案要求：路径长度相同（均为最短路长度）且最短路经过的点的编号序列不同。\n\n若城市 $N$ 无法到达则只输出一个 `No answer`。\n", "hint": "对于 $30\\%$ 的数据 $N\\leq 20$；\n\n对于 $100\\%$ 的数据 $1\\leq N\\leq 2000$，$0\\leq E\\leq N\\times (N-1)$，$1\\leq C\\leq 10$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Path Counting", "background": "", "description": "The staff at the “RP Restaurant” are quite something. After unanimously calculating the same phone number, they are about to send HZH and TZY to deliver takeout. They drew a map of their city. On this map, there are $N$ locations. They are currently at the town labeled “1,” and the delivery destination is the town labeled “N.” In addition, all roads are one-way. The time cost from town $I$ to town $J$ is $D[I, J]$. To deliver the food more efficiently, they want to take a route from town $1$ to town $N$ with the minimal cost. However, just before departure, they bumped into FYY, who was angry due to a traffic jam, and were inspired: it is not enough to know only one route. So, they invited FYY to study the next problem together: how many minimal-cost paths are there?", "inputFormat": "The first line contains two space-separated integers $N, E$, indicating the number of towns and the number of edges in the map.\n\nEach of the next $E$ lines contains three integers $I, J, C$, meaning there is a directed road from town $I$ to town $J$ with cost $C$. Note that edge records in the testdata may be duplicated, but it is guaranteed that $I \\ne J$ and $1 \\leq I, J \\leq N$.", "outputFormat": "Output two numbers: the minimal cost and the total number of minimal-cost paths. It is guaranteed that the total number of minimal-cost paths does not exceed $2^{30}$.\n\nTwo shortest path solutions are considered different if their path lengths are equal (both are the shortest path length) and the sequences of node indices visited on the shortest paths are different.\n\nIf city $N$ is unreachable, output only `No answer`.", "hint": "- For $30\\%$ of the testdata, $N \\leq 20$.\n- For $100\\%$ of the testdata, $1 \\leq N \\leq 2000$, $0 \\leq E \\leq N \\times (N - 1)$, $1 \\leq C \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "路径统计", "background": "", "description": "“RP 餐厅” 的员工素质就是不一般，在齐刷刷的算出同一个电话号码之后，就准备让 HZH,TZY 去送快餐了，他们将自己居住的城市画了一张地图，已知在他们的地图上，有 $N$ 个地方，而且他们目前处在标注为 “1” 的小镇上，而送餐的地点在标注为 “N” 的小镇。（有点废话）除此之外还知道这些道路都是单向的，从小镇 $I$ 到 $J$ 需要花费 $D[I, J]$ 的时间，为了更高效快捷的将快餐送到顾客手中，他们想走一条从小镇 $1$ 到小镇 $N$ 花费最少的一条路，但是他们临出发前，撞到因为在路上堵车而生气的 FYY，深受启发，不能仅知道一条路线，万一。。。于是，他们邀请 FYY 一起来研究起了下一个问题：这个最少花费的路径有多少条？\n", "inputFormat": "输入文件第一行为两个空格隔开的数 $N, E$，表示这张地图里有多少个小镇及有多少边的信息。\n\n下面 $E$ 行，每行三个数 $I, J, C$，表示从 $I$ 小镇到 $J$ 小镇有道路相连且花费为 $C$。（注意，数据提供的边信息可能会重复，不过保证 $I \\ne J$，$1 \\leq I, J\\leq N$）。\n", "outputFormat": "输出文件包含两个数，分别是最少花费和花费最少的路径的总数。保证花费最少的路径的总数不超过 $2^{30}$。\n\n两个不同的最短路方案要求：路径长度相同（均为最短路长度）且最短路经过的点的编号序列不同。\n\n若城市 $N$ 无法到达则只输出一个 `No answer`。\n", "hint": "对于 $30\\%$ 的数据 $N\\leq 20$；\n\n对于 $100\\%$ 的数据 $1\\leq N\\leq 2000$，$0\\leq E\\leq N\\times (N-1)$，$1\\leq C\\leq 10$。\n", "locale": "zh-CN"}}}
{"pid": "P1609", "type": "P", "difficulty": 3, "samples": [["44", "55"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "最小回文数", "background": "", "description": "回文数是从左向右读和从右向左读结果一样的数字串。\n\n例如：$121$、$44$ 和 $3$ 是回文数，$175$ 和 $36$ 不是。\n\n对于一个给定的 $N$，请你寻找一个回文数 $P$，满足 $P > N$。\n\n满足这样条件的回文数很多，你的任务是输出其中最小的一个。", "inputFormat": "一行，一个正整数 $N$。$N$ 的数值小于 ${10}^{100}$，并且 $N$ 没有前导 $0$。", "outputFormat": "你的程序应该输出一行，最小的回文数 $P$（$P > N$）。", "hint": "对于 $50 \\%$ 的数据，$N < {10}^9$。  \n对于 $100 \\%$ 的数据，$N < {10}^{100}$。", "locale": "zh-CN", "translations": {"en": {"title": "Smallest Palindromic Number", "background": "", "description": "A palindromic number is a number that reads the same from left to right and from right to left.\n\nFor example: $121$, $44$, and $3$ are palindromic numbers, while $175$ and $36$ are not.\n\nGiven a number $N$, find a palindromic number $P$ such that $P > N$.\n\nThere are many such palindromic numbers; your task is to output the smallest one.", "inputFormat": "One line containing a positive integer $N$. The value of $N$ is less than $10^{100}$, and $N$ has no leading $0$.", "outputFormat": "Your program should output one line: the smallest palindromic number $P$ with $P > N$.", "hint": "For $50\\%$ of the testdata, $N < 10^9$.  \nFor $100\\%$ of the testdata, $N < 10^{100}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小回文数", "background": "", "description": "回文数是从左向右读和从右向左读结果一样的数字串。\n\n例如：$121$、$44$ 和 $3$ 是回文数，$175$ 和 $36$ 不是。\n\n对于一个给定的 $N$，请你寻找一个回文数 $P$，满足 $P > N$。\n\n满足这样条件的回文数很多，你的任务是输出其中最小的一个。", "inputFormat": "一行，一个正整数 $N$。$N$ 的数值小于 ${10}^{100}$，并且 $N$ 没有前导 $0$。", "outputFormat": "你的程序应该输出一行，最小的回文数 $P$（$P > N$）。", "hint": "对于 $50 \\%$ 的数据，$N < {10}^9$。  \n对于 $100 \\%$ 的数据，$N < {10}^{100}$。", "locale": "zh-CN"}}}
{"pid": "P1610", "type": "P", "difficulty": 2, "samples": [["3 3\r\n1 2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "鸿山洞的灯", "background": "", "description": "已知 $n$ 盏灯以及每盏灯的位置 $p_i$，$p_i$ 均不相等，当两盏灯之间的距离小于 $dist$ 时，若这个安全距离里面还有灯是亮着时，就可以关掉这些灯（即若第 $i-1$ 盏与第 $i+1$ 盏的距离 $\\leq dist$，则可以关掉第 $i$ 盏）。\n\n求在保证洞里的光线是充足的情况下，一段区域里能删除的灯的最大值。\n\n距离洞口最近和最远的两盏灯必须是亮着。", "inputFormat": "第一行两个数，$n$ 和 $dist$。\n\n第二行 $n$ 个数，即每盏灯的位置 $p_i$。", "outputFormat": "一个数，即一段区域里能删除的灯的最大值。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，保证 $dist$ 在 `int` 整型范围之内。", "locale": "zh-CN", "translations": {"en": {"title": "Lights in Hongshan Cave", "background": "", "description": "There are $n$ lamps with positions $p_i$, and all $p_i$ are distinct. When the distance between two lamps is less than $dist$, if there is still a lamp that remains on within this safety distance, you may turn off those lamps (that is, if the distance between the $(i-1)$-th and $(i+1)$-th lamps is $\\leq dist$, then the $i$-th lamp can be turned off).\n\nWhile ensuring that the cave remains sufficiently illuminated, find the maximum number of lamps that can be removed within a single contiguous interval.\n\nThe lamps nearest to and farthest from the cave entrance must remain on.", "inputFormat": "The first line contains two numbers, $n$ and $dist$.\n\nThe second line contains $n$ numbers, the positions $p_i$ of each lamp.", "outputFormat": "Output one number: the maximum number of lamps that can be removed within a single interval.", "hint": "For $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, and $dist$ is guaranteed to be within the range of `int`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "鸿山洞的灯", "background": "", "description": "已知 $n$ 盏灯以及每盏灯的位置 $p_i$，$p_i$ 均不相等，当两盏灯之间的距离小于 $dist$ 时，若这个安全距离里面还有灯是亮着时，就可以关掉这些灯（即若第 $i-1$ 盏与第 $i+1$ 盏的距离 $\\leq dist$，则可以关掉第 $i$ 盏）。\n\n求在保证洞里的光线是充足的情况下，一段区域里能删除的灯的最大值。\n\n距离洞口最近和最远的两盏灯必须是亮着。", "inputFormat": "第一行两个数，$n$ 和 $dist$。\n\n第二行 $n$ 个数，即每盏灯的位置 $p_i$。", "outputFormat": "一个数，即一段区域里能删除的灯的最大值。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，保证 $dist$ 在 `int` 整型范围之内。", "locale": "zh-CN"}}}
{"pid": "P1611", "type": "P", "difficulty": 2, "samples": [["1111 2222", "287"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "循环的数字", "background": "", "description": "你曾经因为看见一样的东西一遍又一遍地重复、循环而对电视节目感到厌烦么？好吧，虽然我并不关心电视节目的好坏，不过有时却也很像那样不断循环的数字。\n\n让我们假定两个不同的正整数 $(n, m)$ 是循环的，当且仅当你能通过将 $n$ 末端的几个数字移到它的首端而不改变移动的数字的顺序并使整个数字变成 $m$ 。举个例子，$(12345, 34512)$ 就是一对循环的数字，因为你能把 $12345$ 中末尾的 $345$ 移到 $12$ 前面，从而得到 $34512$。注意，为了成为一对循环的数字，$n$ 和 $m$ 位数必须相同。无论 $n$ 或 $m$ 都没有前置的 $0$。\n\n现在给定正整数 $A$ 和 $B$，并保证 $A$ 和 $B$ 位数相同且均没有前置 $0$，求存在多少循环的正整数对 $(n, m)$，使得 $A \\leq n \\le m \\leq B$ ？", "inputFormat": "本题有共有 $10$ 个测试点。 每个输入文件包含 $1$ 行。 第 $1$ 行有两个用空格隔开的正整数 $A$ 和 $B$。", "outputFormat": "每个输出文件应包含一个正整数 $x$，表示共有 $x$ 组循环的正整数对 $(n,m)$ 使得 $A \\leq n \\le m \\leq B$。", "hint": "$1\\le A,B \\leq 2\\times 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Cyclic Numbers", "background": "", "description": "Have you ever felt bored with a TV program because you kept seeing the same thing repeat over and over? Well, I do not really care about TV shows, but sometimes numbers also cycle like that.\n\nAssume two distinct positive integers $(n, m)$ are cyclic if and only if you can move some digits from the end of $n$ to the front, without changing the order of the moved digits, so that the whole number becomes $m$. For example, $(12345, 34512)$ is a cyclic pair because you can move the trailing $345$ of $12345$ in front of $12$ to get $34512$. Note that to be a cyclic pair, $n$ and $m$ must have the same number of digits. Neither $n$ nor $m$ has leading zeros.\n\nNow given positive integers $A$ and $B$, guaranteed to have the same number of digits and no leading zeros, count the number of cyclic pairs $(n, m)$ such that $A \\leq n \\le m \\leq B$.", "inputFormat": "This problem has 10 test points. Each input file contains 1 line. The first line contains two space-separated positive integers A and B.", "outputFormat": "Each output file should contain a single integer x, representing the number of cyclic pairs $(n, m)$ such that $A \\leq n \\le m \\leq B$.", "hint": "$1\\le A,B \\leq 2\\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "循环的数字", "background": "", "description": "你曾经因为看见一样的东西一遍又一遍地重复、循环而对电视节目感到厌烦么？好吧，虽然我并不关心电视节目的好坏，不过有时却也很像那样不断循环的数字。\n\n让我们假定两个不同的正整数 $(n, m)$ 是循环的，当且仅当你能通过将 $n$ 末端的几个数字移到它的首端而不改变移动的数字的顺序并使整个数字变成 $m$ 。举个例子，$(12345, 34512)$ 就是一对循环的数字，因为你能把 $12345$ 中末尾的 $345$ 移到 $12$ 前面，从而得到 $34512$。注意，为了成为一对循环的数字，$n$ 和 $m$ 位数必须相同。无论 $n$ 或 $m$ 都没有前置的 $0$。\n\n现在给定正整数 $A$ 和 $B$，并保证 $A$ 和 $B$ 位数相同且均没有前置 $0$，求存在多少循环的正整数对 $(n, m)$，使得 $A \\leq n \\le m \\leq B$ ？", "inputFormat": "本题有共有 $10$ 个测试点。 每个输入文件包含 $1$ 行。 第 $1$ 行有两个用空格隔开的正整数 $A$ 和 $B$。", "outputFormat": "每个输出文件应包含一个正整数 $x$，表示共有 $x$ 组循环的正整数对 $(n,m)$ 使得 $A \\leq n \\le m \\leq B$。", "hint": "$1\\le A,B \\leq 2\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1612", "type": "P", "difficulty": 3, "samples": [["5\n1 1 2 2\n1 2 3 4 5\n1 3 3 6 8", "1 2 1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "倍增", "二分", "O2优化", "栈"], "title": "[yLOI2018] 树上的链", "background": "", "description": "给定一棵有 $n$ 个节点的树。每个节点有一个点权和一个参数。节点 $i$ 的权值为 $w_i$，参数为 $c_i$。$1$ 是这棵树的根。\n\n现在，对每个节点 $u$（$1 \\leq u \\leq n$），请在树上你找到最长的一条链 $v_1, v_2, \\dots v_m$，满足如下条件：\n\n1. $v_1 = u$。\n2. 对 $2 \\leq i \\leq m$， 有 $v_i$ 是 $v_{i - 1}$ 的父节点。\n3. 链上节点的点权和不超过 $c_u$，即 $\\sum_{j = 1}^m w_{v_j} \\leq c_u$。 ", "inputFormat": "第一行是一个整数，表示树的节点数 $n$。  \n第二行有 $n - 1$ 个整数 $p_2, p_3, \\dots p_n$，其中 $p_i$ 表示节点 $i$ 的父节点。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的权值 $w_i$。  \n第四行有 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的参数 $c_i$。", "outputFormat": "输出一行 $n$ 个用空格隔开的整数，第 $i$ 个整数表示节点 $i$ 对应的链的最长长度。", "hint": "### 数据规模与约定\n\n对全部的测试点，保证 $1 \\leq u, v \\leq n \\leq 10^5$，$1 \\leq p_i \\lt i$，$1 \\leq w_i \\leq c_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[yLOI2018] Chains on a Tree", "background": "", "description": "Given a tree with $n$ nodes. Each node has a weight and a parameter. For node $i$, its weight is $w_i$ and its parameter is $c_i$. Node $1$ is the root.\n\nNow, for each node $u$ ($1 \\leq u \\leq n$), find the longest chain $v_1, v_2, \\dots v_m$ on the tree that satisfies the following conditions:\n1. $v_1 = u$.\n2. For $2 \\leq i \\leq m$, $v_i$ is the parent of $v_{i - 1}$.\n3. The sum of weights on the chain does not exceed $c_u$, i.e., $\\sum_{j = 1}^m w_{v_j} \\leq c_u$.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the tree.  \nThe second line contains $n - 1$ integers $p_2, p_3, \\dots p_n$, where $p_i$ denotes the parent of node $i$.  \nThe third line contains $n$ integers; the $i$-th integer is the weight $w_i$ of node $i$.  \nThe fourth line contains $n$ integers; the $i$-th integer is the parameter $c_i$ of node $i$.", "outputFormat": "Output one line with $n$ space-separated integers. The $i$-th integer denotes the maximum length of the chain corresponding to node $i$.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq u, v \\leq n \\leq 10^5$，$1 \\leq p_i \\lt i$，$1 \\leq w_i \\leq c_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[yLOI2018] 树上的链", "background": "", "description": "给定一棵有 $n$ 个节点的树。每个节点有一个点权和一个参数。节点 $i$ 的权值为 $w_i$，参数为 $c_i$。$1$ 是这棵树的根。\n\n现在，对每个节点 $u$（$1 \\leq u \\leq n$），请在树上你找到最长的一条链 $v_1, v_2, \\dots v_m$，满足如下条件：\n\n1. $v_1 = u$。\n2. 对 $2 \\leq i \\leq m$， 有 $v_i$ 是 $v_{i - 1}$ 的父节点。\n3. 链上节点的点权和不超过 $c_u$，即 $\\sum_{j = 1}^m w_{v_j} \\leq c_u$。 ", "inputFormat": "第一行是一个整数，表示树的节点数 $n$。  \n第二行有 $n - 1$ 个整数 $p_2, p_3, \\dots p_n$，其中 $p_i$ 表示节点 $i$ 的父节点。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的权值 $w_i$。  \n第四行有 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的参数 $c_i$。", "outputFormat": "输出一行 $n$ 个用空格隔开的整数，第 $i$ 个整数表示节点 $i$ 对应的链的最长长度。", "hint": "### 数据规模与约定\n\n对全部的测试点，保证 $1 \\leq u, v \\leq n \\leq 10^5$，$1 \\leq p_i \\lt i$，$1 \\leq w_i \\leq c_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1613", "type": "P", "difficulty": 4, "samples": [["4 4\n1 1\n1 2\n2 3\n3 4\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "倍增", "最短路"], "title": "跑路", "background": "", "description": "小 A 的工作不仅繁琐，更有苛刻的规定，要求小 A 每天早上在 $6:00$ 之前到达公司，否则这个月工资清零。可是小 A 偏偏又有赖床的坏毛病。于是为了保住自己的工资，小 A 买了一个空间跑路器，每秒钟可以跑 $2^k$ 千米（$k$ 是任意自然数）。当然，这个机器是用 `longint` 存的，所以总跑路长度不能超过 `maxlongint` 千米。小 A 的家到公司的路可以看做一个有向图，小 A 家为点 $1$，公司为点 $n$，每条边长度均为一千米。小 A 想每天能醒地尽量晚，所以让你帮他算算，他最少需要几秒才能到公司。数据保证 $1$ 到 $n$ 至少有一条路径。", "inputFormat": "第一行两个整数 $n,m$，表示点的个数和边的个数。\n\n接下来 $m$ 行每行两个数字 $u,v$，表示一条 $u$ 到 $v$ 的边。", "outputFormat": "一行一个数字，表示到公司的最少秒数。", "hint": "**【样例解释】**\n\n$1 \\to 1 \\to 2 \\to 3 \\to 4$，总路径长度为 $4$ 千米，直接使用一次跑路器即可。\n\n**【数据范围】**\n\n$50\\%$ 的数据满足最优解路径长度 $\\leq 1000$；\n\n$100\\%$ 的数据满足 $2\\leq n \\leq 50$，$m \\leq 10 ^ 4$，最优解路径长度 $\\leq$ `maxlongint`。", "locale": "zh-CN", "translations": {"en": {"title": "Running Away", "background": "", "description": "Xiao A’s job is not only tedious but also has strict rules: he must arrive at the company before $6:00$ every morning, otherwise his salary for the month will be zero. However, Xiao A has a bad habit of sleeping in. To save his salary, he bought a space “running” device that can run $2^k$ kilometers per second (where $k$ is any natural number). Of course, this machine stores values using `longint`, so the total running length cannot exceed `maxlongint` kilometers. The route from Xiao A’s home to the company can be modeled as a directed graph: Xiao A’s home is node $1$, the company is node $n$, and each edge has length one kilometer. Xiao A wants to wake up as late as possible every day, so he asks you to compute the minimum number of seconds he needs to reach the company. It is guaranteed that there is at least one path from $1$ to $n$.", "inputFormat": "The first line contains two integers $n, m$, representing the number of nodes and the number of edges.\n\nThe next $m$ lines each contain two integers $u, v$, indicating a directed edge from $u$ to $v$.", "outputFormat": "Output a single number on one line, representing the minimum number of seconds needed to reach the company.", "hint": "【Sample Explanation】\n\n$1 \\to 1 \\to 2 \\to 3 \\to 4$, the total path length is $4$ kilometers, so using the running device once is enough.\n\n【Constraints】\n\n$50\\%$ of the testdata satisfies that the optimal path length $\\leq 1000$;\n\n$100\\%$ of the testdata satisfies $2 \\leq n \\leq 50$, $m \\leq 10 ^ 4$, and the optimal path length $\\leq$ `maxlongint`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跑路", "background": "", "description": "小 A 的工作不仅繁琐，更有苛刻的规定，要求小 A 每天早上在 $6:00$ 之前到达公司，否则这个月工资清零。可是小 A 偏偏又有赖床的坏毛病。于是为了保住自己的工资，小 A 买了一个空间跑路器，每秒钟可以跑 $2^k$ 千米（$k$ 是任意自然数）。当然，这个机器是用 `longint` 存的，所以总跑路长度不能超过 `maxlongint` 千米。小 A 的家到公司的路可以看做一个有向图，小 A 家为点 $1$，公司为点 $n$，每条边长度均为一千米。小 A 想每天能醒地尽量晚，所以让你帮他算算，他最少需要几秒才能到公司。数据保证 $1$ 到 $n$ 至少有一条路径。", "inputFormat": "第一行两个整数 $n,m$，表示点的个数和边的个数。\n\n接下来 $m$ 行每行两个数字 $u,v$，表示一条 $u$ 到 $v$ 的边。", "outputFormat": "一行一个数字，表示到公司的最少秒数。", "hint": "**【样例解释】**\n\n$1 \\to 1 \\to 2 \\to 3 \\to 4$，总路径长度为 $4$ 千米，直接使用一次跑路器即可。\n\n**【数据范围】**\n\n$50\\%$ 的数据满足最优解路径长度 $\\leq 1000$；\n\n$100\\%$ 的数据满足 $2\\leq n \\leq 50$，$m \\leq 10 ^ 4$，最优解路径长度 $\\leq$ `maxlongint`。", "locale": "zh-CN"}}}
{"pid": "P1614", "type": "P", "difficulty": 1, "samples": [["8 3\n1\n4\n7\n3\n1\n2\n4\n3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "洛谷原创", "枚举", "前缀和"], "title": "爱与愁的心痛", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第一章。\n\n《我为歌狂》当中伍思凯神曲《舞月光》居然没赢给萨顶顶，爱与愁大神心痛啊~~~而且最近还有一些令人伤心的事情，都让人心痛（最近真的很烦哈)……\n", "description": "最近有 $n$ 个不爽的事，每句话都有一个正整数刺痛值（心理承受力极差）。爱与愁大神想知道连续 $m$ 个刺痛值的和的最小值是多少，但是由于业务繁忙，爱与愁大神只好请你编个程序告诉他。\n", "inputFormat": "第一行有两个用空格隔开的整数，分别代表 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $a_i$ 代表第 $i$ 件事的刺痛值 $a_i$。", "outputFormat": "输出一行一个整数，表示连续 $m$ 个刺痛值的和的最小值是多少。\n", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\leq 20$。\n- 对于 $60\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $90\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对于 $100\\%$ 的数据，保证 $0 \\leq m \\leq n \\leq 3 \\times 10^3$，$1 \\leq a_i \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "The Heartache of Love and Sorrow", "background": "(This problem hides two song titles. See if you can find them~~~).\n\n\"The Story of 'Love and Sorrow', Vol. 1 · heartache\", Chapter 1.\n\nIn \"Wo Wei Ge Kuang\", Wu Sikai's hit song \"Dancing Moonlight\" actually did not beat Sa Dingding. The guru \"Ai Yu Chou\" feels heartbroken~~~ Also, some sad things have happened lately, all of which make the heart ache (it has really been annoying lately).", "description": "Recently there are $n$ unpleasant events, and each one has a positive integer sting value (his tolerance is extremely low). The guru \"Ai Yu Chou\" wants to know the minimum sum of $m$ consecutive sting values. Because he is busy, he asks you to write a program to tell him.", "inputFormat": "The first line contains two space-separated integers, $n$ and $m$.\n\nLines $2$ to $n + 1$ each contain one integer. For $i = 1, 2, \\ldots, n$, line $i + 1$ contains an integer $a_i$, the sting value of the $i$-th event.", "outputFormat": "Output one line with a single integer: the minimum sum of any $m$ consecutive sting values.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n \\leq 20$.\n- For $60\\%$ of the testdata, it is guaranteed that $n \\leq 100$.\n- For $90\\%$ of the testdata, it is guaranteed that $n \\leq 10^3$.\n- For $100\\%$ of the testdata, it is guaranteed that $0 \\leq m \\leq n \\leq 3 \\times 10^3$, $1 \\leq a_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爱与愁的心痛", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第一章。\n\n《我为歌狂》当中伍思凯神曲《舞月光》居然没赢给萨顶顶，爱与愁大神心痛啊~~~而且最近还有一些令人伤心的事情，都让人心痛（最近真的很烦哈)……\n", "description": "最近有 $n$ 个不爽的事，每句话都有一个正整数刺痛值（心理承受力极差）。爱与愁大神想知道连续 $m$ 个刺痛值的和的最小值是多少，但是由于业务繁忙，爱与愁大神只好请你编个程序告诉他。\n", "inputFormat": "第一行有两个用空格隔开的整数，分别代表 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $a_i$ 代表第 $i$ 件事的刺痛值 $a_i$。", "outputFormat": "输出一行一个整数，表示连续 $m$ 个刺痛值的和的最小值是多少。\n", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n \\leq 20$。\n- 对于 $60\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $90\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对于 $100\\%$ 的数据，保证 $0 \\leq m \\leq n \\leq 3 \\times 10^3$，$1 \\leq a_i \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1615", "type": "P", "difficulty": 1, "samples": [["00:0:00\n0:00:10\n10", "100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "数学", "洛谷原创", "进制"], "title": "西游记公司", "background": "一道极其无厘头的题目。", "description": "事情是这样的：  \n\n西游记中的孙沙猪三徒弟在西天取经之后开始进入厦门大学经贸系学习经济，在 $1$ 个小时的学习后，他们用特殊手段毕业了。\n\n然后，他们创办了三个公司：“花果山生态旅游山庄集团公司” “高老庄猪肉美食城有限公司” 和 “流沙河轮渡有限公司”。虽然这三家公司出自 “经卷出版社” 社长唐三藏的徒弟们，但是每家公司都仍然保持着 $0$ 元以下的财政收入。  \n\n于是，他们想到了一个无聊的方法：向别人偷！其中，孙悟空偷猪八戒的平底锅之前，猪八戒可以一直抢沙和尚的笔记本。\n\n现在，作为猪八戒手下首席智士的你，要帮助既聪明又愚蠢的猪八戒用那种不正当的手段挽救这个公司！  \n\n你可以这样做：你已经知道孙悟空什么时候要来偷猪八戒的东西，而猪八戒又要在什么时间去抢沙和尚的东西，又知道猪八戒每秒钟可以偷沙和尚 $n$ 台笔记本，帮猪八戒算一算，自己在有限的时间内能偷到沙和尚多少台笔记本，使得他有足够的时间来防御大师兄。", "inputFormat": "第一行：一个时间，为 时：分：秒 形式，表示猪八戒打算去偷沙和尚笔记本的时间；\n\n第二行：一个时间，为 时：分：秒 形式，表示孙悟空打算去偷猪八戒平底锅的时间。\n\n**注：时间可能有前导零，也有可能没有。**\n\n第三行：一行一个整数 $n$，表示猪八戒一秒能偷沙和尚的笔记本数。\n\n保证第一行的时间要比第二行的时间早。", "outputFormat": "一个整数，表示猪八戒能偷沙和尚笔记本的个数。", "hint": "对于 $100\\%$ 的数据，保证两个时间合法，$n<32768$。", "locale": "zh-CN", "translations": {"en": {"title": "Journey to the West Company", "background": "An extremely nonsensical problem.", "description": "Here is the story:\n\nAfter fetching the scriptures from the West, the three disciples—Sun Wukong, Sha Wujing, and Zhu Bajie—entered the School of Economics and Trade at Xiamen University to study economics. After $1$ hour of study, they graduated using special means.\n\nThen, they founded three companies: “Huaguo Mountain Eco-Tourism Resort Group Co.”, “Gao Village Pork Delicacies City Co., Ltd.”, and “Flowing-Sand River Ferry Co., Ltd.” Although these three companies were founded by the disciples of Tang Sanzang, the president of the “Sutra Publishing House”, each company still maintained financial income below $0$ yuan.\n\nSo they came up with a boring method: steal from others! Before Sun Wukong comes to steal Zhu Bajie’s frying pan, Zhu Bajie can keep stealing Sha Wujing’s laptops.\n\nNow, as the chief strategist working for Zhu Bajie, you must help the clever yet foolish Zhu Bajie use such improper means to save the company!\n\nYou can do this: you already know when Sun Wukong will come to steal Zhu Bajie’s belongings, and when Zhu Bajie will go to steal Sha Wujing’s belongings. You also know that Zhu Bajie can steal $n$ laptops from Sha Wujing per second. Help Zhu Bajie calculate how many laptops he can steal from Sha Wujing within the limited time, so that he has enough time to defend against his senior brother.", "inputFormat": "The first line: a time in the form hour:minute:second, indicating when Zhu Bajie plans to steal Sha Wujing’s laptops.\n\nThe second line: a time in the form hour:minute:second, indicating when Sun Wukong plans to steal Zhu Bajie’s frying pan.\n\n**Note: The times may or may not have leading zeros.**\n\nThe third line: a single integer $n$, indicating how many laptops Zhu Bajie can steal from Sha Wujing per second.\n\nIt is guaranteed that the first time is earlier than the second time.", "outputFormat": "A single integer, indicating how many laptops Zhu Bajie can steal from Sha Wujing.", "hint": "For $100\\%$ of the testdata, the two times are valid, and $n<32768$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "西游记公司", "background": "一道极其无厘头的题目。", "description": "事情是这样的：  \n\n西游记中的孙沙猪三徒弟在西天取经之后开始进入厦门大学经贸系学习经济，在 $1$ 个小时的学习后，他们用特殊手段毕业了。\n\n然后，他们创办了三个公司：“花果山生态旅游山庄集团公司” “高老庄猪肉美食城有限公司” 和 “流沙河轮渡有限公司”。虽然这三家公司出自 “经卷出版社” 社长唐三藏的徒弟们，但是每家公司都仍然保持着 $0$ 元以下的财政收入。  \n\n于是，他们想到了一个无聊的方法：向别人偷！其中，孙悟空偷猪八戒的平底锅之前，猪八戒可以一直抢沙和尚的笔记本。\n\n现在，作为猪八戒手下首席智士的你，要帮助既聪明又愚蠢的猪八戒用那种不正当的手段挽救这个公司！  \n\n你可以这样做：你已经知道孙悟空什么时候要来偷猪八戒的东西，而猪八戒又要在什么时间去抢沙和尚的东西，又知道猪八戒每秒钟可以偷沙和尚 $n$ 台笔记本，帮猪八戒算一算，自己在有限的时间内能偷到沙和尚多少台笔记本，使得他有足够的时间来防御大师兄。", "inputFormat": "第一行：一个时间，为 时：分：秒 形式，表示猪八戒打算去偷沙和尚笔记本的时间；\n\n第二行：一个时间，为 时：分：秒 形式，表示孙悟空打算去偷猪八戒平底锅的时间。\n\n**注：时间可能有前导零，也有可能没有。**\n\n第三行：一行一个整数 $n$，表示猪八戒一秒能偷沙和尚的笔记本数。\n\n保证第一行的时间要比第二行的时间早。", "outputFormat": "一个整数，表示猪八戒能偷沙和尚笔记本的个数。", "hint": "对于 $100\\%$ 的数据，保证两个时间合法，$n<32768$。", "locale": "zh-CN"}}}
{"pid": "P1616", "type": "P", "difficulty": 2, "samples": [["70 3\n71 100\n69 1\n1 2\n", "140\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "洛谷原创", "背包 DP"], "title": "疯狂的采药", "background": "此题为纪念 LiYuxiang 而生。", "description": "LiYuxiang 是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同种类的草药，采每一种都需要一些时间，每一种也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”\n\n如果你是 LiYuxiang，你能完成这个任务吗？\n\n此题和原题的不同点：\n\n$1$. 每种草药可以无限制地疯狂采摘。\n\n$2$. 药的种类眼花缭乱，采药时间好长好长啊！师傅等得菊花都谢了！", "inputFormat": "输入第一行有两个整数，分别代表总共能够用来采药的时间 $t$ 和代表山洞里的草药的数目 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行两个整数，第 $(i + 1)$ 行的整数 $a_i, b_i$ 分别表示采摘第 $i$ 种草药的时间和该草药的价值。", "outputFormat": "输出一行，这一行只包含一个整数，表示在规定的时间内，可以采到的草药的最大总价值。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $m \\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq m \\le 10^4$，$1 \\leq t \\leq 10^7$，且 $1 \\leq m \\times t \\leq 10^7$，$1 \\leq a_i, b_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Crazy Herb Picking", "background": "This problem was created in memory of LiYuxiang.", "description": "LiYuxiang is a bright child, and his dream is to become the greatest physician in the world. To achieve this, he wants to apprentice under the most respected physician nearby. To assess his aptitude, the physician gave him a challenge. The physician took him to a cave full of herbs and said: \"Child, there are different kinds of herbs in this cave. Picking each kind takes some time, and each has its own value. I will give you a period of time. Within this time, you may pick some herbs. If you are clever, you should be able to maximize the total value of the herbs you collect.\"\n\nIf you were LiYuxiang, could you complete this task?\n\nDifferences from the original problem:\n\n$1$. Each kind of herb can be picked an unlimited number of times.\n\n$2$. There are many kinds of herbs, and the total picking time can be very long. The master has been waiting for a very long time!", "inputFormat": "The first line contains two integers, representing the total time available for picking herbs $t$ and the number of herb types $m$.\n\nLines $2$ through $(m + 1)$ each contain two integers. On line $(i + 1)$, the integers $a_i, b_i$ denote the time to pick the $i$-th type of herb and the value of this herb, respectively.", "outputFormat": "Output one line containing a single integer, which is the maximum total value of herbs that can be collected within the allotted time.", "hint": "#### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $m \\le 10^3$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq m \\leq 10^4$, $1 \\leq t \\leq 10^7$, and $1 \\leq m \\times t \\leq 10^7$, $1 \\leq a_i, b_i \\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "疯狂的采药", "background": "此题为纪念 LiYuxiang 而生。", "description": "LiYuxiang 是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同种类的草药，采每一种都需要一些时间，每一种也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”\n\n如果你是 LiYuxiang，你能完成这个任务吗？\n\n此题和原题的不同点：\n\n$1$. 每种草药可以无限制地疯狂采摘。\n\n$2$. 药的种类眼花缭乱，采药时间好长好长啊！师傅等得菊花都谢了！", "inputFormat": "输入第一行有两个整数，分别代表总共能够用来采药的时间 $t$ 和代表山洞里的草药的数目 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行两个整数，第 $(i + 1)$ 行的整数 $a_i, b_i$ 分别表示采摘第 $i$ 种草药的时间和该草药的价值。", "outputFormat": "输出一行，这一行只包含一个整数，表示在规定的时间内，可以采到的草药的最大总价值。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $m \\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq m \\le 10^4$，$1 \\leq t \\leq 10^7$，且 $1 \\leq m \\times t \\leq 10^7$，$1 \\leq a_i, b_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1617", "type": "P", "difficulty": 3, "samples": [["5208\n", "five thousand two hundred and eight\n"], ["5280", "five thousand two hundred eighty"], ["5000", "five thousand"], ["5028", "five thousand and twenty eight\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "爱与愁的一千个伤心的理由", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第二章。\n\n经历了心痛后，爱与愁大神不行了。\n", "description": "月落乌啼问爱与愁大神为什么，爱与愁大神写了一个数字 $n$（$n \\le 9999$），说翻译成英语就知道为什么了。月落乌啼接过这个数字后，本想翻译成英语，但是班主任叫他去帮个忙。他想尽快知道答案，于是这个艰巨的任务就拜托你了。\n\n标准美式英语，仅在末两位 $ \\le 10$ 时加 `and` 且没有连字符。", "inputFormat": "只有一行，一个数 $n$（$n \\le 9999$）", "outputFormat": "一行英文，表示 $n$ 翻译成英语的答案。", "hint": "输出行初不大写。按标准美式英语输出，即两个非零的数中间没零则不加 `and`，行末无句号。", "locale": "zh-CN", "translations": {"en": {"title": "A Thousand Heartbreaking Reasons for Love and Sorrow", "background": "(This problem hides two song titles—see if you can find them.)\n\nChapter 2 of “The Story of Love and Sorrow, Part 1: heartache.”\n\nAfter experiencing heartache, the “Love and Sorrow” guru couldn’t carry on.", "description": "Yueluo Wuti asked the “Love and Sorrow” guru why, and the guru wrote a number $n$ ($n \\le 9999$), saying that translating it into English would reveal the reason. Yueluo Wuti took the number and planned to translate it, but the homeroom teacher asked him to help with something. He wanted the answer quickly, so he entrusted this task to you.\n\nUse standard American English; add `and` only when the last two digits are $\\le 10$, and do not use hyphens.", "inputFormat": "A single line containing an integer $n$ ($n \\le 9999$).", "outputFormat": "One line in English that is the translation of $n$.", "hint": "Do not capitalize the beginning of the output line. Follow standard American English: if there is no zero between two non-zero numbers, do not add `and`; no period at the end of the line.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爱与愁的一千个伤心的理由", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第二章。\n\n经历了心痛后，爱与愁大神不行了。\n", "description": "月落乌啼问爱与愁大神为什么，爱与愁大神写了一个数字 $n$（$n \\le 9999$），说翻译成英语就知道为什么了。月落乌啼接过这个数字后，本想翻译成英语，但是班主任叫他去帮个忙。他想尽快知道答案，于是这个艰巨的任务就拜托你了。\n\n标准美式英语，仅在末两位 $ \\le 10$ 时加 `and` 且没有连字符。", "inputFormat": "只有一行，一个数 $n$（$n \\le 9999$）", "outputFormat": "一行英文，表示 $n$ 翻译成英语的答案。", "hint": "输出行初不大写。按标准美式英语输出，即两个非零的数中间没零则不加 `and`，行末无句号。", "locale": "zh-CN"}}}
{"pid": "P1618", "type": "P", "difficulty": 2, "samples": [["1 2 3", "192 384 576\n219 438 657\n273 546 819\n327 654 981"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "枚举"], "title": "三连击（升级版）", "background": null, "description": "将 $1, 2,\\ldots, 9$ 共 $9$ 个数分成三组，分别组成三个三位数，且使这三个三位数的比例是 $A:B:C$，试求出所有满足条件的三个三位数，若无解，输出 `No!!!`。\n\n\n//感谢黄小U饮品完善题意", "inputFormat": "三个数，$A,B,C$。", "outputFormat": "若干行，每行 $3$ 个数字。按照每行第一个数字升序排列。", "hint": "保证 $0 \\le A<B<C \\le 999$。\n\n---\n\n$\\text{upd 2022.8.3}$：新增加二组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Triple Strike (Upgraded Version)", "background": "", "description": "Divide the $9$ numbers $1, 2,\\ldots, 9$ into three groups to form three three-digit numbers, such that these three three-digit numbers are in the ratio A:B:C. Find all triples that satisfy the condition; if there is no solution, output `No!!!`.\n\nThanks to Huang Xiao U Beverage for improving the problem statement.", "inputFormat": "Three numbers, A, B, C.", "outputFormat": "Several lines, each containing 3 numbers. Sort the lines by the first number in ascending order.", "hint": "It is guaranteed that $0 \\le A < B < C \\le 999$.\n\n$\\text{upd 2022.8.3}$: Added two more hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三连击（升级版）", "background": null, "description": "将 $1, 2,\\ldots, 9$ 共 $9$ 个数分成三组，分别组成三个三位数，且使这三个三位数的比例是 $A:B:C$，试求出所有满足条件的三个三位数，若无解，输出 `No!!!`。\n\n\n//感谢黄小U饮品完善题意", "inputFormat": "三个数，$A,B,C$。", "outputFormat": "若干行，每行 $3$ 个数字。按照每行第一个数字升序排列。", "hint": "保证 $0 \\le A<B<C \\le 999$。\n\n---\n\n$\\text{upd 2022.8.3}$：新增加二组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1619", "type": "P", "difficulty": 3, "samples": [["4\need\n", "Enter the number=\nPrime? No!\n4=2^2\n\nEnter the number=\n"], ["2\nend\n", "Enter the number=\nPrime? Yes!\n\nEnter the number=\n"], ["-1\nadfs\n", "Enter the number=\nPrime? No!\n\nEnter the number=\n"], ["1234###24#@13#@￥！1\nhehe\n", "Enter the number=\nPrime? No!\nThe number is too large!\n\nEnter the number=\n"], ["1.5\n1\n1234324123512343123\n@~@~@~@\n", "Enter the number=\nPrime? No!\n15=3^1*5^1\n\nEnter the number=\nPrime? No!\n\nEnter the number=\nPrime? No!\nThe number is too large!\n\nEnter the number=\n"], ["12\nhalt@@\n", "Enter the number=\nPrime? No!\n12=2^2*3^1\n\nEnter the number=\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "数学", "洛谷原创"], "title": "解一元二次方程的烦恼", "background": "JosephZheng 在写数学作业的预习。他往往使用 Casio 来帮忙解一元二次方程。但是 Casio 有一个问题，就是当 $\\Delta=b^2-4ac$ 为一个大素数或大合数时，其开平方的结果会以小数显示，而不是老师要求的二次根式形式。JosephZheng 很是苦恼，一遇到这种情况就要手动解方程。一天他再也忍不住了，于是打开了电脑，编了一个 prime 程序……于是悲剧的 OIer 们就要跟着疯狂的 JosephZheng 一起编这个程序，呵呵……", "description": "废话少说，给你一个大数 $N$（可能大于 $4 \\times 10^7$），让你进行素性判断，然后分解质因数。当然，初中数学题不可能有大于 $4 \\times 10^7$ 的数让你判断素性，因此超过范围的数可以忽略不计。为了让程序更加贴心，JosephZheng 多了一些要求，会在输入输出中给出具体情况。", "inputFormat": "一个大数 $N$（$N$ 为非负整数），其中这个数的各个数位之间可以插入各种符号（包括负号和小数点等，它们也需要被忽略），例如 $1234$ 可以为 `1 - 2alsdkjf3！@￥%！@@@##￥……！￥#-4` 等。你需要在这一长串乱码中找出这个要判断的数。\n\n**输入数据可能有多组，如果读到一行没有数字的字串即结束。**\n\n保证输入数据不超过 $100$ 组，字符串长度不超过 $1000$。", "outputFormat": "在读入数据之前先输出 `Enter the number=`，需要换行。\n\n然后输出 `Prime?`，问号后有一个空格，但不要换行。\n\n如果是质数则输出 `Yes!` 否则输出 `No!`。此时换行。\n\n若果是质数就 halt，若是小于 $2$ 的数则在输出 `No!` 后也 halt。\n\n若是合数则分解质因数。如果该数大于 $4 \\times 10^7$ 则输出 `The number is too large!`，然后 halt。\n\n否则分解质因数。\n\n输出结果的方式在输出样例中会详细给出。\n\n每组数据之间空一行。\n\n（halt：停止处理本组数据）", "hint": "编这道题的 JosephZheng 有些无聊，但是很考验基本功哦！仔细审题！\n\n水题一道。。。", "locale": "zh-CN", "translations": {"en": {"title": "The Trouble with Solving Quadratic Equations.", "background": "JosephZheng was doing prep for his math homework. He often used a Casio to help solve quadratic equations. However, Casio has a problem: when $\\Delta=b^2-4ac$ is a large prime or a large composite, its square root is displayed as a decimal rather than the teacher-required radical form. JosephZheng was quite troubled and had to solve such equations by hand whenever this happened. One day he could not stand it anymore, so he turned on his computer and wrote a prime program... and thus the unfortunate OIers had to follow the crazy JosephZheng and write this program together, hehe....", "description": "Enough chatter. Given a large number $N$ (possibly greater than $4 \\times 10^7$), determine whether it is prime, and then factor it into primes. Of course, junior high school problems will not ask you to test primality for numbers greater than $4 \\times 10^7$, so numbers beyond this range can be ignored. To make the program more user-friendly, JosephZheng added some requirements that specify the exact behavior in input and output.", "inputFormat": "A large number $N$ ($N$ is a non-negative integer), where arbitrary symbols can be inserted between its digits (including a minus sign and a decimal point, which should also be ignored). For example, $1234$ could appear as `1 - 2alsdkjf3！@￥%！@@@##￥……！￥#-4`, etc. You need to extract the number to be checked from this long garbled string.\n\nThe input testdata may contain multiple cases. Stop when a line containing no digits is read.\n\nIt is guaranteed that there are at most $100$ test cases, and each string has length at most $1000$.", "outputFormat": "Before reading the data, first output `Enter the number=` and print a newline.\n\nThen output `Prime?`, followed by a space after the question mark, but do not print a newline yet.\n\nIf the number is prime, output `Yes!`; otherwise, output `No!`. Then print a newline.\n\nIf it is prime, halt. If it is less than $2$, then after printing `No!`, also halt.\n\nIf it is composite, factor it into prime factors. If the number is greater than $4 \\times 10^7$, output `The number is too large!`, then halt.\n\nOtherwise, factor it into prime factors.\n\nThe exact output format for the factorization will be specified in the sample output.\n\nPrint a blank line between consecutive test cases.\n\n(halt: stop processing this test case).", "hint": "The author JosephZheng was a bit bored, but this really tests your basics. Read the problem carefully.\n\nA straightforward problem....\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "解一元二次方程的烦恼", "background": "JosephZheng 在写数学作业的预习。他往往使用 Casio 来帮忙解一元二次方程。但是 Casio 有一个问题，就是当 $\\Delta=b^2-4ac$ 为一个大素数或大合数时，其开平方的结果会以小数显示，而不是老师要求的二次根式形式。JosephZheng 很是苦恼，一遇到这种情况就要手动解方程。一天他再也忍不住了，于是打开了电脑，编了一个 prime 程序……于是悲剧的 OIer 们就要跟着疯狂的 JosephZheng 一起编这个程序，呵呵……", "description": "废话少说，给你一个大数 $N$（可能大于 $4 \\times 10^7$），让你进行素性判断，然后分解质因数。当然，初中数学题不可能有大于 $4 \\times 10^7$ 的数让你判断素性，因此超过范围的数可以忽略不计。为了让程序更加贴心，JosephZheng 多了一些要求，会在输入输出中给出具体情况。", "inputFormat": "一个大数 $N$（$N$ 为非负整数），其中这个数的各个数位之间可以插入各种符号（包括负号和小数点等，它们也需要被忽略），例如 $1234$ 可以为 `1 - 2alsdkjf3！@￥%！@@@##￥……！￥#-4` 等。你需要在这一长串乱码中找出这个要判断的数。\n\n**输入数据可能有多组，如果读到一行没有数字的字串即结束。**\n\n保证输入数据不超过 $100$ 组，字符串长度不超过 $1000$。", "outputFormat": "在读入数据之前先输出 `Enter the number=`，需要换行。\n\n然后输出 `Prime?`，问号后有一个空格，但不要换行。\n\n如果是质数则输出 `Yes!` 否则输出 `No!`。此时换行。\n\n若果是质数就 halt，若是小于 $2$ 的数则在输出 `No!` 后也 halt。\n\n若是合数则分解质因数。如果该数大于 $4 \\times 10^7$ 则输出 `The number is too large!`，然后 halt。\n\n否则分解质因数。\n\n输出结果的方式在输出样例中会详细给出。\n\n每组数据之间空一行。\n\n（halt：停止处理本组数据）", "hint": "编这道题的 JosephZheng 有些无聊，但是很考验基本功哦！仔细审题！\n\n水题一道。。。", "locale": "zh-CN"}}}
{"pid": "P1620", "type": "P", "difficulty": 3, "samples": [["10 10 0 0\r\n3 5 1 1\r\n", "0\r\n7\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "漂亮字串", "background": "", "description": "Caima 认为 $\\tt O$ 和 $\\tt X$ 是最优美的两个字母，由 $\\tt O,X$ 组成的串是最优美的串。在这些最优美的串中，如果任意只包含 $\\tt X$ 的子串，长度不超过 $\\max_{\\tt X}$，任意只包含 $\\tt O$ 的子串，长度不超过 $\\max_{\\tt O}$，而整个串最多有 $\\rm count_{\\tt O}$ 个 $\\tt O$，$\\rm count_{\\tt X}$ 个 $\\tt X$。那么这个就是超级优美无敌串。\n\n现在 Caima 想知道最长的超级优美无敌串有多长，希望你告诉他。", "inputFormat": "输入包含多行，至文件结束为止。\n\n每行四个数，依次是 $\\rm count_{\\tt O},\\rm count_{\\tt X},\\rm max_{\\tt O},\\rm max_{\\tt X}$。\n\n\n\n", "outputFormat": "每组数据输出一行，一个数表示最长的超级优美无敌串的长度。\n", "hint": "### 样例 2 解释\n\n- $\\tt XOXOXOX$。\n\n\n### 数据范围及约定\n\n最多 $1000$ 组数据，\n\n其中 $30\\%$ 的数据 $0\\le \\rm count_{\\tt O},\\rm count_{\\tt X},\\rm max_{\\tt O},\\rm max_{\\tt X} \\le 20$，且数据组数不超过 $20$ 组。\n\n对于全部数据，$0 \\le \\rm count_{\\tt O},\\rm count_{\\tt X},\\rm max_{\\tt O},\\rm max_{\\tt X}\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Beautiful String", "background": "", "description": "Caima thinks that $\\tt O$ and $\\tt X$ are the two most beautiful letters, and a string made of $\\tt O, X$ is a most beautiful string. Among these most beautiful strings, if every substring that contains only $\\tt X$ has length at most $\\max_{\\tt X}$, every substring that contains only $\\tt O$ has length at most $\\max_{\\tt O}$, and the whole string has at most $\\rm count_{\\tt O}$ letters $\\tt O$ and $\\rm count_{\\tt X}$ letters $\\tt X$, then it is a super beautiful unbeatable string.\n\nNow Caima wants to know how long the longest super beautiful unbeatable string can be. Please tell him.", "inputFormat": "The input contains multiple lines, until the end of file.\n\nEach line has four numbers, in order: $\\rm count_{\\tt O}, \\rm count_{\\tt X}, \\rm max_{\\tt O}, \\rm max_{\\tt X}$.", "outputFormat": "For each set of testdata, output one line with a single number, the length of the longest super beautiful unbeatable string.", "hint": "### Sample 2 Explanation\n\n- $\\tt XOXOXOX$.\n\n### Constraints and Conventions\n\nAt most $1000$ groups of testdata.\n\nFor $30\\%$ of the testdata, $0 \\le \\rm count_{\\tt O}, \\rm count_{\\tt X}, \\rm max_{\\tt O}, \\rm max_{\\tt X} \\le 20$, and the number of groups of testdata does not exceed $20$.\n\nFor all testdata, $0 \\le \\rm count_{\\tt O}, \\rm count_{\\tt X}, \\rm max_{\\tt O}, \\rm max_{\\tt X} \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "漂亮字串", "background": "", "description": "Caima 认为 $\\tt O$ 和 $\\tt X$ 是最优美的两个字母，由 $\\tt O,X$ 组成的串是最优美的串。在这些最优美的串中，如果任意只包含 $\\tt X$ 的子串，长度不超过 $\\max_{\\tt X}$，任意只包含 $\\tt O$ 的子串，长度不超过 $\\max_{\\tt O}$，而整个串最多有 $\\rm count_{\\tt O}$ 个 $\\tt O$，$\\rm count_{\\tt X}$ 个 $\\tt X$。那么这个就是超级优美无敌串。\n\n现在 Caima 想知道最长的超级优美无敌串有多长，希望你告诉他。", "inputFormat": "输入包含多行，至文件结束为止。\n\n每行四个数，依次是 $\\rm count_{\\tt O},\\rm count_{\\tt X},\\rm max_{\\tt O},\\rm max_{\\tt X}$。\n\n\n\n", "outputFormat": "每组数据输出一行，一个数表示最长的超级优美无敌串的长度。\n", "hint": "### 样例 2 解释\n\n- $\\tt XOXOXOX$。\n\n\n### 数据范围及约定\n\n最多 $1000$ 组数据，\n\n其中 $30\\%$ 的数据 $0\\le \\rm count_{\\tt O},\\rm count_{\\tt X},\\rm max_{\\tt O},\\rm max_{\\tt X} \\le 20$，且数据组数不超过 $20$ 组。\n\n对于全部数据，$0 \\le \\rm count_{\\tt O},\\rm count_{\\tt X},\\rm max_{\\tt O},\\rm max_{\\tt X}\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1621", "type": "P", "difficulty": 3, "samples": [["10 20 3", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "并查集", "枚举", "素数判断,质数,筛法"], "title": "集合", "background": null, "description": "Caima 给你了所有 $[a,b]$ 范围内的整数。一开始每个整数都属于各自的集合。每次你需要选择两个属于不同集合的整数，如果这两个整数拥有大于等于 $p$ 的公共质因数，那么把它们所在的集合合并。\n\n重复如上操作，直到没有可以合并的集合为止。\n\n现在 Caima 想知道，最后有多少个集合。", "inputFormat": "一行，共三个整数 $a,b,p$，用空格隔开。", "outputFormat": "一个数，表示最终集合的个数。", "hint": "#### 样例 1 解释\n\n对于样例给定的数据，最后有 $\\{10,20,12,15,18\\},\\{13\\},\\{14\\},\\{16\\},\\{17\\},\\{19\\},\\{11\\}$ 共 $7$ 个集合，所以输出应该为 $7$。\n\n#### 数据规模与约定\n- 对于 $80\\%$ 的数据，$1 \\leq a \\leq b \\leq 10^3$。\n- 对于 $100\\%$ 的数据，$1 \\leq a \\leq b \\leq 10^5,2 \\leq p \\leq b$。", "locale": "zh-CN", "translations": {"en": {"title": "Sets", "background": "", "description": "Caima gives you all integers in the range $[a,b]$. Initially, each integer belongs to its own set. Each time, you may choose two integers from different sets; if these two integers have a common prime factor greater than or equal to $p$, merge the sets that contain them.\n\nRepeat the operation above until no more sets can be merged.\n\nNow Caima wants to know how many sets remain in the end.", "inputFormat": "One line containing three integers $a,b,p$, separated by spaces.", "outputFormat": "A single integer, the number of sets in the end.", "hint": "#### Explanation for Sample 1\n\nFor the given sample, the final sets are {10, 20, 12, 15, 18}, {13}, {14}, {16}, {17}, {19}, {11}, so there are 7 sets in total and the output should be 7.\n\n#### Constraints\n- For 80% of the testdata, $1 \\leq a \\leq b \\leq 10^3$.\n- For 100% of the testdata, $1 \\leq a \\leq b \\leq 10^5$, $2 \\leq p \\leq b$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "集合", "background": null, "description": "Caima 给你了所有 $[a,b]$ 范围内的整数。一开始每个整数都属于各自的集合。每次你需要选择两个属于不同集合的整数，如果这两个整数拥有大于等于 $p$ 的公共质因数，那么把它们所在的集合合并。\n\n重复如上操作，直到没有可以合并的集合为止。\n\n现在 Caima 想知道，最后有多少个集合。", "inputFormat": "一行，共三个整数 $a,b,p$，用空格隔开。", "outputFormat": "一个数，表示最终集合的个数。", "hint": "#### 样例 1 解释\n\n对于样例给定的数据，最后有 $\\{10,20,12,15,18\\},\\{13\\},\\{14\\},\\{16\\},\\{17\\},\\{19\\},\\{11\\}$ 共 $7$ 个集合，所以输出应该为 $7$。\n\n#### 数据规模与约定\n- 对于 $80\\%$ 的数据，$1 \\leq a \\leq b \\leq 10^3$。\n- 对于 $100\\%$ 的数据，$1 \\leq a \\leq b \\leq 10^5,2 \\leq p \\leq b$。", "locale": "zh-CN"}}}
{"pid": "P1622", "type": "P", "difficulty": 4, "samples": [["20 3\n3 6 14\n", "35\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "区间 DP"], "title": "释放囚犯", "background": null, "description": "Caima 王国中有一个奇怪的监狱，这个监狱一共有 $P$ 个牢房，这些牢房一字排开，第 $i$ 个紧挨着第 $i+1$ 个（最后一个除外）。现在正好牢房是满的。\n\n上级下发了一个释放名单，要求每天释放名单上的一个人。这可把看守们吓得不轻，因为看守们知道，现在牢房中的 $P$ 个人，相邻牢房中的人相互之间可以传话，如果某个人离开了，那么原来和这个人能说上话的人，就会把这个消息传给所有他能传到话的人。所有知道了这件事的人都会很气愤，导致他们那天会一直大吼大叫，搞得看守很头疼。如果给这些要发火的人吃上肉，他们就会安静点。", "inputFormat": "第一行两个整数 $P$ 和 $Q$，$Q$ 表示释放名单上的人数；\n\n第二行 $Q$ 个整数，表示要释放哪些人，保证按递增的顺序给出。", "outputFormat": "仅一行，表示最少要给多少人次送肉吃。", "hint": "### 样例说明 #1\n\n先释放 $14$ 号监狱中的罪犯，要给 $1$ 到 $13$ 号监狱和 $15$ 到 $20$ 号监狱中的 $19$ 人送肉吃；再释放 $6$ 号监狱中的罪犯，要给 $1$ 到 $5$ 号监狱和 $7$ 到 $13$ 号监狱中的 $12$ 人送肉吃；最后释放 $3$ 号监狱中的罪犯，要给 $1$ 到 $2$ 号监狱和 $4$ 到 $5$ 号监狱中的 $4$ 人送肉吃。\n\n### 数据规模与约定\n\n- 对于 $50\\%$ 的数据，$1 \\le P \\le 100$，$1 \\le Q \\le 5$；\n- 对于 $100\\%$ 的数据，$1 \\le P \\le 10^3$，$1 \\le Q \\le 100$，$Q \\le P$，保证释放的人所在的牢房编号按递增的顺序给出。", "locale": "zh-CN", "translations": {"en": {"title": "Release the Prisoners", "background": "", "description": "There is a strange prison in the Kingdom of Caima. The prison has $P$ cells arranged in a line, where the $i$-th cell is adjacent to the $(i+1)$-th cell (except for the last one). All cells are currently full.\n\nA release list has been issued from above, requiring one person from the list to be released each day. This frightens the guards, because the $P$ prisoners can pass messages between adjacent cells. If someone leaves, then the people who could talk to this person will pass the news to everyone they can reach. Everyone who learns about it will become furious and will keep shouting that day, which gives the guards a headache. If you give meat to those who are about to get angry, they will calm down.", "inputFormat": "The first line contains two integers $P$ and $Q$, where $Q$ is the number of people on the release list.\n\nThe second line contains $Q$ integers, indicating which prisoners to release, guaranteed to be given in increasing order.", "outputFormat": "Output a single line with the minimum total number of person-times of meat deliveries.", "hint": "### Sample Explanation #1\n\nFirst release the prisoner in cell $14$: you need to feed the $19$ people in cells $1$ to $13$ and $15$ to $20$. Then release the prisoner in cell $6$: you need to feed the $12$ people in cells $1$ to $5$ and $7$ to $13$. Finally, release the prisoner in cell $3$: you need to feed the $4$ people in cells $1$ to $2$ and $4$ to $5$.\n\n### Constraints\n\n- For $50\\%$ of the testdata, $1 \\le P \\le 100$, $1 \\le Q \\le 5$.\n- For $100\\%$ of the testdata, $1 \\le P \\le 10^3$, $1 \\le Q \\le 100$, $Q \\le P$, and the indices of the prisoners to be released are given in increasing order.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "释放囚犯", "background": null, "description": "Caima 王国中有一个奇怪的监狱，这个监狱一共有 $P$ 个牢房，这些牢房一字排开，第 $i$ 个紧挨着第 $i+1$ 个（最后一个除外）。现在正好牢房是满的。\n\n上级下发了一个释放名单，要求每天释放名单上的一个人。这可把看守们吓得不轻，因为看守们知道，现在牢房中的 $P$ 个人，相邻牢房中的人相互之间可以传话，如果某个人离开了，那么原来和这个人能说上话的人，就会把这个消息传给所有他能传到话的人。所有知道了这件事的人都会很气愤，导致他们那天会一直大吼大叫，搞得看守很头疼。如果给这些要发火的人吃上肉，他们就会安静点。", "inputFormat": "第一行两个整数 $P$ 和 $Q$，$Q$ 表示释放名单上的人数；\n\n第二行 $Q$ 个整数，表示要释放哪些人，保证按递增的顺序给出。", "outputFormat": "仅一行，表示最少要给多少人次送肉吃。", "hint": "### 样例说明 #1\n\n先释放 $14$ 号监狱中的罪犯，要给 $1$ 到 $13$ 号监狱和 $15$ 到 $20$ 号监狱中的 $19$ 人送肉吃；再释放 $6$ 号监狱中的罪犯，要给 $1$ 到 $5$ 号监狱和 $7$ 到 $13$ 号监狱中的 $12$ 人送肉吃；最后释放 $3$ 号监狱中的罪犯，要给 $1$ 到 $2$ 号监狱和 $4$ 到 $5$ 号监狱中的 $4$ 人送肉吃。\n\n### 数据规模与约定\n\n- 对于 $50\\%$ 的数据，$1 \\le P \\le 100$，$1 \\le Q \\le 5$；\n- 对于 $100\\%$ 的数据，$1 \\le P \\le 10^3$，$1 \\le Q \\le 100$，$Q \\le P$，保证释放的人所在的牢房编号按递增的顺序给出。", "locale": "zh-CN"}}}
{"pid": "P1623", "type": "P", "difficulty": 4, "samples": [["7\n1 3 2 4 7\n2 1 3\n4 1 6\n3 0\n7 1 5\n5 0\n6 0", "3\n4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["动态规划 DP", "高精度", "树形数据结构", "2007", "CEOI（中欧）"], "title": "[CEOI 2007] 树的匹配 Treasury", "background": "", "description": "给一棵树，你可以匹配有边相连的两个点，问你这棵树的最大匹配是多少，并且计算出有多少种最大匹配。", "inputFormat": "第一行一个整数 $N$，表示有多少个结点。\n\n接下来 $N$ 行，每行第一个整数，表示要描述的那个结点。然后一个整数 $m$，表示这个结点有 $m$ 个儿子，接下来 $m$ 个整数，表示它的 $m$   个儿子的编号。", "outputFormat": "输出两行，第一行输出最大匹配数，第二行输出最大匹配方案数。\n", "hint": "$1\\leq N\\leq 10^3$，其中 $40\\%$ 的数据答案不超过 $10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[CEOI 2007] Tree Matching Treasury", "background": "", "description": "Given a tree, you may match two vertices that are connected by an edge. Find the size of a maximum matching of this tree, and compute how many maximum matchings there are.", "inputFormat": "The first line contains an integer $N$, the number of nodes.\n\nEach of the next $N$ lines describes one node: the first integer is the ID of the node being described, then an integer $m$ indicating that this node has $m$ children, followed by $m$ integers, the IDs of its $m$ children.", "outputFormat": "Output two lines: the first line is the size of the maximum matching, and the second line is the number of maximum matchings.", "hint": "Constraints: $1\\leq N\\leq 10^3$. For 40% of the testdata, the answer does not exceed $10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CEOI 2007] 树的匹配 Treasury", "background": "", "description": "给一棵树，你可以匹配有边相连的两个点，问你这棵树的最大匹配是多少，并且计算出有多少种最大匹配。", "inputFormat": "第一行一个整数 $N$，表示有多少个结点。\n\n接下来 $N$ 行，每行第一个整数，表示要描述的那个结点。然后一个整数 $m$，表示这个结点有 $m$ 个儿子，接下来 $m$ 个整数，表示它的 $m$   个儿子的编号。", "outputFormat": "输出两行，第一行输出最大匹配数，第二行输出最大匹配方案数。\n", "hint": "$1\\leq N\\leq 10^3$，其中 $40\\%$ 的数据答案不超过 $10^8$。", "locale": "zh-CN"}}}
{"pid": "P1624", "type": "P", "difficulty": 5, "samples": [["2\r\nand\r\nof\r\nACM academy of computer makers\r\nRADAR radio detection and ranging\r\nLAST CASE", "ACM can be formed in 2 ways\r\nRADAR is not a valid abbreviation"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "单词缩写", "background": null, "description": "树树发现好多计算机中的单词都是缩写，如 GDB 是全称 Gnu DeBug 的缩写。但是，有时候缩写对应的全称会不固定，如缩写 LINUX 可以理解为：\n\n1. LINus’s UniX\n2. LINUs’s miniX\n3. Linux Is Not UniX\n\n现在树树给出一个单词缩写，以及一个固定的全称（若干个单词组成，空格隔开）。全称中可能会有无效的单词，需要忽略掉，一个合法缩写要求每个有效单词中至少有一个字符出现在缩写中，所写必须按顺序出现在全称中。\n\n对于给定的缩写和一个固定的全称，问有多少种解释方法？解释方法为所写的每个字母在全称每个有效单词中出现的位置，有一个字母位置不同，就认为是不同的解释方法。", "inputFormat": "第一行输入一个 $N$，表示有 $N$ 个无效单词。\n\n接下来 $N$ 行分别描述一个由小写字母组成的无效单词。\n\n最后是若干个询问，先给出缩写（只有大写字母），然后给出一个全称，读入以 `LASTCASE` 结束。", "outputFormat": "对于每个询问先输出缩写，如果当前缩写不合法，则输出 `is not a valid abbreviation`，否则输出 `can be formed in i ways`（$i$表示解释方法数）。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 100$，每行字符串长度不超过 $150$，询问次数不超过 $20$，最后方案数不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Word Abbreviation", "background": "", "description": "Shushu noticed that many computer terms are abbreviations. For example, GDB is the abbreviation of Gnu DeBug. However, sometimes an abbreviation may have multiple possible full forms. For example, LINUX can be understood as:\n1. LINus’s UniX\n2. LINUs’s miniX\n3. Linux Is Not UniX\n\nNow Shushu gives an abbreviation and a fixed full form (several words separated by spaces). Some words in the full form may be invalid and should be ignored. A valid abbreviation requires that:\n- Each valid word contributes at least one character that appears in the abbreviation.\n- The selected letters must appear in order in the full form (within each word and across words).\n\nFor the given abbreviation and full form, how many interpretations are there? An interpretation is defined by the positions of the letters chosen in each valid word. If any letter’s position differs, they are considered different interpretations.", "inputFormat": "The first line contains an integer $N$, the number of invalid words.\n\nThe next $N$ lines each contain one invalid word, consisting of lowercase letters.\n\nThen follow multiple queries. Each query provides an abbreviation (uppercase letters only) followed by a full form. Input ends with a line containing `LASTCASE`.", "outputFormat": "For each query, first output the abbreviation. If the abbreviation is not valid, output `is not a valid abbreviation`; otherwise, output `can be formed in i ways` (where $i$ is the number of interpretations).", "hint": "Constraints\n\nFor all testdata, $1 \\le N \\le 100$, the length of each string does not exceed $150$, the number of queries does not exceed $20$, and the number of interpretations does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "单词缩写", "background": null, "description": "树树发现好多计算机中的单词都是缩写，如 GDB 是全称 Gnu DeBug 的缩写。但是，有时候缩写对应的全称会不固定，如缩写 LINUX 可以理解为：\n\n1. LINus’s UniX\n2. LINUs’s miniX\n3. Linux Is Not UniX\n\n现在树树给出一个单词缩写，以及一个固定的全称（若干个单词组成，空格隔开）。全称中可能会有无效的单词，需要忽略掉，一个合法缩写要求每个有效单词中至少有一个字符出现在缩写中，所写必须按顺序出现在全称中。\n\n对于给定的缩写和一个固定的全称，问有多少种解释方法？解释方法为所写的每个字母在全称每个有效单词中出现的位置，有一个字母位置不同，就认为是不同的解释方法。", "inputFormat": "第一行输入一个 $N$，表示有 $N$ 个无效单词。\n\n接下来 $N$ 行分别描述一个由小写字母组成的无效单词。\n\n最后是若干个询问，先给出缩写（只有大写字母），然后给出一个全称，读入以 `LASTCASE` 结束。", "outputFormat": "对于每个询问先输出缩写，如果当前缩写不合法，则输出 `is not a valid abbreviation`，否则输出 `can be formed in i ways`（$i$表示解释方法数）。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 100$，每行字符串长度不超过 $150$，询问次数不超过 $20$，最后方案数不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1625", "type": "P", "difficulty": 5, "samples": [["1 2", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度"], "title": "求和", "background": "", "description": "高斯还是个小 P 孩的时候就求出\n\n$$\\sum_{i=1}^n i= \\frac{n \\times (n+1)}{2}$$\n\nLT 还是个小 P 孩的时候求出\n\n$$\\sum_{i=1}^{n-1} \\frac{1}{i\\times (i+1)}=1-\\frac{1}{n}$$\n\n现在，你还是个小 P 孩的时候，你要求出：\n\n$$\\sum_{i=1}^n \\frac{1}{\\prod_{j=i}^{i+m-1}j}=S$$\n", "inputFormat": "输入两个整数 $n, m$。", "outputFormat": "输出占两行，第一行一个整数 $X$，第二行整数 $Y$，表示 $S=\\frac{X}{Y}$，且 $X$ 和 $Y$ 互质。", "hint": "$m>1$，$n>0$。\n\n$50 \\%$ 的数据满足 $n \\leq 50$。  \n$100 \\%$ 的数据满足 $n+m \\leq 500$。", "locale": "zh-CN", "translations": {"en": {"title": "Summation", "background": "", "description": "When Gauss was still a kid, he found that\n\n$$\\sum_{i=1}^n i= \\frac{n \\times (n+1)}{2}.$$\n\nWhen LT was still a kid, he found that\n\n$$\\sum_{i=1}^{n-1} \\frac{1}{i\\times (i+1)}=1-\\frac{1}{n}.$$\n\nNow, while you are still a kid, you need to compute:\n\n$$\\sum_{i=1}^n \\frac{1}{\\prod_{j=i}^{i+m-1}j}=S.$$", "inputFormat": "Input two integers $n, m$.", "outputFormat": "Output two lines. The first line contains an integer $X$, and the second line contains an integer $Y$, indicating that $S=\\frac{X}{Y}$, and $X$ and $Y$ are coprime.", "hint": "$m>1$, $n>0$.\n\n$50 \\%$ of the testdata satisfy $n \\leq 50$.  \n$100 \\%$ of the testdata satisfy $n+m \\leq 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求和", "background": "", "description": "高斯还是个小 P 孩的时候就求出\n\n$$\\sum_{i=1}^n i= \\frac{n \\times (n+1)}{2}$$\n\nLT 还是个小 P 孩的时候求出\n\n$$\\sum_{i=1}^{n-1} \\frac{1}{i\\times (i+1)}=1-\\frac{1}{n}$$\n\n现在，你还是个小 P 孩的时候，你要求出：\n\n$$\\sum_{i=1}^n \\frac{1}{\\prod_{j=i}^{i+m-1}j}=S$$\n", "inputFormat": "输入两个整数 $n, m$。", "outputFormat": "输出占两行，第一行一个整数 $X$，第二行整数 $Y$，表示 $S=\\frac{X}{Y}$，且 $X$ 和 $Y$ 互质。", "hint": "$m>1$，$n>0$。\n\n$50 \\%$ 的数据满足 $n \\leq 50$。  \n$100 \\%$ 的数据满足 $n+m \\leq 500$。", "locale": "zh-CN"}}}
{"pid": "P1626", "type": "P", "difficulty": 2, "samples": [["7 3\n30\n17\n26\n41\n19\n38\n18", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "排序"], "title": "象棋比赛", "background": "", "description": "有 $N$ 个人要参加国际象棋比赛，该比赛要进行 $K$ 场对弈。每个人最多参加两场对弈，最少参加零场对弈。每个人都有一个与其他人不相同的等级（用一个正整数来表示）。\n\n在对弈中，等级高的人必须用黑色的棋子，等级低的人必须用白色的棋子。每个人最多只能用一次黑色的棋子和一次白色的棋子。为增加比赛的可观度，观众希望 $K$ 场对弈中双方的等级差的总和最小。\n\n比如有 $7$ 个选手，他们的等级分别是 $30,17,26,41,19,38,18$，要进行 $3$ 场比赛。最好的安排是选手 $2$ 对选手 $7$，选手 $7$ 对选手 $5$，选手 $6$ 对选手 $4$。此时等级差的总和等于 $(18-17)+(19-18)+(41-38)=5$ 达到最小。", "inputFormat": "第一行两个正整数 $N,K$。\n\n接下来有 $N$ 行，第 $i$ 行表示第 $i-1$ 个人等级。\n\n", "outputFormat": "在第一行输出最小的等级差的总和。\n", "hint": "### 数据范围及约定\n\n- 在 $90\\%$ 的数据中，$1 \\le N \\le 3000$；\n- 在 $100\\%$ 的数据中，$1 \\le N \\le 100000$。\n\n保证所有输入数据中等级的值小于 $10^9$，$1 \\le K \\le N-1$。", "locale": "zh-CN", "translations": {"en": {"title": "Chess Tournament", "background": "", "description": "There are $N$ people participating in an international chess tournament, where $K$ games will be played. Each person can participate in at most two games and may also play zero games. Each person has a unique rating (represented by a positive integer, and all ratings are distinct).\n\nIn each game, the higher-rated player must use the black pieces, and the lower-rated player must use the white pieces. Each person can use the black pieces at most once and the white pieces at most once. To make the tournament more exciting, the audience hopes that the sum of rating differences between the two players across the $K$ games is minimized.\n\nFor example, there are $7$ players with ratings $30, 17, 26, 41, 19, 38, 18$, and $3$ games are to be played. The best arrangement is player $2$ vs player $7$, player $7$ vs player $5$, and player $6$ vs player $4$. In this case, the sum of rating differences equals $(18-17)+(19-18)+(41-38)=5$, which is minimal.", "inputFormat": "The first line contains two positive integers $N, K$.\n\nThe next $N$ lines follow. The $i$-th line contains the rating of the $i$-th person.", "outputFormat": "On the first line, output the minimal possible sum of rating differences.", "hint": "Constraints\n\n- In $90\\%$ of the testdata, $1 \\le N \\le 3000$.\n- In $100\\%$ of the testdata, $1 \\le N \\le 100000$.\n- It is guaranteed that all ratings are less than $10^9$, and $1 \\le K \\le N - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "象棋比赛", "background": "", "description": "有 $N$ 个人要参加国际象棋比赛，该比赛要进行 $K$ 场对弈。每个人最多参加两场对弈，最少参加零场对弈。每个人都有一个与其他人不相同的等级（用一个正整数来表示）。\n\n在对弈中，等级高的人必须用黑色的棋子，等级低的人必须用白色的棋子。每个人最多只能用一次黑色的棋子和一次白色的棋子。为增加比赛的可观度，观众希望 $K$ 场对弈中双方的等级差的总和最小。\n\n比如有 $7$ 个选手，他们的等级分别是 $30,17,26,41,19,38,18$，要进行 $3$ 场比赛。最好的安排是选手 $2$ 对选手 $7$，选手 $7$ 对选手 $5$，选手 $6$ 对选手 $4$。此时等级差的总和等于 $(18-17)+(19-18)+(41-38)=5$ 达到最小。", "inputFormat": "第一行两个正整数 $N,K$。\n\n接下来有 $N$ 行，第 $i$ 行表示第 $i-1$ 个人等级。\n\n", "outputFormat": "在第一行输出最小的等级差的总和。\n", "hint": "### 数据范围及约定\n\n- 在 $90\\%$ 的数据中，$1 \\le N \\le 3000$；\n- 在 $100\\%$ 的数据中，$1 \\le N \\le 100000$。\n\n保证所有输入数据中等级的值小于 $10^9$，$1 \\le K \\le N-1$。", "locale": "zh-CN"}}}
{"pid": "P1627", "type": "P", "difficulty": 4, "samples": [["7 4\n5 7 2 4 3 1 6 ", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2009", "重庆", "各省省选", "排序", "前缀和"], "title": "[CQOI2009] 中位数", "background": "", "description": "给出 $1,2,...,n$ 的一个排列，统计该排列有多少个长度为奇数的连续子序列的中位数是 $b$。中位数是指把所有元素从小到大排列后，位于中间的数。", "inputFormat": "第一行为两个正整数 $n$ 和 $b$，第二行为 $1,2,...,n$ 的排列。", "outputFormat": "输出一个整数，即中位数为 $b$ 的连续子序列个数。\n", "hint": "#### 数据规模与约定\n\n对于 $30\\%$ 的数据中，满足 $n \\le 100$；\n\n对于 $60\\%$ 的数据中，满足 $n \\le 1000$；\n\n对于 $100\\%$ 的数据中，满足 $n \\le 100000,1 \\le b \\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2009] Median", "background": "", "description": "Given a permutation of $1,2,...,n$, count how many contiguous subsequences of odd length have the median equal to $b$. The median is the number that lies in the middle after sorting all elements in nondecreasing order.", "inputFormat": "The first line contains two positive integers $n$ and $b$. The second line contains a permutation of $1,2,...,n$.", "outputFormat": "Output a single integer: the number of contiguous subsequences whose median is $b$.", "hint": "#### Constraints\n\nFor $30\\%$ of the testdata, $n \\le 100$；\n\nFor $60\\%$ of the testdata, $n \\le 1000$；\n\nFor $100\\%$ of the testdata, $n \\le 100000,1 \\le b \\le n$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2009] 中位数", "background": "", "description": "给出 $1,2,...,n$ 的一个排列，统计该排列有多少个长度为奇数的连续子序列的中位数是 $b$。中位数是指把所有元素从小到大排列后，位于中间的数。", "inputFormat": "第一行为两个正整数 $n$ 和 $b$，第二行为 $1,2,...,n$ 的排列。", "outputFormat": "输出一个整数，即中位数为 $b$ 的连续子序列个数。\n", "hint": "#### 数据规模与约定\n\n对于 $30\\%$ 的数据中，满足 $n \\le 100$；\n\n对于 $60\\%$ 的数据中，满足 $n \\le 1000$；\n\n对于 $100\\%$ 的数据中，满足 $n \\le 100000,1 \\le b \\le n$。", "locale": "zh-CN"}}}
{"pid": "P1628", "type": "P", "difficulty": 2, "samples": [["6\nna\nno\nki\nki\nka\nku\nk", "ka\nki\nki\nku"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "堆", "排序"], "title": "合并序列", "background": "", "description": "有 $N$ 个单词和字符串 $T$，按字典序输出以字符串 $T$ 为前缀的所有单词。", "inputFormat": "输入文件第一行包含一个正整数 $N$；\n\n接下来 $N$ 行，每行一个单词，长度不超过 $100$；\n\n最后一行包含字符串 $T$。", "outputFormat": "按字典序升序输出答案。\n", "hint": "【数据规模】\n\n对于 $60\\%$ 的数据，满足 $1 \\le N \\le 1000$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 100000$ 且所有字符均为小写字母。", "locale": "zh-CN", "translations": {"en": {"title": "Merge Sequences", "background": "", "description": "Given $N$ words and a string $T$, output all words that have $T$ as a prefix, in lexicographical order.", "inputFormat": "The first line contains a positive integer $N$.\nThe next $N$ lines each contain one word, with length at most $100$.\nThe last line contains the string $T$.", "outputFormat": "Output all such words in ascending lexicographical order.", "hint": "Constraints\n- For $60\\%$ of the testdata, $1 \\le N \\le 1000$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 100000$ and all characters are lowercase letters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "合并序列", "background": "", "description": "有 $N$ 个单词和字符串 $T$，按字典序输出以字符串 $T$ 为前缀的所有单词。", "inputFormat": "输入文件第一行包含一个正整数 $N$；\n\n接下来 $N$ 行，每行一个单词，长度不超过 $100$；\n\n最后一行包含字符串 $T$。", "outputFormat": "按字典序升序输出答案。\n", "hint": "【数据规模】\n\n对于 $60\\%$ 的数据，满足 $1 \\le N \\le 1000$；\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 100000$ 且所有字符均为小写字母。", "locale": "zh-CN"}}}
{"pid": "P1629", "type": "P", "difficulty": 3, "samples": [["5 10\n2 3 5\n1 5 5\n3 5 6\n1 2 8\n1 3 8\n5 3 4\n4 1 8\n4 5 3\n3 5 6\n5 4 2", "83"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "优先队列", "最短路", "队列"], "title": "邮递员送信", "background": "", "description": "有一个邮递员要送东西，邮局在节点 $1$。他总共要送 $n-1$ 样东西，其目的地分别是节点 $2$ 到节点 $n$。由于这个城市的交通比较繁忙，因此所有的道路都是单行的，共有 $m$ 条道路。这个邮递员每次只能带一样东西，并且**运送每件物品过后必须返回邮局**。求送完这 $n-1$ 样东西并且**最终回到邮局**最少需要的时间。", "inputFormat": "第一行包括两个整数，$n$ 和 $m$，表示城市的节点数量和道路数量。\n\n第二行到第 $(m+1)$ 行，每行三个整数，$u,v,w$，表示从 $u$ 到 $v$ 有一条通过时间为 $w$ 的道路。", "outputFormat": "输出仅一行，包含一个整数，为最少需要的时间。", "hint": "对于 $30\\%$ 的数据，$1 \\leq n \\leq 200$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^3$，$1 \\leq m \\leq 10^5$，$1\\leq u,v \\leq n$，$1 \\leq w \\leq 10^4$，输入保证任意两点都能互相到达。", "locale": "zh-CN", "translations": {"en": {"title": "Postman Delivers Mail", "background": "", "description": "There is a postman who needs to deliver items, and the post office is at node $1$. He needs to deliver $n-1$ items, with destinations at nodes $2$ through $n$. Because the city’s traffic is busy, all roads are one-way, with a total of $m$ roads. The postman can carry only one item at a time, and **after delivering each item, he must return to the post office**. Find the minimum time needed to deliver all $n-1$ items and **finally return to the post office**.", "inputFormat": "The first line contains two integers, $n$ and $m$, denoting the number of nodes and roads in the city.\n\nFrom the second line to the $(m+1)$-th line, each line contains three integers $u,v,w$, indicating there is a one-way road from $u$ to $v$ with travel time $w$.", "outputFormat": "Output a single line containing one integer, the minimum required time.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $1 \\leq n \\leq 200$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10^3$, $1 \\leq m \\leq 10^5$, $1 \\leq u,v \\leq n$, $1 \\leq w \\leq 10^4$. The input guarantees that any two nodes can reach each other (the directed graph is strongly connected).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "邮递员送信", "background": "", "description": "有一个邮递员要送东西，邮局在节点 $1$。他总共要送 $n-1$ 样东西，其目的地分别是节点 $2$ 到节点 $n$。由于这个城市的交通比较繁忙，因此所有的道路都是单行的，共有 $m$ 条道路。这个邮递员每次只能带一样东西，并且**运送每件物品过后必须返回邮局**。求送完这 $n-1$ 样东西并且**最终回到邮局**最少需要的时间。", "inputFormat": "第一行包括两个整数，$n$ 和 $m$，表示城市的节点数量和道路数量。\n\n第二行到第 $(m+1)$ 行，每行三个整数，$u,v,w$，表示从 $u$ 到 $v$ 有一条通过时间为 $w$ 的道路。", "outputFormat": "输出仅一行，包含一个整数，为最少需要的时间。", "hint": "对于 $30\\%$ 的数据，$1 \\leq n \\leq 200$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^3$，$1 \\leq m \\leq 10^5$，$1\\leq u,v \\leq n$，$1 \\leq w \\leq 10^4$，输入保证任意两点都能互相到达。", "locale": "zh-CN"}}}
{"pid": "P1630", "type": "P", "difficulty": 3, "samples": [["1\n2 3\n", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "求和", "background": "", "description": "求 $1^b+2^b+\\cdots + a^b$ 的和除以 $10^4$ 的余数。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $N$，表示共有 $N$ 组测试数据。\n\n对于每组数据，一行两个整数 $a,b$。", "outputFormat": "对于每组数据，一行一个整数，表示答案。", "hint": "对于 $30\\%$ 的数据，$N \\le 10$，$a,b \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 100$，$1 \\le a,b \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Summation", "background": "", "description": "Find the remainder when the sum $1^b+2^b+\\cdots + a^b$ is divided by $10^4$.", "inputFormat": "**This problem contains multiple test cases.**\n\nThe first line contains an integer $N$, indicating that there are $N$ test cases.\n\nFor each test case, one line contains two integers $a,b$.", "outputFormat": "For each test case, output one integer per line, the answer.", "hint": "For 30% of the testdata, $N \\le 10$, $a,b \\le 10^3$.\n\nFor 100% of the testdata, $1 \\le N \\le 100$, $1 \\le a,b \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求和", "background": "", "description": "求 $1^b+2^b+\\cdots + a^b$ 的和除以 $10^4$ 的余数。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $N$，表示共有 $N$ 组测试数据。\n\n对于每组数据，一行两个整数 $a,b$。", "outputFormat": "对于每组数据，一行一个整数，表示答案。", "hint": "对于 $30\\%$ 的数据，$N \\le 10$，$a,b \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 100$，$1 \\le a,b \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1631", "type": "P", "difficulty": 4, "samples": [["3\n2 6 6\n1 4 8", "3 6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "堆", "排序"], "title": "序列合并", "background": "", "description": "有两个长度为 $N$ 的**单调不降**序列 $A,B$，在 $A,B$ 中各取一个数相加可以得到 $N^2$ 个和，求这 $N^2$ 个和中最小的 $N$ 个。", "inputFormat": "第一行一个正整数 $N$；\n\n第二行 $N$ 个整数 $A_{1\\dots N}$。\n\n第三行 $N$ 个整数 $B_{1\\dots N}$。\n\n\n", "outputFormat": "一行 $N$ 个整数，从小到大表示这 $N$ 个最小的和。", "hint": "对于 $50\\%$ 的数据，$N \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le a_i,b_i \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Merging Sequences", "background": "", "description": "There are two length-$N$ non-decreasing sequences $A, B$. Taking one number from $A$ and one number from $B$ and adding them yields $N^2$ sums. Find the smallest $N$ sums among these $N^2$ sums.", "inputFormat": "The first line contains a positive integer $N$.\n\nThe second line contains $N$ integers $A_{1\\dots N}$.\n\nThe third line contains $N$ integers $B_{1\\dots N}$.", "outputFormat": "Output one line with $N$ integers, from smallest to largest, representing these $N$ smallest sums.", "hint": "For $50\\%$ of the testdata, $N \\le 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le N \\le 10^5$, $1 \\le a_i, b_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列合并", "background": "", "description": "有两个长度为 $N$ 的**单调不降**序列 $A,B$，在 $A,B$ 中各取一个数相加可以得到 $N^2$ 个和，求这 $N^2$ 个和中最小的 $N$ 个。", "inputFormat": "第一行一个正整数 $N$；\n\n第二行 $N$ 个整数 $A_{1\\dots N}$。\n\n第三行 $N$ 个整数 $B_{1\\dots N}$。\n\n\n", "outputFormat": "一行 $N$ 个整数，从小到大表示这 $N$ 个最小的和。", "hint": "对于 $50\\%$ 的数据，$N \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le a_i,b_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1632", "type": "P", "difficulty": 3, "samples": [["4\n15 14\n15 16\n14 15 \n16 15", "0\n2\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "点的移动", "background": "", "description": "平面上有 $N$ 个整数坐标点。如果将点 $(x_0,y_0)$ 移动到 $(x_1,y_1)$，则需要的代价为 $|x_0-x_1|+|y_0-y_1|$。求使得 $K(K=1, \\cdots ,N)$ 个点在同一位置上最少需要的代价。", "inputFormat": "第一行一个正整数 $N$；\n\n接下来 $N$ 行，每行两个正整数 $x_i$ 和 $y_i$，为第 $i$ 个点的坐标，不超过 $10^6$。\n\n【数据规模】。\n\n对于 $100\\%$ 的数据中，满足 $1 \\le N \\le 50$。", "outputFormat": "输出共 $N$ 行，第 $i$ 行为使得有 $i$ 个点在统一位置的最少代价。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Movement of Points", "background": "", "description": "There are $N$ points with integer coordinates on the plane. Moving point $(x_0, y_0)$ to $(x_1, y_1)$ costs $|x_0-x_1|+|y_0-y_1|$. For each $K$ ($K = 1, \\cdots, N$), find the minimum total cost to make $K$ points coincide at the same position.", "inputFormat": "The first line contains a positive integer $N$.\n\nThe next $N$ lines each contain two positive integers $x_i$ and $y_i$, the coordinates of the $i$-th point, each not exceeding $10^6$.\n\nConstraints: For $100\\%$ of the testdata, $1 \\le N \\le 50$.", "outputFormat": "Output $N$ lines. The $i$-th line is the minimum total cost to make $i$ points coincide at the same position.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "点的移动", "background": "", "description": "平面上有 $N$ 个整数坐标点。如果将点 $(x_0,y_0)$ 移动到 $(x_1,y_1)$，则需要的代价为 $|x_0-x_1|+|y_0-y_1|$。求使得 $K(K=1, \\cdots ,N)$ 个点在同一位置上最少需要的代价。", "inputFormat": "第一行一个正整数 $N$；\n\n接下来 $N$ 行，每行两个正整数 $x_i$ 和 $y_i$，为第 $i$ 个点的坐标，不超过 $10^6$。\n\n【数据规模】。\n\n对于 $100\\%$ 的数据中，满足 $1 \\le N \\le 50$。", "outputFormat": "输出共 $N$ 行，第 $i$ 行为使得有 $i$ 个点在统一位置的最少代价。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1633", "type": "P", "difficulty": 5, "samples": [["4\r\n7 6 9\r\n1 1 1\r\n1 1 4\r\n3 3 9", "10\r\n-1\r\n2\r\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "二进制", "background": "", "description": "有三个整数 $A,B,C$，以下用 $N_{(2)}$ 表示 $N$ 的二进制（没有前导 $0$）。\n\n设 $A_{(2)},B_{(2)},C_{(2)}$ 的最大长度为 $L$，你需要构造三个正整数 $X,Y,Z$，满足以下条件：\n\n1. $X_{(2)},Y_{(2)},Z_{(2)}$ 的长度都不超过 $L$。\n2. $A_{(2)}$ 与 $X_{(2)}$ 中 $1$ 的个数相同。\n3. $B_{(2)}$ 与 $Y_{(2)}$ 中 $1$ 的个数相同。\n4. $C_{(2)}$ 与 $Z_{(2)}$ 中 $1$ 的个数相同。\n5. $X+Y=Z$。", "inputFormat": "第一行包含一个正整数 $T$，表示有 $T$ 组测试数据。\n\n接下来 $T$ 行，每行三个正整数 $A,B,C$。", "outputFormat": "输出共 $T$ 行，每行一个答案。\n\n输出最小的 $Z$。如果没有合法的 $Z$ 则输出 $-1$。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，满足 $1 \\le A,B,C \\le 100$；\n- 对于 $100\\%$ 的数据，满足 $1 \\le T \\le 10$，$1 \\le A,B,C \\le 2^{30}$。", "locale": "zh-CN", "translations": {"en": {"title": "Binary", "background": "", "description": "There are three integers $A, B, C$, where $N_{(2)}$ denotes the binary representation of $N$ (without leading 0s).\n\nLet $L$ be the maximum length among $A_{(2)}, B_{(2)}, C_{(2)}$. You need to construct three positive integers $X, Y, Z$ that satisfy the following conditions:\n1. The lengths of $X_{(2)}, Y_{(2)}, Z_{(2)}$ do not exceed $L$.\n2. The number of 1s in $A_{(2)}$ equals that in $X_{(2)}$.\n3. The number of 1s in $B_{(2)}$ equals that in $Y_{(2)}$.\n4. The number of 1s in $C_{(2)}$ equals that in $Z_{(2)}$.\n5. $X + Y = Z$.", "inputFormat": "The first line contains a positive integer $T$, indicating there are $T$ test cases.\n\nThe next $T$ lines each contain three positive integers $A, B, C$.", "outputFormat": "Output $T$ lines, one answer per line.\n\nOutput the minimal $Z$. If there is no valid $Z$, output $-1$.", "hint": "### Constraints and Notes\n\n- For 30% of the testdata, $1 \\le A, B, C \\le 100$.\n- For 100% of the testdata, $1 \\le T \\le 10$, $1 \\le A, B, C \\le 2^{30}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二进制", "background": "", "description": "有三个整数 $A,B,C$，以下用 $N_{(2)}$ 表示 $N$ 的二进制（没有前导 $0$）。\n\n设 $A_{(2)},B_{(2)},C_{(2)}$ 的最大长度为 $L$，你需要构造三个正整数 $X,Y,Z$，满足以下条件：\n\n1. $X_{(2)},Y_{(2)},Z_{(2)}$ 的长度都不超过 $L$。\n2. $A_{(2)}$ 与 $X_{(2)}$ 中 $1$ 的个数相同。\n3. $B_{(2)}$ 与 $Y_{(2)}$ 中 $1$ 的个数相同。\n4. $C_{(2)}$ 与 $Z_{(2)}$ 中 $1$ 的个数相同。\n5. $X+Y=Z$。", "inputFormat": "第一行包含一个正整数 $T$，表示有 $T$ 组测试数据。\n\n接下来 $T$ 行，每行三个正整数 $A,B,C$。", "outputFormat": "输出共 $T$ 行，每行一个答案。\n\n输出最小的 $Z$。如果没有合法的 $Z$ 则输出 $-1$。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，满足 $1 \\le A,B,C \\le 100$；\n- 对于 $100\\%$ 的数据，满足 $1 \\le T \\le 10$，$1 \\le A,B,C \\le 2^{30}$。", "locale": "zh-CN"}}}
{"pid": "P1634", "type": "P", "difficulty": 1, "samples": [["10 2", "121"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "递推", "洛谷原创"], "title": "禽兽的传染病", "background": "mxj 的启发。\n", "description": "禽兽患传染病了。一个禽兽会每轮传染 $x$ 个禽兽。试问 $n$ 轮传染后有多少禽兽被传染？\n", "inputFormat": "两个非负整数 $x$ 和 $n$。", "outputFormat": "一个整数，即被传染的禽兽数。\n", "hint": "保证 $x,n$ 以及答案都在 $64$ 位无符号整数的表示范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Infectious Disease Among Animals", "background": "Inspired by mxj.", "description": "Animals have contracted an infectious disease. Each animal infects $x$ animals per round. After $n$ rounds of transmission, how many animals have been infected?", "inputFormat": "Two non-negative integers $x$ and $n$.", "outputFormat": "A single integer, the number of infected animals.", "hint": "It is guaranteed that $x,n$ and the answer are within the range of a $64$-bit unsigned integer.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "禽兽的传染病", "background": "mxj 的启发。\n", "description": "禽兽患传染病了。一个禽兽会每轮传染 $x$ 个禽兽。试问 $n$ 轮传染后有多少禽兽被传染？\n", "inputFormat": "两个非负整数 $x$ 和 $n$。", "outputFormat": "一个整数，即被传染的禽兽数。\n", "hint": "保证 $x,n$ 以及答案都在 $64$ 位无符号整数的表示范围内。", "locale": "zh-CN"}}}
{"pid": "P1635", "type": "P", "difficulty": 3, "samples": [["125000000 ", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "跳跃", "background": "NOIP 即将迎来周年华诞。在这一个春秋的历程里，NOIP 领导全国 oier，建设高效、稳定、快捷、开放的社会主义现代化  OI。在新的一年里，YZOJ 将再接再厉，积极探寻成长之路，更好地为广大 oier 服务。", "description": "青蛙小 C 听说 NOIP 要办周年庆比赛，兴冲冲得来到了 Z 市，初始时他在坐标 $x_0$ 处，小 C 是一只善于跳跃的青蛙，若当前他处在坐标 $x$ 处，每一次跳跃，他可以跳到 $4x+3$ 或 $8x+7$ 处，且由于体力原因，他最多能跳 $100000$ 次。\n\n根据 Z 市的传说，坐标位置为 $10^9+7$ 的整数倍的位置（如 $10^9+7,2\\times 10^9+14$）可以传送到 YZOJ。\n\n小 C 想知道，最少跳几次能传送到 YZOJ。", "inputFormat": "输入的第一行包含一个整数 $x_0$ 表示青蛙的初始位置，保证 $x_0$ 在的范围在 $[1,10^9+6]$。\n", "outputFormat": "输出一个整数，表示最少所需步数，若在 $100000$ 步内还无法传送到 YZOJ，则输出 $-1$。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Jumping", "background": "NOIP is about to celebrate its anniversary. Over this journey, NOIP has led OIers nationwide, building an efficient, stable, fast, and open socialist-modern OI. In the new year, YZOJ will continue to make progress, actively exploring paths for growth to better serve the broad community of OIers.", "description": "Little Frog C heard that NOIP will hold an anniversary contest and excitedly came to Z City. Initially, he is at coordinate $x_0$. Little Frog C is good at jumping: if he is currently at coordinate $x$, with each jump he can move to $4x+3$ or $8x+7$. Due to stamina limits, he can make at most $100000$ jumps.\n\nAccording to the legend of Z City, any position whose coordinate is a multiple of $10^9+7$ (e.g., $10^9+7,2\\times 10^9+14$) can teleport to YZOJ.\n\nLittle Frog C wants to know the minimum number of jumps needed to teleport to YZOJ.", "inputFormat": "The first line contains an integer $x_0$, the frog’s initial position, guaranteed to be in the range $[1,10^9+6]$.", "outputFormat": "Output a single integer, the minimum required number of steps. If he still cannot teleport to YZOJ within $100000$ steps, output $-1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跳跃", "background": "NOIP 即将迎来周年华诞。在这一个春秋的历程里，NOIP 领导全国 oier，建设高效、稳定、快捷、开放的社会主义现代化  OI。在新的一年里，YZOJ 将再接再厉，积极探寻成长之路，更好地为广大 oier 服务。", "description": "青蛙小 C 听说 NOIP 要办周年庆比赛，兴冲冲得来到了 Z 市，初始时他在坐标 $x_0$ 处，小 C 是一只善于跳跃的青蛙，若当前他处在坐标 $x$ 处，每一次跳跃，他可以跳到 $4x+3$ 或 $8x+7$ 处，且由于体力原因，他最多能跳 $100000$ 次。\n\n根据 Z 市的传说，坐标位置为 $10^9+7$ 的整数倍的位置（如 $10^9+7,2\\times 10^9+14$）可以传送到 YZOJ。\n\n小 C 想知道，最少跳几次能传送到 YZOJ。", "inputFormat": "输入的第一行包含一个整数 $x_0$ 表示青蛙的初始位置，保证 $x_0$ 在的范围在 $[1,10^9+6]$。\n", "outputFormat": "输出一个整数，表示最少所需步数，若在 $100000$ 步内还无法传送到 YZOJ，则输出 $-1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1636", "type": "P", "difficulty": 3, "samples": [["5 5\r\n2 3\r\n2 4\r\n2 5\r\n3 4\r\n4 5\r\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论"], "title": "Einstein学画画", "background": "", "description": "Einstein 学起了画画。\n\n此人比较懒\\~\\~，他希望用最少的笔画画出一张画……\n\n给定一个无向图，包含 $n$ 个顶点（编号 $1 \\sim n$），$m$ 条边，求最少用多少笔可以画出图中所有的边。", "inputFormat": "第一行两个整数 $n, m$。\n\n接下来 $m$ 行，每行两个数 $a, b$（$a \\ne b$），表示 $a, b$ 两点之间有一条边相连。\n\n一条边不会被描述多次。", "outputFormat": "一个数，即问题的答案。", "hint": "对于 $50 \\%$ 的数据，$n \\le 50$，$m \\le 100$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le {10}^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Einstein Learns to Draw", "background": "", "description": "Einstein has started learning to draw.\n\nHe is rather lazy, and he hopes to draw a picture using as few strokes as possible.\n\nGiven an undirected graph with $n$ vertices (numbered $1 \\sim n$) and $m$ edges, find the minimum number of strokes needed to draw all the edges in the graph.", "inputFormat": "The first line contains two integers $n, m$.\n\nEach of the next $m$ lines contains two integers $a, b$ ($a \\ne b$), indicating that there is an edge between vertices $a$ and $b$.\n\nNo edge is described more than once.", "outputFormat": "A single integer, i.e., the answer.", "hint": "For $50\\%$ of the testdata, $n \\le 50$, $m \\le 100$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 1000$, $1 \\le m \\le {10}^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Einstein学画画", "background": "", "description": "Einstein 学起了画画。\n\n此人比较懒\\~\\~，他希望用最少的笔画画出一张画……\n\n给定一个无向图，包含 $n$ 个顶点（编号 $1 \\sim n$），$m$ 条边，求最少用多少笔可以画出图中所有的边。", "inputFormat": "第一行两个整数 $n, m$。\n\n接下来 $m$ 行，每行两个数 $a, b$（$a \\ne b$），表示 $a, b$ 两点之间有一条边相连。\n\n一条边不会被描述多次。", "outputFormat": "一个数，即问题的答案。", "hint": "对于 $50 \\%$ 的数据，$n \\le 50$，$m \\le 100$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le {10}^5$。", "locale": "zh-CN"}}}
{"pid": "P1637", "type": "P", "difficulty": 4, "samples": [["4\n2 1 3 4", "2"], ["5\n1 2 2 3 4", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "平衡树", "树状数组", "分治"], "title": "三元上升子序列", "background": "", "description": "Erwin 最近对一种叫 `thair` 的东西巨感兴趣。。。\n\n在含有 $n$ 个整数的序列 $a_1,a_2,\\ldots,a_n$ 中，三个数被称作`thair`当且仅当 $i<j<k$ 且 $a_i<a_j<a_k$。\n\n求一个序列中 `thair` 的个数。", "inputFormat": "开始一行一个正整数 $n$,\n\n以后一行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "一行一个整数表示 `thair` 的个数。", "hint": "#### 样例2 解释\n\n$7$ 个 `thair` 分别是：\n\n- 1 2 3\n- 1 2 4\n- 1 2 3\n- 1 2 4\n- 1 3 4\n- 2 3 4\n- 2 3 4\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据 保证 $n\\le100$；\n- 对于 $60\\%$ 的数据 保证 $n\\le2000$；\n- 对于 $100\\%$ 的数据 保证 $1 \\leq n\\le3\\times10^4$，$1\\le a_i\\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Triple Increasing Subsequence", "background": "", "description": "Erwin has recently become very interested in something called `thair`...\n\nIn a sequence with $n$ integers $a_1,a_2,\\ldots,a_n$, three numbers are called `thair` if and only if $i<j<k$ and $a_i<a_j<a_k$.\n\nFind the number of `thair` in the sequence.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ integers $a_1,a_2,\\ldots,a_n$.", "outputFormat": "Print one integer in a single line indicating the number of `thair`.", "hint": "#### Sample 2 Explanation\n\nThe $7$ `thair` are:\n\n- 1 2 3.\n- 1 2 4.\n- 1 2 3.\n- 1 2 4.\n- 1 3 4.\n- 2 3 4.\n- 2 3 4.\n\n#### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n\\le100$.\n- For $60\\%$ of the testdata, it is guaranteed that $n\\le2000$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n\\le3\\times10^4$ and $1\\le a_i\\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "三元上升子序列", "background": "", "description": "Erwin 最近对一种叫 `thair` 的东西巨感兴趣。。。\n\n在含有 $n$ 个整数的序列 $a_1,a_2,\\ldots,a_n$ 中，三个数被称作`thair`当且仅当 $i<j<k$ 且 $a_i<a_j<a_k$。\n\n求一个序列中 `thair` 的个数。", "inputFormat": "开始一行一个正整数 $n$,\n\n以后一行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "一行一个整数表示 `thair` 的个数。", "hint": "#### 样例2 解释\n\n$7$ 个 `thair` 分别是：\n\n- 1 2 3\n- 1 2 4\n- 1 2 3\n- 1 2 4\n- 1 3 4\n- 2 3 4\n- 2 3 4\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据 保证 $n\\le100$；\n- 对于 $60\\%$ 的数据 保证 $n\\le2000$；\n- 对于 $100\\%$ 的数据 保证 $1 \\leq n\\le3\\times10^4$，$1\\le a_i\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1638", "type": "P", "difficulty": 3, "samples": [["12 5\n2 5 3 1 3 2 4 1 1 5 4 3\n", "2 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "USACO", "单调队列", "队列", "双指针 two-pointer"], "title": "逛画展", "background": null, "description": "博览馆正在展出由世上最佳的 $m$ 位画家所画的图画。\n\n游客在购买门票时必须说明两个数字，$x$ 和 $y$，代表他要看展览中的第 $x$ 幅至第 $y$ 幅画（包含 $x,y$）之间的所有图画，而门票的价钱就是一张图画一元。\n\nSept 希望入场后可以看到所有名师的图画。当然，他想最小化购买门票的价格。\n\n请求出他购买门票时应选择的 $x,y$，数据保证一定有解。\n\n若存在多组解，**输出 $x$ 最小的那组**。", "inputFormat": "第一行两个整数 $n,m$，分别表示博览馆内的图画总数及这些图画是由多少位名师所绘画的。\n\n第二行包含 $n$ 个整数 $a_i$，代表画第 $i$ 幅画的名师的编号。", "outputFormat": "一行两个整数 $x,y$。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，有 $n\\le200$，$m\\le20$。\n- 对于 $60\\%$ 的数据，有 $n\\le10^5$，$m\\le10^3$。\n- 对于 $100\\%$ 的数据，有 $1\\leq n\\le10^6$，$1 \\leq a_i \\leq m\\le2\\times10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Visiting the Art Exhibition", "background": "", "description": "The exhibition hall is displaying paintings by the world’s best $m$ painters.\n\nWhen buying a ticket, a visitor must specify two numbers, $x$ and $y$, meaning they want to see all paintings from the $x$-th to the $y$-th (inclusive), and the ticket price is one yuan per painting.\n\nSept hopes that, after entering, he can see paintings by all the master painters. Of course, he wants to minimize the ticket price.\n\nFind the $x, y$ he should choose when buying the ticket. The testdata guarantees that a solution exists.\n\nIf multiple solutions exist, **output the one with the smallest $x$**.", "inputFormat": "The first line contains two integers $n, m$, denoting the total number of paintings in the exhibition and the number of master painters, respectively.\n\nThe second line contains $n$ integers $a_i$, where $a_i$ is the ID of the master who painted the $i$-th painting.", "outputFormat": "One line with two integers $x, y$.", "hint": "#### Constraints\n\n- For 30% of the testdata, $n \\le 200$, $m \\le 20$.\n- For 60% of the testdata, $n \\le 10^5$, $m \\le 10^3$.\n- For 100% of the testdata, $1 \\le n \\le 10^6$, $1 \\le a_i \\le m \\le 2 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "逛画展", "background": null, "description": "博览馆正在展出由世上最佳的 $m$ 位画家所画的图画。\n\n游客在购买门票时必须说明两个数字，$x$ 和 $y$，代表他要看展览中的第 $x$ 幅至第 $y$ 幅画（包含 $x,y$）之间的所有图画，而门票的价钱就是一张图画一元。\n\nSept 希望入场后可以看到所有名师的图画。当然，他想最小化购买门票的价格。\n\n请求出他购买门票时应选择的 $x,y$，数据保证一定有解。\n\n若存在多组解，**输出 $x$ 最小的那组**。", "inputFormat": "第一行两个整数 $n,m$，分别表示博览馆内的图画总数及这些图画是由多少位名师所绘画的。\n\n第二行包含 $n$ 个整数 $a_i$，代表画第 $i$ 幅画的名师的编号。", "outputFormat": "一行两个整数 $x,y$。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，有 $n\\le200$，$m\\le20$。\n- 对于 $60\\%$ 的数据，有 $n\\le10^5$，$m\\le10^3$。\n- 对于 $100\\%$ 的数据，有 $1\\leq n\\le10^6$，$1 \\leq a_i \\leq m\\le2\\times10^3$。", "locale": "zh-CN"}}}
{"pid": "P1639", "type": "P", "difficulty": 1, "samples": [["3 10 8 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2018", "USACO", "O2优化"], "title": "[USACO18FEB] Teleportation B", "background": "", "description": "Farmer John 最讨厌的农活是运输牛粪。为了精简这个过程，他制造了一个伟大的发明：便便传送门！与使用拖拉机拖着装满牛粪的大车从一个地点到另一个地点相比，他可以使用便便传送门将牛粪从一个地点瞬间传送到另一个地点。\n\nFarmer John 的农场沿着一条长直道路而建，所以他农场上的每个地点都可以简单地用该地点在道路上的位置来表示（相当于数轴上的一个点）。一个传送门可以用两个数 $x$ 和 $y$ 表示，被拖到地点 $x$ 的牛粪可以瞬间传送到地点 $y$，反之亦然。\n\nFarmer John 想要将牛粪从地点 $a$ 运输到地点 $b$，他建造了一个可能对这一过程有所帮助的传送门（当然，如果没有帮助，他也可以不用）。请帮助他求出他需要使用拖拉机运输牛粪的总距离的最小值。 ", "inputFormat": "输入仅包含一行，为四个用空格分隔的整数：$a$ 和 $b$，表示起始地点和结束地点，后面是 $x$ 和 $y$，表示传送门。所有的位置都是范围为 $0\\ldots 100$ 的整数，不一定各不相同。", "outputFormat": "输出一个整数，为 Farmer John 需要用拖拉机运输牛粪的最小距离。 ", "hint": "在这个样例中，最佳策略是将牛粪从位置 $3$ 运到位置 $2$，传送到位置 $8$，再运到位置 $10$。 所以需要用拖拉机的总距离为 $1 + 2 = 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18FEB] Teleportation B", "background": "", "description": "Farmer John 最讨厌的农活是运输牛粪。为了精简这个过程，他制造了一个伟大的发明：便便传送门！与使用拖拉机拖着装满牛粪的大车从一个地点到另一个地点相比，他可以使用便便传送门将牛粪从一个地点瞬间传送到另一个地点。\n\nFarmer John 的农场沿着一条长直道路而建，所以他农场上的每个地点都可以简单地用该地点在道路上的位置来表示（相当于数轴上的一个点）。一个传送门可以用两个数 $x$ 和 $y$ 表示，被拖到地点 $x$ 的牛粪可以瞬间传送到地点 $y$，反之亦然。\n\nFarmer John 想要将牛粪从地点 $a$ 运输到地点 $b$，他建造了一个可能对这一过程有所帮助的传送门（当然，如果没有帮助，他也可以不用）。请帮助他求出他需要使用拖拉机运输牛粪的总距离的最小值。 ", "inputFormat": "输入仅包含一行，为四个用空格分隔的整数：$a$ 和 $b$，表示起始地点和结束地点，后面是 $x$ 和 $y$，表示传送门。所有的位置都是范围为 $0\\ldots 100$ 的整数，不一定各不相同。", "outputFormat": "输出一个整数，为 Farmer John 需要用拖拉机运输牛粪的最小距离。 ", "hint": "在这个样例中，最佳策略是将牛粪从位置 $3$ 运到位置 $2$，传送到位置 $8$，再运到位置 $10$。 所以需要用拖拉机的总距离为 $1 + 2 = 3$。", "locale": "zh-CN"}}}
{"pid": "P1640", "type": "P", "difficulty": 4, "samples": [["3\n1 2\n3 2\n4 5\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "四川", "并查集", "各省省选", "二分图"], "title": "[SCOI2010] 连续攻击游戏", "background": "", "description": "lxhgww 最近迷上了一款游戏，在游戏里，他拥有很多的装备，每种装备都有 $2$ 个属性，这些属性的值用 $[1,10000]$ 之间的数表示。当他使用某种装备时，他只能使用该装备的某一个属性。并且每种装备最多只能使用一次。游戏进行到最后，lxhgww 遇到了终极 boss，这个终极 boss 很奇怪，攻击他的装备所使用的属性值必须从 $1$ 开始连续递增地攻击，才能对 boss 产生伤害。也就是说一开始的时候，lxhgww 只能使用某个属性值为 $1$ 的装备攻击 boss，然后只能使用某个属性值为 $2$ 的装备攻击 boss，然后只能使用某个属性值为 $3$ 的装备攻击 boss……以此类推。现在 lxhgww 想知道他最多能连续攻击 boss 多少次？", "inputFormat": "输入的第一行是一个整数 $N$，表示 lxhgww 拥有 $N$ 种装备接下来 $N$ 行，是对这 $N$ 种装备的描述，每行 $2$ 个数字，表示第 $i$ 种装备的 $2$ 个属性值。", "outputFormat": "输出一行，包括 $1$ 个数字，表示 lxhgww 最多能连续攻击的次数。", "hint": "对于 $30\\%$ 的数据，保证 $N \\le 10^3$。\n\n对于 $100\\%$ 的数据，保证 $N \\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2010] Continuous Attack Game", "background": "", "description": "lxhgww recently got hooked on a game. In the game, he owns many pieces of equipment, and each piece has $2$ attributes. The values of these attributes are numbers in $[1,10000]$. When he uses a piece of equipment, he can only use one of its attributes, and each piece of equipment can be used at most once.\n\nAt the end of the game, lxhgww encounters the final boss. This boss is peculiar: to deal damage, the attribute values used to attack must increase consecutively starting from $1$. That is, at the beginning lxhgww can only attack the boss with a piece of equipment whose attribute value is $1$, then only with a piece whose attribute value is $2$, then only with a piece whose attribute value is $3$, and so on. Now lxhgww wants to know the maximum number of consecutive attacks he can make on the boss.", "inputFormat": "The first line contains an integer $N$, the number of types of equipment lxhgww owns. The next $N$ lines describe these $N$ types of equipment. Each line contains $2$ numbers, the $2$ attribute values of the $i$-th piece of equipment.", "outputFormat": "Output one line with $1$ number: the maximum number of consecutive attacks lxhgww can make.", "hint": "For $30\\%$ of the testdata, $N \\le 10^3$.\n\nFor $100\\%$ of the testdata, $N \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2010] 连续攻击游戏", "background": "", "description": "lxhgww 最近迷上了一款游戏，在游戏里，他拥有很多的装备，每种装备都有 $2$ 个属性，这些属性的值用 $[1,10000]$ 之间的数表示。当他使用某种装备时，他只能使用该装备的某一个属性。并且每种装备最多只能使用一次。游戏进行到最后，lxhgww 遇到了终极 boss，这个终极 boss 很奇怪，攻击他的装备所使用的属性值必须从 $1$ 开始连续递增地攻击，才能对 boss 产生伤害。也就是说一开始的时候，lxhgww 只能使用某个属性值为 $1$ 的装备攻击 boss，然后只能使用某个属性值为 $2$ 的装备攻击 boss，然后只能使用某个属性值为 $3$ 的装备攻击 boss……以此类推。现在 lxhgww 想知道他最多能连续攻击 boss 多少次？", "inputFormat": "输入的第一行是一个整数 $N$，表示 lxhgww 拥有 $N$ 种装备接下来 $N$ 行，是对这 $N$ 种装备的描述，每行 $2$ 个数字，表示第 $i$ 种装备的 $2$ 个属性值。", "outputFormat": "输出一行，包括 $1$ 个数字，表示 lxhgww 最多能连续攻击的次数。", "hint": "对于 $30\\%$ 的数据，保证 $N \\le 10^3$。\n\n对于 $100\\%$ 的数据，保证 $N \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1641", "type": "P", "difficulty": 5, "samples": [["2 2", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "四川", "各省省选", "组合数学", "排列组合", "Catalan 数", "逆元"], "title": "[SCOI2010] 生成字符串", "background": null, "description": "lxhgww 最近接到了一个生成字符串的任务，任务需要他把 $n$ 个 $1$ 和 $m$ 个 $0$ 组成字符串，但是任务还要求在组成的字符串中，在任意的前 $k\\ (0 \\le k \\le n+m)$ 个字符中，$1$ 的个数不能少于 $0$ 的个数。现在 lxhgww 想要知道满足要求的字符串共有多少个，聪明的程序员们，你们能帮助他吗？\n\n答案对 $20100403$ 取模。", "inputFormat": "输入数据只有一行，包括 $2$ 个数字 $n$ 和 $m$。", "outputFormat": "输出数据是一行，包括 $1$ 个数字，表示满足要求的字符串数目。\n\n答案对 $20100403$ 取模。", "hint": "对于 $30\\%$ 的数据，保证 $1\\leq m\\leq n\\leq 10^3$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq m\\leq n\\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2010] Generate String", "background": "", "description": "lxhgww recently received a task to generate a string. The task requires him to use $n$ copies of $1$ and $m$ copies of $0$ to form a string, and it also requires that in any first $k\\ (0 \\le k \\le n+m)$ characters, the number of $1$ is not less than the number of $0$. Now lxhgww wants to know how many strings satisfy the requirement. Can you help him?\nThe answer is taken modulo $20100403$.", "inputFormat": "The input contains a single line with $2$ integers $n$ and $m$.", "outputFormat": "Output a single line with $1$ integer, the number of strings that satisfy the requirement.\nThe answer is taken modulo $20100403$.", "hint": "For $30\\%$ of the testdata, it is guaranteed that $1 \\leq m \\leq n \\leq 10^3$.\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq m \\leq n \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2010] 生成字符串", "background": null, "description": "lxhgww 最近接到了一个生成字符串的任务，任务需要他把 $n$ 个 $1$ 和 $m$ 个 $0$ 组成字符串，但是任务还要求在组成的字符串中，在任意的前 $k\\ (0 \\le k \\le n+m)$ 个字符中，$1$ 的个数不能少于 $0$ 的个数。现在 lxhgww 想要知道满足要求的字符串共有多少个，聪明的程序员们，你们能帮助他吗？\n\n答案对 $20100403$ 取模。", "inputFormat": "输入数据只有一行，包括 $2$ 个数字 $n$ 和 $m$。", "outputFormat": "输出数据是一行，包括 $1$ 个数字，表示满足要求的字符串数目。\n\n答案对 $20100403$ 取模。", "hint": "对于 $30\\%$ 的数据，保证 $1\\leq m\\leq n\\leq 10^3$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq m\\leq n\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1642", "type": "P", "difficulty": 4, "samples": [["3 2\r\n2 3 4\r\n1 1 1\r\n1 2\r\n2 3\r\n", "4.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "二分", "树形 DP", "分数规划"], "title": "规划", "background": "", "description": "某地方有 $N$ 个工厂，有 $N-1$ 条路连接它们，且它们两两都可达。每个工厂都有一个产量值和一个污染值。现在工厂要进行规划，拆除其中的 $M$ 个工厂，使得剩下的工厂依然连成一片且总产量 / 总污染的值最大。", "inputFormat": "第一行两个整数 $N,M$ 表示工厂个数和要拆除的个数。\n\n第二行 $N$ 个正整数 $w_i$，表示每个工厂的产值 。\n\n第三行 $N$ 个正整数 $c_i$，表示每个工厂的污染值。\n\n接着 $N-1$ 行，每行两个正整数 $a,b\\ (1 \\le a,b \\le N)$ 表示 $a,b$ 之间相连。", "outputFormat": "输出 总产量/总污染 的最大值，保留一位小数。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1<N<100$，$1 \\le M<N$，$1\\le w_i\\le 10000$，$1\\le c_i\\le 10000$。", "locale": "zh-CN", "translations": {"en": {"title": "Planning", "background": "", "description": "There are $N$ factories connected by $N - 1$ roads, and any two factories are reachable. Each factory has a production value and a pollution value. Now we plan to demolish $M$ factories so that the remaining factories still form a single connected component and the value of total production divided by total pollution is maximized.", "inputFormat": "The first line contains two integers $N, M$ representing the number of factories and the number to demolish.\n\nThe second line contains $N$ positive integers $w_i$, representing the production of each factory.\n\nThe third line contains $N$ positive integers $c_i$, representing the pollution of each factory.\n\nThen follow $N - 1$ lines. Each line contains two positive integers $a, b$ ($1 \\le a, b \\le N$) indicating that $a$ and $b$ are connected.", "outputFormat": "Output the maximum value of total production divided by total pollution, rounded to one decimal place.", "hint": "Constraints\n\nFor all testdata, $1 < N < 100$, $1 \\le M < N$, $1 \\le w_i \\le 10000$, and $1 \\le c_i \\le 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "规划", "background": "", "description": "某地方有 $N$ 个工厂，有 $N-1$ 条路连接它们，且它们两两都可达。每个工厂都有一个产量值和一个污染值。现在工厂要进行规划，拆除其中的 $M$ 个工厂，使得剩下的工厂依然连成一片且总产量 / 总污染的值最大。", "inputFormat": "第一行两个整数 $N,M$ 表示工厂个数和要拆除的个数。\n\n第二行 $N$ 个正整数 $w_i$，表示每个工厂的产值 。\n\n第三行 $N$ 个正整数 $c_i$，表示每个工厂的污染值。\n\n接着 $N-1$ 行，每行两个正整数 $a,b\\ (1 \\le a,b \\le N)$ 表示 $a,b$ 之间相连。", "outputFormat": "输出 总产量/总污染 的最大值，保留一位小数。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1<N<100$，$1 \\le M<N$，$1\\le w_i\\le 10000$，$1\\le c_i\\le 10000$。", "locale": "zh-CN"}}}
{"pid": "P1643", "type": "P", "difficulty": 5, "samples": [["3\r\n1\r\n1\r\n17\r\n2\r\n98\r\n2\r\n", "2\r\n33\r\n101\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度"], "title": "完美数", "background": null, "description": "考古队员小星在一次考察中意外跌入深渊，穿越到了一个神秘的荒漠。这里有许多超越他认识的事物存在，例如许多漂浮在空中的建筑，例如各种奇怪的动物。\n\n在这片荒漠的中央，小星发现了一个巨大的类似神庙的建筑，为了脱离这片空间，小星决定前去探索。\n\n在临近神庙大门时，突然跳出了一个人面狮（不是斯芬达克斯）！它咆哮着：\n\n“我是这里的守卫，要想通过这里，必须回答出我的一系列问题，否则，我就吃了你。”\n\n人面狮告诉小星，问题总是这样的模式：比 $X$ 大的第 $N$ 小的回文数是多少。\n\n小星想，这个问题看来不难，于是问答开始了。\n\n“比 $1$ 大的第 $1$ 小回文数是多少？”\n\n“$2$”\n\n“比 $17$ 大的第 $2$ 小的回文数是多少？”\n\n“$33$”\n\n“比 $98$ 大的第 $2$ 小的回文数是多少？”\n\n“$101$”\n\n“那比 $948237$ 大的第 $2339587$ 小的回文数是多少？”\n\n“\\*（•%（\\*•—#•#￥\\*—%（\\*—%”\n\n为了避免被守卫吃掉，小星只好打开笔记本想借助电脑，却意外地发现可以通过网络（网通？电信？宇宙通？）找到你，于是这个问题就拜托给你了！", "inputFormat": "本题每一个数据包含有多组数据。\n\n对于每一个数据包，第一行一个数 $T$，表示总共有 $T$ 组数据。\n\n对于每一组数据，包括两行，第一行为 $X$，第二行为 $N$，表示当前询问是比 $X$ 大的第 $N$ 小的回文数是多少。", "outputFormat": "对于每一组数据输出一行，表示询问的结果。", "hint": "**【数据规模】**\n\n$20 \\%$ 的数据满足 $X \\le 2 \\times 10^5$，$N \\le 1000$。\n\n$30 \\%$ 的数据满足 $X, N \\le 2^{31}-1$ 且答案不大于 $2^{31}-1$。\n\n$100 \\%$ 的数据满足 $1 \\le N \\le {10}^{10000}$，$0 \\le X\\le {10}^{10000}$ 且答案不大于 ${10}^{20001}$ 且 $1 \\le T \\le 10$。", "locale": "zh-CN", "translations": {"en": {"title": "Perfect Number", "background": "", "description": "During an expedition, the archaeologist Xiaoxing accidentally fell into an abyss and traveled to a mysterious desert. Many things here are beyond his understanding, such as buildings floating in the air and all kinds of strange animals.\n\nIn the center of the desert, Xiaoxing found a huge temple-like structure. To escape this place, he decided to explore it.\n\nAs he approached the temple gate, a human-faced lion suddenly leaped out (not the Sphinx)! It roared:\n\n\"I am the guardian here. To pass, you must answer my series of questions; otherwise, I will eat you.\"\n\nThe human-faced lion told Xiaoxing that the questions always follow this pattern: What is the $N$-th smallest palindrome greater than $X$?\n\nXiaoxing thought the problem did not seem difficult, so the Q&A began.\n\n\"What is the 1st smallest palindrome greater than $1$?\"\n\"$2$.\"\n\n\"What is the 2nd smallest palindrome greater than $17$?\"\n\"$33$.\"\n\n\"What is the 2nd smallest palindrome greater than $98$?\"\n\"$101$.\"\n\n\"Then what is the 2,339,587-th smallest palindrome greater than $948237$?\"\n\"*(•%(∗•—#•#￥∗—%(∗—%\"\n\nTo avoid being eaten by the guardian, Xiaoxing opened his laptop to seek help, and he unexpectedly found you through the network (Netcom? Telecom? Universe-com?). So this problem is entrusted to you!", "inputFormat": "The input contains multiple queries.\n\nThe first line contains an integer $T$, the total number of queries.\n\nEach query consists of two lines: the first line contains $X$, and the second line contains $N$, asking for the $N$-th smallest palindrome strictly greater than $X$.", "outputFormat": "For each query, output one line containing the answer.", "hint": "Constraints:\n\n- 20% of the testdata satisfies $X \\le 2 \\times 10^5$, $N \\le 1000$.\n- 30% of the testdata satisfies $X, N \\le 2^{31}-1$ and the answer is no greater than $2^{31}-1$.\n- 100% of the testdata satisfies $1 \\le X, N \\le {10}^{10000}$ and the answer is no greater than ${10}^{20001}$, and $1 \\le T \\le 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "完美数", "background": null, "description": "考古队员小星在一次考察中意外跌入深渊，穿越到了一个神秘的荒漠。这里有许多超越他认识的事物存在，例如许多漂浮在空中的建筑，例如各种奇怪的动物。\n\n在这片荒漠的中央，小星发现了一个巨大的类似神庙的建筑，为了脱离这片空间，小星决定前去探索。\n\n在临近神庙大门时，突然跳出了一个人面狮（不是斯芬达克斯）！它咆哮着：\n\n“我是这里的守卫，要想通过这里，必须回答出我的一系列问题，否则，我就吃了你。”\n\n人面狮告诉小星，问题总是这样的模式：比 $X$ 大的第 $N$ 小的回文数是多少。\n\n小星想，这个问题看来不难，于是问答开始了。\n\n“比 $1$ 大的第 $1$ 小回文数是多少？”\n\n“$2$”\n\n“比 $17$ 大的第 $2$ 小的回文数是多少？”\n\n“$33$”\n\n“比 $98$ 大的第 $2$ 小的回文数是多少？”\n\n“$101$”\n\n“那比 $948237$ 大的第 $2339587$ 小的回文数是多少？”\n\n“\\*（•%（\\*•—#•#￥\\*—%（\\*—%”\n\n为了避免被守卫吃掉，小星只好打开笔记本想借助电脑，却意外地发现可以通过网络（网通？电信？宇宙通？）找到你，于是这个问题就拜托给你了！", "inputFormat": "本题每一个数据包含有多组数据。\n\n对于每一个数据包，第一行一个数 $T$，表示总共有 $T$ 组数据。\n\n对于每一组数据，包括两行，第一行为 $X$，第二行为 $N$，表示当前询问是比 $X$ 大的第 $N$ 小的回文数是多少。", "outputFormat": "对于每一组数据输出一行，表示询问的结果。", "hint": "**【数据规模】**\n\n$20 \\%$ 的数据满足 $X \\le 2 \\times 10^5$，$N \\le 1000$。\n\n$30 \\%$ 的数据满足 $X, N \\le 2^{31}-1$ 且答案不大于 $2^{31}-1$。\n\n$100 \\%$ 的数据满足 $1 \\le N \\le {10}^{10000}$，$0 \\le X\\le {10}^{10000}$ 且答案不大于 ${10}^{20001}$ 且 $1 \\le T \\le 10$。", "locale": "zh-CN"}}}
{"pid": "P1644", "type": "P", "difficulty": 2, "samples": [["4 8", "37"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "递推", "线性递推"], "title": "跳马问题", "background": "", "description": "中国象棋半张棋盘如图 $1$ 所示。马自左下角 $(0,0)$ 向右上角 $(m,n)$ 跳。规定只能往右跳，不准往左跳。比如图 $1$ 中所示为一种跳行路线，并将路径总数打印出来。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8gkasdvs.png)\n", "inputFormat": "只有一行：两个数 $n$，$m$。\n", "outputFormat": "只有一个数：总方案数 $total$。\n", "hint": "对于 $100\\%$ 的数据：$n, m\\leq 18$\n", "locale": "zh-CN", "translations": {"en": {"title": "Horse Jump Problem", "background": "", "description": "A half Xiangqi (Chinese chess) board is shown in Figure 1. A horse starts from the lower-left corner $(0,0)$ and jumps to the upper-right corner $(m,n)$. It is only allowed to jump to the right; jumping to the left is not allowed. For example, the route shown in Figure 1 is one valid path. Print the total number of paths.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8gkasdvs.png)", "inputFormat": "A single line: two integers $n$ and $m$.", "outputFormat": "A single integer: the total number of ways $total$.", "hint": "For $100\\%$ of the testdata: $n, m\\leq 18$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跳马问题", "background": "", "description": "中国象棋半张棋盘如图 $1$ 所示。马自左下角 $(0,0)$ 向右上角 $(m,n)$ 跳。规定只能往右跳，不准往左跳。比如图 $1$ 中所示为一种跳行路线，并将路径总数打印出来。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8gkasdvs.png)\n", "inputFormat": "只有一行：两个数 $n$，$m$。\n", "outputFormat": "只有一个数：总方案数 $total$。\n", "hint": "对于 $100\\%$ 的数据：$n, m\\leq 18$\n", "locale": "zh-CN"}}}
{"pid": "P1645", "type": "P", "difficulty": 3, "samples": [["4\n4 5 1\n6 10 3\n7 10 3\n5 6 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "排序", "差分约束"], "title": "序列", "background": "", "description": "有一个整数序列，它的每个数各不相同，我们不知道它的长度是多少（即整数个数），但我们知道在某些区间中间至少有多少个整数，用区间（$L_i,R_i,C_i$）来描述，表示这个整数序列中至少有 $C_i$ 个数来自区间 $[L_i,R_i]$，给出若干个这样的区间，问这个整数序列的长度最少能为多少？", "inputFormat": "第一行一个整数 $N$，表示区间个数；\n\n接下来 $N$ 行，每行三个整数 $L_i,R_i,C_i$，描述一个区间。", "outputFormat": "仅一个数，表示该整数序列的最小长度。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le N \\le 1000$，$0 \\le L_i \\le R_i \\le 1000$，$1 \\le C_i \\le R_i-L_i+1$。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence", "background": "", "description": "There is an integer sequence whose elements are all distinct. We do not know its length (i.e., the number of integers), but we know, for certain intervals, at least how many elements lie within them. Each constraint is described by a triple ($L_i, R_i, C_i$), meaning that at least $C_i$ numbers in the sequence come from the interval $[L_i, R_i]$. Given several such intervals, what is the minimum possible length of this integer sequence?", "inputFormat": "The first line contains an integer $N$, the number of intervals.\n\nEach of the next $N$ lines contains three integers $L_i, R_i, C_i$ describing an interval.", "outputFormat": "Output a single integer: the minimum possible length of the sequence.", "hint": "Constraints\n\nFor all testdata, $1 \\le N \\le 1000$, $0 \\le L_i \\le R_i \\le 1000$, $1 \\le C_i \\le R_i - L_i + 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列", "background": "", "description": "有一个整数序列，它的每个数各不相同，我们不知道它的长度是多少（即整数个数），但我们知道在某些区间中间至少有多少个整数，用区间（$L_i,R_i,C_i$）来描述，表示这个整数序列中至少有 $C_i$ 个数来自区间 $[L_i,R_i]$，给出若干个这样的区间，问这个整数序列的长度最少能为多少？", "inputFormat": "第一行一个整数 $N$，表示区间个数；\n\n接下来 $N$ 行，每行三个整数 $L_i,R_i,C_i$，描述一个区间。", "outputFormat": "仅一个数，表示该整数序列的最小长度。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le N \\le 1000$，$0 \\le L_i \\le R_i \\le 1000$，$1 \\le C_i \\le R_i-L_i+1$。", "locale": "zh-CN"}}}
{"pid": "P1646", "type": "P", "difficulty": 6, "samples": [["1 2\n1 1\n100 110\n1\n1000", "1210\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["集训队互测", "网络流", "最小割"], "title": "[国家集训队] happiness", "background": "", "description": "高一一班的座位表是个 $n\\times m$ 的矩阵，经过一个学期的相处，每个同学和前后左右相邻的同学互相成为了好朋友。这学期要分文理科了，每个同学对于选择文科与理科有着自己的喜悦值，而一对好朋友如果能同时选文科或者理科，那么他们又将收获一些喜悦值。\n\n作为计算机竞赛教练的 scp 大老板，想知道如何分配可以使得全班的喜悦值总和最大。", "inputFormat": "第一行两个正整数 $n$，$m$。\n\n接下来是六个矩阵。\n\n- 第一个矩阵为 $n$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学选择文科获得的喜悦值。\n- 第二个矩阵为 $n$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学选择理科获得的喜悦值。\n- 第三个矩阵为 $n-1$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i+1$ 行第 $j$ 列的同学同时选择文科获得的额外喜悦值。\n- 第四个矩阵为 $n-1$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i+1$ 行第 $j$ 列的同学同时选择理科获得的额外喜悦值。\n- 第五个矩阵为 $n$ 行 $m-1$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i$ 行第 $j+1$ 列的同学同时选择文科获得的额外喜悦值。\n- 第六个矩阵为 $n$ 行 $m-1$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i$ 行第 $j+1$ 列的同学同时选择理科获得的额外喜悦值。", "outputFormat": "输出一个整数，表示喜悦值总和的最大值。\n", "hint": "### 样例解释\n\n两人都选理，则获得 $100+110+1000$ 的喜悦值。\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 100$，且所有喜悦值均为小于等于 $5000$ 的非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] happiness", "background": "", "description": "The seating chart of Class 1 in Grade 10 is an $n\\times m$ matrix. After one semester together, every student has become good friends with the students adjacent in the four directions (up, down, left, right). This semester, they need to split into liberal arts and science. Each student has their own happiness value for choosing liberal arts or science, and for each pair of friends, if they both choose liberal arts or both choose science, they will gain some extra happiness.\n\nscp, the big boss and coach of programming contests, wants to know how to assign choices to maximize the class’s total happiness.", "inputFormat": "The first line contains two positive integers $n$, $m$.\n\nThen follow six matrices.\n\n- The first matrix has $n$ rows and $m$ columns. The number at row $i$, column $j$ is the happiness the student at row $i$, column $j$ gets for choosing liberal arts.\n- The second matrix has $n$ rows and $m$ columns. The number at row $i$, column $j$ is the happiness the student at row $i$, column $j$ gets for choosing science.\n- The third matrix has $n-1$ rows and $m$ columns. The number at row $i$, column $j$ is the extra happiness if the student at row $i$, column $j$ and the student at row $i+1$, column $j$ both choose liberal arts.\n- The fourth matrix has $n-1$ rows and $m$ columns. The number at row $i$, column $j$ is the extra happiness if the student at row $i$, column $j$ and the student at row $i+1$, column $j$ both choose science.\n- The fifth matrix has $n$ rows and $m-1$ columns. The number at row $i$, column $j$ is the extra happiness if the student at row $i$, column $j$ and the student at row $i$, column $j+1$ both choose liberal arts.\n- The sixth matrix has $n$ rows and $m-1$ columns. The number at row $i$, column $j$ is the extra happiness if the student at row $i$, column $j$ and the student at row $i$, column $j+1$ both choose science.", "outputFormat": "Output a single integer, the maximum possible total happiness.", "hint": "### Sample Explanation\n\nIf both choose science, they obtain $100+110+1000$ in happiness.\n\nFor $100\\%$ of the testdata, $1\\le n,m \\le 100$, and all happiness values are non-negative integers not exceeding $5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] happiness", "background": "", "description": "高一一班的座位表是个 $n\\times m$ 的矩阵，经过一个学期的相处，每个同学和前后左右相邻的同学互相成为了好朋友。这学期要分文理科了，每个同学对于选择文科与理科有着自己的喜悦值，而一对好朋友如果能同时选文科或者理科，那么他们又将收获一些喜悦值。\n\n作为计算机竞赛教练的 scp 大老板，想知道如何分配可以使得全班的喜悦值总和最大。", "inputFormat": "第一行两个正整数 $n$，$m$。\n\n接下来是六个矩阵。\n\n- 第一个矩阵为 $n$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学选择文科获得的喜悦值。\n- 第二个矩阵为 $n$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学选择理科获得的喜悦值。\n- 第三个矩阵为 $n-1$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i+1$ 行第 $j$ 列的同学同时选择文科获得的额外喜悦值。\n- 第四个矩阵为 $n-1$ 行 $m$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i+1$ 行第 $j$ 列的同学同时选择理科获得的额外喜悦值。\n- 第五个矩阵为 $n$ 行 $m-1$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i$ 行第 $j+1$ 列的同学同时选择文科获得的额外喜悦值。\n- 第六个矩阵为 $n$ 行 $m-1$ 列。此矩阵的第 $i$ 行第 $j$ 列的数字表示座位在第 $i$ 行第 $j$ 列的同学与第 $i$ 行第 $j+1$ 列的同学同时选择理科获得的额外喜悦值。", "outputFormat": "输出一个整数，表示喜悦值总和的最大值。\n", "hint": "### 样例解释\n\n两人都选理，则获得 $100+110+1000$ 的喜悦值。\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 100$，且所有喜悦值均为小于等于 $5000$ 的非负整数。", "locale": "zh-CN"}}}
{"pid": "P1647", "type": "P", "difficulty": 5, "samples": [["3 8", "111"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "锁", "background": "", "description": "给出 $N$ 和 $K$，要求生成从 $0$ 到 $2^N-1$ 的一个序列，序列的第一项为 $0$，并且该序列满足以下三个条件：\n\n1. 序列长度为 $2^N$，保证 $0$ 到 $2^N-1$ 的每个数都用了且只用了一次。\n2. 序列中任意两相邻的数都是由前一个数在其二进制下，改变了具有相同值的若干个位而形成的，即把其中若干个 $0$ 变为 $1$，或把其中若干个 $1$ 变为 $0$，并且只能二选一。\n3. 当存在多个序列满足前两个条件的时候，要保证字典序最小，即由前一个数生成后一个数的时候，要挑值最小的数（当然是满足前两个条件的情况下）。\n\n现问你这个序列前 $K$ 项中的最大值是多少，输出其二进制形式，注意一定要输出 $N$ 位，包括前导零。", "inputFormat": "仅一行两个整数 $N,K$。", "outputFormat": "一个二进制表示的数，为所求的答案。\n", "hint": "### 样例解释\n\n生成的序列为 $[000,001,011,010,110,100,101,111]$。前 $8$ 项当中的最大值为 $111$。\n\n### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 50,1 \\le K \\le 2^N$。", "locale": "zh-CN", "translations": {"en": {"title": "Lock", "background": "", "description": "Given $N$ and $K$, you are to generate a sequence from $0$ to $2^N-1$. The first term of the sequence is $0$, and the sequence must satisfy the following three conditions:\n\n1. The sequence has length $2^N$, and every number from $0$ to $2^N-1$ is used exactly once.\n2. Any two adjacent numbers in the sequence are obtained by changing some bits of the previous number in its binary representation, where all the changed bits originally have the same value. That is, either change some $0$s to $1$s, or change some $1$s to $0$s, but not both at the same time.\n3. When multiple sequences satisfy the first two conditions, the sequence must be lexicographically smallest. In other words, when generating the next number from the previous one, always choose the smallest possible value (of course, still satisfying the first two conditions).\n\nYou are asked to find the maximum value among the first $K$ terms of this sequence. Output it in binary, with exactly $N$ bits, including leading zeros.", "inputFormat": "A single line with two integers $N, K$.", "outputFormat": "A binary number representing the answer.", "hint": "### Sample Explanation\n\nThe generated sequence is $[000,001,011,010,110,100,101,111]$. The maximum among the first $8$ terms is $111$.\n\n### Constraints\n\nFor all testdata, $1 \\le N \\le 50, 1 \\le K \\le 2^N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "锁", "background": "", "description": "给出 $N$ 和 $K$，要求生成从 $0$ 到 $2^N-1$ 的一个序列，序列的第一项为 $0$，并且该序列满足以下三个条件：\n\n1. 序列长度为 $2^N$，保证 $0$ 到 $2^N-1$ 的每个数都用了且只用了一次。\n2. 序列中任意两相邻的数都是由前一个数在其二进制下，改变了具有相同值的若干个位而形成的，即把其中若干个 $0$ 变为 $1$，或把其中若干个 $1$ 变为 $0$，并且只能二选一。\n3. 当存在多个序列满足前两个条件的时候，要保证字典序最小，即由前一个数生成后一个数的时候，要挑值最小的数（当然是满足前两个条件的情况下）。\n\n现问你这个序列前 $K$ 项中的最大值是多少，输出其二进制形式，注意一定要输出 $N$ 位，包括前导零。", "inputFormat": "仅一行两个整数 $N,K$。", "outputFormat": "一个二进制表示的数，为所求的答案。\n", "hint": "### 样例解释\n\n生成的序列为 $[000,001,011,010,110,100,101,111]$。前 $8$ 项当中的最大值为 $111$。\n\n### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 50,1 \\le K \\le 2^N$。", "locale": "zh-CN"}}}
{"pid": "P1648", "type": "P", "difficulty": 5, "samples": [["4 2\n2 1\n1 4\n4 5\n5 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "状压 DP"], "title": "看守", "background": "", "description": "给出 $d$ 维空间的 $n$ 个点，求曼哈顿距离最大的两个点的曼哈顿距离。\n\n两个 $d$ 维的点 $(x_1,x_2,\\ldots,x_d)$，$(y_1,y_2,\\ldots,y_d)$ 的曼哈顿距离定义为 $|x_1-y_1|+|x_2-y_2|+\\ldots+|x_d-y_d|$。\n", "inputFormat": "第一行两个整数 $n$，$d$。\n\n接下来 $n$ 行，每行 $d$ 个整数描述一个点的坐标。", "outputFormat": "输出最大的曼哈顿距离。\n", "hint": "#### 数据规模与约定\n\n- 对于 $60\\%$ 的数据，保证 $d\\le2$。\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le10^6$，$d\\le4$，且坐标每一维保证 $1\\le x_i\\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Guard", "background": "", "description": "Given $n$ points in a $d$-dimensional space, find the maximum Manhattan distance between any two points.\n\nFor two $d$-dimensional points $(x_1,x_2,\\ldots,x_d)$ and $(y_1,y_2,\\ldots,y_d)$, their Manhattan distance is defined as $|x_1-y_1|+|x_2-y_2|+\\ldots+|x_d-y_d|$.", "inputFormat": "The first line contains two integers $n$ and $d$.\n\nThe next $n$ lines each contain $d$ integers describing the coordinates of a point.", "outputFormat": "Output the maximum Manhattan distance.", "hint": "Constraints\n- For $60\\%$ of the testdata, it is guaranteed that $d \\le 2$.\n- For $100\\%$ of the testdata, it is guaranteed that $2 \\le n \\le 10^6$, $d \\le 4$, and each coordinate satisfies $1 \\le x_i \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "看守", "background": "", "description": "给出 $d$ 维空间的 $n$ 个点，求曼哈顿距离最大的两个点的曼哈顿距离。\n\n两个 $d$ 维的点 $(x_1,x_2,\\ldots,x_d)$，$(y_1,y_2,\\ldots,y_d)$ 的曼哈顿距离定义为 $|x_1-y_1|+|x_2-y_2|+\\ldots+|x_d-y_d|$。\n", "inputFormat": "第一行两个整数 $n$，$d$。\n\n接下来 $n$ 行，每行 $d$ 个整数描述一个点的坐标。", "outputFormat": "输出最大的曼哈顿距离。\n", "hint": "#### 数据规模与约定\n\n- 对于 $60\\%$ 的数据，保证 $d\\le2$。\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le10^6$，$d\\le4$，且坐标每一维保证 $1\\le x_i\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1649", "type": "P", "difficulty": 3, "samples": [["3\n. x A\n. . .\nB x .", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "图论", "2007", "USACO", "广度优先搜索 BFS"], "title": "[USACO07OCT] Obstacle Course S", "background": "", "description": "Consider an N x N (1 <= N <= 100) square field composed of 1\n\nby 1 tiles. Some of these tiles are impassible by cows and are marked with an 'x' in this 5 by 5 field that is challenging to navigate:\n\n```cpp\n. . B x . \n. x x A . \n. . . x . \n. x . . . \n. . x . . \n```\nBessie finds herself in one such field at location A and wants to move to location B in order to lick the salt block there.  Slow, lumbering creatures like cows do not like to turn and, of course, may only move parallel to the edges of the square field. For a given field, determine the minimum number of ninety degree turns in any path from A to B. The path may begin and end with Bessie facing in any direction. Bessie knows she can get to the salt lick.\n\n", "inputFormat": "Line 1: A single integer: N\n\nLines 2..N + 1: Line i+1 represents row i of the field with N characters as above (i.e., '.', 'x', 'A', and 'B'); no spaces are present on a line\n", "outputFormat": "Line 1: A single integer, the minimum number of turns the cow must make in a traversal", "hint": "The cow must make at least 2 turns: For example, the cow may start by facing south, move south, turn to face west, move west, move west, then turn to face south, and finally move south into the B square.", "locale": "en", "translations": {"en": {"title": "[USACO07OCT] Obstacle Course S", "background": "", "description": "Consider an N x N (1 <= N <= 100) square field composed of 1\n\nby 1 tiles. Some of these tiles are impassible by cows and are marked with an 'x' in this 5 by 5 field that is challenging to navigate:\n\n```cpp\n. . B x . \n. x x A . \n. . . x . \n. x . . . \n. . x . . \n```\nBessie finds herself in one such field at location A and wants to move to location B in order to lick the salt block there.  Slow, lumbering creatures like cows do not like to turn and, of course, may only move parallel to the edges of the square field. For a given field, determine the minimum number of ninety degree turns in any path from A to B. The path may begin and end with Bessie facing in any direction. Bessie knows she can get to the salt lick.\n\n", "inputFormat": "Line 1: A single integer: N\n\nLines 2..N + 1: Line i+1 represents row i of the field with N characters as above (i.e., '.', 'x', 'A', and 'B'); no spaces are present on a line\n", "outputFormat": "Line 1: A single integer, the minimum number of turns the cow must make in a traversal", "hint": "The cow must make at least 2 turns: For example, the cow may start by facing south, move south, turn to face west, move west, move west, then turn to face south, and finally move south into the B square.", "locale": "en"}, "zh-CN": {"title": "[USACO07OCT] Obstacle Course S", "background": "", "description": "有一个 $N \\times N(1 \\le N \\le 100)$ 的场地，场地由 $N^2$ 个 $1 \\times 1$ 的方格组成。部分方格对于奶牛来说是无法通过的，用 $\\texttt x$ 标记出来；其他方格奶牛都可以通过，用 $\\texttt .$ 标记出来。\n\nBessie 发现自己位于这个场地中的位置 $A$，并且她想要移动到位置 $B$ 去舔那里的盐块。像奶牛这种缓慢且笨拙的生物不喜欢转弯，并且只能沿平行于方格边缘的方向移动。\n\n对于给定的场地，求出从 $A$ 到 $B$ 的路径中最少的 $90^{\\circ}$ 转弯次数。路径可以从任何方向开始和结束。\n\n如果 Bessie 无法到达盐块的位置 $B$，请输出 `-1`。", "inputFormat": "第一行一个正整数 $N$，表示场地的长与宽。\n\n接下来 $N$ 行，每行一个长度为 $N$ 的字符串，字符串每个字符为 $\\{\\texttt{x},\\texttt{.},\\texttt{A},\\texttt{B} \\}$ 中的一种，表示该方格的状态。", "outputFormat": "一行一个整数，表示 Bessie 必须进行的最小转弯次数。", "hint": "#### 【样例 $1$ 解释】\n\nBessie 必须至少转弯两次：例如，Bessie 初始面朝南，向南移动一步，然后转身朝西，再向西再移动两步，接着转身朝南，最后向南移动一步进入 $B$ 方格。（按照“上北下南左西右东”理解）", "locale": "zh-CN"}}}
{"pid": "P1650", "type": "P", "difficulty": 4, "samples": [["3\n92 83 71\n95 87 74", "200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心"], "title": "田忌赛马", "background": "", "description": "我国历史上有个著名的故事： 那是在 $2300$ 年以前。齐国的大将军田忌喜欢赛马。他经常和齐王赛马。他和齐王都有三匹马：常规马，上级马，超级马。一共赛三局，每局的胜者可以从负者这里取得 $200$ 银币。每匹马只能用一次。齐王的马好，同等级的马，齐王的总是比田忌的要好一点。于是每次和齐王赛马，田忌总会输 $600$ 银币。\n\n田忌很沮丧，直到他遇到了著名的军师――孙膑。田忌采用了孙膑的计策之后，三场比赛下来，轻松而优雅地赢了齐王 $200$ 银币。这实在是个很简单的计策。由于齐王总是先出最好的马，再出次好的，所以田忌用常规马对齐王的超级马，用自己的超级马对齐王的上级马，用自己的上级马对齐王的常规马，以两胜一负的战绩赢得 $200$ 银币。实在很简单。\n\n如果不止三匹马怎么办？这个问题很显然可以转化成一个二分图最佳匹配的问题。把田忌的马放左边，把齐王的马放右边。田忌的马 A 和齐王的 B 之间，如果田忌的马胜，则连一条权为 $200$ 的边；如果平局，则连一条权为 $0$ 的边；如果输，则连一条权为 $-200$ 的边……如果你不会求最佳匹配，用最小费用最大流也可以啊。 然而，赛马问题是一种特殊的二分图最佳匹配的问题，上面的算法过于先进了，简直是杀鸡用牛刀。现在，就请你设计一个简单的算法解决这个问题。\n", "inputFormat": "第一行一个整数 $n$ ，表示他们各有几匹马（两人拥有的马的数目相同）。第二行 $n$ 个整数，每个整数都代表田忌的某匹马的速度值（$0 \\le $ 速度值 $\\le 100$）。第三行 $n$ 个整数，描述齐王的马的速度值。两马相遇，根据速度值的大小就可以知道哪匹马会胜出。如果速度值相同，则和局，谁也不拿钱。", "outputFormat": "仅一行，一个整数，表示田忌最大能得到多少银币。", "hint": "### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，$1\\le N\\le 65$；\n- 对于 $40\\%$ 的数据，$1\\le N\\le 250$；\n- 对于 $100\\%$ 的数据，$1\\le N\\le2000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Tian Ji’s Horse Racing", "background": "", "description": "There is a famous story in Chinese history: it was about $2300$ years ago. General Tian Ji of the State of Qi loved horse racing. He often raced horses with the King of Qi. Each of them had three horses: a regular-grade horse, an upper-grade horse, and a super-grade horse. They raced three times in total, and in each race the winner could take $200$ silver coins from the loser. Each horse could be used only once. The King’s horses were better; within the same grade, the King’s horse was always slightly better than Tian Ji’s. So every time he raced the King, Tian Ji would lose $600$ silver coins.\n\nTian Ji was very frustrated until he met the famous strategist — Sun Bin. After adopting Sun Bin’s plan, Tian Ji easily and gracefully won $200$ silver coins from the King of Qi over three races. The strategy was very simple. Since the King always sent out his best horse first and then his second best, Tian Ji used his regular-grade horse against the King’s super-grade horse, his super-grade horse against the King’s upper-grade horse, and his upper-grade horse against the King’s regular-grade horse, achieving two wins and one loss to gain $200$ silver coins. It was indeed simple.\n\nWhat if there are more than three horses? This problem can obviously be transformed into a bipartite optimal matching problem. Put Tian Ji’s horses on the left and the King’s horses on the right. Between Tian Ji’s horse A and the King’s horse B, if Tian Ji’s horse wins, add an edge with weight $200$; if it is a draw, add an edge with weight $0$; if it loses, add an edge with weight $-200$... If you do not know how to compute the optimal matching, you can also use minimum-cost maximum flow. However, the horse racing problem is a special case of bipartite optimal matching, and the above algorithms are overkill. Now, please design a simple algorithm to solve this problem.", "inputFormat": "The first line contains an integer $n$, indicating how many horses each of them has (both have the same number of horses).  \nThe second line contains $n$ integers, each representing the speed value of one of Tian Ji’s horses (each speed value is between $0$ and $100$ inclusive).  \nThe third line contains $n$ integers, describing the speed values of the King’s horses. When two horses meet, the winner is determined by the comparison of their speed values. If the speed values are equal, it is a draw and no one takes any money.", "outputFormat": "Output a single line containing one integer: the maximum number of silver coins Tian Ji can obtain.", "hint": "### Constraints and Conventions\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 65$.\n- For $40\\%$ of the testdata, $1 \\le n \\le 250$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "田忌赛马", "background": "", "description": "我国历史上有个著名的故事： 那是在 $2300$ 年以前。齐国的大将军田忌喜欢赛马。他经常和齐王赛马。他和齐王都有三匹马：常规马，上级马，超级马。一共赛三局，每局的胜者可以从负者这里取得 $200$ 银币。每匹马只能用一次。齐王的马好，同等级的马，齐王的总是比田忌的要好一点。于是每次和齐王赛马，田忌总会输 $600$ 银币。\n\n田忌很沮丧，直到他遇到了著名的军师――孙膑。田忌采用了孙膑的计策之后，三场比赛下来，轻松而优雅地赢了齐王 $200$ 银币。这实在是个很简单的计策。由于齐王总是先出最好的马，再出次好的，所以田忌用常规马对齐王的超级马，用自己的超级马对齐王的上级马，用自己的上级马对齐王的常规马，以两胜一负的战绩赢得 $200$ 银币。实在很简单。\n\n如果不止三匹马怎么办？这个问题很显然可以转化成一个二分图最佳匹配的问题。把田忌的马放左边，把齐王的马放右边。田忌的马 A 和齐王的 B 之间，如果田忌的马胜，则连一条权为 $200$ 的边；如果平局，则连一条权为 $0$ 的边；如果输，则连一条权为 $-200$ 的边……如果你不会求最佳匹配，用最小费用最大流也可以啊。 然而，赛马问题是一种特殊的二分图最佳匹配的问题，上面的算法过于先进了，简直是杀鸡用牛刀。现在，就请你设计一个简单的算法解决这个问题。\n", "inputFormat": "第一行一个整数 $n$ ，表示他们各有几匹马（两人拥有的马的数目相同）。第二行 $n$ 个整数，每个整数都代表田忌的某匹马的速度值（$0 \\le $ 速度值 $\\le 100$）。第三行 $n$ 个整数，描述齐王的马的速度值。两马相遇，根据速度值的大小就可以知道哪匹马会胜出。如果速度值相同，则和局，谁也不拿钱。", "outputFormat": "仅一行，一个整数，表示田忌最大能得到多少银币。", "hint": "### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，$1\\le N\\le 65$；\n- 对于 $40\\%$ 的数据，$1\\le N\\le 250$；\n- 对于 $100\\%$ 的数据，$1\\le N\\le2000$。\n", "locale": "zh-CN"}}}
{"pid": "P1651", "type": "P", "difficulty": 4, "samples": [["3\r\n2 3 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "塔", "background": "", "description": "小明很喜欢摆积木，现在他正在玩的积木是由 $N$ 个木块组成的，他想用这些木块搭出两座高度相同的塔，一座塔的高度是搭建它的所有木块的高度和，并且一座塔至少要用一个木块。每个木块只能用一次，也可以不用。目前已知每块木块的高度，小明想知道在最终两个塔的高度相同的情况下，他所能搭的塔的最大高度是多少，你能帮助他吗？", "inputFormat": "第一行为一个整数 $N$，表示木块个数。\n\n第二行是 $N$ 个整数，表示 $N$ 块木块的高度。\n", "outputFormat": "仅一个整数，表示能搭建的塔的最大高度，若不能搭建两座相同高度的塔，则输出 `-1`。", "hint": "对于 $100\\%$ 的数据，$N \\le 50$ ，每块木块的高度 $h$ 满足 $1 \\le h \\le 500000$，所有木块的高度总和 $\\le 500000$。", "locale": "zh-CN", "translations": {"en": {"title": "Towers", "background": "", "description": "Xiao Ming likes stacking blocks. He currently has $N$ wooden blocks. He wants to build two towers of equal height. The height of a tower is the sum of the heights of all blocks used to build it, and each tower must use at least one block. Each block can be used at most once, and it is allowed to leave some blocks unused. Given the height of each block, determine the maximum possible height of the towers when the two towers have the same height. Can you help him?", "inputFormat": "The first line contains an integer $N$, the number of blocks.\nThe second line contains $N$ integers, the heights of the $N$ blocks.", "outputFormat": "Output a single integer, the maximum height of the towers that can be built. If it is impossible to build two towers of the same height, output `-1`.", "hint": "Constraints: For 100% of the testdata, $N \\le 50$. Each block height $h$ satisfies $1 \\le h \\le 500000$, and the total sum of all block heights is $\\le 500000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "塔", "background": "", "description": "小明很喜欢摆积木，现在他正在玩的积木是由 $N$ 个木块组成的，他想用这些木块搭出两座高度相同的塔，一座塔的高度是搭建它的所有木块的高度和，并且一座塔至少要用一个木块。每个木块只能用一次，也可以不用。目前已知每块木块的高度，小明想知道在最终两个塔的高度相同的情况下，他所能搭的塔的最大高度是多少，你能帮助他吗？", "inputFormat": "第一行为一个整数 $N$，表示木块个数。\n\n第二行是 $N$ 个整数，表示 $N$ 块木块的高度。\n", "outputFormat": "仅一个整数，表示能搭建的塔的最大高度，若不能搭建两座相同高度的塔，则输出 `-1`。", "hint": "对于 $100\\%$ 的数据，$N \\le 50$ ，每块木块的高度 $h$ 满足 $1 \\le h \\le 500000$，所有木块的高度总和 $\\le 500000$。", "locale": "zh-CN"}}}
{"pid": "P1652", "type": "P", "difficulty": 2, "samples": [["7\n1 -3 2 5 -4 12 12\n1 -1 2 5 5 1 1\n8 1 2 1 1 1 2\n-5 1 12 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "计算几何"], "title": "圆", "background": "", "description": "给出 $n$ 个圆，保证任意两个圆都不相交且不相切。  \n\n然后给出两个点 $(x_1,y_1),(x_2,y_2)$，保证均不在某个圆上。现在要从 $(x_1,y_1) \\to (x_2,y_2)$ 画条曲线，问这条曲线最少穿过多少次圆的边界？\n\n", "inputFormat": "- 第一行为一个整数 $n$，表示圆的个数；\n- 第二行是 $n$ 个整数，表示 $n$ 个圆的 $x$ 坐标；\n- 第三行是 $n$ 个整数，表示 $n$ 个圆的 $y$ 坐标；\n- 第四行是 $n$ 个整数，表示 $n$ 个圆的半径 $r$；\n- 第五行是四个整数 $x_1,y_1,x_2,y_2$。\n", "outputFormat": "仅一个整数，表示最少要穿过多少次圆的边界。\n", "hint": "【数据范围】  \n\n对于 $100\\%$ 的数据，$1\\le n \\le 50$，$|x|,|y| \\le 1000$，$1 \\le r \\le 1000$。\n\n保证圆之间没有公共点。", "locale": "zh-CN", "translations": {"en": {"title": "Circles", "background": "", "description": "You are given $n$ circles, and it is guaranteed that any two circles do not intersect and are not tangent.\n\nYou are then given two points $(x_1,y_1),(x_2,y_2)$, both guaranteed to be not on any circle. Now you want to draw a curve from $(x_1,y_1) \\to (x_2,y_2)$. What is the minimum number of times this curve must cross the boundaries of the circles?", "inputFormat": "- The first line contains an integer $n$, the number of circles.\n- The second line contains $n$ integers, the $x$-coordinates of the circles.\n- The third line contains $n$ integers, the $y$-coordinates of the circles.\n- The fourth line contains $n$ integers, the radii $r$ of the circles.\n- The fifth line contains four integers $x_1,y_1,x_2,y_2$.", "outputFormat": "Output a single integer, the minimum number of times the curve must cross the boundaries of the circles.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 50$, $|x|, |y| \\le 1000$, $1 \\le r \\le 1000$.\n\nIt is guaranteed that no two circles share any point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "圆", "background": "", "description": "给出 $n$ 个圆，保证任意两个圆都不相交且不相切。  \n\n然后给出两个点 $(x_1,y_1),(x_2,y_2)$，保证均不在某个圆上。现在要从 $(x_1,y_1) \\to (x_2,y_2)$ 画条曲线，问这条曲线最少穿过多少次圆的边界？\n\n", "inputFormat": "- 第一行为一个整数 $n$，表示圆的个数；\n- 第二行是 $n$ 个整数，表示 $n$ 个圆的 $x$ 坐标；\n- 第三行是 $n$ 个整数，表示 $n$ 个圆的 $y$ 坐标；\n- 第四行是 $n$ 个整数，表示 $n$ 个圆的半径 $r$；\n- 第五行是四个整数 $x_1,y_1,x_2,y_2$。\n", "outputFormat": "仅一个整数，表示最少要穿过多少次圆的边界。\n", "hint": "【数据范围】  \n\n对于 $100\\%$ 的数据，$1\\le n \\le 50$，$|x|,|y| \\le 1000$，$1 \\le r \\le 1000$。\n\n保证圆之间没有公共点。", "locale": "zh-CN"}}}
{"pid": "P1653", "type": "P", "difficulty": 4, "samples": [["9 3\n1 1 1 2 2 2 1 1 1\n1 2 1 2 3 2 1 2 1\n1 1 1 2 2 2 1 1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "2004", "USACO", "连通块", "强连通分量", "Tarjan"], "title": "[USACO04DEC] Cow Ski Area G", "background": "", "description": "约翰的表哥罗恩生活在科罗拉多州。他近来打算教他的奶牛们滑雪，但是奶牛们非常害羞，不敢在游人组织的度假胜地滑雪。没办法，他只好自己建滑雪场了。罗恩的雪场可以划分为 $W$ 列 $L$ 行 $(1\\le W\\le 500, 1\\le L\\le 500)$，每个方格有一个特定的高度 $H(0\\le H\\le 9999)$。奶牛可以在相邻方格间滑雪，而且不能由低到高滑。\n\n为了保证任意方格可以互通，罗恩打算造一些直达缆车。缆车很强大，可以连接任意两个方格，而且是双向的。而且同一个方格也可以造多台缆车。但是缆车的建造费用贵得吓人，所以他希望造尽量少的缆车。那最少需要造多少台呢？", "inputFormat": "第 $1$ 行：$W$，$L$。\n\n接下来输入宽 $W$ 高 $L$ 的矩阵地图。", "outputFormat": "输出最小需要的缆车数。", "hint": "$1\\le W,L\\le 500$，$0\\le H\\le 9999$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04DEC] Cow Ski Area G", "background": "# Description\n\nJohn’s cousin Ron lives in Colorado. He plans to teach his cows to ski, but they are very shy and do not dare to ski at tourist resorts. So he has to build his own ski area. Ron’s ski area can be divided into $W$ columns and $L$ rows ($1 \\le W \\le 500$, $1 \\le L \\le 500$). Each cell has a specific height $H$ ($0 \\le H \\le 9999$). Cows can ski between adjacent cells, and they are not allowed to move from a lower cell to a higher one.\n\nTo ensure that any two cells can reach each other, Ron plans to build some direct lifts. Lifts are powerful: they can connect any two cells and are bidirectional. Multiple lifts can be built at the same cell. However, lifts are very expensive, so he wants to build as few as possible. What is the minimum number of lifts needed?", "description": "", "inputFormat": "", "outputFormat": "Output the minimum number of lifts needed.", "hint": "Constraints: $1 \\le W, L \\le 500$, $0 \\le H \\le 9999$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04DEC] Cow Ski Area G", "background": "", "description": "约翰的表哥罗恩生活在科罗拉多州。他近来打算教他的奶牛们滑雪，但是奶牛们非常害羞，不敢在游人组织的度假胜地滑雪。没办法，他只好自己建滑雪场了。罗恩的雪场可以划分为 $W$ 列 $L$ 行 $(1\\le W\\le 500, 1\\le L\\le 500)$，每个方格有一个特定的高度 $H(0\\le H\\le 9999)$。奶牛可以在相邻方格间滑雪，而且不能由低到高滑。\n\n为了保证任意方格可以互通，罗恩打算造一些直达缆车。缆车很强大，可以连接任意两个方格，而且是双向的。而且同一个方格也可以造多台缆车。但是缆车的建造费用贵得吓人，所以他希望造尽量少的缆车。那最少需要造多少台呢？", "inputFormat": "第 $1$ 行：$W$，$L$。\n\n接下来输入宽 $W$ 高 $L$ 的矩阵地图。", "outputFormat": "输出最小需要的缆车数。", "hint": "$1\\le W,L\\le 500$，$0\\le H\\le 9999$。", "locale": "zh-CN"}}}
{"pid": "P1654", "type": "P", "difficulty": 5, "samples": [["3 \n0.5 \n0.5 \n0.5", "6.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "OSU!", "background": "原 《产品排序》 参见P2577", "description": "osu 是一款群众喜闻乐见的休闲软件。 \n\n我们可以把 osu 的规则简化与改编成以下的样子: \n\n一共有 $n$ 次操作，每次操作只有成功与失败之分，成功对应 $1$，失败对应 $0$，$n$ 次操作对应为 $1$ 个长度为 $n$ 的 01 串。在这个串中连续的  $X$ 个 $1$ 可以贡献 $X^3$ 的分数，这 $x$ 个 $1$ 不能被其他连续的 $1$ 所包含（也就是极长的一串 $1$，具体见样例解释） \n\n现在给出 $n$，以及每个操作的成功率，请你输出期望分数，输出四舍五入后保留 $1$ 位小数。", "inputFormat": "第一行有一个正整数 $n$，表示操作个数。接下去 $n$ 行每行有一个 $[0,1]$ 之间的实数，表示每个操作的成功率。", "outputFormat": "只有一个实数，表示答案。答案四舍五入后保留 $1$ 位小数。", "hint": "【样例说明】\n\n$000$ 分数为 $0$，$001$ 分数为 $1$，$010$ 分数为 $1$，$100$ 分数为 $1$，$101$ 分数为 $2$，$110$ 分数为 $8$，$011$ 分数为 $8$，$111$ 分数为 $27$，总和为 $48$，期望为 $\\dfrac{48}8 = 6.0$。\n\n$n \\leq 1 \\times 10 ^ 5$。", "locale": "zh-CN", "translations": {"en": {"title": "OSU!", "background": "Original \"Product Sorting\", see P2577.", "description": "osu is a popular casual game.\n\nWe can simplify and adapt its rules as follows:\n\nThere are $n$ operations. Each operation is either a success or a failure, where success is denoted by $1$ and failure by $0$. The $n$ operations form a binary string of length $n$. In this string, every maximal run of $X$ consecutive $1$'s contributes $X^3$ points to the score (i.e., these $X$ ones must not be contained within a longer run of consecutive $1$'s; see the sample explanation).\n\nGiven $n$ and the success probability of each operation, output the expected score, rounded to 1 decimal place.", "inputFormat": "The first line contains a positive integer $n$, the number of operations.  \nEach of the next $n$ lines contains a real number in $[0, 1]$, denoting the success probability of each operation.", "outputFormat": "Output a single real number, the answer, rounded to 1 decimal place.", "hint": "[Sample explanation]\n\n$000$ has a score of $0$，$001$ has a score of $1$，$010$ has a score of $1$，$100$ has a score of $1$，$101$ has a score of $2$，$110$ has a score of $8$，$011$ has a score of $8$，$111$ has a score of $27$，the total is $48$, and the expectation is $\\dfrac{48}8 = 6.0$.\n\nConstraints: $n \\leq 1 \\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "OSU!", "background": "原 《产品排序》 参见P2577", "description": "osu 是一款群众喜闻乐见的休闲软件。 \n\n我们可以把 osu 的规则简化与改编成以下的样子: \n\n一共有 $n$ 次操作，每次操作只有成功与失败之分，成功对应 $1$，失败对应 $0$，$n$ 次操作对应为 $1$ 个长度为 $n$ 的 01 串。在这个串中连续的  $X$ 个 $1$ 可以贡献 $X^3$ 的分数，这 $x$ 个 $1$ 不能被其他连续的 $1$ 所包含（也就是极长的一串 $1$，具体见样例解释） \n\n现在给出 $n$，以及每个操作的成功率，请你输出期望分数，输出四舍五入后保留 $1$ 位小数。", "inputFormat": "第一行有一个正整数 $n$，表示操作个数。接下去 $n$ 行每行有一个 $[0,1]$ 之间的实数，表示每个操作的成功率。", "outputFormat": "只有一个实数，表示答案。答案四舍五入后保留 $1$ 位小数。", "hint": "【样例说明】\n\n$000$ 分数为 $0$，$001$ 分数为 $1$，$010$ 分数为 $1$，$100$ 分数为 $1$，$101$ 分数为 $2$，$110$ 分数为 $8$，$011$ 分数为 $8$，$111$ 分数为 $27$，总和为 $48$，期望为 $\\dfrac{48}8 = 6.0$。\n\n$n \\leq 1 \\times 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P1655", "type": "P", "difficulty": 4, "samples": [["4 2\n1 1", "7\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "高精度", "洛谷原创", "组合数学", "Stirling 数", "洛谷月赛"], "title": "小朋友的球", "background": "", "description": "@发源于 小朋友最近特别喜欢球。有一天他脑子抽了，从口袋里拿出了 $N$ 个不同的球，想把它们放到 $M$ 个相同的盒子里，并且要求每个盒子中至少要有一个球，他好奇有几种放法，于是尝试编程实现，但由于他天天不好好学习，只会上 B 站看游泳教练，于是他向你求助。", "inputFormat": "多组数据，每行两个数 $N,M$。\n", "outputFormat": "每组数据一行，表示方案数。\n", "hint": "- 对于 $20\\%$ 的数据，满足 $N,M \\leq 10$；\n- 对于 $100\\%$ 的数据，满足 $1 \\leq N,M \\leq 100$，一个测试文件最多有 $10$ 组测试数据。\n", "locale": "zh-CN", "translations": {"en": {"title": "Kid's Balls", "background": "", "description": "A kid recently became very fond of balls. One day, he took $N$ distinct balls out of his pocket and wants to put them into $M$ identical boxes, with at least one ball in each box. He wonders how many ways there are. He tried to write a program, but since he slacks off and only watches swimming coaches on Bilibili, he asks you for help.", "inputFormat": "Multiple test cases. Each line contains two integers $N, M$.", "outputFormat": "For each test case, output a single line with the number of ways.", "hint": "- For $20\\%$ of the testdata, $N, M \\leq 10$.\n- For $100\\%$ of the testdata, $1 \\leq N, M \\leq 100$, and there are at most $10$ test cases per test file.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小朋友的球", "background": "", "description": "@发源于 小朋友最近特别喜欢球。有一天他脑子抽了，从口袋里拿出了 $N$ 个不同的球，想把它们放到 $M$ 个相同的盒子里，并且要求每个盒子中至少要有一个球，他好奇有几种放法，于是尝试编程实现，但由于他天天不好好学习，只会上 B 站看游泳教练，于是他向你求助。", "inputFormat": "多组数据，每行两个数 $N,M$。\n", "outputFormat": "每组数据一行，表示方案数。\n", "hint": "- 对于 $20\\%$ 的数据，满足 $N,M \\leq 10$；\n- 对于 $100\\%$ 的数据，满足 $1 \\leq N,M \\leq 100$，一个测试文件最多有 $10$ 组测试数据。\n", "locale": "zh-CN"}}}
{"pid": "P1656", "type": "P", "difficulty": 3, "samples": [["6 6\n1 2\n2 3\n2 4\n3 5\n4 5\n5 6", "1 2\n5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "图论", "并查集", "洛谷原创", "最短路", "Tarjan"], "title": "炸铁路", "background": null, "description": "A 国派出将军 uim，对 B 国进行战略性措施，以解救涂炭的生灵。\n\nB 国有 $n$ 个城市，这些城市以铁路相连。任意两个城市都可以通过铁路直接或者间接到达。\n\nuim 发现有些铁路被毁坏之后，某两个城市无法互相通过铁路到达。这样的铁路就被称为 key road。\n\nuim 为了尽快使该国的物流系统瘫痪，希望炸毁铁路，以达到存在某两个城市无法互相通过铁路到达的效果。\n\n然而，只有一发炮弹（A 国国会不给钱了）。所以，他能轰炸哪一条铁路呢？", "inputFormat": "第一行 $n,m\\ (1 \\leq n\\leq 150$，$1 \\leq m \\leq 5000)$，分别表示有 $n$ 个城市，总共 $m$ 条铁路。\n\n以下 $m$ 行，每行两个整数 $a, b$，表示城市 $a$ 和城市 $b$ 之间有铁路直接连接。", "outputFormat": "输出有若干行。\n\n每行包含两个数字 $a,b$，其中 $a<b$，表示 $\\lang a,b\\rang$ 是 key road。\n\n请注意：输出时，所有的数对 $\\lang a,b\\rang$ 必须按照 $a$ 从小到大排序输出；如果 $a$ 相同，则根据 $b$ 从小到大排序。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Bomb the Railways", "background": "", "description": "Country A dispatches General uim to take strategic measures against Country B to rescue the suffering people.\n\nCountry B has $n$ cities connected by railways. Any two cities can be reached directly or indirectly via railways.\n\nuim discovers that if a certain railway is destroyed, there will be a pair of cities that can no longer reach each other by railway. Such a railway is called a \"key road.\"\n\nTo quickly paralyze the country's logistics system, uim hopes to blow up railways so that there exists a pair of cities that cannot reach each other.\n\nHowever, there is only one shell (Country A's parliament will not fund more). So, which single railway can he bomb?", "inputFormat": "The first line contains $n, m\\ (1 \\leq n \\leq 150,\\ 1 \\leq m \\leq 5000)$, representing that there are $n$ cities and a total of $m$ railways.\n\nThe following $m$ lines each contain two integers $a, b$, indicating that city $a$ and city $b$ are directly connected by a railway.", "outputFormat": "Output several lines.\n\nEach line contains two numbers $a, b$, with $a < b$, indicating that $\\lang a,b\\rang$ is a key road.\n\nPlease note: In the output, all pairs $\\lang a,b\\rang$ must be sorted by increasing $a$; if $a$ is the same, then sort by increasing $b$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "炸铁路", "background": null, "description": "A 国派出将军 uim，对 B 国进行战略性措施，以解救涂炭的生灵。\n\nB 国有 $n$ 个城市，这些城市以铁路相连。任意两个城市都可以通过铁路直接或者间接到达。\n\nuim 发现有些铁路被毁坏之后，某两个城市无法互相通过铁路到达。这样的铁路就被称为 key road。\n\nuim 为了尽快使该国的物流系统瘫痪，希望炸毁铁路，以达到存在某两个城市无法互相通过铁路到达的效果。\n\n然而，只有一发炮弹（A 国国会不给钱了）。所以，他能轰炸哪一条铁路呢？", "inputFormat": "第一行 $n,m\\ (1 \\leq n\\leq 150$，$1 \\leq m \\leq 5000)$，分别表示有 $n$ 个城市，总共 $m$ 条铁路。\n\n以下 $m$ 行，每行两个整数 $a, b$，表示城市 $a$ 和城市 $b$ 之间有铁路直接连接。", "outputFormat": "输出有若干行。\n\n每行包含两个数字 $a,b$，其中 $a<b$，表示 $\\lang a,b\\rang$ 是 key road。\n\n请注意：输出时，所有的数对 $\\lang a,b\\rang$ 必须按照 $a$ 从小到大排序输出；如果 $a$ 相同，则根据 $b$ 从小到大排序。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1657", "type": "P", "difficulty": 2, "samples": [["5\n1 3\n4 5\n2 5\n1 4\n3 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072]}, "tags": ["模拟", "搜索", "递归"], "title": "选书", "background": "", "description": "学校放寒假时，信息学奥赛辅导老师有 $1,2,3,\\cdots,x$ 本书，要分给参加培训的 $x$ 个人，每人只能选一本书，但是每人有两本喜欢的书。\n\n老师事先让每个人将自己喜欢的书填写在一张表上。然后根据他们填写的表来分配书本，希望设计一个程序帮助老师求出所有可能的分配方案，使每个学生都满意。", "inputFormat": "第 $1$ 行一个数 $x$。\n\n第 $2$ 行至第 $1+x$ 行，每行两个数，表示 $a_i$ 喜欢的书的序号。", "outputFormat": "只有一个数，总方案数 $\\mathit{total}$。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le x\\le 20$。\n\n\n$\\text{update 2022/03/07}$，阮行止\n\n本题原始数据中，最后一个数据点的 x 为 $0$，期望输出为  $0$。考虑到这个数据不合理，予以删去。现在提交这个题目不会遇到 $x=0$ 的数据点。\n\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Selecting Books", "background": "", "description": "When school goes on winter break, the informatics olympiad coach has $1,2,3,\\cdots,x$ books to distribute to $x$ trainees. Each person can receive only one book, but each person has two favorite books.\n\nThe teacher first asks each person to write down the books they like on a sheet. Then, based on these sheets, the teacher assigns the books. Please write a program to find the total number of possible assignment schemes in which every student is satisfied.", "inputFormat": "Line $1$: a number $x$.\n\nLines $2$ through $1+x$: each line contains two numbers, indicating the indices of the books that $a_i$ likes.", "outputFormat": "A single number: the total number of schemes $\\mathit{total}$.", "hint": "Constraints\n\nFor all testdata, $1\\le x\\le 20$.\n\n$\\text{update 2022/03/07}$, Ruan Xingzhi\n\nIn the original testdata for this problem, the last data point has $x$ equal to $0$, and the expected output is $0$. Considering this data is unreasonable, it has been removed. Now, when submitting this problem, you will not encounter data points with $x=0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "选书", "background": "", "description": "学校放寒假时，信息学奥赛辅导老师有 $1,2,3,\\cdots,x$ 本书，要分给参加培训的 $x$ 个人，每人只能选一本书，但是每人有两本喜欢的书。\n\n老师事先让每个人将自己喜欢的书填写在一张表上。然后根据他们填写的表来分配书本，希望设计一个程序帮助老师求出所有可能的分配方案，使每个学生都满意。", "inputFormat": "第 $1$ 行一个数 $x$。\n\n第 $2$ 行至第 $1+x$ 行，每行两个数，表示 $a_i$ 喜欢的书的序号。", "outputFormat": "只有一个数，总方案数 $\\mathit{total}$。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le x\\le 20$。\n\n\n$\\text{update 2022/03/07}$，阮行止\n\n本题原始数据中，最后一个数据点的 x 为 $0$，期望输出为  $0$。考虑到这个数据不合理，予以删去。现在提交这个题目不会遇到 $x=0$ 的数据点。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P1658", "type": "P", "difficulty": 3, "samples": [["20 4\n1 2 5 10\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "购物", "background": "", "description": "你就要去购物了，现在你手上有 $N$ 种不同面值的硬币，每种硬币有无限多个。为了方便购物，你希望带尽量少的硬币，但要能组合出 $1$ 到 $X$ 之间的任意值。\n", "inputFormat": "第一行两个数 $X, N$，以下 $N$ 个数，表示每种硬币的面值。", "outputFormat": "最少需要携带的硬币个数，如果无解输出 `-1`。", "hint": "对于 $30\\%$ 的数据，满足 $N \\le 3$，$X \\le 20$；\n\n对于 $100\\%$ 的数据，满足 $N \\le 10$，$X \\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Shopping", "background": "", "description": "You are going shopping. You have $N$ types of coins with different denominations, and each type is available in unlimited quantity. For convenience, you want to carry as few coins as possible, while still being able to form any value from $1$ to $X$.", "inputFormat": "The first line contains two integers $X, N$. The next $N$ integers denote the denomination of each coin type.", "outputFormat": "Output the minimum number of coins you need to carry. If there is no solution, output `-1`.", "hint": "For 30% of the testdata, $N \\le 3$, $X \\le 20$.\nFor 100% of the testdata, $N \\le 10$, $X \\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "购物", "background": "", "description": "你就要去购物了，现在你手上有 $N$ 种不同面值的硬币，每种硬币有无限多个。为了方便购物，你希望带尽量少的硬币，但要能组合出 $1$ 到 $X$ 之间的任意值。\n", "inputFormat": "第一行两个数 $X, N$，以下 $N$ 个数，表示每种硬币的面值。", "outputFormat": "最少需要携带的硬币个数，如果无解输出 `-1`。", "hint": "对于 $30\\%$ 的数据，满足 $N \\le 3$，$X \\le 20$；\n\n对于 $100\\%$ 的数据，满足 $N \\le 10$，$X \\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1659", "type": "P", "difficulty": 5, "samples": [["5 3\nababa", "45\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["字符串", "集训队互测", "前缀和", "Manacher 算法"], "title": "[国家集训队] 拉拉队排练", "background": null, "description": "艾利斯顿商学院篮球队要参加一年一度的市篮球比赛了。拉拉队是篮球比赛的一个看点，好的拉拉队往往能帮助球队增加士气，赢得最终的比赛。所以作为拉拉队队长的楚雨荨同学知道，帮助篮球队训练好拉拉队有多么的重要。\n\n拉拉队的选拔工作已经结束，在雨荨和校长的挑选下，$n$ 位集优秀的身材、舞技于一体的美女从众多报名的女生中脱颖而出。这些女生将随着篮球队的小伙子们一起，和对手抗衡，为艾利斯顿篮球队加油助威。\n\n一个阳光明媚的早晨，雨荨带领拉拉队的队员们开始了排练。$n$ 个女生从左到右排成一行，每个人手中都举了一个写有 $26$ 个小写字母中的某一个的牌子，在比赛的时候挥舞，为小伙子们呐喊、加油。\n\n雨荨发现，如果连续的一段女生，有奇数个，并且她们手中的牌子所写的字母，从左到右和从右到左读起来一样，那么这一段女生就被称作和谐小群体。\n\n现在雨荨想找出所有和谐小群体，并且按照女生的个数降序排序之后，前 $K$ 个和谐小群体的女生个数的乘积是多少。由于答案可能很大，雨荨只要你告诉她，答案除以 $19930726$ 的余数是多少就行了。", "inputFormat": "第一行为两个正整数 $n$ 和 $K$，含义如题面所述。\n\n接下来一行为 $n$ 个字符，代表从左到右女生拿的牌子上写的字母。", "outputFormat": "输出一个整数，代表题目描述中所写的乘积除以 $19930726$ 的余数，如果总的和谐小群体个数小于 $K$，输出一个整数 $-1$。", "hint": "### 样例说明\n\n和谐小群体女生所拿牌子上写的字母从左到右按照女生个数降序排序后为 `ababa`，`aba`，`aba`，`bab`，`a`，`a`，`a`，`b`，`b`，前三个长度的乘积为 $5\\times 3\\times 3 = 45$。\n\n\n### 数据范围与约定\n\n\n测试点 | $1\\le n\\le$ | $1\\le K\\le$\n|-|-|-|\n| $1$ | $10$ | $10$ |\n| $2\\sim3$ | $100$ | $100$ |\n| $4\\sim7$ | $1000$ | $1000$ |\n| $8$ | $10^5$ | $1$ |\n| $9\\sim11$ | $10^5$ | $10^5$ |\n| $12\\sim14$ | $10^5$ | $10^{12}$ |\n| $15\\sim17$ | $5\\times10^5$ | $10^{12}$ |\n| $18$ | $10^6$ | $1$ |\n| $19$ | $10^6$ | $10^6$ |\n| $20$ | $10^6$ | $10^{12}$ |", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Cheerleading Rehearsal", "background": "", "description": "The Ailiston Business School basketball team is going to compete in the annual city basketball tournament. The cheerleading squad is a highlight of the game; a good squad can often boost morale and help the team win. As the captain of the cheerleading squad, Chu Yuxin knows how important it is to train the squad well.\n\nThe selection is over. With the choices made by Yuxin and the principal, $n$ girls with excellent figures and dance skills have been chosen from many applicants. These girls will stand with the basketball team and cheer for Ailiston.\n\nOn a sunny morning, Yuxin led the team to start rehearsal. The $n$ girls line up from left to right. Each girl holds a sign bearing one of the $26$ lowercase letters, which they will wave during the game.\n\nYuxin notices that if a contiguous segment of girls has an odd number of members, and the letters on their signs read the same from left to right and from right to left, then this segment is called a harmonious group.\n\nNow Yuxin wants to find all harmonious groups. After sorting them by the number of girls in descending order, what is the product of the sizes of the first $K$ harmonious groups? Since the answer can be large, please report the remainder when divided by $19930726$.", "inputFormat": "The first line contains two positive integers $n$ and $K$, as described above.\n\nThe second line contains $n$ characters, representing the letters on the signs from left to right.", "outputFormat": "Output a single integer: the remainder of the product described in the statement divided by $19930726$. If the total number of harmonious groups is less than $K$, output $-1$.", "hint": "### Sample Explanation\n\nAfter sorting the letters of harmonious groups from left to right by group size in descending order, they are `ababa`, `aba`, `aba`, `bab`, `a`, `a`, `a`, `b`, `b`. The product of the first three lengths is $5 \\times 3 \\times 3 = 45$.\n\n### Constraints\n\nTest point | $1 \\le n \\le$ | $1 \\le K \\le$\n-|-|-\n$1$ | $10$ | $10$\n$2\\sim3$ | $100$ | $100$\n$4\\sim7$ | $1000$ | $1000$\n$8$ | $10^5$ | $1$\n$9\\sim11$ | $10^5$ | $10^5$\n$12\\sim14$ | $10^5$ | $10^{12}$\n$15\\sim17$ | $5\\times 10^5$ | $10^{12}$\n$18$ | $10^6$ | $1$\n$19$ | $10^6$ | $10^6$\n$20$ | $10^6$ | $10^{12}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 拉拉队排练", "background": null, "description": "艾利斯顿商学院篮球队要参加一年一度的市篮球比赛了。拉拉队是篮球比赛的一个看点，好的拉拉队往往能帮助球队增加士气，赢得最终的比赛。所以作为拉拉队队长的楚雨荨同学知道，帮助篮球队训练好拉拉队有多么的重要。\n\n拉拉队的选拔工作已经结束，在雨荨和校长的挑选下，$n$ 位集优秀的身材、舞技于一体的美女从众多报名的女生中脱颖而出。这些女生将随着篮球队的小伙子们一起，和对手抗衡，为艾利斯顿篮球队加油助威。\n\n一个阳光明媚的早晨，雨荨带领拉拉队的队员们开始了排练。$n$ 个女生从左到右排成一行，每个人手中都举了一个写有 $26$ 个小写字母中的某一个的牌子，在比赛的时候挥舞，为小伙子们呐喊、加油。\n\n雨荨发现，如果连续的一段女生，有奇数个，并且她们手中的牌子所写的字母，从左到右和从右到左读起来一样，那么这一段女生就被称作和谐小群体。\n\n现在雨荨想找出所有和谐小群体，并且按照女生的个数降序排序之后，前 $K$ 个和谐小群体的女生个数的乘积是多少。由于答案可能很大，雨荨只要你告诉她，答案除以 $19930726$ 的余数是多少就行了。", "inputFormat": "第一行为两个正整数 $n$ 和 $K$，含义如题面所述。\n\n接下来一行为 $n$ 个字符，代表从左到右女生拿的牌子上写的字母。", "outputFormat": "输出一个整数，代表题目描述中所写的乘积除以 $19930726$ 的余数，如果总的和谐小群体个数小于 $K$，输出一个整数 $-1$。", "hint": "### 样例说明\n\n和谐小群体女生所拿牌子上写的字母从左到右按照女生个数降序排序后为 `ababa`，`aba`，`aba`，`bab`，`a`，`a`，`a`，`b`，`b`，前三个长度的乘积为 $5\\times 3\\times 3 = 45$。\n\n\n### 数据范围与约定\n\n\n测试点 | $1\\le n\\le$ | $1\\le K\\le$\n|-|-|-|\n| $1$ | $10$ | $10$ |\n| $2\\sim3$ | $100$ | $100$ |\n| $4\\sim7$ | $1000$ | $1000$ |\n| $8$ | $10^5$ | $1$ |\n| $9\\sim11$ | $10^5$ | $10^5$ |\n| $12\\sim14$ | $10^5$ | $10^{12}$ |\n| $15\\sim17$ | $5\\times10^5$ | $10^{12}$ |\n| $18$ | $10^6$ | $1$ |\n| $19$ | $10^6$ | $10^6$ |\n| $20$ | $10^6$ | $10^{12}$ |", "locale": "zh-CN"}}}
{"pid": "P1660", "type": "P", "difficulty": 5, "samples": [["2 1 5", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "树形数据结构", "递归"], "title": "数位平方和", "background": "", "description": "定义 $S(n)$ 表示 $n$ 的各个数位的 $k$ 次方的和。\n\n定义 $H(n)$ 为满足 $H(n) \\le \\min\\{n, H(S(n))\\}$ 的最大值。\n\n求$\\sum_{i=A}^{B} H(i) \\bmod (10^7 + 7)$。", "inputFormat": "一行三个数 $k, A, B$。", "outputFormat": "一个数，表示 $\\sum_{i=A}^{B} H(i) \\bmod (10^7 + 7)$。", "hint": "对于 $20\\%$ 的数据，$A, B \\le 50$。  \n对于 $100\\%$ 的数据，$1 \\le A, B \\le {10}^6$，$1 \\le k \\le 6$。", "locale": "zh-CN", "translations": {"en": {"title": "Sum of Squares of Digits", "background": "", "description": "Define $S(n)$ as the sum of the $k$-th powers of the digits of $n$.\n\nDefine $H(n)$ as the maximum value satisfying $H(n) \\le \\min\\{n, H(S(n))\\}$.\n\nCompute $\\sum_{i=A}^{B} H(i) \\bmod (10^7 + 7)$.", "inputFormat": "One line with three integers $k, A, B$.", "outputFormat": "One integer, equal to $\\sum_{i=A}^{B} H(i) \\bmod (10^7 + 7)$.", "hint": "For $20\\%$ of the testdata, $A, B \\le 50$.\nFor $100\\%$ of the testdata, $1 \\le A, B \\le {10}^6$, $1 \\le k \\le 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数位平方和", "background": "", "description": "定义 $S(n)$ 表示 $n$ 的各个数位的 $k$ 次方的和。\n\n定义 $H(n)$ 为满足 $H(n) \\le \\min\\{n, H(S(n))\\}$ 的最大值。\n\n求$\\sum_{i=A}^{B} H(i) \\bmod (10^7 + 7)$。", "inputFormat": "一行三个数 $k, A, B$。", "outputFormat": "一个数，表示 $\\sum_{i=A}^{B} H(i) \\bmod (10^7 + 7)$。", "hint": "对于 $20\\%$ 的数据，$A, B \\le 50$。  \n对于 $100\\%$ 的数据，$1 \\le A, B \\le {10}^6$，$1 \\le k \\le 6$。", "locale": "zh-CN"}}}
{"pid": "P1661", "type": "P", "difficulty": 3, "samples": [["2\r\n0 0\r\n5 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "树形数据结构", "二分", "并查集", "生成树"], "title": "扩散", "background": "", "description": "一个点每过一个单位时间就会向四个方向扩散一个距离，如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cd4e53lw.png)\n\n两个点 $a$ 、 $b$ 连通，记作 $e(a,b)$，当且仅当 $a,b$ 的扩散区域有公共部分。连通块的定义是块内的任意两个点 $u,v$ 都必定存在路径 $e(u,a_0),e(a_0,a_1),\\cdots,e(a_k,v)$。给定平面上的 $n$ 个点，问最早什么时刻它们形成一个连通块。\n", "inputFormat": "第一行一个数 $n$，以下 $n$ 行，每行一个点坐标。", "outputFormat": "一个数，表示最早的时刻所有点形成连通块。\n", "hint": "### 数据范围及约定\n\n对于 $20\\%$ 的数据，满足 $1 \\le N \\le 5;1 \\le X_i,Y_i \\le 50$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 50$，$1 \\le X_i,Y_i \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Diffusion", "background": "", "description": "Each point expands by a distance of 1 in the four cardinal directions every unit of time, as shown in the figure.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cd4e53lw.png)\n\nTwo points $a$ and $b$ are connected, denoted $e(a,b)$, if and only if the expansion regions of $a$ and $b$ have a nonempty intersection. A connected component is defined so that for any two points $u$ and $v$ within the component, there exists a path $e(u,a_0), e(a_0,a_1), \\cdots, e(a_k,v)$. Given $n$ points on the plane, find the earliest time when they form a single connected component.", "inputFormat": "The first line contains an integer $n$. Each of the next $n$ lines contains two integers $X_i$ and $Y_i$, the coordinates of a point.", "outputFormat": "Output a single number, representing the earliest time when all points form a single connected component.", "hint": "Constraints\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 5$, $1 \\le X_i, Y_i \\le 50$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 50$, $1 \\le X_i, Y_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "扩散", "background": "", "description": "一个点每过一个单位时间就会向四个方向扩散一个距离，如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cd4e53lw.png)\n\n两个点 $a$ 、 $b$ 连通，记作 $e(a,b)$，当且仅当 $a,b$ 的扩散区域有公共部分。连通块的定义是块内的任意两个点 $u,v$ 都必定存在路径 $e(u,a_0),e(a_0,a_1),\\cdots,e(a_k,v)$。给定平面上的 $n$ 个点，问最早什么时刻它们形成一个连通块。\n", "inputFormat": "第一行一个数 $n$，以下 $n$ 行，每行一个点坐标。", "outputFormat": "一个数，表示最早的时刻所有点形成连通块。\n", "hint": "### 数据范围及约定\n\n对于 $20\\%$ 的数据，满足 $1 \\le N \\le 5;1 \\le X_i,Y_i \\le 50$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 50$，$1 \\le X_i,Y_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1662", "type": "P", "difficulty": 5, "samples": [["1000", "1311"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "数7", "background": "", "description": "$1337$ 个人排成一个圈，从 $1$ 号人开始报数，初始方向是 $1,2,3\\dots$。如果某个人报的数是 $7$ 的倍数或数字中含有 $7$，那么报数的方向就反一下。问报数字 $X$ 的是第几号人？\n\n**比如初始 $20$ 个数字的情况是：**\n\n| 数字 $X$ | 报的人的编号 |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $4$ |\n| $5$ | $5$ |\n| $6$ | $6$ |\n| $7$ | $7$ |\n| $8$ | $6$ |\n| $9$ | $5$ |\n| $10$ | $4$ |\n| $11$ | $3$ |\n| $12$ | $2$ |\n| $13$ | $1$ |\n| $14$ | $1337$ |\n| $15$ | $1$ |\n| $16$ | $2$ |\n| $17$ | $3$ |\n| $18$ | $2$ |\n| $19$ | $1$ |\n| $20$ | $1337$ |\n", "inputFormat": "一行一个整数 $X$。", "outputFormat": "一行一个整数，表示最终报数字 $X$ 的是第几号人。", "hint": "**【数据规模与约定】**\n\n对于 $30\\%$ 的数据，满足 $X\\leq10^6$；\n\n对于 $90\\%$ 的数据，满足 $X\\leq10^8$；\n\n对于 $100\\%$ 的数据，满足 $X\\leq10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Counting 7", "background": "", "description": "There are $1337$ people standing in a circle. Starting from person $1$, they count numbers; the initial direction is $1,2,3\\dots$. If the number someone says is a multiple of $7$ or contains the digit $7$, then the counting direction flips. Which numbered person says number $X$?\n\n**For example, for the first $20$ numbers:**\n\n| Number $X$ | Index of the person who says it |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $4$ |\n| $5$ | $5$ |\n| $6$ | $6$ |\n| $7$ | $7$ |\n| $8$ | $6$ |\n| $9$ | $5$ |\n| $10$ | $4$ |\n| $11$ | $3$ |\n| $12$ | $2$ |\n| $13$ | $1$ |\n| $14$ | $1337$ |\n| $15$ | $1$ |\n| $16$ | $2$ |\n| $17$ | $3$ |\n| $18$ | $2$ |\n| $19$ | $1$ |\n| $20$ | $1337$ |", "inputFormat": "One line containing an integer $X$.", "outputFormat": "One line containing an integer, the index of the person who says number $X$.", "hint": "**Constraints**\n\nFor $30\\%$ of the testdata, $X\\leq10^6$.\n\nFor $90\\%$ of the testdata, $X\\leq10^8$.\n\nFor $100\\%$ of the testdata, $X\\leq10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数7", "background": "", "description": "$1337$ 个人排成一个圈，从 $1$ 号人开始报数，初始方向是 $1,2,3\\dots$。如果某个人报的数是 $7$ 的倍数或数字中含有 $7$，那么报数的方向就反一下。问报数字 $X$ 的是第几号人？\n\n**比如初始 $20$ 个数字的情况是：**\n\n| 数字 $X$ | 报的人的编号 |\n| :----------: | :----------: |\n| $1$ | $1$ |\n| $2$ | $2$ |\n| $3$ | $3$ |\n| $4$ | $4$ |\n| $5$ | $5$ |\n| $6$ | $6$ |\n| $7$ | $7$ |\n| $8$ | $6$ |\n| $9$ | $5$ |\n| $10$ | $4$ |\n| $11$ | $3$ |\n| $12$ | $2$ |\n| $13$ | $1$ |\n| $14$ | $1337$ |\n| $15$ | $1$ |\n| $16$ | $2$ |\n| $17$ | $3$ |\n| $18$ | $2$ |\n| $19$ | $1$ |\n| $20$ | $1337$ |\n", "inputFormat": "一行一个整数 $X$。", "outputFormat": "一行一个整数，表示最终报数字 $X$ 的是第几号人。", "hint": "**【数据规模与约定】**\n\n对于 $30\\%$ 的数据，满足 $X\\leq10^6$；\n\n对于 $90\\%$ 的数据，满足 $X\\leq10^8$；\n\n对于 $100\\%$ 的数据，满足 $X\\leq10^9$。", "locale": "zh-CN"}}}
{"pid": "P1663", "type": "P", "difficulty": 5, "samples": [["6\n0 0\n10 0\n11 1\n15 1\n16 0\n25 0", "3.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分", "三分", "Special Judge"], "title": "山", "background": "", "description": "给出一座山，如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9goc0bar.png)\n\n现在要在山上的某个部位装一盏灯，使得这座山的任何一个部位都能够被看到。\n\n\n给出最小的 $y$ 坐标，如图的 `+` 号处就是 $y$ 坐标最小的安装灯的地方。\n", "inputFormat": "第一行一个数 $N$，表示这座山由 $N$ 个点构成；\n\n接下来 $N$ 行从左到右给出了这座山的构造情况，每行两个数 $X_i, Y_i$，表示一个折点，保证 $X_i > X_{i-1}$。\n", "outputFormat": "仅输出一行，为最小的 $y$ 坐标，当你的答案与标准答案相差不超过 $0.01$ 时，则被认为是正确的。\n", "hint": "数据规模：\n\n$30 \\%$ 的数据，$1 \\le N \\le 50$；\n\n\n$100 \\%$ 的数据，$1 \\le N \\le 5000$；$0 \\le X_i, Y_i \\le 100000$，保证答案不超过 $1000000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Mountain", "background": "", "description": "Given a mountain as shown in the figure.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9goc0bar.png)\n\nYou need to place a lamp somewhere on the mountain so that every part of the mountain is visible.\n\nOutput the minimum $y$-coordinate. As shown, the `+` mark indicates the installation point with the minimum $y$-coordinate.", "inputFormat": "The first line contains an integer $N$, indicating that the mountain consists of $N$ points.\n\nThe next $N$ lines, from left to right, describe the mountain. Each line contains two numbers $X_i, Y_i$ representing a vertex, and it is guaranteed that $X_i > X_{i-1}$.", "outputFormat": "Output a single line with the minimum $y$-coordinate. Your answer is considered correct if it differs from the standard answer by no more than $0.01$.", "hint": "Constraints:\n\n$30 \\%$ of the testdata, $1 \\le N \\le 50$.\n\n$100 \\%$ of the testdata, $1 \\le N \\le 5000$; $0 \\le X_i, Y_i \\le 100000$, and the answer is guaranteed to be no more than $1000000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "山", "background": "", "description": "给出一座山，如图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9goc0bar.png)\n\n现在要在山上的某个部位装一盏灯，使得这座山的任何一个部位都能够被看到。\n\n\n给出最小的 $y$ 坐标，如图的 `+` 号处就是 $y$ 坐标最小的安装灯的地方。\n", "inputFormat": "第一行一个数 $N$，表示这座山由 $N$ 个点构成；\n\n接下来 $N$ 行从左到右给出了这座山的构造情况，每行两个数 $X_i, Y_i$，表示一个折点，保证 $X_i > X_{i-1}$。\n", "outputFormat": "仅输出一行，为最小的 $y$ 坐标，当你的答案与标准答案相差不超过 $0.01$ 时，则被认为是正确的。\n", "hint": "数据规模：\n\n$30 \\%$ 的数据，$1 \\le N \\le 50$；\n\n\n$100 \\%$ 的数据，$1 \\le N \\le 5000$；$0 \\le X_i, Y_i \\le 100000$，保证答案不超过 $1000000$。\n", "locale": "zh-CN"}}}
{"pid": "P1664", "type": "P", "difficulty": 2, "samples": [["12\n1\n1\n1\n1\n1\n0\n0\n0\n1\n0\n1\n1", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创", "洛谷比赛"], "title": "每日打卡心情好", "background": "在洛谷中，打卡不只是一个简单的鼠标点击动作，通过每天在洛谷打卡，可以清晰地记录下自己在洛谷学习的足迹。通过每天打卡，来不断地暗示自己：我又在洛谷学习了一天，进而帮助自己培养恒心、耐心、细心。此外，通过打卡，还可以获取经验值奖励，经验值的多少在一定程度上反映了你在洛谷的资历和成就。通过打卡累积活跃值，渐渐升级，会让你感觉“离神犇越来越近了”。", "description": "洛谷的打卡系统与其他网站的打卡系统一样，连续打卡天数越多，每次打卡获得的奖励也就越多，同时连续天数加上一天。然而，于其他网站只要一天不打卡，连续天数就要清零。与其他网站不同的是，洛谷的打卡更具有人性化，如果多天不打卡，连续天数仅仅只是减少，当遗漏天数越少，减少的天数也就越少。规则是减少 $2^{n-1}$ 天，$n$ 为连续遗漏天数。连续天数在下一次打卡时清算，打卡连续天数不会小于 $0$。也就是说，如果每隔一天打卡，那么连续天数就不会变了。\n\n当连续天数达到以下天数时，给予不同的活跃值奖励：\n\n$1$ 天：奖励 $1$（千里之行，始于足下）\n\n$3$ 天：奖励 $2$（坚持 $3$ 天了，加油！）\n\n$7$ 天：奖励 $3$（曜日轮回）\n\n$30$ 天：奖励 $4$（月圆月缺，习惯养成）\n\n$120$ 天：奖励 $5$（坚持四个月了！）\n\n$365$ 天：奖励 $6$（一年四季都坚持下来了！真不容易！）\n\n小 a $N$ 天前在洛谷注册了一个账号，虽然当时立志每天都要打卡，但发现这不太容易做到。现在知道他 $N$ 天的的打卡记录，小 a 希望得知他通过打卡，在 $N$ 天能获得多少活跃值？", "inputFormat": "第 $1$ 行一个整数 $N$。\n\n接下来 $N$ 行，每行一个整数 $1$ 或 $0$，代表当天是否打过卡。", "outputFormat": "一个整数，表示获得的活跃值！", "hint": "第 $1$ 天：$1$ // 开始打卡！获得 $1$ 点经验，共 $1$ 点，连续 $1$ 天。\n\n第 $2$ 天：$1$ // 获得 $1$ 点经验，共 $2$ 点，连续 $2$ 天。\n\n第 $3$ 天：$1$ // 获得 $2$ 点经验，共 $4$ 点，连续 $3$ 天。\n\n第 $4$ 天：$1$ // 获得 $2$ 点经验，共 $6$ 点，连续 $4$ 天\n\n第 $5$ 天：$1$ // 获得 $2$ 点经验，共 $8$ 点，连续 $5$ 天\n\n第 $6$ 天：$0$ // 由于要去趟火星，没有网络不得已而断签\n\n第 $7$ 天：$0$\n\n第 $8$ 天：$0$\n\n第 $9$ 天：$1$ // 我回来了，可惜连续天数变成 $5-4=1$ 天了 TQT…… 获得 $1$ 点经验，共 $9$ 点，连续 $2$ 天\n\n第 $10$ 天：$0$ // 啊，事情太多给忘了\n\n第 $11$ 天：$1$ // 连续天数变成 $2-1=1$ 天。获得 $1$ 点经验，共 $10$ 点，连续 $2$ 天。\n\n第 $12$ 天：$1$ // 获得 $2$ 点经验，共 $12$ 点，连续 $3$ 天。\n\n小 a：弄个自动打卡机，怎么样？\n\nkkksc03：这不符合洛谷的规则的！\n\n$1\\leq N\\leq 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Feel Good With Daily Check-in", "background": "On Luogu, checking in is not just a simple mouse click. By checking in every day on Luogu, you can clearly record your learning footprint on Luogu. By checking in daily, you keep reminding yourself: I studied on Luogu for another day, which helps cultivate perseverance, patience, and carefulness. In addition, by checking in, you can gain experience points as rewards; the amount of experience points reflects your seniority and achievements on Luogu to some extent. By accumulating activity points from check-ins and leveling up gradually, you will feel “closer and closer to the gods.”", "description": "Luogu’s check-in system is similar to other websites: the more consecutive days you check in, the more rewards you get each time, and the consecutive days increase by one. However, on other websites, if you miss a day, your consecutive days reset to zero. Unlike other websites, Luogu is more user-friendly: if you miss multiple days, your consecutive days only decrease, and the fewer the missed days, the fewer days are deducted. The rule is to reduce by $2^{n-1}$ days, where $n$ is the number of consecutively missed days. The streak is settled at the next check-in, and the streak will not go below $0$. In other words, if you check in every other day, the streak will remain unchanged.\n\nWhen the streak reaches the following lengths, different activity point rewards are given:\n\n$1$ day: reward $1$ (A journey of a thousand miles begins with a single step).\n\n$3$ days: reward $2$ (You’ve kept it up for $3$ days, keep going!).\n\n$7$ days: reward $3$ (The weekly cycle).\n\n$30$ days: reward $4$ (From full moon to crescent, habits are formed).\n\n$120$ days: reward $5$ (You’ve persisted for four months!).\n\n$365$ days: reward $6$ (You kept it up for all four seasons! Not easy!).\n\nXiao A registered a Luogu account $N$ days ago. Although he vowed to check in every day, he found it hard to keep. Now that we know his check-in record for $N$ days, Xiao A wants to know how many activity points he can obtain from check-ins in $N$ days.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain an integer $1$ or $0$, indicating whether he checked in on that day.", "outputFormat": "Output a single integer, the total activity points obtained.", "hint": "Day $1$: $1$ // Start checking in! Gain $1$ activity point, total $1$, streak $1$ day.\n\nDay $2$: $1$ // Gain $1$ activity point, total $2$, streak $2$ days.\n\nDay $3$: $1$ // Gain $2$ activity points, total $4$, streak $3$ days.\n\nDay $4$: $1$ // Gain $2$ activity points, total $6$, streak $4$ days.\n\nDay $5$: $1$ // Gain $2$ activity points, total $8$, streak $5$ days.\n\nDay $6$: $0$ // Going to Mars, no internet, had to miss a check-in.\n\nDay $7$: $0$.\n\nDay $8$: $0$.\n\nDay $9$: $1$ // I’m back, but unfortunately the streak became $5-4=1$ day... TQT... Gain $1$ activity point, total $9$, streak $2$ days.\n\nDay $10$: $0$ // Ah, too many things to do, forgot it.\n\nDay $11$: $1$ // Streak became $2-1=1$ day. Gain $1$ activity point, total $10$, streak $2$ days.\n\nDay $12$: $1$ // Gain $2$ activity points, total $12$, streak $3$ days.\n\nXiao A: How about making an automatic check-in machine?\n\nkkksc03: That does not comply with Luogu’s rules!\n\nConstraints: $1 \\leq N \\leq 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "每日打卡心情好", "background": "在洛谷中，打卡不只是一个简单的鼠标点击动作，通过每天在洛谷打卡，可以清晰地记录下自己在洛谷学习的足迹。通过每天打卡，来不断地暗示自己：我又在洛谷学习了一天，进而帮助自己培养恒心、耐心、细心。此外，通过打卡，还可以获取经验值奖励，经验值的多少在一定程度上反映了你在洛谷的资历和成就。通过打卡累积活跃值，渐渐升级，会让你感觉“离神犇越来越近了”。", "description": "洛谷的打卡系统与其他网站的打卡系统一样，连续打卡天数越多，每次打卡获得的奖励也就越多，同时连续天数加上一天。然而，于其他网站只要一天不打卡，连续天数就要清零。与其他网站不同的是，洛谷的打卡更具有人性化，如果多天不打卡，连续天数仅仅只是减少，当遗漏天数越少，减少的天数也就越少。规则是减少 $2^{n-1}$ 天，$n$ 为连续遗漏天数。连续天数在下一次打卡时清算，打卡连续天数不会小于 $0$。也就是说，如果每隔一天打卡，那么连续天数就不会变了。\n\n当连续天数达到以下天数时，给予不同的活跃值奖励：\n\n$1$ 天：奖励 $1$（千里之行，始于足下）\n\n$3$ 天：奖励 $2$（坚持 $3$ 天了，加油！）\n\n$7$ 天：奖励 $3$（曜日轮回）\n\n$30$ 天：奖励 $4$（月圆月缺，习惯养成）\n\n$120$ 天：奖励 $5$（坚持四个月了！）\n\n$365$ 天：奖励 $6$（一年四季都坚持下来了！真不容易！）\n\n小 a $N$ 天前在洛谷注册了一个账号，虽然当时立志每天都要打卡，但发现这不太容易做到。现在知道他 $N$ 天的的打卡记录，小 a 希望得知他通过打卡，在 $N$ 天能获得多少活跃值？", "inputFormat": "第 $1$ 行一个整数 $N$。\n\n接下来 $N$ 行，每行一个整数 $1$ 或 $0$，代表当天是否打过卡。", "outputFormat": "一个整数，表示获得的活跃值！", "hint": "第 $1$ 天：$1$ // 开始打卡！获得 $1$ 点经验，共 $1$ 点，连续 $1$ 天。\n\n第 $2$ 天：$1$ // 获得 $1$ 点经验，共 $2$ 点，连续 $2$ 天。\n\n第 $3$ 天：$1$ // 获得 $2$ 点经验，共 $4$ 点，连续 $3$ 天。\n\n第 $4$ 天：$1$ // 获得 $2$ 点经验，共 $6$ 点，连续 $4$ 天\n\n第 $5$ 天：$1$ // 获得 $2$ 点经验，共 $8$ 点，连续 $5$ 天\n\n第 $6$ 天：$0$ // 由于要去趟火星，没有网络不得已而断签\n\n第 $7$ 天：$0$\n\n第 $8$ 天：$0$\n\n第 $9$ 天：$1$ // 我回来了，可惜连续天数变成 $5-4=1$ 天了 TQT…… 获得 $1$ 点经验，共 $9$ 点，连续 $2$ 天\n\n第 $10$ 天：$0$ // 啊，事情太多给忘了\n\n第 $11$ 天：$1$ // 连续天数变成 $2-1=1$ 天。获得 $1$ 点经验，共 $10$ 点，连续 $2$ 天。\n\n第 $12$ 天：$1$ // 获得 $2$ 点经验，共 $12$ 点，连续 $3$ 天。\n\n小 a：弄个自动打卡机，怎么样？\n\nkkksc03：这不符合洛谷的规则的！\n\n$1\\leq N\\leq 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1665", "type": "P", "difficulty": 3, "samples": [["7\r\n0 0\r\n0 1\r\n1 0\r\n1 1\r\n1 2\r\n2 1\r\n2 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "正方形计数", "background": "", "description": "给定平面上 $N$ 个点，你需要计算以其中 $4$ 个点为顶点的正方形的个数。注意这里的正方形边不一定需要和坐标轴平行。\n", "inputFormat": "第一行一个数 $N$。\n\n接下来 $N$ 行每行两个数，表示点的坐标。\n", "outputFormat": "一个数表示正方形的个数。\n", "hint": "对于 $20\\%$ 的数据，满足 $1\\leq N\\leq 20$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 500$，$-50\\leq X_i, Y_i\\leq 50$，点不会重合。", "locale": "zh-CN", "translations": {"en": {"title": "Square Counting", "background": "", "description": "Given $N$ points on a plane, you need to count the number of squares whose vertices are among these points. Note that the square’s sides do not need to be parallel to the coordinate axes.", "inputFormat": "The first line contains an integer $N$.\n\nEach of the next $N$ lines contains two numbers, representing the coordinates of a point.", "outputFormat": "Output a single number, the number of squares.", "hint": "For $20\\%$ of the testdata, $1 \\leq N \\leq 20$.\n\nFor $100\\%$ of the testdata, $1 \\leq N \\leq 500$, $-50 \\leq X_i, Y_i \\leq 50$, and the points are distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "正方形计数", "background": "", "description": "给定平面上 $N$ 个点，你需要计算以其中 $4$ 个点为顶点的正方形的个数。注意这里的正方形边不一定需要和坐标轴平行。\n", "inputFormat": "第一行一个数 $N$。\n\n接下来 $N$ 行每行两个数，表示点的坐标。\n", "outputFormat": "一个数表示正方形的个数。\n", "hint": "对于 $20\\%$ 的数据，满足 $1\\leq N\\leq 20$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 500$，$-50\\leq X_i, Y_i\\leq 50$，点不会重合。", "locale": "zh-CN"}}}
{"pid": "P1666", "type": "P", "difficulty": 5, "samples": [["3\r\nhello\r\nhell\r\nhi", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索"], "title": "前缀单词", "background": "", "description": "一组单词是安全的，当且仅当不存在一个单词是另一个单词的前缀，这样才能保证数据不容易被误解。现在你手上有一个单词集合 $S$，你需要计算有多少个子集是安全的。\n\n注意空集永远是安全的。", "inputFormat": "第一行一个数 $n$，表示集合的大小，以下 $n$ 行。每行一个由 $\\verb!a!\\cdots\\verb!z!$ 构成的字符串。", "outputFormat": "安全子集的个数。\n", "hint": "### 数据范围及约定\n\n- 对 $30\\%$ 的数据，满足 $1 \\le n \\le 10$。\n- 对于 $100\\%$ 的数据，满足 $1 \\le n \\le 50$，字符串长度 $ \\le 50$，没有两个字符串是完全相同的。", "locale": "zh-CN", "translations": {"en": {"title": "Prefix Words", "background": "", "description": "A set of words is safe if and only if no word is a prefix of another word; this ensures that the data is not easily misunderstood. Now you have a word set $S$, and you need to count how many of its subsets are safe.\n\nNote that the empty set is always safe.", "inputFormat": "The first line contains an integer $n$, the size of the set. Then $n$ lines follow. Each line contains a string consisting of \\verb!a!\\cdots\\verb!z!.", "outputFormat": "The number of safe subsets.", "hint": "### Constraints and Conventions\n\n- For $30\\%$ of the testdata, it holds that $1 \\le n \\le 10$.\n- For $100\\%$ of the testdata, it holds that $1 \\le n \\le 50$, string length $\\le 50$, and no two strings are exactly the same.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "前缀单词", "background": "", "description": "一组单词是安全的，当且仅当不存在一个单词是另一个单词的前缀，这样才能保证数据不容易被误解。现在你手上有一个单词集合 $S$，你需要计算有多少个子集是安全的。\n\n注意空集永远是安全的。", "inputFormat": "第一行一个数 $n$，表示集合的大小，以下 $n$ 行。每行一个由 $\\verb!a!\\cdots\\verb!z!$ 构成的字符串。", "outputFormat": "安全子集的个数。\n", "hint": "### 数据范围及约定\n\n- 对 $30\\%$ 的数据，满足 $1 \\le n \\le 10$。\n- 对于 $100\\%$ 的数据，满足 $1 \\le n \\le 50$，字符串长度 $ \\le 50$，没有两个字符串是完全相同的。", "locale": "zh-CN"}}}
{"pid": "P1667", "type": "P", "difficulty": 5, "samples": [["5\r\n13\r\n-3 \r\n-4\r\n-5\r\n62", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["离散化"], "title": "数列", "background": "", "description": "给定一个长度是 $n$ 的数列 $A$ ，我们称一个数列是完美的，当且仅当对于其任意子段的和都是正的。\n\n现在你有一个操作可以改变数列，选择一个区间 $[l,r]$ 满足 $\\sum\\limits_{i = l}^r A_i < 0$ ,其中 $1 < l \\le r < n$。\n\n令 $S = \\sum\\limits_{i = l}^r A_i$ ，对于 $A_{l - 1}$ 和 $A_{r + 1}$ 分别加上 $S$，$A_l$ 和 $A_r$ 分别减去 $S$（如果 $l = r$ 就减两次）。问最少几次这样的操作使得最终数列是完美的。", "inputFormat": "第 $1$ 行一个数 $n$ ，以下 $n$ 个数。\n\n第 $2$ 行至第 $n + 1$ 行，第 $i$ 行一个数 $A_i$。", "outputFormat": "一个数表示最少的操作次数，如果无解输出 $-1$。", "hint": "### 样例解释\n\n首先选择区间 $[2,4]$，之后数列变成 $1,9,-4,7,50$，然后选择 $[3,3]$，数列变成 $1,5,4,3,50$\n\n### 限制与约定\n\n对于 $20\\%$ 的数据，满足 $1 \\le N \\le 5$ ;\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 10^5$ ;  $1 \\le |A_i| < 2^{31}$", "locale": "zh-CN", "translations": {"en": {"title": "Sequence", "background": "", "description": "Given a sequence $A$ of length $n$, we call a sequence \"perfect\" if and only if the sum of any of its subarrays is positive.\n\nYou have an operation that can modify the sequence: choose an interval $[l,r]$ satisfying $\\sum\\limits_{i = l}^r A_i < 0$, where $1 < l \\le r < n$.\n\nLet $S = \\sum\\limits_{i = l}^r A_i$. Add $S$ to $A_{l - 1}$ and $A_{r + 1}$, and subtract $S$ from $A_l$ and $A_r$ (if $l = r$, subtract twice). Find the minimum number of such operations needed to make the sequence perfect.", "inputFormat": "The first line contains an integer $n$.\n\nLines $2$ through $n + 1$: the $i$-th line contains an integer $A_i$.", "outputFormat": "Output a single integer: the minimum number of operations. If there is no solution, output $-1$.", "hint": "Sample explanation:\n\nFirst choose the interval $[2,4]$, then the sequence becomes $1,9,-4,7,50$. Then choose $[3,3]$, the sequence becomes $1,5,4,3,50$.\n\nConstraints:\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 5$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$; $1 \\le |A_i| < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列", "background": "", "description": "给定一个长度是 $n$ 的数列 $A$ ，我们称一个数列是完美的，当且仅当对于其任意子段的和都是正的。\n\n现在你有一个操作可以改变数列，选择一个区间 $[l,r]$ 满足 $\\sum\\limits_{i = l}^r A_i < 0$ ,其中 $1 < l \\le r < n$。\n\n令 $S = \\sum\\limits_{i = l}^r A_i$ ，对于 $A_{l - 1}$ 和 $A_{r + 1}$ 分别加上 $S$，$A_l$ 和 $A_r$ 分别减去 $S$（如果 $l = r$ 就减两次）。问最少几次这样的操作使得最终数列是完美的。", "inputFormat": "第 $1$ 行一个数 $n$ ，以下 $n$ 个数。\n\n第 $2$ 行至第 $n + 1$ 行，第 $i$ 行一个数 $A_i$。", "outputFormat": "一个数表示最少的操作次数，如果无解输出 $-1$。", "hint": "### 样例解释\n\n首先选择区间 $[2,4]$，之后数列变成 $1,9,-4,7,50$，然后选择 $[3,3]$，数列变成 $1,5,4,3,50$\n\n### 限制与约定\n\n对于 $20\\%$ 的数据，满足 $1 \\le N \\le 5$ ;\n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 10^5$ ;  $1 \\le |A_i| < 2^{31}$", "locale": "zh-CN"}}}
{"pid": "P1668", "type": "P", "difficulty": 4, "samples": [["3 10\n1 7\n3 6\n6 10", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "贪心", "2004", "线段树", "USACO", "最短路", "ST 表"], "title": "[USACO04DEC] Cleaning Shifts S", "background": null, "description": "一天有 $T(1\\le T\\le 10^6)$ 个时段。约翰正打算安排他的 $N(1\\le N\\le 2.5\\times 10^4)$ 只奶牛来值班，打扫打扫牛棚卫生。每只奶牛都有自己的空闲时间段 $ [S_i,E_i](1\\le S_i\\le E_i\\le T)$，只能把空闲的奶牛安排出来值班。而且，每个时间段必须有奶牛在值班。\n\n那么，最少需要动用多少奶牛参与值班呢？如果没有办法安排出合理的方案，就输出 $-1$。", "inputFormat": "第 $1$ 行：$N$，$T$。\n\n第 $2$ 到 $N+1$ 行：$S_i$，$E_i$。", "outputFormat": "一行，输出最少安排的奶牛数。", "hint": "$1\\le T\\le 10^6$，$N\\le 2.5\\times 10^4$，$1\\le S_i\\le E_i\\le T$。\n\n$\\text{Update On 2023/08/08}$：添加了一组hack数据，详情见[这里](https://www.luogu.com.cn/discuss/613052)。叉掉了时间复杂度为 $\\mathcal O(nt)$ 的错解。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04DEC] Cleaning Shifts S", "background": "", "description": "There are $T(1\\le T\\le 10^6)$ time slots in a day. John plans to schedule his $N(1\\le N\\le 2.5\\times 10^4)$ cows to be on duty to clean the barn. Each cow has her own available interval $ [S_i,E_i](1\\le S_i\\le E_i\\le T)$ and only cows who are free can be scheduled. Moreover, every time slot must have a cow on duty.\n\nWhat is the minimum number of cows required to cover all time slots? If it is impossible to make a valid schedule, output $-1$.", "inputFormat": "The first line: $N$, $T$.\n\nLines $2$ to $N+1$: $S_i$, $E_i$.", "outputFormat": "One line, output the minimum number of cows.", "hint": "$1\\le T\\le 10^6$，$N\\le 2.5\\times 10^4$，$1\\le S_i\\le E_i\\le T$。\n\n$\\text{Update On 2023/08/08}$：Added a set of hack testdata, see details [here](https://www.luogu.com.cn/discuss/613052). Ruled out wrong solutions with time complexity $\\mathcal O(nt)$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04DEC] Cleaning Shifts S", "background": null, "description": "一天有 $T(1\\le T\\le 10^6)$ 个时段。约翰正打算安排他的 $N(1\\le N\\le 2.5\\times 10^4)$ 只奶牛来值班，打扫打扫牛棚卫生。每只奶牛都有自己的空闲时间段 $ [S_i,E_i](1\\le S_i\\le E_i\\le T)$，只能把空闲的奶牛安排出来值班。而且，每个时间段必须有奶牛在值班。\n\n那么，最少需要动用多少奶牛参与值班呢？如果没有办法安排出合理的方案，就输出 $-1$。", "inputFormat": "第 $1$ 行：$N$，$T$。\n\n第 $2$ 到 $N+1$ 行：$S_i$，$E_i$。", "outputFormat": "一行，输出最少安排的奶牛数。", "hint": "$1\\le T\\le 10^6$，$N\\le 2.5\\times 10^4$，$1\\le S_i\\le E_i\\le T$。\n\n$\\text{Update On 2023/08/08}$：添加了一组hack数据，详情见[这里](https://www.luogu.com.cn/discuss/613052)。叉掉了时间复杂度为 $\\mathcal O(nt)$ 的错解。", "locale": "zh-CN"}}}
{"pid": "P1669", "type": "P", "difficulty": 3, "samples": [["5 8\n1 2 3\n1 3 7\n2 3 10\n2 4 4\n2 5 8\n3 4 6\n3 5 2\n4 5 17", "42"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2004", "USACO", "生成树"], "title": "[USACO04DEC] Bad Cowtractors S", "background": "", "description": "奶牛贝茜被雇去建设 $N(2\\le N\\le 10^3)$ 个牛棚间的互联网。她已经勘探出 $M(1\\le M\\le 2\\times 10^4)$ 条可建的线路，每条线路连接两个牛棚，而且会花费 $C(1\\le C\\le 10^5)$。农夫约翰吝啬得很，他希望建设费用最少甚至他都不想给贝茜工钱。贝茜得知工钱要告吹，决定报复。她打算选择建一些线路，把所有牛棚连接在一起，让约翰花费最大。但是她不能造出环来，这样约翰就会发现。", "inputFormat": "第 $1$ 行：$N$，$M$。\n\n第 $2$ 到 $M+1$ 行：三个整数，表示一条可能线路的两个端点和费用。", "outputFormat": "一行，表示最大的花费。如果不能建成合理的线路，就输出 $-1$。", "hint": "$2\\le N\\le 10^3$，$1\\le M\\le 2\\times 10^4$，$1\\le C\\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04DEC] Bad Cowtractors S", "background": "", "description": "Bessie the cow was hired to build the internet among $N$ ($2 \\le N \\le 10^3$) barns. She has surveyed $M$ ($1 \\le M \\le 2 \\times 10^4$) buildable links; each link connects two barns and costs $C$ ($1 \\le C \\le 10^5$). Farmer John is very stingy; he wants the total cost minimized, and he does not even want to pay Bessie. Learning that her pay will be canceled, Bessie decides to retaliate. She plans to choose some links to connect all barns together, making John pay as much as possible. However, she cannot create cycles; otherwise John would notice.", "inputFormat": "Line $1$: $N$, $M$.\n\nLines $2$ to $M + 1$: three integers, the two endpoints of a possible link and its cost.", "outputFormat": "One line, the maximum possible total cost. If it is impossible to form a valid set of links, output $-1$.", "hint": "Constraints: $2 \\le N \\le 10^3$, $1 \\le M \\le 2 \\times 10^4$, $1 \\le C \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04DEC] Bad Cowtractors S", "background": "", "description": "奶牛贝茜被雇去建设 $N(2\\le N\\le 10^3)$ 个牛棚间的互联网。她已经勘探出 $M(1\\le M\\le 2\\times 10^4)$ 条可建的线路，每条线路连接两个牛棚，而且会花费 $C(1\\le C\\le 10^5)$。农夫约翰吝啬得很，他希望建设费用最少甚至他都不想给贝茜工钱。贝茜得知工钱要告吹，决定报复。她打算选择建一些线路，把所有牛棚连接在一起，让约翰花费最大。但是她不能造出环来，这样约翰就会发现。", "inputFormat": "第 $1$ 行：$N$，$M$。\n\n第 $2$ 到 $M+1$ 行：三个整数，表示一条可能线路的两个端点和费用。", "outputFormat": "一行，表示最大的花费。如果不能建成合理的线路，就输出 $-1$。", "hint": "$2\\le N\\le 10^3$，$1\\le M\\le 2\\times 10^4$，$1\\le C\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1670", "type": "P", "difficulty": 3, "samples": [["10\n1 2\n2 3\n3 4\n4 5\n6 7\n7 8\n8 9\n9 10\n3 8", "3\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2004", "USACO", "深度优先搜索 DFS", "树的重心"], "title": "[USACO04DEC] Tree Cutting S", "background": "", "description": "约翰意识到贝茜建设网络花费了他巨额的经费，就把她解雇了。贝茜很愤怒，打算狠狠报复。她打算破坏刚建成的约翰的网络。约翰的网络是树形的，连接着 $N$ 个牛棚。她打算切断某一个牛棚的电源，使和这个牛棚相连的所有电缆全部中断。之后，就会存在若干子网络。为保证破坏够大，每一个子网的牛棚数不得超过总牛棚数的一半，那哪些牛棚值得破坏呢？", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 到 $N$ 行：每行输入两个整数，表示一条电缆的两个端点。", "outputFormat": "按从小到大的顺序，输出所有值得破坏的牛棚。如果没有一个值得破坏，就输出 `NONE`。", "hint": "$1\\le N\\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO04DEC] Tree Cutting S", "background": "", "description": "John realized that Bessie’s network cost him a lot and fired her. Angry, Bessie plans to take revenge. She wants to damage John’s newly built network. John’s network is a tree connecting $N$ barns. She plans to cut power to one barn, causing all cables incident to that barn to be disconnected. Afterwards, the network will split into several subnetworks. To ensure the damage is large enough, in each subnetwork the number of barns must be no more than half of the total number of barns. Which barns are worth sabotaging?", "inputFormat": "Line $1$: an integer $N$.\n\nLines $2$ to $N$: each line contains two integers, the endpoints of a cable.", "outputFormat": "Output, in increasing order, all barns that are worth sabotaging. If none are worth sabotaging, output `NONE`.", "hint": "$1 \\le N \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO04DEC] Tree Cutting S", "background": "", "description": "约翰意识到贝茜建设网络花费了他巨额的经费，就把她解雇了。贝茜很愤怒，打算狠狠报复。她打算破坏刚建成的约翰的网络。约翰的网络是树形的，连接着 $N$ 个牛棚。她打算切断某一个牛棚的电源，使和这个牛棚相连的所有电缆全部中断。之后，就会存在若干子网络。为保证破坏够大，每一个子网的牛棚数不得超过总牛棚数的一半，那哪些牛棚值得破坏呢？", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 到 $N$ 行：每行输入两个整数，表示一条电缆的两个端点。", "outputFormat": "按从小到大的顺序，输出所有值得破坏的牛棚。如果没有一个值得破坏，就输出 `NONE`。", "hint": "$1\\le N\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1671", "type": "P", "difficulty": 3, "samples": [["HHHHH\nJHJHJ\nHHHHH\nHJHHJ\nHHHHH", "2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2005", "USACO"], "title": "[USACO05FEB] Rigging the Bovine Election S", "background": "", "description": "农场被划分为 $5\\times 5$ 的格子，每个格子中都有一头奶牛，并且只有荷斯坦（标记为 `H`）和杰西（标记为 `J`）两个品种。如果一头奶牛在另一头上下左右四个格子中的任一格里，我们说它们相连。奶牛要大选了。现在杰西奶牛们想选择 $7$ 头相连的奶牛，划成一个竞选区，使得其中它们品种的奶牛比荷斯坦的多。\n\n要求你编写一个程序求出方案总数。\n", "inputFormat": "$5$ 行，表示农场的情况。", "outputFormat": "输出划区方案总数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05FEB] Rigging the Bovine Election S", "background": "", "description": "The farm is divided into a $5\\times 5$ grid, with one cow in each cell, and only two breeds: Holstein (denoted by `H`) and Jersey (denoted by `J`). If one cow is in any of the four cells directly above, below, left, or right of another cow, they are considered connected. The Jersey cows want to form an election district by selecting $7$ connected cows such that the number of Jersey cows in the district is greater than the number of Holsteins.\n\nWrite a program to compute the total number of such districts.", "inputFormat": "$5$ lines describing the farm. Each line is a string of length $5$ consisting only of the characters `H` and `J`.", "outputFormat": "Output the total number of valid districts.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05FEB] Rigging the Bovine Election S", "background": "", "description": "农场被划分为 $5\\times 5$ 的格子，每个格子中都有一头奶牛，并且只有荷斯坦（标记为 `H`）和杰西（标记为 `J`）两个品种。如果一头奶牛在另一头上下左右四个格子中的任一格里，我们说它们相连。奶牛要大选了。现在杰西奶牛们想选择 $7$ 头相连的奶牛，划成一个竞选区，使得其中它们品种的奶牛比荷斯坦的多。\n\n要求你编写一个程序求出方案总数。\n", "inputFormat": "$5$ 行，表示农场的情况。", "outputFormat": "输出划区方案总数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1672", "type": "P", "difficulty": 3, "samples": [["3 14 4 10\n1 9\n5 8\n8 12", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2005", "USACO", "差分"], "title": "[USACO05FEB] Feed Accounting S", "background": "", "description": "约翰想知道上一船饲料是什么时候运到的。在饲料运到之前，他的牛正好把仓库里原来的饲料全吃光了。他收到运来的 $F1(1\\le F1\\le 10^6)$ 千克饲料。遗憾的是，他已经不记得这是哪一天的事情了。到第 $D(1\\le D\\le 2\\times 10^3)$ 天为止，仓库里还剩下 $F2(1\\le F2\\le F1)$ 千克饲料。\n\n约翰养了 $C(1\\le C\\le 100)$ 头牛，每头牛每天都吃掉恰好 $1$ 千克饲料。由于不同的原因，牛们从某一天开始在仓库吃饲料，又在某一天离开仓库，所以不同的两天可能会有差距很大的饲料消耗量。每头牛在来的那天和离开的那天都在仓库吃饲料。给出今天的日期 $D$，写一个程序，判断饲料**最近**一次运到是在什么时候。今天牛们已经吃过饲料了，并且饲料运到的那天牛们还没有吃过饲料。\n\n**如果最终的答案有多个可能，请输出最大的（即，最近的）那一个。**", "inputFormat": "第 $1$ 行：四个整数 $C$，$F1$，$F2$，$D$，用空格隔开。\n\n第 $2$ 到 $C+1$ 行：每行是用空格隔开的两个数字，分别表示一头牛来仓库吃饲料的时间和离开的时间。", "outputFormat": "一个正整数，即上一船饲料运到的时间。", "hint": "### 样例解释\n\n上一次运来了 $14$ 千克饲料，现在饲料还剩下 $4$ 千克。最近 $10$ 天里，有 $3$ 头牛来吃过饲料。\n\n约翰在第 $6$ 天收到 $14$ 千克饲料，当天吃掉 $2$ 千克，第 $7$ 天吃掉 $2$ 千克，第 $8$ 天吃掉 $3$ 千克，第 $9$ 天吃掉 $2$ 千克，第 $10$ 天吃掉 $1$ 千克，正好还剩 $4$ 千克。\n\n### 数据规模\n\n$1\\le F2\\le F1\\le 10^6$，$1\\le D\\le 2\\times 10^3$，$1\\le C\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05FEB] Feed Accounting S", "background": "", "description": "John wants to know when the previous shipment of feed arrived. Before that shipment arrived, his cows had just finished all the feed that was originally in the barn. He received $F1(1\\le F1\\le 10^6)$ kilograms of feed. Unfortunately, he no longer remembers which day that was. By day $D(1\\le D\\le 2\\times 10^3)$, there are still $F2(1\\le F2\\le F1)$ kilograms of feed left in the barn.\n\nJohn has $C(1\\le C\\le 100)$ cows, and each cow eats exactly $1$ kilogram of feed per day. Due to various reasons, each cow starts eating at the barn on some day and leaves on some day, so the feed consumption may vary greatly between different days. Each cow eats on both the day it arrives and the day it leaves. Given today’s day $D$, write a program to determine when the feed was most recently delivered. Today the cows have already eaten, and on the delivery day the cows had not yet eaten.\n\n**If there are multiple possible answers, output the largest one (i.e., the most recent).**", "inputFormat": "Line $1$: Four integers $C$, $F1$, $F2$, $D$, separated by spaces.\n\nLines $2$ to $C+1$: Each line contains two integers separated by spaces, representing the day a cow starts eating at the barn and the day it leaves.", "outputFormat": "A single positive integer: the day when the previous shipment of feed arrived.", "hint": "Sample Explanation\n\nThe previous shipment delivered $14$ kilograms of feed, and there are now $4$ kilograms left. In the last $10$ days, $3$ cows have come to eat.\n\nJohn received $14$ kilograms of feed on day $6$. They ate $2$ kilograms on day $6$, $2$ kilograms on day $7$, $3$ kilograms on day $8$, $2$ kilograms on day $9$, and $1$ kilogram on day $10$, leaving exactly $4$ kilograms.\n\nConstraints\n\n$1\\le F2\\le F1\\le 10^6$, $1\\le D\\le 2\\times 10^3$, $1\\le C\\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05FEB] Feed Accounting S", "background": "", "description": "约翰想知道上一船饲料是什么时候运到的。在饲料运到之前，他的牛正好把仓库里原来的饲料全吃光了。他收到运来的 $F1(1\\le F1\\le 10^6)$ 千克饲料。遗憾的是，他已经不记得这是哪一天的事情了。到第 $D(1\\le D\\le 2\\times 10^3)$ 天为止，仓库里还剩下 $F2(1\\le F2\\le F1)$ 千克饲料。\n\n约翰养了 $C(1\\le C\\le 100)$ 头牛，每头牛每天都吃掉恰好 $1$ 千克饲料。由于不同的原因，牛们从某一天开始在仓库吃饲料，又在某一天离开仓库，所以不同的两天可能会有差距很大的饲料消耗量。每头牛在来的那天和离开的那天都在仓库吃饲料。给出今天的日期 $D$，写一个程序，判断饲料**最近**一次运到是在什么时候。今天牛们已经吃过饲料了，并且饲料运到的那天牛们还没有吃过饲料。\n\n**如果最终的答案有多个可能，请输出最大的（即，最近的）那一个。**", "inputFormat": "第 $1$ 行：四个整数 $C$，$F1$，$F2$，$D$，用空格隔开。\n\n第 $2$ 到 $C+1$ 行：每行是用空格隔开的两个数字，分别表示一头牛来仓库吃饲料的时间和离开的时间。", "outputFormat": "一个正整数，即上一船饲料运到的时间。", "hint": "### 样例解释\n\n上一次运来了 $14$ 千克饲料，现在饲料还剩下 $4$ 千克。最近 $10$ 天里，有 $3$ 头牛来吃过饲料。\n\n约翰在第 $6$ 天收到 $14$ 千克饲料，当天吃掉 $2$ 千克，第 $7$ 天吃掉 $2$ 千克，第 $8$ 天吃掉 $3$ 千克，第 $9$ 天吃掉 $2$ 千克，第 $10$ 天吃掉 $1$ 千克，正好还剩 $4$ 千克。\n\n### 数据规模\n\n$1\\le F2\\le F1\\le 10^6$，$1\\le D\\le 2\\times 10^3$，$1\\le C\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1673", "type": "P", "difficulty": 3, "samples": [["6 5\n1 3\n3 2\n2 3\n3 1\n2 5\n5 4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2005", "USACO", "最短路"], "title": "[USACO05FEB] Part Acquisition S", "background": "", "description": "奶牛们接到了寻找一种新型挤奶机的任务，为此它们准备依次经过 $N(1\\le N\\le 5\\times 10^4)$ 颗行星，在行星上进行交易。为了方便，奶牛们已经给可能出现的 $K(1\\le K\\le 10^3)$ 种货物进行了由 $1$ 到 $K$ 的标号。由于这些行星都不是十分发达。没有流通的货币，所以在每个市场里都只能用固定的一种货物去换取另一种货物。奶牛们带着一种上好的饲料从地球出发，希望在使用的物品的种类数量最少的情况下，最终得到所需要的机器。饲料的标号为 $1$，所需要的机器的标号为 $K$。如果任务无法完成，输出 $-1$。", "inputFormat": "第 $1$ 行是两个数字 $N$ 和 $K$。\n\n第 $2$ 到 $N+1$ 行，每行是两个数字 $A_i$ 和 $B_i$，表示第 $i$ 颗行星为得到 $A_i$ 愿意提供 $B_i$。", "outputFormat": "输出最少经手物品数。", "hint": "奶牛们至少需要 $4$ 种不同标号的物品，先用 $1$ 去交换 $3$，再用 $3$ 去交换 $2$，最后用 $2$ 交换得到 $5$。\n\n$1\\le N\\le 5\\times 10^4$，$1\\le K\\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05FEB] Part Acquisition S", "background": "# Description\n\nThe cows have been tasked with finding a new milking machine. To do so, they plan to pass through $N(1\\le N\\le 5\\times 10^4)$ planets in sequence and trade on them. For convenience, the $K(1\\le K\\le 10^3)$ possible kinds of goods have been labeled from $1$ to $K$. Since these planets are not very developed and there is no circulating currency, in each market you can only exchange one fixed item for another fixed item. The cows depart Earth carrying a premium feed and hope to obtain the required machine while minimizing the number of distinct item types used. The feed is labeled $1$, and the required machine is labeled $K$. If the task cannot be completed, output $-1$.", "description": "", "inputFormat": "", "outputFormat": "Output the minimum number of distinct item types.", "hint": "The cows need at least $4$ different labels: first exchange $1$ for $3$, then $3$ for $2$, and finally $2$ for $5$.\n\n$1\\le N\\le 5\\times 10^4$, $1\\le K\\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05FEB] Part Acquisition S", "background": "", "description": "奶牛们接到了寻找一种新型挤奶机的任务，为此它们准备依次经过 $N(1\\le N\\le 5\\times 10^4)$ 颗行星，在行星上进行交易。为了方便，奶牛们已经给可能出现的 $K(1\\le K\\le 10^3)$ 种货物进行了由 $1$ 到 $K$ 的标号。由于这些行星都不是十分发达。没有流通的货币，所以在每个市场里都只能用固定的一种货物去换取另一种货物。奶牛们带着一种上好的饲料从地球出发，希望在使用的物品的种类数量最少的情况下，最终得到所需要的机器。饲料的标号为 $1$，所需要的机器的标号为 $K$。如果任务无法完成，输出 $-1$。", "inputFormat": "第 $1$ 行是两个数字 $N$ 和 $K$。\n\n第 $2$ 到 $N+1$ 行，每行是两个数字 $A_i$ 和 $B_i$，表示第 $i$ 颗行星为得到 $A_i$ 愿意提供 $B_i$。", "outputFormat": "输出最少经手物品数。", "hint": "奶牛们至少需要 $4$ 种不同标号的物品，先用 $1$ 去交换 $3$，再用 $3$ 去交换 $2$，最后用 $2$ 交换得到 $5$。\n\n$1\\le N\\le 5\\times 10^4$，$1\\le K\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1674", "type": "P", "difficulty": 6, "samples": [["7 9 2\n1 2 2\n2 3 5\n3 7 5\n1 4 1\n4 3 1\n4 5 7\n5 7 1\n1 6 3\n6 7 3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2005", "二分", "USACO", "网络流"], "title": "[USACO05FEB] Secret Milking Machine G", "background": "", "description": "约翰正在制造一台新型的挤奶机，但他不希望别人知道。他希望尽可能久地隐藏这个秘密。他把挤奶机藏在他的农场里，使它不被发现。\n\n在挤奶机制造的过程中，他需要去挤奶机所在的地方 $T$ 次。他的农场里有秘密的地道，但约翰只在返回的时候用它。农场被划分成 $N$ 块区域，用 $1$ 到 $200$ 标号。这些区域被 $P$ 条道路连接，每条路有一个小于 $10^6$ 的长度 $L$。两块区域之间可能有多条道路连接。为了减少被发现的可能，约翰不会两次经过农场上的任何一条道路。当然了，他希望走最短的路。\n\n请帮助约翰寻找这 $T$ 次从仓库走到挤奶机所在地的路线。仓库是区域 $1$，挤奶机所在地是区域 $N$。我们现在要求的是约翰经过的这些道路中最长的路的长度最小是多少，当然他不能重复走某一条路。\n\n请注意，我们要求的不是最短的总路程长度，而是所经过的直接连接两个区域的道路中最长的道路的最小长度。数据保证约翰可以找到 $T$ 条没有重复的从仓库到挤奶机所在区域的路。", "inputFormat": "第 $1$ 行是 $3$ 个整数 $N$、$P$ 和 $T$，用空格隔开。\n\n第 $2$ 到 $P+1$ 行，每行包括 $3$ 个整数，$A_i$，$B_i$，$L_i$。表示区域 $A_i$、$B_i$ 之间有一条长度为 $L_i$ 的道路。", "outputFormat": "输出只有一行，包含一个整数，即约翰经过的这些道路中最长的路的最小长度。", "hint": "选择 $1-2-3-7$ 和 $1-6-7$ 两条路线．这些路线中最长路的最小长度是 $5$。\n\n对于 $100\\%$ 的数据满足：$2\\le N\\le 200$，$1\\le P\\le 4\\times 10^4$，$1\\le T\\le 200$，每条路的长度 $\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05FEB] Secret Milking Machine G", "background": "", "description": "John is building a new milking machine, but he does not want others to know. He wants to keep this secret for as long as possible. He hides the machine somewhere on his farm so it will not be found.\n\nDuring the manufacturing process, he needs to go to the machine’s location $T$ times. His farm has secret tunnels, but John uses them only on the return trip. The farm is divided into $N$ regions, labeled from $1$ to $N$. These regions are connected by $P$ roads, each road has a length $L$ less than $10^6$. There may be multiple roads between two regions. To reduce the chance of being discovered, John will not traverse any road on the farm more than once. Of course, he wants the routes to be as short as possible.\n\nPlease help John find $T$ routes from the warehouse to the milking machine’s location. The warehouse is region $1$, and the milking machine is at region $N$. We ask for the minimal possible value of the length of the longest road among all the roads John will traverse, subject to the condition that no road is reused.\n\nNote that we are not minimizing the total route length. We are minimizing the maximum length among the roads that directly connect two regions (i.e., edges). The testdata guarantees that John can find $T$ routes from the warehouse to region $N$ without reusing any road.", "inputFormat": "The first line contains $3$ integers $N$, $P$, and $T$, separated by spaces.\n\nLines $2$ to $P+1$: each line contains $3$ integers $A_i$, $B_i$, and $L_i$, indicating there is a road between regions $A_i$ and $B_i$ with length $L_i$.", "outputFormat": "Output a single line containing one integer: the minimal possible value of the longest road’s length among those John traverses.", "hint": "Choose routes $1-2-3-7$ and $1-6-7$. The minimal possible value of the longest road among these routes is $5$.\n\nFor $100\\%$ of the testdata: $2 \\le N \\le 200$, $1 \\le P \\le 4 \\times 10^4$, $1 \\le T \\le 200$, and each road length $\\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO05FEB] Secret Milking Machine G", "background": "", "description": "约翰正在制造一台新型的挤奶机，但他不希望别人知道。他希望尽可能久地隐藏这个秘密。他把挤奶机藏在他的农场里，使它不被发现。\n\n在挤奶机制造的过程中，他需要去挤奶机所在的地方 $T$ 次。他的农场里有秘密的地道，但约翰只在返回的时候用它。农场被划分成 $N$ 块区域，用 $1$ 到 $200$ 标号。这些区域被 $P$ 条道路连接，每条路有一个小于 $10^6$ 的长度 $L$。两块区域之间可能有多条道路连接。为了减少被发现的可能，约翰不会两次经过农场上的任何一条道路。当然了，他希望走最短的路。\n\n请帮助约翰寻找这 $T$ 次从仓库走到挤奶机所在地的路线。仓库是区域 $1$，挤奶机所在地是区域 $N$。我们现在要求的是约翰经过的这些道路中最长的路的长度最小是多少，当然他不能重复走某一条路。\n\n请注意，我们要求的不是最短的总路程长度，而是所经过的直接连接两个区域的道路中最长的道路的最小长度。数据保证约翰可以找到 $T$ 条没有重复的从仓库到挤奶机所在区域的路。", "inputFormat": "第 $1$ 行是 $3$ 个整数 $N$、$P$ 和 $T$，用空格隔开。\n\n第 $2$ 到 $P+1$ 行，每行包括 $3$ 个整数，$A_i$，$B_i$，$L_i$。表示区域 $A_i$、$B_i$ 之间有一条长度为 $L_i$ 的道路。", "outputFormat": "输出只有一行，包含一个整数，即约翰经过的这些道路中最长的路的最小长度。", "hint": "选择 $1-2-3-7$ 和 $1-6-7$ 两条路线．这些路线中最长路的最小长度是 $5$。\n\n对于 $100\\%$ 的数据满足：$2\\le N\\le 200$，$1\\le P\\le 4\\times 10^4$，$1\\le T\\le 200$，每条路的长度 $\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P1675", "type": "P", "difficulty": 5, "samples": [["2\n510\n500\n500\n670\n400\n310", "1\n2\n3\n6\n5\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2005", "USACO", "Special Judge", "随机化"], "title": "[USACO05FEB] Jersey Politics G", "background": "", "description": "在 Wisconsin（地名），有 $3 \\times k$ 个城市，依次标号为 $1, 2, \\cdots, 3 \\times k$，每个城市共有 $1000$ 头奶牛。Jersey（人名）在这些城市中各占有 $w _ 1, w _ 2, \\cdots, w _ {3 \\times k}$（$0 \\leq w _ i \\leq 1000$）头奶牛。\n\n你需要将这些城市平分为 $3$ 组。显然，此时每组城市中总共有 $1000 \\times k$ 头奶牛。\n\n你需要保证，在至少两组城市中，Jersey 占有的奶牛总数**严格大于** $1000 \\times k$ 的一半。\n\n数据保证有解，求一种可行的分配方案。\n\n", "inputFormat": "第一行一个整数 $k$。\n\n然后 $3\\times k$ 行，一行一个整数 $w_i$。", "outputFormat": "输出有三组，第 $i$ 组输出 $k$ 行，表示第 $i$ 个区域的城市编号。", "hint": "可能会有多组解，输出任意一组即可。\n\n$1\\le k\\le 60$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO05FEB] Jersey Politics G", "background": "", "description": "In the newest census of Jersey Cows and Holstein Cows, Wisconsincows have earned three stalls in the Barn of Representatives. The Jersey Cows currently control the state's redistricting committee. They want to partition the state into three equally sized voting districts such that the Jersey Cows are guaranteed to win elections in at least two of the districts.\n\nWisconsin has $3K (1 \\leq K \\leq 60)$ cities of $1,000$ cows, numbered $1\\dots 3K$, each with a known number (range: $0\\dots 1,000$) of Jersey Cows. Find a way to partition the state into three districts, each with $K$ cities, such that the Jersey Cows have the majority percentage in at least two of districts.\n\nAll supplied input datasets are solvable.", "inputFormat": "- Line $1$: A single integer, $K$\n- Lines $2\\dots 3K+1$: One integer per line, the number of cows in each city that are Jersey Cows.  Line $i+1$ contains city $i$'s cow census.", "outputFormat": "- Lines $1\\dots K$: $K$ lines that are the city numbers in district one, one per line\n\n- Lines $K+1\\dots 2K$: $K$ lines that are the city numbers in district two,one per line\n\n- Lines $2K+1\\dots 3K$: $K$ lines that are the city numbers in district three, one per line", "hint": "Other solutions might be possible. Note that `2 3` would NOT be a district won by the Jerseys, as they would be exactly half of the cows.", "locale": "en"}, "zh-CN": {"title": "[USACO05FEB] Jersey Politics G", "background": "", "description": "在 Wisconsin（地名），有 $3 \\times k$ 个城市，依次标号为 $1, 2, \\cdots, 3 \\times k$，每个城市共有 $1000$ 头奶牛。Jersey（人名）在这些城市中各占有 $w _ 1, w _ 2, \\cdots, w _ {3 \\times k}$（$0 \\leq w _ i \\leq 1000$）头奶牛。\n\n你需要将这些城市平分为 $3$ 组。显然，此时每组城市中总共有 $1000 \\times k$ 头奶牛。\n\n你需要保证，在至少两组城市中，Jersey 占有的奶牛总数**严格大于** $1000 \\times k$ 的一半。\n\n数据保证有解，求一种可行的分配方案。\n\n", "inputFormat": "第一行一个整数 $k$。\n\n然后 $3\\times k$ 行，一行一个整数 $w_i$。", "outputFormat": "输出有三组，第 $i$ 组输出 $k$ 行，表示第 $i$ 个区域的城市编号。", "hint": "可能会有多组解，输出任意一组即可。\n\n$1\\le k\\le 60$。", "locale": "zh-CN"}}}
{"pid": "P1676", "type": "P", "difficulty": 7, "samples": [["1", "5"], ["2", "13"], ["5", "81"], ["19", "1129"], ["100", "31417"], ["30000", "2827432965"], ["10000000", "314159265350589"], ["500000000", "785398163397389961"], ["16000000000", "804247719318986163169"], ["700000000000", "1539380400258998682200449"]], "limits": {"time": [250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 250, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "2024", "数论", "洛谷原创", "O2优化", "单调栈", "Stern-Brocot 树"], "title": "「CMOI R0」Parallel Universe Shifter / Lattices in Circle", "background": "$$\\text{Answer}=\\pi n^2+\\mathrm O(n^{\\frac{517}{824}}).$$\n\n![](bilibili:BV1RM4m1U7oU)\n\n$\\small\\color{white}/35^{\\text{th}}\\text{Problem by AtC}.$", "description": "求与原点距离不超过 $n(1\\leq n\\leq 10^{12})$ 的整点个数。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个正整数，即答案。注意它可能大于 $2^{64}$。", "hint": "### 样例 $1$ 解释\n\n符合条件的 $5$ 个点是 $(0,0),(1,0),(0,1),(0,-1),(-1,0)$。\n\n### 数据范围\n\n|$\\text{Subtask}$|$\\text{Special Constraints}$|$\\text{Time Limit}$|$\\text{Points}$|\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$1\\leq n\\leq 2\\times 10^3$|$0.25\\text s$|$1$|\n|$2$|$10^4\\leq n\\leq 10^7$|$1\\text s$|$4$|\n|$3$|$10^8\\leq n\\leq 10^9$|$1\\text s$|$10$|\n|$4$|$10^9\\leq n\\leq 10^{10}$|$3\\text s$|$15$|\n|$5$|$10^{10}\\leq n\\leq 10^{11}$|$4\\text s$|$30$|\n|$6$|$10^{11}\\leq n\\leq 10^{12}$|$4\\text s$|$40$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「CMOI R0」Parallel Universe Shifter / Lattices in Circle", "background": "$$\\text{Answer}=\\pi n^2+\\mathrm O(n^{\\frac{517}{824}}).$$\n\n![](bilibili:BV1RM4m1U7oU)\n\n$\\small\\color{white}/35^{\\text{th}}\\text{Problem by AtC}.$", "description": "求与原点距离不超过 $n(1\\leq n\\leq 10^{12})$ 的整点个数。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个正整数，即答案。注意它可能大于 $2^{64}$。", "hint": "### 样例 $1$ 解释\n\n符合条件的 $5$ 个点是 $(0,0),(1,0),(0,1),(0,-1),(-1,0)$。\n\n### 数据范围\n\n|$\\text{Subtask}$|$\\text{Special Constraints}$|$\\text{Time Limit}$|$\\text{Points}$|\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$1\\leq n\\leq 2\\times 10^3$|$0.25\\text s$|$1$|\n|$2$|$10^4\\leq n\\leq 10^7$|$1\\text s$|$4$|\n|$3$|$10^8\\leq n\\leq 10^9$|$1\\text s$|$10$|\n|$4$|$10^9\\leq n\\leq 10^{10}$|$3\\text s$|$15$|\n|$5$|$10^{10}\\leq n\\leq 10^{11}$|$4\\text s$|$30$|\n|$6$|$10^{11}\\leq n\\leq 10^{12}$|$4\\text s$|$40$|", "locale": "zh-CN"}}}
{"pid": "P1677", "type": "P", "difficulty": 2, "samples": [["5\n7 1 3 11 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2018", "USACO", "O2优化", "排序", "深度优先搜索 DFS"], "title": "[USACO18FEB] Hoofball B", "background": null, "description": "为了准备即将到来的蹄球锦标赛，Farmer John 正在训练他的 $N$ 头奶牛（方便起见，编号为 $1\\ldots N$，其中 $1\\le N\\le 100$）进行传球。这些奶牛在牛棚一侧沿直线排列，第 $i$ 号奶牛位于距离牛棚 $x_i$ 的地方（$1\\le x_i\\le 1000$）。每头奶牛都在不同的位置上。\n\n在训练开始的时候，Farmer John 会将若干个球传给不同的奶牛。当第 $i$ 号奶牛接到球时，无论是从 Farmer John 或是从另一头奶牛传来的，她会将球传给最近的奶牛（如果有多头奶牛与她距离相同，她会传给其中 $x_i$ 更小的那头）。为了使所有奶牛都有机会练习到传球，Farmer John 想要确保每头奶牛都持球至少一次。帮助他求出为了达到这一目的他开始时至少要传出的球的数量。假设他在开始的时候能将球传给最适当的一组奶牛。", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个用空格分隔的整数，其中第 $i$ 个整数为 $x_i$。", "outputFormat": "输出 Farmer John 开始的时候最少需要传出的球的数量，使得所有奶牛至少持球一次。", "hint": "在上面的样例中，Farmer John 应该将球传给位于 $x=1$ 的奶牛和位于 $x=11$ 的奶牛。位于 $x=1$ 的奶牛会将她的球传给位于 $x=3$ 的奶牛，在此之后这个球会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。位于 $x=11$ 的奶牛会将她的球传给位于 $x=7$ 的奶牛，然后球会被传给位于 $x=4$ 的奶牛，在此之后这个球也会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。这样的话，所有的奶牛都会至少一次接到球（可能从 Farmer John，也可能从另一头奶牛）。\n\n可以看出，不存在这样一头奶牛，Farmer John 可以将球传给她之后所有奶牛最终都能被传到球。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18FEB] Hoofball B", "background": null, "description": "为了准备即将到来的蹄球锦标赛，Farmer John 正在训练他的 $N$ 头奶牛（方便起见，编号为 $1\\ldots N$，其中 $1\\le N\\le 100$）进行传球。这些奶牛在牛棚一侧沿直线排列，第 $i$ 号奶牛位于距离牛棚 $x_i$ 的地方（$1\\le x_i\\le 1000$）。每头奶牛都在不同的位置上。\n\n在训练开始的时候，Farmer John 会将若干个球传给不同的奶牛。当第 $i$ 号奶牛接到球时，无论是从 Farmer John 或是从另一头奶牛传来的，她会将球传给最近的奶牛（如果有多头奶牛与她距离相同，她会传给其中 $x_i$ 更小的那头）。为了使所有奶牛都有机会练习到传球，Farmer John 想要确保每头奶牛都持球至少一次。帮助他求出为了达到这一目的他开始时至少要传出的球的数量。假设他在开始的时候能将球传给最适当的一组奶牛。", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个用空格分隔的整数，其中第 $i$ 个整数为 $x_i$。", "outputFormat": "输出 Farmer John 开始的时候最少需要传出的球的数量，使得所有奶牛至少持球一次。", "hint": "在上面的样例中，Farmer John 应该将球传给位于 $x=1$ 的奶牛和位于 $x=11$ 的奶牛。位于 $x=1$ 的奶牛会将她的球传给位于 $x=3$ 的奶牛，在此之后这个球会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。位于 $x=11$ 的奶牛会将她的球传给位于 $x=7$ 的奶牛，然后球会被传给位于 $x=4$ 的奶牛，在此之后这个球也会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。这样的话，所有的奶牛都会至少一次接到球（可能从 Farmer John，也可能从另一头奶牛）。\n\n可以看出，不存在这样一头奶牛，Farmer John 可以将球传给她之后所有奶牛最终都能被传到球。", "locale": "zh-CN"}}}
{"pid": "P1678", "type": "P", "difficulty": 2, "samples": [["4 3\n513 598 567 689\n500 600 550\n", "32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "二分", "排序"], "title": "烦恼的高考志愿", "background": "计算机竞赛小组的神牛 V 神终于结束了高考，然而作为班长的他还不能闲下来，班主任老 t 给了他一个艰巨的任务：帮同学找出最合理的大学填报方案。可是 v 神太忙了，身后还有一群小姑娘等着和他约会，于是他想到了同为计算机竞赛小组的你，请你帮他完成这个艰巨的任务。", "description": "现有 $m$ 所学校，每所学校预计分数线是 $a_i$。有 $n$ 位学生，估分分别为 $b_i$。\n\n根据 $n$ 位学生的估分情况，分别给每位学生推荐一所学校，要求学校的预计分数线和学生的估分相差最小（可高可低，毕竟是估分嘛），这个最小值为不满意度。求所有学生不满意度和的最小值。", "inputFormat": "第一行读入两个整数 $m,n$。\n\n第二行共有 $m$ 个数，表示 $m$ 个学校的预计录取分数。\n\n第三行有 $n$ 个数，表示 $n$ 个学生的估分成绩。", "outputFormat": "输出一行，为最小的不满度之和。", "hint": "数据范围：\n\n对于 $30\\%$ 的数据，$1\\leq n,m\\leq10^3$，估分和录取线 $\\leq10^4$；\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq10^5$，估分和录取线 $\\leq 10^6$ 且均为非负整数。", "locale": "zh-CN", "translations": {"en": {"title": "Troubles with Gaokao Choices", "background": "The ace of the computer competition club, V Shen, has finally finished the Gaokao. However, as the class monitor, he still cannot take a break. His homeroom teacher, Lao t, gave him a daunting task: help his classmates find the most reasonable college application plan. But V Shen is too busy, with a group of girls waiting to date him, so he turned to you, a fellow member of the computer competition club, to help complete this task.", "description": "There are $m$ schools, each with an expected cutoff score $a_i$. There are $n$ students, with estimated scores $b_i$.\n\nBased on the estimated scores of the $n$ students, recommend one school to each student such that the difference between the school’s expected cutoff score and the student’s estimated score is minimized (either higher or lower—after all, it’s just an estimate). This minimum difference is called dissatisfaction. Find the minimum possible sum of dissatisfaction over all students.", "inputFormat": "The first line contains two integers $m, n$.\n\nThe second line contains $m$ numbers, representing the expected cutoff scores of the $m$ schools.\n\nThe third line contains $n$ numbers, representing the estimated scores of the $n$ students.", "outputFormat": "Output one line, the minimum sum of dissatisfaction.", "hint": "Constraints:\n\nFor $30\\%$ of the testdata, $1 \\le n, m \\le 10^3$, and the estimated scores and cutoffs are $\\le 10^4$.\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 10^5$, the estimated scores and cutoffs are $\\le 10^6$, and all are non-negative integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "烦恼的高考志愿", "background": "计算机竞赛小组的神牛 V 神终于结束了高考，然而作为班长的他还不能闲下来，班主任老 t 给了他一个艰巨的任务：帮同学找出最合理的大学填报方案。可是 v 神太忙了，身后还有一群小姑娘等着和他约会，于是他想到了同为计算机竞赛小组的你，请你帮他完成这个艰巨的任务。", "description": "现有 $m$ 所学校，每所学校预计分数线是 $a_i$。有 $n$ 位学生，估分分别为 $b_i$。\n\n根据 $n$ 位学生的估分情况，分别给每位学生推荐一所学校，要求学校的预计分数线和学生的估分相差最小（可高可低，毕竟是估分嘛），这个最小值为不满意度。求所有学生不满意度和的最小值。", "inputFormat": "第一行读入两个整数 $m,n$。\n\n第二行共有 $m$ 个数，表示 $m$ 个学校的预计录取分数。\n\n第三行有 $n$ 个数，表示 $n$ 个学生的估分成绩。", "outputFormat": "输出一行，为最小的不满度之和。", "hint": "数据范围：\n\n对于 $30\\%$ 的数据，$1\\leq n,m\\leq10^3$，估分和录取线 $\\leq10^4$；\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq10^5$，估分和录取线 $\\leq 10^6$ 且均为非负整数。", "locale": "zh-CN"}}}
{"pid": "P1679", "type": "P", "difficulty": 2, "samples": [["706", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "动态规划 DP", "搜索", "数学", "背包 DP"], "title": "神奇的四次方数", "background": "在你的帮助下，v 神终于帮同学找到了最合适的大学，接下来就要通知同学了。在班级里负责联络网的是 dm 同学，于是 v 神便找到了 dm 同学，可 dm 同学正在忙于研究一道有趣的数学题，为了请 dm 出山，v 神只好请你帮忙解决这道题了。", "description": "将一个整数 $m$ 分解为 $n$ 个四次方数的和的形式，要求 $n$ 最小。例如，当 $m=706$ 时，因为 $706=5^4+3^4$，所以有 $n=2$。可以证明此时 $n$ 最小。", "inputFormat": "一行，一个整数 $m$。", "outputFormat": "一行，一个整数 $n$。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$m \\le 5000$；\n- 对于 $100\\%$ 的数据，$m \\le 100,000$。", "locale": "zh-CN", "translations": {"en": {"title": "Magical Fourth Power Numbers", "background": "With your help, v 神 (v shen) finally found the most suitable university for a classmate, and now it is time to inform them. The classmate in charge of the contact network in the class is dm, so v 神 went to find dm. However, dm was busy studying an interesting math problem. To invite dm to help, v 神 asked you to solve this problem.", "description": "Decompose an integer $m$ into a sum of $n$ fourth powers, with $n$ being as small as possible. For example, when $m=706$, since $706=5^4+3^4$, we have $n=2$. It can be proven that in this case $n$ is minimal.", "inputFormat": "One line, an integer $m$.", "outputFormat": "One line, an integer $n$.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $m \\le 5000$.\n- For $100\\%$ of the testdata, $m \\le 100{,}000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "神奇的四次方数", "background": "在你的帮助下，v 神终于帮同学找到了最合适的大学，接下来就要通知同学了。在班级里负责联络网的是 dm 同学，于是 v 神便找到了 dm 同学，可 dm 同学正在忙于研究一道有趣的数学题，为了请 dm 出山，v 神只好请你帮忙解决这道题了。", "description": "将一个整数 $m$ 分解为 $n$ 个四次方数的和的形式，要求 $n$ 最小。例如，当 $m=706$ 时，因为 $706=5^4+3^4$，所以有 $n=2$。可以证明此时 $n$ 最小。", "inputFormat": "一行，一个整数 $m$。", "outputFormat": "一行，一个整数 $n$。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$m \\le 5000$；\n- 对于 $100\\%$ 的数据，$m \\le 100,000$。", "locale": "zh-CN"}}}
{"pid": "P1680", "type": "P", "difficulty": 4, "samples": [["10 3\r\n1\r\n2\r\n3\r\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "组合数学", "排列组合"], "title": "奇怪的分组", "background": "终于解出了 dm 同学的难题，dm 同学同意帮 v 神联络。可 dm 同学有个习惯，就是联络同学的时候喜欢分组联络，而且分组的方式也很特别，要求第 $i$ 组的的人数必须大于他指定的个数 $C_i$。在 dm 同学联络的时候，v 神在想，按照 dm 同学的规则一共可以有多少种方案呢？他想啊想，终于……没想出来。于是他又想到了聪明的你，你能帮 v 神算出按照 dm 同学的规则有多少种分组方案吗？", "description": "v 神的班级共有 $N$ 个人，dm 同学想把同学分成 $M$ 组联络，要求第 $i$ 组的人数必须大于给定的正整数 $C_i$，求有多少不同的方案（两个是相同的方案当且仅当对于任意的一队 $i$，两个方案的第 $i$ 组同学数量相等）。由于结果很大，所以你只需要输出模 $10^9+7$ 的值。", "inputFormat": "第一行两个整数 $N$ 和 $M$，后面有 $M$ 行，每行一个整数，表示 $C_i$。", "outputFormat": "仅有一行，一个整数，方案数模 $10^9+7$ 的值。", "hint": "### 样例解释\n\n方案有三种，每组的个数分别是 $(3,3,4)$，$(2,4,4)$，$(2,3,5)$。\n\n### 数据范围约定\n\n对于 $30\\%$ 的数据，$N,M\\le 10$。\n\n对于 $60\\%$ 的数据，$N,M\\le 1000$。\n\n对于 $100\\%$ 的数据，$1\\le N ,M\\le 10^6$，$1\\le C_i\\le 1000$。\n\n数据保证至少有一个方案。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Grouping", "background": "After finally solving classmate dm’s difficult problem, dm agreed to help contact “V-shen”. However, dm has a habit: when contacting classmates, he prefers to contact them in groups, and the grouping method is special — the number of people in the $i$-th group must be greater than a specified number $C_i$. While dm was contacting people, “V-shen” wondered how many grouping plans there could be under dm’s rules. He thought and thought, but still couldn’t figure it out. So he turned to you for help: can you compute how many grouping plans there are according to dm’s rules?", "description": "There are $N$ people in V-shen’s class. dm wants to split them into $M$ groups. The number of people in the $i$-th group must be greater than the given positive integer $C_i$. How many different plans are there? Two plans are considered the same if and only if, for every $i$, the sizes of the $i$-th group are equal in both plans. Since the answer can be large, output it modulo $10^9+7$.", "inputFormat": "The first line contains two integers $N$ and $M$. The next $M$ lines each contain one integer, denoting $C_i$.", "outputFormat": "Output a single line containing one integer — the number of plans modulo $10^9+7$.", "hint": "Sample Explanation:\nThere are three plans, with group sizes $(3, 3, 4)$, $(2, 4, 4)$, and $(2, 3, 5)$.\n\nConstraints:\n- For $30\\%$ of the testdata, $N, M \\le 10$.\n- For $60\\%$ of the testdata, $N, M \\le 1000$.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 10^6$, $1 \\le C_i \\le 1000$.\n\nThe testdata guarantees that there is at least one valid plan.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "奇怪的分组", "background": "终于解出了 dm 同学的难题，dm 同学同意帮 v 神联络。可 dm 同学有个习惯，就是联络同学的时候喜欢分组联络，而且分组的方式也很特别，要求第 $i$ 组的的人数必须大于他指定的个数 $C_i$。在 dm 同学联络的时候，v 神在想，按照 dm 同学的规则一共可以有多少种方案呢？他想啊想，终于……没想出来。于是他又想到了聪明的你，你能帮 v 神算出按照 dm 同学的规则有多少种分组方案吗？", "description": "v 神的班级共有 $N$ 个人，dm 同学想把同学分成 $M$ 组联络，要求第 $i$ 组的人数必须大于给定的正整数 $C_i$，求有多少不同的方案（两个是相同的方案当且仅当对于任意的一队 $i$，两个方案的第 $i$ 组同学数量相等）。由于结果很大，所以你只需要输出模 $10^9+7$ 的值。", "inputFormat": "第一行两个整数 $N$ 和 $M$，后面有 $M$ 行，每行一个整数，表示 $C_i$。", "outputFormat": "仅有一行，一个整数，方案数模 $10^9+7$ 的值。", "hint": "### 样例解释\n\n方案有三种，每组的个数分别是 $(3,3,4)$，$(2,4,4)$，$(2,3,5)$。\n\n### 数据范围约定\n\n对于 $30\\%$ 的数据，$N,M\\le 10$。\n\n对于 $60\\%$ 的数据，$N,M\\le 1000$。\n\n对于 $100\\%$ 的数据，$1\\le N ,M\\le 10^6$，$1\\le C_i\\le 1000$。\n\n数据保证至少有一个方案。", "locale": "zh-CN"}}}
{"pid": "P1681", "type": "P", "difficulty": 3, "samples": [["3 3\n0 1 0\n1 0 0\n1 1 1\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP"], "title": "最大正方形II", "background": "忙完了学校的事，v 神终于可以做他的“正事”：陪女朋友散步。一天，他和女朋友走着走着，不知不觉就来到了一个千里无烟的地方。v 神正要往回走，如发现了一块牌子，牌子上有一行小字和一张图，小字说道：“找到图上最大的交错正方形之后和我联系，这块地就是你的了。”在房价疯长的年代，v 神当然不愿错过这个机会，于是开始找了起来……以 v 神的能力当然找不出来了，你能帮 v 神找出来吗？", "description": "图上有一个矩阵，由 $N\\times M$ 个格子组成，这些格子由两种颜色构成，黑色和白色。请找到面积最大的且内部是黑白交错（即两个相连的正方形颜色不能相同）的正方形。", "inputFormat": "第一行两个整数 $N$ 和 $M$，分别表示行数和列数。接下来有 $N$ 行，每行 $M$ 个数，$0$ 或 $1$ 分别表示这个格子是黑色或白色。", "outputFormat": "仅有一行，表示满足条件最大正方形的边长。", "hint": "### 样例解释\n\n$(1,1)$ 到 $(2,2)$ 这个正方形是满足条件的，它的边长是 $2$。\n\n### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$N \\le 20$；\n- 对于 $60\\%$ 的数据，$N \\le 300$；\n- 对于 $100\\%$ 的数据，$N \\le 1500$。", "locale": "zh-CN", "translations": {"en": {"title": "Largest Square II", "background": "After finishing his schoolwork, v 神 could finally do his \"real business\": taking a walk with his girlfriend. One day, as they walked, they unknowingly arrived at a desolate place. Just as v 神 was about to turn back, he noticed a sign. The sign had a line of small text and a picture. The small text said: \"Contact me after you find the largest alternating square in the picture, and this land will be yours.\" In an era of soaring housing prices, v 神 certainly did not want to miss this opportunity, so he started searching... Of course, with v 神's ability, he couldn't find it. Can you help v 神 find it?", "description": "There is a grid on the picture, consisting of $N\\times M$ cells. Each cell is colored either black or white. Find a square of maximum area whose interior is black-and-white alternating, that is, any two adjacent unit cells (sharing an edge) must not have the same color.", "inputFormat": "The first line contains two integers $N$ and $M$, denoting the number of rows and columns, respectively. Then follow $N$ lines, each containing $M$ numbers. Each number is $0$ or $1$, indicating that the cell is black or white, respectively.", "outputFormat": "Output a single line containing the side length of the largest square that satisfies the condition.", "hint": "Sample Explanation:\nThe square from $(1,1)$ to $(2,2)$ satisfies the condition, and its side length is $2$.\n\nConstraints:\n- For $30\\%$ of the testdata, $N \\le 20$.\n- For $60\\%$ of the testdata, $N \\le 300$.\n- For $100\\%$ of the testdata, $N \\le 1500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最大正方形II", "background": "忙完了学校的事，v 神终于可以做他的“正事”：陪女朋友散步。一天，他和女朋友走着走着，不知不觉就来到了一个千里无烟的地方。v 神正要往回走，如发现了一块牌子，牌子上有一行小字和一张图，小字说道：“找到图上最大的交错正方形之后和我联系，这块地就是你的了。”在房价疯长的年代，v 神当然不愿错过这个机会，于是开始找了起来……以 v 神的能力当然找不出来了，你能帮 v 神找出来吗？", "description": "图上有一个矩阵，由 $N\\times M$ 个格子组成，这些格子由两种颜色构成，黑色和白色。请找到面积最大的且内部是黑白交错（即两个相连的正方形颜色不能相同）的正方形。", "inputFormat": "第一行两个整数 $N$ 和 $M$，分别表示行数和列数。接下来有 $N$ 行，每行 $M$ 个数，$0$ 或 $1$ 分别表示这个格子是黑色或白色。", "outputFormat": "仅有一行，表示满足条件最大正方形的边长。", "hint": "### 样例解释\n\n$(1,1)$ 到 $(2,2)$ 这个正方形是满足条件的，它的边长是 $2$。\n\n### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$N \\le 20$；\n- 对于 $60\\%$ 的数据，$N \\le 300$；\n- 对于 $100\\%$ 的数据，$N \\le 1500$。", "locale": "zh-CN"}}}
{"pid": "P1682", "type": "P", "difficulty": 3, "samples": [["4 5 1 2\n1 1\n2 3\n3 2\n4 2\n4 4\n1 4\n2 3\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "并查集", "深度优先搜索 DFS"], "title": "过家家", "background": "", "description": "有 $2n$ 个小学生来玩过家家游戏，其中有 $n$ 个男生，编号为 $1$ 到 $n$，另外 $n$ 个女生，编号也是 $1$ 到 $n$。每一个女生可以选择一个和她不吵嘴的男生来玩，除此之外，如果编号为 $X$ 的女生的朋友（也是女生，且编号为 $Y$）不和编号为 $Z$ 的男生吵嘴，那么 $X$ 也可以选择 $Z$。此外，朋友关系是可以传递的，比如 $a$ 和 $b$ 是朋友，$b$ 和 $c$ 是朋友，那么我们可以认为 $a$ 和 $c$ 也是朋友。注意，一个男生可以被多个女生选择为玩伴。\n\n当每一位女生都选择了玩伴，那么他们会开始新一轮游戏。在每一轮后，每个女生都会开始去找一个新的男生做玩伴（以前没选过）。而且每一个女生最多能强制 $k$ 个男生接受，无论他们以前是否吵嘴。\n\n现在你的任务就是确定这 $2n$ 个小学生最多能玩几轮游戏。\n", "inputFormat": "第一行有四个整数 $n,m,k,f$（$3 \\le n \\le 250$，$0 < m < n^{2}$，$0 \\le f < n$）。\n\n$n$ 表示有 $2n$ 个小学生，其中 $n$ 个男生 $n$ 个女生。\n\n接下来 $m$ 行，每行包含两个数字 $a,b$ 表示编号为 $a$ 的女生和编号为 $b$ 的男生从没吵嘴过。\n\n再接下来 $f$ 行，每行包含两个数字 $c,d$ 表示编号为 $c$ 的女生和编号为 $d$ 的女生是朋友。\n", "outputFormat": "对于每组数据，输出一个整数，表示 $2n$ 个小学生最多能玩几轮。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Playing House", "background": "", "description": "There are $2n$ elementary school students playing the “playing house” game: $n$ boys labeled $1$ to $n$, and $n$ girls labeled $1$ to $n$. Each girl may choose a boy with whom she does not quarrel as her partner. In addition, if girl $X$ has a friend (also a girl) $Y$ who does not quarrel with boy $Z$, then $X$ may also choose $Z$. Moreover, friendship is transitive: if $a$ and $b$ are friends, and $b$ and $c$ are friends, then $a$ and $c$ are also considered friends. Note that a boy may be chosen by multiple girls as their partner.\n\nOnce every girl has chosen a partner, they start a new round of the game. After each round, every girl looks for a new boy as her partner (one she has never chosen before). Also, each girl may, in total, force at most $k$ boys to accept her, regardless of whether they have quarreled before.\n\nYour task is to determine the maximum number of rounds the $2n$ students can play.", "inputFormat": "The first line contains four integers $n, m, k, f$ (Constraints: $3 \\le n \\le 250$, $0 < m < n^{2}$, $0 \\le f < n$).\n\nHere, $n$ means there are $2n$ students in total, with $n$ boys and $n$ girls.\n\nThe next $m$ lines each contain two integers $a, b$, indicating that girl $a$ and boy $b$ have never quarreled.\n\nThe next $f$ lines each contain two integers $c, d$, indicating that girls $c$ and $d$ are friends.", "outputFormat": "For each test, output one integer, the maximum number of rounds the $2n$ students can play.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "过家家", "background": "", "description": "有 $2n$ 个小学生来玩过家家游戏，其中有 $n$ 个男生，编号为 $1$ 到 $n$，另外 $n$ 个女生，编号也是 $1$ 到 $n$。每一个女生可以选择一个和她不吵嘴的男生来玩，除此之外，如果编号为 $X$ 的女生的朋友（也是女生，且编号为 $Y$）不和编号为 $Z$ 的男生吵嘴，那么 $X$ 也可以选择 $Z$。此外，朋友关系是可以传递的，比如 $a$ 和 $b$ 是朋友，$b$ 和 $c$ 是朋友，那么我们可以认为 $a$ 和 $c$ 也是朋友。注意，一个男生可以被多个女生选择为玩伴。\n\n当每一位女生都选择了玩伴，那么他们会开始新一轮游戏。在每一轮后，每个女生都会开始去找一个新的男生做玩伴（以前没选过）。而且每一个女生最多能强制 $k$ 个男生接受，无论他们以前是否吵嘴。\n\n现在你的任务就是确定这 $2n$ 个小学生最多能玩几轮游戏。\n", "inputFormat": "第一行有四个整数 $n,m,k,f$（$3 \\le n \\le 250$，$0 < m < n^{2}$，$0 \\le f < n$）。\n\n$n$ 表示有 $2n$ 个小学生，其中 $n$ 个男生 $n$ 个女生。\n\n接下来 $m$ 行，每行包含两个数字 $a,b$ 表示编号为 $a$ 的女生和编号为 $b$ 的男生从没吵嘴过。\n\n再接下来 $f$ 行，每行包含两个数字 $c,d$ 表示编号为 $c$ 的女生和编号为 $d$ 的女生是朋友。\n", "outputFormat": "对于每组数据，输出一个整数，表示 $2n$ 个小学生最多能玩几轮。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1683", "type": "P", "difficulty": 2, "samples": [["11 9\n.#.........\n.#.#######.\n.#.#.....#.\n.#.#.###.#.\n.#.#..@#.#.\n.#.#####.#.\n.#.......#.\n.#########.\n...........\n", "59"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "入门", "background": "", "description": "不是任何人都可以进入桃花岛的，黄药师最讨厌像郭靖一样呆头呆脑的人。所以，他在桃花岛的唯一入口处修了一条小路，这条小路全部用正方形瓷砖铺设而成。有的瓷砖可以踩，我们认为是安全的，而有的瓷砖一踩上去就会有喷出要命的毒气，那你就死翘翘了，我们认为是不安全的。你只能从一块安全的瓷砖上走到与他相邻的四块瓷砖中的任何一个上，但它也必须是安全的才行。\n\n由于你是黄蓉的朋友，她事先告诉你哪些砖是安全的、哪些砖是不安全的，并且她会指引你飞到第一块砖上（第一块砖可能在任意安全位置），现在她告诉你进入桃花岛的秘密就是：如果你能走过最多的瓷砖并且没有死，那么桃花岛的大门就会自动打开了，你就可以从当前位置直接飞进大门了。\n\n注意：瓷砖可以重复走过，但不能重复计数。\n", "inputFormat": "第一行两个正整数 $W$ 和 $H$，分别表示小路的宽度和长度。\n\n以下 $H$ 行为一个 $H\\times W$ 的字符矩阵。每一个字符代表一块瓷砖。其中，`.` 代表安全的砖，`#` 代表不安全的砖，`@` 代表第一块砖。", "outputFormat": "输出一行，只包括一个数，即你从第一块砖开始所能安全走过的最多的砖块个数（包括第一块砖）。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq W,H\\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Beginner", "background": "", "description": "Not everyone can enter Peach Blossom Island. Huang Yaoshi hates dull people like Guo Jing. So he built a small path at the island’s only entrance, paved entirely with square tiles. Some tiles are safe to step on, while others will spray deadly poison gas the moment you step on them—you die immediately; we consider them unsafe. You can move from a safe tile to any of its four neighboring tiles, but the destination must also be safe.\n\nBecause you are a friend of Huang Rong, she tells you in advance which tiles are safe and which are unsafe, and she will guide you to fly onto the first tile (the first tile may be at any safe position). Now she tells you the secret to entering Peach Blossom Island: if you can walk over the maximum number of tiles without dying, the island gate will open automatically, and you can fly straight into the gate from your current position.\n\nNote: You may revisit tiles, but you must not count the same tile more than once.", "inputFormat": "The first line contains two positive integers $W$ and $H$, denoting the width and height of the path.\n\nThe following $H$ lines form an $H \\times W$ character matrix. Each character represents one tile. `.` denotes a safe tile, `#` denotes an unsafe tile, and `@` denotes the first tile.", "outputFormat": "Output one line containing a single integer: the maximum number of tiles you can safely visit starting from the first tile (including the first tile).", "hint": "Constraints\n\nFor all test points, it is guaranteed that $1 \\leq W, H \\leq 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "入门", "background": "", "description": "不是任何人都可以进入桃花岛的，黄药师最讨厌像郭靖一样呆头呆脑的人。所以，他在桃花岛的唯一入口处修了一条小路，这条小路全部用正方形瓷砖铺设而成。有的瓷砖可以踩，我们认为是安全的，而有的瓷砖一踩上去就会有喷出要命的毒气，那你就死翘翘了，我们认为是不安全的。你只能从一块安全的瓷砖上走到与他相邻的四块瓷砖中的任何一个上，但它也必须是安全的才行。\n\n由于你是黄蓉的朋友，她事先告诉你哪些砖是安全的、哪些砖是不安全的，并且她会指引你飞到第一块砖上（第一块砖可能在任意安全位置），现在她告诉你进入桃花岛的秘密就是：如果你能走过最多的瓷砖并且没有死，那么桃花岛的大门就会自动打开了，你就可以从当前位置直接飞进大门了。\n\n注意：瓷砖可以重复走过，但不能重复计数。\n", "inputFormat": "第一行两个正整数 $W$ 和 $H$，分别表示小路的宽度和长度。\n\n以下 $H$ 行为一个 $H\\times W$ 的字符矩阵。每一个字符代表一块瓷砖。其中，`.` 代表安全的砖，`#` 代表不安全的砖，`@` 代表第一块砖。", "outputFormat": "输出一行，只包括一个数，即你从第一块砖开始所能安全走过的最多的砖块个数（包括第一块砖）。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq W,H\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P1684", "type": "P", "difficulty": 3, "samples": [["15\r\n1 2 3 1 2 1 2 3 3 2 1 1 3 2 2\r\n", "3\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心"], "title": "考验", "background": null, "description": "大家知道，黄药师不仅武功高超，而且酷爱音乐和诗歌。看到桃花岛来了个新客人，而且不是靠真武功进来的，就准备为难为难你。\n\n他写了一首 $N$ 行诗句的诗歌，美中不足的是这些诗句并不押韵，黄药师非常想遵循古诗的押韵。诗歌被分为若干段，每段都是四行诗。每一句诗都有一个韵脚，假如 $A$ 和 $B$ 表示两种不同的韵脚，每段四行诗的韵脚只可能是 `AABB`，`ABAB`，`ABBA` 和 `AAAA` 中的一种。\n\n黄药师将诗句的韵脚都编了号，具有相同编号的句子代表有相同的韵脚。现在，黄药师想删掉一些句子，使得剩下的都是遵循押韵规则的四行诗，而且不允许改变诗句的顺序。\n\n现在就问你：如何找出满足条件最长的诗歌？", "inputFormat": "第 $1$ 行为一个整数 $N\\ (1 \\le N \\le 4000)$，代表黄药师写的诗歌的句子数。\n\n第 $2$ 行为 $N$ 个整数，分别表示每一行诗的韵脚，这些数字都是不超过 $10^9$ 的正数，每个数之间用 $1$ 个空格隔开。", "outputFormat": "一行一个整数 $k$，为黄药师最多能够得到的四行诗个数。", "hint": "提示：\n\n删除第 $3$、$6$、$13$ 句诗，就可以分成 $3$ 个四行诗，分别为：\n\n- $1,2,4,5$；\n- $7,8,9,10$；\n- $11,12,14,15$。", "locale": "zh-CN", "translations": {"en": {"title": "Trial", "background": "", "description": "Everyone knows that Huang Yaoshi not only has superb martial arts, but also loves music and poetry. Seeing that a new guest has arrived on Peach Blossom Island, and that you did not enter by true martial arts, he decided to make things difficult for you.\n\nHe wrote a poem with $N$ lines. Unfortunately, these lines do not rhyme, but Huang Yaoshi really wants to follow the rhyming rules of classical poetry. The poem is divided into several stanzas, each of which has four lines. Every line has a rhyme. Suppose $A$ and $B$ are two different rhymes; then the rhyme scheme of each four-line stanza can only be one of `AABB`, `ABAB`, `ABBA`, or `AAAA`.\n\nHuang Yaoshi numbered the rhymes of all lines; lines with the same number have the same rhyme. Now he wants to delete some lines so that the remaining lines can be partitioned into four-line stanzas that follow the rhyming rules, and the order of lines cannot be changed.\n\nThe question is: how do you find the longest poem that satisfies the conditions?", "inputFormat": "The first line contains an integer $N$ ($1 \\le N \\le 4000$), the number of lines in the poem written by Huang Yaoshi.\n\nThe second line contains $N$ integers, representing the rhyme of each line. These numbers are positive and do not exceed $10^9$, and each number is separated by a single space.", "outputFormat": "Output a single integer k, the maximum number of four-line stanzas that Huang Yaoshi can obtain.", "hint": "Hint:\n\nBy deleting the 3rd, 6th, and 13th lines, the poem can be divided into 3 four-line stanzas:\n\n- 1, 2, 4, 5.\n- 7, 8, 9, 10.\n- 11, 12, 14, 15.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "考验", "background": null, "description": "大家知道，黄药师不仅武功高超，而且酷爱音乐和诗歌。看到桃花岛来了个新客人，而且不是靠真武功进来的，就准备为难为难你。\n\n他写了一首 $N$ 行诗句的诗歌，美中不足的是这些诗句并不押韵，黄药师非常想遵循古诗的押韵。诗歌被分为若干段，每段都是四行诗。每一句诗都有一个韵脚，假如 $A$ 和 $B$ 表示两种不同的韵脚，每段四行诗的韵脚只可能是 `AABB`，`ABAB`，`ABBA` 和 `AAAA` 中的一种。\n\n黄药师将诗句的韵脚都编了号，具有相同编号的句子代表有相同的韵脚。现在，黄药师想删掉一些句子，使得剩下的都是遵循押韵规则的四行诗，而且不允许改变诗句的顺序。\n\n现在就问你：如何找出满足条件最长的诗歌？", "inputFormat": "第 $1$ 行为一个整数 $N\\ (1 \\le N \\le 4000)$，代表黄药师写的诗歌的句子数。\n\n第 $2$ 行为 $N$ 个整数，分别表示每一行诗的韵脚，这些数字都是不超过 $10^9$ 的正数，每个数之间用 $1$ 个空格隔开。", "outputFormat": "一行一个整数 $k$，为黄药师最多能够得到的四行诗个数。", "hint": "提示：\n\n删除第 $3$、$6$、$13$ 句诗，就可以分成 $3$ 个四行诗，分别为：\n\n- $1,2,4,5$；\n- $7,8,9,10$；\n- $11,12,14,15$。", "locale": "zh-CN"}}}
{"pid": "P1685", "type": "P", "difficulty": 4, "samples": [["3 4 1 3 7\n1 2 5\n2 3 7\n2 3 10\n1 3 15\n", "56"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "拓扑排序"], "title": "游览", "background": null, "description": "顺利通过了黄药师的考验，下面就可以尽情游览桃花岛了！\n\n你要从桃花岛的西头开始一直玩到东头，然后在东头的码头离开。可是当你游玩了一次后，发现桃花岛的景色实在是非常的美丽！！！于是你还想乘船从桃花岛东头的码头回到西头，再玩一遍，但是桃花岛有个规矩：你可以游览无数遍，但是每次游玩的路线不能完全一样。\n\n我们把桃花岛抽象成了一个图，共 $n$ 个点代表路的相交处，$m$ 条边表示路，边是有向的（只能按照边的方向行走），且可能有连接相同两点的边。输入保证这个图没有环，而且从西头到东头至少存在一条路线。两条路线被认为是不同的当且仅当它们所经过的路不完全相同。\n\n你的任务是：把所有不同的路线游览完一共要花多少时间？", "inputFormat": "第一行为 $5$ 个整数 $n,m,s,t_0,t_1$，分别表示点数，边数，岛西头的编号，岛东头的编号（编号是从 $1$ 到 $n$）和你乘船从岛东头到西头一次的时间。\n\n以下 $m$ 行，每行 $3$ 个整数 $x,y,t$，表示从点 $x$ 到点 $y$ 有一条行走耗时为 $t$ 的路。\n\n每一行的多个数据之间用一个空格隔开。", "outputFormat": "假设总耗时为 $total$，则输出 $total\\ \\bmod 10000$ 的值（$total$ 对 $10000$ 取余）。", "hint": "【样例说明】\n\n共有 $3$ 条路径可以从点 $1$ 到点 $3$，分别是 $1-2-3$，$1-2-3$，$1-3$。\n\n时间计算为：\n\n$(5+7)+7        +(5+10)+7        +(15)=56$\n\n### 数据范围\n\n$2\\leq n\\leq 10^4$，$1\\leq m\\leq 5\\times 10^4$，$t_0\\leq 10^4$，$t_1\\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Tour", "background": "", "description": "After you have successfully passed Huang Yaoshi (Huang Yaoshi)ʼs test, you can now freely tour Peach Blossom Island.\n\nYou start from the west end of the island and travel all the way to the east end, then leave from the pier at the east end. After one tour, you find the scenery of Peach Blossom Island so beautiful that you want to take a boat from the east pier back to the west end and tour again. However, there is a rule: you may tour any number of times, but the route taken each time cannot be exactly the same.\n\nWe model the island as a directed graph with $n$ vertices representing intersections and $m$ directed edges representing roads. Multiple edges between the same ordered pair of vertices may exist. The input guarantees that the graph has no cycles, and that there is at least one route from the west end to the east end. Two routes are considered different if and only if the exact sequence of edges they traverse is not identical.\n\nYour task: How much total time does it take to finish touring all different routes? Between two consecutive tours, you take the boat from the east end back to the west end once, which costs $t_0$ time. After the last tour, you leave from the east pier and do not return.", "inputFormat": "The first line contains $5$ integers $n, m, s, t, t_0$, representing the number of vertices, the number of edges, the index of the west end, the index of the east end (indices are from $1$ to $n$), and the time to take the boat once from the east end back to the west end.\n\nEach of the following $m$ lines contains $3$ integers $x, y, t$, indicating that there is a directed edge from vertex $x$ to vertex $y$ with travel time $t$.\n\nNumbers on each line are separated by a single space.", "outputFormat": "Assume the total time is $total$. Output the value of $total \\bmod 10000$ ($total$ modulo $10000$).", "hint": "[Sample Explanation]\n\nThere are $3$ routes from vertex $1$ to vertex $3$, namely $1-2-3$, $1-2-3$, and $1-3$.\n\nTime calculation:\n$ (5+7)+7 + (5+10)+7 + (15) = 56 $.\n\n### Constraints\n\n$2 \\le n \\le 10^4$, $1 \\le m \\le 5 \\times 10^4$, $t \\le 10^4$, $t_0 \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "游览", "background": null, "description": "顺利通过了黄药师的考验，下面就可以尽情游览桃花岛了！\n\n你要从桃花岛的西头开始一直玩到东头，然后在东头的码头离开。可是当你游玩了一次后，发现桃花岛的景色实在是非常的美丽！！！于是你还想乘船从桃花岛东头的码头回到西头，再玩一遍，但是桃花岛有个规矩：你可以游览无数遍，但是每次游玩的路线不能完全一样。\n\n我们把桃花岛抽象成了一个图，共 $n$ 个点代表路的相交处，$m$ 条边表示路，边是有向的（只能按照边的方向行走），且可能有连接相同两点的边。输入保证这个图没有环，而且从西头到东头至少存在一条路线。两条路线被认为是不同的当且仅当它们所经过的路不完全相同。\n\n你的任务是：把所有不同的路线游览完一共要花多少时间？", "inputFormat": "第一行为 $5$ 个整数 $n,m,s,t_0,t_1$，分别表示点数，边数，岛西头的编号，岛东头的编号（编号是从 $1$ 到 $n$）和你乘船从岛东头到西头一次的时间。\n\n以下 $m$ 行，每行 $3$ 个整数 $x,y,t$，表示从点 $x$ 到点 $y$ 有一条行走耗时为 $t$ 的路。\n\n每一行的多个数据之间用一个空格隔开。", "outputFormat": "假设总耗时为 $total$，则输出 $total\\ \\bmod 10000$ 的值（$total$ 对 $10000$ 取余）。", "hint": "【样例说明】\n\n共有 $3$ 条路径可以从点 $1$ 到点 $3$，分别是 $1-2-3$，$1-2-3$，$1-3$。\n\n时间计算为：\n\n$(5+7)+7        +(5+10)+7        +(15)=56$\n\n### 数据范围\n\n$2\\leq n\\leq 10^4$，$1\\leq m\\leq 5\\times 10^4$，$t_0\\leq 10^4$，$t_1\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1686", "type": "P", "difficulty": 4, "samples": [["12\r\nNNNENNWWWSSW\r\n", "2 3 11 W"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心"], "title": "挑战", "background": "", "description": "桃花岛其实也没什么好玩的，黄蓉经常偷偷跑到江湖上与洪七公等人玩。于是，黄药师就经常想一些游戏与女儿玩，为了是把黄蓉留在身边，江湖险恶啊！\n\n这次黄药师又想了一种模拟游戏，游戏是这样的：她把整个桃花岛划分成一个坐标系。游戏开始前，黄蓉站在平面坐标系的一个点上，而她的闺房在坐标系的另一个点上，任何时候，她可以从当前所在点跨一步达到她周围的上、下、左、右四个点，黄药师不断地说四个字“东（E）”、“南（S）”、“西（W）”、“北（N）”，则黄蓉就想象着不断地从一个点走到另一个点，直至到自己的闺房为止。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gso383g9.png)\n\n比如，黄蓉开始时站在 $\\rm A$ 点，她的家在 $\\rm B$ 点，黄药师连续说了一串：$\\verb!NNNENNWWWSSW!$，则走了如下一个线路。然后，黄药师会问黄蓉：中间有没有走“弯路”了？即有没有捷径好走？比如，下图中就有多条捷径，可以从 $\\rm C$ 走 $\\verb!NN!$ 而到 $\\rm E$，或走 $\\verb!WW!$ 直接到 $\\rm D$。\n\n注意：捷径必须是直线。\n\n黄药师听说你是一个程序设计高手，就想请你编个程序帮他测测这个游戏的难度，以便改进游戏规则后再让黄蓉挑战。\n\n你的任务是：找一条最短的捷径。\n", "inputFormat": "第一行是一个整数 $n$（$3\\le n\\le 2.5\\times 10^5$）表示黄药师所报出的字符串长度。\n\n第二行是一个由 $\\verb!N!,\\verb!E!,\\verb!S!,\\verb!W!$ 组成的字符串，都是大写字母且中间没有空格。\n\n我们把游戏的起点记为 $0$，把黄蓉的闺房（即游戏的终点）记为 $n$，中间的每一个落脚点都依次标记一个自然数。\n", "outputFormat": "输出只有一行，由 $3$ 个数字和 $1$ 个字符组成，中间用1个空格隔开。\n\n- 第 $1$ 个数字表示最短捷径的长度。\n- 第 $2$ 个数字表示最短捷径的开始点。\n- 第 $3$ 个数字表示最短捷径的结束点。\n- 最后一个字符表示最短捷径的方向（同样用 $\\verb!N!,\\verb!E!,\\verb!S!,\\verb!W!$ 中的一个表示）。\n\n如果最短捷径存在多个解，那么输出开始点标号最小的那一条。如果仍然有多个解，那么输出结束点标号最大的。数据保证一定存在满足条件的最短捷径。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Challenge", "background": "", "description": "There is not much fun on Peach Blossom Island, so Huang Rong often sneaks into the jianghu to play with Hong Qigong and others. Thus, Huang Yaoshi often comes up with games to play with his daughter, in order to keep Huang Rong by his side — the jianghu is dangerous!\n\nThis time, Huang Yaoshi devised a simulation game as follows: He divides the entire Peach Blossom Island into a coordinate grid. Before the game starts, Huang Rong stands at a point on the plane, and her boudoir is at another point on the grid. At any time, she can take one step from her current point to one of the four neighboring points: up, down, left, or right. Huang Yaoshi continuously calls out one of four words: “East (E)”, “South (S)”, “West (W)”, “North (N)”, and Huang Rong imagines herself moving from one point to another according to these directions until she reaches her boudoir.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gso383g9.png)\n\nFor example, suppose Huang Rong starts at point $\\rm A$, and her home is at point $\\rm B$. If Huang Yaoshi says the sequence $\\verb!NNNENNWWWSSW!$, then she will follow the path shown. Then Huang Yaoshi asks Huang Rong: Did you take any detours in the middle? In other words, is there any shortcut? For example, in the figure there are multiple shortcuts: from $\\rm C$ you can go $\\verb!NN!$ to reach $\\rm E$, or go $\\verb!WW!$ directly to $\\rm D$.\n\nNote: A shortcut must be a straight line.\n\nHuang Yaoshi heard that you are a programming expert and would like you to write a program to help him measure the difficulty of this game, so he can improve the rules before letting Huang Rong take on the challenge.\n\nYour task is: find one shortest shortcut.", "inputFormat": "The first line is an integer $n$ ($3 \\le n \\le 2.5\\times 10^5$) representing the length of the string spoken by Huang Yaoshi.\n\nThe second line is a string consisting of $\\verb!N!, \\verb!E!, \\verb!S!, \\verb!W!$, all uppercase letters with no spaces.\n\nWe label the starting point of the game as $0$, and Huang Rong’s boudoir (the ending point) as $n$. Each intermediate landing point is labeled with a natural number in order.", "outputFormat": "Output a single line consisting of $3$ numbers and $1$ character, separated by a single space.\n\n- The 1st number is the length of the shortest shortcut.\n- The 2nd number is the starting point of the shortest shortcut.\n- The 3rd number is the ending point of the shortest shortcut.\n- The last character is the direction of the shortest shortcut (also one of $\\verb!N!, \\verb!E!, \\verb!S!, \\verb!W!$).\n\nIf there are multiple shortest shortcuts, output the one with the smallest starting point label. If there is still a tie, output the one with the largest ending point label. The testdata guarantees that there exists a shortest shortcut satisfying the conditions.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "挑战", "background": "", "description": "桃花岛其实也没什么好玩的，黄蓉经常偷偷跑到江湖上与洪七公等人玩。于是，黄药师就经常想一些游戏与女儿玩，为了是把黄蓉留在身边，江湖险恶啊！\n\n这次黄药师又想了一种模拟游戏，游戏是这样的：她把整个桃花岛划分成一个坐标系。游戏开始前，黄蓉站在平面坐标系的一个点上，而她的闺房在坐标系的另一个点上，任何时候，她可以从当前所在点跨一步达到她周围的上、下、左、右四个点，黄药师不断地说四个字“东（E）”、“南（S）”、“西（W）”、“北（N）”，则黄蓉就想象着不断地从一个点走到另一个点，直至到自己的闺房为止。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gso383g9.png)\n\n比如，黄蓉开始时站在 $\\rm A$ 点，她的家在 $\\rm B$ 点，黄药师连续说了一串：$\\verb!NNNENNWWWSSW!$，则走了如下一个线路。然后，黄药师会问黄蓉：中间有没有走“弯路”了？即有没有捷径好走？比如，下图中就有多条捷径，可以从 $\\rm C$ 走 $\\verb!NN!$ 而到 $\\rm E$，或走 $\\verb!WW!$ 直接到 $\\rm D$。\n\n注意：捷径必须是直线。\n\n黄药师听说你是一个程序设计高手，就想请你编个程序帮他测测这个游戏的难度，以便改进游戏规则后再让黄蓉挑战。\n\n你的任务是：找一条最短的捷径。\n", "inputFormat": "第一行是一个整数 $n$（$3\\le n\\le 2.5\\times 10^5$）表示黄药师所报出的字符串长度。\n\n第二行是一个由 $\\verb!N!,\\verb!E!,\\verb!S!,\\verb!W!$ 组成的字符串，都是大写字母且中间没有空格。\n\n我们把游戏的起点记为 $0$，把黄蓉的闺房（即游戏的终点）记为 $n$，中间的每一个落脚点都依次标记一个自然数。\n", "outputFormat": "输出只有一行，由 $3$ 个数字和 $1$ 个字符组成，中间用1个空格隔开。\n\n- 第 $1$ 个数字表示最短捷径的长度。\n- 第 $2$ 个数字表示最短捷径的开始点。\n- 第 $3$ 个数字表示最短捷径的结束点。\n- 最后一个字符表示最短捷径的方向（同样用 $\\verb!N!,\\verb!E!,\\verb!S!,\\verb!W!$ 中的一个表示）。\n\n如果最短捷径存在多个解，那么输出开始点标号最小的那一条。如果仍然有多个解，那么输出结束点标号最大的。数据保证一定存在满足条件的最短捷径。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1687", "type": "P", "difficulty": 4, "samples": [["7 3\n1 119 119 1 120 120 118\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "机器人小Q", "background": null, "description": "成功派送完这个大单后，餐厅决定引入一名新成员：机器人小 Q。小 Q 的到来让餐厅的客源增加了不少，但是，一段时间之后，新的问题又出现了，小 Q 和我们可不一样，如果要让他工作的话，我们得给他输入能量以保持体力，而小 Q 的能量菜单表上已经按一定顺序给出了 $N$ 个单位的能量值，但是每个单位的能量由于来源不同，需要消耗一定的时间摄入。已知小 Q 每天充电的时间上限值为 $119$，如果时间超出的话就会自动崩溃，大家都想让小 Q 留下来，经过研究之后，决定派 HWX 和 XYF 去和老板谈判，考虑角度不一样，LXC 老板才不想听什么辛酸流泪史，他只想知道，若是想让小 Q 获得 $K$ 单位的能量（也就是能量表中可以不接受某些能量）最少需要几天来充电。", "inputFormat": "第一行，两个整数，$N,K$ 分别表示小 Q 的能量菜单上有 $N$ 个单位的能量，想获取其中的 $K$ 个。\n\n第二行，$N$个整数，分别是第 $i$ 个单位能量需要的充电时间。", "outputFormat": "仅一行，一个整数，为最少需要天数。\n\n如果永远不能达到题目要求，输出 `You can't do it.`", "hint": "### 样例解释\n\n只接收 $1,1,118$。显然这需要 $2$ 天。\n\n### 数据规模\n\n对于 $30\\%$ 的数据，有 $1\\le K\\le N\\le 20$。\n\n对于 $100\\%$ 的数据，有 $1\\le K\\le N\\le 3000$。", "locale": "zh-CN", "translations": {"en": {"title": "Robot Xiao Q", "background": "", "description": "After successfully delivering a big order, the restaurant decided to bring in a new member: Robot Xiao Q. Xiao Q’s arrival brought in many more customers, but after a while a new problem appeared. Unlike us, Xiao Q needs energy input to keep going. The energy menu already lists $N$ units of energy in a fixed order, but because their sources differ, ingesting each unit takes a certain amount of time. Xiao Q’s maximum charging time per day is $119$; if this limit is exceeded, he will crash automatically. Everyone wants Xiao Q to stay, so after some research, HWX and XYF went to negotiate with the boss. From LXC’s point of view, he does not want to hear any sob story; he only wants to know: to let Xiao Q obtain $K$ units of energy (that is, you may skip some units on the menu), what is the minimum number of days needed for charging?", "inputFormat": "The first line contains two integers $N, K$, meaning there are $N$ energy units on Xiao Q’s menu, and we want to obtain $K$ of them.\n\nThe second line contains $N$ integers, where the $i$‑th integer is the charging time required for the $i$‑th energy unit.", "outputFormat": "Output a single line containing one integer: the minimum number of days required.\n\nIf it is impossible to meet the requirement, output `You can't do it.`.", "hint": "### Sample Explanation\n\nAccept only $1,1,118$. Obviously, this takes $2$ days.\n\n### Constraints\n\nFor $30\\%$ of the testdata, $1 \\le K \\le N \\le 20$.\n\nFor $100\\%$ of the testdata, $1 \\le K \\le N \\le 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "机器人小Q", "background": null, "description": "成功派送完这个大单后，餐厅决定引入一名新成员：机器人小 Q。小 Q 的到来让餐厅的客源增加了不少，但是，一段时间之后，新的问题又出现了，小 Q 和我们可不一样，如果要让他工作的话，我们得给他输入能量以保持体力，而小 Q 的能量菜单表上已经按一定顺序给出了 $N$ 个单位的能量值，但是每个单位的能量由于来源不同，需要消耗一定的时间摄入。已知小 Q 每天充电的时间上限值为 $119$，如果时间超出的话就会自动崩溃，大家都想让小 Q 留下来，经过研究之后，决定派 HWX 和 XYF 去和老板谈判，考虑角度不一样，LXC 老板才不想听什么辛酸流泪史，他只想知道，若是想让小 Q 获得 $K$ 单位的能量（也就是能量表中可以不接受某些能量）最少需要几天来充电。", "inputFormat": "第一行，两个整数，$N,K$ 分别表示小 Q 的能量菜单上有 $N$ 个单位的能量，想获取其中的 $K$ 个。\n\n第二行，$N$个整数，分别是第 $i$ 个单位能量需要的充电时间。", "outputFormat": "仅一行，一个整数，为最少需要天数。\n\n如果永远不能达到题目要求，输出 `You can't do it.`", "hint": "### 样例解释\n\n只接收 $1,1,118$。显然这需要 $2$ 天。\n\n### 数据规模\n\n对于 $30\\%$ 的数据，有 $1\\le K\\le N\\le 20$。\n\n对于 $100\\%$ 的数据，有 $1\\le K\\le N\\le 3000$。", "locale": "zh-CN"}}}
{"pid": "P1688", "type": "P", "difficulty": 5, "samples": [["9\r\ncat\r\ndig\r\ndog\r\nfig\r\nfin\r\nfine\r\nfog\r\nlog\r\nwine\r\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "哈希 hashing", "字典树 Trie"], "title": "新单词接龙问题", "background": "", "description": "给定一个包含 $n$ 个单词的字典，定义字典序为单词在**本字典的顺序**。从中选择若干个单词，按**字典序**进行单词接龙，使得接龙的长度最大。\n\n新单词接龙的规则：\n\n1. 单词变换：单词 $w_i$ 添加一个字母，删除一个字母，或修改一个字母可以得到单词 $w_{i+1}$；\n2. 字典序接龙：$w_1,w_2,\\cdots,w_n$，满足字典序。", "inputFormat": "第一行一个整数 $n$（$1 \\le n \\le 25,000$），表示字典中单词的总数。接下来 $n$ 行，按字典序输入 $n$ 个单词，每行一个字符串，表示单词，单词仅由小写字母组成，长度在 $1$ 至 $16$ 以内。", "outputFormat": "输出一行一个整数，表示能获得的单词接龙的最大长度。", "hint": "### 样例解释\n\n长度为 $5$ 的单词接龙为：$\\texttt{dig}\\to \\texttt{fig}\\to \\texttt{fin}\\to \\texttt{fine}\\to\\texttt{wine}$。", "locale": "zh-CN", "translations": {"en": {"title": "New Word Ladder Problem", "background": "", "description": "Given a dictionary that contains $n$ words, define the dictionary order as the order within this dictionary (i.e., the given list order). Select some words and form a word ladder in dictionary order so that the ladder length is maximized.\n\nRules for the new word ladder:\n1. Word transformation: from $w_i$, adding one letter, deleting one letter, or changing one letter can obtain $w_{i+1}$.\n2. Dictionary-order chain: $w_1, w_2, \\cdots, w_k$ are in dictionary order.", "inputFormat": "The first line contains an integer $n$ ($1 \\le n \\le 25,000$), the total number of words in the dictionary. The next $n$ lines, in dictionary order, contain $n$ words, one string per line. Each word consists only of lowercase letters, and its length is between $1$ and $16$ inclusive.", "outputFormat": "Output a single integer on one line, the maximum possible length of the word ladder.", "hint": "Sample explanation:\n\nA word ladder of length $5$ is: $\\texttt{dig}\\to \\texttt{fig}\\to \\texttt{fin}\\to \\texttt{fine}\\to \\texttt{wine}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "新单词接龙问题", "background": "", "description": "给定一个包含 $n$ 个单词的字典，定义字典序为单词在**本字典的顺序**。从中选择若干个单词，按**字典序**进行单词接龙，使得接龙的长度最大。\n\n新单词接龙的规则：\n\n1. 单词变换：单词 $w_i$ 添加一个字母，删除一个字母，或修改一个字母可以得到单词 $w_{i+1}$；\n2. 字典序接龙：$w_1,w_2,\\cdots,w_n$，满足字典序。", "inputFormat": "第一行一个整数 $n$（$1 \\le n \\le 25,000$），表示字典中单词的总数。接下来 $n$ 行，按字典序输入 $n$ 个单词，每行一个字符串，表示单词，单词仅由小写字母组成，长度在 $1$ 至 $16$ 以内。", "outputFormat": "输出一行一个整数，表示能获得的单词接龙的最大长度。", "hint": "### 样例解释\n\n长度为 $5$ 的单词接龙为：$\\texttt{dig}\\to \\texttt{fig}\\to \\texttt{fin}\\to \\texttt{fine}\\to\\texttt{wine}$。", "locale": "zh-CN"}}}
{"pid": "P1689", "type": "P", "difficulty": 2, "samples": [["1+2=?\n", "3\n"], ["3 +? =  2\n", "-1"], ["3-?=2\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "方程求解", "background": null, "description": "给一个方程，形如 $X+Y=Z$ 或 $X-Y=Z$。给出了其中两个未知数，请求出第三个数。未知数用 `?` 表示，等式中也许会出现一些多余的空格。", "inputFormat": "输入一行一个字符串代表方程。", "outputFormat": "一行一个整数表示`?`代表的值。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数，保证 $0\\le X,Y,Z\\lt10^9$，输入的字符串一定为题目给定的形式且长度不超过 $10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Equation Solving", "background": "", "description": "Given an equation of the form $X+Y=Z$ or $X-Y=Z$. Among $X$, $Y$, and $Z$, two values are given, and the remaining one is represented by `?`. Compute the value of `?`. There may be extra spaces in the equation.", "inputFormat": "The input consists of a single line containing a string representing the equation.", "outputFormat": "Output one integer on a single line, which is the value represented by `?`.", "hint": "Constraints: For $100\\%$ of the testdata, it is guaranteed that $0 \\le X, Y, Z \\lt 10^9$, the input string always conforms to the specified format, and its length does not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方程求解", "background": null, "description": "给一个方程，形如 $X+Y=Z$ 或 $X-Y=Z$。给出了其中两个未知数，请求出第三个数。未知数用 `?` 表示，等式中也许会出现一些多余的空格。", "inputFormat": "输入一行一个字符串代表方程。", "outputFormat": "一行一个整数表示`?`代表的值。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数，保证 $0\\le X,Y,Z\\lt10^9$，输入的字符串一定为题目给定的形式且长度不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P1690", "type": "P", "difficulty": 3, "samples": [["2\n0 4\n5 0\n2\n1 2\n", "4\n"], ["3\n0 2 6\n1 0 4\n7 10 0\n1\n2\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "枚举", "最短路"], "title": "贪婪的 Copy", "background": null, "description": "Copy 从卢牛那里听说在一片叫 yz 的神的领域埋藏着不少宝藏，于是 Copy 来到了这个被划分为 $n$ 个区域的神地。卢牛告诉了 Copy 这里共有 $n$ 个宝藏，分别放在第 $P_i$ 个 $(1\\le P_i\\le n)$ 区域。Copy 还得知了每个区域之间的距离。现在 Copy 从 $1$ 号区域出发，要获得所有的宝藏并到 $n$ 号区域离开。Copy 很懒，只好来找你为他寻找一条合适的线路，使得他走过的距离最短。", "inputFormat": "第一行一个正整数 $n(1\\le n\\le 100)$\n\n接下来一个 $n\\times n$ 的矩阵，第 $i+1$ 行第 $j$ 列的数字表示区域 $i,j$ 之间的距离。每个距离用空格隔开，距离保证 $i\\to j\\le 1000$。请注意的 $i \\to j$ 距离并不一定等于 $j\\to i$ 的距离。\n\n第 $n+2$ 行一个整数 $P(0\\le P\\le 10)$。\n\n第 $n+3$ 行共 $P$ 个用空格隔开的整数，表示有宝藏的区域编号。", "outputFormat": "一个整数，为 Copy 获得全部宝藏需要的最短距离。数据保证答案小于等于 $2^{31}-1$。", "hint": "- 对 $30\\%$ 的数据，$1\\le n\\le 15$，其余如题所述。\n- 对 $100\\%$ 的数据，全部数据范围如题所述。", "locale": "zh-CN", "translations": {"en": {"title": "Greedy Copy", "background": "", "description": "Copy heard from Lu Niu that many treasures are buried in a divine land called yz, so Copy came to this land, which is divided into $n$ regions. Lu Niu told Copy that there are in total $P$ treasures, each placed in region $P_i$ ($1 \\le P_i \\le n$). Copy also learned the distance between every pair of regions. Now Copy starts from region $1$, wants to collect all treasures, and leave from region $n$. Copy is lazy, so he asks you to find a suitable route that minimizes the total distance he needs to travel.", "inputFormat": "- The first line contains a positive integer $n$ ($1 \\le n \\le 100$).\n- The next $n$ lines each contain $n$ integers; the number in row $i$, column $j$ denotes the distance from region $i$ to region $j$. The numbers are separated by spaces, and each distance is at most $1000$. Note that the distance $i \\to j$ is not necessarily equal to $j \\to i$.\n- The next line contains an integer $P$ ($0 \\le P \\le 10$).\n- The next line contains $P$ integers separated by spaces, denoting the indices of the regions that contain treasures.", "outputFormat": "Output a single integer: the minimum total distance for Copy to collect all treasures and then reach region $n$. The testdata guarantees that the answer is at most $2^{31} - 1$.", "hint": "- For $30\\%$ of the testdata, $1 \\le n \\le 15$; the rest are as stated.\n- For $100\\%$ of the testdata, all constraints are as stated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "贪婪的 Copy", "background": null, "description": "Copy 从卢牛那里听说在一片叫 yz 的神的领域埋藏着不少宝藏，于是 Copy 来到了这个被划分为 $n$ 个区域的神地。卢牛告诉了 Copy 这里共有 $n$ 个宝藏，分别放在第 $P_i$ 个 $(1\\le P_i\\le n)$ 区域。Copy 还得知了每个区域之间的距离。现在 Copy 从 $1$ 号区域出发，要获得所有的宝藏并到 $n$ 号区域离开。Copy 很懒，只好来找你为他寻找一条合适的线路，使得他走过的距离最短。", "inputFormat": "第一行一个正整数 $n(1\\le n\\le 100)$\n\n接下来一个 $n\\times n$ 的矩阵，第 $i+1$ 行第 $j$ 列的数字表示区域 $i,j$ 之间的距离。每个距离用空格隔开，距离保证 $i\\to j\\le 1000$。请注意的 $i \\to j$ 距离并不一定等于 $j\\to i$ 的距离。\n\n第 $n+2$ 行一个整数 $P(0\\le P\\le 10)$。\n\n第 $n+3$ 行共 $P$ 个用空格隔开的整数，表示有宝藏的区域编号。", "outputFormat": "一个整数，为 Copy 获得全部宝藏需要的最短距离。数据保证答案小于等于 $2^{31}-1$。", "hint": "- 对 $30\\%$ 的数据，$1\\le n\\le 15$，其余如题所述。\n- 对 $100\\%$ 的数据，全部数据范围如题所述。", "locale": "zh-CN"}}}
{"pid": "P1691", "type": "P", "difficulty": 6, "samples": [["5\n100 180 20\n30 60 30\n70 110 40\n10 40 50\n0 80 70", "200"], ["3\n50 60 10\n-42 -42 20\n25 0 10", "25"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2016", "ICPC", "WF"], "title": "[ICPC 2016 WF] Oil", "background": "", "description": "A large part of the world economy depends on oil, which is why research into new methods for finding\nand extracting oil is still active. Profits of oil companies depend in part on how efficiently they can\ndrill for oil. The International Crude Petroleum Consortium (ICPC) hopes that extensive computer\nsimulations will make it easier to determine how to drill oil wells in the best possible way.\n\nDrilling oil wells optimally is getting harder each day – the newly discovered oil deposits often do\nnot form a single body, but are split into many parts. The ICPC is currently concerned with stratified deposits, as illustrated in Figure G.1.\n\nTo simplify its analysis, the ICPC considers only the 2-dimensional case, where oil deposits are modeled\nas horizontal line segments parallel to the earth’s surface. The ICPC wants to know how to place a single\noil well to extract the maximum amount of oil. The oil well is drilled from the surface along a straight\nline and can extract oil from all deposits that it intersects on its way down, even if the intersection is at\nan endpoint of a deposit. One such well is shown as a dashed line in Figure G.1, hitting three deposits.\nIn this simple model the amount of oil contained in a deposit is equal to the width of the deposit. Can\nyou help the ICPC determine the maximum amount of oil that can be extracted by a single well?", "inputFormat": "The first line of input contains a single integer n ($1 ≤ n ≤ 2 000$), which is the number of oil deposits.\n\nThis is followed by $n$ lines, each describing a single deposit. These lines contain three integers $x_0$,\n$x_1$, and y giving the deposit’s position as the line segment with endpoints $(x_0, y)$ and $(x_1, y)$. These\nnumbers satisfy $|x_0|, |x_1| ≤ 10^6$\nand $1 ≤ y ≤ 10^6$\n. No two deposits will intersect, not even at a point.\n", "outputFormat": "Display the maximum amount of oil that can be extracted by a single oil well.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2016 WF] Oil", "background": "", "description": "A large part of the world economy depends on oil, which is why research into new methods for finding\nand extracting oil is still active. Profits of oil companies depend in part on how efficiently they can\ndrill for oil. The International Crude Petroleum Consortium (ICPC) hopes that extensive computer\nsimulations will make it easier to determine how to drill oil wells in the best possible way.\n\nDrilling oil wells optimally is getting harder each day – the newly discovered oil deposits often do\nnot form a single body, but are split into many parts. The ICPC is currently concerned with stratified deposits, as illustrated in Figure G.1.\n\nTo simplify its analysis, the ICPC considers only the 2-dimensional case, where oil deposits are modeled\nas horizontal line segments parallel to the earth’s surface. The ICPC wants to know how to place a single\noil well to extract the maximum amount of oil. The oil well is drilled from the surface along a straight\nline and can extract oil from all deposits that it intersects on its way down, even if the intersection is at\nan endpoint of a deposit. One such well is shown as a dashed line in Figure G.1, hitting three deposits.\nIn this simple model the amount of oil contained in a deposit is equal to the width of the deposit. Can\nyou help the ICPC determine the maximum amount of oil that can be extracted by a single well?", "inputFormat": "The first line of input contains a single integer n ($1 ≤ n ≤ 2 000$), which is the number of oil deposits.\n\nThis is followed by $n$ lines, each describing a single deposit. These lines contain three integers $x_0$,\n$x_1$, and y giving the deposit’s position as the line segment with endpoints $(x_0, y)$ and $(x_1, y)$. These\nnumbers satisfy $|x_0|, |x_1| ≤ 10^6$\nand $1 ≤ y ≤ 10^6$\n. No two deposits will intersect, not even at a point.\n", "outputFormat": "Display the maximum amount of oil that can be extracted by a single oil well.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2016 WF] Oil", "background": null, "description": "世界经济的很大一部分依赖于石油，这就是为什么对发现和开采石油的新方法的研究仍然活跃。石油公司的利润在一定程度上取决于他们能够多么有效地钻探石油。国际原油石油联盟（ICPC）希望通过广泛的计算机模拟来更容易地确定如何以最佳方式钻探油井。\n\n每天钻探油井变得越来越困难，因为新发现的油藏通常不是一个整体，而是分裂成许多部分。ICPC 目前关注的是分层沉积物。\n\n为了简化其分析，ICPC 只考虑二维情况，其中油藏被建模为与地球表面平行的水平线段。ICPC 想知道如何放置一个单独的油井以提取最大量的石油。油井沿着一条直线从地面钻井，并可以从其下降的路径上相交的所有沉积物中提取石油，即使相交点位于沉积物的端点处。图 G.1 中显示了一个这样的井，击中三个沉积物。在这个简单的模型中，一个沉积物中含有的石油量等于该沉积物的宽度。你能帮助 ICPC 确定通过一个单井可以提取的最大石油量吗？\n![](https://cdn.luogu.com.cn/upload/image_hosting/97ob9pkd.png)", "inputFormat": "输入的第一行包含一个整数 $n (1\\le n\\le 2000)$，表示油田的数量。\n\n接下来的 $n$ 行，每行描述一个沉积物。这些行包含三个整数 $x_0、x_1$ 和 $y$，表示沉积物的位置为线段，其端点为 $(x_0,y)$ 和 $(x_1,y)$。这些数字满足 $|x_0|,|x_1|≤10^6$。没有两个沉积物会相交，甚至不会在一点相交。", "outputFormat": "输出一个整数，表示单个油井可以提取的最大石油量。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1692", "type": "P", "difficulty": 3, "samples": [["7  10\n1  2\n1  4\n2  4\n2  3\n2  5\n2  6\n3  5\n3  6\n4  5\n5  6", "3\n1 0 1 0 0 0 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "洛谷原创"], "title": "部落卫队", "background": "", "description": "原始部落 byteland 中的居民们为了争夺有限的资源，经常发生冲突。几乎每个居民都有他的仇敌。部落酋长为了组织一支保卫部落的队伍，希望从部落的居民中选出最多的居民入伍，并保证队伍中任何 $2$ 个人都不是仇敌。\n\n给定 byteland 部落中居民间的仇敌关系，编程计算组成部落卫队的最佳方案。若有多种方案可行，输出字典序最大的方案。", "inputFormat": "第 $1$ 行有 $2$ 个正整数 $n$ 和 $m$，表示 byteland 部落中有 $n$ 个居民，居民间有 $m$ 个仇敌关系。居民编号为 $1,2, \\cdots ,n$。接下来的 $m$ 行中，每行有 $2$ 个正整数 $u$ 和 $v$，表示居民 $u$ 与居民 $v$ 是仇敌。", "outputFormat": "第 $1$ 行是部落卫队的人数；文件的第 $2$ 行是卫队组成 $x_i$，$1 \\le i \\le n$，$x_i=0$ 表示居民 $i$ 不在卫队中，$x_i=1$ 表示居民 $i$ 在卫队中。", "hint": "对于 $60\\%$ 数据：$n \\le 20$，$m \\le 100$。\n\n对于所有数据：$n \\le 100,m \\le 3000$。数据从所有合法数据从随机均匀取样。", "locale": "zh-CN", "translations": {"en": {"title": "Tribal Guard", "background": "", "description": "In the primitive Byteland tribe, residents often clash over limited resources. Almost every resident has enemies. To organize a force to defend the tribe, the chief wants to select as many residents as possible so that no two selected people are enemies.\n\nGiven the enmity relations among residents of the Byteland tribe, compute the optimal composition of the tribal guard. If multiple solutions are feasible, output the lexicographically largest one.", "inputFormat": "The first line contains two positive integers $n$ and $m$, indicating that there are $n$ residents in the Byteland tribe and $m$ enmity relations. Residents are numbered $1,2,\\cdots,n$. Each of the next $m$ lines contains two positive integers $u$ and $v$, indicating that residents $u$ and $v$ are enemies.", "outputFormat": "The first line is the number of people in the tribal guard. The second line contains the composition $x_i$, $1 \\le i \\le n$, where $x_i = 0$ means resident $i$ is not in the guard, and $x_i = 1$ means resident $i$ is in the guard.", "hint": "For $60\\%$ of the testdata: $n \\le 20$, $m \\le 100$.\n\nFor all testdata: $n \\le 100$, $m \\le 3000$. The testdata are uniformly sampled at random from all valid instances.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "部落卫队", "background": "", "description": "原始部落 byteland 中的居民们为了争夺有限的资源，经常发生冲突。几乎每个居民都有他的仇敌。部落酋长为了组织一支保卫部落的队伍，希望从部落的居民中选出最多的居民入伍，并保证队伍中任何 $2$ 个人都不是仇敌。\n\n给定 byteland 部落中居民间的仇敌关系，编程计算组成部落卫队的最佳方案。若有多种方案可行，输出字典序最大的方案。", "inputFormat": "第 $1$ 行有 $2$ 个正整数 $n$ 和 $m$，表示 byteland 部落中有 $n$ 个居民，居民间有 $m$ 个仇敌关系。居民编号为 $1,2, \\cdots ,n$。接下来的 $m$ 行中，每行有 $2$ 个正整数 $u$ 和 $v$，表示居民 $u$ 与居民 $v$ 是仇敌。", "outputFormat": "第 $1$ 行是部落卫队的人数；文件的第 $2$ 行是卫队组成 $x_i$，$1 \\le i \\le n$，$x_i=0$ 表示居民 $i$ 不在卫队中，$x_i=1$ 表示居民 $i$ 在卫队中。", "hint": "对于 $60\\%$ 数据：$n \\le 20$，$m \\le 100$。\n\n对于所有数据：$n \\le 100,m \\le 3000$。数据从所有合法数据从随机均匀取样。", "locale": "zh-CN"}}}
{"pid": "P1693", "type": "P", "difficulty": 2, "samples": [["4 7 9", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "O2优化", "排序", "分类讨论"], "title": "[USACO19FEB] Sleepy Cow Herding B", "background": "", "description": "Farmer John 的三头获奖奶牛 Bessie、Elsie 和 Mildred，总是会迷路走到农场上遥远的地方去！他需要你帮助将她们一起赶回来。\n\n农场的草地大体是一块狭长的区域——我们可以将其想象成一条数轴，奶牛可以占据数轴上的任意整数位置。这 $3$ 头奶牛现在正位于不同的整数位置，Farmer John 想要移动她们，使得她们占据三个相邻的位置（例如，位置 $6$、$7$、$8$）。\n\n不幸的是，奶牛们现在很困，Farmer John 要让她们集中精力听从命令移动并不容易。任意时刻，他只能使得一头处在“端点”（在所有奶牛中位置最小或最大）位置的奶牛移动。当他移动奶牛时，他可以命令她走到任意一个未被占用的整数位置，只要在新的位置上她不再是一个端点。可以看到随着时间的推移，这样的移动可以使奶牛们趋向越来越近。\n\n请求出使得奶牛们集中到相邻位置所进行的移动次数的最小和最大可能值。 ", "inputFormat": "输入包含一行，包括三个空格分隔的整数，为 Bessie、Elsie 和 Mildred 的位置。每个位置均为一个范围 $1\\ldots 10^9$ 内的整数。 ", "outputFormat": "输出的第一行包含 Farmer John 需要将奶牛们聚集起来所需进行的最小移动次数。第二行包含他将奶牛聚集起来能够进行的最大移动次数。", "hint": "### 样例解释 1\n\n最小移动次数为 $1$——如果 Farmer John 将位置 $4$ 的奶牛移动到位置 $8$，那么奶牛们就处在连续的位置 $7$、$8$、$9$。最大移动次数为 $2$。例如，位置 $9$ 的奶牛可以被移动到位置 $6$，然后位置 $7$ 的奶牛可以被移动到位置 $5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19FEB] Sleepy Cow Herding B", "background": "", "description": "Farmer John 的三头获奖奶牛 Bessie、Elsie 和 Mildred，总是会迷路走到农场上遥远的地方去！他需要你帮助将她们一起赶回来。\n\n农场的草地大体是一块狭长的区域——我们可以将其想象成一条数轴，奶牛可以占据数轴上的任意整数位置。这 $3$ 头奶牛现在正位于不同的整数位置，Farmer John 想要移动她们，使得她们占据三个相邻的位置（例如，位置 $6$、$7$、$8$）。\n\n不幸的是，奶牛们现在很困，Farmer John 要让她们集中精力听从命令移动并不容易。任意时刻，他只能使得一头处在“端点”（在所有奶牛中位置最小或最大）位置的奶牛移动。当他移动奶牛时，他可以命令她走到任意一个未被占用的整数位置，只要在新的位置上她不再是一个端点。可以看到随着时间的推移，这样的移动可以使奶牛们趋向越来越近。\n\n请求出使得奶牛们集中到相邻位置所进行的移动次数的最小和最大可能值。 ", "inputFormat": "输入包含一行，包括三个空格分隔的整数，为 Bessie、Elsie 和 Mildred 的位置。每个位置均为一个范围 $1\\ldots 10^9$ 内的整数。 ", "outputFormat": "输出的第一行包含 Farmer John 需要将奶牛们聚集起来所需进行的最小移动次数。第二行包含他将奶牛聚集起来能够进行的最大移动次数。", "hint": "### 样例解释 1\n\n最小移动次数为 $1$——如果 Farmer John 将位置 $4$ 的奶牛移动到位置 $8$，那么奶牛们就处在连续的位置 $7$、$8$、$9$。最大移动次数为 $2$。例如，位置 $9$ 的奶牛可以被移动到位置 $6$，然后位置 $7$ 的奶牛可以被移动到位置 $5$。", "locale": "zh-CN"}}}
{"pid": "P1694", "type": "P", "difficulty": 3, "samples": [["5 6\n4 1\n4 2\n4 3\n2 5\n1 2\n1 5", "12133"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2019", "USACO", "O2优化"], "title": "[USACO19FEB] The Great Revegetation B", "background": "", "description": "长时间的干旱使得 Farmer John 的 $N$ 块草地上牧草匮乏。随着雨季即将到来，现在应当是重新种植的时候了。\n\n在 Farmer John 的储物棚里有四个桶，每个桶里装着一种不同的草种。他想要在每块草地上播种其中一种草。作为一名奶农，Farmer John 想要确保他的每头奶牛都能得到丰富的食谱。他的 $M$ 头奶牛每一头都有两块喜爱的草地，他想要确保这两块草地种植不同种类的草，从而每头奶牛都可以有两种草可供选择。Farmer John 知道没有一块草地受到多于 $3$ 头奶牛的喜爱。\n\n请帮助 Farmer John 选择每块草地所种的草的种类，使得所有奶牛的营养需求都得到满足。 ", "inputFormat": "输入的第一行包含 $2 \\leq N \\leq 100$ 和 $1 \\leq M \\leq 150$。以下 $M$ 行，每行包含两个范围为 $1 \\dots N$ 的整数，为 Farmer John 的一头奶牛喜欢的两块草地。", "outputFormat": "输出一个 $N$ 位数，每一位均为 $1\\ldots 4$ 之一，表示每一块草地上所种的草的种类。第一位对应草地 $1$ 的草的种类，第二位对应草地 $2$，以此类推。如果有多种可行的解，只需输出所有解中最小的 $N$ 位数。 ", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19FEB] The Great Revegetation B", "background": "", "description": "长时间的干旱使得 Farmer John 的 $N$ 块草地上牧草匮乏。随着雨季即将到来，现在应当是重新种植的时候了。\n\n在 Farmer John 的储物棚里有四个桶，每个桶里装着一种不同的草种。他想要在每块草地上播种其中一种草。作为一名奶农，Farmer John 想要确保他的每头奶牛都能得到丰富的食谱。他的 $M$ 头奶牛每一头都有两块喜爱的草地，他想要确保这两块草地种植不同种类的草，从而每头奶牛都可以有两种草可供选择。Farmer John 知道没有一块草地受到多于 $3$ 头奶牛的喜爱。\n\n请帮助 Farmer John 选择每块草地所种的草的种类，使得所有奶牛的营养需求都得到满足。 ", "inputFormat": "输入的第一行包含 $2 \\leq N \\leq 100$ 和 $1 \\leq M \\leq 150$。以下 $M$ 行，每行包含两个范围为 $1 \\dots N$ 的整数，为 Farmer John 的一头奶牛喜欢的两块草地。", "outputFormat": "输出一个 $N$ 位数，每一位均为 $1\\ldots 4$ 之一，表示每一块草地上所种的草的种类。第一位对应草地 $1$ 的草的种类，第二位对应草地 $2$，以此类推。如果有多种可行的解，只需输出所有解中最小的 $N$ 位数。 ", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1695", "type": "P", "difficulty": 2, "samples": [["4\non 1 1\nnone 10 14\nnone 11 15\noff 2 3", "10 13\n8 12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2019", "USACO", "O2优化"], "title": "[USACO19FEB] Measuring Traffic B", "background": "", "description": "Farmer John 的农场边上的高速公路最近出现了引人注目的流量上升，或者至少 Farmer John 看起来是这样的。为了证实这件事，他打算用一组传感器测量公路上的车流量，每个传感器被用来测量一小段路面上的车流量的数值。\n\n不幸的是，某一天经过牛棚的时候，Farmer John 被绊倒了，装有传感器的盒子掉进了一个巨大的奶缸，之后它们就不能正常工作了。比起之前可以产生一个精确的车流量读数，现在每个传感器只能输出一个可能结果的范围。例如，一个传感器可能会给出范围 $[7,13]$，表示在这段路面上的车流量不小于 $7$，并且不大于 $13$。\n\n高速公路经过农场的这一段长 $N$ 英里，车辆仅从一个方向通过公路，从第 $1$ 英里驶向第 $N$ 英里。Farmer John 想要安装 $N$ 个传感器——每一个监测高速公路上 $1$ 英里长的路段。在其中某些路段上，有能够使得车辆进入高速公路的上匝道；在所有这样的路段上，Farmer John 会将传感器装在上匝道上，测量流入的（近似）车流量。在某些路段上有能够使得车辆离开高速公路的下匝道；在所有这样的路段上，Farmer John 会将传感器装在下匝道上。每一个路段包含至多一个匝道。如果在公路的一个路段上没有上匝道或下匝道，Farmer John就将传感器装在高速公路的主路上。\n\n给定 Farmer John 的 $N$ 个传感器的读数，请求出在高速公路第 $1$ 英里之前和第 $N$ 英里之后车流量的最为准确的可能范围。这些范围应当与所有 $N$ 个传感器的读数相一致。 ", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 100$）。余下 $N$ 行每行按从第 $1$ 英里至第 $N$ 英里的顺序描述一段 $1$ 英里长的路段。每行包含一个字符串，为 `on`（如果这段路上有一个上匝道），`off`（如果这段路上有一个下匝道），或者是 `none`（如果这段路上没有匝道），然后是两个范围为 $0\\ldots 1000$ 的整数，表示这段路上的传感器的读数所给出的下界、上界。如果这段路上包含匝道，传感器读数来自于匝道，否则来自于主路。至少一个高速公路路段的描述会是 `none`。", "outputFormat": "输出的第一行包含两个整数，为第 $1$ 英里之前的车流量的最准确的可能范围。第二行包含两个整数，为第 $N$ 英里之后的车流量的最准确的可能范围。输入保证存在符合要求的解。 ", "hint": "### 样例解释 1\n\n在这个例子中，路段 $2$ 和路段 $3$ 的读数组合在一起告诉我们通过这两个路段的车流量为范围 $[11,14]$ 之间的某个值，因为只有这个范围与两个读数 $[10,14]$ 和 $[11,15]$ 均一致。在第 $1$ 英里，恰有 $1$ 单位的车辆通过上匝道进入，所以在第 $1$ 英里之前，车流量一定在范围 $[10,13]$ 之内。在第 $4$ 英里，$2$ 单位到 $3$ 单位之间的车辆通过下匝道离开，所以这段路之后可能的车流量范围为 $[8,12]$。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19FEB] Measuring Traffic B", "background": "", "description": "Farmer John 的农场边上的高速公路最近出现了引人注目的流量上升，或者至少 Farmer John 看起来是这样的。为了证实这件事，他打算用一组传感器测量公路上的车流量，每个传感器被用来测量一小段路面上的车流量的数值。\n\n不幸的是，某一天经过牛棚的时候，Farmer John 被绊倒了，装有传感器的盒子掉进了一个巨大的奶缸，之后它们就不能正常工作了。比起之前可以产生一个精确的车流量读数，现在每个传感器只能输出一个可能结果的范围。例如，一个传感器可能会给出范围 $[7,13]$，表示在这段路面上的车流量不小于 $7$，并且不大于 $13$。\n\n高速公路经过农场的这一段长 $N$ 英里，车辆仅从一个方向通过公路，从第 $1$ 英里驶向第 $N$ 英里。Farmer John 想要安装 $N$ 个传感器——每一个监测高速公路上 $1$ 英里长的路段。在其中某些路段上，有能够使得车辆进入高速公路的上匝道；在所有这样的路段上，Farmer John 会将传感器装在上匝道上，测量流入的（近似）车流量。在某些路段上有能够使得车辆离开高速公路的下匝道；在所有这样的路段上，Farmer John 会将传感器装在下匝道上。每一个路段包含至多一个匝道。如果在公路的一个路段上没有上匝道或下匝道，Farmer John就将传感器装在高速公路的主路上。\n\n给定 Farmer John 的 $N$ 个传感器的读数，请求出在高速公路第 $1$ 英里之前和第 $N$ 英里之后车流量的最为准确的可能范围。这些范围应当与所有 $N$ 个传感器的读数相一致。 ", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 100$）。余下 $N$ 行每行按从第 $1$ 英里至第 $N$ 英里的顺序描述一段 $1$ 英里长的路段。每行包含一个字符串，为 `on`（如果这段路上有一个上匝道），`off`（如果这段路上有一个下匝道），或者是 `none`（如果这段路上没有匝道），然后是两个范围为 $0\\ldots 1000$ 的整数，表示这段路上的传感器的读数所给出的下界、上界。如果这段路上包含匝道，传感器读数来自于匝道，否则来自于主路。至少一个高速公路路段的描述会是 `none`。", "outputFormat": "输出的第一行包含两个整数，为第 $1$ 英里之前的车流量的最准确的可能范围。第二行包含两个整数，为第 $N$ 英里之后的车流量的最准确的可能范围。输入保证存在符合要求的解。 ", "hint": "### 样例解释 1\n\n在这个例子中，路段 $2$ 和路段 $3$ 的读数组合在一起告诉我们通过这两个路段的车流量为范围 $[11,14]$ 之间的某个值，因为只有这个范围与两个读数 $[10,14]$ 和 $[11,15]$ 均一致。在第 $1$ 英里，恰有 $1$ 单位的车辆通过上匝道进入，所以在第 $1$ 英里之前，车流量一定在范围 $[10,13]$ 之内。在第 $4$ 英里，$2$ 单位到 $3$ 单位之间的车辆通过下匝道离开，所以这段路之后可能的车流量范围为 $[8,12]$。 ", "locale": "zh-CN"}}}
{"pid": "P1696", "type": "P", "difficulty": 2, "samples": [["2 1 7 4\n5 -1 10 3", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2018", "USACO", "O2优化"], "title": "[USACO18JAN] Blocked Billboard II B", "background": "", "description": "Bessie the cow used to have such a nice view from her barn, looking across road at a set of two billboards advertising delicious looking cow feed. Unfortunately, one of these billboards has recently been updated so it now advertises \"Farmer Larry's Lawnmowers\". Bessie is not a fan of lawnmowers since their only purpose, as far as she can tell, is cutting back the grass in her field that she finds so tasty (if you haven't noticed, much of Bessie's thought process revolves around food).\n\nFortunately, the remaining cow feed billboard is situated in front of the lawnmower billboard, potentially obscuring it.\n\nBessie, determined to remove the offensive lawnmower billboard completely from her view, hatches a risky plan. She plans to steal a large rectangular tarp from the barn and sneak out late at night to cover the remaining portion of the lawnmower billboard, so that she can no longer see any part of it.\n\nGiven the locations of the two billboards, please help Bessie compute the minimum area of the tarp she will need. Since the only tarps available in the barn are rectangular in size, Bessie observes that she may conceivably need a tarp whose area is slightly larger than the exposed area of the lawnmower billboard, as illustrated in the example below. The tarp may only be placed such that its sides are parallel to those of the other billboards (i.e., it cannot be \"tilted\"). ", "inputFormat": "The first line of input contains four space-separated integers: $x_1,y_1,x_2,y_2$, where $(x_1,y_1)$ and $(x_2,y_2)$ are the coordinates of the lower-left and upper-right corners of the lawnmower billboard in Bessie's 2D field of view. The next line contains four more integers, similarly specifying the lower-left and upper-right corners of the cow feed billboard. The cow feed billboard may obscure all, some, or none of the lawnmower billboard. All coordinates are in the range $-1000$ to $+1000$. ", "outputFormat": " Please output the minimum area of the tarp Bessie needs to use to cover part of the lawnmower billboard so that it becomes completely obscured. ", "hint": "### Sample Explanation 1\n\nHere, the cow feed billboard obscures the lower right corner of the lawnmower billboard, but this doesn't really help, since Bessie still needs to use a tarp whose size is as large as the entire lawnmower billboard. ", "locale": "en", "translations": {"en": {"title": "[USACO18JAN] Blocked Billboard II B", "background": "", "description": "Bessie the cow used to have such a nice view from her barn, looking across road at a set of two billboards advertising delicious looking cow feed. Unfortunately, one of these billboards has recently been updated so it now advertises \"Farmer Larry's Lawnmowers\". Bessie is not a fan of lawnmowers since their only purpose, as far as she can tell, is cutting back the grass in her field that she finds so tasty (if you haven't noticed, much of Bessie's thought process revolves around food).\n\nFortunately, the remaining cow feed billboard is situated in front of the lawnmower billboard, potentially obscuring it.\n\nBessie, determined to remove the offensive lawnmower billboard completely from her view, hatches a risky plan. She plans to steal a large rectangular tarp from the barn and sneak out late at night to cover the remaining portion of the lawnmower billboard, so that she can no longer see any part of it.\n\nGiven the locations of the two billboards, please help Bessie compute the minimum area of the tarp she will need. Since the only tarps available in the barn are rectangular in size, Bessie observes that she may conceivably need a tarp whose area is slightly larger than the exposed area of the lawnmower billboard, as illustrated in the example below. The tarp may only be placed such that its sides are parallel to those of the other billboards (i.e., it cannot be \"tilted\"). ", "inputFormat": "The first line of input contains four space-separated integers: $x_1,y_1,x_2,y_2$, where $(x_1,y_1)$ and $(x_2,y_2)$ are the coordinates of the lower-left and upper-right corners of the lawnmower billboard in Bessie's 2D field of view. The next line contains four more integers, similarly specifying the lower-left and upper-right corners of the cow feed billboard. The cow feed billboard may obscure all, some, or none of the lawnmower billboard. All coordinates are in the range $-1000$ to $+1000$. ", "outputFormat": " Please output the minimum area of the tarp Bessie needs to use to cover part of the lawnmower billboard so that it becomes completely obscured. ", "hint": "### Sample Explanation 1\n\nHere, the cow feed billboard obscures the lower right corner of the lawnmower billboard, but this doesn't really help, since Bessie still needs to use a tarp whose size is as large as the entire lawnmower billboard. ", "locale": "en"}, "zh-CN": {"title": "[USACO18JAN] Blocked Billboard II B", "background": "", "description": "奶牛 Bessie 曾经在她的谷仓里拥有如此美好的视野，可以看到马路对面两块广告牌，广告牌上宣传着看起来美味的牛饲料。不幸的是，其中一个广告牌最近更新了，现在宣传的是「农夫 Larry 的割草机」。Bessie 对割草机并不感兴趣，因为据她所知，割草机的唯一用途就是割掉她田里那些她觉得美味的草（如果你还没有注意到，Bessie 的思维过程大多围绕着食物）。\n\n幸运的是，剩下的牛饲料广告牌位于割草机广告牌的前面，可能会遮挡它。\n\nBessie 决心要完全从她的视野中移除这个令人讨厌的割草机广告牌，于是她想出了一个冒险的计划。她计划从谷仓里偷一块大矩形防水布，然后在深夜偷偷溜出去，盖住割草机广告牌的剩余部分，这样她就再也看不到它的任何部分了。\n\n给定两个广告牌的位置，请帮助 Bessie 计算她需要的最小防水布面积。由于谷仓里只有矩形大小的防水布，Bessie 观察到她可能需要一块面积稍大于割草机广告牌暴露面积的防水布，如下例所示。防水布只能放置在其边与其他广告牌的边平行的位置（即不能「倾斜」）。", "inputFormat": "输入的第一行包含四个用空格分隔的整数：$x_1, y_1, x_2, y_2$，其中 $(x_1, y_1)$ 和 $(x_2, y_2)$ 是 Bessie 的二维视野中割草机广告牌的左下角和右上角的坐标。下一行包含四个整数，同样指定牛饲料广告牌的左下角和右上角的坐标。牛饲料广告牌可能遮挡割草机广告牌的全部、部分或没有。所有坐标的范围是 $-1000$ 到 $+1000$。", "outputFormat": "请输出 Bessie 需要使用的防水布的最小面积，以覆盖割草机广告牌的部分，使其完全被遮挡。", "hint": "### 示例解释 1\n\n在这里，牛饲料广告牌遮挡了割草机广告牌的右下角，但这并没有真正帮助，因为 Bessie 仍然需要使用一块大小与整个割草机广告牌一样大的防水布。（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P1697", "type": "P", "difficulty": 1, "samples": [["3\n5 9\n1 4\n3 7", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2018", "USACO", "O2优化"], "title": "[USACO18JAN] Lifeguards B", "background": "本题翻译来自 deepseek-v3。", "description": "Farmer John 为他的奶牛们开设了一个游泳池，认为这将帮助它们放松并产更多的奶。\n\n为了确保安全，他雇佣了 $N$ 头奶牛作为救生员，每头奶牛的班次覆盖一天中的某个连续时间段。为简单起见，游泳池每天从时间 $t=0$ 开放到时间 $t=1000$，因此每个班次可以用两个整数描述，分别表示奶牛开始和结束其班次的时间。例如，一头救生员从时间 $t=4$ 开始到时间 $t=7$ 结束，覆盖了 $3$ 个单位的时间（注意端点表示时间点）。\n\n不幸的是，Farmer John 多雇佣了 $1$ 名救生员，超出了他的资金支持范围。鉴于他必须解雇恰好 $1$ 名救生员，剩下的救生员的班次能够覆盖的最长时间是多少？如果至少有一名救生员在场，则某个时间段被视为被覆盖。", "inputFormat": "输入的第一行包含 $N$（$1 \\leq N \\leq 100$）。接下来的 $N$ 行每行描述一名救生员，用两个范围在 $0 \\ldots 1000$ 的整数表示该救生员班次的开始和结束时间。所有端点都是唯一的。不同救生员的班次可能会重叠。", "outputFormat": "请输出一个数字，表示如果 Farmer John 解雇 $1$ 名救生员后，剩下的救生员的班次能够覆盖的最长时间。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18JAN] Lifeguards B", "background": "本题翻译来自 deepseek-v3。", "description": "Farmer John 为他的奶牛们开设了一个游泳池，认为这将帮助它们放松并产更多的奶。\n\n为了确保安全，他雇佣了 $N$ 头奶牛作为救生员，每头奶牛的班次覆盖一天中的某个连续时间段。为简单起见，游泳池每天从时间 $t=0$ 开放到时间 $t=1000$，因此每个班次可以用两个整数描述，分别表示奶牛开始和结束其班次的时间。例如，一头救生员从时间 $t=4$ 开始到时间 $t=7$ 结束，覆盖了 $3$ 个单位的时间（注意端点表示时间点）。\n\n不幸的是，Farmer John 多雇佣了 $1$ 名救生员，超出了他的资金支持范围。鉴于他必须解雇恰好 $1$ 名救生员，剩下的救生员的班次能够覆盖的最长时间是多少？如果至少有一名救生员在场，则某个时间段被视为被覆盖。", "inputFormat": "输入的第一行包含 $N$（$1 \\leq N \\leq 100$）。接下来的 $N$ 行每行描述一名救生员，用两个范围在 $0 \\ldots 1000$ 的整数表示该救生员班次的开始和结束时间。所有端点都是唯一的。不同救生员的班次可能会重叠。", "outputFormat": "请输出一个数字，表示如果 Farmer John 解雇 $1$ 名救生员后，剩下的救生员的班次能够覆盖的最长时间。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1698", "type": "P", "difficulty": 2, "samples": [["6\n2\n4\n7\n7\n9\n3", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "USACO", "O2优化", "排序"], "title": "[USACO18JAN] Out of Place B", "background": "本题翻译来自于 deepseek-v3。", "description": "Farmer John 雄心勃勃，计划尝试一件似乎从未顺利过的事情：他想为他的整个牛群拍一张照片。\n\n为了让照片看起来更美观，他希望奶牛们从矮到高排成一行。不幸的是，就在他让奶牛们按这种方式排好队后，总是捣乱的 Bessie 走出了队伍，并重新插入到队伍中的某个位置！\n\nFarmer John 希望通过交换奶牛对的方式让整个牛群重新排好队。请帮助他确定为了实现这一目标，他需要进行的最少交换次数。", "inputFormat": "输入的第一行包含 $N$（$2 \\leq N \\leq 100$）。接下来的 $N$ 行描述了 Bessie 捣乱后奶牛们的身高。每头奶牛的身高是一个范围在 $1 \\ldots 1,000,000$ 的整数。奶牛的身高可能相同。\n", "outputFormat": "请输出 Farmer John 需要交换奶牛对的最少次数，以实现正确的排序。交换不一定需要涉及相邻的奶牛。", "hint": "在这个例子中，Bessie 显然是身高为 $3$ 的奶牛。Farmer John 通过以下三次交换将奶牛们重新排序：\n\n2 4 7 7 9 3 - 原始队伍  \n2 4 7 7 3 9 - 交换最后两头奶牛  \n2 4 3 7 7 9 - 交换第一个 $7$ 和 $3$  \n2 3 4 7 7 9 - 交换 $4$ 和 $3$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18JAN] Out of Place B", "background": "本题翻译来自于 deepseek-v3。", "description": "Farmer John 雄心勃勃，计划尝试一件似乎从未顺利过的事情：他想为他的整个牛群拍一张照片。\n\n为了让照片看起来更美观，他希望奶牛们从矮到高排成一行。不幸的是，就在他让奶牛们按这种方式排好队后，总是捣乱的 Bessie 走出了队伍，并重新插入到队伍中的某个位置！\n\nFarmer John 希望通过交换奶牛对的方式让整个牛群重新排好队。请帮助他确定为了实现这一目标，他需要进行的最少交换次数。", "inputFormat": "输入的第一行包含 $N$（$2 \\leq N \\leq 100$）。接下来的 $N$ 行描述了 Bessie 捣乱后奶牛们的身高。每头奶牛的身高是一个范围在 $1 \\ldots 1,000,000$ 的整数。奶牛的身高可能相同。\n", "outputFormat": "请输出 Farmer John 需要交换奶牛对的最少次数，以实现正确的排序。交换不一定需要涉及相邻的奶牛。", "hint": "在这个例子中，Bessie 显然是身高为 $3$ 的奶牛。Farmer John 通过以下三次交换将奶牛们重新排序：\n\n2 4 7 7 9 3 - 原始队伍  \n2 4 7 7 3 9 - 交换最后两头奶牛  \n2 4 3 7 7 9 - 交换第一个 $7$ 和 $3$  \n2 3 4 7 7 9 - 交换 $4$ 和 $3$", "locale": "zh-CN"}}}
{"pid": "P1699", "type": "P", "difficulty": 2, "samples": [["..........\n..........\n..........\n..B.......\n..........\n.....R....\n..........\n..........\n.....L....\n..........", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "O2优化", "广度优先搜索 BFS", "分类讨论"], "title": "[USACO19OPEN] Bucket Brigade B", "background": "", "description": "农场上起火了，奶牛们正在紧急赶去灭火！\n\n农场可以用一个像这样的 $10×10$ 的字符方阵来描述：\n\n```plain\n..........\n..........\n..........\n..B.......\n..........\n.....R....\n..........\n..........\n.....L....\n..........\n```\n\n字符 `B` 表示正着火的牛棚。字符 `L` 表示一个湖，而字符 `R` 表示农场上的一块巨大岩石。\n\n奶牛们想要沿着一条湖到牛棚之间的路径组成一条“水桶传递队列”，这样她们就可以沿着这条路径传递水桶来帮助灭火。当两头奶牛在东南西北四个方向上相邻时水桶可以在她们之间传递。这对于湖边的奶牛也是对的——奶牛只能在紧挨着湖的时候才能用水桶从湖里取水。类似地，奶牛只能在紧挨着牛棚的时候才能用水去灭牛棚的火。 \n\n请帮助求出奶牛们为了组成这样的“水桶传递队列”需要占据的 `.` 格子的最小数量。\n\n奶牛不能站在岩石所在的方格之内，此外保证牛棚和湖不是相邻的。 ", "inputFormat": "输入包含 $10$ 行，每行 $10$ 个字符，描述这个农场的布局。输入保证图案中恰有一个字符 `B`、一个字符 `L` 以及一个字符 `R`。 ", "outputFormat": "输出一个整数，为组成一条可行的水桶传递队列所需要的奶牛的最小数量。 ", "hint": "### 样例解释 1\n\n在这个例子中，以下是一个可行的方案，使用了最小数量的奶牛（$7$）：\n\n```plain\n..........\n..........\n..........\n..B.......\n..C.......\n..CC.R....\n...CCC....\n.....C....\n.....L....\n..........\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19OPEN] Bucket Brigade B", "background": "", "description": "农场上起火了，奶牛们正在紧急赶去灭火！\n\n农场可以用一个像这样的 $10×10$ 的字符方阵来描述：\n\n```plain\n..........\n..........\n..........\n..B.......\n..........\n.....R....\n..........\n..........\n.....L....\n..........\n```\n\n字符 `B` 表示正着火的牛棚。字符 `L` 表示一个湖，而字符 `R` 表示农场上的一块巨大岩石。\n\n奶牛们想要沿着一条湖到牛棚之间的路径组成一条“水桶传递队列”，这样她们就可以沿着这条路径传递水桶来帮助灭火。当两头奶牛在东南西北四个方向上相邻时水桶可以在她们之间传递。这对于湖边的奶牛也是对的——奶牛只能在紧挨着湖的时候才能用水桶从湖里取水。类似地，奶牛只能在紧挨着牛棚的时候才能用水去灭牛棚的火。 \n\n请帮助求出奶牛们为了组成这样的“水桶传递队列”需要占据的 `.` 格子的最小数量。\n\n奶牛不能站在岩石所在的方格之内，此外保证牛棚和湖不是相邻的。 ", "inputFormat": "输入包含 $10$ 行，每行 $10$ 个字符，描述这个农场的布局。输入保证图案中恰有一个字符 `B`、一个字符 `L` 以及一个字符 `R`。 ", "outputFormat": "输出一个整数，为组成一条可行的水桶传递队列所需要的奶牛的最小数量。 ", "hint": "### 样例解释 1\n\n在这个例子中，以下是一个可行的方案，使用了最小数量的奶牛（$7$）：\n\n```plain\n..........\n..........\n..........\n..B.......\n..C.......\n..CC.R....\n...CCC....\n.....C....\n.....L....\n..........\n```", "locale": "zh-CN"}}}
{"pid": "P1700", "type": "P", "difficulty": 2, "samples": [["3\n1 2\n3 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "图论", "2019", "USACO", "O2优化", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[USACO19OPEN] Milk Factory B", "background": "", "description": "牛奶生意正红红火火！Farmer John 的牛奶加工厂内有 $N$ 个加工站，编号为 $1\\dots N$（$1\\le N\\le 100$），以及 $N−1$ 条通道，每条连接某两个加工站。（通道建设很昂贵，所以 Farmer John 选择使用了最小数量的通道，使得从每个加工站出发都可以到达所有其他加工站）。\n\n为了创新和提升效率，Farmer John 在每条通道上安装了传送带。不幸的是，当他意识到传送带是单向的已经太晚了，现在每条通道只能沿着一个方向通行了！所以现在的情况不再是从每个加工站出发都能够到达其他加工站了。\n\n然而，Farmer John 认为事情可能还不算完全失败，只要至少还存在一个加工站 $i$ 满足从其他每个加工站出发都可以到达加工站 $i$。注意从其他任意一个加工站 $j$ 前往加工站 $i$ 可能会经过 $i$ 和 $j$ 之间的一些中间站点。请帮助 Farmer John 求出是否存在这样的加工站 $i$。", "inputFormat": "输入的第一行包含一个整数 $N$，为加工站的数量。以下 $N−1$ 行每行包含两个空格分隔的整数 $a_i$ 和 $b_i$，满足 $1\\le a_i,b_i\\le N$ 以及 $a_i\\neq b_i$。这表示有一条从加工站 $a_i$ 向加工站 $b_i$ 移动的传送带，仅允许沿从 $a_i$ 到 $b_i$ 的方向移动。", "outputFormat": "如果存在加工站 $i$ 满足可以从任意其他加工站出发都可以到达加工站 $i$，输出最小的满足条件的 $i$。否则，输出 $−1$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19OPEN] Milk Factory B", "background": "", "description": "牛奶生意正红红火火！Farmer John 的牛奶加工厂内有 $N$ 个加工站，编号为 $1\\dots N$（$1\\le N\\le 100$），以及 $N−1$ 条通道，每条连接某两个加工站。（通道建设很昂贵，所以 Farmer John 选择使用了最小数量的通道，使得从每个加工站出发都可以到达所有其他加工站）。\n\n为了创新和提升效率，Farmer John 在每条通道上安装了传送带。不幸的是，当他意识到传送带是单向的已经太晚了，现在每条通道只能沿着一个方向通行了！所以现在的情况不再是从每个加工站出发都能够到达其他加工站了。\n\n然而，Farmer John 认为事情可能还不算完全失败，只要至少还存在一个加工站 $i$ 满足从其他每个加工站出发都可以到达加工站 $i$。注意从其他任意一个加工站 $j$ 前往加工站 $i$ 可能会经过 $i$ 和 $j$ 之间的一些中间站点。请帮助 Farmer John 求出是否存在这样的加工站 $i$。", "inputFormat": "输入的第一行包含一个整数 $N$，为加工站的数量。以下 $N−1$ 行每行包含两个空格分隔的整数 $a_i$ 和 $b_i$，满足 $1\\le a_i,b_i\\le N$ 以及 $a_i\\neq b_i$。这表示有一条从加工站 $a_i$ 向加工站 $b_i$ 移动的传送带，仅允许沿从 $a_i$ 到 $b_i$ 的方向移动。", "outputFormat": "如果存在加工站 $i$ 满足可以从任意其他加工站出发都可以到达加工站 $i$，输出最小的满足条件的 $i$。否则，输出 $−1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1701", "type": "P", "difficulty": 3, "samples": [["4\n2 spots firebreathing\n0\n1 flying\n2 telepathic flying", "yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "O2优化", "树的遍历"], "title": "[USACO19OPEN] Cow Evolution B", "background": "", "description": "现在是 3019 年，在过去的一千年里发生了不计其数的牛类进化，产生了具有各种有趣特性的奶牛。\n\n牛类进化的记录可以用一棵树来表示，起源是位于树根位置的没有特殊特性的奶牛。树上每一个产生后代的结点，有可能所有的奶牛都进化出了一种新的特性（比如说喷火（fire breathing），如下图所示，其中所有斑点（spots）奶牛最后都能喷火），或者是奶牛种群产生了分支进化，其中有些进化出了新的特性（比如，飞（flying）），有的没有。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q7v0zhg4.png)\n\n树底部的叶结点表示 3019 年所有产生的奶牛的子种群。没有不同的叶结点（子种群）具有完全相同的一组特性。例如，子种群 #1 是没有特殊特性的奶牛，子种群 #3 是能够心灵感应的（telepathic）会飞的奶牛。相比之下，子种群 #2 是会飞但不能心灵感应的奶牛。子种群 #3 是唯一既会飞又会心灵感应的。\n\n像上图这样每一种进化出的新特性都恰好在树中的一条边上产生（也就是说，在整个进化历史中仅在一个时间点产生），这样的进化树被称为是“合法的”。例如，如果斑点这一特性在两个不同分支中均进化产生，这棵进化树就不是合法的。给定 3019 年奶牛子种群的描述，请判断是否这可以由一棵合法的进化树所解释。 ", "inputFormat": "输入的第一行包含子种群的数量 $N$（$2\\le N\\le 25$）。以下 $N$ 行每行描述一个子种群。每行包含一个整数 $K$（$0\\le K\\le 25$），之后是 $K$ 个该子种群奶牛所拥有的特性。特性是由至多 $20$ 个小写字母（`a..z`）组成的字符串。没有两个子种群拥有完全相同的特性。 ", "outputFormat": " 如果可能构造一棵可以解释所有子种群产生途径的进化树，输出 `yes`，否则输出 `no`。 ", "hint": "### 样例解释 1\n\n\n这个输入样例与上图所示的合法进化树一致。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19OPEN] Cow Evolution B", "background": "", "description": "现在是 3019 年，在过去的一千年里发生了不计其数的牛类进化，产生了具有各种有趣特性的奶牛。\n\n牛类进化的记录可以用一棵树来表示，起源是位于树根位置的没有特殊特性的奶牛。树上每一个产生后代的结点，有可能所有的奶牛都进化出了一种新的特性（比如说喷火（fire breathing），如下图所示，其中所有斑点（spots）奶牛最后都能喷火），或者是奶牛种群产生了分支进化，其中有些进化出了新的特性（比如，飞（flying）），有的没有。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q7v0zhg4.png)\n\n树底部的叶结点表示 3019 年所有产生的奶牛的子种群。没有不同的叶结点（子种群）具有完全相同的一组特性。例如，子种群 #1 是没有特殊特性的奶牛，子种群 #3 是能够心灵感应的（telepathic）会飞的奶牛。相比之下，子种群 #2 是会飞但不能心灵感应的奶牛。子种群 #3 是唯一既会飞又会心灵感应的。\n\n像上图这样每一种进化出的新特性都恰好在树中的一条边上产生（也就是说，在整个进化历史中仅在一个时间点产生），这样的进化树被称为是“合法的”。例如，如果斑点这一特性在两个不同分支中均进化产生，这棵进化树就不是合法的。给定 3019 年奶牛子种群的描述，请判断是否这可以由一棵合法的进化树所解释。 ", "inputFormat": "输入的第一行包含子种群的数量 $N$（$2\\le N\\le 25$）。以下 $N$ 行每行描述一个子种群。每行包含一个整数 $K$（$0\\le K\\le 25$），之后是 $K$ 个该子种群奶牛所拥有的特性。特性是由至多 $20$ 个小写字母（`a..z`）组成的字符串。没有两个子种群拥有完全相同的特性。 ", "outputFormat": " 如果可能构造一棵可以解释所有子种群产生途径的进化树，输出 `yes`，否则输出 `no`。 ", "hint": "### 样例解释 1\n\n\n这个输入样例与上图所示的合法进化树一致。 ", "locale": "zh-CN"}}}
{"pid": "P1702", "type": "P", "difficulty": 3, "samples": [["3\n3 5\n4 5\n1 3\n", "2 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "突击考试", "background": "", "description": "一日，老师决定进行一次突击考试。已知每个学生都有一个考试能力等级，教室里一共有 $N$ 个课桌，按照顺序排成一列，每张课桌可以坐两个人，第 $i$ 张课桌坐的两个人的能力等级为$A_i,B_i$。现在老师决定对能力等级为 $K$ 的人进行测验。他会从这 $N$ 排中选择连续的 $L$ 排进行测验，要求这 $L$ 排中的每一排至少有一个人考试能力等级为 $K$。现在我们想知道 $L$ 的最大值以及对应的等级 $K$。", "inputFormat": "第 $1$ 行：一个整数 $N$；\n\n第 $2$ 至第 $N+1$ 行：每行两个整数，表示 $A_i,B_i$。", "outputFormat": "两个整数 $L$ 和 $K$，要求在 $L$ 最大的条件下 $K$ 最小。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 100,000$，$1 \\le A[i],B[i] \\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "Surprise Exam", "background": "", "description": "One day, the teacher decides to hold a surprise exam. It is known that each student has an ability level. There are $N$ desks in the classroom, arranged in a single row. Each desk can seat two students; the two students at desk $i$ have ability levels $A_i$ and $B_i$. The teacher now decides to test people whose ability level is $K$. He will choose $L$ consecutive desks from these $N$ desks for the exam, requiring that each of these $L$ desks has at least one person whose ability level is $K$. We want to determine the maximum possible $L$ and the corresponding $K$.", "inputFormat": "Line 1: an integer $N$.\n\nLines 2 to $N+1$: each line contains two integers, $A_i$ and $B_i$.", "outputFormat": "Output two integers $L$ and $K$, where $L$ is maximized; among those, choose the smallest possible $K$.", "hint": "### Constraints\n\nFor all testdata, $1 \\le N \\le 100{,}000$, $1 \\le A_i, B_i \\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "突击考试", "background": "", "description": "一日，老师决定进行一次突击考试。已知每个学生都有一个考试能力等级，教室里一共有 $N$ 个课桌，按照顺序排成一列，每张课桌可以坐两个人，第 $i$ 张课桌坐的两个人的能力等级为$A_i,B_i$。现在老师决定对能力等级为 $K$ 的人进行测验。他会从这 $N$ 排中选择连续的 $L$ 排进行测验，要求这 $L$ 排中的每一排至少有一个人考试能力等级为 $K$。现在我们想知道 $L$ 的最大值以及对应的等级 $K$。", "inputFormat": "第 $1$ 行：一个整数 $N$；\n\n第 $2$ 至第 $N+1$ 行：每行两个整数，表示 $A_i,B_i$。", "outputFormat": "两个整数 $L$ 和 $K$，要求在 $L$ 最大的条件下 $K$ 最小。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N \\le 100,000$，$1 \\le A[i],B[i] \\le 5$。", "locale": "zh-CN"}}}
{"pid": "P1703", "type": "P", "difficulty": 2, "samples": [["CompleteVictory\nWherethereisawillthereisaway\n0", "Yvqgpxaimmklongnzfwpvxmniytm"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "洛谷原创"], "title": "那个什么密码 2", "background": "_本题改编自 <https://www.luogu.com.cn/problem/P1079>。_", "description": "16 世纪法国外交家 Blaise de Vigenère 设计了一种多表密码加密算法 Vigenère 密码。Vigenère 密码的加密解密算法简单易用，且破译难度比较高，曾在美国南北战争中为南军所广泛使用。\n\n \n在密码学中，我们称需要加密的信息为明文，用 $M$ 表示；称加密后的信息为密文，用 $C$ 表示；而密钥是一种参数，是将明文转换为密文或将密文转换为明文的算法中输入的数据，记为 $k$。在 Vigenère 密码中，密钥 $k$ 是一个字母串，$k=k_1,k_2,…,k_n$。当明文 $M=m_1,m_2,…,m_n$ 时，得到的密文 $C=c_1,c_2,…,c_n$，其中 $c_i$=$m_i \\operatorname{\\circledR} k_i$，运算 $\\circledR$ 的规则如下表所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucldwpmy.png)\n\nVigenère 加密在操作时需要注意：\n\n1. $\\circledR$ 运算忽略参与运算的字母的大小写，并保持字母在明文 $M$ 中的大小写形式；\n2. 当明文 $M$ 的长度大于密钥 $k$ 的长度时，将密钥 $k$ 重复使用。\n\n**任务：**\n\n给定一串明文和一串密钥，请对明文进行两次加密：\n\n- 一次加密：依次输入 $n$ 条形如 $(l,r)$ 的指令，翻转明文中的第 $l$ 到 $r$ 个字符。\n- 二次加密：按照上面的规则，对一次加密后的一级密文再施加一次 Vigenère 密码加密，得到最终的二级密文。\n\n例如，明文 $M=\\texttt{Helloworld}$，密钥 $k=\\texttt{abc}$，$n=1$，指令为 $(4,9)$ 时，一级密文 $C_1=\\texttt{Hellrowold}$，二级密文 $C_2=\\texttt{Hfnlsqwpnd}$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|} \\hline\n\\textsf{明文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt o & \\tt w & \\tt o & \\tt r & \\tt l & \\tt d \\\\  \\hline\n\\textsf{一级密文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt r & \\tt o & \\tt w & \\tt o & \\tt l & \\tt d \\\\  \\hline\n\\textsf{密钥} & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a \\\\  \\hline\n\\textsf{二级密文} & \\tt H & \\tt f & \\tt n & \\tt l & \\tt s & \\tt q & \\tt w & \\tt p & \\tt n & \\tt d \\\\  \\hline\n\\end{array}\n$$", "inputFormat": "第一行为一个字符串，表示密钥 $k$，长度不超过 $1000$，其中仅包含大小写字母。  \n\n第二行为一个字符串，表示加密前的明文，长度不超过 $1000$，其中仅包含大小写字母。\n\n第三行为一个非负整数 $n\\ (0 \\le n \\le 10^5)$，表示一次加密中的指令个数。\n\n下面 $n$ 行，每行两个正整数 $l,r\\ (1 \\le l \\le r \\le m)$，表示一个指令，其中 $m$ 是明文的长度。", "outputFormat": "一个字符串，表示输入密钥和明文所对应的二级密文。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "That Whatever Password 2", "background": "_This problem is adapted from <https://www.luogu.com.cn/problem/P1079>._", "description": "In the 16th century, the French diplomat Blaise de Vigenère designed a polyalphabetic cipher called the Vigenère cipher. The Vigenère cipher is simple and easy to use for both encryption and decryption, yet relatively hard to crack. It was widely used by the Confederate Army during the American Civil War.\n\nIn cryptography, the information to be encrypted is called the plaintext, denoted by $M$; the encrypted information is called the ciphertext, denoted by $C$; and the key is a parameter used as input to the algorithm that converts plaintext to ciphertext or ciphertext to plaintext, denoted by $k$. In the Vigenère cipher, the key $k$ is a string of letters, $k = k_1, k_2, \\dots, k_n$. When the plaintext is $M = m_1, m_2, \\dots, m_n$, the ciphertext obtained is $C = c_1, c_2, \\dots, c_n$, where $c_i = m_i \\operatorname{\\circledR} k_i$. The rules for the operation $\\circledR$ are shown in the table below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucldwpmy.png)\n\nNotes when applying Vigenère encryption:\n1. The $\\circledR$ operation ignores the case of the letters involved, and preserves the letter case as it appears in the plaintext $M$.\n2. When the length of the plaintext $M$ is greater than the length of the key $k$, repeat the key $k$.\n\nTask:\nGiven a plaintext and a key, perform two rounds of encryption:\n\n- First-stage encryption: sequentially apply $n$ instructions of the form $(l, r)$, reversing the characters from the $l$-th to the $r$-th positions of the plaintext.\n- Second-stage encryption: according to the above rules, apply the Vigenère cipher once more to the result of the first stage to obtain the final level-2 ciphertext.\n\nFor example, with plaintext $M=\\texttt{Helloworld}$, key $k=\\texttt{abc}$, $n=1$, and instruction $(4, 9)$, the level-1 ciphertext is $C_1=\\texttt{Hellrowold}$, and the level-2 ciphertext is $C_2=\\texttt{Hfnlsqwpnd}$.\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|} \\hline\n\\textsf{Plaintext} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt o & \\tt w & \\tt o & \\tt r & \\tt l & \\tt d \\\\  \\hline\n\\textsf{Level-1 Ciphertext} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt r & \\tt o & \\tt w & \\tt o & \\tt l & \\tt d \\\\  \\hline\n\\textsf{Key} & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a \\\\  \\hline\n\\textsf{Level-2 Ciphertext} & \\tt H & \\tt f & \\tt n & \\tt l & \\tt s & \\tt q & \\tt w & \\tt p & \\tt n & \\tt d \\\\  \\hline\n\\end{array}\n$$", "inputFormat": "The first line contains a string representing the key $k$, with length not exceeding 1000, containing only uppercase and lowercase letters.  \nThe second line contains a string representing the plaintext before encryption, with length not exceeding 1000, containing only uppercase and lowercase letters.  \nThe third line contains a non-negative integer $n$ ($0 \\le n \\le 10^5$), representing the number of instructions in the first-stage encryption.  \nEach of the following $n$ lines contains two positive integers $l, r$ ($1 \\le l \\le r \\le m$), representing one instruction, where $m$ is the length of the plaintext.", "outputFormat": "Output a single string, which is the level-2 ciphertext corresponding to the given key and plaintext.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "那个什么密码 2", "background": "_本题改编自 <https://www.luogu.com.cn/problem/P1079>。_", "description": "16 世纪法国外交家 Blaise de Vigenère 设计了一种多表密码加密算法 Vigenère 密码。Vigenère 密码的加密解密算法简单易用，且破译难度比较高，曾在美国南北战争中为南军所广泛使用。\n\n \n在密码学中，我们称需要加密的信息为明文，用 $M$ 表示；称加密后的信息为密文，用 $C$ 表示；而密钥是一种参数，是将明文转换为密文或将密文转换为明文的算法中输入的数据，记为 $k$。在 Vigenère 密码中，密钥 $k$ 是一个字母串，$k=k_1,k_2,…,k_n$。当明文 $M=m_1,m_2,…,m_n$ 时，得到的密文 $C=c_1,c_2,…,c_n$，其中 $c_i$=$m_i \\operatorname{\\circledR} k_i$，运算 $\\circledR$ 的规则如下表所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ucldwpmy.png)\n\nVigenère 加密在操作时需要注意：\n\n1. $\\circledR$ 运算忽略参与运算的字母的大小写，并保持字母在明文 $M$ 中的大小写形式；\n2. 当明文 $M$ 的长度大于密钥 $k$ 的长度时，将密钥 $k$ 重复使用。\n\n**任务：**\n\n给定一串明文和一串密钥，请对明文进行两次加密：\n\n- 一次加密：依次输入 $n$ 条形如 $(l,r)$ 的指令，翻转明文中的第 $l$ 到 $r$ 个字符。\n- 二次加密：按照上面的规则，对一次加密后的一级密文再施加一次 Vigenère 密码加密，得到最终的二级密文。\n\n例如，明文 $M=\\texttt{Helloworld}$，密钥 $k=\\texttt{abc}$，$n=1$，指令为 $(4,9)$ 时，一级密文 $C_1=\\texttt{Hellrowold}$，二级密文 $C_2=\\texttt{Hfnlsqwpnd}$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|} \\hline\n\\textsf{明文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt o & \\tt w & \\tt o & \\tt r & \\tt l & \\tt d \\\\  \\hline\n\\textsf{一级密文} & \\tt H & \\tt e & \\tt l & \\tt l & \\tt r & \\tt o & \\tt w & \\tt o & \\tt l & \\tt d \\\\  \\hline\n\\textsf{密钥} & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a & \\tt b & \\tt c & \\tt a \\\\  \\hline\n\\textsf{二级密文} & \\tt H & \\tt f & \\tt n & \\tt l & \\tt s & \\tt q & \\tt w & \\tt p & \\tt n & \\tt d \\\\  \\hline\n\\end{array}\n$$", "inputFormat": "第一行为一个字符串，表示密钥 $k$，长度不超过 $1000$，其中仅包含大小写字母。  \n\n第二行为一个字符串，表示加密前的明文，长度不超过 $1000$，其中仅包含大小写字母。\n\n第三行为一个非负整数 $n\\ (0 \\le n \\le 10^5)$，表示一次加密中的指令个数。\n\n下面 $n$ 行，每行两个正整数 $l,r\\ (1 \\le l \\le r \\le m)$，表示一个指令，其中 $m$ 是明文的长度。", "outputFormat": "一个字符串，表示输入密钥和明文所对应的二级密文。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1704", "type": "P", "difficulty": 5, "samples": [["13 4\r\n2 13 8 7\r\n6 10 9 8 9 10 11 16 14 12 13 14 18 ", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "二分", "洛谷原创"], "title": "寻找最优美做题曲线", "background": "nodgd 是一个喜欢写程序的同学，前不久（好像还是有点久了）洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷 OJ 刷题有个有趣的评测功能，就是系统自动绘制出用户的“做题曲线”。所谓做题曲线就是一条曲线，或者说是折线，是这样定义的：假设某用户在第 $b_i$ 天 AC 了 $c_i$ 道题，并且 $b_i$ 严格递增，那么该用户的做题曲线就是平面上点 $(i,c_i)$ 依次连出的一条折线。比如你在第 $1$ 天做了 $3$ 道题，第 $3$ 天做了 $4$ 道题，第 $6$ 天做了 $1$ 道题，那么你在前 $6$ 天的做题曲线就是从点 $(1,3)$ 到点 $(2,4)$ 到点 $(3,1)$ 的连续折线。\n\nnodgd 同学可以预测出自己未来 $N$ 天每条能够 $AC$ 题目的数量，同时有一个很无趣的爱好，就是单调递增，nodgd 强迫自己的做题曲线保持严格的单调递增。但是出于某些原因，nodgd 在某些日子（共有 $K$ 天）必须刷题，而且刷题数量一定是预计的数量（体现 nodgd 的神预测）。nodgd 同学想知道，在这样的情况下，自己最多有多少天可以刷题，不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题……要做，就拜托你来帮他算算了。", "inputFormat": "第一行两个正整数，$N$ 和 $K$，表示 nodgd 预测了未来 $N$ 天每天做题的数量，其中 $K$ 天必须刷题。\n\n第二行 $K$ 个正整数 $p_i$，表示第 $p_i$ 天必须刷题 $(1 \\le p_i\\le N$，保证每个 $p_i$ 不同）。\n\n第三行 $N$ 个正整数 $c_i$，表示在第 $i$ 天 nodgd 可以 $AC$ 的题目数量必须是 $c_i$。", "outputFormat": "输出共一行。\n\n如果能找到严格递增的做题曲线：一个正整数，表示 nodgd 最多有多少天可以刷题。\n\n如果找不到严格递增的做题曲线：直接输出 `impossible`（不加引号，全是小写字母）。", "hint": "### 数据范围及约定\n\n对于全部数据，\n\n- $1 \\le N \\le 500000$，$1 \\le K \\le N/2$；\n- $1 \\le p[i] \\le N$，保证每个 $p[i]$ 不同，不保证 $p[i]$ 按大小顺序输入；\n- $1 \\le c[i] \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Find the Most Elegant Problem-Solving Curve", "background": "nodgd is a student who enjoys programming. Some time ago (well, maybe not that recently), Luogu OJ came into being. Of course, nodgd started solving problems on Luogu OJ right away. A series of interesting events followed, and he decided to turn them into a problem to bother everyone.", "description": "Luogu OJ has a fun judging feature that automatically draws a user's \"problem-solving curve.\" This curve is a polyline defined as follows: suppose a user solved $c_{b_i}$ problems on day $b_i$, where $b_i$ are strictly increasing. Then the user's problem-solving curve is the polyline passing through the points $(i, c_{b_i})$ in order. For example, if you solved $3$ problems on day $1$, $4$ on day $3$, and $1$ on day $6$, then your problem-solving curve over the first $6$ days is the continuous polyline from $(1, 3)$ to $(2, 4)$ to $(3, 1)$.\n\nnodgd can predict how many problems he would be able to AC on each of the next $N$ days. He also has an obsession with being strictly increasing, so he forces his problem-solving curve to be strictly increasing. For some reasons, on certain days (a total of $K$ days), he must solve problems, and the number of problems solved on those days must exactly match the predicted numbers (showcasing nodgd’s divine prediction). He wants to know, under these constraints, the maximum number of days on which he can solve problems. However, since he still has a pile of math, physics, English, art, and PE competition problems to do, he is asking you to compute it for him.", "inputFormat": "- The first line contains two positive integers $N$ and $K$, meaning nodgd has predictions for the next $N$ days, among which $K$ days are mandatory.\n- The second line contains $K$ distinct positive integers $p_i$, indicating that day $p_i$ is mandatory (the $p_i$ are not guaranteed to be in increasing order).\n- The third line contains $N$ positive integers $c_i$, where on day $i$, if nodgd solves problems, the number must be exactly $c_i$.", "outputFormat": "Output a single line.\n\n- If a strictly increasing problem-solving curve can be constructed, output a single positive integer: the maximum number of days on which nodgd can solve problems.\n- If no strictly increasing curve exists, output `impossible`.", "hint": "Constraints\n\nFor all testdata,\n\n- $1 \\le N \\le 500000$, $1 \\le K \\le N/2$；\n- $1 \\le p_i \\le N$, and all $p_i$ are distinct; the $p_i$ are not guaranteed to be in increasing order；\n- $1 \\le c_i \\le 10^9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "寻找最优美做题曲线", "background": "nodgd 是一个喜欢写程序的同学，前不久（好像还是有点久了）洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷 OJ 刷题有个有趣的评测功能，就是系统自动绘制出用户的“做题曲线”。所谓做题曲线就是一条曲线，或者说是折线，是这样定义的：假设某用户在第 $b_i$ 天 AC 了 $c_i$ 道题，并且 $b_i$ 严格递增，那么该用户的做题曲线就是平面上点 $(i,c_i)$ 依次连出的一条折线。比如你在第 $1$ 天做了 $3$ 道题，第 $3$ 天做了 $4$ 道题，第 $6$ 天做了 $1$ 道题，那么你在前 $6$ 天的做题曲线就是从点 $(1,3)$ 到点 $(2,4)$ 到点 $(3,1)$ 的连续折线。\n\nnodgd 同学可以预测出自己未来 $N$ 天每条能够 $AC$ 题目的数量，同时有一个很无趣的爱好，就是单调递增，nodgd 强迫自己的做题曲线保持严格的单调递增。但是出于某些原因，nodgd 在某些日子（共有 $K$ 天）必须刷题，而且刷题数量一定是预计的数量（体现 nodgd 的神预测）。nodgd 同学想知道，在这样的情况下，自己最多有多少天可以刷题，不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题……要做，就拜托你来帮他算算了。", "inputFormat": "第一行两个正整数，$N$ 和 $K$，表示 nodgd 预测了未来 $N$ 天每天做题的数量，其中 $K$ 天必须刷题。\n\n第二行 $K$ 个正整数 $p_i$，表示第 $p_i$ 天必须刷题 $(1 \\le p_i\\le N$，保证每个 $p_i$ 不同）。\n\n第三行 $N$ 个正整数 $c_i$，表示在第 $i$ 天 nodgd 可以 $AC$ 的题目数量必须是 $c_i$。", "outputFormat": "输出共一行。\n\n如果能找到严格递增的做题曲线：一个正整数，表示 nodgd 最多有多少天可以刷题。\n\n如果找不到严格递增的做题曲线：直接输出 `impossible`（不加引号，全是小写字母）。", "hint": "### 数据范围及约定\n\n对于全部数据，\n\n- $1 \\le N \\le 500000$，$1 \\le K \\le N/2$；\n- $1 \\le p[i] \\le N$，保证每个 $p[i]$ 不同，不保证 $p[i]$ 按大小顺序输入；\n- $1 \\le c[i] \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1705", "type": "P", "difficulty": 2, "samples": [["5 2 8\r\n1 7 2 5 4", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创", "背包 DP"], "title": "爱与愁过火", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第三章。\n\n爱与愁大神说这是ta的伤心指数，只不过现在好很多了，翻译只是看你无聊让你动动脑筋罢了（shit~~~）。虽然月落乌啼嘴上骂着：“我去年买了个表……纽曼表……”，但是结果还是请爱与愁大神去Pizza Hut吃了一顿。\n", "description": "到了 Pizza Hut，爱与愁大神由于不爽，所以存心想坑月落乌啼的钱，他点了 $m$ 样菜，每样菜 $a_i$ 元。月落乌啼预计只用 $n$ 元，于是他让爱与愁大神重新从这 $m$ 样菜中选 $r$ 样。\n\n爱与愁大神还是想坑钱，于是他打电话给你，让你编一个程序告诉他有几种方案可以从 $m$ 样菜中点取 $r$ 样菜但是还能超过月落乌啼的预计 $n$ 元。", "inputFormat": "第一行三个数 $m$，$r$，$n$。\n\n第二行 $m$ 个数，每道菜需要的钱 $a_i$，两个数之间有空格。", "outputFormat": "只有一个整数，表示方案总数。\n", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 数据，$m \\le 30$，$r \\le m$，$m \\le a_i \\le 90$，$n \\le 2700$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Love and Sorrow, Going Too Far", "background": "(This problem hides two song titles. Try to find them~~~).\n\nChapter 3 of \"The Story of Love and Sorrow, Volume One · heartache.\"\n\nThe God of Love and Sorrow says this is ta's sadness index, but it's much better now. The translation is just to give you something to do when you're bored (shit~~~). Although Yue Luo Wu Ti cursed out loud: \"I bought a watch last year... a Newman watch...\", in the end he still treated the God of Love and Sorrow to a meal at Pizza Hut.", "description": "At Pizza Hut, the God of Love and Sorrow was upset and wanted to rip Yue Luo Wu Ti off. He ordered $m$ dishes, each costing $a_i$ yuan. Yue Luo Wu Ti planned to spend only $n$ yuan, so he asked the God of Love and Sorrow to reselect $r$ dishes from these $m$ dishes.\n\nStill trying to spend more money, he called you and asked you to write a program to tell him in how many ways he can choose $r$ dishes from the $m$ dishes such that the total cost exceeds $n$ yuan.", "inputFormat": "The first line contains three integers $m$, $r$, $n$.\n\nThe second line contains $m$ integers, where each $a_i$ is the cost of a dish, separated by spaces.", "outputFormat": "Output a single integer, the total number of valid selections.", "hint": "### Constraints\n\nFor $100\\%$ of the testdata, $m \\le 30$, $r \\le m$, $m \\le a_i \\le 90$, $n \\le 2700$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "爱与愁过火", "background": "（本道题目隐藏了两首歌名，找找看哪~~~）\n\n《爱与愁的故事第一弹·heartache》第三章。\n\n爱与愁大神说这是ta的伤心指数，只不过现在好很多了，翻译只是看你无聊让你动动脑筋罢了（shit~~~）。虽然月落乌啼嘴上骂着：“我去年买了个表……纽曼表……”，但是结果还是请爱与愁大神去Pizza Hut吃了一顿。\n", "description": "到了 Pizza Hut，爱与愁大神由于不爽，所以存心想坑月落乌啼的钱，他点了 $m$ 样菜，每样菜 $a_i$ 元。月落乌啼预计只用 $n$ 元，于是他让爱与愁大神重新从这 $m$ 样菜中选 $r$ 样。\n\n爱与愁大神还是想坑钱，于是他打电话给你，让你编一个程序告诉他有几种方案可以从 $m$ 样菜中点取 $r$ 样菜但是还能超过月落乌啼的预计 $n$ 元。", "inputFormat": "第一行三个数 $m$，$r$，$n$。\n\n第二行 $m$ 个数，每道菜需要的钱 $a_i$，两个数之间有空格。", "outputFormat": "只有一个整数，表示方案总数。\n", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 数据，$m \\le 30$，$r \\le m$，$m \\le a_i \\le 90$，$n \\le 2700$。\n", "locale": "zh-CN"}}}
{"pid": "P1706", "type": "P", "difficulty": 2, "samples": [["3", "    1    2    3\n    1    3    2\n    2    1    3\n    2    3    1\n    3    1    2\n    3    2    1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "递归", "深度优先搜索 DFS"], "title": "全排列问题", "background": "", "description": "按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。\n", "inputFormat": "一个整数 $n$。\n", "outputFormat": "由 $1 \\sim n$ 组成的所有不重复的数字序列，每行一个序列。\n\n每个数字保留 $5$ 个场宽。\n", "hint": "$1 \\leq n \\leq 9$。", "locale": "zh-CN", "translations": {"en": {"title": "Full Permutation Problem", "background": "", "description": "Output, in lexicographic order, all non-repeating permutations of the natural numbers $1$ to $n$, i.e., the full set of permutations of $1$ to $n$. No generated sequence may contain repeated numbers.", "inputFormat": "A single integer $n$.", "outputFormat": "All non-repeating sequences composed of $1 \\sim n$, one sequence per line. Each number should be printed in a field of width $5$.", "hint": "$1 \\leq n \\leq 9$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "全排列问题", "background": "", "description": "按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。\n", "inputFormat": "一个整数 $n$。\n", "outputFormat": "由 $1 \\sim n$ 组成的所有不重复的数字序列，每行一个序列。\n\n每个数字保留 $5$ 个场宽。\n", "hint": "$1 \\leq n \\leq 9$。", "locale": "zh-CN"}}}
{"pid": "P1707", "type": "P", "difficulty": 5, "samples": [["4 10007\n2 1 1 1\n2 2 3\n1 1 2", "nodgd 74\nCiocio 80\nNicole 59"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "倍增", "矩阵运算", "洛谷原创", "矩阵乘法", "线性递推"], "title": "刷题比赛", "background": "nodgd 是一个喜欢写程序的同学，前不久洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。   \n于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷OJ当然算是好地方，nodgd 同学打算和朋友分享一下。于是他就拉上了他的朋友 Ciocio 和 Nicole 两位同学一起刷题。喜欢比赛的他们当然不放过这样一次刷题比赛的机会！\n\n在第 $1$ 天 nodgd,Ciocio,Nicole 都只做了 $1$ 道题。\n\n在第 $2$ 天 nodgd,Ciocio,Nicole 都只做了 $3$ 道题。\n\n他们都有着严格的刷题规则，并且会在每一天都很遵守规则的刷一定量的题。\n\n1、nodgd 同学第 $k+2$ 天刷题数量    \n$$a_{k+2}=pa_{k+1}+qa_k+b_{k+1}+c_{k+1}+rk^2+tk+1$$\n\n2、Ciocio 同学第 $k+2$ 天刷题数量      \n$$b_{k+2}=ub_{k+1}+vb_k+a_{k+1}+c_{k+1}+w^k$$\n\n3、Nicole 同学第 $k+2$ 天刷题数量    \n$$c_{k+2} = xc_{k+1}+yc_k + a_{k+1} + b_{k+1} + z^k+k+2$$\n\n（以上的字母 $p,q,r,t,u,v,w,x,y,z$ 都是给定的常数，并保证是正整数）\n\n于是他们开始了长时间的刷题比赛！一共进行了 $n$ 天\n\n但是时间是可贵的，nodgd 想快速知道第 $n$ 天每个人的刷题数量。  \n不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题…… 要做，就拜托你来帮他算算了。\n\n由于结果很大，输出结果 $\\bmod \\space m$ 的值即可。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行四个正整数 $p,q,r,t$。\n\n第三行三个正整数 $u,v,w$。\n\n第四行三个正整数 $x,y,z$。", "outputFormat": "共三行，每行一个名字 + 一个空格 + 一个整数。  \n依次是 nodgd,Ciocio,Nicole 和他们在第 $n$ 天刷题数量 $\\bmod \\space m$ 的值。", "hint": "对于 $100\\%$ 的数据，$4\\le n \\le 10^{16}$，$2\\le m \\le 10^{16}$，$1\\le p,q,r,t,u,v,w,x,y,z \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Problem-Solving Contest", "background": "nodgd is a student who likes programming. Recently, Luogu OJ was launched, and of course nodgd came to Luogu OJ right away to practice problems.  \nA series of interesting things happened, and he decided to turn them into a problem to make everyone suffer a bit….", "description": "Luogu OJ is certainly a good place, and nodgd wants to share it with friends. So he invited his friends Ciocio and Nicole to practice problems together. Since they love contests, they naturally would not miss such an opportunity for a problem-solving contest!\n\nOn day $1$, nodgd, Ciocio, Nicole each solved $1$ problem.\n\nOn day $2$, nodgd, Ciocio, Nicole each solved $3$ problems.\n\nThey all have strict rules for solving problems and will strictly follow the rules to solve a certain number of problems each day.\n\n1. The number of problems nodgd solves on day $k+2$:\n$$a_{k+2}=pa_{k+1}+qa_k+b_{k+1}+c_{k+1}+rk^2+tk+1$$\n\n2. The number of problems Ciocio solves on day $k+2$:\n$$b_{k+2}=ub_{k+1}+vb_k+a_{k+1}+c_{k+1}+w^k$$\n\n3. The number of problems Nicole solves on day $k+2$:\n$$c_{k+2} = xc_{k+1}+yc_k + a_{k+1} + b_{k+1} + z^k+k+2$$\n\n(All letters $p, q, r, t, u, v, w, x, y, z$ are given constants and are guaranteed to be positive integers.)\n\nThen they started a long problem-solving contest, lasting for $n$ days.\n\nHowever, time is precious, and nodgd wants to quickly know how many problems each person solves on day $n$.  \nBut nodgd still has a lot of math contest problems, physics contest problems, English contest problems, art contest problems, PE contest problems… to do, so please help him calculate.\n\nBecause the results can be large, output the values $\\bmod \\space m$.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThe second line contains four positive integers $p, q, r, t$.\n\nThe third line contains three positive integers $u, v, w$.\n\nThe fourth line contains three positive integers $x, y, z$.", "outputFormat": "Output three lines, each containing a name + a space + an integer.  \nIn order: nodgd, Ciocio, Nicole, and their number of problems solved on day $n$ $\\bmod \\space m$.", "hint": "For $100\\%$ of the testdata, $4 \\le n \\le 10^{16}$, $2 \\le m \\le 10^{16}$, $1 \\le p, q, r, t, u, v, w, x, y, z \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "刷题比赛", "background": "nodgd 是一个喜欢写程序的同学，前不久洛谷 OJ 横空出世，nodgd 同学当然第一时间来到洛谷 OJ 刷题。   \n于是发生了一系列有趣的事情，他就打算用这些事情来出题恶心大家……", "description": "洛谷OJ当然算是好地方，nodgd 同学打算和朋友分享一下。于是他就拉上了他的朋友 Ciocio 和 Nicole 两位同学一起刷题。喜欢比赛的他们当然不放过这样一次刷题比赛的机会！\n\n在第 $1$ 天 nodgd,Ciocio,Nicole 都只做了 $1$ 道题。\n\n在第 $2$ 天 nodgd,Ciocio,Nicole 都只做了 $3$ 道题。\n\n他们都有着严格的刷题规则，并且会在每一天都很遵守规则的刷一定量的题。\n\n1、nodgd 同学第 $k+2$ 天刷题数量    \n$$a_{k+2}=pa_{k+1}+qa_k+b_{k+1}+c_{k+1}+rk^2+tk+1$$\n\n2、Ciocio 同学第 $k+2$ 天刷题数量      \n$$b_{k+2}=ub_{k+1}+vb_k+a_{k+1}+c_{k+1}+w^k$$\n\n3、Nicole 同学第 $k+2$ 天刷题数量    \n$$c_{k+2} = xc_{k+1}+yc_k + a_{k+1} + b_{k+1} + z^k+k+2$$\n\n（以上的字母 $p,q,r,t,u,v,w,x,y,z$ 都是给定的常数，并保证是正整数）\n\n于是他们开始了长时间的刷题比赛！一共进行了 $n$ 天\n\n但是时间是可贵的，nodgd 想快速知道第 $n$ 天每个人的刷题数量。  \n不过 nodgd 同学还有大量的数学竞赛题、物理竞赛题、英语竞赛题、美术竞赛题、体育竞赛题…… 要做，就拜托你来帮他算算了。\n\n由于结果很大，输出结果 $\\bmod \\space m$ 的值即可。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行四个正整数 $p,q,r,t$。\n\n第三行三个正整数 $u,v,w$。\n\n第四行三个正整数 $x,y,z$。", "outputFormat": "共三行，每行一个名字 + 一个空格 + 一个整数。  \n依次是 nodgd,Ciocio,Nicole 和他们在第 $n$ 天刷题数量 $\\bmod \\space m$ 的值。", "hint": "对于 $100\\%$ 的数据，$4\\le n \\le 10^{16}$，$2\\le m \\le 10^{16}$，$1\\le p,q,r,t,u,v,w,x,y,z \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1708", "type": "P", "difficulty": 3, "samples": [["2\n2 1\n3 2\n", "2\n9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "语言月赛"], "title": "[入门赛 #21] 星云 hard ver.", "background": "本题与 easy ver. 的区别在于本题**有**多组测试数据。\n\n你看，那一抹云，衬着星星，多美啊！", "description": "定义星云数为位数不大于 $n$ 且各数位之和不超过 $k$ 的正整数，给定 $n,k$，求星云数的个数。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：  \n第一行输入两个整数 $n,k$。", "outputFormat": "对于每组测试数据：  \n输出一行一个整数，表示答案。", "hint": "### 数据规模与约定\n\n对于 $50\\%$ 的数据，$1 \\leq n \\leq 2$。  \n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 7$，$1 \\leq k \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #21] 星云 hard ver.", "background": "本题与 easy ver. 的区别在于本题**有**多组测试数据。\n\n你看，那一抹云，衬着星星，多美啊！", "description": "定义星云数为位数不大于 $n$ 且各数位之和不超过 $k$ 的正整数，给定 $n,k$，求星云数的个数。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：  \n第一行输入两个整数 $n,k$。", "outputFormat": "对于每组测试数据：  \n输出一行一个整数，表示答案。", "hint": "### 数据规模与约定\n\n对于 $50\\%$ 的数据，$1 \\leq n \\leq 2$。  \n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 7$，$1 \\leq k \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P1709", "type": "P", "difficulty": 5, "samples": [["7\nanabana\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "贪心", "2003", "USACO", "ICPC", "SEERC"], "title": "[SEERC 2003 / USACO5.5] 隐藏口令 Hidden Password", "background": "", "description": "有时候程序员有很奇怪的方法来隐藏他们的口令。Binny 会选择一个字符串 $S$（由 $N$ 个小写字母组成，$5 \\le N \\le 5 \\times {10}^6$），然后他把 $S$ 顺时针绕成一个圈，每次取一个做开头字母并顺时针依次取字母而组成一个字符串。这样将得到一些字符串，他把它们排序后取出第一个字符串。把这个字符串的第一个字母在原字符串中的位置减 $1$ 做为口令。\n\n如字符串 `alabala`，按操作的到 $7$ 个字符串，排序后得：\n\n`aalabal`\n`abalaal`  \n`alaalab`  \n`alabala`  \n`balaala`  \n`laalaba`  \n`labalaa`\n\n第一个字符串为 `aalabal`，这个 `a` 在原字符串位置为 $7$，$7-1=6$，则 $6$ 为口令。", "inputFormat": "第一行：一个数：$N$\n\n第二行开始：字符串：$S$（每 $72$ 个字符一个换行符）", "outputFormat": "一行，为得到的口令", "hint": "测试数据题目满足：\n\n$30 \\%$ 的数据 $n \\le {10}^4$。  \n$70 \\%$ 的数据 $n \\le {10}^5$。  \n$100 \\%$ 的数据 $1 \\le n \\le 5 \\times {10}^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 5.5\n\n// 20170523 新增数据四组", "locale": "zh-CN", "translations": {"en": {"title": "[SEERC 2003 / USACO5.5] Hidden Password", "background": "", "description": "Sometimes the programmers have very strange ways of hiding their passwords. Billy \"Hacker\" Geits chooses a string S composed of L (5 <= L <= 100,000) lowercase letters ('a'..'z') with length L. Then he makes and sorts all L-1 one-letter left cyclic shifts of the string. He then takes as a password one prefix of the lexicographically first of the obtained strings (including S).\n\nFor example consider the string \"alabala\". The sorted cyclic one-letter left shifts (including the initial string) are:\n\n```\naalabal \nabalaal \nalaalab \nalabala \nbalaala \nlaalaba \nlabalaa\n```\n\nLexicographically, first string is 'aalabal'. The first letter of this string ('a') is the 'a' that was in position 6 in the initial string (counting the first letter in the string as position 0).\n\nWrite a program that, for given string S, finds the start position of the first letter of the sorted list of cyclic shifts of the string. If the first element appears more than once in the sorted list, then the program should output the smallest possible initial position.", "inputFormat": "Line 1: A single integer: L\n\nLine 2..?: All L characters of the the string S, broken across lines such that each line has 72 characters except the last one, which might have fewer.", "outputFormat": "Line 1: A single integer that is the start position of the first letter, as described above.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[SEERC 2003 / USACO5.5] 隐藏口令 Hidden Password", "background": "", "description": "有时候程序员有很奇怪的方法来隐藏他们的口令。Binny 会选择一个字符串 $S$（由 $N$ 个小写字母组成，$5 \\le N \\le 5 \\times {10}^6$），然后他把 $S$ 顺时针绕成一个圈，每次取一个做开头字母并顺时针依次取字母而组成一个字符串。这样将得到一些字符串，他把它们排序后取出第一个字符串。把这个字符串的第一个字母在原字符串中的位置减 $1$ 做为口令。\n\n如字符串 `alabala`，按操作的到 $7$ 个字符串，排序后得：\n\n`aalabal`\n`abalaal`  \n`alaalab`  \n`alabala`  \n`balaala`  \n`laalaba`  \n`labalaa`\n\n第一个字符串为 `aalabal`，这个 `a` 在原字符串位置为 $7$，$7-1=6$，则 $6$ 为口令。", "inputFormat": "第一行：一个数：$N$\n\n第二行开始：字符串：$S$（每 $72$ 个字符一个换行符）", "outputFormat": "一行，为得到的口令", "hint": "测试数据题目满足：\n\n$30 \\%$ 的数据 $n \\le {10}^4$。  \n$70 \\%$ 的数据 $n \\le {10}^5$。  \n$100 \\%$ 的数据 $1 \\le n \\le 5 \\times {10}^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 5.5\n\n// 20170523 新增数据四组", "locale": "zh-CN"}}}
{"pid": "P1710", "type": "P", "difficulty": 5, "samples": [["5 6 5\n1 2\n1 3\n4 2\n3 2\n2 5\n5 3\n5\n2\n4\n1\n3\n", "0\n2\n2\n4\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "O2优化", "洛谷月赛"], "title": "地铁涨价", "background": "", "description": "博艾市除了有海底高铁连接中国大陆、台湾与日本，市区里也有很成熟的轨道交通系统。我们可以认为博艾地铁系统是一个无向连通图。博艾有 $N$ 个地铁站，同时有 $M$ 小段地铁连接两个不同的站。\n\n地铁计价方式很简单。从 A 站到 B 站，每经过一小段铁路（连接直接相邻的两个点的一条边），就要收取 $1$ 博艾元。也就是说，从 A 站到 B 站，选择的路径不一样，要价也会不同。\n\n我们认为凡华中学在 $1$ 号地铁站。学生们通过地铁通勤，他们当然知道选择最短路来坐车的话，票价最便宜。\n\n然而博艾地铁公司经营不善，一直亏损，于是他们打算提价。提价一次就是将一小段铁路原来收费 $1$ 元改收 $2$ 元。同一小段的铁路不会多次提价。他们打算提价 $Q$ 次。\n\n学生们知道，如果他们到学校的一条最短路径中的一小段提价了，可以改变路径，使总票价不变。然而随着一条一条的铁路被提价，当居住在某个站附近的学生发现，提价后，没有任何一种方案可以从家到学校的费用和初始费用相等时，就会不满。\n\n现在地铁公司希望知道，对于每一次涨价，有多少个站，学生会因为涨价而不满呢？", "inputFormat": "第一行为三个整数 $N,M,Q$。\n\n接下来 $M$ 行，每行 $2$ 个整数 $a_i,b_i,$ 表示第 $i$ 条铁路连接的两个站。$i$ 表示铁路编号。\n\n接下来 $Q$ 行，每行一行整数 $r_j$，表示每次涨价的铁路编号。", "outputFormat": "输出共 $Q$ 行。每行一个整数表示不满的车站数量。", "hint": "### 样例解释\n\n```plain\n次数 车站2 车站3 车站4 车站5\n初始 1     1     2     2\n1    1     1     2     2\n2    1     2     2     3\n3    1     2     2     3\n4    2     2     3     3\n5    2     2     4     3\n```\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据 $N \\le 100,Q \\le 30$。\n- 对于 $40\\%$ 的数据 $Q \\le 30$。\n- 对于 $70\\%$ 的数据正确的输出结果中，不会有超过 $50$ 种不一样的整数（数据范围剧透解法系列）\n- 对于 $100\\%$ 的数据 $N \\le 100000,Q \\le M \\le 200000$。", "locale": "zh-CN", "translations": {"en": {"title": "Subway Fare Increase", "background": "", "description": "In addition to a submarine high-speed rail connecting mainland China, Taiwan, and Japan, Boai (博艾) City also has a well-developed urban rail transit system. We can model the Boai metro system as an undirected connected graph. There are $N$ metro stations and $M$ short rail segments, each connecting two different stations.\n\nThe fare policy is simple. From station A to station B, for each short segment traversed (i.e., an edge connecting two adjacent stations), the charge is $1$ Boai yuan. That is, different paths from A to B may have different fares.\n\nAssume Fanhua High School (凡华中学) is at station $1$. Students commute by metro, and they know that taking a shortest path yields the cheapest fare.\n\nHowever, the Boai metro company has been operating at a loss and plans to raise fares. One price increase changes the charge for a short segment from $1$ to $2$. The same segment will not be increased more than once. They will perform $Q$ such increases.\n\nStudents know that if a segment on one of their shortest paths is increased, they can change their route so that the total fare remains unchanged. However, as more and more segments are increased, when students living near some station find that, after the increases, there is no way to travel from home to school with a total fare equal to the initial fare, they become dissatisfied.\n\nNow the metro company wants to know, for each price increase, how many stations will have students who become dissatisfied due to the increase.", "inputFormat": "The first line contains three integers $N, M, Q$.\n\nThe next $M$ lines each contain $2$ integers $a_i, b_i$, indicating that the $i$-th rail segment connects these two stations. The integer $i$ is the segment index.\n\nThe next $Q$ lines each contain one integer $r_j$, indicating the index of the rail segment increased at step $j$.", "outputFormat": "Output $Q$ lines. Each line contains one integer, the number of dissatisfied stations.", "hint": "### Sample Explanation\n\n```plain\n次数 车站2 车站3 车站4 车站5\n初始 1     1     2     2\n1    1     1     2     2\n2    1     2     2     3\n3    1     2     2     3\n4    2     2     3     3\n5    2     2     4     3\n```\n\n### Constraints\n\n- For $20\\%$ of the testdata, $N \\le 100, Q \\le 30$.\n- For $40\\%$ of the testdata, $Q \\le 30$.\n- For $70\\%$ of the testdata, there are no more than $50$ distinct integers in the correct outputs (data range spoiler series).\n- For $100\\%$ of the testdata, $N \\le 100000, Q \\le M \\le 200000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地铁涨价", "background": "", "description": "博艾市除了有海底高铁连接中国大陆、台湾与日本，市区里也有很成熟的轨道交通系统。我们可以认为博艾地铁系统是一个无向连通图。博艾有 $N$ 个地铁站，同时有 $M$ 小段地铁连接两个不同的站。\n\n地铁计价方式很简单。从 A 站到 B 站，每经过一小段铁路（连接直接相邻的两个点的一条边），就要收取 $1$ 博艾元。也就是说，从 A 站到 B 站，选择的路径不一样，要价也会不同。\n\n我们认为凡华中学在 $1$ 号地铁站。学生们通过地铁通勤，他们当然知道选择最短路来坐车的话，票价最便宜。\n\n然而博艾地铁公司经营不善，一直亏损，于是他们打算提价。提价一次就是将一小段铁路原来收费 $1$ 元改收 $2$ 元。同一小段的铁路不会多次提价。他们打算提价 $Q$ 次。\n\n学生们知道，如果他们到学校的一条最短路径中的一小段提价了，可以改变路径，使总票价不变。然而随着一条一条的铁路被提价，当居住在某个站附近的学生发现，提价后，没有任何一种方案可以从家到学校的费用和初始费用相等时，就会不满。\n\n现在地铁公司希望知道，对于每一次涨价，有多少个站，学生会因为涨价而不满呢？", "inputFormat": "第一行为三个整数 $N,M,Q$。\n\n接下来 $M$ 行，每行 $2$ 个整数 $a_i,b_i,$ 表示第 $i$ 条铁路连接的两个站。$i$ 表示铁路编号。\n\n接下来 $Q$ 行，每行一行整数 $r_j$，表示每次涨价的铁路编号。", "outputFormat": "输出共 $Q$ 行。每行一个整数表示不满的车站数量。", "hint": "### 样例解释\n\n```plain\n次数 车站2 车站3 车站4 车站5\n初始 1     1     2     2\n1    1     1     2     2\n2    1     2     2     3\n3    1     2     2     3\n4    2     2     3     3\n5    2     2     4     3\n```\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据 $N \\le 100,Q \\le 30$。\n- 对于 $40\\%$ 的数据 $Q \\le 30$。\n- 对于 $70\\%$ 的数据正确的输出结果中，不会有超过 $50$ 种不一样的整数（数据范围剧透解法系列）\n- 对于 $100\\%$ 的数据 $N \\le 100000,Q \\le M \\le 200000$。", "locale": "zh-CN"}}}
{"pid": "P1711", "type": "P", "difficulty": 2, "samples": [["4\n-1 -1 -1 1", "2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "2018", "USACO", "O2优化"], "title": "[USACO18FEB] Taming the Herd B", "background": "", "description": "一大清早，Farmer John 就被木材破裂的声音吵醒了。是这些奶牛们干的，她们又逃出牛棚了！\n\nFarmer John 已经厌烦了奶牛在清晨出逃，他觉得受够了：是时候采取强硬措施了。他在牛棚的墙上钉了一个计数器，追踪从上次出逃开始经过的天数。所以如果某一天早上发生了出逃事件，这一天的计数器就为 $0$；如果最近的出逃是 $3$ 天前，计数器读数就为 $3$。Farmer John 一丝不苟地记录了每一天计数器的读数。\n\n年末到了，Farmer John 准备做一些统计。他说，你们这些奶牛会付出代价的！然而意想不到的是，他的记录的一些条目竟然丢失了！\n\nFarmer John 确信他是在发生出逃的某一天开始记录的。请帮助他确定，在所有与残留记录条目一致的事件序列中，基于记录的时间，最少和最多可能发生的出逃次数。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 100$），表示从 Farmer John 开始对奶牛出逃计数器进行计数以来已经经过的天数。\n\n第二行包含 $N$ 个空格分隔的整数。第 $i$ 个整数是 $−1$，表示第 $i$ 天的记录丢失了，或者是一个非负整数 $a_i$（不超过 $100$），表示在第 $i$ 天计数器的数字是 $a_i$。", "outputFormat": "如果没有事件序列与 Farmer John 的残留记录以及他所确定的奶牛在第 $1$ 天清晨出逃这一事实相一致，输出一个整数 $−1$。否则，输出两个空格分隔的整数 $m$ 和 $M$，其中 $m$ 为所有事件序列中出逃的最少次数，$M$ 为最多次数。 ", "hint": "在这个样例中，我们可以推断第 $3$ 天必然有出逃发生。我们已经知道在第 $1$ 天也发生了出逃，所以最后不确定的只有第 $2$ 天是否发生了出逃。因此，总共发生了 $2$ 至 $3$ 次出逃。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18FEB] Taming the Herd B", "background": "", "description": "一大清早，Farmer John 就被木材破裂的声音吵醒了。是这些奶牛们干的，她们又逃出牛棚了！\n\nFarmer John 已经厌烦了奶牛在清晨出逃，他觉得受够了：是时候采取强硬措施了。他在牛棚的墙上钉了一个计数器，追踪从上次出逃开始经过的天数。所以如果某一天早上发生了出逃事件，这一天的计数器就为 $0$；如果最近的出逃是 $3$ 天前，计数器读数就为 $3$。Farmer John 一丝不苟地记录了每一天计数器的读数。\n\n年末到了，Farmer John 准备做一些统计。他说，你们这些奶牛会付出代价的！然而意想不到的是，他的记录的一些条目竟然丢失了！\n\nFarmer John 确信他是在发生出逃的某一天开始记录的。请帮助他确定，在所有与残留记录条目一致的事件序列中，基于记录的时间，最少和最多可能发生的出逃次数。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 100$），表示从 Farmer John 开始对奶牛出逃计数器进行计数以来已经经过的天数。\n\n第二行包含 $N$ 个空格分隔的整数。第 $i$ 个整数是 $−1$，表示第 $i$ 天的记录丢失了，或者是一个非负整数 $a_i$（不超过 $100$），表示在第 $i$ 天计数器的数字是 $a_i$。", "outputFormat": "如果没有事件序列与 Farmer John 的残留记录以及他所确定的奶牛在第 $1$ 天清晨出逃这一事实相一致，输出一个整数 $−1$。否则，输出两个空格分隔的整数 $m$ 和 $M$，其中 $m$ 为所有事件序列中出逃的最少次数，$M$ 为最多次数。 ", "hint": "在这个样例中，我们可以推断第 $3$ 天必然有出逃发生。我们已经知道在第 $1$ 天也发生了出逃，所以最后不确定的只有第 $2$ 天是否发生了出逃。因此，总共发生了 $2$ 至 $3$ 次出逃。 ", "locale": "zh-CN"}}}
{"pid": "P1712", "type": "P", "difficulty": 5, "samples": [["6 3\n3 5\n1 2\n3 4\n2 2\n1 5\n1 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 2000, 2500, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "线段树", "NOI", "离散化", "O2优化", "排序", "双指针 two-pointer"], "title": "[NOI2016] 区间", "background": "", "description": "在数轴上有 $n$ 个闭区间从 $1$ 至 $n$ 编号，第 $i$ 个闭区间为 $[l_i,r_i]$ 。\n\n现在要从中选出 $m$ 个区间，使得这 $m$ 个区间共同包含至少一个位置。换句话说，就是使得存在一个 $x$ ，使得对于每一个被选中的区间 $[l_i,r_i]$，都有 $l_i \\leq x \\leq r_i$ 。\n\n对于一个合法的选取方案，它的花费为被选中的最长区间长度减去被选中的最短区间长度。\n\n区间 $[l_i,r_i]$ 的长度定义为 $(r_i-l_i)$ ，即等于它的右端点的值减去左端点的值。\n\n求所有合法方案中最小的花费。如果不存在合法的方案，输出 $-1$。", "inputFormat": "第一行包含两个整数，分别代表 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行两个整数表示一个区间，第 $(i + 1)$ 行的整数 $l_i, r_i$ 分别代表第 $i$ 个区间的左右端点。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "#### 样例输入输出 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoddox9k.png)\n \n 如图，当 $n=6$，$m=3$ 时，花费最小的方案是选取 $[3,5],[3,4],[1,4]$ 这三个区间，它们共同包含了 $4$ 这个位置，所以是合法的。其中最长的区间是 $[1, 4]$，最短的区间是 $[3, 4]$，所以它的花费是 $(4 - 1) - (4 - 3) = 2$。\n\n#### 数据规模与约定\n\n::cute-table{tuack}\n\n本题共 20 个测试点，各测试点信息如下表。\n| 测试点编号 | $ n= $ | $ m= $ | $ l_i,r_i $ |\n|:-:|:-:|:-:|:-:|\n| 1 | $ 20 $ | $ 9 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 2 | ^ | $ 10 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 3 | $ 199 $ | $ 3 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 4 | $ 200 $ | ^ | ^ |\n| 5 | $ 1000 $ | $ 2 $ | ^ |\n| 6 | $ 2000 $ | ^ | ^ |\n| 7 | $ 199 $ | $ 60 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 8 | $ 200 $ | $ 50 $ | ^ |\n| 9 | ^ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 10 | $ 1999 $ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 11 | $ 2000 $ | $ 400 $ | ^ |\n| 12 | ^ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 13 | $ 30000 $ | $ 2000 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 14 | $ 40000 $ | $ 1000 $ | ^ |\n| 15 | $ 50000 $ | $ 15000 $ | ^ |\n| 16 | $ 100000 $ | $ 20000 $ | ^ |\n| 17 | $ 200000 $ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 18 | $ 300000 $ | $ 50000 $ | ^ |\n| 19 | $ 400000 $ | $ 90000 $ | ^ |\n| 20 | $ 500000 $ | $ 200000 $ | ^ |\n\n对于全部的测试点，保证 $1 \\leq m \\leq n$，$1 \\leq n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$0 \\leq l_i \\leq r_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2016] Intervals", "background": "", "description": "On the number line, there are $n$ closed intervals numbered from $1$ to $n$. The $i$-th closed interval is $[l_i, r_i]$.\n\nNow we need to choose $m$ intervals such that these $m$ intervals share at least one position. In other words, there exists an $x$ such that for every selected interval $[l_i, r_i]$, we have $l_i \\leq x \\leq r_i$.\n\nFor a valid selection, its cost is the length of the longest selected interval minus the length of the shortest selected interval.\n\nThe length of an interval $[l_i, r_i]$ is defined as $(r_i - l_i)$, i.e., the value of the right endpoint minus the value of the left endpoint.\n\nFind the minimum cost among all valid selections. If no valid selection exists, output $-1$.", "inputFormat": "The first line contains two integers, representing $n$ and $m$.\n\nFrom line $2$ to line $(n + 1)$, each line contains two integers representing an interval. On line $(i + 1)$, the integers $l_i, r_i$ denote the left and right endpoints of the $i$-th interval.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "#### Explanation for Sample Input/Output 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoddox9k.png)\n\nAs shown, when $n = 6$, $m = 3$, the minimum-cost plan is to select the three intervals $[3, 5], [3, 4], [1, 4]$. They all contain position $4$, so the selection is valid. Among them, the longest interval is $[1, 4]$, and the shortest interval is $[3, 4]$, so the cost is $(4 - 1) - (4 - 3) = 2$.\n\n#### Constraints and Conventions\n\n::cute-table{tuack}\n\nThere are 20 test points in total. See the table below for details.\n| Test point ID | $ n= $ | $ m= $ | $ l_i, r_i $ |\n|:-:|:-:|:-:|:-:|\n| 1 | $ 20 $ | $ 9 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 2 | ^ | $ 10 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 3 | $ 199 $ | $ 3 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 4 | $ 200 $ | ^ | ^ |\n| 5 | $ 1000 $ | $ 2 $ | ^ |\n| 6 | $ 2000 $ | ^ | ^ |\n| 7 | $ 199 $ | $ 60 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 8 | $ 200 $ | $ 50 $ | ^ |\n| 9 | ^ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 10 | $ 1999 $ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 11 | $ 2000 $ | $ 400 $ | ^ |\n| 12 | ^ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 13 | $ 30000 $ | $ 2000 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 14 | $ 40000 $ | $ 1000 $ | ^ |\n| 15 | $ 50000 $ | $ 15000 $ | ^ |\n| 16 | $ 100000 $ | $ 20000 $ | ^ |\n| 17 | $ 200000 $ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 18 | $ 300000 $ | $ 50000 $ | ^ |\n| 19 | $ 400000 $ | $ 90000 $ | ^ |\n| 20 | $ 500000 $ | $ 200000 $ | ^ |\n\nFor all test points, it is guaranteed that $1 \\le m \\le n$, $1 \\le n \\le 5 \\times 10^5$, $1 \\le m \\le 2 \\times 10^5$, $0 \\le l_i \\le r_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2016] 区间", "background": "", "description": "在数轴上有 $n$ 个闭区间从 $1$ 至 $n$ 编号，第 $i$ 个闭区间为 $[l_i,r_i]$ 。\n\n现在要从中选出 $m$ 个区间，使得这 $m$ 个区间共同包含至少一个位置。换句话说，就是使得存在一个 $x$ ，使得对于每一个被选中的区间 $[l_i,r_i]$，都有 $l_i \\leq x \\leq r_i$ 。\n\n对于一个合法的选取方案，它的花费为被选中的最长区间长度减去被选中的最短区间长度。\n\n区间 $[l_i,r_i]$ 的长度定义为 $(r_i-l_i)$ ，即等于它的右端点的值减去左端点的值。\n\n求所有合法方案中最小的花费。如果不存在合法的方案，输出 $-1$。", "inputFormat": "第一行包含两个整数，分别代表 $n$ 和 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行两个整数表示一个区间，第 $(i + 1)$ 行的整数 $l_i, r_i$ 分别代表第 $i$ 个区间的左右端点。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "#### 样例输入输出 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qoddox9k.png)\n \n 如图，当 $n=6$，$m=3$ 时，花费最小的方案是选取 $[3,5],[3,4],[1,4]$ 这三个区间，它们共同包含了 $4$ 这个位置，所以是合法的。其中最长的区间是 $[1, 4]$，最短的区间是 $[3, 4]$，所以它的花费是 $(4 - 1) - (4 - 3) = 2$。\n\n#### 数据规模与约定\n\n::cute-table{tuack}\n\n本题共 20 个测试点，各测试点信息如下表。\n| 测试点编号 | $ n= $ | $ m= $ | $ l_i,r_i $ |\n|:-:|:-:|:-:|:-:|\n| 1 | $ 20 $ | $ 9 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 2 | ^ | $ 10 $ | $ 0 \\le l_i \\le r_i \\le 100 $ |\n| 3 | $ 199 $ | $ 3 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 4 | $ 200 $ | ^ | ^ |\n| 5 | $ 1000 $ | $ 2 $ | ^ |\n| 6 | $ 2000 $ | ^ | ^ |\n| 7 | $ 199 $ | $ 60 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 8 | $ 200 $ | $ 50 $ | ^ |\n| 9 | ^ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 10 | $ 1999 $ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 5000 $ |\n| 11 | $ 2000 $ | $ 400 $ | ^ |\n| 12 | ^ | $ 500 $ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 13 | $ 30000 $ | $ 2000 $ | $ 0 \\le l_i \\le r_i \\le 100000 $ |\n| 14 | $ 40000 $ | $ 1000 $ | ^ |\n| 15 | $ 50000 $ | $ 15000 $ | ^ |\n| 16 | $ 100000 $ | $ 20000 $ | ^ |\n| 17 | $ 200000 $ | ^ | $ 0 \\le l_i \\le r_i \\le 10^9 $ |\n| 18 | $ 300000 $ | $ 50000 $ | ^ |\n| 19 | $ 400000 $ | $ 90000 $ | ^ |\n| 20 | $ 500000 $ | $ 200000 $ | ^ |\n\n对于全部的测试点，保证 $1 \\leq m \\leq n$，$1 \\leq n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$0 \\leq l_i \\leq r_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P1713", "type": "P", "difficulty": 7, "samples": [["4 3\n1 1\n2 3\n4 2\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "轮廓线 DP"], "title": "麦当劳叔叔的难题", "background": "", "description": "话说我们铭铭小朋友成功的回答了爸爸的问题，自然少不了要去索要些奖励，抠门的爸爸一看报纸，嘿，门口的麦当劳在搞活动，还有免费午餐哦，不过前提条件：得正确回答麦当劳叔叔的问题。\n\n问题是这样描述的：\n\n“我面前有很多个小朋友，我希望你帮我找到一个最聪明的小朋友。我心目中最聪明的就是第一个跑进麦当劳大门的，我希望你帮我找出最聪明和最不聪明的小朋友，可能的最大的到达时间差。但是，小朋友只能按照一个特殊的规则前进。小朋友面前有一个 $n\\times n$ 的格子矩阵，左下角的格子是起点，右上角的格子是大门。每个孩子每秒可以走向 上、下、左、右 前进一个格子，每个格子只能经过一次。但矩阵中间有一些障碍区，不能通过，只能绕过。”\n\n例如，$4\\times 4$ 的矩阵，格子 $(1, 1),(2, 3),(4, 2) $ 为障碍区，黑格子就是一条可行的路线。时间为 $7$。\n", "inputFormat": "第一行为两个整数 $n, m$。\n\n第二至第 $m+1$ 行里，每行描述一个障碍区。用两个整数表示 $x, y$。\n", "outputFormat": "仅一行，那个最大的时间差。\n", "hint": "$2\\le n\\le 10$，$0\\le m\\le 100$，$1\\leq x,y\\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "Ronald McDonald's Dilemma", "background": "", "description": "Mingming has just answered his dad's question correctly and, of course, wants a reward. His stingy dad spots a newspaper ad: the McDonald's at their doorstep is running a promotion—there is even a free lunch. But there is a catch: you must correctly answer Ronald McDonald's question.\n\nThe question is as follows:\n\n“There are many kids in front of me. I want you to help me find the smartest kid. In my mind, the smartest is the one who first runs into the McDonald's door. I want you to find the maximum possible difference in arrival times between the smartest and the least smart kid. However, the kids can only move according to a special rule. In front of them is an $ n \\times n $ grid. The bottom-left cell is the start, and the top-right cell is the door. Each child can move one cell per second in one of the four directions: up, down, left, or right. Each cell can be visited at most once. Some cells in the grid are obstacles and cannot be passed; they must be detoured.”\n\nFor example, in a $ 4 \\times 4 $ grid, cells $ (1, 1), (2, 3), (4, 2) $ are obstacles. The black cells indicate one feasible route. The time is $ 7 $.", "inputFormat": "The first line contains two integers $ n, m $.\n\nEach of the next $ m $ lines describes one obstacle, given by two integers $ x, y $.", "outputFormat": "Output a single line containing the maximum time difference.", "hint": "Constraints: $ 2 \\le n \\le 10 $, $ 0 \\le m \\le 100 $, $ 1 \\le x, y \\le n $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "麦当劳叔叔的难题", "background": "", "description": "话说我们铭铭小朋友成功的回答了爸爸的问题，自然少不了要去索要些奖励，抠门的爸爸一看报纸，嘿，门口的麦当劳在搞活动，还有免费午餐哦，不过前提条件：得正确回答麦当劳叔叔的问题。\n\n问题是这样描述的：\n\n“我面前有很多个小朋友，我希望你帮我找到一个最聪明的小朋友。我心目中最聪明的就是第一个跑进麦当劳大门的，我希望你帮我找出最聪明和最不聪明的小朋友，可能的最大的到达时间差。但是，小朋友只能按照一个特殊的规则前进。小朋友面前有一个 $n\\times n$ 的格子矩阵，左下角的格子是起点，右上角的格子是大门。每个孩子每秒可以走向 上、下、左、右 前进一个格子，每个格子只能经过一次。但矩阵中间有一些障碍区，不能通过，只能绕过。”\n\n例如，$4\\times 4$ 的矩阵，格子 $(1, 1),(2, 3),(4, 2) $ 为障碍区，黑格子就是一条可行的路线。时间为 $7$。\n", "inputFormat": "第一行为两个整数 $n, m$。\n\n第二至第 $m+1$ 行里，每行描述一个障碍区。用两个整数表示 $x, y$。\n", "outputFormat": "仅一行，那个最大的时间差。\n", "hint": "$2\\le n\\le 10$，$0\\le m\\le 100$，$1\\leq x,y\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P1714", "type": "P", "difficulty": 3, "samples": [["5 2\n1 2 3 4 5", "9"], ["6 3\n1 -2 3 -4 5 -6", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["单调队列", "前缀和", "队列", "ST 表"], "title": "切蛋糕", "background": "", "description": "今天是小 Z 的生日，同学们为他带来了一块蛋糕。这块蛋糕是一个长方体，被用不同色彩分成了 $n$ 个相同的小块，每小块都有对应的幸运值。\n\n小 Z 作为寿星，自然希望吃到的蛋糕的幸运值总和最大，但小 Z 最多又只能吃 $m(m\\le n)$ 小块的蛋糕。\n\n请你帮他从这 $n$ 小块中找出**连续**的 $k(1 \\le k\\le m)$ 块蛋糕，使得其上的总幸运值最大。\n\n**形式化地**，在数列 $\\{p_n\\}$ 中，找出一个子段 $[l,r](r-l+1\\le m)$，最大化 $\\sum\\limits_{i=l}^rp_i$。", "inputFormat": "第一行两个整数 $n,m$。分别代表共有 $n$ 小块蛋糕，小 Z 最多只能吃 $m$ 小块。\n\n第二行 $n$ 个整数，第 $i$ 个整数 $p_i$ 代表第 $i$ 小块蛋糕的幸运值。", "outputFormat": "仅一行一个整数，即小 Z 能够得到的最大幸运值。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，有 $1\\le n\\le100$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le5\\times 10^5$，$|p_i|≤500$。\n\n保证答案的绝对值在 $[0,2^{31}-1]$ 之内。", "locale": "zh-CN", "translations": {"en": {"title": "Cutting Cake", "background": "", "description": "Today is Xiao Z's birthday, and his classmates brought him a cake. The cake is a rectangular prism, divided into $n$ identical small pieces with different colors, and each small piece has a corresponding lucky value.\n\nAs the birthday person, Xiao Z naturally wants the sum of lucky values of the cake he eats to be as large as possible, but Xiao Z can eat at most $m(m\\le n)$ small pieces of cake.\n\nPlease help him choose $k(1 \\le k\\le m)$ consecutive pieces among these $n$ pieces so that their total lucky value is maximized.\n\nFormally, in the sequence $\\{p_n\\}$, find a subsegment $[l,r](r-l+1\\le m)$ that maximizes $\\sum\\limits_{i=l}^rp_i$.", "inputFormat": "The first line contains two integers $n,m$. They represent that there are $n$ small pieces in total, and Xiao Z can eat at most $m$ small pieces.\n\nThe second line contains $n$ integers. The $i$-th integer $p_i$ represents the lucky value of the $i$-th small piece of cake.", "outputFormat": "Output a single integer in one line, which is the maximum lucky value Xiao Z can obtain.", "hint": "Constraints and Conventions.\n\n- For $20\\%$ of the testdata, $1\\le n\\le100$.\n- For $100\\%$ of the testdata, $1\\le n\\le5\\times 10^5$, $|p_i|≤500$.\n\nIt is guaranteed that the absolute value of the answer is within $[0,2^{31}-1]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "切蛋糕", "background": "", "description": "今天是小 Z 的生日，同学们为他带来了一块蛋糕。这块蛋糕是一个长方体，被用不同色彩分成了 $n$ 个相同的小块，每小块都有对应的幸运值。\n\n小 Z 作为寿星，自然希望吃到的蛋糕的幸运值总和最大，但小 Z 最多又只能吃 $m(m\\le n)$ 小块的蛋糕。\n\n请你帮他从这 $n$ 小块中找出**连续**的 $k(1 \\le k\\le m)$ 块蛋糕，使得其上的总幸运值最大。\n\n**形式化地**，在数列 $\\{p_n\\}$ 中，找出一个子段 $[l,r](r-l+1\\le m)$，最大化 $\\sum\\limits_{i=l}^rp_i$。", "inputFormat": "第一行两个整数 $n,m$。分别代表共有 $n$ 小块蛋糕，小 Z 最多只能吃 $m$ 小块。\n\n第二行 $n$ 个整数，第 $i$ 个整数 $p_i$ 代表第 $i$ 小块蛋糕的幸运值。", "outputFormat": "仅一行一个整数，即小 Z 能够得到的最大幸运值。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，有 $1\\le n\\le100$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le5\\times 10^5$，$|p_i|≤500$。\n\n保证答案的绝对值在 $[0,2^{31}-1]$ 之内。", "locale": "zh-CN"}}}
{"pid": "P1715", "type": "P", "difficulty": 5, "samples": [["7\n3 6\n17 15\n13 15\n6 12\n9 1\n2 7\n10 19", "28\n6\n1\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "2016", "USACO", "容斥原理", "分类讨论"], "title": "[USACO16DEC] Lots of Triangles P", "background": "", "description": "Farmer John is thinking of selling some of his land to earn a bit of extra income. His property contains $N$ trees ($3 \\leq N \\leq 300$), each described by a point in the 2D plane, no three of which are collinear. FJ is thinking about selling triangular lots of land defined by having trees at their vertices; there are of course $L = \\binom{N}{3}$ such lots he can consider, based on all possible triples of trees on his property.\n\nA triangular lot has value $v$ if it contains exactly $v$ trees in its interior (the trees on the corners do not count, and note that there are no trees on the boundaries since no three trees are collinear). For every $v = 0 \\ldots N-3$, please help FJ determine how many of his $L$ potential lots have value $v$.", "inputFormat": "The first line of input contains $N$.\n\nThe following $N$ lines contain the $x$ and $y$ coordinates of a single tree; these are both integers in the range $0 \\ldots 1,000,000$.", "outputFormat": "Output $N-2$ lines, where output line $i$ contains a count of the number of lots having value $i-1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16DEC] Lots of Triangles P", "background": "", "description": "Farmer John is thinking of selling some of his land to earn a bit of extra income. His property contains $N$ trees ($3 \\leq N \\leq 300$), each described by a point in the 2D plane, no three of which are collinear. FJ is thinking about selling triangular lots of land defined by having trees at their vertices; there are of course $L = \\binom{N}{3}$ such lots he can consider, based on all possible triples of trees on his property.\n\nA triangular lot has value $v$ if it contains exactly $v$ trees in its interior (the trees on the corners do not count, and note that there are no trees on the boundaries since no three trees are collinear). For every $v = 0 \\ldots N-3$, please help FJ determine how many of his $L$ potential lots have value $v$.", "inputFormat": "The first line of input contains $N$.\n\nThe following $N$ lines contain the $x$ and $y$ coordinates of a single tree; these are both integers in the range $0 \\ldots 1,000,000$.", "outputFormat": "Output $N-2$ lines, where output line $i$ contains a count of the number of lots having value $i-1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16DEC] Lots of Triangles P", "background": "", "description": "Farmer John 正在考虑出售他的一部分土地以赚取一些额外收入。他的财产包含 $N$ 棵树（$3 \\leq N \\leq 300$），每棵树由二维平面中的一个点描述，且任意三棵树不共线。FJ 正在考虑出售由三棵树作为顶点定义的三角形地块；显然，他可以考虑的此类地块数量为 $L = \\binom{N}{3}$，基于他财产中所有可能的三棵树组合。\n\n一个三角形地块的价值为 $v$，如果它的内部恰好包含 $v$ 棵树（顶点上的树不计入，且由于没有三棵树共线，边界上也没有树）。对于每个 $v = 0 \\ldots N-3$，请帮助 FJ 确定他的 $L$ 个潜在地块中有多少个地块的价值为 $v$。", "inputFormat": "输入的第一行包含 $N$。\n\n接下来的 $N$ 行每行包含一棵树的 $x$ 和 $y$ 坐标；这些坐标都是 $0 \\ldots 1,000,000$ 范围内的整数。", "outputFormat": "输出 $N-2$ 行，其中第 $i$ 行输出价值为 $i-1$ 的地块数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1716", "type": "P", "difficulty": 2, "samples": [["5\n10\n-1\n3\n3\n-9\n", "10\n-9\n3\n-1\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "排序"], "title": "双调序列", "background": "", "description": "电脑组的童鞋们经常玩一些智力 PK 小游戏，某月某日，发源于小朋友又发明了一种新的序列：双调序列，所谓的双调呢主要是满足如下条件描述：\n\n假定有 $n$（$n \\le 1000$）个整数（都在 `long int` 范围内，即 $-2147483648 \\sim 2147483647$），双调序列的第一个数是 $n$ 个整数中的最大数，第二个数是 $n$ 个整数中的最小数，第三个数是 $n$ 个数中的第二大数，第四个数是 $n$ 个数中的第二小数……取过的数不能再取，依次类推，直到结束。\n\n聪明的你听完描述就抿嘴笑了吧？那就请你用程序正确的帮他找出这 $n$ 个数的双调序列。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行给出了题目中所述的 $n$ 个整数，每行包含一个整数。\n", "outputFormat": "有 $n$ 行，每行为一个整数，是满足条件的双调序列\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 1000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Max-Min Alternating Sequence", "background": "", "description": "Students in the computer group often play small brain-teaser PK games. One day, a student invented a new sequence: the \"Max-Min alternating sequence,\" defined as follows:\n\nSuppose there are $n$ ($n \\le 1000$) integers (all within the `long int` range, i.e., $-2147483648 \\sim 2147483647$). The first number of the sequence is the maximum among the $n$ integers, the second number is the minimum, the third number is the second largest, the fourth number is the second smallest, and so on. Numbers that have been taken cannot be chosen again, proceeding until all numbers are used.\n\nPlease write a program to produce this sequence for the given $n$ integers.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines contain the $n$ integers described above, one integer per line.", "outputFormat": "Output $n$ lines, each containing one integer, forming the required Max-Min alternating sequence.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "双调序列", "background": "", "description": "电脑组的童鞋们经常玩一些智力 PK 小游戏，某月某日，发源于小朋友又发明了一种新的序列：双调序列，所谓的双调呢主要是满足如下条件描述：\n\n假定有 $n$（$n \\le 1000$）个整数（都在 `long int` 范围内，即 $-2147483648 \\sim 2147483647$），双调序列的第一个数是 $n$ 个整数中的最大数，第二个数是 $n$ 个整数中的最小数，第三个数是 $n$ 个数中的第二大数，第四个数是 $n$ 个数中的第二小数……取过的数不能再取，依次类推，直到结束。\n\n聪明的你听完描述就抿嘴笑了吧？那就请你用程序正确的帮他找出这 $n$ 个数的双调序列。\n", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行给出了题目中所述的 $n$ 个整数，每行包含一个整数。\n", "outputFormat": "有 $n$ 行，每行为一个整数，是满足条件的双调序列\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le n \\le 1000$。\n", "locale": "zh-CN"}}}
{"pid": "P1717", "type": "P", "difficulty": 4, "samples": [["2\n1\n10 1\n2 5\n2\n", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "堆"], "title": "钓鱼", "background": null, "description": "话说发源于小朋友精心设计的游戏被电脑组的童鞋们藐杀之后非常不爽，为了表示安慰和鼓励，VIP999 决定请他吃一次“年年大丰收”，为了表示诚意，他还决定亲自去钓鱼。\n\n但是，因为还要准备 NOIP2013, z 老师只给了他 $H$ 个小时的空余时间，假设有 $n$ 个鱼塘都在一条水平路边，从左边到右编号为 $1,2,3\\dots n$ 。\n\nVIP 是个很讲究效率的孩子，他希望用这些时间钓到尽量多的鱼。他从湖 $1$ 出发，向右走，有选择的在一些湖边停留一定的时间钓鱼，最后在某一个湖边结束钓鱼。他测出从第 $i$ 个湖到 $i+1$ 个湖需要走 $5 \\times t_i$ 分钟的路，还测出在第 $i$ 个湖边停留，第一个 $5$ 分钟可以钓到鱼 $f_i$，以后再每钓 $5$ 分钟鱼，鱼量减少 $d_i$。为了简化问题，他假定没有其他人钓鱼，也不会有其他因素影响他钓到期望数量的鱼。请编程求出能钓最多鱼的数量。", "inputFormat": "第一行：湖的数量 $n$。\n\n第二行：时间 $H$（小时）。\n\n第三行：$n$ 个数，$f_1,f_2,\\dots,f_n$。\n\n第四行：$n$ 个数，$d_1,d_2,\\dots,d_n$。\n\n第五行：$n-1$ 个数，$t_1,t_2,\\dots,t_{n-1}$", "outputFormat": "一个数，所能钓鱼的最大数量。", "hint": "数据范围：$1\\le H \\le 16,2\\le n \\le 25,1\\le f_i\\le 200,0\\le d_i\\le 20,1\\le t_i\\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Fishing", "background": "", "description": "After the Computer Group classmates easily beat a carefully designed game made by a younger kid, he felt very upset. To comfort and encourage him, VIP999 decided to treat him to \"Niannian Dafengshou\" (pinyin), and to show sincerity, he also decided to go fishing himself.\n\nHowever, since he still needs to prepare for NOIP 2013, Teacher z only gave him $H$ hours of free time. Suppose there are $n$ fish ponds along a horizontal road, numbered from left to right as $1, 2, 3, \\dots, n$.\n\nVIP is very efficient. He wants to catch as many fish as possible within this time. He starts from lake $1$ and walks to the right, optionally stopping at some lakes to fish for some time, and finally ends fishing at some lake. He measured that walking from lake $i$ to lake $i+1$ takes $5 \\times t_i$ minutes, and when staying at lake $i$, the first $5$ minutes yield $f_i$ fish. After that, for every additional $5$ minutes of fishing, the number of fish decreases by $d_i$. To simplify the problem, assume there are no other anglers and no other factors affecting the expected number of fish he catches. Please write a program to compute the maximum number of fish he can catch.", "inputFormat": "- Line 1: The number of lakes $n$.\n- Line 2: Time $H$ (hours).\n- Line 3: $n$ numbers: $f_1, f_2, \\dots, f_n$.\n- Line 4: $n$ numbers: $d_1, d_2, \\dots, d_n$.\n- Line 5: $n - 1$ numbers: $t_1, t_2, \\dots, t_{n-1}$.", "outputFormat": "One integer: the maximum number of fish that can be caught.", "hint": "Constraints: $1 \\le H \\le 16$, $2 \\le n \\le 25$, $1 \\le f_i \\le 200$, $0 \\le d_i \\le 20$, $1 \\le t_i \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "钓鱼", "background": null, "description": "话说发源于小朋友精心设计的游戏被电脑组的童鞋们藐杀之后非常不爽，为了表示安慰和鼓励，VIP999 决定请他吃一次“年年大丰收”，为了表示诚意，他还决定亲自去钓鱼。\n\n但是，因为还要准备 NOIP2013, z 老师只给了他 $H$ 个小时的空余时间，假设有 $n$ 个鱼塘都在一条水平路边，从左边到右编号为 $1,2,3\\dots n$ 。\n\nVIP 是个很讲究效率的孩子，他希望用这些时间钓到尽量多的鱼。他从湖 $1$ 出发，向右走，有选择的在一些湖边停留一定的时间钓鱼，最后在某一个湖边结束钓鱼。他测出从第 $i$ 个湖到 $i+1$ 个湖需要走 $5 \\times t_i$ 分钟的路，还测出在第 $i$ 个湖边停留，第一个 $5$ 分钟可以钓到鱼 $f_i$，以后再每钓 $5$ 分钟鱼，鱼量减少 $d_i$。为了简化问题，他假定没有其他人钓鱼，也不会有其他因素影响他钓到期望数量的鱼。请编程求出能钓最多鱼的数量。", "inputFormat": "第一行：湖的数量 $n$。\n\n第二行：时间 $H$（小时）。\n\n第三行：$n$ 个数，$f_1,f_2,\\dots,f_n$。\n\n第四行：$n$ 个数，$d_1,d_2,\\dots,d_n$。\n\n第五行：$n-1$ 个数，$t_1,t_2,\\dots,t_{n-1}$", "outputFormat": "一个数，所能钓鱼的最大数量。", "hint": "数据范围：$1\\le H \\le 16,2\\le n \\le 25,1\\le f_i\\le 200,0\\le d_i\\le 20,1\\le t_i\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P1718", "type": "P", "difficulty": 2, "samples": [["5\r\n1 3\r\n3 2\r\n2 4\r\n4 5\r\n5 1\r\n1 4\r\n3 4\r\n", "1 3 2 4 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "图形复原", "background": "", "description": "HWX 小朋友对几何的热爱在电脑组是出了名的，号称“每题必解”，这天，LXC 在玩 logo 的时候突然想到了一个题目，刚好可以去测试一下他封号的虚实，于是，他 logo 编程画了一个 $n$ 边形，并且将 $n$ 个顶点用 $1, 2, 3, \\ldots, n$ 这 $n$ 个连续自然数随手编了个号，为了增加难度，他又画了一些不相交的对角线。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4g8ij0r9.png)\n\n他把所有的边和对角线都写在一张纸上，对于上图，他写了：$(1, 3)$、$(3, 2)$、$(2, 4)$、$(4, 5)$、$(5, 1)$、$(1, 4)$、$(3, 4)$。正得意的时候，电脑突然自动重启了，郁闷的是，他忘记保存刚才的 logo 程序了，此刻的他很想利用纸上记录的信息将这个 $n$ 边形的编号复原，电脑组的你能帮助他吗？\n", "inputFormat": "第一行 $n$（$n \\le 50$）\n\n下面若干行，每行两个数 $a, b$，表示纸上记录的信息。\n", "outputFormat": "仅一行，按字典序较小的顺序依次输出顶点的编号。对于上面的例子，你的输出应该是 `1 3 2 4 5`。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Polygon Label Restoration", "background": "", "description": "HWX is well-known in the computer group for his love of geometry and is reputed to \"solve every problem.\" One day, while LXC was playing with Logo, he suddenly thought of a problem that could test HWX’s reputation. He used Logo to draw an $n$-gon and casually labeled its $n$ vertices with the consecutive natural numbers $1, 2, 3, \\ldots, n$. To increase the difficulty, he also drew some non-intersecting diagonals. As shown in the figure:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4g8ij0r9.png)\n\nHe wrote down all the sides and diagonals on a piece of paper. For the figure above, he wrote: $(1, 3)$, $(3, 2)$, $(2, 4)$, $(4, 5)$, $(5, 1)$, $(1, 4)$, $(3, 4)$. Just when he was pleased with himself, the computer suddenly rebooted automatically. Unfortunately, he had forgotten to save the Logo program. Now he wants to use the recorded information on the paper to restore the labeling of the $n$-gon. Can you help him?", "inputFormat": "The first line contains $n$ ($n \\le 50$).\n\nThe following lines each contain two integers $a, b$, representing one recorded segment (either a side or a diagonal). Input continues until EOF.", "outputFormat": "Output a single line listing the labels of the vertices in order around the polygon. If both directions are possible, output the lexicographically smaller sequence. For the example above, your output should be `1 3 2 4 5`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "图形复原", "background": "", "description": "HWX 小朋友对几何的热爱在电脑组是出了名的，号称“每题必解”，这天，LXC 在玩 logo 的时候突然想到了一个题目，刚好可以去测试一下他封号的虚实，于是，他 logo 编程画了一个 $n$ 边形，并且将 $n$ 个顶点用 $1, 2, 3, \\ldots, n$ 这 $n$ 个连续自然数随手编了个号，为了增加难度，他又画了一些不相交的对角线。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4g8ij0r9.png)\n\n他把所有的边和对角线都写在一张纸上，对于上图，他写了：$(1, 3)$、$(3, 2)$、$(2, 4)$、$(4, 5)$、$(5, 1)$、$(1, 4)$、$(3, 4)$。正得意的时候，电脑突然自动重启了，郁闷的是，他忘记保存刚才的 logo 程序了，此刻的他很想利用纸上记录的信息将这个 $n$ 边形的编号复原，电脑组的你能帮助他吗？\n", "inputFormat": "第一行 $n$（$n \\le 50$）\n\n下面若干行，每行两个数 $a, b$，表示纸上记录的信息。\n", "outputFormat": "仅一行，按字典序较小的顺序依次输出顶点的编号。对于上面的例子，你的输出应该是 `1 3 2 4 5`。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1719", "type": "P", "difficulty": 3, "samples": [["4\n0 -2 -7 0\n 9 2 -6 2\n-4 1 -4  1 \n-1 8  0 -2\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "枚举", "前缀和"], "title": "最大加权矩形", "background": null, "description": "为了更好地备战 NOIP 2013，电脑组的几个女孩子 LYQ,ZSC,ZHQ 认为：我们不光需要机房，我们还需要运动。于是她们决定找校长申请一块电脑组的课余运动场地。听说她们都是电脑组的高手，校长没有马上答应他们，而是先给她们出了一道数学题，并告诉她们，她们能获得的运动场地的面积就是她们能找到的这个最大的数字。\n\n校长给她们一个大小为 $n\\times n$ 的矩阵，矩阵中的每一个元素都有一个整数权值，要她们求出该矩阵中的最大加权矩形（即从中找一大小不限的矩形，使其中包含的所有元素的权值和最大）中所有元素的权值和，且矩阵中每个元素的权值均在区间 $[-127,127]$ 内。\n\n几个女孩子有点犯难了，于是就找到了电脑组精打细算的 HZH,TZY 小朋友帮忙计算，但是遗憾的是，他们的答案都不一样。涉及土地的事情我们可不能含糊，你能帮忙计算出校长所给的矩形中加权和最大的矩形吗？", "inputFormat": "第一行包含一个正整数 $n$。\n\n接下来 $n$ 行每行包含 $n$ 个整数，表示给定的矩阵。", "outputFormat": "输出一行一个整数，表示该矩阵的最大加权矩形中所有元素的权值和。", "hint": "### 样例解释\n该矩阵中的最大加权矩形为\n```text\n9  2\n-4  1\n-1  8\n```\n它们的和为 $15$。\n### 数据范围\n对于 $100\\%$ 的数据，$1 \\leq n\\le 120$。", "locale": "zh-CN", "translations": {"en": {"title": "Maximum Weighted Rectangle", "background": null, "description": "To better prepare for NOIP 2013, several girls from the computer group—LYQ, ZSC, and ZHQ—believed that they needed not only a computer room but also physical exercise. So they decided to apply to the principal for an extracurricular sports field for their group. Hearing that they were all skilled members of the computer group, the principal did not immediately agree but first gave them a math problem. He told them that the area of the sports field they could obtain would be the largest number they could find from the problem.\n\nThe principal gave them an $n \\times n$ matrix where each element has an integer weight. They need to find the maximum weighted rectangle in the matrix (i.e., find a rectangle of any size such that the sum of all elements it contains is maximized) and output the sum of all elements in that rectangle. The weight of each element in the matrix is within the range $[-127, 127]$.\n\nThe girls found this a bit challenging, so they sought help from two meticulous young members of the computer group, HZH and TZY. Unfortunately, their answers differed. We cannot afford to be sloppy when it comes to land matters. Can you help calculate the maximum weighted rectangle in the principal's matrix?", "inputFormat": "The first line contains a positive integer $n$.\n\nThe next $n$ lines each contain $n$ integers, representing the given matrix.", "outputFormat": "Output a single integer representing the sum of all elements in the maximum weighted rectangle of the matrix.", "hint": "### Explanation\nThe maximum weighted rectangle in this matrix is:\n```text\n9  2\n-4  1\n-1  8\n```\nTheir sum is $15$.\n### Data Range\nFor $100\\%$ of the data, $1 \\le n \\le 120$.\n\nTranslated by Kimi K2 Thinking.", "locale": "en"}, "zh-CN": {"title": "最大加权矩形", "background": null, "description": "为了更好地备战 NOIP 2013，电脑组的几个女孩子 LYQ,ZSC,ZHQ 认为：我们不光需要机房，我们还需要运动。于是她们决定找校长申请一块电脑组的课余运动场地。听说她们都是电脑组的高手，校长没有马上答应他们，而是先给她们出了一道数学题，并告诉她们，她们能获得的运动场地的面积就是她们能找到的这个最大的数字。\n\n校长给她们一个大小为 $n\\times n$ 的矩阵，矩阵中的每一个元素都有一个整数权值，要她们求出该矩阵中的最大加权矩形（即从中找一大小不限的矩形，使其中包含的所有元素的权值和最大）中所有元素的权值和，且矩阵中每个元素的权值均在区间 $[-127,127]$ 内。\n\n几个女孩子有点犯难了，于是就找到了电脑组精打细算的 HZH,TZY 小朋友帮忙计算，但是遗憾的是，他们的答案都不一样。涉及土地的事情我们可不能含糊，你能帮忙计算出校长所给的矩形中加权和最大的矩形吗？", "inputFormat": "第一行包含一个正整数 $n$。\n\n接下来 $n$ 行每行包含 $n$ 个整数，表示给定的矩阵。", "outputFormat": "输出一行一个整数，表示该矩阵的最大加权矩形中所有元素的权值和。", "hint": "### 样例解释\n该矩阵中的最大加权矩形为\n```text\n9  2\n-4  1\n-1  8\n```\n它们的和为 $15$。\n### 数据范围\n对于 $100\\%$ 的数据，$1 \\leq n\\le 120$。", "locale": "zh-CN"}}}
{"pid": "P1720", "type": "P", "difficulty": 1, "samples": [["6", "8.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "递推", "洛谷原创", "Fibonacci 数列"], "title": "月落乌啼算钱（斐波那契数列）", "background": "（本道题目木有隐藏歌曲……不用猜了……）\n\n《爱与愁的故事第一弹·heartache》最终章。\n\n吃完 pizza，月落乌啼知道超出自己的预算了。为了不在爱与愁大神面前献丑，只好还是硬着头皮去算钱……\n", "description": "算完钱后，月落乌啼想着：“你坑我！”于是当爱与愁大神问多少钱时，月落乌啼说了一堆乱码。爱与愁大神说：“算了算了，我只问第 $n$ 样菜价格多少？”月落乌啼写出了：\n\n$$F_n=\\dfrac{\\left(\\frac{1+\\sqrt{5}}{2}\\right)^n-\\left(\\frac{1-\\sqrt{5}}{2}\\right)^n}{\\sqrt{5}}$$\n\n由于爱与愁大神学过编程，于是就用 $1$ 分钟的时间求出了 $F_n$ 的结果。月落乌啼为此大吃一惊。你能学学爱与愁大神求出 $F_n$ 的值吗？\n\n", "inputFormat": "一行一个自然数 $n$。", "outputFormat": "只有 $1$ 行一个实数 $F_n$，保留两位小数。", "hint": "对于所有数据：$0 \\leq n\\leq 48$。", "locale": "zh-CN", "translations": {"en": {"title": "Yue Luo Wu Ti Counts Money (Fibonacci Sequence)", "background": "(This problem has no hidden song... no need to guess.)\n\nThe final chapter of \"The Story of Love and Sorrow, Part 1 · heartache.\"\n\nAfter eating pizza, Yue Luo Wu Ti knew he had gone over his budget. To avoid embarrassing himself in front of Ai Yu Chou, he braced himself to settle the bill.", "description": "After paying, Yue Luo Wu Ti thought, \"You ripped me off!\" So when Ai Yu Chou asked how much it cost, Yue Luo Wu Ti replied with a bunch of gibberish. Ai Yu Chou said, \"Forget it, I only ask: what is the price of the $n$-th dish?\" Yue Luo Wu Ti wrote:\n\n$$F_n=\\dfrac{\\left(\\frac{1+\\sqrt{5}}{2}\\right)^n-\\left(\\frac{1-\\sqrt{5}}{2}\\right)^n}{\\sqrt{5}}$$\n\nSince Ai Yu Chou had studied programming, he computed $F_n$ in $1$ minute. Yue Luo Wu Ti was shocked. Can you, like Ai Yu Chou, compute the value of $F_n$?", "inputFormat": "One line containing a non-negative integer $n$.", "outputFormat": "One line containing a real number $F_n$, with two decimal places.", "hint": "For all testdata: $0 \\leq n \\leq 48$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "月落乌啼算钱（斐波那契数列）", "background": "（本道题目木有隐藏歌曲……不用猜了……）\n\n《爱与愁的故事第一弹·heartache》最终章。\n\n吃完 pizza，月落乌啼知道超出自己的预算了。为了不在爱与愁大神面前献丑，只好还是硬着头皮去算钱……\n", "description": "算完钱后，月落乌啼想着：“你坑我！”于是当爱与愁大神问多少钱时，月落乌啼说了一堆乱码。爱与愁大神说：“算了算了，我只问第 $n$ 样菜价格多少？”月落乌啼写出了：\n\n$$F_n=\\dfrac{\\left(\\frac{1+\\sqrt{5}}{2}\\right)^n-\\left(\\frac{1-\\sqrt{5}}{2}\\right)^n}{\\sqrt{5}}$$\n\n由于爱与愁大神学过编程，于是就用 $1$ 分钟的时间求出了 $F_n$ 的结果。月落乌啼为此大吃一惊。你能学学爱与愁大神求出 $F_n$ 的值吗？\n\n", "inputFormat": "一行一个自然数 $n$。", "outputFormat": "只有 $1$ 行一个实数 $F_n$，保留两位小数。", "hint": "对于所有数据：$0 \\leq n\\leq 48$。", "locale": "zh-CN"}}}
{"pid": "P1721", "type": "P", "difficulty": 7, "samples": [["3 1 3\n1 4 3", "2.666667"], ["3 2 3\n1 4 3", "3.000000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2016", "NOI", "Special Judge", "斜率优化"], "title": "[NOI2016] 国王饮水记", "background": "", "description": "跳蚤国有 $n$ 个城市，伟大的跳蚤国王居住在跳蚤国首都中，即 $1$ 号城市中。\n\n跳蚤国最大的问题就是饮水问题，由于首都中居住的跳蚤实在太多，跳蚤国王又体恤地将分配给他的水也给跳蚤国居民饮用，这导致跳蚤国王也经常喝不上水。\n\n于是，跳蚤国在每个城市都修建了一个圆柱形水箱，这些水箱完全相同且足够高。一个雨天后，第 $i$ 个城市收集到了高度为 $h_i$ 的水。由于地理和天气因素的影响，任何两个不同城市收集到的水高度互不相同。\n\n跳蚤国王也请来蚂蚁工匠帮忙，建立了一个庞大的地下连通系统。跳蚤国王每次使用地下连通系统时，可以指定任意多的城市，将这些城市的水箱用地下连通系统连接起来足够长的时间之后，再将地下连通系统关闭。由连通器原理，这些城市的水箱中的水在这次操作后会到达同一高度，并且这一高度等于指定的各水箱高度的平均值。\n\n由于地下连通系统的复杂性，跳蚤国王至多只能使用 $k$ 次地下连通系统。\n\n跳蚤国王请你告诉他，首都 $1$ 号城市水箱中的水位最高能有多高？", "inputFormat": "输入的第一行包含三个正整数 $n,k,p$ 分别表示跳蚤国中城市的数量，跳蚤国王能使用地下连通系统的最多次数，以及你输出的答案要求的精度。$p$ 的含义将在输出格式中解释。\n\n接下来一行包含 $n$ 个正整数，描述城市的水箱在雨后的水位。其中第 $i$ 个正整数 $h_i$ 表示第 $i$ 个城市的水箱的水位。保证 $h_i$ 互不相同，$1 \\leq h_i \\leq 10^5$。", "outputFormat": "仅一行一个实数，表示 $1$ 号城市的水箱中的最高水位。\n\n这个实数只可以包含非负整数部分、小数点和小数部分。其中非负整数部分为必需部分，不加正负号。若有小数部分，则非负整数部分与小数部分之间以一个小数点隔开。若无小数部分，则不加小数点。\n\n你输出的实数在小数点后不能超过 $2p$ 位，建议保留至少 $p$ 位。数据保证参考答案与真实答案的绝对误差小于 $10^{-2p}$。\n\n你的输出被判定为正确当且仅当你的输出与参考答案的绝对误差小于 $10^{-p}$。\n\n如果你的输出与参考答案的绝对误差不小于 $10^{-p}$ 但小于 $10^{-5}$，你可以获得该测试点 $40\\%$ 的分数。", "hint": "### 样例解释 1\n\n由于至多使用一次地下连通系统，有以下五种方案：\n \n1. 不使用地下连通系统：此时 $1$ 号城市的水箱水位为 $1$。 \n2. 使用一次连通系统，连通 $1$、$2$ 号：此时 $1$ 号城市的水箱水位为 $5/2$。 \n3. 使用一次连通系统，连通 $1$、$3$ 号：此时 $1$ 号城市的水箱水位为 $2$。 \n4. 使用一次连通系统，连通 $2$、$3$ 号：此时 $1$ 号城市的水箱水位为 $1$。 \n5. 使用一次连通系统，连通 $1$、$2$、$3$ 号：此时 $1$ 号城市的水箱水位为 $8/3$。\n\n### 样例解释 2\n\n此时最优方案为使用两次连通系统，第一次连通 $1,3$ 号，第二次连通 $1,2$ 号。\n\n### 样例 3\n\n详见附加文件。\n\n### 提示\n\n为保证答案精度，我们一般需要尽可能地在运算过程中保留超过 $p$ 位小数。我们可以证明，在各个子任务的参考算法中都能保证，在任何时候始终保留 $\\frac{6}{5}p$ 位小数时，对任何输入得到的输出，与参考答案的绝对误差都小于 $10^{-p}$。\n\n为了方便选手处理高精度小数，我们提供了定点高精度小数类。选手可以根据自己的需要参考与使用该类，也可以不使用该类。其具体的使用方法请参考下发的文档 `decimal.pdf`（见附件）。\n\n### 数据范围\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $k$ | $p$ |\n|:-:|:-:|:-:|:-:|\n| 1 | $\\le 2$ | $\\le 5$ | $=5$ |\n| $2$ | $\\le 4$ | ^ | ^ |\n| $3$ | ^ | ^ | ^ |\n| 4 | $\\le 10$ | $=1$ | ^ |\n| $5$ | ^ | $=10^9$ | ^ |\n| $6$ | ^ | $\\le 10$ | ^ |\n| $7$ | ^ | ^ | ^ |\n| $8$ | $\\le 100$ | $=1$ | ^ |\n| $9$ | ^ | $=10^9$ | $=40$ |\n| $10$ | ^ | $\\le 10^9$ | ^ |\n| $11$ | ^ | ^ | ^ |\n| $12$ | ^ | ^ | ^ |\n| $13$ | $\\le 250$ | ^ | $=100$ |\n| $14$ | $\\le 500$ | ^ | $=200$ |\n| $15$ | $\\le 700$ | ^ | $=300$ |\n| $16$ | ^ | ^ | ^ |\n| $17$ | ^ | ^ | ^ |\n| $18$ | $\\le 2500$ | ^ | $=1000$ |\n| $19$ | $\\le 4000$ | ^ | $=1500$ |\n| $20$ | $\\le 8000$ | ^ | $=3000$ |", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2016] The King's Drinking Water", "background": "", "description": "The Flea Kingdom has $n$ cities. The great Flea King lives in the capital of the Flea Kingdom, that is, in city $1$.\n\nThe biggest problem in the Flea Kingdom is drinking water. Because too many fleas live in the capital, and the kind Flea King also gives the water allocated to him to the residents, the Flea King often cannot get water to drink.\n\nTherefore, the Flea Kingdom built a cylindrical water tank in every city. These tanks are completely identical and tall enough. After a rainy day, city $i$ collected water with height $h_i$. Due to geographic and weather factors, the water heights collected by any two different cities are all distinct.\n\nThe Flea King also invited ant craftsmen to help build a large underground connecting system. Each time the Flea King uses the underground connecting system, he can specify any number of cities, connect the tanks of these cities with the underground system for a sufficiently long time, and then turn the system off. By the principle of communicating vessels, after this operation the water in those cities’ tanks will reach the same height, and this height equals the average of the specified tanks’ heights.\n\nBecause of the complexity of the underground system, the Flea King can use it at most $k$ times.\n\nPlease tell the Flea King: how high can the water level in the capital’s tank (city $1$) be at most?", "inputFormat": "The first line contains three positive integers $n,k,p$, representing the number of cities in the Flea Kingdom, the maximum number of times the Flea King can use the underground connecting system, and the required precision of your output. The meaning of $p$ is explained in the Output Format.\n\nThe next line contains $n$ positive integers describing the water levels in the cities’ tanks after the rain. The $i$-th integer $h_i$ is the water level in city $i$’s tank. It is guaranteed that the $h_i$ are pairwise distinct, and $1 \\leq h_i \\leq 10^5$.", "outputFormat": "Output a single real number, the maximum possible water level in city $1$’s tank.\n\nThis real number may contain only a non-negative integer part, a decimal point, and a fractional part. The non-negative integer part is required and should not have a sign. If there is a fractional part, separate it from the integer part with one decimal point; if there is no fractional part, do not print a decimal point.\n\nThe number of digits after the decimal point must not exceed $2p$. It is recommended to keep at least $p$ digits. It is guaranteed that the absolute error between the reference answer and the true answer is less than $10^{-2p}$.\n\nYour output is judged correct if and only if its absolute error with the reference answer is less than $10^{-p}$.\n\nIf the absolute error of your output is not less than $10^{-p}$ but less than $10^{-5}$, you can receive $40\\%$ of the score for that test point.", "hint": "### Sample Explanation 1\n\nSince the underground connecting system can be used at most once, there are the following five options:\n \n1. Do not use the underground system: the water level in city $1$’s tank is $1$.\n2. Use the system once to connect cities $1$ and $2$: the water level in city $1$’s tank is $5/2$.\n3. Use the system once to connect cities $1$ and $3$: the water level in city $1$’s tank is $2$.\n4. Use the system once to connect cities $2$ and $3$: the water level in city $1$’s tank is $1$.\n5. Use the system once to connect cities $1,2,3$: the water level in city $1$’s tank is $8/3$.\n\n### Sample Explanation 2\n\nThe optimal plan is to use the system twice: first connect cities $1$ and $3$, then connect cities $1$ and $2$.\n\n### Sample 3\n\nSee the attached file.\n\n### Hint\n\nTo ensure precision, we generally need to keep more than $p$ decimal digits during computation. We can prove that in the reference solutions for all sub-tasks, if we always keep $\\frac{6}{5}p$ decimal digits at any time, then for any input the absolute error of the output will be less than $10^{-p}$.\n\nTo make it easier to handle high-precision decimals, we provide a fixed-point high-precision decimal class. Contestants may refer to and use this class as needed, or choose not to use it. For specific usage, please refer to the distributed document `decimal.pdf` (see the attachment).\n\n### Constraints\n\n::cute-table{tuack}\n\n| Test Point | $n$ | $k$ | $p$ |\n|:-:|:-:|:-:|:-:|\n| 1 | $\\le 2$ | $\\le 5$ | $=5$ |\n| $2$ | $\\le 4$ | ^ | ^ |\n| $3$ | ^ | ^ | ^ |\n| 4 | $\\le 10$ | $=1$ | ^ |\n| $5$ | ^ | $=10^9$ | ^ |\n| $6$ | ^ | $\\le 10$ | ^ |\n| $7$ | ^ | ^ | ^ |\n| $8$ | $\\le 100$ | $=1$ | ^ |\n| $9$ | ^ | $=10^9$ | $=40$ |\n| $10$ | ^ | $\\le 10^9$ | ^ |\n| $11$ | ^ | ^ | ^ |\n| $12$ | ^ | ^ | ^ |\n| $13$ | $\\le 250$ | ^ | $=100$ |\n| $14$ | $\\le 500$ | ^ | $=200$ |\n| $15$ | $\\le 700$ | ^ | $=300$ |\n| $16$ | ^ | ^ | ^ |\n| $17$ | ^ | ^ | ^ |\n| $18$ | $\\le 2500$ | ^ | $=1000$ |\n| $19$ | $\\le 4000$ | ^ | $=1500$ |\n| $20$ | $\\le 8000$ | ^ | $=3000$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2016] 国王饮水记", "background": "", "description": "跳蚤国有 $n$ 个城市，伟大的跳蚤国王居住在跳蚤国首都中，即 $1$ 号城市中。\n\n跳蚤国最大的问题就是饮水问题，由于首都中居住的跳蚤实在太多，跳蚤国王又体恤地将分配给他的水也给跳蚤国居民饮用，这导致跳蚤国王也经常喝不上水。\n\n于是，跳蚤国在每个城市都修建了一个圆柱形水箱，这些水箱完全相同且足够高。一个雨天后，第 $i$ 个城市收集到了高度为 $h_i$ 的水。由于地理和天气因素的影响，任何两个不同城市收集到的水高度互不相同。\n\n跳蚤国王也请来蚂蚁工匠帮忙，建立了一个庞大的地下连通系统。跳蚤国王每次使用地下连通系统时，可以指定任意多的城市，将这些城市的水箱用地下连通系统连接起来足够长的时间之后，再将地下连通系统关闭。由连通器原理，这些城市的水箱中的水在这次操作后会到达同一高度，并且这一高度等于指定的各水箱高度的平均值。\n\n由于地下连通系统的复杂性，跳蚤国王至多只能使用 $k$ 次地下连通系统。\n\n跳蚤国王请你告诉他，首都 $1$ 号城市水箱中的水位最高能有多高？", "inputFormat": "输入的第一行包含三个正整数 $n,k,p$ 分别表示跳蚤国中城市的数量，跳蚤国王能使用地下连通系统的最多次数，以及你输出的答案要求的精度。$p$ 的含义将在输出格式中解释。\n\n接下来一行包含 $n$ 个正整数，描述城市的水箱在雨后的水位。其中第 $i$ 个正整数 $h_i$ 表示第 $i$ 个城市的水箱的水位。保证 $h_i$ 互不相同，$1 \\leq h_i \\leq 10^5$。", "outputFormat": "仅一行一个实数，表示 $1$ 号城市的水箱中的最高水位。\n\n这个实数只可以包含非负整数部分、小数点和小数部分。其中非负整数部分为必需部分，不加正负号。若有小数部分，则非负整数部分与小数部分之间以一个小数点隔开。若无小数部分，则不加小数点。\n\n你输出的实数在小数点后不能超过 $2p$ 位，建议保留至少 $p$ 位。数据保证参考答案与真实答案的绝对误差小于 $10^{-2p}$。\n\n你的输出被判定为正确当且仅当你的输出与参考答案的绝对误差小于 $10^{-p}$。\n\n如果你的输出与参考答案的绝对误差不小于 $10^{-p}$ 但小于 $10^{-5}$，你可以获得该测试点 $40\\%$ 的分数。", "hint": "### 样例解释 1\n\n由于至多使用一次地下连通系统，有以下五种方案：\n \n1. 不使用地下连通系统：此时 $1$ 号城市的水箱水位为 $1$。 \n2. 使用一次连通系统，连通 $1$、$2$ 号：此时 $1$ 号城市的水箱水位为 $5/2$。 \n3. 使用一次连通系统，连通 $1$、$3$ 号：此时 $1$ 号城市的水箱水位为 $2$。 \n4. 使用一次连通系统，连通 $2$、$3$ 号：此时 $1$ 号城市的水箱水位为 $1$。 \n5. 使用一次连通系统，连通 $1$、$2$、$3$ 号：此时 $1$ 号城市的水箱水位为 $8/3$。\n\n### 样例解释 2\n\n此时最优方案为使用两次连通系统，第一次连通 $1,3$ 号，第二次连通 $1,2$ 号。\n\n### 样例 3\n\n详见附加文件。\n\n### 提示\n\n为保证答案精度，我们一般需要尽可能地在运算过程中保留超过 $p$ 位小数。我们可以证明，在各个子任务的参考算法中都能保证，在任何时候始终保留 $\\frac{6}{5}p$ 位小数时，对任何输入得到的输出，与参考答案的绝对误差都小于 $10^{-p}$。\n\n为了方便选手处理高精度小数，我们提供了定点高精度小数类。选手可以根据自己的需要参考与使用该类，也可以不使用该类。其具体的使用方法请参考下发的文档 `decimal.pdf`（见附件）。\n\n### 数据范围\n\n::cute-table{tuack}\n\n| 测试点编号 | $n$ | $k$ | $p$ |\n|:-:|:-:|:-:|:-:|\n| 1 | $\\le 2$ | $\\le 5$ | $=5$ |\n| $2$ | $\\le 4$ | ^ | ^ |\n| $3$ | ^ | ^ | ^ |\n| 4 | $\\le 10$ | $=1$ | ^ |\n| $5$ | ^ | $=10^9$ | ^ |\n| $6$ | ^ | $\\le 10$ | ^ |\n| $7$ | ^ | ^ | ^ |\n| $8$ | $\\le 100$ | $=1$ | ^ |\n| $9$ | ^ | $=10^9$ | $=40$ |\n| $10$ | ^ | $\\le 10^9$ | ^ |\n| $11$ | ^ | ^ | ^ |\n| $12$ | ^ | ^ | ^ |\n| $13$ | $\\le 250$ | ^ | $=100$ |\n| $14$ | $\\le 500$ | ^ | $=200$ |\n| $15$ | $\\le 700$ | ^ | $=300$ |\n| $16$ | ^ | ^ | ^ |\n| $17$ | ^ | ^ | ^ |\n| $18$ | $\\le 2500$ | ^ | $=1000$ |\n| $19$ | $\\le 4000$ | ^ | $=1500$ |\n| $20$ | $\\le 8000$ | ^ | $=3000$ |", "locale": "zh-CN"}}}
{"pid": "P1722", "type": "P", "difficulty": 2, "samples": [["2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "递推", "Catalan 数"], "title": "矩阵 II", "background": "usqwedf 改编系列题。\n", "description": "\n如果你在百忙之中抽空看题，请自动跳到第六行。\n\n众所周知，在中国古代算筹中，红为正，黑为负……\n\n给定一个 $1\\times 2n$ 的矩阵（usqwedf：这不是一个 $2n$ 的队列么），现让你自由地放入红色算筹和黑色算筹，使矩阵平衡（即 $\\forall i \\in[1, 2n]$，$1\\sim i$ 格中红色算筹个数大于等于黑色算筹）。\n\n问有多少种方案满足矩阵平衡（注意红色算筹和黑色算筹的数量必须相等）。", "inputFormat": "正整数 $n$。", "outputFormat": "方案数 $t$ 对 $100$ 取模后的结果。", "hint": "样例解释： \n\n- 方案一：红，黑，红，黑\n\n- 方案二：红，红，黑，黑\n\n数据范围：\n\n$1\\le n\\le 100$", "locale": "zh-CN", "translations": {"en": {"title": "Matrix II", "background": "Adapted series by usqwedf.", "description": "If you are reading this in a rush, please jump to the sixth line.\n\nAs is well known, in ancient Chinese counting rods, red means positive and black means negative.\n\nGiven a $1 \\times 2n$ matrix (usqwedf: isn't this just a sequence of length $2n$?), you may freely place red and black counting rods so that the matrix is balanced (i.e., for all $i \\in [1, 2n]$, in positions $1$ to $i$, the number of red rods is greater than or equal to the number of black rods).\n\nHow many placements satisfy the balance condition (note that the numbers of red and black rods must be equal)?", "inputFormat": "A positive integer $n$.", "outputFormat": "The value of $t$ modulo $100$, where $t$ is the number of valid placements.", "hint": "Sample explanation:\n- Scheme 1: Red, Black, Red, Black.\n- Scheme 2: Red, Red, Black, Black.\n\nConstraints:\n\n$1 \\le n \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "矩阵 II", "background": "usqwedf 改编系列题。\n", "description": "\n如果你在百忙之中抽空看题，请自动跳到第六行。\n\n众所周知，在中国古代算筹中，红为正，黑为负……\n\n给定一个 $1\\times 2n$ 的矩阵（usqwedf：这不是一个 $2n$ 的队列么），现让你自由地放入红色算筹和黑色算筹，使矩阵平衡（即 $\\forall i \\in[1, 2n]$，$1\\sim i$ 格中红色算筹个数大于等于黑色算筹）。\n\n问有多少种方案满足矩阵平衡（注意红色算筹和黑色算筹的数量必须相等）。", "inputFormat": "正整数 $n$。", "outputFormat": "方案数 $t$ 对 $100$ 取模后的结果。", "hint": "样例解释： \n\n- 方案一：红，黑，红，黑\n\n- 方案二：红，红，黑，黑\n\n数据范围：\n\n$1\\le n\\le 100$", "locale": "zh-CN"}}}
{"pid": "P1723", "type": "P", "difficulty": 5, "samples": [["1\r\naaaaa", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "洛谷原创", "Manacher 算法"], "title": "高手过愚人节", "background": "高手组织大家过愚人节、联欢会要打出一些横幅。高手想表现得文艺一点，于是他就用一些普通人看不懂的乱码作为横幅内容。但是在这个时候，他也想让横幅更美观。\n", "description": "现在给出 $n$ 个著名的乱七八糟的乱码，高手要知道每条乱码的最美观连续子序列的长度，在高手的心目中，只有回文串才是美观的。这代表着他纯洁的爱情，又有着回环往复的美，最重要的是，对于转回了一年级的高手来说，想要求出这个太难了，因此他找到了你。（OIer 无所不能！）\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行每行一条乱码。", "outputFormat": "$n$ 行，每行为对应乱码的最美观子串的长度，即最长回文子串长（但是由于高手听不懂，我们不会这样说）。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10$，$1\\le |s_i|\\le 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "The Expert Celebrates April Fools' Day", "background": "The expert is organizing everyone to celebrate April Fools' Day, and the party needs some banners. Wanting to be a bit artistic, he uses some gibberish that ordinary people cannot understand as the banner content. But at the same time, he also wants the banners to look more aesthetic.", "description": "Now, you are given $n$ well-known pieces of messy gibberish. The expert wants to know the length of the most aesthetic contiguous subsequence of each piece. In the expert’s view, only palindromes are aesthetic. This represents his pure love and the beauty of cycles. Most importantly, for the expert who has “gone back to grade one,” this is too hard to compute, so he turns to you for help. (An OIer can do anything!)", "inputFormat": "The first line contains an integer $n$.\n\nThen follow $n$ lines, each containing one piece of gibberish.", "outputFormat": "Output $n$ lines. For each piece of gibberish, output the length of its most aesthetic substring, that is, the length of the longest palindromic substring (but since the expert does not understand, we will not call it that).", "hint": "### Constraints and Conventions\n\nFor all testdata, $1\\le n\\le 10$, $1\\le |s_i|\\le 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高手过愚人节", "background": "高手组织大家过愚人节、联欢会要打出一些横幅。高手想表现得文艺一点，于是他就用一些普通人看不懂的乱码作为横幅内容。但是在这个时候，他也想让横幅更美观。\n", "description": "现在给出 $n$ 个著名的乱七八糟的乱码，高手要知道每条乱码的最美观连续子序列的长度，在高手的心目中，只有回文串才是美观的。这代表着他纯洁的爱情，又有着回环往复的美，最重要的是，对于转回了一年级的高手来说，想要求出这个太难了，因此他找到了你。（OIer 无所不能！）\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行每行一条乱码。", "outputFormat": "$n$ 行，每行为对应乱码的最美观子串的长度，即最长回文子串长（但是由于高手听不懂，我们不会这样说）。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10$，$1\\le |s_i|\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P1724", "type": "P", "difficulty": 2, "samples": [["NSWWNSNEEWN\n12\n", "-1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "东风谷早苗", "background": "", "description": "在幻想乡，东风谷早苗是以高达控闻名的高中生宅巫女。某一天，早苗终于入手了最新款的钢达姆模型。作为最新的钢达姆，当然有了与以往不同的功能了，那就是它能够自动行走，厉害吧（好吧，我自重）。早苗的新模型可以按照输入的命令进行移动，命令包含 $\\verb|E|$、$\\verb|S|$、$\\verb|W|$、$\\verb|N|$ 四种，分别对应四个不同的方向，依次为东、南、西、北。执行某个命令时，它会向着对应方向移动一个单位。作为新型机器人，自然不会只单单执行一个命令，它可以执行命令串。对于输入的命令串，每一秒它会按照命令行动一次。而执行完命令串最后一个命令后，会自动从头开始循环。在 $0$ 时刻时早苗将钢达姆放置在了 $(0,0)$ 的位置，并且输入了命令串。她想要知道 $T$ 秒后钢达姆所在的位置坐标。\n\n假设当前钢达姆的位置是 $(x,y)$。那么对于四种方向的移动，它坐标的改变分别为：\n\n- 向东移动，坐标改变改变为 $(x+1,y)$；\n- 向南移动，坐标改变改变为 $(x,y-1)$；\n- 向西移动，坐标改变改变为 $(x-1,y)$；\n- 向北移动，坐标改变改变为 $(x,y+1)$。\n\n\n", "inputFormat": "第一行共一个字符串 $S$，表示早苗输入的命令串，保证至少有 $1$ 个命令。\n\n第二行共一个正整数 $T$。\n", "outputFormat": "第一行有两个整数，表示 $T$ 秒时，钢达姆的坐标。\n", "hint": "用 $|S|$ 表示早苗输入的命令串的长度。\n\n- 对于 $60\\%$ 的数据，$T\\le 5\\times 10^5$，$|S|\\le 5\\times 10^3$。\n- 对于 $100\\%$ 的数据，$T \\le 2\\times 10^9$，$|S|\\le  5\\times 10^3$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Sanae Kochiya", "background": "", "description": "In Gensokyo, Sanae Kochiya is a high school otaku shrine maiden known as a Gundam superfan. One day, she finally got her hands on the latest Gundam model. As the newest Gundam, of course it has a new feature: it can walk automatically. Impressive, right (okay, I’ll behave). Sanae’s new model can move according to the input commands. The commands are $\\verb|E|$, $\\verb|S|$, $\\verb|W|$, $\\verb|N|$, corresponding to the four directions: east, south, west, and north, respectively. When executing a command, it moves one unit in the corresponding direction. As a new type of robot, it can execute a command string rather than a single command. For the input command string, it executes one command per second. After finishing the last command in the string, it automatically loops back to the beginning. At time $0$, Sanae places the Gundam at position $(0,0)$ and inputs the command string. She wants to know the coordinates of the Gundam after $T$ seconds.\n\nAssume the current position of the Gundam is $(x,y)$. For moves in the four directions, its coordinates change as follows:\n\n- Move east: the coordinates change to $(x+1,y)$.\n- Move south: the coordinates change to $(x,y-1)$.\n- Move west: the coordinates change to $(x-1,y)$.\n- Move north: the coordinates change to $(x,y+1)$.", "inputFormat": "The first line contains a string $S$, the command string Sanae inputs, which is guaranteed to contain at least $1$ command.\nThe second line contains a positive integer $T$.", "outputFormat": "Output two integers on one line, the coordinates of the Gundam at time $T$ seconds.", "hint": "Let $|S|$ denote the length of the command string Sanae inputs.\n\n- For $60\\%$ of the testdata, $T \\le 5\\times 10^5$, $|S| \\le 5\\times 10^3$.\n- For $100\\%$ of the testdata, $T \\le 2\\times 10^9$, $|S| \\le 5\\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "东风谷早苗", "background": "", "description": "在幻想乡，东风谷早苗是以高达控闻名的高中生宅巫女。某一天，早苗终于入手了最新款的钢达姆模型。作为最新的钢达姆，当然有了与以往不同的功能了，那就是它能够自动行走，厉害吧（好吧，我自重）。早苗的新模型可以按照输入的命令进行移动，命令包含 $\\verb|E|$、$\\verb|S|$、$\\verb|W|$、$\\verb|N|$ 四种，分别对应四个不同的方向，依次为东、南、西、北。执行某个命令时，它会向着对应方向移动一个单位。作为新型机器人，自然不会只单单执行一个命令，它可以执行命令串。对于输入的命令串，每一秒它会按照命令行动一次。而执行完命令串最后一个命令后，会自动从头开始循环。在 $0$ 时刻时早苗将钢达姆放置在了 $(0,0)$ 的位置，并且输入了命令串。她想要知道 $T$ 秒后钢达姆所在的位置坐标。\n\n假设当前钢达姆的位置是 $(x,y)$。那么对于四种方向的移动，它坐标的改变分别为：\n\n- 向东移动，坐标改变改变为 $(x+1,y)$；\n- 向南移动，坐标改变改变为 $(x,y-1)$；\n- 向西移动，坐标改变改变为 $(x-1,y)$；\n- 向北移动，坐标改变改变为 $(x,y+1)$。\n\n\n", "inputFormat": "第一行共一个字符串 $S$，表示早苗输入的命令串，保证至少有 $1$ 个命令。\n\n第二行共一个正整数 $T$。\n", "outputFormat": "第一行有两个整数，表示 $T$ 秒时，钢达姆的坐标。\n", "hint": "用 $|S|$ 表示早苗输入的命令串的长度。\n\n- 对于 $60\\%$ 的数据，$T\\le 5\\times 10^5$，$|S|\\le 5\\times 10^3$。\n- 对于 $100\\%$ 的数据，$T \\le 2\\times 10^9$，$|S|\\le  5\\times 10^3$。\n", "locale": "zh-CN"}}}
{"pid": "P1725", "type": "P", "difficulty": 4, "samples": [["5 2 3\n0 12 3 11 7 -2", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "单调队列", "优先队列"], "title": "琪露诺", "background": "", "description": "在幻想乡，琪露诺是以笨蛋闻名的冰之妖精。\n\n某一天，琪露诺又在玩速冻青蛙，就是用冰把青蛙瞬间冻起来。但是这只青蛙比以往的要聪明许多，在琪露诺来之前就已经跑到了河的对岸。于是琪露诺决定到河岸去追青蛙。\n\n小河可以看作一列格子依次编号为 $0$ 到 $N$，琪露诺只能从编号小的格子移动到编号大的格子。而且琪露诺按照一种特殊的方式进行移动，当她在格子 $i$ 时，她只移动到区间 $[i+L,i+R]$ 中的任意一格。你问为什么她这么移动，这还不简单，因为她是笨蛋啊。\n\n每一个格子都有一个冰冻指数 $A_i$，编号为 $0$ 的格子冰冻指数为 $0$。当琪露诺停留在那一格时就可以得到那一格的冰冻指数 $A_i$。琪露诺希望能够在到达对岸时，获取最大的冰冻指数，这样她才能狠狠地教训那只青蛙。\n\n但是由于她实在是太笨了，所以她决定拜托你帮它决定怎样前进。\n\n开始时，琪露诺在编号 $0$ 的格子上，只要她下一步的位置编号大于 $N$ 就算到达对岸。\n", "inputFormat": "第一行三个正整数 $N, L, R$。\n\n第二行共 $N+1$ 个整数，第 $i$ 个数表示编号为 $i-1$ 的格子的冰冻指数 $A_{i-1}$。\n", "outputFormat": "一个整数，表示最大冰冻指数。\n", "hint": "对于 $60\\%$ 的数据，$N \\le 10^4$。\n\n对于 $100\\%$ 的数据，$N \\le 2\\times 10^5$，$-10^3 \\le  A_i\\le 10^3 $，$1 \\le L \\le R \\le N $。数据保证最终答案不超过 $2^{31}-1$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Cirno", "background": "", "description": "In Gensokyo, Cirno is an ice fairy known for being a fool.\n\nOne day, Cirno was once again playing at flash-freezing frogs, instantly freezing them with ice. But this frog was much smarter than usual and had already run to the other side of the river before Cirno arrived. So Cirno decided to go to the riverbank to chase the frog.\n\nThe small river can be viewed as a sequence of cells numbered from $0$ to $N$. Cirno can only move from a cell with a smaller index to one with a larger index. Moreover, she moves in a special way: when she is on cell $i$, she only moves to any cell in the interval $[i+L, i+R]$. Why does she move like this? Simple, because she is a fool.\n\nEach cell has a freeze index $A_i$, and the cell with index $0$ has a freeze index of $0$. When Cirno stays on a cell, she gains that cell’s freeze index $A_i$. Cirno hopes that by the time she reaches the opposite bank, she will have gained the maximum possible freeze index, so she can teach that frog a good lesson.\n\nHowever, since she is really too foolish, she asks you to help her decide how to move.\n\nAt the beginning, Cirno is on cell $0$. As long as the index of her next position is greater than $N$, she is considered to have reached the opposite bank.", "inputFormat": "The first line contains three positive integers $N, L, R$.\n\nThe second line contains $N+1$ integers. The $i$-th number represents the freeze index $A_{i-1}$ of the cell with index $i-1$.", "outputFormat": "Output a single integer, the maximum freeze index.", "hint": "For $60\\%$ of the testdata, $N \\le 10^4$.\n\nFor $100\\%$ of the testdata, $N \\le 2\\times 10^5$, $-10^3 \\le A_i \\le 10^3$, $1 \\le L \\le R \\le N$. The testdata guarantees that the final answer does not exceed $2^{31}-1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "琪露诺", "background": "", "description": "在幻想乡，琪露诺是以笨蛋闻名的冰之妖精。\n\n某一天，琪露诺又在玩速冻青蛙，就是用冰把青蛙瞬间冻起来。但是这只青蛙比以往的要聪明许多，在琪露诺来之前就已经跑到了河的对岸。于是琪露诺决定到河岸去追青蛙。\n\n小河可以看作一列格子依次编号为 $0$ 到 $N$，琪露诺只能从编号小的格子移动到编号大的格子。而且琪露诺按照一种特殊的方式进行移动，当她在格子 $i$ 时，她只移动到区间 $[i+L,i+R]$ 中的任意一格。你问为什么她这么移动，这还不简单，因为她是笨蛋啊。\n\n每一个格子都有一个冰冻指数 $A_i$，编号为 $0$ 的格子冰冻指数为 $0$。当琪露诺停留在那一格时就可以得到那一格的冰冻指数 $A_i$。琪露诺希望能够在到达对岸时，获取最大的冰冻指数，这样她才能狠狠地教训那只青蛙。\n\n但是由于她实在是太笨了，所以她决定拜托你帮它决定怎样前进。\n\n开始时，琪露诺在编号 $0$ 的格子上，只要她下一步的位置编号大于 $N$ 就算到达对岸。\n", "inputFormat": "第一行三个正整数 $N, L, R$。\n\n第二行共 $N+1$ 个整数，第 $i$ 个数表示编号为 $i-1$ 的格子的冰冻指数 $A_{i-1}$。\n", "outputFormat": "一个整数，表示最大冰冻指数。\n", "hint": "对于 $60\\%$ 的数据，$N \\le 10^4$。\n\n对于 $100\\%$ 的数据，$N \\le 2\\times 10^5$，$-10^3 \\le  A_i\\le 10^3 $，$1 \\le L \\le R \\le N $。数据保证最终答案不超过 $2^{31}-1$。\n", "locale": "zh-CN"}}}
{"pid": "P1726", "type": "P", "difficulty": 4, "samples": [["5 5\n1 2 1\n1 3 2\n2 4 2\n5 1 2\n3 5 1\n", "3\n1 3 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "强连通分量", "Tarjan"], "title": "上白泽慧音", "background": "", "description": "在幻想乡，上白泽慧音是以知识渊博闻名的老师。春雪异变导致人间之里的很多道路都被大雪堵塞，使有的学生不能顺利地到达慧音所在的村庄。因此慧音决定换一个能够聚集最多人数的村庄作为新的教学地点。\n\n人间之里由 $N$ 个村庄（编号为 $1\\cdots N$）和 $M$ 条道路组成，道路分为两种一种为单向通行的，一种为双向通行的，分别用 $1$ 和 $2$ 来标记。如果存在由村庄 $A$ 到达村庄 $B$ 的通路，那么我们认为可以从村庄 $A$ 到达村庄 $B$，记为 $(A,B)$。当 $(A,B)$ 和 $(B,A)$ 同时满足时，我们认为 $A,B$ 是绝对连通的，记为 $\\langle A,B\\rangle$。绝对连通区域是指一个村庄的集合，在这个集合中任意两个村庄 $X,Y$ 都满足 $\\langle X,Y\\rangle$。现在你的任务是，找出最大的绝对连通区域，并将这个绝对连通区域的村庄按编号依次输出。若存在两个最大的，输出字典序最小的，比如当存在 $1,3,4$ 和 $2,5,6$ 这两个最大连通区域时，输出的是 $1,3,4$。\n", "inputFormat": "第一行共两个正整数 $N,M$。\n\n第 $2$ 行至第 $M+1$ 行，每行有三个正整数 $a,b,t$。若 $t = 1$ 则表示存在从村庄 $a$ 到 $b$ 的单向道路，若 $t = 2$ 表示村庄 $a,b$ 之间存在双向通行的道路。保证每条道路只出现一次。\n", "outputFormat": "第一行输出 $1$ 个整数，表示最大的绝对连通区域包含的村庄个数。\n\n第二行输出若干个整数，依次输出最大的绝对连通区域所包含的村庄编号。\n", "hint": "- 对于 $60\\%$ 的数据，$1\\le N \\le 200$，且 $0\\le M \\le 10^4$；\n- 对于 $100\\%$ 的数据，$1\\le N \\le 5\\times 10^3$，且 $0\\le M \\le 5\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Kamishirasawa Keine", "background": "", "description": "In Gensokyo, Kamishirasawa Keine is a teacher known for her erudition. Due to the Spring Snow incident, many roads in the Human Village area have been blocked by heavy snow, preventing some students from reaching the village where Keine resides. Therefore, Keine decides to choose another village that can gather the largest number of people as the new teaching location.\n\nThe Human Village area consists of $N$ villages (numbered $1 \\cdots N$) and $M$ roads. Roads are of two types: one-way and two-way, denoted by $1$ and $2$, respectively. If there exists a path from village $A$ to village $B$, then we say $A$ can reach $B$, denoted as $(A,B)$. When both $(A,B)$ and $(B,A)$ hold, we say $A$ and $B$ are absolutely connected, denoted as $\\langle A,B\\rangle$. An absolutely connected region is a set of villages such that any two villages $X, Y$ in the set satisfy $\\langle X,Y\\rangle$. Your task is to find the largest absolutely connected region and output the villages in this region in increasing order of their indices. If there are multiple largest regions, output the lexicographically smallest one; for example, if $1,3,4$ and $2,5,6$ are two largest regions, output $1,3,4$.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nFrom line $2$ to line $M+1$, each line contains three positive integers $a, b, t$. If $t = 1$, there is a one-way road from village $a$ to $b$. If $t = 2$, there is a two-way road between villages $a$ and $b$. It is guaranteed that each road appears only once.", "outputFormat": "On the first line, output $1$ integer, the number of villages in the largest absolutely connected region.\n\nOn the second line, output several integers, the indices of the villages in the largest absolutely connected region in increasing order, separated by spaces.", "hint": "- For $60\\%$ of the testdata, $1 \\le N \\le 200$, and $0 \\le M \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 5\\times 10^3$, and $0 \\le M \\le 5\\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "上白泽慧音", "background": "", "description": "在幻想乡，上白泽慧音是以知识渊博闻名的老师。春雪异变导致人间之里的很多道路都被大雪堵塞，使有的学生不能顺利地到达慧音所在的村庄。因此慧音决定换一个能够聚集最多人数的村庄作为新的教学地点。\n\n人间之里由 $N$ 个村庄（编号为 $1\\cdots N$）和 $M$ 条道路组成，道路分为两种一种为单向通行的，一种为双向通行的，分别用 $1$ 和 $2$ 来标记。如果存在由村庄 $A$ 到达村庄 $B$ 的通路，那么我们认为可以从村庄 $A$ 到达村庄 $B$，记为 $(A,B)$。当 $(A,B)$ 和 $(B,A)$ 同时满足时，我们认为 $A,B$ 是绝对连通的，记为 $\\langle A,B\\rangle$。绝对连通区域是指一个村庄的集合，在这个集合中任意两个村庄 $X,Y$ 都满足 $\\langle X,Y\\rangle$。现在你的任务是，找出最大的绝对连通区域，并将这个绝对连通区域的村庄按编号依次输出。若存在两个最大的，输出字典序最小的，比如当存在 $1,3,4$ 和 $2,5,6$ 这两个最大连通区域时，输出的是 $1,3,4$。\n", "inputFormat": "第一行共两个正整数 $N,M$。\n\n第 $2$ 行至第 $M+1$ 行，每行有三个正整数 $a,b,t$。若 $t = 1$ 则表示存在从村庄 $a$ 到 $b$ 的单向道路，若 $t = 2$ 表示村庄 $a,b$ 之间存在双向通行的道路。保证每条道路只出现一次。\n", "outputFormat": "第一行输出 $1$ 个整数，表示最大的绝对连通区域包含的村庄个数。\n\n第二行输出若干个整数，依次输出最大的绝对连通区域所包含的村庄编号。\n", "hint": "- 对于 $60\\%$ 的数据，$1\\le N \\le 200$，且 $0\\le M \\le 10^4$；\n- 对于 $100\\%$ 的数据，$1\\le N \\le 5\\times 10^3$，且 $0\\le M \\le 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1727", "type": "P", "difficulty": 4, "samples": [["100", "3.\n1415926535 8979323846 2643383279 5028841971 6939937510\n5820974944 5923078164 0628620899 8628034825 3421170679"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 3000, 8000, 12000, 12000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度", "洛谷原创"], "title": "计算π", "background": "《爱与愁的故事第二弹·compute》第一章。\n", "description": "中秋至，博饼声铿锵不断。爱与愁大神兴致勃勃地到学校博饼，结果抱回家的只有一秀二举。爱与愁大神十分生气，打电话给月落乌啼：“喂，帮我算出圆周率小数点后 $n(n \\le 10000)$ 位，速度……”然后就挂了电话，也不知道月落乌啼正准备去上课。月落乌啼只好请到了你，让你编一个程序求出圆周率小数点后 $n$ 位。\n", "inputFormat": "只有一行一个整数 $n$。\n", "outputFormat": "输出包含若干行。\n\n第一行一个字符串 $\\verb!3.!$；\n\n第二行开始输出圆周率的小数部分。$10$ 个数一个空格，$50$ 个数一次回车。\n", "hint": "对于 $30\\%$ 的数据，$n\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$n\\leq 10^4$。\n\n时限：$1\\sim 6$ 点 $1$ 秒，$7$ 点 $3$ 秒，$8$ 点 $8$ 秒，$9\\sim 10$ 点 $12$ 秒。\n", "locale": "zh-CN", "translations": {"en": {"title": "Compute π", "background": "Chapter 1 of \"The Story of Ai Yu Chou, Part II · compute\".", "description": "As the Mid-Autumn Festival arrives, the clattering sounds of bo bing (博饼) are unceasing. Aiyuchou, excited to play bo bing at school, ends up bringing home only \"Yi Xiu\" and \"Er Ju\". Furious, Aiyuchou calls Yueluo Wuti: \"Hey, help me compute the digits of pi after the decimal point up to $n(n \\le 10000)$ places, quickly...\" and hangs up, not knowing Yueluo Wuti was about to go to class. Yueluo Wuti then turns to you, asking you to write a program to compute the digits of pi after the decimal point up to $n$ places.", "inputFormat": "One line containing an integer $n$.", "outputFormat": "The output contains multiple lines.\n\nOn the first line, print the string $\\verb!3.!$.\n\nStarting from the second line, output the fractional part of pi. Insert a space after every $10$ digits, and insert a newline after every $50$ digits.", "hint": "For $30\\%$ of the testdata, $n\\leq 10^3$.\n\nFor $100\\%$ of the testdata, $n\\leq 10^4$.\n\nTime limit: test points $1\\sim 6$: $1$ second; test point $7$: $3$ seconds; test point $8$: $8$ seconds; test points $9\\sim 10$: $12$ seconds.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "计算π", "background": "《爱与愁的故事第二弹·compute》第一章。\n", "description": "中秋至，博饼声铿锵不断。爱与愁大神兴致勃勃地到学校博饼，结果抱回家的只有一秀二举。爱与愁大神十分生气，打电话给月落乌啼：“喂，帮我算出圆周率小数点后 $n(n \\le 10000)$ 位，速度……”然后就挂了电话，也不知道月落乌啼正准备去上课。月落乌啼只好请到了你，让你编一个程序求出圆周率小数点后 $n$ 位。\n", "inputFormat": "只有一行一个整数 $n$。\n", "outputFormat": "输出包含若干行。\n\n第一行一个字符串 $\\verb!3.!$；\n\n第二行开始输出圆周率的小数部分。$10$ 个数一个空格，$50$ 个数一次回车。\n", "hint": "对于 $30\\%$ 的数据，$n\\leq 10^3$。\n\n对于 $100\\%$ 的数据，$n\\leq 10^4$。\n\n时限：$1\\sim 6$ 点 $1$ 秒，$7$ 点 $3$ 秒，$8$ 点 $8$ 秒，$9\\sim 10$ 点 $12$ 秒。\n", "locale": "zh-CN"}}}
{"pid": "P1728", "type": "P", "difficulty": 5, "samples": [["2\n3 3\n0 0 2 2\n2 1 4 3\n4 0 6 1\n0 0 2 2\n2 1 4 3\n0 2 2 3\n3 3\n0 0 2 2\n2 1 4 3\n4 0 6 1\n2 1 4 3\n0 0 2 2\n4 0 6 1", "TAK\nNIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "PA（波兰）"], "title": "[PA 2014] Parking", "background": "", "description": "你的老板命令你将停车场里的车移动成他想要的样子。\n\n停车场是一个长条矩形，宽度为 $w$。我们以其左下角顶点为原点，坐标轴平行于矩形的边，建立直角坐标系。停车场很长，我们可以认为它一直向右边伸展到无穷远处。\n\n车都是边平行于坐标轴的矩形，大小可能不同。你可以将车任意地平移（但不能旋转），只要他们不超出停车场的边界，且不能互相碰撞，但紧挨着是允许的（即任意时刻任两辆车的重叠面积为 $0$）。\n\n你知道目前各辆车的摆放位置，以及老板心中所想的位置。你需要判断是否可以办到老板的任务。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xyv3nn7o.png)", "inputFormat": "第一行为一个整数 $t$，表示测试数据数量。\n\n对于每组测试数据，第一行两个整数 $n,w$，分别表示车的数量和停车场的宽度。\n\n接下来 $n$ 行，第 $i$ 行有四个整数 $x_1,y_1,x_2,y_2$，表示编号为 $i$ 的车的当前位置是由 $x_1,y_1,x_2,y_2$ 确定的矩形。\n\n（注意：数据有可能出现 $x_1>x_2$ 或 $y_1>y_2$）\n\n再接下来 $n$ 行，格式和意义同上，表示车的目标位置。", "outputFormat": "输出 $t$ 行，第 $i$ 行为 `TAK`（是）或 `NIE`（否），表示第 $i$ 组测试数据中能否按照要求进行移动。", "hint": "对于 $100\\%$ 的数据，$1\\le t\\le 20$，$1\\le n\\le 5\\times 10^4$，$1\\le w\\le 10^9$，$0\\le x_1,x_2\\le 10^9$，$0\\le y_1,y_2\\le w$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2014] Parking", "background": "", "description": "你的老板命令你将停车场里的车移动成他想要的样子。\n\n停车场是一个长条矩形，宽度为 $w$。我们以其左下角顶点为原点，坐标轴平行于矩形的边，建立直角坐标系。停车场很长，我们可以认为它一直向右边伸展到无穷远处。\n\n车都是边平行于坐标轴的矩形，大小可能不同。你可以将车任意地平移（但不能旋转），只要他们不超出停车场的边界，且不能互相碰撞，但紧挨着是允许的（即任意时刻任两辆车的重叠面积为 $0$）。\n\n你知道目前各辆车的摆放位置，以及老板心中所想的位置。你需要判断是否可以办到老板的任务。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xyv3nn7o.png)", "inputFormat": "第一行为一个整数 $t$，表示测试数据数量。\n\n对于每组测试数据，第一行两个整数 $n,w$，分别表示车的数量和停车场的宽度。\n\n接下来 $n$ 行，第 $i$ 行有四个整数 $x_1,y_1,x_2,y_2$，表示编号为 $i$ 的车的当前位置是由 $x_1,y_1,x_2,y_2$ 确定的矩形。\n\n（注意：数据有可能出现 $x_1>x_2$ 或 $y_1>y_2$）\n\n再接下来 $n$ 行，格式和意义同上，表示车的目标位置。", "outputFormat": "输出 $t$ 行，第 $i$ 行为 `TAK`（是）或 `NIE`（否），表示第 $i$ 组测试数据中能否按照要求进行移动。", "hint": "对于 $100\\%$ 的数据，$1\\le t\\le 20$，$1\\le n\\le 5\\times 10^4$，$1\\le w\\le 10^9$，$0\\le x_1,x_2\\le 10^9$，$0\\le y_1,y_2\\le w$。", "locale": "zh-CN"}}}
{"pid": "P1729", "type": "P", "difficulty": 4, "samples": [["100", "2.\n7182818284 5904523536 0287471352 6624977572 4709369995\n9574966967 6277240766 3035354759 4571382178 5251664274"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "高精度", "洛谷原创"], "title": "计算e", "background": "《爱与愁的故事第二弹·compute》最终章。\n\n自然对数的底数 $e$ 是一个著名的无理数，其近似值为 $2.718281828\\cdots$ 有计算 $e$ 的公式如下：\n\n$$e=\\sum_{n=0}^{\\infty}\\frac{1}{n!}$$\n\n其中 $n!$ 表示 $n$ 的阶乘，即 $n!=1\\times 2\\times 3\\times \\cdots \\times n$。\n", "description": "月落乌啼竟然这么快就回复了圆周率小数点后10000位？！不可能，他肯定求了别人。爱与愁大神再次为难月落乌啼：“帮我算一算 $e$ 后 $n(n \\le 10000)$ 位，速度！！！”月落乌啼想求别人，结果他发现由于刚才跟你通话已经用完了手机的所有电。关键时刻只能靠自己。如果现在你是他，你会怎么编这个程序？\n", "inputFormat": "只有一行：$n$\n", "outputFormat": "若干行。\n\n第一行：$2$.\n\n第二行开始：$e$ 的小数部分。$10$ 个数一个空格，$50$ 个数一次回车。\n", "hint": "$30\\%$ 数据：$n \\le 1000$  \n$100\\%$ 数据：$n \\le 10000$\n\n时限：全部1秒\n", "locale": "zh-CN", "translations": {"en": {"title": "Compute e", "background": "The final chapter of \"The Story of Love and Sorrow II · compute\".\n\nThe base of the natural logarithm $e$ is a famous irrational number, approximately $2.718281828\\cdots$. There is a formula to compute $e$:\n\n$$e=\\sum_{n=0}^{\\infty}\\frac{1}{n!}$$\n\nHere $n!$ denotes the factorial of $n$, that is, $n!=1\\times 2\\times 3\\times \\cdots \\times n$.", "description": "\"Yueluo Wuti\" actually replied with 10,000 digits after the decimal point of $\\pi$ so quickly?! Impossible—he must have asked someone. The master \"Love and Sorrow\" makes it difficult for \"Yueluo Wuti\" again: \"Help me compute the first $n$ digits after the decimal point of $e$ ($n \\le 10000$), hurry!!!\" \"Yueluo Wuti\" wants to ask someone, but he finds that talking to you just now has drained his phone battery. At this critical moment, he can only rely on himself. If you were him now, how would you write this program?", "inputFormat": "Only one line: $n$.", "outputFormat": "Multiple lines.\n\nFirst line: $2$.\n\nStarting from the second line: the fractional part of $e$. Insert a space after every 10 digits, and a newline after every 50 digits.", "hint": "30% testdata: $n \\le 1000$.  \n100% testdata: $n \\le 10000$.\n\nTime limit: 1 second.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "计算e", "background": "《爱与愁的故事第二弹·compute》最终章。\n\n自然对数的底数 $e$ 是一个著名的无理数，其近似值为 $2.718281828\\cdots$ 有计算 $e$ 的公式如下：\n\n$$e=\\sum_{n=0}^{\\infty}\\frac{1}{n!}$$\n\n其中 $n!$ 表示 $n$ 的阶乘，即 $n!=1\\times 2\\times 3\\times \\cdots \\times n$。\n", "description": "月落乌啼竟然这么快就回复了圆周率小数点后10000位？！不可能，他肯定求了别人。爱与愁大神再次为难月落乌啼：“帮我算一算 $e$ 后 $n(n \\le 10000)$ 位，速度！！！”月落乌啼想求别人，结果他发现由于刚才跟你通话已经用完了手机的所有电。关键时刻只能靠自己。如果现在你是他，你会怎么编这个程序？\n", "inputFormat": "只有一行：$n$\n", "outputFormat": "若干行。\n\n第一行：$2$.\n\n第二行开始：$e$ 的小数部分。$10$ 个数一个空格，$50$ 个数一次回车。\n", "hint": "$30\\%$ 数据：$n \\le 1000$  \n$100\\%$ 数据：$n \\le 10000$\n\n时限：全部1秒\n", "locale": "zh-CN"}}}
{"pid": "P1730", "type": "P", "difficulty": 5, "samples": [["3 3\n1 3 5\n2 1 6\n2 3 6\n2\n1 3\n2 3\n", "5.000\n5.500\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "最小密度路径", "background": null, "description": "给出一张有 $N$ 个点 $M$ 条边的加权有向无环图，接下来有 $Q$ 个询问，每个询问包括 $2$ 个节点 $X$ 和 $Y$，要求算出从 $X$ 到 $Y$ 的一条路径，使得密度最小（密度的定义为，路径上边的权值和除以边的数量）。", "inputFormat": "第一行包括两个整数 $N$ 和 $M$。\n\n以下 $M$ 行，每行三个数字 $A,B,W$，表示从 $A$ 到 $B$ 有一条权值为 $W$ 的有向边。\n\n再下一行有一个整数 $Q$。\n\n以下 $Q$ 行，每行一个询问 $X$ 和 $Y$，如题意所诉。", "outputFormat": "对于每个询问输出一行，表示该询问的最小密度路径的密度（保留 $3$ 位小数），如果不存在这么一条路径输出 ```OMG!```。", "hint": "**数据范围**\n\n$1 \\le N \\le 50$，$1 \\le M \\le 1000$，$1 \\le W \\le 10^5$，$1 \\le Q \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Minimum Density Path", "background": "", "description": "Given a weighted directed acyclic graph (DAG) with $N$ vertices and $M$ edges, followed by $Q$ queries. Each query consists of two vertices $X$ and $Y$. Compute a path from $X$ to $Y$ with minimum density, where density is defined as the sum of edge weights along the path divided by the number of edges.", "inputFormat": "The first line contains two integers $N$ and $M$.\nEach of the next $M$ lines contains three integers $A, B, W$, indicating there is a directed edge from $A$ to $B$ with weight $W$.\nThe next line contains an integer $Q$.\nEach of the next $Q$ lines contains a query with two vertices $X$ and $Y$, as described.", "outputFormat": "For each query, output one line containing the density of the minimum-density path, rounded to $3$ decimal places. If no such path exists, output ```OMG!```.", "hint": "Constraints\n\n$1 \\le N \\le 50$, $1 \\le M \\le 1000$, $1 \\le W \\le 10^5$, $1 \\le Q \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小密度路径", "background": null, "description": "给出一张有 $N$ 个点 $M$ 条边的加权有向无环图，接下来有 $Q$ 个询问，每个询问包括 $2$ 个节点 $X$ 和 $Y$，要求算出从 $X$ 到 $Y$ 的一条路径，使得密度最小（密度的定义为，路径上边的权值和除以边的数量）。", "inputFormat": "第一行包括两个整数 $N$ 和 $M$。\n\n以下 $M$ 行，每行三个数字 $A,B,W$，表示从 $A$ 到 $B$ 有一条权值为 $W$ 的有向边。\n\n再下一行有一个整数 $Q$。\n\n以下 $Q$ 行，每行一个询问 $X$ 和 $Y$，如题意所诉。", "outputFormat": "对于每个询问输出一行，表示该询问的最小密度路径的密度（保留 $3$ 位小数），如果不存在这么一条路径输出 ```OMG!```。", "hint": "**数据范围**\n\n$1 \\le N \\le 50$，$1 \\le M \\le 1000$，$1 \\le W \\le 10^5$，$1 \\le Q \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1731", "type": "P", "difficulty": 4, "samples": [["100\n2\n", "68"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "1999", "NOI", "剪枝"], "title": "[NOI1999] 生日蛋糕", "background": "[数据加强版 link](https://www.luogu.com.cn/problem/T148457)", "description": "7 月 17 日是 Mr.W 的生日，ACM-THU 为此要制作一个体积为 $N\\pi$ 的 $M$ 层生日蛋糕，每层都是一个圆柱体。\n\n设从下往上数第 $i$（$1 \\leq i \\leq M$）层蛋糕是半径为 $R_i$，高度为 $H_i$ 的圆柱。当 $i \\lt M$ 时，要求 $R_i \\gt R_{i+1}$ 且 $H_i \\gt H_{i+1}$。\n\n由于要在蛋糕上抹奶油，为尽可能节约经费，我们希望蛋糕外表面（最下一层的下底面除外）的面积 $Q$ 最小。\n\n请编程对给出的 $N$ 和 $M$，找出蛋糕的制作方案（适当的 $R_i$ 和 $H_i$ 的值），使 $S=\\dfrac{Q}{\\pi}$ 最小。\n\n（除 $Q$ 外，以上所有数据皆为正整数）", "inputFormat": "第一行为一个整数 $N$（$N \\leq 2 \\times 10^4$），表示待制作的蛋糕的体积为 $N\\pi$。\n\n第二行为 $M$（$M \\leq 15$），表示蛋糕的层数为 $M$。", "outputFormat": "输出一个整数 $S$，若无解，输出 $0$。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[NOI1999] Birthday Cake", "background": "[Enhanced testdata link](https://www.luogu.com.cn/problem/T148457)", "description": "July 17 is Mr. W’s birthday. To celebrate, ACM-THU plans to make an $M$-layer birthday cake with volume $N\\pi$, where each layer is a cylinder.\n\nLet the $i$-th layer from bottom to top ($1 \\leq i \\leq M$) be a cylinder with radius $R_i$ and height $H_i$. For $i \\lt M$, it is required that $R_i \\gt R_{i+1}$ and $H_i \\gt H_{i+1}$.\n\nSince the cake needs to be frosted, to save cost as much as possible, we want the area $Q$ of the cake’s outer surface (excluding the bottom face of the lowest layer) to be minimized.\n\nGiven $N$ and $M$, write a program to find a construction of the cake (appropriate values of $R_i$ and $H_i$) that minimizes $S=\\dfrac{Q}{\\pi}$.\n\n(Except for $Q$, all the quantities above are positive integers.)", "inputFormat": "The first line contains an integer $N$ ($N \\leq 2 \\times 10^4$), indicating that the cake’s volume is $N\\pi$.\n\nThe second line contains $M$ ($M \\leq 15$), the number of layers of the cake.", "outputFormat": "Output an integer $S$. If there is no solution, output $0$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI1999] 生日蛋糕", "background": "[数据加强版 link](https://www.luogu.com.cn/problem/T148457)", "description": "7 月 17 日是 Mr.W 的生日，ACM-THU 为此要制作一个体积为 $N\\pi$ 的 $M$ 层生日蛋糕，每层都是一个圆柱体。\n\n设从下往上数第 $i$（$1 \\leq i \\leq M$）层蛋糕是半径为 $R_i$，高度为 $H_i$ 的圆柱。当 $i \\lt M$ 时，要求 $R_i \\gt R_{i+1}$ 且 $H_i \\gt H_{i+1}$。\n\n由于要在蛋糕上抹奶油，为尽可能节约经费，我们希望蛋糕外表面（最下一层的下底面除外）的面积 $Q$ 最小。\n\n请编程对给出的 $N$ 和 $M$，找出蛋糕的制作方案（适当的 $R_i$ 和 $H_i$ 的值），使 $S=\\dfrac{Q}{\\pi}$ 最小。\n\n（除 $Q$ 外，以上所有数据皆为正整数）", "inputFormat": "第一行为一个整数 $N$（$N \\leq 2 \\times 10^4$），表示待制作的蛋糕的体积为 $N\\pi$。\n\n第二行为 $M$（$M \\leq 15$），表示蛋糕的层数为 $M$。", "outputFormat": "输出一个整数 $S$，若无解，输出 $0$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1732", "type": "P", "difficulty": 2, "samples": [["2\n5 1 2 3 4 5\n7 2 9 7 4 6 2 6\n", "5\n14\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "天津"], "title": "[TJOI2011] 序列", "background": "", "description": "一数列 $A=\\{a_1,a_2,\\ldots,a_n\\}$，根据数列 $A$ 计算数列 $B=\\{b_1,b_2,\\ldots,b_n\\}$，其中：  \n\n$$\nb_i=\n\\begin{cases}\na_1 &, i=1 \\\\ \n\\min_{1 \\leq j < i}\\left|a_i-a_j\\right| &, i\\gt 1 \n\\end{cases}\n$$\n\n求 $\\sum\\limits^n_{i=1}b_i$。", "inputFormat": "第一行是一个正整数 $T$，表示测试数据的组数。接下来有 $T$ 行，每行表示一组测试数据。每行以一个正整数 $n$ 开始，表示数列 $A$ 中元素的个数；然后是 $n$ 个非负整数，依次表示 $a_1,a_2,\\ldots,a_n$ 的值。", "outputFormat": "对于每组测试数据，输出数列 $B$ 的所有的元素之和。", "hint": "$1\\le t\\le 10$，$1\\le n\\le10^5$，$0\\le a_i\\le65536$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] Sequence", "background": "", "description": "Given a sequence $A=\\{a_1,a_2,\\ldots,a_n\\}$, compute the sequence $B=\\{b_1,b_2,\\ldots,b_n\\}$ from $A$, where:\n$$\nb_i=\n\\begin{cases}\na_1 &, i=1 \\\\ \n\\min_{1 \\leq j < i}\\left|a_i-a_j\\right| &, i\\gt 1 \n\\end{cases}\n$$\nFind $\\sum\\limits^n_{i=1}b_i$.", "inputFormat": "The first line contains a positive integer $T$, the number of testdata sets. Then there are $T$ lines, each describing one set of testdata. Each line starts with a positive integer $n$, the number of elements in sequence $A$; then follow $n$ non-negative integers, which are $a_1,a_2,\\ldots,a_n$ in order.", "outputFormat": "For each testdata set, output the sum of all elements of sequence $B$.", "hint": "Constraints: $1\\le t\\le 10$, $1\\le n\\le10^5$, $0\\le a_i\\le65536$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 序列", "background": "", "description": "一数列 $A=\\{a_1,a_2,\\ldots,a_n\\}$，根据数列 $A$ 计算数列 $B=\\{b_1,b_2,\\ldots,b_n\\}$，其中：  \n\n$$\nb_i=\n\\begin{cases}\na_1 &, i=1 \\\\ \n\\min_{1 \\leq j < i}\\left|a_i-a_j\\right| &, i\\gt 1 \n\\end{cases}\n$$\n\n求 $\\sum\\limits^n_{i=1}b_i$。", "inputFormat": "第一行是一个正整数 $T$，表示测试数据的组数。接下来有 $T$ 行，每行表示一组测试数据。每行以一个正整数 $n$ 开始，表示数列 $A$ 中元素的个数；然后是 $n$ 个非负整数，依次表示 $a_1,a_2,\\ldots,a_n$ 的值。", "outputFormat": "对于每组测试数据，输出数列 $B$ 的所有的元素之和。", "hint": "$1\\le t\\le 10$，$1\\le n\\le10^5$，$0\\le a_i\\le65536$。", "locale": "zh-CN"}}}
{"pid": "P1733", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "交互题", "Special Judge"], "title": "猜数（IO交互版）", "background": "", "description": "评测机会在区间 $[1,10^9]$ 中选择一个整数，你应该写一个代码来猜测它。你最多可以问评测机 $50$ 个问题。\n\n对于每一次询问，你可以向评测机询问区间 $[1,10^9]$ 中的一个整数，评测机会返回:\n\n - $0$，如果它为答案（即评测机所选的数字），且程序应该在此之后停止询问。\n - $-1$，如果它小于答案。\n - $1$，如果它大于答案。\n \n每次询问，你需要向**标准输出**输出一个 $[1,10^9]$ 中的整数，**然后输出一个换行并清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。**建议使用`std::endl`以避免忘记输出换行。**\n\n然后你需要从**标准输入**中输入一个整数，代表评测机返回的结果。", "inputFormat": "", "outputFormat": "", "hint": "#### 数据规模与约定\n\n设 $n$ 为答案。\n\n- 对于 $50\\%$ 的数据，保证 $n \\leq 51$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^9$。\n\n[本题交互库](https://www.luogu.com.cn/paste/uaece7av)。\n\n#### 提示\n\n本题参考程序：\n\n```cpp\n#include <cstdio>\n#include <iostream>\n\nint main() {\n  for (int l = 1, r = 1000000000, mid = (l + r) >> 1, res; l <= r; mid = (l + r) >> 1) {\n    std::cout << mid << std::endl;\n    std::cin >> res;\n    if (res == 0) {\n      return 0;\n    } else if (res == -1) {\n      l = mid + 1;\n    } else if (res == 1) {\n      r = mid - 1;\n    } else {\n      puts(\"OvO, I AK IOI\"); // this statement will never be executed.\n    }\n  }\n  return 0;\n}\n```", "locale": "zh-CN", "translations": {"en": {"title": "Guess the Number (Interactive I/O Version)", "background": "", "description": "The judge will choose an integer in the range $[1,10^9]$. You should write a program to guess it. You may ask at most $50$ questions.\n\nFor each query, you may ask the judge about one integer in $[1,10^9]$. The judge returns:\n- $0$, if it is the answer (i.e., the number chosen by the judge), after which the program must stop querying.\n- $-1$, if it is less than the answer.\n- $1$, if it is greater than the answer.\n\nFor each query, you must print to standard output an integer in $[1,10^9]$, then print a newline and flush the output buffer.\n\nYou can flush the buffer using:\n- For C/C++: `fflush(stdout)`.\n- For C++: `std::cout << std::flush`.\n- For Java: `System.out.flush()`.\n- For Python: `stdout.flush()`.\n- For Pascal: `flush(output)`.\n- For other languages, please refer to the corresponding documentation.\n\nIn particular, for C++, if you use `std::endl` instead of `'\\n'` when printing a newline, the buffer will also be flushed automatically. It is recommended to use `std::endl` to avoid forgetting the newline.\n\nThen you need to read an integer from standard input, which represents the judge’s response.", "inputFormat": "", "outputFormat": "# Hint\n\n#### Constraints\n\nLet $n$ be the answer.\n\n- For $50\\%$ of the testdata, it is guaranteed that $n \\leq 51$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 10^9$.\n\n[Interactive library for this problem](https://www.luogu.com.cn/paste/uaece7av).\n\n###", "hint": "#### Constraints\n\nLet $n$ be the answer.\n\n- For $50\\%$ of the testdata, it is guaranteed that $n \\leq 51$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 10^9$.\n\n[Interactive library for this problem](https://www.luogu.com.cn/paste/uaece7av).\n\n#### Hint\n\nReference program for this problem:\n\n```cpp\n#include <cstdio>\n#include <iostream>\n\nint main() {\n  for (int l = 1, r = 1000000000, mid = (l + r) >> 1, res; l <= r; mid = (l + r) >> 1) {\n    std::cout << mid << std::endl;\n    std::cin >> res;\n    if (res == 0) {\n      return 0;\n    } else if (res == -1) {\n      l = mid + 1;\n    } else if (res == 1) {\n      r = mid - 1;\n    } else {\n      puts(\"OvO, I AK IOI\"); // this statement will never be executed.\n    }\n  }\n  return 0;\n}\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "猜数（IO交互版）", "background": "", "description": "评测机会在区间 $[1,10^9]$ 中选择一个整数，你应该写一个代码来猜测它。你最多可以问评测机 $50$ 个问题。\n\n对于每一次询问，你可以向评测机询问区间 $[1,10^9]$ 中的一个整数，评测机会返回:\n\n - $0$，如果它为答案（即评测机所选的数字），且程序应该在此之后停止询问。\n - $-1$，如果它小于答案。\n - $1$，如果它大于答案。\n \n每次询问，你需要向**标准输出**输出一个 $[1,10^9]$ 中的整数，**然后输出一个换行并清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。**建议使用`std::endl`以避免忘记输出换行。**\n\n然后你需要从**标准输入**中输入一个整数，代表评测机返回的结果。", "inputFormat": "", "outputFormat": "", "hint": "#### 数据规模与约定\n\n设 $n$ 为答案。\n\n- 对于 $50\\%$ 的数据，保证 $n \\leq 51$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^9$。\n\n[本题交互库](https://www.luogu.com.cn/paste/uaece7av)。\n\n#### 提示\n\n本题参考程序：\n\n```cpp\n#include <cstdio>\n#include <iostream>\n\nint main() {\n  for (int l = 1, r = 1000000000, mid = (l + r) >> 1, res; l <= r; mid = (l + r) >> 1) {\n    std::cout << mid << std::endl;\n    std::cin >> res;\n    if (res == 0) {\n      return 0;\n    } else if (res == -1) {\n      l = mid + 1;\n    } else if (res == 1) {\n      r = mid - 1;\n    } else {\n      puts(\"OvO, I AK IOI\"); // this statement will never be executed.\n    }\n  }\n  return 0;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P1734", "type": "P", "difficulty": 2, "samples": [["11", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "最大约数和", "background": "", "description": "选取和不超过 $S$ 的若干个不同的正整数，使得所有数的约数（不含它本身）之和最大。", "inputFormat": "输入一个正整数 $S$。", "outputFormat": "输出最大的约数之和。\n", "hint": "**【样例说明】**\n\n取数字 $4$ 和 $6$，可以得到最大值 $(1+2)+(1+2+3)=9$。\n\n**【数据规模】**\n\n对于 $100 \\%$ 的数据，$1 \\le S \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Maximum Sum of Divisors", "background": "", "description": "Select several distinct positive integers whose total sum does not exceed $S$, so that the sum of the proper divisors (excluding the number itself) of all selected numbers is maximized.", "inputFormat": "Input a positive integer $S$.", "outputFormat": "Output the maximum possible sum of proper divisors.", "hint": "【Sample Explanation】\n\nChoose the numbers $4$ and $6$ to obtain the maximum value $(1+2)+(1+2+3)=9$.\n\n【Constraints】\n\nFor $100\\%$ of the testdata, $1 \\le S \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最大约数和", "background": "", "description": "选取和不超过 $S$ 的若干个不同的正整数，使得所有数的约数（不含它本身）之和最大。", "inputFormat": "输入一个正整数 $S$。", "outputFormat": "输出最大的约数之和。\n", "hint": "**【样例说明】**\n\n取数字 $4$ 和 $6$，可以得到最大值 $(1+2)+(1+2+3)=9$。\n\n**【数据规模】**\n\n对于 $100 \\%$ 的数据，$1 \\le S \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1735", "type": "P", "difficulty": 3, "samples": [["3\nA*C\n*AC\nACA", "No answer"], ["3\nAAA\nCAA\nAAA", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索"], "title": "字母迷宫", "background": "", "description": "打败了 DIABLO，Mini 进入了迷宫。这是个奇怪的迷宫，迷宫的每一个地点要么有一个用来传送的门，要么是障碍。Mini 现在站在迷宫的原点处，但是眼看远在 $(N,N)$ 的公主就要被转移，Mini 心情焦急万分，为了能最快地到达公主处救出公主，Mini 希望能走一条最快的路径。注意，Mini 可以把迷宫的 $(1,1)$ 或 $(1,N)$ 或 $(N,1)$ 处当作原点。\n\n迷宫里，某些地点会有门，将门激活，Mini 就会被传送到某个地点，当然，魔王 Bill 只创造了三种门，所以迷宫里最多有就只有三种门，而且在这个迷宫中要到达下一个点必须通过门。。（什么逻辑 TUT。。）\n\n在迷宫中，可能会遇到的三种门分别如下：\n\n- 时空之门，Mini 可以往上下左右四个方向中的任意一个方向传送一格；\n- 海洋之门，Mini 可以往上下左右四个方向中的任意一个方向传送两格；\n- 天堂之门，Mini 需要停留一步，聚气，然后可以往左上左下右上右下四个方向中的任意一个方向传送一格。\n\n当然，使用每一个门都算作一步。\n\n当然还有障碍，如果有障碍，那么这个点没有门且这个点不能被传送到。\n\n但是，魔王 Bill 有可能创造出了一个完全无法到达 $(N,N)$ 的迷宫，所以，当从三个原点出发都无法到达 $(N,N)$ 时，请输出 `No answer`。注意，原点算作一步（Mini 一开始站在 $(1,1)$ 或 $(1,N)$ 或 $(N,1)$ 的位置，然后走一步到原点，所以原点算作一步）。\n", "inputFormat": "第一行一个数 $N$，表示迷宫的大小 $N\\times N$。\n\n以下 $N$ 行，每行 $N$ 个字符，表示迷宫的示意图。字符要么是字母 ABC，要么是障碍。\n\nA 表示时空之门，B 表示海洋之门，C 表示天堂之门，障碍用 $*$ 表示。", "outputFormat": "输出为 Mini 从原点处走到公主处的最快路径长度。无解输出 `No answer`。", "hint": "对于 $100\\%$ 的数据，$0\\le N\\le 1200$。", "locale": "zh-CN", "translations": {"en": {"title": "Letter Maze", "background": "", "description": "After defeating DIABLO, Mini enters a maze. This is a strange maze where every cell either has a teleporting door or is an obstacle. Mini now stands at the origin of the maze, but seeing that the princess far away at $(N,N)$ is about to be moved, Mini is extremely anxious and wants to take the fastest route to reach her. Note that Mini may treat $(1,1)$ or $(1,N)$ or $(N,1)$ as the origin.\n\nIn the maze, some cells have doors. When a door is activated, Mini will be teleported to another cell. Bill, the demon king, created only three kinds of doors, so there are at most three types of doors in the maze. In this maze, every move to the next cell must be made by using a door.\n\nThe three types of doors are as follows:\n- Spacetime Door: Mini can teleport one cell in any of the four directions: up, down, left, or right.\n- Ocean Door: Mini can teleport two cells in any of the four orthogonal directions.\n- Heaven Door: Mini needs to stay for one step to charge, then can teleport one cell in any of the four diagonal directions: up-left, down-left, up-right, or down-right.\n\nUsing any door counts as one step.\n\nThere are also obstacles. If a cell has an obstacle, then that cell has no door and cannot be teleported onto.\n\nHowever, Bill may have created a maze where $(N,N)$ is completely unreachable. Therefore, if starting from all three origins still cannot reach $(N,N)$, please output `No answer`. Note that the origin counts as one step (Mini starts at $(1,1)$ or $(1,N)$ or $(N,1)$, then takes one step to the origin, so the origin counts as one step).", "inputFormat": "The first line contains an integer $N$, denoting the size $N \\times N$ of the maze.\n\nThe next $N$ lines each contain $N$ characters describing the maze. Each character is either a letter among A, B, C, or an obstacle.\n\nA denotes a Spacetime Door, B denotes an Ocean Door, C denotes a Heaven Door, and an obstacle is denoted by `*`.", "outputFormat": "Output the length of the fastest path for Mini to reach the princess from the chosen origin. If there is no solution, output `No answer`.", "hint": "For $100\\%$ of the testdata, $0 \\le N \\le 1200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "字母迷宫", "background": "", "description": "打败了 DIABLO，Mini 进入了迷宫。这是个奇怪的迷宫，迷宫的每一个地点要么有一个用来传送的门，要么是障碍。Mini 现在站在迷宫的原点处，但是眼看远在 $(N,N)$ 的公主就要被转移，Mini 心情焦急万分，为了能最快地到达公主处救出公主，Mini 希望能走一条最快的路径。注意，Mini 可以把迷宫的 $(1,1)$ 或 $(1,N)$ 或 $(N,1)$ 处当作原点。\n\n迷宫里，某些地点会有门，将门激活，Mini 就会被传送到某个地点，当然，魔王 Bill 只创造了三种门，所以迷宫里最多有就只有三种门，而且在这个迷宫中要到达下一个点必须通过门。。（什么逻辑 TUT。。）\n\n在迷宫中，可能会遇到的三种门分别如下：\n\n- 时空之门，Mini 可以往上下左右四个方向中的任意一个方向传送一格；\n- 海洋之门，Mini 可以往上下左右四个方向中的任意一个方向传送两格；\n- 天堂之门，Mini 需要停留一步，聚气，然后可以往左上左下右上右下四个方向中的任意一个方向传送一格。\n\n当然，使用每一个门都算作一步。\n\n当然还有障碍，如果有障碍，那么这个点没有门且这个点不能被传送到。\n\n但是，魔王 Bill 有可能创造出了一个完全无法到达 $(N,N)$ 的迷宫，所以，当从三个原点出发都无法到达 $(N,N)$ 时，请输出 `No answer`。注意，原点算作一步（Mini 一开始站在 $(1,1)$ 或 $(1,N)$ 或 $(N,1)$ 的位置，然后走一步到原点，所以原点算作一步）。\n", "inputFormat": "第一行一个数 $N$，表示迷宫的大小 $N\\times N$。\n\n以下 $N$ 行，每行 $N$ 个字符，表示迷宫的示意图。字符要么是字母 ABC，要么是障碍。\n\nA 表示时空之门，B 表示海洋之门，C 表示天堂之门，障碍用 $*$ 表示。", "outputFormat": "输出为 Mini 从原点处走到公主处的最快路径长度。无解输出 `No answer`。", "hint": "对于 $100\\%$ 的数据，$0\\le N\\le 1200$。", "locale": "zh-CN"}}}
{"pid": "P1736", "type": "P", "difficulty": 4, "samples": [["4 6\n0 1 0 1 0 0\n0 0 1 0 1 0\n1 1 0 0 0 1\n0 1 1 0 1 0\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "搜索", "递推"], "title": "创意吃鱼法", "background": "感谢@throusea 贡献的两组数据", "description": "回到家中的猫猫把三桶鱼全部转移到了她那长方形大池子中，然后开始思考：到底要以何种方法吃鱼呢（猫猫就是这么可爱，吃鱼也要想好吃法 ^\\_\\*）。她发现，把大池子视为 $01$ 矩阵（$0$ 表示对应位置无鱼，$1$ 表示对应位置有鱼）有助于决定吃鱼策略。\n\n在代表池子的 $01$ 矩阵中，有很多的正方形子矩阵，如果某个正方形子矩阵的某条对角线上都有鱼，且此正方形子矩阵的其他地方无鱼，猫猫就可以从这个正方形子矩阵“对角线的一端”下口，只一吸，就能把对角线上的那一队鲜鱼吸入口中。\n\n猫猫是个贪婪的家伙，所以她想一口吃掉尽量多的鱼。请你帮猫猫计算一下，她一口下去，最多可以吃掉多少条鱼？\n", "inputFormat": "第一行有两个整数 $n$ 和 $m$（$n,m≥1$），描述池塘规模。接下来的 $n$ 行，每行有 $m$ 个数字（非 $0$ 即 $1$）。每两个数字之间用空格隔开。\n\n", "outputFormat": "只有一个整数——猫猫一口下去可以吃掉的鱼的数量，占一行，行末有回车。\n", "hint": "右上角的\n```\n1 0 0\n0 1 0\n0 0 1\n```\n\n### 数据范围及约定\n\n\n- 对于 $30\\%$ 的数据，有 $1\\le n,m\\le 100$；\n- 对于 $60\\%$ 的数据，有 $1\\le n,m\\le 1000$；\n- 对于 $100\\%$ 的数据，有 $1\\le n,m\\le 2500$。", "locale": "zh-CN", "translations": {"en": {"title": "Creative Way to Eat Fish", "background": "Thanks to @throusea for contributing two sets of testdata.", "description": "After returning home, the cat moved all the fish from three buckets into her large rectangular pool and began to think: what method should she use to eat the fish (the cat is so cute—she even wants to figure out a tasty way to eat fish ^_*)? She finds that viewing the big pool as a $01$ matrix ($0$ means the corresponding cell has no fish, $1$ means there is a fish) helps decide her eating strategy.\n\nIn the $01$ matrix representing the pool, there are many square submatrices. If, in some square submatrix, one of its diagonals has fish in every cell and all other cells in that submatrix have no fish, then the cat can start from one end of that diagonal and, with a single suck, pull all the fish on that diagonal into her mouth.\n\nThe cat is greedy, so she wants to eat as many fish as possible in one bite. Please help her compute the maximum number of fish she can eat in a single bite.", "inputFormat": "The first line contains two integers $n$ and $m$ ($n,m≥1$), describing the size of the pool. The next $n$ lines each contain $m$ numbers (each is either $0$ or $1$). Adjacent numbers are separated by spaces.", "outputFormat": "Output a single integer—the number of fish the cat can eat in one bite—on one line, followed by a newline.", "hint": "For example, a $3\\times 3$ square submatrix with fish only along a diagonal:\n```\n1 0 0\n0 1 0\n0 0 1\n```\n\n### Constraints\n\n- For $30\\%$ of the testdata, $1\\le n,m\\le 100$.\n- For $60\\%$ of the testdata, $1\\le n,m\\le 1000$.\n- For $100\\%$ of the testdata, $1\\le n,m\\le 2500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "创意吃鱼法", "background": "感谢@throusea 贡献的两组数据", "description": "回到家中的猫猫把三桶鱼全部转移到了她那长方形大池子中，然后开始思考：到底要以何种方法吃鱼呢（猫猫就是这么可爱，吃鱼也要想好吃法 ^\\_\\*）。她发现，把大池子视为 $01$ 矩阵（$0$ 表示对应位置无鱼，$1$ 表示对应位置有鱼）有助于决定吃鱼策略。\n\n在代表池子的 $01$ 矩阵中，有很多的正方形子矩阵，如果某个正方形子矩阵的某条对角线上都有鱼，且此正方形子矩阵的其他地方无鱼，猫猫就可以从这个正方形子矩阵“对角线的一端”下口，只一吸，就能把对角线上的那一队鲜鱼吸入口中。\n\n猫猫是个贪婪的家伙，所以她想一口吃掉尽量多的鱼。请你帮猫猫计算一下，她一口下去，最多可以吃掉多少条鱼？\n", "inputFormat": "第一行有两个整数 $n$ 和 $m$（$n,m≥1$），描述池塘规模。接下来的 $n$ 行，每行有 $m$ 个数字（非 $0$ 即 $1$）。每两个数字之间用空格隔开。\n\n", "outputFormat": "只有一个整数——猫猫一口下去可以吃掉的鱼的数量，占一行，行末有回车。\n", "hint": "右上角的\n```\n1 0 0\n0 1 0\n0 0 1\n```\n\n### 数据范围及约定\n\n\n- 对于 $30\\%$ 的数据，有 $1\\le n,m\\le 100$；\n- 对于 $60\\%$ 的数据，有 $1\\le n,m\\le 1000$；\n- 对于 $100\\%$ 的数据，有 $1\\le n,m\\le 2500$。", "locale": "zh-CN"}}}
{"pid": "P1737", "type": "P", "difficulty": 7, "samples": [["1", "I\n+ 1 1\n- 2\nI\n+ 4 4\n- 5\n+ 3 6\n- 7\n- 8\nO 9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2016", "NOI", "提交答案", "Special Judge"], "title": "[NOI2016] 旷野大计算", "background": "**提示：若是使用“提交代码”的方式进行提交，在评测时会给程序输入一个数字（1, 2, 3, ..., 10）表示测试点编号，请在程序中直接输出对应测试点的答案。**\n", "description": "随着人类计算机技术的发展，计算机的能力不断提升，让跳蚤国王非常羡慕。\n\n终于有一天，跳蚤国王发布政令：大力发展跳蚤国的计算机产业！然而，跳蚤国尚未进行工业革命，无法制造出电子计算机所需的元器件。但是跳蚤国王想出了一个绝妙的想法：把每只跳蚤作为一个计算节点，每只跳蚤只完成一个特定的小任务。\n\n跳蚤国王带领 $n$ 只跳蚤来到了一片旷野上，把跳蚤作为计算节点在旷野上排列好，并编号为 $1$ 到 $n$。每个计算节点会把某几个（也有可能是 $0$ 个）计算节点的结果作为输入，计算得到输出。除此之外，跳蚤国王还有一个巨型的终端，可以从终端输入和输出数据，这台终端和所有计算节点组成了一台计算机。\n\n记第 $t$ 个计算节点的输出为 $x_t$，该节点的操作可分为以下几种类型：\n\n::cute-table{tuack}\n\n| 名称 | 操作符（类型） | 操作数 | 计算结果 |\n|-|-|-|-|\n| 输入节点 | `I` | 无 | 从终端读入一个实数作为 $x_t$ |\n| 输出节点 | `O` | $i$ | $x_t = x_i$，并将 $x_t$ 输出到终端 |\n| 加法节点 | `+` | $i,j$ | $x_t = x_i+x_j$ |\n| 偏移节点 | `C` | $i,c$ | $x_t=x_i+c$ |\n| 取反节点 | `-` | $i$ | $x_t=-x_i$ |\n| 左移节点 | `<` | $i,k$ | $x_t=x_i\\cdot 2^k$ |\n| 右移节点 | `>` | $i,k$ | $x_t=x_i\\cdot 2^{-k}$ |\n| S 型节点 | `S` | $i$ | $x_t=s(x_i)$ |\n| 比较节点 | `P` | $i,j$ | $x_t=\\begin{cases}-1 &x_i<x_j\\\\ 0 &x_i=x_j\\\\1 &x_i>x_j\\\\\\end{cases}$|\n| Max 节点 | `M` | $i,j$ | $x_t=\\begin{cases}x_i &x_i>x_j\\\\x_j &x_i \\leq x_j\\end{cases}$ |\n| 乘法节点 | `*` | $i,j$ | $x_t=x_i \\cdot x_j$ | \n\n其中，$s(x)$ 的定义如下：（$e$ 为自然常数,其值约为 $2.718281828459045\\ldots$）\n\n$$s\\left ( x \\right )=\\frac{1}{1+e^{-x}}$$\n\n$s(x)$ 的函数图像如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnscfgzu.png)\n\n上述表格中的操作数 $i,j$ 均要小于当前节点的编号 $t$，这样随着跳蚤国王的一声令下，跳蚤就可以按编号从小到大的顺序，依次获得输入然后计算输出。每个跳蚤的计算能力都是有限的，他们仅可以精确到十进制小数点后 $90$ 位，超过的部分将会被四舍五入。同理，上述表格中的操作数 $c$ 的小数部分也不能超过 $90$ 位。另外，左移节点和右移节点中的操作数 $k$ 必须是非负整数，且不能超过 $10^4$。\n\n把跳蚤排列好后，野心勃勃的跳蚤国王决心测试一下这台由跳蚤组成的计算机的计算能力，于是蝈蝈大臣给跳蚤国王献上了十个计算任务。完成每个计算任务均需要从终端获取输入，进行中间计算，再用输出节点将结果输出。具体任务说明如下：\n\n::cute-table{tuack}\n\n| 编号 | 输入 | 输入限制 | 输出 |\n|-|-|-|-|\n| $1$ | $a,b$ | $\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $-2a-2b$ |\n| $2$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\dfrac{1}{1+e^{17a}}$ |\n| $3$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\begin{cases}-1 & a \\lt 0 \\\\ 0 & a = 0 \\\\ 1 & a \\gt 0\\end{cases}$ |\n| $4$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\lvert a \\rvert$，即 $a$ 的绝对值 |\n| $5$ | $a_1, \\dots, a_{32}$ | $a_1, \\dots, a_{32} \\in \\{0, 1\\}$ | 把 $a_1, \\dots, a_{32}$ 从左到右看成一个二进制整数，高位在左低位在右，输出该整数的值 |\n| $6$ | $a$ | $0 \\le a \\lt 2^{32}$，$a$ 为整数 | 输出 $32$ 个整数，从高位到低位输出 $a$ 的二进制表示（不足 $32$ 位的在高位补 $0$） |\n| $7$ | $a,b$ | $0 \\le a, b \\lt 2^{32}$，$a,b$ 均为整数 | $a, b$ 按位异或的结果 |\n| $8$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\dfrac{a}{10}$ |\n| $9$ | $a_1, \\dots, a_{16}$ | $\\lvert a_1 \\rvert, \\dots, \\lvert a_{16} \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | 输出 $16$ 个实数，表示 $a_1, \\dots, a_{16}$ 从小到大排序后的结果 |\n| $10$ | $a,b,m$ | $0 \\le a, b \\lt 2^{32}$，$1 \\le m \\lt 2^{32}$，$a,b,m$ 均为整数 | $a \\cdot b$ 除以 $m$ 的余数 | \n\n跳蚤国王发现自己没有足够的能力设计这样的计算机。于是他找到了来参加 NOI 的你。请你依次设计每个计算节点的类型及操作数，完成蝈蝈大臣给的这 10 个计算任务，且要求使用的计算节点数尽量少。", "inputFormat": "所有输入数据 `nodes1.in` $\\sim$ `nodes10.in`，分别对应 10 个计算任务。\n\n每组输入数据仅包含一个整数，表示需要解决的计算任务编号。\n\n因只供评测机内部使用，洛谷不提供本题输入数据的下载，若有需要请自行生成。", "outputFormat": "输出文件为 `nodes1.out` $\\sim$ `nodes10.out`，分别对应相应的输入文件。\n\n对于每组输入数据，你需要依次输出若干行，第 $i$ 行描述第 $i$ 个计算节点。\n\n描述每个计算节点时，首先一个字符表示该计算节点的类型，接下来若干个数按顺序表示该计算节点的内置参数。字符与数，数与数之间均用空格隔开。\n\n输出的行数不能超过 $10^4$ 行。", "hint": "该样例输出为第一个计算任务一个可能的构造。共用了 $10$ 个计算节点，可获得 $3$ 分。\n\n我们提供了十个评分文件 `nodes1.ans` $\\sim$ `nodes10.ans`，分别对应每个计算任务。\n\n每个评分文件共 $10$ 行，第 $i$ 行一个评分参数 $w_i$，具体意义将在下面给出。\n\n本题中，每个测试点单独进行评分，每个测试点 $10$ 分。\n\n如果选手的输出格式不合法或者参数不符合题目约定,则得 $0$ 分。\n\n否则，按照以下规则判定选手的输出是否正确：\n\n- 首先测评器会生成若干组输入数据，并将输入数据代入你构造的计算机。\n- 如果在代入某一组输入数据时：你构造的计算机的计算过程中，某个计算节点的计算结果的绝对值超过 $10^{1000}$，则得 $0$ 分；\n- 你构造的计算机的输出中的某个值与预期的输出值相差超过 $10^{-9}$，则认为你的输出不正确，得 $0$ 分。\n- 否则，我们认为你的计算机能完成给定的计算任务，并按照以下规则得分。\n\n对于每个测试点，我们设置了 $10$ 个评分参数 $w_1$,$w_2$,$w_3$,…,$w_9$,$w_{10}$。\n\n假设共使用了 $n$ 个计算节点,你的分数将会由下表给出：\n\n::cute-table{tuack}\n\n | 得分 | 条件 | 得分 | 条件 |\n| :----------: | :----------: | :----------: | :----------: |\n| 10 | $n≤w_{10}$ | 5 | $n≤w_5$ |\n| 9 | $n≤w_9$ | 4 | $n≤w_4$ |\n| 8 | $n≤w_8$ | 3 | $n≤w_3$ |\n| 7 | $n≤w_7$ | 2 | $n≤w_2$ |\n| 6 | $n≤w_6$ | 1 | $n≤w_1$ |\n\n若不符合表中所有条件，得 $0$ 分；若符合表中的多个条件，则取分数最高的。\n\n除此之外，使用**比较节点、Max 节点和乘法节点**的代价是极为**昂贵**的。因此，这三种节点**每使用一种**，就会从你这个测试点的得分中**倒扣 $4$ 分**。\n\n注意这里是按使用节点的**种类数**计算扣分，**与使用次数无关**。例如多次使用比较节点，只会扣除 $4$ 分；又如同时使用了比较节点和乘法节点，**即使各只使用了一次，也会扣除 $8$ 分**。\n\n一个测试点至多被扣到 $0$ 分，即使分数不够扣除，也不会出现负数。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2016] Grand Computation in the Wilderness", "background": "Tip: If you submit by “submit code,” the judge will give your program a single number (1, 2, 3, ..., 10) indicating the test point ID during evaluation. Please print the answer corresponding to that test point directly in your program.", "description": "With the development of human computer technology, computers keep getting more powerful, which makes the Flea King very envious.\n\nOne day, the Flea King issued a decree: vigorously develop the Flea Kingdom’s computer industry! However, the Flea Kingdom has not undergone an industrial revolution and cannot manufacture the components needed for electronic computers. But the Flea King came up with a brilliant idea: treat each flea as a computing node, and each flea only performs a specific small task.\n\nThe Flea King led $n$ fleas to a wilderness, arranged them as computing nodes, and numbered them from $1$ to $n$. Each computing node takes the results of some (possibly $0$) other computing nodes as input and computes an output. In addition, the Flea King has a giant terminal that can input and output data. This terminal and all the computing nodes together form a computer.\n\nLet the output of the $t$-th computing node be $x_t$. The operation of this node can be one of the following types:\n\n::cute-table{tuack}\n\n| Name | Operator (Type) | Operands | Result |\n|-|-|-|-|\n| Input node | `I` | None | Read a real number from the terminal as $x_t$ |\n| Output node | `O` | $i$ | $x_t = x_i$, and output $x_t$ to the terminal |\n| Addition node | `+` | $i, j$ | $x_t = x_i + x_j$ |\n| Offset node | `C` | $i, c$ | $x_t = x_i + c$ |\n| Negation node | `-` | $i$ | $x_t = -x_i$ |\n| Left shift node | `<` | $i, k$ | $x_t = x_i \\cdot 2^k$ |\n| Right shift node | `>` | $i, k$ | $x_t = x_i \\cdot 2^{-k}$ |\n| S-type node | `S` | $i$ | $x_t = s(x_i)$ |\n| Comparison node | `P` | $i, j$ | $x_t=\\begin{cases}-1 &x_i<x_j\\\\ 0 &x_i=x_j\\\\1 &x_i>x_j\\\\\\end{cases}$ |\n| Max node | `M` | $i, j$ | $x_t=\\begin{cases}x_i &x_i>x_j\\\\x_j &x_i \\leq x_j\\end{cases}$ |\n| Multiplication node | `*` | $i, j$ | $x_t = x_i \\cdot x_j$ |\n\nHere, $s(x)$ is defined as follows ($e$ is the base of the natural logarithm, approximately $2.718281828459045\\ldots$):\n\n$$s\\left ( x \\right )=\\frac{1}{1+e^{-x}}$$\n\nThe graph of $s(x)$ is shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnscfgzu.png)\n\nIn the table above, the operand indices $i, j$ must both be less than the current node index $t$. Thus, when the Flea King gives the order, the fleas can obtain inputs and compute outputs in order from small index to large. Each flea’s computational precision is limited: they can only be accurate to $90$ digits after the decimal point, and any excess is rounded. Similarly, the fractional part of the operand $c$ in the table above cannot exceed $90$ digits. Moreover, in left shift and right shift nodes, the operand $k$ must be a non-negative integer and cannot exceed $10^4$.\n\nAfter arranging the fleas, the ambitious Flea King decided to test the computational capability of this flea-based computer. The Grasshopper Minister (guoguo, pinyin) presented 10 computational tasks to the Flea King. Each task requires reading input from the terminal, performing intermediate computations, and then outputting the result using an output node. The specific tasks are as follows:\n\n::cute-table{tuack}\n\n| ID | Input | Input constraints | Output |\n|-|-|-|-|\n| $1$ | $a, b$ | $\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$, fractional part no more than $9$ digits | $-2a - 2b$ |\n| $2$ | $a$ | $\\lvert a \\rvert \\le 10^9$, fractional part no more than $9$ digits | $\\dfrac{1}{1+e^{17a}}$ |\n| $3$ | $a$ | $\\lvert a \\rvert \\le 10^9$, fractional part no more than $9$ digits | $\\begin{cases}-1 & a \\lt 0 \\\\ 0 & a = 0 \\\\ 1 & a \\gt 0\\end{cases}$ |\n| $4$ | $a$ | $\\lvert a \\rvert \\le 10^9$, fractional part no more than $9$ digits | $\\lvert a \\rvert$, i.e., the absolute value of $a$ |\n| $5$ | $a_1, \\dots, a_{32}$ | $a_1, \\dots, a_{32} \\in \\{0, 1\\}$ | Read $a_1, \\dots, a_{32}$ from left to right as a binary integer, with most significant bit on the left and least significant bit on the right, and output its value |\n| $6$ | $a$ | $0 \\le a \\lt 2^{32}$, $a$ is an integer | Output $32$ integers: the binary representation of $a$ from most significant bit to least significant bit (pad with leading zeros to length $32$ if necessary) |\n| $7$ | $a, b$ | $0 \\le a, b \\lt 2^{32}$, $a, b$ are integers | The bitwise XOR of $a$ and $b$ |\n| $8$ | $a$ | $\\lvert a \\rvert \\le 10^9$, fractional part no more than $9$ digits | $\\dfrac{a}{10}$ |\n| $9$ | $a_1, \\dots, a_{16}$ | $\\lvert a_1 \\rvert, \\dots, \\lvert a_{16} \\rvert \\le 10^9$, fractional part no more than $9$ digits | Output $16$ real numbers: the result of sorting $a_1, \\dots, a_{16}$ in nondecreasing order |\n| $10$ | $a, b, m$ | $0 \\le a, b \\lt 2^{32}$, $1 \\le m \\lt 2^{32}$, $a, b, m$ are integers | The remainder of $a \\cdot b$ divided by $m$ |\n\nThe Flea King found that he did not have enough ability to design such a computer. So he turned to you, a contestant at NOI. Please design the type and operands of each computing node in order to complete the 10 tasks given by the Grasshopper Minister, while using as few computing nodes as possible.", "inputFormat": "All input testdata `nodes1.in` $\\sim$ `nodes10.in` correspond to the 10 computational tasks respectively.\n\nEach input file contains a single integer indicating the ID of the computational task to solve.\n\nSince they are only for internal judge use, Luogu does not provide downloads for the testdata of this problem. Generate them yourself if needed.", "outputFormat": "The output files are `nodes1.out` $\\sim$ `nodes10.out`, corresponding to the respective input files.\n\nFor each input file, output several lines; the $i$-th line describes the $i$-th computing node.\n\nTo describe each computing node, first output one character indicating the node type, followed by its built-in parameters in order. Use a single space between the character and numbers, and between numbers.\n\nThe number of output lines must not exceed $10^4$.", "hint": "The sample output is one possible construction for the first task. It uses $10$ computing nodes and earns $3$ points.\n\nWe provide ten scoring files `nodes1.ans` $\\sim$ `nodes10.ans`, corresponding to each computational task.\n\nEach scoring file contains $10$ lines. The $i$-th line contains one scoring parameter $w_i$, whose meaning is given below.\n\nEach test point is scored independently, with $10$ points per test point.\n\nIf your output format is invalid or parameters do not meet the problem’s requirements, you get $0$ points.\n\nOtherwise, the judge determines correctness as follows:\n- The judge will generate several groups of inputs and feed them into your constructed computer.\n- If for any input group, during computation on your constructed computer, the absolute value of some node’s result exceeds $10^{1000}$, you get $0$ points.\n- If any value in your output differs from the expected output by more than $10^{-9}$, your output is considered incorrect and you get $0$ points.\n- Otherwise, we consider your computer able to complete the given task, and your score is determined as follows.\n\nFor each test point, we set $10$ scoring parameters $w_1, w_2, w_3, \\ldots, w_9, w_{10}$.\n\nSuppose you used $n$ computing nodes. Your score is given by the table below:\n\n::cute-table{tuack}\n\n | Score | Condition | Score | Condition |\n| :----------: | :----------: | :----------: | :----------: |\n| 10 | $n \\le w_{10}$ | 5 | $n \\le w_5$ |\n| 9 | $n \\le w_9$ | 4 | $n \\le w_4$ |\n| 8 | $n \\le w_8$ | 3 | $n \\le w_3$ |\n| 7 | $n \\le w_7$ | 2 | $n \\le w_2$ |\n| 6 | $n \\le w_6$ | 1 | $n \\le w_1$ |\n\nIf none of the conditions in the table are met, you get $0$ points. If multiple conditions are met, take the highest score.\n\nIn addition, the cost of using the Comparison node, Max node, and Multiplication node is extremely expensive. Therefore, for each type among these three that you use, $4$ points will be deducted from your score on that test point.\n\nNote that the deduction is by the number of node types used, not by usage count. For example, using the Comparison node multiple times only deducts $4$ points. If you used both the Comparison node and the Multiplication node, even if each is used once, $8$ points will be deducted.\n\nA test point’s score will be deducted to at most $0$; even if the available score is insufficient, the score will not go negative.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2016] 旷野大计算", "background": "**提示：若是使用“提交代码”的方式进行提交，在评测时会给程序输入一个数字（1, 2, 3, ..., 10）表示测试点编号，请在程序中直接输出对应测试点的答案。**\n", "description": "随着人类计算机技术的发展，计算机的能力不断提升，让跳蚤国王非常羡慕。\n\n终于有一天，跳蚤国王发布政令：大力发展跳蚤国的计算机产业！然而，跳蚤国尚未进行工业革命，无法制造出电子计算机所需的元器件。但是跳蚤国王想出了一个绝妙的想法：把每只跳蚤作为一个计算节点，每只跳蚤只完成一个特定的小任务。\n\n跳蚤国王带领 $n$ 只跳蚤来到了一片旷野上，把跳蚤作为计算节点在旷野上排列好，并编号为 $1$ 到 $n$。每个计算节点会把某几个（也有可能是 $0$ 个）计算节点的结果作为输入，计算得到输出。除此之外，跳蚤国王还有一个巨型的终端，可以从终端输入和输出数据，这台终端和所有计算节点组成了一台计算机。\n\n记第 $t$ 个计算节点的输出为 $x_t$，该节点的操作可分为以下几种类型：\n\n::cute-table{tuack}\n\n| 名称 | 操作符（类型） | 操作数 | 计算结果 |\n|-|-|-|-|\n| 输入节点 | `I` | 无 | 从终端读入一个实数作为 $x_t$ |\n| 输出节点 | `O` | $i$ | $x_t = x_i$，并将 $x_t$ 输出到终端 |\n| 加法节点 | `+` | $i,j$ | $x_t = x_i+x_j$ |\n| 偏移节点 | `C` | $i,c$ | $x_t=x_i+c$ |\n| 取反节点 | `-` | $i$ | $x_t=-x_i$ |\n| 左移节点 | `<` | $i,k$ | $x_t=x_i\\cdot 2^k$ |\n| 右移节点 | `>` | $i,k$ | $x_t=x_i\\cdot 2^{-k}$ |\n| S 型节点 | `S` | $i$ | $x_t=s(x_i)$ |\n| 比较节点 | `P` | $i,j$ | $x_t=\\begin{cases}-1 &x_i<x_j\\\\ 0 &x_i=x_j\\\\1 &x_i>x_j\\\\\\end{cases}$|\n| Max 节点 | `M` | $i,j$ | $x_t=\\begin{cases}x_i &x_i>x_j\\\\x_j &x_i \\leq x_j\\end{cases}$ |\n| 乘法节点 | `*` | $i,j$ | $x_t=x_i \\cdot x_j$ | \n\n其中，$s(x)$ 的定义如下：（$e$ 为自然常数,其值约为 $2.718281828459045\\ldots$）\n\n$$s\\left ( x \\right )=\\frac{1}{1+e^{-x}}$$\n\n$s(x)$ 的函数图像如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnscfgzu.png)\n\n上述表格中的操作数 $i,j$ 均要小于当前节点的编号 $t$，这样随着跳蚤国王的一声令下，跳蚤就可以按编号从小到大的顺序，依次获得输入然后计算输出。每个跳蚤的计算能力都是有限的，他们仅可以精确到十进制小数点后 $90$ 位，超过的部分将会被四舍五入。同理，上述表格中的操作数 $c$ 的小数部分也不能超过 $90$ 位。另外，左移节点和右移节点中的操作数 $k$ 必须是非负整数，且不能超过 $10^4$。\n\n把跳蚤排列好后，野心勃勃的跳蚤国王决心测试一下这台由跳蚤组成的计算机的计算能力，于是蝈蝈大臣给跳蚤国王献上了十个计算任务。完成每个计算任务均需要从终端获取输入，进行中间计算，再用输出节点将结果输出。具体任务说明如下：\n\n::cute-table{tuack}\n\n| 编号 | 输入 | 输入限制 | 输出 |\n|-|-|-|-|\n| $1$ | $a,b$ | $\\lvert a \\rvert, \\lvert b \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $-2a-2b$ |\n| $2$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\dfrac{1}{1+e^{17a}}$ |\n| $3$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\begin{cases}-1 & a \\lt 0 \\\\ 0 & a = 0 \\\\ 1 & a \\gt 0\\end{cases}$ |\n| $4$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\lvert a \\rvert$，即 $a$ 的绝对值 |\n| $5$ | $a_1, \\dots, a_{32}$ | $a_1, \\dots, a_{32} \\in \\{0, 1\\}$ | 把 $a_1, \\dots, a_{32}$ 从左到右看成一个二进制整数，高位在左低位在右，输出该整数的值 |\n| $6$ | $a$ | $0 \\le a \\lt 2^{32}$，$a$ 为整数 | 输出 $32$ 个整数，从高位到低位输出 $a$ 的二进制表示（不足 $32$ 位的在高位补 $0$） |\n| $7$ | $a,b$ | $0 \\le a, b \\lt 2^{32}$，$a,b$ 均为整数 | $a, b$ 按位异或的结果 |\n| $8$ | $a$ | $\\lvert a \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | $\\dfrac{a}{10}$ |\n| $9$ | $a_1, \\dots, a_{16}$ | $\\lvert a_1 \\rvert, \\dots, \\lvert a_{16} \\rvert \\le 10^9$，小数部分不超过 $9$ 位 | 输出 $16$ 个实数，表示 $a_1, \\dots, a_{16}$ 从小到大排序后的结果 |\n| $10$ | $a,b,m$ | $0 \\le a, b \\lt 2^{32}$，$1 \\le m \\lt 2^{32}$，$a,b,m$ 均为整数 | $a \\cdot b$ 除以 $m$ 的余数 | \n\n跳蚤国王发现自己没有足够的能力设计这样的计算机。于是他找到了来参加 NOI 的你。请你依次设计每个计算节点的类型及操作数，完成蝈蝈大臣给的这 10 个计算任务，且要求使用的计算节点数尽量少。", "inputFormat": "所有输入数据 `nodes1.in` $\\sim$ `nodes10.in`，分别对应 10 个计算任务。\n\n每组输入数据仅包含一个整数，表示需要解决的计算任务编号。\n\n因只供评测机内部使用，洛谷不提供本题输入数据的下载，若有需要请自行生成。", "outputFormat": "输出文件为 `nodes1.out` $\\sim$ `nodes10.out`，分别对应相应的输入文件。\n\n对于每组输入数据，你需要依次输出若干行，第 $i$ 行描述第 $i$ 个计算节点。\n\n描述每个计算节点时，首先一个字符表示该计算节点的类型，接下来若干个数按顺序表示该计算节点的内置参数。字符与数，数与数之间均用空格隔开。\n\n输出的行数不能超过 $10^4$ 行。", "hint": "该样例输出为第一个计算任务一个可能的构造。共用了 $10$ 个计算节点，可获得 $3$ 分。\n\n我们提供了十个评分文件 `nodes1.ans` $\\sim$ `nodes10.ans`，分别对应每个计算任务。\n\n每个评分文件共 $10$ 行，第 $i$ 行一个评分参数 $w_i$，具体意义将在下面给出。\n\n本题中，每个测试点单独进行评分，每个测试点 $10$ 分。\n\n如果选手的输出格式不合法或者参数不符合题目约定,则得 $0$ 分。\n\n否则，按照以下规则判定选手的输出是否正确：\n\n- 首先测评器会生成若干组输入数据，并将输入数据代入你构造的计算机。\n- 如果在代入某一组输入数据时：你构造的计算机的计算过程中，某个计算节点的计算结果的绝对值超过 $10^{1000}$，则得 $0$ 分；\n- 你构造的计算机的输出中的某个值与预期的输出值相差超过 $10^{-9}$，则认为你的输出不正确，得 $0$ 分。\n- 否则，我们认为你的计算机能完成给定的计算任务，并按照以下规则得分。\n\n对于每个测试点，我们设置了 $10$ 个评分参数 $w_1$,$w_2$,$w_3$,…,$w_9$,$w_{10}$。\n\n假设共使用了 $n$ 个计算节点,你的分数将会由下表给出：\n\n::cute-table{tuack}\n\n | 得分 | 条件 | 得分 | 条件 |\n| :----------: | :----------: | :----------: | :----------: |\n| 10 | $n≤w_{10}$ | 5 | $n≤w_5$ |\n| 9 | $n≤w_9$ | 4 | $n≤w_4$ |\n| 8 | $n≤w_8$ | 3 | $n≤w_3$ |\n| 7 | $n≤w_7$ | 2 | $n≤w_2$ |\n| 6 | $n≤w_6$ | 1 | $n≤w_1$ |\n\n若不符合表中所有条件，得 $0$ 分；若符合表中的多个条件，则取分数最高的。\n\n除此之外，使用**比较节点、Max 节点和乘法节点**的代价是极为**昂贵**的。因此，这三种节点**每使用一种**，就会从你这个测试点的得分中**倒扣 $4$ 分**。\n\n注意这里是按使用节点的**种类数**计算扣分，**与使用次数无关**。例如多次使用比较节点，只会扣除 $4$ 分；又如同时使用了比较节点和乘法节点，**即使各只使用了一次，也会扣除 $8$ 分**。\n\n一个测试点至多被扣到 $0$ 分，即使分数不够扣除，也不会出现负数。", "locale": "zh-CN"}}}
{"pid": "P1738", "type": "P", "difficulty": 3, "samples": [["2\n/luogu/application/controller\n/luogu/application/view\n", "3\n4\n"], ["3\n/chicken\n/chicken/egg\n/chicken", "1\n2\n2"], ["4\n/a\n/a/b\n/a/c\n/b/b", "1\n2\n3\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "树形数据结构", "洛谷原创", "枚举"], "title": "洛谷的文件夹", "background": "", "description": "kkksc03 是个非凡的空想家！在短时间内他设想了大量网页，然后总是交给可怜的 lzn 去实现。\n\n洛谷的网页端，有很多文件夹，文件夹还套着文件夹。\n\n例如：$\\verb!/luogu/application/controller!$ 表示根目录下有一个名称为 $\\verb!luogu!$ 的文件夹，这个文件夹下有一个名称 $\\verb!application!$ 的文件夹，其中还有名为 $\\verb!controller!$ 的文件夹。\n\n每个路径的第 $1$ 个字符总是 $\\verb!/!$，且没有两个连续的 $\\verb!/!$，最后的字符不是 $\\verb!/!$。所有名称仅包含数字和小写字母。\n\n目前根目录是空的。kkksc03 想好了很多应该有的文件夹路径名。问题是，需要是使这些文件夹都存在，需要新建几个文件夹呢？\n", "inputFormat": "输入文件第 $1$ 行为一个正整数 $N$。\n\n接下来 $N$ 行，每行为一个描述路径的字符串，长度均不超过 $100$。", "outputFormat": "输出应包含 $N$ 行，每行 $1$ 个正整数，第 $i$ 行输出若要使第 $1$ 个路径到第 $i$ 个路径存在，最少需要新建多少个文件夹。", "hint": "### 数据范围及约定\n\n\n- 对于 $20\\%$ 数据，有 $N \\le 20$；\n- 对于 $50\\%$ 数据，有 $N \\le 200$；\n- 另有 $30\\%$ 数据，有对于所有路径最多存在两个 $\\verb!/!$（包含第 $1$ 个字符）；\n- 对于所有数据，$N \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Luogu’s Folders", "background": "", "description": "kkksc03 is an extraordinary dreamer! In a short time, he imagined a large number of web pages and always handed them to the poor lzn to implement.\n\nOn Luogu’s web frontend, there are many folders, and folders are nested inside folders.\n\nFor example: $\\verb!/luogu/application/controller!$ means that under the root directory there is a folder named $\\verb!luogu!$, inside which there is a folder named $\\verb!application!$, and inside that there is a folder named $\\verb!controller!$.\n\nIn each path, the $1$-st character is always $\\verb!/!$, there are no two consecutive $\\verb!/!$ characters, and the last character is not $\\verb!/!$. All names contain only digits and lowercase letters.\n\nCurrently, the root directory is empty. kkksc03 has thought of many folder pathnames that should exist. The question is: to make all these folders exist, how many folders need to be newly created?", "inputFormat": "The $1$-st line contains a positive integer $N$.\n\nThe next $N$ lines each contain a string describing a path, with length no more than $100$.", "outputFormat": "The output should contain $N$ lines, each with a single positive integer. On the $i$-th line, output the minimum number of folders that need to be created so that the first $1$ through $i$ paths exist.", "hint": "### Constraints\n\n- For $20\\%$ of the testdata, $N \\le 20$.\n- For $50\\%$ of the testdata, $N \\le 200$.\n- Additionally, for $30\\%$ of the testdata, every path contains at most two $\\verb!/!$ characters (counting the first character).\n- For all testdata, $N \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "洛谷的文件夹", "background": "", "description": "kkksc03 是个非凡的空想家！在短时间内他设想了大量网页，然后总是交给可怜的 lzn 去实现。\n\n洛谷的网页端，有很多文件夹，文件夹还套着文件夹。\n\n例如：$\\verb!/luogu/application/controller!$ 表示根目录下有一个名称为 $\\verb!luogu!$ 的文件夹，这个文件夹下有一个名称 $\\verb!application!$ 的文件夹，其中还有名为 $\\verb!controller!$ 的文件夹。\n\n每个路径的第 $1$ 个字符总是 $\\verb!/!$，且没有两个连续的 $\\verb!/!$，最后的字符不是 $\\verb!/!$。所有名称仅包含数字和小写字母。\n\n目前根目录是空的。kkksc03 想好了很多应该有的文件夹路径名。问题是，需要是使这些文件夹都存在，需要新建几个文件夹呢？\n", "inputFormat": "输入文件第 $1$ 行为一个正整数 $N$。\n\n接下来 $N$ 行，每行为一个描述路径的字符串，长度均不超过 $100$。", "outputFormat": "输出应包含 $N$ 行，每行 $1$ 个正整数，第 $i$ 行输出若要使第 $1$ 个路径到第 $i$ 个路径存在，最少需要新建多少个文件夹。", "hint": "### 数据范围及约定\n\n\n- 对于 $20\\%$ 数据，有 $N \\le 20$；\n- 对于 $50\\%$ 数据，有 $N \\le 200$；\n- 另有 $30\\%$ 数据，有对于所有路径最多存在两个 $\\verb!/!$（包含第 $1$ 个字符）；\n- 对于所有数据，$N \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1739", "type": "P", "difficulty": 1, "samples": [["2*(x+y)/(1-x)@\n", "YES\n"], ["(25+x)*(a*(a+b+b)@\n", "NO\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "线性数据结构", "栈"], "title": "表达式括号匹配", "background": "", "description": "假设一个表达式有英文字母（小写）、运算符（`+`、`-`、`*`、`/`）和左右小（圆）括号构成，以 `@` 作为表达式的结束符。请编写一个程序检查表达式中的左右圆括号是否匹配，若匹配，则输出 `YES`；否则输出 `NO`。表达式长度小于 $255$，左圆括号少于 $20$ 个。\n", "inputFormat": "一行：表达式。\n", "outputFormat": "一行：`YES` 或 `NO`。\n", "hint": "表达式长度小于 $255$，左圆括号少于 $20$ 个。\n", "locale": "zh-CN", "translations": {"en": {"title": "Expression Parentheses Matching", "background": "", "description": "Assume an expression consists of lowercase English letters, operators (`+`, `-`, `*`, `/`), and left/right round parentheses, with `@` as the terminator of the expression. Write a program to check whether the left and right parentheses in the expression are matched. If they match, output `YES`; otherwise, output `NO`. The expression length is less than $255$, and there are fewer than $20$ left parentheses.", "inputFormat": "One line: the expression.", "outputFormat": "One line: `YES` or `NO`.", "hint": "The expression length is less than $255$, and there are fewer than $20$ left parentheses.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "表达式括号匹配", "background": "", "description": "假设一个表达式有英文字母（小写）、运算符（`+`、`-`、`*`、`/`）和左右小（圆）括号构成，以 `@` 作为表达式的结束符。请编写一个程序检查表达式中的左右圆括号是否匹配，若匹配，则输出 `YES`；否则输出 `NO`。表达式长度小于 $255$，左圆括号少于 $20$ 个。\n", "inputFormat": "一行：表达式。\n", "outputFormat": "一行：`YES` 或 `NO`。\n", "hint": "表达式长度小于 $255$，左圆括号少于 $20$ 个。\n", "locale": "zh-CN"}}}
{"pid": "P1740", "type": "P", "difficulty": 2, "samples": [["4\r\n   /\\   \r\n  /\\/\\  \r\n /\\  /\\ \r\n/  \\/  \\\r\n\\/\\/ / /\r\n \\/\\  / \r\n  \\ \\/  \r\n   \\/   \r\n", "4\r\n1111\r\n11101\r\n1000\r\n10111\r\n1100\r\n10101\r\n0111\r\n11101\r\n1111\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "Diamond A&B(1)", "background": "由于本题较难，将本题拆做两题，分别为 diamond A 以及 diamond B。本题为 Diamond A。", "description": "教主上电视了！这个消息绝对是一个爆炸性的新闻。一经传开，大街上瞬间就没人了（都回家看电视去了），商店打烊，工厂停业。大家都把电视机的音量开到最大，教主的声音回响在大街小巷。\n\n小 L 给小 X 慌乱地打开自己家的电视机，发现所有频道都播放的是教主的采访节目（-\\_-bbb）。只见电视屏幕上的教主笑意吟吟，给大家出了一道难题：\n\n一个边长为 $n$ 的大菱形被均匀地划分成了 $n\\times n$ 个边长为 $1$ 的小菱形组成的网格，但是网格中部分边被抹去了，小 $L$ 想知道，大菱形内有多少个平行四边形，这些平行四边形内不存在边（平行四边形内是空的）。\n\n教主说，如果谁写出了程序，移动用户请将程序发送到 xxxx，联通用户请将程序发送到 xxxx……如果答对这个题，将有机会参加抽奖，大奖将是教主签名的 Orz 教主 T-Shirt 一件！这个奖品太具有诱惑力了。于是你需要编一个程序完成这么一道题。", "inputFormat": "输入的第一行为一个正整数 $n$，为大菱形的边长。\n\n以下 $2n$ 行，每行 $2n$ 个字符，字符为空格，$\\verb!/!$，$\\verb!\\!$ 中的一个。\n\n前 $n$ 行，第 $i$ 行中居中有 $2i$ 个字符，这 $2i$ 个字符中位置为奇数的字符只可能为 $\\verb!/!$ 或者空格，位置为偶数的字符只可能为 $\\verb!\\!$ 或空格，若为空格表示这样一条边不存在，其余字符均为空格，描述了大菱形的上半部分。\n\n后 $n$ 行，第 $i$ 行居中有有 $2(n-i+1)$ 个字符，与上半部分类似地描述了菱形的下半部分。\n\n输入文件保证大菱形的轮廓上没有边被抹去。", "outputFormat": "第一行一个整数 $n$。\n\n以下 $2\\times n+1$ 行，代表了将该菱形逆时针旋转一个锐角，并将图形变形为矩形后各边有无，$1$ 表示有边，$0$ 表示无边。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n \\le 10$；\n- 对于 $40\\%$ 的数据，$n \\le 60$；\n- 对于 $60\\%$ 的数据，$n \\le 200$；\n- 对于 $100\\%$ 的数据，$n \\le 888$。", "locale": "zh-CN", "translations": {"en": {"title": "Diamond A&B(1)", "background": "Because this problem is relatively hard, it is split into two parts: diamond A and diamond B. This problem is Diamond A.", "description": "The Guru is on TV! This news is absolutely explosive. As soon as it spreads, the streets instantly become empty (everyone went home to watch TV), shops close, and factories stop. Everyone turns their TV volume to the maximum, and the Guru’s voice echoes through the streets and alleys.\n\nXiao L hurriedly turns on the TV at home and finds that all channels are broadcasting the Guru’s interview program (-_-bbb). On the screen, the smiling Guru presents a difficult task:\n\nA large diamond with side length $n$ is evenly divided into an $n \\times n$ grid made of unit diamonds with side length $1$. However, some edges in the grid have been erased. Xiao L wants to know how many parallelograms are inside the large diamond whose interiors contain no edges (i.e., the interior is empty).\n\nThis task is split into two subproblems. In this subproblem (Diamond A), given the diamond-shaped grid described by slashes and backslashes below, please convert it into an axis-aligned rectangular grid and output the presence of edges as $0/1$ in the specified format. The actual counting of parallelograms is handled in Diamond B.", "inputFormat": "- The first line contains a positive integer $n$, the side length of the large diamond.\n\n- The next $2n$ lines each contain $2n$ characters. Each character is one of: a space, $\\verb!/!$, or $\\verb!\\!$.\n\n- For the first $n$ lines (the upper half of the diamond), the $i$-th line (1-indexed) has exactly $2i$ non-space positions centered in the line. Among these $2i$ positions:\n  - Characters at odd positions can only be $\\verb!/!$ or a space.\n  - Characters at even positions can only be $\\verb!\\!$ or a space.\n  A space means that the corresponding edge does not exist. All other characters outside these centered $2i$ positions are spaces. These lines describe the upper half of the diamond.\n\n- For the last $n$ lines (the lower half of the diamond), the $i$-th line (1-indexed within the lower half) has exactly $2(n - i + 1)$ non-space positions centered in the line, described in the same way as above, forming the lower half of the diamond.\n\n- It is guaranteed that no edge on the outer boundary of the large diamond is erased.", "outputFormat": "- The first line outputs the integer $n$.\n\n- Then output $2n+1$ lines that describe the edges after converting the diamond grid into an $n \\times n$ axis-aligned rectangular grid (think of rotating by $45^\\circ$ and scaling). Use $1$ for an existing edge and $0$ for a missing edge. Specifically:\n  - Lines $1$ to $n+1$: horizontal edges. Each of these lines contains exactly $n$ characters, each being $0$ or $1$. The $j$-th character on line $i$ (1-indexed) indicates whether the horizontal edge between grid points $(i-1, j-1)$ and $(i-1, j)$ exists.\n  - Lines $n+2$ to $2n+1$: vertical edges. Each of these lines contains exactly $n+1$ characters, each being $0$ or $1$. Let $r = i - (n+1)$ for line index $i$ in this range. The $j$-th character on line $i$ indicates whether the vertical edge between grid points $(r-1, j-1)$ and $(r, j-1)$ exists.", "hint": "### Constraints\n\n- For $20\\%$ of the testdata, $n \\le 10$.\n- For $40\\%$ of the testdata, $n \\le 60$.\n- For $60\\%$ of the testdata, $n \\le 200$.\n- For $100\\%$ of the testdata, $n \\le 888$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Diamond A&B(1)", "background": "由于本题较难，将本题拆做两题，分别为 diamond A 以及 diamond B。本题为 Diamond A。", "description": "教主上电视了！这个消息绝对是一个爆炸性的新闻。一经传开，大街上瞬间就没人了（都回家看电视去了），商店打烊，工厂停业。大家都把电视机的音量开到最大，教主的声音回响在大街小巷。\n\n小 L 给小 X 慌乱地打开自己家的电视机，发现所有频道都播放的是教主的采访节目（-\\_-bbb）。只见电视屏幕上的教主笑意吟吟，给大家出了一道难题：\n\n一个边长为 $n$ 的大菱形被均匀地划分成了 $n\\times n$ 个边长为 $1$ 的小菱形组成的网格，但是网格中部分边被抹去了，小 $L$ 想知道，大菱形内有多少个平行四边形，这些平行四边形内不存在边（平行四边形内是空的）。\n\n教主说，如果谁写出了程序，移动用户请将程序发送到 xxxx，联通用户请将程序发送到 xxxx……如果答对这个题，将有机会参加抽奖，大奖将是教主签名的 Orz 教主 T-Shirt 一件！这个奖品太具有诱惑力了。于是你需要编一个程序完成这么一道题。", "inputFormat": "输入的第一行为一个正整数 $n$，为大菱形的边长。\n\n以下 $2n$ 行，每行 $2n$ 个字符，字符为空格，$\\verb!/!$，$\\verb!\\!$ 中的一个。\n\n前 $n$ 行，第 $i$ 行中居中有 $2i$ 个字符，这 $2i$ 个字符中位置为奇数的字符只可能为 $\\verb!/!$ 或者空格，位置为偶数的字符只可能为 $\\verb!\\!$ 或空格，若为空格表示这样一条边不存在，其余字符均为空格，描述了大菱形的上半部分。\n\n后 $n$ 行，第 $i$ 行居中有有 $2(n-i+1)$ 个字符，与上半部分类似地描述了菱形的下半部分。\n\n输入文件保证大菱形的轮廓上没有边被抹去。", "outputFormat": "第一行一个整数 $n$。\n\n以下 $2\\times n+1$ 行，代表了将该菱形逆时针旋转一个锐角，并将图形变形为矩形后各边有无，$1$ 表示有边，$0$ 表示无边。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n \\le 10$；\n- 对于 $40\\%$ 的数据，$n \\le 60$；\n- 对于 $60\\%$ 的数据，$n \\le 200$；\n- 对于 $100\\%$ 的数据，$n \\le 888$。", "locale": "zh-CN"}}}
{"pid": "P1741", "type": "P", "difficulty": 5, "samples": [["4\r\n1111\r\n11101\r\n1000\r\n10111\r\n1100\r\n10101\r\n0111\r\n11101\r\n1111\r\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "Diamond A&B(2)", "background": "由于本题较难，将本题拆做两题，分别为 diamond A 以及 diamond B。本题为 Diamond B。\n\n", "description": "教主上电视了！这个消息绝对是一个爆炸性的新闻。一经传开，大街上瞬间就没人了（都回家看电视去了），商店打烊，工厂停业。大家都把电视机的音量开到最大，教主的声音回响在大街小巷。\n\n小 L 给小 X 慌乱地打开自己家的电视机，发现所有频道都播放的是教主的采访节目（-\\_-bbb）。只见电视屏幕上的教主笑意吟吟，给大家出了一道难题：\n\n一个边长为 $n$ 的大菱形被均匀地划分成了 $n\\times n$ 个边长为 $1$ 的小菱形组成的网格，但是网格中部分边被抹去了，小 $L$ 想知道，大菱形内有多少个平行四边形，这些平行四边形内不存在边（平行四边形内是空的）。\n\n教主说，如果谁写出了程序，移动用户请将程序发送到 xxxx，联通用户请将程序发送到 xxxx……如果答对这个题，将有机会参加抽奖，大奖将是教主签名的 Orz 教主 T-Shirt 一件！这个奖品太具有诱惑力了。于是你需要编一个程序完成这么一道题。\n", "inputFormat": "对于 Diamond A，其输入为：\n>输入的第一行为一个正整数 $n$，为大菱形的边长。\n>\n>以下 $2n$ 行，每行 $2n$ 个字符，字符为空格，$\\verb!/!$，$\\verb!\\!$ 中的一个。\n>\n>前 $n$ 行，第 $i$ 行中居中有 $2i$ 个字符，这 $2i$ 个字符中位置为奇数的字符只可能为 $\\verb!/!$ 或者空格，位置为偶数的字符只可能为 $\\verb!\\!$ 或空格，若为空格表示这样一条边不存在，其余字符均为空格，描述了大菱形的上半部分。\n>\n>后 $n$ 行，第 $i$ 行居中有有 $2(n-i+1)$ 个字符，与上半部分类似地描述了菱形的下半部分。\n>\n>输入文件保证大菱形的轮廓上没有边被抹去。\n\nDiamond A 的输出为：\n\n第一行一个整数 $n$。\n\n以下 $2\\times n+1$ 行，代表了将该菱形逆时针旋转一个锐角，并将图形变形为矩形后各边有无，$1$ 表示有边，$0$ 表示无边。\n\n以上 Diamond A 的输出内容，即作为本题的输入格式。", "outputFormat": "输出仅包括一个整数，为满足要求的平行四边形个数。\n", "hint": "### 样例 1 解释\n\n原始输入数据为：\n\n```\n4\n   /\\   \n  /\\/\\  \n /\\  /\\ \n/  \\/  \\\n\\/\\/ / /\n \\/\\  / \n  \\ \\/  \n   \\/   \n```\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n \\le 10$；\n- 对于 $40\\%$ 的数据，$n \\le 60$；\n- 对于 $60\\%$ 的数据，$n \\le 200$；\n- 对于 $100\\%$ 的数据，$n \\le 888$。", "locale": "zh-CN", "translations": {"en": {"title": "Diamond A&B(2)", "background": "Because this problem is difficult, it has been split into two problems, diamond A and diamond B. This problem is Diamond B.", "description": "Jiaozhu went on TV! This is absolutely explosive news. As soon as it spread, the streets instantly emptied (everyone went home to watch TV), shops closed, and factories halted. Everyone turned their TV volume to the maximum, and Jiaozhu’s voice echoed through every street and alley.\n\nXiao L hurriedly turned on the TV at home and found that every channel was broadcasting Jiaozhu’s interview program (-_-bbb). On the screen, Jiaozhu smiled and posed a challenge:\n\nA large diamond of side length $n$ is uniformly divided into an $n \\times n$ grid of small diamonds of side length $1$. However, some edges in the grid have been erased. Xiao L wants to know how many parallelograms are inside the large diamond such that the interior of each parallelogram contains no edges (i.e., the parallelogram’s interior is empty).\n\nJiaozhu said that whoever writes the program should, if using Mobile, send the program to xxxx; if using Unicom, send the program to xxxx… If you answer correctly, you will have a chance to enter a lottery. The grand prize is an Orz Jiaozhu T-Shirt with Jiaozhu’s signature! This prize is too tempting. Thus you need to write a program to solve this problem.", "inputFormat": "The first line contains a positive integer $n$, the side length of the large diamond.\n\nThe next $2n$ lines each contain $2n$ characters. Each character is one of: space, \\verb!/!, \\verb!\\!.\n\nFor the first $n$ lines (the upper half of the diamond), in line $i$ there is a centered block of $2i$ characters. Among these $2i$ characters, characters in odd positions can only be \\verb!/! or a space, and characters in even positions can only be \\verb!\\! or a space. A space means that such an edge does not exist. All other characters in the row (outside the centered block) are spaces, describing the upper half of the large diamond.\n\nFor the last $n$ lines (the lower half of the diamond), in the $i$-th line (counting from the top of the lower half, 1-indexed) there is a centered block of $2(n - i + 1)$ characters, described similarly to the upper half, describing the lower half of the diamond.\n\nThe input guarantees that no edge on the outline of the large diamond is erased.", "outputFormat": "Output a single integer: the number of parallelograms that satisfy the requirement.", "hint": "### Constraints\n\n- For $20\\%$ of the testdata, $n \\le 10$.\n- For $40\\%$ of the testdata, $n \\le 60$.\n- For $60\\%$ of the testdata, $n \\le 200$.\n- For $100\\%$ of the testdata, $n \\le 888$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Diamond A&B(2)", "background": "由于本题较难，将本题拆做两题，分别为 diamond A 以及 diamond B。本题为 Diamond B。\n\n", "description": "教主上电视了！这个消息绝对是一个爆炸性的新闻。一经传开，大街上瞬间就没人了（都回家看电视去了），商店打烊，工厂停业。大家都把电视机的音量开到最大，教主的声音回响在大街小巷。\n\n小 L 给小 X 慌乱地打开自己家的电视机，发现所有频道都播放的是教主的采访节目（-\\_-bbb）。只见电视屏幕上的教主笑意吟吟，给大家出了一道难题：\n\n一个边长为 $n$ 的大菱形被均匀地划分成了 $n\\times n$ 个边长为 $1$ 的小菱形组成的网格，但是网格中部分边被抹去了，小 $L$ 想知道，大菱形内有多少个平行四边形，这些平行四边形内不存在边（平行四边形内是空的）。\n\n教主说，如果谁写出了程序，移动用户请将程序发送到 xxxx，联通用户请将程序发送到 xxxx……如果答对这个题，将有机会参加抽奖，大奖将是教主签名的 Orz 教主 T-Shirt 一件！这个奖品太具有诱惑力了。于是你需要编一个程序完成这么一道题。\n", "inputFormat": "对于 Diamond A，其输入为：\n>输入的第一行为一个正整数 $n$，为大菱形的边长。\n>\n>以下 $2n$ 行，每行 $2n$ 个字符，字符为空格，$\\verb!/!$，$\\verb!\\!$ 中的一个。\n>\n>前 $n$ 行，第 $i$ 行中居中有 $2i$ 个字符，这 $2i$ 个字符中位置为奇数的字符只可能为 $\\verb!/!$ 或者空格，位置为偶数的字符只可能为 $\\verb!\\!$ 或空格，若为空格表示这样一条边不存在，其余字符均为空格，描述了大菱形的上半部分。\n>\n>后 $n$ 行，第 $i$ 行居中有有 $2(n-i+1)$ 个字符，与上半部分类似地描述了菱形的下半部分。\n>\n>输入文件保证大菱形的轮廓上没有边被抹去。\n\nDiamond A 的输出为：\n\n第一行一个整数 $n$。\n\n以下 $2\\times n+1$ 行，代表了将该菱形逆时针旋转一个锐角，并将图形变形为矩形后各边有无，$1$ 表示有边，$0$ 表示无边。\n\n以上 Diamond A 的输出内容，即作为本题的输入格式。", "outputFormat": "输出仅包括一个整数，为满足要求的平行四边形个数。\n", "hint": "### 样例 1 解释\n\n原始输入数据为：\n\n```\n4\n   /\\   \n  /\\/\\  \n /\\  /\\ \n/  \\/  \\\n\\/\\/ / /\n \\/\\  / \n  \\ \\/  \n   \\/   \n```\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n \\le 10$；\n- 对于 $40\\%$ 的数据，$n \\le 60$；\n- 对于 $60\\%$ 的数据，$n \\le 200$；\n- 对于 $100\\%$ 的数据，$n \\le 888$。", "locale": "zh-CN"}}}
{"pid": "P1742", "type": "P", "difficulty": 6, "samples": [["6\n8.0 9.0\n4.0 7.5\n1.0 2.0\n5.1 8.7\n9.0 2.0\n4.5 1.0", "5.0000000000\n5.0000000000 5.0000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "Special Judge"], "title": "最小圆覆盖", "background": "", "description": "给出 $N$ 个点，让你画一个最小的包含所有点的圆。", "inputFormat": "第一行一个整数 $N$ 表示点的个数。\n\n接下来 $N$ 行每行两个实数 $x_i,y_i$ 表示点的坐标。最多两位小数。", "outputFormat": "第一行一个实数表示圆的半径。\n\n第二行两个实数表示圆心的坐标。\n\n本题开启 spj，您的答案与标准答案误差不超过 $10^{-9}$ 时，视为正确。", "hint": "对于 $100\\%$ 的数据，$1\\leq N\\leq 10^5$，$|x_i|,|y_i|\\leq 10^4$。\n\n2022.2.26 添加 spj", "locale": "zh-CN", "translations": {"en": {"title": "Minimum Enclosing Circle", "background": "", "description": "Given $N$ points, find the smallest circle that contains all the points.", "inputFormat": "The first line contains an integer $N$ representing the number of points.\nThe next $N$ lines each contain two real numbers $x_i, y_i$ representing the coordinates of a point. Each value has at most two decimal places.", "outputFormat": "The first line contains a real number representing the circle’s radius.\nThe second line contains two real numbers representing the coordinates of the circle’s center.\nThis problem uses an SPJ (special judge); your answer is considered correct if its absolute error from the standard answer does not exceed $10^{-9}$.", "hint": "For $100\\%$ of the testdata, $1 \\leq N \\leq 10^5$, $|x_i|, |y_i| \\leq 10^4$.\nSPJ added on 2022-02-26.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小圆覆盖", "background": "", "description": "给出 $N$ 个点，让你画一个最小的包含所有点的圆。", "inputFormat": "第一行一个整数 $N$ 表示点的个数。\n\n接下来 $N$ 行每行两个实数 $x_i,y_i$ 表示点的坐标。最多两位小数。", "outputFormat": "第一行一个实数表示圆的半径。\n\n第二行两个实数表示圆心的坐标。\n\n本题开启 spj，您的答案与标准答案误差不超过 $10^{-9}$ 时，视为正确。", "hint": "对于 $100\\%$ 的数据，$1\\leq N\\leq 10^5$，$|x_i|,|y_i|\\leq 10^4$。\n\n2022.2.26 添加 spj", "locale": "zh-CN"}}}
{"pid": "P1743", "type": "P", "difficulty": 3, "samples": [["6 4", "210"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "递推"], "title": "矩阵 III", "background": "usqwedf 改编系列题。\n", "description": "给定一个 $n\\times m$ 的矩阵，问从左上角走到右下角有多少条路径，保留 $17$ 位有效数字（也就是从第 $18$ 位有效数字以后均输出 $0$）。\n", "inputFormat": "一行两个正整数 $n,m$。\n", "outputFormat": "路径数目 $t$。\n", "hint": "$1\\le n\\le 10^8,1\\le m\\le 4$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Matrix III", "background": "Adapted series problem by usqwedf.", "description": "Given an $n \\times m$ matrix, ask how many paths there are from the top-left corner to the bottom-right corner. Retain 17 significant digits (that is, starting from the 18th significant digit, output 0).", "inputFormat": "A single line with two positive integers $n, m$.", "outputFormat": "The number of paths $t$.", "hint": "Constraints: $1 \\le n \\le 10^8, 1 \\le m \\le 4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "矩阵 III", "background": "usqwedf 改编系列题。\n", "description": "给定一个 $n\\times m$ 的矩阵，问从左上角走到右下角有多少条路径，保留 $17$ 位有效数字（也就是从第 $18$ 位有效数字以后均输出 $0$）。\n", "inputFormat": "一行两个正整数 $n,m$。\n", "outputFormat": "路径数目 $t$。\n", "hint": "$1\\le n\\le 10^8,1\\le m\\le 4$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1744", "type": "P", "difficulty": 3, "samples": [["5\r\n0 0\r\n2 0\r\n2 2\r\n0 2\r\n3 1\r\n5\r\n1 2\r\n1 3\r\n1 4\r\n2 5\r\n3 5\r\n1 5", "3.41"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "最短路", "队列"], "title": "采购特价商品", "background": "《爱与愁的故事第三弹·shopping》第一章。", "description": "中山路店山店海，成了购物狂爱与愁大神的“不归之路”。中山路上有 $n$（$n \\leq 100$）家店，每家店的坐标均在 $-10000$ 至 $10000$ 之间。其中的 $m$ 家店之间有通路。若有通路，则表示可以从一家店走到另一家店，通路的距离为两点间的直线距离。现在爱与愁大神要找出从一家店到另一家店之间的最短距离。你能帮爱与愁大神算出吗？", "inputFormat": "共 $n+m+3$ 行：\n\n第一行：整数 $n$。 \n\n接下来 $n$ 行：每行两个整数 $x$ 和 $y$，描述了一家店的坐标。 \n\n接下来一行：整数 $m$。 \n\n接下来 $m$ 行：每行描述一条通路，由两个整数 $i$ 和 $j$ 组成，表示第 $i$ 家店和第 $j$ 家店之间有通路。\n\n接下来一行：两个整数 $s$ 和 $t$，分别表示原点和目标店。 ", "outputFormat": "仅一行：一个实数（保留两位小数），表示从 $s$ 到 $t$ 的最短路径长度。", "hint": "对于 $100 \\%$ 的数据：$2 \\le n \\leq 100$，$1 \\le i, j, s, t \\le n$，$1 \\le m \\leq 1000$。 ", "locale": "zh-CN", "translations": {"en": {"title": "Buying Discounted Items", "background": "\"The Story of Love and Sorrow, Part 3 · shopping,\" Chapter 1.", "description": "There are shops everywhere along Zhongshan Road, which has become a point of no return for the shopaholic guru \"Love-and-Sorrow\" (Ai Yu Chou). There are $n$ ($n \\leq 100$) shops on Zhongshan Road, and each shop’s coordinates lie between $-10000$ and $10000$. Among them, there are $m$ roads connecting pairs of shops. If there is a road, you can travel from one shop to the other, and the length of the road is the straight-line distance between the two points. Now the guru \"Love-and-Sorrow\" wants to find the shortest distance between two shops. Can you help compute it?", "inputFormat": "A total of $n+m+3$ lines:\n\nThe first line: an integer $n$.\n\nThe next $n$ lines: each line contains two integers $x$ and $y$, giving the coordinates of a shop.\n\nThe next line: an integer $m$.\n\nThe next $m$ lines: each line describes a road, consisting of two integers $i$ and $j$, indicating there is a road between shop $i$ and shop $j$.\n\nThe next line: two integers $s$ and $t$, indicating the source shop and the target shop, respectively.", "outputFormat": "A single line: a real number (rounded to two decimal places), representing the length of the shortest path from $s$ to $t$.", "hint": "Constraints: For $100 \\%$ of the testdata: $2 \\le n \\leq 100$, $1 \\le i, j, s, t \\le n$, $1 \\le m \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "采购特价商品", "background": "《爱与愁的故事第三弹·shopping》第一章。", "description": "中山路店山店海，成了购物狂爱与愁大神的“不归之路”。中山路上有 $n$（$n \\leq 100$）家店，每家店的坐标均在 $-10000$ 至 $10000$ 之间。其中的 $m$ 家店之间有通路。若有通路，则表示可以从一家店走到另一家店，通路的距离为两点间的直线距离。现在爱与愁大神要找出从一家店到另一家店之间的最短距离。你能帮爱与愁大神算出吗？", "inputFormat": "共 $n+m+3$ 行：\n\n第一行：整数 $n$。 \n\n接下来 $n$ 行：每行两个整数 $x$ 和 $y$，描述了一家店的坐标。 \n\n接下来一行：整数 $m$。 \n\n接下来 $m$ 行：每行描述一条通路，由两个整数 $i$ 和 $j$ 组成，表示第 $i$ 家店和第 $j$ 家店之间有通路。\n\n接下来一行：两个整数 $s$ 和 $t$，分别表示原点和目标店。 ", "outputFormat": "仅一行：一个实数（保留两位小数），表示从 $s$ 到 $t$ 的最短路径长度。", "hint": "对于 $100 \\%$ 的数据：$2 \\le n \\leq 100$，$1 \\le i, j, s, t \\le n$，$1 \\le m \\leq 1000$。 ", "locale": "zh-CN"}}}
{"pid": "P1745", "type": "P", "difficulty": 6, "samples": [["3\n0 0 0\n0 1 0\n1 0 0", "3\nx1 -> !x2\nx3 -> x1\nx3 -> x2"], ["4\n0 0 1 0\n1 0 0 0\n1 0 1 1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "Special Judge", "ICPC", "CERC"], "title": "[CERC2016] Lost Logic", "background": "", "description": "Gustav is reading about *2-satisfiability*, a well known problem of assigning truth values to boolean\nvariables in order to satisfy a list of *constraints* — simple logical formulas involving two variables each.\n\nWe are using $n$ variables $x_1, x_2, \\cdots , x_n$ that can take on values $0$ (false) and $1$ (true). A constraint is a\nformula of the form $a\\to b$ where both $a$ and $b$ are possibly negated variables. As usual, $\\to$ denotes\nlogical implication: $a \\to b$ is $0$ only when $a$ is $1$ and $b$ is $0$. The negation of variable $a$ is denoted by $!a$.\n\nGiven an assignment of values to variables, we say that the constraint is *satisfied* if it evaluates to $1$.\nGustav has constructed a list of constraints and correctly concluded that there are *exactly three* different\nassignments of values to variables that satisfy all the constraints. Gustav has wrote down all three\nassignments but has, unfortunately, lost the list of constraints.\nGiven three assignments of $n$ values to variables, find any list consisting of at most $500$ constrains such\nthat the three given assignments are the *only* assignments that satisfy all the constraints.\n\n", "inputFormat": "The first line contains an integer $n (2 \\leq n \\leq 50)$ — the number of variables. Three lines follow, each\ndescribing one assignment. The $k$-th line contains $n$ space-separated integers $v_1^k,v_2^k,\\cdots,v_n^k$, where each $v_i^k$ is either $0$ or $1$ and denotes the value of the variable $x_i$ in the $k$-th assignment. All three assignments will be different.", "outputFormat": "If there is no solution output a single line containing the integer $−1$.\nOtherwise, the first line should contain an integer $m$ where $1 \\leq m \\leq 500$ — the number of constraints\nin your solution. The $k$-th of the following $m$ lines should contain the $k$-th constraint. Each constraint\nshould be a string constructed according to the following rules:\n\n- A *variable* is a string of the form “$\\texttt{x}i$” where $i$ is an integer between $1$ and $n$ inclusive written\n  without leading zeros.\n- A *literal* is a string consisting of a variable possibly preceded by the “$\\texttt{!}$” character.\n- A *constraint* is a string of the form “$a\\texttt{ -> }b$” where both $a$ and $b$ are literals. The implication sign\n  consists of the “minus” character and the “greater-than” character and there is a single space\n  character both before and after the implication sign.\n\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC2016] Lost Logic", "background": "", "description": "Gustav is reading about *2-satisfiability*, a well known problem of assigning truth values to boolean\nvariables in order to satisfy a list of *constraints* — simple logical formulas involving two variables each.\n\nWe are using $n$ variables $x_1, x_2, \\cdots , x_n$ that can take on values $0$ (false) and $1$ (true). A constraint is a\nformula of the form $a\\to b$ where both $a$ and $b$ are possibly negated variables. As usual, $\\to$ denotes\nlogical implication: $a \\to b$ is $0$ only when $a$ is $1$ and $b$ is $0$. The negation of variable $a$ is denoted by $!a$.\n\nGiven an assignment of values to variables, we say that the constraint is *satisfied* if it evaluates to $1$.\nGustav has constructed a list of constraints and correctly concluded that there are *exactly three* different\nassignments of values to variables that satisfy all the constraints. Gustav has wrote down all three\nassignments but has, unfortunately, lost the list of constraints.\nGiven three assignments of $n$ values to variables, find any list consisting of at most $500$ constrains such\nthat the three given assignments are the *only* assignments that satisfy all the constraints.\n\n", "inputFormat": "The first line contains an integer $n (2 \\leq n \\leq 50)$ — the number of variables. Three lines follow, each\ndescribing one assignment. The $k$-th line contains $n$ space-separated integers $v_1^k,v_2^k,\\cdots,v_n^k$, where each $v_i^k$ is either $0$ or $1$ and denotes the value of the variable $x_i$ in the $k$-th assignment. All three assignments will be different.", "outputFormat": "If there is no solution output a single line containing the integer $−1$.\nOtherwise, the first line should contain an integer $m$ where $1 \\leq m \\leq 500$ — the number of constraints\nin your solution. The $k$-th of the following $m$ lines should contain the $k$-th constraint. Each constraint\nshould be a string constructed according to the following rules:\n\n- A *variable* is a string of the form “$\\texttt{x}i$” where $i$ is an integer between $1$ and $n$ inclusive written\n  without leading zeros.\n- A *literal* is a string consisting of a variable possibly preceded by the “$\\texttt{!}$” character.\n- A *constraint* is a string of the form “$a\\texttt{ -> }b$” where both $a$ and $b$ are literals. The implication sign\n  consists of the “minus” character and the “greater-than” character and there is a single space\n  character both before and after the implication sign.\n\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC2016] Lost Logic", "background": "", "description": "Gustav 正在阅读关于「2-可满足性」的问题，这是一个著名的问题，涉及为布尔变量分配真值以满足一系列「约束」——每个约束是涉及两个变量的简单逻辑公式。\n\n我们使用 $n$ 个变量 $x_1, x_2, \\cdots , x_n$，这些变量可以取值 $0$（假）和 $1$（真）。一个约束是形如 $a\\to b$ 的公式，其中 $a$ 和 $b$ 都是可能被取反的变量。通常，$\\to$ 表示逻辑蕴涵：$a \\to b$ 仅在 $a$ 为 $1$ 且 $b$ 为 $0$ 时为 $0$。变量 $a$ 的取反表示为 $!a$。\n\n给定变量的一个赋值，我们称约束在其结果为 $1$ 时被「满足」。Gustav 构建了一系列约束，并正确地得出有「恰好三种」不同的变量赋值可以满足所有约束。Gustav 写下了所有三种赋值，但不幸的是，他丢失了约束列表。\n给定三个变量的 $n$ 个值的赋值，找出一个最多包含 $500$ 个约束的列表，使得这三个给定的赋值是唯一满足所有约束的赋值。\n\n", "inputFormat": "第一行包含一个整数 $n (2 \\leq n \\leq 50)$ —— 变量的数量。接下来三行，每行描述一个赋值。第 $k$ 行包含 $n$ 个用空格分隔的整数 $v_1^k,v_2^k,\\cdots,v_n^k$，其中每个 $v_i^k$ 不是 $0$ 就是 $1$，表示第 $k$ 个赋值中变量 $x_i$ 的值。所有三个赋值将是不同的。", "outputFormat": "如果没有解，输出一行包含整数 $-1$。\n否则，第一行应包含一个整数 $m$，其中 $1 \\leq m \\leq 500$ —— 你解决方案中的约束数量。接下来的 $m$ 行中的第 $k$ 行应包含第 $k$ 个约束。每个约束应根据以下规则构造一个字符串：\n\n- 一个「变量」是形如「$\\texttt{x}i$」的字符串，其中 $i$ 是一个介于 $1$ 和 $n$ 之间的整数，且不含前导零。\n- 一个「文字」是一个可能以「$\\texttt{!}$」字符开头的变量组成的字符串。\n- 一个「约束」是形如「$a\\texttt{ -> }b$」的字符串，其中 $a$ 和 $b$ 都是文字。蕴涵符号由「减号」和「大于号」字符组成，且在蕴涵符号前后各有一个空格字符。\n\n", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P1746", "type": "P", "difficulty": 2, "samples": [["3\n001\n101\n100\n1 1 3 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "广度优先搜索 BFS", "队列"], "title": "离开中山路", "background": "《爱与愁的故事第三弹·shopping》最终章。\n", "description": "爱与愁大神买完东西后，打算坐车离开中山路。现在爱与愁大神在 $x_1,y_1$ 处，车站在 $x_2,y_2$ 处。现在给出一个 $n \\times n(n \\le 1000)$ 的地图，$0$ 表示马路，$1$ 表示店铺（不能从店铺穿过），爱与愁大神只能垂直或水平着在马路上行进。爱与愁大神为了节省时间，他要求最短到达目的地距离（每两个相邻坐标间距离为 $1$）。你能帮他解决吗？\n", "inputFormat": "第 $1$ 行包含一个数 $n$。\n\n第 $2$ 行到第 $n+1$ 行：整个地图描述（$0$ 表示马路，$1$ 表示店铺，注意两个数之间没有空格）。\n\n第 $n+2$ 行：四个数 $x_1,y_1,x_2,y_2$。", "outputFormat": "\n只有 $1$ 行，即最短到达目的地距离。\n", "hint": "\n对于 $20\\%$ 数据，满足 $1\\leq n \\le 100$。\n\n对于 $100\\%$ 数据，满足 $1\\leq n \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Leaving Zhongshan Road", "background": "The final chapter of “A Story of Love and Sorrow III · shopping”.", "description": "After shopping, Aiyuchou plans to take a bus to leave Zhongshan Road. He is at $x_1,y_1$, and the station is at $x_2,y_2$. You are given an $n \\times n(n \\le 1000)$ map, where $0$ represents road and $1$ represents shop (cannot pass through shops). Aiyuchou can move only vertically or horizontally along roads. To save time, he wants the shortest distance to the destination (the distance between two adjacent coordinates is $1$). Can you help him?", "inputFormat": "Line $1$ contains an integer $n$.\n\nLines $2$ to $n+1$: the entire map description ($0$ represents road, $1$ represents shop; note there are no spaces between numbers).\n\nLine $n+2$: four integers $x_1,y_1,x_2,y_2$.", "outputFormat": "Only $1$ line, the shortest distance to the destination.", "hint": "For $20\\%$ of the testdata, $1\\leq n \\le 100$.\n\nFor $100\\%$ of the testdata, $1\\leq n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "离开中山路", "background": "《爱与愁的故事第三弹·shopping》最终章。\n", "description": "爱与愁大神买完东西后，打算坐车离开中山路。现在爱与愁大神在 $x_1,y_1$ 处，车站在 $x_2,y_2$ 处。现在给出一个 $n \\times n(n \\le 1000)$ 的地图，$0$ 表示马路，$1$ 表示店铺（不能从店铺穿过），爱与愁大神只能垂直或水平着在马路上行进。爱与愁大神为了节省时间，他要求最短到达目的地距离（每两个相邻坐标间距离为 $1$）。你能帮他解决吗？\n", "inputFormat": "第 $1$ 行包含一个数 $n$。\n\n第 $2$ 行到第 $n+1$ 行：整个地图描述（$0$ 表示马路，$1$ 表示店铺，注意两个数之间没有空格）。\n\n第 $n+2$ 行：四个数 $x_1,y_1,x_2,y_2$。", "outputFormat": "\n只有 $1$ 行，即最短到达目的地距离。\n", "hint": "\n对于 $20\\%$ 数据，满足 $1\\leq n \\le 100$。\n\n对于 $100\\%$ 数据，满足 $1\\leq n \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P1747", "type": "P", "difficulty": 3, "samples": [["12 16\n18 10", "8 \n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "广度优先搜索 BFS"], "title": "好奇怪的游戏", "background": "《爱与愁的故事第三弹·shopping》娱乐章。\n\n调调口味来道水题。\n", "description": "爱与愁大神坐在公交车上无聊，于是玩起了手机。一款奇怪的游戏进入了爱与愁大神的眼帘：\\*\\*\\*（游戏名被打上了马赛克）。这个游戏类似象棋，但是只有黑白马各一匹，在点 $x_1,y_1$ 和 $x_2,y_2$ 上。它们得从点 $x_1,y_1$ 和 $x_2,y_2$ 走到 $(1,1)$。这个游戏与普通象棋不同的地方是：马可以走“日”，也可以像象走“田”。现在爱与愁大神想知道两匹马到 $(1,1)$ 的最少步数，你能帮他解决这个问题么？\n\n注意不能走到 $x$ 或 $y$ 坐标 $\\le 0$ 的位置。满足此限制的 $(x,y)$ 均可到达。", "inputFormat": "第一行两个整数 $x_1,y_1$。\n\n第二行两个整数 $x_2,y_2$。", "outputFormat": "第一行一个整数，表示黑马到 $(1,1)$ 的步数。\n\n第二行一个整数，表示白马到 $(1,1)$ 的步数。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 数据，$1\\le x_1,y_1,x_2,y_2 \\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "A Very Strange Game", "background": "\"The Story of Love and Sorrow III · shopping\", entertainment chapter.\n\nLet’s change the pace with an easy problem.", "description": "Aiyuchou dashen was bored on the bus and started playing on the phone. A strange game caught Aiyuchou dashen’s eye: *** (the game’s name is mosaicked). The game is similar to chess, but there is only one black knight and one white knight, located at points $x_1, y_1$ and $x_2, y_2$. They must move from $x_1, y_1$ and $x_2, y_2$ to $(1, 1)$. This game differs from ordinary chess in that a knight can move in an L shape (“ma”) and can also move like an “elephant” (“xiang”) in Chinese chess, i.e., two squares diagonally.\n\nNote that you cannot move to any position where the $x$ or $y$ coordinate satisfies $\\le 0$. Any $(x, y)$ that satisfies this constraint is reachable.", "inputFormat": "The first line contains two integers $x_1, y_1$.\n\nThe second line contains two integers $x_2, y_2$.", "outputFormat": "The first line contains one integer, the number of steps for the black knight to reach $(1, 1)$.\n\nThe second line contains one integer, the number of steps for the white knight to reach $(1, 1)$.", "hint": "### Constraints\n\nFor $100\\%$ of the testdata, $1 \\le x_1, y_1, x_2, y_2 \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "好奇怪的游戏", "background": "《爱与愁的故事第三弹·shopping》娱乐章。\n\n调调口味来道水题。\n", "description": "爱与愁大神坐在公交车上无聊，于是玩起了手机。一款奇怪的游戏进入了爱与愁大神的眼帘：\\*\\*\\*（游戏名被打上了马赛克）。这个游戏类似象棋，但是只有黑白马各一匹，在点 $x_1,y_1$ 和 $x_2,y_2$ 上。它们得从点 $x_1,y_1$ 和 $x_2,y_2$ 走到 $(1,1)$。这个游戏与普通象棋不同的地方是：马可以走“日”，也可以像象走“田”。现在爱与愁大神想知道两匹马到 $(1,1)$ 的最少步数，你能帮他解决这个问题么？\n\n注意不能走到 $x$ 或 $y$ 坐标 $\\le 0$ 的位置。满足此限制的 $(x,y)$ 均可到达。", "inputFormat": "第一行两个整数 $x_1,y_1$。\n\n第二行两个整数 $x_2,y_2$。", "outputFormat": "第一行一个整数，表示黑马到 $(1,1)$ 的步数。\n\n第二行一个整数，表示白马到 $(1,1)$ 的步数。", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 数据，$1\\le x_1,y_1,x_2,y_2 \\le 20$。", "locale": "zh-CN"}}}
{"pid": "P1748", "type": "P", "difficulty": 3, "samples": [["30", "49"], ["1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "线性数据结构", "USACO"], "title": "H 数", "background": null, "description": "所谓 H 数，是指只含有 $2,3,5,7$ 这些质因数的数，如 $630$ 是 H 数，而 $22$ 不是。\n\n（特别地，$1$ 是最小的 H 数）\n\n现在要求输出第 $n$ 小的 H 数。", "inputFormat": "一个正整数 $n\\ (1 \\le n \\le 10^4)$。", "outputFormat": "一个正整数表示答案。\n\n可以证明，答案不会超过 $2^{63}-1$。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "H Number", "background": "", "description": "An H number is a number that has no prime factors other than $2, 3, 5, 7$. For example, $630$ is an H number, whereas $22$ is not. In particular, $1$ is the smallest H number. Now, output the $n$-th smallest H number.", "inputFormat": "A positive integer $n\\ (1 \\le n \\le 10^4)$.", "outputFormat": "A single positive integer representing the answer. It can be proven that the answer will not exceed $2^{63}-1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "H 数", "background": null, "description": "所谓 H 数，是指只含有 $2,3,5,7$ 这些质因数的数，如 $630$ 是 H 数，而 $22$ 不是。\n\n（特别地，$1$ 是最小的 H 数）\n\n现在要求输出第 $n$ 小的 H 数。", "inputFormat": "一个正整数 $n\\ (1 \\le n \\le 10^4)$。", "outputFormat": "一个正整数表示答案。\n\n可以证明，答案不会超过 $2^{63}-1$。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P1749", "type": "P", "difficulty": 1, "samples": [["1\n1 1\n", "Yes\n"], ["1\n5 3\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "语言月赛"], "title": "[入门赛 #19] 分饼干 II", "background": "", "description": "老师有 $N$ 块饼干，要分给 $k$ 名小朋友。\n\n每名小朋友至少拿到一块饼干，老师想让每名小朋友拿到的饼干数量都不一样多，请问老师能否实现这个目标。", "inputFormat": "**本题单个测试点内有多组测试数据。**\n\n输入共 $T + 1$ 行。\n\n输入第一行为一个整数 $T$，代表测试数据组数。  \n接下来 $T$ 行，每行两个整数，分别为 $N,k$。", "outputFormat": "输出共 $T$ 行，依次对应 $T$ 组测试数据。如果该组测试数据\n\n- 可以实现，输出 `Yes`。\n- 无法实现，输出 `No`。", "hint": "### 数据规模与约定\n\n- 对于 $50\\%$ 的测试数据 $1 \\le k \\le 1000$，$1 \\le N \\le 10^6$。\n- 对于 $100\\%$ 的测试数据，$1 \\le k,N \\le 10^9$。\n- $1 \\le T \\le 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #19] 分饼干 II", "background": "", "description": "老师有 $N$ 块饼干，要分给 $k$ 名小朋友。\n\n每名小朋友至少拿到一块饼干，老师想让每名小朋友拿到的饼干数量都不一样多，请问老师能否实现这个目标。", "inputFormat": "**本题单个测试点内有多组测试数据。**\n\n输入共 $T + 1$ 行。\n\n输入第一行为一个整数 $T$，代表测试数据组数。  \n接下来 $T$ 行，每行两个整数，分别为 $N,k$。", "outputFormat": "输出共 $T$ 行，依次对应 $T$ 组测试数据。如果该组测试数据\n\n- 可以实现，输出 `Yes`。\n- 无法实现，输出 `No`。", "hint": "### 数据规模与约定\n\n- 对于 $50\\%$ 的测试数据 $1 \\le k \\le 1000$，$1 \\le N \\le 10^6$。\n- 对于 $100\\%$ 的测试数据，$1 \\le k,N \\le 10^9$。\n- $1 \\le T \\le 10^5$", "locale": "zh-CN"}}}
{"pid": "P1750", "type": "P", "difficulty": 3, "samples": [["6 3\n5 2 3 8 7 4", "2 3 5 4 7 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心"], "title": "出栈序列", "background": "", "description": "给定一个由 $n$ 个元素构成的序列，你需要将其中的元素按顺序压入一个大小为 $c$ 的栈并弹出。元素按它们的出栈顺序进行排列，会得到一个新的序列。我们知道，这样的序列会有很多种，请输出所有新序列中第一个元素最小的序列（若第一个元素最小的序列有多个，则令第二个尽可能小；若仍有多个，则令第三个最小，以此类推）。\n", "inputFormat": "第一行，两个整数 $n, c$。\n\n第二行，$n$ 个数，为序列中 $n$ 个元素的值。\n", "outputFormat": "输出 $n$ 个数，为满足要求的序列。\n", "hint": "对于 $40 \\%$ 的数据，$n \\le 12$；  \n对于 $100 \\%$ 的数据，$1 \\le c \\le n \\le 10000$，元素大小均在 $[1, 2 \\times {10}^9]$ 内。\n", "locale": "zh-CN", "translations": {"en": {"title": "Stack Pop Sequence", "background": "", "description": "Given a sequence of $n$ elements, you need to push its elements in order into a stack of capacity $c$ and pop them. Arranging the elements according to their pop order yields a new sequence. There can be many such sequences; among all new sequences, output the one whose first element is the smallest (if there are multiple with the smallest first element, make the second as small as possible; if still multiple, make the third smallest, and so on).", "inputFormat": "The first line contains two integers $n, c$.\n\nThe second line contains $n$ numbers, the values of the $n$ elements in the sequence.", "outputFormat": "Output $n$ numbers, the sequence that meets the requirement.", "hint": "For $40 \\%$ of the testdata, $n \\le 12$.\nFor $100 \\%$ of the testdata, $1 \\le c \\le n \\le 10000$, and each element lies in $[1, 2 \\times {10}^9]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "出栈序列", "background": "", "description": "给定一个由 $n$ 个元素构成的序列，你需要将其中的元素按顺序压入一个大小为 $c$ 的栈并弹出。元素按它们的出栈顺序进行排列，会得到一个新的序列。我们知道，这样的序列会有很多种，请输出所有新序列中第一个元素最小的序列（若第一个元素最小的序列有多个，则令第二个尽可能小；若仍有多个，则令第三个最小，以此类推）。\n", "inputFormat": "第一行，两个整数 $n, c$。\n\n第二行，$n$ 个数，为序列中 $n$ 个元素的值。\n", "outputFormat": "输出 $n$ 个数，为满足要求的序列。\n", "hint": "对于 $40 \\%$ 的数据，$n \\le 12$；  \n对于 $100 \\%$ 的数据，$1 \\le c \\le n \\le 10000$，元素大小均在 $[1, 2 \\times {10}^9]$ 内。\n", "locale": "zh-CN"}}}
