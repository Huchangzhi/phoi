{"pid": "P13836", "type": "P", "difficulty": 3, "samples": [["5\n6\n4\n7\n0\n1", "3 6\n1 4\n2 5\n314652 314652\n-1 -1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "图论", "Special Judge", "O2优化"], "title": "微观戏剧（Constructive ver.）", "background": "> 有一个 $10^{100}$ 个结点的无向图，结点从 $1$ 到 $10^{100}$ 编号，每对结点 $u$ 与结点 $v$ 之间都有一条长度为 $\\operatorname{lcm}(u,v)$ 的边连接。$\\operatorname{lcm}(u,v)$ 是指 $u$ 和 $v$ 的最小公倍数，即最小的能被 $u$ 和 $v$ 同时整除的正整数。\n> \n> 有 $q$ 次询问，每次给定 $x,y$，问结点 $x$ 到结点 $y$ 的最短路径长度是多少。\n> :::align{right}\n> —— [P11275 微观戏剧](https://www.luogu.com.cn/problem/P11275)\n> :::\n\n---\n\n迷失在回忆中的少女，早已忘却了当时的喜怒哀乐。\n\n你能帮助泠珞，去尝试着还原当时一切的始与终吗？", "description": "设 $f(x_0,y_0)$ 为在题目背景中的问题中，$x=x_0,y=y_0$ 时的答案。\n\n有 $q$ 次询问，每次给定 $z$，请求出任意一组正整数 $x_0,y_0$ 满足 $f(x_0,y_0)=z$。你需要保证 $x_0,y_0\\le 10^{18}$。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行一个非负整数 $z$。", "outputFormat": "$q$ 行。如果无解，输出一行两个 $-1$，否则输出一行两个正整数表示你构造的 $x_0,y_0$。\n\n你需要保证 $x_0,y_0\\le 10^{18}$。可以证明，如果有解，则一定存在满足条件的解。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**本题采用捆绑测试。**\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n| 子任务编号 | 分值 | $q\\le $ | $z\\color{red}< $ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $5$ | $1$ | $5$ |\n| $2$ | $17$ | $30$ | $10^3$ |\n| $3$ | $31$ | $2\\times10^5$ | $10^{18}$ |\n| $4$ | $47$ | $2\\times10^5$ | $2\\times10^{18}$ |\n\n对于 $100\\%$ 的数据，$1\\le q\\le 2\\times10^5$，$0\\le z\\color{red}< \\color{black}2\\times 10^{18}$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "微观戏剧（Constructive ver.）", "background": "> 有一个 $10^{100}$ 个结点的无向图，结点从 $1$ 到 $10^{100}$ 编号，每对结点 $u$ 与结点 $v$ 之间都有一条长度为 $\\operatorname{lcm}(u,v)$ 的边连接。$\\operatorname{lcm}(u,v)$ 是指 $u$ 和 $v$ 的最小公倍数，即最小的能被 $u$ 和 $v$ 同时整除的正整数。\n> \n> 有 $q$ 次询问，每次给定 $x,y$，问结点 $x$ 到结点 $y$ 的最短路径长度是多少。\n> :::align{right}\n> —— [P11275 微观戏剧](https://www.luogu.com.cn/problem/P11275)\n> :::\n\n---\n\n迷失在回忆中的少女，早已忘却了当时的喜怒哀乐。\n\n你能帮助泠珞，去尝试着还原当时一切的始与终吗？", "description": "设 $f(x_0,y_0)$ 为在题目背景中的问题中，$x=x_0,y=y_0$ 时的答案。\n\n有 $q$ 次询问，每次给定 $z$，请求出任意一组正整数 $x_0,y_0$ 满足 $f(x_0,y_0)=z$。你需要保证 $x_0,y_0\\le 10^{18}$。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行一个非负整数 $z$。", "outputFormat": "$q$ 行。如果无解，输出一行两个 $-1$，否则输出一行两个正整数表示你构造的 $x_0,y_0$。\n\n你需要保证 $x_0,y_0\\le 10^{18}$。可以证明，如果有解，则一定存在满足条件的解。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**本题采用捆绑测试。**\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n| 子任务编号 | 分值 | $q\\le $ | $z\\color{red}< $ |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $5$ | $1$ | $5$ |\n| $2$ | $17$ | $30$ | $10^3$ |\n| $3$ | $31$ | $2\\times10^5$ | $10^{18}$ |\n| $4$ | $47$ | $2\\times10^5$ | $2\\times10^{18}$ |\n\n对于 $100\\%$ 的数据，$1\\le q\\le 2\\times10^5$，$0\\le z\\color{red}< \\color{black}2\\times 10^{18}$。\n", "locale": "zh-CN"}}}
{"pid": "P13837", "type": "P", "difficulty": 5, "samples": [["4\n1\n2\n3\n20120712", "7 9 2\n9 6 8\n5 9 2\n10429 8888 9068"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "GCD 与 LCM 问题 - 副本", "background": "[P11036 GCD 与 LCM 问题](https://www.luogu.com.cn/problem/P11036)\n\n**本题与 P11036 的差别仅在数据范围和对 $b,c,d$ 的范围限制。**\n\n---\n\n:::align{center}\n\n「既然你说你不了解她，为什么又可以断言她一定是因为……」\n\n是呀，自己对零羽还了解的确实不够多……泠珞这样想着。\n\n在残缺的记忆当中，她只能想起，她和零羽的最大公约数，就是「音乐」。\n\n还缺了什么呢？泠珞不知道。她只知道，那所缺失的，和「音乐」加起来，就是她的一切的总和。\n\n这样的自己，比起她，是多么渺小啊……\n\n:::", "description": "给定一个正整数 $a$，请你找出三个正整数 $b,c,d$ 使得 $a+b+c+d=\\gcd(a,b)+\\operatorname{lcm}(c,d)$。一个测试点内有多组数据。\n\n由于出题人不想把自己 QQ 号写题目里，你需要保证 $b,c,d\\le \\color{red}49\\, 999$。\n\n**如有多种可能的答案，输出任意一个均可。**", "inputFormat": "**第一行一个正整数 $t$ 表示数据组数。**\n\n接下来 $t$ 行每行一个正整数 $a$。", "outputFormat": "输出 $t$ 行，每行三个正整数 $b,c,d$。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**【样例解释】**\n\n样例的输出为：\n\n$1+7+9+2=19=\\gcd(1,7)+\\operatorname{lcm}(9,2)$  \n$2+9+6+8=25=\\gcd(2,9)+\\operatorname{lcm}(6,8)$  \n$3+5+9+2=19=\\gcd(3,5)+\\operatorname{lcm}(9,2)$  \n$20\\,120\\,712+10\\,429+8\\,888+9\\,068=20\\,149\\,097=\\gcd(20\\,120\\,712,10\\,429)+\\operatorname{lcm}(8\\,888,9\\,068)$\n\n容易验证均满足要求。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n|Subtask 编号|分数|$t\\le$|$a\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$3$|$32\\ 767$|$32\\ 767$||\n|$2$|$5$|$59\\ 999$|$59\\ 999$||\n|$3$|$19$|$10^4$|$10^8$|$\\textbf{AB}$|\n|$4$|$31$|$3\\times10^5$|$10^9$|$\\textbf{A}$|\n|$5$|$29$|$3\\times10^5$|$10^9-1$|$\\textbf{B}$|\n|$6$|$13$|$3\\times10^5$|$10^9$||\n\n特殊性质 $\\textbf{A}$：所有 $a$ 在数据范围内独立均匀随机生成。\n\n特殊性质 $\\textbf{B}$：$a$ 是奇数。\n\n对于 $100\\%$ 的数据，$1\\le t\\le3\\times10^5$，$1\\le a\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "GCD 与 LCM 问题 - 副本", "background": "[P11036 GCD 与 LCM 问题](https://www.luogu.com.cn/problem/P11036)\n\n**本题与 P11036 的差别仅在数据范围和对 $b,c,d$ 的范围限制。**\n\n---\n\n:::align{center}\n\n「既然你说你不了解她，为什么又可以断言她一定是因为……」\n\n是呀，自己对零羽还了解的确实不够多……泠珞这样想着。\n\n在残缺的记忆当中，她只能想起，她和零羽的最大公约数，就是「音乐」。\n\n还缺了什么呢？泠珞不知道。她只知道，那所缺失的，和「音乐」加起来，就是她的一切的总和。\n\n这样的自己，比起她，是多么渺小啊……\n\n:::", "description": "给定一个正整数 $a$，请你找出三个正整数 $b,c,d$ 使得 $a+b+c+d=\\gcd(a,b)+\\operatorname{lcm}(c,d)$。一个测试点内有多组数据。\n\n由于出题人不想把自己 QQ 号写题目里，你需要保证 $b,c,d\\le \\color{red}49\\, 999$。\n\n**如有多种可能的答案，输出任意一个均可。**", "inputFormat": "**第一行一个正整数 $t$ 表示数据组数。**\n\n接下来 $t$ 行每行一个正整数 $a$。", "outputFormat": "输出 $t$ 行，每行三个正整数 $b,c,d$。\n\n**如有多种可能的答案，输出任意一个均可。**", "hint": "**【样例解释】**\n\n样例的输出为：\n\n$1+7+9+2=19=\\gcd(1,7)+\\operatorname{lcm}(9,2)$  \n$2+9+6+8=25=\\gcd(2,9)+\\operatorname{lcm}(6,8)$  \n$3+5+9+2=19=\\gcd(3,5)+\\operatorname{lcm}(9,2)$  \n$20\\,120\\,712+10\\,429+8\\,888+9\\,068=20\\,149\\,097=\\gcd(20\\,120\\,712,10\\,429)+\\operatorname{lcm}(8\\,888,9\\,068)$\n\n容易验证均满足要求。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n|Subtask 编号|分数|$t\\le$|$a\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$3$|$32\\ 767$|$32\\ 767$||\n|$2$|$5$|$59\\ 999$|$59\\ 999$||\n|$3$|$19$|$10^4$|$10^8$|$\\textbf{AB}$|\n|$4$|$31$|$3\\times10^5$|$10^9$|$\\textbf{A}$|\n|$5$|$29$|$3\\times10^5$|$10^9-1$|$\\textbf{B}$|\n|$6$|$13$|$3\\times10^5$|$10^9$||\n\n特殊性质 $\\textbf{A}$：所有 $a$ 在数据范围内独立均匀随机生成。\n\n特殊性质 $\\textbf{B}$：$a$ 是奇数。\n\n对于 $100\\%$ 的数据，$1\\le t\\le3\\times10^5$，$1\\le a\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P13838", "type": "P", "difficulty": 0, "samples": [["3 1", "3 1 2"], ["4 3", "2 2 5 1"], ["6 16", "3 6 1 4 2 5"], ["8 38", "1 6 7 7 7 2 1 6"], ["11 110", "3 1 4 1 5 9 2 6 5 3 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "世界沉睡童话Nirvana", "background": "$$\n\\begin{array}{cr}\n{\\overset{\\tiny\\text{Time Limit Exceeded}}{\\text{永眠}}}\\text{中有童话里形容的一切}\\\\\n\\text{有你陪在我的身边}\\\\\n\\text{心甘情愿被纺锤扎破指尖}\\\\\n\\text{等}{\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{我深爱的}}}\\text{回来}}\\\\\n&\\text{——《世界沉睡童话Nirvana》}\n\\end{array}\n$$\n\n\n![](bilibili:BV1qK1BYpEVR)\n\n---\n\n:::align{center}\n\n在不断变化着的世界中，找出彼此的所属。\n\n压缩成一个数的记忆，泠珞又能否还原呢？\n\n:::", "description": "给定正整数 $n$ 和非负整数 $c$，请构造一个正整数序列 $a_1,a_2,\\cdots,a_n$，满足恰有 $c$ 组正整数对 $(i,j,k)$  $(1\\le i<j<k\\le n)$，满足 $\\max(a_i,a_j,a_k)$ 是 $\\min(a_i,a_j,a_k)$ 的倍数。\n\n输入保证有解。\n\n为了获得满分，你需要保证 $a_i\\le 2n-3$。", "inputFormat": "第一行两个非负整数 $n,c$。输入保证有解。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示你构造的 $a_i$。\n\n为了获得满分，你需要保证 $a_i\\le 2n-3$。\n\n输出任意一组可行解均可。", "hint": "**【样例 #1 解释】**\n\n$i=1,j=2,k=3$ 时，$\\max(a_i,a_j,a_k)=3,\\min(a_i,a_j,a_k)=1$，符合条件。显然只有这一组满足 $1\\le i<j<k\\le n$。\n\n**【样例 #2 解释】**\n\n仅有 $i=1,j=2,k=3$ 时不满足条件。\n\n**【数据范围】**\n\n**本题采用捆绑测试和 Subtask 依赖。**\n\n对于每个子任务，如果你保证了 $a_i\\le 4n$，你将获得 $p_1$ 的分数。如果你保证了 $a_i\\le 3n$，你将获得 $p_2$ 的分数。如果你保证了 $a_i\\le 2n-3$，你将获得 $p_3$ 的分数，即满分。\n\n对于每个子任务，你只有保证了**所有**属于它的测试点，和所有它依赖的子任务中的测试点都保证了以上的条件，你才能获得对应的分数。\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n| 子任务编号 | $p_1$ | $p_2$ | $p_3$ | $n\\le $ | $c\\le $ | 依赖子任务 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $5$ | $5$ | $\\dfrac{n(n-1)(n-2)}{6}$ | / | \n| $2$ | $3$ | $5$ | $11$ | $2.5\\times10^5$ | $n-2$ | / |\n| $3$ | $19$ | $31$ | $43$ | $2.5\\times10^5$ | $\\max(1,\\dfrac{n(n-3)}{2})$ | $2$ |\n| $4$ | $17$ | $29$ | $41$ | $2.5\\times10^5$ | $\\dfrac{n(n-1)(n-2)}{6}$ | $1,2,3$ | \n\n对于 $100\\%$ 的数据，$3\\le n\\le 2.5\\times10^5$，$0\\le c\\le \\dfrac{n(n-1)(n-2)}{6}$，本题的数据保证有解。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "世界沉睡童话Nirvana", "background": "$$\n\\begin{array}{cr}\n{\\overset{\\tiny\\text{Time Limit Exceeded}}{\\text{永眠}}}\\text{中有童话里形容的一切}\\\\\n\\text{有你陪在我的身边}\\\\\n\\text{心甘情愿被纺锤扎破指尖}\\\\\n\\text{等}{\\overset{\\text{return }{\\color{#EE0000}0}\\text{;}}{{\\color{#EE0000}\\text{我深爱的}}}\\text{回来}}\\\\\n&\\text{——《世界沉睡童话Nirvana》}\n\\end{array}\n$$\n\n\n![](bilibili:BV1qK1BYpEVR)\n\n---\n\n:::align{center}\n\n在不断变化着的世界中，找出彼此的所属。\n\n压缩成一个数的记忆，泠珞又能否还原呢？\n\n:::", "description": "给定正整数 $n$ 和非负整数 $c$，请构造一个正整数序列 $a_1,a_2,\\cdots,a_n$，满足恰有 $c$ 组正整数对 $(i,j,k)$  $(1\\le i<j<k\\le n)$，满足 $\\max(a_i,a_j,a_k)$ 是 $\\min(a_i,a_j,a_k)$ 的倍数。\n\n输入保证有解。\n\n为了获得满分，你需要保证 $a_i\\le 2n-3$。", "inputFormat": "第一行两个非负整数 $n,c$。输入保证有解。", "outputFormat": "一行 $n$ 个正整数，第 $i$ 个表示你构造的 $a_i$。\n\n为了获得满分，你需要保证 $a_i\\le 2n-3$。\n\n输出任意一组可行解均可。", "hint": "**【样例 #1 解释】**\n\n$i=1,j=2,k=3$ 时，$\\max(a_i,a_j,a_k)=3,\\min(a_i,a_j,a_k)=1$，符合条件。显然只有这一组满足 $1\\le i<j<k\\le n$。\n\n**【样例 #2 解释】**\n\n仅有 $i=1,j=2,k=3$ 时不满足条件。\n\n**【数据范围】**\n\n**本题采用捆绑测试和 Subtask 依赖。**\n\n对于每个子任务，如果你保证了 $a_i\\le 4n$，你将获得 $p_1$ 的分数。如果你保证了 $a_i\\le 3n$，你将获得 $p_2$ 的分数。如果你保证了 $a_i\\le 2n-3$，你将获得 $p_3$ 的分数，即满分。\n\n对于每个子任务，你只有保证了**所有**属于它的测试点，和所有它依赖的子任务中的测试点都保证了以上的条件，你才能获得对应的分数。\n\n输出任意一组符合要求的可行解都可以获得对应的分数。\n\n| 子任务编号 | $p_1$ | $p_2$ | $p_3$ | $n\\le $ | $c\\le $ | 依赖子任务 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $5$ | $5$ | $\\dfrac{n(n-1)(n-2)}{6}$ | / | \n| $2$ | $3$ | $5$ | $11$ | $2.5\\times10^5$ | $n-2$ | / |\n| $3$ | $19$ | $31$ | $43$ | $2.5\\times10^5$ | $\\max(1,\\dfrac{n(n-3)}{2})$ | $2$ |\n| $4$ | $17$ | $29$ | $41$ | $2.5\\times10^5$ | $\\dfrac{n(n-1)(n-2)}{6}$ | $1,2,3$ | \n\n对于 $100\\%$ 的数据，$3\\le n\\le 2.5\\times10^5$，$0\\le c\\le \\dfrac{n(n-1)(n-2)}{6}$，本题的数据保证有解。\n", "locale": "zh-CN"}}}
{"pid": "P13839", "type": "P", "difficulty": 0, "samples": [["4\n4\n1 1\n5 8\n3 12\n69 15", "1\n-1\n361425\n20120712"], ["3\n1\n0 0\n1 1\n2 1", "9\n1\n-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "talent", "background": "[P9500 「RiOI-2」tnelat](https://www.luogu.com.cn/problem/P9500)\n\n小 $\\varepsilon$ 是一名 $3^{32}$ 年级的小学生。她正在学习如何阅读。", "description": "对于一个长度为 $n$ 的**由数字组成的**字符串 $s=s_1s_2s_3\\cdots s_n$，定义它的权值为 $f(s)=\\sum\\limits_{i=1}^n 10^{n-i}s_i$。（也就是它代表的十进制数）定义它的反串为 $\\overline s=s_ns_{n-1}s_{n-2}\\cdots s_1$。例如，$s=\\texttt{0321}$ 的权值为 $f(s)=321$，反串为 $\\overline s=\\texttt{1230}$。  \n\n给定正整数 $k$，对于若干组给定的 $a,b$，试构造一个非空数字串 $s$，使得 $|s|\\le 444$，且 $f(s)\\equiv a\\pmod {3^k}$ 且 $f(\\overline s)\\equiv b\\pmod {3^k}$。你还要保证 $s_1\\neq \\texttt0$ 且 $s_n\\neq \\texttt 0$。\n\n如果无解，仅输出整数 $-1$ 即可。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n第二行一个正整数 $k$，意义如题目所述。\n\n接下来 $T$ 行，每行两个以空格隔开的自然数 $a, b$ 描述一组数据。", "outputFormat": "输出 $T$ 行，每行一个字符串表示你构造的 $s$。如果无解，仅输出整数 $-1$ 即可。\n\n**本题开启 Special Judge，只要你的输出符合要求即可得到该测试点的分数。**", "hint": "**【样例解释】**\n\n对于第一组样例，$3^k=3^4=81$，可以验证 $1\\equiv 1,1\\equiv 1,361\\,425\\equiv 3,524\\,163\\equiv 12,20\\,120\\,712\\equiv 69,21\\,702\\,102\\equiv 15\\pmod {81}$，而可以证明不存在非空数字串 $s$ 满足 $s_1\\neq \\texttt0$，$s_n\\neq \\texttt 0$，$f(s)\\equiv 5\\pmod {81}$ 且 $f(\\overline s)\\equiv 8\\pmod {81}$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n| 子任务编号 | 分值 | 特殊性质 | \n| :--------------: | :--:| :------: |\n| $1$ | $2$ | $k\\le 3$ |\n| $2$ | $7$ | $k\\le 7$ |\n| $3$ | $5$ | $k\\le 12$ |\n| $4$ | $13$ | $k\\le 18$ |\n| $5$ | $19$ | $k\\le 25$ |\n| $6$ | $11$ | $T\\le 3$ | \n| $7$ | $17$ | $a=0$ |\n| $8$ | $23$ | 所有 $a,b$ 在范围内独立均匀随机生成 |\n| $9$ | $3$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10^5$，$1\\le k\\le 32$，$0\\le a,b<3^k$。\n\n**【提示】**\n\n本题 IO 量较大。\n\n对于 C++ 选手，经过测试，如果每组数据都将字符串完整输出（而不是一个一个输出）在 C++14 (GCC 9) **O2** 下，使用开了 `std::ios_base::sync_with_stdio(false);` 的 `std::cout` 用时不会超过 100ms。如果您想要逐个输出字符，或者更好地优化 IO，可以使用如下的快读模板：\n\n```\nnamespace IO{\n\tconst int N=1<<22;\n\tchar buf[N],*p1,*p2;\n\tchar wbuf[N],*pw;\n\tstruct qqq{qqq(){p1=buf;p2=buf;pw=wbuf;}~qqq(){fwrite(wbuf,1,pw-wbuf,stdout);}}q;\n\tinline char gc(){\n\t\tif (p1==p2) p2=(p1=buf)+fread(buf,1,N,stdin);\n\t\treturn (p1==p2)?EOF:(*p1++);\n\t}\n\tlong long read(){\n\t\tchar c=gc();\n\t\tlong long x=0;\n\t\twhile(c<'0'||c>'9') c=gc();\n\t\twhile(c>='0'&&c<='9'){\n\t\t\tx=x*10+(c^'0');\n\t\t\tc=gc();\n\t\t}\n\t\treturn x;\n\t}\n\tvoid push(const char& c){\n\t\tif (pw-wbuf==N) fwrite(pw=wbuf,1,N,stdout);\n\t\t*pw++=c;\n\t}\n\tvoid write(const std::string&s)\n\t{\n\t\tfor(char c:s) push(c);\n\t}\n}\n```\n\n在引用了 `<string>` 头文件的情况下，使用 `IO::read()` 可以读入一个 `long long` 型整数，`IO::push(ch)` 可以输出一个字符 `ch`，`IO::write(str)` 可以输出一个字符串 `str`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "talent", "background": "[P9500 「RiOI-2」tnelat](https://www.luogu.com.cn/problem/P9500)\n\n小 $\\varepsilon$ 是一名 $3^{32}$ 年级的小学生。她正在学习如何阅读。", "description": "对于一个长度为 $n$ 的**由数字组成的**字符串 $s=s_1s_2s_3\\cdots s_n$，定义它的权值为 $f(s)=\\sum\\limits_{i=1}^n 10^{n-i}s_i$。（也就是它代表的十进制数）定义它的反串为 $\\overline s=s_ns_{n-1}s_{n-2}\\cdots s_1$。例如，$s=\\texttt{0321}$ 的权值为 $f(s)=321$，反串为 $\\overline s=\\texttt{1230}$。  \n\n给定正整数 $k$，对于若干组给定的 $a,b$，试构造一个非空数字串 $s$，使得 $|s|\\le 444$，且 $f(s)\\equiv a\\pmod {3^k}$ 且 $f(\\overline s)\\equiv b\\pmod {3^k}$。你还要保证 $s_1\\neq \\texttt0$ 且 $s_n\\neq \\texttt 0$。\n\n如果无解，仅输出整数 $-1$ 即可。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n第二行一个正整数 $k$，意义如题目所述。\n\n接下来 $T$ 行，每行两个以空格隔开的自然数 $a, b$ 描述一组数据。", "outputFormat": "输出 $T$ 行，每行一个字符串表示你构造的 $s$。如果无解，仅输出整数 $-1$ 即可。\n\n**本题开启 Special Judge，只要你的输出符合要求即可得到该测试点的分数。**", "hint": "**【样例解释】**\n\n对于第一组样例，$3^k=3^4=81$，可以验证 $1\\equiv 1,1\\equiv 1,361\\,425\\equiv 3,524\\,163\\equiv 12,20\\,120\\,712\\equiv 69,21\\,702\\,102\\equiv 15\\pmod {81}$，而可以证明不存在非空数字串 $s$ 满足 $s_1\\neq \\texttt0$，$s_n\\neq \\texttt 0$，$f(s)\\equiv 5\\pmod {81}$ 且 $f(\\overline s)\\equiv 8\\pmod {81}$。\n\n**【数据范围】**\n\n**本题开启捆绑测试。**\n\n| 子任务编号 | 分值 | 特殊性质 | \n| :--------------: | :--:| :------: |\n| $1$ | $2$ | $k\\le 3$ |\n| $2$ | $7$ | $k\\le 7$ |\n| $3$ | $5$ | $k\\le 12$ |\n| $4$ | $13$ | $k\\le 18$ |\n| $5$ | $19$ | $k\\le 25$ |\n| $6$ | $11$ | $T\\le 3$ | \n| $7$ | $17$ | $a=0$ |\n| $8$ | $23$ | 所有 $a,b$ 在范围内独立均匀随机生成 |\n| $9$ | $3$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10^5$，$1\\le k\\le 32$，$0\\le a,b<3^k$。\n\n**【提示】**\n\n本题 IO 量较大。\n\n对于 C++ 选手，经过测试，如果每组数据都将字符串完整输出（而不是一个一个输出）在 C++14 (GCC 9) **O2** 下，使用开了 `std::ios_base::sync_with_stdio(false);` 的 `std::cout` 用时不会超过 100ms。如果您想要逐个输出字符，或者更好地优化 IO，可以使用如下的快读模板：\n\n```\nnamespace IO{\n\tconst int N=1<<22;\n\tchar buf[N],*p1,*p2;\n\tchar wbuf[N],*pw;\n\tstruct qqq{qqq(){p1=buf;p2=buf;pw=wbuf;}~qqq(){fwrite(wbuf,1,pw-wbuf,stdout);}}q;\n\tinline char gc(){\n\t\tif (p1==p2) p2=(p1=buf)+fread(buf,1,N,stdin);\n\t\treturn (p1==p2)?EOF:(*p1++);\n\t}\n\tlong long read(){\n\t\tchar c=gc();\n\t\tlong long x=0;\n\t\twhile(c<'0'||c>'9') c=gc();\n\t\twhile(c>='0'&&c<='9'){\n\t\t\tx=x*10+(c^'0');\n\t\t\tc=gc();\n\t\t}\n\t\treturn x;\n\t}\n\tvoid push(const char& c){\n\t\tif (pw-wbuf==N) fwrite(pw=wbuf,1,N,stdout);\n\t\t*pw++=c;\n\t}\n\tvoid write(const std::string&s)\n\t{\n\t\tfor(char c:s) push(c);\n\t}\n}\n```\n\n在引用了 `<string>` 头文件的情况下，使用 `IO::read()` 可以读入一个 `long long` 型整数，`IO::push(ch)` 可以输出一个字符 `ch`，`IO::write(str)` 可以输出一个字符串 `str`。", "locale": "zh-CN"}}}
{"pid": "P13840", "type": "P", "difficulty": 6, "samples": [["0 2\n8\n1 1 0\n1 2 0\n2 3 1\n1 3 0\n1 1 0\n1 4 0\n1 4 1\n2 7 1\n8\n1 1 0\n2 2 2\n2 2 2\n1 2 0\n2 3 1\n1 3 0\n1 4 0\n2 4 3", "2\n6\n1\n1\n2\n3"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "平衡树", "Ad-hoc"], "title": "杏酥桐", "background": "", "description": "Yuki 有一棵仅包含根结点 $1$ 的有根树 $T$ 和一个变量 $n$，初始时 $n=1$。\n\n给定 $q$ 次操作。操作有以下 $2$ 种：\n\n- $1\\ u_i\\ x_i$：在 $u_i$ 的第 $x_i$ 个儿子后插入结点 $n+1$；特殊地，若 $x_i=0$，则表示将结点 $n+1$ 作为 $u_i$ 的第 $1$ 个儿子插入。$u_i$ 的其余儿子的相对顺序不变。设 $u_i$ 的儿子个数为 $s_{u_i}$，则保证 $1 \\le u_i \\le n$ 且 $0 \\le x_i \\le s_{u_i}$。在执行此操作后 $n$ 的值变为 $n+1$。\n\n- $2\\ v_i\\ k_i$：查询对树 $T$ 进行 $k_i$ 次左儿子右兄弟变换后结点 $v_i$ 的父亲结点。其中，左儿子右兄弟变换指：对于树 $T$ 上的结点 $u$，将结点 $u$ 在原树中的第一个儿子作为结点 $u$ 在新树上的左儿子，将结点 $u$ 在原树中的下一个兄弟作为结点 $u$ 在新树上的右儿子。保证 $2 \\le v_i \\le n$ 且 $1 \\le k_i \\le 10^9$。**注意，此操作不会真的对树 $\\boldsymbol T$ 进行 $\\boldsymbol{k_i}$ 次左儿子右兄弟变换，也就是说在执行此操作后树形态不变。**\n\n你需要对于每个 $2$ 操作求出答案。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个正整数 $c,T$，分别表示测试点编号和测试数据组数。样例满足 $c=0$。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $q$。\n- 接下来 $q$ 行，第 $i$ 行三个整数 $o_i,u_i,x_i$ 或 $o_i,v_i,k_i$，格式同题目描述。", "outputFormat": "对于每组测试数据中的每个 $2$ 操作，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n该样例包含两组测试数据，对于第一组测试数据：\n\n- 第 $1$ 次操作插入结点 $2$ 作为结点 $1$ 的儿子结点。\n\n- 第 $2$ 次操作插入结点 $3$ 作为结点 $2$ 的儿子结点。\n\n- 此时树包含 $2$ 条边 $(1, 2), (2, 3)$，经过 $1$ 次左儿子右兄弟变换后，树仍为 $(1, 2), (2, 3)$，$3$ 的父亲结点为 $2$。\n\n- 接下来进行 $4$ 次结点插入操作，操作结束后的树形如：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/52ogqvhl.png)\n  \n- 经过 $1$ 次左儿子有兄弟变换后，树形如：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/ck7oyglw.png)\n\n  此时结点 $7$ 的父亲结点为 $6$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 3$；\n- $1 \\le q \\le 10^6$；\n- $o_i \\in \\{1,2\\}$，$1 \\le u_i \\le n$，$0 \\le x_i \\le s_{u_i}$，$2 \\le v_i \\le n$，$1 \\le k_i \\le 10^9$。\n\n| 测试点编号 |     $q \\le$     |   $k_i$   | 特殊性质 |\n| :--------: | :-------------: | :-------: | :------: |\n|  $1\\sim3$  |     $10^2$      | $\\le10^2$ |    无    |\n|   $4,5$    | $3 \\times 10^3$ |   $=1$    |    无    |\n|   $6,7$    | $3 \\times 10^3$ |  $=10^9$  |    无    |\n| $8\\sim10$  | $3 \\times 10^3$ | $\\le10^9$ |    无    |\n|  $11,12$   | $5 \\times 10^5$ |   $=1$    |    无    |\n|  $13,14$   | $5 \\times 10^5$ |  $=10^9$  |    无    |\n|    $15$    | $5 \\times 10^5$ | $\\le10^9$ |    A     |\n|  $16,17$   | $5 \\times 10^5$ | $\\le10^9$ |    B     |\n|  $18,19$   | $5 \\times 10^5$ | $\\le10^9$ |    C     |\n| $20\\sim22$ | $5 \\times 10^5$ | $\\le10^9$ |    无    |\n| $23\\sim25$ |     $10^6$      | $\\le10^9$ |    无    |\n\n- 特殊性质 A：对于所有 $1$ 操作，均有 $u_i=1$。\n- 特殊性质 B：对于所有满足 $1\\le i \\lt j \\le q$ 的正整数 $i,j$，均有 $op_i \\le op_j$。\n- 特殊性质 C：对于所有 $1$ 操作，均有 $x_i=cnt_{u_i}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "杏酥桐", "background": "", "description": "Yuki 有一棵仅包含根结点 $1$ 的有根树 $T$ 和一个变量 $n$，初始时 $n=1$。\n\n给定 $q$ 次操作。操作有以下 $2$ 种：\n\n- $1\\ u_i\\ x_i$：在 $u_i$ 的第 $x_i$ 个儿子后插入结点 $n+1$；特殊地，若 $x_i=0$，则表示将结点 $n+1$ 作为 $u_i$ 的第 $1$ 个儿子插入。$u_i$ 的其余儿子的相对顺序不变。设 $u_i$ 的儿子个数为 $s_{u_i}$，则保证 $1 \\le u_i \\le n$ 且 $0 \\le x_i \\le s_{u_i}$。在执行此操作后 $n$ 的值变为 $n+1$。\n\n- $2\\ v_i\\ k_i$：查询对树 $T$ 进行 $k_i$ 次左儿子右兄弟变换后结点 $v_i$ 的父亲结点。其中，左儿子右兄弟变换指：对于树 $T$ 上的结点 $u$，将结点 $u$ 在原树中的第一个儿子作为结点 $u$ 在新树上的左儿子，将结点 $u$ 在原树中的下一个兄弟作为结点 $u$ 在新树上的右儿子。保证 $2 \\le v_i \\le n$ 且 $1 \\le k_i \\le 10^9$。**注意，此操作不会真的对树 $\\boldsymbol T$ 进行 $\\boldsymbol{k_i}$ 次左儿子右兄弟变换，也就是说在执行此操作后树形态不变。**\n\n你需要对于每个 $2$ 操作求出答案。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个正整数 $c,T$，分别表示测试点编号和测试数据组数。样例满足 $c=0$。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行一个正整数 $q$。\n- 接下来 $q$ 行，第 $i$ 行三个整数 $o_i,u_i,x_i$ 或 $o_i,v_i,k_i$，格式同题目描述。", "outputFormat": "对于每组测试数据中的每个 $2$ 操作，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n该样例包含两组测试数据，对于第一组测试数据：\n\n- 第 $1$ 次操作插入结点 $2$ 作为结点 $1$ 的儿子结点。\n\n- 第 $2$ 次操作插入结点 $3$ 作为结点 $2$ 的儿子结点。\n\n- 此时树包含 $2$ 条边 $(1, 2), (2, 3)$，经过 $1$ 次左儿子右兄弟变换后，树仍为 $(1, 2), (2, 3)$，$3$ 的父亲结点为 $2$。\n\n- 接下来进行 $4$ 次结点插入操作，操作结束后的树形如：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/52ogqvhl.png)\n  \n- 经过 $1$ 次左儿子有兄弟变换后，树形如：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/ck7oyglw.png)\n\n  此时结点 $7$ 的父亲结点为 $6$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 3$；\n- $1 \\le q \\le 10^6$；\n- $o_i \\in \\{1,2\\}$，$1 \\le u_i \\le n$，$0 \\le x_i \\le s_{u_i}$，$2 \\le v_i \\le n$，$1 \\le k_i \\le 10^9$。\n\n| 测试点编号 |     $q \\le$     |   $k_i$   | 特殊性质 |\n| :--------: | :-------------: | :-------: | :------: |\n|  $1\\sim3$  |     $10^2$      | $\\le10^2$ |    无    |\n|   $4,5$    | $3 \\times 10^3$ |   $=1$    |    无    |\n|   $6,7$    | $3 \\times 10^3$ |  $=10^9$  |    无    |\n| $8\\sim10$  | $3 \\times 10^3$ | $\\le10^9$ |    无    |\n|  $11,12$   | $5 \\times 10^5$ |   $=1$    |    无    |\n|  $13,14$   | $5 \\times 10^5$ |  $=10^9$  |    无    |\n|    $15$    | $5 \\times 10^5$ | $\\le10^9$ |    A     |\n|  $16,17$   | $5 \\times 10^5$ | $\\le10^9$ |    B     |\n|  $18,19$   | $5 \\times 10^5$ | $\\le10^9$ |    C     |\n| $20\\sim22$ | $5 \\times 10^5$ | $\\le10^9$ |    无    |\n| $23\\sim25$ |     $10^6$      | $\\le10^9$ |    无    |\n\n- 特殊性质 A：对于所有 $1$ 操作，均有 $u_i=1$。\n- 特殊性质 B：对于所有满足 $1\\le i \\lt j \\le q$ 的正整数 $i,j$，均有 $op_i \\le op_j$。\n- 特殊性质 C：对于所有 $1$ 操作，均有 $x_i=cnt_{u_i}$。", "locale": "zh-CN"}}}
{"pid": "P13841", "type": "P", "difficulty": 6, "samples": [["0 1\n9 3\nhihehishe\n1 7\n1 12\n2 10", "e\n0\nr"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "扫描线"], "title": "芳权多", "background": "", "description": "Yuki 有一个长度为 $n$ 且只包含小写字母的字符串 $s$，其下标从 $1$ 开始。\n\n定义一次修改为对 $s$ **同时**进行下面的两种操作：\n\n- 将 $s$ 中所有为 $\\texttt{he}$ 的子串替换为 $\\texttt{she}$；\n- 将 $s$ 中所有为 $\\texttt{his}$ 的子串替换为 $\\texttt{her}$。\n\n例如，对 $\\texttt{hihehishe}$ 进行一次操作后，该字符串会变为 $\\texttt{hishehershe}$。\n\n现有 $q$ 次询问，第 $i$ 次询问给出两个参数 $k_i,x_i$，你需要求出对 $s$ 进行 $k_i$ 次修改后 $s$ 的第 $x_i$ 个字符，或报告不存在第 $x_i$ 个字符。询问之间互相独立。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c,T$，分别表示测试点编号和测试数据组数。样例满足 $c=0$。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行两个正整数 $n,q$。\n- 第二行一个长度为 $n$ 的字符串 $s$。\n- 接下来 $q$ 行，第 $i$ 行两个正整数 $k_i,x_i$。", "outputFormat": "对于每组测试数据，输出 $q$ 行，第 $i$ 行包含一个字符：\n\n- 若对 $s$ 进行 $k_i$ 次修改后 $s$ 中存在第 $x_i$ 个字符，则输出该字符；\n- 若对 $s$ 进行 $k_i$ 次修改后 $s$ 中不存在第 $x_i$ 个字符，则输出 $\\texttt{0}$。", "hint": "### 样例 1 解释\n\n在该组样例的唯一一组测试数据中，$s=\\texttt{hihehishe}$。\n\n对 $s$ 进行一次修改后，$s$ 会变为 $\\texttt{hishehershe}$，此时 $s$ 中的第 $7$ 个字符为 $\\texttt{e}$ 且不存在第 $12$ 个字符。\n\n对 $s$ 进行两次修改后，$s$ 会变为 $\\texttt{hersheshersshe}$，此时 $s$ 中的第 $10$ 个字符为 $\\texttt{r}$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 5$；\n- $1 \\le n,q \\le 2\\times10^5$；\n- $s$ 中只包含小写字母；\n- $1 \\le k_i,x_i \\le 10^9$。\n\n|测试点编号|$n \\le$|$q \\le$|$k_i \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|:---:|\n|$1$|$200$|$2\\times10^5$|$200$|AB|\n|$2$|$200$|$2\\times10^5$|$200$|A|\n|$3$|$200$|$2\\times10^5$|$200$|无|\t\n|$4$|$2000$|$2\\times10^5$|$10^9$|AB|\n|$5$|$2000$|$2\\times10^5$|$10^9$|A|\n|$6,7$|$2000$|$2\\times10^5$|$10^9$|无|\t\n|$8$|$2\\times10^5$|$2\\times10^5$|$10^9$|AB|\n|$9$|$2\\times10^5$|$2\\times10^5$|$10^9$|A|\n|$10,11$|$2\\times10^4$|$2\\times10^4$|$10^9$|C|\t\n|$12$|$2\\times10^5$|$2\\times10^5$|$10^9$|C|\t\n|$13,14$|$2\\times10^4$|$2\\times10^4$|$10^9$|D|\t\n|$15$|$2\\times10^5$|$2\\times10^5$|$10^9$|D|\t\n|$16\\sim18$|$2\\times10^4$|$2\\times10^4$|$10^9$|无|\t\n|$19,20$|$2\\times10^5$|$2\\times10^5$|$10^9$|无|\t\n\n- 特殊性质 A：若 $s_i=\\texttt{i}$ 且 $i \\ne n$，则 $s_{i+1} \\ne \\texttt{h}$。\n- 特殊性质 B：若 $s_i=\\texttt{i}$ 且 $i \\ne n$，则 $s_{i+1} \\ne \\texttt{s}$。\n- 特殊性质 C：保证任意时刻 $s$ 中 $\\texttt{he}$ 子串的数量不大于 $3$。\n- 特殊性质 D：保证 $k_i$ 都相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "芳权多", "background": "", "description": "Yuki 有一个长度为 $n$ 且只包含小写字母的字符串 $s$，其下标从 $1$ 开始。\n\n定义一次修改为对 $s$ **同时**进行下面的两种操作：\n\n- 将 $s$ 中所有为 $\\texttt{he}$ 的子串替换为 $\\texttt{she}$；\n- 将 $s$ 中所有为 $\\texttt{his}$ 的子串替换为 $\\texttt{her}$。\n\n例如，对 $\\texttt{hihehishe}$ 进行一次操作后，该字符串会变为 $\\texttt{hishehershe}$。\n\n现有 $q$ 次询问，第 $i$ 次询问给出两个参数 $k_i,x_i$，你需要求出对 $s$ 进行 $k_i$ 次修改后 $s$ 的第 $x_i$ 个字符，或报告不存在第 $x_i$ 个字符。询问之间互相独立。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含两个整数 $c,T$，分别表示测试点编号和测试数据组数。样例满足 $c=0$。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行两个正整数 $n,q$。\n- 第二行一个长度为 $n$ 的字符串 $s$。\n- 接下来 $q$ 行，第 $i$ 行两个正整数 $k_i,x_i$。", "outputFormat": "对于每组测试数据，输出 $q$ 行，第 $i$ 行包含一个字符：\n\n- 若对 $s$ 进行 $k_i$ 次修改后 $s$ 中存在第 $x_i$ 个字符，则输出该字符；\n- 若对 $s$ 进行 $k_i$ 次修改后 $s$ 中不存在第 $x_i$ 个字符，则输出 $\\texttt{0}$。", "hint": "### 样例 1 解释\n\n在该组样例的唯一一组测试数据中，$s=\\texttt{hihehishe}$。\n\n对 $s$ 进行一次修改后，$s$ 会变为 $\\texttt{hishehershe}$，此时 $s$ 中的第 $7$ 个字符为 $\\texttt{e}$ 且不存在第 $12$ 个字符。\n\n对 $s$ 进行两次修改后，$s$ 会变为 $\\texttt{hersheshersshe}$，此时 $s$ 中的第 $10$ 个字符为 $\\texttt{r}$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le T \\le 5$；\n- $1 \\le n,q \\le 2\\times10^5$；\n- $s$ 中只包含小写字母；\n- $1 \\le k_i,x_i \\le 10^9$。\n\n|测试点编号|$n \\le$|$q \\le$|$k_i \\le$|特殊性质|\n|:---:|:---:|:---:|:---:|:---:|\n|$1$|$200$|$2\\times10^5$|$200$|AB|\n|$2$|$200$|$2\\times10^5$|$200$|A|\n|$3$|$200$|$2\\times10^5$|$200$|无|\t\n|$4$|$2000$|$2\\times10^5$|$10^9$|AB|\n|$5$|$2000$|$2\\times10^5$|$10^9$|A|\n|$6,7$|$2000$|$2\\times10^5$|$10^9$|无|\t\n|$8$|$2\\times10^5$|$2\\times10^5$|$10^9$|AB|\n|$9$|$2\\times10^5$|$2\\times10^5$|$10^9$|A|\n|$10,11$|$2\\times10^4$|$2\\times10^4$|$10^9$|C|\t\n|$12$|$2\\times10^5$|$2\\times10^5$|$10^9$|C|\t\n|$13,14$|$2\\times10^4$|$2\\times10^4$|$10^9$|D|\t\n|$15$|$2\\times10^5$|$2\\times10^5$|$10^9$|D|\t\n|$16\\sim18$|$2\\times10^4$|$2\\times10^4$|$10^9$|无|\t\n|$19,20$|$2\\times10^5$|$2\\times10^5$|$10^9$|无|\t\n\n- 特殊性质 A：若 $s_i=\\texttt{i}$ 且 $i \\ne n$，则 $s_{i+1} \\ne \\texttt{h}$。\n- 特殊性质 B：若 $s_i=\\texttt{i}$ 且 $i \\ne n$，则 $s_{i+1} \\ne \\texttt{s}$。\n- 特殊性质 C：保证任意时刻 $s$ 中 $\\texttt{he}$ 子串的数量不大于 $3$。\n- 特殊性质 D：保证 $k_i$ 都相同。", "locale": "zh-CN"}}}
{"pid": "P13842", "type": "P", "difficulty": 6, "samples": [["0\n3\n1 6\n3 2\n5 4", "1\n2\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "扫描线"], "title": "篱莘龙", "background": "", "description": "Yuki 家里养着 $n$ 只奶龙，第 $i$ 只奶龙的攻击力为 $a_i$，防御力为 $b_i$。\n\n对于第 $i$ 只奶龙和第 $j$ 只奶龙（$i\\ne j$），如果 $a_i>b_j$，则第 $i$ 只奶龙会攻击第 $j$ 只奶龙。\n\n你需要对于每个不大于 $n$ 的正整数 $k$ 求出，在第 $1$ 只奶龙到第 $k$ 只奶龙中，最多可以选择多少只奶龙，使得这些奶龙中不存在某只奶龙会攻击另一只奶龙。", "inputFormat": "第一行包含一个正整数 $c$，表示测试点编号。样例满足 $c=0$。\n\n第二行包含一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行包含两个正整数 $a_i,b_i$。保证所有 $a_i,b_i$ 互不相同。", "outputFormat": "输出 $n$ 行，第 $i$ 行包含一个整数，表示 $k=i$ 时的答案。", "hint": "### 样例 1 解释\n\n- $k=1$ 时显然只能选择第一只奶龙。\n- $k=2$ 时可以选择前两只奶龙。\n- $k=3$ 时，如果选择全部奶龙，则第三只奶龙会攻击第二只奶龙。所以答案最多为 $2$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le n \\le 10^6$；\n- $1 \\le a_i,b_i \\le 2n$，所有 $a_i,b_i$ 互不相同。\n\n| 测试点编号  |     $n\\le$     | 特殊性质 |\n| :---------: | :------------: | :------: |\n|     $1$     |      $20$      |    无    |\n|  $2\\sim 3$  |     $400$      |    无    |\n|     $4$     |     $2000$     |    B     |\n|  $5\\sim 6$  |     $2000$     |    无    |\n|     $7$     |     $10^5$     |    B     |\n|     $8$     |     $10^5$     |    C     |\n| $9\\sim 11$  |     $10^5$     |    无    |\n|    $12$     |     $10^6$     |    A     |\n|    $13$     |     $10^6$     |    B     |\n|    $14$     |     $10^6$     |    C     |\n| $15\\sim 17$ | $5\\times 10^5$ |    无    |\n| $18\\sim 20$ |     $10^6$     |    无    |\n\n- 特殊性质 A：保证 $a_i> b_i$。\n- 特殊性质 B：保证 $a_i< b_i$。\n- 特殊性质 C：保证只有不超过 $100$ 只奶龙满足 $a_i>b_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "篱莘龙", "background": "", "description": "Yuki 家里养着 $n$ 只奶龙，第 $i$ 只奶龙的攻击力为 $a_i$，防御力为 $b_i$。\n\n对于第 $i$ 只奶龙和第 $j$ 只奶龙（$i\\ne j$），如果 $a_i>b_j$，则第 $i$ 只奶龙会攻击第 $j$ 只奶龙。\n\n你需要对于每个不大于 $n$ 的正整数 $k$ 求出，在第 $1$ 只奶龙到第 $k$ 只奶龙中，最多可以选择多少只奶龙，使得这些奶龙中不存在某只奶龙会攻击另一只奶龙。", "inputFormat": "第一行包含一个正整数 $c$，表示测试点编号。样例满足 $c=0$。\n\n第二行包含一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行包含两个正整数 $a_i,b_i$。保证所有 $a_i,b_i$ 互不相同。", "outputFormat": "输出 $n$ 行，第 $i$ 行包含一个整数，表示 $k=i$ 时的答案。", "hint": "### 样例 1 解释\n\n- $k=1$ 时显然只能选择第一只奶龙。\n- $k=2$ 时可以选择前两只奶龙。\n- $k=3$ 时，如果选择全部奶龙，则第三只奶龙会攻击第二只奶龙。所以答案最多为 $2$。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $1 \\le n \\le 10^6$；\n- $1 \\le a_i,b_i \\le 2n$，所有 $a_i,b_i$ 互不相同。\n\n| 测试点编号  |     $n\\le$     | 特殊性质 |\n| :---------: | :------------: | :------: |\n|     $1$     |      $20$      |    无    |\n|  $2\\sim 3$  |     $400$      |    无    |\n|     $4$     |     $2000$     |    B     |\n|  $5\\sim 6$  |     $2000$     |    无    |\n|     $7$     |     $10^5$     |    B     |\n|     $8$     |     $10^5$     |    C     |\n| $9\\sim 11$  |     $10^5$     |    无    |\n|    $12$     |     $10^6$     |    A     |\n|    $13$     |     $10^6$     |    B     |\n|    $14$     |     $10^6$     |    C     |\n| $15\\sim 17$ | $5\\times 10^5$ |    无    |\n| $18\\sim 20$ |     $10^6$     |    无    |\n\n- 特殊性质 A：保证 $a_i> b_i$。\n- 特殊性质 B：保证 $a_i< b_i$。\n- 特殊性质 C：保证只有不超过 $100$ 只奶龙满足 $a_i>b_i$。", "locale": "zh-CN"}}}
{"pid": "P13843", "type": "P", "difficulty": 7, "samples": [["2\n0 1 2 3", "1 1 2 5"], ["4\n0 11 83 73 34 53 72 57 81 92 10 31 44 33 93 10", "1 11 83 986 34 427 2894 38772 81 983 6733 87643 2798 38232 238499 3459260"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集合幂级数，子集卷积", "模板题"], "title": "【模板】集合幂级数 exp（非素数模数）", "background": "本题为 [集合幂级数 exp](https://www.luogu.com.cn/problem/P12230) 的非素数模数版本。", "description": "给定一个集合幂级数 $F(x)$，保证 $[x^{\\varnothing}]F(x)=0$。定义 $x$ 的乘法为子集卷积，你需要对所有 $S\\subseteq\\{1,2,\\cdots,n\\}$ 求出 $[x^S]\\mathrm e^{F(x)}$ 对 $2^{64}$ 取模后的值。\n\n如果你仍不清楚题意，可以阅读题面最后的提示部分。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]F(x)$，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "outputFormat": "输出一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]\\mathrm e^{F(x)}$ 对 $2^{64}$ 取模后的值，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "hint": "#### 【数据范围】\n\n对于所有数据，保证 $1\\le n\\le 20$，$[x^S]F(x)\\in[0,2^{64})\\cap\\mathbb Z$，$[x^{\\varnothing}]F(x)=0$。\n\n本题有 $20$ 个测试点，第 $i$ 个测试点满足 $n=i$。\n\n#### 【提示】\n\n假设 $F(x)=\\sum_S f_Sx^S$，那么 $[x^S]F(x)=f_S$。\n\n在本题中，$x$ 的乘法被定义为子集卷积，即：\n$$x^S\\cdot x^T=\\begin{cases}0&S\\cap T\\neq\\varnothing\\\\x^{S\\cup T}&\\text{otherwise}\\end{cases}$$\n\n根据泰勒展开，有：\n$$\\mathrm e^{F(x)}=\\sum_{n\\ge 0}\\frac{F^n(x)}{n!}$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】集合幂级数 exp（非素数模数）", "background": "本题为 [集合幂级数 exp](https://www.luogu.com.cn/problem/P12230) 的非素数模数版本。", "description": "给定一个集合幂级数 $F(x)$，保证 $[x^{\\varnothing}]F(x)=0$。定义 $x$ 的乘法为子集卷积，你需要对所有 $S\\subseteq\\{1,2,\\cdots,n\\}$ 求出 $[x^S]\\mathrm e^{F(x)}$ 对 $2^{64}$ 取模后的值。\n\n如果你仍不清楚题意，可以阅读题面最后的提示部分。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]F(x)$，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "outputFormat": "输出一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]\\mathrm e^{F(x)}$ 对 $2^{64}$ 取模后的值，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "hint": "#### 【数据范围】\n\n对于所有数据，保证 $1\\le n\\le 20$，$[x^S]F(x)\\in[0,2^{64})\\cap\\mathbb Z$，$[x^{\\varnothing}]F(x)=0$。\n\n本题有 $20$ 个测试点，第 $i$ 个测试点满足 $n=i$。\n\n#### 【提示】\n\n假设 $F(x)=\\sum_S f_Sx^S$，那么 $[x^S]F(x)=f_S$。\n\n在本题中，$x$ 的乘法被定义为子集卷积，即：\n$$x^S\\cdot x^T=\\begin{cases}0&S\\cap T\\neq\\varnothing\\\\x^{S\\cup T}&\\text{otherwise}\\end{cases}$$\n\n根据泰勒展开，有：\n$$\\mathrm e^{F(x)}=\\sum_{n\\ge 0}\\frac{F^n(x)}{n!}$$", "locale": "zh-CN"}}}
{"pid": "P13844", "type": "P", "difficulty": 7, "samples": [["2\n1 2 3 4", "0 2 3 18446744073709551614"], ["4\n1 8 3 9 2 0 1 8 7 0 0 1 7 3 4 1", "0 8 3 18446744073709551601 2 18446744073709551600 18446744073709551611 78 7 18446744073709551560 18446744073709551595 274 18446744073709551609 171 60 18446744073709550139"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集合幂级数，子集卷积", "模板题"], "title": "【模板】集合幂级数 ln（非素数模数）", "background": "本题为 [集合幂级数 ln](https://www.luogu.com.cn/problem/P12231) 的非素数模数版本。", "description": "给定一个集合幂级数 $F(x)$，保证 $[x^{\\varnothing}]F(x)=1$。定义 $x$ 的乘法为子集卷积，可以证明存在一个 $G(x)$ 满足 $\\mathrm e^{G(x)}=F(x)$，你需要对 $S\\subseteq\\{1,2,\\cdots,n\\}$ 求出 $[x^S]G(x)$ 对 $2^{64}$ 取模后的值。\n\n如果你仍不清楚题意，可以阅读题面最后的提示部分。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]F(x)$，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "outputFormat": "输出一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]G(x)$ 对 $2^{64}$ 取模后的值，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "hint": "对于所有数据，保证 $1\\le n\\le 20$，$[x^S]F(x)\\in[0,2^{64})\\cap\\mathbb Z$，$[x^{\\varnothing}]F(x)=1$。\n\n本题有 $20$ 个测试点，第 $i$ 个测试点满足 $n=i$。\n\n#### 【提示】\n\n假设 $F(x)=\\sum_S f_Sx^S$，那么 $[x^S]F(x)=f_S$。\n\n在本题中，$x$ 的乘法被定义为子集卷积，即：\n$$x^S\\cdot x^T=\\begin{cases}0&S\\cap T\\neq\\varnothing\\\\x^{S\\cup T}&\\text{otherwise}\\end{cases}$$\n\n根据泰勒展开，有：\n$$\\mathrm e^{F(x)}=\\sum_{n\\ge 0}\\frac{F^n(x)}{n!}$$\n\n可以证明本题答案唯一。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】集合幂级数 ln（非素数模数）", "background": "本题为 [集合幂级数 ln](https://www.luogu.com.cn/problem/P12231) 的非素数模数版本。", "description": "给定一个集合幂级数 $F(x)$，保证 $[x^{\\varnothing}]F(x)=1$。定义 $x$ 的乘法为子集卷积，可以证明存在一个 $G(x)$ 满足 $\\mathrm e^{G(x)}=F(x)$，你需要对 $S\\subseteq\\{1,2,\\cdots,n\\}$ 求出 $[x^S]G(x)$ 对 $2^{64}$ 取模后的值。\n\n如果你仍不清楚题意，可以阅读题面最后的提示部分。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]F(x)$，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "outputFormat": "输出一行 $2^n$ 个非负整数，第 $i$ 个整数表示 $[x^S]G(x)$ 对 $2^{64}$ 取模后的值，其中 $a\\in S$ 当且仅当 $(i-1)$ 二进制下从低到高第 $a$ 位为 $1$。", "hint": "对于所有数据，保证 $1\\le n\\le 20$，$[x^S]F(x)\\in[0,2^{64})\\cap\\mathbb Z$，$[x^{\\varnothing}]F(x)=1$。\n\n本题有 $20$ 个测试点，第 $i$ 个测试点满足 $n=i$。\n\n#### 【提示】\n\n假设 $F(x)=\\sum_S f_Sx^S$，那么 $[x^S]F(x)=f_S$。\n\n在本题中，$x$ 的乘法被定义为子集卷积，即：\n$$x^S\\cdot x^T=\\begin{cases}0&S\\cap T\\neq\\varnothing\\\\x^{S\\cup T}&\\text{otherwise}\\end{cases}$$\n\n根据泰勒展开，有：\n$$\\mathrm e^{F(x)}=\\sum_{n\\ge 0}\\frac{F^n(x)}{n!}$$\n\n可以证明本题答案唯一。", "locale": "zh-CN"}}}
{"pid": "P13845", "type": "P", "difficulty": 6, "samples": [["12\n2 2\n17 26\n-2\n12 21\n0 0\n19 21\n16 22\n14 20\n15 19\n13 14\n-4\n13 17", "1\n2\n1\n2\n3\n3\n3\n3\n3\n4\n3\n3"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2023", "ICPC", "CERC"], "title": "[CERC 2023] Attendance", "background": "", "description": "An ambitious university student has enrolled in just about every possible course. Unfortunately, the courses require mandatory attendance. He has decided to visit the university campus where the lectures are held several times a day. He will join every lecture that is running at that moment, sign the attendance sheet, and immediately leave the campus due to other obligations. He will return later that day, when he will repeat this process to sign attendance sheets at other lectures and so on until his name is on attendance sheets of all lectures.\n\nAs if this was not problematic enough, the student faces another obstacle: the schedule of the lectures keeps changing. Some lectures are added and some are canceled. The student has to keep adjusting his visiting schedule of the university to sign attendance sheets at all lectures.\n\nWrite a program that will start with an empty schedule of lectures and read sequential modifications, which are either an addition or removal of a single lecture. For every modification, output the minimum number of visits that the student has to make to sign attendance sheets at all lectures that are currently on the schedule.\n", "inputFormat": "The first line contains the number of modifications $N$, which are given in the following $N$ lines. An addition of a lecture is described with two space-separated integers $A_i$ and $B_i$, which represent a lecture that is running from $A_i$ to $B_i$ (including both bounds). The lectures are numbered as they are added, sequentially from 1 onwards. A negative number $X_i$ represents a removal of lecture with the number $-X_i$.\n", "outputFormat": "For every modification output a single line with the minimum number of required visits for the current schedule of lectures.", "hint": "### Comment\n\nThe first lecture to be added is $[2, 2]$ and is given number 1. Next added lecture is $[17, 26]$ with number 2. It is removed immediately afterwards, which is indicated by $-2$ in the input. The following added lecture is $[12, 21]$, which is given number 3 and so on.\n\n### Input limits\n\n- $1 \\leq N \\leq 300\\,000$\n- $0 \\leq A_i \\leq B_i \\leq 10^9$\n- Every number of the lecture for removal $X_i$ will be valid – it will exist in the schedule at that moment.\n- Note the memory limit.", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Attendance", "background": "", "description": "An ambitious university student has enrolled in just about every possible course. Unfortunately, the courses require mandatory attendance. He has decided to visit the university campus where the lectures are held several times a day. He will join every lecture that is running at that moment, sign the attendance sheet, and immediately leave the campus due to other obligations. He will return later that day, when he will repeat this process to sign attendance sheets at other lectures and so on until his name is on attendance sheets of all lectures.\n\nAs if this was not problematic enough, the student faces another obstacle: the schedule of the lectures keeps changing. Some lectures are added and some are canceled. The student has to keep adjusting his visiting schedule of the university to sign attendance sheets at all lectures.\n\nWrite a program that will start with an empty schedule of lectures and read sequential modifications, which are either an addition or removal of a single lecture. For every modification, output the minimum number of visits that the student has to make to sign attendance sheets at all lectures that are currently on the schedule.\n", "inputFormat": "The first line contains the number of modifications $N$, which are given in the following $N$ lines. An addition of a lecture is described with two space-separated integers $A_i$ and $B_i$, which represent a lecture that is running from $A_i$ to $B_i$ (including both bounds). The lectures are numbered as they are added, sequentially from 1 onwards. A negative number $X_i$ represents a removal of lecture with the number $-X_i$.\n", "outputFormat": "For every modification output a single line with the minimum number of required visits for the current schedule of lectures.", "hint": "### Comment\n\nThe first lecture to be added is $[2, 2]$ and is given number 1. Next added lecture is $[17, 26]$ with number 2. It is removed immediately afterwards, which is indicated by $-2$ in the input. The following added lecture is $[12, 21]$, which is given number 3 and so on.\n\n### Input limits\n\n- $1 \\leq N \\leq 300\\,000$\n- $0 \\leq A_i \\leq B_i \\leq 10^9$\n- Every number of the lecture for removal $X_i$ will be valid – it will exist in the schedule at that moment.\n- Note the memory limit.", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Attendance", "background": "", "description": "一名雄心勃勃的大学生几乎报名了所有可能的课程。不幸的是，这些课程都要求强制出勤。于是他决定在一天之内多次前往大学校园（课程开设的地方）。每次他都会参加当时正在进行的所有课程，在签到表上签名，然后立刻因为其他事务离开校园。当日稍晚他会再次返回，重复这一过程，在其他课程的签到表上签名，如此往复，直到他在所有课程的签到表上都留下了自己的名字。\n\n然而，这还不是唯一的困难：课程表不断在变化。有些课程会被新增，有些则会被取消。学生必须不断调整自己前往校园的计划，以确保能够在所有课程的签到表上签名。\n\n请编写一个程序：从一份空的课程表开始，顺序读取修改操作，每个修改要么是新增一门课程，要么是删除一门课程。对于每个修改，输出学生在当前课程表下，完成所有课程签到所需的最少来访次数。\n", "inputFormat": "第一行包含一个整数 $N$，表示修改操作的数量。接下来的 $N$ 行依次描述这些修改。\n\n- 新增课程由两个空格分隔的整数 $A_i$ 和 $B_i$ 描述，表示一门课程从时间 $A_i$ 到时间 $B_i$ 开始和结束（区间两端都包含）。\n- 新增的课程会被依次编号，从 1 开始递增。\n- 一个负数 $X_i$ 表示删除编号为 $-X_i$ 的课程。", "outputFormat": "对于每个修改操作，输出一行，表示在当前课程表下学生完成所有课程签到所需的最少来访次数。\n", "hint": "### 注释\n\n第一门新增的课程是区间 $[2, 2]$，编号为 1。接下来新增的课程是区间 $[17, 26]$，编号为 2。随后它立即被删除（输入中的 `-2` 表示删除编号为 2 的课程）。接着新增的课程是区间 $[12, 21]$，编号为 3，以此类推。\n\n### 输入限制\n\n- $1 \\leq N \\leq 300\\,000$\n- $0 \\leq A_i \\leq B_i \\leq 10^9$\n- 每一个删除操作 $X_i$ 都保证合法，即对应的课程在该时刻确实存在于课程表中。\n- 注意内存限制。\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13846", "type": "P", "difficulty": 3, "samples": [["4\nBGBG\n0 0\n0 1\n1 1\n1 0", "2.828427125"], ["4\nGGBB\n0 0\n0 1\n1 1\n1 0", "2"], ["12\nGBGBBGBBBBGB\n0 -15\n6 -14\n19 -5\n17 7\n11 12\n1 15\n-9 13\n-15 10\n-17 8\n-19 4\n-16 -9\n-13 -11", "186.529031603"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ICPC", "CERC"], "title": "[CERC 2023] Ball Passing", "background": "", "description": "A group of students has just finished their math lesson and they’re heading out for physical education. Their teacher has asked them to arrange themselves in a circle. After several minutes of busy moving around the court they have finally managed to position themselves so that they form a strictly convex polygon. They might not lie on the circle, but the teacher is happy to at least get some structure.\n\nThere is an even number of boys and an even number of girls in this group of $N$ students. They will practice ball passing in pairs, therefore the teacher has to pair them up. The teacher will pair boys among themselves and the same for girls.\n\nThe school administration has decided to address the decline in physical performance of their students. Therefore, they have implemented a quality measure for ball passing practice, which is the total distance traveled by the balls in a single round of ball passes between each pair. Help the teacher pair up the students in a way that will maximize this measure.", "inputFormat": "The first line contains the number of students $N$. The second line contains a string $S$ of length $N$, which describes the students along the perimeter of the polygon with a character \"B\" for a boy and \"G\" for a girl. The following $N$ lines provide the locations of students with space-separated integer coordinates $X_i$ and $Y_i$ in the same order as they are described in the string $S$.\n", "outputFormat": "Output the maximum ball passing distance that can be obtained by pairing up the students appropriately. The solution will be considered correct if the relative or absolute error compared to the official solution is within $10^{-6}$.", "hint": "### Input limits\n\n- $2 \\leq N \\leq 50$\n- The number of boys and girls will both be even. Note that one of them can be zero.\n- The coordinates $X_i$ and $Y_i$ won’t exceed 10 000 by absolute value.", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Ball Passing", "background": "", "description": "A group of students has just finished their math lesson and they’re heading out for physical education. Their teacher has asked them to arrange themselves in a circle. After several minutes of busy moving around the court they have finally managed to position themselves so that they form a strictly convex polygon. They might not lie on the circle, but the teacher is happy to at least get some structure.\n\nThere is an even number of boys and an even number of girls in this group of $N$ students. They will practice ball passing in pairs, therefore the teacher has to pair them up. The teacher will pair boys among themselves and the same for girls.\n\nThe school administration has decided to address the decline in physical performance of their students. Therefore, they have implemented a quality measure for ball passing practice, which is the total distance traveled by the balls in a single round of ball passes between each pair. Help the teacher pair up the students in a way that will maximize this measure.", "inputFormat": "The first line contains the number of students $N$. The second line contains a string $S$ of length $N$, which describes the students along the perimeter of the polygon with a character \"B\" for a boy and \"G\" for a girl. The following $N$ lines provide the locations of students with space-separated integer coordinates $X_i$ and $Y_i$ in the same order as they are described in the string $S$.\n", "outputFormat": "Output the maximum ball passing distance that can be obtained by pairing up the students appropriately. The solution will be considered correct if the relative or absolute error compared to the official solution is within $10^{-6}$.", "hint": "### Input limits\n\n- $2 \\leq N \\leq 50$\n- The number of boys and girls will both be even. Note that one of them can be zero.\n- The coordinates $X_i$ and $Y_i$ won’t exceed 10 000 by absolute value.", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Ball Passing", "background": "", "description": "一群学生刚上完数学课，正准备去上体育课。老师要求他们排成一个圆圈。经过几分钟在操场上的忙乱走动，他们终于站好了，形成了一个严格凸多边形。虽然他们并不都在同一个圆上，但老师至少对这个结构已经满意了。\n\n在这群共有 $N$ 个学生的人群中，男生人数是偶数，女生人数也是偶数。由于他们要进行两两配对的传球练习，因此老师必须将他们配对。配对要求是：男生只能与男生配对，女生只能与女生配对。\n\n学校管理层决定应对学生体能下降的问题，因此他们为传球练习设定了一项质量指标：即在一次完整传球轮次中，所有配对之间的传球距离之和。请帮助老师为学生们进行配对，使得这一指标最大化。\n", "inputFormat": "第一行包含一个整数 $N$，表示学生人数。\n\n第二行包含一个长度为 $N$ 的字符串 $S$，描述了多边形周长上学生的顺序，其中字符 `\"B\"` 表示男生，字符 `\"G\"` 表示女生。\n\n接下来的 $N$ 行，每行包含两个用空格分隔的整数 $X_i, Y_i$，表示按字符串 $S$ 给出的顺序对应的学生的坐标。\n", "outputFormat": "输出一个实数，表示通过合理配对学生所能获得的最大传球距离。若输出的结果与官方解答相比的相对或绝对误差不超过 $10^{-6}$，则视为正确。\n", "hint": "### 输入限制\n\n- $2 \\leq N \\leq 50$\n- 男生和女生的人数均为偶数。注意其中某一性别的人数可能为 0。\n- 坐标 $X_i, Y_i$ 的绝对值不超过 10000。\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13847", "type": "P", "difficulty": 5, "samples": [["5 3 4\n14 18 21\n1 2 3 1 2\n5 6 3 10\n0 0 1 2 0\n1 2 0 1 2\n5 2 1 0 0\n2 1 2\n2 2 3\n2 3 4", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "网络流", "ICPC", "CERC"], "title": "[CERC 2023] Cakes", "background": "", "description": "Your local cake shop is making a business plan for the next few months. The bakers have $C$ different recipes, each requiring their own set of ingredients and tools. During the baking, the ingredients are consumed, but the tools are not and can be reused for other recipes. Currently, the bakery has no ingredients or tools – they were all destroyed in the recent floods or taken away by the tax bureau.\n\nThe son of the main chef managed to convince everyone to only bake each type of cake once. Individuals on the internet are supposedly happy to pay extra to be the only owners of their own unique Nutty-Fudge Tart (NFT). In fact, the son has already gone ahead and estimated how much money they can earn for each type of cake. Now bakers are looking at each other, trying to figure out which types of cake to prepare for maximum profit. You are given the costs of all ingredients, tools, and prices of cakes. Your task is to determine how much profit the bakers can make.", "inputFormat": "The first line contains three integers: $G$, $C$, and $T$, the number of ingredients, the number of recipes, and the number of different tools in them, respectively. The second line contains $C$ space-separated integers $c_1, \\ldots, c_C$, the prices of each cake. The third line contains $G$ space-separated integers $g_1, \\ldots, g_G$, representing the prices of each ingredient. The fourth line contains $T$ space-separated integers $t_1, \\ldots, t_T$, representing the prices of all tools.\n\nThis is followed by $C$ lines, each containing $G$ space-separated integers $a_{i,j}$, corresponding to the amount of ingredient $j$ in cake $i$.\n\nFinally, this is followed by $C$ lines of the following format: the $i$-th row starts with an integer $n_i$, the number of tools required for $i$-th cake. This is followed by $n_i$ space-separated integers $b_{i,k}$, indicating that we need tool $b_{i,k}$ to prepare cake $i$ (listed tools are distinct).", "outputFormat": "Print a single number: the maximum profit that the cake shop can make.", "hint": "### Comment\n\nThe maximum profit is made by baking cakes 1 and 2, but not cake 3.\n\n### Input limits\n\n- $1 \\leq G, C, T \\leq 200$\n- $0 \\leq c_i, t_i \\leq 10^9$\n- $0 \\leq g_j, a_{i,j} \\leq 10^8$\n- $0 \\leq n_i \\leq T$\n- $1 \\leq b_{i,k} \\leq T$", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Cakes", "background": "", "description": "Your local cake shop is making a business plan for the next few months. The bakers have $C$ different recipes, each requiring their own set of ingredients and tools. During the baking, the ingredients are consumed, but the tools are not and can be reused for other recipes. Currently, the bakery has no ingredients or tools – they were all destroyed in the recent floods or taken away by the tax bureau.\n\nThe son of the main chef managed to convince everyone to only bake each type of cake once. Individuals on the internet are supposedly happy to pay extra to be the only owners of their own unique Nutty-Fudge Tart (NFT). In fact, the son has already gone ahead and estimated how much money they can earn for each type of cake. Now bakers are looking at each other, trying to figure out which types of cake to prepare for maximum profit. You are given the costs of all ingredients, tools, and prices of cakes. Your task is to determine how much profit the bakers can make.", "inputFormat": "The first line contains three integers: $G$, $C$, and $T$, the number of ingredients, the number of recipes, and the number of different tools in them, respectively. The second line contains $C$ space-separated integers $c_1, \\ldots, c_C$, the prices of each cake. The third line contains $G$ space-separated integers $g_1, \\ldots, g_G$, representing the prices of each ingredient. The fourth line contains $T$ space-separated integers $t_1, \\ldots, t_T$, representing the prices of all tools.\n\nThis is followed by $C$ lines, each containing $G$ space-separated integers $a_{i,j}$, corresponding to the amount of ingredient $j$ in cake $i$.\n\nFinally, this is followed by $C$ lines of the following format: the $i$-th row starts with an integer $n_i$, the number of tools required for $i$-th cake. This is followed by $n_i$ space-separated integers $b_{i,k}$, indicating that we need tool $b_{i,k}$ to prepare cake $i$ (listed tools are distinct).", "outputFormat": "Print a single number: the maximum profit that the cake shop can make.", "hint": "### Comment\n\nThe maximum profit is made by baking cakes 1 and 2, but not cake 3.\n\n### Input limits\n\n- $1 \\leq G, C, T \\leq 200$\n- $0 \\leq c_i, t_i \\leq 10^9$\n- $0 \\leq g_j, a_{i,j} \\leq 10^8$\n- $0 \\leq n_i \\leq T$\n- $1 \\leq b_{i,k} \\leq T$", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Cakes", "background": "", "description": "你所在的蛋糕店正在为未来几个月制定商业计划。糕点师们有 $C$ 种不同的配方，每种配方都需要各自的一套原料和工具。在烘焙过程中，原料会被消耗，而工具不会，可以被其他配方重复使用。目前，蛋糕店既没有原料，也没有工具——它们不是在最近的洪水中被毁，就是被税务局没收了。\n\n主厨的儿子设法说服大家：每种蛋糕只做一次。网络上的人们据说愿意支付额外的费用，来成为某种独一无二的“坚果软糖挞”（Nutty-Fudge Tart，简称 **NFT**）的唯一拥有者。事实上，主厨的儿子已经提前估算了每种蛋糕的售价。现在，糕点师们正互相看着，思考要准备哪些蛋糕以获取最大利润。你将得到所有原料、工具的价格，以及蛋糕的售价。你的任务是确定蛋糕店能获得的最大利润。", "inputFormat": "第一行包含三个整数 $G, C, T$，分别表示原料种类数、配方数量以及工具种类数。\n\n第二行包含 $C$ 个用空格分隔的整数 $c_1, \\ldots, c_C$，表示每种蛋糕的售价。\n\n第三行包含 $G$ 个用空格分隔的整数 $g_1, \\ldots, g_G$，表示每种原料的价格。\n\n第四行包含 $T$ 个用空格分隔的整数 $t_1, \\ldots, t_T$，表示每种工具的价格。\n\n接下来有 $C$ 行，每行包含 $G$ 个用空格分隔的整数 $a_{i,j}$，表示制作第 $i$ 种蛋糕所需的第 $j$ 种原料数量。\n\n最后还有 $C$ 行，每行的格式如下：第 $i$ 行以一个整数 $n_i$ 开始，表示制作第 $i$ 种蛋糕所需的工具数量。接下来是 $n_i$ 个用空格分隔的整数 $b_{i,k}$，表示制作第 $i$ 种蛋糕需要的工具编号（列出的工具互不相同）。\n", "outputFormat": "输出一个整数，表示蛋糕店所能获得的最大利润。", "hint": "### 注释\n\n最大利润来自于制作蛋糕 1 和蛋糕 2，而不制作蛋糕 3。\n\n### 输入限制\n\n- $1 \\leq G, C, T \\leq 200$\n- $0 \\leq c_i, t_i \\leq 10^9$\n- $0 \\leq g_j, a_{i,j} \\leq 10^8$\n- $0 \\leq n_i \\leq T$\n- $1 \\leq b_{i,k} \\leq T$\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13848", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 2\n1 1 4\n2 3 100\n3\n1\n4", "4\n-1\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "二分", "2023", "ICPC", "bitset", "CERC"], "title": "[CERC 2023] Drying Laundry", "background": "", "description": "Harry the Beaver runs a hotel and has to wash bed sheets every Sunday night for the next $Q$ weeks until the tourist season ends. On week $j$, he has $N$ freshly washed bed sheets that he wants to dry by hanging them on two parallel clotheslines of length $L_j$ each. The sheets can be hung next to each other but must not overlap. Each sheet is $d_i$ units wide and rather long, therefore he will always orient it so that it will take up $d_i$ units of the line when hung to dry. The sheets have different drying times that are not related to their sizes because of different materials. Thus, the $i$-th sheet needs $t_i^{\\text{slow}}$ minutes to dry. However, if it is hung over both lines at the same time, it dries quicker in $t_i^{\\text{fast}}$ minutes, but also takes up space on the other line. To avoid smelly sheets, Harry the Beaver has to start drying all of them immediately after washing, i.e. all sheets have to be hung simultaneously.\n\nHarry the Beaver wants to go to sleep as soon as possible on Sundays, therefore, he asks you to help him determine the minimal required drying time for each week $j$, or inform him that it is impossible to finish drying the sheets that week.", "inputFormat": "The first line contains an integer $N$, the number of sheets, and an integer $Q$, the number of weeks until the end of the tourist season. The next $N$ lines contain space-separated integers $d_i$, $t_i^{\\text{fast}}$, and $t_i^{\\text{slow}}$, which correspond to the width, the shorter drying time, and the longer drying time of the $i$-th sheet, respectively. The final $Q$ lines the the input contain integers $L_j$, $j$-th of which represents the length of the clothesline for week $j$.", "outputFormat": "Print $Q$ lines, with $j$-th of them containing the minimal required drying time for week $j$, or \"-1\" (without the quotes) if it is impossible to finish drying the sheets that week.", "hint": "### Input limits\n\n- $1 \\leq N \\leq 3 \\cdot 10^4$\n- $1 \\leq Q \\leq 3 \\cdot 10^5$\n- $1 \\leq d_i \\leq 3 \\cdot 10^5$ for all $1 \\leq i \\leq N$\n- $1 \\leq t_i^{\\text{fast}} \\leq t_i^{\\text{slow}} \\leq 10^9$ for all $1 \\leq i \\leq N$\n- $1 \\leq L_j \\leq 3 \\cdot 10^5$ for all $1 \\leq j \\leq Q$", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Drying Laundry", "background": "", "description": "Harry the Beaver runs a hotel and has to wash bed sheets every Sunday night for the next $Q$ weeks until the tourist season ends. On week $j$, he has $N$ freshly washed bed sheets that he wants to dry by hanging them on two parallel clotheslines of length $L_j$ each. The sheets can be hung next to each other but must not overlap. Each sheet is $d_i$ units wide and rather long, therefore he will always orient it so that it will take up $d_i$ units of the line when hung to dry. The sheets have different drying times that are not related to their sizes because of different materials. Thus, the $i$-th sheet needs $t_i^{\\text{slow}}$ minutes to dry. However, if it is hung over both lines at the same time, it dries quicker in $t_i^{\\text{fast}}$ minutes, but also takes up space on the other line. To avoid smelly sheets, Harry the Beaver has to start drying all of them immediately after washing, i.e. all sheets have to be hung simultaneously.\n\nHarry the Beaver wants to go to sleep as soon as possible on Sundays, therefore, he asks you to help him determine the minimal required drying time for each week $j$, or inform him that it is impossible to finish drying the sheets that week.", "inputFormat": "The first line contains an integer $N$, the number of sheets, and an integer $Q$, the number of weeks until the end of the tourist season. The next $N$ lines contain space-separated integers $d_i$, $t_i^{\\text{fast}}$, and $t_i^{\\text{slow}}$, which correspond to the width, the shorter drying time, and the longer drying time of the $i$-th sheet, respectively. The final $Q$ lines the the input contain integers $L_j$, $j$-th of which represents the length of the clothesline for week $j$.", "outputFormat": "Print $Q$ lines, with $j$-th of them containing the minimal required drying time for week $j$, or \"-1\" (without the quotes) if it is impossible to finish drying the sheets that week.", "hint": "### Input limits\n\n- $1 \\leq N \\leq 3 \\cdot 10^4$\n- $1 \\leq Q \\leq 3 \\cdot 10^5$\n- $1 \\leq d_i \\leq 3 \\cdot 10^5$ for all $1 \\leq i \\leq N$\n- $1 \\leq t_i^{\\text{fast}} \\leq t_i^{\\text{slow}} \\leq 10^9$ for all $1 \\leq i \\leq N$\n- $1 \\leq L_j \\leq 3 \\cdot 10^5$ for all $1 \\leq j \\leq Q$", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Drying Laundry", "background": "", "description": "海狸哈利经营着一家旅馆，在接下来的 $Q$ 周内，他必须在每个星期天晚上清洗床单，直到旅游季结束。在第 $j$ 周，他需要晾干 $N$ 条刚洗好的床单，他会把它们挂在两根平行的、长度均为 $L_j$ 的晾衣绳上。床单可以相邻悬挂，但不能重叠。每条床单的宽度为 $d_i$ 个单位，并且因为床单非常长，所以它总是会以宽度 $d_i$ 的方式占据晾衣绳的空间。床单的晾干时间与大小无关，而是由材质决定的。具体来说，第 $i$ 条床单如果只挂在一根绳子上需要 $t_i^{\\text{slow}}$ 分钟才能晾干；如果同时横跨两根绳子，则可以更快地晾干，仅需 $t_i^{\\text{fast}}$ 分钟，但这会同时占用两根绳子上的空间。为了避免床单发霉，哈利必须在洗完后立即把所有床单挂起来，也就是说，所有床单必须同时挂上去。\n\n哈利想在周日尽快睡觉，因此他希望你帮忙确定在每一周 $j$ 中完成晾干所需的最短时间，或者告诉他该周无法完成晾干。", "inputFormat": "第一行包含两个整数 $N$ 和 $Q$，分别表示床单数量和直到旅游季结束的周数。  \n接下来的 $N$ 行中，每行包含三个整数 $d_i, t_i^{\\text{fast}}, t_i^{\\text{slow}}$，分别表示第 $i$ 条床单的宽度、较快的晾干时间和较慢的晾干时间。  \n最后的 $Q$ 行，每行包含一个整数 $L_j$，表示第 $j$ 周每根晾衣绳的长度。", "outputFormat": "输出 $Q$ 行，其中第 $j$ 行表示第 $j$ 周完成晾干所需的最短时间。如果无法在该周晾干所有床单，则输出 `-1`。\n", "hint": "### 输入限制\n\n- $1 \\leq N \\leq 3 \\cdot 10^4$\n- $1 \\leq Q \\leq 3 \\cdot 10^5$\n- 对所有 $1 \\leq i \\leq N$，有 $1 \\leq d_i \\leq 3 \\cdot 10^5$\n- 对所有 $1 \\leq i \\leq N$，有 $1 \\leq t_i^{\\text{fast}} \\leq t_i^{\\text{slow}} \\leq 10^9$\n- 对所有 $1 \\leq j \\leq Q$，有 $1 \\leq L_j \\leq 3 \\cdot 10^5$\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13849", "type": "P", "difficulty": 2, "samples": [["0 7 jan\n7 14 tomaz\n14 20 jure\n20 24 jan\n24 25 tomaz\n25 26 jure\n------\n0 9 tomaz\n9 20 jan\n20 26 jure\n======", "jure -1\ntomaz +1"], ["0 7 nino\n7 14 bgs\n14 21 ines\n------\n0 7 ines\n7 14 nino\n14 21 bgs\n======", "No differences found.\n"], ["0 3 vid\n3 6 maks\n6 9 janez\n------\n0 1 vid\n1 2 vid\n2 3 vid\n3 4 maks\n4 5 maks\n5 6 maks\n6 7 janez\n7 8 janez\n======", "janez -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "字符串", "2023", "ICPC", "CERC"], "title": "[CERC 2023] Equal Schedules", "background": "", "description": "You are one of the people on-call for a high-availability service that offers users to solve programming tasks. As an organized team, you have an on-call schedule specifying who is responsible for the service at which time. A colleague sends you a new schedule, and you want to make sure that everyone has the same amount of on-call time as before, or print any differences.\n\nThe on-call schedule is specified with lines of form $s_i \\ e_i \\ t_i$, where $s_i$ and $e_i$ represent the start and end offsets of the on-call shift for a teammate $t_i$ from some start hour.\n\nGiven a sample schedule\n\n```\n0 7 jan\n7 14 tomaz\n14 20 jure\n20 24 jan\n24 25 tomaz\n25 26 jure\n```\n\nwe can see that jan is on-call for the first $7$ hours (hour $0, 1, 2, 3, 4, 5$, and $6$), tomaz for next $7$, … In total, jan is on-call for $11$ hours, tomaz for $8$ and jure for $7$.", "inputFormat": "The input contains two schedules separated by a horizontal line `------`. Each schedule contains one or more lines of form $s_i \\ e_i \\ t_i$, where integers $s_i$ and $e_i$ specify that teammate $t_i$ is on-call for hours from $s_i$ up to and excluding $e_i$. A final line `======` is printed after the second schedule.", "outputFormat": "Output the differences between two schedules, in form $t_i \\ \\pm d_i$, where $d_i$ is the difference between the second and the first schedule for the teammate $t_i$. The output should be sorted alphabetically by teammates' names and teammates with no differences should be omitted, otherwise the difference should be printed with a + or a - sign. If no differences are found, print `No differences found.` (without the quotes).", "hint": "### Input limits\n\nFor each schedule, the following holds:\n\n- $s_1 = 0$\n- $s_i < e_i$\n- $s_{i+1} = e_i$\n- $e_i \\leq 1000$\n- Name $t_i$ will consist of lowercase letters from the English alphabet.\n- $3 \\leq |t_i| \\leq 20$", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Equal Schedules", "background": "", "description": "You are one of the people on-call for a high-availability service that offers users to solve programming tasks. As an organized team, you have an on-call schedule specifying who is responsible for the service at which time. A colleague sends you a new schedule, and you want to make sure that everyone has the same amount of on-call time as before, or print any differences.\n\nThe on-call schedule is specified with lines of form $s_i \\ e_i \\ t_i$, where $s_i$ and $e_i$ represent the start and end offsets of the on-call shift for a teammate $t_i$ from some start hour.\n\nGiven a sample schedule\n\n```\n0 7 jan\n7 14 tomaz\n14 20 jure\n20 24 jan\n24 25 tomaz\n25 26 jure\n```\n\nwe can see that jan is on-call for the first $7$ hours (hour $0, 1, 2, 3, 4, 5$, and $6$), tomaz for next $7$, … In total, jan is on-call for $11$ hours, tomaz for $8$ and jure for $7$.", "inputFormat": "The input contains two schedules separated by a horizontal line `------`. Each schedule contains one or more lines of form $s_i \\ e_i \\ t_i$, where integers $s_i$ and $e_i$ specify that teammate $t_i$ is on-call for hours from $s_i$ up to and excluding $e_i$. A final line `======` is printed after the second schedule.", "outputFormat": "Output the differences between two schedules, in form $t_i \\ \\pm d_i$, where $d_i$ is the difference between the second and the first schedule for the teammate $t_i$. The output should be sorted alphabetically by teammates' names and teammates with no differences should be omitted, otherwise the difference should be printed with a + or a - sign. If no differences are found, print `No differences found.` (without the quotes).", "hint": "### Input limits\n\nFor each schedule, the following holds:\n\n- $s_1 = 0$\n- $s_i < e_i$\n- $s_{i+1} = e_i$\n- $e_i \\leq 1000$\n- Name $t_i$ will consist of lowercase letters from the English alphabet.\n- $3 \\leq |t_i| \\leq 20$", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Equal Schedules", "background": "", "description": "你是某个高可用服务的值班人员之一，该服务为用户提供编程题目求解。作为一个组织良好的团队，你们有一份值班表，明确规定了谁在什么时间负责该服务。现在一位同事给你发送了一份新的值班表，你想确认每个人的值班时长是否与之前相同，或者输出任何差异。\n\n值班表由若干行组成，每行格式为 $s_i \\ e_i \\ t_i$，其中 $s_i$ 和 $e_i$ 表示队员 $t_i$ 的值班起止时间（从某个起始小时算起，左闭右开区间）。\n\n例如，给定一份样例排班表：\n\n```\n0 7 jan\n7 14 tomaz\n14 20 jure\n20 24 jan\n24 25 tomaz\n25 26 jure\n```\n\n我们可以看到，jan 在最初的 $7$ 小时（小时 $0, 1, 2, 3, 4, 5, 6$）值班，接下来 tomaz 值班 $7$ 小时，……最终统计：jan 总共值班 $11$ 小时，tomaz 值班 $8$ 小时，jure 值班 $7$ 小时。\n", "inputFormat": "输入包含两份排班表，中间由一行水平分隔线 `------` 分隔。  \n每份排班表包含一行或多行，格式为 $s_i \\ e_i \\ t_i$，其中整数 $s_i, e_i$ 表示队员 $t_i$ 在从 $s_i$ 小时开始直到 $e_i$ 小时（不包含 $e_i$）之间值班。  \n在第二份排班表之后，有一行 `======` 作为输入结束。", "outputFormat": "输出两份排班表的差异，格式为 $t_i \\ \\pm d_i$，其中 $d_i$ 表示队员 $t_i$ 在第二份排班表和第一份排班表之间的时长差异。  \n输出按照队员名字的字母顺序排列；若某位队员的时长没有变化，则不输出该队员。差异必须带有正负号。  \n如果没有任何差异，则输出一行：`No differences found.`。", "hint": "### 输入限制\n\n对于每份排班表，满足以下条件：\n\n- $s_1 = 0$\n- $s_i < e_i$\n- $s_{i+1} = e_i$\n- $e_i \\leq 1000$\n- 名字 $t_i$ 仅包含英文小写字母\n- $3 \\leq |t_i| \\leq 20$\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13850", "type": "P", "difficulty": 7, "samples": [["8 12 3\n2 5\n3 6\n2 6\n5 4\n4 1\n1 6\n7 5\n2 7\n3 4\n2 8\n7 8\n1 8", "24"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "ICPC", "CERC"], "title": "[CERC 2023] Phylogenetics", "background": "", "description": "A young biologist is studying evolutionary history and has come across phylogenetic trees. A phylogenetic tree shows evolutionary relationships among various biological species. It is presented in a planar embedding with its leaves arranged in a circular manner for a better visual presentation. We are dealing with an unrooted tree, where the leaves are nodes of degree 1. All nodes of the tree are colored, which makes distinguishing different species easier.\n\nOur biologist is using graph visualization software which needs some help to produce a desired layout. Therefore, she has decided to add edges between adjacent leaves in the planar embedding. The tree has at least 3 leaves, which she connects in a cycle. The illustration below shows an example of such (uncolored) tree with additional edges between adjacent leaves indicated by dashed lines.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/6psd85ey.png)\n:::align\n\nNow that the visualization is done, she is interested in the number of ways to color the nodes of this graph with $K$ colors. Every pair of adjacent nodes should have a different color for easier visual recognition. Write a program that will read the description of her graph structure and compute the number of colorings.", "inputFormat": "The first line contains integers $N$, $M$ and $K$. The edges of the graph are given in the following $M$ lines as pairs of endpoints $A_i$ and $B_i$ (the nodes of the graph are numbered from 1 to $N$). All integers in the same line are separated by a space.\n\nIt is guaranteed that the graph was obtained from a planar embedding of a tree (acyclic connected undirected graph) by also connecting its leaves in a circular manner. The graph will not contain loops or parallel edges (i.e. multiple edges between the same pair of nodes).\n", "outputFormat": "Output the number of colorings modulo $1\\ 000\\ 000\\ 007$.", "hint": "### Input limits\n\n- $4 \\leq N \\leq 10^5$\n- $1 \\leq K \\leq 10^5$", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Phylogenetics", "background": "", "description": "A young biologist is studying evolutionary history and has come across phylogenetic trees. A phylogenetic tree shows evolutionary relationships among various biological species. It is presented in a planar embedding with its leaves arranged in a circular manner for a better visual presentation. We are dealing with an unrooted tree, where the leaves are nodes of degree 1. All nodes of the tree are colored, which makes distinguishing different species easier.\n\nOur biologist is using graph visualization software which needs some help to produce a desired layout. Therefore, she has decided to add edges between adjacent leaves in the planar embedding. The tree has at least 3 leaves, which she connects in a cycle. The illustration below shows an example of such (uncolored) tree with additional edges between adjacent leaves indicated by dashed lines.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/6psd85ey.png)\n:::align\n\nNow that the visualization is done, she is interested in the number of ways to color the nodes of this graph with $K$ colors. Every pair of adjacent nodes should have a different color for easier visual recognition. Write a program that will read the description of her graph structure and compute the number of colorings.", "inputFormat": "The first line contains integers $N$, $M$ and $K$. The edges of the graph are given in the following $M$ lines as pairs of endpoints $A_i$ and $B_i$ (the nodes of the graph are numbered from 1 to $N$). All integers in the same line are separated by a space.\n\nIt is guaranteed that the graph was obtained from a planar embedding of a tree (acyclic connected undirected graph) by also connecting its leaves in a circular manner. The graph will not contain loops or parallel edges (i.e. multiple edges between the same pair of nodes).\n", "outputFormat": "Output the number of colorings modulo $1\\ 000\\ 000\\ 007$.", "hint": "### Input limits\n\n- $4 \\leq N \\leq 10^5$\n- $1 \\leq K \\leq 10^5$", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Phylogenetics", "background": "", "description": "一名年轻的生物学家正在研究进化史，她遇到了系统发育树。系统发育树展示了不同生物物种之间的进化关系。为了更好的可视化展示，系统发育树以平面嵌入的形式呈现，其叶子结点排列在圆周上。我们处理的是一棵无根树，其中叶子结点的度数为 1。树中的所有结点都被染上颜色，以便于区分不同的物种。\n\n这位生物学家正在使用图形可视化软件，但软件需要一些辅助才能生成理想的布局。因此，她决定在平面嵌入中相邻的叶子之间添加边。树至少有 3 个叶子，她将这些叶子连接成一个环。下图展示了这样一棵示例（未染色的）树，虚线部分表示在相邻叶子之间额外添加的边。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/6psd85ey.png)\n:::align\n\n现在，布局完成后，她想知道有多少种方式可以用 $K$ 种颜色为该图的结点染色。为了便于区分，每一对相邻的结点必须染成不同的颜色。请编写程序，读取该图的结构描述并计算合法染色的数量。\n", "inputFormat": "第一行包含三个整数 $N, M, K$。  \n接下来的 $M$ 行中，每行包含一对整数 $A_i, B_i$，表示一条边的两个端点（结点编号为 $1 \\sim N$）。同一行中的整数以空格分隔。\n\n保证该图由一棵树（无环、连通、无向图）的平面嵌入出发，再在其叶子之间按圆周顺序添加边得到。图中不会出现自环或重边（即同一对结点之间不会有多条边）。\n", "outputFormat": "输出一个整数，表示合法染色方案的数量，对 $1\\ 000\\ 000\\ 007$ 取模。\n", "hint": "### 输入限制\n\n- $4 \\leq N \\leq 10^5$\n- $1 \\leq K \\leq 10^5$\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13851", "type": "P", "difficulty": 4, "samples": [["2\n0 0 2 0 -1 2 1\n5 0 3 0 2 0 2", "3.9451754612261913\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2023", "三分", "Special Judge", "ICPC", "CERC"], "title": "[CERC 2023] Going to the Moon", "background": "", "description": "Alice and Bob are playing a game in the sand outside their mansion. A circle representing the Moon is drawn somewhere, and they each also pick a place to stand (inside, on the edge, or outside the Moon). The goal of the game is that one of the players runs to the other as fast as possible, while also touching the Moon during the run.\n\nGiven the positions of the Moon, Alice, and Bob, find the length of the shortest path that starts at one of the players, touches (or crosses) the edge or the interior of the Moon, and ends at the position of the other player.\n", "inputFormat": "The first line contains an integer $T$, the number of test cases. It’s followed by $T$ lines, each containing 7 space-separated integers $x_A$, $y_A$, $x_B$, $y_B$, $x_C$, $y_C$, $r$, representing coordinates of Alice, $A = (x_A, y_A)$, Bob, $B = (x_B, y_B)$, the center of the circle, $C = (x_C, y_C)$, and its radius $r$.\n", "outputFormat": "For each test case output a single decimal number representing the length of the shortest path from $A$ to $B$ that also touches at least one point inside or on the edge of a circle with the center $C$ and radius $r$. The solution will be considered correct if the relative or absolute error compared to the official solution is within $10^{-6}$.\n", "hint": "### Comment\n\nThe solution for the first test case is shown in the picture.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnv9of0l.png)\n:::align\n\n### Input limits\n\n- $1 \\leq T \\leq 10^3$\n- $-10^3 \\leq x_A, y_A, x_B, y_B, x_C, y_C \\leq 10^3$\n- $0 \\leq r \\leq 10^3$", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Going to the Moon", "background": "", "description": "Alice and Bob are playing a game in the sand outside their mansion. A circle representing the Moon is drawn somewhere, and they each also pick a place to stand (inside, on the edge, or outside the Moon). The goal of the game is that one of the players runs to the other as fast as possible, while also touching the Moon during the run.\n\nGiven the positions of the Moon, Alice, and Bob, find the length of the shortest path that starts at one of the players, touches (or crosses) the edge or the interior of the Moon, and ends at the position of the other player.\n", "inputFormat": "The first line contains an integer $T$, the number of test cases. It’s followed by $T$ lines, each containing 7 space-separated integers $x_A$, $y_A$, $x_B$, $y_B$, $x_C$, $y_C$, $r$, representing coordinates of Alice, $A = (x_A, y_A)$, Bob, $B = (x_B, y_B)$, the center of the circle, $C = (x_C, y_C)$, and its radius $r$.\n", "outputFormat": "For each test case output a single decimal number representing the length of the shortest path from $A$ to $B$ that also touches at least one point inside or on the edge of a circle with the center $C$ and radius $r$. The solution will be considered correct if the relative or absolute error compared to the official solution is within $10^{-6}$.\n", "hint": "### Comment\n\nThe solution for the first test case is shown in the picture.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnv9of0l.png)\n:::align\n\n### Input limits\n\n- $1 \\leq T \\leq 10^3$\n- $-10^3 \\leq x_A, y_A, x_B, y_B, x_C, y_C \\leq 10^3$\n- $0 \\leq r \\leq 10^3$", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Going to the Moon", "background": "", "description": "爱丽丝和鲍勃正在他们豪宅外的沙地里玩一个游戏。地上画了一个圆，代表月亮，他们各自选择一个位置站立（可以在月亮内部、边界上或外部）。游戏的目标是：其中一名玩家尽可能快地跑向另一名玩家，但在途中必须触碰到月亮。\n\n给定月亮、爱丽丝和鲍勃的位置，求从一名玩家出发，途中至少触碰（或穿过）月亮的边界或内部，并最终到达另一名玩家位置的最短路径长度。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的数量。  \n接下来 $T$ 行中，每行包含 7 个用空格分隔的整数 $x_A, y_A, x_B, y_B, x_C, y_C, r$，分别表示爱丽丝的位置 $A = (x_A, y_A)$，鲍勃的位置 $B = (x_B, y_B)$，圆心 $C = (x_C, y_C)$ 以及半径 $r$。\n", "outputFormat": "对于每个测试用例，输出一个实数，表示从 $A$ 到 $B$ 的最短路径长度，并且该路径至少触碰到圆 $C$（半径 $r$）的内部或边界。  \n当输出结果与标准答案的相对或绝对误差不超过 $10^{-6}$ 时，视为正确。\n", "hint": "### 注释\n\n下图展示了第一个测试用例的最优解路径：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnv9of0l.png)\n:::align\n\n### 输入限制\n\n- $1 \\leq T \\leq 10^3$\n- $-10^3 \\leq x_A, y_A, x_B, y_B, x_C, y_C \\leq 10^3$\n- $0 \\leq r \\leq 10^3$\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13852", "type": "P", "difficulty": 0, "samples": [["ENCODE\nJanez: Josip Zofia\nZofia: Karolina", "Josip\nKarolina\nJanez\nZofia\n00101100"], ["DECODE\nJosip\nKarolina\nJanez\nZofia\n00101100", "Janez: Josip Zofia\nZofia: Karolina"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "ICPC", "通信题", "CERC"], "title": "[CERC 2023] Human Resources [Can't Judge Yet]", "background": "", "description": "You work at ECorp and your Human Resources department is migrating employee data from an on-premise system provided by Hooli to a new Cloud Native solution provided by a fresh startup Pied Piper. Sadly the new system does not yet have feature parity with the old one and they need your help to store and display the entire management structure. The system is lean and conscious of resource usage so they can only afford to increase their storage by two kilobits.\n", "inputFormat": "The first line of the input will be a command to execute either ENCODE or DECODE.\n\n### Encode\n\nYou will receive lines describing managers and their direct reports/subordinates. All lines will start with the name of the manager, followed by a colon, followed by a space-separated list of their direct reports ordered from their most to least favorite. Colons have a trailing space. No manager is listed before their manager, if they have one.\n\n### Decode\n\nIn the decode case you will be given the output that your program printed in the encode case: a list of all employee names in an arbitrary order, one per line, followed by a single line with a binary string $B$.", "outputFormat": "### Encode\n\nYour program must first output the names of all the employees, one per line in an arbitrary order (this was a requirement from upper management). One additional line is dedicated for your encoding string $B$ which must consist of ones and zeros and not exceed 2048 characters.\n\n### Decode\n\nOutput the original structure in the same format as it was originally given. The order of manager definitions does not have to be the same, but every one must come after their manager if they have one. However, the order of reports for any specific manager has to remain the same (from their most to least favorite).", "hint": "### Comment\n\nThe encoding in the example above uses two consecutive characters for every person as they are ordered in the list. $11$ denotes the CEO (Janez). $00$ denotes a person at the second level of hierarchy. Their order in the CEO's list of direct reports is the same as in the encoded list of names (Josip and Zofia). Luckily, there are just two in this case. $10$ denotes Zofia's report and $01$ would denote Josip's reports, which he does not have.\n\n\n### Input limits\n\n- $2 \\leq \\text{number of all employees at EC} \\leq 600$\n- $|B| \\leq 2048$\n- Employee names are at most 10 characters long and consist of upper and lower case letters of the English alphabet.\n- There is exactly one employee without a manager (the company CEO) and no employee has more than one manager.\n", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Human Resources [Can't Judge Yet]", "background": "", "description": "You work at ECorp and your Human Resources department is migrating employee data from an on-premise system provided by Hooli to a new Cloud Native solution provided by a fresh startup Pied Piper. Sadly the new system does not yet have feature parity with the old one and they need your help to store and display the entire management structure. The system is lean and conscious of resource usage so they can only afford to increase their storage by two kilobits.\n", "inputFormat": "The first line of the input will be a command to execute either ENCODE or DECODE.\n\n### Encode\n\nYou will receive lines describing managers and their direct reports/subordinates. All lines will start with the name of the manager, followed by a colon, followed by a space-separated list of their direct reports ordered from their most to least favorite. Colons have a trailing space. No manager is listed before their manager, if they have one.\n\n### Decode\n\nIn the decode case you will be given the output that your program printed in the encode case: a list of all employee names in an arbitrary order, one per line, followed by a single line with a binary string $B$.", "outputFormat": "### Encode\n\nYour program must first output the names of all the employees, one per line in an arbitrary order (this was a requirement from upper management). One additional line is dedicated for your encoding string $B$ which must consist of ones and zeros and not exceed 2048 characters.\n\n### Decode\n\nOutput the original structure in the same format as it was originally given. The order of manager definitions does not have to be the same, but every one must come after their manager if they have one. However, the order of reports for any specific manager has to remain the same (from their most to least favorite).", "hint": "### Comment\n\nThe encoding in the example above uses two consecutive characters for every person as they are ordered in the list. $11$ denotes the CEO (Janez). $00$ denotes a person at the second level of hierarchy. Their order in the CEO's list of direct reports is the same as in the encoded list of names (Josip and Zofia). Luckily, there are just two in this case. $10$ denotes Zofia's report and $01$ would denote Josip's reports, which he does not have.\n\n\n### Input limits\n\n- $2 \\leq \\text{number of all employees at EC} \\leq 600$\n- $|B| \\leq 2048$\n- Employee names are at most 10 characters long and consist of upper and lower case letters of the English alphabet.\n- There is exactly one employee without a manager (the company CEO) and no employee has more than one manager.\n", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Human Resources [Can't Judge Yet]", "background": "", "description": "你在 ECorp 工作，你们的人力资源部门正在将员工数据从 Hooli 提供的本地系统迁移到由一家新创公司 Pied Piper 提供的云原生解决方案。不幸的是，新系统尚未具备与旧系统相同的功能，他们需要你的帮助来存储和展示整个管理结构。由于新系统非常精简并注重资源使用，因此他们只能将存储空间增加两千比特。", "inputFormat": "输入的第一行是要执行的命令：`ENCODE` 或 `DECODE`。\n\n### Encode\n\n你将会收到若干行，描述经理及其直接下属。每一行都以经理的名字开始，后面跟一个冒号，再后面是一个用空格分隔的直接下属名单，按从最喜欢到最不喜欢的顺序排列。冒号后会紧跟一个空格。如果某人有上级经理，那么在输入中不会在上级经理之前列出他。\n\n### Decode\n\n在解码的情况下，你将会得到程序在编码阶段的输出：即所有员工名字的列表（顺序任意，每行一个名字），然后是一行二进制字符串 $B$。\n", "outputFormat": "### Encode\n\n程序必须首先输出所有员工的名字，每行一个，顺序任意（这是高层管理的要求）。然后额外输出一行编码字符串 $B$，该字符串只能由 `0` 和 `1` 组成，长度不得超过 2048 个字符。\n\n### Decode\n\n程序必须输出原始的管理结构，格式与输入时相同。经理的定义顺序不必与原始输入完全一致，但如果某人有上级经理，则必须在上级经理之后出现。然而，对于任意一个经理，其下属的顺序必须保持不变（从最喜欢到最不喜欢）。\n", "hint": "### 注释\n\n在上面的例子中，编码使用了连续两个字符来表示名单中的每个人。  \n`11` 表示 CEO（Janez）。  \n`00` 表示层级为第二层的员工。在 CEO 的直接下属列表中，他们的顺序与编码时的名字列表顺序一致（Josip 和 Zofia），此处刚好有两人。  \n`10` 表示 Zofia 的下属，而 `01` 则表示 Josip 的下属，但 Josip 实际上没有下属。\n\n### 输入限制\n\n- $2 \\leq \\text{ECorp 的员工总数} \\leq 600$\n- $|B| \\leq 2048$\n- 员工名字最长 10 个字符，仅由英文字母的大小写组成。\n- 恰好有一名没有经理的员工（公司 CEO），且任何员工都不会有超过一名经理。\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13853", "type": "P", "difficulty": 6, "samples": [["5\n\n0 0 1 2 0\n\n1 1 0 0 1\n\n0 0 0 1 0", "\nQUERY 10001\n\nQUERY 00010\n\nQUERY 10000\n\nANSWER\n1 4\n4 2\n5 4\n3 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "交互题", "Special Judge", "位运算", "构造", "ICPC", "CERC"], "title": "[CERC 2023] Interactive Reconstruction[Can't judge yet]", "background": "", "description": "This is an interactive task where your program will communicate with a grader through standard input and output. Your task is to reconstruct a labelled tree with $N$ nodes and $N-1$ edges. Nodes are labelled from $1$ to $N$.\n\nYour program is allowed to make a few queries of the following type: Your program should print a string of $N$ characters, consisting only of zeros and ones, one corresponding to each node. The grader will return a sequence of $N$ space-separated integers, the $i$-th representing the sum of the values (i.e. digits of the query string) of all neighbours of the $i$-th node. That is, if node $j$ is a neighbour of node $i$, then the $j$-th digit of the query string counts towards the sum in the $i$-th number of the grader’s answer.\n\nSee the example below for an illustration.\n\n### Input and output data\n\nThe first input line will contain the number $N$, the number of nodes in the tree.\n\nYour program then has two options:\n\n1. Print \"QUERY\" (without quotation marks), a space, and a string of $N$ zeros and ones.\n2. Print \"ANSWER\" (without quotation marks), a newline, and $N-1$ lines, each containing a pair of space-separated integers $a, b$, indicating that there exists an edge between nodes $a$ and $b$.\n\nIf your program prints a query, this will be followed by the grader returning a line with $N$ space-separated integers, one per node. If your program prints an answer, the grader will check the returned tree for correctness.\n\nIf there was a mistake in your queries, either due to incorrect formatting or due to an exceeded number of queries, the grader will print “ERROR” (no quotation marks) instead of the answer.\n\nImportant: Ensure that your program flushes its output after printing and correctly exits after printing the answer. It is up to you whether to implement the ERROR handling. Its purpose is to allow your program to exit gracefully and get a WA instead of a TLE verdict in the case of an error.\n\n### Input limits\n\n- $2 \\leq N \\leq 3 \\cdot 10^{4}$\n- At most $2 \\uparrow \\uparrow 3 = 2^{(2^{2})} = 16$ queries are allowed. The final answer does not count toward this restriction.", "inputFormat": "", "outputFormat": "", "hint": "### Comment\n\nThe tree in question is the following one:\n\n```\n1-4-2\n  |\n  5-3\n```\n\nWith the three queries in the example, it is possible to reconstruct it uniquely.", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Interactive Reconstruction[Can't judge yet]", "background": "", "description": "This is an interactive task where your program will communicate with a grader through standard input and output. Your task is to reconstruct a labelled tree with $N$ nodes and $N-1$ edges. Nodes are labelled from $1$ to $N$.\n\nYour program is allowed to make a few queries of the following type: Your program should print a string of $N$ characters, consisting only of zeros and ones, one corresponding to each node. The grader will return a sequence of $N$ space-separated integers, the $i$-th representing the sum of the values (i.e. digits of the query string) of all neighbours of the $i$-th node. That is, if node $j$ is a neighbour of node $i$, then the $j$-th digit of the query string counts towards the sum in the $i$-th number of the grader’s answer.\n\nSee the example below for an illustration.\n\n### Input and output data\n\nThe first input line will contain the number $N$, the number of nodes in the tree.\n\nYour program then has two options:\n\n1. Print \"QUERY\" (without quotation marks), a space, and a string of $N$ zeros and ones.\n2. Print \"ANSWER\" (without quotation marks), a newline, and $N-1$ lines, each containing a pair of space-separated integers $a, b$, indicating that there exists an edge between nodes $a$ and $b$.\n\nIf your program prints a query, this will be followed by the grader returning a line with $N$ space-separated integers, one per node. If your program prints an answer, the grader will check the returned tree for correctness.\n\nIf there was a mistake in your queries, either due to incorrect formatting or due to an exceeded number of queries, the grader will print “ERROR” (no quotation marks) instead of the answer.\n\nImportant: Ensure that your program flushes its output after printing and correctly exits after printing the answer. It is up to you whether to implement the ERROR handling. Its purpose is to allow your program to exit gracefully and get a WA instead of a TLE verdict in the case of an error.\n\n### Input limits\n\n- $2 \\leq N \\leq 3 \\cdot 10^{4}$\n- At most $2 \\uparrow \\uparrow 3 = 2^{(2^{2})} = 16$ queries are allowed. The final answer does not count toward this restriction.", "inputFormat": "", "outputFormat": "", "hint": "### Comment\n\nThe tree in question is the following one:\n\n```\n1-4-2\n  |\n  5-3\n```\n\nWith the three queries in the example, it is possible to reconstruct it uniquely.", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Interactive Reconstruction[Can't judge yet]", "background": "", "description": "这是一个交互式任务，你的程序需要通过标准输入输出与评测机进行交互。你的任务是重建一棵带标号的树，这棵树有 $N$ 个结点和 $N-1$ 条边。结点的编号为 $1 \\sim N$。\n\n你的程序可以进行若干次如下形式的查询：  \n程序应当输出一个长度为 $N$ 的字符串，该字符串仅由 `0` 和 `1` 组成，每个字符对应一个结点。评测机将返回一个由 $N$ 个用空格分隔的整数组成的序列，其中第 $i$ 个整数表示与结点 $i$ 相邻的所有结点在查询字符串中的值（即该字符串的数字）的总和。换句话说，如果结点 $j$ 是结点 $i$ 的邻居，则查询字符串的第 $j$ 位会被计入评测机对结点 $i$ 的返回值。\n\n下例展示了具体交互方式。\n\n### 输入与输出数据\n\n输入的第一行包含一个整数 $N$，表示树的结点数。\n\n之后你的程序有两种选择：\n\n1. 输出 `QUERY`，接一个空格，再接一个长度为 $N$ 的 `0/1` 字符串。  \n2. 输出 `ANSWER`，换行，然后输出 $N-1$ 行，每行包含两个用空格分隔的整数 $a, b$，表示结点 $a$ 和结点 $b$ 之间有一条边。\n\n如果程序输出查询，评测机会返回一行包含 $N$ 个用空格分隔的整数，每个整数对应一个结点的返回值。  \n如果程序输出答案，评测机会检查返回的树是否正确。\n\n如果查询出现错误，比如格式不正确或超过了允许的查询次数，评测机会输出 `ERROR` 而不是答案。\n\n**重要提示**：确保程序在输出后刷新缓冲，并在输出最终答案后正确退出。是否实现 `ERROR` 的处理逻辑由你决定，其目的是允许程序优雅退出并得到 WA，而不是在错误时因超时得到 TLE。\n\n### 输入限制\n\n- $2 \\leq N \\leq 3 \\cdot 10^{4}$\n- 最多允许 $2 \\uparrow \\uparrow 3 = 2^{(2^{2})} = 16$ 次查询。最终输出答案不计入此限制。\n", "inputFormat": "", "outputFormat": "", "hint": "题目中的树结构如下：\n\n```\n1-4-2\n  |\n  5-3\n```\n\n通过样例中的三次查询，可以唯一地重建这棵树。\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
{"pid": "P13854", "type": "P", "difficulty": 5, "samples": [["6 3\n4 2 3 0 0\n3 4 1 6\n3 5 0 0", "2 3\n2 3\n1 2\n1 2\n3 1\n2 1\n2 1\n3 2\n3 1\n2 3\n1 3\n2 1\n3 2\n3 2\n0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "Special Judge", "构造", "ICPC", "CERC"], "title": "[CERC 2023] Jumbled Stacks", "background": "", "description": "We are given a set of $n$ cards, labelled from $1$ to $n$, which are distributed into $k$ stacks $S_1, S_2, \\ldots, S_k$. Each stack has a limited capacity: the $i$-th stack, $S_i$, can contain at most $C_i$ cards. The only way we can manipulate these cards is by taking the top card of a stack and moving it to the top of some other stack (as long as this wouldn’t exceed the capacity of the destination stack).\n\nUsing a sequence of such moves, we would like to rearrange the cards so that the first few stacks (0 or more) with the smallest indices are filled to capacity, the stack immediately after them is not filled to capacity (and may even be empty) and all stacks after that are completely empty. Moreover, if we stack together all the stacks from $S_1$ at the bottom to $S_k$ at the top, the cards should be ordered from smallest to largest, with $1$ at the bottom and $n$ at the top.\n\nIt is guaranteed that $n \\leq \\left( \\sum_{i=1}^{k} C_i \\right) - \\max_{1 \\leq i \\leq k} C_i$.\n\nSuppose we had $n = 6$ cards on $k = 3$ stacks, with capacities $C_1 = 4$, $C_2 = C_3 = 3$, and with the following initial state: $S_1 = [2, 3, 0, 0]$ (from bottom to top; $0$ indicates an empty slot), $S_2 = [4, 1, 6]$, $S_3 = [5, 0, 0]$. Then the desired end state is $S_1 = [1, 2, 3, 4]$, $S_2 = [5, 6, 0]$ and $S_3 = [0, 0, 0]$.\n", "inputFormat": "The first line contains two integers, $n$ (the number of cards) and $k$ (the number of stacks), separated by a space. The remaining $k$ lines describe the initial state of the stacks; the $i$-th of these lines describes $S_i$ and contains $C_i + 1$ integers, separated by spaces. The first of these integers is $C_i$ (the capacity of the stack $S_i$), the rest of them are the labels of the cards on $S_i$, from bottom to top. If the stack $S_i$ contains fewer than $C_i$ cards (it could even be empty), the last few integers in the line will be $0$.\n", "outputFormat": "Print a sequence of moves that bring the stacks into the desired end state. For each move, output a line containing two integers, separated by a space: first the number of the stack from which the card is being moved and then the number of the stack to which it is being moved (the stacks are numbered from $1$ to $k$; the destination stack must not be the same as the source stack). The number of moves must not exceed $10^5$. After the end of the sequence of moves, print a line containing “0 0” (without the quotation marks). If there are several possible solutions, you may output any of them.", "hint": "### Comment\n\nThis is the example discussed earlier in the problem statement. The sample output shows\na sequence of 14 moves which bring the stacks into the desired end state.\n\n### Input limits\n\n- $1 \\leq n \\leq 100$\n- $3 \\leq k \\leq 100$\n- $1 \\leq C_i \\leq n$", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Jumbled Stacks", "background": "", "description": "We are given a set of $n$ cards, labelled from $1$ to $n$, which are distributed into $k$ stacks $S_1, S_2, \\ldots, S_k$. Each stack has a limited capacity: the $i$-th stack, $S_i$, can contain at most $C_i$ cards. The only way we can manipulate these cards is by taking the top card of a stack and moving it to the top of some other stack (as long as this wouldn’t exceed the capacity of the destination stack).\n\nUsing a sequence of such moves, we would like to rearrange the cards so that the first few stacks (0 or more) with the smallest indices are filled to capacity, the stack immediately after them is not filled to capacity (and may even be empty) and all stacks after that are completely empty. Moreover, if we stack together all the stacks from $S_1$ at the bottom to $S_k$ at the top, the cards should be ordered from smallest to largest, with $1$ at the bottom and $n$ at the top.\n\nIt is guaranteed that $n \\leq \\left( \\sum_{i=1}^{k} C_i \\right) - \\max_{1 \\leq i \\leq k} C_i$.\n\nSuppose we had $n = 6$ cards on $k = 3$ stacks, with capacities $C_1 = 4$, $C_2 = C_3 = 3$, and with the following initial state: $S_1 = [2, 3, 0, 0]$ (from bottom to top; $0$ indicates an empty slot), $S_2 = [4, 1, 6]$, $S_3 = [5, 0, 0]$. Then the desired end state is $S_1 = [1, 2, 3, 4]$, $S_2 = [5, 6, 0]$ and $S_3 = [0, 0, 0]$.\n", "inputFormat": "The first line contains two integers, $n$ (the number of cards) and $k$ (the number of stacks), separated by a space. The remaining $k$ lines describe the initial state of the stacks; the $i$-th of these lines describes $S_i$ and contains $C_i + 1$ integers, separated by spaces. The first of these integers is $C_i$ (the capacity of the stack $S_i$), the rest of them are the labels of the cards on $S_i$, from bottom to top. If the stack $S_i$ contains fewer than $C_i$ cards (it could even be empty), the last few integers in the line will be $0$.\n", "outputFormat": "Print a sequence of moves that bring the stacks into the desired end state. For each move, output a line containing two integers, separated by a space: first the number of the stack from which the card is being moved and then the number of the stack to which it is being moved (the stacks are numbered from $1$ to $k$; the destination stack must not be the same as the source stack). The number of moves must not exceed $10^5$. After the end of the sequence of moves, print a line containing “0 0” (without the quotation marks). If there are several possible solutions, you may output any of them.", "hint": "### Comment\n\nThis is the example discussed earlier in the problem statement. The sample output shows\na sequence of 14 moves which bring the stacks into the desired end state.\n\n### Input limits\n\n- $1 \\leq n \\leq 100$\n- $3 \\leq k \\leq 100$\n- $1 \\leq C_i \\leq n$", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Jumbled Stacks", "background": "", "description": "我们有一组 $n$ 张卡片，标号从 $1$ 到 $n$，它们被分配到 $k$ 个牌堆中，记为 $S_1, S_2, \\ldots, S_k$。每个牌堆都有容量限制：第 $i$ 个牌堆 $S_i$ 最多能容纳 $C_i$ 张卡片。我们唯一可以进行的操作是：从某个牌堆的顶部取出一张卡片，将其移动到 **另一个** 牌堆的顶部（前提是不会超过目标牌堆的容量）。\n\n通过若干次这样的操作，我们希望将卡片重新排列，使得满足以下条件：\n\n1. 从 $S_1$ 开始的若干个牌堆（可能是 $0$ 个或更多）被完全填满；\n2. 紧接着的下一个牌堆未被填满（甚至可能为空）；\n3. 后面的所有牌堆完全为空；\n4. 如果我们把所有牌堆依次从 $S_1$ 在底部到 $S_k$ 在顶部依次堆叠起来，卡片应当从下到上严格升序排列，即 $1$ 在最底部，$n$ 在最顶部。\n\n题目保证以下条件成立：\n\n$$\nn \\leq \\left( \\sum_{i=1}^{k} C_i \\right) - \\max_{1 \\leq i \\leq k} C_i\n$$\n\n例如，假设我们有 $n = 6$ 张卡片，$k = 3$ 个牌堆，且容量分别为 $C_1 = 4$, $C_2 = C_3 = 3$。初始状态如下（牌堆从底到顶给出，$0$ 表示该位置为空）：\n\n- $S_1 = [2, 3, 0, 0]$\n- $S_2 = [4, 1, 6]$\n- $S_3 = [5, 0, 0]$\n\n那么目标状态是：\n\n- $S_1 = [1, 2, 3, 4]$\n- $S_2 = [5, 6, 0]$\n- $S_3 = [0, 0, 0]$", "inputFormat": "第一行包含两个整数 $n$ 和 $k$，分别表示卡片的数量和牌堆的数量。\n\n接下来的 $k$ 行描述初始状态：第 $i$ 行描述第 $i$ 个牌堆 $S_i$，包含 $C_i + 1$ 个整数：\n\n- 第一个整数为 $C_i$，表示牌堆容量；\n- 随后的 $C_i$ 个整数为牌堆中卡片的编号，从底部到顶部依次给出；\n- 如果该牌堆中的卡片数少于 $C_i$，则最后几个数用 $0$ 表示。", "outputFormat": "输出一系列操作，每行两个整数 $a, b$，表示将一张卡片从牌堆 $S_a$ 的顶部移动到牌堆 $S_b$ 的顶部（$1 \\leq a, b \\leq k$ 且 $a \\neq b$）。  \n操作总数不能超过 $10^5$。\n\n在所有操作结束后，输出一行：`0 0`。如果有多种可能的解法，可以输出任意一种。", "hint": "### 注释\n\n这是题面中给出的示例。上面的输出展示了 14 次移动操作，使牌堆达到期望状态。\n\n### 输入限制\n\n- $1 \\leq n \\leq 100$\n- $3 \\leq k \\leq 100$\n- $1 \\leq C_i \\leq n$\n", "locale": "zh-CN"}}}
{"pid": "P13855", "type": "P", "difficulty": 5, "samples": [["5 5\n0 1\n1 2\n2 3\n3 4\n4 1", "0 1 2\n3 4\nMOVE 1\nMOVE 2\nMOVE 3\nDROP 0\nMOVE 2\nMOVE 1\nDONE\nMOVE 4\nMOVE 3\nGRAB\nMOVE 4\nMOVE 1\nMOVE 0\nDONE"], ["3 2\n0 2\n1 2", "No solution"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "Special Judge", "ICPC", "CERC"], "title": "[CERC 2023] Keys", "background": "", "description": "Alice and Bob live in a massive mansion with $n$ rooms (one of them denoting outdoors, where they play the Moon game) and $m$ doors between them. Each door connects two rooms or a room with the outdoors and has a single unique key that opens this door only. Every door closes behind you and locks automatically, so one always needs a key to pass through. The building is very large, but Alice and Bob only use one room – their bedroom. Other rooms are only there to make the house look bigger and make the neighbors jealous.\n\nThis unusual way of building their house is now causing some trouble for Alice and Bob. Bob is leaving for a two-week-long trip. In a week, Alice is also going abroad for a month and when she leaves, she needs the right keys to leave the house. However, Bob also needs keys to get back in since Alice will not be there at the time to let him in. Alice and Bob are now trying to figure out how to split the keys to the doors for Alice to be able to get from room $0$ (their bedroom) to $1$ (outdoors) and Bob to go from room $1$ (outdoors) to $0$ (bedroom) one week later.\n\nFortunately, Alice remembered that she could drop some of the keys on her way out for Bob to pick up on his way back. This way, they can both pass through the same doors. She, of course, cannot drop any keys in room $1$ (outdoors) since the neighbors could find them and break into their house.\n\nCan you help Alice and Bob split their keys and plan their trip through the house?\n\n### Task\n\nYou are given the description of Alice and Bob’s mansion: $m$ doors between $n$ rooms numbered $0$ to $n-1$, where $1$ is outdoors and $0$ is the bedroom. The $i$-th door can be opened with the key number $i$ (0-indexed).\n\nYou should first print two lines containing space-separated numbers of keys for Alice and Bob, respectively. It is fine if they do not use all the keys, but it is not allowed for them to both have a copy of the same key (or for one of them to have multiple copies of a key).\n\nYou should then print instructions that Alice and Bob will follow. First, print Alice’s movements from room $0$ to $1$ by printing commands of one of the two types:\n\n- \"MOVE $x$\" to move to room $x$ (assuming that there is a door between Alice's current location and $x$ and that Alice has the key),\n- \"DROP $k_1$ $k_2$ …\" to drop keys $k_1, k_2, …$ (printed as space-separated integers) in the room where Alice currently stands. This means that Alice no longer carries these keys.\n\nOnce Alice is done with her movements, print “DONE” in a new line. She should finish her movement in room $1$. It is fine if Alice passes through room $0$ or $1$ multiple times while following the printed instructions.\n\nSecond, print Bob’s movements from room $1$ to $0$ by printing commands of one of the two types:\n\n- “MOVE $x$” to move to room $x$ (assuming that there is a door between Bob’s current location and $x$ and that Bob has the key),\n- “GRAB” to grab any keys in the room where Bob is currently standing. Bob always grabs all the keys that Alice left in the room. If Alice left none, he does not grab any.\n\nOnce Bob is done with his movements, print “DONE” in a new line. He should finish his movement in room $0$. It is fine if Bob passes through room $0$ or $1$ multiple times while following the printed instructions.\n\nRemarks: It is considered acceptable, albeit useless, to DROP an empty list of keys or to grab keys in a room that has no keys, or grab keys in room $1$ (i.e. outside).\n\n", "inputFormat": "The first line contains integers $n$ and $m$, the number of rooms (outdoors included) and number of doors. This is followed by $m$ lines that describe the doors. The $i$-th line (count starting from $0$) is described by integers $a_i$, $b_i$, indicating that there is a door between rooms $a_i$ and $b_i$, opened with key $i$.\n", "outputFormat": "First, print two lines, describing the split of keys. Then, print all the instructions for Alice and Bob, as described in the task description, one per line. If there is no solution, print \"No solution\" (without the quotes). If there are multiple valid solutions, any of them is accepted.\n", "hint": "### Comment\n\nThe first example represents the following floor plan, where blue numbers correspond to\nkey IDs required for each door:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtcgheon.png)\n:::\n\nAlice takes keys $0$, $1$, and $2$ while Bob takes keys $3$ and $4$. Alice walks from $0$ to $1$, then to $2$, and then to $3$. There, she drops key $0$. She retraces her way back to $1$. Bob starts in $1$, walks to $4$, then to $3$, where he picks up key $0$. He retraces his way back to $1$, and with the newly picked-up key $0$, opens up the door to $0$.\n\nIn the second example, there is no way for both Alice and Bob to reach their destination. Note that Alice cannot drop keys in room $1$.\n\n\n### Input and output limits\n\n- $2 \\leq n, m \\leq 10^5$\n- $0 \\leq a_i, b_i < n$\n- It is guaranteed that it’s always possible to reach any room from any other room if you have all the keys.\n- Each pair of rooms is connected with at most one door.\n- No room is connected to itself.\n- Your program may print at most $4 \\cdot 10^5$ instructions.", "locale": "en", "translations": {"en": {"title": "[CERC 2023] Keys", "background": "", "description": "Alice and Bob live in a massive mansion with $n$ rooms (one of them denoting outdoors, where they play the Moon game) and $m$ doors between them. Each door connects two rooms or a room with the outdoors and has a single unique key that opens this door only. Every door closes behind you and locks automatically, so one always needs a key to pass through. The building is very large, but Alice and Bob only use one room – their bedroom. Other rooms are only there to make the house look bigger and make the neighbors jealous.\n\nThis unusual way of building their house is now causing some trouble for Alice and Bob. Bob is leaving for a two-week-long trip. In a week, Alice is also going abroad for a month and when she leaves, she needs the right keys to leave the house. However, Bob also needs keys to get back in since Alice will not be there at the time to let him in. Alice and Bob are now trying to figure out how to split the keys to the doors for Alice to be able to get from room $0$ (their bedroom) to $1$ (outdoors) and Bob to go from room $1$ (outdoors) to $0$ (bedroom) one week later.\n\nFortunately, Alice remembered that she could drop some of the keys on her way out for Bob to pick up on his way back. This way, they can both pass through the same doors. She, of course, cannot drop any keys in room $1$ (outdoors) since the neighbors could find them and break into their house.\n\nCan you help Alice and Bob split their keys and plan their trip through the house?\n\n### Task\n\nYou are given the description of Alice and Bob’s mansion: $m$ doors between $n$ rooms numbered $0$ to $n-1$, where $1$ is outdoors and $0$ is the bedroom. The $i$-th door can be opened with the key number $i$ (0-indexed).\n\nYou should first print two lines containing space-separated numbers of keys for Alice and Bob, respectively. It is fine if they do not use all the keys, but it is not allowed for them to both have a copy of the same key (or for one of them to have multiple copies of a key).\n\nYou should then print instructions that Alice and Bob will follow. First, print Alice’s movements from room $0$ to $1$ by printing commands of one of the two types:\n\n- \"MOVE $x$\" to move to room $x$ (assuming that there is a door between Alice's current location and $x$ and that Alice has the key),\n- \"DROP $k_1$ $k_2$ …\" to drop keys $k_1, k_2, …$ (printed as space-separated integers) in the room where Alice currently stands. This means that Alice no longer carries these keys.\n\nOnce Alice is done with her movements, print “DONE” in a new line. She should finish her movement in room $1$. It is fine if Alice passes through room $0$ or $1$ multiple times while following the printed instructions.\n\nSecond, print Bob’s movements from room $1$ to $0$ by printing commands of one of the two types:\n\n- “MOVE $x$” to move to room $x$ (assuming that there is a door between Bob’s current location and $x$ and that Bob has the key),\n- “GRAB” to grab any keys in the room where Bob is currently standing. Bob always grabs all the keys that Alice left in the room. If Alice left none, he does not grab any.\n\nOnce Bob is done with his movements, print “DONE” in a new line. He should finish his movement in room $0$. It is fine if Bob passes through room $0$ or $1$ multiple times while following the printed instructions.\n\nRemarks: It is considered acceptable, albeit useless, to DROP an empty list of keys or to grab keys in a room that has no keys, or grab keys in room $1$ (i.e. outside).\n\n", "inputFormat": "The first line contains integers $n$ and $m$, the number of rooms (outdoors included) and number of doors. This is followed by $m$ lines that describe the doors. The $i$-th line (count starting from $0$) is described by integers $a_i$, $b_i$, indicating that there is a door between rooms $a_i$ and $b_i$, opened with key $i$.\n", "outputFormat": "First, print two lines, describing the split of keys. Then, print all the instructions for Alice and Bob, as described in the task description, one per line. If there is no solution, print \"No solution\" (without the quotes). If there are multiple valid solutions, any of them is accepted.\n", "hint": "### Comment\n\nThe first example represents the following floor plan, where blue numbers correspond to\nkey IDs required for each door:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtcgheon.png)\n:::\n\nAlice takes keys $0$, $1$, and $2$ while Bob takes keys $3$ and $4$. Alice walks from $0$ to $1$, then to $2$, and then to $3$. There, she drops key $0$. She retraces her way back to $1$. Bob starts in $1$, walks to $4$, then to $3$, where he picks up key $0$. He retraces his way back to $1$, and with the newly picked-up key $0$, opens up the door to $0$.\n\nIn the second example, there is no way for both Alice and Bob to reach their destination. Note that Alice cannot drop keys in room $1$.\n\n\n### Input and output limits\n\n- $2 \\leq n, m \\leq 10^5$\n- $0 \\leq a_i, b_i < n$\n- It is guaranteed that it’s always possible to reach any room from any other room if you have all the keys.\n- Each pair of rooms is connected with at most one door.\n- No room is connected to itself.\n- Your program may print at most $4 \\cdot 10^5$ instructions.", "locale": "en"}, "zh-CN": {"title": "[CERC 2023] Keys", "background": "", "description": "Alice 和 Bob 住在一座巨大的豪宅里，这座豪宅有 $n$ 个房间（其中一个代表室外，他们会在那里玩月亮游戏），以及 $m$ 扇连接房间的门。每一扇门连接两个房间，或者一个房间与室外，并且每一扇门都有一把唯一的钥匙，仅能打开这扇门。每一扇门在你通过后都会自动关闭并上锁，因此想要通过一扇门总是需要相应的钥匙。豪宅很大，但 Alice 和 Bob 实际上只用一个房间——他们的卧室。其他房间只是为了让房子看起来更大，从而让邻居们嫉妒。\n\n这种奇怪的房屋设计如今给 Alice 和 Bob 带来了麻烦。Bob 要外出旅行两周。一周后，Alice 也要出国一个月，而当她离开时，她需要合适的钥匙才能离开房子。然而，Bob 回来时也需要钥匙才能进屋，因为 Alice 那时已经不在家帮他开门。现在 Alice 和 Bob 需要想办法分配钥匙，使得 Alice 能从房间 $0$（他们的卧室）到达 $1$（室外），而 Bob 能在一周后从房间 $1$（室外）回到 $0$（卧室）。\n\n幸运的是，Alice 想起她在外出时可以把一些钥匙留在途中，这样 Bob 回来时就能捡到并继续使用。这样，他们就可以共享通过相同的门。当然，她不能把钥匙丢在房间 $1$（室外），因为邻居可能会捡到并闯进他们的家。\n\n你能帮 Alice 和 Bob 分配钥匙，并规划他们在豪宅中的行程吗？\n\n### 任务\n\n你将得到 Alice 和 Bob 的豪宅的描述：$m$ 扇门连接着 $n$ 个房间，这些房间编号为 $0$ 到 $n-1$，其中 $1$ 是室外，$0$ 是卧室。第 $i$ 扇门需要钥匙编号 $i$（从 $0$ 开始计数）才能打开。\n\n你需要先输出两行，分别表示 Alice 和 Bob 拥有的钥匙编号，编号之间用空格隔开。他们可以不使用所有钥匙，但不允许两人同时拥有同一把钥匙（也不允许某人拥有多份同一把钥匙）。\n\n然后，你需要输出 Alice 和 Bob 将要遵循的指令。首先，输出 Alice 从房间 $0$ 到 $1$ 的移动过程，指令格式有两种：\n\n- `\"MOVE x\"` 表示移动到房间 $x$（假设 Alice 当前所在的房间与 $x$ 之间有门，且 Alice 持有该门的钥匙），\n- `\"DROP k_1 k_2 …\"` 表示在当前房间丢下钥匙 $k_1, k_2, …$（钥匙编号以空格隔开）。这意味着 Alice 不再携带这些钥匙。\n\n当 Alice 完成移动后，输出一行 `\"DONE\"`。Alice 应当最终停在房间 $1$。在遵循指令的过程中，Alice 可以多次经过房间 $0$ 或 $1$。\n\n接着，输出 Bob 从房间 $1$ 到 $0$ 的移动过程，指令格式也有两种：\n\n- `\"MOVE $x$\"` 表示移动到房间 $x$（假设 Bob 当前所在的房间与 $x$ 之间有门，且 Bob 持有该门的钥匙），\n- `\"GRAB\"` 表示捡起当前房间的所有钥匙。Bob 总是一次性捡起 Alice 在该房间留下的所有钥匙。如果没有钥匙，则什么也不会捡。\n\n当 Bob 完成移动后，输出一行 `\"DONE\"`。Bob 应当最终停在房间 $0$。在遵循指令的过程中，Bob 可以多次经过房间 $0$ 或 $1$。\n\n备注：允许（虽然没什么用）在没有钥匙的房间执行 `\"DROP\"` 空钥匙列表，或者在没有钥匙的房间执行 `\"GRAB\"`，甚至在房间 $1$（即室外）执行 `\"GRAB\"`。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，分别表示房间数（包括室外）和门的数量。接下来有 $m$ 行，每行描述一扇门。第 $i$ 行（从 $0$ 开始计数）包含两个整数 $a_i, b_i$，表示存在一扇门连接房间 $a_i$ 和 $b_i$，该门由钥匙 $i$ 打开。\n", "outputFormat": "首先输出两行，表示钥匙的分配情况。然后输出 Alice 和 Bob 的所有指令，如题目描述，每行一条。如果无解，则输出 `\"No solution\"`（不带引号）。如果存在多组合法解，则任意一组均可接受。\n", "hint": "### 注释\n\n第一个样例对应如下的平面图，其中蓝色数字表示打开每扇门所需的钥匙编号：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtcgheon.png)\n:::\n\nAlice 拿走钥匙 $0$、$1$ 和 $2$，而 Bob 拿走钥匙 $3$ 和 $4$。Alice 从 $0$ 走到 $1$，再到 $2$，再到 $3$。在那里，她丢下钥匙 $0$。然后她沿原路返回 $1$。Bob 从 $1$ 出发，走到 $4$，再到 $3$，在那捡到钥匙 $0$。然后他沿原路返回 $1$，再利用新捡到的钥匙 $0$ 打开通往 $0$ 的门。\n\n在第二个样例中，Alice 和 Bob 都无法顺利到达目的地。注意，Alice 不能在房间 $1$ 丢下钥匙。\n\n### 输入输出限制\n\n- $2 \\leq n, m \\leq 10^5$\n- $0 \\leq a_i, b_i < n$\n- 保证如果拥有全部钥匙，则一定可以从任意房间到达任意房间。\n- 任意一对房间之间最多只有一扇门。\n- 没有房间会与自身相连。\n- 你的程序最多可以输出 $4 \\cdot 10^5$ 条指令。\n\n---\n\n翻译由 ChatGPT-5 完成", "locale": "zh-CN"}}}
