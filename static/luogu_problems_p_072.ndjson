{"pid": "P2456", "type": "P", "difficulty": 5, "samples": [["2\r\n4 2\r\n1b1\r\na\r\n", "4"], ["5\r\n4 2 4 4 2\r\n1bad1\r\nacbe\r\n", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "高精度", "2006", "并查集", "各省省选", "山东"], "title": "[SDOI2006] 二进制方程", "background": null, "description": "一个形如：\n\n$$\n \\overline{X_1X_2\\dots X_n}= \\overline{Y_1Y_2\\dots Y_m}\n$$\n\n的等式称为二进制方程。\n\n在二进制方程的两边：$X_i$ 和 $Y_j$（$1\\le i\\le n$ 且 $1\\le j \\le m$）是二进制数字 $01$ 或者一个变量（小写字母）。每个变量都是一个有固定长度的二进制代码，他可以在等式中取代变量的位置，称这个长度为变量的长度。为了解一个二进制方程，需要给其中的变量赋予适当的二进制代码，使得我们用他们替代等式中的相应的变量后（等式的两边都变成二进制代码），这个等式成立。\n\n编程任务：\n\n对于每一个给出的方程，计算一共有多少组解。", "inputFormat": "输入共四行。\n\n第一行：$k$，代表变量的个数，规定使用小写英文字母中的前 $k$ 个字母作为变量（如 $k=5$，则变量有 $a,b,c,d,e$）。\n\n第二行：$k$ 个正整数，中间用一个空格隔开，依次代表 $k$ 个变量的长度。\n\n第三行：等式左边的表达式。\n\n第四行：等式右边的表达式。", "outputFormat": "一个数，代表等式中出现的变量共有多少组解。", "hint": "#### 样例一解释\n\n一共有 $4$ 组解，如下所示：\n\n1. $a=1001$，$b=00$。\n\n2. $a=1011$，$b=01$。\n\n3. $a=1101$，$b=10$。\n\n4. $a=1111$，$b=11$。\n\n#### 样例二解释\n\n$k=5$，所以变量有：$a,b,c,d,e$，长度分别为：$4\\space 2\\space 4\\space 4\\space2$。等式是：$\\overline{1bad1}=\\overline{acbe}$。\n\n所以输出 $16$，即变量 $a,b,c,d,e$ 共有 $16$ 组解。\n\n#### 数据范围\n\n$k\\le 26$，因为变量最多有 $26$ 个（$26$ 个英文小写字母）。\n\n等式的每一端的数字和变量的长度之和不超过 $10000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Binary Equation", "background": "", "description": "An equality of the form:\n$$\n \\overline{X_1X_2\\dots X_n}= \\overline{Y_1Y_2\\dots Y_m}\n$$\nis called a binary equation.\n\nOn both sides of a binary equation, each $X_i$ and $Y_j$ ($1 \\le i \\le n$ and $1 \\le j \\le m$) is either a binary digit $0$ or $1$, or a variable (a lowercase letter). Each variable represents a binary string of fixed length; this length is called the length of the variable. To solve a binary equation, we assign suitable binary strings to the variables so that, after replacing the variables with their strings (so both sides become binary strings), the equality holds.\n\nProgramming task:\n\nFor each given equation, compute how many solutions there are in total.", "inputFormat": "The input consists of four lines.\n\nLine 1: $k$, the number of variables. The variables are the first $k$ lowercase English letters (for example, if $k=5$, then the variables are $a, b, c, d, e$).\n\nLine 2: $k$ positive integers separated by a single space, giving the lengths of the $k$ variables in order.\n\nLine 3: the expression on the left-hand side of the equation.\n\nLine 4: the expression on the right-hand side of the equation.", "outputFormat": "A single integer, the total number of solutions for the variables that appear in the equation.", "hint": "#### Explanation for Sample 1\n\nThere are $4$ solutions, as follows:\n\n1. $a=1001$, $b=00$.\n2. $a=1011$, $b=01$.\n3. $a=1101$, $b=10$.\n4. $a=1111$, $b=11$.\n\n#### Explanation for Sample 2\n\n$k=5$, so the variables are $a, b, c, d, e$, with lengths: $4\\space 2\\space 4\\space 4\\space2$. The equation is $\\overline{1bad1}=\\overline{acbe}$.\n\nTherefore, the output is $16$, meaning there are $16$ solutions for the variables $a, b, c, d, e$.\n\n#### Constraints\n\n$k \\le 26$, because there are at most $26$ variables (the $26$ lowercase English letters).\n\nOn each side of the equation, the sum of the lengths of digits and variables does not exceed $10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 二进制方程", "background": null, "description": "一个形如：\n\n$$\n \\overline{X_1X_2\\dots X_n}= \\overline{Y_1Y_2\\dots Y_m}\n$$\n\n的等式称为二进制方程。\n\n在二进制方程的两边：$X_i$ 和 $Y_j$（$1\\le i\\le n$ 且 $1\\le j \\le m$）是二进制数字 $01$ 或者一个变量（小写字母）。每个变量都是一个有固定长度的二进制代码，他可以在等式中取代变量的位置，称这个长度为变量的长度。为了解一个二进制方程，需要给其中的变量赋予适当的二进制代码，使得我们用他们替代等式中的相应的变量后（等式的两边都变成二进制代码），这个等式成立。\n\n编程任务：\n\n对于每一个给出的方程，计算一共有多少组解。", "inputFormat": "输入共四行。\n\n第一行：$k$，代表变量的个数，规定使用小写英文字母中的前 $k$ 个字母作为变量（如 $k=5$，则变量有 $a,b,c,d,e$）。\n\n第二行：$k$ 个正整数，中间用一个空格隔开，依次代表 $k$ 个变量的长度。\n\n第三行：等式左边的表达式。\n\n第四行：等式右边的表达式。", "outputFormat": "一个数，代表等式中出现的变量共有多少组解。", "hint": "#### 样例一解释\n\n一共有 $4$ 组解，如下所示：\n\n1. $a=1001$，$b=00$。\n\n2. $a=1011$，$b=01$。\n\n3. $a=1101$，$b=10$。\n\n4. $a=1111$，$b=11$。\n\n#### 样例二解释\n\n$k=5$，所以变量有：$a,b,c,d,e$，长度分别为：$4\\space 2\\space 4\\space 4\\space2$。等式是：$\\overline{1bad1}=\\overline{acbe}$。\n\n所以输出 $16$，即变量 $a,b,c,d,e$ 共有 $16$ 组解。\n\n#### 数据范围\n\n$k\\le 26$，因为变量最多有 $26$ 个（$26$ 个英文小写字母）。\n\n等式的每一端的数字和变量的长度之和不超过 $10000$。", "locale": "zh-CN"}}}
{"pid": "P2457", "type": "P", "difficulty": 5, "samples": [["4\n62 41 86 94 \n73 58 11 12 \n69 93 89 88 \n81 40 69 13 \n", "650"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "各省省选", "山东", "二分图", "费用流"], "title": "[SDOI2006] 仓库管理员的烦恼", "background": null, "description": "仓库管理员 M 最近一直很烦恼，因为他的上司给了他一个艰难的任务：让他尽快想出一种合理的方案，把公司的仓库整理好。\n\n已知公司共有 $n$ 个仓库和 $n$ 种货物，由于公司进货时没能很好的归好类，使得大部分的仓库里面同时装有多种货物，这就给搬运工作人员搬运货物时带来了很多的麻烦。\n\n仓库管理员 M 的任务就是设计一种合理的方案，把仓库里面的货物重新整理，把相同的货物放到同一个仓库，以便于日后的管理，在整理过程中肯定需要把某些货物从一个仓库搬运到另一个仓库，已知每一次搬运货物所付出的代价等于搬运该货物的重量。\n\n编程任务：\n\n请你帮助仓库管理员 M 设计搬运方案，使得把所有的货物归好类：使每种货物各自占用一个仓库，或者说每个仓库里只能放一种货物。同时要求搬运货物时所付出的所有的总的代价最小。", "inputFormat": "第一行为 $n$（$1 \\le n \\le 150$），仓库的数量。\n\n以下为仓库货物的情况。第 $i+1$ 行依次为第 $i$ 个仓库中 $n$ 种货物的数量 $x$（$0 \\le x \\le 100$）。", "outputFormat": "把所有的货物按要求整理好所需的总的最小代价。", "hint": "样例说明：方案是：第 $1$ 种货物放到仓库 $2$ 中；第 $2$ 种货物放到仓库 $3$ 中；第 $3$ 种货物放到仓库 $4$中；第 $4$ 种货物放到仓库 $1$ 中。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] The Warehouse Manager's Trouble", "background": "", "description": "Warehouse manager M has been very troubled lately because his boss gave him a difficult task: come up with a reasonable plan as soon as possible to reorganize the company’s warehouses.\n\nThere are $n$ warehouses and $n$ types of goods. Because the goods were not well categorized when purchased, most warehouses contain multiple types of goods, which causes a lot of trouble for the workers when moving goods.\n\nManager M’s task is to design a reasonable plan to reorganize the goods in the warehouses so that goods of the same type are stored in the same warehouse, making future management easier. During the reorganization, some goods will definitely need to be moved from one warehouse to another. The cost of each move equals the weight of the moved goods.\n\nProgramming task:\n\nPlease help manager M design a moving plan so that all goods are categorized properly: each type of goods occupies exactly one warehouse, or equivalently, each warehouse holds only one type of goods. At the same time, the total cost of moving the goods should be minimized.", "inputFormat": "The first line contains $n$ ($1 \\le n \\le 150$), the number of warehouses.\n\nThe following lines describe the goods in the warehouses. For the $i$-th warehouse, line $i+1$ contains the quantities $x$ of the $n$ types of goods ($0 \\le x \\le 100$).", "outputFormat": "Output the minimal total cost required to reorganize all the goods as required.", "hint": "Sample explanation: The plan is as follows: type $1$ goods go to warehouse $2$; type $2$ goods go to warehouse $3$; type $3$ goods go to warehouse $4$; type $4$ goods go to warehouse $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 仓库管理员的烦恼", "background": null, "description": "仓库管理员 M 最近一直很烦恼，因为他的上司给了他一个艰难的任务：让他尽快想出一种合理的方案，把公司的仓库整理好。\n\n已知公司共有 $n$ 个仓库和 $n$ 种货物，由于公司进货时没能很好的归好类，使得大部分的仓库里面同时装有多种货物，这就给搬运工作人员搬运货物时带来了很多的麻烦。\n\n仓库管理员 M 的任务就是设计一种合理的方案，把仓库里面的货物重新整理，把相同的货物放到同一个仓库，以便于日后的管理，在整理过程中肯定需要把某些货物从一个仓库搬运到另一个仓库，已知每一次搬运货物所付出的代价等于搬运该货物的重量。\n\n编程任务：\n\n请你帮助仓库管理员 M 设计搬运方案，使得把所有的货物归好类：使每种货物各自占用一个仓库，或者说每个仓库里只能放一种货物。同时要求搬运货物时所付出的所有的总的代价最小。", "inputFormat": "第一行为 $n$（$1 \\le n \\le 150$），仓库的数量。\n\n以下为仓库货物的情况。第 $i+1$ 行依次为第 $i$ 个仓库中 $n$ 种货物的数量 $x$（$0 \\le x \\le 100$）。", "outputFormat": "把所有的货物按要求整理好所需的总的最小代价。", "hint": "样例说明：方案是：第 $1$ 种货物放到仓库 $2$ 中；第 $2$ 种货物放到仓库 $3$ 中；第 $3$ 种货物放到仓库 $4$中；第 $4$ 种货物放到仓库 $1$ 中。", "locale": "zh-CN"}}}
{"pid": "P2458", "type": "P", "difficulty": 4, "samples": [["6\r\n1 30 3 2 3 4\r\n2 16 2 5 6\r\n3 5 0\r\n4 4 0\r\n5 11 0\r\n6 5 0", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "2006", "各省省选", "山东", "树形 DP"], "title": "[SDOI2006] 保安站岗", "background": null, "description": "五一来临，某地下超市为了便于疏通和指挥密集的人员和车辆，以免造成超市内的混乱和拥挤，准备临时从外单位调用部分保安来维持交通秩序。\n\n已知整个地下超市的所有通道呈一棵树的形状；某些通道之间可以互相望见。总经理要求所有通道的每个端点（树的顶点）都要有人全天候看守，在不同的通道端点安排保安所需的费用不同。\n\n一个保安一旦站在某个通道的其中一个端点，那么他除了能看守住他所站的那个端点，也能看到这个通道的另一个端点，所以一个保安可能同时能看守住多个端点（树的结点），因此没有必要在每个通道的端点都安排保安。\n\n编程任务：\n\n请你帮助超市经理策划安排，在能看守全部通道端点的前提下，使得花费的经费最少。", "inputFormat": "第 $1$ 行 $n$，表示树中结点的数目。\n\n第 $2$ 行至第 $n+1$ 行，每行描述每个通道端点的信息，依次为：该结点标号 $i$（$0<i \\le n$），在该结点安置保安所需的经费 $k$（$1\\le k \\le 10000$），该边的儿子数 $m$，接下来 $m$ 个数，分别是这个节点的 $m$ 个儿子的标号 $r_1,r_2,\\cdots, r_m$。\n\n对于一个 $n$（$0<n \\le 1500$）个结点的树，结点标号在 $1$ 到 $n$ 之间，且标号不重复。", "outputFormat": "输出一行一个整数，表示最少的经费。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g013tlmh.png)\n\n在结点 $2,3,4$ 安置 $3$ 个保安能看守所有的 $6$ 个结点，需要的经费最小：$25$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2006] Security Guards on Duty", "background": "", "description": "With Labor Day approaching, an underground supermarket plans to temporarily call in security guards from other units to direct and ease the flow of dense crowds and vehicles, so as to avoid chaos and congestion inside the supermarket.\n\nAll passages in the underground supermarket form a tree. Some passages can be seen from one another. The general manager requires every endpoint of every passage (i.e., every tree vertex) to be watched around the clock. The cost of assigning a guard at different passage endpoints varies.\n\nIf a guard stands at one endpoint of a passage, then besides guarding the endpoint where they stand, they can also see the other endpoint of that passage. Therefore, a single guard may be able to watch multiple endpoints (tree vertices), and it is not necessary to assign a guard to every endpoint of every passage.\n\nTask:\n\nPlease help the supermarket manager plan the arrangement so that all passage endpoints are watched, while minimizing the total cost.", "inputFormat": "The first line contains $n$, the number of nodes in the tree.\n\nLines $2$ through $n+1$ each describe one passage endpoint (node), in the following order: the node label $i$ ($0 < i \\le n$), the cost $k$ of placing a guard at this node ($1 \\le k \\le 10000$), the number of children of this node $m$, followed by $m$ integers, which are the labels of this node’s $m$ children $r_1, r_2, \\cdots, r_m$.\n\nFor a tree with $n$ ($0 < n \\le 1500$) nodes, node labels are between $1$ and $n$, and labels are not repeated.", "outputFormat": "Output a single integer on one line: the minimum total cost.", "hint": "Sample explanation:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g013tlmh.png)\n\nPlacing $3$ guards at nodes $2, 3, 4$ can watch all $6$ nodes, and the minimum cost is $25$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2006] 保安站岗", "background": null, "description": "五一来临，某地下超市为了便于疏通和指挥密集的人员和车辆，以免造成超市内的混乱和拥挤，准备临时从外单位调用部分保安来维持交通秩序。\n\n已知整个地下超市的所有通道呈一棵树的形状；某些通道之间可以互相望见。总经理要求所有通道的每个端点（树的顶点）都要有人全天候看守，在不同的通道端点安排保安所需的费用不同。\n\n一个保安一旦站在某个通道的其中一个端点，那么他除了能看守住他所站的那个端点，也能看到这个通道的另一个端点，所以一个保安可能同时能看守住多个端点（树的结点），因此没有必要在每个通道的端点都安排保安。\n\n编程任务：\n\n请你帮助超市经理策划安排，在能看守全部通道端点的前提下，使得花费的经费最少。", "inputFormat": "第 $1$ 行 $n$，表示树中结点的数目。\n\n第 $2$ 行至第 $n+1$ 行，每行描述每个通道端点的信息，依次为：该结点标号 $i$（$0<i \\le n$），在该结点安置保安所需的经费 $k$（$1\\le k \\le 10000$），该边的儿子数 $m$，接下来 $m$ 个数，分别是这个节点的 $m$ 个儿子的标号 $r_1,r_2,\\cdots, r_m$。\n\n对于一个 $n$（$0<n \\le 1500$）个结点的树，结点标号在 $1$ 到 $n$ 之间，且标号不重复。", "outputFormat": "输出一行一个整数，表示最少的经费。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g013tlmh.png)\n\n在结点 $2,3,4$ 安置 $3$ 个保安能看守所有的 $6$ 个结点，需要的经费最小：$25$。", "locale": "zh-CN"}}}
{"pid": "P2459", "type": "P", "difficulty": 2, "samples": [["2 3 2 6", "0 0 0 1 1 2\n1 0 0 2 1 2\n0 1 0 1 3 1\n0 1 1 1 3 2\n1 1 0 2 3 1\n1 1 1 2 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2007", "各省省选", "山东", "Special Judge"], "title": "[SDOI2007] 立体分割", "background": "", "description": "Ghy收了 $n$ 个小弟,如 Psf、Hf、Csr、Ll……也当然包括你啊。（原文如此……）\n\n可是身为大哥的他从来不像小弟索要什么，反而经常给小弟分发礼物。\n\n一天他得到了 $1$ 个长方体形状的蛋糕。但是Ghy并不喜欢吃蛋糕，所以他要把蛋糕全部分给小弟们。Ghy认为所有小弟是平等的，所以找来小弟你，让你把这个蛋糕分成 $n$个大小和形状都相等的长方体小蛋糕（即全等的小蛋糕）。\n\n我们把蛋糕搬到一个三维坐标系里，以它的一个顶点 $O$ 为坐标原点 $(0,0,0)$。另一个与 $O$ 点相对的顶点(就是离 $O$ 点最远的点)的坐标 $(x,y,z)$。其实 $x,y,z$ 就表示了长方体的长、宽、高。", "inputFormat": "四个正整数，$x,y,z,n$。意义如题目所述。", "outputFormat": "$N$ 行，每行 $6$ 个实数，表示分割成的全等长方体小蛋糕的两相对顶点坐标，先输出第一个顶点的坐标 $x_1,y_1,z_1$，然后是 $x_2,y_2,z_2$，误差不超过 $10^{-9}$。（可以任意顺序输出小蛋糕坐标，且相对顶点任取一组输出）。", "hint": "### 样例解释（2023.9.29 管理员补充）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4lfzlmr.png)\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1\\leq x,y,z,n\\leq 1000$，$x,y,z$ 为整数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] 3D Partition", "background": "", "description": "Ghy recruited $n$ underlings, such as Psf, Hf, Csr, Ll, and of course you. (as in the original text...)\n\nAs the boss, he never asks his underlings for anything. Instead, he often gives them gifts.\n\nOne day, he got a rectangular cuboid cake. But Ghy does not like eating cake, so he wants to give all of it to his underlings. Ghy believes all underlings are equal, so he asks you to divide this cake into $n$ rectangular cuboid small cakes that are equal in both size and shape (i.e., congruent small cakes).\n\nWe move the cake into a 3D coordinate system, taking one vertex $O$ as the origin $ (0, 0, 0) $. The vertex opposite to $O$ (the farthest point from $O$) has coordinates $ (x, y, z) $. In fact, $ x, y, z $ represent the length, width, and height of the rectangular cuboid.", "inputFormat": "Four positive integers, $ x, y, z, n $. Their meanings are as described above.", "outputFormat": "$n$ lines, each containing 6 real numbers, representing the coordinates of a pair of opposite vertices of one congruent rectangular cuboid small cake. Output the coordinates of the first vertex $x_1, y_1, z_1$, followed by $x_2, y_2, z_2$. The absolute error must not exceed $10^{-9}$. You may output the small cakes in any order, and for each small cake, you may output any one pair of opposite vertices.", "hint": "Sample explanation (added by admin on 2023-09-29).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4lfzlmr.png)\n\nConstraints\n\nFor $100\\%$ of the testdata, $1 \\leq x, y, z, n \\leq 1000$, and $x, y, z$ are integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 立体分割", "background": "", "description": "Ghy收了 $n$ 个小弟,如 Psf、Hf、Csr、Ll……也当然包括你啊。（原文如此……）\n\n可是身为大哥的他从来不像小弟索要什么，反而经常给小弟分发礼物。\n\n一天他得到了 $1$ 个长方体形状的蛋糕。但是Ghy并不喜欢吃蛋糕，所以他要把蛋糕全部分给小弟们。Ghy认为所有小弟是平等的，所以找来小弟你，让你把这个蛋糕分成 $n$个大小和形状都相等的长方体小蛋糕（即全等的小蛋糕）。\n\n我们把蛋糕搬到一个三维坐标系里，以它的一个顶点 $O$ 为坐标原点 $(0,0,0)$。另一个与 $O$ 点相对的顶点(就是离 $O$ 点最远的点)的坐标 $(x,y,z)$。其实 $x,y,z$ 就表示了长方体的长、宽、高。", "inputFormat": "四个正整数，$x,y,z,n$。意义如题目所述。", "outputFormat": "$N$ 行，每行 $6$ 个实数，表示分割成的全等长方体小蛋糕的两相对顶点坐标，先输出第一个顶点的坐标 $x_1,y_1,z_1$，然后是 $x_2,y_2,z_2$，误差不超过 $10^{-9}$。（可以任意顺序输出小蛋糕坐标，且相对顶点任取一组输出）。", "hint": "### 样例解释（2023.9.29 管理员补充）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o4lfzlmr.png)\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1\\leq x,y,z,n\\leq 1000$，$x,y,z$ 为整数。", "locale": "zh-CN"}}}
{"pid": "P2460", "type": "P", "difficulty": 6, "samples": [["3 4\r\n91 92 93 94\r\n0.5 0.5 0.5 0.5\r\n0.5 0.5 0.5 0.5\r\n0.5 0.5 0.5 0.5", "0.125\r\n279"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "山东"], "title": "[SDOI2007] 科比的比赛", "background": null, "description": "NBA 球星云集，谁是最厉害的呢？没有定论。\n\nNBA 总裁大卫斯特恩最近闲得无聊，决定举办一场球员单挑大赛。\n\n比赛是这样的：首先，我们给每人都打上个分数，表示了每个人的整体能力。然后让每个参赛队员都打 $n$ 场比赛，首先看谁赢得最多，然后看谁打赢的人的能力值的和最大。\n\n本人一向支持科比（我不支持），当然希望他赢。现在让我们和科比一起去赢得这场比赛吧！！\n\n（科比照片一张）\n\n假设总共比赛有 $m + 1$ 个人参加，告诉你科比和另外 $m$ 个人的比赛的胜利可能性，你的任务就是求出在科比赢了的所有比赛的可能性最大的前提下（误差不超过 $10^{-10}$），科比打赢的人的最大能力值的和是多少？当然当一个人被你打败，他就不会再参加比赛了。\n\n这里需要注意的是，科比能打赢其他人的可能性在不同场次是不同的。比如在比赛前期科比的手感不太好，对抗在内线称霸的人因为无法发挥外线的实力，而难以得分（接奥尼尔图一张）。\n\n中期时别人手感变好，状态起来，有实力的人会给科比制造很大的麻烦（接韦德图一张）。\n\n后期时消耗太多体力，对自己的命中率下降，难以发挥正常水平，所以对抗体力好的球员时占劣势（后接纳什图一张）。\n\n现在给你每场比赛科比对每个参赛者的获胜可能性，和每个人的能力值，帮助科比赢得比赛吧。", "inputFormat": "第一行两个正整数 $n, m$，意义如题所述。\n\n接下来一行 $m$ 个整数表示其他 $m$ 个人的能力值 $s_i$。\n\n接下来是一个 $n \\times m$ 的矩阵，描述在每场碰到每个人的获胜可能 $v_{i,j}$。", "outputFormat": "第一行输出最大获胜可能性。\n\n第二行输出最大能力值和。", "hint": "$1\\le n\\le 10,n \\le m \\le 10^5$；\n\n$1\\le s_i\\le 100,0\\le v_{i,j}\\le1$。\n\n**本题存在 Special Judge。**", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] Kobe's Match", "background": "", "description": "There are $m + 1$ participants in total, including Kobe. Each of the other $m$ participants has an ability value $s_i$. Kobe will play $n$ matches. In each match, he faces one opponent who has not been defeated before. Once Kobe defeats someone, that opponent will no longer participate.\n\nKobe’s probability of defeating a specific opponent varies by match index. Specifically, you are given an $n \\times m$ matrix $v_{i,j}$, where $v_{i,j}$ is the probability that Kobe defeats opponent $j$ if they meet in match $i$.\n\nChoose the opponent Kobe faces in each of the $n$ matches (without repetition) to maximize the probability that Kobe wins all $n$ matches. Subject to achieving this maximum probability (with an error not exceeding $10^{-10}$), maximize the sum of the ability values of the opponents that Kobe defeats.", "inputFormat": "- The first line contains two positive integers $n, m$.\n- The second line contains $m$ integers, the ability values $s_i$ of the other $m$ participants.\n- Then follows an $n \\times m$ matrix, the probabilities $v_{i,j}$.", "outputFormat": "- On the first line, output the maximum probability that Kobe wins all $n$ matches. The error must not exceed $10^{-10}$.\n- On the second line, output the maximum sum of ability values among all strategies that achieve the maximum probability.", "hint": "Constraints\n\n$1\\le n\\le 10, n \\le m \\le 10^5$；\n\n$1\\le s_i\\le 100, 0\\le v_{i,j}\\le 1$。\n\nThis problem is Special Judge.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 科比的比赛", "background": null, "description": "NBA 球星云集，谁是最厉害的呢？没有定论。\n\nNBA 总裁大卫斯特恩最近闲得无聊，决定举办一场球员单挑大赛。\n\n比赛是这样的：首先，我们给每人都打上个分数，表示了每个人的整体能力。然后让每个参赛队员都打 $n$ 场比赛，首先看谁赢得最多，然后看谁打赢的人的能力值的和最大。\n\n本人一向支持科比（我不支持），当然希望他赢。现在让我们和科比一起去赢得这场比赛吧！！\n\n（科比照片一张）\n\n假设总共比赛有 $m + 1$ 个人参加，告诉你科比和另外 $m$ 个人的比赛的胜利可能性，你的任务就是求出在科比赢了的所有比赛的可能性最大的前提下（误差不超过 $10^{-10}$），科比打赢的人的最大能力值的和是多少？当然当一个人被你打败，他就不会再参加比赛了。\n\n这里需要注意的是，科比能打赢其他人的可能性在不同场次是不同的。比如在比赛前期科比的手感不太好，对抗在内线称霸的人因为无法发挥外线的实力，而难以得分（接奥尼尔图一张）。\n\n中期时别人手感变好，状态起来，有实力的人会给科比制造很大的麻烦（接韦德图一张）。\n\n后期时消耗太多体力，对自己的命中率下降，难以发挥正常水平，所以对抗体力好的球员时占劣势（后接纳什图一张）。\n\n现在给你每场比赛科比对每个参赛者的获胜可能性，和每个人的能力值，帮助科比赢得比赛吧。", "inputFormat": "第一行两个正整数 $n, m$，意义如题所述。\n\n接下来一行 $m$ 个整数表示其他 $m$ 个人的能力值 $s_i$。\n\n接下来是一个 $n \\times m$ 的矩阵，描述在每场碰到每个人的获胜可能 $v_{i,j}$。", "outputFormat": "第一行输出最大获胜可能性。\n\n第二行输出最大能力值和。", "hint": "$1\\le n\\le 10,n \\le m \\le 10^5$；\n\n$1\\le s_i\\le 100,0\\le v_{i,j}\\le1$。\n\n**本题存在 Special Judge。**", "locale": "zh-CN"}}}
{"pid": "P2461", "type": "P", "difficulty": 6, "samples": [["2\n1 1\n1 1\n2 10 1000003\n", "142"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "递归", "山东", "矩阵乘法"], "title": "[SDOI2008] 递归数列", "background": "", "description": "一个由自然数组成的数列按下式定义：\n\n对于 $i \\le k$：$a_{i}= b_{i}$。\n\n对于 $i > k$：$a_{i}= \\sum_{j=1}^{k}{c_{j} \\times a_{i-j}}$。\n\n其中 $b_{1\\dots k}$ 和 $c_{1\\dots k}$ 是给定的自然数。\n\n写一个程序，给定自然数 $m \\le n$，计算 $\\left( \\sum_{i=m}^{n}{a_{i}} \\right) \\bmod p$。", "inputFormat": "第一行一个自然数 $k$。\n\n第二行 $k$ 个自然数 $b_{1},b_{2},\\dots,b_{k}$。\n\n第三行 $k$ 个自然数 $c_{1},c_{2},\\dots,c_{k}$。\n\n第四行三个自然数 $m,n,p$。", "outputFormat": "一行一个正整数，表示 $\\sum_{i=m}^{n}{a_{i}} \\mod p$ 的值。", "hint": "对于 $20\\%$ 的数据，$n \\le 10^{6}$。\n\n对于另外 $30\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 15$，$1 \\le m \\le n \\le 10^{18}$，$0 \\le b_{i},c_{i} \\le 10^{9}$，$p \\le 10^{8}$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Recursive Sequence", "background": "", "description": "A sequence of natural numbers is defined as follows:\n\nFor $i \\le k$: $a_{i}= b_{i}$.\n\nFor $i > k$: $a_{i}= \\sum_{j=1}^{k}{c_{j} \\times a_{i-j}}$.\n\nHere $b_{1\\dots k}$ and $c_{1\\dots k}$ are given natural numbers.\n\nWrite a program that, given natural numbers $m \\le n$, computes $\\left( \\sum_{i=m}^{n}{a_{i}} \\right) \\bmod p$.", "inputFormat": "The first line contains a natural number $k$.\n\nThe second line contains $k$ natural numbers $b_{1}, b_{2}, \\dots, b_{k}$.\n\nThe third line contains $k$ natural numbers $c_{1}, c_{2}, \\dots, c_{k}$.\n\nThe fourth line contains three natural numbers $m, n, p$.", "outputFormat": "Output one positive integer on a single line, representing the value of $\\sum_{i=m}^{n}{a_{i}} \\mod p$.", "hint": "For $20\\%$ of the testdata, $n \\le 10^{6}$.\n\nFor another $30\\%$ of the testdata, $k=1$.\n\nFor $100\\%$ of the testdata, $1 \\le k \\le 15$, $1 \\le m \\le n \\le 10^{18}$, $0 \\le b_{i}, c_{i} \\le 10^{9}$, $p \\le 10^{8}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 递归数列", "background": "", "description": "一个由自然数组成的数列按下式定义：\n\n对于 $i \\le k$：$a_{i}= b_{i}$。\n\n对于 $i > k$：$a_{i}= \\sum_{j=1}^{k}{c_{j} \\times a_{i-j}}$。\n\n其中 $b_{1\\dots k}$ 和 $c_{1\\dots k}$ 是给定的自然数。\n\n写一个程序，给定自然数 $m \\le n$，计算 $\\left( \\sum_{i=m}^{n}{a_{i}} \\right) \\bmod p$。", "inputFormat": "第一行一个自然数 $k$。\n\n第二行 $k$ 个自然数 $b_{1},b_{2},\\dots,b_{k}$。\n\n第三行 $k$ 个自然数 $c_{1},c_{2},\\dots,c_{k}$。\n\n第四行三个自然数 $m,n,p$。", "outputFormat": "一行一个正整数，表示 $\\sum_{i=m}^{n}{a_{i}} \\mod p$ 的值。", "hint": "对于 $20\\%$ 的数据，$n \\le 10^{6}$。\n\n对于另外 $30\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 15$，$1 \\le m \\le n \\le 10^{18}$，$0 \\le b_{i},c_{i} \\le 10^{9}$，$p \\le 10^{8}$。", "locale": "zh-CN"}}}
{"pid": "P2462", "type": "P", "difficulty": 6, "samples": [["ab\narc\narco\nbar\nbran\ncarbon\ncarbons\ncobra\ncrab\ncrayon\nnarc", "6\nab\nbar\ncrab\ncobra\ncarbon\ncarbons"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "各省省选", "山东", "Special Judge"], "title": "[SDOI2007] 游戏", "background": null, "description": "小木木和小凳子是两个聪明的孩子，他们五岁的时候就开始学习英语了。\n\n英语老师教他们玩一个很简单的游戏。老师给他们一张全小写并无特殊符号的英语单词表，单词表如下：\n\n$\\texttt{ab},\\texttt{arc},\\texttt{arco},\\texttt{bar},\\texttt{bran},\\texttt{carbon},\\texttt{carbons},\\texttt{cobra},\\texttt{crab},\\texttt{crayon},\\texttt{narc}$\n然后让他们从单词表里找词语接龙。接龙的规则如下:\n\n1. 前一个单词拥有的所有字母，在后一个单词里必须出现，而且字母出现次数不少于前一单词。\n\n2. 后一个单词的长度比前一个单词的长度恰好多 $1$\n\n对于以上例子，一合法的接龙为:\n\n$\\texttt{ab}$\\\n$\\texttt{bar}$\\\n$\\texttt{crab}$\\\n$\\texttt{cobra}$\\\n$\\texttt{carbon}$\\\n$\\texttt{carbons}$\n\n他们之中，谁接龙的长度长，谁就赢了。小木木肯定不想输，所以找到你，放肆撒娇，导致你因为不想再被打扰而帮他了。至于小凳子呢？？说不定找郭大牛去了。嘿嘿，你和郭大牛的编程比赛？？加油吧！！！", "inputFormat": "$n$（$1\\le n \\le 10000$）行，每行一个长度不超过 $100$ 的单词。", "outputFormat": "第一行，输出最大长度 $\\text{ans}$\n\n接下来的 $\\text{ans}$ 行，每行输出一个字符串代表你的方案。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2007] Game", "background": "# Description\n\nXiao Mumu and Xiao Dengzi are two smart kids who started learning English when they were five.\n\nTheir English teacher taught them a very simple game. The teacher gave them a list of English words, all in lowercase and without special symbols. The word list is as follows:\n\nab\narc\narco\nbar\nbran\ncarbon\ncarbons\n\ncobra\ncrab\ncrayon\nnarc\n\nThey are asked to find a word chain from the list. The rules of the chain are:\n\n1. Every letter that appears in the previous word must also appear in the next word, and the number of occurrences of each letter in the next word must be at least that in the previous word.\n\n2. The length of the next word must be exactly 1 more than the length of the previous word.\n\nFor the above example, a valid chain is:\n\nab\nbar\ncrab\ncobra\ncarbon\ncarbons\n\nWhoever makes a longer chain wins. Xiao Mumu definitely does not want to lose, so he comes to you and pesters you until you help him just to avoid being bothered. As for Xiao Dengzi? Maybe he went to find Guo Daniu. Hehe, a programming contest between you and Guo Daniu? Good luck!", "description": "Xiao Mumu and Xiao Dengzi are two smart kids who started learning English when they were five.\n\nTheir English teacher taught them a very simple game. The teacher gave them a list of English words, all in lowercase and without special symbols. The word list is as follows:\n\nab\narc\narco\nbar\nbran\ncarbon\ncarbons\n\ncobra\ncrab\ncrayon\nnarc\n\nThey are asked to find a word chain from the list. The rules of the chain are:\n\n1. Every letter that appears in the previous word must also appear in the next word, and the number of occurrences of each letter in the next word must be at least that in the previous word.\n\n2. The length of the next word must be exactly 1 more than the length of the previous word.\n\nFor the above example, a valid chain is:\n\nab\nbar\ncrab\ncobra\ncarbon\ncarbons\n\nWhoever makes a longer chain wins. Xiao Mumu definitely does not want to lose, so he comes to you and pesters you until you help him just to avoid being bothered. As for Xiao Dengzi? Maybe he went to find Guo Daniu. Hehe, a programming contest between you and Guo Daniu? Good luck!\n\n# Description", "inputFormat": "The first line contains an integer $n$ ($1 \\le n \\le 10000$).  \nEach of the next $n$ lines contains one word, with length at most $100$.", "outputFormat": "On the first line, output the maximum chain length $ans$.  \nOn each of the next $ans$ lines, output one word representing your chain.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2007] 游戏", "background": null, "description": "小木木和小凳子是两个聪明的孩子，他们五岁的时候就开始学习英语了。\n\n英语老师教他们玩一个很简单的游戏。老师给他们一张全小写并无特殊符号的英语单词表，单词表如下：\n\n$\\texttt{ab},\\texttt{arc},\\texttt{arco},\\texttt{bar},\\texttt{bran},\\texttt{carbon},\\texttt{carbons},\\texttt{cobra},\\texttt{crab},\\texttt{crayon},\\texttt{narc}$\n然后让他们从单词表里找词语接龙。接龙的规则如下:\n\n1. 前一个单词拥有的所有字母，在后一个单词里必须出现，而且字母出现次数不少于前一单词。\n\n2. 后一个单词的长度比前一个单词的长度恰好多 $1$\n\n对于以上例子，一合法的接龙为:\n\n$\\texttt{ab}$\\\n$\\texttt{bar}$\\\n$\\texttt{crab}$\\\n$\\texttt{cobra}$\\\n$\\texttt{carbon}$\\\n$\\texttt{carbons}$\n\n他们之中，谁接龙的长度长，谁就赢了。小木木肯定不想输，所以找到你，放肆撒娇，导致你因为不想再被打扰而帮他了。至于小凳子呢？？说不定找郭大牛去了。嘿嘿，你和郭大牛的编程比赛？？加油吧！！！", "inputFormat": "$n$（$1\\le n \\le 10000$）行，每行一个长度不超过 $100$ 的单词。", "outputFormat": "第一行，输出最大长度 $\\text{ans}$\n\n接下来的 $\\text{ans}$ 行，每行输出一个字符串代表你的方案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2463", "type": "P", "difficulty": 6, "samples": [["2\n2 1 2\n3 4 5 9\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "二分", "各省省选", "山东", "哈希 hashing", "KMP 算法", "后缀数组 SA"], "title": "[SDOI2008] Sandy 的卡片", "background": "", "description": "Sandy 和 Sue 都热衷于收集干脆面中的卡片。\n\n然而，Sue 收集卡片是因为卡片上漂亮的人物形象，而 Sandy 则是为了积攒卡片兑换超炫的人物模型。\n\n每一张卡片都由一些数字进行标记，第 $i$ 张卡片的序列长度为 $M_i$，要想兑换人物模型，首先必须要集够 $N$ 张卡片，对于这 $N$ 张卡片，如果他们都有一个相同的子串长度为 $k$，则可以兑换一个等级为 $k$ 的人物模型。相同的定义为：两个子串长度相同且一个串的全部元素加上一个数就会变成另一个串。\n\nSandy 的卡片数远远小于要求的 $N$，于是 Sue 决定在 Sandy 的生日将自己的卡片送给 Sandy，在 Sue 的帮助下，Sandy 终于集够了 $N$ 张卡片，但是，Sandy 并不清楚他可以兑换到哪个等级的人物模型，现在，请你帮助 Sandy 和 Sue，看看他们最高能够得到哪个等级的人物模型。", "inputFormat": "第一行为一个数 $N$，表示可以兑换人物模型最少需要的卡片数，即 Sandy 现在有的卡片数。\n\n第 $i+1$ 行到第 $i+N$ 行每行第一个数为第 $i$ 张卡片序列的长度 $M_i$，之后 $j+1$ 到 $j+1+M_i$ 个数，用空格分隔，分别表示序列中的第 $j$ 个数。", "outputFormat": "一个数 $k$，表示可以获得的最高等级。", "hint": "$30\\%$ 的数据保证 $n\\le50$\n\n$100\\%$ 的数据保证 $n\\le1000,M\\le1000,2\\le M_i\\le101$\n\nupdate：题面上数据范围 $M_i$ 和 $M$ 的范围其实是一个东西… 真实数据范围: $40\\le n\\le1000,2\\le M_i\\le101$,字符串中的每个数字的大小范围为 $[0,1864]$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Sandy's Cards", "background": "", "description": "Sandy and Sue both love collecting cards from crispy noodle snacks.\n\nHowever, Sue collects cards for the beautiful characters on them, while Sandy collects them to exchange for super cool character figures.\n\nEach card is labeled with a sequence of numbers. The length of the sequence on the $i$-th card is $M_i$. To redeem a character figure, you must first collect $N$ cards. For these $N$ cards, if they all share a common contiguous subarray of length $k$, then you can redeem a figure of level $k$. Identical means: two substrings have the same length, and adding a number to every element of one substring will make it equal to the other.\n\nSandy has far fewer cards than the required $N$, so Sue decides to give her cards to Sandy for Sandy’s birthday. With Sue’s help, Sandy finally has $N$ cards. However, Sandy does not know which level of figure can be redeemed. Now, please help Sandy and Sue determine the highest level of figure they can get.", "inputFormat": "The first line contains an integer $N$, the minimum number of cards required to redeem a figure, i.e., the number of cards Sandy now has.\n\nFor each $i = 1, 2, \\dots, N$, the $(i+1)$-th line starts with the length $M_i$ of the $i$-th card’s sequence, followed by $M_i$ integers separated by spaces, where the $j$-th number is the $j$-th element in the sequence.", "outputFormat": "Output a single integer $k$, the maximum obtainable level.", "hint": "$30\\%$ of the testdata guarantee $n \\le 50$.\n\n$100\\%$ of the testdata guarantee $n \\le 1000, M \\le 1000, 2 \\le M_i \\le 101$.\n\nUpdate: In the statement, the Constraints for $M_i$ and $M$ are actually the same thing. True Constraints: $40 \\le n \\le 1000, 2 \\le M_i \\le 101$, and each number in the sequences is in the range $[0, 1864]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] Sandy 的卡片", "background": "", "description": "Sandy 和 Sue 都热衷于收集干脆面中的卡片。\n\n然而，Sue 收集卡片是因为卡片上漂亮的人物形象，而 Sandy 则是为了积攒卡片兑换超炫的人物模型。\n\n每一张卡片都由一些数字进行标记，第 $i$ 张卡片的序列长度为 $M_i$，要想兑换人物模型，首先必须要集够 $N$ 张卡片，对于这 $N$ 张卡片，如果他们都有一个相同的子串长度为 $k$，则可以兑换一个等级为 $k$ 的人物模型。相同的定义为：两个子串长度相同且一个串的全部元素加上一个数就会变成另一个串。\n\nSandy 的卡片数远远小于要求的 $N$，于是 Sue 决定在 Sandy 的生日将自己的卡片送给 Sandy，在 Sue 的帮助下，Sandy 终于集够了 $N$ 张卡片，但是，Sandy 并不清楚他可以兑换到哪个等级的人物模型，现在，请你帮助 Sandy 和 Sue，看看他们最高能够得到哪个等级的人物模型。", "inputFormat": "第一行为一个数 $N$，表示可以兑换人物模型最少需要的卡片数，即 Sandy 现在有的卡片数。\n\n第 $i+1$ 行到第 $i+N$ 行每行第一个数为第 $i$ 张卡片序列的长度 $M_i$，之后 $j+1$ 到 $j+1+M_i$ 个数，用空格分隔，分别表示序列中的第 $j$ 个数。", "outputFormat": "一个数 $k$，表示可以获得的最高等级。", "hint": "$30\\%$ 的数据保证 $n\\le50$\n\n$100\\%$ 的数据保证 $n\\le1000,M\\le1000,2\\le M_i\\le101$\n\nupdate：题面上数据范围 $M_i$ 和 $M$ 的范围其实是一个东西… 真实数据范围: $40\\le n\\le1000,2\\le M_i\\le101$,字符串中的每个数字的大小范围为 $[0,1864]$。\n", "locale": "zh-CN"}}}
{"pid": "P2464", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 5\nQ 1 3 2\nQ 1 3 1\nC 2 1\nQ 1 3 2\nQ 1 3 1\n", "1\n1\n0\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "莫队", "各省省选", "树状数组", "离散化", "山东", "树套树", "可持久化线段树", "分块", "离线处理"], "title": "[SDOI2008] 郁闷的小 J", "background": "", "description": "小 J 是国家图书馆的一位图书管理员，他的工作是管理一个巨大的书架。虽然他很能吃苦耐劳，但是由于这个书架十分巨大，所以他的工作效率总是很低，以致他面临着被解雇的危险，这也正是他所郁闷的。\n\n具体说来，书架由 $N$ 个书位组成，编号从 $1$ 到 $N$。每个书位放着一本书，每本书有一个特定的编码。\n\n小 J 的工作有两类：\n\n1. 图书馆经常购置新书，而书架任意时刻都是满的，所以只得将某位置的书拿掉并换成新购的书。\n\n2. 小 J 需要回答顾客的查询，顾客会询问某一段连续的书位中某一特定编码的书有多少本。\n\n例如，共 $5$ 个书位，开始时书位上的书编码为 $1, 2, 3, 4, 5$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$1$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$1$。\n\n此时，图书馆购进一本编码为“$1$”的书，并将它放到 $2$ 号书位。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$0$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$2$。\n\n……\n\n你的任务是写一个程序来回答每个顾客的询问。", "inputFormat": "第一行两个整数 $N, M$，表示一共 $N$ 个书位，$M$ 个操作。\n\n接下来一行共 $N$ 个整数数 $A_1, A_2, \\ldots , A_N$，$A_i$ 表示开始时位置 $i$ 上的书的编码。\n\n接下来 $M$ 行，每行表示一次操作，每行开头一个字符。\n\n若字符为 `C`，表示图书馆购进新书，后接两个整数 $A, P$（$1 \\le A \\le N$），表示这本书被放在位置 $A$ 上，以及这本书的编码为 $P$。\n\n若字符为 `Q`，表示一个顾客的查询，后接三个整数 $A, B, K$（$1 \\le A \\le B \\le N$），表示查询从第 $A$ 书位到第 $B$ 书位（包含 $A$ 和 $B$）中编码为 $K$ 的书共多少本。", "outputFormat": "对每一个顾客的查询，输出一个整数，表示顾客所要查询的结果。", "hint": "对于 $40 \\%$ 的数据，$1 \\le N, M \\le 5000$。\n\n对于 $100 \\%$ 的数据，$1 \\le N, M \\le {10}^5$。\n\n对于 $100 \\%$ 的数据，所有出现的书的编码为不大于 $2^{31} - 1$ 的正数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Depressed Little J", "background": "", "description": "Little J is a librarian at the National Library, and his job is to manage a huge bookshelf. Although he is diligent, the bookshelf is so large that his efficiency is always low, putting him at risk of being fired, which makes him depressed.\n\nSpecifically, the bookshelf consists of $N$ positions, numbered from $1$ to $N$. Each position holds one book, and each book has a specific code.\n\nLittle J’s job has two types:\n\n1. The library frequently purchases new books, and the shelf is always full at any time, so a book at some position has to be removed and replaced with the newly purchased one.\n\n2. Little J needs to answer customer queries. A customer will ask how many books with a given code appear in a certain contiguous segment of positions.\n\nFor example, there are $5$ positions, and initially the codes of the books on the positions are $1, 2, 3, 4, 5$.\n\nA customer asks how many books with code \"2\" are in positions $1$ to $3$. The answer is $1$.\n\nA customer asks how many books with code \"1\" are in positions $1$ to $3$. The answer is $1$.\n\nAt this point, the library purchases a book with code \"1\" and puts it at position $2$.\n\nA customer asks how many books with code \"2\" are in positions $1$ to $3$. The answer is $0$.\n\nA customer asks how many books with code \"1\" are in positions $1$ to $3$. The answer is $2$.\n\n...\n\nYour task is to write a program to answer each customer’s query.", "inputFormat": "The first line contains two integers $N, M$, meaning there are $N$ positions and $M$ operations.\n\nThe next line contains $N$ integers $A_1, A_2, \\ldots , A_N$, where $A_i$ is the code of the book initially at position $i$.\n\nThe next $M$ lines each represent an operation, and each line begins with a character.\n\nIf the character is `C`, it means the library purchases a new book, followed by two integers $A, P$ ($1 \\le A \\le N$), meaning the book is placed at position $A$, and its code is $P$.\n\nIf the character is `Q`, it represents a customer query, followed by three integers $A, B, K$ ($1 \\le A \\le B \\le N$), meaning to query how many books with code $K$ appear from position $A$ to position $B$ (inclusive).", "outputFormat": "For each customer query, output one integer representing the result of the query.", "hint": "For $40\\%$ of the testdata, $1 \\le N, M \\le 5000$.\n\nFor $100\\%$ of the testdata, $1 \\le N, M \\le {10}^5$.\n\nFor $100\\%$ of the testdata, all book codes that appear are positive integers not greater than $2^{31} - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 郁闷的小 J", "background": "", "description": "小 J 是国家图书馆的一位图书管理员，他的工作是管理一个巨大的书架。虽然他很能吃苦耐劳，但是由于这个书架十分巨大，所以他的工作效率总是很低，以致他面临着被解雇的危险，这也正是他所郁闷的。\n\n具体说来，书架由 $N$ 个书位组成，编号从 $1$ 到 $N$。每个书位放着一本书，每本书有一个特定的编码。\n\n小 J 的工作有两类：\n\n1. 图书馆经常购置新书，而书架任意时刻都是满的，所以只得将某位置的书拿掉并换成新购的书。\n\n2. 小 J 需要回答顾客的查询，顾客会询问某一段连续的书位中某一特定编码的书有多少本。\n\n例如，共 $5$ 个书位，开始时书位上的书编码为 $1, 2, 3, 4, 5$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$1$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$1$。\n\n此时，图书馆购进一本编码为“$1$”的书，并将它放到 $2$ 号书位。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$2$”的书共多少本，得到的回答为：$0$。\n\n一位顾客询问书位 $1$ 到书位 $3$ 中编码为“$1$”的书共多少本，得到的回答为：$2$。\n\n……\n\n你的任务是写一个程序来回答每个顾客的询问。", "inputFormat": "第一行两个整数 $N, M$，表示一共 $N$ 个书位，$M$ 个操作。\n\n接下来一行共 $N$ 个整数数 $A_1, A_2, \\ldots , A_N$，$A_i$ 表示开始时位置 $i$ 上的书的编码。\n\n接下来 $M$ 行，每行表示一次操作，每行开头一个字符。\n\n若字符为 `C`，表示图书馆购进新书，后接两个整数 $A, P$（$1 \\le A \\le N$），表示这本书被放在位置 $A$ 上，以及这本书的编码为 $P$。\n\n若字符为 `Q`，表示一个顾客的查询，后接三个整数 $A, B, K$（$1 \\le A \\le B \\le N$），表示查询从第 $A$ 书位到第 $B$ 书位（包含 $A$ 和 $B$）中编码为 $K$ 的书共多少本。", "outputFormat": "对每一个顾客的查询，输出一个整数，表示顾客所要查询的结果。", "hint": "对于 $40 \\%$ 的数据，$1 \\le N, M \\le 5000$。\n\n对于 $100 \\%$ 的数据，$1 \\le N, M \\le {10}^5$。\n\n对于 $100 \\%$ 的数据，所有出现的书的编码为不大于 $2^{31} - 1$ 的正数。", "locale": "zh-CN"}}}
{"pid": "P2465", "type": "P", "difficulty": 6, "samples": [["2 1\n1 2\n2 \n1\n1\n3 1 1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "山东", "O2优化", "枚举", "状压 DP"], "title": "[SDOI2008] 山贼集团", "background": "", "description": "某山贼集团在绿荫村拥有强大的势力。整个绿荫村由 $n$ 个连通的小村落组成，并且保证对于每两个小村落有且仅有一条简单路径相连。将小村落从 $1$ 至 $n$ 编号，山贼集团的总部设在编号为 $1$ 的小村落中。\n\n山贼集团除了老大坐镇总部以外，其他的 $p$ 个部门希望在村落的其他地方（洛谷注：其实也包括总部）建立分部。$p$ 个分部可以在同一个小村落中建设，也可以分别建设在不同的小村落中，在不同的村落建设不同的分部需要花费不同的费用。\n\n每个分部到总部的路径称为这个部门的管辖范围，于是这 $p$ 个分部的管辖范围可能重叠，或者完全相同。当多个分部管辖同一个村落时，他们之间可能发生矛盾，从而损失一部分利益，也可能相互合作，从而获取一部分利益。\n\n请注意，如果相同的分部同时管辖多个村落，那么对于每个村落，都会计算一次收益损失/获取。\n\n现在请你编写一个程序，确定 $p$ 个分部的位置，使得山贼集团能够获得最大的收益。", "inputFormat": "输入的第一行有两个整数，分别代表村落数 $n$ 和山贼集团部门数量 $p$。\n\n第 $2$ 到第 $n$ 行，每行有两个整数 $x, y$，代表存在一条连接村落 $x$ 和村落 $y$ 的道路。\n\n第 $(n + 1)$ 到第 $2n$ 行，每行 $p$ 个整数，第 $(i + n)$ 行的第 $j$ 个整数代表在第 $i$ 个村落建设第 $j$ 个部门的花费 $a_{i, j}$。\n\n第 $(2n + 1)$ 行有一个整数，代表集团间相互影响利益的信息条数 $t$。\n\n第 $(2n + 2)$ 行到第 $(2n + t + 1)$ 行，每行首先有一个整数 $v$，若 $v$ 为正，则表示会获得额外的收益，$v$ 为负则表示会有损失。然后有一个整数 $c$，代表涉及分部的数量。接下来有 $c$ 个整数，分别代表涉及的分部 $x_i$。本条信息的含义为若这 $c$ 个分部同时管辖某个小村落（可能同时存在其他分部管辖该村落），则会产生额外收益或损失，其数值大小为 $|v|$。", "outputFormat": "输出一行一个整数代表最大的收益。", "hint": "#### 样例输入输出 1 解释\n\n在 $2$ 号节点建立 $1$ 号分部，花费为 $1$，则分部集合 $\\{1\\}$ 可以管辖 $1, 2$ 两个节点，根据第一条信息，该集合每管辖一个节点会产生 $3$ 的收益，因此总共产生了 $2 \\times 3 = 6$ 的收益，减去建立分部的花费，最大的收益为 $6 - 1 = 5$。可以证明不存在更优的方案。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，保证 $1 \\leq p \\leq 6$。\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq p \\leq 12$，$1 \\leq n \\leq 100$。\n- $1 \\leq s,t \\leq n$，$1 \\leq a_{i, j} \\leq 10^8$。\n- $1 \\leq t \\leq 2^p$，$1 \\leq |v| \\leq 10^8$，$1 \\leq c \\leq p$，$1 \\leq x_i \\leq p$ 且 $x_i$ 互不相同。\n- 答案的绝对值不超过 $10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Bandit Group", "background": "", "description": "A bandit syndicate holds great power in Green Shade Village. The whole Green Shade Village consists of $n$ connected hamlets, and it is guaranteed that for any two hamlets there is exactly one simple path between them. The hamlets are numbered from $1$ to $n$, and the syndicate’s headquarters is located in hamlet $1$.\n\nBesides the boss stationed at the headquarters, the other $p$ departments want to establish branches elsewhere in the village (Luogu note: this actually also includes the headquarters). The $p$ branches can be built in the same hamlet or in different hamlets, and the cost of building different departments in different hamlets varies.\n\nThe path from each branch to the headquarters is defined as that department’s coverage. Therefore, the coverages of these $p$ branches may overlap or even be exactly the same. When multiple branches cover the same hamlet, conflicts may occur and cause some loss of profit, or cooperation may occur and generate some profit.\n\nPlease note that if the same set of branches simultaneously covers multiple hamlets, then the profit/loss for that set is counted once for each such hamlet.\n\nNow you are to write a program to determine the locations of the $p$ branches so that the syndicate’s profit is maximized.", "inputFormat": "- Line 1: Two integers $n$ and $p$, the number of hamlets and the number of departments.\n- Lines $2$ to $n$: Each line contains two integers $x, y$, indicating a road between hamlet $x$ and hamlet $y$.\n- Lines $(n + 1)$ to $2n$: Each line contains $p$ integers. On line $(i + n)$, the $j$-th integer is the cost $a_{i, j}$ of building department $j$ in hamlet $i$.\n- Line $(2n + 1)$: An integer $t$, the number of inter-department influence items.\n- Lines $(2n + 2)$ to $(2n + t + 1)$: Each line starts with an integer $v$; if $v$ is positive, extra profit is gained, and if $v$ is negative, a loss occurs. Then an integer $c$, the number of involved departments. Then $c$ integers, the involved departments $x_i$. The meaning is: if these $c$ departments simultaneously cover some hamlet (possibly along with other departments also covering that hamlet), then an extra profit or loss of $|v|$ is applied for each such hamlet.", "outputFormat": "Output a single integer, the maximum achievable profit.", "hint": "Explanation for Sample 1:\n\nIf department $1$ is built at node $2$, the cost is $1$. Then the set of branches $\\{1\\}$ covers nodes $1$ and $2$. According to the first influence item, this set yields a profit of $3$ per covered node, so the total profit is $2 \\times 3 = 6$. Subtracting the building cost, the maximum profit is $6 - 1 = 5$. It can be proven that no better plan exists.\n\nConstraints:\n\n- For $40\\%$ of the testdata, $1 \\leq p \\leq 6$.\n- For $100\\%$ of the testdata, it is guaranteed that:\n  - $1 \\leq p \\leq 12$, $1 \\leq n \\leq 100$.\n  - $1 \\leq a_{i, j} \\leq 10^8$.\n  - $1 \\leq t \\leq 2^p$, $1 \\leq |v| \\leq 10^8$, $1 \\leq c \\leq p$, $1 \\leq x_i \\leq p$, and the $x_i$ are pairwise distinct.\n  - The absolute value of the answer does not exceed $10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 山贼集团", "background": "", "description": "某山贼集团在绿荫村拥有强大的势力。整个绿荫村由 $n$ 个连通的小村落组成，并且保证对于每两个小村落有且仅有一条简单路径相连。将小村落从 $1$ 至 $n$ 编号，山贼集团的总部设在编号为 $1$ 的小村落中。\n\n山贼集团除了老大坐镇总部以外，其他的 $p$ 个部门希望在村落的其他地方（洛谷注：其实也包括总部）建立分部。$p$ 个分部可以在同一个小村落中建设，也可以分别建设在不同的小村落中，在不同的村落建设不同的分部需要花费不同的费用。\n\n每个分部到总部的路径称为这个部门的管辖范围，于是这 $p$ 个分部的管辖范围可能重叠，或者完全相同。当多个分部管辖同一个村落时，他们之间可能发生矛盾，从而损失一部分利益，也可能相互合作，从而获取一部分利益。\n\n请注意，如果相同的分部同时管辖多个村落，那么对于每个村落，都会计算一次收益损失/获取。\n\n现在请你编写一个程序，确定 $p$ 个分部的位置，使得山贼集团能够获得最大的收益。", "inputFormat": "输入的第一行有两个整数，分别代表村落数 $n$ 和山贼集团部门数量 $p$。\n\n第 $2$ 到第 $n$ 行，每行有两个整数 $x, y$，代表存在一条连接村落 $x$ 和村落 $y$ 的道路。\n\n第 $(n + 1)$ 到第 $2n$ 行，每行 $p$ 个整数，第 $(i + n)$ 行的第 $j$ 个整数代表在第 $i$ 个村落建设第 $j$ 个部门的花费 $a_{i, j}$。\n\n第 $(2n + 1)$ 行有一个整数，代表集团间相互影响利益的信息条数 $t$。\n\n第 $(2n + 2)$ 行到第 $(2n + t + 1)$ 行，每行首先有一个整数 $v$，若 $v$ 为正，则表示会获得额外的收益，$v$ 为负则表示会有损失。然后有一个整数 $c$，代表涉及分部的数量。接下来有 $c$ 个整数，分别代表涉及的分部 $x_i$。本条信息的含义为若这 $c$ 个分部同时管辖某个小村落（可能同时存在其他分部管辖该村落），则会产生额外收益或损失，其数值大小为 $|v|$。", "outputFormat": "输出一行一个整数代表最大的收益。", "hint": "#### 样例输入输出 1 解释\n\n在 $2$ 号节点建立 $1$ 号分部，花费为 $1$，则分部集合 $\\{1\\}$ 可以管辖 $1, 2$ 两个节点，根据第一条信息，该集合每管辖一个节点会产生 $3$ 的收益，因此总共产生了 $2 \\times 3 = 6$ 的收益，减去建立分部的花费，最大的收益为 $6 - 1 = 5$。可以证明不存在更优的方案。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，保证 $1 \\leq p \\leq 6$。\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq p \\leq 12$，$1 \\leq n \\leq 100$。\n- $1 \\leq s,t \\leq n$，$1 \\leq a_{i, j} \\leq 10^8$。\n- $1 \\leq t \\leq 2^p$，$1 \\leq |v| \\leq 10^8$，$1 \\leq c \\leq p$，$1 \\leq x_i \\leq p$ 且 $x_i$ 互不相同。\n- 答案的绝对值不超过 $10^8$。", "locale": "zh-CN"}}}
{"pid": "P2466", "type": "P", "difficulty": 5, "samples": [["3 0\n-4 -2 2\n22 30 26\n1 9 8\n", "0.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2008", "各省省选", "山东", "区间 DP"], "title": "[SDOI2008] Sue 的小球", "background": null, "description": "Sue 和 Sandy 最近迷上了一个电脑游戏，这个游戏的故事发在美丽神秘并且充满刺激的大海上，Sue 有一支轻便小巧的小船。然而，Sue 的目标并不是当一个海盗，而是要收集空中漂浮的彩蛋，Sue 有一个秘密武器，只要她将小船划到一个彩蛋的**正下方或正上方**，然后使用秘密武器便可以在瞬间收集到这个彩蛋。然而，彩蛋有一个魅力值，这个魅力值会随着彩蛋在空中降落的时间而降低，Sue 要想得到更多的分数，必须尽量在魅力值高的时候收集这个彩蛋，而如果一个彩蛋掉入海中，它的魅力值将会变成一个负数，但这并不影响 Sue 的兴趣，因为每一个彩蛋都是不同的，Sue 希望收集到所有的彩蛋。\n\n然而 Sandy 就没有 Sue 那么浪漫了，Sandy 希望得到尽可能多的分数，为了解决这个问题，他先将这个游戏抽象成了如下模型：\n\n将大海近似的看做 $x$ 轴建立一个竖直的平面直角坐标系，Sue 所在的初始位置在 $x$ 轴上。\n\n一开始空中有 $N$ 个彩蛋，对于第 $i$ 个彩蛋，他的初始位置用整数坐标 $(x_{i}, y_{i})$ 表示，游戏开始后，它匀速沿 $y$ 轴负方向下落,速度为 $v_{i}$ 单位距离/单位时间。Sue 的初始位置为 $(x_{0}, 0)$，Sue 可以沿 $x$ 轴的正方向或负方向移动，Sue 的移动速度是 $1$ 单位距离/单位时间，使用秘密武器得到一个彩蛋是瞬间的，得分为当前彩蛋的 $y$ 坐标的千分之一。\n\n现在，Sue 和 Sandy 请你来帮忙，为了满足 Sue 和 Sandy 各自的目标，你决定在收集到所有彩蛋的基础上，得到的分数最高。", "inputFormat": "第一行为两个整数 $N$, $x_{0}$ 用一个空格分隔，表示彩蛋个数与 Sue 的初始位置。\n\n第二行为 $N$ 个整数 $x_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始横坐标。\n\n第三行为 $N$ 个整数 $y_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始纵坐标。\n\n第四行为 $N$ 个整数 $v_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋匀速沿 $y$ 轴负方向下落的的速度。", "outputFormat": "一个实数，保留三位小数，为收集所有彩蛋的基础上，可以得到最高的分数。", "hint": "对于 $30\\%$ 的数据， $N\\leq 20$。\n\n对于 $60\\%$ 的数据， $N\\leq 100$。\n\n对于 $100\\%$ 的数据，$-10^4 \\leq x_{i},y_{i} \\leq 10^4$，$0\\leq v_{i} \\leq 10^4$，$N \\leq 1000$", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Sue's Little Balls", "background": "", "description": "Sue and Sandy have recently become obsessed with a computer game. The story takes place above a beautiful, mysterious, and thrilling sea. Sue has a small, light boat. However, her goal is not to be a pirate, but to collect colorful eggs floating in the air. Sue has a secret weapon: as long as she rows her boat to a position directly beneath an egg and uses the secret weapon, she can collect that egg instantly. Each egg has a charm value that decreases as the egg falls in the air over time. To score more points, Sue must collect the egg when its charm value is high. If an egg falls into the sea, its charm value becomes a negative number, but that does not dampen Sue's interest, because each egg is unique, and Sue hopes to collect them all.\n\nSandy is not as romantic as Sue. He wants to get as many points as possible. To solve this, he abstracts the game into the following model:\n\nApproximate the sea surface as the $x$-axis and set up a vertical Cartesian coordinate plane. Sue's initial position is on the $x$-axis.\n\nInitially there are $N$ eggs in the air. For the $i$-th egg, its initial position is the integer coordinate $(x_{i}, y_{i})$. After the game starts, it falls uniformly along the negative $y$-axis with speed $v_{i}$ units of distance per unit time. Sue's initial position is $(x_{0}, 0)$. Sue can move along the positive or negative direction of the $x$-axis, at speed $1$ unit of distance per unit time. Collecting an egg with the secret weapon is instantaneous, and the score equals one-thousandth of the egg's current $y$-coordinate.\n\nNow, Sue and Sandy ask for your help. To satisfy both of their goals, you decide to collect all the eggs while achieving the highest possible total score.", "inputFormat": "The first line contains two integers $N$, $x_{0}$ separated by a space, representing the number of eggs and Sue's initial position.\n\nThe second line contains $N$ integers $x_{i}$ separated by spaces. The $i$-th number is the initial $x$-coordinate of the $i$-th egg.\n\nThe third line contains $N$ integers $y_{i}$ separated by spaces. The $i$-th number is the initial $y$-coordinate of the $i$-th egg.\n\nThe fourth line contains $N$ integers $v_{i}$ separated by spaces. The $i$-th number is the speed at which the $i$-th egg falls uniformly along the negative $y$-axis.", "outputFormat": "Output a real number, rounded to three decimal places: the maximum score achievable while collecting all the eggs.", "hint": "For 30% of the testdata, $N \\leq 20$.\n\nFor 60% of the testdata, $N \\leq 100$.\n\nConstraints: for 100% of the testdata, $-10^4 \\leq x_{i}, y_{i} \\leq 10^4$, $0 \\leq v_{i} \\leq 10^4$, $N \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] Sue 的小球", "background": null, "description": "Sue 和 Sandy 最近迷上了一个电脑游戏，这个游戏的故事发在美丽神秘并且充满刺激的大海上，Sue 有一支轻便小巧的小船。然而，Sue 的目标并不是当一个海盗，而是要收集空中漂浮的彩蛋，Sue 有一个秘密武器，只要她将小船划到一个彩蛋的**正下方或正上方**，然后使用秘密武器便可以在瞬间收集到这个彩蛋。然而，彩蛋有一个魅力值，这个魅力值会随着彩蛋在空中降落的时间而降低，Sue 要想得到更多的分数，必须尽量在魅力值高的时候收集这个彩蛋，而如果一个彩蛋掉入海中，它的魅力值将会变成一个负数，但这并不影响 Sue 的兴趣，因为每一个彩蛋都是不同的，Sue 希望收集到所有的彩蛋。\n\n然而 Sandy 就没有 Sue 那么浪漫了，Sandy 希望得到尽可能多的分数，为了解决这个问题，他先将这个游戏抽象成了如下模型：\n\n将大海近似的看做 $x$ 轴建立一个竖直的平面直角坐标系，Sue 所在的初始位置在 $x$ 轴上。\n\n一开始空中有 $N$ 个彩蛋，对于第 $i$ 个彩蛋，他的初始位置用整数坐标 $(x_{i}, y_{i})$ 表示，游戏开始后，它匀速沿 $y$ 轴负方向下落,速度为 $v_{i}$ 单位距离/单位时间。Sue 的初始位置为 $(x_{0}, 0)$，Sue 可以沿 $x$ 轴的正方向或负方向移动，Sue 的移动速度是 $1$ 单位距离/单位时间，使用秘密武器得到一个彩蛋是瞬间的，得分为当前彩蛋的 $y$ 坐标的千分之一。\n\n现在，Sue 和 Sandy 请你来帮忙，为了满足 Sue 和 Sandy 各自的目标，你决定在收集到所有彩蛋的基础上，得到的分数最高。", "inputFormat": "第一行为两个整数 $N$, $x_{0}$ 用一个空格分隔，表示彩蛋个数与 Sue 的初始位置。\n\n第二行为 $N$ 个整数 $x_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始横坐标。\n\n第三行为 $N$ 个整数 $y_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋的初始纵坐标。\n\n第四行为 $N$ 个整数 $v_{i}$，每两个数用一个空格分隔，第 $i$ 个数表示第 $i$ 个彩蛋匀速沿 $y$ 轴负方向下落的的速度。", "outputFormat": "一个实数，保留三位小数，为收集所有彩蛋的基础上，可以得到最高的分数。", "hint": "对于 $30\\%$ 的数据， $N\\leq 20$。\n\n对于 $60\\%$ 的数据， $N\\leq 100$。\n\n对于 $100\\%$ 的数据，$-10^4 \\leq x_{i},y_{i} \\leq 10^4$，$0\\leq v_{i} \\leq 10^4$，$N \\leq 1000$", "locale": "zh-CN"}}}
{"pid": "P2467", "type": "P", "difficulty": 5, "samples": [["4 7", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2010", "各省省选", "离散化", "山东"], "title": "[SDOI2010] 地精部落", "background": "", "description": "传说很久以前，大地上居住着一种神秘的生物：地精。\n\n地精喜欢住在连绵不绝的山脉中。具体地说，一座长度为 $n$ 的山脉 $h$ 可分为从左到右的 $n$ 段，每段有一个**独一无二**的高度 $h_i$，其中 $h_i$ 是 $1$ 到 $n$ 之间的正整数。\n\n如果一段山脉比所有与它相邻的山脉都高，则这段山脉是一个山峰。位于边缘的山脉只有一段相邻的山脉，其他都有两段（即左边和右边）。\n\n类似地，如果一段山脉比所有它相邻的山脉都低，则这段山脉是一个山谷。\n\n地精们有一个共同的爱好——饮酒，酒馆可以设立在山谷之中。地精的酒馆不论白天黑夜总是人声鼎沸，地精美酒的香味可以飘到方圆数里的地方。\n\n地精还是一种非常警觉的生物，他们在每座山峰上都可以设立瞭望台，并轮流担当瞭望工作，以确保在第一时间得知外敌的入侵。\n\n地精们希望这 $n$ 段山脉每段都可以修建瞭望台或酒馆的其中之一，只有满足这个条件的整座山脉才可能有地精居住。\n\n现在你希望知道，长度为 $n$ 的可能有地精居住的山脉有多少种。两座山脉 $a$ 和 $b$ 不同当且仅当存在一个 $i$，使得 $a_i\\ne b_i$。由于这个数目可能很大，你只对它除以 $p$ 的余数感兴趣。", "inputFormat": "一行，两个正整数 $n,p$。\n", "outputFormat": "一个非负整数，表示你所求的答案对 $p$ 取余之后的结果。\n", "hint": "共有 $10$ 种可能的山脉，它们是：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh1bw5gr.png)\n\n其中标记的数字表示可以设立瞭望台的山峰，其它表示可以设立酒馆的山谷。\n\n**【数据规模和约定】**\n\n对于 $20\\%$ 的数据，满足 $N \\le 10$；\n\n对于 $40\\%$ 的数据，满足 $N \\le 18$；\n\n对于 $70\\%$ 的数据，满足 $N \\le 550$；\n\n对于 $100\\%$ 的数据，满足 $3 \\le N \\le 4200$，$P \\le 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Goblin Tribe", "background": "", "description": "Legend has it that a long time ago, there lived a mysterious creature on the earth: the goblin.\n\nGoblins like to live in continuous mountain ranges. Specifically, a mountain range $h$ of length $n$ can be divided from left to right into $n$ segments, each with a unique height $h_i$, where $h_i$ is a positive integer between $1$ and $n$.\n\nIf a segment is higher than all of its adjacent segments, then this segment is a peak. A segment at the edge has only one adjacent segment; all others have two (i.e., one on the left and one on the right).\n\nSimilarly, if a segment is lower than all of its adjacent segments, then this segment is a valley.\n\nGoblins share a hobby—drinking, and taverns can be set up in valleys. Goblin taverns are always bustling day and night, and the aroma of goblin wine can spread for miles.\n\nGoblins are also highly alert. They can set up watchtowers on every peak and take turns on watch to ensure they learn of any invasion at the first moment.\n\nThe goblins hope that each of the $n$ segments can have either a watchtower or a tavern. Only a mountain range that satisfies this condition could be inhabited by goblins.\n\nNow you want to know how many mountain ranges of length $n$ could possibly be inhabited by goblins. Two mountain ranges $a$ and $b$ are different if and only if there exists an $i$ such that $a_i \\ne b_i$. Since this number can be large, you are only interested in its remainder modulo $p$.", "inputFormat": "One line with two positive integers $n, p$.", "outputFormat": "A non-negative integer, the result of the required answer modulo $p$.", "hint": "There are $10$ possible mountain ranges, which are:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh1bw5gr.png)\n\nThe marked numbers indicate peaks where watchtowers can be set up; the others indicate valleys where taverns can be set up.\n\nConstraints\n\n- For $20\\%$ of the testdata, $N \\le 10$.\n- For $40\\%$ of the testdata, $N \\le 18$.\n- For $70\\%$ of the testdata, $N \\le 550$.\n- For $100\\%$ of the testdata, $3 \\le N \\le 4200$, $P \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 地精部落", "background": "", "description": "传说很久以前，大地上居住着一种神秘的生物：地精。\n\n地精喜欢住在连绵不绝的山脉中。具体地说，一座长度为 $n$ 的山脉 $h$ 可分为从左到右的 $n$ 段，每段有一个**独一无二**的高度 $h_i$，其中 $h_i$ 是 $1$ 到 $n$ 之间的正整数。\n\n如果一段山脉比所有与它相邻的山脉都高，则这段山脉是一个山峰。位于边缘的山脉只有一段相邻的山脉，其他都有两段（即左边和右边）。\n\n类似地，如果一段山脉比所有它相邻的山脉都低，则这段山脉是一个山谷。\n\n地精们有一个共同的爱好——饮酒，酒馆可以设立在山谷之中。地精的酒馆不论白天黑夜总是人声鼎沸，地精美酒的香味可以飘到方圆数里的地方。\n\n地精还是一种非常警觉的生物，他们在每座山峰上都可以设立瞭望台，并轮流担当瞭望工作，以确保在第一时间得知外敌的入侵。\n\n地精们希望这 $n$ 段山脉每段都可以修建瞭望台或酒馆的其中之一，只有满足这个条件的整座山脉才可能有地精居住。\n\n现在你希望知道，长度为 $n$ 的可能有地精居住的山脉有多少种。两座山脉 $a$ 和 $b$ 不同当且仅当存在一个 $i$，使得 $a_i\\ne b_i$。由于这个数目可能很大，你只对它除以 $p$ 的余数感兴趣。", "inputFormat": "一行，两个正整数 $n,p$。\n", "outputFormat": "一个非负整数，表示你所求的答案对 $p$ 取余之后的结果。\n", "hint": "共有 $10$ 种可能的山脉，它们是：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh1bw5gr.png)\n\n其中标记的数字表示可以设立瞭望台的山峰，其它表示可以设立酒馆的山谷。\n\n**【数据规模和约定】**\n\n对于 $20\\%$ 的数据，满足 $N \\le 10$；\n\n对于 $40\\%$ 的数据，满足 $N \\le 18$；\n\n对于 $70\\%$ 的数据，满足 $N \\le 550$；\n\n对于 $100\\%$ 的数据，满足 $3 \\le N \\le 4200$，$P \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2468", "type": "P", "difficulty": 6, "samples": [["5 5 7\n14 15 9 26 53\n58 9 7 9 32\n38 46 26 43 38\n32 7 9 50 28\n8 41 9 7 17\n1 2 5 3 139\n3 1 5 5 399\n3 3 4 5 91\n4 1 4 1 33\n1 3 5 4 185\n3 3 4 3 23\n3 1 3 3 108", "6\n15\n2\nPoor QLW\n9\n1\n3"], ["1 10 7\n14 15 9 26 53 58 9 7 9 32\n1 2 1 9 170\n1 2 1 9 171\n1 5 1 7 115\n1 1 1 10 228\n1 4 1 4 45704571\n1 1 1 1 1\n1 7 1 8 16", "6\n7\n3\n10\nPoor QLW\n1\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2010", "二分", "各省省选", "山东", "枚举", "可持久化线段树"], "title": "[SDOI2010] 粟粟的书架", "background": "", "description": "幸福幼儿园 B29 班的粟粟是一个聪明机灵、乖巧可爱的小朋友，她的爱好是画画和读书，尤其喜欢 Thomas H. Cormen 的文章。粟粟家中有一个 $R$ 行 $C$ 列的巨型书架，书架的每一个位置都摆有一本书，上数第 $i$ 行、左数第 $j$ 列摆放的书有 $P_{i,j}$ 页厚。\n\n粟粟每天除了读书之外，还有一件必不可少的工作就是摘苹果，她每天必须摘取一个指定的苹果。粟粟家果树上的苹果有的高、有的低，但无论如何凭粟粟自己的个头都难以摘到。不过她发现，如果在脚下放上几本书，就可以够着苹果；她同时注意到，对于第 $i$ 天指定的那个苹果，只要她脚下放置书的总页数之和不低于 $H_i$，就一定能够摘到。\n\n由于书架内的书过多，父母担心粟粟一天内就把所有书看完而耽误了上幼儿园，于是每天只允许粟粟在一个特定区域内拿书。这个区域是一个矩形，第 $i$ 天给定区域的左上角是上数第$x1_i$ 行的左数第 $y1_i$ 本书，右下角是上数第 $x2_i$ 行的左数第 $y2_i$ 本书。换句话说，粟粟在这一天，只能在这 $(x2_i－x1_i＋1)\\times(y2_i－y1_i＋1)$ 本书中挑选若干本垫在脚下，摘取苹果。\n\n粟粟每次取书时都能及时放回原位，并且她的书架不会再撤下书目或换上新书，摘苹果的任务会一直持续 $M$ 天。给出每本书籍的页数和每天的区域限制及采摘要求，请你告诉粟粟，她每天至少拿取多少本书，就可以摘到当天指定的苹果。\n", "inputFormat": "第一行是三个正整数 $R, C, M$。\n\n接下来是一个 $R$ 行 $C$ 列的矩阵，从上到下、从左向右依次给出了每本书的页数 $P_{i,j}$。\n\n接下来 $M$ 行，第 $i$ 行给出正整数 $x1_i, y1_i, x2_i, y2_i, H_i$，表示第 $i$ 天的指定区域是 $(x1_i, y1_i)$ 与 $(x2_i, y2_i)$ 间的矩形，总页数之和要求不低于Hi。\n\n保证 $1\\le x1_i\\le x2_i\\le R$，$1\\le y1_i\\le y2_i\\le C$。\n", "outputFormat": "输出共 $M$ 行，第 $i$ 行回答粟粟在第 $i$ 天时为摘到苹果至少需要拿取多少本书。如果即使取走所有书都无法摘到苹果，则在该行输出 `Poor QLW`。\n", "hint": "对于 $10\\%$ 的数据，满足 $R, C\\le10$。\n\n对于 $20\\%$ 的数据，满足 $R, C\\le 40$。\n\n对于 $50\\%$ 的数据，满足 $R, C\\le 200$，$M\\le 2\\times 10^5$。\n\n另有 $50\\%$ 的数据，满足 $R＝1$，$C\\le 5\\times 10^5$，$M\\le 2\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\le P_{i,j}\\le 1000$，$1\\le H_i\\le 2\\times 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Susu's Bookshelf", "background": "", "description": "Susu from Class B29 of Xingfu Kindergarten is a smart, obedient, and adorable child. Her hobbies are drawing and reading, and she especially likes the articles by Thomas H. Cormen. Susu’s home has a giant bookshelf with $R$ rows and $C$ columns, with one book at every position. The book at the $i$-th row from the top and the $j$-th column from the left has $P_{i,j}$ pages.\n\nBesides reading, Susu has another essential daily task: picking apples. Each day she must pick a specific apple. The apples on her family’s trees are at various heights, and she cannot reach them on her own. However, she found that if she stands on some books, she can reach the apples. She also noticed that for the apple designated on day $i$, as long as the total number of pages of the books under her feet is at least $H_i$, she will definitely be able to pick it.\n\nBecause there are too many books, her parents worry she might finish reading all of them in one day and be late for kindergarten, so each day they only allow her to take books from a specific region. This region is a rectangle: on day $i$, the top-left corner is the book at row $x1_i$ and column $y1_i$, and the bottom-right corner is the book at row $x2_i$ and column $y2_i$. In other words, on that day, she can only select some books from these $(x2_i - x1_i + 1) \\times (y2_i - y1_i + 1)$ books to stand on and pick the apple.\n\nEach time Susu takes books, she returns them promptly to their original places, and the bookshelf will not have books removed or added. The apple-picking task continues for $M$ days. Given the number of pages of each book, the daily region restrictions, and the picking requirement, please tell Susu the minimum number of books she must take each day to pick the specified apple.", "inputFormat": "The first line contains three positive integers $R, C, M$.\n\nNext is a matrix with $R$ rows and $C$ columns. From top to bottom and left to right, it gives the number of pages $P_{i,j}$ of each book.\n\nThen follow $M$ lines. The $i$-th line contains five positive integers $x1_i, y1_i, x2_i, y2_i, H_i$, meaning that on day $i$ the designated region is the rectangle between $(x1_i, y1_i)$ and $(x2_i, y2_i)$, and the required total number of pages is at least $H_i$.\n\nIt is guaranteed that $1 \\le x1_i \\le x2_i \\le R$ and $1 \\le y1_i \\le y2_i \\le C$.", "outputFormat": "Output $M$ lines. On the $i$-th line, print the minimum number of books Susu needs on day $i$ to pick the apple. If she cannot pick the apple even by taking all books in the region, print `Poor QLW`.", "hint": "For $10\\%$ of the testdata, $R, C \\le 10$.\n\nFor $20\\%$ of the testdata, $R, C \\le 40$.\n\nFor $50\\%$ of the testdata, $R, C \\le 200$, $M \\le 2 \\times 10^5$.\n\nAdditionally, for $50\\%$ of the testdata, $R = 1$, $C \\le 5 \\times 10^5$, $M \\le 2 \\times 10^4$.\n\nFor $100\\%$ of the testdata, $1 \\le P_{i,j} \\le 1000$, $1 \\le H_i \\le 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 粟粟的书架", "background": "", "description": "幸福幼儿园 B29 班的粟粟是一个聪明机灵、乖巧可爱的小朋友，她的爱好是画画和读书，尤其喜欢 Thomas H. Cormen 的文章。粟粟家中有一个 $R$ 行 $C$ 列的巨型书架，书架的每一个位置都摆有一本书，上数第 $i$ 行、左数第 $j$ 列摆放的书有 $P_{i,j}$ 页厚。\n\n粟粟每天除了读书之外，还有一件必不可少的工作就是摘苹果，她每天必须摘取一个指定的苹果。粟粟家果树上的苹果有的高、有的低，但无论如何凭粟粟自己的个头都难以摘到。不过她发现，如果在脚下放上几本书，就可以够着苹果；她同时注意到，对于第 $i$ 天指定的那个苹果，只要她脚下放置书的总页数之和不低于 $H_i$，就一定能够摘到。\n\n由于书架内的书过多，父母担心粟粟一天内就把所有书看完而耽误了上幼儿园，于是每天只允许粟粟在一个特定区域内拿书。这个区域是一个矩形，第 $i$ 天给定区域的左上角是上数第$x1_i$ 行的左数第 $y1_i$ 本书，右下角是上数第 $x2_i$ 行的左数第 $y2_i$ 本书。换句话说，粟粟在这一天，只能在这 $(x2_i－x1_i＋1)\\times(y2_i－y1_i＋1)$ 本书中挑选若干本垫在脚下，摘取苹果。\n\n粟粟每次取书时都能及时放回原位，并且她的书架不会再撤下书目或换上新书，摘苹果的任务会一直持续 $M$ 天。给出每本书籍的页数和每天的区域限制及采摘要求，请你告诉粟粟，她每天至少拿取多少本书，就可以摘到当天指定的苹果。\n", "inputFormat": "第一行是三个正整数 $R, C, M$。\n\n接下来是一个 $R$ 行 $C$ 列的矩阵，从上到下、从左向右依次给出了每本书的页数 $P_{i,j}$。\n\n接下来 $M$ 行，第 $i$ 行给出正整数 $x1_i, y1_i, x2_i, y2_i, H_i$，表示第 $i$ 天的指定区域是 $(x1_i, y1_i)$ 与 $(x2_i, y2_i)$ 间的矩形，总页数之和要求不低于Hi。\n\n保证 $1\\le x1_i\\le x2_i\\le R$，$1\\le y1_i\\le y2_i\\le C$。\n", "outputFormat": "输出共 $M$ 行，第 $i$ 行回答粟粟在第 $i$ 天时为摘到苹果至少需要拿取多少本书。如果即使取走所有书都无法摘到苹果，则在该行输出 `Poor QLW`。\n", "hint": "对于 $10\\%$ 的数据，满足 $R, C\\le10$。\n\n对于 $20\\%$ 的数据，满足 $R, C\\le 40$。\n\n对于 $50\\%$ 的数据，满足 $R, C\\le 200$，$M\\le 2\\times 10^5$。\n\n另有 $50\\%$ 的数据，满足 $R＝1$，$C\\le 5\\times 10^5$，$M\\le 2\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\le P_{i,j}\\le 1000$，$1\\le H_i\\le 2\\times 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2469", "type": "P", "difficulty": 6, "samples": [["3 3\r\n1 100 100\r\n2 1 10\r\n1 3 1\r\n2 3 1", "12"], ["3 3\r\n1 2 3\r\n1 2 100\r\n1 3 100\r\n2 3 100", "6"], ["4 5\r\n100 1000 10 100\r\n1 2 100\r\n2 3 100\r\n4 3 100\r\n1 3 20\r\n2 4 20", "230"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2010", "各省省选", "网络流", "山东", "费用流"], "title": "[SDOI2010] 星际竞速", "background": null, "description": "10 年一度的银河系赛车大赛又要开始了。作为全银河最盛大的活动之一，夺得这个项目的冠军无疑是很多人的梦想，来自杰森座 $\\alpha$ 星的悠悠也是其中之一。\n\n赛车大赛的赛场由 $N$ 颗行星和 $M$ 条双向星际航路构成，其中每颗行星都有一个不同的引力值。大赛要求车手们从一颗与这 $N$ 颗行星之间没有任何航路的天体出发，访问这 $N$ 颗行星每颗恰好一次，首先完成这一目标的人获得胜利。\n\n由于赛制非常开放，很多人驾驶着千奇百怪的自制赛车来参赛。这次悠悠驾驶的赛车名为超能电驴，这是一部凝聚了全银河最尖端科技结晶的梦幻赛车。作为最高科技的产物，超能电驴有两种移动模式：高速航行模式和能力爆发模式。在高速航行模式下，超能电驴会展开反物质引擎，以数倍于光速的速度沿星际航路高速航行。在能力爆发模式下，超能电驴脱离时空的束缚，使用超能力进行空间跳跃——在经过一段时间的定位之后，它能瞬间移动到任意一个行星。\n\n天不遂人愿，在比赛的前一天，超能电驴在一场离子风暴中不幸受损，机能出现了一些障碍：在使用高速航行模式的时候，只能由每个星球飞往引力比它大的星球，否则赛车就会发生爆炸。\n\n尽管心爱的赛车出了问题，但是悠悠仍然坚信自己可以取得胜利。他找到了全银河最聪明的贤者——你，请你为他安排一条比赛的方案，使得他能够用最少的时间完成比赛。", "inputFormat": "输入文件 starrace.in 的第一行是两个正整数 $N, M$。\n\n第二行 $N$ 个数 $A_1,\\cdots,A_N$，其中 $A_i$ 表示使用能力爆发模式到达行星 $i$ 所需的定位时间。\n\n接下来 $M$ 行，每行 $3$ 个正整数 $u_i, v_i, w_i$，表示在编号为 $u_i$ 和 $v_i$ 的行星之间存在一条需要航行 $w_i$ 时间的星际航路。\n\n输入数据已经按引力值排序，也就是编号小的行星引力值一定小，且不会有两颗行星引力值相同。", "outputFormat": "输出文件 starrace.out 仅包含一个正整数，表示完成比赛所需的最少时间。", "hint": "样例一说明：先使用能力爆发模式到行星 $1$，花费时间 $1$。\n\n然后切换到高速航行模式，航行到行星 $2$，花费时间 $10$。\n\n之后继续航行到行星 $3$ 完成比赛，花费时间 $1$。\n\n虽然看起来从行星 $1$ 到行星 $3$ 再到行星 $2$ 更优，但我们却不能那样做，因为那会导致超能电驴爆炸。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据 $N\\leq 20$，$M\\leq 50$；\n\n对于 $70\\%$ 的数据 $N\\leq 200$，$M\\leq 4\\times 10^3$；\n\n对于 $100\\%$ 的数据 $N\\leq 800$，$M\\leq 1.5\\times 10^4$。\n\n输入数据中的任何数都在 $1 \\sim 10^6$ 之间。\n\n输入数据保证任意两颗行星之间至多存在一条航道，且不会存在某颗行星到自己的航道。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2010] Interstellar Race", "background": "", "description": "The once-in-a-decade Milky Way Grand Prix is about to begin. As one of the biggest events in the galaxy, winning this championship is undoubtedly the dream of many. Youyou from the Jason constellation’s $\\alpha$ star is one of them.\n\nThe racecourse consists of $N$ planets and $M$ bidirectional interstellar routes. Each planet has a distinct gravity value. The race requires drivers to start from a celestial body that has no interstellar route to any of these $N$ planets, visit each of the $N$ planets exactly once, and the first to achieve this wins.\n\nThanks to the very open rules, many contestants drive all sorts of homemade vehicles. This time, Youyou is driving a car named “Super E-Donkey,” a dream machine embodying the most cutting-edge technology in the galaxy. As a pinnacle of technology, the Super E-Donkey has two movement modes: High-Speed Sailing mode and Ability Burst mode. In High-Speed Sailing mode, it deploys an antimatter engine to speed along interstellar routes at many times the speed of light. In Ability Burst mode, it breaks free from the constraints of spacetime and uses psychic power for spatial jumps—after a period of positioning, it can instantly teleport to any planet.\n\nUnfortunately, on the day before the race, the Super E-Donkey was damaged in an ion storm, causing some malfunctions: when using High-Speed Sailing mode, it can only fly from any planet to a planet with strictly greater gravity; otherwise, the car will explode.\n\nEven though his beloved car has issues, Youyou still believes he can win. He has found the wisest sage in the galaxy—you. Please plan a racing scheme for him so that he can finish the race in the minimum possible time.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThe second line contains $N$ integers $A_1,\\cdots,A_N$, where $A_i$ is the positioning time required to reach planet $i$ using Ability Burst mode.\n\nEach of the next $M$ lines contains three positive integers $u_i, v_i, w_i$, indicating that there is a bidirectional interstellar route between planets $u_i$ and $v_i$ that takes $w_i$ time to traverse.\n\nThe input is already sorted by gravity, meaning that a smaller-indexed planet has smaller gravity, and no two planets have the same gravity.", "outputFormat": "Output a single integer: the minimum time required to finish the race.", "hint": "Explanation for Sample 1: First use Ability Burst mode to reach planet $1$, costing time $1$.\n\nThen switch to High-Speed Sailing mode and travel to planet $2$, costing time $10$.\n\nAfter that, continue to planet $3$ to finish the race, costing time $1$.\n\nAlthough going from planet $1$ to $3$ and then to $2$ seems better, we cannot do that because it would cause the Super E-Donkey to explode.\n\nConstraints\n\n- For $30\\%$ of the testdata, $N \\leq 20$, $M \\leq 50$.\n- For $70\\%$ of the testdata, $N \\leq 200$, $M \\leq 4 \\times 10^3$.\n- For $100\\%$ of the testdata, $N \\leq 800$, $M \\leq 1.5 \\times 10^4$.\n- Every number in the input is between $1$ and $10^6$.\n- There is at most one route between any pair of planets, and there are no self-loops.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2010] 星际竞速", "background": null, "description": "10 年一度的银河系赛车大赛又要开始了。作为全银河最盛大的活动之一，夺得这个项目的冠军无疑是很多人的梦想，来自杰森座 $\\alpha$ 星的悠悠也是其中之一。\n\n赛车大赛的赛场由 $N$ 颗行星和 $M$ 条双向星际航路构成，其中每颗行星都有一个不同的引力值。大赛要求车手们从一颗与这 $N$ 颗行星之间没有任何航路的天体出发，访问这 $N$ 颗行星每颗恰好一次，首先完成这一目标的人获得胜利。\n\n由于赛制非常开放，很多人驾驶着千奇百怪的自制赛车来参赛。这次悠悠驾驶的赛车名为超能电驴，这是一部凝聚了全银河最尖端科技结晶的梦幻赛车。作为最高科技的产物，超能电驴有两种移动模式：高速航行模式和能力爆发模式。在高速航行模式下，超能电驴会展开反物质引擎，以数倍于光速的速度沿星际航路高速航行。在能力爆发模式下，超能电驴脱离时空的束缚，使用超能力进行空间跳跃——在经过一段时间的定位之后，它能瞬间移动到任意一个行星。\n\n天不遂人愿，在比赛的前一天，超能电驴在一场离子风暴中不幸受损，机能出现了一些障碍：在使用高速航行模式的时候，只能由每个星球飞往引力比它大的星球，否则赛车就会发生爆炸。\n\n尽管心爱的赛车出了问题，但是悠悠仍然坚信自己可以取得胜利。他找到了全银河最聪明的贤者——你，请你为他安排一条比赛的方案，使得他能够用最少的时间完成比赛。", "inputFormat": "输入文件 starrace.in 的第一行是两个正整数 $N, M$。\n\n第二行 $N$ 个数 $A_1,\\cdots,A_N$，其中 $A_i$ 表示使用能力爆发模式到达行星 $i$ 所需的定位时间。\n\n接下来 $M$ 行，每行 $3$ 个正整数 $u_i, v_i, w_i$，表示在编号为 $u_i$ 和 $v_i$ 的行星之间存在一条需要航行 $w_i$ 时间的星际航路。\n\n输入数据已经按引力值排序，也就是编号小的行星引力值一定小，且不会有两颗行星引力值相同。", "outputFormat": "输出文件 starrace.out 仅包含一个正整数，表示完成比赛所需的最少时间。", "hint": "样例一说明：先使用能力爆发模式到行星 $1$，花费时间 $1$。\n\n然后切换到高速航行模式，航行到行星 $2$，花费时间 $10$。\n\n之后继续航行到行星 $3$ 完成比赛，花费时间 $1$。\n\n虽然看起来从行星 $1$ 到行星 $3$ 再到行星 $2$ 更优，但我们却不能那样做，因为那会导致超能电驴爆炸。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据 $N\\leq 20$，$M\\leq 50$；\n\n对于 $70\\%$ 的数据 $N\\leq 200$，$M\\leq 4\\times 10^3$；\n\n对于 $100\\%$ 的数据 $N\\leq 800$，$M\\leq 1.5\\times 10^4$。\n\n输入数据中的任何数都在 $1 \\sim 10^6$ 之间。\n\n输入数据保证任意两颗行星之间至多存在一条航道，且不会存在某颗行星到自己的航道。", "locale": "zh-CN"}}}
{"pid": "P2470", "type": "P", "difficulty": 6, "samples": [["aaaaaaa", "5"], ["bcdcdcdcdxcdcdcdcd", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "2007", "四川", "各省省选", "区间 DP"], "title": "[SCOI2007] 压缩", "background": null, "description": "给一个由小写字母组成的字符串，我们可以用一种简单的方法来压缩其中的重复信息。压缩后的字符串除了小写字母外还可以（但不必）包含大写字母 $\\texttt{R}$ 与 $\\texttt{M}$，其中 $\\texttt{M}$ 标记重复串的开始，$\\texttt{R}$ 重复从上一个 $\\texttt{M}$（如果当前位置左边没有 $\\texttt{M}$，则从串的开始算起）开始的解压结果（称为缓冲串）。\n\n\n$\\texttt{bcdcdcdcd}$ 可以压缩为 $\\texttt{bMcdRR}$，下面是解压缩的过程：\n\n\n已经解压的部分|解压结果|缓冲串\n:-:|:-:|:-:\n$\\texttt{b}$|$\\texttt{b}$|$\\texttt{b}$\n$\\texttt{bM}$|$\\texttt{b}$|$\\texttt{.}$\n$\\texttt{bMc}$|$\\texttt{bc}$|$\\texttt{c}$\n$\\texttt{bMcd}$|$\\texttt{bcd}$|$\\texttt{cd}$\n$\\texttt{bMcdR}$|$\\texttt{bcdcd}$|$\\texttt{cdcd}$\n$\\texttt{bMcdRR}$|$\\texttt{bcdcdcdcd}$|$\\texttt{cdcdcdcd}$", "inputFormat": "输入仅一行，包含待压缩字符串，仅包含小写字母，长度为 $n$。", "outputFormat": "输出仅一行，即压缩后字符串的最短长度。", "hint": "在第一个例子中，解为 $\\texttt{aaaRa}$，在第二个例子中，解为 $\\texttt{bMcdRRxMcdRR}$。\n\n\n#### 【数据范围】\n\n- 对于 $50\\%$ 的数据，$1\\le n \\le 20$。\n- 对于 $100\\%$ 的数据，$1\\le n \\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Compression", "background": "", "description": "Given a string consisting of lowercase letters, we can compress its repeated information using a simple method. The compressed string may (but does not have to) contain uppercase letters $\\texttt{R}$ and $\\texttt{M}$ in addition to lowercase letters, where $\\texttt{M}$ marks the start of a repeated segment, and $\\texttt{R}$ repeats the decompressed result starting from the previous $\\texttt{M}$ (if there is no $\\texttt{M}$ to the left of the current position, start from the beginning of the string), which is called the buffer string.\n\n$\\texttt{bcdcdcdcd}$ can be compressed as $\\texttt{bMcdRR}$. The decompression process is shown below:\n\nAlready decompressed part|Decompression result|Buffer string\n:-:|:-:|:-:\n$\\texttt{b}$|$\\texttt{b}$|$\\texttt{b}$\n$\\texttt{bM}$|$\\texttt{b}$|$\\texttt{.}$\n$\\texttt{bMc}$|$\\texttt{bc}$|$\\texttt{c}$\n$\\texttt{bMcd}$|$\\texttt{bcd}$|$\\texttt{cd}$\n$\\texttt{bMcdR}$|$\\texttt{bcdcd}$|$\\texttt{cdcd}$\n$\\texttt{bMcdRR}$|$\\texttt{bcdcdcdcd}$|$\\texttt{cdcdcdcd}$", "inputFormat": "The input contains a single line with the string to compress, consisting only of lowercase letters, of length $n$.", "outputFormat": "Output a single line: the minimum possible length of the compressed string.", "hint": "In the first example, an answer is $\\texttt{aaaRa}$. In the second example, an answer is $\\texttt{bMcdRRxMcdRR}$.\n\nConstraints\n- For $50\\%$ of the testdata, $1\\le n \\le 20$.\n- For $100\\%$ of the testdata, $1\\le n \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 压缩", "background": null, "description": "给一个由小写字母组成的字符串，我们可以用一种简单的方法来压缩其中的重复信息。压缩后的字符串除了小写字母外还可以（但不必）包含大写字母 $\\texttt{R}$ 与 $\\texttt{M}$，其中 $\\texttt{M}$ 标记重复串的开始，$\\texttt{R}$ 重复从上一个 $\\texttt{M}$（如果当前位置左边没有 $\\texttt{M}$，则从串的开始算起）开始的解压结果（称为缓冲串）。\n\n\n$\\texttt{bcdcdcdcd}$ 可以压缩为 $\\texttt{bMcdRR}$，下面是解压缩的过程：\n\n\n已经解压的部分|解压结果|缓冲串\n:-:|:-:|:-:\n$\\texttt{b}$|$\\texttt{b}$|$\\texttt{b}$\n$\\texttt{bM}$|$\\texttt{b}$|$\\texttt{.}$\n$\\texttt{bMc}$|$\\texttt{bc}$|$\\texttt{c}$\n$\\texttt{bMcd}$|$\\texttt{bcd}$|$\\texttt{cd}$\n$\\texttt{bMcdR}$|$\\texttt{bcdcd}$|$\\texttt{cdcd}$\n$\\texttt{bMcdRR}$|$\\texttt{bcdcdcdcd}$|$\\texttt{cdcdcdcd}$", "inputFormat": "输入仅一行，包含待压缩字符串，仅包含小写字母，长度为 $n$。", "outputFormat": "输出仅一行，即压缩后字符串的最短长度。", "hint": "在第一个例子中，解为 $\\texttt{aaaRa}$，在第二个例子中，解为 $\\texttt{bMcdRRxMcdRR}$。\n\n\n#### 【数据范围】\n\n- 对于 $50\\%$ 的数据，$1\\le n \\le 20$。\n- 对于 $100\\%$ 的数据，$1\\le n \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2471", "type": "P", "difficulty": 5, "samples": [["6\n2002 4920\n2003 5901\n2004 2832\n2005 3890\n2007 5609\n2008 3024\n5\n2002 2005\n2003 2005\n2002 2007\n2003 2007\n2005 2008\n", "false\ntrue\nfalse\nmaybe\nfalse\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "四川", "线段树", "各省省选", "ST 表"], "title": "[SCOI2007] 降雨量", "background": "", "description": "我们常常会说这样的话：“$X$ 年是自 $Y$ 年以来降雨量最多的”。它的含义是 $X$ 年的降雨量不超过 $Y$ 年，且对于任意 $Y < Z < X$，$Z$ 年的降雨量严格小于 $X$ 年。例如 2002、2003、2004 和 2005 年的降雨量分别为 $4920$、$5901$、$2832$ 和 $3890$，则可以说“2005 年是自 2003 年以来最多的”，但不能说“2005 年是自 2002 年以来最多的”由于有些年份的降雨量未知，有的说法是可能正确也可以不正确的。\n", "inputFormat": "输入仅一行包含一个正整数 $n$，为已知的数据。以下 $n$ 行每行两个整数 $y_i$ 和 $r_i$，为年份和降雨量，按照年份从小到大排列，即 $y_i<y_{i+1}$。下一行包含一个正整数 $m$，为询问的次数。以下 $m$ 行每行包含两个数 $Y$ 和 $X$，即询问“$X$ 年是自 $Y$ 年以来降雨量最多的。”这句话是“必真”、“必假”还是“有可能”。\n", "outputFormat": "对于每一个询问，输出 `true`、`false` 或者 `maybe`。\n", "hint": "$100 \\%$ 的数据满足：$1 \\le n \\le 50000$，$1 \\le m \\le 10000$，$-10^9 \\le y_i \\le 10^9$，$1 \\le r_i \\le 10^9$，$-10^9 \\le X, Y \\le 10^9$。\n\n数据保证 $Y < X$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Rainfall", "background": "", "description": "We often say statements like: \"Year $X$ has the highest rainfall since year $Y$.\" It means that the rainfall in year $X$ does not exceed that in year $Y$, and for any year $Z$ with $Y < Z < X$, the rainfall in year $Z$ is strictly less than that in year $X$. For example, if the rainfalls in years 2002, 2003, 2004, and 2005 are 4920, 5901, 2832, and 3890 respectively, then we can say \"2005 is the highest since 2003,\" but we cannot say \"2005 is the highest since 2002.\" Since the rainfalls of some years are unknown, some statements may be true or may be false.", "inputFormat": "The first line contains a positive integer $n$, the number of known records.  \nEach of the following $n$ lines contains two integers $y_i$ and $r_i$, the year and its rainfall, sorted in strictly increasing order of year, i.e., $y_i < y_{i+1}$.  \nThe next line contains a positive integer $m$, the number of queries.  \nEach of the following $m$ lines contains two integers $Y$ and $X$, asking whether the statement \"Year $X$ has the highest rainfall since year $Y$.\" is \"true\", \"false\", or \"maybe\".", "outputFormat": "For each query, output `true`, `false`, or `maybe`.", "hint": "Constraints: For 100% of the testdata, $1 \\le n \\le 50000$, $1 \\le m \\le 10000$, $-10^9 \\le y_i \\le 10^9$, $1 \\le r_i \\le 10^9$, $-10^9 \\le X, Y \\le 10^9$.  \nIt is guaranteed that $Y < X$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 降雨量", "background": "", "description": "我们常常会说这样的话：“$X$ 年是自 $Y$ 年以来降雨量最多的”。它的含义是 $X$ 年的降雨量不超过 $Y$ 年，且对于任意 $Y < Z < X$，$Z$ 年的降雨量严格小于 $X$ 年。例如 2002、2003、2004 和 2005 年的降雨量分别为 $4920$、$5901$、$2832$ 和 $3890$，则可以说“2005 年是自 2003 年以来最多的”，但不能说“2005 年是自 2002 年以来最多的”由于有些年份的降雨量未知，有的说法是可能正确也可以不正确的。\n", "inputFormat": "输入仅一行包含一个正整数 $n$，为已知的数据。以下 $n$ 行每行两个整数 $y_i$ 和 $r_i$，为年份和降雨量，按照年份从小到大排列，即 $y_i<y_{i+1}$。下一行包含一个正整数 $m$，为询问的次数。以下 $m$ 行每行包含两个数 $Y$ 和 $X$，即询问“$X$ 年是自 $Y$ 年以来降雨量最多的。”这句话是“必真”、“必假”还是“有可能”。\n", "outputFormat": "对于每一个询问，输出 `true`、`false` 或者 `maybe`。\n", "hint": "$100 \\%$ 的数据满足：$1 \\le n \\le 50000$，$1 \\le m \\le 10000$，$-10^9 \\le y_i \\le 10^9$，$1 \\le r_i \\le 10^9$，$-10^9 \\le X, Y \\le 10^9$。\n\n数据保证 $Y < X$。", "locale": "zh-CN"}}}
{"pid": "P2472", "type": "P", "difficulty": 6, "samples": [["5 8 2\n00000000\n02000000\n00321100\n02000000\n00000000\n........\n........\n..LLLL..\n........\n........\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2007", "四川", "各省省选", "网络流"], "title": "[SCOI2007] 蜥蜴", "background": "", "description": "在一个 $r$ 行 $c$ 列的网格地图中有一些高度不同的石柱，第 $i$ 行 $j$ 列的石柱高度为 $h_{i,j}$。\n\n一些石柱上站着一些蜥蜴，你的任务是让尽量多的蜥蜴逃到边界外。\n\n每行每列中相邻石柱的距离为 $1$，蜥蜴的跳跃距离是 $d$，即蜥蜴可以跳到**平面距离**不超过 $d$ 的任何一个石柱上。\n\n石柱都不稳定，每次当蜥蜴跳跃时，所离开的石柱高度减 $1$（如果仍然落在地图内部，则到达的石柱高度不变）。\n\n如果该石柱原来高度为 $1$，则蜥蜴离开后消失，以后其他蜥蜴不能落脚。\n\n任何时刻不能有两只蜥蜴在同一个石柱上。", "inputFormat": "\n#### 输入格式\n输入第一行为三个整数 $r,c,d$，即地图的规模与最大跳跃距离。\n\n接下来 $r$ 行每行 $c$ 个数字为石柱的初始状态，$0$ 表示没有石柱，否则表示石柱的初始高度 $h_{i,j}$。\n\n接下来 $r$ 行每行 $c$ 个字符为蜥蜴位置，`L` 表示蜥蜴，`.` 表示没有蜥蜴。", "outputFormat": "输出仅一行，包含一个整数，即无法逃离的蜥蜴总数的最小值。", "hint": "对于 $100\\%$ 的数据满足：$1\\le r,c\\le20$，$1\\le d\\le 4$，$1\\le h\\le 3$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Lizard", "background": "", "description": "On an $r$-row $c$-column grid map, there are stone pillars of varying heights. The pillar at row $i$, column $j$ has height $h_{i,j}$.\n\nSome pillars have lizards standing on them. Your task is to let as many lizards as possible escape outside the boundary.\n\nThe distance between adjacent pillars in the same row or column is $1$. Each lizard has a jump distance of $d$, meaning it can jump to any pillar whose Euclidean distance is at most $d$.\n\nThe pillars are unstable. Each time a lizard jumps, the height of the pillar it leaves decreases by $1$ (if it still lands inside the map, the destination pillar’s height does not change).\n\nIf that pillar’s original height is $1$, then after a lizard leaves, the pillar disappears, and no other lizard can land on it thereafter.\n\nAt any time, no two lizards may stand on the same pillar.", "inputFormat": "The first line contains three integers $r, c, d$, which are the map size and the maximum jump distance.\n\nThe next $r$ lines each contain $c$ numbers describing the initial state of the pillars: $0$ means there is no pillar, otherwise it is the initial height $h_{i,j}$.\n\nThe next $r$ lines each contain $c$ characters describing lizard positions: `L` means a lizard, and `.` means no lizard.", "outputFormat": "Output a single line containing one integer, which is the minimum total number of lizards that cannot escape.", "hint": "For $100\\%$ of the testdata: $1 \\le r, c \\le 20$, $1 \\le d \\le 4$, $1 \\le h \\le 3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 蜥蜴", "background": "", "description": "在一个 $r$ 行 $c$ 列的网格地图中有一些高度不同的石柱，第 $i$ 行 $j$ 列的石柱高度为 $h_{i,j}$。\n\n一些石柱上站着一些蜥蜴，你的任务是让尽量多的蜥蜴逃到边界外。\n\n每行每列中相邻石柱的距离为 $1$，蜥蜴的跳跃距离是 $d$，即蜥蜴可以跳到**平面距离**不超过 $d$ 的任何一个石柱上。\n\n石柱都不稳定，每次当蜥蜴跳跃时，所离开的石柱高度减 $1$（如果仍然落在地图内部，则到达的石柱高度不变）。\n\n如果该石柱原来高度为 $1$，则蜥蜴离开后消失，以后其他蜥蜴不能落脚。\n\n任何时刻不能有两只蜥蜴在同一个石柱上。", "inputFormat": "\n#### 输入格式\n输入第一行为三个整数 $r,c,d$，即地图的规模与最大跳跃距离。\n\n接下来 $r$ 行每行 $c$ 个数字为石柱的初始状态，$0$ 表示没有石柱，否则表示石柱的初始高度 $h_{i,j}$。\n\n接下来 $r$ 行每行 $c$ 个字符为蜥蜴位置，`L` 表示蜥蜴，`.` 表示没有蜥蜴。", "outputFormat": "输出仅一行，包含一个整数，即无法逃离的蜥蜴总数的最小值。", "hint": "对于 $100\\%$ 的数据满足：$1\\le r,c\\le20$，$1\\le d\\le 4$，$1\\le h\\le 3$。", "locale": "zh-CN"}}}
{"pid": "P2473", "type": "P", "difficulty": 5, "samples": [["1 2\n1 0\n2 0\n", "1.500000"], ["6 6\r\n12 2 3 4 5 0\r\n15 5 0\r\n-2 2 4 5 0\r\n-11 2 5 0\r\n5 0\r\n1 2 4 5 0\r\n", "10.023470"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选", "O2优化", "期望", "状压 DP"], "title": "[SCOI2008] 奖励关", "background": "", "description": "你正在玩你最喜欢的电子游戏，并且刚刚进入一个奖励关。在这个奖励关里，系统将依次随机抛出 $k$ 次宝物，每次你都可以选择吃或者不吃（必须在抛出下一个宝物之前做出选择，且现在决定不吃的宝物以后也不能再吃）。\n\n宝物一共有 $n$ 种，系统每次抛出这 $n$ 种宝物的概率都相同且相互独立。也就是说，即使前 $(k-1)$ 次系统都抛出宝物 $1$（这种情况是有可能出现的，尽管概率非常小），第 $k$ 次抛出各个宝物的概率依然均为 $\\frac 1 n $。\n\n获取第 $i$ 种宝物将得到 $p_i$ 分，但并不是每种宝物都是可以随意获取的。第 $i$ 种宝物有一个前提宝物集合 $s_i$。只有当 $s_i$ 中所有宝物都至少吃过一次，才能吃第 $i$ 种宝物（如果系统抛出了一个目前不能吃的宝物，相当于白白的损失了一次机会）。注意，$p_i$ 可以是负数，但如果它是很多高分宝物的前提，损失短期利益而吃掉这个负分宝物将获得更大的长期利益。\n\n假设你采取最优策略，平均情况你一共能在奖励关得到多少分值？\n", "inputFormat": "第一行为两个整数，分别表示抛出宝物的次数 $k$ 和宝物的种类数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，第 $(i + 1)$ 有若干个整数表示第 $i$ 个宝物的信息。每行首先有一个整数，表示第 $i$ 个宝物的分数 $p_i$。接下来若干个互不相同的整数，表示该宝物的各个前提宝物集合 $s_i$，每行的结尾是一个整数 $0$，表示该行结束。", "outputFormat": "输出一行一个实数表示答案，保留六位小数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq k \\leq 100$，$1 \\leq n \\leq 15$，$-10^6 \\leq p_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Bonus Stage", "background": "", "description": "You are playing your favorite video game and have just entered a bonus stage. In this stage, the system will randomly drop items $k$ times in sequence. Each time, you may choose to take the item or not take it (you must decide before the next drop, and an item you skip now cannot be taken later).\n\nThere are $n$ types of items. Each drop is equally likely to be any of the $n$ types, and all drops are independent. That is, even if the system drops item $1$ in the first $(k - 1)$ drops (which is possible, though very unlikely), the probabilities for the $k$-th drop are still all $\\frac 1 n$.\n\nTaking an item of type $i$ yields $p_i$ points, but not every item can be taken freely. Item $i$ has a prerequisite set $s_i$. You can take item $i$ only if every item in $s_i$ has been taken at least once. If the system drops an item that you currently cannot take, that opportunity is simply lost. Note that $p_i$ can be negative; however, if it is a prerequisite for many high-scoring items, taking this negative item at a short-term loss may lead to greater long-term gain.\n\nAssuming you follow the optimal strategy, what is the expected total score you can obtain in the bonus stage?", "inputFormat": "The first line contains two integers, the number of drops $k$ and the number of item types $n$.\n\nLines $2$ through $(n + 1)$ describe the $n$ items. On line $(i + 1)$, several integers describe item $i$: first an integer $p_i$, then several distinct integers giving the prerequisites $s_i$, and finally an integer $0$ marking the end of the line.", "outputFormat": "Output a single real number, the answer, with six digits after the decimal point.", "hint": "#### Constraints\n\nFor all test points, it is guaranteed that $1 \\leq k \\leq 100$, $1 \\leq n \\leq 15$, and $-10^6 \\leq p_i \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 奖励关", "background": "", "description": "你正在玩你最喜欢的电子游戏，并且刚刚进入一个奖励关。在这个奖励关里，系统将依次随机抛出 $k$ 次宝物，每次你都可以选择吃或者不吃（必须在抛出下一个宝物之前做出选择，且现在决定不吃的宝物以后也不能再吃）。\n\n宝物一共有 $n$ 种，系统每次抛出这 $n$ 种宝物的概率都相同且相互独立。也就是说，即使前 $(k-1)$ 次系统都抛出宝物 $1$（这种情况是有可能出现的，尽管概率非常小），第 $k$ 次抛出各个宝物的概率依然均为 $\\frac 1 n $。\n\n获取第 $i$ 种宝物将得到 $p_i$ 分，但并不是每种宝物都是可以随意获取的。第 $i$ 种宝物有一个前提宝物集合 $s_i$。只有当 $s_i$ 中所有宝物都至少吃过一次，才能吃第 $i$ 种宝物（如果系统抛出了一个目前不能吃的宝物，相当于白白的损失了一次机会）。注意，$p_i$ 可以是负数，但如果它是很多高分宝物的前提，损失短期利益而吃掉这个负分宝物将获得更大的长期利益。\n\n假设你采取最优策略，平均情况你一共能在奖励关得到多少分值？\n", "inputFormat": "第一行为两个整数，分别表示抛出宝物的次数 $k$ 和宝物的种类数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，第 $(i + 1)$ 有若干个整数表示第 $i$ 个宝物的信息。每行首先有一个整数，表示第 $i$ 个宝物的分数 $p_i$。接下来若干个互不相同的整数，表示该宝物的各个前提宝物集合 $s_i$，每行的结尾是一个整数 $0$，表示该行结束。", "outputFormat": "输出一行一个实数表示答案，保留六位小数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq k \\leq 100$，$1 \\leq n \\leq 15$，$-10^6 \\leq p_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2474", "type": "P", "difficulty": 6, "samples": [["6 2 5\r\n?+????\r\n-?+???\r\n?-????\r\n????+?\r\n???-?+\r\n????-?", "1 4 1"], ["14 8 4\r\n?+???++?????++\r\n-??=?=???????=\r\n??????????=???\r\n?=??+?==??????\r\n???-???-???-??\r\n-=????????????\r\n-??=???=?-+???\r\n???=+?=???????\r\n??????????????\r\n??????+???????\r\n??=???-????-??\r\n????+?????+???\r\n-?????????????\r\n-=????????????", "18 12 11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选", "图论建模", "差分约束"], "title": "[SCOI2008] 天平", "background": null, "description": "你有 $n$ 个砝码，均为 $1$ 克，$2$ 克或者 $3$ 克。你并不清楚每个砝码的重量，但你知道其中一些砝码重量的大小关系。你把其中两个砝码 A 和 B 放在天平的左边，需要另外选出两个砝码放在天平的右边。问：有多少种选法（选法是无序的，也就是说选择砝码 $1$ 和 $2$ 或者 $2$ 和 $1$ 是一种选法）使得天平的左边重（$c_1$）、一样重（$c_2$）、右边重（$c_3$）？（只有结果保证唯一确定的选法才统计在内）", "inputFormat": "第一行包含三个正整数 $n,A,B$（$1\\le A,B\\le n,A\\neq B$）。\n\n以下 $n$ 行包含重量关系矩阵，其中第 $i$ 行第 $j$ 个字符为加号 `+` 表示砝码 $i$ 比砝码 $j$ 重，减号 `-` 表示砝码 $i$ 比砝码 $j$ 轻，等号 `=` 表示砝码 $i$ 和砝码 $j$ 一样重，问号 `?` 表示二者的关系未知。\n\n数据保证至少存在一种情况符合该矩阵。", "outputFormat": "仅一行，包含三个整数，即 $c_1,c_2,c_3$。", "hint": "$4\\le n\\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Balance", "background": "", "description": "You have $n$ weights, each of which is $1$ gram, $2$ grams, or $3$ grams. You do not know the exact mass of each weight, but you know some pairwise weight comparisons. You place two weights $A$ and $B$ on the left pan of a balance scale, and you need to choose two other weights to place on the right pan. How many unordered choices are there that make the left pan heavier ($c_1$), balance ($c_2$), or the right pan heavier ($c_3$)? (Only count choices for which the outcome is uniquely determined.) The choice is unordered; that is, choosing weights $1$ and $2$ is the same as choosing $2$ and $1$.", "inputFormat": "The first line contains three positive integers $n,A,B$ ($1\\le A,B\\le n,A\\neq B$).\n\nThe following $n$ lines contain the weight relation matrix. In row $i$, the $j$-th character is a plus `+` if weight $i$ is heavier than weight $j$, a minus `-` if weight $i$ is lighter than weight $j$, an equals `=` if weight $i$ and weight $j$ are equal, and a question mark `?` if their relation is unknown.\n\nIt is guaranteed that there exists at least one configuration consistent with this matrix.", "outputFormat": "Output a single line containing three integers: $c_1,c_2,c_3$.", "hint": "Constraints: $4\\le n\\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 天平", "background": null, "description": "你有 $n$ 个砝码，均为 $1$ 克，$2$ 克或者 $3$ 克。你并不清楚每个砝码的重量，但你知道其中一些砝码重量的大小关系。你把其中两个砝码 A 和 B 放在天平的左边，需要另外选出两个砝码放在天平的右边。问：有多少种选法（选法是无序的，也就是说选择砝码 $1$ 和 $2$ 或者 $2$ 和 $1$ 是一种选法）使得天平的左边重（$c_1$）、一样重（$c_2$）、右边重（$c_3$）？（只有结果保证唯一确定的选法才统计在内）", "inputFormat": "第一行包含三个正整数 $n,A,B$（$1\\le A,B\\le n,A\\neq B$）。\n\n以下 $n$ 行包含重量关系矩阵，其中第 $i$ 行第 $j$ 个字符为加号 `+` 表示砝码 $i$ 比砝码 $j$ 重，减号 `-` 表示砝码 $i$ 比砝码 $j$ 轻，等号 `=` 表示砝码 $i$ 和砝码 $j$ 一样重，问号 `?` 表示二者的关系未知。\n\n数据保证至少存在一种情况符合该矩阵。", "outputFormat": "仅一行，包含三个整数，即 $c_1,c_2,c_3$。", "hint": "$4\\le n\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2475", "type": "P", "difficulty": 6, "samples": [["6\r\n100 0 101 102 1 2", "0 1 2 3 4 5 6"], ["6\r\n100 0 2 102 4 104", "4 6 5 2 0 1 3"], ["7\r\n0 100 1 102 2 3 5", "2 5 0 3 4 6 7 1"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "四川", "各省省选", "递归"], "title": "[SCOI2008] 斜堆", "background": "四川2008NOI省选", "description": "斜堆(skew heap)是一种常用的数据结构。它也是二叉树，且满足与二叉堆相同的堆性质：每个非根结点的值都比它父亲大。因此在整棵斜堆中，根的值最小。\n\n但斜堆不必是平衡的，每个结点的左右儿子的大小关系也没有任何规定。在本题中，斜堆中各个元素的值均不相同。\n\n在斜堆 H 中插入新元素 X 的过程是递归进行的：当 H 为空或者 X 小于 H 的根结点时 X 变为新的树根，而原来的树根（如果有的话）变为 X 的左儿子。\n\n当 X 大于 H 的根结点时，H 根结点的两棵子树交换，而 X（递归）插入到交换后的左子树中。\n\n给出一棵斜堆，包含值为 $0,1,\\dots,n$ 的结点各一次。求一个结点序列，使得该斜堆可以通过在空树中依次插入这些结点得到。如果答案不惟一，输出字典序最小的解。\n\n输入保证有解。", "inputFormat": "第一行包含一个整数 $n$。第二行包含 $n$ 个整数 $d_1, d_2,\\dots, d_n$。$d_i<100$ 表示 $i$ 是 $d_i$ 的左儿子，$d_i\\geq  100$ 表示 $i$ 是 $d_i-100$ 的右儿子。显然 $0$ 总是根，所以输入中不含 $d_0$。", "outputFormat": "仅一行，包含 $n+1$ 整数，即字典序最小的插入序列。", "hint": "$2\\leq n\\leq 50$", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2008] Skew Heap", "background": "Sichuan 2008 NOI Qualifier.", "description": "A skew heap is a commonly used data structure. It is also a binary tree and satisfies the same heap property as a binary heap: every non-root node has a value larger than its parent. Therefore, in the whole skew heap, the root has the minimum value.\n\nA skew heap does not need to be balanced, and there is no restriction on the relative sizes of the left and right children of any node. In this problem, all values in the skew heap are distinct.\n\nTo insert a new element $X$ into a skew heap $H$, proceed recursively: when $H$ is empty or $X$ is smaller than the root of $H$, $X$ becomes the new root, and the original root (if any) becomes the left child of $X$.\n\nWhen $X$ is greater than the root of $H$, swap the two subtrees of the root, and (recursively) insert $X$ into the left subtree after the swap.\n\nYou are given a skew heap that contains each of the values $0, 1, \\dots, n$ exactly once. Find a sequence of nodes such that this skew heap can be obtained by inserting these nodes one by one into an empty tree. If multiple answers exist, output the lexicographically smallest one.\n\nThe input is guaranteed to have a solution.", "inputFormat": "The first line contains an integer $n$. The second line contains $n$ integers $d_1, d_2, \\dots, d_n$. $d_i < 100$ means $i$ is the left child of $d_i$, and $d_i \\ge 100$ means $i$ is the right child of $d_i - 100$. Obviously $0$ is always the root, so $d_0$ does not appear in the input.", "outputFormat": "Output a single line containing $n+1$ integers, i.e., the lexicographically smallest insertion sequence.", "hint": "Constraints: $2 \\le n \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2008] 斜堆", "background": "四川2008NOI省选", "description": "斜堆(skew heap)是一种常用的数据结构。它也是二叉树，且满足与二叉堆相同的堆性质：每个非根结点的值都比它父亲大。因此在整棵斜堆中，根的值最小。\n\n但斜堆不必是平衡的，每个结点的左右儿子的大小关系也没有任何规定。在本题中，斜堆中各个元素的值均不相同。\n\n在斜堆 H 中插入新元素 X 的过程是递归进行的：当 H 为空或者 X 小于 H 的根结点时 X 变为新的树根，而原来的树根（如果有的话）变为 X 的左儿子。\n\n当 X 大于 H 的根结点时，H 根结点的两棵子树交换，而 X（递归）插入到交换后的左子树中。\n\n给出一棵斜堆，包含值为 $0,1,\\dots,n$ 的结点各一次。求一个结点序列，使得该斜堆可以通过在空树中依次插入这些结点得到。如果答案不惟一，输出字典序最小的解。\n\n输入保证有解。", "inputFormat": "第一行包含一个整数 $n$。第二行包含 $n$ 个整数 $d_1, d_2,\\dots, d_n$。$d_i<100$ 表示 $i$ 是 $d_i$ 的左儿子，$d_i\\geq  100$ 表示 $i$ 是 $d_i-100$ 的右儿子。显然 $0$ 总是根，所以输入中不含 $d_0$。", "outputFormat": "仅一行，包含 $n+1$ 整数，即字典序最小的插入序列。", "hint": "$2\\leq n\\leq 50$", "locale": "zh-CN"}}}
