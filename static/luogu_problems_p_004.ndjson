{"pid": "P2004", "type": "P", "difficulty": 2, "samples": [["3 4 2\n1 2 3 1\n-1 9 0 2\n2 0 1 1\n", "1 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "前缀和"], "title": "领地选择", "background": null, "description": "作为在虚拟世界里统帅千军万马的领袖，小 Z 认为天时、地利、人和三者是缺一不可的，所以，谨慎地选择首都的位置对于小 Z 来说是非常重要的。\n\n首都被认为是一个占地 $C\\times C$ 的正方形。小 Z 希望你寻找到一个合适的位置，使得首都所占领的位置的土地价值和最高。", "inputFormat": "第一行三个整数 $N,M,C$，表示地图的宽和长以及首都的边长。\n\n接下来 $N$ 行每行 $M$ 个整数，表示了地图上每个地块的价值。价值可能为负数。", "outputFormat": "一行两个整数 $X,Y$，表示首都左上角的坐标。保证最优解是唯一的。", "hint": "对于 $60\\%$ 的数据，$N,M\\le 50$。\n\n对于 $90\\%$ 的数据，$N,M\\le 300$。\n\n对于 $100\\%$ 的数据，$1\\le N,M\\le 10^3$，$1\\le C\\le \\min(N,M)$，每块地价值的绝对值不超过 $32767$。", "locale": "zh-CN", "translations": {"en": {"title": "Territory Selection", "background": "", "description": "As a leader who commands countless troops in a virtual world, Xiao Z believes that timing, terrain, and unity among people are all indispensable. Therefore, carefully choosing the location of the capital is very important to Xiao Z.\n\nThe capital is considered to be a square occupying $C \\times C$. Xiao Z wants you to find a suitable position such that the sum of land values covered by the capital is maximized.", "inputFormat": "The first line contains three integers $N, M, C$, denoting the height and width of the map and the side length of the capital.\n\nThe next $N$ lines each contain $M$ integers, giving the value of each plot on the map. Values may be negative.", "outputFormat": "One line with two integers $X, Y$, denoting the coordinates of the top-left corner of the capital. It is guaranteed that the optimal solution is unique.", "hint": "For $60\\%$ of the testdata, $N, M \\le 50$.\n\nFor $90\\%$ of the testdata, $N, M \\le 300$.\n\nFor $100\\%$ of the testdata, $1 \\le N, M \\le 10^3$, $1 \\le C \\le \\min(N, M)$. The absolute value of each tile's value does not exceed $32767$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "领地选择", "background": null, "description": "作为在虚拟世界里统帅千军万马的领袖，小 Z 认为天时、地利、人和三者是缺一不可的，所以，谨慎地选择首都的位置对于小 Z 来说是非常重要的。\n\n首都被认为是一个占地 $C\\times C$ 的正方形。小 Z 希望你寻找到一个合适的位置，使得首都所占领的位置的土地价值和最高。", "inputFormat": "第一行三个整数 $N,M,C$，表示地图的宽和长以及首都的边长。\n\n接下来 $N$ 行每行 $M$ 个整数，表示了地图上每个地块的价值。价值可能为负数。", "outputFormat": "一行两个整数 $X,Y$，表示首都左上角的坐标。保证最优解是唯一的。", "hint": "对于 $60\\%$ 的数据，$N,M\\le 50$。\n\n对于 $90\\%$ 的数据，$N,M\\le 300$。\n\n对于 $100\\%$ 的数据，$1\\le N,M\\le 10^3$，$1\\le C\\le \\min(N,M)$，每块地价值的绝对值不超过 $32767$。", "locale": "zh-CN"}}}
{"pid": "P2005", "type": "P", "difficulty": 3, "samples": [["1000 \n333\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度", "二分"], "title": "A/B Problem II", "background": "为了让大家紧张的心情放松一下，这一题是一道非常简单的题目。", "description": "给出正整数 $N$ 和 $M$，请你计算 $\\lfloor\\frac{N}{M}\\rfloor$（$\\frac{N}{M}$ 的下取整）。", "inputFormat": "两行，两个正整数，$N$ 和 $M$。", "outputFormat": "一行，一个整数，表示 $\\lfloor\\frac{N}{M}\\rfloor$。", "hint": "- 对于 $60 \\%$ 的数据：$ N,M \\le 750!$，答案 $ \\le 7!$。\n- 对于 $100 \\%$ 的数据：$N,M \\le 6250!$，答案 $ \\le 13!$。\n\n请注意：上面的两句话并不是感叹句，而是陈述句。标点符号使用没有错误。", "locale": "zh-CN", "translations": {"en": {"title": "A/B Problem II", "background": "To help everyone relax, this problem is a very simple one.", "description": "Given positive integers $N$ and $M$, please compute $\\lfloor\\frac{N}{M}\\rfloor$ (the floor of $\\frac{N}{M}$).", "inputFormat": "Two lines, two positive integers, $N$ and $M$.", "outputFormat": "One line, one integer, representing $\\lfloor\\frac{N}{M}\\rfloor$.", "hint": "- For $60 \\%$ of the testdata: $ N,M \\le 750!$，the answer $ \\le 7!$.\n- For $100 \\%$ of the testdata: $N,M \\le 6250!$，the answer $ \\le 13!$.\n\nPlease note: the two sentences above are not exclamatory sentences, but declarative sentences. There is no error in the use of punctuation.\n\nTranslated by ChatGPT 5.", "locale": "en"}, "zh-CN": {"title": "A/B Problem II", "background": "为了让大家紧张的心情放松一下，这一题是一道非常简单的题目。", "description": "给出正整数 $N$ 和 $M$，请你计算 $\\lfloor\\frac{N}{M}\\rfloor$（$\\frac{N}{M}$ 的下取整）。", "inputFormat": "两行，两个正整数，$N$ 和 $M$。", "outputFormat": "一行，一个整数，表示 $\\lfloor\\frac{N}{M}\\rfloor$。", "hint": "- 对于 $60 \\%$ 的数据：$ N,M \\le 750!$，答案 $ \\le 7!$。\n- 对于 $100 \\%$ 的数据：$N,M \\le 6250!$，答案 $ \\le 13!$。\n\n请注意：上面的两句话并不是感叹句，而是陈述句。标点符号使用没有错误。", "locale": "zh-CN"}}}
{"pid": "P2006", "type": "P", "difficulty": 1, "samples": [["100 3 5000\n20 1000\n90 1\n110 10000\n", "1\n"], ["50 4 10\n60 100\n70 1000\n80 1000\n90 0\n", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "赵神牛的游戏", "background": null, "description": "在 DNF 中，赵神牛有一个缔造者，他一共有 $k$ 点法力值，一共有 $m$ 个技能，每个技能耗费的法力值为 $a_i$，可以造成的伤害为 $b_i$，而 boss 的体力值为 $n$，请你求出它放哪个技能，才可以打死 boss。\n\n当然，赵神牛技术很菜，他一局只放一个技能，不过每个技能都可以放无数次。", "inputFormat": "第一行有三个整数，分别表示 $k,m,n$。\n\n后面 $m$ 行，每行两个整数，第 $(i + 1)$ 行的整数表示耗费的法力值 $a_i$ 和造成的伤害 $b_i$。", "outputFormat": "输出仅一行，即可以杀死 boss 的技能序号，如果有多个，按从小到大的顺序输出，中间用一个空格隔开；如果没有技能能杀死 boss，输出 `-1`。", "hint": "#### 数据规模与约定\n对于全部的测试点，满足：\n\n- $0< n,m\\le 3\\times 10^4$；\n- $0\\le k\\le 3\\times 10^4$；\n- $0 \\leq a_i,b_i\\le 2147483647$。", "locale": "zh-CN", "translations": {"en": {"title": "Zhao Shenniu's Game", "background": "", "description": "In DNF, Zhao Shenniu has a \"Dizaozhe\" character. He has a total of $k$ mana points and there are $m$ skills. Each skill costs $a_i$ mana and deals $b_i$ damage. The boss has $n$ health points. Please determine which skill he should cast to kill the boss.\n\nOf course, Zhao Shenniu is not very skilled; in one game he only uses one skill, but any chosen skill can be cast an unlimited number of times.", "inputFormat": "The first line contains three integers, representing $k, m, n$.\n\nThen follow $m$ lines. The $(i + 1)$-th line contains two integers: the mana cost $a_i$ and the damage $b_i$.", "outputFormat": "Output a single line: the indices of the skills that can kill the boss. If there are multiple, output them in increasing order, separated by a single space. If no skill can kill the boss, output `-1`.", "hint": "Constraints\n\nFor all test points, it holds that:\n- $0 < n, m \\le 3 \\times 10^4$.\n- $0 \\le k \\le 3 \\times 10^4$.\n- $0 \\le a_i, b_i \\le 2147483647$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "赵神牛的游戏", "background": null, "description": "在 DNF 中，赵神牛有一个缔造者，他一共有 $k$ 点法力值，一共有 $m$ 个技能，每个技能耗费的法力值为 $a_i$，可以造成的伤害为 $b_i$，而 boss 的体力值为 $n$，请你求出它放哪个技能，才可以打死 boss。\n\n当然，赵神牛技术很菜，他一局只放一个技能，不过每个技能都可以放无数次。", "inputFormat": "第一行有三个整数，分别表示 $k,m,n$。\n\n后面 $m$ 行，每行两个整数，第 $(i + 1)$ 行的整数表示耗费的法力值 $a_i$ 和造成的伤害 $b_i$。", "outputFormat": "输出仅一行，即可以杀死 boss 的技能序号，如果有多个，按从小到大的顺序输出，中间用一个空格隔开；如果没有技能能杀死 boss，输出 `-1`。", "hint": "#### 数据规模与约定\n对于全部的测试点，满足：\n\n- $0< n,m\\le 3\\times 10^4$；\n- $0\\le k\\le 3\\times 10^4$；\n- $0 \\leq a_i,b_i\\le 2147483647$。", "locale": "zh-CN"}}}
{"pid": "P2008", "type": "P", "difficulty": 2, "samples": [["5\n1 2 5 3 4\n", "1 3 8 6 10\n"], ["5\n1 7 5 9 6\n", "1 8 6 17 12\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "大朋友的数字", "background": "在 NOIP2013 的赛场上，常神牛华丽丽的手残了，[小朋友的数字](https://www.luogu.com.cn/problem/P1982)一题只得了 $10$ 分。于是，他要恶搞一下这道题。", "description": "有一批大朋友（年龄 $15$ 岁以上），他们每人手上拿着一个数字，当然这个数字只有 $1$ 位，也就是 $0$ 到 $9$ 之间。每个大朋友的分数为在他之前的最长不下降子序列中所有数之和。（这个序列必须以它作为结尾！）如有多个最长不下降子序列，那么取编号字典序最小的。现在告诉你有 $n$ 个大朋友，以及他们各自的数字，请你求出他们每个人的分数。", "inputFormat": "第一行，$1$ 个数 $n$。\n\n第二行，$n$ 个数，分别表示每个人的数字。", "outputFormat": "一行，$n$ 个数，分别表示每个人的分数。", "hint": "**【样例解释 $1$】**\n\n五个人分数分别为 $(1),(1+2),(1+2+5),(1+2+3),(1+2+3+4)$。\n\n**【样例解释 $2$】**\n\n五个人分数分别为 $(1),(1+7),(1+5),(1+7+9)$ （还有一个 $(1,5,9)$），$(1+5+6)$。\n\n**【数据规模】**\n\n对于 $50\\%$ 的数据，$1\\le n\\le 500$；\n\n对于 $80\\%$ 的数据，$1\\le n\\le 10^3$；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Big Friends' Numbers", "background": "At the NOIP2013 contest, Chang Shenniu slipped up badly and scored only $10$ points on the problem “Little Friends’ Numbers” (小朋友的数字): https://www.luogu.com.cn/problem/P1982. So, he decided to make fun of that problem.", "description": "There is a group of “big friends” (age $15$ or above). Each of them holds a number, which has exactly $1$ digit, i.e., it is between $0$ and $9$. The score of each big friend is defined as the sum of all numbers in the longest non-decreasing subsequence that appears before them and ends at them. (This sequence must end at that person!) If there are multiple longest non-decreasing subsequences, choose the one whose sequence of indices is lexicographically smallest. Now you are given $n$ big friends and their numbers. Please compute the score of each person.", "inputFormat": "The first line contains $1$ number $n$.\n\nThe second line contains $n$ numbers, representing each person’s number.", "outputFormat": "Output $n$ numbers in one line, representing each person’s score.", "hint": "[Sample Explanation $1$]\n\nThe five scores are $(1)$, $(1+2)$, $(1+2+5)$, $(1+2+3)$, $(1+2+3+4)$.\n\n[Sample Explanation $2$]\n\nThe five scores are $(1)$, $(1+7)$, $(1+5)$, $(1+7+9)$ (there is also $(1,5,9)$), $(1+5+6)$.\n\nConstraints\n\nFor $50\\%$ of the testdata, $1 \\le n \\le 500$.\n\nFor $80\\%$ of the testdata, $1 \\le n \\le 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "大朋友的数字", "background": "在 NOIP2013 的赛场上，常神牛华丽丽的手残了，[小朋友的数字](https://www.luogu.com.cn/problem/P1982)一题只得了 $10$ 分。于是，他要恶搞一下这道题。", "description": "有一批大朋友（年龄 $15$ 岁以上），他们每人手上拿着一个数字，当然这个数字只有 $1$ 位，也就是 $0$ 到 $9$ 之间。每个大朋友的分数为在他之前的最长不下降子序列中所有数之和。（这个序列必须以它作为结尾！）如有多个最长不下降子序列，那么取编号字典序最小的。现在告诉你有 $n$ 个大朋友，以及他们各自的数字，请你求出他们每个人的分数。", "inputFormat": "第一行，$1$ 个数 $n$。\n\n第二行，$n$ 个数，分别表示每个人的数字。", "outputFormat": "一行，$n$ 个数，分别表示每个人的分数。", "hint": "**【样例解释 $1$】**\n\n五个人分数分别为 $(1),(1+2),(1+2+5),(1+2+3),(1+2+3+4)$。\n\n**【样例解释 $2$】**\n\n五个人分数分别为 $(1),(1+7),(1+5),(1+7+9)$ （还有一个 $(1,5,9)$），$(1+5+6)$。\n\n**【数据规模】**\n\n对于 $50\\%$ 的数据，$1\\le n\\le 500$；\n\n对于 $80\\%$ 的数据，$1\\le n\\le 10^3$；\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2009", "type": "P", "difficulty": 3, "samples": [["5 2\n6 4 5 4 2\nA D 7\nE B 8\nA D", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "跑步", "background": "跑步是一项有意思的运动，尤其是可以开发人的脑筋。常神牛很喜欢跑步。", "description": "常神牛跑步的场地是一个多边形（边数 $\\leq 20$，每个顶点用英文大写字母表示），并且在这个多边形内部，还会有一些小道，连接两个不相邻的顶点。所有的边长和小道都是双向通行的举例来说，下面一个图：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1049.png)\n\n假设常神牛从 $A$ 点跑到 $D$ 点，最短的路径是 $A-E-D$（长度为 $6$）。\n\n现在告诉你多边形的边数 $n$，多边形每条边的长度，多边形内的连线数 $k$，每条连线的两个端点及长度，以及起始点和结束点，请你输出最短路径的长度。但是常神牛有点强迫症，如果两点之间有多条道路直接连接，他会选择最长的那条。\n\n注意：输入数据不保证起点和终点不同，也不保证小道的起点和终点不同。在读入过程中，如果两点之间有多条小道，那么它们间的距离为这些小道的最大值。所以，如果读入一个小道起点和终点相同，那么这个点到它本身的距离不为 $0$。", "inputFormat": "第一行，$2$ 个数，$n,k$。\n\n第二行，$n$ 个数，分别表示多边形每条边的长度（按顺时针次序依次给出，即分别为 $AB,BC,CD,DE……$ 的长度）。\n\n以下 $k$ 行，每行两个字母和一个数，两个字母表示该连线的起止点，数字表示长度。\n\n最后一行，两个字母，分别为他跑步的起点和终点。\n\n所有的一行的字母、数字之间用一个空格隔开。", "outputFormat": "一行，一个数，表示最短路的长度。", "hint": "对于 $20\\%$ 的数据，$k=0$；\n\n对于 $50\\%$ 的数据，$k \\leq 10$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 20$，$0 \\leq k \\leq 100$，所有路径长度均不大于 $1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Running", "background": "Running is an interesting sport, especially because it can develop one’s mind. Chang Sheniu (pinyin) loves running.", "description": "Chang Sheniu’s running field is a polygon (number of sides $\\leq 20$, each vertex is denoted by an uppercase English letter). Inside the polygon, there are also some trails that connect two non-adjacent vertices. All edges and trails are bidirectional. For example, in the figure below:\n\n ![](https://cdn.luogu.com.cn/upload/pic/1049.png)\n\nSuppose Chang Sheniu runs from $A$ to $D$, the shortest path is $A-E-D$ (length $6$).\n\nYou are given the number of sides $n$, the length of each polygon edge, the number of internal connections $k$, the two endpoints and the length of each internal connection, and the start and end vertices. Please output the length of the shortest path. However, Chang Sheniu has a bit of OCD: if there are multiple roads directly connecting the same pair of vertices, he will choose the longest one.\n\nNote: The input does not guarantee that the start and end vertices are different, nor that the endpoints of an internal trail are different. When reading the input, if there are multiple internal trails between two vertices, the distance between them is the maximum of those trails. Therefore, if an internal trail starts and ends at the same vertex, the distance from that vertex to itself is not $0$.\n\n# Description", "inputFormat": "- The first line contains $2$ numbers, $n, k$.\n- The second line contains $n$ numbers, giving the lengths of the polygon’s edges in clockwise order, i.e., the lengths of $AB, BC, CD, DE, \\ldots$.\n- Each of the following $k$ lines contains two letters and a number. The two letters are the endpoints of an internal connection, and the number is its length.\n- The last line contains two letters, the start and end vertices of the run.\n\nWithin each line, letters and numbers are separated by a single space.", "outputFormat": "One line with one number: the length of the shortest path.", "hint": "- For $20\\%$ of the testdata, $k = 0$.\n- For $50\\%$ of the testdata, $k \\leq 10$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 20$, $0 \\leq k \\leq 100$, and all path lengths do not exceed $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跑步", "background": "跑步是一项有意思的运动，尤其是可以开发人的脑筋。常神牛很喜欢跑步。", "description": "常神牛跑步的场地是一个多边形（边数 $\\leq 20$，每个顶点用英文大写字母表示），并且在这个多边形内部，还会有一些小道，连接两个不相邻的顶点。所有的边长和小道都是双向通行的举例来说，下面一个图：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1049.png)\n\n假设常神牛从 $A$ 点跑到 $D$ 点，最短的路径是 $A-E-D$（长度为 $6$）。\n\n现在告诉你多边形的边数 $n$，多边形每条边的长度，多边形内的连线数 $k$，每条连线的两个端点及长度，以及起始点和结束点，请你输出最短路径的长度。但是常神牛有点强迫症，如果两点之间有多条道路直接连接，他会选择最长的那条。\n\n注意：输入数据不保证起点和终点不同，也不保证小道的起点和终点不同。在读入过程中，如果两点之间有多条小道，那么它们间的距离为这些小道的最大值。所以，如果读入一个小道起点和终点相同，那么这个点到它本身的距离不为 $0$。", "inputFormat": "第一行，$2$ 个数，$n,k$。\n\n第二行，$n$ 个数，分别表示多边形每条边的长度（按顺时针次序依次给出，即分别为 $AB,BC,CD,DE……$ 的长度）。\n\n以下 $k$ 行，每行两个字母和一个数，两个字母表示该连线的起止点，数字表示长度。\n\n最后一行，两个字母，分别为他跑步的起点和终点。\n\n所有的一行的字母、数字之间用一个空格隔开。", "outputFormat": "一行，一个数，表示最短路的长度。", "hint": "对于 $20\\%$ 的数据，$k=0$；\n\n对于 $50\\%$ 的数据，$k \\leq 10$；\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 20$，$0 \\leq k \\leq 100$，所有路径长度均不大于 $1000$。", "locale": "zh-CN"}}}
{"pid": "P2010", "type": "P", "difficulty": 2, "samples": [["20110101\n20111231\n", "1\n"], ["20000101\n20101231\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2016", "NOIP 普及组", "枚举"], "title": "[NOIP 2016 普及组] 回文日期", "background": "NOIP2016 普及组 T2", "description": "在日常生活中，通过年、月、日这三个要素可以表示出一个唯一确定的日期。\n\n牛牛习惯用 $8$ 位数字表示一个日期，其中，前 $4$ 位代表年份，接下来 $2$ 位代表月份，最后 $2$ 位代表日期。显然：一个日期只有一种表示方法，而两个不同的日期的表示方法不会相同。\n\n牛牛认为，一个日期是回文的，当且仅当表示这个日期的 $8$ 位数字是回文的。现在，牛牛想知道：在他指定的两个日期之间（包含这两个日期本身），有多少个真实存在的日期是回文的。\n\n一个 $8$ 位数字是回文的，当且仅当对于所有的 $i$（$1  \\le i \\le 8$）从左向右数的第 $i$ 个数字和第 $9-i$ 个数字（即从右向左数的第 $i$ 个数字）是相同的。\n\n例如：\n\n- 对于 2016 年 11 月 19 日，用 $8$ 位数字 $20161119$ 表示，它不是回文的。\n- 对于 2010 年 1 月 2 日，用 $8$ 位数字 $20100102$ 表示，它是回文的。\n- 对于 2010 年 10 月 2 日，用 $8$ 位数字 $20101002$ 表示，它不是回文的。\n\n每一年中都有 $12$ 个月份：\n\n其中，$1, 3, 5, 7, 8, 10, 12$ 月每个月有 $31$ 天；$4, 6, 9, 11$ 月每个月有 $30$ 天；而对于 $2$ 月，闰年时有 $29$ 天，平年时有 $28$ 天。\n\n一个年份是闰年当且仅当它满足下列两种情况其中的一种：\n\n1. 这个年份是 $4$ 的整数倍，但不是 $100$ 的整数倍；\n2. 这个年份是 $400$ 的整数倍。\n\n例如：\n\n- 以下几个年份都是闰年：$2000, 2012, 2016$。\n- 以下几个年份是平年：$1900, 2011, 2014$。", "inputFormat": "两行，每行包括一个 $8$ 位数字。\n\n第一行表示牛牛指定的起始日期。\n\n第二行表示牛牛指定的终止日期。\n\n保证 $\\mathit{date}_1$ 和 $\\mathit{date}_2$ 都是真实存在的日期，且年份部分一定为 $4$ 位数字，且首位数字不为 $0$。\n\n保证 $\\mathit{date}_1$ 一定不晚于 $\\mathit{date}_2$。", "outputFormat": "一个整数，表示在 $\\mathit{date}_1$ 和 $\\mathit{date}_2$ 之间，有多少个日期是回文的。", "hint": "**【样例说明】**\n\n对于样例 1，符合条件的日期是 $20111102$。\n\n对于样例 2，符合条件的日期是 $20011002$ 和 $20100102$。\n\n**【子任务】**\n\n对于 $60 \\%$ 的数据，满足 $\\mathit{date}_1 = \\mathit{date}_2$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Junior] Palindromic Date", "background": "NOIP 2016 Junior T2.", "description": "In daily life, a unique date can be specified by the three components: year, month, and day.\n\nNiuniu habitually uses an 8-digit number to represent a date, where the first 4 digits denote the year, the next 2 digits denote the month, and the last 2 digits denote the day. Clearly, a date has only one representation, and two different dates do not share the same representation.\n\nNiuniu considers a date to be palindromic if and only if the 8-digit number representing this date is a palindrome. Now Niuniu wants to know: between the two dates he specifies (including both endpoints), how many real dates are palindromic.\n\nAn 8-digit number is palindromic if and only if, for all $i$ ($1 \\le i \\le 8$), the $i$-th digit from the left is the same as the $(9 - i)$-th digit (that is, the $i$-th digit from the right).\n\nFor example:\n- For November 19, 2016, represented by the 8-digit number $20161119$, it is not palindromic.\n- For January 2, 2010, represented by the 8-digit number $20100102$, it is palindromic.\n- For October 2, 2010, represented by the 8-digit number $20101002$, it is not palindromic.\n\nEach year has 12 months:\n\nAmong them, months $1, 3, 5, 7, 8, 10, 12$ each have $31$ days; months $4, 6, 9, 11$ each have $30$ days; and for February, there are $29$ days in a leap year and $28$ days in a common year.\n\nA year is a leap year if and only if it satisfies one of the following:\n1. The year is a multiple of $4$ but not a multiple of $100$;\n2. The year is a multiple of $400$.\n\nFor example:\n- The following years are leap years: $2000, 2012, 2016$.\n- The following years are common years: $1900, 2011, 2014$.", "inputFormat": "Two lines, each containing an 8-digit number.\n\nThe first line is the start date specified by Niuniu.\n\nThe second line is the end date specified by Niuniu.\n\nIt is guaranteed that $\\mathit{date}_1$ and $\\mathit{date}_2$ are real dates, the year part always has 4 digits with a nonzero first digit, and $\\mathit{date}_1$ is not later than $\\mathit{date}_2$.", "outputFormat": "Output a single integer, representing how many dates between $\\mathit{date}_1$ and $\\mathit{date}_2$ (inclusive) are palindromic.", "hint": "Sample Explanation:\n\n- For sample 1, the valid date is $20111102$.\n- For sample 2, the valid dates are $20011002$ and $20100102$.\n\nSubtasks:\n\n- For $60\\%$ of the testdata, $\\mathit{date}_1 = \\mathit{date}_2$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 普及组] 回文日期", "background": "NOIP2016 普及组 T2", "description": "在日常生活中，通过年、月、日这三个要素可以表示出一个唯一确定的日期。\n\n牛牛习惯用 $8$ 位数字表示一个日期，其中，前 $4$ 位代表年份，接下来 $2$ 位代表月份，最后 $2$ 位代表日期。显然：一个日期只有一种表示方法，而两个不同的日期的表示方法不会相同。\n\n牛牛认为，一个日期是回文的，当且仅当表示这个日期的 $8$ 位数字是回文的。现在，牛牛想知道：在他指定的两个日期之间（包含这两个日期本身），有多少个真实存在的日期是回文的。\n\n一个 $8$ 位数字是回文的，当且仅当对于所有的 $i$（$1  \\le i \\le 8$）从左向右数的第 $i$ 个数字和第 $9-i$ 个数字（即从右向左数的第 $i$ 个数字）是相同的。\n\n例如：\n\n- 对于 2016 年 11 月 19 日，用 $8$ 位数字 $20161119$ 表示，它不是回文的。\n- 对于 2010 年 1 月 2 日，用 $8$ 位数字 $20100102$ 表示，它是回文的。\n- 对于 2010 年 10 月 2 日，用 $8$ 位数字 $20101002$ 表示，它不是回文的。\n\n每一年中都有 $12$ 个月份：\n\n其中，$1, 3, 5, 7, 8, 10, 12$ 月每个月有 $31$ 天；$4, 6, 9, 11$ 月每个月有 $30$ 天；而对于 $2$ 月，闰年时有 $29$ 天，平年时有 $28$ 天。\n\n一个年份是闰年当且仅当它满足下列两种情况其中的一种：\n\n1. 这个年份是 $4$ 的整数倍，但不是 $100$ 的整数倍；\n2. 这个年份是 $400$ 的整数倍。\n\n例如：\n\n- 以下几个年份都是闰年：$2000, 2012, 2016$。\n- 以下几个年份是平年：$1900, 2011, 2014$。", "inputFormat": "两行，每行包括一个 $8$ 位数字。\n\n第一行表示牛牛指定的起始日期。\n\n第二行表示牛牛指定的终止日期。\n\n保证 $\\mathit{date}_1$ 和 $\\mathit{date}_2$ 都是真实存在的日期，且年份部分一定为 $4$ 位数字，且首位数字不为 $0$。\n\n保证 $\\mathit{date}_1$ 一定不晚于 $\\mathit{date}_2$。", "outputFormat": "一个整数，表示在 $\\mathit{date}_1$ 和 $\\mathit{date}_2$ 之间，有多少个日期是回文的。", "hint": "**【样例说明】**\n\n对于样例 1，符合条件的日期是 $20111102$。\n\n对于样例 2，符合条件的日期是 $20011002$ 和 $20100102$。\n\n**【子任务】**\n\n对于 $60 \\%$ 的数据，满足 $\\mathit{date}_1 = \\mathit{date}_2$。", "locale": "zh-CN"}}}
{"pid": "P2011", "type": "P", "difficulty": 6, "samples": [["3 5 1 3\r\n1 18\r\n1 2 6\r\n1 3 2\r\n2 3 6\r\n3 0 6\r\n2 0 2\r\n1 0\r\n2 3\r\n1 2\r\n", "18.00\r\n-6.00\r\n12.00\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "高斯消元"], "title": "计算电压", "background": "相信不少人轻松灭掉 1，2 两题（蒟蒻无视此句） ，我相信，大家对物理也是很有兴趣的（众人：我们对揍人也是很有兴趣的） ，那么，再奉上 100 分给 Physicaler 们。", "description": "现给定一个电阻网络，已知其中每条边上的电阻，和若干个点和负极之间的电压（电源电压不变） ，现在求任意两点之间的电压。", "inputFormat": "第一行四个正整数 $n,m,k,q$，表示有 $n$ 个节点（可能是几个点用导线相连接，与一个点等价，编号为 $1$ 至 $n$，$0$ 号节点为电源负极），$m$ 个定值电阻（每个定值电阻连接两个点），电源正极有 $k$ 个接口，有 $q$ 个询问。\n\n接下来 $k$ 行，每行两个正整数，表示这个正极的编号与该接线柱与电源负极之间的电压 $u_i$。\n\n再接下来 $m$ 行，每行三个正整数 $v_i,w_i,r_i$，表示节点 $v_i$ 与 $w_i$ 之间有一条阻值为 $r_i$ 的电阻丝。\n\n再接下来 $q$ 行，每行两个正整数 $a_i,b_i$，表示要求 $a_i$ 与 $b_i$ 之间的电压。", "outputFormat": "一共 $q$ 行，每行一个实数表示 $a_i$ 与 $b_i$ 之间的电压（保留两位小数）。若 $a_i$ 点电压小于 $b_i$ 点电压，输出负值。", "hint": "【数据范围】\n\n对于 $10\\%$ 的数据，$1\\le q\\le 10$；\n\n对于 $20\\%$ 的数据，$1\\le n\\le 10$，且保证电路为串联、并联或混联；\n\n对于 $40\\%$ 的数据，$1\\le n\\le 40$，$k\\le 5$；\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 200$，$1\\le m\\le 2\\times 10^5$，$1\\le r_i,u_i\\le 10^4$，$1\\le q\\le 10^6$。\n\n【时空限制】\n\n时间限制：1.00s，空间限制：125.00MB。\n\n【样例解释】\n\n如图所示。\n\n![样例解释](https://cdn.luogu.com.cn/upload/pic/722.png)", "locale": "zh-CN", "translations": {"en": {"title": "Compute Voltage", "background": "I believe many of you easily beat problems 1 and 2 (jǔruò, please ignore this line). I also believe everyone is very interested in physics (crowd: we are also very interested in punching people). So here are another 100 points for the \"Physicalers.\"", "description": "You are given a resistor network. The resistance on each edge is known, and the voltages between several nodes and the negative terminal are given (the power-supply voltage is constant). Now compute the voltage between any two nodes.", "inputFormat": "The first line contains four positive integers $n, m, k, q$, indicating there are $n$ nodes (some nodes may be connected by wires and thus are equivalent to one node; nodes are numbered $1$ to $n$, and node $0$ is the negative terminal of the power supply), $m$ fixed resistors (each fixed resistor connects two nodes), the positive terminal of the power supply has $k$ terminals, and there are $q$ queries.\n\nThe next $k$ lines each contain two positive integers, indicating the index of this positive terminal and the voltage $u_i$ between this binding post and the negative terminal.\n\nThe next $m$ lines each contain three positive integers $v_i, w_i, r_i$, indicating that there is a resistor of resistance $r_i$ between nodes $v_i$ and $w_i$.\n\nThe next $q$ lines each contain two positive integers $a_i, b_i$, indicating that you need to compute the voltage between $a_i$ and $b_i$.", "outputFormat": "Output $q$ lines. Each line contains one real number representing the voltage between $a_i$ and $b_i$ (rounded to two decimal places). If the voltage at $a_i$ is less than the voltage at $b_i$, output a negative value.", "hint": "Constraints\n\n- For $10\\%$ of the testdata, $1 \\le q \\le 10$.\n- For $20\\%$ of the testdata, $1 \\le n \\le 10$, and the circuit is guaranteed to be series, parallel, or a mixed connection.\n- For $40\\%$ of the testdata, $1 \\le n \\le 40$, $k \\le 5$.\n- For $100\\%$ of the testdata, $1 \\le k \\le n \\le 200$, $1 \\le m \\le 2 \\times 10^5$, $1 \\le r_i, u_i \\le 10^4$, $1 \\le q \\le 10^6$.\n\nTime and Memory Limits\n\nTime limit: 1.00 s, Memory limit: 125.00 MB.\n\nSample Explanation\n\nAs shown in the figure.\n\n![样例解释](https://cdn.luogu.com.cn/upload/pic/722.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "计算电压", "background": "相信不少人轻松灭掉 1，2 两题（蒟蒻无视此句） ，我相信，大家对物理也是很有兴趣的（众人：我们对揍人也是很有兴趣的） ，那么，再奉上 100 分给 Physicaler 们。", "description": "现给定一个电阻网络，已知其中每条边上的电阻，和若干个点和负极之间的电压（电源电压不变） ，现在求任意两点之间的电压。", "inputFormat": "第一行四个正整数 $n,m,k,q$，表示有 $n$ 个节点（可能是几个点用导线相连接，与一个点等价，编号为 $1$ 至 $n$，$0$ 号节点为电源负极），$m$ 个定值电阻（每个定值电阻连接两个点），电源正极有 $k$ 个接口，有 $q$ 个询问。\n\n接下来 $k$ 行，每行两个正整数，表示这个正极的编号与该接线柱与电源负极之间的电压 $u_i$。\n\n再接下来 $m$ 行，每行三个正整数 $v_i,w_i,r_i$，表示节点 $v_i$ 与 $w_i$ 之间有一条阻值为 $r_i$ 的电阻丝。\n\n再接下来 $q$ 行，每行两个正整数 $a_i,b_i$，表示要求 $a_i$ 与 $b_i$ 之间的电压。", "outputFormat": "一共 $q$ 行，每行一个实数表示 $a_i$ 与 $b_i$ 之间的电压（保留两位小数）。若 $a_i$ 点电压小于 $b_i$ 点电压，输出负值。", "hint": "【数据范围】\n\n对于 $10\\%$ 的数据，$1\\le q\\le 10$；\n\n对于 $20\\%$ 的数据，$1\\le n\\le 10$，且保证电路为串联、并联或混联；\n\n对于 $40\\%$ 的数据，$1\\le n\\le 40$，$k\\le 5$；\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 200$，$1\\le m\\le 2\\times 10^5$，$1\\le r_i,u_i\\le 10^4$，$1\\le q\\le 10^6$。\n\n【时空限制】\n\n时间限制：1.00s，空间限制：125.00MB。\n\n【样例解释】\n\n如图所示。\n\n![样例解释](https://cdn.luogu.com.cn/upload/pic/722.png)", "locale": "zh-CN"}}}
{"pid": "P2012", "type": "P", "difficulty": 6, "samples": [["3\n10\n20\n6\n0", "0\n225116160\n53238784\n7680\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["生成函数"], "title": "拯救世界2", "background": "前三题太弱了嘛，在看看最后一道渣题。", "description": "经过 12 年的韬光养晦，世界末日再次来临（众人：什么鬼逻辑......）。\n\n这次，小 a 和 uim 已经做好了一切准备，顺利召唤出了 kkksc03 大神和 lzn 大神。然而，kkksc03 和 lzn 告诉他们，这次世界末日太过强大，他们已无法挽回，只有创世神 JOHNKRAM 能拯救这个世界。\n\n然而，创世神 JOHNKRAM 是无法召唤的，除非把整个宇宙按照 $E=mc^2$ 全部转化成能量。因为根据 C\\_SUNSHINE 大神随手推算出的召唤定律，至少需要被召唤者百万亿分之一的能量才能召唤（众人：什么鬼定律......）。\n****\n当然，还有一种方法，那就是找出创世神 JOHNKRAM 的基因序列。普通人基因序列由 A、C、G、T 构成，创世神 JOHNKRAM 不是普通人（是个胖纸），基因序列也不一样。除了这四种普通的，还有乾、兑、离、震、巽、坎、艮、坤八种特殊基因。其中乾、坎、艮、震属阳，只能出现奇数次；坤、兑、离、巽属阴，只能出现偶数次。\n\n现在只知道创世神 JOHNKRAM 的基因序列共有 $n$ 位，其他一概不知。小 a 和 uim 想知道他们最多要试多少次，才能召唤出创世神 JOHNKRAM 。这个数字有可能很大，所以输出答案模 $10^9$ 即可（C\\_SUNSHINE 的忠告：远离八卦，远离肥胖）。", "inputFormat": "输入由多组数据组成，每组数据一行，输入一个数 $n$，输入以 $0$ 结束。", "outputFormat": "对于每组数据，输出一行一个整数，表示答案对 $10^9$ 取模的结果。", "hint": "【数据范围】     \n对于 $10\\%$ 的数据：$1\\le n < 25$，数据不超过 $10$ 组；  \n对于 $50\\%$ 的数据：$1\\le n < 2^{31}$，数据不超过 $10^3$ 组；   \n对于 $100\\%$ 的数据：$1\\le n < 2^{63}$，数据不超过 $2\\times 10^5$ 组。\n\n【样例解释】  \n第一个数据解释：  \n只有 $3$ 位，没有合法方案，故答案为 $0$。\n\n【备注】\n\n附件：聊天记录（纯粹扯淡）\n\nJOHNKRAM 8:50:33\n\n喂喂，坑神之赛2可以开始了吧\n\nC_SUNSHINE 8:50:34\n\n[自动回复]恩！\n\nJOHNKRAM 8:51:12\n\n我准备把最后一题数据从 $50$ 放到 $2^{63}$。\n\nC_SUNSHINE 8:51:12\n\n[自动回复]恩！\n\nJOHNKRAM 8:51:45\n\n你同意喽？\n\nC_SUNSHINE 8:51:46\n\n[自动回复]恩！\n\nC_SUNSHINE 11:58:50\n\n你疯了吗？！\n\nJOHNKRAM 11:58:52\n\n[自动回复]您好，我现在有事不在，一会再和您联系。 不再提醒", "locale": "zh-CN", "translations": {"en": {"title": "Save the World 2", "background": "The first three problems were too weak. Now take a look at this final “trash” problem.", "description": "After 12 years of hiding their strength, the end of the world comes again (everyone: what kind of logic is that...).\n\nThis time, xiao a and uim have prepared everything and successfully summoned the gurus kkksc03 and lzn. However, kkksc03 and lzn told them that this doomsday is too powerful to reverse. Only the Creator God JOHNKRAM can save the world.\n\nBut the Creator God JOHNKRAM cannot be summoned, unless the entire universe is converted into energy according to $E=mc^2$. Based on the summoning law casually derived by the guru C_SUNSHINE, at least one quadrillionth of the summonee’s energy is required to summon them (everyone: what kind of law is that...).\n\nOf course, there is another way: find the genetic sequence of the Creator God JOHNKRAM. A normal human gene sequence consists of A, C, G, T. The Creator God JOHNKRAM is not a normal person (he’s a chubby guy), so his genetic sequence is different. Besides these four ordinary ones, there are eight special genes: 乾 (Qian), 兑 (Dui), 离 (Li), 震 (Zhen), 巽 (Xun), 坎 (Kan), 艮 (Gen), 坤 (Kun). Among them, 乾, 坎, 艮, 震 are “yang” and can only appear an odd number of times; 坤, 兑, 离, 巽 are “yin” and can only appear an even number of times.\n\nNow we only know that the Creator God JOHNKRAM’s genetic sequence has $n$ positions; nothing else is known. xiao a and uim want to know the maximum number of attempts they would need in order to summon the Creator God JOHNKRAM. This number can be large, so output the answer modulo $10^9$ (C_SUNSHINE’s advice: stay away from the Eight Trigrams, stay away from obesity).", "inputFormat": "Multiple test cases. Each test case contains a single integer $n$ on one line. Input terminates with $0$.", "outputFormat": "For each test case, output a single integer on one line: the answer modulo $10^9$.", "hint": "Constraints  \nFor $10\\%$ of the testdata: $1 \\le n < 25$, the number of test cases does not exceed $10$.  \nFor $50\\%$ of the testdata: $1 \\le n < 2^{31}$, the number of test cases does not exceed $10^3$.  \nFor $100\\%$ of the testdata: $1 \\le n < 2^{63}$, the number of test cases does not exceed $2 \\times 10^5$.\n\nSample Explanation  \nExplanation for the first sample:  \nThere are only $3$ positions, so there is no valid configuration. The answer is $0$.\n\nNotes\n\nAttachment: chat log (pure nonsense)\n\nJOHNKRAM 8:50:33  \nHey hey, can the Pit God Contest 2 start now?\n\nC_SUNSHINE 8:50:34  \n[Auto-reply] En!\n\nJOHNKRAM 8:51:12  \nI’m planning to raise the last problem’s range from $50$ to $2^{63}$.\n\nC_SUNSHINE 8:51:12  \n[Auto-reply] En!\n\nJOHNKRAM 8:51:45  \nYou agree?\n\nC_SUNSHINE 8:51:46  \n[Auto-reply] En!\n\nC_SUNSHINE 11:58:50  \nAre you crazy?!\n\nJOHNKRAM 11:58:52  \n[Auto-reply] Hello, I’m busy right now and will get back to you later. Do not remind again.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拯救世界2", "background": "前三题太弱了嘛，在看看最后一道渣题。", "description": "经过 12 年的韬光养晦，世界末日再次来临（众人：什么鬼逻辑......）。\n\n这次，小 a 和 uim 已经做好了一切准备，顺利召唤出了 kkksc03 大神和 lzn 大神。然而，kkksc03 和 lzn 告诉他们，这次世界末日太过强大，他们已无法挽回，只有创世神 JOHNKRAM 能拯救这个世界。\n\n然而，创世神 JOHNKRAM 是无法召唤的，除非把整个宇宙按照 $E=mc^2$ 全部转化成能量。因为根据 C\\_SUNSHINE 大神随手推算出的召唤定律，至少需要被召唤者百万亿分之一的能量才能召唤（众人：什么鬼定律......）。\n****\n当然，还有一种方法，那就是找出创世神 JOHNKRAM 的基因序列。普通人基因序列由 A、C、G、T 构成，创世神 JOHNKRAM 不是普通人（是个胖纸），基因序列也不一样。除了这四种普通的，还有乾、兑、离、震、巽、坎、艮、坤八种特殊基因。其中乾、坎、艮、震属阳，只能出现奇数次；坤、兑、离、巽属阴，只能出现偶数次。\n\n现在只知道创世神 JOHNKRAM 的基因序列共有 $n$ 位，其他一概不知。小 a 和 uim 想知道他们最多要试多少次，才能召唤出创世神 JOHNKRAM 。这个数字有可能很大，所以输出答案模 $10^9$ 即可（C\\_SUNSHINE 的忠告：远离八卦，远离肥胖）。", "inputFormat": "输入由多组数据组成，每组数据一行，输入一个数 $n$，输入以 $0$ 结束。", "outputFormat": "对于每组数据，输出一行一个整数，表示答案对 $10^9$ 取模的结果。", "hint": "【数据范围】     \n对于 $10\\%$ 的数据：$1\\le n < 25$，数据不超过 $10$ 组；  \n对于 $50\\%$ 的数据：$1\\le n < 2^{31}$，数据不超过 $10^3$ 组；   \n对于 $100\\%$ 的数据：$1\\le n < 2^{63}$，数据不超过 $2\\times 10^5$ 组。\n\n【样例解释】  \n第一个数据解释：  \n只有 $3$ 位，没有合法方案，故答案为 $0$。\n\n【备注】\n\n附件：聊天记录（纯粹扯淡）\n\nJOHNKRAM 8:50:33\n\n喂喂，坑神之赛2可以开始了吧\n\nC_SUNSHINE 8:50:34\n\n[自动回复]恩！\n\nJOHNKRAM 8:51:12\n\n我准备把最后一题数据从 $50$ 放到 $2^{63}$。\n\nC_SUNSHINE 8:51:12\n\n[自动回复]恩！\n\nJOHNKRAM 8:51:45\n\n你同意喽？\n\nC_SUNSHINE 8:51:46\n\n[自动回复]恩！\n\nC_SUNSHINE 11:58:50\n\n你疯了吗？！\n\nJOHNKRAM 11:58:52\n\n[自动回复]您好，我现在有事不在，一会再和您联系。 不再提醒", "locale": "zh-CN"}}}
{"pid": "P2013", "type": "P", "difficulty": 4, "samples": [["5\na 1 5\nb 1 1000\nc 2 4\nd 51 60\ne 153 79\n30\ne 160\nd 210", "160.83 123.41"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何"], "title": "无线电测向", "background": "", "description": "有天线定位装置的船能通过接收当地灯塔信号来确定自己的位置。每个灯塔固定在已知点上并发出特有的信号。当船检测到信号，它可通过旋转天线直到信号达到最大强度。这样就可确定自身与该灯塔的位置关系。只要接收到两个灯塔的信息，就有可能确定船当前的位置。\n\n编程任务：通过一对灯塔信息来确定船的位置。\n\n灯塔和船的位置被确定在一个直角坐标系内。$x$ 轴正向指向东，$y$ 轴正向指向北。船的航行路线从正北开始按顺时针用度表示。北是 $0^\\circ$，东是 $90^\\circ$，南是 $180^\\circ$，西是 $270^\\circ$。灯塔与船的位置关系用相对于船的航行方向顺时针用度表示。\n", "inputFormat": "文件的第一行是一个整数，表示灯塔的数目 $N$。以下 $N$ 行，每行表示一个灯塔，为灯塔名称，$x$ 坐标和 $y$ 坐标。它们都用空格隔开。\n\n灯塔信息下面是船的信息包括三行，一行是船的方向，其余两行是所接收到的灯塔信号。\n\n具体如下：\n\n| 输入数据 | 数据的含义|\n| :-: | :-:|\n| 方向 | 船的航行方向 |\n| 名称 $1$，角度 $1$ | 第一个灯塔信息的名称，灯塔的方位 |\n| 名称 $2$，角度 $2$ | 第二个灯塔信息的名称，灯塔的方位 |\n\n灯塔的方位为船与灯塔所在的直线与船的航行方向的夹角（从船的航行方向开始顺时针）。$2$ 个数据用空格隔开。", "outputFormat": "输出船的位置（精确到 $2$ 位小数）。如果无法确定船的位置，应输出 `NO ANSWER`（不能使用小写）。\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 30$，灯塔名称是 $20$ 个以下的字母。\n", "locale": "zh-CN", "translations": {"en": {"title": "Radio Direction Finding", "background": "", "description": "A ship equipped with an antenna positioning device can determine its position by receiving signals from local lighthouses. Each lighthouse is fixed at a known point and emits a unique signal. When the ship detects a signal, it can rotate its antenna until the signal reaches maximum strength, thereby determining its relative position to that lighthouse. As long as signals from two lighthouses are received, it is possible to determine the ship’s current position.\n\nProgramming task: determine the ship’s position from a pair of lighthouse readings.\n\nThe positions of the lighthouses and the ship are given in a Cartesian coordinate system. The positive $x$-axis points east, and the positive $y$-axis points north. The ship’s heading is measured clockwise from due north in degrees. North is $0^\\circ$, east is $90^\\circ$, south is $180^\\circ$, and west is $270^\\circ$. The relative position of a lighthouse to the ship is given as the angle, measured clockwise in degrees, from the ship’s heading.", "inputFormat": "The first line contains an integer, the number of lighthouses $N$. Each of the next $N$ lines describes one lighthouse with its name, $x$-coordinate, and $y$-coordinate, separated by spaces.\n\nFollowing the lighthouse data are three lines describing the ship: one line for the ship’s heading, and two lines for the two received lighthouse signals.\n\nDetails are as follows:\n\n| Input item | Meaning |\n| :-: | :-: |\n| Heading | The ship’s heading. |\n| Name 1, Angle 1 | The name of the first lighthouse and its bearing. |\n| Name 2, Angle 2 | The name of the second lighthouse and its bearing. |\n\nThe bearing of a lighthouse is the angle between the line from the ship to the lighthouse and the ship’s heading, measured clockwise from the ship’s heading. The two items on each of the last two lines are separated by a space.", "outputFormat": "Output the ship’s position, accurate to 2 decimal places. If the ship’s position cannot be determined, output `NO ANSWER` (do not use lowercase).", "hint": "For 100% of the testdata, $1 \\le N \\le 30$, and lighthouse names contain at most 20 letters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无线电测向", "background": "", "description": "有天线定位装置的船能通过接收当地灯塔信号来确定自己的位置。每个灯塔固定在已知点上并发出特有的信号。当船检测到信号，它可通过旋转天线直到信号达到最大强度。这样就可确定自身与该灯塔的位置关系。只要接收到两个灯塔的信息，就有可能确定船当前的位置。\n\n编程任务：通过一对灯塔信息来确定船的位置。\n\n灯塔和船的位置被确定在一个直角坐标系内。$x$ 轴正向指向东，$y$ 轴正向指向北。船的航行路线从正北开始按顺时针用度表示。北是 $0^\\circ$，东是 $90^\\circ$，南是 $180^\\circ$，西是 $270^\\circ$。灯塔与船的位置关系用相对于船的航行方向顺时针用度表示。\n", "inputFormat": "文件的第一行是一个整数，表示灯塔的数目 $N$。以下 $N$ 行，每行表示一个灯塔，为灯塔名称，$x$ 坐标和 $y$ 坐标。它们都用空格隔开。\n\n灯塔信息下面是船的信息包括三行，一行是船的方向，其余两行是所接收到的灯塔信号。\n\n具体如下：\n\n| 输入数据 | 数据的含义|\n| :-: | :-:|\n| 方向 | 船的航行方向 |\n| 名称 $1$，角度 $1$ | 第一个灯塔信息的名称，灯塔的方位 |\n| 名称 $2$，角度 $2$ | 第二个灯塔信息的名称，灯塔的方位 |\n\n灯塔的方位为船与灯塔所在的直线与船的航行方向的夹角（从船的航行方向开始顺时针）。$2$ 个数据用空格隔开。", "outputFormat": "输出船的位置（精确到 $2$ 位小数）。如果无法确定船的位置，应输出 `NO ANSWER`（不能使用小写）。\n", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 30$，灯塔名称是 $20$ 个以下的字母。\n", "locale": "zh-CN"}}}
{"pid": "P2014", "type": "P", "difficulty": 4, "samples": [["7 4\n2 2\n0 1\n0 4\n2 1\n7 1\n7 6\n2 2", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "1997", "背包 DP", "树形 DP", "CTSC/CTS"], "title": "[CTSC1997] 选课", "background": null, "description": "在大学里每个学生，为了达到一定的学分，必须从很多课程里选择一些课程来学习，在课程里有些课程必须在某些课程之前学习，如高等数学总是在其它课程之前学习。现在有 $N$ 门功课，每门课有若干学分，分别记作 $s_1,s_2,\\cdots,s_N$，每门课有一门或没有直接先修课（若课程 $a$ 是课程 $b$ 的先修课即只有学完了课程 $a$，才能学习课程 $b$）。一个学生要从这些课程里选择 $M$ 门课程学习，问他能获得的最大学分是多少？\n\n题目保证课程安排无冲突。（即不会有 $a$ 是 $b$ 的先修课，$b$ 也是 $a$ 的先修课这类情况存在。）", "inputFormat": "第一行有两个整数 $N$，$M$ 用空格隔开 $(1 \\leq N \\leq 300$ , $1 \\leq M \\leq 300)$。\n\n接下来的 $N$ 行，第 $i+1$ 行包含两个整数 $k_i$ 和 $s_i$，$k_i$ 表示第 $i$ 门课的直接先修课，$s_i$ 表示第 $i$ 门课的学分。若 $k_i=0$ 表示没有直接先修课 $(0 \\leq {k_i} \\leq N$,$1 \\leq {s_i} \\leq 20)$。\n\n数据保证至少存在一个 $k_i=0$，即至少一门课无先修课。", "outputFormat": "只有一行，选 $M$ 门课程的最大学分。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[CTSC1997] Course Selection", "background": null, "description": "At a university, to reach a certain number of credits, each student must choose some courses from many options. Among the courses, some must be taken before others; for example, Advanced Mathematics is always taken before other courses. Now there are $N$ courses, each with some credits, denoted as $s_1,s_2,\\cdots,s_N$. Each course has one direct prerequisite or none (if course $a$ is a prerequisite of course $b$, then one can study course $b$ only after finishing course $a$). A student needs to choose $M$ courses from these courses. What is the maximum total number of credits he can obtain?\n\nThe problem guarantees that the course arrangement has no conflicts. (That is, there is no situation where $a$ is a prerequisite of $b$ while $b$ is also a prerequisite of $a$.)", "inputFormat": "The first line contains two integers $N$, $M$ separated by a space $(1 \\leq N \\leq 300$ , $1 \\leq M \\leq 300)$.\n\nThe next $N$ lines: the $(i+1)$-th line contains two integers $k_i$ and $s_i$, where $k_i$ is the direct prerequisite of course $i$, and $s_i$ is the credits of course $i$. If $k_i=0$, it means there is no direct prerequisite $(0 \\leq {k_i} \\leq N$,$1 \\leq {s_i} \\leq 20)$.\n\nThe testdata guarantees that there exists at least one $k_i=0$, i.e., there is at least one course without a prerequisite.", "outputFormat": "Output a single line containing the maximum total credits when choosing $M$ courses.", "hint": "Translated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC1997] 选课", "background": null, "description": "在大学里每个学生，为了达到一定的学分，必须从很多课程里选择一些课程来学习，在课程里有些课程必须在某些课程之前学习，如高等数学总是在其它课程之前学习。现在有 $N$ 门功课，每门课有若干学分，分别记作 $s_1,s_2,\\cdots,s_N$，每门课有一门或没有直接先修课（若课程 $a$ 是课程 $b$ 的先修课即只有学完了课程 $a$，才能学习课程 $b$）。一个学生要从这些课程里选择 $M$ 门课程学习，问他能获得的最大学分是多少？\n\n题目保证课程安排无冲突。（即不会有 $a$ 是 $b$ 的先修课，$b$ 也是 $a$ 的先修课这类情况存在。）", "inputFormat": "第一行有两个整数 $N$，$M$ 用空格隔开 $(1 \\leq N \\leq 300$ , $1 \\leq M \\leq 300)$。\n\n接下来的 $N$ 行，第 $i+1$ 行包含两个整数 $k_i$ 和 $s_i$，$k_i$ 表示第 $i$ 门课的直接先修课，$s_i$ 表示第 $i$ 门课的学分。若 $k_i=0$ 表示没有直接先修课 $(0 \\leq {k_i} \\leq N$,$1 \\leq {s_i} \\leq 20)$。\n\n数据保证至少存在一个 $k_i=0$，即至少一门课无先修课。", "outputFormat": "只有一行，选 $M$ 门课程的最大学分。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2015", "type": "P", "difficulty": 4, "samples": [["5 2\n1 3 1\n1 4 10\n2 3 20\n3 5 20\n", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "树形数据结构", "背包 DP", "树形 DP"], "title": "二叉苹果树", "background": "", "description": "有一棵苹果树，如果树枝有分叉，一定是分二叉（就是说没有只有一个儿子的结点）\n\n这棵树共有 $N$ 个结点（叶子点或者树枝分叉点），编号为 $1 \\sim N$，树根编号一定是 $1$。\n\n我们用一根树枝两端连接的结点的编号来描述一根树枝的位置。下面是一颗有 $4$ 个树枝的树：\n\n```\n2   5\n \\ / \n  3   4\n   \\ /\n    1\n```\n\n现在这颗树枝条太多了，需要剪枝。但是一些树枝上长有苹果。\n\n给定需要保留的树枝数量，求出最多能留住多少苹果。\n", "inputFormat": "第一行 $2$ 个整数 $N$ 和 $Q$，分别表示表示树的结点数，和要保留的树枝数量。\n\n接下来 $N-1$ 行，每行 $3$ 个整数，描述一根树枝的信息：前 $2$ 个数是它连接的结点的编号，第 $3$ 个数是这根树枝上苹果的数量。", "outputFormat": "一个数，最多能留住的苹果的数量。\n", "hint": "$1 \\leqslant Q < N \\leqslant 100$，每根树枝上的苹果 $\\leqslant 3 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Binary Apple Tree", "background": "", "description": "There is an apple tree. If a branch splits, it always splits into two (that is, there is no node with exactly one child).\n\nThe tree has $N$ nodes (leaves or branching points), numbered $1$ to $N$, and the root is always node $1$.\n\nWe describe a branch by the pair of node indices it connects. Below is a tree with $4$ branches:\n\n```\n2   5\n \\ / \n  3   4\n   \\ /\n    1\n```\n\nNow the tree has too many branches and needs pruning. However, some branches have apples on them.\n\nGiven the number of branches to keep, find the maximum number of apples that can be retained.", "inputFormat": "The first line contains $2$ integers $N$ and $Q$, representing the number of nodes in the tree and the number of branches to keep, respectively.\n\nEach of the next $N-1$ lines contains $3$ integers describing one branch: the first $2$ numbers are the indices of the nodes it connects, and the third number is the number of apples on that branch.", "outputFormat": "Output a single integer, the maximum number of apples that can be retained.", "hint": "$1 \\leqslant Q < N \\leqslant 100$, and the number of apples on each branch $\\leqslant 3 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二叉苹果树", "background": "", "description": "有一棵苹果树，如果树枝有分叉，一定是分二叉（就是说没有只有一个儿子的结点）\n\n这棵树共有 $N$ 个结点（叶子点或者树枝分叉点），编号为 $1 \\sim N$，树根编号一定是 $1$。\n\n我们用一根树枝两端连接的结点的编号来描述一根树枝的位置。下面是一颗有 $4$ 个树枝的树：\n\n```\n2   5\n \\ / \n  3   4\n   \\ /\n    1\n```\n\n现在这颗树枝条太多了，需要剪枝。但是一些树枝上长有苹果。\n\n给定需要保留的树枝数量，求出最多能留住多少苹果。\n", "inputFormat": "第一行 $2$ 个整数 $N$ 和 $Q$，分别表示表示树的结点数，和要保留的树枝数量。\n\n接下来 $N-1$ 行，每行 $3$ 个整数，描述一根树枝的信息：前 $2$ 个数是它连接的结点的编号，第 $3$ 个数是这根树枝上苹果的数量。", "outputFormat": "一个数，最多能留住的苹果的数量。\n", "hint": "$1 \\leqslant Q < N \\leqslant 100$，每根树枝上的苹果 $\\leqslant 3 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2016", "type": "P", "difficulty": 3, "samples": [["4\n0 1 1\n1 2 2 3\n2 0\n3 0\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2000", "树形 DP", "ICPC", "SEERC"], "title": "[SEERC 2000] 战略游戏", "background": "Bob 喜欢玩电脑游戏，特别是战略游戏。但是他经常无法找到快速玩过游戏的办法。现在他有个问题。", "description": "他要建立一个古城堡，城堡中的路形成一棵无根树。他要在这棵树的结点上放置最少数目的士兵，使得这些士兵能瞭望到所有的路。\n\n注意，某个士兵在一个结点上时，与该结点相连的所有边将都可以被瞭望到。\n\n请你编一程序，给定一树，帮 Bob 计算出他需要放置最少的士兵。", "inputFormat": "第一行一个整数 $n$，表示树中结点的数目。\n\n第二行至第 $n+1$ 行，每行描述每个结点信息，依次为：一个整数 $i$，代表该结点标号，一个自然数 $k$，代表后面有 $k$ 条无向边与结点 $i$ 相连。接下来 $k$ 个整数，分别是每条边的另一个结点标号 $r_1,r_2,\\cdots,r_k$，表示 $i$ 与这些点间各有一条无向边相连。\n\n对于一个 $n$ 个结点的树，结点标号在 $0$ 到 $n-1$ 之间，在输入数据中每条边只出现一次。保证输入是一棵树。", "outputFormat": "输出文件仅包含一个整数，为所求的最少的士兵数目。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 1500$。", "locale": "zh-CN", "translations": {"en": {"title": "[SEERC 2000] Strategic Game", "background": "Bob likes playing computer games, especially strategy games. But he often cannot find a quick way to play through a game. Now he has a problem.", "description": "He wants to build an ancient castle, where the roads inside form an unrooted tree. He wants to place the minimum number of soldiers on the tree’s nodes so that these soldiers can watch all the roads.\n\nNote that when a soldier is on a node, all edges incident to that node can be watched.\n\nPlease write a program that, given a tree, helps Bob compute the minimum number of soldiers he needs to place.", "inputFormat": "The first line contains an integer $n$, the number of nodes in the tree.\n\nFrom the second line to the $(n+1)$-th line, each line describes one node’s information in the following order: an integer $i$, the label of this node; a natural number $k$, meaning there are $k$ undirected edges incident to node $i$; followed by $k$ integers, which are the labels of the other endpoints $r_1, r_2, \\cdots, r_k$, indicating that there is one undirected edge between $i$ and each of these nodes.\n\nFor a tree with $n$ nodes, the node labels are between $0$ and $n-1$. In the input, each edge appears exactly once. It is guaranteed that the input describes a tree.", "outputFormat": "Output a single integer, the minimum number of soldiers required.", "hint": "Constraints\n\nFor all test points, $1 \\leq n \\leq 1500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SEERC 2000] 战略游戏", "background": "Bob 喜欢玩电脑游戏，特别是战略游戏。但是他经常无法找到快速玩过游戏的办法。现在他有个问题。", "description": "他要建立一个古城堡，城堡中的路形成一棵无根树。他要在这棵树的结点上放置最少数目的士兵，使得这些士兵能瞭望到所有的路。\n\n注意，某个士兵在一个结点上时，与该结点相连的所有边将都可以被瞭望到。\n\n请你编一程序，给定一树，帮 Bob 计算出他需要放置最少的士兵。", "inputFormat": "第一行一个整数 $n$，表示树中结点的数目。\n\n第二行至第 $n+1$ 行，每行描述每个结点信息，依次为：一个整数 $i$，代表该结点标号，一个自然数 $k$，代表后面有 $k$ 条无向边与结点 $i$ 相连。接下来 $k$ 个整数，分别是每条边的另一个结点标号 $r_1,r_2,\\cdots,r_k$，表示 $i$ 与这些点间各有一条无向边相连。\n\n对于一个 $n$ 个结点的树，结点标号在 $0$ 到 $n-1$ 之间，在输入数据中每条边只出现一次。保证输入是一棵树。", "outputFormat": "输出文件仅包含一个整数，为所求的最少的士兵数目。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 1500$。", "locale": "zh-CN"}}}
{"pid": "P2017", "type": "P", "difficulty": 4, "samples": [["4 2 3\n1 2\n4 3\n1 3\n4 2\n3 2\n", "1 3\n4 2\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "2009", "USACO", "Special Judge", "栈"], "title": "[USACO09DEC] Dizzy Cows G", "background": "", "description": "The cows have taken to racing each other around the farm but they get very dizzy when running in circles, and everyone knows that dizzy cows don't produce any milk. Farmer John wants to convert all of the two-way cow paths in the farm to one-way paths in order to eliminate any 'cycles' and prevent the cows from getting dizzy.  A 'cycle' enables a cow to traverse one or more cow paths and arrive back at her starting point, thus completing a loop or circle.\n\nThe farm comprises N pastures (1 <= N <= 100,000) conveniently numbered 1..N. M1 (1 <= M1 <= 100,000) one-way cow paths and M2 two-way cow paths (1 <= M2 <= 100,000) connect the pastures. No path directly connects a pasture to itself, although multiple paths might connect two different pastures. A cow may or may not be able to travel between any two given pastures by following a sequence of cow paths.\n\nYour job is to assign a direction to the two-way cow paths such that the entire farm (ultimately with only one-way paths) has no cycles. That is, there should be no sequence of one-way cow paths which leads back to its starting position. The existing one-way cow paths do not form a cycle and should be left as they are.\n\nOne-way cow paths run from pasture A\\_i (1 <= A\\_i <= N) to pasture B\\_i (1 <= B\\_i <= N). Two-way cow paths connect pastures X\\_i (1 <= X\\_i <= N) and Y\\_i (1 <= Y\\_i <= N).\n\nConsider this example:\n\n```cpp\n1-->2 \n|  /| \n| / | \n|/  | \n3<--4 \n```\nThe cow paths between pastures 1 and 3, 2 and 3, and 2 and 4 are two-way paths. One-way paths connect 1 to 2 and also 4 to 3. One valid way to convert the two-way paths into one-way paths in such a way that there are no cycles would be to direct them from 1 to 3, from 2 to 3, and from 3 to 4:\n\n```cpp\n1-->2 \n|  /| \n| / | \nvL  v \n3<--4 \n```\n", "inputFormat": "Line 1: Three space separated integers: N, M1, and M2\n\nLines 2..1+M1: Line i+1 describes a one-way cow path using two space separated integers: A_i and B_i\n\nLines 2+M1..1+M1+M2: Line i+M1+1 describes a two-way cow path using two space separated integers: X_i and Y_i", "outputFormat": "Lines 1..M2: Line i should contain two space-separated integers: either X_i and Y_i or Y_i and X_i, depending on the direction assigned to the i-th two-way path. The two-way paths must appear in the same order in the output as they do in the input. If there is no solution, output \"-1\" on a single line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO09DEC] Dizzy Cows G", "background": "", "description": "The cows have taken to racing each other around the farm but they get very dizzy when running in circles, and everyone knows that dizzy cows don't produce any milk. Farmer John wants to convert all of the two-way cow paths in the farm to one-way paths in order to eliminate any 'cycles' and prevent the cows from getting dizzy.  A 'cycle' enables a cow to traverse one or more cow paths and arrive back at her starting point, thus completing a loop or circle.\n\nThe farm comprises N pastures (1 <= N <= 100,000) conveniently numbered 1..N. M1 (1 <= M1 <= 100,000) one-way cow paths and M2 two-way cow paths (1 <= M2 <= 100,000) connect the pastures. No path directly connects a pasture to itself, although multiple paths might connect two different pastures. A cow may or may not be able to travel between any two given pastures by following a sequence of cow paths.\n\nYour job is to assign a direction to the two-way cow paths such that the entire farm (ultimately with only one-way paths) has no cycles. That is, there should be no sequence of one-way cow paths which leads back to its starting position. The existing one-way cow paths do not form a cycle and should be left as they are.\n\nOne-way cow paths run from pasture A\\_i (1 <= A\\_i <= N) to pasture B\\_i (1 <= B\\_i <= N). Two-way cow paths connect pastures X\\_i (1 <= X\\_i <= N) and Y\\_i (1 <= Y\\_i <= N).\n\nConsider this example:\n\n```cpp\n1-->2 \n|  /| \n| / | \n|/  | \n3<--4 \n```\nThe cow paths between pastures 1 and 3, 2 and 3, and 2 and 4 are two-way paths. One-way paths connect 1 to 2 and also 4 to 3. One valid way to convert the two-way paths into one-way paths in such a way that there are no cycles would be to direct them from 1 to 3, from 2 to 3, and from 3 to 4:\n\n```cpp\n1-->2 \n|  /| \n| / | \nvL  v \n3<--4 \n```\n", "inputFormat": "Line 1: Three space separated integers: N, M1, and M2\n\nLines 2..1+M1: Line i+1 describes a one-way cow path using two space separated integers: A_i and B_i\n\nLines 2+M1..1+M1+M2: Line i+M1+1 describes a two-way cow path using two space separated integers: X_i and Y_i", "outputFormat": "Lines 1..M2: Line i should contain two space-separated integers: either X_i and Y_i or Y_i and X_i, depending on the direction assigned to the i-th two-way path. The two-way paths must appear in the same order in the output as they do in the input. If there is no solution, output \"-1\" on a single line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO09DEC] Dizzy Cows G", "background": null, "description": "奶牛们在农场里互相比赛跑圈，但它们在绕圈跑时会变得非常头晕，而众所周知，头晕的奶牛是不会产奶的。农夫约翰想要将农场中所有的双向奶牛路径改为单向路径，以消除任何「环」并防止奶牛头晕。「环」使得奶牛可以通过一条或多条奶牛路径回到起点，从而完成一个循环或圈。\n\n农场由 $N$ 个牧场组成（$1 \\leq N \\leq 100,000$），这些牧场被方便地编号为 $1$ 到 $N$。$M_1$ 条单向奶牛路径（$1 \\leq M_1 \\leq 100,000$）和 $M_2$ 条双向奶牛路径（$1 \\leq M_2 \\leq 100,000$）连接着这些牧场。没有路径直接连接一个牧场到自身，尽管可能有多条路径连接两个不同的牧场。奶牛可能可以或不可以通过一系列奶牛路径在任意两个给定的牧场之间旅行。\n\n你的任务是为双向奶牛路径分配一个方向，使得整个农场（最终只有单向路径）没有环。也就是说，不应该有任何单向奶牛路径序列能回到其起始位置。现有的单向奶牛路径不形成环，应该保持原样。\n\n单向奶牛路径从牧场 $A_i$（$1 \\leq A_i \\leq N$）到牧场 $B_i$（$1 \\leq B_i \\leq N$）。双向奶牛路径连接牧场 $X_i$（$1 \\leq X_i \\leq N$）和 $Y_i$（$1 \\leq Y_i \\leq N$）。\n\n考虑这个例子：\n\n```cpp\n1-->2 \n|  /| \n| / | \n|/  | \n3<--4 \n```\n牧场 1 和 3，2 和 3，以及 2 和 4 之间的奶牛路径是双向的。单向路径连接 1 到 2 以及 4 到 3。一个有效的方法是将双向路径改为从 1 到 3，从 2 到 3，以及从 3 到 4：\n\n```cpp\n1-->2 \n|  /| \n| / | \nvL  v \n3<--4 \n```", "inputFormat": "第一行三个整数 $n,m_1,m_2$，分别表示点数、有向边的数量、无向边的数量。\n\n第二行起输入 $m_1$ 行，每行 $2$ 个整数 $a,b$，表示 $a$ 到 $b$ 有一条有向边。\n\n接下来输入 $m_2$ 行，每行 $2$ 个整数 $a,b$，表示 $a$ 和 $b$ 之间有一条无向边。", "outputFormat": "对于每条无向边，我们要求按输入顺序输出你定向的结果，也就是说如果你输出 $a\\ b$，那表示你将 $a$ 和 $b$ 之间的无向边定向为 $a \\to b$。\n\n注意，也许存在很多可行的解。你只要输出其中任意一个就好。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P2018", "type": "P", "difficulty": 4, "samples": [["8\r\n1\r\n1\r\n3\r\n4\r\n4\r\n4\r\n3", "5\r\n3 4 5 6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "树形 DP"], "title": "消息传递", "background": null, "description": "巴蜀国的社会等级森严，除了国王之外，每个人均有且只有一个直接上级，当然国王没有上级。如果 $A$ 是 $B$ 的上级，$B$ 是 $C$ 的上级，那么 $A$ 就是 $C$ 的上级。绝对不会出现这样的关系：$A$ 是 $B$ 的上级，$B$ 也是 $A$ 的上级。\n\n最开始的时刻是 $0$，你要做的就是用 $1$ 单位的时间把一个消息告诉某一个人，让他们自行散布消息。在任意一个时间单位中，任何一个已经接到消息的人，都可以把消息告诉他的一个直接上级或者直接下属。\n\n现在，你想知道：\n\n1. 到底需要多长时间，消息才能传遍整个巴蜀国的所有人？\n2. 要使消息在传递过程中消耗的时间最短，可供选择的人有哪些？", "inputFormat": "输入文件的第一行为一个整数 $N$（$N\\le 1000$），表示巴蜀国人的总数，假如人按照 $1$ 到 $n$ 编上了号码，国王的编号是 $1$。第 $2$ 行到第 $N$ 行（共 $N-1$ 行），每一行一个整数，第 $i$ 行的整数表示编号为 $i$ 的人直接上级的编号。", "outputFormat": "文件输出共计两行：\n\n- 第一行为一个整数，表示最后一个人接到消息的最早时间。\n- 第二行有若干个数，表示可供选择人的编号，按照编号从小到大的顺序输出，中间用空格分开。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Message Passing", "background": "", "description": "In the Kingdom of Bashu (Bāshǔ), the social hierarchy is strict: except for the king, everyone has exactly one direct superior, and the king has no superior. If $A$ is the superior of $B$, and $B$ is the superior of $C$, then $A$ is the superior of $C$. It is absolutely impossible to have a relationship where $A$ is the superior of $B$ and $B$ is also the superior of $A$.\n\nThe initial time is $0$. Your task is to spend $1$ unit of time to tell a message to one person, and then let them spread the message on their own. In any time unit, any person who has already received the message can tell the message to one of their direct superiors or direct subordinates.\n\nNow, you want to know:\n\n1. How long will it take for the message to reach everyone in the entire Kingdom of Bashu?\n2. Which people can be chosen so that the total time spent during transmission is minimized?", "inputFormat": "The first line of input contains an integer $N$ ($N \\le 1000$), the total number of people in the Kingdom of Bashu. People are numbered from $1$ to $N$, and the king’s number is $1$. Lines $2$ through $N$ (a total of $N-1$ lines) each contain one integer; for each $i$ from $2$ to $N$, line $i$ gives the number of the direct superior of person $i$.", "outputFormat": "The output contains two lines:\n- The first line contains one integer, the earliest time when the last person receives the message.\n- The second line contains several integers, the numbers of all valid choices of the initial person, output in increasing order and separated by single spaces.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "消息传递", "background": null, "description": "巴蜀国的社会等级森严，除了国王之外，每个人均有且只有一个直接上级，当然国王没有上级。如果 $A$ 是 $B$ 的上级，$B$ 是 $C$ 的上级，那么 $A$ 就是 $C$ 的上级。绝对不会出现这样的关系：$A$ 是 $B$ 的上级，$B$ 也是 $A$ 的上级。\n\n最开始的时刻是 $0$，你要做的就是用 $1$ 单位的时间把一个消息告诉某一个人，让他们自行散布消息。在任意一个时间单位中，任何一个已经接到消息的人，都可以把消息告诉他的一个直接上级或者直接下属。\n\n现在，你想知道：\n\n1. 到底需要多长时间，消息才能传遍整个巴蜀国的所有人？\n2. 要使消息在传递过程中消耗的时间最短，可供选择的人有哪些？", "inputFormat": "输入文件的第一行为一个整数 $N$（$N\\le 1000$），表示巴蜀国人的总数，假如人按照 $1$ 到 $n$ 编上了号码，国王的编号是 $1$。第 $2$ 行到第 $N$ 行（共 $N-1$ 行），每一行一个整数，第 $i$ 行的整数表示编号为 $i$ 的人直接上级的编号。", "outputFormat": "文件输出共计两行：\n\n- 第一行为一个整数，表示最后一个人接到消息的最早时间。\n- 第二行有若干个数，表示可供选择人的编号，按照编号从小到大的顺序输出，中间用空格分开。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2019", "type": "P", "difficulty": 7, "samples": [["10\n4\n1000\n200000\n802241960520\n999999999937\n49770428644836900\n250000006000000027\n729021870143100133\n900000000000000017\n907000000000033559", "24\n3744\n93744\n59948653\n999943511\n821944886\n26\n729842040\n600000501\n152276389"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论"], "title": "四平方和定理", "background": "", "description": "对于正整数 $n$，请求出有多少个有序整数对 $(a,b,c,d)$，使得 $a^2+b^2+c^2+d^2=n$。答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，一行一个正整数，表示 $n$ 的值。", "outputFormat": "输出共 $T$ 行。\n\n第 $k$ 行一个非负整数，表示第 $k$ 组数据的答案对 $10^9+7$ 取模后的值。", "hint": "| 测试点编号 | 限制 |  \n| :-----------: | :-----------: | \n| $1\\sim 3$ |  $n\\le 2\\times 10^5$ |  \n| $4\\sim 6$ |  $n\\le 10^{12}$ |  \n| $7\\sim 10$ |  无 |  \n\n对于所有数据，$1\\le n\\le 10^{18},1\\le T\\le 50$。\n\n对于样例一的第一组数据，以下均为符合题意的 $(a,b,c,d)$（此处没有列出所有可行的数对）。\n\n$$(1,1,1,1),(1,1,1,-1),(-1,-1,-1,-1),(2,0,0,0),(0,-2,0,0)$$\n\n\n\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Four Squares Theorem", "background": "", "description": "For a positive integer $n$, find the number of ordered quadruples of integers $(a,b,c,d)$ such that $a^2+b^2+c^2+d^2=n$. The answer is taken modulo $10^9+7$.", "inputFormat": "**This problem has multiple test cases**.\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case, one line contains a positive integer, representing the value of $n$.", "outputFormat": "Output a total of $T$ lines.\n\nOn the $k$-th line, output a non-negative integer, which is the answer for the $k$-th test case modulo $10^9+7$.", "hint": "| Test point ID | Limit |  \n| :-----------: | :-----------: | \n| $1\\sim 3$ |  $n\\le 2\\times 10^5$ |  \n| $4\\sim 6$ |  $n\\le 10^{12}$ |  \n| $7\\sim 10$ |  None |  \n\nFor all testdata, $1\\le n\\le 10^{18},1\\le T\\le 50$.\n\nFor the first test case of Sample 1, the following are all valid $(a,b,c,d)$ (not all feasible quadruples are listed here).\n\n$$(1,1,1,1),(1,1,1,-1),(-1,-1,-1,-1),(2,0,0,0),(0,-2,0,0)$$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "四平方和定理", "background": "", "description": "对于正整数 $n$，请求出有多少个有序整数对 $(a,b,c,d)$，使得 $a^2+b^2+c^2+d^2=n$。答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据**。\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，一行一个正整数，表示 $n$ 的值。", "outputFormat": "输出共 $T$ 行。\n\n第 $k$ 行一个非负整数，表示第 $k$ 组数据的答案对 $10^9+7$ 取模后的值。", "hint": "| 测试点编号 | 限制 |  \n| :-----------: | :-----------: | \n| $1\\sim 3$ |  $n\\le 2\\times 10^5$ |  \n| $4\\sim 6$ |  $n\\le 10^{12}$ |  \n| $7\\sim 10$ |  无 |  \n\n对于所有数据，$1\\le n\\le 10^{18},1\\le T\\le 50$。\n\n对于样例一的第一组数据，以下均为符合题意的 $(a,b,c,d)$（此处没有列出所有可行的数对）。\n\n$$(1,1,1,1),(1,1,1,-1),(-1,-1,-1,-1),(2,0,0,0),(0,-2,0,0)$$\n\n\n\n\n", "locale": "zh-CN"}}}
{"pid": "P2020", "type": "P", "difficulty": 7, "samples": [["6 7 100", "7"], ["7 7 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2011", "NOI", "Fibonacci 数列", "逆元"], "title": "[NOI2011] 兔农", "background": "", "description": "农夫栋栋近年收入不景气，正在他发愁如何能多赚点钱时，他听到隔壁的小朋友在讨论兔子繁殖的问题。\n\n问题是这样的：第一个月初有一对刚出生的小兔子，经过两个月长大后，这对兔子从第三个月开始，每个月初生一对小兔子。新出生的小兔子生长两个月后又能每个月生出一对小兔子。问第 $n$ 个月有多少只兔子？\n\n聪明的你可能已经发现，第 $n$ 个月的兔子数正好是第 $n$ 个 Fibonacci（斐波那契）数。栋栋不懂什么是 Fibonacci 数，但他也发现了规律：第 $i+2$ 个月的兔子数等于第 $i$ 个月的兔子数加上第 $i+1$ 个月的兔子数。前几个月的兔子数依次为：\n\n$$1,1,2,3,5,8,13,21,34,\\ldots$$\n\n栋栋发现越到后面兔子数增长的越快，期待养兔子一定能赚大钱，于是栋栋在第一个月初买了一对小兔子开始饲养。\n\n每天，栋栋都要给兔子们喂食，兔子们吃食时非常特别，总是每 $k$ 对兔子围成一圈，最后剩下的不足 $k$ 对的围成一圈，由于兔子特别害怕孤独，从第三个月开始，如果吃食时围成某一个圈的只有一对兔子，这对兔子就会很快死掉。\n\n我们假设死去的总是刚出生的兔子，那么每个月的兔子数仍然是可以计算的。例如，当 $k=7$ 时，前几个月的兔子数依次为：\n\n$$1,1,2,3,5,7,12,19,31,49,80,\\ldots$$\n\n给定 $n$，你能帮助栋栋计算第 $n$ 个月他有多少对兔子么？由于答案可能非常大，你只需要告诉栋栋第 $n$ 个月的兔子对数除 $p$ 的余数即可。\n", "inputFormat": "输入一行，包含三个正整数 $n, k, p$。\n", "outputFormat": "输出一行，包含一个整数，表示栋栋第 $n$ 个月的兔子对数除 $p$ 的余数。\n", "hint": "|测试点编号|$n$|$k,p$|\n|:-:|:-:|:-:|\n|$1\\sim 10$|$1\\leq n\\leq 50$|$2\\leq k,p\\leq1000$|\n|$11$|$1\\leq n\\leq 80$|$2\\leq k,p\\leq 10^4$|\n|$12,13$|$1\\leq n\\leq 1000$|$2\\leq k,p\\leq 10^4$|\n|$14,15$|$1\\leq n\\leq 10^6$|$2\\leq k,p\\leq 10^6$|\n|$16,17$|$1\\leq n\\leq 10^{18}$|$2\\leq k,p\\leq1000$|\n|$18\\sim 20$|$1\\leq n\\leq 10^{18}$|$2\\leq k\\leq 10^6$，$2\\leq p\\leq 10^9$|\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^{18}$，$2\\leq k\\leq 10^6$，$2\\leq p\\leq 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2011] Rabbit Farmer", "background": "", "description": "In recent years, Farmer Dongdong’s income has been poor. While he was worrying about how to make more money, he heard the kids next door discussing rabbit reproduction.\n\nThe problem is as follows: At the beginning of the first month, there is one pair of newborn rabbits. After two months of growth, starting from the third month, this pair produces one new pair at the beginning of every month. A newborn pair will also be able to produce one new pair per month after two months of growth. How many rabbits are there in month $n$?\n\nYou may have already noticed that the number of rabbits in month $n$ is exactly the $n$‑th Fibonacci number. Dongdong does not know what Fibonacci numbers are, but he also discovered the rule: the number of rabbits in month $i+2$ equals the number in month $i$ plus the number in month $i+1$. The numbers for the first few months are:\n\n$$1,1,2,3,5,8,13,21,34,\\ldots$$\n\nDongdong found that the number of rabbits grows faster and faster, so he expected that raising rabbits would certainly make a lot of money. Thus, at the beginning of the first month, Dongdong bought one pair of rabbits and started breeding.\n\nEvery day, Dongdong feeds the rabbits. Their feeding behavior is special: they always form circles of $k$ pairs; any remaining fewer than $k$ pairs also form one circle. Since rabbits are extremely afraid of loneliness, starting from the third month, if during feeding there is a circle with only one pair, that pair soon dies.\n\nWe assume the ones that die are always the newborn rabbits, so the number of rabbits each month can still be computed. For example, when $k=7$, the numbers for the first few months are:\n\n$$1,1,2,3,5,7,12,19,31,49,80,\\ldots$$\n\nGiven $n$, can you help Dongdong compute how many pairs of rabbits he has in month $n$? Since the answer can be very large, you only need to report the remainder of the number of pairs in month $n$ modulo $p$.", "inputFormat": "Input consists of one line containing three positive integers $n, k, p$.", "outputFormat": "Output one line containing an integer, the remainder of the number of rabbit pairs in month $n$ modulo $p$.", "hint": "| Test point ID | $n$ | $k,p$ |\n|:-:|:-:|:-:|\n| $1\\sim 10$ | $1\\leq n\\leq 50$ | $2\\leq k,p\\leq1000$ |\n| $11$ | $1\\leq n\\leq 80$ | $2\\leq k,p\\leq 10^4$ |\n| $12,13$ | $1\\leq n\\leq 1000$ | $2\\leq k,p\\leq 10^4$ |\n| $14,15$ | $1\\leq n\\leq 10^6$ | $2\\leq k,p\\leq 10^6$ |\n| $16,17$ | $1\\leq n\\leq 10^{18}$ | $2\\leq k,p\\leq1000$ |\n| $18\\sim 20$ | $1\\leq n\\leq 10^{18}$ | $2\\leq k\\leq 10^6$，$2\\leq p\\leq 10^9$ |\n\nFor $100\\%$ of the testdata, $1\\leq n\\leq 10^{18}$, $2\\leq k\\leq 10^6$, $2\\leq p\\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2011] 兔农", "background": "", "description": "农夫栋栋近年收入不景气，正在他发愁如何能多赚点钱时，他听到隔壁的小朋友在讨论兔子繁殖的问题。\n\n问题是这样的：第一个月初有一对刚出生的小兔子，经过两个月长大后，这对兔子从第三个月开始，每个月初生一对小兔子。新出生的小兔子生长两个月后又能每个月生出一对小兔子。问第 $n$ 个月有多少只兔子？\n\n聪明的你可能已经发现，第 $n$ 个月的兔子数正好是第 $n$ 个 Fibonacci（斐波那契）数。栋栋不懂什么是 Fibonacci 数，但他也发现了规律：第 $i+2$ 个月的兔子数等于第 $i$ 个月的兔子数加上第 $i+1$ 个月的兔子数。前几个月的兔子数依次为：\n\n$$1,1,2,3,5,8,13,21,34,\\ldots$$\n\n栋栋发现越到后面兔子数增长的越快，期待养兔子一定能赚大钱，于是栋栋在第一个月初买了一对小兔子开始饲养。\n\n每天，栋栋都要给兔子们喂食，兔子们吃食时非常特别，总是每 $k$ 对兔子围成一圈，最后剩下的不足 $k$ 对的围成一圈，由于兔子特别害怕孤独，从第三个月开始，如果吃食时围成某一个圈的只有一对兔子，这对兔子就会很快死掉。\n\n我们假设死去的总是刚出生的兔子，那么每个月的兔子数仍然是可以计算的。例如，当 $k=7$ 时，前几个月的兔子数依次为：\n\n$$1,1,2,3,5,7,12,19,31,49,80,\\ldots$$\n\n给定 $n$，你能帮助栋栋计算第 $n$ 个月他有多少对兔子么？由于答案可能非常大，你只需要告诉栋栋第 $n$ 个月的兔子对数除 $p$ 的余数即可。\n", "inputFormat": "输入一行，包含三个正整数 $n, k, p$。\n", "outputFormat": "输出一行，包含一个整数，表示栋栋第 $n$ 个月的兔子对数除 $p$ 的余数。\n", "hint": "|测试点编号|$n$|$k,p$|\n|:-:|:-:|:-:|\n|$1\\sim 10$|$1\\leq n\\leq 50$|$2\\leq k,p\\leq1000$|\n|$11$|$1\\leq n\\leq 80$|$2\\leq k,p\\leq 10^4$|\n|$12,13$|$1\\leq n\\leq 1000$|$2\\leq k,p\\leq 10^4$|\n|$14,15$|$1\\leq n\\leq 10^6$|$2\\leq k,p\\leq 10^6$|\n|$16,17$|$1\\leq n\\leq 10^{18}$|$2\\leq k,p\\leq1000$|\n|$18\\sim 20$|$1\\leq n\\leq 10^{18}$|$2\\leq k\\leq 10^6$，$2\\leq p\\leq 10^9$|\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^{18}$，$2\\leq k\\leq 10^6$，$2\\leq p\\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2021", "type": "P", "difficulty": 2, "samples": [["13", "7 1 12 2 8 3 11 4 9 5 13 6 10 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "线性数据结构"], "title": "faebdc玩扑克", "background": "faebdc 和 zky 在玩一个小游戏\n", "description": "zky 有 $n$ 个扑克牌，编号从 $1$ 到 $n$，zky 把它排成一个序列，每次把最上方的扑克牌放在牌堆底，然后把下一张扑克牌拿出来输出，最终输出的序列恰好是从 $1$ 到 $n$，faebdc 问你原序列是什么，因为 faebdc 神犇早已在 $\\mathcal O (1)$ 的时间得出结果，如果你在 1 s 内答不出来，faebdc 会吃了你。\n", "inputFormat": "一个整数 n，表示扑克数目。", "outputFormat": "$n$ 个数，表示扑克序列。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le {10}^6$。", "locale": "zh-CN", "translations": {"en": {"title": "faebdc Playing Poker", "background": "faebdc and zky are playing a mini game.", "description": "zky has $n$ playing cards numbered from $1$ to $n$. zky arranges them into a sequence. Each time, move the top card to the bottom of the deck, then take the next card out and output it. Repeat until all cards are output. The final output sequence is exactly from $1$ to $n$. faebdc asks you what the original sequence is. Because faebdc, a \"shen niu\" (top coder), has already obtained the answer in $\\mathcal O (1)$ time, if you cannot answer within 1 s, faebdc will eat you.", "inputFormat": "An integer $n$, representing the number of cards.", "outputFormat": "Output $n$ integers, representing the original card sequence, separated by spaces.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le n \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "faebdc玩扑克", "background": "faebdc 和 zky 在玩一个小游戏\n", "description": "zky 有 $n$ 个扑克牌，编号从 $1$ 到 $n$，zky 把它排成一个序列，每次把最上方的扑克牌放在牌堆底，然后把下一张扑克牌拿出来输出，最终输出的序列恰好是从 $1$ 到 $n$，faebdc 问你原序列是什么，因为 faebdc 神犇早已在 $\\mathcal O (1)$ 的时间得出结果，如果你在 1 s 内答不出来，faebdc 会吃了你。\n", "inputFormat": "一个整数 n，表示扑克数目。", "outputFormat": "$n$ 个数，表示扑克序列。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le {10}^6$。", "locale": "zh-CN"}}}
{"pid": "P2022", "type": "P", "difficulty": 4, "samples": [["2 4\n", "11\n"], ["100000001 1000000000", "100000000888888879"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "搜索", "二分"], "title": "有趣的数", "background": "", "description": "让我们来考虑 $1$ 到 $N$ 的正整数集合。让我们把集合中的元素按照字典序排列，例如当 $N=11$ 时，其顺序应该为：$1,10,11,2,3,4,5,6,7,8,9$。\n\n定义 $K$ 在 $N$ 个数中的位置为 $Q(N,K)$，例如 $Q(11,2)=4$。现在给出整数 $K$ 和 $M$，要求找到最小的 $N$，使得 $Q(N,K)=M$。", "inputFormat": "输入文件只有一行，是两个整数 $K$ 和 $M$。", "outputFormat": "输出文件只有一行，是最小的 $N$，如果不存在这样的 $N$ 就输出 $0$。", "hint": "【数据约定】\n\n\n$40\\%$ 的数据，$1 \\le K,M \\le 10^5$；\n\n$100\\%$ 的数据，$1 \\le K,M \\le 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Interesting Numbers", "background": "", "description": "Consider the set of positive integers from $1$ to $N$. Arrange the elements of the set in lexicographical order; for example, when $N=11$, the order is: $1,10,11,2,3,4,5,6,7,8,9$.\n\nDefine the position of $K$ among the $N$ numbers as $Q(N,K)$; for example, $Q(11,2)=4$. Now, given integers $K$ and $M$, find the smallest $N$ such that $Q(N,K)=M$.", "inputFormat": "The input file contains a single line with two integers $K$ and $M$.", "outputFormat": "Output a single line with the smallest $N$. If no such $N$ exists, output $0$.", "hint": "Constraints\n\nFor $40\\%$ of the testdata, $1 \\le K, M \\le 10^5$.\n\nFor $100\\%$ of the testdata, $1 \\le K, M \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "有趣的数", "background": "", "description": "让我们来考虑 $1$ 到 $N$ 的正整数集合。让我们把集合中的元素按照字典序排列，例如当 $N=11$ 时，其顺序应该为：$1,10,11,2,3,4,5,6,7,8,9$。\n\n定义 $K$ 在 $N$ 个数中的位置为 $Q(N,K)$，例如 $Q(11,2)=4$。现在给出整数 $K$ 和 $M$，要求找到最小的 $N$，使得 $Q(N,K)=M$。", "inputFormat": "输入文件只有一行，是两个整数 $K$ 和 $M$。", "outputFormat": "输出文件只有一行，是最小的 $N$，如果不存在这样的 $N$ 就输出 $0$。", "hint": "【数据约定】\n\n\n$40\\%$ 的数据，$1 \\le K,M \\le 10^5$；\n\n$100\\%$ 的数据，$1 \\le K,M \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2023", "type": "P", "difficulty": 4, "samples": [["7 43\n1 2 3 4 5 6 7\n5\n1 2 5 5\n3 2 4\n2 3 7 9\n3 1 3\n3 4 7", "2\n35\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "线段树", "各省省选", "安徽"], "title": "[AHOI2009] 维护序列", "background": "老师交给小可可一个维护数列的任务，现在小可可希望你来帮他完成。", "description": "有一个长为 $n$ 的数列 $\\{a_n\\}$，有如下三种操作形式：\n\n1. 格式 `1 t g c`，表示把所有满足 $t\\le i\\le g$ 的 $a_i$ 改为 $a_i\\times c$ ;\n2. 格式 `2 t g c` 表示把所有满足 $t\\le i\\le g$ 的 $a_i$ 改为 $a_i+c$ ;\n3. 格式 `3 t g` 询问所有满足 $t\\le i\\le g$ 的 $a_i$ 的和，由于答案可能很大，你只需输出这个数模 $p$ 的值。", "inputFormat": "第一行两个整数 $n$ 和 $p$。\n\n第二行含有 $n$ 个非负整数，表示数列 $\\{a_i\\}$ 。\n\n第三行有一个整数 $m$，表示操作总数。\n\n从第四行开始每行描述一个操作，同一行相邻两数之间用一个空格隔开，每行开头和末尾没有多余空格。", "outputFormat": "对每个操作 3，按照它在输入中出现的顺序，依次输出**一行一个整数**表示询问结果。", "hint": "#### 样例输入输出 1 解释\n\n- 初始时数列为 $\\{1,2,3,4,5,6,7\\}$。\n- 经过第 $1$ 次操作后，数列为 $\\{1,10,15,20,25,6,7\\}$。\n- 对第 $2$ 次操作，和为 $10+15+20=45$，模 $43$ 的结果是 $2$。\n- 经过第 $3$ 次操作后，数列为 $\\{1,10,24,29,34,15,16\\}$。\n- 对第 $4$ 次操作，和为 $1+10+24=35$，模 $43$ 的结果是 $35$。\n- 对第 $5$ 次操作，和为 $29+34+15+16=94$，模 $43$ 的结果是$8$。\n\n\n#### 数据规模与约定\n\n测试数据规模如下表所示：\n\n| 数据点编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9,10 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $n=$ | $10$ | $1000$ | $1000$ | $10000$ | $60000$ | $70000$ | $80000$ | $90000$ | $100000$ |\n| $m=$ | $10$ | $1000$ | $1000$ | $10000$ | $60000$ | $70000$ | $80000$ | $90000$ | $100000$ |\n\n对于全部的测试点，保证 $0 \\leq p, a_i, c \\leq 10^9$，$1 \\leq t \\leq g \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2009] Maintain Sequence", "background": "The teacher gave Xiao Keke a task to maintain a sequence, and now he hopes you can help him complete it.", "description": "There is a sequence of length $n$, $\\{a_i\\}$, with the following three types of operations:\n\n1. Format `1 t g c`: set all $a_i$ with $t \\le i \\le g$ to $a_i \\times c$.\n2. Format `2 t g c`: set all $a_i$ with $t \\le i \\le g$ to $a_i + c$.\n3. Format `3 t g`: query the sum of all $a_i$ with $t \\le i \\le g$. Since the answer may be large, you only need to output this sum modulo $p$.", "inputFormat": "The first line contains two integers $n$ and $p$.\n\nThe second line contains $n$ non-negative integers, representing the sequence $\\{a_i\\}$.\n\nThe third line contains an integer $m$, the total number of operations.\n\nFrom the fourth line on, each line describes one operation. In the same line, adjacent numbers are separated by a single space, and there are no extra spaces at the beginning or end.", "outputFormat": "For each operation of type 3, in the order they appear in the input, output one integer per line representing the query result.", "hint": "#### Explanation for Sample Input/Output 1\n\n- Initially, the sequence is $\\{1,2,3,4,5,6,7\\}$.\n- After the 1st operation, the sequence becomes $\\{1,10,15,20,25,6,7\\}$.\n- For the 2nd operation, the sum is $10+15+20=45$, and $45 \\bmod 43 = 2$.\n- After the 3rd operation, the sequence becomes $\\{1,10,24,29,34,15,16\\}$.\n- For the 4th operation, the sum is $1+10+24=35$, and $35 \\bmod 43 = 35$.\n- For the 5th operation, the sum is $29+34+15+16=94$, and $94 \\bmod 43 = 8$.\n\n#### Constraints\n\nThe testdata scale is as follows:\n\n| Data point ID | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9,10 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $n=$ | $10$ | $1000$ | $1000$ | $10000$ | $60000$ | $70000$ | $80000$ | $90000$ | $100000$ |\n| $m=$ | $10$ | $1000$ | $1000$ | $10000$ | $60000$ | $70000$ | $80000$ | $90000$ | $100000$ |\n\nFor all test points, it is guaranteed that $0 \\le p, a_i, c \\le 10^9$, $1 \\le t \\le g \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2009] 维护序列", "background": "老师交给小可可一个维护数列的任务，现在小可可希望你来帮他完成。", "description": "有一个长为 $n$ 的数列 $\\{a_n\\}$，有如下三种操作形式：\n\n1. 格式 `1 t g c`，表示把所有满足 $t\\le i\\le g$ 的 $a_i$ 改为 $a_i\\times c$ ;\n2. 格式 `2 t g c` 表示把所有满足 $t\\le i\\le g$ 的 $a_i$ 改为 $a_i+c$ ;\n3. 格式 `3 t g` 询问所有满足 $t\\le i\\le g$ 的 $a_i$ 的和，由于答案可能很大，你只需输出这个数模 $p$ 的值。", "inputFormat": "第一行两个整数 $n$ 和 $p$。\n\n第二行含有 $n$ 个非负整数，表示数列 $\\{a_i\\}$ 。\n\n第三行有一个整数 $m$，表示操作总数。\n\n从第四行开始每行描述一个操作，同一行相邻两数之间用一个空格隔开，每行开头和末尾没有多余空格。", "outputFormat": "对每个操作 3，按照它在输入中出现的顺序，依次输出**一行一个整数**表示询问结果。", "hint": "#### 样例输入输出 1 解释\n\n- 初始时数列为 $\\{1,2,3,4,5,6,7\\}$。\n- 经过第 $1$ 次操作后，数列为 $\\{1,10,15,20,25,6,7\\}$。\n- 对第 $2$ 次操作，和为 $10+15+20=45$，模 $43$ 的结果是 $2$。\n- 经过第 $3$ 次操作后，数列为 $\\{1,10,24,29,34,15,16\\}$。\n- 对第 $4$ 次操作，和为 $1+10+24=35$，模 $43$ 的结果是 $35$。\n- 对第 $5$ 次操作，和为 $29+34+15+16=94$，模 $43$ 的结果是$8$。\n\n\n#### 数据规模与约定\n\n测试数据规模如下表所示：\n\n| 数据点编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9,10 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $n=$ | $10$ | $1000$ | $1000$ | $10000$ | $60000$ | $70000$ | $80000$ | $90000$ | $100000$ |\n| $m=$ | $10$ | $1000$ | $1000$ | $10000$ | $60000$ | $70000$ | $80000$ | $90000$ | $100000$ |\n\n对于全部的测试点，保证 $0 \\leq p, a_i, c \\leq 10^9$，$1 \\leq t \\leq g \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P2024", "type": "P", "difficulty": 4, "samples": [["100 7\n1 101 1\n2 1 2\n2 2 3\n2 3 3\n1 1 3\n2 3 1\n1 5 5\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "并查集", "NOI"], "title": "[NOI2001] 食物链", "background": null, "description": "动物王国中有三类动物 $A,B,C$，这三类动物的食物链构成了有趣的环形。$A$ 吃 $B$，$B$ 吃 $C$，$C$ 吃 $A$。\n\n现有 $N$ 个动物，以 $1 \\sim N$ 编号。每个动物都是 $A,B,C$ 中的一种，但是我们并不知道它到底是哪一种。\n\n有人用两种说法对这 $N$ 个动物所构成的食物链关系进行描述：\n\n- 第一种说法是 `1 X Y`，表示 $X$ 和 $Y$ 是同类。\n- 第二种说法是 `2 X Y`，表示 $X$ 吃 $Y$。\n\n此人对 $N$ 个动物，用上述两种说法，一句接一句地说出 $K$ 句话，这 $K$ 句话有的是真的，有的是假的。当一句话满足下列三条之一时，这句话就是假话，否则就是真话。\n\n- 当前的话与前面的某些真的话冲突，就是假话；\n- 当前的话中 $X$ 或 $Y$ 比 $N$ 大，就是假话；\n- 当前的话表示 $X$ 吃 $X$，就是假话。\n\n你的任务是根据给定的 $N$ 和 $K$ 句话，输出假话的总数。", "inputFormat": "第一行两个整数，$N,K$，表示有 $N$ 个动物，$K$ 句话。\n\n第二行开始每行一句话。格式见题目描述与样例。", "outputFormat": "一行，一个整数，表示假话的总数。", "hint": "对于全部数据，$1\\le N\\le 5 \\times 10^4$，$1\\le K \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2001] Food Chain", "background": "", "description": "In the animal kingdom, there are three kinds of animals $A, B, C$, and their food chain forms an interesting cycle. $A$ eats $B$, $B$ eats $C$, and $C$ eats $A$.\n\nThere are $N$ animals, numbered from $1$ to $N$. Each animal is one of $A, B, C$, but we do not know which.\n\nSomeone describes the food chain relationships among these $N$ animals using two kinds of statements:\n- Type 1: `1 X Y` means $X$ and $Y$ are of the same kind.\n- Type 2: `2 X Y` means $X$ eats $Y$.\n\nThis person makes $K$ statements, one after another. Some are true and some are false. A statement is false if and only if it satisfies at least one of the following:\n- It contradicts some previous true statements.\n- $X$ or $Y$ is greater than $N$.\n- It claims that $X$ eats $X$.\n\nYour task is to output the total number of false statements.", "inputFormat": "The first line contains two integers $N, K$, indicating there are $N$ animals and $K$ statements.\n\nStarting from the second line, each line contains one statement. The formats are as described in the problem statement and the samples.", "outputFormat": "One line containing a single integer: the total number of false statements.", "hint": "Constraints: For all testdata, $1 \\le N \\le 5 \\times 10^4$, $1 \\le K \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2001] 食物链", "background": null, "description": "动物王国中有三类动物 $A,B,C$，这三类动物的食物链构成了有趣的环形。$A$ 吃 $B$，$B$ 吃 $C$，$C$ 吃 $A$。\n\n现有 $N$ 个动物，以 $1 \\sim N$ 编号。每个动物都是 $A,B,C$ 中的一种，但是我们并不知道它到底是哪一种。\n\n有人用两种说法对这 $N$ 个动物所构成的食物链关系进行描述：\n\n- 第一种说法是 `1 X Y`，表示 $X$ 和 $Y$ 是同类。\n- 第二种说法是 `2 X Y`，表示 $X$ 吃 $Y$。\n\n此人对 $N$ 个动物，用上述两种说法，一句接一句地说出 $K$ 句话，这 $K$ 句话有的是真的，有的是假的。当一句话满足下列三条之一时，这句话就是假话，否则就是真话。\n\n- 当前的话与前面的某些真的话冲突，就是假话；\n- 当前的话中 $X$ 或 $Y$ 比 $N$ 大，就是假话；\n- 当前的话表示 $X$ 吃 $X$，就是假话。\n\n你的任务是根据给定的 $N$ 和 $K$ 句话，输出假话的总数。", "inputFormat": "第一行两个整数，$N,K$，表示有 $N$ 个动物，$K$ 句话。\n\n第二行开始每行一句话。格式见题目描述与样例。", "outputFormat": "一行，一个整数，表示假话的总数。", "hint": "对于全部数据，$1\\le N\\le 5 \\times 10^4$，$1\\le K \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2025", "type": "P", "difficulty": 6, "samples": [["10", "10"], ["1000000", "3527171714"], ["10000000", "191685100"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["洛谷原创", "Dirichlet 卷积", "欧拉函数"], "title": "Dirichlet 半在线卷积", "background": "", "description": "已知函数 $f$ 满足 $f(1)=1$，且\n\n$$f(n)=\\sum_{d|n,d<n}f(d)\\varphi(n/d).$$\n\n给定正整数 $n$，试求出 $f(1),f(2),\\cdots,f(n)$ 的值。为控制输出量，你只需输出下式的值：\n\n$$\\bigoplus_{k=1}^n\\left(f(k)\\bmod 2^{32}\\right). $$\n\n其中 $\\oplus$ 代表异或。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个非负整数，代表 $\\bigoplus_{k=1}^n\\left(f(k)\\bmod 2^{32}\\right) $ 的值。", "hint": "对于所有数据，$1\\le n\\le 5\\times 10^7$。\n\n对于样例一，$f$ 的前 $10$ 项依次为：$1,1,2,3,4,6,6,9,10,12$。\n\n时限为 std 的 1.5 倍。", "locale": "zh-CN", "translations": {"en": {"title": "Dirichlet Semi-Online Convolution", "background": "", "description": "Given a function $f$ satisfying $f(1)=1$, and\n\n$$f(n)=\\sum_{d|n,d<n}f(d)\\varphi(n/d).$$\n\nGiven a positive integer $n$, compute the values $f(1), f(2), \\cdots, f(n)$. To control the output size, you only need to output the value of the following expression:\n\n$$\\bigoplus_{k=1}^n\\left(f(k)\\bmod 2^{32}\\right). $$\n\nHere $\\oplus$ denotes xor.", "inputFormat": "One line with a positive integer $n$.", "outputFormat": "One line with a non-negative integer, representing the value of $\\bigoplus_{k=1}^n\\left(f(k)\\bmod 2^{32}\\right)$.", "hint": "For all testdata, $1 \\le n \\le 5 \\times 10^7$.\n\nFor Sample 1, the first $10$ terms of $f$ are: $1, 1, 2, 3, 4, 6, 6, 9, 10, 12$.\n\nThe time limit is $1.5$ times that of std.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Dirichlet 半在线卷积", "background": "", "description": "已知函数 $f$ 满足 $f(1)=1$，且\n\n$$f(n)=\\sum_{d|n,d<n}f(d)\\varphi(n/d).$$\n\n给定正整数 $n$，试求出 $f(1),f(2),\\cdots,f(n)$ 的值。为控制输出量，你只需输出下式的值：\n\n$$\\bigoplus_{k=1}^n\\left(f(k)\\bmod 2^{32}\\right). $$\n\n其中 $\\oplus$ 代表异或。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个非负整数，代表 $\\bigoplus_{k=1}^n\\left(f(k)\\bmod 2^{32}\\right) $ 的值。", "hint": "对于所有数据，$1\\le n\\le 5\\times 10^7$。\n\n对于样例一，$f$ 的前 $10$ 项依次为：$1,1,2,3,4,6,6,9,10,12$。\n\n时限为 std 的 1.5 倍。", "locale": "zh-CN"}}}
{"pid": "P2026", "type": "P", "difficulty": 2, "samples": [["3 6\n2 4\n", "y=2x\n\n"], ["3 5\n2 7", "y=-2x+11"], ["3 -1\n5 -2", "y=-1/2*x+1/2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "求一次函数解析式", "background": "做数学寒假作业的怨念……\n", "description": "给定两个整点的坐标，求它们所在直线的函数解析式（一次函数）。\n", "inputFormat": "第一行有两个整数 $x_1,y_1$，表示第一个整点的坐标为 $(x_1,y_1)$。\n\n第二行有两个整数 $x_2,y_2$，表示第二个整点的坐标为 $(x_2,y_2)$。", "outputFormat": "输出共一行，即这个函数解析式。\n", "hint": "$2 x$ 表示为 `2x`。\n\n$\\frac{1}{2}x$ 表示为 `1/2*x`。", "locale": "zh-CN", "translations": {"en": {"title": "Find the Analytic Expression of a Linear Function", "background": "Resentment from doing winter vacation math homework.", "description": "Given the coordinates of two lattice points, find the function expression of the line they determine (a linear function).", "inputFormat": "The first line contains two integers $x_1, y_1$, indicating that the coordinates of the first lattice point are $(x_1, y_1)$.\n\nThe second line contains two integers $x_2, y_2$, indicating that the coordinates of the second lattice point are $(x_2, y_2)$.", "outputFormat": "Output a single line, which is the function expression.", "hint": "$2 x$ is written as `2x`.\n\n$\\frac{1}{2}x$ is written as `1/2*x`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求一次函数解析式", "background": "做数学寒假作业的怨念……\n", "description": "给定两个整点的坐标，求它们所在直线的函数解析式（一次函数）。\n", "inputFormat": "第一行有两个整数 $x_1,y_1$，表示第一个整点的坐标为 $(x_1,y_1)$。\n\n第二行有两个整数 $x_2,y_2$，表示第二个整点的坐标为 $(x_2,y_2)$。", "outputFormat": "输出共一行，即这个函数解析式。\n", "hint": "$2 x$ 表示为 `2x`。\n\n$\\frac{1}{2}x$ 表示为 `1/2*x`。", "locale": "zh-CN"}}}
{"pid": "P2027", "type": "P", "difficulty": 3, "samples": [["write whatever u c ,.,.,.,. $ asdf $", "asdf"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "BrainFuck", "background": "bf 是一种编程语言，全称为 BrainFuck，因为题目名称不能太露骨，所以就简写成 bf 了。", "description": "这种语言的运行机制十分简单，只有一个大小为 $30000$ 的有符号 $8$ 位整数（范围 $[-128,127]$）的内存槽，和一个指向内存槽中位置的指针，在最初的时候指向内存槽的第一个整数。\n\n这种语言的字符集也是十分的简单，只有`+ - , . > < []`。\n\n|字符|意义|\n|:-|:-|\n|`<` 　|指针所指向的内存地址减一。|\n|`>` 　|指针所指向的内存地址加一。|\n|`+` 　|指针所指向的内存里面的数值加一。|\n|`-` 　|指针所指向的内存里面的数值减一。|\n|`.` 　|输出当前指针所指向的内存里面的数值（以字符形式输出）。|\n|`,` 　|将读入缓冲区中的一个字节送入当前指针指向的内存里面。如果读入缓冲区为空则送入 $-1$。|\n|`[` 　|当前指针指向的内存里面的数值不为 $0$ 时，重复执行与之相匹配的 `]` 之间的语句，直到回到 `[` 时当前指针指向的内存中的数值为 $0$。|\n|`]` 　|如上。|", "inputFormat": "输入数据若干行，代码有注释。直到一个 `$` 为代码截止。\n\n`$` 后面紧跟一个空格（不属于输入缓冲区），空格后面是输入缓冲区里面的内容，以一个空格和一个 `$` 截止。", "outputFormat": "输出这段代码的执行结果。", "hint": "对于 $10\\%$ 的数据，没有循环。\n\n对于另外 $10\\%$ 的数据，循环没有嵌套。\n\n对于 $100\\%$ 的数据，输入的程序不会访问越界，输入的程序能够在 $10^6$ 步内运行结束，输入的字符串的长度不大于 $30000$。\n\n字符在内存中的数值为字符所对应的 ASCII 码。", "locale": "zh-CN", "translations": {"en": {"title": "BrainFuck", "background": "bf is a programming language, short for BrainFuck. Since the problem title should not be too explicit, we abbreviate it as bf.", "description": "The execution model is very simple: there is an array of $30000$ signed $8$-bit integers (range $[-128,127]$) and a pointer to a position in this array, which initially points to the first cell.\n\nThe character set is also very simple: only `+ - , . > < []`.\n\n|Character|Meaning|\n|:-|:-|\n|`<` 　|Decrease the memory address pointed to by the pointer by one.|\n|`>` 　|Increase the memory address pointed to by the pointer by one.|\n|`+` 　|Increase the value in the current cell by one.|\n|`-` 　|Decrease the value in the current cell by one.|\n|`.` 　|Output the value in the current cell as a character.|\n|`,` 　|Read one byte from the input buffer into the current cell. If the input buffer is empty, store $-1$.|\n|`[` 　|While the value in the current cell is not $0$, repeat the statements between it and the matching `]`, until upon returning to `[` the current cell becomes $0$.|\n|`]` 　|Same as above.|", "inputFormat": "The input consists of several lines; the code may contain comments. The code ends at the first `$`.\n\nImmediately after the `$` comes a space (which does not belong to the input buffer), then the contents of the input buffer, ending with a space and a `$`.", "outputFormat": "Output the result of executing this code.", "hint": "For $10\\%$ of the testdata, there are no loops.\n\nFor another $10\\%$ of the testdata, loops have no nesting.\n\nFor $100\\%$ of the testdata, the program will not access out of bounds, the program will finish within $10^6$ steps, and the input string length is no greater than $30000$.\n\nThe value of a character in memory is the character’s ASCII code.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "BrainFuck", "background": "bf 是一种编程语言，全称为 BrainFuck，因为题目名称不能太露骨，所以就简写成 bf 了。", "description": "这种语言的运行机制十分简单，只有一个大小为 $30000$ 的有符号 $8$ 位整数（范围 $[-128,127]$）的内存槽，和一个指向内存槽中位置的指针，在最初的时候指向内存槽的第一个整数。\n\n这种语言的字符集也是十分的简单，只有`+ - , . > < []`。\n\n|字符|意义|\n|:-|:-|\n|`<` 　|指针所指向的内存地址减一。|\n|`>` 　|指针所指向的内存地址加一。|\n|`+` 　|指针所指向的内存里面的数值加一。|\n|`-` 　|指针所指向的内存里面的数值减一。|\n|`.` 　|输出当前指针所指向的内存里面的数值（以字符形式输出）。|\n|`,` 　|将读入缓冲区中的一个字节送入当前指针指向的内存里面。如果读入缓冲区为空则送入 $-1$。|\n|`[` 　|当前指针指向的内存里面的数值不为 $0$ 时，重复执行与之相匹配的 `]` 之间的语句，直到回到 `[` 时当前指针指向的内存中的数值为 $0$。|\n|`]` 　|如上。|", "inputFormat": "输入数据若干行，代码有注释。直到一个 `$` 为代码截止。\n\n`$` 后面紧跟一个空格（不属于输入缓冲区），空格后面是输入缓冲区里面的内容，以一个空格和一个 `$` 截止。", "outputFormat": "输出这段代码的执行结果。", "hint": "对于 $10\\%$ 的数据，没有循环。\n\n对于另外 $10\\%$ 的数据，循环没有嵌套。\n\n对于 $100\\%$ 的数据，输入的程序不会访问越界，输入的程序能够在 $10^6$ 步内运行结束，输入的字符串的长度不大于 $30000$。\n\n字符在内存中的数值为字符所对应的 ASCII 码。", "locale": "zh-CN"}}}
{"pid": "P2028", "type": "P", "difficulty": 3, "samples": [["4 2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创", "Stirling 数"], "title": "龙兄摘苹果", "background": "", "description": "龙兄在淘淘摘苹果的那个果园里摘了 $n$ 个完全互不相同的苹果，好客的园主为他提供了 $k$ 个篮子，他想把苹果装在篮子里拎回家（由于龙兄的手是无限大的，所以你不必考虑他能不能同时拎这么多篮子）。\n\n同时，他不希望有任何一个篮子里是空的，因为这样就做不到物尽其用。因此他想知道一共有多少种放苹果的方法，由于他的大脑运算过慢，所以找到了聪明机智的你，他在摘苹果上已经花了很长时间，所以他只能等 $1$ 秒。\n\n由于方法很可能非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常多，龙兄的大脑无法存储，所以他会给你一个数 $p$，输出方法数除以 $p$ 的余数就可以了。", "inputFormat": "一行三个数，依次为 $n$，$k$，$p$，含义如题面所示。", "outputFormat": "一个数，方法数除以 $p$ 的余数，行末有回车。", "hint": "### 样例解释\n\n一共有 $4$ 个苹果，$2$ 个篮子。\n\n有以下 $7$ 种方法。\n\n- $\\{1\\},\\{2,3,4\\}$；\n- $\\{2\\},\\{1,3,4\\}$；\n- $\\{3\\},\\{1,2,4\\}$；\n- $\\{4\\},\\{1,2,3\\}$；\n- $\\{1,2\\},\\{3,4\\}$；\n- $\\{1,3\\},\\{2,4\\}$；\n- $\\{1,4\\},\\{2,3\\}$。\n\n$7$ 除以 $3$ 余 $1$。\n\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n \\le 8$，$k \\le 8$。\n- 对于 $60\\%$ 的数据，$n \\le 100$，$k \\le 100$。\n- 对于 $100\\%$ 的数据，$n \\le 10000$，$k \\le 1000$。\n\n保证所有数据 $n \\ge k$，且答案在 $64$ 位整型范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Long Xiong Picks Apples", "background": "", "description": "In the same orchard where Tao Tao picked apples, Long Xiong picked $n$ completely distinct apples. The hospitable owner provided him with $k$ baskets. He wants to put the apples into the baskets and carry them home (since Long Xiong’s hands are infinitely large, you do not need to consider whether he can carry multiple baskets at once).\n\nHe also does not want any basket to be empty, so as to make full use of the baskets. Therefore, he wants to know how many ways there are to distribute the apples. Because his brain computes slowly, he has asked you for help. He has already spent a long time picking apples, so he can only wait $1$ second.\n\nSince the number of ways may be extremely large, he will give you a number $p$; output the remainder when the number of ways is divided by $p$.\n\nTwo distributions are considered the same if each basket contains the same set of apples, and the order of baskets does not matter.", "inputFormat": "One line with three integers $n$, $k$, and $p$, as described above.", "outputFormat": "A single integer: the remainder when the number of ways is divided by $p$, followed by a newline.", "hint": "Sample explanation:\n\nThere are $4$ apples and $2$ baskets.\n\nThere are the following $7$ ways.\n- $\\{1\\},\\{2,3,4\\}$.\n- $\\{2\\},\\{1,3,4\\}$.\n- $\\{3\\},\\{1,2,4\\}$.\n- $\\{4\\},\\{1,2,3\\}$.\n- $\\{1,2\\},\\{3,4\\}$.\n- $\\{1,3\\},\\{2,4\\}$.\n- $\\{1,4\\},\\{2,3\\}$.\n\n$7$ divided by $3$ leaves a remainder of $1$.\n\nConstraints:\n- For $20\\%$ of the testdata, $n \\le 8$, $k \\le 8$.\n- For $60\\%$ of the testdata, $n \\le 100$, $k \\le 100$.\n- For $100\\%$ of the testdata, $n \\le 10000$, $k \\le 1000$.\n\nIt is guaranteed for all testdata that $n \\ge k$, and the answer fits in a $64$-bit integer.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "龙兄摘苹果", "background": "", "description": "龙兄在淘淘摘苹果的那个果园里摘了 $n$ 个完全互不相同的苹果，好客的园主为他提供了 $k$ 个篮子，他想把苹果装在篮子里拎回家（由于龙兄的手是无限大的，所以你不必考虑他能不能同时拎这么多篮子）。\n\n同时，他不希望有任何一个篮子里是空的，因为这样就做不到物尽其用。因此他想知道一共有多少种放苹果的方法，由于他的大脑运算过慢，所以找到了聪明机智的你，他在摘苹果上已经花了很长时间，所以他只能等 $1$ 秒。\n\n由于方法很可能非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常多，龙兄的大脑无法存储，所以他会给你一个数 $p$，输出方法数除以 $p$ 的余数就可以了。", "inputFormat": "一行三个数，依次为 $n$，$k$，$p$，含义如题面所示。", "outputFormat": "一个数，方法数除以 $p$ 的余数，行末有回车。", "hint": "### 样例解释\n\n一共有 $4$ 个苹果，$2$ 个篮子。\n\n有以下 $7$ 种方法。\n\n- $\\{1\\},\\{2,3,4\\}$；\n- $\\{2\\},\\{1,3,4\\}$；\n- $\\{3\\},\\{1,2,4\\}$；\n- $\\{4\\},\\{1,2,3\\}$；\n- $\\{1,2\\},\\{3,4\\}$；\n- $\\{1,3\\},\\{2,4\\}$；\n- $\\{1,4\\},\\{2,3\\}$。\n\n$7$ 除以 $3$ 余 $1$。\n\n### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n \\le 8$，$k \\le 8$。\n- 对于 $60\\%$ 的数据，$n \\le 100$，$k \\le 100$。\n- 对于 $100\\%$ 的数据，$n \\le 10000$，$k \\le 1000$。\n\n保证所有数据 $n \\ge k$，且答案在 $64$ 位整型范围内。", "locale": "zh-CN"}}}
{"pid": "P2029", "type": "P", "difficulty": 3, "samples": [["6 3\n1 2 3 4 5 6\n1 1 1 20 1 1", "39"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创"], "title": "跳舞", "background": "", "description": "小明今天得到一个跳舞毯游戏程序 Dance。游戏每次连续出 $N$ 个移动的“箭头”，箭头依次标号为 $1$ 到 $N$，并且得到相应的分数 $S _ 1, S _ 2, \\ldots, S _ n$。如果你能“踏中”第 $i$ 号箭头，你将获得相应的分数 $S_i$；否则将被扣除相应的分数。\n\n另外，游戏还有一个累计奖励机制：如果踏准次数累计达到 $T$，并且是在踏中第 $i$ 个箭头达到的，则将得到 $B_i$ 的奖励分数,累计也将清零，重新开始。\n\n例如：$N=6,T=3$，相应的序列 $S$ 和 $B$ 分别为 $\\{1,2,3,4,5,6\\}$、$\\{0,0,4,7,9,10\\}$，如果小明踏中所有箭头，则得分为：$(1+2+3+4)+(4+5+6+10)=35$。\n\n小明是个 Dance 高手，可以踏中他想踏中的任意一个箭头。但他发现，根据给定的 $N,T,S,B$，踏中所有的箭头不一定能得最高分，小明很想知道最高能得多少分，你能帮助小明计算一下最多可得多少分吗？\n", "inputFormat": "第一行两个整数 $N$ 和 $T$。\n\n第二行 $N$ 个整数，为 $S$ 的相应分数。\n\n第三行也有 $N$ 个整数，为 $B$ 的相应分数。", "outputFormat": "一个整数，可得到的最高分数。\n", "hint": "\n【样例解释】\n\n跳过第一个，扣 $1$ 分，连踩 $3$ 个，得 $9$ 分，并获得附加分 $20$ 分，之后再连踩 $2$ 个，共 $39$ 分。\n\n【数据范围】\n\n对于 $20\\%$ 的数据 $0\\le N,T\\le100$；\n\n对于 $100\\%$ 的数据 $0\\le N,T\\le 5000$；\n\n序列 $S$ 和 $B$ 各有 $N$ 个数，所有分数为 $[0,10000]$ 之间的整数。", "locale": "zh-CN", "translations": {"en": {"title": "Dancing", "background": "", "description": "Xiao Ming got a dance pad game program called Dance. In each round, the game outputs $N$ moving \"arrows\", numbered $1$ to $N$, and the corresponding scores are $S_1, S_2, \\ldots, S_N$. If you hit arrow $i$, you gain $S_i$ points; otherwise, you lose $S_i$ points.\n\nAdditionally, the game has an accumulation reward: if the accumulated number of hits reaches $T$ upon hitting arrow $i$, you receive a bonus of $B_i$ points, and the accumulated count is reset to $0$ and restarted.\n\nFor example: $N = 6, T = 3$, and the sequences $S$ and $B$ are {1, 2, 3, 4, 5, 6} and {0, 0, 4, 7, 9, 10}, respectively. If Xiao Ming hits all arrows, the score is: $(1+2+3+4) + (4+5+6+10) = 35$.\n\nXiao Ming is a Dance expert and can hit any arrows he chooses. However, he finds that for given $N, T, S, B$, hitting all arrows does not necessarily yield the highest score. He wants to know the maximum possible score. Can you help him compute the maximum obtainable total score?", "inputFormat": "The first line contains two integers $N$ and $T$.\n\nThe second line contains $N$ integers, the scores of $S$.\n\nThe third line contains $N$ integers, the bonuses of $B$.", "outputFormat": "Output one integer, the maximum obtainable score.", "hint": "Sample explanation:\n\nSkip the first arrow and lose 1 point, then hit 3 arrows to gain 9 points and receive an additional 20 points in bonus, then hit 2 more arrows, for a total of 39 points.\n\nConstraints:\n\n- For 20% of the testdata, $0 \\le N, T \\le 100$.\n- For 100% of the testdata, $0 \\le N, T \\le 5000$.\n- The sequences $S$ and $B$ each contain $N$ numbers, and all scores are integers in $[0, 10000]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跳舞", "background": "", "description": "小明今天得到一个跳舞毯游戏程序 Dance。游戏每次连续出 $N$ 个移动的“箭头”，箭头依次标号为 $1$ 到 $N$，并且得到相应的分数 $S _ 1, S _ 2, \\ldots, S _ n$。如果你能“踏中”第 $i$ 号箭头，你将获得相应的分数 $S_i$；否则将被扣除相应的分数。\n\n另外，游戏还有一个累计奖励机制：如果踏准次数累计达到 $T$，并且是在踏中第 $i$ 个箭头达到的，则将得到 $B_i$ 的奖励分数,累计也将清零，重新开始。\n\n例如：$N=6,T=3$，相应的序列 $S$ 和 $B$ 分别为 $\\{1,2,3,4,5,6\\}$、$\\{0,0,4,7,9,10\\}$，如果小明踏中所有箭头，则得分为：$(1+2+3+4)+(4+5+6+10)=35$。\n\n小明是个 Dance 高手，可以踏中他想踏中的任意一个箭头。但他发现，根据给定的 $N,T,S,B$，踏中所有的箭头不一定能得最高分，小明很想知道最高能得多少分，你能帮助小明计算一下最多可得多少分吗？\n", "inputFormat": "第一行两个整数 $N$ 和 $T$。\n\n第二行 $N$ 个整数，为 $S$ 的相应分数。\n\n第三行也有 $N$ 个整数，为 $B$ 的相应分数。", "outputFormat": "一个整数，可得到的最高分数。\n", "hint": "\n【样例解释】\n\n跳过第一个，扣 $1$ 分，连踩 $3$ 个，得 $9$ 分，并获得附加分 $20$ 分，之后再连踩 $2$ 个，共 $39$ 分。\n\n【数据范围】\n\n对于 $20\\%$ 的数据 $0\\le N,T\\le100$；\n\n对于 $100\\%$ 的数据 $0\\le N,T\\le 5000$；\n\n序列 $S$ 和 $B$ 各有 $N$ 个数，所有分数为 $[0,10000]$ 之间的整数。", "locale": "zh-CN"}}}
{"pid": "P2030", "type": "P", "difficulty": 3, "samples": [["4 4\nAbcd\nDeF\nAAa\naBccc\nAb\nAA\nAbC\naBcc", "3\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "高精度", "递推", "二分"], "title": "遥控车", "background": "", "description": "平平带着韵韵来到了游乐园，看到了 $n$ 辆漂亮的遥控车，每辆车上都有一个唯一的名字 name[i]。韵韵早就迫不及待地想玩名字是 $s$ 的遥控车。可是韵韵毕竟还小，她想象的名字可能是一辆车名字的前缀（也就是说能确定一个 $i$，使 $s$ 是 name[i] 的前缀），这时她就能玩第 $i$ 辆车；或者是一个无中生有的名字，即 $s$ 不是任何一辆车名字的前缀，这时候她什么也不能玩。\n\n你需要完成下面的任务：\n\n1. 韵韵想了 $m$ 个她想要的名字，请告诉她能玩多少次。\n\n2. 由于管理员粗心的操作，导致每辆车的摆放位置都可能出现微小的差错，原来第 $i$ 辆车现在的位置可能是 $i-1$ 、 $i$ 、 $i+1$ 中的任意一个（第 $1$ 辆车的位置不可能是 $0$，第 $n$ 辆车的位置不可能是 $n+1$）。请你计算出共有多少种可能的排列。\n\n注：数据保证当 $s$ 是 name[i] 的前缀时，$i$ 是唯一确定的。一辆车可以玩多次。", "inputFormat": "第一行是 $2$ 个正整数 $n$ 、 $m$。\n\n接下来 $n$ 行，每行 $1$ 个字符串 name[i]，表示第 $i$ 辆车的名字。接下来 $m$ 行，每行 $1$ 个字符串 $s$，表示韵韵想要的名字。", "outputFormat": "第一行输出韵韵能玩的次数。第二行输出共有多少种可能的排列。\n", "hint": "【注意】\n\n对于题目涉及到的字符串严格区分大小写，且长度小于 $255$。\n\n【数据范围】\n\n对于 $20\\%$ 的数据 $n \\le 10,m \\le 10$；\n\n对于 $40\\%$ 的数据 $n \\le 1000$，$m \\le 1000$；\n\n对于 $100\\%$ 的数据 $n \\le 10000$，$m \\le 10000$。", "locale": "zh-CN", "translations": {"en": {"title": "Remote-Controlled Cars", "background": "", "description": "Pingping takes Yunyun to an amusement park and sees $n$ beautiful remote-controlled cars. Each car has a unique name name[i]. Yunyun has long wanted to play the car whose name is $s$. However, since Yunyun is still young, the name she imagines might be a prefix of some car’s name (that is, there exists an $i$ such that $s$ is a prefix of name[i]); in this case, she can play the $i$-th car. Or it might be a completely made-up name that is not a prefix of any car’s name; in that case, she cannot play anything.\n\nYou need to complete the following tasks:\n\n1. Yunyun thinks of $m$ desired names. Tell her how many times she can play.\n\n2. Due to the staff’s careless operation, each car’s placement may have a slight error: the original $i$-th car may now be at any one of the positions $i-1$, $i$, or $i+1$ (the position of the $1$-st car cannot be $0$, and the position of the $n$-th car cannot be $n+1$). Calculate how many possible permutations there are.\n\nNote: The testdata guarantees that when $s$ is a prefix of name[i], the index $i$ is uniquely determined. A car can be played multiple times.", "inputFormat": "The first line contains two positive integers $n$ and $m$.\n\nThe next $n$ lines each contain one string name[i], the name of the $i$-th car. Then the next $m$ lines each contain one string $s$, the name Yunyun wants.", "outputFormat": "Output two lines:\n- The first line contains the number of times Yunyun can play.\n- The second line contains the number of possible permutations.", "hint": "Note:\n- All strings are strictly case-sensitive and have length less than $255$.\n\nConstraints:\n- For $20\\%$ of the testdata, $n \\le 10$, $m \\le 10$.\n- For $40\\%$ of the testdata, $n \\le 1000$, $m \\le 1000$.\n- For $100\\%$ of the testdata, $n \\le 10000$, $m \\le 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "遥控车", "background": "", "description": "平平带着韵韵来到了游乐园，看到了 $n$ 辆漂亮的遥控车，每辆车上都有一个唯一的名字 name[i]。韵韵早就迫不及待地想玩名字是 $s$ 的遥控车。可是韵韵毕竟还小，她想象的名字可能是一辆车名字的前缀（也就是说能确定一个 $i$，使 $s$ 是 name[i] 的前缀），这时她就能玩第 $i$ 辆车；或者是一个无中生有的名字，即 $s$ 不是任何一辆车名字的前缀，这时候她什么也不能玩。\n\n你需要完成下面的任务：\n\n1. 韵韵想了 $m$ 个她想要的名字，请告诉她能玩多少次。\n\n2. 由于管理员粗心的操作，导致每辆车的摆放位置都可能出现微小的差错，原来第 $i$ 辆车现在的位置可能是 $i-1$ 、 $i$ 、 $i+1$ 中的任意一个（第 $1$ 辆车的位置不可能是 $0$，第 $n$ 辆车的位置不可能是 $n+1$）。请你计算出共有多少种可能的排列。\n\n注：数据保证当 $s$ 是 name[i] 的前缀时，$i$ 是唯一确定的。一辆车可以玩多次。", "inputFormat": "第一行是 $2$ 个正整数 $n$ 、 $m$。\n\n接下来 $n$ 行，每行 $1$ 个字符串 name[i]，表示第 $i$ 辆车的名字。接下来 $m$ 行，每行 $1$ 个字符串 $s$，表示韵韵想要的名字。", "outputFormat": "第一行输出韵韵能玩的次数。第二行输出共有多少种可能的排列。\n", "hint": "【注意】\n\n对于题目涉及到的字符串严格区分大小写，且长度小于 $255$。\n\n【数据范围】\n\n对于 $20\\%$ 的数据 $n \\le 10,m \\le 10$；\n\n对于 $40\\%$ 的数据 $n \\le 1000$，$m \\le 1000$；\n\n对于 $100\\%$ 的数据 $n \\le 10000$，$m \\le 10000$。", "locale": "zh-CN"}}}
{"pid": "P2031", "type": "P", "difficulty": 3, "samples": [["asdsd\r\n3\r\nas\r\nsd\r\nds", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "线性数据结构"], "title": "脑力达人之分割字串", "background": "好吧，该来的废话还是要来的。\n\n画外音：\n\n终于，在两轮的重重选拔之后，我们的海选终于结束了。现在进入我们的循环赛环节。循坏赛一共有四场，最后选出得分最高的 $16$ 人进入对决，得分相同则和按用时排名，若仍有不能确定 $16$ 人的情况，则去尾处理。\n\n欢迎您收看有洛谷卫视重磅推出的综合性文艺知识类节目“开心玩游戏，轻松赢比赛”，我是 LUWM。学编程，就选洛谷， 感谢洛谷 Online Judge 对本节目的大力支持。下面，我们有请 $10$ 位选手上台，由大屏幕给出题目。\n", "description": "现在有一个字符串，你可以对这个字符串进行拆分，如 `abcvsdaas` 可以拆分为 `abc|vs|d|aas`，现在再给你一个字典，要求分割成的每一个子串必须要有包含其中的任意一个单词。那么最多可以分为几个子串呢？\n", "inputFormat": "第一行，一行字符串\n\n第二行一个正整数 $N$，表示字典中字符串的数量\n\n接下来 $N$ 行，每行一个字符串 $A_i$，表示字典中的一个字符串。\n", "outputFormat": "一个整数，表示最多的分割数。\n", "hint": "特殊情况：\n\n如果原字符串不能被分割，请输出 $0$。\n\n\n\n数据范围：\n\n对于 $20\\%$ 的数据，$1\\leq |s| \\leq 50,1\\leq n\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq |A_i| \\leq |s|\\leq 300，1\\leq N\\leq 500$。\n\n其中，$|s|,|A_i|$ 表示字符串 $s$ 与 $A_i$ 的长度。", "locale": "zh-CN", "translations": {"en": {"title": "Mind Master: Split the String", "background": "Alright, time for the usual prelude.\n\nVoice-over:\n\nAt last, after two rounds of rigorous selection, our open audition has come to an end. Now we enter the round-robin stage. There are four matches in the round-robin, and the top $16$ scorers advance to the showdown. If scores are tied, rank by time used; if we still cannot determine the top $16$, truncate.\n\nWelcome to the comprehensive arts-and-knowledge show “Play Happily, Win Easily,” proudly presented by Luogu TV. I am LUWM. Learn programming? Choose Luogu. Many thanks to Luogu Online Judge for its strong support. Now, let’s invite $10$ contestants to the stage; the big screen will display the problem.", "description": "You are given a string. You may split this string into segments. For example, `abcvsdaas` can be split as `abc|vs|d|aas`. You are also given a dictionary. Each segment after splitting must contain at least one word from the dictionary as a substring. What is the maximum number of segments you can obtain?", "inputFormat": "- The first line contains a string.\n- The second line contains a positive integer $N$, the number of strings in the dictionary.\n- The next $N$ lines each contain a string $A_i$, representing a dictionary string.", "outputFormat": "Output one integer, the maximum number of segments.", "hint": "Special case:\nIf the original string cannot be split, output $0$.\n\nConstraints:\nFor $20\\%$ of the testdata, $1\\leq |s| \\leq 50, 1\\leq n\\leq 50$.\nFor $100\\%$ of the testdata, $1\\leq |A_i| \\leq |s|\\leq 300, 1\\leq N\\leq 500$.\nHere, $|s|, |A_i|$ denote the lengths of string $s$ and $A_i$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "脑力达人之分割字串", "background": "好吧，该来的废话还是要来的。\n\n画外音：\n\n终于，在两轮的重重选拔之后，我们的海选终于结束了。现在进入我们的循环赛环节。循坏赛一共有四场，最后选出得分最高的 $16$ 人进入对决，得分相同则和按用时排名，若仍有不能确定 $16$ 人的情况，则去尾处理。\n\n欢迎您收看有洛谷卫视重磅推出的综合性文艺知识类节目“开心玩游戏，轻松赢比赛”，我是 LUWM。学编程，就选洛谷， 感谢洛谷 Online Judge 对本节目的大力支持。下面，我们有请 $10$ 位选手上台，由大屏幕给出题目。\n", "description": "现在有一个字符串，你可以对这个字符串进行拆分，如 `abcvsdaas` 可以拆分为 `abc|vs|d|aas`，现在再给你一个字典，要求分割成的每一个子串必须要有包含其中的任意一个单词。那么最多可以分为几个子串呢？\n", "inputFormat": "第一行，一行字符串\n\n第二行一个正整数 $N$，表示字典中字符串的数量\n\n接下来 $N$ 行，每行一个字符串 $A_i$，表示字典中的一个字符串。\n", "outputFormat": "一个整数，表示最多的分割数。\n", "hint": "特殊情况：\n\n如果原字符串不能被分割，请输出 $0$。\n\n\n\n数据范围：\n\n对于 $20\\%$ 的数据，$1\\leq |s| \\leq 50,1\\leq n\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq |A_i| \\leq |s|\\leq 300，1\\leq N\\leq 500$。\n\n其中，$|s|,|A_i|$ 表示字符串 $s$ 与 $A_i$ 的长度。", "locale": "zh-CN"}}}
{"pid": "P2032", "type": "P", "difficulty": 3, "samples": [["5 3\n1 5 3 4 2\n", "5\n5\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["单调队列"], "title": "扫描", "background": "", "description": "有一个 $1 \\times n$ 的矩阵，有 $n$ 个整数。\n\n现在给你一个可以盖住连续 $k$ 个数的木板。\n\n一开始木板盖住了矩阵的第 $1 \\sim k$ 个数，每次将木板向右移动一个单位，直到右端与第 $n$ 个数重合。\n\n每次移动前输出被覆盖住的数字中最大的数是多少。", "inputFormat": "第一行两个整数 $n,k$，表示共有 $n$ 个数，木板可以盖住 $k$ 个数。\n\n第二行 $n$ 个整数，表示矩阵中的元素。  ", "outputFormat": "共 $n - k + 1$ 行，每行一个整数。\n\n第 $i$ 行表示第 $i \\sim i + k - 1$ 个数中最大值是多少。  ", "hint": "对于 $20\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^3$。\n\n对于 $50\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leq k \\leq n \\leq 2 \\times 10^6$，矩阵中的元素大小不超过 $10^4$ 并且均为正整数。 ", "locale": "zh-CN", "translations": {"en": {"title": "Scanning", "background": "", "description": "There is a $1 \\times n$ array containing $n$ integers.\n\nYou are given a plank that can cover $k$ consecutive numbers.\n\nAt the beginning, the plank covers the $1 \\sim k$ numbers of the array. Each time, move the plank one unit to the right until its right end coincides with the $n$-th number.\n\nBefore each move, output the maximum among the numbers currently covered by the plank.", "inputFormat": "The first line contains two integers $n, k$, meaning there are $n$ numbers and the plank can cover $k$ consecutive numbers.\n\nThe second line contains $n$ integers, which are the elements of the array.", "outputFormat": "Output $n - k + 1$ lines, one integer per line.\n\nThe $i$-th line is the maximum value among the $i \\sim i + k - 1$ numbers.", "hint": "- For $20\\%$ of the testdata, $1 \\leq k \\leq n \\leq 10^3$.\n- For $50\\%$ of the testdata, $1 \\leq k \\leq n \\leq 10^4$.\n- For $100\\%$ of the testdata, $1 \\leq k \\leq n \\leq 2 \\times 10^6$, and each element in the array is a positive integer not exceeding $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "扫描", "background": "", "description": "有一个 $1 \\times n$ 的矩阵，有 $n$ 个整数。\n\n现在给你一个可以盖住连续 $k$ 个数的木板。\n\n一开始木板盖住了矩阵的第 $1 \\sim k$ 个数，每次将木板向右移动一个单位，直到右端与第 $n$ 个数重合。\n\n每次移动前输出被覆盖住的数字中最大的数是多少。", "inputFormat": "第一行两个整数 $n,k$，表示共有 $n$ 个数，木板可以盖住 $k$ 个数。\n\n第二行 $n$ 个整数，表示矩阵中的元素。  ", "outputFormat": "共 $n - k + 1$ 行，每行一个整数。\n\n第 $i$ 行表示第 $i \\sim i + k - 1$ 个数中最大值是多少。  ", "hint": "对于 $20\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^3$。\n\n对于 $50\\%$ 的数据，$1 \\leq k \\leq n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leq k \\leq n \\leq 2 \\times 10^6$，矩阵中的元素大小不超过 $10^4$ 并且均为正整数。 ", "locale": "zh-CN"}}}
{"pid": "P2033", "type": "P", "difficulty": 4, "samples": [["......bA\r\n.....^..\r\n........\r\n........\r\n........\r\n........\r\n........\r\n........\r\nmove 2\r\nturn right\r\nmove 1\r\n#\r\n", "......>b\r\n........\r\n........\r\n........\r\n........\r\n........\r\n........\r\n........\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "Chessboard Dance", "background": null, "description": "在棋盘上跳舞是件有意思的事情。现在给你一张国际象棋棋盘和棋盘上的一些子以及你的初始位置和方向。求按一定操作后，棋盘的状态。\n\n操作有四种，描述如下：\n\n|操作|描述|\n|:-:|:-:|\n|`move n`|        $n$ 是非负整数，表示你按目前所在方向前进 $n$ 步，如果即将走出棋盘，则停止。如果面前有棋子，则将其向前推一步。|\n|`turn left`|    向左转 $90$ 度|\n|`turn right`|    向右转 $90$ 度|\n|`turn back`|    向后转|", "inputFormat": "输入前 $8$ 行，每行 $8$ 个字符，给出棋盘状态。`.` 表示该格为空，字母表示棋子，不同字母表示不同的棋子。你所在位置用 `^`、`<`、`>`、`v` 四个字母中一个表示，分别表示你的方向上、左、右、下。\n\n接下来有若干行，每行一个操作。以 `#` 结束。操作数不超过 $1000$ 个。", "outputFormat": "输出 $8$ 行，每行 $8$ 个字符，表示经过一系列操作后棋盘和你的状态。表示方法同输入。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Chessboard Dance", "background": "", "description": "Dancing on a chessboard is an interesting thing. You are given a chessboard with some pieces on it, along with your initial position and facing direction. After performing a sequence of operations, output the final state of the board.\n\nThere are four operations, described as follows:\n\n| Operation | Description |\n|:-:|:-:|\n| `move n` | $n$ is a non-negative integer, meaning you move forward $n$ steps in your current direction. If you are about to move off the board, stop. If there is a piece in front of you, push it forward by one square. |\n| `turn left` | Turn left by $90$ degrees. |\n| `turn right` | Turn right by $90$ degrees. |\n| `turn back` | Turn around. |", "inputFormat": "The first $8$ lines, each with $8$ characters, give the board state. `.` means the square is empty; letters indicate pieces, and different letters indicate different pieces. Your position is represented by one of `^`, `<`, `>`, `v`, which indicate your facing direction up, left, right, or down, respectively.\n\nThen there are several lines, one per operation, ending with `#`. The number of operations does not exceed $1000$.", "outputFormat": "Output $8$ lines, each with $8$ characters, representing the board and your state after the sequence of operations. The representation is the same as in the input.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Chessboard Dance", "background": null, "description": "在棋盘上跳舞是件有意思的事情。现在给你一张国际象棋棋盘和棋盘上的一些子以及你的初始位置和方向。求按一定操作后，棋盘的状态。\n\n操作有四种，描述如下：\n\n|操作|描述|\n|:-:|:-:|\n|`move n`|        $n$ 是非负整数，表示你按目前所在方向前进 $n$ 步，如果即将走出棋盘，则停止。如果面前有棋子，则将其向前推一步。|\n|`turn left`|    向左转 $90$ 度|\n|`turn right`|    向右转 $90$ 度|\n|`turn back`|    向后转|", "inputFormat": "输入前 $8$ 行，每行 $8$ 个字符，给出棋盘状态。`.` 表示该格为空，字母表示棋子，不同字母表示不同的棋子。你所在位置用 `^`、`<`、`>`、`v` 四个字母中一个表示，分别表示你的方向上、左、右、下。\n\n接下来有若干行，每行一个操作。以 `#` 结束。操作数不超过 $1000$ 个。", "outputFormat": "输出 $8$ 行，每行 $8$ 个字符，表示经过一系列操作后棋盘和你的状态。表示方法同输入。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2034", "type": "P", "difficulty": 4, "samples": [["5 2\n1\n2\n3\n4\n5 \n", "12"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线段树", "单调队列"], "title": "选择数字", "background": "", "description": "给定一行 $n$ 个非负整数 $a_1 ,\\cdots, a_n$。现在你可以选择其中若干个数，但不能有超过 $k$ 个连续的数字被选择。你的任务是使得选出的数字的和最大。", "inputFormat": "第一行两个整数 $n,k$。\n\n以下 $n$ 行，每行一个整数表示 $a_i$。", "outputFormat": "输出一个值表示答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 10$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $60\\%$ 的数据，$n \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le k \\le n$，$0 \\le $ 数字大小 $ \\le 10^9$。\n\n时间限制 $500$ms。", "locale": "zh-CN", "translations": {"en": {"title": "Choosing Numbers", "background": "", "description": "Given a sequence of $n$ non-negative integers $a_1 ,\\cdots, a_n$. You may choose some of them, but no more than $k$ consecutive numbers can be chosen. Your task is to maximize the sum of the chosen numbers.", "inputFormat": "The first line contains two integers $n,k$.\n\nThe following $n$ lines each contain one integer, representing $a_i$.", "outputFormat": "Output a single value representing the answer.", "hint": "For $20\\%$ of the testdata, $n \\le 10$.\n\nFor another $20\\%$ of the testdata, $k=1$.\n\nFor $60\\%$ of the testdata, $n \\le 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le k \\le n$, $0 \\le a_i \\le 10^9$.\n\nTime limit: 500 ms.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "选择数字", "background": "", "description": "给定一行 $n$ 个非负整数 $a_1 ,\\cdots, a_n$。现在你可以选择其中若干个数，但不能有超过 $k$ 个连续的数字被选择。你的任务是使得选出的数字的和最大。", "inputFormat": "第一行两个整数 $n,k$。\n\n以下 $n$ 行，每行一个整数表示 $a_i$。", "outputFormat": "输出一个值表示答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 10$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $60\\%$ 的数据，$n \\le 10^3$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le k \\le n$，$0 \\le $ 数字大小 $ \\le 10^9$。\n\n时间限制 $500$ms。", "locale": "zh-CN"}}}
{"pid": "P2035", "type": "P", "difficulty": 2, "samples": [["3 4\n10\n8\n11\n", "3\n1\n2\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2008", "USACO"], "title": "[USACO08JAN] iCow B", "background": "", "description": "被无止境的农活压榨得筋疲力尽后，FarmerJohn 打算用他在 MP3 播放器市场新买的 iCow 来听些音乐，放松一下。FJ 的 iCow 里存了 $N(1 \\le N \\le 1{,}000)$ 首曲子，按 $1..N$ 依次编号。至于曲子播放的顺序，则是按一个 FarmerJohn 自己设计的算法来决定：\n\n- 第 $i$ 首曲子有一个初始权值 $R_i\\ (1 \\le R_i \\le 10{,}000)$。\n-  当一首曲子播放完毕，接下来播放的将是所有曲子中权值最大的那首（如果有两首或多首曲子的权值相同，那么这些曲子中编号最小的那首会被选中）。\n- 一首曲子在播放结束后，它的权值会被平均地分给其他 $N-1$ 首曲子，它本身的权值清零。\n- 如果一首曲子的权值无法被平均分配（也就是说，无法被 $N-1$ 整除），那么被 $N-1$ 除的余数部分将会以 $1$ 为单位，顺次分配给排名靠前的曲子（也就是说，顺序为曲目 $1$ 、曲目 $2 \\cdots $ 依次下去。当然，刚播放过的那首曲子需要被跳过），直到多出的部分被分配完。\n\n在选定的下一首曲子播放完毕后，这个算法再次被执行，调整曲子的权值，并选出再接下来播放的曲目。\n\n请你计算一下，按 FJ 的算法，最先播放的 $T\\ (1 \\le T \\le 1000)$ 首曲子分别是哪些。", "inputFormat": "第 $1$ 行有两个用空格隔开的整数：$N$ 和 $T$。\n\n第 $2$ 至第 $N+1$ 行，第 $i+1$ 行为 $1$ 个整数 $R_i$。", "outputFormat": "输出共 $T$ 行，第 $i$ 行输出一个整数，表示 iCow 播放的第 $i$ 首曲子。", "hint": "每一首曲子播放前，三首曲子的权值分别为：\n\n- $[10,8,11]$。播放 $\\#3$，$11/2 = 5$，权值余量为 $1$。\n- $[16,13,0]$。播放 $\\#1$，$16/2 = 8$。\n- $[0,21,8]$。播放 $\\#2$，$21/2 = 10$，权值余量为 $1$。\n- $[11,0,18]$。播放 $\\#3$，……\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08JAN] iCow B", "background": "", "description": "Exhausted by endless farm work, Farmer John plans to relax by listening to music on his newly purchased iCow in the MP3 player market. FJ’s iCow stores $N(1 \\le N \\le 1{,}000)$ songs, numbered $1..N$ in order. The playback order of the songs is determined by an algorithm designed by Farmer John:\n\n- The $i$-th song has an initial weight $R_i\\ (1 \\le R_i \\le 10{,}000)$.\n- When a song finishes playing, the next song to play is the one with the maximum weight among all songs (if two or more songs have the same weight, the one with the smallest index among them is chosen).\n- After a song finishes playing, its weight is evenly distributed to the other $N-1$ songs, and its own weight becomes zero.\n- If a song’s weight cannot be evenly distributed (i.e., it is not divisible by $N-1$), then the remainder after division by $N-1$ will be distributed in units of $1$ to the songs earlier in index order (that is, song $1$, song $2$, and so on; of course, skip the song that just played), until the extra part is fully distributed.\n\nAfter the selected next song finishes playing, this algorithm is executed again to adjust the weights and select the following song.\n\nPlease compute which songs are played first for the initial $T\\ (1 \\le T \\le 1000)$ plays according to FJ’s algorithm.", "inputFormat": "The first line contains two integers separated by a space: $N$ and $T$.\n\nThe second to the $(N+1)$-th lines: line $i+1$ contains one integer $R_i$.", "outputFormat": "Output $T$ lines. On the $i$-th line, output one integer, the index of the $i$-th song played by iCow.", "hint": "Before each play, the weights of the three songs are:\n\n- $[10,8,11]$. Play $\\#3$, $11/2 = 5$, remainder $1$.\n- $[16,13,0]$. Play $\\#1$, $16/2 = 8$.\n- $[0,21,8]$. Play $\\#2$, $21/2 = 10$, remainder $1$.\n- $[11,0,18]$. Play $\\#3$...\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO08JAN] iCow B", "background": "", "description": "被无止境的农活压榨得筋疲力尽后，FarmerJohn 打算用他在 MP3 播放器市场新买的 iCow 来听些音乐，放松一下。FJ 的 iCow 里存了 $N(1 \\le N \\le 1{,}000)$ 首曲子，按 $1..N$ 依次编号。至于曲子播放的顺序，则是按一个 FarmerJohn 自己设计的算法来决定：\n\n- 第 $i$ 首曲子有一个初始权值 $R_i\\ (1 \\le R_i \\le 10{,}000)$。\n-  当一首曲子播放完毕，接下来播放的将是所有曲子中权值最大的那首（如果有两首或多首曲子的权值相同，那么这些曲子中编号最小的那首会被选中）。\n- 一首曲子在播放结束后，它的权值会被平均地分给其他 $N-1$ 首曲子，它本身的权值清零。\n- 如果一首曲子的权值无法被平均分配（也就是说，无法被 $N-1$ 整除），那么被 $N-1$ 除的余数部分将会以 $1$ 为单位，顺次分配给排名靠前的曲子（也就是说，顺序为曲目 $1$ 、曲目 $2 \\cdots $ 依次下去。当然，刚播放过的那首曲子需要被跳过），直到多出的部分被分配完。\n\n在选定的下一首曲子播放完毕后，这个算法再次被执行，调整曲子的权值，并选出再接下来播放的曲目。\n\n请你计算一下，按 FJ 的算法，最先播放的 $T\\ (1 \\le T \\le 1000)$ 首曲子分别是哪些。", "inputFormat": "第 $1$ 行有两个用空格隔开的整数：$N$ 和 $T$。\n\n第 $2$ 至第 $N+1$ 行，第 $i+1$ 行为 $1$ 个整数 $R_i$。", "outputFormat": "输出共 $T$ 行，第 $i$ 行输出一个整数，表示 iCow 播放的第 $i$ 首曲子。", "hint": "每一首曲子播放前，三首曲子的权值分别为：\n\n- $[10,8,11]$。播放 $\\#3$，$11/2 = 5$，权值余量为 $1$。\n- $[16,13,0]$。播放 $\\#1$，$16/2 = 8$。\n- $[0,21,8]$。播放 $\\#2$，$21/2 = 10$，权值余量为 $1$。\n- $[11,0,18]$。播放 $\\#3$，……\n", "locale": "zh-CN"}}}
{"pid": "P2036", "type": "P", "difficulty": 2, "samples": [["1\n3 10", "7"], ["2\n3 8\n5 8", "1"], ["4\n1 7\n2 6\n3 8\n4 9", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "搜索", "2008", "COCI（克罗地亚）"], "title": "[COCI 2008/2009 #2] PERKET", "background": null, "description": "Perket 是一种流行的美食。为了做好 Perket，厨师必须谨慎选择食材，以在保持传统风味的同时尽可能获得最全面的味道。你有 $n$ 种可支配的配料。对于每一种配料，我们知道它们各自的酸度 $s$ 和苦度 $b$。当我们添加配料时，总的酸度为每一种配料的酸度总乘积；总的苦度为每一种配料的苦度的总和。\n\n众所周知，美食应该做到口感适中，所以我们希望选取配料，以使得酸度和苦度的绝对差最小。\n\n另外，我们必须添加至少一种配料，因为没有任何食物是只以水为配料的。", "inputFormat": "第一行一个整数 $n$，表示可供选用的食材种类数。\n\n接下来 $n$ 行，每行 $2$ 个整数 $s_i$ 和 $b_i$，表示第 $i$ 种食材的酸度和苦度。", "outputFormat": "一行一个整数，表示可能的总酸度和总苦度的最小绝对差。", "hint": "对于第三组样例，选择最后三种食材，此时的总酸度为 $2 \\times 3 \\times 4 = 24$，总苦度为 $6+8+9=23$，差值为 $1$。\n\n#### 数据规模与约定\n对于 $100\\%$ 的数据，有 $1 \\leq n \\leq 10$，且将所有可用食材全部使用产生的总酸度和总苦度小于 $1 \\times 10^9$。\n#### 说明\n- 本题满分 $70$ 分。\n- 题目译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CONTEST #2](https://hsin.hr/coci/archive/2008_2009/contest2_tasks.pdf) PERKET，译者 @[mnesia](https://www.luogu.com.cn/user/115711)。", "locale": "zh-CN", "translations": {"en": {"title": "[COCI 2008/2009 #2] PERKET", "background": "# Description\n\nPerket is a popular dish. To make a good Perket, the chef must choose the ingredients carefully to achieve the most balanced flavor while keeping the traditional taste. You have $n$ available ingredients. For each ingredient, we know its sourness $s$ and bitterness $b$. When we add ingredients, the total sourness is the product of the sourness values of the chosen ingredients; the total bitterness is the sum of the bitterness values of the chosen ingredients.\n\nIt is well known that a good dish should be well balanced, so we want to choose a subset of ingredients that minimizes the absolute difference between the total sourness and the total bitterness.\n\nAlso, we must add at least one ingredient, because no dish is made with only water.", "description": "Perket is a popular dish. To make a good Perket, the chef must choose the ingredients carefully to achieve the most balanced flavor while keeping the traditional taste. You have $n$ available ingredients. For each ingredient, we know its sourness $s$ and bitterness $b$. When we add ingredients, the total sourness is the product of the sourness values of the chosen ingredients; the total bitterness is the sum of the bitterness values of the chosen ingredients.\n\nIt is well known that a good dish should be well balanced, so we want to choose a subset of ingredients that minimizes the absolute difference between the total sourness and the total bitterness.\n\nAlso, we must add at least one ingredient, because no dish is made with only water.\n\n# Description", "inputFormat": "The first line contains an integer $n$, the number of available ingredient types.\nThe next $n$ lines each contain $2$ integers $s_i$ and $b_i$, the sourness and bitterness of the $i$-th ingredient.", "outputFormat": "Output a single integer: the minimum possible absolute difference between the total sourness and the total bitterness.", "hint": "For the third sample, choose the last three ingredients. Then the total sourness is $2 \\times 3 \\times 4 = 24$, the total bitterness is $6+8+9=23$, and the difference is $1$.\n\nConstraints\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10$, and the total sourness and the total bitterness obtained by using all available ingredients are less than $1 \\times 10^9$.\n\nNotes\n- This problem is worth $70$ points.\n- Translated from [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CONTEST #2](https://hsin.hr/coci/archive/2008_2009/contest2_tasks.pdf) PERKET, translator @[mnesia](https://www.luogu.com.cn/user/115711).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COCI 2008/2009 #2] PERKET", "background": null, "description": "Perket 是一种流行的美食。为了做好 Perket，厨师必须谨慎选择食材，以在保持传统风味的同时尽可能获得最全面的味道。你有 $n$ 种可支配的配料。对于每一种配料，我们知道它们各自的酸度 $s$ 和苦度 $b$。当我们添加配料时，总的酸度为每一种配料的酸度总乘积；总的苦度为每一种配料的苦度的总和。\n\n众所周知，美食应该做到口感适中，所以我们希望选取配料，以使得酸度和苦度的绝对差最小。\n\n另外，我们必须添加至少一种配料，因为没有任何食物是只以水为配料的。", "inputFormat": "第一行一个整数 $n$，表示可供选用的食材种类数。\n\n接下来 $n$ 行，每行 $2$ 个整数 $s_i$ 和 $b_i$，表示第 $i$ 种食材的酸度和苦度。", "outputFormat": "一行一个整数，表示可能的总酸度和总苦度的最小绝对差。", "hint": "对于第三组样例，选择最后三种食材，此时的总酸度为 $2 \\times 3 \\times 4 = 24$，总苦度为 $6+8+9=23$，差值为 $1$。\n\n#### 数据规模与约定\n对于 $100\\%$ 的数据，有 $1 \\leq n \\leq 10$，且将所有可用食材全部使用产生的总酸度和总苦度小于 $1 \\times 10^9$。\n#### 说明\n- 本题满分 $70$ 分。\n- 题目译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CONTEST #2](https://hsin.hr/coci/archive/2008_2009/contest2_tasks.pdf) PERKET，译者 @[mnesia](https://www.luogu.com.cn/user/115711)。", "locale": "zh-CN"}}}
{"pid": "P2037", "type": "P", "difficulty": 3, "samples": [["3\r\nTUT-GLOP\r\n3-10-10-10\r\n310-1010\r\n", "310-1010 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "搜索"], "title": "电话号码", "background": "", "description": "一串由长长的数字组成的电话号码通常很难记忆。为了方便记忆，有种方法是用单词来方便记忆。例如用 `Three Tens` 来记忆电话 `3-10-10-10`。\n\n电话号码的标准形式是七位数字，中间用连字号分成前三个和后四个数字（例如：`888-1200`）。电话号码可以用字母来表示。以下是字母与数字的对应：\n\n - `A`，`B` 和 `C` 对应 `2`；\n - `D`，`E` 和 `F` 对应 `3`；\n - `G`，`H` 和 `I` 对应 `4`；\n - `J`，`K` 和 `L` 对应 `5`；\n - `M`，`N` 和 `O` 对应 `6`；\n - `P`，`R` 和 `S` 对应 `7`；\n - `T`，`U` 和 `V` 对应 `8`；\n - `W`，`X` 和 `Y` 对应 `9`。\n\n你会发现其中没有字母 `Q` 和 `Z`。电话中的连字号是可以忽略。例如 `TUT-GLOP` 的标准形式是 `888-4567`，`310-GINO` 的标准形式是 `310-4466`，`3-10-10-10` 的标准形式是 `310-1010`。\n\n如果两个电话号码的标准形式是一样的，那么这两个电话号码就是一样的。\n\n现在有一本电话簿，请从中找出哪些电话号码是重复的。\n", "inputFormat": "第一行一个正整数 $N$，表示有多少个电话号码。\n\n以下 $N$ 行，每行一个电话号码，电话号码由数字、大写字母（除 `Q`、`Z`）和连字符组成。电话号码长度不会超过 $1000$。所有电话号码都合法。\n", "outputFormat": "将所有重复的电话号码按字典序以标准形式输出，并且在每个电话号码后跟一个整数，表示该电话号码共出现了多少次，电话号码和整数间用一个空格隔开。不要输出多余空行。\n\n如果没有重复的电话号码，则输出：`No duplicates.`（注意最后一个字母 `s` 有一个点。）\n", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据，$N\\le20$。\n\n对于 $50\\%$ 的数据，$N\\le10000$。\n\n对于 $100\\%$ 的数据，$N\\le10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Telephone Numbers", "background": "", "description": "A telephone number consisting of a long string of digits is usually hard to remember. To make it easier, one approach is to use words to aid memorization. For example, use `Three Tens` to remember `3-10-10-10`.\n\nThe standard form of a telephone number is seven digits, split into the first three and the last four digits with a hyphen (for example: `888-1200`). Telephone numbers can be written with letters. The correspondence between letters and digits is as follows:\n- `A`, `B`, and `C` correspond to `2`;\n- `D`, `E`, and `F` correspond to `3`;\n- `G`, `H`, and `I` correspond to `4`;\n- `J`, `K`, and `L` correspond to `5`;\n- `M`, `N`, and `O` correspond to `6`;\n- `P`, `R`, and `S` correspond to `7`;\n- `T`, `U`, and `V` correspond to `8`;\n- `W`, `X`, and `Y` correspond to `9`.\n\nYou will notice that the letters `Q` and `Z` are not present. Hyphens in telephone numbers can be ignored. For example, the standard form of `TUT-GLOP` is `888-4567`, the standard form of `310-GINO` is `310-4466`, and the standard form of `3-10-10-10` is `310-1010`.\n\nIf two telephone numbers have the same standard form, then they are considered identical.\n\nGiven a phone book, find which telephone numbers are duplicates.", "inputFormat": "The first line contains a positive integer $N$, the number of telephone numbers.\n\nThe following $N$ lines each contain one telephone number. Each number consists of digits, uppercase letters (excluding `Q` and `Z`), and hyphens. The length of each telephone number does not exceed $1000$. All telephone numbers are valid.", "outputFormat": "Output all duplicate telephone numbers in lexicographic order, in standard form. After each telephone number, output an integer indicating how many times it appears, separated by a single space. Do not output extra blank lines.\n\nIf there are no duplicate telephone numbers, output: `No duplicates.`", "hint": "Constraints\n\nFor $30\\%$ of the testdata, $N \\le 20$.\n\nFor $50\\%$ of the testdata, $N \\le 10000$.\n\nFor $100\\%$ of the testdata, $N \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "电话号码", "background": "", "description": "一串由长长的数字组成的电话号码通常很难记忆。为了方便记忆，有种方法是用单词来方便记忆。例如用 `Three Tens` 来记忆电话 `3-10-10-10`。\n\n电话号码的标准形式是七位数字，中间用连字号分成前三个和后四个数字（例如：`888-1200`）。电话号码可以用字母来表示。以下是字母与数字的对应：\n\n - `A`，`B` 和 `C` 对应 `2`；\n - `D`，`E` 和 `F` 对应 `3`；\n - `G`，`H` 和 `I` 对应 `4`；\n - `J`，`K` 和 `L` 对应 `5`；\n - `M`，`N` 和 `O` 对应 `6`；\n - `P`，`R` 和 `S` 对应 `7`；\n - `T`，`U` 和 `V` 对应 `8`；\n - `W`，`X` 和 `Y` 对应 `9`。\n\n你会发现其中没有字母 `Q` 和 `Z`。电话中的连字号是可以忽略。例如 `TUT-GLOP` 的标准形式是 `888-4567`，`310-GINO` 的标准形式是 `310-4466`，`3-10-10-10` 的标准形式是 `310-1010`。\n\n如果两个电话号码的标准形式是一样的，那么这两个电话号码就是一样的。\n\n现在有一本电话簿，请从中找出哪些电话号码是重复的。\n", "inputFormat": "第一行一个正整数 $N$，表示有多少个电话号码。\n\n以下 $N$ 行，每行一个电话号码，电话号码由数字、大写字母（除 `Q`、`Z`）和连字符组成。电话号码长度不会超过 $1000$。所有电话号码都合法。\n", "outputFormat": "将所有重复的电话号码按字典序以标准形式输出，并且在每个电话号码后跟一个整数，表示该电话号码共出现了多少次，电话号码和整数间用一个空格隔开。不要输出多余空行。\n\n如果没有重复的电话号码，则输出：`No duplicates.`（注意最后一个字母 `s` 有一个点。）\n", "hint": "【数据范围】\n\n对于 $30\\%$ 的数据，$N\\le20$。\n\n对于 $50\\%$ 的数据，$N\\le10000$。\n\n对于 $100\\%$ 的数据，$N\\le10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P2038", "type": "P", "difficulty": 2, "samples": [["1\n2\n4 4 10\n6 6 20", "1 30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2014", "NOIP 提高组", "枚举"], "title": "[NOIP 2014 提高组] 无线网络发射器选址", "background": "NOIP2014 提高组 D2T1", "description": "随着智能手机的日益普及，人们对无线网的需求日益增大。某城市决定对城市内的公共场所覆盖无线网。\n\n假设该城市的布局为由严格平行的 $129$ 条东西向街道和 $129$ 条南北向街道所形成的网格状，并且相邻的平行街道之间的距离都是恒定值 $1$。东西向街道从北到南依次编号为 $0,1,2 \\dots 128$，南北向街道从西到东依次编号为 $0,1,2 \\dots 128$。\n\n东西向街道和南北向街道相交形成路口，规定编号为 $x$ 的南北向街道和编号为 $y$ 的东西向街道形成的路口的坐标是 $(x, y)$。在某些路口存在一定数量的公共场所。\n\n由于政府财政问题，只能安装一个大型无线网络发射器。该无线网络发射器的传播范围是一个以该点为中心，边长为 $2d$ 的正方形。传播范围包括正方形边界。\n\n现在政府有关部门准备安装一个传播参数为 $d$ 的无线网络发射器，希望你帮助他们在城市内找出合适的路口作为安装地点，使得覆盖的公共场所最多。", "inputFormat": "第一行包含一个整数 $d$，表示无线网络发射器的传播距离。\n\n第二行包含一个整数 $n$，表示有公共场所的路口数目。\n\n接下来 $n$ 行，每行给出三个整数 $x, y, k$，中间用一个空格隔开，分别代表路口的坐标 $(x, y)$ 以及该路口公共场所的数量。同一坐标只会给出一次。", "outputFormat": "输出一行，包含两个整数，用一个空格隔开，分别表示能覆盖最多公共场所的安装地点方案数，以及能覆盖的最多公共场所的数量。", "hint": "对于 $100\\%$ 的数据，$1 \\leq d \\leq 20, 1 \\leq n \\leq 20, 0 \\leq x \\leq 128, 0 \\leq y \\leq 128, 0 < k \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Wireless Network Transmitter Placement", "background": "NOIP 2014 Senior D2T1.", "description": "With the increasing popularity of smartphones, the demand for wireless networks is growing. A certain city decides to cover public places with a wireless network.\n\nAssume the city layout is a grid formed by $129$ east-west streets and $129$ north-south streets, and the distance between any two adjacent parallel streets is a constant $1$. The east-west streets are numbered $0,1,2 \\dots 128$ from north to south, and the north-south streets are numbered $0,1,2 \\dots 128$ from west to east.\n\nIntersections are formed where an east-west street meets a north-south street. The intersection of the north-south street numbered $x$ and the east-west street numbered $y$ has coordinates $(x, y)$. Some intersections have a certain number of public places.\n\nDue to budget constraints, only one large wireless network transmitter can be installed. Its coverage area is a square centered at the installation point with side length $2d$. The coverage includes the square’s boundary.\n\nNow the authorities plan to install a transmitter with parameter $d$. Please help them find a suitable intersection in the city as the installation location to maximize the number of public places covered.", "inputFormat": "The first line contains an integer $d$, the coverage parameter of the wireless network transmitter.\n\nThe second line contains an integer $n$, the number of intersections that have public places.\n\nThe next $n$ lines each contain three integers $x, y, k$ separated by a space, representing the intersection coordinates $(x, y)$ and the number of public places at that intersection. Each coordinate appears at most once.", "outputFormat": "Output one line containing two integers separated by a space: the number of installation locations that achieve the maximum coverage of public places, and the maximum number of public places covered.", "hint": "For $100\\%$ of the testdata, $1 \\leq d \\leq 20, 1 \\leq n \\leq 20, 0 \\leq x \\leq 128, 0 \\leq y \\leq 128, 0 < k \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 无线网络发射器选址", "background": "NOIP2014 提高组 D2T1", "description": "随着智能手机的日益普及，人们对无线网的需求日益增大。某城市决定对城市内的公共场所覆盖无线网。\n\n假设该城市的布局为由严格平行的 $129$ 条东西向街道和 $129$ 条南北向街道所形成的网格状，并且相邻的平行街道之间的距离都是恒定值 $1$。东西向街道从北到南依次编号为 $0,1,2 \\dots 128$，南北向街道从西到东依次编号为 $0,1,2 \\dots 128$。\n\n东西向街道和南北向街道相交形成路口，规定编号为 $x$ 的南北向街道和编号为 $y$ 的东西向街道形成的路口的坐标是 $(x, y)$。在某些路口存在一定数量的公共场所。\n\n由于政府财政问题，只能安装一个大型无线网络发射器。该无线网络发射器的传播范围是一个以该点为中心，边长为 $2d$ 的正方形。传播范围包括正方形边界。\n\n现在政府有关部门准备安装一个传播参数为 $d$ 的无线网络发射器，希望你帮助他们在城市内找出合适的路口作为安装地点，使得覆盖的公共场所最多。", "inputFormat": "第一行包含一个整数 $d$，表示无线网络发射器的传播距离。\n\n第二行包含一个整数 $n$，表示有公共场所的路口数目。\n\n接下来 $n$ 行，每行给出三个整数 $x, y, k$，中间用一个空格隔开，分别代表路口的坐标 $(x, y)$ 以及该路口公共场所的数量。同一坐标只会给出一次。", "outputFormat": "输出一行，包含两个整数，用一个空格隔开，分别表示能覆盖最多公共场所的安装地点方案数，以及能覆盖的最多公共场所的数量。", "hint": "对于 $100\\%$ 的数据，$1 \\leq d \\leq 20, 1 \\leq n \\leq 20, 0 \\leq x \\leq 128, 0 \\leq y \\leq 128, 0 < k \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2039", "type": "P", "difficulty": 4, "samples": [["5\n0 0 0 1 0\n\n", "1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "安徽"], "title": "[AHOI2009] 跳棋", "background": null, "description": "在一个 $1$ 行 $N$ 列（$N$ 是奇数）的棋盘上，有 $K$ 个格子是红色的。这种情况下，你有一个跳棋在最左端的格子上。你的目标是将它移动到最右边的格子，在开始移动之间，你可以在棋盘的任意空位上放棋子。在游戏开始后 你只可以随时在一个红色格子上放棋子。棋子的移动规则是：每次只可以选择一个棋子，跳过与之相邻的棋子走到后面的空格上，被它跳过的棋子被吃掉，即从棋盘上移走，如相邻棋子的另一侧有棋子，则不能跳。\n\n\n请回答以下两个问题：\n\n1. 移动开始前至少要放多少棋子才能完成任务。\n2. 如果要使开始前放的棋子数要求尽量少，那么在移动过程中最少需要放多少个棋子才能完成任务。\n\n\n关于规则的补充说明：\n\n1. 只能往空位上放棋子，不管是移动开始前还是移动过程中。\n2. 移动前棋盘最左端的那个原始棋子绝对不能被吃掉。", "inputFormat": "第一行一个正奇数 $N$。\n\n第二行有 $N$ 个整数，如果第 $i$ 个整数是 $1$，说明第 $i$ 个格子是红色格子，否则为白色格子。\n\n数字间用空格分开。", "outputFormat": "两行，每行一个整数分别代表第一问和第二问的结果。", "hint": "在游戏开始前，可以在第二个格子上放上一个棋子，游戏开始后可用最左边的棋子吃掉它，从而移动到第三格。然后由于第四格是个红色的格子，在游戏中可以在那放一个棋子，然后用已经移动第三格的棋子把它吃掉，从而达到终点。\n\n$100\\%$ 的数据中，$1\\le N\\le  1000$，输出中的数字不超过 $10^ {15}$。\n\n$30\\%$ 的数据中，$N\\le 20$。\n\n\nSource: [Ahoi2009] checker", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2009] Checkers", "background": "", "description": "On a board with 1 row and $N$ columns (where $N$ is odd), there are $K$ red squares. In this situation, you have a checker on the leftmost square. Your goal is to move it to the rightmost square. Before the movement begins, you may place pieces on any empty squares on the board. After the game starts, you may place pieces only on red squares at any time. The movement rule is: each move you may choose exactly one piece and jump over an adjacent piece to the empty square immediately beyond; the jumped-over piece is captured and removed from the board. If the square immediately beyond the adjacent piece is occupied, the jump is not allowed.\n\nAnswer the following two questions:\n\n1. Before the movement starts, what is the minimum number of pieces you must place to complete the task?\n2. If the number of pieces placed before the start is minimized, what is the minimum number of pieces you must place during the movement?\n\nAdditional clarifications on the rules:\n\n1. Pieces can only be placed on empty squares, whether before the movement starts or during the game.\n2. The original piece on the leftmost square before the movement starts must never be captured.", "inputFormat": "The first line contains a positive odd integer $N$.\n\nThe second line contains $N$ integers. If the $i$-th integer is $1$, then the $i$-th square is red; otherwise, it is white.\n\nThe numbers are separated by spaces.", "outputFormat": "Output two lines. Each line contains one integer, representing the answers to the first and second questions, respectively.", "hint": "Before the game starts, you can place a piece on the second square. After the game starts, use the leftmost piece to capture it and thus move to the third square. Then, since the fourth square is red, you can place a piece there during the game, and use the piece that has moved to the third square to capture it, thereby reaching the end.\n\nConstraints:\n- For $100\\%$ of the testdata, $1 \\le N \\le 1000$, and the numbers in the output do not exceed $10^{15}$.\n- For $30\\%$ of the testdata, $N \\le 20$.\n\nSource: [Ahoi2009] checker.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2009] 跳棋", "background": null, "description": "在一个 $1$ 行 $N$ 列（$N$ 是奇数）的棋盘上，有 $K$ 个格子是红色的。这种情况下，你有一个跳棋在最左端的格子上。你的目标是将它移动到最右边的格子，在开始移动之间，你可以在棋盘的任意空位上放棋子。在游戏开始后 你只可以随时在一个红色格子上放棋子。棋子的移动规则是：每次只可以选择一个棋子，跳过与之相邻的棋子走到后面的空格上，被它跳过的棋子被吃掉，即从棋盘上移走，如相邻棋子的另一侧有棋子，则不能跳。\n\n\n请回答以下两个问题：\n\n1. 移动开始前至少要放多少棋子才能完成任务。\n2. 如果要使开始前放的棋子数要求尽量少，那么在移动过程中最少需要放多少个棋子才能完成任务。\n\n\n关于规则的补充说明：\n\n1. 只能往空位上放棋子，不管是移动开始前还是移动过程中。\n2. 移动前棋盘最左端的那个原始棋子绝对不能被吃掉。", "inputFormat": "第一行一个正奇数 $N$。\n\n第二行有 $N$ 个整数，如果第 $i$ 个整数是 $1$，说明第 $i$ 个格子是红色格子，否则为白色格子。\n\n数字间用空格分开。", "outputFormat": "两行，每行一个整数分别代表第一问和第二问的结果。", "hint": "在游戏开始前，可以在第二个格子上放上一个棋子，游戏开始后可用最左边的棋子吃掉它，从而移动到第三格。然后由于第四格是个红色的格子，在游戏中可以在那放一个棋子，然后用已经移动第三格的棋子把它吃掉，从而达到终点。\n\n$100\\%$ 的数据中，$1\\le N\\le  1000$，输出中的数字不超过 $10^ {15}$。\n\n$30\\%$ 的数据中，$N\\le 20$。\n\n\nSource: [Ahoi2009] checker", "locale": "zh-CN"}}}
{"pid": "P2040", "type": "P", "difficulty": 3, "samples": [["0 1 1\n1 0 0\n1 0 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "递归", "枚举", "剪枝"], "title": "打开所有的灯", "background": "pmshz 在玩一个益 (ruo) 智 (zhi) 的小游戏，目的是打开九盏灯所有的灯，这样的游戏难倒了 pmshz……", "description": "这个灯很奇 (fan) 怪 (ren)，点一下就会将这个灯和其周围四盏灯的开关状态全部改变。现在你的任务就是就是告诉 pmshz 要全部打开这些灯。\n\n例如\n```plain\n0  1  1\n1  0  0\n1  0  1\n```\n点一下最中间的灯 $(2,2)$ 就变成了\n\n```plain\n0  0  1\n0  1  1\n1  1  1\n```\n\n再点一下左上角的灯 $(1,1)$ 就变成了\n\n```plain\n1  1  1\n1  1  1\n1  1  1\n```\n\n达成目标。\n\n最少需要 $2$ 步。", "inputFormat": "$9$ 个数字，以 $3\\times3$ 的格式输入，每两个数字中间只有一个空格，表示灯初始的开关状态。（$0$ 表示关，$1$ 表示开）", "outputFormat": "一个整数，表示最少打开所有灯所需要的步数。", "hint": "这个题水不水，就看你怎么考虑了……", "locale": "zh-CN", "translations": {"en": {"title": "Turn On All the Lights", "background": "pmshz is playing a small puzzle game (yì zhì; jokingly \"ruò zhì\"). The goal is to turn on all nine lights. This game has stumped pmshz.", "description": "These lights behave in a peculiar (annoying) way: pressing a light will flip the on/off state of that light and its four neighboring lights. Your task is to tell pmshz how to turn all the lights on.\n\nFor example\n```plain\n0  1  1\n1  0  0\n1  0  1\n```\nPressing the center light $(2,2)$ becomes\n\n```plain\n0  0  1\n0  1  1\n1  1  1\n```\n\nPressing the top-left light $(1,1)$ becomes\n\n```plain\n1  1  1\n1  1  1\n1  1  1\n```\n\nGoal achieved.\n\nThe minimum number of steps is $2$.", "inputFormat": "$9$ numbers given in a $3\\times3$ layout, with exactly one space between adjacent numbers, representing the initial on/off state of the lights ($0$ means off, $1$ means on).", "outputFormat": "A single integer, the minimum number of presses required to turn on all the lights.", "hint": "How easy this problem is depends on how you think about it.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "打开所有的灯", "background": "pmshz 在玩一个益 (ruo) 智 (zhi) 的小游戏，目的是打开九盏灯所有的灯，这样的游戏难倒了 pmshz……", "description": "这个灯很奇 (fan) 怪 (ren)，点一下就会将这个灯和其周围四盏灯的开关状态全部改变。现在你的任务就是就是告诉 pmshz 要全部打开这些灯。\n\n例如\n```plain\n0  1  1\n1  0  0\n1  0  1\n```\n点一下最中间的灯 $(2,2)$ 就变成了\n\n```plain\n0  0  1\n0  1  1\n1  1  1\n```\n\n再点一下左上角的灯 $(1,1)$ 就变成了\n\n```plain\n1  1  1\n1  1  1\n1  1  1\n```\n\n达成目标。\n\n最少需要 $2$ 步。", "inputFormat": "$9$ 个数字，以 $3\\times3$ 的格式输入，每两个数字中间只有一个空格，表示灯初始的开关状态。（$0$ 表示关，$1$ 表示开）", "outputFormat": "一个整数，表示最少打开所有灯所需要的步数。", "hint": "这个题水不水，就看你怎么考虑了……", "locale": "zh-CN"}}}
{"pid": "P2041", "type": "P", "difficulty": 4, "samples": [["1", "1\n1 1"], ["2", "4\n1 1\n2 1\n2 2\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "分裂游戏", "background": "", "description": "有一个无限大的棋盘，棋盘左下角有一个大小为 $n$ 的阶梯形区域，其中最左下角的那个格子里有一枚棋子。你每次可以把一枚棋子“分裂”成两枚棋子，分别放在原位置的上边一格和右边一格。（但如果目标位置已有棋子，则不能这样做）你的目的是通过有限次的操作，让整个阶梯里不再有任何棋子。下图所示的是 $n = 2$ 时的一种解法。\n\n![](https://cdn.luogu.com.cn/upload/pic/1116.png) \n\n我们用从下往上数的方式标记行，从左往右数的方式标记列，以 (行,列) 来标记棋子，并且都从 $1$ 开始。\n\n例如，第三步中的三个棋子坐标分别为 $(3,1),(2,2),(1,2)$。\n\n现在已知 $n$，你需要做的是给出合适的操作序列。\n", "inputFormat": "输入一个正整数 $n$。\n", "outputFormat": "如果有解，第一行应包含一个正整数 $m$，表示总共需要的操作步数。\n\n以下 $m$ 行，每行包括两个正整数 $x_i,y_i$，表示第 $i$ 步操作分裂的是处于第 $x_i$ 行第 $y_i$ 列的棋子。\n\n如果无解，只需在第一行输出 $-1$。", "hint": "- 对于 $40\\%$ 的数据：$n \\leq 8$；\n- 对于 $100\\%$ 的数据：$n \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Splitting Game", "background": "", "description": "There is an infinite board. In the lower-left corner, there is a staircase-shaped region of size $n$, and there is a single piece in the very bottom-left cell of this staircase. Each time, you may “split” one piece into two pieces, placing them in the cell one square above and the cell one square to the right of the original position, respectively. (However, if a target cell already contains a piece, you cannot perform this operation.) Your goal is to, after finitely many operations, make the entire staircase contain no pieces. The figure below shows one solution when $n = 2$.\n\n![](https://cdn.luogu.com.cn/upload/pic/1116.png) \n\nWe number rows from bottom to top and columns from left to right, and denote a piece by (row, column), both starting from $1$.\n\nFor example, in the third step, the three pieces are at coordinates $(3, 1)$, $(2, 2)$, $(1, 2)$.\n\nGiven $n$, you need to output a suitable sequence of operations.", "inputFormat": "Input a single positive integer $n$.", "outputFormat": "If there is a solution, the first line should contain a positive integer $m$, the total number of operations.\n\nIn the next $m$ lines, each line contains two positive integers $x_i, y_i$, indicating that in the $i$-th operation you split the piece at row $x_i$, column $y_i$.\n\nIf there is no solution, output $-1$ on the first line.", "hint": "- Constraints: For $40\\%$ of the testdata, $n \\leq 8$.\n- Constraints: For $100\\%$ of the testdata, $n \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分裂游戏", "background": "", "description": "有一个无限大的棋盘，棋盘左下角有一个大小为 $n$ 的阶梯形区域，其中最左下角的那个格子里有一枚棋子。你每次可以把一枚棋子“分裂”成两枚棋子，分别放在原位置的上边一格和右边一格。（但如果目标位置已有棋子，则不能这样做）你的目的是通过有限次的操作，让整个阶梯里不再有任何棋子。下图所示的是 $n = 2$ 时的一种解法。\n\n![](https://cdn.luogu.com.cn/upload/pic/1116.png) \n\n我们用从下往上数的方式标记行，从左往右数的方式标记列，以 (行,列) 来标记棋子，并且都从 $1$ 开始。\n\n例如，第三步中的三个棋子坐标分别为 $(3,1),(2,2),(1,2)$。\n\n现在已知 $n$，你需要做的是给出合适的操作序列。\n", "inputFormat": "输入一个正整数 $n$。\n", "outputFormat": "如果有解，第一行应包含一个正整数 $m$，表示总共需要的操作步数。\n\n以下 $m$ 行，每行包括两个正整数 $x_i,y_i$，表示第 $i$ 步操作分裂的是处于第 $x_i$ 行第 $y_i$ 列的棋子。\n\n如果无解，只需在第一行输出 $-1$。", "hint": "- 对于 $40\\%$ 的数据：$n \\leq 8$；\n- 对于 $100\\%$ 的数据：$n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2042", "type": "P", "difficulty": 6, "samples": [["9 8 \n2 -6 3 5 1 -5 -3 6 3 \nGET-SUM 5 4\nMAX-SUM\nINSERT 8 3 -5 7 2\nDELETE 12 1\nMAKE-SAME 3 3 2\nREVERSE 3 6\nGET-SUM 5 4\nMAX-SUM", "-1\n10\n1\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2005", "平衡树", "NOI"], "title": "[NOI2005] 维护数列", "background": null, "description": "请写一个程序，要求维护一个数列，支持以下 $6$ 种操作：\n\n| 编号 | 名称 | 格式 | 说明 |\n| :-----------: | :-----------: | :-----------: | :----------- |\n| 1 | 插入 | $\\operatorname{INSERT}\\ posi \\ tot \\ c_1 \\ c_2 \\cdots c_{tot}$ | 在当前数列的第 $posi$ 个数字后插入 $tot$ 个数字：$c_1, c_2 \\cdots c_{tot}$；若在数列首插入，则 $posi$ 为 $0$ |\n| 2 | 删除 | $\\operatorname{DELETE} \\ posi \\ tot$ | 从当前数列的第 $posi$ 个数字开始连续删除 $tot$ 个数字 |\n| 3 | 修改 | $\\operatorname{MAKE-SAME} \\ posi \\ tot \\ c$ | 从当前数列的第 $posi$ 个数字开始的连续 $tot$ 个数字统一修改为 $c$ |\n| 4 | 翻转 | $\\operatorname{REVERSE} \\ posi \\ tot$ | 取出从当前数列的第 $posi$ 个数字开始的 $tot$ 个数字，翻转后放入原来的位置 |\n| 5 | 求和 | $\\operatorname{GET-SUM} \\ posi \\ tot$ | 计算从当前数列的第 $posi$ 个数字开始的 $tot$ 个数字的和并输出 |\n| 6 | 求最大子列和 | $\\operatorname{MAX-SUM}$ | 求出当前数列中和最大的一段非空子列，并输出最大和 |", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，$N$ 表示初始时数列中数的个数，$M$ 表示要进行的操作数目。\n\n第二行包含 $N$ 个数字，描述初始时的数列。以下 $M$ 行，每行一条命令，格式参见问题描述中的表格。", "outputFormat": "对于输入数据中的 $\\operatorname{GET-SUM}$ 和 $\\operatorname{MAX-SUM}$ 操作，向输出文件依次打印结果，每个答案（数字）占一行。", "hint": "#### 数据规模与约定\n\n- 你可以认为在任何时刻，数列中至少有 $1$ 个数。\n- 输入数据一定是正确的，即指定位置的数在数列中一定存在。\n- 对于 $50\\%$ 的数据，任何时刻数列中最多含有 $3 \\times 10^4$ 个数。\n- 对于 $100\\%$ 的数据，任何时刻数列中最多含有 $5 \\times 10^5$ 个数，任何时刻数列中任何一个数字均在 $[-10^3, 10^3]$ 内，$1 \\le M \\le 2 \\times 10^4$，插入的数字总数不超过 $4 \\times 10^6$。\n\n题面由 @syksykCCC 提供。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2005] Sequence Maintenance", "background": "", "description": "Please write a program to maintain a sequence that supports the following $6$ operations:\n\n| ID | Name | Format | Note |\n| :-----------: | :-----------: | :-----------: | :----------- |\n| 1 | Insert | $\\operatorname{INSERT}\\ posi \\ tot \\ c_1 \\ c_2 \\cdots c_{tot}$ | Insert $tot$ numbers $c_1, c_2 \\cdots c_{tot}$ after the $posi$-th number of the current sequence; if inserting at the beginning of the sequence, then $posi$ is $0$. |\n| 2 | Delete | $\\operatorname{DELETE} \\ posi \\ tot$ | Starting from the $posi$-th number of the current sequence, delete $tot$ consecutive numbers. |\n| 3 | Make-Same | $\\operatorname{MAKE-SAME} \\ posi \\ tot \\ c$ | Starting from the $posi$-th number of the current sequence, set $tot$ consecutive numbers all to $c$. |\n| 4 | Reverse | $\\operatorname{REVERSE} \\ posi \\ tot$ | Take the $tot$ numbers starting from the $posi$-th number, reverse them, and put them back in the original position. |\n| 5 | Get-Sum | $\\operatorname{GET-SUM} \\ posi \\ tot$ | Compute and output the sum of the $tot$ numbers starting from the $posi$-th number of the current sequence. |\n| 6 | Max-Subarray Sum | $\\operatorname{MAX-SUM}$ | Find a contiguous subarray of the current sequence with the maximum sum and output that maximum sum. |", "inputFormat": "The first line contains two integers $N$ and $M$, where $N$ is the number of elements in the initial sequence, and $M$ is the number of operations to perform.\n\nThe second line contains $N$ numbers describing the initial sequence. Each of the following $M$ lines contains one command; see the table in the Description for the formats.", "outputFormat": "For each $\\operatorname{GET-SUM}$ and $\\operatorname{MAX-SUM}$ operation in the input, print the result to the output in order, one answer (number) per line.", "hint": "#### Constraints\n\n- You may assume that at any time, the sequence contains at least $1$ number.\n- The input is guaranteed to be valid, i.e., the specified positions always exist in the sequence.\n- For $50\\%$ of the testdata, the sequence contains at most $3 \\times 10^4$ numbers at any time.\n- For $100\\%$ of the testdata, the sequence contains at most $5 \\times 10^5$ numbers at any time; each number is within $[-10^3, 10^3]$ at any time; $1 \\le M \\le 2 \\times 10^4$; the total count of inserted numbers does not exceed $4 \\times 10^6$.\n\nProblem statement provided by @syksykCCC.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2005] 维护数列", "background": null, "description": "请写一个程序，要求维护一个数列，支持以下 $6$ 种操作：\n\n| 编号 | 名称 | 格式 | 说明 |\n| :-----------: | :-----------: | :-----------: | :----------- |\n| 1 | 插入 | $\\operatorname{INSERT}\\ posi \\ tot \\ c_1 \\ c_2 \\cdots c_{tot}$ | 在当前数列的第 $posi$ 个数字后插入 $tot$ 个数字：$c_1, c_2 \\cdots c_{tot}$；若在数列首插入，则 $posi$ 为 $0$ |\n| 2 | 删除 | $\\operatorname{DELETE} \\ posi \\ tot$ | 从当前数列的第 $posi$ 个数字开始连续删除 $tot$ 个数字 |\n| 3 | 修改 | $\\operatorname{MAKE-SAME} \\ posi \\ tot \\ c$ | 从当前数列的第 $posi$ 个数字开始的连续 $tot$ 个数字统一修改为 $c$ |\n| 4 | 翻转 | $\\operatorname{REVERSE} \\ posi \\ tot$ | 取出从当前数列的第 $posi$ 个数字开始的 $tot$ 个数字，翻转后放入原来的位置 |\n| 5 | 求和 | $\\operatorname{GET-SUM} \\ posi \\ tot$ | 计算从当前数列的第 $posi$ 个数字开始的 $tot$ 个数字的和并输出 |\n| 6 | 求最大子列和 | $\\operatorname{MAX-SUM}$ | 求出当前数列中和最大的一段非空子列，并输出最大和 |", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，$N$ 表示初始时数列中数的个数，$M$ 表示要进行的操作数目。\n\n第二行包含 $N$ 个数字，描述初始时的数列。以下 $M$ 行，每行一条命令，格式参见问题描述中的表格。", "outputFormat": "对于输入数据中的 $\\operatorname{GET-SUM}$ 和 $\\operatorname{MAX-SUM}$ 操作，向输出文件依次打印结果，每个答案（数字）占一行。", "hint": "#### 数据规模与约定\n\n- 你可以认为在任何时刻，数列中至少有 $1$ 个数。\n- 输入数据一定是正确的，即指定位置的数在数列中一定存在。\n- 对于 $50\\%$ 的数据，任何时刻数列中最多含有 $3 \\times 10^4$ 个数。\n- 对于 $100\\%$ 的数据，任何时刻数列中最多含有 $5 \\times 10^5$ 个数，任何时刻数列中任何一个数字均在 $[-10^3, 10^3]$ 内，$1 \\le M \\le 2 \\times 10^4$，插入的数字总数不超过 $4 \\times 10^6$。\n\n题面由 @syksykCCC 提供。", "locale": "zh-CN"}}}
{"pid": "P2043", "type": "P", "difficulty": 2, "samples": [["10", "2 8\n3 4\n5 2\n7 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "质因子分解", "background": "", "description": "对 $N!$ 进行质因子分解。", "inputFormat": "输入数据仅有一行包含一个正整数 $N$，$N \\leq 10000$。", "outputFormat": "输出数据包含若干行，每行两个正整数 $p,a$，中间用一个空格隔开。表示 $N!$ 包含 $a$ 个质因子 $p$，要求按 $p$ 的值从小到大输出。", "hint": "$10! = 3628800 = (2^8) \\times (3^4) \\times (5^2) \\times 7$。", "locale": "zh-CN", "translations": {"en": {"title": "Prime Factorization of N!", "background": "", "description": "Perform the prime factorization of $N!$.", "inputFormat": "The input consists of a single line containing a positive integer $N$, with $N \\leq 10000$.", "outputFormat": "Output multiple lines. Each line contains two positive integers $p$ and $a$, separated by a single space, indicating that $N!$ contains $a$ copies of the prime factor $p$. Output them in increasing order of $p$.", "hint": "$10! = 3628800 = (2^8) \\times (3^4) \\times (5^2) \\times 7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "质因子分解", "background": "", "description": "对 $N!$ 进行质因子分解。", "inputFormat": "输入数据仅有一行包含一个正整数 $N$，$N \\leq 10000$。", "outputFormat": "输出数据包含若干行，每行两个正整数 $p,a$，中间用一个空格隔开。表示 $N!$ 包含 $a$ 个质因子 $p$，要求按 $p$ 的值从小到大输出。", "hint": "$10! = 3628800 = (2^8) \\times (3^4) \\times (5^2) \\times 7$。", "locale": "zh-CN"}}}
{"pid": "P2044", "type": "P", "difficulty": 4, "samples": [["11 8 7 1 5 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "贪心", "高精度", "2012", "矩阵运算", "NOI", "素数判断,质数,筛法", "矩阵乘法"], "title": "[NOI2012] 随机数生成器", "background": "", "description": "栋栋最近迷上了随机算法，而随机数是生成随机算法的基础。栋栋准备使用线性同余法（Linear Congruential Method）来生成一个随机数列，这种方法需要设置四个非负整数参数 $m,a,c,X_0$，按照下面的公式生成出一系列随机数 $\\{X_n\\}$：\n$$X_{n+1}=(aX_n +c)\\bmod m$$\n\n其中 $\\bmod m$ 表示前面的数除以 $m$ 的余数。从这个式子可以看出，这个序列的下一个数总是由上一个数生成的。\n\n用这种方法生成的序列具有随机序列的性质，因此这种方法被广泛地使用，包括常用的 C++ 和 Pascal 的产生随机数的库函数使用的也是这种方法。\n\n栋栋知道这样产生的序列具有良好的随机性，不过心急的他仍然想尽快知道 $X_n$ 是多少。由于栋栋需要的随机数是 $0,1,\\dots,g-1$ 之间的，他需要将 $X_n$ 除以 $g$ 取余得到他想要的数，即 $X_n \\bmod g$，你只需要告诉栋栋他想要的数 $X_n \\bmod g$ 是多少就可以了。\n", "inputFormat": "一行 $6$ 个用空格分割的整数 $m,a,c,X_0,n$ 和 $g$，其中 $a,c,X_0$ 是非负整数，$m,n,g$ 是正整数。\n", "outputFormat": "输出一个数，即 $X_n \\bmod g$。\n", "hint": "计算得 $X_n=X_5=8$，故$(X_n \\bmod g) = (8 \\bmod 3) = 2$。\n\n对于 $100\\%$ 的数据，$n,m,a,c,X_0\\leq 10^{18}$，$1\\leq g\\leq 10^8$，$n,m\\geq 1$，$a,c,X_0\\geq 0$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2012] Random Number Generator", "background": "", "description": "Dongdong has recently become fascinated with randomized algorithms, and random numbers are the foundation for generating them. He plans to use the Linear Congruential Method to generate a sequence of random numbers. This method requires setting four non-negative integer parameters $m, a, c, X_0$, and generates a sequence $\\{X_n\\}$ according to the formula:\n$$X_{n+1} = (a X_n + c) \\bmod m$$\n\nHere, $\\bmod m$ denotes the remainder when the preceding number is divided by $m$. From this equation, we can see that the next number in the sequence is always determined by the previous one.\n\nSequences generated by this method have properties of random sequences, so it is widely used. The standard library functions for generating random numbers in C++ and Pascal also use this method.\n\nDongdong knows that the sequence produced this way has good randomness, but he is impatient and wants to know $X_n$ as soon as possible. Since the random numbers he needs are between $0, 1, \\dots, g - 1$, he will take $X_n$ modulo $g$ to get the number he wants, i.e., $X_n \\bmod g$. You only need to tell Dongdong the value of $X_n \\bmod g$.", "inputFormat": "One line contains 6 space-separated integers $m, a, c, X_0, n$ and $g$, where $a, c, X_0$ are non-negative integers, and $m, n, g$ are positive integers.", "outputFormat": "Output a single number, which is $X_n \\bmod g$.", "hint": "We compute $X_n = X_5 = 8$, thus $(X_n \\bmod g) = (8 \\bmod 3) = 2$.\n\nConstraints: For $100\\%$ of the testdata, $n, m, a, c, X_0 \\leq 10^{18}$, $1 \\leq g \\leq 10^8$, $n, m \\geq 1$, $a, c, X_0 \\geq 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2012] 随机数生成器", "background": "", "description": "栋栋最近迷上了随机算法，而随机数是生成随机算法的基础。栋栋准备使用线性同余法（Linear Congruential Method）来生成一个随机数列，这种方法需要设置四个非负整数参数 $m,a,c,X_0$，按照下面的公式生成出一系列随机数 $\\{X_n\\}$：\n$$X_{n+1}=(aX_n +c)\\bmod m$$\n\n其中 $\\bmod m$ 表示前面的数除以 $m$ 的余数。从这个式子可以看出，这个序列的下一个数总是由上一个数生成的。\n\n用这种方法生成的序列具有随机序列的性质，因此这种方法被广泛地使用，包括常用的 C++ 和 Pascal 的产生随机数的库函数使用的也是这种方法。\n\n栋栋知道这样产生的序列具有良好的随机性，不过心急的他仍然想尽快知道 $X_n$ 是多少。由于栋栋需要的随机数是 $0,1,\\dots,g-1$ 之间的，他需要将 $X_n$ 除以 $g$ 取余得到他想要的数，即 $X_n \\bmod g$，你只需要告诉栋栋他想要的数 $X_n \\bmod g$ 是多少就可以了。\n", "inputFormat": "一行 $6$ 个用空格分割的整数 $m,a,c,X_0,n$ 和 $g$，其中 $a,c,X_0$ 是非负整数，$m,n,g$ 是正整数。\n", "outputFormat": "输出一个数，即 $X_n \\bmod g$。\n", "hint": "计算得 $X_n=X_5=8$，故$(X_n \\bmod g) = (8 \\bmod 3) = 2$。\n\n对于 $100\\%$ 的数据，$n,m,a,c,X_0\\leq 10^{18}$，$1\\leq g\\leq 10^8$，$n,m\\geq 1$，$a,c,X_0\\geq 0$。\n", "locale": "zh-CN"}}}
{"pid": "P2045", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 3\n0 2 1\n1 4 2", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["网络流", "费用流"], "title": "方格取数加强版", "background": "", "description": "给出一个 $n\\times n$ 的矩阵,每一格有一个非负整数 $A_{i,j}$（$A_{i,j} \\le 10^3$），现在从 $(1,1)$ 出发，可以往右或者往下走，最后到达 $(n,n)$，每达到一格，把该格子的数取出来，该格子的数就变成 $0$，这样一共走 $K$ 次，现在要求 $K$ 次所达到的方格的数的和最大。", "inputFormat": "第一行两个数 $n,K$（$1 \\le n \\le 50$，$0 \\le K \\le 10$）。\n\n接下来 $n$ 行，每行 $n$ 个数，分别表示矩阵的每个格子的数。", "outputFormat": "一个数，为最大和。\n", "hint": "每个格子中的数不超过 $1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Grid Number Picking - Enhanced", "background": "", "description": "Given an $n \\times n$ matrix. Each cell contains a non-negative integer $A_{i,j}$ ($A_{i,j} \\le 10^3$). Starting from $(1, 1)$, you may move only right or down and finally reach $(n, n)$. Every time you arrive at a cell, you take the number in that cell and the cell’s value becomes $0$. Repeat this walk a total of $K$ times. Find the maximum possible sum of the values collected over the $K$ walks.", "inputFormat": "The first line contains two integers $n, K$ ($1 \\le n \\le 50$, $0 \\le K \\le 10$).\n\nThe next $n$ lines each contain $n$ integers, denoting the value of each cell in the matrix.", "outputFormat": "Output a single integer, the maximum sum.", "hint": "The value in each cell does not exceed $1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方格取数加强版", "background": "", "description": "给出一个 $n\\times n$ 的矩阵,每一格有一个非负整数 $A_{i,j}$（$A_{i,j} \\le 10^3$），现在从 $(1,1)$ 出发，可以往右或者往下走，最后到达 $(n,n)$，每达到一格，把该格子的数取出来，该格子的数就变成 $0$，这样一共走 $K$ 次，现在要求 $K$ 次所达到的方格的数的和最大。", "inputFormat": "第一行两个数 $n,K$（$1 \\le n \\le 50$，$0 \\le K \\le 10$）。\n\n接下来 $n$ 行，每行 $n$ 个数，分别表示矩阵的每个格子的数。", "outputFormat": "一个数，为最大和。\n", "hint": "每个格子中的数不超过 $1000$。", "locale": "zh-CN"}}}
{"pid": "P2046", "type": "P", "difficulty": 6, "samples": [["1\n1\n2\n3\n4\n5\n6\n7\n8", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["图论", "2010", "NOI", "最短路", "最小割"], "title": "[NOI2010] 海拔", "background": "", "description": "YT 市是一个规划良好的城市，城市被东西向和南北向的主干道划分为 $n \\times n$ 个区域。简单起见，可以将 YT 市看作 一个正方形，每一个区域也可看作一个正方形。从而，YT 城市中包括 $(n+1) \\times (n+1)$ 个交叉路口和 $2n \\times (n+1)$ 条双向道路（简称道路），每条双向道路连接主干道上两个相邻的交叉路口。下图为一张 YT 市的地图（$n = 2$），城市被划分为 $2 \\times 2$ 个区域，包括 $3 \\times 3$ 个交叉路口和 $12$ 条双向道路。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1133.png) \n\n小 Z 作为该市的市长，他根据统计信息得到了每天上班高峰期间 YT 市每条道路两个方向的人流量，即在高峰期间沿着该方向通过这条道路的人数。每一个交叉路口都有不同的海拔高度值，YT 市市民认为爬坡是一件非常累的事情，每向上爬 $h$ 的高度，就需要消耗 $h$ 的体力。如果是下坡的话，则不需要耗费体力。因此如果一段道路的终点海拔减去起点海拔的值为 $h$（注意 $h$ 可能是负数），那么一个人经过这段路所消耗的体力是 $\\max\\{0, h\\}$。\n\n小 Z 还测量得到这个城市西北角的交叉路口海拔为 $0$，东南角的交叉路口海拔为 $1$（如上图所示），但其它交叉路口的海拔高度都无法得知。小 Z 想知道在最理想的情况下（即你可以任意假设其他路口的海拔高度），每天上班高峰期间所有人爬坡消耗的总体力和的最小值。", "inputFormat": "第一行包含一个整数 $n$。\n\n接下来 $4n(n + 1)$ 行，每行包含一个非负整数分别表示每一条道路每一个方向的人流量信息。\n\n输入顺序：$n(n + 1)$个数表示所有从西到东方向的人流量，然后 $n(n + 1)$ 个数表示所有从北到南方向的人流量，$n(n + 1)$ 个数表示所有从东到西方向的人流量，最后是 $n(n + 1)$ 个数表示所有从南到北方向的人流量。对于每一个方向，输入顺序按照起点由北向南，若南北方向相同时由西到东的顺序给出（参见样例输入）。", "outputFormat": "仅包含一个数，表示在最理想情况下每天上班高峰期间所有人爬坡所消耗的总体力和（即总体力和的最小值），结果四舍五入到整数。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1134.png) \n\n### 数据范围\n\n- 对于 $20\\%$ 的数据：$n \\leq 3$；\n- 对于 $50\\%$ 的数据：$n \\leq 15$；\n- 对于 $80\\%$ 的数据：$n \\leq 40$；\n- 对于 $100\\%$ 的数据：$1 \\leq n \\leq 500$，$0 \\leq \\text{流量} \\leq 10^6$ 且所有流量均为整数。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Elevation", "background": "", "description": "YT City is a well-planned city divided by the main east–west and north–south roads into $n \\times n$ regions. For simplicity, you can regard YT City as a square, and each region as a square as well. Thus, the city contains $(n+1) \\times (n+1)$ intersections and $2n \\times (n+1)$ bidirectional roads (simply called roads), where each bidirectional road connects two adjacent intersections on the main roads. The figure below shows a map of YT City when $n = 2$, where the city is divided into $2 \\times 2$ regions, containing $3 \\times 3$ intersections and $12$ bidirectional roads.\n\n![](https://cdn.luogu.com.cn/upload/pic/1133.png)\n\nXiao Z, the mayor of the city, obtained the bidirectional traffic flow for each road in both directions during the morning rush hour, i.e., the number of people passing along that direction during the rush hour. Each intersection has an elevation value. YT City residents consider uphill walking tiring: ascending by a height of $h$ consumes $h$ stamina. Going downhill costs no stamina. Therefore, if the endpoint elevation minus the start elevation of a road is $h$ (note that $h$ may be negative), then the stamina consumed by a person traversing that road is $\\max\\{0, h\\}$.\n\nXiao Z also measured that the intersection at the northwest corner has elevation $0$, and the intersection at the southeast corner has elevation $1$ (as shown above), but the elevations of the other intersections are unknown. He wants to know, in the most favorable situation (i.e., you may assign elevations to the other intersections arbitrarily), the minimum possible total stamina spent on climbing by everyone during the morning rush hour.", "inputFormat": "The first line contains an integer $n$.\n\nThen follow $4n(n + 1)$ lines, each containing a non-negative integer representing the traffic flow for one road in one direction.\n\nInput order: first $n(n + 1)$ numbers for all movements from West to East, then $n(n + 1)$ numbers for all movements from North to South, then $n(n + 1)$ numbers for all movements from East to West, and finally $n(n + 1)$ numbers for all movements from South to North. For each direction, the entries are listed by starting intersections ordered from North to South, and when the north–south position is the same, from West to East (see the sample input).", "outputFormat": "Output a single number, the minimum possible total stamina spent on climbing by everyone during the morning rush hour in the most favorable situation, rounded to the nearest integer.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1134.png)\n\n# Constraints\n\n- For $20\\%$ of the testdata: $n \\leq 3$.\n- For $50\\%$ of the testdata: $n \\leq 15$.\n- For $80\\%$ of the testdata: $n \\leq 40$.\n- For $100\\%$ of the testdata: $1 \\leq n \\leq 500$, $0 \\leq \\text{flow} \\leq 10^6$, and all flows are integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 海拔", "background": "", "description": "YT 市是一个规划良好的城市，城市被东西向和南北向的主干道划分为 $n \\times n$ 个区域。简单起见，可以将 YT 市看作 一个正方形，每一个区域也可看作一个正方形。从而，YT 城市中包括 $(n+1) \\times (n+1)$ 个交叉路口和 $2n \\times (n+1)$ 条双向道路（简称道路），每条双向道路连接主干道上两个相邻的交叉路口。下图为一张 YT 市的地图（$n = 2$），城市被划分为 $2 \\times 2$ 个区域，包括 $3 \\times 3$ 个交叉路口和 $12$ 条双向道路。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1133.png) \n\n小 Z 作为该市的市长，他根据统计信息得到了每天上班高峰期间 YT 市每条道路两个方向的人流量，即在高峰期间沿着该方向通过这条道路的人数。每一个交叉路口都有不同的海拔高度值，YT 市市民认为爬坡是一件非常累的事情，每向上爬 $h$ 的高度，就需要消耗 $h$ 的体力。如果是下坡的话，则不需要耗费体力。因此如果一段道路的终点海拔减去起点海拔的值为 $h$（注意 $h$ 可能是负数），那么一个人经过这段路所消耗的体力是 $\\max\\{0, h\\}$。\n\n小 Z 还测量得到这个城市西北角的交叉路口海拔为 $0$，东南角的交叉路口海拔为 $1$（如上图所示），但其它交叉路口的海拔高度都无法得知。小 Z 想知道在最理想的情况下（即你可以任意假设其他路口的海拔高度），每天上班高峰期间所有人爬坡消耗的总体力和的最小值。", "inputFormat": "第一行包含一个整数 $n$。\n\n接下来 $4n(n + 1)$ 行，每行包含一个非负整数分别表示每一条道路每一个方向的人流量信息。\n\n输入顺序：$n(n + 1)$个数表示所有从西到东方向的人流量，然后 $n(n + 1)$ 个数表示所有从北到南方向的人流量，$n(n + 1)$ 个数表示所有从东到西方向的人流量，最后是 $n(n + 1)$ 个数表示所有从南到北方向的人流量。对于每一个方向，输入顺序按照起点由北向南，若南北方向相同时由西到东的顺序给出（参见样例输入）。", "outputFormat": "仅包含一个数，表示在最理想情况下每天上班高峰期间所有人爬坡所消耗的总体力和（即总体力和的最小值），结果四舍五入到整数。\n", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1134.png) \n\n### 数据范围\n\n- 对于 $20\\%$ 的数据：$n \\leq 3$；\n- 对于 $50\\%$ 的数据：$n \\leq 15$；\n- 对于 $80\\%$ 的数据：$n \\leq 40$；\n- 对于 $100\\%$ 的数据：$1 \\leq n \\leq 500$，$0 \\leq \\text{流量} \\leq 10^6$ 且所有流量均为整数。", "locale": "zh-CN"}}}
{"pid": "P2047", "type": "P", "difficulty": 4, "samples": [["4 4\n1 2 1\n2 3 1\n3 4 1\n4 1 1", "1.000\n1.000\n1.000\n1.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2007", "NOI", "最短路"], "title": "[NOI2007] 社交网络", "background": null, "description": "在社交网络（Social Network）的研究中，我们常常使用图论概念去解释一些社会现象。不妨看这样的一个问题：  \n在一个社交圈子里有 $n$ 个人，人与人之间有不同程度的关系。我们将这个关系网络对应到一个 $n$ 个结点的无向图上，两个不同的人若互相认识，则在他们对应的结点之间连接一条无向边，并附上一个正数权值 $c$，$c$ 越小，表示两个人之间的关系越密切。我们可以用对应结点之间的最短路长度来衡量两个人 $s$ 和 $t$ 之间的关系密切程度，注意到最短路径上的其他结点为 $s$ 和 $t$ 的联系提供了某种便利，即这些结点对于 $s$ 和 $t$ 之间的联系有一定的重要程度。我们可以通过统计经过一个结点 $v$ 的最短路径的数目来衡量该结点在社交网络中的重要程度。考虑到两个结点 $A$ 和 $B$ 之间可能会有多条最短路径。我们修改重要程度的定义如下：令 $C_{s,t}$ 表示从 $s$ 到 $t$ 的不同的最短路的数目，$C_{s,t}(v)$ 表示经过 $v$ 从 $s$ 到 $t$ 的最短路的数目；则定义：\n\n$$ I(v)=\\sum_{s \\ne v,t\\ne v} \\frac{C_{s,t}(v)}{C_{s,t}}$$\n\n为结点 $v$ 在社交网络中的重要程度。为了使 $I(v)$ 和 $C_{s,t}(v)$ 有意义，我们规定需要处理的社交网络都是连通的无向图，即任意两个结点之间都有一条有限长度的最短路径。现在给出这样一幅描述社交网络的加权无向图，请你求出每一个结点的重要程度。", "inputFormat": "输入第一行有两个整数 $n$ 和 $m$，表示社交网络中结点和无向边的数目。    \n在无向图中，我们将所有结点从 $1$ 到 $n$ 进行编号。\n\n接下来 $m$ 行，每行用三个整数 $a,b,c$ 描述一条连接结点 $a$ 和 $b$，权值为 $c$ 的无向边。\n注意任意两个结点之间最多有一条无向边相连，无向图中也不会出现自环（即不存在一条无向边的两个端点是相同的结点）。", "outputFormat": "输出包括 $n$ 行，每行一个实数，精确到小数点后 $3$ 位。第 $i$ 行的实数表示结点 $i$ 在社交网络中的重要程度。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1136.png) \n\n对于 $1$ 号结点而言，只有 $2$ 号到 $4$ 号结点和 $4$ 号到 $2$ 号结点的最短路经过 $1$ 号结点，而 $2$号结点和 $4$ 号结点之间的最短路又有 $2$ 条。因而根据定义， $1$ 号结点的重要程度计算为 $\\frac{1}{2}+\\frac{1}{2}=1$。由于图的对称性，其他三个结点的重要程度也都是 $1$。\n\n对于 $50\\%$ 的数据，$n \\le 10,m \\le 45$。     \n对于 $100\\%$ 的数据，$n \\le 100,m \\le 4500$，任意一条边的权值 $c$ 是正整数且 $1 \\leqslant c \\leqslant 1000$。    \n所有数据中保证给出的无向图连通，且任意两个结点之间的最短路径数目不超过 $10^{10}$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2007] Social Network", "background": "", "description": "In the study of social networks (Social Network), we often use graph theory to explain social phenomena. Consider the following problem:  \nThere are $n$ people in a social circle, and the relationships between people have different strengths. We model this relationship network as an undirected graph with $n$ nodes. If two different people know each other, we connect an undirected edge between their corresponding nodes and assign it a positive weight $c$. The smaller $c$ is, the closer their relationship is. We measure the closeness between two people $s$ and $t$ by the length of the shortest path between their corresponding nodes. Note that other nodes on a shortest path provide some convenience for the connection between $s$ and $t$, that is, these nodes have a certain degree of importance for the connection between $s$ and $t$. We can measure a node’s importance in the social network by counting the number of shortest paths that pass through a node $v$. Considering that there may be multiple shortest paths between two nodes $A$ and $B$, we modify the definition of importance as follows: let $C_{s,t}$ denote the number of different shortest paths from $s$ to $t$, and let $C_{s,t}(v)$ denote the number of shortest paths from $s$ to $t$ that pass through $v$. Then define:\n\n$$ I(v)=\\sum_{s \\ne v,t\\ne v} \\frac{C_{s,t}(v)}{C_{s,t}}$$\n\nas the importance of node $v$ in the social network. To make $I(v)$ and $C_{s,t}(v)$ meaningful, we stipulate that the social networks to be processed are connected undirected graphs, i.e., there is a shortest path of finite length between any two nodes. Given such a weighted undirected graph describing a social network, please compute the importance of each node.\n\nConstraints:\n- For $50\\%$ of the testdata, $n \\le 10, m \\le 45$.\n- For $100\\%$ of the testdata, $n \\le 100, m \\le 4500$, each edge weight $c$ is a positive integer and $1 \\leqslant c \\leqslant 1000$.\n- The graph is guaranteed to be connected, and the number of shortest paths between any two nodes does not exceed $10^{10}$.", "inputFormat": "The first line contains two integers $n$ and $m$, the number of nodes and undirected edges in the social network.  \nIn the undirected graph, all nodes are numbered from $1$ to $n$.\n\nEach of the next $m$ lines contains three integers $a, b, c$ describing an undirected edge connecting nodes $a$ and $b$ with weight $c$.  \nNote that there is at most one undirected edge between any two nodes, and there are no self-loops in the undirected graph (that is, there is no undirected edge whose two endpoints are the same node).", "outputFormat": "Output $n$ lines, each containing a real number rounded to $3$ decimal places. The real number on the $i$-th line represents the importance of node $i$ in the social network.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1136.png)\n\nFor node $1$, only the shortest paths from node $2$ to node $4$ and from node $4$ to node $2$ pass through node $1$. Moreover, there are $2$ shortest paths between node $2$ and node $4$. Therefore, by the definition, the importance of node $1$ is $\\frac{1}{2}+\\frac{1}{2}=1$. Due to the symmetry of the graph, the importance of the other three nodes is also $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2007] 社交网络", "background": null, "description": "在社交网络（Social Network）的研究中，我们常常使用图论概念去解释一些社会现象。不妨看这样的一个问题：  \n在一个社交圈子里有 $n$ 个人，人与人之间有不同程度的关系。我们将这个关系网络对应到一个 $n$ 个结点的无向图上，两个不同的人若互相认识，则在他们对应的结点之间连接一条无向边，并附上一个正数权值 $c$，$c$ 越小，表示两个人之间的关系越密切。我们可以用对应结点之间的最短路长度来衡量两个人 $s$ 和 $t$ 之间的关系密切程度，注意到最短路径上的其他结点为 $s$ 和 $t$ 的联系提供了某种便利，即这些结点对于 $s$ 和 $t$ 之间的联系有一定的重要程度。我们可以通过统计经过一个结点 $v$ 的最短路径的数目来衡量该结点在社交网络中的重要程度。考虑到两个结点 $A$ 和 $B$ 之间可能会有多条最短路径。我们修改重要程度的定义如下：令 $C_{s,t}$ 表示从 $s$ 到 $t$ 的不同的最短路的数目，$C_{s,t}(v)$ 表示经过 $v$ 从 $s$ 到 $t$ 的最短路的数目；则定义：\n\n$$ I(v)=\\sum_{s \\ne v,t\\ne v} \\frac{C_{s,t}(v)}{C_{s,t}}$$\n\n为结点 $v$ 在社交网络中的重要程度。为了使 $I(v)$ 和 $C_{s,t}(v)$ 有意义，我们规定需要处理的社交网络都是连通的无向图，即任意两个结点之间都有一条有限长度的最短路径。现在给出这样一幅描述社交网络的加权无向图，请你求出每一个结点的重要程度。", "inputFormat": "输入第一行有两个整数 $n$ 和 $m$，表示社交网络中结点和无向边的数目。    \n在无向图中，我们将所有结点从 $1$ 到 $n$ 进行编号。\n\n接下来 $m$ 行，每行用三个整数 $a,b,c$ 描述一条连接结点 $a$ 和 $b$，权值为 $c$ 的无向边。\n注意任意两个结点之间最多有一条无向边相连，无向图中也不会出现自环（即不存在一条无向边的两个端点是相同的结点）。", "outputFormat": "输出包括 $n$ 行，每行一个实数，精确到小数点后 $3$ 位。第 $i$ 行的实数表示结点 $i$ 在社交网络中的重要程度。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1136.png) \n\n对于 $1$ 号结点而言，只有 $2$ 号到 $4$ 号结点和 $4$ 号到 $2$ 号结点的最短路经过 $1$ 号结点，而 $2$号结点和 $4$ 号结点之间的最短路又有 $2$ 条。因而根据定义， $1$ 号结点的重要程度计算为 $\\frac{1}{2}+\\frac{1}{2}=1$。由于图的对称性，其他三个结点的重要程度也都是 $1$。\n\n对于 $50\\%$ 的数据，$n \\le 10,m \\le 45$。     \n对于 $100\\%$ 的数据，$n \\le 100,m \\le 4500$，任意一条边的权值 $c$ 是正整数且 $1 \\leqslant c \\leqslant 1000$。    \n所有数据中保证给出的无向图连通，且任意两个结点之间的最短路径数目不超过 $10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P2048", "type": "P", "difficulty": 6, "samples": [["4 3 2 3\n3\n2\n-6\n8", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2010", "堆", "NOI", "O2优化", "前缀和", "ST 表"], "title": "[NOI2010] 超级钢琴", "background": "", "description": "小 Z 是一个小有名气的钢琴家，最近 C 博士送给了小 Z 一架超级钢琴，小 Z 希望能够用这架钢琴创作出世界上最美妙的音乐。\n\n这架超级钢琴可以弹奏出 $n$ 个音符，编号为 $1$ 至 $n$。第 $i$ 个音符的美妙度为 $A_i$，其中 $A_i$ 可正可负。\n\n一个“超级和弦”由若干个编号连续的音符组成，包含的音符个数不少于 $L$ 且不多于 $R$。我们定义超级和弦的美妙度为其包含的所有音符的美妙度之和。两个超级和弦被认为是相同的，当且仅当这两个超级和弦所包含的音符集合是相同的。\n\n小 Z 决定创作一首由 $k$ 个超级和弦组成的乐曲，为了使得乐曲更加动听，小 Z 要求该乐曲由 $k$ 个不同的超级和弦组成。我们定义一首乐曲的美妙度为其所包含的所有超级和弦的美妙度之和。小 Z 想知道他能够创作出来的乐曲美妙度最大值是多少。", "inputFormat": "输入第一行包含四个正整数 $n, k, L, R$。其中 $n$ 为音符的个数，$k$ 为乐曲所包含的超级和弦个数，$L$ 和 $R$ 分别是超级和弦所包含音符个数的下限和上限。\n\n接下来 $n$ 行，每行包含一个整数 $A_i$，表示按编号从小到大每个音符的美妙度。", "outputFormat": "输出只有一个整数，表示乐曲美妙度的最大值。\n", "hint": "### 样例解释\n\n共有 $5$ 种不同的超级和弦：\n\n1. 音符 $1 \\sim 2$，美妙度为 $3+2=5$；\n2. 音符 $2 \\sim 3$，美妙度为 $2+(-6)=-4$；\n3. 音符 $3 \\sim 4$，美妙度为 $(-6)+8=2$；\n4. 音符 $1 \\sim 3$，美妙度为 $3+2+(-6)=-1$；\n5. 音符 $2 \\sim 4$，美妙度为 $2+(-6)+8=4$。\n\n最优方案为：乐曲由和弦 $1,3,5$ 组成，美妙度为 $5+2+4=11$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2609.png) \n\n所有数据满足：$-1000 \\leq A_i \\leq 1000$，$1 \\leq L \\leq R \\leq n$ 且保证一定存在满足要求的乐曲。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Super Piano", "background": "", "description": "Xiao Z is a well-known pianist. Recently, Dr. C gave Xiao Z a super piano, and Xiao Z hopes to use it to create the most beautiful music in the world.\n\nThis super piano can play $n$ notes, indexed from $1$ to $n$. The beauty value of the $i$-th note is $A_i$, where $A_i$ can be positive or negative.\n\nA “super chord” consists of several consecutive notes, with the number of included notes no less than $L$ and no more than $R$. We define the beauty of a super chord as the sum of the beauty values of all notes it contains. Two super chords are considered the same if and only if the sets of notes they contain are identical.\n\nXiao Z decides to compose a piece consisting of $k$ super chords. To make the piece more pleasing, the $k$ super chords must be different. We define the beauty of a piece as the sum of the beauties of all its super chords. Xiao Z wants to know the maximum possible beauty of such a piece.\n\nAll testdata satisfy: $-1000 \\leq A_i \\leq 1000$, $1 \\leq L \\leq R \\leq n$, and it is guaranteed that there exists a valid piece that meets the requirements.", "inputFormat": "The first line contains four positive integers $n, k, L, R$, where $n$ is the number of notes, $k$ is the number of super chords in the piece, and $L$ and $R$ are the lower and upper bounds on the number of notes a super chord can contain, respectively.\n\nThe next $n$ lines each contain an integer $A_i$, representing the beauty value of each note in increasing index order.", "outputFormat": "Output a single integer, the maximum possible beauty of the piece.", "hint": "### Sample Explanation\n\nThere are $5$ different super chords:\n\n1. Notes $1 \\sim 2$, beauty $3+2=5$.\n2. Notes $2 \\sim 3$, beauty $2+(-6)=-4$.\n3. Notes $3 \\sim 4$, beauty $(-6)+8=2$.\n4. Notes $1 \\sim 3$, beauty $3+2+(-6)=-1$.\n5. Notes $2 \\sim 4$, beauty $2+(-6)+8=4$.\n\nThe optimal plan is: the piece consists of chords $1, 3, 5$, with total beauty $5+2+4=11$.\n\n ![](https://cdn.luogu.com.cn/upload/pic/2609.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 超级钢琴", "background": "", "description": "小 Z 是一个小有名气的钢琴家，最近 C 博士送给了小 Z 一架超级钢琴，小 Z 希望能够用这架钢琴创作出世界上最美妙的音乐。\n\n这架超级钢琴可以弹奏出 $n$ 个音符，编号为 $1$ 至 $n$。第 $i$ 个音符的美妙度为 $A_i$，其中 $A_i$ 可正可负。\n\n一个“超级和弦”由若干个编号连续的音符组成，包含的音符个数不少于 $L$ 且不多于 $R$。我们定义超级和弦的美妙度为其包含的所有音符的美妙度之和。两个超级和弦被认为是相同的，当且仅当这两个超级和弦所包含的音符集合是相同的。\n\n小 Z 决定创作一首由 $k$ 个超级和弦组成的乐曲，为了使得乐曲更加动听，小 Z 要求该乐曲由 $k$ 个不同的超级和弦组成。我们定义一首乐曲的美妙度为其所包含的所有超级和弦的美妙度之和。小 Z 想知道他能够创作出来的乐曲美妙度最大值是多少。", "inputFormat": "输入第一行包含四个正整数 $n, k, L, R$。其中 $n$ 为音符的个数，$k$ 为乐曲所包含的超级和弦个数，$L$ 和 $R$ 分别是超级和弦所包含音符个数的下限和上限。\n\n接下来 $n$ 行，每行包含一个整数 $A_i$，表示按编号从小到大每个音符的美妙度。", "outputFormat": "输出只有一个整数，表示乐曲美妙度的最大值。\n", "hint": "### 样例解释\n\n共有 $5$ 种不同的超级和弦：\n\n1. 音符 $1 \\sim 2$，美妙度为 $3+2=5$；\n2. 音符 $2 \\sim 3$，美妙度为 $2+(-6)=-4$；\n3. 音符 $3 \\sim 4$，美妙度为 $(-6)+8=2$；\n4. 音符 $1 \\sim 3$，美妙度为 $3+2+(-6)=-1$；\n5. 音符 $2 \\sim 4$，美妙度为 $2+(-6)+8=4$。\n\n最优方案为：乐曲由和弦 $1,3,5$ 组成，美妙度为 $5+2+4=11$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2609.png) \n\n所有数据满足：$-1000 \\leq A_i \\leq 1000$，$1 \\leq L \\leq R \\leq n$ 且保证一定存在满足要求的乐曲。\n", "locale": "zh-CN"}}}
{"pid": "P2049", "type": "P", "difficulty": 3, "samples": [["2 3 5\n3 4 4\n5 6 6\n", "3\n0 2 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "枚举", "背包 DP"], "title": "魔术棋子", "background": "", "description": "在一个 $M \\times N$ 的魔术棋盘中，每个格子中均有一个整数，当棋子走进这个格子中，则此棋子上的数会被乘以此格子中的数。一个棋子从左上角走到右下角，只能向右或向下行动，请问此棋子走到右下角后，模（mod）$K$ 可以为几？\n\n如以下 $2 \\times 3$ 棋盘：\n\n```\n3    4    4\n5    6    6\n```\n棋子初始数为 $1$，开始从左上角进入棋盘，走到右下角，上图中，最后棋子上的数可能为 $288,432$ 或 $540$。所以当 $K = 5$ 时，可求得最后的结果为：$0,2,3$。\n", "inputFormat": "第一行为三个数，分别为 $M,N,K (1 \\leq M,N,K \\leq 100)$。以下 $M$ 行，每行 $N$ 个数，分别为此方阵中的数。\n", "outputFormat": "第一行为可能的结果个数。\n\n第二行为所有可能的结果（按升序输出）。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Magic Chess Piece", "background": "", "description": "In an $M \\times N$ magic chessboard, each cell contains an integer. When a chess piece steps into a cell, the number on the piece is multiplied by the number in that cell. A chess piece moves from the top-left corner to the bottom-right corner, and it can only move right or down. After it reaches the bottom-right corner, what values modulo $K$ can the number on the piece be?\n\nFor the following $2 \\times 3$ board:\n\n```\n3    4    4\n5    6    6\n```\nThe piece starts with the number $1$, enters the board from the top-left, and moves to the bottom-right. In the example above, the final number on the piece can be $288, 432$, or $540$. Therefore, when $K = 5$, the final possible results are: $0, 2, 3$.", "inputFormat": "The first line contains three integers, $M,N,K (1 \\leq M,N,K \\leq 100)$. The next $M$ lines each contain $N$ integers, representing the numbers in the matrix.", "outputFormat": "The first line contains the count of possible results.\n\nThe second line contains all possible results in ascending order.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "魔术棋子", "background": "", "description": "在一个 $M \\times N$ 的魔术棋盘中，每个格子中均有一个整数，当棋子走进这个格子中，则此棋子上的数会被乘以此格子中的数。一个棋子从左上角走到右下角，只能向右或向下行动，请问此棋子走到右下角后，模（mod）$K$ 可以为几？\n\n如以下 $2 \\times 3$ 棋盘：\n\n```\n3    4    4\n5    6    6\n```\n棋子初始数为 $1$，开始从左上角进入棋盘，走到右下角，上图中，最后棋子上的数可能为 $288,432$ 或 $540$。所以当 $K = 5$ 时，可求得最后的结果为：$0,2,3$。\n", "inputFormat": "第一行为三个数，分别为 $M,N,K (1 \\leq M,N,K \\leq 100)$。以下 $M$ 行，每行 $N$ 个数，分别为此方阵中的数。\n", "outputFormat": "第一行为可能的结果个数。\n\n第二行为所有可能的结果（按升序输出）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2050", "type": "P", "difficulty": 6, "samples": [["3 2 \n3 1 1 \n5 7 \n3 6 \n8 9", "47"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2012", "NOI", "网络流", "费用流"], "title": "[NOI2012] 美食节", "background": "", "description": "CZ 市为了欢迎全国各地的同学，特地举办了一场盛大的美食节。\n\n作为一个喜欢尝鲜的美食客，小 M 自然不愿意错过这场盛宴。他很快就尝遍了美食节所有的美食。然而，尝鲜的欲望是难以满足的。尽管所有的菜品都很可口，厨师做菜的速度也很快，小 M 仍然觉得自己桌上没有已经摆在别人餐桌上的美食是一件无法忍受的事情。于是小 M 开始研究起了做菜顺序的问题，即安排一个做菜的顺序使得同学们的等待时间最短。\n\n小 M 发现，美食节共有 $n$ 种不同的菜品。每次点餐，每个同学可以选择其中的**一个菜品**。总共有 $m$ 个厨师来制作这些菜品。当所有的同学点餐结束后，菜品的制作任务就会分配给每个厨师。然后每个厨师就会同时开始做菜。**厨师们会按照要求的顺序进行制作，并且每次只能制作一人份**。\n\n此外，小 M 还发现了另一件有意思的事情——虽然这 $m$ 个厨师都会制作全部的 $n$ 种菜品，但**对于同一菜品，不同厨师的制作时间未必相同**。他将菜品用 $1, 2, \\ldots, n$ 依次编号，厨师用 $1, 2, \\ldots, m$ 依次编号，将第 $j$ 个厨师制作第 $i$ 种菜品的时间记为 $t_{i,j}$。\n\n小 M 认为：每个同学的等待时间为**所有厨师开始做菜起，到自己那份菜品完成为止**的时间总长度。换句话说，如果一个同学点的菜是某个厨师做的第 $k$ 道菜，则他的等待时间就是这个厨师制作前 $k$ 道菜的时间之和。而**总等待时间**为**所有同学的等待时间之和**。\n\n现在，小 M 找到了所有同学的点菜信息——有 $p_i$ 个同学点了第 $i$ 种菜品（$i=1, 2, \\ldots, n$）。他想知道的是最小的总等待时间是多少。\n", "inputFormat": "输入文件的第 $1$ 行包含两个正整数 $n$ 和 $m$，表示菜品的种数和厨师的数量。\n\n第 $2$ 行包含 $n$ 个正整数，其中第 $i$ 个数为 $p_i$，表示点第 $i$ 种菜品的人数。\n\n接下来有 $n$ 行，每行包含 $m$ 个非负整数，这 $n$ 行中的第 $i$ 行的第 $j$ 个数为 $t_{i,j}$，表示第 $j$ 个厨师制作第 $i$ 种菜品所需的时间。\n\n输入文件中每行相邻的两个数之间均由一个空格隔开，行末均没有多余空格。\n", "outputFormat": "输出仅一行包含一个整数，为总等待时间的最小值。\n", "hint": "厨师 $1$ 先制作 $1$ 份菜品 $2$，再制作 $2$ 份菜品 $1$。点这 $3$ 道菜的 $3$ 个同学的等待时间分别为 $3$，$3+5=8$，$3+5+5=13$。\n\n厨师 $2$ 先制作 $1$ 份菜品 $1$，再制作 $1$ 份菜品 $3$。点这 $2$ 道菜的 $2$ 个同学的等待时间分别为 $7$，$7+9=16$。\n\n总等待时间为 $3+8+13+7+16=47$。\n\n虽然菜品 $1$ 和菜品 $3$ 由厨师 $1$ 制作更快，如果这些菜品都由厨师 $1$ 制作，总等待时间反而更长。如果按上述的做法，将 $1$ 份菜品 $1$ 和 $1$ 份菜品 $3$ 调整到厨师 $2$ 制作，这样厨师 $2$ 不会闲着，总等待时间更短。\n\n可以证明，没有更优的点餐方案。\n\n每组数据的 $n,m$ 和 $p$ 值如下：  \n\n|测试点编号| $n$| $m$| $p$|   \n|:------:|:----:|:----:|:----:|    \n|$1$|$n = 5$| $m = 5$| $p = 10$|   \n|$2$| $n = 40$| $m = 1$ |$p = 400$ |  \n|$3$| $n = 40$| $m = 2$ |$p = 300$ |\n|$4$| $n = 40$| $m = 40$| $p = 40$ |\n|$5$| $n = 5$| $m = 40$| $p = 100$ |\n|$6$| $n = 10$| $m = 50$| $p = 200$ |\n|$7$| $n = 20$| $m = 60$| $p = 400$ |\n|$8$| $n = 40$| $m = 80$| $p = 600$ |\n|$9$| $n = 40$| $m = 100$| $p = 800$ |\n|$10$| $n = 40$| $m = 100$| $p = 800$ |\n\n\n对于 $100\\%$ 的数据，$n \\leq 40$，$m\\leq 100$，$p\\leq 800$，$t_{i,j}\\leq 1000$（其中 $p = \\sum p_i$）。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2012] Food Festival", "background": "", "description": "To welcome students from all over the country, CZ City is hosting a grand food festival.\n\nAs a foodie who loves trying new things, Xiao M would not miss this feast. He quickly tasted all the foods at the festival. However, the desire to try new dishes is hard to satisfy. Although all dishes are delicious and the chefs cook fast, Xiao M still feels it is unbearable if there is no dish on his table that has already appeared on someone else’s table. So he begins to study the problem of cooking order, that is, arranging a cooking sequence so that the students’ waiting time is minimized.\n\nXiao M finds that there are $n$ different types of dishes. Each time they order, each student may choose exactly one dish. There are $m$ chefs to prepare these dishes. After all students finish ordering, the dish-making tasks are assigned to the chefs. Then all chefs start cooking simultaneously. The chefs follow the required sequence and can cook only one serving at a time.\n\nIn addition, Xiao M finds another interesting fact — although the $m$ chefs can all make all $n$ types of dishes, for the same dish, different chefs may take different amounts of time. He numbers the dishes $1, 2, \\ldots, n$ and the chefs $1, 2, \\ldots, m$, and lets $t_{i,j}$ be the time for chef $j$ to make dish $i$.\n\nXiao M defines the waiting time of each student as the duration from when all chefs start cooking until that student’s serving is completed. In other words, if a student’s dish is the $k$-th dish made by some chef, then the student’s waiting time is the sum of the times of that chef’s first $k$ dishes. The total waiting time is the sum of all students’ waiting times.\n\nNow Xiao M knows all the ordering information — there are $p_i$ students who ordered dish $i$ for $i = 1, 2, \\ldots, n$. He wants to know the minimum possible total waiting time.", "inputFormat": "The first line contains two positive integers $n$ and $m$, the number of dish types and the number of chefs.\n\nThe second line contains $n$ positive integers; the $i$-th number is $p_i$, the number of students who ordered dish $i$.\n\nThen there are $n$ lines, each containing $m$ non-negative integers. In these $n$ lines, the $j$-th number on the $i$-th line is $t_{i,j}$, the time needed for chef $j$ to make dish $i$.\n\nIn the input file, adjacent numbers on each line are separated by a single space, and there are no extra spaces at the end of any line.", "outputFormat": "Output a single line containing one integer: the minimum total waiting time.", "hint": "Chef $1$ first makes $1$ serving of dish $2$, then makes $2$ servings of dish $1$. The waiting times of the $3$ students who ordered these $3$ servings are $3$, $3+5=8$, and $3+5+5=13$.\n\nChef $2$ first makes $1$ serving of dish $1$, then makes $1$ serving of dish $3$. The waiting times of the $2$ students who ordered these $2$ servings are $7$ and $7+9=16$.\n\nThe total waiting time is $3+8+13+7+16=47$.\n\nAlthough dishes $1$ and $3$ are faster if made by chef $1$, the total waiting time would be longer if all these dishes were made by chef $1$. If, as above, we reassign $1$ serving of dish $1$ and $1$ serving of dish $3$ to chef $2$, then chef $2$ will not be idle, and the total waiting time is shorter.\n\nIt can be proved that there is no better ordering and assignment.\n\nFor each test set, the values of $n$, $m$, and $p$ are as follows:\n- Test point $1$: $n = 5$, $m = 5$, $p = 10$.\n- Test point $2$: $n = 40$, $m = 1$, $p = 400$.\n- Test point $3$: $n = 40$, $m = 2$, $p = 300$.\n- Test point $4$: $n = 40$, $m = 40$, $p = 40$.\n- Test point $5$: $n = 5$, $m = 40$, $p = 100$.\n- Test point $6$: $n = 10$, $m = 50$, $p = 200$.\n- Test point $7$: $n = 20$, $m = 60$, $p = 400$.\n- Test point $8$: $n = 40$, $m = 80$, $p = 600$.\n- Test point $9$: $n = 40$, $m = 100$, $p = 800$.\n- Test point $10$: $n = 40$, $m = 100$, $p = 800$.\n\nConstraints for $100\\%$ of the testdata: $n \\leq 40$, $m \\leq 100$, $p \\leq 800$, $t_{i,j} \\leq 1000$ (where $p = \\sum p_i$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2012] 美食节", "background": "", "description": "CZ 市为了欢迎全国各地的同学，特地举办了一场盛大的美食节。\n\n作为一个喜欢尝鲜的美食客，小 M 自然不愿意错过这场盛宴。他很快就尝遍了美食节所有的美食。然而，尝鲜的欲望是难以满足的。尽管所有的菜品都很可口，厨师做菜的速度也很快，小 M 仍然觉得自己桌上没有已经摆在别人餐桌上的美食是一件无法忍受的事情。于是小 M 开始研究起了做菜顺序的问题，即安排一个做菜的顺序使得同学们的等待时间最短。\n\n小 M 发现，美食节共有 $n$ 种不同的菜品。每次点餐，每个同学可以选择其中的**一个菜品**。总共有 $m$ 个厨师来制作这些菜品。当所有的同学点餐结束后，菜品的制作任务就会分配给每个厨师。然后每个厨师就会同时开始做菜。**厨师们会按照要求的顺序进行制作，并且每次只能制作一人份**。\n\n此外，小 M 还发现了另一件有意思的事情——虽然这 $m$ 个厨师都会制作全部的 $n$ 种菜品，但**对于同一菜品，不同厨师的制作时间未必相同**。他将菜品用 $1, 2, \\ldots, n$ 依次编号，厨师用 $1, 2, \\ldots, m$ 依次编号，将第 $j$ 个厨师制作第 $i$ 种菜品的时间记为 $t_{i,j}$。\n\n小 M 认为：每个同学的等待时间为**所有厨师开始做菜起，到自己那份菜品完成为止**的时间总长度。换句话说，如果一个同学点的菜是某个厨师做的第 $k$ 道菜，则他的等待时间就是这个厨师制作前 $k$ 道菜的时间之和。而**总等待时间**为**所有同学的等待时间之和**。\n\n现在，小 M 找到了所有同学的点菜信息——有 $p_i$ 个同学点了第 $i$ 种菜品（$i=1, 2, \\ldots, n$）。他想知道的是最小的总等待时间是多少。\n", "inputFormat": "输入文件的第 $1$ 行包含两个正整数 $n$ 和 $m$，表示菜品的种数和厨师的数量。\n\n第 $2$ 行包含 $n$ 个正整数，其中第 $i$ 个数为 $p_i$，表示点第 $i$ 种菜品的人数。\n\n接下来有 $n$ 行，每行包含 $m$ 个非负整数，这 $n$ 行中的第 $i$ 行的第 $j$ 个数为 $t_{i,j}$，表示第 $j$ 个厨师制作第 $i$ 种菜品所需的时间。\n\n输入文件中每行相邻的两个数之间均由一个空格隔开，行末均没有多余空格。\n", "outputFormat": "输出仅一行包含一个整数，为总等待时间的最小值。\n", "hint": "厨师 $1$ 先制作 $1$ 份菜品 $2$，再制作 $2$ 份菜品 $1$。点这 $3$ 道菜的 $3$ 个同学的等待时间分别为 $3$，$3+5=8$，$3+5+5=13$。\n\n厨师 $2$ 先制作 $1$ 份菜品 $1$，再制作 $1$ 份菜品 $3$。点这 $2$ 道菜的 $2$ 个同学的等待时间分别为 $7$，$7+9=16$。\n\n总等待时间为 $3+8+13+7+16=47$。\n\n虽然菜品 $1$ 和菜品 $3$ 由厨师 $1$ 制作更快，如果这些菜品都由厨师 $1$ 制作，总等待时间反而更长。如果按上述的做法，将 $1$ 份菜品 $1$ 和 $1$ 份菜品 $3$ 调整到厨师 $2$ 制作，这样厨师 $2$ 不会闲着，总等待时间更短。\n\n可以证明，没有更优的点餐方案。\n\n每组数据的 $n,m$ 和 $p$ 值如下：  \n\n|测试点编号| $n$| $m$| $p$|   \n|:------:|:----:|:----:|:----:|    \n|$1$|$n = 5$| $m = 5$| $p = 10$|   \n|$2$| $n = 40$| $m = 1$ |$p = 400$ |  \n|$3$| $n = 40$| $m = 2$ |$p = 300$ |\n|$4$| $n = 40$| $m = 40$| $p = 40$ |\n|$5$| $n = 5$| $m = 40$| $p = 100$ |\n|$6$| $n = 10$| $m = 50$| $p = 200$ |\n|$7$| $n = 20$| $m = 60$| $p = 400$ |\n|$8$| $n = 40$| $m = 80$| $p = 600$ |\n|$9$| $n = 40$| $m = 100$| $p = 800$ |\n|$10$| $n = 40$| $m = 100$| $p = 800$ |\n\n\n对于 $100\\%$ 的数据，$n \\leq 40$，$m\\leq 100$，$p\\leq 800$，$t_{i,j}\\leq 1000$（其中 $p = \\sum p_i$）。\n", "locale": "zh-CN"}}}
{"pid": "P2051", "type": "P", "difficulty": 5, "samples": [["1 3", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2009", "各省省选", "安徽"], "title": "[AHOI2009] 中国象棋", "background": "", "description": "这次小可可想解决的难题和中国象棋有关，在一个 $n$ 行 $m$ 列的棋盘上，让你放若干个炮（可以是 $0$ 个），使得没有一个炮可以攻击到另一个炮，请问有多少种放置方法。大家肯定很清楚，在中国象棋中炮的行走方式是：一个炮攻击到另一个炮，当且仅当它们在同一行或同一列中，且它们之间恰好 有一个棋子。你也来和小可可一起锻炼一下思维吧！\n", "inputFormat": "一行包含两个整数 $n,m$，之间由一个空格隔开。\n", "outputFormat": "总共的方案数，由于该值可能很大，只需给出方案数模 $9999973$ 的结果。\n", "hint": "\n**样例说明**\n\n除了 $3$ 个格子里都塞满了炮以外，其它方案都是可行的，所以一共有 $2 \\times 2 \\times 2-1=7$ 种方案。\n\n**数据规模与约定**\n\n- 对于 $30\\%$ 的数据，$n$ 和 $m$ 均不超过 $6$。\n- 对于 $50\\%$ 的数据，$n$ 和 $m$ 至少有一个数不超过 $8$。\n- 对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 100$。\n\n题面修改：@syksykCCC。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2009] Chinese Chess", "background": "", "description": "This time, Xiao Keke wants to solve a problem related to Chinese chess. On an $n$ row by $m$ column board, place any number of cannons (possibly $0$) so that no cannon can attack another. How many placement methods are there? As you surely know, in Chinese chess the cannon’s attack rule is: one cannon attacks another if and only if they are in the same row or the same column, and there is exactly one piece between them. Come exercise your thinking with Xiao Keke!", "inputFormat": "One line contains two integers $n, m$, separated by a space.", "outputFormat": "Output the total number of valid placements. Since this number can be large, output the result modulo $9999973$.", "hint": "**Sample Explanation**\n\nExcept for the configuration where all $3$ cells are filled with cannons, all other configurations are valid, so there are $2 \\times 2 \\times 2-1=7$ valid configurations.\n\n**Constraints**\n\n- For $30\\%$ of the testdata, $n$ and $m$ do not exceed $6$.\n- For $50\\%$ of the testdata, at least one of $n$ and $m$ does not exceed $8$.\n- For $100\\%$ of the testdata, $1 \\leq n, m \\leq 100$.\n\nProblem statement updated by: @syksykCCC.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2009] 中国象棋", "background": "", "description": "这次小可可想解决的难题和中国象棋有关，在一个 $n$ 行 $m$ 列的棋盘上，让你放若干个炮（可以是 $0$ 个），使得没有一个炮可以攻击到另一个炮，请问有多少种放置方法。大家肯定很清楚，在中国象棋中炮的行走方式是：一个炮攻击到另一个炮，当且仅当它们在同一行或同一列中，且它们之间恰好 有一个棋子。你也来和小可可一起锻炼一下思维吧！\n", "inputFormat": "一行包含两个整数 $n,m$，之间由一个空格隔开。\n", "outputFormat": "总共的方案数，由于该值可能很大，只需给出方案数模 $9999973$ 的结果。\n", "hint": "\n**样例说明**\n\n除了 $3$ 个格子里都塞满了炮以外，其它方案都是可行的，所以一共有 $2 \\times 2 \\times 2-1=7$ 种方案。\n\n**数据规模与约定**\n\n- 对于 $30\\%$ 的数据，$n$ 和 $m$ 均不超过 $6$。\n- 对于 $50\\%$ 的数据，$n$ 和 $m$ 至少有一个数不超过 $8$。\n- 对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 100$。\n\n题面修改：@syksykCCC。", "locale": "zh-CN"}}}
{"pid": "P2052", "type": "P", "difficulty": 3, "samples": [["6\n1 2 1\n1 3 1\n1 4 2\n6 3 1\n5 2 1", "20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["树形数据结构", "2011", "NOI", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[NOI2011] 道路修建", "background": null, "description": "在 W 星球上有 $n$ 个国家。为了各自国家的经济发展，他们决定在各个国家之间建设双向道路使得国家之间连通。但是每个国家的国王都很吝啬，他们只愿意修建恰好 $n - 1$ 条双向道路。\n\n每条道路的修建都要付出一定的费用，这个费用等于道路长度乘以道路两端 的国家个数之差的绝对值。例如，在下图中，虚线所示道路两端分别有 $2$ 个、$4$ 个国家，如果该道路长度为 $1$，则费用为 $1×|2 - 4|=2$。图中圆圈里的数字表示国家的编号。\n \n![](https://cdn.luogu.com.cn/upload/pic/2604.png) \n\n由于国家的数量十分庞大，道路的建造方案有很多种，同时每种方案的修建费用难以用人工计算，国王们决定找人设计一个软件，对于给定的建造方案，计算出所需要的费用。请你帮助国王们设计一个这样的软件。", "inputFormat": "输入的第一行包含一个整数 $n$，表示 W 星球上的国家的数量，国家从 $1$ 到 $n$ 编号。\n\n接下来 $n - 1$ 行描述道路建设情况，其中第 $i$ 行包含三个整数 $a_i$，$b_i$ 和 $c_i$，表示第 $i$ 条双向道路修建在 $a_i$ 与 $b_i$ 两个国家之间，长度为 $c_i$。", "outputFormat": "输出一个整数，表示修建所有道路所需要的总费用。", "hint": "对于 $100\\%$ 的数据，$1\\leq a_i, b_i\\leq n$，$0\\leq c_i\\leq10^6$，$2\\leq n\\leq 10^6$。\n|测试点编号|$n=$|\n|:-:|:-:|\n|$1$|$2$|\n|$2$|$10$|\n|$3$|$100$|\n|$4$|$200$|\n|$5$|$500$|\n|$6$|$600$|\n|$7$|$800$|\n|$8$|$1000$|\n|$9$|$10^4$|\n|$10$|$2\\times 10^4$|\n|$11$|$5\\times 10^4$|\n|$12$|$6\\times 10^4$|\n|$13$|$8\\times 10^4$|\n|$14$|$10^5$|\n|$15$|$6\\times 10^5$|\n|$16$|$7\\times 10^5$|\n|$17$|$8\\times 10^5$|\n|$18$|$9\\times 10^5$|\n|$19,20$|$10^6$|", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2011] Road Construction", "background": "", "description": "There are $n$ countries on planet W. To develop their economies, they decide to build bidirectional roads between countries so that all countries are connected. However, each king is stingy and they are only willing to build exactly $n - 1$ bidirectional roads.\n\nBuilding each road costs an amount equal to the road length multiplied by the absolute difference between the numbers of countries on the two sides of this road (i.e., after removing this road, in the two resulting connected components). For example, in the figure below, the dashed road has $2$ and $4$ countries on its two sides. If its length is $1$, then the cost is $1 \\times |2 - 4| = 2$. The numbers inside the circles in the figure represent country indices.\n \n![](https://cdn.luogu.com.cn/upload/pic/2604.png) \n\nBecause the number of countries is very large, there are many construction schemes, and the cost of each scheme is difficult to compute by hand. The kings decide to commission software that, for a given construction scheme, computes the required total cost. Please help design such software.", "inputFormat": "The first line contains an integer $n$, the number of countries on planet W. The countries are numbered from $1$ to $n$.\n\nThe next $n - 1$ lines describe the road network. The $i$-th line contains three integers $a_i$, $b_i$, and $c_i$, indicating that the $i$-th bidirectional road is built between countries $a_i$ and $b_i$, with length $c_i$.", "outputFormat": "Output a single integer, the total cost required to build all the roads.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\leq a_i, b_i \\leq n$, $0 \\leq c_i \\leq 10^6$, $2 \\leq n \\leq 10^6$.\n\n|Test point ID|$n=$|\n|:-:|:-:|\n|$1$|$2$|\n|$2$|$10$|\n|$3$|$100$|\n|$4$|$200$|\n|$5$|$500$|\n|$6$|$600$|\n|$7$|$800$|\n|$8$|$1000$|\n|$9$|$10^4$|\n|$10$|$2 \\times 10^4$|\n|$11$|$5 \\times 10^4$|\n|$12$|$6 \\times 10^4$|\n|$13$|$8 \\times 10^4$|\n|$14$|$10^5$|\n|$15$|$6 \\times 10^5$|\n|$16$|$7 \\times 10^5$|\n|$17$|$8 \\times 10^5$|\n|$18$|$9 \\times 10^5$|\n|$19,20$|$10^6$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2011] 道路修建", "background": null, "description": "在 W 星球上有 $n$ 个国家。为了各自国家的经济发展，他们决定在各个国家之间建设双向道路使得国家之间连通。但是每个国家的国王都很吝啬，他们只愿意修建恰好 $n - 1$ 条双向道路。\n\n每条道路的修建都要付出一定的费用，这个费用等于道路长度乘以道路两端 的国家个数之差的绝对值。例如，在下图中，虚线所示道路两端分别有 $2$ 个、$4$ 个国家，如果该道路长度为 $1$，则费用为 $1×|2 - 4|=2$。图中圆圈里的数字表示国家的编号。\n \n![](https://cdn.luogu.com.cn/upload/pic/2604.png) \n\n由于国家的数量十分庞大，道路的建造方案有很多种，同时每种方案的修建费用难以用人工计算，国王们决定找人设计一个软件，对于给定的建造方案，计算出所需要的费用。请你帮助国王们设计一个这样的软件。", "inputFormat": "输入的第一行包含一个整数 $n$，表示 W 星球上的国家的数量，国家从 $1$ 到 $n$ 编号。\n\n接下来 $n - 1$ 行描述道路建设情况，其中第 $i$ 行包含三个整数 $a_i$，$b_i$ 和 $c_i$，表示第 $i$ 条双向道路修建在 $a_i$ 与 $b_i$ 两个国家之间，长度为 $c_i$。", "outputFormat": "输出一个整数，表示修建所有道路所需要的总费用。", "hint": "对于 $100\\%$ 的数据，$1\\leq a_i, b_i\\leq n$，$0\\leq c_i\\leq10^6$，$2\\leq n\\leq 10^6$。\n|测试点编号|$n=$|\n|:-:|:-:|\n|$1$|$2$|\n|$2$|$10$|\n|$3$|$100$|\n|$4$|$200$|\n|$5$|$500$|\n|$6$|$600$|\n|$7$|$800$|\n|$8$|$1000$|\n|$9$|$10^4$|\n|$10$|$2\\times 10^4$|\n|$11$|$5\\times 10^4$|\n|$12$|$6\\times 10^4$|\n|$13$|$8\\times 10^4$|\n|$14$|$10^5$|\n|$15$|$6\\times 10^5$|\n|$16$|$7\\times 10^5$|\n|$17$|$8\\times 10^5$|\n|$18$|$9\\times 10^5$|\n|$19,20$|$10^6$|", "locale": "zh-CN"}}}
{"pid": "P2053", "type": "P", "difficulty": 6, "samples": [["2 2\n3 2\n1 4", "1.50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "四川", "各省省选", "网络流", "费用流"], "title": "[SCOI2007] 修车", "background": "", "description": "同一时刻有 $N$ 位车主带着他们的爱车来到了汽车维修中心。\n\n维修中心共有 $M$ 位技术人员，不同的技术人员对不同的车进行维修所用的时间是不同的。\n\n现在需要安排这 $M$ 位技术人员所维修的车及顺序，使得顾客平均等待的时间最小。\n\n说明：顾客的等待时间是指从他把车送至维修中心到维修完毕所用的时间。", "inputFormat": "第一行有两个数 $M,N$，表示技术人员数与顾客数。\n\n接下来 $N$ 行，每行 $M$ 个整数。第 $i+1$ 行第 $j$ 个数表示第 $j$ 位技术人员维修第 $i$ 辆车需要用的时间 $T_{i,j}$。", "outputFormat": "最小平均等待时间，答案精确到小数点后 $2$ 位。", "hint": "对于 $100\\%$ 的数据，$2\\le M\\le 9$，$1\\le N\\le 60$，$1\\le T\\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2007] Car Repair", "background": "", "description": "At time $0$, $N$ customers arrive at an auto repair center with their cars.\n\nThere are $M$ technicians in the center, and the time required by different technicians to repair different cars may differ.\n\nArrange which cars each of the $M$ technicians repairs and in what order, so that the average waiting time of the customers is minimized.\n\nExplanation: A customer's waiting time is the time from when they deliver the car to the repair center until the repair is completed.", "inputFormat": "The first line contains two integers $M, N$, the number of technicians and the number of customers.\n\nThe next $N$ lines each contain $M$ integers. In row $i+1$, the $j$-th number denotes the time $T_{i, j}$ needed for technician $j$ to repair car $i$.", "outputFormat": "Output the minimum average waiting time, accurate to $2$ decimal places.", "hint": "Constraints: For $100\\%$ of the testdata, $2 \\le M \\le 9$, $1 \\le N \\le 60$, $1 \\le T \\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2007] 修车", "background": "", "description": "同一时刻有 $N$ 位车主带着他们的爱车来到了汽车维修中心。\n\n维修中心共有 $M$ 位技术人员，不同的技术人员对不同的车进行维修所用的时间是不同的。\n\n现在需要安排这 $M$ 位技术人员所维修的车及顺序，使得顾客平均等待的时间最小。\n\n说明：顾客的等待时间是指从他把车送至维修中心到维修完毕所用的时间。", "inputFormat": "第一行有两个数 $M,N$，表示技术人员数与顾客数。\n\n接下来 $N$ 行，每行 $M$ 个整数。第 $i+1$ 行第 $j$ 个数表示第 $j$ 位技术人员维修第 $i$ 辆车需要用的时间 $T_{i,j}$。", "outputFormat": "最小平均等待时间，答案精确到小数点后 $2$ 位。", "hint": "对于 $100\\%$ 的数据，$2\\le M\\le 9$，$1\\le N\\le 60$，$1\\le T\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2054", "type": "P", "difficulty": 5, "samples": [["6 2 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2005", "各省省选", "安徽", "扩展欧几里德算法", "逆元"], "title": "[AHOI2005] 洗牌", "background": null, "description": "为了表彰小联为 Samuel 星球的探险所做出的贡献，小联被邀请参加 Samuel 星球近距离载人探险活动。\n\n由于 Samuel 星球相当遥远，科学家们要在飞船中度过相当长的一段时间，小联提议用扑克牌打发长途旅行中的无聊时间。玩了几局之后，大家觉得单纯玩扑克牌对于像他们这样的高智商人才来说太简单了。有人提出了扑克牌的一种新的玩法。\n\n对于扑克牌的一次洗牌是这样定义的，将一叠 $N$（$N$为偶数）张扑克牌平均分成上下两叠，取下面一叠的第一张作为新的一叠的第一张，然后取上面一叠的第一张作为新的一叠的第二张，再取下面一叠的第二张作为新的一叠的第三张……如此交替直到所有的牌取完。\n\n如果对一叠 $6$ 张的扑克牌 ${1,2,3,4,5,6}$，进行一次洗牌的过程如下图所示：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/a0wt044v.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) \n\n从图中可以看出经过一次洗牌，序列 $1,2,3,4,5,6$ 变为 $4,1,5,2,6,3$。当然，再对得到的序列进行一次洗牌，又会变为 $2,4,6,1,3,5$。\n\n游戏是这样的，如果给定长度为 $N$ 的一叠扑克牌，并且牌面大小从 $1$ 开始连续增加到 $N$（不考虑花色），对这样的一叠扑克牌，进行 $M$ 次洗牌。最先说出经过洗牌后的扑克牌序列中第 $L$ 张扑克牌的牌面大小是多少的科学家得胜。小联想赢取游戏的胜利，你能帮助他吗？", "inputFormat": "输入文件中有三个用空格间隔的整数，分别表示 $N,M,L$。\n\n（其中 $1\\le N\\le 10^{10},0 \\le M\\le 10^{10}$，且 $N$ 为偶数）。", "outputFormat": "单行输出指定的扑克牌的牌面大小。", "hint": "$1\\le N \\leq 10^{10}$，$0 \\leq M \\leq 10^{10}$，且 $N$ 为偶数。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2005] Shuffle", "background": "", "description": "To recognize Xiao Lian’s contributions to the exploration of Planet Samuel, he was invited to participate in a close-range manned expedition to Planet Samuel.\n\nBecause Planet Samuel is very far away, the scientists will spend a long time on the spaceship. Xiao Lian suggested playing poker to pass the time during the long trip. After a few rounds, everyone felt that simply playing poker was too easy for people as intelligent as they were. Someone proposed a new way to play with the cards.\n\nA shuffle is defined as follows: split a deck of $N$ cards (where $N$ is even) evenly into an upper half and a lower half. Take the first card from the lower half as the first card of the new deck, then take the first card from the upper half as the second card of the new deck, then take the second card from the lower half as the third card, and so on, alternating until all cards are taken.\n\nIf we take a deck of 6 cards {1, 2, 3, 4, 5, 6}, the process of one shuffle is shown below:\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/a0wt044v.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) \n\nFrom the figure, we can see that after one shuffle, the sequence 1, 2, 3, 4, 5, 6 becomes 4, 1, 5, 2, 6, 3. Of course, shuffling the resulting sequence once more yields 2, 4, 6, 1, 3, 5.\n\nThe game is as follows: given a deck of length $N$, with face values increasing continuously from 1 to $N$ (suits ignored), perform $M$ shuffles on this deck. The scientist who first says the face value of the $L$-th card in the sequence after shuffling wins. Xiao Lian wants to win the game. Can you help him?", "inputFormat": "The input file contains three integers separated by spaces, representing $N, M, L$.\n\n(Where $1 \\le N \\le 10^{10}$, $0 \\le M \\le 10^{10}$, and $N$ is even.)", "outputFormat": "Output the face value of the specified card on a single line.", "hint": "$0 < N \\le 10^{10}$, $0 \\le M \\le 10^{10}$, and $N$ is even.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2005] 洗牌", "background": null, "description": "为了表彰小联为 Samuel 星球的探险所做出的贡献，小联被邀请参加 Samuel 星球近距离载人探险活动。\n\n由于 Samuel 星球相当遥远，科学家们要在飞船中度过相当长的一段时间，小联提议用扑克牌打发长途旅行中的无聊时间。玩了几局之后，大家觉得单纯玩扑克牌对于像他们这样的高智商人才来说太简单了。有人提出了扑克牌的一种新的玩法。\n\n对于扑克牌的一次洗牌是这样定义的，将一叠 $N$（$N$为偶数）张扑克牌平均分成上下两叠，取下面一叠的第一张作为新的一叠的第一张，然后取上面一叠的第一张作为新的一叠的第二张，再取下面一叠的第二张作为新的一叠的第三张……如此交替直到所有的牌取完。\n\n如果对一叠 $6$ 张的扑克牌 ${1,2,3,4,5,6}$，进行一次洗牌的过程如下图所示：\n\n  ![](https://cdn.luogu.com.cn/upload/image_hosting/a0wt044v.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000) \n\n从图中可以看出经过一次洗牌，序列 $1,2,3,4,5,6$ 变为 $4,1,5,2,6,3$。当然，再对得到的序列进行一次洗牌，又会变为 $2,4,6,1,3,5$。\n\n游戏是这样的，如果给定长度为 $N$ 的一叠扑克牌，并且牌面大小从 $1$ 开始连续增加到 $N$（不考虑花色），对这样的一叠扑克牌，进行 $M$ 次洗牌。最先说出经过洗牌后的扑克牌序列中第 $L$ 张扑克牌的牌面大小是多少的科学家得胜。小联想赢取游戏的胜利，你能帮助他吗？", "inputFormat": "输入文件中有三个用空格间隔的整数，分别表示 $N,M,L$。\n\n（其中 $1\\le N\\le 10^{10},0 \\le M\\le 10^{10}$，且 $N$ 为偶数）。", "outputFormat": "单行输出指定的扑克牌的牌面大小。", "hint": "$1\\le N \\leq 10^{10}$，$0 \\leq M \\leq 10^{10}$，且 $N$ 为偶数。", "locale": "zh-CN"}}}
{"pid": "P2055", "type": "P", "difficulty": 5, "samples": [["1\n3\n1 1 0\n0 1 0\n0 1 1\n1 0 0\n1 0 0", "^_^"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "网络流", "浙江", "图论建模", "二分图"], "title": "[ZJOI2009] 假期的宿舍", "background": "", "description": "学校放假了……有些同学回家了，而有些同学则有以前的好朋友来探访，那么住宿就是一个问题。\n\n比如 A 和 B 都是学校的学生，A 要回家，而 C 来看B，C 与 A 不认识。我们假设每个人只能睡和自己直接认识的人的床。那么一个解决方案就是 B 睡 A 的床而 C 睡 B 的床。而实际情况可能非常复杂，有的人可能认识好多在校学生，在校学生之间也不一定都互相认识。\n\n我们已知一共有 $n$ 个人，并且知道其中每个人是不是本校学生，也知道每个本校学生是否回家。问是否存在一个方案使得所有不回家的本校学生和来看他们的其他人都有地方住。\n", "inputFormat": "第一行一个数 $T$ 表示数据组数。接下来 $T$ 组数据，每组数据第一行一个数 $n$ 表示涉及到的总人数。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否是在校学生 ($0$ 表示不是，$1$ 表示是)。再接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否回家 ($0$ 表示不回家，$1$ 表示回家，注意如果第 $i$ 个人不是在校学生，那么这个位置上的数是一个随机的数，你应该在读入以后忽略它)。\n\n接下来 $n$ 行每行 $n$ 个数，第 $i$ 行第 $j$ 个数表示 $i$ 和 $j$ 是否认识 ($1$ 表示认识，$0$ 表示不认识，第 $i$ 行 $i$ 个的值为 $0$，但是显然自己还是可以睡自己的床)，认识的关系是相互的。\n", "outputFormat": "对于每组数据，如果存在一个方案则输出 `^_^`，否则输出`T_T`。（注意输出的都是半角字符，即三个符号的 ASCII 码分别为 $94,84,95$）\n", "hint": "对于 $30\\%$ 的数据满足 $1 \\le n \\le 12$。\n\n对于 $100\\%$ 的数据满足 $1 \\le n \\le 50$，$1 \\le T \\le 20$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2009] Dormitory During the Holidays", "background": "", "description": "The school is on vacation. Some students go home, while some of their old friends come to visit, so accommodation becomes a problem.\n\nFor example, A and B are both students of the school. A is going home, and C comes to visit B. C and A do not know each other. We assume each person can only sleep in the bed of someone they know directly. Then one solution is: B sleeps in A’s bed, and C sleeps in B’s bed. In reality, things can be much more complicated: some people may know many students who are on campus, and students on campus may not all know each other.\n\nWe know there are $n$ people in total, and for each person we know whether they are a student of this school, and for each student we know whether they will go home. Determine whether there exists an arrangement such that all students who do not go home and all the other people who come to visit them have a place to stay.", "inputFormat": "The first line contains an integer $T$ denoting the number of test cases. Then follow $T$ test cases. For each test case, the first line contains an integer $n$ denoting the total number of people involved.\n\nThe next line contains $n$ numbers; the $i$-th number indicates whether person $i$ is a student of the school ($0$ means no, $1$ means yes). The next line contains $n$ numbers; the $i$-th number indicates whether person $i$ will go home ($0$ means not going home, $1$ means going home; note that if person $i$ is not a student, the number at this position is random and should be ignored after reading).\n\nThen follow $n$ lines, each with $n$ numbers. The number in row $i$, column $j$ indicates whether $i$ and $j$ know each other ($1$ means yes, $0$ means no; the value at row $i$, column $i$ is $0$, but of course everyone can still sleep in their own bed). The acquaintance relationship is mutual.", "outputFormat": "For each test case, output `^_^` if a valid arrangement exists; otherwise, output `T_T`. Note that the outputs must be half-width characters (ASCII).", "hint": "For $30\\%$ of the testdata, $1 \\le n \\le 12$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 50$, $1 \\le T \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2009] 假期的宿舍", "background": "", "description": "学校放假了……有些同学回家了，而有些同学则有以前的好朋友来探访，那么住宿就是一个问题。\n\n比如 A 和 B 都是学校的学生，A 要回家，而 C 来看B，C 与 A 不认识。我们假设每个人只能睡和自己直接认识的人的床。那么一个解决方案就是 B 睡 A 的床而 C 睡 B 的床。而实际情况可能非常复杂，有的人可能认识好多在校学生，在校学生之间也不一定都互相认识。\n\n我们已知一共有 $n$ 个人，并且知道其中每个人是不是本校学生，也知道每个本校学生是否回家。问是否存在一个方案使得所有不回家的本校学生和来看他们的其他人都有地方住。\n", "inputFormat": "第一行一个数 $T$ 表示数据组数。接下来 $T$ 组数据，每组数据第一行一个数 $n$ 表示涉及到的总人数。\n\n接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否是在校学生 ($0$ 表示不是，$1$ 表示是)。再接下来一行 $n$ 个数，第 $i$ 个数表示第 $i$ 个人是否回家 ($0$ 表示不回家，$1$ 表示回家，注意如果第 $i$ 个人不是在校学生，那么这个位置上的数是一个随机的数，你应该在读入以后忽略它)。\n\n接下来 $n$ 行每行 $n$ 个数，第 $i$ 行第 $j$ 个数表示 $i$ 和 $j$ 是否认识 ($1$ 表示认识，$0$ 表示不认识，第 $i$ 行 $i$ 个的值为 $0$，但是显然自己还是可以睡自己的床)，认识的关系是相互的。\n", "outputFormat": "对于每组数据，如果存在一个方案则输出 `^_^`，否则输出`T_T`。（注意输出的都是半角字符，即三个符号的 ASCII 码分别为 $94,84,95$）\n", "hint": "对于 $30\\%$ 的数据满足 $1 \\le n \\le 12$。\n\n对于 $100\\%$ 的数据满足 $1 \\le n \\le 50$，$1 \\le T \\le 20$。\n", "locale": "zh-CN"}}}
{"pid": "P2056", "type": "P", "difficulty": 6, "samples": [["8\n1 2\n2 3\n3 4\n3 5\n3 6\n6 7\n6 8\n7\nG\nC 1\nG\nC 2\nG\nC 1\nG", "4\n3\n3\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 5000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2007", "线段树", "各省省选", "点分治", "浙江", "线段树分治"], "title": "[ZJOI2007] 捉迷藏", "background": null, "description": "Jiajia 和 Wind 是一对恩爱的夫妻，并且他们有很多孩子。某天，Jiajia、Wind 和孩子们决定在家里玩捉迷藏游戏。他们的家很大且构造很奇特，由 $N$ 个屋子和 $N-1$ 条双向走廊组成，这 $N-1$ 条走廊的分布使得任意两个屋子都互相可达。 \n\n\n游戏是这样进行的，孩子们负责躲藏，Jiajia 负责找，而 Wind 负责操纵这 $N$ 个屋子的灯。在起初的时候，所有的灯都没有被打开。每一次，孩子们只会躲藏在没有开灯的房间中，但是为了增加刺激性，孩子们会要求打开某个房间的电灯或者关闭某个房间的电灯。为了评估某一次游戏的复杂性，Jiajia 希望知道可能的最远的两个孩子的距离（即最远的两个关灯房间的距离）。 \n\n我们将以如下形式定义每一种操作： \n\n- C(hange) i 改变第 $i$ 个房间的照明状态，若原来打开，则关闭；若原来关闭，则打开。 \n- G(ame) 开始一次游戏，查询最远的两个关灯房间的距离。", "inputFormat": "第一行包含一个整数 $N$，表示房间的个数，房间将被编号为 $1,2,3…N$ 的整数。\n\n接下来 $N-1$ 行每行两个整数 $a$, $b$，表示房间 $a$ 与房间 $b$ 之间有一条走廊相连。\n\n接下来一行包含一个整数 $Q$，表示操作次数。接着 $Q$ 行，每行一个操作，如上文所示。", "outputFormat": "对于每一个操作 Game，输出一个非负整数，表示最远的两个关灯房间的距离。若只有一个房间是关着灯的，输出 `0`；若所有房间的灯都开着，输出 `-1`。", "hint": "对于$20\\%$的数据， $N \\leq 50$, $Q\\leq 100$； \n\n对于$60\\%$的数据， $N \\leq 3000$, $Q \\leq 10000$； \n\n对于$100\\%$的数据， $N \\leq 100000$, $Q \\leq 500000$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2007] Hide and Seek", "background": "", "description": "Jiajia and Wind are a loving couple, and they have many children. One day, Jiajia, Wind, and the children decide to play hide-and-seek at home. Their house is large and unusual: it consists of $N$ rooms and $N-1$ bidirectional corridors whose layout ensures that any two rooms are mutually reachable.\n\nThe game proceeds as follows: the children hide, Jiajia searches, and Wind controls the lights in the $N$ rooms. Initially, all lights are off. Each time, the children will only hide in rooms whose lights are off. To make the game more exciting, the children may request to turn on or turn off the light of a certain room. To evaluate the complexity of a particular round, Jiajia wants to know the greatest possible distance between two children, that is, the maximum distance between two rooms whose lights are off.\n\nEach operation is defined as follows:\n- C(hange) i: Toggle the light state of room $i$. If it was on, turn it off; if it was off, turn it on.\n- G(ame): Start a round and query the maximum distance between two rooms with lights off.", "inputFormat": "The first line contains an integer $N$, the number of rooms. The rooms are labeled with integers $1, 2, 3, \\ldots, N$.\n\nEach of the next $N-1$ lines contains two integers $a$, $b$, indicating that there is a corridor between room $a$ and room $b$.\n\nThe next line contains an integer $Q$, the number of operations. Then follow $Q$ lines, each containing one operation as described above.", "outputFormat": "For each Game operation, output a non-negative integer representing the maximum distance between two rooms whose lights are off. If there is only one room with its light off, output `0`. If all rooms have their lights on, output `-1`.", "hint": "Constraints\n\n- For $20\\%$ of the testdata, $N \\leq 50$, $Q \\leq 100$.\n- For $60\\%$ of the testdata, $N \\leq 3000$, $Q \\leq 10000$.\n- For $100\\%$ of the testdata, $N \\leq 100000$, $Q \\leq 500000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2007] 捉迷藏", "background": null, "description": "Jiajia 和 Wind 是一对恩爱的夫妻，并且他们有很多孩子。某天，Jiajia、Wind 和孩子们决定在家里玩捉迷藏游戏。他们的家很大且构造很奇特，由 $N$ 个屋子和 $N-1$ 条双向走廊组成，这 $N-1$ 条走廊的分布使得任意两个屋子都互相可达。 \n\n\n游戏是这样进行的，孩子们负责躲藏，Jiajia 负责找，而 Wind 负责操纵这 $N$ 个屋子的灯。在起初的时候，所有的灯都没有被打开。每一次，孩子们只会躲藏在没有开灯的房间中，但是为了增加刺激性，孩子们会要求打开某个房间的电灯或者关闭某个房间的电灯。为了评估某一次游戏的复杂性，Jiajia 希望知道可能的最远的两个孩子的距离（即最远的两个关灯房间的距离）。 \n\n我们将以如下形式定义每一种操作： \n\n- C(hange) i 改变第 $i$ 个房间的照明状态，若原来打开，则关闭；若原来关闭，则打开。 \n- G(ame) 开始一次游戏，查询最远的两个关灯房间的距离。", "inputFormat": "第一行包含一个整数 $N$，表示房间的个数，房间将被编号为 $1,2,3…N$ 的整数。\n\n接下来 $N-1$ 行每行两个整数 $a$, $b$，表示房间 $a$ 与房间 $b$ 之间有一条走廊相连。\n\n接下来一行包含一个整数 $Q$，表示操作次数。接着 $Q$ 行，每行一个操作，如上文所示。", "outputFormat": "对于每一个操作 Game，输出一个非负整数，表示最远的两个关灯房间的距离。若只有一个房间是关着灯的，输出 `0`；若所有房间的灯都开着，输出 `-1`。", "hint": "对于$20\\%$的数据， $N \\leq 50$, $Q\\leq 100$； \n\n对于$60\\%$的数据， $N \\leq 3000$, $Q \\leq 10000$； \n\n对于$100\\%$的数据， $N \\leq 100000$, $Q \\leq 500000$。", "locale": "zh-CN"}}}
{"pid": "P2057", "type": "P", "difficulty": 5, "samples": [["3 3\n1 0 0\n1 2\n1 3\n3 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "2010", "各省省选", "网络流", "上海", "吉林", "最小割"], "title": "[SHOI2007] 善意的投票 / [JLOI2010] 冠军调查", "background": "", "description": "幼儿园里有 $n$ 个小朋友打算通过投票来决定睡不睡午觉。\n\n对他们来说，这个问题并不是很重要，于是他们决定发扬谦让精神。\n\n虽然每个人都有自己的主见，但是为了照顾一下自己朋友的想法，他们也可以投和自己本来意愿相反的票。\n\n我们定义一次投票的冲突数为下面两者相加：\n\n* 实际投票不同的好朋友对数。\n\n* 自己实际投票和自己本来意愿不同的人数。\n\n我们的问题就是，每位小朋友应该怎样投票，才能使冲突数最小？", "inputFormat": "第一行两个整数 $n,m$。其中 $n$ 代表总人数，$m$ 代表好朋友的对数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 个小朋友的意愿：当它为 $1$ 时表示同意睡觉，当它为 $0$ 时表示反对睡觉。\n\n接下来 $m$ 行，每行有两个整数 $i,j$，表示 $i,j$ 是一对好朋友，我们保证任何两对 $i,j$ 不会重复。\n", "outputFormat": "一行一个整数，即可能的最小冲突数。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le300$，$1\\le m \\le \\frac{n(n-1)}2$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2007] Kind-Hearted Voting / [JLOI2010] Champion Survey", "background": "", "description": "In a kindergarten, there are $n$ children who plan to decide whether to take a nap by voting.\n\nThis issue is not very important to them, so they decide to be considerate.\n\nAlthough everyone has their own preference, they may cast a vote opposite to their original intention to accommodate their friends.\n\nWe define the conflict count of a voting result as the sum of the following two quantities:\n- The number of friend pairs whose actual votes differ.\n- The number of children whose actual vote differs from their original preference.\n\nOur problem is: how should each child vote to minimize the conflict count?", "inputFormat": "The first line contains two integers $n, m$, where $n$ is the total number of children and $m$ is the number of friend pairs.\n\nThe second line contains $n$ integers. The $i$-th integer is the $i$-th child’s preference: $1$ means agreeing to take a nap, and $0$ means opposing it.\n\nThe next $m$ lines each contain two integers $i, j$, indicating that $i$ and $j$ are a pair of friends. We guarantee that any pair $i, j$ does not repeat.", "outputFormat": "Output a single integer on one line: the minimum possible conflict count.", "hint": "For $100\\%$ of the testdata, $2 \\le n \\le 300$, $1 \\le m \\le \\frac{n(n-1)}{2}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2007] 善意的投票 / [JLOI2010] 冠军调查", "background": "", "description": "幼儿园里有 $n$ 个小朋友打算通过投票来决定睡不睡午觉。\n\n对他们来说，这个问题并不是很重要，于是他们决定发扬谦让精神。\n\n虽然每个人都有自己的主见，但是为了照顾一下自己朋友的想法，他们也可以投和自己本来意愿相反的票。\n\n我们定义一次投票的冲突数为下面两者相加：\n\n* 实际投票不同的好朋友对数。\n\n* 自己实际投票和自己本来意愿不同的人数。\n\n我们的问题就是，每位小朋友应该怎样投票，才能使冲突数最小？", "inputFormat": "第一行两个整数 $n,m$。其中 $n$ 代表总人数，$m$ 代表好朋友的对数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 个小朋友的意愿：当它为 $1$ 时表示同意睡觉，当它为 $0$ 时表示反对睡觉。\n\n接下来 $m$ 行，每行有两个整数 $i,j$，表示 $i,j$ 是一对好朋友，我们保证任何两对 $i,j$ 不会重复。\n", "outputFormat": "一行一个整数，即可能的最小冲突数。", "hint": "对于 $100\\%$ 的数据，$2\\le n\\le300$，$1\\le m \\le \\frac{n(n-1)}2$。", "locale": "zh-CN"}}}
{"pid": "P2058", "type": "P", "difficulty": 3, "samples": [["3\n1 4 4 1 2 2\n2 2 2 3\n10 1 3", "3\n4\n4\n"], ["4\n1 4 1 2 2 3\n3 2 2 3\n86401 2 3 4\n86402 1 5", "3\n3\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2016", "NOIP 普及组", "队列", "双指针 two-pointer"], "title": "[NOIP 2016 普及组] 海港", "background": "NOIP2016 普及组 T3", "description": "小 K 是一个海港的海关工作人员，每天都有许多船只到达海港，船上通常有很多来自不同国家的乘客。\n\n小 K 对这些到达海港的船只非常感兴趣，他按照时间记录下了到达海港的每一艘船只情况；对于第 $i$ 艘到达的船，他记录了这艘船到达的时间 $t_i$ (单位：秒)，船上的乘客数 $k_i$，以及每名乘客的国籍 $x_{i,1}, x_{i,2},\\dots,x_{i,k}$。\n\n小K统计了 $n$ 艘船的信息，希望你帮忙计算出以每一艘船到达时间为止的 $24$ 小时（$24$ 小时 $=86400$ 秒）内所有乘船到达的乘客来自多少个不同的国家。\n\n形式化地讲，你需要计算 $n$ 条信息。对于输出的第 $i$ 条信息，你需要统计满足 $t_i-86400<t_p \\le t_i$ 的船只 $p$，在所有的 $x_{p,j}$ 中，总共有多少个不同的数。\n", "inputFormat": "第一行输入一个正整数 $n$，表示小 K 统计了 $n$ 艘船的信息。\n\n接下来 $n$ 行，每行描述一艘船的信息：前两个整数 $t_i$ 和 $k_i$ 分别表示这艘船到达海港的时间和船上的乘客数量，接下来 $k_i$ 个整数 $x_{i,j}$ 表示船上乘客的国籍。\n\n保证输入的 $t_i$ 是递增的，单位是秒；表示从小K第一次上班开始计时，这艘船在第 $t_i$ 秒到达海港。\n\n保证 $1 \\le n \\le 10^5$，$\\sum{k_i} \\le 3\\times 10^5 $ ，$1\\le x_{i,j} \\le 10^5$， $1 \\le t_{i-1}\\le  t_i    \\le  10^9$。\n\n\n其中 $\\sum{k_i}$ 表示所有的 $k_i$ 的和。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行输出一个整数表示第 $i$ 艘船到达后的统计信息。\n", "hint": "【样例解释 1】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $4,1,2,2$，共来自 $3$ 个不同的国家；\n\n第二艘船在第 $2$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4 + 2 = 6$ 个乘客，分别是来自国家 $4,1,2,2,2,3$，共来自 $4$ 个不同的国家；\n\n第三艘船在第 $10$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船、第二艘船和第三艘船，共有 $4+2+1=7$ 个乘客，分别是来自国家 $4,1,2,2,2,3,3$，共来自 $4$ 个不同的国家。\n\n【样例解释 2】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $1,2,2,3$，共来自 $3$ 个不同的国家。\n\n第二艘船在第 $3$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4+2=6$ 个乘客，分别是来自国家 $1,2,2,3,2,3$，共来自 $3$ 个不同的国家。\n\n第三艘船在第 $86401$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船和第三艘船，共有 $2+2=4$ 个乘客，分别是来自国家 $2,3,3,4$，共来自 $3$ 个不同的国家。\n\n第四艘船在第 $86402$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船、第三艘船和第四艘船，共有 $2+2+1=5$ 个乘客，分别是来自国家 $2,3,3,4,5$，共来自 $4$个 不同的国家。\n\n【数据范围】\n\n- 对于 $10\\%$ 的测试点，$n=1,\\sum k_i \\leq 10,1 \\leq x_{i,j} \\leq 10, 1 \\leq t_i \\leq 10$。\n- 对于 $20\\%$ 的测试点，$1 \\leq n \\leq 10, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 32767$。\n- 对于 $40\\%$ 的测试点，$1 \\leq n \\leq 100, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 86400$。\n- 对于 $70\\%$ 的测试点，$1 \\leq n \\leq 1000, \\sum k_i \\leq 3000,1 \\leq x_{i,j} \\leq 1000,1 \\leq t_i \\leq 10^9$。\n- 对于 $100\\%$ 的测试点，$1 \\leq n \\leq 10^5,\\sum k_i \\leq 3\\times 10^5, 1 \\leq x_{i,j} \\leq 10^5,1\\leq t_i \\leq 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Junior] Harbor", "background": "NOIP 2016 Junior T3.", "description": "Xiao K is a customs officer at a harbor. Many ships arrive at the harbor every day, and there are usually many passengers on board from different countries.\n\nXiao K is very interested in these ships that arrive at the harbor. He records every ship in chronological order. For the $i$-th arriving ship, he records its arrival time $t_i$ (in seconds), the number of passengers $k_i$, and the nationality of each passenger $x_{i,1}, x_{i,2}, \\dots, x_{i,k_i}$.\n\nXiao K has collected information about $n$ ships. Please help him compute, for each ship’s arrival time, how many distinct countries the passengers come from among all ships that arrived within the last $24$ hours ($24$ hours $= 86400$ seconds), up to and including that time.\n\nFormally, you need to compute $n$ values. For the $i$-th output, consider all ships $p$ satisfying $t_i - 86400 < t_p \\le t_i$. Among all $x_{p,j}$ in these ships, count how many distinct values there are.", "inputFormat": "The first line contains a positive integer $n$, indicating that Xiao K recorded information about $n$ ships.\n\nEach of the next $n$ lines describes one ship: the first two integers $t_i$ and $k_i$ denote the ship’s arrival time and the number of passengers on board, followed by $k_i$ integers $x_{i,j}$, which are the nationalities of the passengers.\n\nIt is guaranteed that the $t_i$ are nondecreasing, measured in seconds. Counting from when Xiao K first started working, the $i$-th ship arrives at second $t_i$.\n\nIt is guaranteed that $1 \\le n \\le 10^5$, $\\sum k_i \\le 3 \\times 10^5$, $1 \\le x_{i,j} \\le 10^5$, $1 \\le t_{i-1} \\le t_i \\le 10^9$.\n\nHere, $\\sum k_i$ denotes the sum of all $k_i$.", "outputFormat": "Output $n$ lines. On the $i$-th line, output one integer: the required statistic after the $i$-th ship arrives.", "hint": "Sample Explanation 1:\n\nThe first ship arrives at second $1$. The ships that arrived in the last $24$ hours are just the first ship, with $4$ passengers from countries $4, 1, 2, 2$, for a total of $3$ distinct countries.\n\nThe second ship arrives at second $2$. The ships that arrived in the last $24$ hours are the first and second ships, with $4 + 2 = 6$ passengers from countries $4, 1, 2, 2, 2, 3$, for a total of $4$ distinct countries.\n\nThe third ship arrives at second $10$. The ships that arrived in the last $24$ hours are the first, second, and third ships, with $4 + 2 + 1 = 7$ passengers from countries $4, 1, 2, 2, 2, 3, 3$, for a total of $4$ distinct countries.\n\nSample Explanation 2:\n\nThe first ship arrives at second $1$. The ships that arrived in the last $24$ hours are just the first ship, with $4$ passengers from countries $1, 2, 2, 3$, for a total of $3$ distinct countries.\n\nThe second ship arrives at second $3$. The ships that arrived in the last $24$ hours are the first and second ships, with $4 + 2 = 6$ passengers from countries $1, 2, 2, 3, 2, 3$, for a total of $3$ distinct countries.\n\nThe third ship arrives at second $86401$. The ships that arrived in the last $24$ hours are the second and third ships, with $2 + 2 = 4$ passengers from countries $2, 3, 3, 4$, for a total of $3$ distinct countries.\n\nThe fourth ship arrives at second $86402$. The ships that arrived in the last $24$ hours are the second, third, and fourth ships, with $2 + 2 + 1 = 5$ passengers from countries $2, 3, 3, 4, 5$, for a total of $4$ distinct countries.\n\nConstraints\n\n- For $10\\%$ of the test points, $n = 1, \\sum k_i \\leq 10, 1 \\leq x_{i,j} \\leq 10, 1 \\leq t_i \\leq 10$.\n- For $20\\%$ of the test points, $1 \\leq n \\leq 10, \\sum k_i \\leq 100, 1 \\leq x_{i,j} \\leq 100, 1 \\leq t_i \\leq 32767$.\n- For $40\\%$ of the test points, $1 \\leq n \\leq 100, \\sum k_i \\leq 100, 1 \\leq x_{i,j} \\leq 100, 1 \\leq t_i \\leq 86400$.\n- For $70\\%$ of the test points, $1 \\leq n \\leq 1000, \\sum k_i \\leq 3000, 1 \\leq x_{i,j} \\leq 1000, 1 \\leq t_i \\leq 10^9$.\n- For $100\\%$ of the test points, $1 \\leq n \\leq 10^5, \\sum k_i \\leq 3 \\times 10^5, 1 \\leq x_{i,j} \\leq 10^5, 1 \\leq t_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 普及组] 海港", "background": "NOIP2016 普及组 T3", "description": "小 K 是一个海港的海关工作人员，每天都有许多船只到达海港，船上通常有很多来自不同国家的乘客。\n\n小 K 对这些到达海港的船只非常感兴趣，他按照时间记录下了到达海港的每一艘船只情况；对于第 $i$ 艘到达的船，他记录了这艘船到达的时间 $t_i$ (单位：秒)，船上的乘客数 $k_i$，以及每名乘客的国籍 $x_{i,1}, x_{i,2},\\dots,x_{i,k}$。\n\n小K统计了 $n$ 艘船的信息，希望你帮忙计算出以每一艘船到达时间为止的 $24$ 小时（$24$ 小时 $=86400$ 秒）内所有乘船到达的乘客来自多少个不同的国家。\n\n形式化地讲，你需要计算 $n$ 条信息。对于输出的第 $i$ 条信息，你需要统计满足 $t_i-86400<t_p \\le t_i$ 的船只 $p$，在所有的 $x_{p,j}$ 中，总共有多少个不同的数。\n", "inputFormat": "第一行输入一个正整数 $n$，表示小 K 统计了 $n$ 艘船的信息。\n\n接下来 $n$ 行，每行描述一艘船的信息：前两个整数 $t_i$ 和 $k_i$ 分别表示这艘船到达海港的时间和船上的乘客数量，接下来 $k_i$ 个整数 $x_{i,j}$ 表示船上乘客的国籍。\n\n保证输入的 $t_i$ 是递增的，单位是秒；表示从小K第一次上班开始计时，这艘船在第 $t_i$ 秒到达海港。\n\n保证 $1 \\le n \\le 10^5$，$\\sum{k_i} \\le 3\\times 10^5 $ ，$1\\le x_{i,j} \\le 10^5$， $1 \\le t_{i-1}\\le  t_i    \\le  10^9$。\n\n\n其中 $\\sum{k_i}$ 表示所有的 $k_i$ 的和。\n", "outputFormat": "输出 $n$ 行，第 $i$ 行输出一个整数表示第 $i$ 艘船到达后的统计信息。\n", "hint": "【样例解释 1】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $4,1,2,2$，共来自 $3$ 个不同的国家；\n\n第二艘船在第 $2$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4 + 2 = 6$ 个乘客，分别是来自国家 $4,1,2,2,2,3$，共来自 $4$ 个不同的国家；\n\n第三艘船在第 $10$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船、第二艘船和第三艘船，共有 $4+2+1=7$ 个乘客，分别是来自国家 $4,1,2,2,2,3,3$，共来自 $4$ 个不同的国家。\n\n【样例解释 2】\n\n第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $1,2,2,3$，共来自 $3$ 个不同的国家。\n\n第二艘船在第 $3$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4+2=6$ 个乘客，分别是来自国家 $1,2,2,3,2,3$，共来自 $3$ 个不同的国家。\n\n第三艘船在第 $86401$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船和第三艘船，共有 $2+2=4$ 个乘客，分别是来自国家 $2,3,3,4$，共来自 $3$ 个不同的国家。\n\n第四艘船在第 $86402$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船、第三艘船和第四艘船，共有 $2+2+1=5$ 个乘客，分别是来自国家 $2,3,3,4,5$，共来自 $4$个 不同的国家。\n\n【数据范围】\n\n- 对于 $10\\%$ 的测试点，$n=1,\\sum k_i \\leq 10,1 \\leq x_{i,j} \\leq 10, 1 \\leq t_i \\leq 10$。\n- 对于 $20\\%$ 的测试点，$1 \\leq n \\leq 10, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 32767$。\n- 对于 $40\\%$ 的测试点，$1 \\leq n \\leq 100, \\sum k_i \\leq 100,1 \\leq x_{i,j} \\leq 100,1 \\leq t_i \\leq 86400$。\n- 对于 $70\\%$ 的测试点，$1 \\leq n \\leq 1000, \\sum k_i \\leq 3000,1 \\leq x_{i,j} \\leq 1000,1 \\leq t_i \\leq 10^9$。\n- 对于 $100\\%$ 的测试点，$1 \\leq n \\leq 10^5,\\sum k_i \\leq 3\\times 10^5, 1 \\leq x_{i,j} \\leq 10^5,1\\leq t_i \\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2059", "type": "P", "difficulty": 5, "samples": [["5 5\n2 3 5 7 11\n", "22.72% 17.12% 15.36% 25.44% 19.36%\n"], ["4 4\n3 4 5 6", "25.00% 25.00% 25.00% 25.00%"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "递推", "2013", "各省省选", "吉林"], "title": "[JLOI2013] 卡牌游戏", "background": "", "description": "$N$ 个人坐成一圈玩游戏。一开始我们把所有玩家按顺时针从 $1$ 到 $N$ 编号。首先第一回合是玩家 $1$ 作为庄家。每个回合庄家都会随机（即按相等的概率）从卡牌堆里选择一张卡片，假设卡片上的数字为 $X$，则庄家首先把卡片上的数字向所有玩家展示，然后按顺时针从庄家位置数第 $X$ 个人将被处决(即退出游戏)。然后卡片将会被放回卡牌堆里并重新洗牌。被处决的人按顺时针的下一个人将会作为下一轮的庄家。那么经过 $N-1$ 轮后最后只会剩下一个人，即为本次游戏的胜者。现在你预先知道了总共有 $M$ 张卡片，也知道每张卡片上的数字。现在你需要确定每个玩家胜出的概率。\n\n这里有一个简单的例子：\n\n例如一共有 $4$ 个玩家，有四张卡片分别写着`3,4,5,6`.\n\n第一回合，庄家是玩家 $1$ ，假设他选择了一张写着数字 $5$ 的卡片。那么按顺时针数 `1,2,3,4,1`，最后玩家 $1$ 被踢出游戏。\n\n第二回合，庄家就是玩家 $1$ 的下一个人，即玩家 $2$.假设玩家 $2$ 这次选择了一张数字 $6$，那么 `2,3,4,2,3,4`，玩家 $4$ 被踢出游戏。\n\n第三回合，玩家 $2$ 再一次成为庄家。如果这一次玩家 $2$ 再次选了 $6$，则玩家 $3$ 被踢出游戏，最后的胜者就是玩家 $2$。", "inputFormat": "第一行包括两个整数 $N,M$ 分别表示玩家个数和卡牌总数。\n\n接下来一行包含 $M$ 个整数，分别给出每张卡片上写的数字。", "outputFormat": "输出一行包含 $N$ 个百分比形式给出的实数，四舍五入到两位小数。分别给出从玩家 $1$ 到玩家 $N$ 的胜出概率，每个概率之间用空格隔开，最后不要有空格。", "hint": "对于 $30\\%$ 的数据，有 $1\\le N\\le 10$。\n\n对于 $50\\%$ 的数据，有 $1\\le N\\le 30$。\n\n对于 $100\\%$ 的数据，有 $1\\le N\\le 50$, $1\\le M\\le 50$, $1\\le$ 每张卡片上的数字 $\\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[JLOI2013] Card Game", "background": "", "description": "$N$ people sit in a circle to play a game. At the beginning, all players are numbered clockwise from $1$ to $N$. In the first round, player $1$ is the dealer. In each round, the dealer randomly (i.e., with equal probability) selects one card from the deck. Suppose the number on the card is $X$. The dealer first shows $X$ to all players, then, counting clockwise starting from the dealer’s position, the $X$-th person is eliminated (i.e., leaves the game). The card is then returned to the deck and the deck is reshuffled. The next person clockwise after the eliminated player becomes the dealer for the next round. After $N-1$ rounds, only one person remains, who is the winner. You are given that there are $M$ cards in total and the number on each card. You need to determine the winning probability of each player.\n\nHere is a simple example:\n\nFor example, there are $4$ players and four cards with the numbers `3,4,5,6`.\n\nIn the first round, the dealer is player $1$. Suppose they draw a card with the number $5$. Counting clockwise `1,2,3,4,1`, player $1$ is eliminated.\n\nIn the second round, the dealer is the next player after player $1$, i.e., player $2$. Suppose player $2$ now draws a card with the number $6$. Counting `2,3,4,2,3,4`, player $4$ is eliminated.\n\nIn the third round, player $2$ is again the dealer. If player $2$ draws $6$ again, then player $3$ is eliminated, and the winner is player $2$.", "inputFormat": "The first line contains two integers $N, M$, the number of players and the total number of cards.\n\nThe next line contains $M$ integers, giving the number on each card.", "outputFormat": "Output one line containing $N$ real numbers in percentage form, rounded to two decimal places. These are the winning probabilities of players $1$ through $N$, separated by single spaces, with no trailing space at the end.", "hint": "- For $30\\%$ of the testdata, $1 \\le N \\le 10$.\n- For $50\\%$ of the testdata, $1 \\le N \\le 30$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 50$, $1 \\le M \\le 50$, and $1 \\le$ each card’s number $\\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JLOI2013] 卡牌游戏", "background": "", "description": "$N$ 个人坐成一圈玩游戏。一开始我们把所有玩家按顺时针从 $1$ 到 $N$ 编号。首先第一回合是玩家 $1$ 作为庄家。每个回合庄家都会随机（即按相等的概率）从卡牌堆里选择一张卡片，假设卡片上的数字为 $X$，则庄家首先把卡片上的数字向所有玩家展示，然后按顺时针从庄家位置数第 $X$ 个人将被处决(即退出游戏)。然后卡片将会被放回卡牌堆里并重新洗牌。被处决的人按顺时针的下一个人将会作为下一轮的庄家。那么经过 $N-1$ 轮后最后只会剩下一个人，即为本次游戏的胜者。现在你预先知道了总共有 $M$ 张卡片，也知道每张卡片上的数字。现在你需要确定每个玩家胜出的概率。\n\n这里有一个简单的例子：\n\n例如一共有 $4$ 个玩家，有四张卡片分别写着`3,4,5,6`.\n\n第一回合，庄家是玩家 $1$ ，假设他选择了一张写着数字 $5$ 的卡片。那么按顺时针数 `1,2,3,4,1`，最后玩家 $1$ 被踢出游戏。\n\n第二回合，庄家就是玩家 $1$ 的下一个人，即玩家 $2$.假设玩家 $2$ 这次选择了一张数字 $6$，那么 `2,3,4,2,3,4`，玩家 $4$ 被踢出游戏。\n\n第三回合，玩家 $2$ 再一次成为庄家。如果这一次玩家 $2$ 再次选了 $6$，则玩家 $3$ 被踢出游戏，最后的胜者就是玩家 $2$。", "inputFormat": "第一行包括两个整数 $N,M$ 分别表示玩家个数和卡牌总数。\n\n接下来一行包含 $M$ 个整数，分别给出每张卡片上写的数字。", "outputFormat": "输出一行包含 $N$ 个百分比形式给出的实数，四舍五入到两位小数。分别给出从玩家 $1$ 到玩家 $N$ 的胜出概率，每个概率之间用空格隔开，最后不要有空格。", "hint": "对于 $30\\%$ 的数据，有 $1\\le N\\le 10$。\n\n对于 $50\\%$ 的数据，有 $1\\le N\\le 30$。\n\n对于 $100\\%$ 的数据，有 $1\\le N\\le 50$, $1\\le M\\le 50$, $1\\le$ 每张卡片上的数字 $\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2060", "type": "P", "difficulty": 5, "samples": [["1 2 7 9", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2006", "各省省选", "湖南", "广度优先搜索 BFS"], "title": "[HNOI2006] 马步距离", "background": "", "description": "在国际象棋和中国象棋中，马的移动规则相同，都是走“日”字，我们将这种移动方式称为马步移动。\n\n如下图所示，从标号为 $0$ 的点出发，可以经过一步马步移动达到标号为 $1$ 的点，经过两步马步移动达到标号为 $2$ 的点。\n\n![](https://cdn.luogu.com.cn/upload/pic/15477.png)\n\n任给平面上的两点 $p$ 和 $s$，它们的坐标分别为 $(x_p,y_p)$ 和 $(x_s,y_s)$，从 $(x,y)$ 出发经过一步马步移动可以达到 $(x+1,y+2)$，$(x+2,y+1)$，$(x+1,y-2)$，$(x+2,y-1)$，$(x-1,y+2)$，$(x-2,y+1)$，$(x-1,y-2)$、$(x-2,y-1)$。\n\n假设棋盘充分大，并且坐标可以为负数。现在请你求出从点 $p$ 到点 $s$ 至少需要经过多少次马步移动？", "inputFormat": "输入只有一行四个用空格隔开的整数，分别代表 $x_p,y_p,x_s,y_s$。", "outputFormat": "含一个整数，表示从点 $p$ 到点 $s$ 至少需要经过的马步移动次数。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1 \\leq x_p,y_p,x_s,y_s \\leq 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2006] Knight Move Distance", "background": "", "description": "In international chess and Chinese chess (Xiangqi), the horse/knight moves in the same way, following an L shape. We call this movement a knight move.\n\nAs shown in the figure below, starting from the point labeled $0$, you can reach a point labeled $1$ in one knight move, and a point labeled $2$ in two knight moves.\n\n![](https://cdn.luogu.com.cn/upload/pic/15477.png)\n\nGiven any two points $p$ and $s$ on the plane, with coordinates $(x_p,y_p)$ and $(x_s,y_s)$ respectively, from $(x,y)$ you can reach $(x+1,y+2)$, $(x+2,y+1)$, $(x+1,y-2)$, $(x+2,y-1)$, $(x-1,y+2)$, $(x-2,y+1)$, $(x-1,y-2)$, $(x-2,y-1)$ in one knight move.\n\nAssume the board is sufficiently large, and coordinates can be negative. Please compute the minimum number of knight moves needed to get from point $p$ to point $s$.", "inputFormat": "A single line containing four integers separated by spaces, representing $x_p,y_p,x_s,y_s$.", "outputFormat": "Output a single integer, the minimum number of knight moves from point $p$ to point $s$.", "hint": "#### Constraints\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq x_p,y_p,x_s,y_s \\leq 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2006] 马步距离", "background": "", "description": "在国际象棋和中国象棋中，马的移动规则相同，都是走“日”字，我们将这种移动方式称为马步移动。\n\n如下图所示，从标号为 $0$ 的点出发，可以经过一步马步移动达到标号为 $1$ 的点，经过两步马步移动达到标号为 $2$ 的点。\n\n![](https://cdn.luogu.com.cn/upload/pic/15477.png)\n\n任给平面上的两点 $p$ 和 $s$，它们的坐标分别为 $(x_p,y_p)$ 和 $(x_s,y_s)$，从 $(x,y)$ 出发经过一步马步移动可以达到 $(x+1,y+2)$，$(x+2,y+1)$，$(x+1,y-2)$，$(x+2,y-1)$，$(x-1,y+2)$，$(x-2,y+1)$，$(x-1,y-2)$、$(x-2,y-1)$。\n\n假设棋盘充分大，并且坐标可以为负数。现在请你求出从点 $p$ 到点 $s$ 至少需要经过多少次马步移动？", "inputFormat": "输入只有一行四个用空格隔开的整数，分别代表 $x_p,y_p,x_s,y_s$。", "outputFormat": "含一个整数，表示从点 $p$ 到点 $s$ 至少需要经过的马步移动次数。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1 \\leq x_p,y_p,x_s,y_s \\leq 10^7$。", "locale": "zh-CN"}}}
{"pid": "P2061", "type": "P", "difficulty": 5, "samples": [["4\n2 5 1\n9 10 4\n6 8 2\n4 6 3", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "线段树", "USACO", "颜色段均摊（珂朵莉树 ODT）", "离散化", "扫描线"], "title": "[USACO07OPEN] City Horizon S", "background": "", "description": "Farmer John has taken his cows on a trip to the city! As the sun sets, the cows gaze at the city horizon and observe the beautiful silhouettes formed by the rectangular buildings.\n\nThe entire horizon is represented by a number line with N (1 ≤ N ≤ 40,000) buildings. Building i's silhouette has a base that spans locations Ai through Bi along the horizon (1 ≤ Ai < Bi ≤ 1,000,000,000) and has height Hi (1 ≤ Hi ≤ 1,000,000,000). Determine the area, in square units, of the aggregate silhouette formed by all N buildings.\n", "inputFormat": "Line 1: A single integer: N\nLines 2..N+1: Input line i+1 describes building i with three space-separated integers: A_i, B_i, and H_i", "outputFormat": "Line 1: The total area, in square units, of the silhouettes formed by all N buildings", "hint": "N<=40000 , a、b、k<=10^9 。\n", "locale": "en", "translations": {"en": {"title": "[USACO07OPEN] City Horizon S", "background": "", "description": "Farmer John has taken his cows on a trip to the city! As the sun sets, the cows gaze at the city horizon and observe the beautiful silhouettes formed by the rectangular buildings.\n\nThe entire horizon is represented by a number line with N (1 ≤ N ≤ 40,000) buildings. Building i's silhouette has a base that spans locations Ai through Bi along the horizon (1 ≤ Ai < Bi ≤ 1,000,000,000) and has height Hi (1 ≤ Hi ≤ 1,000,000,000). Determine the area, in square units, of the aggregate silhouette formed by all N buildings.\n", "inputFormat": "Line 1: A single integer: N\nLines 2..N+1: Input line i+1 describes building i with three space-separated integers: A_i, B_i, and H_i", "outputFormat": "Line 1: The total area, in square units, of the silhouettes formed by all N buildings", "hint": "N<=40000 , a、b、k<=10^9 。\n", "locale": "en"}, "zh-CN": {"title": "[USACO07OPEN] City Horizon S", "background": null, "description": "Farmer John 正带着他的奶牛去城市旅行！当太阳落下时，奶牛们凝望着城市的天际线，观察着由矩形建筑形成的美丽轮廓。\n\n整个地平线可以用一个包含 $N$ 座建筑物（$1\\le N \\le4\\times10^4$）的坐标轴表示。第 $i$ 座矩形建筑的底部轮廓从 $A_i$ 点延伸到 $B_i$ 点（$1\\le A_i<B_i\\le10^9$），高度为 $H_i$（$1\\le H_i\\le10^9$）。请计算出所有 $N$ 座建筑物叠加起来形成的轮廓总面积（以平方单位计）。", "inputFormat": "第一行：一个整数 $N$。\n\n第二行至第 $N + 1$ 行：每行输入三个用空格分开的整数 $A_i$、$B_i$、$H_i$，表示一个矩形建筑。", "outputFormat": "一行：表示所有 $N$ 座建筑物叠加起来形成的轮廓总面积。", "hint": "$1\\le N \\le4\\times10^4$ , $1\\le A_i<B_i\\le10^9$ , $1\\le H_i\\le10^9$", "locale": "zh-CN"}}}
{"pid": "P2062", "type": "P", "difficulty": 3, "samples": [["5\r\n2\r\n1\r\n2\r\n2\r\n3 \r\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心"], "title": "分队问题", "background": "", "description": "给定 $n$ 个选手，将他们分成若干只队伍。其中第 $i$ 个选手要求自己所属的队伍的人数大等于 $a_i$ 人。\n\n在满足所有选手的要求的前提下，最大化队伍的总数。\n\n注：每个选手属于且仅属于一支队伍。", "inputFormat": "第一行一个整数 $n$，表示人数。\n\n以下 $n$ 行，每行一个整数表示 $a_i$。", "outputFormat": "输出队伍总数的最大值。数据保证有解。\n", "hint": "对于 $20\\%$ 的数据，$n \\leq 10$。\n\n对于 $40\\%$ 的数据，$n \\leq 1000$。\n\n对于 $60\\%$ 的数据，$n \\leq 10000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Team Division Problem", "background": "", "description": "Given $n$ players, partition them into several teams. The $i$-th player requires that the size of their team be at least $a_i$.\n\nSubject to satisfying all players' requirements, maximize the total number of teams.\n\nNote: Each player belongs to exactly one team.", "inputFormat": "The first line contains an integer $n$, the number of people.\n\nThe next $n$ lines each contain an integer $a_i$.", "outputFormat": "Output the maximum possible number of teams. It is guaranteed that a solution exists.", "hint": "- For 20% of the testdata, $n \\leq 10$.\n- For 40% of the testdata, $n \\leq 1000$.\n- For 60% of the testdata, $n \\leq 10000$.\n- For 100% of the testdata, $1 \\leq n \\leq 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分队问题", "background": "", "description": "给定 $n$ 个选手，将他们分成若干只队伍。其中第 $i$ 个选手要求自己所属的队伍的人数大等于 $a_i$ 人。\n\n在满足所有选手的要求的前提下，最大化队伍的总数。\n\n注：每个选手属于且仅属于一支队伍。", "inputFormat": "第一行一个整数 $n$，表示人数。\n\n以下 $n$ 行，每行一个整数表示 $a_i$。", "outputFormat": "输出队伍总数的最大值。数据保证有解。\n", "hint": "对于 $20\\%$ 的数据，$n \\leq 10$。\n\n对于 $40\\%$ 的数据，$n \\leq 1000$。\n\n对于 $60\\%$ 的数据，$n \\leq 10000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2063", "type": "P", "difficulty": 7, "samples": [["6\n9\n98\n987\n9876\n98765\n987654321", "2\n0 3\n3 0\n1\n7 7\n0\n0\n4\n13 314\n178 259\n259 178\n314 13\n6\n4080 31161\n11064 29415\n18264 25575\n25575 18264\n29415 11064\n31161 4080"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论"], "title": "二平方和定理", "background": "", "description": "对于正整数 $n$，请求出所有满足 $x^2+y^2=n$ 的非负整数对 $(x,y)$。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，代表数据组数。\n\n对于每组数据，一行一个正整数，表示 $n$ 的值。", "outputFormat": "对于每组数据，首先输出一行一个非负整数，代表满足条件的 $(x,y)$ 的个数。随后按 $x$ 从小到大的顺序依次输出 $(x,y)$。$x$ 与 $y$ 之间用空格分隔，每组 $(x,y)$ 之间用换行分隔。\n\n每组数据之间用换行分隔。", "hint": "对于所有数据，$1\\le T\\le 10^2,1\\le n\\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Sum of Two Squares Theorem", "background": "", "description": "For a positive integer $n$, find all pairs of non-negative integers $(x, y)$ such that $x^2+y^2=n$.", "inputFormat": "There are multiple test cases.\n\nThe first line contains a positive integer $T$, representing the number of test cases.\n\nFor each test case, the next line contains a positive integer, which is the value of $n$.", "outputFormat": "For each test case, first output a single non-negative integer, representing the number of pairs $(x, y)$ that satisfy the condition. Then output all $(x, y)$ in increasing order of $x$. Separate $x$ and $y$ with a space, and separate different pairs with a newline.\n\nInsert a blank line between different test cases.", "hint": "Constraints: For all testdata, $1\\le T\\le 10^2,1\\le n\\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二平方和定理", "background": "", "description": "对于正整数 $n$，请求出所有满足 $x^2+y^2=n$ 的非负整数对 $(x,y)$。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，代表数据组数。\n\n对于每组数据，一行一个正整数，表示 $n$ 的值。", "outputFormat": "对于每组数据，首先输出一行一个非负整数，代表满足条件的 $(x,y)$ 的个数。随后按 $x$ 从小到大的顺序依次输出 $(x,y)$。$x$ 与 $y$ 之间用空格分隔，每组 $(x,y)$ 之间用换行分隔。\n\n每组数据之间用换行分隔。", "hint": "对于所有数据，$1\\le T\\le 10^2,1\\le n\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2064", "type": "P", "difficulty": 4, "samples": [["15121", "-1"], ["571", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "深度优先搜索 DFS"], "title": "奇妙的汽车", "background": null, "description": "你有着一辆奇妙的汽车，这辆汽车有着自动加速的功能。打个比方吧，第 $1$ 天你驾驶着它可以行驶 $a$ 路程，那么第 $2$ 天你可以让它所走的路程增加到第 $1$ 天的 $2$ 到 $9$ 倍（必须是其中一个整数），也就是 $2a$ 到 $9a$，第 $3$ 天它所行驶的路程就将达到第 $2$ 天的 $2$ 到 $9$ 倍……也就是说，这辆车在第 $i$ 天所走的路程一定是第 $i-1$ 天的 $2$ 到 $9$ 倍，而且还必须是它的整数倍。\n\n现在你迫不及待地开着这辆车要从 $A$ 城市出发到 $B$ 城市旅游，顺便在路上展示一下这辆旷世奇车。你已经知道你需要行驶的里程 $S$，现在请你合理安排第 $1$ 天的里程和接下来每天需要增加路程的倍数，好让你能够在最短的天数内，恰好到达 $B$ 城市。\n\n不过，因为你想要好好展示一下你的车，而且也是为了交通安全，你被要求至少要花 $2$ 天时间，如果不能找到这样的方案请输出 `-1`。", "inputFormat": "一个正整数 $S$，代表 $A$ 城市到 $B$ 城市的里程。", "outputFormat": "一个数，代表最少需要行驶的天数，如果无解输出 `-1`。", "hint": "数据规模\n\n对于 $30\\%$ 数据，有 $S\\leq 100$；\n\n对于 $70\\%$ 数据，有 $S\\leq 10^7$；\n\n对于 $100\\%$ 数据，有 $9<S\\leq 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "The Wonderful Car", "background": "", "description": "You have a wonderful car with an auto-acceleration feature. For example, on day $1$ you can drive a distance of $a$. Then on day $2$, you can increase the distance to one of $2$ to $9$ times that of day $1$ (it must be one of these integers), that is, from $2a$ to $9a$. On day $3$, the distance will be $2$ to $9$ times that of day $2$, and so on. In other words, on day $i$, the distance must be $2$ to $9$ times that of day $i-1$, and it must be an integer multiple of it.\n\nYou are eager to drive this car from city $A$ to city $B$ for a trip and show off this extraordinary car along the way. You already know the total mileage $S$ you need to travel. Please determine the day $1$ distance and the multiplier used each subsequent day so that the total distance is exactly $S$ and the number of days is minimized.\n\nHowever, because you want to show off your car properly and for safety reasons, you are required to spend at least $2$ days. If no such plan exists, output `-1`.", "inputFormat": "A positive integer $S$, representing the distance from city $A$ to city $B$.", "outputFormat": "A single integer representing the minimum number of days required; if there is no solution, output `-1`.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $S \\leq 100$.\n- For $70\\%$ of the testdata, $S \\leq 10^7$.\n- For $100\\%$ of the testdata, $9 < S \\leq 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "奇妙的汽车", "background": null, "description": "你有着一辆奇妙的汽车，这辆汽车有着自动加速的功能。打个比方吧，第 $1$ 天你驾驶着它可以行驶 $a$ 路程，那么第 $2$ 天你可以让它所走的路程增加到第 $1$ 天的 $2$ 到 $9$ 倍（必须是其中一个整数），也就是 $2a$ 到 $9a$，第 $3$ 天它所行驶的路程就将达到第 $2$ 天的 $2$ 到 $9$ 倍……也就是说，这辆车在第 $i$ 天所走的路程一定是第 $i-1$ 天的 $2$ 到 $9$ 倍，而且还必须是它的整数倍。\n\n现在你迫不及待地开着这辆车要从 $A$ 城市出发到 $B$ 城市旅游，顺便在路上展示一下这辆旷世奇车。你已经知道你需要行驶的里程 $S$，现在请你合理安排第 $1$ 天的里程和接下来每天需要增加路程的倍数，好让你能够在最短的天数内，恰好到达 $B$ 城市。\n\n不过，因为你想要好好展示一下你的车，而且也是为了交通安全，你被要求至少要花 $2$ 天时间，如果不能找到这样的方案请输出 `-1`。", "inputFormat": "一个正整数 $S$，代表 $A$ 城市到 $B$ 城市的里程。", "outputFormat": "一个数，代表最少需要行驶的天数，如果无解输出 `-1`。", "hint": "数据规模\n\n对于 $30\\%$ 数据，有 $S\\leq 100$；\n\n对于 $70\\%$ 数据，有 $S\\leq 10^7$；\n\n对于 $100\\%$ 数据，有 $9<S\\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P2065", "type": "P", "difficulty": 5, "samples": [["7\n4 3\n2 6 6 15\n2 3 5\n2 3\n4 9\n8 16 32\n4 2\n4 9 11 13\n5 7\n5 5\n2 3 5 1001 1001\n7 11 13 30 30\n10 10\n2 3 5 7 9 11 13 15 17 29\n4 6 10 14 18 22 26 30 34 38\n20 20\n195 144 903 63 137 513 44 626 75 473\n876 421 568 519 755 840 374 368 570 872\n363 650 155 265 64 26 426 391 15 421\n373 984 564 54 823 477 565 866 879 638\n100 100\n195 144 903 63 137 513 44 626 75 473\n876 421 568 519 755 840 374 368 570 872\n363 650 155 265 64 26 426 391 15 421\n373 984 564 54 823 477 565 866 879 638\n117 755 835 683 52 369 302 424 513 870\n75 874 299 228 140 361 30 342 750 819\n761 123 804 325 952 405 578 517 49 457\n932 941 988 767 624 41 912 702 241 426\n351 92 300 648 318 216 785 347 556 535\n166 318 434 746 419 386 928 996 680 975\n231 390 916 220 933 319 37 846 797 54\n272 924 145 348 350 239 563 135 362 119\n446 305 213 879 51 631 43 755 405 499\n509 412 887 203 408 821 298 443 445 96\n274 715 796 417 839 147 654 402 280 17\n298 725 98 287 382 923 694 201 679 99\n699 188 288 364 389 694 185 464 138 406\n558 188 897 354 603 737 277 35 139 556\n826 213 59 922 499 217 846 193 416 525\n69 115 489 355 256 654 49 439 118 961", "3\n1\n0\n4\n9\n18\n85"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2011", "各省省选", "网络流", "二分图", "最大公约数 gcd", "天津"], "title": "[TJOI2011] 卡片", "background": null, "description": "桌子上有 $m$ 张蓝色卡片与 $n$ 张红色卡片，每张卡片上有一个大于 $1$ 的整数。现在你要从桌子上拿走一些卡片，分若干次拿。每次只能拿走一组卡片：这组卡片颜色不同，并且两张卡片上面的数字的最大公约数大于 $1$。问：最多可以从桌上拿走多少组卡片。", "inputFormat": "第一行读入一个整数 $T$，为数据组数。\n\n每组数据的格式如下：\n\n> $m\\ n$  \n> $b_1\\ b_2\\ \\ldots\\ b_m$  \n> $r_1\\ r_2\\ \\ldots\\ r_n$  \n\n第二行给出每张蓝色卡片上面的数字，第三行给出每张红色卡片上的数字。", "outputFormat": "对每组测试数据，输出最多可以拿走多少组卡片。", "hint": "对 $100 \\%$ 的数据：$1 \\le T \\le 100$，$1 \\le m, n \\le 500$，卡片上的数字大于 $1$，小于 ${10}^7$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2011] Cards", "background": "", "description": "There are $m$ blue cards and $n$ red cards on the table, each with an integer greater than $1$ on it. You will remove some cards from the table in several steps. Each time, you may remove exactly one pair of cards: the two cards have different colors, and the greatest common divisor of the two numbers on them is greater than $1$. Question: what is the maximum number of pairs you can remove from the table?", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nThe format of each test case is as follows:\n\n> $m\\ n$  \n> $b_1\\ b_2\\ \\ldots\\ b_m$  \n> $r_1\\ r_2\\ \\ldots\\ r_n$  \n\nThe second line gives the numbers on the blue cards, and the third line gives the numbers on the red cards.", "outputFormat": "For each test case, output the maximum number of pairs of cards that can be removed.", "hint": "For $100 \\%$ of the testdata: $1 \\le T \\le 100$, $1 \\le m, n \\le 500$, and each card’s number is greater than $1$ and less than ${10}^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2011] 卡片", "background": null, "description": "桌子上有 $m$ 张蓝色卡片与 $n$ 张红色卡片，每张卡片上有一个大于 $1$ 的整数。现在你要从桌子上拿走一些卡片，分若干次拿。每次只能拿走一组卡片：这组卡片颜色不同，并且两张卡片上面的数字的最大公约数大于 $1$。问：最多可以从桌上拿走多少组卡片。", "inputFormat": "第一行读入一个整数 $T$，为数据组数。\n\n每组数据的格式如下：\n\n> $m\\ n$  \n> $b_1\\ b_2\\ \\ldots\\ b_m$  \n> $r_1\\ r_2\\ \\ldots\\ r_n$  \n\n第二行给出每张蓝色卡片上面的数字，第三行给出每张红色卡片上的数字。", "outputFormat": "对每组测试数据，输出最多可以拿走多少组卡片。", "hint": "对 $100 \\%$ 的数据：$1 \\le T \\le 100$，$1 \\le m, n \\le 500$，卡片上的数字大于 $1$，小于 ${10}^7$。", "locale": "zh-CN"}}}
{"pid": "P2066", "type": "P", "difficulty": 3, "samples": [["3 3\n30 40 50\n20 30 50\n20 25 30\n", "70\n1 1\n2 1\n3 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "背包 DP"], "title": "机器分配", "background": "", "description": "总公司拥有高效设备 $M$ 台，准备分给下属的 $N$ 个分公司。各分公司若获得这些设备，可以为国家提供一定的盈利。问：如何分配这 $M$ 台设备才能使国家得到的盈利最大？求出最大盈利值。其中 $M \\le 15$，$N \\le 10$。分配原则：每个公司有权获得任意数目的设备，但总台数不超过设备数 $M$。\n", "inputFormat": "第一行有两个数，第一个数是分公司数 $N$，第二个数是设备台数 $M$。\n\n接下来是一个 $N \\times M$ 的矩阵，表明了第 $i$ 个公司分配 $j$ 台机器的盈利。\n\n最大盈利值相同时，要求编号小的公司分得设备尽可能少。\n", "outputFormat": "第一行为最大盈利值。\n\n接下来 $N$ 行为第 $i$ 分公司分 $x$ 台。\n\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Machine Allocation", "background": "", "description": "The head office has $M$ high-efficiency machines to distribute to $N$ subsidiary companies. If a company receives a certain number of machines, it can generate a corresponding profit for the country. How should these $M$ machines be allocated to maximize the total profit? Find the maximum profit. Constraints: $M \\le 15$, $N \\le 10$. Allocation rule: each company may receive any number of machines, but the total number cannot exceed $M$.\n\nIf multiple allocations yield the same maximum profit, break ties by making earlier-indexed companies receive as few machines as possible, that is, minimize $x_1$; if still tied, minimize $x_2$; and so on.", "inputFormat": "The first line contains two numbers: the number of companies $N$ and the number of machines $M$.\n\nThen follows an $N \\times M$ matrix. The entry at row $i$ and column $j$ gives the profit when company $i$ is assigned $j$ machines.", "outputFormat": "The first line contains the maximum profit.\n\nThen output $N$ lines. In the $i$-th line, output the number $x$ of machines assigned to company $i$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "机器分配", "background": "", "description": "总公司拥有高效设备 $M$ 台，准备分给下属的 $N$ 个分公司。各分公司若获得这些设备，可以为国家提供一定的盈利。问：如何分配这 $M$ 台设备才能使国家得到的盈利最大？求出最大盈利值。其中 $M \\le 15$，$N \\le 10$。分配原则：每个公司有权获得任意数目的设备，但总台数不超过设备数 $M$。\n", "inputFormat": "第一行有两个数，第一个数是分公司数 $N$，第二个数是设备台数 $M$。\n\n接下来是一个 $N \\times M$ 的矩阵，表明了第 $i$ 个公司分配 $j$ 台机器的盈利。\n\n最大盈利值相同时，要求编号小的公司分得设备尽可能少。\n", "outputFormat": "第一行为最大盈利值。\n\n接下来 $N$ 行为第 $i$ 分公司分 $x$ 台。\n\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2067", "type": "P", "difficulty": 2, "samples": [["3\n010\n111\nx1x\n", "y=-1.0000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "数学", "洛谷原创"], "title": "Cytus-Holyknight", "background": "本人最初作\n\n以此纪念伟大的 ios、安卓、PSV 平台音乐游戏《Cytus》\n\n后续将不断更新。\n\n------------- Chapter V-1 -------------\n\n话说两位战士整天靠在一起好无聊啊，于是她们打算——玩游戏！（？）\n\n她们就用剑画了一个十字架，然后开始抛石子，好好玩啊（？？？）\n\n两个人每人有一个石子，当她们丢完后，正在自学数学的小蓝大叫：把他们连起来不就是一次函数吗！！\n\n于是乎，她们就连了起来，然后她们开始计算。此时她们发现一个严重的问题——没有草稿纸！（这什么破问题= =）\n\n由于脑补能力太低，她们只好让你来帮帮忙啦~", "description": "以图像形式给定一条直线上的若干个点，请以以下形式中的一个给出该直线的方程（其中 $k$ 和 $b$ 为常数）：\n\n- $y=kx+b$\n- $y=kx$\n- $y=b$\n- $x=b$", "inputFormat": "第一行，一个正整数 $n$，表示该图形大小是 $n\\times n$；\n\n接下来 $n$ 行，每行 $n$ 个字符，$1$ 表示坐标轴，$x$ 表示该整点在直线上，$0$ 表示该整点不在直线上。\n\n横行的 $1$ 是 $x$ 轴，竖列的 $1$ 是 $y$ 轴。\n\n上下两行，左右两列的距离恒为 $1$。", "outputFormat": "输出一行，表示该直线的方程。\n\n常数始终保留四位小数。", "hint": "数据保证有唯一解。\n\n对于 $100\\%$ 的数据，$3\\le n\\le16$。", "locale": "zh-CN", "translations": {"en": {"title": "Cytus-Holyknight", "background": "Originally created by me.\n\nTo commemorate the great music game Cytus on iOS, Android, and PSV.\n\nWill be continuously updated.\n\n------------- Chapter V-1 -------------\n\nThe two warriors were bored leaning together all day, so they decided to play a game!\n\nThey drew a cross with their swords and started tossing pebbles—so fun!\n\nEach of them had one pebble. After they threw them, Xiao Lan (pinyin), who was self-studying math, shouted: If you connect them, isn’t that a linear function!\n\nSo, they connected them and began to calculate. Then they discovered a serious problem—no scratch paper!\n\nWith such weak imagination, they had to ask you for help.", "description": "Given, in image form, several points on a straight line (all are integer points and none lie on the coordinate axes), output the equation of the line in one of the following forms (where $k$ and $b$ are constants):\n\n- $y=kx+b$\n- $y=kx$\n- $y=b$\n- $x=b$", "inputFormat": "The first line contains a positive integer $n$, indicating the size of the figure is $n\\times n$.\n\nThe next $n$ lines each contain $n$ characters. Character '1' marks the coordinate axes, 'x' indicates that the integer point lies on the line, and '0' indicates that the integer point does not lie on the line.\n\nThe horizontal row of '1's is the x-axis, and the vertical column of '1's is the y-axis.\n\nThe distances between adjacent rows and adjacent columns are always 1.", "outputFormat": "Output one line: the equation of the line.\n\nConstants should always be printed with 4 decimal places.", "hint": "The testdata guarantees a unique solution.\n\nConstraints: For 100% of the testdata, $3\\le n\\le16$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Cytus-Holyknight", "background": "本人最初作\n\n以此纪念伟大的 ios、安卓、PSV 平台音乐游戏《Cytus》\n\n后续将不断更新。\n\n------------- Chapter V-1 -------------\n\n话说两位战士整天靠在一起好无聊啊，于是她们打算——玩游戏！（？）\n\n她们就用剑画了一个十字架，然后开始抛石子，好好玩啊（？？？）\n\n两个人每人有一个石子，当她们丢完后，正在自学数学的小蓝大叫：把他们连起来不就是一次函数吗！！\n\n于是乎，她们就连了起来，然后她们开始计算。此时她们发现一个严重的问题——没有草稿纸！（这什么破问题= =）\n\n由于脑补能力太低，她们只好让你来帮帮忙啦~", "description": "以图像形式给定一条直线上的若干个点，请以以下形式中的一个给出该直线的方程（其中 $k$ 和 $b$ 为常数）：\n\n- $y=kx+b$\n- $y=kx$\n- $y=b$\n- $x=b$", "inputFormat": "第一行，一个正整数 $n$，表示该图形大小是 $n\\times n$；\n\n接下来 $n$ 行，每行 $n$ 个字符，$1$ 表示坐标轴，$x$ 表示该整点在直线上，$0$ 表示该整点不在直线上。\n\n横行的 $1$ 是 $x$ 轴，竖列的 $1$ 是 $y$ 轴。\n\n上下两行，左右两列的距离恒为 $1$。", "outputFormat": "输出一行，表示该直线的方程。\n\n常数始终保留四位小数。", "hint": "数据保证有唯一解。\n\n对于 $100\\%$ 的数据，$3\\le n\\le16$。", "locale": "zh-CN"}}}
{"pid": "P2068", "type": "P", "difficulty": 4, "samples": [["5\n4\nx 3 8\ny 1 3\nx 4 9\ny 3 4", "8\n17\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组"], "title": "统计和", "background": null, "description": "给定一个长度为 $n(0\\leq n\\leq 10^5)$，初始值都为 $0$ 的序列，$x(0\\leq x\\leq 10^5)$ 次的修改某些位置上的数字，每次加上一个数，并在此期间提出 $y(0\\leq y\\leq 10^5)$ 个问题，求每段区间的和。", "inputFormat": "第一行 $1$ 个整数，表示序列的长度 $n$。\n\n第二行 $1$ 个整数，表示操作的次数 $w(0\\leq w\\leq 2\\times 10^5)$。\n\n后面依次是 $w$ 行，分别表示加入和询问操作。\n\n其中，加入用 `x` 表示，询问用 `y` 表示。\n\n$x$ 的格式为 `x a b` 表示在序列上第 $a$ 个数加上 $b$。保证 $1 \\leq a \\leq n$，$1 \\leq b \\leq 10^9$。\n\n$y$ 的格式为 `y a b` 表示询问 $a$ 到 $b$ 区间的加和。保证 $1 \\leq a \\leq b \\leq n$。", "outputFormat": "每行一个正整数，分别是每次询问的结果。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "Range Sum", "background": "", "description": "Given a sequence of length $n(0\\leq n\\leq 10^5)$ whose initial values are all $0$, perform $x(0\\leq x\\leq 10^5)$ modifications on some positions, adding a number each time, and during this process ask $y(0\\leq y\\leq 10^5)$ queries to find the sum of each interval.", "inputFormat": "The first line contains $1$ integer, the length of the sequence $n$.\n\nThe second line contains $1$ integer, the number of operations $w(0\\leq w\\leq 2\\times 10^5)$.\n\nThen follow $w$ lines, each representing an add or a query operation.\n\nHere, add is denoted by `x`, and query is denoted by `y`.\n\nThe format of $x$ is `x a b`, meaning add $b$ to the $a$-th number in the sequence. It is guaranteed that $1 \\leq a \\leq n$, $1 \\leq b \\leq 10^9$.\n\nThe format of $y$ is `y a b`, meaning query the sum over the interval from $a$ to $b$. It is guaranteed that $1 \\leq a \\leq b \\leq n$.", "outputFormat": "Each line contains a positive integer, which is the result of each query.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "统计和", "background": null, "description": "给定一个长度为 $n(0\\leq n\\leq 10^5)$，初始值都为 $0$ 的序列，$x(0\\leq x\\leq 10^5)$ 次的修改某些位置上的数字，每次加上一个数，并在此期间提出 $y(0\\leq y\\leq 10^5)$ 个问题，求每段区间的和。", "inputFormat": "第一行 $1$ 个整数，表示序列的长度 $n$。\n\n第二行 $1$ 个整数，表示操作的次数 $w(0\\leq w\\leq 2\\times 10^5)$。\n\n后面依次是 $w$ 行，分别表示加入和询问操作。\n\n其中，加入用 `x` 表示，询问用 `y` 表示。\n\n$x$ 的格式为 `x a b` 表示在序列上第 $a$ 个数加上 $b$。保证 $1 \\leq a \\leq n$，$1 \\leq b \\leq 10^9$。\n\n$y$ 的格式为 `y a b` 表示询问 $a$ 到 $b$ 区间的加和。保证 $1 \\leq a \\leq b \\leq n$。", "outputFormat": "每行一个正整数，分别是每次询问的结果。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2069", "type": "P", "difficulty": 2, "samples": [["10 \r\n4\r\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "松鼠吃果子", "background": "", "description": "有 $n$ 个一种松鼠喜欢吃的果子由下向上串排成一列，并标号 $1\\sim n$。一只松鼠从最下果子开始向上跳，并且第 $i$ 次跳可以一次跳过 $(i^3 \\bmod 5 + 1)$ 个果子，并把脚下的果子吃了，如果上面有果子，在重力作用下，都将向下掉下一格。如第 $1$ 次跳从第一个果子上跳过 $(1^3 \\bmod 5 + 1 = ) 2$ 个果子，可跳到第 $3$ 个果子上，并把第 $3$ 个果子吃了；第 $2$ 次从第 $4$ 个果子上(落在原来第三个果子位置)跳过 $(2^3\\bmod 5 + 1 = ) 4$ 个到第 $8$ 个果子上，并把第 $8$ 个吃了；如此反复。\n\n当然，总有一次松鼠会跳出这串果子的最前面，设为每 $k$ 次，它吃不到任何果子了。这时它回到最下面的果子上，重做它的第 $k$ 次跳，以求吃到果子。如此，问它吃的第 $m$ 只果子(即第 $m$ 跳吃到的果子)的标号是什么？", "inputFormat": "一共两行，分别为 $n$ 和 $m$（$1\\le m\\le n\\le 200$，并且满足能够跳到第 $m$ 次）。", "outputFormat": "一个数，即它吃的第 $m$ 只果子的标号。", "hint": "注：吃掉的果子依次为 $3$，$8$，$4$（回到下面重做第 $3$ 跳），$9$（回到下面重做第 $4$ 跳）。", "locale": "zh-CN", "translations": {"en": {"title": "Squirrel Eats Fruits", "background": "", "description": "There are $n$ fruits that a squirrel likes to eat, arranged in a vertical column from bottom to top and labeled $1$ to $n$. The squirrel starts from the lowest fruit and jumps upward. On the $i$-th jump, it can skip $(i^3 \\bmod 5 + 1)$ fruits at once and then eats the fruit it lands on. After it eats that fruit, if there are fruits above, all of them fall down by one position due to gravity. For example, on the 1st jump it jumps over $(1^3 \\bmod 5 + 1 = 2)$ fruits from the first fruit to the third fruit and eats the third; on the 2nd jump it starts from the fourth fruit (which has fallen to the original third position), jumps over $(2^3 \\bmod 5 + 1 = 4)$ fruits to the eighth fruit, and eats the eighth; and so on.\n\nOf course, at some point the squirrel will jump beyond the top of this chain; suppose this first happens on the $k$-th jump, so it cannot eat any fruit on that attempt. It then returns to the bottommost fruit and redoes its $k$-th jump, in order to try to eat a fruit. Repeat this process. Given this, what is the label of the $m$-th fruit it eats (i.e., the fruit eaten on the $m$-th successful jump)?", "inputFormat": "Two lines containing $n$ and $m$ respectively ($1 \\le m \\le n \\le 200$), and it is guaranteed that the $m$-th successful jump exists.", "outputFormat": "A single integer: the label of the $m$-th fruit it eats.", "hint": "Note: The eaten fruits in order are $3$, $8$, $4$ (return to the bottom and redo the 3rd jump), $9$ (return to the bottom and redo the 4th jump).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "松鼠吃果子", "background": "", "description": "有 $n$ 个一种松鼠喜欢吃的果子由下向上串排成一列，并标号 $1\\sim n$。一只松鼠从最下果子开始向上跳，并且第 $i$ 次跳可以一次跳过 $(i^3 \\bmod 5 + 1)$ 个果子，并把脚下的果子吃了，如果上面有果子，在重力作用下，都将向下掉下一格。如第 $1$ 次跳从第一个果子上跳过 $(1^3 \\bmod 5 + 1 = ) 2$ 个果子，可跳到第 $3$ 个果子上，并把第 $3$ 个果子吃了；第 $2$ 次从第 $4$ 个果子上(落在原来第三个果子位置)跳过 $(2^3\\bmod 5 + 1 = ) 4$ 个到第 $8$ 个果子上，并把第 $8$ 个吃了；如此反复。\n\n当然，总有一次松鼠会跳出这串果子的最前面，设为每 $k$ 次，它吃不到任何果子了。这时它回到最下面的果子上，重做它的第 $k$ 次跳，以求吃到果子。如此，问它吃的第 $m$ 只果子(即第 $m$ 跳吃到的果子)的标号是什么？", "inputFormat": "一共两行，分别为 $n$ 和 $m$（$1\\le m\\le n\\le 200$，并且满足能够跳到第 $m$ 次）。", "outputFormat": "一个数，即它吃的第 $m$ 只果子的标号。", "hint": "注：吃掉的果子依次为 $3$，$8$，$4$（回到下面重做第 $3$ 跳），$9$（回到下面重做第 $4$ 跳）。", "locale": "zh-CN"}}}
{"pid": "P2070", "type": "P", "difficulty": 4, "samples": [["6\r\n2 R\r\n6 L\r\n1 R\r\n8 L\r\n1 R\r\n2 R", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2013", "线段树", "USACO", "离散化", "差分"], "title": "[USACO13JAN] 刷墙 Painting the Fence B", "background": null, "description": "Farmer John 已经设计了一种方法来装饰谷仓旁边的长栅栏（把栅栏认为是一根一维的线）。他把一只画刷绑在他最喜爱的奶牛 Bessie 身上，之后就去喝一杯冰水，而 Bessie 隔着栅栏来回走，当她走过某个地方，这里的一段栅栏就被刷上了涂料。\n\nBessie 从栅栏上的位置 $0$ 开始，并且遵循着一个 $N$ 次移动的次序（$1\\le N\\le10^5$）。例如 `10 L` 表示 Bessie 向左移动了 $10$ 个单位长度，`15 R` 表示 Bessie 向右移动了 $15$ 个单位长度。现给出 Bessie 所有移动的列表，Farmer John 想要知道哪些区域的栅栏至少涂了两层涂料（只涂一层涂料的区域可能在大雨中被洗掉）。Bessie 在她的行走中最远到达距起始点 $10^9$ 个单位长度。", "inputFormat": "第 $1$ 行：一个整型数 $N$。\n\n第 $2 \\sim N+1$ 行：每行描述了 Bessie 的 $N$ 次移动中的一次，例如 `15 L`。", "outputFormat": "$1$ 行：被至少涂了两层涂料的区域总数。", "hint": "【样例解释】\n\nBessie 从位置 $0$ 开始，向右移动 $2$ 个单位长度，向左移动 $6$ 个单位长度，向右移动 $1$ 个单位长度，向左移动 $8$ 个单位长度，最后向右移动 $3$ 个单位长度。\n\n$6$ 个单位区域至少被涂了两层涂料，是 $[-11,-8],[-4,-3],[0,2]$ 这些区域。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Painting the Fence S", "background": null, "description": "Farmer John has devised a brilliant method to paint the long fence next to his barn (think of the fence as a one-dimensional number line). He simply attaches a paint brush to his favorite cow Bessie, and then retires to drink a cold glass of water as Bessie walks back and forth across the fence, applying paint to any segment of the fence that she walks past.\n\nBessie starts at position 0 on the fence and follows a sequence of N moves (1 <= N <= 100,000). Example moves might be \"10 L\", meaning Bessie moves 10 units to the left, or \"15 R\", meaning Bessie moves 15 units to the right. Given a list of all of Bessie's moves, FJ would like to know what area of the fence gets painted with at least K coats of paint. Bessie will move at most 1,000,000,000 units away from the origin during her walk.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] 刷墙 Painting the Fence B", "background": null, "description": "Farmer John 已经设计了一种方法来装饰谷仓旁边的长栅栏（把栅栏认为是一根一维的线）。他把一只画刷绑在他最喜爱的奶牛 Bessie 身上，之后就去喝一杯冰水，而 Bessie 隔着栅栏来回走，当她走过某个地方，这里的一段栅栏就被刷上了涂料。\n\nBessie 从栅栏上的位置 $0$ 开始，并且遵循着一个 $N$ 次移动的次序（$1\\le N\\le10^5$）。例如 `10 L` 表示 Bessie 向左移动了 $10$ 个单位长度，`15 R` 表示 Bessie 向右移动了 $15$ 个单位长度。现给出 Bessie 所有移动的列表，Farmer John 想要知道哪些区域的栅栏至少涂了两层涂料（只涂一层涂料的区域可能在大雨中被洗掉）。Bessie 在她的行走中最远到达距起始点 $10^9$ 个单位长度。", "inputFormat": "第 $1$ 行：一个整型数 $N$。\n\n第 $2 \\sim N+1$ 行：每行描述了 Bessie 的 $N$ 次移动中的一次，例如 `15 L`。", "outputFormat": "$1$ 行：被至少涂了两层涂料的区域总数。", "hint": "【样例解释】\n\nBessie 从位置 $0$ 开始，向右移动 $2$ 个单位长度，向左移动 $6$ 个单位长度，向右移动 $1$ 个单位长度，向左移动 $8$ 个单位长度，最后向右移动 $3$ 个单位长度。\n\n$6$ 个单位区域至少被涂了两层涂料，是 $[-11,-8],[-4,-3],[0,2]$ 这些区域。", "locale": "zh-CN"}}}
{"pid": "P2071", "type": "P", "difficulty": 4, "samples": [["4\n1 2\n1 3\n1 2\n1 3\n1 3\n2 4\n1 3\n2 3\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分图"], "title": "座位安排", "background": "公元二零一四年四月十七日，小明参加了省赛，在一路上，他遇到了许多问题，请你帮他解决。\n", "description": "已知车上有 $N$ 排座位，有 $2N$ 个人参加省赛，每排座位只能坐两人，且每个人都有自己想坐的排数，问最多使多少人坐到自己想坐的位置。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行至第 $2N+1$ 行，每行两个正整数 $S_{i, 1},S_{i, 2}$，为每个人想坐的排数。", "outputFormat": "一个非负整数，为最多使得多少人满意。\n", "hint": "对于 $10\\%$ 的数据，$n \\le 10$；\n\n对于 $30\\%$ 的数据，$n \\le 50$；\n\n对于 $60\\%$ 的数据，$n \\le 200$；\n\n对于 $100\\%$ 的数据，$n \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Seat Arrangement", "background": "On April 17, 2014, Xiaoming participated in a provincial contest. Along the way, he encountered many problems. Please help him solve them.", "description": "There are $N$ rows of seats on the bus, and $2N$ people heading to the provincial contest. Each row can seat two people, and each person has two preferred rows they are willing to sit in. What is the maximum number of people who can be seated in one of their preferred rows?", "inputFormat": "- The first line contains a positive integer $N$.\n- From the second line to line $2N+1$, for $i = 1, 2, \\ldots, 2N$, each line contains two positive integers $S_{i, 1}, S_{i, 2}$, representing the rows the $i$-th person wants to sit in.", "outputFormat": "A non-negative integer, the maximum number of satisfied people.", "hint": "Constraints:\n- For 10% of the testdata, $N \\le 10$.\n- For 30% of the testdata, $N \\le 50$.\n- For 60% of the testdata, $N \\le 200$.\n- For 100% of the testdata, $N \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "座位安排", "background": "公元二零一四年四月十七日，小明参加了省赛，在一路上，他遇到了许多问题，请你帮他解决。\n", "description": "已知车上有 $N$ 排座位，有 $2N$ 个人参加省赛，每排座位只能坐两人，且每个人都有自己想坐的排数，问最多使多少人坐到自己想坐的位置。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行至第 $2N+1$ 行，每行两个正整数 $S_{i, 1},S_{i, 2}$，为每个人想坐的排数。", "outputFormat": "一个非负整数，为最多使得多少人满意。\n", "hint": "对于 $10\\%$ 的数据，$n \\le 10$；\n\n对于 $30\\%$ 的数据，$n \\le 50$；\n\n对于 $60\\%$ 的数据，$n \\le 200$；\n\n对于 $100\\%$ 的数据，$n \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P2072", "type": "P", "difficulty": 3, "samples": [["10 4 3\r\n1 2 3 4 3 4 3 2 1 2\r\n", "3\r\n6\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线性数据结构"], "title": "宗教问题", "background": "在一个地区有许多种宗教，不同信仰的教徒经常发生矛盾，作为治安管理的人需要把这些人分开，以免矛盾激化。", "description": "已知一个地方有 $M$ 种宗教（编号为 $1\\sim M$），有 $N$ 个教徒（编号为 $1\\sim N$），每个教徒信且只信一种宗教。\n\n现在要**按顺序**把这 $N$ 个教徒分成一些集体，每个集体的危险值定义为这个集体中的宗教种数，且一个集体的宗教种类不能超过 $K$ 种，否则就会无限危险。\n\n**问题：**\n\n1. 这 $N$ 个教徒至少要分为几个集体？\n2. 这些集体的危险值总和至少为多少？", "inputFormat": "第一行三个正整数 $N,M,K$，以空格隔开。\n\n第二行 $N$ 个正整数，为每个教徒信的宗教编号。", "outputFormat": "第一行一个正整数，为最少集体数。\n\n第二行一个正整数，为最小危险值。", "hint": "【样例解释】\n\n一种最优的划分方案为：\n\n$$[1,2,3]\\ \\ /\\ \\ [4,3,4,3,2]\\ \\ /\\ \\ [1,2]$$\n\n【数据范围】\n\n对于 $20\\%$ 的数据，$N \\le 20$。\n\n对于 $50\\%$ 的数据，$N \\le 100$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 1000$，$1 \\le K < M \\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Religious Problem", "background": "In a region there are many religions. Believers of different faiths often have conflicts. As the person responsible for public security, you need to separate them to prevent escalation.", "description": "It is known that there are $M$ religions (numbered $1\\sim M$) and $N$ believers (numbered $1\\sim N$), and each believer believes in exactly one religion.\n\nNow you need to split these $N$ believers, in order, into several groups. The danger value of a group is defined as the number of distinct religions in that group, and a group may not contain more than $K$ religions; otherwise it is infinitely dangerous.\n\nProblem:\n1. Into how many groups at least must these $N$ believers be divided?\n2. What is the minimum possible sum of the danger values of these groups?", "inputFormat": "The first line contains three positive integers $N,M,K$, separated by spaces.\n\nThe second line contains $N$ positive integers, the religion number of each believer.", "outputFormat": "The first line contains one positive integer, the minimum number of groups.\n\nThe second line contains one positive integer, the minimum total danger value.", "hint": "Sample explanation:\n\nOne optimal partition is:\n$$[1,2,3]\\ \\ /\\ \\ [4,3,4,3,2]\\ \\ /\\ \\ [1,2]$$\n\nConstraints:\n\nFor $20\\%$ of the testdata, $N \\le 20$.\n\nFor $50\\%$ of the testdata, $N \\le 100$.\n\nFor $100\\%$ of the testdata, $1 \\le N \\le 1000$, $1 \\le K < M \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "宗教问题", "background": "在一个地区有许多种宗教，不同信仰的教徒经常发生矛盾，作为治安管理的人需要把这些人分开，以免矛盾激化。", "description": "已知一个地方有 $M$ 种宗教（编号为 $1\\sim M$），有 $N$ 个教徒（编号为 $1\\sim N$），每个教徒信且只信一种宗教。\n\n现在要**按顺序**把这 $N$ 个教徒分成一些集体，每个集体的危险值定义为这个集体中的宗教种数，且一个集体的宗教种类不能超过 $K$ 种，否则就会无限危险。\n\n**问题：**\n\n1. 这 $N$ 个教徒至少要分为几个集体？\n2. 这些集体的危险值总和至少为多少？", "inputFormat": "第一行三个正整数 $N,M,K$，以空格隔开。\n\n第二行 $N$ 个正整数，为每个教徒信的宗教编号。", "outputFormat": "第一行一个正整数，为最少集体数。\n\n第二行一个正整数，为最小危险值。", "hint": "【样例解释】\n\n一种最优的划分方案为：\n\n$$[1,2,3]\\ \\ /\\ \\ [4,3,4,3,2]\\ \\ /\\ \\ [1,2]$$\n\n【数据范围】\n\n对于 $20\\%$ 的数据，$N \\le 20$。\n\n对于 $50\\%$ 的数据，$N \\le 100$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 1000$，$1 \\le K < M \\le 20$。", "locale": "zh-CN"}}}
{"pid": "P2073", "type": "P", "difficulty": 3, "samples": [["1 1 1\n1 2 5\n2\n1 3 3\n3\n1 5 2\n-1\n", "8 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "平衡树"], "title": "送花", "background": "小明准备给小红送一束花，以表达他对小红的爱意。他在花店看中了一些花，准备用它们包成花束。\n", "description": "这些花都很漂亮，每朵花有一个美丽值 $W$，价格为 $C$。\n\n小明一开始有一个空的花束，他不断地向里面添加花。他有以下几种操作：\n\n- $1\\ W\\ C$：添加一朵美丽值为 $W$，价格为 $C$ 的花。  \n**如果此时花束中已经有了相等价格的花，那么这朵花不能加入花束。**\n- $2$：删除当前花束里最贵的一朵花。\n- $3$：删除当前花束里最便宜的一朵花。\n- $-1$：完成添加与删除，开始包装花束。\n\n**当花束为空时，忽略操作 $2$ 和 $3$。**\n\n请你写一个程序，计算出开始包装花束时，花束中所有花的美丽值的总和，以及小明需要为花束付出的总价格。", "inputFormat": "若干行，每行一个操作，以 $-1$ 结束。", "outputFormat": "一行，两个空格隔开的正整数表示开始包装花束时，花束中所有花的美丽值的总和。以及小明需要为花束付出的总价格。", "hint": "设操作数为 $m$。\n\n- 对于 $20\\%$ 数据，$m \\le 100$，$1\\le W,C\\le 10^3$。\n- 对于全部数据，$m \\le 10^5$，$1\\le W,C\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Sending Flowers", "background": "Xiao Ming plans to give Xiao Hong a bouquet of flowers to express his love. He picked out some flowers at the shop and intends to bundle them into a bouquet.", "description": "Each flower is beautiful, with a beauty value $W$ and a price $C$.\n\nXiao Ming starts with an empty bouquet and keeps adding flowers. He has the following operations:\n\n- $1\\ W\\ C$: Add a flower with beauty value $W$ and price $C$.  \n  If there is already a flower in the bouquet with the same price, this flower cannot be added.\n- $2$: Remove the most expensive flower currently in the bouquet.\n- $3$: Remove the cheapest flower currently in the bouquet.\n- $-1$: Finish adding and removing, and start wrapping the bouquet.\n\nWhen the bouquet is empty, ignore operations $2$ and $3$.\n\nPlease write a program to compute, at the moment wrapping starts, the sum of the beauty values of all flowers in the bouquet and the total price Xiao Ming needs to pay for the bouquet.", "inputFormat": "Multiple lines, one operation per line, ending with $-1$.", "outputFormat": "One line with two space-separated positive integers: the sum of the beauty values of all flowers in the bouquet at the moment wrapping starts, and the total price Xiao Ming needs to pay.", "hint": "Let the number of operations be $m$.\n\n- For $20\\%$ of the testdata, $m \\le 100$, $1\\le W,C\\le 10^3$.\n- For all testdata, $m \\le 10^5$, $1\\le W,C\\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "送花", "background": "小明准备给小红送一束花，以表达他对小红的爱意。他在花店看中了一些花，准备用它们包成花束。\n", "description": "这些花都很漂亮，每朵花有一个美丽值 $W$，价格为 $C$。\n\n小明一开始有一个空的花束，他不断地向里面添加花。他有以下几种操作：\n\n- $1\\ W\\ C$：添加一朵美丽值为 $W$，价格为 $C$ 的花。  \n**如果此时花束中已经有了相等价格的花，那么这朵花不能加入花束。**\n- $2$：删除当前花束里最贵的一朵花。\n- $3$：删除当前花束里最便宜的一朵花。\n- $-1$：完成添加与删除，开始包装花束。\n\n**当花束为空时，忽略操作 $2$ 和 $3$。**\n\n请你写一个程序，计算出开始包装花束时，花束中所有花的美丽值的总和，以及小明需要为花束付出的总价格。", "inputFormat": "若干行，每行一个操作，以 $-1$ 结束。", "outputFormat": "一行，两个空格隔开的正整数表示开始包装花束时，花束中所有花的美丽值的总和。以及小明需要为花束付出的总价格。", "hint": "设操作数为 $m$。\n\n- 对于 $20\\%$ 数据，$m \\le 100$，$1\\le W,C\\le 10^3$。\n- 对于全部数据，$m \\le 10^5$，$1\\le W,C\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2074", "type": "P", "difficulty": 2, "samples": [["4 5 3 2\r\n1 2\r\n3 4\r\n4 5\r\n", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "危险区域", "background": "一个恐怖组织在一座城市中安放了定时炸弹，其威力巨大，现在这里的警长想知道最坏的情况下会有多少街区受威胁。", "description": "在一个城市有 $N \\times M$ 个街区，每个街区由坐标描述，如图所示：\n\n\n\n|  | $1$ | $2$ | $3$ | $\\cdots$ | $M$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $(1,1)$ | $(1,2)$ | $(1,3)$ | $\\cdots$ | $(1,M)$ |\n| $2$ | $(2,1)$ | $(2,2)$ | $(2,3)$ | $\\cdots$ | $(2,M)$ |\n| $3$ | $(3,1)$ | $(3,2)$ | $(3,3)$ | $\\cdots$ | $(3,M)$ |\n| $\\vdots$ |  |  |  | $\\ddots$ |  |\n| $N$ | $(N,1)$ | $(N,2)$ | $(N,3)$ | $\\cdots$ | $(N,M)$ |\n\n现在已知有一个恐怖组织在其中的一个街区安放了定时炸弹，其威力为 $t$，即所有到这个街区的直线距离小于等于 $t$ 的街区都会受威胁，已知有 $k$ 个可能的炸弹安放位置，现在这里的警长想知道最坏的情况下会有多少街区受威胁。\n", "inputFormat": "第一行四个正整数 $n,m,k,t$。\n\n接下来 $k$ 行每行两个正整数 $x_i,y_i$，描述每个可能安放炸弹的街区。", "outputFormat": "\n一个正整数为在最坏情况下有多少街区会受威胁。", "hint": "**数据规模与约定**\n\n对于$20\\%$的数据 $k=1$。\n\n对于 $50\\%$ 的数据 $1 \\le n,m \\le 1000$，$1 \\le k \\le 20$，$1\\le t \\le 100$。\n\n对于 $100\\%$ 的数据 $1 \\le n,m \\le 10^5$，$1 \\le k \\le 50$，$t \\le 300$。\n\nfixed by @[$\\color{#5EB95E}{\\textsf{Cppsteve}}$](https://www.luogu.com.cn/user/479296)", "locale": "zh-CN", "translations": {"en": {"title": "Danger Zone", "background": "A terrorist organization has planted a time bomb in a city, with great destructive power. The chief of police wants to know, in the worst case, how many blocks will be threatened.", "description": "In a city there are $N \\times M$ blocks, each described by coordinates, as shown below:\n\n|  | $1$ | $2$ | $3$ | $\\cdots$ | $M$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $(1,1)$ | $(1,2)$ | $(1,3)$ | $\\cdots$ | $(1,M)$ |\n| $2$ | $(2,1)$ | $(2,2)$ | $(2,3)$ | $\\cdots$ | $(2,M)$ |\n| $3$ | $(3,1)$ | $(3,2)$ | $(3,3)$ | $\\cdots$ | $(3,M)$ |\n| $\\vdots$ |  |  |  | $\\ddots$ |  |\n| $N$ | $(N,1)$ | $(N,2)$ | $(N,3)$ | $\\cdots$ | $(N,M)$ |\n\nIt is known that a terrorist organization has planted a time bomb in one of the blocks, with power $t$, meaning all blocks whose straight-line (Euclidean) distance to that block is less than or equal to $t$ will be threatened. There are $k$ possible bomb locations. The chief wants to know, in the worst case, how many blocks will be threatened.", "inputFormat": "The first line contains four positive integers $n, m, k, t$.\n\nThe next $k$ lines each contain two positive integers $x_i, y_i$, describing each possible block where the bomb may be placed.", "outputFormat": "Output a single positive integer: the number of blocks that will be threatened in the worst case.", "hint": "Constraints\n\nFor $20\\%$ of the testdata, $k = 1$.\n\nFor $50\\%$ of the testdata, $1 \\le n, m \\le 1000$, $1 \\le k \\le 20$, $1 \\le t \\le 100$.\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 10^5$, $1 \\le k \\le 50$, $t \\le 300$.\n\nfixed by @[$\\color{#5EB95E}{\\textsf{Cppsteve}}$](https://www.luogu.com.cn/user/479296)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "危险区域", "background": "一个恐怖组织在一座城市中安放了定时炸弹，其威力巨大，现在这里的警长想知道最坏的情况下会有多少街区受威胁。", "description": "在一个城市有 $N \\times M$ 个街区，每个街区由坐标描述，如图所示：\n\n\n\n|  | $1$ | $2$ | $3$ | $\\cdots$ | $M$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $(1,1)$ | $(1,2)$ | $(1,3)$ | $\\cdots$ | $(1,M)$ |\n| $2$ | $(2,1)$ | $(2,2)$ | $(2,3)$ | $\\cdots$ | $(2,M)$ |\n| $3$ | $(3,1)$ | $(3,2)$ | $(3,3)$ | $\\cdots$ | $(3,M)$ |\n| $\\vdots$ |  |  |  | $\\ddots$ |  |\n| $N$ | $(N,1)$ | $(N,2)$ | $(N,3)$ | $\\cdots$ | $(N,M)$ |\n\n现在已知有一个恐怖组织在其中的一个街区安放了定时炸弹，其威力为 $t$，即所有到这个街区的直线距离小于等于 $t$ 的街区都会受威胁，已知有 $k$ 个可能的炸弹安放位置，现在这里的警长想知道最坏的情况下会有多少街区受威胁。\n", "inputFormat": "第一行四个正整数 $n,m,k,t$。\n\n接下来 $k$ 行每行两个正整数 $x_i,y_i$，描述每个可能安放炸弹的街区。", "outputFormat": "\n一个正整数为在最坏情况下有多少街区会受威胁。", "hint": "**数据规模与约定**\n\n对于$20\\%$的数据 $k=1$。\n\n对于 $50\\%$ 的数据 $1 \\le n,m \\le 1000$，$1 \\le k \\le 20$，$1\\le t \\le 100$。\n\n对于 $100\\%$ 的数据 $1 \\le n,m \\le 10^5$，$1 \\le k \\le 50$，$t \\le 300$。\n\nfixed by @[$\\color{#5EB95E}{\\textsf{Cppsteve}}$](https://www.luogu.com.cn/user/479296)", "locale": "zh-CN"}}}
{"pid": "P2075", "type": "P", "difficulty": 7, "samples": [["5 3\n1 5 3 4 2\n1 5\n1 3\n3 5", "3\n2\n2"], ["10 10\n4 8 1 10 7 5 2 6 3 9\n1 10\n1 4\n1 5\n5 10\n3 9\n3 10\n3 10\n5 8\n4 5\n1 2", "4\n3\n3\n3\n3\n4\n4\n2\n1\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["分块"], "title": "区间 LIS", "background": "", "description": "给定 $1\\sim n$ 的排列 $p$，$q$ 次询问，每次查询区间 $[l,r]$ 内的最长上升子序列长度。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个正整数，表示排列 $p$。\n\n之后 $q$ 行，每行两个正整数 $l,r$，表示一次询问。", "outputFormat": "对于每次询问，输出对应的答案。", "hint": "| 子任务编号 | $n$ | $q$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10^3$ | $20$ |\n| $2$ | $10^3$ | $10^5$ | $30$ |\n| $3$ | $10^5$ | $10^5$ | $50$ |\n\n对于所有数据，$1\\leq n,q\\leq10^5$，$1\\leq l\\leq r\\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "Interval LIS", "background": "", "description": "Given a permutation $p$ of $1\\sim n$, there are $q$ queries. Each query asks for the length of the longest increasing subsequence within the interval $[l,r]$.", "inputFormat": "The first line contains two positive integers $n,q$.\nThe second line contains $n$ positive integers, representing the permutation $p$.\nThen $q$ lines follow, each containing two positive integers $l,r$, representing a query.", "outputFormat": "For each query, output the corresponding answer.", "hint": "| Subtask ID | $n$ | $q$ | Score |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10^3$ | $20$ |\n| $2$ | $10^3$ | $10^5$ | $30$ |\n| $3$ | $10^5$ | $10^5$ | $50$ |\n\nFor all testdata, $1\\leq n,q\\leq10^5$, $1\\leq l\\leq r\\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "区间 LIS", "background": "", "description": "给定 $1\\sim n$ 的排列 $p$，$q$ 次询问，每次查询区间 $[l,r]$ 内的最长上升子序列长度。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个正整数，表示排列 $p$。\n\n之后 $q$ 行，每行两个正整数 $l,r$，表示一次询问。", "outputFormat": "对于每次询问，输出对应的答案。", "hint": "| 子任务编号 | $n$ | $q$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | $10^3$ | $20$ |\n| $2$ | $10^3$ | $10^5$ | $30$ |\n| $3$ | $10^5$ | $10^5$ | $50$ |\n\n对于所有数据，$1\\leq n,q\\leq10^5$，$1\\leq l\\leq r\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P2076", "type": "P", "difficulty": 5, "samples": [["6\n3 8\n4 9\n2 1\n10 5\n4 9\n2 0", "21\n5 2\n6 3\n1 2\n3 1\n4 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "Special Judge", "生成树"], "title": "曼哈顿距离最小生成树", "background": "题目修改自 [Library Checker](https://judge.yosupo.jp/problem/manhattanmst)，及[数据生成器 / 校验器来源](https://github.com/yosupo06/library-checker-problems/tree/master/geo/manhattanmst)。\n\n请注意原题所有下标从 $0$ 开始（$0$-indexed），本题所有下标从 $1$ 开始（$1$-indexed）。", "description": "给定平面上的 $n$ 个点 $(x_1,y_1),(x_2,y_2),\\ldots,(x_n,y_n)$。\n\n考虑一个有 $n$ 个结点的完全图，对于 $1\\le u,v\\le n(u\\ne v)$，结点 $u,v$ 之间有一条权值为 $|x_u-x_v|+|y_u-y_v|$ 的边。\n\n请求出该图的最小生成树。", "inputFormat": "第一行输入一个整数 $n$ 表示点的个数。\n\n接下来 $n$ 行，第 $i$ 行输入两个整数 $(x_i,y_i)$，表示第 $i$ 个点的坐标。", "outputFormat": "第一行包含一个整数 $x$ 表示最小生成树的边权之和。\n\n接下来 $(n-1)$ 行，第 $i$ 行包含两个整数 $(u_i,v_i)$，表示最小生成树中的一条边。\n\n**如果有多解，你可以输出任意一种。**", "hint": "对于 $20\\%$ 的数据，$1\\le n\\le 1000$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times 10^5$，$0\\le x_i,y_i\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Manhattan Distance Minimum Spanning Tree", "background": "This problem is modified from [Library Checker](https://judge.yosupo.jp/problem/manhattanmst), and the [data generator / validator source](https://github.com/yosupo06/library-checker-problems/tree/master/geo/manhattanmst).\n\nNote that in the original problem all indices are $0$-indexed, while in this problem all indices are $1$-indexed.", "description": "Given $n$ points $(x_1,y_1),(x_2,y_2),\\ldots,(x_n,y_n)$ in the plane.\n\nConsider the complete graph with $n$ nodes. For $1 \\le u, v \\le n$ and $u \\ne v$, there is an edge between nodes $u$ and $v$ with weight $|x_u-x_v|+|y_u-y_v|$.\n\nFind a minimum spanning tree of this graph.", "inputFormat": "The first line contains an integer $n$, the number of points.\n\nThe next $n$ lines, the $i$-th line contains two integers $(x_i,y_i)$, the coordinates of the $i$-th point.", "outputFormat": "The first line contains an integer $x$, the sum of edge weights in the minimum spanning tree.\n\nThen $(n-1)$ lines follow. The $i$-th line contains two integers $(u_i,v_i)$, representing one edge in the minimum spanning tree.\n\nIf there are multiple valid answers, you may output any of them.", "hint": "For $20\\%$ of the testdata, $1 \\le n \\le 1000$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 2 \\times 10^5$, $0 \\le x_i,y_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "曼哈顿距离最小生成树", "background": "题目修改自 [Library Checker](https://judge.yosupo.jp/problem/manhattanmst)，及[数据生成器 / 校验器来源](https://github.com/yosupo06/library-checker-problems/tree/master/geo/manhattanmst)。\n\n请注意原题所有下标从 $0$ 开始（$0$-indexed），本题所有下标从 $1$ 开始（$1$-indexed）。", "description": "给定平面上的 $n$ 个点 $(x_1,y_1),(x_2,y_2),\\ldots,(x_n,y_n)$。\n\n考虑一个有 $n$ 个结点的完全图，对于 $1\\le u,v\\le n(u\\ne v)$，结点 $u,v$ 之间有一条权值为 $|x_u-x_v|+|y_u-y_v|$ 的边。\n\n请求出该图的最小生成树。", "inputFormat": "第一行输入一个整数 $n$ 表示点的个数。\n\n接下来 $n$ 行，第 $i$ 行输入两个整数 $(x_i,y_i)$，表示第 $i$ 个点的坐标。", "outputFormat": "第一行包含一个整数 $x$ 表示最小生成树的边权之和。\n\n接下来 $(n-1)$ 行，第 $i$ 行包含两个整数 $(u_i,v_i)$，表示最小生成树中的一条边。\n\n**如果有多解，你可以输出任意一种。**", "hint": "对于 $20\\%$ 的数据，$1\\le n\\le 1000$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2\\times 10^5$，$0\\le x_i,y_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2077", "type": "P", "difficulty": 2, "samples": [["5 3\n2 4 3 2\n3 4 3 4 3\n2 3 2 3 1\n", "5\n7\n11\n14\n16\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "红绿灯", "background": null, "description": "在一个城市，有一条笔直的公路，在这条公路上有 $N$ 个十字路口，每个路口都设有一个红绿灯，已知相邻的两个路口距离为 $A_i$ 千米 $(1\\le i < N)$，每个路口的红灯时间为 $R_i$，绿灯时间为 $G_i$，没有黄灯，现在有一辆车从距离 $1$ 号十字路口 $M$ 千米的位置出发，且此时所有路口的红绿灯刚好从红灯跳到绿灯，问这辆车通过每个路口的时间（不能闯红灯，这辆车的速度为 $1$ 千米每分钟）。", "inputFormat": "第一行两个正整数 $N$ 和 $M$\n\n第二行 $N-1$ 个正整数 $A_i$\n\n第三行 $N$ 个正整数 $R_i$，为红灯时间（分钟）\n\n第四行 $N$ 个正整数 $G_i$，为绿灯时间（分钟）", "outputFormat": "共 $N$ 行，每行一个正整数，为这辆车通过每个十字路口的最早时间。", "hint": "对于 $50\\%$ 的数据   $N\\le 1000$；\n\n对于 $100\\%$ 的数据   $N\\le 10^5$，$M,A_i\\le 10$，$R_i，G_i\\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "Traffic Lights", "background": "", "description": "In a city, there is a straight road with $N$ intersections, each equipped with a traffic light. The distance between two adjacent intersections is $A_i$ kilometers $(1 \\le i < N)$. At each intersection, the red light lasts $R_i$ minutes and the green light lasts $G_i$ minutes; there is no yellow light. Now, a car starts from a point $M$ kilometers away from intersection $1$, and at that moment, all traffic lights have just switched from red to green. Find the time when this car passes each intersection (the car must not run red lights; its speed is $1$ kilometer per minute).", "inputFormat": "The first line contains two positive integers $N$ and $M$.\n\nThe second line contains $N - 1$ positive integers $A_i$.\n\nThe third line contains $N$ positive integers $R_i$, the red-light durations (minutes).\n\nThe fourth line contains $N$ positive integers $G_i$, the green-light durations (minutes).", "outputFormat": "Output $N$ lines, each containing one positive integer, which is the earliest time when the car passes each intersection.", "hint": "For $50\\%$ of the testdata, $N \\le 1000$.\n\nFor $100\\%$ of the testdata, $N \\le 10^5$, $M, A_i \\le 10$, $R_i, G_i \\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "红绿灯", "background": null, "description": "在一个城市，有一条笔直的公路，在这条公路上有 $N$ 个十字路口，每个路口都设有一个红绿灯，已知相邻的两个路口距离为 $A_i$ 千米 $(1\\le i < N)$，每个路口的红灯时间为 $R_i$，绿灯时间为 $G_i$，没有黄灯，现在有一辆车从距离 $1$ 号十字路口 $M$ 千米的位置出发，且此时所有路口的红绿灯刚好从红灯跳到绿灯，问这辆车通过每个路口的时间（不能闯红灯，这辆车的速度为 $1$ 千米每分钟）。", "inputFormat": "第一行两个正整数 $N$ 和 $M$\n\n第二行 $N-1$ 个正整数 $A_i$\n\n第三行 $N$ 个正整数 $R_i$，为红灯时间（分钟）\n\n第四行 $N$ 个正整数 $G_i$，为绿灯时间（分钟）", "outputFormat": "共 $N$ 行，每行一个正整数，为这辆车通过每个十字路口的最早时间。", "hint": "对于 $50\\%$ 的数据   $N\\le 1000$；\n\n对于 $100\\%$ 的数据   $N\\le 10^5$，$M,A_i\\le 10$，$R_i，G_i\\le 5$。", "locale": "zh-CN"}}}
{"pid": "P2078", "type": "P", "difficulty": 3, "samples": [["4 3 4 2\n1 1\n1 2\n2 3\n1 3\n-1 -2\n-3 -3\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集", "递归"], "title": "朋友", "background": "小明在 A 公司工作，小红在 B 公司工作。", "description": "这两个公司的员工有一个特点：一个公司的员工都是同性。\n\nA 公司有 $N$ 名员工，其中有 $P$ 对朋友关系。B 公司有 $M$ 名员工，其中有 $Q$ 对朋友关系。朋友的朋友一定还是朋友。\n\n每对朋友关系用两个整数 $(X_i,Y_i)$ 组成，表示朋友的编号分别为 $X_i,Y_i$。男人的编号是正数，女人的编号是负数。小明的编号是 $1$，小红的编号是 $-1$。\n\n大家都知道，小明和小红是朋友，而我们定义，**一组互为朋友的异性可以配成情侣**，那么，请你写一个程序求出两公司之间，通过小明和小红认识的人最多一共能配成多少对情侣（包括他们自己）。", "inputFormat": "输入的第一行，包含 $4$ 个空格隔开的正整数 $N,M,P,Q$。\n\n之后 $P$ 行，每行两个正整数 $X_i,Y_i$。\n\n之后 $Q$ 行，每行两个负整数 $X_i,Y_i$。", "outputFormat": "输出一行一个正整数，表示通过小明和小红认识的人最多一共能配成多少对情侣（包括他们自己）。", "hint": "对于 $30 \\%$ 的数据，$N,M \\le 100$，$P,Q \\le 200$；\n\n对于 $80 \\%$ 的数据，$N,M \\le 4 \\times 10^3$，$P,Q \\le 10^4$；\n\n对于 $100 \\%$ 的数据，$N,M \\le 10^4$，$P,Q \\le 2 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Friends", "background": "Xiao Ming works at company A, and Xiao Hong works at company B.", "description": "The employees of each company share one characteristic: everyone in the same company is of the same sex.\n\nCompany A has $N$ employees with $P$ friend pairs. Company B has $M$ employees with $Q$ friend pairs. Friends of friends are also friends.\n\nEach friend pair is given as two integers $(X_i, Y_i)$, indicating the IDs of the two friends are $X_i$ and $Y_i$. Male IDs are positive numbers, and female IDs are negative numbers. Xiao Ming’s ID is $1$, and Xiao Hong’s ID is $-1$.\n\nIt is known that Xiao Ming and Xiao Hong are friends. Please write a program to find the maximum total number of couples that can be formed between the two companies via people known through Xiao Ming and Xiao Hong (including themselves).", "inputFormat": "The first line contains $4$ space-separated positive integers $N,M,P,Q$.\n\nThen follow $P$ lines, each containing two positive integers $X_i, Y_i$.\n\nThen follow $Q$ lines, each containing two negative integers $X_i, Y_i$.", "outputFormat": "Output a single positive integer on one line, representing the maximum total number of couples that can be formed via people known through Xiao Ming and Xiao Hong (including themselves).", "hint": "For $30 \\%$ of the testdata, $N,M \\le 100$, $P,Q \\le 200$.\n\nFor $80 \\%$ of the testdata, $N,M \\le 4 \\times 10^3$, $P,Q \\le 10^4$.\n\nFor $100 \\%$ of the testdata, $N,M \\le 10^4$, $P,Q \\le 2 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "朋友", "background": "小明在 A 公司工作，小红在 B 公司工作。", "description": "这两个公司的员工有一个特点：一个公司的员工都是同性。\n\nA 公司有 $N$ 名员工，其中有 $P$ 对朋友关系。B 公司有 $M$ 名员工，其中有 $Q$ 对朋友关系。朋友的朋友一定还是朋友。\n\n每对朋友关系用两个整数 $(X_i,Y_i)$ 组成，表示朋友的编号分别为 $X_i,Y_i$。男人的编号是正数，女人的编号是负数。小明的编号是 $1$，小红的编号是 $-1$。\n\n大家都知道，小明和小红是朋友，而我们定义，**一组互为朋友的异性可以配成情侣**，那么，请你写一个程序求出两公司之间，通过小明和小红认识的人最多一共能配成多少对情侣（包括他们自己）。", "inputFormat": "输入的第一行，包含 $4$ 个空格隔开的正整数 $N,M,P,Q$。\n\n之后 $P$ 行，每行两个正整数 $X_i,Y_i$。\n\n之后 $Q$ 行，每行两个负整数 $X_i,Y_i$。", "outputFormat": "输出一行一个正整数，表示通过小明和小红认识的人最多一共能配成多少对情侣（包括他们自己）。", "hint": "对于 $30 \\%$ 的数据，$N,M \\le 100$，$P,Q \\le 200$；\n\n对于 $80 \\%$ 的数据，$N,M \\le 4 \\times 10^3$，$P,Q \\le 10^4$；\n\n对于 $100 \\%$ 的数据，$N,M \\le 10^4$，$P,Q \\le 2 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2079", "type": "P", "difficulty": 4, "samples": [["4 10\n5 -1 3\n2 2 2\n11 -5 100\n3 -3 10\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "烛光晚餐", "background": "小明准备请小红去一家咖啡厅，共进烛光晚餐。小红高兴地和他一起去了咖啡厅。", "description": "小红说：“小明，你点菜吧。”小明看到菜单上有 $N$ 道菜，每道菜的价格是 $C_i$。小明对每道菜的喜爱程度是 $X_i$，小红对每道菜的喜爱程度是 $Y_i$。（喜爱程度可能为负数）（小明：以我对她的了解，我给你的数据不会错的）\n\n小明带了 $V$ 元钱，他点的菜的总价格不能超过 $V$（小明：当然得我请客啦，显得我大方。）\n\n小明希望让小红吃得开心，所以当然要让她的总喜爱程度尽量大。当然，小明也要考虑自己的感受，点的所有菜的总喜爱程度需要大于等于 $0$。（小明：要是我吃得不好，她看见我会难过的）\n\n请你帮小明写一个程序，计算出他的总喜爱程度大于等于 $0$ 的前提下，小红的喜爱程度的最大值。（小明：你的程序一定要靠谱啊，我得给她一个好印象）\n\n", "inputFormat": "第一行，两个正整数 $N$，$V$。\n\n之后 $N$ 行，每行 $3$ 个空格隔开的正整数 $C_i$，整数 $X_i$，$Y_i$。\n", "outputFormat": "一行，一个正整数，表示他的总喜爱程度大于等于 $0$ 的前提下，小红的喜爱程度的最大值。如果这个最大值小于 $0$，输出 $-1$.\n", "hint": "\n对于 $10\\%$ 的数据，$N\\leq10$，$V\\leq50$。\n\n对于 $30\\%$ 的数据，$X_i,Y_i\\geq0$.\n\n对于 $100\\%$ 的数据，$N\\leq100$，$V\\leq500$，$|X_i|\\leq5$，$|Y_i|\\leq10^3$.\n", "locale": "zh-CN", "translations": {"en": {"title": "Candlelight Dinner", "background": "Xiaoming plans to invite Xiaohong to a café for a candlelight dinner. Xiaohong happily goes to the café with him.", "description": "Xiaohong says: “Xiaoming, you order.” Xiaoming sees $N$ dishes on the menu, with each dish priced at $C_i$. Xiaoming’s preference score for each dish is $X_i$, and Xiaohong’s preference score for each dish is $Y_i$. (Preference scores may be negative.) (Xiaoming: Based on what I know about her, the data I give you won’t be wrong.)\n\nXiaoming brought $V$ yuan, and the total price of the dishes he orders cannot exceed $V$. (Xiaoming: Of course I’m paying, it makes me look generous.)\n\nXiaoming wants to make Xiaohong happy, so he wants her total preference score to be as large as possible. Of course, he also needs to consider his own feelings: the total preference score of all ordered dishes for him must be greater than or equal to $0$. (Xiaoming: If I don’t eat well, she’ll feel bad when she sees it.)\n\nPlease help Xiaoming write a program to compute the maximum possible total preference score of Xiaohong under the condition that his own total preference score is greater than or equal to $0$. (Xiaoming: Your program must be reliable. I need to make a good impression on her.)", "inputFormat": "The first line contains two positive integers $N$, $V$.\n\nThen follow $N$ lines, each containing three space-separated numbers: a positive integer $C_i$, and integers $X_i$, $Y_i$.", "outputFormat": "One line with one integer: the maximum possible total preference score of Xiaohong under the condition that Xiaoming’s total preference score is greater than or equal to $0$. If this maximum is less than $0$, output $-1$.", "hint": "For $10\\%$ of the testdata, $N \\leq 10$, $V \\leq 50$.\n\nFor $30\\%$ of the testdata, $X_i, Y_i \\geq 0$.\n\nFor $100\\%$ of the testdata, $N \\leq 100$, $V \\leq 500$, $|X_i| \\leq 5$, $|Y_i| \\leq 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "烛光晚餐", "background": "小明准备请小红去一家咖啡厅，共进烛光晚餐。小红高兴地和他一起去了咖啡厅。", "description": "小红说：“小明，你点菜吧。”小明看到菜单上有 $N$ 道菜，每道菜的价格是 $C_i$。小明对每道菜的喜爱程度是 $X_i$，小红对每道菜的喜爱程度是 $Y_i$。（喜爱程度可能为负数）（小明：以我对她的了解，我给你的数据不会错的）\n\n小明带了 $V$ 元钱，他点的菜的总价格不能超过 $V$（小明：当然得我请客啦，显得我大方。）\n\n小明希望让小红吃得开心，所以当然要让她的总喜爱程度尽量大。当然，小明也要考虑自己的感受，点的所有菜的总喜爱程度需要大于等于 $0$。（小明：要是我吃得不好，她看见我会难过的）\n\n请你帮小明写一个程序，计算出他的总喜爱程度大于等于 $0$ 的前提下，小红的喜爱程度的最大值。（小明：你的程序一定要靠谱啊，我得给她一个好印象）\n\n", "inputFormat": "第一行，两个正整数 $N$，$V$。\n\n之后 $N$ 行，每行 $3$ 个空格隔开的正整数 $C_i$，整数 $X_i$，$Y_i$。\n", "outputFormat": "一行，一个正整数，表示他的总喜爱程度大于等于 $0$ 的前提下，小红的喜爱程度的最大值。如果这个最大值小于 $0$，输出 $-1$.\n", "hint": "\n对于 $10\\%$ 的数据，$N\\leq10$，$V\\leq50$。\n\n对于 $30\\%$ 的数据，$X_i,Y_i\\geq0$.\n\n对于 $100\\%$ 的数据，$N\\leq100$，$V\\leq500$，$|X_i|\\leq5$，$|Y_i|\\leq10^3$.\n", "locale": "zh-CN"}}}
{"pid": "P2080", "type": "P", "difficulty": 3, "samples": [["4 15\n5 6\n-1 8\n7 2\n1 0\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "增进感情", "background": "小明和小红的感情，是慢慢发展起来的。\n", "description": "他们对对方分别有一个好感值。定义两人的亲密程度为两人的好感值之和。\n\n如果他们的亲密程度达到 $v$，则他们将走到一起。他们以后的生活将取决于两人的好感值之差的绝对值，这个值越小，他们的生活将越幸福。\n\n现在，他们对对方的好感值都为 $0$，小明有 $n$ 件事可以干，每件事可以增加他对小红的好感 $a_i$ 点，并且增加小红对他的好感 $b_i$ 点。（可能为负数）\n\n小明可以任选一些事做，请你帮小明求出怎样才能让他们的生活更加幸福（求出两人在一起的前提下，好感值之差的最小绝对值即可）。\n", "inputFormat": "第一行，两个正整数 $n,v$。\n\n之后 $n$ 行，每行两个空格隔开的整数 $a_i,b_i$。", "outputFormat": "\n一行，一个非负整数，表示两人在一起的前提下，好感值之差的最小绝对值。如果无论如何两人也无法在一起，输出 `-1`。", "hint": "#### 数据范围与约定\n\n- 对于 $20\\%$ 数据，保证 $n  \\le 10$。\n- 对于 $100\\%$ 数据，保证 $1 \\le n \\le 30$，$1 \\le \\left\\vert a_i\\right\\vert,\\left\\vert b_i\\right\\vert \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Enhancing Feelings", "background": "Xiao Ming and Xiao Hong's relationship develops slowly.", "description": "They each have an affection value for the other. Define their intimacy level as the sum of their affection values.\n\nIf their intimacy level reaches at least $v$, they will get together. Their future happiness will depend on the absolute value of the difference between their affection values; the smaller this value is, the happier their life will be.\n\nCurrently, both of their affection values are $0$. Xiao Ming has $n$ tasks he can do. Each task can increase his affection for Xiao Hong by $a_i$ points and increase Xiao Hong's affection for him by $b_i$ points (possibly negative).\n\nXiao Ming may choose any subset of the tasks to do. Please help Xiao Ming find how to make their life happier (that is, under the premise that they get together, compute the minimum absolute difference between their affection values).", "inputFormat": "The first line contains two positive integers $n, v$.\n\nThen follow $n$ lines, each containing two space-separated integers $a_i, b_i$.", "outputFormat": "Output one non-negative integer, the minimum absolute difference between their affection values under the premise that they get together. If they cannot get together no matter what, output `-1`.", "hint": "#### Constraints\n\n- For $20\\%$ of the testdata, it is guaranteed that $n \\le 10$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 30$, $1 \\le \\lvert a_i \\rvert, \\lvert b_i \\rvert \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "增进感情", "background": "小明和小红的感情，是慢慢发展起来的。\n", "description": "他们对对方分别有一个好感值。定义两人的亲密程度为两人的好感值之和。\n\n如果他们的亲密程度达到 $v$，则他们将走到一起。他们以后的生活将取决于两人的好感值之差的绝对值，这个值越小，他们的生活将越幸福。\n\n现在，他们对对方的好感值都为 $0$，小明有 $n$ 件事可以干，每件事可以增加他对小红的好感 $a_i$ 点，并且增加小红对他的好感 $b_i$ 点。（可能为负数）\n\n小明可以任选一些事做，请你帮小明求出怎样才能让他们的生活更加幸福（求出两人在一起的前提下，好感值之差的最小绝对值即可）。\n", "inputFormat": "第一行，两个正整数 $n,v$。\n\n之后 $n$ 行，每行两个空格隔开的整数 $a_i,b_i$。", "outputFormat": "\n一行，一个非负整数，表示两人在一起的前提下，好感值之差的最小绝对值。如果无论如何两人也无法在一起，输出 `-1`。", "hint": "#### 数据范围与约定\n\n- 对于 $20\\%$ 数据，保证 $n  \\le 10$。\n- 对于 $100\\%$ 数据，保证 $1 \\le n \\le 30$，$1 \\le \\left\\vert a_i\\right\\vert,\\left\\vert b_i\\right\\vert \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2081", "type": "P", "difficulty": 6, "samples": [["4 3\n1 2 3\n2 3 1\n3 4 4", "6.00000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "图论", "递推", "2012", "NOI", "Special Judge", "期望", "基环树"], "title": "[NOI2012] 迷失游乐园", "background": null, "description": "放假了，小 Z 觉得呆在家里特别无聊，于是决定一个人去游乐园玩。\n\n进入游乐园后，小 Z 看了看游乐园的地图，发现可以将游乐园抽象成有 $n$ 个景点、$m$ 条道路的无向连通图，且该图中至多有一个环（即 $m$ 只可能等于 $n$ 或者 $n-1$）。\n\n小 Z 现在所在的大门也正好是一个景点。小 Z 不知道什么好玩，于是他决定，从当前位置出发，每次随机去一个和当前景点有道路相连的景点，并且同一个景点不去两次（包括起始景点）。贪玩的小 Z 会一直游玩，直到当前景点的相邻景点都已经访问过为止。\n\n小 Z 所有经过的景点按顺序构成一条非重复路径，他想知道这条路径的期望长度是多少？\n\n小 Z 把游乐园的抽象地图画下来带回了家，可是忘了标哪个点是大门，他只好假设每个景点都可能是大门（即每个景点作为起始点的概率是一样的）。同时，他每次在选择下一个景点时会等概率地随机选择一个还没去过的相邻景点。", "inputFormat": "第一行是两个整数 $n$ 和 $m$ ，分别表示景点数和道路数。\n\n接下来 $m$ 行，每行三个整数 $X_i, Y_i, W_i$，分别表示第 $i$ 条路径的两个景点为 $X_i, Y_i$，路径长 $W_i$。所有景点的编号从 $1$ 至 $n$，两个景点之间至多只有一条道路，不存在一条起点和终点相同的道路（保证图是简单图）。", "outputFormat": "共一行，包含一个实数，即路径的期望长度，保留五位小数。", "hint": "### 样例解释\n\n样例数据中共有 $6$ 条不同的路径：\n\n|路径|长度|概率|\n|:-:|:-:|:-:| \n|$1\\rightarrow 4$|$8$|$\\frac{1}{4}$| \n|$2\\rightarrow 1$|$3$|$\\frac{1}{8}$| \n|$2\\rightarrow 4$|$5$|$\\frac{1}{8}$|\n|$3\\rightarrow 1$|$4$|$\\frac{1}{8}$|\n|$3\\rightarrow 4$|$4$|$\\frac{1}{8}$|\n|$4\\rightarrow 1$|$8$|$\\frac{1}{4}$|\n\n因此期望长度 $= \\frac{8}{4} + \\frac{3}{8} + \\frac{5}{8} +\\frac{4}{8} + \\frac{4}{8} +\\frac{8}{4} = 6.00$\n\n### 评分方法\n\n本题没有部分分，你程序的输出只有和标准答案的差距不超过 $0.01$ 时，才能获得该测试点的满分，否则不得分。\n\n\n### 数据规模和约定\n\n对于 $100\\%$ 的数据，$1\\leq W_i\\leq 100$。\n\n|测试点编号|$n$|$m$|备注| \n|:-:|:-:|:-:|:-:|\n|$1$| $n=10$| $m = n-1$| 保证图是链状 |\n|$2$| $n=100$|  $m = n-1$|只有节点 $1$ 的度数大于 $2$| \n|$3$| $n=1000$| $m = n-1$| / | \n|$4$| $n=10^5$| $m = n-1$| / | \n|$5$| $n=10^5$|  $m = n-1$| / | \n|$6$| $n=10$| $m = n$ | / | \n|$7$| $n=100$| $m = n$| 环中节点个数 $\\leq 5$| \n|$8$| $n=1000$|$m = n$| 环中节点个数 $\\leq 10$| \n|$9$| $n=10^5$ | $m = n$| 环中节点个数 $\\leq 15$| \n|$10$| $n=10^5$|$m = n$| 环中节点个数 $\\leq 20$|", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2012] Lost Amusement Park", "background": "", "description": "It is vacation time. Xiao Z feels very bored staying at home, so he decides to go to the amusement park alone.\n\nAfter entering the park, Xiao Z looks at the map and finds that the park can be abstracted as an undirected connected graph with $n$ attractions and $m$ roads, and the graph has at most one cycle (i.e., $m$ can only be equal to $n$ or $n - 1$).\n\nThe gate where Xiao Z is currently located also happens to be an attraction. Not knowing what is fun, he decides to start from his current position and each time randomly go to a neighboring attraction connected by a road, and never visit the same attraction twice (including the starting attraction). He will keep playing until all neighboring attractions of the current attraction have already been visited.\n\nAll the attractions Xiao Z passes through form a simple path in order. He wants to know the expected length of this path.\n\nXiao Z drew the abstract map of the park and brought it home, but forgot to mark which point is the gate. He has to assume that every attraction could be the gate (i.e., each attraction is equally likely to be the starting point). At the same time, each time he chooses the next attraction, he will uniformly at random choose one unvisited neighboring attraction.", "inputFormat": "The first line contains two integers $n$ and $m$, denoting the number of attractions and the number of roads, respectively.\n\nThe next $m$ lines each contain three integers $X_i, Y_i, W_i$, indicating that the endpoints of the $i$-th road are $X_i$ and $Y_i$, and the length of this road is $W_i$. The attractions are numbered from $1$ to $n$. There is at most one road between any two attractions, and there are no self-loops (the graph is guaranteed to be simple).", "outputFormat": "Output one line containing a real number, the expected length of the path, with five digits after the decimal point.", "hint": "### Sample Explanation\n\nIn the sample, there are $6$ different paths:\n\n|路径|长度|概率|\n|:-:|:-:|:-:| \n|$1\\rightarrow 4$|$8$|$\\frac{1}{4}$| \n|$2\\rightarrow 1$|$3$|$\\frac{1}{8}$| \n|$2\\rightarrow 4$|$5$|$\\frac{1}{8}$|\n|$3\\rightarrow 1$|$4$|$\\frac{1}{8}$|\n|$3\\rightarrow 4$|$4$|$\\frac{1}{8}$|\n|$4\\rightarrow 1$|$8$|$\\frac{1}{4}$|\n\nTherefore, the expected length $= \\frac{8}{4} + \\frac{3}{8} + \\frac{5}{8} + \\frac{4}{8} + \\frac{4}{8} + \\frac{8}{4} = 6.00$.\n\n### Scoring\n\nThere are no partial scores. Your program receives full score for a test point only if the absolute error from the standard answer does not exceed $0.01$; otherwise, you receive zero for that test point.\n\n### Constraints\n\nFor $100\\%$ of the testdata, $1 \\leq W_i \\leq 100$.\n\n|测试点编号|$n$|$m$|备注| \n|:-:|:-:|:-:|:-:|\n|$1$| $n = 10$| $m = n - 1$| The graph is a path. |\n|$2$| $n = 100$| $m = n - 1$| Only node $1$ has degree greater than $2$. | \n|$3$| $n = 1000$| $m = n - 1$| / | \n|$4$| $n = 10^5$| $m = n - 1$| / | \n|$5$| $n = 10^5$| $m = n - 1$| / | \n|$6$| $n = 10$| $m = n$ | / | \n|$7$| $n = 100$| $m = n$| Number of vertices on the cycle $\\leq 5$. | \n|$8$| $n = 1000$| $m = n$| Number of vertices on the cycle $\\leq 10$. | \n|$9$| $n = 10^5$ | $m = n$| Number of vertices on the cycle $\\leq 15$. | \n|$10$| $n = 10^5$| $m = n$| Number of vertices on the cycle $\\leq 20$. |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2012] 迷失游乐园", "background": null, "description": "放假了，小 Z 觉得呆在家里特别无聊，于是决定一个人去游乐园玩。\n\n进入游乐园后，小 Z 看了看游乐园的地图，发现可以将游乐园抽象成有 $n$ 个景点、$m$ 条道路的无向连通图，且该图中至多有一个环（即 $m$ 只可能等于 $n$ 或者 $n-1$）。\n\n小 Z 现在所在的大门也正好是一个景点。小 Z 不知道什么好玩，于是他决定，从当前位置出发，每次随机去一个和当前景点有道路相连的景点，并且同一个景点不去两次（包括起始景点）。贪玩的小 Z 会一直游玩，直到当前景点的相邻景点都已经访问过为止。\n\n小 Z 所有经过的景点按顺序构成一条非重复路径，他想知道这条路径的期望长度是多少？\n\n小 Z 把游乐园的抽象地图画下来带回了家，可是忘了标哪个点是大门，他只好假设每个景点都可能是大门（即每个景点作为起始点的概率是一样的）。同时，他每次在选择下一个景点时会等概率地随机选择一个还没去过的相邻景点。", "inputFormat": "第一行是两个整数 $n$ 和 $m$ ，分别表示景点数和道路数。\n\n接下来 $m$ 行，每行三个整数 $X_i, Y_i, W_i$，分别表示第 $i$ 条路径的两个景点为 $X_i, Y_i$，路径长 $W_i$。所有景点的编号从 $1$ 至 $n$，两个景点之间至多只有一条道路，不存在一条起点和终点相同的道路（保证图是简单图）。", "outputFormat": "共一行，包含一个实数，即路径的期望长度，保留五位小数。", "hint": "### 样例解释\n\n样例数据中共有 $6$ 条不同的路径：\n\n|路径|长度|概率|\n|:-:|:-:|:-:| \n|$1\\rightarrow 4$|$8$|$\\frac{1}{4}$| \n|$2\\rightarrow 1$|$3$|$\\frac{1}{8}$| \n|$2\\rightarrow 4$|$5$|$\\frac{1}{8}$|\n|$3\\rightarrow 1$|$4$|$\\frac{1}{8}$|\n|$3\\rightarrow 4$|$4$|$\\frac{1}{8}$|\n|$4\\rightarrow 1$|$8$|$\\frac{1}{4}$|\n\n因此期望长度 $= \\frac{8}{4} + \\frac{3}{8} + \\frac{5}{8} +\\frac{4}{8} + \\frac{4}{8} +\\frac{8}{4} = 6.00$\n\n### 评分方法\n\n本题没有部分分，你程序的输出只有和标准答案的差距不超过 $0.01$ 时，才能获得该测试点的满分，否则不得分。\n\n\n### 数据规模和约定\n\n对于 $100\\%$ 的数据，$1\\leq W_i\\leq 100$。\n\n|测试点编号|$n$|$m$|备注| \n|:-:|:-:|:-:|:-:|\n|$1$| $n=10$| $m = n-1$| 保证图是链状 |\n|$2$| $n=100$|  $m = n-1$|只有节点 $1$ 的度数大于 $2$| \n|$3$| $n=1000$| $m = n-1$| / | \n|$4$| $n=10^5$| $m = n-1$| / | \n|$5$| $n=10^5$|  $m = n-1$| / | \n|$6$| $n=10$| $m = n$ | / | \n|$7$| $n=100$| $m = n$| 环中节点个数 $\\leq 5$| \n|$8$| $n=1000$|$m = n$| 环中节点个数 $\\leq 10$| \n|$9$| $n=10^5$ | $m = n$| 环中节点个数 $\\leq 15$| \n|$10$| $n=10^5$|$m = n$| 环中节点个数 $\\leq 20$|", "locale": "zh-CN"}}}
{"pid": "P2082", "type": "P", "difficulty": 3, "samples": [["3\r\n1 100000\r\n200001 1000000\r\n100000000 100000001", "900002"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "区间覆盖（加强版）", "background": "", "description": "已知有 $N$ 个区间，每个区间的范围是 $[s_i,t_i]$，请求出区间覆盖后的总长。", "inputFormat": "第一行一个正整数 $N$，表示区间个数。\n\n接下来 $N$ 行，每行两个正整数，表示 $s_i$ 和 $t_i$。", "outputFormat": "共一行，一个正整数，为覆盖后的区间总长。", "hint": "对于 $40 \\%$ 的数据，$N \\le 1000$，$1 \\le s_i < t_i \\le 10000$。\n\n对于 $100 \\%$ 的数据 ，$N \\le 10^5$，$1 \\le s_i < t_i \\le 10^{17}$。", "locale": "zh-CN", "translations": {"en": {"title": "Interval Coverage (Enhanced Version)", "background": "", "description": "Given $N$ intervals, each with range $[s_i, t_i]$, compute the total length of the union of these intervals.", "inputFormat": "The first line contains a positive integer $N$, representing the number of intervals.\nThen $N$ lines follow, each containing two positive integers, representing $s_i$ and $t_i$.", "outputFormat": "Output one line with a single positive integer, which is the total length of the union after covering the intervals.", "hint": "For $40 \\%$ of the testdata, $N \\le 1000$, $1 \\le s_i < t_i \\le 10000$.\nFor $100 \\%$ of the testdata, $N \\le 10^5$, $1 \\le s_i < t_i \\le 10^{17}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "区间覆盖（加强版）", "background": "", "description": "已知有 $N$ 个区间，每个区间的范围是 $[s_i,t_i]$，请求出区间覆盖后的总长。", "inputFormat": "第一行一个正整数 $N$，表示区间个数。\n\n接下来 $N$ 行，每行两个正整数，表示 $s_i$ 和 $t_i$。", "outputFormat": "共一行，一个正整数，为覆盖后的区间总长。", "hint": "对于 $40 \\%$ 的数据，$N \\le 1000$，$1 \\le s_i < t_i \\le 10000$。\n\n对于 $100 \\%$ 的数据 ，$N \\le 10^5$，$1 \\le s_i < t_i \\le 10^{17}$。", "locale": "zh-CN"}}}
{"pid": "P2083", "type": "P", "difficulty": 3, "samples": [["3 3 2 2 3\n1 3 3 3 2 1\n2 3 1 1 2 3\n1 1 1 2 2 3\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "树形数据结构", "洛谷原创"], "title": "找人", "background": "", "description": "小明要到他的同学家玩，可他只知道他住在某一单元，却不知住在哪个房间。那个单元有 $n$ 层（$1,2,\\ldots,n$），每层有 $m$（$1,2,\\ldots,m$）个房间。\n\n小明会从第一层的某个房间开始找，他找的方式也很特别，每次到了一个房间，如果不是他的同学，他就会询问这个人，然后他就会去那人告诉他的房间号，如果还不是，他就会继续按这个方法找下去，直到找到。当然，他也有可能找不到同学。他的体力也是有限的，他每爬一层楼梯就会消耗 $v$ 体力值。你的任务就是求找到同学耗费的最少体力值，如果找不到，就输出 `impossible` 。", "inputFormat": "第一行有五个整数，分别代表 $n$，$m$，$v$，$x$，$y$（$x$，$y$ 表示同学只在 $x$ 层 $y$ 房间）。\n\n$2\\sim n+1$ 行，每行 $m\\times 2$ 个数字，第 $i+1$ 行 $j\\times2-1$ 个数 $a_k$ 和第 $j\\times2$ 个数 $a_{k+1} $表示住在 $i$ 层 $j$ 房间的人提供的信息是 $a_k$ 层和 $a_{k+1}$ 房间。（同学的信息就是自己的房间号。）\n", "outputFormat": "一个数，即答案。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n\\le1000$，$1 \\leq m\\le100$，$1 \\leq v\\le50$。", "locale": "zh-CN", "translations": {"en": {"title": "Finding Someone", "background": "", "description": "Xiao Ming is going to visit a classmate, but he only knows the unit and not the exact room. The unit has $n$ floors ($1, 2, \\ldots, n$). Each floor has $m$ rooms ($1, 2, \\ldots, m$).\n\nXiao Ming will start searching from some room on the first floor. His search method is special: each time he arrives at a room, if the person there is not his classmate, he will ask that person, then go to the room number (a floor and a room) told by that person. If that room is still not his classmate’s, he continues in the same way until he finds the classmate. Of course, it may be impossible to find the classmate.\n\nHis stamina is limited: for each floor he climbs, he spends $v$ stamina points. Your task is to compute the minimum stamina needed to find the classmate. If it is impossible to find the classmate, output `impossible`.\n\nYou may choose any starting room on floor $1$.", "inputFormat": "The first line contains five integers $n$, $m$, $v$, $x$, $y$ (the classmate lives on floor $x$, room $y$).\n\nLines $2$ to $n+1$: each line contains $m \\times 2$ integers. In the $(i+1)$-th line, for each $j$ from $1$ to $m$, the $(j \\times 2 - 1)$-th and $(j \\times 2)$-th integers denote the floor and room given by the person living on floor $i$, room $j$. (For the classmate’s own room $(x, y)$, the information is exactly their own room number, i.e., $(x, y)$.)", "outputFormat": "Print one integer: the answer. If it is impossible to find the classmate, print `impossible`.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 1000$, $1 \\leq m \\leq 100$, $1 \\leq v \\leq 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "找人", "background": "", "description": "小明要到他的同学家玩，可他只知道他住在某一单元，却不知住在哪个房间。那个单元有 $n$ 层（$1,2,\\ldots,n$），每层有 $m$（$1,2,\\ldots,m$）个房间。\n\n小明会从第一层的某个房间开始找，他找的方式也很特别，每次到了一个房间，如果不是他的同学，他就会询问这个人，然后他就会去那人告诉他的房间号，如果还不是，他就会继续按这个方法找下去，直到找到。当然，他也有可能找不到同学。他的体力也是有限的，他每爬一层楼梯就会消耗 $v$ 体力值。你的任务就是求找到同学耗费的最少体力值，如果找不到，就输出 `impossible` 。", "inputFormat": "第一行有五个整数，分别代表 $n$，$m$，$v$，$x$，$y$（$x$，$y$ 表示同学只在 $x$ 层 $y$ 房间）。\n\n$2\\sim n+1$ 行，每行 $m\\times 2$ 个数字，第 $i+1$ 行 $j\\times2-1$ 个数 $a_k$ 和第 $j\\times2$ 个数 $a_{k+1} $表示住在 $i$ 层 $j$ 房间的人提供的信息是 $a_k$ 层和 $a_{k+1}$ 房间。（同学的信息就是自己的房间号。）\n", "outputFormat": "一个数，即答案。\n", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n\\le1000$，$1 \\leq m\\le100$，$1 \\leq v\\le50$。", "locale": "zh-CN"}}}
{"pid": "P2084", "type": "P", "difficulty": 1, "samples": [["2 10101", "1*2^4+1*2^2+1*2^0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "线性数据结构", "洛谷原创"], "title": "进制转换", "background": "", "description": "今天小明学会了进制转换，比如 $(10101)_2$，那么它的十进制表示的式子就是 :\n\n$$1\\times 2^4+0\\times 2^3+1\\times 2^2+0\\times 2^1+1\\times 2^0$$\n\n那么请你编程实现，将一个 $M$ 进制的数 $N$ 转换成十进制表示的式子。\n\n注意：当系数为 $0$ 时，该单项式要省略。\n", "inputFormat": "两个整数，$M$ 和 $N$，中间用空格隔开。\n", "outputFormat": "共一行，一个十进制表示的式子。", "hint": "对于 $100\\%$ 的数据，$1<M<10$，$N$ 的位数不超过 $1000$ 且均为正整数。", "locale": "zh-CN", "translations": {"en": {"title": "Base Conversion", "background": "", "description": "Today, Xiao Ming learned base conversion. For example, for $(10101)_2$, its decimal representation as an expression is:\n\n$$1\\times 2^4+0\\times 2^3+1\\times 2^2+0\\times 2^1+1\\times 2^0$$\n\nPlease write a program that converts a number $N$ in base $M$ into its decimal representation as an expression.\n\nNote: When a coefficient is $0$, that term should be omitted.", "inputFormat": "Two integers, $M$ and $N$, separated by a space.", "outputFormat": "One line: the decimal representation as an expression.", "hint": "For $100\\%$ of the testdata, $1 < M < 10$, the number of digits of $N$ does not exceed $1000$, and each digit is an integer in $[0, M-1]$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "进制转换", "background": "", "description": "今天小明学会了进制转换，比如 $(10101)_2$，那么它的十进制表示的式子就是 :\n\n$$1\\times 2^4+0\\times 2^3+1\\times 2^2+0\\times 2^1+1\\times 2^0$$\n\n那么请你编程实现，将一个 $M$ 进制的数 $N$ 转换成十进制表示的式子。\n\n注意：当系数为 $0$ 时，该单项式要省略。\n", "inputFormat": "两个整数，$M$ 和 $N$，中间用空格隔开。\n", "outputFormat": "共一行，一个十进制表示的式子。", "hint": "对于 $100\\%$ 的数据，$1<M<10$，$N$ 的位数不超过 $1000$ 且均为正整数。", "locale": "zh-CN"}}}
{"pid": "P2085", "type": "P", "difficulty": 3, "samples": [["3 10\n4 5 3\n3 4 5\n1 7 1\n", "9 12 12 19 25 29 31 44 45 54"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "堆", "排序", "优先队列"], "title": "最小函数值", "background": null, "description": "有 $n$ 个函数，分别为 $F_1,F_2,\\dots,F_n$。定义 $F_i(x)=A_ix^2+B_ix+C_i(x\\in\\mathbb N*)$。给定这些 $A_i$、$B_i$ 和 $C_i$，请求出所有函数的所有函数值中最小的 $m$ 个（如有重复的要输出多个）。", "inputFormat": "第一行输入两个正整数 $n$ 和 $m$。  \n\n以下 $n$ 行每行三个正整数，其中第 $i$ 行的三个数分别为 $A_i$、$B_i$ 和 $C_i$。", "outputFormat": "输出将这 $n$ 个函数所有可以生成的函数值排序后的前 $m$ 个元素。这 $m$ 个数应该输出到一行，用空格隔开。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n,m\\le10000$，$1 \\leq A_i\\le10$,\n$0 \\leq B_i\\le100$,\n$0 \\leq C_i\\le10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Minimum Function Values", "background": "", "description": "There are $n$ functions, denoted $F_1, F_2, \\dots, F_n$. Define $F_i(x) = A_i x^2 + B_i x + C_i$ for $x \\in \\mathbb{N}^*$. Given these $A_i$, $B_i$, and $C_i$, find the smallest $m$ values among all function values of all functions (if there are duplicates, output them multiple times).", "inputFormat": "The first line contains two positive integers $n$ and $m$.\n\nEach of the following $n$ lines contains three integers; on the $i$-th line they are $A_i$, $B_i$, and $C_i$.", "outputFormat": "Output the first $m$ elements of the sorted sequence of all function values generated by the $n$ functions. Print these $m$ numbers on one line, separated by spaces.", "hint": "Constraints\n\nFor all test points, it is guaranteed that $1 \\leq n, m \\leq 10000$, $1 \\leq A_i \\leq 10$, $0 \\leq B_i \\leq 100$, $0 \\leq C_i \\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最小函数值", "background": null, "description": "有 $n$ 个函数，分别为 $F_1,F_2,\\dots,F_n$。定义 $F_i(x)=A_ix^2+B_ix+C_i(x\\in\\mathbb N*)$。给定这些 $A_i$、$B_i$ 和 $C_i$，请求出所有函数的所有函数值中最小的 $m$ 个（如有重复的要输出多个）。", "inputFormat": "第一行输入两个正整数 $n$ 和 $m$。  \n\n以下 $n$ 行每行三个正整数，其中第 $i$ 行的三个数分别为 $A_i$、$B_i$ 和 $C_i$。", "outputFormat": "输出将这 $n$ 个函数所有可以生成的函数值排序后的前 $m$ 个元素。这 $m$ 个数应该输出到一行，用空格隔开。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n,m\\le10000$，$1 \\leq A_i\\le10$,\n$0 \\leq B_i\\le100$,\n$0 \\leq C_i\\le10^4$。", "locale": "zh-CN"}}}
{"pid": "P2086", "type": "P", "difficulty": 7, "samples": [["2 2\n1 1\n4\n6 12\n18 24\n0 0 0 1 0\n1 1 1 1 2 6\n1 2 1 2 2 6\n0 0 0 1 1", "6\n6"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2012", "线段树", "NOI", "最大公约数 gcd"], "title": "[NOI2012] 魔幻棋盘", "background": "", "description": "将要读二年级的小 Q 买了一款新型益智玩具——魔幻棋盘，它是一个 $N$ 行 $M$ 列的网格棋盘，每个格子中均有一个正整数。棋盘守护者在棋盘的第 $X$ 行第 $Y$ 列（行与列均从 $1$ 开始编号）并且始终不会移动。棋盘守护者会进行两种操作：\n\n* （a）询问：他会以自己所在位置为基础，向四周随机扩展出一块大小不定的矩形区域，向你询问这一区域内所有数的最大公约数是多少。\n* （b）修改：他会随意挑选棋盘上的一块矩形区域，将这一区域内的所有数同时加上一个给定的整数。\n\n游戏说明书上附有这样一句话“聪明的小朋友，当你连续答对 $19930324$ 次询问后会得到一个惊喜噢！”。小 Q 十分想得到这个惊喜，于是每天都在玩这个玩具。但由于他粗心大意，经常算错数，难以达到这个目标。于是他来向你寻求帮助，希望你帮他写一个程序来回答棋盘守护者的询问，并保证 $100\\%$ 的正确率。\n\n为了简化问题，你的程序只需要完成棋盘守护者的 $T$ 次操作，并且问题保证任何时刻棋盘上的数字均为不超过 $2^{62} - 1$ 的正整数。\n", "inputFormat": "第一行为两个正整数 $N,M$，表示棋盘的大小。\n\n第二行为两个正整数 $X,Y$，表示棋盘守护者的位置。\n\n第三行仅有一个正整数 $T$，表示棋盘守护者将进行 $T$ 次操作。\n\n接下来 $N$ 行，每行有 $M$ 个正整数，用来描述初始时棋盘上每个位置的数。\n\n接下来 $T$ 行，按操作的时间顺序给出 $T$ 次操作。每行描述一次操作，以一个数字 $0$ 或 $1$ 开头：\n\n* 若以数字 $0$ 开头，表示此操作为询问，随后会有四个非负整数 $x_1,y_1,x_2,y_2$，表示询问的区域是以棋盘守护者的位置为基础向上扩展\n $x_1$ 行，向下扩展 $x_2$ 行，向左扩展 $y_1$ 列，向右扩展 $y_2$ 列得到的矩形区域（详见样例）。 \n* 若以数字 $1$ 开头，表示此操作为修改，随后会有四个正整数 $x_1,y_1,x_2,y_2$ 和一个整数 $c$，表示修改区域的上、下边界分别为第 $x_1,x_2$ 行，左、右边界分别为第 $y_1,y_2$ 列（详见样例），在此矩形区域内的所有数统一加上 $c$（注意 $c$ 可能为负数）。\n", "outputFormat": "对于每次询问操作，每行输出一个数，表示该区域内所有数的最大公约数。\n", "hint": " ![](https://cdn.luogu.com.cn/upload/pic/2594.png) \n\n对于第一、第四次操作（查询操作）后，加粗部分表示查询区域。\n\n对于第二、第三次操作（修改操作）后，加粗部分表示修改区域。\n\n测试数据分为 A、B、C 三类：\n\nA 类数据占 $20\\%$，满足 $N \\leq 100$，$M \\leq 100$，$T \\leq 2\\times 10^4$。\n\nB 类数据占 $40\\%$，满足 $N = 1$，$M \\leq 5\\times 10^5$，$T \\leq 10^5$。\n\nC 类数据占 $40\\%$，满足 $N \\times M \\leq 5\\times 10^5$，$T \\leq 10^5$。\n\n在每类数据中，均有 $50\\%$ 的数据满足每次修改操作仅含一个格子（即 $x_1 = x_2$，$y_1 = y_2$）。\n\n输入数据保证满足题目描述中的所有性质。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2012] Magic Chessboard", "background": "", "description": "Little Q, who is about to enter second grade, bought a new type of puzzle toy — the Magic Chessboard. It is a grid board with $N$ rows and $M$ columns, and each cell contains a positive integer. The board guardian stands at the $X$-th row and the $Y$-th column (rows and columns are numbered starting from $1$) and will never move. The board guardian performs two types of operations:\n\n- (a) Query: Based on his position, he expands in the four directions to form a rectangle of arbitrary size and asks you for the greatest common divisor of all numbers in this region.\n- (b) Modify: He arbitrarily selects a rectangular region on the board and adds a given integer to all numbers in this region.\n\nThe game manual includes this sentence: “Smart kids, when you answer $19930324$ consecutive queries correctly, you will get a surprise!” Little Q really wants this surprise, so he plays this toy every day. However, because he is careless, he often makes mistakes and cannot reach this goal. He now seeks your help, hoping you can write a program to answer the guardian’s queries with $100\\%$ accuracy.\n\nTo simplify the problem, your program only needs to process $T$ operations from the board guardian, and it is guaranteed that at any time all numbers on the board are positive integers not exceeding $2^{62} - 1$.", "inputFormat": "The first line contains two positive integers $N, M$, representing the size of the board.\n\nThe second line contains two positive integers $X, Y$, representing the position of the board guardian.\n\nThe third line contains a single positive integer $T$, representing that the board guardian will perform $T$ operations.\n\nThe next $N$ lines each contain $M$ positive integers, describing the initial numbers at each position on the board.\n\nThe next $T$ lines, in chronological order, describe the $T$ operations. Each line starts with a digit $0$ or $1$:\n\n- If it starts with $0$, the operation is a query, followed by four non-negative integers $x_1, y_1, x_2, y_2$. The queried rectangle is obtained by expanding, based on the guardian’s position, $x_1$ rows upward, $x_2$ rows downward, $y_1$ columns to the left, and $y_2$ columns to the right (see the sample).\n- If it starts with $1$, the operation is a modification, followed by four positive integers $x_1, y_1, x_2, y_2$ and an integer $c$. The upper and lower boundaries of the modified region are rows $x_1$ and $x_2$, and the left and right boundaries are columns $y_1$ and $y_2$ (see the sample). All numbers in this rectangle are increased by $c$ (note that $c$ may be negative).", "outputFormat": "For each query operation, output one number per line, which is the greatest common divisor of all numbers in the specified region.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/2594.png)\n\nAfter the first and fourth operations (queries), the boldfaced part indicates the query region.\n\nAfter the second and third operations (modifications), the boldfaced part indicates the modification region.\n\nThe testdata is divided into three categories A, B, and C:\n\n- Category A accounts for $20\\%$, satisfying $N \\leq 100$, $M \\leq 100$, $T \\leq 2\\times 10^4$.\n- Category B accounts for $40\\%$, satisfying $N = 1$, $M \\leq 5\\times 10^5$, $T \\leq 10^5$.\n- Category C accounts for $40\\%$, satisfying $N \\times M \\leq 5\\times 10^5$, $T \\leq 10^5$.\n\nIn each category, $50\\%$ of the testdata satisfies that each modification affects only one cell (i.e., $x_1 = x_2$, $y_1 = y_2$).\n\nThe input data is guaranteed to satisfy all properties described in the statement.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2012] 魔幻棋盘", "background": "", "description": "将要读二年级的小 Q 买了一款新型益智玩具——魔幻棋盘，它是一个 $N$ 行 $M$ 列的网格棋盘，每个格子中均有一个正整数。棋盘守护者在棋盘的第 $X$ 行第 $Y$ 列（行与列均从 $1$ 开始编号）并且始终不会移动。棋盘守护者会进行两种操作：\n\n* （a）询问：他会以自己所在位置为基础，向四周随机扩展出一块大小不定的矩形区域，向你询问这一区域内所有数的最大公约数是多少。\n* （b）修改：他会随意挑选棋盘上的一块矩形区域，将这一区域内的所有数同时加上一个给定的整数。\n\n游戏说明书上附有这样一句话“聪明的小朋友，当你连续答对 $19930324$ 次询问后会得到一个惊喜噢！”。小 Q 十分想得到这个惊喜，于是每天都在玩这个玩具。但由于他粗心大意，经常算错数，难以达到这个目标。于是他来向你寻求帮助，希望你帮他写一个程序来回答棋盘守护者的询问，并保证 $100\\%$ 的正确率。\n\n为了简化问题，你的程序只需要完成棋盘守护者的 $T$ 次操作，并且问题保证任何时刻棋盘上的数字均为不超过 $2^{62} - 1$ 的正整数。\n", "inputFormat": "第一行为两个正整数 $N,M$，表示棋盘的大小。\n\n第二行为两个正整数 $X,Y$，表示棋盘守护者的位置。\n\n第三行仅有一个正整数 $T$，表示棋盘守护者将进行 $T$ 次操作。\n\n接下来 $N$ 行，每行有 $M$ 个正整数，用来描述初始时棋盘上每个位置的数。\n\n接下来 $T$ 行，按操作的时间顺序给出 $T$ 次操作。每行描述一次操作，以一个数字 $0$ 或 $1$ 开头：\n\n* 若以数字 $0$ 开头，表示此操作为询问，随后会有四个非负整数 $x_1,y_1,x_2,y_2$，表示询问的区域是以棋盘守护者的位置为基础向上扩展\n $x_1$ 行，向下扩展 $x_2$ 行，向左扩展 $y_1$ 列，向右扩展 $y_2$ 列得到的矩形区域（详见样例）。 \n* 若以数字 $1$ 开头，表示此操作为修改，随后会有四个正整数 $x_1,y_1,x_2,y_2$ 和一个整数 $c$，表示修改区域的上、下边界分别为第 $x_1,x_2$ 行，左、右边界分别为第 $y_1,y_2$ 列（详见样例），在此矩形区域内的所有数统一加上 $c$（注意 $c$ 可能为负数）。\n", "outputFormat": "对于每次询问操作，每行输出一个数，表示该区域内所有数的最大公约数。\n", "hint": " ![](https://cdn.luogu.com.cn/upload/pic/2594.png) \n\n对于第一、第四次操作（查询操作）后，加粗部分表示查询区域。\n\n对于第二、第三次操作（修改操作）后，加粗部分表示修改区域。\n\n测试数据分为 A、B、C 三类：\n\nA 类数据占 $20\\%$，满足 $N \\leq 100$，$M \\leq 100$，$T \\leq 2\\times 10^4$。\n\nB 类数据占 $40\\%$，满足 $N = 1$，$M \\leq 5\\times 10^5$，$T \\leq 10^5$。\n\nC 类数据占 $40\\%$，满足 $N \\times M \\leq 5\\times 10^5$，$T \\leq 10^5$。\n\n在每类数据中，均有 $50\\%$ 的数据满足每次修改操作仅含一个格子（即 $x_1 = x_2$，$y_1 = y_2$）。\n\n输入数据保证满足题目描述中的所有性质。\n", "locale": "zh-CN"}}}
{"pid": "P2087", "type": "P", "difficulty": 6, "samples": [["3 5 7\r\nC 1 2\r\nC 2 2\r\nW 1 2\r\nC 3 2\r\nW 1 2\r\nC 3 3\r\nW 1 3", "3\r\n3\r\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "平衡树"], "title": "GTY的人类基因组计划2", "background": "GTY 决心改变人类基因！！", "description": "GTY 召唤了 $n$ 个人来做实验，GTY 家的房子很大，有 $m$ 个房间一开始所有人都在 $1$ 号房间里，GTY 会命令某人去某个房间等待做实验，或者命令一段区间的房间开始实验，实验会获得一些实验信息点数，点数为房间里的人数，如果一个房间里的一群人已经做过实验了那么这些人将不会增加实验信息点数（不会增加是针对这一群人的，不是对这群人中的每个人，即 $1,2,3$ 做了实验，$1,2$ 再做实验还会增加 $2$ 点实验点数）。\n", "inputFormat": "第一行两个整数 $n,m,q (n,m,q \\leq 10^5)$ 表示人数，房间数和操作数\n\n接下来 $q$ 行每行一个操作 `C i j` 表示让第 $i$ 个人去房间 $j$，`W l r` 表示让区间 $[l,r]$ 的房间做实验。\n", "outputFormat": "对于每一个 $W$ 操作，输出一个数，表示此次操作所获得的实验点数。\n", "hint": "善用 STL。\n", "locale": "zh-CN", "translations": {"en": {"title": "GTY's Human Genome Project 2", "background": "GTY is determined to alter human genes!!", "description": "GTY summoned $n$ people for experiments. GTY's house is very large, with $m$ rooms. At the beginning, everyone is in room $1$. GTY will either command someone to go wait in a certain room, or command a segment of rooms to start an experiment. An experiment yields some experimental information points, equal to the number of people in the room. If a specific group of people in a room has already done an experiment together, then that exact group will not add experimental information points again. This “no increase” applies to that group as a whole, not to each individual; that is, if $1,2,3$ have done an experiment together, then $1,2$ doing an experiment together again will still add $2$ points.", "inputFormat": "The first line contains two integers $n,m,q (n,m,q \\leq 10^5)$, denoting the number of people, the number of rooms, and the number of operations.\n\nThen follow $q$ lines, each describing one operation: `C i j` means send person $i$ to room $j$; `W l r` means make all rooms in the interval $[l,r]$ conduct the experiment.", "outputFormat": "For each `W` operation, output one number, the points obtained by that operation.", "hint": "Make good use of STL.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "GTY的人类基因组计划2", "background": "GTY 决心改变人类基因！！", "description": "GTY 召唤了 $n$ 个人来做实验，GTY 家的房子很大，有 $m$ 个房间一开始所有人都在 $1$ 号房间里，GTY 会命令某人去某个房间等待做实验，或者命令一段区间的房间开始实验，实验会获得一些实验信息点数，点数为房间里的人数，如果一个房间里的一群人已经做过实验了那么这些人将不会增加实验信息点数（不会增加是针对这一群人的，不是对这群人中的每个人，即 $1,2,3$ 做了实验，$1,2$ 再做实验还会增加 $2$ 点实验点数）。\n", "inputFormat": "第一行两个整数 $n,m,q (n,m,q \\leq 10^5)$ 表示人数，房间数和操作数\n\n接下来 $q$ 行每行一个操作 `C i j` 表示让第 $i$ 个人去房间 $j$，`W l r` 表示让区间 $[l,r]$ 的房间做实验。\n", "outputFormat": "对于每一个 $W$ 操作，输出一个数，表示此次操作所获得的实验点数。\n", "hint": "善用 STL。\n", "locale": "zh-CN"}}}
{"pid": "P2088", "type": "P", "difficulty": 4, "samples": [["2 7\n1\n2\n3\n1\n3\n1\n3\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "果汁店的难题", "background": null, "description": "炎热的夏天，来上一杯现榨的冰爽果汁想想都是一件惬意的事情！话说小王就看准了这一商机，在学校附近开了这么一家果汁店，但是最近他碰到了一个不大不小的难题：小王的果汁店里准备了 $K$ 台榨汁机，当然每台榨汁机只能榨一种果汁，在某个时段内，一个客人点了某种果汁，如果恰好有某台果汁机榨过这种果汁，那么就直接给客人用这台果汁机接着榨就可以了，但是如果点的是一种新的果汁就需要找一台干净的果汁机来用，问题就出在这，如果这时候还有空的果汁机还好，如果没有的话小王就需要将某台刚才用过的拿去清洗，清洗的话呢就得浪费很多的时间和很多的水，小王是个很有经济头脑的人，他想知道在排队客人需求已知的情况下最少需要清洗多少次果汁机？假定开始时所有果汁机都是干净的，为了方便描述，我们将果汁编号为 $1$（橙汁），$2$（苹果汁），$3$（葡萄汁）......\n\n[友情提示：本店不售卖混合果汁]", "inputFormat": "每组测试数据第一行包括两个整数 $K,N$，其中，$K$ 表示小王准备了 $K$ 台干净的榨汁机，$N$ 表示排队等待的有 $N$ 个客人，接下来 $N$ 行，每行一个整数表示一个客人点的果汁种类 $X_i$。", "outputFormat": "输出在当前的请求序列下，小王最少需要清洗果汁机的次数。", "hint": "$1\\le K\\le 10$，$1\\le N\\le 100$。\n\n$1\\le x_i\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "The Juice Shop's Dilemma", "background": "", "description": "On a hot summer day, having a freshly squeezed, ice-cold juice is a delightful treat. Seeing this business opportunity, Xiao Wang opened a juice shop near the school. However, he recently ran into a not-so-small, not-so-big problem: Xiao Wang prepared $K$ juicers in his shop, and each juicer can only squeeze one kind of juice. Over a period of time, when a customer orders a certain type of juice, if there happens to be a juicer that has already been used for that juice, then he can directly use that juicer again for the customer. But if the ordered juice is a new type, he needs to find a clean juicer to use. Here comes the issue: if there are still unused clean juicers, that’s fine; otherwise, Xiao Wang needs to take one that was used earlier and wash it. Washing takes a lot of time and water. Being economically minded, Xiao Wang wants to know, given the known sequence of customer orders, what is the minimal number of times the juicers must be washed? Assume that all juicers are clean at the start. For convenience, we number the juices as $1$ (orange), $2$ (apple), $3$ (grape), and so on.\n\n[Friendly reminder: This shop does not sell mixed juice.]", "inputFormat": "For each test case, the first line contains two integers $K, N$, where $K$ is the number of clean juicers Xiao Wang has prepared, and $N$ is the number of customers waiting in line. The next $N$ lines each contain one integer, representing the type of juice ordered by a customer, denoted as $X_i$.", "outputFormat": "Output the minimal number of times the juicers must be washed for the given request sequence.", "hint": "$1 \\le K \\le 10$, $1 \\le N \\le 100$.\n\n$1 \\le X_i \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "果汁店的难题", "background": null, "description": "炎热的夏天，来上一杯现榨的冰爽果汁想想都是一件惬意的事情！话说小王就看准了这一商机，在学校附近开了这么一家果汁店，但是最近他碰到了一个不大不小的难题：小王的果汁店里准备了 $K$ 台榨汁机，当然每台榨汁机只能榨一种果汁，在某个时段内，一个客人点了某种果汁，如果恰好有某台果汁机榨过这种果汁，那么就直接给客人用这台果汁机接着榨就可以了，但是如果点的是一种新的果汁就需要找一台干净的果汁机来用，问题就出在这，如果这时候还有空的果汁机还好，如果没有的话小王就需要将某台刚才用过的拿去清洗，清洗的话呢就得浪费很多的时间和很多的水，小王是个很有经济头脑的人，他想知道在排队客人需求已知的情况下最少需要清洗多少次果汁机？假定开始时所有果汁机都是干净的，为了方便描述，我们将果汁编号为 $1$（橙汁），$2$（苹果汁），$3$（葡萄汁）......\n\n[友情提示：本店不售卖混合果汁]", "inputFormat": "每组测试数据第一行包括两个整数 $K,N$，其中，$K$ 表示小王准备了 $K$ 台干净的榨汁机，$N$ 表示排队等待的有 $N$ 个客人，接下来 $N$ 行，每行一个整数表示一个客人点的果汁种类 $X_i$。", "outputFormat": "输出在当前的请求序列下，小王最少需要清洗果汁机的次数。", "hint": "$1\\le K\\le 10$，$1\\le N\\le 100$。\n\n$1\\le x_i\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2089", "type": "P", "difficulty": 2, "samples": [["11", "10\n1 1 1 1 1 1 1 1 1 2 \n1 1 1 1 1 1 1 1 2 1 \n1 1 1 1 1 1 1 2 1 1 \n1 1 1 1 1 1 2 1 1 1 \n1 1 1 1 1 2 1 1 1 1 \n1 1 1 1 2 1 1 1 1 1 \n1 1 1 2 1 1 1 1 1 1 \n1 1 2 1 1 1 1 1 1 1 \n1 2 1 1 1 1 1 1 1 1 \n2 1 1 1 1 1 1 1 1 1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "递归", "洛谷原创", "枚举"], "title": "烤鸡", "background": "猪猪 Hanke 得到了一只鸡。\n", "description": "猪猪 Hanke 特别喜欢吃烤鸡（本是同畜牲，相煎何太急！）Hanke 吃鸡很特别，为什么特别呢？因为他有 $10$ 种配料（芥末、孜然等），每种配料可以放 $1$ 到 $3$ 克，任意烤鸡的美味程度为所有配料质量之和。\n\n现在， Hanke 想要知道，如果给你一个美味程度 $n$ ，请输出这 $10$ 种配料的所有搭配方案。", "inputFormat": "一个正整数 $n$，表示美味程度。", "outputFormat": "第一行，方案总数。\n\n第二行至结束，$10$ 个数，表示每种配料所放的质量，按字典序排列。\n\n如果没有符合要求的方法，就只要在第一行输出一个 $0$。", "hint": "对于 $100\\%$ 的数据，$n \\leq 10000$。", "locale": "zh-CN", "translations": {"en": {"title": "Roast Chicken", "background": "Piggy Hanke got a chicken.", "description": "Piggy Hanke especially likes eating roast chicken (we are both livestock—why cook each other so ruthlessly!). Hanke eats chicken in a special way. Why special? Because he has $10$ seasonings (mustard, cumin, etc.), and for each seasoning he can use $1$ to $3$ grams. The deliciousness of any roast chicken equals the sum of the masses of all seasonings.\n\nNow Hanke wants to know: given a deliciousness $n$, please output all combinations of these $10$ seasonings.", "inputFormat": "A positive integer $n$, representing the deliciousness.", "outputFormat": "- On the first line, output the total number of solutions.\n- From the second line to the end, output $10$ numbers per line, representing the mass used for each seasoning, in lexicographical order.\n- If there is no valid method, output only a single $0$ on the first line.", "hint": "For $100\\%$ of the testdata, $n \\leq 5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "烤鸡", "background": "猪猪 Hanke 得到了一只鸡。\n", "description": "猪猪 Hanke 特别喜欢吃烤鸡（本是同畜牲，相煎何太急！）Hanke 吃鸡很特别，为什么特别呢？因为他有 $10$ 种配料（芥末、孜然等），每种配料可以放 $1$ 到 $3$ 克，任意烤鸡的美味程度为所有配料质量之和。\n\n现在， Hanke 想要知道，如果给你一个美味程度 $n$ ，请输出这 $10$ 种配料的所有搭配方案。", "inputFormat": "一个正整数 $n$，表示美味程度。", "outputFormat": "第一行，方案总数。\n\n第二行至结束，$10$ 个数，表示每种配料所放的质量，按字典序排列。\n\n如果没有符合要求的方法，就只要在第一行输出一个 $0$。", "hint": "对于 $100\\%$ 的数据，$n \\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P2090", "type": "P", "difficulty": 3, "samples": [["5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "数字对", "background": null, "description": "对于一个数字对 $(a,b)$，我们可以通过一次操作将其变为新数字对 $(a+b,b)$ 或 $(a,a+b)$。\n\n给定一正整数 $n$，问最少需要多少次操作可将数字对 $(1,1)$ 变为一个数字对，该数字对至少有一个数字为 $n$。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一个整数表示答案。", "hint": "样例解释：\n\n$$(1,1)  \\to  (1,2)  \\to  (3,2)  \\to  (5,2)$$\n\n\n---\n\n\n对于 $30\\%$ 的数据，$1 \\le n \\le 1000$。\n\n对于 $60\\%$ 的数据，$1 \\le n \\le 20000$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Number Pair", "background": "", "description": "For a number pair $(a, b)$, in one operation we can transform it into $(a+b, b)$ or $(a, a+b)$.\n\nGiven a positive integer $n$, find the minimum number of operations to transform the pair $(1, 1)$ into a pair in which at least one number is $n$.", "inputFormat": "One line containing a positive integer $n$.", "outputFormat": "One integer representing the answer.", "hint": "Sample explanation:\n\n$$(1,1)  \\to  (1,2)  \\to  (3,2)  \\to  (5,2)$$\n\nFor $30\\%$ of the testdata, $1 \\le n \\le 1000$.\n\nFor $60\\%$ of the testdata, $1 \\le n \\le 20000$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数字对", "background": null, "description": "对于一个数字对 $(a,b)$，我们可以通过一次操作将其变为新数字对 $(a+b,b)$ 或 $(a,a+b)$。\n\n给定一正整数 $n$，问最少需要多少次操作可将数字对 $(1,1)$ 变为一个数字对，该数字对至少有一个数字为 $n$。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一个整数表示答案。", "hint": "样例解释：\n\n$$(1,1)  \\to  (1,2)  \\to  (3,2)  \\to  (5,2)$$\n\n\n---\n\n\n对于 $30\\%$ 的数据，$1 \\le n \\le 1000$。\n\n对于 $60\\%$ 的数据，$1 \\le n \\le 20000$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2091", "type": "P", "difficulty": 5, "samples": [["3\n1 3 2\n2 2 3\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "排序", "background": "", "description": "小 A 有 $n$ 个物件排成一排，每个物件有它的体积 $V$ 和质量 $M$。$n$ 个物件的体积在 $1 \\sim n$ 内，且各不相同，但质量可能相同。\n\n现在，小 A 需要把 $n$ 个物件按体积从小到大重新排列。他的排序方式是：每次交换两个物件。这样会他会消耗的体力值为两个物件的质量和。\n\n小 A 想知道，为了将物件排序，他消耗的最少体力值是多少？", "inputFormat": "第一行，一个正整数 $n$，表示物件的数量。\n\n第二行 $n$ 个正整数，第 $i$ 个数表示从左到右第 $i$ 个物品的体积。\n\n第三行 $n$ 个正整数，第 $i$ 个数表示从左到右第 $i$ 个物品的质量。", "outputFormat": "一个数，表示小 A 消耗的最小体力值。\n", "hint": "| 测试点 | $n$ | $m$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ | $n=2000$ | $m=1$ |\n| $3$ | $n=2000$ | $m \\leq 10$ |\n| $4$ | $n=2000$ | $m \\leq 10000000$ |\n| $5\\sim 7$ | $n=200000$ | $m=1$ |\n| $8$ | $n=200000$ | $m \\leq 10$ |\n| $9\\sim 10$ | $n=200000$ | $m \\leq 10000000$ |", "locale": "zh-CN", "translations": {"en": {"title": "Sorting", "background": "", "description": "Little A has $n$ objects arranged in a row, each with volume $V$ and mass $M$. The volumes of the $n$ objects are within $1 \\sim n$ and are all distinct, but the masses may be the same.\n\nNow Little A needs to reorder the $n$ objects in increasing order of volume. His sorting method is: each operation swaps two objects. Each swap costs the sum of the masses of the two objects.\n\nLittle A wants to know the minimum total energy he must spend to sort the objects.", "inputFormat": "The first line contains a positive integer $n$, the number of objects.\n\nThe second line contains $n$ positive integers; the $i$-th number is the volume of the $i$-th object from left to right.\n\nThe third line contains $n$ positive integers; the $i$-th number is the mass of the $i$-th object from left to right.", "outputFormat": "Output a single integer, the minimum total energy Little A will spend.", "hint": "| Test Point | $n$ | $m$ |\n| :----------: | :----------: | :----------: |\n| $1 \\sim 2$ | $n = 2000$ | $m = 1$ |\n| $3$ | $n = 2000$ | $m \\leq 10$ |\n| $4$ | $n = 2000$ | $m \\leq 10000000$ |\n| $5 \\sim 7$ | $n = 200000$ | $m = 1$ |\n| $8$ | $n = 200000$ | $m \\leq 10$ |\n| $9 \\sim 10$ | $n = 200000$ | $m \\leq 10000000$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "排序", "background": "", "description": "小 A 有 $n$ 个物件排成一排，每个物件有它的体积 $V$ 和质量 $M$。$n$ 个物件的体积在 $1 \\sim n$ 内，且各不相同，但质量可能相同。\n\n现在，小 A 需要把 $n$ 个物件按体积从小到大重新排列。他的排序方式是：每次交换两个物件。这样会他会消耗的体力值为两个物件的质量和。\n\n小 A 想知道，为了将物件排序，他消耗的最少体力值是多少？", "inputFormat": "第一行，一个正整数 $n$，表示物件的数量。\n\n第二行 $n$ 个正整数，第 $i$ 个数表示从左到右第 $i$ 个物品的体积。\n\n第三行 $n$ 个正整数，第 $i$ 个数表示从左到右第 $i$ 个物品的质量。", "outputFormat": "一个数，表示小 A 消耗的最小体力值。\n", "hint": "| 测试点 | $n$ | $m$ |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ | $n=2000$ | $m=1$ |\n| $3$ | $n=2000$ | $m \\leq 10$ |\n| $4$ | $n=2000$ | $m \\leq 10000000$ |\n| $5\\sim 7$ | $n=200000$ | $m=1$ |\n| $8$ | $n=200000$ | $m \\leq 10$ |\n| $9\\sim 10$ | $n=200000$ | $m \\leq 10000000$ |", "locale": "zh-CN"}}}
{"pid": "P2092", "type": "P", "difficulty": 4, "samples": [["6\n", "2\n"], ["30\n", "1\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["素数判断,质数,筛法"], "title": "数字游戏", "background": "", "description": "KC 邀请他的两个小弟 K 和 C 玩起了数字游戏。游戏是 K 和 C 轮流操作进行的，K 为先手。KC 会先给定一个数字 $Q$，每次操作玩家必须写出当前数字的一个因数来代替当前数字，但是这个因数不能是 $1$ 和它本身。例如当前数字为 $6$，那么可以用 $2, 3$ 来代替，但是 $1$ 和 $6$ 就不行。现在规定第一个没有数字可以写出的玩家为胜者。K 在已知 $Q$ 的情况，想知道自己作为先手能不能胜利，若能胜利，那么第一次写出的可以制胜的最小数字是多少呢？整个游戏过程我们认为 K 和C用的都是最优策略。", "inputFormat": "仅一行，一个正整数 $Q$。", "outputFormat": "第一行是 $1$ 或 $2$，$1$ 表示 K 能胜利，$2$ 表示 C 能胜利。\n\n若 K 能胜利，则在第二行输出第一次写出的可以制胜的最小数字。\n\n若是第一次就无法写出数字，则认为第一次写出的可以制胜的最小数字为 $0$。", "hint": "对于 $30 \\%$ 的数据，$Q \\le 50$；  \n对于 $100 \\%$ 的数据，$2 \\le Q \\le {10}^{13}$。", "locale": "zh-CN", "translations": {"en": {"title": "Number Game", "background": "", "description": "KC invited his two underlings, K and C, to play a number game. The game is played by K and C taking turns, with K moving first. KC will first specify a number $Q$. On each move, the player must write a divisor of the current number to replace the current number, but this divisor cannot be $1$ or the number itself. For example, if the current number is $6$, then $2$ and $3$ can be used to replace it, but $1$ and $6$ cannot. The player who first has no number to write is the winner. Given $Q$, K wants to know whether he, as the first player, can win. If he can win, what is the smallest first number he can write that guarantees victory? Assume both K and C play optimally.", "inputFormat": "A single line with a positive integer $Q$.", "outputFormat": "The first line is $1$ or $2$. $1$ means K can win, and $2$ means C can win.\n\nIf K can win, then output on the second line the smallest first number he can write that guarantees victory.\n\nIf there is no number that can be written on the first move, then the smallest winning first number is considered to be $0$.", "hint": "For 30% of the testdata, $Q \\le 50$.\nFor 100% of the testdata, $2 \\le Q \\le 10^{13}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数字游戏", "background": "", "description": "KC 邀请他的两个小弟 K 和 C 玩起了数字游戏。游戏是 K 和 C 轮流操作进行的，K 为先手。KC 会先给定一个数字 $Q$，每次操作玩家必须写出当前数字的一个因数来代替当前数字，但是这个因数不能是 $1$ 和它本身。例如当前数字为 $6$，那么可以用 $2, 3$ 来代替，但是 $1$ 和 $6$ 就不行。现在规定第一个没有数字可以写出的玩家为胜者。K 在已知 $Q$ 的情况，想知道自己作为先手能不能胜利，若能胜利，那么第一次写出的可以制胜的最小数字是多少呢？整个游戏过程我们认为 K 和C用的都是最优策略。", "inputFormat": "仅一行，一个正整数 $Q$。", "outputFormat": "第一行是 $1$ 或 $2$，$1$ 表示 K 能胜利，$2$ 表示 C 能胜利。\n\n若 K 能胜利，则在第二行输出第一次写出的可以制胜的最小数字。\n\n若是第一次就无法写出数字，则认为第一次写出的可以制胜的最小数字为 $0$。", "hint": "对于 $30 \\%$ 的数据，$Q \\le 50$；  \n对于 $100 \\%$ 的数据，$2 \\le Q \\le {10}^{13}$。", "locale": "zh-CN"}}}
{"pid": "P2093", "type": "P", "difficulty": 6, "samples": [["3\n0 0\n0 1\n0 2\n3\n1 1 2\n0 0 3\n0 1 1", "3\n1\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["集训队互测", "K-D Tree"], "title": "[国家集训队] JZPFAR", "background": "原《零件分组》见 P1233。\n", "description": "平面上有 $n$ 个点。现在有 $m$ 次询问，每次给定一个点 $(px, py)$ 和一个整数 $k$，输出 $n$ 个点中离 $(px, py)$ 的距离第 $k$ 大的点的标号。如果有两个(或多个)点距离 $(px, py)$ 相同，那么认为标号较小的点距离较大。\n", "inputFormat": "第一行，一个整数 $n$，表示点的个数。\n\n下面 $n$ 行，每行两个整数 $x_i,y_i$，表示 $n$ 个点的坐标。点的标号按照输入顺序，分别为 $1\\ldots n$。\n\n下面一行，一个整数 $m$，表示询问个数。\n\n下面 $m$ 行，每行三个整数 $px_i,py_i,k_i$，表示一个询问。", "outputFormat": "$m$ 行，每行一个整数，表示相应的询问的答案。", "hint": "#### 数据规模与约定\n\n- $50\\%$ 的数据中，$n$ 个点的坐标在某范围内随机分布。\n- $100\\%$ 的数据中，$1\\le n\\le 10^5$，$1\\le m\\le 10^4$，$1\\le k\\le 20$，$-10^9\\le x_i,y_i,px_i,py_i\\le 10^9$，$n$ 个点中任意两点坐标不同，$m$ 个询问的点的坐标在某范围内随机分布。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] JZPFAR", "background": "For the original \"Parts Grouping\", see P1233.", "description": "There are $n$ points on the plane. There are $m$ queries. In each query, given a point $(px, py)$ and an integer $k$, output the index of the $k$-th farthest point from $(px, py)$ among the $n$ points. If two (or more) points have the same distance to $(px, py)$, then the point with the smaller index is considered farther.", "inputFormat": "The first line contains an integer $n$, the number of points.\nThe next $n$ lines each contain two integers $x_i, y_i$, the coordinates of the $n$ points. The indices of the points follow the input order and are $1\\ldots n$.\nThe next line contains an integer $m$, the number of queries.\nThe next $m$ lines each contain three integers $px_i, py_i, k_i$, describing a query.", "outputFormat": "Output $m$ lines. Each line contains one integer, the answer to the corresponding query.", "hint": "- Constraints and Notes.\n  - In $50\\%$ of the testdata, the coordinates of the $n$ points are randomly distributed within some range.\n  - In $100\\%$ of the testdata, $1\\le n\\le 10^5$, $1\\le m\\le 10^4$, $1\\le k\\le 20$, $-10^9\\le x_i, y_i, px_i, py_i\\le 10^9$. Any two points among the $n$ points have different coordinates. The coordinates of the query points in the $m$ queries are randomly distributed within some range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] JZPFAR", "background": "原《零件分组》见 P1233。\n", "description": "平面上有 $n$ 个点。现在有 $m$ 次询问，每次给定一个点 $(px, py)$ 和一个整数 $k$，输出 $n$ 个点中离 $(px, py)$ 的距离第 $k$ 大的点的标号。如果有两个(或多个)点距离 $(px, py)$ 相同，那么认为标号较小的点距离较大。\n", "inputFormat": "第一行，一个整数 $n$，表示点的个数。\n\n下面 $n$ 行，每行两个整数 $x_i,y_i$，表示 $n$ 个点的坐标。点的标号按照输入顺序，分别为 $1\\ldots n$。\n\n下面一行，一个整数 $m$，表示询问个数。\n\n下面 $m$ 行，每行三个整数 $px_i,py_i,k_i$，表示一个询问。", "outputFormat": "$m$ 行，每行一个整数，表示相应的询问的答案。", "hint": "#### 数据规模与约定\n\n- $50\\%$ 的数据中，$n$ 个点的坐标在某范围内随机分布。\n- $100\\%$ 的数据中，$1\\le n\\le 10^5$，$1\\le m\\le 10^4$，$1\\le k\\le 20$，$-10^9\\le x_i,y_i,px_i,py_i\\le 10^9$，$n$ 个点中任意两点坐标不同，$m$ 个询问的点的坐标在某范围内随机分布。", "locale": "zh-CN"}}}
{"pid": "P2094", "type": "P", "difficulty": 0, "samples": [["5 2\n1 2 3 4 5", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "排序"], "title": "运输", "background": "", "description": "现在已知 $N$ 件商品，和搬运它们其中每一件的费用。现在搬家公司老板 Mr.sb 决定让我们每次任意选取 $2$ 件商品。然后这 $2$ 件商品只算一件商品的费用。但是这个商品的搬运费用是将选出的 $2$ 个商品的费用之和除以 $k$ 的运算结果。如此反复。直到只收一件商品的钱。这个就是商店要付的费用。掌柜的想尽可能的少付钱，以便将更多的钱捐给希望工程。所以请你帮他计算一下最少只用付多少钱。\n", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数 $w_1,w_2,\\ldots,w_n$，表示每一件物品搬运费。\n", "outputFormat": "一行一个整数表示最少付多少钱。\n", "hint": "$n,k,w_i$ 均为非负数。\n\n$n,k\\le 10^4$。\n\n---\n\n$\\text{upd 2022.7.24}$：新增加一组 Hack 数据。题目是否存在该数据范围下的正确解法有争议。", "locale": "zh-CN", "translations": {"en": {"title": "Transportation", "background": "", "description": "There are $N$ goods, and the handling fee for each of them is known. The moving company boss, Mr. sb, decides that each time we can arbitrarily pick $2$ goods. Then these $2$ goods count as only one item’s fee, where the new item’s handling fee is the result of dividing the sum of the two selected items’ fees by $k$. Repeat this process until only one item’s fee remains. This final amount is what the shop has to pay. The shopkeeper wants to pay as little as possible so that more money can be donated to Project Hope (Xiwang Gongcheng). Please help compute the minimum amount that needs to be paid.", "inputFormat": "The first line contains two integers $n, k$.\n\nThe second line contains $n$ integers $w_1, w_2, \\ldots, w_n$, representing the handling fee of each item.", "outputFormat": "Output a single integer, the minimum amount that needs to be paid.", "hint": "$n, k, w_i$ are all non-negative.\n\n$n, k \\le 10^4$.\n\n---\n\n$\\text{upd 2022.7.24}$: Added one set of Hack testdata. Whether there exists a correct solution within this constraint range is controversial.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "运输", "background": "", "description": "现在已知 $N$ 件商品，和搬运它们其中每一件的费用。现在搬家公司老板 Mr.sb 决定让我们每次任意选取 $2$ 件商品。然后这 $2$ 件商品只算一件商品的费用。但是这个商品的搬运费用是将选出的 $2$ 个商品的费用之和除以 $k$ 的运算结果。如此反复。直到只收一件商品的钱。这个就是商店要付的费用。掌柜的想尽可能的少付钱，以便将更多的钱捐给希望工程。所以请你帮他计算一下最少只用付多少钱。\n", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数 $w_1,w_2,\\ldots,w_n$，表示每一件物品搬运费。\n", "outputFormat": "一行一个整数表示最少付多少钱。\n", "hint": "$n,k,w_i$ 均为非负数。\n\n$n,k\\le 10^4$。\n\n---\n\n$\\text{upd 2022.7.24}$：新增加一组 Hack 数据。题目是否存在该数据范围下的正确解法有争议。", "locale": "zh-CN"}}}
{"pid": "P2095", "type": "P", "difficulty": 2, "samples": [["6 6 3\n3 3 2\n15 1\n15 2\n10 2\n15 2\n10 2\n5 3", "60"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "排序"], "title": "营养膳食", "background": "", "description": "Mr.L 正在完成自己的增肥计划。\n\n为了增肥，Mr.L 希望吃到更多的脂肪。然而也不能只吃高脂肪食品，那样的话就会导致缺少其他营养。\n\nMr.L 通过研究发现：真正的营养膳食规定某类食品不宜一次性吃超过若干份。比如就一顿饭来说，肉类不宜吃超过 $1$ 份，鱼类不宜吃超过 $1$ 份，蛋类不宜吃超过 $1$ 份，蔬菜类不宜吃超过 $2$ 份。\n\nMr.L 想要在营养膳食的情况下吃到更多的脂肪，当然 Mr.L 的食量也是有限的。\n", "inputFormat": "第一行包含三个正整数 $n,m$ 和 $k$。表示 Mr.L 每顿饭最多可以吃 $m$ 份食品，同时有 $n$ 种食品供 Mr.L 选择，而这 $n$ 种食品分为 $k$ 类。\n\n第二行包含 $k$ 个不超过 $10$ 的正整数，表示可以吃 $1$ 到 $k$ 类食品的最大份数。\n\n接下来 $n$ 行每行包括 $2$ 个正整数，分别表示该食品的脂肪指数 $a_i$ 和所属的类别 $b_i$。\n", "outputFormat": "包括一个数字即 Mr.L 可以吃到的最大脂肪指数和。\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 200$，$1\\leq m\\leq 100$，$1\\leq k\\leq 100$，$1\\leq a_i\\leq 100$，$1\\leq b_i\\leq k$。", "locale": "zh-CN", "translations": {"en": {"title": "Nutritional Diet", "background": "", "description": "Mr. L is working on his weight gain plan.\n\nTo gain weight, Mr. L wants to eat more fat. However, he cannot eat only high-fat foods, otherwise he would lack other nutrients.\n\nThrough research, Mr. L found that a truly balanced diet sets an upper limit on the number of servings of each category in a single meal. For example, for one meal: at most $1$ serving of meat, at most $1$ serving of fish, at most $1$ serving of eggs, and at most $2$ servings of vegetables.\n\nMr. L wants to maximize fat intake while following a nutritional diet, and of course his capacity is limited.", "inputFormat": "The first line contains three positive integers $n$, $m$ and $k$. Here, $m$ is the maximum number of servings Mr. L can eat in one meal; there are $n$ foods to choose from, and these $n$ foods fall into $k$ categories.\n\nThe second line contains $k$ positive integers, each not exceeding $10$, where the $i$-th number gives the maximum number of servings allowed for category $i$ in a single meal, for categories $1$ through $k$.\n\nEach of the next $n$ lines contains $2$ positive integers: the fat index $a_i$ of that food and its category $b_i$.", "outputFormat": "Output a single integer: the maximum possible total fat index that Mr. L can eat.", "hint": "For $100\\%$ of the testdata, $1 \\leq n \\leq 200$, $1 \\leq m \\leq 100$, $1 \\leq k \\leq 100$, $1 \\leq a_i \\leq 100$, $1 \\leq b_i \\leq k$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "营养膳食", "background": "", "description": "Mr.L 正在完成自己的增肥计划。\n\n为了增肥，Mr.L 希望吃到更多的脂肪。然而也不能只吃高脂肪食品，那样的话就会导致缺少其他营养。\n\nMr.L 通过研究发现：真正的营养膳食规定某类食品不宜一次性吃超过若干份。比如就一顿饭来说，肉类不宜吃超过 $1$ 份，鱼类不宜吃超过 $1$ 份，蛋类不宜吃超过 $1$ 份，蔬菜类不宜吃超过 $2$ 份。\n\nMr.L 想要在营养膳食的情况下吃到更多的脂肪，当然 Mr.L 的食量也是有限的。\n", "inputFormat": "第一行包含三个正整数 $n,m$ 和 $k$。表示 Mr.L 每顿饭最多可以吃 $m$ 份食品，同时有 $n$ 种食品供 Mr.L 选择，而这 $n$ 种食品分为 $k$ 类。\n\n第二行包含 $k$ 个不超过 $10$ 的正整数，表示可以吃 $1$ 到 $k$ 类食品的最大份数。\n\n接下来 $n$ 行每行包括 $2$ 个正整数，分别表示该食品的脂肪指数 $a_i$ 和所属的类别 $b_i$。\n", "outputFormat": "包括一个数字即 Mr.L 可以吃到的最大脂肪指数和。\n", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 200$，$1\\leq m\\leq 100$，$1\\leq k\\leq 100$，$1\\leq a_i\\leq 100$，$1\\leq b_i\\leq k$。", "locale": "zh-CN"}}}
{"pid": "P2096", "type": "P", "difficulty": 3, "samples": [["3 5 \n-50 -47 36 -30 -23 \n17 -19 -34 -13 -8 \n-42 -3 -43 34 -45 \n", "84"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "最佳旅游线路", "background": null, "description": "某旅游区的街道成网格状。其中东西向的街道都是旅游街，南北向的街道都是林阴道。\n\n由于游客众多，旅游街被规定为单行道，游客在旅游街上只能从西向东走，在林阴道上则既可从南向北走，也可以从北向南走。\n\n阿龙想到这个旅游街游玩，他的好友阿福给了他一些建议，用分值表示所有旅游街相邻两个路口之间的街道值得游览的程度，分值是从 $-100$ 到 $100$ 的整数，所有林阴道不打分。所有分值不可能全是负分。\n\n如图（**格子代表旅游街，竖线代表林阴道**）：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1235.png) \n\n阿龙想知道，如果他从任意一个旅游街开始游览，再在任意一个旅游街结束游览，那么他经过的所有旅游街对的分值之和最大能是多少？", "inputFormat": "输入文件的第一行是两个整数 $m$ 和 $n$，之间用一个空格隔开，$m$ 表示有 $m$ 条旅游街（$1 \\le m \\le 100$），$n$ 表示有 $(n+1)$ 条林阴道（$1 \\le n \\le 20001$）。接下来的 $m$ 行依次给出了由北向南每条旅游街的分值信息。每行有 $n$ 个整数，依次表示了自西向东旅游街每一小段的分值。同一行相邻两个数之间用一个空格隔开。", "outputFormat": "输出文件只有一行，是一个整数，表示你的程序找到的最佳游览线路的总分值。", "hint": "样例解释：\n\n如图，阿龙从 $17$ 处开始游览，到 $34$ 处结束，答案为 $17-3+36+34=84$：\n\n```plain\n -50       -47   +->[ 36]--+   -30       -23\n                 |         |\n                 |         |\n[ 17]--+   -19   |   -34   |   -13       - 8\n       |         |         |\n       |         |         |\n -42   +->[- 3]--+   -43   +->[ 34]      -45\n```", "locale": "zh-CN", "translations": {"en": {"title": "Best Tourist Route", "background": "", "description": "The streets in a tourist area form a grid. All east–west streets are tourist streets, and all north–south streets are boulevards.\n\nBecause there are many visitors, tourist streets are one-way: on a tourist street you can only move from west to east. On boulevards, you can move either from south to north or from north to south.\n\nA Long (pinyin) plans to visit this area. His friend A Fu (pinyin) gave him advice by assigning a score to each segment between two adjacent intersections on every tourist street, indicating how worthwhile it is to visit. Each score is an integer from $-100$ to $100$. Boulevards are not scored. It is guaranteed that not all scores are negative.\n\nAs shown in the figure (grid cells are tourist streets, vertical lines are boulevards):\n\n ![](https://cdn.luogu.com.cn/upload/pic/1235.png) \n\nA Long wants to know: if he starts on any tourist street and ends on any tourist street, what is the maximum possible sum of scores of all tourist street segments he traverses?", "inputFormat": "The first line contains two integers $m$ and $n$, separated by a space. Here $m$ means there are $m$ tourist streets ($1 \\le m \\le 100$), and $n$ means there are $(n+1)$ boulevards ($1 \\le n \\le 20001$). The next $m$ lines give the score information for each tourist street from north to south. Each line contains $n$ integers, representing the scores of the segments along the tourist street from west to east. Adjacent numbers in the same line are separated by a single space.", "outputFormat": "Output a single integer on one line: the total score of the best route found by your program.", "hint": "Sample explanation:\n\nAs shown, A Long starts at $17$ and ends at $34$, so the answer is $17-3+36+34=84$:\n\n```plain\n -50       -47   +->[ 36]--+   -30       -23\n                 |         |\n                 |         |\n[ 17]--+   -19   |   -34   |   -13       - 8\n       |         |         |\n       |         |         |\n -42   +->[- 3]--+   -43   +->[ 34]      -45\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最佳旅游线路", "background": null, "description": "某旅游区的街道成网格状。其中东西向的街道都是旅游街，南北向的街道都是林阴道。\n\n由于游客众多，旅游街被规定为单行道，游客在旅游街上只能从西向东走，在林阴道上则既可从南向北走，也可以从北向南走。\n\n阿龙想到这个旅游街游玩，他的好友阿福给了他一些建议，用分值表示所有旅游街相邻两个路口之间的街道值得游览的程度，分值是从 $-100$ 到 $100$ 的整数，所有林阴道不打分。所有分值不可能全是负分。\n\n如图（**格子代表旅游街，竖线代表林阴道**）：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1235.png) \n\n阿龙想知道，如果他从任意一个旅游街开始游览，再在任意一个旅游街结束游览，那么他经过的所有旅游街对的分值之和最大能是多少？", "inputFormat": "输入文件的第一行是两个整数 $m$ 和 $n$，之间用一个空格隔开，$m$ 表示有 $m$ 条旅游街（$1 \\le m \\le 100$），$n$ 表示有 $(n+1)$ 条林阴道（$1 \\le n \\le 20001$）。接下来的 $m$ 行依次给出了由北向南每条旅游街的分值信息。每行有 $n$ 个整数，依次表示了自西向东旅游街每一小段的分值。同一行相邻两个数之间用一个空格隔开。", "outputFormat": "输出文件只有一行，是一个整数，表示你的程序找到的最佳游览线路的总分值。", "hint": "样例解释：\n\n如图，阿龙从 $17$ 处开始游览，到 $34$ 处结束，答案为 $17-3+36+34=84$：\n\n```plain\n -50       -47   +->[ 36]--+   -30       -23\n                 |         |\n                 |         |\n[ 17]--+   -19   |   -34   |   -13       - 8\n       |         |         |\n       |         |         |\n -42   +->[- 3]--+   -43   +->[ 34]      -45\n```", "locale": "zh-CN"}}}
{"pid": "P2097", "type": "P", "difficulty": 2, "samples": [["4 5\n1 2\n1 3\n2 3\n2 1\n3 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "并查集", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "资料分发 1", "background": null, "description": "有一些电脑，一部分电脑有双向数据线连接。\n\n如果一个电脑得到数据，它可以传送到的电脑都可以得到数据。\n\n现在，你有这个数据，问你至少将其输入几台电脑，才能使所有电脑得到数据。", "inputFormat": "第一行两个整数 $n,m$。$n$ 是点数，$m$ 是边数。\n\n接下来 $m$ 行，每行 $2$ 个整数 $p,q$，表示 $p$ 到 $q$ 有一条双向数据线。", "outputFormat": "一个整数，表示至少输入的电脑数量。", "hint": "对于 $30\\%$ 的数据，$n \\le 100$，$m \\le 1000$。\n\n对于 $60\\%$ 的数据，$n \\le 2000$。\n\n对于 $100\\%$ 的数据，$0 \\le n \\le 10^5$，$0 \\le m \\le 2 \\times 10^5$，$1 \\le p,q \\le n$。\n\n数据可能存在重边自环。", "locale": "zh-CN", "translations": {"en": {"title": "Data Distribution 1", "background": "", "description": "There are several computers, and some pairs are connected by bidirectional data lines. If a computer receives the data, then every computer that is reachable from it via the data lines will also receive the data. Now you have the data. What is the minimum number of computers into which you must input the data so that all computers receive it?", "inputFormat": "The first line contains two integers $n, m$. Here $n$ is the number of vertices, and $m$ is the number of edges.\nThe next $m$ lines each contain two integers $p, q$, indicating that there is a bidirectional data line between $p$ and $q$.", "outputFormat": "Output one integer, the minimum number of computers into which you must input the data.", "hint": "- For $30\\%$ of the testdata, $n \\le 100$, $m \\le 1000$.\n- For $60\\%$ of the testdata, $n \\le 2000$.\n- For $100\\%$ of the testdata, $0 \\le n \\le 10^5$, $0 \\le m \\le 2 \\times 10^5$, $1 \\le p, q \\le n$.\n\nThe graph may contain multiple edges and self-loops.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "资料分发 1", "background": null, "description": "有一些电脑，一部分电脑有双向数据线连接。\n\n如果一个电脑得到数据，它可以传送到的电脑都可以得到数据。\n\n现在，你有这个数据，问你至少将其输入几台电脑，才能使所有电脑得到数据。", "inputFormat": "第一行两个整数 $n,m$。$n$ 是点数，$m$ 是边数。\n\n接下来 $m$ 行，每行 $2$ 个整数 $p,q$，表示 $p$ 到 $q$ 有一条双向数据线。", "outputFormat": "一个整数，表示至少输入的电脑数量。", "hint": "对于 $30\\%$ 的数据，$n \\le 100$，$m \\le 1000$。\n\n对于 $60\\%$ 的数据，$n \\le 2000$。\n\n对于 $100\\%$ 的数据，$0 \\le n \\le 10^5$，$0 \\le m \\le 2 \\times 10^5$，$1 \\le p,q \\le n$。\n\n数据可能存在重边自环。", "locale": "zh-CN"}}}
{"pid": "P2098", "type": "P", "difficulty": 4, "samples": [["10 10 3\n1 2 2 6 6 7 8 9 14 17\n1 3 8 10 10 16 16 18 19 19", "382"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "USACO", "动态规划优化", "前缀和"], "title": "[USACO16DEC] Team Building P", "background": "", "description": "Every year, Farmer John brings his $N$ cows to compete for \"best in show\" at the state fair. His arch-rival, Farmer Paul, brings his $M$ cows to compete as well ($1 \\leq N \\leq 1000, 1 \\leq M \\leq 1000$).\n\nEach of the $N + M$ cows at the event receive an individual integer score. However, the final competition this year will be determined based on teams of $K$ cows ($1 \\leq K \\leq 10$), as follows: Farmer John and Farmer Paul both select teams of $K$ of their respective cows to compete. The cows on these two teams are then paired off: the highest-scoring cow on FJ's team is paired with the highest-scoring cow on FP's team, the second-highest-scoring cow on FJ's team is paired with the second-highest-scoring cow on FP's team, and so on. FJ wins if in each of these pairs, his cow has the higher score.\n\nPlease help FJ count the number of different ways he and FP can choose their teams such that FJ will win the contest. That is, each distinct pair (set of $K$ cows for FJ, set of $K$ cows for FP) where FJ wins should be counted. Print your answer modulo 1,000,000,009.\n", "inputFormat": "The first line of input contains $N$, $M$, and $K$. The value of $K$ will be no larger than $N$ or $M$.\n\nThe next line contains the $N$ scores of FJ's cows.\n\nThe final line contains the $M$ scores of FP's cows.\n", "outputFormat": "Print the number of ways FJ and FP can pick teams such that FJ wins, modulo 1,000,000,009.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16DEC] Team Building P", "background": "", "description": "Every year, Farmer John brings his $N$ cows to compete for \"best in show\" at the state fair. His arch-rival, Farmer Paul, brings his $M$ cows to compete as well ($1 \\leq N \\leq 1000, 1 \\leq M \\leq 1000$).\n\nEach of the $N + M$ cows at the event receive an individual integer score. However, the final competition this year will be determined based on teams of $K$ cows ($1 \\leq K \\leq 10$), as follows: Farmer John and Farmer Paul both select teams of $K$ of their respective cows to compete. The cows on these two teams are then paired off: the highest-scoring cow on FJ's team is paired with the highest-scoring cow on FP's team, the second-highest-scoring cow on FJ's team is paired with the second-highest-scoring cow on FP's team, and so on. FJ wins if in each of these pairs, his cow has the higher score.\n\nPlease help FJ count the number of different ways he and FP can choose their teams such that FJ will win the contest. That is, each distinct pair (set of $K$ cows for FJ, set of $K$ cows for FP) where FJ wins should be counted. Print your answer modulo 1,000,000,009.\n", "inputFormat": "The first line of input contains $N$, $M$, and $K$. The value of $K$ will be no larger than $N$ or $M$.\n\nThe next line contains the $N$ scores of FJ's cows.\n\nThe final line contains the $M$ scores of FP's cows.\n", "outputFormat": "Print the number of ways FJ and FP can pick teams such that FJ wins, modulo 1,000,000,009.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16DEC] Team Building P", "background": null, "description": "每年，Farmer John 都会带着他的 $N$ 头奶牛参加州展览会的“最佳展示”比赛。他的劲敌 Farmer Paul 也会带着他的 $M$ 头奶牛参加比赛（$1 \\leq N \\leq 1000, 1 \\leq M \\leq 1000$）。\n\n参加比赛的 $N + M$ 头奶牛每头都会获得一个单独的整数得分。然而，今年的最终比赛将由 $K$ 头奶牛组成的团队决定（$1 \\leq K \\leq 10$），规则如下：\n\nFarmer John 和 Farmer Paul 各自选择 $K$ 头奶牛组成团队进行比赛。这两个团队的奶牛将按得分高低配对：\n\nFJ 团队中得分最高的奶牛与 FP 团队中得分最高的奶牛配对，FJ 团队中得分第二高的奶牛与 FP 团队中得分第二高的奶牛配对，依此类推。如果在每一对中，FJ 的奶牛得分都更高，那么 FJ 获胜。\n\n请帮助 FJ 计算他和 FP 可以选择团队的不同方式的数量，使得 FJ 能够赢得比赛。也就是说，每个不同的（FJ 的 $K$ 头奶牛集合，FP 的 $K$ 头奶牛集合）对，只要 FJ 获胜，都应被计入。输出结果对 $1\\,000\\,000\\,009$ 取模。", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $K$。$K$ 的值不会超过 $N$ 或 $M$。\n\n第二行包含 FJ 的 $N$ 头奶牛的得分。\n\n第三行包含 FP 的 $M$ 头奶牛的得分。", "outputFormat": "输出 FJ 和 FP 可以选择团队的方式数量，使得 FJ 获胜，结果对 $1\\,000\\,000\\,009$ 取模。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2099", "type": "P", "difficulty": 7, "samples": [["5 5\n..##.\n#...#\n#OOO#\n#..O#\n.###.", "1\n2 1 2 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2007", "NOI", "提交答案", "Special Judge", "O2优化"], "title": "[NOI2007] 调兵遣将", "background": "", "description": "我军截获的情报显示，敌军正在集结兵力试图向我军重要的军械研究所发起进攻。由于我军正处于多线作战的状态，无法抽调大批兵力前去支援，指挥部决定通过有效的战前部署来提高胜率，减少伤亡和损失。\n\n该军械研究所的平面图可以看作是一个 $N\\times M$ 的矩阵，每个 $1\\times 1$ 的格子都表示一个区域，每个区域只与它上下左右的四个区域相邻。每个区域的用途可分为以下3 种之一：\n\n1. 该区域被用于军事研究（用字母 `O` 表示）；\n2. 该区域内驻扎有一个机械化中队（用 `#` 表示）；\n3. 该区域是空地（用 `.` 表示）。\n\n由于空间有限，任一个 $1\\times 1$ 的格子内都无法驻扎两队以上的机械化中队（包括两队），否则会大大降低战斗时的机动性。\n\n遗憾的是，由于战前估计不足，我军的防御部署显得十分分散，这很容易让敌军所擅长的偷袭战术得逞。为了确保万无一失，我军决定利用为数不多的防御部队以最少的移动步骤将所有重要研究区域都包围起来。所谓的“包围”即从该矩阵边界侵入的敌军找不到任意一条路，使得他们不遭受任何机械化中队的反抗就能到达某研究区域。\n\n由于军队内部的传令权限的限制，每个单位时间指挥部只能向所有中队中的一个中队下达指令（朝上 / 下 / 左 / 右移动 $1$ 格）。由于时间紧迫，指挥部希望能够尽快完成部署，这个任务就交给你来完成。\n\n注意：在部署的过程中军队可以进入研究区域，而在最终的部署结果中军队不可以在研究区域中。另外，在任何时刻，两个军队都不可以在同一个方格中。", "inputFormat": "**该题为提交答案型题目。**\n\n对于每个数据：\n\n第一行 $2$ 个整数 $N,M$。\n\n接下来 $N$ 行，每行包括 $M$ 个字符（均为 `.`、`O`、`#` 之一）。", "outputFormat": "每个输出文件的第一行，包括你的答案所花费的时间 $T$。\n\n接下来 $T$ 行，按顺序输出每条命令，每行包括 $4$ 个整数 $x_1, y_1, x_2, y_2$，表示将位于 $(x_1,y_1)$ 的部队移向 $(x_2,y_2)$。", "hint": "如果选手的输出方案不合法（方案执行过程中出现军队重叠，军队移出矩形边界，最终方案有军队和研究所在同一区域，军队没有包围研究所等），则得零分。\n\n否则设选手输出的方案耗时为 $ans$，则得分按如下计算：\n\n$$\nscore=\n\\begin{cases}\n\\ 10&ans \\leq A_i\\\\\n\\ 1+\\left\\lfloor\\dfrac{ans-B_i}{A_i-B_i}\\right\\rfloor \\times 9&A_i<ans \\leq B_i\\\\\n\\ 1&B_i<ans\\\\\n\\end{cases}\n$$  \n\n对于每个数据，都有两个评分参数 $A_i$ 与 $B_i$，其中保证 $A_i<B_i$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2007] Deploying Troops", "background": "# Description\n\nOur intercepted intelligence shows that the enemy is massing forces to attack our important ordnance research institute. Since our army is engaged on multiple fronts and cannot spare large forces for reinforcement, headquarters has decided to improve the odds of victory and reduce casualties and losses through effective pre-battle deployment.\n\nThe floor plan of the research institute can be viewed as an $N \\times M$ matrix. Each $1 \\times 1$ cell represents a region, and each region is adjacent only to its four neighbors: up, down, left, and right. Each region falls into one of the following three categories:\n\n1. The region is used for military research (denoted by the letter `O`).\n2. A mechanized squad is stationed in the region (denoted by `#`).\n3. The region is empty ground (denoted by `.`).\n\nDue to limited space, no more than one mechanized squad can be stationed in any $1 \\times 1$ cell; having two or more squads in the same cell would severely reduce mobility in battle.\n\nUnfortunately, due to inadequate prewar estimates, our defensive deployment is very scattered, which makes it easy for the enemy to capitalize on its specialty in surprise attacks. To ensure absolute security, we decide to use our limited defensive units to surround all important research regions with the minimum number of movement steps. “Surround” means that enemies infiltrating from the boundary of the matrix cannot find any path to reach any research region without encountering resistance from a mechanized squad.\n\nDue to internal message-relay authority constraints, in each unit of time, headquarters can issue orders to only one squad among all squads (move 1 cell up, down, left, or right). Because time is short, headquarters hopes to complete the deployment as quickly as possible, and this task is assigned to you.\n\nNote: During deployment, squads may enter research regions, but in the final deployment, squads may not be in research regions. Also, at any time, two squads may not occupy the same cell.", "description": "", "inputFormat": "", "outputFormat": "The first line of each output file contains the time $T$ your solution takes.\n\nThen output $T$ lines. In order, output each command. Each line contains $4$ integers $x_1, y_1, x_2, y_2$, indicating moving the squad located at $(x_1, y_1)$ to $(x_2, y_2)$.", "hint": "If the contestant’s output plan is invalid (overlapping squads during execution, squads moving out of the rectangular boundary, squads occupying research regions in the final plan, research regions not surrounded, etc.), the score is zero.\n\nOtherwise, let the time spent by the contestant’s plan be $ans$, and the score is computed as follows:\n\n$$\nscore=\n\\begin{cases}\n\\ 10&ans \\leq A_i\\\\\n\\ 1+\\left\\lfloor\\dfrac{ans-B_i}{A_i-B_i}\\right\\rfloor \\times 9&A_i<ans \\leq B_i\\\\\n\\ 1&B_i<ans\\\\\n\\end{cases}\n$$  \n\nFor each dataset, there are two scoring parameters $A_i$ and $B_i$, with $A_i < B_i$ guaranteed.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2007] 调兵遣将", "background": "", "description": "我军截获的情报显示，敌军正在集结兵力试图向我军重要的军械研究所发起进攻。由于我军正处于多线作战的状态，无法抽调大批兵力前去支援，指挥部决定通过有效的战前部署来提高胜率，减少伤亡和损失。\n\n该军械研究所的平面图可以看作是一个 $N\\times M$ 的矩阵，每个 $1\\times 1$ 的格子都表示一个区域，每个区域只与它上下左右的四个区域相邻。每个区域的用途可分为以下3 种之一：\n\n1. 该区域被用于军事研究（用字母 `O` 表示）；\n2. 该区域内驻扎有一个机械化中队（用 `#` 表示）；\n3. 该区域是空地（用 `.` 表示）。\n\n由于空间有限，任一个 $1\\times 1$ 的格子内都无法驻扎两队以上的机械化中队（包括两队），否则会大大降低战斗时的机动性。\n\n遗憾的是，由于战前估计不足，我军的防御部署显得十分分散，这很容易让敌军所擅长的偷袭战术得逞。为了确保万无一失，我军决定利用为数不多的防御部队以最少的移动步骤将所有重要研究区域都包围起来。所谓的“包围”即从该矩阵边界侵入的敌军找不到任意一条路，使得他们不遭受任何机械化中队的反抗就能到达某研究区域。\n\n由于军队内部的传令权限的限制，每个单位时间指挥部只能向所有中队中的一个中队下达指令（朝上 / 下 / 左 / 右移动 $1$ 格）。由于时间紧迫，指挥部希望能够尽快完成部署，这个任务就交给你来完成。\n\n注意：在部署的过程中军队可以进入研究区域，而在最终的部署结果中军队不可以在研究区域中。另外，在任何时刻，两个军队都不可以在同一个方格中。", "inputFormat": "**该题为提交答案型题目。**\n\n对于每个数据：\n\n第一行 $2$ 个整数 $N,M$。\n\n接下来 $N$ 行，每行包括 $M$ 个字符（均为 `.`、`O`、`#` 之一）。", "outputFormat": "每个输出文件的第一行，包括你的答案所花费的时间 $T$。\n\n接下来 $T$ 行，按顺序输出每条命令，每行包括 $4$ 个整数 $x_1, y_1, x_2, y_2$，表示将位于 $(x_1,y_1)$ 的部队移向 $(x_2,y_2)$。", "hint": "如果选手的输出方案不合法（方案执行过程中出现军队重叠，军队移出矩形边界，最终方案有军队和研究所在同一区域，军队没有包围研究所等），则得零分。\n\n否则设选手输出的方案耗时为 $ans$，则得分按如下计算：\n\n$$\nscore=\n\\begin{cases}\n\\ 10&ans \\leq A_i\\\\\n\\ 1+\\left\\lfloor\\dfrac{ans-B_i}{A_i-B_i}\\right\\rfloor \\times 9&A_i<ans \\leq B_i\\\\\n\\ 1&B_i<ans\\\\\n\\end{cases}\n$$  \n\n对于每个数据，都有两个评分参数 $A_i$ 与 $B_i$，其中保证 $A_i<B_i$。", "locale": "zh-CN"}}}
{"pid": "P2100", "type": "P", "difficulty": 5, "samples": [["3", "3"], ["987", "223731"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "高精度", "矩阵运算"], "title": "凌乱的地下室", "background": null, "description": "小 Z 家的地下室里并排放 $n$ 个小方块（小 Z 是一位 MC 狂热爱好者，喜欢用小方块装饰他家的地下室），并且每个方块都不一样（小 Z 喜欢各不相同的东西），比如有草方块、大理石、黑曜石等。\n\n小 Z 喜欢以一种特殊的顺序摆放这些小方块，比如：草方块、大理石、黑曜石。一天，小 D 帮助小 Z 整理地下室，可是智商捉急的小 D 将所有小方块搬出来后忘记了它们原来的具体位置。凭着模糊的印象，小 D 可能把原来放在第 $i$ 个位置上的小方块放到第 $i-1,i,i+1$ 个位置中的任意一个上（当然，第 $1$ 个不可能放到第 $0$ 个位置上，第 $n$ 个不可能放到第 $n+1$ 个位置上），比如（对应上面那个例子）：大理石、草方块、黑曜石。\n\n小 Z 是一个心胸宽广的人，他希望计算一下小 D 一共会有几种可能的摆放结果，并不追究小 D 的责任（追究了只会更乱……）。由于他自己的智商也比较捉急，所以如果答案很大的话他只想看到最后的 $8$ 位（前导零就不要给他看了）。\n\n\n\n---\n\n\n求满足 $|p_i-i| \\le 1$ 的 $1 \\sim n$ 的排列 $\\{p_n\\}$ 的个数，答案对 $10^8$ 取模。", "inputFormat": "一行，一个正整数 $n$，代表小 Z 家的地下室一共有 $n$ 个小方块。", "outputFormat": "一行，一个正整数，表示小 D 一共有几种可能的摆放结果，只输出后 $8$ 位，前导零不输出。", "hint": "【样例解释 $1$】\n\n接着题目中的例子，一共有 $3$ 种：（草方块，大理石，黑曜石）、（大理石，草方块，黑曜石）、（草方块，黑曜石，大理石）。\n\n\n【数据规模】\n\n对于 $30\\%$ 的数据，$n \\le 10^6$。\n\n对于 $50\\%$ 的数据，$n \\le 10^{16}$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^{1000}$。", "locale": "zh-CN", "translations": {"en": {"title": "Messy Basement", "background": "", "description": "In Xiao Z’s basement, there are $n$ small blocks placed side by side (Xiao Z is a hardcore MC fan who likes decorating his basement with small blocks), and each block is different (Xiao Z likes things to be unique), such as grass block, marble, obsidian, etc.\n\nXiao Z likes to arrange these small blocks in a special order, for example: grass block, marble, obsidian. One day, Xiao D helped Xiao Z tidy up the basement, but the not-so-bright Xiao D forgot the exact positions after moving all the blocks out. With only a vague memory, Xiao D might place the block originally at position $i$ to any of positions $i-1$, $i$, or $i+1$ (of course, the $1$st cannot be placed at position $0$, and the $n$th cannot be placed at position $n+1$), for example (corresponding to the example above): marble, grass block, obsidian.\n\nXiao Z is a generous person. He wants to compute how many possible final arrangements Xiao D could make, and he will not hold Xiao D responsible. Since he is also not very bright, if the answer is large, he only wants to see the last $8$ digits (do not show leading zeros).\n\n---\n\nCount the number of permutations $\\{p_n\\}$ of $1 \\sim n$ that satisfy $|p_i-i| \\le 1$, and take the answer modulo $10^8$.", "inputFormat": "One line, a positive integer $n$, meaning there are $n$ small blocks in Xiao Z’s basement.", "outputFormat": "One line, a positive integer, the number of possible final arrangements Xiao D could make. Output only the last $8$ digits, and do not output leading zeros.", "hint": "[Sample Explanation 1]\n\nContinuing the example in the statement, there are $3$ possibilities: (grass block, marble, obsidian), (marble, grass block, obsidian), (grass block, obsidian, marble).\n\n[Constraints]\n\nFor $30\\%$ of the testdata, $n \\le 10^6$.\n\nFor $50\\%$ of the testdata, $n \\le 10^{16}$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^{1000}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "凌乱的地下室", "background": null, "description": "小 Z 家的地下室里并排放 $n$ 个小方块（小 Z 是一位 MC 狂热爱好者，喜欢用小方块装饰他家的地下室），并且每个方块都不一样（小 Z 喜欢各不相同的东西），比如有草方块、大理石、黑曜石等。\n\n小 Z 喜欢以一种特殊的顺序摆放这些小方块，比如：草方块、大理石、黑曜石。一天，小 D 帮助小 Z 整理地下室，可是智商捉急的小 D 将所有小方块搬出来后忘记了它们原来的具体位置。凭着模糊的印象，小 D 可能把原来放在第 $i$ 个位置上的小方块放到第 $i-1,i,i+1$ 个位置中的任意一个上（当然，第 $1$ 个不可能放到第 $0$ 个位置上，第 $n$ 个不可能放到第 $n+1$ 个位置上），比如（对应上面那个例子）：大理石、草方块、黑曜石。\n\n小 Z 是一个心胸宽广的人，他希望计算一下小 D 一共会有几种可能的摆放结果，并不追究小 D 的责任（追究了只会更乱……）。由于他自己的智商也比较捉急，所以如果答案很大的话他只想看到最后的 $8$ 位（前导零就不要给他看了）。\n\n\n\n---\n\n\n求满足 $|p_i-i| \\le 1$ 的 $1 \\sim n$ 的排列 $\\{p_n\\}$ 的个数，答案对 $10^8$ 取模。", "inputFormat": "一行，一个正整数 $n$，代表小 Z 家的地下室一共有 $n$ 个小方块。", "outputFormat": "一行，一个正整数，表示小 D 一共有几种可能的摆放结果，只输出后 $8$ 位，前导零不输出。", "hint": "【样例解释 $1$】\n\n接着题目中的例子，一共有 $3$ 种：（草方块，大理石，黑曜石）、（大理石，草方块，黑曜石）、（草方块，黑曜石，大理石）。\n\n\n【数据规模】\n\n对于 $30\\%$ 的数据，$n \\le 10^6$。\n\n对于 $50\\%$ 的数据，$n \\le 10^{16}$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^{1000}$。", "locale": "zh-CN"}}}
{"pid": "P2101", "type": "P", "difficulty": 5, "samples": [["5\n2 2 1 2 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "分治"], "title": "命运石之门的选择", "background": "", "description": "在某一条不知名世界线的冈伦今天突然接到了一条dmail，上面说世界线将会发生巨大变动，未来的他无论如何都无法扭转这种变动回到原来的世界线。而世界线变动的原因是现在的他不久后错过了与助手的约会。他约好要和助手去约会，但是在去约会之前，由于一直拖欠房租，房东大叔要求他帮忙完成一幅画的上色，然而他没有以最快的速度完成这个任务，导致他错过了与助手的约会，从而导致世界线的剧变。现在到了拯救世界的时候，由于冈伦并不擅长画画，于是他找到了同样不擅长画画的你来帮他解决这个问题（这是命运石之门的选择）。不管怎样现在拯救世界的重任交到了你的手上，而你虽然不擅长画画，但是你可以使用编程来帮助你解决这个问题。\n\n一幅画由 $N$ 个宽度为 $1$ 高度为 $H_i$ 的矩形组成，矩形并排排列，相邻的矩形间没有空隙，初始情况下每个矩形都是没有颜色的。你有一个宽度为 $1$ 的刷子，可以竖直或水平的刷，每次使用刷子，刷子都必须保证一直全部处于矩形中，即不能刷到矩形以外的地方去，当然每次刷的时候也不能拐弯。每刷一次，要花费 $1$ 的时间，这和刷的长度无关，比如你可以从最左边刷到最右边（当然是不经过矩形以外的部分），这也只花费 $1$ 的时间。你的目的是将全部的矩形都涂满颜色。请你计算并输出这个最短的时间。", "inputFormat": "第 $1$ 行：一个正整数 $N$，表示矩形的个数。\n\n接下来 $N$ 个正整数 $H_i$，表示第 $i$ 个矩形的高度。", "outputFormat": "一个整数，表示最少花费的时间。\n", "hint": "对于 $30\\%$ 数据，$N\\leq20, H_i\\leq100$\n\n对于 $60\\%$ 数据，$N\\leq100, H_i\\leq1000$\n\n对于 $100\\%$ 数据，$N\\le5000, H_i\\leq10^9$", "locale": "zh-CN", "translations": {"en": {"title": "The Choice of Steins;Gate", "background": "", "description": "On an unknown world line, Okabe Rintaro suddenly receives a dmail saying that a huge shift in the world line will occur, and his future self will not be able to reverse the change to return to the original world line no matter what. The reason for the shift is that his present self will soon miss a date with his assistant. He had planned a date with the assistant, but before going, because he had been delaying his rent, the landlord uncle asked him to help color a painting. However, he did not finish this task in the fastest way, which caused him to miss the date with the assistant, leading to a drastic change in the world line. Now it is time to save the world. Since Okabe is not good at drawing, he found you—who is also not good at drawing—to help him solve this problem (this is the choice of Steins;Gate). Anyway, the task of saving the world is now in your hands, and although you are not good at drawing, you can use programming to help solve this problem.\n\nA painting consists of $N$ rectangles, each with width $1$ and height $H_i$. The rectangles are arranged side by side with no gaps between adjacent rectangles. Initially, each rectangle is uncolored. You have a brush of width $1$ that can paint vertically or horizontally. Each time you use the brush, it must always remain entirely within the rectangles; that is, it cannot go outside the rectangles, and of course it cannot make turns while painting. Each brush stroke costs time $1$, which is independent of the length painted. For example, you can paint from the far left to the far right (as long as you do not go beyond the rectangles), and it still costs time $1$. Your goal is to fully color all rectangles. Please compute and output the minimum time required.", "inputFormat": "Line $1$: A positive integer $N$, the number of rectangles.\n\nLine $2$: $N$ positive integers $H_i$, where $H_i$ is the height of the $i$-th rectangle.", "outputFormat": "A single integer, the minimum time required.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $N \\le 20$, $H_i \\le 100$.\n- For $60\\%$ of the testdata, $N \\le 100$, $H_i \\le 1000$.\n- For $100\\%$ of the testdata, $N \\le 5000$, $H_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "命运石之门的选择", "background": "", "description": "在某一条不知名世界线的冈伦今天突然接到了一条dmail，上面说世界线将会发生巨大变动，未来的他无论如何都无法扭转这种变动回到原来的世界线。而世界线变动的原因是现在的他不久后错过了与助手的约会。他约好要和助手去约会，但是在去约会之前，由于一直拖欠房租，房东大叔要求他帮忙完成一幅画的上色，然而他没有以最快的速度完成这个任务，导致他错过了与助手的约会，从而导致世界线的剧变。现在到了拯救世界的时候，由于冈伦并不擅长画画，于是他找到了同样不擅长画画的你来帮他解决这个问题（这是命运石之门的选择）。不管怎样现在拯救世界的重任交到了你的手上，而你虽然不擅长画画，但是你可以使用编程来帮助你解决这个问题。\n\n一幅画由 $N$ 个宽度为 $1$ 高度为 $H_i$ 的矩形组成，矩形并排排列，相邻的矩形间没有空隙，初始情况下每个矩形都是没有颜色的。你有一个宽度为 $1$ 的刷子，可以竖直或水平的刷，每次使用刷子，刷子都必须保证一直全部处于矩形中，即不能刷到矩形以外的地方去，当然每次刷的时候也不能拐弯。每刷一次，要花费 $1$ 的时间，这和刷的长度无关，比如你可以从最左边刷到最右边（当然是不经过矩形以外的部分），这也只花费 $1$ 的时间。你的目的是将全部的矩形都涂满颜色。请你计算并输出这个最短的时间。", "inputFormat": "第 $1$ 行：一个正整数 $N$，表示矩形的个数。\n\n接下来 $N$ 个正整数 $H_i$，表示第 $i$ 个矩形的高度。", "outputFormat": "一个整数，表示最少花费的时间。\n", "hint": "对于 $30\\%$ 数据，$N\\leq20, H_i\\leq100$\n\n对于 $60\\%$ 数据，$N\\leq100, H_i\\leq1000$\n\n对于 $100\\%$ 数据，$N\\le5000, H_i\\leq10^9$", "locale": "zh-CN"}}}
{"pid": "P2102", "type": "P", "difficulty": 5, "samples": [["4 3", "AAA\nAAA\nAAA\nBCB"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "贪心"], "title": "地砖铺设", "background": "", "description": "在游戏厅大赚了一笔的小 Z 终于赢到了他想要的家具。乘此机会，他想把自己的房间好好整理一下。\n\n在百货公司，可以买到各种各样正方形的地砖，为了美观起见，小 Z 不希望同样颜色的正方形地砖相邻。所以他找到了小 C 来帮忙解决这件事情。\n\n小 C 很快解决了这个任务。然而，出于某种强迫症，她希望在地上按照长宽划分成网格后，逐行逐列每一块的颜色组成的序列的字典序最小。她希望你帮忙验证一下她的方案。\n", "inputFormat": "第一行，包含两个整数 $N$ 和 $M$，表示房间的长和宽。", "outputFormat": "$N$ 行，每行 $M$ 列，表示地砖铺设的方案，需要这个方案是字典序最小的合法方案。（可以认为，输出的方案去掉回车后形成的字符串字典序最小）\n", "hint": "对于 $50\\%$ 的数据，保证 $N,M \\leq 5$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq N,M \\leq 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Floor Tiling", "background": "", "description": "After making a big profit at the arcade, Xiao Z finally won the furniture he wanted. Taking this opportunity, he wants to tidy up his room.\n\nAt the department store, you can buy square floor tiles in various colors. For the sake of aesthetics, Xiao Z does not want square tiles of the same color to be adjacent. So he asked Xiao C to help solve this.\n\nXiao C quickly solved the task. However, due to a kind of OCD, she wants the sequence of colors of all cells, when the floor is divided into a grid by length and width and read row by row and column by column, to be lexicographically smallest. She hopes you can help verify her plan.", "inputFormat": "The first line contains two integers $N$ and $M$, representing the length and the width of the room.", "outputFormat": "Output $N$ lines, each with $M$ columns, representing a tiling plan. The plan must be the lexicographically smallest among all valid plans. (You may regard that the concatenated string formed by removing newlines from the output plan is lexicographically smallest.)", "hint": "Constraints:\n- For $50\\%$ of the testdata, it is guaranteed that $N, M \\leq 5$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq N, M \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地砖铺设", "background": "", "description": "在游戏厅大赚了一笔的小 Z 终于赢到了他想要的家具。乘此机会，他想把自己的房间好好整理一下。\n\n在百货公司，可以买到各种各样正方形的地砖，为了美观起见，小 Z 不希望同样颜色的正方形地砖相邻。所以他找到了小 C 来帮忙解决这件事情。\n\n小 C 很快解决了这个任务。然而，出于某种强迫症，她希望在地上按照长宽划分成网格后，逐行逐列每一块的颜色组成的序列的字典序最小。她希望你帮忙验证一下她的方案。\n", "inputFormat": "第一行，包含两个整数 $N$ 和 $M$，表示房间的长和宽。", "outputFormat": "$N$ 行，每行 $M$ 列，表示地砖铺设的方案，需要这个方案是字典序最小的合法方案。（可以认为，输出的方案去掉回车后形成的字符串字典序最小）\n", "hint": "对于 $50\\%$ 的数据，保证 $N,M \\leq 5$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq N,M \\leq 100$。\n", "locale": "zh-CN"}}}
{"pid": "P2103", "type": "P", "difficulty": 5, "samples": [["5 6\n1 2 1\n2 3 1\n3 4 1\n4 1 1\n2 4 2\n4 5 4", "1 4 1 2 1 5 6 1 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "O2优化"], "title": "道路值守", "background": null, "description": "Z-Kingdom 有着四通八达的现代化交通。时值独立庆典之际，随着来自周边国家旅客的日益增多，犯罪行为也悄无声息开始滋长起来。\n\n特别任务支援科的警察们从总部收到了关于调查伪装在游客中的犯罪分子的请求。通过调查，他们得到了一张地图，记载了 Z-Kingdom 内每一条道路的长度。\n\n显然，为了减少犯罪行为被发现的可能性，犯罪分子总是会选择最短的路径来行动。为了方便安排人手和推测犯罪分子采取的路线，他们希望得知任意两个地点之间，有多少条犯罪分子可能会选择的道路。", "inputFormat": "第一行，包含两个整数 $N,M$，表示 Z-Kingdom 内的地点数和道路数。\n\n接下来 $M$ 行，每行包含三个整数 $x,y,z$，表示道路连接的两个不同地点的标号，以及道路的长度。道路是双向的。\n\n两个不同地点之间不会有超过一条道路。", "outputFormat": "输出一行，包含 $\\dfrac{N(N-1)}{2}$ 个整数  $C_{1,2},C_{1,3},\\cdots,C_{1,N},C_{2,3},C_{2,4},\\cdots,C_{2,N},\\cdots,C_{N-1,N}$。\n\n其中 $C_{x, y}$ 表示 x 号地点到 y 号地点之间有多少条犯罪分子可能会选择的道路。", "hint": "【数据规模】\n\n- 对于 $30\\%$ 的数据，保证 $N \\le 50$；\n- 对于 $60\\%$ 的数据，保证 $N \\le 100$；\n- 对于 $100\\%$ 的数据，保证 $N \\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "Road Patrol", "background": "", "description": "Z-Kingdom has a well-connected modern transportation network. During the independence celebration, as the number of visitors from neighboring countries increases, criminal activities have quietly begun to rise.\n\nThe police officers of the Special Task Support Division received a request from headquarters to investigate criminals disguised as tourists. Through their investigation, they obtained a map recording the length of every road in Z-Kingdom.\n\nClearly, to reduce the chances of being discovered, criminals will always choose the shortest route for their movements. To better allocate manpower and predict the routes criminals might take, they want to know, for any two locations, how many routes the criminals might choose, i.e., how many shortest paths there are between them.", "inputFormat": "The first line contains two integers $N, M$, representing the number of locations and the number of roads in Z-Kingdom.\n\nThe next $M$ lines, each containing three integers $x, y, z$, represent a bidirectional road connecting two different locations $x$ and $y$ with length $z$.\n\nThere is at most one road between any two different locations.", "outputFormat": "Output one line containing $\\dfrac{N(N-1)}{2}$ integers: $C_{1,2}, C_{1,3}, \\cdots, C_{1,N}, C_{2,3}, C_{2,4}, \\cdots, C_{2,N}, \\cdots, C_{N-1,N}$, separated by spaces.\n\nHere $C_{x, y}$ denotes the number of shortest paths from location $x$ to location $y$.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $N \\le 50$.\n- For $60\\%$ of the testdata, $N \\le 100$.\n- For $100\\%$ of the testdata, $N \\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "道路值守", "background": null, "description": "Z-Kingdom 有着四通八达的现代化交通。时值独立庆典之际，随着来自周边国家旅客的日益增多，犯罪行为也悄无声息开始滋长起来。\n\n特别任务支援科的警察们从总部收到了关于调查伪装在游客中的犯罪分子的请求。通过调查，他们得到了一张地图，记载了 Z-Kingdom 内每一条道路的长度。\n\n显然，为了减少犯罪行为被发现的可能性，犯罪分子总是会选择最短的路径来行动。为了方便安排人手和推测犯罪分子采取的路线，他们希望得知任意两个地点之间，有多少条犯罪分子可能会选择的道路。", "inputFormat": "第一行，包含两个整数 $N,M$，表示 Z-Kingdom 内的地点数和道路数。\n\n接下来 $M$ 行，每行包含三个整数 $x,y,z$，表示道路连接的两个不同地点的标号，以及道路的长度。道路是双向的。\n\n两个不同地点之间不会有超过一条道路。", "outputFormat": "输出一行，包含 $\\dfrac{N(N-1)}{2}$ 个整数  $C_{1,2},C_{1,3},\\cdots,C_{1,N},C_{2,3},C_{2,4},\\cdots,C_{2,N},\\cdots,C_{N-1,N}$。\n\n其中 $C_{x, y}$ 表示 x 号地点到 y 号地点之间有多少条犯罪分子可能会选择的道路。", "hint": "【数据规模】\n\n- 对于 $30\\%$ 的数据，保证 $N \\le 50$；\n- 对于 $60\\%$ 的数据，保证 $N \\le 100$；\n- 对于 $100\\%$ 的数据，保证 $N \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P2104", "type": "P", "difficulty": 3, "samples": [["4 10\n1101\n*/-*-*-/*/", "10110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "离线处理"], "title": "二进制", "background": "", "description": "小 Z 最近学会了二进制数，他觉得太小的二进制数太没意思，于是他想对一个巨大二进制数做以下 $4$ 种基础运算：\n\n运算 $1$：将整个二进制数加 $1$。\n\n运算 $2$：将整个二进制数减 $1$。\n\n运算 $3$：将整个二进制数乘 $2$。\n\n运算 $4$：将整个二进制数整除 $2$。\n\n小 Z 很想知道运算后的结果，他只好向你求助。\n\n（Ps：为了简化问题，数据保证 `+`，`-` 操作不会导致最高位的进位与退位）", "inputFormat": "第一行两个正整数 $n,m$，表示原二进制数的长度以及运算数。\n\n接下来一行 $n$ 个字符，分别为 `0` 或 `1` 表示这个二进制数。\n\n第三行 $m$ 个字符，分别为 `+`，`-`，`*`，`/`，对应运算 $1,2,3,4$。", "outputFormat": "一行若干个字符，表示经过运算后的二进制数。\n", "hint": "\n对于 $30\\%$ 的数据，$1 \\leq n,m \\leq 1000$。\n\n对于 $60\\%$ 的数据，$1 \\leq n,m \\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 5 \\times 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Binary", "background": "", "description": "Xiao Z recently learned about binary numbers. He thinks very small binary numbers are boring, so he wants to perform the following $4$ basic operations on a huge binary number:\n\nOperation $1$: Add $1$ to the entire binary number.\n\nOperation $2$: Subtract $1$ from the entire binary number.\n\nOperation $3$: Multiply the entire binary number by $2$.\n\nOperation $4$: Integer divide the entire binary number by $2$.\n\nXiao Z really wants to know the result after the operations, so he asks you for help.\n\n(P.S.: To simplify the problem, the testdata guarantees that the `+` and `-` operations will not cause a carry-out or a borrow at the most significant bit.)", "inputFormat": "The first line contains two positive integers $n, m$, representing the length of the original binary number and the number of operations.\n\nThe second line contains $n$ characters, each being `0` or `1`, representing this binary number.\n\nThe third line contains $m$ characters, each being one of `+`, `-`, `*`, `/`, corresponding to operations $1, 2, 3, 4$.", "outputFormat": "Output one line with some characters, representing the binary number after performing the operations.", "hint": "Constraints:\n\nFor $30\\%$ of the testdata, $1 \\leq n, m \\leq 1000$.\n\nFor $60\\%$ of the testdata, $1 \\leq n, m \\leq 10^5$.\n\nFor $100\\%$ of the testdata, $1 \\leq n, m \\leq 5 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二进制", "background": "", "description": "小 Z 最近学会了二进制数，他觉得太小的二进制数太没意思，于是他想对一个巨大二进制数做以下 $4$ 种基础运算：\n\n运算 $1$：将整个二进制数加 $1$。\n\n运算 $2$：将整个二进制数减 $1$。\n\n运算 $3$：将整个二进制数乘 $2$。\n\n运算 $4$：将整个二进制数整除 $2$。\n\n小 Z 很想知道运算后的结果，他只好向你求助。\n\n（Ps：为了简化问题，数据保证 `+`，`-` 操作不会导致最高位的进位与退位）", "inputFormat": "第一行两个正整数 $n,m$，表示原二进制数的长度以及运算数。\n\n接下来一行 $n$ 个字符，分别为 `0` 或 `1` 表示这个二进制数。\n\n第三行 $m$ 个字符，分别为 `+`，`-`，`*`，`/`，对应运算 $1,2,3,4$。", "outputFormat": "一行若干个字符，表示经过运算后的二进制数。\n", "hint": "\n对于 $30\\%$ 的数据，$1 \\leq n,m \\leq 1000$。\n\n对于 $60\\%$ 的数据，$1 \\leq n,m \\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 5 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2105", "type": "P", "difficulty": 3, "samples": [["12 13 6\n10 4\n12 10\n1 1\n2 3\n3 2\n2 6", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["枚举"], "title": "K皇后", "background": "", "description": "小 Z 最近捡到了一个 $n$ 行 $m$ 列的棋盘，棋盘上的格子的横纵坐标从 $1$ 开始编号，他想在棋盘上摆放 $K$ 个皇后。他想知道在他摆完这 $K$ 个皇后之后，棋盘上还有多少个格子是不会被攻击到的。\n\n**注意：一个皇后会攻击到这个皇后所在的那一行，那一列，以及两条对角线。**", "inputFormat": "第一行三个正整数 $n,m,K$，表示棋盘的行列，以及小 Z 摆放的皇后的个数。\n\n接下来 $K$ 行，每行两个正整数 $x,y$，表示这个皇后被摆在了第 $x$ 行，第 $y$ 列，数据保证任何两个皇后都不会被摆在同一个格子里。", "outputFormat": "仅一个整数，表示棋盘上还有多少个格子是不会被攻击到的。", "hint": "- 对于 $30\\%$ 的数据，$1\\le n,m\\le 5\\times10^3$，$1\\le K\\le 500$；\n- 对于另外 $10\\%$ 的数据，$K=1$；\n- 对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^4$，$1\\le K\\le 500$。", "locale": "zh-CN", "translations": {"en": {"title": "K Queens", "background": "", "description": "Xiao Z recently found a chessboard with $n$ rows and $m$ columns. The row and column coordinates of the cells are numbered starting from $1$. He wants to place $K$ queens on the board. He wants to know how many cells will not be attacked after he places these $K$ queens.\n\nNote: A queen attacks the entire row, the entire column, and both diagonals that pass through its position.", "inputFormat": "The first line contains three positive integers $n,m,K$, representing the number of rows and columns of the board, and the number of queens Xiao Z places.\n\nThe next $K$ lines each contain two positive integers $x,y$, indicating that a queen is placed at row $x$, column $y$. It is guaranteed that no two queens are placed on the same cell.", "outputFormat": "Output a single integer: the number of cells on the board that are not attacked.", "hint": "- For $30\\%$ of the testdata, $1\\le n,m\\le 5\\times 10^3$, $1\\le K\\le 500$.\n- For an additional $10\\%$ of the testdata, $K=1$.\n- For $100\\%$ of the testdata, $1\\le n,m\\le 2\\times 10^4$, $1\\le K\\le 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "K皇后", "background": "", "description": "小 Z 最近捡到了一个 $n$ 行 $m$ 列的棋盘，棋盘上的格子的横纵坐标从 $1$ 开始编号，他想在棋盘上摆放 $K$ 个皇后。他想知道在他摆完这 $K$ 个皇后之后，棋盘上还有多少个格子是不会被攻击到的。\n\n**注意：一个皇后会攻击到这个皇后所在的那一行，那一列，以及两条对角线。**", "inputFormat": "第一行三个正整数 $n,m,K$，表示棋盘的行列，以及小 Z 摆放的皇后的个数。\n\n接下来 $K$ 行，每行两个正整数 $x,y$，表示这个皇后被摆在了第 $x$ 行，第 $y$ 列，数据保证任何两个皇后都不会被摆在同一个格子里。", "outputFormat": "仅一个整数，表示棋盘上还有多少个格子是不会被攻击到的。", "hint": "- 对于 $30\\%$ 的数据，$1\\le n,m\\le 5\\times10^3$，$1\\le K\\le 500$；\n- 对于另外 $10\\%$ 的数据，$K=1$；\n- 对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^4$，$1\\le K\\le 500$。", "locale": "zh-CN"}}}
{"pid": "P2106", "type": "P", "difficulty": 5, "samples": [["4", "867"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "倍增", "数位 DP", "矩阵加速"], "title": "Sam 数", "background": null, "description": "小 Z 最近发现了一种非常有趣的数，他将这种数称之为 Sam 数。\n\nSam 数具有以下特征：相邻两位的数字之差不超过 $2$。\n\n小 Z 还将 Sam 数按位数进行了分类，他将一个 $k$ 位 Sam 数称之为 $k$ 阶 Sam 数。\n\n但不幸的是小 Z 发现他数不清第 $k$ 阶的 Sam 数一共有多少个，这个时候机智的他想到了向你求助。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入共一行一个整数 $k$，含义见题面。", "outputFormat": "一行一个整数 $ans$，表示 $k$ 阶的 Sam 数的个数。\n\n答案对 $10^9+7$ 取模。", "hint": "对于 $30\\%$ 的数据，$1\\le k\\le10^6$。\n\n对于 $60\\%$ 的数据，$1\\le k\\le 10^{12}$。\n\n对于 $100\\%$ 的数据，$1\\le k\\le10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Sam Numbers", "background": "", "description": "Xiao Z recently discovered a very interesting type of number, which he calls a Sam number.\n\nSam numbers have the following property: the difference between any two adjacent digits does not exceed $2$.\n\nXiao Z also classifies Sam numbers by their number of digits. He calls a $k$-digit Sam number a $k$-order Sam number.\n\nUnfortunately, Xiao Z cannot figure out how many $k$-order Sam numbers there are, so he turns to you for help.\n\nThe answer should be taken modulo $10^9 + 7$.", "inputFormat": "The input contains a single integer $k$, as described above.", "outputFormat": "Output a single integer $ans$, the number of $k$-order Sam numbers.\n\nThe answer should be taken modulo $10^9 + 7$.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $1 \\le k \\le 10^6$.\n- For $60\\%$ of the testdata, $1 \\le k \\le 10^{12}$.\n- For $100\\%$ of the testdata, $1 \\le k \\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Sam 数", "background": null, "description": "小 Z 最近发现了一种非常有趣的数，他将这种数称之为 Sam 数。\n\nSam 数具有以下特征：相邻两位的数字之差不超过 $2$。\n\n小 Z 还将 Sam 数按位数进行了分类，他将一个 $k$ 位 Sam 数称之为 $k$ 阶 Sam 数。\n\n但不幸的是小 Z 发现他数不清第 $k$ 阶的 Sam 数一共有多少个，这个时候机智的他想到了向你求助。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入共一行一个整数 $k$，含义见题面。", "outputFormat": "一行一个整数 $ans$，表示 $k$ 阶的 Sam 数的个数。\n\n答案对 $10^9+7$ 取模。", "hint": "对于 $30\\%$ 的数据，$1\\le k\\le10^6$。\n\n对于 $60\\%$ 的数据，$1\\le k\\le 10^{12}$。\n\n对于 $100\\%$ 的数据，$1\\le k\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2107", "type": "P", "difficulty": 4, "samples": [["2 10\n1 100\n5 5", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "堆", "优先队列", "反悔贪心"], "title": "小 Z 的 AK 计划", "background": null, "description": "在小 Z 的家乡，有机房一条街，街上有很多机房。每个机房里都有一万个人在切题。小 Z 刚刷完 CodeChef，准备出来逛逛。\n\n机房一条街有 $n$ 个机房，第 $i$ 个机房的坐标为 $x_i$，小 Z 的家坐标为 $0$。小 Z 在街上移动的速度为 $1$，即从 $x_1$ 到 $x_2$ 所耗费的时间为 $|x_1 - x_2|$。\n\n每个机房的学生数量不同，ACM 题目水平也良莠不齐。小 Z 到达第 $i$ 个机房后，可以花 $t_i$ 的时间想题，然后瞬间 AK；当然，也可以过机房而不入。\n\n小 Z 现在只有 $m$ 个单位时间，之后他就该赶着去打 Codeforces 了。现在他想知道自己最多能在多少个机房 AK，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n,m$。\n\n接下来 $n$ 行，每行包含两个整数 $x_i,t_i$。", "outputFormat": "第一行包含一个整数，表示小 Z 最多能 AK 的机房数量。", "hint": "对于 $30\\%$ 的数据，$n \\leq 20$。\n\n对于 $60\\%$ 的数据，$n \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq m,x_i \\leq 10^{18}$，$0 \\leq t_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's AK Plan", "background": "", "description": "In Xiao Z's hometown, there is a street of computer labs, with many labs. Each lab has ten thousand people solving problems. Xiao Z just finished CodeChef and is going for a walk.\n\nThere are $n$ computer labs on the street. The $i$-th lab is at coordinate $x_i$, and Xiao Z's home is at $0$. Xiao Z moves at speed $1$, that is, the time from $x_1$ to $x_2$ is $|x_1 - x_2|$.\n\nEach lab has a different number of students, and their ACM problem levels vary. After reaching lab $i$, Xiao Z can spend $t_i$ time thinking, and then instantly \"AK\"; of course, he can also pass by without entering.\n\nXiao Z now has only $m$ units of time. After that, he must hurry to Codeforces. He wants to know the maximum number of labs he can \"AK\". Please help him.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe next $n$ lines each contain two integers $x_i, t_i$.", "outputFormat": "Output one integer: the maximum number of labs Xiao Z can \"AK\".", "hint": "For $30\\%$ of the testdata, $n \\leq 20$.\n\nFor $60\\%$ of the testdata, $n \\leq 1000$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $0 \\leq m, x_i \\leq 10^{18}$, $0 \\leq t_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 Z 的 AK 计划", "background": null, "description": "在小 Z 的家乡，有机房一条街，街上有很多机房。每个机房里都有一万个人在切题。小 Z 刚刷完 CodeChef，准备出来逛逛。\n\n机房一条街有 $n$ 个机房，第 $i$ 个机房的坐标为 $x_i$，小 Z 的家坐标为 $0$。小 Z 在街上移动的速度为 $1$，即从 $x_1$ 到 $x_2$ 所耗费的时间为 $|x_1 - x_2|$。\n\n每个机房的学生数量不同，ACM 题目水平也良莠不齐。小 Z 到达第 $i$ 个机房后，可以花 $t_i$ 的时间想题，然后瞬间 AK；当然，也可以过机房而不入。\n\n小 Z 现在只有 $m$ 个单位时间，之后他就该赶着去打 Codeforces 了。现在他想知道自己最多能在多少个机房 AK，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n,m$。\n\n接下来 $n$ 行，每行包含两个整数 $x_i,t_i$。", "outputFormat": "第一行包含一个整数，表示小 Z 最多能 AK 的机房数量。", "hint": "对于 $30\\%$ 的数据，$n \\leq 20$。\n\n对于 $60\\%$ 的数据，$n \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq m,x_i \\leq 10^{18}$，$0 \\leq t_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2108", "type": "P", "difficulty": 2, "samples": [["six", "6"], ["negative seven hundred twenty nine", "-729"], ["one million one hundred one", "1000101"], ["eight hundred fourteen thousand twenty two", "814022"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 1000, 1000, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "学英语", "background": "", "description": "为了适应紧张的大学学习生活，小 Z 发愤图强开始复习巩固英语。\n\n由于小 Z 对数学比较有好感，他首先复习了数词。小 Z 花了一整天的时间，终于把关于基数词的知识都搞懂了。于是小 Z 非常兴奋，决定出一些题目考考已经过了英语四级、人称英语帝的小 G。考法很简单：小 Z 给出某个整数 $x$ 的英文写法，要求小 D 用阿拉伯数字写出 $x$。\n\n小 Z 会保证以下几点：\n\n1. $-999,999,999 \\leq  x \\leq 999,999,999$\n\n2. 题目中只会用到以下这些英文单词：\n\n`negative, zero, one, two, three, four, five, six, seven, eight, nine, ten`\n\n`eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen, nineteen, twenty`\n\n`thirty, forty, fifty, sixty, seventy, eighty, ninety, hundred, thousand, million`\n\n3. 若 $x$ 为负数，题目中第一个单词是 `negative`，否则任何时候都不会出现 `negative` 这个词。\n\n4. 由于小 Z 很牛 B，他不知道像 $103$ 这样的数字要写成 `one hundred and three` 而是直接写成了 `one hundred three`，就是说小 Z 的所有题目中都没有写 `and` 这个词（尽管本应该是要写的），请你谅解。\n\n5. 除了第 4 点， 其他还是基本符合英语的语法规则的， 比如 $1500$ 他会写成 `one thousand five hundred` 而不会写成 `fifteen hundred`。\n\n小 D 拿到题目后不屑地说了一句：水题！写个程序么好了……\n\n但是小 D 要出去玩（此时应该已经在千里之外爽玩了） ，这个任务就交给你了。\n", "inputFormat": "一行，题目描述中所说的 $x$ 的英文写法。\n", "outputFormat": "一行， $x$ 的阿拉伯数字写法。\n", "hint": "对于 $100\\%$ 的数据，$-999,999,999 ≤ x ≤ 999,999,999$。", "locale": "zh-CN", "translations": {"en": {"title": "Learning English", "background": "", "description": "To adapt to the intense college study life, Xiao Z decided to review and strengthen his English.\n\nSince Xiao Z is fond of math, he started with numerals. Xiao Z spent a whole day and finally understood everything about cardinal numbers. He was very excited and decided to make some problems to quiz Xiao G, who has passed the College English Test Band 4 (CET-4) and is known as an “English master.” The rule is simple: Xiao Z gives the English spelling of an integer $x$, and Xiao D is required to write $x$ in Arabic numerals.\n\nXiao Z guarantees the following:\n\n1. $-999,999,999 \\leq  x \\leq 999,999,999$.\n2. Only the following English words will be used in the problem statement:\n`negative, zero, one, two, three, four, five, six, seven, eight, nine, ten`\n`eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen, nineteen, twenty`\n`thirty, forty, fifty, sixty, seventy, eighty, ninety, hundred, thousand, million`\n3. If $x$ is negative, the first word in the problem statement is `negative`; otherwise, the word `negative` will never appear.\n4. Because Xiao Z is very confident, he does not know that numbers like $103$ should be written as `one hundred and three` and instead writes `one hundred three`. That is, the word `and` never appears in any of Xiao Z’s problems (even though it normally should). Please understand.\n5. Except for point 4, the rest basically follow English grammar; for example, $1500$ is written as `one thousand five hundred` rather than `fifteen hundred`.\n\nUpon receiving the problem, Xiao D scoffed: “Trivial! Just write a program...”.\n\nBut Xiao D is going out to have fun (by now probably thousands of miles away), so this task is left to you.", "inputFormat": "One line, the English representation of $x$ as described in the problem statement.", "outputFormat": "One line, the Arabic numeral form of $x$.", "hint": "For $100\\%$ of the testdata, $-999,999,999 ≤ x ≤ 999,999,999$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "学英语", "background": "", "description": "为了适应紧张的大学学习生活，小 Z 发愤图强开始复习巩固英语。\n\n由于小 Z 对数学比较有好感，他首先复习了数词。小 Z 花了一整天的时间，终于把关于基数词的知识都搞懂了。于是小 Z 非常兴奋，决定出一些题目考考已经过了英语四级、人称英语帝的小 G。考法很简单：小 Z 给出某个整数 $x$ 的英文写法，要求小 D 用阿拉伯数字写出 $x$。\n\n小 Z 会保证以下几点：\n\n1. $-999,999,999 \\leq  x \\leq 999,999,999$\n\n2. 题目中只会用到以下这些英文单词：\n\n`negative, zero, one, two, three, four, five, six, seven, eight, nine, ten`\n\n`eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen, nineteen, twenty`\n\n`thirty, forty, fifty, sixty, seventy, eighty, ninety, hundred, thousand, million`\n\n3. 若 $x$ 为负数，题目中第一个单词是 `negative`，否则任何时候都不会出现 `negative` 这个词。\n\n4. 由于小 Z 很牛 B，他不知道像 $103$ 这样的数字要写成 `one hundred and three` 而是直接写成了 `one hundred three`，就是说小 Z 的所有题目中都没有写 `and` 这个词（尽管本应该是要写的），请你谅解。\n\n5. 除了第 4 点， 其他还是基本符合英语的语法规则的， 比如 $1500$ 他会写成 `one thousand five hundred` 而不会写成 `fifteen hundred`。\n\n小 D 拿到题目后不屑地说了一句：水题！写个程序么好了……\n\n但是小 D 要出去玩（此时应该已经在千里之外爽玩了） ，这个任务就交给你了。\n", "inputFormat": "一行，题目描述中所说的 $x$ 的英文写法。\n", "outputFormat": "一行， $x$ 的阿拉伯数字写法。\n", "hint": "对于 $100\\%$ 的数据，$-999,999,999 ≤ x ≤ 999,999,999$。", "locale": "zh-CN"}}}
{"pid": "P2109", "type": "P", "difficulty": 6, "samples": [["3 5", "75"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2007", "NOI", "O2优化", "矩阵加速", "状压 DP"], "title": "[NOI2007] 生成树计数", "background": "", "description": "最近，小栋在无向连通图的生成树个数计算方面有了惊人的进展，他发现：\n\n- $n$ 个结点的环的生成树个数为 $n$。\n- $n$ 个结点的完全图的生成树个数为 $n^{n-2}$ 。\n\n这两个发现让小栋欣喜若狂，由此更加坚定了他继续计算生成树个数的想法，他要计算出各种各样图的生成树数目。\n\n一天，小栋和同学聚会，大家围坐在一张大圆桌周围。小栋看了看，马上想到了生成树问题。如果把每个同学看成一个结点，邻座（结点间距离为 $1$）的同学间连一条边，就变成了一个环。可是，小栋对环的计数已经十分娴熟且不再感兴趣。于是，小栋又把图变了一下：不仅把邻座的同学之间连一条边，还把相隔一个座位（结点间距离为 $2$）的同学之间也连一条边，将结点间有边直接相连的这两种情况统称为 有边相连，如图 $1$ 所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5lvvgbor.png) \n\n小栋以前没有计算过这类图的生成树个数，但是，他想起了老师讲过的计算任意图的生成树个数的一种通用方法：构造一个 $n\\times n$ 的矩阵 $A=\\{ a_{i,j}\\}$，其中：\n\n$$a_{i,j}=\\begin{cases}\nd_i & i=j \\\\\n-1 & \\text{$i, j$ 之间有边直接相连} \\\\\n0 & \\text{其他情况}\n\\end{cases}$$\n\n与图 1 相应的 $A$ 矩阵如下所示。为了计算图 1 所对应的生成数的个数，只要去掉矩阵 $A$ 的最后一行和最后一列，得到一个 $(n-1)\\times(n-1)$ 的矩阵 $B$，计算出矩阵 $B$ 的行列式的值便可得到图 1 的生成树的个数。\n\n$$\nA=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1 & -1 \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & -1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\\\\\nB=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1  \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0  \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\n$$\n\n所以生成树的个数为 $\\det B =3528$。小栋发现利用通用方法，因计算过于复杂而很难算出来，而且用其他方法也难以找到更简便的公式进行计算。于是，他将图做了简化，从一个地方将圆桌断开，这样所有的同学形成了一条链，连接距离为 1 和距离为 2 的点。例如八个点的情形如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfo7z7yu.png) \n\n这样生成树的总数就减少了很多。小栋不停的思考，一直到聚会结束，终于找到了一种快捷的方法计算出这个图的生成树个数。可是，如果把距离为 $3$ 的点也连起来，小栋就不知道如何快捷计算了。现在，请你帮助小栋计算这类图的生成树的数目。\n", "inputFormat": "输入文件中包含两个整数 $k,n$，由一个空格分隔。$k$ 表示要将所有距离不超过 $k$（含 $k$）的结点连接起来，$n$ 表示有 $n$ 个结点。", "outputFormat": "输出文件输出一个整数，表示生成树的个数。由于答案可能比较大，所以你只要输出答案除 $65521$ 的余数即可。", "hint": "样例对应的图如下：\n\n$$\nA = \\begin{bmatrix}\n3 & -1 & -1 & -1 & 0 \\\\\n-1 & 4 & -1 & -1 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 \\\\\n-1 & -1 & -1 & 4 & -1 \\\\\n0 & -1 & -1 & -1 & 3 \\\\\n\\end{bmatrix},\nB = \\begin{bmatrix}\n3 & -1 & -1 & -1 \\\\\n-1 & 4 & -1 & -1  \\\\\n-1 & -1 & 4 & -1  \\\\\n-1 & -1 & -1 & 4  \\\\\n\\end{bmatrix}, \\det B = 75\n$$\n\n### 数据规模和约定\n\n| 测试点编号 |   $k$   |      $n$      |\n| :--------: | :-----: | :-----------: |\n|     1      |  $=2$   |   $\\le 10$    |\n|     2      |  $=3$   |     $=5$      |\n|     3      |  $=4$   |   $\\le 10$    |\n|     4      |  $=5$   |     $=10$     |\n|     5      | $\\le 3$ |   $\\le 100$   |\n|     6      | $\\le 5$ |   $\\le 100$   |\n|     7      | $\\le 3$ |  $\\le 2000$   |\n|     8      | $\\le 5$ |  $\\le 10000$  |\n|     9      | $\\le 3$ | $\\le 10^{15}$ |\n|     10     | $\\le 5$ | $\\le 10^{15}$ |\n\n此外，对于所有数据，$2\\le k\\le n$。\n\n### 提示\n\n以下为行列式的一种计算方法。记 $\\sigma(\\bm P)$ 表示排列 $\\bm P$ 中逆序对的数量，那么可以求得矩阵 $B$ 的行列式如下：\n\n$$\\det B=\\sum_{\\bm P=[p_1,p_2,\\cdots,p_n]} (-1)^{\\sigma(\\bm P)} \\prod_{i=1}^n b_{i,p_i}$$\n\n例如，对于 $B=\\begin{bmatrix}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 0\\end{bmatrix}$，其行列式计算如下：\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\bm P & \\sigma(\\bm P) & b_{1,p_1} & b_{2,p_2} & b_{3,p_3} & (-1)^{\\sigma(\\bm P)}\\prod_{i=1}^n b_{i,p_i} \\\\ \\hline\n[1, 2, 3] & 0 & 1 & 5 & 0 & 0 \\\\ \\hline\n[1, 3, 2] & 1 & 1 & 6 & 8 & -48 \\\\\\hline\n[2, 1, 3] & 1 & 2 & 4 & 0 & 0 \\\\\\hline\n[2, 3, 1] & 2 & 2 & 6 & 7 & 84 \\\\\\hline\n[3, 1, 2] & 2 & 3 & 4 & 8 & 96 \\\\\\hline\n[3, 2, 1] & 3 & 3 & 5 & 7 & -105 \\\\\\hline\n\\end{array}\n$$\n\n所以 $B$ 的行列式值为 $0-48+0+84+96-105=27$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2007] Counting Spanning Trees", "background": "", "description": "Recently, Xiao Dong has made amazing progress in counting the number of spanning trees in undirected connected graphs. He discovered:\n\n- The number of spanning trees of a cycle with $n$ vertices is $n$.\n- The number of spanning trees of a complete graph with $n$ vertices is $n^{n-2}$.\n\nThese two discoveries made him ecstatic and strengthened his determination to keep counting spanning trees for various graphs.\n\nOne day, during a class reunion, everyone sat around a large round table. Xiao Dong looked around and immediately thought of the spanning tree problem. If each classmate is a vertex and edges are added between adjacent seats (distance between vertices is $1$), the graph becomes a cycle. However, Xiao Dong was already very proficient at counting spanning trees of cycles and lost interest. So, he modified the graph: he not only added edges between adjacent seats, but also between classmates with one seat in between (distance between vertices is $2$). We collectively call these cases directly connected by an edge; see Figure 1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5lvvgbor.png) \n\nXiao Dong had not counted spanning trees for this type of graph before, but he remembered a general method taught by his teacher for counting spanning trees of any graph: construct an $n\\times n$ matrix $A=\\{ a_{i,j}\\}$, where:\n\n$$a_{i,j}=\\begin{cases}\nd_i & i=j \\\\\n-1 & \\text{$i, j$ 之间有边直接相连} \\\\\n0 & \\text{其他情况}\n\\end{cases}$$\n\nThe matrix $A$ corresponding to Figure 1 is shown below. To compute the number of spanning trees for the graph in Figure 1, remove the last row and last column of matrix $A$ to obtain an $(n-1)\\times(n-1)$ matrix $B$. The number of spanning trees equals the determinant of $B$.\n\n$$\nA=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1 & -1 \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & -1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\\\\\nB=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1  \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0  \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\n$$\n\nHence the number of spanning trees is $\\det B =3528$. Xiao Dong found that using the general method was too complicated to compute, and it was also hard to find a simpler closed form by other means. So, he simplified the graph: he split the round table at one point, turning all classmates into a chain, and connected vertices at distance $1$ and distance $2$. For example, the case with eight vertices is as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfo7z7yu.png) \n\nThis greatly reduces the total number of spanning trees. Xiao Dong kept thinking until the party was over and finally found a quick method to compute the number of spanning trees of this graph. However, if vertices at distance $3$ are also connected, he did not know how to compute it quickly. Now, please help Xiao Dong count the number of spanning trees for this type of graph.", "inputFormat": "The input contains two integers $k, n$ separated by a space. Here, $k$ means all pairs of vertices whose distance is at most $k$ (inclusive) along the chain are connected by an edge, and $n$ means there are $n$ vertices.", "outputFormat": "Output a single integer: the number of spanning trees. Since the answer may be large, output the answer modulo $65521$.", "hint": "Sample corresponds to the following graph:\n\n$$\nA = \\begin{bmatrix}\n3 & -1 & -1 & -1 & 0 \\\\\n-1 & 4 & -1 & -1 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 \\\\\n-1 & -1 & -1 & 4 & -1 \\\\\n0 & -1 & -1 & -1 & 3 \\\\\n\\end{bmatrix},\nB = \\begin{bmatrix}\n3 & -1 & -1 & -1 \\\\\n-1 & 4 & -1 & -1  \\\\\n-1 & -1 & 4 & -1  \\\\\n-1 & -1 & -1 & 4  \\\\\n\\end{bmatrix}, \\det B = 75\n$$\n\nConstraints\n\n| Test point id |   $k$   |      $n$      |\n| :-----------: | :-----: | :-----------: |\n|       1       |  $=2$   |   $\\le 10$    |\n|       2       |  $=3$   |     $=5$      |\n|       3       |  $=4$   |   $\\le 10$    |\n|       4       |  $=5$   |     $=10$     |\n|       5       | $\\le 3$ |   $\\le 100$   |\n|       6       | $\\le 5$ |   $\\le 100$   |\n|       7       | $\\le 3$ |  $\\le 2000$   |\n|       8       | $\\le 5$ |  $\\le 10000$  |\n|       9       | $\\le 3$ | $\\le 10^{15}$ |\n|      10       | $\\le 5$ | $\\le 10^{15}$ |\n\nAdditionally, for all testdata, $2\\le k\\le n$.\n\nFurther hint\n\nOne way to compute a determinant is as follows. Let $\\sigma(\\bm P)$ denote the number of inversions in the permutation $\\bm P$. Then the determinant of matrix $B$ can be computed by:\n\n$$\\det B=\\sum_{\\bm P=[p_1,p_2,\\cdots,p_n]} (-1)^{\\sigma(\\bm P)} \\prod_{i=1}^n b_{i,p_i}$$\n\nFor example, for $B=\\begin{bmatrix}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 0\\end{bmatrix}$, its determinant is computed as:\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\bm P & \\sigma(\\bm P) & b_{1,p_1} & b_{2,p_2} & b_{3,p_3} & (-1)^{\\sigma(\\bm P)}\\prod_{i=1}^n b_{i,p_i} \\\\ \\hline\n[1, 2, 3] & 0 & 1 & 5 & 0 & 0 \\\\ \\hline\n[1, 3, 2] & 1 & 1 & 6 & 8 & -48 \\\\\\hline\n[2, 1, 3] & 1 & 2 & 4 & 0 & 0 \\\\\\hline\n[2, 3, 1] & 2 & 2 & 6 & 7 & 84 \\\\\\hline\n[3, 1, 2] & 2 & 3 & 4 & 8 & 96 \\\\\\hline\n[3, 2, 1] & 3 & 3 & 5 & 7 & -105 \\\\\\hline\n\\end{array}\n$$\n\nSo the determinant of $B$ is $0-48+0+84+96-105=27$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2007] 生成树计数", "background": "", "description": "最近，小栋在无向连通图的生成树个数计算方面有了惊人的进展，他发现：\n\n- $n$ 个结点的环的生成树个数为 $n$。\n- $n$ 个结点的完全图的生成树个数为 $n^{n-2}$ 。\n\n这两个发现让小栋欣喜若狂，由此更加坚定了他继续计算生成树个数的想法，他要计算出各种各样图的生成树数目。\n\n一天，小栋和同学聚会，大家围坐在一张大圆桌周围。小栋看了看，马上想到了生成树问题。如果把每个同学看成一个结点，邻座（结点间距离为 $1$）的同学间连一条边，就变成了一个环。可是，小栋对环的计数已经十分娴熟且不再感兴趣。于是，小栋又把图变了一下：不仅把邻座的同学之间连一条边，还把相隔一个座位（结点间距离为 $2$）的同学之间也连一条边，将结点间有边直接相连的这两种情况统称为 有边相连，如图 $1$ 所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5lvvgbor.png) \n\n小栋以前没有计算过这类图的生成树个数，但是，他想起了老师讲过的计算任意图的生成树个数的一种通用方法：构造一个 $n\\times n$ 的矩阵 $A=\\{ a_{i,j}\\}$，其中：\n\n$$a_{i,j}=\\begin{cases}\nd_i & i=j \\\\\n-1 & \\text{$i, j$ 之间有边直接相连} \\\\\n0 & \\text{其他情况}\n\\end{cases}$$\n\n与图 1 相应的 $A$ 矩阵如下所示。为了计算图 1 所对应的生成数的个数，只要去掉矩阵 $A$ 的最后一行和最后一列，得到一个 $(n-1)\\times(n-1)$ 的矩阵 $B$，计算出矩阵 $B$ 的行列式的值便可得到图 1 的生成树的个数。\n\n$$\nA=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1 & -1 \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & -1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\\\\\nB=\\begin{bmatrix}\n4 & -1 & -1 & 0 & 0 & 0 & -1  \\\\\n-1 & 4 & -1 & -1 & 0 & 0 & 0  \\\\\n-1 & -1 & 4 & -1 & -1 & 0 & 0 \\\\\n0 & -1 & -1 & 4 & -1 & -1 & 0 \\\\\n0 & 0 & -1 & -1 & 4 & -1 & -1 \\\\\n0 & 0 & 0 & -1 & -1 & 4 & -1 \\\\\n-1 & 0 & 0 & 0 & -1 & -1 & 4 \\\\\n\\end{bmatrix},\n$$\n\n所以生成树的个数为 $\\det B =3528$。小栋发现利用通用方法，因计算过于复杂而很难算出来，而且用其他方法也难以找到更简便的公式进行计算。于是，他将图做了简化，从一个地方将圆桌断开，这样所有的同学形成了一条链，连接距离为 1 和距离为 2 的点。例如八个点的情形如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cfo7z7yu.png) \n\n这样生成树的总数就减少了很多。小栋不停的思考，一直到聚会结束，终于找到了一种快捷的方法计算出这个图的生成树个数。可是，如果把距离为 $3$ 的点也连起来，小栋就不知道如何快捷计算了。现在，请你帮助小栋计算这类图的生成树的数目。\n", "inputFormat": "输入文件中包含两个整数 $k,n$，由一个空格分隔。$k$ 表示要将所有距离不超过 $k$（含 $k$）的结点连接起来，$n$ 表示有 $n$ 个结点。", "outputFormat": "输出文件输出一个整数，表示生成树的个数。由于答案可能比较大，所以你只要输出答案除 $65521$ 的余数即可。", "hint": "样例对应的图如下：\n\n$$\nA = \\begin{bmatrix}\n3 & -1 & -1 & -1 & 0 \\\\\n-1 & 4 & -1 & -1 & -1 \\\\\n-1 & -1 & 4 & -1 & -1 \\\\\n-1 & -1 & -1 & 4 & -1 \\\\\n0 & -1 & -1 & -1 & 3 \\\\\n\\end{bmatrix},\nB = \\begin{bmatrix}\n3 & -1 & -1 & -1 \\\\\n-1 & 4 & -1 & -1  \\\\\n-1 & -1 & 4 & -1  \\\\\n-1 & -1 & -1 & 4  \\\\\n\\end{bmatrix}, \\det B = 75\n$$\n\n### 数据规模和约定\n\n| 测试点编号 |   $k$   |      $n$      |\n| :--------: | :-----: | :-----------: |\n|     1      |  $=2$   |   $\\le 10$    |\n|     2      |  $=3$   |     $=5$      |\n|     3      |  $=4$   |   $\\le 10$    |\n|     4      |  $=5$   |     $=10$     |\n|     5      | $\\le 3$ |   $\\le 100$   |\n|     6      | $\\le 5$ |   $\\le 100$   |\n|     7      | $\\le 3$ |  $\\le 2000$   |\n|     8      | $\\le 5$ |  $\\le 10000$  |\n|     9      | $\\le 3$ | $\\le 10^{15}$ |\n|     10     | $\\le 5$ | $\\le 10^{15}$ |\n\n此外，对于所有数据，$2\\le k\\le n$。\n\n### 提示\n\n以下为行列式的一种计算方法。记 $\\sigma(\\bm P)$ 表示排列 $\\bm P$ 中逆序对的数量，那么可以求得矩阵 $B$ 的行列式如下：\n\n$$\\det B=\\sum_{\\bm P=[p_1,p_2,\\cdots,p_n]} (-1)^{\\sigma(\\bm P)} \\prod_{i=1}^n b_{i,p_i}$$\n\n例如，对于 $B=\\begin{bmatrix}1 & 2 & 3 \\\\ 4 & 5 & 6 \\\\ 7 & 8 & 0\\end{bmatrix}$，其行列式计算如下：\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\bm P & \\sigma(\\bm P) & b_{1,p_1} & b_{2,p_2} & b_{3,p_3} & (-1)^{\\sigma(\\bm P)}\\prod_{i=1}^n b_{i,p_i} \\\\ \\hline\n[1, 2, 3] & 0 & 1 & 5 & 0 & 0 \\\\ \\hline\n[1, 3, 2] & 1 & 1 & 6 & 8 & -48 \\\\\\hline\n[2, 1, 3] & 1 & 2 & 4 & 0 & 0 \\\\\\hline\n[2, 3, 1] & 2 & 2 & 6 & 7 & 84 \\\\\\hline\n[3, 1, 2] & 2 & 3 & 4 & 8 & 96 \\\\\\hline\n[3, 2, 1] & 3 & 3 & 5 & 7 & -105 \\\\\\hline\n\\end{array}\n$$\n\n所以 $B$ 的行列式值为 $0-48+0+84+96-105=27$。\n", "locale": "zh-CN"}}}
{"pid": "P2110", "type": "P", "difficulty": 5, "samples": [["2 47", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索"], "title": "欢总喊楼记", "background": "诗经有云：\n\n关关雎鸠，在河之洲。窈窕淑女，君子好逑。\n\n又是一个被风吹过的夏天……一日欢总在图书馆中自习，抬起头来，只见一翩跹女子从面前飘过，真是回眸一笑百媚生，六宫粉黛无颜色！一阵诗情涌上欢总心头，他顺手写下那诗句：\n\n啊，你是爱，是暖，是希望，你是人间四月天！\n\n任时光匆匆而过，欢总一直没能忘记那女子。人言单思苦，欢总偏单思。夜夜难入梦，此心淑可知。偶然一次机会，欢总得知了那女孩的信息。一日，欢总终于鼓起了勇气，他向她表白！\n\n那晚的夜色格外美丽，欢总在楼下慷慨激昂，气氛浪漫而感人。女孩有点心动了，但是直接答应是不是有点太不矜持了呢？于是，她想难难欢总，看看他到底有多少诚意。", "description": "女孩给出了两个整数 $L$ 和 $R$，她要欢总数出到底有多少个这样的 $X$：\n\n- $L \\le X \\le R$\n- $X$ 在十进制下的最高位与最低位相等\n\n比如，（不考虑 $L \\le X \\le R$ 的限制时）$2,101,329873$ 可以是这样的 $X$，而 $23,4567$ 就不是。\n\n孩子们，欢总下辈子的幸福生活就靠你们帮忙了！", "inputFormat": "一行两个整数 $L,R$。", "outputFormat": "一行一个整数，即满足所述性质的 $X$ 的个数。", "hint": "对于 $50\\%$ 的数据，$1 \\le L \\le R \\le 10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le L \\le R \\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Huan-zong's Shouting Chronicle", "background": "The Classic of Poetry says:\nGuan-guan cries the osprey, on the islets in the river. Fair and graceful is the lady; the gentleman seeks a good mate.\n\nIt was another summer brushed by the wind... One day, while Huan-zong was studying in the library, he looked up and saw a graceful girl drift past. Truly, with one backward glance she smiled, and a hundred charms were born; the beauty of the six palaces lost their color. A wave of poetry rose in Huan-zong’s heart, and he casually wrote the verse:\nAh, you are love, warmth, and hope; you are the April of the human world!\n\nAs time slipped by, Huan-zong still could not forget that girl. People say that unrequited love is bitter, yet Huan-zong insisted on it. Night after night he struggled to sleep; could the fair lady know this heart? By chance, he learned some information about the girl. One day, Huan-zong finally gathered his courage and confessed to her!\n\nThat night was especially beautiful. Huan-zong spoke passionately downstairs; the mood was romantic and moving. The girl felt a bit touched, but would saying yes right away be a bit lacking in reserve? So, she decided to challenge Huan-zong to see how sincere he really was.", "description": "The girl gives two integers $L$ and $R$, and she wants Huan-zong to count how many integers $X$ satisfy:\n\n- $L \\le X \\le R$,\n- The most significant and least significant decimal digits of $X$ are equal.\n\nFor example (ignoring the restriction $L \\le X \\le R$), $2$, $101$, $329873$ qualify, whereas $23$ and $4567$ do not.\n\nChildren, Huan-zong’s happiness in his next life depends on your help!", "inputFormat": "One line containing two integers $L$ and $R$.", "outputFormat": "One line with a single integer, the number of $X$ that satisfy the property.", "hint": "Constraints:\n\nFor $50\\%$ of the testdata, $1 \\le L \\le R \\le 10^6$.\n\nFor $100\\%$ of the testdata, $1 \\le L \\le R \\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "欢总喊楼记", "background": "诗经有云：\n\n关关雎鸠，在河之洲。窈窕淑女，君子好逑。\n\n又是一个被风吹过的夏天……一日欢总在图书馆中自习，抬起头来，只见一翩跹女子从面前飘过，真是回眸一笑百媚生，六宫粉黛无颜色！一阵诗情涌上欢总心头，他顺手写下那诗句：\n\n啊，你是爱，是暖，是希望，你是人间四月天！\n\n任时光匆匆而过，欢总一直没能忘记那女子。人言单思苦，欢总偏单思。夜夜难入梦，此心淑可知。偶然一次机会，欢总得知了那女孩的信息。一日，欢总终于鼓起了勇气，他向她表白！\n\n那晚的夜色格外美丽，欢总在楼下慷慨激昂，气氛浪漫而感人。女孩有点心动了，但是直接答应是不是有点太不矜持了呢？于是，她想难难欢总，看看他到底有多少诚意。", "description": "女孩给出了两个整数 $L$ 和 $R$，她要欢总数出到底有多少个这样的 $X$：\n\n- $L \\le X \\le R$\n- $X$ 在十进制下的最高位与最低位相等\n\n比如，（不考虑 $L \\le X \\le R$ 的限制时）$2,101,329873$ 可以是这样的 $X$，而 $23,4567$ 就不是。\n\n孩子们，欢总下辈子的幸福生活就靠你们帮忙了！", "inputFormat": "一行两个整数 $L,R$。", "outputFormat": "一行一个整数，即满足所述性质的 $X$ 的个数。", "hint": "对于 $50\\%$ 的数据，$1 \\le L \\le R \\le 10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le L \\le R \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P2111", "type": "P", "difficulty": 4, "samples": [["3 90 2\n100", "0.172"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "数学"], "title": "考场奇遇", "background": "本市的某神校里有一个学霸，他的名字叫小明（为了保护主人公的隐私，他的名字都用“小明”代替）。在这次的期中考试中，小明同学走桃花运，在考场上认识了一位女生，她的名字叫小红（同样是为了保护隐私）。", "description": "英语考试结束了，打完铃，她就主动来找小明说话，一来就要借英语卷子对答案。小明是公认的英语大神，二话不说就把卷子借给了她。小红对了一遍答案，简直是千差万别，她不禁冒出了冷汗。这时，小明走过来，安慰她：“没事，我又不是标准答案，不一定全对。”\n\n已知小明答案的准确率是 $A\\%$，一共有 $N$ 道题，给出小红对答案的结果 $S$（一个长为 $N$ 的 01 串，其中 `1` 表示两人答案一样，`0` 表示不一样）。为了简化问题，所有题目都是判断题。\n\n请你帮小红写一个程序，计算出她对 $Q$ 题及以上的概率。\n\n（P.S. 小明后来把那张卷子送给了小红，别想多了，不是定情信物）", "inputFormat": "第 $1$ 行，三个正整数 $N,A,Q$。\n\n第 $2$ 行，一个 01 字符串 $S$。\n", "outputFormat": "一行，一个实数，表示她对 $Q$ 题及以上的概率。（保留 $3$ 位小数）", "hint": "对于 $90\\%$ 数据，$N \\leq 50, N-5 \\leq Q \\leq N$。\n\n对于剩下的 $10\\%$ 数据，$N \\leq 10000, Q = 0$。", "locale": "zh-CN", "translations": {"en": {"title": "An Unexpected Encounter in the Exam Hall", "background": "In a certain elite school in this city, there is a top student named Xiao Ming (to protect the protagonist’s privacy, the name “Xiao Ming” is used). During the midterm exam, Xiao Ming had a stroke of luck and met a girl in the exam hall. Her name is Xiao Hong (also for privacy).", "description": "After the English exam ended and the bell rang, she took the initiative to talk to Xiao Ming and immediately asked to borrow his English paper to check answers. Xiao Ming is recognized as an English master, so he lent it to her without hesitation. After checking, Xiao Hong found her answers were vastly different; she broke into a cold sweat. At this moment, Xiao Ming came over to comfort her: “It’s okay, I’m not the official answer key; I might not be entirely correct.”\n\nIt is known that Xiao Ming’s accuracy rate is $A\\%$, and there are $N$ questions in total. You are given Xiao Hong’s comparison result $S$ (a 01 string of length $N$, where `1` means their answers are the same and `0` means they are different). To simplify the problem, all questions are True/False questions.\n\nPlease help Xiao Hong write a program to compute the probability that she answers at least $Q$ questions correctly.\n\n(P.S. Xiao Ming later gave that paper to Xiao Hong. Don’t overthink it—it wasn’t a love token.)", "inputFormat": "The first line contains three positive integers $N$, $A$, $Q$.\n\nThe second line contains a 01 string $S$.", "outputFormat": "One line containing a real number: the probability that she answers at least $Q$ questions correctly. Print $3$ decimal places.", "hint": "For $90\\%$ of the testdata, $N \\leq 50$, $N - 5 \\leq Q \\leq N$.\n\nFor the remaining $10\\%$ of the testdata, $N \\leq 10000$, $Q = 0$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "考场奇遇", "background": "本市的某神校里有一个学霸，他的名字叫小明（为了保护主人公的隐私，他的名字都用“小明”代替）。在这次的期中考试中，小明同学走桃花运，在考场上认识了一位女生，她的名字叫小红（同样是为了保护隐私）。", "description": "英语考试结束了，打完铃，她就主动来找小明说话，一来就要借英语卷子对答案。小明是公认的英语大神，二话不说就把卷子借给了她。小红对了一遍答案，简直是千差万别，她不禁冒出了冷汗。这时，小明走过来，安慰她：“没事，我又不是标准答案，不一定全对。”\n\n已知小明答案的准确率是 $A\\%$，一共有 $N$ 道题，给出小红对答案的结果 $S$（一个长为 $N$ 的 01 串，其中 `1` 表示两人答案一样，`0` 表示不一样）。为了简化问题，所有题目都是判断题。\n\n请你帮小红写一个程序，计算出她对 $Q$ 题及以上的概率。\n\n（P.S. 小明后来把那张卷子送给了小红，别想多了，不是定情信物）", "inputFormat": "第 $1$ 行，三个正整数 $N,A,Q$。\n\n第 $2$ 行，一个 01 字符串 $S$。\n", "outputFormat": "一行，一个实数，表示她对 $Q$ 题及以上的概率。（保留 $3$ 位小数）", "hint": "对于 $90\\%$ 数据，$N \\leq 50, N-5 \\leq Q \\leq N$。\n\n对于剩下的 $10\\%$ 数据，$N \\leq 10000, Q = 0$。", "locale": "zh-CN"}}}
{"pid": "P2112", "type": "P", "difficulty": 4, "samples": [["4 2\nxxx xxxxx xxxx xx\n（输入的本来是一封情书，被和谐了……）", "1.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "鸿雁传书", "background": "小明给小红写了一封情书，他想把文章变得更完美，所以要进行排版。", "description": "他一共写了 $N$ 个单词，为了美观，要把 $N$ 个单词分成 $K$ 行。单词的相对顺序不能变化。为了简化问题，无需考虑单词间的空格。\n\n小红会喜欢整齐的情书，小明想赢得小红的芳心，所以，他找到你，想让你帮他写一个程序，帮他排版，使得每行字母数的方差最小。请你求出最小的方差。\n", "inputFormat": "\n第 $1$ 行，两个正整数 $N,K$。\n\n第 $2$ 行，$N$ 个空格隔开的单词。", "outputFormat": "一行，一个 $1$ 位小数表示每行字母数的最小方差。", "hint": "【样例说明】\n\n```plain\nxxx xxxxx\nxxxx xx\n```\n\n$1 \\div 2 \\times ((8-7)^2+(6-7)^2) = 1$。\n\n【数据范围】\n\n对于 $30\\%$ 数据，$N \\leq 100$，$K \\leq 3$。\n\n对于全部数据，$N \\leq 1000$，$K \\leq 100$，单词长度 $\\leq 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Wild Goose Mail", "background": "Xiao Ming wrote a love letter to Xiao Hong. He wants to make it more perfect, so he needs to typeset it.", "description": "He wrote $N$ words in total. For aesthetics, you must split the $N$ words into $K$ lines. The relative order of words cannot change. To simplify the problem, ignore spaces between words.\n\nXiao Hong likes neat letters. Xiao Ming wants to win her heart, so he asks you to write a program to typeset the words so that the variance of the number of letters per line is minimized. Please output the minimum variance.", "inputFormat": "Line $1$: two positive integers $N, K$.\n\nLine $2$: $N$ space-separated words.", "outputFormat": "One line: a decimal number with exactly one digit after the decimal point representing the minimum variance of letters per line.", "hint": "Sample Explanation:\n\n```plain\nxxx xxxxx\nxxxx xx\n```\n\n$1 \\div 2 \\times ((8-7)^2+(6-7)^2) = 1$.\n\nConstraints:\n\nFor $30\\%$ of the testdata, $N \\leq 100$, $K \\leq 3$.\n\nFor all testdata, $N \\leq 1000$, $K \\leq 100$, word length $\\leq 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "鸿雁传书", "background": "小明给小红写了一封情书，他想把文章变得更完美，所以要进行排版。", "description": "他一共写了 $N$ 个单词，为了美观，要把 $N$ 个单词分成 $K$ 行。单词的相对顺序不能变化。为了简化问题，无需考虑单词间的空格。\n\n小红会喜欢整齐的情书，小明想赢得小红的芳心，所以，他找到你，想让你帮他写一个程序，帮他排版，使得每行字母数的方差最小。请你求出最小的方差。\n", "inputFormat": "\n第 $1$ 行，两个正整数 $N,K$。\n\n第 $2$ 行，$N$ 个空格隔开的单词。", "outputFormat": "一行，一个 $1$ 位小数表示每行字母数的最小方差。", "hint": "【样例说明】\n\n```plain\nxxx xxxxx\nxxxx xx\n```\n\n$1 \\div 2 \\times ((8-7)^2+(6-7)^2) = 1$。\n\n【数据范围】\n\n对于 $30\\%$ 数据，$N \\leq 100$，$K \\leq 3$。\n\n对于全部数据，$N \\leq 1000$，$K \\leq 100$，单词长度 $\\leq 20$。", "locale": "zh-CN"}}}
{"pid": "P2113", "type": "P", "difficulty": 4, "samples": [["4 3 2 5\n2 2 1 3\n1 1 1 2\n1 2\n2 3\n3 4", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2015", "洛谷原创", "洛谷月赛"], "title": "看球泡妹子", "background": "2014 年巴西世界杯开幕了，现在满城皆是世界杯，商家们利用它大赚一笔，小明和小红也借此机会增进感情。\n", "description": "本届世界杯共有 $n$ 支球队，$m$ 场比赛。男球迷小明喜欢看比赛，女球迷小红喜欢看帅哥。每支球队在小明眼里的实力值为 $a_i$，在小红眼里的帅哥数量为 $b_i$。\n\n每场比赛有两个球队对抗，它们的编号分别是 $p_i$ 和 $q_i$。小明认为一场比赛的精彩度等于两队实力的乘积，小红则认为是两队帅哥数量之和。\n\n由于体力的限制，他们最多只能看 $k$ 场比赛。当然，只要看比赛，两个人一定会一起看。小明作为男生，理应迁就一下女生，所以，请你写一个程序，求出小红看到比赛的精彩度总和不小于 $c$ 的情况下，小明看到比赛的精彩度的最大总和。", "inputFormat": "第一行包含四个正整数 $n,m,k,c$。\n\n第二行有 $n$ 个用空格隔开的正整数 $a_i$。\n\n第三行有 $n$ 个用空格隔开的正整数 $b_i$。\n\n接下来 $m$ 行，每行两个正整数 $p_i,q_i$。\n", "outputFormat": "一行，一个正整数表示小明看到比赛的精彩度的最大总和。如果无论如何都无法满足小红的要求，输出 `-1`。\n", "hint": "#### 数据范围与约定\n\n- 对于 $20\\%$ 数据，$1 \\le n,m,k \\le 5$。\n- 对于 $100\\%$ 数据，$1 \\le n \\le 100$，$1 \\le k \\le m \\le 100$，$1 \\le a_i,b_i \\le 10$，$1 \\le c \\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Watching Soccer and Dating", "background": "The 2014 Brazil World Cup has kicked off. The whole city is full of World Cup fever, and businesses are making a fortune from it. Xiao Ming and Xiao Hong also take this opportunity to strengthen their relationship.", "description": "There are $n$ teams and $m$ matches in this World Cup. Xiao Ming, a male fan, likes watching matches, while Xiao Hong, a female fan, likes watching handsome guys. For each team, its strength in Xiao Ming’s view is $a_i$, and the number of handsome guys in Xiao Hong’s view is $b_i$.\n\nEach match is between two teams with indices $p_i$ and $q_i$. Xiao Ming thinks the excitement of a match equals the product of the two teams’ strengths, while Xiao Hong thinks it equals the sum of the two teams’ numbers of handsome guys.\n\nDue to limited energy, they can watch at most $k$ matches. Of course, if they watch matches, they will always watch together. As a gentleman, Xiao Ming should compromise, so please write a program to find the maximum possible total excitement for Xiao Ming, subject to the constraint that Xiao Hong’s total excitement is at least $c$.", "inputFormat": "The first line contains four positive integers $n, m, k, c$.\n\nThe second line contains $n$ positive integers $a_i$ separated by spaces.\n\nThe third line contains $n$ positive integers $b_i$ separated by spaces.\n\nThe next $m$ lines each contain two positive integers $p_i, q_i$.", "outputFormat": "Output a single line containing a single positive integer: the maximum total excitement that Xiao Ming can get. If it is impossible to satisfy Xiao Hong’s requirement, output `-1`.", "hint": "Constraints\n\n- For $20\\%$ of the testdata, $1 \\le n, m, k \\le 5$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 100$, $1 \\le k \\le m \\le 100$, $1 \\le a_i, b_i \\le 10$, $1 \\le c \\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "看球泡妹子", "background": "2014 年巴西世界杯开幕了，现在满城皆是世界杯，商家们利用它大赚一笔，小明和小红也借此机会增进感情。\n", "description": "本届世界杯共有 $n$ 支球队，$m$ 场比赛。男球迷小明喜欢看比赛，女球迷小红喜欢看帅哥。每支球队在小明眼里的实力值为 $a_i$，在小红眼里的帅哥数量为 $b_i$。\n\n每场比赛有两个球队对抗，它们的编号分别是 $p_i$ 和 $q_i$。小明认为一场比赛的精彩度等于两队实力的乘积，小红则认为是两队帅哥数量之和。\n\n由于体力的限制，他们最多只能看 $k$ 场比赛。当然，只要看比赛，两个人一定会一起看。小明作为男生，理应迁就一下女生，所以，请你写一个程序，求出小红看到比赛的精彩度总和不小于 $c$ 的情况下，小明看到比赛的精彩度的最大总和。", "inputFormat": "第一行包含四个正整数 $n,m,k,c$。\n\n第二行有 $n$ 个用空格隔开的正整数 $a_i$。\n\n第三行有 $n$ 个用空格隔开的正整数 $b_i$。\n\n接下来 $m$ 行，每行两个正整数 $p_i,q_i$。\n", "outputFormat": "一行，一个正整数表示小明看到比赛的精彩度的最大总和。如果无论如何都无法满足小红的要求，输出 `-1`。\n", "hint": "#### 数据范围与约定\n\n- 对于 $20\\%$ 数据，$1 \\le n,m,k \\le 5$。\n- 对于 $100\\%$ 数据，$1 \\le n \\le 100$，$1 \\le k \\le m \\le 100$，$1 \\le a_i,b_i \\le 10$，$1 \\le c \\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2114", "type": "P", "difficulty": 4, "samples": [["3 10\nAND 5\nOR 6\nXOR 7", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "2014", "NOI", "位运算"], "title": "[NOI2014] 起床困难综合症", "background": null, "description": "$21$ 世纪，许多人得了一种奇怪的病：起床困难综合症，其临床表现为：起床难，起床后精神不佳。作为一名青春阳光好少年，atm 一直坚持与起床困难综合症作斗争。通过研究相关文献，他找到了该病的发病原因：在深邃的太平洋海底中，出现了一条名为 drd 的巨龙，它掌握着睡眠之精髓，能随意延长大家的睡眠时间。正是由于 drd 的活动，起床困难综合症愈演愈烈，以惊人的速度在世界上传播。为了彻底消灭这种病，atm 决定前往海底，消灭这条恶龙。历经千辛万苦，atm 终于来到了 drd 所在的地方，准备与其展开艰苦卓绝的战斗。drd 有着十分特殊的技能，他的防御战线能够使用一定的运算来改变他受到的伤害。具体说来，drd 的防御战线由 $n$ 扇防御门组成。每扇防御门包括一个运算 $\\text{op}$ 和一个参数 $t$，其中运算一定是 $\\texttt{OR},\\texttt{XOR},\\texttt{AND}$ 中的一种，参数则一定为非负整数。如果还未通过防御门时攻击力为 $x$，则其通过这扇防御门后攻击力将变为 $x\\,\\text{op}\\,t$。最终 drd 受到的伤害为对方初始攻击力 $x$ 依次经过所有 $n$ 扇防御门后转变得到的攻击力。\n\n由于 atm 水平有限，他的初始攻击力只能为 $0$ 到 $m$ 之间的一个整数（即他的初始攻击力只能在 $0,1,\\ldots,m$ 中任选，但在通过防御门之后的攻击力不受 $m$ 的限制）。为了节省体力，他希望通过选择合适的初始攻击力使得他的攻击能让 drd 受到最大的伤害，请你帮他计算一下，他的一次攻击最多能使 drd 受到多少伤害。", "inputFormat": "输入文件的第 $1$ 行包含 $2$ 个整数，依次为 $n, m$，表示 drd 有 $n$ 扇防御门，atm 的初始攻击力为 $0$ 到 $m$ 之间的整数。\n\n接下来 $n$ 行，依次表示每一扇防御门。每行包括一个字符串 $\\text{op}$ 和一个非负整数 $t$，两者由一个空格隔开，且 $\\text{op}$ 在前，$t$ 在后，$\\text{op}$ 表示该防御门所对应的操作，$t$ 表示对应的参数。", "outputFormat": "输出一行一个整数，表示 atm 的一次攻击最多使 drd 受到多少伤害。", "hint": "**【样例说明】**\n\natm 可以选择的初始攻击力为 $0,1,\\ldots ,10$。\n\n假设初始攻击力为 $4$，最终攻击力经过了如下计算\n\n- $4 \\texttt{ AND } 5 = 4$；\n- $4 \\texttt{ OR } 6 = 6$；\n- $6 \\texttt{ XOR } 7 = 1$。\n\n类似的，我们可以计算出初始攻击力为 $1,3,5,7,9$ 时最终攻击力为 $0$，初始攻击力为 $0,2,4,6,8,10$ 时最终攻击力为 $1$，因此 atm 的一次攻击最多使 drd 受到的伤害值为 $1$。\n\n**【数据规模与约定】**\n\n::cute-table{tuack}\n\n|测试点编号|$n$|$m$|性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$0$|无|\n|$2$|$1000$|$1000$|^|\n|$3$|^|^|^|\n|$4$|$10^5$|$10^5$|$\\text A$|\n|$5$|^|^|$\\text B$|\n|$6$|^|^|无|\n|$7$|^|$10^9$|$\\text B$|\n|$8$|^|^|无|\n|$9$|^|^|^|\n|$10$|^|^|^|\n\n- 特殊性质 $\\mathrm A$：存在一扇防御门为 $\\texttt{AND}~0$；\n- 特殊性质 $\\mathrm B$：所有防御门的操作均相同。\n\n对于所有数据，保证 $2\\le n\\le 10^5$，$0\\le m\\le 10^9$，$0\\le t\\le 10^9$，且 $\\mathrm{op}$ 一定为 $\\verb!AND!,\\verb!OR!,\\verb!XOR!$ 中的一种。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Wake-Up Difficulty Syndrome", "background": "", "description": "In the 21st century, many people have developed a strange illness: the Wake-Up Difficulty Syndrome, whose clinical symptoms are: difficulty getting up and poor mental state after getting up. As a sunny and energetic teenager, atm has always fought against this syndrome. By studying relevant literature, he discovered the cause of the illness: deep under the Pacific Ocean, there is a giant dragon named drd, who masters the essence of sleep and can arbitrarily extend everyone’s sleep time. It is precisely due to drd’s activities that the Wake-Up Difficulty Syndrome has worsened and is spreading at an alarming rate around the world. To completely eliminate this disease, atm decides to go to the seabed to defeat this evil dragon. After enduring many hardships, atm finally arrives at drd’s location, ready for a tough and arduous battle. drd has a very special skill: his defensive front can use certain operations to change the damage he receives. Specifically, drd’s defensive front consists of $n$ defense gates. Each defense gate includes an operation $\\text{op}$ and a parameter $t$, where the operation must be one of $\\texttt{OR}, \\texttt{XOR}, \\texttt{AND}$, and the parameter must be a non-negative integer. If the attack power before passing the gate is $x$, then after passing this gate it becomes $x\\,\\text{op}\\,t$. The final damage drd receives is the attack power obtained by applying all $n$ defense gates in order to the opponent’s initial attack power $x$.\n\nBecause atm’s ability is limited, his initial attack power can only be an integer between $0$ and $m$ (that is, he can choose his initial attack power from $0, 1, \\ldots, m$, but the attack power after passing through the defense gates is not limited by $m$). To save energy, he wants to choose a suitable initial attack power so that his attack causes the maximum possible damage to drd. Please help him compute the maximum damage his single attack can cause.", "inputFormat": "The first line of the input file contains $2$ integers, $n, m$, indicating that drd has $n$ defense gates, and atm’s initial attack power can be any integer from $0$ to $m$.\n\nThe next $n$ lines describe each defense gate in order. Each line contains a string $\\text{op}$ and a non-negative integer $t$, separated by a space, with $\\text{op}$ first and $t$ second. $\\text{op}$ denotes the operation of the defense gate, and $t$ denotes its parameter.", "outputFormat": "Output a single integer on one line: the maximum damage that atm’s single attack can cause to drd.", "hint": "【Sample Explanation】\n\natm can choose an initial attack power from $0, 1, \\ldots, 10$.\n\nSuppose the initial attack power is $4$. The final attack power is computed as follows:\n- $4 \\texttt{ AND } 5 = 4$;\n- $4 \\texttt{ OR } 6 = 6$;\n- $6 \\texttt{ XOR } 7 = 1$.\n\nSimilarly, we can compute that when the initial attack power is $1, 3, 5, 7, 9$, the final attack power is $0$; when the initial attack power is $0, 2, 4, 6, 8, 10$, the final attack power is $1$. Therefore, the maximum damage atm’s single attack can cause to drd is $1$.\n\n【Constraints and Conventions】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/29yj7o58.png)\n\n- Special property $\\mathrm A$: There exists a defense gate equal to $\\texttt{AND}~0$.\n- Special property $\\mathrm B$: All defense gates use the same operation.\n\nFor all testdata, it is guaranteed that $2 \\le n \\le 10^5$, $0 \\le m \\le 10^9$, $0 \\le t \\le 10^9$, and $\\mathrm{op}$ is one of $\\verb!AND!,\\verb!OR!,\\verb!XOR!$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 起床困难综合症", "background": null, "description": "$21$ 世纪，许多人得了一种奇怪的病：起床困难综合症，其临床表现为：起床难，起床后精神不佳。作为一名青春阳光好少年，atm 一直坚持与起床困难综合症作斗争。通过研究相关文献，他找到了该病的发病原因：在深邃的太平洋海底中，出现了一条名为 drd 的巨龙，它掌握着睡眠之精髓，能随意延长大家的睡眠时间。正是由于 drd 的活动，起床困难综合症愈演愈烈，以惊人的速度在世界上传播。为了彻底消灭这种病，atm 决定前往海底，消灭这条恶龙。历经千辛万苦，atm 终于来到了 drd 所在的地方，准备与其展开艰苦卓绝的战斗。drd 有着十分特殊的技能，他的防御战线能够使用一定的运算来改变他受到的伤害。具体说来，drd 的防御战线由 $n$ 扇防御门组成。每扇防御门包括一个运算 $\\text{op}$ 和一个参数 $t$，其中运算一定是 $\\texttt{OR},\\texttt{XOR},\\texttt{AND}$ 中的一种，参数则一定为非负整数。如果还未通过防御门时攻击力为 $x$，则其通过这扇防御门后攻击力将变为 $x\\,\\text{op}\\,t$。最终 drd 受到的伤害为对方初始攻击力 $x$ 依次经过所有 $n$ 扇防御门后转变得到的攻击力。\n\n由于 atm 水平有限，他的初始攻击力只能为 $0$ 到 $m$ 之间的一个整数（即他的初始攻击力只能在 $0,1,\\ldots,m$ 中任选，但在通过防御门之后的攻击力不受 $m$ 的限制）。为了节省体力，他希望通过选择合适的初始攻击力使得他的攻击能让 drd 受到最大的伤害，请你帮他计算一下，他的一次攻击最多能使 drd 受到多少伤害。", "inputFormat": "输入文件的第 $1$ 行包含 $2$ 个整数，依次为 $n, m$，表示 drd 有 $n$ 扇防御门，atm 的初始攻击力为 $0$ 到 $m$ 之间的整数。\n\n接下来 $n$ 行，依次表示每一扇防御门。每行包括一个字符串 $\\text{op}$ 和一个非负整数 $t$，两者由一个空格隔开，且 $\\text{op}$ 在前，$t$ 在后，$\\text{op}$ 表示该防御门所对应的操作，$t$ 表示对应的参数。", "outputFormat": "输出一行一个整数，表示 atm 的一次攻击最多使 drd 受到多少伤害。", "hint": "**【样例说明】**\n\natm 可以选择的初始攻击力为 $0,1,\\ldots ,10$。\n\n假设初始攻击力为 $4$，最终攻击力经过了如下计算\n\n- $4 \\texttt{ AND } 5 = 4$；\n- $4 \\texttt{ OR } 6 = 6$；\n- $6 \\texttt{ XOR } 7 = 1$。\n\n类似的，我们可以计算出初始攻击力为 $1,3,5,7,9$ 时最终攻击力为 $0$，初始攻击力为 $0,2,4,6,8,10$ 时最终攻击力为 $1$，因此 atm 的一次攻击最多使 drd 受到的伤害值为 $1$。\n\n**【数据规模与约定】**\n\n::cute-table{tuack}\n\n|测试点编号|$n$|$m$|性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$100$|$0$|无|\n|$2$|$1000$|$1000$|^|\n|$3$|^|^|^|\n|$4$|$10^5$|$10^5$|$\\text A$|\n|$5$|^|^|$\\text B$|\n|$6$|^|^|无|\n|$7$|^|$10^9$|$\\text B$|\n|$8$|^|^|无|\n|$9$|^|^|^|\n|$10$|^|^|^|\n\n- 特殊性质 $\\mathrm A$：存在一扇防御门为 $\\texttt{AND}~0$；\n- 特殊性质 $\\mathrm B$：所有防御门的操作均相同。\n\n对于所有数据，保证 $2\\le n\\le 10^5$，$0\\le m\\le 10^9$，$0\\le t\\le 10^9$，且 $\\mathrm{op}$ 一定为 $\\verb!AND!,\\verb!OR!,\\verb!XOR!$ 中的一种。", "locale": "zh-CN"}}}
{"pid": "P2115", "type": "P", "difficulty": 5, "samples": [["5\n5\n1\n7\n8\n2", "2.667"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "二分", "USACO"], "title": "[USACO14MAR] Sabotage G", "background": null, "description": "农夫约翰的头号敌人保罗决定破坏农民约翰的挤奶设备。挤奶设备排成一行，共 $N$（$3\\le N\\le 100,000$）台挤奶机，其中第 $i$ 个台挤奶机生产 $M_i$ 单位（$1\\le M_i\\le 10,000$）的牛奶。\n\n\n保罗计划切断一段连续的挤奶机，从第 $i$ 台挤奶机到第 $j$ 台挤奶机（$2\\le i\\le j\\le N-1$）。注意，他不希望断开第一台或最后一台挤奶机，因为这将会使他的计划太容易被发现。保罗的目标是让其余机器的平均产奶量最小。保罗计划除去至少 $1$ 台挤奶机。\n\n请计算剩余机器的最小平均产奶量。", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 到 $N+1$ 行：第 $i+1$ 行包含一个整数 $M_i$。", "outputFormat": "第 $1$ 行：一个实数，表示平均牛奶产量的最小值，保留三位小数（四舍五入）。", "hint": "【样例说明】\n\n移去 $7$ 和 $8$，剩下 $5,1,2$，平均值为 $\\dfrac{8}{3}$。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$N\\le 1,000$。\n\n对于 $50\\%$ 的数据，$N\\le 10,000$。\n\n对于 $100\\%$ 的数据，$3\\le N\\le 100,000$，$1\\le M_i\\le 10,000$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Sabotage G", "background": null, "description": "Farmer John's arch-nemesis, Farmer Paul, has decided to sabotage Farmer John's milking equipment!\n\nThe milking equipment consists of a row of N (3 <= N <= 100,000) milking machines, where the ith machine produces M_i units of milk (1 <= M_i <= 10,000). Farmer Paul plans to disconnect a contiguous block of these machines -- from the ith machine up to the jth machine (2 <= i <= j <= N-1); note that Farmer Paul does not want to disconnect either the first or the last machine, since this will make his plot too easy to discover. Farmer Paul's goal is to minimize the average milk production of the remaining machines. Farmer Paul plans to remove at least 1 cow, even if it would be better for him to avoid sabotage entirely.\n\nFortunately, Farmer John has learned of Farmer Paul's evil plot, and he is wondering how bad his milk production will suffer if the plot succeeds. Please help Farmer John figure out the minimum average milk production of the remaining machines if Farmer Paul does succeed.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Sabotage G", "background": null, "description": "农夫约翰的头号敌人保罗决定破坏农民约翰的挤奶设备。挤奶设备排成一行，共 $N$（$3\\le N\\le 100,000$）台挤奶机，其中第 $i$ 个台挤奶机生产 $M_i$ 单位（$1\\le M_i\\le 10,000$）的牛奶。\n\n\n保罗计划切断一段连续的挤奶机，从第 $i$ 台挤奶机到第 $j$ 台挤奶机（$2\\le i\\le j\\le N-1$）。注意，他不希望断开第一台或最后一台挤奶机，因为这将会使他的计划太容易被发现。保罗的目标是让其余机器的平均产奶量最小。保罗计划除去至少 $1$ 台挤奶机。\n\n请计算剩余机器的最小平均产奶量。", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 到 $N+1$ 行：第 $i+1$ 行包含一个整数 $M_i$。", "outputFormat": "第 $1$ 行：一个实数，表示平均牛奶产量的最小值，保留三位小数（四舍五入）。", "hint": "【样例说明】\n\n移去 $7$ 和 $8$，剩下 $5,1,2$，平均值为 $\\dfrac{8}{3}$。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$N\\le 1,000$。\n\n对于 $50\\%$ 的数据，$N\\le 10,000$。\n\n对于 $100\\%$ 的数据，$3\\le N\\le 100,000$，$1\\le M_i\\le 10,000$。", "locale": "zh-CN"}}}
{"pid": "P2116", "type": "P", "difficulty": 5, "samples": [["9 100\n200 400\n300 400\n300 300\n400 300\n400 400\n500 400\n500 200\n350 200\n200 200", "1628"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "凸包"], "title": "城墙", "background": "", "description": "有一次，一个贪婪的国王命令他的骑士在他的城堡外修建一堵围墙，要求围墙离城堡的最近距离不能少于 $L$。\n\n城堡是一个 $n$ 边形，国王非常吝啬，不愿意多花建一米的围墙，多建的话他会杀掉负责修建的骑士。\n\n请你帮助这个倒霉的骑士，帮他求出最少需要修建多长的围墙。", "inputFormat": "第一行两个整数 $n$，$L$ 表示多边形的边数和最小距离。\n\n接下里 $n$ 行，每行两个整数，表示多边形上的点的坐标。", "outputFormat": "一行一个整数，即最小的围墙长度，四舍五入到整数。", "hint": "#### 数据规模与约定\n- 对于 $100\\%$ 的数据，保证 $3\\le n\\le1000$，$1\\le L\\le1000$，$-10^4\\leq x_i,y_i\\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "City Wall", "background": "", "description": "Once, a greedy king ordered his knight to build a wall outside his castle, requiring that the wall’s minimum distance from the castle must be at least $L$.\n\nThe castle is an $n$-gon. The king is extremely stingy and refuses to build even one extra meter of wall; if more is built, he will execute the knight in charge.\n\nPlease help this unlucky knight compute the minimal length of the wall that needs to be built.", "inputFormat": "The first line contains two integers $n$, $L$, representing the number of sides of the polygon and the minimum distance.\n\nThen follow $n$ lines. Each line contains two integers, the coordinates of a vertex on the polygon.", "outputFormat": "Output a single integer: the minimal length of the wall, rounded to the nearest integer.", "hint": "Constraints\n- For $100\\%$ of the testdata, it is guaranteed that $3\\le n\\le1000$, $1\\le L\\le1000$, and $-10^4\\leq x_i,y_i\\leq 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "城墙", "background": "", "description": "有一次，一个贪婪的国王命令他的骑士在他的城堡外修建一堵围墙，要求围墙离城堡的最近距离不能少于 $L$。\n\n城堡是一个 $n$ 边形，国王非常吝啬，不愿意多花建一米的围墙，多建的话他会杀掉负责修建的骑士。\n\n请你帮助这个倒霉的骑士，帮他求出最少需要修建多长的围墙。", "inputFormat": "第一行两个整数 $n$，$L$ 表示多边形的边数和最小距离。\n\n接下里 $n$ 行，每行两个整数，表示多边形上的点的坐标。", "outputFormat": "一行一个整数，即最小的围墙长度，四舍五入到整数。", "hint": "#### 数据规模与约定\n- 对于 $100\\%$ 的数据，保证 $3\\le n\\le1000$，$1\\le L\\le1000$，$-10^4\\leq x_i,y_i\\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2117", "type": "P", "difficulty": 3, "samples": [["3 12\n1 1 1\n0 1 1\n1 0 0\n3\n2 3\n3\n2 2\n2 2\n1 3\n3\n3\n1 2\n2 1\n1 1\n3\n", "01001\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "小Z的矩阵", "background": "", "description": "小 Z 最近迷上了矩阵，他定义了一个对于一种特殊矩阵的特征函数 $G$。对于 $N\\times N$ 的矩阵 $A$，$A$ 的所有元素均为 $0$ 或 $1$，则 $\\displaystyle G(A) = \\left(\\sum_{i = 1}^n\\sum_{j = 1}^n A_{i, j}\\cdot A_{j, i}\\right) \\bmod 2$。举一个例子：\n\n$$\n\\begin{pmatrix}\n1 & 1 & 1\\\\\n0 & 1 & 1\\\\\n1 & 0 & 0\\\\\n\\end{pmatrix}\n$$\n\n对于上面这个 $3\\times 3$ 矩阵 $A$，$G(A)=(1\\times 1+1\\times 0+1\\times 1+0\\times 1+1\\times 1+1\\times 0+1\\times 1+ 0\\times 1+0\\times 0) \\bmod 2 = 0$。\n\n当然询问一个矩阵的 $G$ 值实在是太简单了。小Z在给出一个 $N\\times N$ 矩阵的同时将给你 $Q$ 个操作，操作描述如下：\n\n- 操作 1：形如 `1 x`，表示将第 $x$ 行的元素全部“翻转”。\n- 操作 2：形如 `2 x`，表示将第 $x$ 列的元素全部“翻转”。\n- 操作 3：形如一个整数`3`，表示询问当前矩阵的特征值 $G$。\n\n“翻转”的定义为将 $1$ 变成 $0$，将 $0$ 变成 $1$。", "inputFormat": "第一行：两个正整数 $N,Q$。$N$ 表示矩阵的行数（列数），$Q$ 表示询问的次数。\n\n接下来 $N$ 行：一个 $N\\times N$ 的矩阵 $A$，$0\\le A_{i, j}\\le 1$。\n\n接下来 $Q$ 行：$Q$ 个操作。", "outputFormat": "一行若干个数，中间没有空格，分别表示每个操作的结果（操作 1 和操作 2 不需要输出）。", "hint": "【数据规模】\n\n- 对于 $30\\%$ 的数据，$N\\le 100$，$Q\\le 10^5$。\n\n- 对于 $100\\%$ 的数据，$N\\le 1,000$，$Q \\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Matrix", "background": "", "description": "Xiao Z has recently become obsessed with matrices. He defines a characteristic function $G$ for a special kind of matrix. For an $N \\times N$ matrix $A$ where every element of $A$ is $0$ or $1$, define\n$\\displaystyle G(A) = \\left(\\sum_{i = 1}^n\\sum_{j = 1}^n A_{i, j}\\cdot A_{j, i}\\right) \\bmod 2$. For example:\n\n$$\n\\begin{pmatrix}\n1 & 1 & 1\\\\\n0 & 1 & 1\\\\\n1 & 0 & 0\\\\\n\\end{pmatrix}\n$$\n\nFor the $3 \\times 3$ matrix $A$ above, $G(A)=(1\\times 1+1\\times 0+1\\times 1+0\\times 1+1\\times 1+1\\times 0+1\\times 1+ 0\\times 1+0\\times 0) \\bmod 2 = 0$.\n\nOf course, querying the $G$ value of a single matrix is too simple. Along with giving you an $N \\times N$ matrix, Xiao Z also gives you $Q$ operations, described as follows:\n\n- Operation 1: of the form `1 x`, which means “flip” all elements in row $x$.\n- Operation 2: of the form `2 x`, which means “flip” all elements in column $x$.\n- Operation 3: an integer `3`, which asks for the current value of the characteristic function $G$.\n\n“Flip” means changing $1$ to $0$ and $0$ to $1$.", "inputFormat": "The first line contains two positive integers $N, Q$. $N$ is the number of rows (and columns) of the matrix, and $Q$ is the number of operations.\n\nThe next $N$ lines describe an $N \\times N$ matrix $A$, with $0 \\le A_{i, j} \\le 1$.\n\nThe next $Q$ lines contain the $Q$ operations.", "outputFormat": "Output a single line consisting of several numbers with no spaces, representing the result of each operation (no output for operations 1 and 2).", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $N \\le 100$, $Q \\le 10^5$.\n- For $100\\%$ of the testdata, $N \\le 1{,}000$, $Q \\le 5 \\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的矩阵", "background": "", "description": "小 Z 最近迷上了矩阵，他定义了一个对于一种特殊矩阵的特征函数 $G$。对于 $N\\times N$ 的矩阵 $A$，$A$ 的所有元素均为 $0$ 或 $1$，则 $\\displaystyle G(A) = \\left(\\sum_{i = 1}^n\\sum_{j = 1}^n A_{i, j}\\cdot A_{j, i}\\right) \\bmod 2$。举一个例子：\n\n$$\n\\begin{pmatrix}\n1 & 1 & 1\\\\\n0 & 1 & 1\\\\\n1 & 0 & 0\\\\\n\\end{pmatrix}\n$$\n\n对于上面这个 $3\\times 3$ 矩阵 $A$，$G(A)=(1\\times 1+1\\times 0+1\\times 1+0\\times 1+1\\times 1+1\\times 0+1\\times 1+ 0\\times 1+0\\times 0) \\bmod 2 = 0$。\n\n当然询问一个矩阵的 $G$ 值实在是太简单了。小Z在给出一个 $N\\times N$ 矩阵的同时将给你 $Q$ 个操作，操作描述如下：\n\n- 操作 1：形如 `1 x`，表示将第 $x$ 行的元素全部“翻转”。\n- 操作 2：形如 `2 x`，表示将第 $x$ 列的元素全部“翻转”。\n- 操作 3：形如一个整数`3`，表示询问当前矩阵的特征值 $G$。\n\n“翻转”的定义为将 $1$ 变成 $0$，将 $0$ 变成 $1$。", "inputFormat": "第一行：两个正整数 $N,Q$。$N$ 表示矩阵的行数（列数），$Q$ 表示询问的次数。\n\n接下来 $N$ 行：一个 $N\\times N$ 的矩阵 $A$，$0\\le A_{i, j}\\le 1$。\n\n接下来 $Q$ 行：$Q$ 个操作。", "outputFormat": "一行若干个数，中间没有空格，分别表示每个操作的结果（操作 1 和操作 2 不需要输出）。", "hint": "【数据规模】\n\n- 对于 $30\\%$ 的数据，$N\\le 100$，$Q\\le 10^5$。\n\n- 对于 $100\\%$ 的数据，$N\\le 1,000$，$Q \\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2118", "type": "P", "difficulty": 2, "samples": [["1498 902 10", "5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2014", "NOIP 普及组", "最大公约数 gcd"], "title": "[NOIP 2014 普及组] 比例简化", "background": "NOIP2014 普及组 T2", "description": "在社交媒体上，经常会看到针对某一个观点同意与否的民意调查以及结果。例如，对某一观点表示支持的有 $1498$ 人，反对的有 $902$ 人，那么赞同与反对的比例可以简单的记为 $1498:902$。\n\n不过，如果把调查结果就以这种方式呈现出来，大多数人肯定不会满意。因为这个比例的数值太大，难以一眼看出它们的关系。对于上面这个例子，如果把比例记为 $5:3$，虽然与真实结果有一定的误差，但依然能够较为准确地反映调查结果，同时也显得比较直观。\n\n现给出支持人数 $A$，反对人数 $B$，以及一个上限 $L$，请你将 $A$ 比 $B$ 化简为 $A'$ 比 $B'$，要求在 $A'$ 和 $B'$ 均不大于 $L$ 且 $A'$ 和 $B'$ 互质（两个整数的最大公约数是 $1$）的前提下，$\\dfrac{A'}{B'} \\ge  \\dfrac{A}{B}$ 且 $\\dfrac{A'}{B'} - \\dfrac{A}{B}$ 的值尽可能小。", "inputFormat": "共一行，包含三个整数 $A,B,L$，每两个整数之间用一个空格隔开，分别表示支持人数、反对人数以及上限。\n", "outputFormat": "共一行，包含两个整数 $A',B'$，中间用一个空格隔开，表示化简后的比例。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le A \\le 10^6,1 \\le B \\le 10^6,1 \\le L \\le 100,\\dfrac{A}{B} \\le L$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Junior] Ratio Simplification", "background": "NOIP 2014 Junior T2.", "description": "On social media, it is common to see polls and their results about whether people agree with a certain viewpoint. For example, if $1498$ people support it and $902$ oppose it, then the ratio of support to opposition can be written simply as $1498:902$.\n\nHowever, most people would not be satisfied if the results were presented this way, because the numbers in the ratio are too large and it is hard to see the relationship at a glance. For the example above, if the ratio is written as $5:3$, although there is some error compared with the true result, it still reflects the poll result fairly accurately and is more intuitive.\n\nGiven the number of supporters $A$, the number of opponents $B$, and an upper bound $L$, please reduce $A$ to $B$ into $A'$ to $B'$ under the conditions that $A'$ and $B'$ are both no greater than $L$ and $A'$ and $B'$ are coprime (the greatest common divisor of the two integers is $1$), such that $\\dfrac{A'}{B'} \\ge \\dfrac{A}{B}$ and the value of $\\dfrac{A'}{B'} - \\dfrac{A}{B}$ is as small as possible.", "inputFormat": "One line containing three integers $A,B,L$, separated by a single space, representing the number of supporters, the number of opponents, and the upper bound.", "outputFormat": "One line containing two integers $A',B'$, separated by a single space, representing the simplified ratio.", "hint": "For $100\\%$ of the testdata, $1 \\le A \\le 10^6, 1 \\le B \\le 10^6, 1 \\le L \\le 100, \\dfrac{A}{B} \\le L$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 普及组] 比例简化", "background": "NOIP2014 普及组 T2", "description": "在社交媒体上，经常会看到针对某一个观点同意与否的民意调查以及结果。例如，对某一观点表示支持的有 $1498$ 人，反对的有 $902$ 人，那么赞同与反对的比例可以简单的记为 $1498:902$。\n\n不过，如果把调查结果就以这种方式呈现出来，大多数人肯定不会满意。因为这个比例的数值太大，难以一眼看出它们的关系。对于上面这个例子，如果把比例记为 $5:3$，虽然与真实结果有一定的误差，但依然能够较为准确地反映调查结果，同时也显得比较直观。\n\n现给出支持人数 $A$，反对人数 $B$，以及一个上限 $L$，请你将 $A$ 比 $B$ 化简为 $A'$ 比 $B'$，要求在 $A'$ 和 $B'$ 均不大于 $L$ 且 $A'$ 和 $B'$ 互质（两个整数的最大公约数是 $1$）的前提下，$\\dfrac{A'}{B'} \\ge  \\dfrac{A}{B}$ 且 $\\dfrac{A'}{B'} - \\dfrac{A}{B}$ 的值尽可能小。", "inputFormat": "共一行，包含三个整数 $A,B,L$，每两个整数之间用一个空格隔开，分别表示支持人数、反对人数以及上限。\n", "outputFormat": "共一行，包含两个整数 $A',B'$，中间用一个空格隔开，表示化简后的比例。\n", "hint": "对于 $100\\%$ 的数据，$1 \\le A \\le 10^6,1 \\le B \\le 10^6,1 \\le L \\le 100,\\dfrac{A}{B} \\le L$。\n", "locale": "zh-CN"}}}
{"pid": "P2119", "type": "P", "difficulty": 4, "samples": [["30 8\n1\n24\n7\n28\n5\n29\n26\n24", "4 0 0 0\n0 0 1 0\n0 2 0 0\n0 0 1 1\n1 3 0 0\n0 0 0 2\n0 0 2 2\n0 0 1 0"], ["15 15\n1 \n2 \n3 \n4 \n5\n6 \n7 \n8 \n9\n10\n11\n12\n13\n14\n15", "5 0 0 0\n4 0 0 0\n3 5 0 0\n2 4 0 0\n1 3 0 0\n0 2 0 0\n0 1 0 0\n0 0 0 0\n0 0 0 0\n0 0 1 0\n0 0 2 1\n0 0 3 2\n0 0 4 3\n0 0 5 4\n0 0 0 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2016", "NOIP 普及组", "枚举", "前缀和"], "title": "[NOIP 2016 普及组] 魔法阵", "background": "NOIP2016 普及组 T4", "description": "六十年一次的魔法战争就要开始了，大魔法师准备从附近的魔法场中汲取魔法能量。\n\n大魔法师有 $m$ 个魔法物品，编号分别为 $1,2,\\ldots,m$。每个物品具有一个魔法值，我们用 $X_i$ 表示编号为 $i$ 的物品的魔法值。每个魔法值 $X_i$ 是不超过 $n$ 的正整数，可能有多个物品的魔法值相同。\n\n大魔法师认为，当且仅当四个编号为 $a,b,c,d$ 的魔法物品满足 $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$，并且 $X_b-X_a<(X_c-X_b)/3$ 时，这四个魔法物品形成了一个魔法阵，他称这四个魔法物品分别为这个魔法阵的 $A$ 物品，$B$ 物品，$C$ 物品，$D$ 物品。\n\n现在，大魔法师想要知道，对于每个魔法物品，作为某个魔法阵的 $A$ 物品出现的次数，作为 $B$ 物品的次数，作为 $C$ 物品的次数，和作为 $D$ 物品的次数。", "inputFormat": "第一行包含两个空格隔开的正整数 $n,m$。\n\n接下来 $m$ 行，每行一个正整数，第 $i+1$ 行的正整数表示 $X_i$，即编号为 $i$ 的物品的魔法值。\n\n保证 $1 \\le n \\le 15000$，$1 \\le m \\le 40000$，$1 \\le X_i \\le n$。每个 $X_i$ 是分别在合法范围内等概率随机生成的。", "outputFormat": "共 $m$ 行，每行 $4$ 个整数。第 $i$ 行的 $4$ 个整数依次表示编号为 $i$ 的物品作 为 $A,B,C,D$ 物品分别出现的次数。\n\n保证标准输出中的每个数都不会超过 $10^9$。每行相邻的两个数之间用恰好一个空格隔开。\n", "hint": "【样例解释 $1$】\n\n共有 $5$ 个魔法阵，分别为：\n\n- 物品 $1,3,7,6$，其魔法值分别为 $1,7,26,29$；\n- 物品 $1,5,2,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $1,5,7,4$，其魔法值分别为 $1,5,26,28$；\n- 物品 $1,5,8,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $5,3,4,6$，其魔法值分别为 $5,7,28,29$。\n\n以物品 $5$ 为例，它作为 $A$ 物品出现了 $1$ 次，作为 $B$ 物品出现了 $3$ 次，没有作为 $C$ 物品或者 $D$ 物品出现，所以这一行输出的四个数依次为 $1,3,0,0$。\n\n此外，如果我们将输出看作一个 $m$ 行 $4$ 列的矩阵，那么每一列上的 $m$ 个数之和都应等于魔法阵的总数。所以，如果你的输出不满足这个性质，那么这个输出一定不正确。你可以通过这个性质在一定程度上检查你的输出的正确性。\n\n【数据规模】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Junior] Magic Formation", "background": "NOIP 2016 Junior T4.", "description": "The once-in-60-years magic war is about to begin, and the grand mage is preparing to draw magic energy from nearby magic fields.\n\nThe grand mage has $m$ magic items, numbered $1, 2, \\ldots, m$. Each item has a magic value, denoted $X_i$ for the item with index $i$. Each magic value $X_i$ is a positive integer not exceeding $n$, and multiple items may share the same magic value.\n\nThe grand mage believes that a set of four items with indices $a, b, c, d$ forms a magic formation if and only if they satisfy $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$, and $X_b-X_a<(X_c-X_b)/3$. He calls these four items the $A$ item, $B$ item, $C$ item, and $D$ item of that magic formation, respectively.\n\nNow, the grand mage wants to know, for each magic item, how many times it appears as the $A$ item in some magic formation, as the $B$ item, as the $C$ item, and as the $D$ item.", "inputFormat": "The first line contains two positive integers $n, m$ separated by a space.\n\nThen follow $m$ lines, each containing one positive integer. The integer on line $i+1$ is $X_i$, the magic value of the item with index $i$.\n\nIt is guaranteed that $1 \\le n \\le 15000$, $1 \\le m \\le 40000$, $1 \\le X_i \\le n$. Each $X_i$ is independently and uniformly generated within the valid range.", "outputFormat": "Output $m$ lines, each containing $4$ integers. The $i$-th line contains $4$ integers, which are the counts of item $i$ appearing as the $A$, $B$, $C$, and $D$ items, respectively.\n\nIt is guaranteed that every number in the standard output does not exceed $10^9$. There must be exactly one space between any two adjacent numbers on the same line.", "hint": "[Sample Explanation $1$]\n\nThere are $5$ magic formations in total, namely:\n\n- Items $1,3,7,6$, with magic values $1,7,26,29$;\n- Items $1,5,2,7$, with magic values $1,5,24,26$;\n- Items $1,5,7,4$, with magic values $1,5,26,28$;\n- Items $1,5,8,7$, with magic values $1,5,24,26$;\n- Items $5,3,4,6$, with magic values $5,7,28,29$.\n\nTake item $5$ as an example. It appears once as the $A$ item and $3$ times as the $B$ item. It does not appear as the $C$ or $D$ item. Therefore, the four numbers on that line are $1, 3, 0, 0$.\n\nIn addition, if we view the output as an $m$-by-$4$ matrix, then the sum of the $m$ numbers in each column should equal the total number of magic formations. Therefore, if your output does not satisfy this property, it must be incorrect. You can use this property to partially check the correctness of your output.\n\n[Constraints]\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 普及组] 魔法阵", "background": "NOIP2016 普及组 T4", "description": "六十年一次的魔法战争就要开始了，大魔法师准备从附近的魔法场中汲取魔法能量。\n\n大魔法师有 $m$ 个魔法物品，编号分别为 $1,2,\\ldots,m$。每个物品具有一个魔法值，我们用 $X_i$ 表示编号为 $i$ 的物品的魔法值。每个魔法值 $X_i$ 是不超过 $n$ 的正整数，可能有多个物品的魔法值相同。\n\n大魔法师认为，当且仅当四个编号为 $a,b,c,d$ 的魔法物品满足 $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$，并且 $X_b-X_a<(X_c-X_b)/3$ 时，这四个魔法物品形成了一个魔法阵，他称这四个魔法物品分别为这个魔法阵的 $A$ 物品，$B$ 物品，$C$ 物品，$D$ 物品。\n\n现在，大魔法师想要知道，对于每个魔法物品，作为某个魔法阵的 $A$ 物品出现的次数，作为 $B$ 物品的次数，作为 $C$ 物品的次数，和作为 $D$ 物品的次数。", "inputFormat": "第一行包含两个空格隔开的正整数 $n,m$。\n\n接下来 $m$ 行，每行一个正整数，第 $i+1$ 行的正整数表示 $X_i$，即编号为 $i$ 的物品的魔法值。\n\n保证 $1 \\le n \\le 15000$，$1 \\le m \\le 40000$，$1 \\le X_i \\le n$。每个 $X_i$ 是分别在合法范围内等概率随机生成的。", "outputFormat": "共 $m$ 行，每行 $4$ 个整数。第 $i$ 行的 $4$ 个整数依次表示编号为 $i$ 的物品作 为 $A,B,C,D$ 物品分别出现的次数。\n\n保证标准输出中的每个数都不会超过 $10^9$。每行相邻的两个数之间用恰好一个空格隔开。\n", "hint": "【样例解释 $1$】\n\n共有 $5$ 个魔法阵，分别为：\n\n- 物品 $1,3,7,6$，其魔法值分别为 $1,7,26,29$；\n- 物品 $1,5,2,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $1,5,7,4$，其魔法值分别为 $1,5,26,28$；\n- 物品 $1,5,8,7$，其魔法值分别为 $1,5,24,26$；\n- 物品 $5,3,4,6$，其魔法值分别为 $5,7,28,29$。\n\n以物品 $5$ 为例，它作为 $A$ 物品出现了 $1$ 次，作为 $B$ 物品出现了 $3$ 次，没有作为 $C$ 物品或者 $D$ 物品出现，所以这一行输出的四个数依次为 $1,3,0,0$。\n\n此外，如果我们将输出看作一个 $m$ 行 $4$ 列的矩阵，那么每一列上的 $m$ 个数之和都应等于魔法阵的总数。所以，如果你的输出不满足这个性质，那么这个输出一定不正确。你可以通过这个性质在一定程度上检查你的输出的正确性。\n\n【数据规模】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)", "locale": "zh-CN"}}}
{"pid": "P2120", "type": "P", "difficulty": 6, "samples": [["3\n0 5 10\n5 3 100\n9 6 10", "32\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2007", "各省省选", "浙江", "动态规划优化", "斜率优化"], "title": "[ZJOI2007] 仓库建设", "background": null, "description": "L 公司有 $n$ 个工厂，由高到低分布在一座山上，工厂 $1$ 在山顶，工厂 $n$ 在山脚。\n\n由于这座山处于高原内陆地区（干燥少雨），L 公司一般把产品直接堆放在露天，以节省费用。突然有一天，L 公司的总裁 L 先生接到气象部门的电话，被告知三天之后将有一场暴雨，于是 L 先生决定紧急在某些工厂建立一些仓库以免产品被淋坏。\n\n由于地形的不同，在不同工厂建立仓库的费用可能是不同的。第 $i$ 个工厂目前已有成品 $p_i$ 件，在第 $i$ 个工厂位置建立仓库的费用是 $c_i$。\n\n对于没有建立仓库的工厂，其产品应被运往其他的仓库进行储藏，而由于 L 公司产品的对外销售处设置在山脚的工厂 $n$，故产品只能往山下运（即**只能运往编号更大的工厂的仓库**），当然运送产品也是需要费用的，一件产品运送一个单位距离的费用是 $1$。\n\n假设建立的仓库容量都都是足够大的，可以容下所有的产品。你将得到以下数据：\n\n- 工厂 $i$ 距离工厂 $1$ 的距离 $x_i$（其中 $x_1=0$）。\n- 工厂 $i$ 目前已有成品数量 $p_i$。\n- 在工厂 $i$ 建立仓库的费用 $c_i$。\n\n请你帮助 L 公司寻找一个仓库建设的方案，使得总的费用（建造费用 + 运输费用）最小。", "inputFormat": "输入的第一行是一个整数 $n$，代表工厂的个数。\n\n第 $2$ 到 $(n + 1)$ 行，每行有三个用空格隔开的整数，第 $(i + 1)$ 行的整数依次代表 $x_i,~p_i,~c_i$。", "outputFormat": "仅输出一行一个整数，代表最优方案的费用。", "hint": "#### 样例输入输出 $1$ 解释\n\n在工厂 $1$ 和工厂 $3$ 建立仓库，建立费用为 $10+10=20$ ，运输费用为 $(9-5) \\times 3 = 12$，总费用 $32$。\n\n#### 数据范围与约定\n\n对于 $20\\%$ 的数据，保证 $n \\leq 500$。\n\n对于 $40\\%$ 的数据，保证 $n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^6$，$0 \\leq x_i,p_i,c_i < 2^{31}$。\n\n对于任意的 $1 \\leq i < n$，保证 $x_i < x_{i + 1}$。\n\n设答案为 $ans$，保证 $ans + \\sum\\limits_{i = 1}^{n} p_ix_i < 2^{63}$。", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2007] Warehouse Construction", "background": "", "description": "Company L has $n$ factories distributed from high to low along a mountain; factory $1$ is at the summit, and factory $n$ is at the foot.\n\nBecause the mountain is in an inland plateau region (dry with little rain), Company L usually stacks products directly in the open air to save costs. One day, Mr. L, the president of Company L, received a call from the meteorological department and was informed that there would be a heavy rain in three days. Therefore, Mr. L decided to urgently build some warehouses at certain factories to prevent the products from getting wet.\n\nDue to differences in terrain, the cost of building a warehouse may vary from one factory to another. Factory $i$ currently has $p_i$ finished items, and the cost of building a warehouse at factory $i$ is $c_i$.\n\nFor factories where no warehouse is built, their products should be transported to other warehouses for storage. Since Company L’s external sales outlet is located at factory $n$ at the foot of the mountain, products can only be transported downhill (that is, **only to the warehouse of a factory with a larger index**). Of course, transportation also costs money: transporting one item over one unit of distance costs $1$.\n\nAssume that any warehouse built is large enough to hold all products. You will be given the following data:\n- The distance from factory $i$ to factory $1$, $x_i$ (where $x_1 = 0$).\n- The current number of finished items at factory $i$, $p_i$.\n- The cost of building a warehouse at factory $i$, $c_i$.\n\nPlease help Company L find a warehouse construction plan that minimizes the total cost (construction cost + transportation cost).", "inputFormat": "The first line contains an integer $n$, the number of factories.\n\nLines $2$ through $(n + 1)$ each contain three space-separated integers. On line $(i + 1)$, the integers are $x_i,~p_i,~c_i$ in order.", "outputFormat": "Output a single line with one integer, the cost of the optimal plan.", "hint": "#### Explanation for Sample Input/Output $1$\n\nBuild warehouses at factory $1$ and factory $3$. The construction cost is $10 + 10 = 20$, the transportation cost is $(9 - 5) \\times 3 = 12$, and the total cost is $32$.\n\n#### Constraints and Agreements\n\n- For $20\\%$ of the testdata, it is guaranteed that $n \\leq 500$.\n- For $40\\%$ of the testdata, it is guaranteed that $n \\leq 10^4$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 10^6$, $0 \\leq x_i,p_i,c_i < 2^{31}$.\n- For any $1 \\leq i < n$, it is guaranteed that $x_i < x_{i + 1}$.\n- Let the answer be $ans$, and it is guaranteed that $ans + \\sum\\limits_{i = 1}^{n} p_ix_i < 2^{63}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2007] 仓库建设", "background": null, "description": "L 公司有 $n$ 个工厂，由高到低分布在一座山上，工厂 $1$ 在山顶，工厂 $n$ 在山脚。\n\n由于这座山处于高原内陆地区（干燥少雨），L 公司一般把产品直接堆放在露天，以节省费用。突然有一天，L 公司的总裁 L 先生接到气象部门的电话，被告知三天之后将有一场暴雨，于是 L 先生决定紧急在某些工厂建立一些仓库以免产品被淋坏。\n\n由于地形的不同，在不同工厂建立仓库的费用可能是不同的。第 $i$ 个工厂目前已有成品 $p_i$ 件，在第 $i$ 个工厂位置建立仓库的费用是 $c_i$。\n\n对于没有建立仓库的工厂，其产品应被运往其他的仓库进行储藏，而由于 L 公司产品的对外销售处设置在山脚的工厂 $n$，故产品只能往山下运（即**只能运往编号更大的工厂的仓库**），当然运送产品也是需要费用的，一件产品运送一个单位距离的费用是 $1$。\n\n假设建立的仓库容量都都是足够大的，可以容下所有的产品。你将得到以下数据：\n\n- 工厂 $i$ 距离工厂 $1$ 的距离 $x_i$（其中 $x_1=0$）。\n- 工厂 $i$ 目前已有成品数量 $p_i$。\n- 在工厂 $i$ 建立仓库的费用 $c_i$。\n\n请你帮助 L 公司寻找一个仓库建设的方案，使得总的费用（建造费用 + 运输费用）最小。", "inputFormat": "输入的第一行是一个整数 $n$，代表工厂的个数。\n\n第 $2$ 到 $(n + 1)$ 行，每行有三个用空格隔开的整数，第 $(i + 1)$ 行的整数依次代表 $x_i,~p_i,~c_i$。", "outputFormat": "仅输出一行一个整数，代表最优方案的费用。", "hint": "#### 样例输入输出 $1$ 解释\n\n在工厂 $1$ 和工厂 $3$ 建立仓库，建立费用为 $10+10=20$ ，运输费用为 $(9-5) \\times 3 = 12$，总费用 $32$。\n\n#### 数据范围与约定\n\n对于 $20\\%$ 的数据，保证 $n \\leq 500$。\n\n对于 $40\\%$ 的数据，保证 $n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^6$，$0 \\leq x_i,p_i,c_i < 2^{31}$。\n\n对于任意的 $1 \\leq i < n$，保证 $x_i < x_{i + 1}$。\n\n设答案为 $ans$，保证 $ans + \\sum\\limits_{i = 1}^{n} p_ix_i < 2^{63}$。", "locale": "zh-CN"}}}
{"pid": "P2121", "type": "P", "difficulty": 3, "samples": [["5 4 3\n1 2 10\n1 3 9\n2 3 7\n4 5 3", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "生成树"], "title": "拆地毯", "background": "还记得 NOIP 2011 提高组 Day1 中的铺地毯吗？时光飞逝，光阴荏苒，三年过去了。组织者精心准备的颁奖典礼早已结束，留下的则是被人们踩过的地毯。请你来解决类似于铺地毯的另一个问题。", "description": "会场上有 $n$ 个关键区域，不同的关键区域由 $m$ 条无向地毯彼此连接。每条地毯可由三个整数 $u$、$v$、$w$ 表示，其中 $u$ 和 $v$ 为地毯连接的两个关键区域编号，$w$ 为这条地毯的美丽度。\n\n由于颁奖典礼已经结束，铺过的地毯不得不拆除。为了贯彻勤俭节约的原则，组织者被要求只能保留至多 $K$ 条地毯，且保留的地毯构成的图中，任意可互相到达的两点间只能有一种方式互相到达。换言之，组织者要求新图中不能有环。现在组织者求助你，想请你帮忙算出这至多 $K$ 条地毯的美丽度之和最大为多少。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$K$。\n\n接下来 $m$ 行中每行包含三个正整数 $u$、$v$、$w$。", "outputFormat": "只包含一个正整数，表示这 $K$ 条地毯的美丽度之和的最大值。", "hint": "选择第 $1$、$2$、$4$ 条地毯，美丽度之和为 $10 + 9 + 3 = 22$。\n\n若选择第 $1$、$2$、$3$ 条地毯，虽然美丽度之和可以达到 $10 + 9 + 7 = 26$，但这将导致关键区域 $1$、$2$、$3$ 构成一个环，这是题目中不允许的。\n\n\n$1\\le n,m,K \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Removing Carpets", "background": "Do you remember \"Paving Carpets\" from NOIP 2011 Senior Day 1? Time flies; three years have passed. The carefully prepared award ceremony is long over, leaving behind the carpets people walked on. Please solve another problem similar to \"Paving Carpets.\"", "description": "There are $n$ key areas in the venue, and different key areas are connected by $m$ undirected \"carpets.\" Each carpet is represented by three integers $u$, $v$, and $w$, where $u$ and $v$ are the indices of the two key areas connected by this carpet, and $w$ is its beauty value.\n\nSince the ceremony has ended, the laid carpets must be removed. To follow the principle of thrift, the organizers are allowed to keep at most $K$ carpets, and in the graph formed by the kept carpets, there must be only one way to travel between any two mutually reachable points. In other words, the new graph must have no cycles. Now the organizers ask you to compute the maximum possible sum of beauty values of at most $K$ carpets.", "inputFormat": "The first line contains three positive integers $n$, $m$, and $K$.\n\nEach of the next $m$ lines contains three positive integers $u$, $v$, and $w$.", "outputFormat": "Output a single positive integer, the maximum possible sum of beauty values of these $K$ carpets.", "hint": "Choosing carpets $1$, $2$, and $4$ gives a beauty sum of $10 + 9 + 3 = 22$.\n\nIf you choose carpets $1$, $2$, and $3$, although the sum can reach $10 + 9 + 7 = 26$, key areas $1$, $2$, and $3$ would form a cycle, which is not allowed.\n\nConstraints: $1 \\le n, m, K \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拆地毯", "background": "还记得 NOIP 2011 提高组 Day1 中的铺地毯吗？时光飞逝，光阴荏苒，三年过去了。组织者精心准备的颁奖典礼早已结束，留下的则是被人们踩过的地毯。请你来解决类似于铺地毯的另一个问题。", "description": "会场上有 $n$ 个关键区域，不同的关键区域由 $m$ 条无向地毯彼此连接。每条地毯可由三个整数 $u$、$v$、$w$ 表示，其中 $u$ 和 $v$ 为地毯连接的两个关键区域编号，$w$ 为这条地毯的美丽度。\n\n由于颁奖典礼已经结束，铺过的地毯不得不拆除。为了贯彻勤俭节约的原则，组织者被要求只能保留至多 $K$ 条地毯，且保留的地毯构成的图中，任意可互相到达的两点间只能有一种方式互相到达。换言之，组织者要求新图中不能有环。现在组织者求助你，想请你帮忙算出这至多 $K$ 条地毯的美丽度之和最大为多少。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$K$。\n\n接下来 $m$ 行中每行包含三个正整数 $u$、$v$、$w$。", "outputFormat": "只包含一个正整数，表示这 $K$ 条地毯的美丽度之和的最大值。", "hint": "选择第 $1$、$2$、$4$ 条地毯，美丽度之和为 $10 + 9 + 3 = 22$。\n\n若选择第 $1$、$2$、$3$ 条地毯，虽然美丽度之和可以达到 $10 + 9 + 7 = 26$，但这将导致关键区域 $1$、$2$、$3$ 构成一个环，这是题目中不允许的。\n\n\n$1\\le n,m,K \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2122", "type": "P", "difficulty": 5, "samples": [["5 4\n1 2 3 4 5\n1 1 2 3\n2 2 4\n3 2 4\n3 1 5", "4/1\n2/3\n14/25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "线段树", "树状数组", "分块"], "title": "还教室", "background": "还记得 NOIP 2012 提高组 Day2 中的借教室吗？时光飞逝，光阴荏苒，两年过去了，曾经借教室的同学们纷纷归还自己当初租借的教室。请你来解决类似于借教室的另一个问题。", "description": "在接受借教室请求的 $n$ 天中，第 $i$ 天剩余的教室为 $a_i$ 个。作为大学借教室服务的负责人，你需要完成如下三种操作共 $m$ 次：\n\n1. 第 $l$ 天到第 $r$ 天，每天被归还 $d$ 个教室；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的平均数；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的方差。", "inputFormat": "第一行包括两个正整数 $n$ 和 $m$，其中 $n$ 为借教室的天数，$m$ 为操作次数。\n\n接下来一行，共包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天剩余教室数目为 $a_i$ 个。\n\n接下来 $m$ 行，每行的第一个整数为操作编号（只能为 $1$ 或 $2$ 或 $3$），接下来：\n\n包含两个正整数 $l$ 和 $r$，若操作编号为 $1$，则接下来再包含一个正整数 $d$。", "outputFormat": "对于每个操作 2 和操作 3，输出一个既约分数（分子与分母互质）表示询问的答案（详见样例）。特别地，若答案为 $0$，请输出 $\\verb!0/1!$。", "hint": "对于全部测试数据满足：$1 \\leq l \\leq r \\leq n \\leq 10^5, m\\leq 10^5$，$0 \\leq a_i \\leq 10$，$1 \\leq d \\leq 3$，操作 $1$ 的数量不超过 $10\\%$。\n\n注意：$a_i$ 和 $d$ 的范围很小及操作 $1$ 数量很少的原因是为了保证答案的分子不会很大，以防止答案的分子溢出 $64$ 位整数的范围，这与题目做法无关。", "locale": "zh-CN", "translations": {"en": {"title": "Returning Classrooms", "background": "Do you remember \"Renting Classrooms\" from NOIP 2012 Senior Day 2? Time flies; two years have passed, and the students who once rented classrooms are now returning them. Please solve another problem similar to \"Renting Classrooms.\"", "description": "During the $n$ days when rental requests were accepted, on day $i$ there are $a_i$ classrooms remaining. As the person in charge of the university classroom rental service, you need to perform $m$ operations of the following three types:\n1. From day $l$ to day $r$, $d$ classrooms are returned each day.\n2. Query the average number of classrooms from day $l$ to day $r$.\n3. Query the variance of the number of classrooms from day $l$ to day $r$.", "inputFormat": "The first line contains two positive integers $n$ and $m$, where $n$ is the number of days and $m$ is the number of operations.\n\nThe next line contains $n$ integers; the $i$-th integer indicates that on day $i$ the number of remaining classrooms is $a_i$.\n\nThe next $m$ lines: each line starts with the operation code (only $1$, $2$, or $3$), followed by two positive integers $l$ and $r$. If the operation code is $1$, then an additional positive integer $d$ follows.", "outputFormat": "For each operation of type $2$ and type $3$, output the answer as a reduced fraction (the numerator and denominator are coprime). In particular, if the answer is $0$, output $\\verb!0/1!$.", "hint": "For all testdata, $1 \\leq l \\leq r \\leq n \\leq 10^5$, $m \\leq 10^5$, $0 \\leq a_i \\leq 10$, $1 \\leq d \\leq 3$, and the number of type $1$ operations does not exceed $10\\%$.\n\nNote: The small ranges of $a_i$ and $d$, and the small number of type $1$ operations, are intended to ensure that the numerator of the answer will not be large, preventing overflow beyond the $64$-bit integer range; this is unrelated to the intended solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "还教室", "background": "还记得 NOIP 2012 提高组 Day2 中的借教室吗？时光飞逝，光阴荏苒，两年过去了，曾经借教室的同学们纷纷归还自己当初租借的教室。请你来解决类似于借教室的另一个问题。", "description": "在接受借教室请求的 $n$ 天中，第 $i$ 天剩余的教室为 $a_i$ 个。作为大学借教室服务的负责人，你需要完成如下三种操作共 $m$ 次：\n\n1. 第 $l$ 天到第 $r$ 天，每天被归还 $d$ 个教室；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的平均数；\n1. 询问第 $l$ 天到第 $r$ 天教室个数的方差。", "inputFormat": "第一行包括两个正整数 $n$ 和 $m$，其中 $n$ 为借教室的天数，$m$ 为操作次数。\n\n接下来一行，共包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 天剩余教室数目为 $a_i$ 个。\n\n接下来 $m$ 行，每行的第一个整数为操作编号（只能为 $1$ 或 $2$ 或 $3$），接下来：\n\n包含两个正整数 $l$ 和 $r$，若操作编号为 $1$，则接下来再包含一个正整数 $d$。", "outputFormat": "对于每个操作 2 和操作 3，输出一个既约分数（分子与分母互质）表示询问的答案（详见样例）。特别地，若答案为 $0$，请输出 $\\verb!0/1!$。", "hint": "对于全部测试数据满足：$1 \\leq l \\leq r \\leq n \\leq 10^5, m\\leq 10^5$，$0 \\leq a_i \\leq 10$，$1 \\leq d \\leq 3$，操作 $1$ 的数量不超过 $10\\%$。\n\n注意：$a_i$ 和 $d$ 的范围很小及操作 $1$ 数量很少的原因是为了保证答案的分子不会很大，以防止答案的分子溢出 $64$ 位整数的范围，这与题目做法无关。", "locale": "zh-CN"}}}
{"pid": "P2123", "type": "P", "difficulty": 6, "samples": [["1\n3\n4 1\n2 2\n1 2", "8"], ["2\n5\n85 100\n95 99\n76 87\n60 97\n79 85\n12\n9 68\n18 45\n52 61\n39 83\n63 67\n45 99\n52 54\n82 100\n23 54\n99 94\n63 100\n52 68", "528\n902"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "排序"], "title": "皇后游戏", "background": "还记得 NOIP 2012 提高组 Day1 的国王游戏吗？时光飞逝，光阴荏苒，两年过去了。国王游戏早已过时，如今已被皇后游戏取代，请你来解决类似于国王游戏的另一个问题。", "description": "皇后有 $n$ 位大臣，每位大臣的左右手上面分别写上了一个正整数。恰逢国庆节来临，皇后决定为 $n$ 位大臣颁发奖金，其中第 $i$ 位大臣所获得的奖金数目为第 $i - 1$ 位大臣所获得奖金数目与前 $i$ 位大臣左手上的数的和的较大值再加上第 $i$ 位大臣右手上的数。\n\n形式化地讲：我们设第 $i$ 位大臣左手上的正整数为 $a_i$，右手上的正整数为 $b_i$，则第 $i$ 位大臣获得的奖金数目为 $c_i$ 可以表达为：\n\n$$ c_{i} = \\begin{cases} a_{1}+b_{1}  & ,i=1 \\\\ \\displaystyle \\max \\left \\{ c_{i-1},\\sum_{j=1}^{i}a_{j} \\right \\} +b_{i} & ,2\\leq i \\leq n \\end{cases} % ![](https://cdn.luogu.com.cn/upload/pic/1257.png) $$\n\n当然，吝啬的皇后并不希望太多的奖金被发给大臣，所以她想请你来重新安排一下队伍的顺序，使得获得奖金最多的大臣，所获奖金数目尽可能的少。\n\n注意：重新安排队伍并不意味着一定要打乱顺序，我们允许不改变任何一位大臣的位置。", "inputFormat": "第一行包含一个正整数 $T$，表示测试数据的组数。\n\n接下来 $T$ 个部分，每个部分的第一行包含一个正整数 $n$，表示大臣的数目。\n\n每个部分接下来 $n$ 行中，每行两个正整数，分别为 $a_i$ 和 $b_i$，含义如上文所述。", "outputFormat": "共 $T$ 行，每行包含一个整数，表示获得奖金最多的大臣所获得的奖金数目。", "hint": "按照 $1,2,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $10$；\n\n按照 $1,3,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,1,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,3,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$；\n\n按照 $3,1,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $3,2,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$。\n\n当按照 $3,2,1$ 这样排列队伍时，三位大臣左右手的数分别为：\n\n$(1,2),(2,2),(4,1)$。\n\n- 第 $1$ 位大臣获得的奖金为 $1+2=3$；\n- 第 $2$ 位大臣获得的奖金为 $\\max{3,3}+2=5$；\n- 第 $3$ 位大臣获得的奖金为 $\\max{5,7}+1=8$。\n\n对于全部测试数据满足：$T\\le10$，$1\\le n\\le 2\\times 10^4$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Queen's Game", "background": "Do you still remember the NOIP 2012 Senior Day 1 \"King's Game\"? Time flies — two years have passed. The King's Game is now outdated and has been replaced by the Queen's Game. Please solve another problem similar to the King's Game.", "description": "The queen has $n$ ministers. On each minister’s left and right hands, a positive integer is written. As the National Day approaches, the queen decides to award bonuses to the $n$ ministers. For the $i$-th minister, the bonus amount equals the larger of the previous minister’s bonus and the sum of the numbers on the left hands of the first $i$ ministers, then plus the number on the right hand of the $i$-th minister.\n\nFormally, let the positive integer on the left hand of the $i$-th minister be $a_i$, and the one on the right hand be $b_i$. The bonus received by the $i$-th minister is $c_i$, defined as:\n$$ c_{i} = \\begin{cases} a_{1}+b_{1}  & ,i=1 \\\\ \\displaystyle \\max \\left \\{ c_{i-1},\\sum_{j=1}^{i}a_{j} \\right \\} +b_{i} & ,2\\leq i \\leq n \\end{cases} % ![](https://cdn.luogu.com.cn/upload/pic/1257.png) $$\n\nOf course, the frugal queen does not want too much bonus to be given. She asks you to reorder the queue so that the maximum bonus obtained by any minister is as small as possible.\n\nNote: Reordering the queue does not mean you must change the order. Keeping every minister in their original position is allowed.\n\nConstraints: For all testdata, $T \\le 10$, $1 \\le n \\le 2 \\times 10^{4}$, $1 \\le a_i, b_i \\le 10^{9}$.", "inputFormat": "The first line contains a positive integer $T$, the number of testdata groups.\n\nThen for each of the $T$ parts, the first line contains a positive integer $n$, the number of ministers.\n\nIn each of the next $n$ lines, there are two positive integers $a_i$ and $b_i$, as defined above.", "outputFormat": "Output $T$ lines. Each line contains one integer: the maximum bonus obtained by any minister.", "hint": "- If the queue is ordered as 1, 2, 3, the maximum bonus obtained by any minister is 10.\n- If the queue is ordered as 1, 3, 2, the maximum bonus obtained by any minister is 9.\n- If the queue is ordered as 2, 1, 3, the maximum bonus obtained by any minister is 9.\n- If the queue is ordered as 2, 3, 1, the maximum bonus obtained by any minister is 8.\n- If the queue is ordered as 3, 1, 2, the maximum bonus obtained by any minister is 9.\n- If the queue is ordered as 3, 2, 1, the maximum bonus obtained by any minister is 8.\n\nWhen the queue is ordered as 3, 2, 1, the numbers on the three ministers’ left and right hands are:\n(1, 2), (2, 2), (4, 1).\n\n- The 1st minister’s bonus is $1 + 2 = 3$.\n- The 2nd minister’s bonus is $\\max{3, 3} + 2 = 5$.\n- The 3rd minister’s bonus is $\\max{5, 7} + 1 = 8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "皇后游戏", "background": "还记得 NOIP 2012 提高组 Day1 的国王游戏吗？时光飞逝，光阴荏苒，两年过去了。国王游戏早已过时，如今已被皇后游戏取代，请你来解决类似于国王游戏的另一个问题。", "description": "皇后有 $n$ 位大臣，每位大臣的左右手上面分别写上了一个正整数。恰逢国庆节来临，皇后决定为 $n$ 位大臣颁发奖金，其中第 $i$ 位大臣所获得的奖金数目为第 $i - 1$ 位大臣所获得奖金数目与前 $i$ 位大臣左手上的数的和的较大值再加上第 $i$ 位大臣右手上的数。\n\n形式化地讲：我们设第 $i$ 位大臣左手上的正整数为 $a_i$，右手上的正整数为 $b_i$，则第 $i$ 位大臣获得的奖金数目为 $c_i$ 可以表达为：\n\n$$ c_{i} = \\begin{cases} a_{1}+b_{1}  & ,i=1 \\\\ \\displaystyle \\max \\left \\{ c_{i-1},\\sum_{j=1}^{i}a_{j} \\right \\} +b_{i} & ,2\\leq i \\leq n \\end{cases} % ![](https://cdn.luogu.com.cn/upload/pic/1257.png) $$\n\n当然，吝啬的皇后并不希望太多的奖金被发给大臣，所以她想请你来重新安排一下队伍的顺序，使得获得奖金最多的大臣，所获奖金数目尽可能的少。\n\n注意：重新安排队伍并不意味着一定要打乱顺序，我们允许不改变任何一位大臣的位置。", "inputFormat": "第一行包含一个正整数 $T$，表示测试数据的组数。\n\n接下来 $T$ 个部分，每个部分的第一行包含一个正整数 $n$，表示大臣的数目。\n\n每个部分接下来 $n$ 行中，每行两个正整数，分别为 $a_i$ 和 $b_i$，含义如上文所述。", "outputFormat": "共 $T$ 行，每行包含一个整数，表示获得奖金最多的大臣所获得的奖金数目。", "hint": "按照 $1,2,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $10$；\n\n按照 $1,3,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,1,3$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $2,3,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$；\n\n按照 $3,1,2$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $9$；\n\n按照 $3,2,1$ 这样排列队伍，获得最多奖金的大臣获得奖金的数目为 $8$。\n\n当按照 $3,2,1$ 这样排列队伍时，三位大臣左右手的数分别为：\n\n$(1,2),(2,2),(4,1)$。\n\n- 第 $1$ 位大臣获得的奖金为 $1+2=3$；\n- 第 $2$ 位大臣获得的奖金为 $\\max{3,3}+2=5$；\n- 第 $3$ 位大臣获得的奖金为 $\\max{5,7}+1=8$。\n\n对于全部测试数据满足：$T\\le10$，$1\\le n\\le 2\\times 10^4$，$1\\le a_i,b_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2125", "type": "P", "difficulty": 5, "samples": [["5\n15 7 11 3 14\n", "12\n2 3\n-3 0\n0 1\n-1 -6\n6 -2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学"], "title": "图书馆书架上的书", "background": "NOIP2014 即将来临，JC 书院信息学兴趣小组也在积极准备着，于是乎 usqwedf 、梁大大、畜牧办专场、YH 大神和 LHT 大神也要推出“蓝翔杯”。\n\n在图书馆、 MC 等大神们相继举办了 JC 书院联合竞赛“弃疗杯”“UID#3”，据说 YH 大神还要苦苦钻研网络流的 JC 书院 $13$ 届 $13$ 班的 WZF 神牛和 MZC 神牛听到这个消息后决定联袂打造“十三点杯”。但是出一套题目是一项繁重的工作，于是他们决定再拉上和他们同届并且同班还同为 JC 书院信息学兴趣小组成员同时也在图书馆正在找“Hello World”标程的蒟蒻 SY。\n\n可怜的蒟蒻 SY 因为还要写一大堆的作业，怎么也不肯答应，终于 WZF 神牛妥协说：“我来出一道题，你要是做出来了我们就不让你出题，否则……你懂的。”蒟蒻 SY 才刚看完 WZF 神牛即兴出的题目，便带着哭腔对 WZF 神牛说：“你们赢了。”。\n\n可是蒟蒻 SY 实在是太弱了，根本不会出题，他绞尽脑汁，终于想到了一个办法——将 WZF 神牛出的题目 copy 一下。", "description": "图书馆有 $n$ 个书架，第 $1$ 个书架后面是第 $2$ 个书架，第 $2$ 个书架后面是第 $3$ 个书架……第 $n-1$ 个书架后面是第 $n$ 个书架，第 $n$ 个书架后面是第 $1$ 个书架，第 $i$ 个书架上有 $b_i$ 本书。现在，为了让图书馆更美观，WZF 神牛让蒟蒻 SY 搬动书架上的书，使每个书架上的书一样多。由于搬动的书可能会很多，所以蒟蒻 SY 只能将一个书架上的书搬到与其相邻的两个书架上。那么蒟蒻 SY 最少搬动几本书呢？", "inputFormat": "共 $2$ 行，第 $1$ 行 $1$ 个正整数 $n$，第 $2$ 行 $n$ 个非负整数，第 $i$ 个为 $b_i$。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行 $1$ 个正整数 $m$，表示蒟蒻 SY 最少搬动 $m$ 本书；\n\n之后 $n$ 行，每行 $2$ 个整数，第 $i$ 行有两个整数 $af_i$ 和 $ab_i$，分别表示蒟蒻 SY 要将第 $i$ 个书架上的 $af_i$ 本书和 $ab_i$ 本书分别搬到它前面的一个书架上和它后面的一个书架上。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5+1$，且 $n$ 必为奇数；$b_i\\le 10^7$。\n\n若 $af_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架前面的那个书架上的 $-af_i$ 本书搬到第 $i$ 个书架上。\n\n同理，若 $ab_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架后面的那个书架上的 $-ab_i$ 本书搬到第 $i$ 个书架上。\n", "locale": "zh-CN", "translations": {"en": {"title": "Books on the Library Shelves", "background": "With NOIP 2014 approaching, the JC Academy Informatics Club is actively preparing. So usqwedf, Liang Dada, Xumuban Zhuanchang, YH dashen, and LHT dashen also plan to launch the “Lanxiang Cup.”\n\nIn the library, MC and others successively hosted the JC Academy joint contests “Qiliaobei” and “UID#3.” It is said that YH dashen is also painstakingly studying network flow. Hearing this, WZF shenniu and MZC shenniu from JC Academy Grade 13 Class 13 decided to co-create the “Shisandian Cup.” But making a full problem set is hard work, so they decided to rope in SY, a fellow classmate and club member who was in the library searching for the “Hello World” standard solution.\n\nPoor juruo SY had tons of homework and refused to agree. Finally, WZF shenniu compromised: “I’ll give you one problem. If you solve it, we won’t make you write problems; otherwise… you know.” SY had barely finished reading the problem WZF improvised when he said, almost in tears, “You win.”\n\nBut juruo SY was really too weak to write problems, so he racked his brains and came up with an idea—just copy the problem WZF gave.", "description": "There are $n$ bookshelves in a circle. The shelf behind shelf $1$ is shelf $2$, the shelf behind shelf $2$ is shelf $3$, …, the shelf behind shelf $n-1$ is shelf $n$, and the shelf behind shelf $n$ is shelf $1$. Shelf $i$ has $b_i$ books. To make the library look nicer, WZF shenniu asks SY to move books so that every shelf ends up with the same number of books. Because the total number of moved books might be large, SY is only allowed to move books from a shelf to its two adjacent shelves. What is the minimum number of books SY needs to move?", "inputFormat": "There are $2$ lines. The first line contains a positive integer $n$. The second line contains $n$ non-negative integers, where the $i$-th is $b_i$.", "outputFormat": "Output $n+1$ lines.\n\nThe first line contains a positive integer $m$, the minimum total number of books SY needs to move.\n\nThen output $n$ lines. In the $i$-th line, output two integers $af_i$ and $ab_i$, meaning SY moves $af_i$ books and $ab_i$ books from shelf $i$ to the shelf in front of it and the shelf behind it, respectively.", "hint": "### Constraints and Notes\n\nFor all testdata, $1 \\le n \\le 10^5 + 1$, and $n$ is odd; $b_i \\le 10^7$.\n\nIf $af_i$ is negative, it means SY moves $-af_i$ books from the shelf in front of shelf $i$ onto shelf $i$.\n\nSimilarly, if $ab_i$ is negative, it means SY moves $-ab_i$ books from the shelf behind shelf $i$ onto shelf $i$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "图书馆书架上的书", "background": "NOIP2014 即将来临，JC 书院信息学兴趣小组也在积极准备着，于是乎 usqwedf 、梁大大、畜牧办专场、YH 大神和 LHT 大神也要推出“蓝翔杯”。\n\n在图书馆、 MC 等大神们相继举办了 JC 书院联合竞赛“弃疗杯”“UID#3”，据说 YH 大神还要苦苦钻研网络流的 JC 书院 $13$ 届 $13$ 班的 WZF 神牛和 MZC 神牛听到这个消息后决定联袂打造“十三点杯”。但是出一套题目是一项繁重的工作，于是他们决定再拉上和他们同届并且同班还同为 JC 书院信息学兴趣小组成员同时也在图书馆正在找“Hello World”标程的蒟蒻 SY。\n\n可怜的蒟蒻 SY 因为还要写一大堆的作业，怎么也不肯答应，终于 WZF 神牛妥协说：“我来出一道题，你要是做出来了我们就不让你出题，否则……你懂的。”蒟蒻 SY 才刚看完 WZF 神牛即兴出的题目，便带着哭腔对 WZF 神牛说：“你们赢了。”。\n\n可是蒟蒻 SY 实在是太弱了，根本不会出题，他绞尽脑汁，终于想到了一个办法——将 WZF 神牛出的题目 copy 一下。", "description": "图书馆有 $n$ 个书架，第 $1$ 个书架后面是第 $2$ 个书架，第 $2$ 个书架后面是第 $3$ 个书架……第 $n-1$ 个书架后面是第 $n$ 个书架，第 $n$ 个书架后面是第 $1$ 个书架，第 $i$ 个书架上有 $b_i$ 本书。现在，为了让图书馆更美观，WZF 神牛让蒟蒻 SY 搬动书架上的书，使每个书架上的书一样多。由于搬动的书可能会很多，所以蒟蒻 SY 只能将一个书架上的书搬到与其相邻的两个书架上。那么蒟蒻 SY 最少搬动几本书呢？", "inputFormat": "共 $2$ 行，第 $1$ 行 $1$ 个正整数 $n$，第 $2$ 行 $n$ 个非负整数，第 $i$ 个为 $b_i$。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行 $1$ 个正整数 $m$，表示蒟蒻 SY 最少搬动 $m$ 本书；\n\n之后 $n$ 行，每行 $2$ 个整数，第 $i$ 行有两个整数 $af_i$ 和 $ab_i$，分别表示蒟蒻 SY 要将第 $i$ 个书架上的 $af_i$ 本书和 $ab_i$ 本书分别搬到它前面的一个书架上和它后面的一个书架上。", "hint": "### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5+1$，且 $n$ 必为奇数；$b_i\\le 10^7$。\n\n若 $af_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架前面的那个书架上的 $-af_i$ 本书搬到第 $i$ 个书架上。\n\n同理，若 $ab_i$ 为负数，则说明蒟蒻 SY 要把第 $i$ 个书架后面的那个书架上的 $-ab_i$ 本书搬到第 $i$ 个书架上。\n", "locale": "zh-CN"}}}
{"pid": "P2126", "type": "P", "difficulty": 3, "samples": [["5\n12\n0 2 15\n2 3 20\n3 5 13\n1 3 29\n0 1 30\n2 4 21\n0 3 23\n5 1 48\n0 4 17\n0 5 27\n1 2 43\n2 5 41\n", "94\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心"], "title": "Mzc家中的男家丁", "background": "mzc 与 djn 的…还没有众人皆知，所以我们要来宣传一下。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁，现在 mzc 要将他们全都聚集起来（干什么就不知道了）。现在知道 mzc 与男家丁们互相之间通信的时间，请算出把他们每个人叫到需要的总时间（要重复的哦）。保证能把他们每个人叫到。", "inputFormat": "第一行有一个数 $n$，表示有 $n$ 个男家丁。第二行一个数 $m$ 表示有 $m$ 条通信路线。之后 $m$ 行，每行三个数 $a_i,b_i,c_i$，表示第 $a_i$个男家丁（或 mzx）和第 $b_i$ 个男家丁（或 mzc）通信需要时间（双向）。$a_i$ 或 $b_i=0$ 表示 mzc。", "outputFormat": "一行，一个数 $sum$，表示把他们每个人叫到需要的总时间。", "hint": "$1\\le n\\leq2300$，$1\\le m\\leq4\\times10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Male Servants in Mzc's Household", "background": "The thing between mzc and djn is not yet widely known, so we are going to spread the word.", "description": "mzc is very rich (just kidding). He has $n$ male servants. Now mzc wants to gather them all together (for reasons unknown). Given the communication times between mzc and the male servants, please compute the total time needed to call each of them (counting repeated uses). It is guaranteed that everyone can be called.", "inputFormat": "The first line contains a number $n$, indicating there are $n$ male servants.  \nThe second line contains a number $m$, indicating there are $m$ communication routes.  \nThen follow $m$ lines, each with three numbers $a_i, b_i, c_i$, meaning that the time needed for communication between the $a_i$-th male servant (or mzc) and the $b_i$-th male servant (or mzc) is $c_i$ (bidirectional). Here, $a_i$ or $b_i = 0$ denotes mzc.", "outputFormat": "One line with a single number $sum$, representing the total time required to call each of them.", "hint": "Constraints: $1\\le n\\leq2300$, $1\\le m\\leq4\\times10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Mzc家中的男家丁", "background": "mzc 与 djn 的…还没有众人皆知，所以我们要来宣传一下。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁，现在 mzc 要将他们全都聚集起来（干什么就不知道了）。现在知道 mzc 与男家丁们互相之间通信的时间，请算出把他们每个人叫到需要的总时间（要重复的哦）。保证能把他们每个人叫到。", "inputFormat": "第一行有一个数 $n$，表示有 $n$ 个男家丁。第二行一个数 $m$ 表示有 $m$ 条通信路线。之后 $m$ 行，每行三个数 $a_i,b_i,c_i$，表示第 $a_i$个男家丁（或 mzx）和第 $b_i$ 个男家丁（或 mzc）通信需要时间（双向）。$a_i$ 或 $b_i=0$ 表示 mzc。", "outputFormat": "一行，一个数 $sum$，表示把他们每个人叫到需要的总时间。", "hint": "$1\\le n\\leq2300$，$1\\le m\\leq4\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P2127", "type": "P", "difficulty": 5, "samples": [["6\n8 4 5 3 2 7", "34"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "离散化"], "title": "序列排序", "background": null, "description": "小 C 有一个 $N$ 个数的整数序列，这个序列的中的数两两不同。\n\n小 C 每次可以交换序列中的任意两个数，代价为这两个数之和。\n\n小 C 希望将整个序列升序排序，问小 C 需要的最小代价是多少？", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个整数，表示小 C 的序列。", "outputFormat": "一行，一个整数，表示小 C 需要的最小代价。", "hint": "对于 $30\\%$ 的数据，$N\\le10$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le10^5$，第二行的 $N$ 个整数均为不超过 $10^9$ 的正整数。", "locale": "zh-CN", "translations": {"en": {"title": "Sorting a Sequence", "background": "", "description": "Xiao C has an integer sequence of $N$ numbers, in which all numbers are pairwise distinct.\n\nEach time, Xiao C can swap any two numbers in the sequence, with a cost equal to the sum of those two numbers.\n\nXiao C wants to sort the entire sequence in ascending order. What is the minimal cost needed?", "inputFormat": "The first line contains an integer $N$.\n\nThe second line contains $N$ integers, representing Xiao C's sequence.", "outputFormat": "Output one line containing an integer, the minimal cost Xiao C needs.", "hint": "- For $30\\%$ of the testdata, $N\\le10$.\n- For $100\\%$ of the testdata, $1\\le N\\le10^5$, and the $N$ integers on the second line are positive integers not exceeding $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列排序", "background": null, "description": "小 C 有一个 $N$ 个数的整数序列，这个序列的中的数两两不同。\n\n小 C 每次可以交换序列中的任意两个数，代价为这两个数之和。\n\n小 C 希望将整个序列升序排序，问小 C 需要的最小代价是多少？", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个整数，表示小 C 的序列。", "outputFormat": "一行，一个整数，表示小 C 需要的最小代价。", "hint": "对于 $30\\%$ 的数据，$N\\le10$。\n\n对于 $100\\%$ 的数据，$1\\le N\\le10^5$，第二行的 $N$ 个整数均为不超过 $10^9$ 的正整数。", "locale": "zh-CN"}}}
{"pid": "P2128", "type": "P", "difficulty": 3, "samples": [["4 6\n100\n5000\n1000\n2000\n1 2\n1 3\n1 4\n2 3\n2 4\n3 4", "8100"], ["6 8\n1500\n1000\n100\n2000\n500\n300\n1 2\n1 3\n1 4\n2 4\n3 5\n4 5\n4 6\n5 6", "4500"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学"], "title": "赤壁之战", "background": "", "description": "赤壁之战，黄盖率舰满载薪草膏油诈降曹军。\n\n受庞统所授的连环计，曹军战船之间由铁索相连，没有两艘战船在同一位置，也没有铁索两两相交或穿过战船。每艘船都有其一定的战略价值。\n\n为了保证达到破坏效果，黄盖需要保证被点燃的曹军船只两两之间都有铁索连接。他希望找到一种方案点燃总价值尽可能大的战船。\n", "inputFormat": "第一行包含数字 $N$，$M$ ，表示战船的数量和铁索的数量。\n\n接下来包含 $N$ 行，每 $i$ 行包含 $1$ 个数字 $V_i$，表示第 $i$ 艘战船的战略价值。\n\n接下来包含 $M$ 行，每 $i$ 行包含 $2$ 个数字 $S_i$，$T_i$ ，表示铁索连接的两艘船只。\n\n数据保证这是一个可行的舰队安排。\n", "outputFormat": "输出一个数字，表示最多摧毁总价值多少的战船。\n", "hint": "#### 【数据规模】\n\n对于 $50\\%$ 的数据，保证 $N$，$M \\le 10$。\n\n对于 $100\\%$ 数据，保证 $N \\le 450$，$M \\le 900$，$V_i \\le 6000$。\n\n#### 【注意】\n\n题目中的每句话（除了第一段）都有作用。", "locale": "zh-CN", "translations": {"en": {"title": "The Battle of Red Cliffs", "background": "", "description": "At the Battle of Red Cliffs, Huang Gai (Huang Gai) pretended to defect to Cao Cao’s fleet with ships loaded with reeds and oil.\n\nUnder Pang Tong’s “chained ships” stratagem, Cao Cao’s warships were connected by iron chains. No two ships were at the same position, and no chains intersected one another or passed through any ship. Each ship had a given strategic value.\n\nTo ensure the destructive effect, Huang Gai must guarantee that every pair among the ignited Cao Cao ships is directly connected by an iron chain. He hopes to find a plan to ignite ships whose total value is as large as possible.", "inputFormat": "The first line contains numbers $N$, $M$, the number of warships and the number of iron chains.\n\nThe next $N$ lines, the $i$-th line contains $1$ number $V_i$, the strategic value of the $i$-th warship.\n\nThe next $M$ lines, the $i$-th line contains $2$ numbers $S_i$, $T_i$, indicating the two ships connected by an iron chain.\n\nIt is guaranteed that this is a valid fleet arrangement.", "outputFormat": "Output one number, the maximum total value of warships that can be destroyed.", "hint": "- Constraints\n  - For $50\\%$ of the testdata, $N$, $M \\le 10$.\n  - For $100\\%$ of the testdata, $N \\le 450$, $M \\le 900$, $V_i \\le 6000$.\n- Note\n  - Every sentence in the statement (except the first paragraph) is relevant.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "赤壁之战", "background": "", "description": "赤壁之战，黄盖率舰满载薪草膏油诈降曹军。\n\n受庞统所授的连环计，曹军战船之间由铁索相连，没有两艘战船在同一位置，也没有铁索两两相交或穿过战船。每艘船都有其一定的战略价值。\n\n为了保证达到破坏效果，黄盖需要保证被点燃的曹军船只两两之间都有铁索连接。他希望找到一种方案点燃总价值尽可能大的战船。\n", "inputFormat": "第一行包含数字 $N$，$M$ ，表示战船的数量和铁索的数量。\n\n接下来包含 $N$ 行，每 $i$ 行包含 $1$ 个数字 $V_i$，表示第 $i$ 艘战船的战略价值。\n\n接下来包含 $M$ 行，每 $i$ 行包含 $2$ 个数字 $S_i$，$T_i$ ，表示铁索连接的两艘船只。\n\n数据保证这是一个可行的舰队安排。\n", "outputFormat": "输出一个数字，表示最多摧毁总价值多少的战船。\n", "hint": "#### 【数据规模】\n\n对于 $50\\%$ 的数据，保证 $N$，$M \\le 10$。\n\n对于 $100\\%$ 数据，保证 $N \\le 450$，$M \\le 900$，$V_i \\le 6000$。\n\n#### 【注意】\n\n题目中的每句话（除了第一段）都有作用。", "locale": "zh-CN"}}}
{"pid": "P2129", "type": "P", "difficulty": 4, "samples": [["3 3\n0 0\n4 -3\n6 7\nx\nm -1 2\ny\n", "1 2\n-3 5\n-5 -5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "矩阵运算", "矩阵乘法"], "title": "L 国的战斗续之多路出击", "background": "广而告之：背景见其他L国的战斗！！大家一起刷\n", "description": "这一次，L 国决定军队分成 $n$ 组，分布在各地，若以 L 国为原点，可以看作在一个直角坐标系内。但是他们都受统一的指挥，指令部共发出 $m$ 个命令。命令有移动、上下转移和左右转移，但是由于某些奇奇怪怪的原因，军队收到命令总是有延迟，为了方便，军方已经写好一个栈，所以你要处理的顺序，应该是从后往前。\n", "inputFormat": "输入包括 $n+m+1$ 行。\n\n第一行两个整数 $n,m$。\n\n接下来 $n$ 行，第 $i+1$ 行两个整数 $x_i,y_i$ 表示第 $i$ 支军队的位置。\n\n接下来 $m$ 行，每行首先是一个字符 $c$。\n- 若 $c$ 为 `m`，则后面再输入两个整数 $p,q$，表示把每支军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- 若 $c$ 为 `x`，则表示把每支军队的位置从 $(x_i,y_i)$ 移到 $(-x_i,y_i)$。\n- 若 $c$ 为 `y`，则表示把每支军队的位置从 $(x_i,y_i)$ 移到 $(x_i,-y_i)$。", "outputFormat": "输出包含 $n$ 行，第 $i$ 行有两个整数 $x_i',y_i'$，表示第 $i$ 支军队移动后的位置。\n", "hint": "对于 $30\\%$ 的数据，$1\\leqslant n,m\\leqslant 1000$。\n\n对于 $100\\%$ 的数据，$1\\leqslant n,m\\leqslant 5\\times 10^5$，$x_i,y_i$ 在 `int` 范围内。", "locale": "zh-CN", "translations": {"en": {"title": "The Battle of Country L Continues: Multi-route Offensive", "background": "Public notice: see the background in other “The Battle of Country L” problems. Let’s solve them together.", "description": "This time, Country L decides to divide its army into $n$ groups distributed across various locations. Taking Country L as the origin, these positions can be viewed in a Cartesian coordinate system. All groups are under unified command, and the command center issues $m$ commands. Commands include translation, up-down flip, and left-right flip. However, due to some odd latency, the army always receives commands with a delay. For convenience, a stack has already been prepared, so you must process the commands from back to front.", "inputFormat": "The input consists of $n+m+1$ lines.\n\nThe first line contains two integers $n, m$.\n\nThe next $n$ lines: on the $(i+1)$-th line, two integers $x_i, y_i$ give the location of the $i$-th army group.\n\nThe next $m$ lines each start with a character $c$.\n- If $c$ is `m`, then two integers $p, q$ follow, meaning every group moves from $(x_i, y_i)$ to $(x_i + p, y_i + q)$.\n- If $c$ is `x`, then every group moves from $(x_i, y_i)$ to $(-x_i, y_i)$ (left-right flip, i.e., reflection across the $y$-axis).\n- If $c$ is `y`, then every group moves from $(x_i, y_i)$ to $(x_i, -y_i)$ (up-down flip, i.e., reflection across the $x$-axis).", "outputFormat": "Output $n$ lines. On the $i$-th line, print two integers $x_i', y_i'$, the final position of the $i$-th army group after all commands are applied (processed from last to first).", "hint": "For $30\\%$ of the testdata, $1 \\leqslant n, m \\leqslant 1000$.\n\nFor $100\\%$ of the testdata, $1 \\leqslant n, m \\leqslant 5 \\times 10^5$, and $x_i, y_i$ are within the `int` range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "L 国的战斗续之多路出击", "background": "广而告之：背景见其他L国的战斗！！大家一起刷\n", "description": "这一次，L 国决定军队分成 $n$ 组，分布在各地，若以 L 国为原点，可以看作在一个直角坐标系内。但是他们都受统一的指挥，指令部共发出 $m$ 个命令。命令有移动、上下转移和左右转移，但是由于某些奇奇怪怪的原因，军队收到命令总是有延迟，为了方便，军方已经写好一个栈，所以你要处理的顺序，应该是从后往前。\n", "inputFormat": "输入包括 $n+m+1$ 行。\n\n第一行两个整数 $n,m$。\n\n接下来 $n$ 行，第 $i+1$ 行两个整数 $x_i,y_i$ 表示第 $i$ 支军队的位置。\n\n接下来 $m$ 行，每行首先是一个字符 $c$。\n- 若 $c$ 为 `m`，则后面再输入两个整数 $p,q$，表示把每支军队的位置从 $(x_i,y_i)$ 移到 $(x_i+p,y_i+q)$。\n- 若 $c$ 为 `x`，则表示把每支军队的位置从 $(x_i,y_i)$ 移到 $(-x_i,y_i)$。\n- 若 $c$ 为 `y`，则表示把每支军队的位置从 $(x_i,y_i)$ 移到 $(x_i,-y_i)$。", "outputFormat": "输出包含 $n$ 行，第 $i$ 行有两个整数 $x_i',y_i'$，表示第 $i$ 支军队移动后的位置。\n", "hint": "对于 $30\\%$ 的数据，$1\\leqslant n,m\\leqslant 1000$。\n\n对于 $100\\%$ 的数据，$1\\leqslant n,m\\leqslant 5\\times 10^5$，$x_i,y_i$ 在 `int` 范围内。", "locale": "zh-CN"}}}
{"pid": "P2130", "type": "P", "difficulty": 4, "samples": [["2 2\n$$\n.#", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "线性数据结构"], "title": "狂奔的Wzf", "background": "众所周知，Wzf 一直想写作业。\n\n可是今天，它的作业被 WSD 抢了！！！\n\nWzf 很愤怒！！！\n\n他决定以最快的速度，冲向作业。\n\n在他面前是一个迷宫，作业就在其中！", "description": "现有一个 $n$ 行 $m$ 列的迷宫：\n\n|标识|含义|\n|:-:|:-:|\n|`$`|空地，能走上去|\n|`.`|也是空地，也能走上去|\n|`X`|障碍，不能走上去|\n|`#`|终点，这里有 Wzf 的作业|\n\nWzf 从迷宫左上角（第 $1$ 行第 $1$ 列）开始，每秒钟可以：\n\n1. 选中一个方向（上 / 下 / 左 / 右）。\n2. 选中一个非负整数 $k$。\n3. 向选中的方向跨一步，移动 $2^k$ 格：\n   - 中途**不可以**跨过障碍。\n   - 落脚点上不能有障碍。\n   - 不能走到迷宫之外。\n\n求 Wzf 至少需要多少秒才能走到终点。", "inputFormat": "第一行两个整数 $n,m\\ (1 \\le n,m \\le 1000)$。\n\n接下来 $n$ 行，每行 $m$ 个字符。\n\n**保证 `#` 有且只有一个。**\n\n**保证第 $\\bm 1$ 行第 $\\bm 1$ 列的标识不是 `X`。**", "outputFormat": "一行一个整数，表示 Wzf 至少需要多少秒才能走到终点。\n\n如果 Wzf 不可能走到终点，那么输出 $-1$。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "The Sprinting Wzf", "background": "As everyone knows, Wzf always wants to do homework.\n\nBut today, WSD snatched its homework!!!\n\nWzf is furious!!!\n\nIt decides to rush toward the homework at top speed.\n\nIn front of it is a maze, and the homework is inside!", "description": "There is a maze with $n$ rows and $m$ columns:\n\n|标识|含义|\n|:-:|:-:|\n|`$`|Empty cell, walkable.|\n|`.`|Also an empty cell, also walkable.|\n|`X`|Obstacle, not walkable.|\n|`#`|Goal; Wzf's homework is here.|\n\nWzf starts from the top-left corner of the maze (row $1$, column $1$). Each second, it can:\n\n1. Choose a direction (up / down / left / right).\n2. Choose a non-negative integer $m$.\n3. Take one step in the chosen direction, moving $2^m$ cells:\n   - It must not cross any obstacle along the way.\n   - The landing cell must not contain an obstacle.\n   - It cannot go outside the maze.\n\nFind the minimum number of seconds Wzf needs to reach the goal.", "inputFormat": "The first line contains two integers $n, m$ with $1 \\le n, m \\le 1000$.\n\nThe next $n$ lines each contain $m$ characters.\n\nIt is guaranteed that there is exactly one `#`.\n\nIt is guaranteed that the cell at row $\\bm 1$, column $\\bm 1$ is not `X`.", "outputFormat": "Output a single integer, the minimum number of seconds Wzf needs to reach the goal.\n\nIf Wzf cannot reach the goal, output $-1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "狂奔的Wzf", "background": "众所周知，Wzf 一直想写作业。\n\n可是今天，它的作业被 WSD 抢了！！！\n\nWzf 很愤怒！！！\n\n他决定以最快的速度，冲向作业。\n\n在他面前是一个迷宫，作业就在其中！", "description": "现有一个 $n$ 行 $m$ 列的迷宫：\n\n|标识|含义|\n|:-:|:-:|\n|`$`|空地，能走上去|\n|`.`|也是空地，也能走上去|\n|`X`|障碍，不能走上去|\n|`#`|终点，这里有 Wzf 的作业|\n\nWzf 从迷宫左上角（第 $1$ 行第 $1$ 列）开始，每秒钟可以：\n\n1. 选中一个方向（上 / 下 / 左 / 右）。\n2. 选中一个非负整数 $k$。\n3. 向选中的方向跨一步，移动 $2^k$ 格：\n   - 中途**不可以**跨过障碍。\n   - 落脚点上不能有障碍。\n   - 不能走到迷宫之外。\n\n求 Wzf 至少需要多少秒才能走到终点。", "inputFormat": "第一行两个整数 $n,m\\ (1 \\le n,m \\le 1000)$。\n\n接下来 $n$ 行，每行 $m$ 个字符。\n\n**保证 `#` 有且只有一个。**\n\n**保证第 $\\bm 1$ 行第 $\\bm 1$ 列的标识不是 `X`。**", "outputFormat": "一行一个整数，表示 Wzf 至少需要多少秒才能走到终点。\n\n如果 Wzf 不可能走到终点，那么输出 $-1$。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2131", "type": "P", "difficulty": 5, "samples": [["((B)())", "0"], ["((((B)(B))((B)()))(B))", "impossible"], ["(()(((B)(B))(B)))", "1"]], "limits": {"time": [256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256, 256], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "树形数据结构"], "title": "彩球树", "background": "小 Z 是一个聪明的小学生，他用塑料管和橡皮泥搭成了一棵树，每个橡皮泥上都连接着一个向下的塑料管，有的连接着两根向上的塑料管，有的则连接着一些彩球。\n\n然而，这个工艺品很快因为不平衡倒了下来。于是，小 Z 请教了和他在同一个班上的妹子小 C。在百科全书上看到天平平衡原理的小 C 知道，如果任何一块橡皮泥向上连接的两根管子的载重量之差超过一个彩球的重量，工艺品就会不平衡倒下来。由于彩球比较重，橡皮泥和塑料管的重量可以忽略不计。\n\n由于移动彩球需要花时间拆卸和固定，小 C 希望移动最少次数彩球让这个工艺品平衡起来。你能帮助她吗？", "description": "给定一棵叶子带权值二叉树，保证每个非叶子结点都有两个儿子，权值只能是 $0$ 或 $1$。\n\n你可以进行以下操作若干次：选中两个叶子，交换它们的权值。\n\n定义一颗子树的权值为子树内所有叶子的权值之和。\n\n你希望通过以上操作使得任意非叶子结点的左子树权值和右子树权值相差不超过 $1$。\n\n求达成以上目标需要的最少操作次数。", "inputFormat": "一行一个字符串 $T$，以中序遍历的方式描述了这棵树，`B` 表示彩球。\n\n\n---\n\n\n形式化的，$T$ 的 CFG（上下文无关文法）定义为：\n\n```plain\n<T> := (<T><T>) | (B) | ()\n```\n\n\n\n|项目|含义|\n|:-:|:-:|\n|`(<T><T>)`|一个非叶子结点，两个 `<T>` 分别为它的左子树和右子树|\n|`(B)`|一个权值为 $1$ 的叶子结点|\n|`()`|一个权值为 $0$ 的叶子结点|", "outputFormat": "输出一个数字，表示最少移动多少个彩球就能使它平衡，或输出 `impossible`，表示如何移动多少个都无法平衡。\n\n\n---\n\n\n输出一个数字，表示至少需要多少次操作，或输出 `impossible`，表示不可能达成目标。", "hint": "【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/pic/1259.png)\n\n【数据规模】\n\n设 $N$ 为字符串 $T$ 的长度。\n\n对于 $15\\%$ 的数据，$N \\le 25$。\n\n对于 $50\\%$ 的数据，$N \\le 250$。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 5000$。", "locale": "zh-CN", "translations": {"en": {"title": "Colored Ball Tree", "background": "Xiao Z is a smart primary school student. He built a tree using plastic tubes and clay. Each piece of clay is connected to one downward plastic tube; some are connected to two upward plastic tubes, while others are connected to some colored balls.\n\nHowever, the craft quickly toppled due to imbalance. So Xiao Z consulted his classmate Xiao C. Having read about the principle of balance on a scale in an encyclopedia, Xiao C knows that if, at any piece of clay, the load difference between the two upward tubes exceeds the weight of one ball, the craft will topple. Since the balls are heavy, the weight of the clay and plastic tubes can be ignored.\n\nBecause moving balls takes time to dismantle and fix, Xiao C wants to move as few balls as possible to balance the craft. Can you help her?", "description": "You are given a binary tree whose leaves have weights. Every internal node has exactly two children. Leaf weights are only $0$ or $1$.\n\nYou can perform the following operation any number of times: choose two leaves and swap their weights.\n\nDefine the weight of a subtree as the sum of the weights of all leaves in that subtree.\n\nYou want to make the difference between the weights of the left and right subtrees at every internal node be at most $1$ by using the operation above.\n\nFind the minimum number of operations needed to achieve this.", "inputFormat": "One line containing a string $T$ that describes the tree in a fully parenthesized form. The character `B` denotes a colored ball.\n\n---\n\nFormally, the CFG (context-free grammar) of $T$ is defined as:\n\n```plain\n<T> := (<T><T>) | (B) | ()\n```\n\n| Item | Meaning |\n|:-:|:-:|\n| `(<T><T>)` | An internal node; the two `<T>` are its left and right subtrees. |\n| `(B)` | A leaf node with weight $1$. |\n| `()` | A leaf node with weight $0$. |", "outputFormat": "Output a single integer: the minimum number of operations required, or output `impossible` if it is not achievable.", "hint": "Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/pic/1259.png)\n\nConstraints\n\nLet $N$ be the length of the string $T$.\n\n- For $15\\%$ of the testdata, $N \\le 25$.\n- For $50\\%$ of the testdata, $N \\le 250$.\n- For $100\\%$ of the testdata, $2 \\le N \\le 5000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "彩球树", "background": "小 Z 是一个聪明的小学生，他用塑料管和橡皮泥搭成了一棵树，每个橡皮泥上都连接着一个向下的塑料管，有的连接着两根向上的塑料管，有的则连接着一些彩球。\n\n然而，这个工艺品很快因为不平衡倒了下来。于是，小 Z 请教了和他在同一个班上的妹子小 C。在百科全书上看到天平平衡原理的小 C 知道，如果任何一块橡皮泥向上连接的两根管子的载重量之差超过一个彩球的重量，工艺品就会不平衡倒下来。由于彩球比较重，橡皮泥和塑料管的重量可以忽略不计。\n\n由于移动彩球需要花时间拆卸和固定，小 C 希望移动最少次数彩球让这个工艺品平衡起来。你能帮助她吗？", "description": "给定一棵叶子带权值二叉树，保证每个非叶子结点都有两个儿子，权值只能是 $0$ 或 $1$。\n\n你可以进行以下操作若干次：选中两个叶子，交换它们的权值。\n\n定义一颗子树的权值为子树内所有叶子的权值之和。\n\n你希望通过以上操作使得任意非叶子结点的左子树权值和右子树权值相差不超过 $1$。\n\n求达成以上目标需要的最少操作次数。", "inputFormat": "一行一个字符串 $T$，以中序遍历的方式描述了这棵树，`B` 表示彩球。\n\n\n---\n\n\n形式化的，$T$ 的 CFG（上下文无关文法）定义为：\n\n```plain\n<T> := (<T><T>) | (B) | ()\n```\n\n\n\n|项目|含义|\n|:-:|:-:|\n|`(<T><T>)`|一个非叶子结点，两个 `<T>` 分别为它的左子树和右子树|\n|`(B)`|一个权值为 $1$ 的叶子结点|\n|`()`|一个权值为 $0$ 的叶子结点|", "outputFormat": "输出一个数字，表示最少移动多少个彩球就能使它平衡，或输出 `impossible`，表示如何移动多少个都无法平衡。\n\n\n---\n\n\n输出一个数字，表示至少需要多少次操作，或输出 `impossible`，表示不可能达成目标。", "hint": "【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/pic/1259.png)\n\n【数据规模】\n\n设 $N$ 为字符串 $T$ 的长度。\n\n对于 $15\\%$ 的数据，$N \\le 25$。\n\n对于 $50\\%$ 的数据，$N \\le 250$。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P2132", "type": "P", "difficulty": 4, "samples": [["3\n3 2 1", "16"], ["5\n1 1 1 1 1 ", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "小Z的队伍排列", "background": "", "description": "小 Z 想给班里的同学拍一张合影，为此需要先让大家排好队伍。他希望大家站成 $k$ 排，并规定了每排的人数，保证每一排的人数都不多于后面一排的人数。\n\n这时小 Z 发现队伍看起来还是乱糟糟的，原因是大家的身高互不相同。于是，他希望排头对齐，每位同学都比自己正后方的同学以及排头方向的同学矮。\n\n排完以后，善于思考的小 Z 还想知道一共有多少种排法。\n\n例如，大家排成 $3$ 排，且从后往前每排分别是 $3$ 、 $2$ 、 $1$ 人，就有以下 $16$ 种排法（每个数代表将所有同学身高从高到低排序后该同学的排名）：\n\n$$\\begin{matrix}\n123 & 123 & 124 & 124 & 125 & 125 & 126 & 126 & 134 & 134 & 135 & 135 & 136 & 136 & 145 & 146 \\\\\n45 & 46 & 35 & 36 & 34 & 36 & 34 & 35 & 25 & 26 & 24 & 26 & 24 & 25 & 26 & 25 \\\\\n6 & 5 & 6 & 5 & 6 & 4 & 5 & 4 & 6 & 5 & 6 & 4 & 5 & 4 & 3 & 3\n\\end{matrix}$$\n\n可是班里一共有 $n$ 个人，小 Z 算不出来了，希望你帮帮他。", "inputFormat": "第一行包含一个整数 $k$。\n\n第二行包含 $k$ 个整数，表示从后往前每排的人数。\n", "outputFormat": "一行，包含一个整数，表示队伍排列的方案数。\n", "hint": "### 数据范围及约定\n\n对于 $30\\%$ 的数据，$n \\le 10$。\n\n对于另外 $30\\%$ 的数据，只有最后一排超过 $1$ 个人。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 5$，$1 \\le n \\le 30$，方案数小于 $2^{32}$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Team Lineup", "background": "", "description": "Xiao Z wants to take a class photo, so he needs everyone to line up first. He wants them to stand in $k$ rows, and he specifies the number of people in each row, ensuring that each row has no more people than the row behind it.\n\nHe then finds the lineup still looks messy because all heights are different. So he wants the row heads to be aligned (left-justified), and each student must be shorter than both the student directly behind them and the student toward the direction of the row head (if such students exist).\n\nAfter arranging, the thoughtful Xiao Z wants to know how many different lineups there are.\n\nFor example, if everyone stands in $3$ rows, and the row sizes from back to front are $3$, $2$, $1$, there are the following $16$ lineups (each number represents the rank of a student when all students are sorted by height from tallest to shortest):\n\n$$\\begin{matrix}\n123 & 123 & 124 & 124 & 125 & 125 & 126 & 126 & 134 & 134 & 135 & 135 & 136 & 136 & 145 & 146 \\\\\n45 & 46 & 35 & 36 & 34 & 36 & 34 & 35 & 25 & 26 & 24 & 26 & 24 & 25 & 26 & 25 \\\\\n6 & 5 & 6 & 5 & 6 & 4 & 5 & 4 & 6 & 5 & 6 & 4 & 5 & 4 & 3 & 3\n\\end{matrix}$$\n\nHowever, there are $n$ students in the class, and Xiao Z cannot compute it, so he asks you for help.", "inputFormat": "The first line contains an integer $k$.\n\nThe second line contains $k$ integers, giving the number of people in each row from back to front.", "outputFormat": "One line containing an integer, the number of possible lineups.", "hint": "Constraints\n\n- For $30\\%$ of the testdata, $n \\le 10$.\n- For another $30\\%$ of the testdata, only the last row has more than $1$ person.\n- For $100\\%$ of the testdata, $1 \\le k \\le 5$, $1 \\le n \\le 30$, and the number of lineups is less than $2^{32}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的队伍排列", "background": "", "description": "小 Z 想给班里的同学拍一张合影，为此需要先让大家排好队伍。他希望大家站成 $k$ 排，并规定了每排的人数，保证每一排的人数都不多于后面一排的人数。\n\n这时小 Z 发现队伍看起来还是乱糟糟的，原因是大家的身高互不相同。于是，他希望排头对齐，每位同学都比自己正后方的同学以及排头方向的同学矮。\n\n排完以后，善于思考的小 Z 还想知道一共有多少种排法。\n\n例如，大家排成 $3$ 排，且从后往前每排分别是 $3$ 、 $2$ 、 $1$ 人，就有以下 $16$ 种排法（每个数代表将所有同学身高从高到低排序后该同学的排名）：\n\n$$\\begin{matrix}\n123 & 123 & 124 & 124 & 125 & 125 & 126 & 126 & 134 & 134 & 135 & 135 & 136 & 136 & 145 & 146 \\\\\n45 & 46 & 35 & 36 & 34 & 36 & 34 & 35 & 25 & 26 & 24 & 26 & 24 & 25 & 26 & 25 \\\\\n6 & 5 & 6 & 5 & 6 & 4 & 5 & 4 & 6 & 5 & 6 & 4 & 5 & 4 & 3 & 3\n\\end{matrix}$$\n\n可是班里一共有 $n$ 个人，小 Z 算不出来了，希望你帮帮他。", "inputFormat": "第一行包含一个整数 $k$。\n\n第二行包含 $k$ 个整数，表示从后往前每排的人数。\n", "outputFormat": "一行，包含一个整数，表示队伍排列的方案数。\n", "hint": "### 数据范围及约定\n\n对于 $30\\%$ 的数据，$n \\le 10$。\n\n对于另外 $30\\%$ 的数据，只有最后一排超过 $1$ 个人。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 5$，$1 \\le n \\le 30$，方案数小于 $2^{32}$。", "locale": "zh-CN"}}}
{"pid": "P2133", "type": "P", "difficulty": 4, "samples": [["123654\n123456", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "天作之合", "background": "生活就是一次 A\\*，你是我的第一个目标状态。——小明", "description": "在小明的学校中，有若干个女生。小明认为每个女生的特征可以抽象为一个 $6$ 位的数字串，其中不重复地包含 $1\\sim6$ 这 $6$ 个数码。\n\n在小明心中，有一个理想的女生，她的特征数字串为 $A$。如果串 $Y$ 是串 $X$ 交换两个连续的数码所得，那么我们认为特征数字串 $X$ 和 $Y$ 相似。首先，小明找到了他的同桌，她的特征数字串为 $S$。每次，小明会寻找一个特征数字串和当前串相似的女生，直到寻找到适合他的（即特征数字串和 $A$ 相同或相似的）。定义每个女生的合适程度为找到此人至少需要找女生的数量（包括他的同桌和此人自己）。显然，合适程度数值越小的女生越适合小明。\n\n然而，小明觉得老天不会轻易地让他找到，所以他认为合适程度第二小的才是他最合适的伴侣（也就是小红）。那么，请你帮他写一个程序，求出对于小明，小红的合适程度是多少。", "inputFormat": "第 $1$ 行，一个特征数字串 $A$。\n\n第 $2$ 行，一个特征数字串 $S$。", "outputFormat": "一行，一个非负整数表示小红的合适程度。", "hint": "样例解释：\n\n最短的两个「合适的数字串」分别是 $\\tt 454$ 和 $\\tt 545$，故答案为 $3$。\n\n---\n\n对于全部数据，保证串 $A$ 和 $S$ 合法，且保证能找到。", "locale": "zh-CN", "translations": {"en": {"title": "A Match Made in Heaven", "background": "Life is an A\\*; you are my first goal state. — Xiaoming.", "description": "At Xiaoming’s school, there are several girls. Xiaoming thinks each girl’s traits can be abstracted into a $6$-digit string that contains, without repetition, the digits $1\\sim6$.\n\nIn Xiaoming’s mind, there is an ideal girl whose trait string is $A$. If string $Y$ is obtained from string $X$ by swapping two consecutive digits, then we say that trait strings $X$ and $Y$ are similar. First, Xiaoming finds his deskmate, whose trait string is $S$. Each time, Xiaoming looks for a girl whose trait string is similar to the current string, until he finds one suitable for him (that is, a girl whose trait string is identical to $A$ or similar to $A$). Define each girl’s suitability degree as the minimum number of girls he needs to look for to reach this person (including his deskmate and this person herself). Clearly, the smaller the suitability degree, the more suitable the girl is for Xiaoming.\n\nHowever, Xiaoming feels that fate will not let him find her easily, so he believes that the second smallest suitability degree is actually his best match (that is, Xiaohong). Please write a program to compute Xiaohong’s suitability degree for Xiaoming.", "inputFormat": "The $1$st line: a trait string $A$.\n\nThe $2$nd line: a trait string $S$.", "outputFormat": "One line with a non-negative integer representing Xiaohong’s suitability degree.", "hint": "Sample explanation:\n\nThe two shortest “suitable strings” are $\\tt 454$ and $\\tt 545$, so the answer is $3$.\n\n---\n\nFor all testdata, it is guaranteed that strings $A$ and $S$ are valid, and that a solution exists.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "天作之合", "background": "生活就是一次 A\\*，你是我的第一个目标状态。——小明", "description": "在小明的学校中，有若干个女生。小明认为每个女生的特征可以抽象为一个 $6$ 位的数字串，其中不重复地包含 $1\\sim6$ 这 $6$ 个数码。\n\n在小明心中，有一个理想的女生，她的特征数字串为 $A$。如果串 $Y$ 是串 $X$ 交换两个连续的数码所得，那么我们认为特征数字串 $X$ 和 $Y$ 相似。首先，小明找到了他的同桌，她的特征数字串为 $S$。每次，小明会寻找一个特征数字串和当前串相似的女生，直到寻找到适合他的（即特征数字串和 $A$ 相同或相似的）。定义每个女生的合适程度为找到此人至少需要找女生的数量（包括他的同桌和此人自己）。显然，合适程度数值越小的女生越适合小明。\n\n然而，小明觉得老天不会轻易地让他找到，所以他认为合适程度第二小的才是他最合适的伴侣（也就是小红）。那么，请你帮他写一个程序，求出对于小明，小红的合适程度是多少。", "inputFormat": "第 $1$ 行，一个特征数字串 $A$。\n\n第 $2$ 行，一个特征数字串 $S$。", "outputFormat": "一行，一个非负整数表示小红的合适程度。", "hint": "样例解释：\n\n最短的两个「合适的数字串」分别是 $\\tt 454$ 和 $\\tt 545$，故答案为 $3$。\n\n---\n\n对于全部数据，保证串 $A$ 和 $S$ 合法，且保证能找到。", "locale": "zh-CN"}}}
{"pid": "P2134", "type": "P", "difficulty": 4, "samples": [["6 1 7", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心"], "title": "百日旅行", "background": "> 重要的不是去哪里，而是和你在一起。——小红\n\n对小明和小红来说，$2014$ 年 $7$ 月 $29$ 日是一个美好的日子。这一天是他们相识 $100$ 天的纪念日。\n\n（小明：小红，感谢你 $2$ 场大考时默默的支持，$100$ 个日夜的陪伴；感谢你照亮我 $100$ 个美好的日子，给我留下无数美好的回忆……在这个美好的日子里，我准备带你去旅行。）", "description": "小明和小红还剩下 $n$ 天的假期，小明可以安排旅行的计划。如果连续 $x$ 天旅游，小明需要花旅行费用  $p \\times x \\times x$ 元；如果连续 $x$ 天不旅游，小明需要请小红吃饭，花费为 $q \\times x$ 元（ $p,q$ 都是输入的常数）。\n\n请你帮小明写一个程序，计算出假期里他至少需要花费多少元。", "inputFormat": "输入只有一行，包含三个空格隔开的正整数 $n,p,q$。", "outputFormat": "一行，一个正整数表示小明至少需要花费多少元。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 数据，$1 \\le n \\le 20$。\n- 对于 $90\\%$ 数据，$1 \\le n \\le 10^3$，$1 \\le p \\le 2 \\times 10^3$，$1 \\le q \\le 10^4$。\n- 对于 $100\\%$ 数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le p \\le q \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Hundred-Day Journey", "background": "> What matters is not where to go, but being with you. — Xiaohong\n\nFor Xiaoming and Xiaohong, $2014$ year $7$ month $29$ day is a beautiful day. This day is the $100$-day anniversary of their acquaintance.\n\n(Xiaoming: Xiaohong, thank you for your silent support during the $2$ major exams and your companionship over $100$ days and nights; thank you for lighting up my $100$ beautiful days and leaving me countless wonderful memories... On this beautiful day, I plan to take you on a trip.)", "description": "Xiaoming and Xiaohong have $n$ days of vacation left, and Xiaoming can plan the trip. If they travel for $x$ consecutive days, Xiaoming needs to spend $p \\times x \\times x$ yuan. If they do not travel for $x$ consecutive days, Xiaoming needs to treat Xiaohong to meals, costing $q \\times x$ yuan ($p, q$ are constants given in the input).\n\nPlease help Xiaoming write a program to compute the minimum total amount he needs to spend during the vacation.", "inputFormat": "The input contains a single line with three space-separated positive integers $n, p, q$.", "outputFormat": "Output one line with a single positive integer, representing the minimum amount of money Xiaoming needs to spend.", "hint": "#### Constraints\n\n- For $20\\%$ of the testdata, $1 \\le n \\le 20$.\n- For $90\\%$ of the testdata, $1 \\le n \\le 10^3$, $1 \\le p \\le 2 \\times 10^3$, $1 \\le q \\le 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 2 \\times 10^5$, $1 \\le p \\le q \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "百日旅行", "background": "> 重要的不是去哪里，而是和你在一起。——小红\n\n对小明和小红来说，$2014$ 年 $7$ 月 $29$ 日是一个美好的日子。这一天是他们相识 $100$ 天的纪念日。\n\n（小明：小红，感谢你 $2$ 场大考时默默的支持，$100$ 个日夜的陪伴；感谢你照亮我 $100$ 个美好的日子，给我留下无数美好的回忆……在这个美好的日子里，我准备带你去旅行。）", "description": "小明和小红还剩下 $n$ 天的假期，小明可以安排旅行的计划。如果连续 $x$ 天旅游，小明需要花旅行费用  $p \\times x \\times x$ 元；如果连续 $x$ 天不旅游，小明需要请小红吃饭，花费为 $q \\times x$ 元（ $p,q$ 都是输入的常数）。\n\n请你帮小明写一个程序，计算出假期里他至少需要花费多少元。", "inputFormat": "输入只有一行，包含三个空格隔开的正整数 $n,p,q$。", "outputFormat": "一行，一个正整数表示小明至少需要花费多少元。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 数据，$1 \\le n \\le 20$。\n- 对于 $90\\%$ 数据，$1 \\le n \\le 10^3$，$1 \\le p \\le 2 \\times 10^3$，$1 \\le q \\le 10^4$。\n- 对于 $100\\%$ 数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le p \\le q \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2135", "type": "P", "difficulty": 6, "samples": [["4\r\n1 2 3 1\r\n1 3 4 1\r\n", "29\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "区间 DP"], "title": "方块消除", "background": "", "description": "Jimmy 最近迷上了一款叫做方块消除的游戏。游戏规则如下：$n$ 个带颜色方格排成一列，相同颜色的方块连成一个区域（如果两个相邻方块颜色相同，则这两个方块属于同一区域）。为简化题目，将连起来的同一颜色方块的数目用一个数表示。\n\n例如，`9 122233331` 表示为\n\n```plain\n4\n1 2 3 1\n1 3 4 1\n```\n\n游戏时，你可以任选一个区域消去。设这个区域包含的方块数为 $x$，则将得到 $x^2$ 个分值。方块消去之后，其余的方块就会竖直落到底部或其他方块上。而且当有一列方块被完全消去时，其右边的所有方块就会向左移一格。Jimmy 希望你能找出得最高分的最佳方案，你能帮助他吗？\n", "inputFormat": "第一行包含一个整数 $m$（$1 \\le m \\le 50$），表示同颜色方块区域的数目。  \n第二行包含 $m$ 个数，表示每个区域的颜色（$1$ 到 $m$ 之间的整数）。  \n第三行包含 $m$ 个数，表示每个区域包含的方块数（$1$ 到 $20$ 之间的整数）。", "outputFormat": "仅一个整数，即最高可能得分。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Block Elimination", "background": "", "description": "Jimmy has recently become obsessed with a game called Block Elimination. The rules are as follows: $n$ colored blocks are arranged in a row. Blocks of the same color that are contiguous form a region (if two adjacent blocks have the same color, then these two blocks belong to the same region). To simplify the problem, we represent the number of blocks in each contiguous region of the same color by a single number.\n\nFor example, `9 122233331` is represented as\n\n```plain\n4\n1 2 3 1\n1 3 4 1\n```\n\nDuring the game, you may choose any one region to remove. Suppose this region contains $x$ blocks; then you gain $x^2$ points. After removing a region, the remaining blocks close up from both sides to fill the gap. If blocks of the same color become adjacent due to this, they merge into a new single region. Jimmy wants to find the best strategy to achieve the highest score. Can you help him?", "inputFormat": "The first line contains an integer $m$ ($1 \\le m \\le 50$), the number of regions of the same color.  \nThe second line contains $m$ integers, the color of each region (integers between 1 and $m$).  \nThe third line contains $m$ integers, the number of blocks in each region (integers between 1 and 20).", "outputFormat": "Output a single integer: the highest possible score.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "方块消除", "background": "", "description": "Jimmy 最近迷上了一款叫做方块消除的游戏。游戏规则如下：$n$ 个带颜色方格排成一列，相同颜色的方块连成一个区域（如果两个相邻方块颜色相同，则这两个方块属于同一区域）。为简化题目，将连起来的同一颜色方块的数目用一个数表示。\n\n例如，`9 122233331` 表示为\n\n```plain\n4\n1 2 3 1\n1 3 4 1\n```\n\n游戏时，你可以任选一个区域消去。设这个区域包含的方块数为 $x$，则将得到 $x^2$ 个分值。方块消去之后，其余的方块就会竖直落到底部或其他方块上。而且当有一列方块被完全消去时，其右边的所有方块就会向左移一格。Jimmy 希望你能找出得最高分的最佳方案，你能帮助他吗？\n", "inputFormat": "第一行包含一个整数 $m$（$1 \\le m \\le 50$），表示同颜色方块区域的数目。  \n第二行包含 $m$ 个数，表示每个区域的颜色（$1$ 到 $m$ 之间的整数）。  \n第三行包含 $m$ 个数，表示每个区域包含的方块数（$1$ 到 $20$ 之间的整数）。", "outputFormat": "仅一个整数，即最高可能得分。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2136", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2 3\n2 3 -1\n3 1 -10", "-2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "枚举", "负权环"], "title": "拉近距离", "background": "我是源点，你是终点。我们之间有负权环。 ——小明", "description": "在小明和小红的生活中，有 $N$ 个关键的节点。有 $M$ 个事件，记为一个三元组 $(S_i,T_i,W_i)$，表示从节点 $S_i$ 有一个事件可以转移到 $T_i$，事件的效果就是使他们之间的距离减少 $W_i$。\n\n这些节点构成了一个网络，其中节点 $1$ 和 $N$ 是特殊的，节点 $1$ 代表小明，节点 $N$ 代表小红，其他代表进展的阶段。所有事件可以自由选择是否进行，但每次只能进行当前节点邻接的。请你帮他们写一个程序，计算出他们之间可能的最短距离。", "inputFormat": "第一行，两个正整数 $N,M$。\n\n之后 $M$ 行，每行 $3$ 个空格隔开的整数 $S_i,T_i,W_i$。", "outputFormat": "一行，一个整数表示他们之间可能的最短距离。如果这个距离可以无限缩小，输出``Forever love``。", "hint": "对于 $20\\%$ 数据，$N \\le 10$，$M \\le 50$。\n\n对于 $50\\%$ 数据，$N \\le 300$，$M \\le 5000$。\n\n对于 $100\\%$ 数据，$1\\le N \\le 10^3$，$1\\le M \\le 10^4$，$|W_i|\\le 100$，保证从节点 $1$ 到 $2 \\dots N$ 有路径，从节点 $N$ 到 $1 \\dots N - 1$ 有路径。", "locale": "zh-CN", "translations": {"en": {"title": "Closing the Distance", "background": "I am the source, and you are the destination. There is a negative-weight cycle between us. — Xiao Ming.", "description": "In the lives of Xiao Ming and Xiao Hong, there are $N$ key nodes. There are $M$ events, denoted as a triplet $(S_i, T_i, W_i)$, meaning that from node $S_i$ there is an event that can move to $T_i$, and the effect of the event is to reduce the distance between them by $W_i$.\n\nThese nodes form a network, in which nodes $1$ and $N$ are special: node $1$ represents Xiao Ming, node $N$ represents Xiao Hong, and the others represent stages of progress. You may freely choose whether to perform each event, but at any step you may only perform an event that is outgoing from the current node. Please write a program to compute the shortest possible distance between them.", "inputFormat": "The first line contains two positive integers $N, M$.\n\nThen follow $M$ lines, each containing $3$ space-separated integers $S_i, T_i, W_i$.", "outputFormat": "Output one line with a single integer representing the shortest possible distance between them. If this distance can be decreased without bound, output ``Forever love``.", "hint": "For $20\\%$ of the testdata, $N \\le 10$, $M \\le 50$.\n\nFor $50\\%$ of the testdata, $N \\le 300$, $M \\le 5000$.\n\nFor $100\\%$ of the testdata, $1 \\le N \\le 10^3$, $1 \\le M \\le 10^4$, $|W_i| \\le 100$. It is guaranteed that there is a path from node $1$ to every node $2 \\dots N$, and from node $N$ to every node $1 \\dots N - 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "拉近距离", "background": "我是源点，你是终点。我们之间有负权环。 ——小明", "description": "在小明和小红的生活中，有 $N$ 个关键的节点。有 $M$ 个事件，记为一个三元组 $(S_i,T_i,W_i)$，表示从节点 $S_i$ 有一个事件可以转移到 $T_i$，事件的效果就是使他们之间的距离减少 $W_i$。\n\n这些节点构成了一个网络，其中节点 $1$ 和 $N$ 是特殊的，节点 $1$ 代表小明，节点 $N$ 代表小红，其他代表进展的阶段。所有事件可以自由选择是否进行，但每次只能进行当前节点邻接的。请你帮他们写一个程序，计算出他们之间可能的最短距离。", "inputFormat": "第一行，两个正整数 $N,M$。\n\n之后 $M$ 行，每行 $3$ 个空格隔开的整数 $S_i,T_i,W_i$。", "outputFormat": "一行，一个整数表示他们之间可能的最短距离。如果这个距离可以无限缩小，输出``Forever love``。", "hint": "对于 $20\\%$ 数据，$N \\le 10$，$M \\le 50$。\n\n对于 $50\\%$ 数据，$N \\le 300$，$M \\le 5000$。\n\n对于 $100\\%$ 数据，$1\\le N \\le 10^3$，$1\\le M \\le 10^4$，$|W_i|\\le 100$，保证从节点 $1$ 到 $2 \\dots N$ 有路径，从节点 $N$ 到 $1 \\dots N - 1$ 有路径。", "locale": "zh-CN"}}}
{"pid": "P2137", "type": "P", "difficulty": 6, "samples": [["2\n1 2\n10 20\n1\n0 1 5\n", "2\n"], ["2\n1 2\n10 20\n1\n0 1 10\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["分块"], "title": "Gty的妹子树", "background": "我曾在弦歌之中听过你，\n\n\n檀板声碎，半出折子戏。\n\n\n舞榭歌台被风吹去，\n\n\n岁月深处尚有余音一缕……\n\n\n\nGty 神(xian)犇(chong)从来不缺妹子……\n\n\n他来到了一棵妹子树下，发现每个妹子有一个美丽度……\n\n\n由于Gty很哲♂学，他只对美丽度大于某个值的妹子感兴趣。\n\n\n他想知道某个子树中美丽度大于 $k$ 的妹子个数。\n\n\n某个妹子的美丽度可能发生变化……\n\n\n树上可能会出现一只新的妹子……\n", "description": "维护一棵初始有 $n$ 个节点的有根树（根节点为 $1$），树上节点编号为 $1 \\sim n$，每个点有一个权值 $w_i$。\n\n\n支持以下操作：\n\n- `0 u x` 询问以 $u$ 为根的子树中，严格大于 $x$ 的值的个数。\n\n- `1 u x`  把 $u$ 节点的权值改成 $x$。\n\n- `2 u x`  添加一个编号为“当前树中节点数+1”的节点，其父节点为 $u$，其权值为 $x$。\n\n**本题强制在线。**   \n所有输入的 $u,x$ 都需要异或 $\\text{last}$ 才是真正的输入。   \n其中 $\\text{last}$ 为上一次询问的答案，定义初始 $\\text{last} = 0$。", "inputFormat": "第一行一个正整数 $n$，表示初始节点数。 \n\n接下来 $n-1$ 行，每行两个整数 $u,v$，为树上的一条无向边。\n\n接下来一行 $n$ 个整数 $w_i$，表示初始时每个节点的权值。\n\n接着一行一个正整数 $m$，表示操作个数。\n\n接下来 $m$ 行，每行三个整数 $\\text{op},u,x$，表示一次操作。\n", "outputFormat": "对每个 $\\text{op}=0$ 的操作，输出一行，包括一个整数，意义见题目描述。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 30000$，$1\\le u \\le n$，$0 \\le w_i,x < 2^{31}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Gty's Girl Tree", "background": "I once heard you amid the strings and songs.\n\nThe clapboard's sound shatters, half like a scene from an opera.\n\nDance pavilions and singing stages are blown away by the wind.\n\nDeep in the years, a wisp of lingering echo remains...\n\nGty shen (xian) ben (chong) has never lacked girls...\n\nHe came under a \"girl tree\" and found that each girl has a beauty value...\n\nBecause Gty is very philosophical, he is only interested in girls whose beauty value is greater than a certain number.\n\nHe wants to know how many girls in some subtree have beauty value greater than $k$.\n\nA girl's beauty value may change...\n\nA new girl may appear on the tree...", "description": "Maintain a rooted tree with $n$ nodes initially (the root is $1$), with node labels $1 \\sim n$, and each node has a weight $w_i$.\n\nSupport the following operations:\n- `0 u x` Query the number of values strictly greater than $x$ in the subtree rooted at $u$.\n- `1 u x` Set the weight of node $u$ to $x$.\n- `2 u x` Add a node whose index is \"current number of nodes in the tree + 1\", with parent $u$ and weight $x$.\n\nThis problem is strictly online.  \nAll input $u, x$ must be XORed with $\\text{last}$ to obtain the actual input.  \nHere $\\text{last}$ is the answer to the previous query, with initial $\\text{last} = 0$.", "inputFormat": "The first line contains a positive integer $n$, the initial number of nodes.\n\nThe next $n-1$ lines each contain two integers $u, v$, representing an undirected edge in the tree.\n\nThe next line contains $n$ integers $w_i$, the initial weight of each node.\n\nThe next line contains a positive integer $m$, the number of operations.\n\nThe next $m$ lines each contain three integers $\\text{op}, u, x$, describing one operation.", "outputFormat": "For each operation with $\\text{op} = 0$, output one line containing an integer, as described above.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n, m \\le 30000$, $1 \\le u \\le n$, $0 \\le w_i, x < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Gty的妹子树", "background": "我曾在弦歌之中听过你，\n\n\n檀板声碎，半出折子戏。\n\n\n舞榭歌台被风吹去，\n\n\n岁月深处尚有余音一缕……\n\n\n\nGty 神(xian)犇(chong)从来不缺妹子……\n\n\n他来到了一棵妹子树下，发现每个妹子有一个美丽度……\n\n\n由于Gty很哲♂学，他只对美丽度大于某个值的妹子感兴趣。\n\n\n他想知道某个子树中美丽度大于 $k$ 的妹子个数。\n\n\n某个妹子的美丽度可能发生变化……\n\n\n树上可能会出现一只新的妹子……\n", "description": "维护一棵初始有 $n$ 个节点的有根树（根节点为 $1$），树上节点编号为 $1 \\sim n$，每个点有一个权值 $w_i$。\n\n\n支持以下操作：\n\n- `0 u x` 询问以 $u$ 为根的子树中，严格大于 $x$ 的值的个数。\n\n- `1 u x`  把 $u$ 节点的权值改成 $x$。\n\n- `2 u x`  添加一个编号为“当前树中节点数+1”的节点，其父节点为 $u$，其权值为 $x$。\n\n**本题强制在线。**   \n所有输入的 $u,x$ 都需要异或 $\\text{last}$ 才是真正的输入。   \n其中 $\\text{last}$ 为上一次询问的答案，定义初始 $\\text{last} = 0$。", "inputFormat": "第一行一个正整数 $n$，表示初始节点数。 \n\n接下来 $n-1$ 行，每行两个整数 $u,v$，为树上的一条无向边。\n\n接下来一行 $n$ 个整数 $w_i$，表示初始时每个节点的权值。\n\n接着一行一个正整数 $m$，表示操作个数。\n\n接下来 $m$ 行，每行三个整数 $\\text{op},u,x$，表示一次操作。\n", "outputFormat": "对每个 $\\text{op}=0$ 的操作，输出一行，包括一个整数，意义见题目描述。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 30000$，$1\\le u \\le n$，$0 \\le w_i,x < 2^{31}$。\n", "locale": "zh-CN"}}}
{"pid": "P2138", "type": "P", "difficulty": 3, "samples": [["abcdef\naxcyd", "1"], ["a\nb", "2"], ["abb\nbaa", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "动态规划 DP"], "title": "小Z的关系距离", "background": "", "description": "小 Z 学习了辩证唯物主义，知道了联系具有普遍性。他看着草稿纸上的字符串，就想挖掘它们之间的关系。\n\n小 Z 认为，对于两个字符串 $a,b$，如果它们各自删除不超过其自身长度一半的字符能够相等，则称 $a,b$ 有距离为 $1$ 的关系。而如果存在另一个字符串 $c$，它和 $a$ 有距离为 $1$ 的关系，和 $b$ 有距离为 $n$ 的关系，则称 $a,b$ 有距离为 $n + 1$ 的关系。\n\n现在小 Z 随机挑选出了两个小写字母字符串 $a,b$，想知道它们之间关系的最小距离，希望你帮帮他。", "inputFormat": "第一行包含一个字符串 $a$。\n\n第二行包含一个字符串 $b$。", "outputFormat": "第一行包含一个整数，表示 $a,b$ 之间关系的最小距离。\n", "hint": "对于 $30\\%$ 的数据，$a,b$ 由同一字母构成。\n\n对于 $100\\%$ 的数据，$1 \\leq |a|,|b| \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Relationship Distance", "background": "", "description": "Xiao Z has studied dialectical materialism and learned that connections are universal. Looking at the strings on his scratch paper, he wants to explore the relationships between them.\n\nXiao Z believes that for two strings $a,b$, if each can delete no more than half of its own length of characters to become equal, then $a,b$ are said to have a relationship with distance $1$. If there exists another string $c$ that has a distance of $1$ with $a$ and a distance of $n$ with $b$, then $a,b$ are said to have a relationship with distance $n + 1$.\n\nNow Xiao Z randomly selects two lowercase letter strings $a,b$ and wants to know the minimal relationship distance between them. Please help him.", "inputFormat": "The first line contains a string $a$.\n\nThe second line contains a string $b$.", "outputFormat": "The first line contains an integer indicating the minimal relationship distance between $a,b$.", "hint": "For $30\\%$ of the testdata, $a,b$ are composed of the same letter.\n\nFor $100\\%$ of the testdata, $1 \\leq |a|,|b| \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的关系距离", "background": "", "description": "小 Z 学习了辩证唯物主义，知道了联系具有普遍性。他看着草稿纸上的字符串，就想挖掘它们之间的关系。\n\n小 Z 认为，对于两个字符串 $a,b$，如果它们各自删除不超过其自身长度一半的字符能够相等，则称 $a,b$ 有距离为 $1$ 的关系。而如果存在另一个字符串 $c$，它和 $a$ 有距离为 $1$ 的关系，和 $b$ 有距离为 $n$ 的关系，则称 $a,b$ 有距离为 $n + 1$ 的关系。\n\n现在小 Z 随机挑选出了两个小写字母字符串 $a,b$，想知道它们之间关系的最小距离，希望你帮帮他。", "inputFormat": "第一行包含一个字符串 $a$。\n\n第二行包含一个字符串 $b$。", "outputFormat": "第一行包含一个整数，表示 $a,b$ 之间关系的最小距离。\n", "hint": "对于 $30\\%$ 的数据，$a,b$ 由同一字母构成。\n\n对于 $100\\%$ 的数据，$1 \\leq |a|,|b| \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P2139", "type": "P", "difficulty": 5, "samples": [["4\n6 4\n6 4\n6 4\n6 4\n1\n2 1\n", "0 1 1 0 0 1\n0 1 0 0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "小Z的掷骰游戏", "background": "", "description": "小 Z 得到了一种奇特的骰子（如下图所示），想要用它进行掷骰游戏。\n\n![](https://cdn.luogu.com.cn/upload/pic/1263.png)\n\n游戏很简单，小 Z 每次都从同样的位置将一个骰子竖直抛下，当骰子落到平面或另一个骰子上时停下来。然而，由于这是一种奇特的骰子，它还会继续翻滚和下落。这种骰子有以下特性：\n\n- 普通骰子可能往四个方向翻滚，而这种骰子只能往 $4,5,6$ 这三个面的方向翻滚。在下图所示的情况中，这种骰子只能往两个方向翻滚；\n\n![](https://cdn.luogu.com.cn/upload/pic/1264.png)\n\n- 这种骰子只有在翻滚后会导致其下落时才会翻滚（如下图所示），当有多个方向可以翻滚时，它会往数字最大的面的方向翻滚；\n\n![](https://cdn.luogu.com.cn/upload/pic/1265.png)\n\n- 这种骰子翻滚恰好 $90^\\circ$ 后会竖直下落，当落到平面或另一个骰子上时停下来（如下图中的 $B$ 和 $C$ 所示），然后继续翻滚和下落的过程。\n\n![](https://cdn.luogu.com.cn/upload/pic/1266.png)\n\n上图就是将 $4$ 个骰子均以上面是 $6$ 前面是 $4$ 的状态依次抛下的过程。\n\n现在小 Z 抛了 $n$ 个骰子，他想知道游戏结束后从上面看每个数字分别出现了多少次（如下图所示），希望你帮帮他。\n\n![](https://cdn.luogu.com.cn/upload/pic/1267.png)", "inputFormat": "每次多组数据，每组数据格式如下：\n\n第 $1$ 行，一个整数 $n$，表示抛了 $n$ 个骰子；\n\n第 $2\\sim n+1$ 行，每行包含两个整数 $t,f$，表示一个骰子以上面是 $t$ 前面是 $f$ 的状态抛下。", "outputFormat": "对于每组数据，输出一行，每行包含六个整数，表示游戏结束后从上面看每个数字分别出现的次数。\n", "hint": "本题有 $4$ 个点，每个点 $25$ 分。\n\n对于 $25\\%$ 的数据，$n=1$。\n\n对于另外 $25\\%$ 的数据，$n=2$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100$，不超过 $30$ 组数据。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Dice-Throwing Game", "background": "", "description": "Xiao Z obtained a peculiar die (as shown below) and wants to play a dice game with it.\n\n![](https://cdn.luogu.com.cn/upload/pic/1263.png)\n\nThe game is simple: each time, Xiao Z drops one die vertically from the same position. The die stops when it lands on the plane or on top of another die. However, because this is a special die, it will continue to roll and fall. This die has the following properties:\n\n- A normal die might roll in four directions, but this die can only roll toward the faces numbered $4, 5, 6$. In the situation shown below, this die can only roll in two directions.\n\n![](https://cdn.luogu.com.cn/upload/pic/1264.png)\n\n- This die rolls only if rolling will cause it to descend (as shown below). When there are multiple directions available, it rolls toward the direction with the largest face number.\n\n![](https://cdn.luogu.com.cn/upload/pic/1265.png)\n\n- After rolling exactly $90^\\circ$, the die falls vertically. When it lands on the plane or on another die (as $B$ and $C$ in the figure below), it stops, and then continues the process of rolling and falling.\n\n![](https://cdn.luogu.com.cn/upload/pic/1266.png)\n\nThe figure above shows the process of dropping $4$ dice in sequence, each initially with top face $6$ and front face $4$.\n\nNow Xiao Z has dropped $n$ dice. He wants to know, after the game ends, how many times each number appears on the top when viewed from above (as shown below). Please help him.\n\n![](https://cdn.luogu.com.cn/upload/pic/1267.png)", "inputFormat": "There are multiple test cases. Each test case is formatted as follows:\n\n- Line $1$: an integer $n$, the number of dice dropped.\n- Lines $2$ to $n+1$: each line contains two integers $t, f$, meaning one die is dropped with top face $t$ and front face $f$.", "outputFormat": "For each test case, output one line containing six integers, representing how many times each number appears on the top after the game ends, when viewed from above.", "hint": "This problem has $4$ test points, each worth $25$ points.\n\nFor $25\\%$ of the testdata, $n = 1$.\n\nFor another $25\\%$ of the testdata, $n = 2$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 100$, and there are at most $30$ test cases.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的掷骰游戏", "background": "", "description": "小 Z 得到了一种奇特的骰子（如下图所示），想要用它进行掷骰游戏。\n\n![](https://cdn.luogu.com.cn/upload/pic/1263.png)\n\n游戏很简单，小 Z 每次都从同样的位置将一个骰子竖直抛下，当骰子落到平面或另一个骰子上时停下来。然而，由于这是一种奇特的骰子，它还会继续翻滚和下落。这种骰子有以下特性：\n\n- 普通骰子可能往四个方向翻滚，而这种骰子只能往 $4,5,6$ 这三个面的方向翻滚。在下图所示的情况中，这种骰子只能往两个方向翻滚；\n\n![](https://cdn.luogu.com.cn/upload/pic/1264.png)\n\n- 这种骰子只有在翻滚后会导致其下落时才会翻滚（如下图所示），当有多个方向可以翻滚时，它会往数字最大的面的方向翻滚；\n\n![](https://cdn.luogu.com.cn/upload/pic/1265.png)\n\n- 这种骰子翻滚恰好 $90^\\circ$ 后会竖直下落，当落到平面或另一个骰子上时停下来（如下图中的 $B$ 和 $C$ 所示），然后继续翻滚和下落的过程。\n\n![](https://cdn.luogu.com.cn/upload/pic/1266.png)\n\n上图就是将 $4$ 个骰子均以上面是 $6$ 前面是 $4$ 的状态依次抛下的过程。\n\n现在小 Z 抛了 $n$ 个骰子，他想知道游戏结束后从上面看每个数字分别出现了多少次（如下图所示），希望你帮帮他。\n\n![](https://cdn.luogu.com.cn/upload/pic/1267.png)", "inputFormat": "每次多组数据，每组数据格式如下：\n\n第 $1$ 行，一个整数 $n$，表示抛了 $n$ 个骰子；\n\n第 $2\\sim n+1$ 行，每行包含两个整数 $t,f$，表示一个骰子以上面是 $t$ 前面是 $f$ 的状态抛下。", "outputFormat": "对于每组数据，输出一行，每行包含六个整数，表示游戏结束后从上面看每个数字分别出现的次数。\n", "hint": "本题有 $4$ 个点，每个点 $25$ 分。\n\n对于 $25\\%$ 的数据，$n=1$。\n\n对于另外 $25\\%$ 的数据，$n=2$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100$，不超过 $30$ 组数据。", "locale": "zh-CN"}}}
{"pid": "P2140", "type": "P", "difficulty": 4, "samples": [["3 3 33\n4 4 2\n2 9 6\n6 5 3", "4 1"], ["3 4 15\n1 2 1 2\n2 1 2 1\n1 2 1 2", "6 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "小Z的电力管制", "background": "", "description": "小 Z 在供电公司找到了一份工作，刚上班就遇到了一个棘手的任务。\n\n小 Z 所在的城市可以看成一个 $n \\times m$ 的网格，第 $i$ 行第 $j$ 列的格子有电力需求 $a_{i,j}$ 。然而，供电公司能够供应的电力 $u$ 小于每格的电力需求之和。为此，供电公司不得不将城市划分成若干个区域，每个区域轮流断电，使得断电后剩余区域的电力需求之和不超过供电公司能够供应的电力。\n\n为了方便起见，划分区域的方式很简单，每次将大区域横向或纵向划分成两个小区域，递归进行。\n\n供电公司想尽可能减少市民的不满，因此需要小 Z 计算出最多能划分成多少个区域以及在此前提下能够剩余的最多电力（一种划分的剩余电力为每次断电后剩余电力的最小值），希望你帮帮他。\n\n\n", "inputFormat": "第一行包含三个整数 $n ,m ,u$ 。\n\n接下来 $n$ 行，每行包含 $m$ 个整数，第 $i$ 行第 $j$ 个整数为 $a_{i,j}$，含义见题目描述。", "outputFormat": "共一行，包含两个整数，分别表示最多能划分成的区域数和在此前提下能够剩余的最多电力。\n", "hint": "对于 $60\\%$ 的数据，$1\\leq n ,m \\leq 10$ 。\n\n对于 $100\\%$ 的数据， $1 \\leq n,m \\leq 32,1 \\leq a_{i,j} \\leq 100$ 。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Power Control", "background": "", "description": "Xiao Z found a job at a power supply company and immediately encountered a tricky task.\n\nThe city where Xiao Z works can be modeled as an $n \\times m$ grid. The cell in row $i$ and column $j$ has a power demand $a_{i,j}$. However, the available supply $u$ from the company is less than the sum of the demands of all cells. Therefore, the company has to partition the city into several regions and rotate power outages across these regions, so that after cutting power to any one region, the sum of the demands of the remaining regions does not exceed the available supply.\n\nFor convenience, the partitioning is performed as follows: at each step, a (rectangular) region is split horizontally or vertically into two smaller (rectangular) regions, recursively.\n\nTo minimize public dissatisfaction, the company asks Xiao Z to compute:\n- the maximum possible number of regions, and\n- subject to achieving that maximum number of regions, the maximum possible remaining power, where for a given partition, its remaining power is defined as the minimum, over all outages, of $u$ minus the total demand of the regions that remain powered.", "inputFormat": "The first line contains three integers $n, m, u$.\n\nThe next $n$ lines each contain $m$ integers. On the $i$-th line, the $j$-th integer is $a_{i,j}$, as defined above.", "outputFormat": "Output one line containing two integers: the maximum number of regions and, subject to that, the maximum remaining power.", "hint": "Constraints:\n- For $60\\%$ of the testdata, $1 \\leq n, m \\leq 10$.\n- For $100\\%$ of the testdata, $1 \\leq n, m \\leq 32$, $1 \\leq a_{i,j} \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的电力管制", "background": "", "description": "小 Z 在供电公司找到了一份工作，刚上班就遇到了一个棘手的任务。\n\n小 Z 所在的城市可以看成一个 $n \\times m$ 的网格，第 $i$ 行第 $j$ 列的格子有电力需求 $a_{i,j}$ 。然而，供电公司能够供应的电力 $u$ 小于每格的电力需求之和。为此，供电公司不得不将城市划分成若干个区域，每个区域轮流断电，使得断电后剩余区域的电力需求之和不超过供电公司能够供应的电力。\n\n为了方便起见，划分区域的方式很简单，每次将大区域横向或纵向划分成两个小区域，递归进行。\n\n供电公司想尽可能减少市民的不满，因此需要小 Z 计算出最多能划分成多少个区域以及在此前提下能够剩余的最多电力（一种划分的剩余电力为每次断电后剩余电力的最小值），希望你帮帮他。\n\n\n", "inputFormat": "第一行包含三个整数 $n ,m ,u$ 。\n\n接下来 $n$ 行，每行包含 $m$ 个整数，第 $i$ 行第 $j$ 个整数为 $a_{i,j}$，含义见题目描述。", "outputFormat": "共一行，包含两个整数，分别表示最多能划分成的区域数和在此前提下能够剩余的最多电力。\n", "hint": "对于 $60\\%$ 的数据，$1\\leq n ,m \\leq 10$ 。\n\n对于 $100\\%$ 的数据， $1 \\leq n,m \\leq 32,1 \\leq a_{i,j} \\leq 100$ 。", "locale": "zh-CN"}}}
{"pid": "P2141", "type": "P", "difficulty": 2, "samples": [["4\n1 2 3 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2014", "NOIP 普及组", "枚举"], "title": "[NOIP 2014 普及组] 珠心算测验", "background": "NOIP2014 普及 T1", "description": "珠心算是一种通过在脑中模拟算盘变化来完成快速运算的一种计算技术。珠心算训练，既能够开发智力，又能够为日常生活带来很多便利，因而在很多学校得到普及。\n\n\n某学校的珠心算老师采用一种快速考察珠心算加法能力的测验方法。他随机生成一个正整数集合，集合中的数各不相同，然后要求学生回答：其中有多少个数，恰好等于集合中另外两个（不同的）数之和？\n\n\n最近老师出了一些测验题，请你帮忙求出答案。\n", "inputFormat": "共两行，第一行包含一个整数 $n$，表示测试题中给出的正整数个数。\n\n\n第二行有 $n$ 个正整数，每两个正整数之间用一个空格隔开，表示测试题中给出的正整数。\n", "outputFormat": "一个整数，表示测验题答案。\n", "hint": "【样例说明】\n\n\n由 $1+2=3,1+3=4$，故满足测试要求的答案为 $2$。  \n\n注意，加数和被加数必须是集合中的两个不同的数。\n\n\n【数据说明】\n\n\n对于 $100\\%$ 的数据，$3 \\leq n \\leq 100$，测验题给出的正整数大小不超过 $10,000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Junior] Mental Abacus Test", "background": "NOIP 2014 Junior T1.", "description": "Mental abacus is a calculation technique that performs fast computation by simulating abacus operations in the mind. Training in mental abacus can both develop intelligence and bring convenience to daily life, so it has become popular in many schools.\n\nA mental abacus teacher at a certain school uses a quick test method to assess addition skills. He randomly generates a set of positive integers, all distinct, and asks the students: how many numbers in the set are exactly equal to the sum of two other (different) numbers from the same set?\n\nRecently, the teacher prepared some test questions. Please help compute the answers.", "inputFormat": "There are two lines. The first line contains an integer $n$, the number of positive integers in the test.\n\nThe second line contains $n$ positive integers separated by single spaces, representing the given positive integers in the test.", "outputFormat": "Output a single integer, which is the answer to the test.", "hint": "[Sample Explanation]\n\nFrom $1+2=3,1+3=4$, so the number of values that meet the requirement is $2$.\n\nNote that the addends and the sum must be three numbers from the set, and the two addends must be different.\n\n[Constraints]\n\nFor $100\\%$ of the testdata, $3 \\leq n \\leq 100$, and each given positive integer does not exceed $10{,}000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 普及组] 珠心算测验", "background": "NOIP2014 普及 T1", "description": "珠心算是一种通过在脑中模拟算盘变化来完成快速运算的一种计算技术。珠心算训练，既能够开发智力，又能够为日常生活带来很多便利，因而在很多学校得到普及。\n\n\n某学校的珠心算老师采用一种快速考察珠心算加法能力的测验方法。他随机生成一个正整数集合，集合中的数各不相同，然后要求学生回答：其中有多少个数，恰好等于集合中另外两个（不同的）数之和？\n\n\n最近老师出了一些测验题，请你帮忙求出答案。\n", "inputFormat": "共两行，第一行包含一个整数 $n$，表示测试题中给出的正整数个数。\n\n\n第二行有 $n$ 个正整数，每两个正整数之间用一个空格隔开，表示测试题中给出的正整数。\n", "outputFormat": "一个整数，表示测验题答案。\n", "hint": "【样例说明】\n\n\n由 $1+2=3,1+3=4$，故满足测试要求的答案为 $2$。  \n\n注意，加数和被加数必须是集合中的两个不同的数。\n\n\n【数据说明】\n\n\n对于 $100\\%$ 的数据，$3 \\leq n \\leq 100$，测验题给出的正整数大小不超过 $10,000$。\n", "locale": "zh-CN"}}}
{"pid": "P2142", "type": "P", "difficulty": 2, "samples": [["2\n1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "高精度", "洛谷原创"], "title": "高精度减法", "background": "", "description": "给定两个正整数 $a,b$，求 $a-b$ 的值。", "inputFormat": "输入共两行，每行一个正整数，分别为 $a,b$。", "outputFormat": "输出一行一个整数，表示 $a-b$ 的值。\n\n如果 $a-b<0$，**请输出负号**。", "hint": "对于 $20\\%$ 的数据，$a,b$ 在`long long`类型的存储范围内；  \n对于 $100\\%$ 的数据，$0<a,b\\le 10^{10086}$。", "locale": "zh-CN", "translations": {"en": {"title": "High-Precision Subtraction", "background": "", "description": "High-precision subtraction.", "inputFormat": "Two integers $a,b$ (the second one may be larger than the first one).", "outputFormat": "The result (output a minus sign if it is negative).", "hint": "- $20\\%$ of the testdata: $a,b$ are within the range of long long.\n- $100\\%$ of the testdata: $0<a,b\\le 10^{10086}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "高精度减法", "background": "", "description": "给定两个正整数 $a,b$，求 $a-b$ 的值。", "inputFormat": "输入共两行，每行一个正整数，分别为 $a,b$。", "outputFormat": "输出一行一个整数，表示 $a-b$ 的值。\n\n如果 $a-b<0$，**请输出负号**。", "hint": "对于 $20\\%$ 的数据，$a,b$ 在`long long`类型的存储范围内；  \n对于 $100\\%$ 的数据，$0<a,b\\le 10^{10086}$。", "locale": "zh-CN"}}}
{"pid": "P2143", "type": "P", "difficulty": 6, "samples": [["4 6\r\n1 2 1\r\n1 3 1\r\n1 4 1\r\n2 3 2\r\n2 4 1\r\n3 4 1\r\n", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2010", "各省省选", "矩阵树定理", "江苏"], "title": "[JSOI2010] 巨额奖金", "background": "", "description": " NJ 市的快速发展得益于其便捷的交通。可是，随着经济的发展，大量的人进入 NJ 市， NJ 市的交通也承受着巨大的压力。现在， NJ 市正在筹划建设一个新型的交通枢纽，从而减轻交通的压力。\n\n NJ 市包含 $n$ 个区，有些区之间有双向的干道存在。新型交通枢纽建设在这些干道的基础上，将其中的部分干道改进为新型干道。改进后，干道能承受的压力可以比原来增加几十倍。为了和谐发展，在新型的交通枢纽建成后，要求任何两个区之间都可以只通过新型干道（直接或间接地）连接。政府已经预测出每条干道改进为新型干道的费用。政府希望建设新型交通枢纽的总费用最小，并以巨额奖金向市民征集方案。政府很快发现费用最小的方案不一定唯一，所以决定将奖金平分给每一种方案的第一个设计者，即如果一个人设计的费用是最小的而且前面没人和他设计出一模一样的方案，则他可获奖。\n\n Js08 被奖金深深的吸引，准备设计一种方案。可是，他发现方案可能会很多，如果最后获奖者太多，巨额的资金分到每个人头上的也不会太多。所以他决定先算一下可行的方案数是多少。\n", "inputFormat": "输入共 $m + 1$ 行。\n\n输入的第一行包含两个数 $n, m$，分别表示该市有多少个区和有多少条干道。\n\n接下来 $m$ 行，每行三个数 $a_i$、$b_i$、$c_i$，表示 $a_i$ 区和 $b_i$ 区之间有一条干道，如果改进需要 $c_i$ 的费用。", "outputFormat": "输出费用最小的方案有多少种。由于答案可能很大，你只要输出方案数除以 $31011$ 的模即可。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 100$，$1 \\leq m \\leq 1000$，$1 \\leq a _ i, b _ i \\leq n$，$1 \\leq c _ i \\leq 10 ^ 9$。", "locale": "zh-CN", "translations": {"en": {"title": "[JSOI2010] Massive Bonus", "background": "", "description": "The rapid development of NJ City benefits from its convenient transportation. However, as the economy grows, many people move into NJ City, and its transportation comes under heavy pressure. Now, NJ City is planning to build a new transportation hub to ease the pressure.\n\nNJ City contains $n$ districts, and some pairs of districts are connected by bidirectional trunk roads. The new transportation hub will be built on top of these trunk roads by upgrading some of them into new-type trunk roads. After the upgrade, a trunk road can bear dozens of times more pressure than before. For balanced development, once the new transportation hub is completed, any two districts must be connected using only new-type trunk roads (directly or indirectly). The government has estimated the cost of upgrading each trunk road into a new-type trunk road. It wants to minimize the total cost of building the new hub and solicits plans from citizens with a massive bonus. The government soon realized that minimum-cost plans may not be unique, so it will divide the bonus equally among the first proposer of each distinct plan; that is, if someone proposes a plan with minimum cost and nobody before them proposed exactly the same plan, they will receive a share.\n\nJs08 is deeply attracted by the bonus and prepares to design a plan. However, he finds there may be many plans, and if there are too many winners, the share for each person will not be much. So he decides to first compute how many feasible plans there are.", "inputFormat": "The input has $m + 1$ lines.\n\nThe first line contains two numbers $n, m$, representing how many districts the city has and how many trunk roads there are.\n\nThe next $m$ lines each contain three numbers $a _ i$, $b _ i$, $c _ i$, indicating that there is a trunk road between district $a _ i$ and district $b _ i$, and upgrading it costs $c _ i$.", "outputFormat": "Output how many minimum-cost plans there are. Since the answer may be large, output the number modulo $31011$.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 100$, $1 \\leq m \\leq 1000$, $1 \\leq a _ i, b _ i \\leq n$, $1 \\leq c _ i \\leq 10 ^ 9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JSOI2010] 巨额奖金", "background": "", "description": " NJ 市的快速发展得益于其便捷的交通。可是，随着经济的发展，大量的人进入 NJ 市， NJ 市的交通也承受着巨大的压力。现在， NJ 市正在筹划建设一个新型的交通枢纽，从而减轻交通的压力。\n\n NJ 市包含 $n$ 个区，有些区之间有双向的干道存在。新型交通枢纽建设在这些干道的基础上，将其中的部分干道改进为新型干道。改进后，干道能承受的压力可以比原来增加几十倍。为了和谐发展，在新型的交通枢纽建成后，要求任何两个区之间都可以只通过新型干道（直接或间接地）连接。政府已经预测出每条干道改进为新型干道的费用。政府希望建设新型交通枢纽的总费用最小，并以巨额奖金向市民征集方案。政府很快发现费用最小的方案不一定唯一，所以决定将奖金平分给每一种方案的第一个设计者，即如果一个人设计的费用是最小的而且前面没人和他设计出一模一样的方案，则他可获奖。\n\n Js08 被奖金深深的吸引，准备设计一种方案。可是，他发现方案可能会很多，如果最后获奖者太多，巨额的资金分到每个人头上的也不会太多。所以他决定先算一下可行的方案数是多少。\n", "inputFormat": "输入共 $m + 1$ 行。\n\n输入的第一行包含两个数 $n, m$，分别表示该市有多少个区和有多少条干道。\n\n接下来 $m$ 行，每行三个数 $a_i$、$b_i$、$c_i$，表示 $a_i$ 区和 $b_i$ 区之间有一条干道，如果改进需要 $c_i$ 的费用。", "outputFormat": "输出费用最小的方案有多少种。由于答案可能很大，你只要输出方案数除以 $31011$ 的模即可。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 100$，$1 \\leq m \\leq 1000$，$1 \\leq a _ i, b _ i \\leq n$，$1 \\leq c _ i \\leq 10 ^ 9$。", "locale": "zh-CN"}}}
{"pid": "P2144", "type": "P", "difficulty": 6, "samples": [["3\n", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "高精度", "递推", "2007", "各省省选", "福建"], "title": "[FJOI2007] 轮状病毒", "background": "", "description": "轮状病毒有很多变种。许多轮状病毒都是由一个轮状基产生。一个 $n$ 轮状基由圆环上 $n$ 个不同的基原子和圆心的一个核原子构成。$2$ 个原子之间的边表示这 $2$ 个原子之间的信息通道，如图 1 所示。\n\n$n$ 轮状病毒的产生规律是在 $n$ 轮状基中删除若干边，使各原子之间有唯一一条信息通道。例如，共有 $16$ 个不同的 $3$ 轮状病毒，如图 2 所示。\n\n给定 $n\\ (n\\le100)$，编程计算有多少个不同的 $n$ 轮状病毒。\n\n![](https://cdn.luogu.com.cn/upload/pic/1408.png)\n", "inputFormat": "第一行有 $1$ 个正整数 $n$。\n", "outputFormat": "共 $1$ 行，表示不同的 $n$ 轮状病毒数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[FJOI2007] Rotavirus", "background": "", "description": "There are many variants of rotaviruses. Many rotaviruses are generated from a wheel base. An $n$-wheel base consists of $n$ distinct base atoms on a circular ring and one core atom at the center. An edge between $2$ atoms represents the information channel between these $2$ atoms, as shown in Figure 1.\n\nThe generation rule of an $n$-rotavirus is to delete some edges in the $n$-wheel base so that there is a unique information path between any two atoms. For example, there are $16$ different $3$-rotaviruses, as shown in Figure 2.\n\nGiven $n\\ (n \\le 100)$, write a program to compute how many different $n$-rotaviruses there are.\n\n![](https://cdn.luogu.com.cn/upload/pic/1408.png)", "inputFormat": "The first line contains $1$ positive integer $n$.", "outputFormat": "Output $1$ line, the number of different $n$-rotaviruses.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[FJOI2007] 轮状病毒", "background": "", "description": "轮状病毒有很多变种。许多轮状病毒都是由一个轮状基产生。一个 $n$ 轮状基由圆环上 $n$ 个不同的基原子和圆心的一个核原子构成。$2$ 个原子之间的边表示这 $2$ 个原子之间的信息通道，如图 1 所示。\n\n$n$ 轮状病毒的产生规律是在 $n$ 轮状基中删除若干边，使各原子之间有唯一一条信息通道。例如，共有 $16$ 个不同的 $3$ 轮状病毒，如图 2 所示。\n\n给定 $n\\ (n\\le100)$，编程计算有多少个不同的 $n$ 轮状病毒。\n\n![](https://cdn.luogu.com.cn/upload/pic/1408.png)\n", "inputFormat": "第一行有 $1$ 个正整数 $n$。\n", "outputFormat": "共 $1$ 行，表示不同的 $n$ 轮状病毒数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2145", "type": "P", "difficulty": 7, "samples": [["9\n1 1 2 2 3 3 2 1 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2007", "各省省选", "江苏", "区间 DP"], "title": "[JSOI2007] 祖玛", "background": "管理员备注：本题可能是错题。\n\n2025.1.27 update：现在本题存在多项式解，但仍然无法在原数据范围下通过（UOJ941）。", "description": "这是一个流行在 Jsoi 的游戏，名称为祖玛。\n\n精致细腻的背景，外加神秘的印加音乐衬托，彷佛置身在古老的国度里面，进行一个神秘的游戏——这就是著名的祖玛游戏。祖玛游戏的主角是一只石青蛙，石青蛙会吐出各种颜色的珠子，珠子造型美丽，并且有着神秘的色彩。\n\n环绕着石青蛙的是载着珠子的轨道，各种颜色的珠子会沿着轨道往前滑动，石青蛙必需遏止珠子们滚进去轨道终点的洞里头，如何减少珠子呢？就得要靠石青蛙吐出的珠子与轨道上的珠子相结合，颜色相同者即可以消失得分！直到轨道上的珠子通通都被清干净为止。 或许你并不了解祖玛游戏。没关系。这里我们介绍一个简单版本的祖玛游戏规则。一条通道中有一些玻璃珠，每个珠子有各自的颜色，如图 1 所示。玩家可以做的是选择一种颜色的珠子（注意：颜色可以任选，这与真实游戏是不同的）射入某个位置。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1446.png) \n\n图 2 中玩家选择一颗蓝色珠子，射入图示的位置，于是得到一个图 3 的局面。\n\n当玩家射入一颗珠子后，如果射入的珠子与其他珠子组成了三颗以上连续相同颜色的珠子，这些珠子就会消失。例如，将一颗白色珠子射入图 4 中的位置，就会产生三颗颜色相同的白色珠子。这三颗珠子就会消失，于是得到图 5 的局面。\n\n需要注意的一点是，图 4 中的三颗连续的黄色珠子不会消失，因为并没有珠子射入其中。 珠子的消失还会产生连锁反应。当一串连续相同颜色的珠子消失后，如果消失位置左右的珠子颜色相同，并且长度大于 2，则可以继续消失。例如，图 6 中，射入一颗红色珠子后，产生了三颗连续的红色珠子。当红色珠子消失后，它左右都是白色的珠子，并且一共有四颗，于是白色珠子也消失了。之后，消失位置的左右都是蓝色珠子，共有三颗，于是蓝色珠子也消失。最终得到图 7 的状态。注意，图 7 中的三颗黄色珠子不会消失，因为蓝色珠子消失的位置一边是紫色珠子，另一边是黄色珠子，颜色不同。\n\n除了上述的情况，没有其他的方法可以消去珠子。现在，我们有一排珠子，需要你去消除。对于每一轮，你可以自由选择不同颜色的珠子，射入任意的位置。你的任务是射出最少的珠子，将全部珠子消去。\n", "inputFormat": "第一行一个整数 $n(n \\le 500)$，表示珠子的个数 第二行 $n$ 个整数（32 位整数范围内），用空格分割，每个整数表示一种颜色的珠子。\n", "outputFormat": "一个整数，表示最少需要射出的珠子个数。\n", "hint": "\n\n------------\n2024/2/13 添加 2 组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "[JSOI2007] Zuma", "background": "Admin note: This problem may be flawed.\n\n2025-01-27 update: A polynomial-time solution now exists, but it still cannot pass under the original constraints (UOJ941).", "description": "This is a game popular in JSOI, called Zuma.\n\nWith its delicate visuals and mysterious Inca-style music, Zuma feels like a mystical game set in an ancient land. The protagonist is a stone frog that spits colored beads. The beads are beautifully shaped and have mysterious colors.\n\nAround the stone frog is a track carrying beads of different colors that slide forward along the track. The stone frog must stop the beads from rolling into the hole at the end of the track. How can we reduce the beads? By letting the bead shot by the frog combine with the beads on the track: if the colors match, they disappear and score points! The goal is to clear all the beads on the track. If you are not familiar with Zuma, that is fine. Here we introduce a simplified version of the rules. There is a row of glass beads in a channel, each with its own color, as shown in Figure 1. The player can choose a bead of any color (note: the color can be chosen freely; this differs from the real game) and shoot it into any position.\n\n![](https://cdn.luogu.com.cn/upload/pic/1446.png)\n\nIn Figure 2, the player chooses a blue bead and shoots it into the indicated position, resulting in the situation in Figure 3.\n\nAfter a bead is shot, if the inserted bead forms a sequence of three or more consecutive beads of the same color, those beads disappear. For example, inserting a white bead at the position in Figure 4 creates three consecutive white beads. These three beads then disappear, leading to the situation in Figure 5.\n\nNote that the three consecutive yellow beads in Figure 4 do not disappear because no bead was inserted into them. Disappearance can trigger chain reactions. When a run of identical-colored beads disappears, if the beads immediately to the left and right of the vanished segment are of the same color and their combined length is greater than 2, they also disappear. For example, in Figure 6, after inserting a red bead, three consecutive red beads are formed. When the red beads disappear, both sides are white beads, four in total, so the white beads disappear as well. Afterwards, both sides are blue beads, three in total, so the blue beads also disappear. The final state is shown in Figure 7. Note that the three yellow beads in Figure 7 do not disappear because on the two sides of where the blue beads vanished there are purple beads on one side and yellow beads on the other, which are different colors.\n\nOther than the situations described above, there is no other way to eliminate beads. Now, given a row of beads, you need to clear them. On each move, you may freely choose the color of the bead and insert it at any position. Your task is to shoot the fewest number of beads to remove all beads.", "inputFormat": "The first line contains an integer $n(n \\le 500)$, the number of beads.  \nThe second line contains $n$ integers (within the 32-bit integer range), separated by spaces; each integer represents the color of a bead.", "outputFormat": "Output a single integer: the minimum number of beads that must be shot.", "hint": "------------  \n2024/2/13: Added 2 sets of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JSOI2007] 祖玛", "background": "管理员备注：本题可能是错题。\n\n2025.1.27 update：现在本题存在多项式解，但仍然无法在原数据范围下通过（UOJ941）。", "description": "这是一个流行在 Jsoi 的游戏，名称为祖玛。\n\n精致细腻的背景，外加神秘的印加音乐衬托，彷佛置身在古老的国度里面，进行一个神秘的游戏——这就是著名的祖玛游戏。祖玛游戏的主角是一只石青蛙，石青蛙会吐出各种颜色的珠子，珠子造型美丽，并且有着神秘的色彩。\n\n环绕着石青蛙的是载着珠子的轨道，各种颜色的珠子会沿着轨道往前滑动，石青蛙必需遏止珠子们滚进去轨道终点的洞里头，如何减少珠子呢？就得要靠石青蛙吐出的珠子与轨道上的珠子相结合，颜色相同者即可以消失得分！直到轨道上的珠子通通都被清干净为止。 或许你并不了解祖玛游戏。没关系。这里我们介绍一个简单版本的祖玛游戏规则。一条通道中有一些玻璃珠，每个珠子有各自的颜色，如图 1 所示。玩家可以做的是选择一种颜色的珠子（注意：颜色可以任选，这与真实游戏是不同的）射入某个位置。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1446.png) \n\n图 2 中玩家选择一颗蓝色珠子，射入图示的位置，于是得到一个图 3 的局面。\n\n当玩家射入一颗珠子后，如果射入的珠子与其他珠子组成了三颗以上连续相同颜色的珠子，这些珠子就会消失。例如，将一颗白色珠子射入图 4 中的位置，就会产生三颗颜色相同的白色珠子。这三颗珠子就会消失，于是得到图 5 的局面。\n\n需要注意的一点是，图 4 中的三颗连续的黄色珠子不会消失，因为并没有珠子射入其中。 珠子的消失还会产生连锁反应。当一串连续相同颜色的珠子消失后，如果消失位置左右的珠子颜色相同，并且长度大于 2，则可以继续消失。例如，图 6 中，射入一颗红色珠子后，产生了三颗连续的红色珠子。当红色珠子消失后，它左右都是白色的珠子，并且一共有四颗，于是白色珠子也消失了。之后，消失位置的左右都是蓝色珠子，共有三颗，于是蓝色珠子也消失。最终得到图 7 的状态。注意，图 7 中的三颗黄色珠子不会消失，因为蓝色珠子消失的位置一边是紫色珠子，另一边是黄色珠子，颜色不同。\n\n除了上述的情况，没有其他的方法可以消去珠子。现在，我们有一排珠子，需要你去消除。对于每一轮，你可以自由选择不同颜色的珠子，射入任意的位置。你的任务是射出最少的珠子，将全部珠子消去。\n", "inputFormat": "第一行一个整数 $n(n \\le 500)$，表示珠子的个数 第二行 $n$ 个整数（32 位整数范围内），用空格分割，每个整数表示一种颜色的珠子。\n", "outputFormat": "一个整数，表示最少需要射出的珠子个数。\n", "hint": "\n\n------------\n2024/2/13 添加 2 组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P2146", "type": "P", "difficulty": 5, "samples": [["7\n0 0 0 1 1 5\n5\ninstall 5\ninstall 6\nuninstall 1\ninstall 4\nuninstall 0", "3\n1\n3\n2\n3"], ["10\n0 1 2 1 3 0 0 3 2\n10\ninstall 0\ninstall 3\nuninstall 2\ninstall 7\ninstall 5\ninstall 9\nuninstall 9\ninstall 4\ninstall 1\ninstall 9", "1\n3\n2\n1\n3\n1\n1\n1\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["树形数据结构", "2015", "线段树", "颜色段均摊（珂朵莉树 ODT）", "NOI", "深度优先搜索 DFS", "树链剖分"], "title": "[NOI2015] 软件包管理器", "background": "Linux 用户和 OSX 用户一定对软件包管理器不会陌生。通过软件包管理器，你可以通过一行命令安装某一个软件包，然后软件包管理器会帮助你从软件源下载软件包，同时自动解决所有的依赖（即下载安装这个软件包的安装所依赖的其它软件包），完成所有的配置。Debian/Ubuntu 使用的 apt-get，Fedora/CentOS 使用的 yum，以及 OSX 下可用的 homebrew 都是优秀的软件包管理器。", "description": "你决定设计你自己的软件包管理器。不可避免地，你要解决软件包之间的依赖问题。如果软件包 $a$ 依赖软件包 $b$，那么安装软件包 $a$ 以前，必须先安装软件包 $b$。同时，如果想要卸载软件包 $b$，则必须卸载软件包 $a$。\n\n现在你已经获得了所有的软件包之间的依赖关系。而且，由于你之前的工作，除 $0$ 号软件包以外，在你的管理器当中的软件包都会依赖一个且仅一个软件包，而 $0$ 号软件包不依赖任何一个软件包。且依赖关系不存在环（即不会存在 $m$ 个软件包 $a_1,a_2, \\dots , a_m$，对于 $i<m$，$a_i$ 依赖 $a_{i+1}$，而 $a_m$ 依赖 $a_1$ 的情况）。\n\n现在你要为你的软件包管理器写一个依赖解决程序。根据反馈，用户希望在安装和卸载某个软件包时，快速地知道这个操作实际上会改变多少个软件包的安装状态（即安装操作会安装多少个未安装的软件包，或卸载操作会卸载多少个已安装的软件包），你的任务就是实现这个部分。\n\n注意，安装一个已安装的软件包，或卸载一个未安装的软件包，都不会改变任何软件包的安装状态，即在此情况下，改变安装状态的软件包数为 $0$。", "inputFormat": "第一行一个正整数 $n$，表示软件包个数，从 $0$ 开始编号。  \n第二行有 $n-1$ 个整数，第 $i$ 个表示 $i$ 号软件包依赖的软件包编号。  \n然后一行一个正整数 $q$，表示操作个数，格式如下：  \n\n- `install x` 表示安装 $x$ 号软件包\n- `uninstall x` 表示卸载 $x$ 号软件包\n\n一开始所有软件包都是未安装的。  \n\n对于每个操作，你需要输出这步操作会改变多少个软件包的安装状态，随后应用这个操作（即改变你维护的安装状态）。", "outputFormat": "输出 $q$ 行，每行一个整数，表示每次询问的答案。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1504.png)  \n一开始所有软件包都处于未安装状态。\n\n安装 $5$ 号软件包，需要安装 $0,1,5$ 三个软件包。\n\n之后安装 $6$ 号软件包，只需要安装 $6$ 号软件包。此时安装了 $0,1,5,6$ 四个软件包。\n\n卸载 $1$ 号软件包需要卸载 $1,5,6$ 三个软件包。此时只有 $0$ 号软件包还处于安装状态。\n\n之后安装 $4$ 号软件包，需要安装 $1,4$ 两个软件包。此时 $0,1,4$ 处在安装状态。最后，卸载 $0$ 号软件包会卸载所有的软件包。\n\n**【数据范围】**\n\n::cute-table{tuack}\n\n| 测试点编号 | $$n$$ 的规模      | $$q$$ 的规模      | 备注 |\n|:----------:|:----------------:|:----------------:|:----:|\n| $1$          | ${n = 5{,}000}$  | ${q = 5{,}000}$  |      |\n| $2$          | ^                | ^                | ^    |\n| $3$          | ${n = 100{,}000}$| ${q = 100{,}000}$| 数据不包含卸载操作 |\n| $4$          | ^                | ^                | ^    |\n| $5$          | ${n = 100{,}000}$| ${q = 100{,}000}$ | 编号为 $i$ 的软件包所依赖的软件包编号在 $[0,i - 1]$ 内均匀随机，每次执行操作的软件包编号在 $[0,n-1]$ 内均匀随机 |\n| $6$          | ^                | ^                | ^ |\n| $7$          | ^                | ^                | ^    |\n| $8$          | ^                | ^                | ^    |\n| $9$          | ${n = 100{,}000}$| ${q = 100{,}000}$ |     |\n| $10$         | ^                | ^                | ^   |\n| $11$         | ^                | ^                | ^    |\n| $12$         | ^                | ^                | ^    |\n| $13$         | ^                | ^                | ^    |\n| $14$         | ^                | ^                | ^    |\n| $15$         | ^                | ^                | ^    |\n| $16$         | ^                | ^                | ^    |\n| $17$         | ^                | ^                | ^    |\n| $18$         | ^                | ^                | ^    |\n| $19$         | ^                | ^                | ^    |\n| $20$         | ^                | ^                | ^    |", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2015] Software Package Manager", "background": "Linux users and OSX users are certainly familiar with package managers. With a package manager, you can install a package with a single command. The package manager will download the package from repositories and automatically resolve all dependencies (that is, download and install other packages required for this package), and finish all configurations. apt-get for Debian/Ubuntu, yum for Fedora/CentOS, and homebrew on OSX are all excellent package managers.", "description": "You decide to design your own package manager. Inevitably, you must handle dependencies between packages. If package $a$ depends on package $b$, then before installing package $a$, you must first install package $b$. Likewise, if you want to uninstall package $b$, you must uninstall package $a$.\n\nNow you have obtained all dependency relations among packages. Moreover, due to your previous design, every package in your manager except package $0$ depends on exactly one package, and package $0$ depends on none. The dependency relations contain no cycles (i.e., there do not exist $m$ packages $a_1, a_2, \\dots, a_m$ such that for $i < m$, $a_i$ depends on $a_{i+1}$, and $a_m$ depends on $a_1$).\n\nYou now need to write a dependency resolver for your package manager. According to user feedback, when installing or uninstalling a package, users want to quickly know how many packages will actually change their installation state as a result of the operation (that is, how many currently uninstalled packages will be installed by an install operation, or how many currently installed packages will be uninstalled by an uninstall operation). Your task is to implement this part.\n\nNote that installing an already installed package, or uninstalling a package that is not installed, will not change any installation state. In this case, the number of packages whose installation state changes is $0$.", "inputFormat": "The first line contains a positive integer $n$, the number of packages, numbered starting from $0$.  \nThe second line contains $n - 1$ integers; the $i$-th integer denotes the package ID that package $i$ depends on.  \nThen a line with a positive integer $q$ follows, denoting the number of operations, in the following format:\n\n- `install x` means install package $x$.\n- `uninstall x` means uninstall package $x$.\n\nInitially, all packages are not installed.\n\nFor each operation, you need to output how many packages will change their installation state because of this step, and then apply the operation (i.e., update the installation states you maintain).", "outputFormat": "Output $q$ lines, each containing an integer, which is the answer for each query.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1504.png)  \nInitially, all packages are not installed.\n\nTo install package $5$, you need to install packages $0, 1, 5$.\n\nAfter that, installing package $6$ only requires installing package $6$. At this point, packages $0, 1, 5, 6$ are installed.\n\nUninstalling package $1$ requires uninstalling packages $1, 5, 6$. Now only package $0$ remains installed.\n\nNext, installing package $4$ requires installing packages $1, 4$. Now packages $0, 1, 4$ are installed. Finally, uninstalling package $0$ will uninstall all packages.\n\n**Constraints**\n\n::cute-table{tuack}\n\n| Test point ID | $$n$$ size          | $$q$$ size          | Notes |\n|:-------------:|:-------------------:|:-------------------:|:-----:|\n| $1$           | ${n = 5{,}000}$     | ${q = 5{,}000}$     |       |\n| $2$           | ^                   | ^                   | ^     |\n| $3$           | ${n = 100{,}000}$   | ${q = 100{,}000}$   | testdata does not include uninstall operations |\n| $4$           | ^                   | ^                   | ^     |\n| $5$           | ${n = 100{,}000}$   | ${q = 100{,}000}$   | For package $i$, the ID of the package it depends on is uniformly random in $[0, i - 1]$, and the package ID in each operation is uniformly random in $[0, n - 1]$. |\n| $6$           | ^                   | ^                   | ^ |\n| $7$           | ^                   | ^                   | ^     |\n| $8$           | ^                   | ^                   | ^     |\n| $9$           | ${n = 100{,}000}$   | ${q = 100{,}000}$   |       |\n| $10$          | ^                   | ^                   | ^     |\n| $11$          | ^                   | ^                   | ^     |\n| $12$          | ^                   | ^                   | ^     |\n| $13$          | ^                   | ^                   | ^     |\n| $14$          | ^                   | ^                   | ^     |\n| $15$          | ^                   | ^                   | ^     |\n| $16$          | ^                   | ^                   | ^     |\n| $17$          | ^                   | ^                   | ^     |\n| $18$          | ^                   | ^                   | ^     |\n| $19$          | ^                   | ^                   | ^     |\n| $20$          | ^                   | ^                   | ^     |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2015] 软件包管理器", "background": "Linux 用户和 OSX 用户一定对软件包管理器不会陌生。通过软件包管理器，你可以通过一行命令安装某一个软件包，然后软件包管理器会帮助你从软件源下载软件包，同时自动解决所有的依赖（即下载安装这个软件包的安装所依赖的其它软件包），完成所有的配置。Debian/Ubuntu 使用的 apt-get，Fedora/CentOS 使用的 yum，以及 OSX 下可用的 homebrew 都是优秀的软件包管理器。", "description": "你决定设计你自己的软件包管理器。不可避免地，你要解决软件包之间的依赖问题。如果软件包 $a$ 依赖软件包 $b$，那么安装软件包 $a$ 以前，必须先安装软件包 $b$。同时，如果想要卸载软件包 $b$，则必须卸载软件包 $a$。\n\n现在你已经获得了所有的软件包之间的依赖关系。而且，由于你之前的工作，除 $0$ 号软件包以外，在你的管理器当中的软件包都会依赖一个且仅一个软件包，而 $0$ 号软件包不依赖任何一个软件包。且依赖关系不存在环（即不会存在 $m$ 个软件包 $a_1,a_2, \\dots , a_m$，对于 $i<m$，$a_i$ 依赖 $a_{i+1}$，而 $a_m$ 依赖 $a_1$ 的情况）。\n\n现在你要为你的软件包管理器写一个依赖解决程序。根据反馈，用户希望在安装和卸载某个软件包时，快速地知道这个操作实际上会改变多少个软件包的安装状态（即安装操作会安装多少个未安装的软件包，或卸载操作会卸载多少个已安装的软件包），你的任务就是实现这个部分。\n\n注意，安装一个已安装的软件包，或卸载一个未安装的软件包，都不会改变任何软件包的安装状态，即在此情况下，改变安装状态的软件包数为 $0$。", "inputFormat": "第一行一个正整数 $n$，表示软件包个数，从 $0$ 开始编号。  \n第二行有 $n-1$ 个整数，第 $i$ 个表示 $i$ 号软件包依赖的软件包编号。  \n然后一行一个正整数 $q$，表示操作个数，格式如下：  \n\n- `install x` 表示安装 $x$ 号软件包\n- `uninstall x` 表示卸载 $x$ 号软件包\n\n一开始所有软件包都是未安装的。  \n\n对于每个操作，你需要输出这步操作会改变多少个软件包的安装状态，随后应用这个操作（即改变你维护的安装状态）。", "outputFormat": "输出 $q$ 行，每行一个整数，表示每次询问的答案。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1504.png)  \n一开始所有软件包都处于未安装状态。\n\n安装 $5$ 号软件包，需要安装 $0,1,5$ 三个软件包。\n\n之后安装 $6$ 号软件包，只需要安装 $6$ 号软件包。此时安装了 $0,1,5,6$ 四个软件包。\n\n卸载 $1$ 号软件包需要卸载 $1,5,6$ 三个软件包。此时只有 $0$ 号软件包还处于安装状态。\n\n之后安装 $4$ 号软件包，需要安装 $1,4$ 两个软件包。此时 $0,1,4$ 处在安装状态。最后，卸载 $0$ 号软件包会卸载所有的软件包。\n\n**【数据范围】**\n\n::cute-table{tuack}\n\n| 测试点编号 | $$n$$ 的规模      | $$q$$ 的规模      | 备注 |\n|:----------:|:----------------:|:----------------:|:----:|\n| $1$          | ${n = 5{,}000}$  | ${q = 5{,}000}$  |      |\n| $2$          | ^                | ^                | ^    |\n| $3$          | ${n = 100{,}000}$| ${q = 100{,}000}$| 数据不包含卸载操作 |\n| $4$          | ^                | ^                | ^    |\n| $5$          | ${n = 100{,}000}$| ${q = 100{,}000}$ | 编号为 $i$ 的软件包所依赖的软件包编号在 $[0,i - 1]$ 内均匀随机，每次执行操作的软件包编号在 $[0,n-1]$ 内均匀随机 |\n| $6$          | ^                | ^                | ^ |\n| $7$          | ^                | ^                | ^    |\n| $8$          | ^                | ^                | ^    |\n| $9$          | ${n = 100{,}000}$| ${q = 100{,}000}$ |     |\n| $10$         | ^                | ^                | ^   |\n| $11$         | ^                | ^                | ^    |\n| $12$         | ^                | ^                | ^    |\n| $13$         | ^                | ^                | ^    |\n| $14$         | ^                | ^                | ^    |\n| $15$         | ^                | ^                | ^    |\n| $16$         | ^                | ^                | ^    |\n| $17$         | ^                | ^                | ^    |\n| $18$         | ^                | ^                | ^    |\n| $19$         | ^                | ^                | ^    |\n| $20$         | ^                | ^                | ^    |", "locale": "zh-CN"}}}
{"pid": "P2147", "type": "P", "difficulty": 6, "samples": [["200 5\nQuery 123 127\nConnect 123 127\nQuery 123 127\nDestroy 127 123\nQuery 123 127", "No\nYes\nNo\n"], ["3 5\nConnect 1 2\nConnect 3 1\nQuery 2 3\nDestroy 1 3\nQuery 2 3", "Yes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "平衡树", "山东", "动态树 LCT", "线段树分治"], "title": "[SDOI2008] 洞穴勘测", "background": null, "description": "辉辉热衷于洞穴勘测。\n\n某天，他按照地图来到了一片被标记为 JSZX 的洞穴群地区。经过初步勘测，辉辉发现这片区域由 $n$ 个洞穴（分别编号为 $1$ 到 $n$）以及若干通道组成，并且每条通道连接了恰好两个洞穴。假如两个洞穴可以通过一条或者多条通道按一定顺序连接起来，那么这两个洞穴就是连通的，按顺序连接在一起的这些通道则被称之为这两个洞穴之间的一条路径。洞穴都十分坚固无法破坏，然而通道不太稳定，时常因为外界影响而发生改变，比如，根据有关仪器的监测结果，$123$ 号洞穴和 $127$ 号洞穴之间有时会出现一条通道，有时这条通道又会因为某种稀奇古怪的原因被毁。\n\n辉辉有一台监测仪器可以实时将通道的每一次改变状况在辉辉手边的终端机上显示：\n\n- 如果监测到洞穴 $u$ 和洞穴 $v$ 之间出现了一条通道（**保证原来没有**），终端机上会显示一条指令 `Connect u v`。\n- 如果监测到洞穴 $u$ 和洞穴 $v$ 之间的通道被毁（**保证原来存在**），终端机上会显示一条指令 `Destroy u v`。\n\n经过长期的艰苦卓绝的手工推算，辉辉发现一个奇怪的现象：无论通道怎么改变，任意时刻任意两个洞穴之间至多只有一条路径。\n\n因而，辉辉坚信这是由于某种本质规律的支配导致的。因而，辉辉更加夜以继日地坚守在终端机之前，试图通过通道的改变情况来研究这条本质规律。然而，终于有一天，辉辉在堆积成山的演算纸中崩溃了……他把终端机往地面一砸（终端机也足够坚固无法破坏），转而求助于你，说道：“你老兄把这程序写写吧。”\n\n辉辉希望能随时通过终端机发出指令 `Query u v`，向监测仪询问此时洞穴 $u$ 和洞穴 $v$ 是否连通。现在你要为他编写程序回答每一次询问。已知在第一条指令显示之前，JSZX 洞穴群中没有任何通道存在。", "inputFormat": "第一行为两个正整数 $n$ 和 $m$，分别表示洞穴的个数和终端机上出现过的指令的个数。\n\n以下 $m$ 行，依次表示终端机上出现的各条指令：\n\n- 每行开头是一个表示指令种类的字符串 $S$。\n- 之后有两个整数 $u,v$，分别表示两个洞穴的编号。", "outputFormat": "对每个 `Query` 指令，输出洞穴 $u$ 和洞穴 $v$ 是否互相连通：连通输出 `Yes`，不连通输出 `No`。", "hint": "对于 $(i \\times 10)\\%$ 的数据，$n \\le i \\times 10^3$，$m \\le 2i \\times 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^4$，$1 \\le m \\le 2 \\times 10^5$，$1 \\le u,v \\le n$，所有指令都是合法的。\n\n本题 I/O 规模比较大，建议 C/C++ 选手使用 `scanf` 和 `printf` 进行 I/O 操作以免超时。\n\n---\n\n@namespace_std 于 2019.12.1 添加一组 Hack 数据", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Cave Exploration", "background": "", "description": "Huihui is enthusiastic about cave exploration.\n\nOne day, following a map, he arrived at an area marked as JSZX, which is a cluster of caves. After a preliminary survey, Huihui found that this area consists of $n$ caves (numbered from $1$ to $n$) and several tunnels, where each tunnel connects exactly two caves. If two caves can be connected in order by one or more tunnels, then these two caves are said to be connected, and the sequence of tunnels connected in order is called a path between the two caves. The caves are very solid and cannot be destroyed, but the tunnels are unstable and often change due to external influences. For example, according to the monitoring device, sometimes a tunnel appears between cave $123$ and cave $127$, and sometimes this tunnel is destroyed for some odd reason.\n\nHuihui has a monitoring device that can display every change to the tunnels on the terminal at his side:\n\n- If a tunnel appears between cave $u$ and cave $v$ (guaranteed that it did not previously exist), the terminal displays the instruction `Connect u v`.\n- If the tunnel between cave $u$ and cave $v$ is destroyed (guaranteed that it previously existed), the terminal displays the instruction `Destroy u v`.\n\nAfter long and arduous manual calculations, Huihui discovered a strange phenomenon: no matter how the tunnels change, at any time there is at most one path between any two caves.\n\nTherefore, he is convinced that this is governed by some essential rule. He kept working day and night in front of the terminal, trying to study this rule through the changes in the tunnels. However, one day he finally collapsed among the piles of scratch paper... He smashed the terminal onto the ground (the terminal is also solid and cannot be destroyed) and turned to you for help, saying: “Please write this program for me.”\n\nHuihui wants to be able to issue the instruction `Query u v` at any time to ask the monitor whether cave $u$ and cave $v$ are currently connected. Now you need to write a program to answer each query. It is known that before the first instruction appears, there are no tunnels in the JSZX cave cluster.", "inputFormat": "The first line contains two positive integers $n$ and $m$, representing the number of caves and the number of instructions shown on the terminal.\n\nThe following $m$ lines describe the instructions that appear on the terminal in order:\n- Each line begins with a string $S$ indicating the type of instruction.\n- Then there are two integers $u, v$, representing the indices of the two caves.", "outputFormat": "For each `Query` instruction, output whether cave $u$ and cave $v$ are connected: output `Yes` if connected, otherwise output `No`.", "hint": "Constraints:\n- For $ (i \\times 10)\\% $ of the testdata, $n \\le i \\times 10^3$, $m \\le 2 i \\times 10^4$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^4$, $1 \\le m \\le 2 \\times 10^5$, $1 \\le u, v \\le n$, and all instructions are valid.\n\nThe I/O scale is large. It is recommended that C/C++ users use `scanf` and `printf` for I/O to avoid timeouts.\n\n@namespace_std added a set of hack testdata on 2019.12.1.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 洞穴勘测", "background": null, "description": "辉辉热衷于洞穴勘测。\n\n某天，他按照地图来到了一片被标记为 JSZX 的洞穴群地区。经过初步勘测，辉辉发现这片区域由 $n$ 个洞穴（分别编号为 $1$ 到 $n$）以及若干通道组成，并且每条通道连接了恰好两个洞穴。假如两个洞穴可以通过一条或者多条通道按一定顺序连接起来，那么这两个洞穴就是连通的，按顺序连接在一起的这些通道则被称之为这两个洞穴之间的一条路径。洞穴都十分坚固无法破坏，然而通道不太稳定，时常因为外界影响而发生改变，比如，根据有关仪器的监测结果，$123$ 号洞穴和 $127$ 号洞穴之间有时会出现一条通道，有时这条通道又会因为某种稀奇古怪的原因被毁。\n\n辉辉有一台监测仪器可以实时将通道的每一次改变状况在辉辉手边的终端机上显示：\n\n- 如果监测到洞穴 $u$ 和洞穴 $v$ 之间出现了一条通道（**保证原来没有**），终端机上会显示一条指令 `Connect u v`。\n- 如果监测到洞穴 $u$ 和洞穴 $v$ 之间的通道被毁（**保证原来存在**），终端机上会显示一条指令 `Destroy u v`。\n\n经过长期的艰苦卓绝的手工推算，辉辉发现一个奇怪的现象：无论通道怎么改变，任意时刻任意两个洞穴之间至多只有一条路径。\n\n因而，辉辉坚信这是由于某种本质规律的支配导致的。因而，辉辉更加夜以继日地坚守在终端机之前，试图通过通道的改变情况来研究这条本质规律。然而，终于有一天，辉辉在堆积成山的演算纸中崩溃了……他把终端机往地面一砸（终端机也足够坚固无法破坏），转而求助于你，说道：“你老兄把这程序写写吧。”\n\n辉辉希望能随时通过终端机发出指令 `Query u v`，向监测仪询问此时洞穴 $u$ 和洞穴 $v$ 是否连通。现在你要为他编写程序回答每一次询问。已知在第一条指令显示之前，JSZX 洞穴群中没有任何通道存在。", "inputFormat": "第一行为两个正整数 $n$ 和 $m$，分别表示洞穴的个数和终端机上出现过的指令的个数。\n\n以下 $m$ 行，依次表示终端机上出现的各条指令：\n\n- 每行开头是一个表示指令种类的字符串 $S$。\n- 之后有两个整数 $u,v$，分别表示两个洞穴的编号。", "outputFormat": "对每个 `Query` 指令，输出洞穴 $u$ 和洞穴 $v$ 是否互相连通：连通输出 `Yes`，不连通输出 `No`。", "hint": "对于 $(i \\times 10)\\%$ 的数据，$n \\le i \\times 10^3$，$m \\le 2i \\times 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^4$，$1 \\le m \\le 2 \\times 10^5$，$1 \\le u,v \\le n$，所有指令都是合法的。\n\n本题 I/O 规模比较大，建议 C/C++ 选手使用 `scanf` 和 `printf` 进行 I/O 操作以免超时。\n\n---\n\n@namespace_std 于 2019.12.1 添加一组 Hack 数据", "locale": "zh-CN"}}}
{"pid": "P2148", "type": "P", "difficulty": 5, "samples": [["2\n4\n1 2 3 1\n6\n1 1 1 1 1 1\n", "YES\nNO\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["博弈论", "2009", "各省省选", "山东", "枚举", "位运算", "SG 函数"], "title": "[SDOI2009] E&D", "background": "", "description": "小 E 与小 W 进行一项名为 `E&D` 游戏。\n\n游戏的规则如下：桌子上有 $2n$ 堆石子，编号为 $1 \\sim 2n$。其中，为了方便起见，我们将第 $2k-1$ 堆与第 $2k$ 堆（$1 \\le k \\le n$）视为同一组。第 $i$ 堆的石子个数用一个正整数 $S_i$ 表示。\n\n一次分割操作指的是，从桌子上任取一堆石子，将其移走。然后分割它同一组的另一堆石子，从中取出若干个石子放在被移走的位置，组成新的一堆。操作完成后，所有堆的石子数必须保证大于 $0$。显然，被分割的一堆的石子数至少要为 $2$。两个人轮流进行分割操作。如果轮到某人进行操作时，所有堆的石子数均为 $1$，则此时没有石子可以操作，判此人输掉比赛。\n\n小 E 进行第一次分割。他想知道，是否存在某种策略使得他一定能战胜小 W。因此，他求助于小 F，也就是你，请你告诉他是否存在必胜策略。例如，假设初始时桌子上有 $4$ 堆石子，数量分别为 $1,2,3,1$。小 E 可以选择移走第 $1$ 堆，然后将第 $2$ 堆分割（只能分出 $1$ 个石子）。接下来，小 W 只能选择移走第 $4$ 堆，然后将第 $3$ 堆分割为 $1$ 和 $2$。最后轮到小 E，他只能移走后两堆中数量为 $1$ 的一堆，将另一堆分割为 $1$ 和 $1$。这样，轮到小 W 时，所有堆的数量均为 $1$，则他输掉了比赛。故小 E 存在必胜策略。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $N$，表示桌子上共有 $N$ 堆石子，这里的 $N$ 即为题目描述中的 $2n$。\n\n第二行 $N$ 个整数 $S_{1 \\dots N}$。", "outputFormat": "对于每组数据，如果小 E 必胜，则一行一个字符串 `YES`，否则一行一个字符串 `NO`。\n\n", "hint": "对于 $20\\%$ 的数据，$N=2$。\n\n对于另外 $20\\%$ 的数据，$N \\le 4$，$S_i \\le 50$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 20$，$1 \\le N \\le 2 \\times 10^4$ 且 $N$ 为偶数，$1 \\le S_i \\le 2 \\times 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] E&D", "background": "", "description": "E and W play a game called `E&D`.\n\nThe rules are as follows: There are $2n$ piles of stones on the table, numbered $1 \\sim 2n$. For convenience, we regard pile $2k-1$ and pile $2k$ ($1 \\le k \\le n$) as one group. The number of stones in pile $i$ is a positive integer $S_i$.\n\nOne split operation is defined as follows: choose any pile of stones and remove it from the table. Then split the other pile in the same group, take some stones from it, and place them at the removed position to form a new pile. After the operation, the number of stones in every pile must be greater than $0$. Obviously, the pile being split must contain at least $2$ stones. The two players alternate performing split operations. If, on a player's turn, all piles have exactly $1$ stone, then no move is possible and that player loses.\n\nE makes the first move. He wants to know whether there exists a strategy that guarantees he can defeat W. Therefore, he asks F (you) to tell him whether a winning strategy exists. For example, suppose initially there are $4$ piles with sizes $1,2,3,1$. E can choose to remove pile $1$, then split pile $2$ (he can only split off $1$ stone). Next, W can only remove pile $4$, then split pile $3$ into $1$ and $2$. Finally, it is E's turn; he can only remove the pile of size $1$ among the last two piles, and split the other into $1$ and $1$. Thus, when it is W's turn, all piles have size $1$, so he loses. Therefore, E has a winning strategy.", "inputFormat": "**There are multiple test cases in this problem.**\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case:\n\nThe first line contains an integer $N$, the total number of piles on the table; here $N$ is the $2n$ from the problem description.\n\nThe second line contains $N$ integers $S_{1 \\dots N}$.", "outputFormat": "For each test case, if E has a winning strategy, output a single string `YES`; otherwise, output a single string `NO`.", "hint": "For $20\\%$ of the testdata, $N=2$.\n\nFor another $20\\%$ of the testdata, $N \\le 4$, $S_i \\le 50$.\n\nFor $100\\%$ of the testdata, $1 \\le T \\le 20$, $1 \\le N \\le 2 \\times 10^4$ and $N$ is even, $1 \\le S_i \\le 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] E&D", "background": "", "description": "小 E 与小 W 进行一项名为 `E&D` 游戏。\n\n游戏的规则如下：桌子上有 $2n$ 堆石子，编号为 $1 \\sim 2n$。其中，为了方便起见，我们将第 $2k-1$ 堆与第 $2k$ 堆（$1 \\le k \\le n$）视为同一组。第 $i$ 堆的石子个数用一个正整数 $S_i$ 表示。\n\n一次分割操作指的是，从桌子上任取一堆石子，将其移走。然后分割它同一组的另一堆石子，从中取出若干个石子放在被移走的位置，组成新的一堆。操作完成后，所有堆的石子数必须保证大于 $0$。显然，被分割的一堆的石子数至少要为 $2$。两个人轮流进行分割操作。如果轮到某人进行操作时，所有堆的石子数均为 $1$，则此时没有石子可以操作，判此人输掉比赛。\n\n小 E 进行第一次分割。他想知道，是否存在某种策略使得他一定能战胜小 W。因此，他求助于小 F，也就是你，请你告诉他是否存在必胜策略。例如，假设初始时桌子上有 $4$ 堆石子，数量分别为 $1,2,3,1$。小 E 可以选择移走第 $1$ 堆，然后将第 $2$ 堆分割（只能分出 $1$ 个石子）。接下来，小 W 只能选择移走第 $4$ 堆，然后将第 $3$ 堆分割为 $1$ 和 $2$。最后轮到小 E，他只能移走后两堆中数量为 $1$ 的一堆，将另一堆分割为 $1$ 和 $1$。这样，轮到小 W 时，所有堆的数量均为 $1$，则他输掉了比赛。故小 E 存在必胜策略。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $N$，表示桌子上共有 $N$ 堆石子，这里的 $N$ 即为题目描述中的 $2n$。\n\n第二行 $N$ 个整数 $S_{1 \\dots N}$。", "outputFormat": "对于每组数据，如果小 E 必胜，则一行一个字符串 `YES`，否则一行一个字符串 `NO`。\n\n", "hint": "对于 $20\\%$ 的数据，$N=2$。\n\n对于另外 $20\\%$ 的数据，$N \\le 4$，$S_i \\le 50$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 20$，$1 \\le N \\le 2 \\times 10^4$ 且 $N$ 为偶数，$1 \\le S_i \\le 2 \\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2149", "type": "P", "difficulty": 5, "samples": [["9 10\n1 6 7 8\n1 2 1\n2 5 2\n2 3 3\n3 4 2\n3 9 5\n4 5 3\n4 6 4\n4 7 2\n5 8 1\n7 9 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "各省省选", "山东", "拓扑排序", "最短路"], "title": "[SDOI2009] Elaxia的路线", "background": null, "description": "最近，Elaxia 和 w** 的关系特别好，他们很想整天在一起，但是大学的学习太紧张了，他们必须合理地安排两个人在一起的时间。\n\nElaxia 和 w** 每天都要奔波于宿舍和实验室之间，他们希望在节约时间的前提下，一起走的时间尽可能的长。\n\n现在已知的是 Elaxia 和 w** 所在的宿舍和实验室的编号以及学校的地图：  \n\n地图上有 $n$ 个路口，$m$ 条路，经过每条路都需要一定的时间。 具体地说，就是要求无向图中，两对点间最短路的最长公共路径。\n\n**注意**：本题公共路径行走方向可以不同，依照形式化题意为准。", "inputFormat": "第一行两个正整数 $n,m$，表示点数和边数。\n  \n第二行四个正整数 $x_1,y_1,x_2,y_2$，分别表示 Elaxia 的宿舍和实验室及 w** 的宿舍和实验室的标号。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示 $u,v$之间有一条边，需要 $w$ 的时间经过。", "outputFormat": "一行一个整数表示答案。（即最长公共路径的长度）", "hint": "【数据范围】    \n对于 $30\\%$ 的数据，$1\\le n \\le 100$；   \n对于 $60\\%$ 的数据，$1\\le n \\le 1000$；   \n对于 $100\\%$ 的数据，$1\\le n \\le 1500$，$1 \\leq m \\leq 3 \\times 10^5$，$1\\le w \\le 10^4$，输入数据保证没有重边和自环。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] Elaxia's Route", "background": "", "description": "Recently, Elaxia and w** have become very close. They want to be together all day, but university studies are intense, so they must plan their time together wisely.\n\nElaxia and w** commute daily between their dormitories and laboratories. They hope to maximize the time they walk together while still minimizing their own travel time.\n\nYou are given the IDs of Elaxia's dormitory and laboratory and w**'s dormitory and laboratory, as well as the school map: the map has $n$ intersections and $m$ roads, and traversing each road takes a certain amount of time. Specifically, on an undirected graph, find the longest common path shared by the shortest paths between two pairs of vertices.", "inputFormat": "The first line contains two positive integers $n,m$, the numbers of vertices and edges.\n\nThe second line contains four positive integers $x_1,y_1,x_2,y_2$, which are the IDs of Elaxia's dormitory and laboratory, and w**'s dormitory and laboratory, respectively.\n\nEach of the next $m$ lines contains three integers $u,v,w$, meaning there is an edge between $u$ and $v$, and it takes $w$ time to traverse.", "outputFormat": "Output a single integer, the length of the longest common path.", "hint": "Constraints  \nFor $30\\%$ of the testdata, $1\\le n \\le 100$.  \nFor $60\\%$ of the testdata, $1\\le n \\le 1000$.  \nFor $100\\%$ of the testdata, $1\\le n \\le 1500$, $1 \\leq m \\leq 3 \\times 10^5$, $1\\le w \\le 10^4$. The input guarantees there are no multiple edges or self-loops.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] Elaxia的路线", "background": null, "description": "最近，Elaxia 和 w** 的关系特别好，他们很想整天在一起，但是大学的学习太紧张了，他们必须合理地安排两个人在一起的时间。\n\nElaxia 和 w** 每天都要奔波于宿舍和实验室之间，他们希望在节约时间的前提下，一起走的时间尽可能的长。\n\n现在已知的是 Elaxia 和 w** 所在的宿舍和实验室的编号以及学校的地图：  \n\n地图上有 $n$ 个路口，$m$ 条路，经过每条路都需要一定的时间。 具体地说，就是要求无向图中，两对点间最短路的最长公共路径。\n\n**注意**：本题公共路径行走方向可以不同，依照形式化题意为准。", "inputFormat": "第一行两个正整数 $n,m$，表示点数和边数。\n  \n第二行四个正整数 $x_1,y_1,x_2,y_2$，分别表示 Elaxia 的宿舍和实验室及 w** 的宿舍和实验室的标号。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示 $u,v$之间有一条边，需要 $w$ 的时间经过。", "outputFormat": "一行一个整数表示答案。（即最长公共路径的长度）", "hint": "【数据范围】    \n对于 $30\\%$ 的数据，$1\\le n \\le 100$；   \n对于 $60\\%$ 的数据，$1\\le n \\le 1000$；   \n对于 $100\\%$ 的数据，$1\\le n \\le 1500$，$1 \\leq m \\leq 3 \\times 10^5$，$1\\le w \\le 10^4$，输入数据保证没有重边和自环。", "locale": "zh-CN"}}}
{"pid": "P2150", "type": "P", "difficulty": 6, "samples": [["3 10000", "9"], ["4 10000", "21"], ["100 100000000", "3107203"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "2015", "NOI", "素数判断,质数,筛法", "根号分治", "状压 DP"], "title": "[NOI2015] 寿司晚宴", "background": "", "description": "为了庆祝 NOI 的成功开幕，主办方为大家准备了一场寿司晚宴。小 G 和小 W 作为参加 NOI 的选手，也被邀请参加了寿司晚宴。\n\n在晚宴上，主办方为大家提供了 $n−1$ 种不同的寿司，编号 $1,2,3,\\ldots,n-1$，其中第 $i$ 种寿司的美味度为 $i+1$。（即寿司的美味度为从 $2$ 到 $n$）\n\n现在小 G 和小 W 希望每人选一些寿司种类来品尝，他们规定一种品尝方案为不和谐的当且仅当：**小 G 品尝的寿司种类中存在一种美味度为 $x$ 的寿司，小 W 品尝的寿司中存在一种美味度为 $y$ 的寿司，而 $x$ 与 $y$ 不互质。**\n\n现在小 G 和小 W 希望统计一共有多少种和谐的品尝寿司的方案（对给定的正整数 $p$ 取模）。注意一个人可以不吃任何寿司。", "inputFormat": "输入文件的第 $1$ 行包含 $2$ 个正整数 $n, p$ 中间用单个空格隔开，表示共有 $n$ 种寿司，最终和谐的方案数要对 $p$ 取模。", "outputFormat": "输出一行包含 $1$ 个整数，表示所求的方案模 $p$ 的结果。", "hint": "【数据范围】\n\n::cute-table{tuack}\n\n| 测试点编号  | $n$ 的规模  | 约定  |\n|:-:|:-:|:-:|\n| $1$  | $2\\le n\\le 30$  | $0 < p \\le 1{,}000{,}000{,}000$  |\n| $2$  |^  |^  |\n| $3$  |^  |^  |\n| $4$  | $2\\le n\\le 100$  |^  |\n| $5$  |^  |^  |\n| $6$  | $2\\le n\\le 200$  |^  |\n| $7$  |^  |^  |\n| $8$  | $2\\le n\\le 500$  |^  |\n| $9$  |^  |^  |\n| $10$  |^  |^  |", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2015] Sushi Dinner", "background": "", "description": "To celebrate the successful opening of NOI, the organizers prepared a sushi dinner. Xiao G and Xiao W, as NOI contestants, were invited to attend.\n\nAt the dinner, the organizers provided $n - 1$ different types of sushi, numbered $1, 2, 3, \\ldots, n - 1$, where the tastiness of the $i$-th type is $i + 1$ (that is, tastiness values range from $2$ to $n$).\n\nNow Xiao G and Xiao W each want to choose some types of sushi to taste. A tasting plan is called discordant if and only if: there exists a sushi with tastiness $x$ chosen by Xiao G and a sushi with tastiness $y$ chosen by Xiao W such that $x$ and $y$ are not coprime.\n\nThey want to count how many harmonious tasting plans there are (i.e., plans that are not discordant), modulo a given positive integer $p$. Note that a person may choose no sushi.", "inputFormat": "The first line contains two positive integers $n, p$ separated by a single space. There are $n - 1$ types of sushi in total, with tastiness values from $2$ to $n$, and the final answer should be taken modulo $p$.", "outputFormat": "Output a single integer, which is the number of harmonious plans modulo $p$.", "hint": "[Constraints]\n\n| Test point ID | Range of $n$        | Convention                          |\n|:-------------:|:--------------------:|:------------------------------------:|\n| 1             | $2 \\le n \\le 30$    | $0 < p \\le 1{,}000{,}000{,}000$     |\n| 2             | Same as above.       | Same as above.                       |\n| 3             | Same as above.       | Same as above.                       |\n| 4             | $2 \\le n \\le 100$   | Same as above.                       |\n| 5             | Same as above.       | Same as above.                       |\n| 6             | $2 \\le n \\le 200$   | Same as above.                       |\n| 7             | Same as above.       | Same as above.                       |\n| 8             | $2 \\le n \\le 500$   | Same as above.                       |\n| 9             | Same as above.       | Same as above.                       |\n| 10            | Same as above.       | Same as above.                       |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2015] 寿司晚宴", "background": "", "description": "为了庆祝 NOI 的成功开幕，主办方为大家准备了一场寿司晚宴。小 G 和小 W 作为参加 NOI 的选手，也被邀请参加了寿司晚宴。\n\n在晚宴上，主办方为大家提供了 $n−1$ 种不同的寿司，编号 $1,2,3,\\ldots,n-1$，其中第 $i$ 种寿司的美味度为 $i+1$。（即寿司的美味度为从 $2$ 到 $n$）\n\n现在小 G 和小 W 希望每人选一些寿司种类来品尝，他们规定一种品尝方案为不和谐的当且仅当：**小 G 品尝的寿司种类中存在一种美味度为 $x$ 的寿司，小 W 品尝的寿司中存在一种美味度为 $y$ 的寿司，而 $x$ 与 $y$ 不互质。**\n\n现在小 G 和小 W 希望统计一共有多少种和谐的品尝寿司的方案（对给定的正整数 $p$ 取模）。注意一个人可以不吃任何寿司。", "inputFormat": "输入文件的第 $1$ 行包含 $2$ 个正整数 $n, p$ 中间用单个空格隔开，表示共有 $n$ 种寿司，最终和谐的方案数要对 $p$ 取模。", "outputFormat": "输出一行包含 $1$ 个整数，表示所求的方案模 $p$ 的结果。", "hint": "【数据范围】\n\n::cute-table{tuack}\n\n| 测试点编号  | $n$ 的规模  | 约定  |\n|:-:|:-:|:-:|\n| $1$  | $2\\le n\\le 30$  | $0 < p \\le 1{,}000{,}000{,}000$  |\n| $2$  |^  |^  |\n| $3$  |^  |^  |\n| $4$  | $2\\le n\\le 100$  |^  |\n| $5$  |^  |^  |\n| $6$  | $2\\le n\\le 200$  |^  |\n| $7$  |^  |^  |\n| $8$  | $2\\le n\\le 500$  |^  |\n| $9$  |^  |^  |\n| $10$  |^  |^  |", "locale": "zh-CN"}}}
{"pid": "P2151", "type": "P", "difficulty": 6, "samples": [["4 5 3 0 0\n0 1\n0 2\n0 3\n2 1\n3 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "2009", "各省省选", "山东", "矩阵乘法", "构造"], "title": "[SDOI2009] HH 去散步", "background": "", "description": "HH 有个一成不变的习惯，喜欢饭后百步走。所谓百步走，就是散步，就是在一定的时间内，走过一定的距离。但是同时 HH 又是个喜欢变化的人，所以他不会立刻沿着刚刚走来的路走回。又因为 HH 是个喜欢变化的人，所以他每天走过的路径都不完全一样，他想知道他究竟有多少种散步的方法。\n\n现在给你学校的地图（假设每条路的长度都是一样的都是 $1$），问长度为 $t$，从给定地点 $A$ 走到给定地点 $B$ 共有多少条符合条件的路径。", "inputFormat": "第一行：五个整数 $N,M,t,A,B$。其中 $N$ 表示学校里的路口的个数，$M$ 表示学校里的路的条数，$t$ 表示 HH 想要散步的距离，$A$ 表示散步的出发点，而 $B$ 则表示散步的终点。\n\n接下来 $M$ 行，每行一组 $A_i,B_i$，表示从路口 $A_i$ 到路口 $B_i$ 有一条路。数据保证 $A_i \\neq B_i$，但不保证任意两个路口之间至多只有一条路相连接。路口编号从 $0$ 到 $N-1$。同一行内所有数据均由一个空格隔开，行首行尾没有多余空格。没有多余空行。答案模 $45989$。", "outputFormat": "一行，表示答案。\n", "hint": "### 数据范围及约定\n\n对于 $30\\%$ 的数据，$N \\le 4$，$M \\le 10$，$t \\le 10$。\n\n对于 $100\\%$ 的数据，$N \\le 50$，$M \\le 60$，$t \\le 2^{30}$，$0 \\le A,B$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] HH Goes for a Walk", "background": "", "description": "HH has an unchanging habit: he likes to walk one hundred steps after meals. By “one hundred steps,” he means taking a walk, that is, covering a certain distance within a certain time. However, HH also likes variety, so he will not immediately walk back along the road he just took. Since he likes variety, the path he takes each day is not exactly the same. He wants to know how many different ways he can take such a walk.\n\nYou are given the school’s map (assume every road has the same length, which is $1$). Find the number of valid paths of length $t$ from a given location $A$ to a given location $B$.", "inputFormat": "The first line contains five integers $N, M, t, A, B$. Here $N$ is the number of intersections in the school, $M$ is the number of roads, $t$ is the distance HH wants to walk, $A$ is the starting point, and $B$ is the destination.\n\nThe next $M$ lines each contain a pair $A_i, B_i$, meaning there is a road from intersection $A_i$ to intersection $B_i$. It is guaranteed that $A_i \\neq B_i$, but there may be multiple roads connecting the same pair of intersections. Intersections are numbered from $0$ to $N-1$. All data on the same line are separated by a single space, and there are no extra spaces at the beginning or end of lines. There are no extra blank lines.", "outputFormat": "Output one line: the answer modulo $45989$.", "hint": "### Constraints and Conventions\n\nFor $30\\%$ of the testdata, $N \\le 4$, $M \\le 10$, $t \\le 10$.\n\nFor $100\\%$ of the testdata, $N \\le 50$, $M \\le 60$, $t \\le 2^{30}$, $0 \\le A, B$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] HH 去散步", "background": "", "description": "HH 有个一成不变的习惯，喜欢饭后百步走。所谓百步走，就是散步，就是在一定的时间内，走过一定的距离。但是同时 HH 又是个喜欢变化的人，所以他不会立刻沿着刚刚走来的路走回。又因为 HH 是个喜欢变化的人，所以他每天走过的路径都不完全一样，他想知道他究竟有多少种散步的方法。\n\n现在给你学校的地图（假设每条路的长度都是一样的都是 $1$），问长度为 $t$，从给定地点 $A$ 走到给定地点 $B$ 共有多少条符合条件的路径。", "inputFormat": "第一行：五个整数 $N,M,t,A,B$。其中 $N$ 表示学校里的路口的个数，$M$ 表示学校里的路的条数，$t$ 表示 HH 想要散步的距离，$A$ 表示散步的出发点，而 $B$ 则表示散步的终点。\n\n接下来 $M$ 行，每行一组 $A_i,B_i$，表示从路口 $A_i$ 到路口 $B_i$ 有一条路。数据保证 $A_i \\neq B_i$，但不保证任意两个路口之间至多只有一条路相连接。路口编号从 $0$ 到 $N-1$。同一行内所有数据均由一个空格隔开，行首行尾没有多余空格。没有多余空行。答案模 $45989$。", "outputFormat": "一行，表示答案。\n", "hint": "### 数据范围及约定\n\n对于 $30\\%$ 的数据，$N \\le 4$，$M \\le 10$，$t \\le 10$。\n\n对于 $100\\%$ 的数据，$N \\le 50$，$M \\le 60$，$t \\le 2^{30}$，$0 \\le A,B$。", "locale": "zh-CN"}}}
{"pid": "P2152", "type": "P", "difficulty": 5, "samples": [["12\n54", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["高精度", "2009", "各省省选", "山东", "O2优化", "最大公约数 gcd"], "title": "[SDOI2009] SuperGCD", "background": null, "description": "Sheng bill 有着惊人的心算能力，甚至能用大脑计算出两个巨大的数的最大公约数！因此他经常和别人比赛计算最大公约数。有一天 Sheng bill 很嚣张地找到了你，并要求和你比赛，但是输给 Sheng bill 岂不是很丢脸！所以你决定写一个程序来教训他。", "inputFormat": "共两行，第一行一个整数 $a$，第二行一个整数 $b$。", "outputFormat": "一行，表示 $a$ 和 $b$ 的最大公约数。", "hint": "#### 数据规模与约定\n- 对于 $20\\%$ 的数据，有 $0<a,b\\le 10^{18}$。\n- 对于 $100\\%$ 的数据，有 $0<a,b\\le 10^{10000}$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] SuperGCD", "background": "", "description": "Sheng bill has amazing mental arithmetic skills and can even compute the greatest common divisor of two huge numbers in his head. Therefore, he often competes with others in computing the greatest common divisor. One day, Sheng bill arrogantly challenged you, but losing to Sheng bill would be embarrassing. So you decide to write a program to teach him a lesson.", "inputFormat": "Two lines: the first line contains an integer $a$, and the second line contains an integer $b$.", "outputFormat": "One line, representing the greatest common divisor of $a$ and $b$.", "hint": "#### Constraints\n- For $20\\%$ of the testdata, $0<a,b\\le 10^{18}$.\n- For $100\\%$ of the testdata, $0<a,b\\le 10^{10000}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] SuperGCD", "background": null, "description": "Sheng bill 有着惊人的心算能力，甚至能用大脑计算出两个巨大的数的最大公约数！因此他经常和别人比赛计算最大公约数。有一天 Sheng bill 很嚣张地找到了你，并要求和你比赛，但是输给 Sheng bill 岂不是很丢脸！所以你决定写一个程序来教训他。", "inputFormat": "共两行，第一行一个整数 $a$，第二行一个整数 $b$。", "outputFormat": "一行，表示 $a$ 和 $b$ 的最大公约数。", "hint": "#### 数据规模与约定\n- 对于 $20\\%$ 的数据，有 $0<a,b\\le 10^{18}$。\n- 对于 $100\\%$ 的数据，有 $0<a,b\\le 10^{10000}$。", "locale": "zh-CN"}}}
{"pid": "P2153", "type": "P", "difficulty": 6, "samples": [["7 10\n1 2 1\n1 3 1\n2 4 1\n3 4 1\n4 5 1\n4 6 1\n2 5 5\n3 6 6\n5 7 1\n6 7 1", "2 11\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "山东", "深度优先搜索 DFS", "费用流"], "title": "[SDOI2009] 晨跑", "background": null, "description": "Elaxia 最近迷恋上了空手道，他为自己设定了一套健身计划，比如俯卧撑、仰卧起坐等等，不过到目前为止，他坚持下来的只有晨跑。 \n\n现在给出一张学校附近的地图，这张地图中包含 $N$ 个十字路口和 $M$ 条街道，Elaxia 只能从 一个十字路口跑向另外一个十字路口，街道之间只在十字路口处相交。\n\nElaxia 每天从寝室出发跑到学校，保证寝室编号为 $1$，学校编号为 $N$。 \n\nElaxia 的晨跑计划是按周期（包含若干天）进行的，由于他不喜欢走重复的路线，所以在一个周期内，每天的晨跑路线都不会经过同一个十字路口，寝室和学校不算十字路口。\n\nElaxia 耐力不太好，他希望在一个周期内跑的路程尽量短，但是又希望训练周期包含的天数尽量长。\n\n除了练空手道，Elaxia 其他时间都花在了学习和找 MM 上面，所有他想请你帮忙为他设计一套满足他要求的晨跑计划。\n\n可能存在 $1\\rightarrow n$ 的边。这种情况下，这条边只能走一次。", "inputFormat": "第一行两个整数 $N,M$，表示十字路口数和街道数。 \n\n接下来 $M$ 行，每行 $3$ 个数 $a,b,c$，表示路口 $a$ 和路口 $b$ 之间有条长度为 $c$ 的街道（单向）。", "outputFormat": "一行两个整数，最长周期的天数和满足最长天数的条件下最短的跑步总路程长度。", "hint": "- 对于 $30\\%$ 的数据，$N\\le 20$，$M \\le 120$。\n- 对于 $100\\%$ 的数据，$2\\leq N\\le 200$，$1\\leq M\\le 2\\times 10^4$，$1\\le c\\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] Morning Run", "background": "", "description": "Elaxia has recently become obsessed with karate. He set up a fitness plan for himself, such as push-ups and sit-ups, but so far, the only thing he has stuck with is the morning run.\n\nYou are given a map of the area near the school, containing $N$ intersections and $M$ streets. Elaxia can only run from one intersection to another, and streets intersect only at intersections.\n\nEvery day, Elaxia runs from the dorm to the school. The dorm is numbered $1$, and the school is numbered $N$.\n\nElaxia’s morning runs follow a cycle (spanning several days). Because he dislikes repeating routes, within one cycle, the routes chosen on different days must not intersect at any intersection; the dorm and the school are not considered intersections.\n\nElaxia’s stamina is limited. He wants the total distance run in one cycle to be as short as possible, but he also wants the number of days in the training cycle to be as large as possible.\n\nBesides practicing karate, Elaxia spends the rest of his time studying and looking for “MM” (meimei), so he asks you to design a morning running plan that meets his requirements.\n\nThere may exist an edge $1 \\rightarrow N$. In that case, this edge can be used at most once.", "inputFormat": "The first line contains two integers $N, M$, the number of intersections and streets.\n\nThe next $M$ lines each contain three integers $a, b, c$, indicating there is a directed street from intersection $a$ to intersection $b$ with length $c$.", "outputFormat": "Output one line with two integers: the maximum number of days in a cycle, and, among all plans achieving this maximum, the minimal total distance.", "hint": "- For 30% of the testdata, $N \\le 20$, $M \\le 120$.\n- For 100% of the testdata, $2 \\leq N \\le 200$, $1 \\leq M \\le 2 \\times 10^4$, $1 \\le c \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] 晨跑", "background": null, "description": "Elaxia 最近迷恋上了空手道，他为自己设定了一套健身计划，比如俯卧撑、仰卧起坐等等，不过到目前为止，他坚持下来的只有晨跑。 \n\n现在给出一张学校附近的地图，这张地图中包含 $N$ 个十字路口和 $M$ 条街道，Elaxia 只能从 一个十字路口跑向另外一个十字路口，街道之间只在十字路口处相交。\n\nElaxia 每天从寝室出发跑到学校，保证寝室编号为 $1$，学校编号为 $N$。 \n\nElaxia 的晨跑计划是按周期（包含若干天）进行的，由于他不喜欢走重复的路线，所以在一个周期内，每天的晨跑路线都不会经过同一个十字路口，寝室和学校不算十字路口。\n\nElaxia 耐力不太好，他希望在一个周期内跑的路程尽量短，但是又希望训练周期包含的天数尽量长。\n\n除了练空手道，Elaxia 其他时间都花在了学习和找 MM 上面，所有他想请你帮忙为他设计一套满足他要求的晨跑计划。\n\n可能存在 $1\\rightarrow n$ 的边。这种情况下，这条边只能走一次。", "inputFormat": "第一行两个整数 $N,M$，表示十字路口数和街道数。 \n\n接下来 $M$ 行，每行 $3$ 个数 $a,b,c$，表示路口 $a$ 和路口 $b$ 之间有条长度为 $c$ 的街道（单向）。", "outputFormat": "一行两个整数，最长周期的天数和满足最长天数的条件下最短的跑步总路程长度。", "hint": "- 对于 $30\\%$ 的数据，$N\\le 20$，$M \\le 120$。\n- 对于 $100\\%$ 的数据，$2\\leq N\\le 200$，$1\\leq M\\le 2\\times 10^4$，$1\\le c\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2154", "type": "P", "difficulty": 6, "samples": [["5 6\r\n13\r\n0 2\r\n0 3\r\n1 2\r\n1 3\r\n2 0\r\n2 1\r\n2 4\r\n2 5\r\n2 6\r\n3 2\r\n3 3\r\n4 3\r\n5 2\r\n2", "6"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2009", "各省省选", "树状数组", "山东", "排列组合"], "title": "[SDOI2009] 虔诚的墓主人", "background": "", "description": "小W是一片新造公墓的管理人。公墓可以看成一块 $N×M$ 的矩形，矩形的每个格点，要么种着一棵常青树，要么是一块还没有归属的墓地。\n\n当地的居民都是非常虔诚的基督徒，他们愿意提前为自己找一块合适墓地。为了体现自己对主的真诚，他们希望自己的墓地拥有着较高的虔诚度。\n\n一块墓地的虔诚度是指以这块墓地为中心的十字架的数目。一个十字架可以看成中间是墓地，墓地的正上、正下、正左、正右都有恰好 $k$ 棵常青树。\n\n形式化地，对于一个坐标为 $(x, y)$ 的墓地，以其为中心的十字架个数是这样的长度为 $4k$ 的二元组序列 $[(x_{1,1},y_{1,1}),\\allowbreak(x_{1,2},y_{1,2}),\\allowbreak\\cdots,(x_{1,k},y_{1,k}),\\allowbreak(x_{2,1},y_{2,1}),\\allowbreak(x_{2,2},y_{2,2}),\\allowbreak\\cdots,(x_{2,k},y_{2,k}),\\allowbreak(x_{3,1},y_{3,1}),\\allowbreak(x_{3,2},y_{3,2}),\\allowbreak\\cdots,(x_{3,k},y_{3,k}),\\allowbreak(x_{4,1},y_{4,1}),\\allowbreak(x_{4,2},y_{4,2}),\\allowbreak\\cdots,(x_{4,k},y_{4,k})]$ 的方案数：\n\n- 每一个二元组对应着一棵常青树的坐标；\n- $x_{1,1}<x_{1,2}<\\cdots< x_{1,k}<x$ 且 $y_{1,1}=y_{1,2}=\\cdots=y_{1,k}=y$；\n- $x<x_{2,1}<x_{2,2}<\\cdots< x_{2,k}$ 且 $y_{2,1}=y_{2,2}=\\cdots=y_{2,k}=y$；\n- $y_{3,1}<y_{3,2}<\\cdots< y_{3,k}<y$ 且 $x_{3,1}=x_{3,2}=\\cdots=x_{3,k}=x$；\n- $y<y_{4,1}<y_{4,2}<\\cdots< y_{4,k}$ 且 $x_{4,1}=x_{4,2}=\\cdots=x_{4,k}=x$。\n\n小W希望知道他所管理的这片公墓中所有墓地的虔诚度总和是多少。", "inputFormat": "第一行包含两个用空格分隔的正整数 $N$ 和 $M$，表示公墓的宽和长，因此这个矩形公墓共有 $(N+1) ×(M+1)$ 个格点，左下角的坐标为 $(0, 0)$，右上角的坐标为 $(N, M)$。\n\n第二行包含一个正整数 $W$，表示公墓中常青树的个数。\n\n第三行起共 $W$ 行，每行包含两个用空格分隔的非负整数 $x_i$ 和 $y_i$，表示一棵常青树的坐标。输入保证没有两棵常青树拥有相同的坐标。\n\n最后一行包含一个正整数 $k$，意义如题目所示。", "outputFormat": "输出仅包含一个非负整数，表示这片公墓中所有墓地的虔诚度总和。为了方便起见，答案对 $2{,}147{,}483{,}648$ 取模。", "hint": "图中，以墓地 $(2, 2)$ 和 $(2, 3)$ 为中心的十字架各有 $3$ 个，即它们的虔诚度均为 $3$。其他墓地的虔诚度为 $0$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1589.png) \n\n对于 $30\\%$ 的数据，满足 $1 ≤ N, M ≤ 10^3$。\n\n对于 $60\\%$ 的数据，满足 $1 ≤ N, M ≤ 10^6$。\n\n对于 $100\\%$ 的数据，满足 $1 ≤ N, M ≤ 10^9$，$0 ≤ x_i ≤ N$，$0 ≤ y_i ≤ M$，$1 ≤ W ≤ 10^5$，$1 ≤ k ≤ 10$。\n\n存在 $50\\%$ 的数据，满足 $1 ≤ k ≤ 2$。\n\n存在 $25\\%$ 的数据，满足 $1 ≤ W ≤ 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] The Devout Grave Keeper", "background": "", "description": "Xiao W is the manager of a newly built cemetery. The cemetery can be regarded as an $N×M$ rectangle. Each lattice point is either planted with an evergreen tree, or is a grave plot that has not yet been assigned.\n\nThe local residents are very devout Christians, and they are willing to choose a suitable grave plot for themselves in advance. To show their sincerity to the Lord, they hope their grave plot has a high level of piety.\n\nThe piety of a grave plot is defined as the number of crosses centered at this plot. A cross consists of a center grave plot, and exactly $k$ evergreen trees immediately above, below, left, and right of it.\n\nFormally, for a grave plot at coordinates $(x, y)$, the number of crosses centered at it is the number of sequences of length $4k$ of ordered pairs $[(x_{1,1},y_{1,1}),\\allowbreak(x_{1,2},y_{1,2}),\\allowbreak\\cdots,(x_{1,k},y_{1,k}),\\allowbreak(x_{2,1},y_{2,1}),\\allowbreak(x_{2,2},y_{2,2}),\\allowbreak\\cdots,(x_{2,k},y_{2,k}),\\allowbreak(x_{3,1},y_{3,1}),\\allowbreak(x_{3,2},y_{3,2}),\\allowbreak\\cdots,(x_{3,k},y_{3,k}),\\allowbreak(x_{4,1},y_{4,1}),\\allowbreak(x_{4,2},y_{4,2}),\\allowbreak\\cdots,(x_{4,k},y_{4,k})]$ that satisfy:\n\n- Each ordered pair corresponds to the coordinates of an evergreen tree.\n- $x_{1,1}<x_{1,2}<\\cdots< x_{1,k}<x$ and $y_{1,1}=y_{1,2}=\\cdots=y_{1,k}=y$.\n- $x<x_{2,1}<x_{2,2}<\\cdots< x_{2,k}$ and $y_{2,1}=y_{2,2}=\\cdots=y_{2,k}=y$.\n- $y_{3,1}<y_{3,2}<\\cdots< y_{3,k}<y$ and $x_{3,1}=x_{3,2}=\\cdots=x_{3,k}=x$.\n- $y<y_{4,1}<y_{4,2}<\\cdots< y_{4,k}$ and $x_{4,1}=x_{4,2}=\\cdots=x_{4,k}=x$.\n\nXiao W wants to know the sum of the piety levels of all grave plots in the cemetery.", "inputFormat": "The first line contains two positive integers $N$ and $M$, representing the width and length of the cemetery. Therefore, this rectangular cemetery has $(N+1) ×(M+1)$ lattice points, with the lower-left corner at $(0, 0)$ and the upper-right corner at $(N, M)$.\n\nThe second line contains a positive integer $W$, representing the number of evergreen trees in the cemetery.\n\nFrom the third line, there are $W$ lines. Each line contains two non-negative integers $x_i$ and $y_i$, representing the coordinates of an evergreen tree. The input guarantees that no two evergreen trees have the same coordinates.\n\nThe last line contains a positive integer $k$, as defined in the statement.", "outputFormat": "Output a single non-negative integer, which is the sum of the piety levels over all grave plots in this cemetery. For convenience, output the answer modulo $2{,}147{,}483{,}648$.", "hint": "In the figure, the number of crosses centered at grave plots $(2, 2)$ and $(2, 3)$ is $3$, so their piety levels are both $3$. The piety level of every other grave plot is $0$.\n\n ![](https://cdn.luogu.com.cn/upload/pic/1589.png) \n\nFor $30\\%$ of the testdata, $1 ≤ N, M ≤ 10^3$.\n\nFor $60\\%$ of the testdata, $1 ≤ N, M ≤ 10^6$.\n\nFor $100\\%$ of the testdata, $1 ≤ N, M ≤ 10^9$，$0 ≤ x_i ≤ N$，$0 ≤ y_i ≤ M$，$1 ≤ W ≤ 10^5$，$1 ≤ k ≤ 10$。\n\nThere exists $50\\%$ of the testdata such that $1 ≤ k ≤ 2$.\n\nThere exists $25\\%$ of the testdata such that $1 ≤ W ≤ 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] 虔诚的墓主人", "background": "", "description": "小W是一片新造公墓的管理人。公墓可以看成一块 $N×M$ 的矩形，矩形的每个格点，要么种着一棵常青树，要么是一块还没有归属的墓地。\n\n当地的居民都是非常虔诚的基督徒，他们愿意提前为自己找一块合适墓地。为了体现自己对主的真诚，他们希望自己的墓地拥有着较高的虔诚度。\n\n一块墓地的虔诚度是指以这块墓地为中心的十字架的数目。一个十字架可以看成中间是墓地，墓地的正上、正下、正左、正右都有恰好 $k$ 棵常青树。\n\n形式化地，对于一个坐标为 $(x, y)$ 的墓地，以其为中心的十字架个数是这样的长度为 $4k$ 的二元组序列 $[(x_{1,1},y_{1,1}),\\allowbreak(x_{1,2},y_{1,2}),\\allowbreak\\cdots,(x_{1,k},y_{1,k}),\\allowbreak(x_{2,1},y_{2,1}),\\allowbreak(x_{2,2},y_{2,2}),\\allowbreak\\cdots,(x_{2,k},y_{2,k}),\\allowbreak(x_{3,1},y_{3,1}),\\allowbreak(x_{3,2},y_{3,2}),\\allowbreak\\cdots,(x_{3,k},y_{3,k}),\\allowbreak(x_{4,1},y_{4,1}),\\allowbreak(x_{4,2},y_{4,2}),\\allowbreak\\cdots,(x_{4,k},y_{4,k})]$ 的方案数：\n\n- 每一个二元组对应着一棵常青树的坐标；\n- $x_{1,1}<x_{1,2}<\\cdots< x_{1,k}<x$ 且 $y_{1,1}=y_{1,2}=\\cdots=y_{1,k}=y$；\n- $x<x_{2,1}<x_{2,2}<\\cdots< x_{2,k}$ 且 $y_{2,1}=y_{2,2}=\\cdots=y_{2,k}=y$；\n- $y_{3,1}<y_{3,2}<\\cdots< y_{3,k}<y$ 且 $x_{3,1}=x_{3,2}=\\cdots=x_{3,k}=x$；\n- $y<y_{4,1}<y_{4,2}<\\cdots< y_{4,k}$ 且 $x_{4,1}=x_{4,2}=\\cdots=x_{4,k}=x$。\n\n小W希望知道他所管理的这片公墓中所有墓地的虔诚度总和是多少。", "inputFormat": "第一行包含两个用空格分隔的正整数 $N$ 和 $M$，表示公墓的宽和长，因此这个矩形公墓共有 $(N+1) ×(M+1)$ 个格点，左下角的坐标为 $(0, 0)$，右上角的坐标为 $(N, M)$。\n\n第二行包含一个正整数 $W$，表示公墓中常青树的个数。\n\n第三行起共 $W$ 行，每行包含两个用空格分隔的非负整数 $x_i$ 和 $y_i$，表示一棵常青树的坐标。输入保证没有两棵常青树拥有相同的坐标。\n\n最后一行包含一个正整数 $k$，意义如题目所示。", "outputFormat": "输出仅包含一个非负整数，表示这片公墓中所有墓地的虔诚度总和。为了方便起见，答案对 $2{,}147{,}483{,}648$ 取模。", "hint": "图中，以墓地 $(2, 2)$ 和 $(2, 3)$ 为中心的十字架各有 $3$ 个，即它们的虔诚度均为 $3$。其他墓地的虔诚度为 $0$。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1589.png) \n\n对于 $30\\%$ 的数据，满足 $1 ≤ N, M ≤ 10^3$。\n\n对于 $60\\%$ 的数据，满足 $1 ≤ N, M ≤ 10^6$。\n\n对于 $100\\%$ 的数据，满足 $1 ≤ N, M ≤ 10^9$，$0 ≤ x_i ≤ N$，$0 ≤ y_i ≤ M$，$1 ≤ W ≤ 10^5$，$1 ≤ k ≤ 10$。\n\n存在 $50\\%$ 的数据，满足 $1 ≤ k ≤ 2$。\n\n存在 $25\\%$ 的数据，满足 $1 ≤ W ≤ 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2155", "type": "P", "difficulty": 5, "samples": [["1 11\n4 2", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2008", "各省省选", "山东", "素数判断,质数,筛法", "逆元"], "title": "[SDOI2008] 沙拉公主的困惑", "background": "", "description": "大富翁国因为通货膨胀，以及假钞泛滥，政府决定推出一项新的政策：现有钞票编号范围为 $1$ 到 $N$ 的阶乘，但是，政府只发行编号与 $M!$ 互质的钞票。房地产第一大户沙拉公主决定预测一下大富翁国现在所有真钞票的数量。现在，请你帮助沙拉公主解决这个问题，由于数量可能非常大，你只需计算出答案对 $R$ 取模后的结果即可。 ", "inputFormat": "第一行为两个整数 $T$ 和 $R$，其中 $T$ 为该组中测试数据数目，$R$ 为模数。\n\n接下来 $T$ 行，每行一对整数 $N$ 和 $M$，具体意义见题目描述。 ", "outputFormat": "共 $T$ 行，对于每一对 $N$ 和 $M$，输出 $[1, N!]$ 中与 $M!$ 互质的数的数量对 $R$ 取模后的值。  ", "hint": "对于 $100\\% $ 的数据，$1\\leq M\\leq N\\leq 10^7$，$1\\leq T\\leq 10^4$，$2\\leq R\\leq 10^9+10$ 且 $R$ 为质数。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Princess Shala's Confusion", "background": "", "description": "Due to inflation and rampant counterfeiting, the government of the Monopoly Kingdom decides on a new policy: the serial numbers of existing banknotes range from $1$ to $N!$, but the government will issue only banknotes whose serial numbers are coprime to $M!$. Princess Shala, the largest real estate holder, wants to estimate the total number of genuine banknotes now. Please help Princess Shala solve this problem. Since the number can be very large, you only need to compute the answer modulo $R$.", "inputFormat": "The first line contains two integers $T$ and $R$, where $T$ is the number of testdata in this set, and $R$ is the modulus.\n\nThe next $T$ lines each contain a pair of integers $N$ and $M$, as described above.", "outputFormat": "Output $T$ lines. For each pair $N$ and $M$, output the number of integers in $[1, N!]$ that are coprime to $M!$, taken modulo $R$.", "hint": "For $100\\%$ of the testdata, $1 \\le M \\le N \\le 10^7$, $1 \\le T \\le 10^4$, $2 \\le R \\le 10^9+10$, and $R$ is prime.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 沙拉公主的困惑", "background": "", "description": "大富翁国因为通货膨胀，以及假钞泛滥，政府决定推出一项新的政策：现有钞票编号范围为 $1$ 到 $N$ 的阶乘，但是，政府只发行编号与 $M!$ 互质的钞票。房地产第一大户沙拉公主决定预测一下大富翁国现在所有真钞票的数量。现在，请你帮助沙拉公主解决这个问题，由于数量可能非常大，你只需计算出答案对 $R$ 取模后的结果即可。 ", "inputFormat": "第一行为两个整数 $T$ 和 $R$，其中 $T$ 为该组中测试数据数目，$R$ 为模数。\n\n接下来 $T$ 行，每行一对整数 $N$ 和 $M$，具体意义见题目描述。 ", "outputFormat": "共 $T$ 行，对于每一对 $N$ 和 $M$，输出 $[1, N!]$ 中与 $M!$ 互质的数的数量对 $R$ 取模后的值。  ", "hint": "对于 $100\\% $ 的数据，$1\\leq M\\leq N\\leq 10^7$，$1\\leq T\\leq 10^4$，$2\\leq R\\leq 10^9+10$ 且 $R$ 为质数。", "locale": "zh-CN"}}}
{"pid": "P2156", "type": "P", "difficulty": 6, "samples": [["12 13\r\n.###..#####..\r\n#...#.#....#.\r\n#.#.#.#..#.#.\r\n#...#..#...#.\r\n.###.#..###..\r\n....#..##...#\r\n..........###\r\n##########..#\r\n#...........#\r\n#.###...###.#\r\n#...........#\r\n#############\r\n", "1\r\n......#####..\r\n......#....#.\r\n......#..#.#.\r\n.......#...#.\r\n........###..\r\n.......##....\r\n.............\r\n.............\r\n.............\r\n.............\r\n.............\r\n.............\r\n"], ["9 14\r\n#########.....\r\n#.......#....#\r\n#.#####.#...#.\r\n#.#...#.#..#..\r\n#.#.#.#.#.#..#\r\n#.#...#.#..#..\r\n#.#####.#...#.\r\n#.......#....#\r\n#########.....\r\n", "1\r\n..............\r\n..............\r\n..#####.......\r\n..#...#.......\r\n..#.#.#.......\r\n..#...#.......\r\n..#####.......\r\n..............\r\n..............\r\n"], ["7 15\r\n#######.#######\r\n#.....#.#.....#\r\n#.###.#.#.###.#\r\n#.#.#.#.#.#...#\r\n#.###.#.#.###.#\r\n#.....#.#.....#\r\n#######.#######\r\n", "1\r\n........#######\r\n........#.....#\r\n........#.###.#\r\n........#.#...#\r\n........#.###.#\r\n........#.....#\r\n........#######\r\n"]], "limits": {"time": [606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606, 606], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "各省省选", "山东"], "title": "[SDOI2009] 细胞探索", "background": "", "description": "生物课上，老师开始为同学们介绍细胞。为了加深同学们的印象，老师在一张 $n \\times m$ 的矩阵中定义了一种细胞，矩阵中仅有井号 `#` 和点 `.`。\n\n细胞由细胞核、细胞质及细胞膜构成。细胞核是一个四联通（上下左右相连）的全为 `#` 的连通块，它必须实心，即不能存在一个四联通的 `.` 连通块被其完全包围（所谓完全包围指的是，这个 `.` 连通块不能位于矩阵边界相邻，且它的 $4$ 相邻格子均属于包含它的 `#` 连通块）。细胞膜是一个八联通（上下左右，以及 $4$ 个对角方向）的全为 `#` 的非实心连通块。细胞膜仅包围一个四联通的区域，且这个区域内有且仅有一个细胞核，这个区域剩下的位置全为 `.`。\n\n所有连通块必须极大化，即一个八联通块周围不能找到一个 `#` 与这个连通块的任意一个 `#`八联通；同样，对于一个四联通块周围不能找到一个 `#` 与这个连通块的任意一个 `#`四联通。\n\n现在，老师画了一幅图画，让小 E 回答图画中一共有几个细胞，并把图画中不属于任何一个细胞的 `#` 改成 `.`。", "inputFormat": "第一行两个正整数 $n,m$。\n\n下面一个 $n \\times m$ 的字符矩阵，保证其中只含 `#` 和 `.`。", "outputFormat": "第一行一个整数，表示输入的矩阵中的细胞数。\n\n下面一个 $n \\times m$ 的字符矩阵，表示按照要求修改后的图画。", "hint": "对于 $20\\%$ 的数据，$n,m \\le 20$。\n\n对于另外 $20\\%$ 的数据，保证所有 `#` 都属于某一个正确的细胞。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] Cell Exploration", "background": "", "description": "In biology class, the teacher began introducing cells. To deepen the students’ impression, the teacher defined a kind of cell in an $n \\times m$ matrix that contains only the hash `#` and the dot `.`.\n\nA cell is composed of a nucleus, cytoplasm, and membrane. The nucleus is a 4-connected (connected via up, down, left, right) connected component consisting entirely of `#`. It must be solid, i.e., there cannot exist a 4-connected `.` component that is completely enclosed by it (completely enclosed means that this `.` component is not adjacent to the matrix border, and all of its 4-neighbor cells belong to the `#` component that contains it). The membrane is an 8-connected (up, down, left, right, and the 4 diagonal directions) connected component consisting entirely of `#` that is non-solid. The membrane encloses exactly one 4-connected region, and there is exactly one nucleus inside this region; all other positions in this region are `.`.\n\nAll connected components must be maximal, i.e., for an 8-connected component, there must not exist a `#` outside that is 8-connected to any `#` in this component; similarly, for a 4-connected component, there must not exist a `#` outside that is 4-connected to any `#` in this component.\n\nNow, the teacher drew a picture and asked Xiao E to determine how many cells are in the picture and to change every `#` that does not belong to any cell into `.`.", "inputFormat": "The first line contains two positive integers $n, m$.\n\nThen follows an $n \\times m$ character matrix, guaranteed to contain only `#` and `.`.", "outputFormat": "The first line contains an integer, the number of cells in the input matrix.\n\nThen output an $n \\times m$ character matrix, representing the modified picture according to the requirements.", "hint": "For $20\\%$ of the testdata, $n, m \\le 20$.\n\nFor another $20\\%$ of the testdata, it is guaranteed that all `#` belong to some valid cell.\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] 细胞探索", "background": "", "description": "生物课上，老师开始为同学们介绍细胞。为了加深同学们的印象，老师在一张 $n \\times m$ 的矩阵中定义了一种细胞，矩阵中仅有井号 `#` 和点 `.`。\n\n细胞由细胞核、细胞质及细胞膜构成。细胞核是一个四联通（上下左右相连）的全为 `#` 的连通块，它必须实心，即不能存在一个四联通的 `.` 连通块被其完全包围（所谓完全包围指的是，这个 `.` 连通块不能位于矩阵边界相邻，且它的 $4$ 相邻格子均属于包含它的 `#` 连通块）。细胞膜是一个八联通（上下左右，以及 $4$ 个对角方向）的全为 `#` 的非实心连通块。细胞膜仅包围一个四联通的区域，且这个区域内有且仅有一个细胞核，这个区域剩下的位置全为 `.`。\n\n所有连通块必须极大化，即一个八联通块周围不能找到一个 `#` 与这个连通块的任意一个 `#`八联通；同样，对于一个四联通块周围不能找到一个 `#` 与这个连通块的任意一个 `#`四联通。\n\n现在，老师画了一幅图画，让小 E 回答图画中一共有几个细胞，并把图画中不属于任何一个细胞的 `#` 改成 `.`。", "inputFormat": "第一行两个正整数 $n,m$。\n\n下面一个 $n \\times m$ 的字符矩阵，保证其中只含 `#` 和 `.`。", "outputFormat": "第一行一个整数，表示输入的矩阵中的细胞数。\n\n下面一个 $n \\times m$ 的字符矩阵，表示按照要求修改后的图画。", "hint": "对于 $20\\%$ 的数据，$n,m \\le 20$。\n\n对于另外 $20\\%$ 的数据，保证所有 `#` 都属于某一个正确的细胞。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2157", "type": "P", "difficulty": 6, "samples": [["2\n5\n5 2\n4 1\n12 0\n3 3\n2 2\n2\n5 0\n4 0", "16\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2009", "各省省选", "山东", "枚举", "状压 DP"], "title": "[SDOI2009] 学校食堂", "background": "", "description": "小 F 的学校在城市的一个偏僻角落，所有学生都只好在学校吃饭。学校有一个食堂，虽然简陋，但食堂大厨总能做出让同学们满意的菜肴。当然，不同的人口味也不一定相同，但每个人的口味都可以用一个非负整数表示。 由于人手不够，食堂每次只能为一个人做菜。做每道菜所需的时间是和前一道菜有关的，若前一道菜的对应的口味是 $a$，这一道为 $b$，则做这道菜所需的时间为 $(a\\operatorname{or}b)-(a\\operatorname{and}b)$，而做第一道菜是不需要计算时间的。其中，$\\operatorname{or}$ 和 $\\operatorname{and}$ 表示整数逐位或运算及逐位与运算，C 语言中对应的运算符为 `|` 和 `&`。\n\n\n学生数目相对于这个学校还是比较多的，吃饭做菜往往就会花去不少时间。因此，学校食堂偶尔会不按照大家的排队顺序做菜，以缩短总的进餐时间。\n\n虽然同学们能够理解学校食堂的这种做法，不过每个同学还是有一定容忍度的。也就是说，队伍中的第 $i$ 个同学，最多允许紧跟他身后的 $B_i$ 个人先拿到饭菜。一旦在此之后的任意同学比当前同学先拿到饭，当前同学将会十分愤怒。因此，食堂做菜还得照顾到同学们的情绪。 现在，小 F 想知道在满足所有人的容忍度这一前提下，自己的学校食堂做完这些菜最少需要多少时间。\n", "inputFormat": "第一行包含一个正整数 $C$，表示测试点的数据组数。 每组数据的第一行包含一个正整数 $N$，表示同学数。 每组数据的第二行起共 $N$ 行，每行包含两个用空格分隔的非负整数 $T_i$ 和 $B_i$，表示按队伍顺序从前往后的每个同学所需的菜的口味和这个同学的忍受度。 每组数据之间没有多余空行。\n", "outputFormat": "包含 $C$ 行，每行一个整数，表示对应数据中食堂完成所有菜所需的最少时间。\n", "hint": "对于第一组数据：\n\n同学 1 允许同学 2 或同学 3 在他之前拿到菜；同学 2 允许同学 3 在他之前拿到菜；同学 3 比较小气，他必须比他后面的同学先拿菜。\n\n一种最优的方案是按同学 3、同学 2、同学 1、同学 4、同学 5 做菜，每道菜所需的时间分别是 0、8、1、6 及 1。\n\n\n**数据规模和约定**\n\n- 对于 $30\\%$ 的数据，满足 $1 \\le N \\le 20$。\n\n- 对于 $ 100\\% $ 的数据，满足 $1 \\le N \\le 1000,0 \\le T_i \\le 1000,0 \\le B_i \\le 7，1 \\le C \\le 5$。\n\n- 存在 $30\\%$ 的数据，满足 $0 \\le B_i \\le 1$。\n\n- 存在 $65\\%$ 的数据，满足 $0 \\le B_i \\le 5$。\n\n- 存在 $45\\%$ 的数据，满足 $0 \\le T_i \\le 130$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] School Canteen", "background": "", "description": "Xiao F’s school is in a remote corner of the city, so all students have to eat at school. The school has a canteen which, although simple, always serves dishes that satisfy the students. Of course, people have different tastes, but each person’s taste can be represented by a non-negative integer. Due to limited staff, the canteen can only cook for one person at a time. The time to cook each dish depends on the previous one: if the previous dish has taste $a$ and the current dish has taste $b$, then the time needed to cook this dish is $(a\\operatorname{or}b)-(a\\operatorname{and}b)$, and no time is counted for the first dish. Here, $\\operatorname{or}$ and $\\operatorname{and}$ denote bitwise OR and bitwise AND on integers, corresponding to the C language operators `|` and `&`.\n\nThere are many students in this school, so cooking often takes a lot of time. Therefore, the canteen may sometimes deviate from the original queue order to shorten the total dining time.\n\nAlthough students can understand this practice, everyone has a certain tolerance. Specifically, the $i$-th student in the queue allows at most the $B_i$ people immediately behind them to be served before them. If any student beyond those $B_i$ immediately behind is served earlier than the $i$-th student, the $i$-th student will be very angry. Thus, the canteen also needs to take students’ emotions into account. Now, under the premise of satisfying everyone’s tolerance, Xiao F wants to know the minimum total time needed for the school canteen to finish all the dishes.", "inputFormat": "The first line contains a positive integer $C$, the number of test cases.  \nFor each test case, the first line contains a positive integer $N$, the number of students.  \nStarting from the second line of each test case, there are $N$ lines. Each line contains two space-separated non-negative integers $T_i$ and $B_i$, representing, in queue order from front to back, each student’s required dish taste and their tolerance.  \nThere are no extra blank lines between test cases.", "outputFormat": "Output $C$ lines, each containing one integer, the minimum total time for the canteen to finish all dishes for the corresponding test case.", "hint": "For the first test case:\n- Student 1 allows Student 2 or Student 3 to be served before them; Student 2 allows Student 3 to be served before them; Student 3 is strict and must be served before any student behind them.\n- One optimal order is to cook for Students 3, 2, 1, 4, 5. The time for each dish is respectively $0$, $8$, $1$, $6$, and $1$.\n\nConstraints:\n- For $30\\%$ of the testdata, $1 \\le N \\le 20$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 1000$, $0 \\le T_i \\le 1000$, $0 \\le B_i \\le 7$, $1 \\le C \\le 5$.\n- For $30\\%$ of the testdata, $0 \\le B_i \\le 1$.\n- For $65\\%$ of the testdata, $0 \\le B_i \\le 5$.\n- For $45\\%$ of the testdata, $0 \\le T_i \\le 130$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] 学校食堂", "background": "", "description": "小 F 的学校在城市的一个偏僻角落，所有学生都只好在学校吃饭。学校有一个食堂，虽然简陋，但食堂大厨总能做出让同学们满意的菜肴。当然，不同的人口味也不一定相同，但每个人的口味都可以用一个非负整数表示。 由于人手不够，食堂每次只能为一个人做菜。做每道菜所需的时间是和前一道菜有关的，若前一道菜的对应的口味是 $a$，这一道为 $b$，则做这道菜所需的时间为 $(a\\operatorname{or}b)-(a\\operatorname{and}b)$，而做第一道菜是不需要计算时间的。其中，$\\operatorname{or}$ 和 $\\operatorname{and}$ 表示整数逐位或运算及逐位与运算，C 语言中对应的运算符为 `|` 和 `&`。\n\n\n学生数目相对于这个学校还是比较多的，吃饭做菜往往就会花去不少时间。因此，学校食堂偶尔会不按照大家的排队顺序做菜，以缩短总的进餐时间。\n\n虽然同学们能够理解学校食堂的这种做法，不过每个同学还是有一定容忍度的。也就是说，队伍中的第 $i$ 个同学，最多允许紧跟他身后的 $B_i$ 个人先拿到饭菜。一旦在此之后的任意同学比当前同学先拿到饭，当前同学将会十分愤怒。因此，食堂做菜还得照顾到同学们的情绪。 现在，小 F 想知道在满足所有人的容忍度这一前提下，自己的学校食堂做完这些菜最少需要多少时间。\n", "inputFormat": "第一行包含一个正整数 $C$，表示测试点的数据组数。 每组数据的第一行包含一个正整数 $N$，表示同学数。 每组数据的第二行起共 $N$ 行，每行包含两个用空格分隔的非负整数 $T_i$ 和 $B_i$，表示按队伍顺序从前往后的每个同学所需的菜的口味和这个同学的忍受度。 每组数据之间没有多余空行。\n", "outputFormat": "包含 $C$ 行，每行一个整数，表示对应数据中食堂完成所有菜所需的最少时间。\n", "hint": "对于第一组数据：\n\n同学 1 允许同学 2 或同学 3 在他之前拿到菜；同学 2 允许同学 3 在他之前拿到菜；同学 3 比较小气，他必须比他后面的同学先拿菜。\n\n一种最优的方案是按同学 3、同学 2、同学 1、同学 4、同学 5 做菜，每道菜所需的时间分别是 0、8、1、6 及 1。\n\n\n**数据规模和约定**\n\n- 对于 $30\\%$ 的数据，满足 $1 \\le N \\le 20$。\n\n- 对于 $ 100\\% $ 的数据，满足 $1 \\le N \\le 1000,0 \\le T_i \\le 1000,0 \\le B_i \\le 7，1 \\le C \\le 5$。\n\n- 存在 $30\\%$ 的数据，满足 $0 \\le B_i \\le 1$。\n\n- 存在 $65\\%$ 的数据，满足 $0 \\le B_i \\le 5$。\n\n- 存在 $45\\%$ 的数据，满足 $0 \\le T_i \\le 130$。\n", "locale": "zh-CN"}}}
{"pid": "P2158", "type": "P", "difficulty": 5, "samples": [["4", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2008", "各省省选", "山东", "素数判断,质数,筛法", "莫比乌斯反演", "容斥原理", "欧拉函数"], "title": "[SDOI2008] 仪仗队", "background": "", "description": "作为体育委员，C 君负责这次运动会仪仗队的训练。仪仗队是由学生组成的 $N \\times N$ 的方阵，为了保证队伍在行进中整齐划一，C 君会跟在仪仗队的左后方，根据其视线所及的学生人数来判断队伍是否整齐（如下图）。\n\n![](https://cdn.luogu.com.cn/upload/pic/1149.png)\n\n现在，C 君希望你告诉他队伍整齐时能看到的学生人数。", "inputFormat": "一行，一个正整数 $N$。", "outputFormat": "输出一行一个数，即 C 君应看到的学生人数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 40000$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2008] Honor Guard", "background": "", "description": "As the sports committee member, Mr. C is responsible for training the honor guard for this sports meet. The honor guard is an $N \\times N$ square formation of students. To ensure the formation marches in perfect order, Mr. C follows at the back-left of the formation and judges whether it is neat based on the number of students visible to him (as shown in the figure).\n\n![](https://cdn.luogu.com.cn/upload/pic/1149.png)\n\nNow, Mr. C wants you to tell him the number of students he can see when the formation is neat.", "inputFormat": "One line with a positive integer $N$.", "outputFormat": "Output one line with a single number: the number of students Mr. C should see.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le N \\le 40000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2008] 仪仗队", "background": "", "description": "作为体育委员，C 君负责这次运动会仪仗队的训练。仪仗队是由学生组成的 $N \\times N$ 的方阵，为了保证队伍在行进中整齐划一，C 君会跟在仪仗队的左后方，根据其视线所及的学生人数来判断队伍是否整齐（如下图）。\n\n![](https://cdn.luogu.com.cn/upload/pic/1149.png)\n\n现在，C 君希望你告诉他队伍整齐时能看到的学生人数。", "inputFormat": "一行，一个正整数 $N$。", "outputFormat": "输出一行一个数，即 C 君应看到的学生人数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 40000$。", "locale": "zh-CN"}}}
{"pid": "P2159", "type": "P", "difficulty": 6, "samples": [["3 0\n178\n188\n176\n168\n178\n170\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2009", "各省省选", "上海", "排序"], "title": "[SHOI2009] 舞会", "background": null, "description": "OItown 要举办一年一度的超级舞会了。\n\n为了使今年的舞会规模空前，作为主办方的 Constantine 邀请了许多他的好友和同学去。\n\n舞会那天，恰好来了 $n$ 个男生 $n$ 个女生。\n\nConstantine 发现，一般情况下，舞伴之间，总是男伴总是比女伴长得高，不过，偶尔也是有特殊情况的。\n\n所以，Constantine 现在想知道，如果把这 $2n$ 个人恰好配成 $n$ 对舞伴，有多少种搭配方法，使得最多只有 $k$ 对舞伴之间女伴比男伴高。\n\n现在，Constantine 需要参加 SHTSC 的你帮助他算出这个答案。\n\n当然啦，他会先告诉你这 $2n$ 个同学的身高。", "inputFormat": "第一行：两个整数 $n,k$，含义如问题中所示。\n\n第 $2$ 行到第 $n+1$ 行：$n$ 个整数，表示 $n$ 个男生的身高。\n\n第 $n+2$ 行到第 $2n+1$ 行：$n$ 个整数，表示 $n$ 个女生的身高。", "outputFormat": "一行一个整数表示满足 $n$ 对舞伴中最多只有 $k$ 对舞伴之间女伴比男伴高的男女搭配方案数。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 200$，$0 \\le k \\le n$，且身高均为不大于 $10^9$ 的正整数。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2009] Dance Party", "background": "# Description\n\nOItown is holding its annual super dance party.\n\nTo make this year’s party bigger than ever, the organizer Constantine invited many of his friends and classmates.\n\nOn the day of the party, exactly $n$ boys and $n$ girls came.\n\nConstantine noticed that, in general, in a pair the boy is taller than the girl, but there are occasional exceptions.\n\nSo Constantine wants to know: if we pair these $2n$ people into exactly $n$ couples, how many ways are there such that at most $k$ couples have the girl taller than the boy?\n\nNow Constantine asks you, who is attending SHTSC, to compute the answer.\n\nOf course, he will first tell you the heights of all $2n$ students.", "description": "", "inputFormat": "", "outputFormat": "Output a single integer in one line: the number of pairing schemes where among the $n$ couples, at most $k$ couples have the girl taller than the boy.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le n \\le 200$, $0 \\le k \\le n$, and all heights are positive integers not greater than $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2009] 舞会", "background": null, "description": "OItown 要举办一年一度的超级舞会了。\n\n为了使今年的舞会规模空前，作为主办方的 Constantine 邀请了许多他的好友和同学去。\n\n舞会那天，恰好来了 $n$ 个男生 $n$ 个女生。\n\nConstantine 发现，一般情况下，舞伴之间，总是男伴总是比女伴长得高，不过，偶尔也是有特殊情况的。\n\n所以，Constantine 现在想知道，如果把这 $2n$ 个人恰好配成 $n$ 对舞伴，有多少种搭配方法，使得最多只有 $k$ 对舞伴之间女伴比男伴高。\n\n现在，Constantine 需要参加 SHTSC 的你帮助他算出这个答案。\n\n当然啦，他会先告诉你这 $2n$ 个同学的身高。", "inputFormat": "第一行：两个整数 $n,k$，含义如问题中所示。\n\n第 $2$ 行到第 $n+1$ 行：$n$ 个整数，表示 $n$ 个男生的身高。\n\n第 $n+2$ 行到第 $2n+1$ 行：$n$ 个整数，表示 $n$ 个女生的身高。", "outputFormat": "一行一个整数表示满足 $n$ 对舞伴中最多只有 $k$ 对舞伴之间女伴比男伴高的男女搭配方案数。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 200$，$0 \\le k \\le n$，且身高均为不大于 $10^9$ 的正整数。", "locale": "zh-CN"}}}
{"pid": "P2160", "type": "P", "difficulty": 6, "samples": [["4\n220 29\n195 20\n200 9\n180 30", "18000"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "2007", "各省省选", "上海", "排序"], "title": "[SHOI2007] 书柜的尺寸", "background": "", "description": "Tom 不喜欢那种一字长龙式的大书架，他只想要一个小书柜来存放他的系列工具书。Tom 打算把书柜放在桌子的后面，这样需要查书的时候就可以不用起身离开了。\n\n显然，这种书柜不能太大，Tom 希望它的体积越小越好。另外，出于他的审美要求，他只想要一个三层的书柜。为了物尽其用，Tom 规定每层必须至少放一本书。现在的问题是，Tom 怎么分配他的工具书，才能让木匠造出最小的书柜来呢？ \n\nTom很快意识到这是一个数学问题。每本书都有自己的高度 $h_i$ 和厚度 $t_i$。我们需要求的是一个分配方案，也就是要求把所有的书分配在 $S_1$、$S_2$ 和 $S_3$ **三个非空集合**里面的一个，不重复也不遗漏，那么，很明显，书柜正面表面积（$S$）的计算公式就是：  \n\n$$S=\\left(\\sum_{j=1}^3 \\max_{i \\in S_j} h_i\\right) \\times \\left(\\max_{j=1}^3 \\sum_{i \\in S_j} t_i\\right) $$\n\n由于书柜的深度是固定的（显然，它应该等于那本最宽的书的长度），所以要求书柜的体积最小就是**要求 $S$ 最小**。Tom 离答案只有一步之遥了。不过很遗憾，Tom 并不擅长于编程，于是他邀请你来帮助他解决这个问题。", "inputFormat": "第一行一个整数 $n$，代表书本的个数。\n\n接下来 $n$ 行每行有两个整数 $h_i$ 和 $t_i$，代表每本书的高度和厚度。", "outputFormat": "只有一行，即输出最小的 $S$。", "hint": "对于全部数据，$3 \\leq n \\leq 70$，$150 \\leq h_i \\leq 300$，$5 \\leq t_i \\leq 30$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2007] Size of the Bookcase", "background": "", "description": "Tom does not like those long, single-row bookshelves. He only wants a small bookcase to store his series of reference books. Tom plans to place the bookcase behind his desk so he does not need to stand up to look things up.\n\nObviously, this bookcase cannot be too large. Tom wants its volume to be as small as possible. Also, for aesthetic reasons, he wants a three-tier bookcase. To make full use of the space, Tom requires that each tier must contain at least one book. Now the question is: how should Tom distribute his reference books so that the carpenter can build the smallest possible bookcase?\n\nTom quickly realized that this is a math problem. Each book has its own height $h_i$ and thickness $t_i$. What we need is an assignment plan, meaning we must assign every book to exactly one of $S_1$, $S_2$, and $S_3$ — the **three non-empty sets** — with no duplication and no omission. Then, it is clear that the front surface area of the bookcase ($S$) is given by:\n\n$$S=\\left(\\sum_{j=1}^3 \\max_{i \\in S_j} h_i\\right) \\times \\left(\\max_{j=1}^3 \\sum_{i \\in S_j} t_i\\right) $$\n\nSince the depth of the bookcase is fixed (obviously, it should equal the length of the widest book), minimizing the volume of the bookcase is equivalent to minimizing $S$. Tom is just one step away from the answer. Unfortunately, Tom is not good at programming, so he invites you to help him solve this problem.", "inputFormat": "The first line contains an integer $n$, the number of books.\n\nEach of the next $n$ lines contains two integers $h_i$ and $t_i$, representing the height and thickness of each book.", "outputFormat": "Output a single line: the minimal $S$.", "hint": "Constraints: for all testdata, $3 \\leq n \\leq 70$, $150 \\leq h_i \\leq 300$, $5 \\leq t_i \\leq 30$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2007] 书柜的尺寸", "background": "", "description": "Tom 不喜欢那种一字长龙式的大书架，他只想要一个小书柜来存放他的系列工具书。Tom 打算把书柜放在桌子的后面，这样需要查书的时候就可以不用起身离开了。\n\n显然，这种书柜不能太大，Tom 希望它的体积越小越好。另外，出于他的审美要求，他只想要一个三层的书柜。为了物尽其用，Tom 规定每层必须至少放一本书。现在的问题是，Tom 怎么分配他的工具书，才能让木匠造出最小的书柜来呢？ \n\nTom很快意识到这是一个数学问题。每本书都有自己的高度 $h_i$ 和厚度 $t_i$。我们需要求的是一个分配方案，也就是要求把所有的书分配在 $S_1$、$S_2$ 和 $S_3$ **三个非空集合**里面的一个，不重复也不遗漏，那么，很明显，书柜正面表面积（$S$）的计算公式就是：  \n\n$$S=\\left(\\sum_{j=1}^3 \\max_{i \\in S_j} h_i\\right) \\times \\left(\\max_{j=1}^3 \\sum_{i \\in S_j} t_i\\right) $$\n\n由于书柜的深度是固定的（显然，它应该等于那本最宽的书的长度），所以要求书柜的体积最小就是**要求 $S$ 最小**。Tom 离答案只有一步之遥了。不过很遗憾，Tom 并不擅长于编程，于是他邀请你来帮助他解决这个问题。", "inputFormat": "第一行一个整数 $n$，代表书本的个数。\n\n接下来 $n$ 行每行有两个整数 $h_i$ 和 $t_i$，代表每本书的高度和厚度。", "outputFormat": "只有一行，即输出最小的 $S$。", "hint": "对于全部数据，$3 \\leq n \\leq 70$，$150 \\leq h_i \\leq 300$，$5 \\leq t_i \\leq 30$。", "locale": "zh-CN"}}}
{"pid": "P2161", "type": "P", "difficulty": 5, "samples": [["6\nA 10 15\nA 17 19\nA 12 17\nA 90 99\nA 11 12\nB", "0\n0\n2\n0\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "平衡树", "树状数组", "上海", "优先队列"], "title": "[SHOI2009] 会场预约", "background": "**形式化题意：**\n\n你需要维护一个在数轴上的线段的集合 $S$，支持两种操作：\n\n`A l r` 表示将 $S$ 中所有与线段 $[l,r]$ 相交的线段删去，并将 $[l,r]$ 加入 $S$ 中。\n\n`B` 查询 $S$ 中的元素数量。\n\n对于 `A` 操作，每次还需输出删掉的元素个数。", "description": "PP 大厦有一间空的礼堂，可以为企业或者单位提供会议场地。\n\n这些会议中的大多数都需要连续几天的时间（个别的可能只需要一天），不过场地只有一个，所以不同的会议的时间申请不能够冲突。也就是说，前一个会议的结束日期必须在后一个会议的开始日期之前。所以，如果要接受一个新的场地预约申请，就必须拒绝掉与这个申请相冲突的预约。\n\n一般来说，如果 PP 大厦方面事先已经接受了一个会场预约（例如从 $10$ 日到 $15$ 日），就不会再接受与之相冲突的预约（例如从 $12$ 日到 $17$ 日）。\n\n不过，有时出于经济利益，PP 大厦方面有时会为了接受一个新的会场预约，而拒绝掉一个甚至几个之前预订的预约。 于是，礼堂管理员 QQ 的笔记本上经常记录着这样的信息：（本题中为方便起见，所有的日期都用一个整数表示）例如，如果一个为期 $10$ 天的会议从 $90$ 日开始到 $99$ 日，那么下一个会议最早只能在 $100$ 日开始。（此处前后矛盾，若无法理解请参考形式化描述。）\n\n最近，这个业务的工作量与日俱增，礼堂的管理员 QQ 希望参加 SHTSC 的你替他设计一套计算机系统，方便他的工作。这个系统应当能执行下面两个操作：\n\n`A` 操作：有一个新的预约是从 $start$ 日到 $end$ 日，并且拒绝掉所有与它相冲突的预约。执行这个操作的时候，你的系统应当返回为了这个新预约而拒绝掉的预约个数，以方便 QQ 与自己的记录相校对。\n\n`B` 操作：请你的系统返回当前的仍然有效的预约的总数。", "inputFormat": "第一行一个正整数 $n$，表示操作个数。  \n接下来 $n$ 行，每行表示一个操作，都是上面两种中的一个。", "outputFormat": "输出 $n$ 行，每行一个整数，表示对应操作的答案。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 2\\times 10^5$，$1\\le l \\le r \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2009] Venue Reservation", "background": "Formal statement:\n\nYou need to maintain a set $S$ of segments on the number line, supporting two operations:\n\n`A l r` means to delete from $S$ all segments that intersect the segment $[l, r]$, and then insert $[l, r]$ into $S$.\n\n`B` queries the number of elements in $S$.\n\nFor operation `A`, you also need to output the number of elements deleted each time.", "description": "There is an empty auditorium in the PP Building that can provide a meeting venue for companies or organizations.\n\nMost of these meetings require several consecutive days (some may require only one day). However, there is only one venue, so the times of different meetings cannot conflict. That is, the end date of the previous meeting must be before the start date of the next meeting. Therefore, to accept a new reservation request, all reservations that conflict with it must be rejected.\n\nIn general, if the PP Building has already accepted a venue reservation (for example, from day $10$ to day $15$), then it will not accept any reservation that conflicts with it (for example, from day $12$ to day $17$).\n\nHowever, sometimes for economic reasons, the PP Building will reject one or even several previously accepted reservations in order to accept a new one. Therefore, the administrator QQ’s notebook often records such information. (For convenience in this problem, all dates are represented by an integer.) For example, if a $10$-day meeting runs from day $90$ to day $99$, then the earliest the next meeting can start is day $100$. (There is a contradiction here; if you cannot understand, please refer to the formal description.)\n\nRecently, the workload has been increasing. The administrator QQ hopes you, a participant in SHTSC, can design a computer system to make the work easier. This system should be able to perform the following two operations:\n\nOperation `A`: A new reservation is from day $start$ to day $end$, and all reservations that conflict with it are rejected. When performing this operation, your system should return the number of reservations that were rejected for this new reservation, so QQ can check against the records.\n\nOperation `B`: Your system should return the current total number of valid reservations.", "inputFormat": "The first line contains a positive integer $n$, the number of operations.  \nThen follow $n$ lines, each describing one operation, which is one of the two types above.", "outputFormat": "Output $n$ lines, each with one integer, representing the answer for the corresponding operation.", "hint": "Constraints:  \nFor $100\\%$ of the testdata, $1 \\le n \\le 2 \\times 10^5$, $1 \\le l \\le r \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2009] 会场预约", "background": "**形式化题意：**\n\n你需要维护一个在数轴上的线段的集合 $S$，支持两种操作：\n\n`A l r` 表示将 $S$ 中所有与线段 $[l,r]$ 相交的线段删去，并将 $[l,r]$ 加入 $S$ 中。\n\n`B` 查询 $S$ 中的元素数量。\n\n对于 `A` 操作，每次还需输出删掉的元素个数。", "description": "PP 大厦有一间空的礼堂，可以为企业或者单位提供会议场地。\n\n这些会议中的大多数都需要连续几天的时间（个别的可能只需要一天），不过场地只有一个，所以不同的会议的时间申请不能够冲突。也就是说，前一个会议的结束日期必须在后一个会议的开始日期之前。所以，如果要接受一个新的场地预约申请，就必须拒绝掉与这个申请相冲突的预约。\n\n一般来说，如果 PP 大厦方面事先已经接受了一个会场预约（例如从 $10$ 日到 $15$ 日），就不会再接受与之相冲突的预约（例如从 $12$ 日到 $17$ 日）。\n\n不过，有时出于经济利益，PP 大厦方面有时会为了接受一个新的会场预约，而拒绝掉一个甚至几个之前预订的预约。 于是，礼堂管理员 QQ 的笔记本上经常记录着这样的信息：（本题中为方便起见，所有的日期都用一个整数表示）例如，如果一个为期 $10$ 天的会议从 $90$ 日开始到 $99$ 日，那么下一个会议最早只能在 $100$ 日开始。（此处前后矛盾，若无法理解请参考形式化描述。）\n\n最近，这个业务的工作量与日俱增，礼堂的管理员 QQ 希望参加 SHTSC 的你替他设计一套计算机系统，方便他的工作。这个系统应当能执行下面两个操作：\n\n`A` 操作：有一个新的预约是从 $start$ 日到 $end$ 日，并且拒绝掉所有与它相冲突的预约。执行这个操作的时候，你的系统应当返回为了这个新预约而拒绝掉的预约个数，以方便 QQ 与自己的记录相校对。\n\n`B` 操作：请你的系统返回当前的仍然有效的预约的总数。", "inputFormat": "第一行一个正整数 $n$，表示操作个数。  \n接下来 $n$ 行，每行表示一个操作，都是上面两种中的一个。", "outputFormat": "输出 $n$ 行，每行一个整数，表示对应操作的答案。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 2\\times 10^5$，$1\\le l \\le r \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2162", "type": "P", "difficulty": 7, "samples": [["17\n", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020922789888000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "上海"], "title": "[SHOI2007] 宝石纪念币", "background": null, "description": "Constantine 刚结束在 MySky Island 的度假，正准备离开的时候，他想送给她的好朋友 YY 一份特别的礼物——MySky Island 上特别的手工艺品宝石纪念币。\n\n宝石纪念币的一面上刻着小岛的名字 `MySky`，或者收礼物的人，比如 `to YY`。不过特别的是，每枚纪念币的反面，依次均匀的镶着一圈共 $n$ 颗彩色的宝石。\n\n例如，下面是一个 $n=7$ 时的简单例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l936rcm4.png)\n\n因为纪念币是圆的，所以如果两种“宝石颜色的排布”经过旋转后对应位置的颜色相重合，就认为它们是相同的排布方式。\n\n（请注意：纪念币只有一面镶宝石，所以两种排布若经过翻转以后是可以重合的，但只经过旋转无法使两者重合，则认为他们是不同的排布。）\n\n例如下面的两种排布方式就是相同的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o7uxs4ti.png)\n\n另外，由于 MySky Island 当地的习俗，每枚钱币上都只能嵌奇数颗宝石，不然就认为是不吉利的。\n\n宝石纪念币是现场制作的，游客可以选择自己喜欢的颜色的宝石。所以 Constantine 选出了他最喜欢的 $17$ 种颜色（你如果要问为什么选这么多的话，只能告诉你因为 $17$ 是他的幸运数字）。他想知道，如果按他要求把这 ${17}$ 种颜色的宝石都用上的话，可以制作出多少枚不同的纪念币。\n\n由于答案可能很大，你只需要计算答案的最后 $120$ 位（十进制）就可以了。", "inputFormat": "一行一个正奇数 $n\\ (1 \\le n \\le 10^9-1)$。", "outputFormat": "一行 $120$ 个数字字符，表示不同纪念币的枚数的最后 $120$ 位。这 $120$ 位从高位到低位依次输出，位数不足的用 $0$ 在高位补足。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2007] Gem Commemorative Coin", "background": "", "description": "Constantine has just finished his vacation on MySky Island. As he is about to leave, he wants to give his good friend YY a special gift—a handcrafted gem commemorative coin from MySky Island.\n\nOne side of the coin is engraved with the island’s name “MySky,” or the recipient’s name, for example, “to YY.” What is special is that on the reverse side, there are $n$ colored gems evenly embedded in a circle.\n\nFor example, here is a simple example for $n=7$:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l936rcm4.png)\n\nSince the coin is circular, two “color arrangements of the gems” are considered the same if they can be made to match by a rotation.\n\n(Please note: the gems are embedded on only one side of the coin. Therefore, two arrangements that can be made to match by a reflection but not by any rotation are considered different.)\n\nFor example, the following two arrangements are the same:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o7uxs4ti.png)\n\nAdditionally, due to local custom on MySky Island, only coins with an odd number of gems are considered auspicious.\n\nThe gem coins are made on site, and tourists can choose the colors they like. Constantine picked his 17 favorite colors (if you ask why so many, it’s because 17 is his lucky number). He wants to know, if all these 17 colors must be used, how many different coins can be made.\n\nSince the answer can be very large, you only need to compute the last 120 digits (in decimal).", "inputFormat": "One line with an odd positive integer $n$ ($1 \\le n \\le 10^9 - 1$).", "outputFormat": "One line with 120 digit characters, representing the last 120 digits of the number of distinct coins. Output the digits from most significant to least significant; if the number has fewer than 120 digits, pad with leading zeros on the left.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2007] 宝石纪念币", "background": null, "description": "Constantine 刚结束在 MySky Island 的度假，正准备离开的时候，他想送给她的好朋友 YY 一份特别的礼物——MySky Island 上特别的手工艺品宝石纪念币。\n\n宝石纪念币的一面上刻着小岛的名字 `MySky`，或者收礼物的人，比如 `to YY`。不过特别的是，每枚纪念币的反面，依次均匀的镶着一圈共 $n$ 颗彩色的宝石。\n\n例如，下面是一个 $n=7$ 时的简单例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l936rcm4.png)\n\n因为纪念币是圆的，所以如果两种“宝石颜色的排布”经过旋转后对应位置的颜色相重合，就认为它们是相同的排布方式。\n\n（请注意：纪念币只有一面镶宝石，所以两种排布若经过翻转以后是可以重合的，但只经过旋转无法使两者重合，则认为他们是不同的排布。）\n\n例如下面的两种排布方式就是相同的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o7uxs4ti.png)\n\n另外，由于 MySky Island 当地的习俗，每枚钱币上都只能嵌奇数颗宝石，不然就认为是不吉利的。\n\n宝石纪念币是现场制作的，游客可以选择自己喜欢的颜色的宝石。所以 Constantine 选出了他最喜欢的 $17$ 种颜色（你如果要问为什么选这么多的话，只能告诉你因为 $17$ 是他的幸运数字）。他想知道，如果按他要求把这 ${17}$ 种颜色的宝石都用上的话，可以制作出多少枚不同的纪念币。\n\n由于答案可能很大，你只需要计算答案的最后 $120$ 位（十进制）就可以了。", "inputFormat": "一行一个正奇数 $n\\ (1 \\le n \\le 10^9-1)$。", "outputFormat": "一行 $120$ 个数字字符，表示不同纪念币的枚数的最后 $120$ 位。这 $120$ 位从高位到低位依次输出，位数不足的用 $0$ 在高位补足。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2163", "type": "P", "difficulty": 4, "samples": [["3 1\n0 0 \n0 1\n1 0\n0 0 1 1\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "树状数组", "离散化", "上海", "cdq 分治", "扫描线"], "title": "[SHOI2007] 园丁的烦恼", "background": "很久很久以前，在遥远的大陆上有一个美丽的国家。统治着这个美丽国家的国王是一个园艺爱好者，在他的皇家花园里种植着各种奇花异草。\n\n有一天国王漫步在花园里，若有所思，他问一个园丁道： “最近我在思索一个问题，如果我们把花坛摆成六个六角形，那么……”\n\n“那么本质上它是一个深度优先搜索，陛下。”园丁深深地向国王鞠了一躬。\n\n“嗯……我听说有一种怪物叫九头蛇，它非常贪吃苹果树……”\n\n“是的，显然这是一道经典的动态规划题，早在 N 元 $4002$ 年我们就已经发现了其中的奥秘了，陛下。”\n\n“该死的，你究竟是什么来头？”\n\n“陛下息怒，干我们的这行经常莫名其妙地被问到和 OI 有关的题目，我也是为了预防万一啊！” 王者的尊严受到了伤害，这是不可容忍的。", "description": "看来一般的难题是难不倒这位园丁的，国王最后打算用车轮战来消耗他的实力： “年轻人，在我的花园里有 $n$ 棵树，每一棵树可以用一个整数坐标来表示，一会儿，我的 $m$ 个骑士们会来轮番询问你某一个矩阵内有多少树，如果你不能立即答对，你就准备走人吧！”说完，国王气呼呼地先走了。\n\n这下轮到园丁傻眼了，他没有准备过这样的问题。所幸的是，作为“全国园丁保护联盟”的会长——你，可以成为他的最后一根救命稻草。", "inputFormat": "第一行有两个整数 $n, m$，分别表示树木个数和询问次数。\n\n接下来 $n$ 行，每行两个整数 $x, y$，表示存在一棵坐标为 $(x, y)$ 的树。有可能存在两棵树位于同一坐标。\n\n接下来 $m$ 行，每行四个整数 $a, b, c, d$，表示查询以 $(a, b)$ 为左下角，$(c, d)$ 为右上角的矩形内部（包括边界）有多少棵树。\n", "outputFormat": "对于每个查询，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n, m \\leq 10$。\n- 对于 $100\\%$ 的数据，保证 $0 \\leq n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 5 \\times 10^5$，$0 \\leq x, y, a, b, c, d \\leq 10^7$，$a \\leq c$，$b \\leq d$。", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2007] The Gardener's Trouble", "background": "Long, long ago, on a distant continent there was a beautiful kingdom. The king who ruled this beautiful country was a gardening enthusiast, and in his royal garden he planted all kinds of exotic flowers and grasses.\n\nOne day the king was strolling in the garden, lost in thought. He asked a gardener: \"Lately I have been pondering a question: if we arrange the flowerbeds into six hexagons, then...\"\n\n\"Then, in essence it's a depth-first search, Your Majesty.\" The gardener bowed deeply to the king.\n\n\"Hmm... I have heard of a monster called the Hydra, and it is very fond of eating apple trees...\"\n\n\"Yes, clearly this is a classic dynamic programming problem. As early as the N 元 $4002$ 年 we had already uncovered its secret, Your Majesty.\"\n\n\"Damn it, what on earth are you?\"\n\n\"Please calm down, Your Majesty. In our line of work we often get inexplicably asked questions related to OI. I'm just being prepared for anything!\" The king's dignity was hurt, which was intolerable.", "description": "It seems ordinary hard problems cannot stump this gardener. The king decided to exhaust his strength with a war of attrition: \"Young man, there are $n$ trees in my garden, and each tree can be represented by an integer coordinate. Soon, my $m$ knights will come in turns to ask you how many trees lie inside a certain rectangle. If you cannot answer immediately and correctly, be ready to leave!\" After saying this, the king stormed off.\n\nNow it was the gardener's turn to be dumbfounded—he had not prepared for such a problem. Fortunately, as the president of the \"National Gardeners Protection Alliance\"—you—can become his last lifeline.", "inputFormat": "The first line contains two integers $n, m$, representing the number of trees and the number of queries.\n\nThe next $n$ lines each contain two integers $x, y$, indicating that there is a tree at coordinate $(x, y)$. It is possible that two trees share the same coordinate.\n\nThe next $m$ lines each contain four integers $a, b, c, d$, describing a query: count how many trees are inside the rectangle with lower-left corner $(a, b)$ and upper-right corner $(c, d)$, including the boundary.", "outputFormat": "For each query, output a single integer on its own line indicating the answer.", "hint": "#### Constraints and Conventions\n\n- For $30\\%$ of the testdata, it is guaranteed that $n, m \\leq 10$.\n- For $100\\%$ of the testdata, it is guaranteed that $0 \\leq n \\leq 5 \\times 10^5$, $1 \\leq m \\leq 5 \\times 10^5$, $0 \\leq x, y, a, b, c, d \\leq 10^7$, $a \\leq c$, $b \\leq d$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2007] 园丁的烦恼", "background": "很久很久以前，在遥远的大陆上有一个美丽的国家。统治着这个美丽国家的国王是一个园艺爱好者，在他的皇家花园里种植着各种奇花异草。\n\n有一天国王漫步在花园里，若有所思，他问一个园丁道： “最近我在思索一个问题，如果我们把花坛摆成六个六角形，那么……”\n\n“那么本质上它是一个深度优先搜索，陛下。”园丁深深地向国王鞠了一躬。\n\n“嗯……我听说有一种怪物叫九头蛇，它非常贪吃苹果树……”\n\n“是的，显然这是一道经典的动态规划题，早在 N 元 $4002$ 年我们就已经发现了其中的奥秘了，陛下。”\n\n“该死的，你究竟是什么来头？”\n\n“陛下息怒，干我们的这行经常莫名其妙地被问到和 OI 有关的题目，我也是为了预防万一啊！” 王者的尊严受到了伤害，这是不可容忍的。", "description": "看来一般的难题是难不倒这位园丁的，国王最后打算用车轮战来消耗他的实力： “年轻人，在我的花园里有 $n$ 棵树，每一棵树可以用一个整数坐标来表示，一会儿，我的 $m$ 个骑士们会来轮番询问你某一个矩阵内有多少树，如果你不能立即答对，你就准备走人吧！”说完，国王气呼呼地先走了。\n\n这下轮到园丁傻眼了，他没有准备过这样的问题。所幸的是，作为“全国园丁保护联盟”的会长——你，可以成为他的最后一根救命稻草。", "inputFormat": "第一行有两个整数 $n, m$，分别表示树木个数和询问次数。\n\n接下来 $n$ 行，每行两个整数 $x, y$，表示存在一棵坐标为 $(x, y)$ 的树。有可能存在两棵树位于同一坐标。\n\n接下来 $m$ 行，每行四个整数 $a, b, c, d$，表示查询以 $(a, b)$ 为左下角，$(c, d)$ 为右上角的矩形内部（包括边界）有多少棵树。\n", "outputFormat": "对于每个查询，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n, m \\leq 10$。\n- 对于 $100\\%$ 的数据，保证 $0 \\leq n \\leq 5 \\times 10^5$，$1 \\leq m \\leq 5 \\times 10^5$，$0 \\leq x, y, a, b, c, d \\leq 10^7$，$a \\leq c$，$b \\leq d$。", "locale": "zh-CN"}}}
{"pid": "P2164", "type": "P", "difficulty": 6, "samples": [["6 7\n1 2\n1 3\n2 4\n2 5\n3 5\n4 6\n5 6\n0 0 0 0 0 1\n0 0 0 0 0 0\n0 0 0 0 0 0\n0 0 0 0 0 0\n0 0 0 0 0 0\n0 0 0 0 0 0", "0.7\n0.3\n0.3\n0.3\n0.3\n0.3\n0.7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "各省省选", "上海", "Special Judge"], "title": "[SHOI2007] 交通网络", "background": null, "description": "著名的城市交通规划师 L.Serenade 为 OItown 的各个城堡之间设计了一套的地铁交通网络。每一条地铁线路都用来双向连通两个城堡。因为是建在地下的不同深度，所以这些地铁线路是可以“交叉”的。\n\nOItown 的居民们的生活和工作都在不同的城堡中进行，于是，每个 OItown 的居民都要在每天早晨从家出发，乘地铁去工作，当然地铁换乘是允许的。不过每个居民都会选择换乘次数最少的乘车方式。如果有多种乘车方式，这些乘车方式所需要的换乘次数一样，那么居民每天都会等概率的随机选择其中一种。\n\n现在 L.Serenade 想请你为他计算出，每天每条地铁线路在早晨的期望客流量。他会告诉你，每个居民的家和工作地址，还有他设计的地铁交通网络的全部信息。", "inputFormat": "第一行两个正整数 $n,m\\ (2 \\le n \\le 300, n-1 \\le m \\le \\dfrac{n(n-1)}{2})$，表示城堡和线路的个数。\n\n下面 $m$ 行，每行两个正整数 $u,v\\ (1 \\le u,v \\le n, u \\ne v)$，表示一条双向线路 $u \\leftrightarrow v$。\n\n下面一个 $n \\times n$ 的矩阵 $\\{C_{n,n}\\}\\ (0 \\le C_{i,j} \\le 100,C_{i,i}=0)$，其中 $C_{i,j}$ 表示每天早上进行 $i \\to j$ 的出行的居民个数。\n\nL.Serenade 保证，交通网络能把城市连为一体，而且任意两个城堡之间的最优乘车方式（即换乘次数最少的）不超过 $2^{63}-1$ 种。", "outputFormat": "$m$ 行，每行一个一位小数，表示该条线路的期望客流量，绝对误差不得大于 $0.1$。", "hint": "样例解释：\n\n唯一一位居民会等概率地从以下三条路径中选择一条：\n\n- $1 \\to 2 \\to 4 \\to 6$\n- $1 \\to 2 \\to 5 \\to 6$\n- $1 \\to 3 \\to 5 \\to 6$", "locale": "zh-CN", "translations": {"en": {"title": "[SHOI2007] Transportation Network", "background": "", "description": "The renowned urban transit planner L.Serenade designed a subway network connecting the castles of OItown. Each subway line bidirectionally connects two castles. Since they are built underground at different depths, these lines can “cross.”\n\nThe residents of OItown live and work in different castles, so every morning each resident departs from home and takes the subway to work. Transfers are allowed. However, each resident chooses a way to travel that minimizes the number of transfers. If there are multiple ways whose numbers of transfers are the same, then each resident chooses one of them uniformly at random every day.\n\nNow L.Serenade asks you to compute the expected passenger flow on each subway line every morning. He will tell you each resident’s home and workplace, as well as all information about the subway network he designed.", "inputFormat": "The first line contains two positive integers $n, m\\ (2 \\le n \\le 300,\\ n - 1 \\le m \\le \\dfrac{n(n - 1)}{2})$, denoting the numbers of castles and lines.\n\nThe next $m$ lines each contain two positive integers $u, v\\ (1 \\le u, v \\le n,\\ u \\ne v)$, indicating a bidirectional line $u \\leftrightarrow v$.\n\nThen follows an $n \\times n$ matrix $\\{C_{i,j}\\}\\ (0 \\le C_{i,j} \\le 100,\\ C_{i,i} = 0)$, where $C_{i,j}$ denotes the number of residents who travel from $i$ to $j$ every morning.\n\nIt is guaranteed that the transit network is connected, and for any two castles the number of optimal ways to travel (i.e., minimizing the number of transfers) does not exceed $2^{63} - 1$.", "outputFormat": "Output $m$ lines, each containing a number with one decimal digit, denoting the expected passenger flow on that line. The absolute error must not exceed $0.1$.", "hint": "Sample explanation:\n\nThe only resident will choose uniformly at random one of the following three paths:\n- $1 \\to 2 \\to 4 \\to 6$.\n- $1 \\to 2 \\to 5 \\to 6$.\n- $1 \\to 3 \\to 5 \\to 6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SHOI2007] 交通网络", "background": null, "description": "著名的城市交通规划师 L.Serenade 为 OItown 的各个城堡之间设计了一套的地铁交通网络。每一条地铁线路都用来双向连通两个城堡。因为是建在地下的不同深度，所以这些地铁线路是可以“交叉”的。\n\nOItown 的居民们的生活和工作都在不同的城堡中进行，于是，每个 OItown 的居民都要在每天早晨从家出发，乘地铁去工作，当然地铁换乘是允许的。不过每个居民都会选择换乘次数最少的乘车方式。如果有多种乘车方式，这些乘车方式所需要的换乘次数一样，那么居民每天都会等概率的随机选择其中一种。\n\n现在 L.Serenade 想请你为他计算出，每天每条地铁线路在早晨的期望客流量。他会告诉你，每个居民的家和工作地址，还有他设计的地铁交通网络的全部信息。", "inputFormat": "第一行两个正整数 $n,m\\ (2 \\le n \\le 300, n-1 \\le m \\le \\dfrac{n(n-1)}{2})$，表示城堡和线路的个数。\n\n下面 $m$ 行，每行两个正整数 $u,v\\ (1 \\le u,v \\le n, u \\ne v)$，表示一条双向线路 $u \\leftrightarrow v$。\n\n下面一个 $n \\times n$ 的矩阵 $\\{C_{n,n}\\}\\ (0 \\le C_{i,j} \\le 100,C_{i,i}=0)$，其中 $C_{i,j}$ 表示每天早上进行 $i \\to j$ 的出行的居民个数。\n\nL.Serenade 保证，交通网络能把城市连为一体，而且任意两个城堡之间的最优乘车方式（即换乘次数最少的）不超过 $2^{63}-1$ 种。", "outputFormat": "$m$ 行，每行一个一位小数，表示该条线路的期望客流量，绝对误差不得大于 $0.1$。", "hint": "样例解释：\n\n唯一一位居民会等概率地从以下三条路径中选择一条：\n\n- $1 \\to 2 \\to 4 \\to 6$\n- $1 \\to 2 \\to 5 \\to 6$\n- $1 \\to 3 \\to 5 \\to 6$", "locale": "zh-CN"}}}
{"pid": "P2165", "type": "P", "difficulty": 3, "samples": [["8\n1\n2\n2\n3\n1\n1\n3\n3\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2009", "各省省选", "安徽"], "title": "[AHOI2009] 飞行棋", "background": "", "description": "给出圆周上的若干个点，已知点与点之间的弧长，其值均为正整数，并依圆周顺序排列。请找出这些点中有没有可以围成矩形的，并希望在最短时间内找出所有不重复矩形。", "inputFormat": "第一行为正整数 $N$，表示点的个数，接下来 $N$ 行分别为这 $N$ 个点所分割的各个圆弧长度。", "outputFormat": "所构成不重复矩形的个数。", "hint": "$N \\le 20$。\n\n![](https://cdn.luogu.com.cn/upload/pic/13233.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2009] Aeroplane Chess", "background": "", "description": "Given several points on a circle and the arc lengths between consecutive points in circular order (each a positive integer), determine how many distinct rectangles can be formed by choosing four of these points as vertices.", "inputFormat": "The first line contains a positive integer $N$, the number of points. Each of the next $N$ lines gives the length of the arc between consecutive points along the circle, in circular order.", "outputFormat": "Output a single integer: the number of distinct rectangles formed.", "hint": "$N \\le 20$。\n\n![](https://cdn.luogu.com.cn/upload/pic/13233.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2009] 飞行棋", "background": "", "description": "给出圆周上的若干个点，已知点与点之间的弧长，其值均为正整数，并依圆周顺序排列。请找出这些点中有没有可以围成矩形的，并希望在最短时间内找出所有不重复矩形。", "inputFormat": "第一行为正整数 $N$，表示点的个数，接下来 $N$ 行分别为这 $N$ 个点所分割的各个圆弧长度。", "outputFormat": "所构成不重复矩形的个数。", "hint": "$N \\le 20$。\n\n![](https://cdn.luogu.com.cn/upload/pic/13233.png)\n", "locale": "zh-CN"}}}
{"pid": "P2166", "type": "P", "difficulty": 6, "samples": [["2\n1 2\n10 20\n1\n0 1 5\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["平衡树"], "title": "Gty的超级妹子树【数据疑似有误】", "background": "我曾在青山之中遇过你，  \n新竹做杖，鬓插紫茱萸。  \n跣足踏过无边丝雨，  \n又拾起燕川雪片片落如席……\n\nGty神(xian)犇(chong)从来不缺妹子……\n\n他又来到了一棵妹子树下，发现每个妹子有一个美丽度……\n\n\n由于Gty很 哲♂学 也很 机♂智，他只对美丽度大于某个值的妹子感兴趣。  \n他想知道某个子树中美丽度大于 $x$ 的妹子个数。\n\n某个妹子的美丽度可能发生变化……\n\n树上可能会出现一只新的妹子……\n\n但是……树枝可能会断裂，于是，Gty 惊讶地发现，他的面前变成了一片妹子树组成的森林……\n\n", "description": "维护一棵初始有 $n$ 个节点的有根树（根节点为 $1$），树上节点编号为 $1 \\sim n$，每个点有一个权值 $w_i$，它可能会变成森林。\n\n\n支持以下操作：\n\n- `0 u x` 询问以 $u$ 为根的子树中，严格大于 $x$ 的值的个数。\n- `1 u x`  把 $u$ 节点的权值改成 $x$。\n- `2 u x`  添加一个编号为“当前树中节点数+1”的节点，其父节点为 $u$，其权值为 $x$。\n- `3 u` 删除 $u$ 与其父亲的边，并使 $u$ 变为其所在连通块的根。\n\n**本题强制在线。**\n\n所有输入的 $u,x$ 都需要异或 $\\text{last}$ 才是真正的输入。其中 $\\text{last}$ 为上一次询问的答案，定义初始 $\\text{last} = 0$。", "inputFormat": "第一行一个正整数 $n$，表示初始节点数。 \n\n接下来 $n-1$ 行，每行两个整数 $u,v$，为树上的一条无向边。\n\n接下来一行 $n$ 个整数 $w_i$，表示初始时每个节点的权值。\n\n接着一行一个正整数 $m$，表示操作个数。\n\n接下来 $m$ 行，每行若干个整数，表示一次操作。\n", "outputFormat": "对每个 $\\text{op}=0$ 的操作，输出一行，包括一个整数，意义见题目描述。\n", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 10^5$，$1\\le u \\le n$，$0 \\le w_i,x < 2^{31}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Gty’s Super Girl Tree [Testdata Suspected Incorrect]", "background": "I once met you among the green hills,  \nLeaning on a new bamboo staff, with purple cornels in your hair.  \nBarefoot, you stepped through the boundless drizzling rain,  \nThen picked up the drifting snowflakes of Yanchuan, falling like a mat...\n\nGty, the godlike (xian) bull (chong), never lacks girls...\n\nHe comes to a “girl tree” again and finds that each girl has a beauty value...\n\nSince Gty is very zhe♂xue and very ji♂zhi, he is only interested in girls whose beauty value is greater than a certain threshold.  \nHe wants to know the number of girls with beauty value greater than $x$ in a certain subtree.\n\nA girl’s beauty value may change...\n\nA new girl may appear on the tree...\n\nHowever... a branch may break. Thus, to Gty’s surprise, what lies before him becomes a forest made of girl trees...", "description": "Maintain a rooted tree with $n$ initial nodes (the root is $1$). Nodes are labeled $1$ to $n$, and each node has a weight $w_i$. The tree may become a forest.\n\nSupport the following operations:\n\n- `0 u x` Query the number of values strictly greater than $x$ in the subtree rooted at $u$.\n- `1 u x` Set the weight of node $u$ to $x$.\n- `2 u x` Add a new node whose id is the current number of nodes plus $1$, with parent $u$ and weight $x$.\n- `3 u` Delete the edge between $u$ and its parent, and make $u$ the root of its connected component.\n\n**This problem is strictly online.**\n\nAll input $u, x$ must be XORed with $\\text{last}$ to get the real input, where $\\text{last}$ is the previous query’s answer, and initially $\\text{last} = 0$.", "inputFormat": "The first line contains a positive integer $n$, the initial number of nodes.\n\nThe next $n - 1$ lines each contain two integers $u, v$, indicating an undirected edge in the tree.\n\nThe next line contains $n$ integers $w_i$, the initial weight of each node.\n\nThe next line contains a positive integer $m$, the number of operations.\n\nThe next $m$ lines each describe one operation, as specified above.", "outputFormat": "For each operation with $\\text{op} = 0$, output one line with a single integer, as described in the problem statement.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 10^5$, $1 \\le u \\le n$, $0 \\le w_i, x < 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Gty的超级妹子树【数据疑似有误】", "background": "我曾在青山之中遇过你，  \n新竹做杖，鬓插紫茱萸。  \n跣足踏过无边丝雨，  \n又拾起燕川雪片片落如席……\n\nGty神(xian)犇(chong)从来不缺妹子……\n\n他又来到了一棵妹子树下，发现每个妹子有一个美丽度……\n\n\n由于Gty很 哲♂学 也很 机♂智，他只对美丽度大于某个值的妹子感兴趣。  \n他想知道某个子树中美丽度大于 $x$ 的妹子个数。\n\n某个妹子的美丽度可能发生变化……\n\n树上可能会出现一只新的妹子……\n\n但是……树枝可能会断裂，于是，Gty 惊讶地发现，他的面前变成了一片妹子树组成的森林……\n\n", "description": "维护一棵初始有 $n$ 个节点的有根树（根节点为 $1$），树上节点编号为 $1 \\sim n$，每个点有一个权值 $w_i$，它可能会变成森林。\n\n\n支持以下操作：\n\n- `0 u x` 询问以 $u$ 为根的子树中，严格大于 $x$ 的值的个数。\n- `1 u x`  把 $u$ 节点的权值改成 $x$。\n- `2 u x`  添加一个编号为“当前树中节点数+1”的节点，其父节点为 $u$，其权值为 $x$。\n- `3 u` 删除 $u$ 与其父亲的边，并使 $u$ 变为其所在连通块的根。\n\n**本题强制在线。**\n\n所有输入的 $u,x$ 都需要异或 $\\text{last}$ 才是真正的输入。其中 $\\text{last}$ 为上一次询问的答案，定义初始 $\\text{last} = 0$。", "inputFormat": "第一行一个正整数 $n$，表示初始节点数。 \n\n接下来 $n-1$ 行，每行两个整数 $u,v$，为树上的一条无向边。\n\n接下来一行 $n$ 个整数 $w_i$，表示初始时每个节点的权值。\n\n接着一行一个正整数 $m$，表示操作个数。\n\n接下来 $m$ 行，每行若干个整数，表示一次操作。\n", "outputFormat": "对每个 $\\text{op}=0$ 的操作，输出一行，包括一个整数，意义见题目描述。\n", "hint": "### 数据范围及约定\n\n对于 $100\\%$ 的数据，$1\\le n,m \\le 10^5$，$1\\le u \\le n$，$0 \\le w_i,x < 2^{31}$。\n", "locale": "zh-CN"}}}
{"pid": "P2167", "type": "P", "difficulty": 5, "samples": [["5\n3 3\n???r???\n???????\n???????\n3 4\n???????\n?????a?\n???????\n3 3\n???????\n?a??j??\n????aa?\n3 2\na??????\n???????\n???????\n3 2\n???????\n???a???\n????a??", "914852\n0\n0\n871234\n67018"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2009", "各省省选", "山东", "枚举", "容斥原理", "状压 DP"], "title": "[SDOI2009] Bill的挑战", "background": null, "description": "Sheng_bill 不仅有惊人的心算能力，还可以轻松地完成各种统计。在昨天的比赛中，你凭借优秀的程序与他打成了平局，这导致 Sheng_bill  极度的不满。于是他再次挑战你。这次你可不能输。\n\n这次，比赛规则是这样的：\n\n给出 $N$ 个长度相同的字符串（由小写英文字母和 `?` 组成），$S_1,S_2,\\dots,S_N$，求与这 $N$ 个串中的刚好 $K$ 个串匹配的字符串 $T$ 的个数，答案对 $1000003$ 取模。\n\n若字符串 $S_x(1\\le x\\le N)$ 和 $T$ 匹配，满足以下条件：\n1. $|S_x|=|T|$。\n2. 对于任意的 $1\\le i\\le|S_x|$，满足 $S_x[i]= \\texttt{?}$ 或者 $S_x[i]=T[i]$。\n\n其中 $T$ 只包含小写英文字母。", "inputFormat": "**本题包含多组数据**。\n\n第一行一个整数 $T$，表示数据组数。 \n\n对于每组数据，第一行两个整数，$N$ 和 $K$。 \n\n接下来 $N$ 行，每行一个字符串 $S_i$。", "outputFormat": "每组数据输出一行一个整数，表示答案。", "hint": "### 数据规模与约定\n- 对于 $30\\%$ 的数据，$N\\le5$，$|S_i|\\le20$；\n- 对于 $70\\%$ 的数据，$N\\le13$，$|S_i|\\le30$；\n- 对于 $100\\%$ 的数据，$1\\le T\\le 5$，$1\\le N \\le15$，$1\\le|S_i|\\le50$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2009] Bill's Challenge", "background": "", "description": "Sheng_bill not only has amazing mental arithmetic, but can also easily handle various statistics. In yesterday's contest, you tied with him thanks to your excellent program, which made Sheng_bill extremely displeased. So he challenges you again. This time, you must not lose.\n\nThe rules are as follows:\n\nGiven $N$ strings of the same length (composed of lowercase English letters and `?`), $S_1, S_2, \\dots, S_N$, count the number of strings $T$ that match exactly $K$ of these $N$ strings. Output the answer modulo $1000003$.\n\nA string $S_x$ ($1 \\le x \\le N$) matches $T$ if the following conditions hold:\n1. $|S_x| = |T|$.\n2. For any $1 \\le i \\le |S_x|$, either $S_x[i] = \\texttt{?}$ or $S_x[i] = T[i]$.\n\nHere $T$ contains only lowercase English letters.", "inputFormat": "This problem contains multiple test cases.\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains two integers, $N$ and $K$.\n\nThe next $N$ lines each contain a string $S_i$.", "outputFormat": "For each test case, output a single line with one integer, the answer.", "hint": "Constraints and Conventions:\n- For $30\\%$ of the testdata, $N \\le 5$, $|S_i| \\le 20$.\n- For $70\\%$ of the testdata, $N \\le 13$, $|S_i| \\le 30$.\n- For $100\\%$ of the testdata, $1 \\le T \\le 5$, $1 \\le N \\le 15$, $1 \\le |S_i| \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2009] Bill的挑战", "background": null, "description": "Sheng_bill 不仅有惊人的心算能力，还可以轻松地完成各种统计。在昨天的比赛中，你凭借优秀的程序与他打成了平局，这导致 Sheng_bill  极度的不满。于是他再次挑战你。这次你可不能输。\n\n这次，比赛规则是这样的：\n\n给出 $N$ 个长度相同的字符串（由小写英文字母和 `?` 组成），$S_1,S_2,\\dots,S_N$，求与这 $N$ 个串中的刚好 $K$ 个串匹配的字符串 $T$ 的个数，答案对 $1000003$ 取模。\n\n若字符串 $S_x(1\\le x\\le N)$ 和 $T$ 匹配，满足以下条件：\n1. $|S_x|=|T|$。\n2. 对于任意的 $1\\le i\\le|S_x|$，满足 $S_x[i]= \\texttt{?}$ 或者 $S_x[i]=T[i]$。\n\n其中 $T$ 只包含小写英文字母。", "inputFormat": "**本题包含多组数据**。\n\n第一行一个整数 $T$，表示数据组数。 \n\n对于每组数据，第一行两个整数，$N$ 和 $K$。 \n\n接下来 $N$ 行，每行一个字符串 $S_i$。", "outputFormat": "每组数据输出一行一个整数，表示答案。", "hint": "### 数据规模与约定\n- 对于 $30\\%$ 的数据，$N\\le5$，$|S_i|\\le20$；\n- 对于 $70\\%$ 的数据，$N\\le13$，$|S_i|\\le30$；\n- 对于 $100\\%$ 的数据，$1\\le T\\le 5$，$1\\le N \\le15$，$1\\le|S_i|\\le50$。", "locale": "zh-CN"}}}
{"pid": "P2168", "type": "P", "difficulty": 5, "samples": [["4 2\n1\n1\n2\n2\n", "12\n2"], ["6 3\n1\n1\n3\n3\n9\n9\n", "36\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2015", "堆", "NOI", "优先队列", "霍夫曼树"], "title": "[NOI2015] 荷马史诗", "background": "> 追逐影子的人，自己就是影子 —— 荷马", "description": "Allison 最近迷上了文学。她喜欢在一个慵懒的午后，细细地品上一杯卡布奇诺，静静地阅读她爱不释手的《荷马史诗》。但是由《奥德赛》和《伊利亚特》 组成的鸿篇巨制《荷马史诗》实在是太长了，Allison 想通过一种编码方式使得它变得短一些。\n\n一部《荷马史诗》中有 $n$ 种不同的单词，从 $1$ 到 $n$ 进行编号。其中第 $i$ 种单词出现的总次数为 $w_i$。Allison 想要用 $k$ 进制串 $s_i$ 来替换第 $i$ 种单词，使得其满足如下要求：\n\n对于任意的 $1\\leq i, j\\leq n$ ，$i\\ne j$ ，都有：$s_i$ 不是 $s_j$ 的前缀。\n\n现在 Allison 想要知道，如何选择 $s_i$，才能使替换以后得到的新的《荷马史诗》长度最小。在确保总长度最小的情况下，Allison 还想知道最长的 $s_i$ 的最短长度是多少？\n\n一个字符串被称为 $k$ 进制字符串，当且仅当它的每个字符是 $0$ 到 $k-1$ 之间（包括 $0$ 和 $k-1$ ）的整数。\n\n字符串 $str1$ 被称为字符串 $str2$ 的前缀，当且仅当：存在 $1 \\leq t\\leq m$ ，使得 $str1 = str2[1..t]$。其中，$m$ 是字符串 $str2$ 的长度，$str2[1..t]$ 表示 $str2$ 的前 $t$ 个字符组成的字符串。", "inputFormat": "输入的第 $1$ 行包含 $2$ 个正整数 $n, k$ ，中间用单个空格隔开，表示共有 $n$ 种单词，需要使用 $k$ 进制字符串进行替换。\n\n接下来 $n$ 行，第 $i + 1$ 行包含 $1$ 个非负整数 $w_i$，表示第 $i$ 种单词的出现次数。", "outputFormat": "输出包括 $2$ 行。\n\n第 $1$ 行输出 $1$ 个整数，为《荷马史诗》经过重新编码以后的最短长度。\n\n第 $2$ 行输出 $1$ 个整数，为保证最短总长度的情况下，最长字符串 $s_i$ 的最短长度。", "hint": "#### 【样例解释】\n\n#### 样例 1 解释\n\n用 $X(k)$ 表示 $X$ 是以 $k$ 进制表示的字符串。\n\n一种最优方案：令 $00(2)$ 替换第 $1$ 种单词， $01(2)$ 替换第 $2$ 种单词， $10(2)$ 替换第 $3$ 种单词，$11(2)$ 替换第 $4$ 种单词。在这种方案下，编码以后的最短长度为：\n\n$$1 × 2 + 1 × 2 + 2 × 2 + 2 × 2 = 12$$\n\n最长字符串 $s_i$ 的长度为 $2$ 。\n\n一种非最优方案：令 $000(2)$ 替换第 $1$ 种单词，$001(2)$ 替换第 $2$ 种单词，$01(2)$ 替换第 $3$ 种单词，$1(2)$ 替换第 $4$ 种单词。在这种方案下，编码以后的最短长度为：\n\n$$1 × 3 + 1 × 3 + 2 × 2 + 2 × 1 = 12$$\n\n最长字符串 $s_i$ 的长度为 $3$ 。与最优方案相比，文章的长度相同，但是最长字符串的长度更长一些。\n\n#### 样例 2 解释\n\n一种最优方案：令 $000(3)$ 替换第 $1$ 种单词，$001(3)$ 替换第 $2$ 种单词，$01(3)$ 替换第 $3$ 种单词， $02(3)$ 替换第 $4$ 种单词， $1(3)$ 替换第 $5$ 种单词， $2(3)$ 替换第 $6$ 种单词。\n\n#### 【数据规模与约定】\n\n所有测试数据的范围和特点如下表所示（所有数据均满足 $0 < w_i \\leq 10^{11}$）：\n\n::cute-table{tuack}\n\n| 测试点编号 |  $n$ 的规模  | $k$ 的规模 |            备注            |\n| :--------: | :----------: | :--------: | :------------------------: |\n|    $1$     |    $n=3$     |   $k=2$    |                            |\n|    $2$     |    $n=5$     |   ^        | ^                          |\n|    $3$     |    $n=16$    |   ^        |     所有 $w_i$ 均相等      |\n|    $4$     |  $n=1\\,000$  |   ^        | $w_i$ 在取值范围内均匀随机 |\n|    $5$     |  ^           |   ^        |                            |\n|    $6$     | $n=100\\,000$ |   ^        | ^                          |\n|    $7$     | ^            |   ^        |     所有 $w_i$ 均相等      |\n|    $8$     | ^            |   ^        |                            |\n|    $9$     |    $n=7$     |   $k=3$    | ^                          |\n|    $10$    |    $n=16$    |   ^        |     所有 $w_i$ 均相等      |\n|    $11$    |  $n=1\\,001$  |   ^        |     ^                      |\n|    $12$    | $n=99\\,999$  |   $k=4$    |     ^                      |\n|    $13$    | $n=100\\,000$ |   ^        | ^                          |\n|    $14$    | ^            |   ^        | ^                          |\n|    $15$    |  $n=1\\,000$  |   $k=5$    | ^                          |\n|    $16$    | $n=100\\,000$ |   $k=7$    | $w_i$ 在取值范围内均匀随机 |\n|    $17$    | ^            |   ^        |                            |\n|    $18$    | ^            |   $k=8$    | $w_i$ 在取值范围内均匀随机 |\n|    $19$    | ^            |   $k=9$    |                            |\n|    $20$    | ^            |   ^        | ^                          |\n\n#### 【提示】\n\n选手请注意使用 64 位整数进行输入输出、存储和计算。\n\n#### 【评分方式】\n\n对于每个测试点：\n\n- 若输出文件的第 $1$ 行正确，得到该测试点 $40\\%$ 的分数；\n- 若输出文件完全正确，得到该测试点 $100\\%$ 的分数。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2015] Homer’s Epic", "background": "> He who chases a shadow is himself a shadow —— Homer.", "description": "Allison has recently become obsessed with literature. On a lazy afternoon, she likes to slowly sip a cappuccino and quietly read her beloved Homer’s Epic. However, the grand work composed of The Odyssey and The Iliad is just too long, so Allison wants to shorten it by using an encoding method.\n\nIn one Homer’s Epic, there are $n$ distinct words, numbered from $1$ to $n$. The total number of occurrences of the $i$-th word is $w_i$. Allison wants to replace the $i$-th word with a base-$k$ string $s_i$ such that the following condition holds:\n\nFor any $1 \\leq i, j \\leq n$, $i \\ne j$, we have: $s_i$ is not a prefix of $s_j$.\n\nNow Allison wants to know how to choose $s_i$ to minimize the length of the new Homer’s Epic after replacement. Among all choices that minimize the total length, she also wants to know the minimal possible value of the maximum length among all $s_i$.\n\nA string is called a base-$k$ string if and only if each of its characters is an integer between $0$ and $k-1$ inclusive.\n\nA string $str1$ is called a prefix of a string $str2$ if and only if there exists $1 \\leq t \\leq m$ such that $str1 = str2[1..t]$. Here, $m$ is the length of $str2$, and $str2[1..t]$ denotes the string consisting of the first $t$ characters of $str2$.", "inputFormat": "The first line contains $2$ positive integers $n, k$, separated by a single space, indicating that there are $n$ types of words and base-$k$ strings are to be used for replacement.\n\nThe next $n$ lines: the $(i+1)$-th line contains $1$ positive integer $w_i$, indicating the number of occurrences of the $i$-th word.", "outputFormat": "Output consists of $2$ lines.\n\nThe first line contains $1$ integer, the minimal total length of Homer’s Epic after re-encoding.\n\nThe second line contains $1$ integer, the minimal possible value of the maximum length among all $s_i$ under the condition that the total length is minimized.", "hint": "Sample Explanation\n\nSample 1 explanation\n\nLet $X(k)$ denote that $X$ is a base-$k$ string.\n\nOne optimal scheme: let $00(2)$ replace the $1$-st word, $01(2)$ replace the $2$-nd word, $10(2)$ replace the $3$-rd word, and $11(2)$ replace the $4$-th word. Under this scheme, the minimal encoded length is:\n$$1 × 2 + 1 × 2 + 2 × 2 + 2 × 2 = 12$$\nThe maximum length of $s_i$ is $2$.\n\nA non-optimal scheme: let $000(2)$ replace the $1$-st word, $001(2)$ replace the $2$-nd word, $01(2)$ replace the $3$-rd word, and $1(2)$ replace the $4$-th word. Under this scheme, the minimal encoded length is:\n$$1 × 3 + 1 × 3 + 2 × 2 + 2 × 1 = 12$$\nThe maximum length of $s_i$ is $3$. Compared with the optimal scheme, the article length is the same, but the maximum codeword length is larger.\n\nSample 2 explanation\n\nOne optimal scheme: let $000(3)$ replace the $1$-st word, $001(3)$ replace the $2$-nd word, $01(3)$ replace the $3$-rd word, $02(3)$ replace the $4$-th word, $1(3)$ replace the $5$-th word, and $2(3)$ replace the $6$-th word.\n\nConstraints\n\nAll testdata ranges and characteristics are as follows (all data satisfy $0 < w_i \\leq 10^{11}$):\n| Test No. | Scale of $n$ | Scale of $k$ | Remarks |\n| :------: | :-----------: | :----------: | :-----: |\n| $1$ | $n=3$ | $k=2$ | |\n| $2$ | $n=5$ | ^ | ^ |\n| $3$ | $n=16$ | ^ | All $w_i$ are equal |\n| $4$ | $n=1\\,000$ | ^ | $w_i$ are uniformly random within the range |\n| $5$ | ^ | ^ | |\n| $6$ | $n=100\\,000$ | ^ | ^ |\n| $7$ | ^ | ^ | All $w_i$ are equal |\n| $8$ | ^ | ^ | |\n| $9$ | $n=7$ | $k=3$ | ^ |\n| $10$ | $n=16$ | ^ | All $w_i$ are equal |\n| $11$ | $n=1\\,001$ | ^ | ^ |\n| $12$ | $n=99\\,999$ | $k=4$ | ^ |\n| $13$ | $n=100\\,000$ | ^ | ^ |\n| $14$ | ^ | ^ | ^ |\n| $15$ | $n=1\\,000$ | $k=5$ | ^ |\n| $16$ | $n=100\\,000$ | $k=7$ | $w_i$ are uniformly random within the range |\n| $17$ | ^ | ^ | |\n| $18$ | ^ | $k=8$ | $w_i$ are uniformly random within the range |\n| $19$ | ^ | $k=9$ | |\n| $20$ | ^ | ^ | ^ |\n\nAdditional Tips\n\nContestants should use 64-bit integers for input, output, storage, and computation.\n\nScoring\n\nFor each test point:\n- If the first line of the output is correct, you will receive $40\\%$ of the score for that test point.\n- If the entire output is correct, you will receive $100\\%$ of the score.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2015] 荷马史诗", "background": "> 追逐影子的人，自己就是影子 —— 荷马", "description": "Allison 最近迷上了文学。她喜欢在一个慵懒的午后，细细地品上一杯卡布奇诺，静静地阅读她爱不释手的《荷马史诗》。但是由《奥德赛》和《伊利亚特》 组成的鸿篇巨制《荷马史诗》实在是太长了，Allison 想通过一种编码方式使得它变得短一些。\n\n一部《荷马史诗》中有 $n$ 种不同的单词，从 $1$ 到 $n$ 进行编号。其中第 $i$ 种单词出现的总次数为 $w_i$。Allison 想要用 $k$ 进制串 $s_i$ 来替换第 $i$ 种单词，使得其满足如下要求：\n\n对于任意的 $1\\leq i, j\\leq n$ ，$i\\ne j$ ，都有：$s_i$ 不是 $s_j$ 的前缀。\n\n现在 Allison 想要知道，如何选择 $s_i$，才能使替换以后得到的新的《荷马史诗》长度最小。在确保总长度最小的情况下，Allison 还想知道最长的 $s_i$ 的最短长度是多少？\n\n一个字符串被称为 $k$ 进制字符串，当且仅当它的每个字符是 $0$ 到 $k-1$ 之间（包括 $0$ 和 $k-1$ ）的整数。\n\n字符串 $str1$ 被称为字符串 $str2$ 的前缀，当且仅当：存在 $1 \\leq t\\leq m$ ，使得 $str1 = str2[1..t]$。其中，$m$ 是字符串 $str2$ 的长度，$str2[1..t]$ 表示 $str2$ 的前 $t$ 个字符组成的字符串。", "inputFormat": "输入的第 $1$ 行包含 $2$ 个正整数 $n, k$ ，中间用单个空格隔开，表示共有 $n$ 种单词，需要使用 $k$ 进制字符串进行替换。\n\n接下来 $n$ 行，第 $i + 1$ 行包含 $1$ 个非负整数 $w_i$，表示第 $i$ 种单词的出现次数。", "outputFormat": "输出包括 $2$ 行。\n\n第 $1$ 行输出 $1$ 个整数，为《荷马史诗》经过重新编码以后的最短长度。\n\n第 $2$ 行输出 $1$ 个整数，为保证最短总长度的情况下，最长字符串 $s_i$ 的最短长度。", "hint": "#### 【样例解释】\n\n#### 样例 1 解释\n\n用 $X(k)$ 表示 $X$ 是以 $k$ 进制表示的字符串。\n\n一种最优方案：令 $00(2)$ 替换第 $1$ 种单词， $01(2)$ 替换第 $2$ 种单词， $10(2)$ 替换第 $3$ 种单词，$11(2)$ 替换第 $4$ 种单词。在这种方案下，编码以后的最短长度为：\n\n$$1 × 2 + 1 × 2 + 2 × 2 + 2 × 2 = 12$$\n\n最长字符串 $s_i$ 的长度为 $2$ 。\n\n一种非最优方案：令 $000(2)$ 替换第 $1$ 种单词，$001(2)$ 替换第 $2$ 种单词，$01(2)$ 替换第 $3$ 种单词，$1(2)$ 替换第 $4$ 种单词。在这种方案下，编码以后的最短长度为：\n\n$$1 × 3 + 1 × 3 + 2 × 2 + 2 × 1 = 12$$\n\n最长字符串 $s_i$ 的长度为 $3$ 。与最优方案相比，文章的长度相同，但是最长字符串的长度更长一些。\n\n#### 样例 2 解释\n\n一种最优方案：令 $000(3)$ 替换第 $1$ 种单词，$001(3)$ 替换第 $2$ 种单词，$01(3)$ 替换第 $3$ 种单词， $02(3)$ 替换第 $4$ 种单词， $1(3)$ 替换第 $5$ 种单词， $2(3)$ 替换第 $6$ 种单词。\n\n#### 【数据规模与约定】\n\n所有测试数据的范围和特点如下表所示（所有数据均满足 $0 < w_i \\leq 10^{11}$）：\n\n::cute-table{tuack}\n\n| 测试点编号 |  $n$ 的规模  | $k$ 的规模 |            备注            |\n| :--------: | :----------: | :--------: | :------------------------: |\n|    $1$     |    $n=3$     |   $k=2$    |                            |\n|    $2$     |    $n=5$     |   ^        | ^                          |\n|    $3$     |    $n=16$    |   ^        |     所有 $w_i$ 均相等      |\n|    $4$     |  $n=1\\,000$  |   ^        | $w_i$ 在取值范围内均匀随机 |\n|    $5$     |  ^           |   ^        |                            |\n|    $6$     | $n=100\\,000$ |   ^        | ^                          |\n|    $7$     | ^            |   ^        |     所有 $w_i$ 均相等      |\n|    $8$     | ^            |   ^        |                            |\n|    $9$     |    $n=7$     |   $k=3$    | ^                          |\n|    $10$    |    $n=16$    |   ^        |     所有 $w_i$ 均相等      |\n|    $11$    |  $n=1\\,001$  |   ^        |     ^                      |\n|    $12$    | $n=99\\,999$  |   $k=4$    |     ^                      |\n|    $13$    | $n=100\\,000$ |   ^        | ^                          |\n|    $14$    | ^            |   ^        | ^                          |\n|    $15$    |  $n=1\\,000$  |   $k=5$    | ^                          |\n|    $16$    | $n=100\\,000$ |   $k=7$    | $w_i$ 在取值范围内均匀随机 |\n|    $17$    | ^            |   ^        |                            |\n|    $18$    | ^            |   $k=8$    | $w_i$ 在取值范围内均匀随机 |\n|    $19$    | ^            |   $k=9$    |                            |\n|    $20$    | ^            |   ^        | ^                          |\n\n#### 【提示】\n\n选手请注意使用 64 位整数进行输入输出、存储和计算。\n\n#### 【评分方式】\n\n对于每个测试点：\n\n- 若输出文件的第 $1$ 行正确，得到该测试点 $40\\%$ 的分数；\n- 若输出文件完全正确，得到该测试点 $100\\%$ 的分数。", "locale": "zh-CN"}}}
{"pid": "P2169", "type": "P", "difficulty": 4, "samples": [["3 2\n1 2 1\n2 3 1\n", "2"], ["5 5\n1 2 1\n2 3 6\n3 4 1\n4 2 1\n3 5 2\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "拓扑排序", "最短路", "强连通分量", "Tarjan"], "title": "正则表达式", "background": "小Z童鞋一日意外的看到小X写了一个正则表达式的高级程序，这个正则表达式程序仅仅由字符“0”,“1”，“.”和“\\*”构成，但是他能够匹配出所有在OJ上都AC的程序的核心代码！小Z大为颇感好奇，于是他决定入侵小X的电脑上去获得这个正则表达式的高级程序。\n", "description": "在 Internet 网络中的每台电脑并不是直接一对一连通的，而是某些电脑之间存在单向的网络连接，也就是说存在 $A$ 到 $B$ 的连接不一定存在 $B$ 到 $A$ 的连接，并且有些连接传输速度很快，有些则很慢，所以不同连接传输所花的时间是有大有小的。另外，如果存在 $A$ 到 $B$ 的连接的同时也存在 $B$ 到 $A$ 的连接的话，那么 $A$ 和 $B$ 实际上处于同一局域网内，可以通过本地传输，这样花费的传输时间为 $0$。\n\n现在小 Z 告诉你整个网络的构成情况，他希望知道从他的电脑（编号为 $1$），到小 X 的电脑（编号为 $n$）所需要的最短传输时间。", "inputFormat": "第一行两个整数 $n,m$，表示有 $n$ 台电脑，$m$ 个连接关系。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示从电脑 $u$ 到电脑 $v$ 传输信息的时间为 $w$。", "outputFormat": "输出文件仅一行为最短传输时间。\n", "hint": "- 对于  $40\\%$ 的数据，$1\\leq n\\leq 10^3$, $1\\leq m\\leq 10^4$；\n- 对于  $70\\%$ 的数据，$1\\leq n\\leq 5 \\times 10^3$， $1\\leq m\\leq 10^5$；\n- 对于  $100\\%$ 的数据，$1\\leq n\\leq 2 \\times 10^5$， $1\\leq m\\leq 10^6$。\n\n保证答案在 `int` 范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Regular Expression", "background": "One day, student Xiao Z unexpectedly saw Xiao X write an advanced regular expression program. This regex is composed only of the characters \"0\", \"1\", \".\", and \"*\", yet it can match the core code of all programs that get AC on the OJ! Xiao Z became very curious, so he decided to hack into Xiao X's computer to obtain this advanced regex program.", "description": "In the Internet, computers are not directly connected one-to-one. Instead, some computers have one-way network connections. That is, even if there is a connection from $A$ to $B$, there may not be a connection from $B$ to $A$. Moreover, some connections are fast while others are slow, so the transmission time differs across connections. In addition, if both the connection from $A$ to $B$ and the connection from $B$ to $A$ exist, then $A$ and $B$ are effectively in the same LAN and can communicate locally, with a transmission time of $0$.\n\nNow Xiao Z gives you the topology of the network. He wants to know the shortest transmission time from his computer (numbered $1$) to Xiao X's computer (numbered $n$).", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ computers and $m$ connections.\n\nThe next $m$ lines each contain three integers $u, v, w$, meaning the time to transmit information from computer $u$ to computer $v$ is $w$.", "outputFormat": "Output a single line with the shortest transmission time.", "hint": "- For $40\\%$ of the data, $1 \\leq n \\leq 10^3$, $1 \\leq m \\leq 10^4$.\n- For $70\\%$ of the data, $1 \\leq n \\leq 5 \\times 10^3$, $1 \\leq m \\leq 10^5$.\n- For $100\\%$ of the data, $1 \\leq n \\leq 2 \\times 10^5$, $1 \\leq m \\leq 10^6$.\n\nThe answer is guaranteed to fit in the `int` range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "正则表达式", "background": "小Z童鞋一日意外的看到小X写了一个正则表达式的高级程序，这个正则表达式程序仅仅由字符“0”,“1”，“.”和“\\*”构成，但是他能够匹配出所有在OJ上都AC的程序的核心代码！小Z大为颇感好奇，于是他决定入侵小X的电脑上去获得这个正则表达式的高级程序。\n", "description": "在 Internet 网络中的每台电脑并不是直接一对一连通的，而是某些电脑之间存在单向的网络连接，也就是说存在 $A$ 到 $B$ 的连接不一定存在 $B$ 到 $A$ 的连接，并且有些连接传输速度很快，有些则很慢，所以不同连接传输所花的时间是有大有小的。另外，如果存在 $A$ 到 $B$ 的连接的同时也存在 $B$ 到 $A$ 的连接的话，那么 $A$ 和 $B$ 实际上处于同一局域网内，可以通过本地传输，这样花费的传输时间为 $0$。\n\n现在小 Z 告诉你整个网络的构成情况，他希望知道从他的电脑（编号为 $1$），到小 X 的电脑（编号为 $n$）所需要的最短传输时间。", "inputFormat": "第一行两个整数 $n,m$，表示有 $n$ 台电脑，$m$ 个连接关系。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示从电脑 $u$ 到电脑 $v$ 传输信息的时间为 $w$。", "outputFormat": "输出文件仅一行为最短传输时间。\n", "hint": "- 对于  $40\\%$ 的数据，$1\\leq n\\leq 10^3$, $1\\leq m\\leq 10^4$；\n- 对于  $70\\%$ 的数据，$1\\leq n\\leq 5 \\times 10^3$， $1\\leq m\\leq 10^5$；\n- 对于  $100\\%$ 的数据，$1\\leq n\\leq 2 \\times 10^5$， $1\\leq m\\leq 10^6$。\n\n保证答案在 `int` 范围内。", "locale": "zh-CN"}}}
{"pid": "P2170", "type": "P", "difficulty": 3, "samples": [["4 3 2\n1 2\n3 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "并查集", "洛谷原创", "背包 DP", "进制", "bitset"], "title": "选学霸", "background": "", "description": "老师想从 $n$ 名学生中选 $m$ 人当学霸，但有 $k$ 对人实力相当，如果实力相当的人中，一部分被选上，另一部分没有，同学们就会抗议。所以老师想请你帮他求出他该选多少学霸，才能既不让同学们抗议，又与原来的 $m$ 尽可能接近。", "inputFormat": "第一行，三个正整数 $n,m,k$。\n\n接下来 $k$ 行，每行 $2$ 个数，表示一对实力相当的人的编号（编号为 $1,2,\\cdots n$）。", "outputFormat": "共一行，表示既不让同学们抗议，又与原来的 $m$ 尽可能接近的选出学霸的数目。\n\n如果有两种方案与 $m$ 的差的绝对值相等，选较小的一种。", "hint": "对于 $100\\%$ 的数据，满足 $1 \\le n\\le 2 \\times 10^4,0 \\le m \\le n,0\\le k\\le 2\\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Selecting Top Students", "background": "", "description": "The teacher wants to select $m$ students out of $n$ to be top students, but there are $k$ pairs of students who are equally strong. If, among students of equal strength, some are selected while others are not, the class will protest. Therefore, the teacher asks you to determine how many top students he should select so that there is no protest and the number is as close as possible to the original $m$.", "inputFormat": "The first line contains three positive integers $n, m, k$.\n\nThe next $k$ lines each contain $2$ numbers, representing the IDs of a pair of equally strong students (IDs are $1, 2, \\cdots, n$).", "outputFormat": "Output a single line: the number of top students to select such that there is no protest and the number is as close as possible to the original $m$.\n\nIf there are two options whose absolute difference from $m$ is the same, choose the smaller one.", "hint": "For $100\\%$ of the testdata, it holds that $1 \\le n \\le 2 \\times 10^4, 0 \\le m \\le n, 0 \\le k \\le 2 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "选学霸", "background": "", "description": "老师想从 $n$ 名学生中选 $m$ 人当学霸，但有 $k$ 对人实力相当，如果实力相当的人中，一部分被选上，另一部分没有，同学们就会抗议。所以老师想请你帮他求出他该选多少学霸，才能既不让同学们抗议，又与原来的 $m$ 尽可能接近。", "inputFormat": "第一行，三个正整数 $n,m,k$。\n\n接下来 $k$ 行，每行 $2$ 个数，表示一对实力相当的人的编号（编号为 $1,2,\\cdots n$）。", "outputFormat": "共一行，表示既不让同学们抗议，又与原来的 $m$ 尽可能接近的选出学霸的数目。\n\n如果有两种方案与 $m$ 的差的绝对值相等，选较小的一种。", "hint": "对于 $100\\%$ 的数据，满足 $1 \\le n\\le 2 \\times 10^4,0 \\le m \\le n,0\\le k\\le 2\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2171", "type": "P", "difficulty": 4, "samples": [["8\n1 4 3 9 10 35 2 7\n", "deep=5\n2\n3\n7\n35\n10\n9\n4\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["笛卡尔树"], "title": "Hz 吐泡泡", "background": "Hz 大大是一种可爱的动物（神）。他很喜欢吐泡泡（更喜欢写作业）。", "description": "这天，Hz 大大心血来潮，吐了 $n$ 个不同的泡泡玩（保证没有重复的泡泡）。因为他还要写作业，所以他请你帮他把这些泡泡排序成树。输出它的后序遍历。\n\n具体来说，Hz 会使用二叉查找树（BST）的算法，将这些泡泡**依次**插入到树中。每次插入后新的泡泡位于一个叶子上，并且整棵树的中序遍历保持升序。\n\n全部插入完成后的二叉树即是所要求的树。", "inputFormat": "共 $2$ 行。\n\n第一行，$1$ 个整数 $n$。\n\n第二行，$n$ 个整数，第 $i$ 个整数 $a_i$ 代表第 $i$ 个泡泡的大小。", "outputFormat": "共 $2$ 行。\n\n第一行，输出树的深度。\n\n接下来输出 n 行，一行一个整数，表示树的后序遍历。", "hint": "本题分为两个 Subtask，第一个 Subtask 共 10 个测试点，每个测试点 5 分，第二个 Subtask 共 5 个测试点，每个测试点 10 分。\n\n$1\\le n\\le 3\\times 10^5$，$1\\le a_i\\le 10^9$，所有 $a_i$ 互不相同。", "locale": "zh-CN", "translations": {"en": {"title": "Hz Blows Bubbles", "background": "Hz is a cute creature (a “god”). He likes blowing bubbles (but likes doing homework even more).", "description": "One day, on a whim, Hz blew $n$ different bubbles to play with (guaranteed to be no duplicates). Because he still has homework to do, he asks you to help sort these bubbles into a tree and output its postorder traversal.\n\nSpecifically, Hz uses the binary search tree (BST) algorithm to insert the bubbles into the tree in the given order. Each insertion adds the new bubble as a leaf, and the in-order traversal of the whole tree remains in ascending order.\n\nThe binary tree after all insertions is the required tree.", "inputFormat": "A total of $2$ lines.\n\n- The first line contains $1$ integer $n$.\n- The second line contains $n$ integers, where the $i$-th integer $a_i$ is the size of the $i$-th bubble.", "outputFormat": "A total of $n+1$ lines.\n\n- The first line outputs the depth of the tree.\n- Then output $n$ lines, one integer per line, giving the postorder traversal of the tree.", "hint": "- This problem has two subtasks. The first subtask has $10$ test points, each worth $5$ points. The second subtask has $5$ test points, each worth $10$ points.\n- Constraints: $1 \\le n \\le 3 \\times 10^5$, $1 \\le a_i \\le 10^9$, and all $a_i$ are distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Hz 吐泡泡", "background": "Hz 大大是一种可爱的动物（神）。他很喜欢吐泡泡（更喜欢写作业）。", "description": "这天，Hz 大大心血来潮，吐了 $n$ 个不同的泡泡玩（保证没有重复的泡泡）。因为他还要写作业，所以他请你帮他把这些泡泡排序成树。输出它的后序遍历。\n\n具体来说，Hz 会使用二叉查找树（BST）的算法，将这些泡泡**依次**插入到树中。每次插入后新的泡泡位于一个叶子上，并且整棵树的中序遍历保持升序。\n\n全部插入完成后的二叉树即是所要求的树。", "inputFormat": "共 $2$ 行。\n\n第一行，$1$ 个整数 $n$。\n\n第二行，$n$ 个整数，第 $i$ 个整数 $a_i$ 代表第 $i$ 个泡泡的大小。", "outputFormat": "共 $2$ 行。\n\n第一行，输出树的深度。\n\n接下来输出 n 行，一行一个整数，表示树的后序遍历。", "hint": "本题分为两个 Subtask，第一个 Subtask 共 10 个测试点，每个测试点 5 分，第二个 Subtask 共 5 个测试点，每个测试点 10 分。\n\n$1\\le n\\le 3\\times 10^5$，$1\\le a_i\\le 10^9$，所有 $a_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P2172", "type": "P", "difficulty": 6, "samples": [["3 3 1 2\n...\n.x.\n...", "4"], ["5 4 1 1\n....\n..x.\n...x\n....\nx...", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["集训队互测", "网络流", "二分图"], "title": "[国家集训队] 部落战争", "background": "lanzerb 的部落在 A 国的上部，他们不满天寒地冻的环境，于是准备向A国的下部征战来获得更大的领土。", "description": "A 国是一个 $M\\times N$ 的矩阵，其中某些地方是城镇，某些地方是高山深涧无人居住。lanzerb 把自己的部落分成若干支军队，他们约定：\n\n每支军队可以从任意一个城镇出发，并只能从上往向下征战，不能回头。途中只能经过城镇，不能经过高山深涧。\n\n如果某个城镇被某支军队到过，则其他军队不能再去那个城镇了。\n每支军队都可以在任意一个城镇停止征战。\n\n所有军队都很奇怪，他们走的方法有点像国际象棋中的马。不过马每次只能走 $1\\times2$ 的路线，而他们只能走 $R\\times C$ 的路线。\n\nlanzerb 的野心使得他的目标是统一全国，但是兵力的限制使得他们在配备人手时力不从心。假设他们每支军队都能顺利占领这支军队经过的所有城镇，请你帮 lanzerb 算算至少要多少支军队才能完成统一全国的大业。", "inputFormat": "第一行包含 $4$ 个整数 $M,N,R,C$，意义见问题描述。接下来 $M$ 行每行一个长度为 $N$ 的字符串。如果某个字符是 `.` 表示这个地方是城镇；如果这个字符是 `x` 则表示这个地方是高山深涧。", "outputFormat": "输出一个整数，表示最少的军队个数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le M,N\\le 50,1\\le R,C\\le 10$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Tribal War", "background": "lanzerb’s tribe is in the northern part of Country A. Dissatisfied with the freezing weather, they plan to wage war toward the southern part of Country A to seize more territory.", "description": "Country A is an $M \\times N$ matrix, where some cells are towns and some are uninhabited mountains and chasms. lanzerb divides his tribe into several armies, with the following rules:\n\nEach army may start from any town and can only advance downward, from top to bottom, without turning back. Along the way, they may pass only through towns, not through mountains and chasms.\n\nIf a town has been visited by one army, no other army may visit that town again.\nEach army may stop at any town.\n\nAll the armies move in a way similar to a knight in chess. However, while a knight moves in a $1 \\times 2$ pattern, they move in an $R \\times C$ pattern.\n\nDriven by ambition, lanzerb aims to unite the entire country, but limited manpower makes staffing difficult. Assuming each army successfully occupies all towns it passes through, please help lanzerb compute the minimum number of armies needed to unify the entire country.", "inputFormat": "The first line contains $4$ integers $M, N, R, C$, as described above. Then follow $M$ lines, each being a string of length $N$. If a character is `.` it denotes a town; if a character is `x` it denotes mountains and chasms.", "outputFormat": "Output a single integer, the minimum number of armies.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le M, N \\le 50$, $1 \\le R, C \\le 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 部落战争", "background": "lanzerb 的部落在 A 国的上部，他们不满天寒地冻的环境，于是准备向A国的下部征战来获得更大的领土。", "description": "A 国是一个 $M\\times N$ 的矩阵，其中某些地方是城镇，某些地方是高山深涧无人居住。lanzerb 把自己的部落分成若干支军队，他们约定：\n\n每支军队可以从任意一个城镇出发，并只能从上往向下征战，不能回头。途中只能经过城镇，不能经过高山深涧。\n\n如果某个城镇被某支军队到过，则其他军队不能再去那个城镇了。\n每支军队都可以在任意一个城镇停止征战。\n\n所有军队都很奇怪，他们走的方法有点像国际象棋中的马。不过马每次只能走 $1\\times2$ 的路线，而他们只能走 $R\\times C$ 的路线。\n\nlanzerb 的野心使得他的目标是统一全国，但是兵力的限制使得他们在配备人手时力不从心。假设他们每支军队都能顺利占领这支军队经过的所有城镇，请你帮 lanzerb 算算至少要多少支军队才能完成统一全国的大业。", "inputFormat": "第一行包含 $4$ 个整数 $M,N,R,C$，意义见问题描述。接下来 $M$ 行每行一个长度为 $N$ 的字符串。如果某个字符是 `.` 表示这个地方是城镇；如果这个字符是 `x` 则表示这个地方是高山深涧。", "outputFormat": "输出一个整数，表示最少的军队个数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le M,N\\le 50,1\\le R,C\\le 10$。", "locale": "zh-CN"}}}
{"pid": "P2173", "type": "P", "difficulty": 6, "samples": [["4 5 2 7\n1\n2\n3\n4\n1 2 0\n1 3 1\n2 3 0\n2 4 1\n3 4 0\n2 0 1 4\n1 1 2 1\n1 4 3 1\n2 0 1 4\n1 2 3 1\n0 2 5\n2 1 1 4", "4\nSuccess.\nError 2.\n-1\nError 1.\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "各省省选", "平衡树", "浙江", "动态树 LCT"], "title": "[ZJOI2012] 网络", "background": "", "description": "有一个无向图 $G$，每个点有个权值，每条边有一个颜色。这个无向图满足以下两个条件：\n\n1、 对于任意节点连出去的边中，相同颜色的边不超过两条。\n\n2、图中不存在同色的环，同色的环指相同颜色的边构成的环。\n\n在这个图上，你要支持以下三种操作：\n\n- `0 x y` 表示把节点 $x$ 的权值改为 $y$\n\n- `1 u v w` 表示将边 $(u,v)$ 的颜色改为 $w$。  \n\n- `2 c u v` 表示查询由颜色 $c$ 的边构成的图中，所有可能在 $u \\to v$ 之间的简单路径上的节点的权值的最大值。\n", "inputFormat": "第一行四个正整数 $n,m,C,k$，分别表示节点数、边数、颜色数和操作数。\n\n接下来 $n$ 行，每行一个正整数 $v_i$，为节点 $i$ 的权值。\n\n之后 $m$ 行，每行三个正整数 $u,v,w$，为一条连接 $u,v$ 节点的边，颜色为$w$。\n\n最后 $k$ 行，每行若干个正整数，表示一次操作。", "outputFormat": "输出若干行，每行输出一个对应的信息。\n\n1、 对于修改节点权值操作，不需要输出信息。\n\n2、对于修改边的颜色操作，按以下几类输出：\n\n- 若不存在连接节点 $u$ 和节点 $v$ 的边，输出 `No such edge.`。\n\n- 若修改后不满足条件 $1$，不修改边的颜色，并输出 `Error 1.`。\n\n- 若修改后不满足条件 $2$，不修改边的颜色，并输出 `Error 2.`。\n\n- 其他情况，成功修改边的颜色，并输出 `Success.`。\n\n输出满足条件的第一条信息即可，即若同时不满足条件 $1,2$ ，则只需要输出`Error 1.`。\n\n3、 对于查询操作，输出一个整数表示答案。若 $u,v$ 之间没有颜色 $c$ 构成的路径，则输出 $-1$。\n", "hint": " ![](https://cdn.luogu.com.cn/upload/pic/1714.png) \n\n颜色 $0$ 为实线的边，颜色 $1$ 为虚线的边，\n\n由颜色 $0$ 构成的从节点 $1$ 到节点 $4$ 的路径有 $1 \\to 2 \\to 4$，故$\\max\\{v_1, v_2, v_4\\} = \\max\\{ 1, 2, 4 \\} = 4$。\n\n将连接节点 $1$ 和节点 $2$ 的边修改为颜色 $1$，修改成功，输出 `Success.`\n\n将连接节点 $4$ 和节点 $3$ 的边修改为颜色 $1$，由于修改后会使得存在由颜色 $1$ 构成的环( $1 – 2 – 4 – 3 – 1$ )，不满足条件 $2$，故不修改，并输`Error 2`。\n\n不存在颜色 $0$ 构成的从节点 $1$ 到节点 $4$ 的边，输出 `-1`。\n\n将连接节点 $2$ 和节点 $3$ 的边修改为颜色 $1$，由于修改后节点 $2$ 的连出去的颜色为 $1$ 的边有 $3$ 条，故不满足条件 $1$，故不修改，并输出`Error 1.` 。\n\n将节点 $2$ 的权值修改为 $5$。\n\n由颜色 $1$ 构成的从节点 $1$ 到节点 $4$ 的路径有 $1 \\to 2 \\to 4$，故$\\max\\{v_1, v_2, v_4\\} = \\max\\{ 1, 5, 4 \\} = 5$。\n\n【数据范围】\n\n对于 $30\\%$ 的数据：$n ≤ 1000$，$m ≤ 10^4$，$k ≤ 1000$；   \n另有 $20\\%$ 的数据：$n ≤ 10^4$，$m ≤ 10^5$，$C = 1$，$k ≤ 10^5$；   \n对于 $100\\%$ 的数据：$n ≤ 10^4$，$m ≤ 10^5$，$C ≤ 10$，$k ≤ 10^5$。  \n\n$1\\le u,v,x \\le n$，$0 \\le c < C$，保证图中没有重边和自环。\n", "locale": "zh-CN", "translations": {"en": {"title": "[ZJOI2012] Network", "background": "", "description": "There is an undirected graph $G$. Each node has a weight, and each edge has a color. This undirected graph satisfies the following two conditions:\n\n1. For any node, among all edges incident to it, there are at most two edges of the same color.\n\n2. There is no monochromatic cycle in the graph, i.e., no cycle formed by edges of the same color.\n\nOn this graph, you need to support the following three operations:\n\n- `0 x y` means set the weight of node $x$ to $y$.\n\n- `1 u v w` means change the color of edge $(u, v)$ to $w$.\n\n- `2 c u v` means query, in the subgraph formed by edges of color $c$, the maximum weight among all nodes that lie on any simple path from $u$ to $v$.", "inputFormat": "The first line contains four positive integers $n, m, C, k$, denoting the number of nodes, the number of edges, the number of colors, and the number of operations, respectively.\n\nThe next $n$ lines each contain one positive integer $v_i$, the weight of node $i$.\n\nThe next $m$ lines each contain three positive integers $u, v, w$, denoting an edge connecting nodes $u$ and $v$ with color $w$.\n\nThe last $k$ lines each contain several positive integers, representing one operation.", "outputFormat": "Output several lines, each containing the corresponding message.\n\n1. For node weight modification operations, no output is required.\n\n2. For edge color modification operations, print one of the following:\n\n- If there is no edge connecting node $u$ and node $v$, print `No such edge.`.\n\n- If the modification would violate condition 1, do not modify the edge color and print `Error 1.`.\n\n- If the modification would violate condition 2, do not modify the edge color and print `Error 2.`.\n\n- Otherwise, modify the edge color successfully and print `Success.`.\n\nOnly print the first applicable message. That is, if both conditions 1 and 2 would be violated, print only `Error 1.`.\n\n3. For query operations, print one integer as the answer. If there is no path of color $c$ between $u$ and $v$, print $-1$.", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1714.png)\n\nEdges of color $0$ are solid; edges of color $1$ are dashed.\n\nIn the subgraph formed by edges of color $0$, there is a path from node $1$ to node $4$: $1 \\to 2 \\to 4$. Thus $\\max\\{ v_1, v_2, v_4 \\} = \\max\\{ 1, 2, 4 \\} = 4$.\n\nChanging the edge between nodes $1$ and $2$ to color $1$ succeeds, so print `Success.`.\n\nChanging the edge between nodes $4$ and $3$ to color $1$ would create a monochromatic cycle of color $1$ ($1 – 2 – 4 – 3 – 1$), violating condition 2, so do not modify it and print `Error 2.`.\n\nThere is no path of color $0$ from node $1$ to node $4$, so print $-1$.\n\nChanging the edge between nodes $2$ and $3$ to color $1$ would make node $2$ incident to three edges of color $1$, violating condition 1, so do not modify it and print `Error 1.`.\n\nChange the weight of node $2$ to $5$.\n\nIn the subgraph formed by edges of color $1$, there is a path from node $1$ to node $4$: $1 \\to 2 \\to 4$. Thus $\\max\\{ v_1, v_2, v_4 \\} = \\max\\{ 1, 5, 4 \\} = 5$.\n\nConstraints\n\n- For $30\\%$ of the testdata: $n \\le 1000$, $m \\le 10^4$, $k \\le 1000$.\n- Additionally, for $20\\%$ of the testdata: $n \\le 10^4$, $m \\le 10^5$, $C = 1$, $k \\le 10^5$.\n- For $100\\%$ of the testdata: $n \\le 10^4$, $m \\le 10^5$, $C \\le 10$, $k \\le 10^5$.\n\n$1 \\le u, v, x \\le n$, $0 \\le c < C$. There are no multiple edges or self-loops in the graph.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[ZJOI2012] 网络", "background": "", "description": "有一个无向图 $G$，每个点有个权值，每条边有一个颜色。这个无向图满足以下两个条件：\n\n1、 对于任意节点连出去的边中，相同颜色的边不超过两条。\n\n2、图中不存在同色的环，同色的环指相同颜色的边构成的环。\n\n在这个图上，你要支持以下三种操作：\n\n- `0 x y` 表示把节点 $x$ 的权值改为 $y$\n\n- `1 u v w` 表示将边 $(u,v)$ 的颜色改为 $w$。  \n\n- `2 c u v` 表示查询由颜色 $c$ 的边构成的图中，所有可能在 $u \\to v$ 之间的简单路径上的节点的权值的最大值。\n", "inputFormat": "第一行四个正整数 $n,m,C,k$，分别表示节点数、边数、颜色数和操作数。\n\n接下来 $n$ 行，每行一个正整数 $v_i$，为节点 $i$ 的权值。\n\n之后 $m$ 行，每行三个正整数 $u,v,w$，为一条连接 $u,v$ 节点的边，颜色为$w$。\n\n最后 $k$ 行，每行若干个正整数，表示一次操作。", "outputFormat": "输出若干行，每行输出一个对应的信息。\n\n1、 对于修改节点权值操作，不需要输出信息。\n\n2、对于修改边的颜色操作，按以下几类输出：\n\n- 若不存在连接节点 $u$ 和节点 $v$ 的边，输出 `No such edge.`。\n\n- 若修改后不满足条件 $1$，不修改边的颜色，并输出 `Error 1.`。\n\n- 若修改后不满足条件 $2$，不修改边的颜色，并输出 `Error 2.`。\n\n- 其他情况，成功修改边的颜色，并输出 `Success.`。\n\n输出满足条件的第一条信息即可，即若同时不满足条件 $1,2$ ，则只需要输出`Error 1.`。\n\n3、 对于查询操作，输出一个整数表示答案。若 $u,v$ 之间没有颜色 $c$ 构成的路径，则输出 $-1$。\n", "hint": " ![](https://cdn.luogu.com.cn/upload/pic/1714.png) \n\n颜色 $0$ 为实线的边，颜色 $1$ 为虚线的边，\n\n由颜色 $0$ 构成的从节点 $1$ 到节点 $4$ 的路径有 $1 \\to 2 \\to 4$，故$\\max\\{v_1, v_2, v_4\\} = \\max\\{ 1, 2, 4 \\} = 4$。\n\n将连接节点 $1$ 和节点 $2$ 的边修改为颜色 $1$，修改成功，输出 `Success.`\n\n将连接节点 $4$ 和节点 $3$ 的边修改为颜色 $1$，由于修改后会使得存在由颜色 $1$ 构成的环( $1 – 2 – 4 – 3 – 1$ )，不满足条件 $2$，故不修改，并输`Error 2`。\n\n不存在颜色 $0$ 构成的从节点 $1$ 到节点 $4$ 的边，输出 `-1`。\n\n将连接节点 $2$ 和节点 $3$ 的边修改为颜色 $1$，由于修改后节点 $2$ 的连出去的颜色为 $1$ 的边有 $3$ 条，故不满足条件 $1$，故不修改，并输出`Error 1.` 。\n\n将节点 $2$ 的权值修改为 $5$。\n\n由颜色 $1$ 构成的从节点 $1$ 到节点 $4$ 的路径有 $1 \\to 2 \\to 4$，故$\\max\\{v_1, v_2, v_4\\} = \\max\\{ 1, 5, 4 \\} = 5$。\n\n【数据范围】\n\n对于 $30\\%$ 的数据：$n ≤ 1000$，$m ≤ 10^4$，$k ≤ 1000$；   \n另有 $20\\%$ 的数据：$n ≤ 10^4$，$m ≤ 10^5$，$C = 1$，$k ≤ 10^5$；   \n对于 $100\\%$ 的数据：$n ≤ 10^4$，$m ≤ 10^5$，$C ≤ 10$，$k ≤ 10^5$。  \n\n$1\\le u,v,x \\le n$，$0 \\le c < C$，保证图中没有重边和自环。\n", "locale": "zh-CN"}}}
{"pid": "P2174", "type": "P", "difficulty": 4, "samples": [["3 6\n2 6 9\nM\nD 9\nB\nS\nM\nT", "81\n6\n2\n36\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["堆"], "title": "小Z的神奇数列", "background": "小Z最近在研究数列，他需要知道在他所研究的数列中，最大的数是多少（Max），最小的数是多少（Min），最大的数的最小的数次幂是多少（Max^Min），所有数的乘积是多少。要知道，这样的问题是肯定难不倒小Z的。但是，最近小Z突发奇想，想要研究下这个数列的更深层的性质，所以他决定不断的从这个数列中删去一些数，每次删除后都研究下当前数列。由于数列项数很大，这给小Z带来了很大的麻烦，于是小Z请你帮他写一个程序，来完成下列操作。", "description": "你需要维护一个可重集，支持五种操作：\n\n- `D x` 表示删除 $x$，保证 $x$ 一定存在。若有多个只用删除一个。\n\n- `B` 询问集合中最大值。\n\n- `S` 询问集合中最小值。\n\n- `M` 设集合中最大值为 $a$，最小值为 $b$，询问 $a^b \\bmod 317847191$。\n\n- `T` 询问数列中所有数的乘积，对 $317847191$ 取模。\n\n对于所有询问保证集合非空。\n", "inputFormat": "第一行两个正整数 $n,m$，表示初始集合大小和操作数。    \n第二行 $n$ 个正整数 $a_i$，表示初始集合。  \n接下来 $m$ 行，每行表示一个操作。\n\n", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "【数据规模】  \n对于部分数据，$1 \\le n \\le 1000$，$1\\le m \\le 100$，$1\\le a_i \\le 400$；  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 10^6$，$1\\le a_i \\le 10^8$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Magical Sequence", "background": "Xiao Z has been studying sequences. He wants to know, for the sequence he studies, what the maximum number is (Max), what the minimum number is (Min), what Max to the power of Min (Max^Min) is, and what the product of all numbers is. Of course, such questions are no problem for Xiao Z. However, he recently had a sudden idea to explore deeper properties of this sequence, so he decided to keep deleting some numbers from the sequence and study the current sequence after each deletion. Since the sequence has many terms, this causes a lot of trouble for Xiao Z, so he asks you to write a program to perform the following operations.", "description": "You need to maintain a multiset that supports five operations:\n\n- `D x` Delete $x$; it is guaranteed that $x$ exists. If there are multiple occurrences, delete only one.\n- `B` Query the maximum value in the set.\n- `S` Query the minimum value in the set.\n- `M` Let the maximum be $a$ and the minimum be $b$; query $a^b \\bmod 317847191$.\n- `T` Query the product of all numbers, modulo $317847191$.\n\nFor all queries, the multiset is guaranteed to be non-empty.", "inputFormat": "The first line contains two positive integers $n, m$, the initial multiset size and the number of operations.  \nThe second line contains $n$ positive integers $a_i$, the initial multiset.  \nThen $m$ lines follow, each describing one operation.", "outputFormat": "For each query, output one integer per line representing the answer.", "hint": "Constraints  \nFor partial testdata, $1 \\le n \\le 1000$, $1 \\le m \\le 100$, $1 \\le a_i \\le 400$.  \nFor $100\\%$ of the testdata, $1 \\le n, m \\le 10^6$, $1 \\le a_i \\le 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的神奇数列", "background": "小Z最近在研究数列，他需要知道在他所研究的数列中，最大的数是多少（Max），最小的数是多少（Min），最大的数的最小的数次幂是多少（Max^Min），所有数的乘积是多少。要知道，这样的问题是肯定难不倒小Z的。但是，最近小Z突发奇想，想要研究下这个数列的更深层的性质，所以他决定不断的从这个数列中删去一些数，每次删除后都研究下当前数列。由于数列项数很大，这给小Z带来了很大的麻烦，于是小Z请你帮他写一个程序，来完成下列操作。", "description": "你需要维护一个可重集，支持五种操作：\n\n- `D x` 表示删除 $x$，保证 $x$ 一定存在。若有多个只用删除一个。\n\n- `B` 询问集合中最大值。\n\n- `S` 询问集合中最小值。\n\n- `M` 设集合中最大值为 $a$，最小值为 $b$，询问 $a^b \\bmod 317847191$。\n\n- `T` 询问数列中所有数的乘积，对 $317847191$ 取模。\n\n对于所有询问保证集合非空。\n", "inputFormat": "第一行两个正整数 $n,m$，表示初始集合大小和操作数。    \n第二行 $n$ 个正整数 $a_i$，表示初始集合。  \n接下来 $m$ 行，每行表示一个操作。\n\n", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "【数据规模】  \n对于部分数据，$1 \\le n \\le 1000$，$1\\le m \\le 100$，$1\\le a_i \\le 400$；  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 10^6$，$1\\le a_i \\le 10^8$。\n", "locale": "zh-CN"}}}
{"pid": "P2175", "type": "P", "difficulty": 6, "samples": [["5\n3 4 5 0\n1 3 5 0\n2 1 4 5 0\n2 3 5 0\n1 2 3 4 0", "No solution"], ["5\n2 3 5 0\n1 4 5 3 0\n1 2 5 0\n1 2 3 0\n4 3 2 1 0", "2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "背包 DP", "二分图"], "title": "小Z的游戏分队", "background": "", "description": "小 Z 受不了寂寞，准备举办一次 DOTA 比赛，为了能让 ACM 班全部都参加比赛，他还特制了一张 DOTA 地图能够支持任意多人打任意多人。\n\n现在问题来了，怎么把这么多人分成两队？小 Z 的想法是，每个人报上自己愿意同队的同学，接着小 Z 会按如下要求将所有人分为两队：\n\n对任意同学甲，和同学甲同队的人，必须都是同学甲愿意同队的同学。\n\n小 Z 希望两队的人数差尽量小，如果这种分组不存在，那么输出 `No solution`。", "inputFormat": "第 $1$ 行为 $N$，表示一共有多少个学生。\n\n之后 $2$ 到 $N+1$ 行，每行表示这个学生信任的同学的名单，以 $0$ 结束。", "outputFormat": "$1$ 行，如果解存在，输出两队的人数，将人数比较小的那队放在前面；如果解不存在，输出 `No solution`。", "hint": "对于 $30\\%$ 的数据，$N \\leq 10$；\n\n对于 $100\\%$ 的数据，$N \\leq 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Game Team Formation", "background": "", "description": "Xiao Z cannot stand loneliness and plans to host a DOTA tournament. To let the entire ACM class participate, he also made a custom DOTA map that can support any number of players versus any number.\n\nNow here comes the problem: how to split so many people into two teams? Xiao Z's idea is that everyone reports the classmates they are willing to be on the same team with, and then Xiao Z will divide everyone into two teams under the following requirement:\n\nFor any student A, everyone who is on the same team as A must all be classmates that A is willing to be on the same team with.\n\nXiao Z wants the difference in team sizes to be as small as possible. If such a grouping does not exist, output `No solution`.", "inputFormat": "The first line contains $N$, the total number of students.\n\nThen lines $2$ through $N+1$, each line lists the classmates this student is willing to be on the same team with, ending with $0$.", "outputFormat": "One line. If a solution exists, output the sizes of the two teams, with the smaller size first; otherwise, output `No solution`.", "hint": "For $30\\%$ of the testdata, $N \\leq 10$;\n\nFor $100\\%$ of the testdata, $N \\leq 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的游戏分队", "background": "", "description": "小 Z 受不了寂寞，准备举办一次 DOTA 比赛，为了能让 ACM 班全部都参加比赛，他还特制了一张 DOTA 地图能够支持任意多人打任意多人。\n\n现在问题来了，怎么把这么多人分成两队？小 Z 的想法是，每个人报上自己愿意同队的同学，接着小 Z 会按如下要求将所有人分为两队：\n\n对任意同学甲，和同学甲同队的人，必须都是同学甲愿意同队的同学。\n\n小 Z 希望两队的人数差尽量小，如果这种分组不存在，那么输出 `No solution`。", "inputFormat": "第 $1$ 行为 $N$，表示一共有多少个学生。\n\n之后 $2$ 到 $N+1$ 行，每行表示这个学生信任的同学的名单，以 $0$ 结束。", "outputFormat": "$1$ 行，如果解存在，输出两队的人数，将人数比较小的那队放在前面；如果解不存在，输出 `No solution`。", "hint": "对于 $30\\%$ 的数据，$N \\leq 10$；\n\n对于 $100\\%$ 的数据，$N \\leq 2000$。", "locale": "zh-CN"}}}
{"pid": "P2176", "type": "P", "difficulty": 4, "samples": [["5 7\n2 1 5\n1 3 1\n3 2 8\n3 5 7\n3 4 3\n2 4 7\n4 5 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "2011", "2014", "USACO", "最短路"], "title": "[USACO11DEC] RoadBlock S / [USACO14FEB] Roadblock G/S", "background": null, "description": "每天早晨，FJ 从家中穿过农场走到牛棚。农场由 $N$ 块农田组成，农田通过 $M$ 条双向道路连接，每条路有一定长度。FJ 的房子在 $1$ 号田，牛棚在 $N$ 号田。没有两块田被多条道路连接，以适当的路径顺序总是能在农场任意一对田间行走。当 FJ 从一块田走到另一块时，总是以总路长最短的道路顺序来走。\n\nFJ 的牛呢，总是不安好心，决定干扰他每天早晨的计划。它们在 $M$ 条路的某一条上安放一叠稻草堆，使这条路的长度加倍。牛希望选择一条路干扰使得 FJ 从家到牛棚的路长增加最多。它们请你设计并告诉它们最大增量是多少。", "inputFormat": "第 $1$ 行：两个整数 $N, M$。\n\n第 $2$ 到 $M+1$ 行：第 $i+1$ 行包含三个整数 $A_i, B_i, L_i$，$A_i$ 和 $B_i$ 表示道路 $i$ 连接的田的编号，$L_i$ 表示路长。", "outputFormat": "一个整数，表示通过使某条路加倍而得到的最大增量。", "hint": "【样例说明】\n\n若使 $3$ 和 $4$ 之间的道路长加倍，最短路将由 $1 \\rightarrow 3 \\rightarrow 4 \\rightarrow 5$ 变为 $1 \\rightarrow 3 \\rightarrow 5$。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$N \\le 70$，$M \\le 1\\,500$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 100$，$1 \\le M \\le 5\\,000$，$1 \\le L_i \\le 1\\,000\\,000$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO11DEC] RoadBlock S / [USACO14FEB] Roadblock G/S", "background": "", "description": "Every morning, FJ walks from his house across the farm to the barn. The farm consists of $N$ fields connected by $M$ bidirectional roads, each with a certain length. FJ’s house is at field $1$, and the barn is at field $N$. No two fields are connected by multiple roads, and the graph is connected. Whenever FJ travels between fields, he always takes a path with the minimum total length.\n\nFJ’s cows, up to no good as always, decide to disrupt his morning routine. They place a stack of hay bales on one of the $M$ roads, doubling that road’s length. The cows want to choose a road to maximize the increase in FJ’s shortest path distance from home to the barn. They ask you to compute and report this maximum increase.", "inputFormat": "Line $1$: two integers $N, M$.\n\nLines $2$ to $M+1$: the $(i+1)$-th line contains three integers $A_i, B_i, L_i$. $A_i$ and $B_i$ are the indices of the fields connected by road $i$, and $L_i$ is the length of that road.", "outputFormat": "A single integer: the maximum increase obtained by doubling exactly one road.", "hint": "Sample explanation:\nIf the length of the road between $3$ and $4$ is doubled, the shortest path changes from $1 \\rightarrow 3 \\rightarrow 4 \\rightarrow 5$ to $1 \\rightarrow 3 \\rightarrow 5$.\n\nConstraints:\n- For $30\\%$ of the testdata, $N \\le 70$, $M \\le 1{,}500$.\n- For $100\\%$ of the testdata, $1 \\le N \\le 100$, $1 \\le M \\le 5{,}000$, $1 \\le L_i \\le 1{,}000{,}000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO11DEC] RoadBlock S / [USACO14FEB] Roadblock G/S", "background": null, "description": "每天早晨，FJ 从家中穿过农场走到牛棚。农场由 $N$ 块农田组成，农田通过 $M$ 条双向道路连接，每条路有一定长度。FJ 的房子在 $1$ 号田，牛棚在 $N$ 号田。没有两块田被多条道路连接，以适当的路径顺序总是能在农场任意一对田间行走。当 FJ 从一块田走到另一块时，总是以总路长最短的道路顺序来走。\n\nFJ 的牛呢，总是不安好心，决定干扰他每天早晨的计划。它们在 $M$ 条路的某一条上安放一叠稻草堆，使这条路的长度加倍。牛希望选择一条路干扰使得 FJ 从家到牛棚的路长增加最多。它们请你设计并告诉它们最大增量是多少。", "inputFormat": "第 $1$ 行：两个整数 $N, M$。\n\n第 $2$ 到 $M+1$ 行：第 $i+1$ 行包含三个整数 $A_i, B_i, L_i$，$A_i$ 和 $B_i$ 表示道路 $i$ 连接的田的编号，$L_i$ 表示路长。", "outputFormat": "一个整数，表示通过使某条路加倍而得到的最大增量。", "hint": "【样例说明】\n\n若使 $3$ 和 $4$ 之间的道路长加倍，最短路将由 $1 \\rightarrow 3 \\rightarrow 4 \\rightarrow 5$ 变为 $1 \\rightarrow 3 \\rightarrow 5$。\n\n【数据规模和约定】\n\n对于 $30\\%$ 的数据，$N \\le 70$，$M \\le 1\\,500$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 100$，$1 \\le M \\le 5\\,000$，$1 \\le L_i \\le 1\\,000\\,000$。", "locale": "zh-CN"}}}
{"pid": "P2177", "type": "P", "difficulty": 5, "samples": [["3 6\n101010\n111001\n101001", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["哈希 hashing"], "title": "内存杀手", "background": "我们伟大的KK突然想到了一个很高（Shā）明（bī）的问题。\n", "description": "我们伟大的 KK 最近一段时间突然迷上了电影，但是他从来不去电影院，因为他口袋里没有一分钱，更因为没人陪他去！但是 KK 不是这么容易就会屈服于命远的，他从爸爸那里“偷”来了电脑，没日没夜的进入了疯狂刷电影状态。\n\n显然我们的 KK 在任何情况下都会出现问题的：KK 习惯于用“百度影音”这个神奇的软件。众所周知，这个软件具备一个牛犇的功能，他可以一边看一边下载，然后，KK 每次都不会在线观看，而是连着 wifi（哇\\~\\~还说没钱！）看，然后的然后KK发现电脑开始变得卡起来了，为了在爸爸突击检查时能够准确准时的将电脑关闭归位，KK 不得不干起了电脑修理师的工作。\n\nKK 翻查了注册表（这都懂？！牛~），发现罪魁祸首竟是存在于一个内存区域中的一个正方形方阵。现在我们的 KK 简单的称呼这种方阵为“内存杀手”，他对于这个“内存杀手”的定义是边长大于 $1$，且在旋转了 $180\\degree$ 之后方阵仍与原来保持不变，如：\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix},\n\\begin{bmatrix}\n1 & 0 \\\\\n0 & 1\n\\end{bmatrix},\n\\begin{bmatrix}\n1 & 0 & 1 \\\\ \n1 & 1 & 1 \\\\\n1 & 0 & 1\n\\end{bmatrix}\n$$\n\n当然，一个内存区域中“内存杀手”可能不止一个的，现在我们的 KK 想找出这个方阵中最大的“内存杀手”的边长。\n", "inputFormat": "共 $N+1$ 行，第一行两个整数 $N,M$，表示内存矩阵的大小。第 $2 \\sim N+1$ 行，每行 $M$ 个字符表示内存矩阵。", "outputFormat": "共一行，即最大的内存杀手边长；若不存在，则输出 $-1$。\n", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据 $0<N$，$M \\le 100$；\n- 对于 $60\\%$ 的数据 $0<N$，$M \\le 200$；\n- 对于 $100\\%$ 的数据 $0<N$，$M \\le 300$。", "locale": "zh-CN", "translations": {"en": {"title": "Memory Killer", "background": "Our great KK suddenly came up with a very “brilliant” problem.", "description": "Lately, our great KK has become obsessed with movies. But he never goes to the cinema, because he has no money in his pocket, and no one to go with! However, KK is not someone who easily bends to fate. He “borrowed” a computer from his dad and started binge-watching day and night.\n\nObviously, problems always arise for KK: he is used to using the magical software “Baidu Player.” As everyone knows, this software has a powerful feature: it can download while playing. KK never streams directly; instead, he watches while connected to Wi‑Fi (wow… and he says he’s broke!). Then KK noticed the computer getting laggy. To make sure he can shut down and put the computer back in place promptly when his dad makes a surprise inspection, KK had to become a makeshift computer repairman.\n\nKK checked the registry and discovered that the culprit was a square matrix located in a memory region. He calls such a square matrix a “memory killer,” defined as a square submatrix with side length greater than $1$ that remains unchanged after a $180^\\circ$ rotation. For example:\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix},\n\\begin{bmatrix}\n1 & 0 \\\\\n0 & 1\n\\end{bmatrix},\n\\begin{bmatrix}\n1 & 0 & 1 \\\\ \n1 & 1 & 1 \\\\\n1 & 0 & 1\n\\end{bmatrix}\n$$\n\nOf course, there can be more than one “memory killer” in a memory region. Now KK wants to find the side length of the largest “memory killer” in the matrix.", "inputFormat": "There are $N + 1$ lines. The first line contains two integers $N, M$, indicating the size of the memory matrix $N \\times M$. Each of the next lines $2$ to $N + 1$ contains $M$ characters representing the memory matrix.", "outputFormat": "Output a single line: the side length of the largest memory killer. If none exists, output $-1$.", "hint": "Constraints:\n\n- For $30\\%$ of the testdata, $0 < N, M \\le 100$.\n- For $60\\%$ of the testdata, $0 < N, M \\le 200$.\n- For $100\\%$ of the testdata, $0 < N, M \\le 300$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "内存杀手", "background": "我们伟大的KK突然想到了一个很高（Shā）明（bī）的问题。\n", "description": "我们伟大的 KK 最近一段时间突然迷上了电影，但是他从来不去电影院，因为他口袋里没有一分钱，更因为没人陪他去！但是 KK 不是这么容易就会屈服于命远的，他从爸爸那里“偷”来了电脑，没日没夜的进入了疯狂刷电影状态。\n\n显然我们的 KK 在任何情况下都会出现问题的：KK 习惯于用“百度影音”这个神奇的软件。众所周知，这个软件具备一个牛犇的功能，他可以一边看一边下载，然后，KK 每次都不会在线观看，而是连着 wifi（哇\\~\\~还说没钱！）看，然后的然后KK发现电脑开始变得卡起来了，为了在爸爸突击检查时能够准确准时的将电脑关闭归位，KK 不得不干起了电脑修理师的工作。\n\nKK 翻查了注册表（这都懂？！牛~），发现罪魁祸首竟是存在于一个内存区域中的一个正方形方阵。现在我们的 KK 简单的称呼这种方阵为“内存杀手”，他对于这个“内存杀手”的定义是边长大于 $1$，且在旋转了 $180\\degree$ 之后方阵仍与原来保持不变，如：\n\n$$\n\\begin{bmatrix}\n0 & 0 \\\\\n0 & 0\n\\end{bmatrix},\n\\begin{bmatrix}\n1 & 0 \\\\\n0 & 1\n\\end{bmatrix},\n\\begin{bmatrix}\n1 & 0 & 1 \\\\ \n1 & 1 & 1 \\\\\n1 & 0 & 1\n\\end{bmatrix}\n$$\n\n当然，一个内存区域中“内存杀手”可能不止一个的，现在我们的 KK 想找出这个方阵中最大的“内存杀手”的边长。\n", "inputFormat": "共 $N+1$ 行，第一行两个整数 $N,M$，表示内存矩阵的大小。第 $2 \\sim N+1$ 行，每行 $M$ 个字符表示内存矩阵。", "outputFormat": "共一行，即最大的内存杀手边长；若不存在，则输出 $-1$。\n", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据 $0<N$，$M \\le 100$；\n- 对于 $60\\%$ 的数据 $0<N$，$M \\le 200$；\n- 对于 $100\\%$ 的数据 $0<N$，$M \\le 300$。", "locale": "zh-CN"}}}
{"pid": "P2178", "type": "P", "difficulty": 6, "samples": [["10\nponoiiipoi\n2 1 4 7 4 8 3 6 4 7", "45 56\n10 56\n3 32\n0 0\n0 0\n0 0\n0 0\n0 0\n0 0\n0 0"], ["12\nabaabaabaaba\n1 -2 3 -4 5 -6 7 -8 9 -10 11 -12\n", "66 120\n34 120\n15 55\n12 40\n9 27\n7 16\n5 7\n3 -4\n2 -4\n1 -4\n0 0\n0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "并查集", "NOI", "后缀数组 SA"], "title": "[NOI2015] 品酒大会", "background": null, "description": "一年一度的“幻影阁夏日品酒大会”隆重开幕了。大会包含品尝和趣味挑战 两个环节，分别向优胜者颁发“首席品酒家”和“首席猎手”两个奖项，吸引了众多品酒师参加。\n\n\n在大会的晚餐上，调酒师 Rainbow 调制了 $n$ 杯鸡尾酒。这 $n$ 杯鸡尾酒排成一行，其中第 $i$ 杯酒 ($1 \\le i \\le n$) 被贴上了一个标签 $s_i$ ，每个标签都是 $26$ 个小写 英文字母之一。设 $str(l, r)$ 表示第 $l$ 杯酒到第 $r$ 杯酒的 $r - l + 1$ 个标签顺次连接构成的字符串。若 $str(p, p_0) = str(q, q_0)$，其中 $1 \\le p \\le p_0 \\le n$, $1 \\le q \\le q_0 \\le n$，$p \\ne q$，$p_0-p+1 = q_0 - q + 1 = r$ ，则称第 $p$ 杯酒与第 $q$ 杯酒是“ $r$ 相似” 的。当然两杯“$r$ 相似”（$r > 1$）的酒同时也是“$1$ 相似”、“$2$ 相似”、……、“$(r - 1)$ 相似”的。特别地，对于任意的 $1 \\le p,q \\le n,p \\ne q$，第 $p$ 杯酒和第 $q$ 杯酒都 是“$0$ 相似”的。\n\n\n在品尝环节上，品酒师 Freda 轻松地评定了每一杯酒的美味度，凭借其专业的水准和经验成功夺取了“首席品酒家”的称号，其中第 $i$ 杯酒 ($1 \\le i \\le n$) 的 美味度为 $a_i$ 。现在 Rainbow 公布了挑战环节的问题：本次大会调制的鸡尾酒有一个特点，如果把第 $p$ 杯酒与第 $q$ 杯酒调兑在一起，将得到一杯美味度为 $a_p\\times a_q$ 的酒。现在请各位品酒师分别对于 $r = 0,1,2,\\dots,n-1$，统计出有多少种方法可以 选出 $2$ 杯“$r$ 相似”的酒，并回答选择 $2$ 杯“$r$ 相似”的酒调兑可以得到的美味度的最大值。", "inputFormat": "第 $1$ 行包含 $1$ 个正整数 $n$，表示鸡尾酒的杯数。\n\n第 $2$ 行包含一个长度为 $n$ 的字符串 $S$，其中第 $i$ 个字符表示第 $i$ 杯酒的标签。\n\n第 $3$ 行包含 $n$ 个整数，相邻整数之间用单个空格隔开，其中第 $i$ 个整数表示第 $i$ 杯酒的美味度 $a_i$。", "outputFormat": "包括 $n$ 行。\n\n第 $i$ 行输出 $2$ 个整数，中间用单个空格隔开。第 $1$ 个整 数表示选出两杯“$(i - 1)$ 相似”的酒的方案数，第 2 个整数表示选出两杯“$(i - 1)$ 相似”的酒调兑可以得到的最大美味度。若不存在两杯“$(i - 1)$ 相似”的酒，这两个数均为 $0$。", "hint": "【样例说明 1】\n\n用二元组 $(p, q)$ 表示第 $p$ 杯酒与第 $q$ 杯酒。\n\n$0$ 相似：所有 $45$ 对二元组都是 $0$ 相似的，美味度最大的是 $8 \\times 7 = 56$。\n\n$1$ 相似： $(1,8) (2,4) (2,9) (4,9) (5,6) (5,7) (5,10) (6,7) (6,10) (7,10) $，最大的 $8 \\times 7 = 56$ 。\n\n$2$ 相似： $(1,8) (4,9) (5,6)$ ，最大的 $4 \\times 8 = 32$ 。\n\n没有 $3,4,5,\\dots,9$ 相似的两杯酒，故均输出 $0$ 。\n\n\n\n ![](https://cdn.luogu.com.cn/upload/pic/1508.png) \n\n【时限1s，内存500M】", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2015] Wine Tasting Convention", "background": "", "description": "The annual \"Phantom Pavilion Summer Wine Tasting Convention\" has grandly opened. The convention consists of two parts: tasting and a fun challenge. They award two titles, \"Chief Taster\" and \"Chief Hunter\", attracting many sommeliers to participate.\n\nAt the dinner, the bartender Rainbow mixed $n$ cocktails. These $n$ cocktails are arranged in a line. The $i$-th glass ($1 \\le i \\le n$) is labeled $s_i$, where each label is one of the $26$ lowercase English letters. Let $str(l, r)$ denote the string formed by concatenating the $r - l + 1$ labels from the $l$-th glass to the $r$-th glass in order. If $str(p, p_0) = str(q, q_0)$, where $1 \\le p \\le p_0 \\le n$, $1 \\le q \\le q_0 \\le n$, $p \\ne q$, and $p_0 - p + 1 = q_0 - q + 1 = r$, then we say the $p$-th glass and the $q$-th glass are r-similar. Of course, if two glasses are r-similar (with $r > 1$), then they are also 1-similar, 2-similar, …, and $(r - 1)$-similar. In particular, for any $1 \\le p, q \\le n$, $p \\ne q$, the $p$-th and the $q$-th glasses are 0-similar.\n\nIn the tasting part, the sommelier Freda easily evaluated the deliciousness of each glass and won the title of \"Chief Taster\" with her professional skill and experience. The deliciousness of the $i$-th glass ($1 \\le i \\le n$) is $a_i$. Now Rainbow announces the challenge: the cocktails in this convention have a special property—if you mix the $p$-th glass with the $q$-th glass, you obtain a glass with deliciousness $a_p \\times a_q$. For each $r = 0, 1, 2, \\dots, n - 1$, please count how many ways there are to choose two r-similar glasses, and report the maximum deliciousness obtainable by mixing two r-similar glasses.", "inputFormat": "The first line contains a positive integer $n$, the number of glasses.\n\nThe second line contains a string $S$ of length $n$, where the $i$-th character is the label of the $i$-th glass.\n\nThe third line contains $n$ integers separated by single spaces, where the $i$-th integer is the deliciousness $a_i$ of the $i$-th glass.", "outputFormat": "Output $n$ lines.\n\nOn the $i$-th line, output two integers separated by a single space. The first integer is the number of ways to choose two $(i - 1)$-similar glasses, and the second integer is the maximum deliciousness obtainable by mixing two $(i - 1)$-similar glasses. If there are no two $(i - 1)$-similar glasses, output $0 0$.", "hint": "[Sample explanation 1]\n\nUse an ordered pair $(p, q)$ to denote the $p$-th glass and the $q$-th glass.\n\n0-similar: all $45$ ordered pairs are 0-similar, and the maximum deliciousness is $8 \\times 7 = 56$.\n\n1-similar: $(1, 8) (2, 4) (2, 9) (4, 9) (5, 6) (5, 7) (5, 10) (6, 7) (6, 10) (7, 10)$, with maximum $8 \\times 7 = 56$.\n\n2-similar: $(1, 8) (4, 9) (5, 6)$, with maximum $4 \\times 8 = 32$.\n\nThere are no 3-, 4-, 5-, …, 9-similar pairs of glasses, so output $0$.\n\n![](https://cdn.luogu.com.cn/upload/pic/1508.png)\n\n[Time limit 1 s, Memory limit 500 MB]\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2015] 品酒大会", "background": null, "description": "一年一度的“幻影阁夏日品酒大会”隆重开幕了。大会包含品尝和趣味挑战 两个环节，分别向优胜者颁发“首席品酒家”和“首席猎手”两个奖项，吸引了众多品酒师参加。\n\n\n在大会的晚餐上，调酒师 Rainbow 调制了 $n$ 杯鸡尾酒。这 $n$ 杯鸡尾酒排成一行，其中第 $i$ 杯酒 ($1 \\le i \\le n$) 被贴上了一个标签 $s_i$ ，每个标签都是 $26$ 个小写 英文字母之一。设 $str(l, r)$ 表示第 $l$ 杯酒到第 $r$ 杯酒的 $r - l + 1$ 个标签顺次连接构成的字符串。若 $str(p, p_0) = str(q, q_0)$，其中 $1 \\le p \\le p_0 \\le n$, $1 \\le q \\le q_0 \\le n$，$p \\ne q$，$p_0-p+1 = q_0 - q + 1 = r$ ，则称第 $p$ 杯酒与第 $q$ 杯酒是“ $r$ 相似” 的。当然两杯“$r$ 相似”（$r > 1$）的酒同时也是“$1$ 相似”、“$2$ 相似”、……、“$(r - 1)$ 相似”的。特别地，对于任意的 $1 \\le p,q \\le n,p \\ne q$，第 $p$ 杯酒和第 $q$ 杯酒都 是“$0$ 相似”的。\n\n\n在品尝环节上，品酒师 Freda 轻松地评定了每一杯酒的美味度，凭借其专业的水准和经验成功夺取了“首席品酒家”的称号，其中第 $i$ 杯酒 ($1 \\le i \\le n$) 的 美味度为 $a_i$ 。现在 Rainbow 公布了挑战环节的问题：本次大会调制的鸡尾酒有一个特点，如果把第 $p$ 杯酒与第 $q$ 杯酒调兑在一起，将得到一杯美味度为 $a_p\\times a_q$ 的酒。现在请各位品酒师分别对于 $r = 0,1,2,\\dots,n-1$，统计出有多少种方法可以 选出 $2$ 杯“$r$ 相似”的酒，并回答选择 $2$ 杯“$r$ 相似”的酒调兑可以得到的美味度的最大值。", "inputFormat": "第 $1$ 行包含 $1$ 个正整数 $n$，表示鸡尾酒的杯数。\n\n第 $2$ 行包含一个长度为 $n$ 的字符串 $S$，其中第 $i$ 个字符表示第 $i$ 杯酒的标签。\n\n第 $3$ 行包含 $n$ 个整数，相邻整数之间用单个空格隔开，其中第 $i$ 个整数表示第 $i$ 杯酒的美味度 $a_i$。", "outputFormat": "包括 $n$ 行。\n\n第 $i$ 行输出 $2$ 个整数，中间用单个空格隔开。第 $1$ 个整 数表示选出两杯“$(i - 1)$ 相似”的酒的方案数，第 2 个整数表示选出两杯“$(i - 1)$ 相似”的酒调兑可以得到的最大美味度。若不存在两杯“$(i - 1)$ 相似”的酒，这两个数均为 $0$。", "hint": "【样例说明 1】\n\n用二元组 $(p, q)$ 表示第 $p$ 杯酒与第 $q$ 杯酒。\n\n$0$ 相似：所有 $45$ 对二元组都是 $0$ 相似的，美味度最大的是 $8 \\times 7 = 56$。\n\n$1$ 相似： $(1,8) (2,4) (2,9) (4,9) (5,6) (5,7) (5,10) (6,7) (6,10) (7,10) $，最大的 $8 \\times 7 = 56$ 。\n\n$2$ 相似： $(1,8) (4,9) (5,6)$ ，最大的 $4 \\times 8 = 32$ 。\n\n没有 $3,4,5,\\dots,9$ 相似的两杯酒，故均输出 $0$ 。\n\n\n\n ![](https://cdn.luogu.com.cn/upload/pic/1508.png) \n\n【时限1s，内存500M】", "locale": "zh-CN"}}}
{"pid": "P2179", "type": "P", "difficulty": 7, "samples": [["3 10000\n10000 10 5\n20000 15 8\n50000 5 6", "12531.34496464"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2012", "NOI", "Special Judge", "向量", "构造", "拉格朗日乘数法"], "title": "[NOI2012] 骑行川藏", "background": "", "description": "蛋蛋非常热衷于挑战自我，今年暑假他准备沿川藏线骑着自行车从成都前往拉萨。\n\n川藏线的沿途有着非常美丽的风景，但在这一路上也有着很多的艰难险阻，路况变化多端，而蛋蛋的体力十分有限,因此在每天的骑行前设定好目的地，同时合理分配好自己的体力是一件非常重要的事情。\n\n由于蛋蛋装备了一辆非常好的自行车，因此在骑行过程中可以认为他仅在克服风阻做功（不受自行车本身摩擦力以及自行车与地面的摩擦力影响）。\n\n某一天他打算骑 $n$ 段路，每一段内的路况可视为相同：对于第 $i$ 段路,我们给出有关这段路况的 $3$ 个参数 $s_i,k_i,v_i'$，其中 $s_i$ 表示这段路的长度，$k_i$ 表示这段路的风阻系数，$v_i'$ 表示这段路上的风速（$v_i'\\gt 0$ 表示在这段路上他遇到了顺风，反之则意味着他将受逆风影响）。\n\n若某一时刻在这段路上骑车速度为 $v$，则他受到的风阻\n大小为 $F=k_i(v-v_i')^2$（这样若在长度为 $s$ 的路程内保持骑行速度 $v$ 不变,则他消耗能量（做功）$E=k_i(v-v_i')^2s$ ）。\n\n设蛋蛋在这天开始时的体能值是 $E_U$，请帮助他设计一种行车方案,使他在有限的体力内用最短的时间到达目的地。请告诉他最短的时间 $T$ 是多少。", "inputFormat": "第一行包含一个正整数 $n$ 和一个实数 $E_U$，分别表示路段的数量以及蛋蛋的体能值。\n\n接下来 $n$ 行分别描述 $n$ 个路段，每行有 $3$ 个实数 $s_i,k_i,v_i'$ 分别表示第 $i$ 段路的长度，风阻系数以及风速。", "outputFormat": "输出一个实数 $T$，表示蛋蛋到达目的地消耗的最短时间，要求至少保留到小数点后 $6$ 位。", "hint": "### 样例说明\n\n一种可能的方案是：蛋蛋在三段路上都采用匀速骑行的方式,其速度依次为 $5.12939919,8.03515481,6.17837967$。\n\n### 评分方法\n\n本题没有部分分,你程序的输出只有和标准答案的差距不超过 $10^{-6}$ 时，才能获得该测试点的满分，否则不得分。\n\n### 数据规模与约定\n\n对于 $10\\%$  的数据，$n=1$。\n\n对于 $40\\%$  的数据，$n\\le2$。\n\n对于 $60\\%$  的数据，$n\\le100$。\n\n对于 $80\\%$  的数据，$n\\le 1000$。\n\n对于 $100\\%$  的数据，$n\\le 10^4$，$E_U\\le 10^8$，$s_i\\in[0,10^5]$，$k_i\\in(0,15]$，$v_i'\\in(-100,100)$。\n\n数据保证最终的答案不会超过 $10^5$。\n\n### 提示\n\n必然存在一种最优的体力方案满足：蛋蛋在每段路上都采用匀速骑行的方式。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2012] Cycling the Sichuan–Tibet Route", "background": "", "description": "Dandan is very enthusiastic about challenging himself. This summer vacation he plans to ride a bicycle along the Sichuan–Tibet route from Chengdu to Lhasa.\n\nThe scenery along the Sichuan–Tibet route is beautiful, but there are many difficulties and changing road conditions along the way. Dandan’s stamina is limited, so before each day’s ride he sets a destination for the day and allocates his energy reasonably, which is very important.\n\nBecause Dandan is equipped with a very good bicycle, we can assume that during the ride he only does work to overcome air resistance (he is not affected by friction inside the bicycle or between the bicycle and the ground).\n\nOn a certain day he plans to ride $n$ segments. Within each segment the road condition can be considered uniform: for the $i$-th segment, we are given three parameters $s_i,k_i,v_i'$, where $s_i$ is the length of the segment, $k_i$ is the air-drag coefficient for the segment, and $v_i'$ is the wind speed on the segment ($v_i' \\gt 0$ means tailwind on that segment; otherwise, it means headwind).\n\nIf at some moment his riding speed on this segment is $v$, then the magnitude of the air-drag force is $F=k_i(v-v_i')^2$ (therefore, if he maintains a constant speed $v$ over a distance $s$, he expends energy (does work) $E=k_i(v-v_i')^2s$).\n\nSuppose Dandan’s energy budget at the start of the day is $E_U$. Please help him design a riding plan so that he reaches the destination in the shortest possible time within his energy budget. Please output the minimal time $T$.", "inputFormat": "The first line contains a positive integer $n$ and a real number $E_U$, representing the number of segments and Dandan’s energy budget, respectively.\n\nThe next $n$ lines describe the $n$ segments. Each line contains three real numbers $s_i,k_i,v_i'$ representing the length, air-drag coefficient, and wind speed of the $i$-th segment.", "outputFormat": "Output a real number $T$, the minimal time for Dandan to reach the destination. Keep at least $6$ digits after the decimal point.", "hint": "- Sample explanation:\n  One possible plan is: Dandan rides at a constant speed on each of the three segments, with speeds $5.12939919, 8.03515481, 6.17837967$.\n\n- Scoring:\n  There are no partial scores. Your output must differ from the standard answer by no more than $10^{-6}$ to receive full score on a test point; otherwise you get zero for that point.\n\n- Constraints:\n  For $10\\%$ of the testdata, $n=1$.\n  \n  For $40\\%$ of the testdata, $n\\le 2$.\n  \n  For $60\\%$ of the testdata, $n\\le 100$.\n  \n  For $80\\%$ of the testdata, $n\\le 1000$.\n  \n  For $100\\%$ of the testdata, $n\\le 10^4$, $E_U\\le 10^8$, $s_i\\in[0,10^5]$, $k_i\\in(0,15]$, $v_i'\\in(-100,100)$.\n  \n  The final answer is guaranteed not to exceed $10^5$.\n\n- Additional hint:\n  There always exists an optimal energy allocation in which Dandan rides at a constant speed on every segment.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2012] 骑行川藏", "background": "", "description": "蛋蛋非常热衷于挑战自我，今年暑假他准备沿川藏线骑着自行车从成都前往拉萨。\n\n川藏线的沿途有着非常美丽的风景，但在这一路上也有着很多的艰难险阻，路况变化多端，而蛋蛋的体力十分有限,因此在每天的骑行前设定好目的地，同时合理分配好自己的体力是一件非常重要的事情。\n\n由于蛋蛋装备了一辆非常好的自行车，因此在骑行过程中可以认为他仅在克服风阻做功（不受自行车本身摩擦力以及自行车与地面的摩擦力影响）。\n\n某一天他打算骑 $n$ 段路，每一段内的路况可视为相同：对于第 $i$ 段路,我们给出有关这段路况的 $3$ 个参数 $s_i,k_i,v_i'$，其中 $s_i$ 表示这段路的长度，$k_i$ 表示这段路的风阻系数，$v_i'$ 表示这段路上的风速（$v_i'\\gt 0$ 表示在这段路上他遇到了顺风，反之则意味着他将受逆风影响）。\n\n若某一时刻在这段路上骑车速度为 $v$，则他受到的风阻\n大小为 $F=k_i(v-v_i')^2$（这样若在长度为 $s$ 的路程内保持骑行速度 $v$ 不变,则他消耗能量（做功）$E=k_i(v-v_i')^2s$ ）。\n\n设蛋蛋在这天开始时的体能值是 $E_U$，请帮助他设计一种行车方案,使他在有限的体力内用最短的时间到达目的地。请告诉他最短的时间 $T$ 是多少。", "inputFormat": "第一行包含一个正整数 $n$ 和一个实数 $E_U$，分别表示路段的数量以及蛋蛋的体能值。\n\n接下来 $n$ 行分别描述 $n$ 个路段，每行有 $3$ 个实数 $s_i,k_i,v_i'$ 分别表示第 $i$ 段路的长度，风阻系数以及风速。", "outputFormat": "输出一个实数 $T$，表示蛋蛋到达目的地消耗的最短时间，要求至少保留到小数点后 $6$ 位。", "hint": "### 样例说明\n\n一种可能的方案是：蛋蛋在三段路上都采用匀速骑行的方式,其速度依次为 $5.12939919,8.03515481,6.17837967$。\n\n### 评分方法\n\n本题没有部分分,你程序的输出只有和标准答案的差距不超过 $10^{-6}$ 时，才能获得该测试点的满分，否则不得分。\n\n### 数据规模与约定\n\n对于 $10\\%$  的数据，$n=1$。\n\n对于 $40\\%$  的数据，$n\\le2$。\n\n对于 $60\\%$  的数据，$n\\le100$。\n\n对于 $80\\%$  的数据，$n\\le 1000$。\n\n对于 $100\\%$  的数据，$n\\le 10^4$，$E_U\\le 10^8$，$s_i\\in[0,10^5]$，$k_i\\in(0,15]$，$v_i'\\in(-100,100)$。\n\n数据保证最终的答案不会超过 $10^5$。\n\n### 提示\n\n必然存在一种最优的体力方案满足：蛋蛋在每段路上都采用匀速骑行的方式。", "locale": "zh-CN"}}}
{"pid": "P2180", "type": "P", "difficulty": 3, "samples": [["3 3 8", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "洛谷原创"], "title": "摆石子", "background": "我们伟大的 KK 突然想到了一个很高明的问题。", "description": "我们伟大的 KK 在 $N$ 条水平线与 $M$ 条竖直线构成的网格中（KK 的自创坐标系），放 $K$ 枚石子，每个石子都只能放在网格的交叉点上。\n\n现在 KK 想知道在最优的摆放方式下，最多可以找到多少四边平行于坐标轴的长方形，而且 KK 要求它的四个角上都恰好放着一枚石子。", "inputFormat": "一行三个整数 $N,M,K$。", "outputFormat": "一行输出一个整数，表示最多的满足条件的长方形数量。", "hint": "对于 $50\\%$ 的数据，$N,M \\le 30$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 3 \\times 10^4$，$0 \\le K \\le N \\times M$。", "locale": "zh-CN", "translations": {"en": {"title": "Placing Stones", "background": "Our great KK suddenly came up with a very clever problem.", "description": "In a grid formed by $N$ horizontal lines and $M$ vertical lines (KK's self-made coordinate system), KK places $K$ stones, each stone only allowed to be placed at an intersection point of the grid.\n\nNow KK wants to know, under the optimal placement, the maximum number of rectangles whose sides are parallel to the coordinate axes, and he requires that each of the four vertices of such a rectangle has exactly one stone placed on it.", "inputFormat": "One line with three integers $N, M, K$.", "outputFormat": "Output one integer on a single line, representing the maximum number of rectangles that meet the requirement.", "hint": "Constraints:\n- For $50\\%$ of the testdata, $N, M \\le 30$.\n- For $100\\%$ of the testdata, $1 \\le N, M \\le 3 \\times 10^4$, $0 \\le K \\le N \\times M$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "摆石子", "background": "我们伟大的 KK 突然想到了一个很高明的问题。", "description": "我们伟大的 KK 在 $N$ 条水平线与 $M$ 条竖直线构成的网格中（KK 的自创坐标系），放 $K$ 枚石子，每个石子都只能放在网格的交叉点上。\n\n现在 KK 想知道在最优的摆放方式下，最多可以找到多少四边平行于坐标轴的长方形，而且 KK 要求它的四个角上都恰好放着一枚石子。", "inputFormat": "一行三个整数 $N,M,K$。", "outputFormat": "一行输出一个整数，表示最多的满足条件的长方形数量。", "hint": "对于 $50\\%$ 的数据，$N,M \\le 30$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 3 \\times 10^4$，$0 \\le K \\le N \\times M$。", "locale": "zh-CN"}}}
{"pid": "P2181", "type": "P", "difficulty": 3, "samples": [["3", "0"], ["6", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创", "组合数学"], "title": "对角线", "background": "", "description": "对于一个 $n$ 个顶点的凸多边形，它的任何三条对角线都不会交于一点。请求出图形中对角线交点的个数。\n\n例如，$6$ 边形：\n\n![](https://cdn.luogu.com.cn/upload/pic/6023.png)", "inputFormat": "输入只有一行一个整数 $n$，代表边数。", "outputFormat": "输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n- 对于 $50 \\%$ 的数据，保证 $3 \\leq n \\leq 100$。\n- 对于 $100 \\%$ 的数据，保证 $3 \\leq n \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Diagonals", "background": "", "description": "For an $n$-vertex convex polygon in which no three diagonals intersect at a single point, find the number of intersection points among its diagonals.\n\nFor example, a $6$-gon:\n\n![](https://cdn.luogu.com.cn/upload/pic/6023.png)", "inputFormat": "The input contains a single line with an integer $n$, the number of sides.", "outputFormat": "Output a single integer on one line: the answer.", "hint": "Constraints\n\n- For $50 \\%$ of the testdata, it is guaranteed that $3 \\leq n \\leq 100$.\n- For $100 \\%$ of the testdata, it is guaranteed that $3 \\leq n \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "对角线", "background": "", "description": "对于一个 $n$ 个顶点的凸多边形，它的任何三条对角线都不会交于一点。请求出图形中对角线交点的个数。\n\n例如，$6$ 边形：\n\n![](https://cdn.luogu.com.cn/upload/pic/6023.png)", "inputFormat": "输入只有一行一个整数 $n$，代表边数。", "outputFormat": "输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n- 对于 $50 \\%$ 的数据，保证 $3 \\leq n \\leq 100$。\n- 对于 $100 \\%$ 的数据，保证 $3 \\leq n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2182", "type": "P", "difficulty": 5, "samples": [["3 2 1\n100\n001", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "组合数学"], "title": "翻硬币", "background": null, "description": "小 Z 离开家的时候忘记带走了钱包，掉下的硬币在桌子上排成了一列。正在等着哥哥回来的小 D 坐在桌子旁边，无聊地翻着桌子上的硬币。\n\n出于某种爱好，小 D 一次一定会同时翻转 $M$ 枚硬币。由于小 D 是一个爱动脑的小学生，这样进行了若干次之后她很快想到了一个问题：有多少种方法能够在 $K$ 次翻转后把硬币由原来的状态变成现在这样呢？\n\n因为小 D 是个好学的小学生，她只需要你告诉她方案数对 $10^9+7$ 取模的值以方便她进行验算就可以了。", "inputFormat": "第一行，包含三个字符 $N,K,M$，表示硬币的数量，翻转的次数和每次翻转的硬币数量。\n\n第 $2 \\sim 3$ 行，包含 $N$ 个数字，表示硬币在一开始的状态和最终要变成的状态。$1$ 表示正面而 $0$ 表示背面。", "outputFormat": "一行包含一个整数，表示方案数对 $10^9+7$ 取模的值。", "hint": "### 样例解释\n\n存在两种方案：\n\n- $100 \\to 101 \\to 001$；\n- $100 \\to 000 \\to 001$。\n\n### 数据规模\n\n- 对于 $30\\%$ 的数据，$N \\le 4$，$0 \\le K \\le 5$；\n- 对于 $60\\%$ 的数据，$N \\le 10$；\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 100$，$0 \\le K \\le 100$，$0 \\le M \\le N$。", "locale": "zh-CN", "translations": {"en": {"title": "Flipping Coins", "background": "", "description": "When Xiao Z left home, he forgot his wallet, and the dropped coins lined up on the table. Xiao D, who is waiting for her older brother to come back, sits by the table and idly flips the coins.\n\nOut of a personal preference, Xiao D always flips exactly $M$ coins at the same time in each operation. Since Xiao D is a thoughtful elementary school student, after doing this several times she quickly came up with a question: in how many ways can the coins be transformed from the original state to the current state in exactly $K$ flips?\n\nBecause Xiao D is a diligent student, she only needs you to tell her the number of ways modulo $10^9+7$ so that she can check her work.", "inputFormat": "- The first line contains three integers $N$, $K$, $M$, representing the number of coins, the number of flips, and the number of coins flipped each time.\n- The second and third lines each contain a string of length $N$, representing the initial state and the final state. Character '1' denotes heads, and '0' denotes tails.", "outputFormat": "Output a single integer, the number of ways modulo $10^9+7$.", "hint": "- Sample explanation:\n\nThere are two ways:\n- $100 \\to 101 \\to 001$;\n- $100 \\to 000 \\to 001$.\n\n- Constraints:\n  - For $30\\%$ of the testdata, $N \\le 4$, $0 \\le K \\le 5$.\n  - For $60\\%$ of the testdata, $N \\le 10$.\n  - For $100\\%$ of the testdata, $1 \\le N \\le 100$, $0 \\le K \\le 100$, $0 \\le M \\le N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "翻硬币", "background": null, "description": "小 Z 离开家的时候忘记带走了钱包，掉下的硬币在桌子上排成了一列。正在等着哥哥回来的小 D 坐在桌子旁边，无聊地翻着桌子上的硬币。\n\n出于某种爱好，小 D 一次一定会同时翻转 $M$ 枚硬币。由于小 D 是一个爱动脑的小学生，这样进行了若干次之后她很快想到了一个问题：有多少种方法能够在 $K$ 次翻转后把硬币由原来的状态变成现在这样呢？\n\n因为小 D 是个好学的小学生，她只需要你告诉她方案数对 $10^9+7$ 取模的值以方便她进行验算就可以了。", "inputFormat": "第一行，包含三个字符 $N,K,M$，表示硬币的数量，翻转的次数和每次翻转的硬币数量。\n\n第 $2 \\sim 3$ 行，包含 $N$ 个数字，表示硬币在一开始的状态和最终要变成的状态。$1$ 表示正面而 $0$ 表示背面。", "outputFormat": "一行包含一个整数，表示方案数对 $10^9+7$ 取模的值。", "hint": "### 样例解释\n\n存在两种方案：\n\n- $100 \\to 101 \\to 001$；\n- $100 \\to 000 \\to 001$。\n\n### 数据规模\n\n- 对于 $30\\%$ 的数据，$N \\le 4$，$0 \\le K \\le 5$；\n- 对于 $60\\%$ 的数据，$N \\le 10$；\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 100$，$0 \\le K \\le 100$，$0 \\le M \\le N$。", "locale": "zh-CN"}}}
{"pid": "P2183", "type": "P", "difficulty": 6, "samples": [["100\n4 2\n1\n2\n", "12"], ["100\n2 2\n1\n2", "Impossible\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "集训队互测", "中国剩余定理 CRT", "Lucas 定理"], "title": "[国家集训队] 礼物", "background": "一年一度的圣诞节快要来到了。每年的圣诞节小 E 都会收到许多礼物，当然他也会送出许多礼物。不同的人物在小 E 心目中的重要性不同，在小 E 心中分量越重的人，收到的礼物会越多。", "description": "小 E 从商店中购买了 $n$ 件礼物，打算送给 $m$ 个人，其中送给第 $i$ 个人礼物数量为 $w_i$。请你帮忙计算出送礼物的方案数（两个方案被认为是不同的，当且仅当存在某个人在这两种方案中收到的礼物不同）。由于方案数可能会很大，你只需要输出模 $P$ 后的结果。\n", "inputFormat": "输入的第一行包含一个整数 $P$，表示模数。  \n第二行包含两个整数 $n$ 和 $m$，分别表示小 E 从商店购买的礼物数和接受礼物的人数。  \n第 $3$ 到第 $(m + 2)$ 行，每行一个整数，第 $(i + 2)$ 行的整数 $w_i$ 表示送给第 $i$ 个人的礼物数量。", "outputFormat": "若不存在可行方案，则输出 `Impossible`，否则输出一个整数，表示模 $P$ 后的方案数。\n", "hint": "### 样例 1 解释\n以 `/` 分割，`/` 前后分别表示送给第一个人和第二个人的礼物编号。$12$ 种方案详情如下：\n```plain\n1/23 1/24 1/34\n2/13 2/14 2/34\n3/12 3/14 3/24\n4/12 4/13 4/23\n```\n### 数据规模与约定\n设 $P= \\prod_{i=1}^t p_i^{c_i}$，$p_i$ 为质数。\n\n对于 $15\\%$ 的数据，$n\\leq 15$，$m\\leq 5$，$p_i^{c_i}\\leq 10^5$。\n\n在剩下的 $85\\%$ 数据中，约有 $60\\%$ 的数据满足 $t\\leq 2$，$c_i=1$，$p_i\\leq 10^5$，约有 $30\\%$ 的数据满足 $p_i\\leq 200$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^9$，$1\\leq m\\leq 5$，$1\\leq p_i^{c_i}\\leq 10^5$，$1\\leq w_i \\leq P\\leq 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Gift", "background": "Christmas is coming. Every year, Xiao E receives many gifts, and of course he also gives many gifts. Different people have different levels of importance in Xiao E’s mind; the more important someone is, the more gifts they receive.", "description": "Xiao E bought $n$ gifts from a store and plans to give them to $m$ people, where the number of gifts given to the $i$-th person is $w_i$. Please help compute the number of ways to give out the gifts (two ways are considered different if and only if there exists a person who receives different gifts in the two ways). Since the number of ways can be very large, you only need to output the result modulo $P$.", "inputFormat": "The first line contains an integer $P$, the modulus.  \nThe second line contains two integers $n$ and $m$, representing the number of gifts Xiao E bought and the number of recipients, respectively.  \nLines $3$ to $(m + 2)$: each line contains an integer; the integer on the $(i + 2)$-th line $w_i$ denotes the number of gifts given to the $i$-th person.", "outputFormat": "If there is no feasible way, output `Impossible`; otherwise, output a single integer representing the number of ways modulo $P$.", "hint": "### Explanation for Sample 1\nSeparated by `/`, where the parts before and after `/` represent the gift IDs for the first and second persons, respectively. The $12$ possible ways are as follows:\n```plain\n1/23 1/24 1/34\n2/13 2/14 2/34\n3/12 3/14 3/24\n4/12 4/13 4/23\n```\n\n### Constraints\nLet $P= \\prod_{i=1}^t p_i^{c_i}$, where $p_i$ is a prime.\n\nFor $15\\%$ of the testdata, $n\\leq 15$, $m\\leq 5$, $p_i^{c_i}\\leq 10^5$.\n\nIn the remaining $85\\%$ of the testdata, about $60\\%$ satisfy $t\\leq 2$, $c_i=1$, $p_i\\leq 10^5$, and about $30\\%$ satisfy $p_i\\leq 200$.\n\nFor $100\\%$ of the testdata, $1\\leq n\\leq 10^9$, $1\\leq m\\leq 5$, $1\\leq p_i^{c_i}\\leq 10^5$, $1\\leq w_i \\leq P\\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 礼物", "background": "一年一度的圣诞节快要来到了。每年的圣诞节小 E 都会收到许多礼物，当然他也会送出许多礼物。不同的人物在小 E 心目中的重要性不同，在小 E 心中分量越重的人，收到的礼物会越多。", "description": "小 E 从商店中购买了 $n$ 件礼物，打算送给 $m$ 个人，其中送给第 $i$ 个人礼物数量为 $w_i$。请你帮忙计算出送礼物的方案数（两个方案被认为是不同的，当且仅当存在某个人在这两种方案中收到的礼物不同）。由于方案数可能会很大，你只需要输出模 $P$ 后的结果。\n", "inputFormat": "输入的第一行包含一个整数 $P$，表示模数。  \n第二行包含两个整数 $n$ 和 $m$，分别表示小 E 从商店购买的礼物数和接受礼物的人数。  \n第 $3$ 到第 $(m + 2)$ 行，每行一个整数，第 $(i + 2)$ 行的整数 $w_i$ 表示送给第 $i$ 个人的礼物数量。", "outputFormat": "若不存在可行方案，则输出 `Impossible`，否则输出一个整数，表示模 $P$ 后的方案数。\n", "hint": "### 样例 1 解释\n以 `/` 分割，`/` 前后分别表示送给第一个人和第二个人的礼物编号。$12$ 种方案详情如下：\n```plain\n1/23 1/24 1/34\n2/13 2/14 2/34\n3/12 3/14 3/24\n4/12 4/13 4/23\n```\n### 数据规模与约定\n设 $P= \\prod_{i=1}^t p_i^{c_i}$，$p_i$ 为质数。\n\n对于 $15\\%$ 的数据，$n\\leq 15$，$m\\leq 5$，$p_i^{c_i}\\leq 10^5$。\n\n在剩下的 $85\\%$ 数据中，约有 $60\\%$ 的数据满足 $t\\leq 2$，$c_i=1$，$p_i\\leq 10^5$，约有 $30\\%$ 的数据满足 $p_i\\leq 200$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^9$，$1\\leq m\\leq 5$，$1\\leq p_i^{c_i}\\leq 10^5$，$1\\leq w_i \\leq P\\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2184", "type": "P", "difficulty": 4, "samples": [["5 4\n1 1 3\n2 2 5\n1 2 4\n2 3 5\n", "1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "树状数组", "差分"], "title": "贪婪大陆", "background": "面对蚂蚁们的疯狂进攻，小 FF 的 Tower defence 宣告失败……人类被蚂蚁们逼到了 Greed Island 上的一个海湾。现在，小 FF 的后方是一望无际的大海，前方是变异了的超级蚂蚁。小 FF 还有大好前程，他可不想命丧于此， 于是他派遣手下最后一批改造 SCV 布置地雷以阻挡蚂蚁们的进攻。", "description": "小 FF 最后一道防线是一条长度为 $n$ 的战壕，小 FF 拥有无数多种地雷，而 SCV 每次可以在 $[L, R]$ 区间埋放同一种不同于之前已经埋放的地雷。由于情况已经十万火急，小 FF 在某些时候可能会询问你在 $[L',R']$ 区间内有多少种不同的地雷，他希望你能尽快的给予答复。", "inputFormat": "第一行为两个整数 $n$ 和 $m$，$n$ 表示防线长度，$m$ 表示 SCV 布雷次数及小 FF 询问的次数总和。\n\n接下来有 $m$ 行，每行三个整数 $q,l,r$：\n\n- 若 $q=1$，则表示 SCV 在 $[l, r]$ 这段区间布上一种地雷；\n- 若 $q=2$，则表示小 FF 询问当前 $[l, r]$ 区间总共有多少种地雷。", "outputFormat": "对于小 FF 的每次询问，输出一个答案（单独一行），表示当前区间地雷种数。", "hint": "### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$0 \\le n$，$m \\le 1000$。\n- 对于 $100\\%$ 的数据，$0 \\le n$，$m \\le 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Greed Island", "background": "Facing the frenzied assault of the ants, Xiao FF’s Tower defence has failed. Humans have been forced into a bay on Greed Island. Now, behind Xiao FF lies the boundless sea, and ahead are mutated super ants. Xiao FF still has a bright future and does not want to die here, so he sends his last batch of modified SCVs to lay mines to stop the ants’ advance.", "description": "Xiao FF’s last line of defense is a trench of length $n$. Xiao FF has infinitely many types of mines, and each time an SCV can lay mines of a single type on the interval $[L, R]$, with this type being different from any type used before. Since the situation is urgent, at some moments Xiao FF may ask how many different types of mines are currently in the interval $[L', R']$, and he wants you to answer as quickly as possible.", "inputFormat": "The first line contains two integers $n$ and $m$, where $n$ is the length of the defense line and $m$ is the total number of SCV laying operations and Xiao FF’s queries.\n\nEach of the next $m$ lines contains three integers $q, l, r$:\n- If $q = 1$, the SCV lays mines of a single, previously unused type on the interval $[l, r]$.\n- If $q = 2$, Xiao FF asks how many different types of mines are currently in the interval $[l, r]$.", "outputFormat": "For each of Xiao FF’s queries, output one answer (one per line), which is the current number of mine types in the specified interval.", "hint": "### Constraints\n\n- For $30\\%$ of the testdata, $0 \\le n, m \\le 1000$.\n- For $100\\%$ of the testdata, $0 \\le n, m \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "贪婪大陆", "background": "面对蚂蚁们的疯狂进攻，小 FF 的 Tower defence 宣告失败……人类被蚂蚁们逼到了 Greed Island 上的一个海湾。现在，小 FF 的后方是一望无际的大海，前方是变异了的超级蚂蚁。小 FF 还有大好前程，他可不想命丧于此， 于是他派遣手下最后一批改造 SCV 布置地雷以阻挡蚂蚁们的进攻。", "description": "小 FF 最后一道防线是一条长度为 $n$ 的战壕，小 FF 拥有无数多种地雷，而 SCV 每次可以在 $[L, R]$ 区间埋放同一种不同于之前已经埋放的地雷。由于情况已经十万火急，小 FF 在某些时候可能会询问你在 $[L',R']$ 区间内有多少种不同的地雷，他希望你能尽快的给予答复。", "inputFormat": "第一行为两个整数 $n$ 和 $m$，$n$ 表示防线长度，$m$ 表示 SCV 布雷次数及小 FF 询问的次数总和。\n\n接下来有 $m$ 行，每行三个整数 $q,l,r$：\n\n- 若 $q=1$，则表示 SCV 在 $[l, r]$ 这段区间布上一种地雷；\n- 若 $q=2$，则表示小 FF 询问当前 $[l, r]$ 区间总共有多少种地雷。", "outputFormat": "对于小 FF 的每次询问，输出一个答案（单独一行），表示当前区间地雷种数。", "hint": "### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，$0 \\le n$，$m \\le 1000$。\n- 对于 $100\\%$ 的数据，$0 \\le n$，$m \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P2185", "type": "P", "difficulty": 3, "samples": [["4 4\n1 2\n2 3\n4 2\n3 4\n0 0", "200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "广度优先搜索 BFS"], "title": "公路通行税", "background": "", "description": "在 PALMIA 国家内，有 $N$ 个城市由公路相连（每条公路恰好双向连接两个城市）。经由一条公路或多条公路，从任一城市出发可以到达其余各个城市。直到今年，公路上才要征收公路通行税。在每条公路的中间，有一征税员，从每一辆经由此路的车收取 1 PALMIA COIN（1PC）。\n\n政府官员决定减少收税员而推行公路印花。如果一辆车欲进入一条公路，就必须将这张印花贴在窗上。\n\n政府官员决定：一年的公路印花的价值相当于在两个最远城市之间进行 $100$ 次旅行所需的费用。两个城市之间的距离是从一个城市到达第二个城市所需经过的最少数目的公路数。\n\n你的任务是编写一个程序计算出公路印花的价值。", "inputFormat": "输入文件中包含几组数据。每组的第一行包括整数 $N$ 和 $M$（中间被一个空格隔开），$N$ 是该国家中城市的数目，$M$ 是公路的数目（$1\\le N\\le1000$，$1\\le M\\le25000$）。城市由整数进行编号，从 $1$ 到 $N$ 。接下来的 $M$ 行，每行均包含一对整数 $A$，$B$（$1\\le A,B\\le N$），中间由一空格隔开，代表在城市 $A$ 与 $B$ 之间有一条公路。在最后一组数后仅有一行，是两个 $0$，中间被一空格隔开。\n", "outputFormat": "对输入文件中的各组数据，输出文件中包含一行，表示公路印花的价值。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Highway Toll Stamp", "background": "", "description": "In the country of PALMIA, there are $N$ cities connected by roads (each road connects exactly two cities bidirectionally). From any city, it is possible to reach every other city by traveling along one or more roads. Starting this year, a highway toll will be charged. In the middle of each road, there is a tax collector who collects 1 PALMIA COIN (1 PC) from every car that uses this road.\n\nGovernment officials decided to reduce the number of tax collectors by introducing a road stamp. If a car wants to enter a road, it must stick this stamp on its window.\n\nThe officials set the annual road stamp value to be equal to the total cost of making $100$ trips between the two farthest cities. The distance between two cities is defined as the minimum number of roads that must be traversed to get from one city to the other.\n\nYour task is to write a program to compute the value of the road stamp.", "inputFormat": "The input contains multiple test cases. The first line of each test case contains two integers $N$ and $M$ (separated by a space), where $N$ is the number of cities and $M$ is the number of roads ($1 \\le N \\le 1000$, $1 \\le M \\le 25000$). Cities are labeled with integers from $1$ to $N$. Each of the next $M$ lines contains a pair of integers $A$, $B$ ($1 \\le A, B \\le N$), separated by a space, indicating that there is a road between city $A$ and city $B$. The input terminates with a line containing two zeros separated by a space.", "outputFormat": "For each test case, output one line containing the value of the road stamp.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "公路通行税", "background": "", "description": "在 PALMIA 国家内，有 $N$ 个城市由公路相连（每条公路恰好双向连接两个城市）。经由一条公路或多条公路，从任一城市出发可以到达其余各个城市。直到今年，公路上才要征收公路通行税。在每条公路的中间，有一征税员，从每一辆经由此路的车收取 1 PALMIA COIN（1PC）。\n\n政府官员决定减少收税员而推行公路印花。如果一辆车欲进入一条公路，就必须将这张印花贴在窗上。\n\n政府官员决定：一年的公路印花的价值相当于在两个最远城市之间进行 $100$ 次旅行所需的费用。两个城市之间的距离是从一个城市到达第二个城市所需经过的最少数目的公路数。\n\n你的任务是编写一个程序计算出公路印花的价值。", "inputFormat": "输入文件中包含几组数据。每组的第一行包括整数 $N$ 和 $M$（中间被一个空格隔开），$N$ 是该国家中城市的数目，$M$ 是公路的数目（$1\\le N\\le1000$，$1\\le M\\le25000$）。城市由整数进行编号，从 $1$ 到 $N$ 。接下来的 $M$ 行，每行均包含一对整数 $A$，$B$（$1\\le A,B\\le N$），中间由一空格隔开，代表在城市 $A$ 与 $B$ 之间有一条公路。在最后一组数后仅有一行，是两个 $0$，中间被一空格隔开。\n", "outputFormat": "对输入文件中的各组数据，输出文件中包含一行，表示公路印花的价值。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2186", "type": "P", "difficulty": 3, "samples": [["NUM 600000000\nADD\nEND\n3\n0\n600000000\n1\n", "600000000\nERROR\n600000001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "小 Z 的栈函数", "background": "", "description": "小 Z 最近发现了一个神奇的机器，这个机器的所有操作都是通过维护一个栈来完成的，它支持如下 11 个操作：\n\n- $\\texttt{NUM} ~x$：栈顶放入 $x$。\n- $\\texttt{POP}$：抛弃栈顶元素。\n- $\\texttt{INV}$：将栈顶元素取出，然后放入它的相反数。\n- $\\texttt{DUP}$：再放入一个和栈顶元素相同的数。\n- $\\texttt{SWP}$：交换栈顶的两个元素。\n- $\\texttt{ADD}$：取出栈顶的两个元素，两元素相加，所得结果放入栈内。\n- $\\texttt{SUB}$：取出栈顶的两个元素，第二个元素减去第一个元素，所得结果放入栈内。\n- $\\texttt{MUL}$：取出栈顶的两个元素，两元素相乘，所得结果放入栈内。\n- $\\texttt{DIV}$：取出栈顶的两个元素，第二个元素整除以第一个元素，所得结果放入栈内。\n- $\\texttt{MOD}$：取出栈顶的两个元素，第二个元素取模以第一个元素，所得结果放入栈内。\n- $\\texttt{END}$：结束这个程序。\n\n然后，小 Z 用上面的 11 种操作写了一个一元函数 $f(x)$。$x$ 就是放入栈里面第一个初始元素。然后经过这个函数的一系列操作，当函数结束的时候，正常情况下，栈里面会有唯一的一个元素。剩下的这个元素就作为函数 $f(x)$ 的返回值。\n\n小 Z 有 $n$ 个询问，询问每个值 $x$ 经过上述函数所映射出的 $f(x)$ 是多少。但是这个由于机器太老了，跑起东西来太慢了，小 Z 又是一个急性子，所以请你们写一个程序，来帮助小 Z 计算他查询的 $f(x)$。\n\n还有，由于这台机器太破了，所以如果运算过程中有数字的绝对值大于 $1000000000$，机器将产生故障。\n", "inputFormat": "输入首先有若干行，仅包含上述 11 个操作，用来描述函数 $f(x)$ 的操作，函数的结束保证以 $\\texttt{END}$ 结尾.\n\n接下来有一个整数，表示询问的个数 $n$。\n\n接下来 $n$ 行，每行一个整数 $x$，表示询问 $f(x)$ 的值。\n\n**输入数据不保证合法**。\n", "outputFormat": "输出 $n$ 行，每行表示一个询问的结果。按如下规则输出：\n\n- 如果最后栈内不是一个元素，输出 `ERROR`。\n- 如果运算过程中有数字的绝对值大于 $1000000000$，输出 `ERROR`。\n- 如果输入数据不合法，导致中途退出，输出 `ERROR`。\n- 否则输出对应的 $f(x)$。\n", "hint": "### 数据规模与约定\n\n对于全部测试点，保证函数的操作步数不超过 $2000$，$1 \\leq n \\leq 2000$，$|x| \\leq 10^{9}$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Stack Function", "background": "", "description": "Xiao Z recently found a magical machine whose operations are all done by maintaining a stack. It supports the following 11 operations:\n\n- $\\texttt{NUM} ~x$: Push $x$ onto the top of the stack.\n- $\\texttt{POP}$: Discard the top element of the stack.\n- $\\texttt{INV}$: Take out the top element and push its negation.\n- $\\texttt{DUP}$: Push another number equal to the top element.\n- $\\texttt{SWP}$: Swap the top two elements.\n- $\\texttt{ADD}$: Pop the top two elements, add them, and push the result.\n- $\\texttt{SUB}$: Pop the top two elements, subtract the first popped from the second popped, and push the result.\n- $\\texttt{MUL}$: Pop the top two elements, multiply them, and push the result.\n- $\\texttt{DIV}$: Pop the top two elements, integer-divide the second popped by the first popped, and push the result.\n- $\\texttt{MOD}$: Pop the top two elements, take the second popped modulo the first popped, and push the result.\n- $\\texttt{END}$: Terminate this program.\n\nThen, Xiao Z used the above 11 operations to write a unary function $f(x)$. The value $x$ is the initial element pushed into the stack. After a sequence of operations, when the function ends, normally the stack will contain exactly one element. The remaining element is taken as the return value of $f(x)$.\n\nXiao Z has $n$ queries. For each value $x$, he asks what $f(x)$ is as computed by the function above. However, the machine is too old and runs too slowly, and Xiao Z is impatient, so please write a program to help him compute his queries $f(x)$.\n\nAlso, because this machine is too fragile, if during the computation any absolute value exceeds $1000000000$, the machine will fail.", "inputFormat": "The input first contains several lines, each consisting of one of the 11 operations above, describing the operations of the function $f(x)$. The function is guaranteed to end with $\\texttt{END}$.\n\nThen an integer $n$, the number of queries.\n\nThen $n$ lines follow, each with an integer $x$, representing a query for the value $f(x)$.\n\nThe input is not guaranteed to be valid.", "outputFormat": "Output $n$ lines, each representing the result of one query, following these rules:\n\n- If the stack does not end with exactly one element, output `ERROR`.\n- If during computation any absolute value exceeds $1000000000$, output `ERROR`.\n- If the input data is invalid and causes an early exit, output `ERROR`.\n- Otherwise, output the corresponding $f(x)$.", "hint": "Constraints and Notes\n\nFor all test points, the number of function operations does not exceed $2000$, $1 \\leq n \\leq 2000$, and $|x| \\leq 10^{9}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 Z 的栈函数", "background": "", "description": "小 Z 最近发现了一个神奇的机器，这个机器的所有操作都是通过维护一个栈来完成的，它支持如下 11 个操作：\n\n- $\\texttt{NUM} ~x$：栈顶放入 $x$。\n- $\\texttt{POP}$：抛弃栈顶元素。\n- $\\texttt{INV}$：将栈顶元素取出，然后放入它的相反数。\n- $\\texttt{DUP}$：再放入一个和栈顶元素相同的数。\n- $\\texttt{SWP}$：交换栈顶的两个元素。\n- $\\texttt{ADD}$：取出栈顶的两个元素，两元素相加，所得结果放入栈内。\n- $\\texttt{SUB}$：取出栈顶的两个元素，第二个元素减去第一个元素，所得结果放入栈内。\n- $\\texttt{MUL}$：取出栈顶的两个元素，两元素相乘，所得结果放入栈内。\n- $\\texttt{DIV}$：取出栈顶的两个元素，第二个元素整除以第一个元素，所得结果放入栈内。\n- $\\texttt{MOD}$：取出栈顶的两个元素，第二个元素取模以第一个元素，所得结果放入栈内。\n- $\\texttt{END}$：结束这个程序。\n\n然后，小 Z 用上面的 11 种操作写了一个一元函数 $f(x)$。$x$ 就是放入栈里面第一个初始元素。然后经过这个函数的一系列操作，当函数结束的时候，正常情况下，栈里面会有唯一的一个元素。剩下的这个元素就作为函数 $f(x)$ 的返回值。\n\n小 Z 有 $n$ 个询问，询问每个值 $x$ 经过上述函数所映射出的 $f(x)$ 是多少。但是这个由于机器太老了，跑起东西来太慢了，小 Z 又是一个急性子，所以请你们写一个程序，来帮助小 Z 计算他查询的 $f(x)$。\n\n还有，由于这台机器太破了，所以如果运算过程中有数字的绝对值大于 $1000000000$，机器将产生故障。\n", "inputFormat": "输入首先有若干行，仅包含上述 11 个操作，用来描述函数 $f(x)$ 的操作，函数的结束保证以 $\\texttt{END}$ 结尾.\n\n接下来有一个整数，表示询问的个数 $n$。\n\n接下来 $n$ 行，每行一个整数 $x$，表示询问 $f(x)$ 的值。\n\n**输入数据不保证合法**。\n", "outputFormat": "输出 $n$ 行，每行表示一个询问的结果。按如下规则输出：\n\n- 如果最后栈内不是一个元素，输出 `ERROR`。\n- 如果运算过程中有数字的绝对值大于 $1000000000$，输出 `ERROR`。\n- 如果输入数据不合法，导致中途退出，输出 `ERROR`。\n- 否则输出对应的 $f(x)$。\n", "hint": "### 数据规模与约定\n\n对于全部测试点，保证函数的操作步数不超过 $2000$，$1 \\leq n \\leq 2000$，$|x| \\leq 10^{9}$。\n", "locale": "zh-CN"}}}
{"pid": "P2187", "type": "P", "difficulty": 5, "samples": [["4\nnoip\n2\nip\nmo", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "小Z的笔记", "background": "小Z由于写情书浪费了太多时间，导致他外语课都没有好好听。为什么是外语课而不是英语课？因为小Z也不知道这门课学的是什么语言。\n", "description": "由于没有好好听课，小Z的笔记全都记的杂乱无章，出现了好多错误的地方。小Z的笔记是如此的糟糕，以至于他只记了一句例句，而且自己还不知道是什么意思……然后在老师讲语法的时候，小Z又零星的记了几个字母对，老师说，这几个字母对是绝对不能相邻的，而且相邻是不关心字母的顺序的，比如老师说，“ab”不能相邻，那么相同的，“ba”也不能相邻。\n\n现在小Z到家了，打开了上课的笔记，然后他发现笔记有很多自相矛盾的地方：为什么下面的不能相邻的字母对会出现在上面的例句里面呢？纠结再三，小Z觉得下面的东西相对比较简单，所以记错的概率比较小……他决定在上面的例句里面擦掉几个字母，使得句子变得合法。\n\n但是小Z还有其他作业要做呢，来不及整理笔记了，就把这个艰巨的任务留给了大家，请问大家，小Z最少要擦掉几个字母，才能使得上面的例句合法？\n", "inputFormat": "第一行：一个整数N。\n\n第二行：一个长度为N的字符串，只包含小写字母，代表小Z记下的例句。\n\n第三行：一个整数M，代表不能相邻的字母对的个数。\n\n接下来M行：每行两个小写字母，代表不能相邻的字母对，因为小Z太不认真了，所以可能有重复。\n", "outputFormat": "一行，一个整数，最少要擦除的字母数。\n", "hint": "【数据规模】\n\n对于10%的数据，M=0；\n\n对于另外30%的数据，N<=1000；\n\n对于100%的数据，N<=100000，M<=400。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Notes", "background": "Because Xiao Z wasted too much time writing love letters, he didn’t pay attention in his foreign language class. Why is it a foreign language class and not English? Because Xiao Z doesn’t even know what language this class is about.", "description": "Since he didn’t pay attention, Xiao Z’s notes are a complete mess with lots of mistakes. His notes are so bad that he only wrote down one example sentence, and he doesn’t even know what it means. Later, when the teacher explained grammar, Xiao Z jotted down a few letter pairs, and the teacher said these pairs must never be adjacent. Adjacency is order-insensitive: for example, if the teacher says \"ab\" cannot be adjacent, then \"ba\" is also forbidden.\n\nBack at home, Xiao Z opened his class notes and found many contradictions: why do the forbidden pairs appear in the example sentence above? After thinking it over, he felt the items below are relatively simpler, so they are less likely to be mistaken. He decides to erase some letters from the example sentence above to make the sentence valid.\n\nBut Xiao Z still has other homework to do, so he doesn’t have time to clean up his notes. He leaves this tough task to you: what is the minimum number of letters that Xiao Z must erase to make the example sentence above valid?\n\n# Description", "inputFormat": "The first line: an integer $N$.\n\nThe second line: a string of length $N$, containing only lowercase letters, representing the example sentence Xiao Z wrote down.\n\nThe third line: an integer $M$, the number of forbidden adjacent letter pairs.\n\nThe next $M$ lines: each line contains two lowercase letters, representing a forbidden adjacent pair. Since Xiao Z was careless, duplicates may appear.", "outputFormat": "One line, an integer: the minimum number of letters to erase.", "hint": "Constraints\n\n- For 10% of the testdata, $M = 0$.\n- For another 30% of the testdata, $N \\le 1000$.\n- For 100% of the testdata, $N \\le 100000$, $M \\le 400$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的笔记", "background": "小Z由于写情书浪费了太多时间，导致他外语课都没有好好听。为什么是外语课而不是英语课？因为小Z也不知道这门课学的是什么语言。\n", "description": "由于没有好好听课，小Z的笔记全都记的杂乱无章，出现了好多错误的地方。小Z的笔记是如此的糟糕，以至于他只记了一句例句，而且自己还不知道是什么意思……然后在老师讲语法的时候，小Z又零星的记了几个字母对，老师说，这几个字母对是绝对不能相邻的，而且相邻是不关心字母的顺序的，比如老师说，“ab”不能相邻，那么相同的，“ba”也不能相邻。\n\n现在小Z到家了，打开了上课的笔记，然后他发现笔记有很多自相矛盾的地方：为什么下面的不能相邻的字母对会出现在上面的例句里面呢？纠结再三，小Z觉得下面的东西相对比较简单，所以记错的概率比较小……他决定在上面的例句里面擦掉几个字母，使得句子变得合法。\n\n但是小Z还有其他作业要做呢，来不及整理笔记了，就把这个艰巨的任务留给了大家，请问大家，小Z最少要擦掉几个字母，才能使得上面的例句合法？\n", "inputFormat": "第一行：一个整数N。\n\n第二行：一个长度为N的字符串，只包含小写字母，代表小Z记下的例句。\n\n第三行：一个整数M，代表不能相邻的字母对的个数。\n\n接下来M行：每行两个小写字母，代表不能相邻的字母对，因为小Z太不认真了，所以可能有重复。\n", "outputFormat": "一行，一个整数，最少要擦除的字母数。\n", "hint": "【数据规模】\n\n对于10%的数据，M=0；\n\n对于另外30%的数据，N<=1000；\n\n对于100%的数据，N<=100000，M<=400。\n", "locale": "zh-CN"}}}
{"pid": "P2188", "type": "P", "difficulty": 5, "samples": [["1 13 1", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数位 DP"], "title": "小Z的 k 紧凑数", "background": null, "description": "小 Z 在草稿纸上列出了很多数，他觉得相邻两位数字差的绝对值不超过 $k$ 的整数特别奇特，称其为 $k$ 紧凑数。\n\n现在小 Z 想知道 $[l,r]$ 内有多少个 $k$ 紧凑数，希望你帮帮他。", "inputFormat": "一行三个整数 $l,r,k$。", "outputFormat": "一行一个整数，表示 $[l.r]$ 内 $k$ 紧凑数的个数。", "hint": "样例解释：$[1,13]$ 内只有 $13$ 不是 $1$ 紧凑数。\n\n\n---\n\n\n对于 $30\\%$ 的数据，$r$ − $l \\le 10^5$。\n\n对于另外 $30\\%$ 的数据，$l=1$，$r$ 为 $10$ 的倍数。\n\n对于 $100\\%$ 的数据，$1 \\le l \\le r \\le 10^{18}$，$0 \\le k \\le 8$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's k-compact numbers", "background": "", "description": "Xiao Z listed many numbers on scratch paper. He calls an integer a $k$-compact number if the absolute difference between every pair of adjacent digits does not exceed $k$.\n\nNow Xiao Z wants to know how many $k$-compact numbers are within $[l, r]$ and asks for your help.", "inputFormat": "A single line with three integers $l, r, k$.", "outputFormat": "A single line containing one integer: the number of $k$-compact numbers in $[l, r]$.", "hint": "Sample explanation: within $[1, 13]$, only $13$ is not a $1$-compact number.\n\nFor $30\\%$ of the testdata, $r - l \\le 10^5$.\n\nFor another $30\\%$ of the testdata, $l = 1$, and $r$ is a multiple of $10$.\n\nFor $100\\%$ of the testdata, $1 \\le l \\le r \\le 10^{18}$, $0 \\le k \\le 8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的 k 紧凑数", "background": null, "description": "小 Z 在草稿纸上列出了很多数，他觉得相邻两位数字差的绝对值不超过 $k$ 的整数特别奇特，称其为 $k$ 紧凑数。\n\n现在小 Z 想知道 $[l,r]$ 内有多少个 $k$ 紧凑数，希望你帮帮他。", "inputFormat": "一行三个整数 $l,r,k$。", "outputFormat": "一行一个整数，表示 $[l.r]$ 内 $k$ 紧凑数的个数。", "hint": "样例解释：$[1,13]$ 内只有 $13$ 不是 $1$ 紧凑数。\n\n\n---\n\n\n对于 $30\\%$ 的数据，$r$ − $l \\le 10^5$。\n\n对于另外 $30\\%$ 的数据，$l=1$，$r$ 为 $10$ 的倍数。\n\n对于 $100\\%$ 的数据，$1 \\le l \\le r \\le 10^{18}$，$0 \\le k \\le 8$。", "locale": "zh-CN"}}}
{"pid": "P2189", "type": "P", "difficulty": 4, "samples": [["5 5 3 2\n1 2\n2 3\n3 1\n1 4\n4 5\n4 2 1\n4 1 2", "No\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论"], "title": "小 Z 的传感器", "background": null, "description": "众所周知，小 Z 家是个豪宅，有 $n$ 个房间，并通过 $m$ 条通道相连（家当然是连通的）。\n\n有一天，小 Y 想趁小 Z 不在偷偷光顾他家，并决定到他家的每个房间至少逛一次。不幸的是，小 Z 家有 $k$ 个房间装了传感器，该传感器会在第一次有人到访的时候返回信息。\n\n当小 Z 回到家时，就发现小 Y 来过了，小 Y 也如实地告诉了小 Z 自己到每个房间至少逛了一次。\n\n然而，小 Z 仔细研究了传感器返回信息的先后顺序，怀疑个别传感器可能返回信息有延迟。\n\n为了验证自己的推断，连同这一次在内，他一共让小 Y 到他家来了 $q$ 次。他想判断每次传感器返回信息的先后顺序是否可能出现，希望你帮帮他。", "inputFormat": "第一行包含四个整数 $n,m,k,q$。\n\n接下来 $m$ 行，每行包含两个整数 $x,y$，表示房间 $x$ 和房间 $y$ 有一条双向通道相连。\n\n接下来 $q$ 行，每行包含 $k$ 个整数，表示每次按先后顺序返回信息的传感器所在房间的编号。", "outputFormat": "$q$ 行，每行包含一个字符串 `Yes` 或 `No`，表示每次传感器返回信息的先后顺序是否可能出现。", "hint": "样例解释：\n\n对于第一组询问，$4 \\to 2$ 必定经过 $1$，所以答案是 `No`。\n\n对于第二组询问，路径 $4 \\to 5 \\to 4 \\to 1 \\to 3 \\to 2 \\to 1 \\to 3$ 符合给定的记录，所以答案是 `Yes`。\n\n---\n\n对于 $10\\%$ 的数据，$n \\le 2$。\n\n对于 $30\\%$ 的数据，$n \\le 3$。\n\n对于 $60\\%$ 的数据，$n \\le 10000，m \\le 20000，k \\le 10$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 10^5$，$1 \\le m \\le 2 \\times 10^5$，$1 \\le q \\le 5$，$1 \\le x,y \\le n$，$x \\neq y$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Sensors", "background": "", "description": "As we all know, Xiao Z lives in a mansion with $n$ rooms, connected by $m$ passages (the house is connected).\n\nOne day, while Xiao Z was away, Xiao Y decided to pay a secret visit and planned to visit each room at least once. Unfortunately, $k$ of the rooms are equipped with sensors, each of which returns a message the first time someone visits it.\n\nWhen Xiao Z came home, he found that Xiao Y had been there, and Xiao Y truthfully told him that he visited each room at least once.\n\nHowever, after carefully examining the order in which the sensors returned messages, Xiao Z suspected that some sensors might have delayed reporting.\n\nTo test his hypothesis, including that time, he had Xiao Y come to his house a total of $q$ times. He wants to determine whether the order of sensor messages for each visit could possibly occur, and asks you to help.", "inputFormat": "The first line contains four integers $n, m, k, q$.\n\nEach of the next $m$ lines contains two integers $x, y$, indicating that rooms $x$ and $y$ are connected by a bidirectional passage.\n\nEach of the next $q$ lines contains $k$ integers, representing the indices of the rooms with sensors, in the order their messages were returned.", "outputFormat": "Output $q$ lines. Each line contains the string `Yes` or `No`, indicating whether the given order of sensor messages could occur.", "hint": "Sample explanation:\n\nFor the first query, $4 \\to 2$ must pass through $1$, so the answer is `No`.\n\nFor the second query, the path $4 \\to 5 \\to 4 \\to 1 \\to 3 \\to 2 \\to 1 \\to 3$ matches the given record, so the answer is `Yes`.\n\n---\n\nConstraints:\n\nFor $10\\%$ of the testdata, $n \\le 2$.\n\nFor $30\\%$ of the testdata, $n \\le 3$.\n\nFor $60\\%$ of the testdata, $n \\le 10000$, $m \\le 20000$, $k \\le 10$.\n\nFor $100\\%$ of the testdata, $1 \\le k \\le n \\le 10^5$, $1 \\le m \\le 2 \\times 10^5$, $1 \\le q \\le 5$, $1 \\le x, y \\le n$, $x \\ne y$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小 Z 的传感器", "background": null, "description": "众所周知，小 Z 家是个豪宅，有 $n$ 个房间，并通过 $m$ 条通道相连（家当然是连通的）。\n\n有一天，小 Y 想趁小 Z 不在偷偷光顾他家，并决定到他家的每个房间至少逛一次。不幸的是，小 Z 家有 $k$ 个房间装了传感器，该传感器会在第一次有人到访的时候返回信息。\n\n当小 Z 回到家时，就发现小 Y 来过了，小 Y 也如实地告诉了小 Z 自己到每个房间至少逛了一次。\n\n然而，小 Z 仔细研究了传感器返回信息的先后顺序，怀疑个别传感器可能返回信息有延迟。\n\n为了验证自己的推断，连同这一次在内，他一共让小 Y 到他家来了 $q$ 次。他想判断每次传感器返回信息的先后顺序是否可能出现，希望你帮帮他。", "inputFormat": "第一行包含四个整数 $n,m,k,q$。\n\n接下来 $m$ 行，每行包含两个整数 $x,y$，表示房间 $x$ 和房间 $y$ 有一条双向通道相连。\n\n接下来 $q$ 行，每行包含 $k$ 个整数，表示每次按先后顺序返回信息的传感器所在房间的编号。", "outputFormat": "$q$ 行，每行包含一个字符串 `Yes` 或 `No`，表示每次传感器返回信息的先后顺序是否可能出现。", "hint": "样例解释：\n\n对于第一组询问，$4 \\to 2$ 必定经过 $1$，所以答案是 `No`。\n\n对于第二组询问，路径 $4 \\to 5 \\to 4 \\to 1 \\to 3 \\to 2 \\to 1 \\to 3$ 符合给定的记录，所以答案是 `Yes`。\n\n---\n\n对于 $10\\%$ 的数据，$n \\le 2$。\n\n对于 $30\\%$ 的数据，$n \\le 3$。\n\n对于 $60\\%$ 的数据，$n \\le 10000，m \\le 20000，k \\le 10$。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 10^5$，$1 \\le m \\le 2 \\times 10^5$，$1 \\le q \\le 5$，$1 \\le x,y \\le n$，$x \\neq y$。", "locale": "zh-CN"}}}
{"pid": "P2190", "type": "P", "difficulty": 4, "samples": [["3 2\n1 2 36\n2 3 36\n", "1\n"], ["4 2\n1 2 36\n4 3 36\n", "2\n"]], "limits": {"time": [1000, 1000, 1000], "memory": [128000, 128000, 128000]}, "tags": ["模拟"], "title": "小Z的车厢", "background": "", "description": "小 Z 的家乡有一列在环形铁轨上行驶的火车，共停靠 $n$ 个站（$1$ 号站到 $n$ 号站顺时针排列）。\n\n众所周知，春运是一件非常可怕的事情。不幸的是，小 Z 是铁路公司的员工，现在他收到了 $m$ 条除夕凌晨的订票申请，每个申请 $(x, y, z)$ 表示有 $z$ 个人要从 $x$ 号站顺时针坐到 $y$ 号站，同时，当火车停靠到 $x$ 号站时，所有要在 $x$ 站上车的人都会上车，所有要在 $x$ 号站下车的人都会下车。\n\n由于始发站不确定，现在小 Z 想知道至少需要分配给这列火车多少节车厢（每节车厢可容纳 $36$ 人）才能顺利完成该铁路运输，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n, m$。\n\n接下来 $m$ 行，每行包含三个整数 $x, y, z$。\n", "outputFormat": "第一行包含一个整数，表示至少需要分配给这列火车的车厢数。\n", "hint": "**【数据规模】**\n\n对于 $30 \\%$ 的数据，$n \\le 1000$，$m \\le 10000$；\n\n对于 $100 \\%$ 的数据，$1 \\le n, m \\le 10^6$，$x \\ne y$，$1 \\le z \\le 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Carriages", "background": "", "description": "In Xiao Z's hometown, there is a train running on a circular railway, stopping at $n$ stations (stations $1$ to $n$ arranged clockwise).\n\nAs everyone knows, the Spring Festival travel rush is a terrible thing. Unfortunately, Xiao Z is an employee of the railway company, and he has received $m$ booking requests for the early hours of Chinese New Year's Eve. Each request $(x, y, z)$ means there are $z$ people traveling clockwise from station $x$ to station $y$. At each stop at a station, all passengers who need to board at that station will get on, and all passengers who need to alight at that station will get off.\n\nSince the starting station is not fixed, Xiao Z wants to know the minimum number of carriages that must be assigned to this train (each carriage can carry $36$ people) to complete the transportation, and he hopes you can help him.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe next $m$ lines each contain three integers $x, y, z$.", "outputFormat": "The first line contains an integer, representing the minimum number of carriages required for this train.", "hint": "Constraints\n\nFor $30 \\%$ of the testdata, $n \\le 1000$, $m \\le 10000$;\n\nFor $100 \\%$ of the testdata, $1 \\le n, m \\le 10^6$, $x \\ne y$, $1 \\le z \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的车厢", "background": "", "description": "小 Z 的家乡有一列在环形铁轨上行驶的火车，共停靠 $n$ 个站（$1$ 号站到 $n$ 号站顺时针排列）。\n\n众所周知，春运是一件非常可怕的事情。不幸的是，小 Z 是铁路公司的员工，现在他收到了 $m$ 条除夕凌晨的订票申请，每个申请 $(x, y, z)$ 表示有 $z$ 个人要从 $x$ 号站顺时针坐到 $y$ 号站，同时，当火车停靠到 $x$ 号站时，所有要在 $x$ 站上车的人都会上车，所有要在 $x$ 号站下车的人都会下车。\n\n由于始发站不确定，现在小 Z 想知道至少需要分配给这列火车多少节车厢（每节车厢可容纳 $36$ 人）才能顺利完成该铁路运输，希望你帮帮他。", "inputFormat": "第一行包含两个整数 $n, m$。\n\n接下来 $m$ 行，每行包含三个整数 $x, y, z$。\n", "outputFormat": "第一行包含一个整数，表示至少需要分配给这列火车的车厢数。\n", "hint": "**【数据规模】**\n\n对于 $30 \\%$ 的数据，$n \\le 1000$，$m \\le 10000$；\n\n对于 $100 \\%$ 的数据，$1 \\le n, m \\le 10^6$，$x \\ne y$，$1 \\le z \\le 100$。\n", "locale": "zh-CN"}}}
{"pid": "P2191", "type": "P", "difficulty": 2, "samples": [["4\n##O#\n#O#O\n####\n###O\nARAO\nPCEM\nLEEN\nTURC", "ACMCENTRALEUROPE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串"], "title": "小Z的情书", "background": "众所周知，小 Z 是高富帅的典范和代表，所以他很很多很多的妹纸。小 Z 要写情书给他的妹纸了，作为一个谨慎的人，他当然不会直白的写在纸上（否则被那群损友发现岂不糟了？）。", "description": "虽然小 Z 谨小慎微，但是还是被狡猾的小 D 给发现了其中的玄机。作为一个大方的人，小 D 自然要把这个秘密拿出来给大家共享啦~小 Z 开始有两张 $N \\times N$ 大小的纸一张是透明的、一张是有字的。然后小 Z 把透明的纸上有些格子涂黑了。接着把这两张纸一起给他的妹纸，妹纸事先和小 Z 约定好了，按照如下方法阅读：首先先把透明的纸盖在另一张纸上，然后把露出来的字母从上到下从左到右写下来，然后转个 $90$ 度，再读一遍……这样子一共读四遍……详见样例。\n\n小 D 不知从哪把情书弄来了，请大家一起来欣赏，顺便请大家把内容打出来看看。\n", "inputFormat": "第 $1$ 行，一个整数 $N$；\n\n第 $2$ 到第 $N+1$ 行，每行 $N$ 个字符，代表 skj 的透明纸，`O` 没有涂黑的地方，`#` 代表被涂黑的地方；\n\n第 $N+2$ 到第 $2N+1$ 行，每行 $N$ 个字符，仅包含大写字母，如描述中所示，是另一张纸。", "outputFormat": "一行，情书的内容。\n", "hint": "$1 \\leq N \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Xiao Z's Love Letter", "background": "As everyone knows, Xiao Z is the very model of a tall, rich, and handsome guy, so he has many, many girls. Xiao Z is going to write a love letter to his girls. Being cautious, he certainly would not write it plainly on paper (otherwise, if his mischievous friends found it, wouldn’t that be bad?).", "description": "Although Xiao Z was very careful, the cunning Xiao D still discovered the trick. Being generous, Xiao D naturally wants to share this secret with everyone. Xiao Z starts with two $N \\times N$ sheets of paper: one is transparent, and the other has letters on it. Then Xiao Z blacks out some cells on the transparent sheet. Next, he gives both sheets to the girl. The girl and Xiao Z have agreed in advance to read it as follows: first place the transparent sheet on top of the other sheet, then write down the exposed letters in row-major order, from top to bottom and from left to right; then rotate by $90$ degrees and read again... do this a total of four times... see the sample.\n\nXiao D somehow got the love letter. Please enjoy it together and print out the content.", "inputFormat": "Line $1$: an integer $N$.\n\nLines $2$ to $N+1$: each line has $N$ characters, representing skj's transparent sheet, where `O` indicates an unblackened cell and `#` indicates a blackened cell.\n\nLines $N+2$ to $2N+1$: each line has $N$ characters, containing only uppercase letters, representing the other sheet as described.", "outputFormat": "One line: the content of the love letter.", "hint": "$1 \\leq N \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小Z的情书", "background": "众所周知，小 Z 是高富帅的典范和代表，所以他很很多很多的妹纸。小 Z 要写情书给他的妹纸了，作为一个谨慎的人，他当然不会直白的写在纸上（否则被那群损友发现岂不糟了？）。", "description": "虽然小 Z 谨小慎微，但是还是被狡猾的小 D 给发现了其中的玄机。作为一个大方的人，小 D 自然要把这个秘密拿出来给大家共享啦~小 Z 开始有两张 $N \\times N$ 大小的纸一张是透明的、一张是有字的。然后小 Z 把透明的纸上有些格子涂黑了。接着把这两张纸一起给他的妹纸，妹纸事先和小 Z 约定好了，按照如下方法阅读：首先先把透明的纸盖在另一张纸上，然后把露出来的字母从上到下从左到右写下来，然后转个 $90$ 度，再读一遍……这样子一共读四遍……详见样例。\n\n小 D 不知从哪把情书弄来了，请大家一起来欣赏，顺便请大家把内容打出来看看。\n", "inputFormat": "第 $1$ 行，一个整数 $N$；\n\n第 $2$ 到第 $N+1$ 行，每行 $N$ 个字符，代表 skj 的透明纸，`O` 没有涂黑的地方，`#` 代表被涂黑的地方；\n\n第 $N+2$ 到第 $2N+1$ 行，每行 $N$ 个字符，仅包含大写字母，如描述中所示，是另一张纸。", "outputFormat": "一行，情书的内容。\n", "hint": "$1 \\leq N \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2192", "type": "P", "difficulty": 1, "samples": [["4\n5 0 5 0", "0\n"], ["11\n5 5 5 5 5 5 5 5 0 5 5", "5555555550"], ["2\n5 5", "-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟"], "title": "HXY玩卡片", "background": null, "description": "HXY 得到了一些卡片，这些卡片上标有数字 $0$ 或 $5$。\n\n现在她可以选择其中一些卡片排成一列，使得排出的一列数字组成的数最大，且满足被 $90$ 整除这个条件。\n\n同时，这个数必须为合法的某个非负整数，即不能含有前导 $0$，即 $0$ 不能作为这串数的首位。\n\n但是特殊地，整数 $0$ 满足条件。\n\n如果不能排出这样的数，输出 $-1$。", "inputFormat": "第一行，卡片的个数 $n$。\n\n第二行，分别给出了这 $n$ 个数（只能为数字 $5$ 或 $0$）。", "outputFormat": "仅一行，如果可以排出，则输出这个数。否则输出 $-1$。", "hint": "数据范围：\n\n对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $20\\%$ 的数据，给定的数字均为 $5$。\n\n对于 $100\\%$ 的数据，$n\\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "HXY Plays with Cards", "background": "", "description": "HXY has some cards, each labeled with the digit $0$ or $5$.\n\nShe can choose some of these cards and arrange them in a row to form the largest possible number that is divisible by $90$.\n\nThis number must be a valid non-negative integer, meaning it cannot have a leading $0$; that is, $0$ cannot be the first digit of the sequence.\n\nExceptionally, the integer $0$ is allowed.\n\nIf no such number can be formed, output $-1$.", "inputFormat": "The first line contains the number of cards $n$.\n\nThe second line contains the $n$ digits (each is either $5$ or $0$).", "outputFormat": "Output a single line: if it is possible, print the number; otherwise, print $-1$.", "hint": "Constraints:\n\nFor $30\\%$ of the testdata, $n \\le 10$.\n\nFor $20\\%$ of the testdata, all given digits are $5$.\n\nFor $100\\%$ of the testdata, $n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY玩卡片", "background": null, "description": "HXY 得到了一些卡片，这些卡片上标有数字 $0$ 或 $5$。\n\n现在她可以选择其中一些卡片排成一列，使得排出的一列数字组成的数最大，且满足被 $90$ 整除这个条件。\n\n同时，这个数必须为合法的某个非负整数，即不能含有前导 $0$，即 $0$ 不能作为这串数的首位。\n\n但是特殊地，整数 $0$ 满足条件。\n\n如果不能排出这样的数，输出 $-1$。", "inputFormat": "第一行，卡片的个数 $n$。\n\n第二行，分别给出了这 $n$ 个数（只能为数字 $5$ 或 $0$）。", "outputFormat": "仅一行，如果可以排出，则输出这个数。否则输出 $-1$。", "hint": "数据范围：\n\n对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $20\\%$ 的数据，给定的数字均为 $5$。\n\n对于 $100\\%$ 的数据，$n\\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P2193", "type": "P", "difficulty": 3, "samples": [["3 2\n", "5\n"], ["6 4\n", "39\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "HXY和序列", "background": "", "description": "HXY 突发奇想，她想要找到一个正整数序列，满足序列中所有的数不超过 $n$，序列长度为 $p$，且除了第一个数外，所有的数都能被前一个数整除（即是前一个数的倍数）。很快她找到了一个这样的序列。可是她觉得还不够，想要知道这样的序列有多少个，可她被惊人的数据范围吓怕了。现在她找到了你，请你来帮助她解决这个问题。（因为结果可能会很大，请输出对 $10^9+7$ 取模后的值）\n", "inputFormat": "第一行，两个正整数 $n,p$。", "outputFormat": "仅一行，一个正整数，表示满足条件序列的个数对 $10^9+7$ 取模后的值。", "hint": "数据范围：\n\n对于 $10\\%$ 的数据，$p=1$；\n\n对于 $30\\%$ 的数据，$1 \\leq n,p \\leq 10$；\n\n对于 $60\\%$ 的数据，$1 \\leq n,p \\leq 5 \\times 10^2$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,p \\leq 2 \\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "HXY and Sequence", "background": "", "description": "HXY had a sudden idea: she wants to find a sequence of positive integers such that every number in the sequence does not exceed $n$, the length of the sequence is $p$, and except for the first number, every number is divisible by the previous number (i.e., is a multiple of the previous number). She quickly found one such sequence. But she felt that was not enough and wants to know how many such sequences there are, but she was frightened by the astonishing constraints. Now she has come to you; please help her solve this problem. Since the result may be very large, please output the value modulo $10^9+7$.", "inputFormat": "The first line contains two positive integers $n$ and $p$.", "outputFormat": "Output a single line with one positive integer, which is the number of sequences that satisfy the conditions, modulo $10^9+7$.", "hint": "Constraints:\n\nFor $10\\%$ of the testdata, $p=1$.\n\nFor $30\\%$ of the testdata, $1 \\leq n,p \\leq 10$.\n\nFor $60\\%$ of the testdata, $1 \\leq n,p \\leq 5 \\times 10^2$.\n\nFor $100\\%$ of the testdata, $1 \\leq n,p \\leq 2 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY和序列", "background": "", "description": "HXY 突发奇想，她想要找到一个正整数序列，满足序列中所有的数不超过 $n$，序列长度为 $p$，且除了第一个数外，所有的数都能被前一个数整除（即是前一个数的倍数）。很快她找到了一个这样的序列。可是她觉得还不够，想要知道这样的序列有多少个，可她被惊人的数据范围吓怕了。现在她找到了你，请你来帮助她解决这个问题。（因为结果可能会很大，请输出对 $10^9+7$ 取模后的值）\n", "inputFormat": "第一行，两个正整数 $n,p$。", "outputFormat": "仅一行，一个正整数，表示满足条件序列的个数对 $10^9+7$ 取模后的值。", "hint": "数据范围：\n\n对于 $10\\%$ 的数据，$p=1$；\n\n对于 $30\\%$ 的数据，$1 \\leq n,p \\leq 10$；\n\n对于 $60\\%$ 的数据，$1 \\leq n,p \\leq 5 \\times 10^2$；\n\n对于 $100\\%$ 的数据，$1 \\leq n,p \\leq 2 \\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2194", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3\n3\n1 2\n2 3\n3 2", "3 1\n"], ["3\n10 20 10\n4\n1 2\n1 3\n3 1\n2 1\n", "10 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "强连通分量"], "title": "HXY烧情侣", "background": "", "description": "众所周知，HXY 已经加入了 FFF 团。现在她要开始喜（sang）闻（xin）乐（bing）见（kuang）地烧情侣了。\n\n这里有 $n$ 座电影院，$n$ 对情侣分别在每座电影院里，然后电影院里都有汽油，但是要使用它需要一定的费用。$m$ 条单向通道连接相邻的两对情侣所在电影院。\n\nHXY 有个绝技，如果她能从一个点开始烧，最后回到这个点，那么烧这条回路上的情侣的费用只需要该点的汽油费即可。并且每对情侣只需烧一遍，电影院可以重复去。然后她想花尽可能少的费用烧掉所有的情侣。\n\n问：最少需要多少费用，并且当费用最少时的方案数是多少？由于方案数可能过大，所以请输出方案数对 $10^9+7$ 取模的结果。\n\n（注：这里 HXY 每次可以从任何一个点开始走回路。就是说一个回路走完了，下一个开始位置可以任选。所以说不存在烧不了所有情侣的情况，即使图不连通，HXY 自行选择顶点进行烧情侣行动。且走过的道路可以重复走。）", "inputFormat": "第一行一个正整数 $n$。   \n第二行 $n$ 个正整数，表示每个点的汽油费 $w_i$。  \n第三行一个正整数 $m$。  \n接下来 $m$ 行，每行两个正整数 $x_i,y_i$，表示一条 $x_i \\to y_i$ 的单向道路。", "outputFormat": "输出一行两个整数，分别表示最小花费，和花费最小时的方案数。", "hint": "对于 $30\\%$ 的数据，$1\\le n,m \\le 20$；  \n对于另外 $10\\%$ 的数据，保证不存在回路；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 3\\times 10^5$，$0\\le w_i \\le 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "HXY Burns Couples", "background": "", "description": "As we all know, HXY has joined the \"FFF group\". Now she is going to start burning couples.\n\nThere are $n$ cinemas, with $n$ couples, one couple in each cinema. Every cinema has gasoline, but using it costs a certain fee. There are $m$ directed roads connecting the cinemas of neighboring couples.\n\nHXY has a special trick: if she can start burning from some node and eventually return to it, then the cost to burn all couples on that cycle is only the gasoline fee of that starting node. Each couple needs to be burned exactly once, while cinemas may be revisited. She wants to spend as little total cost as possible to burn all couples.\n\nQuestion: what is the minimum total cost, and how many optimal ways are there to achieve this minimum? Since the number of ways may be large, output it modulo $10^9+7$.\n\nNote: HXY can start each cycle from any node. That is, after finishing one cycle, she may choose any node as the starting point for the next cycle. Therefore, it is always possible to burn all couples; even if the graph is disconnected, HXY will choose vertices to carry out the action. Roads may be reused.", "inputFormat": "The first line contains a positive integer $n$.  \nThe second line contains $n$ positive integers, where $w_i$ is the gasoline fee of node $i$.  \nThe third line contains a positive integer $m$.  \nEach of the next $m$ lines contains two positive integers $x_i, y_i$, indicating a directed road $x_i \\to y_i$.", "outputFormat": "Output two integers: the minimum total cost, and the number of optimal ways.", "hint": "- Constraints:\n  - For $30\\%$ of the testdata, $1 \\le n, m \\le 20$.\n  - For another $10\\%$ of the testdata, it is guaranteed that there is no cycle.\n  - For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 3 \\times 10^5$, $0 \\le w_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY烧情侣", "background": "", "description": "众所周知，HXY 已经加入了 FFF 团。现在她要开始喜（sang）闻（xin）乐（bing）见（kuang）地烧情侣了。\n\n这里有 $n$ 座电影院，$n$ 对情侣分别在每座电影院里，然后电影院里都有汽油，但是要使用它需要一定的费用。$m$ 条单向通道连接相邻的两对情侣所在电影院。\n\nHXY 有个绝技，如果她能从一个点开始烧，最后回到这个点，那么烧这条回路上的情侣的费用只需要该点的汽油费即可。并且每对情侣只需烧一遍，电影院可以重复去。然后她想花尽可能少的费用烧掉所有的情侣。\n\n问：最少需要多少费用，并且当费用最少时的方案数是多少？由于方案数可能过大，所以请输出方案数对 $10^9+7$ 取模的结果。\n\n（注：这里 HXY 每次可以从任何一个点开始走回路。就是说一个回路走完了，下一个开始位置可以任选。所以说不存在烧不了所有情侣的情况，即使图不连通，HXY 自行选择顶点进行烧情侣行动。且走过的道路可以重复走。）", "inputFormat": "第一行一个正整数 $n$。   \n第二行 $n$ 个正整数，表示每个点的汽油费 $w_i$。  \n第三行一个正整数 $m$。  \n接下来 $m$ 行，每行两个正整数 $x_i,y_i$，表示一条 $x_i \\to y_i$ 的单向道路。", "outputFormat": "输出一行两个整数，分别表示最小花费，和花费最小时的方案数。", "hint": "对于 $30\\%$ 的数据，$1\\le n,m \\le 20$；  \n对于另外 $10\\%$ 的数据，保证不存在回路；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 3\\times 10^5$，$0\\le w_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P2195", "type": "P", "difficulty": 4, "samples": [["6 0 6\n2 1 2\n2 3 4\n2 5 6\n2 3 2\n2 5 3\n1 1", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "并查集", "广度优先搜索 BFS", "树的直径"], "title": "HXY造公园", "background": "", "description": "现在有一个现成的公园，有 $n$ 个休息点和 $m$ 条双向边连接两个休息点。众所周知，HXY 是一个 SXBK 的强迫症患者，所以她打算施展魔法来改造公园并即时了解改造情况。她可以进行以下两种操作：\n\n1. 对某个休息点 $x$，查询公园中可以与该点互相到达的休息点组成的路径中的最长路径。\n2. 对于两个休息点 $x,y$，如果 $x,y$ 已经可以互相到达则忽略此次操作。否则，在 $x$ 可到达的所有休息点和 $y$ 可到达的所有休息点（包括 $x,y$ 自身）分别选择一个休息点，然后在这两个休息点之间连一条边，并且这个选择应该满足对于连接后的公园，$x$ 和 $y$ 所在的区域（即 $x,y$ 可达到的所有休息点和边组成的集合）中的最长路径的长度最小。\n\nHXY打算进行 $q$ 个操作，请你回答她的对于公园情况的询问（操作 1）或者执行她的操作（操作 2）。\n\n注：所有边的长度皆为 $1$。保证不存在环。最长路径定义为：对于点 $v_1,v_2\\cdots v_k$，如果对于其中任意的 $v_i$ 和 $v_{i+1}\\quad (1\\le i\\le k-1)$，都有边相连接，那么 $v_j\\quad(1\\le j\\le k)$ 所在区域的最长路径就是 $k-1$。\n", "inputFormat": "- 第一行，三个正整数，分别为 $n,m,q$。\n- 接下来的 $m$ 行，每一行有两个正整数 $x_i,y_i$，表示 $x_i$ 和 $y_i$ 有一条双向边相连。\n- 再接下来的 $q$ 行，每一行表示一个操作。\n  - 若该行第一个数为 $1$，则表示操作 1，之后还有一个正整数 $x_i$，表示要查询的休息点。\n  - 若该行第一个数为 $2$，则表示操作 2，之后还有两个正整数 $x_i,y_i$，表示需要执行操作的两个休息点。\n", "outputFormat": "输出行数为操作 1 的个数。\n\n每行输出对于操作 1 询问的回答。\n", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据，只存在操作 1。\n- 对于 $30\\%$ 的数据，$0\\le m<n\\le 20$，$1\\le q\\le5$。\n- 对于 $60\\%$ 的数据，$0\\le m<n \\le 2000$，$1\\le q\\le 1000$。\n- 对于 $100\\%$ 的数据，$0 \\le m<n \\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "HXY Builds a Park", "background": "", "description": "There is an existing park with $ n $ rest spots and $ m $ undirected edges connecting pairs of rest spots. As everyone knows, HXY is an OCD patient of \"SXBK\", so she plans to use magic to renovate the park and instantly keep track of the renovation. She can perform the following two operations:\n1. For a rest spot $ x $, query the longest path within the set of rest spots that are mutually reachable with $ x $.\n2. For two rest spots $ x, y $, if $ x $ and $ y $ are already mutually reachable, ignore this operation. Otherwise, choose one rest spot from all rest spots reachable from $ x $ and one rest spot from all rest spots reachable from $ y $ (including $ x $ and $ y $ themselves), then add one edge between these two chosen rest spots. This choice should minimize, in the park after the connection, the length of the longest path within the region containing $ x $ and $ y $ (that is, the set consisting of all rest spots and edges reachable from $ x $ and $ y $).\n\nHXY plans to perform $ q $ operations. Please answer her queries about the park (operation 1) or carry out her operation (operation 2).\n\nNote: All edges have length $ 1 $. It is guaranteed that there are no cycles. The longest path is defined as follows: for vertices $ v_1, v_2, \\cdots, v_k $, if for every $ v_i $ and $ v_{i+1} \\ (1 \\le i \\le k-1) $ there is an edge connecting them, then the longest path in the region containing any $ v_j \\ (1 \\le j \\le k) $ has length $ k - 1 $.", "inputFormat": "- The first line contains three positive integers $ n, m, q $.\n- The next $ m $ lines each contain two positive integers $ x_i, y_i $, indicating that there is an undirected edge between $ x_i $ and $ y_i $.\n- The next $ q $ lines each describe an operation.\n  - If the first number is $ 1 $, this is operation 1; then there is one positive integer $ x_i $, the rest spot to query.\n  - If the first number is $ 2 $, this is operation 2; then there are two positive integers $ x_i, y_i $, the two rest spots for the operation.", "outputFormat": "The number of output lines equals the number of operation 1.\n\nOn each line, output the answer to the corresponding operation 1 query.", "hint": "### Constraints and Conventions\n\n- For $ 10\\% $ of the testdata, only operation 1 exists.\n- For $ 30\\% $ of the testdata, $ 0 \\le m < n \\le 20 $, $ 1 \\le q \\le 5 $.\n- For $ 60\\% $ of the testdata, $ 0 \\le m < n \\le 2000 $, $ 1 \\le q \\le 1000 $.\n- For $ 100\\% $ of the testdata, $ 0 \\le m < n \\le 3 \\times 10^5 $, $ 1 \\le q \\le 3 \\times 10^5 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HXY造公园", "background": "", "description": "现在有一个现成的公园，有 $n$ 个休息点和 $m$ 条双向边连接两个休息点。众所周知，HXY 是一个 SXBK 的强迫症患者，所以她打算施展魔法来改造公园并即时了解改造情况。她可以进行以下两种操作：\n\n1. 对某个休息点 $x$，查询公园中可以与该点互相到达的休息点组成的路径中的最长路径。\n2. 对于两个休息点 $x,y$，如果 $x,y$ 已经可以互相到达则忽略此次操作。否则，在 $x$ 可到达的所有休息点和 $y$ 可到达的所有休息点（包括 $x,y$ 自身）分别选择一个休息点，然后在这两个休息点之间连一条边，并且这个选择应该满足对于连接后的公园，$x$ 和 $y$ 所在的区域（即 $x,y$ 可达到的所有休息点和边组成的集合）中的最长路径的长度最小。\n\nHXY打算进行 $q$ 个操作，请你回答她的对于公园情况的询问（操作 1）或者执行她的操作（操作 2）。\n\n注：所有边的长度皆为 $1$。保证不存在环。最长路径定义为：对于点 $v_1,v_2\\cdots v_k$，如果对于其中任意的 $v_i$ 和 $v_{i+1}\\quad (1\\le i\\le k-1)$，都有边相连接，那么 $v_j\\quad(1\\le j\\le k)$ 所在区域的最长路径就是 $k-1$。\n", "inputFormat": "- 第一行，三个正整数，分别为 $n,m,q$。\n- 接下来的 $m$ 行，每一行有两个正整数 $x_i,y_i$，表示 $x_i$ 和 $y_i$ 有一条双向边相连。\n- 再接下来的 $q$ 行，每一行表示一个操作。\n  - 若该行第一个数为 $1$，则表示操作 1，之后还有一个正整数 $x_i$，表示要查询的休息点。\n  - 若该行第一个数为 $2$，则表示操作 2，之后还有两个正整数 $x_i,y_i$，表示需要执行操作的两个休息点。\n", "outputFormat": "输出行数为操作 1 的个数。\n\n每行输出对于操作 1 询问的回答。\n", "hint": "### 数据范围及约定\n\n- 对于 $10\\%$ 的数据，只存在操作 1。\n- 对于 $30\\%$ 的数据，$0\\le m<n\\le 20$，$1\\le q\\le5$。\n- 对于 $60\\%$ 的数据，$0\\le m<n \\le 2000$，$1\\le q\\le 1000$。\n- 对于 $100\\%$ 的数据，$0 \\le m<n \\le 3\\times 10^5$，$1\\le q\\le 3\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P2196", "type": "P", "difficulty": 3, "samples": [["5\n10 8 4 7 6\n1 1 1 0\n0 0 0\n1 1\n1\n", "1 3 4 5\n27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "搜索", "NOIP 提高组", "深度优先搜索 DFS", "拓扑排序", "1996"], "title": "[NOIP 1996 提高组] 挖地雷", "background": null, "description": "在一个地图上有 $N\\ (N \\le 20)$ 个地窖，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后每次可以移动到一个编号比当前节点大且联通的节点去挖地雷，当无满足条件的节点时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。", "inputFormat": "有若干行。\n\n第 $1$ 行只有一个数字，表示地窖的个数 $N$。\n\n第 $2$ 行有 $N$ 个数，分别表示每个地窖中的地雷个数。\n\n第 $3$ 行至第 $N+1$ 行表示地窖之间的连接情况：\n\n第 $3$ 行有 $n-1$ 个数（$0$ 或 $1$），表示第一个地窖至第 $2$ 个、第 $3$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。如第 $3$ 行为 $1\\space 1\\space 0\\space 0\\space 0\\cdots 0$，则表示第 $1$ 个地窖至第 $2$ 个地窖有路径，至第 $3$ 个地窖有路径，至第 $4$ 个地窖、第 $5$ 个 $\\dots$ 第 $n$ 个地窖没有路径。\n\n第 $4$ 行有 $n-2$ 个数，表示第二个地窖至第 $3$ 个、第 $4$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。\n\n……\n\n第 $n+1$ 行有 $1$ 个数，表示第 $n-1$ 个地窖至第 $n$ 个地窖有否路径连接。（为 $0$ 表示没有路径，为 $1$ 表示有路径）。", "outputFormat": "第一行表示挖得最多地雷时的挖地雷的顺序，各地窖序号间以一个空格分隔，不得有多余的空格。\n\n第二行只有一个数，表示能挖到的最多地雷数。", "hint": "**【样例解释】**\n![](https://img.picui.cn/free/2025/05/15/6825a221c60ba.png)\n最优路径为 $1 \\to 3 \\to 4 \\to 5$，结果为 $27$。\n\n**【题目来源】**\n\nNOIP 1996 提高组第三题。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 1996 Senior] Digging Mines", "background": "", "description": "On a map there are $N$ ($N \\le 20$) cellars, each containing a certain number of mines. The connections between cellars are given. After the data of the cellars and their connections are provided, a person can start digging mines from any cellar. Each time, they may move to a connected cellar whose index is strictly larger than the current node’s index to dig mines. The digging ends when there is no node that satisfies the condition. Design a digging plan so that the person can collect the maximum number of mines.", "inputFormat": "Multiple lines.\n\nThe first line contains a single integer, the number of cellars $N$.\n\nThe second line contains $N$ integers, representing the number of mines in each cellar.\n\nLines $3$ to $N+1$ describe the connections between cellars:\n\n- Line $3$ has $N-1$ numbers ($0$ or $1$), indicating whether there is a path from the first cellar to the $2$-nd, $3$-rd, …, $N$-th cellar. For example, if line $3$ is $1\\ 1\\ 0\\ 0\\ 0 \\cdots 0$, it means there is a path from cellar $1$ to cellar $2$, a path from cellar $1$ to cellar $3$, and no path from cellar $1$ to cellar $4$, cellar $5$, …, cellar $N$.\n- Line $4$ has $N-2$ numbers, indicating whether there is a path from the second cellar to the $3$-rd, $4$-th, …, $N$-th cellar.\n- …\n- Line $N+1$ has $1$ number, indicating whether there is a path from the $(N-1)$-th cellar to the $N$-th cellar (where $0$ means no path and $1$ means there is a path).", "outputFormat": "The first line prints the digging order when the maximum number of mines is collected. The indices of the cellars are separated by a single space, with no extra spaces.\n\nThe second line contains a single integer, the maximum number of mines that can be collected.", "hint": "[Sample Explanation]\n![](https://img.picui.cn/free/2025/05/15/6825a221c60ba.png)\nThe optimal path is $1 \\to 3 \\to 4 \\to 5$, and the result is $27$.\n\n[Source]\nNOIP 1996 Senior, Problem 3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 1996 提高组] 挖地雷", "background": null, "description": "在一个地图上有 $N\\ (N \\le 20)$ 个地窖，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后每次可以移动到一个编号比当前节点大且联通的节点去挖地雷，当无满足条件的节点时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。", "inputFormat": "有若干行。\n\n第 $1$ 行只有一个数字，表示地窖的个数 $N$。\n\n第 $2$ 行有 $N$ 个数，分别表示每个地窖中的地雷个数。\n\n第 $3$ 行至第 $N+1$ 行表示地窖之间的连接情况：\n\n第 $3$ 行有 $n-1$ 个数（$0$ 或 $1$），表示第一个地窖至第 $2$ 个、第 $3$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。如第 $3$ 行为 $1\\space 1\\space 0\\space 0\\space 0\\cdots 0$，则表示第 $1$ 个地窖至第 $2$ 个地窖有路径，至第 $3$ 个地窖有路径，至第 $4$ 个地窖、第 $5$ 个 $\\dots$ 第 $n$ 个地窖没有路径。\n\n第 $4$ 行有 $n-2$ 个数，表示第二个地窖至第 $3$ 个、第 $4$ 个 $\\dots$ 第 $n$ 个地窖有否路径连接。\n\n……\n\n第 $n+1$ 行有 $1$ 个数，表示第 $n-1$ 个地窖至第 $n$ 个地窖有否路径连接。（为 $0$ 表示没有路径，为 $1$ 表示有路径）。", "outputFormat": "第一行表示挖得最多地雷时的挖地雷的顺序，各地窖序号间以一个空格分隔，不得有多余的空格。\n\n第二行只有一个数，表示能挖到的最多地雷数。", "hint": "**【样例解释】**\n![](https://img.picui.cn/free/2025/05/15/6825a221c60ba.png)\n最优路径为 $1 \\to 3 \\to 4 \\to 5$，结果为 $27$。\n\n**【题目来源】**\n\nNOIP 1996 提高组第三题。", "locale": "zh-CN"}}}
{"pid": "P2197", "type": "P", "difficulty": 4, "samples": [["2\n2\n1 1\n2\n1 0", "No\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["博弈论", "SG 函数", "模板题"], "title": "【模板】Nim 游戏", "background": null, "description": "甲，乙两个人玩 Nim 取石子游戏。\n\nNim 游戏的规则是这样的：地上有 $n$ 堆石子，每人每次可从任意一堆石子里取出任意多枚石子扔掉，可以取完，不能不取。每次只能从一堆里取。最后没石子可取的人就输了。假如甲是先手，且告诉你这 $n$ 堆石子的数量，他想知道是否存在先手必胜的策略。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示有 $T$ 组数据。\n\n接下来每两行是一组数据：\n- 第一行一个整数 $n$，表示有 $n$ 堆石子；\n- 第二行有 $n$ 个数，表示每一堆石子的数量。", "outputFormat": "共 $T$ 行，每行表示如果对于这组数据存在先手必胜策略则输出 `Yes`，否则输出 `No`。", "hint": "对于所有数据，$1\\le T\\le 10$，$1\\le n\\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "【Template】Nim Game", "background": "", "description": "Two players, A and B, are playing the Nim game.\n\nThe rules of the Nim game are as follows: There are $n$ piles of stones on the ground (each pile has fewer than $10^4$ stones). On each turn, a player may remove any positive number of stones from exactly one pile; it is allowed to take all stones from that pile, but taking none is not allowed. The player who cannot make a move (i.e., when no stones remain) loses. Given that A moves first and the sizes of the $n$ piles are known, determine whether there exists a winning strategy for the first player.", "inputFormat": "This problem has multiple testdata.\n\nThe first line contains an integer $T$ ($T \\le 10$), indicating there are $T$ sets of testdata.\n\nNext, each set of testdata consists of two lines. The first line contains an integer $n$, the number of piles, with $n \\le 10^4$.\n\nThe second line contains $n$ integers, representing the number of stones in each pile.", "outputFormat": "Output $T$ lines. For each set of testdata, output `Yes` if there exists a winning strategy for the first player; otherwise, output `No`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】Nim 游戏", "background": null, "description": "甲，乙两个人玩 Nim 取石子游戏。\n\nNim 游戏的规则是这样的：地上有 $n$ 堆石子，每人每次可从任意一堆石子里取出任意多枚石子扔掉，可以取完，不能不取。每次只能从一堆里取。最后没石子可取的人就输了。假如甲是先手，且告诉你这 $n$ 堆石子的数量，他想知道是否存在先手必胜的策略。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示有 $T$ 组数据。\n\n接下来每两行是一组数据：\n- 第一行一个整数 $n$，表示有 $n$ 堆石子；\n- 第二行有 $n$ 个数，表示每一堆石子的数量。", "outputFormat": "共 $T$ 行，每行表示如果对于这组数据存在先手必胜策略则输出 `Yes`，否则输出 `No`。", "hint": "对于所有数据，$1\\le T\\le 10$，$1\\le n\\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2198", "type": "P", "difficulty": 5, "samples": [["5 4 3 2 1", "82"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线性数据结构"], "title": "杀蚂蚁", "background": "说“善有善报，恶有恶报，不是不报……”。小 FF 一心只顾自己企业的壮大而没顾及自己的采矿业对 Greed Island 上生态环境的破坏，Greed Island 的环境日益恶劣。终于，岛上的蚂蚁们变异了，它们决定对小 FF 的矿区进行攻击，欲将岛上的人类驱逐出去……面对蚂蚁们的进攻，人类节节败退。无奈之下，小 FF 请来了全宇宙最强的防御系统制造商派来的工程机器人——SCV，希望能够阻挡蚂蚁的攻势。\n\n", "description": "经过小 FF 的研究，他发现蚂蚁们每次都走同一条长度为 $n$ 个单位的路线进攻，且蚂蚁们的经过一个单位长度所需的时间为 $T$ 秒。也就是说，只要小 FF 在条路线上布防且给蚂蚁造成沉痛伤害就能阻止蚂蚁的进军。\n\nSCV 擅长制造的防御塔有三种，分别是激光塔，放射塔和干扰塔，他们可以在一个单位长度内修建一座防御塔。三种防御塔的作用如下：\n\n激光塔：使用高能激光，当蚂蚁从塔前经过时每秒对蚂蚁造成 $r$ 点伤害。\n\n放射塔：释放放射性元素，当蚂蚁经过这座塔后，每一秒受到 $g$ 点伤害。\n\n干扰塔：干扰塔负责干扰蚂蚁们的信息素，使得蚂蚁在经过这座塔后，经过之后每一个单位长度的时间变成 $T+b$。\n\n当然，放射塔和干扰塔的效果是可以叠加的，也就是说如果敌人经过 $x$ 座放射塔，那么敌人每秒钟会受到 $x \\times g$ 点伤害；同理，如果敌人经过 $y$ 座干扰塔，那么敌人经过一个单位长度的时间将变为 $T + y \\times b$。\n\n现在距离蚂蚁的下一轮进攻还有足够长的时间，你这个“NewBe\\_One”计划的首席工程师现在被任命为战略总参谋长，因此你必须设计一个给蚂蚁们造成最大伤害的布塔方案。", "inputFormat": "输入数据仅一行，$5$ 个整数 $n,r,g,b,T$ 中间用一个空格隔开。它们分别表示你可以布防的总长度，激光塔的效果、放射塔的效果和干扰塔的效果。", "outputFormat": "输出仅一个整数，代表你的方案给敌人带来的最大伤害值。", "hint": "#### 样例解释\n\n第 $1$ 号位置为放射塔，第 $2,3$ 号位置建造干扰塔，第 $4,5$ 号位置建造激光塔。\n\n#### 数据范围\n\n对于 $30\\%$ 的数据：$1 \\leq n \\leq 20$；\n\n对于 $60\\%$ 的数据：$1 \\leq n \\leq 1024,0 \\leq r,g,b \\leq 65536,0 \\leq T \\leq 3$；\n\n对于另外 $40\\%$ 的数据：$1 \\leq n \\leq 400,0 \\leq r,g,b \\leq 2^{31}-1,0 \\leq t \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "Killing Ants", "background": "People say, \"Good is rewarded with good, evil with evil; retribution only comes late, not never.\" Little FF focused only on growing his own business and ignored how his mining damaged the ecosystem on Greed Island, and the environment kept getting worse. Finally, the ants on the island mutated. They decided to attack Little FF’s mining area and drive humans off the island. Facing the ants’ offensive, humans lost ground one step after another. As a last resort, Little FF brought in SCV, the engineering robot sent by the strongest defense system manufacturer in the universe, hoping to hold off the ants’ assault.", "description": "After Little FF’s research, he found that the ants always attack along the same route of length $n$ units, and the time needed to traverse one unit length is $T$ seconds. In other words, as long as Little FF deploys defenses along this route and inflicts heavy damage on the ants, he can stop their advance.\n\nSCV specializes in building three kinds of defense towers: Laser Tower, Radiation Tower, and Interference Tower. On each unit length, exactly one tower can be built. Their effects are as follows:\n\nLaser Tower: Uses high-energy lasers and deals $r$ damage per second to the ants while they pass in front of the tower.\n\nRadiation Tower: Releases radioactive elements. After the ants pass this tower, they take $g$ damage per second.\n\nInterference Tower: Disrupts the ants’ pheromones. After the ants pass this tower, the time to traverse each subsequent unit length becomes $T + b$.\n\nThe effects of Radiation Towers and Interference Towers stack. That is, if the enemy has passed $x$ Radiation Towers, then they take $x \\times g$ damage per second; similarly, if they have passed $y$ Interference Towers, then the time to traverse one unit length becomes $T + y \\times b$.\n\nThere is enough time before the next wave of attacks. As the chief engineer of the “NewBe\\_One” project, now appointed as the chief strategist, you must design a tower placement plan that maximizes the total damage dealt to the ants.", "inputFormat": "The input contains a single line with $5$ integers $n, r, g, b, T$ separated by a space. They represent: the total route length you can deploy on $n$, the Laser Tower’s per-second damage $r$, the Radiation Tower’s per-second damage $g$, the Interference Tower’s per-unit time increase $b$, and the base time per unit length $T$.", "outputFormat": "Output a single integer, the maximum total damage your plan can deal to the enemy.", "hint": "#### Sample Explanation\n\nAt position $1$ build a Radiation Tower; at positions $2$ and $3$ build Interference Towers; at positions $4$ and $5$ build Laser Towers.\n\n#### Constraints\n\nFor $30\\%$ of the testdata: $1 \\leq n \\leq 20$.\n\nFor $60\\%$ of the testdata: $1 \\leq n \\leq 1024, 0 \\leq r,g,b \\leq 65536, 0 \\leq T \\leq 3$.\n\nFor the remaining $40\\%$ of the testdata: $1 \\leq n \\leq 400, 0 \\leq r,g,b \\leq 2^{31}-1, 0 \\leq T \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "杀蚂蚁", "background": "说“善有善报，恶有恶报，不是不报……”。小 FF 一心只顾自己企业的壮大而没顾及自己的采矿业对 Greed Island 上生态环境的破坏，Greed Island 的环境日益恶劣。终于，岛上的蚂蚁们变异了，它们决定对小 FF 的矿区进行攻击，欲将岛上的人类驱逐出去……面对蚂蚁们的进攻，人类节节败退。无奈之下，小 FF 请来了全宇宙最强的防御系统制造商派来的工程机器人——SCV，希望能够阻挡蚂蚁的攻势。\n\n", "description": "经过小 FF 的研究，他发现蚂蚁们每次都走同一条长度为 $n$ 个单位的路线进攻，且蚂蚁们的经过一个单位长度所需的时间为 $T$ 秒。也就是说，只要小 FF 在条路线上布防且给蚂蚁造成沉痛伤害就能阻止蚂蚁的进军。\n\nSCV 擅长制造的防御塔有三种，分别是激光塔，放射塔和干扰塔，他们可以在一个单位长度内修建一座防御塔。三种防御塔的作用如下：\n\n激光塔：使用高能激光，当蚂蚁从塔前经过时每秒对蚂蚁造成 $r$ 点伤害。\n\n放射塔：释放放射性元素，当蚂蚁经过这座塔后，每一秒受到 $g$ 点伤害。\n\n干扰塔：干扰塔负责干扰蚂蚁们的信息素，使得蚂蚁在经过这座塔后，经过之后每一个单位长度的时间变成 $T+b$。\n\n当然，放射塔和干扰塔的效果是可以叠加的，也就是说如果敌人经过 $x$ 座放射塔，那么敌人每秒钟会受到 $x \\times g$ 点伤害；同理，如果敌人经过 $y$ 座干扰塔，那么敌人经过一个单位长度的时间将变为 $T + y \\times b$。\n\n现在距离蚂蚁的下一轮进攻还有足够长的时间，你这个“NewBe\\_One”计划的首席工程师现在被任命为战略总参谋长，因此你必须设计一个给蚂蚁们造成最大伤害的布塔方案。", "inputFormat": "输入数据仅一行，$5$ 个整数 $n,r,g,b,T$ 中间用一个空格隔开。它们分别表示你可以布防的总长度，激光塔的效果、放射塔的效果和干扰塔的效果。", "outputFormat": "输出仅一个整数，代表你的方案给敌人带来的最大伤害值。", "hint": "#### 样例解释\n\n第 $1$ 号位置为放射塔，第 $2,3$ 号位置建造干扰塔，第 $4,5$ 号位置建造激光塔。\n\n#### 数据范围\n\n对于 $30\\%$ 的数据：$1 \\leq n \\leq 20$；\n\n对于 $60\\%$ 的数据：$1 \\leq n \\leq 1024,0 \\leq r,g,b \\leq 65536,0 \\leq T \\leq 3$；\n\n对于另外 $40\\%$ 的数据：$1 \\leq n \\leq 400,0 \\leq r,g,b \\leq 2^{31}-1,0 \\leq t \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P2199", "type": "P", "difficulty": 3, "samples": [["3 4\nOXXO\nXXOO\nXOOO\n3 2 2 4\n3 3 1 1\n0 0 0 0\n", "1\nPoor Harry\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "枚举", "广度优先搜索 BFS", "队列"], "title": "最后的迷宫", "background": "哈利•波特作为三强争霸赛的第四名选手，历尽艰险闯到了最后一关——迷宫。\n\n现在，迷宫里只剩下哈利和塞德里克了，哈利只有在塞德里克前面拿到奖杯，才能赢得比赛。哈利只要能看到奖杯，就可以用飞来咒拿到它，所以，现在的问题是哈利如何能尽早地看到奖杯。", "description": "哈利的视力非常好，他能从迷宫的一端沿直线看到迷宫的另一端（但他只能看八个方向——东北，东，东南，南，西南……），而且他跑得非常快，跑一步（向上、下、左、右移动一格）只需要 $1\\text{s}$。但迷宫是不透光的，而且，要烧掉迷宫的墙也不容易，所以哈利决定绕到一个能够看到奖杯的地方。现在，哈利希望你能帮他确定最短需要多长时间才能拿到奖杯。\n\n我们规定，迷宫左上角的坐标为 $(1,1)$，右下角坐标为 $(N,M)$。", "inputFormat": "第一行为 $2$ 个数 $N,M$ 表示迷宫的规模（$N$ 为高，$M$ 为宽）。\n\n接下来是 $N \\times M$ 的迷宫，$\\texttt{O}$ 表示空地，$\\texttt{X}$ 表示墙。\n\n最后是多对数据，分别是奖杯坐标及哈利的坐标（显然不可能在墙上），每对占一行，$0$ 为结束标志。", "outputFormat": "根据每对数据，计算哈利拿到奖杯的最短时间，每对一行。如果魔法部有意难为选手，用墙将奖杯包围了起来，输出 $\\texttt{Poor Harry}$。", "hint": "对于 $30\\%$ 的数据，有 $N\\times M\\le100$；\n\n对于 $60\\%$ 的数据，有 $N\\times M\\le1600$；\n\n对于 $100\\%$ 的数据，有 $N\\times M\\le16384$。\n\n询问数据对数不超过 $512$。", "locale": "zh-CN", "translations": {"en": {"title": "The Final Maze", "background": "As the fourth champion in the Triwizard Tournament, Harry Potter has braved many dangers to reach the final task — the maze.\n\nNow only Harry and Cedric are left in the maze. Harry can win the competition only if he gets to the trophy before Cedric. As long as Harry can see the trophy, he can use a Summoning Charm to pull it to himself. So the question is how Harry can see the trophy as soon as possible.", "description": "Harry has excellent eyesight: he can look in a straight line from one side of the maze to the other (but only in eight directions — NE, E, SE, S, SW, W, NW, N). He also runs very fast: taking one step (moving one cell up, down, left, or right) costs only $1\\text{s}$. However, the maze walls are opaque, and burning them down is not easy, so Harry decides to run to a place where he can see the trophy. Now he wants you to determine the minimum time needed for him to obtain the trophy.", "inputFormat": "The first line contains $2$ numbers $N, M$ indicating the size of the maze ($N$ is height, $M$ is width).\n\nNext comes the $N \\times M$ maze: $\\texttt{O}$ denotes open ground, and $\\texttt{X}$ denotes a wall.\n\nFinally, there are multiple pairs of data, each giving the coordinates of the trophy and Harry (obviously not on walls), one pair per line. A single $0$ marks the end.", "outputFormat": "For each pair of data, output the minimum time for Harry to obtain the trophy, one per line. If the Ministry of Magic makes things difficult by surrounding the trophy with walls, output $\\texttt{Poor Harry}$.", "hint": "For $30\\%$ of the testdata, $N \\times M \\le 100$.\n\nFor $60\\%$ of the testdata, $N \\times M \\le 1600$.\n\nFor $100\\%$ of the testdata, $N \\times M \\le 16384$.\n\nThe number of query pairs does not exceed $512$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "最后的迷宫", "background": "哈利•波特作为三强争霸赛的第四名选手，历尽艰险闯到了最后一关——迷宫。\n\n现在，迷宫里只剩下哈利和塞德里克了，哈利只有在塞德里克前面拿到奖杯，才能赢得比赛。哈利只要能看到奖杯，就可以用飞来咒拿到它，所以，现在的问题是哈利如何能尽早地看到奖杯。", "description": "哈利的视力非常好，他能从迷宫的一端沿直线看到迷宫的另一端（但他只能看八个方向——东北，东，东南，南，西南……），而且他跑得非常快，跑一步（向上、下、左、右移动一格）只需要 $1\\text{s}$。但迷宫是不透光的，而且，要烧掉迷宫的墙也不容易，所以哈利决定绕到一个能够看到奖杯的地方。现在，哈利希望你能帮他确定最短需要多长时间才能拿到奖杯。\n\n我们规定，迷宫左上角的坐标为 $(1,1)$，右下角坐标为 $(N,M)$。", "inputFormat": "第一行为 $2$ 个数 $N,M$ 表示迷宫的规模（$N$ 为高，$M$ 为宽）。\n\n接下来是 $N \\times M$ 的迷宫，$\\texttt{O}$ 表示空地，$\\texttt{X}$ 表示墙。\n\n最后是多对数据，分别是奖杯坐标及哈利的坐标（显然不可能在墙上），每对占一行，$0$ 为结束标志。", "outputFormat": "根据每对数据，计算哈利拿到奖杯的最短时间，每对一行。如果魔法部有意难为选手，用墙将奖杯包围了起来，输出 $\\texttt{Poor Harry}$。", "hint": "对于 $30\\%$ 的数据，有 $N\\times M\\le100$；\n\n对于 $60\\%$ 的数据，有 $N\\times M\\le1600$；\n\n对于 $100\\%$ 的数据，有 $N\\times M\\le16384$。\n\n询问数据对数不超过 $512$。", "locale": "zh-CN"}}}
{"pid": "P2200", "type": "P", "difficulty": 4, "samples": [["3 16 9\n2 5 6\n1 1 3\n7 8 3\n2 5 1\n3 3 6\n7 8 1", "34"], ["2 193 43\n1 2\n2 1\n1 2\n2 3", "Fail"], ["3 10 20\n1 2 3\n4 5 4\n3 2 1\n2 1 2\n1 5 3\n4 3 4", "30"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "炉石collection", "background": "", "description": "小 Z 最近沉迷于一个叫做炉石 collection 的游戏。在游戏中，你需要使用排在 $N \\times N$ 的矩阵内的卡牌来击败你的敌人。\n\n在这个游戏中，排兵布阵是游戏的一个重要内容，例如“日怒保卫者”和“上古看守者”放在一起可以起到更好的效果。为了游戏的平衡性，同样种类的卡牌最多只能出战 $2$ 张。\n\n在一次激烈的战斗之后，小 Z 想要重新编排他的队伍。在游戏中，小 Z 可以支付 $A$ 枚金币让你任意横向交换卡牌，支付 $B$ 枚金币让你任意纵向交换卡牌。\n\n你只需要支付一次金币就可以进行某种类型的交换任意次，直到你停下并进行另一种类型的交换，此时需要支付另一种类型交换的费用。例如，“横向交换-横向交换-纵向交换-纵向交换-纵向交换-横向交换-纵向交换”总共要支付 $2A + 2B$ 枚金币。\n\n小 Z 想要知道，他最少要支付多少金币把他目前的布置变换成他想要的布置。", "inputFormat": "第一行包含三个数字 $N,A,B$，分别表示矩阵的大小，横向交换的费用，纵向交换的费用。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示开始交换前矩阵内每个位置卡牌的类型。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示目标矩阵内每个位置卡牌的类型。", "outputFormat": "输出最少需要支付多少金币能够把目前的布置变换成他想要的布置。如果不能变换成功，输出 `Fail`。", "hint": "对于 $68\\%$ 的数据，答案最多只需要支付 $1$ 次费用。\n\n对于 $86\\%$ 的数据，答案最多只需要支付 $2$ 次费用。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 300,1 \\leq A,B \\leq 1000000,1 \\leq$ 卡牌类型的标号 $\\leq 100000$。", "locale": "zh-CN", "translations": {"en": {"title": "Hearthstone Collection", "background": "", "description": "Xiao Z has recently become addicted to a game called Hearthstone Collection. In the game, you need to use cards arranged in an $N \\times N$ matrix to defeat your enemies.\n\nIn this game, formation is important; for example, \"Sunfury Protector\" and \"Ancient Watcher\" placed together can have a better effect. For balance, at most $2$ cards of the same kind may be deployed.\n\nAfter a fierce battle, Xiao Z wants to rearrange his lineup. In the game, Xiao Z can pay $A$ coins to perform arbitrary horizontal swaps, and pay $B$ coins to perform arbitrary vertical swaps.\n\nYou only need to pay once to make any number of swaps of one type, until you stop and perform the other type of swaps, at which point you need to pay the fee for the other type. For example, \"horizontal swap - horizontal swap - vertical swap - vertical swap - vertical swap - horizontal swap - vertical swap\" costs $2A + 2B$ coins in total.\n\nXiao Z wants to know the minimum number of coins he needs to transform his current arrangement into his desired arrangement.", "inputFormat": "The first line contains three integers $N, A, B$, representing the size of the matrix, the cost of a horizontal swap, and the cost of a vertical swap.\n\nThe next $N$ lines each contain $N$ integers, representing the card type at each position in the matrix before swapping.\n\nThe next $N$ lines each contain $N$ integers, representing the target matrix.", "outputFormat": "Output the minimum number of coins required to transform the current arrangement into the desired arrangement. If it is impossible, output `Fail`.", "hint": "For $68\\%$ of the testdata, the answer requires paying at most $1$ fee.\n\nFor $86\\%$ of the testdata, the answer requires paying at most $2$ fees.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 300,1 \\leq A,B \\leq 1000000,1 \\leq$ card type ID $\\leq 100000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "炉石collection", "background": "", "description": "小 Z 最近沉迷于一个叫做炉石 collection 的游戏。在游戏中，你需要使用排在 $N \\times N$ 的矩阵内的卡牌来击败你的敌人。\n\n在这个游戏中，排兵布阵是游戏的一个重要内容，例如“日怒保卫者”和“上古看守者”放在一起可以起到更好的效果。为了游戏的平衡性，同样种类的卡牌最多只能出战 $2$ 张。\n\n在一次激烈的战斗之后，小 Z 想要重新编排他的队伍。在游戏中，小 Z 可以支付 $A$ 枚金币让你任意横向交换卡牌，支付 $B$ 枚金币让你任意纵向交换卡牌。\n\n你只需要支付一次金币就可以进行某种类型的交换任意次，直到你停下并进行另一种类型的交换，此时需要支付另一种类型交换的费用。例如，“横向交换-横向交换-纵向交换-纵向交换-纵向交换-横向交换-纵向交换”总共要支付 $2A + 2B$ 枚金币。\n\n小 Z 想要知道，他最少要支付多少金币把他目前的布置变换成他想要的布置。", "inputFormat": "第一行包含三个数字 $N,A,B$，分别表示矩阵的大小，横向交换的费用，纵向交换的费用。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示开始交换前矩阵内每个位置卡牌的类型。\n\n接下来 $N$ 行每行包含 $N$ 个整数，表示目标矩阵内每个位置卡牌的类型。", "outputFormat": "输出最少需要支付多少金币能够把目前的布置变换成他想要的布置。如果不能变换成功，输出 `Fail`。", "hint": "对于 $68\\%$ 的数据，答案最多只需要支付 $1$ 次费用。\n\n对于 $86\\%$ 的数据，答案最多只需要支付 $2$ 次费用。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 300,1 \\leq A,B \\leq 1000000,1 \\leq$ 卡牌类型的标号 $\\leq 100000$。", "locale": "zh-CN"}}}
{"pid": "P2201", "type": "P", "difficulty": 3, "samples": [["8\nI 2\nI -1\nI 1\nQ 3\nL\nD\nR\nQ 2", "2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "栈", "链表"], "title": "数列编辑器", "background": null, "description": "小 Z 是一个爱好数学的小学生。最近，他在研究一些关于整数数列的性质。\n\n为了方便他的研究，小 Z 希望实现一个叫做“Open Continuous Lines Processor”的数列编辑器。\n\n一开始，数列编辑器里没有数字，只有一个光标。这个数列编辑器需要支持五种操作。\n\n- `I x` 在当前光标前插入数字 $x$。\n- `D` 删除当前光标前的数字。\n- `L` 光标向前移动一个数字。\n- `R` 光标向后移动一个数字。\n- `Q k` 设光标之前的数列是 $\\{a_1,a_2,\\cdots,a_n\\}$，输出第 $k$ 位及之前最大的前缀和，保证 $k\\leqslant n$。", "inputFormat": "第一行包含一个数字 $N$，表示操作的个数。\n\n接下来包含 $N$ 行，每行包含一条命令。", "outputFormat": "对于每个 `Q k` 命令，输出一个整数表示这个操作的答案。", "hint": "### 数据范围\n\n对于 $50\\%$ 的数据，$N\\leqslant1000$；\n\n对于 $80\\%$ 的数据，$N\\leqslant10^5$；\n\n对于 $100\\%$ 的数据，$N\\leqslant10^6$，插入的数字绝对值大小不会超过 $1000$。\n\n题目保证不会在数列编辑器为空时进行 `D` 操作。", "locale": "zh-CN", "translations": {"en": {"title": "Sequence Editor", "background": "", "description": "Xiao Z is an elementary school student who loves math. Recently, he has been studying properties of integer sequences.\n\nTo facilitate his research, Xiao Z wants to implement a sequence editor called \"Open Continuous Lines Processor\".\n\nAt the beginning, the sequence editor contains no numbers, only a cursor. This sequence editor needs to support five operations.\n\n- `I x` Insert the number $x$ immediately before the cursor.\n- `D` Delete the number immediately before the cursor.\n- `L` Move the cursor one position to the left.\n- `R` Move the cursor one position to the right.\n- `Q k` Let the sequence before the cursor be $\\{a_1, a_2, \\cdots, a_n\\}$. Output the maximum prefix sum among the first $k$ positions, i.e., $\\max_{1 \\le i \\le k} \\sum_{j=1}^{i} a_j$. It is guaranteed that $k \\leqslant n$.", "inputFormat": "The first line contains an integer $N$, indicating the number of operations.\n\nThen follow $N$ lines, each containing one command.", "outputFormat": "For each `Q k` command, output an integer representing the answer to that operation.", "hint": "Constraints\n\nFor $50\\%$ of the testdata, $N \\leqslant 1000$.\n\nFor $80\\%$ of the testdata, $N \\leqslant 10^5$.\n\nFor $100\\%$ of the testdata, $N \\leqslant 10^6$, and the absolute value of each inserted number does not exceed $1000$.\n\nIt is guaranteed that the `D` operation will not be performed when the sequence editor is empty.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列编辑器", "background": null, "description": "小 Z 是一个爱好数学的小学生。最近，他在研究一些关于整数数列的性质。\n\n为了方便他的研究，小 Z 希望实现一个叫做“Open Continuous Lines Processor”的数列编辑器。\n\n一开始，数列编辑器里没有数字，只有一个光标。这个数列编辑器需要支持五种操作。\n\n- `I x` 在当前光标前插入数字 $x$。\n- `D` 删除当前光标前的数字。\n- `L` 光标向前移动一个数字。\n- `R` 光标向后移动一个数字。\n- `Q k` 设光标之前的数列是 $\\{a_1,a_2,\\cdots,a_n\\}$，输出第 $k$ 位及之前最大的前缀和，保证 $k\\leqslant n$。", "inputFormat": "第一行包含一个数字 $N$，表示操作的个数。\n\n接下来包含 $N$ 行，每行包含一条命令。", "outputFormat": "对于每个 `Q k` 命令，输出一个整数表示这个操作的答案。", "hint": "### 数据范围\n\n对于 $50\\%$ 的数据，$N\\leqslant1000$；\n\n对于 $80\\%$ 的数据，$N\\leqslant10^5$；\n\n对于 $100\\%$ 的数据，$N\\leqslant10^6$，插入的数字绝对值大小不会超过 $1000$。\n\n题目保证不会在数列编辑器为空时进行 `D` 操作。", "locale": "zh-CN"}}}
{"pid": "P2202", "type": "P", "difficulty": 5, "samples": [["4 6\n0 0\n8 4\n-2 1\n0 7", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "USACO", "平衡树"], "title": "[USACO13JAN] Square Overlap S", "background": null, "description": "在一个直角坐标系中，有 $N$ 个边长为 $K$ 的正方形。\n\n给出每一个正方形的中心，请判断所有的正方形是否有重叠。\n\n输入数据保证每一个正方形的中心不重合。", "inputFormat": "第 $1$ 行：两个正整数：$N,K$。\n\n其中：$2\\le N\\le 50000$，$1\\le K\\le 10^6$，$K$ 保证是偶数。\n\n第 $2 \\sim N+1$ 行：每行有两个整数 $x_i,y_i$，描述了第 $i$ 个正方形的中心。\n\n其中：$x_i,y_i$ 均在 $[-10^6,10^6]$ 内。", "outputFormat": "只输出一行：\n\n如果没有正方形重叠，输出 `0`；如果有且只有一对正方形重叠，输出它们重叠的面积；如果有两对及以上的正方形重合，输出 `-1`。\n\n注意：在输出答案后一定要输换行符！", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Square Overlap S", "background": null, "description": "Farmer John is planning to build N (2 <= N <= 50,000) square fenced-in pastures on his farm, each of size exactly K x K (1 <= K <= 1,000,000). Pasture i is centered at point (x_i, y_i) with integer coordinates in the range -1,000,000...1,000,000. However, in his haste to complete his plans, FJ realizes that he may have accidentally placed two pastures in locations that overlap (by overlap, this means the two pastures share a positive area in common). No two pastures share the exact same center point.\n\nGiven the locations of each of the planned square pastures, please help FJ compute the area shared by the two overlapping pastures. Output zero if no two squares overlap, and -1 if overlap occurs between more than a single pair of pastures.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] Square Overlap S", "background": null, "description": "在一个直角坐标系中，有 $N$ 个边长为 $K$ 的正方形。\n\n给出每一个正方形的中心，请判断所有的正方形是否有重叠。\n\n输入数据保证每一个正方形的中心不重合。", "inputFormat": "第 $1$ 行：两个正整数：$N,K$。\n\n其中：$2\\le N\\le 50000$，$1\\le K\\le 10^6$，$K$ 保证是偶数。\n\n第 $2 \\sim N+1$ 行：每行有两个整数 $x_i,y_i$，描述了第 $i$ 个正方形的中心。\n\n其中：$x_i,y_i$ 均在 $[-10^6,10^6]$ 内。", "outputFormat": "只输出一行：\n\n如果没有正方形重叠，输出 `0`；如果有且只有一对正方形重叠，输出它们重叠的面积；如果有两对及以上的正方形重合，输出 `-1`。\n\n注意：在输出答案后一定要输换行符！", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2203", "type": "P", "difficulty": 3, "samples": [["5 6\r\n1\r\n0\r\n0\r\n0\r\n0", "1\r\n1\r\n1\r\n0\r\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "搜索", "2013", "USACO"], "title": "[USACO13OPEN] Blink B", "background": null, "description": "Farmer John 对于农场里昏暗的灯光很不满，于是他刚刚装上一个装饰精美的新吊灯。这个吊灯由 $N(3 \\le N \\le 16)$ 个灯组成，并排成一个**圆圈**。\n\n奶牛们对于这个新的发光装置很有兴趣。他们喜欢玩这样的一个游戏：在在时刻 $T$ 时，对于每一盏灯 $i$，如果在时刻 $T-1$ 时，$i$ 左边的灯（$i\\not=1$ 时为 $i-1$，$i=1$ 时，为 $n$）是开的，那么**改变第 $i$ 盏灯的状态**，否则不做操作。\n\n他们会在 $B\\ (1 \\le B \\le 10^{15})$ 个单位的时间里一直进行这样的操作。**请注意，$B$ 可能会超过一般的 $32$ 位整数的范围。**\n\n现在已知每一个灯的初始状态，请计算出在经过 $B$ 个单位的时间后，每一个灯的状态。", "inputFormat": "第 $1$ 行：两个整数 $N$ 和 $B$。\n\n第 $2\\sim N+1$ 行：第 $i+1$ 行描述了灯的初始状态，用 `0`（关）与 `1`（开）表示。", "outputFormat": "$N$ 行，第 $i$ 行应输出一个整数，描述灯的最终状态，用 `0`（关）与 `1`（开）表示。", "hint": "### 样例解释\n\n下面是样例输出的模拟：\n\n```plain\nTime T=0: 1 0 0 0 0\nTime T=1: 1 1 0 0 0\nTime T=2: 1 0 1 0 0\nTime T=3: 1 1 1 1 0\nTime T=4: 1 0 0 0 1\nTime T=5: 0 1 0 0 1\nTime T=6: 1 1 1 0 1\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Blink B", "background": "", "description": "Farmer John is unhappy with the dim lighting on the farm, so he has just installed a beautifully decorated new chandelier. This chandelier consists of $N(3 \\le N \\le 16)$ lamps arranged in a **circle**.\n\nThe cows are fascinated by this new light device. They like to play the following game: at time $T$, for each lamp $i$, if at time $T-1$ the lamp to its left (if $i\\not=1$ then $i-1$; if $i=1$, then $N$) is on, then **toggle the state of lamp $i$**; otherwise, do nothing.\n\nThey will keep performing this operation for $B\\ (1 \\le B \\le 10^{15})$ units of time. Please note that $B$ may exceed the range of a typical 32-bit integer.\n\nGiven the initial state of each lamp, compute the state of each lamp after $B$ units of time.", "inputFormat": "Line 1: Two integers $N$ and $B$.\n\nLines $2\\sim N+1$: Line $i+1$ describes the initial state of lamp $i$, represented by `0` (off) or `1` (on).", "outputFormat": "$N$ lines. On line $i$, output a single integer representing the final state of lamp $i$, using `0` (off) or `1` (on).", "hint": "### Sample Explanation\n\nBelow is a simulation of the sample output:\n\n```plain\nTime T=0: 1 0 0 0 0\nTime T=1: 1 1 0 0 0\nTime T=2: 1 0 1 0 0\nTime T=3: 1 1 1 1 0\nTime T=4: 1 0 0 0 1\nTime T=5: 0 1 0 0 1\nTime T=6: 1 1 1 0 1\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Blink B", "background": null, "description": "Farmer John 对于农场里昏暗的灯光很不满，于是他刚刚装上一个装饰精美的新吊灯。这个吊灯由 $N(3 \\le N \\le 16)$ 个灯组成，并排成一个**圆圈**。\n\n奶牛们对于这个新的发光装置很有兴趣。他们喜欢玩这样的一个游戏：在在时刻 $T$ 时，对于每一盏灯 $i$，如果在时刻 $T-1$ 时，$i$ 左边的灯（$i\\not=1$ 时为 $i-1$，$i=1$ 时，为 $n$）是开的，那么**改变第 $i$ 盏灯的状态**，否则不做操作。\n\n他们会在 $B\\ (1 \\le B \\le 10^{15})$ 个单位的时间里一直进行这样的操作。**请注意，$B$ 可能会超过一般的 $32$ 位整数的范围。**\n\n现在已知每一个灯的初始状态，请计算出在经过 $B$ 个单位的时间后，每一个灯的状态。", "inputFormat": "第 $1$ 行：两个整数 $N$ 和 $B$。\n\n第 $2\\sim N+1$ 行：第 $i+1$ 行描述了灯的初始状态，用 `0`（关）与 `1`（开）表示。", "outputFormat": "$N$ 行，第 $i$ 行应输出一个整数，描述灯的最终状态，用 `0`（关）与 `1`（开）表示。", "hint": "### 样例解释\n\n下面是样例输出的模拟：\n\n```plain\nTime T=0: 1 0 0 0 0\nTime T=1: 1 1 0 0 0\nTime T=2: 1 0 1 0 0\nTime T=3: 1 1 1 1 0\nTime T=4: 1 0 0 0 1\nTime T=5: 0 1 0 0 1\nTime T=6: 1 1 1 0 1\n```", "locale": "zh-CN"}}}
{"pid": "P2205", "type": "P", "difficulty": 4, "samples": [["6 2 \n2 R \n6 L \n1 R \n8 L \n1 R \n2 R ", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "2013", "线段树", "USACO", "离散化"], "title": "[USACO13JAN] 刷墙 Painting the Fence S", "background": null, "description": "Farmer John 已经设计了一种方法来装饰谷仓旁边的长栅栏（把栅栏认为是一根一维的线）。他把一只画刷绑在他最喜爱的奶牛 Bessie 身上，之后就去喝一杯冰水，而 Bessie 隔着栅栏来回走，当她走过某个地方，这里的一段栅栏就被刷上了涂料。\n\nBessie 从栅栏上的位置 $0$ 开始，并且遵循着一个 $N$ 次移动的次序（$1\\le N\\le10^5$）。例如 `10 L` 表示 Bessie 向左移动了 $10$ 个单位长度，`15 R` 表示 Bessie 向右移动了 $15$ 个单位长度。现给出 Bessie 所有移动的列表，Farmer John 想要知道哪些区域的栅栏至少涂了 $K$ 层涂料（只涂一层涂料的区域可能在大雨中被洗掉）。Bessie 在她的行走中最远到达距起始点 $10^9$ 个单位长度。", "inputFormat": "第 $1$ 行：两个整型数 $N$、$K$。\n\n第 $2 \\sim N+1$ 行：每行描述了 Bessie 的 $N$ 次移动中的一次，例如 `15 L`。", "outputFormat": "$1$ 行：被至少涂了 $K$ 层涂料的区域总数。", "hint": "【样例解释】\n\nBessie 从位置 $0$ 开始，向右移动 $2$ 个单位长度，向左移动 $6$ 个单位长度，向右移动 $1$ 个单位长度，向左移动 $8$ 个单位长度，最后向右移动 $3$ 个单位长度。\n\n$6$ 个单位区域至少被涂了两层涂料，是 $[-11,-8],[-4,-3],[0,2]$ 这些区域。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Painting the Fence S", "background": null, "description": "Farmer John has devised a brilliant method to paint the long fence next to his barn (think of the fence as a one-dimensional number line). He simply attaches a paint brush to his favorite cow Bessie, and then retires to drink a cold glass of water as Bessie walks back and forth across the fence, applying paint to any segment of the fence that she walks past.\n\nBessie starts at position 0 on the fence and follows a sequence of N moves (1 <= N <= 100,000). Example moves might be \"10 L\", meaning Bessie moves 10 units to the left, or \"15 R\", meaning Bessie moves 15 units to the right. Given a list of all of Bessie's moves, FJ would like to know what area of the fence gets painted with at least K coats of paint. Bessie will move at most 1,000,000,000 units away from the origin during her walk.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] 刷墙 Painting the Fence S", "background": null, "description": "Farmer John 已经设计了一种方法来装饰谷仓旁边的长栅栏（把栅栏认为是一根一维的线）。他把一只画刷绑在他最喜爱的奶牛 Bessie 身上，之后就去喝一杯冰水，而 Bessie 隔着栅栏来回走，当她走过某个地方，这里的一段栅栏就被刷上了涂料。\n\nBessie 从栅栏上的位置 $0$ 开始，并且遵循着一个 $N$ 次移动的次序（$1\\le N\\le10^5$）。例如 `10 L` 表示 Bessie 向左移动了 $10$ 个单位长度，`15 R` 表示 Bessie 向右移动了 $15$ 个单位长度。现给出 Bessie 所有移动的列表，Farmer John 想要知道哪些区域的栅栏至少涂了 $K$ 层涂料（只涂一层涂料的区域可能在大雨中被洗掉）。Bessie 在她的行走中最远到达距起始点 $10^9$ 个单位长度。", "inputFormat": "第 $1$ 行：两个整型数 $N$、$K$。\n\n第 $2 \\sim N+1$ 行：每行描述了 Bessie 的 $N$ 次移动中的一次，例如 `15 L`。", "outputFormat": "$1$ 行：被至少涂了 $K$ 层涂料的区域总数。", "hint": "【样例解释】\n\nBessie 从位置 $0$ 开始，向右移动 $2$ 个单位长度，向左移动 $6$ 个单位长度，向右移动 $1$ 个单位长度，向左移动 $8$ 个单位长度，最后向右移动 $3$ 个单位长度。\n\n$6$ 个单位区域至少被涂了两层涂料，是 $[-11,-8],[-4,-3],[0,2]$ 这些区域。", "locale": "zh-CN"}}}
{"pid": "P2206", "type": "P", "difficulty": 4, "samples": [["3\nFRF\nFRP\nRLB", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2013", "USACO"], "title": "[USACO13OPEN] Bovine Ballet B", "background": "Bessie 成为了一名芭蕾舞演员。", "description": "她的期末汇报演出就在下周，于是 Farmer John 就帮她建一个长方形的舞台。\n\n为了防止 Bessie 从舞台边缘掉下，FJ 决定要建一个足够大的舞台。\n\nBessie 的舞蹈将会占用一个由许多 $1 \\times 1$ 的正方形方块组成的长方形的区域。为了方便，我们把 Bessie 的四只脚按如下方式简写：\n\n- `FR`：前右脚（Front right hoof）\n- `FL`：前左脚（Front left hoof）\n- `RR`：后右脚（Rear right hoof）\n- `RL`：后左脚（Rear left hoof）\n\nBessie 将会从一个如下的四个相邻的格子出发，同时她会面向北方。\n\n```plain\nFL FR\n\nRL RR\n```\n\nBessie 的舞蹈会依据总数为 $N\\ (1 \\le N \\le 1000)$ 的指令进行。每一条指令都指示 Bessie 将一只脚移动一个格子，或者顺时针旋转 $90^\\circ$。\n\n其中，移动的指示由三个字符组成，其中前两个是脚的代号，最后一个代表脚移动的方向：\n\n- `F`：向前\n- `B`：向后\n- `R`：向右\n- `L`：向左\n\n比如说，`FRF` 代表着 Bessie 的前右脚向前移动一个格子，`RLR` 代表她的后左脚将向右移一个格子。\n\n当然，我们这里说的方向是以 Bessie 正面对的方向决定的。\n\n另一方面，旋转的指令也是 $3$ 个字符，其中前两个字母也是脚的代号，代表着旋转的支点。最后一个字母总是为 `P`（pivot）。\n\n比如说，`FRP` 代表着 Bessie 将以前右脚为支点，顺时针旋转 $90^\\circ$。\n\n如果我们从图中看，假设现在 Bessie 的脚是这样的，她正朝向北方：\n\n```plain\n.. .. ..\n\n.. .. FR\n\n.. FL ..\n\n.. RL RR\n```\n\n那么在进行指令 `FRP` 之后，她的脚的位置将变成下面这样，同时她将会朝向东方：\n\n```plain\nRL FL ..\n\nRR .. FR\n\n.. .. ..\n\n.. .. ..\n```\n\n现在已知 $N$ 条 Bessie 的舞蹈的指令，请你计算她的整个舞蹈所需要的最小的长方形舞台，使得 Bessie 的脚不会落到舞台之外。\n\n如果无论怎么样，她都会使自己的两个脚移动到相同的格子里，那么她就会被绊倒，并搞砸这次表演。\n\n在这样的情况下，请输出 $-1$。\n\n不过这是 Bessie 会被绊倒的唯一的原因，因为她在经过练习之后，身体十分的柔软，可以轻松的做到任何奇怪的动作（比如说把后脚伸到前脚的前面）。", "inputFormat": "第一行一个整数 $N$。\n\n下面 $N$ 行，每行 $3$ 个大写字母，表示一个指令。", "outputFormat": "一行，输出舞台的最小面积。", "hint": "样例解释：\n\nBessie 的舞蹈需要至少 $4 \\times 4$ 的舞台，并将会按下图进行：\n\n```plain\n.. .. .. ..\n\n.. .. .. ..\n\n.. .. FL FR\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRF` 之后：\n\n```plain\n.. .. .. ..\n\n.. .. .. FR\n\n.. .. FL ..\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRP` 之后：\n\n```plain\n.. RL FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face east]\n```\n\n`RLB` 之后：\n\n```plain\nRL .. FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face west]\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Bovine Ballet B", "background": "Bessie has become a ballet dancer.", "description": "Her final recital is next week, so Farmer John (FJ) builds her a rectangular stage.\n\nTo keep Bessie from falling off the edge, FJ decides to build a stage that is large enough.\n\nBessie's dance will occupy a rectangular region composed of many $1 \\times 1$ square cells. For convenience, we abbreviate Bessie's four hooves as follows:\n\n- `FR`: front right hoof (Front right hoof)\n- `FL`: front left hoof (Front left hoof)\n- `RR`: rear right hoof (Rear right hoof)\n- `RL`: rear left hoof (Rear left hoof)\n\nBessie starts with her hooves occupying four adjacent cells as shown below, initially facing north.\n\n```plain\nFL FR\n\nRL RR\n```\n\nBessie's dance consists of $N\\ (1 \\le N \\le 1000)$ instructions. Each instruction either moves one hoof by one cell or rotates $90^\\circ$ clockwise.\n\nA move instruction has three characters, where the first two are the hoof code, and the last character is the direction of movement:\n\n- `F`: forward\n- `B`: backward\n- `R`: right\n- `L`: left\n\nFor example, `FRF` means Bessie's front right hoof moves forward by one cell, and `RLR` means her rear left hoof moves right by one cell.\n\nDirections are relative to the direction Bessie is currently facing.\n\nRotation instructions also have $3$ characters. The first two letters are the hoof code and denote the pivot. The last letter is always `P` (pivot).\n\nFor example, `FRP` means Bessie rotates $90^\\circ$ clockwise about her front right hoof.\n\nFrom the diagram, suppose Bessie's hooves are positioned as follows while she is facing north:\n\n```plain\n.. .. ..\n\n.. .. FR\n\n.. FL ..\n\n.. RL RR\n```\n\nAfter executing the instruction `FRP`, her hooves become:\n\n```plain\nRL FL ..\n\nRR .. FR\n\n.. .. ..\n\n.. .. ..\n```\n\nand she will be facing east.\n\nGiven $N$ dance instructions, compute the minimal rectangular stage area required so that Bessie's hooves never step outside the stage throughout the dance.\n\nIf at any time two of her hooves occupy the same cell, she will trip and ruin the performance.\n\nIn this case, output $-1$.\n\nHowever, this is the only reason Bessie would trip, since after practice she is very flexible and can easily perform any unusual moves (for example, extending a hind hoof ahead of a front hoof).", "inputFormat": "The first line contains an integer $N$.\n\nEach of the next $N$ lines contains $3$ uppercase letters describing an instruction.", "outputFormat": "Output a single line with the minimal stage area.", "hint": "Sample explanation:\n\nBessie's dance requires at least a $4 \\times 4$ stage and proceeds as shown:\n\n```plain\n.. .. .. ..\n\n.. .. .. ..\n\n.. .. FL FR\n\n.. .. RL RR\n\n[Face north]\n```\n\nAfter `FRF`:\n\n```plain\n.. .. .. ..\n\n.. .. .. FR\n\n.. .. FL ..\n\n.. .. RL RR\n\n[Face north]\n```\n\nAfter `FRP`:\n\n```plain\n.. RL FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face east]\n```\n\nAfter `RLB`:\n\n```plain\nRL .. FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face west]\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Bovine Ballet B", "background": "Bessie 成为了一名芭蕾舞演员。", "description": "她的期末汇报演出就在下周，于是 Farmer John 就帮她建一个长方形的舞台。\n\n为了防止 Bessie 从舞台边缘掉下，FJ 决定要建一个足够大的舞台。\n\nBessie 的舞蹈将会占用一个由许多 $1 \\times 1$ 的正方形方块组成的长方形的区域。为了方便，我们把 Bessie 的四只脚按如下方式简写：\n\n- `FR`：前右脚（Front right hoof）\n- `FL`：前左脚（Front left hoof）\n- `RR`：后右脚（Rear right hoof）\n- `RL`：后左脚（Rear left hoof）\n\nBessie 将会从一个如下的四个相邻的格子出发，同时她会面向北方。\n\n```plain\nFL FR\n\nRL RR\n```\n\nBessie 的舞蹈会依据总数为 $N\\ (1 \\le N \\le 1000)$ 的指令进行。每一条指令都指示 Bessie 将一只脚移动一个格子，或者顺时针旋转 $90^\\circ$。\n\n其中，移动的指示由三个字符组成，其中前两个是脚的代号，最后一个代表脚移动的方向：\n\n- `F`：向前\n- `B`：向后\n- `R`：向右\n- `L`：向左\n\n比如说，`FRF` 代表着 Bessie 的前右脚向前移动一个格子，`RLR` 代表她的后左脚将向右移一个格子。\n\n当然，我们这里说的方向是以 Bessie 正面对的方向决定的。\n\n另一方面，旋转的指令也是 $3$ 个字符，其中前两个字母也是脚的代号，代表着旋转的支点。最后一个字母总是为 `P`（pivot）。\n\n比如说，`FRP` 代表着 Bessie 将以前右脚为支点，顺时针旋转 $90^\\circ$。\n\n如果我们从图中看，假设现在 Bessie 的脚是这样的，她正朝向北方：\n\n```plain\n.. .. ..\n\n.. .. FR\n\n.. FL ..\n\n.. RL RR\n```\n\n那么在进行指令 `FRP` 之后，她的脚的位置将变成下面这样，同时她将会朝向东方：\n\n```plain\nRL FL ..\n\nRR .. FR\n\n.. .. ..\n\n.. .. ..\n```\n\n现在已知 $N$ 条 Bessie 的舞蹈的指令，请你计算她的整个舞蹈所需要的最小的长方形舞台，使得 Bessie 的脚不会落到舞台之外。\n\n如果无论怎么样，她都会使自己的两个脚移动到相同的格子里，那么她就会被绊倒，并搞砸这次表演。\n\n在这样的情况下，请输出 $-1$。\n\n不过这是 Bessie 会被绊倒的唯一的原因，因为她在经过练习之后，身体十分的柔软，可以轻松的做到任何奇怪的动作（比如说把后脚伸到前脚的前面）。", "inputFormat": "第一行一个整数 $N$。\n\n下面 $N$ 行，每行 $3$ 个大写字母，表示一个指令。", "outputFormat": "一行，输出舞台的最小面积。", "hint": "样例解释：\n\nBessie 的舞蹈需要至少 $4 \\times 4$ 的舞台，并将会按下图进行：\n\n```plain\n.. .. .. ..\n\n.. .. .. ..\n\n.. .. FL FR\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRF` 之后：\n\n```plain\n.. .. .. ..\n\n.. .. .. FR\n\n.. .. FL ..\n\n.. .. RL RR\n\n[Face north]\n```\n\n`FRP` 之后：\n\n```plain\n.. RL FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face east]\n```\n\n`RLB` 之后：\n\n```plain\nRL .. FL ..\n\n.. RR .. FR\n\n.. .. .. ..\n\n.. .. .. ..\n\n[Face west]\n```", "locale": "zh-CN"}}}
{"pid": "P2207", "type": "P", "difficulty": 3, "samples": [["7 3\n1 3\n2 4\n5 6\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2013", "USACO", "排序"], "title": "[USACO13OPEN] Photo B", "background": null, "description": "Farmer John 打算给他的 $n$ 头奶牛照相。他们排成一条线，并且依次取 $1\\sim n$ 作为编号。\n\n每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。对于每一头奶牛，FJ 都想要让它至少出现在一张照片里。\n\n不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。", "inputFormat": "第一行：两个整数 $n,k$。\n\n第 $2\\sim k+1$ 行：第 $i+1$ 行有两个整数，记为 $a_i$ 与 $b_i$。它们代表着处在队列中第 $a_i$ 头奶牛与第 $b_i$ 头奶牛是关系不好的。", "outputFormat": "一个整数，代表 FJ 需要的最小需要拍摄的照片数量。", "hint": "### 样例 1 解释\nFJ 可以只拍三张照片：$[1,2],[3,5],[6,7]$。\n\n### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^9$，$1\\le k\\le 1000$，$1\\le a_i, b_i\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Photo B", "background": "", "description": "Farmer John plans to photograph his $n$ cows. They stand in a line and are numbered $1\\sim n$ in order.\n\nEach photo can include a contiguous interval of cows in the line. For every cow, FJ wants it to appear in at least one photo.\n\nUnfortunately, there are $k$ pairs of cows that do not get along; they refuse to appear in the same photo. Given the positions of all incompatible pairs, compute the minimum number of photos FJ needs to take.", "inputFormat": "The first line contains two integers $n, k$.\n\nLines $2\\sim k+1$: on line $i+1$, there are two integers $a_i$ and $b_i$, indicating that the cow at position $a_i$ and the cow at position $b_i$ are an incompatible pair.", "outputFormat": "Output a single integer, the minimum number of photos FJ needs.", "hint": "Sample 1 explanation:\nFJ can take only three photos: $[1,2],[3,5],[6,7]$.\n\nConstraints:\nFor $100\\%$ of the testdata, it is guaranteed that $2\\le n\\le 10^9$, $1\\le k\\le 1000$, $1\\le a_i, b_i\\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Photo B", "background": null, "description": "Farmer John 打算给他的 $n$ 头奶牛照相。他们排成一条线，并且依次取 $1\\sim n$ 作为编号。\n\n每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。对于每一头奶牛，FJ 都想要让它至少出现在一张照片里。\n\n不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。", "inputFormat": "第一行：两个整数 $n,k$。\n\n第 $2\\sim k+1$ 行：第 $i+1$ 行有两个整数，记为 $a_i$ 与 $b_i$。它们代表着处在队列中第 $a_i$ 头奶牛与第 $b_i$ 头奶牛是关系不好的。", "outputFormat": "一个整数，代表 FJ 需要的最小需要拍摄的照片数量。", "hint": "### 样例 1 解释\nFJ 可以只拍三张照片：$[1,2],[3,5],[6,7]$。\n\n### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^9$，$1\\le k\\le 1000$，$1\\le a_i, b_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P2208", "type": "P", "difficulty": 5, "samples": [["5 5\n#####\n#...#\n#...D\n#C...\n##.##", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "图论", "2013", "USACO", "枚举", "分治", "广度优先搜索 BFS"], "title": "[USACO13OPEN] What's Up With Gravity S", "background": null, "description": "Bovidian 船长正在拯救她的船员，Beefalo 博士。\n\n和所有伟大的冒险故事一样，这个故事也是发生在一个 2D 平面上的。\n\n这个平面是 $M\\times N$（$1\\le N,M \\le500$）的格子组成的网格，代表着船长的世界的一个侧视图。\n\n有些格子是空的，另一些则是实心的，并且不能直接通过。\n\n很不幸的是，船长跳不起来。她必须遵守这个世界的特殊物理法则。\n\n1. 如果船长的正下方没有方块（换句话说，即使她正在网格的边缘），那么她就会掉入宇宙中，同时意味着冒险失败。\n2. 如果船长的正下方的方块是空的，那么她就会掉到这个方块。\n3. 在不满足 1. 与 2. 的情况下，船长可以做以下的事情：\n    1. 如果左边（或右边）的方格是空的，那么她可以走到那个格子。\n    2. 船长可以翻转重力的方向。\n\n当船长改变翻转重力的方向时，我们就改变船长“下方”的定义。\n\n“下方”的定义只能是两种：\n\n1. 比船长位置所在的方格的列编号更大的格子。\n2. 比船长位置所在的方格的列编号更小的格子。\n\n一开始的时候，“下方”的定义是比船长位置所在方格的列编号更大的格子。\n\nBeefalo 博士正迷失在这个世界中的某一处，请帮助船长从起点到达博士的地方。\n\n如果可以到达，请输出最少需要的翻转重力的次数。\n\n\n如果不可以到达，请输出 $-1$。", "inputFormat": "第 $1$ 行输入两个整数 $N,M$。\n\n第 $2$ 行到 $N+1$ 行中，第 $i+1$ 行则是代表船长世界的第 $i$ 行。每行有 $M$ 个字符。\n\n\n其中 `,` 代表着一个空的格子，`#` 代表着一个实心的格子，`C` 代表着船长的位置，`D` 代表着博士的位置。", "outputFormat": "一行，输出一个整数。\n\n如果船长可以到达，请输出最少需要的翻转重力的次数。\n\n如果不可以到达，请输出 $-1$。", "hint": "输出解释：\n\n首先，船长在 $(4,2)$，接着她翻转重力，到达 $(2,2)$。\n\n接着她向右走走到 $(2,4)$，接着她第二次翻转重力，到达 $(4,4)$。\n\n然后她继续向右走到 $(4,5)$，最后在翻转一次重力，到达博士所在的 $(3,5)$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] What's Up With Gravity S", "background": null, "description": "Captain Bovidian is on an adventure to rescue her crew member, Doctor Beefalo. Like all great adventures, this story plays out in a two dimensional N by M grid (1 <= N, M <= 500), representing a side view of the captain's world. Some grid cells are empty while others are blocked and cannot be traversed.\n\nUnfortunately, Captain Bovidian cannot jump. She must obey the following rules of physics while traversing her world.\n\n1. If there is no cell directly underneath Captain Bovidian (that is, if she is at the edge of the grid), then she flies out into space and fails her mission.\n2. If the cell directly underneath Captain Bovidian is empty, then she falls into that cell.\n3. Otherwise:\n    1. Captain Bovidian may move left or right if the corresponding cell exists and is empty.\n    2. Or, Captain Bovidian may flip the direction of gravity.\n\nWhen Captain Bovidian changes the direction of gravity, the cell that's 'underneath' her (as mentioned in rules 1 and 2) toggles between the cell with one higher row index and the cell with one lower row index (the first row in the input has index 1, and the last row has index N). Initially, the cells with one higher row index are underneath Captain Bovidian.\n\nDoctor Beefalo is lost somewhere in this world. Help Captain Bovidian arrive at her cell using the least number of gravity flips as possible. If it is impossible to reach Doctor Beefalo, please output -1.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] What's Up With Gravity S", "background": null, "description": "Bovidian 船长正在拯救她的船员，Beefalo 博士。\n\n和所有伟大的冒险故事一样，这个故事也是发生在一个 2D 平面上的。\n\n这个平面是 $M\\times N$（$1\\le N,M \\le500$）的格子组成的网格，代表着船长的世界的一个侧视图。\n\n有些格子是空的，另一些则是实心的，并且不能直接通过。\n\n很不幸的是，船长跳不起来。她必须遵守这个世界的特殊物理法则。\n\n1. 如果船长的正下方没有方块（换句话说，即使她正在网格的边缘），那么她就会掉入宇宙中，同时意味着冒险失败。\n2. 如果船长的正下方的方块是空的，那么她就会掉到这个方块。\n3. 在不满足 1. 与 2. 的情况下，船长可以做以下的事情：\n    1. 如果左边（或右边）的方格是空的，那么她可以走到那个格子。\n    2. 船长可以翻转重力的方向。\n\n当船长改变翻转重力的方向时，我们就改变船长“下方”的定义。\n\n“下方”的定义只能是两种：\n\n1. 比船长位置所在的方格的列编号更大的格子。\n2. 比船长位置所在的方格的列编号更小的格子。\n\n一开始的时候，“下方”的定义是比船长位置所在方格的列编号更大的格子。\n\nBeefalo 博士正迷失在这个世界中的某一处，请帮助船长从起点到达博士的地方。\n\n如果可以到达，请输出最少需要的翻转重力的次数。\n\n\n如果不可以到达，请输出 $-1$。", "inputFormat": "第 $1$ 行输入两个整数 $N,M$。\n\n第 $2$ 行到 $N+1$ 行中，第 $i+1$ 行则是代表船长世界的第 $i$ 行。每行有 $M$ 个字符。\n\n\n其中 `,` 代表着一个空的格子，`#` 代表着一个实心的格子，`C` 代表着船长的位置，`D` 代表着博士的位置。", "outputFormat": "一行，输出一个整数。\n\n如果船长可以到达，请输出最少需要的翻转重力的次数。\n\n如果不可以到达，请输出 $-1$。", "hint": "输出解释：\n\n首先，船长在 $(4,2)$，接着她翻转重力，到达 $(2,2)$。\n\n接着她向右走走到 $(2,4)$，接着她第二次翻转重力，到达 $(4,4)$。\n\n然后她继续向右走到 $(4,5)$，最后在翻转一次重力，到达博士所在的 $(3,5)$。", "locale": "zh-CN"}}}
{"pid": "P2209", "type": "P", "difficulty": 5, "samples": [["4 10 3 17\n2 40\n9 15\n5 7\n10 12", "174\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "2013", "USACO", "优先队列", "反悔贪心"], "title": "[USACO13OPEN] Fuel Economy S", "background": "", "description": "Farmer John 决定去一次跨国旅游度假。为了不让他的奶牛们感到被抛弃，他决定租一辆大卡车来带他的奶牛们一起旅行。\n\n\n这辆卡车有一个很大的油箱，可以装下 $G$ 个单位的油（$1 \\le G \\le {10}^6$），不幸的是，卡车的耗油量也很大，卡车每运动一个单位的距离，就要消耗一个单位的油。Farmer John 要在他的旅程中走 $D$ 个单位的距离（$1 \\le D \\le {10}^9$）。\n\n\n因为 FJ 知道他可能要几次在旅途中停下，给油箱加油，所以他把在旅途沿路上的 $N$（$1\\le n\\le 5\\times 10^4$）个加油站的记录做成了表格。对于第 $i$ 个加油站，他记录了加油站与起点的距离 $X_i$（$0 \\le X_i \\le D$），以及加油站中每单位油的价格 $Y_i$（$1 \\le Y_i \\le {10}^6$）。\n\n已知以上所给的信息，以及 FJ 在路途开始时拥有的燃油的数量 $B$（$0 \\le B \\le D$），请计算出 FJ 到达目的地时花费的油费用的最小值。如果 FJ 无法到达旅途的终点，那么请输出 `-1`。本题的答案可能无法使用 32 位整数储存。", "inputFormat": "第一行： 四个整数：$N, G, B, D$。\n\n接下来 $N$ 行：每一行都有两个整数 $X_i$ 与 $Y_i$，意义如上所述。", "outputFormat": "一个整数，如果 FJ 无法到达旅途的终点，那么输出 `-1`，否则输出 FJ 到达目的地时花费的油费用的最小值。", "hint": "样例解释：FJ 先移动 $2$ 个单位，然后停下购买 $2$ 个单位的油（要花费 $40 \\times 2$）。然后一直前进到距离起点 $5$ 个单位的地方，此时油箱为空。这时向油箱里加满油（要花费 $7 \\times 10$）。再向前走 $5$ 个单位，加 $2$ 个单位的油（花费 $12 \\times 2$）。最后一直走到终点。此时总花费是 $174$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Fuel Economy S", "background": null, "description": "Farmer John has decided to take a cross-country vacation. Not wanting his cows to feel left out, however, he has decided to rent a large truck and to bring the cows with him as well!\n\nThe truck has a large tank that can hold up to G units of fuel (1 <= G <= 1,000,000). Unfortunately, it gets very poor mileage: it consumes one unit of fuel for every unit of distance traveled, and FJ has a total of D units of distance to travel along his route (1 <= D <= 1,000,000,000).\n\nSince FJ knows he will probably need to stop to refill his tank several times along his trip, he makes a list of all the N fuel stations along his route (1 <= N <= 50,000). For each station i, he records its distance X_i from the start of the route (0 <= X_i <= D), as well as the price Y_i per unit of fuel it sells (1 <= Y_i <= 1,000,000).\n\nGiven this information, and the fact that FJ starts his journey with exactly B units of fuel (0 <= B <= D), please determine the minimum amount of money FJ will need to pay for fuel in order to reach his destination. If it is impossible for him to reach the destination, please output -1. Note that the answer to this problem may not fit into a standard 32-bit integer.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Fuel Economy S", "background": "", "description": "Farmer John 决定去一次跨国旅游度假。为了不让他的奶牛们感到被抛弃，他决定租一辆大卡车来带他的奶牛们一起旅行。\n\n\n这辆卡车有一个很大的油箱，可以装下 $G$ 个单位的油（$1 \\le G \\le {10}^6$），不幸的是，卡车的耗油量也很大，卡车每运动一个单位的距离，就要消耗一个单位的油。Farmer John 要在他的旅程中走 $D$ 个单位的距离（$1 \\le D \\le {10}^9$）。\n\n\n因为 FJ 知道他可能要几次在旅途中停下，给油箱加油，所以他把在旅途沿路上的 $N$（$1\\le n\\le 5\\times 10^4$）个加油站的记录做成了表格。对于第 $i$ 个加油站，他记录了加油站与起点的距离 $X_i$（$0 \\le X_i \\le D$），以及加油站中每单位油的价格 $Y_i$（$1 \\le Y_i \\le {10}^6$）。\n\n已知以上所给的信息，以及 FJ 在路途开始时拥有的燃油的数量 $B$（$0 \\le B \\le D$），请计算出 FJ 到达目的地时花费的油费用的最小值。如果 FJ 无法到达旅途的终点，那么请输出 `-1`。本题的答案可能无法使用 32 位整数储存。", "inputFormat": "第一行： 四个整数：$N, G, B, D$。\n\n接下来 $N$ 行：每一行都有两个整数 $X_i$ 与 $Y_i$，意义如上所述。", "outputFormat": "一个整数，如果 FJ 无法到达旅途的终点，那么输出 `-1`，否则输出 FJ 到达目的地时花费的油费用的最小值。", "hint": "样例解释：FJ 先移动 $2$ 个单位，然后停下购买 $2$ 个单位的油（要花费 $40 \\times 2$）。然后一直前进到距离起点 $5$ 个单位的地方，此时油箱为空。这时向油箱里加满油（要花费 $7 \\times 10$）。再向前走 $5$ 个单位，加 $2$ 个单位的油（花费 $12 \\times 2$）。最后一直走到终点。此时总花费是 $174$。", "locale": "zh-CN"}}}
{"pid": "P2210", "type": "P", "difficulty": 4, "samples": [["6\n6 2 5\n1 3 4\n4 2 6\n5 3 2\n4 6 1\n1 5 3", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2013", "USACO", "模拟退火", "随机化", "状压 DP"], "title": "[USACO13OPEN] Haywire B", "background": null, "description": "Farmer John 有 $N$ 只奶牛（$4 \\leq N \\leq 12$，$N$ 是偶数）。他们建立了一套原生的系统，使得奶牛与他的朋友可以通过由干草保护的线路来进行对话交流。\n\n每一头奶牛在这个牧场中正好有 $3$ 个朋友，并且他们必须把自己安排在一排干草堆中。\n\n一条长 $L$ 的线路要占用刚好 $L$ 堆干草来保护线路。比如说，如果有两头奶牛分别在草堆 $4$ 与草堆 $7$ 中，并且他们是朋友关系，那么我们就需要用 $3$ 堆干草来建造线路，使他们之间能够联系。\n\n假设每一对作为朋友的奶牛都必须用一条单独的线路来连接，并且我们可以随便地改变奶牛的位置，请计算出我们建造线路所需要的最少的干草堆。", "inputFormat": "第 $1$ 行：一个整数 $N$。为了方便，我们给奶牛用 $1\\sim N$ 的数字进行编号。\n\n第 $2, 3, \\dots, N + 1$ 行：每一行都有三个在 $1\\sim N$ 中的整数。第 $i+1$ 行的数字代表着第 $i$ 头奶牛的三个朋友的编号。显然，如果奶牛 $i$ 是奶牛 $j$ 的三个朋友之一，那么奶牛 $j$ 也是奶牛 $i$ 的三个朋友之一。", "outputFormat": "一个整数，代表着建造线路需要的干草堆数量的最小值。", "hint": "样例解释：奶牛最好的排列是 $\\{6, 5, 1, 4, 2, 3\\}$，这个时候我们只需要 $17$ 个单位的干草堆。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Haywire B", "background": "", "description": "Farmer John has $N$ cows ($4 \\leq N \\leq 12$, and $N$ is even). They set up a homemade system that allows cows and their friends to communicate through lines protected by hay bales.\n\nEach cow in the pasture has exactly $3$ friends, and the cows must be arranged in a single row of hay bales.\n\nA line of length $L$ occupies exactly $L$ hay bales to protect it. For example, if two cows are placed at hay bales $4$ and $7$ and they are friends, then we need $3$ hay bales to build the line that connects them.\n\nAssume that every pair of friends must be connected by a separate line, and we may rearrange the cows arbitrarily. Compute the minimum total number of hay bales required to build all the lines.", "inputFormat": "Line $1$: An integer $N$. For convenience, the cows are numbered $1 \\sim N$.\n\nLines $2, 3, \\dots, N + 1$: Each line contains three integers in $1 \\sim N$. The numbers on line $i + 1$ are the indices of cow $i$’s three friends. Obviously, if cow $i$ is one of cow $j$’s three friends, then cow $j$ is also one of cow $i$’s three friends.", "outputFormat": "A single integer representing the minimum number of hay bales required to build the lines.", "hint": "Sample explanation: the best arrangement of the cows is $\\{6, 5, 1, 4, 2, 3\\}$, in which case we need only $17$ hay bales.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Haywire B", "background": null, "description": "Farmer John 有 $N$ 只奶牛（$4 \\leq N \\leq 12$，$N$ 是偶数）。他们建立了一套原生的系统，使得奶牛与他的朋友可以通过由干草保护的线路来进行对话交流。\n\n每一头奶牛在这个牧场中正好有 $3$ 个朋友，并且他们必须把自己安排在一排干草堆中。\n\n一条长 $L$ 的线路要占用刚好 $L$ 堆干草来保护线路。比如说，如果有两头奶牛分别在草堆 $4$ 与草堆 $7$ 中，并且他们是朋友关系，那么我们就需要用 $3$ 堆干草来建造线路，使他们之间能够联系。\n\n假设每一对作为朋友的奶牛都必须用一条单独的线路来连接，并且我们可以随便地改变奶牛的位置，请计算出我们建造线路所需要的最少的干草堆。", "inputFormat": "第 $1$ 行：一个整数 $N$。为了方便，我们给奶牛用 $1\\sim N$ 的数字进行编号。\n\n第 $2, 3, \\dots, N + 1$ 行：每一行都有三个在 $1\\sim N$ 中的整数。第 $i+1$ 行的数字代表着第 $i$ 头奶牛的三个朋友的编号。显然，如果奶牛 $i$ 是奶牛 $j$ 的三个朋友之一，那么奶牛 $j$ 也是奶牛 $i$ 的三个朋友之一。", "outputFormat": "一个整数，代表着建造线路需要的干草堆数量的最小值。", "hint": "样例解释：奶牛最好的排列是 $\\{6, 5, 1, 4, 2, 3\\}$，这个时候我们只需要 $17$ 个单位的干草堆。", "locale": "zh-CN"}}}
{"pid": "P2212", "type": "P", "difficulty": 3, "samples": [["3 11\n0 2\n5 0\n4 3", "46"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "生成树"], "title": "[USACO14MAR] Watering the Fields S", "background": null, "description": "给定 $n$ 个点，第 $i$ 个点的坐标为 $(x_i,y_i)$，如果想连通第 $i$ 个点与第 $j$ 个点，需要耗费的代价为两点的距离。第 $i$ 个点与第 $j$ 个点之间的距离使用欧几里得距离的平方进行计算，即：\n$$(x_i-x_j)^2+(y_i-y_j)^2$$\n我们规定耗费代价小于 $c$ 的两点无法连通，求使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "inputFormat": "第一行两个整数 $n,c$ 代表点数与想要连通代价不能少于的一个数。   \n接下来 $n$ 行每行两个整数 $x_i,y_i$ 描述第 $i$ 个点。", "outputFormat": "一行一个整数代表使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2000$，$0 \\le x_i,y_i \\le 1000$，$1 \\le c \\le 10^6$。\n\n### 说明\n\nTranslated by 一只书虫仔。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Watering the Fields S", "background": null, "description": "Due to a lack of rain, Farmer John wants to build an irrigation system to\n\nsend water between his N fields (1 <= N <= 2000).\n\nEach field i is described by a distinct point (xi, yi) in the 2D plane,\n\nwith 0 <= xi, yi <= 1000. The cost of building a water pipe between two\n\nfields i and j is equal to the squared Euclidean distance between them:\n\n(xi - xj)^2 + (yi - yj)^2\n\nFJ would like to build a minimum-cost system of pipes so that all of his\n\nfields are linked together -- so that water in any field can follow a\n\nsequence of pipes to reach any other field.\n\nUnfortunately, the contractor who is helping FJ install his irrigation\n\nsystem refuses to install any pipe unless its cost (squared Euclidean\n\nlength) is at least C (1 <= C <= 1,000,000).\n\nPlease help FJ compute the minimum amount he will need pay to connect all\n\nhis fields with a network of pipes.", "inputFormat": "* Line 1: The integers N and C.\n\n* Lines 2..1+N: Line i+1 contains the integers xi and yi.", "outputFormat": "* Line 1: The minimum cost of a network of pipes connecting the\n\nfields, or -1 if no such network can be built.", "hint": "INPUT DETAILS:\n\nThere are 3 fields, at locations (0,2), (5,0), and (4,3). The contractor\n\nwill only install pipes of cost at least 11.\n\nOUTPUT DETAILS:\n\nFJ cannot build a pipe between the fields at (4,3) and (5,0), since its\n\ncost would be only 10. He therefore builds a pipe between (0,2) and (5,0)\n\nat cost 29, and a pipe between (0,2) and (4,3) at cost 17.\n\nSource: USACO 2014 March Contest, Silver", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Watering the Fields S", "background": null, "description": "给定 $n$ 个点，第 $i$ 个点的坐标为 $(x_i,y_i)$，如果想连通第 $i$ 个点与第 $j$ 个点，需要耗费的代价为两点的距离。第 $i$ 个点与第 $j$ 个点之间的距离使用欧几里得距离的平方进行计算，即：\n$$(x_i-x_j)^2+(y_i-y_j)^2$$\n我们规定耗费代价小于 $c$ 的两点无法连通，求使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "inputFormat": "第一行两个整数 $n,c$ 代表点数与想要连通代价不能少于的一个数。   \n接下来 $n$ 行每行两个整数 $x_i,y_i$ 描述第 $i$ 个点。", "outputFormat": "一行一个整数代表使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2000$，$0 \\le x_i,y_i \\le 1000$，$1 \\le c \\le 10^6$。\n\n### 说明\n\nTranslated by 一只书虫仔。", "locale": "zh-CN"}}}
{"pid": "P2213", "type": "P", "difficulty": 3, "samples": [["5 2\n50 5 25 6 17\n14 3 2 7 21\n99 10 1 2 80\n8 7 5 23 11\n10 0 78 1 9\n", "342"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2014", "USACO", "前缀和"], "title": "[USACO14MAR] The Lazy Cow S", "background": null, "description": "奶牛贝茜非常懒惰，她希望在她的地盘内找到一点最佳位置居住，以便在有限的步数内可以吃到尽量多的青草。\n\n她的地盘是一个 $N \\times N(1\\le N \\le 400)$ 的矩阵，第 $r$ 行 $c$ 列包含 $G(r,c)$ 单位的青草 $(0 \\le G(r,c) \\le 1000)$。从她的居住点，她最多愿意走 $K$ 步 $(0 \\le K \\le 2 \\times N)$，每一步她可以走到与她相邻的某个格子。", "inputFormat": "第一行两个正整数 $N,K$。\n\n接下来 $N$ 行，第 $i$（$1 \\le i \\le N$）行有 $N$ 个非负整数，表示 $G(i,1),G(i,2),\\dots,G(i,n)$。", "outputFormat": "一行一个整数，表示奶牛贝茜在有限的步数内最多可以吃到多少青草。", "hint": "样例解释：\n\n最优方案是居住在 $(3,3)$，答案为 $342$：\n\n```plain\n50    5     25*   6     17    \n14    3*    2*    7*    21    \n99*   10*   1*(B) 2*    80*    \n8     7*    5*    23*   11   \n10    0     78*   1     9\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] The Lazy Cow S", "background": null, "description": "It's a hot summer day, and Bessie the cow is feeling quite lazy. She wants to locate herself at a position in her field so that she can reach as much delicious grass as possible within only a short distance.\n\nThe field Bessie inhabits is described by an N by N grid of square cells (1 <= N <= 400). The cell in row r and column c (1 <= r,c <= N) contains G(r,c) units of grass (0 <= G(r,c) <= 1000). From her initial square in the grid, Bessie is only willing to take up to K steps (0 <= K <= 2*N).\n\nEach step she takes moves her to a cell that is directly north, south, east, or west of her current location.\n\nFor example, suppose the grid is as follows, where (B) describes Bessie's initial position (here, in row 3, column 3):\n\n```plain\n50    5     25*   6     17    \n14    3*    2*    7*    21    \n99*   10*   1*(B) 2*    80*    \n8     7*    5*    23*   11   \n10    0     78*   1     9        \n```\n\nIf K=2, then Bessie can only reach the locations marked with *s.\n\nPlease help Bessie determine the maximum amount of grass she can reach, if she chooses the best possible initial location in the grid.", "inputFormat": "* Line 1: The integers N and K.\n\n* Lines 2..1+N: Line r+1 contains N integers describing row r of the grid.", "outputFormat": "* Line 1: The maximum amount of grass Bessie can reach, if she chooses the best possible initial location (the location from which she can reach the most grass).", "hint": "OUTPUT DETAILS:\n\nIn the example above, Bessie can reach 342 total units of grass if she locates herself in the middle of the grid.\n\nSource: USACO 2014 March Contest, Silver", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] The Lazy Cow S", "background": null, "description": "奶牛贝茜非常懒惰，她希望在她的地盘内找到一点最佳位置居住，以便在有限的步数内可以吃到尽量多的青草。\n\n她的地盘是一个 $N \\times N(1\\le N \\le 400)$ 的矩阵，第 $r$ 行 $c$ 列包含 $G(r,c)$ 单位的青草 $(0 \\le G(r,c) \\le 1000)$。从她的居住点，她最多愿意走 $K$ 步 $(0 \\le K \\le 2 \\times N)$，每一步她可以走到与她相邻的某个格子。", "inputFormat": "第一行两个正整数 $N,K$。\n\n接下来 $N$ 行，第 $i$（$1 \\le i \\le N$）行有 $N$ 个非负整数，表示 $G(i,1),G(i,2),\\dots,G(i,n)$。", "outputFormat": "一行一个整数，表示奶牛贝茜在有限的步数内最多可以吃到多少青草。", "hint": "样例解释：\n\n最优方案是居住在 $(3,3)$，答案为 $342$：\n\n```plain\n50    5     25*   6     17    \n14    3*    2*    7*    21    \n99*   10*   1*(B) 2*    80*    \n8     7*    5*    23*   11   \n10    0     78*   1     9\n```", "locale": "zh-CN"}}}
{"pid": "P2214", "type": "P", "difficulty": 3, "samples": [["5 2\n5\n7\n0\n17\n16\n20\n19", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2014", "USACO", "背包 DP", "栈"], "title": "[USACO14MAR] Mooo Moo S", "background": "农夫约翰完全忘了他有多少头牛了！他不好意思到牧场里去数牛，因为他不想让牛意识到他的健忘。取而代之的是，他决定在奶牛聚集的牧场里安装麦克风，秘密计算出他能从中听到的所有牛叫声的总音量，以便以此确定奶牛的数量。", "description": "FJ 的 $N(1\\le N\\le100)$ 个牧场都是沿着一条笔直的道路分布的。每一个牧场可能有许多种品种的奶牛；FJ 拥有 $B(1\\le B\\le20)$ 个不同品种的奶牛，而第 $i$ 种奶牛的叫声音量为 $V_i(1\\le V_i\\le100)$。此外，有一股强风沿着道路吹来，将牛的叫声从左往右传递，如果某个牧场的总音量是 $x$，那么它将传递 $x-1$ 的音量到右边的下一个牧场。这就意味着，一个牧场里的总音量是处在该牧场的奶牛所发出的音量加上左边前一个牧场的总音量 $-1$。数据保证，每一个牧场内由该牧场所有奶牛所发出的总音量最多为 $10^5$。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数 $N$ 和 $B$。      \n第 $2 \\sim B+1$ 行：第 $i+1$ 行包含整数 $V_i$ 。        \n第 $B+2 \\sim B+N+1$ 行：第 $B+i+1$ 行表示在第 $i$ 个牧场内所能监听到的总音量。", "outputFormat": "共一行，即 FJ 拥有的最小奶牛数量。\n\n如果 FJ 不可能拥有一种牧场配置满足给出的条件，输出 $-1$。", "hint": "#### 输入说明：\nFJ 拥有 $5$ 个牧场，每个牧场总音量从左到右分别为为 $0$、$17$、$16$、$20$、$19$。FJ 有两种不同品种的奶牛；第一种奶牛的叫声音量是 $5$，第二种奶牛的叫声音量是 $7$。\n#### 输出说明：\n$2$ 号牧场场有 $2$ 头 $1$ 号品种的奶牛，$1$ 头 $2$ 号品种奶牛；还有一头牛在 $4$ 号牧场，共 $4$ 头奶牛。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Mooo Moo S", "background": null, "description": "Farmer John has completely forgotten how many cows he owns! He is too embarrassed to go to his fields to count the cows, since he doesn't want the cows to realize his mental lapse. Instead, he decides to count his cows secretly by planting microphones in the fields in which his cows tend to gather, figuring that he can determine the number of cows from the total volume of all the mooing he hears.\n\nFJ's $N$ fields $(1 \\le N \\le 100)$ are all arranged in a line along a long straight road. Each field might contain several types of cows; FJ owns cows that come from $B$ different breeds $(1 \\le B \\le 20)$, and a cow of breed $i$ moos at a volume of $V_i (1 \\le V_i \\le 100)$. Moreover, there is a strong wind blowing down the road, which carries the sound of mooing in one direction from left to right: if the volume of mooing in some field is $X$, then in the next field this will contribute $X-1$ to the total mooing volume (and $X-2$ in the field after that, etc.). Otherwise stated, the mooing volume in a field is the sum of the contribution due to cows in that field, plus $X-1$, where $X$ is the total mooing volume in the preceding field.\n\nGiven the volume of mooing that FJ records in each field, please compute the minimum possible number of cows FJ might own.\n\nThe volume FJ records in any field is at most $100,000$.", "inputFormat": "* Line $1$: The integers $N$ and $B$.\n\n* Lines $2 \\dots 1+B$: Line $i+1$ contains the integer $V_i$.\n\n* Lines $2+B \\dots 1+B+N$: Line $1+B+i$ contains the total volume of all mooing in field $i$.", "outputFormat": "* Line $1$: The minimum number of cows owned by FJ, or `-1` if there is no configuration of cows consistent with the input.", "hint": "INPUT DETAILS:\n\nFJ owns $5$ fields, with mooing volumes $0,17,16,20,19$. There are two breeds of cows; the first moos at a volume of $5$, and the other at a volume of $7$.\n\nOUTPUT DETAILS:\n\nThere are $2$ cows of breed $\\#1$ and $1$ cow of breed $\\#2$ in field $2$, and there is another cow of breed $\\#1$ in field $4$.\n\nSource: USACO 2014 March Contest, Silver.", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Mooo Moo S", "background": "农夫约翰完全忘了他有多少头牛了！他不好意思到牧场里去数牛，因为他不想让牛意识到他的健忘。取而代之的是，他决定在奶牛聚集的牧场里安装麦克风，秘密计算出他能从中听到的所有牛叫声的总音量，以便以此确定奶牛的数量。", "description": "FJ 的 $N(1\\le N\\le100)$ 个牧场都是沿着一条笔直的道路分布的。每一个牧场可能有许多种品种的奶牛；FJ 拥有 $B(1\\le B\\le20)$ 个不同品种的奶牛，而第 $i$ 种奶牛的叫声音量为 $V_i(1\\le V_i\\le100)$。此外，有一股强风沿着道路吹来，将牛的叫声从左往右传递，如果某个牧场的总音量是 $x$，那么它将传递 $x-1$ 的音量到右边的下一个牧场。这就意味着，一个牧场里的总音量是处在该牧场的奶牛所发出的音量加上左边前一个牧场的总音量 $-1$。数据保证，每一个牧场内由该牧场所有奶牛所发出的总音量最多为 $10^5$。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数 $N$ 和 $B$。      \n第 $2 \\sim B+1$ 行：第 $i+1$ 行包含整数 $V_i$ 。        \n第 $B+2 \\sim B+N+1$ 行：第 $B+i+1$ 行表示在第 $i$ 个牧场内所能监听到的总音量。", "outputFormat": "共一行，即 FJ 拥有的最小奶牛数量。\n\n如果 FJ 不可能拥有一种牧场配置满足给出的条件，输出 $-1$。", "hint": "#### 输入说明：\nFJ 拥有 $5$ 个牧场，每个牧场总音量从左到右分别为为 $0$、$17$、$16$、$20$、$19$。FJ 有两种不同品种的奶牛；第一种奶牛的叫声音量是 $5$，第二种奶牛的叫声音量是 $7$。\n#### 输出说明：\n$2$ 号牧场场有 $2$ 头 $1$ 号品种的奶牛，$1$ 头 $2$ 号品种奶牛；还有一头牛在 $4$ 号牧场，共 $4$ 头奶牛。", "locale": "zh-CN"}}}
{"pid": "P2215", "type": "P", "difficulty": 5, "samples": [["6\n3 4 1 2 3 6\n3\n6\n4\n5\n", "Impossible\n1 2 3 6\nImpossible\n"], ["6\n6 7 1 2 3 4\n1\n2\n", "6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "递推", "2007", "河南", "各省省选"], "title": "[HAOI2007] 上升序列", "background": "", "description": "对于一个给定的 $S=\\{a_1,a_2,a_3,…,a_n\\}$ , 若有 $P=\\{a_{x_1},a_{x_2},a_{x_3},…,a_{x_m}\\}$ , 满足 $(x_1<x_2<…<x_m)$  且 $(a_{x_1}<a_{x_2}<…<a_{x_m})$ 。那么就称 $P$ 为 $S$ 的一个上升序列。如果有多个 $P$ 满足条件，那么我们想求字典序最小的那个。\n\n任务：\n\n给出 $S$ 序列，给出若干询问。对于第 $i$ 个询问，求出长度为 $L_i$ 的上升序列，如有多个，求出字典序最小的那个（即首先 $x_1$ 最小，如果不唯一，再看 $x_2$ 最小……），如果不存在长度为 $L_i$ 的上升序列，则打印 `Impossible`。\n", "inputFormat": "第一行一个 $N$，表示序列一共有 $N$ 个元素。\n\n第二行 $N$ 个数，为 $a_1, a_2 , \\cdots , a_n$。\n\n第三行一个 $M$，表示询问次数。下面接 $M$ 行每行一个数 $L$，表示要询问长度为 $L$ 的上升序列。\n", "outputFormat": "对于每个询问，如果对应的序列存在，则输出，否则打印 `Impossible`。\n", "hint": "$N \\le 10000$，$M \\le 1000$，保证数据随机。\n", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Increasing Sequence", "background": "", "description": "Given a sequence $S=\\{a_1,a_2,a_3,…,a_n\\}$, if there exists $P=\\{a_{x_1},a_{x_2},a_{x_3},…,a_{x_m}\\}$ such that $(x_1<x_2<…<x_m)$ and $(a_{x_1}<a_{x_2}<…<a_{x_m})$, then $P$ is called an increasing subsequence of $S$. If multiple $P$ satisfy the conditions, we want the lexicographically smallest one.\n\nTask:\n\nGiven the sequence $S$ and several queries. For the $i$-th query, find an increasing subsequence of length $L_i$. If there are multiple, choose the lexicographically smallest one (i.e., first minimize $x_1$; if it is not unique, then minimize $x_2$, and so on). If no increasing subsequence of length $L_i$ exists, print `Impossible`.", "inputFormat": "- The first line contains an integer $N$, the number of elements in the sequence.\n- The second line contains $N$ integers: $a_1, a_2 , \\cdots , a_n$.\n- The third line contains an integer $M$, the number of queries. Each of the next $M$ lines contains one integer $L$, asking for an increasing subsequence of length $L$.", "outputFormat": "For each query:\n- If a valid subsequence exists, output the chosen subsequence’s elements $a_{x_1}, a_{x_2}, \\dots, a_{x_L}$ on one line, separated by single spaces.\n- Otherwise, print `Impossible`.", "hint": "Constraints: $N \\le 10000$, $M \\le 1000$. The testdata are random.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 上升序列", "background": "", "description": "对于一个给定的 $S=\\{a_1,a_2,a_3,…,a_n\\}$ , 若有 $P=\\{a_{x_1},a_{x_2},a_{x_3},…,a_{x_m}\\}$ , 满足 $(x_1<x_2<…<x_m)$  且 $(a_{x_1}<a_{x_2}<…<a_{x_m})$ 。那么就称 $P$ 为 $S$ 的一个上升序列。如果有多个 $P$ 满足条件，那么我们想求字典序最小的那个。\n\n任务：\n\n给出 $S$ 序列，给出若干询问。对于第 $i$ 个询问，求出长度为 $L_i$ 的上升序列，如有多个，求出字典序最小的那个（即首先 $x_1$ 最小，如果不唯一，再看 $x_2$ 最小……），如果不存在长度为 $L_i$ 的上升序列，则打印 `Impossible`。\n", "inputFormat": "第一行一个 $N$，表示序列一共有 $N$ 个元素。\n\n第二行 $N$ 个数，为 $a_1, a_2 , \\cdots , a_n$。\n\n第三行一个 $M$，表示询问次数。下面接 $M$ 行每行一个数 $L$，表示要询问长度为 $L$ 的上升序列。\n", "outputFormat": "对于每个询问，如果对应的序列存在，则输出，否则打印 `Impossible`。\n", "hint": "$N \\le 10000$，$M \\le 1000$，保证数据随机。\n", "locale": "zh-CN"}}}
{"pid": "P2216", "type": "P", "difficulty": 4, "samples": [["5 4 2\n1 2 5 6\n0 17 16 0\n16 17 2 1\n2 10 2 1\n1 2 2 2\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2007", "河南", "各省省选", "单调队列", "队列", "ST 表"], "title": "[HAOI2007] 理想的正方形", "background": "", "description": "有一个 $a \\times b$ 的整数组成的矩阵，现请你从中找出一个 $n \\times n$ 的正方形区域，使得该区域所有数中的最大值和最小值的差最小。", "inputFormat": "第一行为 $3$ 个整数，分别表示 $a,b,n$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个非负整数，表示矩阵中相应位置上的数。每行相邻两数之间用一空格分隔。", "outputFormat": "仅一个整数，为 $a \\times b$ 矩阵中所有“ $n \\times n$ 正方形区域中的最大整数和最小整数的差值”的最小值。", "hint": "矩阵中的所有数都不超过 $1,000,000,000$。\n\n$20\\%$ 的数据 $2 \\le a,b \\le 100,n \\le a,n \\le b,n \\le 10$。\n\n$100\\%$ 的数据 $2 \\le a,b \\le 1000,n \\le a,n \\le b,n \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Ideal Square", "background": "", "description": "Given an $a \\times b$ matrix of integers, find an $n \\times n$ square region such that the difference between the maximum and minimum numbers in that region is minimized.", "inputFormat": "The first line contains 3 integers, representing the values of $a$, $b$, and $n$.\n\nFrom the second line to the $(a+1)$-th line, each line contains $b$ nonnegative integers, representing the numbers at the corresponding positions in the matrix. Adjacent numbers on the same line are separated by a single space.", "outputFormat": "Output a single integer: the minimal possible difference between the maximum and the minimum among all $n \\times n$ square regions in the $a \\times b$ matrix.", "hint": "All numbers in the matrix do not exceed 1,000,000,000.\n\nConstraints:\n\nFor 20% of the testdata, $2 \\le a, b \\le 100$, $n \\le a$, $n \\le b$, $n \\le 10$.\n\nFor 100% of the testdata, $2 \\le a, b \\le 1000$, $n \\le a$, $n \\le b$, $n \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 理想的正方形", "background": "", "description": "有一个 $a \\times b$ 的整数组成的矩阵，现请你从中找出一个 $n \\times n$ 的正方形区域，使得该区域所有数中的最大值和最小值的差最小。", "inputFormat": "第一行为 $3$ 个整数，分别表示 $a,b,n$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个非负整数，表示矩阵中相应位置上的数。每行相邻两数之间用一空格分隔。", "outputFormat": "仅一个整数，为 $a \\times b$ 矩阵中所有“ $n \\times n$ 正方形区域中的最大整数和最小整数的差值”的最小值。", "hint": "矩阵中的所有数都不超过 $1,000,000,000$。\n\n$20\\%$ 的数据 $2 \\le a,b \\le 100,n \\le a,n \\le b,n \\le 10$。\n\n$100\\%$ 的数据 $2 \\le a,b \\le 1000,n \\le a,n \\le b,n \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2217", "type": "P", "difficulty": 5, "samples": [["5 4 4\r\n2 3 4 6\r\n5 7 5 1\r\n10 4 0 5\r\n2 0 2 3\r\n4 1 1 1\r\n", "0.50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2007", "河南", "各省省选", "记忆化搜索"], "title": "[HAOI2007] 分割矩阵", "background": "", "description": "将一个 $a\\times b$ 的数字矩阵进行如下分割：将原矩阵沿某一条直线分割成两个矩阵，再将生成的两个矩阵继续如此分割（当然也可以只分割其中的一个），这样分割了 $(n-1)$ 次后，原矩阵被分割成了 $n$ 个矩阵。（每次分割都只能沿着数字间的缝隙进行）\n\n原矩阵中每一位置上有一个分值，一个矩阵的总分为其所含各位置上分值之和。现在需要把矩阵按上述规则分割成 $n$ 个矩阵，并使各矩阵总分的均方差最小。\n\n请编程对给出的矩阵及 $n$，求出均方差的最小值。\n", "inputFormat": "第一行为 $3$ 个整数，表示 $a,b,n(1<a,b,n\\le 10)$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个小于 $100$ 的非负整数，表示矩阵中相应位置上的分值。每行相邻两数之间用一个空格分开。\n", "outputFormat": "仅一个数，为均方差的最小值。（四舍五入精确到小数点后 $2$ 位）\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Splitting the Matrix", "background": "", "description": "Partition an $a \\times b$ numeric matrix as follows: cut the original matrix along a straight line into two matrices, then continue partitioning the resulting matrices in the same way (you may also choose to partition only one of them). After $(n - 1)$ cuts, the original matrix is partitioned into $n$ matrices. Each cut may only be made along the gaps between numbers (i.e., along the grid lines between cells).\n\nEach position in the original matrix has a score. The total score of a matrix is the sum of the scores at all positions it contains. Now, you need to partition the matrix into $n$ matrices according to the above rule, minimizing the mean square deviation of the total scores of the matrices.\n\nGiven the matrix and $n$, write a program to compute the minimal value of the mean square deviation.", "inputFormat": "The first line contains 3 integers, the values of $a, b, n$ $(1 < a, b, n \\le 10)$.\n\nFrom the second line to the $(a + 1)$-th line, each line contains $b$ non-negative integers less than $100$, representing the score at the corresponding position in the matrix. Adjacent numbers in each row are separated by a single space.", "outputFormat": "Output a single number: the minimal mean square deviation, rounded to two decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 分割矩阵", "background": "", "description": "将一个 $a\\times b$ 的数字矩阵进行如下分割：将原矩阵沿某一条直线分割成两个矩阵，再将生成的两个矩阵继续如此分割（当然也可以只分割其中的一个），这样分割了 $(n-1)$ 次后，原矩阵被分割成了 $n$ 个矩阵。（每次分割都只能沿着数字间的缝隙进行）\n\n原矩阵中每一位置上有一个分值，一个矩阵的总分为其所含各位置上分值之和。现在需要把矩阵按上述规则分割成 $n$ 个矩阵，并使各矩阵总分的均方差最小。\n\n请编程对给出的矩阵及 $n$，求出均方差的最小值。\n", "inputFormat": "第一行为 $3$ 个整数，表示 $a,b,n(1<a,b,n\\le 10)$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个小于 $100$ 的非负整数，表示矩阵中相应位置上的分值。每行相邻两数之间用一个空格分开。\n", "outputFormat": "仅一个数，为均方差的最小值。（四舍五入精确到小数点后 $2$ 位）\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2218", "type": "P", "difficulty": 5, "samples": [["4\r\n0 1\r\n0 -1\r\n1 0\r\n-1 0\r\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2007", "河南", "二分", "各省省选", "深度优先搜索 DFS"], "title": "[HAOI2007] 覆盖问题", "background": "", "description": "某人在山上种了 $N$ 棵小树苗。冬天来了，温度急速下降，小树苗脆弱得不堪一击，于是树主人想用一些塑料薄膜把这些小树遮盖起来，经过一番长久的思考，他决定 用 $3$ 个 $L \\times L$ 的正方形塑料薄膜将小树遮起来。我们不妨将山建立一个平面直角坐标系，设第 $i$ 棵小树的坐标为 $(X_i,Y_i)$ ，$3$ 个 $L \\times L$ 的正方形的边要求平行于坐标轴，一个点如果在正方形的边界上，也算作被覆盖。当然，我们希望塑料薄膜面积越小越好，即求 $L$ 最小值。", "inputFormat": "接下来有 $N$ 行，第 $i+1$ 行有 $2$ 个整数 $X_i,Y_i$，表示第 $i$ 棵树的坐标，保证不会有 $2$ 个树的坐标相同。", "outputFormat": "一行，输出最小的 $L$ 值。\n", "hint": "对于 $100\\%$ 的数据，$-1,000,000,000 \\le X_i,Y_i \\le 1,000,000,000。$\n\n对于 $30\\%$ 的数据，$N \\le 100。$\n\n对于 $50\\%$ 的数据，$N \\le 2000。$\n\n对于 $100\\%$ 的数据，$N \\le 20000。$", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Covering Problem", "background": "", "description": "Someone planted $N$ saplings on a mountain. Winter has come, the temperature dropped sharply, and the saplings are too fragile. The owner wants to cover them with some plastic sheets. After careful consideration, he decides to use $3$ square plastic sheets of size $L \\times L$ to cover the saplings. We set up a 2D Cartesian coordinate system on the mountain; the coordinates of the $i$-th sapling are $(X_i, Y_i)$. The $3$ squares of size $L \\times L$ must be axis-aligned. A point lying on the boundary of a square is also considered covered. Of course, we want the plastic area to be as small as possible; that is, find the minimal $L$.", "inputFormat": "The first line contains an integer $N$.  \nThe next $N$ lines each contain two integers $X_i, Y_i$, giving the coordinates of the $i$-th tree. It is guaranteed that no two trees share the same coordinates.", "outputFormat": "Output one line: the minimal value of $L$.", "hint": "For $100\\%$ of the testdata, $-1,000,000,000 \\le X_i, Y_i \\le 1,000,000,000$.\n\nFor $30\\%$ of the testdata, $N \\le 100$.\n\nFor $50\\%$ of the testdata, $N \\le 2000$.\n\nFor $100\\%$ of the testdata, $N \\le 20000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 覆盖问题", "background": "", "description": "某人在山上种了 $N$ 棵小树苗。冬天来了，温度急速下降，小树苗脆弱得不堪一击，于是树主人想用一些塑料薄膜把这些小树遮盖起来，经过一番长久的思考，他决定 用 $3$ 个 $L \\times L$ 的正方形塑料薄膜将小树遮起来。我们不妨将山建立一个平面直角坐标系，设第 $i$ 棵小树的坐标为 $(X_i,Y_i)$ ，$3$ 个 $L \\times L$ 的正方形的边要求平行于坐标轴，一个点如果在正方形的边界上，也算作被覆盖。当然，我们希望塑料薄膜面积越小越好，即求 $L$ 最小值。", "inputFormat": "接下来有 $N$ 行，第 $i+1$ 行有 $2$ 个整数 $X_i,Y_i$，表示第 $i$ 棵树的坐标，保证不会有 $2$ 个树的坐标相同。", "outputFormat": "一行，输出最小的 $L$ 值。\n", "hint": "对于 $100\\%$ 的数据，$-1,000,000,000 \\le X_i,Y_i \\le 1,000,000,000。$\n\n对于 $30\\%$ 的数据，$N \\le 100。$\n\n对于 $50\\%$ 的数据，$N \\le 2000。$\n\n对于 $100\\%$ 的数据，$N \\le 20000。$", "locale": "zh-CN"}}}
{"pid": "P2219", "type": "P", "difficulty": 5, "samples": [["4 5 4 4 2 2\n20 19 18 17 16\n15 14 13 12 11\n10 9 8 7 6\n5 4 3 2 1\n", "132"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "河南", "各省省选", "单调队列", "队列"], "title": "[HAOI2007] 修筑绿化带", "background": "", "description": "为了增添公园的景致，现在需要在公园中修筑一个花坛，同时在花坛四周修建一片绿化带，让花坛被绿化带围起来。\n\n如果把公园看成一个 $M\\times N$ 的矩形，那么花坛可以看成一个 $C\\times D$ 的矩形，绿化带和花坛一起可以看成一个 $A\\times B$ 的矩形。\n\n如果将花园中的每一块土地的“肥沃度”定义为该块土地上每一个小块肥沃度之和，那么，绿化带的肥沃度为 $A\\times B$ 块的肥沃度减去 $C\\times D$ 块的肥沃度。\n\n为了使得绿化带的生长得旺盛，我们希望绿化带的肥沃度最大。", "inputFormat": "第一行有六个正整数 $M,N,A,B,C,D$。\n\n接下来一个 $M\\times N$ 的数字矩阵，其中矩阵的第 $i$ 行 $j$ 列元素为一个整数 $x_{i,j}$，表示该花园的第 $i$ 行第 $j$ 列的土地 “肥沃度”。", "outputFormat": "一个正整数，表示绿化带的最大肥沃程度。\n", "hint": "对于 $30\\%$ 的数据，$1\\leq M,N\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq M,N\\leq 1000$，$1\\leq A\\leq M$，$1\\leq B\\leq N$，$1\\leq C\\leq A-2$，$1\\leq D\\leq B-2$，$1\\leq x_{i,j}\\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Building the Green Belt", "background": "", "description": "To enhance the park’s scenery, we need to build a flowerbed in the park and, around the flowerbed, construct a green belt so that the flowerbed is enclosed by the green belt.\n\nIf we regard the park as an $M\\times N$ rectangle, then the flowerbed can be regarded as a $C\\times D$ rectangle, and the green belt together with the flowerbed can be regarded as an $A\\times B$ rectangle.\n\nIf we define the fertility of a rectangular land region as the sum of the fertility values of all unit cells within that region, then the fertility of the green belt equals the fertility of the $A\\times B$ block minus the fertility of the $C\\times D$ block.\n\nTo make the green belt grow vigorously, we want the fertility of the green belt to be maximized.", "inputFormat": "The first line contains six positive integers $M,N,A,B,C,D$.\n\nThen follows an $M\\times N$ numeric matrix. The element in row $i$ and column $j$ is an integer $x_{i,j}$, representing the fertility of the land at row $i$ and column $j$ of the park.", "outputFormat": "Output a single positive integer, the maximum fertility of the green belt.", "hint": "For $30\\%$ of the testdata, $1\\leq M,N\\leq 50$.\n\nFor $100\\%$ of the testdata, $1\\leq M,N\\leq 1000$, $1\\leq A\\leq M$, $1\\leq B\\leq N$, $1\\leq C\\leq A-2$, $1\\leq D\\leq B-2$, $1\\leq x_{i,j}\\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 修筑绿化带", "background": "", "description": "为了增添公园的景致，现在需要在公园中修筑一个花坛，同时在花坛四周修建一片绿化带，让花坛被绿化带围起来。\n\n如果把公园看成一个 $M\\times N$ 的矩形，那么花坛可以看成一个 $C\\times D$ 的矩形，绿化带和花坛一起可以看成一个 $A\\times B$ 的矩形。\n\n如果将花园中的每一块土地的“肥沃度”定义为该块土地上每一个小块肥沃度之和，那么，绿化带的肥沃度为 $A\\times B$ 块的肥沃度减去 $C\\times D$ 块的肥沃度。\n\n为了使得绿化带的生长得旺盛，我们希望绿化带的肥沃度最大。", "inputFormat": "第一行有六个正整数 $M,N,A,B,C,D$。\n\n接下来一个 $M\\times N$ 的数字矩阵，其中矩阵的第 $i$ 行 $j$ 列元素为一个整数 $x_{i,j}$，表示该花园的第 $i$ 行第 $j$ 列的土地 “肥沃度”。", "outputFormat": "一个正整数，表示绿化带的最大肥沃程度。\n", "hint": "对于 $30\\%$ 的数据，$1\\leq M,N\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq M,N\\leq 1000$，$1\\leq A\\leq M$，$1\\leq B\\leq N$，$1\\leq C\\leq A-2$，$1\\leq D\\leq B-2$，$1\\leq x_{i,j}\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P2220", "type": "P", "difficulty": 3, "samples": [["3 4 5\r\n1 1\r\n1 1\r\n2 2\r\n2 3\r\n4 3\r\n", "90"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "河南", "各省省选", "离散化"], "title": "[HAOI2012] 容易题", "background": "", "description": "有一个长度为 $m$ 的正整数数列 $A$，满足 $\\forall i \\in A, i \\in [1, n]$。\n\n现在给定一些限制（$A_x$ 不能为 $y$）。设数列 $A$ 的积为 $\\prod A$，求所有可能数列的积相加起来的和。\n\n换言之，令 $S$ 为所有可能的数列情况 $\\{A, A', \\ldots\\}$，求\n\n$$ \\sum_{T \\in S} \\prod T $$\n\n答案对 $10 ^ 9 + 7$ 取模。", "inputFormat": "第一行三个正整数 $n, m, k$。$n, m$ 如题目所示，$k$ 表示限制的条数。\n\n接下来 $k$ 行，每行两个正整数 $x, y$ 表示限制 $A_x \\neq y$。\n", "outputFormat": "一行一个正整数表示答案。\n\n如果没有任何合法数列，输出 $0$。\n", "hint": "### 样例解释 #1\n\n$A_1$ 不能取 $1$，$A_2$ 不能取 $2, 3$，$A_4$ 不能取 $3$，所以可能的数列有以下 $12$ 种：\n\n| 数列 | 积 |\n| :-: | :-: |\n| $\\{2,   1,   1,   1\\}$           | $2$ |\n| $\\{2,   1,   1,   2\\}$           | $4$ |\n| $\\{2,   1,   2,   1\\}$           | $4$ |\n| $\\{2,   1,   2,   2\\}$           | $8$ |\n| $\\{2,   1,   3,   1\\}$           | $6$ |\n| $\\{2,   1,   3,   2\\}$           | $12$ |\n| $\\{3,   1,   1,   1\\}$           | $3$ |\n| $\\{3,   1,   1,   2\\}$           | $6$ |\n| $\\{3,   1,   2,   1\\}$           | $6$ |\n| $\\{3,   1,   2,   2\\}$           | $12$ |\n| $\\{3,   1,   3,   1\\}$           | $9$ |\n| $\\{3,   1,   3,   2\\}$           | $18$ |\n\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\leq 4$，$m \\leq 10$，$k \\leq 10$。\n\n对于另外 $20\\%$ 的数据，$k = 0$。\n\n对于 $70\\%$ 的数据，$n, m, k \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1\\leq n, m \\leq 10^9$，$0\\leq k \\leq 10^5$，$1 \\leq x \\leq m$，$1 \\leq y \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Easy Problem", "background": "", "description": "There is a sequence $A$ of length $m$ consisting of positive integers, where every element lies in $[1, n]$.\n\nYou are given some constraints ($A_x$ cannot be $y$). Let the product of the sequence $A$ be $\\prod A$. Compute the sum of the products over all valid sequences.\n\nIn other words, let $S$ be the set of all valid sequences $\\{A, A', \\ldots\\}$, and compute\n$$ \\sum_{T \\in S} \\prod T. $$\n\nThe answer is taken modulo $10^9 + 7$.", "inputFormat": "The first line contains three positive integers $n, m, k$. Here, $n$ and $m$ are as described above, and $k$ is the number of constraints.\n\nEach of the next $k$ lines contains two positive integers $x, y$, representing the constraint $A_x \\ne y$.", "outputFormat": "Output a single integer on one line: the answer.\n\nIf there is no valid sequence, output $0$.", "hint": "### Sample Explanation #1\n\n$A_1$ cannot be $1$, $A_2$ cannot be $2, 3$, and $A_4$ cannot be $3$, so there are the following $12$ possible sequences:\n\n| Sequence | Product |\n| :-: | :-: |\n| $\\{2,   1,   1,   1\\}$           | $2$ |\n| $\\{2,   1,   1,   2\\}$           | $4$ |\n| $\\{2,   1,   2,   1\\}$           | $4$ |\n| $\\{2,   1,   2,   2\\}$           | $8$ |\n| $\\{2,   1,   3,   1\\}$           | $6$ |\n| $\\{2,   1,   3,   2\\}$           | $12$ |\n| $\\{3,   1,   1,   1\\}$           | $3$ |\n| $\\{3,   1,   1,   2\\}$           | $6$ |\n| $\\{3,   1,   2,   1\\}$           | $6$ |\n| $\\{3,   1,   2,   2\\}$           | $12$ |\n| $\\{3,   1,   3,   1\\}$           | $9$ |\n| $\\{3,   1,   3,   2\\}$           | $18$ |\n\n### Constraints\n\n- For $30\\%$ of the testdata, $n \\leq 4$, $m \\leq 10$, $k \\leq 10$.\n- For another $20\\%$ of the testdata, $k = 0$.\n- For $70\\%$ of the testdata, $n, m, k \\leq 1000$.\n- For $100\\%$ of the testdata, $1 \\leq n, m \\leq 10^9$, $0 \\leq k \\leq 10^5$, $1 \\leq x \\leq m$, $1 \\leq y \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 容易题", "background": "", "description": "有一个长度为 $m$ 的正整数数列 $A$，满足 $\\forall i \\in A, i \\in [1, n]$。\n\n现在给定一些限制（$A_x$ 不能为 $y$）。设数列 $A$ 的积为 $\\prod A$，求所有可能数列的积相加起来的和。\n\n换言之，令 $S$ 为所有可能的数列情况 $\\{A, A', \\ldots\\}$，求\n\n$$ \\sum_{T \\in S} \\prod T $$\n\n答案对 $10 ^ 9 + 7$ 取模。", "inputFormat": "第一行三个正整数 $n, m, k$。$n, m$ 如题目所示，$k$ 表示限制的条数。\n\n接下来 $k$ 行，每行两个正整数 $x, y$ 表示限制 $A_x \\neq y$。\n", "outputFormat": "一行一个正整数表示答案。\n\n如果没有任何合法数列，输出 $0$。\n", "hint": "### 样例解释 #1\n\n$A_1$ 不能取 $1$，$A_2$ 不能取 $2, 3$，$A_4$ 不能取 $3$，所以可能的数列有以下 $12$ 种：\n\n| 数列 | 积 |\n| :-: | :-: |\n| $\\{2,   1,   1,   1\\}$           | $2$ |\n| $\\{2,   1,   1,   2\\}$           | $4$ |\n| $\\{2,   1,   2,   1\\}$           | $4$ |\n| $\\{2,   1,   2,   2\\}$           | $8$ |\n| $\\{2,   1,   3,   1\\}$           | $6$ |\n| $\\{2,   1,   3,   2\\}$           | $12$ |\n| $\\{3,   1,   1,   1\\}$           | $3$ |\n| $\\{3,   1,   1,   2\\}$           | $6$ |\n| $\\{3,   1,   2,   1\\}$           | $6$ |\n| $\\{3,   1,   2,   2\\}$           | $12$ |\n| $\\{3,   1,   3,   1\\}$           | $9$ |\n| $\\{3,   1,   3,   2\\}$           | $18$ |\n\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\leq 4$，$m \\leq 10$，$k \\leq 10$。\n\n对于另外 $20\\%$ 的数据，$k = 0$。\n\n对于 $70\\%$ 的数据，$n, m, k \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1\\leq n, m \\leq 10^9$，$0\\leq k \\leq 10^5$，$1 \\leq x \\leq m$，$1 \\leq y \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P2221", "type": "P", "difficulty": 5, "samples": [["4 5\nC 1 4 2\nC 1 2 -1\nQ 1 2\nQ 2 4\nQ 1 4\n", "1/1\n8/3\n17/6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "河南", "线段树", "各省省选", "O2优化", "最大公约数 gcd", "期望"], "title": "[HAOI2012] 高速公路", "background": "Y901 高速公路是一条重要的交通纽带，政府部门建设初期的投入以及使用期间的养护费用都不低，因此政府在这条高速公路上设立了许多收费站。", "description": "Y901 高速公路是一条由 $n-1$ 段路以及 $n$ 个收费站组成的东西向的链，我们按照由西向东的顺序将收费站依次编号为 $1 \\sim n$，从收费站 $i$ 行驶到 $i+1$（或从 $i+1$ 行驶到 $i$）需要收取 $v_i$ 的费用。高速路刚建成时所有的路段都是免费的，即所有 $v_i = 0$。\n\n政府部门根据实际情况，会不定期地对连续路段的收费标准进行调整，根据政策涨价或降价。\n\n无聊的小 A 同学总喜欢研究一些稀奇古怪的问题，他开车在这条高速路上行驶时想到了这样一个问题：对于给定的 $l,r$，在第 $l$ 个到第 $r$ 个收费站里等概率随机取出两个不同的收费站 $a$ 和 $b$，那么从 $a$ 行驶到 $b$ 将期望花费多少费用呢?\n", "inputFormat": "第一行有两个整数，分别表示收费站个数 $n$，和询问与调整费用的总数 $m$。\n\n接下来 $m$ 行，每行表示一次调整或询问，首先有一个字符 $op$。\n\n- 若 $op$ 为 `C`，则后面有三个整数 $l, r, v$，表示将第 $l$ 个收费站到第 $r$ 个收费站之间所有**道路**的通行费用增加 $v$。\n- 若 $op$ 为 `Q`，则后面有两个整数 $l, r$，对于给定的 $l, r$，请回答小 A 的问题。", "outputFormat": "对于每次询问，输出一行一个既约分数表示答案。\n\n若答案为一个整数 $a$，请输出 `a/1`。", "hint": "#### 数据规模与约定\n\n本题共 $10$ 个测试点，各测试点数据规模如下表所示\n\n\n| 测试点编号 | $n=$ | $m=$ |\n| :------: | :---: | :-: |\n|$1$| $10$ |$10$|\n|$2$|    $100$ |    $100$ |\n|$3$  |  $1000$ |   $1000$|\n|$4$   | $10000$ |   $10000$|\n|$5$    |$50000$  |  $50000$|\n|$6$  |  $60000$   | $60000$|\n|$7$   | $70000$ |   $70000$|\n|$8$   | $80000$  |  $80000$|\n|$9$    |$90000$   | $90000$|\n|$10$   | $100000$  |  $100000$|\n\n对于全部的测试点，保证 $1 \\leq n, m \\leq 10^5$，$op \\in \\{\\texttt C, \\texttt Q\\}$，$1 \\leq l \\leq r \\leq n$，$-10^4 \\leq v \\leq 10^4$，在任何时刻，$0\\leq v_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Highway", "background": "The Y901 Expressway is an important transportation link. Both the initial construction investment and the maintenance costs during operation are high, so the government has set up many toll stations on this expressway.", "description": "The Y901 Expressway is an east–west chain consisting of $n-1$ road segments and $n$ toll stations. From west to east, we number the stations $1$ to $n$. Traveling from station $i$ to $i+1$ (or from $i+1$ to $i$) costs $v_i$. When the expressway was first built, all segments were free, i.e., all $v_i = 0$.\n\nThe authorities will, from time to time, adjust the toll standards for consecutive segments, increasing or decreasing them according to policy.\n\nA bored student, \"Xiao A\" (pinyin: Xiao A), likes to ponder quirky questions. While driving on this expressway, he wondered: for given $l, r$, choose two distinct stations $a$ and $b$ uniformly at random from stations $l$ through $r$. What is the expected cost to travel from $a$ to $b$?", "inputFormat": "The first line contains two integers $n$ and $m$, the number of toll stations and the total number of updates and queries.\n\nEach of the next $m$ lines describes an update or a query and begins with a character $op$.\n\n- If $op$ is `C`, then there follow three integers $l, r, v$, meaning: increase by $v$ the toll on every road segment between the $l$-th and the $r$-th stations (i.e., all segments with indices $i$ where $l \\le i < r$).\n- If $op$ is `Q`, then there follow two integers $l, r$. For the given $l, r$, answer Xiao A’s question.", "outputFormat": "For each query, output a single line containing the answer as a reduced fraction.\n\nIf the answer is an integer $a$, output `a/1`.", "hint": "Constraints\n\nThere are $10$ test points. The scale of each test point is as follows.\n\n| Test Point | $n=$ | $m=$ |\n| :--------: | :--: | :--: |\n| 1 | $10$ | $10$ |\n| 2 | $100$ | $100$ |\n| 3 | $1000$ | $1000$ |\n| 4 | $10000$ | $10000$ |\n| 5 | $50000$ | $50000$ |\n| 6 | $60000$ | $60000$ |\n| 7 | $70000$ | $70000$ |\n| 8 | $80000$ | $80000$ |\n| 9 | $90000$ | $90000$ |\n| 10 | $100000$ | $100000$ |\n\nFor all test points, it is guaranteed that $1 \\le n, m \\le 10^5$, $op \\in \\{\\texttt{C}, \\texttt{Q}\\}$, $1 \\le l \\le r \\le n$, $-10^4 \\le v \\le 10^4$, and at any time $0 \\le v_i \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 高速公路", "background": "Y901 高速公路是一条重要的交通纽带，政府部门建设初期的投入以及使用期间的养护费用都不低，因此政府在这条高速公路上设立了许多收费站。", "description": "Y901 高速公路是一条由 $n-1$ 段路以及 $n$ 个收费站组成的东西向的链，我们按照由西向东的顺序将收费站依次编号为 $1 \\sim n$，从收费站 $i$ 行驶到 $i+1$（或从 $i+1$ 行驶到 $i$）需要收取 $v_i$ 的费用。高速路刚建成时所有的路段都是免费的，即所有 $v_i = 0$。\n\n政府部门根据实际情况，会不定期地对连续路段的收费标准进行调整，根据政策涨价或降价。\n\n无聊的小 A 同学总喜欢研究一些稀奇古怪的问题，他开车在这条高速路上行驶时想到了这样一个问题：对于给定的 $l,r$，在第 $l$ 个到第 $r$ 个收费站里等概率随机取出两个不同的收费站 $a$ 和 $b$，那么从 $a$ 行驶到 $b$ 将期望花费多少费用呢?\n", "inputFormat": "第一行有两个整数，分别表示收费站个数 $n$，和询问与调整费用的总数 $m$。\n\n接下来 $m$ 行，每行表示一次调整或询问，首先有一个字符 $op$。\n\n- 若 $op$ 为 `C`，则后面有三个整数 $l, r, v$，表示将第 $l$ 个收费站到第 $r$ 个收费站之间所有**道路**的通行费用增加 $v$。\n- 若 $op$ 为 `Q`，则后面有两个整数 $l, r$，对于给定的 $l, r$，请回答小 A 的问题。", "outputFormat": "对于每次询问，输出一行一个既约分数表示答案。\n\n若答案为一个整数 $a$，请输出 `a/1`。", "hint": "#### 数据规模与约定\n\n本题共 $10$ 个测试点，各测试点数据规模如下表所示\n\n\n| 测试点编号 | $n=$ | $m=$ |\n| :------: | :---: | :-: |\n|$1$| $10$ |$10$|\n|$2$|    $100$ |    $100$ |\n|$3$  |  $1000$ |   $1000$|\n|$4$   | $10000$ |   $10000$|\n|$5$    |$50000$  |  $50000$|\n|$6$  |  $60000$   | $60000$|\n|$7$   | $70000$ |   $70000$|\n|$8$   | $80000$  |  $80000$|\n|$9$    |$90000$   | $90000$|\n|$10$   | $100000$  |  $100000$|\n\n对于全部的测试点，保证 $1 \\leq n, m \\leq 10^5$，$op \\in \\{\\texttt C, \\texttt Q\\}$，$1 \\leq l \\leq r \\leq n$，$-10^4 \\leq v \\leq 10^4$，在任何时刻，$0\\leq v_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2222", "type": "P", "difficulty": 4, "samples": [["1 2                       \r\n3 4 2 3\r\n1 1 3\r\n1 4 5\r\n2 2 1\r\n3 1 2\r\n\r\n1 2 2\r\n2 1 1\r\n3 1 2\r\n3 2 4\r\n\r\n1 2 2\r\n1 3 3\r\n2 1 1\r\n2 2 2\r\n", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南"], "title": "[HNOI2001] 矩阵乘积", "background": "", "description": "已知矩阵：\n\n$$A_{m\\times n}=\\begin{bmatrix}a_{1,1} & a_{1,2} & \\cdots & a_{1,n}\\\\ a_{2,1} & a_{2,2} & \\cdots & a_{2,n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_{m,1} & a_{m,2} & \\cdots &a_{m,n} \\end{bmatrix} ,B_{n\\times p}=\\begin{bmatrix}b_{1,1} & b_{1,2} & \\cdots & b_{1,p}\\\\ b_{2,1} & b_{2,2} & \\cdots & b_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ b_{n,1} & b_{n,2} & \\cdots &b_{n,q} \\end{bmatrix}$$\n\n当矩阵 $A$ 的列数与矩阵 $B$ 的行数相同时，则 $A$ 与 $B$ 可以相乘，其乘积为一个 $m\\times p$ 的矩阵 $D$：\n\n$$D_{m\\times p}=\\begin{bmatrix} d_{1,1} & d_{1,2} & \\cdots & d_{1,p}\\\\ d_{2,1} & d_{2,2} & \\cdots & d_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ d_{m,1} & d_{m,2} & \\cdots & d_{m,p}\\end{bmatrix}$$\n\n其中 $d_{i,j}=\\sum^n_{k=1} a_{i,k} \\times b_{k,j}$，简记为 $D=A\\times B$。\n\n现已知三个矩阵 $A,B,C$，这三个矩阵大多数元素为 $0$，我们把这种矩阵称为稀疏矩阵。因此，我们采用三元组 $i,j,a$ 来表示矩阵的第 $i$ 行第 $j$ 列的值为 $a$ 其余未列出的元素均为 $0$；在计算机中，我们仅给出非零元素的三元组，而且使用行优先法给出稀疏矩阵的三元组，首先是第一行按列给出，然后是第二行按列给出……\n\n例如，矩阵：$\\begin{bmatrix}1&0&0&0\\\\0&0&2&-1\\\\0&1&2&3\\\\0&0&0&0\\end{bmatrix}$ 那么，矩阵的三元组表示为：\n\n```plain\n1 1 1\n2 3 2\n2 4 -1\n3 2 1 \n3 3 2\n3 4 3\n```\n\n你的任务就是：计算矩阵 $D=A\\times B\\times C$。", "inputFormat": "第一行为两个正整数 $x,y$，分别表示输出结果所在的行和列。\n\n第二行为四个整数 $m,n,o,p$，表明 $A$ 为$m\\times n$ 的矩阵，$B$ 为 $n\\times o$ 的矩阵，$C$ 为 $o\\times p$ 的矩阵。\n\n第三行以后的每一行有三个整数分别是矩阵的三元组表示法中的一个元素的值，每个矩阵之间有一个空行。表示的顺序是矩阵 $A,B,C$。\n", "outputFormat": "仅一个整数，为 $D$ 的第 $x$ 行第 $y$ 列的元素的值。", "hint": "#### 数据规模与约定\n对于全部的测试点，保证 $1\\le m,n,o,p\\le 6\\times 10^3$，三元数组的总个数不大于 $6\\times 10^3$。数据之间用空格分开。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Matrix Product", "background": "", "description": "Given matrices:\n\n$$A_{m\\times n}=\\begin{bmatrix}a_{1,1} & a_{1,2} & \\cdots & a_{1,n}\\\\ a_{2,1} & a_{2,2} & \\cdots & a_{2,n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_{m,1} & a_{m,2} & \\cdots &a_{m,n} \\end{bmatrix} ,B_{n\\times p}=\\begin{bmatrix}b_{1,1} & b_{1,2} & \\cdots & b_{1,p}\\\\ b_{2,1} & b_{2,2} & \\cdots & b_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ b_{n,1} & b_{n,2} & \\cdots &b_{n,p} \\end{bmatrix}$$\n\nWhen the number of columns of matrix $A$ equals the number of rows of matrix $B$, then $A$ and $B$ can be multiplied. Their product is an $m\\times p$ matrix $D$:\n\n$$D_{m\\times p}=\\begin{bmatrix} d_{1,1} & d_{1,2} & \\cdots & d_{1,p}\\\\ d_{2,1} & d_{2,2} & \\cdots & d_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ d_{m,1} & d_{m,2} & \\cdots & d_{m,p}\\end{bmatrix}$$\n\nwhere $d_{i,j}=\\sum^n_{k=1} a_{i,k} \\times b_{k,j}$, abbreviated as $D=A\\times B$.\n\nNow three matrices $A, B, C$ are given. Most elements of these matrices are $0$; we call such matrices sparse matrices. Therefore, we use a triple $i, j, a$ to indicate that the value at row $i$ and column $j$ is $a$, and all other unspecified elements are $0$. In the computer, we only give triples of nonzero elements, and we use row-major order: first give the first row in increasing column order, then the second row in increasing column order, and so on.\n\nFor example, for the matrix $\\begin{bmatrix}1&0&0&0\\\\0&0&2&-1\\\\0&1&2&3\\\\0&0&0&0\\end{bmatrix}$, its triple representation is:\n\n```plain\n1 1 1\n2 3 2\n2 4 -1\n3 2 1 \n3 3 2\n3 4 3\n```\n\nYour task is to compute $D=A\\times B\\times C$.", "inputFormat": "- The first line contains two positive integers $x, y$, which are the row and column of the result to output.\n- The second line contains four integers $m, n, o, p$, meaning $A$ is an $m\\times n$ matrix, $B$ is an $n\\times o$ matrix, and $C$ is an $o\\times p$ matrix.\n- From the third line onward, each line contains three integers that form one element in the triple representation of a matrix. There is one blank line between matrices. The order is matrices $A$, $B$, $C$.", "outputFormat": "Output a single integer: the value of the element in row $x$, column $y$ of $D$.", "hint": "Constraints\n- For all test points, $1\\le m,n,o,p\\le 6\\times 10^3$, and the total number of triples does not exceed $6\\times 10^3$.\n- Numbers are separated by spaces.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 矩阵乘积", "background": "", "description": "已知矩阵：\n\n$$A_{m\\times n}=\\begin{bmatrix}a_{1,1} & a_{1,2} & \\cdots & a_{1,n}\\\\ a_{2,1} & a_{2,2} & \\cdots & a_{2,n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_{m,1} & a_{m,2} & \\cdots &a_{m,n} \\end{bmatrix} ,B_{n\\times p}=\\begin{bmatrix}b_{1,1} & b_{1,2} & \\cdots & b_{1,p}\\\\ b_{2,1} & b_{2,2} & \\cdots & b_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ b_{n,1} & b_{n,2} & \\cdots &b_{n,q} \\end{bmatrix}$$\n\n当矩阵 $A$ 的列数与矩阵 $B$ 的行数相同时，则 $A$ 与 $B$ 可以相乘，其乘积为一个 $m\\times p$ 的矩阵 $D$：\n\n$$D_{m\\times p}=\\begin{bmatrix} d_{1,1} & d_{1,2} & \\cdots & d_{1,p}\\\\ d_{2,1} & d_{2,2} & \\cdots & d_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ d_{m,1} & d_{m,2} & \\cdots & d_{m,p}\\end{bmatrix}$$\n\n其中 $d_{i,j}=\\sum^n_{k=1} a_{i,k} \\times b_{k,j}$，简记为 $D=A\\times B$。\n\n现已知三个矩阵 $A,B,C$，这三个矩阵大多数元素为 $0$，我们把这种矩阵称为稀疏矩阵。因此，我们采用三元组 $i,j,a$ 来表示矩阵的第 $i$ 行第 $j$ 列的值为 $a$ 其余未列出的元素均为 $0$；在计算机中，我们仅给出非零元素的三元组，而且使用行优先法给出稀疏矩阵的三元组，首先是第一行按列给出，然后是第二行按列给出……\n\n例如，矩阵：$\\begin{bmatrix}1&0&0&0\\\\0&0&2&-1\\\\0&1&2&3\\\\0&0&0&0\\end{bmatrix}$ 那么，矩阵的三元组表示为：\n\n```plain\n1 1 1\n2 3 2\n2 4 -1\n3 2 1 \n3 3 2\n3 4 3\n```\n\n你的任务就是：计算矩阵 $D=A\\times B\\times C$。", "inputFormat": "第一行为两个正整数 $x,y$，分别表示输出结果所在的行和列。\n\n第二行为四个整数 $m,n,o,p$，表明 $A$ 为$m\\times n$ 的矩阵，$B$ 为 $n\\times o$ 的矩阵，$C$ 为 $o\\times p$ 的矩阵。\n\n第三行以后的每一行有三个整数分别是矩阵的三元组表示法中的一个元素的值，每个矩阵之间有一个空行。表示的顺序是矩阵 $A,B,C$。\n", "outputFormat": "仅一个整数，为 $D$ 的第 $x$ 行第 $y$ 列的元素的值。", "hint": "#### 数据规模与约定\n对于全部的测试点，保证 $1\\le m,n,o,p\\le 6\\times 10^3$，三元数组的总个数不大于 $6\\times 10^3$。数据之间用空格分开。", "locale": "zh-CN"}}}
{"pid": "P2223", "type": "P", "difficulty": 6, "samples": [["4  1  2  3  2  1                         \r\n8  2  1  6  \r\n", "38"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南", "费用流"], "title": "[HNOI2001] 软件开发", "background": "", "description": "某软件公司正在规划一项 $n$ 天的软件开发计划，根据开发计划第 $i$ 天需要 $n_i$ 个软件开发人员，为了提高软件开发人员的效率，公司给软件人员提供了很多的服务，其中一项服务就是要为每个开发人员每天提供一块消毒毛巾，这种消毒毛巾使用一天后必须再做消毒处理后才能使用。\n\n消毒方式有两种，$A$ 种方式的消毒需要 $a$ 天时间，$B$ 种方式的消毒需要 $b$ 天，$A$ 种消毒方式的费用为每块毛巾 $f_A$, $B$ 种消毒方式的费用为每块毛巾 $f_B$，而买一块新毛巾的费用为 $f$（新毛巾是已消毒的，当天可以使用）。公司经理正在规划在这 $n$ 天中，每天买多少块新毛巾、每天送多少块毛巾进行 $A$ 种消毒和每天送多少块毛巾进行 $B$ 种消毒。当然，公司经理希望费用最低。\n\n你的任务就是：为该软件公司计划每天买多少块毛巾、每天多少块毛巾进行 $A$ 种消毒和多少毛巾进行 $B$ 种消毒，使公司在这项 $n$ 天的软件开发中，提供毛巾服务的总费用最低。", "inputFormat": "第一行为六个整数 $n,a,b,f,f_A,f_B$。\n\n第二行为 $n$ 个整数 $n_1,n_2,\\ldots,n_n$。\n", "outputFormat": "仅一个整数，为最少的费用。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $b>a$，$f>f_A>f_B$，$1\\le f,f_A,f_B\\le 60$，$1\\le n\\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Software Development", "background": "", "description": "A software company is planning a $n$-day software development schedule. According to the plan, on day $i$, $n_i$ software developers are needed. To improve efficiency, the company provides many services for the developers. One of these services is to provide each developer with a disinfected towel every day. After being used for one day, the towel must be disinfected again before it can be used again.\n\nThere are two disinfection methods. Method $A$ takes $a$ days; method $B$ takes $b$ days. The cost of method $A$ is $f_A$ per towel, and the cost of method $B$ is $f_B$ per towel. Buying a new towel costs $f$ (a new towel is already disinfected and can be used on the same day). The manager is planning, for each of these $n$ days, how many new towels to buy, how many towels to send for method $A$ disinfection, and how many towels to send for method $B$ disinfection. Of course, the manager wants to minimize the total cost.\n\nYour task is: determine, for each day, how many towels to buy, how many towels to send for method $A$ disinfection, and how many towels to send for method $B$ disinfection, so that during this $n$-day development period, the total cost of providing towel service is minimized.", "inputFormat": "The first line contains six integers $n,a,b,f,f_A,f_B$.\n\nThe second line contains $n$ integers $n_1,n_2,\\ldots,n_n$.", "outputFormat": "Output a single integer, the minimal total cost.", "hint": "Constraints\nFor $100\\%$ of the testdata, it is guaranteed that $b>a$, $f>f_A>f_B$, $1\\le f,f_A,f_B\\le 60$, $1\\le n\\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 软件开发", "background": "", "description": "某软件公司正在规划一项 $n$ 天的软件开发计划，根据开发计划第 $i$ 天需要 $n_i$ 个软件开发人员，为了提高软件开发人员的效率，公司给软件人员提供了很多的服务，其中一项服务就是要为每个开发人员每天提供一块消毒毛巾，这种消毒毛巾使用一天后必须再做消毒处理后才能使用。\n\n消毒方式有两种，$A$ 种方式的消毒需要 $a$ 天时间，$B$ 种方式的消毒需要 $b$ 天，$A$ 种消毒方式的费用为每块毛巾 $f_A$, $B$ 种消毒方式的费用为每块毛巾 $f_B$，而买一块新毛巾的费用为 $f$（新毛巾是已消毒的，当天可以使用）。公司经理正在规划在这 $n$ 天中，每天买多少块新毛巾、每天送多少块毛巾进行 $A$ 种消毒和每天送多少块毛巾进行 $B$ 种消毒。当然，公司经理希望费用最低。\n\n你的任务就是：为该软件公司计划每天买多少块毛巾、每天多少块毛巾进行 $A$ 种消毒和多少毛巾进行 $B$ 种消毒，使公司在这项 $n$ 天的软件开发中，提供毛巾服务的总费用最低。", "inputFormat": "第一行为六个整数 $n,a,b,f,f_A,f_B$。\n\n第二行为 $n$ 个整数 $n_1,n_2,\\ldots,n_n$。\n", "outputFormat": "仅一个整数，为最少的费用。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $b>a$，$f>f_A>f_B$，$1\\le f,f_A,f_B\\le 60$，$1\\le n\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2224", "type": "P", "difficulty": 5, "samples": [["5                            \r\n2 1 0\r\n0 5 0\r\n2 4 1\r\n0 0 3\r\n2 1 1\r\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "各省省选", "湖南", "背包 DP"], "title": "[HNOI2001] 产品加工", "background": "", "description": "某加工厂有 A、B 两台机器，来加工的产品可以由其中任何一台机器完成，或者两台机器共同完成。由于受到机器性能和产品特性的限制，不同的机器加工同一产品所需的时间会不同，若同时由两台机器共同进行加工，所完成任务又会不同。\n\n某一天，加工厂接到  $n$ 个产品加工的任务，每个任务的工作量不尽一样。\n\n你的任务就是：已知每个任务在 A 机器上加工所需的时间  $t_1$，B 机器上加工所需的时间  $t_2$ 及由两台机器共同加工所需的时间  $t_3$，请你合理安排任务的调度顺序，使完成所有  $n$ 个任务的总时间最少。", "inputFormat": "第一行为一个整数  $n$。\n\n接下来  $n$ 行，每行三个非负整数  $t_1,t_2,t_3$，分别表示第  $i$ 个任务在 A 机器上加工、B 机器上加工、两台机器共同加工所需要的时间。如果所给的时间  $t_1$ 或  $t_2$ 为  $0$ 表示任务不能在该台机器上加工，如果  $t_3$ 为  $0$ 表示任务不能同时由两台机器加工。", "outputFormat": "仅一行一个整数，表示完成所有  $n$ 个任务的最少总时间。", "hint": "对于所有数据，有  $1\\le n\\le 6\\times 10^3$， $0\\le t_1,t_2,t_3\\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Product Processing", "background": "", "description": "A factory has two machines, A and B. Any product can be completed by either machine alone, or jointly by both machines. Due to machine performance and product characteristics, the time needed for different machines to process the same product differs; if both machines process a product simultaneously, the completed workload also differs.\n\nOne day, the factory receives $n$ product processing tasks, each with a different workload.\n\nYour task: given the time $t_1$ to process a task on machine A, the time $t_2$ on machine B, and the time $t_3$ when both machines jointly process it, schedule the tasks to minimize the total time to finish all $n$ tasks.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain three non-negative integers $t_1,t_2,t_3$, representing for the $i$-th task the time required on machine A, on machine B, and when both machines jointly process it, respectively. If the given time $t_1$ or $t_2$ is $0$, it means the task cannot be processed on that machine. If $t_3$ is $0$, it means the task cannot be jointly processed by both machines.", "outputFormat": "Output a single integer on one line, the minimum total time to complete all $n$ tasks.", "hint": "For all testdata, $1\\le n\\le 6\\times 10^3$, $0\\le t_1,t_2,t_3\\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 产品加工", "background": "", "description": "某加工厂有 A、B 两台机器，来加工的产品可以由其中任何一台机器完成，或者两台机器共同完成。由于受到机器性能和产品特性的限制，不同的机器加工同一产品所需的时间会不同，若同时由两台机器共同进行加工，所完成任务又会不同。\n\n某一天，加工厂接到  $n$ 个产品加工的任务，每个任务的工作量不尽一样。\n\n你的任务就是：已知每个任务在 A 机器上加工所需的时间  $t_1$，B 机器上加工所需的时间  $t_2$ 及由两台机器共同加工所需的时间  $t_3$，请你合理安排任务的调度顺序，使完成所有  $n$ 个任务的总时间最少。", "inputFormat": "第一行为一个整数  $n$。\n\n接下来  $n$ 行，每行三个非负整数  $t_1,t_2,t_3$，分别表示第  $i$ 个任务在 A 机器上加工、B 机器上加工、两台机器共同加工所需要的时间。如果所给的时间  $t_1$ 或  $t_2$ 为  $0$ 表示任务不能在该台机器上加工，如果  $t_3$ 为  $0$ 表示任务不能同时由两台机器加工。", "outputFormat": "仅一行一个整数，表示完成所有  $n$ 个任务的最少总时间。", "hint": "对于所有数据，有  $1\\le n\\le 6\\times 10^3$， $0\\le t_1,t_2,t_3\\le 5$。", "locale": "zh-CN"}}}
{"pid": "P2225", "type": "P", "difficulty": 6, "samples": [["4", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "各省省选", "湖南", "费用流"], "title": "[HNOI2001] 棋盘变换", "background": "", "description": "一个 $n\\times n$ 的棋盘，在其中填入 $1$ 和 $-1$。经过一次变换后，方格里的每个数将会变成变换之前与之相邻的四个数的积。例如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2q4jbad8.png)\n\n但有一些状态，变换前和变换后是一样的，例如全部是 $1$ 的状态。这种状态被称为不变状态。\n\n你的任务是要找到所有本质不同的不变状态（旋转或翻转之后的状态被视为是本质上相同的）。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个正整数表示所有本质不同的方案数。", "hint": "$1\\le n\\le 30$。\n\n题目给出范围内，不变状态总数 $<9\\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Board Transformation", "background": "", "description": "On an $n \\times n$ board, fill each cell with $1$ or $-1$. After one transformation, every number in the grid becomes the product of the four numbers that are adjacent to it (up, down, left, and right) before the transformation. For example:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2q4jbad8.png)\n\nHowever, some states remain the same before and after the transformation, such as the state where all entries are $1$. Such a state is called an invariant state.\n\nYour task is to find all essentially different invariant states (states that become identical after rotations or reflections are considered essentially the same).", "inputFormat": "One line containing a single positive integer $n$.", "outputFormat": "One line containing a single positive integer, the number of essentially different invariant states.", "hint": "$1 \\le n \\le 30$.\n\nWithin the given range, the total number of invariant states is $< 9 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 棋盘变换", "background": "", "description": "一个 $n\\times n$ 的棋盘，在其中填入 $1$ 和 $-1$。经过一次变换后，方格里的每个数将会变成变换之前与之相邻的四个数的积。例如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2q4jbad8.png)\n\n但有一些状态，变换前和变换后是一样的，例如全部是 $1$ 的状态。这种状态被称为不变状态。\n\n你的任务是要找到所有本质不同的不变状态（旋转或翻转之后的状态被视为是本质上相同的）。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个正整数表示所有本质不同的方案数。", "hint": "$1\\le n\\le 30$。\n\n题目给出范围内，不变状态总数 $<9\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2226", "type": "P", "difficulty": 4, "samples": [["10 10                                   \n1 4 10 7                                 \n0 0 0 1 0 0 0 0 0 0\n0 0 0 1 1 1 0 0 0 0\n0 0 0 1 0 1 0 0 0 0\n1 1 1 1 0 1 1 1 1 0\n1 0 0 0 0 0 0 0 1 0\n1 0 1 1 1 0 1 1 1 0\n1 1 1 0 1 1 1 0 1 0\n0 0 1 0 0 0 0 0 1 0\n0 0 1 1 1 1 1 1 1 0\n0 0 0 0 0 0 1 0 0 0\n", "1 16\n2 18\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "各省省选", "湖南"], "title": "[HNOI2001] 遥控赛车比赛", "background": "", "description": "全国遥控赛车大赛近日在星沙举行。竞赛选用一块大小为 $N\\times M$ 的场地作为竞赛场地，要求选手的赛车在最短的时间内从起点移动到终点。虽然赛场地形高低有少许的起伏，但并不存在无法到达的地点。但是在赛场上增加了许多无法穿越的障碍物，若赛车在到达终点前撞上障碍物，就视为任务失败。\n\n在赛车的马力和灵活性等性能相差较小的情况下，要控制速度极快的赛车绕开障碍物移动到终点，关键是提高选手的反应灵敏度，即两次改变赛车运动方向所间隔的最短时间，也可称为选手的反应时间。使自己能够更快地控制赛车改变前进的方向。\n\n当然，由于选手反应灵敏度的不同，可选择的路径就会大不相同。如图 $1$ 和图 $2$ 所示，对于同一个赛场，两位选手的反应时间分别为 $2$ 秒和 $1$ 秒，而其到达终点所需的时间分别为 $18$ 秒和 $16$ 秒（赛车每秒可沿当前方向移动一格，从起点出发时算改变一次方向）。\n\n由图 $1$ 和图 $2$ 可知，赛车的最短路线长度是由选手的反应灵敏度所决定的，当选手的反应很慢时，可能就不会存在可行的路径。你的任务是：在能够完成赛程（即存在从起点到终点的路径）的条件下，求出选手每个可能的反应时间所对应的最短路线长度。\n\n![](https://cdn.luogu.com.cn/upload/pic/1294.png)\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，表示赛场的行数和列数。$1≤N, M≤100$。\n\n第二行有四个整数 $x1$、$y1$、$x2$、$y2$，表示赛程的起点和终点的位置分别为 $(x1, y1$ 和 $x2,y2$。\n\n接下来 $N$ 行是一个 $N×M$ 的 0-1 矩阵，矩阵中第 $i$ 行第 $j$ 列元素 $A_{i,j}=1$ 表示赛场中位置 $(i,j)$ 为赛道，$A_{i,j}=0$ 表示赛场中位置 $(i,j)$ 有障碍物。\n", "outputFormat": "输出文件可能有多行，其中每行输出一个可能的选手反应时间及该时间所对应的最短路线长度。输出文件中必须包含所有符合题目要求的选手反应时间。注意：由于选手的反应时间不可能很慢，因而不必考虑选手反应时间大于 $10$ 秒的情况，只需输出 $10$ 以内（包含 $10$）的解。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Remote-Controlled Car Race", "background": "", "description": "The National Remote-Controlled Car Championship was recently held in Xingsha. The competition uses a field of size $N \\times M$ as the course, and the requirement is for the car to move from the start to the finish in the shortest time. Although the terrain has slight undulations, there are no inherently unreachable locations. However, many impassable obstacles have been added to the course. If the car hits an obstacle before reaching the finish, the attempt is considered a failure.\n\nWhen the cars’ horsepower and agility are similar, the key to guiding a high-speed car around obstacles to the finish is improving the driver’s reaction sensitivity, namely the minimum time interval between two direction changes, also called the driver’s reaction time. This determines how quickly the driver can control the car to change its direction of motion.\n\nNaturally, due to different reaction sensitivities, the set of feasible paths varies. As shown in Figures $1$ and $2$, for the same course, two drivers with reaction times of $2$ seconds and $1$ second, respectively, need $18$ seconds and $16$ seconds to reach the finish (the car moves one cell per second along its current direction, and the departure from the start counts as one direction change).\n\nFrom Figures $1$ and $2$, we see that the shortest route length depends on the driver’s reaction sensitivity. When the reaction is slow, a feasible path may not exist. Your task is: under the condition that the course can be completed (i.e., a path from the start to the finish exists), compute the shortest route length corresponding to each possible reaction time.\n\n![](https://cdn.luogu.com.cn/upload/pic/1294.png)", "inputFormat": "The first line contains two integers $N$ and $M$, the numbers of rows and columns of the course, with $1 \\le N, M \\le 100$.\n\nThe second line contains four integers $x1$, $y1$, $x2$, $y2$, indicating that the start and finish are located at $(x1, y1)$ and $(x2, y2)$, respectively.\n\nThe next $N$ lines give a $N \\times M$ 0-1 matrix. In this matrix, the element in row $i$, column $j$ is $A_{i,j} = 1$ if position $(i, j)$ is track (traversable), and $A_{i,j} = 0$ if position $(i, j)$ has an obstacle.", "outputFormat": "The output may contain multiple lines. Each line should output one possible reaction time and the corresponding shortest route length. The output must include all reaction times that meet the problem’s requirement. Note: because excessively slow reactions are not considered, you do not need to handle reaction times greater than $10$ seconds; only output solutions for reaction times up to and including $10$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 遥控赛车比赛", "background": "", "description": "全国遥控赛车大赛近日在星沙举行。竞赛选用一块大小为 $N\\times M$ 的场地作为竞赛场地，要求选手的赛车在最短的时间内从起点移动到终点。虽然赛场地形高低有少许的起伏，但并不存在无法到达的地点。但是在赛场上增加了许多无法穿越的障碍物，若赛车在到达终点前撞上障碍物，就视为任务失败。\n\n在赛车的马力和灵活性等性能相差较小的情况下，要控制速度极快的赛车绕开障碍物移动到终点，关键是提高选手的反应灵敏度，即两次改变赛车运动方向所间隔的最短时间，也可称为选手的反应时间。使自己能够更快地控制赛车改变前进的方向。\n\n当然，由于选手反应灵敏度的不同，可选择的路径就会大不相同。如图 $1$ 和图 $2$ 所示，对于同一个赛场，两位选手的反应时间分别为 $2$ 秒和 $1$ 秒，而其到达终点所需的时间分别为 $18$ 秒和 $16$ 秒（赛车每秒可沿当前方向移动一格，从起点出发时算改变一次方向）。\n\n由图 $1$ 和图 $2$ 可知，赛车的最短路线长度是由选手的反应灵敏度所决定的，当选手的反应很慢时，可能就不会存在可行的路径。你的任务是：在能够完成赛程（即存在从起点到终点的路径）的条件下，求出选手每个可能的反应时间所对应的最短路线长度。\n\n![](https://cdn.luogu.com.cn/upload/pic/1294.png)\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，表示赛场的行数和列数。$1≤N, M≤100$。\n\n第二行有四个整数 $x1$、$y1$、$x2$、$y2$，表示赛程的起点和终点的位置分别为 $(x1, y1$ 和 $x2,y2$。\n\n接下来 $N$ 行是一个 $N×M$ 的 0-1 矩阵，矩阵中第 $i$ 行第 $j$ 列元素 $A_{i,j}=1$ 表示赛场中位置 $(i,j)$ 为赛道，$A_{i,j}=0$ 表示赛场中位置 $(i,j)$ 有障碍物。\n", "outputFormat": "输出文件可能有多行，其中每行输出一个可能的选手反应时间及该时间所对应的最短路线长度。输出文件中必须包含所有符合题目要求的选手反应时间。注意：由于选手的反应时间不可能很慢，因而不必考虑选手反应时间大于 $10$ 秒的情况，只需输出 $10$ 以内（包含 $10$）的解。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2227", "type": "P", "difficulty": 5, "samples": [["5 2          \n4 1 5 3 2\n", "2 5 4 1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南", "图论建模", "置换"], "title": "[HNOI2001] 洗牌机", "background": "", "description": "剀剀和凡凡有 $n$ 张牌（依次标号为 $1,2,\\ldots,n$）和一台洗牌机。假设 $n$ 是奇数。洗牌机的功能是进行如下的操作：对所有位置 $i(1\\le i\\le n)$，如果位置 $i$ 上的牌是 $j$，而且位置 $j$ 上的牌是 $k$，那么通过洗牌机后位置 $i$ 上的牌将是 $k$。\n\n剀剀首先写下数值 $1,2,\\ldots,n$ 的一个随机排列：$a_1,a_2,\\ldots,a_n$。然后他这样来排列牌的顺序：位置 $a_i$ 放置牌 $a_{i+1}$, （对于 $1\\le i\\le n-1$），而 $a_n$ 放置牌 $a_1$。这样排列后，牌的顺序就为 $x_1,x_2,\\ldots ,x_n$。然后，他把这种顺序排列的牌放入洗牌机洗牌 $s$ 次，得到牌的顺序为 $p_1,p_2,\\ldots,p_n$。现在，剀剀把牌的最后顺序和洗牌次数告诉凡凡，要凡凡猜出牌的最初顺序 $x_1,x_2,\\ldots,x_n$。\n", "inputFormat": "第一行为整数 $n$ 和 $s$。\n\n第二行为牌的最终顺序  $p_1,p_2,\\ldots,p_n$。", "outputFormat": "为一行，即牌的最初顺序 $x_1,x_2,\\ldots,x_n$。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1\\le n,s\\le 10^3$。\n\n数据保证，从 $i=1$ 开始，设第 $i$ 张牌上数是 $j$，则赋值 $i=j$ 后继续此操作，最终会遍历所有牌。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Shuffling Machine", "background": "", "description": "Kaikai and Fanfan have $n$ cards (numbered $1,2,\\ldots,n$ in order) and a shuffling machine. Assume $n$ is odd. The shuffling machine performs the following operation: for every position $i$ ($1\\le i\\le n$), if the card at position $i$ is $j$, and the card at position $j$ is $k$, then after running the machine, the card at position $i$ will be $k$.\n\nKaikai first writes down a random permutation of $1,2,\\ldots,n$: $a_1,a_2,\\ldots,a_n$. He then arranges the deck as follows: put card $a_{i+1}$ at position $a_i$ (for $1\\le i\\le n-1$), and put card $a_1$ at position $a_n$. After this arrangement, the deck order is $x_1,x_2,\\ldots,x_n$. Then he runs the shuffling machine $s$ times to obtain the order $p_1,p_2,\\ldots,p_n$. Now Kaikai tells Fanfan the final order and the number of shuffles, and asks Fanfan to determine the initial order $x_1,x_2,\\ldots,x_n$.", "inputFormat": "The first line contains integers $n$ and $s$.\n\nThe second line contains the final order of the cards $p_1,p_2,\\ldots,p_n$.", "outputFormat": "Output one line: the initial order $x_1,x_2,\\ldots,x_n$.", "hint": "#### Constraints\nFor $100\\%$ of the testdata, it is guaranteed that $1\\le n,s\\le 10^3$.\n\nThe testdata guarantees that, starting from $i=1$, let the number on the $i$-th card be $j$, then assign $i=j$ and continue this process; eventually, all cards will be visited.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 洗牌机", "background": "", "description": "剀剀和凡凡有 $n$ 张牌（依次标号为 $1,2,\\ldots,n$）和一台洗牌机。假设 $n$ 是奇数。洗牌机的功能是进行如下的操作：对所有位置 $i(1\\le i\\le n)$，如果位置 $i$ 上的牌是 $j$，而且位置 $j$ 上的牌是 $k$，那么通过洗牌机后位置 $i$ 上的牌将是 $k$。\n\n剀剀首先写下数值 $1,2,\\ldots,n$ 的一个随机排列：$a_1,a_2,\\ldots,a_n$。然后他这样来排列牌的顺序：位置 $a_i$ 放置牌 $a_{i+1}$, （对于 $1\\le i\\le n-1$），而 $a_n$ 放置牌 $a_1$。这样排列后，牌的顺序就为 $x_1,x_2,\\ldots ,x_n$。然后，他把这种顺序排列的牌放入洗牌机洗牌 $s$ 次，得到牌的顺序为 $p_1,p_2,\\ldots,p_n$。现在，剀剀把牌的最后顺序和洗牌次数告诉凡凡，要凡凡猜出牌的最初顺序 $x_1,x_2,\\ldots,x_n$。\n", "inputFormat": "第一行为整数 $n$ 和 $s$。\n\n第二行为牌的最终顺序  $p_1,p_2,\\ldots,p_n$。", "outputFormat": "为一行，即牌的最初顺序 $x_1,x_2,\\ldots,x_n$。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1\\le n,s\\le 10^3$。\n\n数据保证，从 $i=1$ 开始，设第 $i$ 张牌上数是 $j$，则赋值 $i=j$ 后继续此操作，最终会遍历所有牌。", "locale": "zh-CN"}}}
{"pid": "P2228", "type": "P", "difficulty": 5, "samples": [["2 3                            \n4 5 -2\n-1 2 1\n", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南", "轮廓线 DP", "状压 DP"], "title": "[HNOI2001] 洋洋吃蛋糕", "background": "", "description": "洋洋是有名的“小馋猫”。他爱吃许多东西，但也有一些不爱吃的东西。一天，洋洋发现家中有一块刚烤好的长方形的蛋糕，而且蛋糕里放上了各种各样的东西，有爱吃的草莓，奶酪，也有不爱吃的核桃仁。这使得洋洋有一些为难，到底是吃还是不吃呢？这时，爷爷看出了洋洋的烦恼，然后说：你若能够遵守以下几条规则的话，蛋糕可以随便吃：\n\n1. 蛋糕的尺寸为 $n\\times m$，在吃之前，需先把蛋糕划分成 $n\\times m$ 个单位蛋糕块，然后对每一个单位蛋糕块按照自己的喜好给其打分，分数越高表示越爱吃，反之则表示越不爱吃。这个分数为这一个单位蛋糕块的好吃程度值。\n\n1. 每一个单位蛋糕块要么全部被吃掉，要么不吃。\n\n1. 被吃掉的蛋糕块必须成长方形或正方形，是由一些单位蛋糕块组成的，且蛋糕块的两边必须和原来的大蛋糕块的两边平行。一块蛋糕块的好吃程度值就是所有组成这个蛋糕块的单位蛋糕块的分数之和。\n\n1. 被吃掉的蛋糕块的尺寸任意，且块数也任意。\n\n1. 为了保持蛋糕块的美观，所有被吃掉的蛋糕块在原来的大蛋糕块中的位置不能相邻，且不能重叠。如图 1 和图 2 的吃法是不允许的，而图 3 和图 4 的吃法是允许的。\n![](https://cdn.luogu.com.cn/upload/pic/1295.png) \n1. 所有被吃掉的蛋糕块的好吃程度值之和最大。\n\n爷爷的话并没有消去洋洋的烦恼，因为他只能做好第一点，而不知如何选择蛋糕块。于是，洋洋请你帮忙选择蛋糕块，以使得所有被吃掉的蛋糕块的好吃程度值之和最大。", "inputFormat": "第一行是两个整数 $n$ 和 $m$。\n\n以下 $n$ 行是一个 $n$ 行 $m$ 列的矩阵，第 $i$ 行第 $j$ 列的整数表示单位蛋糕块 $(i,j)$ 的好吃程度值 $c$。", "outputFormat": "只有一个数，即为最大的好吃程度值。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 200$，$1\\le m\\le 10$，$-100\\le c\\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Yangyang Eats Cake", "background": "", "description": "Yangyang is a well-known “little foodie.” He loves to eat many things, but there are also some things he doesn’t like. One day, Yangyang found a freshly baked rectangular cake at home, and the cake had all sorts of ingredients: strawberries and cheese that he likes, and walnuts that he doesn’t like. This put Yangyang in a dilemma: should he eat it or not? At this moment, his grandpa noticed Yangyang’s trouble and said: If you can follow the rules below, you may eat the cake as you wish:\n\n1. The cake has size $n \\times m$. Before eating, it should be partitioned into $n \\times m$ unit cake cells. Then, for each unit cell, assign a score according to your preference: a higher score means he likes it more, and a lower score means he dislikes it more. This score is the taste value of that unit cell.\n2. Each unit cell is either eaten completely or not eaten at all.\n3. Any eaten cake piece must be a rectangle or a square, composed of some unit cells, and its sides must be parallel to the sides of the original cake. The taste value of a cake piece is the sum of the scores of all unit cells that form this piece.\n4. The sizes of the eaten pieces are arbitrary, and the number of pieces is also arbitrary.\n5. To keep the cake looking nice, all eaten pieces, in their positions within the original cake, must not be adjacent and must not overlap. The eating methods shown in Figures 1 and 2 are not allowed, while those in Figures 3 and 4 are allowed.\n![](https://cdn.luogu.com.cn/upload/pic/1295.png) \n6. The sum of the taste values of all eaten pieces must be maximized.\n\nGrandpa’s words did not remove Yangyang’s worry, because he can only accomplish the first step and does not know how to choose the pieces. So, Yangyang asks you to help select the pieces so that the total taste value of all eaten pieces is maximized.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nThe next $n$ lines contain an $n$-by-$m$ matrix. The integer in row $i$, column $j$ denotes the taste value $c$ of unit cake cell $(i, j)$.", "outputFormat": "Output a single integer: the maximum total taste value.", "hint": "Constraints  \nFor $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 200$, $1 \\le m \\le 10$, $-100 \\le c \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 洋洋吃蛋糕", "background": "", "description": "洋洋是有名的“小馋猫”。他爱吃许多东西，但也有一些不爱吃的东西。一天，洋洋发现家中有一块刚烤好的长方形的蛋糕，而且蛋糕里放上了各种各样的东西，有爱吃的草莓，奶酪，也有不爱吃的核桃仁。这使得洋洋有一些为难，到底是吃还是不吃呢？这时，爷爷看出了洋洋的烦恼，然后说：你若能够遵守以下几条规则的话，蛋糕可以随便吃：\n\n1. 蛋糕的尺寸为 $n\\times m$，在吃之前，需先把蛋糕划分成 $n\\times m$ 个单位蛋糕块，然后对每一个单位蛋糕块按照自己的喜好给其打分，分数越高表示越爱吃，反之则表示越不爱吃。这个分数为这一个单位蛋糕块的好吃程度值。\n\n1. 每一个单位蛋糕块要么全部被吃掉，要么不吃。\n\n1. 被吃掉的蛋糕块必须成长方形或正方形，是由一些单位蛋糕块组成的，且蛋糕块的两边必须和原来的大蛋糕块的两边平行。一块蛋糕块的好吃程度值就是所有组成这个蛋糕块的单位蛋糕块的分数之和。\n\n1. 被吃掉的蛋糕块的尺寸任意，且块数也任意。\n\n1. 为了保持蛋糕块的美观，所有被吃掉的蛋糕块在原来的大蛋糕块中的位置不能相邻，且不能重叠。如图 1 和图 2 的吃法是不允许的，而图 3 和图 4 的吃法是允许的。\n![](https://cdn.luogu.com.cn/upload/pic/1295.png) \n1. 所有被吃掉的蛋糕块的好吃程度值之和最大。\n\n爷爷的话并没有消去洋洋的烦恼，因为他只能做好第一点，而不知如何选择蛋糕块。于是，洋洋请你帮忙选择蛋糕块，以使得所有被吃掉的蛋糕块的好吃程度值之和最大。", "inputFormat": "第一行是两个整数 $n$ 和 $m$。\n\n以下 $n$ 行是一个 $n$ 行 $m$ 列的矩阵，第 $i$ 行第 $j$ 列的整数表示单位蛋糕块 $(i,j)$ 的好吃程度值 $c$。", "outputFormat": "只有一个数，即为最大的好吃程度值。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 200$，$1\\le m\\le 10$，$-100\\le c\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2229", "type": "P", "difficulty": 6, "samples": [["start\r\n     i=0\r\n     j=0\r\n     loop 100\r\n          i=i+1\r\n          j=j+i\r\n          continue\r\n          loop 10\r\n               write j\r\n          end\r\n     end\r\n     loop 100\r\n          j=j+1\r\n          break\r\n          j=j+1\r\n     end\r\n     write j\r\nend\r\n", "5051"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2002", "各省省选", "湖南", "栈"], "title": "[HNOI2002] 沙漠寻宝", "background": "", "description": "传说在漫无边际的沙漠中有一个古代城市的废墟，里面埋藏了大量的宝藏。听到这个消息的人一个又一个的前去寻宝，却没有发现一个回来的人。\n\n探险家 Jack 是冒险者队伍中的后起之秀，它加入冒险者队伍的时间虽然不长，却屡屡依靠自己过人的智慧使自己和队友们脱离了险境。“明知山有虎，偏向虎山行”。 在 Jack 探险队的宗旨的指引下，Jack 和他的队友们踏上了沙漠寻宝的旅程。\n\n“我发现沙漠废墟了。”在一名队员的叫喊声中，Jack 隐约看到了一些古代城市的残垣断壁和一个通道。 “一定就是这里了。”Jack 带领着大家进入了通道。\n\n然而，不幸的事情发生了。就在 Jack 他们进入通道的同时，通道的入口“轰”的一声就关闭了。Jack 和他的队友走到了通道的尽头，正前方是一个巨大的铁门。最令人奇怪的是，铁门竟然使用的是一个极度先进的带有键盘和显示器的电子密码锁，铁门旁还赫然写着开锁的方法：“想到得到我的宝藏的人们，到这里的路途很辛苦吧！不过这一切很快就会结束的，这个铁门就是你们的葬身之地。除非你们能够计算出我屏幕上程序的结果，并且通过键盘输入进去，这扇门就会打开，里面就是我所有的宝藏”\n\n我们的 Jack 果然不负众望，他打开了他的行囊，拿出了一个类似保险箱的东西。“没见过吗？这是最新型的笔记本电脑，没有它，我再怎么天才也不可能打开这扇门的。”面对大家疑惑的目光，Jack 打开了笔记本电脑的开关。\n\n“这个宝藏主人的程序十分的奇怪，我虽然没见过，但根据我的猜测，它的结构应该是这样的：\n\n程序共包含 $7$ 种语句：`start`,`end`,`loop`,`continue`,`break`,`write`,以及 `?=*` 形式的语句。\n\n`start` 是程序的开始标志，其对应了一个结束标志 `end`。\n\n`loop` 后面空一格并紧跟了一个表达式 `*`，表达式 `*` 的值 $N$ 表示即将循环 $N$ 次，对应的循环结束标志也是 `end`。\n\n`continue` 表示程序跳转到当前循环对应的 `end` 语句，`break` 表示程序将跳出当前的循环。\n\n`write` 后面空一格并紧跟了一个表达式 `*`，表示要输出表达式 `*` 的值，也就是要输入到密码锁中的内容。\n\n`?=*` 是赋值语句，`?` 是变量的名字，`*` 计算出来的值是要给 `?` 的。\n\n另外，值得庆幸的是，变量名只允许使用 `a`$\\dots$`z`这 $26$ 个小写字母，表达式也只允许使用加减乘除四种运算和以及括号，参与运算的也只能是 $26$ 个变量或者是整数（允许不止一位整数）。表达式不会超过 $80$ 个字符。”\n\n“希望 Jack 能很快将锁打开。”大家心里默念着。\n\n给定程序对所有语句的执行次数的总和小于 $2000000$ 次。", "inputFormat": "输入文件为 program.in，给出了宝藏主人的程序。其中任两条语句用若干个空格或回车符隔开。", "outputFormat": "输出文件为 program.out，是你要输入密码锁的内容。每次输出占一行。", "hint": "1. 程序中的任何计算都在长整形范围以内，无需使用高精度。\n2. 任何除法的结果都是整数且除数不为 0。\n3. 保证给出的代码没有语法错误，你不需要判错。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Desert Treasure Hunt", "background": "", "description": "It is said that there are ruins of an ancient city buried with a large amount of treasure in the boundless desert. One after another, people who heard the news went to look for treasure, but none returned.\n\nThe explorer Jack is a rising star among the adventurers. Although he joined the team not long ago, he and his teammates have repeatedly escaped danger thanks to his extraordinary wisdom. “Knowing there are tigers on the mountain, we head for the mountain anyway.” Guided by the creed of Jack’s expedition, Jack and his teammates set off on a desert treasure hunt.\n\n“I found the desert ruins.” With a teammate’s shout, Jack vaguely saw some broken walls of an ancient city and a passage. “This must be it.” Jack led everyone into the passage.\n\nHowever, misfortune struck. As Jack and the others entered the passage, the entrance slammed shut with a bang. Jack and his teammates reached the end of the passage, and in front of them was a huge iron gate. Strangely, the gate used an extremely advanced electronic lock with a keyboard and display, and the unlocking method was written clearly beside the gate: “Those who wish to obtain my treasure, the journey here must have been arduous! But it will soon be over; this iron door will be your tomb. Unless you can compute the result of the program shown on my screen and enter it through the keyboard, this door will open, and inside lies all my treasure.”\n\nTrue to expectations, Jack opened his pack and took out something like a safe. “Never seen one? This is the latest laptop. Without it, no matter how much of a genius I am, I couldn’t open this door.” Facing everyone’s puzzled looks, Jack turned on the laptop.\n\n“This treasure owner’s program is very strange. Although I haven’t seen it before, based on my guess, its structure should be as follows:\n\nThe program contains 6 types of statements: start, end, loop, continue, write, and statements of the form ?=\\*.\n\nstart marks the beginning of the program and corresponds to a closing marker end.\n\nloop is followed by a space and then an expression \\*. The value N of expression \\* indicates that the following block will loop N times; the corresponding loop closing marker is also end.\n\ncontinue means the program jumps to the end statement corresponding to the current loop, and break means the program exits the current loop.\n\nwrite is followed by a space and then an expression \\*, indicating that the value of expression \\* should be output, which is what must be entered into the password lock.\n\n?=\\* is an assignment statement, where ? is the variable name, and the computed value of \\* is assigned to ?.\n\nFortunately, variable names are restricted to the 26 lowercase letters 'a'..'z'. Expressions are restricted to the four arithmetic operations (addition, subtraction, multiplication, division) and parentheses; operands can only be the 26 variables or integers (multi-digit integers are allowed). An expression will not exceed 80 characters.”\n\n“Hope Jack can open the lock soon.” Everyone prayed silently.\n\nThe sum of the execution counts of all statements in the given program is less than 2000000.", "inputFormat": "The input file is program.in, which contains the treasure owner’s program. Any two statements are separated by one or more spaces or newline characters.", "outputFormat": "The output file is program.out, which is the content you must enter into the password lock. Output one result per line.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 沙漠寻宝", "background": "", "description": "传说在漫无边际的沙漠中有一个古代城市的废墟，里面埋藏了大量的宝藏。听到这个消息的人一个又一个的前去寻宝，却没有发现一个回来的人。\n\n探险家 Jack 是冒险者队伍中的后起之秀，它加入冒险者队伍的时间虽然不长，却屡屡依靠自己过人的智慧使自己和队友们脱离了险境。“明知山有虎，偏向虎山行”。 在 Jack 探险队的宗旨的指引下，Jack 和他的队友们踏上了沙漠寻宝的旅程。\n\n“我发现沙漠废墟了。”在一名队员的叫喊声中，Jack 隐约看到了一些古代城市的残垣断壁和一个通道。 “一定就是这里了。”Jack 带领着大家进入了通道。\n\n然而，不幸的事情发生了。就在 Jack 他们进入通道的同时，通道的入口“轰”的一声就关闭了。Jack 和他的队友走到了通道的尽头，正前方是一个巨大的铁门。最令人奇怪的是，铁门竟然使用的是一个极度先进的带有键盘和显示器的电子密码锁，铁门旁还赫然写着开锁的方法：“想到得到我的宝藏的人们，到这里的路途很辛苦吧！不过这一切很快就会结束的，这个铁门就是你们的葬身之地。除非你们能够计算出我屏幕上程序的结果，并且通过键盘输入进去，这扇门就会打开，里面就是我所有的宝藏”\n\n我们的 Jack 果然不负众望，他打开了他的行囊，拿出了一个类似保险箱的东西。“没见过吗？这是最新型的笔记本电脑，没有它，我再怎么天才也不可能打开这扇门的。”面对大家疑惑的目光，Jack 打开了笔记本电脑的开关。\n\n“这个宝藏主人的程序十分的奇怪，我虽然没见过，但根据我的猜测，它的结构应该是这样的：\n\n程序共包含 $7$ 种语句：`start`,`end`,`loop`,`continue`,`break`,`write`,以及 `?=*` 形式的语句。\n\n`start` 是程序的开始标志，其对应了一个结束标志 `end`。\n\n`loop` 后面空一格并紧跟了一个表达式 `*`，表达式 `*` 的值 $N$ 表示即将循环 $N$ 次，对应的循环结束标志也是 `end`。\n\n`continue` 表示程序跳转到当前循环对应的 `end` 语句，`break` 表示程序将跳出当前的循环。\n\n`write` 后面空一格并紧跟了一个表达式 `*`，表示要输出表达式 `*` 的值，也就是要输入到密码锁中的内容。\n\n`?=*` 是赋值语句，`?` 是变量的名字，`*` 计算出来的值是要给 `?` 的。\n\n另外，值得庆幸的是，变量名只允许使用 `a`$\\dots$`z`这 $26$ 个小写字母，表达式也只允许使用加减乘除四种运算和以及括号，参与运算的也只能是 $26$ 个变量或者是整数（允许不止一位整数）。表达式不会超过 $80$ 个字符。”\n\n“希望 Jack 能很快将锁打开。”大家心里默念着。\n\n给定程序对所有语句的执行次数的总和小于 $2000000$ 次。", "inputFormat": "输入文件为 program.in，给出了宝藏主人的程序。其中任两条语句用若干个空格或回车符隔开。", "outputFormat": "输出文件为 program.out，是你要输入密码锁的内容。每次输出占一行。", "hint": "1. 程序中的任何计算都在长整形范围以内，无需使用高精度。\n2. 任何除法的结果都是整数且除数不为 0。\n3. 保证给出的代码没有语法错误，你不需要判错。", "locale": "zh-CN"}}}
{"pid": "P2230", "type": "P", "difficulty": 5, "samples": [["4 3\n3\n5\n4\n", "28\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南"], "title": "[HNOI2002] Tinux系统", "background": "", "description": "在 dos 系统诞生以前，美国曾研究出一种类似的操作系统，名为 Tinux 系统。但由于硬件设施的制约，Tinux 系统有许多的缺点。下面就对 Tinux 系统作一个简单的介绍：\n\nTinux 系统是 Tiger 博士为美国军方研制开发的一种操作系统，该系统对文件的存储方式类似于 dos 系统，像一棵树一样，每一个叶子节点表示一个文件，每一个非叶子节点表示一个目录。其中定义 $i$ 级子目录表示从根目录开始访问，一直访问到该子目录（不包括该子目录）需要访问的目录的个数为 $i$ 的目录，所以根目录下的目录为一级子目录，其他的目录以此类推。但是在同一子目录下，受到硬件的制约 Tinux 系统最多只能够存储 $k$ 个文件或子目录，也就是说这棵树里面的每一个非叶子节点最多只有 $k$ 个子节点。这样就导致在文件数量较多的情况下，访问存储在该系统当中的文件 A，往往要先访问一系列的子目录，我们称这些子目录为文件 A 的上级目录。例如下面这一个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/11pz60gn.png)\n\n当我们要访问文件 A4A2A1 时就必须先访问它的上级目录：一级子目录 A4 和二级子目录 A4A2。\n\nTinux 系统在存储文件时，给每一个子目录都分配了 $k$ 个指针，分别指向存放在该目录下的每一个文件和每一个目录，因此对文件的访问实质上就是对指针的访问。但是由于硬件原因，这 $k$ 个指针不尽相同，因此访问它们的时间也不同，访问第 $i$ 个指针所耗费的时间为 $P_i$。但是对于两个不同的子目录（不管它们各自属于哪一级目录）而言它们各自所拥有的 $k$ 个指针是相同的。\n\nTinux 系统最大的缺点是访问一个目录时，必须把该目录下所有的文件读入到内存当中来，这些文件包括在其各级子目录当中的文件，例如上面那一个例子，访问 A4 那一个目录，就必须把 A4A1，A4A2A1，A4A2A2，A4A3 这四个文件都读入到内存当中来，访问一个目录所需要的时间为 $P_i \\times x$（$x$ 表示该目录及其各级子目录下文件的个数，$P_i$ 表示指向该目录的指针的访问时间）。因此根据上面介绍的访问方法，单独访问一个文件所需要的总时间为访问其所有上级目录（不包括根目录）所需要的时间与访问指向该文件的指针所需要的时间的和，例如上面那一个例子，访问文件 A4A2A1 需要的时间 = 访问目录 A4 的时间 + 访问目录 A4A2 的时间 + 访问指向文件 A4A2A1 的指针需要的时间。\n\n现在，tiger 博士准备将 $n$ 个文件存储到一个空的 Tinux 系统当中，希望你帮助他设计一个程序找到一种最优的存储方法，使得单独访问这 $n$ 个文件所需要的时间总和最小。", "inputFormat": "文件的第一行为两个正整数 $n, k$，接下来的 $k$ 行每行有一个正整数 $P_i$。", "outputFormat": "输出仅一个正整数，表示在最优存储方案下，单独访问这 $n$ 个文件所需要的时间总和（结果小于 $2^{31}$）。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1296.png)\n\n**【数据范围】**\n\n$1 \\le n \\le 1000$，$2 \\le k \\le 150$，$1 \\le P_i \\le 150$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Tinux System", "background": "# Description\n\nBefore the DOS system was born, the United States studied a similar operating system called the Tinux system. However, due to hardware limitations, the Tinux system had many drawbacks. Below is a brief introduction to the Tinux system.\n\nThe Tinux system was developed by Dr. Tiger for the U.S. military. Its file storage method is similar to DOS: it is like a tree, where each leaf node represents a file, and each non-leaf node represents a directory. We define an $i$-level subdirectory as a directory such that, starting from the root directory, the number of directories that must be visited to reach (but not including) this subdirectory is $i$. Therefore, directories directly under the root are level 1 subdirectories, and so on.\n\nWithin any single directory, due to hardware limits, the Tinux system can store at most $k$ files or subdirectories. In other words, every non-leaf node in this tree has at most $k$ children. As a result, when there are many files, to access a file A stored in the system, one often has to visit a sequence of directories first; we call these directories the ancestor directories of file A. For example:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/11pz60gn.png)\n\nWhen we want to access file A4A2A1, we must first visit its ancestor directories: the level-1 directory A4 and the level-2 directory A4A2.\n\nWhen storing files, the Tinux system allocates $k$ pointers to every directory, each pointing to one file or subdirectory under it. Therefore, accessing a file is essentially accessing pointers. However, due to hardware reasons, these $k$ pointers are not identical, so the time to access them is different: the time to access the $i$-th pointer is $P_i$. For two different directories (regardless of their depth), their sets of $k$ pointers are the same.\n\nThe biggest drawback of the Tinux system is that when accessing a directory, all files under that directory must be read into memory, including files in all its subdirectories. For example, in the figure above, accessing directory A4 requires loading four files into memory: A4A1, A4A2A1, A4A2A2, and A4A3. The time to access a directory is $P_i \\times x$ (where $x$ is the number of files under that directory and all of its subdirectories, and $P_i$ is the time to access the pointer pointing to that directory). Therefore, according to the access method described above, the total time to access a single file equals the sum of the times to access all its ancestor directories (excluding the root) plus the time to access the pointer to that file. For example, in the figure above, the time to access file A4A2A1 = the time to access directory A4 + the time to access directory A4A2 + the time to access the pointer to file A4A2A1.\n\nNow, Dr. Tiger plans to store $n$ files into an empty Tinux system. Please help him design a program to find an optimal storage plan that minimizes the total time needed to access these $n$ files individually.", "description": "", "inputFormat": "", "outputFormat": "Output a single positive integer: under the optimal storage plan, the total time required to access these $n$ files individually (the result is less than $2^{31}$).", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1296.png)\n\nConstraints\n\n$1 \\le n \\le 1000$, $2 \\le k \\le 150$, $1 \\le P_i \\le 150$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] Tinux系统", "background": "", "description": "在 dos 系统诞生以前，美国曾研究出一种类似的操作系统，名为 Tinux 系统。但由于硬件设施的制约，Tinux 系统有许多的缺点。下面就对 Tinux 系统作一个简单的介绍：\n\nTinux 系统是 Tiger 博士为美国军方研制开发的一种操作系统，该系统对文件的存储方式类似于 dos 系统，像一棵树一样，每一个叶子节点表示一个文件，每一个非叶子节点表示一个目录。其中定义 $i$ 级子目录表示从根目录开始访问，一直访问到该子目录（不包括该子目录）需要访问的目录的个数为 $i$ 的目录，所以根目录下的目录为一级子目录，其他的目录以此类推。但是在同一子目录下，受到硬件的制约 Tinux 系统最多只能够存储 $k$ 个文件或子目录，也就是说这棵树里面的每一个非叶子节点最多只有 $k$ 个子节点。这样就导致在文件数量较多的情况下，访问存储在该系统当中的文件 A，往往要先访问一系列的子目录，我们称这些子目录为文件 A 的上级目录。例如下面这一个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/11pz60gn.png)\n\n当我们要访问文件 A4A2A1 时就必须先访问它的上级目录：一级子目录 A4 和二级子目录 A4A2。\n\nTinux 系统在存储文件时，给每一个子目录都分配了 $k$ 个指针，分别指向存放在该目录下的每一个文件和每一个目录，因此对文件的访问实质上就是对指针的访问。但是由于硬件原因，这 $k$ 个指针不尽相同，因此访问它们的时间也不同，访问第 $i$ 个指针所耗费的时间为 $P_i$。但是对于两个不同的子目录（不管它们各自属于哪一级目录）而言它们各自所拥有的 $k$ 个指针是相同的。\n\nTinux 系统最大的缺点是访问一个目录时，必须把该目录下所有的文件读入到内存当中来，这些文件包括在其各级子目录当中的文件，例如上面那一个例子，访问 A4 那一个目录，就必须把 A4A1，A4A2A1，A4A2A2，A4A3 这四个文件都读入到内存当中来，访问一个目录所需要的时间为 $P_i \\times x$（$x$ 表示该目录及其各级子目录下文件的个数，$P_i$ 表示指向该目录的指针的访问时间）。因此根据上面介绍的访问方法，单独访问一个文件所需要的总时间为访问其所有上级目录（不包括根目录）所需要的时间与访问指向该文件的指针所需要的时间的和，例如上面那一个例子，访问文件 A4A2A1 需要的时间 = 访问目录 A4 的时间 + 访问目录 A4A2 的时间 + 访问指向文件 A4A2A1 的指针需要的时间。\n\n现在，tiger 博士准备将 $n$ 个文件存储到一个空的 Tinux 系统当中，希望你帮助他设计一个程序找到一种最优的存储方法，使得单独访问这 $n$ 个文件所需要的时间总和最小。", "inputFormat": "文件的第一行为两个正整数 $n, k$，接下来的 $k$ 行每行有一个正整数 $P_i$。", "outputFormat": "输出仅一个正整数，表示在最优存储方案下，单独访问这 $n$ 个文件所需要的时间总和（结果小于 $2^{31}$）。", "hint": "![](https://cdn.luogu.com.cn/upload/pic/1296.png)\n\n**【数据范围】**\n\n$1 \\le n \\le 1000$，$2 \\le k \\le 150$，$1 \\le P_i \\le 150$。", "locale": "zh-CN"}}}
{"pid": "P2231", "type": "P", "difficulty": 5, "samples": [["2 4", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "数论", "湖南", "最大公约数 gcd", "不定方程", "莫比乌斯反演"], "title": "[HNOI2002] 跳蚤", "background": null, "description": "Z 城市居住着很多只跳蚤。在 Z 城市周六生活频道有一个娱乐节目。一只跳蚤将被请上一个高空钢丝的正中央。钢丝很长，可以看作是无限长。节目主持人会给该跳蚤发一张卡片。卡片上写有 $N+1$ 个正整数。其中最后一个是 $M$，而前 $N$ 个数都不超过 $M$，卡片上允许有相同的数字。跳蚤每次可以从卡片上任意选择一个正整数 $S$，然后向左，或向右跳 $S$ 个单位长度。而他最终的任务是跳到距离他左边一个单位长度的地方，并捡起位于那里的礼物。\n\n比如当 $N=2,M=18$ 时，持有卡片 $(10, 15, 18)$ 的跳蚤，就可以完成任务：他可以先向左跳 $10$ 个单位长度，然后再连向左跳 $3$ 次，每次 $15$ 个单位长度，最后再向右连跳 $3$ 次，每次 $18$ 个单位长度。而持有卡片 $(12, 15, 18)$ 的跳蚤，则怎么也不可能跳到距他左边一个单位长度的地方。\n\n当确定 $N$ 和 $M$ 后，显然一共有 $M^ N$ 张不同的卡片。现在的问题是，在这所有的卡片中，有多少张可以完成任务。", "inputFormat": "输入文件有且仅有一行，包括用空格分开的两个整数 $N$ 和 $M$。", "outputFormat": "输出文件有且仅有一行，即可以完成任务的卡片数。\n\n$1\\le N\\le M\\le 10^8$，且 $M^N\\le 10^{16}$。", "hint": "这 12 张卡片分别是：\n\n$(1, 1, 4), (1, 2, 4), (1, 3, 4), (1, 4, 4), (2, 1, 4), (2, 3, 4)$\n\n$(3, 1, 4), (3, 2, 4), (3, 3, 4), (3, 4, 4), (4, 1, 4), (4, 3, 4)$", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Flea", "background": "", "description": "Many fleas live in Z City. There is an entertainment show on the Saturday Life channel in Z City. A flea will be placed at the exact middle of a high wire. The wire is very long and can be regarded as infinite. The host will give the flea a card. The card has $N+1$ positive integers. The last one is $M$, and each of the first $N$ numbers does not exceed $M$. Duplicate numbers are allowed on the card. Each time, the flea can choose any positive integer $S$ from the card and then jump $S$ units either to the left or to the right. Its task is to end up at the point located one unit to its left and pick up the gift there.\n\nFor example, when $N=2, M=18$, a flea holding the card $(10, 15, 18)$ can complete the task: it can first jump $10$ units to the left, then jump left $3$ more times, $15$ units each time, and finally jump right $3$ times, $18$ units each time. However, with the card $(12, 15, 18)$, it is impossible to reach the point one unit to its left.\n\nWhen $N$ and $M$ are fixed, there are clearly $M^N$ different cards. The question is: among all these cards, how many of them can complete the task?", "inputFormat": "The input consists of a single line with two integers $N$ and $M$ separated by a space.", "outputFormat": "Output a single line containing the number of cards that can complete the task.\n\nConstraints\n\n$1 \\le N \\le M \\le 10^8$, and $M^N \\le 10^{16}$.", "hint": "These 12 cards are:\n\n$(1, 1, 4), (1, 2, 4), (1, 3, 4), (1, 4, 4), (2, 1, 4), (2, 3, 4)$\n\n$(3, 1, 4), (3, 2, 4), (3, 3, 4), (3, 4, 4), (4, 1, 4), (4, 3, 4)$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 跳蚤", "background": null, "description": "Z 城市居住着很多只跳蚤。在 Z 城市周六生活频道有一个娱乐节目。一只跳蚤将被请上一个高空钢丝的正中央。钢丝很长，可以看作是无限长。节目主持人会给该跳蚤发一张卡片。卡片上写有 $N+1$ 个正整数。其中最后一个是 $M$，而前 $N$ 个数都不超过 $M$，卡片上允许有相同的数字。跳蚤每次可以从卡片上任意选择一个正整数 $S$，然后向左，或向右跳 $S$ 个单位长度。而他最终的任务是跳到距离他左边一个单位长度的地方，并捡起位于那里的礼物。\n\n比如当 $N=2,M=18$ 时，持有卡片 $(10, 15, 18)$ 的跳蚤，就可以完成任务：他可以先向左跳 $10$ 个单位长度，然后再连向左跳 $3$ 次，每次 $15$ 个单位长度，最后再向右连跳 $3$ 次，每次 $18$ 个单位长度。而持有卡片 $(12, 15, 18)$ 的跳蚤，则怎么也不可能跳到距他左边一个单位长度的地方。\n\n当确定 $N$ 和 $M$ 后，显然一共有 $M^ N$ 张不同的卡片。现在的问题是，在这所有的卡片中，有多少张可以完成任务。", "inputFormat": "输入文件有且仅有一行，包括用空格分开的两个整数 $N$ 和 $M$。", "outputFormat": "输出文件有且仅有一行，即可以完成任务的卡片数。\n\n$1\\le N\\le M\\le 10^8$，且 $M^N\\le 10^{16}$。", "hint": "这 12 张卡片分别是：\n\n$(1, 1, 4), (1, 2, 4), (1, 3, 4), (1, 4, 4), (2, 1, 4), (2, 3, 4)$\n\n$(3, 1, 4), (3, 2, 4), (3, 3, 4), (3, 4, 4), (4, 1, 4), (4, 3, 4)$", "locale": "zh-CN"}}}
{"pid": "P2232", "type": "P", "difficulty": 6, "samples": [["2 2\n", "225 1296\n400 2304\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "各省省选", "湖南", "Special Judge"], "title": "[HNOI2002] 填数游戏", "background": "", "description": "某商店最近开展了一个答题有奖的促销活动，公司经理将若干道有一定难度的问题贴到了商场的宣传栏内，如果你能够做出其中一道的话，你就能够获得优惠购买商品的权利。一段日子以后，大多数题目都被消费者们找出了答案，可是惟独有一道题目难倒了所有的人，这道题目是这样描述的：\n\n将不同的完全平方数填满 $n \\times m$ 的矩形方格表中的每一个小方格，使得每行、每列的和也是完全平方数（这个和必须小于 ${10}^{17}$）。希望你找到一种合理的方案。\n\nTiger 希望自己能够获得优惠购物的权利，于是他找到了准备参加 NOI2002 的你，希望你能够帮他设计一个程序找到一种合理的方案。\n", "inputFormat": "输入文件中仅有一行，为两个正整数 $n, m$（$2 \\le n, m \\le 15$）。", "outputFormat": "如果有解的话，输出 $n$ 行，每行有 $m$ 个数，表示一种合理的填数方案，无解时输出 `No answer`。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Filling Numbers Game", "background": "", "description": "A store recently launched a promotional event with prizes for solving questions. The manager posted several challenging problems on the store’s bulletin board, and if you can solve any one of them, you can obtain the right to purchase goods at a discount. After some time, most problems were solved by customers, but there was one problem that stumped everyone. It is described as follows:\n\nFill every cell of an $n \\times m$ rectangular grid with distinct perfect squares, such that the sum of each row and each column is also a perfect square (each such sum must be less than ${10}^{17}$). Please find a valid arrangement.\n\nTiger hopes to earn the discount, so he turns to you, who are preparing for NOI 2002, and asks you to design a program to find a valid arrangement.", "inputFormat": "The input consists of a single line with two positive integers $n, m$ ($2 \\le n, m \\le 15$).", "outputFormat": "If a solution exists, output $n$ lines, each containing $m$ numbers that represent a valid arrangement. If there is no solution, output `No answer`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 填数游戏", "background": "", "description": "某商店最近开展了一个答题有奖的促销活动，公司经理将若干道有一定难度的问题贴到了商场的宣传栏内，如果你能够做出其中一道的话，你就能够获得优惠购买商品的权利。一段日子以后，大多数题目都被消费者们找出了答案，可是惟独有一道题目难倒了所有的人，这道题目是这样描述的：\n\n将不同的完全平方数填满 $n \\times m$ 的矩形方格表中的每一个小方格，使得每行、每列的和也是完全平方数（这个和必须小于 ${10}^{17}$）。希望你找到一种合理的方案。\n\nTiger 希望自己能够获得优惠购物的权利，于是他找到了准备参加 NOI2002 的你，希望你能够帮他设计一个程序找到一种合理的方案。\n", "inputFormat": "输入文件中仅有一行，为两个正整数 $n, m$（$2 \\le n, m \\le 15$）。", "outputFormat": "如果有解的话，输出 $n$ 行，每行有 $m$ 个数，表示一种合理的填数方案，无解时输出 `No answer`。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2233", "type": "P", "difficulty": 4, "samples": [["6", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2002", "各省省选", "湖南", "矩阵乘法"], "title": "[HNOI2002] 公交车路线", "background": "", "description": "在长沙城新建的环城公路上一共有 $8$ 个公交站，分别为 A、B、C、D、E、F、G、H。公共汽车只能够在相邻的两个公交站之间运行，因此你从某一个公交站到另外一个公交站往往要换几次车，例如从公交站 A 到公交站 D，你就至少需要换 $3$ 次车。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1297.png) \n\nTiger 的方向感极其糟糕，我们知道从公交站 A 到公交 E 只需要换 $4$ 次车就可以到达，可是 tiger 却总共换了 $n$ 次车，注意 tiger 一旦到达公交站 E，他不会愚蠢到再去换车。现在希望你计算一下 tiger 有多少种可能的乘车方案。\n", "inputFormat": "仅有一个正整数 $n$，表示 tiger 从公交车站 A 到公交车站 E 共换了 $n$ 次车。", "outputFormat": "输出一个正整数表示方案数，由于方案数很大，请输出方案数除以 $1000$ 后的余数。", "hint": "8 条路线分别是：\n\n(A→B→C→D→C→D→E)，(A→B→C→B→C→D→E)，\n\n(A→B→A→B→C→D→E)，(A→H→A→B→C→D→E)，\n\n(A→H→G→F→G→F→E)，(A→H→G→H→G→F→E)，\n\n(A→H→A→H→G→F→E)，(A→B→A→H→G→F→E)。\n\n#### 数据范围\n\n$4\\le n\\le10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Bus Routes", "background": "", "description": "On the newly built ring road in Changsha, there are $8$ bus stops: A, B, C, D, E, F, G, H. Buses can only run between two adjacent stops. Therefore, to go from one stop to another, you often have to change buses several times. For example, to get from stop A to stop D, you need to change buses at least $3$ times.\n\n![](https://cdn.luogu.com.cn/upload/pic/1297.png)\n\nTiger has a very poor sense of direction. We know that to get from bus stop A to bus stop E, it takes only $4$ changes to arrive, but Tiger changed buses a total of $n$ times. Note that once Tiger reaches bus stop E, he will not be foolish enough to transfer again. Now, please compute how many possible riding plans Tiger may have.", "inputFormat": "A single positive integer $n$, indicating that Tiger changed buses a total of $n$ times from bus stop A to bus stop E.", "outputFormat": "Output a single integer representing the number of plans. Since the number may be large, output the remainder after dividing by $1000$.", "hint": "The $8$ routes are:\n\n(A→B→C→D→C→D→E), (A→B→C→B→C→D→E),\n\n(A→B→A→B→C→D→E), (A→H→A→B→C→D→E),\n\n(A→H→G→F→G→F→E), (A→H→G→H→G→F→E),\n\n(A→H→A→H→G→F→E), (A→B→A→H→G→F→E).\n\nConstraints: $4\\le n\\le10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 公交车路线", "background": "", "description": "在长沙城新建的环城公路上一共有 $8$ 个公交站，分别为 A、B、C、D、E、F、G、H。公共汽车只能够在相邻的两个公交站之间运行，因此你从某一个公交站到另外一个公交站往往要换几次车，例如从公交站 A 到公交站 D，你就至少需要换 $3$ 次车。\n\n ![](https://cdn.luogu.com.cn/upload/pic/1297.png) \n\nTiger 的方向感极其糟糕，我们知道从公交站 A 到公交 E 只需要换 $4$ 次车就可以到达，可是 tiger 却总共换了 $n$ 次车，注意 tiger 一旦到达公交站 E，他不会愚蠢到再去换车。现在希望你计算一下 tiger 有多少种可能的乘车方案。\n", "inputFormat": "仅有一个正整数 $n$，表示 tiger 从公交车站 A 到公交车站 E 共换了 $n$ 次车。", "outputFormat": "输出一个正整数表示方案数，由于方案数很大，请输出方案数除以 $1000$ 后的余数。", "hint": "8 条路线分别是：\n\n(A→B→C→D→C→D→E)，(A→B→C→B→C→D→E)，\n\n(A→B→A→B→C→D→E)，(A→H→A→B→C→D→E)，\n\n(A→H→G→F→G→F→E)，(A→H→G→H→G→F→E)，\n\n(A→H→A→H→G→F→E)，(A→B→A→H→G→F→E)。\n\n#### 数据范围\n\n$4\\le n\\le10^7$。", "locale": "zh-CN"}}}
{"pid": "P2234", "type": "P", "difficulty": 2, "samples": [["6\n5\n1\n2\n5\n4\n6\n", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "二分", "各省省选", "湖南", "排序"], "title": "[HNOI2002] 营业额统计", "background": null, "description": "Tiger 最近被公司升任为营业部经理，他上任后接受公司交给的第一项任务便是统计并分析公司成立以来的营业情况。\n\nTiger 拿出了公司的账本，账本上记录了公司成立以来每天的营业额。分析营业情况是一项相当复杂的工作。由于节假日，大减价或者是其他情况的时候，营业额会出现一定的波动，当然一定的波动是能够接受的，但是在某些时候营业额突变得很高或是很低，这就证明公司此时的经营状况出现了问题。经济管理学上定义了一种最小波动值来衡量这种情况：当最小波动值越大时，就说明营业情况越不稳定。\n\n而分析整个公司的从成立到现在营业情况是否稳定，只需要把每一天的最小波动值加起来就可以了。你的任务就是编写一个程序帮助 Tiger 来计算这一个值。\n\n我们定义，一天的最小波动值 = $\\min\\{|\\text{该天以前某一天的营业额}-\\text{该天营业额}|\\}$。\n\n特别地，第一天的最小波动值为第一天的营业额。", "inputFormat": "第一行为正整数 $n$（$n \\leq 32767$） ，表示该公司从成立一直到现在的天数，接下来的 $n$ 行每行有一个整数 $a_i$（$|a_i| \\leq 10^6$) ，表示第 $i$ 天公司的营业额，可能存在负数。", "outputFormat": "输出一个整数，即每一天最小波动值的和，保证结果小于 $2^{31}$。", "hint": "结果说明：$5+|1-5|+|2-1|+|5-5|+|4-5|+|6-5|=5+4+1+0+1+1=12$", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Turnover Statistics", "background": "", "description": "Tiger was recently promoted to the Sales Department manager. His first task from the company is to compile statistics and analyze the company’s turnover since its founding.\n\nTiger took out the company’s ledger, which records the turnover of each day since the company was founded. Analyzing turnover is a rather complex task. Because of holidays, big discounts, or other situations, turnover may fluctuate. A certain degree of fluctuation is acceptable, but sometimes the turnover suddenly becomes very high or very low, which indicates a problem in the company’s operations. In economics and management, a minimum fluctuation value is defined to measure this: the larger the minimum fluctuation value, the less stable the turnover is.\n\nTo analyze whether the overall turnover from the company’s founding to now is stable, you only need to sum the minimum fluctuation value of each day. Your task is to write a program to help Tiger compute this value.\n\nWe define the minimum fluctuation value of a day as $\\min\\{|\\text{the turnover of some previous day} - \\text{the turnover of the current day}|\\}$.\n\nIn particular, the minimum fluctuation value of the first day is the turnover of the first day.", "inputFormat": "The first line contains a positive integer $n$ ($n \\leq 32767$), representing the number of days from the company’s founding up to now.  \nEach of the next $n$ lines contains an integer $a_i$ ($|a_i| \\leq 10^6$), representing the turnover on day $i$, which may be negative.", "outputFormat": "Output a single integer: the sum of the minimum fluctuation values of each day. It is guaranteed that the result is less than $2^{31}$.", "hint": "Result explanation: $5+|1-5|+|2-1|+|5-5|+|4-5|+|6-5|=5+4+1+0+1+1=12$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 营业额统计", "background": null, "description": "Tiger 最近被公司升任为营业部经理，他上任后接受公司交给的第一项任务便是统计并分析公司成立以来的营业情况。\n\nTiger 拿出了公司的账本，账本上记录了公司成立以来每天的营业额。分析营业情况是一项相当复杂的工作。由于节假日，大减价或者是其他情况的时候，营业额会出现一定的波动，当然一定的波动是能够接受的，但是在某些时候营业额突变得很高或是很低，这就证明公司此时的经营状况出现了问题。经济管理学上定义了一种最小波动值来衡量这种情况：当最小波动值越大时，就说明营业情况越不稳定。\n\n而分析整个公司的从成立到现在营业情况是否稳定，只需要把每一天的最小波动值加起来就可以了。你的任务就是编写一个程序帮助 Tiger 来计算这一个值。\n\n我们定义，一天的最小波动值 = $\\min\\{|\\text{该天以前某一天的营业额}-\\text{该天营业额}|\\}$。\n\n特别地，第一天的最小波动值为第一天的营业额。", "inputFormat": "第一行为正整数 $n$（$n \\leq 32767$） ，表示该公司从成立一直到现在的天数，接下来的 $n$ 行每行有一个整数 $a_i$（$|a_i| \\leq 10^6$) ，表示第 $i$ 天公司的营业额，可能存在负数。", "outputFormat": "输出一个整数，即每一天最小波动值的和，保证结果小于 $2^{31}$。", "hint": "结果说明：$5+|1-5|+|2-1|+|5-5|+|4-5|+|6-5|=5+4+1+0+1+1=12$", "locale": "zh-CN"}}}
{"pid": "P2235", "type": "P", "difficulty": 6, "samples": [["5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "高精度", "2002", "各省省选", "湖南", "数位 DP"], "title": "[HNOI2002] Kathy函数", "background": "", "description": "Tiger 非常喜欢数学，所以他参加了学校组织的数学课外兴趣小组。在兴趣小组的学习当中，老师向 Tiger 介绍了 Kathy 函数，Kathy 函数是这样定义的：\n\n$$\n\\left\\{\n\\begin{aligned}\n&f(1)=1\\\\\n&f(3)=3\\\\\n&f(2n)=f(n)\\\\\n&f(4n+1)=2f(2n+1)-f(n)\\\\\n&f(4n+3)=3f(2n+1)-2f(n)\n\\end{aligned}\n\\right.\n$$\n\nTiger 对 Kathy 函数产生了浓厚的兴趣，他通过研究发现有很多的数 $n$ 都满足 $f(n)=n$。\n\n对于一个给定的数 $m$，他希望你求出所有的满足 $f(n)=n$ 的正整数 $n$ 的个数，其中 $n\\leq m$。", "inputFormat": "输入只有一行一个整数，表示 $m$。", "outputFormat": "输出一行一个整数，表示 $n$。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq m \\leq 10^{100}$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Kathy Function", "background": "", "description": "Tiger likes math very much, so he joined the school's extracurricular math club. In the club, the teacher introduced the Kathy function to Tiger, which is defined as:\n\n$$\n\\left\\{\n\\begin{aligned}\n&f(1)=1\\\\\n&f(3)=3\\\\\n&f(2n)=f(n)\\\\\n&f(4n+1)=2f(2n+1)-f(n)\\\\\n&f(4n+3)=3f(2n+1)-2f(n)\n\\end{aligned}\n\\right.\n$$\n\nTiger became very interested in the Kathy function, and through studying he found that many numbers $n$ satisfy $f(n)=n$.\n\nGiven a number $m$, he wants you to find the number of positive integers $n$ such that $f(n)=n$, where $n \\leq m$.", "inputFormat": "The input contains a single line with an integer $m$.", "outputFormat": "Output a single integer: the number of positive integers $n$ with $n \\leq m$ that satisfy $f(n)=n$.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq m \\leq 10^{100}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] Kathy函数", "background": "", "description": "Tiger 非常喜欢数学，所以他参加了学校组织的数学课外兴趣小组。在兴趣小组的学习当中，老师向 Tiger 介绍了 Kathy 函数，Kathy 函数是这样定义的：\n\n$$\n\\left\\{\n\\begin{aligned}\n&f(1)=1\\\\\n&f(3)=3\\\\\n&f(2n)=f(n)\\\\\n&f(4n+1)=2f(2n+1)-f(n)\\\\\n&f(4n+3)=3f(2n+1)-2f(n)\n\\end{aligned}\n\\right.\n$$\n\nTiger 对 Kathy 函数产生了浓厚的兴趣，他通过研究发现有很多的数 $n$ 都满足 $f(n)=n$。\n\n对于一个给定的数 $m$，他希望你求出所有的满足 $f(n)=n$ 的正整数 $n$ 的个数，其中 $n\\leq m$。", "inputFormat": "输入只有一行一个整数，表示 $m$。", "outputFormat": "输出一行一个整数，表示 $n$。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq m \\leq 10^{100}$。", "locale": "zh-CN"}}}
{"pid": "P2236", "type": "P", "difficulty": 5, "samples": [["2 4 3 4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2002", "各省省选", "湖南", "深度优先搜索 DFS"], "title": "[HNOI2002] 彩票", "background": "", "description": "某地发行一套彩票。彩票上写有 $1$ 到 $M$ 这 $M$ 个自然数。彩民可以在这 $M$ 个数中任意选取 $N$ 个不同的数打圈。每个彩民只能买一张彩票，不同的彩民的彩票上的选择不同。\n\n每次抽奖将抽出两个自然数 $X$ 和 $Y$。如果某人拿到的彩票上，所选 $N$ 个自然数的倒数和，恰好等于 $\\dfrac{X}{Y}$，则他将获得一个纪念品。\n\n已知抽奖结果 $X$ 和 $Y$。现在的问题是，必须准备多少纪念品，才能保证支付所有获奖者的奖品。", "inputFormat": "输入文件有且仅有一行，就是用空格分开的四个整数 $N$，$M$，$X$，$Y$。\n", "outputFormat": "输出文件有且仅有一行，即所需准备的纪念品数量。\n", "hint": "$1 \\leq X, Y \\leq 100$，$1 \\leq N \\leq 10$，$1 \\leq M \\leq 50$。\n\n输入数据保证输出结果不超过 $10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2002] Lottery", "background": "", "description": "A set of lottery tickets is issued in a certain place. Each ticket displays the $M$ natural numbers from $1$ to $M$. A player may circle any $N$ distinct numbers among these $M$ numbers. Each player can buy only one ticket, and different players choose different sets.\n\nEach draw picks two natural numbers $X$ and $Y$. If, on someone's ticket, the sum of the reciprocals of the $N$ selected natural numbers is exactly equal to $\\dfrac{X}{Y}$, then they will receive a souvenir.\n\nGiven the draw result $X$ and $Y$, determine how many souvenirs must be prepared to ensure all winners can be awarded.", "inputFormat": "The input contains exactly one line with four integers $N$, $M$, $X$, $Y$ separated by spaces.", "outputFormat": "Output one line with the required number of souvenirs.", "hint": "$1 \\leq X, Y \\leq 100$, $1 \\leq N \\leq 10$, $1 \\leq M \\leq 50$.\n\nThe input guarantees the output does not exceed $10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2002] 彩票", "background": "", "description": "某地发行一套彩票。彩票上写有 $1$ 到 $M$ 这 $M$ 个自然数。彩民可以在这 $M$ 个数中任意选取 $N$ 个不同的数打圈。每个彩民只能买一张彩票，不同的彩民的彩票上的选择不同。\n\n每次抽奖将抽出两个自然数 $X$ 和 $Y$。如果某人拿到的彩票上，所选 $N$ 个自然数的倒数和，恰好等于 $\\dfrac{X}{Y}$，则他将获得一个纪念品。\n\n已知抽奖结果 $X$ 和 $Y$。现在的问题是，必须准备多少纪念品，才能保证支付所有获奖者的奖品。", "inputFormat": "输入文件有且仅有一行，就是用空格分开的四个整数 $N$，$M$，$X$，$Y$。\n", "outputFormat": "输出文件有且仅有一行，即所需准备的纪念品数量。\n", "hint": "$1 \\leq X, Y \\leq 100$，$1 \\leq N \\leq 10$，$1 \\leq M \\leq 50$。\n\n输入数据保证输出结果不超过 $10^5$。", "locale": "zh-CN"}}}
{"pid": "P2237", "type": "P", "difficulty": 4, "samples": [["10 3\ndab\nba\nab\ndaa\naa\naaa\naab\nabc\nac\ndadba\n4 a\n2 da\n4 da", "3\n1\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "枚举"], "title": "[USACO14FEB] Auto-complete S", "background": "", "description": "Bessie the cow has a new cell phone and enjoys sending text messages, although she keeps making spelling errors since she has trouble typing on such a small screen with her large hooves.  Farmer John has agreed to help her by writing an auto-completion app that takes a partial word and suggests how to complete it.\n\nThe auto-completion app has access to a dictionary of W words, each consisting of lowercase letters in the range a..z, where the total number of letters among all words is at most 1,000,000.  The app is given as input a list of N partial words (1 <= N <= 1000), each containing at most 1000 lowercase letters.  Along with each partial word i, an integer K\\_i is also provided, such that the app must find the (K\\_i)th word in alphabetical order that has partial word i as a prefix.  That is, if one ordered all of the valid completions of the ith partial word, the app should output the completion that is (K\\_i)th in this sequence.\n", "inputFormat": "\\* Line 1: Two integers: W and N.\n\n\n\\* Lines 2..W+1: Line i+1: The ith word in the dictionary.\n\n\n\\* Lines W+2..W+N+1: Line W+i+1: A single integer K\\_i followed by a    partial word.\n", "outputFormat": "\\* Lines 1..N: Line i should contain the index within the dictionary\n\n(an integer in the range 1..W) of the (K\\_i)th completion (in\n\nalphabetical order) of the ith partial word, or -1 if there\n\nare less than K\\_i completions.\n", "hint": "OUTPUT DETAILS:\n\n\nThe completions of a are {aa,aaa,aab,ab,abc,ac}. The 4th is ab, which\n\nis listed on line 3 of the dictionary.  The completions of da are\n\n{daa,dab,dadba}. The 2nd is dab, listed on line 1 of the dictionary.\n\nThere is no 4th completion of da.\n\n\nSource: USACO 2014 Feburary Contest, Silver\n", "locale": "en", "translations": {"en": {"title": "[USACO14FEB] Auto-complete S", "background": "", "description": "Bessie the cow has a new cell phone and enjoys sending text messages, although she keeps making spelling errors since she has trouble typing on such a small screen with her large hooves.  Farmer John has agreed to help her by writing an auto-completion app that takes a partial word and suggests how to complete it.\n\nThe auto-completion app has access to a dictionary of W words, each consisting of lowercase letters in the range a..z, where the total number of letters among all words is at most 1,000,000.  The app is given as input a list of N partial words (1 <= N <= 1000), each containing at most 1000 lowercase letters.  Along with each partial word i, an integer K\\_i is also provided, such that the app must find the (K\\_i)th word in alphabetical order that has partial word i as a prefix.  That is, if one ordered all of the valid completions of the ith partial word, the app should output the completion that is (K\\_i)th in this sequence.\n", "inputFormat": "\\* Line 1: Two integers: W and N.\n\n\n\\* Lines 2..W+1: Line i+1: The ith word in the dictionary.\n\n\n\\* Lines W+2..W+N+1: Line W+i+1: A single integer K\\_i followed by a    partial word.\n", "outputFormat": "\\* Lines 1..N: Line i should contain the index within the dictionary\n\n(an integer in the range 1..W) of the (K\\_i)th completion (in\n\nalphabetical order) of the ith partial word, or -1 if there\n\nare less than K\\_i completions.\n", "hint": "OUTPUT DETAILS:\n\n\nThe completions of a are {aa,aaa,aab,ab,abc,ac}. The 4th is ab, which\n\nis listed on line 3 of the dictionary.  The completions of da are\n\n{daa,dab,dadba}. The 2nd is dab, listed on line 1 of the dictionary.\n\nThere is no 4th completion of da.\n\n\nSource: USACO 2014 Feburary Contest, Silver\n", "locale": "en"}, "zh-CN": {"title": "[USACO14FEB] Auto-complete S", "background": null, "description": "有 $w$ 个由小写字符构成的字典和 $n$ 个询问。每个询问由一个字符串 $s$ 和一个整数 $k$ 构成，求在字典序排序下字典内由 $s$ 为前缀的第 $k$ 字符串在输入字典的位置。若不存在，则输出 $-1$", "inputFormat": "第 $1$ 行是两个整数 $w$ 和 $n$ \n\n第 $2$ 行到第 $w$ + $1$ 行为字典中的第 $i$ - $1$ 个，每行由字符串构成（$i$ 指输入的第 $i$ 行）\n\n第 $w$ + $2$ 行到第 $w$ + $n$ + $1$ 行由一个整数 $k$ 和一个字符串 $s$ 构成", "outputFormat": "第 $1$ 行到第 $n$ 行是对于每个询问的结果，由一个整数构成", "hint": "对于 $100\\%$ 的数据，$w \\le 30000$，$1\\le n \\le 3000$，字典内每个字符串的长度均小于等于 $1000$，且字典的单词总长不超过 $10 ^ 6$。\n\n样例解释：\n\n对于第 $1$ 个询问，含义为在字典中找到以 ```a``` 为前缀且按字典序排序后第 $4$ 个字符串，而字典中以 ```a``` 为前缀且按字典序排序后为 $\\{$  ```aa```，```aaa```，```aab```，```ab```，```abc```，```ac``` $\\}$，第 $4$ 个是 ```ab```，其在输入中为第 $3$ 个，故输出为 $3$\n\n同理，对于第 $2$ 个和第 $3$ 个询问是在字典中找到以 ```da``` 为前缀且按字典序排序后的第 $2$ 和第 $4$ 个字符串。而以 ```da``` 为前缀的字符串按字典序排序后为 $\\{$```daa```，```dab```，```dadba``` $\\}$，故第 $2$ 个为 ```dab``` ，其在输入中为第 $1$ 个，故第 $2$ 个输出为 $1$，而该序列中没有第 $4$ 个，故第 $3$ 个询问无解，输出 $-1$\n\n来源：USACO 2014 Feburary Contest Silver\n\n翻译：@[zymooll](/user/289296)", "locale": "zh-CN"}}}
{"pid": "P2238", "type": "P", "difficulty": 6, "samples": [["5 5\n....7\n.21.8\n9346.\n..45.\n.8...", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "O2优化", "洛谷月赛", "状压 DP"], "title": "逛庙会", "background": "本题时限 3s，请考虑常数优化或者读入优化。（std 没有特别进行优化）", "description": "城市里正在举行庙会。庙会里有很多摊位。庙会的会场是一个南北向 $H$ 个摊位、东西向 $W$ 个摊位组成的大型方阵。从北开始第 $i$ 行、西开始第 $j$ 列的一个摊位，我们表示为 $(i,j)$。\n\n正妹现在处于庙会的 $(1,1)$ 位置，然后要往东或者往南走，一直走到 $(H,W)$ 跟小 B 汇合。$(1,1)$ 点、$(H,W)$ 点和它们的东西南北邻近一个摊位都没有开张。别的地方也可能有一些摊位没有开张。\n\n正妹是个吃货。只要到达一个摊位，总是经不起小吃的诱惑。如果这个摊位开张了，而且该摊位小吃还没有买过，就会买下这个摊位的小吃。无论这个摊位是否有开张，其东西南北直接相邻的摊位小吃的香味也很诱人，如果邻近的摊位的小吃没有买过，那么就在这些邻近（上下左右）的且没有买过的摊位（假设有 $r$ 个）中，买其中的 $r-1$ 个摊位的小吃。然后继续往东或者南走。同一家小摊，不会购买多次。\n\n虽然正妹是个吃货，但是零用钱还是很有限。可是她又是管不住自己，就是要买买买。所以她希望知道自己最少能吃掉多少钱的东西。", "inputFormat": "第一行两个整数 $H$ 和 $W$。\n\n接下来 $H$ 行，每行一个长度为 $W$ 的字符串，**没有空格隔开**，是 $1\\sim9$ 或者 `.` 中的一个，数字表示价格，`.` 表示没有开张。", "outputFormat": "一个整数，表示最少花掉的钱。", "hint": "```plain\n5 5\noooo7\n.2xoo\n9346o\n..45o\n.8..o\n```\n\n样例解释：`o` 为正妹经过的路线，`x` 为她顺便买的小吃。当走到 $(2,4)$ 时，左下右都有开张且没有买过的摊位，于是买左和右，继续沿着路线走。由于之后路线没有经过没有买过摊位，而且上下左右开张且没买过的摊位不超过 $1$，所以一个都不买了。\n\n对于 $20\\%$ 的数据，开张的摊位不超过 $20$；\n\n对于 $100\\%$ 的数据，保证 $3\\le H,W\\le1000$。\n\n特别注意：数据是在 Windows 生成，输入数据换行符可能是 `\\r\\n`（两个字符）或者 `\\n`。而评测机是 Linux。请特别注意。不接受赛后以「本地能过，评测 WA」的理由申诉。\n\n参考读入方式（节选自 std）：\n\n```cpp\nfor (i = 0; i < H; ++i) {\n\tscanf(\"%s\", in);\n\tfor (j = 0; j < W; ++j) {\n\t\tshop[i][j] = blabla..\n\t}\n}\n```", "locale": "zh-CN", "translations": {"en": {"title": "Visiting the Temple Fair", "background": "The time limit is 3 s. Please consider constant-factor optimization or fast I/O. (The std does not use special optimizations.)", "description": "A temple fair is being held in the city. There are many stalls at the fair. The venue forms a large grid with $H$ stalls from north to south and $W$ stalls from west to east. A stall at the $i$-th row from the north and the $j$-th column from the west is denoted by $(i, j)$.\n\nThe girl starts at position $(1, 1)$ in the fair and can only move east or south, continuing until she reaches $(H, W)$ to meet Xiao B. The stalls at $(1, 1)$ and $(H, W)$, as well as each of their four directly adjacent stalls (north, south, east, west), are not open. There may also be other stalls that are not open elsewhere.\n\nThe girl is a foodie. Whenever she arrives at a stall, she cannot resist the snacks there. If the stall is open and she has not bought from it before, she will buy the snack at this stall. Regardless of whether the current stall is open, the aromas from its four directly adjacent stalls are tempting as well. Among its directly adjacent open stalls that have not been bought yet (suppose there are $r$ of them), she will buy snacks from exactly $r - 1$ of these adjacent stalls. She then continues moving east or south. She will never buy from the same stall more than once.\n\nAlthough she is a foodie, her pocket money is limited. She cannot control herself and will keep buying. Therefore, she wants to know the minimum total amount of money she will spend.", "inputFormat": "The first line contains two integers $H$ and $W$.\n\nThe next $H$ lines each contain a string of length $W$ without spaces. Each character is one of $1 \\sim 9$ or `.`. A digit represents the price, and `.` represents a stall that is not open.", "outputFormat": "Output a single integer, the minimum amount of money spent.", "hint": "```plain\n5 5\noooo7\n.2xoo\n9346o\n..45o\n.8..o\n```\n\nExplanation of the illustration: `o` marks the route the girl takes, and `x` marks snacks she buys incidentally. When she reaches $(2, 4)$, the left, down, and right neighbors are open and not yet bought, so she buys the left and right ones, then continues along the route. After that, the route does not pass any not-yet-bought stalls, and each time the number of open and not-yet-bought adjacent stalls is at most $1$, so she buys none of them.\n\nConstraints:\n- For $20\\%$ of the testdata, the number of open stalls does not exceed $20$.\n- For $100\\%$ of the testdata, $3 \\le H, W \\le 1000$.\n\nSpecial note: The testdata was generated on Windows. Line endings in the input may be `\\r\\n` (two characters) or `\\n`. The judge runs on Linux. Please be careful. Appeals like “it passes locally but gets WA on the judge” will not be accepted.\n\nReference input method (excerpt from std):\n\n```cpp\nfor (i = 0; i < H; ++i) {\n\tscanf(\"%s\", in);\n\tfor (j = 0; j < W; ++j) {\n\t\tshop[i][j] = blabla..\n\t}\n}\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "逛庙会", "background": "本题时限 3s，请考虑常数优化或者读入优化。（std 没有特别进行优化）", "description": "城市里正在举行庙会。庙会里有很多摊位。庙会的会场是一个南北向 $H$ 个摊位、东西向 $W$ 个摊位组成的大型方阵。从北开始第 $i$ 行、西开始第 $j$ 列的一个摊位，我们表示为 $(i,j)$。\n\n正妹现在处于庙会的 $(1,1)$ 位置，然后要往东或者往南走，一直走到 $(H,W)$ 跟小 B 汇合。$(1,1)$ 点、$(H,W)$ 点和它们的东西南北邻近一个摊位都没有开张。别的地方也可能有一些摊位没有开张。\n\n正妹是个吃货。只要到达一个摊位，总是经不起小吃的诱惑。如果这个摊位开张了，而且该摊位小吃还没有买过，就会买下这个摊位的小吃。无论这个摊位是否有开张，其东西南北直接相邻的摊位小吃的香味也很诱人，如果邻近的摊位的小吃没有买过，那么就在这些邻近（上下左右）的且没有买过的摊位（假设有 $r$ 个）中，买其中的 $r-1$ 个摊位的小吃。然后继续往东或者南走。同一家小摊，不会购买多次。\n\n虽然正妹是个吃货，但是零用钱还是很有限。可是她又是管不住自己，就是要买买买。所以她希望知道自己最少能吃掉多少钱的东西。", "inputFormat": "第一行两个整数 $H$ 和 $W$。\n\n接下来 $H$ 行，每行一个长度为 $W$ 的字符串，**没有空格隔开**，是 $1\\sim9$ 或者 `.` 中的一个，数字表示价格，`.` 表示没有开张。", "outputFormat": "一个整数，表示最少花掉的钱。", "hint": "```plain\n5 5\noooo7\n.2xoo\n9346o\n..45o\n.8..o\n```\n\n样例解释：`o` 为正妹经过的路线，`x` 为她顺便买的小吃。当走到 $(2,4)$ 时，左下右都有开张且没有买过的摊位，于是买左和右，继续沿着路线走。由于之后路线没有经过没有买过摊位，而且上下左右开张且没买过的摊位不超过 $1$，所以一个都不买了。\n\n对于 $20\\%$ 的数据，开张的摊位不超过 $20$；\n\n对于 $100\\%$ 的数据，保证 $3\\le H,W\\le1000$。\n\n特别注意：数据是在 Windows 生成，输入数据换行符可能是 `\\r\\n`（两个字符）或者 `\\n`。而评测机是 Linux。请特别注意。不接受赛后以「本地能过，评测 WA」的理由申诉。\n\n参考读入方式（节选自 std）：\n\n```cpp\nfor (i = 0; i < H; ++i) {\n\tscanf(\"%s\", in);\n\tfor (j = 0; j < W; ++j) {\n\t\tshop[i][j] = blabla..\n\t}\n}\n```", "locale": "zh-CN"}}}
{"pid": "P2239", "type": "P", "difficulty": 3, "samples": [["4 2 3", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "2014", "NOIP 普及组"], "title": "[NOIP 2014 普及组] 螺旋矩阵", "background": "NOIP2014 普及组 T3", "description": "一个 $n$ 行 $ n$ 列的螺旋矩阵可由如下方法生成：\n\n\n从矩阵的左上角（第 $1$ 行第 $1$ 列）出发，初始时向右移动；如果前方是未曾经过的格子，则继续前进，否则右转；重复上述操作直至经过矩阵中所有格子。根据经过顺序，在格子中依次填入 $1, 2, 3, \\dots, n^2$，便构成了一个螺旋矩阵。\n\n\n下图是一个 $n = 4$ 时的螺旋矩阵。\n\n$$\\begin{pmatrix}\n 1 &    2  &   3   &  4 \\\\\n12 &   13  &  14   &  5 \\\\\n11 &   16  &  15   &  6 \\\\\n10 &    9  &   8   &  7 \\\\\n\\end{pmatrix}$$\n\n现给出矩阵大小 $n$ 以及 $i$ 和 $j$，请你求出该矩阵中第 $i$ 行第 $j$ 列的数是多少。\n", "inputFormat": "共一行，包含三个整数 $n$, $i$, $j$，每两个整数之间用一个空格隔开，分别表示矩阵大小、待求的数所在的行号和列号。\n", "outputFormat": "一个整数，表示相应矩阵中第 $i$ 行第 $j$ 列的数。\n", "hint": "【数据说明】\n\n对于 $50\\%$ 的数据，$1 \\leqslant n \\leqslant 100$;\n\n对于 $100\\%$ 的数据，$1 \\leqslant n \\leqslant 30,000,1 \\leqslant i \\leqslant n,1 \\leqslant j \\leqslant n$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Junior] Spiral Matrix", "background": "NOIP 2014 Junior T3.", "description": "A spiral matrix with $n$ rows and $n$ columns can be generated as follows:\n\nStarting from the top-left corner (row $1$, column $1$), initially move to the right. If the cell ahead has not been visited, keep moving forward; otherwise, turn right. Repeat this process until all cells in the matrix have been visited. According to the visiting order, fill the cells with $1, 2, 3, \\dots, n^2$ in sequence to form a spiral matrix.\n\nBelow is the spiral matrix when $n = 4$.\n\n$$\\begin{pmatrix}\n 1 &    2  &   3   &  4 \\\\\n12 &   13  &  14   &  5 \\\\\n11 &   16  &  15   &  6 \\\\\n10 &    9  &   8   &  7 \\\\\n\\end{pmatrix}$$\n\nGiven the matrix size $n$ and $i$ and $j$, please compute the number at row $i$, column $j$ in this matrix.", "inputFormat": "A single line containing three integers $n$, $i$, $j$, separated by a single space. They represent the matrix size, and the row and column of the number to query.", "outputFormat": "A single integer, the number at row $i$, column $j$ in the corresponding matrix.", "hint": "Constraints\n\n- For $50\\%$ of the testdata, $1 \\leqslant n \\leqslant 100$.\n- For $100\\%$ of the testdata, $1 \\leqslant n \\leqslant 30{,}000$; $1 \\leqslant i \\leqslant n$; $1 \\leqslant j \\leqslant n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 普及组] 螺旋矩阵", "background": "NOIP2014 普及组 T3", "description": "一个 $n$ 行 $ n$ 列的螺旋矩阵可由如下方法生成：\n\n\n从矩阵的左上角（第 $1$ 行第 $1$ 列）出发，初始时向右移动；如果前方是未曾经过的格子，则继续前进，否则右转；重复上述操作直至经过矩阵中所有格子。根据经过顺序，在格子中依次填入 $1, 2, 3, \\dots, n^2$，便构成了一个螺旋矩阵。\n\n\n下图是一个 $n = 4$ 时的螺旋矩阵。\n\n$$\\begin{pmatrix}\n 1 &    2  &   3   &  4 \\\\\n12 &   13  &  14   &  5 \\\\\n11 &   16  &  15   &  6 \\\\\n10 &    9  &   8   &  7 \\\\\n\\end{pmatrix}$$\n\n现给出矩阵大小 $n$ 以及 $i$ 和 $j$，请你求出该矩阵中第 $i$ 行第 $j$ 列的数是多少。\n", "inputFormat": "共一行，包含三个整数 $n$, $i$, $j$，每两个整数之间用一个空格隔开，分别表示矩阵大小、待求的数所在的行号和列号。\n", "outputFormat": "一个整数，表示相应矩阵中第 $i$ 行第 $j$ 列的数。\n", "hint": "【数据说明】\n\n对于 $50\\%$ 的数据，$1 \\leqslant n \\leqslant 100$;\n\n对于 $100\\%$ 的数据，$1 \\leqslant n \\leqslant 30,000,1 \\leqslant i \\leqslant n,1 \\leqslant j \\leqslant n$。\n", "locale": "zh-CN"}}}
{"pid": "P2240", "type": "P", "difficulty": 2, "samples": [["4 50\n10 60\n20 100\n25 100\n15 45\n", "240.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "【深基12.例1】部分背包问题", "background": "", "description": "阿里巴巴走进了装满宝藏的藏宝洞。藏宝洞里面有 $N(N \\le 100)$ 堆金币，第 $i$ 堆金币的总重量和总价值分别是 $m_i,v_i(1\\le m_i,v_i \\le 100)$。阿里巴巴有一个承重量为 $T(T \\le 1000)$ 的背包，但并不一定有办法将全部的金币都装进去。他想装走尽可能多价值的金币。所有金币都可以随意分割，分割完的金币重量价值比（也就是单位价格）不变。请问阿里巴巴最多可以拿走多少价值的金币？", "inputFormat": "第一行两个整数 $N,T$。\n\n接下来 $N$ 行，每行两个整数 $m_i,v_i$。", "outputFormat": "一个实数表示答案，输出两位小数", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[Deep Basics 12.Example 1] Fractional Knapsack Problem", "background": "", "description": "Alibaba walked into a treasure cave full of treasures. In the cave, there are $N(N \\le 100)$ piles of gold coins. For the $i$-th pile, the total weight and total value are $m_i,v_i(1\\le m_i,v_i \\le 100)$. Alibaba has a knapsack with capacity $T(T \\le 1000)$, but it may not be possible to pack all the gold coins. He wants to take away gold coins with as much total value as possible. All gold coins can be divided freely, and after dividing, the value-to-weight ratio (i.e., the unit price) stays the same. Find the maximum total value of gold coins that Alibaba can take away.", "inputFormat": "The first line contains two integers $N, T$.\n\nThe next $N$ lines each contain two integers $m_i, v_i$.", "outputFormat": "Output one real number as the answer, printed to two decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基12.例1】部分背包问题", "background": "", "description": "阿里巴巴走进了装满宝藏的藏宝洞。藏宝洞里面有 $N(N \\le 100)$ 堆金币，第 $i$ 堆金币的总重量和总价值分别是 $m_i,v_i(1\\le m_i,v_i \\le 100)$。阿里巴巴有一个承重量为 $T(T \\le 1000)$ 的背包，但并不一定有办法将全部的金币都装进去。他想装走尽可能多价值的金币。所有金币都可以随意分割，分割完的金币重量价值比（也就是单位价格）不变。请问阿里巴巴最多可以拿走多少价值的金币？", "inputFormat": "第一行两个整数 $N,T$。\n\n接下来 $N$ 行，每行两个整数 $m_i,v_i$。", "outputFormat": "一个实数表示答案，输出两位小数", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2241", "type": "P", "difficulty": 2, "samples": [["2 3", "8 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "1997", "NOIP 普及组", "枚举"], "title": "统计方形（数据加强版）", "background": "1997年普及组第一题\n", "description": "有一个 $n \\times m$ 方格的棋盘，求其方格包含多少正方形、长方形（不包含正方形）。", "inputFormat": "一行，两个正整数 $n,m$（$n \\leq 5000,m \\leq 5000$）。\n", "outputFormat": "一行，两个正整数，分别表示方格包含多少正方形、长方形（不包含正方形）。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Counting Squares (Enhanced Testdata Version)", "background": "1997 Junior Problem 1.", "description": "Given an $n \\times m$ grid board, compute how many squares and how many rectangles (excluding squares) it contains.", "inputFormat": "One line: two positive integers $n,m$ ($n \\leq 5000,m \\leq 5000$).", "outputFormat": "One line: two positive integers, the numbers of squares and rectangles (excluding squares) in the grid, respectively.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "统计方形（数据加强版）", "background": "1997年普及组第一题\n", "description": "有一个 $n \\times m$ 方格的棋盘，求其方格包含多少正方形、长方形（不包含正方形）。", "inputFormat": "一行，两个正整数 $n,m$（$n \\leq 5000,m \\leq 5000$）。\n", "outputFormat": "一行，两个正整数，分别表示方格包含多少正方形、长方形（不包含正方形）。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2242", "type": "P", "difficulty": 2, "samples": [["18 4\n3 4 6 8 14 15 16 17 21 25 26 27 30 31 40 41 42 43\n", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "贪心", "线性数据结构"], "title": "公路维修问题", "background": null, "description": "由于长期没有得到维修，A 国的高速公路上出现了 $n$ 个坑。为了尽快填补好这 $n$ 个坑，A 国决定对 $m$ 处地段采取交通管制。为了求解方便，假设 A 国的高速公路只有一条，而且是笔直的。现在给出 $n$ 个坑的位置，请你计算，最少要对多远的路段实施交通管制？", "inputFormat": "输入数据共两行，第一行为两个正整数 $n, m(2\\le m \\le n\\le 15000)$。第二行给出了 $n$ 个坑的坐标（坐标值均在长整范围内，按从小到大的顺序给出，且不会有两个点坐标相同）。", "outputFormat": "仅一行，为最小长度和。", "hint": "【样例说明】\n\n需要在整条路上取 $4$ 小段，这 $4$ 段路需要包含所有坑。取 $[3,8],[14,21],[25,31],[40,43]$ 这四段即可，长度总和为 $6+8+7+4=25$。", "locale": "zh-CN", "translations": {"en": {"title": "Highway Maintenance Problem", "background": "", "description": "Due to long-term lack of maintenance, there are $n$ potholes on Country A’s highway. To repair these $n$ potholes quickly, Country A decides to impose traffic control on $m$ segments of the road. For simplicity, assume there is only one highway, and it is straight. Given the positions of the $n$ potholes, compute the minimal total length of road that must be under traffic control.", "inputFormat": "The input consists of two lines.\n- The first line contains two positive integers $n, m$ ($2 \\le m \\le n \\le 15000$).\n- The second line contains the coordinates of the $n$ potholes (each within the 64-bit signed integer range), given in strictly increasing order with no duplicate coordinates.", "outputFormat": "Output a single line: the minimal total length.", "hint": "[Sample Explanation]\n\nThe controlled segments are: $3-8, 14-21, 25-31, 40-43$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "公路维修问题", "background": null, "description": "由于长期没有得到维修，A 国的高速公路上出现了 $n$ 个坑。为了尽快填补好这 $n$ 个坑，A 国决定对 $m$ 处地段采取交通管制。为了求解方便，假设 A 国的高速公路只有一条，而且是笔直的。现在给出 $n$ 个坑的位置，请你计算，最少要对多远的路段实施交通管制？", "inputFormat": "输入数据共两行，第一行为两个正整数 $n, m(2\\le m \\le n\\le 15000)$。第二行给出了 $n$ 个坑的坐标（坐标值均在长整范围内，按从小到大的顺序给出，且不会有两个点坐标相同）。", "outputFormat": "仅一行，为最小长度和。", "hint": "【样例说明】\n\n需要在整条路上取 $4$ 小段，这 $4$ 段路需要包含所有坑。取 $[3,8],[14,21],[25,31],[40,43]$ 这四段即可，长度总和为 $6+8+7+4=25$。", "locale": "zh-CN"}}}
{"pid": "P2244", "type": "P", "difficulty": 5, "samples": [["4\n2 2 3\n0\n1 2\n1 2\n", "3 1 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "选举预测", "background": "科学院的领袖Dunkelheit 的任期，随着局势的平复很快就要结束了。于是，这次具有非凡意义的科学院新领袖的选举很快就要开始了。\n", "description": "选举的第一步是辩论赛。它的规则是这样的：如果当前剩下的候选人多于 $2$ 人，那么就从中任选 $2$ 人进行辩论。输者退出比赛，胜利者继续留在比赛中，如此直到只剩下一个候选人，他就取得了辩论赛的胜利。  \n\n辩论赛的胜者在后面的选举中将会更占优势，所以说人们都很关注这次比赛的结果，历史学家 Geheimnis 也不例外。 \n\n他收集了所有 $n$ 个候选人的资料，发现如果两个候选人以前曾经比赛过，那么这两个人再次比赛的时候比赛结果是很难改变的（可以认为是不可能）。按照 Geheimnis 掌握的情报，你需要帮助他判断那些候选人有可能取得胜利。\n", "inputFormat": "第一行包含一个正整数 $n$，表示候选人的数目。\n\n之后 $n$ 行，候选人从 $1$ 开始编号，第 $i+1$ 行描述第 $i$ 个候选人。第一个数为 $k$，后面 $k$ 个编号，表示候选人 $i$ 之前赢过的候选人。\n", "outputFormat": "输出一行。第一个数为 $c$，表示有 $c$ 个候选人有可能取得胜利；之后 $c$ 个数表示他们的编号。\n", "hint": "【数据范围】   \n对于 $50\\%$ 的数据，$n \\le 200$。   \n对于 $100\\%$ 的数据，$n \\le 10^6$，胜负关系不会超过 $10^6$ 对。\n", "locale": "zh-CN", "translations": {"en": {"title": "Election Prediction", "background": "As the situation stabilizes, the term of the Academy of Sciences' leader, Dunkelheit, is about to end soon. Therefore, the election for the new leader of the Academy of Sciences, which carries extraordinary significance, is about to begin.", "description": "The first stage of the election is a debate tournament. Its rules are as follows: if the number of remaining candidates is greater than $2$, then any $2$ of them are chosen to debate. The loser exits the tournament, and the winner stays. This continues until only one candidate remains, who is then the winner of the debate tournament.\n\nThe winner of the debate tournament will have an advantage in the subsequent election, so people are very concerned about the result of this tournament, including the historian Geheimnis.\n\nHe gathered information on all $n$ candidates and found that if two candidates have competed before, then the result is very unlikely to change when they meet again (you may assume it will not change). Based on the intelligence Geheimnis has, you need to determine which candidates could possibly become the winner.", "inputFormat": "The first line contains a positive integer $n$, the number of candidates.\n\nThen follow $n$ lines. Candidates are indexed from $1$. The $(i+1)$-th line describes candidate $i$. The first number is $k$, followed by $k$ indices, indicating the candidates that candidate $i$ has previously defeated.", "outputFormat": "Output one line. The first number is $c$, the number of candidates who can possibly win; then output $c$ numbers denoting their indices.", "hint": "Constraints  \nFor $50\\%$ of the testdata, $n \\le 200$.  \nFor $100\\%$ of the testdata, $n \\le 10^6$, and the number of win–loss pairs does not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "选举预测", "background": "科学院的领袖Dunkelheit 的任期，随着局势的平复很快就要结束了。于是，这次具有非凡意义的科学院新领袖的选举很快就要开始了。\n", "description": "选举的第一步是辩论赛。它的规则是这样的：如果当前剩下的候选人多于 $2$ 人，那么就从中任选 $2$ 人进行辩论。输者退出比赛，胜利者继续留在比赛中，如此直到只剩下一个候选人，他就取得了辩论赛的胜利。  \n\n辩论赛的胜者在后面的选举中将会更占优势，所以说人们都很关注这次比赛的结果，历史学家 Geheimnis 也不例外。 \n\n他收集了所有 $n$ 个候选人的资料，发现如果两个候选人以前曾经比赛过，那么这两个人再次比赛的时候比赛结果是很难改变的（可以认为是不可能）。按照 Geheimnis 掌握的情报，你需要帮助他判断那些候选人有可能取得胜利。\n", "inputFormat": "第一行包含一个正整数 $n$，表示候选人的数目。\n\n之后 $n$ 行，候选人从 $1$ 开始编号，第 $i+1$ 行描述第 $i$ 个候选人。第一个数为 $k$，后面 $k$ 个编号，表示候选人 $i$ 之前赢过的候选人。\n", "outputFormat": "输出一行。第一个数为 $c$，表示有 $c$ 个候选人有可能取得胜利；之后 $c$ 个数表示他们的编号。\n", "hint": "【数据范围】   \n对于 $50\\%$ 的数据，$n \\le 200$。   \n对于 $100\\%$ 的数据，$n \\le 10^6$，胜负关系不会超过 $10^6$ 对。\n", "locale": "zh-CN"}}}
{"pid": "P2245", "type": "P", "difficulty": 5, "samples": [["4 5\n1 2 5\n1 3 2\n2 3 11\n2 4 6\n3 4 4\n3\n2 3\n1 4\n1 2\n", "5\n4\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "Kruskal 重构树", "最近公共祖先 LCA"], "title": "星际导航", "background": "", "description": "$\\text{sideman}$ 做好了回到 $\\text{Gliese}$ 星球的硬件准备，但是 $\\text{sideman}$ 的导航系统还没有完全设计好。为了方便起见，我们可以认为宇宙是一张有 $N$ 个顶点和 $M$ 条边的带权无向图，顶点表示各个星系，两个星系之间有边就表示两个星系之间可以直航，而边权则是航行的危险程度。\n\n$\\text{sideman}$ 现在想把危险程度降到最小，具体地来说，就是对于若干个询问 $(A, B)$，$\\text{sideman}$ 想知道从顶点 $A$ 航行到顶点 $B$ 所经过的最危险的边的危险程度值最小可能是多少。作为 $\\text{sideman}$ 的同学，你们要帮助 $\\text{sideman}$ 返回家园，兼享受安全美妙的宇宙航行。所以这个任务就交给你了。", "inputFormat": "第一行包含两个正整数 $N$ 和 $M$，表示点数和边数。\n\n之后 $M$ 行，每行三个整数 $A$，$B$ 和 $L$，表示顶点 $A$ 和 $B$ 之间有一条边长为 $L$ 的边。顶点从 $1$ 开始标号。\n\n下面一行包含一个正整数 $Q$，表示询问的数目。\n\n之后 $Q$ 行，每行两个整数 $A$ 和 $B$，表示询问 $A$ 和 $B$ 之间最危险的边危险程度的可能最小值。", "outputFormat": "对于每个询问， 在单独的一行内输出结果。如果两个顶点之间不可达， 输出 $\\text{impossible}$。", "hint": "对于 $40\\%$ 的数据，满足 $N \\leq 1000, M \\leq 3000, Q \\leq 1000$。\n\n对于 $80\\%$ 的数据，满足 $N \\leq 10000, M \\leq 10^5, Q \\leq 1000$。\n\n对于 $100\\%$ 的数据，满足 $N \\leq 10^5, M \\leq 3 \\times 10^5, Q \\leq 10^5, L \\leq 10^9$。数据不保证没有重边和自环。", "locale": "zh-CN", "translations": {"en": {"title": "Interstellar Navigation", "background": "", "description": "$\\text{sideman}$ has prepared the hardware to return to the planet $\\text{Gliese}$, but $\\text{sideman}$'s navigation system is not fully designed yet. For convenience, we can regard the universe as a weighted undirected graph with $N$ vertices and $M$ edges. Vertices represent galaxies, an edge between two galaxies means there is a direct flight between them, and the edge weight is the danger level of the voyage.\n\nNow $\\text{sideman}$ wants to minimize the danger level. Specifically, for several queries $(A, B)$, $\\text{sideman}$ wants to know the minimal possible value of the danger level of the most dangerous edge along a route from vertex $A$ to vertex $B$. As $\\text{sideman}$'s classmates, you should help $\\text{sideman}$ return home and enjoy a safe and beautiful journey through the universe. So this task is yours.", "inputFormat": "The first line contains two positive integers $N$ and $M$, the number of vertices and edges.\n\nEach of the next $M$ lines contains three integers $A$, $B$, and $L$, indicating that there is an edge of length $L$ between vertices $A$ and $B$. Vertices are numbered starting from $1$.\n\nThe next line contains a positive integer $Q$, the number of queries.\n\nEach of the next $Q$ lines contains two integers $A$ and $B$, asking for the minimal possible value of the danger level of the most dangerous edge along any path between $A$ and $B$.", "outputFormat": "For each query, output the result on a separate line. If the two vertices are not reachable from each other, output $\\text{impossible}$.", "hint": "For $40\\%$ of the testdata, $N \\leq 1000$, $M \\leq 3000$, $Q \\leq 1000$.\n\nFor $80\\%$ of the testdata, $N \\leq 10000$, $M \\leq 10^5$, $Q \\leq 1000$.\n\nFor $100\\%$ of the testdata, $N \\leq 10^5$, $M \\leq 3 \\times 10^5$, $Q \\leq 10^5$, $L \\leq 10^9$. The testdata do not guarantee the absence of parallel edges and self-loops.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "星际导航", "background": "", "description": "$\\text{sideman}$ 做好了回到 $\\text{Gliese}$ 星球的硬件准备，但是 $\\text{sideman}$ 的导航系统还没有完全设计好。为了方便起见，我们可以认为宇宙是一张有 $N$ 个顶点和 $M$ 条边的带权无向图，顶点表示各个星系，两个星系之间有边就表示两个星系之间可以直航，而边权则是航行的危险程度。\n\n$\\text{sideman}$ 现在想把危险程度降到最小，具体地来说，就是对于若干个询问 $(A, B)$，$\\text{sideman}$ 想知道从顶点 $A$ 航行到顶点 $B$ 所经过的最危险的边的危险程度值最小可能是多少。作为 $\\text{sideman}$ 的同学，你们要帮助 $\\text{sideman}$ 返回家园，兼享受安全美妙的宇宙航行。所以这个任务就交给你了。", "inputFormat": "第一行包含两个正整数 $N$ 和 $M$，表示点数和边数。\n\n之后 $M$ 行，每行三个整数 $A$，$B$ 和 $L$，表示顶点 $A$ 和 $B$ 之间有一条边长为 $L$ 的边。顶点从 $1$ 开始标号。\n\n下面一行包含一个正整数 $Q$，表示询问的数目。\n\n之后 $Q$ 行，每行两个整数 $A$ 和 $B$，表示询问 $A$ 和 $B$ 之间最危险的边危险程度的可能最小值。", "outputFormat": "对于每个询问， 在单独的一行内输出结果。如果两个顶点之间不可达， 输出 $\\text{impossible}$。", "hint": "对于 $40\\%$ 的数据，满足 $N \\leq 1000, M \\leq 3000, Q \\leq 1000$。\n\n对于 $80\\%$ 的数据，满足 $N \\leq 10000, M \\leq 10^5, Q \\leq 1000$。\n\n对于 $100\\%$ 的数据，满足 $N \\leq 10^5, M \\leq 3 \\times 10^5, Q \\leq 10^5, L \\leq 10^9$。数据不保证没有重边和自环。", "locale": "zh-CN"}}}
{"pid": "P2246", "type": "P", "difficulty": 4, "samples": [["HhEeLlLlOoWwOoRrLlDd", "1536"], ["Gou Li Guo Jia Sheng Si Yi\nQi Yin Huo Fu Bi Qu Zhi\nRiver can feed people\nAlso can race boats\nHall Ellen Ok Words locked ", "273"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "O2优化", "洛谷月赛"], "title": "SAC#1 - Hello World（升级版）", "background": "一天，智障的 pipapi 正在看某辣鸡讲义学程序设计。", "description": "在讲义的某一面，他看见了一篇文章。这篇文章由英文字母（大小写均有）、数字、和空白字符（制表/空格/回车）构成。\n\npipapi 想起了他最近刚刚学会写的 `Hello World` 程序。他非常好奇，这篇文章中，`Hello World` 作为子序列到底出现过多少次呢？（**忽略大小写和空格**）\n\n两个子序列相同当且仅当它们每一个字符所在的位置都相同。\n\n\n由于答案可能很大，请输出答案对 ${10}^9+7$ 取模的余数。", "inputFormat": "输入包含若干行，这些行的内容共同构成一篇文章。\n\n文章以 `EOF`（文件结尾）结束。", "outputFormat": "输出仅包含一个整数，表示这篇文章中 `Hello World` 出现的次数。", "hint": "记 $n$ 为输入的文章的长度（字符数）。\n\n对于 $20\\%$ 的数据，$n \\le 20$。\n\n对于 $50\\%$ 的数据，$n \\le 500$。\n\n对于所有的数据，$15 \\le n \\le 500000$。", "locale": "zh-CN", "translations": {"en": {"title": "SAC#1 - Hello World (Enhanced Version)", "background": "One day, the silly pipapi was studying programming with a rather poor handout.", "description": "On one page of the handout, he saw an article. This article consists of English letters (both uppercase and lowercase), digits, and whitespace characters (tab/space/newline).\n\npipapi recalled the `Hello World` program he had just learned to write. He was very curious: in this article, how many times does `Hello World` occur as a subsequence? (**ignoring case and spaces**)\n\nTwo subsequences are the same if and only if the positions of every character are identical.\n\nSince the answer may be large, please output the answer modulo ${10}^9+7$.", "inputFormat": "The input contains several lines, which together form an article.\n\nThe article ends at `EOF` (end of file).", "outputFormat": "Output only a single integer, representing how many times `Hello World` appears in the article.", "hint": "Let $n$ be the length of the input article (number of characters).\n\nFor $20\\%$ of the testdata, $n \\le 20$.\n\nFor $50\\%$ of the testdata, $n \\le 500$.\n\nFor all the testdata, $15 \\le n \\le 500000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC#1 - Hello World（升级版）", "background": "一天，智障的 pipapi 正在看某辣鸡讲义学程序设计。", "description": "在讲义的某一面，他看见了一篇文章。这篇文章由英文字母（大小写均有）、数字、和空白字符（制表/空格/回车）构成。\n\npipapi 想起了他最近刚刚学会写的 `Hello World` 程序。他非常好奇，这篇文章中，`Hello World` 作为子序列到底出现过多少次呢？（**忽略大小写和空格**）\n\n两个子序列相同当且仅当它们每一个字符所在的位置都相同。\n\n\n由于答案可能很大，请输出答案对 ${10}^9+7$ 取模的余数。", "inputFormat": "输入包含若干行，这些行的内容共同构成一篇文章。\n\n文章以 `EOF`（文件结尾）结束。", "outputFormat": "输出仅包含一个整数，表示这篇文章中 `Hello World` 出现的次数。", "hint": "记 $n$ 为输入的文章的长度（字符数）。\n\n对于 $20\\%$ 的数据，$n \\le 20$。\n\n对于 $50\\%$ 的数据，$n \\le 500$。\n\n对于所有的数据，$15 \\le n \\le 500000$。", "locale": "zh-CN"}}}
{"pid": "P2247", "type": "P", "difficulty": 5, "samples": [["4 4 2\n1 2\n2 3\n3 4\n4 1", "1 3"], ["4 6 2\n1 2\n2 3\n3 4\n4 1\n1 3\n2 4 ", "How oversuspicious you are, SOL!"], ["4 0 2", "Poor SOL!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "SAC#1 - ACOJ云评测计划", "background": "本题由世界上最蒟蒻最辣鸡最撒比的 SOL 提供。\n\n寂月城网站是完美信息教室的官网。地址：http://191.101.11.174/mgzd 。", "description": "ACOJ 的服务器简直是差到了一个令人发指的地步。于是 SAC 的出题人，也就是傻逼 SOL，不得不强制要求每一个通过下载 ACOJ 软件包而搭建的分站，都为主站启动云端评测服务。\n\n云评测服务是由网络来连接的。这样的网络连接是双向的；但是由于地理位置等因素的限制，并不是任意两台服务器都可以直接相连。ACOJ 主站已经得到了可以直连的服务器的表，其中包含 $n$ 个分站（包括主站）以及它们的 $m$ 条连接情况，可以根据这个来分配各个分站的任务。\n\n有一些分站的服主是 SOL 的脑残粉。他们会无条件地将他们的服务器提供给 SOL。这些 ACOJ 分站称作“好站”。但是还有一些分站的服主是 SOL 黑。他们虽然拿到了 ACOJ 的服务端，但是并不愿意为 SOL 提供资源，于是利用黑科技关掉了云服务。也就是说，虽然主站仍然认为这些站点存在，但是它们不会起到任何作用——既不能传递通信，也不能进行评测。它们称作“坏站”。\n\n经过千辛万苦的调查，SOL 确定了 ACOJ 云评测系统中有最多 $k$ 个坏站存在，而且这 $k$ 个坏站似乎会使得 ACOJ 的云网络不再联通！大危机！\n\n但是 SOL 太弱智了，并不能确定是哪 $k$ 个。于是他请你来帮他找出任意一组可能会使得网络不再联通的 $k$ 个站点，以便加强防范。\n", "inputFormat": "输入包含 $m+1$ 行。\n\n第 $1$ 行 $3$ 个整数 $n,m,k$。\n\n接下来 $m$ 行，每行两个整数 $a,b$，表示标号为 $a$ 和 $b$ 的站点可以直接相连。", "outputFormat": "输出包含 $1$ 行。\n\n不超过 $k$ 个整数，表示能够将原图割开的任意一组节点组合。\n\n因为使用了 Special Judge，所以节点的顺序并不用担心。只需要满足能够割开原图即可。\n\n如果不存在这样的站点集合，输出 `How oversuspicious you are, SOL!`；如果网络不存在任何坏站时本来就无法连通，输出 `Poor SOL!`。", "hint": "对于 $20\\%$ 的数据，$n \\le 15$；\n\n对于另外 $20\\%$ 的数据，$n \\le 100$，$k=1$；\n\n对于另外 $20\\%$ 的数据，$n \\le 100$，$k=2$；\n\n对于 $100\\%$ 的数据，$3 \\le  n\\le 500$，$k \\le 3$，$2\\le n - k$，云网络不存在自环和重边。", "locale": "zh-CN", "translations": {"en": {"title": "SAC#1 - ACOJ Cloud Judging Plan", "background": "This problem is provided by SOL.\n\nThe Jiyue City website is the official site of the Perfect Information Classroom. Address: http://191.101.11.174/mgzd.", "description": "The ACOJ server is in a poor state. Therefore, the SAC problem setter SOL has to require every branch site that is set up by downloading the ACOJ software package to enable the cloud judging service for the main site.\n\nThe cloud judging service is connected via a network. The network is bidirectional; however, due to geographic and other constraints, not every pair of servers can be directly connected. The ACOJ main site has obtained the list of pairs that can be directly connected. It contains $n$ stations (including the main site) and their $m$ connections, based on which tasks can be assigned.\n\nSome station owners are SOL’s diehard fans and will unconditionally offer their servers to SOL. These ACOJ stations are called “good stations.” However, some station owners are SOL “haters.” Although they obtained the ACOJ server program, they do not want to provide resources to SOL and use tricks to turn off the cloud service. In other words, although the main site still regards these stations as present, they are useless — they can neither relay communication nor run judging. These are called “bad stations.”\n\nAfter thorough investigation, SOL determined that there are at most $k$ bad stations in the ACOJ cloud judging system, and these $k$ bad stations may make the ACOJ cloud network disconnected. Crisis!\n\nHowever, SOL cannot determine which $k$ stations they are. He asks you to find any set of stations, of size up to $k$, whose removal would make the network disconnected, so that precautionary measures can be taken.", "inputFormat": "The input contains $m + 1$ lines.\n\n- Line $1$: three integers $n, m, k$.\n- The next $m$ lines: each contains two integers $a, b$, meaning stations $a$ and $b$ can be directly connected.", "outputFormat": "The output contains $1$ line.\n\nOutput at most $k$ integers, representing any set of vertices whose removal disconnects the original graph.\n\nBecause a Special Judge is used, the order of the vertices does not matter. You only need to ensure that the original graph can be disconnected.\n\nIf no such set of stations exists, output `How oversuspicious you are, SOL!`. If the network is already disconnected even when there are no bad stations, output `Poor SOL!`.", "hint": "- For $20\\%$ of the testdata, $n \\le 15$.\n- For another $20\\%$ of the testdata, $n \\le 100$, $k = 1$.\n- For another $20\\%$ of the testdata, $n \\le 100$, $k = 2$.\n- For $100\\%$ of the testdata, $3 \\le n \\le 500$, $k \\le 3$, $2 \\le n - k$; the cloud network has no self-loops or multiple edges.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC#1 - ACOJ云评测计划", "background": "本题由世界上最蒟蒻最辣鸡最撒比的 SOL 提供。\n\n寂月城网站是完美信息教室的官网。地址：http://191.101.11.174/mgzd 。", "description": "ACOJ 的服务器简直是差到了一个令人发指的地步。于是 SAC 的出题人，也就是傻逼 SOL，不得不强制要求每一个通过下载 ACOJ 软件包而搭建的分站，都为主站启动云端评测服务。\n\n云评测服务是由网络来连接的。这样的网络连接是双向的；但是由于地理位置等因素的限制，并不是任意两台服务器都可以直接相连。ACOJ 主站已经得到了可以直连的服务器的表，其中包含 $n$ 个分站（包括主站）以及它们的 $m$ 条连接情况，可以根据这个来分配各个分站的任务。\n\n有一些分站的服主是 SOL 的脑残粉。他们会无条件地将他们的服务器提供给 SOL。这些 ACOJ 分站称作“好站”。但是还有一些分站的服主是 SOL 黑。他们虽然拿到了 ACOJ 的服务端，但是并不愿意为 SOL 提供资源，于是利用黑科技关掉了云服务。也就是说，虽然主站仍然认为这些站点存在，但是它们不会起到任何作用——既不能传递通信，也不能进行评测。它们称作“坏站”。\n\n经过千辛万苦的调查，SOL 确定了 ACOJ 云评测系统中有最多 $k$ 个坏站存在，而且这 $k$ 个坏站似乎会使得 ACOJ 的云网络不再联通！大危机！\n\n但是 SOL 太弱智了，并不能确定是哪 $k$ 个。于是他请你来帮他找出任意一组可能会使得网络不再联通的 $k$ 个站点，以便加强防范。\n", "inputFormat": "输入包含 $m+1$ 行。\n\n第 $1$ 行 $3$ 个整数 $n,m,k$。\n\n接下来 $m$ 行，每行两个整数 $a,b$，表示标号为 $a$ 和 $b$ 的站点可以直接相连。", "outputFormat": "输出包含 $1$ 行。\n\n不超过 $k$ 个整数，表示能够将原图割开的任意一组节点组合。\n\n因为使用了 Special Judge，所以节点的顺序并不用担心。只需要满足能够割开原图即可。\n\n如果不存在这样的站点集合，输出 `How oversuspicious you are, SOL!`；如果网络不存在任何坏站时本来就无法连通，输出 `Poor SOL!`。", "hint": "对于 $20\\%$ 的数据，$n \\le 15$；\n\n对于另外 $20\\%$ 的数据，$n \\le 100$，$k=1$；\n\n对于另外 $20\\%$ 的数据，$n \\le 100$，$k=2$；\n\n对于 $100\\%$ 的数据，$3 \\le  n\\le 500$，$k \\le 3$，$2\\le n - k$，云网络不存在自环和重边。", "locale": "zh-CN"}}}
{"pid": "P2248", "type": "P", "difficulty": 6, "samples": [["5 2\n3 1\n2 3 12 14 16\n2 3\n3 1", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "O2优化", "洛谷月赛"], "title": "分段", "background": null, "description": "给你 $n$ 个数 $a_1 \\sim a_n$，要求将它们分成若干连续的段，其中有 $m$ 对给定的数不能被分到同一段。\n\n分出一个段的代价是：\n\n$$K + S \\times (P - Q)$$\n\n其中 $K$ 和 $S$ 均为给定的常数，$P$ 是该段中所有数的最大值，$Q$ 是该段中所有数的最小值。\n\n你需要求出每段代价之和最小的分段方案。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行两个非负整数 $K,S$。\n\n第三行 $n$ 个非负整数 $a_1 \\sim a_n$。\n\n下面 $m$ 行，每行 $2$ 个正整数 $p_i,q_i$，表示 $a_{p_i},a_{q_i}$ 不能共存。", "outputFormat": "输出仅一行，表示最小的每段代价之和。", "hint": "对于 $10\\%$ 的数据，$n \\leq 10$。\n\n对于 $30\\%$ 的数据，$n \\leq 1500$。\n\n对于另外 $10\\%$ 的数据，$S = 0$。\n\n对于另外 $30\\%$ 的数据，$m = 0$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le m \\le 10^5$，$0 \\le K,S,a_i \\le 10^5$，$1 \\le p_i,q_i \\le n$，$p_i \\ne q_i$。", "locale": "zh-CN", "translations": {"en": {"title": "Segmentation", "background": null, "description": "You are given $n$ numbers $a_1 \\sim a_n$, and you need to partition them into several contiguous segments, with the constraint that there are $m$ specified pairs of numbers that cannot be placed in the same segment.\n\nThe cost of creating one segment is:\n$$K + S \\times (P - Q)$$\nwhere $K$ and $S$ are given constants, $P$ is the maximum value in that segment, and $Q$ is the minimum value in that segment.\n\nYou need to find a partitioning scheme that minimizes the sum of costs over all segments.", "inputFormat": "The first line contains two positive integers $n,m$.\n\nThe second line contains two non-negative integers $K,S$.\n\nThe third line contains $n$ non-negative integers $a_1 \\sim a_n$.\n\nEach of the next $m$ lines contains $2$ positive integers $p_i,q_i$, indicating that $a_{p_i},a_{q_i}$ cannot be in the same segment.", "outputFormat": "Output a single line containing the minimum possible sum of the costs over all segments.", "hint": "For $10\\%$ of the testdata, $n \\leq 10$.\n\nFor $30\\%$ of the testdata, $n \\leq 1500$.\n\nFor another $10\\%$ of the testdata, $S = 0$.\n\nFor another $30\\%$ of the testdata, $m = 0$.\n\nFor $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $0 \\le m \\le 10^5$, $0 \\le K,S,a_i \\le 10^5$, $1 \\le p_i,q_i \\le n$, $p_i \\ne q_i$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "分段", "background": null, "description": "给你 $n$ 个数 $a_1 \\sim a_n$，要求将它们分成若干连续的段，其中有 $m$ 对给定的数不能被分到同一段。\n\n分出一个段的代价是：\n\n$$K + S \\times (P - Q)$$\n\n其中 $K$ 和 $S$ 均为给定的常数，$P$ 是该段中所有数的最大值，$Q$ 是该段中所有数的最小值。\n\n你需要求出每段代价之和最小的分段方案。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行两个非负整数 $K,S$。\n\n第三行 $n$ 个非负整数 $a_1 \\sim a_n$。\n\n下面 $m$ 行，每行 $2$ 个正整数 $p_i,q_i$，表示 $a_{p_i},a_{q_i}$ 不能共存。", "outputFormat": "输出仅一行，表示最小的每段代价之和。", "hint": "对于 $10\\%$ 的数据，$n \\leq 10$。\n\n对于 $30\\%$ 的数据，$n \\leq 1500$。\n\n对于另外 $10\\%$ 的数据，$S = 0$。\n\n对于另外 $30\\%$ 的数据，$m = 0$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le m \\le 10^5$，$0 \\le K,S,a_i \\le 10^5$，$1 \\le p_i,q_i \\le n$，$p_i \\ne q_i$。", "locale": "zh-CN"}}}
{"pid": "P2249", "type": "P", "difficulty": 2, "samples": [["11 3\n1 3 3 3 5 7 9 11 13 15 15\n1 3 6", "1 2 -1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分"], "title": "【深基13.例1】查找", "background": "", "description": "输入 $n$ 个不超过 $10^9$ 的单调不减的（就是后面的数字不小于前面的数字）非负整数 $a_1,a_2,\\dots,a_{n}$，然后进行 $m$ 次询问。对于每次询问，给出一个整数 $q$，要求输出这个数字在序列中第一次出现的编号，如果没有找到的话输出 $-1$ 。", "inputFormat": "第一行 $2$ 个整数 $n$ 和 $m$，表示数字个数和询问次数。\n\n第二行 $n$ 个整数，表示这些待查询的数字。\n\n第三行 $m$ 个整数，表示询问这些数字的编号，从 $1$ 开始编号。", "outputFormat": "输出一行，$m$ 个整数，以空格隔开，表示答案。", "hint": "数据保证，$1 \\leq n \\leq 10^6$，$0 \\leq a_i,q \\leq 10^9$，$1 \\leq m \\leq 10^5$\n\n本题输入输出量较大，请使用较快的 IO 方式。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 13. Example 1] Search", "background": "", "description": "Input $n$ non-negative integers $a_1, a_2, \\dots, a_n$ that are non-decreasing (meaning each later number is not smaller than the previous one), and each does not exceed $10^9$. Then perform $m$ queries. For each query, an integer $q$ is given. You need to output the index of the first occurrence of this number in the sequence. If it is not found, output $-1$.", "inputFormat": "The first line contains two integers $n$ and $m$, representing the number of integers and the number of queries.\n\nThe second line contains $n$ integers, representing the numbers to be queried.\n\nThe third line contains $m$ integers, representing the query numbers. The indices start from $1$.", "outputFormat": "Output one line containing $m$ integers separated by spaces, representing the answers.", "hint": "Constraints: $1 \\leq n \\leq 10^6$, $0 \\leq a_i, q \\leq 10^9$, $1 \\leq m \\leq 10^5$.\n\nThe input and output size of this problem is large. Please use fast I/O methods.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基13.例1】查找", "background": "", "description": "输入 $n$ 个不超过 $10^9$ 的单调不减的（就是后面的数字不小于前面的数字）非负整数 $a_1,a_2,\\dots,a_{n}$，然后进行 $m$ 次询问。对于每次询问，给出一个整数 $q$，要求输出这个数字在序列中第一次出现的编号，如果没有找到的话输出 $-1$ 。", "inputFormat": "第一行 $2$ 个整数 $n$ 和 $m$，表示数字个数和询问次数。\n\n第二行 $n$ 个整数，表示这些待查询的数字。\n\n第三行 $m$ 个整数，表示询问这些数字的编号，从 $1$ 开始编号。", "outputFormat": "输出一行，$m$ 个整数，以空格隔开，表示答案。", "hint": "数据保证，$1 \\leq n \\leq 10^6$，$0 \\leq a_i,q \\leq 10^9$，$1 \\leq m \\leq 10^5$\n\n本题输入输出量较大，请使用较快的 IO 方式。", "locale": "zh-CN"}}}
{"pid": "P2250", "type": "P", "difficulty": 4, "samples": [["54\nr218 m3 r1\n", "r1 m1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心"], "title": "二面体群", "background": null, "description": "考虑在一个单位圆周上的 $n$ 个点，$n$ 个点的标号为 $K=0,1,\\ldots,n-1$。初始的时候 $K$ 相对于 X 轴的角度为 $\\dfrac{360 \\times K}{n}$ 度，这里的角度是相对于 X 轴的逆时针角度。我们将在这组点上运行 2 种不同类型的操作：\n\n1. 顺时针旋转 $\\dfrac{360}{n}$度\n2. 相对于 X 轴的映射\n\n对于给定的操作序列，如果结果相同，我们只对最短的操作序列感兴趣。结果相同是指对于不同的操作序列，最后的操作结果中每一个单一点的位置都是一样的。\n\n操作序列以字符串的形式给出，该字符串中只含有字母 `r` 和 `m`。`r` 代表顺时针旋转，`m` 代表单独映射（到右边并且对称）。字符串中如果有多个字母连续出现要简写成 `<字母><数字>` 的形式，为了方便起见，字母如果单独出现也写成这种形式。如 `rrmrrrrrrrrrrrr` 可以写成 `r2 m1 r12`，每个操作序列一行。", "inputFormat": "输入共两行。\n\n第一行一个数 $N$，表示圆周上点的个数。\n\n第二行为按上面的方式缩写的操作序列，所有的数字都是正整数，并且小于$10^8$ 。在输入文件中没有空行，并且每一行的字符个数都小于 $10^5$。", "outputFormat": "输出最短操作序列。若无需操作则什么都不输出。", "hint": "$100\\%$ 的数据满足 $3 \\leq N \\leq 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "Dihedral Group", "background": "", "description": "Consider $n$ points on a unit circle, labeled $K=0,1,\\ldots,n-1$. Initially, the angle of $K$ relative to the X-axis is $\\dfrac{360 \\times k}{n}$ degrees, measured counterclockwise from the X-axis. We will perform two types of operations on this set of points:\n\n1. Rotate clockwise by $\\dfrac{360}{n}$ degrees.\n2. Reflect with respect to the X-axis.\n\nFor a given operation sequence, if the results are the same, we are only interested in the shortest operation sequence. “Results are the same” means that, for different operation sequences, the final position of each individual point is identical.\n\nOperation sequences are given as strings consisting only of the letters `r` and `m`. `r` denotes a clockwise rotation, and `m` denotes a reflection about the X-axis. If a letter appears consecutively, it must be abbreviated as <letter><number>. For convenience, a single letter is also written in this form. For example, `rrmrrrrrrrrrrrr` can be written as `r2 m1 r12`, one operation sequence per line.", "inputFormat": "The input consists of two lines.\n\nThe first line contains an integer $N$, the number of points on the circle.\n\nThe second line contains the operation sequence abbreviated as described above. All numbers are positive integers and less than $10^8$. There are no blank lines in the input file, and the number of characters on each line is less than $10^5$.", "outputFormat": "Output the shortest operation sequence. If no operation is needed, output nothing.", "hint": "$100\\%$ of the testdata satisfies $3 \\leq N \\leq 10^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二面体群", "background": null, "description": "考虑在一个单位圆周上的 $n$ 个点，$n$ 个点的标号为 $K=0,1,\\ldots,n-1$。初始的时候 $K$ 相对于 X 轴的角度为 $\\dfrac{360 \\times K}{n}$ 度，这里的角度是相对于 X 轴的逆时针角度。我们将在这组点上运行 2 种不同类型的操作：\n\n1. 顺时针旋转 $\\dfrac{360}{n}$度\n2. 相对于 X 轴的映射\n\n对于给定的操作序列，如果结果相同，我们只对最短的操作序列感兴趣。结果相同是指对于不同的操作序列，最后的操作结果中每一个单一点的位置都是一样的。\n\n操作序列以字符串的形式给出，该字符串中只含有字母 `r` 和 `m`。`r` 代表顺时针旋转，`m` 代表单独映射（到右边并且对称）。字符串中如果有多个字母连续出现要简写成 `<字母><数字>` 的形式，为了方便起见，字母如果单独出现也写成这种形式。如 `rrmrrrrrrrrrrrr` 可以写成 `r2 m1 r12`，每个操作序列一行。", "inputFormat": "输入共两行。\n\n第一行一个数 $N$，表示圆周上点的个数。\n\n第二行为按上面的方式缩写的操作序列，所有的数字都是正整数，并且小于$10^8$ 。在输入文件中没有空行，并且每一行的字符个数都小于 $10^5$。", "outputFormat": "输出最短操作序列。若无需操作则什么都不输出。", "hint": "$100\\%$ 的数据满足 $3 \\leq N \\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P2251", "type": "P", "difficulty": 3, "samples": [["10 4\n16 5 6 9 5 13 14 20 8 12\n", "5\n5\n5\n5\n5\n8\n8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["单调队列", "ST 表"], "title": "质量检测", "background": null, "description": "为了检测生产流水线上总共 $N$ 件产品的质量，我们首先给每一件产品打一个分数 $A$ 表示其品质，然后统计前 $M$ 件产品中质量最差的产品的分值 $Q_m = \\min\\{A_1, A_2, \\cdots, A_m\\}$，以及第 $2$ 至第 $M + 1$ 件的 $Q_{m + 1}$，$Q_{m + 2} $…… 最后统计第 $N - M + 1$ 至第 $N$ 件的 $Q_n$。根据 $Q$ 再做进一步评估。\n\n请你尽快求出 $Q$ 序列。", "inputFormat": "输入共两行。\n\n第一行共两个数 $N$、$M$，由空格隔开。含义如前述。\n\n第二行共 $N$ 个数，表示 $N$ 件产品的质量。", "outputFormat": "输出共 $N - M + 1$ 行。\n\n第 $1$ 至 $N - M + 1$ 行每行一个数，第 $i$ 行的数 $Q_{i + M - 1}$。含义如前述。", "hint": "[数据范围]\n\n对于 $30\\%$ 的数据，$N \\le 1 000$。\n\n对于 $100\\%$ 的数据，$M \\le N \\le 10^5, A_i \\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Quality Inspection", "background": "", "description": "To check the quality of a total of $N$ products on a production line, we first assign each product a score $A$ indicating its quality. Then we compute $Q_m = \\min\\{A_1, A_2, \\cdots, A_m\\}$, the score of the worst-quality product among the first $M$ products, and similarly compute the $Q_{m + 1}$ for products $2$ through $M + 1$, $Q_{m + 2}$ for products $3$ through $M + 2$, ... Finally, compute $Q_n$ for products $N - M + 1$ through $N$. We will further evaluate based on $Q$.\n\nPlease compute the sequence $Q$ as quickly as possible.", "inputFormat": "The input contains two lines.\n\nThe first line contains two numbers $N$ and $M$, separated by a space, as described above.\n\nThe second line contains $N$ numbers, representing the quality scores of the $N$ products.", "outputFormat": "Output $N - M + 1$ lines.\n\nLines $1$ through $N - M + 1$ each contain one number. On line $i$, output $Q_{i + M - 1}$, as described above.", "hint": "[Constraints]\n\nFor $30\\%$ of the testdata, $N \\le 1 000$.\n\nFor $100\\%$ of the testdata, $M \\le N \\le 10^5, A_i \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "质量检测", "background": null, "description": "为了检测生产流水线上总共 $N$ 件产品的质量，我们首先给每一件产品打一个分数 $A$ 表示其品质，然后统计前 $M$ 件产品中质量最差的产品的分值 $Q_m = \\min\\{A_1, A_2, \\cdots, A_m\\}$，以及第 $2$ 至第 $M + 1$ 件的 $Q_{m + 1}$，$Q_{m + 2} $…… 最后统计第 $N - M + 1$ 至第 $N$ 件的 $Q_n$。根据 $Q$ 再做进一步评估。\n\n请你尽快求出 $Q$ 序列。", "inputFormat": "输入共两行。\n\n第一行共两个数 $N$、$M$，由空格隔开。含义如前述。\n\n第二行共 $N$ 个数，表示 $N$ 件产品的质量。", "outputFormat": "输出共 $N - M + 1$ 行。\n\n第 $1$ 至 $N - M + 1$ 行每行一个数，第 $i$ 行的数 $Q_{i + M - 1}$。含义如前述。", "hint": "[数据范围]\n\n对于 $30\\%$ 的数据，$N \\le 1 000$。\n\n对于 $100\\%$ 的数据，$M \\le N \\le 10^5, A_i \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P2252", "type": "P", "difficulty": 6, "samples": [["8 4\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "博弈论", "2002", "各省省选", "上海", "模板题"], "title": "【模板】威佐夫博弈 / [SHOI2002] 取石子游戏", "background": "", "description": "有两堆石子，数量任意，可以不同。游戏开始由两个人轮流取石子。游戏规定，每次有两种不同的取法：一是可以在任意的一堆中取走任意多的石子；二是可以在两堆中同时取走相同数量的石子。最后把石子全部取完者为胜者。现在给出初始的两堆石子的数目，你先取，假设双方都采取最好的策略，问最后你是胜者还是败者。\n", "inputFormat": "输入共一行。\n\n第一行共两个数 $a, b$，表示石子的初始情况。\n", "outputFormat": "输出共一行。\n\n第一行为一个数字 $1,0$ 或 $-1$，如果最后你是胜利者则为 $1$；若失败则为 $0$；若结果无法确定则为 $-1$。\n", "hint": "**数据范围**\n\n$50\\%$ 的数据满足 $a, b \\le 1000$；\n\n$100\\%$ 的数据满足 $a, b \\le 10^9$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Wythoff Game / [SHOI2002] Take Stones Game", "background": "", "description": "There are two piles of stones, with arbitrary (possibly different) counts. Two players take turns. Each move is one of the following:\n- Remove any number of stones from exactly one pile.\n- Remove the same number of stones from both piles simultaneously.\n\nThe player who takes the last stones wins. Given the initial numbers of stones in the two piles, you move first. Assuming both players play optimally, determine whether you will win or lose.", "inputFormat": "The input consists of a single line.\n\nThe only line contains two integers $a, b$, representing the initial numbers of stones.", "outputFormat": "The output consists of a single line.\n\nOutput a single integer $1$, $0$, or $-1$: output $1$ if you will win; output $0$ if you will lose; output $-1$ if the result cannot be determined.", "hint": "Constraints\n\n$50\\%$ of the testdata satisfy $a, b \\le 1000$.\n\n$100\\%$ of the testdata satisfy $a, b \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】威佐夫博弈 / [SHOI2002] 取石子游戏", "background": "", "description": "有两堆石子，数量任意，可以不同。游戏开始由两个人轮流取石子。游戏规定，每次有两种不同的取法：一是可以在任意的一堆中取走任意多的石子；二是可以在两堆中同时取走相同数量的石子。最后把石子全部取完者为胜者。现在给出初始的两堆石子的数目，你先取，假设双方都采取最好的策略，问最后你是胜者还是败者。\n", "inputFormat": "输入共一行。\n\n第一行共两个数 $a, b$，表示石子的初始情况。\n", "outputFormat": "输出共一行。\n\n第一行为一个数字 $1,0$ 或 $-1$，如果最后你是胜利者则为 $1$；若失败则为 $0$；若结果无法确定则为 $-1$。\n", "hint": "**数据范围**\n\n$50\\%$ 的数据满足 $a, b \\le 1000$；\n\n$100\\%$ 的数据满足 $a, b \\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P2254", "type": "P", "difficulty": 5, "samples": [["4 5 4 1 3\n..xx.\n.....\n...x.\n.....\n1 3 4\n4 5 1\n6 7 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2005", "单调队列", "NOI", "队列"], "title": "[NOI2005] 瑰丽华尔兹", "background": "你跳过华尔兹吗？当音乐响起，当你随着旋律滑动舞步，是不是有一种漫步仙境的惬意？\n\n众所周知，跳华尔兹时，最重要的是有好的音乐。但是很少有几个人知道，世界上最伟大的钢琴家一生都漂泊在大海上，他的名字叫丹尼・布德曼・T.D.・柠檬・1900，朋友们都叫他 1900。\n\n1900 在 20 世纪的第一年出生在往返于欧美的邮轮弗吉尼亚号上。很不幸，他刚出生就被抛弃，成了孤儿。1900 孤独的成长在弗吉尼亚号上，从未离开过这个摇晃的世界。也许是对他命运的补偿，上帝派可爱的小天使艾米丽照顾他。可能是天使的点化，1900 拥有不可思议的钢琴天赋：从未有人教，从没看过乐谱，但他却能凭着自己的感觉弹出最沁人心脾的旋律。当 1900 的音乐获得邮轮上所有人的欢迎时，他才 8 岁，而此时，他已经乘着海轮往返欧美大陆 50 余次了。\n\n虽说是钢琴奇才，但 1900 还是个孩子，他有着和一般男孩一样的好奇和调皮，只不过更多一层浪漫的色彩罢了：这是一个风雨交加的夜晚，海风卷起层层巨浪拍打着弗吉尼亚号，邮轮随着巨浪剧烈的摇摆。船上的新萨克斯手迈克斯・托尼晕船了，1900 招呼托尼和他一起坐到舞厅里的钢琴上，然后松开了固定钢琴的闸，于是，钢琴随着海轮的倾斜滑动起来。准确的说，我们的主角 1900…\n", "description": "不妨认为舞厅是一个 $N$ 行 $M$ 列的矩阵，矩阵中的某些方格上堆放了一些家具，其他的则是空地。钢琴可以在空地上滑动，但不能撞上家具或滑出舞厅，否则会损坏钢琴和家具，引来难缠的船长。每个时刻，钢琴都会随着船体倾斜的方向向相邻的方格滑动一格，相邻的方格可以是向东、向西、向南或向北的。而艾米丽可以选择施魔法或不施魔法：如果不施魔法，则钢琴会滑动；如果施魔法，则钢琴会原地不动。\n\n艾米丽是个天使，她知道每段时间的船体的倾斜情况。她想使钢琴在舞厅里滑行的路程尽量长，这样 1900 会非常高兴，同时也有利于治疗托尼的晕船。但艾米丽还太小，不会算，所以希望你能帮助她。\n", "inputFormat": "输入文件的第一行包含 $5$ 个数 $N$, $M$, $x$, $y$ 和 $K$。$N$ 和 $M$ 描述舞厅的大小，$x$ 和 $y$ 为钢琴的初始位置；我们对船体倾斜情况是按时间的区间来描述的，且从 $1$ 开始计算时间，比如 “在 $[1, 3]$ 时间里向东倾斜，$[4, 5]$ 时间里向北倾斜”，因此这里的 $K$ 表示区间的数目。\n\n以下 $N$ 行，每行 $M$ 个字符，描述舞厅里的家具。第 $i$ 行第 $j$ 列的字符若为 `.`，则表示该位置是空地；若为 `x`，则表示有家具。\n\n以下 $K$ 行，顺序描述 $K$ 个时间区间，格式为：$s_i\\ t_i\\ d_i (1 \\leq i \\leq K)$。表示在时间区间 $[s_i, t_i]$ 内，船体都是向 $d_i$ 方向倾斜的。$d_i$ 为 $1$, $2$, $3$, $4$ 中的一个，依次表示北、南、西、东（分别对应矩阵中的上、下、左、右）。输入保证区间是连续的，即\n\n$s_1 = 1$，$s_i = t_{i-1} + 1 (1 < i \\leq K)$，$t_K = T$。", "outputFormat": "输出文件仅有 $1$ 行，包含一个整数，表示钢琴滑行的最长距离 (即格子数)。\n", "hint": "钢琴的滑行路线：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1307.png) \n\n钢琴在“×”位置上时天使使用一次魔法，因此滑动总长度为 $6$。\n\n【数据范围】\n\n$50\\%$ 的数据中，$1\\leq N, M\\leq 200，T\\leq 200$；\n\n$100\\%$ 的数据中，$1\\leq N$, $M \\leq 200$，$K \\leq 200$，$T\\leq 40000$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2005] Gorgeous Waltz", "background": "Do you dance the waltz? When the music starts and you glide with the melody, do you feel the ease of strolling in a fairyland?\n\nAs everyone knows, for a waltz, the most important thing is good music. But few people know that the greatest pianist in the world drifted on the sea all his life. His name was Danny Boodman T.D. Lemon 1900, and his friends called him 1900.\n\n1900 was born in the first year of the 20th century on the transatlantic liner Virginia. Unfortunately, he was abandoned at birth and became an orphan. He grew up alone on the Virginia and never left this swaying world. Perhaps as compensation for his fate, God sent a lovely little angel, Emily, to watch over him. Maybe it was the angel’s enlightenment that gave 1900 an incredible gift for the piano: no one taught him, and he had never seen sheet music, yet he could play the most touching melodies purely by feeling. When the music of 1900 won the hearts of everyone on the ship, he was only 8 years old, and by then he had already crossed the Atlantic more than 50 times.\n\nAlthough a piano prodigy, 1900 was still a child, with the same curiosity and playfulness as any boy, but with an extra touch of romance: it was a stormy night, the sea wind whipped up waves that pounded the Virginia, and the liner swayed violently with the swell. The new saxophonist on board, Max Tooney, was seasick. 1900 invited Tooney to sit with him on the piano in the ballroom, then released the brake that fixed the piano. The piano began to slide with the ship’s tilt. To be precise, our protagonist 1900…", "description": "Assume the ballroom is an $N$-by-$M$ grid. Some cells have furniture piled on them, and the rest are empty. The piano can slide on empty cells, but it cannot hit furniture or slide out of the ballroom; otherwise, both the piano and the furniture would be damaged, and the captain would be upset. At each moment, the piano slides one cell to an adjacent cell in the direction of the ship’s tilt. The adjacent cell can be east, west, south, or north. Emily can choose to cast magic or not: if she does not cast magic, the piano slides; if she does, the piano stays where it is.\n\nEmily is an angel, and she knows the ship’s tilt over each time interval. She wants to make the piano travel as long a distance as possible in the ballroom, which will make 1900 very happy and also help Tooney’s seasickness. But Emily is still too young to calculate it, so she hopes you can help her.", "inputFormat": "The first line contains 5 numbers $N$, $M$, $x$, $y$ and $K$. $N$ and $M$ describe the size of the ballroom, and $x$ and $y$ are the initial position of the piano. We describe the ship’s tilt by time intervals, and time starts from $1$. For example: “tilting east during $[1, 3]$, and tilting north during $[4, 5]$”. Therefore, $K$ is the number of intervals.\n\nThe next $N$ lines, each with $M$ characters, describe the furniture in the ballroom. In row $i$, column $j$, if the character is `.` then that cell is empty; if it is `x` then there is furniture.\n\nThe next $K$ lines describe the $K$ time intervals in order, in the format: $s_i\\ t_i\\ d_i$ ($1 \\leq i \\leq K$). It means that during the time interval $[s_i, t_i]$, the ship tilts toward direction $d_i$. $d_i$ is one of $1$, $2$, $3$, $4$, which denote north, south, west, and east respectively (corresponding to up, down, left, and right in the grid). The input guarantees that the intervals are continuous, that is,\n$s_1 = 1$, $s_i = t_{i-1} + 1$ ($1 < i \\leq K$), $t_K = T$.", "outputFormat": "Output a single line containing one integer, the maximum sliding distance of the piano (i.e., the number of cells).", "hint": "The piano’s sliding path:\n\n![](https://cdn.luogu.com.cn/upload/pic/1307.png)\n\nWhen the piano is at the \"×\" position, the angel uses magic once, so the total sliding length is $6$.\n\nConstraints:\n- For $50\\%$ of the testdata, $1 \\leq N, M \\leq 200$, $T \\leq 200$.\n- For $100\\%$ of the testdata, $1 \\leq N, M \\leq 200$, $K \\leq 200$, $T \\leq 40000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2005] 瑰丽华尔兹", "background": "你跳过华尔兹吗？当音乐响起，当你随着旋律滑动舞步，是不是有一种漫步仙境的惬意？\n\n众所周知，跳华尔兹时，最重要的是有好的音乐。但是很少有几个人知道，世界上最伟大的钢琴家一生都漂泊在大海上，他的名字叫丹尼・布德曼・T.D.・柠檬・1900，朋友们都叫他 1900。\n\n1900 在 20 世纪的第一年出生在往返于欧美的邮轮弗吉尼亚号上。很不幸，他刚出生就被抛弃，成了孤儿。1900 孤独的成长在弗吉尼亚号上，从未离开过这个摇晃的世界。也许是对他命运的补偿，上帝派可爱的小天使艾米丽照顾他。可能是天使的点化，1900 拥有不可思议的钢琴天赋：从未有人教，从没看过乐谱，但他却能凭着自己的感觉弹出最沁人心脾的旋律。当 1900 的音乐获得邮轮上所有人的欢迎时，他才 8 岁，而此时，他已经乘着海轮往返欧美大陆 50 余次了。\n\n虽说是钢琴奇才，但 1900 还是个孩子，他有着和一般男孩一样的好奇和调皮，只不过更多一层浪漫的色彩罢了：这是一个风雨交加的夜晚，海风卷起层层巨浪拍打着弗吉尼亚号，邮轮随着巨浪剧烈的摇摆。船上的新萨克斯手迈克斯・托尼晕船了，1900 招呼托尼和他一起坐到舞厅里的钢琴上，然后松开了固定钢琴的闸，于是，钢琴随着海轮的倾斜滑动起来。准确的说，我们的主角 1900…\n", "description": "不妨认为舞厅是一个 $N$ 行 $M$ 列的矩阵，矩阵中的某些方格上堆放了一些家具，其他的则是空地。钢琴可以在空地上滑动，但不能撞上家具或滑出舞厅，否则会损坏钢琴和家具，引来难缠的船长。每个时刻，钢琴都会随着船体倾斜的方向向相邻的方格滑动一格，相邻的方格可以是向东、向西、向南或向北的。而艾米丽可以选择施魔法或不施魔法：如果不施魔法，则钢琴会滑动；如果施魔法，则钢琴会原地不动。\n\n艾米丽是个天使，她知道每段时间的船体的倾斜情况。她想使钢琴在舞厅里滑行的路程尽量长，这样 1900 会非常高兴，同时也有利于治疗托尼的晕船。但艾米丽还太小，不会算，所以希望你能帮助她。\n", "inputFormat": "输入文件的第一行包含 $5$ 个数 $N$, $M$, $x$, $y$ 和 $K$。$N$ 和 $M$ 描述舞厅的大小，$x$ 和 $y$ 为钢琴的初始位置；我们对船体倾斜情况是按时间的区间来描述的，且从 $1$ 开始计算时间，比如 “在 $[1, 3]$ 时间里向东倾斜，$[4, 5]$ 时间里向北倾斜”，因此这里的 $K$ 表示区间的数目。\n\n以下 $N$ 行，每行 $M$ 个字符，描述舞厅里的家具。第 $i$ 行第 $j$ 列的字符若为 `.`，则表示该位置是空地；若为 `x`，则表示有家具。\n\n以下 $K$ 行，顺序描述 $K$ 个时间区间，格式为：$s_i\\ t_i\\ d_i (1 \\leq i \\leq K)$。表示在时间区间 $[s_i, t_i]$ 内，船体都是向 $d_i$ 方向倾斜的。$d_i$ 为 $1$, $2$, $3$, $4$ 中的一个，依次表示北、南、西、东（分别对应矩阵中的上、下、左、右）。输入保证区间是连续的，即\n\n$s_1 = 1$，$s_i = t_{i-1} + 1 (1 < i \\leq K)$，$t_K = T$。", "outputFormat": "输出文件仅有 $1$ 行，包含一个整数，表示钢琴滑行的最长距离 (即格子数)。\n", "hint": "钢琴的滑行路线：\n\n ![](https://cdn.luogu.com.cn/upload/pic/1307.png) \n\n钢琴在“×”位置上时天使使用一次魔法，因此滑动总长度为 $6$。\n\n【数据范围】\n\n$50\\%$ 的数据中，$1\\leq N, M\\leq 200，T\\leq 200$；\n\n$100\\%$ 的数据中，$1\\leq N$, $M \\leq 200$，$K \\leq 200$，$T\\leq 40000$。\n", "locale": "zh-CN"}}}
{"pid": "P2255", "type": "P", "difficulty": 3, "samples": [["6\n0 3\n6 7\n3 10\n1 5\n2 8\n1 9", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2014", "USACO", "排序"], "title": "[USACO14JAN] Recording the Moolympics S", "background": null, "description": "农民约翰热衷于所有寒冷天气的运动（尤其是涉及到牛的运动），农民约翰想录下尽可能多的电视节目。Moolympics 的节目时间表有 $N$ 个不同的节目（$1\\le N\\le 150$），每个节目 $i$ 给定开始时间 $S_i$ 和结束时间 $t_i$，表示该节目的举行时间为 $[s_i,t_i)$。FJ 有一个双调谐器录音机，可以同时录制两个节目。请帮助他确定他能录制的节目的最大数量。", "inputFormat": "- 第 $1$ 行：正整数 $N$。\n- 第 $2$ 到第 $N+1$ 行：每行包含单个节目的开始和结束时间（范围为 $[0, 10^9]$ 内的整数）。", "outputFormat": "仅一行，FJ 可以记录的最大节目数量。", "hint": "样例解释：\n\n一种最优方案是，第一个调谐器记录节目 $1,3$，第二个调谐器记录节目 $2,4$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14JAN] Recording the Moolympics S", "background": null, "description": "Being a fan of all cold-weather sports (especially those involving cows),Farmer John wants to record as much of the upcoming winter Moolympics as possible.\n\nThe television schedule for the Moolympics consists of N different programs(1 <= N <= 150), each with a designated starting time and ending time. FJ has a dual-tuner recorder that can record two programs simultaneously.\n\nPlease help him determine the maximum number of programs he can record in total.", "inputFormat": "* Line 1: The integer N.\n\n* Lines 2..1+N: Each line contains the start and end time of a single program (integers in the range 0..1,000,000,000).", "outputFormat": "* Line 1: The maximum number of programs FJ can record.", "hint": "INPUT DETAILS:\n\nThe Moolympics broadcast consists of 6 programs. The first runs from time 0 to time 3, and so on.\n\nOUTPUT DETAILS:\n\nFJ can record at most 4 programs. For example, he can record programs 1 and 3 back-to-back on the first tuner, and programs 2 and 4 on the second tuner.\n\nSource: USACO 2014 January Contest, Silver", "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Recording the Moolympics S", "background": null, "description": "农民约翰热衷于所有寒冷天气的运动（尤其是涉及到牛的运动），农民约翰想录下尽可能多的电视节目。Moolympics 的节目时间表有 $N$ 个不同的节目（$1\\le N\\le 150$），每个节目 $i$ 给定开始时间 $S_i$ 和结束时间 $t_i$，表示该节目的举行时间为 $[s_i,t_i)$。FJ 有一个双调谐器录音机，可以同时录制两个节目。请帮助他确定他能录制的节目的最大数量。", "inputFormat": "- 第 $1$ 行：正整数 $N$。\n- 第 $2$ 到第 $N+1$ 行：每行包含单个节目的开始和结束时间（范围为 $[0, 10^9]$ 内的整数）。", "outputFormat": "仅一行，FJ 可以记录的最大节目数量。", "hint": "样例解释：\n\n一种最优方案是，第一个调谐器记录节目 $1,3$，第二个调谐器记录节目 $2,4$。", "locale": "zh-CN"}}}
{"pid": "P2256", "type": "P", "difficulty": 3, "samples": [["10 6\nJack\nMike\nASDA\nMichel\nbrabrabra\nHeHe\nHeHE\npapapa\nHeY\nObama\nJack Obama\nHeHe HeHE\nbrabrabra HeHe\nObama ASDA\npapapa Obama\nObama HeHE\n3\nMike Obama\nHeHE Jack\npapapa brabrabra\n", "No.\nYes.\nYes.\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "并查集"], "title": "一中校运会之百米跑", "background": "在一大堆秀恩爱的 ** 之中，来不及秀恩爱的苏大学神踏着坚定（？）的步伐走向了 $100$ 米跑的起点。这时苏大学神发现，百米赛跑的参赛同学实在是太多了，连体育老师也忙不过来。这时体育老师发现了身为体育委员的苏大学神，便来找他帮忙。\n\n可是苏大学神需要热身，不然跑到一半就会抽（筋）、于是他就找到了你。如果你帮助体育老师解决了问题，老师就会给你 $5$ 个积分。", "description": "假设一共有 $N$（$2\\leq N\\leq 2\\times 10^4$）个参赛选手。\n\n老师会告诉你这 $N$ 个选手的名字。\n\n接着会告诉你 $M$（$1\\leq M\\leq 10^6$）句话，即告诉你学生 A 与学生 B 在同一个组里。\n\n如果学生 A 与学生 B 在同一组里，学生 B 与学生 C 也在同一组里，就说明学生 A 与学生 C 在同一组。\n\n然后老师会问你 $K$（$1\\leq K\\leq 10^6$）句话，即学生 X 和学生 Y 是否在同一组里。\n\n若是则输出 `Yes.`，否则输出 `No.`。", "inputFormat": "第一行输入 $N$ 和 $M$。\n\n接下来 $N$ 行输入每一个同学的名字。\n\n再往下 $M$ 行每行输入两个名字，且保证这两个名字都在上面的 $N$ 行中出现过，表示这两个参赛选手在同一个组里。\n\n再来输入 $K$。\n\n接下来输入体育老师的 $K$ 个询问。", "outputFormat": "对于体育老师的每一个询问，输出 `Yes.` 或 `No.`。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "No. 1 High School Sports Meet: 100 m Sprint", "background": "Amid a crowd of couples showing PDA, Su the \"xue shen\" strides with firm (?) steps toward the $100$ m starting line. He notices that there are too many participants, and even the PE teacher is overwhelmed. The PE teacher spots Su, who is the class sports rep, and asks him for help.\n\nHowever, Su needs to warm up, or he might cramp halfway through the run. So he turns to you. If you help the teacher solve the problem, the teacher will give you $5$ points.", "description": "Suppose there are $N$ ($2\\leq N\\leq 2\\times 10^4$) competitors.\n\nThe teacher will tell you the names of these $N$ competitors.\n\nThen the teacher will say $M$ ($1\\leq M\\leq 10^6$) sentences, each stating that student A and student B are in the same group.\n\nIf student A and student B are in the same group, and student B and student C are also in the same group, then student A and student C are in the same group.\n\nAfter that, the teacher will ask you $K$ ($1\\leq K\\leq 10^6$) questions, each asking whether student X and student Y are in the same group.\n\nIf they are, output `Yes.`; otherwise, output `No.`.", "inputFormat": "The first line contains $N$ and $M$.\n\nThe next $N$ lines each contain the name of one student.\n\nThe next $M$ lines each contain two names, both guaranteed to have appeared in the above $N$ lines, indicating that these two competitors are in the same group.\n\nThen an integer $K$ is given.\n\nThen follow $K$ queries. Each query consists of two names, asking whether the two students are in the same group.", "outputFormat": "For each of the teacher’s $K$ queries, output `Yes.` or `No.`.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "一中校运会之百米跑", "background": "在一大堆秀恩爱的 ** 之中，来不及秀恩爱的苏大学神踏着坚定（？）的步伐走向了 $100$ 米跑的起点。这时苏大学神发现，百米赛跑的参赛同学实在是太多了，连体育老师也忙不过来。这时体育老师发现了身为体育委员的苏大学神，便来找他帮忙。\n\n可是苏大学神需要热身，不然跑到一半就会抽（筋）、于是他就找到了你。如果你帮助体育老师解决了问题，老师就会给你 $5$ 个积分。", "description": "假设一共有 $N$（$2\\leq N\\leq 2\\times 10^4$）个参赛选手。\n\n老师会告诉你这 $N$ 个选手的名字。\n\n接着会告诉你 $M$（$1\\leq M\\leq 10^6$）句话，即告诉你学生 A 与学生 B 在同一个组里。\n\n如果学生 A 与学生 B 在同一组里，学生 B 与学生 C 也在同一组里，就说明学生 A 与学生 C 在同一组。\n\n然后老师会问你 $K$（$1\\leq K\\leq 10^6$）句话，即学生 X 和学生 Y 是否在同一组里。\n\n若是则输出 `Yes.`，否则输出 `No.`。", "inputFormat": "第一行输入 $N$ 和 $M$。\n\n接下来 $N$ 行输入每一个同学的名字。\n\n再往下 $M$ 行每行输入两个名字，且保证这两个名字都在上面的 $N$ 行中出现过，表示这两个参赛选手在同一个组里。\n\n再来输入 $K$。\n\n接下来输入体育老师的 $K$ 个询问。", "outputFormat": "对于体育老师的每一个询问，输出 `Yes.` 或 `No.`。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2257", "type": "P", "difficulty": 6, "samples": [["2\n10 10\n100 100", "30\n2791"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["莫比乌斯反演"], "title": "YY的GCD", "background": "", "description": "神犇 YY 虐完数论后给傻× kAc 出了一题\n\n给定 $N, M$，求 $1 \\leq x \\leq N$，$1 \\leq y \\leq M$ 且 $\\gcd(x, y)$ 为质数的 $(x, y)$ 有多少对。\n", "inputFormat": "第一行一个整数 $T$ 表述数据组数。\n\n接下来 $T$ 行，每行两个正整数，$N, M$。\n", "outputFormat": "$T$ 行，每行一个整数表示第 $i$ 组数据的结果。\n", "hint": "$T = 10^4$，$N, M \\leq 10^7$。\n", "locale": "zh-CN", "translations": {"en": {"title": "YY's GCD", "background": "", "description": "After studying number theory, YY gave kAc a problem.\n\nGiven $N, M$, find the number of pairs $(x, y)$ such that $1 \\leq x \\leq N$, $1 \\leq y \\leq M$, and $\\gcd(x, y)$ is a prime.", "inputFormat": "The first line contains an integer $T$ denoting the number of test cases.\n\nThen follow $T$ lines, each containing two positive integers $N, M$.", "outputFormat": "Output $T$ lines, each containing one integer, the answer for the $i$-th test case.", "hint": "$T = 10^4$, $N, M \\leq 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "YY的GCD", "background": "", "description": "神犇 YY 虐完数论后给傻× kAc 出了一题\n\n给定 $N, M$，求 $1 \\leq x \\leq N$，$1 \\leq y \\leq M$ 且 $\\gcd(x, y)$ 为质数的 $(x, y)$ 有多少对。\n", "inputFormat": "第一行一个整数 $T$ 表述数据组数。\n\n接下来 $T$ 行，每行两个正整数，$N, M$。\n", "outputFormat": "$T$ 行，每行一个整数表示第 $i$ 组数据的结果。\n", "hint": "$T = 10^4$，$N, M \\leq 10^7$。\n", "locale": "zh-CN"}}}
{"pid": "P2258", "type": "P", "difficulty": 5, "samples": [["5 5 2 3\n9 3 3 3 9\n9 4 8 7 4\n1 7 4 6 6\n6 8 5 6 9\n7 4 5 6 1", "6"], ["7 7 3 3  \n7 7 7 6 2 10 5\n5 8 8 2 1 6 2 \n2 9 5 5 6 1 7 \n7 9 3 6 1 7 8 \n1 9 1 4 7 8 8 \n10 5 9 1 1 8 10\n1 3 1 5 4 8 6", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2014", "NOIP 普及组", "枚举", "剪枝"], "title": "[NOIP 2014 普及组] 子矩阵", "background": "NOIP2014 普及组 T4", "description": "给出如下定义：\n\n1. 子矩阵：从一个矩阵当中选取某些行和某些列交叉位置所组成的新矩阵（保持行与列的相对顺序）被称为原矩阵的一个子矩阵。\n\n    例如，下面图中选取第 $2,4$ 行和第 $2,4,5$ 列交叉位置的元素得到一个 $2 \\times 3$ 的子矩阵如下所示。\n\n|$9$|$\\color{#6a5acd}3$|$3$|$\\color{#6a5acd}3$|$\\color{#6a5acd}9$|\n|:-|:-|:-|:-|:-|\n|$\\color{#6a5acd}9$|$\\color{blue}4$|$\\color{#6a5acd}8$|$\\color{blue}7$|$\\color{blue}4$|\n|$1$|$\\color{#6a5acd}7$|$4$|$\\color{#6a5acd}6$|$\\color{#6a5acd}6$|\n|$\\color{#6a5acd}6$|$\\color{blue}8$|$\\color{#6a5acd}5$|$\\color{blue}6$|$\\color{blue}9$|\n|$7$|$\\color{#6a5acd}4$|$5$|$\\color{#6a5acd}6$|$\\color{#6a5acd}1$|\n\n此矩阵的其中一个 $2\\times3$ 的子矩阵是：\n\n|$4$|$7$|$4$|\n|:-|:-|:-|\n|$8$|$6$|$9$|\n\n2. 相邻的元素：矩阵中的某个元素与其上下左右四个元素（如果存在的话）是相邻的。\n\n3. 矩阵的分值：矩阵中每一对相邻元素之差的绝对值之和。\n\n本题任务：给定一个 $n$ 行 $m$ 列的正整数矩阵，请你从这个矩阵中选出一个 $r$ 行 $c$ 列的子矩阵，使得这个子矩阵的分值最小，并输出这个分值。", "inputFormat": "第一行包含用空格隔开的四个整数 $n,m,r,c$，意义如问题描述中所述，每两个整数之间用一个空格隔开。\n\n接下来的 $n$ 行，每行包含 $m$ 个用空格隔开的整数，用来表示问题描述中那个 $n$ 行 $m$ 列的矩阵。", "outputFormat": "一个整数，表示满足题目描述的子矩阵的最小分值。\n", "hint": "#### 样例 1 说明\n\n该矩阵中分值最小的 $2$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行与第 $1$ 列、第 $3$ 列、第 $4$ 列交叉位置的元素组成，为：\n\n|$6$|$5$|$6$|\n|:-|:-|:-|\n|$7$|$5$|$6$|\n\n其分值为 $|6-5|+|5-6|+|7-5|+|5-6|+|6-7|+|5-5|+|6-6|=6$。\n\n#### 样例 2 说明\n\n该矩阵中分值最小的 $3$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行、第 $6$ 行与第 $2$ 列、第 $6$ 列、第 $7$ 列交叉位置的元素组成，选取的分值最小的子矩阵为：\n\n|$9$|$7$|$8$|\n|:-|:-|:-|\n|$9$|$8$|$8$|\n|$5$|$8$|$10$|\n\n#### 数据范围\n\n- 对于 $50\\%$ 的数据，$1\\leq n\\leq 12$，$1\\leq m\\leq 12$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq20$；\n\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq 16$，$1\\leq m\\leq 16$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq 1000$，$1\\leq r\\leq n$，$1\\leq c\\leq m$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Junior] Submatrix", "background": "NOIP 2014 Junior T4.", "description": "Definitions:\n\n1. Submatrix: A new matrix formed by selecting some rows and some columns from a matrix and taking the elements at their intersections (preserving the relative order of rows and columns) is called a submatrix of the original matrix.\n\n    For example, in the table below, selecting rows $2,4$ and columns $2,4,5$ yields a $2 \\times 3$ submatrix as follows.\n\n|$9$|$\\color{#6a5acd}3$|$3$|$\\color{#6a5acd}3$|$\\color{#6a5acd}9$|\n|:-|:-|:-|:-|:-|\n|$\\color{#6a5acd}9$|$\\color{blue}4$|$\\color{#6a5acd}8$|$\\color{blue}7$|$\\color{blue}4$|\n|$1$|$\\color{#6a5acd}7$|$4$|$\\color{#6a5acd}6$|$\\color{#6a5acd}6$|\n|$\\color{#6a5acd}6$|$\\color{blue}8$|$\\color{#6a5acd}5$|$\\color{blue}6$|$\\color{blue}9$|\n|$7$|$\\color{#6a5acd}4$|$5$|$\\color{#6a5acd}6$|$\\color{#6a5acd}1$|\n\nOne of its $2\\times3$ submatrices is:\n\n|$4$|$7$|$4$|\n|:-|:-|:-|\n|$8$|$6$|$9$|\n\n2. Adjacent elements: An element in the matrix is adjacent to its four neighbors above, below, left, and right (if they exist).\n\n3. Score of a matrix: The sum of the absolute differences of every pair of adjacent elements in the matrix.\n\nTask: Given a positive-integer matrix with $n$ rows and $m$ columns, choose an $r$-row $c$-column submatrix from it so that the score of this submatrix is minimized, and output that score.", "inputFormat": "The first line contains four integers $n, m, r, c$ separated by single spaces, as described above.\n\nThe next $n$ lines each contain $m$ integers, representing the $n$-row $m$-column matrix described in the problem statement.", "outputFormat": "Output a single integer, the minimum possible score among all submatrices that satisfy the description.", "hint": "Sample 1 explanation\n\nIn this matrix, the $2$-row $3$-column submatrix with the minimum score is formed by the intersection of rows $4, 5$ and columns $1, 3, 4$ of the original matrix, namely:\n\n|$6$|$5$|$6$|\n|:-|:-|:-|\n|$7$|$5$|$6$|\n\nIts score is $|6-5|+|5-6|+|7-5|+|5-6|+|6-7|+|5-5|+|6-6|=6$.\n\nSample 2 explanation\n\nIn this matrix, the $3$-row $3$-column submatrix with the minimum score is formed by the intersection of rows $4, 5, 6$ and columns $2, 6, 7$ of the original matrix. The chosen submatrix with the minimum score is:\n\n|$9$|$7$|$8$|\n|:-|:-|:-|\n|$9$|$8$|$8$|\n|$5$|$8$|$10$|\n\nConstraints\n\n- For $50\\%$ of the testdata, $1 \\leq n \\leq 12$, $1 \\leq m \\leq 12$, and for every element $1 \\leq a_{i,j} \\leq 20$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 16$, $1 \\leq m \\leq 16$, every element satisfies $1 \\leq a_{i,j} \\leq 1000$, $1 \\leq r \\leq n$, and $1 \\leq c \\leq m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 普及组] 子矩阵", "background": "NOIP2014 普及组 T4", "description": "给出如下定义：\n\n1. 子矩阵：从一个矩阵当中选取某些行和某些列交叉位置所组成的新矩阵（保持行与列的相对顺序）被称为原矩阵的一个子矩阵。\n\n    例如，下面图中选取第 $2,4$ 行和第 $2,4,5$ 列交叉位置的元素得到一个 $2 \\times 3$ 的子矩阵如下所示。\n\n|$9$|$\\color{#6a5acd}3$|$3$|$\\color{#6a5acd}3$|$\\color{#6a5acd}9$|\n|:-|:-|:-|:-|:-|\n|$\\color{#6a5acd}9$|$\\color{blue}4$|$\\color{#6a5acd}8$|$\\color{blue}7$|$\\color{blue}4$|\n|$1$|$\\color{#6a5acd}7$|$4$|$\\color{#6a5acd}6$|$\\color{#6a5acd}6$|\n|$\\color{#6a5acd}6$|$\\color{blue}8$|$\\color{#6a5acd}5$|$\\color{blue}6$|$\\color{blue}9$|\n|$7$|$\\color{#6a5acd}4$|$5$|$\\color{#6a5acd}6$|$\\color{#6a5acd}1$|\n\n此矩阵的其中一个 $2\\times3$ 的子矩阵是：\n\n|$4$|$7$|$4$|\n|:-|:-|:-|\n|$8$|$6$|$9$|\n\n2. 相邻的元素：矩阵中的某个元素与其上下左右四个元素（如果存在的话）是相邻的。\n\n3. 矩阵的分值：矩阵中每一对相邻元素之差的绝对值之和。\n\n本题任务：给定一个 $n$ 行 $m$ 列的正整数矩阵，请你从这个矩阵中选出一个 $r$ 行 $c$ 列的子矩阵，使得这个子矩阵的分值最小，并输出这个分值。", "inputFormat": "第一行包含用空格隔开的四个整数 $n,m,r,c$，意义如问题描述中所述，每两个整数之间用一个空格隔开。\n\n接下来的 $n$ 行，每行包含 $m$ 个用空格隔开的整数，用来表示问题描述中那个 $n$ 行 $m$ 列的矩阵。", "outputFormat": "一个整数，表示满足题目描述的子矩阵的最小分值。\n", "hint": "#### 样例 1 说明\n\n该矩阵中分值最小的 $2$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行与第 $1$ 列、第 $3$ 列、第 $4$ 列交叉位置的元素组成，为：\n\n|$6$|$5$|$6$|\n|:-|:-|:-|\n|$7$|$5$|$6$|\n\n其分值为 $|6-5|+|5-6|+|7-5|+|5-6|+|6-7|+|5-5|+|6-6|=6$。\n\n#### 样例 2 说明\n\n该矩阵中分值最小的 $3$ 行 $3$ 列的子矩阵由原矩阵的第 $4$ 行、第 $5$ 行、第 $6$ 行与第 $2$ 列、第 $6$ 列、第 $7$ 列交叉位置的元素组成，选取的分值最小的子矩阵为：\n\n|$9$|$7$|$8$|\n|:-|:-|:-|\n|$9$|$8$|$8$|\n|$5$|$8$|$10$|\n\n#### 数据范围\n\n- 对于 $50\\%$ 的数据，$1\\leq n\\leq 12$，$1\\leq m\\leq 12$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq20$；\n\n- 对于 $100\\%$ 的数据，$1\\leq n\\leq 16$，$1\\leq m\\leq 16$，矩阵中的每个元素 $1\\leq a_{i,j}\\leq 1000$，$1\\leq r\\leq n$，$1\\leq c\\leq m$。", "locale": "zh-CN"}}}
{"pid": "P2260", "type": "P", "difficulty": 6, "samples": [["3 4", "1"], ["123456 654321", "116430"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "CTT（清华集训/北大集训）", "整除分块"], "title": "[清华集训 2012] 模积和", "background": "数学题，无背景。\n", "description": "求\n\n$$\\sum_{i=1}^{n} \\sum_{j=1}^{m} (n \\bmod i) \\times (m \\bmod j), i \\neq j$$\n\nmod 19940417 的值", "inputFormat": "输入只有一行两个整数 $n$，$m$。", "outputFormat": "答案 mod 19940417\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n,m \\leq 10^3$。\n- 对于 $30\\%$ 的数据，保证 $n,m \\leq 10^6$。\n- 另有 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n,m \\leq 10^9$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "{{[Tsinghua Training 2012] Sum of Modular Products}}", "background": "{{A mathematics problem, no background.}}", "description": "{{Compute\n\n$$\\sum_{i=1}^{n} \\sum_{j=1}^{m} (n \\bmod i) \\times (m \\bmod j), i \\neq j$$\n\nthe value modulo 19940417.}}", "inputFormat": "{{The input contains a single line with two integers $n$, $m$.}}", "outputFormat": "{{The answer modulo 19940417.}}", "hint": "{{Constraints\n\n- For 10% of the testdata, it is guaranteed that $n, m \\le 10^3$.\n- For 30% of the testdata, it is guaranteed that $n, m \\le 10^6$.\n- For another 30% of the testdata, it is guaranteed that $n \\le 100$.\n- For 100% of the testdata, it is guaranteed that $1 \\le n, m \\le 10^9$.}}\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[清华集训 2012] 模积和", "background": "数学题，无背景。\n", "description": "求\n\n$$\\sum_{i=1}^{n} \\sum_{j=1}^{m} (n \\bmod i) \\times (m \\bmod j), i \\neq j$$\n\nmod 19940417 的值", "inputFormat": "输入只有一行两个整数 $n$，$m$。", "outputFormat": "答案 mod 19940417\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n,m \\leq 10^3$。\n- 对于 $30\\%$ 的数据，保证 $n,m \\leq 10^6$。\n- 另有 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n,m \\leq 10^9$。\n\n", "locale": "zh-CN"}}}
